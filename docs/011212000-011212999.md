# StackOverflow 问答 11212000-11212999

# java - Java 和 Android：如何使用 Intent 打开多个文件？

> ID：11212001
> 
> 赞同：6
> 
> 时间：2012-06-26T16:39:01.573
> 
> 标签：java, android, android-intent

我确信这是一个微不足道的问题，但我没有找到答案。

我正在制作一个 Android 应用程序，我想从中打开显示多张图像的图像查看器。我知道如何只用一张图片来做到这一点：

```
 Intent intent = new Intent();  
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file1 = new File("/mnt/sdcard/photos/20397a.jpg");
    intent.setDataAndType(Uri.fromFile(file1), "image/jpg");
    startActivity(intent); 
```

这完美地工作。但是如何将多张图像传递给查看器？

谢谢！！L.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:52:43.173

> 我想打开图像查看器

Android 中没有“图像查看器”。设备和用户可能有许多不同的应用程序能够查看`image/jpeg`从本地文件加载的文件。

> 但是如何将多张图像传递给查看器？

抱歉，没有`Intent`打开任何类型的多个文件的标准。

另外，请不要`/mnt/sdcard/`在您的应用程序中进行硬编码。请在`Environment`类上使用正确的方法来确定外部存储上的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:54:58.077

您需要在数组中列出要查看的所有文件。然后显示其中一个数组，并在拖动时显示下一个图像。

```
ArrayList list;

private DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); // Ansi date format

list = new ArrayList();  
  String path = "c:/temp/";  
  File dir = new File(path);   
  for (String dirListing : dir.list()) {
    if ((dirListing.endsWith(".jpg")) ||
      (dirListing.endsWith(".png")) || 
      (dirListing.endsWith(".gif"))) {
      try { // write all file-info to a arraylist
        File f = new File(path+dirListing);      
        list.add(f.getCanonicalPath()); 
        list.add(f.getName());
        list.add(String.valueOf(f.length()));
        String lastModified = dateFormat.format(new Date(f.lastModified()));
        list.add(lastModified);
      }
      catch (IOException e) {
        e.printStackTrace();
      }
      catch (IndexOutOfBoundsException e) {
        e.printStackTrace();
      }
    }
  } 
```

现在您可以读取数组并一一显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-13T14:09:09.883

不要使用硬编码路径。

更改此行：

```
File file1 = new File("/mnt/sdcard/photos/20397a.jpg"); 
```

至

```
File sdDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); 
```

它将定位到

```
/storage/emulated/0/Picture 
```

`Environment.DIRECTORY_PICTURES`如果你想要你的 sdcard 的父目录，你可以删除。

由于您指定的是单个文件`20397a.jpg`，这就是您无法看到其他图像的原因。

如果您想查看图片以外的其他内容，请将 ' `image/jpg`' 更改为 ' `image/*`'

# css - CSS将图像放在div中间：隐藏溢出

> ID：11212002
> 
> 赞同：1
> 
> 时间：2012-06-26T16:39:02.733
> 
> 标签：css, image, center

我想在 div 容器中放置一个宽度为 200 像素且高度未知的个人资料图片。div 为 150 像素 x 150 像素。img 应水平居中，两侧隐藏出血。我无法让它工作，未知的高度搞砸了，因为 img 宽度的显示方式取决于高度。- 景观图像将获得更高的宽度以填充高度差并保持图像成比例。如果是纵向图像，则宽度应为 150px 作为 div...

观看图片：[http ://s18.postimage.org/52hfcc5h3/Sk_rmavbild_2012_06_26_kl_19_12_49.png](http://s18.postimage.org/52hfcc5h3/Sk_rmavbild_2012_06_26_kl_19_12_49.png)

```
#profilePicture {
    display: block;
    float: left;
    width: 150px;
    height: 150px;
    overflow: hidden;
    position: relative;
    margin: 0 auto;

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
#profilePicture img {
    min-width: 150px;
    min-height: 150px;
    left: 50%;
    margin-left: -100px;
    top: 50%;
    margin-top: -100px;
    position:absolute;

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:40:23.313

您是否考虑过使用背景图像？这会让事情变得容易得多。

```
.img {
    overflow: hidden;
    background-image: url('/xyz.jpg');
    background-size: cover;
    background-position: center;
} 
```

这是小提琴-> [http://jsfiddle.net/haNj3/1/](http://jsfiddle.net/haNj3/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:58:30.353

我想你想做的是[这个](http://jsfiddle.net/Rorok_89/wjw83/8/)。

```
.main{
width:150px;
margin: 0 auto;
overflow:visible;
position: relative;
height: 200px;
outline: 1px solid blue;
}

img.absolute{
width: 200px;
left: 50%;
margin-left: -100px;
margin-top: 0;
position:relative;
outline: 1px solid red; 
} 
```

我认为在这种情况下没有必要使用绝对定位。

# eclipse - Eclipse Egit 使用远程系统添加具有 git 支持的项目

> ID：11212008
> 
> 赞同：3
> 
> 时间：2012-06-26T16:39:19.073
> 
> 标签：eclipse, ssh, sftp, egit

我有一个具有 SSH 访问权限的服务器。在这台服务器上，我有一个 php/yii 项目，包括一个 git 存储库（使用 git 进行版本控制）。是否可以为这些远程项目使用 EGit Team Provider（它适用于本地项目/ .git 文件夹）？

我只是使用向导（共享项目）得到空点异常，并且无法让 EGit 识别现有的 git 项目。

也许可以通过在linux服务器上创建一个新的测试.git repo来尝试这个，添加一个php文件，使用eclipse远程系统通过ssh浏览包含.git文件夹的文件夹，右键单击该文件夹->创建远程项目然后以某种方式弄清楚如何添加 EGit ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-06T23:01:57.047

如果存储库不以 .git 扩展名结尾，EGIT 将无法识别它

登录到 LINUX 服务器

cd 到您希望存储库所在的路径

mkdir your_project_name.git //这将创建存储库

git init --bare //这实际上会初始化git仓库

克隆此存储库

在本地仓库中添加文件

将文件添加到索引，提交并推送到主控

# javascript - 谷歌地图、Rails 和 Jquery

> ID：11212009
> 
> 赞同：0
> 
> 时间：2012-06-26T16:39:22.757
> 
> 标签：javascript, jquery, ruby-on-rails, google-maps, gmaps4rails

**更新 7/17 已解决**

我已将我的代码更新为 Solved 版本。

***原始问题***

我正在尝试通过 Gem gmaps4rails 显示 Google 地图。[在研究了此处](https://stackoverflow.com/questions/10229274/gmaps4rails-shows-just-half-of-the-map-when-iside-tab-any-idea-why?rq=1)和[此处](https://stackoverflow.com/questions/3014156/google-maps-and-jquery-tabs)发布的以下 2 个问题后，Google 地图似乎存在一个选项卡问题，该选项卡隐藏和显示来自 Jquery 或 Javascript 的内容，并且如果没有 Jquery 中的一些代码，将无法正确显示 Google 地图。

我一直在调整我的 javascript 中的地图大小，有人能指出我的错误吗？

谢谢！

我的代码：

**Javascript**

```
 <script>
$(document).ready(function(){
    //Default Action
    $(".gear_tab_content").hide(); //Hide all content
    $("ul.gear_page_tabs li:first").addClass("active").show(); //Activate first tab
    $(".gear_tab_content:first").show(); //Show first tab content
    $(".map_container").hide(); //Hide the Google Map

    //On Click Event
    $("ul.gear_page_tabs li").click(function() {
        $("ul.gear_page_tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".gear_tab_content").hide(); //Hide all tab content
        var activeTab = jQuery(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).fadeIn(); //Fade in the active content
    if(activeTab == '#GearLocation') {  
        $(".map_container").show();             
            Gmaps.loadMaps();
            Gmaps.map.addMarkers(json);
            google.maps.event.trigger(Gmaps.map, 'resize');

     }
     return false;
    });

});
</script> 
```

**我的观点**

```
<div id="GearLocation" class="gear_tab_content">    
    <%= gmaps4rails(@json) %>
</div><!-- End GearLocation --> 
```

**控制器**

```
 def show
    @gear = Gear.find(params[:id])
    @storegear = @gear.user.gears.all(:order => 'created_at DESC', :limit => 6)
    @comments = @gear.comments.all
    @user = @gear.user
    @store = @gear.user.store.id
    @json = @gear.to_gmaps4rails
    respond_to do |format| 
      format.html
      format.json { render :json => @json }
    end   
  end 
```

**路线**

```
 gears GET    /gears(.:format)                             gears#index
                 POST   /gears(.:format)                             gears#create
        new_gear GET    /gears/new(.:format)                         gears#new
       edit_gear GET    /gears/:id/edit(.:format)                    gears#edit
            gear GET    /gears/:id(.:format)                         gears#show
                 PUT    /gears/:id(.:format)                         gears#update
                 DELETE /gears/:id(.:format)                         gears#destroy
                        /gear(.:format)                              gears#index 
```

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:44:55.283

当您显示/隐藏/调整谷歌地图地图时，您需要调用地图的调整大小事件。所以你应该在显示后添加它：

```
...
Gmaps.map.addMarkers(json);
google.maps.event.trigger(Gmaps.map, 'resize');
... 
```

我假设 Gmaps.map 是 google.maps.Map 类的一个实例......

# python - 如何提取由方括号分隔的子字符串并生成子字符串

> ID：11212014
> 
> 赞同：1
> 
> 时间：2012-06-26T16:39:44.910
> 
> 标签：python, regex

在识别出与方括号内包含的模式匹配的子字符串后，我想提取并构造一些字符串：

> 例如：如果我的文字是“2 杯 [9 盎司] [10 克] 面粉”
> 
> 我想从这个输入中生成 4 个字符串：
> 
> 1.  ****“2杯”->我们****
> ***   **“9盎司”->英国帝国***   **“10 克”-> 公制***   **“面粉” -> 成分名称****

 **作为开始，我已经开始识别任何包含 oz 关键字的方括号，并编写了以下代码，但没有发生匹配。有什么想法和最佳实践可以做到这一点？

```
 p_oz = re.compile(r'\[(.+) oz\]', re.IGNORECASE) # to match uk metric
    text = '2 cups [9 oz] flour'

    m = p_oz.match(text)

    if m:
        found = m.group(1)
        print found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:42:26.033

您需要使用`search`而不是`match`.

```
m = p_oz.search(text) 
```

`re.match`尝试将整个输入字符串与正则表达式进行匹配。那不是你想要的。您想找到与您的正则表达式匹配的子字符串，这就是`re.search`目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:48:36.897

我只是在扩展 BrenBarn 接受的答案。我喜欢在午餐时解决一个好问题。以下是我对您问题的完整实施：

给定字符串`2 cups [9 oz] [10 g] flour`

```
import re

text = '2 cups [9 oz] [10 g] flour' 

units = {'oz': 'uk imperical', 
         'cups': 'us', 
         'g': 'metric'}

# strip out brackets & trim white space
text = text.replace('[', '').replace(']', '').strip()

# replace numbers like 9 to "9
text = re.sub(r'(\d+)', r'"\1', text)

# expand units like `cups` to `cups" -> us`
for unit in units:
    text = text.replace(unit, unit + '" -> ' + units[unit] + "~")

# matches the last word in the string
text = re.sub(r'(\w+$)', r'"\1" -> ingredient name', text)

print "raw text: \n" + text + "\n"
print "Array:"
print text.split('~ ') 
```

将返回一个字符串数组：

```
raw text:
"2 cups" -> us~ "9 oz" -> uk imperical~ "10 g" -> metric~ "flour" -> ingredient name

Array: [
 '"2 cups" -> us', 
 '"9 oz" -> uk imperical', 
 '"10 g" -> metric', 
 '"flour" -> ingredientname'
] 
```**

# jquery - 带有 HTML 模板的 jquery 克隆

> ID：11212023
> 
> 赞同：0
> 
> 时间：2012-06-26T16:40:07.953
> 
> 标签：jquery, asp.net, html, clone

我已经看过一些关于 jQuery 模板的教程，据我所知，这些教程已经过时，所以我尝试使用 .Clone，当我只显示一个结果时，它可以正常工作，但是当我想显示整个列表时结果它不起作用，我确定是因为我的 jQuery 不好。我想克隆整个 .template 类，从响应数组的每个成员中填充它，然后将每个新克隆的模板添加到 #fillresultsdiv ，如果有人可以帮助找出我做错了什么

这是jQuery：

```
 success: function (msg) {
                    var events = [];
                    var obj = $.parseJSON(msg.d);
                    $(obj.res).each(function () {
                        var newRow = $('.template').clone()
                        newRow.$('.day').text($(this).attr('day')),
                            newRow.$('.dayofweek').text($(this).attr('dayofweek')),
                            newRow.$('.month').text($(this).attr('month')),
                            newRow.$('.title').text($(this).attr('title')),
                            newRow.$('.time').text($(this).attr('time')),
                        newRow.$('.venue').text($(this).attr('venue')),
                        newRow.$('.description').text($(this).attr('description'))
                        $('#fillresultsdiv').append(newRow); 
```

这是一个示例响应：

```
 d: "{"res":[{"day":"26","dayofweek":"Tue","month":"Jun","title":"Glen Hansard","venue":"Vic Theatre","time":"7:00 PM","ticketurl":"http://seatgeek.com/glen-hansard-t 
```

这是我的模板 HTML：

```
 <div class="Template">
      <div class="accordian_head1">
        <div class="date_container">
          <a class="day"></a><br/><br/>
          <a class="dayofweek"></a><br/>
          <a class="month"></a>
        </div>
        <div class="title_container">
          <a class="title">Title</a>
          <a class="venue"><br/></a><a class="time"></a>
        </div>
        <div class="links">
          <a href=" + dr(36).ToString() + ?aid=854">Buy Tickets</a><br/>
          <a href="javascript:void(0)" onclick="fnAddToCalendar({ 'eventID' : '  dr(0).ToString() + '});">Watch</a><br/>
        <a href="#">Email</a><br/>
        <a href=""Calendar.aspx"">Calendar</a><br/>
    </div>
  </div>
  <div class="accordian_body1new"><a class="description"></a>
  </div> 
```

这就是#fillresultsdiv 的全部内容

```
 <div id="fillresultsdiv"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:50:04.613

试试这个：

```
 success: function (msg) {
                var events = [];
                var obj = $.parseJSON(msg.d);
                $(obj.res).each(function () {
                    var newRow = $('.template').clone();
                    newRow.find('.day').text($(this).attr('day'));
                    newRow.find('.dayofweek').text($(this).attr('dayofweek'));
                    newRow.find('.month').text($(this).attr('month'));
                    newRow.find('.title').text($(this).attr('title'));
                    newRow.find('.time').text($(this).attr('time'));
                    newRow.find('.venue').text($(this).attr('venue'));
                    newRow.find('.description').text($(this).attr('description'));
                    newRow.appendTo('#fillresultsdiv');
                  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:01:52.700

```
// Parse the entire string, because `msg` is not an object,
// so you can't use `msg.d`
var obj = $.parseJSON( msg );

$( obj.d.res ).each( function() {
    var newRow = $( '.template' ).clone();

    // Now loop through the object
    for ( var prop in this ) {
        if ( this.hasOwnProperty( prop ) ) {

            // Lucky for you, the keys match the classes :)
            $( '.' + prop, newRow ).text( this[ prop ] );
        }
    }
    $( '#fillresultsdiv' ).append( newRow );
} ); 
```

但是您绝对应该使用 a`DocumentFragment`来加速 DOM 操作并立即附加所有内容。因为记住：**DOM 很慢**。

```
var obj = $.parseJSON( msg );

// Create a DocumentFragment
var el = document.createDocumentFragment();
$( obj.d.res ).each( function() {
    var newRow = $( '.template' ).clone();
    for ( var prop in this ) {
        if ( this.hasOwnProperty( prop ) ) {
            $( '.' + prop, newRow ).text( this[ prop ] );
        }
    }

    // Append to the DocumentFragment
    $( el ).append( newRow );
} );

// And append the DocumentFragment to the DIV
$( '#fillresultsdiv' ).append( el ); 
```

# ruby-on-rails - 从 Rails 中的 JSON 文件导入种子数据时设置对象 ID

> ID：11212027
> 
> 赞同：4
> 
> 时间：2012-06-26T16:40:25.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我正在从这样的 json 文件中导入种子文件中的对象：

```
[
{
    "email":"jon@a.com",
    "id":1,
    "league_id":1,
    "name":"Slim Jims are good for the heart...OH YEAH!",
    "owner":"Jon"
},
{
    "email":"robert@a.com",
    "id":2,
    "league_id":1,
    "name":"The Bucket List",
    "owner":"Robert"
}
] 
```

我的种子文件是：

```
require 'json'
Team.delete_all
JSON.parse(open("#{Rails.root}/doc/teams.json").read).each do |stuff|
   Team.create(stuff)
end 
```

我的问题是它分配了一些随机 id 而不是 json 文件中的 id。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T15:42:58.970

对于任何想知道的人，您可以使用以下语法而不是 create 来做到这一点：

```
JSON.parse(open("#{Rails.root}/doc/teams.json").read).each do |stuff|
    team = Team.new(stuff)
    team.id = stuff['id']
    team.save!
end 
```

# perl - Perl 将 csv 行拆分为变量

> ID：11212028
> 
> 赞同：-2
> 
> 时间：2012-06-26T16:40:28.693
> 
> 标签：perl, csv, cgi-bin

我需要将 csv 行拆分为变量

```
# sample data
"100-001","Bla Bla, Bla, Bla","","",0.00000,"W1",6.000,0.000 
```

我试过了，但数字字段没有“”，所以它不起作用......

```
($var0,$var1,$var2,$var3,$var4,$var5,$var6,$var7,$var8) = split(/\","/); 
```

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T18:58:35.573

对于 CSV，您应该使用解析器。显而易见的是 Text::CSV。如果如您所说，安装模块很困难，您可以使用 Pure Perl 实现，称为[`Text::CSV_PP`](http://api.metacpan.org/source/MAKAMAKA/Text-CSV-1.21/lib/Text/CSV_PP.pm). 将其粘贴到文件中并使用它。问题解决了。

解决这个问题的另一种方法是使用核心模块[`Text::ParseWords`](http://p3rl.org/Text%3a%3aParseWords)，它可以在紧要关头进行体面的 CSV 解析。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::ParseWords;

print "$_\n" for parse_line( ',', 0, '"100-001","Bla Bla, Bla, Bla","","",0.00000,"W1",6.000,0.000'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:48:14.350

这将起作用：

```
($var0,$var1,$var2,$var3,$var4,$var5,$var6,$var7,$var8) = 
    split(/(?<="|[0-9]),(?="|[0-9])/); 
```

*   `?<=`是一个后向断言
*   `?=`是一个前瞻断言

# android - 带有摄像头意图的视频记录到字节 []

> ID：11212032
> 
> 赞同：0
> 
> 时间：2012-06-26T16:40:35.380
> 
> 标签：android, bytearray, fileoutputstream

我有一个摄像头记录意图，当结果正常时，我尝试将此视频转换为 byte[] 以发送 Web 服务：

我这样做：

```
if (resultCode == RESULT_OK) {
                    // Video guardado
                    videoUri = data.getData();
                    if (videoUri != null) {

                        ByteArrayOutputStream out = new ByteArrayOutputStream();
                        FileInputStream fichero_codificar = null;
                        try {

                            fichero_codificar = new FileInputStream(
                                    videoUri.getPath());

                            byte[] buf = new byte[1024];
                            int n;
                            while (-1 != (n = fichero_codificar.read(buf))) {
                                out.write(buf, 0, n);
                            }
                            byte[] videoByte = out.toByteArray();
                            strBase64 = Base64.encode(videoByte);
                        } catch (FileNotFoundException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        } 
```

但在 fichero_codificar = new FileInputStream(videoUri.getPath())

logcat 说文件不存在或补丁不正确。

有人有我的问题的例子吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:55:26.027

看起来您查找的信息不正确。以下是我在应用程序中使用相机意图的方式：

```
 thumbnail = (Bitmap) data.getExtras().get("data");  
            try {

                FileOutputStream out = new FileOutputStream(getPicName(index));
                thumbnail.compress(Bitmap.CompressFormat.PNG, 90, out);
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

因此，也许可以尝试使用 Video 对象而不是 Bitmap 对象。 ~~如果这不起作用，您可以尝试 .getAbsolutePath() 代替。~~

是的，它绝对不是你认为的那样。我在我的身上运行了调试器，getPath 返回了这个：`/external/images/media/21`，这是一个内容 Uri。

# excel - 如何复制行数或观察行数的单词？

> ID：11212039
> 
> 赞同：0
> 
> 时间：2012-06-26T16:40:54.987
> 
> 标签：excel, notepad++

如何复制行数或观察行数的单词？

1.  一
2.  二
3.  三
4.  四

我想要复制第 2-4 行。不是第 1-3 行。我想保持线条的结构：

1.  2.  二
2.  4.  四

![在此处输入图像描述](../Images/1474e5066ebce023652a84bb04e5c9d6.png)

我正在使用 Excel 或 Notepad++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:42:21.163

其他几种选择...

a) 从即时窗口或 VBA 代码：

```
 Range("a1,a3,a5").Select
 union(selection.offset(,3),selection).Select
 Selection.FillRight 
```

b）然后激活自动过滤器

*   只选择 {uno,tre,cinque}。
*   选择 D1:D5 然后按住 Ctrl 并选择 A1:A5
*   从菜单中选择*主页 | 编辑 | 填充 > FillRight*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:44:38.537

如果原始数据在 Excel 的 A 列中，您可以在 B 列中放入公式（例如 B1）：

```
=IF(MOD(ROW(A1),2) = 1, A1, "") 
```

并将其拖下。

如果您想摆脱公式，您可以将特殊/值复制/粘贴到新列中。

# php - 如何在PHP中使用正则表达式将'\'添加到每个'&'？

> ID：11212040
> 
> 赞同：1
> 
> 时间：2012-06-26T16:41:02.530
> 
> 标签：php, string

我有一个包含＆符号的字符串。我需要通过在字符串中添加一个“\”来转义字符串中的每个＆符号。我怎么做？我对正则表达式很陌生，所以如果这是一个非常简单的问题，请原谅。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T16:42:12.900

您不需要正则表达式：

```
$s = str_replace('&', '\\&', $s); 
```

从[文档](http://php.net/manual/en/function.str-replace.php)中：

> 如果你不需要花哨的替换规则（比如正则表达式），你应该总是使用这个函数而不是 preg_replace()。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T16:42:05.233

```
$str = "one & two & three";
$str = str_replace('&', '\\&', $str); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T16:42:15.757

```
str_replace('&', '\\&', $string); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T16:44:17.773

```
$string = str_replace('&', '\\&', $string); 
```

# image-processing - 如何在 JavaCV 中获取区域的大小

> ID：11212043
> 
> 赞同：6
> 
> 时间：2012-06-26T16:41:18.207
> 
> 标签：image-processing, opencv, javacv

在我的项目中，我想从特定颜色的最大同质区域中获取大小（在下面的示例中，它是蓝天）。

我的第一个想法是转换原始图像：

![原始图像](../Images/d4fb2ae085cdb5397280243efb630f9f.png)

到二值图像，检测天空颜色并用这个区域创建一个蒙版： ![蒙版图像](../Images/b8c9f017ca844792993e44587ba2bcef.png)

但是我怎样才能得到这些白色像素的大小和位置呢？我想要一个有效的方法，如果图片在图片的上 1/3 处有蓝天，那就是真的。有任何想法吗？我应该创建一个“全局掩码”（参见评论中的图 3）并将其与二进制图片进行比较吗？或者有没有更简单的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:20:34.367

算法如下：

1.  将输入图像转换为[YCbCr 颜色空间](http://en.wikipedia.org/wiki/YCbCr)，这有助于检测蓝色（以及红色）颜色： ![YCrCb 图像](../Images/ed6063043d0d18427c06b94c47db9bdf.png) 要将某些图像转换为另一个颜色空间，请使用[cvtColor](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor)。
2.  从中提取蓝色通道： ![蓝色图像](../Images/9c79331ce97d54d8aa814362066cdeea.png) 使用函数`extractChannel`提取所需的通道。
3.  检测蓝色最大值*[0-255]的区域。*我使用了函数[minMaxIdx](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#void%20minMaxIdx%28InputArray%20src,%20double*%20minVal,%20double*%20maxVal,%20int*%20minIdx,%20int*%20maxIdx,%20InputArray%20mask%29)，然后将最大值乘以**0.8**（这是阈值）。您可以使用更复杂的方法，例如直方图分析。
4.  制作蓝色蒙版： ![二进制](../Images/ea7444fb7295d873ba75107cbcecc84d.png) 为此，我使用了在步骤 3 中计算的[阈值](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-threshold)函数（作为参数）。
5.  找到面具中的所有蓝色轮廓。在 OpenCV 中这很容易——只需使用[findContours](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)。
6.  最后，检测具有最大正方形的轮廓并找到其坐标（中心）。要计算最大正方形的轮廓，您可以使用函数[contourArea](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#double%20contourArea%28InputArray%20contour,%20bool%20oriented%29)。

此外，您可以将图像转换为[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)并使用[inRange](http://opencv.willowgarage.com/documentation/cpp/operations_on_arrays.html#cv-inrange)检测蓝色，而不是步骤**1-4 。**

这是我的 C++ 实现：

```
Mat inMat = imread("input.jpg"), blueMat, threshMat;

cvtColor(inMat, blueMat, CV_BGR2YCrCb);//convert to YCrCb color space

extractChannel(blueMat, blueMat, 2);//get blue channel

//find max value of blue color
//or you can use histograms
//or more complex mathod
double blueMax;
minMaxIdx(blueMat, 0, &blueMax);

blueMax *= 0.8;
//make binary mask
threshold(blueMat, threshMat, blueMax, 255, THRESH_BINARY);

//finding all blue contours:
vector<vector<Point> > contours;
vector<Vec4i> hierarchy;
findContours(blueMat, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

double maxSquare = 0;
vector<Point> maxContour;
//finding contours with biggest square:
for (size_t i=0; i<contours.size(); i++)
{
    double square = contourArea(contours[i]);
    if (square > maxSquare)
    {
        maxContour = contours[i];
        maxSquare = square;
    }
}

//output results:
Point center = centerPolygon(maxContour);
cout << "square = " << maxSquare << endl;
cout << "position: x: " << center.x << ", y: " << center.y << endl; 
```

这里的`centerPolygon`功能：

```
Point centerPolygon(const vector<Point>& points)
{
    int x=0, y=0;

    for (size_t i=0; i<points.size(); i++)
    {
        x += points[i].x;
        y += points[i].y;
    }

    return Point(x/points.size(), y/points.size());
} 
```

程序的输出如下：

```
square = 263525
position: x: 318, y: 208 
```

* * *

您可以将此代码转换为 JavaCV - 请参阅[本教程](http://code.google.com/p/javacv/wiki/ConvertingOpenCV)。

# xml - 遇到“特殊”字符时出现 NSXMLParser 错误

> ID：11212044
> 
> 赞同：0
> 
> 时间：2012-06-26T16:41:18.853
> 
> 标签：xml, parsing, xml-parsing, nsxmlparser

我正在尝试使用 NSXMLParser 解析看起来像这样的 XML 文件：

```
<?xml version="1.0" encoding="us-ascii"?>
<teams>
    <team id = "A1">
        <player1>John</player1>
        <player2>José</player2>
    </team>
    ...
</teams> 
```

我使用以下代码：

```
NSString *urlString = [NSString stringWithFormat:@"http://www....abc.php?category=%@&poule=%c", @"S", 'B'];  // Obviously, this contains an actual web address
NSURL *url = [NSURL URLWithString:urlString];
NSData *xml = [[NSData alloc] initWithContentsOfURL:url];   // <==
NSXMLParser *xmlParserObject = [[NSXMLParser alloc]initWithData:xml];
[xmlParserObject setDelegate:self];
[xmlParserObject parse]; 
```

我实现了 didStartElement、foundCharacters、didEndElement 和 parserErrorOccurred 委托函数。

这一切都很顺利，直到遇到“特殊”字符，例如 é。委托方法parserErrorOccurred报如下错误：

```
parser error: Error Domain=NSXMLParserErrorDomain Code=1544 "The operation couldn’t be completed. (NSXMLParserErrorDomain error 1544.)"
parser error: Error Domain=NSXMLParserErrorDomain Code=5 "The operation couldn’t be completed. (NSXMLParserErrorDomain error 5.)" 
```

然后我将标有“<==”的部分替换为以下内容：

```
NSError *error;
NSData *xml = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];
if (xml == nil) {
    NSLog(@"*** Fatal error: %@\nuserInfo:%@", error, [error userInfo]);
} 
```

除上述错误外，还出现以下错误：

```
 *** Fatal error: Error Domain=NSCocoaErrorDomain Code=261 "The operation couldn’t be completed. (Cocoa error 261.)" UserInfo=0x8158d90 {NSURL=http://www....abc.php?category=S&poule=B, NSStringEncoding=4}
userInfo:{
    NSStringEncoding = 4;
    NSURL = "http://www....abc.php?category=S&poule=B";
} 
```

我还尝试将 NSUTF8StringEncoding 替换为任何其他编码器，例如 NSISOLatin1StringEncoding、NSUTF16StringEncoding、NSASCIIStringEncoding、NSUnicodeStringEncoding 等。这导致了以下错误：

```
 -[__NSCFString bytes]: unrecognized selector sent to instance 0x6e4cbc0
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString bytes]: unrecognized selector sent to instance 0x6e4cbc0'
*** First throw call stack:
(0x12d0022 0x1781cd6 0x12d1cbd 0x1236ed0 0x1236cb2 0xce5f51 0xb447 0xaa89 0x1f2e330 0x1f2f439 0x908b9b24 0x908bb6fe)
terminate called throwing an exception(lldb) 
```

我无法控制 XML 的内容，但如果它确实包含不正确的信息，那么也许我可以与网站管理员交谈。

我可以将 é 字符显示为 'e' 或 '?' 如果这就是它所需要的。

非常感谢有关导致此错误的原因以及如何纠正或绕过它的任何建议。

发送！

--国标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T16:02:03.960

我找到了解决这个问题的方法（不是解决方案）。为了从 NSURL 到 NSData，我使用了以下代码：

```
 NSError *error;
        NSString *xmlText = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:&error];
        xmlText = [xmlText stringByReplacingOccurrencesOfString:@"é" withString:@"e"];
        NSData *xml = [xmlText dataUsingEncoding:NSASCIIStringEncoding]; 
```

所以基本上，我

*   将 NSURL 转换为 NSString
*   通过替换“特殊”字符来编辑该字符串
*   使用编辑后的字符串创建 NSData

我还发现我必须使用 NSASCIIStringEncoding 而不是 NSUTF8StringEncoding（这是 XML 指定的，但之前失败了）。

无论如何，仍然欢迎提出真正解决问题的建议，但这种绕过方式暂时适用于我......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-01T12:17:19.973

如果 utf-8 字符无效，最好先“清理”从源接收的数据，然后再将其处理给 NSXMLParser。正如在处理 NSXMLParser 时经常建议的那样，将数据转换为 ascii 并不总是一个好主意，例如当您的源代码包含西里尔字符时。

在 Swift 中，它可以这样完成：

```
var buffer = data // malformed UTF-8
buffer.append(0 as UInt16)
let cleanBuffer = buffer.withUnsafeBytes { (p: UnsafePointer<CChar>) in String(cString: p) }
let cleanString = cleanBuffer.replacingOccurrences(of: "\u{FFFD}", with: String())
let cleanData = clean.data(using: String.Encoding.utf8) {
   self.parser = XMLParser(data: cleanData) // Assuming a 'parser' variable is already present
} 
```

基于[清理格式错误的 UTF8 字符串](https://stackoverflow.com/questions/44611598/cleaning-malformed-utf8-strings)

# matlab - 我应该如何在 Matlab 中实现混淆矩阵？

> ID：11212045
> 
> 赞同：4
> 
> 时间：2012-06-26T16:41:34.040
> 
> 标签：matlab, confusion-matrix

我知道什么是混淆矩阵。

给定 N 个类，我们有一个 NxN 矩阵 M 其中 - 每行是类之一 - 每列是类之一

M(X,Y) = 已归入 X 类并应归入 Y 类的元素数（当然，如果 X=Y，则分类正确）。

现在我有一组“复合类”和**可变**数量的类

*   “复合”是指一个类对应于一个向量（**可变**长度）。例如，如果类由 2 元素向量表示，则可能的类将是：

    [0,0]

    [0,1]

    [1,0]

    [1,1]

我的目标是定义一个函数：

*   输入：分类元素的 NxM 矩阵（其中 N=分类元素的数量，M=每个类别的元素数量），每个元素的预期类别的 NxM 矩阵。
*   OUTPUT：输入类对应的NXN混淆矩阵

输出示例：

```
[1 0 0]
[0 2 0]
[0 1 0] 
```

**这个矩阵是 3x3 矩阵。**

这意味着总类数为 3，分类元素数为 4：

*   一个元素本应归为第 1 类，并已归为第 1 类
*   两个元素应该被归入第 2 类并且已经被归为第 2 类
*   一种元素应归为第 3 类，并已归为第 2 类

（元素是如何组成的并不重要。让我们想象一下这些类可能是：

```
[0,0,1]
[1,0,1]
[1,1,1] 
```

** 输入矩阵示例（预期类）：**

```
[0,0,1]
[1,0,1]
[1,0,1]
[1,1,1] 
```

** 输入矩阵示例（获得类）：**

```
[0,0,1]
[1,0,1]
[1,0,1]
[1,0,1]   <-- this is the element(line) incorrectly classified 
```

我应该怎么做？（分类由 Perceptron 或 Adaline 神经网络进行）

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:32:22.300

关键是按以下形式使用[ismember](http://www.mathworks.com/help/techdoc/ref/ismember.html)`[Lia,Locb] = ismember(A,B,'rows')` ： 第二个输出参数告诉您矩阵 A 的每一行与矩阵 B 的哪一行匹配。使用此信息构建混淆矩阵（这是统计工具箱中的内置函数）。

```
classes = [0 0 1;
            1 0 1; 
            1 1 1];
 expected = [0 0 1;
             1 0 1;
             1 0 1;
             1 1 1];
 obtained = [0 0 1;
             1 0 1;
             1 0 1;
             1 0 1];    
>> [~, ex] = ismember(expected, classes,'rows')    
ex =    
     1
     2
     2
     3

>> [~, ob] = ismember(obtained, classes,'rows')    
ob =

     1
     2
     2
     2

>> confusionmat(ex,ob,'order',[1 2 3])    
ans =

     1     0     0
     0     2     0
     0     1     0 
```

如果您没有访问权限`confusionmat`，您可以使用`accummarray`自己来完成。

```
num_observations = length(ex);
num_classes = size(classes,1);
accumarray([ex,ob],ones(num_observations,1),[num_classes,num_classes]) 
```

# javascript - mustache.js 在我的 rails 应用程序中卡在 0.4.0-dev 上

> ID：11212058
> 
> 赞同：1
> 
> 时间：2012-06-26T16:42:29.080
> 
> 标签：javascript, ruby-on-rails, mustache

有没有人经历过这个？我有供应商的 mustache.js 0.5.1。我的供应商文件是 Rails 提供的文件以及我在浏览器中看到的文件。当我调用 Mustache.to_html 时，它的功能没有执行（0.4.0 没有`Mustache.render`，这就是我发现这个问题的方式）。调用`Mustache.version`返回“0.4.0-dev”。某事，某处，正在做一些邪恶的事。

*   供应商/资产/javascripts/mustache.js 是 0.5.1。
*   `Mustache.version`在 Chrome 控制台中返回“0.4.0-dev”......所以有些东西正在覆盖 Mustache 原型。邪恶的东西。
*   我们已经杀死了代码/rubymonk/tmp
*   我们已经反弹了资产缓存
*   我们已将资产设置为调试模式
*   我们已经切换到生产环境，预编译资产，并寻找挥之不去的垃圾
*   我们似乎没有在浏览器中加载 0.4.0 版本的 mustache——但是我们的 0.5.1 代码没有执行（我们添加的 console.log 语句不会运行，实际的 mustache 文件永远不会被命中由调试器）
*   我们已经完成了 'mustache' 和 '0.4.0-dev' 的 code/rubymonk 目录的完整 grep.... nadda（除了你所期望的）
*   我们已经查看了整个硬盘驱动器（至少和 Spotlight 一样……但它似乎做得很好）
*   我们已经为 'mustache' 和 '0.4.0-dev' 找到了 gems 目录......再次，什么都没有。

如果我真的做错了什么，我会在我们排序后发布解决方案。

-s-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:01:49.473

解决！`Mustache`我们的应用程序正在使用 Intercom (http://intercom.io)——这在其他方面非常出色——但我们下载的对讲 Javascript 似乎在全局命名空间中被吹走了。

我会向他们发送一条消息，要求他们为他们的东西命名。与此同时，我想我们只需要修改我们自己的 mustache.js 副本以不同的命名空间。也就是说，添加以下内容：

```
var MyApp = MyApp || {}; 
```

并将出现的 替换`Mustache`为`MyApp.Mustache`。

希望这对其他人有帮助。如果没有，至少我可以享受在 StackOverflow 海上航行的短暂船只。

-史蒂文

PS：我们发现这一点是因为我们试图在客户端用纯 Javascript 渲染 mustache 部分，这显然在 mustache 0.4.0 中被破坏了（它只会将我们的调用直接吐出`{{ > mypartial }}`到 HTML 中，什么也不渲染。

# dispatch-async - dispatch_async 阻塞到串行队列是否保持顺序？

> ID：11212059
> 
> 赞同：4
> 
> 时间：2012-06-26T16:42:31.337
> 
> 标签：dispatch-async

当我通过 dispatch_async 将两个块提交到串行队列中时，它是否确保第二个在第一个之后运行：

*   dispatch_async(serial_queue, b1);
*   dispatch_async(serial_queue, b2);

我们能保证 b1 在 b2 之前运行吗？

以下是完整的源代码部分：

```
 #define COUNTER 10000
      m_value = 0;
      dispatch_queue_t globalQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
      dispatch_queue_t queue = dispatch_queue_create("myqueue", NULL);
      dispatch_group_t group = dispatch_group_create();
       for (int i = 0; i < COUNTER; ++i) {
        dispatch_group_async(group, globalQueue, ^() {
          dispatch_async(queue, ^() {
            ++m_value;
          });
        });
      }
      dispatch_group_notify(group, queue, ^() {
        NSLog(@"m_value Actual: %d Expected: %d", m_value, COUNTER);
      });

      dispatch_release(queue);
      dispatch_release(group);
      queue = nil;
      group = nil;
      return YES; 
```

我们可以保证 m_value == COUNTER 总是吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:21:00.203

提交到并发队列的块可以同时执行，但是来自 Apple 文档“提交到串行队列的块以 FIFO 顺序一次执行一个”。主队列是串行的，您使用 dispatch_create_queue 创建的任何队列也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T18:10:09.010

根据[文档](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)，块（在全局队列上）可以同时执行

“提交到这些全局并发队列的块可以相对于彼此同时执行。”

# android - Android 小部件中的异步事件处理问题

> ID：11212064
> 
> 赞同：1
> 
> 时间：2012-06-26T16:42:40.687
> 
> 标签：android, asynchronous, spinner

我在表单中有一个 Spinner 和 EditText 小部件。Spinner的`onItemSelected`为 EditText 设置具有所选项目值的文本。

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        EditText txt2 = (EditText) findViewById(R.id.txt2);
        System.out.println("Setting from onItemSelected");
        txt2.setText(((TextView)view).getText().toString());
    }
});
spinner.setSelection(sel);
spinner.setEnabled(false);
EditText et = (EditText) findViewById(R.id.txt2);
System.out.println("Setting from outside onItemSelected");
et.setText("Testing"); 
```

但是上面代码中的最后一条语句没有效果，因为`setText()`在`onItemSelected`它之后调用了。我知道这可能是由于异步而发生的，但是有没有办法控制它来强制调用 setText() 的预期顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:06:49.403

可能有几个更好的解决方案，但一个快速的解决方法是这样做：

```
 new Thread(){
       public void run(){
         try{
           Thread.sleep(1000);
         } catch(Exception e){}
           et.setText("Testing");
       }
     }.run(); 
```

需要将 et 设置为 final，并确保您`et.setText()`在 UI 线程上运行：

```
runOnUiThread( new Runnable(){
   public void run(){
     et.setText("Testing");
   }
}); 
```

这应该够了吧。

# struts2 - struts 表单属性 validate="true"

> ID：11212066
> 
> 赞同：0
> 
> 时间：2012-06-26T16:42:42.413
> 
> 标签：struts2

如何使用表单属性 validate="true" 验证从 ajax 加载的 struts 表单？（也许比在提交表单的函数中复制生成的 javascript 更好））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:59:24.330

```
<s:form validate="true">
</sform> 
```

只有在你想做客户端验证时才有用，它只适用于主题 xhtml/ajax。

这是一个解释如何使用struts2实现客户端验证的链接，希望对您有所帮助。

[struts2 表单验证](http://struts.apache.org/2.1.6/docs/client-validation.html)

# model - 如何在 XNA 4.0 中反转模型骨骼的绘制顺序？

> ID：11212075
> 
> 赞同：1
> 
> 时间：2012-06-26T16:43:16.567
> 
> 标签：model, draw, transparent, xna-4.0

当我用透明纹理绘制模型时，我得到了这个：

[坏树](http://s9.postimage.org/nl7hzpltr/tree.png)

我认为这是由于绘图顺序错误造成的。不幸的是，我不是建模师，我有 turbosquid 的模型，它应该看起来像这样： [好树](http://preview.turbosquid.com/Preview/2012/06/07__13_39_49/Treeingame.jpg1af0fa83-0179-4d41-9f6d-d09592ca1f31Large.jpg)

FBX 模型由一个多块骨头组成。是否可以在 XNA4 中以相反的顺序绘制骨骼？（我使用的是基本效果，不是自己的着色器）

或者我可以颠倒程序中骨骼的顺序吗？像这样的东西：

```
 m.Bones = m.Bones.Reverse(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:16:17.847

不，骨骼不是“绘制”的。骨骼为网格中的顶点提供变换，允许（例如）树弯曲。每个顶点从一个或多个骨骼中获取变换值。然后绘制网格（由这些顶点组成的三角形组成）。

更改绘制顺序仅适用于某些相机方向。基本上，您总是希望模型中的每个三角形都从后向前绘制。由于性能原因，您通常不能这样做 - 特别是对于单个模型中的单个三角形。

有一种解决方法：**深度缓冲区**允许您在绘制单个像素时对其进行排序。如果一个像素在先前绘制的“前面” - 它会替换屏幕上的像素并成为新的“前面”。如果它落后，它根本不会被绘制。

这里出现的问题是您的模型包含透明度。如果在使用深度缓冲区时绘制了透明像素，它将“隐藏”应该在其“下方”绘制的像素（从*视觉上讲*，它不应该隐藏任何东西，因为它是透明的）。

该问题的解决方案是使用**alpha 测试**。启用后，将永远不会绘制透明像素 - 因此永远不会弄乱您的深度缓冲区。

为此，您需要使用`AlphaTestEffect`with `DepthStencilState.Default`。

# confluence - 从 Confluence 3.5 迁移到 Confluence 4.2.3 后链接无效

> ID：11212076
> 
> 赞同：1
> 
> 时间：2012-06-26T16:43:16.890
> 
> 标签：confluence

我们在 Confluence 3.5 版本中编辑了许多带有文本的页面，但在某一天，我们决定将我们的系统升级到 4.3.2 版本。结果，现在，我们在数据方面遇到了很大的问题。

项目中的所有链接都开始失效，并且文本字段的标记发生了变化，我认为这与 Confluence 的重大变化有关。

所以现在我试图找到如何更新这些数据并返回漂亮视图的方法。有插件吗？还是脚本？或者 Confluence 的任何默认功能来完成这项工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T11:24:59.243

**新编辑器**

已`Wiki Markup editor`在 Confluence 4 中删除并替换为新的`XHTML-based editor`.

Confluence 4 引入了一个[全新的编辑器](https://confluence.atlassian.com/display/DOC/Confluence+4.0+Release+Notes#Confluence40ReleaseNotes-BrandNewEditor)和`macro placeholders`一个`macrobrowser`.

默认情况下，您不会在编辑模式下看到 wiki 标记，而是看到占位符。有一个 wiki 宏`Wiki-Markup`，您可以使用它来输入 wiki 标记。

对于非常熟悉 wiki 标记的用户，我们有一个自动格式化功能，它可以让您在编辑器中输入 wiki 标记，它会即时“自动格式化”文本。

你读过[Confluence 4 的规划](https://confluence.atlassian.com/display/DOC/Planning+for+Confluence+4)吗？

另外，请查看[Migration from Wiki Markup to XHTML-Based Storage Format](https://confluence.atlassian.com/display/DOC/Migration+from+Wiki+Markup+to+XHTML-Based+Storage+Format)

关于您的宏，您可以尝试

*   [重新运行迁移](https://confluence.atlassian.com/display/DOC/Migration+from+Wiki+Markup+to+XHTML-Based+Storage+Format#MigrationfromWikiMarkuptoXHTML-BasedStorageFormat-Re-runningMigration)或
*   [重新尝试迁移](https://confluence.atlassian.com/display/DOC/Migration+from+Wiki+Markup+to+XHTML-Based+Storage+Format#MigrationfromWikiMarkuptoXHTML-BasedStorageFormat-Re-attemptMigration)

> 内容处于此状态的最常见原因是在页面上发现了不兼容 4.0 的宏（或未知宏）。
> 
> 这种情况有两种可能的解决方法 -
> 
> 1.  安装宏的 4.0 兼容版本。请参阅 4.0 的插件开发升级常见问题解答。
> 2.  编辑页面以不再使用有问题的宏。

因此，如前所述，我建议您寻找兼容版本的宏/插件并强制重新迁移：

*   网址：/admin/force-upgrade.action
*   网址：/admin/unmigratedwikicontent.action

你是什​​么意思`the links are invalid`？

# winforms - 即使存在有效的数据源，Datagridview 的行数也显示为 0

> ID：11212086
> 
> 赞同：2
> 
> 时间：2012-06-26T16:43:49.997
> 
> 标签：winforms, data-binding, datagridview, rowcount

我有一个动态创建的 DataGridView，它有一个有效的 DataSource，其中绑定了一行。但是，当我对 DataGridView 进行行计数时，它返回 0。

```
dgResult.DataSource = resultDt; // a datatable containing one row
flowLayoutPanel.Controls.Add(dgResult); 
int rows = dgResult.Rows.Count; // returning 0 always! 
```

有人可以告诉我我可能在哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T15:10:23.263

我发现了这个问题。我在未选择的选项卡式页面中显示网格。除非网格是可见的，否则它不会引发 rowadded 事件（这很奇怪！）durnig 数据绑定。我在进行数据绑定之前选择了标签页，并且行数有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:23:54.330

请改用此代码：

```
BindingSource bindingSource = new BindingSource();
bindingSource.DataSource = resultDt;

dgResult.DataSource = bindingSource;
flowLayoutPanel.Controls.Add(dgResult); 

var c = dgResult.Rows.Count; 
```

绑定源负责将数据与控件同步。您想使用它，而不是尝试将表直接分配给控件。

# c# - 过滤单词列表的最快方法

> ID：11212088
> 
> 赞同：3
> 
> 时间：2012-06-26T16:43:59.203
> 
> 标签：c#, list, filter

我有一个包含几个单词的列表。我想过滤掉其中一些与特定模式不匹配的。将所有匹配项添加到临时列表并随后将此列表复制到主列表中是否更快？或者从主列表中删除所有不匹配是否更快？我要尽可能快地过滤10000个单词，所以我很期待每一个小小的速度提升。

编辑：

```
string characters = "aAbBcC";
// currentMatches contains all the words from the beginning
List<string> currentMatches = new List<string>();
List<string> newMatches = new List<string>();
foreach (string word in currentMatches)
{
   if (characters.IndexOf(word[0]) > -1)
   // word match
   {
       newMatches.Add(word);
   }
}
currentMatches = newMatches; 
```

`foreach`循环应检查是否以的`word`字符之一开头`characters`。在这里，我`newMatches`在将所有新匹配复制到`currentMatches`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:02:08.823

假设一个[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)那么你将不得不考虑以下几点：

*   如果 Count 小于 Capacity，则该[`Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1.aspx)方法是 O(1) 操作。如果需要增加容量来容纳新元素，这个方法就变成了O(n)操作，其中n是Count；
*   该[`RemoveAt`](http://msdn.microsoft.com/en-us/library/5cw9x18z.aspx)方法是一个 O(n) 操作，其中 n 是 (Count - index)。

如果您创建列表以保存初始容量设置为总字数的匹配项，那么`Add`将始终为 O(1) 并且更快。但是，您需要考虑创建这个容量设置为总字数的新列表的开销。

最重要的是，您需要对其进行测试，看看哪种方法更适合您的特定场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:44:44.500

下面是一个关于如何计时方法的示例。有很多方法可以做到这一点，我认为您将不得不尝试一些。您可以使用 João Angelo 的帖子中的信息来帮助您找到好的方法，但这里有一些。此外，如果您愿意花时间，您可以将这一切放在一个循环中，该循环将创建一个新列表，运行所有测试，将 TimeSpan 结果放入集合而不是 Console.WriteLine'ing 它们，然后然后给你一个平均的测试迭代次数。这将有助于给你一个平均值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Test
{
    public class Program
    {
        public static void Main(string[] args)
        {
            List<string> testList = CreateTestList();
            const string filter = "abc";

            TimeNewListMethod(FilterIntoNewListWithLinq, testList, filter);
            TimeInPlaceMethod(FilterInPlaceWithLinq, testList, filter);

            TimeNewListMethod(FilterIntoNewListWithForEach, testList, filter);

            TimeInPlaceMethod(FilterInPlaceWithRemoveAll, testList, filter);

            Console.Read();
        }

        public static void TimeInPlaceMethod(Action<List<string>, string> testMethod, List<string> toFilter, string filter)
        {
            List<string> toFilterCopy = new List<string>(toFilter);
            DateTime time = DateTime.Now;
            testMethod(toFilterCopy, filter);
            Console.WriteLine(DateTime.Now - time);
        }

        public static void TimeNewListMethod(Func<List<string>, string, List<string>> testMethod, List<string> toFilter, string filter)
        {
            List<string> toFilterCopy = new List<string>(toFilter);
            List<string> resultList;
            DateTime time = DateTime.Now;
            resultList = testMethod(toFilterCopy, filter);
            Console.WriteLine(DateTime.Now - time);
        }

        public static List<string> FilterIntoNewListWithLinq(List<string> toFilter, string filter)
        {
            return toFilter.Where(element => element.IndexOf(filter) > -1).ToList();
        }

        public static void FilterInPlaceWithLinq(List<string> toFilter, string filter)
        {
            toFilter = toFilter.Where(element => element.IndexOf(filter) > -1).ToList();
        }

        public static List<string> FilterIntoNewListWithForEach(List<string> toFilter, string filter)
        {
            List<string> returnList = new List<string>(toFilter.Count);
            foreach (string word in toFilter)
            {
                if (word.IndexOf(word[0]) > -1)
                {
                    returnList.Add(word);
                }
            }

            return returnList;
        }

        public static void FilterInPlaceWithRemoveAll(List<string> toFilter, string filter)
        {
            toFilter.RemoveAll(element => element.IndexOf(filter) == -1);
        }

        public static List<string> CreateTestList(int elements = 10000, int wordLength = 6)
        {
            List<string> returnList = new List<string>();
            StringBuilder nextWord = new StringBuilder();

            for (int i = 0; i < elements; i++)
            {
                for (int j = 0; j < wordLength; j++)
                {
                    nextWord.Append(RandomCharacter());
                }
                returnList.Add(nextWord.ToString());
                nextWord.Clear();
            }

            return returnList;
        }

        public static char RandomCharacter()
        {
            return (char)('a' + rand.Next(0, 25));
        }

        public static Random rand = new Random();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T19:10:06.677

整体

> characters.IndexOf(word[0]) > -1

对我来说有点陌生，所以我会为未来的程序员寻找更具可读性和可维护性的东西。我花了一分钟才弄清楚您正在检查列表中每个字符串中的第一个字符，以寻找 { a A, B, C, a, b, c } 范围内的匹配项。它有效，但对我来说，它有点神秘。我开始花时间阅读它，但我会这样做：

```
 foreach (string word in currentMatches)
        {               
            if (Regex.IsMatch(word, "^([A-Ca-c])"))
            {
                newMatches.Add(word);
            }
        } 
```

我不会担心将临时列表复制回初始列表。您已经定义它填充它，继续使用它。

# apache - 将 SSL 证书传输到 Rackspace 云服务器 - 偶尔出现错误

> ID：11212089
> 
> 赞同：1
> 
> 时间：2012-06-26T16:44:03.883
> 
> 标签：apache, ubuntu, ssl, lamp

好的，我最近将 Comodo SSL 证书从我以前的 Bluehost 帐户转移到了我的新机架空间云服务器。（灯堆栈）

基本上我只是复制粘贴了服务器证书和密钥并检查以确保它已正确安装。现在我遇到了一些问题，有时我会听到人们说他们收到“不受信任的连接错误”，而其他人根本没有收到此错误。

最近有人给我发了一张他们错误的屏幕截图，上面写着：这个证书不可信，因为没有提供颁发者链。

他们注意到这一点的浏览器是 safari，所以我清除了 safari 中的所有历史数据并打开了该网站，但我没有看到该错误。

有谁知道如何解决这样的问题？谢谢！

当我输入 openssl s_client... 我得到：

```
Certificate chain
 0 s:/OU=Domain Control Validated/OU=Hosted by BlueHost.Com, INC/OU=PositiveSSL/CN=www.sitename.com
   i:/C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=PositiveSSL CA 2
 1 s:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root
   i:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root
 2 s:/C=GB/ST=Greater Manchester/L=Salford/O=COMODO CA Limited/CN=PositiveSSL CA 2
   i:/C=SE/O=AddTrust AB/OU=AddTrust External TTP Network/CN=AddTrust External CA Root 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:51:25.297

您很可能缺少“链”或中间证书（有些人的浏览器中可能有，有些人没有）。

解决此问题的最简单方法是查看证书上的颁发者详细信息；并找到该证书。然后查看该证书的颁发者详细信息 - 直到您点击“根” - 这是一个自签名证书（主题与颁发者相同）。

一旦你将它们全部连接到一个文件中并指向 SSLCertificateChainFile 。

你的 httpd.conf 然后看起来像

```
 SSLEngine on
   SSLCertificateKeyFile    .../your-key.key
   SSLCertificateFile       .../your-cert.pem
   SSLCertificateChainFile  .../ca-bundle.pem 
```

一些 CA 在颁发证书时将此文件作为“ca-bundle”（https://support.comodo.com/index.php?_m=knowledgebase&_a=viewarticle&kbarticleid=1203）提供。大多数没有。

因此，在这种情况下，您需要创建它。正在做

```
openssl x509 -in <your cert.pem> -noout -issuer 
```

将为您提供确切的发行者字符串。谷歌搜索它通常会给你你需要的中间证书（通常在你的 CA 的支持站点上）。一旦你有了 - 重复上面并继续下去，直到你到达最后一个 - 发行者与主题相同。

完成后 - 重新启动网络服务器，就可以了。

如果你想验证你得到了整个链 - 然后使用命令

```
openssl s_client -connect <your domain name>:443 
```

并检查输出是否以：

```
0 s:/C=GB/OU=Domain Control Validated/CN=<your domain>
  i:/C=BE/O=Comodo/CN=Comodo foobar
....
3 s:/C=BE/O=GlobalSign nv-sa/OU=Root CA/CN=GlobalSign Root CA
  i:/C=BE/O=GlobalSign nv-sa/OU=Root CA/CN=GlobalSign Root CA 
```

并且至少有一个条目（上例中为 3 个），其中您有一个最终根；S 与 i 相同。如果您只看到一个条目

```
0 s:/C=GB/OU=Domain Control Validated/CN=<your domain>
  i:/C=BE/O=Comodo/CN=Comodo foobar 
```

仅此而已 - 然后再次检查您的链 - 并确保它包含一个*主题*与您的*发行人*相同的证书（在上面的示例中为“/C=BE/O=Comodo/CN=Comodo foobar”）。

您可以通过解析包中的每个 blob 来检查这一点

```
 openssl x509 -noout -in file.pem -subject -issuer 
```

其中 file.pem 是 SSLCertificateChainFile 文件的一大块。

警告：以上是一个轻微的简化——一些链可能有多个根/交叉签名。在那种情况下，它会变得有点复杂——但遵循上面的例子。

# php - 重新填充表单：PHP 或 Javascript

> ID：11212092
> 
> 赞同：0
> 
> 时间：2012-06-26T16:44:07.847
> 
> 标签：php, javascript, forms

我有一个提交给运行一些验证的第三方服务的表单。出错时，它会重定向到与表单相同的页面，但会附加一个包含原始表单值的查询字符串以及错误消息。

由于这个查询字符串，浏览器将其视为“新页面”并且表单为空白。

我尝试了一种使用 PHP 的方法（[请参阅代码审查问题](https://codereview.stackexchange.com/questions/13083/populating-form-contents-from-get-especially-radio-buttons#comment21154_13083)），归结为：“逐个获取每个字段的 GET 值，然后将它们设置为表单上的值。” 它有点工作，但是：

*   单选按钮很难处理
*   我没有完整的 PHP 功能。我在 WordPress 中使用 PHP-in-pages 插件，该插件可以运行某些 PHP，但在定义一个函数然后重新使用它时感到窒息

重新填充此表单的推荐方法是什么（PHP 或 JavaScript ......我在网站上也有 jQuery）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:47:11.930

Javascript，因为 PHP 会在服务器上施加额外的负载。但是验证用户输入应该在客户端（JS）和（服务器端）PHP 中完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:41:30.960

除非您动态组装您的字段，否则使用 PHP 动态重新填充它们并不容易。如果你*是*，你可以这样做：

## PHP

```
$fields = [
    'username' => ['type' => 'text', 'value' => $_GET['username']],
    'setting1' => ['type' => 'radio', 'value' => $_GET['radio']]
];
foreach( $fields as $name => $input ) {
    echo "<input type='{$input['type']}' name='{$name}' value='{$input['value']}'>";
} 
```

如果没有，您可以像这样使用 PHP 和 JavaScript 的组合。我正在使用 jQuery 来简化事情。

## PHP 和 JavaScript

```
$fields = $_GET;
echo '<script type="text/javascript">
var errors = { ';
foreach( $fields as $name => $value ) {
    echo $name . " : '{$value}',\n";
}
echo '};

$.each(errors, function(name, value) {
    $("input[name="+name+"]").val(value);
});
</script>'; 
```

这是未经测试的，我知道至少有一个错误（错误数组中的额外逗号），但应该是一个很好的起点。第二种方法的目标是使用 PHP 组装一个数组，然后 JavaScript 可以使用该数组并执行循环以将这些值分配给每个输入字段。但同样 - 选择框和单选按钮等的逻辑将很复杂。而不是仅仅分配`val`你将不得不设置`checked`属性等。

不幸的是，我不知道是否有任何库或 jQuery 插件已经这样做了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:13:00.807

这是用于检查单选按钮的 jquery 代码：

```
 $("form :radio:checked").before("CHECKED"); //selects only checked buttons 
```

这是防止表单提交并重新填充您的字段的代码：

```
function prepareEventhandlers() {
document.getElementById("formname").onsubmit = function() {
if (document.getElementById("email").value == "") { // e.g. if no email was given
    document.getElementById("errormessage").innerHTML = "it didnt work!";
    return false;
} else {
    document.getElementById("errormessage").innerHTML = "";
    return true;
}
};
}

window.onload = function () {
prepareEventhandlers();
} 
```

祝你好运！

# sockets - 停止套接字侦听接受

> ID：11212096
> 
> 赞同：0
> 
> 时间：2012-06-26T16:44:14.480
> 
> 标签：sockets, serversocket

我们有我的公司喜欢在一夜之间运行的批处理文件，所以我使用了我们的服务器（MatLab）/客户端（Java/Eclispe）代码，该代码可以很好地处理单个文件，在所有内容上放置一个真正的循环并让它以这种方式正常工作. 我们遇到的唯一问题是服务器总是通过 socket.accept() 调用寻找客户端，但如果它没有客户端连接到它，它就会永远坐在那里。要关闭程序，我们必须转到任务管理器并强制关闭它。

因此，我可以通过任何方式将计时器置于接受状态，因此如果在一定时间后没有人尝试连接，不再运行批处理文件，我可以取消连接并关闭程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:50:14.550

此代码将允许您在 accept() 上设置超时

```
private ServerSocket listener;  
    private int timeout;  
    private Thread runner;  
    private boolean canceled;  

    ...  

    // returns true if cancel signal has been received  
    public synchronized boolean isCanceled()  
    {  
        return canceled;  
    }  

    // returns true if this call does the canceling  
    // or false if it has already been canceled  
    public synchronized boolean cancel()  
    {  
        if ( canceled ) {  
            // already canceled due to previous caller  
            return false;  
        }  

        canceled = true;  
        runner.interrupt();  
        return true;  
    }  

    public void run()  
    {  
        // to avoid race condition (see below)  
        listener.setSoTimeout(timeout);  

        while ( ! isCanceled() ) {  
            // DANGER!!  
            try {  
                Socket client = listener.accept();  
                // hand client off to worker thread...  
            }  
            catch ( SocketTimeoutException e ) {  
                // ignore and keep looping  
            }  
            catch ( InterruptedIOException e ) {  
                // got signal while waiting for connection request  
                break;  
            }  
        }  

        try {  
            listener.close();  
        }  
        catch ( IOException e ) {  
            // ignore; we're done anyway  
        }  
    } 
```

# unit-testing - 使用 Ctest 创建测试组

> ID：11212102
> 
> 赞同：4
> 
> 时间：2012-06-26T16:44:20.277
> 
> 标签：unit-testing, cmake, ctest

我正在尝试将单个 ctest 测试组合在一起，但到目前为止还没有成功。例如，如果我有以下测试： add_test(test1) add_test(test2) add_test(test3)

我想将它们分组到一个测试套件中，该套件将作为一个测试上传到仪表板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:44:47.237

也许对您有帮助的是设置不同标签进行测试的可能性。看看那个可能性（越过 set 属性）

# c# - 如何使库方法异步调用？

> ID：11212109
> 
> 赞同：1
> 
> 时间：2012-06-26T16:44:53.753
> 
> 标签：c#, .net, wpf

我正在调用一个同步的库方法。我想使用新功能`async`和`await`功能，但我不确定如何，因为库不支持异步（不返回任务）。

有没有办法做到这一点，或者我需要构建一个包装器来做*什么*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:47:35.003

您可以在后台线程中运行同步代码，方法是在`Task.Run`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T16:50:32.020

像这样的东西？

```
using System.Threading.Tasks;

new Task<bool>(() =>
{
    // Do something
    return true;
}).Start(); 
```

# jquery - Photoswipe.js 工具栏隐藏

> ID：11212110
> 
> 赞同：1
> 
> 时间：2012-06-26T16:45:02.760
> 
> 标签：jquery, photoswipe

（首先，我们不希望网站看起来这样，这是客户的选择）

我正在为下面的缩略图使用 Photoswipe.js(http://www.photoswipe.com/)，但工具栏没有出现。 [http://dev.realtyvictoria.com/listings/listing-details/307911](http://dev.realtyvictoria.com/listings/listing-details/307911)

Photoswipe.js 正在加载，photoswipe.css 正在加载，klass.min.js 正在加载，我可以在 Chrome 的开发者工具 > 资源下看到图片。

我试过在 photoswipe.css 中使用 ../images 和 /images

我已经在使用“captionAndToolbarAutoHideDelay: 0, captionAndToolbarHide: false”...

但仍然没有工具栏。有什么帮助吗？

谢谢

# c# - 无法从“System.Web.UI.ControlCollection”转换为“System.Collections.Generic.IEnumerable” '

> ID：11212117
> 
> 赞同：0
> 
> 时间：2012-06-26T16:45:28.187
> 
> 标签：c#, asp.net, controlcollection

我想清除并处理 asp:panel 中的所有组件。我收到错误：

无法从“System.Web.UI.ControlCollection”转换为“System.Collections.Generic.IEnumerable”

这是我的代码：

```
List<Control> ctrls = new List<Control>(panelLayout.Controls);
panelLayout.Controls.Clear();
foreach (Control control in ctrls)
{
   control.Dispose();
} 
```

关于我需要在线更改的任何想法： List ctrls = new List(panelLayout.Controls);

谢谢，拉里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:48:24.817

您不必先创建列表。您可以迭代您的 Controls 集合。

```
foreach (Control control in panelLayout.Controls)
{
   control.Dispose();
}
panelLayout.Controls.Clear(); 
```

您收到错误是因为在其构造函数中`List<T>`需要 a 。`IEnumerable<T>`您的收藏没有实现该接口。

此外，您还必须像 jrummell 指出的那样在处置它们之后清除集合。

# xcode - 已安装 xcode 3.2.5 但没有可打开的图标

> ID：11212122
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:10.137
> 
> 标签：xcode, macos

我安装了 vm ware mac os，还安装了 xcode 3.2.5。它已成功安装，但没有运行或打开应用程序的图标。任何人都可以说要解决的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:48:49.340

XCode 应位于`/Developer/Applications/XCode.app`. 将其拖到您的 Dock 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:48:50.357

应该位于 /Developer/Applications/Xcode.app 下

# iphone - 放大iphone sdk时如何调整滚动视图的子视图

> ID：11212125
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:15.630
> 
> 标签：iphone, objective-c, ios4, uiscrollview, uitouch

我有一个带有图像的滚动视图。用户可以触摸滚动视图并在其上放置矩形视图。我希望当用户捏缩放滚动视图时，子子视图应根据比例自动调整大小。用户还应该能够通过触摸事件移动或调整子视图的大小。当滚动视图未缩放时，这工作正常，但当滚动视图缩放时，子视图不能在整个滚动视图移动时调整大小或拖动。我试图根据滚动视图大小更改子视图的框架大小，但没有给出正确的结果。

**缩放滚动视图时有什么方法可以接收触摸事件**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:52:09.927

```
@interface UIZoomingViewController : UIViewController <UIScrollViewDelegate>
    @property (strong, nonatomic) UIView* substrate;
@end

@implementation UIZoomingViewController

-(id)init /*your init method*/
{
    if(self = [super init])
    {
        UIScrollView* scrollView = ((UIScrollView*)self.view); /*controller view - UIScrollView*/
        [scrollView setDelegate:self];
        /*set contentsize, min max zoom scale*/

        _substrate = [UIView alloc] initWithFrame:scrollView.bounds];
        [scrollView addSubview:_substrate];

        /*
            if you need zoom view, add to substrate
            [_substrate addSubview:...];
        */
    }
    return self;
}

#pragma mark - UIScrollView delegate implementation

-(UIView*)viewForZoomingInScrollView:(UIScrollView*)scrollView
{
    return _substrate;
}

@end 
```

和小技巧，如果你需要在 UIScrollView 之后接收触摸，创建子类......

```
@interface UINewScrollView : UIScrollView
@end

@implementation UINewScrollView

-(BOOL)touchesShouldBegin:(NSSet *)touches withEvent:(UIEvent *)event inContentView:(UIView *)view
{
    return YES;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[self nextResponder] touchesBegan:touches withEvent:event];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[self nextResponder] touchesMoved:touches withEvent:event];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    [[self nextResponder] touchesEnded:touches withEvent:event];
}

@end 
```

# jquery - 一起使用 Cocoon（嵌套表单）和 jQuery 可排序

> ID：11212128
> 
> 赞同：5
> 
> 时间：2012-06-26T16:46:18.793
> 
> 标签：jquery, ruby-on-rails, jquery-ui-sortable, nested-attributes, cocoon-gem

我目前有一个使用 Cocoon 生成的输入表单，并希望使其创建的输入字段可排序（使用 jQuery-ui 中的可排序）。

嵌套表单的代码是：

```
<%= f.simple_fields_for :checkout_procedures do |procedure| %>  
  <li><%= render 'checkout_procedure_fields', :f => procedure %></li> 
<% end %>  
<div class="links">
  <%= link_to_add_association 'add step', f, :checkout_procedures %>
</div> 
```

呈现的部分（_checkout_procedure_fields）是：

```
<div class="checkout_procedure nested-fields">
  <table>
    <tr>
      <td><%= f.input :step %></td>
      <td><%= link_to_remove_association "remove step", f %></td>
    </tr>
  </table>
</div> 
```

我可以通过将现有元素放在 a`<div>`中并使用 jQuery 将其设置为可排序来获得可排序的现有元素：

```
<div class="sortThese">
   <%= f.simple_fields_for :checkout_procedures do |procedure| %>  
     <li><%= render 'checkout_procedure_fields', :f => procedure %></li> 
   <% end %>  
</div> 
<div class="links">
  <%= link_to_add_association 'add step', f, :checkout_procedures %>
</div>

<script>
 $(document).ready(function() {
   $(".sortThese").sortable();
      });
 </script> 
```

但是这样做会破坏 Cocoon`link_to_add_association`和`link_to_remove_association`. 使用`<ul>`with`<li>`也会导致同样的 Cocoon 故障。我一直在寻找一些 javascript 来将每个输入表单移入和移出可排序的 div（这样做似乎使链接再次工作），但显然这是不雅的。如果有人有任何建议，我真的很感激他们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:24:19.487

如果您删除`<li>`标签，它会很好地排序。在我的项目中尝试过，我有相同的标记，除了`li`部分的包装器，它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-31T18:10:24.147

即使`<li>`标签在您的部分中，将列表项拖动到新位置也只会移动列表项`<li>`标签内的内容。不幸的是，拖动该项目不会移动该项目的隐藏父`<input>`标记，因为 cocoon 将它放置在您的嵌套字段之外（即在您的之外`<li>`）。因此，尽管您的列表将在浏览器中显示为已排序，但更改不会反映在控制器方法接收的参数中。

如果您找到了解决方案，请发布。

谢谢

# c# - 在调用事件处理程序之前返回的 C# 方法

> ID：11212131
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:25.780
> 
> 标签：c#, webclient

我的 uriRead 方法似乎在异步下载完成之前返回，导致该方法返回“”。如果我把 Thread.Sleep(5000) 放在“//在这里等待？” 但是，它会完成。

我怎样才能让这个函数等待字符串下载完成并在不输入静态延迟的情况下立即返回？

```
public string uriRead(string uri)
    {
        string result = "";
        WebClient client = new WebClient();
        client.Credentials = CredentialCache.DefaultCredentials;
        client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(AsyncReadCompleted);
        client.DownloadStringAsync(new Uri(uri));
        // Wait here?
        return result = downloadedAsyncText;       
    }

    public void AsyncReadCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        Console.WriteLine("Event Called");
        downloadedAsyncText = e.Result.ToString();
        Console.WriteLine(e.Result);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:04:02.597

如果您想等待结果，那么您希望同步执行，而不是其他人提到的异步执行。所以使用 DownloadString 方法而不是 DownloadStringAsync。

```
public string uriRead(string uri)
{
  WebClient client = new WebClient();
  client.Credentials = CredentialCache.DefaultCredentials;      
  return client.DownloadString(new Uri(uri));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:12:03.783

抱歉，但正如其他人提到的，如果您使用的是 Async，您应该正确使用它。结果应该在 中读取`DownloadStringCompletedEventHandler`，您不应该等待，这可能会阻止您的应用程序。您的应用程序需要保持响应。如果方法永远不会返回怎么办？

您需要在您`private string results_` 在事件处理程序中设置的类中创建一个私有字段。

# python - 巧合指数（python）

> ID：11212139
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:36.063
> 
> 标签：python, cryptography

嗨，伙计们，我正在用一些代码帮助一个朋友，所以我试图把我的头绕在“巧合索引”上，如下所示：http: [//jdege.us/crypto-python/ar01s08.html#id2963591](http://jdege.us/crypto-python/ar01s08.html#id2963591)

本质上：我有一个来自 for 循环的字符串输出，我想计算它的重合指数，最终我将让它只显示值超过阈值的输出，但现在可以等待！

任何提示或指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:03:36.143

看看[维基百科的文章](http://en.wikipedia.org/wiki/Index_of_coincidence)。文本的重合指数定义为

![在此处输入图像描述](../Images/683641bbc10491ae63cd74393af7e800.png)

其中`c=26`，`n_i`是每个字母的频率，`N`是文本的长度。

# javascript - 正则表达式需要 unicode 支持

> ID：11212142
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:43.253
> 
> 标签：javascript, regex

`/^[A-Z][A-Za-z.'\- ]+$/`我有这个用于检查名称的正则表达式。

因此，当我输入 George 或 George Harris 或 George-Harris 时，就可以了。问题是它与我的语言（希腊语）中的名称和单词不匹配

如何向此正则表达式添加 unicode 支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:02:41.350

XRegExp库添加了对字符类的支持[以及](http://xregexp.com/)JS 正则表达式实现中缺少的其他内容。我想你会发现它的[Unicode 插件](http://xregexp.com/plugins/#unicode)特别有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:01:16.193

You can use unicode to match greek letters. [Here's a map](http://en.wikipedia.org/wiki/Greek_alphabet#Greek_in_Unicode) of the greek characters in unicode. `/[A-Z]/i` would translate `/[\u03B1-\u03C9]/i` if I understand right. So for greek characters (and, in my country, diacritics), you need to know their unicode equivalent and use them as `\uxxxx` in regular expressions.

In my experience, if the javascript file is saved as utf-8 and the webpage that uses it is utf-8, you can use such characters directly. So something like `/α/.test('α200β')` works in such a setup.

# iphone - iPhone - 在 iOS 3.x 上启动时应用程序崩溃 (_UIApplicationDidEnterBackgroundNotification)

> ID：11212143
> 
> 赞同：0
> 
> 时间：2012-06-26T16:46:44.457
> 
> 标签：iphone, ios, three20

我的应用程序中有 Three20 支持 iOS 3.0 及更高版本。

当我使用 iOS 3.0、iOS 3.1 运行应用程序时，应用程序在启动时立即崩溃。

以下是我的崩溃报告：

```
Date/Time:       2012-06-26 10:38:36.761 -0600
OS Version:      iPhone OS 3.1.3 (7E18)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x00000001, 0xe7ffdefe
Crashed Thread:  0

Dyld Error Message:
  Symbol not found: _UIApplicationDidEnterBackgroundNotification
  Referenced from: /var/mobile/Applications/8E9E6F79-80BB-4CCD-A510-CCBF7BB78BE8/MyApp.app/MyApp
  Expected in: /System/Library/Frameworks/UIKit.framework/UIKit
  Dyld Version: 149 
```

你知道发生了什么吗，
我在构建设置中遗漏了什么吗？

**更新 1：**
所以我在我的项目中搜索**UIApplicationDidEnterBackgroundNotification**
，在**TTBaseNavigator.m**文件中找到了 3 个结果。

此部分中的一个

```
#ifdef __IPHONE_4_0
UIKIT_EXTERN NSString *const UIApplicationDidEnterBackgroundNotification
__attribute__((weak_import));
UIKIT_EXTERN NSString *const UIApplicationWillEnterForegroundNotification
__attribute__((weak_import));
#endif 
```

和两个在这个方法

```
- (id)init {
    self = [super init];
  if (self) {
    _URLMap = [[TTURLMap alloc] init];
    _persistenceMode = TTNavigatorPersistenceModeNone;

    NSNotificationCenter* center = [NSNotificationCenter defaultCenter];
    [center addObserver:self
               selector:@selector(applicationWillLeaveForeground:)
                   name:UIApplicationWillTerminateNotification
                 object:nil];
#ifdef __IPHONE_4_0
    if (nil != &UIApplicationDidEnterBackgroundNotification) {
      [center addObserver:self
                 selector:@selector(applicationWillLeaveForeground:)
                     name:UIApplicationDidEnterBackgroundNotification
                   object:nil];
    }
#endif
  }
  return self;
} 
```

你知道如何调整这些代码，以便应用程序可以在 iOS 3.0 和 iOS 3.1 上运行。

**更新 2：**

目前我不使用 TTBaseNavigator，所以我评论了两个**#ifdef __IPHONE_4_0**块。
这解决了我的问题，但我想知道是否有人有其他解决方案可以通过不评论 Three20 代码来完成这项工作。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:22:33.937

在该`UIApplicationDidEnterBackgroundNotification`事件的文档中，它说“在 iOS 4.0 及更高版本中可用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:43:46.990

我评论了两个**#ifdef __IPHONE_4_0**块。（请参阅**更新 1**）
这解决了我的问题。

# asp.net - SignalR StockTicker 示例不起作用

> ID：11212145
> 
> 赞同：2
> 
> 时间：2012-06-26T16:46:58.733
> 
> 标签：asp.net, vb.net, signalr

您好，感谢您提供帮助:)。

我目前正在尝试学习基本的 signalR，因此我将带有 NuGet 的库下载到现有应用程序以对其进行测试。

现有的应用程序是用 VB 编写的（不确定这是否有问题）

我收到的错误是“ticker is undefined”，据我了解是连接字符串。

现在我读到它可能是似乎工作正常的集线器目录。所以我被困住了。任何想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:19:17.803

弄清楚了。原来，因为应用程序是用 vb 编写的，所以我必须在应用程序代码文件夹中添加一个 cs 代码，然后将其映射到 web.config 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T13:16:14.680

对我来说，这已经解决了，因为我没有包含自动生成的文件“../signalr/hubs”

# xcode - XCode 4.3.3 似乎总是运行调试构建版本

> ID：11212148
> 
> 赞同：1
> 
> 时间：2012-06-26T16:47:15.020
> 
> 标签：xcode

我正在使用 Xcode 4.3.3 并尝试配置我的（一个也是唯一的）方案，以便“运行”将构建我的应用程序的发布版本（即非调试版本），以便在模拟器和我的设备上进行测试。

我尝试按如下方式执行此操作：

在方案编辑器窗口中，我突出显示左栏中的“运行”，然后为“构建配置”选择“发布”。（我还将调试器设置为“无”）。

但是，当我构建并运行应用程序时，日志导航器会显示“Build MyApp1”，然后是“Debug MyApp1”。

我的问题是：日志导航器显示的这条消息是否应该说“发布 MyApp1”以反映我在方案编辑器中选择的构建类型？或者当您选择“运行”时，此消息中的“调试”是否总是显示？它实际上是在运行调试版还是发布版？

谢谢，

BH

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:32:22.047

为了测试你编译的文件是否运行调试版本，你可以在你的家庭控制器的 viewWillAppear 中尝试这样的事情：

```
#ifdef DEBUG
NSLog(@"running debug version");
#else
NSLog(@"running another version");
#endif 
```

如果您没有得到您期望的结果，您可以尝试在构建设置中将发布标志设置为 YES 并将调试标志设置为 NO。

![在此处输入图像描述](../Images/2e223f77d0c18b24bd8bab5687c2b281.png)

我希望这有帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:52:10.837

转到编辑方案，选择您想要的类型。

![在此处输入图像描述](../Images/8cd2b202a69afc88941bbce9ffc2137e.png)

![在此处输入图像描述](../Images/492e19aaaefb4a92fa4e61ef31096ec6.png)

# jquery - 如何获取列表项并将其显示在文本字段 jquery 中

> ID：11212149
> 
> 赞同：1
> 
> 时间：2012-06-26T16:47:21.777
> 
> 标签：jquery, jquery-selectors

我正在开发一个 Web 应用程序，并且很难解决这个问题。

我有一个看起来像这样的列表项：

```
<ul id="list">
    <li>My name is great</li>
    <li>I love Music</li>
    <li>I love EPL</li>
</ul> 
```

我也有一个文本框。

我要做的是克隆或映射（以最佳方法为准）列表项并将其添加到我的文本框值中。

请注意，整个元素 + 文本将被克隆到文本框值。例如：

```
<li>My name is great</li> 
```

将被克隆到文本框值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:22:55.383

假设你给你的文本框一个`id`，例如：

```
<textarea id="contents"></textarea> 
```

然后您可以使用 jQuery 执行此操作：

```
$("#contents").val($("#list").html()); 
```

解释：

*   `$("#list").html()`获取id 元素的*HTML 内容*`list`。
*   `$("#contents").val()`使用 id 设置元素的内容`contents`。

这样做的一个问题是该`html()`函数可能会保留格式，因此您的列表元素之前可能会在 textarea 中出现一堆空白。这可能取决于浏览器。

将修剪任何前导空格的解决方案：

```
$("#contents").val($("#list").html().replace(/^\s+/gm, "")); 
```

这使用 javascript 正则表达式`/^\s+/gm`从列表 HTML 的所有行的开头修剪空白。

# python - 如何在 Django 中添加 Search_fields

> ID：11212150
> 
> 赞同：22
> 
> 时间：2012-06-26T16:47:28.153
> 
> 标签：python, django, django-admin

我尝试使用 python 在 Django 中添加搜索字段。以下是我使用的代码。

```
# admin.py file

from django.db import models
from blog.models import Blog
from django.contrib import admin
admin.site.register(Blog)

class Blog(models.Model):
    title = models.CharField(max_length=60)
    body = models.TextField()
    created = models.DateTimeField("Date Created")
    updated = models.DateTimeField("Date Updated")
    def __unicode__(self):
        return self.title

class Comment(models.Model):
    body = models.TextField()
    author = models.CharField(max_length=60)
    created = models.DateTimeField("Date Created")
    updated = models.DateTimeField("Date Updated")
    post = models.ForeignKey(Blog)
    def __unicode__(self):
        return self.body

class CommentInline(admin.TabularInline):
    model = Comment

class BlogAdmin(admin.ModelAdmin):
    list_display = ('title','created', 'updated')
    search_fields = ['title','body']
    list_filter = ('Date Created','Date Updated')
    inlines = [CommentInline]

class CommentAdmin(admin.ModelAdmin):
    list_display = ('post','author','body_first_60','created','updated')
    list_filter = ('Date Created','Date Updated') 
```

我尝试使用以下代码为标题和正文添加 search_fields。

```
class BlogAdmin(admin.ModelAdmin):
    . . .
    search_fields = ('title','body')
    . . . 
```

当我运行它时，我看不到任何搜索框。这是为什么 ？我需要你的帮助。我只是一个初学者。谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-26T16:53:48.950

搜索字段应该是一个列表，而不是一个元组。

```
class BlogAdmin(admin.ModelAdmin):
    . . .
    search_fields = ['title','body']
    . . . 
```

然后确保将此管理对象与模型相关联。

```
admin.site.register(Blog, BlogAdmin) 
```

**编辑：**

从上面很难判断，但您应该考虑只从 models.py 导入模型，而不是在 admin.py 文件中重新定义它们。同样，看起来这就是您在上面所做的。

管理员.py：

```
from django.db import models
from blog.models import Blog
from django.contrib import admin

class CommentInline(admin.TabularInline):
    model = Comment

class BlogAdmin(admin.ModelAdmin):
    list_display = ('title','created','updated',)
    search_fields = ['title','body',]
    list_filter = ('Date Created','Date Updated',)
    inlines = [CommentInline,]

class CommentAdmin(admin.ModelAdmin):
    list_display = ('post','author','body_first_60','created','updated',)
    list_filter = ('Date Created','Date Updated',)

admin.site.register(Blog, BlogAdmin) 
```

模型.py

```
from django.db import models

class Blog(models.Model):
    title = models.CharField(max_length=60)
    body = models.TextField()
    created = models.DateTimeField("Date Created")
    updated = models.DateTimeField("Date Updated")

    def __unicode__(self):
        return self.title

class Comment(models.Model):
    body = models.TextField()
    author = models.CharField(max_length=60)
    created = models.DateTimeField("Date Created")
    updated = models.DateTimeField("Date Updated")
    post = models.ForeignKey(Blog)

    def __unicode__(self):
        return self.body 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T11:20:47.213

您应该在网站底部而不是顶部注册您的网站。
请尝试页面底部的 admin.site.register(Blog, BlogAdmin)。
我希望这能解决你的问题

# oracle - 在数据库中高效搜索

> ID：11212152
> 
> 赞同：0
> 
> 时间：2012-06-26T16:47:43.900
> 
> 标签：oracle, search, jdbc, oracle11g

我有一个包含用户详细信息的数据库。我没有单独的“名字”和“姓氏”列。我只使用了一个列：“名称”。我的查询是这样的：

```
ps_details=con.prepareStatement("select * from student_details where name=?");  
ps_details.setString(1,name); 
```

问题是：

在 db 中，名称以大写形式存储。因此，当用户以小写或混合大小写输入他/她的姓名时，搜索不成功。这个问题的有效解决方案是什么？

**此外，如果“名称”以小写、混合大小写和大写形式存储在 db 中，即，如果事先不知道大小写，该怎么办。我也想用like子句**

我正在使用 Oracle 11g Express 编辑器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:06:41.803

如果您真的打算进行完全匹配（即用户需要输入他们的全名才能进行搜索，而不是只输入他们姓名的一部分），您可以将表达式的两侧包装在 the`UPPER`或`LOWER`函数中.

```
SELECT *
  FROM student_details
 WHERE upper(name) = upper(?) 
```

但是，如果您这样做，Oracle 将无法使用索引，`name`因此它必须扫描整个表。这不是特别有效。您可以通过创建基于函数的索引来解决该问题`upper(name)`

```
CREATE INDEX idx_upper_name
    ON student_details( upper(name) ); 
```

但实际上，我怀疑您不想进行基于通配符的比赛。您几乎肯定希望允许用户输入名称的某些部分并返回包含该字符串的结果。因此，如果我是学生，您可能希望允许用户搜索“Justin”或“Cave”或“Justin Cave”或“Just”，并让所有这些搜索返回我的行（以及任何其他匹配的行，当然）。如果你想这样做，最简单的方法是将`LIKE`函数与`%`通配符一起使用

```
SELECT *
  FROM student_details
 WHERE upper(name) like '%' || upper(?) || '%' 
```

将返回在您正在搜索的文本中的任何位置找到输入字符串的所有行。但这实际上使我们在性能方面回到了几乎一成不变的状态——拥有领先的通配符将使 Oracle 很难从使用我们定义的索引中受益`UPPER(name)`。这就是为什么大多数人会分开存储名字和姓氏的原因。这允许他们做类似的事情

```
SELECT *
  FROM student_details
 WHERE upper(first_name) like upper(?) || '%'
    OR upper(last_name) like upper(?) || '%' 
```

无论用户搜索“Justin”、“Cave”还是“Just”，无论数据库中数据的大小写或搜索中输入的数据如何，这都允许他们返回我的行。它能够对数据使用适当的基于函数的索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:53:16.173

[UPPER](http://www.techonthenet.com/oracle/functions/upper.php) - upper 函数将指定字符串中的所有字母转换为大写。在变量（用户输入）和表列值上使用它，将它们都转换为相同的大小写以进行比较以处理这两个问题。（您也可以使用 lower - 想法是将两者转换为相同的情况以进行比较）。**为 LIKE 编辑，仅使用后置通配符 **

```
select * from student_details where UPPER(name) like UPPER(?) || '%' 
```

这是您必须玩的，但我认为您也可以使用通配符执行以下操作。

```
ps_details=con.prepareStatement("select * from student_details where UPPER(name) like UPPER(?)");  
ps_details.setString(1,name%); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:52:45.033

尝试在您的输入上使用 UPPER()。

# css - 第二个子div高度填充父高度

> ID：11212155
> 
> 赞同：0
> 
> 时间：2012-06-26T16:48:03.427
> 
> 标签：css, height, parent

我有一个 div（文章），它有两个孩子（标题和#content_outer）。标题有一个正确的高度，我希望#content_outer 有一个高度（不给出具体数字，例如：200px），这样标题高度 + #content_outer 高度 = 文章高度。

这是一个小提琴：http: [//jsfiddle.net/fyNX4/](http://jsfiddle.net/fyNX4/)

（在小提琴中#content_outer 不应超过底部的文章div）

我希望解决方案仅适用于 css。

非常感谢你。

**编辑：**

更具体地说，这是我想要的解决方案：http: [//jsfiddle.net/fyNX4/5/](http://jsfiddle.net/fyNX4/5/)

我给了#content_outer --> height:240px;

但是我想用 % 或其他解决方案给出一个高度，如果标题有更多的文本（并且有更多的高度）。( [http://jsfiddle.net/fyNX4/8/](http://jsfiddle.net/fyNX4/8/) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T13:21:40.743

[http://jsfiddle.net/fyNX4/9/](http://jsfiddle.net/fyNX4/9/)

我不得不通过添加一些不必要的标记来修改您的结构：

```
table:   table-row:       table-cell:       cell's content:
article  header           span
article  div#content-row  div#content-cell  div#content: overflow:auto; 
```

*   `table-row`s 是必要的，因为它们是垂直排列表格单元格的唯一方法
*   `table-cell`s 是必需的，因为`table-row`s 不接受填充或高度。
*   内部包装 div 是必要`table-cell`的，因为忽略`overflow`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:50:50.040

你想要这样的东西：

这是更新的小提琴：http://jsfiddle.net/fyNX4/6/

```
#main { width: 300px; height:300px;  background:Khaki; overflow:auto;}
#content_outer { background: GoldenRod;  height:100%; } 
```

# java - 文本视图和意图

> ID：11212156
> 
> 赞同：0
> 
> 时间：2012-06-26T16:48:12.180
> 
> 标签：java, android

所以我有一个扩展列表视图的活动，我想创建另一个有 2 个编辑文本字段的活动。单击菜单项时会打开第二个活动...我已经这样做了，但我不知道如何在第二个活动中创建 2 个文本字段。我想知道第二个活动是否有一个 xml 文件？以及它在哪里或如何更改该活动的布局。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:52:12.363

只需在布局 forlder 下创建另一个 xml 文件。例如将其称为 secondView.xml，然后在 seconf Activity 类中更改此行：

```
setContentView(R.layout.main); 
```

至

```
setContentView(R.layout.secondView); 
```

# css - 向右浮动和 hr 对齐

> ID：11212159
> 
> 赞同：1
> 
> 时间：2012-06-26T16:48:18.893
> 
> 标签：css

我得到以下代码：

```
<div style="width: 300px; height: 100px; border: 1px solid red;">
    <a href="#" style="height: 10px; width: 50px; border: 1px solid black;">MY BUTTON</a>
    <hr />
</div> 
```

当我在按钮中使用 float 时，hr 上升。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T16:49:35.250

试试看`clear`。

```
hr
{
   clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:54:37.887

我不确定您在做什么，我认为您正在尝试复合按钮。

我建议删除 '<'br'/>' 并添加到 '<'a'>' 样式中：'line-height:100px;'

# matlab - matlab中的乳胶字体

> ID：11212172
> 
> 赞同：21
> 
> 时间：2012-06-26T16:49:20.900
> 
> 标签：matlab, latex

是否可以将 matlab 绘图的字体转换为与乳胶字体相同的字体。例如，我可以通过以下方式修改绘图的字体：

```
x = -pi:.1:pi;
y = sin(x);
plot(x,y)
set(gca,'FontName','Helvetica'); 
```

是否可以对乳胶字体做同样的事情（我说乳胶字体，因为我不确定乳胶用作其基本字体的字体的实际名称）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T17:19:29.747

对于任何文本对象，您只需将“解释器”属性设置为“乳胶”。所以，例如你可以做

```
xlabel('$$\int_0^x\!\int_y dF(u,v)$$','Interpreter','latex'); 
```

对于刻度标签，它[更难](http://www.mathworks.com/support/solutions/en/data/1-5HAF0I/)，尽管可能有文件可以使它更容易（[示例](http://www.mathworks.com/matlabcentral/fileexchange/15986)）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-04T00:05:00.537

我建议在脚本/函数的开头将默认解释器设置为 LaTex：

```
set(0,'defaulttextinterpreter','latex') 
```

您还可以[下载一个版本的 Computer Modern](http://cm-unicode.sourceforge.net/download.html)（LaTeX 字体系列）并将其安装到您的机器上。如果您运行的是 windows 或 mac，技术可能会有所不同，对于 Mac，您需要下载 OTF 版本并将其添加到 FontBook（Cmd-Space：FontBook）

接下来，重启Matlab

最后，您可以在 Matlab 中使用 LaTeX 字体：

```
 set(0,'DefaultTextFontname', 'CMU Serif')
   set(0,'DefaultAxesFontName', 'CMU Serif') 
```

这是在刻度标签中使用常量字体的一个很好的解决方法，[尽管它在以某些格式导出时会遇到一些问题。](https://stackoverflow.com/questions/16907573/rendering-cmu-serif-latex-font-in-matlab-figure-for-axes-ticks)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T18:02:39.450

您可以在乳胶字符串中定义字体。例如，要在衬线字体（罗马）和无衬线字体（我猜是 Helvetica）之间切换：

```
text(0.5, 0.8, '\textsf{sans serif}','interpreter','latex')
text(0.5, 0.7, '\textrm{roman}','interpreter','latex')
text(0.5, 0.6, '$$\mathsf{math\,\,mode\,\,sans\,\,serif}$$','interpreter','latex')
text(0.5, 0.5, '$$\mathrm{math\,\,mode\,\,roman}$$','interpreter','latex') 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T19:32:27.723

为了真正匹配字体（包括 LaTeX 风格的字距调整、连字等），Matlab 图中的文本需要用 LaTeX 排版。使用[psfrag](http://en.wikipedia.org/wiki/PSfrag)的[laprint 脚本](http://www.mathworks.de/matlabcentral/fileexchange/4638)是执行此操作的直接方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-11-21T15:59:06.943

如果您导出到`.eps`您可以在之后使用简单的文本编辑器编辑图形并在那里交换字体。这有点繁琐，但可以解决问题。您还可以单独更改每个字符的字距（因为它的位置是硬编码的）。

也可以单独更改每个字符的字体（我有时会这样做，如果需要来自 Latex 的符号（即 Computer Modern），但又需要 Helvetica 中的其余标签）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-24T17:49:19.510

免责声明：我不是专家。

但是，linux的命令`fc-list`列出了您系统上的所有字体，我认为它们都是Matlab支持的。

在 ubuntu（可能还有其他发行版）中，*乳胶字体*被称为**Latin Modern**或简称 lm。您可以通过以下方式找到它们：

```
# fc-list | grep lmroman
/usr/share/texmf/fonts/opentype/public/lm/lmroman10-bold.otf: Latin Modern Roman,LM Roman 10:style=10 Bold,Bold
/usr/share/texmf/fonts/opentype/public/lm/lmroman7-italic.otf: Latin Modern Roman,LM Roman 7:style=7 Italic,Italic
... etc etc... 
```

在冒号和第一个逗号之间写着**拉丁现代罗马**，这是拉丁现代罗马字体的名称，还有：

*   拉丁现代Sans
*   拉丁现代罗马帽
*   拉丁现代单声道
*   等等等等

`\textrm`我认为当您在数学模式的乳胶中调用（罗马）、`\textsf`（衬线）等时会使用这些字体。当然，您可以通过`fc-list`命令找到它们。

要在绘图中获取乳胶字体，只需执行：

```
plot(rand(10), 'o');
xlabel('index', 'FontName', 'Latin Modern Roman', 'FontSize', 25); 
ylabel('value', 'FontName', 'Latin Modern Roman', 'FontSize', 25); 
set(gca, 'FontName', 'Latin Modern Roman', 'FontSize', 25); 
```

结果很好：

![示例图](../Images/7972ad9608b5063a622f6035619ae24b.png)

PS：Latin Modern 与 Computer Modern 并不完全相同，但它们看起来很相似，我不知道它们到底有多大不同。

关于 Matlab 的解释器选项，据我所知，它并不适用于绘图的所有文本元素，例如斧头标签：

```
>> plot(rand(10), '.'); set(gca, 'Interpreter', 'latex');
Error using hg.axes/set
The name 'Interpreter' is not an accessible property for an instance of class 'axes'. 
```

不幸的是，matlab 的`print`功能存在缺陷，因为它无法将字体嵌入到 eps 或 pdf 文件中。因此，即使在同一系统上，生成的文件也可能具有替换字体。为了解决这个问题，这个库允许你嵌入字体： http: [//www.mathworks.com/matlabcentral/fileexchange/23629-export-fig](http://www.mathworks.com/matlabcentral/fileexchange/23629-export-fig)

确保在导出之前将图形的背景设置为白色，并注意库可能会占用大量内存，因为它调用了 ghostscript。

此外，如果您想更改字体，更改解释器似乎有点过头了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-12T16:47:03.723

如果您打算将 MATLAB 图形导出到 LaTeX 并想要一致的外观（包括字体），您应该使用[matlab2tikz](http://www.mathworks.com/matlabcentral/fileexchange/22022-matlab2tikz)（我曾经开始的一个项目）。

# java - Android OS 版本中的不同字符集

> ID：11212173
> 
> 赞同：0
> 
> 时间：2012-06-26T16:49:26.197
> 
> 标签：java, android, character-encoding

我正在编写一个`AES code`用于加密的内容，并且我以不同的方式实现了不同版本的 Android `encrypt`。我花了一些时间去谷歌阅读了一些关于`getBytes()`系统中字符集的内容，因此`encrypted`字符串是不同的。

我记录的信息来自`Log.i("Charset",Charset.defaultCharset().toString());`

在**Android 2.3**上，它说：

```
06-26 16:10:33.954: I/Charset(453): Charset[UTF-8] 
```

**Android 2.2**它说：

```
06-26 16:05:19.140: I/Charset(737): com.ibm.icu4jni.charset.CharsetICU[UTF-8] 
```

**Android 4.x**说：

```
06-26 15:53:17.770: I/Charset(16957): java.nio.charset.CharsetICU[UTF-8] 
```

Android 2.3 和 4.x 加密/解密字符串的结果相同，但 2.2 不同。

我该怎么做才能`getBytes()`使其与所有版本一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:56:27.107

您可以将编码传递给`getBytes()`. 例子：

```
String myString = "test";
byte[] bytes = myString.getBytes("UTF-8"); 
```

有关受支持值的列表，请参阅：http: [//developer.android.com/reference/java/nio/charset/Charset.html](http://developer.android.com/reference/java/nio/charset/Charset.html)

**编辑**
我明白了。但我不明白为什么不同版本的 Android 加密方式不同。即使它使用不同的库，标准也应该是相同的......奇怪。也许您可以尝试实现自己的`getBytes()`，然后它将在所有版本上完全相同。我找到了这个例子：[http ://www.javacodegeeks.com/2010/11/java-best-practices-char-to-byte-and.html](http://www.javacodegeeks.com/2010/11/java-best-practices-char-to-byte-and.html)

# jquery - jquery 查找 id 大于某个数字的 div

> ID：11212174
> 
> 赞同：0
> 
> 时间：2012-06-26T16:49:28.200
> 
> 标签：jquery

有没有办法找到它？例如：

```
var number=5;
$("#"+>number).remove(); 
```

但我不知道如何做类似的事情，是否可行:)谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:51:04.750

```
$('div').filter(function() {
  return parseInt( this.id, 10) > 5;
}).remove(); 
```

如果`id`只包含`number`.

### 但是你应该只避免 numeric `id`。

***例如：***

```
<div id="myid-5"></div>
<div id="myid-6"></div> 
```

并将上面的代码修改为：

```
$('div').filter(function() {
   return parseInt( this.id.replace('myid-',''), 10) > 5;
}).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:54:16.417

`slice`你可以在函数的帮助下做到这一点

> 将匹配元素集减少为由一系列索引指定的子集。

见[http://api.jquery.com/slice/](http://api.jquery.com/slice/)

这种方法将帮助您摆脱数字索引

请参阅[我](http://jsfiddle.net/xEnN4/)在 jsfiddle 上的示例

# php - 网站安全漏洞

> ID：11212175
> 
> 赞同：1
> 
> 时间：2012-06-26T16:49:29.007
> 
> 标签：php, security

我有一个网站，我使用会话进行登录。在我的管理员的每个页面中，我都有一个检查用户是否登录的检查器。我有这个代码

```
if(!$_SESSION['loggedin'] && !$_SESSION['userid'])
{
  header('Location:login.php');
}
else
{
 //proceed loading the page
} 
```

现在发生了什么，有人在搞乱我们的网站。他/她在网站上输入了一些粗俗的文字，比如......所有不尊重的词语，因为该网站可供公众访问，所以令人沮丧。我相信用户名和密码被黑客入侵了。因此，我要求所有管理员用户更改所有密码，并添加了一个记录器来监控谁将更新网站内容。我记录了登录用户的用户 ID 及其帖子。更改密码后，同样的事情再次发生，内容被黑客或任何人更新。

我检查了我的日志，黑客的用户 ID 是 0。这怎么可能，我该如何阻止他？让我想知道他做了什么，因为在页面顶部的情况下，如果 $_SESSION['userid'] 没有值，它应该将它们重定向到登录页面。

目前我将网站下线，因为黑客越来越糟糕。我能够找出它的IP地址。

这是我的用户认证

```
$user=trim($_POST['username']);
$pass=trim(stripslashes($_POST['password']));
$sql="SELECT * FROM users WHERE user='$user' AND pass='$pass'";
$qry=mysql_query($sql) or die (mysql_error());
if( mysql_num_rows($qry) )
{
  $row=mysql_fetch_assoc($qry);
  $_SESSION['userid'] =$row['userid'];
  $_SESSION['loggedin']=1;  
  header('Location: welcome.php');
}
else
{
      header('Location:login.php?error=1');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:51:46.390

确保在通话后始终调用[exit](http://php.net/exit)`Header('Location: ...')`。否则脚本将在标头调用后继续执行。它会在调用浏览器后继续发送所有内容`header`，但常规浏览器会看到位置标头并进行重定向。不太好的用户可能会绕过位置调用，并可以随意浏览您的“受保护”页面！

所以，不要忘记*总是* 立即结束执行：

```
header('Location:login.php');
exit; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T00:31:57.727

正如@nhahtdh 所观察到的，您有一个明显的 SQL 注入。考虑一下如果有人在`admin' OR 1=1; --`您的用户名字段中输入会发生什么（是的，人们确实尝试过这类事情）。您的 SQL 字符串将被转换为如下内容：

```
SELECT * FROM users WHERE user='admin' OR 1=1; -- AND pass='junk' 
```

这将从您的用户表中选择所有用户。0的`userid`值大概是`userid`SQL 表中的第一个。

请看一下这个解释如何避免 SQL 注入的[优秀答案。](https://stackoverflow.com/a/60496/274466)

# php - 有没有办法让 Yii CActiveForm 突出显示输入字段？

> ID：11212176
> 
> 赞同：2
> 
> 时间：2012-06-26T16:49:30.183
> 
> 标签：php, yii

当我们像这样使用 CactiveForm Widget 时：

```
<?php echo $form->labelEx($model,'name'); ?>
<?php echo $form->textField($model,'name'); ?>
<?php echo $form->error($model,'name'); ?> 
```

我们收到验证消息，但是输入字段本身就是我们的*textfield*，没有得到任何类。

我希望，当*Yii*验证时，输入字段上会出现一个类，以便它可以突出显示。

`CHtml::activeTextField`实际上是这样做的：

```
<?php echo CHtml::activeLabel($model,'name'); ?>
<?php echo CHtml::activeTextField($model,'name') ?> 
```

*有什么方法可以使用CActiveForm*做到这一点？

**添加：**

```
$form=$this->beginWidget('CActiveForm', array(
    'id'=>'event-form',
        'enableClientValidation' => true,
        'clientOptions'=> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:36:31.880

对于要附加的默认错误类，您需要具有默认自动生成表单中的表单结构，如下所示：

```
<div class="form">
  <?php $form=$this->beginWidget('CActiveForm', array(
    ...
  )); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'name'); ?>
        <?php echo $form->textField($model,'name'); ?>
        <?php echo $form->error($model,'name'); ?>
    </div>
    ...
</div> 
```

编辑：这意味着您需要`inputContainer`每个输入字段，因为这就是*jquery.activeform.js*的默认 css 和默认实现的方式。要改变这种行为，我们可以简单地将另一个 css 规则添加到默认的*form.css*文件中，默认情况下只会将错误添加到**div**内部`div.form`。

```
/*
 default css
*/
div.form div.error input,
div.form div.error textarea,
div.form div.error select,
div.form input.error,
div.form textarea.error,
div.form select.error
{
    background: #FEE;
    border-color: #C00;
} 
```

因此，您可以根据自己的喜好进行更改，但最低要求是：

```
div.error input, div.error textarea, div.error select {/* styles */} 
```

如果上述方法不起作用并且您想将错误类单独分配给*输入元素*，那么您可以使用[CActiveForm's](http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail "http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail")`afterValidate`的和`afterValidateAttribute`回调，您需要将错误 css 类添加到输入中，并且还有一个 css 规则匹配这样的输入：[`clientOptions`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail "http://www.yiiframework.com/doc/api/1.1/CActiveForm#clientOptions-detail")

```
input.error, textarea.error, select.error {/*styles*/} 
```

如果您使用某种形式的客户端验证，就像您在 beforeValidate 中所做的那样，您需要[`addClass('error');`](http://api.jquery.com/addClass/ "http://api.jquery.com/addClass/")使用上述 css 进行输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:36:34.560

您可以使用 htmlOptions 参数将类应用于元素，该参数允许您将属性传递给标签。例如：

```
<? php echo $form->textField($model, 'name', array('class'=>'textFieldClass')); ?> 
```

# android - 如何为小部件应用程序创建切换按钮

> ID：11212178
> 
> 赞同：1
> 
> 时间：2012-06-26T16:49:37.453
> 
> 标签：android, android-widget, imagebutton, togglebutton

这是我发现的关于我的问题[如何为小部件 android 制作切换按钮](https://stackoverflow.com/questions/10966595/how-to-make-a-toggle-button-for-a-widget-android)的壁橱帖子，但是，我正在寻找更直接的解决方案。有没有人有任何直接的解决方案来使用图像按钮创建一个切换按钮来创建一个简单的小部件应用程序？我将不胜感激任何建议。

我只需要一个简单的切换按钮，我可以使用服务类来监听状态变化。这可能吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:03:08.447

根据您的评论，我在下面发布示例相关代码，可用于更改小部件中使用的图像：

```
 case WifiManager.WIFI_STATE_ENABLED:
                    remoteViews.setImageViewResource(R.id.widget_normal_imagebutton, R.drawable.ic_widget_wifitimer_on);
                    break;
                case WifiManager.WIFI_STATE_ENABLING:
                    remoteViews.setImageViewResource(R.id.widget_normal_imagebutton, R.drawable.ic_widget_wifitimer_transition);
                    break;
                case WifiManager.WIFI_STATE_DISABLED:
                    remoteViews.setImageViewResource(R.id.widget_normal_imagebutton, R.drawable.ic_widget_wifitimer_off);
                    break;
                case WifiManager.WIFI_STATE_DISABLING:
                    remoteViews.setImageViewResource(R.id.widget_normal_imagebutton, R.drawable.ic_widget_wifitimer_transition);
                    break;
                case WifiManager.WIFI_STATE_UNKNOWN:
                    remoteViews.setImageViewResource(R.id.widget_normal_imagebutton, R.drawable.ic_widget_wifitimer_error);
                    break; 
```

有关创建主屏幕小部件的更详尽的教程，您可以访问： [http ://www.vogella.com/articles/AndroidWidgets/article.html](http://www.vogella.com/articles/AndroidWidgets/article.html)

它解释了整个过程，包括如何使用新信息更新小部件

# iphone - 更改此版本文本中的新内容 - iPhone

> ID：11212180
> 
> 赞同：0
> 
> 时间：2012-06-26T16:49:43.657
> 
> 标签：iphone, app-store-connect

我将二进制文件上传到应用商店，然后发现应用存在问题。我想更改二进制文件和“此版本中的新功能”文本，但该字段不可编辑。这不再被允许了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:55:08.310

如果您在销售后更改二进制文件，则它必须是新版本（在数值上高于以前的版本）。当您上传新版本的二进制文件时，您可以编辑该字段。

您可以在销售时更改最新消息。（我刚刚检查了我是否可以更改我目前正在销售的一款应用的最新文本）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T17:31:54.647

iTunesConnect 商店在今天提交版本供审核后说；

> 您只能在版本等待审核时编辑所有信息。要提交新版本，您必须从审核中删除此版本。

# jquery-ui - jquery ui 自动完成给出错误“未捕获的类型错误：无法读取未定义的属性 'PAGE_UP'”

> ID：11212189
> 
> 赞同：0
> 
> 时间：2012-06-26T16:50:16.857
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我正在尝试使用 jquery ui 自动完成功能，当您在具有自动完成功能的输入字段中键入内容时，仍然出现以下错误：

```
Uncaught TypeError: Cannot read property 'PAGE_UP' of undefined 
```

我在我的页面上包含了以下文件：

*   jquery-1.7.2.min.js
*   jquery-ui-1.8.21.custom.min.js
*   jquery-ui-1.8.21.custom.css

这是使用自动完成的代码：

```
$('input#searchFor').autocomplete({
        source:function(req,add){
            $.getJSON("/index.php/search/autoCompleteHandler?q=?&section="+$('input#searchFor').attr("searchDesc"),req,function(data){
                var suggestions = [];

                $.each(data,function(i,val){
                    suggestions.push(val.name);
                });

                add(suggestions);
            });
        }
    }); 
```

我不知道可能出了什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:34:44.683

[远程数据源](http://jqueryui.com/demos/autocomplete/#remote)的 jQueryUI 示例文档显示远程数据源应该像这样完成：

```
$(function() {
        $( "#birds" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
                //the code to execute when an item is clicked on
            }
        });
    }); 
```

看起来 source 只需要是一个 url。您可以查看 Chrome 中的 ajax 请求，以找出使用搜索查询填充的 $_GET 或 $_POST 变量。

根据您的使用情况，使用带有缓存选项的[远程数据源可能不是一个坏主意。](http://jqueryui.com/demos/autocomplete/#remote-with-cache)

# javascript - Javascript 播放声音导致“NPObject 上的错误调用方法”

> ID：11212191
> 
> 赞同：0
> 
> 时间：2012-06-26T16:50:24.660
> 
> 标签：javascript, audio

我正在尝试在我的 javascript 文件中播放声音

```
document.getElementById("sound").innerHTML = "<embed src=\""+soundfile+"\" hidden=\"true\" autostart=\"true\" id=\"beep\" loop=\"false\" />";
thissound=document.getElementById('beep');
thissound.Play(); 
```

但该`thissound.Play()`行给了我错误“在 NPObject 上调用方法错误”

此外，如果我在该`alert("Played sound!")`行之前添加`thissound.Play()`一行，则没有错误并且可以正常工作！

这有什么问题？声音确实播放，但随后程序冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:08:00.303

这可能不漂亮。如果在声音完全加载时很难检测到，您可以继续尝试播放声音直到它正常工作。

```
var error = true;

while(error) {
    try {
        error = false;
        thissound.play();
    }
    catch (e) {
        error = true;
    }
} 
```

# c# - 版权和许可：有点丢失

> ID：11212194
> 
> 赞同：-1
> 
> 时间：2012-06-26T16:50:30.447
> 
> 标签：c#, apache, licensing, lgpl

我们正准备部署一个商业应用程序。我们的软件利用了其他几个库，这些库的许可范围包括[Code Project Open License (CPOL)](http://www.codeproject.com/info/cpol10.aspx)、[LGPL](http://www.gnu.org/licenses/lgpl.html)、[Apache License](http://logging.apache.org/log4net/license.html)和[MIT License](http://commandline.codeplex.com/license)

显然，我们希望遵守所有这些许可，但我们是一家小型机构，没有法律部门来帮助我们解决这些问题。目前，由于所有的库都是动态链接的，而不是嵌入到可执行文件中，我认为我们基本上是清楚的。我们的项目是封闭源代码，旨在出售，并可能由我们提供给的人转售。

在使用这些库的源代码中，我们将相关的许可证放在了文件的开头。

在我们的 About Box 中，我们也放置了许可证（此步骤是否必要）

我们是否还需要在分发我们的软件时包含一个 LICENSE 文件？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T16:53:21.320

在谈论销售和转售的可能性时，您不希望您的程序员编写您的许可。

**聘请律师。**

# c# - VS2008 中的 SQL CE 3.5 没有 char/varchar 类型。只有 nchar/nvarchar

> ID：11212196
> 
> 赞同：2
> 
> 时间：2012-06-26T16:50:32.413
> 
> 标签：c#, sql-server-ce

我正在尝试在 XP 上的 Visual Studio 2008 中的 SQL CE 3.5 中创建一个表，它只有 nchar/nvarchar 用于列类型。*（在设计师中）*

完整版是 3.5.5386.0

根据这篇文章，**CE 3.5 必须支持 char 和 varchar**： http: [//msdn.microsoft.com/en-us/library/ms172424 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms172424(v=sql.105).aspx)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T16:56:44.943

SQL CE 长期以来一直是[基于 Unicode 的。](http://msdn.microsoft.com/en-us/library/aa275635%28v=sql.80%29.aspx)

> SQL Server CE 并不支持 SQL Server 中的所有数据类型。例如，不支持非 Unicode 文本列（varchar、char、text）和 smallmoney；尽管支持 nvarchar、nchar、ntext 和 money。

您一定误读了您链接到的文章。仅 nchar/nvarchar 没有提及 char/varchar。您可能会发现[这篇 SO 帖子](https://stackoverflow.com/questions/577209/why-doesnt-sql-server-ce-support-varchar)很有趣。

# python - python中队列中作业的并行处理

> ID：11212197
> 
> 赞同：0
> 
> 时间：2012-06-26T16:50:43.007
> 
> 标签：python, parallel-processing, queue, multiprocessing

我刚刚开始做一个项目。完成后我想做的是：

- 将 X 作业命令放在队列中（主函数）

- 在并行线程中始终在那些 X 之外的 Y 工作上工作。（我在想信号量）

-能够从命令行读取当前状态，从当前运行的 Y 中终止或重新启动特定作业

**现在我想让你给我反馈，你会如何解决这个问题？**

- 用于处理 X 之外的 Y 工作。我应该使用信号量还是池进程或其他什么？我还希望能够在进程期间更改进程宽度......（我使用网格来调用脚本。如果我减少进程，它将提高我的速度，某些作业（结果）有时会成为高优先级）

# c++ - 如何在 C++ 中启用浮点数的运行时检查

> ID：11212198
> 
> 赞同：1
> 
> 时间：2012-06-26T16:50:44.687
> 
> 标签：c++, exception-handling, error-handling, floating-point

我似乎记得在以前的工作中，在追踪某个错误时，我添加了一个对确保以某种方式报告浮点错误的函数的调用。我不记得确切的方式 - 可能是回调，或者它在发生时立即导致 Visual Studio 中断。

试图搜索这个，但一无所获。这会为任何人敲响警钟吗？这是针对 Windows 游戏的，如果这很重要的话。

（我不是在谈论在 Visual Studio 中启用第一次机会异常，我也想“实时”捕捉它）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:00:07.843

它被称为*浮点环境*。参考：

*   [http://en.cppreference.com/w/cpp/numeric/fenv](http://en.cppreference.com/w/cpp/numeric/fenv) (C++11)
*   [http://pubs.opengroup.org/onlinepubs/009604599/basedefs/fenv.h.html](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/fenv.h.html) (Unix)

要获得立即停止程序的异常，请使用特定于平台的函数：

*   [http://www.gnu.org/s/hello/manual/libc/Control-Functions.html](http://www.gnu.org/s/hello/manual/libc/Control-Functions.html) (glibc)
*   [http://msdn.microsoft.com/en-us/library/e9b52ceh.aspx](http://msdn.microsoft.com/en-us/library/e9b52ceh.aspx) (Windows)
    *   另外： http: [//msdn.microsoft.com/en-us/library/5z4bw5h5.aspx](http://msdn.microsoft.com/en-us/library/5z4bw5h5.aspx)获取 C++ 异常；我想这就是你所追求的。

# c# - WPF 数据网格未填充列表 >

> ID：11212202
> 
> 赞同：1
> 
> 时间：2012-06-26T16:51:06.237
> 
> 标签：c#, visual-studio-2010

所以我使用 a`List<List<String>>`作为我的数据类型从日志文件中填充数据网格。我已经调试并检查了数据实际上是否正确输入到我的`List<List<String>>`并且看起来确实如此，尽管当我将我的数据网格设置`ItemsSource`为我的数据网格时，我`List<List<String>>`的数据网格填充了正确数量的行和列，但完全是空的。

任何想法为什么我的数据没有进入？

```
string selection = DEFAULT_PATH + @"\" + listBox1.SelectedItem.ToString() + ".log";
string line;
//string[] gridValues = new string[8];
List<List<String>> myList = new List<List<String>>();

using (StreamReader sr = new StreamReader(selection))
{
    while ((line = sr.ReadLine()) != null)
    {
        List<String> myTempList = new List<String>();
        string[] lines =  new string[8];
        lines = line.Split('\t');
        for (int i = 0; i < 8; i++)
        {
            myTempList.Add(lines[i]);
        }
        myList.Add(myTempList);
    }
}
dataGrid1.ItemsSource = myList; 
```

另外，这是xaml：

```
<DataGrid AutoGenerateColumns="True" Height="398" HorizontalAlignment="Left" Margin="281,0,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="268">
        <DataGrid.Columns>
            <DataGridTextColumn Header="TimeStamp" />
            <DataGridTextColumn Header="Process" />
            <DataGridTextColumn Header="TID" />
            <DataGridTextColumn Header="Area" />
            <DataGridTextColumn Header="Category" />
            <DataGridTextColumn Header="EventID" />
            <DataGridTextColumn Header="Level" />
            <DataGridTextColumn Header="Message" />
            <DataGridTextColumn Header="Correlation" />
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:06:04.750

虽然确实可以为 ItemsSource 成员使用 IEnumerable，但您在其中嵌套了另一个 IEnumerable，代表每一行。DataGrid 不够“聪明”，无法在每个嵌套成员中查找每个值。

您能否构建一个表示文件中数据的类，其中每一列都成为公共属性？

```
public class YourClass {
    public string Column1 {get;set;} // use more meaningful names, of course
    public string Column2 {get;set;}
} 
```

从文件`List<YourClass>`中分配其成员后，用作 ItemsSource。

您可以使用 C# 快捷方式快速初始化公共成员：

`var s = new YourClass() {Column1 = lines[0], Column2 = lines[1], ... };`

查看[MSDN 上的 Object initalizers](http://msdn.microsoft.com/en-us/library/bb384062.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:08:56.937

您要做的是创建一个具有与网格中每一列相关的属性的类。然后在列的定义中将 DataPropertyName 设置为您的属性之一。

```
public class YourClass
{
    public string Property1NameHere { get; set; }
    public string Property2NameHere { get; set; }
}

List<YourClass> myList = new List<YourClass>(); 
using (StreamReader sr = new StreamReader(selection)) 
{ 
    while ((line = sr.ReadLine()) != null) 
    { 
        ...
        YourClass yourClass = new YourClass() { ... };
        myList.Add(yourClass);  
    }
}

dataGrid1.ItemsSource = myList; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T20:36:20.650

```
<DataGridTextColumn Header="TimeStamp" Binding="{Binding [0]}" />
<DataGridTextColumn Header="Process" Binding="{Binding [1]}" />
<DataGridTextColumn Header="TID" Binding="{Binding [2]}" />
<DataGridTextColumn Header="Area" Binding="{Binding [3]}" />
<DataGridTextColumn Header="Category" Binding="{Binding [4]}" />
<DataGridTextColumn Header="EventID" Binding="{Binding [5]}" />
<DataGridTextColumn Header="Level" Binding="{Binding [6]}" />
<DataGridTextColumn Header="Message" Binding="{Binding [7]}" />
<DataGridTextColumn Header="Correlation" Binding="{Binding [8]}" /> 
```

不是 100% 肯定，但我相信这会给你你正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:36:14.340

与 dataGrid ItemSource 属性的绑定正在枚举`List<T>`包含的每个元素的外部是一个`List<String>`. 如果你想绑定到 a`List<List<String>>`那么你会遇到一些问题。下面应该为您提供一个具有外部列表的 Count 和 Capacity 属性的数据网格：

```
<Grid>
    <DataGrid x:Name="myGrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
</Grid> 
```

使用后面的代码（不是代码后面的粉丝，但对于这个快速示例）：

```
public MainWindow()
{
    InitializeComponent();
    List<List<String>> nestedList = new List<List<String>>();
    for (int i = 0; i < 10; i++)
    {
        List<String> innerListElement = new List<string>();
        for (int x = 0; x < 10; x++)
        {
            innerListElement.Add(String.Format("{0} - Element {1}", i, x));
        }
        nestedList.Add(innerListElement);
    }
    myGrid.ItemsSource = nestedList;
} 
```

在此示例中，没有一种干净的方法来处理要处理的数据绑定，因为每个内部`List<T>`元素都没有一个好的参考名称。

您可能会考虑绑定到一个`List<KeyValuePair<String, List<String>>`或某个组合，从而为您提供内部引用，以便绑定路径可以引用。

# c# - 在 INSERT INTO 查询中为 UNIQUEIDENTIFIER 生成文字

> ID：11212204
> 
> 赞同：4
> 
> 时间：2012-06-26T16:51:10.793
> 
> 标签：c#, sql-server-2008

我正在编写一个实用程序 C#，将包含大约 80 列的大型 CSV 导入 SQL Server 2008 表。

CSV 需要在导入之前进行操作，例如合并一些列、转换日期等。因此，我正在构建如下`INSERT INTO`语句：

```
INSERT INTO table VALUES ('abc','blah',...) 
```

我的问题是该表包含一个类型的列`UNIQUEINDENTIFIER`。这是一个问题，因为我想重新使用现有的方法，该方法采用一组值并返回值的字符串以直接弹出到我的`INSERT INTO`语句中，处理撇号，消除注入攻击等。

有没有一种方法`UNIQUEIDENTIFIER`可以为我传递给这个方法的有效文字？我试过`Guid.NewGuid.ToString()`了，这给了我这样的文字`'bfdb0297-2018-4555-ac12-88064944a671'`，但我的查询随后出现数据截断异常错误。我还尝试删除连字符。我预计 32 个十六进制字符可以工作。

我知道参数化查询是正确的方法，但这意味着对现有代码的重大返工。

我很擅长 C# 和 SQL Server 虚张声势。

[编辑]

我做了几件事。首先，编写一个查询，用 Guid.NewGuid 更新该列。因此，截断错误不是从那里开始的。检查 SQL Server 参考使我相信截断错误不是从 id 列中的错误值返回的，而是无效值错误。我还考虑了 Aaron 的评论，即重要的工作并不是不正确的借口，并创建了一种方法来生成参数化查询，该方法现在可以正常工作。

非常感谢所有响应者。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-10-05T19:26:24.577

[SQL Server 中](https://msdn.microsoft.com/en-us/library/bb399176(v=vs.110).aspx#Anchor_10)的[文字`UNIQUEIDENTIFIER`](https://msdn.microsoft.com/en-us/library/bb399176(v=vs.110).aspx#Anchor_10)如下所示：

```
SELECT {guid'8DEC377B-6D75-424B-AE01-D3727993C7F6'} 
```

如文档中所示：

> 它是由**关键字`GUID`**后跟十六进制数字形成的序列，格式称为注册表格式：8-4-4-4-12**括在单引号中。**

似乎没有人知道这一点。这是我见过的第一种实际上具有文字 GUID/UUID 的语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:58:12.350

由于这工作正常：

```
DECLARE @x TABLE(y UNIQUEIDENTIFIER); 

INSERT @x SELECT 'bfdb0297-2018-4555-ac12-88064944a671'; 
```

这会因您当前收到的一般错误消息而失败：

```
DECLARE @x TABLE
(
  y UNIQUEIDENTIFIER,
  z CHAR(10)
); 

INSERT @x 
  SELECT 'bfdb0297-2018-4555-ac12-88064944a671',
         '0123456789A'; 
```

结果：

> 消息 8152、级别 16、状态 14、第 7 行
> 字符串或二进制数据将被截断。
> 该语句已终止。

我不得不质疑该错误是否真的发生在`UNIQUEIDENTIFIER`列上。我怀疑（a）错误发生在表中的不同列上，并且您尚未验证所有字符串长度，或者（b）表上有触发器并且错误正在那里发生。

如果您使用正确的参数而不是仅仅将一个字符串放在一起，您可以确保每个参数的定义与表中的完全一致。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:56:13.487

可以修改 SQL INSERT 语句吗？为什么不将其设置为使用特定于该列的内容？

```
xxx, 
xxx,
convert(uniqueidentifier, 'A8AC30E7-B984-4E29-A97A-A434F2B2AB7C'), 
xxx, 
xxx 
```

# selection - SpreadsheetApp.getActiveSheet().getActiveSelection() 坏了

> ID：11212206
> 
> 赞同：0
> 
> 时间：2012-06-26T16:51:21.273
> 
> 标签：selection, google-apps-script, spreadsheet

在我的 Google 电子表格中，我有一个对话框来获取一些用户输入。在 OK 按钮处理程序中，我有以下代码来获取当前选定的行：

```
sheet = SpreadsheetApp.getActiveSheet();
nRow = sheet.getActiveSelection().getRow(); 
```

这几个月来一直工作得很好，但是现在它总是返回一行 1，而不管实际选择的行是什么。

请修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:49:31.950

讨厌。我也是。跟踪器上有一个未解决的问题：[http ://code.google.com/p/google-apps-script-issues/issues/detail?id=1476](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1476)

# iphone - 使图像出现在黑色背景后面

> ID：11212210
> 
> 赞同：-1
> 
> 时间：2012-06-26T16:51:35.220
> 
> 标签：iphone, objective-c, ios, uiview

我想让图像部分出现在黑色背景后面。现在我有`UIView`一个黑色背景和一个`UIImageView`图像。我可以以某种方式仅对黑色的某些部分进行 alpha 处理`UIView`，以便出现后面的图像吗？是否有一种方法可以为视图的某些像素设置 alpha 值？

代码：

```
darkView = [[ShowView alloc] initWithFrame:self.view.frame];
darkView.backgroundColor = [UIColor blackColor];
darkView.alpha = 1.0;
[self.view addSubview: darkView];

imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"testPic.png"]];
imageView.alpha = 1.0;
[darkView addSubview:imageView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:05:07.543

您现在应该拥有它，图像在黑色背景前面，但是您必须将图像放置为 alpha 0；（来自可视化编辑器或）

```
imageView.alpha = 0.0; 
```

要使图像出现，您只需从按钮或其他东西运行以下代码：

```
UIView animateWithDuration: 0.4
                      delay: 0.0
                    options: UIViewAnimationOptionCurveLinear |   UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
                     imageView.alpha = 1.0; 
                 }completion:^(BOOL finished){

                 }]; 
```

# c# - 方法的布尔运算

> ID：11212211
> 
> 赞同：0
> 
> 时间：2012-06-26T16:51:45.177
> 
> 标签：c#, boolean

> **可能重复：**
> [如果第一个为假，编译器是否继续评估所有必须为真的表达式？](https://stackoverflow.com/questions/3997612/does-the-compiler-continue-evaluating-an-expression-where-all-must-be-true-if-th)
> [急切操作和短路操作的区别？（| 与 || 和 & 与 &&）](https://stackoverflow.com/questions/4838171/difference-between-eager-operation-and-short-circuit-operation-versu-and)

所以这是我的问题。如果我有这个

```
if (Foo() && Bar())
    DoStuff(); 
```

如果 Foo() 返回 false，它还会运行 Bar() 吗？还是我需要

```
if (Foo())
    if (Bar())
        DoStuff(); 
```

以确保它仅在“失败”之前运行所需的最低金额？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:53:00.590

```
if (Foo() && Bar()) 
```

在这种情况下（逻辑与），它将首先检查返回值，并且只有在返回 true时才`Foo()`会这样做。简单地说，如果任何一个条件为假，那么它不会检查其他条件，它会从左到右检查条件。`Bar()``Foo()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T16:56:37.447

不，如果返回 false ，`Bar()`则不会被评估。`Foo()`这是 C#`&&`运算符的一个特性（不限于`if`语句）：

> 条件与运算符 (&&) 对其布尔操作数执行逻辑与，但仅在必要时评估其第二个操作数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T16:53:44.533

您正在寻找的是所谓的“短路”，是的，[.Net](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.100%29.aspx)支持它。

# vba - 在 Excel 中从不确定的范围大小中提取数据

> ID：11212212
> 
> 赞同：1
> 
> 时间：2012-06-26T16:51:45.903
> 
> 标签：vba, excel, excel-2010

我是 VBA 的新手，我希望得到一些帮助。

我有一个电子表格，其范围总是有 10 列，但可能有 X 行。我正在尝试编写一个 VBA 脚本，该脚本将遍历此范围并从每个单元格中提取值。

例如，如果我有 2 行，我需要 A1、B1、C1..J1，然后我需要 A2、B2、C2...J2。下一次我可以有 5 行，然后再有 3 行。

如何设置循环以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:18:44.920

您还可以使用动态命名范围并循环遍历它。有关更好的示例，请参阅此[链接](http://www.gilliganondata.com/index.php/2010/08/17/excel-dynamic-named-ranges-never-manually-updating-your-charts-2/)或 google。动态名称范围很强大，尤其是对于图表。

对于您的示例，您可以将名称范围引用设置为；

```
=OFFSET(Sheet1!$A$1,0,0,COUNT(Sheet1!$A:$A),10) '10 is the width and will go to column J 
```

假设 A 列将具有表的真正最大行。

然后;

```
Dim arr() As Variant

 arr = Range("YourRangeName")

  For x = 1 To UBound(arr,1) 'Finds the max number of rows in the array, UBound(arr,2) finds the total columns.
    'Do some code here where x steps through the array arr
    '  = arr(x, 1) 'column a
    '  = arr(x,2)  'column b 
    '  = arr(x,3) ....     
  Next x 
```

在代码中尽可能多地处理几乎总是更好/更快，即将Excel中的范围分配给数组然后循环遍历数组而不是引用单元格（尤其是在循环中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:32:47.717

就像是

```
Dim lastRow as long

lastRow = UsedRange.Rows.Count     'or some other way of determining the last row used

    for i = 1 to lastRow    'loop through all used rows

    'ActiveSheet.Cells(i, 1).value    'column A
    'ActiveSheet.Cells(i, 2).value    'column B
    'ActiveSheet.Cells(i, 3).value    'column C

    next i 
```

# php - PHP中的sprintf长度说明符

> ID：11212215
> 
> 赞同：2
> 
> 时间：2012-06-26T16:51:58.700
> 
> 标签：php, printf

[*将长度说明符*](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)包含在格式字符串中是否有任何好处，`sprintf`或者`printf`即使[PHP 手册中](http://ca3.php.net/manual/en/function.sprintf.php)没有提到它：

*   `h`- 该参数被解释为一个短整型或无符号短整型（仅适用于整数说明符：、`i`、`d`、`o`和`u`）。`x``X`
*   `l``i`- 对于整数说明符（ 、`d`、`o`、和），该参数被解释为 long int 或 unsigned long int，`u`而对于说明符和，该参数被解释为宽字符或宽字符串。`x``X``c``s`
*   `L`- 参数被解释为 long double（仅适用于浮点说明符：、`e`、`E`和`f`）。`g``G`

还是把它排除在外更好？我想我想弄清楚的是为什么 php 决定把它排除在外。

考虑以下来自 phpriot.com 的代码：

```
$a = 0.5;
$b = 0.1;
$c = 16;

echo sprintf('%01.2lf %.1lf 0x%x', $a, $b, $c); # 0.50 0.1 0x10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:00:22.850

It's not needed. PHP doesn't have short ints, ints, long ints, etc. It has only [`ints`](http://www.php.net/manual/en/language.types.integer.php).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:01:58.950

[在 PHP 中，除了Integers](http://us.php.net/integer)和[Floats](http://us.php.net/float)之外，数字之间没有区别。根据系统架构（32 位或 64 位），整数类型为 int 或 int64。您可以使用字符串和 BCMath 来模拟更大的数字，但它们将始终存储在字符串中。

因此，在 PHP 中，没有必要使用长度说明符来更改数字的类型。要么是浮子，要么不是。

# java - 如何解决JVM崩溃？

> ID：11212217
> 
> 赞同：1
> 
> 时间：2012-06-26T16:52:09.497
> 
> 标签：java, jvm

我收到以下 JVM 崩溃错误。我可以知道如何解决这个问题吗？请参考以下 hs_err 日志。

```
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  Internal Error (50532D41524B33574545502445434F5241544F520E4350500024), pid=18211, tid=1137465664
#
# Java VM: Java HotSpot(TM) 64-Bit Server VM (1.5.0_22-b03 mixed mode)

---------------  T H R E A D  ---------------

Current thread (0x00002aab6407df10):  VMThread [id=18260]

Stack: [0x0000000043bc5000,0x0000000043cc6000),  sp=0x0000000043cc4850,  free space=1022k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
V  [libjvm.so+0x667711]
V  [libjvm.so+0x2e4c66]
V  [libjvm.so+0x5a899d]
V  [libjvm.so+0x5a8ade]
V  [libjvm.so+0x5b11f4]
V  [libjvm.so+0x5a76e6]
V  [libjvm.so+0x5b29bb]
V  [libjvm.so+0x57d04d]
V  [libjvm.so+0x67003a]
V  [libjvm.so+0x66fa5a]
V  [libjvm.so+0x66f176]
V  [libjvm.so+0x66f3eb]
V  [libjvm.so+0x66ef7a]
V  [libjvm.so+0x56ff45]

VM_Operation (0x000000004138c420): parallel gc failed allocation, mode: safepoint, requested by thread 0x000000001ed29460

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x000000001ed29460 JavaThread "CobolThread 362" daemon [_thread_blocked, id=6054]
  0x000000001ac8e4f0 JavaThread "CobolThread 361" daemon [_thread_blocked, id=6038]... 
```

请问是否可以通过更改JVM参数来解决上述错误？以下是当前使用的 JVM 参数。

```
-Xms2048m -Xmx2048m -XX:MaxPermSize=768m -XX:+UseParallelGC 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T16:58:53.833

You use an old VM and specify a GC algorithm using an option explicitly non stable :

> Options that are specified with -XX are not stable and are subject to change without notice.

(from [http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html))

This line of your trace shows that the failure is related to the parallel gc :

```
VM_Operation (0x000000004138c420): parallel gc failed allocation 
```

So if you don't have a really specific reason to use this parameterization, remove it. You should only choose a GC algorithm when you know why. And update your VM, as it's harder to search for the bugs of this old version.

# php - 分阶段形式和“返回”（在浏览器中单击“返回”）

> ID：11212223
> 
> 赞同：1
> 
> 时间：2012-06-26T16:52:18.870
> 
> 标签：php, mysql, forms, codeigniter

我有一个非常复杂的表格，其中有多个“阶段”。

每个阶段都有用户添加不定行数的表单。每次用户单击“继续”时，这些表单都会保存到数据库中（每个“阶段”在数据库中都有自己的表）并显示下一个阶段。

我担心用户按下“返回”以获得以前的表单（如果他们犯了错误或其他事情）。

我能想到的解决这个问题的唯一三种方法是：

1.  不允许人们反击。如果他们确实将它们直接发送到第一个表格以重新开始。
2.  请求表单页面时检查数据库。如果已经有行，则删除这些行并在他们所在的表单上再次启动用户。
3.  [潜在的——这会更难，因为我正在使用 codeigniter 的 form_validation 库] 当用户按下时检查数据库。获取任何当前值并将其作为默认值放入表单中。然后在提交时，删除所有行并替换为表单值。

各位大佬是怎么做这种表格的？仅针对某些形式的逻辑量变得非常荒谬！哈哈，有没有更好的方法呢？我怀疑上面的数字 3 是最好的选择？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:00:28.870

I have used the third option on various occasions, though depending on the size of the form, this can certainly get overwhelming, not to mention the fact that I haven't used CodeIgniter's validation before.

Many issues arise from the first two options that should be avoided if possible [Including, but not limited to: Mistakes that aren't able to be corrected, hairy database logic, etc.], but the reward of having happy users is invaluable.

Hope this helps!

Mason

To give a visual summary of what users may think if they can't go back, I have included this image.

[http://momentumshift.com/wp-content/uploads/2011/05/senior_woman_using_computer_mon142089.jpg](http://momentumshift.com/wp-content/uploads/2011/05/senior_woman_using_computer_mon142089.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:02:04.550

1 和 2 对用户体验都非常不利。3 是您最好的选择，根据您的数据库结构，您可能能够更新而不是删除和重新插入。

如果你有一个密钥，我假设你有，为了区分多个表单提交，你可以使用类似`insert on duplicate key update`取决于你的数据库引擎的东西。

# php - 删除行mysql php

> ID：11212224
> 
> 赞同：0
> 
> 时间：2012-06-26T16:52:31.490
> 
> 标签：php, mysql, sql-delete

使用以下代码：

```
if (isset($_POST['delete']) && isset($_POST['id']))
{
    $first = get_post('first');
    $query = "DELETE FROM user_master WHERE id='$id'";
    if(!mysql_query($query, $db_server))
        echo "DELETE failed: $query<br />" . 
        mysql_error() . "<br /><br />";
}

$query="SELECT * FROM user_master";
$result= mysql_query($query);

if(!result) die ("Database access failed: " . mysql_error());
$rows = mysql_num_rows($result);

for ($j=0 ; $j<$rows ; ++$j)
{
    $row = mysql_fetch_row($result);
    echo <<<_END
    <pre>
    ID      $row[0]
    First   $row[1]
    Last    $row[2]
    Email   $row[3]
    User    $row[4]
    </pre>
    <form action="willingLog.html" method="post">
    <input type="hidden" name="delete" value="yes" />
    <input type="hidden" name="id" value="$row[0]" />
    <input type="submit" value="DELETE RECORD" /></form>
_END; 
```

我无法从表中删除记录。

表格中的所有记录都打印在屏幕上，包括“删除记录”按钮。然而，当我按下按钮时，什么也没有发生。我检查了 phpmyadmin 上的实际表，该表也不受影响。

我正在从书中提取这些东西，所以我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:03:14.187

我看不到你在哪里设置`$id`变量。

```
if (isset($_POST['delete']) && isset($_POST['id']))
{
    //$first = get_post('first');   #not sure what this does
    $id = sanitize($_POST['id'], 'int');  //protect from sql injection
    $query = "DELETE FROM user_master WHERE id=$id";
    if(!mysql_query($query, $db_server))
        echo "DELETE failed: $query<br />" . 
        mysql_error() . "<br /><br />";
} 
```

请务必清理通过网络发送的任何数据，即`$_POST`. 此外，如果`id`是数字类型，请不要将值括在引号中，否则 mysql 会将其解释为字符串。

最后，考虑使用[MySqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)，因为 MySql API 已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T11:44:23.953

### 在这里，我从该变量中定义了一个变量，我删除了这些值

$id = 2;

```
 $query = mysql_query("DELETE FROM table_name WHERE id="'.$id.'""); 
```

注意：删除查询 ID 很重要，否则它会默认删除整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-15T12:30:42.947

$query = mysql_query("DELETE FROM table_name WHERE id=1");

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:02:38.840

```
$query = "DELETE FROM user_master WHERE id='$id'"; 
```

这应该是：

```
$query = "DELETE FROM user_master WHERE id='" . $_POST['id'] "'"; 
```

但是请对 SQL 注入做一些研究，以及为什么永远不要将信息从用户直接传递到数据库中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:08:23.363

代码应为：

```
$id = get_post('id'); 
```

在第一个“if”语句下的花括号的第一行。

# mysql - SQL过滤掉一些数据？

> ID：11212229
> 
> 赞同：1
> 
> 时间：2012-06-26T16:52:54.940
> 
> 标签：mysql, sql

我有一个数据库表：`mydata`

```
id    content   name
1     1         a
2     2         b
3     2         c
4     13        hhh
5     13        yyyy
6     7         wwww
7     13        iiii
8     7         nnnn
9     8         oooo 
```

它将查看“内容”字段。如果“内容”中的相同值出现多次，它将显示出来。这是最终结果

```
id    content   name
2     2         b
3     2         c
6     7         wwww
8     7         nnnn
4     13        hhh
5     13        yyyy
7     13        iiii 
```

那么这个SQL怎么写呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:55:15.980

```
select *
from myData
where content in (
  select content
  from myData
  group by content
  having count(*) > 1) 
```

# java - 如何在 ANT 脚本中使用 source 命令加载文件？

> ID：11212235
> 
> 赞同：4
> 
> 时间：2012-06-26T16:53:19.463
> 
> 标签：java, ant, data-distribution-service

使用带有java的Linux环境，我有一个配置文件，应该在从控制台执行eclipse应用程序之前配置，

这是源的 OpenspliceDDS 配置文件，位于以下目录中

source /../HDE/x86.linx2.6./release.com --->在命令行执行

但是我需要在 ANT 脚本中执行源命令，任何人都可以帮助我解决这个问题。

例子 ：

我已经为命令创建了属性标签

```
<property name="release.path" location="/opt/HDE/x86.linux2.6/release.com"/>

<exec executable="source ${release.path}" spawn="true">

</exec> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:09:24.813

我认为您需要为 Ant 调用创建一个包装脚本。在包装脚本中，执行“source”命令，然后执行“sources”命令。（您可以将文件的参数传递给源并执行）。

**跟进**

对于包装脚本，我的意思是这样的：

```
#!/bin/bash

env_file=$1
script_to_exec=$2

. $env_file
exec $script_to_exec 
```

关键是您需要获取文件，然后在同一环境中执行脚本。因此，将它们包装成一个脚本，您可以从不同的环境 (Ant) 执行该脚本。

要从 Ant 调用它，如下所示：

```
 <exec executable="wrapper_script">
        <arg value="${release.path}"/>
        <arg value="script_to_execute"/>
    </exec> 
```

# powershell - 在自定义对象中返回信息的函数

> ID：11212240
> 
> 赞同：2
> 
> 时间：2012-06-26T16:53:41.977
> 
> 标签：powershell, powershell-2.0

我有一个函数可以遍历计算机上的所有 HDD，并返回有关这些驱动器及其映射到阵列中物理驱动器的信息。

我希望这个函数在自定义对象中返回信息。

这是功能：

```
##--------------------------------------------------------------------------
##  FUNCTION.......:  Get-HDDInfo
##  PURPOSE........:  
##  REQUIREMENTS...:  
##  NOTES..........:  
##--------------------------------------------------------------------------
Function Get-HDDInfo {
    [CmdletBinding()]
        Param([Parameter(Mandatory = $True,
            ValueFromPipeLine = $True,
            Position = 0)]
            [String[]]$ComputerName
        )#END: Param
    $W32_DD = @(gwmi Win32_DiskDrive -ComputerName $ComputerName)
    $Array = @()

    $W32_DD | foreach { 
        $query = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" `
        + $_.DeviceID + "'} WHERE ResultClass=Win32_DiskPartition" 
        $Array += $_.Name
        $Array += $_.Model
        <#
        $obj = New-Object PSObject
        $obj.PSObject.typenames.insert(0,'JoeIT.Custom.SystemInfo')
        $obj | Add-Member -MemberType NoteProperty -Name `
            "PDCaption" -Value $_.Name
        $obj | Add-Member -MemberType NoteProperty -Name `
            "PDModel" -Value $_.Model
        $Array += $obj
        #>
        Get-WmiObject -Query $query | foreach { 

            $Array += $_.Name
            $Array += $_.Description 
            $Array += $_.PrimaryPartition

            #$obj = New-Object PSObject
            <#
            $obj.PSObject.typenames.insert(0,'JoeIT.Custom.SystemInfo')
            $obj | Add-Member -MemberType NoteProperty -Name `
                        "DPName" -Value $_.Name
            $obj | Add-Member -MemberType NoteProperty -Name `
                        "DPDescription" -Value $_.Description
            $obj | Add-Member -MemberType NoteProperty -Name `
                        "DPPrimary" -Value $_.PrimaryPartition
            #>
            $query2 = "ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" `
            + $_.DeviceID + "'} WHERE ResultClass=Win32_LogicalDisk" 

            Get-WmiObject -Query $query2 | ForEach {
            $Array+= $_.Name
            $Used = [math]::round($_.Size/1024/1024/1024,0)
            $Free = [math]::round($_.FreeSpace/1024/1024/1024,0)
            $Array += [String]$Used +"GB"
            $Array += [String]$Free +"GB"
            #Return $Array;
            #$Array = $Null
            }

            <#
            $Array += $obj
            $obj = $Null
            #>
        }#END: Get-WmiObject -Query
    }#END: $W32_DD | foreach
    ##----------------------------------------------------------------------
    ##  Store results in custom Object
    ##----------------------------------------------------------------------
    Return $Array
}#END: Function Get-HDDInfo 
```

被注释掉的东西来自我试图将信息放入自定义对象的尝试。也许我只是有点筋疲力尽，但我似乎无法正确完成这项工作。如您所见，注释掉的代码试图覆盖命名属性 - 我在编写它时就知道，但出于某种原因，我希望它无论如何都能工作；）

也许我不应该在没有休息日的情况下工作三周，但我的大脑就是不让我解决这个问题。

我想要的是能够做这样的事情：

```
$test = (get-hddinfo $SVR01)
$test.PhysicalDrive1
$test.Partition1
$test.DriveLetter1
$test.TotalSize1
$test.FreeSpace1 
```

这将查询名为 SVR01 的计算机，并写出第一个物理 HDD、该驱动器的第一个逻辑分区、分配的驱动器号、磁盘的总大小以及磁盘上的可用空间。

然后我可以做类似的事情

```
$test.PhysicalDrive2
$(same code here for the second physical drive) 
```

我到底做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:41:15.990

尝试这个：

```
[CmdletBinding()]
        Param([Parameter(Mandatory = $True,
            ValueFromPipeLine = $True,
            Position = 0)]
            [String[]]$ComputerName
        )
    $W32_DD = @(gwmi Win32_DiskDrive -ComputerName $ComputerName)

    $a = new-object  System.Object
    $sc3 = 1
    $sc2 = 1
    $sc1 = 1
    $W32_DD | foreach { 
        $query = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" `
        + $_.DeviceID + "'} WHERE ResultClass=Win32_DiskPartition" 

        $a | Add-Member -type NoteProperty -name DiskDriveName$sc1 -value $_.Name
        $a | Add-Member -type NoteProperty -name DiskDriveModel$sc1 -value $_.Model       

        Get-WmiObject -Query $query | foreach { 

            $a | Add-Member -type NoteProperty -name PartitionName$sc2 -value $_.Name
            $a | Add-Member -type NoteProperty -name PartitionDescription$sc2 -value $_.Description
            $a | Add-Member -type NoteProperty -name PrimaryPartition$sc2 -value $_.PrimaryPartition

            $query2 = "ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" `
            + $_.DeviceID + "'} WHERE ResultClass=Win32_LogicalDisk" 

            Get-WmiObject -Query $query2 | ForEach {

            $a | Add-Member -type NoteProperty -name LogicalDiskName$sc3 -value $_.Name           

            $Used = [math]::round($_.Size/1024/1024/1024,0)
            $Free = [math]::round($_.FreeSpace/1024/1024/1024,0)

            $a | Add-Member -type NoteProperty -name UsedSpace$sc3 -value $([String]$Used +"GB")
            $a | Add-Member -type NoteProperty -name FreeSpace$sc3 -value $([String]$Free +"GB")

            $sc3++
            }
           $sc2++
          }       
       $sc1++
    }

    Return $a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T05:09:57.847

这是一种方法，它不完全是您想要的，但它为您提供了一种方法：

```
##-------------------------------------------------------------------------- 
##  FUNCTION.......:  Get-HDDInfo 
##  PURPOSE........:   
##  REQUIREMENTS...:   
##  NOTES..........:   
##-------------------------------------------------------------------------- 
Function Get-HDDInfo
{ 
  [CmdletBinding()] 
  Param([Parameter(Mandatory = $True, ValueFromPipeLine = $True, Position = 0)] 
        [String[]]$ComputerName)#END: Param 

  $W32_DD = @(gwmi Win32_DiskDrive -ComputerName $ComputerName) 
  $ArrayofPD = @() 

  foreach ($dd in $W32_DD)
  {  
    $query = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" + $dd.DeviceID + "'} WHERE ResultClass=Win32_DiskPartition"  

    # create a new physical disc object
    $PDobj = New-Object PSObject 
    $PDobj | Add-Member -MemberType NoteProperty -Name "PDCaption" -Value $dd.Name 
    $PDobj | Add-Member -MemberType NoteProperty -Name "PDModel" -Value $dd.Model 

    $ArrayofLD = @()
    $diskParts = Get-WmiObject -Query $query
    foreach ($diskPart in $diskParts)
    {  
      # create a new logical disc object
      $LDobj = New-Object PSObject 
      $LDobj | Add-Member -MemberType NoteProperty -Name "DPName" -Value $diskPart.Name 
      $LDobj | Add-Member -MemberType NoteProperty -Name "DPDescription" -Value $diskPart.Description 
      $LDobj | Add-Member -MemberType NoteProperty -Name "DPPrimary" -Value $diskPart.PrimaryPartition 

      $query2 = "ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" + $diskPart.DeviceID + "'} WHERE ResultClass=Win32_LogicalDisk"  

      $LogicalDisk = Get-WmiObject -Query $query2
      if ($LogicalDisk -ne $null)
      {
        $LDobj | Add-Member -MemberType NoteProperty -Name "LGName" -Value $LogicalDisk.Name
        $Used = [math]::round($LogicalDisk.Size/1024/1024/1024,0) 
        $Free = [math]::round($LogicalDisk.FreeSpace/1024/1024/1024,0) 
        $LDobj | Add-Member -MemberType NoteProperty -Name "UsedSpace" -Value $([String]$Used +"GB")
        $LDobj | Add-Member -MemberType NoteProperty -Name "FreeSpace" -Value $([String]$Free +"GB")
      } 
      $ArrayofLD += $LDobj
    }
    $PDobj | Add-Member -MemberType NoteProperty -Name "LogicalDisks" -Value $ArrayofLD 

    $ArrayofPD += $PDobj
  }

  ##---------------------------------------------------------------------- 
  ##  Store results in custom Object 
  ##---------------------------------------------------------------------- 
  Return $ArrayofPD 
}#END: Function Get-HDDInfo 

Clear-Host
$a = Get-HDDInfo localhost
$a 
```

点源它为我提供的功能：

```
PS C:\Users\JPB\Documents> $a = Get-HDDInfo localhost
PS C:\Users\JPB\Documents> $a

PDCaption                                     PDModel                                       LogicalDisks                                 
---------                                     -------                                       ------------                                 
\\.\PHYSICALDRIVE0                            ST9500420AS                                   {@{DPName=Disque n° 0, partition n° 0; DPD...
\\.\PHYSICALDRIVE1                            ST932042 3AS USB Device                       {@{DPName=Disque n° 1, partition n° 0; DPD... 
```

和 ：

```
PS C:\Users\JPB\Documents> $a[0].LogicalDisks

DPName                                        DPDescription                                                                     DPPrimary
------                                        -------------                                                                     ---------
Disque n° 0, partition n° 0                   Système de fichiers installable                                                        True
Disque n° 0, partition n° 1                   Système de fichiers installable                                                        True 
```

# android - 尝试更改可绘制图像时应用程序冻结

> ID：11212241
> 
> 赞同：2
> 
> 时间：2012-06-26T16:53:43.910
> 
> 标签：android, android-layout, android-intent

我正在构建一个基于位置的应用程序，它使用相机的图像而不是 2D 地图作为其用户界面。

在那个视图中，我想绘制一个可绘制的图像。当点之间的距离发生变化时，图像drawable也会发生变化。

一切正常，但仅限于第一个。当应该更改图像时，应用程序会挂起。但是相机拍摄的图像仍然是正常的方式。

这是我`onCreate`初始化drawable的代码：

```
arrow = (ImageView)findViewById(R.id.arah);
arrow.setVisibility(0);

res =  getResources();
lurus = res.getDrawable(R.drawable.arahlurus);
kanan = res.getDrawable(R.drawable.arahkanan);
kiri = res.getDrawable(R.drawable.arahkiri);
putar = res.getDrawable(R.drawable.arahputar); 
```

这是我在方法 onLocationChanged() 中的代码：

```
arrow.setVisibility(0);
Location pointLocation = TEMP_LOCATION.get(check);
float distance = location.distanceTo(pointLocation);
int dist = (int)Math.round(distance);
//stepNext.setText("" + distance + " Meter");
//String chek = TEMP_POINT.get(check).toString();;
if (dist / 4 == 0){
    stepNext.setText("" + dist + "meter");
    Toast.makeText(ARrazerNav.this, "Jarak Dengan Checkpoint: " +dist, Toast.LENGTH_SHORT).show();
}
else if (dist < 15){
    arrow.setVisibility(0);
    //speakWords(TEMP_NAME.get(check).toString());
    check++;
}
else if (dist >= 10 && dist <= 27){
    arrow.setVisibility(1);
    if(checkOrientation == 1){
        if (TEMP_POINT.get(check) == 1){
            arrow.setImageDrawable(lurus);
        }
        else if (TEMP_POINT.get(check) == 2){
            arrow.setImageDrawable(kanan);
        }
        else if(TEMP_POINT.get(check) == 3){
            arrow.setImageDrawable(putar);
        }
        else{
            arrow.setImageDrawable(kiri);
        }
    }else{
        if (TEMP_POINT.get(check) == 1){
            arrow.setImageDrawable(kiri);
        }
        else if (TEMP_POINT.get(check) == 2){
            arrow.setImageDrawable(lurus);
        }
        else if(TEMP_POINT.get(check) == 3){
            arrow.setImageDrawable(kanan);
        }
        else{
            arrow.setImageDrawable(putar);
        }
    }
} 
```

# sql - Rails ActiveRecord 查询（跨模型）

> ID：11212244
> 
> 赞同：0
> 
> 时间：2012-06-26T16:53:52.490
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

我有一个应用程序，可让用户输入与这些日期相关的日期和兴趣。我需要根据他们的兴趣和位置向他们发送交易（日期前几天 - 通过电子邮件）。我已经正确设置了所有模型并记录了数据，只是想知道如何查询模型的日期，然后根据城市和兴趣发送适当的交易。

笔记：

*每个城市和兴趣类别只有1个交易

*对于日期类型（假期、场合、朋友生日等），我有几种不同的模型。所有的结构都几乎相同。

*每种日期的所有兴趣都存储在 person_interests 中。

```
 Models:

    Class User
      belongs_to :province
      belongs_to :city
      has_many :friends_bdays
      has_many :occasions
      has_many :person_interests, :as => :person
      has_many :interests, :through => :person_interests
      has_many :user_holidays
      has_many :holidays, :through => :user_holidays
      has_many :anniversaries
    end

    class Deal < ActiveRecord::Base
       belongs_to :interest
       belongs_to :city
       belongs_to :store  
    end

   class Store < ActiveRecord::Base
      has_many :deals
      belongs_to :city
      belongs_to :province
    end

    class PersonInterest < ActiveRecord::Base
      belongs_to :interest
      belongs_to :person, :polymorphic => true  
    end

    class Interest < ActiveRecord::Base
      has_many :person_interests
      has_many :deals
    end

    class Occasion < ActiveRecord::Base
      belongs_to :user
      belongs_to :admin_user
      has_many :person_interests, :as => :person
      has_many :interests, :through => :person_interests    
    end

    class Anniversary < ActiveRecord::Base
      belongs_to :user
      has_many :person_interests, :as => :person
      has_many :interests, :through => :person_interests
    end

  class Friend_bday < ActiveRecord::Base
    belongs_to :user
    has_many :person_interests, :as => :person
    has_many :interests, :through => :person_interests
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:25:24.793

您可以使用以下解决方案的变体来实现此目的：

安装[squeel](https://github.com/ernie/squeel) gem

```
class User
  def deals(reload=false)
    @deals = nil if 
    @deals ||= Deal.where{ 
     ( (:city => city_id) | ( :interest_id => interest_ids) ) & 
     :deal_date => (Time.now..3.days.from_now) 
    }
  end
end 
```

现在，`user.deals`返回与用户的城市或兴趣相匹配的未来 3 天内有效的交易。

**编辑1：**

根据您的评论，您似乎不需要 squeel gem。您可以使用常规 AR 语法来实现您想要的。

```
class User
  def deals(reload=false)
    @deals = nil if reload

    @deals ||= Deal.where(
      :city => city_id, 
      :interest_id => interest_ids, 
      :deal_date => (Time.now..3.days.from_now) 
    )
  end
end 
```

# python - Python列表语法列表

> ID：11212246
> 
> 赞同：3
> 
> 时间：2012-06-26T16:53:55.607
> 
> 标签：python, list, syntax

列表列表的这两个声明有什么区别？

```
>>> l = [[]]*4
>>> l
[[], [], [], []]
>>> l[1].append(1)
>>> l
[[1], [1], [1], [1]]

>>> m = [[],[],[],[]]
>>> m[1].append(1)
>>> m
[[], [1], [], []] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T16:55:18.210

第一个创建了对单个列表的四个引用 --- 它是重复四次的同一个列表。第二个创建四个不同的列表。在第一种情况下，当您附加到一个列表时，它会影响所有这些，因为它们都是同一个对象。在第二种情况下，每个列表都是一个不同的对象，因此附加到一个对象不会影响其他对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:01:57.047

这会给你一个清晰的想法，在`l`所有对象中都相同`id()`并且都是可变的，因此编辑其中任何一个也将自动编辑另一个，因为它们都只是对同一个对象的引用，`id=18671936` 并且`m`都具有不同`id()`，所以所有的它们是不同的对象。

```
>>> l = [[]]*4
>>> for x in l:
        print(id(x))

18671936 
18671936
18671936
18671936

>>> m=[[],[],[],[]]
>>> for x in m:
        print(id(x))

10022256
18671256
18672496
18631696 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T16:57:00.427

也许这将有助于使其更加明确？这相当于您的第一个示例：

```
>>> l1 = []
>>> l2 = [l1]*4
>>> l2
[[], [], [], []] 
```

你基本上在那里做的是创建一个包含 4 个项目的列表，所有这些项目都引用同一个列表。在我的代码中，该列表名为`l1`.

正如 Mark 在下面的评论中提到的，这也完全是这样的：

```
>>> l1 = []
>>> l2 = [l1, l1, l1, l1]
>>> l2
[[], [], [], []] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T17:00:22.070

帮助我理解这种现象的事情是，您需要*明确地*构建您想要的*每个*列表。

您可以使用 显式构造一个空列表`[]`。在第一个示例中，您已经完成了一次，因此您有一个列表。在第二个中你已经完成了四次，所以有四个列表。

如果你不想写`[]`很多次你可以做

```
[[] for _ in range(n)] 
```

# jquery - 在一个导航栏中使用两种不同的点击动画

> ID：11212247
> 
> 赞同：0
> 
> 时间：2012-06-26T16:53:58.563
> 
> 标签：jquery, toggle, slide, nav

我的网站使用带有 CSS 文件的 html。我的导航栏使用 Jquery 点击动画。我想向导航功能添加另一个级别的动画，但无法弄清楚如何在不破坏现有点击动画（滚动）的情况下插入另一个点击动画（滑动/切换）。

这是现在的设置方式

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Jonah Rapino - Film Scoring</title>
<link rel="stylesheet" href="rapino.css" media="screen, projection"/>
<link href='http://fonts.googleapis.com/css?family=OFL+Sorts+Mill+Goudy+TT' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="" type="image/x-icon">
<style type="text/css">
</style>
</head>

<body>
<script src="http://code.jquery.com/jquery.js"></script>
<script type="text/javascript">
  $(function() {
$("#nav").click(function(e){
  e.preventDefault();
  var theClicked = $(e.target).attr("href"),
  targetImg = $(theClicked).offset().top;
  $("html,body").animate({
    scrollTop : targetImg -10,
  }, 1400);
//console.log(targetImg)
});
});
</script>
</body>

<div id="content"> 
<div id="nav"> 
<ul class="listless">
  <li><a href="#about">About</a></li>
  <li><a href="#current-work">Work</a></li>
  <li><a href="#feature-film-scores">Film</a></li>
  <li><a href="#silent-film-scores">Silent</a></li>
  <li><a href="#classical-music">Classical</a></li>
  <li><a href="#info">Info</a></li>
  <li><a href="#download">Download</a></li>
  <li><a href="#friends">Friends</a></li>
</ul>
</div> 
```

我想要什么：我想在 Work 链接中插入一个切换功能。当您单击“工作”时，会出现包含链接的弹出子菜单 - 电影、无声、经典，您可以单击它们，页面将滚动到指定的目标。目前它们只是静态链接。

我希望我的语言/布局不会令人困惑或在这里浪费时间。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:24:31.090

也许像

```
$('#nav a').click(function(e) {
   e.preventDefault();
   if($(this).attr('href') === '#current-work') {
      // do your animation for work
   }
   else {
      // do animation for all other items
      var targetImg = $($(this).attr('href')).offset().top;
      $("html,body").animate({
         scrollTop : targetImg -10,
      }, 1400);
   }
}); 
```

# scala - 如何从 scala play 访问帖子数据？

> ID：11212248
> 
> 赞同：17
> 
> 时间：2012-06-26T16:54:09.023
> 
> 标签：scala, playframework

我有一条类型为“POST”的路线。我正在向页面发送帖子数据。我如何访问该帖子数据。例如，在 PHP 中，您使用 $_POST

如何访问 scala 和 play 框架中的帖子数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-07T18:41:28.690

从 Play 2.1 开始，有两种方法可以获取 POST 参数：

1) 通过 Action 解析器参数将 body 声明为 form-urlencoded，在这种情况下 request.body 会自动转换为 Map[String, Seq[String]]：

```
def test = Action(parse.tolerantFormUrlEncoded) { request =>
    val paramVal = request.body.get("param").map(_.head)
} 
```

2）通过调用request.body.asFormUrlEncoded获取Map[String, Seq[String]]：

```
def test = Action { request =>
    val paramVal = request.body.asFormUrlEncoded.get("param").map(_.head)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T23:16:51.557

在这里，您有很好的示例如何在 Play 中完成：

[https://github.com/playframework/Play20/blob/master/samples/scala/zentasks/app/controllers/Application.scala](https://github.com/playframework/Play20/blob/master/samples/scala/zentasks/app/controllers/Application.scala)

```
val loginForm = Form(
  tuple(
    "email" -> text,
    "password" -> text
  ) verifying ("Invalid email or password", result => result match {
    case (email, password) => User.authenticate(email, password).isDefined
  })
)

/**
 * Handle login form submission.
 */
def authenticate = Action { implicit request =>
  loginForm.bindFromRequest.fold(
    formWithErrors => BadRequest(html.login(formWithErrors)),
    user => Redirect(routes.Projects.index).withSession("email" -> user._1)
  )
} 
```

[它在表单提交](http://www.playframework.org/documentation/2.0/ScalaForms)的文档中有所描述

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T02:06:56.953

正如@Marcus 指出的那样， bindFromRequest 是首选方法。然而，对于简单的一次性情况，一个字段

```
<input name="foo" type="text" value="1"> 
```

可以通过 post'd 表单访问，如下所示

```
val test = Action { implicit request =>
  val maybeFoo = request.body.get("foo") // returns an Option[String]
  maybeFoo map {_.toInt} getOrElse 0
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T05:18:57.473

在这里，您有很好的示例如何在 Play 2 中完成：

```
def test = Action(parse.tolerantFormUrlEncoded) { request =>
    val paramVal = request.body.get("param").map(_.head).getorElse("");
}
```

# json - 发布到 WCF 数据服务 5

> ID：11212251
> 
> 赞同：1
> 
> 时间：2012-06-26T16:54:16.980
> 
> 标签：json, entity-framework, wcf-data-services

我正在尝试发布到 EntityFramework 支持的 WCF 数据服务，但我得到：

```
415 Unsupported Media Type 
```

我按照本指南将标题放入我的 jQuery POST [http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds- 5-0.aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0.aspx)

这些是我的标题：

```
POST /webservices/service/service.svc/Activities HTTP/1.1
Host: www.url.com
Connection: keep-alive
Content-Length: 138
Origin: http://www.url.com
X-Requested-With: XMLHttpRequest
MaxDataServiceVersion: 3.0
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5
Content-Type: application/json; charset=UTF-8
Accept: application/json;odata=verbose
Referer: http://www.url.com/sites/site/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,en-GB;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

该站点帮助将 EntityFramework 与 WCF 数据服务一起使用 - [http://blogs.msdn.com/b/writingdata_services/archive/2011/06/15/entity-framework-4-1-code-first-and-wcf-data -services.aspx](http://blogs.msdn.com/b/writingdata_services/archive/2011/06/15/entity-framework-4-1-code-first-and-wcf-data-services.aspx)

```
function AddActivity() {
    var activity = {
        activity:
            {
                "Title": "Test From Code",
                "Detail": "Code Example",
                "Started": "2012-06-21T09:00:00",
                "UserId": 17
            }
    };

    var url = 'http://www.url.com/webservices/service/service.svc/Activities';

    $.ajax({
        type: "POST",
        url: url,
        data: activity,
        dataType: "json",
        contentType: "application/json; charset=utf-8",
        beforeSend: function (xhr) {
            xhr.setRequestHeader("Accept", "application/json;odata=verbose");
            xhr.setRequestHeader("MaxDataServiceVersion", "3.0");
        },
        success: function (data) {
            alert('Success');
        },
        error: function (err) {
            alert('Fail\n' + err.statusText);
        }
    });
} 
```

我可以读取数据 JSON 数据 OK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T12:18:21.177

如果负载具有版本 V3 (DataServiceVersion)，WCF 数据服务 5.0 不支持请求（或响应）负载的 application/json 内容类型。在上述情况下，您没有指定 DataServiceVersion（顺便说一句，您总是应该这样做）。在这种情况下，服务器必须以某种方式推断版本，WCF 数据服务服务器将假定它和客户端理解的最大版本。由于服务器本身理解 V3，并且您指定了 MaxDataServiceVersion: 3.0，这意味着客户端也理解 V3，因此它假定有效负载是 V3 有效负载。

V3 有效负载目前不支持 application/json，它们仅支持 application/json;odata=verbose。

有关更多说明，请参阅此博客文章：http: [//blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0。 .aspx](http://blogs.msdn.com/b/astoriateam/archive/2012/04/11/what-happened-to-application-json-in-wcf-ds-5-0.aspx) _ 它谈到了 GET，但同样的事情也适用于 POST 等。

因此，要解决您的问题，请修改您的客户端以发送 DataServiceVersion: 2.0 （或 1.0）（如果正确），或者更好地修改它以发送 Content-Type: application/json;odata=verbose （无论有效载荷版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T21:48:50.040

只是用最少的黑客攻击做到了这一点，使用没有任何 WCF 数据服务组件的 WCF。

将最小类型返回为 JSON 将自动映射值，例如，此 JSON

```
{
    "name": "1234567890",
    "amount": "2500.00"
} 
```

可以发回此服务

```
[WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json)]
public string MethodName(Message message) 
```

其中 Message 是 C# 类：

```
public class Message
{
    public string name { get; set; }
    public string amount { get; set; }
} 
```

很简单。然后，如果您想将其作为 OData 请求处理，您将发布更复杂的 JSON，例如 (ODataV2)：

```
{
"d": [
    {
        "__metadata": {
            "id": "http://host:54470/ods.svc/MethodName('1234567890')",
            "uri": "http://host:54470/ods.svc/MethodName('1234567890')",
            "type": "SomeCompany.Helper.Services.RequestMessage.Message"
        },
        "name": "1234567890",
        "amount": "2500.00",
    }
]
} 
```

如果您创建相应的 C# 类，则此 OData 将映射到这些类。这些类与 OData 一起使用。

```
public class Message
{
    public ODataResult[] d;
}

public class ODataResult
{
    public ODataMetaData __metadata;
    public string name { get; set; }
    public string amount { get; set; }
}

public class ODataMetaData
{
    public string id;
    public string uri;
    public string type;
} 
```

json 发布的 OData 将映射到这个 Message 类。这为您提供了一种根据需要“塑造”传入消息的方法，这在某些情况下可能是必需的。

并不是说这比使用 WCF 数据服务更好，只是说它会起作用。

# flash - 没有 javascript 的 flash 读取 cookie

> ID：11212252
> 
> 赞同：0
> 
> 时间：2012-06-26T16:54:37.123
> 
> 标签：flash, apache-flex, cookies

我有一个嵌入到 facebook 新闻提要中的 flash swf 对象。除了 swf 文件本身，我无法控制任何东西。它托管在我们的服务器上，我需要能够读取我们主要网站设置的 cookie。

我能找到的所有内容都在谈论使用外部 javascript 来读取和设置 cookie，但我想从 flash 本身内部进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:44:31.610

实际上，您可以使用 ExternalInterface 做的事情比人们意识到的要多得多。在 AS3 中定义您的函数，然后将其作为 ExternalInterface.call 中的参数传递给 ExternalInterface。我用它作为主类的属性构建了一个简单的 AS3 项目。

```
private var myTestJS:String = "function myTest(parameter){alert(parameter);return parameter;}"; 
```

和 this 在构造函数中

```
var mycookievalue:String = ExternalInterface.call(myTestJS, "Yay for ExternalInterface"); 
```

构建一个快速项目，对其进行调试，您将看到警报被调用以及 mycookievalue 被正确设置。现在，您只需将我的测试函数替换为您的 js 代码即可获取 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:14:56.060

Flash Player 无法访问浏览器 cookie。ExternalInterface 方法是让 JavaScript 为您执行此操作的技巧。

Flash Player 可以访问共享对象，类似于 Flash Player 的 cookie 版本；但通常 Flash 和浏览器不共享 cookie。

# c# - 分组查询 Linq

> ID：11212254
> 
> 赞同：1
> 
> 时间：2012-06-26T16:54:38.030
> 
> 标签：c#, linq

我有 3 节课：

```
Class 1:
public IEnumerable<double> Values;
public Class2 class2Instance;

Class2:
public string Name;
public Class3 class3Instance;

Class3:
public long Id;
public string Name; 
```

现在我有大量的`Class1`，类似 an 的集合`IEnumerable<Class1>`，并且我有`Class3`ID。如何使用高效的 LINQ 查询来获取与ID匹配`Class1`相关的所有实例？`Class2``Class1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T16:56:35.817

好吧，如果你*只有*一个序列，你必须遍历所有这些：

```
var matches = collection.Where(x => x.class2Instance.class3Instance.Id == id); 
```

如果您需要定期执行此操作，则可能需要构建一个`Dictionary<long, Class1>`。

（我假设既不是`class2Instance`也`class3Instance`不能为空。如果可以，您将需要使用像 Aducci's 这样的代码。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T16:57:29.570

```
var query = from x in class1Enumerable
            where x.class2Instance != null
            where x.class2Instance.class3Instance != null
            where x.class2Instance.class3Instance.id == yourId
            select x; 
```

# mysql - 检查 varchar 值并避免 MySQL 表中的重复条目

> ID：11212255
> 
> 赞同：0
> 
> 时间：2012-06-26T16:54:38.903
> 
> 标签：mysql, mysql-python, mysql-management

我需要运行一个应用程序来收集新闻提要并更新我的数据库中的新条目。所以我计划创建两个表，一个源，另一个作为目标。我的计划是首先将所有信息更新到源表中，然后使用唯一数据（当前更新的新闻或新记录）更新目标表。

但问题是某些提要在其他一些网站中重复出现。因此应用程序在读取重复条目后立即中断。

我在下面附上了我的 MySQL 查询

```
create table table1 (
  DateandTime datetime,
  Name tinytext,
  Title varchar(255),
  Content Longtext unique(Title)
); 
```

我知道这听起来太基础了。但我没有任何解决方案。

感谢您的反馈和想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:59:40.587

Few solutions:

1.  Unique column should prevent duplicate data
2.  INSERT WHERE NOT EXISTS
3.  Use MERGE engine in MySQL (http://dev.mysql.com/doc/refman/5.1/en/merge-storage-engine.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:30:44.500

我修改了对 Marcus Adams 建议的查询。

```
Insert Ignore table1 (
DateandTime,
Name,
Title,
Content)
values
(.......
); 
```

我认为单表足以解决我的问题。谢谢

# java - 显示 Java 邮件发件人的地址而不是他的姓名

> ID：11212257
> 
> 赞同：50
> 
> 时间：2012-06-26T16:54:47.653
> 
> 标签：java, jakarta-mail

我正在尝试通过我的 Java Mail 应用程序向我的朋友发送邮件。我能够成功地做到这一点，但是邮箱中的收件人列显示的是完整的电子邮件地址，而不是发件人的姓名。我尝试更改各种参数，但邮箱仍然会显示完整的电子邮件地址而不是发件人的姓名。

使用此方法发送消息：

```
 public void send(String key){
    String to=key;
    String from="mygmailid";
    String subject="wassp";
    String text="Hello";
    Properties props=new Properties();

    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.user", "myname");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");
    Session mailSession=Session.getDefaultInstance(props);
    Message simpleMessage=new MimeMessage(mailSession);

    InternetAddress fromAddress=null;
    InternetAddress toAddress=null;

    try{
        fromAddress=new InternetAddress(from);
        toAddress=new InternetAddress(to);
    }
    catch(AddressException e){
        e.printStackTrace();
    }

    try{
        simpleMessage.setFrom(fromAddress);
        simpleMessage.setRecipient(RecipientType.TO,toAddress);
        simpleMessage.setSubject(subject);
        simpleMessage.setText(text);

        transport.connect("smtp.gmail.com",465, "myid@gmail.com", "mygmailpassword");
        transport.sendMessage(simpleMessage, simpleMessage.getAllRecipients());
        transport.close();  

    }
    catch(MessagingException e){
        e.printStackTrace();
    }
} 
```

我将此方法称为：

```
public static void main(String[] args) {
    MailSender mailer=new MailSender();
    mailer.send("friendmail@gmail.com");
} 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-06-26T17:19:24.027

您可以在`InternetAddress`使用中设置名称

```
new InternetAddress("mail@example.com", "Your Name"); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-26T17:19:16.870

您应该使用[InternetAddress 的两个字符串构造函数](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/InternetAddress.html#InternetAddress%28java.lang.String,%20java.lang.String%29)来传入电子邮件地址和人名。生成的电子邮件将包含一个类似于 Jarrod 指示的字符串。

```
InternetAddress fromAddress=new InternetAddress("my@example.com", "John Doe"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-19T06:51:52.453

```
 try {

        String from = " EMAIL ID";
        String SMTP_AUTH_PWD = " PASSWORD ";
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.transport.protocol", "smtps");
        props.put("mail.smtps.auth", "true");
        String SMTP_HOST_NAME = "smtp.gmail.com";
        int SMTP_HOST_PORT = 465;
        javax.mail.Session mailSession = Session.getDefaultInstance(props);

        mailSession.setDebug(true);
        Transport transport = ((javax.mail.Session) mailSession)
                .getTransport();

        javax.mail.Message message = new MimeMessage(mailSession);
        message.setSubject("Testing SMTP-SSL");
        message.setContent("", "text/plain");
        message.addRecipient(javax.mail.Message.RecipientType.TO,
                new InternetAddress(receiver));
        transport.connect(SMTP_HOST_NAME, SMTP_HOST_PORT, from,
                SMTP_AUTH_PWD);
        message.setFrom(new InternetAddress(from," YOUR PREFERED NAME "));
        message.setSubject(subject);
        BodyPart messageBodyPart = new MimeBodyPart();
        messageBodyPart.setText(body);
        Multipart multipart = new MimeMultipart();
        multipart.addBodyPart(messageBodyPart);
        messageBodyPart = new MimeBodyPart();
        message.setContent(multipart);

        transport.sendMessage(message,
                message.getRecipients(javax.mail.Message.RecipientType.TO));

    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-26T17:06:20.243

from 字段的显示方式是客户端特定的实现细节。

通常，如果发件人是`"Sender Name" <sender@domain.com>`客户端的形式，将根据配置做正确的事情。

如果丢失，一些客户会从他们的地址簿信息中推断出姓名信息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-08T16:50:57.427

上面的答案是正确的，但我发现我需要放置一个 try catch 才能让它工作，这是我从 sendemailwebapp 演示应用程序中发现的。

消息消息 = 新的 MimeMessage（会话）；

```
 try {
        msg.setFrom(new InternetAddress(userName, "YourName"));
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    InternetAddress[] toAddresses = { new InternetAddress(toAddress) };
    msg.setRecipients(Message.RecipientType.TO, toAddresses);
    msg.setSubject(subject);
    msg.setSentDate(new Date());
    msg.setText(message); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-16T05:31:58.983

在 try 块中尝试此代码。您可以在 MimeMessage 的 setFrom() 方法中初始化您的名称。

```
simpleMessage.setFrom(new InternetAddress("Your mail id", "Your name")); 
```

IE，

```
 try{
    simpleMessage.setFrom(new InternetAddress("Your mail id", "Your name"));
    simpleMessage.setRecipient(RecipientType.TO,toAddress);
    simpleMessage.setSubject(subject);
    simpleMessage.setText(text);

    transport.connect("smtp.gmail.com",465, "myid@gmail.com", "mygmailpassword");
    transport.sendMessage(simpleMessage, simpleMessage.getAllRecipients());
    transport.close();  

 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-03-10T18:00:55.277

您可以按照以下格式使用大于和小于符号 < > 强制指定发件人姓名：

```
String from="John Smith<friendmail@gmail.com>";
.
.
.
fromAddress=new InternetAddress(from); 
```

或者

```
public static void main(String[] args) {
    MailSender mailer=new MailSender();
    mailer.send("John Smith<friendmail@gmail.com>");
} 
```

收到电子邮件时，电子邮件收件人将在其收件箱中看到姓名“John Smith”。（如果指定，大多数电子邮件程序都会显示名称。例如 Outlook、gmail、hotmail 等...）

# android - ActionBarSherlock 在 Android 2.3.3 上不显示任何内容

> ID：11212258
> 
> 赞同：1
> 
> 时间：2012-06-26T16:54:55.887
> 
> 标签：android, cordova, actionbarsherlock

我用一个简单的 Android 项目设置了 ABS，但不知道为什么在 2.3.3（左）上没有显示操作栏的单个部分，但在 4.0（右：标题、选项卡和菜单）上完美运行。

![在此处输入图像描述](../Images/d212897faaabb35149987927138871a7.png) ![在此处输入图像描述](../Images/bdb9ecb6eaa09bdd961d1a3ab718ce0c.png)

我做了什么：

*   在 Eclipse 中创建新的 Android 项目
    *   添加`android:theme="@style/Theme.Sherlock"`于`<application>`
    *   `<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />`
    *   将 Java 合规性更改为 1.6（不要认为这很重要，无论如何都应该是默认值）
*   添加 ABS 作为库项目（也针对 SDK 版本 15 编译）
*   没有向我的项目添加支持库（如果我这样做也没有什么不同）

注意：我必须使用静态附件，所以我不能扩展其中一个`Sherlock*`类。

源代码：

```
package de.andidog.testthesherlock;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.util.Log;

import com.actionbarsherlock.ActionBarSherlock;
import com.actionbarsherlock.ActionBarSherlock.OnCreateOptionsMenuListener;
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class TestTheSherlockActivity extends Activity implements ActionBar.TabListener, OnCreateOptionsMenuListener
{
    protected ActionBarSherlock sherlock = ActionBarSherlock.wrap(this);

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        sherlock.setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);

        showTabsNav();

        // TODO: check order of these statements
        sherlock.setContentView(R.layout.main);

        setContentView(R.layout.main);
    }

    private void showTabsNav()
    {
        final ActionBar ab = sherlock.getActionBar();

        ab.setDisplayUseLogoEnabled(true);
        for(int i = 0; i < 5; ++i)
            ab.addTab(ab.newTab().setIcon(R.drawable.ic_launcher).setTabListener(this));

        ab.setDisplayShowHomeEnabled(true);
        ab.setDisplayShowTitleEnabled(true);
        ab.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    }

    @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu)
    {
        return sherlock.dispatchCreateOptionsMenu(menu);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        menu.add("Refresh").setIcon(android.R.drawable.ic_menu_rotate).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        return true;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft)
    {
        Log.d("TestTheSherlockActivity", "TAB RESELECTED");
    }

    @Override
    public void onTabSelected(Tab tab, android.support.v4.app.FragmentTransaction ft)
    {
        Log.d("TestTheSherlockActivity", "TAB CLICKED");
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft)
    {
        Log.d("TestTheSherlockActivity", "TAB UNSELECTED");
    }
} 
```

我的`AndroidManifest.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.andidog.testthesherlock"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name=".TestTheSherlockActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我如何让它在 2.x 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:14:01.520

删除第二个`setContentView`调用，这是覆盖由 ABS 膨胀的布局。

如果您需要从非 Android 基类扩展，您应该只使用静态附件技术。`SherlockActivity`否则，从（或任何其他）扩展要容易得多。

# javascript - 如何使用 JS SDK 发布 Facebook 分数，而不对应用访问令牌进行硬编码？

> ID：11212262
> 
> 赞同：1
> 
> 时间：2012-06-26T16:55:03.847
> 
> 标签：javascript, facebook, facebook-graph-api

我正在尝试使用 JS SDK 发布分数。这是我正在使用的代码：

```
FB.api("/[USER_ID]/scores", 'post', {score:score, access_token:"APP_ACCESS_TOKEN"}, function(response){
           if (!response || response.error) {
              log(response);
           } else {
              log(response);
           }
    }); 
```

但是，我需要在不硬编码 APP_ACCESS_TOKEN 的情况下执行此操作。关于如何使用 JS SDK 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:25:21.680

您可以通过 JS 使用`FB.getLoginStatus`. 更多可以在[doc](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)中找到。

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T01:09:19.873

没有办法，我知道。而且，也不应该有，当您认为该应用程序将只有一个应用程序 access_token 时。

把它想象成你的应用程序秘密，保持安全！尤其是当您考虑如何获取 access_token 时，只需使用您的 ID 和 App Secret 向 FB 发出格式化请求。

如果您放置客户端，那么任何人都可以抓住它并代表您的应用程序做一些事情！

我会建议两件事之一：

1.  尝试调用 /me/scores，并使用正常的访问令牌。即使 API 文档不建议这是可能的，你永远不会知道。

或者 2\. 将其封装为对服务器的 AJAX 调用，然后从那里进行 Graph 调用。

糟透了，但似乎有些东西还没有完全设计为在客户端工作。：-/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:01:57.060

`/me/`指当前用户 - 使用应用访问令牌时没有“当前”用户 - 您正在充当应用 - 发出`/[USER ID]/scores`使用应用访问令牌的请求

# c# - Microsoft.SqlServer.Management.Smo.FailedOperationException（无法加载 batchparser.dll）

> ID：11212268
> 
> 赞同：0
> 
> 时间：2012-06-26T16:55:17.200
> 
> 标签：c#, .net, sql-server

我有 C# 项目，我在其中使用 Microsoft.SqlServer.Management.Smo、Microsoft.SqlServer.batchparser.dll 和其他几个 SqlServer dll。

当我在开发盒上运行代码时它工作正常，但是当我尝试在干净的机器（客户端机器）上运行可执行文件时，它失败并抛出此异常：

Microsoft.SqlServer.Management.Smo.FailedOperationException：数据库“testdb”的 ExecuteNonQuery 失败。---> System.IO.FileLoadException：无法加载文件或程序集“Microsoft.SqlServer.BatchParser.dll”或其依赖项之一。此应用程序无法启动，因为应用程序配置不正确。重新安装应用程序可能会解决此问题。（来自 HRESULT 的异常：0x800736B1）在 System.Reflection.RuntimeAssembly.GetType（RuntimeAssembly 程序集，字符串名称，布尔 throwOnError，布尔 ignoreCase，ObjectHandleOnStack 类型）在 System.Reflection.RuntimeAssembly.GetType（字符串名称，布尔 throwOnError，布尔 ignoreCase）在Microsoft.SqlServer.Management.Common.ServerConnection.GetStatements（字符串查询，ExecutionTypes executionType，Int32&

现在，如果我在客户端机器上安装“Microsoft SQL Server 2012 Shared Management Objects”，它就会开始工作。

我想确切地找出导致批处理解析器失败的依赖项。我从“Microsoft SQL Server 2012 Shared Management Objects”安装程序中获取程序集并将它们复制到 GAC 中，但仍然是同样的错误。

我的问题是： 1 - 如何找到 batchparser.dll 的依赖项并将其附加到我的安装程序？2 - 是否有可在我的应用程序之前安装的 sql server 2012 可分发包。

谢谢，阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:51:42.807

对于任何有同样问题的人，

安装 Microsoft Visual C++ Redistributable Package ATL 安全更新为我解决了这个问题。

干杯，

# iphone - iPhone 应用程序发送 Facebook 消息或发布到朋友的墙

> ID：11212270
> 
> 赞同：1
> 
> 时间：2012-06-26T16:55:18.870
> 
> 标签：iphone, ios, facebook, facebook-graph-api, fbconnect

这是我目前的设置。我可以单击一个按钮并将图像和评论或新闻故事直接发布到我的墙上，主要只是做一些简单的 FBConnect 或 ShareKit 选项。

我想将其扩展到更复杂和引人入胜/有用的东西。我希望能够获取评论或新闻故事，然后通过消息将其发送给 Facebook 上的某人，或者将其发布到我朋友的任何墙上。

我相信我需要使用 Facebook Open Graph 来完成此任务，但不确定从哪里开始。我确实在 Facebook 中有一个应用程序设置，尽管它本质上只是为了我的应用程序的 SSO 目的。有人可以指导我找到一个很好的教程来做我想做的事情和/或指导我在 Facebook 中设置我的应用程序，然后提供一些与 iPhone 集成的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T22:01:43.473

要在朋友的墙上发帖，您可以使用 FB 的 graph api。在这里，您可以使用最小的代码片段在朋友的墙上发布内容：

```
NSMutableDictionary* params = [NSMutableDictionary dictionary];
[params setObject:@"Some text" forKey:@"user_message_prompt"];
[params setObject:@"another text" forKey:@"action_links"];
[params setObject:@"Yet another text" forKey:@"attachment"];
[params setObject:@"SOME FACEBOOK ID" forKey:@"target_id"];

//At some point you need to create the following Facebook instance

[facebook dialog: @"stream.publish" andParams: params andDelegate: self]; 
```

# resolution - 为 Retina Display 准备软件 - 为什么需要这样做？

> ID：11212273
> 
> 赞同：5
> 
> 时间：2012-06-26T16:55:31.460
> 
> 标签：resolution, screen-resolution, retina-display

既然新的[Macbook Pro](http://www.apple.com/macbook-pro/)配备了 Retina 显示屏，那里有很多关于如何制作 Mac 应用程序的资源，现在甚至还有“Retina Display Friendly”[网站。](http://mir.aculo.us/2012/06/26/flowchart-how-to-retinafy-your-website/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3a%20miraculous%20%28mir.aculo.us%29)甚至谷歌也在为 Retina Display[更新 Chrome ……](http://www.theverge.com/2012/6/13/3083877/chrome-gets-early-update-for-macbook-pros-retina-display)

为什么这是必要的？据我了解，Retina Display 只是分辨率更高的屏幕。正确的？

我认为，当您为桌面软件开发 gui 和开发网站时，您正在开发的东西应该可以在几乎任何分辨率下正常工作和缩放……当您调整应用程序窗口的大小，或将其显示在更高或更低分辨率的显示器上时，它应该可以正确缩放和显示。

那么，为什么这些人会提供有关如何在 Retina 显示器上使某些东西看起来不错的指南呢？默认情况下它不应该看起来不错吗？Retina Display 有什么我不理解的地方吗？

郑重声明，我不是在谈论 iPhone 4 Retina Display。大多数 iOS 开发人员使用固定位置元素制作他们的应用程序，因为他们知道屏幕不会改变大小/形状。所以我理解开发一个在 iPhone 4/s 和 3g/s 上看起来不错的应用程序的重要性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:03:55.560

由于 Retina 显示应用程序实际上并没有像调整大小那样缩放，所有控件都调整为两倍大。如果应用程序可以正常缩放，而不是通过缩放所有控件等，您将看不到任何东西，因为一切都太小了。这与 iPhone 3GS / iPhone 4 上的 Retina 和低分辨率显示器之间的区别相同。

**一个例子：**

![在此处输入图像描述](../Images/0f71c9e3350bc5b4deb701faec25e0da.png)

这些图像实际上大小相同，只是像素密度不同。

以下是它看起来没有正确缩放的方式（使用某些应用程序禁用正确缩放）： [http ://cloudmancer.com/images/trueretina.jpg](http://cloudmancer.com/images/trueretina.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:24:27.353

> 我认为，当您为桌面软件开发 gui 和开发网站时，您正在开发的东西应该可以在几乎任何分辨率下正常工作和缩放……当您调整应用程序窗口的大小，或将其显示在更高或更低分辨率的显示器上时，它应该可以正确缩放和显示（例如，StackOverflow 使用 960px 宽的容器）。

从 Web 开发人员的角度来看，您经常被要求开发固定宽度的网站（通常范围从 940 到 1000 像素宽），但它们根本无法扩展。有很多这样的网站，而且许多应用程序并不是为了增加大小而设计的。

此外，尺寸确实增长的应用程序通常期望更大的分辨率也意味着更大的屏幕，因此它们只是拉伸主应用程序面板并完成它。

现在，考虑静态元素，例如显示“点击我”的 150x50 按钮。此按钮不打算变大，在常规 1440x900 显示器上完全可以接受。现在 Retina 屏幕具有 2580x1800 的分辨率。该应用程序看到分辨率发生变化，但它认为“嘿，该用户必须有一个大屏幕”，因此它保持按钮大小相同。

现在出现的问题是按钮，因为两种分辨率都适用于同一个 13 英寸屏幕，现在看起来只是原始按钮大小的一小部分。根据您的用户视觉，他可能无法阅读文本，并且可能很难单击它，具体取决于鼠标设置。

为了解决这个问题，苹果和微软使用了两种不同的解决方案：

*   微软决定告诉应用程序显示器的分辨率为 2580x1800，但用户希望将所有内容缩放到 200 dpi。这意味着，如果应用程序不遵循指南，它会看起来更小。许多应用程序只是忽略 DPI 设置（尽管这可能会随 Windows 8 改变）；
*   Apple 决定向应用报告显示器的分辨率为 1440x900，但如果要求它可以显示更高分辨率的元素；这意味着在新的 Retina 设置之前存在的应用程序对于最终用户来说看起来与以前的大小相同（如果他们使用默认的 Apple API，则会有额外的好处，比如更清晰的文本），但他们可以决定提供高 DPI在显示器上看起来会更好的图像。

这两种解决方案都要求应用程序意识到显示器是高 DPI（“视网膜”），但 Apple 处理它的方式意味着前面提到的静态网站和应用程序看起来会一直很好，除了它们不会有超清晰、高-要使用的分辨率图像。而且，要加入视网膜功能，例如，他们必须为 100x100 的画布提供 200x200 的图像，其余的由 Apple 负责。

# facebook - Facebook 身份验证 API

> ID：11212274
> 
> 赞同：2
> 
> 时间：2012-06-26T16:55:32.723
> 
> 标签：facebook, url, authentication, uri

我是 facebook API 的新手，我有一些与 facebook 身份验证相关的问题。我创建了一个应用程序并编辑了域和 url。

> 网站 域名 giftme.web44.net 网站 URL [http://www.giftme.web44.net/](http://www.giftme.web44.net/)

我在我的网站网页上使用了以下内容：

```
<div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '3347207XXXXXXXX', // App ID (I've replaced for security reasons)
        channelUrl : 'http://giftme.web44.net/channel.html/', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
      // Additional initialization code here
    };
    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script> 
```

我只用这个创建了页面“channel.html”：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

最后我使用了登录按钮：

```
<div class="fb-login-button" >Login with Facebook</div> 
```

我在做什么错？我不断收到此错误：

> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：无效的 redirect_uri：一个 URL 通知 não é permitida pela configuração do aplicativo。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:57:52.113

`http://www.giftme.web44.net/`不等于`http://giftme.web44.net/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:03:55.627

redirect_url 必须包含应用程序属性中定义的站点 URL 或画布 URL。

一个例子是：

```
https://api.facebook.com/method/admin.setAppProperties?
  access_token=CURRENTTOKEN&
  properties={'post_authorize_redirect_url':'http://giftme.web44.net/channel.html/'} 
```

[错误代码 191](https://stackoverflow.com/questions/7382621/facebook-api-error-code-191)
[FB 应用程序属性](http://developers.facebook.com/docs/appproperties/)

# sql-server - 使用 tsql 脚本将 OBJECTPROPERTY IsEncrypted 更改为 false

> ID：11212279
> 
> 赞同：0
> 
> 时间：2012-06-26T16:55:48.603
> 
> 标签：sql-server, sql-server-2008, tsql

我有一个数据库，其中包含一些我想导出的加密视图，但我必须将加密从 true 更改为 false。下面的代码显示了加密的对象，我想知道是否可以通过对代码进行简单修改来将加密从 true 更改为 false。

```
USE Tfs_Database
GO
SELECT name, object_id, type_desc
FROM sys.objects 
WHERE OBJECTPROPERTY(object_id, N'IsEncrypted') = 1
ORDER BY type_desc, name;
GO 
```

我需要这个才能使用自动生成脚本功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:00:59.183

You can't change system tables. And what would be the point? You would change that bit column to 0 but the object is still encrypted. So what use would you have for the unintelligible scripts you would produce?

The right way to script encrypted objects is to pull them from source control. After all, if you're encrypting objects, you'd better have them in source control.

If you can't do that, then search around the web for a function to decrypt stored procedures. It's not exactly NSA material.

# javascript - 骨干视图事件未触发 - 不知道为什么

> ID：11212287
> 
> 赞同：5
> 
> 时间：2012-06-26T16:56:15.107
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我试图让`click`事件触发，但它不起作用。也许有人能看到我看不到的东西。

```
ConnectionView = GlobalView.extend({
    tagName: 'div',

    events: {
        "click .social-links": "check"
    },

    initialize: function() {
        this.render();

        this.model.bind("change", this.render);
    },

    render: function() {
        // Compile the template using underscore
        var template = _.template($("#connection-template").html(), this.model.toJSON());

        // Load the compiled HTML into the Backbone "el"
        $(this.el).html(template);        
    },

    check: function(e) {
        e.preventDefault();

        alert("woot");
    }
}); 
```

这是它正在提取的模板：

```
<script id="connection-template" type="text/template">
    <a id="link-<%= alt %>" class="social-links" href="<%= url.replace('||state||', state).replace('||timestamp||', time) %>">add <%= name %></a>
</script> 
```

这是将 ConnectionView 放入 DOM 的视图：

```
ConnectionsView = GlobalView.extend({
    tagName: 'div',

    initialize: function(){
        this.collection.bind("reset", this.render, this);
    },

    render: function(){        
        var $connections = $("<div class='external-accounts'>");

        this.collection.each(function (model) {            
            var conn = new ConnectionView({model: model});
            $connections.append(conn.el);
        });

        // Compile the template using underscore
        var template = _.template($("#connections-template").html());
        // Load the compiled HTML into the Backbone "el"
        $(this.el).html(template({
            connectionsList: $connections.outer()
        }));
    },

    destroy: function() {
        this.constructor.__super__.destroy.apply(this);

    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T18:25:32.680

你的问题是你如何填写你`ConnectionsView`的`el`. 你这样做：

```
// Load the compiled HTML into the Backbone "el"
$(this.el).html(template({
    connectionsList: $connections.outer()
})); 
```

我不知道`.outer()`是怎么回事，但这并不重要。重要的是所有内容都通过编译后的下划线`template()`函数，这意味着所有内容最终都会在进入页面的过程中转换为字符串。一旦您的 DOM 元素位于`$connections`字符串中，事件绑定就会丢失，并且不再起作用。

考虑这个例子：

> [http://jsfiddle.net/ambiguous/4tjTm/](http://jsfiddle.net/ambiguous/4tjTm/)

在那里我们这样做：

```
var $connections = $('<div>');
var conn = new ConnectionView({ model: m });
$connections.append(conn.el);

var template = _.template('<%= connectionsList %>');
$('#view-goes-here').append(template({
    connectionsList: $connections.html()
})); 
```

将您添加`ConnectionView`到页面。这些事件在那里不起作用，因为`template()`返回一个字符串，并且该字符串被解析为最终出现在页面中的 DOM 元素。但是，如果我们将`$connections`直接添加到页面：

> [http://jsfiddle.net/ambiguous/AKkCJ/](http://jsfiddle.net/ambiguous/AKkCJ/)

使用这样的东西：

```
var $connections = $('<div>');
var conn = new ConnectionView({ model: m });
$connections.append(conn.el);
$('#view-goes-here').append($connections); 
```

事件按预期工作。

所以现在我们知道出了什么问题。但是我们该如何解决呢？我们需要做的就是调整您`ConnectionsView`以`$connections`直接添加到 DOM 中，如下所示：

```
render: function() {
    // Move <div class='external-accounts'> into your #connections-template.
    var template = _.template($("#connections-template").html());
    this.$el.html(template());
    var $external = this.$el.find('.external-accounts');
    this.collection.each(function (model) {
        var conn = new ConnectionView({model: model});
        $external.append(conn.el);
    });
    return this; // This is conventional
} 
```

将 推`<div class="external-accounts">`入`ConnectionsView`模板并将`ConnectionView`s 直接插入其中。这样你总是在使用 DOM 元素，字符串不知道事件，但 DOM 元素知道。

# asp.net - ASP.NET 模拟仅在 web.config 中指定用户时有效

> ID：11212290
> 
> 赞同：0
> 
> 时间：2012-06-26T16:56:25.160
> 
> 标签：asp.net, impersonation

首先，我很抱歉这是重复的，但我真的无法在任何地方找到类似的问题。

情况是我正在尝试使用 asp.net 中的模拟功能来检索位于网络目录上的文件。当我在 web.config 中指定用户时，它工作正常：

```
<identity impersonate="true" userName="contoso\Jane" password="********" /> 
```

但是，当我尝试使用以下内容时，我会收到登录该站点的提示，但我永远无法成功。

```
<identity impersonate="true"/> 
```

我对后一个示例的理解是，它将尝试模拟当前正在查看页面的任何人的 Windows 凭据（通过 Windows 身份验证）。这不正确吗？

我应该注意，我的 Windows 身份验证在应用程序的其他区域工作正常。

谢谢

**编辑**

我还应该提到，这是在 II6 上运行的......它只是“感觉”像一个配置问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:10:56.730

我会用一个额外的类 Impersonate.cs 去另一种方式，你需要一个用户、一个密码和一个域。

Imperosnate.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.Security;
using System.Security.Principal;
using System.Runtime.InteropServices;
using System.IO;
using System.Text;

using System.Web;

namespace [YourProgramName]  //You must change it
{
    public class Impersonate
    {

        [DllImport("advapi32.dll", SetLastError = true)]
        private static extern int LogonUser(string lpszUsername, string lpszDomain, string lpszPassword,
                                            int dwLogonType, int dwLogonProvider, out int phToken);

        [DllImport("kernel32.dll")]
        private static extern int FormatMessage(int dwFlags, string lpSource, int dwMessageId, int dwLanguageId,
                                                StringBuilder lpBuffer, int nSize, string[] Arguments);

        private const int LOGON32_LOGON_NETWORK_CLEARTEXT = 8;
        private const int LOGON32_PROVIDER_DEFAULT = 0;
        private const int FORMAT_MESSAGE_FROM_SYSTEM = 0x1000;

        private static WindowsImpersonationContext winImpersonationContext = null;

        public static void ImpersonateUser(string domain, string userName, string password)
        {

            //Benutzer einloggen
            int userToken = 0;

            bool loggedOn = (LogonUser(userName, domain, password, LOGON32_LOGON_NETWORK_CLEARTEXT,
                                        LOGON32_PROVIDER_DEFAULT, out userToken) != 0);

            if (loggedOn == false)
            {
                int apiError = Marshal.GetLastWin32Error();
                StringBuilder errorMessage = new StringBuilder(1024);
                FormatMessage(FORMAT_MESSAGE_FROM_SYSTEM, null, apiError, 0, errorMessage, 1024, null);
                throw new Exception(errorMessage.ToString());
            }

            WindowsIdentity identity = new WindowsIdentity((IntPtr)userToken);
            winImpersonationContext = identity.Impersonate();

        }

        public static void UndoImpersonation()
        {
            if (winImpersonationContext != null)
            {
                winImpersonationContext.Undo();
            }
        }

    }
} 
```

在你的程序中使用它：

```
string Admin = Properties.Settings.Default.Admin;
        string AdminPassword = Properties.Settings.Default.AdminPassword;
        string Domain = Properties.Settings.Default.Domain;

        Impersonate.ImpersonateUser(Domain , Admin , AdminPassword);

                                //Your Code as the new User

                      Impersonate.UndoImpersonation(); 
```

希望这是您搜索的内容^^

# r - 为传递给“apply()”的向量的每个元素返回一个单独的矩阵

> ID：11212297
> 
> 赞同：0
> 
> 时间：2012-06-26T16:56:54.220
> 
> 标签：r, apply, snowfall

搜索了一下，还没有找到解决这个问题的优雅方法。

我正在尝试使用“降雪”包在多个内核上运行模拟。这使用 sfApply()、sfSapply 或 sfLapply()。为了克服使用“降雪”的复杂性，现在让我们简化一下，只考虑并行的 apply()、sapply() 和 lapply() 函数。

我有一个生态模拟，其结果以矩阵形式返回。简而言之，我正在模拟不同大小和强度的干扰事件对分布在多个斑块上的个体的影响。例如，我的模拟输出类似于

```
DisturbancePatchesPercent<-c(.1,.3,.5,.7,.9) #the size (number of patches affected) by a disturbance
PopSize<-matrix(NA,nrow=length(DisturbancePatchesPercent),ncol=5) #results I want outputted
attributes(PopSize)$dimnames<-list(c(),c("Mean","Lower95","Upper95","Disturbance Patches","Disturbance Intensity"))
PopSize[,1]<-rpois(5,6) #making up output for the mean population size
PopSize[,2]<-rpois(5,1) #making up an output for the lower 95% CI
PopSize[,3]<-rpois(5,12) #making up an output for the upper 95% CI
PopSize[,4]<-DisturbancePatchesPercent #Disturbance size
PopSize[,5]<-rep(.3,5) #A uniform disturbance intensity for a given simulation
PopSize 
```

我有一个平均值，以及模拟运行的总体规模的 95% 置信区间的下限和上限。每次运行都有长度（DisturbancePatchesPercent）受干扰事件影响的补丁数量。对于单次运行，干扰具有均匀的强度。

我正在尝试使用 apply 函数在多种不同的干扰强度下运行此模拟。所以我把我的模拟放在一个函数中，然后将我想要模拟的干扰强度的向量传递给该函数。问题是，我不知道如何让函数返回每个干扰强度的结果矩阵（如上模拟）。我希望我能找到一种方法来制作将要创建的多个矩阵的数组，但未能弄清楚这一点

有任何想法吗？？

下面是一个可重现的示例，我已经玩弄了它以弄清楚一般概念。我非常接近这个模拟示例，但我能做的最好的事情就是创建一个不同示例矩阵的列表。但是列表中的四个元素都具有相同的名称，所以我不知道如何单独访问它们

```
func<-function(x){
mat<-matrix(1:20,4,5) #fake results matrix
mat.x<-mat*x #multiplying results matrix by given value of x (simulated disturbance intensity)

return(list(mat.x=mat.x))
                            }
x<-c(1,10,25,66) #simulated vector of disturbance intensities
results<-sapply(x,func) #using apply function to pass the vector to the function
results #the results, but all the elements of the list are named identically so I can't call them individually! 
```

# jquery - 将值传递给 jquery 对话框的按钮

> ID：11212307
> 
> 赞同：0
> 
> 时间：2012-06-26T16:57:29.723
> 
> 标签：jquery, html

我在一个表中创建了多个按钮，它们看起来都像这样：

```
<button class="editbutton">Edit</button> 
```

在此表中，按钮将具有与其关联的类型，APPLE 或 ORANGE。

我想要做的是将这种类型传入我的 javascript 以打开一个 jquery 对话框。我可以做这样的事情：

```
<button class="editbutton" onclick="edit('<?php echo $result[$i]["type"]; ?>');" >Edit</button> 
```

现在我有了类型，然后在编辑功能中进行处理。但是我的代码的结构方式我正在寻找一种在不创建函数的情况下传递类型的方法（只是因为我构建代码的方式）。所以我需要知道当按钮是 APPLE 还是 ORANGE 时，我可以打开一个特定的 jquery 对话框。

希望很清楚我在寻找什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:06:03.677

将点击监听器附加到您的按钮 - [http://jsfiddle.net/XPQ5Y/](http://jsfiddle.net/XPQ5Y/)

```
<button class="editbutton" data-type="apple">Edit</button>

$(".editbutton").on("click", function() {
    var type = $(this).attr("data-type");

    // do your stuff here
}); 
```

# api - REST API 一组可能的值：字符串还是整数？

> ID：11212308
> 
> 赞同：1
> 
> 时间：2012-06-26T16:57:31.197
> 
> 标签：api, rest

我正在设计一个 REST API 并遇到了这个问题：

应该如何定义一组值？

假设我有一个将在[http://myserver.com/api/getPicture/1请求的图片对象](http://myserver.com/api/getPicture/1)

所以服务器响应：

```
{
 url : "http://myserver.com/pictures/1.jpg",
 taken_at : "1/1/2012"
} 
```

现在，假设我想添加一个 color_depth 字段。

两种可能的选择是：

```
color_depth : "BLACK_WHITE" or "COLOR" or "GRAYSCALE"
color_depth : "0" OR "1" OR "2" //would need to map these to their meaning somewhere 
```

在这种情况下有什么标准吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:42:46.427

对于 JSON，没有任何事实上的或官方的标准。[JSON-SCHEMA](http://www.json-schema.org/)试图解决这个问题，但目前还不推荐规范，甚至实现也不流行。

使用 XML，[XML Schema](http://www.w3.org/XML/Schema#dev)是标准解决方案。对于RDF，也有解决这个问题的RDFS。

对于每种格式，coice 都是您的。取决于整数标识符（1、2、3）并在没有模式的情况下翻译它们意味着您的请求远不如表达它们含义的字符串（如“COLOR”）那么独立。请求应该是自包含的，这是 RESTful API 设计的核心概念。这与 Roy Fielding 论文中描述的 RESTful 架构的[可见性属性大致相关。](http://www.ics.uci.edu/~fielding/pubs/dissertation/net_app_arch.htm#sec_2_3_5)

我会选择完整的字符串。

# c# - 寻找矩形的算法

> ID：11212309
> 
> 赞同：5
> 
> 时间：2012-06-26T16:57:35.047
> 
> 标签：c#, algorithm

我有以下代码：

```
int width = 10;
int height = 7;
bool[,] array1 = new bool[width, height];

string values = 
    "1100000000" +
    "1100000011" +
    "0001100011" +
    "0001100000" +
    "0001110000" +
    "0000000110" +
    "0000000110";

for (int x = 0; x < width; x++)
{
    for (int y = 0; y < height; y++)
    {
        array1[x, y] = (values[x + y * width] == '1');
    }
} 
```

我正在寻找一种算法来提取我们有 1 的范围。

所以从这些数据中我们会得到矩形 (0,0,2,2), (8,1,2,2), (3,2,3,3), (7,5,2,2) 的顺序矩形没关系！

但我不知道如何做到这一点任何人有任何指示？

阅读生锈的韦伯回答后，我想出了以下内容：

```
private static List<Rectangle> GetRectangles(bool[,] array)
{
    List<Rectangle> rectangles = new List<Rectangle>();
    for (int x = 0; x < array.GetLength(0); x++)
    {
        for (int y = 0; y < array.GetLength(1); y++)
        {
            if (array[x, y])
            {
                rectangles.Add(GetRectangle(array, new Point(x, y)));
            }
        }
    }
    return rectangles;
}

static Rectangle GetRectangle(bool[,] array, Point startLocation)
{
    int maxX = int.MinValue;
    int minX = int.MaxValue;
    int maxY = int.MinValue;
    int minY = int.MaxValue;
    HashSet<Point> visitedLocations = new HashSet<Point>();
    Stack<Point> pointsToGo = new Stack<Point>();
    Point location;
    pointsToGo.Push(startLocation);
    while (pointsToGo.Count > 0)
    {
        location = pointsToGo.Pop();

        if (!location.X.IsBetween(0, array.GetLength(0) - 1))
            continue;
        if (!location.Y.IsBetween(0, array.GetLength(1) - 1))
            continue;
        if (!array[location.X, location.Y])
            continue;
        if (visitedLocations.Contains(location))
            continue;
        visitedLocations.Add(location);

        pointsToGo.Push(new Point(location.X + 1, location.Y));
        pointsToGo.Push(new Point(location.X, location.Y + 1));
        pointsToGo.Push(new Point(location.X - 1, location.Y));
        pointsToGo.Push(new Point(location.X, location.Y - 1));
    }

    foreach (Point location2 in visitedLocations)
    {
        array[location2.X, location2.Y] = false;
        if (location2.X > maxX)
            maxX = location2.X;
        if (location2.X < minX)
            minX = location2.X;
        if (location2.Y > maxY)
            maxY = location2.Y;
        if (location2.Y < minY)
            minY = location2.Y;
    }

    return new Rectangle(minX, minY, maxX - minX + 1, maxY - minY + 1);
}

public static bool IsBetween<T>(this T item, T start, T end)
{
    return Comparer<T>.Default.Compare(item, start) >= 0
        && Comparer<T>.Default.Compare(item, end) <= 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:06:30.133

评论：如果您有更好的定义坐标，它可能会帮助我回答您的问题。(0,0,2,2) 不完全是笛卡尔坐标，它可能需要一些解释。这是左上角后跟宽度吗？

行。至少在我看来，从图中提取所有可能的矩形的最简单的编程方法是使用一种递归定义的方法，该方法在特定方向上搜索对称矩形模式。然而，这最终可能会非常慢，所以我希望速度对你来说不是一个限制。看看代码的风格，我会说这是递归或动态编程的学校作业。

类似于以下伪代码的内容

`

```
for i in width  
{  
for j in height  
{  
if(point[i,j] == 1)  
{  
       potentials = searh_in_direction(i,j,graph,width,height,RIGHT,[[i,j]] )  
     listOfAllRects.append(potentials)  
}  
}  
}
list_of_rectangle searh_in_direction(i,j,graph,width,height,direction, listofpoints )  
{  
  nextdirection = direction.nextdirection; //Right -> down -> left-> up 

  //DEVELOP METHOD FOR RECURSION HERE THAT RETURNS ALL SETS OF 4 POINTS THAT
  for every point in the direction of travel
  if the point is the origional point and we have 4 points including the point we are looking at, we have a rectangle and we need to return
  if point on direction of travel is a one travel on the next direction
  posiblerects.append(searh_in_direction(i,j,graph,width,height,nextdirection , listofpoints.append(currentpoint)))

//after all points in direction have bee searched
return posiblerects.
} 
```

`

我知道这段代码可能非常令人困惑，但这就是作为递归元素所需要的要点。我还要注意，我已经在这段代码中看到了几个错误，但我已经用完了我说过要花在这篇文章上的 15 分钟，所以你可能不得不自己挑选它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T20:15:31.503

这将为您提供您正在寻找的相同结果：

```
static void Main(string[] args)
{
    string values =
        "1100000000" +
        "1100000011" +
        "0001100011" +
        "0001100000" +
        "0001110000" +
        "0000000110" +
        "0000000110";

    int width = 10;
    int height = 7;
    bool[,] array = new bool[width, height];

    for (int x = 0; x < width; x++)
        for (int y = 0; y < height; y++)
            array[x, y] = (values[x + y * width] == '1');

    List<Rectangle> rectangles = new List<Rectangle>();

    for (int x = 0; x < width; ++x)
    {
        for (int y = 0; y < height; ++y)
        {
            if (array[x, y] && !Used(rectangles, x, y))
            {
                int rHeight = 1;
                for (int rX = x + 1; rX < width && array[rX, y] && !Used(rectangles, rX, y); ++rX)
                    for (int rY = y + 1; rY < height && array[rX, rY] && !Used(rectangles, rX, rY); ++rY)
                        if (rY - y >= rHeight)
                            rHeight = rY - y + 1;

                int rWidth = 1;
                for (int rY = y + 1; rY < height && rY - y <= rHeight && array[x, rY] && !Used(rectangles, x, rY); ++rY)
                    for (int rX = x + 1; rX < width && array[rX, rY] && !Used(rectangles, rX, rY); ++rX)
                        if (rX - x >= rWidth)
                            rWidth = rX - x + 1;

                rectangles.Add(new Rectangle(x, y, rWidth, rHeight));
            }
        }
    }

    foreach (Rectangle rect in rectangles)
        Console.WriteLine(rect);
}

private static bool Used(IEnumerable<Rectangle> rectangles, int x, int y)
{
    return rectangles.Any(r => r.Contains(x, y));
} 
```

因为我没有引用 System.Drawing，所以我制作了一个临时 Rectangle 结构，但是您可以将 System.Drawing.Point 传递给 System.Drawing.Rectangle.Contains() 并获得相同的结果。

另外，请注意您的数组的宽度实际上应该是 10 并且您的索引数学是错误的。您应该将 y 乘以宽度，而不是高度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:01:44.157

从问题中不清楚您是否真的想要完全覆盖 1 的矩形，或者您是否想要可以包含零但会用相当少的矩形覆盖所有 1 的边界体积。

假设您希望矩形覆盖 1，并且您不需要完美的解决方案：

1.  制作数组的临时副本。
2.  遍历临时寻找 1
3.  当您点击 1 时，开始一个新的矩形，以 1x1 开头，偏移到该位置（例如仅覆盖该 1 ）
4.  只要下一个单元格中有 1，就向右扩展该矩形
5.  只要下面的行与当前矩形的宽度匹配，向下扩展该矩形。
6.  一旦你不能再向下扩展，发出那个矩形，并从临时清除该矩形覆盖的所有 1
7.  继续从当前矩形右上角之后的单元格开始扫描 1。

这将产生一个不错的覆盖 - 但绝不是理想的。如果您需要一个完美的覆盖 - 例如保证最小数量的矩形，那就更难了。

# google-chrome-extension - Chrome 扩展程序中的内容脚本是在扩展程序进程还是选项卡进程中运行？

> ID：11212313
> 
> 赞同：2
> 
> 时间：2012-06-26T16:57:57.450
> 
> 标签：google-chrome-extension

Chrome 扩展程序中的内容脚本是在扩展程序进程还是选项卡进程中运行？即，如果我在 Chrome 任务管理器中的扩展进程占用了大量 CPU，那么违规代码最有可能出现在内容脚本中，或者我的扩展程序的背景页面中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:13:25.327

它们在选项卡的进程中运行。

# css - CSS3 - (background-size: auto 100%;) - 意外行为

> ID：11212314
> 
> 赞同：1
> 
> 时间：2012-06-26T16:57:58.900
> 
> 标签：css

我目前有以下 CSS（称为 splash.css）：

```
html { 
    background:url(splash.jpg) center no-repeat;
    background-size:auto 100%;
} 
```

以及以下 HTML：

```
<!DOCTYPE html>
<HTML>
    <HEAD>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
        <TITLE>Test</TITLE>
        <link href="splash.css" rel="stylesheet" type="text/css" media="screen" />
    </HEAD>
    <BODY>
    </BODY>
</HTML> 
```

我试图让名为 splash.jpg 的背景图像始终与浏览器窗口具有相同的高度，并调整它的大小（保持其纵横比）并允许一些宽度保留在浏览器窗口之外。此外，背景必须以浏览器窗口为中心。

目前我希望我的 CSS 能够完全按照它应该做的事情。我已将背景设置为与中心水平和垂直对齐，并将其设置为应有的图像。我还将 background-size 设置为 auto 100% - 根据[Mozilla Developer Network](https://developer.mozilla.org/en/CSS/background-size)的说法，它会调整图像的大小，就像我想要调整它的大小一样。

> 如果 background-size 有一个 auto 分量和一个 non-auto 分量：如果图像具有固有比例，则使用指定的维度进行渲染，并根据指定的维度和固有比例计算另一个维度。如果图像没有固有比例，请使用该尺寸的指定尺寸。对于另一个维度，如果有，则使用图像的相应固有维度。如果没有这样的固有维度，则使用背景定位区域的相应维度。

我面临的问题是，当我在浏览器窗口中打开 HTML 时，这个巨大的 1920x1080 图像的高度似乎只有 50 像素左右。宽度似乎也与高度的比例正确。

起初，我觉得这可能是某种依赖于浏览器的错误 - 但页面在 Chrome 和 Firefox 中看起来几乎完全相同！

注意 - 欢迎任何其他简单的解决方案。我不希望这种行为依赖于 Javascript - 但我不介意该解决方案仅适用于最新版本的 FF/Chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:02:01.733

添加`height: 100%;`到您的`html`样式中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:06:39.663

只需使用这个：

```
body { background-size: cover; } 
```

这是一个用背景图像覆盖页面的 CSS3 属性。我忘记了它是否保持完美的纵横比，但值得一试，伙计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T01:58:57.443

```
background: url('/img/bg0.jpg') no-repeat center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale'); -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')";"> 
```

# android - 使用 GPS 检测固定设备

> ID：11212321
> 
> 赞同：0
> 
> 时间：2012-06-26T16:58:33.020
> 
> 标签：android, gps

我正在创建一个应用程序，如果他已经静止了几分钟（比如 10 分钟），它会提醒用户。

我发现很容易检测运动，使用 LocationListener 如果设备移动了一定距离就会触发一个功能。

但是，我想要一些不同的东西。如果设备在一定时间内没有移动，我希望调用一个函数。

我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:04:45.080

您可以轻松设置一个计时器，当 LocationListener 触发时，将计时器重置为零。如果计时器达到 10 分钟，那么您就知道用户没有移动。这种方法的缺点是计时器必须继续运行，因此您需要安装为服务。

[http://developer.android.com/reference/java/util/Timer.html](http://developer.android.com/reference/java/util/Timer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:22:26.580

像这样的东西可能会起作用我不确定这段代码是否有效，我没有测试它，但通常你需要做的是获取当前位置。然后使用计时器在 10 分钟内检查它是否仍在同一位置。如果不使用意图开始新活动。

```
private double locationcheck;

locationcheck = this.getcurrentlocation();

public double[] getcurrentlocation(){
double[] locations= new String[2];
l = lm.getLastKnownLocation(providers.get(i));
locations[0] = l.getLatitude();
locations[0] = l.getLongitude();
return 
} 
```

然后使用此方法检查它：

```
 final Handler handler = new Handler(); 
           Timer t = new Timer(); 
            t.schedule(new TimerTask() { 
                    public void run() { 
                            handler.post(new Runnable() { 
                                    public void run() { 

                                        if (locationcheck!=this.getcurrentlocation()) {

    Intent i=new Intent(ctxt, YourActivity.class);
        StartActivity(i);

                                        }   
                                    } 
                            }); 
                    } 
            }, 3000,10000); 
```

# wpf - ScrollViewer does not react to ScrollToHorizontalOffset(0)

> ID：11212324
> 
> 赞同：4
> 
> 时间：2012-06-26T16:58:44.020
> 
> 标签：wpf, scrollviewer

My ScrollViewer is auto scrolling to a middle offset, even when I try to force it back to a 0 offset it still aligns incorrectly

![enter image description here](../Images/e54b64328485943c0f080ab9eb5c48dc.png)

Here is part of the XAML:

```
<ScrollViewer x:Name="ScrollView" Grid.Row="0" Grid.Column="0" VerticalScrollBarVisibility="Auto">
        <TreeView Grid.ColumnSpan="2" Name="LOBSummaryTree" 
                      BorderThickness="0" DataContext="{Binding}">
        <TreeView.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black" />
            <common:VisibilityConverter x:Key="VisibilityConverter"/>
            <common:TextStyleConverter x:Key="TextStyleConverter"/>
            <Style TargetType="{x:Type TreeViewItem}">
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate DataType="ContentPresenter">
                            <StackPanel x:Name="StackGroups" Orientation="Horizontal">
                                <TextBlock Name="txtBox" Tag="{Binding}"> 
```

And the attempt from the code behind to force the offset:

```
var scrollViewer = this.ScrollView;
if (scrollViewer != null)
{
   scrollViewer.InvalidateScrollInfo();
   scrollViewer.ScrollToHorizontalOffset(0);
   UpdateLayout();
} 
```

What am I doing incorrectly, I want the alignment of the horizontal scollbar to be forced to the left on the initial load of the treeview?

# html - does html5 push state support in iPad and iPhones?

> ID：11212327
> 
> 赞同：0
> 
> 时间：2012-06-26T16:58:56.453
> 
> 标签：html

I want to use html5 Push state in my application but i have question does html 5 support iPhones, ipads and other mobile devices? if not then what is the alternative way to do it.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:30:22.097

这不是 html 5 支持这些设备的问题，而是那些实现 html 5 的设备使用的浏览器的问题。

“我什么时候可以使用”网站对您很方便。它将帮助您了解现在可用的功能。 [http://caniuse.com/#search=push](http://caniuse.com/#search=push)

另外，请参阅这篇文章：[Internet Explorer 是否支持 pushState 和 replaceState？](https://stackoverflow.com/questions/3722815/does-internet-explorer-support-pushstate-and-replacestate)

它将为您提供更多信息，说明您可以做些什么来实现您需要的东西。一个人提到了history.js。如果您寻求的功能不可用，您可能希望将其作为替代方案。

# git - 无法从 github 获取新分支

> ID：11212328
> 
> 赞同：1
> 
> 时间：2012-06-26T16:59:03.513
> 
> 标签：git, git-branch, branching-and-merging

我的同事刚刚在我们已经工作了一段时间的 git 存储库中创建了一个新分支。但是在我的本地存储库中，我很难获得新分支并将其合并到我的本地存储库中。我发现了这篇文章：[克隆 Git repo 后只有 master 分支可见](https://stackoverflow.com/questions/8889753/git-branch-not-showing)，但它对我不起作用。

*   当我尝试时`git branch -r`，我没有看到列出的新分支名称，
*   当我尝试时`git fetch`，它说没有指定远程仓库，
*   当我尝试时`git fetch newbranchname`，它说`newbranchname`似乎不是回购，
*   当我尝试时`git chechout newbranchname`，它说`newbranchname`与 git 已知的任何文件都不匹配。

我还能尝试什么？请帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T19:24:46.600

to 的参数`git fetch`应该是一个存储库，而不是一个分支。

```
$ git fetch origin
From https://github.com/...
 * [new branch]    newbranchname  -> origin/newbranchname

$ git checkout -b newbranchname origin/newbranchname
 Branch newbranchname set up to track remote branch newbranchname from origin.
 Switched to a new branch 'newbranchname' 
```

您现在应该拥有同事分支的本地副本，您可以从中`git push`进行`git pull`更新。

# entity-framework - EF Code First: Migrating Database Initialized on Different Code Versions

> ID：11212329
> 
> 赞同：1
> 
> 时间：2012-06-26T16:59:05.613
> 
> 标签：entity-framework

I am using Entity Framework 5 RC, code first. I am struggling with migrating databases that were created on different versions of code. For example, Database A was created when table FooBar didn't exist. Database B was created after table FooBar was added to my model.

I have a migration written that adds the FooBar table. Is it my responsibility to check in the FooBar migration that the table doesn't exist before calling CreateTable? It seems that is the case since Database B doesn't have an entry for the FooBar migration and will attempt to run it.

At first the MigrationHistory table seemed like it would save me from adding these checks but since new databases won't have entries for migrations added before the database was created, I still need to do the checks myself. Is that the right way to go about it or am I missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T14:27:43.780

为了解决我在添加存储过程时遇到的问题，我编写了一个 TSQL 脚本来创建一个新表“_PreviousMigrationHistory”——它在我的存储过程脚本运行后*从“_MigrationHistory”表中接收新条目......*

我确实向两个表（INT - IDENTITY(1,1) 的“VersionId”）添加了一个新列，这是我在代码中用于比较的列。

这样，即使发生 Code First 迁移，您也可以使用未更新的迁移模式 (__PreviousMigrationHistory)。

这会有帮助吗？

**编辑 - 抱歉，我想念这个问题。- 虽然我认为数据库的新实例仍会经历迁移步骤，这反过来应该将条目添加到 __MigrationHistory 表中？

# c# - 使用 JSON.net lib 解析 json 数据

> ID：11212330
> 
> 赞同：1
> 
> 时间：2012-06-26T16:59:07.450
> 
> 标签：c#, json, linq, json.net

如何使用 JSON.net lib 解析以下 json 数据

```
 Root: {
  "data": [
    {
      "name": "query1",
      "fql_result_set": [
        {
          "thread_id": "1920370693067",
          "updated_time": 1340656102,
          "subject": "",
          "snippet": "Test",
          "snippet_author": 100002153560476
        }
      ]
    },
    {
      "name": "query2",
      "fql_result_set": [
        {
          "uid": 100002153560476,
          "name": "Santosh Singh"
        }
      ]
    }
  ]
}
    Type: Property 
```

我尝试了以下代码，但无法获取数据

```
JObject j = JObject.Parse(jsonResult);
JArray data = (JArray)j["data"];

if (data != null)
        {
            foreach (var item in data[1]["fql_result_set"].Values())
            {

                string innerText = item["name"].ToString();

                string str2 = item["uid"].ToString();
                dictionary[str2] = innerText;
            }
            foreach (var item in data[0]["fql_result_set"].Values().AsJEnumerable())
            {
                FacebookMessage message;
                message.threadId = item["thread_id"].ToString();
                message.updatedTime = item["updated_time"].ToString();
                message.subject = item["subject"].ToString();
                message.snippet = item["snippet"].ToString();
                message.snippetAuthorId = item["snippet_author"].ToString();
                message.snippetAuthorName = dictionary[message.snippetAuthorId];
                allMessages.Add(message);
            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:29:38.953

首先，您的 json 字符串不完整。我试图将其转换为有效的：

```
{
    "Root": {
        "data": [
            {
                "name": "query1",
                "fql_result_set": [
                    {
                        "thread_id": "1920370693067",
                        "updated_time": 1340656102,
                        "subject": "",
                        "snippet": "Test",
                        "snippet_author": 100002153560476
                    }
                ]
            },
            {
                "name": "query2",
                "fql_result_set": [
                    {
                        "uid": 100002153560476,
                        "name": "Santosh Singh"
                    }
                ]
            }
        ]
    }
} 
```

![在此处输入图像描述](../Images/dd09c66436a36c7add7b29dc6bec9db5.png)

并解析为：

```
dynamic dynObj = JsonConvert.DeserializeObject(json);
foreach(var data in dynObj.Root.data)
{
    Console.WriteLine("{0}",data.name);
    foreach(var fql in data.fql_result_set)
    {
        foreach (JProperty keyValue in fql)
        {
            Console.WriteLine("\t{0} : {1}", keyValue.Name,keyValue.Value);
        }
    }
} 
```

# cobol - COBOL File Status 18 (EOF open before EOR)?

> ID：11212331
> 
> 赞同：0
> 
> 时间：2012-06-26T16:59:12.957
> 
> 标签：cobol

I made some major changes to how the report is laid out. Previously all the data had to be loaded into a table so that it could be written into two columns. However I decided instead to put it all into one column and show the field names. Now I am getting file status 139 "Record Length or Key Data Inconsistency". Once again I don't know what that means and there is so little resources online that I can't find an answer to this problem.

Here's the reworked code in it's entirety:

```
ENVIRONMENT DIVISION.                                    
INPUT-OUTPUT SECTION.                                    
FILE-CONTROL.                                            

SELECT VENDOR-FILE-IN                                
    ASSIGN TO 'VENDOR-MASTER.DAT'                    
    ORGANIZATION IS INDEXED                          
    ACCESS MODE IS SEQUENTIAL                        
    RECORD KEY IS VENDOR-NUMBER-IN.                  

SELECT VENDOR-FILE-OUT                               
    ASSIGN TO 'VENDOR-REPORT.RPT'                    
    ORGANIZATION IS LINE SEQUENTIAL.                 

DATA DIVISION.                                           
FILE SECTION.                                            

FD VENDOR-FILE-IN.                                       
01 VENDOR-RECORD-IN.                                     
   05  VENDOR-NUMBER-IN         PIC X(4).                
   05  VENDOR-NAME-IN           PIC X(25).               
   05  VENDOR-ADDRESS-IN        PIC X(25).               
   05  VENDOR-CITY-IN           PIC X(15).               
   05  VENDOR-STATE-IN          PIC XX.                  
   05  VENDOR-ZIP-CODE-IN       PIC X(5).                
   05  VENDOR-CONTACT-NAME-IN   PIC X(20).               
   05  VENDOR-CONTACT-PHONE-IN  PIC X(10).               
   05  VENDOR-DATE-FIELDS       PIC X(18).               

FD VENDOR-FILE-OUT.                                      
01 VENDOR-RECORD-OUT            PIC X(80).               

WORKING-STORAGE SECTION.                                 
01  ARE-THERE-MORE-RECORDS       PIC X(3)  VALUE 'YES'.  
01  PAGE-CTR                     PIC 99    VALUE ZERO.   
01  FIRST-PAGE                   PIC X(3)  VALUE 'YES'.  
01  LINE-CTR                     PIC 99    VALUE ZERO.   

01  WS-DATE.                                             
    05  RUN-YEAR                 PIC XX.                 
    05  RUN-MONTH                PIC XX.                 
    05  RUN-DAY                  PIC XX.                 

01 HEADING-LINE.                                         
    05                           PIC X(26) VALUE SPACES. 
    05                           PIC X(35)               
        VALUE 'VENDOR REPORT'.                           
    05 HL-DATE.                                          
        10  DAY-HL               PIC XX.                 
        10                       PIC X     VALUE '/'.    
        10  MONTH-HL             PIC XX.                 
        10                       PIC X     VALUE '/'.    
        10  YEAR-HL              PIC XX.                 
    05                           PIC X(3)  VALUE SPACES. 
    05                           PIC X(5)  VALUE 'PAGE'. 
    05  PAGE-NUMBER-HL           PIC Z9\.                 

01  DETAIL-LINE.                                         
    05                           PIC X(5) VALUE SPACES.  
    05  FIELD-NAME-DL            PIC X(20).              
    05  FIELD-DETAIL-DL          PIC X(40).              

PROCEDURE DIVISION.                                      
100-MAIN.                                                

    ACCEPT WS-DATE FROM DATE.                            
    MOVE RUN-MONTH TO MONTH-HL.                          
    MOVE RUN-DAY   TO DAY-HL.                            
    MOVE RUN-YEAR  TO YEAR-HL.                           

    OPEN INPUT VENDOR-FILE-IN                            
    OPEN OUTPUT VENDOR-FILE-OUT                          

    PERFORM UNTIL ARE-THERE-MORE-RECORDS = 'NO '         
        READ VENDOR-FILE-IN                              
            AT END                                       
                MOVE 'NO ' TO ARE-THERE-MORE-RECORDS     
            NOT AT END                                   
                PERFORM 200-PROCESS-ONE-RECORD           
    CLOSE VENDOR-FILE-IN                                 
    CLOSE VENDOR-FILE-OUT                                
    STOP RUN.                                            

200-PROCESS-ONE-RECORD.                                  

    IF FIRST-PAGE = 'YES'                                
        PERFORM 300-PAGE-BREAK                           
        MOVE 'NO' TO FIRST-PAGE                          
    END-IF.                                              

    IF LINE-CTR >= 54                                    
        PERFORM 300-PAGE-BREAK                           
    END-IF                                               

    MOVE 'Vendor Number:' TO FIELD-NAME-DL           
    MOVE VENDOR-NUMBER-IN TO FIELD-DETAIL-DL         
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Vendor Name:' TO FIELD-NAME-DL             
    MOVE VENDOR-NAME-IN TO FIELD-DETAIL-DL           
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Vendor Address:' TO FIELD-NAME-DL          
    MOVE VENDOR-ADDRESS-IN TO FIELD-DETAIL-DL        
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Vendor City:' TO FIELD-NAME-DL             
    MOVE VENDOR-CITY-IN TO FIELD-DETAIL-DL           
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Vendor State:' TO FIELD-NAME-DL            
    MOVE VENDOR-STATE-IN TO FIELD-DETAIL-DL          
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Vendor Zip Code:' TO FIELD-NAME-DL         
    MOVE VENDOR-ZIP-CODE-IN TO FIELD-DETAIL-DL       
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Contact Name:' TO FIELD-NAME-DL            
    MOVE VENDOR-CONTACT-NAME-IN TO FIELD-DETAIL-DL   
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE 'Contact Phone:' TO FIELD-NAME-DL           
    MOVE VENDOR-CONTACT-PHONE-IN TO FIELD-DETAIL-DL  
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    MOVE SPACES TO DETAIL-LINE                       
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE         
    ADD 9 TO LINE-CTR.                               

300-PAGE-BREAK.                                          

    ADD 1 TO PAGE-CTR                                    
    MOVE PAGE-CTR TO PAGE-NUMBER-HL                      
    WRITE VENDOR-RECORD-OUT FROM HEADING-LINE            
        AFTER ADVANCING PAGE                             
    MOVE SPACES TO DETAIL-LINE                           
    WRITE VENDOR-RECORD-OUT FROM DETAIL-LINE             
        AFTER ADVANCING 1                                
    MOVE 3 TO LINE-CTR. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T01:08:58.823

看起来您正在使用 Micro Focus 工具。您看到的错误似乎已[记录在案](http://supportline.microfocus.com/documentation/books/sx20books/emrunt.htm)。正如 NealB 所指出的，文档似乎表明问题可能出在数据文件本身上。

# cassandra - cassandra 1.1.1 默认cql版本

> ID：11212338
> 
> 赞同：1
> 
> 时间：2012-06-26T16:59:58.253
> 
> 标签：cassandra, cql

有人知道是否可以在 Cassandra (1.1.1) 配置 CQL3 中设置为默认连接？我知道你可以使用--cql3 在 cqlsh 中设置它，或者在 java Cassandra 客户端中设置它，但这不是我需要的。问题是它不能在 java 客户端中设置，我想避免弄乱他们的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:27:06.133

很不幸的是，不行。在这种情况下，java 客户端只需要添加对此的支持。对于 JDBC，要注意的问题是[http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/issues/detail?id=38](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/issues/detail?id=38)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:02:02.013

遇到 java 客户端插入失败的问题（没有任何错误消息），我按照 jbellis 提供的链接，发现将“？version = 3.0.0”添加到连接 url 将使事情再次正常工作，如：

连接连接 = DriverManager.getConnection("jdbc:cassandra://my_server_addr:9160/my_keyspace?version=3.0.0");

...试过了，问题立即解决了。

# ruby-on-rails-3 - Upgraded to Rails 3 from 2.3.8 and I get a passenger error

> ID：11212342
> 
> 赞同：0
> 
> 时间：2012-06-26T17:00:19.260
> 
> 标签：ruby-on-rails-3, apache

I recently upgraded from Rails 2.3.8 to Rails 3, and I am now getting this passenger error:

Welcome to the Phusion Passenger Apache 2 module installer, v3.0.13.

This installer will guide you through the entire installation process. It shouldn't take more than 3 minutes in total.

Here's what you can expect from the installation process:

1.  The Apache 2 module will be installed for you.
2.  You'll learn how to configure Apache.
3.  You'll learn how to deploy a Ruby on Rails application.

Don't worry if anything goes wrong. This installer will advise you on how to solve any problems.

Press Enter to continue, or Ctrl-C to abort.

* * *

Checking for required software...

*   GNU C++ compiler... found at /usr/bin/g++
*   Curl development headers with SSL support... found
*   OpenSSL development headers... found
*   Zlib development headers... found
*   Ruby development headers... found
*   OpenSSL support for Ruby... found
*   RubyGems... found Unable to autodetect the currently active RVM gem set name. Please contact this program's author for support.

# c++ - glewInit() fails on macOS

> ID：11212347
> 
> 赞同：7
> 
> 时间：2012-06-26T17:00:44.330
> 
> 标签：c++, opengl, osx-lion

So I have a piece of code that runs fine on ubuntu machine, but fails to do so on xcode or via terminal. I'm trying to run it on xcode, but it fails on main with:

"Use of undeclared identifier glewInit; did you mean glutInit?" "Too few argument to function call, expected 2, have 0"

The code is lengthy is been written by my professor and it runs on ubuntus. But with the errors, I'm thinking that the reasons is...well, underclared identifier, include is missing. So, after googling I figured out that glewInit is part of the glew library -> so I downloaded the code and installed it on my machine with following:

make sudo -s make install

which were successfully installed into my /usr/include/GL. Now, when i type into xcode #include or just #include , the compiler throws that glew.h is not found (though i can i see the file myself in the usr/include/GL).

Here is the code:

```
#include "include/Angel.h"

// The rotation  around z axis
GLfloat  Theta = 0.0; // Angle (in degrees)
GLfloat  step = 0.01; // Incremental
GLuint  locTheta;  
enum { CW = 0, CCW = 1};
int direction = CW;  // Direction

//Scale along x and y axes
GLfloat ScaleFactor[2] = {1.0, 1.0};
GLuint locScale;

const int NumPoints = 4;
void init();
void display( void );
void reshape( GLsizei w, GLsizei h );
void keyboard( unsigned char key, int x, int y );
void mouse( int button, int state, int x, int y );
void idle( void );
//----------------------------------------------------------------------------

// OpenGL initialization
void init()
{
    // Vertices of a unit square centered at origin, sides aligned with axes
    vec4 points[] = {
        vec4( -0.5, -0.5,  0, 1.0 ), //v1
        vec4(  0.5, -0.5,  0, 1.0 ), //v2
        vec4( -0.5,  0.5,  0, 1.0 ), //v3
        vec4(  0.5,  0.5,  0, 1.0 )  //v4
    };

    // RGBA colors
    vec4 colors[] = {
        vec4( 1.0, 0.0, 0.0, 1.0 ),  // red
        vec4( 0.0, 1.0, 0.0, 1.0 ),  // green
        vec4( 0.0, 1.0, 0.0, 1.0 ),  // green
        vec4( 0.0, 0.0, 1.0, 1.0 ),  // blue
    };

    // Create and initialize a buffer object
    GLuint buffer;
    glGenBuffers( 1, &buffer );
    glBindBuffer( GL_ARRAY_BUFFER, buffer );
    glBufferData( GL_ARRAY_BUFFER, sizeof(points) + sizeof(colors), NULL, GL_STATIC_DRAW );
    glBufferSubData( GL_ARRAY_BUFFER, 0, sizeof(points), points );
    glBufferSubData( GL_ARRAY_BUFFER, sizeof(points), sizeof(colors), colors );

    // Load shaders and use the resulting shader program
    GLuint program = InitShader( "vshader_rot.glsl", "fshader_rot.glsl" );
    glUseProgram( program );

    // set up vertex arrays
    GLuint vPosition = glGetAttribLocation( program, "vPosition" );
    glEnableVertexAttribArray( vPosition );
    glVertexAttribPointer( vPosition, 4, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(0) );

    GLuint vColor = glGetAttribLocation( program, "vColor" ); 
    glEnableVertexAttribArray( vColor );
    glVertexAttribPointer( vColor, 4, GL_FLOAT, GL_FALSE, 0,
               BUFFER_OFFSET(sizeof(points)) );

    // The location of shader uniform variables
    locTheta = glGetUniformLocation( program, "theta" );
    locScale = glGetUniformLocation( program, "scale" );

    glClearColor( 1.0, 1.0, 1.0, 1.0 );
}

//----------------------------------------------------------------------------

void display( void )
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glUniform1f( locTheta, Theta );
    glUniform2fv( locScale, 1, ScaleFactor );

    glDrawArrays( GL_TRIANGLE_STRIP, 0, NumPoints);

    glutSwapBuffers();
}

//----------------------------------------------------------------------------
void reshape( GLsizei w, GLsizei h )
{
    glViewport(0, 0, w, h);

    // Scale the square to avoid stretching
    if (w > h) ScaleFactor[0] = (float)h/w;
    if (w < h) ScaleFactor[1] = (float)w/h;
}

//----------------------------------------------------------------------------

void keyboard( unsigned char key, int x, int y )
{
    switch( key ) {
    case 033: // Escape Key
    case 'q': case 'Q':
        exit( EXIT_SUCCESS );
        break;
    }
}

//----------------------------------------------------------------------------

void mouse( int button, int state, int x, int y )
{
    if ( state == GLUT_DOWN ) {
        switch( button ) 
        {
        case GLUT_LEFT_BUTTON:    
            direction = CCW;  
            break;
        case GLUT_RIGHT_BUTTON:   
            direction = CW;  
            break;
        }
    }
}

//----------------------------------------------------------------------------

void idle( void )
{
    // Animate the rotation
    if (direction == CW)    
        Theta += step;
    else
        Theta -= step;

    if ( Theta > 360.0 ) {
        Theta -= 360.0;
    }

    glutPostRedisplay();
}

//----------------------------------------------------------------------------

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH );
    glutInitWindowSize( 512, 512 );
    glutCreateWindow( "Rotating Color Square" );

    glewInit();
    init();

    glutDisplayFunc( display );
    glutReshapeFunc( reshape );
    glutKeyboardFunc( keyboard );
    glutMouseFunc( mouse );
    glutIdleFunc( idle );

    glutMainLoop();
    return 0;
} 
```

I have Lion 10.7.4 and xCode 4.2.1

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T18:06:15.313

glewInit() 调用（当然还有包含）在 MacOS 上不是必需的，所以你可以这样排除它：

```
#ifndef __APPLE__
glewInit();
#endif 
```

与包含相同。

现在使用未解析的符号。你必须包含 MacOSX 的原生 GL 头文件：

```
#ifdef __APPLE__
#  include <OpenGL/gl.h>
#  include <OpenGL/glext.h>
#else /// your stuff for linux
#  include "GL/GL.h"
.... whatever
#endif 
```

OpenGL 是 OSX 的核心技术，而不是 Linux/X Window 中的“扩展”。因此，只需将 OpenGL 和 GLUT 框架包含到您的 XCode 项目中，希望它能够构建和工作。

# c# - Webservice convert from string to System.Data.SqlClient.SqlCommand

> ID：11212348
> 
> 赞同：0
> 
> 时间：2012-06-26T17:00:47.420
> 
> 标签：c#, string, sqlconnection

I'm trying to get an list of items from some table of SQL Server. I'm doing it with Visual Studio 2010\.

That's my code:

```
static string filter = "25";

DataSet Datos = new DataSet();
SqlConnection MyConnection = default(SqlConnection);
SqlDataAdapter MyDataAdapter = default(SqlDataAdapter);
MyConnection = new SqlConnection("Initial Catalog=MyDataBase;Data Source=MyServer;Integrated Security=false;User ID=SQLUser;Password=SQLPass;");
MyDataAdapter = new SqlDataAdapter("SELECT Comment FROM MyTable WHERE [No_] = "+filter+" , MyConnection);
MyDataAdapter.SelectCommand.CommandType = CommandType.Text;
MyDataAdapter.Fill(Datos);
MyDataAdapter.Dispose();
MyConnection.Close(); 
```

I'm getting this error:

> Argument 1: cannot convert from 'string' to 'System.Data.SqlClient.SqlCommand'

On this line:

```
MyDataAdapter = new SqlDataAdapter("SELECT Comment FROM MyTable WHERE [No_] = "+filter+" , MyConnection); 
```

So, how can I put the string into my `SqlConnection`?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:00:33.050

这对我有用：

```
string filter = "10";

DataSet Datos = new DataSet();
string connectionString = "<your connection string here>";
string selectCommand = 
  "SELECT * FROM myTable WHERE Id = " + filter;
using (var MyConnection = new SqlConnection(connectionString))
using (var MyDataAdapter = new SqlDataAdapter(selectCommand, MyConnection))
{
   MyDataAdapter.SelectCommand.CommandType = CommandType.Text;
   MyDataAdapter.Fill(Datos);
} 
```

这基本上是您的代码，使用 using 语法。如果您仍然有问题，请尝试并发布。祝你好运！

# php - Creating own Auth Driver in FuelPHP

> ID：11212349
> 
> 赞同：0
> 
> 时间：2012-06-26T17:00:48.793
> 
> 标签：php, database, authentication, fuelphp

Last 2 days I was searching how to build my own Auth Driver in FuelPHP. We need to check some users from other table because of old datas in our database.

So, I need to write my own Auth Driver. First of all, I really don't know where I should start. Is it possible to build new Auth Driver from SimpleAuth(w/ extends)?

Could someone help me what I should do, I'll be really appreciating..

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:09:24.333

在 Auth Docs 中：[编写自己的驱动程序](http://docs.fuelphp.com/packages/auth/drivers.html)

# ruby-on-rails - How to have two pieces of data output as json in rabl

> ID：11212351
> 
> 赞同：0
> 
> 时间：2012-06-26T17:00:56.327
> 
> 标签：ruby-on-rails, json, rabl

New to rabl and not sure how to do this with two different arrays returned in a single hash like this:

```
@data={:locations => [location1, location2], :items => [item1,item2]} 
```

In my rabl file, I'd like to do something like the following:

```
@data[:locations]
extends "api/location_show"
@data[:items]
extends "api/item_show" 
```

to output this:

```
{
    "locations": [
        {
            "id": 156,
            "name": "Location 1"
        },
        {
            "id": 158,
            "name": "Location 2"
        }
    ],
    "items": [
        {
            "global_id": 3189,
            "header": "pistachio 1"
        },
        {
            "global_id": 3189,
            "header": "pistachio 2"
        }
    ]
} 
```

but it just doesn't seem to be working. Is there a way to get this to work?

thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:51:26.040

您的 rabl 文件应类似于：

```
object false
child (:locations) { attributes :id, :name }
child (:items) { attributes :global_id, :header } 
```

通过将 object 设置为 false，您实际上是在告诉 rabl 您想自己构建节点。然后，您可以继续并根据需要调用子方法和节点方法。

# visual-studio-2010 - Can't find a reference to a class that is in the same namespace as the calling class

> ID：11212353
> 
> 赞同：0
> 
> 时间：2012-06-26T17:00:59.810
> 
> 标签：visual-studio-2010, c#-4.0

I have a C# class in Visual Studios2010 that is referencing a globals class in the same namespace. This project is in a solution with several other projects and will build on its own. When I try to build the entire solution it loses reference to the globals class in its own namespace. The weird thing about this is there is another class also using globals in the same namespace and it works just fine.

Things I have tried:

-Changing the framework to every possible option.

-Deleting the class completely cleaning rebuilding restarting my computer etc.

-Making the project the startup project

Any help on this matter would be greatly appreciated I’m chasing my tail at this point.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:57:39.973

我的猜测是这是一个语法错误。我今天早些时候遇到了类似的错误，并通过修复上述语法错误（特别是删除了一个流氓右花括号）来解决它。如何测试：语法错误不会在上面传播，所以只需在引用 Globals 类有问题的类的开头写一个方法：

```
public void testGlobals()
{
    Globals testglobals = new Globals(); //or whatever other constructor
} 
```

如果是这样（即类名改变颜色并且没有出现红色波浪线），开始逐个方法向下移动它，直到类名变成全白色（或黑色，如果你进入视网膜破坏配色方案）并且你把红色的波浪线拿回来。然后修复所说的语法错误。

# xcode - A Button to make a TextView from invisible to visible

> ID：11212357
> 
> 赞同：0
> 
> 时间：2012-06-26T17:01:19.993
> 
> 标签：xcode

iam a newbie in Xcode programming and i didnt find the right answer in another Tread. My Question: I have a Detailview with a CardQuestion(TextView) and a CardAnser(TextView). How is the method to change the invisible Answer to visible. On Action the Button "Show Answer".

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

- (void)viewDidLoad
{

[super viewDidLoad];

self.title = self.chosenCard.name;
self.cardName.text = self.chosenCard.name;
self.cardQuestion.text = self.chosenCard.question;
self.cardAnswer.text = self.chosenCard.answer;
}

- (void)viewDidUnload
{
[self setCardName:nil];
[self setCardQuestion:nil];
[self setCardAnswer:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)toAnswerButton:(id)sender{

}
@end 
```

I hope you can understand my question.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:03:34.337

`UIView`子视图（包括`UILabel`,`UITextField`和`UITextView`）具有隐藏属性。将其设置`YES`为隐藏视图并`NO`取消隐藏它。您也可以在 Interface Builder 中设置此属性。

# c# - 在水晶报表中设置相对路径

> ID：11212358
> 
> 赞同：2
> 
> 时间：2012-06-26T17:01:21.880
> 
> 标签：c#, crystal-reports

我写了以下代码，

```
CrystalDecisions.CrystalReports.Engine.ReportDocument report = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
report.Load(@"C:\Users\XXX\Desktop\Backup1\Project\ReportsFolder\ReportSalesInvoice.rpt"); 
```

报告适用于上面的代码但我想给出一个相对路径，这样我就可以在不改变路径的情况下将它安装在多台机器上。我也尝试过以下路径

```
string loc = AppDomain.CurrentDomain.BaseDirectory;
string loc2 = Application.StartupPath;
string loc3 = Application.UserAppDataPath;
string loc4 = Application.CommonAppDataPath; 
```

将它们用作，

```
report.Load(loc2 + "\\ReportSalesInvoice.rpt"); 
```

但是无法访问该文件。请帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:14:56.147

尚未在 Windows 应用程序中测试，但这是我在 MVC3 中使用的。我相信相对路径必须在您的应用程序的根目录内

```
 using CrystalDecisions.CrystalReports.Engine;
    using CrystalDecisions.Shared;

    using (var report = new ReportClass { FileName = Server.MapPath("/AppName/Reports/MyReport.rpt") })
    {
        report.Load();
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T02:51:56.613

```
private void Crystal_rpt()
{
  ReportDocument dir = new ReportDocument();
  dir = functions.Show_Crystal_rpt();
  dir.Load(Application.StartupPath + "\\rptObt_mark.rpt");
  crpMark_sheet.ReportSource = dir;
} 
```

# sql - TSQL：无论如何要确定两个表更新查询中的错误记录？

> ID：11212361
> 
> 赞同：1
> 
> 时间：2012-06-26T17:01:32.413
> 
> 标签：sql, sql-server, tsql

我正在尝试使用 TSQL 的 UPDATE FROM 子句从另一个表更新一个表。这样做我收到一个约束错误。无论如何要捕获该错误以确定导致问题的行吗？TRY/CATCH 只输出错误类型/消息。

我正在更新的表中有 400K 记录。有没有更好的方法来处理这个问题？批量更新？TSQL 循环第二个表？（尽管有人告诉我后者的性能会受到严重影响。）

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T21:57:54.060

----使用Output子句更新表并在临时表中插入值

> UPDATE TestTable SET TEXTVal = 'NewValue' OUTPUT Inserted.ID, Inserted.TEXTVal, Deleted.ID, Deleted.TEXTVal INTO @TmpTable WHERE ID IN (1,2)

然后看看@TmpTable，

# coldfusion - Coldfusion Missing 模板处理程序用作 http 而不是 https

> ID：11212363
> 
> 赞同：1
> 
> 时间：2012-06-26T17:01:35.343
> 
> 标签：coldfusion, https, missing-template

我们的 Coldfusion 网页使用 https 提供服务，但我们有时会收到可怕的错误“您只想查看安全交付的网页内容吗？” 通过使用 Httpwatch，我可以看到调用 Coldfusion Missing Template Handler 时会发生这种情况；页面missingtemplate.cfm 使用http 提供。如何将其配置为始终使用 https？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:14:20.933

鉴于您说在这种情况下丢失的文件是`/CFIDE/scripts/cfform.js`并且`/CFIDE/scripts/masks.js`您不能通过建立 /CFIDE/scripts 虚拟目录来解决此问题，以便 Web 服务器不会认为它们丢失了吗？如果您不想授予对 /CFIDE/scripts 的访问权限（有些人会反对），那么您可以将它们重新定位到您的网站目录并使用`<cfajaximport>`.

也就是说，这掩盖了问题，而不是解决问题。但是，根据我对您的问题的评论，我很好奇 CF 如何参与非 CF 文件的 404 情况？它应该是处理这类事情的 Web 服务器，而不是 CF。这里有一些你没有说明的谜题有助于解释这一点吗？

# asp.net - 将字符串的值与数据库值进行比较

> ID：11212365
> 
> 赞同：0
> 
> 时间：2012-06-26T17:01:48.520
> 
> 标签：asp.net, database, arrays, string, compare

我必须将字符串数组中的值与数据库中特定列的值进行比较。我该怎么做呢 ？

```
 public void setvisibility(string user_ID)
{
    SqlDataReader reader = null;
    SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["ctd_prrity_dbConnectionSting"].ConnectionString);
    connection.Open();\
SqlCommand cmd = new SqlCommand("Select * from Admins ); 
```

我需要将 user_ID 的值与 Admins 表中的唯一列进行比较！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:19:09.970

以下是您的操作方法：

```
using( SqlConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["ctd_prrity_dbConnectionSting"].ConnectionString))
{ 
  connection.Open();   
  SqlCommand cmd = new SqlCommand("Select 1 from Admins where User_ID=@userid",connection );
  cmd.Parameters.AddWithValue("@userid",user_ID);
  SqlDataReader reader= cmd.ExecuteReader();
  if(reader.HasRows)
  {
   //user id found
  }
} 
```

此方法使用参数化查询，这比 Tony 在答案中给出的选项更安全，因为他容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击。

顺便说一句：您在问题中提到了“字符串数组”，但您的代码仅显示一个字符串作为参数。你那是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:16:22.317

```
sqlcommand("SELECT * FROM Admins WHERE column = " & user_ID ); 
```

那应该行得通。如果它与 user_ID 相同，它会返回列中的值。基本上，如果您的查询返回一个值，那么您就有一个匹配项，如果没有，那么您就没有。

# mysql - MySQL中的正则表达式？

> ID：11212366
> 
> 赞同：1
> 
> 时间：2012-06-26T17:01:48.753
> 
> 标签：mysql, regex

当我做

```
SELECT resrev_meta FROM resourcerevs WHERE resrev_meta LIKE '%attr%'; 
```

我得到这样的结果

```
<attr><fileid>131</fileid></attr> 
<attr><fileid>326</fileid><width>360</width><height>640</height></attr> 
```

**问题**

是否有可能有一个只输出和之间的数字的正则`<fileid>`表达式`</fileid>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:08:20.510

正则表达式可能不是您想要的。mysql 支持 xpath 表达式。

这应该给你你需要的东西：

```
SELECT ExtractValue(resrev_meta,'//fileid')  AS fileid 
     FROM resourcerevs 
     WHERE resrev_meta LIKE '%attr%'; 
```

[http://dev.mysql.com/doc/refman/5.1/en/xml-functions.html#function_extractvalue](http://dev.mysql.com/doc/refman/5.1/en/xml-functions.html#function_extractvalue)

```
mysql> SELECT
    ->   ExtractValue('<a>ccc<b>ddd</b></a>', '/a') AS val1,
    ->   ExtractValue('<a>ccc<b>ddd</b></a>', '/a/b') AS val2,
    ->   ExtractValue('<a>ccc<b>ddd</b></a>', '//b') AS val3,
    ->   ExtractValue('<a>ccc<b>ddd</b></a>', '/b') AS val4,
    ->   ExtractValue('<a>ccc<b>ddd</b><b>eee</b></a>', '//b') AS val5;

+------+------+------+------+---------+
| val1 | val2 | val3 | val4 | val5    |
+------+------+------+------+---------+
| ccc  | ddd  | ddd  |      | ddd eee |
+------+------+------+------+---------+ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:08:39.897

不，不使用正则表达式。Mysql 不支持基于正则表达式的替换或组匹配等。

唯一的正则表达式支持是[`RLIKE`](http://dev.mysql.com/doc/refman/4.1/en/regexp.html#operator_regexp)or [`REGEXP`](http://dev.mysql.com/doc/refman/4.1/en/regexp.html#operator_regexp)（它们是同义词），用于匹配列值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T17:09:23.767

不，但如果你愿意，你可以做一些像这样的黑客行为（请原谅长线）：

```
SELECT
  SUBSTRING(
    resrev_meta,
    INSTR(resrev_meta, '<fileid>') + LENGTH('<fileid>'),
    INSTR(resrev_meta, '</fileid>') - INSTR(resrev_meta, '<fileid>') - LENGTH('<fileid>')) AS fileid
FROM resourcerevs WHERE resrev_meta LIKE '%attr%'; 
```

# android - 如何以编程方式在 android 中重叠 alpha 混合位图？

> ID：11212367
> 
> 赞同：1
> 
> 时间：2012-06-26T17:01:50.430
> 
> 标签：android, bitmap, alpha

我需要“计算”从重叠两个不同位图获得的结果位图，这些位图的 alpha 值介于 0 和 255 之间。我需要在 java 代码中执行此操作，而不是 xml，因为位图是动态加载的，而不是从资源加载的。

这是我的第一次尝试（总是产生黑色位图......）：

```
private Drawable composeBitmaps(int alpha1, BitmapDrawable bm1, 
                                int alpha2, BitmapDrawable bm2)
{
  Canvas c = new Canvas();
  Bitmap b1 = bm1.getBitmap();
  BitmapDrawable draw1 = new BitmapDrawable(b1.copy(b1.getConfig(), true));
  draw1.setAlpha(alpha1);
  c.setBitmap(draw1.getBitmap());

  Paint p = new Paint();
  p.setAlpha(alpha2);
  c.drawBitmap(bm2.getBitmap(), 0, 0, p);

  return draw1;
}

...

  View v = // whatever
  v.setBackgroundDrawable(composeBitmaps(100, bdrawable1, 150, bdrawable2)); 
```

视图变为黑色背景。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:14:51.603

我上面的代码是绝对正确的。使位图变黑的错误在别处。找到它，修复它，现在它可以工作了。

唯一需要注意的是，我的代码非常慢，不能用于以合理的 fps 速率交叉淡入淡出两个全屏位图。

# ios - NSRange 崩溃的应用程序

> ID：11212371
> 
> 赞同：0
> 
> 时间：2012-06-26T17:01:58.193
> 
> 标签：ios, xcode, cocoa-touch, ipad

我有一个 NSRange 问题，导致我的应用程序在 textview 为空时崩溃。我正在使用一个自定义键盘，上面有一个退格按钮，它在这里调用这个代码......

```
if ([self.myChart isFirstResponder]) {
    NSRange currentRange = myChart.selectedRange;
    if (currentRange.length == 0) {
        currentRange.location--;
        currentRange.length++;
    }
    myChart.text = [myChart.text stringByReplacingCharactersInRange:currentRange withString:[NSString string]];
    currentRange.length = 0;
    myChart.selectedRange = currentRange;

    NSLog(@"%d", NSNotFound);
} 
```

如果我在文本视图中有文本，这非常适合一次删除一个字符但是当我到达文本视图的开头并且没有更多字符时，我会得到异常并崩溃......

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFString replaceCharactersInRange:withString:]: Range or index out of bounds' 
```

* * *

我的目标是停止退格功能。我明白它为什么会崩溃，但我不知道如何解决它。我试过用 NSNotFound 评估它，但没有运气。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:05:04.657

您应该检查该字段中是否有文本，即：

```
if ( myChart.text.length > 0 ) 
```

并检查以确保您没有尝试访问位置-1：

```
if ( currentRange.location >= 0 ) 
```

所以你的代码看起来像

```
if ([self.myChart isFirstResponder] && myChart.text.length > 0 ) {
    NSRange currentRange = myChart.selectedRange;
    if (currentRange.length == 0) {
        currentRange.location--;
        currentRange.length++;
    }
    if ( currentRange.location >= 0 )
    {
        myChart.text = [myChart.text stringByReplacingCharactersInRange:currentRange withString:[NSString string]];
        currentRange.length = 0;
        myChart.selectedRange = currentRange;

        NSLog(@"%d", NSNotFound);
    }
} 
```

# c# - 指定的零件在包中不存在

> ID：11212374
> 
> 赞同：5
> 
> 时间：2012-06-26T17:02:03.567
> 
> 标签：c#, asp.net, openxml

我有以下代码：

```
using (var doc = WordprocessingDocument.Open(filename, true))
{
    ....
} 
```

其中字符串文件名是 docx 文件的有效路径。

但是调用 Open 会导致以下 InvalidOperationException：`Specified part does not exist in the package.`

**编辑：**我认为问题是由于我试图打开的 docx 文件无效，所以我将发布 xml：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<w:document xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" xmlns:v="urn:schemas-microsoft-com:vml" xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" xmlns:w10="urn:schemas-microsoft-com:office:word" xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape" mc:Ignorable="w14 wp14">
    <w:body xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main">
        <w:p w:rsidRPr="005501CD" w:rsidR="00217D87" w:rsidP="005501CD" w:rsidRDefault="005501CD">
            <w:r>
                <w:t xml:space="preserve">Hello </w:t>
            </w:r>
            <w:r>
                <w:rPr>
                    <w:noProof />
                </w:rPr>
                <w:t>John</w:t>
            </w:r>
            <w:r>
                <w:t xml:space="preserve"> </w:t>
            </w:r>
            <w:r>
                <w:rPr>
                    <w:noProof />
                </w:rPr>
                <w:t>Smith</w:t>
            </w:r>
            <w:r>
                <w:t>,</w:t>
            </w:r>
            <w:bookmarkStart w:name="_GoBack" w:id="0" />
            <w:bookmarkEnd w:id="0" />
        </w:p>
        <w:sectPr w:rsidRPr="005501CD" w:rsidR="00217D87">
            <w:pgSz w:w="11906" w:h="16838" />
            <w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="708" w:footer="708" w:gutter="0" />
            <w:cols w:space="708" />
            <w:docGrid w:linePitch="360" />
        </w:sectPr>
    </w:body>
</w:document> 
```

其他 docx 文件可以正常打开，但我怀疑我的邮件合并代码中的错误导致生成无效的 docx 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:42:25.157

事实证明，问题是由于缺少 xml 文件。如果其他人遇到类似问题，请检查以下内容：

1.  将 yourfile.docx 重命名为 yourfile.zip
2.  提取 zip 文件并查看名为`[Content-Types].xml`
3.  检查`[Content-Types].xml`您的 zip 文件中是否存在列出的所有 xml 文件。

就我而言，我的`[Content-Types].xml`文件中有以下行：

```
<Override PartName="/word/recipientData.xml" ContentType="application/vnd.ms-word.mailMergeRecipientData+xml"/> 
```

但我错过`recipientData.xml`了 word 目录中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-03T16:20:53.200

在您在上面发布的 XML 中，您缺少`</w:document>`结束标记。这将导致找不到文档部分，这可能是您看到该错误消息的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-20T14:17:09.407

就我而言，我添加了一个 .png 媒体，但未在以下行中添加以下行`[Content_Types].xml`：

```
<Default Extension="png" ContentType="image/png"/> 
```

# android - 外部-内部存储

> ID：11212377
> 
> 赞同：6
> 
> 时间：2012-06-26T17:02:17.407
> 
> 标签：android

在android中，不可移动（内部）的外部存储和内部存储有什么区别？我不确定在哪里保存我的数据。我只需要保存一个人可以随时拉取的游戏统计数据

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T17:16:52.317

在许多较新的设备中，将不再存在物理区别，“内部”和“外部”存储共享相同的闪存芯片，甚至不一定具有固定分配，因此差异实际上仍然是预期访问范式之一。

外部存储上的文件（真实的或模拟的）不可避免地与所有东西共享，并且可以被任何具有该清单权限的东西修改。传统上，它们很容易看到，尽管使用最近的 MTP 访问设备，系统可能需要在连接的 PC 看到它们之前被告知它们。

相反，内部存储上的文件对应用程序来说是私有的，除了以 root 或系统运行的任何文件，或者如果应用程序决定让它们通常可见或可更改。即使可以访问，内部存储上的数据也可能更难以在拥有的应用程序之外访问 - 它不受面向消费者的 USB 大容量存储或 MTP 机制的支持，即使对于其他应用程序和开发工具，也很难找到它，除非您知道在哪里查看，因为虽然您可以检查应用程序选择共享的文件夹，但您无法浏览父文件夹（通常是 /data 或 /data/app）。

您的决策过程可能应该是这样的：它是否意味着对拥有的应用程序是私有的？如果是这样，请将其放在内部存储上，除非它太大并且针对旧设备，在这种情况下，您可能需要在放置到外部存储之前对其进行加密和/或签名以进行保护。否则，如果要共享，需要交给任意其他组件（电子邮件应用程序等），或者很大，请将其放在外部存储上。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T17:05:41.417

> 在android中，不可移动（内部）的外部存储和内部存储有什么区别？

外部存储从不意味着可移动。它始终意味着“用户可以通过插入 USB 电缆并将其作为驱动器安装在主机上来访问”。早期的 Android 设备*碰巧*有可移动的外部存储，但这从来都不是定义。

内部存储是用户无法访问的存储，除非通过已安装的应用程序（或通过植根他们的设备）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T10:26:46.150

如果您担心外部存储（SD 卡），除了克里斯的回答之外，您可以在每次加载应用程序时简单地检查一下，然后相应地提取相关信息。

你可以使用这样的东西：

```
if(isSDPresent)
{
    // SD Card is present
    // Your code goes here, files will be located @ /mnt/sdcard/Android/data/packagename
}
else
{
    // SD Card is not presenet
    // files located here /data/data/packagename
} 
```

如果您在模拟器上进行测试，您可以加载 DDMS 并找到存储在 revlent 位置的所有文件。

希望这可以帮助。

# c++ - 关于值类和向量的问题

> ID：11212379
> 
> 赞同：0
> 
> 时间：2012-06-26T17:02:17.920
> 
> 标签：c++

更多 C++ 学习问题。我一直在使用带有原始指针的向量并取得了一定程度的成功，但是，我一直在尝试使用值对象来代替。我遇到的第一个问题通常是编译错误。编译以下代码时出现错误：

```
class FileReference {

    public:
        FileReference(const char* path) : path(string(path)) {};
        const std::string path;

};

int main(...) {

    std::vector<FileReference>  files;

    // error C2582: 'operator =' function is unavailable in 'FileReference'
    files.push_back(FileReference("d:\\blah\\blah\\blah"));

} 
```

Q1：我假设这是因为以某种方式指定了 const 路径和/或未定义赋值运算符 - 为什么默认运算符不起作用？即使我假设这是因为我定义了一个 const 路径，是否在我的对象上定义 const ， const 甚至在这里为我赢得了什么？

Q2：其次，在这些值对象的向量中，我的对象是内存安全的吗？（意思是，它们会被我自动删除）。[我在这里](https://stackoverflow.com/questions/1598397/array-of-objects-on-stack-and-heap)读到，默认情况下向量被分配给堆——这是否意味着我需要“删除”任何东西。

Q3：第三，为了防止整个向量的复制，我必须创建一个将向量作为参考传递的参数，例如：

```
// static
FileReference::Query(const FileReference& reference, std::vector<FileReference>& files) {
    // push stuff into the passed in vector
} 
```

当函数死亡时，返回我不想死的大对象的标准是什么。我会从在这里使用 shared_ptr 或类似的东西中受益吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:04:38.573

1.  如果任何成员变量为`const`，则无法创建默认赋值运算符；编译器不知道你想要发生什么。您必须编写自己的运算符重载，并弄清楚您想要什么行为。（出于这个原因，`const`成员变量通常没有人们最初想象的那么有用。）

2.  只要您不拥有原始内存或其他资源的所有权，就没有什么需要清理的。A`std::vector`在其生命周期结束时总是正确地删除其包含的元素，只要它们反过来总是正确地清理自己的资源。在您的情况下，您唯一的成员变量是 a `std:string`，它也会照顾自己。所以你是完全安全的。

3.  您*可以*使用共享指针，但除非您在此处进行分析并确定瓶颈，否则我不会担心。特别是，您应该阅读有关[*复制省略*](http://en.wikipedia.org/wiki/Copy_elision)的内容，编译器可以在许多情况下执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:05:50.383

中的元素`vector`必须可从C++ 标准的*第 23.2.4 节类模板向量中分配：*

> ...存储的对象应满足Assignable的要求。

拥有一个`const`成员会使该类不可分配。

由于元素是按值存储的，因此当向量被销毁或从向量中删除时，它们将被销毁。如果元素是原始指针，那么它们必须是显式的`delete`d。

# sql - 测量两个 Lat/Lng 点之间的距离

> ID：11212381
> 
> 赞同：5
> 
> 时间：2012-06-26T17:02:25.440
> 
> 标签：sql

我在尝试通过 SQL 语句将最近的位置返回给用户时遇到问题。为了测试我使用完全相同的坐标，这就是我所拥有的：

**SQL：**

```
SELECT  `companies`.`customerName` , 
    (3959 * 
        ACOS(
            COS(
                RADIANS(37.367485) * COS(RADIANS(`locations`.`gps_lat`)) * 
                COS(
                    RADIANS(`locations`.`gps_lng`) - RADIANS(-77.399994) + 
                    SIN(RADIANS(37.367485)) * SIN(RADIANS(`locations`.`gps_lat`))
                )
            )
        )
    )
AS  `distance` 
FROM  `locations` 
JOIN  `companies` ON  `locations`.`co_id` 
HAVING  `distance` > 25
ORDER BY distance
LIMIT 0 , 10 
```

**结果：**

```
| customerName  | distance           |
| SOME COMPANY  | 1914.41747964854   | 
```

`locations` **表值：**

```
gps_lat   | gps_lng
37.367485 | -77.399994 
```

我使用了[谷歌](https://developers.google.com/maps/articles/phpsqlsearch#findnearsql)的例子，我检查了几次公式，我似乎无法想出哪里出错了。任何帮助表示赞赏。

* * *

编辑：
因为我知道自己在做什么似乎有些困惑：

被`>`替换以产生结果，`1914`显然大于`25`。

这个应用程序将用户坐标从 Android 应用程序传递到我们的 Web 服务器。纬度和经度将从我们的网络服务器 MYSQL 数据库中的公司的值中提取`$_GET`并交叉引用。

**上面的语法只是我在 Mysql Workbench 中检查我的 SQL 语句。显然我正在寻找一个零值的结果。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T20:33:44.660

我想我已经通过将 Google 的示例更改为“被收养的 yooper 的冒险”提供的公式解决了这个问题。使用他/她的[Haversine 公式](http://sgowtham.net/blog/2009/08/08/mysql-finding-locations-nearest-to-a-given-pair-of-gps-coordinates/)版本。
*注意：上面的 Google 示例也使用了 Haversine。*

**SQL：**

```
SELECT  `companies`.`customerName` , 
(2 * (3959 * ATAN2(
          SQRT(
            POWER(SIN((RADIANS(37.367485 - `locations`.`gps_lat` ) ) / 2 ), 2 ) +
            COS(RADIANS(`locations`.`gps_lat`)) *
            COS(RADIANS(37.367485 )) *
            POWER(SIN((RADIANS(-77.399994 - `locations`.`gps_lng` ) ) / 2 ), 2 )
          ),
          SQRT(1-(
            POWER(SIN((RADIANS(37.367485 - `locations`.`gps_lat` ) ) / 2 ), 2 ) +
            COS(RADIANS(`locations`.`gps_lat`)) *
            COS(RADIANS(37.367485)) *
            POWER(SIN((RADIANS(-77.399994 - `locations`.`gps_lng` ) ) / 2 ), 2 )
          ))
        )
      ))
AS 'distance'
FROM  `locations` 
JOIN  `companies` ON  `locations`.`co_id` 
HAVING  distance < 25
ORDER BY distance
LIMIT 0 , 10 
```

* * *

对于那些对我的应用程序感到好奇的人，Final PHP：

获取值：`?lat=37.367485&lng=-77.399994`

```
$earth_radius_miles = 3959; // Earth radius in miles
$earth_radius_kilometers = 6371; // Earth radius in kilometers
$result_radius = 10000; // Maximum distance in either miles or kilometers

$get_lat = $_GET["lat"];
$get_lng = $_GET["lng"];

$dbSelect = mysql_query("SELECT  `companies`.`customerName`,
(2 * (".$earth_radius_miles." * ATAN2(
          SQRT(
            POWER(SIN((RADIANS(".$get_lat." - `locations`.`gps_lat` ) ) / 2 ), 2 ) +
            COS(RADIANS(`locations`.`gps_lat`)) *
            COS(RADIANS(".$get_lat.")) *
            POWER(SIN((RADIANS(".$get_lng." - `locations`.`gps_lng` ) ) / 2 ), 2 )
          ),
          SQRT(1-(
            POWER(SIN((RADIANS(".$get_lat." - `locations`.`gps_lat` ) ) / 2 ), 2 ) +
            COS(RADIANS(`locations`.`gps_lat`)) *
            COS(RADIANS(".$get_lat.")) *
            POWER(SIN((RADIANS(".$get_lng." - `locations`.`gps_lng` ) ) / 2 ), 2 )
          ))
        )
      ))
AS 'distance'
FROM  `locations` 
JOIN  `companies` ON  `locations`.`co_id` 
HAVING  distance < ".$result_radius."
ORDER BY distance
LIMIT 0 , 10") 
or die(mysql_error()); 
```

**结果：**

```
[{"customerName":"SOME COMPANY","distance":"0"}] 
```

我已经用其他坐标测试了这些结果，并且似乎运行良好。尚未测试两点之间距离很远的任何东西，但我的应用程序不需要我这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T21:22:37.633

Ashok，您可以使用以下公式计算两个坐标之间的距离：

![在此处输入图像描述](../Images/3fd7dc2ae4a2de30f31865e903f9bd44.png)

在哪里

```
R  =  radius of the earth (6,371 km)
Δlat =  |lat2- lat1|
Δlong = |long2- long1| 
```

# knockout.js - 如何使用 KnockOut JS 进行动态绑定？

> ID：11212382
> 
> 赞同：6
> 
> 时间：2012-06-26T17:02:30.483
> 
> 标签：knockout.js

我正在尝试建立一个类似于此操作的视图：

![在此处输入图像描述](../Images/6ba7e7b7413c385ee0bd93d20a9f690b.png)

用户选择一个父母，然后所有的孩子都显示在下面，然后他们可以在其中编辑孩子的信息。

我想知道的是，当用户在父网格上选择新父时，动态更改子网格绑定的正确方法是什么。

我的 ko js 形式的视图模型现在看起来像这样：

```
function ViewModel(viewModelFromServer) {

  var self = this;

  self.parents = ko.observableArray(convertToKOParents(viewModelFromServer.Parents));

  self.activeChildren = ko.observableArray([]);

  self.changeParent(newParent){
    self.activeChildren = newParent.children;
  }
}

function Parent(serverParent) {

  var self = this;

  self.name = ko.observable(serverParent.Name);
  self.children = ko.observableArray(convertToKOChildren(serverParent.Children);

  self.childCount = ko.computed(function() {
    return self.children.length;
  });
}

function Child(serverChild) {

  var self = this;

  self.name = ko.observable(serverChild.Name);
  self.Age = ko.observable(serverChild.Age);
  self.Height = ko.observable(serverChild.Height);
} 
```

现在，当用户单击父行时，我想将 activeChildren 切换到新的父行，但绑定不会自动应用。

这是处理这种视图模型的正确方法吗？我应该以不同的方式来做吗？如果是这样，该视图模型会是什么样子？当父级更改时，如何让子网格正确绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:05:52.187

您可以拥有 activeParent 并绑定到它的孩子，而不是拥有 activeChildren：

```
<div data-bind="with: activeParent">
    <table>
        <tbody data-bind="foreach: children">
        </tbody>
    </table>
</div> 
```

而且由于 activeParent 将是一个可观察的，你只需调用它并且不需要 changeParent 函数：

```
self.activeParent = ko.observable(); 
```

改变：

```
viewModelVariable.activeParent(newParent); 
```

另外我认为您的 childCount 计算需要通过调用访问底层数组`children()`：

```
self.childCount = ko.computed(function() {
    return self.children().length;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:44:44.793

我将使当前子项成为一个计算值，该值返回所选父项的子项属性。像这样的东西：

```
function ViewModel(viewModelFromServer) {
  var self = this;
  self.parents = ko.observableArray(convertToKOParents(viewModelFromServer.Parents));

  self.activeChildren = ko.computed(function() {
      return self.activeParent.children
  });
  self.activeParent = ko.observable()
  self.changeParent(newParent){
      self.activeParent(newParent)
  }

} 
```

如果您在没有像 convertToKOParents 这样的环境函数的情况下设置 jsfiddle，我可以更清楚地演示它。

# python - 由读取泡菜文件的函数检索的字典引发 KeyError

> ID：11212387
> 
> 赞同：0
> 
> 时间：2012-06-26T17:02:49.470
> 
> 标签：python, dictionary, pickle

我所拥有的是 3 个字典与 pickle 一起转储到 3 个不同的文件。我最初只是为每个文件编写了一个读写函数，所以总共有 6 个函数。所以昨晚我试着做到了，所以我只需要使用 1 个读取功能和 1 个写入功能。我得到了写功能，但读功能没有。自昨晚以来，我一直在寻找解决此问题的方法，但我受够了，因此您可以提供任何帮助，我将不胜感激。如果你不知道，我是编程/python 的新手。这是我正在使用的代码：

```
w = {} # would be past in as source

def writing(filename, source): 
    with open(filename, 'wb') as st:
        pickle.dump(source, st)

def reading(filename, source):
    with open(filename, 'rb') as st:
        source = pickle.loads(st.read())

reading('test.txt', w) 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "./database.py", line 303, in <module>
   pw.check_pwd(p)
  File "./database.py", line 47, in check_pwd
    if self.pwds[self.user] == hashlib.sha512(self.pwd + self.salt).hexdigest():
KeyError: 'Codex' this was the error I was getting sorry for the bad post 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:04:26.910

您需要`return source`在第二个功能中：

```
def reading(filename, source):
    with open(filename, 'rb') as st:
        source = pickle.loads(st.read())
    return source 
```

否则 Python 将默认不返回任何内容 ( `None`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:14:14.377

我不知道你在尝试什么问题，但我非常有信心你想要全局`w`变量中的 unpickling 的结果，对吧？好吧，你不能这样做：当你将一个值赋予`source`变量时，你只更新了局部变量`source`，但变量`w`仍然指向相同的值。也许[这个答案](https://stackoverflow.com/questions/10748158/why-does-the-operator-not-change-a-list-while-append-does/10748191#10748191)可以帮助您了解正在发生的事情。

有各种解决方案。我最喜欢的之一是@katrielatex 之一：返回值：

```
def reading(filename, source):
    with open(filename, 'rb') as st:
        source = pickle.loads(st.read())
    return source
w = reading(filename, w) 
```

实际上，您甚至不需要`source`参数：

```
def reading(filename):
    with open(filename, 'rb') as st:
        source = pickle.loads(st.read())
        return source

w = reading(filename) 
```

另一种解决方案是[更新](http://docs.python.org/library/stdtypes.html#dict.update)`source`. 在这种情况下，不需要返回：

```
def reading(filename, source):
    with open(filename, 'rb') as st:
        source.update(pickle.loads(st.read()))

reading(filename, w) 
```

此外，您可以`w`在函数内部创建一个全局变量（但这是最糟糕的解决方案）：

```
def reading(filename):
    global w
    with open(filename, 'rb') as st:
        w = pickle.loads(st.read())

reading(filename) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:15:08.693

如果你确定你会得到一个字典，你`reading()`也可以像

```
def reading(filename, source):
    with open(filename, 'rb') as st:
        tmp = pickle.loads(st.read())
    source.update(tmp) 
```

但是，老实说，[`return`katrielalex 的解决方案](https://stackoverflow.com/a/11212408/296974)更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:20:09.337

读取函数只需要一个文件名，它应该返回一些东西：

```
def save(filename, data): 
    with open(filename, 'wb') as f:
        pickle.dump(data, f)

def load(filename):
    with open(filename, 'rb') as f:
        return pickle.load(f) 
```

例子：

```
save('data.pickle', [a, b, c])
a, b, c = load('data.pickle') 
```

# linux - Linux socket使用多线程发送

> ID：11212390
> 
> 赞同：6
> 
> 时间：2012-06-26T17:03:01.367
> 
> 标签：linux, sockets, pthreads

我有一个非阻塞套接字将 udp 数据包发送到多个目标，并在同一个套接字上接收来自所有目标的响应。我正在一个专用线程中阅读，但写入（sendto）可以来自几个不同的线程。

这是一个没有任何额外同步的保险箱吗？我需要在持有互斥锁时写吗？或者，写入是否需要来自同一个线程并且我需要一个队列？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T17:36:33.173

内核将为您同步对底层文件描述符的访问，因此您不需要单独的互斥锁。如果您使用 TCP，这种方法会出现问题，但由于我们谈论的是 UDP，这应该是安全的，尽管不一定是最好的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T17:20:17.213

您可以从单个或多个线程写入套接字。如果您从多个线程写入套接字，它们应该与互斥锁同步。相反，如果您的线程将它们的消息放在队列中并且单个线程从队列中拉出以执行写入，则对队列的读取和写入应该受到互斥锁的保护。

从不同线程读取和写入同一个套接字不会相互干扰。

# java - 如何读取文本文件中字符串数据的特定位置

> ID：11212393
> 
> 赞同：2
> 
> 时间：2012-06-26T17:03:16.480
> 
> 标签：java, file, csv, filereader

我正在处理一个包含多达一千行的文本文件。一个文本文件中有多个页眉和页脚。所以我不需要处理包含@h 和@f 的行。它告诉我事务的开始和结束（数据库事务，我将在一个事务中将这些记录保存到数据库）。

示例记录如下。尽管行数达到一千行，列数达到 40 列。从每一行我只寻找一个特定的数据，即（例如，我需要从位置 8 到 30 获取名称，从位置 60 到 67 等等）。这个位置可能是下一个空格或字符串之间。所以我不想将每一行的数据放入缓冲区/内存来处理它，因为我只对其中的几个感兴趣。CSV 文件是否允许从一行中的特定位置获取数据？我应该使用什么来获得更好的性能（在不占用太多内存的情况下尽快处理数据。）？**我正在使用 Java**

```
@h Header
@074VH01MATT    TARA   A5119812073921 RONG HI  DE BET IA76200  201108222   0500  *
@074VH01KAYT    DJ     A5119812073921 RONG DED CR BET IA71200  201108222   0500  *
@f Footer

@h Header
@074VH01MATT    TARA   A5119812073921 RONG HI  DE BET IA76200  201108222   0500  *
@074VH01KAYT    DJ     A5119812073921 RONG DED CR BET IA71200  201108222   0500  *
@f Footer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:23:32.407

这是我的解决方案：

```
import java.io.*;
class ReadAFileLineByLine 
{
 public static void main(String args[])
  {
  try{
    FileInputStream fstream = new FileInputStream("textfile.txt");
    BufferedReader br = new BufferedReader(new InputStreamReader(fstream));
    String strLine;
    //Loop through and check if a header or footer line, if not
    //equate a substring to a temp variable and print it....
    while ((strLine = br.readLine()) != null)   {
      if (!(strLine.charAt(1) == "h" || strLine.charAt(1) == "f"))
        String tempName = strLine.substring(8,31);
      System.out.println(tempName);
    }
    //Close the input stream
    in.close();
  } catch (Exception e) {
      e.printStackTrace();
    }
  }
} 
```

你在找这样的东西吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:56:56.497

使用[BufferedReader](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)，这样它就不会保存从[InputStreamReader](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)构造的内存中的所有内容，因此您可以指定字符集（正如[FileReader](http://docs.oracle.com/javase/6/docs/api/java/io/FileReader.html)的 JavaDoc所说的那样） - 我下面的示例使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)假设文件采用相同的编码。

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

public class StringData {
    public static void main(String[] args) throws Exception {
        BufferedReader br = null;
        try {
            // change this value
            FileInputStream fis = new FileInputStream("/path/to/StringData.txt");
            br = new BufferedReader(new InputStreamReader(fis, "UTF-8"));
            String sCurrentLine;
            while ((sCurrentLine = br.readLine()) != null) {
                processLine(sCurrentLine);
            }
        } finally {
            if (br != null) br.close();
        }
    }

    public static void processLine(String line) {
        // skip header & footer
        if (line.startsWith("@h Header") || line.startsWith("@f Footer")) return;

        String name = line.substring(8, 22);
        String year = line.substring(63, 67);

        System.out.println("Name [" + name + "]\t Year [" + year +"]");
    }
} 
```

输出

```
Name [MATT    TARA  ]    Year [2011] 
Name [KAYT    DJ    ]    Year [2011] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:15:38.557

我认为 CSV 不是必须的，您如何逐行或一次全部读取文件？我会逐行进行，这样，读取每一行的内存成本并不高（一次只有一行）。您可以在线使用正则表达式并仅获取您需要的组（使用模式和匹配器）来帮助准确提取您需要的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:52:33.617

不用担心内存；您可以将整个文件放在一个 char 数组中，而不会引起任何人的注意。CSV 文件很麻烦，不会为您做任何事情。只需将每一行读入一个缓冲区——一个字符串、字符或字节数组——然后从中获取你需要的东西；固定的定位使它变得容易。

通常，内存和时间之间存在权衡。我发现大缓冲区，比如 100Kb 到超过 1Mb，而不是 10Kb，可以将你的速度提高 5 到 10 倍。（如果重要的话，用各种大小自行测试。如果我理解你的话，你说的是 40Kb，所以不需要比这更大的缓冲区。（如果它是 40 *Mega* b 然后进行测试。即使是 40Mb 阵列不会伤害你，但现在你*开始*浪费内存了。））在继续做其他工作之前，一定要关闭文件并释放对文件类的引用，这样你的缓冲区等就不是内存了泄漏。

# php - 使用 AJAX 帖子在滚动时从 MySQL 加载内容

> ID：11212396
> 
> 赞同：2
> 
> 时间：2012-06-26T17:03:30.327
> 
> 标签：php, jquery, mysql, ajax

我的网站有一段需要在用户到达底部时动态加载内容。我正在使用 jQuery，这是检测滚动的代码：

```
$(document).ready(function() { 
    $(window).scroll(function() {
        if($(window).scrollTop() + $(window).height() == $(document).height()) {
        alert("Bottom reached");
            $('div#loadMoreComments').show();
            dataStr = "from=" + $(".n:last").attr('id')
            $.ajax({
                type: "POST",
                url: "ajax/query.php",
                data: dataStr,
                success: function(html) {
                    if(html){       
                        $("#hold").append(html);
                        alert("Data was added");
                    }
                    else{       
                        $('div#loadMoreComments').replaceWith("<center><h1 style='color:red'>End of countries !!!!!!!</h1></center>");
                        alert("Data was not added");
                    }
                }
            });
        }
    });
}); 
```

我遇到的第一个问题是只有当用户到达页面顶部时才会检测到滚动到底部。第二个问题是它根本没有加载任何内容，因为变量似乎没有发布，这是我在query.php中的代码：

```
if(array_key_exists('from', $_POST)) {
    $from = htmlspecialchars(stripslashes(mysql_real_escape_string($_POST['from'])));
    $to = 15;
    $re = ("SELECT status as status, sid as sid, UNIX_TIMESTAMP(timestamp) as timestamp FROM mingle_status WHERE uid = '$uid' ORDER BY timestamp DESC LIMIT $from,$to"); //query
  }
  else {
    $re = ("SELECT id as id, status as status, sid as sid, UNIX_TIMESTAMP(timestamp) as timestamp FROM mingle_status WHERE uid = '$uid' ORDER BY timestamp DESC LIMIT 1"); //query
  }
  $result = mysql_query($re) or die (mysql_error());
  while($st = mysql_fetch_assoc($result)) {
    $status = nl2br($st['status']);
    $sid = $st['sid'];  
    $td = $st['timestamp'];
    $id = $st['id'];
    ?>
        <div id="<?php echo $id; ?>" class="id">
            <!-- stuff -->
        </div>
    <?php
    }
    ?> 
```

和错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '",15' at line 1 
```

如果有人能帮我解决这个问题，那就太好了，我将不胜感激。

**编辑：**好的，我现在可以生成一个 div，但只有当我滚动到页面顶部时，它只附加一个 div，如果我再次滚动到顶部，它会附加完全相同的 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:14:51.880

这是错误的：

```
$from = htmlspecialchars(stripslashes(mysql_real_escape_string($_POST['from']))); 
```

如果`from`应该是整数，只需使用：

```
$from = (int) $_POST['from']; 
```

我还看到该数字来自 html 中的 id 并且 ids 不能以数字开头。

**编辑：**另一个问题是您没有在 sql 查询中选择 ID（如果`from`存在），即使您会这样做，这种方法在将来删除记录并且您的 ID 不再连续时也会导致问题。

关于第一个问题，我可以在萤火虫更改中解决：

```
 if($(window).scrollTop() + $(window).height() == $(document).height()) { 
```

到：

```
 if( ($(window).scrollTop() + $(window).height()) > ($(document).height() -  10) ) { 
```

**编辑 2：**要解决您的非顺序 ID 问题，最简单的方法是`from`使用以下方法在 javascript 中进行计算：

```
dataStr = "from=" + $(".n").length;    // just count the number of elements you are showing already 
```

# java - Java 自定义类加载器获取资源

> ID：11212404
> 
> 赞同：0
> 
> 时间：2012-06-26T17:04:01.510
> 
> 标签：java, jar, classloader

> **可能重复：**
> [使用自定义类加载器加载资源包](https://stackoverflow.com/questions/7923164/loading-resource-bundles-using-a-custom-class-loader)

我制作了一个自定义类加载器，它从我的网站下载一个 jar，然后运行它。问题是：我的（下载的）jar 需要一些资源，例如 png 图像等...

如果我直接在命令提示符下运行我的（下载的）jar，它就可以工作。资源是这样加载的：

```
getClass().getResource("/images/logo.png") 
```

现在，如果我使用自定义类加载器运行它，请使用：

```
Class<?> c = classLoader.loadClass("MainClass");
c.getMethod("main", new Class[] { java.lang.String[].class}).invoke(null, new Object[]{new String[] {"arg1_goes_here"}}); 
```

我得到一个空异常，因为它无法加载资源。

当我将 jar 文件加载到内存中时，我会执行以下操作：

```
String name = entry.getName();
if(name.endsWith(".class")) {
    name = name.substring(0, name.length() - 6).replace('/', '.');
    classbytes = getResourceData(input);
    classes.put(name, classbytes);
} else {
    classbytes = getResourceData(input);
    if (name.charAt(0) != '/') {
        name = "/" + name;
    }
    resources.put(name, classbytes);
} 
```

我正在使用以下方法加载我的课程：

```
defineClass(classToLoad, buffer, 0, buffer.length, null); 
```

其中`buffer`是包含代码的字节数组。

所以我的问题如下：Java中有一种defineResource()吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:18:02.203

问题解决了，

我写了我自己的方法`public InputStream getResourceAsStream(String name)`。

这是代码：

```
public InputStream getResourceAsStream(String name)
{
    byte[] buffer = resources.get(name);
    return new ByteArrayInputStream(buffer);
} 
```

`resources`是一个包含我的资源数据的地图。

然后，在我的代码中，我可以使用输入流来取回我的资源。简单安全。

# azure - 为什么 WAIISHost 会锁定某些文件

> ID：11212405
> 
> 赞同：2
> 
> 时间：2012-06-26T17:04:05.843
> 
> 标签：azure, castle-windsor, webdeploy, nancy

我正在将 Web 应用程序部署到 azure。该应用程序是使用 Nancy 构建的，并且没有定义 RoleEntryPoint（请注意这不是问题，网站本身运行良好）。当我部署到 azure 时，我启用了 Web 部署选项。

当我尝试运行 webdeployment 时，出现以下错误：

> 错误 7 Web 部署任务失败。（（2012 年 6 月 26 日下午 12:28:45）在远程计算机上处​​理请求时出错。）
> 
> (6/26/2012 12:28:45 PM) 在远程计算机上处​​理请求时出错。处理“Castle.Windsor.dll”上的“创建文件”操作时遇到错误。错误代码为 0x80070020。该进程无法访问“E:\approot\bin\Castle.Windsor.dll”，因为它正被另一个进程使用。

我已经 RDP'd 进入角色实例并使用流程资源管理器我看到 WAIISHost 锁定了我的项目引用的许多程序集。

我无法确定是什么导致这些文件被锁定。

谢谢，杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:28:54.253

**Web Deploy 不适用于生产环境。**（[这里描述](http://msdn.microsoft.com/en-us/library/windowsazure/ff683672.aspx)）

WaIisHost.exe 是完整 IIS Web 角色的角色软管进程，因此当您的 Web 角色启动时，您的角色 DLL 会在此进程中加载​​。在您的 webrole 的生命周期中，角色 dll 被加载到主机进程中并且无法更改。由于 Castle.Windsor.dll 位于角色特定 DLL 所在的 E:\approot\bin* 中，因此宿主进程已在其中加载了此二进制文件。

如果您想更新您需要的 Web 角色，您可以从门户或 powershell 选择 Windows Azure 升级选项。

# .net - .NET 设计指南是否建议返回 List 超过 IEnumerable ?

> ID：11212410
> 
> 赞同：13
> 
> 时间：2012-06-26T17:04:29.237
> 
> 标签：.net, collections

背景：我给我的同事发了一封电子邮件，告诉他们`Enumerable.Empty<T>()`作为一种返回空集合的方法，而不做类似`return new List<T>();`我收到回复说缺点是它不公开特定类型的事情：

> 这确实提出了一个小问题。尽可能具体地说明您的返回类型总是好的*（因此，如果您要返回 List<>，请将其设为您的返回类型）；那是因为像列表和数组这样的东西有额外的有用的方法。此外，在使用来自调用方法的集合时，它还有助于考虑性能。
> 
> 不幸的是，下面的技巧迫使您返回一个 IEnumerable，它尽可能地不具体，对吧？:(
> 
> * 这实际上来自 .NET 设计指南。我相信，指南中陈述的原因与我在这里提到的相同。

这似乎与我所学到的完全相反，并且尽我所能尝试，我在设计指南中找不到这个确切的建议。我确实找到了这样的一小块：

> **一定**要返回一个非常常用的方法和属性的子`Collection<T>`类。`ReadOnlyConnection<T>`

后面有一个代码片段，但根本没有更多理由。

* * *

话虽如此，这是一个真实且被接受的指导方针（第一个块引用中描述的方式）吗？还是被误解了？我能找到的所有其他 SO 问题都有首选`IEnumerable<T>`作为返回类型的答案。也许最初的 .NET 指南已经过时了？

或者，也许它不是那么清楚？是否有一些权衡需要考虑？什么时候返回更具体的类型是个好主意？是否曾建议返回一个具体的泛型类型，或者只返回一个更具体的接口，如`IList<T>`and `ReadOnlyCollection<T>`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T17:10:34.017

两种风格都有原因：

1.  **具体**一点：您向调用者保证您将始终返回此类型。即使您的实施发生变化。你能信守诺言吗？如果是，请具体说明让来电者受益。更多派生类型具有更多特性。
2.  **通用**：如果您可能更改相关方法或属性的底层实现，*则不能*承诺`List<T>`. 也许您可以承诺一个`IList<T>`或自定义集合类（您可以稍后更改）。

.NET 框架 BCL 与数组或自定义集合类一起使用。他们需要提供 100% 稳定的 API，所以他们需要小心。

在普通软件项目中，您可以更改调用者（.NET 框架的人不能），因此您可以更加宽容。如果你承诺太多，并且需要在一年后改变它，你可以做到（付出一些努力）。

只有一件事总是错误的：说一个人应该*总是*做（1）或（2）。总是总是错的。

下面是一个例子，说明特异性显然是正确的选择：

```
 public static T[] Slice<T>(this T[] list, int start, int count)
    {
        var result = new T[count];
        Array.Copy(list, start, result, 0, count);
        return result;
    } 
```

只有一种合理的实现可能，所以我们可以明确地保证返回类型是一个数组。我们永远不需要返回列表。

另一方面，从某个持久存储中返回所有用户的方法可能会在内部发生很大变化。数据甚至可能比可用内存大，这需要流式传输。我们大概应该选择`IEnumerable<User>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:22:25.967

围绕此类决策的指导方针的问题在于，我们的开发人员很容易盲目地遵循它们，不加思索。我认为应该逐案考虑这些问题，权衡每种情况下不同可能方法的优缺点。

对于返回类型，实际上（至少）有两种看待它的方式。我在 Stack Overflow 上看到的一种哲学通常更喜欢选择更通用的类型，以便为*您*（代码的作者）提供更多的灵活性。例如，如果您编写了一个返回 an 的方法`IList<T>`并且返回值实际上是 a `List<T>`，那么您保留稍后实现您自己的优化数据结构的权利，该结构`IList<T>`在未来的版本中实现并返回它。

一个不同但在我看来同样有效的替代哲学是返回更多通用类型只会使您的库变得不那么有用，因此您应该返回更*具体的*类型。例如，一直积极返回`IEnumerable<T>`将导致您的库的最终用户不断调用`ToArray()`,`ToList()`等的情况。我相信这是您的同事在他写道“像列表和数组这样的东西有额外的方法时所提出的基本观点很有用。”

我有时会听到后一种方法提倡的措辞类似于“提供的内容要具体，接受的内容要通用”。换句话说，采用通用*参数*但提供特定的*返回值*。不管你是否同意这个原则，至少很容易看出它背后的原因。

无论如何，正如我所说，每个案例的细节都会有所不同。例如，在我的第一个`IList<T>`vs示例中`List<T>`，您可能已经计划实现一个自定义数据结构，只是还没有编写它。在这种情况下，返回 a`List<T>`可能是一个糟糕的选择，因为您已经知道界面会在几周或几个月内有所不同。

另一方面，您可能有一些方法总是返回 a `T[]`，您选择仅将其公开为 a ，`IEnumerable<T>`即使此实现发生变化的可能性非常低。在这种情况下，选择更通用的类型可能在美学上更令人愉悦，但它实际上不可能使任何人受益，实际上剥夺了一个非常有用的功能的结果：随机访问。

因此，这始终是一种权衡，我认为您可以遵循的最佳指导方针是始终考虑您的选择并根据您的判断为相关案例选择最明智的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-14T18:59:41.933

返回 List 而不是 IEnumerable（或至少 IList）本质上违反了[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

返回“List”将您锁定为需要返回该类型，并阻止您将方法的内部重构为可能更有效的实现（您承诺返回 List，但现在您想使用“yield”——哎呀，可以'不要在没有外部代码搅动的情况下这样做）。

在*许多*（大多数？）情况下，这些方法的主要要求是迭代结果并做一些事情...... IEnumerable 完全适合这些用途。

如果用户需要一个可变集，这可以通过使用“ToList()”或另一端的 IEnumerable 上的其他扩展来轻松完成。

希望您公开直接突变的内部列表的代码也可能表明您也违反了封装......当心。我们发现在许多函数式编程语言中发现的越来越多的*不变性*可能是您代码中非常有价值的品质。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:21:49.367

IMO 重要的是要记住这一点`List<T>`并`IEnumerable<T>`具有不同的语义。

返回`IEnumerable<T>`只是给调用者一个可以枚举的东西序列（并且可能变成一个集合）。但是，不能保证序列已经实现。所以返回`IEnumerable<T>`支持延迟执行。此外，它是隐含的“只读”。

返回`List<T>`意味着这里是一个集合。当方法返回时，所有工作都已完成。此外， 的接口还`List<T>`允许调用者立即修改集合。

# perl - 如何使用 Devel::Cover 和证明？

> ID：11212425
> 
> 赞同：8
> 
> 时间：2012-06-26T17:05:17.723
> 
> 标签：perl

我看到这里和[http://www.perlmonks.org](http://www.perlmonks.org)上有一些类似的问题，但我仍然不明白。想象一下，我有一个带有“lib/”和“t”目录的项目。我用“证明”运行我的测试：

```
$ cd $PROJECT_ROOT
$ prove ./*.t 
```

我想为“lib/”目录中的一个或多个文件获取 html 报告。我不想报告“t”目录中的文件。一个简单的例子就足够了。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T17:26:39.507

1.  `perl Makefile.PL`或者`perl Build.PL`
2.  [`cover -test`](http://p3rl.org/cover)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-10T16:09:34.463

正确的方法是始终从 Makefile.PL/Build.PL 开始，正如所选答案所暗示的那样。然而，有时你不是开始的人，所以...

我曾经制作过一个假的makefile：

```
 % cat Makefile
 test:
      prove -Ilib -r t 
```

以下似乎也有效（不接触磁盘上的任何文件）：

```
cover -t -make 'prove -Ilib -r t; exit $?' 
```

这只适用于 perl 的`system`/`exec`处理带有 shell 元字符的参数（`;`在这种情况下），并且如果`cover`决定更严格地引用它，将来可能会中断。它也不应该在windows下工作。我希望`cover`有一个`-prove`选择。

这仍然会为 *.t 以及非标准位置的 CPAN 模块生成覆盖范围。可以使用 +select/+ignore 选项修复此行为（请参阅[Devel::Cover 的手册页](https://metacpan.org/pod/Devel::Cover#SELECTING-FILES-TO-COVER)）：

```
cover -t +select ^lib +ignore ^ 
```

所以 tl;dr "magic" 命令是

```
cover -t +select ^lib +ignore ^ -make 'prove -Ilib -r t; exit $?' 
```

*编辑*以下内容对我不起作用 - 它只打印简短摘要：

```
 PERL5OPT="$PERL5OPT -MDevel::Cover" prove -Ilib -r t
 cover -t +select ^lib +ignore ^ 
```

请注意，它`prove -MSomething`适用`Something`于`prove`自身并且不会传递（与 -I 不同）。

# asp.net-mvc - 经典的 asp 页面发布到 mvc3 控制器操作

> ID：11212429
> 
> 赞同：0
> 
> 时间：2012-06-26T17:05:37.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp-classic

我目前正在将一个经典的 asp 站点与 MVC3 集成。我对集成的某些领域有一些疑问，希望得到一些反馈。

首先，我有一个发布到 MVC 控制器操作的 asp 页面。我几乎没有修改asp页面的余地。我想获取从 asp 页面发布的表单字段并将它们映射到模型对象。发布的值具有模糊的名称，例如我想映射到模型对象上的 Name 属性的“my_name”。最好的方法是通过模型活页夹还是有替代方法？

我的下一个问题是上一个问题的后续，我关心任何跨站点脚本，所以想要检查发布的变量的值是否有效并且不包含奇怪的字符等。MVC3 中是否有内置的东西可以做到这一点盒子外面？

当 asp 页面发布到控制器操作时，我想在控制器操作正在处理时显示一个等待图标，因为控制器操作可能需要 10 秒以上，因为它必须调用外部系统等。因此我不希望发布到看起来像它的悬挂。是否可以连接控制器动作以返回带有等待图标的视图，而动作的主体正在后台处理并且一旦完成重定向到另一个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:34:16.217

> 最好的方法是通过模型活页夹还是有替代方法？

最好的方法是模型粘合剂。您可以使用自定义模型绑定器来处理映射`my_name`到`Name`. 大多数情况下，您应该有一个单独的操作来处理来自经典 asp 的请求，并且您可以将自定义模型绑定器仅链接到此操作。

> MVC3 中是否有内置的东西可以开箱即用？

在 MVC 中默认启用请求验证。因此，如果用户尝试将脚本块发布到操作 MVC 将抛出异常。当然，`ValidateInput(false)`如果需要，您可以通过装饰操作来关闭请求验证。

对于长时间运行的操作，您必须使用[asynccontrollers](http://msdn.microsoft.com/en-us/library/ee728598.aspx)。

# facebook-graph-api - facebook Graph API“/pageid/feed”返回空白

> ID：11212432
> 
> 赞同：2
> 
> 时间：2012-06-26T17:05:42.893
> 
> 标签：facebook-graph-api, feed, facebook-authentication

1) 我设置了我的 Facebook 应用程序。2) 我得到了我的 facebook 页面 id、app_secret 和访问令牌。

```
function fetchUrl($url) {

  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_TIMEOUT, 20);

  $feedData = curl_exec($ch);
  curl_close($ch); 

  return $feedData;

}

$profile_id = "288644066152";

//App Info, needed for Auth
$app_id = "appid";
$app_secret = "app_secret";  // do not expose app secret!

//Retrieve auth token
$authToken = fetchUrl("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={$app_id}&client_secret={$app_secret}");

$json_object = fetchUrl("https://graph.facebook.com/{$profile_id}/feed?{$authToken}");

print_r($json_object); 
```

回报：

```
{"data":[]} 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:16:09.857

有两种类型的访问令牌。用户访问令牌和应用访问令牌。

尝试类似：

```
https://www.facebook.com/dialog/oauth?client_id=******&redirect_uri=*************&scope=user_about_me,publish_stream,friends_about_me,****&state=SOMETHING 
```

# ruby-on-rails - 在咖啡脚本中嵌入红宝石？呈现部分 ajax 成功并附加到正文

> ID：11212433
> 
> 赞同：0
> 
> 时间：2012-06-26T17:05:46.597
> 
> 标签：ruby-on-rails, ajax, coffeescript

我的视图有一个链接（远程：true）到控制器中的“新”操作（HTTP“GET”），它响应一些 JSON 格式的数据......我想使用 AJAX 并让我的咖啡脚本文件附加一个渲染部分 AJAX 成功......

这是代码：

```
$ ->
$('a').click (e) ->
    e.preventDefault()

    url = $(this).attr('href')

    $.ajax
        type: 'get'
        url: url
        dataType: 'json'
        success: (json) ->
            # I want to do something like this:
            $('body').append(render :partial => "questionForm", :locals => {:q_id => json.q_id}) 
```

这显然不是正确的语法......是否可以以某种方式将 ruby​​ 嵌入到我的 js.coffee 中？我已经检查了其他所有内容，如果我只是做类似的事情：

```
$('body').append(json.q_id) 
```

它有效 - 所以 AJAX 调用和“新”操作等似乎都在工作..有什么想法吗？有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:19:53.350

如果您从服务器返回数据，那么您可能想要使用客户端的诱惑系统（handlebars、jquery-templates、eco）来获取 json 数据并将其转换为 HTML。

如果您希望服务器为您呈现 HTML，那么您可以让服务器呈现 HTML 并使用 jquery 附加它。

就像是：

```
<%= link_to "New Model", new_models_path, remote: true, id: "batman" %> 
```

然后在您的 app/models/new.js.erb 中，您将：

```
$("#batman").html("<%= escape_javascript(render partial: "models/form", locals: {model: @model})%>"); 
```

# javascript - 在调用之前从 div 中删除广告标签

> ID：11212435
> 
> 赞同：0
> 
> 时间：2012-06-26T17:05:53.523
> 
> 标签：javascript, jquery, responsive-design

我正在尝试组合一个响应式设计，其中某些广告调用不会在给定的媒体查询中使用。

建议的一种方法是将广告调用放在 div 中，然后如果 window.matchMedia 是给定的大小，则使用 jquery 删除 div 的内容（广告调用）。

所以我把[这个小提琴](http://jsfiddle.net/smlombardi/3zZuH/)放在一起作为概念证明，但是，正如你所看到的，广告无论如何都会被调用。在这里，我根本没有解决媒体查询，只是试图阻止广告调用。

任何人都知道我可以如何实现这一点，或者这个想法有缺陷并且有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:15:11.693

为什么不让广告调用正常触发，然后针对特定媒体查询在容器 div 上设置 display:none：

```
@media only screen and (min-width:0px) and (max-width:319px) { 

.the-ad-i-want-to-hide {display:none;}

} 
```

# makefile - specifying the compiler in a gnu makefile

> ID：11212440
> 
> 赞同：1
> 
> 时间：2012-06-26T17:06:10.523
> 
> 标签：makefile, gnu-make

I have a gnu makefile template that has served me well, but when I try to specify a compiler other than the first g++ in my path, it fails.

Here's the template.

```
CXX = g++
CXXFLAGS = $(INC) $(LIB) -Wall
INC = -I./ -I/usr/local/include
LIB = -L/usr/local/lib
SRCS = \
blah1.cpp
blah2.cpp

OBJS = $(SRCS:.cpp=.o)
DEPS = $(SRCS:.cpp=.d)
PROG = myprog

$(PROG):    $(OBJS)
    $(CXX) $(CXXFLAGS) -o $@ $(OBJS)

%.d: %.cpp
    @set -e; rm -f $@; \
    $(CXX) -MM $(CXXFLAGS) $< > $@.$$$$; \
    sed 's,\($*\)\.o[ :]*,\1.o $@ : ,g' < $@.$$$$ > $@; \
    rm -f $@.$$$$

debug: CXXFLAGS += -O0 -DDEBUG -ggdb
debug: $(PROG)

-include $(DEPS)

.PHONY: clean
clean:
    rm -f $(DEPS) $(OBJS) $(PROG) 
```

When I change the compiler from g++ to something like /usr/local/bin/g++46, it still compiles with g++ (/usr/bin/g++ to be exact). Why?

P.S. Any criticisms with the template are welcome. I'm not very comfortable with gnu make; I just crammed and searched the web for a day to come up with this.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:17:33.120

You haven't specified your own rule for how to build object files, so Make uses [the default implicit rule](http://www.gnu.org/software/make/manual/make.html#Catalogue-of-Rules), which is:

```
$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c 
```

Note `$(CXX)`, not `$(CC)`, which specifies the default *C* compiler.

# c - LEAL 汇编指令有什么作用？

> ID：11212444
> 
> 赞同：27
> 
> 时间：2012-06-26T17:06:29.103
> 
> 标签：c, assembly, x86

我对两者之间的区别有点困惑

```
leal -4(%ebp), %eax 
```

和

```
movl -4(%ebp), %eax 
```

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-26T17:36:35.713

[LEA](http://pdos.csail.mit.edu/6.828/2008/readings/i386/LEA.htm)（加载有效地址）只是计算操作数的*地址*，它实际上并没有取消引用它。大多数时候，它只是为数组索引进行组合乘加之类的计算。

在这种情况下，它进行了简单的数字减法：只需`leal -4(%ebp), %eax`将. 它相当于一条指令，除了 a要求目标与源之一相同。`%eax``%ebp - 4``sub``sub`

`movl`相反，该指令访问位于 的内存位置`%ebp - 4`并将该值存储到`%eax`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-28T16:18:33.800

如果您希望以不同的编程语言来看待这个问题，那么：

```
int var;
[ ... ]
func (var, &var); 
```

评估为以下 (Linux x86_64) 汇编代码：

```
[ ... ]
   4: 8b 7c 24 0c 移动 0xc(%rsp),%edi
   8: 48 8d 74 24 0c lea 0xc(%rsp),%rsi
   d: e8 xx xx xx xx callq ... <func>
[ ... ]
```

由于`%rdi`/`%rsi`是第一个^/第二个^(参数)，您可以看到它`lea ...`检索变量的*地址* `&var`，而`mov ...`加载/存储相同的*值* `var`。

即在汇编中，使用 of`lea`而不是`mov`类似于`&`在 C/C++ 中使用地址运算符，而不是变量本身的（值）。

`lea`用途远不止于此，但您明确询问了两者之间的区别。

举例说明：`mov`内存操作数总是执行内存访问（加载或存储），而内存操作数`lea`仅被视为*指针算术*- 即计算和解析地址，但指令本身不会发生内存访问。这两个：

```
lea 1234(%eax, %ebx, 8), %ecx
movl (%ecx), ecx 
```

结果与以下相同：

```
movl 1234(%eax, %ebx, 8), %ecx 
```

而以下：

```
leal (%eax, %eax, 4), %eax 
```

将值乘以`%eax`五。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T17:16:53.720

等效`LEA`于 Intel 语法，加载有效地址（长？）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-01-15T07:19:03.540

例如，LEA 和 MOV 都可以将带有偏移量的寄存器加载到变量中。

MOV 还可以将内存位置的内容传输到寄存器，LEA 不能。LEA 和 MOV 都可以计算“有效偏移量”，可以更有效地进行数学运算

# javascript - 如何添加一个到包含 iframe 的 jquery ui 对话框

> ID：11212450
> 
> 赞同：0
> 
> 时间：2012-06-26T17:06:37.853
> 
> 标签：javascript, asp.net, iframe, jquery-dialog

这就是我的对话框的生成方式：

```
$(function () {
    $(".btnDialog").click(function() {
        //e.preventDefault();
        var $this = $(this);
        $('<iframe id="PDFDialog"  frameborder="0" src="' + this.href + '" />').dialog({
            title: ($this.attr('title')) ? $this.attr('title') : 'External Site',
            autoOpen: true,
            width: 700,
            height: 600,
            modal: true,
            resizable: true,
            overlay: {
                opacity: 0.5,
                background: "black"
            }
        }).width(650).height(550);
        return false;
    });
}); 
```

我在哪里以及如何添加任何服务器控件，例如`<asp:label runat="server">`和`< asp:button runat="server">`???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:00:41.370

我认为您想要做的是创建一个新的 aspx 页面，例如 Dialog.aspx，并将您的`asp:Label`、`asp:Button`等控件放在该页面上。然后将 iframe 的 src 设置为 aspx 页面：

`$('<iframe id="PDFDialog" frameborder="0" src="Dialog.aspx" />').dialog //...`

# c++ - 为什么通过函数指针调用成员函数时需要“this”前缀？

> ID：11212454
> 
> 赞同：1
> 
> 时间：2012-06-26T17:06:47.493
> 
> 标签：c++, this, member-function-pointers

AFAIK，在 C++ 中，在同一类的函数成员中调用另一个成员函数不应该需要“this”前缀，因为它是隐式的。但是，在使用函数指针的特定情况下，编译器需要它。只有当我通过 func 指针包含调用的“this”前缀时，以下代码才能正确编译 -

当使用函数指针时，编译器可以推断出它指向同一类的成员函数吗？

```
class FooBar 
{
private: 
    int foo;

public:  

    FooBar()
    {
        foo = 100;
    }

    int GetDiff(int bar)
    {
        return abs(foo - bar);
    }

    typedef int(FooBar::*MyFuncPtr)(int); 

    void FooBar::Bar()
    {       
        MyFuncPtr f = &FooBar::GetDiff;
        (this->*f)(10);
        GetDiff(10);
    }

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:10:32.830

这是必需的，因为成员函数指针（与函数指针不同）没有绑定，您可以将它们与不同的对象一起使用。

```
(this->*f)(10);
(foo.*f)(10);
// etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:11:34.157

当您调用实例成员函数时，this 指针被隐式地放入函数参数中。因此，您还需要在`this`通过函数指针调用该函数时指定。

`f`不是类的成员，而是局部变量，您也可以指定另一个实例指针而不是`this`，因此编译器无法推断。成员函数指针与类成员变量相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T18:04:05.143

一个简单的问题是，这是一个语言设计的问题，而语言就是这样设计的。

在成员函数内部，并且为了在编译器遇到标识符时简化*通用*语法，它会从此类（加上参数上的 ADL）开始执行查找，并且如果查找找到此类型的明确非静态成员（或基类型）然后编译器将为您注入`this->`（即应用于`operator->`指针`this`）。

在指向成员的指针的情况下，过程是完全不同的。通过查找找到指针（实际上不是指针，而是为了参数），但您有责任提供将在其上调用它的对象并使用适当的运算符（`.*`用于调用指向成员的指针在引用上，或`->*`在指针上调用成员）。

请注意，被调用的运算符是不同的，并且过程完全不同（在一种情况下查找找到一个成员，在另一种情况下它找到一个恰好是指向成员的变量），但最重要的部分是调用指向成员的指针的频率不够高，而且调用它们的`this`频率更低，以至于它不能保证对小用例的语法进行豁免。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:26:50.577

发生这种情况是因为 C++ 运行时在您不查看时处理类的方式。基本上将函数指针存储在实例中是低效的，因此编译器使用函数指针构建一个特定于类的表，这些函数指针与您定义的成员函数具有相同的数量，并且在运行时传递 this 指针（AFAIK visualc 传递通过 ecx 的指针，我不完全确定 GCC 上会发生什么）

所以基本上当你这样做时

```
instance->foo(10); 
```

您告诉运行时使用参数 10 调用函数 foo 并将（实例）作为 this 指针传递，这就是为什么您必须明确说明必须调用哪个对象的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:09:46.047

`f`不是 的成员`FooBar`。所以如果你想调用`f`的一个实例`FooBar`，你必须告诉它是哪个实例。

在您的示例中，`f`确实*包含*FooBar 的成员，但编译器不知道。

# scala - Scala语法访问选项内联和链“OrElse”的属性？

> ID：11212457
> 
> 赞同：9
> 
> 时间：2012-06-26T17:06:51.333
> 
> 标签：scala

有时我想返回一个包含在选项中的对象的属性值，但我不能用`getValue.orElse(otherValue)`.

例如，我正在内联映射属性，我想使用类似`object.get.property.orElse("")`. 但是前面没有编译。如何访问该属性并仍然保持类似选项的语法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T17:09:52.147

您可以使用`map()`来实现这一点。一旦你开始考虑`Option[T]`像一个`T`可以容纳 0 或 1 个元素的容器类型，它就会变得很明显：

```
case class Person(name: String, age: Int)

val optionalPerson = Some(Person("John", 29))
val name = optionalPerson map {_.name} getOrElse "?" 
```

此外，如果您有`Option`s 的嵌套结构：

```
case class Person(name: String, age: Int, parent: Option[Person]) 
```

`Option`你可以提取嵌套`flatMap`：

```
val optionalPerson = Some(Person("John", 29, Some(Person("Mary", 55, None))))
val parentName = optionalPerson flatMap {_.parent} map {_.name} getOrElse "Unknown parent name"  //Mary 
```

或者，您可以`filter()`在包装的值不满足某些条件时`Some()`使用它：`None``Some`

```
val nameIfAdult = optionalPerson filter {_.age >= 18} map {_.name} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:06:52.457

用于`map()`维护类似选项的模式。

例如，您需要获取对象的`name`属性`field`。但如果 field 实际上是`None`，您可以返回一个空白字符串。像这样：

`field.map(_.name).getOrElse("")`

并在更大的范围内使用它：

```
implicit def castDraftModel(drafts:List[Tuple2[models.ReportInstance,Option[models.Report]]]) = drafts.map{
    (field) => 
      List(Field(
        field._1.id, 
        field._1.teamId, 
        field._2.map(_.name).getOrElse(""), 
        field._1.lastModifiedRelative, 
        field._2.map(_.id).getOrElse(0L), 
        field._2.map(_.reportType).getOrElse(""), 
        field._1.referenceId, 
        field._1.referenceName( draft._2.map(_.reportType).getOrElse("") ) ))
  }.flatten.sortBy(_.id) 
```

# iphone - 带有 UIPicker 和 UIKeyboard 的多个 UITextFields

> ID：11212459
> 
> 赞同：0
> 
> 时间：2012-06-26T17:06:55.217
> 
> 标签：iphone, ios, uitextfield, uipickerview

所以我有大约 7 个文本字段，其中 6 个使用键盘，另一个使用选择器。我遇到的问题是，如果在触摸链接到选择器的文本字段时打开键盘，则键盘不会关闭并且选择器会出现在其下方。这是我的代码

```
- (void) textFieldDidBeginEditing:(UITextField *)textField
 {    
pickerView.hidden = YES;
if ([textField isEqual:state])
{   

    [state resignFirstResponder];
    [self textFieldFirstResponderOnDelay1];

}

else
{
    pickerView.hidden = YES;

    // This movie the view up so textfield isn't hidden by keyboard
    CGRect textFieldRect =
    [self.view.window convertRect:textField.bounds fromView:textField];
    CGRect viewRect =
    [self.view.window convertRect:self.view.bounds fromView:self.view];

    CGFloat midline = textFieldRect.origin.y + 0.5 * textFieldRect.size.height;
    CGFloat numerator =
    midline - viewRect.origin.y
    - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
    CGFloat denominator =
    (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION)
    * viewRect.size.height;
    CGFloat heightFraction = numerator / denominator;

    if (heightFraction < 0.0)
    {
        heightFraction = 0.0;
    }
    else if (heightFraction > 1.0)
    {
        heightFraction = 1.0;
    }

    UIInterfaceOrientation orientation =
    [[UIApplication sharedApplication] statusBarOrientation];
    if (orientation == UIInterfaceOrientationPortrait ||
        orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
    }
    else
    {
        animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
    }

    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y -= animatedDistance;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

}

}

-(void) viewDidLoad
{
pickerView = [[UIPickerView alloc] init];
pickerView.frame = CGRectMake(0, 245, 320, 216);
pickerView.delegate = self;
pickerView.hidden = YES;
pickerView.showsSelectionIndicator = YES;
state.inputView = pickerView;

[self.view addSubview:pickerView];
}

-(void)textFieldFirstResponderOnDelay1
{ 
pickerView.hidden=NO;
[pickerView reloadAllComponents];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
if([textField isEqual:state])
{

}
else
{
    CGRect viewFrame = self.view.frame;
    viewFrame.origin.y += animatedDistance;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

    [self.view setFrame:viewFrame];

    [UIView commitAnimations];

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:15:46.780

不要将pickerview添加为主窗口的子视图，只需将其设置为适当文本视图的输入视图，然后它将像键盘通常那样显示/隐藏：

```
textField.inputView = pickerView; 
```

# javascript - 从弹出窗口将 HTML 插入 CKeditor

> ID：11212460
> 
> 赞同：0
> 
> 时间：2012-06-26T17:06:55.110
> 
> 标签：javascript, jquery, ckeditor

我创建了调用外部弹出窗口的插件：

```
exec : function( editor )
{
    window.open('index.php?mod=xxxx','Name popup','width=900,height=600');
} 
```

那部分效果很好。如何将数据发送回CKeditor？我想用 jquery 在 CKeditor 的开启器实例的当前位置附加一些 HTML。

我已经尝试过了，但它不起作用：

```
$('a#clickMe').click(function()
{ 
     window.opener.CKeditor.insertHtml('Bla bla bla');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T08:06:11.250

找到了一种方法：

```
exec : function( editor )
{
    window.open('index.php?mod=xxxx&CKEditor='+CKEDITOR.currentInstance.name,'Name popup','width=900,height=600');
} 
```

然后将传递的 $_GET['CKEditor'] 插入到元素 'rel' 属性中。

html:

```
<a id="clickMe" rel="<?=$_GET['CKEditor']?>">click me</a> 
```

jQuery：

```
 $('a#clickMe').click(function(){
        var editor = $(this).attr("rel");
        window.opener.CKEDITOR.instances[editor].insertHtml('bla bla');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:27:19.870

尝试：

```
window.opener.CKEDITOR.instances.nameOfYourInstance.insertHtml( 'bla bla' ); 
```

但是，我不知道如果没有先聚焦编辑器，它是否会一直有效。您应该使用 CKEditor 的对话框 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T16:10:03.120

一种不使用 GET 变量的方法 - 将全局变量添加到您的 javascript（例如在 config.js 文件中）

```
var myEditorInstance; 
```

然后在插件中

```
exec : function( editor )
{
    myEditorInstance=editor;
    window.open('index.php?mod=xxxx','Name popup','width=900,height=600');
} 
```

然后，您可以从弹出窗口中使用

```
window.opener.myEditorInstance.insertHtml('Bla bla bla'); 
```

这也意味着如果页面上有多个编辑器，则弹出窗口与打开窗口的实例相关。

# javascript - 在 CKEDITOR 上拆分内容并获取每个部分的 HTML

> ID：11212462
> 
> 赞同：0
> 
> 时间：2012-06-26T17:07:03.550
> 
> 标签：javascript, jquery, split, ckeditor

我有一个CKEDITOR，我试图将内容分成n个部分，用户通过将光标放在CKEDITOR的特定位置上来指示他想要多少个部分，然后在用户选择的上下文菜单中使用一个选项“拆分块”，这会插入一个

* * *

HTML 中的标记：

用户可以在CKEDITOR中做n次，表示用户想要分割内容的块数，每插入一个hr就是一个块。

所以当用户完成时，点击上下文菜单“Process Split”，这个动作应该执行并将内容分成n部分。

这是我拆分内容的代码：

```
var index = 0;
var tmpItem = null;
var ranges = new Array();

var elements = editor.document.getElementsByTag( 'hr' );

for ( var i = 0; i < elements.count() ; i++ )
{

    var item = elements.getItem( i );

    ranges[index] = new CKEDITOR.dom.range( editor.document );

    if(tmpItem!=null)
        ranges[index].setStart(tmpItem, CKEDITOR.POSITION_BEFORE_START);

    else{
        ranges[index].setStartAfter(editor.document.getBody().getFirst());

    }

    if(item.hasClass('split-end')){

        ranges[index].setEnd(item, CKEDITOR.POSITION_BEFORE_START);
        ranges[index].select();

        index++;

        var sel = editor.getSelection();
        var ran = sel.getRanges();
        var el = new CKEDITOR.dom.element("div");

        for (var j = 1, len = ran.length; j < len-1; ++j) {
            el.append(ran[j].cloneContents());
        }

        console.log( el.getHtml() );

    }

    tmpItem = item;

} 
```

问题是：如何选择从文档开始到第一个HR等等。

非常感谢，我已经尝试这样做一个多星期了，我不知道还有什么尝试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:17:11.720

我没有仔细分析你的代码，因为我什至不知道你想要实现什么。但这里有一些可以帮助你的笔记。

1.  你使用`CKEDITOR.dom.range#setStart`不当`#setEnd`。您应该使用`setStartAt`和`setEndAt`。您使用的方法将偏移量作为第二个参数，而不是位置。

2.  要选择从文档开头到第一个 HR（包括它）的内容：

    ```
    var range = new CKEDITOR.dom.range( document );
    range.setStart( document.getBody(), 0 );
    range.setEndAt( hr, CKEDITOR.POSITION_AFTER_END );
    range.select(); 
    ```

3.  在您的代码中，我看到您正在尝试选择许多范围 - 它不会以这种方式工作。AFAIK 只有 Firefox 处理多项选择，但我不知道 CKEditor 是否可以。如果是，那么`CKEDITOR.dom.selection#selectRanges`这就是您所需要的。但是，如果您只是尝试提取范围的内容，则不必先选择它们。

# jqplot - jqPlot 水平条形图，条形顶部带有刻度标签

> ID：11212469
> 
> 赞同：0
> 
> 时间：2012-06-26T17:07:16.797
> 
> 标签：jqplot

我有一个 jqPlot hor。像这样的条形图。[jq plot - 获取线性 x 轴刻度](https://stackoverflow.com/questions/9765521/jq-plot-getting-linear-x-axis-ticks)

我希望能够使用一些参数或渲染器将 y 轴刻度标签（如软件和服务，图片中的以色列）放在各个条形图的顶部，而不是摆弄 css。

有没有简单的方法可以做到这一点？提前致谢。

到目前为止，我的代码如下所示。

` 函数绘制图表（） {

```
 var data = new Array(3);
    for (var i = 0; i < data.length; i++) {
        data[i] = new Array(2);
        data[i][0] = Math.random() * 100;
        data[i][1] = 'text-' + (i + 1);
    }

    var plot2 = $.jqplot('votingresult', [
            data,
            ], {
                seriesDefaults: {
                    renderer: $.jqplot.BarRenderer,
                    pointLabels: { show: true, location: 'e', edgeTolerance: -15 },
                    shadow: false,
                    rendererOptions: {
                        barDirection: 'horizontal',
                        barPadding: 20,
                        barMargin: 0,
                        barWidth: 20,
                        varyBarColor: true,                            
                    }
                },
                gridPadding: { top: 0, right: 0, bottom: 0 },
                grid: {
                    drawGridLines: false,
                    drawBorder: false,
                    shadow: false
                },
                axesDefaults: {                        
                    showTicks: false,
                    shadow: false                        
                },
                axes: {
                    yaxis: {
                            renderer: $.jqplot.CategoryAxisRenderer,
                            tickRenderer: $.jqplot.CanvasAxisTickRenderer,                                 
                            tickOptions: {                                    
                                fontSize: '10pt',                                    
                                mark: 'inside',
                                showLabel: false
                            }                                
                    }
                }
            });
}` 
```

我想要 jqplot 就像这张 flickr 图片右侧显示的那样。

[http://www.flickr.com/photos/surajshrestha/7455033636/sizes/l/in/photostream/](http://www.flickr.com/photos/surajshrestha/7455033636/sizes/l/in/photostream/)

Jeroen：我研究过点标签。但是，在这里，我说的是图表内部的轴标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T00:36:50.197

我遇到了同样的挑战，最后只是编写了一个函数来将内容附加到图形 DIV，而不是尝试摆弄 JQPlot。您只需调整 barMargin 选项以考虑间距。

```
 function makeSectionLabels(jsonObject, domObject, topPadding, spacing) {
            var html = "<div class='bar-chart-sections' style='padding-top:"+topPadding+"'>";
            $.each(jsonObject, function(index, value){
                html += "<h5 style='margin-bottom:"+spacing+"'>"+value+"</h5>"
            });
                html += "</div>"
            $(domObject).append(html);
        }; 
```

# javascript - 双击显示一个div

> ID：11212470
> 
> 赞同：-2
> 
> 时间：2012-06-26T17:07:17.887
> 
> 标签：javascript

我使用 javascript 通过 onclick 显示 div，但是当我单击 div 外部时，我想隐藏 div。

经过更多搜索，我找到了一个功能，并且效果很好

但是有一个问题，代码需要第一次双击才能显示潜水

我的代码：

```
<script>
// click on the div
function toggle( e, id ) {
  var el = document.getElementById(id);
  el.style.display = ( el.style.display == 'none' ) ? 'block' : 'none';

  // save it for hiding
  toggle.el = el;

  // stop the event right here
  if ( e.stopPropagation )
    e.stopPropagation();
  e.cancelBubble = true;
  return false;
}

// click outside the div
document.onclick = function() {
  if ( toggle.el ) {
    toggle.el.style.display = 'none';
  }
}

</script>
<style>#tools{display:none;}</style>

<div id="tools">Hidden div</div>
<a href="#" onclick="toggle(event, 'tools');">show/hide</a> 
```

这是我的完整代码，你可以在你的电脑上测试。

问题是：该功能需要单击两次，我想在单击时显示 div（单击）而不是（双击）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:19:15.913

试试这个 - [http://jsfiddle.net/JjChY/1/](http://jsfiddle.net/JjChY/1/)

改变

```
el.style.display = ( el.style.display == 'none' ) ? 'block' : 'none'; 
```

到

```
el.style.display = (el.style.display == 'none' || el.style.display == '') ? 'block' : 'none'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:21:40.320

用这个：

```
el.style.display = window.getComputedStyle(document.getElementById("tools")).getPropertyValue("display") == "none" ? 'block' : 'none'; 
```

它应该工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T17:17:45.180

问题是`el.style.display`只从元素的内联样式中读取，而不是它的 CSS。

所以，第一次点击`el.style.display`是`''`（空白字符串），所以它设置为“无”。然后第二次，`el.style.display`is `'none'`，所以它起作用了。

如果其内联样式为空，您需要尝试从元素的 CSS 中读取。为此，我将使用[quirksmode](http://www.quirksmode.org/dom/getstyles.html)`getStyle`中的方法：

```
function getStyle(x, styleProp) {
    if (x.currentStyle) {
        var y = x.currentStyle[styleProp];
    }
    else if (window.getComputedStyle) {
        var y = document.defaultView.getComputedStyle(x, null).getPropertyValue(styleProp);
    }
    return y;
}

// click on the div

function toggle(e, id) {
    var el = document.getElementById(id);
    var display = el.style.display || getStyle(el, 'display');
    el.style.display = (display == 'none') ? 'block' : 'none';

    // save it for hiding
    toggle.el = el;

    // stop the event right here
    if (e.stopPropagation) e.stopPropagation();
    e.cancelBubble = true;
    return false;
}

// click outside the div
document.onclick = function() {
    if (toggle.el) {
        toggle.el.style.display = 'none';
    }
}​ 
```

演示：http: [//jsfiddle.net/JjChY/2/](http://jsfiddle.net/JjChY/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:25:40.313

你的代码有点复杂。它可以写得更简单：

```
<script>
var toggle = function(id) {
  var element = document.getElementById(id);
  element.className = element.className === 'hidden' ? '' : 'hidden';

  return false;
};
</script>

<style>
.hidden {
    display: none;
}
</style>

<div id="tools" class="hidden">Hidden div</div>
<a href="#" onclick="toggle('tools');">show/hide</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:27:56.253

如果你有 jQuery，你可以为外部点击做这样的事情。

首先，当鼠标在其中时，在“工具”div 上设置一个类。当鼠标不在其中时删除该类。

```
$('#tools').hover( function() {
    $('#tools').addClass("inside");
},
function() {
    $('#tools').removeClass("inside");
}); 
```

然后，跟踪 HTML 上的点击次数。如果“内部”类不在“工具”div 上，则隐藏。

```
$("html").click( function() {
    $("#tools").not(".inside").each( function() {
        $("#tools").hide();
    });
}); 
```

# c# - 如何让c#不调用实例的析构函数

> ID：11212472
> 
> 赞同：0
> 
> 时间：2012-06-26T17:07:29.900
> 
> 标签：c#, .net, winforms

我有两种形式，`form1`需要从中获取数据`form2`，我在构造函数中使用一个参数`form2`来获取`form1's`这样的实例：

```
public form2(Form form1) {
this.f = form1;
} 
```

在form1中：

```
Form form2 = new Form(this); 
```

但是当我关闭form1时，似乎调用了form1 destruct。我的问题是如何避免这个问题？

**编辑：**我的问题中有很多打字错误，很抱歉，已修复：

我有两种形式，`form2`需要从中获取数据`form1`，我在构造函数中使用一个参数`form1`来获取`form1's`这样的实例：

```
private Form f;
public form2(Form form1) {
this.f = form1;
} 
```

在form1中：

```
Form form2 = new Form(this); 
```

但是当我关闭form2时，似乎调用了form1析构函数。我的问题是如何避免这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:11:40.617

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.close.aspx)：

> 当窗体关闭时，对象内创建的所有资源都将关闭并释放窗体。您可以通过处理 Closing 事件并设置作为参数传递给事件处理程序的 CancelEventArgs 的 Cancel 属性来防止在运行时关闭窗体。

因此，为了防止资源被丢弃，你唯一能做的就是隐藏表单而不是关闭它：

```
bool reallyClose;

protected override void OnClosing(CancelEventArgs e)
{
    if (!reallyClose)
    {
        e.Cancel = true;
        Hide();
    }
    base.OnClosing(e);
} 
```

这将防止表单被关闭，除非您在关闭表单之前手动将`reallyClose`标志设置为`true`。

您应该确保在完成使用后正确关闭表单。

**另一种选择可能是将需要从 Form1 检索的数据与表单本身分离。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:18:36.873

在这种情况下，form 1 不能被销毁，直到 form2 也关闭。只要 form2 有对 form1 的引用，form1 就会继续存在。更有可能的是，您担心 form1 被处置。当 form1 关闭时，它会自行处理。该对象仍将存在，但它会释放其所有子控件和系统对象，例如窗口句柄和绘图对象。一旦表单被处理，它就不能再次显示，并且它的所有控件都将无法访问。如果您尝试使用已处置表单的任何可视组件，它将抛出一个`ObjectDisposedException`. 如果您想阻止表单被处理，只需隐藏它而不是关闭它。但是，您应该稍后在 Form2 不再需要它时将其关闭，否则它将一直占用内存和资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:41:13.860

您应该真正从两种表单中完全考虑您需要的任何数据，从而首先避免耦合表单构造函数的问题。

# jquery - 根据下拉 selectedIndex 按类别隐藏/显示复选框

> ID：11212473
> 
> 赞同：0
> 
> 时间：2012-06-26T17:07:32.333
> 
> 标签：jquery

我有一个下拉列表，其中包含一些选项和一组复选框，只有当用户在填写表单时选择了一些特定选项时才应该使用这些复选框。

**然后，有一组复选框（4 个复选框），其中 3 个具有 class="extrasB" 并且只有**当用户选择了 select (5,6) 中的最后 2 个选项时才应该可供选择。

上面每个选中的复选框都会在表单的总成本（字段 scost）中增加一个额外的成本（它的值）。假设用户选择了选项 5，选择了一些复选框，然后决定他想要的选项 3（没有复选框）。这应该会自动取消选中已选中的复选框并更改 scost 的值。**我该怎么做呢？**

这是一个[jsfiddle](http://jsfiddle.net/HbpRn/12/)，上面的所有内容都处于工作状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:25:46.460

要知道是否选中了复选框：

```
if($('input[name=foo]').is(':checked')) 
```

或者

```
if($('input[name=foo]').attr('checked')) 
```

取消选中复选框：

```
$('input[name=foo]').attr('checked', false); 
```

检查复选框：

```
$('input[name=foo]').attr('checked', true); 
```

要按类（例如 extrasB）获取复选框的引用，您可以执行以下操作：

```
$("input[type='checkbox'].extrasB").each(function(){
//check or uncheck 
}); 
```

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:15:48.353

```
$("#symb").change(function() {
    $("input:checkbox").attr('checked', false);
    $(this).getTotal();
}) 
```

像这样改变你的功能

编辑：[JsFiddle](http://jsfiddle.net/5Kgs2/1/)

# python - 为什么我的按钮不会在 python 上使用 tkinter GUI 重复命令

> ID：11212478
> 
> 赞同：0
> 
> 时间：2012-06-26T17:07:59.977
> 
> 标签：python, user-interface, tkinter

我是 GUI 和类的新手，我有点困惑，当我在 tkinter for python 中使用一个按钮时，它应该在按下时重复它的命令。但在我的程序中并没有这样做。我的代码有什么问题可以反击吗？我正在尝试制作一个简单的程序来回显输入的任何内容。

-谢谢

```
from Tkinter import *
from PIL import Image, ImageTk
import tkMessageBox

class appsMain(Frame):

    def __init__(self,parent):
        Frame.__init__(self,parent)
        self.parent=parent

        self.initUI()
    def initUI(self):
        self.parent.title("OrganizedWindows")

        self.send=Text(self,bg="white",height=3,width=35)
        self.send.place(x=17,y=235)

        self.msg=Text(self,width=35,height=12,state="disable")
        self.msg.place(x=17,y=20)

        sendbtn=Button(self,text=" Listen ",command=self.accept)
        sendbtn.place(x=305,y=240)

        self.pack(fill=BOTH, expand=1)

    def accept(self,msg):
        self.msg.configure(state="normal")
        self.msg.insert(INSERT,msg+"\n")
        self.msg.insert(INSERT,"BYE")
        self.msg.configure(state="disable")

root=Tk()
root.geometry("350x300+300+300")
app=appsMain(root)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:21:08.963

您的代码有一些问题。第一个很容易解决：

```
sendbtn=Button(self,text=" Listen ",command=self.accept) 
```

不起作用，因为当单击按钮时，`self.accept`调用时没有附加参数（`accept`需要 2 个参数，[`self`和`msg`]，但它只得到 1 个 [ `self`]）。

您可以使用以下方法解决此问题`lambda`：

```
sendbtn=Button(self,text=" Listen ",command=lambda : self.accept("some message here")) 
```

（这相当于）：

```
def func:
    self.accept("some message here")

sendbtn=Button(self,text=" Listen ",command=func) 
```

但是，我不知道您是否要不断添加不同的消息......或者它们来自哪里，所以在这一点上很难给出一个通用的解决方案。

即使在引发异常后，Tkinter 应用程序也会愉快地继续运行。在开发 Tkinter 应用程序时观察终端是否存在异常是个好主意（在这种情况下，它指出了问题的根源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T01:45:01.553

这是为了更好地回答您的 Lambda 评论问题。Lambda 是一种快速、单行的方法来编写函数。**您设置的变量与def myFunction**的函数名称相同。然后你说关键字**lambda**和你放在关键字 lambda 之后的字母/单词只是你的函数的参数。接下来你放一个冒号（就像你对一个普通的函数一样-> def myFunction:)。之后，您编写任何您希望函数**返回**的内容。因此，如果您想要一个函数对给定数字**n**进行平方，那么您可以正常编写如下：

```
def square_num(n):
    return n**2 
```

或者作为一个很酷的 Lambda：

```
square_num = lambda n: n**2 
```

您也可以拥有任意数量的参数，就像在普通函数中一样，所以对于一个给定的数字，您可以写成 x 次方：

```
raise_num = lambda n, x: n**x 
```

# asp.net-mvc - 模型和视图模型之间的区别

> ID：11212484
> 
> 赞同：15
> 
> 时间：2012-06-26T17:08:25.033
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model, viewmodel

我一直在为一个新项目研究 asp.net MVC 项目结构，并且有一个问题让我感到困惑。模型和视图模型有什么区别？我说视图模型包含表单属性中的模型是否正确？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-26T17:25:20.030

我有一个博客，我想在一个视图中显示*最新帖子*、*最新评论*、*帖子类别的列表。*我怎么能这样做？我可以强烈地将我的视图输入到任何一个模型，对吗？有*视图模型*。

我创建了一个名为的视图模型`BlogViewModel`，其中包含最新帖子、最新评论和其他内容作为属性，并将我的视图与该模型绑定。, .. 是*域模型*`posts`，而是我专门为视图创建的*视图模型。*`comments`*`BlogViewModel`*

 **明天我将在移动版本中展示我的博客，届时我可能会创建一个仅包含较少属性的简单视图模型。最后..视图模型用于视图，并且大多数时候它们充当真实域模型的包装器！

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-26T17:16:19.383

模型通常与数据的存储方式（数据库、服务等）更密切相关，并且模型将与这些非常相似。

另一方面，ViewModel 与您的数据如何呈现给用户密切相关。它通常是您模型的扁平化版本、非规范化等。它可以是多个模型的聚合。

对于您的典型`Person`对象，您的模型可能包含如下属性：

*   名
*   姓
*   出生日期

但是，在您的 ViewModel 中，您可以选择以不同的方式表示它，并且更像是：

*   全名
*   年龄

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-26T17:11:13.597

`ViewModel`是从业务领域层调整到特定视图的模型版本。

它只有与视图相关的属性，不应该有方法（除了像这样的简单方法`ToString()`）。

`ViewModel`只是一个“数据容器”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T17:13:02.300

模型只是应用程序中对象的表示。但是，您应该注意几种不同类型的模型。

1.  域模型：这表示您的应用程序中的域对象，如果您使用的是 ORM（Linq2SQL，EF），则类似于 SQL 表。

2.  查看模型：这表示您希望最终用户查看/编辑/等的对象。视图模型可以包含来自多个域模型或不包含域模型的属性，并且通常会排除最终用户不应该使用的属性。视图模型应该只包含为特定请求向最终用户显示适当数据所需的元素。

[这里有一些](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)关于视图模型及其使用的 Jimmy Bogard。**

# c# - 对象数组的匿名类型？

> ID：11212485
> 
> 赞同：6
> 
> 时间：2012-06-26T17:08:36.450
> 
> 标签：c#, .net, .net-4.0, anonymous-types

我有这个匿名类型：

```
var t= new {a=1,b="lalala",c=DateTime.Now}; 
```

我怎样才能使它成为一个数组`Objects`（每个元素->强制转换为对象）

因此类似于：

```
object[]  v = new object[] {1,"lalala",DateTime.Now}; 
```

# 编辑

*ps 这只是一个关于学习从一种类型转换为另一种类型的知识问题。我知道我可以从一开始就初始化一个对象数组。但这是一个学习问题。*

很抱歉没有提到它。

顺序很重要……为什么？导致[ConstructorInfo.Invoke](http://msdn.microsoft.com/en-us/library/6ycw1y17.aspx) 正在接受

> 类型：System.Object[] 与此参数的数量、顺序 (!!!) 和类型（在默认绑定器的约束下）相匹配的值数组 ....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:10:05.450

基本上，您必须使用反射。通过 应该不会太难`Type.GetProperties`，但我不知道任何“内置”的东西。

正如 leppie 指出的那样，*排序*并不简单——你必须检查参数的顺序，这至少会给你所有属性类型的顺序。如果你只有不同的类型，那很好。

如果您不关心排序，可以使用：

```
var array = t.GetType()
             .GetProperties()
             .Select(p => p.GetValue(t, null))
             .ToArray(); 
```

编辑：我刚刚想到了一些可以真正解决它的东西，但它是特定于实现的。C# 编译器使用泛型类型生成匿名类型。所以`new { A = 5, B = "foo" }`实际上会创建一个像这样的匿名类型：

```
class <>_Anon<TA, TB>
{
    internal <>_Anon(TA a, TB b)
} 
```

所以你可以根据泛型属性的泛型类型依次计算出属性名称，然后从具体类型中依次获取属性。但是很丑...

```
using System;
using System.Linq;
using System.Reflection;

class Test    
{
    // Note: this uses implementation details of anonymous
    // types, and is basically horrible.
    static object[] ConvertAnonymousType(object value)
    {
        // TODO: Validation that it's really an anonymous type
        Type type = value.GetType();
        var genericType = type.GetGenericTypeDefinition();
        var parameterTypes = genericType.GetConstructors()[0]
                                        .GetParameters()
                                        .Select(p => p.ParameterType)
                                        .ToList();
        var propertyNames = genericType.GetProperties()
                                       .OrderBy(p => parameterTypes.IndexOf(p.PropertyType))
                                       .Select(p => p.Name);

        return propertyNames.Select(name => type.GetProperty(name)
                                                .GetValue(value, null))
                            .ToArray();

    }

    static void Main()
    {
        var value = new { A = "a", Z = 10, C = "c" };
        var array = ConvertAnonymousType(value);
        foreach (var item in array)
        {
            Console.WriteLine(item); // "a", 10, "c"
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:12:20.320

```
public object[] ToPropertyArray(object o)
{
    return o.GetType.GetProperties()
        .Select(p => p.GetValue(o, null))
        .ToArray();
} 
```

编辑：看起来您想从匿名类型调用某种类型的构造函数。看起来唯一可行的方法是参数名称与匿名类型的属性名称匹配：

```
public static T ConstructFromAnonymous<T>(object anon)
{
    //get constructors for type ordered by number of parameters
    var constructors = typeof(T).GetConstructors().OrderByDescending(c => c.GetParameters().Length);

    //get properties from anonymous object
    Dictionary<string, PropertyInfo> properties = anon.GetType()
        .GetProperties()
        .ToDictionary(p => p.Name);

    ConstructorInfo bestMatch = constructors.FirstOrDefault(ci => IsMatch(ci, properties));
    if (bestMatch != null)
    {
        var parameters = bestMatch.GetParameters();
        object[] args = parameters.Select(p => properties[p.Name].GetValue(anon, null)).ToArray();
        return (T)bestMatch.Invoke(args);
    }
    else throw new ArgumentException("Cannot construct type");
}

private static bool IsMatch(ConstructorInfo ci, Dictionary<string, PropertyInfo> properties)
{
    var parameters = ci.GetParameters();
    return parameters.All(p => properties.ContainsKey(p.Name) && p.ParameterType.IsAssignableFrom(properties[p.Name].PropertyType));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:11:32.147

请参阅[http://blogs.msdn.com/b/wriju/archive/2007/10/26/c-3-0-anonymous-type-and-net-reflection-hand-in-hand.aspx](http://blogs.msdn.com/b/wriju/archive/2007/10/26/c-3-0-anonymous-type-and-net-reflection-hand-in-hand.aspx)：

```
static void Main()
{
    //Anonymous Type
    var anyType = new
    {
        IntID = 1,
        StringName = "Wriju"
    };

    Type t = anyType.GetType();
    PropertyInfo[] pi = t.GetProperties();
    foreach (PropertyInfo p in pi)
    {
        //Get the name of the prperty
        Console.WriteLine(p.Name);
    }

    //Using LINQ get all the details of Property
    var query = from p in t.GetProperties()
                select p;
    ObjectDumper.Write(query);
} 
```

您应该能够使用`GetValue`而不是将属性名称写入控制台来添加到数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:17:07.793

如果您需要动态创建反射，则可以使用反射。如果它不需要是动态的，你显然可以这样做，但我假设你已经想到了这一点：

```
var t = new { a = 1, b = "lalala", c = DateTime.Now };

object[] v = new object[] { t.a, t.b, t.c }; 
```

您能否就您的问题提供更深入的观点，因为您没有给我们太多继续，如果您不从匿名类型开始，也许有更好的解决方案？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:14:00.867

如果您的匿名类型将始终具有在编译时已知的相同属性，那么您可以使用明显的显式方法：

```
var t = new { a = 1, b = "lalala", c = DateTime.Now };
object[] v = new object[] { t.a, t.b, t.c }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T17:43:38.377

我认为这比 Jon Skeet 的解决方案更好，因为它依赖于结果`ToString`而不是匿名类型如何生成的更微妙的细节：

```
var myAnon = new { a = "hi", b185310 = "lo" };
var names = Regex.Matches(myAnon.ToString(), @"([a-zA-Z0-9]+) = ");
var objArray = names.Cast<Match>().Select(name => myAnon.GetType().GetProperty(name.Groups[1].ToString()).GetValue(myAnon, null)).ToArray(); 
```

如果您需要防止匿名类型中的对象在其中呈现的可能性，您也可以从`myAnon`的`ToString`方法代码 ( ) 中读取字符串常量，从而摆脱简单的解析器。`myAnon.GetType().GetMethod("ToString").GetMethodBody()``" = "`

# ruby-on-rails-3.1 - 我无法在 Rails 3 中获得回溯

> ID：11212487
> 
> 赞同：0
> 
> 时间：2012-06-26T17:08:40.617
> 
> 标签：ruby-on-rails-3.1

我正在尝试运行通常的 rails 命令（rails s、rails g、rails c 等），但出现错误（因为我正在从 MRI ruby​​ 和 postgres 迁移到 jruby 和 neo4j），如果只有一个堆栈跟踪。

它看起来像这样：

```
$ rails s
NameError: uninitialized constant Authorization::ActiveRecord 
```

我期待这样的错误，因为 Neo4j 不使用 ActiveRecord 并且它不再存在，但我真的需要查看哪个文件正在调用 ActiveRecord，以便我可以解决这个问题。但是我从谷歌发现或在代码中尝试过的任何东西都没有将回溯带回给我。;_;

我的 config/application.rb 是：

```
require File.expand_path('../boot', __FILE__)

require 'action_controller/railtie'
require 'action_mailer/railtie'
require 'active_resource/railtie'
require 'rails/test_unit/railtie'
require 'sprockets/railtie'
require 'neo4j'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require *Rails.groups(:assets => %w(development test))
  # If you want your assets lazily compiled in pro      duction, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module MyApp
  class Application < Rails::Application
    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, chanmge this if you want to expire all your assets
    config.assets.version = '1.1'

    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # this was done to load all modules in lib
    # following directions at: https://stackoverflow.com/questions/3356742/best-way-to-load-module-class-from-lib-folder-in-rails-3/3962321#3962321
    config.autoload_paths += Dir["#{config.root}/lib/**/"]

    #for rails-ckeditor
    config.autoload_paths += %W( #{config.root}/app/models/ckeditor )

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # JavaScript files you want as :defaults (application.js is always included).
    # config.action_view.javascript_expansions[:defaults] = %w(jquery rails)

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password]

  end
end 
```

我的 config/environments/development.rb 是：

```
MyApp::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # In the development environment your application's code is reloaded on
  # every request.  This slows down response time but is perfect for development
  # since you don't have to restart the webserver when you make code changes.
  config.cache_classes = false

  # Log error messages when you accidentally call methods on nil.
  config.whiny_nils = true

  # Show full error reports and disable caching
  config.consider_all_requests_local       = true
  #config.action_view.debug_rjs             = true $ turn off for rails 3.1
  config.action_controller.perform_caching = false

  # Don't care if the mailer can't send
  config.action_mailer.raise_delivery_errors = false

    #Devise wants this:
  config.action_mailer.default_url_options = { :host => 'localhost:3000' }

  # Print deprecation notices to the Rails logger
  config.active_support.deprecation = :log

  # Only use best-standards-support built into browsers
  config.action_dispatch.best_standards_support = :builtin

  config.log_level = :debug

  # Do not compress assets
  config.assets.compress = false

  # Expand the lines which load the assets
  config.assets.debug = true
end 
```

我不知道任何其他可能影响记录器/回溯情况的文件。我会包括更多，但这感觉像是一个普遍的问题，我真的不确定要包括什么。

更新：我很确定这个问题是[这里](https://stackoverflow.com/questions/10516190/enable-full-backtrace-logging-in-production)的重复（尽管我试图让它在任何环境中工作）。

# pinvoke - 如何使用 P/Invoke 从提升的信任 silverlight 应用程序将 writeablebitmap 复制到剪贴板？

> ID：11212488
> 
> 赞同：0
> 
> 时间：2012-06-26T17:08:42.053
> 
> 标签：pinvoke, clipboard, silverlight-5.0

我有一个 Silverlight 5 应用程序，它在浏览器中运行提升的信任度。这使我们能够做一些在silverlight 中通常不可能的事情，比如通过P/Invoke 对剪贴板进行更多访问。

我需要做的是将控件复制到剪贴板，以便将它们粘贴到 Word 或 Outlook 中。我可以通过 WriteableBitmap 将控件转换为图像，但是将数据复制到剪贴板是我遇到的问题。

调用代码：

```
 WriteableBitmap bmp = new WriteableBitmap(elements[0], new ScaleTransform() { ScaleX = 1.0, ScaleY = 1.0 });
  int[] p = bmp.Pixels;
  int len = p.Length * 4;
  byte[] result = new byte[len];
  Buffer.BlockCopy(p, 0, result, 0, len);

  CopyToClipboardViaPInvoke(result, ClipboardFormat.CF_BITMAP); 
```

复制功能：

```
private void CopyToClipboardViaPInvoke(byte[] data, ClipboardFormat format)
{
    IntPtr p = IntPtr.Zero;
    if (Native.OpenClipboard(p))
    {
        GCHandle pinnedArray = GCHandle.Alloc(data, GCHandleType.Pinned);
        IntPtr pointer = pinnedArray.AddrOfPinnedObject();
        try
        {
            Native.EmptyClipboard();
            IntPtr result = Native.SetClipboardData(format, pointer);
        }
        finally
        {
            Native.CloseClipboard();
            pinnedArray.Free();
        }
    }
} 
```

结果表明它是成功的，但是 paste 什么也没做。`IsClipboardFormatAvailable`还指出该格式在剪贴板上可用。我还尝试了各种 ClipboardFormat 输入和其他将控件转换为图像的方法，但没有任何运气。

## 更新 1

感谢 user629926 的建议，我已经得到了我认为更接近一点的东西，但我仍然缺少一些东西。

```
 Native.EmptyClipboard();
  IntPtr bmp = IntPtr.Zero;
  GCHandle pinnedArray = GCHandle.Alloc(bytes, GCHandleType.Pinned);
  IntPtr bmpPointer = pinnedArray.AddrOfPinnedObject();
  Native.StartupInput sin = new Native.StartupInput() { GdiplusVersion = 1 };
  Native.StartupOutput sout = new Native.StartupOutput();
  IntPtr gdip = IntPtr.Zero;

  int startup = Native.GdiplusStartup(out gdip, ref sin, out sout);
  int created = Native.GdipCreateBitmapFromScan0(width, height, width * 4, 0x0026200A, bmpPointer, out bmp);
  IntPtr result = Native.SetClipboardData(format, bmp);

  Native.DeleteObject(bmp);
  Native.GdiplusShutdown(ref gdip); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:17:00.280

使用 GdipCreateBitmapFromScan0 从您的数组中获取 HBitmap 并将其传递到剪贴板和 DeleteObject 以释放它。

```
[DllImport("gdiplus.dll")]
static extern int GdipCreateBitmapFromScan0(int width, int height, int stride, int format, IntPtr scan0, out IntPtr bitmap); 
[DllImport("gdi32.dll")]
public static extern bool DeleteObject(IntPtr hObject); 
```

# ruby-on-rails - vim：找不到映射

> ID：11212489
> 
> 赞同：0
> 
> 时间：2012-06-26T17:08:42.643
> 
> 标签：ruby-on-rails, vim

每次 vim 启动时，它都会显示“未找到映射”警告。

我正在使用下面的教程为 Rails 开发设置 vim。 [http://biodegradablegeek.com/2007/12/using-vim-as-a-complete-ruby-on-rails-ide/](http://biodegradablegeek.com/2007/12/using-vim-as-a-complete-ruby-on-rails-ide/)

我注意到在 .vimrc 中删除以下行可以解决问题

```
map :cp
map :cn 
```

问题：这些行是做什么的，警告的实际含义是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:13:22.957

他们的 html 在那里被破坏了，如果你查看源代码，他们想要做的是映射 alt-n 和 alt-p 关键字，所以你应该将它添加到你的 .vimrc

```
map <silent> <M-p> :cp<CR>
map <silent> <M-n> :cn<CR> 
```

# java - http OAuth 请求

> ID：11212494
> 
> 赞同：1
> 
> 时间：2012-06-26T17:08:58.697
> 
> 标签：java, android, http, post, oauth

我是网络编程的新手。我正在尝试在 Dropbox 上基于 OAuth 1.0 发出 POST 请求。以下是我用来发出帖子请求的代码。我应该这样做吗？

```
HttpPost httpPost;
            Log.d("HTTP","Exec");
            httpPost = new HttpPost("https://api.dropbox.com/1/shares/dropbox/a.jpg");
            Log.d("HTTP","Execute");

            try {
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(9);
                nameValuePairs.add(new BasicNameValuePair("oauth_consumer_key", "2f2y1dyuqhp58ek"));
                nameValuePairs.add(new BasicNameValuePair("oauth_token", token));
                nameValuePairs.add(new BasicNameValuePair("oauth_nonce", String.valueOf(millis)));
                nameValuePairs.add(new BasicNameValuePair("oauth_timestamp", String.valueOf(millis)));
                nameValuePairs.add(new BasicNameValuePair("oauth_signature_method", "HMAC-SHA1"));
                nameValuePairs.add(new BasicNameValuePair("oauth_version", "1.0"));
                nameValuePairs.add(new BasicNameValuePair("oauth_signature", sw));//this is url encoded
                //nameValuePairs.add(new BasicNameValuePair("path", "/a.jpg"));
                //nameValuePairs.add(new BasicNameValuePair("root", "dropbox"));
                httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                Log.d("HTTP","requesting");
                HttpResponse response = httpclient.execute(httpPost);

                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
            String result;
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                 StringBuilder sb = new StringBuilder();
                 String line = null;
                 line = reader.readLine();
                 sb.append(line); 
                 result = sb.toString();
                 is.close();

                //String s=response.getEntity().getContent().;
                Log.d("resp", result);
                //tv.setText(response.toString());

            } catch (ClientProtocolException e) {
            } catch (IOException e) {
            } 
```

签名基本字符串是：

```
POST&https%3A%2F%2Fapi.dropbox.com%2F1%2Fshares%2Fdropbox%2Fa.jpg&oauth_consumer_key%3D2f2y1dyuqhp58ek%26oauth_nonce%3D1340729641%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1340729641%26oauth_token%3Dwz27t6thob0fbxl%26oauth_version%3D1.0 
```

T 任何线索可能是什么问题？我得到的响应是 logCat 中显示的“无效签名基本字符串”。

日志猫：

```
06-26 22:30:46.125: I/System.out(364): debugger has settled (1322)
06-26 22:30:49.203: I/ActivityManager(66): Displayed activity cloud.mobile/.MCActivity: 9393 ms (total 9393 ms)
06-26 22:30:49.243: W/ActivityManager(66): Launch timeout has expired, giving up wake lock!
06-26 22:30:57.124: D/HTTP(364): wz27t6thob0fbxl
06-26 22:30:59.197: D/HTTP(364): Exe
06-26 22:30:59.886: D/HTTP(364): 1340730059
06-26 22:31:00.824: D/HTTP(364): POST&https%3A%2F%2Fapi.dropbox.com%2F1%2Fshares%2Fdropbox%2Fa.jpg&oauth_consumer_key%3D2f2y1dyuqhp58ek%26oauth_nonce%3D1340730059%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1340730059%26oauth_token%3Dwz27t6thob0fbxl%26oauth_version%3D1.0
06-26 22:31:00.824: D/HTTP(364): xLNJrQ5R9jxDTnZcpQ3HLkLBxxQ=
06-26 22:31:00.973: D/HTTP(364): Exe
06-26 22:31:00.983: D/HTTP(364): Exec
06-26 22:31:01.023: D/HTTP(364): Execute
06-26 22:31:01.664: D/HTTP(364): requesting
06-26 22:31:12.243: D/dalvikvm(364): GC_FOR_MALLOC freed 5195 objects / 296968 bytes in 185ms
06-26 22:31:25.063: I/global(364): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
06-26 22:31:28.545: D/resp(364): {"error": "Invalid signature. Expected signature base string: POST&https%3A%2F%2Fapi.dropbox.com%2F1%2Fshares%2Fdropbox%2Fa.jpg&oauth_consumer_key%3D2f2y1dyuqhp58ek%26oauth_nonce%3D1340730059%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1340730059%26oauth_token%3Dwz27t6thob0fbxl%26oauth_version%3D1.0"} 
```

好吧，这个“预期的签名基本字符串（如上所示）”与我使用 HMAC-SHAH 生成并转换为 oauth_signature 的字符串完全相同。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:31:11.723

您计算 . 的值的方式可能有问题`oauth_signature`。由于您没有提供代码，因此我将在黑暗中尝试拍摄：

正如[Dropbox 论坛](http://forums.dropbox.com/topic.php?id=41268)中的某个人已经指出的那样

> 让 OAuth 签名的东西完全正确总是一个巨大的痛苦。您应该努力确保您的库生成的基本字符串与服务器所期望的一样。一旦这是真的，你唯一能搞砸的方法就是用错误的键来hmac。

问题可能是您指定`HMAC-SHA1`为签名方法，但未使用它正确签署基本字符串。

[OAuth 规范](http://oauth.net/core/1.0/#signing_process)命名了三种不同的签名基本字符串的方法。使用[HMAC-SHA1](http://oauth.net/core/1.0/#anchor16)时，您必须使用基本字符串和连接值作为输入参数调用该方法。[您可以在此处](https://stackoverflow.com/questions/6312544/hmac-sha1-how-to-do-it-properly-in-java)找到在 Java 中使用此方法的示例实现。

由于 Dropbox 使用的是[仅 SSL 的 API](https://www.dropbox.com/developers/reference/api)，您也可以回退到使用[PLAINTEXT](http://oauth.net/core/1.0/#anchor22)方法并直接提交基本字符串。

此外，您使用相同的时间戳输入，`oauth_timestamp`不`oauth_nonce`推荐[使用](http://oauth.net/core/1.0/#nonce)，`oauth_nonce`应该始终是唯一的。有关该问题的更详细说明并使用全局计数器来解决它，请阅读[本文](http://www.adayinthelifeof.nl/2010/12/16/oauth-timestamps-and-nonces/)。

# javascript - 组合图表：访问特定于特定系列类型的配置选项

> ID：11212495
> 
> 赞同：0
> 
> 时间：2012-06-26T17:09:01.600
> 
> 标签：javascript, google-visualization

在组合图表中，[文档中的](https://developers.google.com/chart/interactive/docs/gallery/combochart#Configuration_Options)**系列**配置选项仅提供有限数量的可配置属性（**type**、**color**、**targetAxisIndex**、**pointSize**等）。

 ******除了这些属性，我希望在组合图中访问特定于系列类型的配置选项。例如：

```
 ac.draw(data, {
    ...
    series: {5: {type: "steppedArea", connectSteps: false}}
    ...
  }); 
```

其中**connectSteps**仅是阶梯区域图的属性。如何解决此限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:23:17.917

谷歌图表社区帮助我解决了这个问题。此特定问题的解决方案是将`connectSteps`属性设置在`options`级别，而不是`series`级别。

```
   ac.draw（数据，{
     ...
     连接步骤：假，
     系列：{5：{类型：“steppedArea”}}   
   });

```******

# jira - Jira 查询中的版本层次结构

> ID：11212496
> 
> 赞同：0
> 
> 时间：2012-06-26T17:09:13.190
> 
> 标签：jira

我想在层次结构中配置 Jira 中的版本，以便搜索 fixVersion=A 也会发现 fixVersion 等于子版本的问题。

举一个具体的例子，我有像“Release 10”、“Release 10 - Integration Build 1”和“Release 10 - Sprint 1”这样的版本，它们在逻辑上是相互嵌套的。我想搜索 fixVersion="Release 10" 以返回具有这 3 个值中的任何一个的问题。

我知道我可以为每个问题分配 3 个 fixVersion 值，但这变得相当乏味。我也知道我可以搜索 3 个 fixVersion 值，但是一次性搜索也变得相当乏味。此外，Jira 的 Greenhopper 插件具有版本层次结构，但 Jira 核心似乎并不在意。最后，fixVersion 字段不允许字符串操作，所以我不能将它与“Release 10”模糊匹配。

有什么我错过的技巧吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:22:02.130

您可以使用“in”运算符使查询更轻松。例如 fixVersion in ("August release", "Aug-Sprint 1", "Aug-Sprint 2")

或者，如果您使用的是创建名为“Sprint”的新自定义字段的快速板，则可以使用 ">=" 运算符。这看起来还是有点棘手，但我们仍处于测试阶段，尚未升级到 GH v5.10，例如 Sprint >= "1" 或 Sprint >= "2" 等，会发现所有版本晚于X。

# javascript - HTML5/CSS3 我可以将 :invalid 和 :required 应用于非表单输入元素吗？

> ID：11212498
> 
> 赞同：2
> 
> 时间：2012-06-26T17:09:15.610
> 
> 标签：javascript, forms, html, css

我正在使用样式化的表单，结合了许多 jQuery 插件来帮助设置表单元素的样式，例如`<select>`和`<input type="checkbox" />`. 这些插件隐藏了原始表单输入，并用一组可替换的 HTML 元素（`<div>`、`<a>`、`<ul>`等）替换它们。`[required]`唯一的问题是，如果用户尝试在未填写必填字段的情况下提交表单，他们似乎没有处理该属性并应用浏览器（Firefox、Chrome）的框阴影效果。有没有一种简单的方法可以让这些`[required]`属性转换为替换元素？我只是扩展插件并让它们将`[required]`属性复制到替换元素，但我怀疑`<div>`标签是否支持`[required]`. 我在 Internet 上环顾四周，但没有找到太多有用的指南。有没有我想念的解决方法？我只是想不出该怎么做。

我想我可以使用成熟的客户端验证，但我试图将 jQuery/JavaScript 干预降至最低。如果没有好的方法可以做到这一点，我会去使用表单验证插件或其他东西。现在，为了样式的一致性，我用一些 CSS 禁用了所有的 box-shadow 效果：

```
input:invalid, input:required,
textarea:invalid, textarea:required,
select:invalid, select:required {
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    -box-shadow: none;
} 
```

# javascript - javascript中带有RegExp的单词边界正则表达式

> ID：11212501
> 
> 赞同：1
> 
> 时间：2012-06-26T17:09:28.870
> 
> 标签：javascript

> 不欠任何人任何东西

```
> str.replace(/\bno\b/g, 'yes');
'Owe yes one anything to another'

> str.replace(new RegExp('\bno\b','g'),'yes');
'Owe no one anything to another' 
```

为什么在这种情况下使用 RegExp 不起作用？我需要使用它，以便我可以

```
var regex = new RegExp('\b'+ **myterm** +'\b','g');  or
var regex = new RegExp('(^|\s)'+ **myterm** +'(?=\s|$)','g'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:12:33.267

以这种方式使用 RegExp 字符串时，您需要转义反斜杠：

```
str.replace(new RegExp('\\bno\\b', 'g'), 'yes'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:12:09.570

显然`\b`必须逃脱，例如，

```
new Regexp('\\b' + **myterm** + '\\b'); 
```

# regex - 获取链接文本和href并将其包装在其他html标签中

> ID：11212504
> 
> 赞同：-3
> 
> 时间：2012-06-26T17:09:37.433
> 
> 标签：regex, replace

怎么会有这样的东西：

```
<b><a class='visit' href='LINK'>LINK'S NAME</a></b> 
```

可以变成这样：

`<tr><td>LINK'S NAME<а href="LINK">constant text</a></td></tr>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:23:20.710

除非您有充分的理由这样做，否则您永远不应该**将正则表达式用于 HTML 操作。**

* * *

*匹配的正则表达式：*

`/<b>\s*<a\s+class='visit'\s+href='([^']*)'\s*>([^<]+)<\/a>\s*<\/b>/`

*替换网：*

`"<tr><td>$2<а href=\"$1\">constant text</a></td></tr>"`

# web-services - 无状态 Web 服务在 Glassfish 3.1 的 HTTPS 中不起作用

> ID：11212505
> 
> 赞同：1
> 
> 时间：2012-06-26T17:09:40.010
> 
> 标签：web-services, jakarta-ee, https, wsdl, glassfish

我仍然认为自己是 Java Web 服务的新手，并且遇到了我无法克服的真正障碍。

我正在尝试部署`@Stateless`Web 服务并通过 https 访问它的 WSDL。每当我尝试访问它时，我都会在浏览器中收到以下错误：

```
Error generating artifacts for the following WSDL https://localhost:8181/TestService/Test?WSDL

Possible causes can be invoking https when the application is not configured for security 
```

控制台显示以下错误：

```
INFO: parsing WSDL...

WARNING: Invalid request scheme for Endpoint Test. Expected http . Received https
INFO: [ERROR] Premature end of file.
INFO:   line 1 of https://localhost:8181/TestService/Test?WSDL
WARNING: Invalid request scheme for Endpoint Test. Expected http . Received https
WARNING: MEX0008:Failed to parse metadata returned from server at https://localhost:8181/TestService/Test?WSDL using protocol SOAP_1_2\. Continuing attempts.
WARNING: Invalid request scheme for Endpoint Test. Expected http . Received https
WARNING: MEX0008:Failed to parse metadata returned from server at https://localhost:8181/TestService/Test?WSDL using protocol SOAP_1_1\. Continuing attempts.
WARNING: Invalid request scheme for Endpoint Test. Expected http . Received https
WARNING: MEX0008:Failed to parse metadata returned from server at https://localhost:8181/TestService/Test?WSDL/mex using protocol SOAP_1_2\. Continuing attempts.
WARNING: Invalid request scheme for Endpoint Test. Expected http . Received https
WARNING: MEX0008:Failed to parse metadata returned from server at https://localhost:8181/TestService/Test?WSDL/mex using protocol SOAP_1_1\. Continuing attempts.
INFO: [ERROR] Premature end of file.
Failed to read the WSDL document: https://localhost:8181/TestService/Test?WSDL, because 1) could not find the document; /2) the document could not be read; 3) the root element of the document is not <wsdl:definitions>.
INFO: [ERROR] failed.noservice=Could not find wsdl:service in the provided WSDL(s): 
 At least one WSDL with at least one service definition needs to be provided.
INFO:   Failed to parse the WSDL.
INFO: Invoking wsimport with https://localhost:8181/TestService/Test?WSDL
SEVERE: wsimport failed 
```

同样，这**仅**在通过 HTTPS 访问时才会发生。常规的 HTTP 很好。但是，如果我要删除`@Stateless`注释，它可以在 https 上正常工作。`@Stateless`添加注释时失败。

我需要`@Stateless`注释，因为我将使用 JMS 队列，这样做时您需要它。

下面是我的课的代码：

```
package service.test;

import javax.ejb.Stateless;
import javax.jws.WebMethod;
import javax.jws.WebService;

@Stateless
@WebService
public class Test
{
    public String hello()
    {
        return "Hello!";
    }

    @WebMethod
    public int addNumbers(int number1, int number2)
    {
        return number1 + number2;
    }
} 
```

到目前为止，我从来不需要使用任何网络描述符。默认情况下，我所做的一切都在 Eclipse 中自动处理。我必须对描述符文件做任何特别的事情吗？如果有，有哪些？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:40:34.573

Https 默认使用 443 端口。如果您的网络服务正在侦听端口 8181，它将看不到 https 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:47:57.583

只是一个疯狂的猜测：您的信任库中是否有您的服务器证书颁发者？这可能是一个丑陋的 ssl 问题。（尽管它在没有@Stateless 的情况下工作的事实与我的理论相矛盾）

只是猜测...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T16:42:43.637

这是一个奇怪的问题，我从来没有真正弄清楚原因。奇怪的是，这个问题最终通过不需要`@Stateless`.

# c# - NodeList.SelectSingleNode() 语法

> ID：11212509
> 
> 赞同：2
> 
> 时间：2012-06-26T17:09:53.643
> 
> 标签：c#, xml, xpath, xml-namespaces, selectsinglenode

让 NodeList.SelectSingleNode() 正常工作时遇到问题。我的 XML 如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<inm:Results xmlns:inm="http://www.namespace.com/1.0">
    <inm:Recordset setCount="18254">
        <inm:Record setEntry="0">
            <!-- snip -->
            <inm:Image>fileName.jpg</inm:Image>
        </inm:Record>
    </inm:Recordset>
</inm:Results> 
```

数据是一长串`<inm:Record>`条目。

我打开文档并根据“inm:Record”创建一个 NodeList 对象。这很好用。

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(openFileDialog1.FileName);
XmlNodeList xRecord = xdoc.GetElementsByTagName("inm:Record"); 
```

我开始使用 for 循环遍历 NodeList。在处理给定条目之前，我想检查是否`<inm:Image>`已设置。我认为这样做会非常容易

```
string strImage = xRecord[i].SelectSingleNode("inm:Image").InnerText; 
```

我的想法是，“对于我正在使用的 XRecord，去寻找`<inm:Image>`价值......但这不起作用，因为我得到一个例外，说我需要一个 XmlNameSpaceManager。所以，我尝试设置它但永远无法获得正确的语法。

有人可以告诉我如何在这种情况下使用正确的 XmlNameSpaceManager 语法。

我现在已经通过循环遍历给定 xRecord 的所有 childNodes 并在我循环到它时检查标签来解决这个问题。我想先检查那个值，看看我是否需要遍历那个`<inm:Record>`条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:35:30.657

无需遍历所有 Record 元素，只需使用 XPath 指定您想要的子集：

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(openFileDialog1.FileName);
XmlNamespaceManager manager = new XmlNamespaceManager(xdoc.NameTable);
manager.AddNamespace("inm", "http://www.inmagic.com/webpublisher/query");
XmlNodeList nodes = xdoc.SelectNodes("/inm:Results/inm:Recordset/inm:Record[inm:Image != '']", manager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:23:20.663

```
XmlNamespaceManager nsMgr = new XmlNamespaceManager(xdoc.NameTable);
string strImage = xRecord[i].SelectSingleNode("inm:Image",nsMgr).InnerText; 
```

应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:27:55.123

使用[LINQ to XML](http://msdn.microsoft.com/en-us/vstudio/bb688087.aspx)库，下面是一个检索该节点值的示例：

```
XDocument doc = XDocument.Load(openFileDialog1.FileName);
List<XElement> docElements = doc.Elements().ToList();
XElement results = docElements.Elements().Where(
   ele => ele.Name.LocalName == "Results").First();
XElement firstRecord = results.Elements().Where(
   ele => ele.Name.LocalName == "Record").First();
XElement recordImage = firstRecord .Elements().Where(
   ele => ele.Name.LocalName == "Image").First();
string imageName = recordImage.Value; 
```

另外，顺便说一句，[对类型检查语言使用匈牙利表示法是矫枉过正的](https://en.wikipedia.org/wiki/Hungarian_notation#Disadvantages)。您不需要在字符串变量前面加上`str`when 它总是一个`string`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T18:51:18.353

使用这个[Xml 库](https://github.com/ChuckSavage/XmlLib/)，您可以获取所有具有 Image 子元素的记录：

```
XElement root = XElement.Load(openFileDialog1.FileName);
XElement[] records = root.XPath("//Record[Image]").ToArray(); 
```

如果您想确定 Image 子项包含一个值，可以这样表示：

```
XElement[] records = root.XPath("//Record[Image != '']").ToArray(); 
```

# assembly - 如何证明左移逻辑乘以 2^n？

> ID：11212510
> 
> 赞同：2
> 
> 时间：2012-06-26T17:10:00.493
> 
> 标签：assembly, mips

我读到 Shift Right Logical 将数字除以 2^n，我做了以下证明。

```
srl $t2,$t1,1

  $t1:  10100111  :  167
  $t2:  01010011  :  83 
```

另外，我读到左移逻辑乘以 2^n。但是我不能显示这个。

```
sll $t2,$t1,1

  $t1:  10100111  :  167
  $t2:  01001110  :  78 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:11:19.867

我猜你是在 8 位类型上操作，所以你的左移值溢出了。

*   (167 * 2) = 334

*   334 % 256 = 78

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T22:42:10.810

换档时你扔掉了一点。解决办法确实是101001110，但是只能存储01001110（根据例子）。

所以，通常是的，sll 乘以 n^2，如果它适合寄存器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-26T00:22:59.160

当然，根据定义，它确实如此。让我们看看以 10 为底。我取数字 12345。我将其左移一个位置，用零填充我得到 123450。再做一次 1234500 等等。对于每个位置，我乘以 10。如果我做三班，那么就是 10*10*10 或 10^3。以 b 为底的 n 次左移与乘以 b^n 相同。基数 2，基数 8，基数 10，基数 16。所有工作都相同。

# iphone - iPhone：如何制作可以轻松点击的 UIButton？

> ID：11212513
> 
> 赞同：7
> 
> 时间：2012-06-26T17:10:18.447
> 
> 标签：iphone, ios, uikit, uibutton

我正在使用`UIView`and`UIButtons`而不是`UINavigationBar`.

但是`UIButtons`导航栏上的我的反应不灵敏。

我必须点击几乎中心`UIButton`才能点击。
如果我点击`UIButton`.

但是`UINavigationBar`可以通过点击按钮的边缘来点击正常的按钮。
即使在按钮外部点击，也可以点击它。

相机应用程序上的快门按钮或选项按钮也可以通过点击按钮的边缘或外部来点击。

如何在我的应用程序中实现那些易于点击的按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T18:31:12.193

使用图像并创建自定义按钮。设置按钮，使图像不会缩放到按钮视图的大小，而只是居中。扩大按钮的大小，使其大于每一侧的图像。Apple 也通过标签按钮之类的功能做到这一点。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T14:03:28.110

`UIButton`有专门为此目的的[`imageEdgeInsets`财产。](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html#//apple_ref/occ/instp/UIButton/imageEdgeInsets)只需为可触摸区域制作一个与您需要的一样大的 UIButton 框架，然后使用`imageEdgeInsets`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T19:42:35.367

**免责声明：** *此代码尚未经过测试，但它让您了解如何完成它。*

您制作一个按钮（在本例中为 40 像素 x 40 像素），然后向其添加一个较小的背景图像，因此给人的印象是该图像非常“可点击”。

```
// This image is 20px x 20px (Just an example)
UIImage* backgroundImage = UIImage imageNamed:@"backgroundImage.png"]

// Custom button, remember to add a target method
UIButton* customButton = [UIButton buttonWithType:UIButtonTypeCustom];
customButton.frame = CGRectMake(0.0, 0.0, 40.0, 40.0);
customButton.contentMode = UIViewContentModeCenter;
[customButton setImage:backgroundImage forState:UIControlStateNormal];

UIBarButtonItem* customBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:customButton];
self.navigationItem.rightBarButtonItem = customBarButtonItem;
[customBarButtonItem release]; 
```

# wpf - 在 ListBoxItem 模板中，如何根据 IsSelected 更改项目的视觉状态？

> ID：11212519
> 
> 赞同：1
> 
> 时间：2012-06-26T17:10:43.470
> 
> 标签：wpf, listbox

我想增加 ListBox 中选定项目的大小并显示额外的控件。我不确定 ListBoxItem 模板如何知道该项目是否被选中。过去，我会将所有项目都包装在单选按钮中，但它非常笨重，根本没有使用 ListBox 选择。我真的很想有更好的方法。理想情况下，我希望更改处于可视状态，以便为过渡设置动画。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:25:35.877

ListBoxItem 已经定义了视觉状态`Selected`和`Unselected`. 有关 ListBoxItem 的默认样式中的 ControlTemplate 如何处理这些状态，请参阅[ListBox 样式和模板](http://msdn.microsoft.com/en-us/library/ms754242%28v=vs.100%29)。

# mysql - Mysql 3表，复制列

> ID：11212523
> 
> 赞同：0
> 
> 时间：2012-06-26T17:11:09.633
> 
> 标签：mysql

我有来自同一个数据库 Db1 的三个 mysql 表。

三个表具有以下列。

表一：名称城市分公司

表 2：年龄地址国家

表 3：无列。

我想将 Table1.Name 和 Table2.Age 复制到表 3。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:19:49.663

如果 table1 和 table2 不能连接并且 table 3 没有 2 列，这没有什么意义。如果可以加入：

```
insert into table3 (name, age)
select table1.name, table2.age
from table1 join table2 on (table1.columnToLinkFromTable1 = table2.columnToLinkFromTable2) 
```

你也可以这样做，但当然没有多大意义：

```
insert into table3 (name, age)
    select table1.name, table2.age
    from table1, table2 
```

# java - 具有泛型返回类型的棘手静态泛型方法，其本身可能是泛型

> ID：11212529
> 
> 赞同：7
> 
> 时间：2012-06-26T17:11:30.177
> 
> 标签：java, generics

我有一堂课如下：

```
public class MyConverter {
    public <T> T convert (Object o, String typeidentifier, T dummy)
    {
         ... do some conversions such as a java array to an ArrayList or vice versa
         ... based on a typeidentifier syntax similar to Class.getName() but which
         ... embeds information about generic subtypes
    }
} 
```

并希望能够做这样的一般事情：

```
int[] ar = {...};
ArrayList<Integer> dummy = null;
Integer elem = MyConverter.convert(ar, "java.util.ArrayList<Integer>", dummy)
                  .get(15); 
```

也就是说，`T`in convert 本身可能是一个通用实例，我发现要实现这个目标，我必须传递一个完全类型化的虚拟对象，因为如果我使用`ArrayList.class`它，它不会给 java 编译器足够的信息而不是.`ArrayList<Integer>``Class<T> dummycls``T dummy`

我错过了什么吗？有没有办法在不需要假人的情况下编写和调用转换？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T17:26:31.157

在调用时指定类型，而不是让 java 推断类型：

```
Integer elem = MyConverter.<ArrayList<Integer>>convert(ar, "java.util.ArrayList<Integer>"); 
```

[这个链接](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)描述了这个（很酷的）语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T17:20:12.277

这种看起来像 Arrays.asList，它将接受一个原生数组并将其转换为一个 ArrayList。

一个实现可能如下所示：

```
 public static <T> List<T> asList(T... a) {
    ArrayList<T> arr = new ArrayList<T>();
    for (T item: a) {
        arr.add(item);
    }
    return arr;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-11T07:12:16.677

您可以在 convert 方法中编写任何要转换的逻辑并将其转换为泛型类型并返回。

```
 public class MyConverter {
        public static void main(String[] args) {
            Integer i = MyConverter.convert();
            System.out.println(i);
        }

        @SuppressWarnings("unchecked")
        private static <T> T convert() {
            Integer i = new Integer(10);
            return (T)i;
        }
    } 
```

# symfony - 教义查询生成器错误

> ID：11212532
> 
> 赞同：2
> 
> 时间：2012-06-26T17:11:39.227
> 
> 标签：symfony, doctrine-orm, query-builder

嘿伙计们，我有接下来的两个实体：

```
class CarInqueritoExtraFields
{
 /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

 /**
     * @var DbaCustomFields
     *
     * @ORM\ManyToOne(targetEntity="DbaCustomFields", inversedBy="inqueritoExtraFields")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="id_custom_field", referencedColumnName="id", onUpdate="cascade", onDelete="cascade", nullable = false)
     * })
     */
    private $idCustomField;
}

class DbaCustomFields
{
 /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @ORM\OneToMany(targetEntity="CarInqueritoExtraFields", mappedBy="idCustomField", cascade={"persist"})
     */
    private $inqueritoExtraFields;

    /**
     * @var integer $idContacto
     *
     * @ORM\Column(name="nome", type="string", nullable=true)
     */
    private $nome;  
} 
```

这两个实体都有获取/设置。我的 DbaCustomFieldsRepository 中有以下方法：

```
public function getCustomFieldsNotUsed($idInquerito) {

        $qb = $this->getEntityManager()->createQueryBuilder();
        $qb2 = $this->getEntityManager()->createQueryBuilder();

        $qb->select('cf')
                ->from('CareAdminBundle:DbaCustomFields', 'cf')
                ->where($qb->expr()->notIn('cf.id', $qb2->select('ief.idCustomField')
                                ->from('CareAdminBundle:CarInqueritoExtraFields', 'ief')
                                ->where('ief.idInquerito = :idInquerito')
                                ->getDQL()))
                ->setParameter('idInquerito', $idInquerito);

        return $qb;
    } 
```

我在我的 formBuilder 中得到了 $qb：

```
 public function buildForm(FormBuilder $builder, array $options){

        $id_inquerito = $this->id_inquerito;
        $builder->add('idCustomField', 'entity', array(
                    'empty_value' => 'Escolha um campo',
                    'class' => 'Care\AdminBundle\Entity\DbaCustomFields',
                    'required' => false,
                    'query_builder' => function(\Care\AdminBundle\Repository\DbaCustomFieldsRepository $repository) use ($id_inquerito){
                        return $repository->getCustomFieldsNotUsed($id_inquerito);
                    }));     
    } 
```

但是我收到了这个错误，但我不知道为什么：

> *在第 19 行的 ::base.html.twig 中呈现模板（“[Semantical Error] line 0, col 80 near 'idCustomField': Error: Invalid PathExpression. Must be a StateFieldPathExpression.”）时引发了异常.*

我认为问题应该出在我的 QueryBuilder 中，但我不知道为什么.. 任何帮助表示赞赏！谢谢 ：）

----------------------------------**更新**---------------- ------------------------------ 好吧，我设法得到了解决方案，也许不是正确的方法，但它很好用. 问题出在查询构建器上，所以我这样做了：

```
//First i pick the CarInqueritoExtraFields By IdInquerito and save the idCustomField from the retrieved object in a array.

 $em = $this->getEntityManager();
        $carInqueritoExtraFieldsByIdInquerito = $em->getRepository('CareAdminBundle:CarInqueritoExtraFields')->findByIdInquerito($idInquerito);
        $arrayExtraFields = array();
        foreach ($carInqueritoExtraFieldsByIdInquerito as $extraField) {
        array_push($arrayExtraFields, $extraField->getIdCustomField()->getId());
    }

//Then this:
 $qb->select('cf')
            ->from('CareAdminBundle:DbaCustomFields', 'cf')
                ->where($qb->expr()->notIn('cf.id', $arrayExtraFields)); 
```

如果有人有更好的方法，请随时告诉我:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:25:39.293

您正在尝试嵌套查询构建器，这是完全无效的教义。请改用联接。

# ruby-on-rails - 我可以做些什么来解决我在 Rails 教程第八章中遇到的这个语法错误？

> ID：11212533
> 
> 赞同：0
> 
> 时间：2012-06-26T17:11:39.913
> 
> 标签：ruby-on-rails, ruby, rspec

我正在阅读 Rails 教程并在第 8 章（我正在研究身份验证系统）。当我运行到目前为止准备好的测试套件时，我收到了 8 个相同的错误，其中包含以下信息：

```
rails_projects/sample_app/app/views/sessions/new.html.erb:9: syntax error, unexpected ':'
   ..._buffer.append= ( f.text_field: :email );@output_buffer.safe... 
```

我的测试代码和嵌入式 ruby​​ 代码在以下要点中：[https](https://gist.github.com/2997168) ://gist.github.com/2997168 。

第9行`new.html.erb`是：

```
<%= f.text_field: :email %> 
```

您能提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:17:45.530

您认为错误是：

```
<%= f.text_field: :email %>
                ^-here 
```

删除冒号，你应该没问题。

# python - 如何将2个字符串与python进行比较

> ID：11212535
> 
> 赞同：-5
> 
> 时间：2012-06-26T17:11:42.147
> 
> 标签：python, string, compare, character

我想比较python中的两个字符串。

例如：

```
str1 = 'hello'

str2 = 'lolhe' 
```

我想比较`str1`并`str2`得到结果，`True`因为它们包含相同的字符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T17:15:22.113

尝试：

```
sorted(str1) == sorted(str2) 
```

这首先对字符串进行排序并比较结果。如果它们具有相同的字符，则这些字符在排序后将始终以相同的方式排序。

如果您不关心重复的字符（例如 if `'hello'`should equal `'helo'`），那么您可以使用一个集合：

```
set(str1) == set(str2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:21:06.323

```
t1 = 'hello'
t2 = "lolhe"
hist1 = {}
hist2 = {}
for x in t1: hist1[x] = hist1.setdefault(x,0)+1
for x in t2: hist2[x] = hist2.setdefault(x,0)+1
hist1 == hist2 
```

[编辑]另一个答案中的排序方法更好

# iphone - 在手机上使用 CSS 技巧全宽

> ID：11212536
> 
> 赞同：3
> 
> 时间：2012-06-26T17:11:45.500
> 
> 标签：iphone, css, mobile

无论如何将Chris Coyier的这种方法应用于手机：[http ://css-tricks.com/full-browser-width-bars/](http://css-tricks.com/full-browser-width-bars/)

我申请了

```
html {overflow-x: hidden;} 
```

摆脱水平滚动条，但例如在 iphone 上查看时。有一个水平滚动条。

您可以在此处查看该网站：[http ://www.revival.tv/turningpoint/](http://www.revival.tv/turningpoint/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:16:55.253

尝试`<meta name="viewport" content="width=device-width" />`在页面的 head 标记中添加。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:17:14.970

也可以尝试将它添加到 body 标签中。

正文 {溢出-x：隐藏；}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:23:45.007

找到导致滚动条的东西并摆脱它。隐藏 overflow-x 对我来说似乎有点像贴膏药——如果你一开始就做对了，你就不应该需要这个。使用媒体查询允许您在不同的屏幕尺寸下设置页面的宽度。这意味着您几乎可以将内容包装在 div 中，并将其宽度设置为不同的屏幕尺寸

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T03:13:45.520

我发现 initial-scale 属性正在使包含嵌入式 Google 地图的网页的 Safari 崩溃。[http://w.pat.tc](http://w.pat.tc)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-05T07:05:40.387

使用此代码

```
<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
```

这对我的移动网络有用[http://www.sepatuonline-murah.com](http://www.sepatuonline-murah.com)

# apache-flex - 在 Flex 中延迟渲染视口之外的组件

> ID：11212537
> 
> 赞同：1
> 
> 时间：2012-06-26T17:11:58.900
> 
> 标签：apache-flex, rendering, deferred-execution

我正在寻找一些关于快速显示我们的报告的建议。我正在处理的问题是我收到了一个定义我们布局的 XML 数据结构。报告可以是 2 到 3 页，也可以是 20 到 30 页。因此，为了使报告尽快显示，我只想呈现报告的可见部分。以下是我需要克服的问题，我正在寻找一些如何实现这一点的建议。

为了获得更好的可视化效果，可以把它想象成一个 word 文档。报告有部分，我希望能够让它们尽快显示。

1) 当然，我不知道要添加的子组件的高度。是否有任何技术可以确定我添加的组件是否不包含在视口中，我是否可以触发滚动条移动。

2）我正在考虑向子组件添加估计，然后使用它来设置父容器的高度。然后当我收到滚动条移动事件时，我会检查子组件是否已添加到父组件，如果没有添加它们。无论如何都可以在不渲染组件的情况下获得组件的高度？

3) Flex 是否支持任何内置的东西来实现这一点。

欢迎任何其他技术。基本上，我希望尽快将报告显示给用户，并延迟渲染不在屏幕上的组件。

任何建议都会受到欢迎。提前致谢。

添加信息。
很难提供代码，因为我还没有编码。让我尝试扩展一些细节。我有一个父容器，我在其中获取一些 XML，并使用 XML 根据 XML 中的信息创建子组件。现在，当我们这样做时，可能需要很长时间才能呈现长报告。我想要做的是通过延迟这些子对象的渲染来减少渲染时间。我研究了诸如创建策略和 createDeferredContent 之类的东西，但不确定这是否是正确的方法。猜猜我需要解决的一般问题是，一旦您在父视口之外，如何停止渲染对象。我想要的是一个类似功能的项目渲染器，但孩子之间没有相似之处。也许一张图片可能有用（一旦我达到 10 分就会添加）？

![图片显示了我要解释的内容](../Images/d143891ebf00215a04e660cdeac9b91f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T22:53:05.117

使用`useVirtualLayout`开启的火花列表。这就是它的作用。

孩子之间总是有相似之处，但如果找不到，可以使用`itemRendererFunction`.

# c# - 私有变量的自动属性是否不必要？

> ID：11212542
> 
> 赞同：4
> 
> 时间：2012-06-26T17:12:08.730
> 
> 标签：c#, class, automatic-properties

我在看别人的代码，遇到了这段代码

```
private string _deviceName { get; set; }
private string _deviceAlias { get; set; } 
```

我的想法是那些私有变量的自动属性是不必要的。我这样想对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T17:14:26.903

> 我的想法是那些私有变量的自动属性是不必要的。我这样想对吗？

它们不是必需的，但它们也不会真正伤害任何东西。话虽如此，它们也没有真正的帮助，因为它们纯粹是一个实现细节，所以稍后从一个字段切换到一个属性不会是一个重大变化。

可能这样做的唯一真正原因是，如果您知道将来需要在 get 或 set 上自定义逻辑，并且您使用的某些东西需要属性的语法不同，例如反射。在这种情况下，现在将它们设置为自动属性将防止以后更改代码的任何需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:15:26.207

只是您没有创建变量，而是创建了一个属性，将来您希望在设置和检索值时对其进行一些自定义工作。

# c++ - gcc 4之后C ++中的线程安全单例？

> ID：11212546
> 
> 赞同：1
> 
> 时间：2012-06-26T17:12:25.140
> 
> 标签：c++, multithreading, gcc, static, thread-safety

我听说在某些版本的 gcc 之后使用了类似的东西：

```
static A* a = new A();
return a; 
```

对于单例来说是线程安全的，并且不再需要从[http://locklessinc.com/articles/singleton_pattern/](http://locklessinc.com/articles/singleton_pattern/)改编的东西......

有没有人有具体的参考或链接到我可以阅读的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:58:28.090

标准草案（n3337.pdf）第 6.7 节，第 4 点：

具有静态存储持续时间 (3.7.1) 或线程存储持续时间 (3.7.2) 的所有块范围变量的零初始化 (8.5) 在任何其他初始化发生之前执行。如果适用，具有静态存储持续时间的块范围实体的常量初始化（3.6.2）在其块首次进入之前执行。允许实现在与允许实现在命名空间范围（3.6.2）中静态初始化具有静态或线程存储持续时间的变量相同的条件下，对具有静态或线程存储持续时间的其他块范围变量执行早期初始化。否则，此类变量在控件第一次通过其声明时被初始化；这样的变量在其初始化完成时被认为已初始化。**如果在初始化变量时控制同时进入声明，则并发执行应等待初始化完成**。88 如果在初始化变量时控制以递归方式重新进入声明，则行为未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:08:59.483

GCC 遵循跨供应商[Itanium C++ ABI](http://sourcery.mentor.com/public/cxx-abi/abi.html)。涉及函数局部静态的线程安全初始化的相关部分是[2.8 Initialization guard variables](http://sourcery.mentor.com/public/cxx-abi/abi.html#guards)和[3.3.2 One-time Construction API](http://sourcery.mentor.com/public/cxx-abi/abi.html#once-ctor)，其中说：

> 不期望支持多线程的实现可以简单地检查该保护变量的第一个字节（即具有最低地址的字节），当且仅当其值为零时才初始化，然后将其设置为非零值.
> 
> 但是，旨在支持自动线程安全的一次性初始化（相对于要求显式用户控制线程安全）的实现可能会使用以下 API 函数： ...

该 API 的早期 GCC 实现中有一些错误，我认为它们都已修复，并且从 GCC 4.3 版开始可以正常工作（可能更早，我不记得，现在找不到参考。）

但是，[Singleton 是一个糟糕的](https://stackoverflow.com/q/137975/608639)、糟糕的模式，不要使用它！

# javascript - 如何清除 Visualforce 页面中的查找字段值？

> ID：11212551
> 
> 赞同：1
> 
> 时间：2012-06-26T17:12:45.373
> 
> 标签：javascript, salesforce, apex-code, visualforce

一旦填充了查找字段并且我稍后打开相同的 visualforce 页面，然后查找字段被预填充。

我想把“X”放在查找字段旁边，这样当点击“X”时，字段值就会被清除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T00:09:14.617

您可以使用一些简单的 javascript 将字段的值设置为空白来做到这一点，关于获取要使用的元素的 ID，只有一点 Force.com 的魔力。下面是一个完整的页面，可以满足您的需要。

```
<apex:page standardController="Contact">
    <apex:form >
        <apex:inputField id="accountLookup" value="{!Contact.AccountId}"/>
        <a href="#" onClick="document.getElementById('{!$Component.accountLookup}').value = ''; return false;">Clear</a>
        <apex:commandButton action="{!Save}" value="Save"/>
    </apex:form>
</apex:page> 
```

**请注意**，[将 javascript 应用于链接的推荐方法是在页面加载时执行此操作](https://stackoverflow.com/a/692954/481044)，尽管您可能会发现执行上述操作更简单，因为它无需深入到元素`{!$Component.Parent.Child.Grandchild}`（使用`<apex:pageBlock>`等时需要）和如果未启用 javascript，您的用户将遇到比您的链接不工作更大的问题！

# sql-server - 使用 Linq to SQL 时 SQL Server 中的内存泄漏

> ID：11212558
> 
> 赞同：0
> 
> 时间：2012-06-26T17:13:14.737
> 
> 标签：sql-server, linq-to-sql, memory-leaks

我正在使用以下模式使用 Linq to SQL 更新我的 SQL Server 记录：

```
 List<int> allIds;

    using (MyDataContext dc= new MyDataContext())
    {
        dc.CommandTimeout = 0;
        allIds = dc.MyTables.Select(x => x.Id).ToList();
    }

    Parallel.ForEach(allIds, x => ComputeAndSave(x)); 
```

和

```
 ComputeAndSave(int x, MyDataContext dc)
    {
       var myRecord= dc.MyTables.Select(x => x).Where(x => x.Id == id).FirstOrDefault();
       myRecord.Total = myRecord.Total + 1; //some modification(s)
       dc.SubmitChanges();
    } 
```

我在应用程序的多个部分使用相同的模式来更新某些表中的所有行。并且在所有这些情况下，SQL Server 使用的内存都会慢慢增加、增加和增加。我发现释放所有内存的唯一方法是停止并重新启动 SQL Server 服务。为什么这里有内存泄漏，如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:17:29.733

SQL Server*应该*占用所有可用内存。它应该在无头服务器上运行。

在 SSMS 中，打开服务器属性并设置合理的最大服务器内存量。

# javascript - 将值从 Ruby on Rails 控制器传递到 Javascript 以进行渲染

> ID：11212563
> 
> 赞同：0
> 
> 时间：2012-06-26T17:13:26.840
> 
> 标签：javascript, ruby-on-rails

我有这个 JS highchart，我试图将一些值传递给在我的`pages_controller`. 我已经尝试过使用全局变量和实例变量，但似乎都不适用于渲染。我猜这个值没有传入。

在我的`pages_controller`我有：

```
> @nil_ref = (@counts[nil]/total.to_f)*10
> @email_ref = (@counts["email"]/total.to_f)*10
> @cpc_ref = (@counts["cpc"]/total.to_f)*10
> @display_ref = (@counts["display"]/total.to_f)*10 
```

然后在我的 /public/highcharts.js 文件中，我有：

```
var chart1; // globally available
   $(document).ready(function () {
       var chart = new Highcharts.Chart({
           chart: {
               renderTo: 'container',
               type: 'pie'
           },
           xAxis: {
               categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
           },
           yAxis: {   
           },
           legend: {
               layout: 'vertical',
               floating: true,
               backgroundColor: '#eeeeee',
               align: 'right',
               verticalAlign: 'top',
               y: 60,
               x: -60
           },
           tooltip: {
               formatter: function() {
                   return '<b>'+ this.series.name +'</b><br/>'+
                       this.x +': '+ this.y;
               }
           },
           plotOptions: {
           },
           series: [{
               data: [<%= @nil_ref %>, <%= @email_ref %>, <%= @cpc_ref %>, <%= @display_ref %>] //These need to be global vars        
           }]
       });
   }); 
```

当我在 Chrome 中检查元素时，我得到`Uncaught SyntaxError: Unexpected token`了 JS 中的 Ruby 标签。

任何想法如何成功传递这些值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:14:50.183

如果 RoR 数据是字符串，您需要这样做：

```
data: ["<%= @nil_ref %>", "<%= @email_ref %>", ... 
```

# php - 检索 tmpfile() 的路径

> ID：11212569
> 
> 赞同：64
> 
> 时间：2012-06-26T17:13:49.507
> 
> 标签：php

匆匆...

有没有办法检索由创建的文件的路径`tmpfile()`？

还是我需要自己做`tempnam()`？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-02-20T09:12:28.407

似乎[stream_get_meta_data()](http://www.php.net/manual/en/function.stream-get-meta-data.php)也有效：

```
$tmpHandle = tmpfile();
$metaDatas = stream_get_meta_data($tmpHandle);
$tmpFilename = $metaDatas['uri'];
fclose($tmpHandle); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T05:28:17.607

像这样

```
$path = array_search('uri', @array_flip(stream_get_meta_data($GLOBALS[mt_rand()]=tmpfile()))); 
file_put_contents($path, 'hello'); 
```

# iphone - 单击 UIButton 时从一个 UIViewController 重定向到另一个

> ID：11212570
> 
> 赞同：0
> 
> 时间：2012-06-26T17:13:58.713
> 
> 标签：iphone, ios, uitableview, uiviewcontroller, uibutton

我正在尝试构建一个可重用的代码，我将能够在我的 IOS 应用程序的多个地方使用它。
它所做的是创建一个表格，其中的每个单元格都有几个 UIButton。单击按钮时，需要将视图重定向到另一个 ViewController 并显示与该按钮相关的数据（例如用户 ID）。
因为我希望这段代码是可重用的，所以我创建了一个 UIViewController，其他视图将从中继承。我的 ViewController 以编程方式构建 UITableView 和单元格并填充里面的所有内容。
我唯一不知道的是如何在触摸 UIButton 时将视图重定向到下一个。我试图在没有转场的情况下做到这一点，因为我希望这是一个自我维持的组件，并且不需要“玩”故事板并在不同的地方重复推动相同的转场。

**任何建议将不胜感激！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:11:17.937

按下按钮时使用此代码

```
ViewController *obj = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];

[self.navigationController pushViewController:obj animated:YES]; 
```

ViewController 是你要去的控制器。

如果要传递数据，只需在 ViewController 中设置一个变量，然后单击按钮即可。在推送之前使用上面的代码和下面的行

```
obj.userId = @"UserId1"; 
```

# git - 仅获取 1 个文件夹的提交日志

> ID：11212571
> 
> 赞同：3
> 
> 时间：2012-06-26T17:14:01.130
> 
> 标签：git, file, logging, commit

我想要做的是获取仅与存储库中的 1 个文件夹有关的所有更改的提交日志。如果有的话，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:45:56.463

```
git log --all -- some/path 
```

为完整性而添加。您可能希望首先使用“查找副本”和“更难查找副本”来查看是否要添加另一个路径，以防此路径在历史记录中的某个时间点被重命名或复制。

# android - Android：数据库插入触发异常“递归调用getWritableDatabase”

> ID：11212576
> 
> 赞同：0
> 
> 时间：2012-06-26T17:14:03.800
> 
> 标签：android, android-asynctask, android-contentprovider, android-contentresolver, sqliteopenhelper

每当异步任务尝试将数据插入 SQLite 数据库时，我都会遇到以下异常。

> java.lang.IllegalStateException: 递归调用 getWritableDatabase

数据由运行单独的异步任务以下载、转换并最终插入数据的服务生成。我不确定我传递的**上下文对象是否正确。**请注意我添加到源代码中**的注释。**下面我添加了相关的类和函数。如果您需要更多信息，请发表评论。

```
public class CustomServiceHelper {

    // This method gets called by the activities.
    public static void loadData(Context context) {
        Intent intent = new Intent(context, CustomService.class);
        context.startService(intent);
    } 
} 
```

...

```
public class CustomService extends Service {

    private void startStoringTask(Users users) {
        // Passing the context of the service.
        mStoringTask = new StoringTask(this);
        Object[] params = { users };
        mStoringTask.execute(params);
    }
} 
```

...

```
public class UsersProvider extends ContentProvider {

    @Override
    public boolean onCreate() {
        // Not sure if getContext() is correct.
        mDatabase = new CustomDatabase(getContext());
        return true;
    }

    @Override
    public Uri insert(Uri uri, ContentValues values) {
        switch (URI_MATCHER.match(uri)) {
        case URI_CODE_USERS:
            long id = mDatabase.insertUsers(values);
            // TODO: Not sure about the return value.
            return ContentUris.withAppendedId(uri, id);
        }
        return null;
    }
} 
```

...

```
public class CustomDatabase {

    public class CustomSQLiteOpenHelper extends SQLiteOpenHelper {

        CustomSQLiteOpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(TABLE_USERS_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase database, int oldVersion, int newVersion) {
            throw new UnsupportedOperationException();
        }
    }

    private CustomSQLiteOpenHelper mDatabaseHelper = null;

    public CustomDatabase(Context context) {
        // The context is passed in by the UsersProvider.
        mDatabaseHelper = new CustomSQLiteOpenHelper(context);
    }

    public long insertUsers(ContentValues contentValues) {
        return mDatabaseHelper.getWritableDatabase().insert(
            CustomSQLiteOpenHelper.TABLE_USERS, null, contentValues);
    }
} 
```

...

```
public class StoringTask extends AsyncTask<Object, Void, Boolean> {

    private Context mContext = null;
    public StoringTask(Context context) {
        mContext = context;
    }

    @Override
    protected Boolean doInBackground(Object... params) {
        Users users = (Users)params[0];
        return storeUser(users);
    }

    private boolean storeUsers(Users users) {
        if (users == null) return false;
        // Not sure if calling getContentResolver on this context is correct.
        ContentResolver contentResolver = mContext.getContentResolver();
        Iterator<User> iterator = users.iterator();
        do {
            User user = iterator.next();
            storeUser(contentResolver, user);
        }
        while (iterator.hasNext());
        return true;
    }

    private void storeUser(ContentResolver contentResolver, User user) {
        ContentValues cv = new ContentValues(1);
        cv.put(CustomDatabase.Contract.COLUMN_NAME, user.name);
        contentResolver.insert(UsersProvider.Contract.URI_USERS, cv);
    }
} 
```

当我在*调试*模式下运行应用程序时，我最终进入了方法块`ThreadPoolExecutor`中的框架类。`finally``runWorker()`

* * *

**编辑：**
这是完整的异常堆栈跟踪。

```
java.lang.RuntimeException: An error occured while executing doInBackground()
android.os.AsyncTask$3.done(AsyncTask.java:200)
java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
java.util.concurrent.FutureTask.setException(FutureTask.java:124)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
java.util.concurrent.FutureTask.run(FutureTask.java:137)
java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
java.lang.Thread.run(Thread.java:1096)
Caused by: java.lang.IllegalStateException: getWritableDatabase called recursively
android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:81)
com.test.users.database.CustomDatabase.insertUsers(CustomDatabase.java:125)
com.test.users.database.CustomDatabase$CustomSQLiteOpenHelper.insertTestData(CustomDatabase.java:85)
com.test.users.database.CustomDatabase$CustomSQLiteOpenHelper.onCreate(CustomDatabase.java:60)
android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
com.test.users.database.CustomDatabase.insertUsers(CustomDatabase.java:125)
com.test.users.contentprovider.UsersProvider.insert(UsersProvider.java:51)
android.content.ContentProvider$Transport.insert(ContentProvider.java:174)
android.content.ContentResolver.insert(ContentResolver.java:587)
com.test.users.tasks.StoringTask.storeFeature(StoringTask.java:82)
com.test.users.tasks.StoringTask.storeResponse(StoringTask.java:58)
com.test.users.tasks.StoringTask.doInBackground(StoringTask.java:32)
com.test.users.tasks.StoringTask.doInBackground(StoringTask.java:1)
android.os.AsyncTask$2.call(AsyncTask.java:185)
java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

我没有提到`CustomSQLiteOpenHelper.insertTestData()`调用`getWritableDatabase()`. 我将方法称为`insertTestData()`. `CustomSQLiteOpenHelper.onCreate()`每当应用程序尚未创建数据库时，都会发生崩溃。总而言之，hawaii.five-0 是完全正确的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:07:38.513

> java.lang.IllegalStateException: 递归调用 getWritableDatabase

因此，当您使用**SQLiteOpenHelper**的or in or方法时，`Exception`通常会出现这种情况。`getWritableDatabase()``getReadableDatabase()``onCreate``onUpgrade`

# scala - PHP isset() 的 Scala 等价物

> ID：11212585
> 
> 赞同：0
> 
> 时间：2012-06-26T17:14:24.280
> 
> 标签：scala, playframework

如何测试并查看是否在 Scala 中设置了变量。在 PHP 中，您将使用 isset()

我正在寻找一种方法来查看是否在数组中设置了键。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:19:34.470

PHP 和 Scala 是如此不同，以至于没有直接的等价物。首先，Scala 提倡不可变变量（`final`在 Java 世界中），因此我们通常会争取始终设置的变量。

您可以检查`null`：

```
var person: Person = null
//...
if(person == null) {//not set
  //...
}
person = new Person()
if(person == null) {//set
  //...
} 
```

但这是一个糟糕的做法。最惯用的方法是使用[`Option`](http://www.scala-lang.org/api/current/scala/Option.html)：

```
var person: Option[Person] = None
//...
if(person.isDefined) {//not set
  //...
}
person = Some(new Person())
if(person.isDefined) {//set
  //...
} 
```

同样，使用`isDefined`不是最惯用的方式。考虑`map`和模式匹配。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T17:36:07.820

首先，`Array`在 Scala 中没有键。它们有索引，并且所有索引都有值。不过，请参阅下面有关如何初始化这些值的编辑。

您可能的意思是`Map`, 其中有键。`isDefinedAt`您可以使用or来检查键是否存在（因此是值）`contains`：

```
map isDefinedAt key
map contains key 
```

两者之间没有实际区别。现在，您在编辑中看到 Scala 偏爱使用`Option`，并且在处理地图时也有这种方法。如果你这样做：

```
map get key 
```

您将收到一个`Option`回复​​，`None`如果密钥（因此，值）不存在，这将是。

**编辑**

这是原始答案。我现在注意到这个问题并不完全是关于这个的。

实际上，JVM 上的所有字段都由 JVM 本身预先初始化，这会将其归零。在实践中，所有引用字段最终都指向`null`，布尔值被初始化为`false`，所有其他原语都被初始化为它们的版本为零。

Scala 中没有“未定义”字段这样的东西——你甚至不能写这样的东西。您可以编写`var x: Type = _`，但这只会导致 JVM 初始化值。您可以`null`在有意义的地方使用 来表示未初始化，但惯用的 Scala 代码会尽量避免这样做。

指示某个值不存在的可能性的常用方法是使用`Option`. 如果你有一个值，那么你得到`Some(value)`. 如果你不这样做，你会得到`None`. 请参阅有关各种使用方式的其他 Stack Overflow 问题`Option`，因为您也不会像`variable.isDefined`在惯用代码中那样使用它（尽管它有效）。

最后，请注意惯用的 Scala 代码使用`var`不多，更喜欢`val`. 这意味着您不会设置事物，而是生成该事物的新副本，并将该值设置为其他事物。

# java - 单个 Textview 的多个渐变

> ID：11212587
> 
> 赞同：1
> 
> 时间：2012-06-26T17:14:31.533
> 
> 标签：java, android

在android中可以将agradient引用到textview视为正常动作，

如下 ：

```
 android:background="@drawable/gredient" 
```

和渐变 XML 将如下代码：

```
<?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">
  <gradient android:startColor="#B22222" android:centerColor="#000000"
          android:endColor="#B22222" android:angle="0" /> 
    <corners android:radius="15dp"  /> 
 </shape> 
```

**我要问**的是在android中有没有**将多个渐变应用于**由可能段落组成的单个textview，所以每个段落都会有不同的渐变。

任何建议将被认真考虑 ，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T17:37:51.263

您可能要考虑使用 a`WebView`而不是`TextView`（如果您需要更高级的格式），但如果您想坚持使用 TextView，[`LineBackgroundSpan`](http://developer.android.com/reference/android/text/style/LineBackgroundSpan.html)是您的朋友 :)

尽管可能有一些更好的解决方案（很可能涉及自定义派生类），但这里有一些示例代码，只需实现一个特殊的接口[`Layout`](http://developer.android.com/reference/android/text/Layout.html)就可以满足您的需求：`LineBackgroundSpan`

```
public class MyActivity extends Activity {

    private Editable mEditable;

    private class MySpan implements LineBackgroundSpan {
        private final Rect rect = new Rect();
        private final Drawable drawable;
        private int next = 0;

        public MySpan(Drawable drawable) {
            this.drawable = drawable;
        }

        @Override
        public void drawBackground(Canvas c, Paint p, int left, int right, int top, int baseline,
                int bottom, CharSequence text, int start, int end, int lnum) {
            if (start == end) return;
            if (next == 0) {
                next = mEditable.nextSpanTransition(start, Integer.MAX_VALUE, MySpan.class);
                rect.left = left;
                rect.top = top;
            }
            if (next == end) {
                rect.right = right;
                rect.bottom = bottom;
                c.save();
                drawable.setBounds(rect);
                drawable.draw(c);
                c.restore();
            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final Resources res = getResources();
        final Drawable gd1 = res.getDrawable(R.drawable.gd1);
        final Drawable gd2 = res.getDrawable(R.drawable.gd2);
        final Drawable gd3 = res.getDrawable(R.drawable.gd3);
        final Drawable gd4 = res.getDrawable(R.drawable.gd4);

        final TextView tv = new TextView(this);
        setContentView(tv);

        tv.setText("Paragraphs with drawable background:\n", BufferType.EDITABLE);
        mEditable = tv.getEditableText();

        final String text = "paragraph text ";
        appendPara("###\n".replaceAll("#", text), gd1);
        appendPara("##############\n".replaceAll("#", text), gd2);
        appendPara("#######\n".replaceAll("#", text), gd3);
        appendPara("###########\n".replaceAll("#", text), gd4);
    }

    private void appendPara(String string, Drawable gd) {
        final int start = mEditable.length();
        mEditable.append(string);
        final int end = mEditable.length();
        mEditable.setSpan(new MySpan(gd), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:22:15.780

我认为 android 的默认 TextView 是不可能的。

您可以通过扩展您的类来创建自己的视图，`View`并使用视图方法中的`Canvas.drawText(...)`和等方法来创建具有不同渐变的每个段落。`Canvas.drawBitmap(...)``onDraw()`

这也可以帮助您控制行高和段落间距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T07:27:47.917

因为，您需要多个渐变来为您的多个渐变，`Paragraphs`那么为什么不使用`TextView`每个`Paragraph`渐变并为每个渐变设置唯一的渐变`TextView`。

如果你不知道你会有多少段，

您必须创建一个`LinearLayout`who `height`is `wrap-content`and 在运行时为每个段落创建一个`TextView`with `fill_parent width`and`wrap_context height`并将其添加`TextView`到您的父 ( `LinearLayout`) 视图。并在代码中设置`backgrounds`为您的`TextViews`.

# python - 单行代码检查二维嵌套内部字典中的键

> ID：11212588
> 
> 赞同：14
> 
> 时间：2012-06-26T17:14:40.150
> 
> 标签：python

是否有单行方法来检查 Python 2d dict 是否具有内部键/值？

现在我做这样的事情：

```
if d.has_key(k1):
    if d[k1].has_key(k2): 
        # do something 
```

有一个更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T17:17:05.720

```
if k2 in d.get(k1, {}):
    # do something 
```

如果您不关心 k1 是否实际存在，而只想知道 k2 是否存在，那么上面的片段很好。正如您从我的代码片段中看到的，我更喜欢`in`运算符，但您也可以简单地说

```
if d.get(k1, {}).has_key(k2):
    # do something 
```

如果您更喜欢该习惯用法，但该`has_key`方法在 Python 3.x 中已被弃用，因此您可能应该避免使用它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-26T17:17:36.233

您可以使用`in`：

```
if k1 in d and k2 in d[k1]: 
```

该`has_key`方法已被弃用，并在 Python 3.x 中被删除。

有关的：

*   ['has_key()' 还是 'in'？](https://stackoverflow.com/questions/1323410/has-key-or-in)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-11-20T01:57:02.333

我没有足够的声誉来发表评论，但请注意，如果 key1 的值为 None，那么最重要的建议将失败。

```
if k2 in d.get(k1, {}):
    # do something 
```

如果`d = {'k1': None}`是这样，请确保您的密钥的值失败。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-26T17:16:25.327

```
if d.has_key(k1) and d[k1].has_key(k2): 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T22:04:25.957

你的第一个问题的答案是肯定的。我考虑伊莱的回答

```
if k2 in d.get(k1, {}): 
```

最好的一个衬里，因为它避免在 d 中查找 k1 两次。第二个问题的答案取决于如果任一测试失败以及您想在两种失败情况下做不同的事情，您想做什么。如果是这样的话：

```
try:
    d1 = d[k1]
    if k2 in d1:
        <both tests passed>
    else:
        <second test failed>
except KeyError:
    <first test failed> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T17:19:16.403

不要`has_key()`使用在 python 3.x`get()`中`has_key()`已弃用的 use ：

```
d.get(k1,None) and d[k1].get(k2,None): 
```

# mysql - 用我的本地 MySQL 数据库更新我的远程 MySQL 数据库

> ID：11212592
> 
> 赞同：2
> 
> 时间：2012-06-26T17:14:52.193
> 
> 标签：mysql, perl, wamp

我有一个本地 Perl 脚本，它对网页进行大量解析，然后成功更新我的**本地**MySQL 数据库（WAMP 服务器）。我现在想将此本地数据发送到我的**远程**服务器，但我的托管公司**不允许远程连接到我的数据库。**不幸的是，我从未想过这个问题。

所以，我现在需要找到一种自动化的方式来更新我的远程服务器（每 15 分钟一次）。我错误地认为我可以使用远程服务器的详细信息来编辑我的 Perl 脚本。

我知道我可以使用 CGI 或 PHP 在服务器上进行解析，但我现在真的想保持本地解析。

**摘要：** 本地 MySQL 数据库 -> 远程 MySQL 数据库每 15 分钟 ??

有什么想法我能做什么？

谢谢 ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:22:00.460

如果复制不是一个选项，但您仍然可以建立从本地机器到远程机器的 ssh 连接，那么

1.  运行 mysqldump 将数据导出到文件[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_where](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html#option_mysqldump_where)
2.  scp 文件到远程盒子
3.  `mysql -u username -p password database_name < dumpfile.sql`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:23:42.923

如果您的服务器不接受远程连接到 mysql，您可以创建一个 ssh 隧道。然后就可以应用 matcheek 提出的复制方案了。

这是一个提示：[http ://realprogrammers.com/how_to/set_up_an_ssh_tunnel_with_putty.html](http://realprogrammers.com/how_to/set_up_an_ssh_tunnel_with_putty.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T20:54:14.000

根据我收到的回复，我认为我最初的问题的答案是停止使用廉价的共享托管公司（不能远程访问服务器、没有 cron 作业等）并开始使用 VPS 托管公司。这将使我可以自由地远程连接到我的服务器等。再次感谢那些回复的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T17:18:47.387

从您描述问题的方式来看，复制似乎是要走的路 [http://dev.mysql.com/doc/refman/4.1/en/replication-howto.html](http://dev.mysql.com/doc/refman/4.1/en/replication-howto.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T17:24:07.283

使用 cron 作业可能是另一种选择。它将从您的本地机器读取文件并在远程框中导入数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T17:25:32.260

我建议如下：

*   在每次**本地**运行时，将针对数据库副本运行的 SQL 语句 (sans `SELECT`) 也写入文件
*   在您的 WAMP 服务器上创建一个小的 PHP 脚本，从第一步返回最旧的脚本（soem auth ofcourse）
*   在您的远程服务器上运行一个 cronjob，它从您的本地服务器获取它并对数据库运行 SQL，然后确认它
*   在您的 WAMP 服务器上确认后，删除文件并返回下一个文件。

虽然这看起来很复杂，但它允许在连接丢失后重新启动 - 我认为这很重要。

# c# - 在 wp7 上使用网站的 API

> ID：11212593
> 
> 赞同：0
> 
> 时间：2012-06-26T17:14:53.270
> 
> 标签：c#, windows-phone-7

我想创建一个将 URL 转换为 PDF 文档的 wp7 应用程序。我想为我的应用程序使用 joliprint.com 服务。我为 URL 创建了一个文本框（**名为 textBox1**），并为提交 URL 创建了一个按钮（**名为 button1**）。任何人都可以帮助我，或者任何人都可以为此提供一些示例或示例。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:20:12.317

运行 Fiddler 并使用浏览器手动发出请求。从 Fiddler 收集的信息中，您应该能够识别查询格式。您正在寻找 HTTP 动词（GET 等）和 URL 格式（http://website.com/process.aspx?url=URLSUBMITTED）。一旦你有了这个，你就可以从你的应用程序中发出一个 HTTPWebRequest。

您可能应该确保您所做的事情不违反网站的使用条款。他们没有发布 API 可能是有原因的……最好请求许可，特别是如果您希望对该站点进行大量调用。

# android - Android：切换布局或活动？

> ID：11212601
> 
> 赞同：0
> 
> 时间：2012-06-26T17:15:21.340
> 
> 标签：android, user-interface

我可以实现这两种变体——这很容易。但我很感兴趣：什么方法更好？

我的意思是，如果我的应用程序包含多个屏幕，我可以将它们制作为多个布局（XML 文件）并使用`setContentView()`. 或者它们可以是几个类，比如`MyActivity1`，`MyActivity2`等等，我将使用`Intent`类来切换它们。

所以我很好奇：最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:20:45.950

记住这是经验法则：

最好在单个 Activity 下有相似的行为，但在行为不同时总是更喜欢不同的 Activity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:22:13.710

如果您使用几个不同的屏幕，我认为片段/活动将是一个更好的解决方案。Android 不仅包含此功能以帮助人们进行多项活动，而且还使您的代码更加简洁。米特拉总结得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:27:39.410

我认为在 Fragments 之前使用 setContentView() 是一种在兄弟“屏幕”之间移动的便捷方式，当您不希望后退按钮更改屏幕时。另一方面，通过 Intents 启动的活动将通过 Back 按钮从堆栈中弹出。

* * *

要清楚，请注意在 Activity B 中，您可以使用 setContentView 更改布局，Back 按钮将您带回 Activuty A。

```
ActivityA

  |
  |
  |
  V

ActivityB,Layout1  <---> ActivityB,Layout2  <---> ActivityB,Layout3 
```

# java - AWT Scrollpane 滚动条在调整大小时闪烁

> ID：11212606
> 
> 赞同：0
> 
> 时间：2012-06-26T17:15:45.220
> 
> 标签：java, swing, canvas, jframe, awt

我遇到了 java.awt.ScrollPane 类的 SCROLLBARS_AS_NEEDED 显示策略处理组件调整大小的问题。理想情况下，如果我有一个包含明显小于 Scrollpane 的 Component 的 ScrollPane，并且我将 Scrollpane 缩小到仍然大于子组件的大小，则不会出现滚动条。然而，实际上，在调整大小操作发生时，两个滚动条似乎都会闪烁，甚至可能会一直持续到操作完成后的下一次重绘。这是一个小例子来说明我的意思：

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.ScrollPane;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Tester implements Runnable{

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.setProperty("sun.awt.noerasebackground", "true");
        Tester t = new Tester();
        SwingUtilities.invokeLater(t);
    }

    @SuppressWarnings("serial")
    @Override
    public void run() {
        JFrame frame = new JFrame("Tooltip tester");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800, 800);
        Canvas c = new Canvas(){
            @Override
            public void paint(Graphics g){
                g.setColor(Color.WHITE);
                g.fillRect(0, 0, this.getWidth(), this.getHeight());
            }
        };
        c.setPreferredSize(new Dimension(400, 400));
        ScrollPane s = new ScrollPane();
        s.add(c);
        frame.add(s);
        frame.setVisible(true);
    }
} 
```

在上面的应用程序中缩小窗口应该会导致滚动条闪烁。我相信这是由 ScrollPane 对等点的实现中的错误引起的。（[来源在这里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/sun/awt/X11/XScrollPanePeer.java?av=h)）我已经复制了我认为有错误的方法（链接中的第 145 行）。

```
Dimension getChildSize() {
   ScrollPane sp = (ScrollPane)target;
    if (sp.countComponents() > 0) {
        Component c = sp.getComponent(0);
        return c.size();
    } else {
        return new Dimension(0, 0);
    }
} 
```

对我来说，getChildSize() 方法似乎应该调用 c.getPreferredSize() 而不是 c.size()。如果 ScrollPane 子项的大小大于其当前首选大小，它应该能够在不显示滚动条的情况下缩小（在我看来）。为了测试这个理论，我在上面的示例中覆盖了 size() 方法：

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.ScrollPane;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class Tester implements Runnable{

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.setProperty("sun.awt.noerasebackground", "true");
        Tester t = new Tester();
        SwingUtilities.invokeLater(t);
    }

    @SuppressWarnings("serial")
    @Override
    public void run() {
        JFrame frame = new JFrame("Tooltip tester");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(800, 800);
        Canvas c = new Canvas(){
            private Dimension prefSize = new Dimension();
            @Override
            public void paint(Graphics g){
                g.setColor(Color.WHITE);
                g.fillRect(0, 0, this.getWidth(), this.getHeight());
            }

            @Override
            public void setPreferredSize(Dimension preferredSize) {
                prefSize = preferredSize;
                super.setPreferredSize(preferredSize);
            }

            @Override
            public Dimension size() {
                return prefSize;
            }
        };
        c.setPreferredSize(new Dimension(400, 400));
        ScrollPane s = new ScrollPane();
        s.add(c);
        frame.add(s);
        frame.setVisible(true);
    }
} 
```

这段代码的行为正是我想要的。然而，重写 size() 方法来做一些文档说它应该做的事情之外的事情并不是解决这个问题的特别优雅的方法。我觉得我一定在这里做错了什么。X11 的 ScrollPane 对等点的一个相当基本的功能是否可能被破坏？

其他一些相关说明：
- 出于我的目的，使用 java.awt.Canvas 是不可协商的。在我的实际应用程序中，我使用 Java AWT Native Interface 非常快速地绘制了一些东西。
-虽然我阅读了有关 Java 7 和 Java 6 更高版本中轻/重兼容性的新改进的文档，但我并没有真正看到任何一种情况的改进，所以我决定坚持使用 awt.ScrollPane 而不是 swing.JScrollPane。无论哪种方式，ScrollPane 都应该在我上面展示的简单案例中正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:44:04.253

没有SSCCE很难帮助你，对于未来的读者

> 然而，实际上，在调整大小操作发生时，两个滚动条似乎都会闪烁，甚至可能会持续到操作完成后的下一次重绘

*   使用过的 LCD/LED 面板导致那些闪烁（包括 MsExcell，例如，顺便说一句，多次讨论），

*   对于带有 JScrollPane 的 Swing JFrame，同样的闪烁

*   不在 CRT 或等离子显示器上显示

*   如果您在 PC 上播放全高清视频，那么每个好的多媒体播放器都等到调整大小结束，然后将可用空间填充到其容器中

* * *

*   您必须添加 ComponentListener，将 Swing Timer 放在那里，延迟很小（KMPlayer 显示 350-500 毫秒），直到调整大小继续调用 Timer#restart，

*   Canvas 是 CAD / CAM、OpenGL(CL) 的好解决方法，好的 Java 视频播放器基于 AWT

*   您必须避免将 Swing Container 与 AWT 内容混合，让一切都基于 AWT（未装饰的容器）

# sql - 内连接sql语句

> ID：11212610
> 
> 赞同：0
> 
> 时间：2012-06-26T17:15:49.417
> 
> 标签：sql, tsql

我有两个表，发票和成员，通过字段 InvoiceNum 通过 PK/FK 关系连接。我创建了以下 sql，它工作正常，并按预期提取 44 条记录。

```
SELECT
  INVOICES.InvoiceNum,
  INVOICES.GroupNum,
  INVOICES.DivisionNum,
  INVOICES.DateBillFrom,
  INVOICES.DateBillTo
FROM INVOICES 
INNER JOIN MEMBERS ON INVOICES.InvoiceNum = MEMBERS.InvoiceNum
WHERE MEMBERS.MemberNum = '20032526000' 
```

现在，我想用`INVOICES.GroupNum`and替换`INVOICES.DivisionNum`上述查询中的`GroupName`and `DivisionName`。这些值存在于 Groups 和 Divisions 表中，这些表也具有相应的 Group_num 和 Division_num 字段。我创建了以下 sql。问题是它现在提取了 528 条记录而不是 44 条！

```
SELECT
  INVOICES.InvoiceNum,
  INVOICES.DateBillFrom,
  INVOICES.DateBillTo,
  DIVISIONS.DIVISION_NAME,
  GROUPS.GROUP_NAME
FROM INVOICES 
INNER JOIN MEMBERS ON INVOICES.InvoiceNum = MEMBERS.InvoiceNum 
INNER JOIN GROUPS ON INVOICES.GroupNum = GROUPS.Group_Num
INNER JOIN DIVISIONS ON INVOICES.DivisionNum = DIVISIONS.Division_Num
WHERE MEMBERS.MemberNum = '20032526000' 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:21:25.873

您的表之间至少有一个关系在您的查询中丢失。它为您提供额外的记录。查找所有常见字段。比如说，部门与群体有关吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:21:27.083

就 SQL 语法而言，该语句很好。

但是你必须问自己的问题（并回答它）：

*   `Groups`你得到多少行`GroupNum`？
*   同上`Divisions`- 存在多少行`DivisionNum`？

这些数字似乎不是唯一的-每个数字存在多行-因此您会返回多行

# php - 实现后端 yii

> ID：11212613
> 
> 赞同：1
> 
> 时间：2012-06-26T17:16:04.563
> 
> 标签：php, yii, admin

我正在尝试从 yii wiki [http://www.yiiframework.com/wiki/33/实现目录结构](http://www.yiiframework.com/wiki/33/)

我相信我已经正确设置了所有东西，但是当我尝试在后端/配置/主目录中使用 urlManger 时，我收到了这个错误。

属性“CWebApplication.urlManager”是只读的

//后端/config/main.php

```
<?php
$backend=dirname(dirname(__FILE__));
$frontend=dirname($backend);
Yii::setPathOfAlias('backend', $backend);

return array(
    'basePath' => $frontend,

    'controllerPath' => $backend.'/controllers',
    'viewPath' => $backend.'/views',
    'runtimePath' => $backend.'/runtime',

    'import' => array(
        'backend.models.*',
        'backend.components.*',
        'application.models.*',
        'application.components.*',
    ),
    'urlManager'=>array(
        'urlFormat'=>'path',
        'showScriptName'=>false,
        //'caseSensitive'=>false,
        'rules'=>array(
     //       'admin'=>array('adminUser', 'caseSensitive'=>false),
        )
    )
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:30:28.943

我认为 urlManager 是一个组件。尝试将其放入组件配置数组中：

```
return array(
    'basePath' => $frontend,

    'controllerPath' => $backend . '/controllers',
    'viewPath' => $backend . '/views',
    'runtimePath' => $backend . '/runtime',

    'import' => array(
        'backend.models.*',
        'backend.components.*',
        'application.models.*',
        'application.components.*',
    ),

    'components' => array(
        'urlManager' => array(
            'urlFormat' => 'path',
            'showScriptName' => false,
            //'caseSensitive'=>false,
            'rules' => array(
                // 'admin'=>array('adminUser', 'caseSensitive'=>false),
            )
        ),
    ),
); 
```

# facebook - Facebook Graph 项目是持久的吗？

> ID：11212615
> 
> 赞同：0
> 
> 时间：2012-06-26T17:16:11.490
> 
> 标签：facebook, facebook-graph-api

我想知道缓存 Facebook 图形项目是否安全，而不必检查它们是否已更改。

例如，如果我下载并缓存 ID 为 1234309932123 的照片，是否可以假设该 ID 的图像始终相同？

我假设一个给定的 Facebook 对象不能改变，它只能被删除。那是对的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:08:58.650

假设`photo`对象不会改变是错误的。照片不仅是图像，也是相关数据，至少`photo`可以更改一些属性：标题、描述、人物/页面标签。

除了照片详细信息之外，可以更改的另一件事是访问权限。平台政策规定，您应该只向有权查看的人显示从 Facebook 检索到的数据，因此缓存照片可能会成为问题。

# asp.net - 构建 NPaday 时的问题 构建 Web 应用程序

> ID：11212617
> 
> 赞同：0
> 
> 时间：2012-06-26T17:16:15.557
> 
> 标签：asp.net, .net, apache, maven

[更新]
clean 目标在解决方案的所有项目中顺利运行，现在在运行**compile**目标时出现问题，错误消息下方：

[INFO] Total time: 19.427s
[INFO] Finished at: Fri Jun 29 11:46:28 WEST 2012
[INFO] Final Memory: 15M/306M
[INFO] -------------- -------------------------------------------------- --------
[错误] 无法执行目标 org.apache.npanday.plugins:maven-aspx-plugin:1.4.0-incubating:compile (default-compile) on project B3GMcsInterface: NPANDAY-900-006: Unable to Compile: Language = ASP , Vendor = null, ArtifactType = asp, Source Directory = C:\Users\CASA-WS001\Desktop\Gateway\ProjectName: NPANDAY-040-001: 无法执行: Command = cmd.exe /X /C "aspnet_compiler -v " /MyArtifactId" -p C:\Users\CASA-W~1\AppData\Local\Temp\maven-aspx-plugin-3088047295012139775\src -u -f C:\Users\CASA-W~1\AppData\Local \Temp\maven-aspx-plugin-3088047295012139775\dest -nologo -fixednames", Result = 1 -> [Help 1]
[ERROR]
[ERROR] 要查看错误的完整堆栈跟踪，请使用 - e 开关。
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。

[ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章：
[ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException](http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException)
[ERROR] [ERROR] After纠正这些问题，您可以使用命令
[ERROR] mvn -rf :B3GMcsInterface
NPanday Execution Failed! 恢复构建，退出代码：1

[更新结束]

我正在尝试使用 NPanday 构建简单的 Web 应用程序，我正在使用 VS2010 的孵化 1.4.0 插件，我已经使用 maven 成功构建了 C# 控制台或库项目，但是当我尝试清理时我遇到这种错误的 Web 应用程序
下面是错误输出。

[信息] --------------------------------------------- -------------------------
[信息] 构建失败
[信息] ----------------- -------------------------------------------------- -----
[INFO] Total time: 1.628s
[INFO] Finished at: Tue Jun 26 17:53:56 WET 2012
[INFO] Final Memory: 6M/16M
[INFO] --------- -------------------------------------------------- -------------
[错误] 从
存储库 [本地 (C:\Users\user1.m2\repository) 解析插件 'npanday.plugin:maven-aspx-plugin' 的版本时出错， central
(http://repo.maven.apache.org/maven2)]: 在任何插件存储库中找不到插件 -> [Help1]
[ERROR]
[ERROR] 要查看错误的完整堆栈跟踪，请重新运行 Maven使用 -e 开关。
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。
[ERROR]
[ERROR] 有关错误和可能的解决方案的更多信息，请阅读以下文章：
[ERROR] [Help 1] [http://cwiki.apache.org/confluence/display/MAVEN/PluginVersionResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/PluginVersionResolutionException)

任何帮助表示赞赏。
谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:38:20.777

问题是“npanday.plugin:maven-aspx-plugin”中的“npanday.plugin”......它必须在生命周期之一中错误地陈述。

事情已经转移到“org.apache.npanday.plugins”：[http ://search.maven.org/#search%7Cga%7C1%7Ca%3A%22maven-aspx-plugin%22](http://search.maven.org/#search%7Cga%7C1%7Ca%3A%22maven-aspx-plugin%22)

尝试使用以下存储库中的 1.5.0-SNAPSHOT。它包含大量改进！我在生产中使用它。

```
<pluginRepositories>
  <pluginRepository>
    <releases>
      <enabled>false</enabled>
    </releases>
    <id>npanday.snapshots</id>
    <name>NPanday Snapshot Repository</name>
    <url>http://vmbuild.apache.org/archiva/repository/npanday-snapshots</url>
  </pluginRepository>
</pluginRepositories> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:58:44.137

我认为您必须使用存储库管理器并定义一个包含给定依赖项/插件的补充存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T14:21:24.623

错误是 pom.xml 中的相关插件顺序：

如果 maven-compile-plugin 在 maven-aspx-plugin 之前，则会出现错误。

但是如果顺序是 maven-aspx-plugin 然后是 maven-compile-plugin，mvn compile 可以

正确 pom.xml 的片段：

```
……
       <插件>
            <插件>
              <groupId>org.apache.npanday.plugins</groupId>
              <artifactId>maven-aspx-plugin</artifactId>
              <extensions>真</extensions>
              <配置>
                <frameworkVersion>4.0</frameworkVersion>
              </配置>
            </插件>

            <插件>
              <groupId>org.apache.npanday.plugins</groupId>
              <artifactId>maven-compile-plugin</artifactId>
              <version>1.4.0-孵化</version>
              <extensions>真</extensions>
……

```

# iphone - 手势识别器：应该接收触摸：实现失败

> ID：11212621
> 
> 赞同：0
> 
> 时间：2012-06-26T17:16:24.420
> 
> 标签：iphone, objective-c, ios, ipad

`UIButton`如果触摸的视图属于某些类（即and ） ，我会尝试忽略我的gestureRecognizer `UIBarButtonItem`：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {

  NSLog(@"%@", touch.view);

  if ([touch.view isKindOfClass:[UIButton class]]){
    return NO;
  } else if ([touch.view isKindOfClass:[UIBarButtonItem class]]){
    return NO;
  }
  return YES; // handle the touch
} 
```

这对`UIButton`. 它不适用于`UIBarButtonItem`. 触摸时我的 NSLog 结果`UIBarButtonItem`是：

```
<UIToolbarTextButton: 0x7b8f500; frame = (4 0; 60 40); opaque = NO; layer = <CALayer: 0x7b8f900>> 2012-06-26 12:09:48.021 
```

我已经尝试将 更改`[UIBarButtonItem class]`为`[UIToolBarTextButton class]`，但由于这是一个无证类，我不能这样做。还有其他方法可以做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:33:38.400

如果您的 UIBarButtonItem 在 UINavigationBar 中，那么您需要继承 UINavigationBar 并实现另一个

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch { 
```

为了捕捉 UIBarButtonItem 的手势。可能还有其他方法可以实现这一点。

# perl - 在perl中使用linux shell脚本连接一个文件夹中的文件

> ID：11212625
> 
> 赞同：1
> 
> 时间：2012-06-26T17:16:36.030
> 
> 标签：perl

在linux中，要连接文件夹下的所有文件，你可以这样做`file=FOLDER/*; cat $file > ONEFILE`，我也想在我的perl脚本中使用它，所以我编码为`system("file=$folder/*"); system("cat \$file > $out");`

但是当我运行 perl 程序时它不起作用， $out 被分配了一个文件名为`my $out = "outfile";`. outfile 始终保持在 0 位。这里有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:22:20.960

第一行在`$file`新的 shell 进程中设置环境变量：

```
system "file=$folder/*"; 
```

第二行使用新环境启动一个新的 shell 进程：

```
system "cat \$file > $out"; 
```

由于它是一个新进程，具有一个新环境，因此您之前的`$file`变量不再设置，因此您实际上是在运行以下 shell 命令：

```
cat  > $out 
```

改为这样做：

```
system "cat '$folder/'* > '$out'; 
```

注意 - 我还添加了引号，如果您的路径可能包含空格，这将有所帮助。但是，对于所有形式的输入仍然不安全，因此不要在未先验证之前将任何用户输入传递给该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:22:12.117

`exec`Perl 有什么用？

`perl -e 'exec "cat *.txt"'`

# ruby-on-rails - 使用带有 fields_for 的数组

> ID：11212631
> 
> 赞同：19
> 
> 时间：2012-06-26T17:17:05.877
> 
> 标签：ruby-on-rails, arrays, fields-for

如何使用 fields_for 遍历对象数组（所有相同的模型）？该数组包含由 current_user 创建的对象。

我目前有：

```
<%= f.fields_for :descriptionsbyuser do |description_form| %>
<p class="fields">
    <%= description_form.text_area :entry, :rows => 3 %>
    <%= description_form.link_to_remove "Remove this description" %>
    <%= description_form.hidden_field :user_id, :value => current_user.id %>
</p>
<% end %> 
```

但我想用我在控制器中创建的数组替换 :descriptionsbyuser - @descriptionsFromCurrentUser

这也在 Ryan Bate 的“nested_form_for”中

任何指针将不胜感激！

亚当

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-07-08T11:14:25.043

要使用集合`fields_for`并使其按您期望的方式工作，模型需要接受集合的嵌套属性。如果集合是`ActiveRecord`一对多关系，请使用`accepts_nested_attributes_for`类宏。如果集合不是`ActiveRecord`一对多关系，则需要实现集合获取器和集合属性设置器。

如果是`ActiveRecord`关系：

```
class Person
  has_many :projects

  # this creates the projects_attributes= method
  accepts_nested_attributes_for :projects
end 
```

如果是非`ActiveRecord`关系：

```
class Person
  def projects
    ...
  end

  def projects_attributes=(attributes)
    ...
  end
end 
```

无论哪种方式，形式都是相同的：

```
<%= form_for @person do |f| %>
  ...
  <%= f.fields_for :projects, @active_projects do |f| %>
    Name: <%= f.text_field :name %>
  <% end %>
  ...
<% end %> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-26T17:26:26.840

[文档`fields_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)清楚地向您展示了使用数组的方式：

> 或要使用的集合：
> 
> ```
> <%= form_for @person do |person_form| %>
>   ...
>   <%= person_form.fields_for :projects, @active_projects do |project_fields| %>
>     Name: <%= project_fields.text_field :name %>
>   <% end %>
>   ...
> <% end %> 
> ```

`@active_projects`这是你的数组。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-19T00:05:13.003

如果您正在处理直接数据并且想要在不使用任何这些@objects 的情况下发回数组，我发现这是最干净的方式

```
<%= form_for :team do |t| %>
  <%= t.fields_for 'people[]', [] do |p| %>
    First Name: <%= p.text_field :first_name %>
    Last Name: <%= p.text_field :last_name %>
  <% end %>
<% end %> 
```

你的参数数据应该像这样返回

```
"team" => {
  "people" => [
    {"first_name" => "Michael", "last_name" => "Jordan"},
    {"first_name" => "Steve", "last_name" => "Jobs"},
    {"first_name" => "Barack", "last_name" => "Obama"}
  ]
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-20T15:50:45.257

几乎不知道的答案的补充（由于声誉点而无法添加为评论）-

对于非活动记录的情况，`persisted?`除了`*_attributes=(attributes)`.

# java - 创建一个 URL 友好字符串 Android

> ID：11212634
> 
> 赞同：1
> 
> 时间：2012-06-26T17:17:15.093
> 
> 标签：java, android

我想编写一个函数，它接受一个字符串并使用正则表达式或其他东西从 url 不友好的字符中清除它，这如何实现？谢谢

# ios5 - 将根控制器从导航更改为选项卡时出错

> ID：11212636
> 
> 赞同：0
> 
> 时间：2012-06-26T17:17:16.140
> 
> 标签：ios5

我有一个从导航控制器开始的项目，该导航控制器进入表格视图控制器。
我现在正在尝试先制作一个选项卡控制器，但出现以下错误。如果选项卡控制器不存在，则不会发生错误。

2012-06-26 18:12:31.639 Medicine Tracker[1212:fb03] -[UITabBarController topViewController]：无法识别的选择器发送到实例 0x6d64970 2012-06-26 18:12:31.667 Medicine Tracker[1212:fb03] *** 终止应用程序到期未捕获的异常'NSInvalidArgumentException'，原因是： ' - [的UITabBarController topViewController]：无法识别的选择发送到实例0x6d64970' ***第一掷调用堆栈：（0x16b4022 0x1845cd6 0x16b5cbd 0x161aed0 0x161acb2 0x3dc7 0x1d386 0x1e274 0x2d183 0x2dc38 0x21634 0x159eef5 0x1688195 0x15ecff2 0x15eb8da 0x15ead84 0x15eac9b 0x1dc65 0x1f626 0x278d 0x26f5) 终止调用抛出异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:51:03.700

topViewController方法不是 UITabBarController 的成员**。**它确实有一个名为**selectedViewController**的方法，它可能提供您需要的功能。

[UITabBarController 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)

# linux - 如何知道 Linux 中特定引脚的中断/GPIO 编号

> ID：11212637
> 
> 赞同：10
> 
> 时间：2012-06-26T17:17:19.123
> 
> 标签：linux, embedded, arm, embedded-linux, interrupt

我正在做一个项目，我需要在 Linux 中处理中断。

我正在使用的开发板是基于三星 s3c6410 MCU（arm 11 处理器）的 ARM9Board，它具有以下 I/O 接口[：](http://www.arm9board.net/sel/prddetail.aspx?id=365&pid=200)

![在此处输入图像描述](../Images/9d2dc8d49c2e5716b458ccb951b0a314.png)

如图所示，我有用于外部中断的 EINTx 引脚和作为 GPIO 引脚的 GPxx 引脚，我不介意使用它们中的任何一个，但我没有它们的编号！

**对于 EINTx 引脚：**

当我打电话时

```
int request_irq(unsigned int irq, void (*handler)(int, struct pt_regs *), 
unsigned long flags, const char *device); 
```

我需要中断号将其作为函数的第一个参数传递，那么如何获取 irq 号，例如 EINT16 引脚？

**对于 GPxx 引脚：** 与我需要 GPIO 引脚编号将其传递给这些函数的情况相同

```
int gpio_request(unsigned gpio, const char *label);
int gpio_direction_input(unsigned gpio);
int gpio_to_irq(unsigned gpio); 
```

即我如何知道 GPP8 引脚的 GPIO 编号？

我搜索了董事会文件和数据表，但它不包含有关如何获取这些数字的任何内容，关于在哪里查找的任何想法或帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T17:45:17.667

您使用的嵌入式 Linux 应该有一个 GPIO 驱动程序，其中包含`#define`GPIO 引脚的语句。然后，您可以使用以下方式获取特定 GPIO 的 IRQ 编号：

`irq_num = gpio_to_irq(S3C64XX_GPP(8));`

以下文件中提供了对该特定芯片的 Linux GPIO 库支持：

> linux/arch/arm/mach-s3c6400/include/mach/gpio.h

在那里你会找到`#define`各种 GPIO 的所有语句。

请参阅其文档中有关 GPIO 约定的部分：

[http://www.kernel.org/doc/Documentation/gpio/gpio.txt](http://www.kernel.org/doc/Documentation/gpio/gpio.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T13:36:28.633

我也在 GPIO 引脚上做一些工作，但它在不同的板上，AM335x。只是让你知道，有很多方法可以做到这一点。我们使用的一种方法是使用内存板访问（写入或读取）GPIO 引脚。

这是一篇非常好的文章，可以帮助我让事情正常进行。[通过内存映射注册访问 Beaglebone 的 GPIO](http://vabi-robotics.blogspot.co.uk/2013/10/register-access-to-gpios-of-beaglebone.html)

# ios - 无法在所有设备上获取推送通知

> ID：11212638
> 
> 赞同：0
> 
> 时间：2012-06-26T17:17:25.707
> 
> 标签：ios, objective-c, apple-push-notifications

我正在使用 APNS 在我的应用程序中接收推送通知。

问题是我在某些设备上收到了相同的通知，但不是全部。由于我已经尝试了大约 15 天来解决这个问题，但没有成功，可能会出现什么问题。设备令牌正在成功更新。因为如果不是这样，我就不会在任何设备上收到通知。但奇怪的是我在一半的设备上都得到了它。请帮忙！！

这是注册和接收通知的代码。我没有任何服务器端代码。但正如我所说，通知正在某些设备上运行。他们也在android上工作。

我这里有 3 台设备，它在其中两台上工作。iPad2：5.0.1 iPodTouch：4.3.3

它不适用于我在版本：5.1 上的另一个 iPod touch

它的显示也在所有设备中成功注册了 APNS。但不发送某些通知。问题可能是什么？有什么我想念的吗？

```
- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken 
{

    deviceToken = [devToken retain];

    NSLog(@"Registered for APNS %@", deviceToken);

    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    NSMutableString *dev = [[NSMutableString alloc] init];

    NSRange r;
    r.length = 1;
    unsigned char c;

    for (int i = 0; i < [deviceToken length]; i++)
    {
        r.location = i;
        [deviceToken getBytes:&c range:r];

        if (c < 10) {
            [dev appendFormat:@"0%x", c];
        }
        else {
            [dev appendFormat:@"%x", c];
        }

    }

    [ud setObject:dev forKey:@"DeviceToken"];
    [ud synchronize];

}

- (void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error 
{

    NSLog(@"Failed to register %@", [error localizedDescription]);

    deviceToken = nil;

}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
for(int i=0;i<[viewControllers count];i++)
        {
            if([[viewControllers objectAtIndex:i] isKindOfClass:[Confirmation class]])
            {
                Confirmation *map = (Confirmation*)[[self.navigationController viewControllers] objectAtIndex:i];
                [map setFinalInfo];
                [self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:i] animated:YES];
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:32:48.613

**1 )** *不能保证推送通知会实际发送，即使 APNS 服务器接受了它们。*

**2 )** *就您的服务器而言，推送通知是一劳永逸的；在您将通知发送到 APNS 后，无法找出通知的状态。交货时间也可能有所不同，从几秒钟到半小时不等。*

**3 )**此外，用户的 iPhone 可能无法一直接收推送通知。它们可能*位于不允许与 APNS 建立连接的 WiFi 网络上，因为所需的端口被阻止。或者手机可以关机。*

**4 )** *APNS 将尝试在该设备重新上线时发送它收到的最后一个通知，但它只会尝试有限的时间。一旦超时，推送通知将永远丢失！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T14:48:29.280

1.  您是否在 APN 消息中将“到期”设置为 0？如果您将其设置为 0，则推送消息是“一劳永逸”，否则 Apple 可能会尝试将它们发送到指定的时间。

2.  要检查的另一件事可能是绝对确定您的开发测试运行中没有设备 ID 最终出现在您实际上要在生产中发送推送消息的设备 ID 列表中。一个错误的设备 ID 和 Apple 将停止 SSL 连接并且不再处理任何 APN 消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-02T20:26:28.650

我替换了以下代码：

```
deviceToken = [devToken retain];

    NSLog(@"Registered for APNS %@", deviceToken);

    NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];

    NSMutableString *dev = [[NSMutableString alloc] init];

    NSRange r;
    r.length = 1;
    unsigned char c;

    for (int i = 0; i < [deviceToken length]; i++)
    {
        r.location = i;
        [deviceToken getBytes:&c range:r];

        if (c < 10) {
            [dev appendFormat:@"0%x", c];
        }
        else {
            [dev appendFormat:@"%x", c];
        }

    }

    [ud setObject:dev forKey:@"DeviceToken"];
    [ud synchronize]; 
```

这样：

```
[devToken retain];
    NSLog(@"~~~~devToken=%@",devToken); 
    NSString *dt = [[devToken description] stringByTrimmingCharactersInSet: [NSCharacterSet characterSetWithCharactersInString:@"<>"]]; 
    dt = [dt stringByReplacingOccurrencesOfString:@" " withString:@""]; 
    //     //DeviceToken = dt;
    NSUserDefaults *def = [NSUserDefaults standardUserDefaults];
    [def setObject:dt forKey:@"DeviceToken"];
    [def synchronize]; 
```

现在工作正常！！

问题是它没有为某些设备正确更新设备toekn，我不确定为什么它对某些设备运行良好。

多谢你们！！

# php - 验证非拉丁 URL

> ID：11212639
> 
> 赞同：1
> 
> 时间：2012-06-26T17:17:27.857
> 
> 标签：php, validation, url, unicode, filtering

我的客户要求验证用户输入的包含非拉丁字符的 URL。例子：

*   `http://uk.wikipedia.org/wiki/Фотосинтез`
*   `http://презитент.рф`

有没有人有一个正则表达式来验证这样的 URL？

或者 PHP 中有没有一种方法可以轻松地对非拉丁 URL 部分进行 URL 编码。例如：`http://uk.wikipedia.org/wiki/Фотосинтез`->`http://uk.wikipedia.org/wiki/%D0%A4%D0%BE%D1%82%D0%BE%D1%81%D0%B8%D0%BD%D1%82%D0%B5%D0%B7`反之亦然？

这有什么意义吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:26:19.680

php.net[警告](http://php.net/manual/en/function.parse-url.php)说 parse_url “并不是为了验证给定的 URL，它只是将它分解成上面列出的部分。” 如果这是可以接受的，它似乎（或多或少）适用于非拉丁字符：

```
~ visitor$ cat parse.php 
<?php
$parsed = parse_url( 'http://uk.wikipedia.org/wiki/Фотосинтез' );
print_r( $parsed );
?>

~ visitor$ php parse.php 
Array
(
    [scheme] => http
    [host] => uk.wikipedia.org
    [path] => /wiki/Фо?_о?_ин?_ез
) 
```

# java - 可序列化如何与缓存 java/command 类相关？

> ID：11212642
> 
> 赞同：1
> 
> 时间：2012-06-26T17:17:33.633
> 
> 标签：java, caching, serialization, websphere-commerce

我正在研究 ibm websphere commerce (wcs)。在这个框架中，我们可以选择缓存我们的命令类，基本上它们只是一个 java 类。在有一个新的缓存条目时，我知道这些 java 类必须是可序列化的（实现 java.io.Serializable 接口）。这是为什么？

是不是缓存基本上是在保存一些执行的输出？在这种情况下，它将保存作为序列化的一部分生成的字节序列，并且每当对该缓存对象的请求出现时，它只会反序列化并返回对象而不执行实际程序？任何人都可以分享这方面的知识吗？

在此先感谢，桑托什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T13:40:37.150

对于缓存方法执行的结果并将其返回以供后续调用序列化是不需要的。

它需要可序列化的最可能原因是，当您在集群环境中缓存某些数据时，对一个节点上的缓存数据所做的更改必须复制到集群的其他节点上。为了进行这种复制，需要使用一些远程 API 对数据进行序列化并发送到另一个节点。

要求类可串行化的另一个原因是缓存实现可能会将数据溢出到磁盘。即使在这种情况下，缓存中的对象也需要转换为可以存储在磁盘上并重新创建的某种形式。

以下是[ehcache 文档](http://ehcache.org/documentation/user-guide/storage-options)中的一段，更详细地解释了溢出场景。

> 当一个元素被添加到缓存并且超出其最大内存大小时，如果 overflowToDisk 为假，则删除现有元素，或者如果 overflowToDisk 为真，则评估是否假脱机到磁盘。
> 
> 在后一种情况下，将执行到期检查。如果过期则删除；如果不是，它是假脱机的。从内存存储中逐出项目基于配置文件中指定的“MemoryStoreEvictionPolicy”设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:37:02.210

序列化将实际对象本身保存为当前状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T00:54:05.923

原因在于 WebSphere Commerce 使用了 WebSphere Application Server 的 Dynacache 特性。WAS dynacache 是一种内存中的 java 缓存，与内置的 memcached 非常相似。开箱即用，原型商店使用动态缓存来缓存 JSP、servlet、控制器、命令、命令任务和其他 java 对象。在数据库端也进行了缓存。这就是为什么在性能测试中，IBM 在大容量下的扩展能力比其他软件要好得多。

# qr-code - 计算二维码中需要的纠错字数

> ID：11212645
> 
> 赞同：1
> 
> 时间：2012-06-26T17:17:38.230
> 
> 标签：qr-code, iso, error-correction, reed-solomon

我喜欢编码二维码。因此我需要知道，指定版本和纠错级别需要多少纠错字。对于 QR 版本 1 与 ec-level Q 组合，必须有 13 个纠错字和 13 个数据字。我知道 ISO/IEC 18004 中有一些表（表 7、8、9）存储了这些信息。但我想知道是否可以计算所需的纠错字数。

问候，拉菲

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T19:21:16.050

是的，您需要 ISO 18004。我想您还可以查看[zxing 的源代码来](http://code.google.com/p/zxing/source/browse/trunk/core/src/com/google/zxing/qrcode/encoder/Encoder.java)计算它。它发生在方法周围`interleaveWithECBytes`。

# java - 模型矩阵转换后的 3D Picking OpenGL ES 2.0

> ID：11212651
> 
> 赞同：0
> 
> 时间：2012-06-26T17:17:48.947
> 
> 标签：java, android, opengl-es-2.0

嘿，我正在尝试在我的程序中实现 3D 拾取，如果我不从原点移动，它会完美运行。这是完全准确的。但是如果我将模型矩阵从原点移开（视图矩阵的眼睛仍然在 0,0,0），拾取向量仍然是从原始位置绘制的。它仍应从视图矩阵眼睛 (0,0,0) 绘制，但事实并非如此。这是我的一些代码，看看你是否能找出原因..

```
 Vector3d near = unProject(x, y, 0, mMVPMatrix, this.width, this.height);
        Vector3d far = unProject(x, y, 1, mMVPMatrix, this.width, this.height);
        Vector3d pickingRay = far.subtract(near);
        //pickingRay.z *= -1;
        Vector3d normal = new Vector3d(0,0,1);
        if (normal.dot(pickingRay) != 0 && pickingRay.z < 0)
        {
            float t = (-5f-normal.dot(mCamera.eye))/(normal.dot(pickingRay));
            pickingRay = mCamera.eye.add(pickingRay.scale(t));
            addObject(pickingRay.x, pickingRay.y, pickingRay.z+.5f, Shape.BOX);

        //a line for the picking vector for debugging
        PrimProperties a = new PrimProperties(); //new prim properties for size and center
        Prim result = null;
        result = new Line(a, mCamera.eye, far);//new line object for seeing look at vector
        result.createVertices();
        objects.add(result);
        }

public static Vector3d unProject(
        float winx, float winy, float winz,
        float[] resultantMatrix,
        float width, float height)
{
    winy = height-winy;
    float[] m = new float[16],
    in = new float[4],
    out = new float[4];
    Matrix.invertM(m, 0, resultantMatrix, 0);
    in[0] = (winx / width) * 2 - 1;
    in[1] = (winy / height) * 2 - 1;
    in[2] = 2 * winz - 1;
    in[3] = 1;
    Matrix.multiplyMV(out, 0, m, 0, in, 0);

    if (out[3]==0)
        return null;

    out[3] = 1/out[3];
    return new Vector3d(out[0] * out[3], out[1] * out[3], out[2] * out[3]);
}

Matrix.translateM(mModelMatrix, 0, this.diffX, this.diffY, 0); //i use this to move the model matrix based on pinch zooming stuff. 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T13:39:47.257

我想知道您实现了哪种算法。这是解决问题的光线投射方法吗？

我并没有过多关注代码本身，但这看起来太简单了，无法成为一个完全可操作的光线投射解决方案。

根据我的拙见，我想建议您根据最终项目的复杂性（我不知道）采用颜色选择解决方案。

这种解决方案通常是最灵活和最容易实现的。

它包括将场景中的对象以独特的平面颜色（通常在着色器中禁用照明）渲染到后缓冲区...纹理，然后获取单击（触摸）的坐标并阅读该特定坐标中像素的颜色。

拥有像素的颜色和渲染的不同对象的颜色表，可以让您从逻辑角度了解用户单击的内容。

对象拾取问题还有其他方法，这可能是公认的最快的方法。

干杯毛里齐奥

# java - 使用 apache POI 的 java 中的运行时错误

> ID：11212652
> 
> 赞同：2
> 
> 时间：2012-06-26T17:17:58.940
> 
> 标签：java, apache-poi

我得到错误：

```
java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.setSaveAggressiveNamespaces()Lorg/apache/xmlbeans/XmlOptions;
at org.apache.poi.POIXMLDocumentPart.<clinit>(POIXMLDocumentPart.java:56) 
```

从第 56 行开始：

```
public static Workbook wb = new XSSFWorkbook(); 
```

我只需要重新链接我的库，但我所做的只是移动所有文件并将构建路径重置为我将文件移动到的位置，然后删除旧文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:29:01.077

```
java.lang.NoSuchMethodError: org.apache.xmlbeans.XmlOptions.setSaveAggressiveNamespaces()Lorg/apache/xmlbeans/XmlOptions; 
```

这个声明说你有不匹配（不兼容）的罐子。确保您有受支持的 jar 版本。

# perl - 在 Perl IO::File 中设置要读取的行

> ID：11212653
> 
> 赞同：3
> 
> 时间：2012-06-26T17:18:04.277
> 
> 标签：perl, file-io

如何根据行号（而不是字节）更改文件句柄中指针的位置？

我想将第一行设置为开始读取文件。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T17:33:42.970

设置文件指针本身并不是目的。如果您想阅读某一行，请使用[Tie::File](http://p3rl.org/Tie%3a%3aFile)。

```
use Tie::File qw();
tie my @file, 'Tie::File', 'thefilename' or die $!;
print $file[2]  # 3rd line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T17:51:09.987

使用`tell`and`seek`读取和写入文件中每一行的位置。这是一个可能的解决方案，需要您传递整个文件，但不需要您一次将整个文件加载到内存中：

```
# make a pass through the whole file to get the position of each line
my @pos = (0);   # first line begins at byte 0
open my $fh, '<', $the_file;
while (<$fh>) {
    push @pos, tell($fh);
}
# don't close($fh)

# now use  seek  to move to the position you want
$line5 = do { seek $fh,$pos[4],0; <$fh> };

$second_to_last_line = do { seek $fh,$pos[-3],0; <$fh> }; 
```

# symfony - 有没有更聪明的方法来获取参考文档 ID，而无需查询它并对其进行补水？

> ID：11212655
> 
> 赞同：2
> 
> 时间：2012-06-26T17:18:15.617
> 
> 标签：symfony, doctrine, doctrine-orm, doctrine-odm

我有一份文件，其中包含对其他一些文件的引用。像大多数人一样，我在 URL 的“id”字段中使用 MongoId 来查看这些文档。情况是我想从主文档中显示这些参考文档的链接。为了获取引用文档的 ID，我使用如下代码：

```
$mainDocument->getReferencedDoc()->getId(); 
```

这里明显的烦恼是，学说将运行另一个查询来获取引用的文档，这样我就可以获得 ID。但是从技术上讲，该 ID 已经存在于参考字段的主文档中。难道不应该有一种更有效的方法来仅获取 ID 而无需查询和补充整个参考文档吗？每次我想这样做时都必须编写自定义查询吗？

当您生成包含指向其引用文档的链接的主要文档的大型列表时，该问题变得很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T18:33:46.547

如果有人需要正确的方法来获取引用的 MongoDB 文档的标识符而不（！）延迟加载它，就是这样：

```
/** @var $metaData \Doctrine\ODM\MongoDB\Mapping\ClassMetadata */
$metaData = $this->documentManager->getClassMetadata('SomeReferencedDocument');
$metaData->getIdentifierValue($object->getSomeReferencedDocument()) 
```

而不是（使用最新的 DoctrineODMBundle 仍然延迟加载引用的文档）：

```
$object->getSomeReferencedDocument()->getId(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:35:17.163

最简单的方法是在 Document 类中添加第二个属性。

```
/**
 * @ReferenceOne(targetDocument="SomeOtherDocument", simple=true)
 */
protected $referencedDoc;

/**
 * @Field(name="referencedDoc", type="string")
 */
protected $referencedDocId; 
```

现在你可以做`$document->getReferencedDocId();`。由于 type=string，我不完全确定这是可能的。我确实将它与 ORM 一起使用，但尚未将它与 ODM 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T18:03:34.513

自2 月 6 日提交以来，[它](https://github.com/doctrine/mongodb-odm/commit/e0bfdb34318d9ecb3f6aaba2dc7fde9ef31b30fe#L2R262)似乎*确实*表现得如此。所以这个问题通过使用最新的mongodb-odm解决了。

# java - 在java中表示树层次结构

> ID：11212656
> 
> 赞同：0
> 
> 时间：2012-06-26T17:18:17.713
> 
> 标签：java, data-structures, tree, treeview

> **可能重复：**
> [Java 树数据结构？](https://stackoverflow.com/questions/3522454/java-tree-data-structure)

我想在java中表示一个层次结构。层次结构可以是以下形式

```
Key
|
|-Value1
|  |-Value11
|    |-Value111
|-Value2
|  |-Value22
|-Value3
|-Value4 
```

谁能建议我用最好的数据结构来表示Java中的这种层次结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T17:21:11.567

基本上，您需要的只是一个可以容纳几个孩子的结构，并且您可以对属性进行建模。你可以用这样的类结构来表示它：

```
public class TreeNode {

    private Collection<TreeNode> children;
    private String caption;

    public TreeNode(Collection<TreeNode> children, String caption) {
        super();
        this.children = children;
        this.caption = caption;
    }

    public Collection<TreeNode> getChildren() {
        return children;
    }

    public void setChildren(Collection<TreeNode> children) {
        this.children = children;
    }

    public String getCaption() {
        return caption;
    }

    public void setCaption(String caption) {
        this.caption = caption;
    }

} 
```

您可以看一下这里，以获取一些想法：[Java 树数据结构？](https://stackoverflow.com/questions/3522454/java-tree-data-structure)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-26T17:22:17.480

看到这个答案：

[Java树数据结构？](https://stackoverflow.com/questions/3522454/java-tree-data-structure)

基本上，除了 swing 包中的 JTree 之外，标准库中没有任何东西提供开箱即用的树表示。

您可以自己滚动（链接答案中提供了一些提示），也可以使用实际上效果很好的那个。

# jquery - 在每个函数中调用 var array=[]

> ID：11212657
> 
> 赞同：0
> 
> 时间：2012-06-26T17:18:26.443
> 
> 标签：jquery, arrays, jquery-plugins, each

我正在做一个项目，我有不同的 div 集，如标题、文本、图像等。

单击后，我想为相关数量的 div 添加输入框。

你可以在这里看到工作小提琴：http: [//jsfiddle.net/UN62E/](http://jsfiddle.net/UN62E/)

这个脚本对我有用，但我需要改进这个脚本。

这就是我的脚本的一部分：

```
var eltofind = "heading";

if($(this).find("." + eltofind).length != 0){

    var eltoget = $(this).find("." + eltofind);

    $(eltoget).each( function(index) {
         var item = $('input.' + eltofind + ':first').clone();
        var count = (index +1);
        var getting = eltofind + "-" + count;
        item.addClass(getting);
        item.appendTo('#input');
    });
} 
```

目前我正在为单独的 div 集重复整个脚本。有没有办法调用数组中的所有 div 集？例如 ：

```
var eltofind = ["heading", "text", "image"] 
```

& 在每个函数中调用它们？

我的 jQuery 技能不是那么好，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:21:07.090

您可以在 jQuery 中创建多个选择器

```
$(".heading, .text, .image").foo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:23:50.657

只需`$.each()`在数组上运行替换`eltofind`为`el`参数：

```
var elstofind = ["heading", "text", "image"];

$.each(elstofind, function(i, el){

    if($(this).find("." + el).length != 0){
        var eltoget = $(this).find("." + el);

        $(eltoget).each(function(index) {
            var item = $('input.' + el + ':first').clone();
            var count = (index + 1);
            var getting = el + "-" + count;
            item.addClass(getting);
            item.appendTo('#input');
        });
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:20:18.330

创建一个循环遍历 的每个值`eltofind`并执行适当的操作。

```
var eltofind = ["heading", "text", "image"];

for(var i=0; i < eltofind.length; i++){
     var thisElement = eltofind[i];

    if($(this).find("." + thisElement).length != 0){

        var eltoget = $(this).find("." + thisElement);

        $(eltoget).each( function(index) {
            var item = $('input.' + thisElement + ':first').clone();
            var count = (index +1);
            var getting = thisElement + "-" + count;
            item.addClass(getting);
            item.appendTo('#input');
        });
    }
} 
```

# winapi - 在 Windows 中，HANDLE 是进程 VAS 中的地址还是其他东西的独立索引？

> ID：11212658
> 
> 赞同：1
> 
> 时间：2012-06-26T17:18:32.653
> 
> 标签：winapi, handle, hwnd

简单地说，如果我要调用一些返回句柄的 API，例如 GetActiveWindow()，它会给我一个 HWND 类型的句柄，我会得到什么？它是进程 VAS 中的唯一地址，还是某个操作系统结构的唯一索引？或者是其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:31:21.357

一个不透明的整数标识符，在设计用于使用的 API 调用之外没有任何意义或使用 - IOW，大多数时候无法知道，而且大多数时候你不应该关心。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:20:25.263

是的以上所有。换句话说，它因句柄类型而（广泛地）变化。有些是地址（通常是散列），有些是特定表的索引，等等。

# php - 如何在一段时间内重试 PHP flock()？

> ID：11212661
> 
> 赞同：5
> 
> 时间：2012-06-26T17:18:46.280
> 
> 标签：php, locking

我需要打开一个日志文件进行写入。麻烦的是，很多事情可能会同时发生，我不想要冲突。每次写入将是一行，通常大约 150 字节（并且总是小于 1K），并且不严格要求按时间顺序排列。

我*想*我想要的是尝试`flock()`，如果失败，请继续尝试几秒钟。如果多次尝试后仍无法建立锁，则放弃。

```
$fh=fopen($logfile, "a");

if (flock($fh, LOCK_EX|LOCK_NB)) {
  $locked=TRUE;
} else {
  $locked=FALSE;
  // Retry lock every 0.1 seconds for 3 seconds...
  $x=0; while($x++ < 30) {
    usleep(100000);
    if (flock($fh, LOCK_EX|LOCK_NB)) {
      $locked=TRUE;
      break;
    }
  }
}

if ($locked) {
  if (fwrite($fh, strftime("[%Y-%m-%d %T] ") . $logdata . "\n")) {
    print "Success.\n";
  } else {
    print "Fail.\n";
  }
  flock($fh, LOCK_UN)
} else {
  print "Lock failed.\n";
} 
```

**我有两个问题**，一个是一般的，一个是具体的。首先，除了以不同的方式（`do...while`等）实现相同的解决方案之外，是否有更好的通用策略来处理此类问题，仅在 PHP 中运行？其次，有没有更好的方法在 PHP 中实现这一点？（是的，我把它们分开是因为我对策略部分真的很感兴趣。）

我考虑过的一种替代方法是使用[syslog()](http://php.net/syslog)，但 PHP 代码可能需要在系统级管理（即向 /etc/syslog.conf 中添加内容）可能无法作为选项提供的平台上运行。

**更新：根据**[randy](https://stackoverflow.com/users/1152959/randy)的建议添加`|LOCK_NB`到上面的代码中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T19:36:18.210

在我在 PHP 制作日志（在 linux 下！）方面的长期经验中，我从未遇到过冲突问题（即使有数百个同时和并发写入）。如此简单的跳过锁管理：

```
$fh=fopen($logfile, "a");
if (fwrite($fh, strftime("[%Y-%m-%d %T] ") . $logdata . "\n")) {
    print "Success.\n";
  } else {
    print "Fail.\n";
  }
fclose($fh); 
```

关于这个策略，**文件日志记录**（有或没有锁）不是最好的解决方案，因为每个带有“ **a** ”的 fopen 都意味着一个 seek 系统调用来将光标设置在文件的末尾。保持文件打开的**syslog可以避免这种开销。**

当然，对于“大”文件，开销变得很重要（在性能上），一个简单的解决方案是创建名称中包含日期（或日期时间）的日志文件。

添加

apache 软件包包含一个测试程序：**ab**，允许同时进行查询，您可以测试我的论文，以通过 10 到 1000 个线程完成的 1000000 个查询来测试我的服务器。

添加 - 在评论之后

不，这不是不可能完成的任务。

我从[http://php.net/manual/en/function.fwrite.php找到了一个](http://php.net/manual/en/function.fwrite.php)**注释**

> 如果句柄在追加模式下被 fopen() 处理，则 fwrite() 是原子的（除非字符串的大小超过文件系统的块大小，在某些平台上，并且只要文件位于本地文件系统上）。也就是说，在调用 fwrite() 之前不需要flock() 一个资源；所有数据都将不间断地写入。

要知道一个块有多大（通常是 4k）：

> dumpe2fs /dev/sd_your_disk_partition |less -i

写入的“原子性”是实现阻止其他“代理”写入（当您在“ps ax”中看到进程处于“D”状态时），**但是**PHP**流工具**可以解决这个问题，请参见：*stream_set_blocking*。这种方法可能会引入部分写入，因此您必须验证记录的完整性。

在任何情况下，*fwrite*（网络或文件）都容易受到阻塞/失败的影响，**无论**使用*flock*。恕我直言，羊群只介绍开销。

关于您的原始问题和您的目标（尝试在高度规避风险的环境中实施公司政策），即使是 fwrite 也可能有问题，我只能想象一个简单的解决方案：使用数据库

*   大部分复杂性都来自 PHP 并用 C 编写！
*   完全控制操作流程
*   高并发级别

# linux - 脚本中的文件名最后修改日期外壳

> ID：11212663
> 
> 赞同：12
> 
> 时间：2012-06-26T17:18:50.803
> 
> 标签：linux, bash, shell, unix, hp-ux

我正在使用 bash 构建一个脚本，在其中我将在变量中获取文件名，然后使用此变量获取文件 unix 上次修改日期。

我需要得到这个修改日期值，我不能使用 stat 命令。

你知道用常用的 *nix 命令获取它的任何方法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T21:24:51.307

### 为什么你不应该使用`ls`：

解析[`ls`是个坏主意](http://mywiki.wooledge.org/ParsingLs)。不仅文件名中某些字符的行为未定义且取决于平台，而且出于您的目的，它会[与过去六个月的日期混淆](http://www.gnu.org/software/coreutils/manual/html_node/Formatting-file-timestamps.html)。简而言之，是的，它可能会在您有限的测试中为您工作。它**不是**独立于平台的（因此没有可移植性），并且鉴于各种系统上的“合法”文件名范围，**无法**保证您的解析行为。（例如，Ext4[允许文件名中有空格和换行符](http://en.wikipedia.org/wiki/Ext4)）。

说了这么多，就个人而言，我会使用它，`ls`因为它既快速又简单；）

### 编辑

正如雨果在评论中指出的那样，OP 不想使用`stat`. 此外，我应该指出，以下部分是 BSD-stat 特定的（`%Sm`当我在 Ubuntu 上测试时，该标志不起作用；Linux 有一个`stat`命令，如果您对它感兴趣，请阅读[手册页](http://linux.die.net/man/2/stat)）。

### 所以，一个非`stat`解决方案：使用日期

`date`，至少在 Linux 上，有一个标志：`-r`，根据[手册页](http://linux.die.net/man/1/date)：

> 显示FILE的最后修改时间

因此，脚本化解决方案将与此类似：

```
date -r ${MY_FILE_VARIABLE} 
```

这会给你返回类似的东西：

```
zsh% date -r MyFile.foo
Thu Feb 23 07:41:27 CST 2012 
```

要解决 OP 的评论：

> 如果可能，使用可配置的日期格式

`date`有一组相当广泛的时间格式变量；阅读手册页以获取更多信息。

我不能 100% 确定`date`所有“类 UNIX 系统”的可移植性。对于基于 BSD 的（例如 OS X），这是*行不通*的；BSD-date的`-r`标志做了完全不同的事情。这个问题并没有具体说明解决方案的便携性。对于基于 BSD 的解决方案，请参阅以下部分；）

### 更好的解决方案，BSD 系统（在 OS X 上测试，使用 BSD-stat；GNU stat 略有不同，但可以以相同的方式工作）。

使用`stat`. `stat`您可以使用标志格式化输出`-f`，并且可以选择仅显示文件修改数据（对于这个问题，这很好）。

例如`stat -f "%m%t%Sm %N" ./*`：

```
 1340738054  Jun 26 21:14:14 2012 ./build
1340738921  Jun 26 21:28:41 2012 ./build.xml
1340738140  Jun 26 21:15:40 2012 ./lib
1340657124  Jun 25 22:45:24 2012 ./tests 
```

其中第一位是[UNIX 纪元时间](http://en.wikipedia.org/wiki/Unix_time)，日期是文件修改时间，其余的是文件名。

**示例命令的细分**

`stat -f "%m%t%Sm %N" ./*`

1.  `stat -f`：调用`stat`，并指定格式（`-f`）。
2.  `%m`: UNIX 纪元时间。
3.  `%t`：输出中的制表符分隔符。
4.  `%Sm`:`S`表示将输出显示为`string`，`m`表示使用文件修改数据。
5.  `%N`：显示相关文件的名称。

脚本中的命令如下所示：

```
stat -f "%Sm" ${FILE_VARIABLE} 
```

将为您提供输出，例如：

```
Jun 26 21:28:41 2012 
```

阅读[手册页](http://www.unix.com/man-page/FreeBSD/1/stat/)以`stat`获取更多信息；时间戳格式化由[`strftime`](http://linux.die.net/man/3/strftime).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T23:07:34.003

有perl吗？

```
perl -MFile::stat -e "print scalar localtime stat('FileName.txt')->mtime" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T17:38:00.370

怎么样：

```
find $PATH -maxdepth 1 -name $FILE -printf %Tc 
```

有关可以与 %T 一起使用的其他值，请参见 find 手册页。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-01T09:54:38.407

您可以使用“日期”命令添加所需的格式选项格式：

```
 date +%Y-%m-%d -r /root/foo.txt 
```

> 2013-05-27

```
 date +%H:%M -r /root/foo.txt 
```

> 23:02

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-26T17:43:29.590

您可以使用`ls -l`which列出最后修改时间，然后使用`cut`删除修改日期：

```
mod_date=$(ls -l $file_name | cut -c35-46) 
```

这适用于我的系统，因为日期出现在第 35 到 46 列之间。您可能必须在系统上使用它。

日期有两种不同的格式：

*   `Mmm dd hh:mm`
*   `Mmm dd yyyy`

一年多前修改的文件将采用后一种格式。不到一年前修改的文件必须先格式化。您可以搜索“：”并知道文件的格式：

```
if echo "$mod_date" | grep -q ":"
then
    echo "File was modified within the year"
else
    echo "File was modified more than a year ago"
fi 
```

# algorithm - 强连接组件有什么用？

> ID：11212676
> 
> 赞同：22
> 
> 时间：2012-06-26T17:19:43.093
> 
> 标签：algorithm, computer-science, graph-theory

我找到了几种算法来解释*如何*在有向图中找到强连通分量，但没有一个解释你*为什么*要这样做。强连接组件有哪些应用？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T17:25:19.040

您应该在 Coursera 上查看 Tim Roughgarden 的算法简介课程。对于他介绍的每一种算法，他都会解释它的一些应用。很有用，让人看到学习算法的价值！

我记得他说的强连接组件的使用是人们可以用它来找到在大量数据中关系更密切的人群。想想 Facebook 以及他们如何推荐可能是你朋友的人......

这也可以用来查看人口的块。说，“哇，这个巨大的组件都有倒退的爱好，喜欢吃发霉的披萨！”它可以显示相关性。发霉披萨的广告商会使用这些数据来定位喜欢倒着走的人。谁知道！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T17:35:06.030

一个例子是[模型检查](http://en.wikipedia.org/wiki/Model_checking)：

在[形式验证中的显式](http://en.wikipedia.org/wiki/Formal_verification)[**模型检查**](http://en.wikipedia.org/wiki/Model_checking)中找到强连接组件。

在模型检查中 - 我们有一个状态机，它代表我们的软件/硬件模型，我们尝试在其上证明[时间逻辑](http://en.wikipedia.org/wiki/Linear_temporal_logic)¹公式。

例如：公式的**`EG(p)`**意思是：图中有一条路径，其中对于每个状态 - 逻辑公式`p`产生`true`。

[证明 EG(p) 在图（模型）上是否为真的算法](http://webcourse.cs.technion.ac.il/236342/Winter2011-2012/ho/WCFiles/labeling.pdf)是找到**最大强连通分量（SCC），然后检查图中通向它的路径**。

请注意，模型检查在行业中得到广泛应用——尤其是用于证明硬件组件的正确性。

* * *

(1)时序逻辑对计算机科学的重要性是巨大的，它的发明者[Amir Pnueli](http://en.wikipedia.org/wiki/Amir_Pnueli)因此获得了图灵奖！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-09-28T10:57:31.667

另一个应用程序可以在车辆路线应用程序中找到。道路网络可以建模为有向图，顶点是交叉点，弧线是有向路段或单独的车道。如果图表不是强连接的，那么车辆可能会被困在图表的某个部分（即它们可以进入，但不能离开）。

在许多这样的车辆路线应用程序中，您希望为特定区域生成路线（例如城市内的路线问题）。在生成路线之前，您必须提取街道数据，例如从 Google 地图、Here 地图或 Open Street 地图中提取。这些地图不仅涵盖了您感兴趣的区域，而且涵盖了整个世界。因此，您最终会拍摄感兴趣区域的快照，例如通过计算地理坐标位于感兴趣区域内的所有交叉点的诱导子图。生成的子图不一定是强连接的（例如，您可以有一条进出该区域的道路，但不与该区域内的任何其他道路连接）。然后通过枚举所有强连接的组件来预处理子图，

# php - 在php中对数组值进行分组

> ID：11212690
> 
> 赞同：-5
> 
> 时间：2012-06-26T17:20:29.400
> 
> 标签：php

我有一个数组值

```
$array[0]="Test|121";
$array[1]="Test|goo";
$array[2]="Test|example"; 
```

我需要将其更改为

```
$array[0]="Test";
$array[1]="121";
$array[2]="goo";
$array[3]="example"; 
```

谁能告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:31:46.257

```
$array[0]="Test|121";
$array[1]="Test|goo";
$array[2]="Test|example";

$result = explode( '|', array_shift( $array));
foreach( $array as $k => $v) {
    $parts = explode( '|', $v);
    $result[] = array_pop( $parts);
}

var_dump( $result); 
```

这会产生*复杂且非常奇怪的* [输出](http://viper-7.com/3Xjfbx)：

```
array(4) {
  [0]=>
  string(4) "Test"
  [1]=>
  string(3) "121"
  [2]=>
  string(3) "goo"
  [3]=>
  string(7) "example"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:32:32.630

```
function cutStr(&$elem, $key)
{
    $ret = explode('|', $elem);

    if ( $key == 0 )
        $elem = $ret[0];
    else
        $elem = $ret[1];
}

$array[0]="Test|121";
$array[1]="Test|goo";
$array[2]="Test|example";

array_walk($array, 'cutStr');
print_r($array); 
```

尝试这个。

# ruby-on-rails - Nokogiri 在服务器与 localhost 上的解析不同

> ID：11212691
> 
> 赞同：3
> 
> 时间：2012-06-26T17:20:31.537
> 
> 标签：ruby-on-rails, ruby, nokogiri, open-uri

在本地运行 Nokogiri 与在我的服务器上运行它时，我得到了一些奇怪的差异。在我的本地机器上，整个文档似乎可以解析并可用，但在服务器上，我似乎得到了 doctype 选项卡和一些随机注释标签。

首先，为了确保 open-uri 没有问题，我检查了它——结果不准确，但包含正确的标记。

当地的：

```
ruby-1.8.7-p352 :005 > s = open('http://www.pennstateind.com/store/PK2WAY.html')
=> #<File:/var/folders/G8/G8bsAGBk1o82Eyks3ZmFtq-+3Y6/-Tmp-/open-uri20120626-5891-10y2ncr-0> 
ruby-1.8.7-p352 :006 > s.length
=> 88408 
```

服务器：

```
rb(main):008:0> s = open('http://www.pennstateind.com/store/PK2WAY.html')
=> #<File:/tmp/open-uri20120626-22167-1td2l72-0>
irb(main):009:0> s.length
=> 98184 
```

当我在本地机器上运行它时，我得到了这个：

```
ruby-1.8.7-p352 :003 > d = Nokogiri::HTML(open('http://www.pennstateind.com/store/PK2WAY.html'))
=> [ OUTPUT OMITTED FOR BREVITY - CAN SUPPLY ON REQUEST ] 
ruby-1.8.7-p352 :004 > d.to_s.length
=> 85212 
```

但是当我在服务器上运行它时，我得到了这个：

```
rb(main):006:0> d = Nokogiri::HTML(open('http://www.pennstateind.com/store/PK2WAY.html'))
=> #<Nokogiri::HTML::Document:0x36620e14b580 name="document" children=   [#<Nokogiri::XML::DTD:0x36620e14b1c0 name="html">, #<Nokogiri::XML::Comment:0x36620e14b170 " Open Graph Tags ">, #<Nokogiri::XML::Comment:0x36620e14a98c " Customer_Session_Verified: 0 ">]>
irb(main):007:0> d.to_s.length
=> 172 
```

唯一明显的 gem 区别在于 JS 编译器 - 所有其他 gem 都是本地和服务器之间的确切版本：

```
Local => libv8 (3.3.10.4 x86-darwin-10)
Server => libv8 (3.3.10.4 x86_64-linux) 
```

任何想法如何弄清楚发生了什么和/或解决这个问题？

* * *

更新 - 为了找出问题的实际出处，我从服务器和本地主机中提取了一个文件，然后在每个文件上运行它们。下面的结果表明问题肯定出在Nokogiri - 问题是什么我仍然困惑......

本地运行：

```
# FILE ORIGINALLY PULLED FROM SERVER

ruby-1.8.7-p352 :015 > server_file = File.open("/Users/jmcdonald/Desktop/files/SERVER.txt", "r")
=> #<File:/Users/jmcdonald/Desktop/files/SERVER.txt> 
ruby-1.8.7-p352 :016 > server_file.read.length
=> 93071 

ruby-1.8.7-p352 :022 > Nokogiri::HTML(server_file).to_s.length
=> 98793

# FILE ORIGINALLY PULLED FROM LOCALHOST

=> #<File:/Users/jmcdonald/Desktop/files/LOCAL.txt> 
ruby-1.8.7-p352 :018 > local_file.read.length
=> 89622

ruby-1.8.7-p352 :026 > Nokogiri::HTML(local_file).to_html.length
=> 94632 
```

在服务器上运行：

```
# FILE ORIGINALLY PULLED FROM SERVER

irb(main):001:0> sf = File.open('/home/charlest/public_html/files/nokogiri_issue/SERVER.txt', 'r')
=> #<File:/home/charlest/public_html/files/nokogiri_issue/SERVER.txt>
irb(main):002:0> sf.read.length
=> 93071

irb(main):004:0> Nokogiri::HTML(sf).to_s.length
=> 896      # <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< WRONG

# FILE ORIGINALLY PULLED FROM LOCALHOST

irb(main):008:0> lf = File.open('/home/charlest/public_html/files/nokogiri_issue/LOCAL.txt', 'r')
=> #<File:/home/charlest/public_html/files/nokogiri_issue/LOCAL.txt>
irb(main):009:0> lf.read.length
=> 89622

irb(main):011:0> Nokogiri::HTML(lf).to_s.length
=> 896      # <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< WRONG 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T16:29:29.813

已发布的 Nokogiri 版本也存在一个错误（我相信它影响了 1.5.1），它在某些有限的情况下影响了解析。我建议确保您的宝石已更新。（宝石更新）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:08:49.090

看起来您的服务器和本地环境正在使用不同版本的[libxml2](http://www.xmlsoft.org/)。众所周知，旧版本存在奇怪的解析错误，因此将您的服务器更新到您可能的最新版本（或至少更新到您用于开发的相同版本）应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:05:57.003

在尝试使用Nokogiri 解析之前，请尝试使用`File#read`而不是`File#open`或确保您正在运行。`lf.rewind`您看到的行为很可能是`lf`文件句柄位于文件末尾的结果，这意味着 Nokogiri 正在解析一个空文档。

```
> remote = File.open('./PK2WAY.html')
# => #<File:./PK2WAY.html>
> remote.read.length
# => 92978
> remote.read.length
# => 0
> Nokogiri::HTML(remote).to_s.length
# => 108
> remote.rewind
# => 0
> Nokogiri::HTML(remote).to_s.length
# => 93847 
```

# vb6 - 使用 VB 6.0 在远程 URL 解析 xml 文档

> ID：11212693
> 
> 赞同：2
> 
> 时间：2012-06-26T17:20:34.553
> 
> 标签：vb6, msxml

我正在尝试使用`MSXML2.DOMDocument`该类解析驻留在 Visual Basic 6.0 中的远程服务器上的 xml 文件的内容。

我正在使用类的`Load`方法`MSXML2.DOMDocument`来传递url。url 的格式为`http://<server>/ABC.xml`，但是，服务器需要用户凭据才能访问该文件。

如何使用此类或其他支持类传递用户凭据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T21:51:15.447

您可以`http://<username>:<password>@<server>/ABC.xml`在许多情况下使用，也可以使用`XMLHTTPRequest`帮助对象来发出实际请求。

请注意，当您使用 MSXML DOMDocument 对象时，您不会解析任何内容，而是由该对象完成繁重的工作。您所做的只是浏览 DOM 树，相比之下，这是一项微不足道的任务。

# windows-phone-7.1 - 如何启用或禁用 windows phone 7 中的按钮？

> ID：11212694
> 
> 赞同：1
> 
> 时间：2012-06-26T17:20:35.157
> 
> 标签：windows-phone-7.1

我的设计有以下几行代码：

```
<Button  BorderThickness="0" Content="Done" FontSize="21.333" Height="65" Margin="334,13,6,0" VerticalAlignment="Top" FontFamily="Times New Roman" Name="btnConvert"  >
                <Button.Background>
                    <ImageBrush ImageSource="Images/button_back2.png" />
                </Button.Background>
            </Button> 
```

我的代码去`btnConvert.IsEnabled = false;`。

它不能禁用该按钮。相反，它隐藏了按钮。我需要该按钮可见但禁用。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T12:03:41.890

Isenabled 对我有用。在某些 xaml 查看器中尝试您的 xaml 代码，以检查您是否没有做错任何事情

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T03:26:22.493

这是我通常做的：

```
`btnConvert.IsHitTestVisible = false;` 
```

它将禁用该按钮，但您可以在开始时看到具有相同颜色的按钮。

# python - Funkload API 测试

> ID：11212695
> 
> 赞同：0
> 
> 时间：2012-06-26T17:20:36.903
> 
> 标签：python, load-testing, funkload

所以我想使用 funkload 对 API 进行压力测试。我在测试中有一组网址

问题是身份验证是通过每个请求的查询字符串发送的（不涉及 cookie）

所以 /abc?auth=token1 是一个用户， /abc?auth=token2 是另一个用户

我有类似这样的代码：

```
class Simple(FunkLoadTestCase):

    def setUp(self):
        # fetch urls from a file ... ending up with something like
        urlList = ['http://localhost/abc?auth=1', 'http://localhost/def?auth=1']
        self.urlList = urlList

    def test_simple(self):
        for url in self.urlList:
            self.get(url, description='Get url') 
```

问题是服务器严重依赖 memcached，因此同时运行同一个用户 x 次只会使服务器在第一次请求时处于适当的负载。

我正在寻找一种方法来识别我正在运行的并发用户，以便我可以修改每个并发用户的身份验证令牌。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T14:52:03.420

对于遇到类似问题的任何人。我想出了如何使用凭证服务器来做到这一点。我没有在 passwords.txt 中实际使用用户名：密码，而是使用了名称：authkey。

另一种方法，但不能扩展为运行多个负载生成服务器，您可以访问 self.thread_id，这样您就可以知道您正在以哪个线程/用户身份运行。

# vb.net - vb.net 列表混乱

> ID：11212700
> 
> 赞同：0
> 
> 时间：2012-06-26T17:20:57.583
> 
> 标签：vb.net, list

我正在遍历 vb.net 中的拼写检查器列表（使用 vs 2010）。我想浏览一个拼写错误的单词列表。每次代码选择比最后一个检查单词的索引高一个的索引。

在我的 notquiteVB/Pythonese 版本中，我认为它会翻译如下：

```
(start loop)
dim i as Integer = 0  
dim word as String
word = words_to_check_at_spellcheck.Item(0 + i)
i = i+1
(end loop) 
```

但这根本不起作用......当它到达列表中的最后一项并到达“word =”时，它会抛出“超出范围 - 必须小于集合的大小”的错误。

如何获取列表中的最后一项？也许列表不是 VB 用于这种事情的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:26:53.500

如果您收集的拼写错误的单词被命名为**mispelled**：

```
For Each word As String In mispelled
    'Do something
Next 
```

# ios - NSPredicate 未执行

> ID：11212702
> 
> 赞同：8
> 
> 时间：2012-06-26T17:21:01.847
> 
> 标签：ios, sqlite, core-data, nspredicate, magicalrecord

这很有趣。在我的应用程序中，我在数据库中创建了数千个条目（在另一个线程中，我使用的是 MagicalRecord）。一切似乎都很好（从背景/前景/上下文的角度来看）。

当我在主线程中尝试获取“刚刚插入”的数据时，我发现了以下行为：

```
- (NSArray *) familiesInCompany:(Company *) company {
  NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"company == %@", company];
  NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"company.name == %@", company.name];

  NSArray *first = [Family MR_findAllSortedBy:@"name" ascending:YES withPredicate:predicate1];
  NSArray *second = [Family MR_findAllSortedBy:@"name" ascending:YES withPredicate:predicate2];
  NSArray *third = [Family MR_findByAttribute:@"company" withValue:company andOrderBy:@"name" ascending:YES];

  return second;
} 
```

现在我得到的是：

*   首先：是一个空数组
*   第二：包含所有`Family`对象，如预期的那样
*   第三：是一个空数组。

通过调试 SQL 语句，我得到以下信息：

“第一个”声明：

> CoreData：注释：总提取执行时间：0 行 0.0000 秒。

“第二个”声明“：

> CoreData: sql: SELECT 0, t0.Z_PK, t0.Z_OPT, t0.ZNAME, t0.ZCOMPANY FROM ZFAMILY t0 JOIN ZCOMPANY t1 ON t0.ZCOMPANY = t1.Z_PK WHERE t1.ZNAME = ? 按 t0.ZNAME 订购
> 
> CoreData：注解：sql连接获取时间：0.0005s
> 
> CoreData：注释：总提取执行时间：2 行 0.0007 秒。

“第三”声明：

> CoreData：注释：总提取执行时间：0 行 0.0000 秒。

有趣的是我关闭了应用程序（我的意思是真正手动终止它）然后我打开它，所有三个“获取”语句都起作用。

为什么第一个和第三个 fetch 语句似乎永远不会被执行？如何深挖问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T05:56:06.220

我有同样的问题，这是我想出来的，以及我是如何解决的。

Magical Record 有一个 root`NSManagedObjectContext`作为 default 的父级`NSManagedObjectContext`。当我在默认上下文中创建`NSFetchedResultsController`时，一切似乎都正常，就像你一样。

问题是所有*新* `NSManagedObject`的都带着他们仍然是临时`ObjectID`的。因此，就我而言，我使用 an`NSPredicate`来确定关联表上的查询范围。我不只是调用关联方法，因为我不想将*所有内容*加载到内存中并且想要`NSFetchedResultsController`处理更改，对我来说。

使用临时`ObjectID`查询找到零个结果，这正是它显示的内容。

显然，子上下文（默认）没有从转换为非临时 ID 的好处，即使它已被持久化到后备存储。

当我试图用`obtainPermanentIDsForObjects:error:`. Core Data 抱怨它无法满足我的实例的故障。没关系，这不可能实际上是一个错误。简单地刷新对象也没有效果。我怀疑这是一个核心数据错误，几乎没有人会发痒，因为他们只是使用关联方法来获取 NSSet。

我的解决方法是使用父上下文`NSFetchedResultsController`，就像在这个问题中一样，[Magical Record、saving 和 NSFetchedResultsController](https://stackoverflow.com/questions/10974713/magical-record-saving-and-nsfetchedresultscontroller)。

我已经在编辑时将默认值包装在一个新的子上下文中，因此，使用 将实例复制到该编辑上下文中，因此除了添加到参数`createInContext`之外，我不需要做任何额外的工作。`.parentContext`

顺便说一句，这只发生在关联来源的新实例上。一旦一个实例从启动就在那里，它有一个非临时的`ObjectID`并且从来没有问题。

# jquery - Hashtag，防止原始 URL

> ID：11212711
> 
> 赞同：2
> 
> 时间：2012-06-26T17:21:39.660
> 
> 标签：jquery, hashtag

我正在一个加载了 AJAX 内容的网站上工作。为了显示这个内容，我在我的 index.html 页面中创建了一个 div 容器，我使用 .load jQuery 方法加载其他 html 页面，如部分或项目。

我的问题是我正在生成这样的 URL：

此链接正确加载新内容，并生成如下 URL：

[http://domain.com/#dummy.html](http://domain.com/#dummy.html)

问题是，如果您从 URL 中删除主题标签并加载该 URL，则站点将显示 dummy.html 而不是通过 AJAX 加载的索引和内容。

我使用主题标签更改事件来捕获此更改，以便在页面中触发其他效果。

我该如何解决这个问题？有一些方法可以强制添加主题标签始终请求 URL？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T03:01:36.040

这是合乎逻辑的，与手头的技术无关。

使用`http://domain.com/#dummy-div`并进行从 dummy-div 到 dummy.html 的内部翻译

只需决定命名规则，如果用户打开会发生什么`http://domain.com/dummy-div`

# javascript - 控制 HTML5 视频中的播放开始位置和持续时间

> ID：11212715
> 
> 赞同：10
> 
> 时间：2012-06-26T17:21:52.877
> 
> 标签：javascript, html5-video

我们有一个视频（13 分钟长），我们想用 HTML5 控制它。我们希望能够让我们的用户控制和选择他们想要播放的视频部分。优选地，该控制将通过2个输入字段。他们将在第一个框中输入开始时间（以秒为单位），并在第二个框中输入播放持续时间（以秒为单位）。例如，他们可能希望在 10 秒后开始播放视频并播放 15 秒。执行此操作所需的有关 Javascript 的任何建议或指导？

*注意：*我发现了以下内容：

*   [加载时在特定位置启动 HTML5 视频？](https://stackoverflow.com/questions/5981427/start-html5-video-at-a-particular-position-when-loading)

但它只解决从特定时间开始的问题，而不是在指定的时间长度内播放视频。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-26T18:06:35.700

您可以使用 timeupdate 事件侦听器。

将开始时间和持续时间保存到`loadedmetadata`事件后的变量中。

```
// Set video element to variable
var video = document.getElementById('player1');

var videoStartTime = 0;
var durationTime = 0;

video.addEventListener('loadedmetadata', function() {
  videoStartTime = 2;
  durationTime = 4;
  this.currentTime = videoStartTime;
}, false); 
```

如果当前时间大于开始时间加上持续时间，则暂停视频。

```
video.addEventListener('timeupdate', function() {
  if(this.currentTime > videoStartTime + durationTime){
    this.pause();
  }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-10-14T09:08:31.200

如果您能够在设置视频网址时设置视频的开始时间和结束时间。您可以在 url 本身中指定开始和结束时间，例如

```
src="future technology_n.mp4#t=20,50" 
```

它将从第 20 秒到第 50 秒播放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T20:43:21.570

使用 Paul Sham 提出的 javascript 解决方案有很多细微差别。更简单的做法是使用[Media Fragment URI Spec](http://www.w3.org/TR/media-frags/)。它将允许您指定要播放的较大音频或视频文件的一小部分。要使用它，只需更改您正在流式传输的文件的源并添加以秒为单位`#t=start,end`的`start`开始时间和以秒`end`为单位的结束时间。

例如：

```
var start = document.getElementById('startInput').value;
var end = document.getElementById('endInput').value;

document.getElementById('videoPlayer').src = 'http://www.example.com/example.ogv#t='+start+','+end; 
```

这将更新播放器以在指定时间开始源视频并在指定时间结束。媒体片段的浏览器支持也很好，因此它应该可以在任何支持 HTML5 的浏览器中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T11:01:43.490

延伸至 michael hanon 评论：IE 返回 buffered.length = 0 和 seekable.length = 0。视频无法播放。所以解决方案：

src="video.mp4#t=10,30"

在 IE 中不起作用。如果您想支持 IE，唯一的方法是使用 javascript 从 0 秒开始搜索视频。

# php - 为什么我不能使用 OAuth 进行身份验证？

> ID：11212716
> 
> 赞同：5
> 
> 时间：2012-06-26T17:21:55.787
> 
> 标签：php, curl, oauth, twitter

我编写了一个非常简单的应用程序来在给定条件下更新我的 Twitter 状态。我已经使用 twitter 文档来了解创建 OAuth 签名的要求以及如何构造 Authorization 标头。然后我在 PHP 中使用 cURL 发送请求。

使用 twitter 开发网站上的 OAuth 工具，我比较了我的签名基本字符串和授权标头，两者完全相同：

**签名基本字符串**

```
POST&https%3A%2F%2Fapi.twitter.com%2F1%2Fstatuses%2Fupdate.json&oauth_consumer_key%3DYNxxxxxxxxxxxWnfI6HA%26oauth_nonce%3D31077a3c7b7bee4e4c7e2b5185041c12%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1340729904%26oauth_token%3D2991771-4csoiO2fxmWgSxxxxxxxxxxDjWj2AbyxATtiuadNE%26oauth_version%3D1.0%26status%3Dblah%2520test%2520blah. 
```

**授权标头**

```
Authorization: OAuth oauth_consumer_key="YN4FLBxxxxxxxxxxI6HA", oauth_nonce="31077a3c7b7bee4e4c7e2b5185041c12", oauth_signature="M2cXepcxxxxxxxxxxAImeAjE%2FHc%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1340729904", oauth_token="2991771-4cxxxxxxxxxxSmRvjzMoooMDjWj2AbyxATtiuadNE", oauth_version="1.0" 
```

显然我已经替换了一些字符`x`来隐藏我的数据，但是比较两个字符的字符会产生完全相同的结果。作为参考，我对 OAuth 工具生成的时间戳和随机数进行了硬编码，以便我的值可以与检查时相同。我的访问级别设置为读写。在同一页面上还有最后一个示例 - 在命令行上使用 cURL 运行的命令。当我运行此命令时，它可以完美运行，并且可以毫无问题地发布到我的 Twitter 提要中。

考虑到这一点，我相信到目前为止我创建的所有内容都很好，并且认为我发布生成前面提到的细节的代码没有多大意义。但是，我认为使用 cURL 进行调用的代码是罪魁祸首，但不知道为什么：

```
<?php
// ...
$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, $baseUrl);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($curl, CURLOPT_HTTPHEADER, array("Authorization: $header"));
curl_setopt($curl, CURLOPT_POSTFIELDS, array('status' => $status));
$result = json_decode(curl_exec($curl));
curl_close($curl);

var_dump($result); 
```

请注意`$baseUrl`，`$header`和`$status`是用于生成签名基本字符串和授权标头的相同变量，它们匹配得很好。

运行时页面的输出为：

```
object(stdClass)#1 (2) { ["error"]=> string(34) "Could not authenticate with OAuth." ["request"]=> string(23) "/1/statuses/update.json" } 
```

我希望这里有足够的细节让有人指出我正确的方向！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:53:05.137

经过更多的搜索、测试`apache_request_headers()`并坚持认为我的数据很好并且问题出在 cURL 的概念之后，我意识到 cURL`Content-type`将请求设置为`multipart/form-data;`并添加边界信息，显然还有更长的`Content-Length`字段。这意味着状态没有正确发送，我认为是因为`multipart/form-data;`请求格式不正确。

解决方案是将其作为字符串发送。例如，这有效：

```
curl_setopt($curl, CURLOPT_POSTFIELDS, 'status='. rawurlencode($status)); 
```

但我发现有一种更好的方法（尤其是在使用多个值时，当我想使用数组时）：

```
$postfields = array('status' => $status);
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($postfields)); 
```

恕我直言，这看起来好多了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T20:03:27.313

我认为这是你的[nonce](http://oauth.net/core/1.0/#nonce)。来自[文档](https://dev.twitter.com/docs/auth/authorizing-request)：“oauth_nonce 参数是您的应用程序应为*每个唯一请求*生成的唯一令牌”（强调我的）。

警告：我更熟悉 OAuth 2 + Java 或 JavaScript，而不是 OAuth 1 + PHP。

如果不是这样（或者不是唯一的），您可以将您的实际 HTTP 请求（例如使用 WireShark）与他们在该页面上记录的示例请求进行比较。关于“构建标题字符串”的注释也可能有所帮助。

# lisp - 为什么 defun 不一样 (setq )?

> ID：11212717
> 
> 赞同：20
> 
> 时间：2012-06-26T17:21:57.840
> 
> 标签：lisp, common-lisp, sbcl

我对 defun 宏的工作原理感到困惑，因为

```
(defun x () "hello") 
```

将创建函数 x，但符号 x 仍然是未绑定的。

如果我将一些 lambda 绑定到 x 那么 x 将有一个值，但它不会被解释器视为如下形式的函数：

```
(x) 
```

我认为这与 defun 应该在全局环境中定义函数这一事实有关，但我不确定它究竟是什么意思。为什么我不能在当前环境中对其进行阴影处理？

如果某些 lambda 绑定到符号，是否有任何方法强制解释器将符号视为函数？例如：

```
(setq y (lambda () "I want to be a named function"))
(y) 
```

PS：我正在使用 SBCL。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-26T18:21:07.387

Common Lisp 对函数和值有不同的命名空间。

`DEFUN`您可以在函数命名空间中使用、`FLET`和`LABELS`其他一些函数来定义函数。

如果要获取函数对象作为值，请使用`FUNCTION`.

```
(defun foo (x) (1+ x))

(function foo)   ->  #<the function foo> 
```

或更短：

```
#'foo    ->   #<the function foo> 
```

如果要调用函数，则编写`(foo 100)`.

如果要将函数作为值调用，则需要使用`FUNCALL`or `APPLY`：

```
(funcall #'foo 1) 
```

您可以传递函数并调用它们：

```
(defun bar (f arg)
  (funcall f arg arg))

(bar #'+ 2)  ->  4 
```

在 DEFUN 的情况下：

它不是`(setf (symbol-value 'FOO) (lambda ...))`。

它更像`(setf (symbol-function 'foo) (lambda ...))`。

请注意，这两个命名空间使您能够编写：

```
(defun foo (list)
  (list list))

(foo '(1 2 3))  ->  ((1 2 3)) 
```

内置函数`LIST`和变量之间没有冲突`LIST`。由于我们有两个不同的命名空间，我们可以将相同的名称用于两种不同的目的。

另请注意，在局部函数的情况下，不涉及*符号。*命名空间不一定与符号相关联。因此，对于局部变量，无法通过符号名称进行函数查找。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T17:26:29.783

Common Lisp 为每个符号有多个槽，包括一个值槽和一个函数槽。当您使用语法`(x)`时，common lisp 会查找 的函数槽绑定`x`。如果要调用值绑定，请使用`funcall`或`apply`。

见[http://cl-cookbook.sourceforge.net/functions.html](http://cl-cookbook.sourceforge.net/functions.html)

# jquery - 带有悬停导航和暂停的 jQuery 滑块 - 不使用插件

> ID：11212730
> 
> 赞同：0
> 
> 时间：2012-06-26T17:22:40.577
> 
> 标签：jquery

在我尽可能原始地编写 jQuery 的后期，并且没有大量 jQuery 插件堆积并减慢我的页面速度 - 我正在尝试创建自己的滑块。

到目前为止，我已经创建了一个小提琴。

我的 HTML 标记不是动态的 - 幻灯片动画过程只是定位的。

我遇到的复杂情况是动画必须在下一个动画开始之前完全运行，如果你悬停菜单很多，我的动画就会开始排队。

如果悬停发生变化，我需要一个动画中途停止，并自动运行到下一个动画位置。希望这是有道理的，你会明白我在[小提琴](http://jsfiddle.net/EYDtF/)中的意思。

另外，我希望动画在每张幻灯片中自动运行 2000 毫秒 - 如果幻灯片本身悬停，我希望它暂停。

我知道我非常希望有人给我写一个自定义滑块脚本，但是看看如何在没有插件的情况下编写原始脚本会非常有帮助和直观。

我需要我的滑块是轻量级的，因此不会产生额外的标记。就像我尝试过的所有插件一样，它们太重而且太多了。我喜欢纯 jquery。

任何帮助将不胜感激。谢谢

请参阅我使用最新 jQuery 的微型小提琴示例。

[http://jsfiddle.net/EYDtF/](http://jsfiddle.net/EYDtF/)

![在此处输入图像描述](../Images/089c192d5832ce595a6be88abd13b6dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:03:43.220

马虎，但可能会帮助您入门

```
var banners = $('.banner-slides'),
controls = $('.banner-menu'),
cycle = true,
current = 0;

doCycle();

controls.find('li').hover(function() {

    controls.children().removeClass('hover');
    $(this).addClass('hover');

    animate($(this).index());

    cycle = false;
}, function() {

    cycle = true;
});

function doCycle() {

    if (cycle) {

        if (controls.find('.hover').length > 0) {

            if (controls.find('.hover').next().length > 0) {

                var next = controls.find('.hover').next();

                controls.children().removeClass('hover');
                next.addClass('hover');

                animate(current);
            }
            else {

                controls.children().removeClass('hover');
                controls.children().first().addClass('hover');

                animate(0);
            }
        }
        else {

            controls.children().first().addClass('hover');

            animate(0);
        }
    }

    setTimeout(doCycle, 2000);
}

function animate(pos) {

    banners.stop().animate({top: pos * -200});

    current = pos + 1;
} 
```

[http://jsfiddle.net/imoda/EYDtF/5/](http://jsfiddle.net/imoda/EYDtF/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:31:53.363

你需要看看这些你不喜欢的插件是如何工作的。在您悬停功能的那一刻，目标是一个 id - 如果您针对一个类，您会立即减少代码量，例如

```
$('.hover').hover(function(){

$bannerSlide.animate({
        'top' : var                   
    });

}); 
```

然后，您可以找出一种将位置（var）传递给您减少代码的方法。

# .net - 如何通过自定义绑定绕过最大可命名字符数配额 (16384)？

> ID：11212739
> 
> 赞同：0
> 
> 时间：2012-06-26T17:23:01.103
> 
> 标签：.net, wcf, web-services, .net-3.5, wcf-binding

我从 WCF 服务调用中收到以下 CommunicationException。我知道[根据这个答案](https://stackoverflow.com/a/2766884/198048)，我需要设置`TextMessageEncodingBindingElement.ReaderQuotas`对象，但它似乎是只读的（尽管在文档中它说它是 Get/Set）。

有谁知道如何在代码中做到这一点？

```
System.ServiceModel.CommunicationException was caught
  Message="Error in deserializing body of reply message for operation 'PutMessage'."
  Source="mscorlib"
  StackTrace:
     Server stack trace:     at System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)    at System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, String action, MessageDescription messageDescription, Object[] parameters, Boolean isRequest)    at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeBodyContents(Message message, Object[] parameters, Boolean isRequest)    at System.ServiceModel.Dispatcher.OperationFormatter.DeserializeReply(Message message, Object[] parameters)    at System.ServiceModel.Dispatcher.ProxyOperationRuntime.AfterReply(ProxyRpc& rpc)    at System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc)    at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)    at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)    at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)    at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)  Exception rethrown at [0]:     at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)    at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)    at
     ...
  InnerException: System.InvalidOperationException
       Message="There is an error in XML document (1, 695)."
       Source="System.Xml"
       StackTrace:
            at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)    at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle)    at System.ServiceModel.Dispatcher.XmlSerializerOperationFormatter.DeserializeBody(XmlDictionaryReader reader, MessageVersion version, XmlSerializer serializer, MessagePartDescription returnPart, MessagePartDescriptionCollection bodyParts, Object[] parameters, Boolean isRequest)
       InnerException: System.Xml.XmlException
            LineNumber=0
            LinePosition=0
            Message="The maximum nametable character count quota (16384) has been exceeded while reading XML data. The nametable is a data structure used to store strings encountered during XML processing - long XML documents with non-repeating element names, attribute names and attribute values may trigger this quota. This quota may be increased by changing the MaxNameTableCharCount property on the XmlDictionaryReaderQuotas object used when creating the XML reader. Line 1, position 695."
            Source="System.Runtime.Serialization"
            StackTrace:
                 at System.Xml.XmlExceptionHelper.ThrowXmlException(XmlDictionaryReader reader, String res, String arg1, String arg2, String arg3)    at System.Xml.XmlExceptionHelper.ThrowMaxNameTableCharCountExceeded(XmlDictionaryReader reader, Int32 maxNameTableCharCount)    at System.Xml.XmlBaseReader.QuotaNameTable.Add(Int32 charCount)    at System.Xml.XmlBaseReader.QuotaNameTable.Add(String value)    at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderstarTransportPortTypes.InitIDs()    at System.Xml.Serialization.XmlSerializationReader.Init(XmlReader r, XmlDeserializationEvents events, String encodingStyle, TempAssembly tempAssembly)    at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events)
            InnerException: 
```

这是我用来构建绑定的代码：

```
Private Function GetCustomBinding() As Channels.Binding

    Dim asbe As New Channels.AsymmetricSecurityBindingElement

    '... set various properties on asbe object

    'Add the elements to the custom binding
    Dim myBinding As New CustomBinding

    'Protocol Binding Elements (security)
    myBinding.Elements.Add(asbe)

    'Encoding Binding Element
    Dim textMsgEncoder As New TextMessageEncodingBindingElement(MessageVersion.Soap11, System.Text.Encoding.UTF8)

    Dim rQuota As New System.Xml.XmlDictionaryReaderQuotas
    rQuota.MaxDepth = 2147483647
    rQuota.MaxStringContentLength = 2147483647
    rQuota.MaxArrayLength = 2147483647
    rQuota.MaxBytesPerRead = 2147483647
    rQuota.MaxNameTableCharCount = 2147483647

    ''''''''''

    'textMsgEncoder.ReaderQuotas = rQuota 'this is readonly, so can't do it

    ''''''''''

    myBinding.Elements.Add(textMsgEncoder)

    'Transport Binding Element
    Dim httpsBindingElement As New HttpsTransportBindingElement()
    httpsBindingElement.MaxBufferSize = 5000000
    httpsBindingElement.MaxReceivedMessageSize = 5000000

    myBinding.Elements.Add(httpsBindingElement)

    Return myBinding

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:30:46.473

您不能设置 ReaderQuotas 对象，但可以在其上设置单个属性，如下所示：

`textMsgEncoder.ReaderQuotas.MaxNameTableCharCount = 2147483647`或其他适当的值

# html - 浏览器上的水平滚动条提示右侧有空白，如何解决？

> ID：11212740
> 
> 赞同：0
> 
> 时间：2012-06-26T17:23:02.440
> 
> 标签：html, css

当我的网站缩小并出现水平滚动条时，我的网页右侧页脚处会建议一个空白区域。

我该如何解决这个问题？网址： http: [//www.deserved.nl/shop/home.html](http://www.deserved.nl/shop/home.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:51:38.680

@Jeff B：请让我知道将其添加为单独的答案而不是作为对您的答案的评论是否不合适。

杰夫是正确的，但为了澄清我会这样做：

1.  从类中删除`padding-left: 180px;`样式`.footerWrapper`
2.  `width: 100%;`从中删除`#footer`
3.  添加`min-width: 1141px;`到`#footer`

这应该照顾空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:34:42.867

问题是您正在定义`wrapper`to be`1141px`和`footer`to be的宽度`100%`。这意味着当宽度小于 1141px 时，您将有一个水平滚动条，但您的页脚仍将是窗口大小的 100%，从而导致右侧出现空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:26:02.033

删除页脚结束标记`</div>`和`</body>`

所以像这样：`</div></body>`

# sql-server - Amazon RDS SQL Server 更改数据库所有者

> ID：11212741
> 
> 赞同：2
> 
> 时间：2012-06-26T17:23:07.547
> 
> 标签：sql-server, amazon-rds

我知道我不能让我在 RDS 中的用户成为系统管理员......但我至少可以将数据库所有者从 rdsa 更改为我自己的用户吗？如果我使用 SSMS 并在数据库属性中更改所有者，我会收到以下消息：

```
The proposed new database owner is already a user or aliased in the database 
```

为什么我要这样做而不是仅仅将我的用户添加到 db_owner 角色？

我有我想要创建的索引视图，并且在尝试这样做时，我得到了错误

```
Index cannot be created on view '...' because the underlying object '...' has a different owner. 
```

我知道我可以在底层对象上手动使用 ALTER AUTHORIZATION 来允许这样做，如下所述：[https ://dba.stackexchange.com/questions/9436/sql-server-2008-cannot-create-index-on-indexed -查看](https://dba.stackexchange.com/questions/9436/sql-server-2008-cannot-create-index-on-indexed-view)。但我真的不想对我的每个索引视图引用的每个对象都这样做。

我当然愿意接受有关替代方法的建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:37:52.953

> 无法在视图“...”上创建索引，因为基础对象“...”具有不同的所有者。

这是您要解决的真正问题，对吗？更改数据库所有者（这将通过运行来完成`ALTER AUTHORIZATION ON DATABASE::<dbname> TO <loginname>`）只是一个红鲱鱼。

要解决此问题，您不太可能需要更改基础对象的所有者，您更有可能想要更改**视图**的所有者，并且可能正确的解决方案是在与基础表相同的模式中创建视图：

```
create view schema.indexedView
with schemabinding
as
select ... 
from schema.table
where ... 
```

请注意，我说“可能”和“可能”，这不是我不确定解决方案的借口。是因为只有*您*可以根据您网站的具体业务规则、审核设置和访问权限告诉我们所有者应该是谁。此外，一切都包含在数据库中（表、索引视图、包含表的架构和架构的所有者）这一事实意味着这是一个 RDS 实例这一事实完全无关紧要。

# jsp - 以前缀“c”导入的标签库中没有定义标签“foreach”

> ID：11212742
> 
> 赞同：5
> 
> 时间：2012-06-26T17:23:09.477
> 
> 标签：jsp, foreach, jstl, taglib

我正在开发一个应用程序（在 Eclipse 上），在 Tomcat 上带有一些 jsp 页面。

我已经下载了 JSTL jars

```
(http://jstl.java.net/download.html) 
```

并将它们添加到 web-inf/lib 和我的构建路径中。

但是，当我访问该页面时，我总是得到：

```
SEVERE: Servlet.service() for servlet [jsp] in context with path [/AccessControl2] threw exception [/ADAccess.jsp (line: 16, column: 1) No tag "foreach" defined in tag library imported with prefix "c"] with root cause

org.apache.jasper.JasperException: /ADAccess.jsp (line: 16, column: 1) No tag "foreach" defined in tag library imported with prefix "c" 
```

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0"> 
```

至于我的 JSP，我是这样做的：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"   "http://www.w3.org/TR/html4/loose.dtd">

<HTML>
<BODY>
<script type="text/javascript" src="saveOptions.js"></script>
<FORM METHOD=POST ACTION="SaveADAccess.jsp">

<jsp:useBean id="obj" class="nbsi.config.access.ADGroupListBean" scope="page"/>

<select name="withoutAccess" size="5">

<c:foreach var="item" items="${obj.withoutAccess}">
    <option>${item}</option>
    </c:foreach>
</select>

<select name="withAccess" size="5">

</select>
<P>
        <INPUT TYPE=SUBMIT> 
    <input type="button" onClick="removeOptions(withoutAccess,withAccess)"value="Give Access" />
        <input type="button" onClick="removeOptions(withAccess,withoutAccess)"value="Remove Access" />
</FORM>
</BODY>
</HTML> 
```

我已经搜索过这个问题，但解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-26T17:46:43.540

我认为标记名区分大小写。改用. `<c:forEach`_`<c:foreach`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-06-27T10:08:15.497

请参阅以下链接， [https://springbootmvc.blogspot.com/2020/06/jstl-core-tag.html](https://springbootmvc.blogspot.com/2020/06/jstl-core-tag.html)

确保要添加的标头正确，<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

# c# - 如何将 selectedIndex 与 listBox 中的字符串进行比较

> ID：11212743
> 
> 赞同：0
> 
> 时间：2012-06-26T17:23:11.907
> 
> 标签：c#, winforms

我想创建一个 if 语句来识别已从特定列表框中删除了哪个字符串。我想我可以做一个类似于下面的 if 语句并让它工作，但它告诉我它有无效的论点 - 如果有人能指导我，我将不胜感激

```
private void button2_Click(object sender, EventArgs e)
    {

        listBox2.Items.RemoveAt(listBox2.SelectedIndex); 
        if(listBox2.Items.RemoveAt(listBox2.SelectedItems.ToString().Equals("Test")))
        {
         picturebox.Image = null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:27:18.837

您需要在删除它`SelectedItem` *之前检查：*

```
private void button2_Click(object sender, EventArgs e)
{
    if (listBox2.SelectedIndex != -1)
    {
        if (listBox2.SelectedItem.ToString().Equals("Test")))
            picturebox.Image = null;

        listBox2.Items.RemoveAt(listBox2.SelectedIndex); 
    }
} 
```

我还添加了一项检查以确保实际选择了一个项目（否则你会得到错误）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:30:44.110

您的问题是您正在调用[ListBox.Items.RemoveAt(int index)](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.removeat.aspx)并传入一个布尔值：`listBox2.SelectedItems.ToString().Equals("Test"))`。

此外，您首先删除该项目，然后`RemoveAt`再次调用，这实际上将删除一个不同的项目（无论该索引现在是什么），或者如果您超出了 ListBox 集合的范围，则会引发异常。

您应该首先检查您选择的项目是否等于“测试”，然后从您的项目中删除该项目`ListBox`，如下所示：

```
private void button2_Click(object sender, EventArgs e)
{
    // SelectedIndex returns -1 if nothing is selected
    if(listBox2.SelectedIndex != -1)
    {
        if( listBox2.SelectedItem.ToString().Equals("Test") )
        {
            picturebox.Image = null;
        }
        listBox2.Items.RemoveAt(listBox2.SelectedIndex);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:29:00.943

您应该执行以下操作：

```
 String deletedString = listBox2.Items.ElementAt(listBox2.SelectedIndex).ToString();
    listBox2.Items.RemoveAt(listBox2.SelectedIndex); 
    if(listBox2.Items.RemoveAt(deletedString == "Test"))
    {
     picturebox.Image = null;
    } 
```

它可能无法编译（检查 Items 是否具有 SelectedItem 属性）。

# iphone - AVAudioPlayer 错误与 m4a 但不是 mp3

> ID：11212755
> 
> 赞同：1
> 
> 时间：2012-06-26T17:23:51.237
> 
> 标签：iphone, ios, xcode, audio, m4a

我对此感到非常困惑，并且想不出任何明显的我做错的事情。

我无法让 iOS 从我的应用程序包中提取 m4a

例如

```
NSURL *clickurl = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/fishy2.m4a", [[NSBundle mainBundle] resourcePath]]];

NSError *error;

audioPlayer = [[AVAudioPlayer alloc] 
                   initWithContentsOfURL:clickurl
                   error:&error];

audioPlayer.delegate = self;

if (error)
        NSLog(@"Error: %@", 
              [error localizedDescription]);
else
        [audioPlayer play]; 
```

我得到一个错误-43

但是，如果我改为使用相同的 mp3

```
NSURL *clickurl = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/fishy.mp3", [[NSBundle mainBundle] resourcePath]]]; 
```

一切都很幸福

我已经在不同的项目中尝试过很多次，但看不出哪里出错了。我一直在使用 NSFileManager 来检查它是否存在，它对 m4a 说不，但对 mp3 说是。尝试了各种不同的方法来导入不同格式的不同音频文件，但我似乎无法找到 m4a（它真的必须是 m4a）。mp3、wav、caf 等……都可以。有趣的是，我从用户文档目录运行的 m4as 工作得很好

我想要的只是能够复制文件！

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:43:09.810

解决方法=右键单击并“将文件添加到”而不是拖动

# facebook - 我的 facebook like 按钮有什么问题（fb 插件）

> ID：11212758
> 
> 赞同：1
> 
> 时间：2012-06-26T17:23:57.257
> 
> 标签：facebook, plugins, facebook-like

当页面刷新（大约三分之一）时，我的 facebook 喜欢按钮一次又一次地变得奇怪和故障，如图所示......

![截屏](../Images/7e157f6793dfa0a54351551dff7c444c.png)

这是我用来显示按钮的代码（以 PAGE_URL 作为实际 URL）：

```
<fb:like send='false' layout='standard' href='PAGE_URL' 
    width='500' show_faces='false' font='tahoma'></fb:like> 
```

所有的 javascript SDK 都是正确的，并且like 按钮有效，它只是做了图像中显示的奇怪的事情。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:28:00.520

看起来图像资源没有加载。观察错误并确认应该显示图像时，为什么不看一下来源。如果它根本没有加载，那将是 Facebook 问题，您应该记录一张票。

# c# - C#输出参数与返回

> ID：11212759
> 
> 赞同：10
> 
> 时间：2012-06-26T17:23:57.650
> 
> 标签：c#, reference, return, out

所以我是 C# 新手，我很难理解`out`。而不是仅仅从函数中返回一些东西

```
using System;
class ReturnTest
{
    static double CalculateArea()
    {
         double r=5;
         double area = r * r * Math.PI;
         return area;
    }

    static void Main()
    {
         double output = CalculateArea();
         Console.WriteLine("The area is {0:0.00}", output);
    } 
 } 
```

比较这个

```
 using System;
 class ReturnTest
 {
     static void CalculateArea(out double r)
     {
         r=5;
         r= r * r * Math.PI;
     }

     static void Main()
     {
         double radius;
         CalculateArea(out radius);
         Console.WriteLine("The area is {0:0.00}",radius );
         Console.ReadLine();
     }
} 
```

第一个是我通常会怎么做。我是否有理由想使用`out`而不是仅仅使用 return 语句？我知道这`ref`允许 2 路通信，并且我通常不应该使用`ref`，除非该函数正在对我发送的变量执行某些操作。

但是，out 和 return 语句之间有区别吗，如上所示？语法方面是否有理由偏爱其中一个？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-26T17:27:07.423

一个很好的使用`out`而不是`return`结果的`Try`模式是您可以在某些 API 中看到的模式，例如`Int32.TryParse(...)`. 在此模式中，返回值用于表示操作成功或失败（与异常相反），而`out`参数用于返回实际结果。

其优点之一`Int32.Parse`是速度，因为避免了异常。在另一个问题中提出了一些基准：[解析性能（如果，TryParse，Try-Catch）](https://stackoverflow.com/questions/150114/parsing-performance-if-tryparse-try-catch)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-26T17:31:32.050

`out`当您想从一个方法返回多个值，而不必将这些值包装在一个对象中时，通常会使用该关键字。

一个例子是`Int32.TryParse`方法，它既有一个返回值（一个表示尝试成功的布尔值），也有一个`out`在解析成功时获取该值的参数。

该方法可以返回一个同时包含布尔值和整数的对象，但这需要在堆上创建对象，从而降低了方法的性能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T17:27:40.373

`out`只有当我需要从一个方法返回多个东西时，我才倾向于使用。`Out`让您避免将多个对象包装到一个类中以进行返回。查看[Microsoft Out 页面上](http://msdn.microsoft.com/en-us/library/t3c3bfhx%28v=vs.80%29.aspx)的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T17:26:25.583

你可以有多个输出参数，所以如果你需要返回多个值，这比为你的返回值创建一个特殊的类要容易一些。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T17:25:51.433

当关注一个变量时，返回即可。但是如果你想返回超过 1 个值怎么办？`Out`对此有帮助。

```
static void CalculateArea(out double r, out double Foo)
{
    //Can return 2 values in terms of out variables.
}

static double CalculateArea(double r)
{
     // Will return only one value.
} 
```

# bash - Bash 使用第一行计数输出将空格添加到以下行

> ID：11212763
> 
> 赞同：2
> 
> 时间：2012-06-26T17:24:22.283
> 
> 标签：bash, printf

我这里有这段代码

```
printf '$request1 = "select * from whatever where this = that and active = 1 order by something asc";\n' 
| perl -pe 's/select/SELECT/gi ; s/from/\n   FROM/gi ; s/where/\n      WHERE/gi ; s/and/\n      AND/gi ; s/order by/\n         ORDER BY/gi ; s/asc/ASC/gi ; s/desc/DESC/gi ;' 
| awk '{gsub(/\r/,"");printf "%s\n%d",$0,length($0)}' 
```

它目前产生这样的输出

```
$request1 = "SELECT * 
22   FROM whatever 
17      WHERE this = that 
24      AND active = 1 
21         ORDER BY something ASC"; 
```

我想计算第一行（22）的数量并将该数量的空白添加到每一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:18:56.277

假设您不想打印数字，请将 AWK 命令更改为：

```
awk 'NR == 1 {pad = length($0); print} NR > 1 {gsub(/\r/,""); printf "%*s%s\n", pad, " ", $0}' 
```

输出：

```
$request1 = "SELECT * 
                         FROM whatever 
                            WHERE this = that 
                            AND active = 1 
                               ORDER BY something ASC"; 
```

# java - 无法在 Spring Session Factory 中设置自定义 CurrentSessionContext 类

> ID：11212769
> 
> 赞同：1
> 
> 时间：2012-06-26T17:25:01.490
> 
> 标签：java, spring, hibernate

我正在尝试在 JSF2-Spring-Hibernate Web 应用程序中实现 Session-Per-Conversation 模式，因此我需要 AnnotationSessionFactoryBean 来构建具有自定义 CurrentSessionContext 类的 Hibernate SessionFactory。

我一直在收到此错误日志：

```
org.springframework.dao.DataAccessResourceFailureException: Could not obtain Hibernate-managed Session for Spring-managed transaction; nested exception is org.hibernate.HibernateException: No CurrentSessionContext configured! 
```

这是我使用的整个数据上下文的 xml 配置。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:util="http://www.springframework.org/schema/util"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${datasource.driverClassName}" />
        <property name="url" value="${datasource.url}" />
        <property name="username" value="${datasource.username}" />
        <property name="password" value="${datasource.password}" />
        <property name="initialSize" value="${datasource.poolInitialSize}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="configLocation" value="classpath:hibernate.cfg.xml" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${org.hibernate.dialect.dialectmysqlInno}</prop>
                <prop key="hibernate.hbm2ddl.auto">${org.hibernate.ddl.mode}</prop>
                <prop key="hibernate.search.default.directory_provider">${org.hibernate.search.directoryprovidr}</prop>
                <prop key="hibernate.current_session_context_class">
                    mx.gob.jgtjo.apps.schedule.web.conversation.ConversationalCurrentSessionContext
                </prop>
            </props>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateManagedSession" value="true" />
    </bean>

    <tx:annotation-driven order="0" transaction-manager="transactionManager" />

    <context:component-scan base-package="mx.gob.jgtjo.apps.schedule.dao.hibernate" />

</beans> 
```

另外，这是我的 hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory name="jgtjoSessionFactory">
        <!--Entity -->
        <mapping class="mx.gob.jgtjo.apps.schedule.model.AudienciaOral" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.CausaPenal" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.DefensorPenal" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Delito" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.EventoAudiencia" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Juez" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.MinisterioPublico" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.ParteMaterial" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Sala" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.TipoAudiencia" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.User" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.Rol" />
        <mapping class="mx.gob.jgtjo.apps.schedule.model.DelitoConfigurado" />
    </session-factory>
</hibernate-configuration> 
```

如您所见，hibernate xml 没有什么棘手的。

为什么我不断收到此异常？

```
java.lang.NoSuchMethodException: mx.gob.jgtjo.apps.schedule.web.conversation.ConversationalCurrentSessionContext.<init>(org.hibernate.engine.SessionFactoryImplementor) 
```

似乎休眠在我的类中寻找一个以 SessionFactory 作为参数的构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:05:45.723

这是来自 Hibernate 的代码，它尝试使用您使用该`hibernate.current_session_context_class`属性传入的任何值来构建当前会话上下文：

```
private CurrentSessionContext buildCurrentSessionContext() {
        String impl = properties.getProperty( Environment.CURRENT_SESSION_CONTEXT_CLASS );
        // for backward-compatability
        if ( impl == null && transactionManager != null ) {
            impl = "jta";
        }

        if ( impl == null ) {
            return null;
        }
        else if ( "jta".equals( impl ) ) {
            if ( settings.getTransactionFactory().areCallbacksLocalToHibernateTransactions() ) {
                log.warn( "JTASessionContext being used with JDBCTransactionFactory; auto-flush will not operate correctly with getCurrentSession()" );
            }
            return new JTASessionContext( this );
        }
        else if ( "thread".equals( impl ) ) {
            return new ThreadLocalSessionContext( this );
        }
        else if ( "managed".equals( impl ) ) {
            return new ManagedSessionContext( this );
        }
        else {
            try {
                Class implClass = ReflectHelper.classForName( impl );
                return ( CurrentSessionContext ) implClass
                        .getConstructor( new Class[] { SessionFactoryImplementor.class } )
                        .newInstance( new Object[] { this } );
            }
            catch( Throwable t ) {
                log.error( "Unable to construct current session context [" + impl + "]", t );
                return null;
            }
        }
    } 
```

如您所见，可接受的值为`jta`, `thread`, `managed`。

由于您使用的是 Spring 的事务管理功能，因此根本不应该设置此属性。Spring 会为你解决这个问题。

您只需要注释您的事务方法，`@Transactional`会话就会为您打开并绑定到当前线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T01:52:16.037

好的，因为上面的答案向我展示了我在问题编辑中显示的代码和日志记录，CurrentSessionContext 接口的实现必须有一个以 sessionFactory 作为参数的公共构造函数。

Hibernate 文档从不这样说。

这是我的课：

```
 package mx.gob.jgtjo.apps.schedule.web.conversation;

import javax.servlet.http.HttpServletRequest;

import mx.gob.jgtjo.apps.schedule.web.utils.JsfUtils;

import org.hibernate.HibernateException;
import org.hibernate.classic.Session;
import org.hibernate.context.CurrentSessionContext;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class ConversationalCurrentSessionContext implements CurrentSessionContext {

    private static final long serialVersionUID = 803157986557235023L;

    protected static final Logger log = LoggerFactory
            .getLogger(ConversationalCurrentSessionContext.class);

    public ConversationalCurrentSessionContext() {

    }

    @Override
    public Session currentSession() throws HibernateException {

        HttpServletRequest request = null;

        try {
            request = JsfUtils.getCurrentHttpRequest();
        } catch (Exception e) {
            log.debug("No current http request in faces context, returning default conversation.");
        }

        if (request == null) {
            return (Session) ConversationManager.getDefaultConversationSession();
        } else {
            return (Session) ConversationManager.getSessionForRequest(request);
        }
    }
} 
```

如您所见，我缺少该构造函数。

# c# - 使用 WPF 将 WriteableBitmap 保存到文件

> ID：11212771
> 
> 赞同：14
> 
> 时间：2012-06-26T17:25:15.373
> 
> 标签：c#, wpf, writeablebitmap

我有：

```
WriteableBitmap bmp; 
```

我基本上想将它保存到磁盘上的文件中，如下所示：

```
C:\bmp.png 
```

我阅读了一些论坛，其中提到要阅读：

```
bmp.Pixels 
```

并将这些像素保存到`Bitmap`then use`Bitmap.SaveImage()`函数中。但是，我无法访问任何`Pixels`. 显然 my`WriteableBitmap`没有任何名为`Pixels`.

我使用 .NET Framework 4.0。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-26T17:33:31.193

使用您的 WriteableBitmap 的克隆并使用以下功能：

```
CreateThumbnail(filename, _frontBitmap.Clone()); 
```

...

```
void CreateThumbnail(string filename, BitmapSource image5)
{
    if (filename != string.Empty)
    {
         using (FileStream stream5 = new FileStream(filename, FileMode.Create))
         {
             PngBitmapEncoder encoder5 = new PngBitmapEncoder();
             encoder5.Frames.Add(BitmapFrame.Create(image5));
             encoder5.Save(stream5);
         }
    }
 } 
```

# objective-c - Objective c - Xcode long int 显示格式

> ID：11212777
> 
> 赞同：0
> 
> 时间：2012-06-26T17:25:38.063
> 
> 标签：objective-c, xcode, long-integer, nsnumberformatter

当数字很大时，我遇到了这个问题。例如，如果数字是 3670000000，我希望标签是 3,670,000,000。当数字很大时，它给我的值为 2,147,483,657。我确定这一定是一个可变长度问题。我尝试对 numC 使用 long long int。任何建议将不胜感激。谢谢。

```
int numC;
NSNumberFormatter *formatter = [NSNumberFormatter new];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSString *valuestring= [NSString stringWithFormat:@"%@", [[values objectAtIndex:indexA] objectForKey:@"hits"]];
numC=[valuestring intValue];

NSString *results = [formatter stringFromNumber:[NSNumber numberWithInteger:numC]];    
label1.text =results; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:32:12.543

该`int`类型不能包含大于 2,147,483,657 的值。您可以使用无符号整数，最大值为 4,294,967,295。[在这里](http://www.techotopia.com/index.php/Objective-C_2.0_Data_Types#int_Data_Type)查看更多信息。您也可以尝试这样做来扩展数据类型的范围：

```
long long int numC;

//Number formatter and string operations

numC = [valuestring longLongValue];

NSString *results = [formatter stringFromNumber:[NSNumber numberWithLongLong: numC]];    
label1.text = results; 
```

此外，如果您检索的值都不包含负值，则可以将其设为`unsigned long long int`. 在这种情况下，使您的代码如下：

```
unsigned long long int numC;

//Number formatter and string operations

numC = [valuestring longLongValue];

NSString *results = [formatter stringFromNumber:[NSNumber numberWithUnsignedLongLong: numC]];    
label1.text = results; 
```

还要确保在这一行...

```
 NSString *valuestring= [NSString stringWithFormat:@"%@", [[values objectAtIndex:indexA] objectForKey:@"hits"]]; 
```

...您正在检索的值是`long long int`.

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:37:38.853

`bigInteger`如果您确实需要对大于允许的数字进行操作，还有 C++ 类`int`。如果不需要做很多操作，将数字存储为 NSString。然后使用它只需将字符串的结尾，将其转换为`int`，进行操作，然后将数字放回字符串中。

# appcelerator - 如何在 Appcelerator 中获取 Android Styleguide 开关？

> ID：11212778
> 
> 赞同：0
> 
> 时间：2012-06-26T17:25:38.630
> 
> 标签：appcelerator, android-styles

[http://developer.android.com/design/building-blocks/switches.html#switches](http://developer.android.com/design/building-blocks/switches.html#switches)上显示的开/关开关很棒。我不知道如何在 Appcelerator 中获取它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:38:56.513

这不是钛的东西，它是机器人。如果要支持 2.x，就不能有 4.x 的样子。您必须更改清单以更改 SDK 级别支持。这是一篇对我有帮助的好文章。[http://developer.appcelerator.com/doc/mobile/android-custom-androidmanifest](http://developer.appcelerator.com/doc/mobile/android-custom-androidmanifest)

# php - 带有嵌套 $in 和 $or 的 MongoDB

> ID：11212780
> 
> 赞同：0
> 
> 时间：2012-06-26T17:25:44.157
> 
> 标签：php, mongodb

我正在使用 MongoDB PHP 库并具有以下查询数组

```
Array
(
  [$and] => Array
    (
      [0] => Array
        (
          [$or] => Array
            (
              [0] => Array
                (
                  [role.name] => Array
                    (
                      [$in] => Array
                        (
                          [0] => 'User'
                          [1] => 'VIP User'
                        )
                    )
                )
              [1] => Array
                (
                  [role._id] => Array
                    (
                      [$in] => Array
                        (
                          [0] => 'User'
                          [1] => 'VIP User'
                        )
                    )
                )
            )
        )
    )
) 
```

哪个不起作用。但是，这样做：

```
Array
(
  [$and] => Array
    (
      [0] => Array
        (
          [role.name] => Array
            (
              [$in] => Array
                (
                  [0] => 'User'
                  [1] => 'VIP User'
                )
            )
        )
    )
) 
```

知道问题是什么吗？（这是一个抽象的例子）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T20:16:41.593

除了冗余`$and`运算符之外，我认为您的查询没有问题。考虑以下 Mongo shell 示例：

```
> db.foo.drop()
true
> db.foo.insert({role:{name:"User"}});
> db.foo.insert({role:{name:"Admin"}});
> db.foo.insert({role:{name:"VIP User"}});
> db.foo.find({$or:[{"role.name":{$in:["User", "VIP User"]}}, {"role._id":{$in:["User", "VIP User"]}}]});
{ "_id" : ObjectId("4fea16dcdb49621e28c004a2"), "role" : { "name" : "User" } }
{ "_id" : ObjectId("4fea16e8db49621e28c004a4"), "role" : { "name" : "VIP User" } }
> db.foo.find({$and:[{$or:[{"role.name":{$in:["User", "VIP User"]}}, {"role._id":{$in:["User", "VIP User"]}}]}]});
{ "_id" : ObjectId("4fea16dcdb49621e28c004a2"), "role" : { "name" : "User" } }
{ "_id" : ObjectId("4fea16e8db49621e28c004a4"), "role" : { "name" : "VIP User" } } 
```

请注意，我的数据中没有`role._id`字段，因此它被简单地忽略了。

如果您在使用 JavaScript shell 时遇到问题，查看[$or 和 $and](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)文档中的示例可能会有所帮助。两个运算符都期望一个数组作为它们的值，而数组又可以包含任意数量的有效条件对象。

的主要好处`$and`是当您需要满足同一字段的多个标准时。如果字段名称不同，则相当于简单地使用条件对象（其中键是隐式和-ed）。

# javascript - CanJS 模型 findAll 返回重复项的列表

> ID：11212784
> 
> 赞同：4
> 
> 时间：2012-06-26T17:26:07.497
> 
> 标签：javascript, canjs, canjs-model

我`can.Model`用来通过以下方式检索数据`id`：

```
Invoice = can.Model({
    findAll: 'GET /invoices',
    create  : "POST /invoices",
    update  : "PUT /invoices/{id}",
    destroy : "DELETE /invoices/{id}"
},{}); 
```

导航到`/invoices`时，结果与预期一致，例如：

```
[
    0: {
         "ID": "1",
         "Client": "Client1",
    },
    1: {
         "ID": "2",
         "Client": "Client2"
    }
] 
```

但是，使用控制台检索`Invoice.findAll`并记录到控制台的数据看起来像这样，列表中的每个元素都重复了相同的数据项：

```
[
    0: {
         "ID": "1",
         "Client": "Client1"
    },
    1: {
         "ID": "1",
         "Client": "Client1"
    }
] 
```

服务器的响应是正确的，那么为什么它被解释为相同项目的列表呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:09:51.753

当数据的 id 字段不同于 时`id`，应使用该`id`字段指定。例如，正如[文档`can.Model`](http://canjs.com/docs/can.Model.id.html)中提到的那样`.NET`，通常使用`Id`. 在这种情况下，id 字段必须定义为`ID`：

```
Invoice = can.Model({
    id: 'ID',
    findAll: 'GET /invoices',
    create  : "POST /invoices",
    update  : "PUT /invoices/{id}",
    destroy : "DELETE /invoices/{id}"
},{}); 
```

# visual-studio-2010 - Visual Studio 解决方案资源管理器扩展来重命名文件而不是扩展名？

> ID：11212785
> 
> 赞同：2
> 
> 时间：2012-06-26T17:26:08.793
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-extensions, solution-explorer

Windows 资源管理器有一个 Visual Studio 没有的小（但很棒！）功能：

当您在 Windows 7 上的 Windows 资源管理器中重命名文件时（当然，我认为是 Vista 及更高版本），它只选择文件名的主要部分，而不选择文件扩展名。它假设 90% 的时间，您不想更改文件扩展名，这样您就不必选择使用鼠标选择要重命名的相关部分（错误）或必须重新输入文件扩展名（也坏的）。

当然，这只是当您在 Windows 资源管理器中显示文件扩展名时，但如果您正在浏览 Stack Overflow，我会做出有根据的猜测，您是在“显示扩展名”阵营中。

是否有提供相同功能的 Visual Studio 扩展？扩展似乎越来越长。今天我们有`.cshtml`7 个字符，谁知道我们将来会有什么。

在撰写本文时，我正在讨论 Visual Studio 2010 的扩展。我还没有开始使用 Visual Studio 2012 候选发布版，所以如果这个功能在那里被烘焙，我会接受保证，我会在什么时候得到它我也升级为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-03T19:42:26.660

这是 Visual Studio 的当前行为，并且已经有一段时间了，因此当您在解决方案资源管理器中按 F2 重命名文件时，它将突出显示不带扩展名的名称。

但是，今天我注意到它开始选择带有扩展名的整个文件，就像@DLeh 在评论中提到的那样。原来它与特定项目有关，所以对我来说，解决方案是删除`.vs`文件夹，如[本答案](https://stackoverflow.com/questions/32001305/file-rename-in-solution-explorer-vs-2015#38604289)中所述。

# php - symfony2 编辑表格和教义问题

> ID：11212786
> 
> 赞同：1
> 
> 时间：2012-06-26T17:26:17.533
> 
> 标签：php, forms, symfony

我是一个 Symfony2 新手，遇到了编辑表单和教义的问题。

我似乎以某种方式从我的数据库中获取了一个损坏的对象。

此代码工作正常...

```
$FormDebug = new Link();
$FormDebug->setUrl('http://www.mysite.com');

$editForm = $this->createFormBuilder($FormDebug)
  ->add('url','url')
  ->add('description','text')
  ->getForm(); 
```

虽然这不...

```
$repository = $this->getDoctrine()->getRepository('HemekonomiLinksBundle:Link');
$user = $this->container->get('security.context')->getToken()->getUser();       

$userLink = $repository->findBy(
    array('id' => $id, 'user' => $user->getId())
);

$editForm = $this->createFormBuilder($userLink)
  ->add('url','url')
  ->add('description','text')
  ->getForm(); 
```

所以我想我得到了一个表单生成器不同意的对象..？没有错误消息，只是我没有得到一个填写了所获取对象的实际值的表单，而是一个空表单。

当我 var_dump() 从数据库返回的对象时，我可以看到存在正确的值（以及用户对象的所有属性 - 这是导致我的问题的原因吗？对象包含的变量比表单多？）。用户在那里的原因当然是只从属于该特定用户的数据库中整理出那些链接行。

更新：我在这里添加了两个 var_dump()，首先是我希望从数据库中检索的对象类型（只是描述对象的示例），其次是实际检索到的对象，我可以看到存储库查找操作返回一个数组而不是一个对象，但我的对象似乎被包括在内......为什么我不知道......

我所期望的

```
object(Company\LinksBundle\Entity\Link)#556 (4) { ["id":protected]=> NULL ["user":protected]=> NULL ["description":protected]=> NULL ["url":protected]=> string(25) "http://www.mysite.com" } 
```

DB返回什么

```
array(1) { [0]=> object(Company\LinksBundle\Entity\Link)#553 (4) { ["id":protected]=> int(9) ["user":protected]=> object(Company\UserBundle\Entity\User)#145 (19) { ["id":protected]=> int(3) ["username":protected]=> string(5) "user1" ["usernameCanonical":protected]=> string(5) "user1" ["email":protected]=> string(6) "1@1.se" ["emailCanonical":protected]=> string(6) "1@1.se" ["enabled":protected]=> bool(true) ["salt":protected]=> string(31) "oltkauxmgw000w8wgw84ckggg8sw880" ["password":protected]=> string(88) "AFKlCO774d/4D8DHD3P/sXYYApS32jzdLm5GlZEICnOq8xyKT/xVjbnAziMUadecN0yBlxiH5QZK09s5KJxbsA==" ["plainPassword":protected]=> NULL ["lastLogin":protected]=> object(DateTime)#149 (3) { ["date"]=> string(19) "2012-06-27 07:04:24" ["timezone_type"]=> int(3) ["timezone"]=> string(16) "Europe/Stockholm" } ["confirmationToken":protected]=> NULL ["passwordRequestedAt":protected]=> NULL ["groups":protected]=> NULL ["locked":protected]=> bool(false) ["expired":protected]=> bool(false) ["expiresAt":protected]=> NULL ["roles":protected]=> array(0) { } ["credentialsExpired":protected]=> bool(false) ["credentialsExpireAt":protected]=> NULL } ["description":protected]=> string(22) "Beskrivning av lÃ¤nken" ["url":protected]=> string(16) "http://testlink.se" } } 
```

数据库返回实际的链接对象和连接到它的用户对象会在这里发生什么，我的工作就是清除我想要的两个对象之一？

如果是这样，有没有办法，已经在存储库中 - >找到指定虽然我在我的 find 语句中的用户字段上，但我对选择用户对象不感兴趣，我只想要链接表中的内容？（我猜是 symfony2 术语中的链接对象......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:16:14.523

1.  每次都使用表单构建器而不是创建表单类是不好的做法（可以说）。
2.  尝试运行`php app/console generate:doctrine:form MyApp:Myentity`并使用表单类（在设置 data_class 选项之后——请参阅“设置 data_class”下[的手册](http://symfony.com/doc/current/book/forms.html)
3.  var_dump 每个对象（调试链接和从数据库中提取的链接）并发布它们，如果可以的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T05:44:06.863

好的，

所以经过一些反复试验后，我发现我的查找方法导致了问题。显然，findBy(array) 也返回一个数组，为了获得单个对象进行编辑，我必须做 find($id)，只有当用户试图编辑他的“自己的”时，我才会失去 SELECTing 的功能“ 关联...

无论如何，我发现我这样做的方式（通过比较用户名而不是 ID）可能不是最好的方式......

如果有人对此有意见，请随时为我指明正确的方向，否则如果我无法解决，我将进行一些试验和错误并发布一个新线程。

# objective-c - 沙盒、登录项和启动应用程序

> ID：11212796
> 
> 赞同：6
> 
> 时间：2012-06-26T17:26:41.760
> 
> 标签：objective-c, cocoa, sandbox

试图让我的应用程序与沙盒一起工作我陷入了这个问题：

我需要将我的应用程序添加到登录项，因此我已按照以下步骤操作：

*   在 open exec 中创建一个**HelperApp.app** (with `is agent = YES`) 执行此代码：

    ```
    NSString *appPath = @"/Applications/MyNewApp.app";
    [[NSWorkspace sharedWorkspace] launchApplication:appPath];
    [NSApp terminate:nil]; 
    ```

    这个应用程序是沙盒的。

*   我在 MyNewApp.app 包中添加了一个复制构建阶段，其中包含子路径`Contents/Library/LoginItems`和目标`wrapper`

    显然**MyNewApp.app**也是沙盒的

*   在**MyNewApp.app 中**，我使用**HelperApp.app**`SMLoginItemSetEnabled`的捆绑 ID注册

 **现在一切正常，但是......当**MyNewApp.app**尝试启动**MyNewApp.app**时，我收到一个错误：

```
LSOpenFromURLSpec() returned -10827 for application /Applications/MyNewApp.app path (null). 
```

但是，如果我尝试使用 HelperApp.app 来启动一个非沙盒（即 Steam.app）应用程序，它就像一个魅力！

还有其他方法可以启动应用程序吗？NSWorkSpace 可能适用于沙盒上下文中不允许的功能。你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T21:41:50.677

您可能想看看我的教程，[了解如何在登录时启动在沙箱中工作](http://blog.timschroeder.net/2012/07/03/the-launch-at-login-sandbox-project/)。**

# ios - Xcode - UITextField 获得空值

> ID：11212798
> 
> 赞同：0
> 
> 时间：2012-06-26T17:26:43.947
> 
> 标签：ios, nsstring, null, uitextfield

我有一个导航控制器。在我的第二个视图中，我想要一个按钮，当被点击时，转到第一个 viewController 并在那里设置一个文本。

所以，在我的按钮（secondView）中，我有：

```
SearchViewController *svc=[[SearchViewController alloc]init];
[svc setValueMethod:@"randomString"];
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

在我的 fitView 中：

```
-(void)setValueMethod:(NSString *)myPassedString
{
    _searchField.text = myPassedString;
} 
```

但是 _searchField 现在为空。但是当你第一次进入应用程序时，它可以正常工作，你可以让 _searchField.text = @"aString"; 那项工作。但在从 secondView 弹出后，它为空！

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:46:55.070

原因是您通过以下行创建了一个名为 svc 的 SearchViewController 新实例：SearchViewController *svc=[[SearchViewController alloc]init];。但是这个 svc 实例和 SearchViewController 的原始实例（你进入应用程序时首先看到的那个）并不相同。

您需要使用委托协议。它用于这种类型的场景。这个[SO](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)有一个代码示例。

# ruby-on-rails - Rails 3：默认值和关联模型中的 validates_presence_of 验证错误

> ID：11212807
> 
> 赞同：4
> 
> 时间：2012-06-26T17:27:33.067
> 
> 标签：ruby-on-rails, ruby, model-associations

我有一个带有模型的基本发票设置：发票、项目、行项目。

```
# invoice.rb
class Invoice < ActiveRecord::Base
  has_many :line_items, :dependent => :destroy
  validates_presence_of :status

  before_save :default_values

  def default_values
    self.status = 'sent' unless self.status
  end
end

# item.rb
class Item < ActiveRecord::Base
  has_many :line_items
  validates_presence_of :name, :price
end

# line_item.rb
class LineItem < ActiveRecord::Base
  belongs_to :item
  belongs_to :invoice 
  before_save :default_values

  validates_presence_of :invoice_id
  validates :item_id, :presence => true
end 
```

模型中还有更多内容，但为了简单起见，我只介绍了上述内容。

我收到以下错误：

```
2 errors prohibited this invoice from being saved:
  Line items invoice can't be blank
  Status can't be blank 
```

所以有两个问题：

1.  如果我删除`validates :invoice_id, :presence => true`，我不会再收到`Line items invoice can't be blank`错误消息，但为什么呢？我确实想验证 line_items 上的 invoice_id，所有 line_items 都应该有一个 invoice_id。如何验证 line_items 上的 invoice_id 而不会出错？

2.  `Status can't be blank`如果我将其设置为默认值，为什么会出现错误？我可能可以在 invoices_controller 上设置它，但我认为应该在模型中设置默认值，对吧？如何验证状态的存在并在模型中仍有默认值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T17:44:25.730

这两个验证错误都发生了，因为在保存之前（和回调之前）调用*了*验证`before_save`。

我假设您同时使用nested_form 创建发票和行项目。如果是这种情况，您不想`validates :invoice_id, :presence => true`在行项目上 - 发票和行项目同时进入，并且尚未保存发票，因此它没有 ID。如果您保留验证，则需要先创建并保存一个空发票，然后再创建行项目，以便 invoice_id 可用。如果您只想确保在任何编辑后仍设置 invoice_id，您可以强制执行此操作，`validates :invoice_id, :presence => true, :on => :update`这将在创建行项目时跳过验证（并且 invoice_id 尚不可用）。

由于类似的原因，您遇到了问题`validates :status, :presence => true`- 通过请求传入的值正在被验证，并且“状态”值不存在。`before_save`回调在验证后运行。`before_validation`您可以在or回调中设置默认值，`after_initialization`并且在运行验证时这些值将存在。

查看Rails的[回调文档了解更多信息。](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:44:53.220

我将从 2 开始： before save 仅在 save 之前执行*，*这意味着，在对象通过验证并且即将被保存之后。如果验证失败 - 它不会被执行。

至于1：你能举一个例子来说明你是如何创建发票的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:30:26.760

# 问题 1

尝试[`validates_associated`](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_associated)检查关联模型是否都有效

# 问题 2

就像大多数答案一样，`before_save`在验证后会被调用。您正在寻找的魔法是在调用`after_initialize`对象的`initialize`方法后运行。

```
class Invoice < ActiveRecord::Base
  after_initialize :default_values
  validates :status, presence: true

private

  def default_values
    self.status ||= 'sent'
  end
end 
```

# php - 致命错误：调用未定义函数 openssl_random_pseudo_bytes()

> ID：11212808
> 
> 赞同：17
> 
> 时间：2012-06-26T17:27:36.623
> 
> 标签：php, openssl

尝试运行我的 PHP 单元测试时出现此异常：

> 致命错误：调用未定义函数 openssl_random_pseudo_bytes()

这是什么意思？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-09-05T14:12:56.467

我遇到过同样的问题。我通过编辑我的**php.ini**文件来解决它 - 更改`;extension=php_openssl.dll`为`extension=php_openssl.dll`.

（对于我的安装，我的**php.ini**文件位于我的`P:\Program Files\EasyPHP-12.1\conf_files\`目录中。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T17:28:37.230

您的 PHP 版本未使用该`openssl`模块编译。如果您是从源代码构建，请像这样添加模块：

```
cd /path/to/php-5.4/
./configure --with-openssl 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T17:28:32.867

这意味着您没有在 PHP 安装中启用[openssl 扩展。](http://us3.php.net/manual/en/book.openssl.php)需要启用它才能使用 openssl_* 函数。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-11-11T10:37:51.680

这意味着您可能没有启用[openssl 。](http://php.net/manual/en/book.openssl.php)

如果您在 Windows 上，则更容易加载它。从系统托盘上的 wamp 图标启用它。

![在此处输入图像描述](../Images/837a0b5a8a985fae04dd5f02f6df8c39.png)

![在此处输入图像描述](../Images/5c3e4be55fed8346ac50d1d5a6134ab1.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T06:10:59.760

您的 php 安装没有启用 openssl，或者您可能正在运行 php < 5.3 的版本。

要启用 openssl，您必须使用“–with-openssl”标志重新编译和安装 php。见[php安装文档](http://php.net/manual/en/install.php)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-21T15:40:09.487

检查您的配置**php.ini**：

```
; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
;extension_dir = "./"
; On windows:
extension_dir = "ext"
extension=php_openssl.dll 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-08T17:23:23.630

对我来说，发生此错误是因为我没有为我的 PHP 正确配置 openssl。这是我纠正此错误所遵循的确切步骤。 [https://stackoverflow.com/a/36070260/1221096](https://stackoverflow.com/a/36070260/1221096)

# javascript - 动态加载 jQuery

> ID：11212809
> 
> 赞同：9
> 
> 时间：2012-06-26T17:27:37.103
> 
> 标签：javascript, jquery

我在使用 Javascript 加载 jQuery 时遇到问题。我需要用 Javascript 加载它，因为有些条件我只能在客户端知道。注释掉的代码应该初始化脚本，但我对它们没有运气。

```
var script_tag = document.createElement('script');
script_tag.setAttribute("type","text/javascript");
script_tag.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js")
//script_tag.onload = main; // Run main() once jQuery has loaded
//script_tag.onreadystatechange = function () { // Same thing but for IE
    //if (this.readyState == 'complete' || this.readyState == 'loaded') main();
//}
document.getElementsByTagName("head")[0].appendChild(script_tag); 
```

[http://mybsabusiness.com/samplesites/silver/sbsa01/](http://mybsabusiness.com/samplesites/silver/sbsa01/)

这是问题所在的网站。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-26T17:34:50.737

从[jQuerify bookmarlet](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet/)：

```
function getScript(url, success) {
    var script = document.createElement('script');
    script.src = url;
    var head = document.getElementsByTagName('head')[0],
        done = false;
    // Attach handlers for all browsers
    script.onload = script.onreadystatechange = function() {
      if (!done && (!this.readyState
           || this.readyState == 'loaded'
           || this.readyState == 'complete')) {
        done = true;
        success();
        script.onload = script.onreadystatechange = null;
        head.removeChild(script);
      }
    };
    head.appendChild(script);
}
getScript('http://code.jquery.com/jquery-latest.min.js',function() {
    // Yay jQuery is ready \o/
});​ 
```

# sql-server - Where 子句中的 CAST 错误

> ID：11212826
> 
> 赞同：1
> 
> 时间：2012-06-26T17:29:02.757
> 
> 标签：sql-server, sql-server-2008, tsql, reporting-services, ssrs-2008

在下面的查询中，我不断收到此错误：

```
Cannot read the next data row for the dataset DataSetProject. (rsErrorReadingNextDataRow) 
```

它似乎是 where 子句，如果我把它拿出来它似乎工作。所以我在 where 子句中添加了一个演员，但没有运气。在 where 子句中我需要做一些特别的事情来让它工作吗？仅供参考，这是在从 url 中提取 id 的报告中。

```
SELECT new_projects.new_projectsId AS ProjectId
     , new_projects.new_name AS ProjectName
     , new_projects.new_Description AS ProjectDescription

FROM
    new_projects
    LEFT OUTER JOIN new_projectsteps
        ON new_projects.new_projectsId = new_projectsteps.new_ProjectSteps2Id
    LEFT OUTER JOIN Task
        ON new_projectsteps.new_projectstepsId = Task.RegardingObjectId
WHERE
(new_projects.new_projectsId = cast(@id AS UNIQUEIDENTIFIER)) 
```

谢谢！

编辑：

SQL 中的 id 是唯一标识符，@id 的值是从查询字符串（url）中提取的。所以它看起来像：`&id='BC02ABC0-A6A9-E111-BCAD-32B731EEDD84'`

很抱歉缺少信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:40:31.660

我怀疑单引号正在通过。因此，要么在传递给您的参数之前将它们剥离，要么使用：

```
WHERE new_projects.new_projectsId = CONVERT(UNIQUEIDENTIFIER, REPLACE(@id, '''', '')); 
```

如果您在 GUID 包含其他字符时尝试直接比较，您应该得到：

> 消息 8169，级别 16，状态 2，第 1 行
> 从字符串转换为唯一标识符时转换失败。

如果这不是正在发生的事情，那么不要说“SQL 中的 id 是唯一标识符” - 显示所有代码，以便我们可以尝试重现问题。

# php - 没有数据库连接但没有错误

> ID：11212828
> 
> 赞同：1
> 
> 时间：2012-06-26T17:29:15.977
> 
> 标签：php

这是我的数据库连接代码和查询代码：

```
// Connecting, selecting database
$link = mysql_connect('MySQLA22.webcontrolcenter.com', 'shudson', '*******')
   or die('Could not connect: ' . mysql_error());

mysql_select_db('henrybuilt') or die('Could not select database');

$sql = "SELECT ID, vcImageName FROM corp_images WHERE idPage = 6";
$query = mysql_query($sql) or die ("Error"); 
```

*   连接、选择或查询时没有“或死”错误
*   没有error_log文件
*   如果我在我的 sql 浏览器中运行 sql 查询，它就会执行

到底是怎么回事？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:40:10.420

```
$sql = "SELECT ID, vcImageName FROM corp_images WHERE idPage = 6" 
```

它不见了；

```
$sql = "SELECT ID, vcImageName FROM corp_images WHERE idPage = 6"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:38:46.513

*看起来*是正确的...尝试[从手册](http://php.net/manual/en/function.mysql-query.php)中添加此改编代码以进一步调试并查看您学到了什么：

```
// This shows the actual query sent to MySQL, and the error. Useful for debugging.
if (!$query) {
    $message  = 'Invalid query: ' . mysql_error() . "\n";
    $message .= 'Whole query: ' . $sql;
   die($message);
}

// Use result
// Attempting to print $result won't allow access to information in the resource
// One of the mysql result functions must be used
// See also mysql_result(), mysql_fetch_array(), mysql_fetch_row(), etc.
while ($row = mysql_fetch_assoc($query)) {
    echo $row['ID'];
    echo $row['vcImageName'];
} 
```

# multithreading - 如何在分布式环境中使 servlet 线程安全？

> ID：11212829
> 
> 赞同：1
> 
> 时间：2012-06-26T17:29:17.587
> 
> 标签：multithreading, servlets

我知道如何在非分布式环境中使线程安全，但我想知道如何在分布式环境中使 Servlet 线程安全？因为 Servlet 容器将为每个 JVM 创建一个 Servlet 实例，如何使它们成为线程安全的？

提前致谢

拉杰什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:38:36.280

运行在不同 JVM 实例上的 Servlet 不必担心线程安全，因为它们不共享任何资源。

使任何代码线程安全的常规做法适用于同一 JVM 中的 servlet。例如，不要在不同步的情况下修改共享资源，使用 java.util.concurrent 类，使用线程本地存储等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:44:10.357

当这段代码由不同的线程执行时，任何代码`Not Thread Safe`都会出现并发问题。

在分布式环境中，来自不同 JVM 的两个线程无法访问 servlet 实例。

# jquery - Jquery增长/缩小Div onclick

> ID：11212831
> 
> 赞同：0
> 
> 时间：2012-06-26T17:29:28.233
> 
> 标签：jquery, hide, show

我想知道如何 在厨房部分（左下角）发生的事情中实现以下效果： [http ://thekitchencommunity.com/。](http://thekitchencommunity.com/)有人可以提出类似的逻辑吗？

我必须说这很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:34:44.487

[http://jsfiddle.net/CUJSM/3/](http://jsfiddle.net/CUJSM/3/)

这是那里正在发生的事情的一个确切例子……它的风格并不那么美妙，所以请发挥你的想象力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:34:01.430

看到这个 JSFiddle：http: [//jsfiddle.net/uP8Tj/](http://jsfiddle.net/uP8Tj/)

使用 jQuery 中的 slideUp 和 slideDown 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:35:29.630

他们正在将 div 偏移量移动到相对于屏幕底部的负值。如果您尝试在它向上滚动之前滚动它，您会注意到您可以将它向下拖动。

我之前这样做的方式是使用 jQuery[动画](http://api.jquery.com/animate/)效果。尝试在移动时更改不透明度也很有趣！

但无论如何，在单击时换出箭头的图像并将包含的 div 从相对于底部的负值设置为动画。

# javascript - Array 中的 HTML5 DOM 上的 Javascript 渲染动画。第一次运行慢！第二次运行平稳。怎么来的？

> ID：11212832
> 
> 赞同：2
> 
> 时间：2012-06-26T17:29:29.070
> 
> 标签：javascript, html, dom, animation, canvas

我有一个关于使用 DOM 在 HTML 中通过 javascript 动画的问题。在这种情况下，我使用绝对位置和 css + jQuery 并为 div 设置动画。

因此，当我遍历我的大量位置 x,y 时，动画运行速度非常慢。我以 100 毫秒（80 毫秒）的间隔运行，但渲染速度似乎不够快，我的动画需要超过 10 秒...

重新运行动画时，似乎指令已被某种方式缓存（渲染）并且我的动画运行得非常完美。

然后，如果我再等 5 分钟，它会再次变慢。（好像是低级机器码内存已经被删除了，因为没有再用了？）

我只是不知道如何让我的动画顺利运行，如果它是第一次执行的话。我尝试使用 fabric.js 来渲染动画......同样的问题。在第一次运行它很慢。第二轮和后续都很顺利。

```
function render_mouse()
 {
     if(play_pos < mousefile_length)
         {
            $('.mouse').remove();
            $("body").append(
            $('<div id="mouse" class="mouse"></div>')
            .css('position', 'absolute')
            .css('top', play_mousefile[play_pos+1] + 'px')
            .css('left', play_mousefile[play_pos] + 'px')
            .css('width', mousesize)
            .css('height', mousesize)
            .css('background-image', 'url(images/cursor.png')
                    );
            play_pos = play_pos +2;
            }
    else {
        clearInterval(play_mousetimer);
         }
   }

UPDATED:
 $('#mouse').animate({
                 left: rec_mousefile[play_pos]+"px",
                 top : rec_mousefile[play_pos+1]+"px"
                 },80); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:59:07.640

如果你没有每次都对鼠标 div 做这么多的操作，动画会更快。

基本上，将鼠标附加到 dom 一次，使用初始渲染所需的所有 CSS，缓存对附加元素的引用，然后仅操作动画所需的 css 属性。

通过将元素保留在 dom 中，而不是每次都删除并重新添加，您应该会看到一些性能提升。此外，保存对附加元素的引用将防止您在进行另一个更新之前必须重新查询 dom。

由于缓存，动画在第二次运行时应该总是快一点，但这些优化应该至少有助于初始运行。

**根据评论进行编辑**

您可以在函数外部缓存对鼠标 div 的引用，或者将其挂在渲染函数本身之外，例如：

var mouseDiv = $('#mouse');

```
function render_mouse()
{
    if(mousefile_length > play_pos)
                {
                 mouseDiv.animate({
                 left: rec_mousefile[play_pos]+"px",
                 top : rec_mousefile[play_pos+1]+"px"
                 },80);

                 play_pos=play_pos+2;
        }
   else {playtimer.stop();}
} 
```

或者

```
function render_mouse()
{
    // query the first time, and then use the cached version thereafter
    render_mouse.mouse = render_mouse.mouse || $('#mouse');
    if(mousefile_length > play_pos)
                {
                 render_mouse.mouse.animate({
                 left: rec_mousefile[play_pos]+"px",
                 top : rec_mousefile[play_pos+1]+"px"
                 },80);

                 play_pos=play_pos+2;
        }
   else {playtimer.stop();}
} 
```

# c# - 在没有 HBM 文件的情况下设置 NHibernate/LINQ 的最快和最简单的方法

> ID：11212836
> 
> 赞同：4
> 
> 时间：2012-06-26T17:29:51.613
> 
> 标签：c#, nhibernate

我想建立一个非常简单的演示应用程序，其中包括 NHibernate 上的 LINQ。当我等待答案时，我正在做其他任务:)

*   **我根本**不喜欢 HBM 文件
***   我需要设置一个非常简单的数据库模式（3 个表）*   我不完全喜欢从数据库开始。也许类模型可能是一个更好的开始*   我没有选择目标数据库：可能是 MySQL**

 **我知道如何从 HBM 文件创建数据模型。我知道如何将数据模型从 DB 提取到 .NET 的 Entity Framework，但我相信我的演示可以用 NHibernate 更好地完成。

你能给我推荐一个快速入门教程吗？我知道有一个基于注释的旧 NH 插件：这可能是一个合适的起点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:43:31.017

就像亚当建议的那样，您的一个选择是使用[FluentNHibernate](http://jason-mitchell.com/asp-net-programming/getting-started-with-fluent-nhibernate-and-auto-mapping-in-c/)，它是[Auto mapping](http://dotnetslackers.com/articles/ado_net/Your-very-first-NHibernate-application-Part-3.aspx)。虽然，由于您的设置非常小，您也可以使用[Fluent 映射](http://jason-mitchell.com/asp-net-programming/getting-started-with-fluent-nhibernate-and-auto-mapping-in-c/)。

除了 FluentNHibernate [wiki](https://github.com/jagregory/fluent-nhibernate/wiki/)之外，这里还有一些资源：
[Gabriel Scheker 的第一个 NHibernate 应用程序](http://dotnetslackers.com/articles/ado_net/Your-very-first-NHibernate-application-Part-3.aspx)
[Jason Mitchell 的 Fluent NHibernate 和 C# 中的自动映射入门](http://jason-mitchell.com/asp-net-programming/getting-started-with-fluent-nhibernate-and-auto-mapping-in-c/)

NHibernate 较新版本的另一种选择是[通过代码映射](http://fabiomaulo.blogspot.com/2011/04/nhibernate-32-mapping-by-code.html)。[这个 SO question](https://stackoverflow.com/questions/5777898/docs-examples-for-nhibernate-3-2-mapping-by-code)有足够多的链接，所以我不会在这里重复它们。

至于属性映射，我建议你[避免它](https://stackoverflow.com/questions/2769713/nhibernate-mapping-attributes-vs-fluent-nhibernate)。它们的使用并不多，而且您会因数据访问问题而*毒害*您的域/ POCO 类。**

# java - 数组中的手动倒序（Java）

> ID：11212837
> 
> 赞同：0
> 
> 时间：2012-06-26T17:29:59.217
> 
> 标签：java, arrays, sorting, reverse

你好 StackOverflow 的人们！我使用了 searcherch 选项，我找到了一些相关的答案，但没有一个解释为什么这种在 Java 中对数组进行反向排序的特殊方法不起作用：

```
class ReverseOrder
{
    public static void main(String[] args)
    {
        int x[] = {1,2,3,4,5};
        int y[] = x;

        int i, j;
        for(i = 0, j = x.length - 1; i < x.length; i++, j--)
        {
            y[i] = x[j];
        }

        for(int b = 0; b < x.length; b++)
        {
            System.out.println("Inverse order is: " + y[b]);
        }
    }
} 
```

为什么结果是 5,4,3,4,5 而不是 5,4,3,2,1？？？它把我逼疯了，对我来说毫无意义。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T17:31:49.020

正因为如此： int y[] = x

y 和 x 现在是对同一个数组的引用。您应该确保将 y 初始化为新数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T17:47:18.220

```
class ReverseOrder {
    public static void main(String[] args)
    {

        int x[] = {1,2,3,4,5};
        int y[] = new int[5]; // or you could use [x.length]
        int i, j;
        for(i = 0, j = x.length - 1; i < x.length; i++, j--)
        {
            y[i] = x[j];
        }

        for(int b = 0; b < x.length; b++)
        {
            System.out.println("Inverse order is: " + y[b]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:41:33.847

如果你想在原地颠倒数组元素的顺序（即`x`直接修改数组），你可以遍历数组的一半，交换元素：

```
final int last = x.length - 1;
final int n_2 = x.length / 2; // round down for odd lengths
for (int i = 0; i < n_2; ++i) {
    int tmp = x[i];
    x[i] = x[last - i];
    x[last - i] = tmp;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T17:33:18.973

```
int y[] = x; 
```

使 y 引用与 x 相同的数据。

```
y[i] = x[j]; 
```

您还在修改输入数组 x。

您希望 y 完全独立：

```
int y[] = new int[x.length]; 
```

反而。

# asp.net - 上传大型 Excel 文件并异步处理

> ID：11212839
> 
> 赞同：0
> 
> 时间：2012-06-26T17:30:19.470
> 
> 标签：asp.net, vb.net, excel, asynchronous

我想上传一个大的跟踪号文件并将它们处理到我们的订购系统中。

我以前用

```
 Server.ScriptTimeout = 3000 
```

在我们升级服务器之前它一直有效，现在它崩溃了。

我越来越

```
 This webpage is not available
 The connection to www.YourSite.com was interrupted. 
```

我可以看到 .csv 文件已上传，但许多跟踪号没有得到处理。

我正在考虑可能切换到异步更新。但我找不到任何好的来源。

如果你有什么好的想法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:34:10.477

文件有多大？？这可能是因为 machine.config 中的文件大小限制。尝试将此添加到您的 web.config

```
<location path="Upload">
    <system.web>
        <httpRuntime executionTimeout="3000" maxRequestLength="20000" />
    </system.web>
</location> 
```

另外，我不建议更改 machine.config 中的值。最好为大型上传设置一个条目，而不是为大型上传打开每个页面以帮助减少 DOS 攻击。

要异步处理文件，请查看使用 BackgroundWorker。

[http://gugiaji.wordpress.com/2012/02/29/backgroundworker-intro-part-1-work-with-progressbar/](http://gugiaji.wordpress.com/2012/02/29/backgroundworker-intro-part-1-work-with-progressbar/)

# windows-ce - 是否可以使 WinCE exe 不可分页？

> ID：11212840
> 
> 赞同：0
> 
> 时间：2012-06-26T17:30:20.130
> 
> 标签：windows-ce, paging, exe

在 WinCE 6 上，我看到过多的页面抖动，因为默认加载程序分页设置非常低。我无法在操作系统级别修复此问题，因此我必须在应用程序级别修复它。我的希望是让我的应用程序完全脱离分页业务。这可能吗？

参考这个，可能是：http: [//msdn.microsoft.com/en-us/library/ms933104.aspx](http://msdn.microsoft.com/en-us/library/ms933104.aspx)

...但这可能仅适用于 ROM 上的设备驱动程序。有没有人知道的比较清楚？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T16:42:32.173

答案是肯定的。对此有链接器设置。

# android - Android - android中tableview的自定义单元格

> ID：11212847
> 
> 赞同：3
> 
> 时间：2012-06-26T17:30:55.717
> 
> 标签：android, android-tablelayout

我想实现一个包含一列的表，或者可能是 Android 中的一个列表。我想自定义单元格。你知道一些可以帮助的教程吗？提前致谢， 卢达

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:18:04.853

这是一个很好的起点：

[http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

这是一个很棒的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-04T20:05:07.967

我知道，这是一个老问题，但是，我可以帮助任何有相同要求的人。

有一个适用于 Android 的[TableView](https://github.com/evrencoskun/TableView)库。它也是开源的，位于 github。

还有 2 个示例应用程序展示了如何在应用程序中使用 tableView。

# testing - 使用 .net Framework 3.5 进行 ReSharper 运行测试

> ID：11212848
> 
> 赞同：0
> 
> 时间：2012-06-26T17:30:58.290
> 
> 标签：testing, .net-3.5, resharper, mstest

我目前正在使用 msTest 测试共享点组件，效果很好。但是，当我使用 ReSharper 运行测试时，所有测试都失败了，因为 ReSharper (6) 正在使用 .net Framework 4 运行测试。

是否可以将 ReSharper (6) 配置为使用 .net Framework 3.5 (CLR 2) 运行所有测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T10:46:56.093

如果您使用***Visual Studio 2010***：这是 Visual Studio 中的问题，而不是 ReSharper 中的问题。
见微软的回答：

> 嗨，克里斯，
> 
> 在 VS 2010 中，测试团队做出了不支持多目标的痛苦而有意识的决定。**因此，测试项目将升级到目标 .NET 4.0**。我们已经做了一些变通方法，以允许引用被测 MVC 代码的 VB 测试项目不升级，但一般来说，所有其他项目都将被重新定位。VB 3.5 测试项目有一些限制，并且总是在 .NET 4.0 进程中运行测试。此外，您不能参加测试并在 VS 2008 测试系统上运行它们。
> 
> 感谢 Visual Studio 产品团队。

在网站[http://connect.microsoft.com/VisualStudio/feedback/details/514130/visual-studio-2010-beta-2-silently-upgrades-mstest-test-projects-to-net-4-0](http://connect.microsoft.com/VisualStudio/feedback/details/514130/visual-studio-2010-beta-2-silently-upgrades-mstest-test-projects-to-net-4-0)。

# c# - 如何设计问卷框架/对象模型？

> ID：11212853
> 
> 赞同：2
> 
> 时间：2012-06-26T17:31:43.890
> 
> 标签：c#, oop, design-patterns

我正在为问卷创建一个框架。

问卷有几个问题。我的情况是寻找一个名为 的类`Question`，它支持您想要的任何答案。

我的意思是，有些问题只需要一个答案，另一些问题需要两个答案，其他问题需要字符串、整数、双精度或开发人员构建的任何新结构（例如，想象开发人员正在创建一个使用 Fraction 结构作为答案的数学问题）。

换句话说，我需要支持任何数据类型或数量的答案。

所以我正在考虑创建一个名为 的抽象类`Question`，其中将包含一个`Dictionary`响应。

```
public abstract class Question
{
    protected Question(string questionText)
    {
        this.QuestionText = questionText;
        this.Responses = new Dictionary<string, object>();
    }

    public string QuestionText
    {
        get;
        set;
    }

    public IDictionary<string, object> Responses { get; protected set; }
} 
```

例如，如果我创建一个新的`Question`，这将是演示。

```
public sealed class Question1 : Question
{
    public Question1(string questionText)
        : base(questionText)
    {
    }

    public int? Response1
    {
        get
        {
            int? value = null;

            if (this.Responses.ContainsKey("Response1"))
                value = this.Responses["Response1"] as int?;

            return value;
        }
        set
        {
            this.Responses["Response1"] = value;
        }
    }
} 
```

你怎么看这个想法？我的第一个疑问：我将答案包含在班级而不是另一个独立班级中是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:41:47.470

谁来回答这些问题？让我们假设人们。鉴于此，一个人可能会以某种方式登录或识别自己。这让我认为**Person 模型应该包含 Responses**，并引用每个问题。

```
// pseudocode 
class Person 
   int PersonID 
   IList Responses     

class Response
   int ResponseID
   int QuestionID 
   string ResponseValue 

class Question
   int QuestionID
   string QuestionText 
   IList AllowedResponses 
   bool AllowsMultipleResponses 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:18:42.620

我将从 jcollum 的模型开始，但我会做一些不同的事情，并在使用对象时添加泛型。

```
// pseudocode 
class Person 
   int PersonID 
   IEnumerable<IQuestionResponse> QuestionResponses

//non generic interface to allow all QuestionRespones 
//to be stored in one typed collection
interface IQuestionResponse

class QuestionResponse<TResponse> : IQuestionResponse
   Question<TResponse> Question
   IEnumerable<TResponse> Responses

class Question<TResponse>
   string QuestionText 
   IEnumerable<TResponse> AllowedResponses 
   bool AllowsMultipleResponses 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:18:31.957

如果您在问题中包含回复，您将违反单一责任原则。换句话说，如果例如您决定更改响应映射到问题的方式，为什么要更改 Question 类。还缺少一个响应类。此外，使用问题和响应列表创建一个 QuestionResponsesMapping 类。

要回答您在评论中发布的问题（java 中的语法）：

这个 QuestionResponsesMapping 可以有一个键为 Question 和 value 的映射

```
List<Response<T extends Object & SomeInterface>> 
```

. 确保为 Question 和 Response 类实现 hashCode() 和 equals()。通过实现 Response as 来满足您能够为响应存储任何类型的数据类型的要求`Response<T extends Object & SomeInterface>>`。这里的 SomeInterface 可以具有跨数据类型通用的方法。

# ios - Facebook Connect SDK 与 armv7 架构？:(

> ID：11212864
> 
> 赞同：4
> 
> 时间：2012-06-26T17:32:30.960
> 
> 标签：ios, xcode, facebook, armv7, armv6

最近使用 Facebook Connect SDK 构建了一个 iPad 应用程序。有人建议我将项目的架构更改为 armv6 以允许 Facebook Connect SDK 工作。

将项目更改为 armv6 后，它在模拟器和设备上运行良好，但是当我尝试将应用程序提交到 iTunes Connect 时，我在提交时收到以下错误：

```
iPad: application executable is missing a required architecture. At least one of the following architecture(s) must be present: armv7 
```

所以，我做了一些研究和架构的简单改动（如下）“应该”解决这个问题：

![在此处输入图像描述](../Images/bf90305f6ddffc37be11097434a22be9.png)

但是，该项目无法构建并出现以下错误：

```
ld: warning: ignoring file PROJECT/facebook-ios-sdk/build/facebook-ios-sdk.build/Release-iphoneos/facebook-ios-sdk.build/Objects-normal/armv6/libfacebook_ios_sdk.a, file was built for archive which is not the architecture being linked (armv7)

Undefined symbols for architecture armv7:
"_OBJC_CLASS_$_Facebook", referenced from:
  objc-class-ref in AppDelegate.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果我错了，有人纠正我，但似乎 iTunes Connect 不会接受*没有*armv7 的 iPad 应用程序二进制文件，而且 Facebook SDK 不允许*使用*armv7 构建应用程序，对吗？

唯一可行的解​​决方案是使 Facebook Connect SDK 能够使用我没有成功的 armv7 构建，我已经阅读了很多论坛和帖子，但并没有真正提出可以公开工作的解决方案。

我已经为此苦苦挣扎了大约 7 个小时，老实说，我不知道还能做什么。

是否有人提交了包含 Facebook Connect SDK 的仅限 iPad 的应用程序？有兴趣了解您的项目有哪些设置。

谢谢大家，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:00:08.800

无需等待 Facebook SDK 的新版本，您可以将 Facebook 源代码包含到项目中然后编译。它应该适用于 armv7 架构。

# eclipse-plugin - 使用自定义验证器在 Eclipse 插件中自定义 xml 验证？

> ID：11212867
> 
> 赞同：2
> 
> 时间：2012-06-26T17:33:02.390
> 
> 标签：eclipse-plugin

我想使用自定义验证器验证自定义内容类型文档（xml 种类）。想用 xsd 验证它，但只能在对主文档进行某些预处理之后。无法使用普通 xml 验证器，因为 - 1.) 主文档文件中未定义模式位置（xsd）和命名空间。2.) 第一个原因和更多的 bcz，想要在应用 xsd 验证之前对文档文件进行一些预处理。

所以我想使用 xml 验证器，但只能在我的文件预处理之后。

我的 plugin.xml 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

<extension
point="org.eclipse.core.runtime.contentTypes">

<content-type
id="com.xyz.ide.core.contentType.dummy"
base-type="org.eclipse.core.runtime.xml"
file-extensions="blabla"
/>

</extension>

<extension
point="org.eclipse.wst.sse.ui.sourcevalidation">
<validator
scope="total"
class="mc.CustomValidator"
id="com.xyz.myValidator">
<contentTypeIdentifier
id="com.xyz.ide.core.contentType.dummy">
<partitionType
id="org.eclipse.wst.xml.XML_DEFAULT">
</partitionType>
</contentTypeIdentifier>
</validator>
</extension>

</plugin> 
```

CustomValidator.java

```
public class CustomValidator implements ISourceValidator, IValidator {
XMLValidator validator = new XMLValidator();
IDocument document;

public void validate(IValidationContext helper, IReporter reporter) {
String fileContent = this.document.get();
final InputStream is = new ByteArrayInputStream(fileContent.toLowerCase().getBytes());

// Whats the problem in this line???
XMLValidationReport report = validator.validate("/home/rchawla/xmlWorkspace/abc.xsd", is);

ValidationMessage[] messages = report.getValidationMessages();
for(ValidationMessage message:messages){
System.out.println(message.getMessage());
}
} 
```

我可以在调试模式下运行插件时点击 validate 方法，但文档没有得到 xsd 的验证。上述方法有什么问题，ValidationMessage[] messages = report.getValidationMessages(); 给出零消息，即使主文档文件中存在错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:13:31.660

我在尝试使`org.eclipse.wst.sse.ui.sourcevalidation`扩展点工作时也遇到了很多麻烦。我最终使用了另一个扩展点[org.eclipse.wst.validation.validatorV2](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.validation.doc.isv/reference/extension-points/vf/org_eclipse_wst_validation_validatorV2.html)。两个验证器之间的唯一区别是，这个验证器仅在您保存文件时触发，而不是在您键入时触发。请参阅下面的示例：

```
<extension id="customValidator" name="Custom Validator" point="org.eclipse.wst.validation.validatorV2">
    <validator class="aaa.bbb.CustomValidator" markerId="customMarker" version="3">
        <include>
            <rules>
                <contentType id="customContentType" exactMatch="false"/>
            </rules>
        </include>
    </validator>
</extension> 
```

您的验证器实现应该覆盖`org.eclipse.wst.validation.AbstractValidator`.

# silverlight - Silverlight - 视图模型之间的通信

> ID：11212868
> 
> 赞同：0
> 
> 时间：2012-06-26T17:33:05.793
> 
> 标签：silverlight, mvvm, mvvm-light

此 UI 包含一个 Main.xaml，其中包含一个包含 (Person.xaml) 的导航框架，因此涉及两个不同的视图模型。

![在此处输入图像描述](../Images/4605bc82f9bbd8cdcf3399dec8963f62.png)

单击 Main.xaml 中的菜单时，我想过滤数据网格的内容。

*   人（显示全部）
*   50分以上
*   分数低于 50

我的方法是通过让 PersonViewModel 订阅从 MainViewModel 发送的特定消息来使用 MVVM 轻型消息传递。这会起作用，但是还有其他方法可以做到这一点（最佳实践）吗？

如果有更好的方法来解决这个问题，我不想为来自不同视图模型的 UI 元素需要通信的所有场景实现 MvvmLight 消息传递。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:42:01.377

如果您使用的是 MVVM light，我猜您已经在 ViewModelLocator 中创建了这些视图模型。因此，只需使用它来访问应用程序中的视图模型。

另一种方法是使用某种类型的 IoC 容器，例如 Unity 或 SimpleIoC。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:45:50.233

我们也使用 MVVM 灯。根据我对您的要求的理解。您可能只使用一个 DomainContext ，然后将所有实体加载到其中，然后查询每个点击项的上下文。

一旦你有了一个上下文，你基本上可以动态地查询它。这是我的代码之一。

```
 GetUserBUGroups = SecurityDomainContext.Current.UserBUGroups.Where(ub => ub.UserID == GetUsers.UserID).OrderBy(o => o.BUGroup.BUGroupDesc).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:25:36.543

对于这样的简单场景，使用多个 ViewModel 似乎并不合适。我相信您应该直接在 PersonViewModel 中插入过滤器选项

# servlets - 如果我在 Servlet 中编写自己的方法会发生什么？

> ID：11212869
> 
> 赞同：1
> 
> 时间：2012-06-26T17:33:06.827
> 
> 标签：servlets, methods

如果我在 servlet 的主体中编写自己的方法会发生什么？servlet 容器会处理它吗？如果是，如何？如果不是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:02:11.347

不，servlet 不支持浏览器调用的自定义 Http 方法。

请阅读 servlet 2.5 规范的第 2 章了解支持的方法

[http://download.oracle.com/otndocs/jcp/servlet-2.5-mrel2-eval-oth-JSpec/](http://download.oracle.com/otndocs/jcp/servlet-2.5-mrel2-eval-oth-JSpec/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:36:39.193

是的 Servlet 容器支持自定义 Http 方法。当 any 方法被调用时，容器会调用 service() 方法。它是 HttpServlet.service() 方法，该方法返回 HttpServletResponse.SC_NOT_IMPLEMENTED 状态代码，用于除标准 Http 方法（如 GET、POST 等）之外的 http 方法。

如果你想有自定义的 http 方法。覆盖 service() 方法，使用 HttpServletRequest.getMethod() 获取方法，然后调用您的自定义方法。

例如，

```
 public class CustomMethodServlet extends HttpServlet{

public void service(HttpServletRequest req, HttpServletResponse res) {\
   if(request.getMethod().equals("foo")){
   //invoke your custom method
     doFoo(request,response);
   }else {
      super.service(request, response);
   }

}
public void doFoo(HttpServletRequest req, HttpServletResponse res) {
   //implement your custom method
} 
```

}

Servlet 中的上述方法可以使用`foo`http 方法调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T18:55:36.177

听起来您的意思是 JSP 页面而不是 servlet。servlet 是一个 Java 类，没有主体。servlet 具有服务方法和方法以及其他一些方法。Java 不支持在另一个方法中编写方法。

# android - ADT 插件没有出现在 ubuntu 中

> ID：11212873
> 
> 赞同：0
> 
> 时间：2012-06-26T17:33:27.070
> 
> 标签：android, eclipse, ubuntu, adt

我最近开始使用 Ubuntu，我正在尝试安装 Eclipse。我按照网上的说明在Eclipse上添加ADT插件，但是添加名称和URL后，没有任何反应，我应该得到一个插件然后点击下一步并按照网站安装，但我没有看到那里的任何插件！oO

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:54:52.970

在某些国家/地区，该网页被禁止。也许这就是你的情况。如果是，您需要下载 ADT 并手动安装。

# javascript - 如何获取javascript唯一的窗口名称

> ID：11212875
> 
> 赞同：1
> 
> 时间：2012-06-26T17:33:40.720
> 
> 标签：javascript

如何让 window.name 在刷新之间“粘贴”？

我正在尝试使用 window.name 来区分多个浏览器窗口，因此每个窗口都可以显示不同类型的数据，但在同一个 URL 上。

但是`window.name`不会粘。

这是我在页面中间的测试代码......

```
document.write( '<br> before set is: ' + window.name ); 
window.name = "blah"; 
document.write( '<br> after set is: ' + window.name ); 
```

这是页面输出，这表明它没有粘性......

```
before set is: showframe
after set is: blah 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-25T20:23:52.997

**`window.name`坚持。**除了我自己的观察，这得到了 3 个来源的支持：

*   你自己的代码。“展架”从何而来？答：这是该窗口中其他页面*先前*`window.name`设置的。然后覆盖它并获得这个新值。这是预期的行为。

**   [https://developer.mozilla.org/en-US/docs/Web/API/Window/name](https://developer.mozilla.org/en-US/docs/Web/API/Window/name)说

    > 如果选项卡从不同域加载页面，现代浏览器会将 Window.name 重置为空字符串

    ...这（有点）意味着如果选项卡从同一域加载页面，它就会粘住;-)

    *   [https://stackoverflow.com/a/35596134/1668200](https://stackoverflow.com/a/35596134/1668200)推荐`window.name`而不是`sessionStorage`* 

 *最后提示：永远不要从阅读现有内容开始`window.name`——这可能是前一页的值。*

# java - Java 小程序：我可以通过串行方式与服务器通信吗？

> ID：11212879
> 
> 赞同：0
> 
> 时间：2012-06-26T17:33:58.260
> 
> 标签：java, web-applications, serial-port, processing, rxtx

我已经使用 Processing 编写了一个 java 应用程序，它通过串行与 Ardunio 进行通信。从编译器运行时它工作正常，但我希望把它变成一个小程序。在浏览器中运行小程序（按原样）时，它只是进入一个白框。我已经尝试过对小程序进行自我签名，但我知道我的问题不是我试图访问查看小程序的计算机，而是试图访问下载小程序的服务器。

总结，java小程序如何与我服务器上的串口通信？（Linux 10.04 操作系统）所有解决方案都可以接受，但我需要将它们都链接到一个小程序。IE：串口>中间解决方案>小程序

希望你能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:07:45.167

[http://henrypoon.wordpress.com/2011/01/01/serial-communication-in-java-with-example-program/](http://henrypoon.wordpress.com/2011/01/01/serial-communication-in-java-with-example-program/)

看一下这个。我用它作为“模板”来创建我自己的 jar 程序，该程序通过串行与 arduino 设备通信。它需要一些调整，但如果你理解它，你将能够做你的事情。这来自对Java知识几乎为零的人

# iphone - 如何在 iPhone 上设置周期性功能以在 Grand Central Dispatch 中运行？

> ID：11212880
> 
> 赞同：0
> 
> 时间：2012-06-26T17:33:58.430
> 
> 标签：iphone, objective-c, xcode, grand-central-dispatch, timed

我正在编写一个 iPhone 应用程序，除其他外，它应该每分钟自动与服务器同步。我可以使应用程序同步，但我无法弄清楚如何在后台跟踪时间（当应用程序最重要时）并自动同步。

我从来没有用多线程编程做过任何复杂的事情，所以我对它还是很陌生。

有谁知道如何做到这一点？或者至少是一个很好的起点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:58:14.493

要设置重复同步调用，您需要使用重复的 NSTimer 实例。您可以在 Apple 的[Using Timers Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html#//apple_ref/doc/uid/20000807-CJBJCBDE)中找到设置 NSTimer 所需的所有示例代码。

您可能希望通过 dispatch_async 使用 dispatch_queue 以防止它阻塞 UI。或者，如果您使用的是 ASIHTTPRequest 网络库，它将自动使用 NSOperationQueues 进行网络操作。如果没有，你必须自己做。

我强烈建议您观看 2010/2011 年的一些 Grand Central Dispatch 和 Blocks WWDC 会议视频（我假设您是注册开发人员）。这个话题比一个问题大，你需要了解使用 GCD 的微妙之处。不过需要注意的一件事：如果您的同步过程以应用 UI 更新结束，您必须通过主线程执行此操作。您需要使用 main_queue 通过 dispatch_async 调用 UI 更新方法。会议视频将解释这一点。

最后，正如其他人所提到的，每分钟访问服务器可能会导致功耗。即使你不“同步”，上网这个简单的动作也意味着 iPhone 每次都必须开启 3G 收音机。只是需要注意的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:50:39.930

您将使用的方法是`-(void)applicationDidEnterBackground:(UIApplication *) application`

一旦应用程序进入后台，您将把所有代码放在那里。

如果您每分钟都在检查服务器，我认为这在 iPhone 上是不可能的，但有一种方法可以进行推送消息。

这是关于推送消息的教程[http://mobiforge.com/developing/story/programming-apple-push-notification-services](http://mobiforge.com/developing/story/programming-apple-push-notification-services)

这里也是 devolper 库[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html)

您可以使用推送通知来提醒用户应用程序中有新内容，一旦他们返回应用程序，它就会检查并从服务器获取任何内容。

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:46:45.903

1.  如果您尝试每分钟同步一次应用程序，那么这将使应用程序变慢并耗尽电池电量。您可以做什么，您可以检查是否更改了某些配置，然后再同步应用程序。

2.  对于这些东西，您可能可以在某些配置更改时使用后台线程来执行任务。

3.  您需要考虑应用退出时的场景，在`applicationDidEnterBackground`方法中对此进行特殊处理。

# python - 在 Association_proxy 中更改引用的集合类键

> ID：11212882
> 
> 赞同：1
> 
> 时间：2012-06-26T17:34:01.947
> 
> 标签：python, sqlalchemy

是否可以更改关联代理中引用的集合类的键？

**例子：**

```
class Event(ManagerBase):
    """Defines an event."""

    __tablename__ = 'eventing_events'

    id = Column(Integer, primary_key=True)
    device_id = Column(Integer, ForeignKey(EventingDevice.id), nullable=False)
    device = relation(EventingDevice)
    type_id = Column(Integer, ForeignKey(EventType.id), nullable=False)
    type = relation(EventType)
    datetime = Column(DateTime, nullable=False)
    summary = Column(String(500))

    fields = association_proxy("field_values", "value")

class EventFieldValue(ManagerBase):
    """The value of a single field of an event."""

    __tablename__ = 'eventing_event_field_values'

    event_id = Column(Integer, ForeignKey(Event.id), primary_key=True)
    event = relation(Event, backref=backref("field_values",
                                            collection_class=attribute_mapped_collection("field")))
    field_id = Column(Integer, ForeignKey(Field.id), primary_key=True)
    field = relation(Field)
    value = Column(Text) 
```

在这种情况下， 的`field`属性`Event`将表示一个`EventFieldValue.field`作为键的字典。是否可以仅在代理本身中更改此密钥而不影响关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:34:02.680

似乎这对于原始 SQLAlchemy 是不可能的`AssociationProxy`，因为该类直接访问原始关系，因此任何键都将在基础关系上 1:1 查询。

我写了一个类`DictProxy`，它允许更改键和值字段：

```
class DictProxy(object):
    def __init__(self, col, keyattr, valattr = None):
        self.obj = None
        self.col = col
        self.keyattr = keyattr
        self.valattr = valattr

    def __get__(self, obj, class_):
        self.obj = obj
        return self

    def __repr__(self):
        outdict = {}
        for k, v in getattr(self.obj, self.col).iteritems():
            if not k is None:
                if self.valattr == None:
                    outdict[getattr(k, self.keyattr)] = v
                elif v is not None:
                    outdict[getattr(k, self.keyattr)] = getattr(v, self.valattr)
                else:
                    outdict[getattr(k, self.keyattr)] = None
        return repr(outdict)

    def __getitem__(self, key):
        keyobj = [obj for obj in getattr(self.obj, self.col) if getattr(obj, self.keyattr) == key]
        if not len(keyobj):
            return None
        if self.valattr == None:
            return getattr(self.obj, self.col)[keyobj[0]]
        else:
            return getattr(getattr(self.obj, self.col)[keyobj[0]], self.valattr)

    def __contains__(self, key):
        return len([obj for obj in getattr(self.obj, self.col) if getattr(obj, self.keyattr) == key]) != 0

def dict_proxy(*arg):
    return DictProxy(*arg) 
```

**示例用法：**

```
class Event(ManagerBase):
    """Defines an event."""

    __tablename__ = 'eventing_events'

    id = Column(Integer, primary_key=True)
    device_id = Column(Integer, ForeignKey(EventingDevice.id), nullable=False)
    device = relation(EventingDevice)
    type_id = Column(Integer, ForeignKey(EventType.id), nullable=False)
    type = relation(EventType)
    datetime = Column(DateTime, nullable=False)
    summary = Column(String(500))

    fields = dict_proxy("field_values", "name", "value") 
```

`fields`of `Event`now 是一个`EventFieldValue.name`作为键的字典，并访问关系 field_values （来自`EventFieldValue`via `backref`）。

**注意：** 实际上这是一个只读代理，但可能（虽然很棘手）通过`__setitem__`方法扩展代理。

# python - 将“\n”添加到 Python 中的所有输出行的更简单方法？

> ID：11212884
> 
> 赞同：0
> 
> 时间：2012-06-26T17:34:06.733
> 
> 标签：python

以下脚本对我有用，但我想知道是否可以以更简单的方式完成。我正在使用 Python 2.7.3。

```
f = open('file.txt')
out = open('script.sql', "w")
for line in f:
        out.write('%s%s' % (line[:-1], '\n'))
f.close()
out.close() 
```

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:35:21.317

嗯，有`line[:-1] + '\n'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:36:09.140

不要使用旧的`%s`字符串格式使用`format()`

```
 out.write('{0}{1}'.format(line[:-1], '\n')) 
```

或者 `out.write('{0}\n'.format(line[:-1]))`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T17:37:27.900

`\n`您可以使用添加一个`line[:-1] + '\n'`，也可以使用更简单的格式，例如`'%s\n' % (line[:-1],)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-26T17:40:27.063

在这种情况下，去掉换行符并再次添加它似乎有点多余：

```
f = open('file.txt')
out = open('script.sql', "w")
for line in f:
     out.write(line)
f.close()
out.close() 
```

或者更好`shutil`的是，用于直接复制文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T17:51:37.610

如果您使用打印，`\n`则会自动添加：

```
print >>out, line[:-1] 
```

这些天建议这样使用`with`：

```
with open('file.txt') as f, open('script.sql', "w") as out:
    for line in f:
       print >>out, line[:-1]

# autoclosed f and out... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T17:51:27.657

我会使用`out.write(line.rstrip('\r\n') + '\n')`, 为每一行添加一个换行符而不重复。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T21:14:55.463

在将 line 的内容写入文件之前，使用 line.rstrip 如下：

`out.write(line.rstrip('\r\n') + '\n')`

将删除任何现有的回车符或换行符 '\r' 或 '\n`，并将在每一行添加一个换行符。

# asp.net - 使用 json 数据解析网站（第 2 部分）

> ID：11212888
> 
> 赞同：0
> 
> 时间：2012-06-26T17:34:19.473
> 
> 标签：asp.net, json, parsing

我成功解析了我想要的网站，但我无法保留这些数据，因为 30 分钟后我使用的链接不再有效。谁能解释我发生了什么，我该如何解决这个问题？我的代码是：

```
 WebClient wc = new WebClient();
        wc.Headers.Add("Referer", "http://sletat.ru/");//MUST BE THIS HEADER
        string result = wc.DownloadString("http://module.sletat.ru/Main.svc/GetTours?cityFromId=832&countryId=35&cities=3106&meals=&stars=&hotels=&s_adults=1&s_kids=0&s_kids_ages=&s_nightsMin=6&s_nightsMax=16&s_priceMin=0&s_priceMax=&currencyAlias=EUR&s_departFrom=26%2F06%2F2012&s_departTo=19%2F07%2F2012&visibleOperators=&s_hotelIsNotInStop=true&s_hasTickets=true&s_ticketsIncluded=true&debug=0&filter=0&f_to_id=&requestId=19446078&pageSize=20&pageNumber=1&updateResult=1&includeDescriptions=1&includeOilTaxesAndVisa=1&userId=&jskey=1&callback=_jqjsp&_1340728614816=");
        result = result.Substring(result.IndexOf("{"), result.LastIndexOf("}") - result.IndexOf("{") + 1);
        JavaScriptSerializer js = new JavaScriptSerializer();
        dynamic json = js.DeserializeObject(result);
        var prices = json["GetToursResult"]["Data"]["aaData"] as object[];
        // var operators = ((object[])json["result"]["prices"]).Cast<Dictionary<string, object>>();
        var temp = prices.ToList().Take(20).Select(x => new TableRow
        {
            Operator = (x as object[])[18].ToString(),

        }).ToList();
        string str = "";

        foreach (var tableRow in temp)
        {
            str += tableRow.Operator + "<br />";
        }
        Response.Write(str); 
```

谢谢指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:56:06.817

似乎链接中不断变化的部分是在服务器上生成的值，这些值在每次请求时都会发生变化。您可以获得所需的数据，而不是通过一个步骤，而是通过几个步骤，例如：

1.  对主页执行请求`http://sletat.ru`
2.  解析来自第 1 步的响应。在响应标记中，您会发现每个新请求都会更改的链接部分。
3.  使用该数据创建您的请求并将其发送到服务器。

# c# - VS2010 Crystal Reports：如何设置日志记录级别？

> ID：11212891
> 
> 赞同：8
> 
> 时间：2012-06-26T17:34:42.973
> 
> 标签：c#, visual-studio-2010, crystal-reports, log4net

由于 log4net 随 VS2010 的 CR 一起提供，因此有理由记录内容。如何将 CR 日志级别设置为调试，以便弄清楚我的报告发生了什么？

我应该澄清一下，我的项目中已经有 log4net 了，我只是没有从 CrystalReports 中看到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-14T21:46:34.577

此链接包含有关如何启用额外日志记录的详细信息：

[https://apps.support.sap.com/sap/support/knowledge/public/en/0001470978](https://apps.support.sap.com/sap/support/knowledge/public/en/0001470978)

摘抄：

1.  使用记事本创建两个名为 logging-on.reg 和 logging-off.reg 的 .reg 文件。
2.  将下面相应部分的文本复制到每个 .reg 文件中并保存。
3.  将 .reg 文件复制到需要进行日志记录的系统。
4.  双击 logging-on.reg 文件并将内容合并到注册表中。
5.  重新启动您正在监视的 IIS、服务或 Windows 应用程序。注意：如果 Crystal 运行时文件已在内存中，则日志记录将不起作用。
6.  运行应用程序直到出现故障或出现错误消息。
7.  在临时目录中找到 .log 文件。
    *   视窗XP；C:\Documents and Settings\\本地设置\Temp
    *   Windows Vista，7，服务器 2008；C:\Users\\AppData\Local\Temp
    *   运行 Visual Studio IDE 的 Windows Server 2008 会创建一个子文件夹 \2（在我的例子中），VS 将其用作临时文件夹。这是日志文件所在的位置
8.  它们将根据应用程序命名。例如，如果您的应用程序名为 mySlowReport.exe - 日志文件将命名为：
    *   mySlowReport.crpe.bkgrnd.log
    *   mySlowReport.crpe.Diagnostics.log
    *   mySlowReport.crpe.functions.log

## 用于 Visual Studio 2010 的水晶报表

注意 Crystal 为 Visual Studio 2010 创建的日志文件扩展名为 .GLF。

### 启用日志记录

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging]
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.bkgrnd]
"Destinations"=dword:00000003
"Position"=dword:00000003
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.diagnostics]
"Destinations"=dword:00000003
"Position"=dword:00000003
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.functions]
"Destinations"=dword:00000003
"LogErrorsOnly"=dword:00000000
"Position"=dword:00000003
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging]
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.bkgrnd]
"Destinations"=dword:00000003
"Position"=dword:00000003
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.diagnostics]
"Destinations"=dword:00000003
"Position"=dword:00000003
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.functions]
"Destinations"=dword:00000003
"LogErrorsOnly"=dword:00000000
"Position"=dword:00000003 
```

### 禁用日志记录

```
Windows Registry Editor Version 5.00
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging]
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.bkgrnd]
"Destinations"=dword:00000000
"Position"=dword:00000000
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.diagnostics]
"Destinations"=dword:00000000
"Position"=dword:00000000
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.functions]
"Destinations"=dword:00000000
"LogErrorsOnly"=dword:00000000
"Position"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging]
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.bkgrnd]
"Destinations"=dword:00000000
"Position"=dword:00000000
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.diagnostics]
"Destinations"=dword:00000000
"Position"=dword:00000000
"LogErrorsOnly"=dword:00000000
[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Crystal Reports\Logging\crpe.functions]
"Destinations"=dword:00000000
"LogErrorsOnly"=dword:00000000
"Position"=dword:00000000 
```

# google-analytics - 此网页有重定向循环

> ID：11212896
> 
> 赞同：0
> 
> 时间：2012-06-26T17:34:53.950
> 
> 标签：google-analytics

我一直在为时事通讯活动构建一些 GATC 标签。当我将标签设置为

[http://www.eafs.eu/index.php?utm_campaign=powermta1&utm_content=introduction&utm_medium=email&utm_source=news1](http://www.eafs.eu/index.php?utm_campaign=powermta1&utm_content=introduction&utm_medium=email&utm_source=news1)

单击已更改为的链接时

[http://www.eafs.eu](http://www.eafs.eu) * */?lang=en&* *utm_campaign=powermta1&utm_content=introduction&utm_medium=email&utm_source=news1

使用调试器会在 Chrome 中显示一条消息。

此网页有重定向循环

我已经清除了缓存并在其他浏览器上进行了测试，虽然没有错误，但页面现在进入了 404 页面。

任何人都可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:52:13.057

行，

这似乎是 sh404SEF 和 Joomla 2.5 的问题。Joomla 设置搜索引擎友好 URL 和使用 URL 重写因某些叛国罪而被关闭，因此将它们重新打开并再次正常工作。重定向循环现已关闭。

# c# - 语音识别从音频文件而不是麦克风识别

> ID：11212898
> 
> 赞同：2
> 
> 时间：2012-06-26T17:35:04.870
> 
> 标签：c#, speech-recognition

> **可能重复：**
> [来自音频文件而不是麦克风的语音识别](https://stackoverflow.com/questions/1055347/speech-recognition-from-audio-file-instead-of-microphone)

我有这个程序，它使用麦克风设备进行语音识别。这是执行此操作的程序的一个简短片段。

但是，我打算做的不是使用麦克风设备，而是将声音文件传递给这个语音识别引擎，它实际上应该识别来自该音频文件的文本并重新调整结果。

```
 SpeechRecognitionEngine speechRecognitionEngine = new SpeechRecognitionEngine();
    List<Word> words = new List<Word>();
    public TestSpeech()
    {
        speechRecognitionEngine = createSpeechEngine("en-us");
        speechRecognitionEngine.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(engine_SpeechRecognized);
        loadGrammarAndCommands();            

        speechRecognitionEngine.SetInputToDefaultAudioDevice();
        speechRecognitionEngine.RecognizeAsync(RecognizeMode.Multiple);
    } 
```

我应该怎么做而不是`speechRecognitionEngine.SetInputToDefaultAudioDevice();`？

用于从音频设备识别的语音识别桌面示例：http: [//www.codeproject.com/Articles/380027/Csharp-Speech-to-Text](http://www.codeproject.com/Articles/380027/Csharp-Speech-to-Text)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:38:21.710

为什么不试试[SetInputToAudioStream()](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtoaudiostream.aspx)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:21:09.127

**解决方案：**

您应该将输入模式配置为 wav：

```
// Configure the input to the recognizer.
recognizer.SetInputToWaveFile(@"c:\temp\SampleWAVInput.wav"); 
```

[本文](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.setinputtowavefile.aspx)讨论如何使用 System.Speech 命名空间中的识别器识别音频文件。

**其他注意事项：**

1.  您需要确保您的音频文件格式正确/受支持
2.  您还应该查看 Microsoft Speech Platform 11（发布时的最新版本）。它具有最新的 Microsoft 语音技术，可以提高您尝试执行的任何操作的准确性。

您可以[在此处阅读更多内容](http://msdn.microsoft.com/en-us/library/hh362943.aspx)并通过 Google 搜索“Microsoft Speech Platform SDK 11 下载”来下载 SDK

祝你好运！

# sencha-touch-2 - Ext.Msg.confirm - 对象 [对象窗口] 没有方法“...”

> ID：11212900
> 
> 赞同：1
> 
> 时间：2012-06-26T17:35:12.633
> 
> 标签：sencha-touch-2, sencha-architect

我正在尝试在按下注销按钮时设置确认消息，如果用户单击“是”，则将被重定向到名为“myContainer”的容器中的面板控件。该消息看起来很好，但是当我选择“是”时出现错误（假设因为容器未初始化）。我在控制器上设置了对容器的引用，但这似乎没有帮助。任何有关如何正确处理确认的建议都值得赞赏。谢谢

确认信息：

```
onLogoutTap: function(button, e, options) {
Ext.Msg.confirm("Logout", "Do you wish to continue?", function(button){
    if (button == 'yes') {
    //doesn't work:
        this.getMyContainer().setActiveItem(1);
    } else {
        return false;
    }
});
} 
```

控制器中的 myContainer 引用

```
myContainer: '#myContainer' 
```

错误信息：

```
Uncaught TypeError: Object [object Window] has no method 'getMyContainer' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:42:36.330

我经常使用的一个小技巧是这个

```
onLogoutTap: function(button, e, options) {
  var controller = this;
  Ext.Msg.confirm("Logout", "Do you wish to continue?", function (button) {
    if (button == 'yes') {
    //doesn't work:
        controller.getMyContainer().setActiveItem(1);
    } else {
        return false;
    }
  });
} 
```

像这样，您仍然可以使用关键字访问函数对象`this`。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:39:13.027

这里：

```
function(button){
    if (button == 'yes') {
    //doesn't work:
        this.getMyContainer().setActiveItem(1);
    } else {
        return false;
    } 
```

`this`指的是您的功能对象，而不是控制器。

如果要调用控制器的该方法，请尝试：

`Ext.getApplication().getController("your_controller_name").getMyContainer();`

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T18:09:43.750

另一种方法是

```
onLogoutTap: function(button, e, options) {
    Ext.Msg.confirm("Logout", "Do you wish to continue?", function(button){
        if (button == 'yes') {
        //DOES WORK!!
            this.getMyContainer().setActiveItem(1);
        } else {
            return false;
        }
    }, this);
} 
```

只需在函数定义后添加“范围”参数即可。

# android - setImageResource - 从 XML 文件读取时的字符串和整数

> ID：11212901
> 
> 赞同：0
> 
> 时间：2012-06-26T17:35:14.230
> 
> 标签：android

我有这个，它工作正常：

```
public static Integer[] photos = new Integer[]    
{R.drawable.photo1,R.drawable.photo2,R.drawable.photo3};

this.setImageResource(photos[mCellNumber]); 
```

但我决定将文件名放在一个 XML 文件中，我这样做了，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<resources>
<array name="Red">
    <item>R.drawable.photo1</item>
    <item>R.drawable.photo2</item>
    <item>R.drawable.photo3</item>
</array>
</resources> 
```

并尝试了这样的东西：

```
String[] month = getResources().getStringArray(R.array.Red);
this.setImageResource(month[mCellNumber]); 
```

..和..

```
String[] month = getResources().getStringArray(R.array.Red);
int bla = Integer.parseInt(month[mCellNumber]);
this.setImageResource(bla); 
```

我理解为什么它不起作用（字符串/整数），但我还没有找到任何简单的方法来处理字符串到整数的转换部分，或者使用带有字符串作为参数的 setImageResource。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:40:59.427

```
String[] month = getResources().getStringArray(R.array.Red);
int bla = Integer.parseInt(month[mCellNumber]); 
```

看起来它会抛出异常 R.drawable.photo1 因为字符串不是有效数字。

您尝试只保存名称，如 photo1、photo2、photo3，然后执行以下操作：

...

[Android - 将可绘制 ID 存储在自定义 XML 文件中](https://stackoverflow.com/questions/11204963/android-store-drawable-ids-in-a-custom-xml-file/11205202#11205202)

你可以尝试只保存像“joe_pic”这样的名字，这样就可以[了](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string)

..

```
 String uri = "drawable/icon";

    // int imageResource = R.drawable.icon;
    int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

but if you have already added "R.drawable.joe_pic" complete can use String.split to get 3 rd string part

# ajax - JQuery post方法未执行

> ID：11212902
> 
> 赞同：0
> 
> 时间：2012-06-26T17:35:19.613
> 
> 标签：ajax, jquery, jquery-post

我以前从未编写过 Ajax，目前我正在尝试编写一个无限滚动页面。当用户向下滚动到页面底部时，应该加载更多项目，但现在它们没有加载。这是我的 Javascript，用于检测它们何时触底并进行 Ajax 调用：

```
window.onload=function(){
//Find out how many items I have loaded and what filter I am using so I can make the Ajax call
var vloaded = <?php echo $i; ?>;
var vfilter = "<?php echo $filter ?>";
$(window).on('scroll', function () { 
  if ($(window).height() + $(window).scrollTop() >= $(document).height() - 10) {
    //I have reached the bottom of the page, now load items
    alert("loaded is " + vloaded + " and filter is " + vfilter);
    $.post("/organizer/getMore", 
        { filter: vfilter, loaded: vloaded }, 
                function(responseText) {
                    $("grid").append(responseText); 
                },"html");
    //I've loaded the next 30 items, increment my counter for next time
    vloaded +=30;   
  }
});
} 
```

当我触底时会显示警报，并且我的变量正在正确递增。我正在使用 Zend Framework，所以 URL 指向我的`getMoreAction()`函数：

```
public function getmoreAction()
{
//Used by Ajax to get more items for the infinite scroll
    //Figure out how I'm filtering items and how many I've already loaded
    $filter = $_POST['filter'];
    $loaded = $_POST['loaded'];
    echo "Filter is ".$filter;
    echo "Loaded ".$loaded;
    //Get all the items in the database ordered by filter
    require_once(APPLICATION_PATH . '/models/ItemArray.php');
    $items = ItemArray::getItems($user->getID(), $filter, $loaded );
    //Return items back to Ajax call, converted to html
    echoItems($items);  
} 
```

我已经知道该`getItems`功能有效，因为我也在页面首次加载时使用它，并且`echoItems`只是一个循环来回显每个项目的 html，它也适用于其他地方。动作中的回声永远不会执行，所以我假设我的 post call 有问题，以至于我什至从未进行过这个动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:09:47.400

2个建议。

1.  使用 jQuery 函数`$(document).ready()`而不是`window.onload`属性。
2.  使用 jQuery 函数`$.ajax()`代替`$.post()`

我进行了重构，以便我可以更轻松地阅读它。

```
// put these in the global scope
var vloaded = <?php echo $i; ?>;
var vfilter = "<?php echo $filter ?>";

$(document).ready() 
{

  // I forgot to leave this in
  $(window).on('scroll', function () 
    {
      var height = $(window).height();
      var scrollTop = $(window).scrollTop();
      var dHeight = $(document).height();

      if( height + scrollTop >= dHeight - 10) 
      {
          alert("loaded is " + vloaded + " and filter is " + vfilter);

          // an AJAX request instead of a POST request
          $.ajax
          (
            {
              type: "POST",
              url: "/organizer/getMore",
              data: { filter: vfilter, loaded: vloaded },
              dataType: "html",
              success: function( responseText, textStatus, XHR )
              {
                // select the element with the ID grid and insert the HTML
                $( "#grid" ).html( responseText );
              }
            }
          );

          // global variable
          vloaded +=30;

      } // if
    }

  ); // on

} // ready 
```

# jquery - 锁定多个 jquery FLOT 图表的十字准线

> ID：11212906
> 
> 赞同：2
> 
> 时间：2012-06-26T17:35:27.990
> 
> 标签：jquery, flot

我在一个页面上有 4 个不同的 jquery FLOT 图表。x 轴采用时间格式，所有 4 个图表沿 x 轴具有相同的时间间隔。我希望能够在设置复选框时将最后 3 个图表的十字准线设置并锁定到第一个。我不知道如何用 plot.setCrosshair(pos.x,pos.y) 做到这一点。

有任何想法吗？？？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T12:11:39.253

的[语法](http://code.google.com/p/flot/source/browse/trunk/jquery.flot.crosshair.js?r=220)是`setCrosshair`：

```
plot.setCrosshair({x: xpos, y: ypos}); 
```

这是一个工作[小提琴](http://jsfiddle.net/RUKvk/)。

# wcf - web.config 中的计算机名称

> ID：11212913
> 
> 赞同：0
> 
> 时间：2012-06-26T17:36:00.723
> 
> 标签：wcf

我的应用程序是带有 WCF 服务的 silverlight。

在开发过程中，我`http://localhost/WCFService/Service1.svc`在客户端配置上使用，但由于某些原因，即使服务在同一个盒子上，本地主机也无法工作。当我将其更改为计算机名称时，它可以工作。

我怎样才能`http://[ComputerName]/WCFService/Service1.svc`在 web.config 中有类似的东西，以便在部署到不同的机器后动态获取计算机名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T04:22:36.440

非常奇怪的 localhost 必须得到解决，无论如何你可以尝试

`http://127.0.0.1/WCFService/Service1.svc`

仔细检查您的服务是否在本地机器上运行

# objective-c - 如何将 CFGregorianDate 放入 NSDictionary？

> ID：11212914
> 
> 赞同：0
> 
> 时间：2012-06-26T17:36:04.963
> 
> 标签：objective-c

如何将 CFGregorianDate (currentSelectDate) 放入 NSDictionary？

我使用以下代码收到此错误：

> 将“CFGregorianDate”发送到不兼容类型“id”的参数

我的代码：

```
NSDictionary *userInfo = [NSDictionary dictionaryWithObject: currentSelectDate forKey:@"currentSelectDate"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:04:14.173

CFGregorianDate 基本上是一个 C 结构。首先创建一个 NSData 实例来保存它的字节：

```
NSData *data = [NSData dataWithBytes:&currentSelectDate length:sizeof(CFGregorianDate)]; 
```

然后将其放入您的字典中：

```
NSDictionary *userInfo = [NSDictionary dictionaryWithObject:data forKey:@"currentSelectDate"]; 
```

要检索它，假设您分配了一个 CFGregorianDate（在本例中，在堆栈上），再次调用`currentSelectDate`：

```
NSData *data = [userInfo objectForKey:@"currentSelectDate"];
[data getBytes:&currentSelectDate length:sizeof(CFGregorianDate)]; 
```

在您的努力中向您致以最良好的祝愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:24:04.207

这不是一个很好的解决方案，但是如果您只需要快速修复，为什么不将 gregorian 放入一个字符串中，然后将其放入字典中呢？您甚至可以从每条数据中创建一个单独的字符串，并将它们存储在字典的不同索引中。

# command-line - 使用 msiexec 启动 setup.EXE 的命令行

> ID：11212920
> 
> 赞同：0
> 
> 时间：2012-06-26T17:36:20.533
> 
> 标签：command-line, windows-installer

我有一个.exe 安装文件。我正在使用 msiexec /i 选项来启动 exe 文件，它会引发“无法打开此包”异常。我喜欢这次发布，因为我可以使用 /lv 选项记录任何错误。是否有可用于使用 msiexec 启动 setup.exe 的命令行

但是，当我双击时，exe 会运行。

非常感谢任何指导

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T02:59:26.670

许多安装工具可以生成 setup.exe 文件。并非所有这些都在内部包含 MSI。你确定这个有吗？我需要检查 exe 以做出决定，并就正确的命令行参数向您提供建议。

# bash - 引用 LSF 作业数组中的作业索引

> ID：11212923
> 
> 赞同：2
> 
> 时间：2012-06-26T17:36:33.620
> 
> 标签：bash, jobs, hpc, lsf

我正在尝试将作业数组中的作业索引作为参数传递给另一个 bash 脚本。

```
numSims=3 
numTreatments=6 # uses numTreatments top rows of parameters.csv
maxFail=10
j=1
while [ $j -le $numSims ];
do
    bsub -q someQueue -J "mySim[1-$numTreatments]%2" ./another_script.sh $LSB_JOBINDEX $j $maxFail
    let j=j+1
done 
```

`numTreatments`这里的最终想法是为 1,...,中的每一个提交`numSims`作业（模拟）。我想要一次运行两个作业 ( `%2`)。输出的格式为 XX_indexNumber_simNumber，其中 indexNumber 从 1,... 开始，`numTreatments`simNumber 从 1,..., 开始`numSims`。

理想情况下，作为该脚本的一部分提交的所有内容都将具有相同的作业 ID。这还没有正确设置，因为所有具有相同的作业`j`都被分配了一个不同的作业 ID。**我的直接问题是 another_script.sh 没有被识别`$LSB_JOBINDEX`为输入 - 它看到`$j`并`$maxFail`作为第一个也是唯一两个传递的参数。**当我用其他变量代替 时`$LSB_JOBINDEX`，没有问题。我究竟做错了什么？

* * *

*编辑*- 我尝试过的一些事情：`"$LSB_JOBINDEX"`、、、和`${LSB_JOBINDEX}``%I``I=$LSB_JOBINDEX; bsub ... $I $j $maxFail`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T19:45:01.630

从[这个链接](http://www.csc.fi/english/pages/murska_guide/batch_jobs/serial_batch_jobs)：

> 上面的定义不仅会启动一个批处理作业，还会启动 100 个批处理作业，其中子作业特定的环境变量 $LSB_JOBINDEX 的值从 1 到 100。然后可以在实际的作业启动命令中使用此变量，以便处理每个子任务。

在您的情况下，这意味着该变量`$LSB_JOBINDEX`可从 script 内部获得`another_script.sh`。您不需要将其作为参数传递，只需`$LSB_JOBINDEX`在脚本中访问即可。

# google-maps - Google Maps API v3 PHP 请求返回错误

> ID：11212927
> 
> 赞同：0
> 
> 时间：2012-06-26T17:36:44.573
> 
> 标签：google-maps, google-maps-api-3

我正在尝试使用 PHP 脚本来获取使用 Google Maps API v3 的地址的纬度/经度。我看过很多如何做到这一点的例子，但没有一个对我有用。我的回复总是出错。这是我的代码：

```
<?php
$jsonurl = "http://maps.google.com/maps/api/geocode/json?sensor=false&key=MY_API_KEY&address=1600+Pennsylvania+Avenue+Northwest+Washington+DC+20500";
echo $json = file_get_contents($jsonurl);
?> 
```

这是该脚本的输出：

> {“结果”：[]，“状态”：“REQUEST_DENIED”}

我已经尝试了我能想到的一切来让它工作。我尝试使用我的服务器 IP 地址生成新的 API 密钥，但无济于事。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:17:20.270

您是在尝试使用[Web 服务](https://developers.google.com/maps/documentation/geocoding/)还是[v3 API 地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)器？

从 php 你应该使用网络服务。记录在案的 URL 不是我在您的帖子中看到的 (http://maps.google.com/maps/api/geocode/json)，而是[http://maps.googleapis.com/maps/api/geocode/ json](http://maps.googleapis.com/maps/api/geocode/json)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:14:27.290

我会尝试在没有 key 参数的情况下发送请求，您不会在地理编码[文档](https://developers.google.com/maps/documentation/geocoding/)中看到任何提及。

[http://maps.google.com/maps/api/geocode/json?sensor=false&address=1600+Pennsylvania+Avenue+Northwest+Washington+DC+20500](http://maps.google.com/maps/api/geocode/json?sensor=false&address=1600+Pennsylvania+Avenue+Northwest+Washington+DC+20500)工作吗？

# jquery - .load(function) 触发两次

> ID：11212929
> 
> 赞同：3
> 
> 时间：2012-06-26T17:37:07.510
> 
> 标签：jquery

我有一个加载 iframe 的单击事件，然后是 iframe 的 .load(function()。问题是每个单击事件都会触发加载函数两次。有人可以解释一下为什么会发生这种情况吗？以及如何预防？

```
$(document).ready(function() {
    $('.Popup').click(function() {
        $('#myiframe').attr('src', $(this).attr('href')).load(function() {
            alert('done loading')
        })
        return false;
    });
});​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:39:32.497

load 事件将在创建 iframe 时触发，然后在设置 src 时再次触发。load 事件在不同的浏览器中是相当粗略的，所以一定要进行大量的测试。

# ruby-on-rails - 在 Redmine 插件“init.rb”中需要 gem 失败

> ID：11212930
> 
> 赞同：1
> 
> 时间：2012-06-26T17:37:15.210
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins, redmine, redmine-plugins

我正在为 Redmine 2.0 和插件的“init.rb”中的以下行构建一个插件

```
require 'ice_cube' 
```

即使安装了 'ice_cube' 并在我执行 'gem list' 时显示我也会收到加载错误 我使用 rvm 和 ruby​​ 1.9.3p0（2011-10-30 修订版 33570）[x86_64-darwin11.2.0]

这是错误日志：

```
/Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': cannot load such file -- ice_cube (LoadError)
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/plugins/redmine_asset_tracker/init.rb:2:in `<top (required)>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/lib/redmine/plugin.rb:129:in `block in load'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/lib/redmine/plugin.rb:120:in `each'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/lib/redmine/plugin.rb:120:in `load'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config/initializers/30-redmine.rb:13:in `<top (required)>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:245:in `load'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/engine.rb:588:in `block (2 levels) in <class:Engine>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/engine.rb:587:in `each'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/engine.rb:587:in `block in <class:Engine>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config/environment.rb:14:in `<top (required)>'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config.ru:4:in `require'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config.ru:4:in `block in <main>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config.ru:1:in `new'
    from /Users/myth/Learn/Code/Berkman GSOC 2012/Berkman/redmine/config.ru:1:in `<main>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/commands/server.rb:46:in `app'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/commands/server.rb:70:in `start'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/commands.rb:55:in `block in <top (required)>'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/commands.rb:50:in `tap'
    from /Users/myth/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.3/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:18:59.790

我找到了解决问题的方法：

在您的插件目录中添加一个“Gemfile”，其中包含所有列出的 gem，点击“bundle”，然后 require 可以完美运行。

# opengl - GLSL gl_LightSource 点/方向/点区分

> ID：11212933
> 
> 赞同：1
> 
> 时间：2012-06-26T17:37:32.170
> 
> 标签：opengl, glsl, maya

我正在编写一个 GLSL 程序，作为在 Maya（一个闭源 3D 应用程序）内部运行的插件的一部分。我的插件将自定义几何图形呈现到应用程序呈现其默认多边形几何图形的相同图像缓冲区中。该应用程序使用 OpenGL 固定管道进行照明和着色，但我使用 GLSL 来渲染自定义几何体和材质。

我的问题是，我想在我的着色器中模仿固定管道灯的行为。应用程序定义了`gl_LightSource`制服中的灯光，我希望它们在分配给我的自定义几何图形时具有与分配给应用程序的默认多边形几何图形时相同的方向、强度等。

这些`gl_LightSource`字段有明确的记录，但我找不到关于固定管道如何解释这些字段的明确文档。有很多关于如何在 GLSL 中对点/定向/聚光灯进行编码的示例，但它们似乎并不完全模仿固定管道。例如，如果应用程序定义了它们的混合，您如何确定灯光是点光、定向光还是聚光灯？可以在不在我的着色器中引入过多分支的情况下处理混合光类型吗？

简而言之，是否有任何关于固定功能管道如何评估的权威文档或示例`gl_LightSource`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T18:33:01.487

> 我的问题是，我想模仿片段着色器中固定管道灯的行为。

那么这是你的第一个问题，因为“固定管道灯”是在*顶点*处理器中实现的，而不是每个片段。

> 简而言之，是否有任何关于固定功能管道如何评估 gl_LightSource 的权威文档或示例？

是的。它被称为“OpenGL 图形系统：规范”。它可以[在 OpenGL Registry 上下载](http://www.opengl.org/registry/)；你想要兼容性配置文件。4.2 兼容性规范的第 2.13 节涵盖了用于照明的所有数学运算。只需将其转换为 GLSL 代码。

请注意，您将无法*完全*模仿固定功能管道。也就是说，没有办法保证基于着色器的光照和固定功能光照之间的不变性。你会得到一些接近的东西，但不是二进制相同的值。

> 可以在不在我的着色器中引入过多分支的情况下处理混合光类型吗？

你如何定义“过度”？您将需要分支，因为 OpenGL 的光照方程涉及条件逻辑。

*这通常是人们不*只是在着色器中重新实现 GL 光照的部分原因。如果您只编写 GLSL，而不是使用数据驱动的方法，则效率会高得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T23:59:29.443

[在OpenGL ES 2.0 Programming Guide](http://opengles-book.com/)中有完整的实现固定功能管线的顶点着色器源代码。*（请注意，固定功能管线只是逐顶点光照，因此光照计算不需要片段着色器。）*

我相信当 OpenGL 驱动程序处于固定功能模式时，它会在内部使用这个顶点着色器。请查看本书的第 8 章，顶点着色器。

它定义了一个具有以下属性的灯光结构；

1.  位置，
2.  环境色彩，
3.  漫反射颜色，
4.  高光颜色，
5.  现货方向，
6.  衰减因子（常数、线性、二次），
7.  现货指数，
8.  光斑截止角，
9.  ComputeDistanceAttanuation (bool)

并且，每个灯光都在函数**lighting_equation()**中进行处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:06:48.147

这是我根据OpenGL规范文档提出的：

```
#version 410 compatibility

vec3 incedentLight (in gl_LightSourceParameters light, in vec3 position)
{
    if (light.position.w == 0) {
        return normalize (-light.position.xyz);
    } else {
        vec3 offset = position - light.position.xyz;
        float distance = length (offset);
        vec3 direction = normalize (offset);
        float intensity;
        if (light.spotCutoff <= 90.) {
            float spotCos = dot (direction, normalize (light.spotDirection));
            intensity = pow (spotCos, light.spotExponent) *
                    step (light.spotCosCutoff, spotCos);
        } else {
            intensity = 1.;
        }
        intensity /= light.constantAttenuation +
                light.linearAttenuation * distance +
                light.quadraticAttenuation * distance * distance;
        return intensity * direction;
    }
} 
```

根据我对 GLSL 的了解，分支应该是相当有效的，因为它只依赖于统一变量。

# ruby-on-rails-3 - Rails：在 ActiveResource 中存储属性的可能值的位置

> ID：11212935
> 
> 赞同：0
> 
> 时间：2012-06-26T17:37:39.413
> 
> 标签：ruby-on-rails-3, activeresource

假设我有一个 ActiveResource，它有一个具有多个属性的架构。其中一个属性应具有三个值（由 ActiveResource 与之对话的 API 定义）。

由于我正在为这个 ActiveResource 对象创建表单，我想知道我应该在哪里存储这三个可能的值？想象一下，我想在表单中显示一个下拉列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:56:17.817

*   将类中的可能值存储为常量和数组。
*   在您的 erb 文件中，使用 collection.select 以使用之前创建的类中的数组显示下拉列表。[http://agilewarrior.wordpress.com/2011/10/22/rails-drop-downs/](http://agilewarrior.wordpress.com/2011/10/22/rails-drop-downs/)
*   对于验证，我想您可以覆盖 validate 方法并重用数组以确保该值是可能的值之一。[http://api.rubyonrails.org/classes/ActiveResource/Base.html](http://api.rubyonrails.org/classes/ActiveResource/Base.html)

Stackoverflow 帖子中的这个答案有一个 ActiveRecord 示例，用于将可能的值存储在单独的类中，然后验证 ActiveRecord 属性是否具有这些值之一：[Enumeration in Ruby on rails](https://stackoverflow.com/questions/2972618/enumeration-in-ruby-on-rails)

# java - android中高度参数的奇怪行为

> ID：11212940
> 
> 赞同：0
> 
> 时间：2012-06-26T17:38:24.917
> 
> 标签：java, android, android-layout

这是我在布局中所做的

```
 h = getWindowManager().getDefaultDisplay().getHeight(); 

Relative Layout = 60 dp = 90 using .getHeight()
Relative Layout = wrap content

Relative layout align bottom = 60 dp = 90 
```

现在我的宽度和高度变量显示高度为 800。

我正在做以下事情

```
h = h - 180 // 

for (int i = 0 ; i < 10 ; i++)
        {
            TextView tv = new TextView(this);
            LayoutParams params  = new RelativeLayout.LayoutParams(w/10, h/10);

            wordsLayout.addView(tv,params);
} 
```

我已经编写了代码，以便每个代码`textView`都直接位于第一个代码的下方。现在根据代码，减去相对布局的高度后的剩余高度应该使所有高度都`textviews`填满空白空间。

然而，这适用于 w/10 或宽度，但对于高度，它总是比空白空间占用更多的空间。我无法理解发生了什么。如何调整高度以使其仅填充空间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T09:18:32.657

我发现了问题，我错过了这样一个事实，即`title bar`屏幕也需要一些高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:09:05.500

您可以尝试使所有这些都以相同的重量加权：

```
LayoutParams params  = new RelativeLayout.LayoutParams(w/10, h/10,(float) 1.0); 
```

# ajax - 更改 src 属性是否被视为 Ajax？

> ID：11212941
> 
> 赞同：-1
> 
> 时间：2012-06-26T17:38:31.443
> 
> 标签：ajax

是否正在更改图像的 src 属性，因此加载另一个图像被认为是 Ajax？对不起，如果这是一个愚蠢的问题，但我很难理解 ajax 到底是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:41:58.907

不，那只是普通的 JS。Ajax 是使用对象从服务器发送和接收数据的*特定技术。*`XMLHttpRequest`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:48:03.993

Ajax 涉及执行以下操作的网页：

*   使用 Javascript 发出 HTTP 请求。
*   使用 Javascript 读取和解析来自该请求的响应。

另外，如果你想学究气的话，Ajax 中的“X”在技术上指的是“XML”：本来希望请求和响应都作为 XML 代码发送和接收，因为它很容易使用 DOM 在 Javascript 中编码和解析。然而，这些天来，技术性在很大程度上被忽略了，因为大多数人现在使用 JSON 来代替。不过，“Ajax”一词仍在使用中。

# java - 将相对布局放置在列表视图元素下方

> ID：11212944
> 
> 赞同：0
> 
> 时间：2012-06-26T17:38:36.310
> 
> 标签：java, android

```
RelativeLayout item = (RelativeLayout)findViewById(R.id.catalogParent);

View child = getLayoutInflater().inflate(R.layout.detailedcatalog, null);

RelativeLayout.LayoutParams layoutParams = new
RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
ViewGroup.LayoutParams.WRAP_CONTENT);

layoutParams.addRule(RelativeLayout.BELOW,view.getId());

item.addView(child, layoutParams); 
```

上面是在列表视图元素下方放置布局的代码。view.getId() 函数总是返回 -1。相对布局在运行时以编程方式膨胀。

```
lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {

@Override
public void onItemClick(AdapterView<?> arg0, View view,
int position, long arg3) {
...}} 
```

视图对象是从 onItemClick 函数中获得的。你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:04:16.277

所以我使用了 view.getLocationInWindow(location)，其中 location 是一个大小为 2 的 int 数组，它给出了 listview 元素在屏幕上的位置，然后我使用获得的坐标将相对布局相应地放置在屏幕上从位置。

# c++ - 终止受保护的防病毒进程

> ID：11212945
> 
> 赞同：18
> 
> 时间：2012-06-26T17:38:38.853
> 
> 标签：c++, security, winapi, kernel, driver

我正在使用 ESet 防病毒软件，最近它的 GUI 前端 egui.exe 挂起，占用了 50% 的 CPU（即一个内核的 100%）。令人惊讶的是，我发现我无法杀死它，即使启用了调试权限。

现在我很好奇：他们是如何实现这样的防御的，有没有办法在不编写内核驱动程序的情况下杀死它？

egui.exe 进程在普通用户（非管理员）下运行，我尝试使用管理帐户以各种方式杀死它。这是我尝试过的。

*   你不能从任务管理器中杀死它
*   你不能用 pskill 杀死它
*   您不能使用进程资源管理器杀死它，也不能将调试器附加到它

然后我开始了一些编程，发现：

*   在非特权用户下，您可以使用 PROSESS_TERMINATE 访问权限打开它，但对 TerminateProcess() 的实际调用失败并出现错误 5。

*   在管理员帐户下，您可以使用所需的任何访问权限打开它（当然在启用调试权限之后），但随后对 TerminateProcess()、GetKernelObjectSecurity()、SetKernelObjectSecurity() 的调用都失败并出现错误 5。

除了设置进程 DACL 之外，这肯定指向某种摆弄，因为如果 Terminate 不在 DACL 中，您将无法首先使用 PROCESS_TERMINATE 打开进程。他们实际上是在拦截 Win32 API 调用吗？如果是，那么如何？我已经有一段时间没有做低级系统编程了，所以请原谅我的无知。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T19:23:16.050

如果你能从 Joanna Rutkowska 那里得到“System Virginity Verifier”，这应该会给你一个很好的主意，他们*在哪里*实现了他们的钩子。类似的工具（包括[GMER](http://www.gmer.net/)）可用于调查系统内部发生的情况。这听起来可能很奇怪，但有时 AV 使用恶意软件中也常见的技术，即 rootkit 技术，以试图保护他们的软件不被愚弄。

听起来 SSDT-Hooking 和类似的技术已被用于“保护”该过程。我对此的第一枪是暂停该进程的所有线程。大多数此类保护机制（恶意软件和反恶意软件等）仅在终止尝试时触发。但是一旦你挂起所有线程（Process Explorer 可以这样做），调度程序将不再调度它们（导致没有 CPU 使用）。

SSDT（有时是 SDT）代表系统服务描述符表。是系统服务的功能地址表（系统服务的编号为索引）。当您`CreateFile`从 Win32 应用程序调用类似的东西时，它将最终以 NTDLL 调用[`NtCreateFile`](http://msdn.microsoft.com/en-us/library/bb432380.aspx)（==`ZwCreateFile`在 UM 中）。从那里开始，机制（自 Windows 2000/XP 以来发生了变化）在转换到内核模式 (KM) 的方式上会有所不同，也就是“环 0”。无论如何，`NtCreateFile`NTDLL中的实现大致做了以下事情：它将系统服务的索引移动到一个寄存器中，然后调用用于转换到KM的方法（`sysenter`较新的实现中的操作码）。到达 KM 后，处理程序将检查索引，从 SSDT 中找出函数地址，然后调用该函数。这里有更多对 UM 堆栈的检查（当您来自 UM 时），但这是简单的过程。所以当你在这个级别挂钩功能时，你可以阻止任何子系统，包括 Win32 子系统做事。然而，这有几个问题（你是其中最少的）。大多数实施者做得不好，这在​​恶意软件中很常见，例如索尼在 2005 年选择放入一些音频 CD 的 rootkit。因此，如果不冒险进行错误检查和几个独立的代码段钩住相同的代码，解钩几乎是不可能的SSDT 索引通常也会由于部分实施者的鲁莽而导致问题。

因此暂停线程似乎是一种可能性，尽管这个问题当然是开放式的（不知道 ESET 驱动程序的详细信息）。但是，如果它们也阻止了这种情况，您确实应该考虑更换产品。我敢打赌，此类产品对系统稳定性的不利影响超过了额外的“保护”，尽管它们 (ESET) 会告诉你其他情况。

另一种可能的方法是注入代码（例如通过 DLL）并让进程本身调用`ExitProcess`. 这也取决于他们的钩子是否允许这个漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T19:02:44.807

可能有不同的情况，比如：

1.  如果您试图杀死的进程的子线程正在等待某个内核对象，则在等待完成之前它不会被终止。这可能会导致应用程序停止响应。进程中的任何线程都被标记为终止——这是进程终止步骤之一；
2.  诸如防火墙、AV 和其他与安全相关的东西之类的智能软件总是安装内核挂钩（也称为挂钩 - 拦截在内核对象或软件组件之间传递的 API 调用、消息或事件）。他们总是有盾牌来抵御外力。

您收到 ERROR_ACCESS_DENIED。我不知道您经历了哪些步骤，但我可以建议您这样做：

1.  打开任务管理器并转到进程选项卡；
2.  右键单击egui.exe，然后单击属性；
3.  单击安全选项卡，然后单击编辑。
4.  在“权限”窗口中检查您的凭据；
5.  添加用户和/或设置完整权限。

你可以玩弄它，因为即使你对你的应用程序进行分层（我想这就是你试图做的事情），它也会使用你帐户的凭据。

# jquery - 尝试使用 jquery 遍历 JSON 结构

> ID：11212950
> 
> 赞同：1
> 
> 时间：2012-06-26T17:39:05.120
> 
> 标签：jquery, json

我是 jquery 和 JSON 的新手。我有以下 JSON 结构。

```
{
   "address":{
      "suburb":[
         "HACKHAM WEST",
         "HUNTFIELD HEIGHTS",
         "ONKAPARINGA HILLS",
         "m"
      ],
      "state":"SA"
   }
} 
```

所以基本上以上是对此的回应：

```
$.ajax({
    type:'POST',
    url: 'getAddress.php',
    data:postCode='+postCode',
    success: function(response) {
        alert(response)
    }
}); 
```

所以，我想要得到的是一个包含状态的变量和一个包含郊区的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T17:43:59.873

检查您是否有有效的 Ajax 请求：

```
$.ajax({
    type: "POST",
    url: "getAddress.php",
    data: {
        postCode : postCode          // data as object is preferrable
    },
    dataType: "json",                // to parse response as JSON automatically
    success: function(response) {
        var state = response.address.state;
        var suburbs = response.address.suburb;
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T17:43:14.383

这应该可以解决问题

```
$.ajax({type:'POST', 
    url: 'getAddress.php', 
    dataType: 'json',
    data:'postCode='+postCode, 
    success: function(response) {
        var state = response.address.state;
        var suburbs = response.address.suburb;   
    }
}); 
```

添加`dataType:'json'`并修复了`data`参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:44:44.207

你需要解析你得到的 JSON。 `$.ajax`可以为您做到这一点。

```
$.ajax({
    type:'POST',
    url: 'getAddress.php',
    data: 'postCode='+postCode, // make sure this line is correct
    dataType: 'json', // this tells jQuery to parse it for you
    success: function(response) {
        var state = response.address.state;
        var suburbs = response.address.suburb;
    }
}); 
```

# iphone - 检查程序是否陷入循环

> ID：11212956
> 
> 赞同：-1
> 
> 时间：2012-06-26T17:39:31.677
> 
> 标签：iphone, objective-c, loops, cocos2d-iphone

好的...所以我在一个班级中随机生成一个关卡，然后将其传递给游戏。

问题是，当我生成关卡时，它有时会陷入循环（由于我在生成关卡时所做的检查）。我试图通过修改代码来减少冻结次数。但如果出现这种情况，它仍然会卡在 1~2% 左右。

在 RandomLevel 我有这个：

```
-(void)positionMonsters:(int)nrM{

int nrH=[randomHero count];

int rdm;
CGPoint randPt;
BOOL is;

while ([randomMonsters count]!=nrM) {
    rdm=arc4random()%(nrH-1);

    if (rdm!=nrH-1) {
    randPt=random_on_line([[randomHero objectAtIndex:rdm]position], [[randomHero objectAtIndex:rdm+1]position ], CCRANDOM_0_1());
    }else{
    randPt=random_on_line([[randomHero objectAtIndex:rdm]position], [[randomHero objectAtIndex:0]position ], CCRANDOM_0_1());
    }

    is=NO;
    for (Monster *mob in randomMonsters) {
        if (ccpFuzzyEqual(randPt, mob.position, 40)) {
            is=YES;
            break;
        }
    }

    if (!is) {
        Monster *mob=[[Monster alloc]initWithPosition:randPt];
        [randomMonsters addObject:mob];
    }

} 
```

}

让我带你看一下代码：

所以我得到了英雄的数量（有多少），只要没有我想做的那么多怪物，我就在两个连续的英雄之间选择一条随机线并在该线上生成一个点，然后我检查是否生成的点接近任何其他点（我不希望重叠）..如果是，那么它会再次启动循环，如果不是，我将它添加到随机小怪

当我检查暴徒是否与另一个重叠时它会卡住......但我不应该因为英雄总是至少相距 200 像素，而我只制作了少数暴徒。

在我的 GameScene 中，我这样做：

```
-(id)init{
//stuff stuff
RandomLevel *rlv=[[RandomLevel alloc]initWithHeros:6 andMonsters:6]; *****

heros=rlv.randomHeros;
mobs=rlv.randomMonsters;
} 
```

我想要的是停止/取消`*****`线路并尝试再次获得随机水平......正如我所说......这只发生在1％的情况下，所以如果游戏“冻结”就没什么大不了了" 每周 2 秒 .. 或什么的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:44:44.833

如果处理时间超过 0.5 秒，这样的事情就会脱离你的循环。当然，您会根据您的具体情况对其进行修改。

```
NSDate* myTime= [NSDate date];
while (true)
{
   ...

   if ([myTime timeIntervalSinceNow] < -0.5])
   {
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T18:04:06.420

`performSelector:withDelay`如果在它结束之前，您可以在循环中使用和取消它吗？

# ruby-on-rails - capybara / rspec - 有些东西是零......但它是什么？

> ID：11212958
> 
> 赞同：2
> 
> 时间：2012-06-26T17:39:42.223
> 
> 标签：ruby-on-rails, rspec, capybara

```
 it "should submit form", :driver => :webkit do
    visit '/things/new'
    page.should have_content('Login')
    fill_in 'user_login', with: @thing.email
    fill_in 'user_comment', with: @thing.comment
    click_button 'log_in'
    save_and_open_page
    page.should have_content('Thanks!')  
  end 
```

浏览器中的响应[内部服务器错误]：

```
Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

我猜 things_controller 或 things/_form 中的某些东西出乎意料地为零，但我似乎无法确定它是什么。该页面在开发中运行良好（使用填充的数据库）

有没有办法获得更有意义的反馈？

还是我走错了路？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T18:06:38.277

您可以做几件事。

*   查看您的日志/test.log
*   禁用 whiny nils 并查看是否弹出真正的堆栈跟踪
*   使用一些内省，如调试器或撬动

或锤法：

*   将一大堆 puts/Rails.logger.debug 语句放入您的代码中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:12:10.960

检查您的 create 函数是否没有手动设置 createdf 对象 ID，并且与该对象的任何关系都正确填写了它们的字段。

即编写检查这些的测试。

您是否使用不同的数据库类型？

# javascript - 使下拉菜单出现在悬停时超时

> ID：11212961
> 
> 赞同：0
> 
> 时间：2012-06-26T17:39:47.353
> 
> 标签：javascript, jquery, drop-down-menu, navigation, timeout

我最近做了这个简单的导航，你有几个有下拉菜单的链接。首先它仅在 CSS3 中，但后来我决定添加一些 jQuery 以使下拉列表在一定时间后出现。（大部分 jQuery 代码是基于另一个线程中给出的答案）

基本上，我的问题是我无法定位正确的元素悬停，因此当我悬停一个 li 元素时，我的所有下拉列表都会显示。我尝试尽可能多地调整它，但我找不到合适的代码。

任何回复都非常感谢！

我的菜单如下所示：

```
<ul id="generale">
                <li><a href="#">Item 1</a></li>
                <li><a href="#">Item 2</a></li>
                <li>
                    <a href="#">Item 3</a>
                    <ul>
                        <li><a href="#">Subitem 1</a></li>
                        <li><a href="#">Subitem 2</a></li>
                        <li><a href="#">Subitem 3</a></li>
                        <li><a href="#">Subitem 4</a></li>
                        <li><a href="#">Subitem 5</a></li>
                    </ul>     
                </li>
                <li>
                    <a href="#">Item 4</a>
                    <ul>
                        <li><a href="#">Subitem 1</a></li>
                        <li><a href="#">Subitem 2</a></li>
                        <li><a href="#">Subitem 3</a></li>
                        <li><a href="#">Subitem 4</a></li>
                        <li><a href="#">Subitem 5</a></li>
                    </ul>  
                </li>
                <li><a href="#">Item 5</a></li>
                <li><a href="#">Item 6</a></li>
            </ul> 
```

和我的 jQuery：

```
var navTimers = [];  
            $( "#generale > li" ).hover(
                function () {  
                    var id = jQuery.data( this );  
                    var $this = $( this ); 

                    navTimers[id] = setTimeout( function() {  
                        $('#generale ul').fadeIn(200); 
                        navTimers[id] = "";  
                    }, 300 );  
                },  
                function () {  
                    var id = jQuery.data( this );  
                    if ( navTimers[id] != "" ) {  
                        clearTimeout( navTimers[id] );  
                    } else {  
                        $('#generale ul').fadeOut(200);
                    }  
                }  
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:44:17.737

您的 fadeIn 和 fadeOut 函数当前针对元素`ul`内的所有 s 。`#generale`

尝试改变

```
$('#generale ul').fadeIn(200); 
```

到

```
$this.find('ul').fadeIn(200); 
```

和

```
$('#generale ul').fadeOut(200); 
```

到

```
$this.find('ul').fadeOut(200); // you'll also have to define $this = $(this) 
```

# nosql - Cassandra 的列族中有多少行会影响性能？

> ID：11212962
> 
> 赞同：3
> 
> 时间：2012-06-26T17:39:51.600
> 
> 标签：nosql, cassandra, data-modeling

我在一个大型博客处理项目中工作`apache Cassandra`，但我想知道列族中是否有太多行。这会使我的查询变慢吗？

在我的数据中，我们每天有大约 1000 亿行日志

如果我将它们分成许多列族（如 20120627 之类的日模式）更好？

任何人都可以给我一个建议来建模这些数据？

我打算只创建这样的列族：

```
CREATE TABLE data (
  KEY text PRIMARY KEY
) WITH
  comment='log' AND
  comparator=text 
```

我想以时间戳处理数据（前处理：10:20 --> 10:30 数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:23:47.123

我认为您不必创建许多列族，而是使用复合键并使用列。

密钥的格式可以是（一天中的日期：日志的时间戳）或（一天中的小时：日志的时间戳）或（一天中的分钟：日志的时间戳）

然后，为了防止与具有相同时间戳的日志发生冲突，您可以使用超级列。

您可以获取有关 cassandra 限制的更多信息：[http ://wiki.apache.org/cassandra/Cas​​sandraLimitations](http://wiki.apache.org/cassandra/CassandraLimitations)

# linux - linux驱动程序的代码覆盖工具

> ID：11212964
> 
> 赞同：3
> 
> 时间：2012-06-26T17:40:18.060
> 
> 标签：linux, code-coverage, linux-device-driver

我正在寻找可以为 linux 驱动程序提供功能和条件覆盖的代码覆盖工具。

该工具应生成 html 输出。到目前为止，我一直在为 C++ 应用程序使用靶心。但我找不到任何适用于 linux 内核模块的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T21:36:04.200

使用我们的[源代码检测技术进行测试覆盖和分析](http://www.semanticdesigns.com/Company/Publications/TestCoverage.pdf)，我们在大约十年前使用我们的 [C 分析器](http://www.semanticdesigns.com/Products/TestCoverage/CProfiler.html)工具分析了 Linux 内核。存在相应的[C 测试覆盖率](http://www.semanticdesigns.com/Products/TestCoverage/CTestCoverage.html)。

这样的检测为您提供了非常低开销的检测，适用于驱动程序，而不是完全控制检测的内容（好的，使用驱动程序而不是内核）以及控制如何以及何时收集测试覆盖率数据（收集在内核缓冲区和通过虚拟驱动程序访问）。

导出的覆盖数据可以叠加在源代码上，让程序员直接查看所覆盖的内容，或者可以导出为 XML 文件，以便轻松地重新格式化为 HTML。

# php - 为什么使用 WHERE 子句时 BindValue 不会产生结果？

> ID：11212965
> 
> 赞同：1
> 
> 时间：2012-06-26T17:40:21.500
> 
> 标签：php, pdo, prepared-statement, bindvalue

我不知道我在这里做错了什么。如果我在此查询中省略 WHERE 子句，服务器将返回数据库中的所有行。所以我知道那部分有效。如果我使用 WHERE CLAUSE 即

WHERE name='$name' AND loc='$loc' -

我得到了结果，但是当我使用 bindValue 或者如果我在执行命令中传递活页夹时，我没有收到错误，也没有数据

```
 $stmt = "SELECT * FROM table1 LEFT JOIN table2 ON table1.ID=table2.fkID".
            " WHERE name = :name AND loc = :loc";

    $binder = array(':name' => $name, ':loc' => $loc); 
```

如果接受这些参数的函数

```
public function fetchData($stmt, $binder = array())
    {
        $DB = new PDO(........);
        $STMT =  $DB->prepare($stmt);

        foreach ($binder as $key => $value):
            $k = (is_numeric($key)) ? $key + 1 : $key;
            if (is_int($value)):
                $STMT->bindValue($k, (int) $value, PDO::PARAM_INT);
            else:
                $STMT->bindValue($k, $value, PDO::PARAM_STR);
            endif;
        endforeach;

        try {
            $STMT->execute();
            return $STMT->fetchAll(PDO::FETCH_ASSOC);
        }
        catch (PDOException $e) {
            die($this->error = $e->getMessage());
        } 
```

我在这里做错了什么。对不起，伙计们，我搜索了所有类似的问题，但我没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:24:36.897

我通过再次重写我的代码来解决这个问题：

```
foreach ($binder as $key => $value):
            $k = (is_numeric($key)) ? $key + 1 : $key;
            $v = $value;
            if (is_int($v)):
                $STMT->bindValue($k, (int) $v, PDO::PARAM_INT);
            else:
                $STMT->bindValue($k, $v, PDO::PARAM_STR);
            endif;
        endforeach; 
```

注意 foreach 语句中使用的 $v 而不是原来的 $value；

# database - 根据要突出显示的段落组编号列表突出显示 MS-Word 文档中的段落？

> ID：11212966
> 
> 赞同：0
> 
> 时间：2012-06-26T17:40:23.357
> 
> 标签：database, excel, ms-word, reporting, highlighting

我有几页的 MS-Word 文档，其中每几段都有一个新的段落编号。请参见下面的示例。另外，在 MS-Excel 或 CSV 文件中，我有两列信息——段落编号以及是否应突出显示：

```
Paragraph Number, Highlight?

1, True
2, False
3, True 
```

**在 Word 文档中突出显示的上面的控制列表中列出为“真”的段落组的最简单方法是什么？**

```
All about fruits

Apples

Paragraph group 1

Each person shall eat one apple a day to keep the doctor away.

Note: Apples are a red fruit.

Apples have been growing for a long time. Sometimes they fall off the tree by themselves. Sometimes you have to pick them.

Pears

Paragraph group 2

Pears shall be sliced before being eaten.

Pears are usually green, and better when a little soft.

Note: Pears have a distinctive shape

Tomatoes

Paragraph group 3

Tomatoes shall be washed before being eaten.

Note: Tomatoes really are a fruit, not a vegetable.

Or rather, vegetable is not a scientific term. It is a common term. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:01:51.980

下面的示例使用 Word VBA 进入 Excel 并获取工作表数据，然后用于定义文档中突出显示的范围。为了使此代码正常工作，请确保引用**Microsoft Excel 14.0 Object Library**。

![Microsoft Excel 14.0 对象库](../Images/8e5208d819b4c5aac737917dc5805058.png)

```
Public Sub HighlightParaGroups()

Dim xlApp As Excel.Application
Dim xlWB As Excel.Workbook
Dim xlWS As Excel.Worksheet
Dim x As Integer
Dim r As Integer 'Total rows of data
Dim rngStartPoint As Range
Dim rngEndPoint As Range

Set xlApp = CreateObject("Excel.Application")
'Hard coded path to Excel worksheet
Set xlWB = xlApp.Workbooks.Open("C:\Users\Joe\Desktop\SO Data Test.xlsx")
Set xlWS = xlApp.Worksheets(1)

'This is the hard coded amount of rows for the example given.
'If row amount will vary, write a sub to detect range of data
r = 3
ActiveDocument.Select

For x = 1 To r
    Debug.Print xlWS.Cells(x, 2)
    If xlWS.Cells(x, 2) = "True" Then 'test for values to highlight
        Set rngStartPoint = DefineHighlightRange(x, True)
        If x + 1 <= r Then
            x = x + 1
            Set rngEndPoint = DefineHighlightRange(x, False)
            x = x - 1
        Else 'In case last paragraph needs to be highlighted
            ActiveDocument.Characters.Last.Select
            Selection.Collapse
            Set rngEndPoint = Selection.Range
        End If
        rngStartPoint.SetRange Start:=rngStartPoint.Start, End:=rngEndPoint.Start
        rngStartPoint.HighlightColorIndex = wdYellow
    End If
Next

xlWB.Close False ' close the workbook without saving
xlApp.Quit ' close the Excel application
Set xlWB = Nothing
Set xlApp = Nothing

End Sub 
```

这是用于定义范围的函数：

```
Public Function DefineHighlightRange(x As Integer, DecisionFlag As Boolean) As Range

'DecisionFlag determines if the selection needs to be 
'repositioned for the start point of the range
Selection.Find.Text = "Paragraph group " & x
Selection.Find.Execute
Selection.HomeKey
If DecisionFlag = True Then
    Selection.MoveDown Unit:=wdLine, Count:=1
End If
Set DefineHighlightRange = Selection.Range

End Function 
```

希望这可以帮助。

# javascript - Javascript循环遍历对象中的对象

> ID：11212971
> 
> 赞同：1
> 
> 时间：2012-06-26T17:40:31.193
> 
> 标签：javascript, object, loops

我试图只`word`从`newEntry`对象的每个新实例内部检索。每次我添加一个新单词时它都会显示在控制台中，但当我将它分配给`.innerHTML`. 任何人都可以帮忙吗？

完整代码：

```
 <style type="text/css" media="screen">
        #output { height: auto;}
    </style>

    <script type="text/javascript">

        // Array to contain words
        var wordList = Array();

        // word list constructor
        function addWord(word) {
            this.word = word;
            this.description = "a description of the word";
            this.entryDate = "01.02.2012";
            this.userName = "John Doe";

            var newEntry = {
                word: word,
                description: description,
                entryDate: entryDate,
                userName: userName 
            };

            wordList[wordList.length] = newEntry;           
        };

        // collect data from form
        function getFormData() {
            var results = document.getElementById("textbox").value;
            addWord(results);

            var data = '<ul>';
            var numObjects = "Number of words = " + wordList.length; 

            for (var x in wordList) {
                var wordSet = wordList[x];
                for (var item in wordSet.word[x]) {
                    console.log(wordSet.word);                   
                    data += "<li><a href='#'>" + wordSet.word + "</a></li>";    

                };
            };
            data += "</ul>";
            document.getElementById("Objects").innerHTML = numObjects;  
            document.getElementById("Output").innerHTML = data;                 
            // console.log(wordList);  

        };

    </script>

</head>

<body>

    <form id="form_id" name="form_name" action="" method="post">
        <p><label for="text">Enter words:<br/></label>
        <input type="textarea" id="textbox" />
        <input type="button" value="Go" onclick="getFormData()"
    </form>

    <ul id="Output"></ul>   
    <div id="Objects"></div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:44:38.827

您每次都在覆盖“输出”div 的内容。你可以尝试改变

```
 document.getElementById("Output").innerHTML = wordSet.word; 
```

到

```
 document.getElementById("Output").innerHTML += wordSet.word; 
```

然后您应该会看到正确的输出（当然，没有样式或换行符）。

*** 进一步更新 ***

你正在以一些时髦的方式使用你的数组。您可能只想将数组声明为文字，然后使用 push 方法将条目附加到数组中。对于遍历数组，您可能应该使用标准 for 循环 [例如：for (var i = 0; i < arr.length; ++i) 类型的语法，或数组 forEach 语法（如果您的浏览器支持）。for in 将遍历对象的所有属性，虽然在技术上对于数组是安全的，但在某种程度上是一种不建议的做法。

此外，如果您只是要将元素包装在 JSON 中并将它们填充到列表中，那么实际上没有理由将属性分配给“this”。

我会推荐如下内容：

```
 // Array to contain words
        var wordList = [];

        // append word to word list
        function addWord(word) {
            var newEntry = {
                word: word,
                description: "a description of the word",
                entryDate: "01.02.2012",
                userName: "John Doe" 
            };

            wordList.push(newEntry);           
        }; 
```

然后在与您的单词列表交互时，您会说：

```
for (var i = 0; i < wordList.length; ++i) {
    var wordEntry = wordList[i];
...
} 
```

啦啦：

```
/ collect data from form
            function getFormData() {
                var results = document.getElementById("textbox").value;
                addWord(results);

                var data = '<ul>';

                for (var i = 0; i < wordList.length; ++i) {
                    var wordEntry = wordList[i];
                    // I removed the inner for loop here, as you were iterating over all
                    // the proerties of the word string. This would loop for all the
                    // individual characters, as well as all the methods on the string
                    // (e.g. charAt, indexOf, etc.) It could have been a source of
                    // problems for you, and given the original following line, would 
                    // have shown duplicate entries in the list.

                    data += "<li><a href='#'>" + wordEntry.word + "</a></li>";                     
                };
                data += "</ul>";
                document.getElementById("Output").innerHTML = data;
            }; 
```

# css - CSS背景必须是其父级的溢出

> ID：11212974
> 
> 赞同：0
> 
> 时间：2012-06-26T17:40:32.810
> 
> 标签：css

我希望背景图像从其父级溢出。解决方案必须是**CSS only**。

**我想：**

![我要这个](../Images/049f35322dbe30c08a2f94b55d367398.png)

**但我有：** [小提琴](http://jsfiddle.net/TvWM4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T17:46:16.753

使用负下边距：

```
.mahboobs-link a{
    text-align:left;
    color:#b76c00;
    display:block;
    width:87px;
    height:53px;
    line-height:32px;
    padding-left:10px;
    position:relative;
    z-index:11;
    margin-bottom: -21px;
} 
```

[http://jsfiddle.net/Guffa/TvWM4/2/](http://jsfiddle.net/Guffa/TvWM4/2/)

# javascript - AjaxMethod“类”是未定义的错误

> ID：11212976
> 
> 赞同：0
> 
> 时间：2012-06-26T17:40:51.343
> 
> 标签：javascript, asp.net, ajax

我有一个旧项目 asp.net，它使用 Ajax.AjaxMethod() 从 Javascript 调用服务器端代码。它以前工作得很好（我的意思是几年前），但现在它已经停止工作了。

这是我背后的 C# 代码：

```
public partial class Signup : System.Web.UI.Page{
    protected void Page_Load(object sender, EventArgs e){
        Ajax.Utility.RegisterTypeForAjax(typeof(Signup));
    }

    [Ajax.AjaxMethod()]
    public DataTable fillStateDdl(int countryid)
    {
      objState = new MyClass.State();
      DataTable dtState = new DataTable();
      objState.CountryId = Convert.ToInt32(countryid);
      dtState = objState.GetStateCountry().Tables[0];
      return dtState;
    }
} 
```

这是我的 JavaScript 代码：

```
function fillStates(countryid)
{
  var cntryid=countryid.options[countryid.selectedIndex].value;
  var response=Signup.fillStateDdl(cntryid);

  var states=response.value;
} 
```

在 javascript 中，我收到“Microsoft JScript 错误：'Signup' 未定义”错误消息。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:09:28.110

你最好分开你的 AjaxMethod。

```
public partial class Signup : System.Web.UI.Page{
    protected void Page_Load(object sender, EventArgs e){
        Ajax.Utility.RegisterTypeForAjax(typeof(YourAjaxClass));
    }
}

public class YourAjaxClass {

    [Ajax.AjaxMethod()]
    public DataTable fillStateDdl(int countryid)
    {
      objState = new MyClass.State();
      DataTable dtState = new DataTable();
      objState.CountryId = Convert.ToInt32(countryid);
      dtState = objState.GetStateCountry().Tables[0];
      return dtState;
    }
} 
```

您不能从 System.Web.Ui.Page 继承的 RegisterTypeForAjax 对象。它行不通。

然后你可以从javascript调用它。

```
function fillStates(countryid)
{
  var cntryid=countryid.options[countryid.selectedIndex].value;
  var response=YourAjaxClass.fillStateDdl(cntryid);

  var states=response.value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:53:33.203

我认为您缺少 ajax 的 http 处理程序。在 system.web 下的 web.config 中添加这些

```
<system.web>
<-- 

Other configuration

 -->

<httpHandlers>
      <add verb="POST,GET" path="*.ashx" type="Ajax.AjaxHandlerFactory,Ajax"/>
</httpHandlers>

</system.web> 
```

# node.js - 修改 connect.static 响应

> ID：11212983
> 
> 赞同：0
> 
> 时间：2012-06-26T17:41:29.437
> 
> 标签：node.js, connect

我想要 的功能`connect.static`，但我想将代码注入任何提供的 HTML 和 JavaScript 文件。

1.  我`connect.static`可以修改它提供的数据吗？
2.  有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:45:07.000

connect.static 不是这个的正确选择。静态中间件专门用于直接从磁盘提供静态内容。

看看 connect-assetmanager (https://github.com/mape/connect-assetmanager)，它有一个 serveModify 钩子，可以满足你的需要。

# ruby-on-rails - Rails - 通过 API 添加/发布新记录到应用程序

> ID：11212984
> 
> 赞同：0
> 
> 时间：2012-06-26T17:41:32.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, api

我正在尝试向我的应用程序添加一个公共 API，以允许用户通过 API 调用将项目添加到我的应用程序中。

虽然我有点困惑......

到目前为止，我有这个输出一个很棒的 xml 页面，我们所有的模型数据都非常完美....

```
def index   
  @events = Event.all
  respond_to do |format|
    format.html 
    format.xml  { render :xml => @events }
    format.json { render :json => @events }
  end
end 
```

所以我假设我可以将相同的 respond_to 块添加到 CREATE 或 NEW 操作中（哪个？）并在那里获得某种形式的 API 功能？？？但我对整个过程如何运作感到困惑......

例如，如果我的 Event 模型只有一个字段 => name:string

我如何能够通过网络服务添加记录？

```
 ???? ==> curl http://localhost:3000/events[??????add??????] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:26:34.780

[请参阅这篇](http://bit.ly/KKKen2)关于使用 cURL 测试 REST 应用程序的帖子。

报价：

```
-X [action]: Allows you to specify an HTTP action such as GET, POST, PUT or DELETE.
Example:

curl -X DELETE http://localhost:3000/books/1

-d [parameter]: Lets you set variables as if they were POSTed in a form to the URL. Note that this automatically makes the request a POST HTTP action type (no -X necessary).
Example:

curl -d "book[title]=Test" -d "book[copyright]=1998"
http://localhost:3000/books

-H [header]: Gives you the option of setting an HTTP header such as Content-Type or Accept. This is particularly useful for requesting text/xml as the Accept type.
Example:

curl -H "Accept: text/xml"
http://localhost:3000/books/sections/1 
```

# javascript - ExtJS 4.1 - 如何覆盖所有字段

> ID：11212987
> 
> 赞同：0
> 
> 时间：2012-06-26T17:41:37.753
> 
> 标签：javascript, extjs4, overriding, extjs4.1

我想将插件应用于库**ExtJS 4.1中的****所有字段**（数字字段*、文本字段、日期字段等*） 。有谁知道我该怎么做？

 **据我所知，所有字段都是从**BaseField**扩展的。所以我尝试了这个；但它根本没有用。如果有人可以指导我，我会很高兴。

提前致谢。

```
Ext.form.BaseField.override({
     plugins    : [ 'clearbutton' ]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:13:18.843

也许这种语法会更好用？

```
Ext.override(Ext.form.field.Base, {
   plugins    : [ 'clearbutton' ]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-17T16:07:33.367

尝试覆盖 initComponent 方法：

```
Ext.form.BaseField.override({
 initComponent : function(){
   var me = this;
   me.plugins = Ext.Array.merge(me.plugins || [],  [ 'clearbutton' ]);
   me.callParent();
 }
}); 
```**

# c# - 如何从 GridView 中删除时间戳

> ID：11212996
> 
> 赞同：2
> 
> 时间：2012-06-26T17:42:13.527
> 
> 标签：c#, .net, visual-studio-2010, gridview, oracle11g

我使用来自 datepicker 的日期填充一个文本框`Calendar1.SelectedDate.ToShortDateString();`，之后我使用如下所示的查询存储在 Oracle 数据库中

```
string query3 = "insert into leave_module1 values(:srno,:name,:desig,:tol,:compdates,:fd,:td,:nod,:da,:ds,st.nextval)";
OracleCommand cmd = new OracleCommand(query3, con);
try
{
    cmd.Parameters.Add(":srno", OracleType.Number, 8).Value = DropDownList2.Text;
    cmd.Parameters.Add(":name", OracleType.VarChar, 50).Value = TextBox8.Text;
    cmd.Parameters.Add(":desig", OracleType.VarChar, 30).Value = TextBox10.Text;
    cmd.Parameters.Add(":tol", OracleType.VarChar, 10).Value = DropDownList1.Text;
    cmd.Parameters.Add(":compdates", OracleType.VarChar, 30).Value = TextBox9.Text;
    cmd.Parameters.Add(":fd", OracleType.DateTime).Value = TextBox3.Text;
    cmd.Parameters.Add(":td", OracleType.DateTime).Value = TextBox4.Text;
    cmd.Parameters.Add(":nod", OracleType.Number, 3).Value = TextBox5.Text;
    cmd.Parameters.Add(":da", OracleType.DateTime).Value = TextBox11.Text;
    cmd.Parameters.Add(":ds", OracleType.DateTime).Value = TextBox7.Text;
    cmd.ExecuteNonQuery();
    ClientScript.RegisterStartupScript(Page.GetType(), "validation", "<script language='javascript'>alert('The Data has been added');window.location='Default2.aspx';</script>;");
}
catch
{
    Label13.Visible = true;
} 
```

但是当我用存储的日期在另一个页面中填充 GridView 时，即使我没有输入时间戳，我也会得到一个时间戳。请告诉我如何从显示中删除时间戳！

提前致谢

这就是我填充gridview的方式

```
protected void Button3_Click(object sender, EventArgs e)
{
    string v = System.Configuration.ConfigurationManager.ConnectionStrings["harish"].ConnectionString;
    con = new OracleConnection(v);
    con.Open();
    cmd = new OracleCommand("select *  from leave_module1 where srno='"+DropDownList1.Text+"'", con);
    dr = cmd.ExecuteReader();

    GridView1.DataSource = dr;
    GridView1.DataBind();
    con.Close();
    dr.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T17:54:14.210

因此，您正在查询数据库中的所有列，然后自动生成这些列。这就是显示所有列的原因。解决这个问题

1.  调整查询以仅返回实际需要的列
2.  禁用自动生成列并自己定义列。

您很少想使用自动生成的任何东西，因为您放松了调用控制来自定义行为和输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:45:14.393

格式化查询中的数据或后面的代码（我会在查询中执行）以删除时间戳并仅显示数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T17:52:33.523

您在代码中指定的类型是 DateTime，因此无论您是否指定时间组件，都会有一个时间组件。如果 Oracle 具有 Date 类型（我不是 Oracle 人，但我在当前项目中与 Oracle 交互）并且您有权进行更改，那么这是获得您所要求的最简单的方法。否则，每次使用数据剥离时间分量时，您都必须指定 .ToShortDateString() （或等效项）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T20:41:12.200

转到 GridView 的编辑列，将显示字段对话框。选择要删除时间部分的日期字段，然后在 DataFormatString 属性中输入 {0:d}；单击确定。当您运行您的应用程序时，您的 gridview 列将仅显示日期部分。这对我有用。在该过程中转换为日期不起作用，并且在 RowDataBound() 处理程序上进行格式化很麻烦。

![在此处输入图像描述](../Images/8d690def9a76bd6c684d5c107963fa97.png)