# StackOverflow 问答 10987000-10987999

# javascript - JSON.Parse 正在复制 ID 字段

> ID：10987010
> 
> 赞同：0
> 
> 时间：2012-06-11T20:21:53.443
> 
> 标签：javascript, jquery, json

我正在从 Web 服务传递以下 JSON：

```
{
"selList": [
    {
        "id": "selBaMbReasonExempt",
        "value": "Confidential Contract|Customer in migration to automation|Missing contract|Non-English contract|Non-Standard way of ordering|Other (please specify in comments)|",
        "html": "Confidential Contract|Customer in migration to automation|Missing contract|Non-English contract|Non-Standard way of ordering|Other (please specify in comments)|",
        "key": null,
        "optRate": null,
        "optDate": null
    },
    {
        "id": "selBaMbInvoiceCurrency",
        "value": "BRL|",
        "html": null,
        "key": "BR|",
        "optRate": "0.57833555028627600000|",
        "optDate": "01-Feb-2012"
    },
    {
        "id": "selBaMbContractCurrency",
        "value": "BRL|USD|",
        "html": null,
        "key": "BR|BR|",
        "optRate": "0.57833555028627600000|1.00000000000000000000|",
        "optDate": "01-Feb-2012"
    }
    ]
} 
```

```
function getSelLists() {
    var wkError = false;
    var serverResponse;
    var ss;
    MbrtUtil.disableAjaxNotifier();
    jQuery.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        url: "Webservices/TemplateBA.asmx/GetSelLists",
        data: "{'noOp': 'noOp'}",
        success: function (msg, status) {
            serverResponse = JSON.parse(msg);
            ss = msg;
        },
        error: function (request, status, error) {
            wkError = true;
        },
        complete: function (msg) {
            if (wkError == true) {
                alert('Error in getSelLists');
            }
            else {
                MbrtUtil.processServerData(serverResponse);
                if ('sdkList' in serverResponse) {
                    alert('selList is in serverResponse');
                    var selList = serverResponse.sdkList;
                    wklen = selList.length;
                    for (var i = 0; i < wklen; i++) {
                        //  if (selList[i].id == 'selBaCsInvoiceCountry') { MODba.invoiceCountryList = selList[i]; }
                        //   if (selList[i].id = 'selBaCsPaymentTerms') { MODba.paymentTermsList = selList[i]; }
                        if (selList[i].id = 'selBaMbInvoiceCurrency') { MODba.invoiceCurrencyList = selList[i]; }
                        if (selList[i].id = 'selBaMbContractCurrency') { MODba.contractCurrencyList = selList[i]; }

                        if (selList[i].id == 'selBaMbReasonExempt') {
                            alert('exempt list');
                            MODba.reasonExempt = selList[i];
                            if (wkOpt == 2) {
                                buildReasonExemptList();
                            }
                        }
                    }
                    var valList = MODba.reasonExempt.value.split("|");  //delete this
                    if (wkOpt == 1) {
                        buildRequestorLists();
                    }
                }
                MbrtUtil.enableAjaxNotifier();
            }
        }
    });
} 
```

我通过 JSONLint 检查了语法。我有一个对 web 服务的 jQuery ajax 调用。完成后，消息看起来像上面显示的代码。运行 serverResponse = JSON.parse(msg) 后，serverResponse 包含三个 selList 对象。除了所有三个的“id”字段包含“selBaMbContractCurrency”之外，一切看起来都很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:34:56.810

比较时使用双“=”：

```
if (selList[i].id == 'selBaMbContractCurrency') 
```

在这种情况下，最好使用`switch`：

```
for (var i = 0; i < wklen; i++) {
     switch(selList[i].id){
         case 'selBaMbInvoiceCurrency':
             MODba.invoiceCurrencyList = selList[i];
             break;
         case 'selBaMbContractCurrency':
             MODba.contractCurrencyList = selList[i];
             break;
         case 'selBaMbReasonExempt':
             alert('exempt list');
             MODba.reasonExempt = selList[i];
             if (wkOpt == 2) {
                 buildReasonExemptList();
             }
             break;
     }
} 
```

它更具可读性和明显性。

# sql-server - MS SQL 中的案例函数

> ID：10987012
> 
> 赞同：1
> 
> 时间：2012-06-11T20:21:55.290
> 
> 标签：sql-server, sql-server-2008

我有一个格式表

```
 id name flag
  ----------------
    11 Jack  1
    11 Jill  2
    23 Joe   1
    23 John  2
    23 Sam   1
    46 White 2
    46 Dan   2
    57 Dave  1 
```

我正在尝试返回格式表（基于特定 id 的标志），例如

```
 id name_1 name_2
   ------------------
    11 Jack   Jill
    23 Joe    John
    23 Sam    John
    46 NULL   White
    46 NULL   Dan
    57 Dave   NULL 
```

我尝试了这个查询，但它没有给出预期的结果。

```
select id,
case flag when 1 then name end as name_1,
case flag when 2 then name end as name_2
from temp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:25:46.443

我认为您将无法为此使用案例。但是，这应该可以解决问题：

```
select t1.id, t1.name as name_1, t2.name as name_2
from temp t1
    inner join temp t2 on t1.id = t2.id and t1.flag = 1 and t2.flag = 2 
```

我不确定你是否可以从同一个查询中获得部分结果，所以你总是可以做一个联合来找到这些......

```
select t1.id, t1.name as name_1, t2.name as name_2
from temp t1
    inner join temp t2 on t1.id = t2.id and t1.flag = 1 and t2.flag = 2

union

select t1.id, t1.name as name_1, t2.name as name_2
from temp t1
    left join temp t2 on t1.id = t2.id and t1.flag = 1 and t2.flag = 2
where t2.id is null

union

select t2.id, t1.name as name_1, t2.name as name_2
from temp t2
    left join temp t1 on t1.id = t2.id and t1.flag = 1 and t2.flag = 2
where t1.id is null 
```

如果有 3 行具有相同的 ID，这将完全搞砸:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:26:30.213

您想要加入，而不是选择案例。像这样，假设 null 在任一列中都是可能的：

```
SELECT a.id, a.name fname, b.name lname from
(SELECT id, name FROM temp WHERE flag = 1) a 
full outer join 
(SELECT id, name FROM temp WHERE flag = 2) b on a.id = b.id 
```

但不确定在这种情况下您期望什么：

```
46 NULL   White
46 NULL   Dan 
```

# java - 从 object.get() 获取内存地址，从 object.indexOf 获取 -1 当对象列表的大小为 30 时

> ID：10987019
> 
> 赞同：0
> 
> 时间：2012-06-11T20:22:33.463
> 
> 标签：java, android, listview, memory-leaks, indexof

我在下面的代码中使用 getView() 方法。我正在尝试遍历对象列表并获取它们的索引。在下面的代码中，我使用了一个 while 循环来执行此操作。但是，我没有得到预期的结果。我的列表包含 30 个对象，称为项目。我正在使用 while 循环并通过以下方法调用索引：`items.get(j)`和`items.indexOf(j)`. 我没有得到与列表中的索引相对应的整数，而是得到 -1 的索引或内存地址。大小为 30 的列表如何获得 -1 索引？请在下面查看我的代码。

问题1：如何打印出列表中每个对象的索引。

问题2：这种奇怪的行为是否与getview回收listview有关的内存泄漏？

```
package com.convention.notification.app;

import java.util.Iterator;
import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.graphics.Color;
import android.os.Bundle;
import android.text.Html;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class NewsRowAdapter extends ArrayAdapter<Item> {

    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int row;
    private List<Integer> disable;
    View view ;

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList, List<Integer> disableList) {
        super(act, resource, arrayList);
        this.activity = act;
        this.row = resource;
        this.items = arrayList;
        this.disable=disableList;

        System.out.println("results of delete list a:"+disable.toString()); 

    }

     public long getItemId(int position){
           return position;
        }

        public Item getItem(int position){
             return null;
           }

            @Override
            public View getView(final int position, View convertView, ViewGroup parent) {
                View view = convertView;
                ViewHolder holder;
                if (view == null) {
                    LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    view = inflater.inflate(row, null);

                    long id=getItemId(position);
                    //System.out.println(" at position "+position);

                     int j=0; 
                     System.out.println("item size at  "+items.size());
                        while (j< items.size())
                        {
                                System.out.println("while loop items.get(index): " +items.get(j) );
                                System.out.println( "while loop item.indexOf(index): "+items.indexOf(j) );
                                j++;
                        }

                    try{

                            //  System.out.println("item size at  "+items.size());

                                    for(int k =0;k< items.size();k++){

                                //      System.out.println("item index at "+items.get(k));
                                //      System.out.println("value of index "+k);

//                                      if(id == disable.get(k)){
//                                          view.setBackgroundColor(Color.YELLOW);
//                                          //System.out.println("background set to yellow at disable list "+disable.get(j));
//                                      //  System.out.println("background set to yellow at id "+id);
//                                          break;
//                                      } else {
//                                          view.setBackgroundColor(Color.WHITE);
//                                      //  System.out.println("background set to white at position "+position);
//                                      }
//                                  

                                    }

                                //}
                    }catch(IndexOutOfBoundsException e){

                    //System.out.println(" crash");
                    }

                    //ViewHolder is a custom class that gets TextViews by name: tvName, tvCity, tvBDate, tvGender, tvAge;
                    holder = new ViewHolder();

                    /* setTag Sets the tag associated with this view. A tag can be used to
                     *  mark a view in its hierarchy and does not have to be unique 
                     *  within the hierarchy. Tags can also be used to store data within
                     *   a view without resorting to another data structure.

        */
                    view.setTag(holder);
                } else {

                    //the Object stored in this view as a tag
                    holder = (ViewHolder) view.getTag();
                }

                if ((items == null) || ((position + 1) > items.size()))
                    return view;

                objBean = items.get(position);

        holder.tv_event_name = (TextView) view.findViewById(R.id.tv_event_name);
        holder.tv_event_date = (TextView) view.findViewById(R.id.tv_event_date);
        holder.tv_event_start = (TextView) view.findViewById(R.id.tv_event_start);
        holder.tv_event_end = (TextView) view.findViewById(R.id.tv_event_end);
        holder.tv_event_location = (TextView) view.findViewById(R.id.tv_event_location);

        if (holder.tv_event_name != null && null != objBean.getName()
                && objBean.getName().trim().length() > 0) {
            holder.tv_event_name.setText(Html.fromHtml(objBean.getName()));

        }
        if (holder.tv_event_date != null && null != objBean.getDate()
                && objBean.getDate().trim().length() > 0) {
            holder.tv_event_date.setText(Html.fromHtml(objBean.getDate()));
        }
        if (holder.tv_event_start != null && null != objBean.getStartTime()
                && objBean.getStartTime().trim().length() > 0) {
            holder.tv_event_start.setText(Html.fromHtml(objBean.getStartTime()));
        }
        if (holder.tv_event_end != null && null != objBean.getEndTime()
                && objBean.getEndTime().trim().length() > 0) {
            holder.tv_event_end.setText(Html.fromHtml(objBean.getEndTime()));
        }
        if (holder.tv_event_location != null && null != objBean.getLocation ()
                && objBean.getLocation ().trim().length() > 0) {
            holder.tv_event_location.setText(Html.fromHtml(objBean.getLocation ()));

        }

        return view;
    }

    public class ViewHolder {
        public TextView 
        tv_event_name,
        tv_event_date,
        tv_event_start,
        tv_event_end,
        tv_event_location
        /*tv_event_delete_flag*/;

    }

} 
```

Logcat：请注意，此 logcat 输出在一次启动中重复大约 5 到 7 次。我在这里缩短了它。

```
06-11 19:58:17.471: I/AndroidRuntime(1347): NOTE: attach of thread 'Binder Thread #3' failed
06-11 19:58:18.541: I/ActivityManager(60): Displayed com.convention.notification.app/.DataView: +1s161ms
06-11 19:58:20.471: I/System.out(1355): item disalbed is at postion :1
06-11 19:58:20.471: I/System.out(1355): item disalbed is at postion :6
06-11 19:58:20.471: I/System.out(1355): item disalbed is at postion :14
06-11 19:58:20.471: I/System.out(1355): item disalbed is at postion :15
06-11 19:58:20.471: I/System.out(1355): item disalbed is at postion :18
06-11 19:58:20.471: I/System.out(1355): results of delete list :[1, 6, 14, 15, 18]
06-11 19:58:20.481: I/System.out(1355): results of delete list a:[1, 6, 14, 15, 18]
06-11 19:58:20.481: I/System.out(1355):  set adapaer to list view called;
06-11 19:58:20.581: I/System.out(1355): item size at  30
06-11 19:58:20.581: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574210
06-11 19:58:20.581: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.581: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574488
06-11 19:58:20.581: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.581: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@405744e0
06-11 19:58:20.631: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.631: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574538
06-11 19:58:20.631: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.631: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574590
06-11 19:58:20.631: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.631: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@405745e8
06-11 19:58:20.642: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.642: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574640
06-11 19:58:20.642: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.642: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574698
06-11 19:58:20.642: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.642: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@405746f0
06-11 19:58:20.642: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.642: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574748
06-11 19:58:20.671: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.671: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@405747c0
06-11 19:58:20.671: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.681: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574818
06-11 19:58:20.681: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.681: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574870
06-11 19:58:20.681: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.681: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574928
06-11 19:58:20.681: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.721: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574980
06-11 19:58:20.721: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.721: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@405749d8
06-11 19:58:20.721: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.731: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574a30
06-11 19:58:20.731: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.731: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574a88
06-11 19:58:20.731: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.731: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574ae0
06-11 19:58:20.761: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.761: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574bb8
06-11 19:58:20.761: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.761: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574c30
06-11 19:58:20.761: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.761: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574c88
06-11 19:58:20.761: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.771: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574ce0
06-11 19:58:20.781: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.781: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574d38
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574d90
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574de8
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574e40
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574e98
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40574fa8
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1
06-11 19:58:20.811: I/System.out(1355): while loop items.get(index): com.convention.notification.app.Item@40575000
06-11 19:58:20.811: I/System.out(1355): while loop item.indexOf(index): -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:33:34.820

该`indexOf`函数接受一个对象，并且应该是与列表相同类型的对象。`items.indexOf(items.get(index))`正确的语法也是如此。有关详细信息，请参阅[http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:17:14.843

函数 items.get() 在找不到您要求的字符串值时返回 -1。因此，当直接与函数 indexOf 结合使用时，这可能会很危险，因为 -1 是无效索引。我建议您使用不同的编码技术**ListIterator**。它很常见，因为它简单且安全。这是一个简短的示例，使用您的对象项目：

```
Iterator it = items.iterator();
while (it.hasNext()) {
   System.out.println(it.next());
} 
```

看看它看起来多么简单和安全。迭代器在数据填充/更新后随时调用，而不是在更新过程中。您可以从 Internet 上找到许多示例。

# business-objects - 如何显示派生列的名称不以业务对象交叉表格式填充数据？

> ID：10987021
> 
> 赞同：0
> 
> 时间：2012-06-11T20:22:41.987
> 
> 标签：business-objects

在业务对象 webi 中。

下面，对于 3 月份，ABC 的派生列中没有数据

```
Jan     Feb Apr May Jun... 
```

A 1 3 3 4 5... B 2 0 2 2 2... C 1 3 5 1 1...

我想拥有

```
Jan     Feb Mar Apr May Jun... 
```

A 1 3 0 3 4 5... B 2 0 0 2 2 2... C 1 3 0 5 1 1...

如何做到这一点，任何人都可以帮助我解决这个问题......

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T00:04:47.203

在（我们的）当前版本中，您无法显示不存在的数据。在未来的版本中，这可能不是问题。

对于与日期相关的数据，您可以尝试强制显示关键期间，然后将您的数据 LOJ 到它。不是最简单的，因为它取决于是否能够创建静态表和/或编写 SQL 命令。

如果您可以将静态日期表放入数据库，那可能是最简单的方法。每个月的第一天有一个条目的表可能就足够了。将此表添加到您的数据的链接 - 使用静态表作为 LEFT 表，将包含一个包含月份的列，即使对于您的数据不存在的月份也是如此。找到正确的链接可能是个问题。

*我*这样做的最简单方法是使用 SQL 命令来提供报告，使用 CTE（通用表元素）、种子表和日期数学来获得驱动表的完整日期跨度，然后根据我的真实日期计算日期查询联接。从那里，您将有一个附加（派生和驱动）列用作您的新日期元素。

第一次设置很痛苦，但是你有了代码并且可以根据需要重用它。

我做类似的事情：

```
With
MOS as (  -- CTE for # of months I plan on covering - NEGATIVELY from today's date
  Select -12 as Offset from Dual  UNION ALL
  Select -11           from Dual  UNION ALL
  Select -10           from Dual  UNION ALL
  Select  -9           from Dual  UNION ALL
  Select  -8           from Dual  UNION ALL
  Select  -7           from Dual  UNION ALL
  Select  -6           from Dual  UNION ALL
  Select  -5           from Dual  UNION ALL
  Select  -4           from Dual  UNION ALL
  Select  -3           from Dual  UNION ALL
  Select  -2           from Dual  UNION ALL
  Select  -1           from Dual  
  )
, ChartDates as (  -- gives the 1st day of the month, for the 'n' months above
  Select TRUNC( ADD_MONTHS(sysdate, MOS.offset ), 'MONTH' ) ChartMonth 
  from MOS
  )
-- Join to the real query
Select  CD.ChartMonth, YQ.*
from ChartDates CD
       Left Outer Join (YourQuery) YQ
          on CD.ChartMonth = YQ.QueryMonth 
```

您将需要一种方法来从您的数据中生成等效的“每月第一天”以用作连接条件。

从那里，将整个内容粘贴为 SQL，并使用新字段 ChartMonth 作为您的驾驶日期。

# php - WSDL2PHP 生成的类方法中的数组类型提示？

> ID：10987022
> 
> 赞同：2
> 
> 时间：2012-06-11T20:22:45.383
> 
> 标签：php, oop, wsdl, wsdl2php

我正在使用从 WSDL 生成的类代码到 PHP 中。让我感到困惑的是类方法的编写方式，因此简单的数组似乎需要成为不存在的类的对象。

特别是这个 TFolderArray，文档应该是一个简单的 TFolder 对象数组：

```
<xsd:complexType name="TFolderArray">
<xsd:complexContent>
<xsd:restriction base="SOAP-ENC:Array">
<xsd:attribute ref="SOAP-ENC:arrayType" wsdl:arrayType="tns:TFolder[]"/>
</xsd:restriction>
</xsd:complexContent>
</xsd:complexType> 
```

TFolderArray 的文档将其定义为 TFolder 结构的数组。但是，如果将这样的数组传递给 GetOpportunityList()（见下文），它会抛出

> 传递给 Exchange::GetOpportunityList() 的参数 3 必须是 TFolderArray 的实例，给定数组

如果您尝试实例化该类的对象，您将正确地得到`Class 'TFolderArray' not found`.

如果您取消 $FolderArray 是 TFolderArray 实例的限制，并且只传递一个 TFolder 对象数组，那么功能就是我所期望的。

那么类渲染软件是否误解了 WSDL？$FolderArray 的类型提示应该只是“数组”吗？或者有没有一种方法可以在没有类的情况下“键入”数组？这是方法：

```
public function GetOpportunityList(TLoginInfo $LoginInfo, $AllRecords, TFolderArray $FolderArray) {
    return $this->__soapCall('GetOpportunityList', array($LoginInfo, $AllRecords, $FolderArray),       array(
            'uri' => 'urn:ExchangeService:Exchange33',
            'soapaction' => ''
           )
      );
  } 
```

# c# - 在 C# 上打开另一个页面（不是 Web）

> ID：10987023
> 
> 赞同：-2
> 
> 时间：2012-06-11T20:22:50.350
> 
> 标签：c#, file

我正在创建一个本机 C# 应用程序，我需要做一件简单的事情：一旦用户单击某个按钮，就会打开另一个 .cs 文件（具有自己的设计、代码和内容）。如果可能的话，我想知道如何同时关闭当前表单。

编辑：我到底需要什么：

```
 namespace Mokesciai
    {
        public partial class Mokesciai : Form
        {
            public Mokesciai()
            {
                InitializeComponent();
            }

        private void button1_Click(object sender, EventArgs e)
        {
            //write code here to open another page called "NewPage.cs" with its own subfiles "NewPage.Designer.cs" and
            //"NewPage.resx", as shown in the solution explorer
        }
    }
    } 
```

该应用程序是 C# Windows 应用程序

EDIT2：我想要的图形方式：[http](http://sdrv.ms/JXKVEL) ://sdrv.ms/JXKVEL 点击“点击我”我想打开新表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:48:07.943

那是一种*形式*。

您可以创建`new`表单类的实例，然后调用`Show()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:54:15.577

据我从您的问题中了解到，您可能想这样做。您可以使用 Process.Start() 从您的本机应用程序启动任何其他应用程序。

```
 using System.Diagnostics;
 string path=@"path to the app"   
 Process.Start(path); 
```

或者

创建一个新表单，放置一个多行文本框，然后使用 StreamReader 读取文件并在文本框中填充其结果。有关如何使用 Stream Reader 的更多信息，[请查看此](http://www.dotnetperls.com/streamreader)或[此](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:13:49.553

```
private void button1_Click(object sender, EventArgs e)
{
   YourSecondForm objForm=new YourSecondForm();
   objForm.Show();
   this.Close();
} 
```

假设`YourSecondForm` 是您要在按钮单击事件上显示的另一个表单的名称。

# c# - 跨多个集合的 linq 查询总和产品

> ID：10987024
> 
> 赞同：0
> 
> 时间：2012-06-11T20:23:02.597
> 
> 标签：c#, .net, linq, linq-to-sql

我有两个如下所示的数据集：

```
+------------------------------------+
| Products                           |
+------------------------------------+
| Id | Name             | Price      |
+------------------------------------+
|  1 | apples           | 1.00       |
|  2 | oranges          | 2.00       |
|  3 | pomengrate       | 3.00       |
+------------------------------------+

+-------------------------------+
| Sales                         |
+-------------------------------+
| CustId | ProductId | Quantity |
+-------------------------------+
|      1 |         1 |        5 |
|      1 |         2 |        4 |
|      1 |         3 |        2 |
|      2 |         1 |        8 |
|      2 |         3 |        7 |
+-------------------------------+ 
```

我想得到每个客户花费的金额，最终得到如下结果：

```
+----------------+
| CustId | Total |
+----------------+
|      1 | 19.00 |
|      2 | 29.00 |
+----------------+ 
```

我可以对单个表进行求和，但 LINQ 中的 Sum 方法采用只有一个参数的 lambda：对要求和的值所在的表的引用。这些值位于不同的表中。我如何将这些加在一起？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:27:38.970

```
var totals =
    from sale in Sales
    group sale by sale.CustId into custSales
    select new
    {
        CustId = custSales.Key, 
        Total = (
            from custSale in custSales
            select custSale.Product.Price *
                custSale.Quantity)
            .Sum()
    }; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T20:55:20.083

试一试。它给出了您正在寻找的结果：

```
var results = sales.Join(products,
    sale => sale.ProductID,
    product => product.ID,
    (sale, product) => new { CustID = sale.CustID, Total = sale.Quantity * product.Price })
    .GroupBy(r => r.CustID)
    .Select(g => new { CustID = g.Key, Total = g.Sum(gt => gt.Total) }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T21:33:58.513

为了完整起见，这里是查询语法版本（使用连接而不是子选择）：

```
var totals =
    from sale in sales
    join prod in product on sale.ProductId equals prod.Id
    let saleProds = new { sale.CustId, Total = prod.Price * sale.Quantity }
    group saleProds by saleProds.CustId into custSale
    select new { Customer = custSale.Key, Total = custSale.Sum(tr => tr.Total) }; 
```

关键部分是您需要以某种方式将连接的集合结果（销售和产品）转换为单个实体，然后可以对其进行分组。

# javascript - 如何使用 Node.js 连接到 FTPS？

> ID：10987030
> 
> 赞同：2
> 
> 时间：2012-06-11T20:23:20.683
> 
> 标签：javascript, node.js, network-protocols, ftps

我如何使用 node.js 连接到 ftps 服务器（如果是 sftp，我也很高兴知道该怎么做）。我有一个我想连接的外部服务器，它需要 ftps 连接才能上传图像。

我找到[了这个 npm 包](https://github.com/mscdex/node-ftp)，但它似乎无法通过 SSL/TLS 处理 FTP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-27T09:53:27.653

[node-ftp](https://github.com/mscdex/node-ftp)支持 FTPS 和 FTP。它非常流行，纯 JS 并且积极维护。

或者您可以尝试[ftps](https://www.npmjs.org/package/ftps)，它是[lftp](http://lftp.yar.ru/)的包装器，支持 FTP、FTPS 和 SFTP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:50:56.100

对于 SFTP，有这个模块：

[https://github.com/ajaxorg/node-sftp/tree/master/lib](https://github.com/ajaxorg/node-sftp/tree/master/lib)

它本质上是一个子进程的包装器。自述文件中没有太多内容，但请查看选项的代码。

# javascript - 通过 JavaScript 执行时将数据传递给 ruby 脚本

> ID：10987032
> 
> 赞同：0
> 
> 时间：2012-06-11T20:23:29.023
> 
> 标签：javascript, ruby, database

所以我一边学习 JavaScript/jQuery，一边构建网站。现在我需要一个数据库，我的朋友建议学习 Ruby 并使用它来处理数据。从这个问题：[JavaScript Execute Ruby Script](https://stackoverflow.com/questions/9773769/javascript-execute-ruby-script)它展示了我如何执行 Ruby 脚本，但我想知道是否可以将数据发送到该脚本，以便它可以将其推送到 MySQL 数据库？

基本上用户会提交一个字符串，所有的东西都是由 JS 动态生成的，所以我想在用户提交后立即将该字符串发送到 SQL 数据库。如果有人能在阅读方面为我指明正确的方向。我在 Ruby 方面没有太多的知识/经验，所以任何能将我重定向到对这个特定任务有用的东西都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:36:23.343

你提到的问题可能不是你想要的。仅当服务器与您的浏览器位于同一台机器上并且该机器运行 Windows 时，这才有效。

对于每个人都可以访问的网站，您需要有一个运行某些软件的服务器 - 在您的情况下是用 ruby​​ 编写的 - 并且由浏览器发送请求 - 在您的情况下是通过您的 JavaScript 程序。

为此，您需要发送一个 XMLHttpRequest。对于 jQuery，您可以[在文档](http://api.jquery.com/category/ajax/)或[教程](http://docs.jquery.com/Tutorials%3aGetting_Started_with_jQuery#Rate_me%3a_Using_Ajax)中阅读相关内容。这样你就可以让你的浏览器与服务器对话。

为了让服务器能够监听和响应，您应该使用一些框架，例如[Ruby on Rails](http://rubyonrails.org/)或（不是 Ruby，而是 Python）[Django](https://www.djangoproject.com/)。

# vim - 获取多行 yank 以粘贴到光标下方

> ID：10987033
> 
> 赞同：2
> 
> 时间：2012-06-11T20:23:29.110
> 
> 标签：vim, keyboard-shortcuts, copy-paste

我试图像这样粘贴在 Vim 中：

```
 a_1 "Day"
    a_2 "Week"
    a_neg_1 "Refused"
    a_neg_2 "Don’t know" 
```

我复制最后两行并将它们超过前两行。像这样：

```
 a_neg_1 "Refused"
    a_neg_2 "Don’t know"
    a_1 "Day"
    a_2 "Week" 
```

似乎每次我做多行拉动时，它总是想内联粘贴它。像这样：

```
 aa_neg_1 "Refused"
    a_neg_2 "Don’t know"_1 "Day"
    a_2 "Week" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T05:07:04.747

Copy+Paste（或 Cut+Paste）操作（在 Vim 中：yank 或 delete 和 put）由寄存器调节。寄存器可以保存按字符或按行的文本^*（请参阅 参考资料`:help characterwise`）。

*   如果您选择“按字符”（`y5l`、`y2W`、`y$`、`v`<motion>`y`等），则寄存器将以**字符**文本结束。
*   如果您选择“按行”（`y2j`、`y}`、`V`<motion>`y`等），则寄存器将保存**逐行**文本。

当您放置寄存器的内容时​​，文本的放置取决于它是按字符还是按行。

*   当您输入**按字符的**文本时，它将**立即插入到光标位置之后/之前**。
*   当您放置**逐行**文本时，它将插入**到光标所在行之后/之前**。

文本是放在光标位置（它所在的行）之后还是之前，由您使用的 put 命令控制：

*   `p`（小写）将文本放在光标**之后**（或在其行之后，如果寄存器当前是逐行的）
*   `P`（大写）将文本放在**光标之前**（或在其行之前，如果寄存器当前是逐行的）

简而言之，您如何拉/删除**以及**如何放置**两者**都会影响最终结果。

* * *

根据您的描述，您似乎正在使用`p`按字符放置文本（可能是通过`v`或单击基于鼠标的选择）。

相反，您应该将`P`(put before) 与逐行文本一起使用。如果您正在进行基于键盘的选择，请使用`V`（大写）而不是`v`（小写）。如果您正在进行基于鼠标的选择，请在开始选择时单击三次而不是单击一次。`P`然后，在移动到第一行后，拉出或删除并使用来进行最后的“粘贴”。

* * *

^*寄存器还可以保存逐块数据（例如，来自逐块`Control-V`可视模式）；放置时，它将以块方式放置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:08:24.133

小写`p`粘贴在光标后。

大写`P`粘贴在光标之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:36:18.183

简单地`put`在 ex 模式下使用：

```
:put 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T21:59:18.813

在可视模式下，`y`抽出字符集和`Y`抽出行集。

当您拉出字符时，以下 put 是字符敏感的，这会导致您的问题。而是用拉动整行`Y`，你应该得到你想要的行为。

# java - 如何检测“另存为 PDF…”是从 OS X 上的 AWT PrinterJob 中挑选出来的

> ID：10987034
> 
> 赞同：7
> 
> 时间：2012-06-11T20:23:30.700
> 
> 标签：java, macos, swing, printing

我有以下代码在我的 java 应用程序中显示本机打印对话框。

```
PrinterJob job = PrinterJob.getPrinterJob();
PrintRequestAttributeSet atts = new HashPrintRequestAttributeSet();
atts.add(DialogTypeSelection.NATIVE);

if (job.printDialog(atts)) 
{
    PrintService newlyUsedService = job.getPrintService();
    DocPrintJob docJob = newlyUsedService.createPrintJob();
    // print the passed javax.print.SimpleDoc object.
    docJob.print(simpleDoc, atts);
} 
```

This code works fine when a printer is selected and the Print button is clicked, but it does not work when the user selects any option from the “PDF” menu at the bottom left. The getPrintService method returns the last selected printer ( `Lillith`from the screenshot) when one of the options in the "PDF" menu are selected.

![OS X 打印对话框的屏幕截图](../Images/ab88e8e88aee92e942387b301b7c3cca.png)

任何人都可以建议应该做些什么来检测在打印对话框中选择“另存为 PDF…”并做出相应的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:02:39.710

您是否尝试过添加打印作业侦听器？现在就阅读它，我希望它会有所帮助：

[打印作业监听器](http://docs.oracle.com/javase/7/docs/technotes/guides/jps/spec/printing.fm5.html#999518)

# excel - 将帮助添加到“无帮助” Excel、VBA、用户定义的函数

> ID：10987037
> 
> 赞同：3
> 
> 时间：2012-06-11T20:23:32.663
> 
> 标签：excel, excel-2007, user-defined-functions, vba

我试图在 Excel 中为我的用户定义函数（UDF）添加一些帮助，使用 VBA（Visual Basic for Applications）编写。我知道如何添加描述。知道如何在蓝色链接“此功能的帮助”上添加帮助，而不是让它导致显示“没有帮助”的 MsgBox 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T22:52:41.557

您必须首先创建一个帮助文件。然后，您可以使用`Application.MacroOptions`将帮助文件附加到函数

例如

```
Application.MacroOptions Macro:="MyFunction", _
                         Category:="My Custom Category", _
                         HelpFile:="C:\MyHelp.chm", _
                         HelpContextID:=1 
```

**编辑**：添加更多信息

我通常使用[Help 和 Manual6](http://www.helpandmanual.com/)为我的项目创建帮助文件。这是我为上述示例创建的一个示例。当我单击“此功能的帮助”时，看看我会得到什么......

![在此处输入图像描述](../Images/2acc4f328a451f3a530bd4235aa51266.png)

**免责声明**：我没有以任何方式连接到**Help 和 Manual6**，但我喜欢他们的产品（它不是免费的）。您可能会在网上找到一个可以为您制作 chm 文件的免费软件，所以我将决定如何制作帮助文件。

# iphone - iOS beta 版本，与当前的稳定开发分开？

> ID：10987038
> 
> 赞同：1
> 
> 时间：2012-06-11T20:23:35.850
> 
> 标签：iphone, xcode

我记得曾经读过一些东西，但现在在搜索时找不到它，如果在安装 iOS 测试版时我需要担心一些事情。

如果我安装了 iOS 6 测试版，我是否需要担心它会覆盖我当前的 Xcode 4.2 (iOS 5.1) 开发？还是自动将其安装在单独的位置？或者这就是我需要做的，因为我需要在安装时将它放在一个单独的位置而不是默认位置？

如果我将设备安装在 iOS 6 beta 上，它不能降级回 5.1 对吗？

这些是我唯一需要担心的事情吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:43:05.323

正如 Apple 在 Xcode 4.5 开发者预览版发布说明 [1] 中所述：Xcode 4.5 是一个单独的应用程序包，可以简单地拖到应用程序文件夹中。您可以从那里启动它，它不会安装或覆盖任何现有的开发人员工具，如以前的 Xcode 版本。

苹果表示

> 更新到 iOS 6 测试版的设备无法恢复到早期版本的 iOS。注册的开发设备将能够升级到未来的 beta 版本和最终的 iOS 6 软件。

但是，只要将您的设备置于 DFU 模式，您就可以降级您的 iOS 设备，只要 5.1 版本是 Apple 提供的官方版本。当 Apple 为所有人推送 iOS 6 时，您可以使用 TinyUmbrella[2] 降级您的设备。这适用于以前的版本，但不能保证这次它会起作用。

[1] [http://adcdownload.apple.com//Developer_Tools/xcode_4.5_developer_preview/xcode_45dp_rn.pdf](http://adcdownload.apple.com//Developer_Tools/xcode_4.5_developer_preview/xcode_45dp_rn.pdf)（可能需要 iOS 开发者帐户才能查看此文件）

[2] [http://thefirmwareumbrella.blogspot.com/](http://thefirmwareumbrella.blogspot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:30:40.680

我知道运行测试版的 iOS 设备无法根据 iOS 开发中心降级：

> 更新到 iOS 6 测试版的设备无法恢复到早期版本的 iOS。注册的开发设备将能够升级到未来的 beta 版本和最终的 iOS 6 软件。

是的，我相信您可以一次安装多个版本的 Xcode，包括测试版。安装程序应该问你把它放在哪里。

您无需担心其他任何问题，但如果您将测试版 iOS 软件放在您的设备上，请确保您使用专用于开发的设备或备份所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:35:14.173

这正在 NDA 领域蔓延，但总的来说：

*   Xcode 的 Beta 版本不能用于向 App Store 提交应用程序。
*   有时您可以在同一台机器上安装两个开发工具副本。在过去，它并不总是正常工作。现在所有的 Xcode 都包含在应用程序包中，也许它会更顺利地工作。

最安全的做法是获取一个外部硬盘，在上面安装 Mac OS X，然后从它启动并在上面安装 beta 工具。然后，您可以安全地玩耍而不会弄乱发布版本。

# bash - 防止显示键入的字符（例如在 termios 中禁用“echo”属性）

> ID：10987039
> 
> 赞同：7
> 
> 时间：2012-06-11T20:23:42.050
> 
> 标签：bash, scripting, terminal, termios

我正在编写一个 bash 脚本，在该脚本中我从输入中读取单个字符。我这样做是使用`read -n 1 -s`. `-n 1`是只读取一个字符；`-s`是“静默”模式，在这种模式下键入的字符将不可见。

问题是，当当前执行的命令不存在`read`时（每当 bash 脚本中的一些其他命令正在执行时），字符就会显示在终端中。

这是终端中程序的正常行为。要禁用此功能，通常会禁用回显模式，例如使用 termios 库。

如何在 bash 脚本中实现这一点？

我更喜欢纯 bash / Unix 命令的解决方案（没有其他脚本语言，如 python、perl 等）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T20:25:54.310

```
stty -echo
# Anything they type won't output here
stty echo
# Now it will 
```

# textbox - 对于 WebControls TextBox，acceptReturn 设置为 True

> ID：10987040
> 
> 赞同：1
> 
> 时间：2012-06-11T20:23:43.867
> 
> 标签：textbox, web-controls, system.web.ui.webcontrols

如何在 System.Web.UI.WebControls 文本框上对 System.Windows.Forms 文本框施加 AcceptReturn = "True" 的类似行为？如果 asp:TextBox 不能有这种行为，即按下 Enter 时转到下一行，那么具有这种能力的下一个最简单的控件是什么？

# java - 是否可以通过此方法返回或以某种方式访问 “课程”中的数据？

> ID：10987042
> 
> 赞同：0
> 
> 时间：2012-06-11T20:24:06.510
> 
> 标签：java, methods, return

我正在处理我的第一个 Java 编程任务，我还有另一个问题。我在 Student[] 中放了一个 Course[] 但现在似乎遇到了 NullPointerException 错误，我不知道为什么。

```
public Student[] analyzeData() {
    Scanner inputStream = null;

    try {
        inputStream = new Scanner(new FileInputStream("Programming Assignment 1 Data.txt"));
    } catch (FileNotFoundException e) {
        System.out.println("File Programming Assignment 1 Data.txt could not be found or opened.");
        System.exit(0);
    }

    int numberOfStudents = inputStream.nextInt();
    int tuitionPerHour = inputStream.nextInt();

    Student[] students = new Student[numberOfStudents];
    for (int i = 0; i < numberOfStudents; i++) {
        String firstName = inputStream.next();
        String lastName = inputStream.next();
        int studentID = inputStream.nextInt();
        String isTuitionPaid = inputStream.next();
        int numberOfCourses = inputStream.nextInt();

        Course[] courses = new Course[numberOfCourses];
        for (i = 0; i < numberOfCourses; i++) {
            String courseName = inputStream.next();
            String courseNumber = inputStream.next();
            int creditHours = inputStream.nextInt();
            String grade = inputStream.next();
            Course currentCourse = new Course(courseName, courseNumber, creditHours, grade);
            courses[i] = currentCourse;
        }
        Student currentStudent = new Student(firstName, lastName, studentID, isTuitionPaid, numberOfCourses, courses);
        students[i] = currentStudent;
    }
    return students;
} 
```

输入文件的格式为：

```
3 345
Lisa Miller 890238 Y 2 
Mathematics MTH345 4 A
Physics PHY357 3 B

Bill Wilton 798324 N 2
English ENG378 3 B
Philosophy PHL534 3 A 
```

其中课程有关于课程的信息，学生有关于学生的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:31:18.567

您的文件的自然对象映射将是一个`Student`对象列表，每个对象都包含一个`Course`对象列表。该`courses`数组应存储在学生对象内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:31:28.627

嗯，我这样做的方法是有一个数据结构来表示内存中的已解析文件。所以基本上它看起来像这样：

```
public class RegistrationFile{

  private Students[] students;
  private Courses[] courses;

  public void loadFromFile(File f){
  //do your logic to parse the file
  //and store the results in the appropriate data members
  }

  public Students[] getStudents(){
    return students;
  }

  public Courses[] getCourses(){
    return courses;
  }
} 
```

然后，从您的其他代码中，您将创建一个注册文件对象的实例，并`loadFromFile()`在您尝试访问任何内容之前调用加载数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:38:06.947

我会添加一个数组（或者更好的是，ArrayList 或 Map），`Student`其中包含学生正在学习的课程。

根据您的工作，您如何确定哪些课程与哪些学生一起上课？

尝试添加以下实例变量

```
 private List<Course> courses; 
```

to `Student`，然后实现以下方法以添加到 List 或返回整个事物。

```
 void addCourse(Course c) { /*code here*/ };
  List getCourses() {/* code here */} ; 
```

阅读文件可能会很痛苦，至少目前还可以。您`Course`实例化的循环将包括一个 call `student.addCourse(course)`。那你就是金子了。

请注意，这是一个高层次的概述，因此这里可能会为您提供一些学习。只需回帖，我们会提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:36:21.393

除了设置正确的对象来代表学生/课程（就像@ChrisThompson 所做的那样），您还希望能够读取学生/课程的任意数量的记录，对吗？

您需要相应地解析文件。例如，当您点击一个空白行时，您知道您正在移动到下一条记录（第一条记录除外）。还可以利用第一行将是学生（或者如果它有 5 个令牌）而后续行是她的课程（或者如果该行有 4 个令牌）这一事实。

该单元应包括对整个输入文件的循环中的一次迭代。创建一个给定的学生对象和他的课程对象循环的一个迭代。

# api - 如何从 API 获取用户在 Foursquare 签到的位置？

> ID：10987053
> 
> 赞同：0
> 
> 时间：2012-06-11T20:24:49.533
> 
> 标签：api, location, foursquare, checkin

我想知道 Foursquare API 是否允许您在签到时到达用户自己的位置，而不是场地本身的位置。对于大多数场所来说，差异可以忽略不计，但如果有人入住，比如优胜美地国家公园，他们的实际位置可能会有很大差异。我想知道他们入住时在*哪里。*

API 的 Checkin 端点有两个相关属性：*venue*和*location*。*场地*内的位置信息（显然）仅与该场地（场地所在的位置）相关。在大多数情况下，这似乎是唯一包含的位置信息。*location*属性仅包含在无场所签到中，否则包含用户自己的位置。在我看来，后者应该始终可用，即使指定了场地。

我错过了什么吗？是否有（不同的）方法可以通过 API 到达用户自己的位置以进行定期签到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:26:34.380

您无法检索用户的物理纬度/经度以进行签到。它没有在 API 中的任何地方公开。

# jquery - Jquery 在 .text() 方法上添加了一个额外的结束标记

> ID：10987060
> 
> 赞同：0
> 
> 时间：2012-06-11T20:25:43.197
> 
> 标签：jquery, text, html

我在使用 jquery .text()、.html() 方法时遇到问题。当我单击特定按钮以更改 span 元素的内容时，它会添加一个额外的结束标签，该标签仅在 firebug 等工具中可见。

这是演示： http: [//jsfiddle.net/kbsRp/](http://jsfiddle.net/kbsRp/) 单击按钮并检查 span 标签，您会看到它添加了一个额外的结束标签。

```
<span>updated text</span>
updated text</span> 
```

有谁知道，如何防止这个错误？在大多数情况下，这真的很烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:38:29.623

这似乎是 chrome 的网络检查器中的一个错误，这就是为什么火狐的人没有看到它。您可以通过手动遍历 dom 来验证 chrome 中的正确状态，这表明 web 检查器在撒谎：

![](../Images/306b0d939b6a27d55ef52781e8967e67.png)

注意测试，您需要将活动框架从下拉菜单更改为`result( fiddle.jshell.net )`. 否则，查询将在主窗口上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:28:37.023

您应该使用 id 来定位跨度和`html()`函数以避免错误。

```
$("button").click(function() {
    $("span#mine").html("updated text");
    return false;
});​ 
```

[http://jsfiddle.net/kbsRp/2/](http://jsfiddle.net/kbsRp/2/)

# php - symfony2 显示表单字段的两倍

> ID：10987063
> 
> 赞同：1
> 
> 时间：2012-06-11T20:25:49.313
> 
> 标签：php, forms, symfony, twig

我有一份工人通过任务的“小时”清单。管理员可以检查它们（复选框）以将它们添加到账单中，（但他可以调整实际时间）

所以，我选择了一个小时数组，在我的控制器中我得到了小时数：

```
$hours = $repository->findBy(array('id' => $tabHour)); 
```

等了`$hours`一个多小时，我想如果我用 $hours 创建一个表单，它会自动显示多个字段..

```
foreach($hours as $key => $test){

    $billedHour[$key] = new BilledHour();
    $form[$key] = $this->container->get('form.factory')->create(new BillMandateForm(), $hour);
} 
```

我试着这样[做](https://stackoverflow.com/questions/10083730/creating-repeative-fields-inside-my-form-symfony2?answertab=active#tab-top)。但这并没有解决，因为如果我返回一组表单我不能这样做`'form' => $form->createView()`，所以我无法呈现表单......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T09:29:34.833

尝试将所有表单视图打包成数组

```
$billedHours = array();
$forms = array();
foreach($hours as $hour) {
    $billedHours[] = new BilledHour();
    $forms[] = $this->container->get('form.factory')->create(new BillMandateForm(), $hour);
} 
```

然后，创建渲染表单视图数组

```
$formsToRender = array();
foreach($forms as $form) {
    $formsToRender[] = $form->createView();
} 
```

然后，将此数组传递给 Twig：

```
...
'forms' => $formsToRender
... 
```

最后在 Twig 中从数组中渲染每个表单视图：

```
{% for form in forms %}
    {{ form_row(form.id) }} {# or form_widget(form) if you want to render whole from instead of some fields #}
{% endfor %} 
```

我希望这有帮助 ;）

# perl - 在 OSX Lion Apache 服务器上设置 mod_perl

> ID：10987073
> 
> 赞同：3
> 
> 时间：2012-06-11T20:26:55.177
> 
> 标签：perl, apache, cgi, mod-perl

我对 perl 和 apache 服务器都是新手。我正在尝试为 CGI 脚本创建一个基本的 Hello World。这是我的 hello world CGI 文件的代码：

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";
print "<H1>Hello World</H1>\n"; 
```

当我在命令行上执行 CGI 脚本 ./hello.cgi 时，它可以工作，但是当我在浏览器中打开 hello.cgi 时，它只显示 cgi 文件的文本。

当我查看 /var/log/apache2/error_log 中的 error_log 时，我可以看到 mod_perl 正在运行：

```
Apache/2.2.21 (Unix) DAV/2 mod_perl/2.0.5 Perl/v5.12.3 configured -- resuming normal operations 
```

但是当我运行以下 perl 程序时，似乎我没有“MOD_PERL”环境变量：

```
if (exists $ENV{"MOD_PERL"}) {
   print "YAY!\n";
 }
else{
    print"mod_perl is not working\n";
 } 
```

顺便说一句，我的 hello.cgi 文件和上面的 perl 脚本位于 /Users/myusername/Sites/

有人可以帮我正确配置 mod_perl 以便我可以在浏览器中正确查看 hello.cgi 吗？我一直在阅读 mod_perl 文档和搜索论坛很多很多小时，但无济于事。提前致谢

@SebastianStumpf 我得到了你的第一个例子，但我似乎仍然无法让 mod_perl 脚本运行。我一直在阅读文档，但我无法弄清楚。顺便说一句，谢谢你的帮助。我非常感谢

更新：我相信我成功了！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:17:45.840

如果您使用 Mac OS X Lion 的 Apache/Perl**并且不需要 mod_perl**，那么您无需配置任何东西。只需使用 .cgi 扩展名创建文件并通过 .cgi`/Library/WebServer/CGI-Executables`调整权限`sudo chmod 755 file.cgi`。该脚本将通过 CGI（不是 mod_perl）执行。我试过了，效果很好：

```
$ sudo -s
# cat - > /Library/WebServer/CGI-Executables/test.cgi
#!/usr/bin/perl
use strict;
use warnings;
use CGI qw/:standard/;
use Data::Dumper;
print header, start_html, h1('works'), end_html;
^D

# sudo chmod 755 /Library/WebServer/CGI-Executables/test.cgi
# exit 
```

测试它：

```
$ curl -i http://localhost/cgi-bin/test.cgi
HTTP/1.1 200 OK
Date: Mon, 11 Jun 2012 22:29:24 GMT
Server: Apache/2.2.21 (Unix) DAV/2
Transfer-Encoding: chunked
Content-Type: text/html; charset=ISO-8859-1

<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
<h1>works</h1>
</body>
</html> 
```

如果您需要 mod_perl，请查看文档。介绍的[配置部分](http://perl.apache.org/docs/1.0/guide/getwet.html#Configuring_and_Starting_the_mod_perl_Server)应该是运行 mod_perl 所需的全部内容。

**编辑：**

我在 中添加了以下几行`/etc/apache2/httpd.conf`，重新启动了 Web 服务器并且 mod_perl 工作：

```
LoadModule perl_module libexec/apache2/mod_perl.so
Alias /perl /Library/WebServer/perl
<Location /perl>
    SetHandler perl-script
    PerlResponseHandler ModPerl::Registry
    Options ExecCGI
    PerlSendHeader On
    Order allow,deny
    Allow from all
</Location> 
```

如果脚本保存在`/Library/WebServer/perl/`您可以看到所有 mod_perl 标头现在都可用，但我宁愿设置 Apache/mod_perl 的私有安装。[MacPorts](https://macports.org/)让这一切变得更容易......

# java - Rally toolKit for Java 如何创建 TestCaseResult 并将其附加到 TestCase

> ID：10987076
> 
> 赞同：2
> 
> 时间：2012-06-11T20:27:06.017
> 
> 标签：java, rally, testcase

通用代码在哪里`testCase`a `JsonObject`：

```
JsonObject result = new JsonObject();
result.addProperty("Verdict", "True");
result.addProperty("TestCase", Ref.getRelativeRef(testCase.get("_ref").getAsString()));

CreateRequest createRequest = new CreateRequest("TestCaseResult", result);
CreateResponse createResponse = restApi.create(createRequest); 
```

我想我的两个主要问题是：

1.  我是否正确创建了 testCaseResult？（testCase 属性是对 testCase 的引用）
2.  我需要将我的 testCaseResult 附加到我的 testCase 吗？( `testCase.addProperty("Results", "testCaseResults reference"`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T03:41:18.303

谢谢凯尔！举例来说，这里有一个快速片段，说明了查询测试用例，然后向其中添加新的测试用例结果：

```
 // Create and configure a new instance of RallyRestApi
    RallyRestApi restApi = new RallyRestApi(new URI("https://rally1.rallydev.com"), 
            "user@company.com", "password");
    restApi.setWsapiVersion("1.34");
    restApi.setApplicationName("RestExample_AddTagsToTestCase");        

    //Query User
    QueryRequest userRequest = new QueryRequest("User");
    userRequest.setFetch(new Fetch("UserName", "Subscription", "DisplayName"));
    userRequest.setQueryFilter(new QueryFilter("UserName", "=", "user@company.com"));
    QueryResponse userQueryResponse = restApi.query(userRequest);
    JsonArray userQueryResults = userQueryResponse.getResults();
    JsonElement userQueryElement = userQueryResults.get(0);
    JsonObject userQueryObject = userQueryElement.getAsJsonObject();
    String userRef = userQueryObject.get("_ref").toString();

    // Query for Test Case to which we want to add results
    QueryRequest testCaseRequest = new QueryRequest("TestCase");
    testCaseRequest.setFetch(new Fetch("FormattedID","Name"));
    testCaseRequest.setQueryFilter(new QueryFilter("FormattedID", "=", "TC4"));
    QueryResponse testCaseQueryResponse = restApi.query(testCaseRequest);
    JsonObject testCaseJsonObject = testCaseQueryResponse.getResults().get(0).getAsJsonObject();
    String testCaseRef = testCaseQueryResponse.getResults().get(0).getAsJsonObject().get("_ref").toString();

    try {

        //Add a Test Case Result                
        System.out.println("Creating Test Case Result...");
        JsonObject newTestCaseResult = new JsonObject();
        newTestCaseResult.addProperty("Verdict", "Pass");
        newTestCaseResult.addProperty("Date", "2012-06-12T18:00:00.000Z");
        newTestCaseResult.addProperty("Notes", "Automated Selenium Test Runs");
        newTestCaseResult.addProperty("Build", "2012.05.31.0020101");
        newTestCaseResult.addProperty("Tester", userRef);
        newTestCaseResult.addProperty("TestCase", testCaseRef);

        CreateRequest createRequest = new CreateRequest("testcaseresult", newTestCaseResult);
        CreateResponse createResponse = restApi.create(createRequest);            

        if (createResponse.wasSuccessful()) {

            System.out.println(String.format("Created %s", createResponse.getObject().get("_ref").getAsString()));          

            //Read Test Case
            String ref = Ref.getRelativeRef(createResponse.getObject().get("_ref").getAsString());
            System.out.println(String.format("\nReading Test Case Result %s...", ref));
            GetRequest getRequest = new GetRequest(ref);
            getRequest.setFetch(new Fetch("Date", "Verdict"));
            GetResponse getResponse = restApi.get(getRequest);
            JsonObject obj = getResponse.getObject();
            System.out.println(String.format("Read Test Case Result. Date = %s, Verdict = %s",
                    obj.get("Date").getAsString(), obj.get("Verdict").getAsString()));                 
        } else {
            String[] createErrors;
            createErrors = createResponse.getErrors();
            System.out.println("Error occurred creating Test Case: ");
            for (int i=0; i<createErrors.length;i++) {
                System.out.println(createErrors[i]);
            }
        }

    } finally {
        //Release all resources
        restApi.close();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:35:26.503

指定与新测试用例结果关联的测试用例的 ref 是执行此操作的正确方法。一旦创建操作成功，再次查询测试用例应该在其结果集合中包含新创建的测试用例结果。

# ios5 - 适用于 iPhone 和 iPad 的 iOS 图像和图像旋转

> ID：10987081
> 
> 赞同：1
> 
> 时间：2012-06-11T20:27:46.770
> 
> 标签：ios5, rotation

我在苹果网站上读到，当您选择要显示的图像时，背景图像必须具有一定的质量。请参阅[此链接](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)。

我正在使用 XCode 4.3.2 为 iOS 5 开发应用程序。

1.  我如何知道我的设备是否为高分辨率设备？
2.  为了设置背景图像，当您向左或向右旋转设备时，您是否需要包含该图像的更广泛版本？我正在做一个标题并将其设置为我的背景，并在后台命名为“我的 Apple 应用程序”。我需要制作一个更宽的版本以便它可以拉伸吗？

# ios - 我可以在 viewDidDisappear 中调用 [super didReceiveMemoryWarning] 吗？

> ID：10987090
> 
> 赞同：2
> 
> 时间：2012-06-11T20:28:54.540
> 
> 标签：ios, cocoa-touch, didreceivememorywarning

'我使用 ARC 和 UINavigationController 在 10 个视图控制器之间切换。一切都很好，但过了一会儿`didReceiveMemoryWarning`被调用（因为所有打开的视图控制器）并`[super didreceivememorywarning]`清除了所有不是 Super 的视图控制器。这对我来说是完美的。唯一的问题是，当它被调用时，应用程序会滞后一秒钟。

我可以调用`[super didreceivememorywarning]`每个视图控制器的`viewDidDisappear`吗？当我测试它时，它工作得很好，但它允许/愚蠢吗？如果没有，我如何释放每个不是 Super 的视图控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:26:10.727

直接来自 UIViewController 文档：

> 您的应用从不直接调用此方法。相反，当系统确定可用内存量低时调用此方法。

# silverlight - 尝试以编程方式使 HTTP 响应标头过期

> ID：10987092
> 
> 赞同：0
> 
> 时间：2012-06-11T20:29:06.283
> 
> 标签：silverlight, iis-7, http-headers, wmi, cache-expiration

我们的团队正在构建一个带有 Silverlight 模块的 C# 项目。我们使用 IIS 7 部署到 Windows 2008。我正在尝试立即以编程方式使与名为 ClientBin 的文件夹关联的 HTTP 响应标头过期。我知道如何通过 IIS 管理器手动完成。（基本上，我会转到感兴趣的文件夹或文件的 HTTP Response Headers 部分，然后使用“Set Common Headers....”立即过期。）但是，我们将重新部署到 IIS 中次，我想确保它以编程方式完成，因为一直保持重新配置是一件令人头疼的事情。

我应该从项目的 C# 代码中执行此操作，还是使用 WMI 脚本执行此操作更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:02:03.710

@kev 和 @jeff-cuscutis 提供了使用 ASP.NET 应用程序的 web.config 文件中的 XML 配置来配置 HTTP 响应标头过期的方法

[如何在 IIS7 中为每个文件夹和扩展配置静态内容缓存？](https://stackoverflow.com/questions/2195266/how-to-configure-static-content-cache-per-folder-and-extension-in-iis7)

您可以在根 web.config 中为整个文件夹设置特定的缓存头：

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>

<!-- Note the use of the 'location' tag to specify which 

   folder this applies to-->

<location path="images">

<system.webServer>

  <staticContent>

    <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="00:00:15" />

  </staticContent>

</system.webServer>

</location>

</configuration> 
```

或者您可以在内容文件夹中的 web.config 文件中指定这些：

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>

<system.webServer>

<staticContent>

  <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="00:00:15" />

</staticContent>

</system.webServer>

</configuration> 
```

我不知道针对特定文件类型的内置机制。

您可以在每个文件的基础上执行此操作。使用路径属性包含文件名

```
<?xml version="1.0" encoding="UTF-8"?>

<configuration>

<location path="YourFileNameHere.xml">

    <system.webServer>

        <staticContent>

            <clientCache cacheControlMode="DisableCache" />

        </staticContent>

    </system.webServer>

</location>

</configuration> 
```

# java - Eclipse 问题查看双击

> ID：10987093
> 
> 赞同：3
> 
> 时间：2012-06-11T20:29:08.433
> 
> 标签：java, c++, c, eclipse, eclipse-plugin

我正在尝试为 Eclipse 中的问题视图创建双击鼠标事件。我正在创建一个插件，该插件需要获取有关用户在问题视图中双击的问题的数据。

一些细节：我正在用 java 编码，但用户将使用 CDT 插件在 C/C++ 中编码。到目前为止，我一直无法从问题视图中的当前选择中获取数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:16:45.657

据我所知，这是不可能的，因为它需要 Java 访问视图中的查看器。

`org.eclipse.ui.commands`您可以使用/ `org.eclipse.ui.handlers`/`org.eclipse.ui.menus`组合在问题视图中为当前行添加命令。

# asp.net - 在 DropDownList 上调用 DataBind() 时出现 ArgumentNullException

> ID：10987094
> 
> 赞同：2
> 
> 时间：2012-06-11T20:29:12.203
> 
> 标签：asp.net, data-binding, argumentnullexception

当我`DataBind()`在 ASP.NET 4 中调用 DropDownList 时，它会抛出 ArgumentNullException：

> System.ArgumentNullException：值不能为空。参数名称：System.Web.UI.DataBinder.GetPropertyValue(Object container, String propName, String format) at System.Web.UI.WebControls 的 System.Web.UI.DataBinder.GetPropertyValue(Object container, String propName) 的容器。 ListControl.PerformDataBinding(IEnumerable dataSource) 在 System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) 在 System.Web.UI.WebControls.ListControl.PerformSelect() 在 System.Web.UI.WebControls.BaseDataBoundControl.DataBind( ) 在 MyNamespace.MyClass.MyFunction()

这是我的代码：

```
myDropdown.Items.Clear();
myDropdown.ClearSelection();
myDropdown.Items.Add(new ListItem("-Select-", "-1"));
myDropdown.DataSource = myDataSource; //List<T> of my business objects
myDropdown.DataBind(); 
```

我发现[这个论坛帖子](http://forums.asp.net/p/1593029/4039721.aspx)似乎建议删除我在标记中设置的下拉菜单中的 DataValueField 和 DataTextField 设置。当我这样做并将代码的倒数第二行更改为此时，我仍然会在选项中获得有意义的文本：

```
myDropdown.DataSource = myDataSource.Select(elem => new ListItem(elem.Text, elem.Id)); 
```

……还是不行。但是，当我删除添加“-Select-”选项的行时，它确实有效。只有在数据绑定之前没有选择任何元素时，它才会中断。

这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:43:39.037

进一步的谷歌搜索发现[this other post](http://geekswithblogs.net/samerpaul/archive/2009/08/16/ldquovalue-cannot-be-null.-parameter-name-containerrdquo.aspx)表明数据源中的空对象可能导致此问题。我将我的 DataSource 行更改为：

```
myDropdown.DataSource = myDataSource.Where(elem => elem != null); 
```

它奏效了。

我还没有确定为什么/如何在该列表中有空值。唔。

# c++ - Qt 中的 OpenGL 不绘制红色方块

> ID：10987096
> 
> 赞同：1
> 
> 时间：2012-06-11T20:29:28.310
> 
> 标签：c++, qt, opengl, glulookat

我正在尝试`QGLWidget`在 Qt 应用程序中使用 OpenGL。

我做了一个等的子类`QGLWidget`，并认为我会测试它是否有效。

但是，以下代码没有像我预期的那样工作：

```
void MyGLWidget::paintGL() {
  gluLookAt(0,0,-10,0.5,0.5,0,0,1,0);
  glClear(GL_COLOR_BUFFER_BIT);
  glColor3f(1,0,0);
  glBegin(GL_POLYGON);
  glVertex3f(0,0,0);
  glVertex3f(0,1,0);
  glVertex3f(1,1,0);
  glVertex3f(1,0,0);
  glEnd();
} 
```

我想象这会做的是看一个红色正方形的中心。但是相反，当我运行它时，它似乎非常短暂地看着正方形的中心，然后显示屏就变成了黑色。

有什么我做错了吗？我没有在其他任何地方做任何 OpenGL。上面的函数是子类中唯一的 OpenGL 代码（现在`::resizeGL()`and中没有任何内容`::initializeGL()`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:36:45.740

我认为您需要设置 OpenGL 视口。SDK中有一些Qt+OpenGL的例子。看一看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:09:00.350

我的代码似乎有两个问题。首先，我必须在以下位置设置视口：

```
void MyGLWidget::resizeGL(int w, int h) {
  glViewport(0, 0, w, h);
  glMatrixMode(GL_PROJECTION);

  glLoadIdentity();
  gluPerspective(45.,((GLfloat)w)/((GLfloat)h),0.1f,1000.0f);

  glMatrixMode(GL_MODELVIEW);
  glLoadIdentity();
} 
```

其次，我必须在打电话之前`glLoadIdentity()`先打电话`gluLookAt()`。`paintGL()`

# iphone - iOS：在不访问其父 ViewController 的情况下关闭和呈现 ModalViewController

> ID：10987097
> 
> 赞同：6
> 
> 时间：2012-06-11T20:29:38.707
> 
> 标签：iphone, ios, ipad, modalviewcontroller, presentmodalviewcontroller

**背景：**我想关闭我之前提出的模态视图，并立即展示`viewController`我刚刚用新信息解除的相同视图。

**问题：**`ViewController`如果没有一个明确的指针指向第一个模态呈现的父级，我这样做并不是很成功`ViewController`。我正在尝试编写这个类，它可以在不弄乱以前`viewController`的代码的情况下工作。

**可能的线索：**我一直在尝试几件事：

1.）试图访问 parent `ViewController`，此时我不知道如何。

2.) 一旦获得对父级的访问权限，我可以简单地应用以下代码：

```
UIViewController* toPresentViewController = [[UIViewController alloc] init];
    [self dismissViewControllerAnimated:YES completion:^{
        [parentViewControllerAccessor presentModalViewController:toPresentViewController animated:YES];
}]; 
```

从理论上讲，这应该可以访问 parent `viewController`。我对其他方法持开放态度。

**假设：**您无权更改 parent 中的任何代码`ViewController`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T21:00:11.713

您的代码看起来应该可以工作。如果您使用的是 iOS 5，则有一个`UIViewController`名为`presentingViewController`.

```
@property(nonatomic, readonly) UIViewController *presentingViewController; 
```

因此，您可以使用此属性来获取呈现您的模态控制器的视图控制器。

**注意：**在 iOS 4`parentViewController`中将设置为呈现控制器，因此如果您同时支持 iOS 4 和 5，则必须首先检查操作系统版本以决定访问哪个属性。在 iOS 5 中，Apple 已经修复了这个问题，因此它`parentViewController`现在专门用于包含的视图控制器的父级（请参阅文档中的*实现容器视图控制器*`UIViewController`部分）。

**编辑：**关于`self.presentingViewController`从块内访问：在调用块时（在模式视图控制器被解除后），`presentingViewController`属性可能会设置为 nil。请记住，`self.presentingViewController`块内部在块执行时给出属性值，而不是在创建时。为了防止这种情况发生，请执行以下操作：

```
UIViewController* toPresentViewController = [[UIViewController alloc] init];
UIViewController* presentingViewController = self.presentingViewController;
[self dismissViewControllerAnimated:YES completion:^
{
    [presentingViewController presentModalViewController:toPresentViewController animated:YES];
}]; 
```

这是必要的，不是因为`self`消失/解雇（它被块安全地保留），而是因为它不再呈现，因此它`presentingViewController`现在为零。没有必要在`presentingViewController`其他任何地方存储，局部变量很好，因为它将被块保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:59:31.620

您可以使用通知来完成此操作。

例如，当您希望将其关闭时，从模态视图外部触发此通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"dismissModalView" 
                                                    object:nil 
                                                  userInfo:nil]; 
```

然后在您的模态视图中处理该通知：

```
- (void)viewDidLoad {
    [[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(dismissMe:)
                                                 name:@"dismissModalView" 
                                               object:nil];
}

- (void)dismissMe:(NSNotification)notification {
    // dismiss it here.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T13:51:53.270

ios5的解决方案：

```
-(void)didDismissModalView:(id)sender {

   // Dismiss the modal view controller
   int sold=0;

   if(sold==0){

      //Cash_sold.delegate = self;
      // Cash_sold.user_amount.text=[NSString stringWithFormat:@"%d",somme];

      Cash_sold = [[CashSoldview alloc] initWithNibName:@"CashSoldview" bundle:nil];
      CGRect fram1 = CGRectMake(200,20,400,400);
      Cash_sold.view.superview.frame = fram1;
      Cash_sold.view.frame=fram1;
      Cash_sold.modalTransitionStyle= UIModalTransitionStyleCoverVertical;
      Cash_sold.modalPresentationStyle=UIModalPresentationFormSheet;

      UIViewController* presentingViewController = self.parentViewController;

      [self dismissViewControllerAnimated:YES completion:^
      {
         [presentingViewController presentModalViewController:Cash_sold animated:YES];
      }];     
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T14:32:16.097

试试下面的代码：

```
[self dismissViewControllerAnimated:NO 
                         completion:^{
  // instantiate and initialize the new controller
  MyViewController *newViewController = [[MyViewController alloc] init];
  [[self presentingViewController] presentViewController:newViewController
                                                animated:NO
                                              completion:nil];
}]; 
```

# ios - iOS 在视图中播放背景视频

> ID：10987099
> 
> 赞同：2
> 
> 时间：2012-06-11T20:30:00.243
> 
> 标签：ios, objective-c, video, ios5, playback

我已将此代码添加到该`viewDidLoad`方法中：

```
 NSBundle *bundle = [NSBundle mainBundle];
    NSString *moviePath = [bundle pathForResource:@"myvid" ofType:@"m4v"];
    NSURL *movieURL = [NSURL fileURLWithPath:moviePath];

    MPMoviePlayerController* moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
    moviePlayer.controlStyle = MPMovieControlStyleNone;
    [self.view insertSubview: moviePlayer.view aboveSubview: self.view];
    [moviePlayer play]; 
```

它不起作用！如何在 iOS 的视图背景中播放视频？（使用故事板）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T17:52:04.007

看起来您创建的 MPMoviePlayerController 实例在播放过程中被 ARC 伤害了。

尝试制作 MPMoviePlayerController 的强属性并在开始播放之前分配您在其中创建的实例。

所以你的代码看起来像这样

```
NSBundle *bundle = [NSBundle mainBundle];
NSString *moviePath = [bundle pathForResource:@"myvid" ofType:@"m4v"];
NSURL *movieURL = [NSURL fileURLWithPath:moviePath];

self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
self.moviePlayer.controlStyle = MPMovieControlStyleNone;
//set the frame of movie player
self.moviePlayer.view.frame = CGRectMake(0, 0, 200, 200);
[self.view addSubView:self.moviePlayer.view];
[self.moviePlayer play]; 
```

# ruby-on-rails - 样式表错误 - Ruby on Rails 新手

> ID：10987100
> 
> 赞同：0
> 
> 时间：2012-06-11T20:30:00.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我目前正在通过“使用 Rails 进行敏捷 Web 开发”学习 ruby​​ on rails，但遇到了一个无法修复的错误。到目前为止，我只做了一些基本的操作。我使用类似于此的命令创建了一个脚手架：

```
rails generate scaffold Product title:string description:text image_url:string price:decimal 
```

然后我耙了一下：

```
rake db:migrate 
```

运行后，我进入 db/seeds.db 文件并用以下数据填充这个新创建的表：

```
Product.delete_all
Product.create(:title => 'Web Design for Developers',
               :description => 
               %{<p>
               <em>Web Design for Developers</em> will show you how to make your
               web-based application look professionally designed. We'll help you
               learn how to pick the right colors and fonts, avoid costly interface
               and accessibility mistakes -- your application will really come alive.
               We'll also walk you through some common Photoshop and CSS techniques
               and work through a web site redesign, taking a new design from concept
               all the way to implementation.
               </p>},
               :image_url =>   '/images/rails.png',    
               :price => 42.95)
# . . .
Product.create(:title => 'Programming Ruby 1.9',
               :description =>
               %{<p>
               Ruby is the fastest growing and most exciting dynamic language
               out there. If you need to get working programs delivered fast,
               you should add Ruby to your toolbox.
               </p>},
               :image_url => '/images/rails.png',
               :price => 49.50)
# . . .

Product.create(:title => 'Rails Test Prescriptions',
               :description => 
               %{<p>
               <em>Rails Test Prescriptions</em> is a comprehensive guide to testing
               Rails applications, covering Test-Driven Development from both a
               theoretical perspective (why to test) and from a practical perspective
               (how to test effectively). It covers the core Rails testing tools and
               procedures for Rails 2 and Rails 3, and introduces popular add-ons,
               including Cucumber, Shoulda, Machinist, Mocha, and Rcov.
               </p>},
               :image_url => '/images/rails.png',
               :price => 43.75) 
```

我再次收集了这些数据：

```
rake db:seed 
```

这一切都完成后，我加载了 localhost:3000/products 并且一切正常。然而，这本书想添加一些 CSS 代码来让事情看起来更好一些。一旦我添加了 CSS（完全按照书中的内容），当我加载 localhost:3000/products 时出现错误（错误： http: [//postimage.org/image/3qfpta4w7/](http://postimage.org/image/3qfpta4w7/)）。我认为我的错误与我的 CSS 有关，但我不知道该怎么做。这是我的CSS：

```
.products {
table {
border-collapse: collapse;
}
table tr td {
    padding: 5px;
    vertical-align: top;
}
.list_image {
    width: 60px;
    height: 70px;

}
.list_description {
    width: 60%;
dl {
margin: 0;
}
dt {
    color: #244;
    font-weight: bold;
    font-size: larger;
}
dd {
    margin: 0;
}
}
.list_actions {
    font-size: x-small;
    text-align: right;
    padding-left: 1em;
}
.list_line_even {
    background: #e0f8f8;
}
.list_line_odd {
    background: #f8b0f8;
}
} 
```

我尝试过改变几件事，但现在成功随之而来。对此的任何和所有输入将不胜感激。（命名您最喜欢的 Rails 书籍以供学习的 PS 奖励积分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:03:33.933

检查以下

```
 .products {
        table {
            border-collapse: collapse;
        }
        table tr td {
            padding: 5px;
            vertical-align: top;
        }
        .list_image {
            width: 60px;
            height: 70px;
        }
        .list_description {
            width: 60%;
            dl {
                margin: 0;
            }
            dt {
                color: #244;
                font-weight: bold;
                font-size: larger;
            }
            dd {
                margin: 0;
            }
        }
        .list_actions {
            font-size: x-small;
            text-align: right;
            padding-left: 1em;
        }
        .list_line_even {
            background: #e0f8f8;
        }
        .list_line_odd {
            background: #f8b0f8;
        }
    } 
```

# ios - 如何在 Xcode 4.3 中修复“没有为应用程序找到有效的 'aps-environment' 权利字符串”？

> ID：10987102
> 
> 赞同：157
> 
> 时间：2012-06-11T20:30:04.433
> 
> 标签：ios, notifications, push-notification, apple-push-notifications

我一直在非常努力地创建一个可以接收推送通知的简单简单的 iOS 应用程序。我这样做的唯一原因是建立一个程序供其他团队成员使用，并且无法在网络上的其他地方找到此类说明的最新工作版本。我们的商店对 iOS 开发者来说相当新，我个人对 iOS 开发者和 Xcode 完全没有经验。我偶然发现了来自 Apple 和其他地方的数十篇教程、文章和问题帖子，我觉得我可能快到了……

这是我要去的地方（请注意，我正在使用 Xcode 4.3 并最初尝试仅部署到 iOS 5.1，我收集到与早期版本的 Xcode 相比，最近有些事情可能发生了变化，但我还是新手这 - 并发现它完全令人困惑和令人费解）：

1) 我的 iPhone 上有一个启用了推送的配置文件

2）在我的测试 Xcode 项目中，我将该配置文件选为签名身份（在 Build Settings > Code Signing 中）

![在此处输入图像描述](../Images/8a0f536155426c240c924b8648f8b7d9.png)

3）我在 Summary and Info > Custom iOS Target Properties 下正确设置了我的包标识符*（我认为？？）

4) 我在委托的 didFinishLaunchingWithOptions 中调用了 registerForRemoteNotificationTypes

5) 我的委托中有 didRegisterForRemoteNotificationsWithDeviceToken 和 didFailToRegisterForRemoteNotificationsWithError，分别设置为记录设备令牌或错误

6) 我在摘要下选中了启用权利。

7) 选择的权利文件正下方是 Tinker6（我的测试项目的名称），它是在我选中 Enable Entitlements 时自动生成的

8）在 Tinker6.entitlements 文件中，我有以下内容（根据网络上的几个不同帖子，我收集到的内容是正确的，但我无法从 Apple 本身找到任何确定的内容）：

![在此处输入图像描述](../Images/9c9e3cafd8b9c7abdd7f1d1a02141793.png)

**更新**

9）另外，我在没有权利文件的情况下尝试了整个事情，并得到了基本相同的结果。

10) 我的 mobileprovision 文件内容包括正确的权利（我打乱了数字和域，但结构相同）：

```
<key>application-identifier</key>
<string>12355456A7.com.whatever.tinker</string>
<key>aps-environment</key>
<string>development</string>
<key>get-task-allow</key>
<true/>
<key>keychain-access-groups</key>
<array>
    <string>12355456A7.*</string>
</array> 
```

**/结束更新**

当我尝试在我的设备上运行它时，我在 Xcode 输出中收到以下错误：

```
2012-06-11 12:45:23.762 Tinker6[13332:707] Failed to get token, error: 
Error Domain=NSCocoaErrorDomain Code=3000 "no valid 'aps-environment' 
entitlement string found for application" UserInfo=0x24a3b0 
{NSLocalizedDescription=no valid 'aps-environment' entitlement string 
found for application} 
```

我尝试将 get-task-allow 设置为 NO，将 aps-environment 设置为生产，所有四种可能的组合，同样的事情。

我怎样才能克服这个？这方面的权威文件在哪里？

--*更多背景信息*--

* 至于捆绑包 id，我仍然不清楚应该如何设置与供应配置文件中的应用程序 ID 和配置文件 ID 相关的设置。在 App Ids 下的 Provisioning 门户中，我有这个（再次打乱了数字和域）：

![在此处输入图像描述](../Images/26c242c4af54f19290c4365f27f7f391.png)

并且设置了捆绑ID的两个地方我有这个：

![在此处输入图像描述](../Images/f05aff083b13509ed458ee2bab67aee5.png) ![在此处输入图像描述](../Images/5a27ba73307c9c55ad0fc1217d3575a9.png)

我完全不确定这些是否正确，或者是否应该将其中一个或两者都设置为 12355456A7.com.whatever.tinker，尽管我在此过程的早期尝试了这些但没有成功......

**请注意**，我意识到有许多具有相似标题的帖子，但是根据给出的文件名等，它们似乎都已过时，而且事实上没有一个解决方案似乎有用。我希望我提供的更详细的信息将保证高质量的响应。我可能会尽快分配赏金，如果你给出一个高质量的答案，我会奖励你赏金，并通过 twitter 和我的博客宣传你的答案。特别是如果您在您的博客或其他内容上交叉发布一篇非常好的“这里是让一个简单的推送通知应用程序正常工作所需的*确切*500 个步骤，包括配置和其他任何内容”文章。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-18T14:17:05.573

如果您在配置`app ID`推送之前创建了配置文件，请尝试重新生成配置文件。

> iOS Provisioning Portal -> Provisioning -> Your cert -> EDIT -> Make an edit -> Download new provisioning

为我工作。现在我可以使用推送了。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2012-06-14T14:20:07.397

首先，您不需要权利文件，除非您要添加配置文件中不存在的自定义键/值对。构建应用程序后，配置文件中的任何权利都将复制到应用程序。

鉴于您仍然看到有关缺少权利的错误消息，我只能假设代码签名选项在构建设置中不正确。

您需要确保为“调试”配置选择了正确的配置文件，并且为了安全起见，您为“调试”和标记为“任何 iOS SDK”的子节点选择了正确的配置文件：

![在此处输入图像描述](../Images/c9bcbe714031bc91ea3b9b669be024b8.png)

尽管此屏幕截图显示选择了“自动开发人员”配置文件，但请从下拉列表中选择您想要的确切配置文件，仅用于测试目的。可能是 Xcode 会自动选择与您想要的配置文件不同的配置文件。

还要确保进行干净的构建，从您的设备中完全删除应用程序等。这只是为了确保您没有一些旧的绒毛。

* * *

## 回答 #3

> 赞同：67
> 
> 时间：2016-09-21T11:46:15.977

我在 Xcode 8 中遇到过这个问题。您必须启用 Target-> capabilities-> push notification。检查屏幕截图。

[![在此处输入图像描述](../Images/37663fb6055330d24282e55a57547d02.png)](https://i.stack.imgur.com/vImZc.png)

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2014-08-10T11:02:05.770

最简单的方法是使用 Xcode 从您的帐户中执行此操作：

前往 Xcode -> 首选项 -> 选择帐户选项卡 -> 查看详细信息 -> 点击左下角的刷新按钮 -> 完成。

再次构建，它应该可以工作。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-11-29T02:48:26.960

好的，我之前遇到过这个问题。由于推送通知需要服务器端实现，因此对我来说重新创建配置文件不是一种选择。所以我在没有创建新的配置文件的情况下找到了这个解决方案。

尽管我们选择正确，Xcode 没有正确选择正确的配置文件。

首先去组织者。在设备选项卡上，从库列表中配置配置文件，选择我们尝试使用的预期配置文件。右键单击它，然后“在 Finder 中显示配置文件”。

![在此处输入图像描述](../Images/37b540ddf97d422976d77c71633df6ce.png)

将在打开的 Finder 窗口中选择正确的配置文件。注意名称。

![在此处输入图像描述](../Images/c2c73c2a5f5b078b784ec5d4d47b4f08.png)

现在转到 Xcode > Log Navigator。为“全部”和“所有消息”选择过滤器。现在在最后一个阶段（构建目标）寻找名为“ProcessProductPackaging”的步骤展开它。请注意配置文件名称。如果您遇到错误，它们不应该匹配。 ![在此处输入图像描述](../Images/158f0a82066a81d6706a6c05c52fd203.png)

现在在 Opened Finder 窗口中删除 Xcode 正在使用的恶意配置文件。现在重新构建。错误应该得到解决。如果不重复该过程以找到另一个流氓配置文件以将其删除。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2012-06-19T16:19:45.760

答案是：重新开始，做同样的事情，但创建一个新的配置文件，然后安装它。那行得通。检查所有细节（移动设备中的权利）看起来与我在这里的问题中的所有内容*完全相同*。但现在它起作用了。苹果：WAT？

当然，*如果*可以删除配置文件，这样做是显而易见的。但由于那是不可能的，我不想用一堆测试配置文件让我们的团队混乱。尽管如此，最终还是失去了耐心并尝试了它，它最终起作用了。什么。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2013-03-01T20:44:42.910

在 Organizer 中从 XCode 中删除旧的配置文件。

然后，在 iOS 配置门户中为相同的包 ID 生成一个新的配置文件（在您启用推送之后）。

在 XCode 中导入新的配置文件，在您的应用构建设置中进行设置。

构建，运行，它工作。

我刚刚做完。

我从错误到成功花了 10 分钟。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2015-03-02T03:23:03.490

**XCode 6.1.1，以及多个苹果开发者账号**

这个已经相当全面的组合的另一个答案：我今天再次遇到这个问题，这次是因为我有多个苹果帐户。我需要先在*XCode > Preferences > Accounts > +中添加第二个开发者帐户*

## 确保推送通知功能开启

接下来我需要在应用程序中明确启用应用内购买（我以前不需要这样做）。*XCode >（应用程序窗口）> Targets > Capabilities > In-App Purchase ON*（在这个阶段我可以选择正确的证书）

请注意，我已经通过在 Finder 中双击它来添加启用推送的证书。

[![在此处输入图像描述](../Images/7323d4aa0779171028cc82120a5fbfaf.png)](https://i.stack.imgur.com/j3QI0.png)

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2014-03-26T20:20:19.183

（Xcode 5）好吧，花了一个小时后我解决了我的问题。即使您在 Xcode 5 中重新生成配置文件，您也应该手动更新您的帐户。我只更改了管理器选项卡中不起作用的配置文件，Xcode 使用旧配置文件进行构建。

所以去

> Xcode > 首选项 > 帐户 > 查看详细信息（选择您的帐户）

然后刷新您的配置文件。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2013-06-24T19:36:18.733

我的问题只是我使用 Xcode 管理的通配符配置文件进行签名。

在我创建了一个特定于应用程序的配置文件（并下载它、双击它并确保我的构建设置引用它）后，我成功地收到了一个 APNS 设备令牌。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2012-11-29T22:45:43.643

我有同样的问题是其他人并尝试了上述所有技巧，但没有任何效果。我什至删除并使用不同的开发者帐户重新开始。

最终对我有用的是

1.  按照上面的建议做，创建APP ID
2.  然后创建配置文件
3.  不要在配置的开发部分使用团队通配符配置文件（由 xcode one 管理）。您需要使用已激活推送通知的应用 ID 单独创建一个。这样，当你开发它时，它就会内置推送通知功能。

我不知道你是否可以为通配符应用启用它，但在尝试了至少 12 种不同的建议并失去了几天之后，我希望这对某人有所帮助

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-06-14T02:20:38.910

您提到了配置文件，但我没有看到任何提及 Apple 推送配置文件。

要使用 Push，您必须有一个推送配置文件（有两个，一个用于开发，一个用于发布）。创建它后，您需要确保它包含相关证书（请参阅下面的编辑部分）。

这是一个出色的教程，将引导您完成所有步骤：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

我或其他任何人都需要花费数小时和数小时来编写像本教程这样的详尽详细的答案，所以当本教程已经存在时，我不会尝试，也不会声称获得赏金。

PS我相信你不再需要权利，这是一个遗留问题。

编辑：您还应该检查设备上是否有必要的配置文件 - 转到设置，然后是一般配置文件，检查您的配置文件是否列出，尤其是推送配置文件。您也可以从 XCode 的 Organizer 部分检查这一点。在 Organizer 中有两个部分表示 Provisioning Profiles - 一个在 Library 的左上角（这是 XCode 中用于签名的配置文件等）。此外，您还会看到一个部分，称为 Provisioning Profiles 用于连接的设备，这个是安装在手机上的配置文件。如果您没有在手机上安装它们，您可以从供应门户网站下载它们，然后单击管理器窗口底部的添加按钮。

在配置门户中，您还应该检查 Apple 推送配置文件是否包含证书： - 单击左侧菜单上的配置 - 您将看到您的配置文件列表，选择编辑 Apple 推送配置文件 - 您将看到证书部分，其中包含您项目中的开发人员或测试人员等列表，请确保选中他们的复选框。- 您还会看到一个设备部分，请确保您正在测试的设备已添加。

如果您在 XCode 或设备上有任何旧配置文件，请删除它们并从配置门户下载/刷新/安装所有新配置文件

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-10-19T21:42:28.007

我自己也遇到了同样的问题。对我来说，问题是我的产品名称 ($TARGET_NAME) 的大写方式与苹果提供的证书中显示的方式不同。例如，我有 com.companyid.APNDemo，而 Apple 证书使用的是 com.companyid.apndemo。

我将目标更改为小写，并且有效。注意：对我来说，线索是 Build Settings 中的 codesigning 设置被设置为我的默认开发人员证书；不是 APNTest 配置文件。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2013-05-08T06:09:55.673

上面的很多答案都是正确的。但是，在处理此问题时似乎存在不止一个可能的错误。

我遇到的问题是我的 App ID 的大小写问题。由于某种原因，我的 App ID 没有大写，但我的应用却是。一旦我用正确的大小写重新创建了 App ID，它就可以顺利进行。希望这可以帮助。虽然令人沮丧。

PS 如果它仍然不起作用，请尝试使用“编辑”手动编辑代码签名身份字段。使用正确的配置文件名称更改第二行。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-04-09T21:51:44.027

我花了几个小时才解决它。鉴于有人使用自定义脚本进行签名和打包，而其他人使用 xcode 本身，因此只有一种方法可以检查您的应用程序中的内容。转储你的权利

`codesign --display --entitlements :- path/to/MyApp.app`

并检查`aps-environment`和`application-identifier`。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-06-23T15:22:15.880

当您的证书过期时，可能会发生此错误。

解决方案是更新证书并用它签署应用程序。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-06-21T19:15:24.417

您需要确保在您的配置文件 ( [https://developer.apple.com/account/ios/profile/](https://developer.apple.com/account/ios/profile/) ) 中有一个 iOS 分发配置文件。

当您从 xCode 上传到 App Store 时，请确保您的权利中有 aps-environment。如果没有，请从查看帐户 -> 查看详细信息 -> 全部下载。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-02-06T18:19:11.623

我有一个类似的问题。由于各种原因，我一直在 XCode 7 和 8 之间徘徊。一旦你使用 8 构建，你将需要使用 8。我只是使用 Xcode 8 并应用了上面建议的一些更改并且它工作。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-02-21T06:33:12.547

重新创建临时文件解决了我的所有问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-03-28T17:24:37.540

Xcode 4.6 中的“自动”权利似乎有些古怪。

每个 SDK 都有一个 Entitlement.plist 文件，位于：

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk/Entitlements.plist 
```

我想出的解决方法是编辑此文件并手动添加偷偷摸摸的 aps-environment 键，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>application-identifier</key>
    <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
    <key>aps-environment</key>
    <string>development</string>
    <key>keychain-access-groups</key>
    <array>
        <string>$(AppIdentifierPrefix)$(CFBundleIdentifier)</string>
    </array>
</dict>
</plist> 
```

然后，Xcode 正在生成正确的 Xcent 文件，其中包含 aps-environment 键：

```
/Users/mySelf/Library/Developer/Xcode/DerivedData/myApp-buauvgusocvjyjcwdtpewdzycfmc/Build/Intermediates/myApp.build/Debug-iphoneos/myApp.build/myApp.xcent 
```

您可以使用 Xcode 的 Log Navigator 找到创建 Xcent 文件的位置，
查找“ProcessProductPackaging”。

不幸的是，这是我发现**解决问题**的唯一方法。
（现在终于可以正确获取推送令牌了）

只是想知道是否有另一个更优雅的解决方案可用。
有关更多详细信息，请参阅我的 SO 问题：
[Xcode 4.6 automatic entitlement not working - “no valid aps-environment”](https://stackoverflow.com/questions/15687887/xcode-4-6-automatic-entitlement-not-working-no-valid-aps-environment)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-04-07T17:26:42.490

在删除和重新生成 AppID/配置文件之前，请确保您的库和设备安装了相同（且正确）的配置文件。

迁移到新计算机后，我开始看到此错误。Push 在迁移之前一直在正常工作。

问题是（呃）我没有将配置文件导入新机器上的 Xcode 库（在 Library->Provisioning Profiles 下的 Organizer/Devices 中）。

令人困惑的部分是 DEVICE 已经拥有正确的配置文件，并且它们在构建设置中按预期显示，所以那里的一切看起来都是正确的，但是 XCode LIBRARY 没有它们，所以它正在使用...签署应用程序？？ ?

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2016-12-21T14:40:28.127

这就是为我解决的问题。（我已经尝试过打开/关闭功能，重新创建配置文件等）。

在**Build Settings**选项卡的**Code Signing Entitlements**中，我的*.entitlements*文件不是所有部分的链接。一旦我将它添加到**Any SDK**部分，错误就解决了。

[![在此处输入图像描述](../Images/de451f04e46a4c83f0cf005df940c6b5.png)](https://i.stack.imgur.com/UWQ86.png)

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-01-30T13:14:09.053

我尝试了此处列出的所有答案，但没有人解决我的问题。就我而言，这个错误是由于我在创建 Appid 时犯的愚蠢错误。我使用**通配符应用 ID**而不是使用**显式应用 ID**导致了问题

如果您希望应用程序接收远程通知（推送通知），那么您需要使用**Explicit App ID**，例如**com.tutsplus.push**，而不是**com.tutsplus.***

请找到截图， [![在此处输入图像描述](../Images/d32c628af896cc360b72917ddf60b0be.png)](https://i.stack.imgur.com/03pHR.jpg)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-02-08T15:11:02.670

[![在此处输入图像描述](../Images/4b2e56d647aa231c62abb23f9944c84e.png)](https://i.stack.imgur.com/BJVPR.png)您需要做的就是在 .Entitlements 文件中添加一个密钥。

APS 环境需要添加此密钥，并且根据您的目的，价值应该是开发或生产。

请检查上传的图片

# asp.net - Windows Server 2008 R2 + IIS 7.5 - 找不到资源

> ID：10987103
> 
> 赞同：3
> 
> 时间：2012-06-11T20:30:08.177
> 
> 标签：asp.net, iis-7.5, windows-server-2008-r2

我已将我们公司的 Web 应用程序从 Windows Server 2003 迁移到 Windows Server 2008 R2。这些都是 .Net 2.0 经典网络应用程序。它们似乎都工作正常，除非访问以 /Reports/... 开头的路径的任何资源。

在一个应用程序中，磁盘上的物理路径是 c:\Websites\app_name\WebService\Reports... 在此报告文件夹中，PDF 文件会动态生成并写入磁盘。可以通过如下 URL 访问它们：

```
http://domain_name/Reports/xxxx.pdf 
```

其中 /Reports 是映射到上述物理路径的虚拟目录。这在 2003 服务器和 IIS6 上运行良好，但在 IIS7.5 和 2008 R2 上我不断收到以下错误：

**无法找到该资源。**

**说明：** HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

**请求的 URL：** /Reports/xxxx.pdf

我有另一个 Web 应用程序动态生成报告并将它们直接流式传输到客户端浏览器以保存到本地磁盘，而不是写入服务器上的磁盘。与上例类似，生成报表的页面在 path 下找到，如下所示：

/Reports/Viewer.aspx

在这种情况下，**没有**使用虚拟目录。浏览器中引用的 URL 为：

```
http://another_domain_name//Reports/Viewer.aspx 
```

我再次收到与上述相同的错误消息... HTTP 404 - 找不到资源。

我已经尝试了阳光下的所有权限设置以尝试使其正常工作，但无济于事。我使用了内置帐户，创建了具有从最低权限到完全管理员权限的新帐户。我也玩过新的 AppPool Identities，但没有成功。我在目录上专门设置的权限、为应用程序池配置的帐户或每个网站本身的基本设置似乎并不重要。

不过，一旦我发现，当浏览器收到 HTTP 404 错误时，每个网站的 IIS 日志文件中都没有出现此请求的记录！！这真的让我很困惑，因为我肯定希望在请​​求的资源上看到失败的 404 日志条目。

还有一点需要注意，我在这台机器上运行 SQL Server 2008 Enterprise，并安装并启用了报告服务。这有点牵强，但是我的网站中的 /Reports 路径与机器上运行的其他路径是否存在争议？我为服务器上运行的每个单独的域和网站使用不同的绑定/主机头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:39:28.583

检查[报告文件夹冲突](http://forums.iis.net/t/1157304.aspx)。请记住，Google 比 SO 更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:34:51.200

如今，IIS 提供的不仅仅是未找到文件的 404 错误，因此它不会向攻击者泄露太多信息。查看事件日志（应用程序），并尝试从服务器本身访问它。

要检查的另一件事是您的 IIS 应用程序池是否已正确配置——尤其是使用正确的管道模式和 .NET 框架版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T20:25:15.937

在命令提示符处，键入：

`netsh http show urlacl`

查看 SQL Server Reporting Services 安装中是否有任何与`/reports/`--maybe 相关的绑定？

v/r BK

# mysql - 无法在mysql中执行准备好的语句

> ID：10987104
> 
> 赞同：1
> 
> 时间：2012-06-11T20:30:10.940
> 
> 标签：mysql, sql, prepared-statement

我无法执行以下准备好的语句，

```
PREPARE stmt FROM 'SELECT sb.id,sb.category,sb.make,sb.name,sb.pic,rs.slot
FRO M studbike AS sb LEFT JOIN reservation AS rs ON
sb.id=rs.studbike_id AND sb.availability=1 AND rs.date=? WHERE
sb.studpoint_id=? ORDER BY category DESC,name DESC'; 
```

如果我尝试通过以下方式执行准备好的语句：

```
SET @sid=1;@date1 ='2012-06-12';
EXECUTE stmt USING @sid,@date1; 
```

我越来越：

```
mysql> EXECUTE stmt1 USING @sid,@date1;
Empty set, 3 warnings (0.00 sec)

mysql> SHOW WARNINGS ;
+---------+------+------------------------------------------------------+
| Level   | Code | Message                                              |
+---------+------+------------------------------------------------------+
| Warning | 1292 | Incorrect date value: '1' for column 'date' at row 1 |
| Warning | 1292 | Incorrect date value: '1' for column 'date' at row 1 |
| Warning | 1265 | Data truncated for column 'studpoint_id' at row 1    |
+---------+------+------------------------------------------------------+
3 rows in set (0.00 sec) 
```

但是我可以通过给出一些值来代替它来正常运行它？在选择语句中。

```
mysql> SELECT sb.id,sb.category,sb.make,sb.name,sb.pic,rs.slot
        FROM studbike AS sb LEFT JOIN reservation AS rs ON sb.id=rs.studbike_id
        AND sb.availability=1 AND  rs.date='2012-06-11' WHERE sb.studpoint_id=1
        ORDER BY category DESC,name DESC \ G
*************************** 1\. row ***************************
      id: 2 category: 126-150
    make: bajaj
    name: pulser
     pic: test.gif
    slot: NULL
*************************** 2\. row ***************************
      id: 1 category: 100-125
    make: bajaj
    name: discover
     pic: test.gif
    slot: NULL 
    2 rows in set (0.00 sec) 
```

问候，
拉维。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:33:02.077

```
EXECUTE stmt USING @sid,@date1; 
```

应该

```
EXECUTE stmt USING @date1,@sid; 
```

订单很重要......

# java - 如何覆盖这个 hashCode 方法？

> ID：10987112
> 
> 赞同：2
> 
> 时间：2012-06-11T20:30:35.977
> 
> 标签：java

至于Person的定义：

```
public class Person {
    private int id;
    private int characteristics;
    public boolean equals (Object obj) {
           if (obj == this) {
                 return true;
           }
           if (obj instanceof Person) {
                 if (id == ((Person) obj).id) {
                     return true;
                 } else if (characteristics == ((Person) obj).characteristics) {
                     return true;
                 }
           }
           return false;
    }
} 
```

导致2个`Person`对象`a`并且如果返回`b`必须具有相同的哈希码，我应该如何实现该方法？`a.equals(b)``true``hashCode`

**解决方案**

`equals`根据Java的等价协议，我的方法实现不正确：*传递*性不满足：`a.id = 1`, `a.characteristic = 2`, `b.id = 1`, `b.characteristic = 3`, `c.id = 2`, `c.characteristic = 3`; `a.equals(b) == true`, `b.equals(c) == true`, 但是`a.equals(c) == false`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T20:56:18.033

由于您的类在它们各自的`id`或`characteristics`字段相等时认为对象相等，因此您可以在此处合理使用的唯一哈希码是所有实例的常量值：

```
public int hashCode() {
    return 0;
} 
```

这将使基于哈希的查找执行得非常糟糕。

非此即彼的测试`equals()`通常是一个坏主意。对象实际上并不*相等*，是吗？也许他们只是“彼此的匹配”？也许您应该考虑不理会`equals()`并实施其他一些比较方法。

* * *

正如 Thomasz 指出的那样，您的`equals()`测试不是传递性的。如果`a.equals(b) && b.equals(c)`是真的那么`a.equals(c)`一定是真的。这*不适*用于您的重载，因此**您的实现违反了`equals()`**. 我强烈敦促您以不同的方法实施此测试，不要`equals()`理会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:40:16.260

这是[intellij-idea](/questions/tagged/intellij-idea "显示标记为“intellij-idea”的问题")为您的班级自动生成的内容：

```
@Override
public int hashCode() {
    int result = id;
    result = 31 * result + characteristics;
    return result;
} 
```

经过几次重构：

```
@Override
public int hashCode() {
    return 31 * id + characteristics;
} 
```

为了记录，只有我还是你`equals()`坏了？`id`如果s 或相等，则您认为两个对象相等`characteristics`，但不一定两者都相等。这意味着您的相等性不是*传递性*的，一旦您的对象进入荒野，这可能会产生真正意想不到的副作用。

这是一个不错的实现：

```
@Override
public boolean equals(Object o) {
    if (this == o) {
        return true;
    }
    if (!(o instanceof Person)) {
        return false;
    }

    Person person = (Person) o;
    return characteristics == person.characteristics && id == person.id;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:00:25.813

如果具有相同`id`意味着始终具有相同`characteristics`（这似乎是您`equals()`有效的必要条件），那么您的哈希码可以`characteristics`单独使用：

```
@Override
public int hashCode() {
    return characteristics;
} 
```

如果不是这种情况，您可能需要重新考虑使用 Java 相等性来表达这种关系，正如@cdhowie 所建议的那样。

# php - FFMPEG 视频转换完成后发送电子邮件 (php)

> ID：10987114
> 
> 赞同：1
> 
> 时间：2012-06-11T20:30:54.603
> 
> 标签：php, ffmpeg

我有一个使用 ffmpeg 转换 avi 的基本 php 脚本：

```
<?php
if (exec("/usr/bin/ffmpeg -i testvideo.avi -sameq -ar 22050 convertvideo.mp4 2> logfile.log")){ 
echo "Success";
}else{ 
    echo "Error"; 
}
?> 
```

现在作为对此的扩展，我想使用 php 检查文件是否仍在转换，如果不应该发送电子邮件，谁能告诉我如何实现这一点？

此外，尽管使用了上面的代码并且文件被成功转换，我总是得到的输出是“错误”，任何人都可以帮助解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T06:23:54.013

以下应该有效：

```
exec("/usr/bin/ffmpeg -i testvideo.avi -sameq -ar 22050 convertvideo.mp4 2> logfile.log", $ret, $val);

if ($val != 0) {        
    // Video conversion fail for some reason
    $msg = "Error converting video: $ret" . "\n";
    echo ($msg);

    // send the email
    mail("no@body.com", "Error convering video", $msg);
} 
```

如果要为 ffmpeg 进程设置超时，请考虑使用[proc_open](http://www.php.net/manual/en/function.proc-open.php)方式（[参见示例](https://stackoverflow.com/questions/2603912/php-set-timeout-for-script-with-system-call-set-time-limit-not-working)）。

# css - Bootstrap 布局仅在 Firefox 中被破坏

> ID：10987119
> 
> 赞同：2
> 
> 时间：2012-06-11T20:31:35.553
> 
> 标签：css, firefox, layout, twitter-bootstrap

我必须清理一些代码并向现有站点添加一些功能。Firefox 12.0 中的布局被破坏

见：[http ://bit.ly/LEqamL](http://bit.ly/LEqamL)

我无计可施。尝试了很多东西，但没有骰子。

页脚和覆盖图像可能看起来损坏了，但是当它动态呈现时，它可以正常工作。我只需要让 999x666 的大图像显示在正确的区域。

任何帮助或方向将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T04:40:35.730

穿上应该可以解决问题`clear: both`。`<div id="display">`

# iphone - 包括 Kal.a（来自 Kal 日历）和包括 libidn.a（xmpp 框架）会导致应用程序崩溃

> ID：10987120
> 
> 赞同：3
> 
> 时间：2012-06-11T20:31:35.587
> 
> 标签：iphone, ios5, xmpp, static-libraries

在非常努力之后，我在办公室的晚上 2 点发布了这个问题。

问题是 ：

1）我在我的应用程序中包含了 Kal 日历（[链接在这里）](https://github.com/klazuka/Kal)

2）在我决定在我的应用程序中包含 xmpp 框架（[xmpp 框架](https://github.com/robbiehanson/XMPPFramework/wiki/GettingStarted_Mac)）之前，它确实工作得很好。

3) 主要问题是当我尝试包含 libidn.a 文件然后编译项目时，它给了我 4 个错误，要删除这些错误，我必须删除“其他链接器标志 -> -all_load”。

4）当我删除 -all_laod 标志并编译时，问题就开始了，应用程序编译成功。但我尝试运行我的应用程序并按日历按钮加载日历它崩溃并出现以下错误：

> -[__NSDate cc_dateByMovingToFirstDayOfTheMonth]：无法识别的选择器发送到实例 0x75b85c0 2012-06-12 01:38:47.483 BizPro[10251:11903] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSDate cc_dateByMovingToFirstDayOfTheMonth] sent to instance 0x75b85c0' *** First throw call stack: (0x209e022 0x22f0cd6 0x209fcbd 0x2004ed0 0x2004cb2 0x12bc3d 0x12bb91 0x13149e 0x1315f6 0x12961 0xa8d38f 0xa8d5eb 0xa9dff1 0xa9e85f 0xa9e9e1 0xbbc5c2 0xa02d21 0x209fe42 0x856679 0x860579 0x7e54f7 0x7e73f6 0x874160 0x9d4f30 0x207299e 0x2009640 0x1fd54c6 0x1fd4d84 0x1fd4c9b 0x26e67d8 0x26e688a 0x9c4626 0x2a9d 0x2a15 0x1) terminate called抛出异常（lldb）

4）我很清楚这个错误是一个误导（NSDate 没有导致崩溃，但静态库的冲突正在这样做，我想是这样），因为当我再次添加 -all_load 标志并从中删除 libidn.a 文件时我的项目，它编译并成功运行，日历顺利显示我的数据。

我在谷歌上搜索了很多..得到的指导很少..将解决方案与工作区相关联等等..但我真的不知道什么是解决方案..请帮助我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T10:48:16.970

```
cc_dateByMovingToFirstDayOfTheMonth 
```

是对 NSDate 的补充，在 Kal 框架的 NSDateAdditions.h 中定义。

我遇到了无穷无尽的问题，想要对 Kal 框架进行更多定制，所以我只是将所有源代码拖到我的项目中。

如果您仍然对框架有问题，请删除 Kal.a 并引入源代码 :) 然后您可能会弄脏它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T13:12:36.763

如果您宁愿将 Kal 作为子项目，解决此问题的方法是链接附加文件。

在下面

项目 -> 构建设置 -> 链接 -> 其他链接器标志

添加“-all_load”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T07:21:13.743

抱歉我回复晚了。。

我解决了问题..

删除 kal.a 文件并仅包含 src 文件夹（所需的所有头文件）

这样我就不会与其他静态库发生冲突...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T09:12:04.547

这里有类似的问题。因为我使用 Parse Framework，无法添加`-all_load`，所以集成静态库对我来说永远不会工作。最简单的方法是将**src**文件夹中的所有源文件添加到我自己的项目中，而不是添加**Kal.xcodeproj**。配置“复制捆绑文件”或“标头搜索路径”等的其他步骤仍然是必要的。我还需要将 Kal_Prefix.pch 中的这些行添加到我自己的 project.pch 中。

```
#import "NSDate+Convenience.h"

#define RGBCOLOR(R,G,B) [UIColor colorWithRed:R/255.0 green:G/255.0 blue:B/255.0 alpha:1]
#define RGBACOLOR(R,G,B,A) [UIColor colorWithRed:R/255.0 green:G/255.0 blue:B/255.0 alpha:A]
#define kDarkGrayColor       RGBCOLOR(51, 51, 51)
#define kGrayColor           RGBCOLOR(153, 153, 153)
#define kLightGrayColor      RGBCOLOR(185, 185, 185) 
```

# php - Hello world VB.NET 类库，从 PHP 调用

> ID：10987125
> 
> 赞同：2
> 
> 时间：2012-06-11T20:32:31.310
> 
> 标签：php, .net, vb.net, com, com-interop

这是 AssemblyInfo.vb：

```
Imports System
Imports System.Reflection
Imports System.Runtime.InteropServices

' General Information about an assembly is controlled through the following 
' set of attributes. Change these attribute values to modify the information
' associated with an assembly.

' Review the values of the assembly attributes

<Assembly: AssemblyTitle("ClassLibrary1")> 
<Assembly: AssemblyDescription("")> 
<Assembly: AssemblyCompany("")> 
<Assembly: AssemblyProduct("ClassLibrary1")> 
<Assembly: AssemblyCopyright("Copyright ©  2012")> 
<Assembly: AssemblyTrademark("")> 

<Assembly: ComVisible(True)> 

'The following GUID is for the ID of the typelib if this project is exposed to COM
<Assembly: Guid("bd484c72-e166-4480-a1fd-71ab12e09e25")> 

' Version information for an assembly consists of the following four values:
'
'      Major Version
'      Minor Version 
'      Build Number
'      Revision
'
' You can specify all the values or you can default the Build and Revision Numbers 
' by using the '*' as shown below:
' <Assembly: AssemblyVersion("1.0.*")> 

<Assembly: AssemblyVersion("1.0.0.0")> 
<Assembly: AssemblyFileVersion("1.0.0.0")> 
```

这是课程：

```
Public Class Class1
    Public Sub HelloWorld()
        MsgBox("hello, world")
    End Sub
End Class 
```

在将 DLL 通过 regasm.exe 后，我尝试从 PHP 访问它。没有反应。

[编辑：现在通过 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\NETFX 4.0 Tools\gacutil.exe 运行它后，我遇到了一个强名称错误，我正在处理现在。]

有没有人有我可以通过 PHP 5 访问的 .NET DLL 的 Hello world 示例（如果我没记错的话，“类库”的另一个词）？到目前为止，我是否在使用这种方法的正确道路上？

这是怎么做到的？谢谢你的帮助。

这是PHP代码顺便说一句：

```
<?php
 $obj = new COM("ClassLibrary1.Class1");
 $output=$obj->HelloWorld();
 echo $output;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T19:59:23.250

PHP 在作为服务运行的 Web 服务器上运行是很正常的——除非您跳过了很多圈，否则这些**无法与桌面交互**，因此您无处`MessageBox`可展示。

# pyqt - 全屏Pyqt中的中央小部件

> ID：10987127
> 
> 赞同：0
> 
> 时间：2012-06-11T20:32:33.450
> 
> 标签：pyqt, qmainwindow

我有一个包含许多dockwidget、工具栏和菜单栏的主窗口。我可以切换dockwidgets和工具栏的可见性，但不能切换菜单栏。为什么下面的代码不起作用？是否可以通过隐藏菜单栏在 PyQt 中仅将 QMainWindow 的中央小部件作为全屏查看？

```
class MainWindow(QMainWindow):

 def __init__(self, parent=None):
    super(MainWindow, self).__init__(parent)
    self.local_grview = QGraphicsView()
    self.local_grview.setSceneRect(0,0,200,200)
    self.setCentralWidget(self.local_grview)

 def fullscreen(self):
    self.hide()
    self.setParent(None)
    self.local_grview.showFullScreen()
    self.local_grview.show() 
```

# java - 根据按下的键更改标签文本

> ID：10987128
> 
> 赞同：1
> 
> 时间：2012-06-11T20:32:37.880
> 
> 标签：java, swing, user-interface, key-bindings

在下面的程序中，我试图根据按下的键更改标签的文本，但我不知道该怎么做。在 TimerListener InnerClass 的 actionPerformed() 方法中定义了按下某个键时要执行的语句。但我不明白如何从那里访问标签。

```
package aircraftPackage;

import java.awt.*;
import java.awt.event.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.net.*;
import java.util.HashMap;
import java.util.Map;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Controller extends JPanel {

    private static final long serialVersionUID = 1L;
    public static final int STEP = 3;
    private static final int TIMER_DELAY = STEP * 8;
    private BufferedImage playerImage = null;
    private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();

    enum Direction {

        UP(KeyEvent.VK_UP, 0, -1), DOWN(KeyEvent.VK_DOWN, 0, 1),
        LEFT(KeyEvent.VK_LEFT, -1, 0), RIGHT(KeyEvent.VK_RIGHT, 1, 0);
        private int keyCode;
        private int xDirection;
        private int yDirection;

        private Direction(int keyCode, int xDirection, int yDirection) {
            this.keyCode = keyCode;
            this.xDirection = xDirection;
            this.yDirection = yDirection;
        }

        public int getKeyCode() {
            return keyCode;
        }

        public int getXDirection() {
            return xDirection;
        }

        public int getYDirection() {
            return yDirection;
        }
    }

    public Controller() {

        for (Direction direction : Direction.values()) {
            directionMap.put(direction, false);
        }
        setKeyBindings();
        Timer timer = new Timer(TIMER_DELAY, new TimerListener());
        timer.start();
    }

    private void setKeyBindings() {
        InputMap inMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actMap = getActionMap();
        for (final Direction direction : Direction.values()) {
            KeyStroke pressed = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, false);
            KeyStroke released = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, true);
            inMap.put(pressed, direction.toString() + "pressed");
            inMap.put(released, direction.toString() + "released");
            actMap.put(direction.toString() + "pressed", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, true);
                }
            });
            actMap.put(direction.toString() + "released", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, false);
                }
            });
        }

    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            boolean moved = false;
            for (Direction direction : Direction.values()) {
                if (directionMap.get(direction)) {
                    if (direction.keyCode == 37) {
                        System.out.println("go LEFT");

                    } else if (direction.getKeyCode() == 39) {
                        System.out.println("go RIGHT");
                    } else if (direction.getKeyCode() == 38) {
                        System.out.println("go UP");
                    }
                    else if (direction.getKeyCode()==40){
                        System.out.println("go DOWN");
                    }
                }
            }
        }
    }

    public static void createAndShowUI() {
        JFrame frame = new JFrame("MoveIcon");
        JPanel panel = new JPanel();
        JLabel jl = new JLabel();
        jl.setText("testing....");
        frame.add(jl);
        frame.add(panel);
        frame.getContentPane().add(new Controller());
        new Controller();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }

    public static void main(String[] args) {

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            @SuppressWarnings("static-access")
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

实际上，我想做的是，在 Netbeans 中创建一个包含各种标签的漂亮表单（在那里更容易做到），并使用上面的代码来了解按下了哪个键并相应地更改每个标签的值。我试过了，但没有用。请帮助我。谢谢。

**PS**：*你会在一些问题或一些网站上找到上面代码的部分，因为我不是自己写的。我之前对键绑定/keyListeners 等没有任何经验。这只是我正在做的一个项目的一部分。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:30:15.947

我尝试删除您现在不需要的所有内容，并添加了一个`JLabel`显示如下方向的内容：

![去](../Images/feb8207a226e06fc49732313d888dd02.png) ![上](../Images/6548e5787a2d66fd0f5873a1442e42b8.png) ![上 下 左 右](../Images/9ef349793f83520e739f7e271f37dbbe.png)

* * *

这应该让你开始。

```
import java.awt.event.*;
import java.util.HashMap;
import java.util.Map;
import javax.swing.*;

public class Controller extends JPanel {

    private static final long serialVersionUID = 1L;
    private static final int STEP = 3;
    private static final int TIMER_DELAY = STEP * 8;
    private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();

    private JLabel lblDirection = new JLabel();

    enum Direction {

        UP(KeyEvent.VK_UP), DOWN(KeyEvent.VK_DOWN),
        LEFT(KeyEvent.VK_LEFT), RIGHT(KeyEvent.VK_RIGHT);

        private int keyCode;

        private Direction(int keyCode) {
            this.keyCode = keyCode;
        }

        public int getKeyCode() {
            return keyCode;
        }
    }

    public Controller() {

        add(lblDirection);

        for (Direction direction : Direction.values()) {
            directionMap.put(direction, false);
        }
        setKeyBindings();
        Timer timer = new Timer(TIMER_DELAY, new TimerListener());
        timer.start();
    }

    private void setKeyBindings() {
        InputMap inMap = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap actMap = getActionMap();
        for (final Direction direction : Direction.values()) {
            KeyStroke pressed = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, false);
            KeyStroke released = KeyStroke.getKeyStroke(direction.getKeyCode(), 0, true);
            inMap.put(pressed, direction.toString() + "pressed");
            inMap.put(released, direction.toString() + "released");
            actMap.put(direction.toString() + "pressed", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, true);
                }
            });
            actMap.put(direction.toString() + "released", new AbstractAction() {

                private static final long serialVersionUID = 1L;

                @Override
                public void actionPerformed(ActionEvent e) {
                    directionMap.put(direction, false);
                }
            });
        }
    }

    private class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            StringBuilder s = new StringBuilder("go ");
            for (Direction direction : Direction.values()) {
                if (directionMap.get(direction)) {
                    s.append(direction.name() + " ");
                }
            }
            lblDirection.setText(s.toString());
        }
    }

    public static void createAndShowUI() {
        JFrame frame = new JFrame("KeyMapping");
        frame.getContentPane().add(new Controller());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 80);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowUI();
            }
        });
    }
} 
```

# asp.net-mvc - 用于从 _Layout 中查找元素的 jQuery 选择器

> ID：10987135
> 
> 赞同：1
> 
> 时间：2012-06-11T20:33:25.147
> 
> 标签：asp.net-mvc, html-table, jquery-selectors

我在一个视图中有以下表结构，它显示在 _Layout 视图中，而不是 @RenderBody

```
<table>
   <thead>
      <tr>
          <th>first</th>
          <th>second</th>
          <th>third</th>
      </tr>
   </thead>
   <tbody>
      <tr>
          <td>1st</td>
          <td>2nd</td>
          <td>3rd</td>
      </tr>
   </tbody>
</table> 
```

在我的 _Layout 页面中，我想将 contextMenu 事件应用于第**th 个**元素，但是，作为初学者，我很难确定相同的选择器。

我尝试过的一些组合 - 我在一个名为 oTable 的变量中引用了我的表

```
oTable.$('tr th').contextMenu ....

oTable.$('thead tr th').contextMenu ....

$('table.tableID th').contextMenu .... 
```

他们都没有工作。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:11:23.000

如果您只是想选择所有 th 元素，那么您不需要比这更复杂的任何东西：

```
$('th').contextMenu .... 
```

如果您的表具有关联的 id，则以下内容将允许您仅定位该表：

```
$('#yourid th') 
```

# ios - ios - 我的自定义 @synchronize setter \ getter 有什么问题？

> ID：10987139
> 
> 赞同：0
> 
> 时间：2012-06-11T20:33:58.837
> 
> 标签：ios, properties

这是属性声明：

```
@property (atomic, weak) zooView* zooView; 
```

这是我的自定义实现：

```
__weak zooView* _zooView;

-(zooView*) getZooView
{
    return _zooView;
}

-(void) setZooView:(btBasePinView*)inZooView
{
    _zooView = inZooView;
} 
```

我正在同一个类的另一个线程上访问此属性：

```
[self.zooView imgLoadComplete:self.fullImg]; 
```

出于某种原因，当我访问 self.zooView 时，我返回一个 nil 对象。如果我删除自定义 setter \ getter，一切正常。

可能是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:05:10.337

zooView 的 getter 应该是 -zooView 而不是 -getZooView。

要拥有一个实例变量而不是全局变量，只需对其进行综合即可。

```
@synthesize zooView = _zooView;

-(zooView*) zooView
{
    return _zooView;
}

-(void) setZooView:(btBasePinView*)inZooView
{
    _zooView = inZooView;
} 
```

这将使用您指定的 getter/setter 定义一个 ivar _zooView。

# asp.net - 在 ASP.net 中将编辑模式设置为 incell RadGrid

> ID：10987141
> 
> 赞同：1
> 
> 时间：2012-06-11T20:34:17.527
> 
> 标签：asp.net, .net, telerik, radgrid

我正在尝试在 Telerik 的 Radgrid 中将编辑模式设置为 incell。网上有例子，不过都是 HTML 格式的。你怎么能在asp中做到这一点？

PS 我有一个网格，其中包含从数据库中自动检索的数据。我想要做的是能够单独编辑每个单元格并将它们保存到数据库中。

我不知道如何编辑任何东西。这是 C# 和 aspx 代码。

aspx：

```
 <body> 
<form id="form1" runat="server"> 
<asp:ScriptManager ID="ScriptManager1" runat="server"> 
</asp:ScriptManager> 
<div> 

    <telerik:RadGrid ID="GrdConfig" runat="server" CellSpacing="0" GridLines="None" 
        EnableLinqExpressions="False" oncolumncreated="GrdConfig_ColumnCreated" 
        CssClass="MyRadGridCssClass" AllowPaging="True"> 
        <ClientSettings> 
            <Resizing AllowColumnResize="True" /> 
            <Scrolling AllowScroll="True" /> 
        </ClientSettings> 
        <MasterTableView> 
            <CommandItemSettings ExportToPdfText="Export to PDF"></CommandItemSettings> 

            <RowIndicatorColumn Visible="True" FilterControlAltText="Filter RowIndicator column"> 
                <HeaderStyle Width="20px"></HeaderStyle> 
            </RowIndicatorColumn> 

            <ExpandCollapseColumn Visible="True" FilterControlAltText="Filter ExpandColumn column"> 
                <HeaderStyle Width="20px"></HeaderStyle> 
            </ExpandCollapseColumn> 

            <EditFormSettings> 
                <EditColumn FilterControlAltText="Filter EditCommandColumn column"></EditColumn> 
            </EditFormSettings> 

        </MasterTableView> 

        <FilterMenu EnableImageSprites="False"></FilterMenu> 
    </telerik:RadGrid> 

</div> 
</form> 
```

C＃：

```
 public partial class Configurations : System.Web.UI.Page 
{ 

    protected void Page_Load(object sender, EventArgs e) 
    { 

             ** Code to extract data from database goes here**

        GrdConfig.DataSource = data; 
        GrdConfig.DataBind(); 

        GridGroupByExpression expression = GridGroupByExpression.Parse("ConfigFile[Config File:] Group by ConfigFile"); 
        GrdConfig.MasterTableView.GroupByExpressions.Add(expression); 

        GridColumn cConfig = GrdConfig.MasterTableView.GetColumnSafe("ConfigFile"); 

        cConfig.Visible = false; 

        GrdConfig.Rebind(); 

    } 

    protected void GrdConfig_ColumnCreated(object sender, GridColumnCreatedEventArgs e) 
    { 
        if (e.Column is GridGroupSplitterColumn) 
        { 
            e.Column.HeaderStyle.Width = Unit.Pixel(1); 
            e.Column.HeaderStyle.Font.Size = FontUnit.Point(1); 
            e.Column.ItemStyle.Width = Unit.Pixel(1); 
            e.Column.ItemStyle.Font.Size = FontUnit.Point(1); 
            e.Column.Resizable = false; 
        } 
    } 

    protected void GrdConfig_ItemDataBound(object sender, GridItemEventArgs e) 
    { 
        if (e.Item is GridGroupHeaderItem) 
        { 
            GridGroupHeaderItem groupHeader = (GridGroupHeaderItem)e.Item; 
            groupHeader.Font.Bold = true; 
        } 
    } 
} 
```

}

# windows-authentication - 如何使用 COAUTHIDENTITY 在 CoCreateInstanceEx 中正确模拟另一个用户？

> ID：10987142
> 
> 赞同：2
> 
> 时间：2012-06-11T20:34:25.120
> 
> 标签：windows-authentication, dcom

我目前正在开发一个 MFC 应用程序，该应用程序需要从另一个系统上运行的 COM 对象中检索数据。当两个系统都运行 Windows XP 并且手动设置相同的用户帐户（即两个系统上相同的用户名和密码，没有域）时，我们已经拥有相同的数据交换机制并得到完全支持。问题是我正在尝试对其进行设置，以便我可以从另一台设置了相同用户帐户但在公司域用户帐户下登录的计算机访问同一个 DCOM 系统。

现在，如果我使用 Run As 手动运行我的应用程序并指定备用用户，它就可以工作，但我正在寻找更好的解决方案。当我在 CoCreateInstanceEx 中为 COSERVERINFO 设置 COAUTHIDENTITY 时，我指定了备用帐户的用户名和密码，但这似乎不起作用。我在域条目中尝试了各种方法——本地计算机的计算机名称、远程计算机的计算机名称，并将其留空——但似乎没有任何帮助。

我尝试在服务器计算机上编辑对象的 DCOM 权限以允许对所有人帐户的完全访问，但这似乎没有帮助，而且我无法找到任何有意义的错误消息来说明真正的错误。如果我可以在服务器计算机上获得某种日志消息以确切了解使用 Run As 运行它时遇到的凭据，这可能会有所帮助。有人有什么想法吗？或者，当您从非域帐户建立 DCOM 连接时，也许知道系统对域的用途（有些事情暗示使用了计算机名称，但在我尝试时不起作用）。

代码如下：

```
COAUTHINFO      AuthInfo;
COAUTHIDENTITY  AuthIdentity;
COSERVERINFO    ServerInfo;
MULTI_QI        Results;    

AuthIdentity.Domain             = (unsigned short *) w_domain;
AuthIdentity.DomainLength       = wcslen( w_domain);
AuthIdentity.Flags              = SEC_WINNT_AUTH_IDENTITY_UNICODE;
AuthIdentity.Password           = (unsigned short *) w_password;
AuthIdentity.PasswordLength     = wcslen(w_password);
AuthIdentity.User               = (unsigned short *) w_username;
AuthIdentity.UserLength         = wcslen(w_username);

AuthInfo.dwAuthnLevel           = RPC_C_AUTHN_LEVEL_CALL; 
AuthInfo.dwAuthnSvc             = RPC_C_AUTHN_WINNT; 
AuthInfo.dwAuthzSvc             = RPC_C_AUTHZ_NONE;
AuthInfo.dwCapabilities         = EOAC_NONE;
AuthInfo.dwImpersonationLevel   = RPC_C_IMP_LEVEL_IMPERSONATE;
AuthInfo.pAuthIdentityData      = &AuthIdentity;
AuthInfo.pwszServerPrincName    = NULL;

ServerInfo.dwReserved1  = 0;
ServerInfo.dwReserved2  = 0;
ServerInfo.pAuthInfo    = &AuthInfo;
ServerInfo.pwszName     = w_nodename;

Results.pIID = &_uuidof(_DS_SessionContext);
Results.pItf = NULL;
Results.hr   = 0;

hr = CoCreateInstanceEx(clsid, NULL, CLSCTX_ALL, &ServerInfo, (ULONG) 1, &Results);                             
if(FAILED(hr))
{
    m_Error.Format("(0x%x) CoCreateInstanceEx for _DS_DataFrame failed.",hr);
    m_Error2.Format("Make sure computer IP address is correct and connected.");
    CoUninitialize();
    UpdateData(false);
    UpdateWindow();
    return false;           
}

pSession = (_DS_SessionContext *)Results.pItf;

hr = pSession->raw_DS_GetVersion(&DSStatus, &version);
if(FAILED(hr))
{
    m_Error.Format("(0x%x)GetVersion",hr);
    CoUninitialize();
    UpdateData(false);
    UpdateWindow();
    return false;           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T22:55:08.790

啊，我想通了。事实证明，在 DCOM 中，创建实例并在其上调用函数不会自动使用相同的安全毯。传递给 CoCreateInstanceEx 的 COSERVERINFO 中的身份验证信息仅适用于创建实例，当我稍后在该实例上调用函数时，它会失败，因为我正在使用应用程序的凭据调用这些函数。

为了正确地做到这一点，在实例上调用函数之前，我必须首先调用（为清楚起见省略了错误处理）：

```
 hr = CoSetProxyBlanket(Results.pItf, RPC_C_AUTHN_WINNT, RPC_C_AUTHZ_NONE, NULL, RPC_C_AUTHN_LEVEL_CALL, 
    RPC_C_IMP_LEVEL_IMPERSONATE, &AuthIdentity, EOAC_NONE); 
```

这会将用于调用实例的安全毯设置为与创建实例相同的安全毯，因此一切正常。

# c++ - 是否可以将 pnames.icu 的内容存储在 Windows C++ 全局变量中？

> ID：10987144
> 
> 赞同：0
> 
> 时间：2012-06-11T20:34:44.197
> 
> 标签：c++, winapi

我们正在考虑从 PCRE 正则表达式更改为 ICU 正则表达式，以利用 ICU 的 UTF-8 Unicode 正则表达式。我们编写了一个测试程序来加载 ICU pnames.icu 文件，该文件是编译和执行看似正常运行的 ICU UTF-8 正则表达式所必需的。是否可以将 pnames.icu 的内容存储在 Windows DLL 全局变量中以避免将 ICU pnames.icu 发送给用户？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:07:41.050

首先将文件添加到资源脚本中，方法与添加图标的方式相同。不同之处在于您将按名称而不是整数值指定资源，并告诉资源编译器文件是称为“ICU”的自定义资源类型

```
pname1      ICU     "pname1.icu"
pname2      ICU     "pname2.icu"
pname3      ICU     "pname3.icu" 
```

要加载资源，您首先需要按名称和类型（在本例中为 ICU）找到它。找到它后，您可以告诉 Windows 加载资源数据，然后“锁定”它以获得指向它的指针。

```
//  Find the resource
HRSRC hRes = FindResource(NULL, L"pname1", L"ICU");

//  Load the resource 
HGLOBAL hResLoad = LoadResource(NULL, hRes);

void* icuData = LockResource(hResLoad);

// ... do something with the resource @ icuData

//  We're done so let it go.
UnlockResource(icuData); 
```

# c# - c# System.Data.SQLite 参数错误

> ID：10987145
> 
> 赞同：0
> 
> 时间：2012-06-11T20:34:46.303
> 
> 标签：c#, parameters, system.data.sqlite

我在 C# 上使用 SQlite 数据库并且参数有错误问题。

```
using System.Data.SQLite; 
```

这是一个主要的代码部分：

```
 this.dbUpdateCommand = new SQLiteCommand();

            dbUpdateCommand.Parameters.AddWithValue("@paramNewValue", (string)this.valueNew);
            dbUpdateCommand.Parameters.AddWithValue("@paramPredValue", (string)this.valuePred);
            dbUpdateCommand.Parameters.AddWithValue("@paramTableName", (string) this.tableName);
            dbUpdateCommand.Parameters.AddWithValue("@paramColumnName", (string)this.columnInDB);
            dbUpdateCommand.Parameters.AddWithValue("@paramKeyField", (string)this.keyFieldInDB);
            dbUpdateCommand.Parameters.AddWithValue("@paramKeyValue", (string)this.keyValueInDB);

            dbUpdateCommand.CommandText = "UPDATE @paramTableName SET @paramColumnName=@paramNewValue WHERE @paramKeyField=@paramKeyValue;";

            dbUpdateCommand.ExecuteNonQuery(); 
```

它向我抛出异常“@paramTableName”附近的 SQLite 错误：语法错误”

我试图制作没有参数但使用字符串连接的纯 SQL 语句，并且它适用于相同的变量（this.tableName 是有效的数据库表名）所以我的参数似乎有问题。有谁知道，什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:43:12.577

您不能使用参数来引用对象（表和列）。您需要将实际的表名和列名放入查询中。这样做时要小心 SQL 注入。

# mysql - 如何在mysql中加入另一个表中的随机行？

> ID：10987146
> 
> 赞同：2
> 
> 时间：2012-06-11T20:34:46.340
> 
> 标签：mysql

我有 2 张桌子。

一份清单——`thing_id, thing_name, thing_status`

其他表列出了每个事物的属性。

```
attribute_id, attribute_thing, attribute_name, attribute_status 
```

`thing_id`=`attribute_thing`

我基本上我想抓住一个随机的东西，`thing_status = 1`然后我需要将它加入到一个随机属性中`attribute_status = 1`

每个事物可能有 0 到 N 个属性，0 属性事物仍应返回。如果一个事物具有多个属性，则应返回一个随机属性。

我有以下查询：

```
SELECT * FROM things
LEFT JOIN attributes ON thing_id = attribute_thing AND attribute_status = 1
WHERE thing_status = 1
GROUP BY thing_id
ORDER BY rand()
LIMIT 1 
```

这里的问题是它总是加入第一个属性（`attribute_id`那个东西最低。我需要选择一个随机的。

删除 GROUP BY 子句是可行的，但是具有许多属性的东西更有可能被选中。因此，具有 30 个属性的事物被选中的可能性是具有 1 个属性的事物的 30 倍。我希望所有的事情都一视同仁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:51:13.657

If you need only 1 integer column from attributes, you could do something like:

```
 SELECT SUBSTRING_INDEX(GROUP_CONCAT(attributes.id ORDER BY RAND() SEPARATOR ',')),',',1) 
```

... if you need more, I see no alternatives other nesting some subqueries.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:54:36.877

Try this:

```
SELECT 
    *
FROM 
    things a
LEFT JOIN
    attributes b ON a.thing_id = b.attribute_things AND b.attribute_status = 1
WHERE
    a.thing_id = 
    (
        SELECT c.thing_id
        FROM
        (
            SELECT thing_id
            FROM things
            WHERE thing_status = 1
            ORDER BY RAND()
            LIMIT 1
        ) c
    )
ORDER BY
    RAND()
LIMIT 1 
```

To get a random value from a subquery via `ORDER BY RAND() LIMIT 1`, turns out you have the wrap the subquery in *another* subquery.

# sql - 来自 Select 语句的 Teradata 更新表

> ID：10987152
> 
> 赞同：3
> 
> 时间：2012-06-11T20:34:57.057
> 
> 标签：sql, teradata

抱歉，如果标题不清楚。基本上我试图从多个表中选择某些记录，然后为返回的记录更新某个列值。

T-SQL 实现

```
 UPDATE 
        CUSTOMERS
    SET
        LIKES_US = 'Y'
    FROM
        RESTAURANT REST INNER JOIN CUSTOMERS CUST ON REST.LINK_ID = CUST.LINK_ID
        WHERE
        REST.REST_TYPE = 'Diner' AND CUST.LIKES_US IS NULL 
```

甲骨文

```
 UPDATE 
       (SELECT CUST.LIKES_US
        FROM CUSTOMERS CUST INNER JOIN RESTAURANT REST ON CUST.LINK_ID=REST.LINK_ID
        WHERE REST.REST_TYPE = 'Diner' AND CUST.LIKES_US IS NULL) NEW_CUST
    SET
        NEW_CUST.LIKES_US = 'Y'; 
```

我尝试在 Teradata 中执行与在 Oracle 中相同的操作，但出现以下错误：

```
Executed as Single statement.  Failed [3707 : 42000] Syntax error, expected something like a name or a Unicode delimited identifier or an 'UDFCALLNAME' keyword between the 'UPDATE' keyword and '('. 
Elapsed time = 00:00:00.003 

STATEMENT 1: Unknown failed. 
```

我在网上寻找解决方案，但没有运气。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T21:57:24.867

您是否尝试过使用 Teradata 的以下语法：

```
UPDATE CUSTOMERS C1
  FROM (SELECT C2.LINK_ID
          FROM CUSTOMERS C2
         INNER JOIN RESTAURANTS R2
            ON C2.LINK_ID = R2.LINK_ID
        WHERE R2.REST_TYPE = 'DINER'
          AND C2.LIKES_US IS NULL) D1
   SET LIKES_US = 'Y'
 WHERE C1.LINK_ID = C2.LINK_ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-24T03:04:59.997

我认为在这种特定情况下，下面的查询会执行得更好一些，因为它需要少一个连接。

```
UPDATE C
FROM CUSTOMERS  C, RESTAURANTS R
SET LIKES_US = 'Y'
WHERE 
C.LINK_ID = R.LINK_ID
AND R.REST_TYPE = 'DINER'
AND C.LIKES_US IS NULL 
```

# mysql - MySQL 列数据以逗号分隔列表形式返回

> ID：10987154
> 
> 赞同：5
> 
> 时间：2012-06-11T20:35:03.907
> 
> 标签：mysql

我目前有一个 MySQL 表，如：

```
id | friend
1  |   2
1  |   5
1  |   10
3  |   6
15 |   19
21 |   4 
```

我正在尝试获取一个特定用户的所有朋友 ID，并将它们排列成一个逗号分隔的列表。例如，抓取 user1 的好友，返回为

```
$friend_list = 2,5,10 
```

目前，我有：

```
$sql = "SELECT friend FROM table__friends WHERE id = ".$user_id; 
```

不过，这只占一排..请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T20:37:19.013

您想使用 GROUP_CONCAT ：

```
$sql = "SELECT GROUP_CONCAT(friend) FROM table__friends GROUP BY id HAVING id = ".$user_id; 
```

根据更好的答案调整正确性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T20:39:14.513

```
$sql = "SELECT GROUP_CONCAT (DISTINCT friend SEPARATOR ',') 
      FROM table_friends GROUP BY id 
       HAVING id =".$user_id; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:43:54.147

您的查询将返回多行 - 听起来您只是在阅读第一行。你想要这样的东西：

```
$sql = "SELECT friend FROM table__friends WHERE id = "
  . mysql_real_escape_string($user_id);

$result = mysql_query($sql);
if (!$result) {
  die("Something bad happened");
}

$friend_arr = array();
while ($row = mysql_fetch_array($result)) {
  $friend_arr[] = $row[0];
}

$friend_list = implode(',', $friend_arr); 
```

发布您用于运行查询的 PHP 代码，我们将能够提供更多帮助。

几点注意事项：

*   我添加了[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)功能。以这种方式清理用户输入对于避免[SQL 注入](https://en.wikipedia.org/wiki/SQL_injection)攻击***至关重要。***
*   取决于您实际在做什么 - 存储以逗号分隔的字符串列表很有可能不是一个好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:39:16.307

您可能正在寻找`GROUP_CONCAT(column)`功能。[这里](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)和[这里](http://www.mysqlperformanceblog.com/2006/09/04/group_concat-useful-group-by-extension/)的例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T20:43:48.223

我使用了一个名为 @a 的变量来存储 id，最后你有变量中的值或尝试使用限制、分组排序，如下所示：

```
mysql> show create table actor\G
*************************** 1\. row ***************************
       Table: actor
Create Table: CREATE TABLE `actor` (
  `actor_id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `first_name` varchar(45) NOT NULL,
  `last_name` varchar(45) NOT NULL,
  `last_update` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`actor_id`),
  KEY `idx_actor_last_name` (`last_name`)
) ENGINE=InnoDB AUTO_INCREMENT=207 DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> set @a:=0;
Query OK, 0 rows affected (0.00 sec)

mysql> select @a:=concat(@a,",",actor_id) as actor_id from actor where actor_id>195 order by (actor_id) desc limit 1;
+----------------------------+
| actor_id                   |
+----------------------------+
| 0,196,197,198,199,200,205, |
+----------------------------+
1 row in set (0.00 sec) 
```

在您的情况下，更改“WHERE 条件”

或者你也可以在选择之后：

```
mysql> select @a;
+-------------------------------+
| @a                            |
+-------------------------------+
| 0,196,197,198,199,200,205,206 |
+-------------------------------+
1 row in set (0.00 sec) 
```

# c++ - std::cout 有返回值吗？

> ID：10987156
> 
> 赞同：10
> 
> 时间：2012-06-11T20:35:05.140
> 
> 标签：c++, return, cout

我很好奇 std::cout 是否有返回值，因为当我这样做时：

```
cout << cout << ""; 
```

打印了一些十六进制代码。这个打印的值是什么意思？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T20:39:04.383

因为 的操作数`cout << cout`是用户定义的类型，所以表达式实际上是一个函数调用。编译器必须找到`operator<<`与操作数匹配的最佳值，在这种情况下，它们都是 type `std::ostream`。

有许多候选运算符重载可供选择，但我将按照通常的重载解决过程来描述最终被选中的一个。

`std::ostream`有一个转换运算符，允许转换为`void*`. 这用于将流的状态测试为布尔条件（即，它允许`if (cout)`工作）。

右侧操作数表达式`cout`被隐式转换为`void const*`使用此转换运算符，然后调用采用 an和 a的`operator<<`重载来写入此指针值。`ostream&``void const*`

请注意，由`ostream`to`void*`转换产生的实际值是未指定的。该规范仅要求如果流处于错误状态，则返回空指针，否则返回非空指针。

* * *

流插入的`operator<<`重载确实有一个返回值：它们返回作为操作数提供的流。这就是允许链接插入操作（对于输入流，使用 提取操作`>>`）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-11T20:36:04.473

`cout` **没有返回值**。`cout`是一个类型的对象`ostream`。`operator <<`有一个返回值，它返回一个对`cout`.

请参阅[http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)以供参考。

唯一匹配的签名是：

~~ostream& 运算符<< (ostream& ( *pf )(ostream&));~~

~~所以它返回指向`operator<<`成员的指针。~~

詹姆斯回答中的那个。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:37:32.263

我相信那将是“”打印到的 ostream 对象的地址

# mysql - mysql 在表 1 上插入触发器后，在表 2 中插入，该触发器具有更新表 1 的 after insrt 触发器

> ID：10987160
> 
> 赞同：1
> 
> 时间：2012-06-11T20:35:28.177
> 
> 标签：mysql, recursion, triggers, mysql-error-1442

我有两个表，一个名为**fs_note**，另一个名为**dumy_fs_note**

，我在插入之后创建，在**fs_table**上的 Delete 触发器之后，将带有计算数据的行插入到具有后插入触发器的**dumy_fs_table**，该触发器应使用新值更新 fs_table 中的某一行
问题是现在我有错误：
`#1442 Can't update table 'fs_note' in stored function/trigger because it is already used by statement which invoked this stored function/trigger.`
为什么会这样？是 dumy_fs_note 表试图更新 fs_table 不是同一个表，知道有什么问题吗？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:41:25.217

是的，你就是不能那样做。Mysql 以这种方式防止循环循环和内存问题......就像更新正在解析的游标：一些引擎允许它，其他引擎不允许。

# php - 是否有 Python 的 RedBeanPHP 等价物？

> ID：10987162
> 
> 赞同：1
> 
> 时间：2012-06-11T20:35:36.827
> 
> 标签：php, python, mysql, orm, redbean

当我说“等效”时，我指的是允许相同工作方式的 ORM。那是;

*   设置数据库
*   分配和编辑“beans”（表格行），就好像表格已经准备好一样，而表格正在幕后创建
*   生产前审查、索引和完善表结构

感谢任何线索

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:43:11.130

是的，它叫做 PyBean，你可以在这里找到它：

[http://pypi.python.org/pypi/pybean](http://pypi.python.org/pypi/pybean)

从网站：

> PyBean 旨在作为 Python RedBeanPHP 实现的概念验证（有关原始概念，请参见[http://www.redbeanphp.com/](http://www.redbeanphp.com/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T00:26:13.897

简短的回答，有一个`PyBean`由 Gabor de Mooij 回答的概念证明，但它几乎不提供任何功能并且不能使用。没有其他 Python 库可以像 PyBean 一样工作。

# java - 跨多个线程的任务的日志关联

> ID：10987165
> 
> 赞同：1
> 
> 时间：2012-06-11T20:36:06.720
> 
> 标签：java, logging, log4j

我的软件中的任务涉及几个步骤，其中每个步骤可能会或可能不会在不同的线程中执行。每个步骤都有一些日志，我使用 log4j 作为日志服务。

一个令人头疼的问题是很难将不同线程打印的日志与它们所属的任务相关联。在单线程模式下，线程名称是一个很好的指标，但在多线程模式下不起作用。我不想通过线程传递任务指示器，因为它很烦人并且会给程序员带来负担。

我想知道有人遇到过同样的问题并有好的解决方案吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:46:19.297

查找[log4j](http://wiki.apache.org/logging-log4j/NDCvsMDC)关于 MDC（映射诊断上下文）和 NDC（嵌套诊断上下文）的文档。[以下是这篇文章](http://onjava.com/pub/a/onjava/2002/08/07/log4j.html?page=3)的节选

> 嵌套诊断上下文 (NDC) 和映射诊断上下文 (MDC) 在涉及一个应用程序同时为多个客户端提供服务的情况下提供帮助，并且您有兴趣从这些多个客户端中的每一个中分离或区分日志内容。Web 应用程序就是这种情况的一个很好的例子。
> 
> 那么我们如何从多个客户端中分离或区分内容呢？通过使用特定于客户端的信息标记每个日志语句。在典型的 Web 应用程序中，这可能包括客户端的 IP 地址，servlet 容器可以随时使用该地址。因此，在 NDC 中，您在进入上下文时将此信息推送到堆栈上，并在离开该上下文时将其弹出。log4j 在写入 appender 时使用此特定于上下文的信息，如果在您的关联布局中，您使用 %x 转换模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:54:33.580

为此目的创建了两个类 org.apache.log4j.MDC 和 org.apache.log4j.NDC。只需参考 Javadocs：[NDC](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html)和[MDC](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html)

# javascript - mootools 类型函数

> ID：10987173
> 
> 赞同：4
> 
> 时间：2012-06-11T20:36:27.807
> 
> 标签：javascript, object, constructor, mootools

所以我试图通过学习 Mootools 内部的工作原理来学习 javascript。我正在专门查看这些行：

```
var Type = this.Type = function(name, object){
    if (name){
        var lower = name.toLowerCase();
        var typeCheck = function(item){
            return (typeOf(item) == lower);
        };

        Type['is' + name] = typeCheck;
        if (object != null){
            object.prototype.$family = (function(){
                return lower;
            }).hide();

        }
    }

    if (object == null) return null;

    object.extend(this);
    object.$constructor = Type;
    object.prototype.$constructor = object;

    return object;
};

//some more code

new Type('Type',Type); 
```

这里发生了什么？

在底部的构造函数语句中分配给的对象是什么，全局窗口对象？

当 Type 函数似乎只更新传入的对象而不是创建一个新对象时，为什么用 new 语句调用它作为构造函数？

具体来说，object.extend(this); 行中的“this”是什么？? 它是全局窗口对象吗，如果是的话，是否将该对象的所有键、值对添加到 Type 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:24:10.937

哎呀，最近的问题似乎更多地集中在 mootools 内部。

由于我不是核心开发人员，因此我将尽我所能回答。

`Type`在 MooTools 中与 Class 非常相似（实际上，[Class 构造函数本身就是一个 Type](https://github.com/mootools/mootools-core/blob/master/Source/Class/Class.js#L19)），但它更关注数据/值和值的类型。它还旨在扩展 ECMA 规范定义的原生类型并使其更加灵活。

我想一般来说谈论数据类型（`String`, `Number`, `Array`,`Object`等）是没有意义的。为什么需要扩展它们？好吧，对于初学者来说，Duct Typing 在 js 中有点古怪。`typeof {}; // object`, `typeof []; // object`,`typeof new Date(); // object`等等 - 不是最有帮助的，即使因为所有类型都继承自 object 并且将它们组合在一起是合乎逻辑的，它也无助于您编写代码。

因此，在 js 对象的上下文中，它们是从构造函数对象创建的......

Type 所做的不是替换构造函数，而是通过向其添加新方法或属性来更改现有构造函数。

例如。`new Type('Array', Array);`

这会将本机 Array 构造函数转换为某种类型的对象。您不需要保存结果或任何东西 - 这是一种一次性操作，可以修改原始文件并使其保持打开状态以供操作。

`typeOf(Array); // type`

那么，有什么不同呢？好吧，对于初学者来说，`typeOf([])`现在能够真正告诉我们它到底是什么 - `array`。这里真正发生的是：`object.extend(Type);`，神奇的一点。它会将 Type 对象上定义的所有属性复制到目标对象 - 您可以在此处查看它们：

[https://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L211-232](https://github.com/mootools/mootools-core/blob/master/Source/Core/Core.js#L211-232)

因此，您新创建的 Type 立即获得了所有重要的`implement`方法`extend`。

更高级的是，让我们创建一个基于原生 Array 构造函数的新类型：

```
var foo = new Type('foo', Array),
    a = new foo();
// it's a real boy!
a.push('hi');
// ['hi'], foo, object
console.log(a, typeOf(a), typeof a); 
```

但是，如果我们想要一个自定义类型呢？一个神奇而特别的？没问题，因为参数 2 实际上可以是一个（匿名）函数。

```
var Awesome = new Type('awesome', function(name, surname) {
    // console.log('I R teh construct0r!'); 
    this.name = name;
    this.surname = surname;
});

// extend it a little.
Awesome.implement({
    getName: function() {
        return this.name;
    },
    getSurname: function() {
        return this.surname;
    }
});

var Dimitar = new Awesome('dimitar', 'christoff');
console.log(typeOf(Dimitar)); // awesome
console.log(Dimitar.getName()); // dimitar 
```

在另一个示例中，查看 DOMEvent。它采用上述方法，使其成为更快更精简的 Object 类型。[https://github.com/mootools/mootools-core/blob/master/Source/Types/DOMEvent.js#L21](https://github.com/mootools/mootools-core/blob/master/Source/Types/DOMEvent.js#L21)

那为什么不是一堂课呢？因为，课程更昂贵，并且事件一直在发生。

我希望这对你有所帮助。要获得更详细的解释，请在邮件列表中询问并希望获得最好的结果，也许核心开发人员会有时间，因为这不是您的标准“我如何让手风琴工作”类型的问题......

# r - 防止 R 在使用“as.numeric”时将非数字字符串强制为“NA”

> ID：10987176
> 
> 赞同：1
> 
> 时间：2012-06-11T20:36:52.370
> 
> 标签：r

我想将一列数字转换为数字，但某些单元格显示“新建”和“已删除”，我想将其保留为字符。

如果我使用`as.numeric(df$col1)`，数字将转换为数字，但单词被强制转换为“NA”值。

有什么方法可以在防止这种强制的同时将所有数字转换为数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T20:41:07.380

你不能用向量来做，因为向量只能包含一个类型。但是，您可以使用列表来完成。

```
Data <- data.frame(col1=c("1","2","New","3","Gone"), stringsAsFactors=FALSE)
List <- lapply(as.list(Data$col1), type.convert, as.is=TRUE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:39:41.607

data.frame 的一列将始终属于同一类型。因此，您不能将字符串“New”和数字 5 放在同一列中。

但是，一个让你上路的例子：

```
x <- c('New', 1, 'Gone', 2)

ifelse(is.na(as.numeric(x)), x, as.numeric(x)) 
```

根据您所做的事情，这可以扩展到适用于您的特定情况。

根据 Joshua 的评论，您可以在`ifelse`语句中使用函数：

```
ifelse(is.na(as.numeric(x)), sprintf('its a string %s', x), sprintf('its a number %f', as.numeric(x))) 
```

但是，处理这种情况的常用技术是约书亚在他的回答中概述的。

# salesforce - 如何恢复以前版本的页面布局？

> ID：10987178
> 
> 赞同：0
> 
> 时间：2012-06-11T20:36:59.117
> 
> 标签：salesforce, apex-code, visualforce, force.com

我使用 Apex 在我们的 QA 环境中修改了页面布局，但没有从服务器刷新（我上次从服务器刷新是 10 天前）。在此期间，其他人使用 Web 界面进行了大量更改。我只是覆盖了她的所有更改！

有人对我如何撤消更改并回到她的更改有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:23:58.213

不幸的是，没有对布局更改的跟踪，因此您无法仅将其还原 - 是否有其他开发人员可能拥有元数据的后续副本并且尚未刷新他们的元数据？

使用 ANT 运行元数据备份系统可能是个好主意，这样这样的事情就不会造成问题 :)[这里有使用 Force.com 部署工具的指南](http://wiki.developerforce.com/page/Migration_Tool_Guide)，基本上你只想使用该过程的一半定期进行。

# android - PhoneGap JQuery 移动数据转换幻灯片让我褪色

> ID：10987180
> 
> 赞同：1
> 
> 时间：2012-06-11T20:37:13.703
> 
> 标签：android, html, jquery-mobile, cordova

我正在尝试进行幻灯片过渡，但我看到的只是淡入淡出。Slide 可在 Chrome 浏览器上运行，但加载到手机上时无法运行。

```
<body onload="onLoad()">
    <div data-role="page" id="index">

        <div class="fixed-top-bar" data-role="header">Title1</div>

<div class="body-container" data-role="content">
<div class="container">
  <ul>
    <li><a href="#second" data-transition="slide">page</a></li>
    <li>World</li>
    <li>This</li>
    <li>Is A</li>
    <li>List</li>
  </ul>
</div>
</div>

<div data-role="footer"></div>
</div>

<div data-role="page" id="second">

    <div class="fixed-top-bar" data-role="header">Title2</div>

    <div class="body-container" data-role="content">
    <div class="container">
    <ul>
        <li><a href="#index" data-transition="slide">page</a></li>
        <li>World</li>
        <li>This</li>
        <li>Is A</li>
    </ul>
</div>
</div>

<div data-role="footer"></div>
</div>
</body> 
```

有我的html的正文。目前没有任何自定义js。有谁知道为什么我没有看到幻灯片过渡？

编辑：我在 Android 2.3.6 设备上遇到了这个问题。确切地说是摩托罗拉 Atrix 4G。

编辑：我尝试使用幻灯片以外的其他过渡。它们似乎都不起作用。它只会让我褪色。

编辑：我在 iOS 上测试了我的代码，它似乎工作得很好。不知道为什么它不能在 Android 上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T16:31:59.840

我错过了 JQuery Mobile 网站上的一条非常重要的信息。

> 要查看所有过渡类型，您必须使用支持 3D 变换的浏览器。默认情况下，缺乏 3D 支持的设备（例如 Android 2.x）将回退到所有过渡类型的“淡入淡出”。此行为是可配置的（见下文）。

这几乎回答了这个问题......

# javascript - 根据内容和长度自动调整自己的字体大小的文本区域

> ID：10987185
> 
> 赞同：0
> 
> 时间：2012-06-11T20:37:33.417
> 
> 标签：javascript, textarea, font-size

有人问过这个问题，但它似乎不适用于 Javascript。

我想创建一个具有两组字体大小的 TextArea，一组用于包含少于 3 行的行，另一组用于包含多行的字体。

唯一的问题是，Textarea 中的行数不仅会影响所选的字体大小，还会影响内容的数量，因为当有人只输入一条直线而没有换行符时，Textarea 会断线（不幸的是，使用另一个可以水平滚动的换行不是解决方案）。

我创建了一个详细的 jsFiddle：http: [//jsfiddle.net/kF9LY](http://jsfiddle.net/kF9LY/)

我如何以一种方式测量 Textarea 的 .value 内容，让我清楚地计算所使用的行，无论是通过换行符还是通过超过单行宽度的内容（因此显示在第二行）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:57:46.770

据我所知，您所描述的行数无法测量。

您可能能够在关键事件上检测到 textarea 的 scrollHeight 是否已大于其高度，这意味着出现了滚动条，然后您可以根据需要调整字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T23:23:56.880

看起来您可以从问题中的一个答案中找到行[数，如何获取 <textarea > 中的行数？](https://stackoverflow.com/questions/1760629/how-to-get-number-of-rows-in-textarea).

# actionscript-3 - Flash/AS3：如何访问 来自 Document 类的对象？

> ID：10987187
> 
> 赞同：0
> 
> 时间：2012-06-11T20:37:46.503
> 
> 标签：actionscript-3, flash

在 Flash CS4 中，我可以通过属性面板为时间轴中的对象指定实例名称。我认为这个变量可以在我的 Document 类中使用，但是当我尝试访问它时，它为空。

如何从我的 Document 类中访问这些实例？此外，这些对象是否必须在第 1 帧的时间线上才能可供我的 Document 类的构造函数使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:44:22.313

构造函数始终是对象上调用的第一件事，它用于获取存储该对象类型的所有属性所需的内存。在构造一个对象之后（假设它是一个显示对象），它会在某个时间点被添加到舞台上。如果您的一个对象的实例被添加到框架上的舞台，那么主文档类将必须知道该对象何时被添加到舞台以适当地访问它。您可以在文档类构造函数中创建对象的实例，然后当添加到主类上的阶段触发时，您可以添加实例。

刚刚尝试这无法重现 OP 的初始行为，我能够访问在第 1 帧上添加的实例，在此处发布了一些示例：

[http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.as](http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.as)

[http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.swf](http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.swf)

[http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.fla](http://www.shaunhusain.com/TestHandleOnInstance/TestHandleOnInstance.fla)

# php - Jquery 中的 PHP

> ID：10987191
> 
> 赞同：0
> 
> 时间：2012-06-11T20:38:08.557
> 
> 标签：php, jquery

我正在开发一个 wordpress 主题，现在我正在处理主题选项页面。我添加了一个带有“选择”方法的选项，让用户可以选择更改滑块的效果。现在......这是一个文本输入的输出，它设置了 fx 持续时间`<?php echo get_option('wis_fx_speed'); ?>`并且工作正常！我的问题是这**`<?php echo $fxSample ?>`**不起作用。尝试了我所知道和想象的一切（语法、顺序、将开关放入 jquery 脚本等），在网上搜索但一无所获……你能帮帮我吗？提前致谢！

```
<?php 

      switch (get_option('wis_fx_slider')) {
      case "opacity":
      $fxSample = "opacity : 'toggle',"; 
      break;
      case "width":
      $fxSample = "width : 'toggle',"; 
      break;
      case "opawidth":
      $fxSample = "opacity : 'toggle', width : 'toggle',"; 
      break;
      case "blink":
      $fxSample = "opacity : 'show',"; 
      break;
      }

?>

<script type="text/javascript">
    jQuery(document).ready(function($){
        $("#photo-rotator").tabs({fx:{<?php echo $fxSample ?>
        duration: <?php echo get_option('wis_fx_speed'); ?> }}).tabs("rotate", 2000);
    });
</script> 
```

**输出：**

<

```
script type="text/javascript">
    jQuery(document).ready(function($){
        $("#photo-rotator").tabs({fx:{        duration: 3000 }}).tabs("rotate", 2000);
    });
</script> 
```

**编辑** 如果我用收音机制作它就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:02:54.683

When I need to pass some data to JavaScript, I find it helpful to build a PHP array first, then use `json_encode` to convert it to JavaScript. This avoids a lot of potential issues:

```
<?php 
  $tab_options = array(
    'duration' => get_option('wis_fx_speed'),
    'fx' => array()
  );
  switch (get_option('wis_fx_slider')) {
    case 'opacity':
      $tab_options['fx']['opacity'] = 'toggle';
      break;
    case 'width':
      $tab_options['fx']['width'] = 'toggle';
      break;
    case 'opawidth':
      $tab_options['fx']['opacity'] = 'toggle';
      $tab_options['fx']['width'] = 'toggle';
      break;
    case 'blink':
      $tab_options['fx']['opacity'] = 'show';
      break;
  }
?>

<script type="text/javascript">
  var tabOptions = <?php echo json_encode($tab_options); ?>;
  jQuery(document).ready(function($) {
    $('#photo-rotator').tabs(tabOptions).tabs('rotate', 2000);
  });
</script> 
```

Benefits:

*   Much cleaner code (easier to read).
*   You don't have to worry about getting the commas, quotes, and other syntax right for all the possible cases. For example, as other people have mentioned, you don't have a `default` case. This approach will at least generate valid JavaScript if an option value is invalid.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:51:02.020

是否`get_option('wis_fx_slider')`返回开关盒中的选项之一？

您尚未指定“默认值”，因此`$fxSample`未定义。

```
<?php 

switch (get_option('wis_fx_slider')) {
    case "opacity":
        $fxSample = "opacity : 'toggle',"; 
        break;
    case "width":
        $fxSample = "width : 'toggle',"; 
        break;
    case "opawidth":
        $fxSample = "opacity : 'toggle', width : 'toggle',"; 
        break;
    default: // blink or anything else
        $fxSample = "opacity : 'show',";
}

?> 
```

您的持续时间是字符串还是数字？如果它是一个字符串，你需要像这样的引号

```
duration: '<?php echo get_option('wis_fx_speed'); ?>' }}).tabs("rotate", 2000); 
```

查看源代码时会发生什么？PHP 是否正确布置了动态生成的 javascript？你可以发布输出吗？

还有，格式化

```
<?php 

switch (get_option('wis_fx_slider')) {
    case "opacity":
        $fxSample = "opacity : 'toggle',"; 
        break;
    case "width":
        $fxSample = "width : 'toggle',"; 
        break;
    case "opawidth":
        $fxSample = "opacity : 'toggle', width : 'toggle',"; 
        break;
    case "blink":
        $fxSample = "opacity : 'show',"; 
        break;
}

?>

<script type="text/javascript">
    jQuery(document).ready(function($){
        $("#photo-rotator").tabs({
            fx: {
                <?php echo $fxSample ?>
                duration: <?php echo get_option('wis_fx_speed'); ?>
            }
        }).tabs("rotate", 2000);
    });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:43:14.740

每个 php 行后都需要一个分号

```
...
$("#photo-rotator").tabs({fx:{<?php echo $fxSample; ?>
... 
```

*   [默认情况下](http://php.net/manual/es/control-structures.switch.php)的值呢？

*   尝试调试做一个

    ```
    var_dump(get_option('wis_fx_slider'));
    var_dump($fxSample); 
    ```

*   也许这是一个范围问题？尝试定义

    ```
    $fxSample = ""; 
    ```

    在开始时，在转换之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:46:17.460

要将任何 PHP 值安全地输出到 JavaScript 值中，请使用[`json_encode`](http://php.net/json-encode).

```
...{fx:<?php echo json_encode($fxSample); ?>, duration: <?php echo json_encode(get_option("wis_fx_speed")); ?>}... 
```

另请注意，您的代码中缺少 a`,`并且有一个额外`}`的。始终查看生成的结果以查找语法错误。

# sql-server-2008 - sql server analysis studio predicthistogram sort onadjustedprobability列

> ID：10987192
> 
> 赞同：0
> 
> 时间：2012-06-11T20:38:17.690
> 
> 标签：sql-server-2008, data-mining

我正在使用 SQL Server Analysis Studio 2008 来查询朴素贝叶斯分类模型。我正在使用 PredictHistogram，因此它返回了一个很好的支持、概率等表，但是我希望返回的数据按 AdjustedProbability 排序，而不是任何其他其他列。

有谁知道语法上如何调整下面的查询？我尝试了几件事，但在 SQL Server Management Studio 中并不满意。谢谢，

米

```
select predicthistogram([bayes].[code]) from [bayes] 
natural prediction join 
  (select 
    (select 'michael' as [name]) as [name_table]
  ) as t 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:57:20.450

我想到了。

```
select topcount(predicthistogram([bayes].[code]), $adjustedprobability, 10) from [bayes] 
natural prediction join 
  (select 
    (select 'michael' as [name]) as [name_table]
  ) as t 
```

TopCount 是对从预测直方图调用返回的所有内容进行排序所必需的。

# r - ggplot（构面）中按因子绘制的多个图

> ID：10987193
> 
> 赞同：1
> 
> 时间：2012-06-11T20:38:24.263
> 
> 标签：r, ggplot2, facet, boxplot

我有一个包含两个定性变量（Q1、Q2）的数据框，这两个变量均以 LOW、MEDIUM、HIGH 的尺度和 0-100 的尺度连续变量 CV 进行测量。

```
s = 5
trial <- data.frame(id = c(1:s), 
                Q1 = ordered(sample(c("LOW","MED","HIGH"),size=s,replace=T)), 
                Q2 = ordered(sample(c("LOW","MED","HIGH"),size=s,replace=T)), 
                CV = runif(s,0,100)) 
```

我需要使用 ggplot 来显示每个级别（x3）的每个定性变量（x2）的连续变量的多面图（最好是水平箱线图/抖动）。这将导致 3 x 2 布局。

由于我对 ggplot 很陌生，我不确定应该如何实现。我玩过 qplot 并且无法弄清楚如何控制方面以在同一图表上显示 Q1 和 Q2 箱线图！

我是否需要将多个 qplots 运行到同一个窗口（在基础上我会使用 par 来控制布局），还是可以通过单个命令来实现。还是我应该尝试两次融化数据？

```
trial = rbind(data.frame(Q = "Q1",Level = trial[,2], CV = trial[,4]),
          data.frame(Q = "Q2",Level = trial[,3], CV = trial[,4])) 
```

我会继续努力，希望有人能在此期间提供一些提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:59:11.787

我不完全清楚你想要什么，但也许这会有所帮助：

```
ggplot(trial, aes(Level, CV)) + 
   geom_boxplot() + 
   geom_jitter() + 
   facet_wrap(~Q) + 
   coord_flip() 
```

# java - Java：如何集成其他软件

> ID：10987195
> 
> 赞同：0
> 
> 时间：2012-06-11T20:38:43.147
> 
> 标签：java, api, nlp, integration

StackOverflow 的蜂巢思维一直给我留下深刻印象，并希望您能在这里为我指明正确的方向。

我参加了一些 Java 编程课程，并且了解如何编写一个相当复杂的 Java 程序。但是，我从来没有学会如何将别人的软件集成到我自己的程序中。

对于一个新项目，我想将[part-pf-speech 标记器](http://cogcomp.cs.illinois.edu/page/download_view/POS)和分块器[集成](http://cogcomp.cs.illinois.edu/page/download_view/Chunker)到我的代码中，但不知道如何“加载”这些程序（如果 load 是正确的术语）。

我当然不是在寻找分步说明，而是寻找如何解决此类问题的指南。如果有人能让我朝着正确的方向开始，我将不胜感激。

谢谢，亚当

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:52:00.497

It looks like the externals you want to use are themselves in Java. This means you're in luck - you can use pure java language features to make it work.

There are two things to it:

1) your source files that interact directly with the external libraries have to be imported, or otherwise you'll have to refer to them using the fully qualified classname. Importing is done with the `import` statement. These statements should appear right before your class declaration, like so:

```
import foo.*;       //import all classes from the package foo
import foo.bar.Baz; //import only the Baz class from the package foo.bar

public class MyClass {
    Baz myBaz = null;               //declare a member of type Baz class from package foo.bar
    foo.bar.BazBaz myBazBaz = null; //by using a fully qualified classname, I didn't need to write an import statement for foo.bar.BazBaz  
} 
```

2) when you compile your sources, the java compiler needs to know where to look for classes you referenced in your source. This is done via the classpath.

The classpath can be a list of just .class files (compiled java classes), but also .jar files (java archives) and .zip files. Typically a project will package all classes it needs in one or more .jar files.

The location of these classes have no bearing on the way you interact with them in java code. It's the compiler's job to read these jars and class files and locate the classes you referred to in your code. If the compiler can't locate the classes you're referring to, you will get a compile time error and you can't compile your program.

You can specify the classpath as an argument to the java compiler command line (http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html#options). However, this becomes unwieldy very rapidly.

Instead, you should use a build tool like `ant` to do this work for you. The best way to get started is to read this page: [http://ant.apache.org/manual/index.html](http://ant.apache.org/manual/index.html).

From there, go to "Using apache ant" and then to "Writing a simple build file" in its entirety, they explain how to set up the classpath very well there.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:42:01.247

`classpath`编译时和运行程序时都需要它们的类。

这些项目似乎同时分发了 src 和 jar。抓住罐子，让它们在你的`classpath`. 设置类路径后，您将需要使用的`import`任何特定类/包。

请参阅[本](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)教程以管理`classpath`. 它涵盖了命令行编译/执行的基础知识；如果您使用的是特定的构建系统或 IDE，那么说明会有所不同。

另请注意第二个链接中有关使数据文件可用的特定说明。为此，他们还使用`classpath`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T20:43:33.903

配置构建路径以包含 .jar 文件。

如果您使用的是 Eclipse，您可以在 Project Explorer 中右键单击项目文件，然后选择 Configure Build Path。最后，添加外部存档（您已下载的存档）。现在，这些功能将在您的程序中随时可用。

或者更健壮的方法是在 eclipse 项目中创建一个名为“lib”的文件夹，并在其中包含所有 jar 文件。然后从 Configure Build Path 窗口中选择 lib 文件夹中的那些 jar 文件。这使得与其他程序员共享项目变得容易，无论他们是在 Windows 还是 Linux 上（添加外部 jar 时，它会保存绝对路径，因此如果 C:\ 上的某些内容不会在其他人的 PC 上找到）还提供了很好的依赖集成GIT、CVS 和 SVN 等源代码管理器上的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:41:45.000

Java 库通常作为 JAR 文件分发。然后在您的程序中，您可以简单地导入新包并使用提供的 API。

当您编译和运行时，您必须确保库包含在您的类路径中，以便它们知道在哪里查找包。

# java - 在 JDBC 代码中获取 NullpointerException

> ID：10987197
> 
> 赞同：0
> 
> 时间：2012-06-11T20:38:55.070
> 
> 标签：java, jdbc, nullpointerexception

以下代码抛出 NullPointerException - 我不知道问题出在哪里。我使用 Excel 电子表格作为后端。

```
//actionlistener for btnfetch
btnfetch.addActionListener(new ActionListener() 
{
    public void actionPerformed(ActionEvent ae) 
    {
        try
        {
            String name="";
            d1 = (java.util.Date)formatter.parse(textdate.getText());
            java.sql.Date sqlDate = new java.sql.Date(d1.getTime());
            java.sql.Date sqld=null;

            ResultSet rs=st.executeQuery("select * from [ARNUM$]");
            String getname=null;

            while(rs.next())
            {
                getname=rs.getString(1);
                sqld=rs.getDate(2);

                System.out.println(getname+"  "+sqld+"  "+sqlDate);

                if(sqlDate.compareTo(sqld)==0)
                {  
                    name=name+"  "+getname;
                    name=name.toUpperCase();
                }
                System.out.println(name);

            }

            if(name.length()==0)
            {
                JOptionPane.showMessageDialog(
                    pnlp4,
                    "No Name having "+textdate.getText(),
                    "Warning",
                    JOptionPane.WARNING_MESSAGE
                );
            }
            else
            {
                textname.setText(name);
            }
        }
        catch(Exception e)
        {         
            e.printStackTrace();
        }
    }//end actionPerformed
}); //end addActionListener 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:17:07.473

的字段值`sqld`可能为空。现在不幸`sqlDate.compareTo(null)`的是会抛出一个 NullPointerException。*（其他 compareTo 的表现更好。）*

# android - Android将上下文传递给onclicklistener

> ID：10987198
> 
> 赞同：1
> 
> 时间：2012-06-11T20:39:01.327
> 
> 标签：android, zxing, barcode-scanner

谁能告诉我如何正确地将我的应用程序上下文传递给我的按钮 setOnClickListener？

当我单击使用 Zxing 在我的布局代码中定义的“扫描按钮”时，我正在尝试扫描条形码。

以下是我的代码：

```
 public class ScaningActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
            }
        });//close upload clicklistener

    final Button scan = (Button)findViewById(R.id.scanButton);
        scan.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                Context c = getApplicationContext();

                // TODO Auto-generated method stub
                IntentIntegrator integrator = new IntentIntegrator(c);
                integrator.initiateScan();
            }
        });

    }//close onCreate
        public void onActivityResult(int requestCode, int resultCode, Intent intent) {
          IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
          if (scanResult != null) {
            // handle scan result
            Log.e("DATA", "TESTING SCAN RESULT : " + scanResult.toString());
          }else{
              Log.d("DATA", "NO SCAN RESULTS : ");// + scanResult.getFormatName());//scanResult.getContents());
          }

        }
}//close ScaningActivity 
```

**问题是*IntentIntegrator*无法识别我提供的*上下文参数，如下所示：***

```
Context c = getApplicationContext();
IntentIntegrator integrator = new IntentIntegrator(c); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T20:48:36.957

尝试更换

```
Context c = getApplicationContext(); 
```

经过

```
Context c = ScaningActivity.this; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:42:07.647

因为`Context`您需要发送 yourActivityname 或这个：

`IntentIntegrator integrator = new IntentIntegrator(Your_Activity_name Or this);`

# iphone - iOS 保存媒体选择器选择

> ID：10987201
> 
> 赞同：2
> 
> 时间：2012-06-11T20:39:07.597
> 
> 标签：iphone, ios, media, picker

我正在尝试创建一个应用程序来保存用户从媒体选择器中选择的媒体以供重复使用，并避免重新选择项目。有没有办法使用媒体选择器或任何示例代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:47:24.253

这样做的唯一方法是将媒体选择保存在应用程序的沙箱中，即 Documents 目录以供重复使用。因为，您无法在没有用户干预的情况下访问媒体，也就是说，每当您想从画廊中挑选一些东西时，您都必须每次都展示媒体选择器。您可以使用类似这样的方法将图像保存在应用程序的 doc 目录中：

```
+(BOOL)saveImageInDocumentsDirectory:(UIImage*)image WithName:(NSString*)name {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:name];
        NSData *imageData = UIImagePNGRepresentation(image);
        return [imageData writeToFile:savedImagePath atomically:NO];
} 
```

并检索图像：

```
+(UIImage*)getImageFromDocumentsDirectoryWithName:(NSString*)name {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory stringByAppendingPathComponent:name];
    return [[[UIImage alloc] initWithContentsOfFile:savedImagePath] autorelease];
} 
```

希望它会有所帮助。

# c# - 如何使文本框更改事件保持到长度为 10

> ID：10987206
> 
> 赞同：0
> 
> 时间：2012-06-11T20:39:34.637
> 
> 标签：c#, events, textbox

当文本框中的文本数量等于 10 时，满足什么条件？目前，该事件在每次击键时触发。

```
 private void textBox1_TextChanged(object sender, EventArgs e)
  {
           if(textbox1.Length == 10)
             {
             }

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:42:17.883

> 我试过了，但它不起作用，因为每次按下键盘上的按钮时都会触发此事件。

那没关系。您的代码甚至不会编译为`TextBox`has no property `Length`，尽管它确实有一个`Text`属性，即 a `string`，它有一个`Length`属性。

请注意，还有其他方法可以更改`TextChanged`仅触发一次的文本（即，粘贴文本）。还要小心，因为如果用户按下退格键或删除键，您可能不想触发该代码。在这样的文本框中执行操作通常比预期的要复杂一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:42:08.147

你有 99% 在那里，你错过了东西，`Text`财产。

```
if(textbox1.Text.Length == 10)
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T23:14:14.887

```
private void textBox1_TextChanged(object sender, EventArgs e)
    {
        if (textBox1.TextLength==10)
        {
            //read DB and display stuff
            textBox1.Clear();
        }
    } 
```

就像其他回答者一样，我很好奇，因为您当前的代码甚至无法编译。如果你在 VS 2010/2012 中编写它，自动完成功能应该已经提供了`TextLength`

# android - 如何从android中的Activity onCreate方法启动2个服务？

> ID：10987209
> 
> 赞同：0
> 
> 时间：2012-06-11T20:39:58.330
> 
> 标签：android, service, android-activity

我想从 1 个活动启动两个服务并同时运行所有 3 个东西

`

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    gpsManager = new GPSManager();

    gpsManager.startListening(getApplicationContext());
    gpsManager.setGPSCallback(this);
    Toast.makeText(this, "after GPS Manager", 2000).show();

    ((TextView)findViewById(R.id.info_message)).setText(getString(R.string.info));

    measurement_index = AppSettings.getMeasureUnit(this);
    Intent i=getIntent();
     number=i.getStringExtra("NUMBER");

     Intent spl=new Intent(GPS2Activity.this,SPLService.class);
     spl.putExtra("NUMBER", number);
     startService(spl);

     Intent gforce=new Intent(GPS2Activity.this,GforceService.class);
     gforce.putExtra("NUMBER", number);
     startService(gforce);

     Toast.makeText(this, "complete on create", 2000).show();

}` 
```

但任何服务都没有启动。这种方式有什么不对吗？或者从同一活动启动 2 个服务以同时运行的其他可能方法是什么

谢谢你

# javascript - 如何从 Chrome 扩展中的弹出窗口访问后台页面中的对象

> ID：10987211
> 
> 赞同：8
> 
> 时间：2012-06-11T20:39:59.550
> 
> 标签：javascript, google-chrome, google-chrome-extension

在我正在开发的 Chrome 扩展程序中，我想在单击弹出窗口时访问在后台页面中创建和维护的数据结构。不幸的是，我一般是 Javascript 和 Chrome 扩展开发的新手，你能告诉我怎么做吗？这是否涉及弹出窗口和背景页面之间的消息传递？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T20:58:53.680

您可以编写三个这样的文件来从 popup.html 访问 background.html 中的数据结构：

* * *

```
//in popup.html
<script type="text/javascript" src="mainscript.js"></script>
<!-- JavaScript and HTML must be in separate files for security. --> 
```

* * *

```
//in mainscript.js
chrome.extension.getBackgroundPage().data = 'your data'; 
```

* * *

```
//in background.html
<script type="text/javascript">
var data;
</script> 
```

你需要一个这样的 manifest.json（也许使用 browser_action 而不是 page_action）：

```
....
,
"background_page": "background.html",
"page_action": {
    "default_icon": "your_icon.ico",
    "default_title": "Your title",
    "default_popup": "popup.html"
  },
.... 
```

编辑：对于 chrome 扩展中的消息传递，请参阅这些功能

[http://code.google.com/chrome/extensions/extension.html#method-sendRequest](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)

[http://code.google.com/chrome/extensions/extension.html#event-onRequest](http://code.google.com/chrome/extensions/extension.html#event-onRequest)

这个有用的描述：

[http://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

# google-apps-script - 无休止的循环：为什么没完没了？

> ID：10987213
> 
> 赞同：1
> 
> 时间：2012-06-11T20:40:02.740
> 
> 标签：google-apps-script

试图找到一种从文档中删除空白页的方法，我编写了这个脚本，它做得很好：

```
function remove_blank() {
var Doc = DocumentApp.openById('1ffmPF1iff1ORSPo4XLGyjQGrqVdXx2Py_zza6N_hV3g');
var dd = 1;
var tt='';
var body = Doc.getActiveSection();
while(body.getNumChildren()>dd){
try{
Logger.log(body.getNumChildren()+'  '+dd)
var element = Doc.getChild(dd);
      var type = element.getType();
      if( type == DocumentApp.ElementType.TABLE){++dd}
        if( type == DocumentApp.ElementType.PARAGRAPH ){
          tt=element.getText();
            if(tt!='  *  '){element.removeFromParent();++dd} 
```

编辑：必须像这样更改此行： **if(tt!=' * '){element.removeFromParent()}else{++dd}**

（删除元素时不要增加 dd ，而是在有效段落上执行）

```
 }
    }
    catch(err)
    {
    break
    }
  }
} 
```

但是我仍然遇到一个我不明白的问题：当我在包含空段落和/或分页符的文档上运行该函数以删除所有内容时，一切都很好。如果我在同一个文档上再次运行它（只有段落/表格/段落......）它会进入无限循环，并且日志显示 var`dd`在 =2 之后不再增加。这是如何发生的，因为`dd`在 while 循环中的每个表上都增加了？下面是初始文档内容的日志，以及紧随其后的“已处理”文档的日志。（老实说，我必须说这种情况可能永远不会发生，因为该函数在另一个进程中只被调用一次，但我很乐意理解 ;-)

```
0 : PARAGRAPH
1 : PARAGRAPH
2 : TABLE
3 : PARAGRAPH
4 : PARAGRAPH
5 : PARAGRAPH
6 : TABLE
7 : PARAGRAPH
8 : PARAGRAPH
9 : PARAGRAPH
10 : TABLE
11 : PARAGRAPH
12 : PARAGRAPH
13 : PARAGRAPH
14 : TABLE
15 : PARAGRAPH

0 : PARAGRAPH
1 : TABLE
2 : PARAGRAPH
3 : TABLE
4 : PARAGRAPH
5 : TABLE
6 : PARAGRAPH
7 : TABLE
8 : PARAGRAPH 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:01:10.677

如果我理解正确， dd 本质上是您正在查看的“当前文档元素”。查看下面的代码块：（来自您的原始帖子）

```
if( type == DocumentApp.ElementType.PARAGRAPH ){
      tt=element.getText();
      if(tt!='  *  ') {
          element.removeFromParent();
          ++dd
      }
} 
```

你只增加 dd 当 a) 它是一张桌子。b) 这是一个没有文字的段落。

当它是带有文本的段落时，您不会增加 dd 。因此，当它遇到有文本的段落时， dd 不会增加，因此它会在下一次循环中再次检查同一段落。因此 dd 保持不变。

我不确定我的答案有一个原因。你说它第一次运行良好。（我假设文档既有空段落又有非空段落）。据说，一旦遇到非空段落，它也应该在第一次运行时卡住。我可能只是错过了一些东西。

无论如何，我希望这个答案可能会有所帮助。如果我注意到其他任何内容，我一定会编辑！

编辑：我不知道这是否适用，但如果您的文档中有任何*不是*段落或表格的内容，它也会卡在那里。

编辑#2：没问题，我完全理解你所说的关于 500char 限制的内容，以及在遵守该限制的同时描述某些事情有多难：p。我只是希望我正确地解释了你的评论。

关于这里的代码：

```
while(body.getNumChildren()>dd) { 
```

我相信每次运行时都会重新评估 while 条件。这意味着`body.getNumChildren()`再次调用，（有时）返回一个*较小*的数字，因为一个元素已被删除。

我也不是 100% 确定系统是如何工作的，但我相信例如你有一个列表，`[1] [2] [3]`. 如果你删除`[2]`我怀疑列表会做这样的事情...... `[1] [3] -> [1] [2]`（`[3]`成为元素`[2]`）。正如我所说，我不是 100% 确定这一点，但如果是这种情况，也许`dd`在删除元素时保持不变可能会奏效。

# javascript - 正则表达式检查正确的扩展名

> ID：10987216
> 
> 赞同：0
> 
> 时间：2012-06-11T20:40:14.913
> 
> 标签：javascript, asp.net

我的 javascript 在它们应该通过时调用无效扩展是一个问题。我在服务器端代码中使用了这个正则表达式，它对我来说很好。我验证了 reg 表达式检查的值也是有效的。

我是否在 javascript 中声明 reg 表达式错误？

```
 var ck_name = /^.+\.((gdf)|(GDF))$/;
 var chldValue = chld.value.substring(chld.value.length - 4, chld.value.length);
    alert(chldValue);

    if (!ck_name.test(chldValue)) {
        errors[errors.length] = "File is NOT a GDF file";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:44:05.043

首先，`^.+`是不必要的和浪费时间的。

其次，您的字符串只有四个字符长，而您正在寻找的......至少是五个字符长。因此，它们永远不会匹配。

第三，正则表达式是多余的。

最后，您的代码应该是：

```
if( chld.value.substr(chld.value.length-4).toLowerCase() != ".gdf")
    errors.push("File is NOT a GDF file"); 
```

# java - Swing：随着时间的推移绘制可用性图表

> ID：10987222
> 
> 赞同：2
> 
> 时间：2012-06-11T20:41:06.567
> 
> 标签：java, swing, user-interface, graph

我不是 UI 人，所以我希望得到一些关于如何在 Swing 中绘制它的建议。我想得到类似下图的结果。 ![在此处输入图像描述](../Images/466216353de65a98c71b1610a78aa690.png)

它显示了一段时间内的可用性（时间轴未显示在图像中，但它位于底部或顶部）。垂直条表示当前时间。我查看了 JFreeChart 之类的库，但是我没有看到任何可以轻松转换成这个的库，或者我错过了什么？通过在 JPanel 或其他东西中覆盖 paint() 手动绘制这样的东西很容易，但我不想手动处理左侧元素的折叠/展开逻辑。我的下一个想法可能是一个带有自定义单元格的 JTree，我可以在其中绘制可用性栏。这样我就不必处理折叠/展开逻辑。

有什么建议么？有我可以使用的图表/图形库吗？我应该从头开始吗？扩展一些现有的 Swing 组件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:07:49.807

[`JFreeChart`](http://www.jfree.org/jfreechart/)除了我会使用的大纲[`outline`](https://codereview.stackexchange.com/a/4447/6692)和合适的表格单元格渲染器之外，它可以做所有事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:54:37.610

您正在寻找的术语是“甘特图”。JFreeChart 确实有一个图表，但它不是交互式的。有一些免费的 Java 库（e-gantt 就是其中之一），但没有与树表结合使用（据我所知）。

因此，如果需要，您可以按照其他答案中的建议构建树表，或者使用商业图书馆（JGantt，Jide Gantt（免责声明我从事该工作；））

# ruby-on-rails - 具有多工作模型名称的 load_and_authorize_resource

> ID：10987225
> 
> 赞同：2
> 
> 时间：2012-06-11T20:41:11.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我有一个带有多字名称的模型：`AmountType`

因此，我试图使用带有以下代码的 cancan 正确加载授权。

```
class AmountTypesController < ApplicationController
    load_and_authorize_resource
end 
```

我希望实例变量将被调用：`@amount_types`在索引操作中。

但是当我加载视图时，出现以下错误：

```
undefined method `each' for nil:NilClass

12: 
13: <% @amount_types.each do |amount_type| %>
14: 
```

如何强制 cancan 加载具有正确名称的模型？还是我没有看到的其他错误？

# asp.net - 更新面板和事件触发两次

> ID：10987229
> 
> 赞同：0
> 
> 时间：2012-06-11T20:41:27.820
> 
> 标签：asp.net, updatepanel, infragistics

我通过 Infragistic 控件有一个带有 3 个下拉框的 ASPX 页面。其中 1 个位于 UpdatePanel 内部，而 UpdatePanel 外部的两个假设通过 AsynPostBack 事件控制第三个中显示的内容。UpdatePanel 外部的两个下拉框在后面的代码中调用相同的函数，但取决于我传递给它的对象，它会在第三个下拉框中显示一些内容。问题是，无论我选择哪个下拉框，该函数似乎都被触发了两次，并且每个调用都将其控制权传递给该函数，而第二个调用始终显示，即使我单击第一个调用也是如此。我该如何阻止它？我期望该功能仅触发一次，具体取决于我选择的控件。我还尝试让每个下拉框都指向它自己的功能，但它们都被触发了......

```
<td style="width:3px;"><asp:HiddenField ID="pnb_recno" runat="server" /></td>
<td style="width:100px;">Line Of Business:</td>
<td colspan="2" width="150px"><!--OnSelectionChanged="pnb_product_list"-->
    <ig:WebDropDown ID="pnb_ddRgn" runat="server" Width="175px" DropDownContainerHeight="100px" 
        EnableDropDownAsChild="false" TextField="Name" DropDownContainerWidth="175px" Font-Size="11px" 
        StyleSetName="Windows7" OnSelectionChanged="pnb_product_list" AutoPostBack="true"  ClientEvents-SelectionChanged="pnb_chgLOB" > 
        <Items>
            <ig:DropDownItem Text="" Value="" />
            <ig:DropDownItem Text="Global Client Access" Value="Global Client Access" />
            <ig:DropDownItem Text="Solution Center" Value="Solution Center" />
            <ig:DropDownItem Text="Both" Value="Both" />
        </Items>
    </ig:WebDropDown>
</td>
<td style="width:3px;"></td>
<td style="width:100px;">Problem Type:</td>
<td colspan="2" width="150px">
    <ig:WebDropDown ID="pnb_ddPblmTyp" runat="server" Width="175px" DropDownContainerHeight="80px" EnableDropDownAsChild="false" TextField="Name" DropDownContainerWidth="175px" Font-Size="11px" StyleSetName="Windows7" AutoPostBack="true" OnSelectionChanged="pnb_product_list">
        <Items>
            <ig:DropDownItem Text="" Value="" />
            <ig:DropDownItem Text="Infrustructure" Value="Infrustructure" />
            <ig:DropDownItem Text="Products" Value="Products" />
        </Items>
    </ig:WebDropDown>
</td>
<td colspan="2" width="150px">
    <asp:UpdatePanel ID="pnb_udtPnlPrdts" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="pnb_ddRgn"  EventName="SelectionChanged" />
        <asp:AsyncPostBackTrigger ControlID="pnb_ddPblmTyp"  EventName="SelectionChanged" />
    </Triggers>
        <ContentTemplate>
            <ig:WebDropDown ID="pnb_ddPrdts" runat="server" Width="175px" EnableClosingDropDownOnSelect="false" TextField="ProductName" EnablePaging="false" DropDownContainerHeight="175px" EnableMultipleSelection="true" MultipleSelectionType="Checkbox" StyleSetName="Windows7" DisplayMode="DropDown">
                <ClientEvents SelectionChanged="selectedIndexChanged" SelectionChanging="selectedIndexChanging" />
            </ig:WebDropDown>
        </ContentTemplate>
    </asp:UpdatePanel>
</td>

protected void pnb_product_list(object sender, EventArgs e)
{

    try
    {
        using (SqlConnection sqlConnection = new SqlConnection(connectionString))
        {
            using (SqlCommand sqlCommand = new SqlCommand("dbo.getDdProducts", sqlConnection))
            {
                sqlCommand.CommandTimeout = 0;
                sqlCommand.CommandType = CommandType.StoredProcedure;

                if (!String.IsNullOrEmpty(pnb_ddRgn.CurrentValue))
                    sqlCommand.Parameters.AddWithValue("@lob", pnb_ddRgn.CurrentValue);
                else
                    sqlCommand.Parameters.AddWithValue("@alert_type", pnb_ddPblmTyp.CurrentValue);

                using (DataTable dataTable = new DataTable())
                {
                    using (SqlDataAdapter dataAdapter = new SqlDataAdapter(sqlCommand))
                    {
                        dataAdapter.Fill(dataTable);
                    }

                    pnb_ddPrdts.DataSource = dataTable;
                    pnb_ddPrdts.DataBind();
                }
            }
        }
    }
    catch (Exception exception)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T18:29:47.423

我会尝试寻找 AutoPostBackFlags 一个用于 selectionChanged 和另一个用于 valueChanged 是否可能只是事实上，因为这两个事件都被触发是为什么它回发两次？

# php - Xpath、php 和 jquery 验证脚本

> ID：10987231
> 
> 赞同：0
> 
> 时间：2012-06-11T20:41:40.593
> 
> 标签：php, jquery

我正在创建一个交易聚合器，但首先我需要将 xpath 放入数据库，但在此之前我需要在我的字段中输入 xpath 和网站以查看我会得到什么结果......所以某种类型的 xpath 验证工具：

这是我在文本字段中输入 xpath 地址的代码：

xpathadd.html

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="http://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>

</head>

<body>
<script>
addToDatabase = function() {
    alert("addToDatabase called");
    $.post("generatingxpath.php", {
        websource: $('#websource').val(),
        links: $('#links').val(),
        title: $('#title').val(),
        image: $('#image').val(),
        discount: $('#discount').val(),
        price: $('#price').val(),
        description: $('#description').val(),
        coordinates: $('#coordinates').val()
    }, function(data) {
        $("#result").html(data);
    });
};​
</script>
<form name="form1" method="post" action="generatingxpath.php">

  <p>
    <label for="websource"></label>
    Web source:
    <input name="websource" type="text" id="websource" size="70">
  is:</p>
  <p>

    <label for="links"></label>
    Links:
    <input name="links" type="text" id="links" size="77">
    OK!
  </p>
  <p>

    <label for="title"></label>
    Title:
    <input name="title" type="text" id="title" size="78">
  is:</p>
  <p>

    <label for="image"></label>
    Image:
    <input name="image" type="text" id="image" size="76">
  show:</p>
  <p>

    <label for="discount"></label>
    Disscount:
    <input name="discount" type="text" id="discount" size="72">
  is:</p>
  <p>

    <label for="price"></label>
    Price:
    <input name="price" type="text" id="price" size="77">
  is:</p>
  <p>

    <label for="description"></label>
    Desription:
    <input name="description" type="text" id="description" size="72">
  is:</p>
  <p>

    <label for="coordinates"></label>
    Coordinates:
    <input name="coordinates" type="text" id="coordinates" size="70">
  lat,lng is:</p>
  <p>
    <input type="submit" name="Submit" id="Submit" value="Preview">
or
<input type="submit" name="Add to database" id="Add to database" value="Add To Database">
<a href="javascript:addToDatabase();">Add to database</a>
  </p>
  <p>&nbsp;</p>
</form>
    <div id="result"></div>
</body>
</html>​ 
```

并生成xpath.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>

<title>GENERATING XPATH</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

</head>

<body>

<?php

function curl($url){

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, $url);

        curl_setopt($ch, CURLOPT_ENCODING, "gzip");

        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        $data = curl_exec($ch);

        curl_close($ch);

        return $data;

}

libxml_use_internal_errors(true);

$websource = $_POST["websource"];
$links = $_POST["links"];
$title = $_POST["title"];
$image = $_POST["image"];
$disscount = $_POST["disscount"];
$price = $_POST["price"];
$description = $_POST["description"];
$coordinates = $_POST["coordinates"];

//start generating xpath script

$dom = new DOMDocument(); 

@$dom->loadHTMLFile($websource); 

$xpath = new DOMXPath($dom); 

$entries = $xpath->query($links);

$output = array(); 

$i = 1;

foreach($entries as $e) {   

  $dom2 = new DOMDocument(); 

  @$dom2->loadHTMLFile($websource . $e->textContent); 

  $xpath2 = new DOMXPath($dom2); 

  $data = array();

  $data['websource']= ($websource . $e->textContent);

  $data['title'] = trim($xpath2->query($title)->item(0)->textContent); 

  $data['description'] = trim($xpath2->query($description)->item(0)->textContent); 

  $data['image'] = trim($xpath2->query($image)->item(0)->textContent); 

  $string = $xpath2->query($coordintes)->item(1)->textContent; 

  preg_match_all('#(([0-9-]+){1,3}.([0-9]+))#is', $string, $matches); 

  $data['lat']=$matches[1];
  $data['lng']=$matches[2];
  $data['disscount'] = trim($xpath2->query($disscount)->item(0)->textContent);
    $data['price'] = trim($xpath2->query($price)->item(0)->textContent);

//print to see that all is fine or need to change some xpath direction

  echo $data['websource'];
  echo $data['links'];
  echo $data['title'];
  echo $data['image'];
  echo $data['disscount'];
  echo $data['price'];
  echo $data['lat'];
  echo $data['lng'];
  echo $data['description'];

    $output[] = $data; 

} 

?>

</body>

</html> 
```

但我只收到警告：第 67 行 /home/pluspon/public_html/test/generatingxpath.php 中的 foreach() 提供的参数无效？？？为什么？问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T01:05:55.497

的值`$_POST["links"]`在 DOM/XML 中不匹配！

# rest - 使用带有 Symfony 路由的 http 请求头返回不同的内容（html / json）

> ID：10987232
> 
> 赞同：0
> 
> 时间：2012-06-11T20:41:44.890
> 
> 标签：rest, symfony, routing, fosrestbundle

我正在使用 FOSRestBundle 开发 REST API，我希望能够根据请求 Accept 标头使用相同的 URL 来返回 HTML 和 JSON；即，如果您直接从浏览器调用 URL（`Accept : text/html`等） HTML 从树枝文件返回，如果您正在发出 AJAX 请求（`Accept : application/JSON`等），则使用 FOSRestBundle 返回 JSON。

目前，我可以通过在每个函数的顶部抛出一个小的 if 语句来检查请求接受头，如果它要求 HTML 它返回树枝文件，如果它要求 JSON 它命中服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:24:45.667

您应该在请求中发送“接受”标头。[在 symfony2.0](https://stackoverflow.com/questions/8473394/content-negotiation-accept-http-header-based-routing-in-symfony2-0)和[Format listener](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/3-listener-support.md#format-listener)中读取基于内容协商（“Accept”HTTP 标头）的路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:50:45.880

在命令行模式下运行时请求范围不存在，我不得不从每个构造函数中删除请求，问题就消失了。

# extjs4 - ExtJs 4 使用 RESTEasy 2.3.0.GA 上传文件，无效的 JSON 响应

> ID：10987237
> 
> 赞同：2
> 
> 时间：2012-06-11T20:41:59.677
> 
> 标签：extjs4, resteasy, jboss6.x

关于这个话题有很多讨论，但没有真正的解决方案。

如果我使用，这是我的问题

1) @Produce("application/Json") json 响应显示在 <pre> 标记中

2) 如果我使用@Produce("application/html") 或@Produce("text/html")，那么简单的故障和错误会出现 JAXB 异常：

未捕获的 Ext.Error：您正在尝试解码无效的 JSON 字符串：

# HTTP 状态 500 - 找不到媒体类型的 JAXBContextFinder：文本/html

**类型**状态报告

**消息**找不到媒体类型的 JAXBContextFinder：文本/html

**描述**服务器遇到了一个内部错误（找不到媒体类型的 JAXBContextFinder：text/html），导致它无法完成此请求。

### JBoss Web/3.0.0-CR2

我迫切需要一些帮助，并且在表单中建议了一些解决方案：1）将内容类型更改为 text/html 2）更新 ExtJs 源代码 3）从 JSON 响应中解析 < Pre> 标签'不想做第二和第三，但在 Ist，我想要一个有效的 JSON 输出。我怎样才能做到这一点？

这是我的服务类：

```
 @POST
    @Path("/bulkUpdate")
    @Consumes("multipart/form-data")
    @Produces({"application/json"})
    public ExtjsJson<DataException> uploadFile(MultipartFormDataInput input) {

        Map<String, List<InputPart>> uploadForm = input.getFormDataMap();
        List<InputPart> inputParts = uploadForm.get("uploadedFile");
        List<DataException> list = new ArrayList<DataException>();
        final ExtjsJson<DataException> returnObj = new ExtjsJson<DataException>();
        for (InputPart inputPart : inputParts) {
            try {
                MultivaluedMap<String, String> header = inputPart.getHeaders();
                String fileName  = getFileName(header);
                InputStream inputStream = inputPart.getBody(InputStream.class, null);
                byte[] bytes = IOUtils.toByteArray(inputStream);

                //handle the excel file upload and return the error if the file does not have valid data some like...
                DataException error = new DataException("supervisor", "columnName", 1, "SheetName", "this is not a valid supervisor");   
                list.add(error);
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        returnObj.setSuccess(true);
        returnObj.setResults(list);
        return returnObj;
    } 
```

这是我的响应对象 DataException.java

```
@Data
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class DataException {

    //private static final long serialVersionUID = 1L;

    /** excel sheet name */
    private String sheetName;

    /** row number of the excel sheet */
    private int rowNumber;

    /** field name/cell header **/
    private String fieldName;

    /** cell value */
    private String fieldValue;

    private String description;
} 
```

这是错误（带有标签的 JSON 响应）

未捕获的 Ext.Error：您正在尝试解码无效的 JSON 字符串：<pre style="word-wrap: break-word; white-space: pre-wrap;">{"total":1,"success": true,"results":[{"description":"这不是一个有效的主管","fieldName":"supervisor","fieldValue":"testPM","rowNumber":1,"sheetName":"sheet1" }]}</pre>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:15:46.240

我有同样的问题，我的解决方案是：

1.  利用`@Produces("text/html")`
2.  您的方法需要将字符串发送回前端：

    `public String uploadFile (...)`

3.  最简单的方法是在 ExtjsJson 类中实现一个`toString()`方法，该方法以字符串格式返回它。

# cuda - 共享内存和常量

> ID：10987240
> 
> 赞同：3
> 
> 时间：2012-06-11T20:42:03.680
> 
> 标签：cuda

在共享内存中存储常量值有什么好处吗？例如：

`A[tid] = CONSTANT * B[tid]`,

其中 A 和 B 是数组，CONSTANT 是常数值，例如 4。tid 是线程索引（数组元素 = 单线程）。

每个线程都必须读取 value `CONSTANT`，所以共享内存应该很有用，对吧？

我认为它是如何工作的：从全局内存中读取会消耗大量时间，因此从全局内存中读取一次常量值到共享内存，然后线程可以快速读取它。因为有很多线程（必须多次读取常量值）共享内存应该加快速度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:31:00.993

一些 CPU 指令集，例如 x86，支持将完整大小的常量存储为与操作码本身交错的操作数。在这种情况下，这些常量显然是与 CPU 正在运行的其余指令流一起读入的，而且将它们存储在其他任何地方似乎不太可能更快。

其他架构，例如 ARM，支持在操作码中存储小的常量和移位值。程序中通常需要的大多数常量可以表示为一个小常量加上一个移位值，因此可以直接存储在操作码中。

我不知道 SASS（NVIDIA GPU 的本机指令集）是否支持这种“嵌入式”常量。

但请考虑，如果您将常量存储在共享内存中，您将需要引用该常量，并且该引用本身将是一个常量，或者它将派生自一个常量（例如基地址）。

此外，还有一个用于指定为常量的值的缓存。您可以通过在调用内核之前在常量内存中设置值来利用此缓存。

此外，首先考虑在共享内存中设置常量的开销。共享内存中的值只能在块中的线程内共享，因此每个块都必须重新设置常量。因为线程以 32 个一组运行，称为 warp，内核将占用 32 个线程来设置常量，每次处理都在一个新块上开始。

总而言之，我认为最好让编译器处理单个常量，例如您的示例中的常量，并使用常量内存来存储您可能拥有的任何常量数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T00:13:13.210

恒定的内存空间被缓存，具有很高的读取性能。所以我怀疑将它存储在共享内存中会有很大的性能差异。

# java - 从 ZipInputStream Java 读取时出现 IndexOutOfBoundsException

> ID：10987243
> 
> 赞同：3
> 
> 时间：2012-06-11T20:42:09.450
> 
> 标签：java, exception, zip, nullpointerexception, indexoutofboundsexception

我正在尝试从我在stackoverflow中遇到的上一个问题中实现这个算法描述：

[禁止或不允许修改访问时间java](https://stackoverflow.com/questions/10904265/suppressing-or-not-allowing-the-access-time-to-be-modified-java)

所以我实现为

```
byte[] digest = new byte[this.BUFFER];
        MessageDigest md5;

        try {
            md5 = MessageDigest.getInstance("MD5");

            while(entry.getNextEntry() != null){

                ZipEntry current = entry.getNextEntry();

                if(current.isDirectory()){
                    digest = this.encodeUTF8(current.getName());
                    md5.update(digest);
                }
                else{
                        entry.read(digest, 0, this.BUFFER);
                        md5.update(digest);
                }
            }
            digest = md5.digest();
            entry.close();
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

但是，我在 else 语句中的线程“main”java.lang.IndexOutOfBoundsException 中遇到异常。有人知道为什么吗？另外，您能否告诉我我的算法是否正确实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:53:58.250

你打电话`getNextEntry()`两次，而不是一次：

```
while (entry.getNextEntry() != null) { // goes to the next entry
    ZipEntry current = entry.getNextEntry(); // goes to the next entry 
```

改用这个：

```
ZipEntry current;
while ((current = entry.getNextEntry()) != null) {
    // use current   
} 
```

或者

```
for (ZipEntry current = entry.getNextEntry(); current != null; current = entry.getNextEntry()) {
    // use current
} 
```

# python - xvfb 多显示器并行处理？

> ID：10987246
> 
> 赞同：9
> 
> 时间：2012-06-11T20:42:25.823
> 
> 标签：python, parallel-processing, rendering, xvfb

对运行多个 xvfb 显示器感到好奇：我有 10-50 个并行运行的脚本实例连接到 xvfb 显示器。运行相同数量的 xvfb 显示器并连接 1 对 1 是否有利？或者多个进程可以共享同一个显示？RAM 不是问题，处理能力也不是问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-11T20:56:54.820

一台 Xvfb 服务器应该能够很好地处理大量连接。您要确保做的一件事是使用该`-noreset`选项运行服务器。没有它，每次客户端断开连接时都会发生内存泄漏。

多台 Xvfb 服务器唯一有用的情况是您的机器中有多个可用处理器（例如 8 个内核）并且您的脚本需要大量图形。要查看是否是这种情况，请连接脚本的许多实例并检查`top`Xvfb 的 CPU 使用率是多少。如果达到 100%，您可能会受益于额外的 Xvfb 实例。

# javascript - Backbone.js 集合在实例化时将自身的副本添加到集合中？

> ID：10987253
> 
> 赞同：0
> 
> 时间：2012-06-11T20:43:13.890
> 
> 标签：javascript, backbone.js

我周末一直在学习 Backbone.js，在构建一个简单的应用程序时，出现了一个我不太明白的问题。

我有一个创建集合并呈现集合视图的视图。以机智：

```
 gallery: function(page,id) {
    var that = this;                

    this.galleryCollection = new GalleryCollection;
    this.galleryCollection.setID = id;
    this.galleryCollection.region = page;
    this.galleryCollection.fetch({add: true,
                  success: function(model,response) {           
                   //render logic here      
    });
  } 
```

这按预期工作；调用 console.log(this.model.models) 会显示一个集合，其中仅包含与上述集合关联的模型。

但是，像这样构造代码：

```
gallery: function(page,id) {
  this.galleryCollection = new GalleryCollection({setID: id, region: page})
  this.galleryCollection.fetch()
  //additional code... 
```

将新实例化的集合添加到正在获取的模型集合中。我可能在这里遗漏了一些基本的 Backbone.js 范例，但为什么要将集合本身​​添加到集合中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:10:27.317

构造函数的第一个参数`Backbone.Collection`应该是用于填充集合的模型数组。您似乎正在尝试通过将集合实例的属性传递给构造函数来设置它们。也许这是你问题的一部分。

# c - 在 C 中使用 g_socket_send 发送十六进制值

> ID：10987262
> 
> 赞同：1
> 
> 时间：2012-06-11T20:43:46.620
> 
> 标签：c, glib

是否可以在 C 中使用 g_socket_send 通过 GSocket 通过 UDP 发送十六进制值？我不一定需要以一种或另一种方式进行任何转换，但即使我在 g_socket_send 中手动输入一个十六进制字符串作为 gchar 缓冲区，它也会作为 ASCII 字符串发送。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:12:08.173

您正在发送*字节*。您需要弄清楚另一端的期望，并相应地构建这些字节。说，如果您的接收器想要二进制数据，那么可能是这样的：

```
char buffer[4] = { 0xFF, 0x05, 0x01, 0xFE };
/* ... */
if ( g_socket_send( socket, buffer, 4, ... ) < 0 ) {
    /* handle error */
} 
```

# ruby-on-rails - 与祖先建立家庭关系的典范？

> ID：10987266
> 
> 赞同：2
> 
> 时间：2012-06-11T20:43:59.787
> 
> 标签：ruby-on-rails, ruby, database-design

我在 github 上查看了acts_as_tree 和 ancestry gems，但我不认为他们做我想做的事。我进行了搜索，但找不到任何适合我尝试的东西。

所以，基本上只是一个带有页面的 CMS。页面是标题：字符串和正文：文本。页面可以嵌套在其他页面下，也可以嵌套其他页面。

因此，例如，所有这些都是“页面”

```
hardware
hardware/servers
hardware/servers/server1
hardware/servers/server1/parts/powersupply 
```

理想情况下，我可以 server.children 并获得孩子或孙子。

所以这很好。和acts_as_tree 等对此很好。

但是对于页面关系，我也想做的是：

```
hardware/servers/server1
equipment/IT/server1
maintenance/monthly/server1/ 
```

或者

```
friends/sally
coworkers/sally 
```

所以，我想我希望它有很多父母？类似的东西。我希望能够从各种“路径”访问同一页面。

所以我不确定那会是什么样子。我会做某种形式的连接模型，因为有一个“has_many”的东西，就像以前一样，它只是parent_id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:52:01.490

你是对的，有很多父母不适合这两种模式。你想要的是实现一个图表。根据您的描述，它可能是非循环的，即它没有任何循环，或者换句话说，页面永远不是它自己的子页面，这可能会导致某些优化。

这里使用的一般模式是页面之间的多对多关系。为此，您将在`parent`和之间创建一个连接模型`child`。

[作为改编自我以前的答案的](https://stackoverflow.com/questions/8826831/how-can-i-has-and-belongs-to-many-multiple-intances-of-the-same-model)一个例子：

```
class Page < ActiveRecord::Base
  has_many :parent_page_links,
    :class_name => 'PageLink',
    :foreign_key => :child_id

  has_many :parents,
    :through => :parent_page_links,
    :source => :parent

  has_many :child_page_links,
    :class_name => 'PageLink',
    :foreign_key => :parent_id

  has_many :children,
    :through => :child_page_links,
    :source => :child
end

class PageLink < ActiveRecord::Base
  belongs_to :parent,
    :class_name => "Page"
  belongs_to :child,
    :class_name => "Page"
end 
```

这不会像使用 Ancestry 那样有效，其中有很多关于为您缓存的关系的信息，但是如果性能是一个要求，您可以将其中一些功能移植到这个结构中。

# javascript - 为什么我只能运行 1 个 JavaScript 内部函数

> ID：10987267
> 
> 赞同：1
> 
> 时间：2012-06-11T20:44:02.423
> 
> 标签：javascript, sharepoint

我正在尝试从复杂的 url 中提取页面名称。[这篇文章](https://stackoverflow.com/questions/7883544/how-to-extract-page-name-from-complex-url)是我试图做到这一点的方式。现在我可以获取页面的 url，但是一旦我尝试对它做任何事情，它就会失败。我在 SharePoint 页面中使用它。

```
//WORKS!
var url = window.location;
alert(url);

//ALERTS NOTHING 
//PREVENTS ALL JAVASCRIPT AFTER THIS FROM RUNNING AS WELL
var url = window.location;
var url_parts = url.split(‘/’);
var main_url = url_parts[0];
alert(main_url); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:48:02.247

`window.location`不是字符串，它是一个`Location`对象，它没有方法`split`。但是，它确实有很多获取部分 URL 的方法，您可能希望查看这些方法，甚至可以执行您正在尝试做的事情：

[https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

如果一切都失败了，你可以使用`.toString().split`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:51:07.457

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:47:30.310

尝试改用 window.location.href。window.location 是一个对象而不是字符串。 [http://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T20:48:31.677

我知道有call或: or`window.location`的属性。你应该试试。`host``hostname``window.location.host``window.location.hostname`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T20:49:05.080

JavaScript 目前是单线程的，因此警报将阻塞执行线程，直到 ok 被击中然后它应该继续，htnl5 正在引入 web 工作者，这很酷，但有限......

回到你的问题，你可能想要这样做。

```
window.location.href.split("/") 
```

或者

```
window.location.pathname.split("/") 
```

取决于您要达到的目标。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T21:05:15.253

问题是您正在使用警报方法。

我的意思是——很难从代码片段和警报中确定故障点在哪里。

但是，还有另一种方法可以使此类问题变得一目了然。这是我的建议；它是 JavaScript Step-Debugger。

在 Chrome 或 FireFox 中，可以单步执行您的代码行并检查每行的值以确定它是否符合您的预期。

在 Chrome 中进行 Step-Debugging 的说明： 1\. 像这样添加 debugger 关键字，并注释掉您的警报：

```
//WORKS!
debugger;
var url = window.location;
//alert(url);

- This will instruct the debugger to pause runtime execution, so that we can see how each line executes. 
```

1.  在您的网页上使用 Chrome，右键单击屏幕并选择“检查元素”。

    *   这将打开开发工具，以便调试器停止。
2.  刷新页面，调用执行代码可能需要的任何事件。

    *   代码执行应该在您的调试器行暂停。
3.  现在你能做的真的很强大。点击越过按钮，将带您逐行。

    *   现在您可以将鼠标悬停在变量上以查看状态。
4.  我怀疑 url.split() 在某种程度上可能是错误的。

    *   我看了看，我看到的是一个错误：“url 没有方法拆分”

    *   这是有道理的，因为返回的对象不是字符串而是位置。

5.  所以我所做的是查看 Location 的成员：host、hostname、href、origin、pathname...

6.  我认为您需要根据需要拆分其中之一。

    *   例如：

        var url = window.location

        var url_parts = url.href.split('/');

        //这篇文章的url_parts是 //["http:", "", "stackoverflow.com", "questions", "10987267", "why-can-i-only-run-1-javascript-internal-function "]

希望有帮助。一切顺利！纳什

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-11T20:55:27.447

尝试这个：

```
extracturl = function()
{
    url1 = location.href;
    url2 = url1.split('.');
    url3 = url2[0].replace(/http:\/\//gi,'');
    return url3;
} 
```

它对我有用。它接受“http://example.com/”之类的内容并返回“example”。（没有引号和句号。）

# .net - 尝试检索不在 app.config 中的设置时返回的内容

> ID：10987268
> 
> 赞同：-2
> 
> 时间：2012-06-11T20:44:03.370
> 
> 标签：.net, settings, app-config

从代码调用设置但不在 app.config 文件中时返回的内容。它是空的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:08:16.873

我假设你正在使用`ConfigurationManager.AppSettings`.

从[文档中](http://msdn.microsoft.com/en-us/library/8d0bzeeb.aspx)：（NameValueCollection.Item 属性）

> 适当的价值
> 
> 类型：System.String
> 
> 一个字符串，其中包含与指定键关联的以逗号分隔的值列表（如果找到）；否则为空。

# ruby-on-rails - 在 minitest 中首次调用 skip() 会引发错误（nil:NilClass 的未定义方法“split”）

> ID：10987270
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:44:10.747
> 
> 标签：ruby-on-rails, minitest

在 rails 3.2/minitest 项目中第一次调用“skip”时出现未定义的错误。

```
require "test_helper"

describe "Test Integration Test" do
  describe "area1" do
    it "must do X" do
      assert true
    end
    it "must do Y" do
      assert true
    end
  end
end 
```

这很好用，但是如果我修改为跳过 Y ...

```
 it "must do Y" do
      skip "need to rewrite"
      assert true
    end 
```

...它错误：

```
$ rake test:integration
Run options: --seed 49388

.E

Finished tests in 2.109235s, 6.6375 tests/s, 12.8008 assertions/s.
# Running tests:

  1) Error:
test_0003_must_do_y(Test Integration Test::area1):
NoMethodError: undefined method `split' for nil:NilClass
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:35:in `block in run'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:425:in `_run__858522010476008514__setup__95624718422814153__callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:34:in `run' 
```

如果我添加第三个测试，也跳过，它只会在第一个跳过时报告错误：

```
require "test_helper"

describe "Test Integration Test" do
  describe "area1" do
    it "must do X" do
      assert true
    end
    it "must do Y" do
      skip "rewrite me"
      assert true
    end
    it "must do Z" do
      skip "rewrite me"
      assert true
    end
  end
end

$ rake test:integration
Run options: --seed 43718

# Running tests:

ES.

Finished tests in 2.236945s, 6.2585 tests/s, 11.6230 assertions/s.

  1) Error:
test_0003_must_do_z(Test Integration Test::area1):
NoMethodError: undefined method `split' for nil:NilClass
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:35:in `block in run'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:425:in `_run__2453774402805069296__setup__401473829290905838__callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:405:in `__run_callback'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:385:in `_run_setup_callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/callbacks.rb:81:in `run_callbacks'
    /Users/drew/.rvm/gems/ruby-1.9.2-p318/gems/activesupport-3.2.3/lib/active_support/testing/setup_and_teardown.rb:34:in `run' 
```

任何人都可以就第一次遇到的跳过错误的原因提出建议吗？或者，也许，我应该在哪个问题跟踪器中提交这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:43:33.497

我对此进行了调试，发现错误来自我正在使用的 minitest-rg gem。万一其他人遇到这个问题，我[在一个分支中对其进行了修补](https://github.com/tacomanator/minitest-rg)并向维护者发送了一个[拉取请求](https://github.com/radiospiel/minitest-rg/pull/1)。

# bash - 删除列并插入数字

> ID：10987273
> 
> 赞同：0
> 
> 时间：2012-06-11T20:44:36.767
> 
> 标签：bash, insert, replace

我在 linux bash 环境中工作，我有很多文件要编辑，大约 900 个。在一个文件filename.txt中，我有文件名列表，每行一个文件名。例如

```
ab2.pdb.101
ab2.pdb.109
ab2.pdb.126
ab2.pdb.127
ab2.pdb.13
ab2.pdb.187
ab2.pdb.188 
```

这些文件的前几行上下文是这样的（共245行）

```
REMARK   1                     PDB file generated by ptraj (set    33)
ATOM      1  N   ALA     1      11.304   3.018  20.878  0.1414  1.8240
ATOM      2  H1  ALA     1      11.574   3.686  21.593  0.1997  0.6000
ATOM      3  H2  ALA     1      11.901   3.162  20.074  0.1997  0.6000
ATOM      4  H3  ALA     1      10.342   3.207  20.625  0.1997  0.6000
ATOM      5  CA  ALA     1      11.449   1.637  21.381  0.0962  1.9080
ATOM      6  HA  ALA     1      12.509   1.464  21.561  0.0889  1.1000 
```

我想用 0.0000 0.0000 替换第二行到文件末尾的最后两列数字

```
0.1414  1.8240
0.1997  0.6000
0.1997  0.6000
0.1997  0.6000
0.0962  1.9080
0.0889  1.1000 
```

到

```
0.0000  0.0000
0.0000  0.0000
0.0000  0.0000
0.0000  0.0000
0.0000  0.0000
0.0000  0.0000 
```

所以我想读入一个文件，其中文件名在一个名为“filenames.txt”的文本文件中，并将最后两个列号替换为 0.0000。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:08:06.683

此代码用于`head`获取第一行、`tail`获取其余行、`cut`仅获取起始列、`paste`添加其他列（这两个假设选项卡用于分隔列）、`yes`生成列。

```
#! /bin/bash
while read file ; do {
        head -n1 "$file"
        tail -n+2 "$file" | \
            cut -f1-8 | \
            paste - <( yes 0.0000$'\t'0.0000 | \
            head -n $(( $( wc -l < "$file")-1 ))
        )
    }  > "$file".new
done < filenames.txt 
```

**更新：** 如果文件的结构更复杂，我会使用比 bash 更舒服的东西。例如，这是如何在 Perl 中执行此操作的：

```
#!/usr/bin/perl
use warnings;
use strict;

open my $NAMES, '<', 'filenames.txt' or die $!;
for my $file (<$NAMES>) {
    chomp $file;
    open my $FILE, '<', $file or die $!;
    open my $NEW,  '>', "$file.new" or die $!;
    print {$NEW} scalar <$FILE>;               # print 1st line
    while (<$FILE>) {
        my @fields = split /(\s+)/;            # keep separators
        @fields[-4, -2] = ('0.0000') x 2;      # replace the last two non-whitespace columns
        print {$NEW} @fields;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:43:25.203

我确信有更好的方法来指定列之间的选项卡，但它并没有出现在我身上：

```
#!/bin/bash

# create a list of the files to edit
declare -a FILES=(
    ab2.pdb.101
    ab2.pdb.109
    ab2.pdb.126
    ab2.pdb.127
    ab2.pdb.13
    ab2.pdb.187
    ab2.pdb.188
)

# iterate over the list
for FILE in ${FILES[@]};
do
    NEW=$FILE.new
    head -1 $FILE > $NEW
    cat $FILE | awk 'NR>1 { print $1,"\t",$2,"\t",$3,"\t",$4,"\t",$5,"\t",$6,"\t","0.000","\t","0.000" }' >> $FILE.new
done 
```

希望这可以帮助。

实际上...我不确定您是否也想保留文件中的第一行。如果你这样做，请告诉我，我会修改这个。

**已编辑**

更新为包含每个文件的标题行 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:54:50.710

试试这个：

```
#!/bin/bash
for file in $(cat filename.txt);
do
    perl -pi -e 's/\d+(\.\d+)?(\s+)\d+(\.\d+)?$/0.0000${2}0.0000/g' $file
done 
```

正则表达式的解释：

*   `$`at the end 表示匹配行尾
*   `\d+(\.\d+)?`表示匹配一个数字，带有可选的小数部分
*   `(\s+)`用于“复制”空白，因此保留在替换中

我知道它不是“纯”Bash，但我希望对 Perl 的调用是可以接受的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T22:29:43.313

有趣的是，每个人都有自己选择的语言的解决方案。就我个人而言，我也会使用 Perl，但确实会在这个组合中添加更多内容，bash 和 sed 怎么样？

```
#!/bin/bash
function fixfile() {
  #skip the 'REMARK' line and any blank lines, replace other lines
  sed '/^REMARK.*/d' $1 | sed '/^ *$/d' | sed 's/^.*/0.0000  0.0000/' > $1$$
  mv $1$$ $1
}

for fname in `cat filelist`; do
  fixfile $fname
done 
```

您说“将最后两列编号替换为 0.0000”，但您的示例显示用固定的“0.0000 0.0000”完全替换这些行。您是要保留这些行并替换最后两列，还是您真的想替换整行？

# bluetooth - 蓝牙设备无法被发现的所有原因是什么

> ID：10987274
> 
> 赞同：2
> 
> 时间：2012-06-11T20:44:40.153
> 
> 标签：bluetooth

一个明显的原因是用户没有使设备可被发现。我正在寻找其他人。

我观察到（我想每个人都有），在扫描蓝牙设备时，我们没有“每次”都得到“所有”可发现设备的列表。根据我通常阅读的开发人员文档，它是随机的，但我想要这种随机性背后的原因 - 我觉得原因在“扫描仪”设备和“扫描”设备上都有。

例如，在我的 Android 手机上，如果我在一次扫描结束后立即按下“扫描”按钮，我在第一次扫描中获得的设备几乎没有 30%。这让我想知道出了什么问题！（请注意，我说的是第二次扫描中新“发现”的设备 - 大多数设备显示的列表显示在先前扫描中发现的旧“缓存”设备）

一个（相关）问题是，如果我以某种方式将扫描时间（在我的 Android 设备上）从 12 秒增加到 30 秒，我是否有更好的机会发现丢失的设备？

PS：虽然我没有用 Android 标记这个问题，但我也很乐意获得 Android 特定的答案，以及任何低级答案）就蓝牙术语而言）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T04:45:53.573

蓝牙发现通过在可用无线电频谱上广播查询数据包来工作。任何处于可发现模式的蓝牙设备都会为其接收到的数据包发送应答。由于蓝牙无线电层的细节，不能保证范围内的所有设备都会收到查询数据包，但实际上，如果扫描运行典型的 10 秒，概率接近 100%。

造成差异的更可能的原因是蓝牙的短距离，通常为 10 到 20 米。因此，完全有可能在第一次扫描期间处于范围内的设备已经移动，因此它们不再处于范围内。如果您在有很多人四处走动的地方进行扫描，这可能就是原因。

与短距离相关的另一个原因是某些设备可能处于蓝牙范围的边缘，因此查询数据包或查询响应数据包在传输中丢失的可能性很大。虽然蓝牙芯片组将为查询响应提供一个 RSSI 值，可用于粗略估计范围（在 BT 2.1 ->，IIRC 中），但查询函数通常不会显示此信息（例如，Android 查询不显示此信息） .

# android - 片段内的 ViewPager 在 transaction.remove() 后消失（维护实例？）

> ID：10987278
> 
> 赞同：5
> 
> 时间：2012-06-11T20:45:00.907
> 
> 标签：android, android-fragments, android-viewpager, fragmenttransaction

我正在使用带有 v4 包的 Google API 8（Android 2.2）。

你好，这是我的问题：

我有一个 FragmentActivity，它有一个始终停留在屏幕上的菜单和一个小容器（一个 FrameLayout），我在其中放置了许多片段。当我隐藏和显示片段时，我的应用程序运行良好，但在我加载所有片段后它崩溃了，因为我的内存有限。在这种情况下，我必须在加载其他片段时删除一些片段，因此应用程序不会崩溃。但是这里出现了另一个问题，我的寻呼机在我删除它们后不会重新加载，所有其他片段都可以正常工作。只有我的寻呼机没有显示，它们没有崩溃，只是消失了。这里有一些代码可以让您了解我的问题是什么：

MyFragmentActivity.java 有这样的布局：

```
 <LinearLayout

        ...(some code from menu that doesn't matter)

        <FrameLayout
            android:id="@+id/content"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >
        </FrameLayout>
    </LinearLayout> 
```

在那个 FrameLayout 中，我放置了所有的片段。寻呼机片段就是其中之一，它的布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+android:id/some_pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</LinearLayout> 
```

我实现了这个抽象类**AbstractPagerFragment**：

```
import java.util.List;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public abstract class AbstractPagerFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        // Inflate the layout for this fragment

        View fragment = inflater.inflate(getLayoutID(), container,false);
        PagerAdapter mPagerAdapter = initializePager();
        ViewPager pager = (ViewPager) fragment.findViewById(getPagerID());
        pager.setAdapter(mPagerAdapter);
        return fragment;
    }

    private PagerAdapter initializePager() {
        PagerAdapter mPagerAdapter = new templateDigital.util.PagerAdapter(getFragmentManager(), getFragments());
        return mPagerAdapter;

    }

    public abstract List<Fragment> getFragments();

    public abstract int getLayoutID();

    public abstract int getPagerID();

} 
```

这使用了我的**PagerAdapter**，它看起来像：

```
import java.util.List;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

public class PagerAdapter extends FragmentPagerAdapter{

    private List<Fragment> fragments;

    public PagerAdapter(FragmentManager fManager, List<Fragment> fragments) {
        super(fManager);
        this.fragments = fragments;
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }
} 
```

现在，让我们实现我的**AbstractPagerFragment**：

```
import templateDigital.main.R;
import templateDigital.util.fragments.AbstractPagerFragment;
import templateDigital.util.fragments.GenericFragment;
import android.support.v4.app.Fragment;

public class ConcretePagerFragment extends AbstractPagerFragment {

    private List<Fragment> fragments;

    public ConcretePagerFragment() {
        fragments = new ArrayList<Fragment>();
        fragments.add(new GenericFragment(R.layout.concept_page1_fragment));
        fragments.add(new GenericFragment(R.layout.concept_page2_fragment));
        fragments.add(new GenericFragment(R.layout.concept_page3_fragment));

        //GenericFragments is a class that extends Fragments and just inflate a layout with a background image.
    }

    @Override
    public List<Fragment> getFragments() {
        return fragments;
    }

    @Override
    public int getLayoutID() {
        return R.layout.pager_fragment;
    }

    @Override
    public int getPagerID() {
        return R.id.some_pager; // the pager inside the layout
    }
} 
```

好的，现在我像这样从我的内容（FrameLayout）中添加它（myFragment 是一个 PagerFragment，myTag 是一个字符串，代表我定义的它的标签）：

```
FragmentTransaction transaction = fragmentManager.beginTransaction();
    if (fragmentManager.findFragmentByTag(myTag) == null) {
        transaction.add(R.id.content,myFragment, myTag);
    }

    transaction.setCustomAnimations(R.anim.fade_in, R.anim.fade_out);
    hideAllOtherFragments(myTag, transaction); //Here I hide all other fragments, the code is okay. Trust me.
    transaction.show(myFragment());
    transaction.commit(); 
```

这就是我删除它的方式：

```
...
transaction.remove(myFragment);
... 
```

但是当我导航回菜单中的片段后它应该再次加载时，使用我第一次使用的相同方法（上面的代码），寻呼机不再显示。谁能解决这个问题？

如果您阅读了所有这些内容，谢谢，您是冠军。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T01:06:05.290

实际上，如果你想用 Fragment 实现 ViewPager，你应该添加一个 TabHost、一个 TabWidget、一个 FrameLayout 和一个 ViewPager。

TabHost 将成为选项卡式窗口视图的容器。该对象包含两个子对象：用户单击以选择特定选项卡的一组选项卡标签，以及 FrameLayout 是显示该页面内容的对象。在您必须创建一个 TabAdapter（类似于您的 PagerAdapter）之后，通过调用`mTabsAdapter.addTab`并将 Fragment 作为参数发送来为每个选项卡添加片段

# c# - 崩溃转储显示抛出的异常，但有一个应该捕获它的 try-catch

> ID：10987282
> 
> 赞同：0
> 
> 时间：2012-06-11T20:45:33.543
> 
> 标签：c#, exception-handling

客户报告 IIS 崩溃并提供了崩溃转储文件。我无法重现该问题（即使我传递了一个错误的 numStr），并且对我迄今为止发现的内容感到非常困惑。这是捕获所有异常的相关代码：

```
public class NetUtils
{
    public static int stringToInt(string numStr, int defValue)
    {
        int num = defValue;
        try
        {
            num = Int32.Parse(numStr);
        }
        catch (Exception e)
        {
        }
        return num;
    } 
```

这是 Windbg 的输出，它告诉我 FormatException 超出了 catch 块。

```
0:021> !pe
Exception object: 0272e1b8
Exception type: System.FormatException
Message: Input string was not in a correct format.
InnerException: <none>
StackTrace (generated):
<none>
StackTraceString: <none>
HResult: 80131537
0:021> !clrstack
OS Thread Id: 0x1598 (21)
ESP       EIP     
0ffddf80 77e4bee7 [HelperMethodFrame: 0ffddf80] 
0ffde024 79a0e4a8 System.Number.StringToNumber(System.String, System.Globalization.NumberStyles, NumberBuffer ByRef, System.Globalization.NumberFormatInfo, Boolean)
0ffde04c 792ef2d8 System.Number.ParseInt32(System.String, System.Globalization.NumberStyles, System.Globalization.NumberFormatInfo)
0ffde114 02360a3b AXSWebSvc.NetUtils.stringToInt(System.String, Int32)
0ffde140 023624ab AXSWebSvc.AXSExchangeSvc.search(System.String, System.String, System.String, System.String, System.String, System.String, System.String)
0ffde494 79e71b4c [CustomGCFrame: 0ffde494] 
0ffde45c 79e71b4c [GCFrame: 0ffde45c] 
0ffde478 79e71b4c [GCFrame: 0ffde478] 
0ffde65c 79e71b4c [HelperMethodFrame_1OBJ: 0ffde65c] System.RuntimeMethodHandle._InvokeMethodFast(System.Object, System.Object[], System.SignatureStruct ByRef, System.Reflection.MethodAttributes, System.RuntimeTypeHandle)
0ffde6cc 792d52d8 System.RuntimeMethodHandle.InvokeMethodFast(System.Object, System.Object[], System.Signature, System.Reflection.MethodAttributes, System.RuntimeTypeHandle)
0ffde71c 792d5086 System.Reflection.RuntimeMethodInfo.Invoke(System.Object, System.Reflection.BindingFlags, System.Reflection.Binder, System.Object[], System.Globalization.CultureInfo, Boolean)
0ffde758 792d4f6e System.Reflection.RuntimeMethodInfo.Invoke(System.Object, System.Reflection.BindingFlags, System.Reflection.Binder, System.Object[], System.Globalization.CultureInfo)
0ffde778 65dd912b System.Web.Services.Protocols.LogicalMethodInfo.Invoke(System.Object, System.Object[])
0ffde79c 65e1094e System.Web.Services.Protocols.WebServiceHandler.Invoke()
0ffde7dc 65e10625 System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()
0ffde80c 65e10fb7 System.Web.Services.Protocols.SyncSessionlessHandler.ProcessRequest(System.Web.HttpContext)
0ffde820 660ad8f6 System.Web.HttpApplication+CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
0ffde854 6608132c System.Web.HttpApplication.ExecuteStep(IExecutionStep, Boolean ByRef)
0ffde894 6608c3a3 System.Web.HttpApplication+ApplicationStepManager.ResumeSteps(System.Exception)
0ffde8e4 660808ac System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(System.Web.HttpContext, System.AsyncCallback, System.Object)
0ffde900 66083e1c System.Web.HttpRuntime.ProcessRequestInternal(System.Web.HttpWorkerRequest)
0ffde934 66083ac3 System.Web.HttpRuntime.ProcessRequestNoDemand(System.Web.HttpWorkerRequest)
0ffde944 66082c5c System.Web.Hosting.ISAPIRuntime.ProcessRequest(IntPtr, Int32)
0ffdeb58 79f68c4e [ContextTransitionFrame: 0ffdeb58] 
0ffdeb8c 79f68c4e [GCFrame: 0ffdeb8c] 
0ffdece8 79f68c4e [ComMethodFrame: 0ffdece8] 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:49:17.167

您应该重构代码并避免使用控制流异常。你应该使用`TryParse`：

```
public static int StringToInt(string numStr, int defValue)
{
    int num;
    if (!Int32.TryParse(numStr, out num)) { return defValue; }
    return num;
} 
```

奇怪的是异常没有被捕获，这绝对不应该发生。也许您的客户使用的产品版本与您拥有的源代码不同。

# android - 为什么Android在屏幕关闭的情况下继续运行？

> ID：10987284
> 
> 赞同：1
> 
> 时间：2012-06-11T20:45:38.710
> 
> 标签：android, power-management

我的应用程序使用`Handler`and`sendEmptyMessageDelayed`来获取产生调试输出的定时消息。当我按下 Galaxy Tab 的电源时，屏幕关闭，但调试消息不断出现。

我宁愿CPU进入睡眠状态。发生这种情况是因为它已插入 PC 吗？还是我的应用程序做错了什么使设备保持清醒？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:54:34.067

Turning the screen off doesn't put the phone into "sleep" mode, similarly to turning your computer monitor off won't put your computer into "sleep" mode. Mobile devices are designed to have quick responsiveness when you need them, thus never go to sleep unless explicitly told to (If such a function even exists).

In the context of an application, processing on the main (UI) thread decreases dramatically since UI elements are no longer being drawn to the screen. However, background processes still function as you would expect them to regardless of the screen state.

If you want your app to stop some processing when not in the foreground, check for calls to `onPause()` in your Activities, and do what you wish. `onPause()` will be called when changing Activities, turning the screen off, or moving the app into the background.

# firefox-addon - 如何在 XUL 右侧的文本框中插入图像？

> ID：10987286
> 
> 赞同：0
> 
> 时间：2012-06-11T20:45:41.337
> 
> 标签：firefox-addon, xul

我可以在我的 firefox 插件中的文本框 XUL 元素中添加图像图标，但是这个图标出现在文本框的左侧，我无法在右侧对齐图标。

这是代码：

```
<textbox>
    <image src="chrome://myextension/skin/icon.png"/>           
</textbox> 
```

我试图将图像放入 hbox 并应用 align=right 但没有成功。但我确信这对于例如 urlbar-icons 和 searchbar-icons 是可能的，但我不知道如何实现这是普通的文本框。请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:34:19.250

如果您使用[DOM Inspector](https://addons.mozilla.org/addon/dom-inspector-6622/)查看它，您将看到为`<textbox>`标签（实际输入字段）生成了一些匿名内容，并且您的图像被插入到它之前。您不能更改插入点。但是，您可以使用[`-moz-box-ordinal-group`CSS 属性](https://developer.mozilla.org/en/CSS/-moz-box-ordinal-group)使您的图像显示在输入字段之后（具有默认`-moz-box-ordinal-group: 1`值）：

```
<textbox>
    <image src="..." style="-moz-box-ordinal-group: 2;"/>
</textbox> 
```

请注意，一旦[相应的标准](http://www.w3.org/TR/css3-flexbox/)变得更加成熟，`-moz-box-ordinal-group`就会重命名为。`box-ordinal-group`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:41:27.137

尝试在文本框上使用 align=end 属性：[https ://developer.mozilla.org/en/XUL/Attribute/align](https://developer.mozilla.org/en/XUL/Attribute/align)

# powershell - PowerShell脚本选择目录中的一些文件

> ID：10987291
> 
> 赞同：3
> 
> 时间：2012-06-11T20:46:08.590
> 
> 标签：powershell

现在我有一个脚本可以获取目录中的最后五个文件。它看起来像这样：

```
$diffs = Get-ChildItem "C:\usr\local\work\tnl\Database\ReleaseScripts" -Filter "*.sql" | Sort-Object Name -Descending | Select-Object -first 5 | Sort-Object Name 
```

我需要让它选择以某个文件开头的所有最后文件。例如，如果文件被命名

201.txt
202.txt
203.txt
204.txt
最多
210.txt

我可能需要选择所有以 203.txt 开头的文件到列表的末尾。

我可以得到我正在寻找的文件名并在脚本中使用它。我只是不熟悉我必须这样做的脚本工具。有没有办法编辑我的行以使其仅在一行中执行此操作，还是我必须将其放入循环中才能获得结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:01:28.880

这是可行的，但如果您的文件名结构更复杂，或者您的原始过滤器有可能抓取不符合要求的文件名，则需要扩展。

```
$diffs = Get-ChildItem "C:\usr\local\work\tnl\Database\ReleaseScripts" -Filter "*.sql" |?
{[Int][System.Text.RegularExpressions.Regex]::match($_.name,"\d+").Value -gt 201 }| 
Sort-Object Name -Descending | Select-Object -first 5 | Sort-Object Name 
```

# wpf - wpf xml绑定父

> ID：10987295
> 
> 赞同：0
> 
> 时间：2012-06-11T20:46:25.430
> 
> 标签：wpf, xml, binding

我有资源

```
<XmlDataProvider x:Key="LangData"/> 
```

我可以访问它的任何数据

```
Text="{Binding Source={StaticResource LangData}, XPath=root/eng/sometext} 
```

但我有一个网格元素，我在这个 XAML 中将另一个 XAML 加载到网格中我想使用相同的方法

```
Text="{Binding Source={StaticResource LangData}, XPath=root/eng/sometext} 
```

但不工作我该怎么办？

# python - 广度优先搜索/深度优先搜索还是有向图？

> ID：10987296
> 
> 赞同：2
> 
> 时间：2012-06-11T20:46:26.823
> 
> 标签：python, graph-theory, nodes, depth-first-search, breadth-first-search

我已经为此苦苦挣扎了一段时间。给定一组节点：

```
nodes = { ('A','B'),
          ('B','C'),
          ('C','D'),
          ('C','E'),
          ('B','E'),
          ('C','F') } 
```

实现以下目标的最佳方法是什么：

```
 A
                          |
                          B
                 _________|_________
                 |                  |
                 C                  E
            _____|_____             |
            |    |     |            C
            D    E     F        ____|____
                                |        |
                                D        F 
```

我可以在哪里看到：

```
the routes from A -> B:
A -> B
the routes from A -> C: 
A -> B -> C
A -> B -> E -> C
the routes from A -> D:
A -> B -> C -> D
A -> B -> E -> C -> D

etc... 
```

我这样做的原因纯粹是因为我想了解如何去做。

我知道 bfs 找到了最快的路线，（我想我可能在 get children 函数中使用了类似的东西）

但我不知道循环/递归运行图形的最佳方法。我应该使用字典并使用键/值还是列表。或者套...

```
def make_graph(nodes):
    d = dict()
    for (x,y,*z) in nodes:
        if x not in d: d[x] = set()
        if y not in d: d[y] = set()
        d[x].add(y)
        d[y].add(x)
    return d 
```

我在这里使用 *z 因为元组实际上会包含一个浮点数，但目前我正试图让事情变得简单。

```
def display_graph(nodes):
    for (key,val) in make_graph(nodes).items():
        print(key, val)

# A {'B'}
# C {'B', 'E', 'D', 'F'}
# B {'A', 'C', 'E'}
# E {'C', 'B'}
# D {'C'}
# F {'C'} 
```

getchildren 函数查找节点根的所有可能端点：

```
def getchildren(noderoot,graph):
    previousnodes, nextnodes = set(), set()
    currentnode = noderoot
    while True:
        previousnodes.add(currentnode)
        nextnodes.update(graph[currentnode] - previousnodes)
        try:
            currentnode = nextnodes.pop()
        except KeyError: break
    return (noderoot, previousnodes - set(noderoot)) 
```

在这种情况下 A：

```
print(getchildren('A', make_graph(nodes)))

# ('A', {'C', 'B', 'E', 'D', 'F'}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:26:16.683

在使用程序语言编码之前，您需要正确地抽象问题。

首先，您需要考虑图形的属性，例如循环/非循环、有向/无向等。

然后你需要选择一种方法来相应地解决你的问题。例如，如果它是一个无环、无向和连通图，那么您可以将图表示为一[棵树](http://en.wikipedia.org/wiki/Tree_%28graph_theory%29)并使用 BFS 或 DFS 来遍历它。

最后，在您考虑完所有这些之后，您可以更轻松地将其放入代码中。就像您已经在做的那样，您可以给每个节点一个存储所有邻居的列表并使用[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)遍历树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:46:55.593

谢谢大家，问题解决了。我需要编写的函数如下。

```
def trace_graph(k, graph):
    """ takes a graph and returns a list of lists showing all possible routes from k """
    paths = [[k,v] for v in graph[k]]
    for path in paths:
        xs = path[:-1]
        x  = path[-1]
        for v in graph[x]:
            if v not in xs and path + [v] not in paths:
                paths.append(path + [v])
    paths.sort()
    return paths

for path in trace_graph('A', make_graph(nodes)):
    print(path)

['A', 'B']
['A', 'B', 'C']
['A', 'B', 'C', 'D']
['A', 'B', 'C', 'E']
['A', 'B', 'C', 'F']
['A', 'B', 'E']
['A', 'B', 'E', 'C']
['A', 'B', 'E', 'C', 'D']
['A', 'B', 'E', 'C', 'F'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:24:01.357

我认为普通的树结构对于表示您的数据没有意义，因为它是顺序的，但不一定是有序/排序的。使用尝试（前缀或基数树）或（可能更好）有向图可能更合适。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:43:25.903

我认为你可能会让事情变得比他们需要的更复杂。想想你所代表的数据类型，就像 xvatar 所说的那样。

对于基本的有向图，字典是有意义的。只需存储父级：子级列表。

```
nodes = [ ('A','B'),
          ('B','C'),
          ('C','D'),
          ('C','E'),
          ('B','E'),
          ('C','F') ]

from collections import defaultdict
d = defaultdict(list)
for node in nodes:
    d[node[0]].append(node[1]) 
```

从任何根节点查找所有可访问的子节点很简单：

```
def getchildren(root, graph, path=[]):
    path = path + [root]
    for child in graph[root]:
        if child not in path:  #accounts for cycles
            path=getchildren(child, graph, path)
    return path 
```

调用时：

```
>>> print getchildren('A',d)
['A', 'B', 'C', 'D', 'E', 'F']
>>> print getchildren('C',d)
['C', 'D', 'E', 'F'] 
```

# java - 使用 JDO 在 Google App Engine 中存储对象

> ID：10987297
> 
> 赞同：0
> 
> 时间：2012-06-11T20:46:38.823
> 
> 标签：java, google-app-engine, jsf, jdo, datastore

我正在使用 Google App Engine，但是当我尝试在数据存储中存储对象时遇到了一些问题。我正在使用 Eclipse Indico 平台、JDO 来描述我想要存储的对象以及用于用户界面的 JSF 技术。当我在 ecliplse 平台上运行我的应用程序时，有时它工作正常（对象存储正确），有时它不起作用，当代码执行时没有任何反应（也没有错误消息），如果我删除文件 war/WEB -INF/appengine-generated/local_db.bin 在执行之前不会重新创建它。当我在 Google App Engine 上运行相同的应用程序时，问题是一样的：在执行过程中什么都没有发生，或者有时最后一个存储的对象被最后一个替换。我不明白为什么同一个应用程序，没有任何改变就可以工作，而且没有理由就不能工作。

这是我的对象之一（省略了 getter 和 setter 方法）：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class User implements Serializable {
@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long idUser; 
@Persistent
private String email;
@Persistent
private String name;
@Persistent
private String surname;
@Persistent
private String password; 
```

这是我用来存储对象的代码：

```
public Utente creaUtente(User user) {
    PersistenceManager pm = PMF.get().getPersistenceManager();

    try {
        user = pm.makePersistent(user);
    } catch (Exception e) {        // TODO: handle exception
        System.out.println(e.getMessage() + "DB-creaUtente");
    }
    finally{
        pm.close();
    }
    return user;        
  } 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:43:06.880

您有 2 个问题，首先是您正在使用带有通用 catch 的 try 块，因此所有错误都不会报告，因为您无法`System.out.println`在 App Engine 中使用。您需要使用应用引擎[日志记录服务](https://developers.google.com/appengine/docs/java/runtime#Logging)来查看错误。或者，如果应用程序仍在开发中，您可以消除所有通用 try 块，以便获得真正的堆栈跟踪。

至于为什么它不能 100% 工作，那里没有足够的代码让我诊断它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:48:15.293

我无法回答您为什么稍后创建用户会覆盖先前根据您提供的代码创建的用户，但我怀疑这与您传入的参数 USER 有关。

您能否检查一下您是否已将用户实体 (idUser) 的主键设置为 creaUtente() 函数？

由于 User 类的主键是自动生成的，您应该将其留空，系统会为您生成 id。如果您提供一个 id，那么第二次写入将覆盖现有的，因为它们共享相同的 id。

# ruby-on-rails - 如何获得不同的 RVM gemset 来使用不同版本的 Rails？

> ID：10987298
> 
> 赞同：2
> 
> 时间：2012-06-11T20:46:46.673
> 
> 标签：ruby-on-rails, rvm

我正在使用 RVM，并且在没有先创建 gemset 的情况下安装了最新版本的 Rails (3.2.5) 是错误的。

现在，我正在处理的一个项目需要兼容 Rails 3.0.0，但是当我创建一个新的 gemset，安装 Rails 3.0.0 并检查我的 Rails 版本时，它仍然说我有 3.2.5

我是否只需要从任何地方卸载 Rails 并重新安装到单独的 gemset 中就可以了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:02:10.847

如果您运行`gem list -d rails`，您将获得与此类似的输出。

```
*** LOCAL GEMS ***

rails (3.2.3)
    Author: David Heinemeier Hansson
    Homepage: http://www.rubyonrails.org
    Installed at: /Users/bjedrocha/.rvm/gems/ruby-1.9.3-p194@jwb

    Full-stack web application framework. 
```

注意`installed at`指令。后面的部分`@`表示宝石。因此，如果您在没有先创建并切换到命名 gemset 的情况下安装了 Rails，那么它很可能安装在`@global`gemset 下（RVM 的默认设置）。如果这是你的情况，我会切换到全局 gemset 并卸载 Rails。卸载后，您可以切换回命名的 gemset，它将使用安装在此 gemset 中的 Rails 版本

```
rvm use 1.9.3@global
gem uninstall rails

rvm use 1.9.3@mygemset 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:02:55.377

听起来 Rails 3.2.5 是您的全局 gemset 的成员，其安装由每个 ruby​​ 的 gemset 继承。

我会先用 库存您的 gemset `rvm gemset list`，看看 @global 和新 gemset 之间是否有区别，如果需要，从 @global gemset 卸载 gem。

我认为您需要了解的大部分内容都在这里： [https ://rvm.io/gemsets/basics/](https://rvm.io/gemsets/basics/)

# wpf - 无法使用 Expression Blend 绑定到 WPF 中的某些对象

> ID：10987299
> 
> 赞同：1
> 
> 时间：2012-06-11T20:46:48.253
> 
> 标签：wpf, data-binding, expression-blend

我创建了一个新窗口并尝试将我的类设置`FooService`为 DataContext 属性。但在“选择对象”对话框中，我只能找到一些类，而不能找到`FooService`.

如果对要在该对话框中列出的类有任何要求，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T12:33:02.420

FooService 是否有一个公共的无参数构造函数？如果没有，Blend 将看不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:54:42.893

You need to add the appropriate namespace to the list of XML namespaces in the XAML file for the Window.

For example, if your FooService class had a namespace of "Services" you would add an xmlns declaration like so:

```
<Window ...
        xmlns:services="clr-namespace:Services"
        ... /> 
```

or (if it's in a different project that you have referenced)

```
xmlns:services="clr-namespace:Services;assembly=Services" 
```

Assuming that project's name is "Services".

# c++ - 如何使用另一个变量声明一个变量？

> ID：10987301
> 
> 赞同：1
> 
> 时间：2012-06-11T20:46:51.117
> 
> 标签：c++

我正在尝试在**C++**中创建一个函数，该函数可以根据提供的名称创建一个新的**整数类型变量**

例如

```
void my_variable(char name)
{
    int "something here" = 1;  // i am figuring out what to write 
    // there so that it makes a variable from that character that i have sent

    cout << "something here";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:49:14.073

看看使用`std::map`。它允许您创建键值对。键将`name`在此实例中，值将是 int。以下代码段向您展示了如何制作地图、填充地图，然后根据 key 搜索值。. .

```
void my_function(std::string name)
{
    std::map<std::string, int> myMap;
    myMap[name] = 1;  // 

    cout << "Key " << name << " holds " << paramMap.find(name)->second << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:13:03.687

由于没有人将其发布为答案，因此有时定义宏来创建变量很方便。

```
#define DEFINE_HELPER(x) Helper helper_##x = Helper(#x)
#define HELPER(x) (&helper_##x)

struct Helper {
    std::string name;
    Helper (const char *s) : name(s) {}
};

DEFINE_HELPER(A);
DEFINE_HELPER(B);

std::cout << HELPER(A)->name << std::endl; 
```

# algorithm - 刮刮卡号和序列号生成器

> ID：10987302
> 
> 赞同：1
> 
> 时间：2012-06-11T20:46:56.540
> 
> 标签：algorithm, security

在一家公司中，我们需要制作类似于市场上可用的刮刮卡。

*   有隐藏的数字需要刮掉。
*   可见的序列号。

我的问题很基本，其他公司如何制作这些隐藏号和序列号。我已经阅读了一些关于散列的信息，但无法连接这些点。

1.  序列号是否独立于隐形部分？
2.  他们是否采用序列号并对其进行哈希处理以制作不可见的部分，反之亦然？

并且，

1.  看不见的数字是如何产生的？喜欢什么算法通常用于此？

任何见解都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T10:17:51.260

刮刮卡号和序列号是相互独立的。它们仅用于证明刮刮卡的身份验证。在服务器端，序列号和刮刮卡号都匹配，如果它们匹配，则只会发生进一步的操作/活动。

刮刮卡号码由随机数生成算法生成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T10:22:58.080

您还需要使用加密安全的随机数生成器来防止有人购买一小批卡并弄清楚数字序列是什么。普通的随机数生成器是**不够**的！

# spring-security - AuthenticationFilter 插入数据库

> ID：10987303
> 
> 赞同：0
> 
> 时间：2012-06-11T20:47:00.390
> 
> 标签：spring-security

我正在实现一个启用 SpringSecurity 的 web 应用程序。我现在使用 PostgreSQL 数据库来存储用户及其凭据。该应用程序的一个要求是每次用户登录时更新用户表（特别是 last_login 列）。我尝试实现一个扩展 UsernamePasswordAuthenticationFilter 的 LoginController，因此每次调用successfulAuthentication 方法时，都会更新 last_login 列。

这是我的 applicationContext.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:context="http://www.springframework.org/schema/context"
         xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:jdbc="http://www.springframework.org/schema/jdbc"
         xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/jdbc  http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

<beans:bean class="org.springframework.security.authentication.encoding.ShaPasswordEncoder" id="passwordEncoder"/>

<beans:bean class="admin.beans.UserBean" id="userBean"/>

<beans:bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <beans:property name="basename" value="messages"/>
</beans:bean>

<http use-expressions="true" auto-config="true">
    <intercept-url pattern="/login.jsp" access="permitAll"/>
    <intercept-url pattern="/userAdmin.jsp" access="hasRole('ROLE_ADMIN')"/>
    <intercept-url pattern="/**" access="hasRole('ROLE_USER')"/>
    <form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?login_error=1"/>
    <remember-me/>
    <logout invalidate-session="true" logout-success-url="/" logout-url="/logout"/>
</http>

<beans:bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <beans:property name="driverClassName" value="org.postgresql.Driver"/>
    <beans:property name="url" value="jdbc:postgresql://xexen:5432/db"/>
    <beans:property name="username" value="usr"/>
    <beans:property name="password" value="password"/>
</beans:bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider user-service-ref="jdbcUserService">
        <password-encoder ref="passwordEncoder">
            <salt-source ref="saltSource"/>
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean id="jdbcUserService" class="security.CustomJdbcDaoImpl">
    <beans:property name="dataSource" ref="dataSource"/>
    <beans:property name="enableGroups" value="false"/>
    <beans:property name="enableAuthorities" value="true"/>
    <beans:property name="usersByUsernameQuery">
        <beans:value>select username,password,enabled, salt from users where username = ?</beans:value>
    </beans:property>
</beans:bean>

<beans:bean id="filterChainProxy" class="org.springframework.security.web.FilterChainProxy">
    <filter-chain-map path-type="ant">
        <filter-chain pattern="/**" filters=" authenticationFilter"/>
    </filter-chain-map>
</beans:bean>

<beans:bean class="org.springframework.security.authentication.dao.ReflectionSaltSource" id="saltSource">
    <beans:property name="userPropertyToUse" value="salt"/>
</beans:bean>

<beans:bean id="loggerListener" class="org.springframework.security.authentication.event.LoggerListener"/>

<beans:bean id="authenticationFilter" class="security.LoginController">
    <beans:property name="authenticationManager" ref="authenticationManager"/>
    <beans:property name="filterProcessesUrl" value="/j_spring_security_check"/>
</beans:bean>

<context:annotation-config/>
<context:component-scan base-package="admin"/> 
```

登录控制器类：

```
 package security;
 //imports

@Controller
public class LoginController extends UsernamePasswordAuthenticationFilter {

@Autowired
AuthenticationManager authenticationManager;

public LoginController() {
    super();
    System.out.println("LoginController.LoginController");
}

@Override
protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {
    super.successfulAuthentication(request, response, chain, authResult);
    System.out.println("Update DB");
} 
```

}

问题是从不调用 LoginController 过滤器，因此从不插入数据库。我很确定我犯了一个配置错误，但我对配置感到困惑和困惑：在哪里设置过滤器/提供程序等。

谁能发现我做错了什么？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T11:17:56.177

我想提出一种不同的方法，在成功登录后使用处理程序。
在您的安全 xml 中：

```
<http use-expressions="true" auto-config="true">
...
    <form-login authentication-success-handler-ref="redirectAfterLogin" login-page="/login.jsp" authentication-failure-url="/login.jsp?login_error=1"/>
...
</http> 
```

类将是这样的：

```
public class RedirectAfterLogin extends SavedRequestAwareAuthenticationSuccessHandler {
    public void onAuthenticationSuccess(HttpServletRequest request,
        HttpServletResponse response, Authentication authentication)
        throws ServletException, IOException {

        // do what you need here
    }
} 
```

# validation - Struts 上的文件输入消失 无效的表单重新加载

> ID：10987304
> 
> 赞同：1
> 
> 时间：2012-06-11T20:47:00.830
> 
> 标签：validation, jsp, file-upload, struts

我的 Struts 中有以下内容`ActionForm`

```
private List<FormFile> attachmentList = new ArrayList<FormFile>();

public MyForm() {
    for (int i = 0 ; i < 5 ; i++) {
        getAttachmentList().add(null);
    }
}

public List<FormFile> getAttachmentList() {
    return attachmentList;
}

public void setAttachmentList(List<FormFile> attachmentList) {
    this.attachmentList = attachmentList;
}

public FormFile getAttachmentList(int index) {
    return getAttachmentList().get(index);
}

public void setAttachmentList(int index, FormFile formFile) {
    getAttachmentList().set(index, formFile);
} 
```

在我的 JSP 中，我有以下内容

```
<c:forEach var="counter" begin="0" end="4">
    <input type="file" name="attachmentList[${counter}]" size="50" />
</c:forEach> 
```

一切正常，除非发现错误的`validate`方法`ActionForm`（通常与表单上的其他字段有关）。当表单重新加载时，不再填充文件输入。我在显示`Action`返回重新加载的页面之前添加了一个断言，并且`ActionForm`附件数量正确（它们的文件名不是空白等）。

有谁知道如何使文件绑定并保留？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:36:15.700

文件字段不能预填；这是众所周知的浏览器东西，与Struts无关。

# asp.net - ASP.NET 无法获得工作链接

> ID：10987314
> 
> 赞同：1
> 
> 时间：2012-06-11T20:48:27.347
> 
> 标签：asp.net, href

我尝试了 2 种重定向到其他页面的方法

```
<asp:HyperLink ID="asd" ViewStateMode="Disabled" 
    NavigateUrl="f2.aspx" runat="server" >HERE!</asp:HyperLink>
<asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click"/> 
```

和按钮后面的代码：

```
Response.Redirect("f2.aspx"); 
```

出于某种原因-它们都不起作用！当我单击它们时，我会停留在带有奇怪 URL 的同一页面上（见图）我做错了什么？ ![在此处输入图像描述](../Images/8b8a7a8122f6c103770a9faa10d4d3ac.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:50:47.520

您在 Web.config 中配置了表单身份验证以要求用户登录。

在用户登录之前，ASP.Net 将重定向到配置的登录页面。

# c# - 使用 HttpWebRequest 在 https 上下文中加载 http 提要会触发 400 错误请求

> ID：10987315
> 
> 赞同：0
> 
> 时间：2012-06-11T20:48:31.687
> 
> 标签：c#, httpwebrequest

我正在运行以下代码来访问各种 RSS http URL，但我执行代码的 Web 应用程序位于 https 上。

```
HttpWebRequest request = 
   (HttpWebRequest)HttpWebRequest.Create(new Uri(blog["RSSURL"].ToString()));
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
XmlReaderSettings readerSettings = new XmlReaderSettings();
readerSettings.ProhibitDtd = false;
XmlReader reader =  
   XmlReader.Create(response.GetResponseStream(), readerSettings);                        
SyndicationFeed feed = SyndicationFeed.Load(reader); 
```

当我开火时，我得到：

> 远程服务器返回错误：(400) 错误请求。
> 在 System.Net.HttpWebRequest.GetResponse()

谁能帮我弄清楚我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:09:56.980

您的示例网址对我有用

```
string url = "http://blog.sharepointelearning.com/feed/";
XDocument xDoc = XDocument.Load(url);
var items = xDoc.Descendants("item")
        .Select(item => new 
        {
            Title = item.Element("title").Value,
            Link = item.Element("link").Value,
            Description = item.Element("description").Value,
        })
        .ToArray(); 
```

# xml - 添加 XML 子元素

> ID：10987318
> 
> 赞同：31
> 
> 时间：2012-06-11T20:48:34.440
> 
> 标签：xml, powershell

使用 PowerShell，我想将几​​个子元素添加到 XML 树中。
我知道添加一个元素，我知道添加一个或多个属性，但我不明白如何添加几个元素。

一种方法是将[子 XML 树编写为文本](https://stackoverflow.com/questions/10524389/powershell-inserting-multiple-xml-elements)
但我不能使用这种方法，因为元素不是一次添加的。

要添加一个元素，我这样做：

```
[xml]$xml = get-content $nomfichier
$newEl = $xml.CreateElement('my_element')
[void]$xml.root.AppendChild($newEl) 
```

工作正常。这给了我这个 XML 树：

```
$xml | fc
class XmlDocument
{
  root =
    class XmlElement
    {
      datas =
        class XmlElement
        {
          array1 =
            [
              value1
              value2
              value3
            ]
        }
      my_element =     <-- the element I just added
    }
} 
```

现在我想向“my_element”添加一个子元素。我使用类似的方法：

```
$anotherEl = $xml.CreateElement('my_sub_element')
[void]$xml.root.my_element.AppendChild($anotherEl) <-- error because $xml.root.my_element is a string
[void]$newEl.AppendChild($anotherEl)               <-- ok
$again = $xml.CreateElement('another_one')
[void]$newEl.AppendChild($again) 
```

这给出了这个 XML 树（部分显示）：

```
my_element =
  class XmlElement
  {
    my_sub_element =
    another_one =
  } 
```

这些是属性，而不是子元素。
子元素将显示为：

```
my_element =
  [
    my_sub_element
    another_one
  ] 
```

**问题**：如何一次添加多个子元素？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-12T06:34:16.517

看看下面的例子：

```
# Document creation
[xml]$xmlDoc = New-Object system.Xml.XmlDocument
$xmlDoc.LoadXml("<?xml version=`"1.0`" encoding=`"utf-8`"?><Racine></Racine>")

# Creation of a node and its text
$xmlElt = $xmlDoc.CreateElement("Machine")
$xmlText = $xmlDoc.CreateTextNode("Mach1")
$xmlElt.AppendChild($xmlText)

# Creation of a sub node
$xmlSubElt = $xmlDoc.CreateElement("Adapters")
$xmlSubText = $xmlDoc.CreateTextNode("Network")
$xmlSubElt.AppendChild($xmlSubText)
$xmlElt.AppendChild($xmlSubElt)

# Creation of an attribute in the principal node
$xmlAtt = $xmlDoc.CreateAttribute("IP")
$xmlAtt.Value = "128.200.1.1"
$xmlElt.Attributes.Append($xmlAtt)

# Add the node to the document
$xmlDoc.LastChild.AppendChild($xmlElt);

# Store to a file 
$xmlDoc.Save("c:\Temp\Temp\Fic.xml") 
```

* * *

已编辑

Remark : [Using a relative path in Save will not do what you expect](https://stackoverflow.com/questions/4822575/saving-an-xml-file-in-powershell-requires-complete-path-why).

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2015-04-17T08:04:51.137

I prefer creating xml by hand, instead of using API to construct it node by node, as imho by hand it will be much more readable and more maintable.

Here is an example:

```
$pathToConfig = $env:windir + "\Microsoft.NET\Framework64\v4.0.30319\Config\web.config"

$xml = [xml] (type $pathToConfig)

[xml]$appSettingsXml = @"
<appSettings>
    <add key="WebMachineIdentifier" value="$webIdentifier" />
</appSettings>
"@

$xml.configuration.AppendChild($xml.ImportNode($appSettingsXml.appSettings, $true))
$xml.Save($pathToConfig) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-13T08:13:16.233

Check this code-sample. It has everything you need to create XML from scratch:

```
function addElement($e1, $name2, $value2, $attr2)
{
    if ($e1.gettype().name -eq "XmlDocument") {$e2 = $e1.CreateElement($name2)}
    else {$e2 = $e1.ownerDocument.CreateElement($name2)}
    if ($attr2) {$e2.setAttribute($value2,$attr2)}
    elseif ($value2) {$e2.InnerText = "$value2"}
    return $e1.AppendChild($e2)
}

function formatXML([xml]$xml)
{
    $sb = New-Object System.Text.StringBuilder
    $sw = New-Object System.IO.StringWriter($sb)
    $wr = New-Object System.Xml.XmlTextWriter($sw)
    $wr.Formatting = [System.Xml.Formatting]::Indented
    $xml.Save($wr)
    return $sb.ToString()
} 
```

...now let's use both functions to create and display a new XML-object:

```
$xml = New-Object system.Xml.XmlDocument
$xml1 = addElement $xml "a"
$xml2 = addElement $xml1 "b"
$xml3 = addElement $xml2 "c" "value"
$xml3 = addElement $xml2 "d" "attrib" "attrib_value"

write-host `nFormatted XML:`r`n`n(formatXML $xml.OuterXml) 
```

the result looks like this:

```
Formatted XML:

 <?xml version="1.0" encoding="utf-16"?>
<a>
  <b>
    <c>value</c>
    <d attrib="attrib_value" />
  </b>
</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-18T04:59:13.333

For anyone else visiting this.

I had issues because my parent document had a namespace, and the `ImportNode` was adding an empty `xmnls=""` element to the imported xml, causing issues with my app

Extending on answer above. To get around this, wrap it in a dummy node, with namespace set from parent doc

```
$pathToConfig = $env:windir + "\Microsoft.NET\Framework64\v4.0.30319\Config\web.config"

$xml = [xml] (type $pathToConfig)
$root = $xml.get_DocumentElement()
$namespaceuri = $root.NamespaceURI

[xml]$appSettingsXml = @"
<Dummy xmlns="$namespaceuri">
    <appSettings>
        <add key="WebMachineIdentifier" value="$webIdentifier" />
    </appSettings>
</Dummy>
"@

$xml.configuration.AppendChild($xml.ImportNode($appSettingsXml.Dummy.appSettings, $true))
$xml.Save($pathToConfig) 
```

# mysql - 在动态 mysql 表上进行 Ajax 就地编辑

> ID：10987322
> 
> 赞同：1
> 
> 时间：2012-06-11T20:48:47.853
> 
> 标签：mysql, ajax, edit, inplace-editing

标题应该足够具体，但基本上我有一个表，其中填充了 mySQL 数据库中表中的数据，我正在尝试在我的表上添加一个功能，以允许对除两列之外的所有列进行内联编辑，主键 ID 列和状态列。到目前为止，我遇到的唯一教程只展示了如何让所有列都可编辑，但我不希望有人不小心弄乱了主键列。而且它不是自动递增的，因为它在导入之前指定了一个特定的 ID，并且它会跳过几个数字。任何人都可以帮助或指出我正确的方向。

# r - package.skeleton cxxfunction 和 R 函数

> ID：10987325
> 
> 赞同：0
> 
> 时间：2012-06-11T20:48:57.103
> 
> 标签：r, rcpp

我阅读了 Rcpp 常见问题，发现了如何使用我的内联原型构建一个函数，例如

```
fun <- cxxfunction(...) 
```

制造

```
package.skeleton("mypackage", fun) 
```

它运行良好，但是，当我尝试将普通 R 函数与 cxxfunctions 混合时，它不起作用。有什么猜测吗？至少有一种方法可以将代码添加到现有骨架？

# c++ - if, else 产生错误 C2181: 非法 else without if

> ID：10987326
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:49:00.447
> 
> 标签：c++, compiler-errors, boolean, virtual

我有一个具有以下定义的函数：

`virtual bool Process(wtdaFileHandler &daHandler, wtdaGather &daGather);`

this 函数中的所有代码路径都返回 a`bool`并且我肯定调用了这个函数，而不是子类中的一个。以下代码在发布标题中产生错误：

```
wtdaLFDProcess process;

// call some methods to do initialize process and args.

if (process.Process(daLFDFileHandler, daGather));
{
     retval = 0;
}
else
{
    retval = LFD_FILE_LOCK_ERROR;
    cout << "Could not obtain file lock for processing." << endl;
    WTDA_STATUS(3,  "Error...Stopping" );
    return;
} 
```

谁能解释一下？也许这是我不知道的 C++ 的一些警告？对我来说完全是无稽之谈。该错误无疑是指其他。我已经建立以确保它不仅仅是智能感知。这是一个 Win32 C++ 项目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T20:49:43.557

你需要去掉这个分号：

```
if (process.Process(daLFDFileHandler, daGather));
                                                ^ 
```

分号将`if`条件从后面的块中分离出来，然后将其解释为范围，后跟一个 orphan `else`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T06:30:21.603

if (process.Process(daLFDFileHandler, daGather)); 去除那个 ; 如果只有

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-17T04:29:53.797

行中有不必要的分号：if (process.Process(daLFDFileHandler, daGather));

您需要将其删除以获得所需的输出。

# c - 使用 strncpy 时堆栈和堆的奇怪行为

> ID：10987327
> 
> 赞同：4
> 
> 时间：2012-06-11T20:49:02.903
> 
> 标签：c, string, malloc, strncpy

我发现了一个非常有趣的问题。

当我使用以下代码时：

```
int main() {
    char * in = "hi, ";
    char str[10];
    strncpy(str, in, 2);
    printf("output = %s", str);
    return 0;
} 
```

我的结果是什么，`printf`没有工作。

但如果我使用这个：

```
int main() {
    char * in = "hi, ";
    char * str = malloc(sizeof(char) * 10) ;
    strncpy(str, in, 2);
    printf("output = %s", str);
    return 0;
} 
```

我能得到我所期望的。

为什么会这样？是因为堆栈和堆吗？这究竟是如何产生如此巨大差异的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T20:54:59.343

问题 - 在**这两种**情况下 - 是在您调用`strncpy`.

您指定`2`复制字符，并且源字符串`in`的长度为 4。因此`strncpy`将复制 2 个字符，并且由于它**小于**源字符串的长度，因此不会添加空终止符 - 要了解为什么会这样，请查看[strncpy](http://en.cppreference.com/w/c/string/byte/strncpy)的文档：

`If count is reached before the entire string src was copied, the resulting character array is not null-terminated.`

在这种情况下，您需要：

```
str[2] = '\0'; 
```

在'strncpy'之后。

第二种情况**似乎**可行，因为您从中获取的缓冲区`malloc`恰好被初始化为全零，但您**不应该**依赖它。

请查看[strncpy 的文档](http://en.cppreference.com/w/c/string/byte/strncpy)，注意空终止的异常，一般来说，要小心字符串终止！

有关更多详细信息，请参阅：[为什么 C++ 中的字符串通常以 '\0' 结尾？](https://stackoverflow.com/questions/10943033/why-are-strings-in-c-usually-terminated-with-0/10943040#10943040)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T20:55:10.310

代码编译得很好。运行时错误可能是因为您没有`str`用 null 终止。

从手册页：

> strncpy() 函数类似，只是最多复制 n 个字节的 src。警告：如果 src 的前 n 个字节中没有空字节，则放在 dest 中的字符串不会以空值结尾。

在. `str[2]=0;`_`strncpy()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T04:51:32.777

您可以用零初始化内存以处于“安全”端。

看看下面的代码，

```
int main() {
    char * in = "hi, ";
    char str[10]={0};    
    strncpy(str, in, 2);
    printf("output = %s", str);
    return 0;
}

int main() {
    char * in = "hi, ";
    char * str = calloc(10,sizeof(char));
    strncpy(str, in, 2);
    printf("output = %s", str);
    free(str);      //<<Important step
    return 0;
} 
```

`str[2] = '\0';`也是一个有效的解决方案。

# jquery - CSS3 3D 图像过渡组合

> ID：10987329
> 
> 赞同：0
> 
> 时间：2012-06-11T20:49:08.550
> 
> 标签：jquery, css, webkit, css-transitions

[嘿，我在这里](http://tympanus.net/Development/ImageTransitions/)遇到了 3d 图像的这种不错的效果

问题是，我试图弄清楚如何将所有效果组合到一个页面中，而不是为每组效果（翻转、旋转、多次翻转、立方体、展开和其他）设置一个 html 页面

可以再让我知道如何完成这项任务吗？似乎每种效果都使用不同的 CSS 样式，我不能将 style1-6.css 合并到一个页面中，否则会弄乱所有效果。

**更新** 我目前可以这样做：

```
$navNext.on( 'click', function( event ) {
var randNum = Math.floor ( Math.random() * wPerspective.length ) 

$type = wPerspective[randNum];
type = wPerspective[randNum];

$("LINK[href*='css/style1.css']").remove();
$("LINK[href*='css/style2.css']").remove();
$("LINK[href*='css/style3.css']").remove();
$("LINK[href*='css/style4.css']").remove();
$("LINK[href*='css/style5.css']").remove();
$("LINK[href*='css/style6.css']").remove();

var $$ = document;
var head  = $$.getElementsByTagName('head')[0];
var link  = $$.createElement('link');

link.id   = 'myCss';
link.rel  = 'stylesheet';
link.type = 'text/css';
link.media = 'all';

console.log(type + ' | ' + type.indexOf("te-flip"));

if (type.indexOf("te-flip") == 0)
{
        link.href = 'css/style1.css';
}else if (type.indexOf("te-rotation") == 0)
{
    link.href = 'css/style2.css';
}else if (type.indexOf("te-multiflip") == 0)
{
    link.href = 'css/style3.css';
}else if (type.indexOf("te-cube") == 0)
{
    link.href = 'css/style4.css';
}else if (type.indexOf("te-unfold") == 0)
{
    link.href = 'css/style5.css';
}else if (type.indexOf("te-example") == 0)
{
    link.href = 'css/style6.css';
}

head.appendChild(link);             
$teTransition.addClass( type );

if( hasPerspective && animated )
    return false;

animated = true;    
showNext();
return false;

}); 
```

但它不是很流畅......

**我的演示页面** [http://june3rdsoftware.com/trans/index.html](http://june3rdsoftware.com/trans/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:51:29.230

这些只是 webkit 的不错的 3D 过渡（例如，没有 Firefox）。请注意，这不是一个完整的插件解决方案，而是概念证明，这就是为什么当它们都在同一页面上时它不起作用的原因。每个效果都可以通过跨浏览器版本的组合来提升和使用。

由于它们是那些**style1-6.css**文件中使用不同的一些 CSS 属性，因此有**三种**方法来处理这个问题。

第一种方法是`iframes`用于主页并`.css`分别加载每个文件。缺点是某些效果将仅包含在 iframe 中。

更好的方法需要动态设置用于所有效果的**通用/基本 CSS 样式。**这些可以通过程序化 jQuery 设置，以使用仅具有“效果”CSS 规则的**style1-6.css**文件（例如，Flip1、Flip2、Rotate1 等）。

另一种方法是重新编码**实验性 CSS3 项目**，通过不允许跨脚本污染相同的 CSS 属性，使其不再具有实验性。**简单的方法：** 6 个样式表中的每个样式表将分别用于 6 个`.js files` 是的，这意味着以不同的风格下载脚本 6 次，因为您已经下载了 6 种风格的 CSS 文件。每个`.js file`都与相应的修改一起修改，`.css file`因此不会发生交叉污染。**困难**的方式：重新编码 .js 文件以允许所有效果没有问题。

简单方法示例：

```
<!-- The script is modded so that -1 means 1.css is used -->
<div id="te-wrapper-1" class="te-wrapper-1">

<!-- The script is modded so that -2 means 2.css is used -->
<div id="te-wrapper-2" class="te-wrapper-2"> 
```

# jquery - 等待 jQuery 动画完成而不使用回调

> ID：10987332
> 
> 赞同：0
> 
> 时间：2012-06-11T20:49:20.557
> 
> 标签：jquery, animation, callback

我有以下结构

```
$('foo').click( function() {
    var bool = false;
    $('bar').animate( function() {
        //bool = something
    });

    return bool;
}); 
```

但是因为动画回调是异步的，所以 bool 永远不会正确设置。将 return 语句移到回调中没有意义。如何让 return 语句等到动画完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:55:25.303

这是不可能的，返回将立即发生——没有办法延迟它。尝试这样做：

```
$('foo').click( function(e) {
    e.preventDefault();
    var _this = this;
    $('bar').animate( function() {
        if (somecondition) {
            window.location.href = _this.href;
            // or submit the form, etc.
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:58:33.327

尝试如下，

```
$('foo').click( function(e) {
    e.preventDefault(); //prevent submission

    var bool = false;
    $('bar').animate( function() {
        //bool = something
        if (bool) { 
           //do what you wanted to do
        }
    });   
}); 
```

# python - 如何让 for 循环生成的 TK 按钮将输入传递给他们的命令？（Python）

> ID：10987333
> 
> 赞同：1
> 
> 时间：2012-06-11T20:49:23.853
> 
> 标签：python, user-interface, tkinter, tk, openfiledialog

我有一个动态生成 GUI 的程序。我不知道我会有多少个按钮，如果有的话。

具体问题是这样的：

```
for varname in self.filetextboxes:
    if self.varDict[varname]=='':
        self.varDict[varname] = (StringVar(),)
        self.varDict[varname][0].set('')

    fileButton = Button(self, text=" ", command = lambda:self.varDict[varname][0].set(tkFileDialog.askopenfilename()), image=self.filephoto)

    ftb = Entry(self, textvariable = self.varDict[varname][0],width=40,background='white') 
```

我有一个创建文本框和按钮的 for 循环。StringVar() 存储在带有 key 的字典中`varname`。

因为我无法在按钮的回调函数中传递参数，所以我改为在每个按钮中定义一个 lambda。这会将与此循环中创建的文本框关联的 StringVar() 设置为文件对话框的输出。

问题是，传递给 lambda 的 varname 没有传递值，而只是传递了变量的名称。因此，虽然文本框与在 for 循环中创建它们的变量相关联，但按钮中的 lambdas 始终使用 varname 的当前值。

换句话说，每个文本框只链接一个变量，但所有的按钮只设置最终创建的文本框的文本，即最终值为varname的文本框。

还有另一种方法可以解决这个问题吗？我可以让 lambda 以某种方式只使用定义的 varname 的值，而不使用 varname 的未来值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:32:31.133

通常，您会通过字典将**按钮**与 varname 和 StringVar() 相关联，键是按钮的 id 或数字，指向任何内容。由于您使用的是 StringVar，我假设您正在使用 Tkinter 执行此操作。下面是一个简单的示例，它将按钮的编号传递给访问字典的函数。

```
from Tkinter import *
from functools import partial

class ButtonsTest:
   def __init__(self):
      self.top = Tk()
      self.top.title('Buttons Test')
      self.top_frame = Frame(self.top, width =400, height=400)
      self.button_dic = {}
      self.buttons()
      self.top_frame.grid(row=0, column=1)

      Button(self.top_frame, text='Exit', 
              command=self.top.quit).grid(row=10,column=1, columnspan=5)

      self.top.mainloop()

   ##-------------------------------------------------------------------         
   def buttons(self):
      b_row=1
      b_col=0
      for but_num in range(1, 11):
         ## note that the correct "but_num" is stored
         self.button_dic[but_num] = "self.cb_button_%d()" % (but_num)
         b = Button(self.top_frame, text = str(but_num), 
                    command=partial(self.cb_handler, but_num))
         b.grid(row=b_row, column=b_col)

         b_col += 1
         if b_col > 4:
            b_col = 0
            b_row += 1

   ##----------------------------------------------------------------
   def cb_button_1(self):
      print "push button 1 and this code is executed"

   ##----------------------------------------------------------------
   def cb_button_2(self):
      print "push button 2 and this code is executed"

   ##----------------------------------------------------------------
   def cb_button_3(self):
      print "push button 3 and this code is executed"

   ##----------------------------------------------------------------
   def cb_handler( self, cb_number ):
      print "cb_handler", cb_number, self.button_dic[cb_number]                
      if cb_number < 4:
         exec(self.button_dic[cb_number])

##===================================================================
BT=ButtonsTest() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T02:04:26.477

我不得不承认——这个让我有点难过。由于您将 Button 与 Entry 和 stringvar 配对，因此一种解决方法是将它们包装在一个类中。（我可能会争辩说这更优雅一点......）

```
import Tkinter as tk

class ButtonEntry(tk.Frame):
    def __init__(self,master,ss):
        tk.Frame.__init__(self)
        self.var=tk.StringVar()
        self.var.set(ss)
        self.Button=tk.Button(self,text='Button',command=lambda :self.var.set("foo!"))
        self.Entry=tk.Entry(self,textvariable=self.var)
        self.Button.grid(row=0,column=0)
        self.Entry.grid(row=0,column=1)

class App(tk.Frame):
    def __init__(self,master=None):
        tk.Frame.__init__(self,master)
        self.BEs=[]
        for i in range(10):
            b=ButtonEntry(self,'Button %d'%i)
            b.grid(row=i,column=0)
            self.BEs.append(b)

if __name__ == '__main__':
    root=tk.Tk()
    f=App(root)
    f.grid(row=0,column=0)
    root.mainloop() 
```

但是，我真的很想知道 lambda 的行为方式为何如此。我认为你有什么应该工作。

**编辑**

我已经追踪了 lambda 函数的行为。 [https://stackoverflow.com/a/10452819/748858](https://stackoverflow.com/a/10452819/748858)给出了如何正确执行此操作的一个很好的示例。问题是 lambda 函数中的变量仍然绑定到声明 lambda 的范围。为了解除它们与该范围的关联，您需要将它们设置为函数的关键字参数。好的！今天早上我学到了一些新东西。

# c# - 时间：2019-04-01 标签：c#multiformsDataSet

> ID：10987336
> 
> 赞同：0
> 
> 时间：2012-06-11T20:49:43.167
> 
> 标签：c#, winforms, dataset

在第一个表格上，我有：

```
var dsUni = new DataSet();
dsUni.ReadXml(pathDesc);
frm02.dgv02.DataSource = dsUni.Tables[0];
frm02.ShowDialog();
dsUni.WriteXml(pathDesc); //this line is in the frm02.ClosingEvent 
```

因此，在 secondForm 上，我需要相同的 DataSet(dsUni) 来从更改的 dgv02 中写入 XML。
但是，我得到了错误：
当前上下文中不存在名称“dsUni”
请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:26:02.633

该错误告诉您第二种形式没有`dsUni`定义名为的变量。您需要定义它，例如`var dsUni = new DataSet();`在第一个表单中所做的那样。虽然您通过 line 传递了数据本身`frm02.dgv02.DataSource = dsUni.Tables[0];`，但名为的变量`dsUni`是 form1 的本地变量，因此 form2 不知道它。如果您想以 name 访问该数据集，则`dsUni`必须公开它以便 form2 可以直接访问它，或者在 form2 上使用该名称创建一个新的局部变量并使用所需的数据加载它（非常低效，除非您只使用指针回到form1的dsUni）。

如果您在 form2 上创建一个名为 的新变量`dsUni`，请不要忘记使用所需数据加载它，因为它一开始是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:32:26.773

不要这样做，它只是要求它。

巨额的技术债务正等着发生。

有几种方法可以做得更好，但是您可以在此基础上进行构建。

创建一个小类，例如

```
public class MyData()
{
   public Dataset MyDataset {get; private set;}

   // add constructor and all methods related to the dataset here. 
} 
```

然后只需在 Form1 中创建一个，执行您必须做的事情并将其作为属性或在构造函数中传递给 form2。

如果它很常见并且不是完全微不足道的，那就创建一个常见的东西，把所有与之相关的方法都放在那里，然后使用它。一旦您开始使用 form2 取决于 form1 动作，您可能会节省能量并尽可能用力将圆珠笔塞入您的左鼻孔，头痛将是相似的。

界面会更好，但这是下一课。

# python - 带有 python 的 QtDesigner 插件（libpythonplugin 不是有效的 Qt 插件）

> ID：10987338
> 
> 赞同：1
> 
> 时间：2012-06-11T20:49:48.730
> 
> 标签：python, qt, pyqt, qt-designer

我正在尝试使用 pyQt 构建 Qt Designer (4.7.4, Mac OS X 10.6) 插件。我遵循了一些在线说明，例如：

*   [http://diotavelli.net/PyQtWiki/Using_Python_Custom_Widgets_in_Qt_Designer](http://diotavelli.net/PyQtWiki/Using_Python_Custom_Widgets_in_Qt_Designer)
*   [http://doc.qt.nokia.com/qq/qq26-pyqtdesigner.html](http://doc.qt.nokia.com/qq/qq26-pyqtdesigner.html)

没有成功：插件没有出现在列表中。当我进入“关于插件”框时，我可以看到：

> 文件“/Developer/Applications/Qt/plugins/designer/libpythonplugin.dylib”不是有效的 Qt 插件。

所以我认为让Qt Designer对pyqt插件犹豫不决的插件不起作用。任何想法如何解决它？

谢谢，

# git - 如何使用 git 获取子模块的所有修改文件的列表？

> ID：10987341
> 
> 赞同：1
> 
> 时间：2012-06-11T20:50:15.517
> 
> 标签：git, git-submodules, githooks, git-log

> **可能重复：**
> [git：所有已更改文件的列表，包括子模块中的文件](https://stackoverflow.com/questions/10757091/git-list-of-all-changed-files-including-those-in-submodules)

我有一个超级存储库，其中包含许多定期更新的子模块。我为这个超级存储库设置了一个接收后挂钩设置，每次提交后都会进行维护。

我正在尝试获取提交中所有已修改文件的列表，其中包括在更新子模块后已修改的所有文件。

以下是我为没有子模块的仓库执行此操作的方法：

`git show --pretty="format:" --name-only HEAD | tr '\n' ' '`

...这将输出类似`testing1.html testing2.html foo.md bar.js`，这是所需的格式（以空格分隔的文件名）。

我的问题是，如何获取单个提交的*所有修改文件的列表，包括子模块中已更改的文件？*

# regex - 我可以匹配单词的开头吗？

> ID：10987346
> 
> 赞同：1
> 
> 时间：2012-06-11T20:50:42.403
> 
> 标签：regex, pattern-matching

我正在为用户构建一个小型过滤器实用程序来快速过滤项目列表，并且我想按顺序匹配单词的开头，最好使用正则表达式：

考虑一个用户试图找到标记为 的项目`here is some text`。

*   我已经知道如何让它匹配任何一个单词的开头：

**她**——**她的**e 是一些文本——`\bher`
**所以**——这是**我**的文本——`\bso`
**分机**——*不匹配*——`\bext`

*   而且我知道如何使它匹配几个单词的第一个字母：

**hist** -这**是**一些**文本**- **ht** -**这**是一些**文本****-** **_** _******`\bh.*?\bi.*?\bs.*?\bt`
******`\bh.*?\bt`************

 *********   我需要的是能够匹配`n`几个单词的第一个字符：

**herst** — **her** e is some t **ext** iso **—** here **is** **so** me text **teh** —**不***匹配*

 *********我这样做是因为我的项目通常包含 intialisms，并且用户可能会键入**usc**以尝试快速拉出**US** A、**C** alifornia

我正在为每个输入重写模式，所以我可以做一些工作，这在案例 #2 中是必要的。我正在寻找一种解决方案，无论是模式复杂度还是总复杂度，都可以随字符数线性扩展。

鉴于这些限制，匹配这些字符串的最佳选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:55:44.593

我认为这对于标准的正则表达式库是不可行的。

但是鉴于您的限制，您应该能够编写自己的解析器来进行匹配。保留一堆模式，然后从头到尾扫描输入文本。您需要跟踪的唯一状态是前一个字符是边界还是从堆栈中取出项目。如果您在没有清空堆栈的情况下到达输入末尾，则不匹配。

在伪代码中：

```
pattern = "herst"
input = "here is some text"
state = true
until input.empty? or pattern.empty? do
  if input[0] == pattern[0] and state
    pattern.shift!
  else
    state = is_boundary(input[0])
  endif
  input.shift!
done
return pattern.empty? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:56:21.490

像这样的怪物：

```
 \bh(.*?\b)?e(.*?\b)?r(.*?\b)?s(.*?\b)?t 
```

本质上，每个字母要么在前一个字母之前，要么是一个以单词边界结尾的随机序列`(.*?\b)`。所以，我们使这个随机序列 + \b 可选`?`。`(.*?\b)?`因此，在所有字母之间分解它应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:04:00.540

使用纯正则表达式以灵活的方式做到这一点是很困难的，如果不是不可能的话。我想到的一种可能的方法是首先尝试使用单词边界进行简单的正则表达式匹配，就像您已经完成的那样，然后生成一组所有可能的前缀和后缀对并与它们进行匹配。但是，如果您希望能够匹配字符串中任意两个以上的单独单词，您可能应该编写一个简单的函数来遍历正在搜索的字符串，尝试匹配查询字符串中的最长前缀。一旦找到最长的前缀，就继续搜索字符串中的下一个单词，并尝试匹配查询的其余部分（即减去已经匹配的前缀），并继续这样做直到整个查询已匹配，或搜索到的字符串结束。这应该很容易递归地实现。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-11T20:52:47.673

尝试使用`^<myregex>`字符串的开头和`<myregex>$`结尾。*****************

# .net - 如何禁用自定义依赖属性的设计时执行？

> ID：10987354
> 
> 赞同：0
> 
> 时间：2012-06-11T20:51:24.023
> 
> 标签：.net, wpf, visual-studio-2010, dependency-properties

在框架元素对象上实现自定义依赖属性会导致我的 Visual Studio WPF 设计器崩溃。设计器似乎在加载设计器时执行我的依赖属性代码。因此，设计者发现了一个未处理的异常（我自己在依赖属性代码中抛出）并中断了。

有什么方法可以禁用我的自定义依赖属性的设计时执行，所以我的设计师仍然可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:23:59.783

您应该能够检查 DependencyObject 的[IsInDesignMode 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesignmode.aspx)并选择不引发异常。

# testing - How much should I unit-test my code

> ID：10987355
> 
> 赞同：1
> 
> 时间：2012-06-11T20:51:25.217
> 
> 标签：testing, mocking

I always wondered how much I should test my code (with unit tests).

Let's say I have this component:

```
@Stateless
public class UserManager {
    @PersistenceContext
    EntityManager entityManager;

    @Inject
    Event<UserEvent> event;

    public User getUserByUsername(String username) {
        User user = entityManager
                     .createQuery("SELECT u FROM User u WHERE u.username = :username", User.class)
                     .setParameter("username", username)
                     .getSingleResult();
        event.fire(new UserEvent("some message"));

        return user;
    }
} 
```

To test it really thoroughly, I should mock Event and EntityManager. Which of these should I do then?

*   Verify that method createQuery on entityManager is called exactly once with the given JPQL statement.
*   Verify that method setParameter is called exactly once with the given parameters.
*   Verify that method getSingleResult is called exactly once.
*   Verify that event is fired with the given parameters exactly once.
*   Test that the correct user is returned.

All? It seems to me very invasive since every little change in my implementation results in change needed to be done in my tests.

I have two a little different questions which I think are related.

Q2: On arquillian [webiste](http://arquillian.org/features/), you can read this:

> Arquillian let's you ditch the mocks and write real tests.

Does it mean I shouldn't use mock objects? How can (with arquillian) I test my code really thoroughly then?

Q3: According to TDD, you should write tests first and then the implementation. But how do you want to do it if you don't have either the implementation or the api, so the tests won't compile?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:43:16.693

> 我一直想知道我应该对我的代码进行多少测试（使用单元测试）。

如果您的 DAL 中没有业务逻辑，那么我会说：不要编写（纯）单元测试，编写集成测试。首先编写集成测试测试。

我这么说是因为你做的很少，大部分有趣的事情都发生在数据库或 ORM 中，这就是问题的来源。

我可能考虑的唯一（纯）单元测试是显示事件已被触发。

我不知道 Arquillian 是如何工作的，并且鉴于所需的“世界”数量很少，我可能不会将它用于此测试。相反，我只是`EntityManager`在测试方法中新建一个并将其传递下去。我可能会嘲笑`Event<UserEvent>`.

> 这是否意味着我不应该使用模拟对象？

模拟（和其他假货）是一种工具。它们可能非常有用。但它们并不能解决所有问题，也不应该用它们来测试每一件事。

> 根据 TDD，您应该先编写测试，然后再编写实现。但是，如果您没有实现或 api，您想怎么做

这些测试可以帮助您制定 API。

> 所以测试不会编译？

失败。修复故障并重新运行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:58:37.017

> Q3：按照TDD，你应该先写测试，再写实现。但是，如果您既没有实现，也没有 api，那么您想怎么做，所以测试将无法编译？

测试应该编译但失败。您可以在类定义中存根方法，以便它们在编写测试时出现，但在运行测试之前不应该实现方法主体。

# c# - Deleting SQS Message with Receipt Handle

> ID：10987359
> 
> 赞同：4
> 
> 时间：2012-06-11T20:52:23.317
> 
> 标签：c#, amazon-web-services, amazon-sqs, receipt

I am currently using amazon's SQS, and am having issues when trying to delete queue messages that are currently "In Flight".

Below is some example code:

```
ReceiveMessageRequest queueRequest = new ReceiveMessageRequest();
        queueRequest.WithMaxNumberOfMessages(1);
        queueRequest.WithQueueUrl(config.QueueURL);
        queueRequest.WithAttributeName("All");

        ReceiveMessageResponse response = sqs.ReceiveMessage(queueRequest);

        if (response.IsSetReceiveMessageResult())
        {
            ReceiveMessageResult result = response.ReceiveMessageResult;

            if (result.IsSetMessage())
            {
                if (result.Message.First() != null)
                {
                    return new Tuple<string, string, bool>(result.Message.First().ReceiptHandle, result.Message.First().Body ?? null, false);
                }
            }
        } 
```

Now after receiving both the Handle, and the message body, I store the Receipt handle string into cloud storage (DynamoDB for example). I then later on load that handle out of the storage service, and call a delete with something similar to the following:

```
sqs.DeleteMessage(new DeleteMessageRequest() { QueueUrl = "urL", ReceiptHandle = handle }); 
```

However, when running that line, I receive a "The input receipt handle is invalid" error message.

Note, I know that this message has not gotten re-received, so the receipt handle being logged, should be the most recent one. Also note that I can currently delete messages within that same application, simply by sleeping after the message is received, and then trying to delete it as above!

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-01T17:26:54.370

确保在执行这两个操作（ReceiveMessage 和 DeleteMessage）时使用引用队列的完全相同的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T08:52:54.857

您必须等到消息的 VisibilityTimeout 过期才能再次对其执行操作。这允许处理该消息的机器有时间做它需要做的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-10T14:21:51.907

ReceiptHandle 包含一些对 URL 敏感的特殊字符。所以你需要先对它进行 URL 编码。我也做了同样的事情，它奏效了。

# c# - Using an exception vs returning string as message

> ID：10987360
> 
> 赞同：0
> 
> 时间：2012-06-11T20:52:32.137
> 
> 标签：c#, exception, exception-handling

If I am writing an API that takes an int parsed from a string, is it a good idea to seperate the parse method from the method that would do something with the "out" value?

My reason for thinking yes is that the code will be more clear. E.g. if I get an exception related to the parse, I can say in the stack "ah yes, that would be the top method called Parse() obviously!" before even looking at the codebase. I believe null is the wrong choice as it could introduce bugs by other developers who do not understand the technical decisions made (though I document this religously).

However, in a method that is 5 levels deep in the stack, how could I "Relay" an error string message?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:25:31.457

你的问题有点不清楚。您是说您的方法采用一个字符串，该字符串应该可以解析为整数，然后对这种解析的数字结果进行处理？

如果您的方法不太可能收到大量无效字符串，并且如果您的例程在收到无效字符串时没有任何用处，那么您的方法最好在无效字符串出现时抛出异常传入。如果您的方法进行了足够复杂的解析，调用者无法很好地验证字符串而不做您的例程解析它的工作量，并且您的例程将被期望批量处理所有好的字符串包含好字符串和坏字符串的混合，一个常见的模式是公开一个`bool TryParse(string st, ref int result)`. 就个人而言，我不喜欢这种模式，因为它没有提供任何机制来指示解析失败的原因。我会推荐一种不同的模式——类似于以下模式之一：

```
int TryParse(string st, out ParseStatus status);
int TryParse(string st, Action<ParseStatus> failureAction);
委托 void ActionRV<RefT,ValT>(ref RefT refparam, ValT valparam);
int TryParse<RefPT>(string st, ActionRV<RefT, ParseStatus> FailureAction,
                        参考参考参考参数）；

```

在所有这三种调用模式中，如果`ParseStatus`是可继承类型，则可以`TryParse`提供精确描述故障的实例`ParseStatus`或派生类型。在第二种和第三种模式的情况下，委托可以自己抛出一个异常，存储在`ParseStatus`一个应该返回给调用函数的值中，或者可能做一些类似于 munge 原始参数字符串（如果它存储在 中`ParseStatus`）并设置一个请求“重试”的标志。我个人喜欢第三种形式，因为我认为`ref`在任何一种都可以工作的情况下，参数应该优于闭包。请注意，第二种形式可以按照第三种形式有效地实现：

```
静态 ExecAction<T>(T 参数，参考 Action<T> proc)
{
  过程（参数）；
}
int TryParse(string st, Action<ParseStatus> failureAction)
{
  TryParse(st, ExecAction, ref failureAction);
}

```

请注意，传递`failureAction`ref 参数意味着可以为包装函数使用静态委托，而不必使用闭包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:56:20.700

你应该让它抛出一个[ArgumentException](http://msdn.microsoft.com/en-us/library/system.argumentexception.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:02:34.800

为了传递错误字符串消息，创建一个异常并使用“throw”关键字。

至于分离 parse 方法，这是你要求的吗？

```
int myInt;
if(!Int32.TryParse(inputString, out int myInt))
    throw new System.ArgumentException("Invalid Argument", "inputString");

methodThatUsesInt(myInt); 
```

# javascript - geocode reverse

> ID：10987361
> 
> 赞同：0
> 
> 时间：2012-06-11T20:52:41.473
> 
> 标签：javascript, html

I am using the following code to call up a map and display. I would like to add the the function to do a reverse geocode and print out the corresponding street address. I cannot seem to get the long/lat coords passed over to the function. How can I get the long/lat coordinates converted to a street address?

```
function getMyLocation() {
    if (navigator.geolocation) {

        navigator.geolocation.getCurrentPosition(
        displayLocation, displayError, {
            enableHighAccuracy: true,
            timeout: 9000
        });

        var watchButton = document.getElementById("watch");
        watchButton.onclick = watchLocation;
        var clearWatchButton = document.getElementById("clearWatch");
        clearWatchButton.onclick = clearWatch;
    }
    else {
        alert("Oops, no geolocation support");
    }
}

function displayLocation(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    var div = document.getElementById("location");
    div.innerHTML = "You are at Latitude: " + latitude + ", Longitude: " + longitude;
    div.innerHTML += " (with " + position.coords.accuracy + " meters accuracy)";

    var km = computeDistance(position.coords, ourCoords);
    var distance = document.getElementById("distance");
    distance.innerHTML = "You are " + km + " km from the WickedlySmart HQ";

    if (map == null) {
        showMap(position.coords);
        prevCoords = position.coords;
    }
    else {
        var meters = computeDistance(position.coords, prevCoords) * 1000;
        if (meters > 20) {
            scrollMapToPosition(position.coords);
            prevCoords = position.coords;
        }
    }
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:11:18.857

如果你喜欢使用额外的库，你可以在这里查看**[geos](http://rjz.github.com/geous.js/examples/geous-and-jquery-form.html)****[和](http://rjz.github.com/geous.js/)**它的 jquery 插件的最终地理编码/位置示例。

该示例使用该方法自动填充表单`setLocation`，但您也可以轻松地打印位置：

```
// location geocoded -- print address
var onGeocodeSuccess = function (location) {
  console.log(location.toAddress());
}

// location retrieved -- geocode it.
var onUserLocationSuccess = function (location) {
  geous.geocode (location, { 
    reverse: true,
    success: onGeocodeSuccess
  });
}

// Try and get user location
geous.getUserLocation({
  success: onUserLocationSuccess
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T13:14:36.537

对不起。误解了这个问题。这是我几周前为一个项目整理的一些代码。它只是提取邮政编码，但您可以从中获取地址。它是为 jQuery 编写的。此外，我正在动态加载 Google Maps API。如果需要，您可以直接加载它。

```
$(document).ready(function() {
    if (navigator.geolocation) {
        var script   = document.createElement("script");
        script.type  = 'text/javascript';
        script.src = 'http://www.google.com/jsapi?callback=loadMapsAPI';
        document.getElementsByTagName('head')[0].appendChild(script);
    } else {
        console.log('NOTE: Browser does not support geolocation.');
    }
}); 

function loadMapsAPI() {
    google.load('maps', '3', {
        'other_params': 'sensor=false',
        'callback' : mapLoaded
        }
    );
}

function mapLoaded() {
    $('#geolocateButton').css('display','block');
}

function findMyLocation() {
    navigator.geolocation.getCurrentPosition(
        function(position) {
            var latLng = new google.maps.LatLng(
                                position.coords.latitude,
                                position.coords.longitude);
            var coder = new google.maps.Geocoder();
            coder.geocode({ 'latLng': latLng }, fillZipcode);
        },
        function() {
            alert("Could not determine your position.");
        }
    );
}   

function fillZipcode(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
            var parts = results[1].address_components;  
            for(var i = 0; i < parts.length; i++) {
                if(parts[i].types[0] == 'postal_code') {
                    alert('Your Zip Code is: ' + parts[i].short_name);
                    return;
                }
            }
        } else {
            alert("Could not figure out your zip code.");
        }
    } else {
        alert("Geocoder failed due to: " + status);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:24:12.387

除了关于 watchbutton 的区域外，其余的在 Chrome 中对我来说都很好。

您不是要从 file:// URL 执行此操作，是吗？

# delphi - Delphi 在使用 FindFirst/FindeNext 搜索时将单引号加倍

> ID：10987364
> 
> 赞同：2
> 
> 时间：2012-06-11T20:53:09.150
> 
> 标签：delphi, path, find

我在 Windows 7 上使用 Delphi 2010，并且在递归搜索目录时遇到单引号加倍的问题。

这是我搜索目录的代码。

```
 if FindFirst(aPath + '*', faDirectory, sr) = 0 then
    try
      repeat
        if  (sr.Name <> '.') and (sr.Name <> '..') then
          if (sr.Attr and faDirectory) = faDirectory then
            SearchFolderEx(aPath + sr.Name + '\', aSearchMasks);

      until FindNext(sr) <> 0;
    finally
      FindClose(sr);
    end; 
```

现在使用这样的路径（从“C:\New folder\”开始）

```
C:\New folder\New Folder's\New Text Document.txt 
```

FindFirst/FindeNext 将单引号加倍

```
'New Folder''s' 
```

TSearchRec 中的 FindData.cFileName 看起来像这样

```
('N', 'e', 'w', ' ', 'F', 'o', 'l', 'd', 'e', 'r', '''', 's', #0, #0, ...) 
```

问题可能出在哪里，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T20:56:06.810

这里没有问题，也不需要解决任何问题。`'`是字符串分隔符，只是为了表示为而转义`''`。当调试器`''`以字符串显示您时，这只是表示单引号字符的方式。

文档在此处涵盖此主题：[字符串](http://docwiki.embarcadero.com/RADStudio/en/Fundamental_Syntactic_Elements#Character_Strings)。

所以，

```
'''' 
```

是一个长度为 1 的字符串，其单个元素是引号符号。

同样地

```
'New Folder''s' 
```

是定义字符串的 Delphi 字符串文字

```
New Folder's 
```

调试器使用与字符串文字相同的规则向您显示变量的内容。

# cuda - How to find the type of Nvidia GPU (either Tesla, Fermi or Kepler) by the program

> ID：10987365
> 
> 赞同：3
> 
> 时间：2012-06-11T20:53:12.307
> 
> 标签：cuda, nvidia

Can anyone tell me how to find the GPU type (Fermi, Tesla or Kepler) by the program, so that the would call the correct function depending on the GPU type.

Through **cudaDeviceProp.major**, I was able to differentiate Fermi and Tesla through their compute capability. But I am not able to differentiate between Fermi and Kepler.

Do anyone know how to find it.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T21:37:47.880

To answer the question, `cudaDeviceProp.major=3` identifies current Kepler cards, `cudaDeviceProp.major=2` is for Fermi and `cudaDeviceProp.major=1` for G8x/G9x/G2xx cards, as illustrated by this SDK deviceQuery output:

```
/deviceQuery Starting...

CUDA Device Query (Runtime API) version (CUDART static linking)

Found 1 CUDA Capable device(s)

Device 0: "GeForce GTX 680"
CUDA Driver Version / Runtime Version 4.2 / 4.2
CUDA Capability Major/Minor version number: 3.0
Total amount of global memory: 2048 MBytes (2147287040 bytes)
( 8) Multiprocessors x (192) CUDA Cores/MP: 1536 CUDA Cores
GPU Clock rate: 706 MHz (0.71 GHz)
Memory Clock rate: 3004 Mhz 
```

# jquery - What dropdown box does rails_admin use?

> ID：10987366
> 
> 赞同：0
> 
> 时间：2012-06-11T20:53:17.160
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, rails-admin

I want to use it in my rails projects instead of the default selectbox, but can't figure out what kind it is or how to implement it in my code.

The rails_admin one is more like a textbox with typeahead instead of just a standard dropdown.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:16:47.553

看起来他们已经创建了自己的，这里看看：

[https://github.com/sferik/rails_admin/blob/master/app/assets/javascripts/rails_admin/ra.filtering-multiselect.js](https://github.com/sferik/rails_admin/blob/master/app/assets/javascripts/rails_admin/ra.filtering-multiselect.js)

将它拉出来并制作一个插件会很好，因为它看起来确实依赖于 jQuery 和 jQueryUI。

# javascript - Does ExternalInterface work locally on an Android device?

> ID：10987369
> 
> 赞同：1
> 
> 时间：2012-06-11T20:53:32.363
> 
> 标签：javascript, android, flash

Ok, I am doing a simple ExternalInterface call to hit up a JavaScript function. It works perfect in every browser on a desktop, both on a web server and locally with the file:// protocol by setting allowscriptaccess to always.

The problem is, my client has to have this running offline on an Android tablet or phone. Now, it works fine when it points to the web server from the tablet, but when I try to run it locally the ExternalInterface call never fires.

I am using the Dolphin HD browser as well as the built in browser on the device.

So my main questions are, because this works everywhere else, I am assuming Flash on Android does not allow EI calls when running locally for whatever reason? Is there a workaround? Do fsCommands work locally?

# asp.net - SQL Server 2005 Timeout, Connection Was Reset

> ID：10987372
> 
> 赞同：0
> 
> 时间：2012-06-11T20:53:49.640
> 
> 标签：asp.net, sql-server, sql-server-2005, connection-reset

I am loading 100,000 plus pieces of data, which should take like 30 to 40 minutes to analyze and complete. We use SQL Server 2005\. Currently after a specified time (trying to get the minutes it uses), the SQL Server says the connection was reset.

Is there some setting where this can be changed so my queries can run for an hour?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T10:07:50.953

可能您的问题与工作进程（w3wp.exe）有关。在 Web 应用程序中经过一段时间后，工作进程将被回收。所以请检查“IIS”的这个设置。您还可以在 web.config 中重置“连接超时”的超时时间或更改代码中的“CommandTimeout”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:10:12.557

SqlCommand.CommandTimeout 属性可以让你在代码中设置它，但是除非你很聪明，否则你也可以获得网络服务器超时。

连接重置甚至可能是您的网络男孩，因为没有活动而将其杀死。

我会考虑以某种方式重组这个。就像请求完成工作并启动线程来完成它一样。一个状态页面，看看它在哪里。完成后会提供一个指向结果的链接，或者类似的东西。

# asp.net - In ASP.net, Without using browser Cookies can we track user system?

> ID：10987376
> 
> 赞同：-1
> 
> 时间：2012-06-11T20:54:20.620
> 
> 标签：asp.net

In ASP.net,

Without using browser Cookies can we track user system? actually we have requirement where we generate URL and send email to user with URL and when user clicks on the URL I need to know whether user is authorized to view WebPage or not.

Please help me, how to track user.

Thanks,

Sukesh.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:00:30.840

您可以通过 IP 地址限制访问。

除了 cookie 之外，还有其他方式来存储身份验证信息，即[http://www.codeproject.com/Articles/2796/Cookieless-ASP-NET-forms-authentication](http://www.codeproject.com/Articles/2796/Cookieless-ASP-NET-forms-authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:00:48.687

您可以通过`sessionState`元素的`cookieless`属性进行无 cookie 会话。

[http://msdn.microsoft.com/en-us/library/h6bb9cz9.aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9.aspx)

# xhtml - 为什么我不能在 div 标签上使用 inline-block？

> ID：10987377
> 
> 赞同：0
> 
> 时间：2012-06-11T20:54:23.833
> 
> 标签：xhtml, css

我有以下示例代码，并注意到如果我尝试`display:inline-block`在 div 元素上使用声明`content`，它不会将其后代或子代并排放置。

我让`p`元素彼此相邻的唯一方法是将样式应用于`p`选择器。这是否意味着我不能`display: inline-block`对后代、孩子和兄弟姐妹使用？

**代码**

```
<DOCTYPE public HTML "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset="UTF-8" />
        <meta http=equiv="content-language" content="en-us" />
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <meta name="copyright" content="&copy; 2012" />
        <title>Inline-block</title>

        <base href="" />
        <link rel="stylesheet" href="" />

        <style type="text/css" media="all">

        p {
            display: inline-block;
            width: 100px;
        }

        </style>
    </head>

    <body>
        <div id="content">
            <p>paragraph 1</p>
            <p>paragraph 2</p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:56:30.183

inline-block 应该适用于兄弟姐妹，但不适用于孩子。尝试这样的事情：

```
#content p {
   display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:57:07.997

您需要在要以这种方式显示的元素上设置属性。`display`财产不由子女继承。还应该注意的是，IE7 只接受`inline-block`默认内联的元素。

# jquery - 我应该如何在 Jquery Mobile 中使用 rel="canonical"？

> ID：10987383
> 
> 赞同：2
> 
> 时间：2012-06-11T20:54:34.673
> 
> 标签：jquery, jquery-mobile, seo

谷歌最近推出了他们的移动最佳实践：[https ://developers.google.com/webmasters/smartphone-sites/details](https://developers.google.com/webmasters/smartphone-sites/details)

鉴于页面在 Jquery Mobile 中的工作方式，我的问题是关于如何为我的移动网站上的各个页面设置 rel="canonical" 链接。

我是否应该不担心其他页面（例如位置、联系人等），而只专注于在我的脑海中记住以下内容：

```
<link rel="canonical" href="website.com" > 
```

也许我应该在头部包含所有规范链接？

```
<link rel="canonical" href="website.com" >
<link rel="canonical" href="website.com/locations" >
<link rel="canonical" href="website.com/contact-us" > 
```

或者我应该在每个单独的 jquery 移动“页面”中包含规范链接？

```
<div data-role="page" id="locations" data-theme="a">
<link rel="canonical" href="website.com/locations" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:07:17.920

您应该在每个页面中放置一个规范标签。（您列出的最后一个选项。）

爬虫将在没有启用 JavaScript 的情况下访问您的网站以获取这些标签。

因此，您需要为每个页面单独设置规范标签，以便直接链接到该页面：`http://localhost:8080/some/path`将这样设置规范 URL。不用担心它会在每个 pageshow 事件中发生变化。

### 低于此点的信息不适用于 SEO，更多是为了好玩/好奇

如果您希望能够更改 pageshow 上的规范标签，请将其扔到您的 JS 中：

```
$(document).bind('pageshow', function() {
    $('link[rel=canonical]').attr('href',$('base').attr('href'));
}); 
```

# java - 使用 ConnectionPoolDataSource 进行连接

> ID：10987388
> 
> 赞同：6
> 
> 时间：2012-06-11T20:54:48.353
> 
> 标签：java, mysql, database-connection

连接我所需的数据库。我打算使用**ConnectionPoolDataSource**类。但是*如何设置有关使用此实例的数据库名称（我希望它连接到的）的详细信息*。请在这种情况下提供帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-11T20:57:10.940

尝试阅读[本](http://original.jamesthornton.com/postgres/7.3/postgres/jdbc-datasource.html)文档和[示例](http://www.java2s.com/Code/JavaAPI/javax.sql/ConnectionPoolDataSourcegetPooledConnection.htm)

**编辑**

刚刚修改了上面链接中的示例

准备步骤： - 下载[MySQL 服务器](http://dev.mysql.com/downloads/mysql/) - 下载[mySQL java 驱动程序](http://dev.mysql.com/downloads/connector/j/) - 下载[Apache Commons Pool](http://commons.apache.org/pool/download_pool.cgi) - 下载[Commons DBCP](http://commons.apache.org/dbcp/download_dbcp.cgi) - 打开 MySQL 客户端，如 MySQL Workbench 并使用下一个脚本创建数据库

```
delimiter $$

CREATE DATABASE `test_stackoverflow` /*!40100 DEFAULT CHARACTER SET utf8 */$$

delimiter $$

CREATE TABLE `test_table` (
  `idtest_table` int(11) NOT NULL,
  `test_field` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`idtest_table`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8$$

INSERT INTO `test_stackoverflow`.`test_table` (`idtest_table`, `test_field`) VALUES (1, 'test1');
INSERT INTO `test_stackoverflow`.`test_table` (`idtest_table`, `test_field`) VALUES (2, 'test2'); 
```

*   创建 java 项目，添加到类路径、myscl 连接器、池和 dbcp（您只需下载所有这些 jar）

添加下一个课程

```
import org.apache.commons.dbcp.cpdsadapter.DriverAdapterCPDS;
import org.apache.commons.dbcp.datasources.SharedPoolDataSource;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;

/**
 * @author Sergii.Zagriichuk
 */
public class Pool {
    private static DataSource ds;

    static {
        DriverAdapterCPDS cpds = new DriverAdapterCPDS();
        try {
            cpds.setDriver("com.mysql.jdbc.Driver");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        cpds.setUrl("jdbc:mysql://localhost:3306/test_stackoverflow");
        cpds.setUser("root");
        cpds.setPassword("root");

        SharedPoolDataSource tds = new SharedPoolDataSource();
        tds.setConnectionPoolDataSource(cpds);
        tds.setMaxActive(10);
        tds.setMaxWait(50);

        ds = tds;
    }

    public static Connection getConnection() throws SQLException {
        return ds.getConnection();
    }
} 
```

**用户名和密码应更改为您的数据库用户/密码**

```
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class MainClass {
    public static void main(String[] args) {
        Connection connection = null;
        Statement statement = null;
        ResultSet resultSet = null;

        try {
            connection = Pool.getConnection();
            // Do work with connection
            statement = connection.createStatement();
            String selectEmployeesSQL = "select * from test_table";
            resultSet = statement.executeQuery(selectEmployeesSQL);

            while (resultSet.next()) {
                printTestTable(resultSet);
            }
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (resultSet != null) {
                try {
                    resultSet.close();
                } catch (SQLException e) {
                } // nothing we can do
            }
            if (statement != null) {
                try {
                    statement.close();
                } catch (SQLException e) {
                } // nothing we can do
            }
            if (connection != null) {
                try {
                    connection.close();
                } catch (SQLException e) {
                } // nothing we can do
            }
        }
    }

    private static void printTestTable(ResultSet resultSet) throws SQLException {
        System.out.print(resultSet.getInt("idtest_table")+", ");
        System.out.print(resultSet.getString("test_field"));
    }

} 
```

只需运行 main 方法，您就会看到打印到控制台的测试值！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:04:10.167

您可以使用[`DriverAdapterCPDS`](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/cpdsadapter/DriverAdapterCPDS.html). 这将需要添加两个库，[Apache Commons Pool](http://commons.apache.org/pool/)和[Apache Commons DBCP](http://commons.apache.org/dbcp/)。当您使用的驱动程序不包含连接池的实现时，它非常有用。

[您可以在http://massapi.com/class/dr/DriverAdapterCPDS.html](http://massapi.com/class/dr/DriverAdapterCPDS.html)中找到一个示例

# php - 如何使用 SHA1 + PDO + Prepared Statement 成功登录网页？

> ID：10987392
> 
> 赞同：1
> 
> 时间：2012-06-11T20:55:04.517
> 
> 标签：php, login, pdo, prepared-statement, sha1

我现在正在努力弄清楚如何使用 SHA1 + PDO + Prepared Statement 组合并且仍然能够登录到网页:) 所以我的问题是如何做到这一点？这是我的代码：

```
if (!empty($user) && !empty($password))
{
  $password = $this->doHash($user, $password);
  $stmt = $db_login->prepare("SELECT COUNT(*) FROM account WHERE username=:user AND sha_pass=:password");
  $stmt->bindValue(':user', $user, PDO::PARAM_STR);
  $stmt->bindValue(':password', $password, PDO::PARAM_STR);
  $stmt->execute();
  $results_login = $stmt->fetchAll(PDO::FETCH_ASSOC);

  if ($results_login['COUNT(*)'] > 0)      
  { 
    $_SESSION['user_name'] = $results_login['username'];
    $_SESSION['user_id'] = $results_login['id'];                  
    return true;          
  }
  else
  {
    return false;
  }
}
else
{
  return false;
} 
```

我的函数 doHash 如下所示：

```
 public function doHash($user, $password)
  {
    return sha1(strtoupper($user).":".strtoupper($password));
  } 
```

所以我的问题是：`$results_login***`从不处理`SELECT COUNT(*)`版本，`SELECT *`有时处理版本，但并非总是如此。那么我如何将它组合在一起以按预期工作，结果为真，并填充我需要的所有变量？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:06:54.410

您的 SQL 语句只是计数，它没有选择用户名和 id，您需要将其用作您的 SQL 语句，或类似的东西：

```
"SELECT * FROM account WHERE username=:user AND sha_pass=:password" 
```

对于您的密码绑定，以下应该可以正常工作。我也会使用`rowCount`and only `fetch`， not `fetchAll`。试试这个，看看它是否有效。

```
$stmt->bindValue(':password', doHash($user,$password), PDO::PARAM_STR);
$stmt->execute();
if($stmt->rowCount()==1){
    $results_login=$stmt->fetch(PDO::FETCH_ASSOC);
    $_SESSION['user_name'] = $results_login['username'];
    $_SESSION['user_id'] = $results_login['id'];                  
    return true;          
}else{
    return false;
} 
```

# mysql - MySQL查询重新排序字段值？

> ID：10987400
> 
> 赞同：3
> 
> 时间：2012-06-11T20:55:30.663
> 
> 标签：mysql

我有这样的表：

```
===============
| rank | name |
===============
|    3 | john |
|    6 |  bob |
|   10 | alex |
|   11 | brad |
|   12 | matt |
|   34 | luke |
|  145 |  ben |
=============== 
```

（此表是一个示例。实际上，我的表包含约 5000 行数据）。

是否有一个查询来重新排序从 1 开始的排名值，所以它最终是这样的：

```
===============
| rank | name |
===============
|    1 | john |
|    2 |  bob |
|    3 | alex |
|    4 | brad |
|    5 | matt |
|    6 | luke |
|    7 |  ben |
=============== 
```

最好在 1 或 2 个查询中执行此操作，而不是每行 1 个查询，因为我的表有 5000 多行。

**编辑**：对不起，我不清楚。我正在尝试更新数据库中的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:12:30.777

这有点粗糙，但会在紧要关头起作用。

首先正确订购您的桌子，以防万一

`ALTER TABLE tablename ORDER BY rank`

然后删除列

`ALTER TABLE tablename DROP rank`

然后再次添加，自动递增

`ALTER TABLE tablename ADD COLUMN rank INT NOT NULL AUTO_INCREMENT FIRST`

自动增量将按顺序对它们进行编号，而且您不必遍历每一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:35:56.933

这是我为这个问题提出的解决方案：

1.创建一个没有任何键的临时表

```
CREATE TEMPORARY TABLE tempTable (
  id INT(11) NOT NULL
)
COLLATE='latin1_swedish_ci'
ENGINE=MyISAM
ROW_FORMAT=DEFAULT; 
```

2.用原始表中的数据填充临时表，按等级排序

```
INSERT INTO tempTable SELECT id FROM myTable ORDER BY rank; 
```

3.添加自动递增的排名列，给所有行一个唯一的排名，从1开始计数

```
ALTER TABLE tempTable
    ADD COLUMN `rank` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    ADD PRIMARY KEY (`rank`); 
```

4.通过连接到临时表来更新原始表，覆盖原始排名

```
UPDATE myTable 
INNER JOIN tempTable
    ON myTable.id = tempTable.id
SET myTable.rank = tempTable.rank; 
```

5.删除临时表

```
DROP TABLE tempTable; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T17:42:23.703

严格的 MySQL 解决方案的替代方法是使用脚本语言循环遍历行。如果您有一张大桌子，这不是一个好主意，但如果这是一次性修复，则可以接受。

在 PHP 中

```
$db = mysql_connect('localhost', 'user', 'password');
mysql_select_db('database', $db);

$result = mysql_query("SELECT rank
                        FROM myTable
                        ORDER BY rank");

$i = 1;

while ($row = mysql_fetch_assoc($result)) {

    mysql_query("UPDATE myTable
                SET rank = " . $i++ . "
                WHERE rank = " . $row['rank']);
} 
```

请注意，这仅在`rank`唯一且您按顺序遍历时才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-03T18:59:46.847

```
set @a:=(select max(id) from mytable)+1;
update mytable set id=(@a:=@a+1)
order by id;
set @a := 0;
update mytable set id=(@a:=@a+1)
order by id; 
```

简单的方法，为我工作。简单的方法。

# jquery - jquery .on 在其他 .on 通话后无法正常工作

> ID：10987401
> 
> 赞同：0
> 
> 时间：2012-06-11T20:55:43.830
> 
> 标签：jquery, onclick

我有以下 jquery 脚本：

```
$(function(){   
$('#top-menu').on('click', 'a.change-menu', function(e){   
e.preventDefault()   
$("#menu-change-div").load($(this).attr("href"));   

});  
}); 

$(function(){   
$('#menu-change-div').on('click', 'a.change-content', function(e){     
e.preventDefault()   
$("#content").load($(this).attr("href"));     
});  
}); 
```

这是正文中的 HTML：

```
<div id="menu-div">
<div id="top-menu">
<h3 id="top-tabs"><a href="contentColumn.html" class="change-menu">Contents</a></h3>
<h3 id="top-tabs"><a href="indexColumn.html" class="change-menu">Index</a></h3>
<h3 id="top-tabs"><a href="searchColumn.html" class="change-menu">Search</a></h3>
</div>
<div id="menu-change-div">
<ul>
//Lots of nested list items and ul's with #change-content id
</ul>
</div>
</div>

<div id="content">
<div id = "page-content">
//content section
</div>
</div> 
```

第一个功能发生在我单击菜单 div 中的列表项并将 html 文件加载到我的内容 div 中时。

选择其他选项卡时，第二个更改了我的菜单div中的内容。

我可以单击列表项，一切都按预期工作，当我单击选项卡时，它也可以正常工作。如果我首先单击一个列表项，然后单击一个选项卡，然后单击另一个列表项，则会出现我的问题。它不像第一次单击时那样将 html 加载到 div 中，而是跟随 href 并在另一个窗口中打开它。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:00:37.857

尝试：

```
$(function() {
    $('body').on('click', 'a.change-content', function(e) {
        e.preventDefault()
        $("#content").load($(this).attr("href"));
        return false;
    });
    $('body').on('click', 'a.change-menu', function(e) {
        e.preventDefault()
        $("#menu-change-div").load($(this).attr("href"));
    });
});​ 
```

如果元素是动态添加的，那么您需要更改使用 .on() 的方式。

根据[文档](http://api.jquery.com/on/)：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。

另请注意，您可以将两者合二为一`$(function () {...})`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:59:05.300

> 选择其他选项卡时，第二个更改了我的菜单div中的内容。

然后您可能需要将您的第二个`click`事件处理程序委托给将留在 DOM 中的祖先元素。您可以通过将选择器传递给[`on`](http://api.jquery.com/on/)方法来做到这一点：

```
$("#someAncestor").on("click", "a.change-menu", function(e) {
    //Do stuff
}); 
```

这是因为当您更改 引用`a.change-menu`的元素时，绑定事件处理程序的元素不再存在（新元素不会自动获取绑定到它们的事件处理程序）。

通过将事件处理程序委托给 DOM 树的更高层，您可以利用大多数 DOM 事件在树上冒泡的事实，并在祖先元素上侦听该事件。如果事件目标与传递给的选择器匹配`on`，则执行事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:59:31.900

.on() 方法正在侦听已经存在的 DOM 元素。如果添加一些新元素，它们将不会被监听。如果您需要监听这些元素，即使它们是后来添加的（例如使用 .load() ），请使用 .live() 方法。

# java - Unicode 的 URLDecode 导致 mojibake

> ID：10987406
> 
> 赞同：0
> 
> 时间：2012-06-11T20:56:08.637
> 
> 标签：java, android, unicode, utf-8, urldecode

这是 Android 的示例。当我在桌面 Java 中尝试它时，也发生了同样的事情。我如何让它工作？

前缀来自另一个关于在 WebViews 中显示 UTF-8 的问题。

```
public class MainActivity extends Activity
{
    Util util = Util.get(this);

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        WebView w = new WebView(this);
        setContentView(w);
        String prefix = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>";
        String data0 = "%92";
        String data;
        try
        {
            data = URLDecoder.decode(data0, "UTF-8");
        }
        catch (UnsupportedEncodingException e)
        {
            data = e.getLocalizedMessage();
        }
        w.loadData(prefix + data, "text/html; charset=UTF-8", "utf-8");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:49:16.083

# javascript - 显示对应用进行身份验证的朋友用户

> ID：10987408
> 
> 赞同：2
> 
> 时间：2012-06-11T20:56:20.350
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk

我将更深入地了解 Facebook javascript sdk，但我还是新手。我想在我的网站上为每个使用 Facebook 登录的用户显示他们的朋友的照片，他们也授权了该应用程序。使用 PHP SDK 显然很简单，但我只想使用 javascript SDK 来提高我的网站速度。有人有想法吗？

最好的，

纽本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:19:47.537

您可以使用 FQL 查询当前用户的好友 `SELECT id, name FROM user where uid IN (SELECT uid1 FROM friends WHERE uid2=me()) AND is_app_user=1`。这个查询做了两件事。查找所有朋友并仅查找安装了您的应用程序的朋友。

有关其他信息，请参阅：

[http://developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

和

[http://developers.facebook.com/docs/reference/fql/friend/](http://developers.facebook.com/docs/reference/fql/friend/)

# php - 找到匹配项后拆分文本文件

> ID：10987411
> 
> 赞同：0
> 
> 时间：2012-06-11T20:56:28.673
> 
> 标签：php, parsing

我正在尝试搜索字符串匹配然后拆分文件内容。经过一些试验和错误，我希望有人可以提供帮助。在 fgetcsv 之后，搜索字符串变得几乎毫无意义。理想情况下，我想找到每次出现的“约会”，并用逗号分隔内容。

```
if (($handle = fopen('file.csv', "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {

    if(preg_match('/appointments/', $data, $matches, 0))
    {
        $split = preg_split("/,/", $data);
        print_r($split);

    }
}
fclose($handle);
} 
```

打印语句不返回任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:05:15.960

如前所述，该文件包含 ASCII 字符，需要在处理前进行清理。

获取文件并循环后，剥离 ASCII 字符集的内容。

```
$stripAscii = preg_replace('/[^(\x20-\x7F)]*/','',$data);
$datePos = strpos($stripAscii,'Appointment:');
$data = substr($data, $datePos); 
$data = str_replace('Appointment:', ' ', $row2); 
```

现在，返回“约会：”之后的所有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:04:25.223

用逗号分隔内容是什么意思？或者您想在每个“约会”之后添加一个逗号？

而不是`fgetcsv`，使用`fread`和替换“约会”与“约会”，使用`str_replace`

```
$filename = 'file.csv';
$handle = fopen($filename, "r");
$contents = fread($handle, filesize($filename));
fclose($handle);

$contents = str_replace('appointments', 'appointments, ', $contents);
echo $contents; 
```

# windows - 如何编写跨平台安装程序脚本？

> ID：10987419
> 
> 赞同：1
> 
> 时间：2012-06-11T20:56:57.343
> 
> 标签：windows, linux, installation, cross-platform

除了为 Windows 和 Linux 下载不同的程序之外，是否可以使下载成为跨平台脚本/可执行文件，可以从 FTP 服务器下载正确的安装程序并启动它？我应该用什么语言写它？我唯一能想到的就是Java，但我不想花时间去学习它。我不能用 Python 或 BASH 编写它，因为大多数 Windows 机器都没有安装这些。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:23:51.013

跨平台可执行文件（如 exe 或 a.out 或 ELF）是毫无疑问的。当涉及 Windows 时，可执行文件永远不会跨平台。为此，必须引入脚本语言（或 JIT 编译）。我们处于鸡与蛋的悖论中。您可能必须检测下载器正在使用的操作系统，在您的网站页面中使用 Javascript 脚本并决定下一步要做什么等...

虽然不完全是您正在寻找的内容，但以下是一些提示。

对于多平台安装程序，我所知道的最好的工具是[Flexera Software 的 InstallAnywhere](http://www.flexerasoftware.com/products/installanywhere.htm)。这可能有点贵。对于免费选项，我会考虑以下选项：

PERL

PYTHON（但根据您的帖子，这是毫无疑问的，但请查看我帖子的末尾以获取更多 Python 选项）

尽管用上述任何一种语言编写安装程序可能意味着更多的工作，但它们为您提供了无与伦比的灵活性和完全的控制权。

Perl 要求您在 Windows 上安装 Perl 解释器和模块。但这对你来说似乎也不成问题。因此，您可以通过以下方式避免头痛：

[标准杆](http://search.cpan.org/~rschupp/PAR-1.005/lib/PAR.pm)

[pp](http://search.cpan.org/~rschupp/PAR-Packer-1.013/lib/pp.pm)

对于 Python，请通过：

[py2exe](http://www.py2exe.org/)

[安装程序](http://www.pyinstaller.org/)

# java - 将 google appengine datastore.key 与 REST 一起使用时出错

> ID：10987420
> 
> 赞同：0
> 
> 时间：2012-06-11T20:57:02.100
> 
> 标签：java, google-app-engine, rest, jersey, jax-rs

我正在使用 AppEngine Datastore 作为持久层构建一个 REST 应用程序。但是，在解析它们的密钥以创建新条目时，我在资源类中使用 com.google.appengine.api.datastore.Key 时遇到问题。

错误消息如下：严重：缺少方法 public com.acolsolutions.loyaltycard.persistence.entities.Card com.acolsolutions.loyaltycard.resources.CardResource.findByKey(com.google.appengine.api.datastore.Key) at parameter at index 0 SEVERE：方法，公共 com.acolsolutions.loyaltycard.persistence.entities.Card com.acolsolutions.loyaltycard.resources.CardResource.findByKey(com.google.appengine.api.dat astore.Key)，用 GET 资源注释， com.acolsolutions.loyaltycard.resources.CardResource 类，未被识别为有效的资源方法。

似乎问题发生在这里。似乎该值无法转换为 Key 类型：

```
 public Card findByKey(@PathParam("key") Key key) {
    ...
    } 
```

我的 REST 类如下所示： import java.util.List;

```
import javax.ws.rs.Consumes;
import javax.ws.rs.DELETE;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.PUT;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import com.acolsolutions.loyaltycard.dataobjects.CardDAO;
import com.acolsolutions.loyaltycard.persistence.entities.Card;
import com.google.appengine.api.datastore.Key;

@Path("/cards")
public class CardResource {
CardDAO dao = new CardDAO();

@GET
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public List<Card> findAll() {
    System.out.println("findAll");
    return dao.findAll("creationDate desc");
}

@GET
@Path("search/{query}")
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public List<Card> findByName(@PathParam("query") String query) {
    System.out.println("findByName: " + query);
    return dao.findByName(query, "creationDate desc");
}

@GET
@Path("{key}")
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public Card findByKey(@PathParam("key") Key key) {
    //System.out.println("findByKey " + key.toString());
    return dao.findByKey(key);
} 
```

有人能告诉我我必须做什么才能让这个工作吗？

谢谢，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:11:50.793

您可以尝试将参数更改为 String 而不是 Key，然后使用 com.google.appengine.api.datastore.KeyFactory.stringToKey(String stringKey) 获取 Key。

# java - 如何包含打包的 WSDL 以与使用 wsimport 生成的 Java 类一起使用？

> ID：10987424
> 
> 赞同：8
> 
> 时间：2012-06-11T20:57:19.837
> 
> 标签：java, web-services, wsdl, wsimport

我来自 C#，所以我意识到我不能指望 Java 中有很多（很棒的）可用性特性和功能，但是我最近有点投入到这个 Java 项目中，我简直想不通这个出来。在 C# / .NET 中，制作 Web 服务代理类和生成的数据合同是件大事，但出于某种原因，Web 服务的 Java 实现对我来说似乎并不正确。

这是交易...

我使用 wsimport 从 .wsdl 文件创建生成的 .java 文件。例如...

```
"%JAVA_HOME%\bin\wsimport" -quiet -extension -s .\src -d .\bin ".\wsdl\MyWSDL.wsdl" 
```

我注意到这个硬编码（键入那个短语几乎让我刚刚呕吐）“wsdlLocation”作为 wsdl 的当前位置（“C:\Users\ME\etc\wsdl\MyWSDL.wsdl”）。所以我把它拿出来：

```
"%JAVA_HOME%\bin\wsimport" -quiet -extension -s .\src -d .\bin -wsdllocation "NULL" ".\wsdl\MyWSDL.wsdl" 
```

现在，当我实例化生成的服务时......

```
MyService xyz = new MyService(); 
```

我得到一个错误。类似于 "can't find file C:\blahblah\Temp\NULL" 的内容。好的...回到绘图板。在对此进行了一些调查之后，我在 Stack Overflow 上发现了一篇关于使用“classpath:META-INF/WSDL.wsdl”作为 wsdl 位置的帖子。

```
"%JAVA_HOME%\bin\wsimport" ... -wsdllocation "classpath:WSDLs/MyWSDL.wsdl" ".\wsdl\MyWSDL.wsdl"
copy ".\wsdl\*" .\bin\WSDLs
cd bin
"%JAVA_HOME%\bin\jar" cf WebServiceProxies.jar * 
```

错误！

```
"Unknown protocol: classpath" 
```

奇怪的是，Stack Overflow 上的帖子被标记为答案。我想在过去的两年中，可能有相当多的数量已经改变到不再支持“类路径：”的程度，或者有另一种方法可以做到这一点，但我无法弄清楚/找到答案.

好的，所以我有几个需要回答的问题之一（提前谢谢！！！！我要疯了！）。

1.  有没有办法让它在运行时不需要 WSDL？对于它的价值，我认为当我实例化对象时它需要它是 BS。有什么方法可以抑制这个要求？也许如果我使用不同的工具......？

2.  如果此代码无法在运行时不需要 WSDL，我如何让它从包中获取此 WSDL？我在 wsdllocation 参数中添加了什么以使其从 JAR 文件中加载 WSDL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T05:35:03.010

由于需要 wsdl-at-runtime-tragedy 从来没有打扰过我，所以我对 #1 没有答案。也就是说，无论如何，使用*打包*的wsdl 应该是最后的手段。我更喜欢使用已发布的 wsdl 端点。因此，实际的 wsdl 位置将`http(s)://host/name_of_service?wsdl`用于大多数托管框架或`http(s)://host/name_of_service.wsdl`spring-ws。

至于基于 java 的 web 服务客户端编程的复杂性，让我向您展示我的一个基于 maven 的项目的一小段摘录：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.1</version>
<executions>
    <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <configuration>
            <sourceRoot>${project.build.directory}/generated-sources/cxf</sourceRoot>
            <wsdlOptions>
                <wsdlOption>
                    <wsdl>https://XXXXXXXX/ws/loadsave?wsdl</wsdl>
                </wsdlOption>
            </wsdlOptions>
        </configuration>
        <goals>
            <goal>wsdl2java</goal>
        </goals>
    </execution>
</executions> 
```

也许我不是太以 IDE 为中心，但对我来说似乎很简单。Apache CXF 是目前最好的 Web 服务堆栈之一。（尽管对于文档，我使用 Fuse [http://fusesource.com/docs/esb/3.5/fsf_se/JAXWSWSDLFirst.html](http://fusesource.com/docs/esb/3.5/fsf_se/JAXWSWSDLFirst.html)。它基本上是用更好的文档重新命名的 CXF。）

希望能回答你的问题（至少部分）。

*关于 Java 咆哮：除非必须，否则我不使用 MS 工具，但不是因为我讨厌它们。我的工作不知何故将我推向了更大的项目，而且在高端（甚至中端）服务器上看到 .net 支持非常罕见。这只是一个事实，它不会使 java 比 .net 更好。但我很确定如果我必须处理 MS 的东西，我会很快适应它。所以我的建议是：很高兴你的工作让你有机会学习并珍惜它。最后，我们从事这项业务是因为我想我们喜欢学习新事物。*

# ruby-on-rails - 路由到控制器并设置索引

> ID：10987426
> 
> 赞同：0
> 
> 时间：2012-06-11T20:57:29.733
> 
> 标签：ruby-on-rails

我在我的 routes.rb 文件中执行以下操作：

```
match '/projects/:project_id/research/worksheet/:action' => 'worksheets/research' 
```

然而，这条路线不匹配的是 /projects/whatever/research/worksheet => worksheets/research#index。我被迫添加另一行：

```
match '/projects/:project_id/research/worksheet' => 'worksheets/research#index' 
```

有没有更好的方法来实现这一点？

# c# - 使用 Webclient 发布/选择多选的所有选项值

> ID：10987429
> 
> 赞同：1
> 
> 时间：2012-06-11T20:57:49.497
> 
> 标签：c#, webclient

我正在尝试编写一个应用程序来自动化路由器配置。不幸的是，对于我们使用的路由器，telnet 不是一个选项。

所以我不得不使用 C# WebClient 类与 Cisco Web 界面进行交互。

到目前为止，我已经能够使用 NameValueCollection 和 WebClient.UploadValues 设置我需要的一切。

我会获取表单上的所有输入元素，然后只需上传与表单上输入类型对应的名称值 Collection，将每个元素的值设置为所需的设置。

但是现在我遇到了一个问题。

对于其中一种形式，它使用多选控件来处理输入数据数组，而不是输入类型。

我完全不知道如何设置它。

多选的html如下

```
<select multiple class="MultiSelect" name="PortRangeList" size="12" onChange="showList(this.form.PortRangeList);" style="width: 100%">
    <option value="All Traffic{[(*-*-*)]}1;0;1;65535;0}">All Traffic [TCP&UDP/1~65535]</option>
    <option value="DNS{[(*-*-*)]}2;17;53;53;0}">DNS [UDP/53~53]</option>
    <option value="FTP{[(*-*-*)]}3;6;21;21;0}">FTP [TCP/21~21]</option>
    ...
</select> 
```

当我使用输入类型时，我只需执行以下操作

```
NameValueCollection formNetworkData = new NameValueCollection();
formNetworkData["ipAddr"] = "192.168.1.2";
formNetworkData["lanMask"] = "255.255.255.0";
downloadedData = _routerWebClient.UploadValues(_routerIP + NETWORK, formNetworkData); 
```

但是看看这个新表单的代码，它在提交之前就出现了，它选择了多选中的所有选项。

我意识到我可能没有很好地提出这个问题，但我们将不胜感激任何帮助。

* * *

使用 Chrome 调试器 PortRangeList 正是您所说的。

有5种输入类型

submitStatus, upnpOpen (等等...)

对于那些我的代码看起来像这样

```
NameValueCollection formData = new NameValueCollection();
formData["submitStatus"]="1";
formData["upnpOpen"]="0";
downloadedData = _routerWebClient.UploadValues(SERVICE0, formData); 
```

但是为了提交 PortRangeList 数据，我不能使用 NameValueCollection，因为它不允许名称具有多个值。

怎么能提交呢？

WebClient.UploadData、WebClient.UploadFile 或 WebClient.UploadString 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:06:31.897

您必须通过多次传递“PortRangeList”参数来传递所选选项，每个选项一次：

```
PortRangeList=All Traffic{[(*-*-*)]}1;0;1;65535;0}&PortRangeList=DNS{[(*-*-*)]}2;17;53;53;0}&PortRangeList=FTP{[(*-*-*)]}3;6;21;21;0} 
```

浏览器就是这样做的。由于您使用的是 WebClient，请尝试以下操作：

```
PortRangeList=All Traffic{[(*-*-*)]}1;0;1;65535;0},DNS{[(*-*-*)]}2;17;53;53;0},FTP{[(*-*-*)]}3;6;21;21;0} 
```

显然，一切都必须正确地进行 URL 转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:47:48.283

以为我会发布最终答案。

最后，我使用了此处显示的确切解决方案。 [http://anhonga.wordpress.com/2010/05/06/using-webclient-with-uploadvalues-and-uploadstring-to-simulate-post/](http://anhonga.wordpress.com/2010/05/06/using-webclient-with-uploadvalues-and-uploadstring-to-simulate-post/)

这是他的代码，但我基本上做了同样的事情（不使用全局变量）

```
StringBuilder _strBld = new StringBuilder();
int _intItemCount = 0;

protected void btnSubmit_Click(object sender, EventArgs e)
{
    System.Net.WebClient myWebClient = new System.Net.WebClient();
    myWebClient.Headers.Add("Charset", "text/html; charset=UTF-8");
    myWebClient.Headers.Add("Content-Type", "application/x-www-form-urlencoded"); // ◄  This line is essential

// Perform server-side validations (same as before)
if (this.F_Name.Text.Length == 0 || this.L_Name.Text.Length == 0)
{ AppendError("First and Last name must be provided"); }
…

// Add the user-provided name values
AppendUploadString("last_name", this.L_Name.Text);
AppendUploadString ("first_name", this.F_Name.Text);
AppendUploadString ("address", this.Address.Text);

// Add the Toppings
foreach (ListItem item in this.ToppingsChkBoxList.Items)
{
if (item.Selected)
    {
        AppendUploadString("Toppings", item.Value.ToString());
    }
}

myWebClient.UploadString("https http://www.Destination.com/...?encoding=UTF-8", "POST", _strBld.ToString());
}

private void AppendUploadString(string strName, string strValue)

{
    _intItemCount++;
    _strBld.Append((intItemCount == 1 ? "" : "&") + strName + "=" + System.Web.HttpUtility.UrlEncode(strValue));
    // Update: Use UrlEncode to ensure that the special characters are included in the submission
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:06:14.953

使用[Fiddler](http://www.fiddler2.com/fiddler2/)或[Wireshark](http://www.wireshark.org/)来比较网络上的内容（“正常”浏览器）和不工作时（您的代码）...一旦您知道差异，您就可以相应地更改您的代码...

# sql - 如何将sql查询结果存储在变量和messegeBox中

> ID：10987430
> 
> 赞同：2
> 
> 时间：2012-06-11T20:57:55.100
> 
> 标签：sql, ssis

![在此处输入图像描述](../Images/942da84706ea110b6d16d9fccca7b815.png)

我在 ssis 包中的 Execute sql 任务中有一个简单的 sql 查询，SELECT MAX(binindex) FROM dbo.myTable

我需要将此最大索引存储到一个变量中，然后将其传递给脚本任务并显示它，我已经声明了一个包变量，包编译，但是每次都显示-1，我不知道我在做什么错了，任何帮助将不胜感激！

![在此处输入图像描述](../Images/9164ec1cb8918aaa295736834f66e7d3.png)

```
public void Main(){
    //TODO: Add your code here
    Dts.TaskResult = (int)ScriptResults.Success;
    MessageBox.Show(Dts.Variables["User::BININDEX"].Value.ToString());
} 
```

![在此处输入图像描述](../Images/053d0733e6d361d4752636fb5f1c1095.png)

![在此处输入图像描述](../Images/407a438d4a4aa56c729db5ffdada261a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:07:27.343

好消息是，据我所知，您所做的一切都是正确的。我重新创建了您的包，并从查询中获得了预期值。

![基本包](../Images/3b71c745a4e8e8823f6f7249f17b1992.png)

我也可以推断出你的情况——从我的查询中返回了正确的值，但我的包产生了“不正确的结果”。

![负一](../Images/6e1008593c3a1f7572fa8e8e159914f9.png)

我希望，问题在于您在不同的范围内定义了两个 BININDEX 变量。我最初的假设是包范围的一个包含一个值 -1 并且您有一个范围为同名的“执行 SQL 任务”的变量。默认行为是创建一个范围为当前具有焦点的对象的变量。顺便说一句，这在 SQL Server 2012 版本中发生了变化。

由于您的图片显示包作用域变量的设计时值为 123，因此您也有可能在脚本任务上定义了同名 BININDEX 的变量。局部变量将覆盖全局范围的变量

![变量窗口](../Images/8c9778c989835ab6213741a1882c2264.png)

单击您的脚本任务，希望您会看到像上面那样定义的 BININDEX。否则，我认为问题出在你的包中，你有冲突的 BININDEX 变量。您可以尝试通过包资源管理器查找一个实例，其中列出了两个具有相同名称的变量。

![包浏览器](../Images/0723a3c927848999678ec90aa33c8595.png)

我需要离开，但如果不是这种情况，请在执行 SQL 任务上添加一个 PostExecute 断点并查看您的本地窗口（不是变量，因为它只反映设计时值）。展开变量，您应该能够看到 BININDEX 的值。那里正确吗？

![在此处输入图像描述](../Images/b3d8eef7c5097afa96c92f1c9d8b1f75.png)

# ruby-on-rails - 带有 Devise 和 rspec 的 Rails 3：Warden 测试助手不可靠

> ID：10987431
> 
> 赞同：7
> 
> 时间：2012-06-11T20:58:13.940
> 
> 标签：ruby-on-rails, ruby, rspec, devise, warden

我有一个使用 rails 3.2 和 Devise 的应用程序。我有一个使用 rspec 和 Capybara 的请求测试套件。

我试图在我的登录助手中使用 Warden 测试助手，而不是让 Capybara 填写登录表格并提交。由于我的测试套件的大小和复杂性，这会在我的测试运行时节省超过一分半钟。

在我的配置中是：

```
RSpec.configure do |config|
  config.include Warden::Test::Helpers, :type => :request
  config.after :each do
    Warden.test_reset!
  end
end 
```

在上下文中：

```
let!(:current_user) { FactoryGirl.create(:user) }

background do
  login_as(current_user, :scope => :user)
end 
```

但是，当使用这些配置运行测试套件时，几乎每个测试运行都有一个不同的随机失败请求规范，因为页面呈现为好像用户没有登录一样。（具体来说，由`user_signed_in?`条件控制的链接）

我的问题：有没有其他人遇到过这样的不可靠性，如何缓解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:06:03.887

最简单的事情就是在你的`before :each`块中使用 sign_in 表单。您需要控制器规范中的测试助手，因为它与设计隔离。您在集成测试中没有这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T16:11:42.003

虽然是一篇旧帖子，但我在 Rails 4.1 和 Warden 1.2.3 上也遇到了这个问题。我注意到有一个更新版本的 Warden 用于测试助手的工作。有人用新版本成功吗？

顺便说一句，我观察到的行为是 Warden 并不总是通过 login_as 帮助程序成功登录。这导致我的应用程序发现自己在登录页面上，而不是它认为应该在的地方。

# javascript - jQuery ui 幻灯片无法正常工作

> ID：10987432
> 
> 赞同：0
> 
> 时间：2012-06-11T20:58:29.123
> 
> 标签：javascript, jquery, html, jquery-ui, slideshow

所以我用 jquery 和 jquery ui 创建了一个简单的幻灯片。当我将html拖到chrome中时效果很好，但是当我将文件上传到我的服务器时，效果不起作用。您可以在 -guyzyl.org- （其主页）上查看该网站，或者仅查看 html 文件（与网站上的相同 - https://www.dropbox.com/s/0q3tnshbvmxu9ax/index .html- 任何帮助表示赞赏，并在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:09:33.897

你错过了所有这些 js ..（在控制台错误中的萤火虫中看到）

```
"NetworkError: 403 Forbidden - http://jqueryui.com/latest/ui/jquery.effects.core.js"
jquery...core.js
"NetworkError: 403 Forbidden - http://jqueryui.com/latest/ui/jquery.effects.slide.js"
jquery...lide.js
error: "NetworkError: 403 Forbidden - http://jqueryui.com/latest/ui/jquery.effects.slide.js" 
```

还 。我建议你从谷歌 CDN 阅读（这个 jquery ui 包含所有效果文件）

```
 https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js 
```

在保留它的本地副本的同时，以防万一它无法从 google cdn 获取它，它可以在本地路径中查找。（如您的情况并且不会破坏您的网站）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:16:03.887

代码本身没有问题：http: [//jsfiddle.net/ya8Yu/](http://jsfiddle.net/ya8Yu/)是您所有的代码都在工作。

您需要按照 Fidrizers 的建议正确设置包含的文件。

另外，将来设置一个jsfiddle，这样我们就不必到处跑来收集你所有的代码并设置一个环境来测试。

# adobe-indesign - 如何使用 ExtendScript 在 InDesign 文档中以编程方式检测某些文本是否可见或溢出？

> ID：10987440
> 
> 赞同：1
> 
> 时间：2012-06-11T20:59:10.243
> 
> 标签：adobe-indesign, extendscript

我正在使用 ExtendScript 构建一个 InDesign 面板，它可以查找文本并将其显示给用户。为此，我使用[Character 对象](http://jongware.mit.edu/idcs6js/pc_Character.html#showText)`showText()`的方法。问题是有时我正在寻找的文本不会出现，因为即使该方法确实在正确的位置显示了正确的页面，但文本已经溢出并且不可见。

有没有办法检查文本是否可见？理想情况下，如果无法按原样查看文本，我希望能够依靠故事编辑器......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:57:48.480

要检查单个字符的情况，请参阅 parentTextFrames 属性，它返回一个包含 0 或 1 帧的数组。在极少数情况下，左侧在一个帧中而右侧在以下帧中的插入点，您会得到两帧。

```
app.selection[0].characters.item(0).parentTextFrames.length 
```

您还可以将角色的索引与故事的最后一个文本容器中的最后一个索引进行比较，例如

```
app.selection[0].parentStory.textContainers.pop().characters.lastItem().index 
```

当然你应该先看看有没有溢出...

```
app.selection[0].parentStory.overflows 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:17:47.990

您可以在 try/catch 语句中调用文本的基线属性。如果文本可见，基线将返回一个值，否则将引发错误。

洛伊克

# python - Redis，只允许对现有键进行操作

> ID：10987441
> 
> 赞同：4
> 
> 时间：2012-06-11T20:59:11.307
> 
> 标签：python, redis, atomic

我正在使用python包（redis-py）来操作redis数据库。我有一堆客户端在 redis 中设置哈希的键和值。我希望他们仅在散列存在时设置键和值。如果散列不存在，设置键和值将创建散列，这不是我想要做的。

在 redis-py 页面（https://github.com/andymccurdy/redis-py）中，作者提出了一种在客户端进行原子操作的方法。所以我写了一个类似的函数：

```
 with r.pipeline() as pipe:
        while True:
            try:
                pipe.watch("a_hash")
                if pipe.exists("a_hash"):
                    pipe.hset("a_hash", "key", "value")                  
                break
            except redis.WatchError:
                continue
            finally:
                pipe.reset() 
```

但是，这似乎不起作用。在我从另一个客户端删除哈希后，这个哈希仍然是由这段代码创建的，所以我猜这段代码不是原子操作。有人可以帮我确定这段代码有什么问题吗？还是有更好的方法来达到这个目的？

感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:21:25.797

我建议阅读[Redis 文档](http://redis.io/topics/transactions)中解释的 WATCH/MULTI/EXEC 块的定义。

在这样的块中，只有 MULTI 和 EXEC 之间的命令实际上是原子处理的（并且有条件地，根据手表具有全有或全无语义）。

在您的示例中， EXISTS 和 HSET 命令不是原子执行的。实际上，您不需要这种原子性：您想要的是条件执行。

这应该会更好：

```
with r.pipeline() as pipe:
    while True:
        try:
            pipe.watch("a_hash")
            if pipe.exists("a_hash"):
                pipe.multi()
                pipe.hset("a_hash", "key", "value")
                pipe.execute()
            break
        except redis.WatchError:
            continue
        finally:
            pipe.reset() 
```

如果密钥在 EXISTS 之后但在 MULTI 之前被删除，HSET 将不会被执行，这要归功于手表。

使用 Redis 2.6，[Lua 服务器端脚本](http://redis.io/commands/eval)可能更容易编写，也更高效。

# php - 定义一个没有可见性的类方法是“公共”的简写吗？

> ID：10987443
> 
> 赞同：6
> 
> 时间：2012-06-11T20:59:16.160
> 
> 标签：php, visibility

我经常看到没有可见性关键字定义的函数的代码。例如：

```
class Foo() {
  function bar() {
    // ...
  }
} 
```

它是功能的简写`public`吗？省略它是一个好习惯吗？

```
class Foo() {
  public function bar() {
    //..
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T21:10:39.297

是的你是对的; 当您省略可见性修饰符时，它意味着它是`public`.

这是不支持可见性运算符的 PHP 4 的保留。包含此功能是为了向后兼容。

[你可以在这里](http://php.net/manual/en/language.oop5.visibility.php)阅读更多关于它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:03:38.860

正如[PHP Doc](http://www.php.net/manual/en/language.oop5.visibility.php)中所写，

> 没有任何显式可见性关键字声明的方法被定义为公共的。

所以，是的，在

```
class Foo() { public function bar() { //.. } } 
```

`Foo::bar()`是公开的，但省略可见性关键字绝不是一个好习惯。如果它是一个又快又丑的脚本，为什么不呢，但在其他情况下，你应该指定它。

# node.js - 如何在 node.js 中使用全局变量？

> ID：10987444
> 
> 赞同：94
> 
> 时间：2012-06-11T20:59:17.603
> 
> 标签：node.js

例如我想使用自定义记录器：

```
logger = require('basic-logger'),
logger.setLevel('info')

var customConfig = {
showMillis: true,
showTimestamp: true
}

var log = new logger(customConfig) 
```

如何在其他模块中使用此记录器而不是 console.log ？

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-06-11T21:07:48.340

大多数人建议不要使用全局变量。如果您想在不同的模块中使用相同的记录器类，您可以这样做

logger.js

```
 module.exports = new logger(customConfig); 
```

foob​​ar.js

```
 var logger = require('./logger');
  logger('barfoo'); 
```

如果你确实想要一个全局变量，你可以这样做：

```
global.logger = new logger(customConfig); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-06-21T05:38:41.020

```
global.myNumber; //Delclaration of the global variable - undefined
global.myNumber = 5; //Global variable initialized to value 5\. 
var myNumberSquared = global.myNumber * global.myNumber; //Using the global variable. 
```

在全局变量方面，Node.js 与客户端 JavaScript 不同。仅仅因为您在 Node.js 脚本的顶部使用单词 var 并不意味着您需要的所有对象都可以访问该变量，例如您的 'basic-logger' 。

要使某些东西成为全局的，只需在变量名称前加上单词 global 和一个点。因此，如果我希望 company_id 是全球性的，我将其称为 global.company_id。但要小心，global.company_id 和 company_id 是同一个东西，所以不要将全局变量命名为与任何其他脚本中的任何其他变量相同的东西 - 将在您的服务器上运行的任何其他脚本或同一代码中的任何其他位置.

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-08-03T06:26:59.950

您可以使用 global 或 GLOBAL 来定义它，nodejs 两者都支持。

例如

```
global.underscore = require("underscore"); 
```

或者

```
GLOBAL.underscore = require("underscore"); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-07-14T15:42:58.027

我建议每次使用全局检查时是否已经通过简单检查定义了变量

```
if (!global.logger){
  global.logger = require('my_logger');
} 
```

我发现它有更好的性能

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-12-30T08:09:44.327

**如果使用得当**，全局变量可以在 Node 中使用。

Node中全局变量的声明：

```
a = 10;
GLOBAL.a = 10;
global.a = 10; 
```

上述所有命令都具有不同语法的相同操作。

**不打算更改时使用全局变量**

这是使用全局变量时可能发生的事情的示例：

```
// app.js
a = 10; // no var or let or const means global

// users.js
app.get("/users", (req, res, next) => {
   res.send(a); // 10;
});

// permissions.js
app.get("/permissions", (req, res, next) => {
   a = 11; // notice that there is no previous declaration of a in the permissions.js, means we looking for the global instance of a.
   res.send(a); // 11;
}); 
```

**解释：**

先运行用户路由，接收10；

然后运行权限路由，收到11；

然后再次运行用户路由并接收 11 而不是 10；

**全局变量可以被超越！**

现在考虑将 express 和 assignin res 对象用作全局对象。最终导致异步错误变得损坏并且服务器已关闭。

**何时使用全局变量？**

正如我所说 - 当 var 不打算改变时。无论如何，更建议您使用`process.env`配置文件中的对象。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-07-22T11:46:09.197

可能以下是更好地避免`if`声明：

```
global.logger || (global.logger = require('my_logger')); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-07-09T12:09:56.933

如果您的应用程序是用 TypeScript 编写的，请尝试

```
(global as any).logger = // ... 
```

或者

```
Object.assign(global, { logger: // ... }) 
```

但是，我只会在 React Native 的`__DEV__`测试环境中这样做。

# jpa - 为什么没有 EntityManager.persist 需要一个集合？

> ID：10987445
> 
> 赞同：0
> 
> 时间：2012-06-11T20:59:18.640
> 
> 标签：jpa

我知道它的实现可能是一个简单的 for 循环，但为什么没有 EntityManager.persist 方法来获取一个集合并持久化集合中的所有实体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:06:39.330

一个原因是很难知道哪些实体会导致persist() 可能引发的异常。另一个原因是不需要使用 API 用户可以轻松实现的快捷方法来使 API 混乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T13:50:14.930

我同意 JPA 应该定义一个。请通过电子邮件向 JPA 规范委员会发送请求。合并/删除/等也应该收集。

实际上，没有什么可以阻止提供者接受集合，因为方法采用对象，也许请求您的提供者允许集合。

# javascript - 像 9gag.com 一样在屏幕上滚动多个侧边栏 div

> ID：10987447
> 
> 赞同：2
> 
> 时间：2012-06-11T20:59:21.900
> 
> 标签：javascript, jquery, css, jquery-plugins

堆，

基本上，我想要一个主页，其中包含多个堆叠在一起的帖子，例如 techcrunch 或基本上任何博客。对于每个帖子，我希望有一个侧边栏框，当您滚动时，它会在帖子旁边的页面下方浮动，以便用户可以通过类似 facebook 的按钮或其他任何方式轻松分享帖子，而无需滚动回顶部帖子。

当人员到达每个帖子的底部时，侧边栏停止在屏幕上向下浮动，当人员继续滚动到下一个帖子时，下一个帖子的侧边栏开始向下浮动，依此类推。

一个完美的例子是 9gag.com 主页。注意帖子标题、收藏按钮和社交按钮如何浮动在每个帖子/图片旁边。

我正在尝试使用 jquery 的 scrolltofixed 插件来完成此操作，但我被卡住了。我可以让侧边栏 div 开始正确地向下滚动页面，但是当您到达每个帖子的底部时，我无法让它们停止滚动，因此它们只是开始相互重叠。

通常，您会使用内置于 scrolltofixed 的“limit”属性来阻止它们滚动，如下所示：

```
$('.class-of-sidebar-box-div').scrollToFixed({
limit: 3000
}); 
```

一旦您向下滚动 3000 像素，这将阻止侧边栏框随屏幕滚动。

我试图做的是动态设置每个随附帖子的高度限制 + 随附帖子的顶部偏移量 - 侧边栏框的高度，以便在每个侧边栏框到达底部时停止滚动随附的帖子。

示例代码：

```
$('.class-of-sidebar-box-div').scrollToFixed({
limit: function(){
    var postoffset = $(this).siblings('.accompanying-post-class').offset().top;
    var postheight = $(this).siblings('.accompanying-post-class').height();
    var sidbardivheight = $(this).height();
    var scrolllimit = postoffset + postheight - sidbardivheight ;
    return scrolllimit;
    }
}); 
```

这是失败的。侧边栏框开始正确浮动，但未正确设置“限制”。

有什么想法我哪里出错了吗？

更新：修复了 Brilliand 建议的示例代码。但是，仍然没有设置限制。此外，我尝试了一个更简单的功能，如下所示，即使它不起作用。

也失败的更简单的例子：

```
$('.class-of-sidebar-box-div').scrollToFixed({
limit: function(){
    var scrolllimit = 1000;
    return scrolllimit;
    }
}); 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:37:31.883

请看一下这个小提琴：http: [//jsfiddle.net/y3qV5/760/](http://jsfiddle.net/y3qV5/760/)。

它使用你上面提到的 scrolltofixed 插件：[https ://github.com/bigspotteddog/ScrollToFixed](https://github.com/bigspotteddog/ScrollToFixed)

不幸的是，limit 选项此时没有发挥作用。好主意，下一个版本应该有。

**编辑：插件的最新版本现在支持“限制”作为函数和值。**

为了获得与您上面描述的类似的效果，我所做的是将限制设置为下一节的 offset().top 减去侧边栏高度加上一些填充，就像您上面描述的那样。知道 limit 选项将不接受函数将有助于混淆：

```
$(document).ready(function() {
    $('#cart1').scrollToFixed({
        marginTop: 10,
        limit: $('#p2').offset().top - $('#cart1').height() - 10
    });
    $('#cart2').scrollToFixed({
        marginTop: 10,
        limit: $('#p3').offset().top - $('#cart2').height()
    });
}); 
```

而且，正如您在下面的评论中提到的那样，这是一种遍历购物车以将它们设置在各自的 div 旁边的方法：

```
$(document).ready(function() {
    for (i = 1; i <= $('.cart').length; i++) {
        $('#cart' + i).scrollToFixed({
            marginTop: 10,
            limit: $('#p' + (i + 1)).offset().top - $('#cart' + i).height() - 10
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:20:10.923

`.scrollTop()`是错误的功能 - 它会随着用户向下滚动而增加，从而防止实际达到限制。查看 scrollToTop 文档，我认为您想要的是`$(this).siblings('.accompanying-post-class').offset().top`.

# handlebars.js - Handlebars.js - {{#each data}} 嵌套在 {{#if data}}

> ID：10987452
> 
> 赞同：3
> 
> 时间：2012-06-11T20:59:47.120
> 
> 标签：handlebars.js

我希望能够使用 Handlebars.js 在下面做。这可能吗？

```
{{#if data}}

   {{#each data}}
     do something here
   {{/each}}

{{/else}

   No data, sorry!

{/if} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T17:09:20.580

当然，在这里查看：http: [//jsfiddle.net/PXQUA/](http://jsfiddle.net/PXQUA/)

而且您的模板中几乎没有错别字：

```
{{#if data}}
  {{#each data}}
    {{this}}
  {{/each}}
{{else}}
  No data, sorry!
{{/if}} 
```

# http - 如何使用 Chrome 的网络调试器进行重定向

> ID：10987453
> 
> 赞同：431
> 
> 时间：2012-06-11T20:59:55.390
> 
> 标签：http, google-chrome, google-chrome-devtools

Chrome 网络调试器让我可以很好地查看为页面加载的所有 HTTP 资源。但每当加载新的顶级 HTML 页面时，它就会清除列表。这使得调试由于某种原因自动重新加载的页面（运行脚本或 300 个响应）变得非常困难。

我可以告诉 Chrome 在加载新的顶级页面时不要清除网络调试器吗？或者我可以回去看看上一页的网络资源吗？

或者，当我无法控制正在尝试调试的页面时，我是否可以强制 Chrome 在加载新页面之前暂停？这是 OpenID 舞蹈的一部分，但会出错，因此 SSL 和凭据的组合使得使用命令行工具进行调试变得极其困难。

* * *

## 回答 #1

> 赞同：606
> 
> 时间：2012-09-05T13:30:20.137

*这自 v32 以来已更改，感谢 @Daniel Alexiuc 和 @Thanatos 的评论。*

* * *

**当前**（≥ v32）

在 DevTools 的“网络”选项卡顶部，有一个复选框可以打开“保留日志”功能。如果选中，网络日志会在页面加载时保留。

![Chrome v33 DevTools 网络选项卡：保留日志](../Images/8224279bd650a5df30c3bfc83d9e07a5.png)

左侧的小红点现在具有完全打开和关闭网络登录的目的。

* * *

**旧版本**

在旧版本的 Chrome（此处为 v21）中，“网络”选项卡的页脚中有一个可点击的小红点。

![Chrome v22 DevTools 网络选项卡：在导航时保留日志](../Images/6f708c8754fe203bba3454f5696f6ee1.png)

如果您将鼠标悬停在它上面，它会告诉您，当它被激活时，它将“保留导航时的日志”。它信守诺言。

* * *

## 回答 #2

> 赞同：206
> 
> 时间：2012-08-14T05:09:05.967

我不知道强制 Chrome 不清除网络调试器的方法，但这可能会完成您正在寻找的内容：

1.  打开js控制台
2.  `window.addEventListener("beforeunload", function() { debugger; }, false)`

这将在加载新页面之前通过点击断点暂停 chrome。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2018-07-12T03:11:34.460

在重定向到其他页面之前调试网络调用的另一个很好的解决方案是选择`beforeunload`事件断点

这样，您可以确保在将流重定向到另一个页面之前立即中断流，这样所有网络调用、网络数据和控制台日志仍然存在。

**当您想要检查呼叫的响应时，此解决方案是最佳选择**

[![Chrome beforeunload 事件断点](../Images/00b599d547e7911d62ccf5b34e2e1ad7.png)](https://i.stack.imgur.com/OxHxo.png)

PS：如果您想在特定呼叫或任何呼叫 **之前**停止，您也可以使用 XHR 断点（参见图片示例）[![XHR 断点](../Images/431fd8da6e60f63af68d68fd4251750d.png)](https://i.stack.imgur.com/CNGXB.png)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-07-19T16:27:24.563

只需更新@bfncs 答案

我认为在 Chrome 43 左右，行为发生了一些变化。您仍然需要启用 Preserve log 才能查看，但现在重定向显示在 Other 选项卡下，当加载的文档显示在 Doc 下时。

这总是让我感到困惑，因为我有很多网络请求并按 XHR、Doc、JS 等类型对其进行过滤。但是如果重定向，Doc 选项卡是空的，所以我不得不猜测。

# objective-c - 如何在 TabBar 控制器的 UIVIew 中显示 Kal 的日历？

> ID：10987454
> 
> 赞同：0
> 
> 时间：2012-06-11T20:59:59.613
> 
> 标签：objective-c, xcode4

我正在使用 XCode 4 和 Storyboards 创建一个 iPad 应用程序。我有一个带有两个 UIView 的 TabBar 控制器。我在工作区中有我的 iPad 应用程序和 Kal。我正在尝试复制一些 Kal 示例代码以显示日历。这是我复制的内容（改动很小）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions  {

//  initialization...
KalViewController *kal = [[KalViewController alloc] init];
kal.title = @"Saori";

//  configuration
kal.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Today" style:UIBarButtonItemStyleBordered target:self action:@selector(showAndSelectToday)];
kal.delegate = self;
EventKitDataSource *dataSource = [[EventKitDataSource alloc] init];
kal.dataSource = dataSource;

// Setup the navigation stack and display it.
navController = [[UINavigationController alloc] initWithRootViewController:kal];
[window addSubview:navController.view];
[window makeKeyAndVisible];

return YES; 
```

}

在最后 3 行（设置导航堆栈并显示它）我收到诸如未声明的“navController”和“窗口”之类的错误。我不相信这 3 行属于这个应用程序，因为我有 TabBar 控制器，但我不知道用什么替换它们来显示日历。

如何获取现有代码并在 TabBar 控制器的 UIView 中显示 Kal 日历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:17:49.567

你是对的，你不需要底部的 3 行，但实际上，你不需要这些行中的任何一行。如果您使用 StoryBoards，您应该能够完全从那里设置您的视图堆栈。您唯一需要做的就是将 EventKit 数据源添加到 Kal 视图控制器，但您可以从`[KalViewController viewDidLoad:]`. 您的视图堆栈应如下所示：

窗口 -> 选项卡栏控制器 -> 导航栏控制器 -> 根视图控制器

因此，通过将 Nav Bar 视图控制器直接添加到窗口中，您将完全跳过 Tab bar 控制器。

# asp.net - 使用 asp.net 中的 web api 通过 http 进行身份验证

> ID：10987455
> 
> 赞同：5
> 
> 时间：2012-06-11T21:00:08.147
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我已经观看并查看了很多关于保护 asp.net web api 的页面 - 包括：[http ://weblogs.asp.net/jgalloway/archive/2012/03/23/asp-net-web-api-screencast-series -part-6-authorization.aspx](http://weblogs.asp.net/jgalloway/archive/2012/03/23/asp-net-web-api-screencast-series-part-6-authorization.aspx)和[http://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the-right-way .aspx](http://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the-right-way.aspx) - 但是，我还没有看到 KISS 类型的示例。

例如，如果我有一个 web api，它返回一个汽车列表 - 我正在与想要查询（获取）和插入（发布）列表的第 3 方（即不是我自己的网站或服务器/域）合作将汽车按类型放入我的数据库中，我如何对它们进行身份验证（通过 https）？

他们是否只是简单地添加（到他们的 JSON GET/Post 中）类似：

```
[
{"username":"someusername","password":"somepassword",
{
"carTypeID":12345,
"carTypeID":9876}
"carTypeID":2468}
}
}
] 
```

然后我可以获取用户名和密码，并在 .net 中检查我的会员数据库，然后“IfUserAuthenticated”继续处理 JSON 的其余部分？

或者有没有更好的方法来做到这一点？我听说过在标题等中添加细节 - 但我不确定这是出于某种原因，还是过于复杂化。我还听说过设置发送回第 3 方的令牌 - 如果这是最好的方法，我应该给他们什么指示来构建他们将使用我的 API 的应用程序？

感谢您的任何建议/指点，

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:10:19.060

如果您想保持简单，您可以使用基本身份验证。通过 SSL，它非常安全。它只涉及向请求添加标头：

```
Authorization: Basic <username:password encoded as base64> 
```

[您可以在此处](http://sixgun.wordpress.com/2012/02/29/asp-net-web-api-basic-authentication/)找到实现它的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T09:09:22.180

您可以将 HTTP 基本身份验证与 SSL 一起使用。使用消息处理程序实现它非常简单，并且在许多平台上都支持开箱即用。有关示例，请参见我的博客（与您选择的会员提供商集成非常容易）

[http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T21:54:13.503

我为 Web API 编写了类似的东西：
[http ://remy.supertext.ch/2012/04/basic-http-authorization-for-web-api-in-mvc-4-beta/](http://remy.supertext.ch/2012/04/basic-http-authorization-for-web-api-in-mvc-4-beta/)

它现在在一些地方使用，我们从生产大约 2 个月以来就一直在使用它。似乎工作正常。

# url-rewriting - 使用位置、重写和别名使用 Nginx 重写特定 URL

> ID：10987456
> 
> 赞同：1
> 
> 时间：2012-06-11T21:00:08.950
> 
> 标签：url-rewriting, nginx, location

我是 Nginx 的初学者，我有一个关于特定 URL 重写的问题。

我希望“http://myserver.fr/context/[xxxxxxxxxxx]/synchronize.php”重定向到 /space/www/synchronize.php

我想要另一个 URL 类型“http://myserver.php/context/[xxxxxxxx]”重定向到 /space/www/index.php

所以我认为正确的 conf Nginx 是：

```
 location /context/ {
            alias /space/www/;
            rewrite ^(.*).synchronize.php /synchronize.php last;
            rewrite ^/(.*)$ /index.php last;
     } 
```

由于我是 Nginx 的初学者，你能告诉我我的想法是否合乎逻辑吗？非常感谢。

# html - 排除单个浏览器使用 CSS 类

> ID：10987459
> 
> 赞同：4
> 
> 时间：2012-06-11T21:00:14.373
> 
> 标签：html, css, internet-explorer

我想排除 Internet Explorer 使用特定的 CSS 类。这可能吗？

细节：

我有一个看起来像的 CSS 类 -

```
input[type="radio"]:checked, input[type="radio"]:hover
{
   box-shadow: 0px 0px 10px #90BBD4;
} 
```

由于 Firefox 的最新浏览器更新删除了 -moz-box-shadow 属性，并且我相信它现在使用默认的 box-shadow 代替，......我的 Firefox 仍然运行良好，但 Internet Explorer 现在识别它并弄乱了外观。

我该如何排除 IE 使用此类或以某种方式解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:09:33.173

这将设置客户端浏览器正在使用的 IE 版本的类。

```
<!--[if lt IE 7 ]> <html class="ie6" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8" lang="en" xml:lang="en"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9" lang="en" xml:lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html class="" lang="en"> <!--<![endif]--> 
```

然后使用 CSS，您可以通过以下方式将其定位到特定浏览器：

```
.ie7 #wrapper
  {
     display:none;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:03:47.733

当人们觉得需要让他们的网站在不同的浏览器中看起来不同时（这与互联网应该是什么样的完全相反......）他们使用这个：

```
<!--[if IE]><html class="ie"><![endif]-->
<!--[if !IE]>--><html><!--<![endif]--> 
```

然后在您的 CSS 中，您可以制定`html.ie`特定于 IE 的规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:04:25.127

您可以使用[IE 条件注释](http://www.quirksmode.org/css/condcom.html)并在注释中包含的 css 中设置 css 规则。

例如：

```
<!--[if IE]><link rel="stylesheet" href="ie.css" /><![endif]--> 
```

或者：

```
<!--[if IE]><style>*ie style rules here*</style><![endif]--> 
```

# php - 日期函数总是返回 +12 小时

> ID：10987461
> 
> 赞同：0
> 
> 时间：2012-06-11T21:00:25.100
> 
> 标签：php, date, time

我正在尝试创建一个“x 分钟前”类型的函数（[来自此示例](http://codeigniter.com/wiki/Fuzzy_time/)），由于某种原因，结果给了我正确的结果......但增加了 12 小时。我给它的日期是正确的，我的时区是正确的，所以它必须是函数中的某些东西，但我找不到任何东西。

这是我的功能：

```
function when($dt,$precision=2){
        $times=array(   
            365*24*60*60    => "year",
            30*24*60*60     => "month",
            7*24*60*60      => "week",
            24*60*60        => "day",
            60*60           => "hour",
            60              => "minute",
            1               => "second"
        );

        $passed=time()-$dt;

        if($passed<5){
            $output='less than 5 seconds ago';
        } elseif($passed > 172800) {
             $output=date("jS F,Y",$dt);
        } else {
            $output=array();
            $exit=0;

            foreach($times as $period=>$name){
                if($exit>=$precision OR ($exit>0 && $period<60)) break;

                $result = floor($passed/$period);
                if($result>0){
                    $output[]=$result.' '.$name.($result==1?'':'s');
                    $passed-=$result*$period;
                    $exit++;
                } else if($exit>0){
                    $exit++;
                }
            }
            $output=implode(', ',$output).' ago';
        }
        return $output;
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:23:20.250

如果您通过 php.ini 更改了时区，请确保重新启动 Apache。

或者

将[date_default_timezone_set()](http://php.net/manual/en/function.date-default-timezone-set.php)添加到您的代码中：

```
date_default_timezone_set('America/Los_Angeles'); 
```

# c++ - 终端中的光标闪烁消除，如何？

> ID：10987468
> 
> 赞同：8
> 
> 时间：2012-06-11T21:00:59.777
> 
> 标签：c++, shell, terminal, text-cursor

我使用以下几行在我的 c++ 程序中输出模拟的进度信息，

```
double N=0;
double percent=0;
double total = 1000000;
for (int i; i<total; ++i)
{
    percent = 100*i/total;
    printf("\r[%6.4f%%]",percent);
} 
```

它工作正常！

但是问题是我看到终端光标一直在数字中循环闪烁，这很烦人，有谁知道如何摆脱这个？

我见过一些程序，如 wget 或 ubuntu apt，它们也使用进度条或百分比，但它们似乎没有光标闪烁的问题，我想知道它们是怎么做到的？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-12T10:45:56.797

`DECTCEM`您可以在 和 中使用（DEC 文本光标启用模式）模式隐藏和显示`DECSM`光标`DECRM`：

```
fputs("\e[?25l", stdout); /* hide the cursor */

fputs("\e[?25h", stdout); /* show the cursor */ 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-11T21:55:29.960

只是一个猜测：尝试使用适当数量的“\b”（退格）字符而不是“\r”。

== 编辑 ==

我不是 Linux shell 向导，但这可能有效：

```
system("setterm -cursor off");
// ...display percentages...
system("setterm -cursor on"); 
```

不要忘记`#include <cstdlib>`或`<iostream>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T21:13:41.943

避免光标闪烁的一种方法是（如建议的那样）暂时隐藏光标。

然而，这只是解决方案的一部分。您的程序还应考虑到这一点：

*   隐藏光标并修改屏幕后，**在**再次显示光标之前**将**其移回原始位置。
*   隐藏/显示光标仅在您的更新只需要很短的时间时才使光标不会明显闪烁。如果您碰巧将此与一些耗时的过程混合在一起，您的光标**会**闪烁。

建议使用的解决方案`setterm`是不可移植的；它特定于 Linux 控制台。并且运行一个可执行文件 using`system`并不是真正必要的。但即使跑步

```
system("tput civis");
...
system("tput cnorm"); 
```

是对使用的改进`setterm`。

检查源代码`wget`没有找到任何隐藏光标的转义序列。您在进度条中看到的是，每当它执行一些耗时的操作时，它会将光标留在大致相同的位置。到终端的输出只需要很少的时间，以至于您不会注意到该行的瞬时重写（通过打印回车，然后重新写入大部分行）。如果速度较慢，那么隐藏光标会有所帮助——在一定程度上。

顺便说一句——这种光标隐藏技术在某些编辑器（vim 和[vile](https://github.com/ThomasDickey/vile-snapshots/blob/master/tcap.c#L944)）的终端驱动程序中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:42:31.097

这些应用程序可能正在使用[ncurses](http://www.paulgriffiths.net/program/c/curhello.php)。见[mvaddstr](http://linux.die.net/man/3/mvaddstr)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-07-23T05:55:40.087

光标跳来跳去的原因是因为`stdout`被缓冲了，所以你实际上不知道在某个时间点打印了多少个字符。`wget`没有跳跃光标的原因是它们实际上是打印到的`stderr`，而不是无缓冲的。尝试以下操作：

```
fprintf(stderr, "\r[%6.4f%%]", percent); 
```

如果您使用管道将其余输出保存在某处，这也具有不会使文件混乱的优点，例如：

```
$ ./executable > log.data 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-10-03T14:44:06.473

按插入键...如果不起作用，请按键盘上的**fn**键。这肯定会工作
希望这会有所帮助

# asp.net-mvc-3 - 防止篡改 ASP.NET MVC EF 中的表单字段

> ID：10987472
> 
> 赞同：5
> 
> 时间：2012-06-11T21:01:24.893
> 
> 标签：asp.net-mvc-3, security, entity-framework-4.1

ASP.NET MVC 3 中默认的强类型编辑页面通常会公开实体的所有字段。虽然这通常是可行的，但某些领域存在安全风险。例如，一个简化的杂志订阅实体可能如下所示：

```
public void Subscription() {
  public int Id { get; set; }
  public string Name { get; set; }
  public string Address { get; set; }
  public string City { get; set; }
  public string State { get; set; }
  public string Zip { get; set; }
  public DateTime SubscribedThru { get; set; }
} 
```

例如，如果我提供一个编辑页面让用户更改他们自己的地址，那么包含该`SubscribedThru`字段会带来安全风险，因为知识渊博的恶意用户可以通过伪造日期给自己免费的 10 年订阅（即使我使用`@Html.HiddenFor(model => model.SubscribedThru)`.因此，我不会以任何方式在编辑页面 html 中包含该字段（通过剃刀）。

我认为答案可能是使用以下方法防止`SubscribedThru`在控制器中的 Edit 方法上进行绑定尝试：

```
[HttpPost]
public ActionResult Edit([Bind(Exclude="SubscribedThru")] Subscription subscription) {
  if (ModelState.IsValid) {
    db.Entry(subscription).State = EntityState.Modified;
    db.SaveChanges();
    return RedirectToAction("Index");
    }
  }
  return View(subscription);
} 
```

当我到达该`SaveChanges();`行时，它会引发错误，`The conversion of a datetime2 data type to a datetime data type resulted in an out-of-range value.`我认为 SubscribedThru 日期（正确吗？）不存在，并且空值小于 SQL Server 可以处理的值。令我惊讶的是，当我排除了绑定时，它甚至试图更新该字段。

到目前为止，我最好的解决方案似乎是创建一个省略 SubscribedThru 日期的自定义 ViewModel，但这似乎有很多重复的字段、验证等；如果可能的话，我只想让一个字段`SubscribedThru`不受用户编辑的影响。

我不能说我完全理解`UpdateModel`和`TryUpdateModel`方法，想知道这是否是前进的方向？我和他们一起玩过，EF 会因为有重复的对象（相同的键）而引发错误，这令人困惑。

另外，我不清楚订阅数据是否从`public ActionResult Edit(int id)`控制器中的初始加载一直保留到最终`[HttpPost] public ActionResult Edit(Subscription subscription)...`方法，或者该行是否`db.Entry(subscription).State = EntityState.Modified;`尝试设置所有数据（我认为它只是设置一个指示“编辑-所以-EF-应该-保存-这个“）。

我是一名长期的 .NET 开发人员，刚刚进入我的第一个 ASP.NET MVC 项目，所以我可能忽略了一些令人痛苦的显而易见的事情。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:05:15.750

> 到目前为止，我最好的解决方案似乎是创建一个省略 SubscribedThru 日期的自定义 ViewModel，但这似乎有很多重复的字段、验证等；

这正是你应该做的，以保持整洁。 [AutoMapper](http://automapper.org/)减轻了`ViewModel`变化带来的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:08:40.387

此页面包含使用`TryUpdateModel`（清单 4）更新模型的示例： [http ://www.asp.net/mvc/tutorials/older-versions/models-(data)/creating-model-classes-with-the-entity -框架-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/creating-model-classes-with-the-entity-framework-cs)

您只能将允许编辑的字段列入白名单，从而消除安全风险。

# c# - ASP.Net WebAPI 从 MediaTypeFormatter 中获取当前控制器名称

> ID：10987474
> 
> 赞同：1
> 
> 时间：2012-06-11T21:01:29.150
> 
> 标签：c#, asp.net-web-api, mediatypeformatter

我正在为 HTML 编写媒体类型格式化程序，以根据用户的 html 请求自动生成 Razor 视图。我这样做是为了在 SelfHosted 服务中使用。我需要检测请求了哪些控制器/操作以允许我选择要渲染的视图。

```
 public class RazorHtmlMediaTypeFormatter : MediaTypeFormatter
    {
        public RazorHtmlMediaTypeFormatter()
        {
            SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/html"));
        }

        public override bool CanWriteType(Type type)
        {
            return true;
        }

        public override bool CanReadType(Type type)
        {
            return false;
        }

        public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, System.Net.TransportContext transportContext)
        {
            return Task.Factory.StartNew(() =>
                {
                    var view = Razor.Resolve(String.Format("{0}.{1}.cshtml", something.Controller, something.Action), value);

                    byte[] buf = System.Text.Encoding.Default.GetBytes(view.Run(new ExecuteContext()));
                    stream.Write(buf, 0, buf.Length);
                    stream.Flush();
                });
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:02:38.200

为什么不将返回的对象包装在 中`Metadata<T>`？

即返回，而不是`MyCustomObject`, `Metadata<MyCustomObject>`。作为元数据属性，您可以设置控制器名称和操作。然后在格式化程序中，只需解耦元数据和您的自定义对象，并仅序列化该自定义对象。

我在这里写了关于这种方法的博客 - [http://www.strathweb.com/2012/06/extending-your-asp-net-web-api-responses-with-useful-metadata/](http://www.strathweb.com/2012/06/extending-your-asp-net-web-api-responses-with-useful-metadata/)。虽然本文的目的有点不同，但我相信您可以将其与您的需求联系起来。

**编辑**：或者如果您对小技巧没问题，请使用自定义过滤器和标题：

> ```
>  public override void OnActionExecuting(HttpActionContext actionContext)
>     {
>         actionContext.Response.Headers.Add("controller", actionContext.ActionDescriptor.ControllerDescriptor.ControllerName);
>         actionContext.Response.Headers.Add("action", actionContext.ActionDescriptor.ActionName;);
>         base.OnActionExecuting(actionContext);
>     } 
> ```

然后只需从格式化程序的标题中读取它，并删除标题条目，以便它们不会发送到客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:09:09.173

[Web API Contrib 在这里](https://github.com/WebApiContrib/WebAPIContrib/tree/master/src/WebApiContrib.Formatting.RazorViewEngine)有一个工作的 RazorViewFormatter 。

# scala - Play 2.0 和 MongoDB 与 Salat 接口

> ID：10987476
> 
> 赞同：0
> 
> 时间：2012-06-11T21:01:37.430
> 
> 标签：scala, mongodb, playframework

我的 Play 2.0 应用程序不断出现此错误：

```
play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[MatchError: 4f7f4ae4251735803a942b2c (of class org.bson.types.ObjectId)]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:82) [play_2.9.1.jar:2.0]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:63) [play_2.9.1.jar:2.0]
    at akka.actor.Actor$class.apply(Actor.scala:290) [akka-actor.jar:2.0]
    at play.core.ActionInvoker.apply(Invoker.scala:61) [play_2.9.1.jar:2.0]
    at akka.actor.ActorCell.invoke(ActorCell.scala:617) [akka-actor.jar:2.0]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179) [akka-actor.jar:2.0]
Caused by: scala.MatchError: 4f7f4ae4251735803a942b2c (of class org.bson.types.ObjectId)
    at com.novus.salat.transformers.in.LongToInt$class.transform(Injectors.scala:216) ~[salat-core_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at com.novus.salat.transformers.in.package$$anon$31.transform(Injectors.scala:180) ~[salat-core_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at com.novus.salat.transformers.Transformer$$anonfun$transform_$bang$1.apply(Transformer.scala:71) ~[salat-core_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at com.novus.salat.transformers.Transformer$$anonfun$transform_$bang$1.apply(Transformer.scala:71) ~[salat-core_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT]
    at scala.Option.flatMap(Option.scala:146) ~[scala-library.jar:0.11.2]
    at com.novus.salat.transformers.Transformer.transform_$bang(Transformer.scala:71) ~[salat-core_2.9.1-0.0.8-SNAPSHOT.jar:0.0.8-SNAPSHOT] 
```

我的模型非常简单，我使用 SalatDao 风格的数据库访问：

```
case class Gossip(@Key("_id") id: org.bson.types.ObjectId, title: String, link: String, description: String, permalink: String,
                  image: String, date: String) {}
object GossipDAO extends SalatDAO[Gossip, ObjectId](
  collection = MongoConnection()("gossips")("items")) 
```

当我调用这个时抛出错误：

```
val gossips = GossipDAO.find(ref = MongoDBObject("modificationDate" -> MongoDBObject("$gte" -> startDate))).toList 
```

我已经通过其他一些脚本将数据加载到我的 MongoDB 中，它们似乎没问题，因为我能够在 MongoDB shell 中找到它们：

```
 db.items.find({_id:ObjectId("4f7f4ae4251735803a942b2c")}) 
```

更重要的是，如果我更改 startDate 条件以便没有对象匹配它，我的代码运行良好。这表明查询是正确的，但是从 MongoDBObject 到 Scala 的 Gossip 类的转换失败。

上面的代码有问题吗？

**更新**

*   我的依赖只有这样：

    val appDependencies = Seq( "com.mongodb.casbah" %% "casbah" % "2.1.5-1", "com.novus" %% "salat-core" % "0.0.8-SNAPSHOT" )

*   我使用“modificationDate”，因为它是 mongoDB 集合对象中的一个字段。

*   当我执行 db.items.find({_id:ObjectId("4f7f4ae4251735803a942b2c")}) 我得到这个：

[https://gist.github.com/2928862](https://gist.github.com/2928862)

*   如果您只是获取整个集合，是否会发生同样的问题？

我不知道如何使用 salat DAO 获取所有对象。但是当我的案例类没有 'id' 键时，我可以在 MongoConnection 上执行 db.find() ，它会返回所有可用的对象并将它们转换为模型对象。同样的解决方案，当我添加“id”键时，会产生与上面相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T06:27:20.307

好吧，似乎删除“目标”目录并再次运行 Play20 解决了这个问题。那里一定有一些旧的课程信息。

# keyboard-shortcuts - Vim - 在插入模式下使用箭头键时如何显示有用的错误消息？

> ID：10987488
> 
> 赞同：0
> 
> 时间：2012-06-11T21:03:29.783
> 
> 标签：keyboard-shortcuts, vim

我试图停止在 vim 中使用箭头键。但是`<nop>`，我不想像其他人那样将它们设置为 ，而是希望它们显示错误消息。这在正常模式下执行此操作：

```
noremap <up>    :echoerr 'USE K TO GO UP'<CR>
noremap <down>  :echoerr 'USE J TO GO DOWN'<CR>
noremap <left>  :echoerr 'USE H TO GO LEFT'<CR>
noremap <right> :echoerr 'USE L TO GO RIGHT'<CR> 
```

我尝试在插入模式下做同样的事情，但没有奏效：

```
inoremap <up>    :echoerr 'USE K TO GO UP'<CR>
inoremap <down>  :echoerr 'USE J TO GO DOWN'<CR>
inoremap <left>  :echoerr 'USE H TO GO LEFT'<CR>
inoremap <right> :echoerr 'USE L TO GO RIGHT'<CR> 
```

当我在插入模式下按下时，这会打印`:echoerr 'USE K TO GO UP'`我的光标所在的位置。

如何修复`inoremap`指令以使其按预期工作？（另外，解释为什么它不起作用会有所帮助）。

编辑：感谢所有帮助过我的人。我最终使用了这个：

```
noremap <up>    :echom 'USE K TO GO UP'<CR>
noremap <down>  :echom 'USE J TO GO DOWN'<CR>
noremap <left>  :echom 'USE H TO GO LEFT'<CR>
noremap <right> :echom 'USE L TO GO RIGHT'<CR>
inoremap <up>    <ESC>:echom 'USE K TO GO UP'<CR>
inoremap <down>  <ESC>:echom 'USE J TO GO DOWN'<CR>
inoremap <right> <ESC>:echom 'USE L TO GO RIGHT'<CR>
inoremap <left>  <ESC>:echom 'USE H TO GO LEFT'<CR> 
```

vim-autoclose 插件在编辑模式下给我上/下键带来了麻烦。我刚刚卸载了插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T21:08:44.613

```
:inoremap <up> <Esc>:echoerr 'MSG HERE'<CR> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-12T06:30:44.210

而不是使用`<Esc>:echoe 'message'<CR>`我会`<C-o>:echoe 'message'<CR>`在这里建议：它不会离开插入模式。`<C-o>:throw 'message'<CR>`让它更烦人：你会得到`Press ENTER`提示，而不仅仅是突出显示的消息：

```
inoremap <Up> <C-o>:throw 'USE “&lt;Esc>k” TO GO UP'<CR> 
```

. 请注意，我还建议使用等价物`echohl ErrorMsg | echomsg 'Message' | echohl NONE`而不是`:echoerr`: 虽然它在这里无关紧要，但`:echoe`应该被遗忘，因为它高度依赖于上下文：不像`:echom`which 从不​​中断执行并且`:throw`总是这样做，`:echoe`如果它在`try`块内则中断执行，否则不这样做。这使得任何构造都像

```
SomeCommand
if error_cond
    echoe 'abc'
endif
SomeCommand2 
```

不稳定：如果为真，你永远不知道是否`SomeCommand2`会被执行。`error_cond`这里无关紧要，因为没有后续命令并且不太可能在`try`块内运行，但不要让自己认为这`:echoe`可能是回显错误的好选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:55:10.593

你有比尝试使用`hjkl`而不是箭头更紧迫的问题。

`:help mapping`例如，您应该阅读。

当你按下 时，`inoremap <up> :echoerr 'USE K TO GO UP'<CR>`你指示 Vim在光标处输入。这是一种插入模式映射，因此，只要您不包含映射序列或映射序列中的某个位置，整个事物就会按原样插入。`:echoerr 'USE K TO GO UP'<CR>``<Up>``<Esc>``<C-o>`

为了执行命令序列，您必须首先退出插入模式；因此`<Esc>`在埃里克的回答中。

# cakephp-1.3 - 访问模型 CakePHP 中的控制器变量

> ID：10987489
> 
> 赞同：1
> 
> 时间：2012-06-11T21:03:33.943
> 
> 标签：cakephp-1.3

我在 CakePHP 的控制器中有两个变量，可以使用

```
$this->data['General']['q']

$this->data['General']['typesearch']. 
```

我如何在模型中引用这些变量？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:51:14.630

您没有指定为什么在模型中需要这些变量。因为上下文对于这类问题非常重要，没有它就很难准确回答。

好吧，您可以先尝试在模型中定义变量：

```
Class MyModel Extends AppModel {
    var $q;
    var $typesearch;
} 
```

然后，在您的控制器中，您可以尝试将控制器变量的值传递给这些变量：

```
$this->MyModel->q = $this->data['General']['q'];
$this->MyModel->typesearch = $this->data['General']['typesearch']; 
```

* * *

问候， 海华沙

# ios - 绝对定位的标志不在 iOS 中居中

> ID：10987491
> 
> 赞同：0
> 
> 时间：2012-06-11T21:03:41.813
> 
> 标签：ios, css-position

我朋友网站上的徽标在所有浏览器中都可以正常工作，但是当我打开我的 iPhone 或 iPad（实际设备）时，一切都变得很奇怪。

```
<a href="http://www.averylawoffice.ca/averywordpress"><img class="averylogo" src="<?php bloginfo('template_directory') ?>/img/HEADER-AveryLawOffice-LOGO.png" alt="Avery Law Office"></a> 
```

它没有放在任何包含的 div 中。就靠它自己。

CSS

```
 .averylogo { position: absolute; width:360px; left: 50%; margin-left: -180px; z-index: 2; } 
```

我不太确定为什么它可以在其他任何地方工作，但不能正确地集中在我的 iPad 或 iPhone 上。

这就是它的样子，但仅限于 iOS。 ![在此处输入图像描述](../Images/26ec4fdfde72a38ed0e5aebf0abe3008.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:08:52.993

否则`#main-navigation` `position:relative;`，徽标的位置相对于身体，在您的较小设备上调整大小。

Chris Coyier 有[一篇关于它](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:12:36.853

使用`margin-left: auto`和删除`left: 50%`.

您可能想`text-align: center`为`#main-navigation`IE 添加。

# php - 在 Yii findByPk() 中对相关模型进行排序

> ID：10987500
> 
> 赞同：1
> 
> 时间：2012-06-11T21:04:20.210
> 
> 标签：php, yii

使用 Yii 框架，如何通过“sortorder ASC, name ASC”对相关的模型修饰符值进行排序？我试过`order->('modifiervalues.sortorder ASC, modifiervalues.name ASC')`无济于事

```
<?php
    $item = Item::model()
    ->with("modifiergroups.modifiervalues")
    ->findByPk($id);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:32:18.717

尝试

```
$item = Item::model()
        ->with('modifiergroups')
        ->find(array(
                'condition'=>'id = :id',
                'params'=>array('id'=>$id),
                'order'=>'modifiervalues.sortorder ASC, modifiervalues.name ASC'
              )
         ); 
```

或者（我实际上并没有尝试过这个，但它应该可以正常工作）

```
$item = Item::model()
        ->with(array('modifiergroups'=>array('order'=>'modifiervalues.sortorder ASC, modifiervalues.name ASC')))
        ->findByPk($id)); 
```

笔记：

*   如果你`with`只给一个字段，我认为你不能按另一个字段排序。您应该给出`with`关系的名称。
*   [CActiveRecord](http://www.yiiframework.com/doc/api/1.1/CActiveRecord/)没有`order`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T10:51:25.940

```
<?php
    $item = Item::model()
    ->with(array('modifiergroups'=>array('order'=>'modifiervalues.sortorder ASC, modifiervalues.name ASC')))
    ->findByPk($id));
?> 
```

您还需要按顺序添加基本关系名称。试试这个。

# java - Eclipse 中的清单文件

> ID：10987504
> 
> 赞同：1
> 
> 时间：2012-06-11T21:04:31.510
> 
> 标签：java, eclipse, jar

我有一个项目，它有一些与之关联的库（在构建路径中）。

现在，当我在 jar 中导出项目时，我有多个选项，例如，eclipse 创建一个新的清单文件（只有一行），创建一个可运行的 jar（它还将添加类路径信息）。

我的问题是，在 Eclipse 中是否有一种简单的方法可以将类路径库添加到清单中（我不想创建可运行的 jar）。我知道我可以以各种方式编辑 jar。如果答案是“不，没有直接的方法”，我的下一个问题是，“为什么，这是一个非常普遍的要求，不是吗”并且 eclipse 在创建可运行 jar 时这样做，那么为什么不用于不可运行罐子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:12:01.263

> “为什么，这是一个非常普遍的要求，不是吗”并且 Eclipse 在创建可运行的 jar 时这样做，那么为什么不创建不可运行的 jar？

谁说这是普遍要求？文件只是一个库
。`jar`可以是独立的或依赖于其他罐子。
如果您对 a 有依赖关系，`jar`则将其记录为依赖关系。您不会分发包含其他 jar 的 jar。
例如，如果您在项目中包含 apache 库，您也可以`commons-logging`*单独*下载 作为依赖项。
它不包含/捆绑在罐子中。
否则你最终会得到 30 MB 大小的 jars ....

# perl - 在 Perl 中对日期进行排序

> ID：10987507
> 
> 赞同：0
> 
> 时间：2012-06-11T21:04:47.850
> 
> 标签：perl, sorting

我需要帮助在 perl 中排序。我有一个这种格式的日期数组。DD-MMM-YY。示例 19-FEB-12。

我已经花了很多时间，但无法让它工作。我对 perl 也很陌生。感谢您提供任何帮助。谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T21:35:08.310

这可以使用`Time::Piece`核心模块的`strptime`方法来解码日期并根据生成的纪元秒数对它们进行排序。

这个程序演示了这个想法。

```
use strict;
use warnings;

use Time::Piece;

my @dates = <DATA>;
chomp @dates;

my @sorted = sort {
  Time::Piece->strptime($a, '%d-%b-%y') <=> Time::Piece->strptime($b, '%d-%b-%y')
} @dates;

print "$_\n" for @sorted;

__DATA__
05-FEB-12
10-MAR-11
22-AUG-11
26-FEB-12
10-NOV-12
07-JUN-11
20-APR-12
19-DEC-12
17-JAN-11
25-NOV-11
28-FEB-11
04-SEP-11
03-DEC-12
16-SEP-12
31-DEC-11
08-JUN-11
22-JUN-12
02-AUG-12
23-SEP-11
14-MAY-11 
```

**输出**

```
17-JAN-11
28-FEB-11
10-MAR-11
14-MAY-11
07-JUN-11
08-JUN-11
22-AUG-11
04-SEP-11
23-SEP-11
25-NOV-11
31-DEC-11
05-FEB-12
26-FEB-12
20-APR-12
22-JUN-12
02-AUG-12
16-SEP-12
10-NOV-12
03-DEC-12
19-DEC-12 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:22:04.993

一种简单的方法是将日期转换为`YYYYMMDD`可以按字典顺序排序的格式。

请注意，`MM`应该是表示为两位数的月份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:34:05.983

您可以使用核心模块`Time::Piece`将 DD-MMM-YY（或**任何**输入格式）转换为 ISO 8601 格式。这允许简单的排序。这个例子建立了一个原始数据数组，其中包括 ISO 值作为排序键；对其进行排序；并按排序顺序返回数据：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Time::Piece;
my $t;
my @data;
while (<DATA>) {
    chomp;
    $t = Time::Piece->strptime( $_, "%d %b %y" );
    push @data, [ $t->datetime, $_ ];    #...ISO 8601 format...
}
my @sorteddata = sort { $a->[0] cmp $b->[0] } @data;
for my $value (@sorteddata) {
    print $value->[1], "\n";
}
__DATA__
19 Feb 12
17 Aug 11
31 Mar 10
01 Aug 11
08 Apr 11
29 Feb 11 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T21:37:30.800

这是仅使用基本 Perl（无模块）的一种可能方法：

```
#! perl -w

use strict;

my @dates = ( '19-FEB-12', '15-APR-12', '13-JAN-11' );

# map month names to numbers
my %monthnum = ( 
    'JAN' => 1, 'FEB' => 2, 'MAR' => 3, 'APR' => 4,
    'MAY' => 5, 'JUN' => 6, 'JUL' => 7, 'AUG' => 8,
    'SEP' => 9, 'OCT' => 10, 'NOV' => 11, 'DEC' => 12 
    );

# sort the array using a helper function
my @sorted_dates = sort { convert_date($a) cmp convert_date($b) } @dates;

print join(", ", @sorted_dates), "\n";
# outputs: 13-JAN-11, 19-FEB-12, 15-APR-12

exit(0);

# THE END

# converts from 19-FEB-12 to 120219, for sorting
sub convert_date
{
    my $d1 = shift;
    my $d2;

    if ($d1 =~ /(\d{2})-([A-Z]{3})-(\d{2})/)
    {
        $d2 = sprintf( "%02d%02d%2d", $3, $monthnum{$2}, $1 );
    }
    else
    {
        die "Unrecognized format: $d1";
    }

    return $d2;
} 
```

这取决于您的日期格式是否正确，但添加更多验证应该是微不足道的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T21:49:05.417

使用日期时间模块；或使用带有月份选项的排序命令 (*nix)；或将 dd-mmm-yyyy 转换为 yyyymmdd 然后排序；

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-11T22:28:24.623

完全从头开始：

打印输出：

```
Unsorted:
14-OCT-06
15-OCT-06
13-OCT-06
19-FEB-12
29-DEC-02
15-JAN-02

Sorted (Least recent to most recent):
15-JAN-02
29-DEC-02
13-OCT-06
14-OCT-06
15-OCT-06
19-FEB-12 
```

代码：

```
#!C:\Perl64

#Input Strings
@inputs = ('14-OCT-06','15-OCT-06','13-OCT-06', '19-FEB-12', '29-DEC-02', '15-JAN-02');

print "Unsorted:\n";
foreach(@inputs){
    print $_."\n";
}

# Hash for Month : Number
%months = ('JAN' => '01',
         'FEB' => '02',
         'MAR' => '03',
         'APR' => '04',
         'MAY' => '05',
         'JUN' => '06',
         'JUL' => '07',
         'AUG' => '08',
         'SEP' => '09',
         'OCT' => '10',
         'NOV' => '11',
         'DEC' => '12');
# Hash for Number : Month
%revmonths = ('01'=>'JAN',
         '02' => 'FEB',
         '03' => 'MAR',
         '04' => 'APR',
         '05' => 'MAY',
         '06' => 'JUN',
         '07' => 'JUL',
         '08' => 'AUG',
         '09' => 'SEP',
         '10' => 'OCT',
         '11' => 'NOV',
         '12' => 'DEC');

# Rearrange the order to 'Year-Month-Day'
@dates = ();
foreach(@inputs){
    my @split = split('-',$_);
    my @rearranged = reverse(@split);
    @rearranged[1] = $months{$rearranged[1]};
    push(@dates, \@rearranged);
}

# Sort based on these three fields
@sorted = sort { $a->[2] <=> $b->[2] } @dates;
@sorted = sort { $a->[1] <=> $b->[1] } @sorted;
@sorted = sort { $a->[0] <=> $b->[0] } @sorted;

# Replace Month Number with Month name
$size = @sorted;
for $counter (0..$size-1){
    my $ref = $sorted[$counter];
    my @array = @$ref;
    my $num = $array[1];
    $array[1] = $revmonths{$array[1]};
    my @array = reverse(@array);
    $sorted[$counter] = \@array;
}

print "\nSorted (Least recent to most recent):\n";
foreach(@sorted){
    my @temp = @$_;
    my $day = $temp[0];
    my $month = $temp[1];
    my $year = $temp[2];
    print $day."-".$month."-".$year;
    print "\n";
} 
```

# angularjs - 如何按 angularjs 中的键和值列出？

> ID：10987509
> 
> 赞同：4
> 
> 时间：2012-06-11T21:05:00.610
> 
> 标签：angularjs

> **可能重复：**
> [AngularJS - 如何在 ng-Repeat 中引用属性名称](https://stackoverflow.com/questions/10954286/angularjs-how-can-i-reference-the-property-name-within-an-ng-repeat)

我有一个这样的 JSON 文件：

```
fields: {
    alias: {
        type: "string",
    },
    name: {
        type: "string",
    }
} 
```

我想要这样的东西：

```
<dl ng-repeat="for field in fields.items">
    <dt>
        {{ field.key }}
    </dt>
    <dd>
        {{ field.value }}
    </dd>
</dl> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-12T12:08:40.160

根据 ngRepeat 文档，您可以使用“(key, value) in expression”作为参数——其中 key 和 value 可以是任何用户定义的标识符，而 expression 是给集合枚举的范围表达式。

例如：{'adam':10, 'amalie':12} 中的 (name, age)。

[http://docs.angularjs.org/api/ng.directive:ngRepeat](http://docs.angularjs.org/api/ng.directive:ngRepeat)

# html - ASP.NET - 使用 HAP（HTML 敏捷包）在渲染期间添加类引用

> ID：10987510
> 
> 赞同：3
> 
> 时间：2012-06-11T21:05:04.050
> 
> 标签：html, asp.net, webforms, html-parsing, csquery

是否可以使用 HAP（HTML 敏捷包）来：

1.  获取节点集合，例如`<a>`作为元素子级的所有`<li>`元素
2.  遍历集合
3.  将 CSS 类引用添加到每个元素的类属性中，例如`class &= "foo"`
4.  更新 HTML 中原始位置的节点

对于第 4 点，我需要知道是否：

*   当我抓取一组节点时，我是否在使用副本？
*   如果是这样，我可以轻松地更新 HTML 中原始位置的节点吗

最后，在 ASP.NET 网站中呈现页面时这样做是否可行，考虑到：

*   我将需要修改不超过 100 个元素的类引用
*   我没有处理大型 HTML 文档
*   我计划从一个 div 开始选择我的节点，例如`div[2]`body 包含 4`divs`

我意识到这可能看起来像是一堆单独的问题，但实际上它只是以下两个问题的细分：

*   我可以轻松地修改 ASP.NET 页面的 HTML 输出，例如插入类引用吗？
*   在 50 - 100 个元素的 WRT 速度上执行此操作是否可行，例如不超过 2 秒的成本？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:19:44.293

**不要那样做**！ASP.NET 并不意味着以这种方式使用，有更好的方法来完成此任务，具体取决于您如何在想要更改或添加 css 类的女巫中创建该标记。ASP.NET 使用 aspx 模板，基本上是 html 标记，在那里您可以干预在服务器上执行的代码，在这里您可以静态设置 css 类或使用服务器端脚本通过一些代码在标记上设置 css 类。

如果锚控件的父控件是列表项控件（您必须使用服务器端控件），您还可以在代码后面创建控件并将 css 设置为控件。

要按照自己的方式进行操作，您必须制作响应过滤器（[此处](http://madskristensen.net/post/Spam-proof-your-website-using-an-HttpModule.aspx)为示例），并在请求完成后进行解析并将结果写入响应流并更改回响应流。使用常见的 ASP.NET 技术要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:39:45.607

查看我的 CsQuery 项目：[https](https://github.com/jamietre/csquery) ://github.com/jamietre/csquery或在 nuget 上作为“CsQuery”。

这是 jQuery 的 C# (.NET 4) 端口。选择器比 HTML Agility Pack 快几个数量级；事实上，我写它的最初目的就是做你想做的事：实时操作 HTML。碰巧的是，来自 ckeditor 生成的带有 html 的 CMS。

要使用 CsQuery 拦截 Web 表单中的 HTML，您可以在页面代码隐藏中执行以下操作：

```
using CsQuery;
using CsQuery.Web;

protected override void Render(HtmlTextWriter writer)
{

   // the CsQueryHttpContext object is part of the CsQuery library, it's a helper 
   // than abstracts the process of intercepting base.Render() for you.

    CsQueryHttpContext csqContext = 
        WebForms.CreateFromRender(Page, base.Render, writer);

    // CQ object is like a jQuery object. The "Dom" property of the context
    // returned above represents the output of this page.

    CQ doc = csqContext.Dom;

    doc["li > a"].AddClass("foo");

    // write it
    csqContext.Render();
} 
```

GitHub 上有基本文档，但除了输入和输出 HTML 之外，它的工作方式与 jQuery 非常相似。上面的`WebForms`对象只是为了帮助您处理与`HtmlTextWriter`对象和`Render`方法的交互。通用用法很简单：

```
var doc = CQ.Create(htmlString);
// or 
var doc = CQ.CreateFromUrl(url);

.. do stuff with doc, a CQ object that acts like a jQuery object

string html = doc.Render(); 
```

# java - 定期增量读取文本文件作为字节数组忽略部分附加的行

> ID：10987511
> 
> 赞同：3
> 
> 时间：2012-06-11T21:05:06.377
> 
> 标签：java, java-io

我正在尝试将另一个进程附加的文本文件读入字节数组。我想定期“轮询”文件以仅提取新的“完整”文本行（这些行以新行结尾）。使用标准库在 Java 6 中执行此操作的最佳方法是什么？

我对存储和创建字符串不感兴趣，所以可能所有来自读者的“readLine()”方法都不是我应该研究的。我正在考虑使用 RandomAccessFile，但我想知道如何截断读取的字节数组，使其在最后一个换行符处结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:08:39.343

您可以有一个线程来轮询文件的长度。当长度增加时，将该长度作为 byte[] 读取（仅此而已，因此不要使用 BufferedInputStream），稍后您将能够继续读取文件。获取 byte[] 并将其写入 PipedOutputStream。

在您的主线程中，您可以使用 BufferedReader + InputStreamReader + PipedInputStream。使用一个普通的 readLine() 就可以了。

# asp.net - 如何使 asp:GridView 可排序？

> ID：10987515
> 
> 赞同：6
> 
> 时间：2012-06-11T21:05:37.203
> 
> 标签：asp.net, sorting, webforms

我有一个`asp:GridView`控件，我已将`AllowSorting="True"`属性设置为：

```
<asp:GridView ID="gridUsers" runat="server" PageSize="100" ShowHeaderWhenEmpty="True"
   Width="100%" AllowSorting="True" onrowcreated="gridUsers_RowCreated" 
   onsorting="gridUsers_Sorting">
</asp:GridView> 
```

在设计时，网格看起来是可排序的：

![在此处输入图像描述](../Images/dd7355d77226538347a87183db9854bd.png)

但在运行时只有中间列是可排序的：

![在此处输入图像描述](../Images/9d5fc05366cbb309fa6f515608174850.png)

如何`asp:GridView`在 ASP.NET 中进行排序？

* * *

**注意**：`asp:GridView`with`AllowSorting` *需要*一个`Sorting`事件处理程序存在：

```
protected void gridUsers_Sorting(object sender, GridViewSortEventArgs e)
{
   //asp:GridView will throw an exception if a Sorting event handler isn't present
} 
```

**更新：我意识到****描述**列有什么特别之处。它是数据库中显示名称正确的唯一列*as-is*。其余列[我必须将显示名称修复为可展示](https://stackoverflow.com/questions/2091457/how-to-hide-columns-in-an-asp-net-gridview-with-auto-generated-columns)：

```
protected void gridUsers_RowCreated(object sender, GridViewRowEventArgs e)
{
   e.Row.Cells[0].Visible = false; //UserGUID
   e.Row.Cells[1].Text = "User name";
   e.Row.Cells[2].Text = "Full name";
   //3=Description
   e.Row.Cells[4].Text = "E-mail";
   e.Row.Cells[5].Text = "Active";
       e.Row.Cells[5].Visible = false;
   e.Row.Cells[6].Text = "Account type";
 } 
```

现在我只需要弄清楚棘手的部分；并使列可排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T07:04:22.167

这段代码肯定会帮助你：

在 GridView 中，使属性 AllowSorting = "True" 并在 GridView Columns 中给出这样的

```
<asp:BoundField DataField="UserName" HeaderText="User Name" SortExpression="UserName" />
<asp:BoundField DataField="FullName" HeaderText="Full Name" SortExpression="FullName" /> 
```

并使用以下编码：

```
protected void gv_Sorting(object sender, GridViewSortEventArgs e)
{
    try
    {
        string sortExpression = e.SortExpression;
        ViewState["z_sortexpresion"] = e.SortExpression;
        if (GridViewSortDirection == SortDirection.Ascending)
        {
            GridViewSortDirection = SortDirection.Descending;
            SortGridView(sortExpression, "DESC");
        }
        else
        {
            GridViewSortDirection = SortDirection.Ascending;
            SortGridView(sortExpression, "ASC");
        }
    }
    catch (Exception ex)
    {
        return ex.Message.ToString();
    }
}
public SortDirection GridViewSortDirection
{
    get
    {
        if (ViewState["sortDirection"] == null)
            ViewState["sortDirection"] = SortDirection.Ascending;
        return (SortDirection)ViewState["sortDirection"];
    }
    set
    {
        ViewState["sortDirection"] = value;
    }

}
private void SortGridView(string sortExpression, string direction)
{
    DTSorting = new DataView(DTSorting, "", sortExpression + " " + direction, DataViewRowState.CurrentRows).ToTable();
    gv.DataSource = DTSorting;
    gv.DataBind();
}
public DataTable DTSorting
{
    get
    {
        if (ViewState["Sorting"] != null)
        {
            return (DataTable)ViewState["Sorting"];
        }
        else
            return null;
    }
    set
    {
        ViewState["Sorting"] = value;
    }
} 
```

在这里，考虑“DTSorting”是您绑定 GridView“gv”的 DataTable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:19:32.537

```
protected void gridUsers_Sorting(object sender, GridViewSortEventArgs e)
{
    DataTable dt = Session["SortedTable"] as DataTable;

    if (dt != null)
    {

      //Sort the data.
      dt.DefaultView.Sort = e.SortExpression + " " + GetSortDirection(e.SortExpression);
      gridUsers.DataSource = Session["SortTable"];
      gridUsers.DataBind();
    }
} 
```

改编自这个[msdn 示例](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)：

# r - 我的 R 启动脚本似乎产生了错误

> ID：10987516
> 
> 赞同：0
> 
> 时间：2012-06-11T21:05:39.197
> 
> 标签：r

一周前，我注意到我的 R 启动脚本开始运行下面的类型“q()”以退出 R

唯一不同的是我在 Rprofile.site 文件中设置了我的 Cran 镜像。

我在网上尝试过，在其他 Stackoverflow 帖子中也找不到解决方案。网上有人告诉我，我执行的 Cran 镜像设置应该与此无关。

你能帮忙吗？

```
Attempting to load the environment ‘package:R.utils’
R.methodsS3 v1.2.2 (2010-11-17) successfully loaded. See ?R.methodsS3 for help.
R.oo v1.9.3 (2012-03-18) successfully loaded. See ?R.oo for help.

Attaching package: ‘R.oo’

The following object(s) are masked from ‘package:R.methodsS3’:

    throw.default

The following object(s) are masked from ‘package:methods’:

    getClass, getClasses, getMethods

The following object(s) are masked from ‘package:base’:

    attach, detach, gc, load, save

R.utils v1.12.1 (2012-03-20) successfully loaded. See ?R.utils for help.

Attaching package: ‘R.utils’

The following object(s) are masked from ‘package:utils’:

    timestamp

The following object(s) are masked from ‘package:base’:

    cat, commandArgs, getOption, inherits, isOpen, lapply, parse,
    warnings 
```

这是我的 Rprofile.site 文件规格：

```
# Things you might want to change
# options(papersize="a4")
# options(editor="notepad")
# options(pager="internal")

# set the default help type
# options(help_type="text")
options(help_type="html")

# set a site library
# .Library.site <- file.path(chartr("\\", "/", R.home()), "site-library")

# set a CRAN mirror
 local({r <- getOption("repos")
   r["CRAN"] <- "http://cran.cnr.Berkeley.edu"
   options(repos=r)})

# Give a fortune cookie, but only to interactive sessions
# (This would need the fortunes package to be installed.)
#  if (interactive()) 
#    fortunes::fortune() 
```

# android - 另一个关于数组适配器（android）

> ID：10987517
> 
> 赞同：0
> 
> 时间：2012-06-11T21:05:45.797
> 
> 标签：android, loops, arraylist, android-arrayadapter, android-spinner

我从一个循环`ArrayAdapter`中填充了一个，我们会说从 3 到 18。这些数字被放入一个.`ints``while``Spinner`

我的问题是：是否可以自动选择一个给定的数字，比如 8？

编辑：更改为选中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:04:44.177

首先，您必须找出这个数字在您的`ArrayAdapter`（例如 8）中的位置：

`int pos = myAdapter.getPosition(8);`

然后只需设置选择：

`mySpinner.setSelection(pos);`

# ember.js - Ember 将属性绑定到 arraycontroller 中的相邻项

> ID：10987518
> 
> 赞同：0
> 
> 时间：2012-06-11T21:05:46.350
> 
> 标签：ember.js

我是 ember 的新手，并且仍然通过框架让我的密封腿在我身下。到目前为止，我认为它很棒，除了一件事我似乎无法弄清楚：如何将数组项的属性绑定到相邻数组项的属性。

细节：

我的模型是这样的：

```
App.SRDate = Ember.Object.extend({
    timeValue: null,
    reductionAmount: null,
    id: null,
    index: null,
    date: Ember.computed(function(){return formatted date as a string}).property('timeValue') ,
    previousDate: ???
}); 
```

我有一个简单的数组控制器，它只包含上述对象的列表。我想要做的是能够调用`App.dates.objectAt(1).get('previousDate')`并让它返回`App.dates.objectAt(0).get('date')`。我最初是通过使用previousDate的计算属性来完成它的工作，但它只会在我更改绑定对象中的项目时更新（即，如果我更改对象0的日期，它不会在对象1的previousDate中更新直到我更改了对象 1 中的日期，这导致 ember 重新评估计算属性）。如果有一种方法可以定义计算属性与哪些对象相关联，那么这可能会奏效，但是我认为这不是计算属性真正应该用于...

我还尝试了如下绑定：

```
previousDateBinding: 'App.dates.getObject('+this.get('index')-1+').date' 
```

但这也没有用。

提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:49:22.927

刚刚遇到了类似的问题，我是这样解决的：http: [//jsfiddle.net/aMQU6/1/](http://jsfiddle.net/aMQU6/1/)

在我的 ArrayController 中，我有一个观察内容变化的函数。然后一旦添加，我将新对象中的一个属性设置为前一个对象，然后将前一个对象的日期绑定到添加对象中的 previousDate 属性。

希望这有帮助！如果您有任何问题，请告诉我。

# ajax - Ajax 页面失败并显示未定义的变量错误消息

> ID：10987521
> 
> 赞同：0
> 
> 时间：2012-06-11T21:05:51.587
> 
> 标签：ajax, codeigniter

我只是想写我的第一个启用 ajax 的页面。不用说，我遇到了问题。而且我认为它揭示了对 ajax 应该如何工作的根本误解。这是我要完成的工作的描述。我有一个包含我数据库记录的表的页面。当用户单击我的刷新按钮时，我想重新查询数据库中的所有记录并在不刷新页面的情况下显示它们。这是我的控制器：

```
 class Dashboard extends CI_Controller {

   public function __construct()
   {
          parent::__construct();           
          $this->load->helper('date');
          $this->load->helper('url');
   }

   public function index()
   {

          $this->load->model('locations_model');
          $emess = '';
          $data['clienthistory'] = $this->locations_model->get_locations();
          $data['main_content'] = 'dashboard';
          $this->load->view('includes/template', $data);

          $this->output->enable_profiler(TRUE);
   }

   public function index2()
   {

          echo('inside the getlatest method');

          $this->load->model('locations_model');
          $data['clienthistory'] = $this->locations_model->get_locations();

          //build HTML table to send back to view
          $data['latestdashboardHTML']= "<table class='table table-bordered table-striped'><thead>";
          $data['latestdashboardHTML']=$data['latestdashboardHTML'] & "<tr><th>IP</th><th>Name</th><th>Last Updated</th></tr></thead><tbody>"    ;     

      foreach ($data['clienthistory'] as $histitem)
      {
                 $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "<tr>";              
                 $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "<td>" & $histitem['network'] & "</td>";
                 $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "<td>" & $histitem['name'] & "</td>";
                 $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "<td>" & $histitem['lastupdated'] & "</td>";
                 $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "</tr>";                    
          }

          $data['latestdashboardHTML'] = $data['latestdashboardHTML'] & "</tbody></table>";
          $data['main_content'] = 'dashboard';
             echo ($data['latestdashboardHTML'])   ;            

          $this->load->view($data['main_content'] );

   }
 } 
```

这是我认为的代码：

```
<h2>Client Dashboard</h2>
<br/><p>
          <?php echo form_open('Dashboard/index');    

   echo form_submit('submit', 'Refresh Data', 'id="submit" class="btn-primary"');
   ?>
</p>
      <div class="row-fluid">
                 <div class="span12" id="ajaxcontainer">

                       <table class="table table-bordered table-striped">
                       <thead>
                              <tr>
                                     <th>IP</th>
                                     <th>Name</th>
                                     <th>Last Updated</th>

                              </tr>
                       </thead>
                       <tbody>
                              <?php foreach ($clienthistory as $histitem): ?>

                                  <tr>
                                     <td><?php echo $histitem['network'] ?></td>
                                     <td><?php echo $histitem['name'] ?></td>
                                     <td><?php echo $histitem['lastupdated'] ?></td>

                                  </tr>

                              <?php endforeach ?>

                       </tbody>
                       </table>

                 </div>

      </div><!--/row-->

<?php

          echo form_close();
?>

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/bs-transition.js"></script>
<script src="../assets/js/bs-alert.js"></script>
<script src="../assets/js/bs-modal.js"></script>
<script src="../assets/js/bs-dropdown.js"></script>
<script src="../assets/js/bs-scrollspy.js"></script>
<script src="../assets/js/bs-tab.js"></script>
<script src="../assets/js/bs-tooltip.js"></script>
<script src="../assets/js/bs-popover.js"></script>
<script src="../assets/js/bs-button.js"></script>
<script src="../assets/js/bs-collapse.js"></script>
<script src="../assets/js/bs-carousel.js"></script>
<script src="../assets/js/bs-typeahead.js"></script>

   <script type="text/javascript">
   $('#submit').click(function() {
          alert('here');
          $.ajax({

                 url:"<?php echo site_url('Dashboard/index2'); ?>",
                 type: 'POST',
                 success: function(msg) {
                       alert(msg);
                       $('#ajaxcontainer').replaceWith(msg);
                 }
          });

          return false;       
   });
   </script> 
```

问题：
第一次通过，页面加载正常。所有记录都显示正确的值。但是当我尝试刷新按钮时，javascript 执行，调用 index2 方法.. 但是它在第 22 行的视图中失败 - 这是我试图遍历 clienthistory 数组的地方。错误消息是：未定义变量：clienthistory。

所以这是我的问题。我认为 ajax 的工作方式是它只更新了页面的一部分。所以我想我不明白为什么要“重做”这部分视图。有人可以解释我做错了什么，更重要的是，如果我对 ajax 的理解是正确的。如果我可以将这两种方法合二为一，我也更喜欢它……我尝试过但遇到了一些问题，所以我最终只是将 index() 复制到 index2() 并使用它。

我注意到的另一种行为是标题“

# 客户仪表板

" 以及执行 ajax 方法时按钮显示两次。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:32:27.047

我发现了我的问题。在 index2() 我再次加载视图。
我不应该重新加载视图。我只需要将 html 字符串传递给调用者。这部分解决了我的问题。

所以特别是在我的控制器中，我替换了：

```
 $this->load->view($data['main_content'] ); 
```

和

```
 return $htmlstring; 
```

其中 $htmlstring 包含与 $data['latestdashboardHTML'] 相同的字符串

另一个问题是我需要指定我期望从控制器返回的数据类型。

所以我将以下行添加到我的 .ajax 函数中：

```
 dataType: 'html' 
```

最后，我在网上某处读到，让控制器创建任何 HTML 都不是一个好主意。这应该是视图的工作。我想我会尝试将一个数组从控制器传递给视图。然后让 jquery 代码重新创建我的 div 的内容。谢谢

# ios - 适配 Mapkit 应用程序

> ID：10987523
> 
> 赞同：1
> 
> 时间：2012-06-11T21:05:54.093
> 
> 标签：ios, mapkit

我正在开发一个使用 MapKit 的应用程序。鉴于 Apple 于 2012 年 6 月 11 日发布的公告，我是否必须使用新的 API 完全重写它才能跟上这些变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T01:00:24.357

iOS 6 仍处于 NDA 之下，只是一个不透露任何 NDAd 信息的快速回答：不，你不会，现有 MapKit 东西的 API 在 iOS 6 上保持不变。

# javascript - 使用 javascript 使用 fql 进行批量请求

> ID：10987526
> 
> 赞同：0
> 
> 时间：2012-06-11T21:06:10.557
> 
> 标签：javascript, facebook-fql, facebook-javascript-sdk

以下使用同一应用程序检索朋友的批处理请求不起作用：

```
var search = {batch: [
    {
      'name' : 'getFriends',
      'relative_url': 'method/fql.query?query=SELECT+uid,+first_name,+name,+pic_square,+pic_small+FROM+user+WHERE+is_app_user=1+and+uid+IN+(SELECT+uid2+FROM+friend+WHERE+uid1=' + userId + ')'
    },
    {
      'method': 'get',
      'relative_url': '{result=getFriends:$.data[*].uid}/news.reads/article', 
    }
]}; 
```

以下代码执行批处理请求：

```
FB.api('/', 'post', search, function(response) {
    console.log(response);
}); 
```

但第一次搜索返回**null**。查询有什么问题？

根据批量请求的 facebook 文档， *relative_url* 是

> (...) 一个 relative_url （graph.facebook.com 之后的 URL 部分）

从[这里](https://developers.facebook.com/docs/reference/api/batch/)得到。

所以我将第一块代码更改为：

```
var search = {batch: [
    {
        'name' : 'getFriends',
        'method' : 'GET',
        'relative_url': 'method/fql?q=SELECT uid, first_name, name, pic_square, pic_small FROM user WHERE is_app_user=1 and uid IN (SELECT uid2 FROM friend WHERE uid1=me())'
    },
    {
        'method': 'GET',
        'relative_url': '{result=getAmigos:$.data[*].uid}/news.reads/article'
    }
]}; 
```

批处理中第一个块的**relative_url**在 facebook 的 Open Graph API Tool 中工作，但在 JS 中，http 代码为 500，消息正文为：

```
{
    "error": {
        "message": "Graph batch API does not allow REST API method fql",
        "type": "FacebookApiException",
        "code": 3
    }
} 
```

但在 api 批处理请求文档中允许 fql 查询。文档已过时？我应该打开一个错误吗？

PS：没有批量请求的fql是

```
SELECT uid, first_name, name, pic_square, pic_small 
FROM user WHERE is_app_user=1 
     and uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T21:56:42.957

不要使用`method/fql`; Facebook 的 FQL 端点现在只是`fql`.

```
...
"name": "getFriends",
"method": "GET",
"relative_url": "fql?q=SELECT...",
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:48:35.057

它现在正在工作。我只是`access_token`在批处理对象中添加参数。像这样：

```
var searchArgs = {
   access_token: FB.getAuthResponse().access_token,
   batch: []
};

searchArgs.batch.push({
     'method': 'GET',
     'name': 'amigosapp',
     'relative_url': 'method/fql.query?query=SELECT+uid,+first_name,+name,+pic_square,+pic_small+FROM+user+WHERE+is_app_user=1+and+uid+IN+(SELECT+uid2+FROM+friend+WHERE+uid1=me())&limit=20',
     'omit_response_on_success': false
});

searchArgs.batch.push({
     'method': 'GET',
     'relative_url': 'news.reads/article?date_format=U&ids={result=amigosapp:$.[*].uid}'
}); 
```

另一个技巧是以不同的方式使用**jsonpath**表达式。我无法为第一个请求的每个用户发出第二个请求。所以我改变了让它在图形 api 请求末尾添加朋友 ID 的方式。我认为我首先想到的是每个朋友的请求，使用批处理请求是不可能的。

然后我做了批处理的调用：

```
FB.api('/', 'POST', searchArgs,
    function(response) {
        var friends = response[0].body;
        console.log(friends);
        var activities = response[1].body;
        console.log(activities);
    }
); 
```

现在它只是组织检索到的帖子。

[]的

# javascript - 点击播放声音和交换图像（菜单栏）

> ID：10987527
> 
> 赞同：0
> 
> 时间：2012-06-11T21:06:14.557
> 
> 标签：javascript, html, navigation

编辑：我找到了解决方案。简单的尴尬。我删除了以下代码行：e.preventDefault();

像魅力一样工作。显然，我是 js 的菜鸟。我要去 Code Academy 解决这个问题。:)

我不知道我最初的问题措辞很好（我很累，对不起！）所以让我换一种方式试试。

我一直在寻找解决这个问题的方法，在 SA、其他论坛和强大的谷歌。到目前为止，没有运气。

我有一个水平菜单。我想让每个链接播放声音并在点击时交换图像。我已经让它播放声音和交换图像，但锚链接不会将您发送到页面的相应文本部分。

去掉控制图片交换的js（位于html底部）解决了锚链接问题。但我需要同时发生声音和图像事件。

到目前为止，我只编写了前两个链接。

希望这能更好地解释我的问题。

再次感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:24:26.520

如上所述，删除以下代码行解决了该问题。

```
e.preventDefault(); 
```

我希望这可以帮助像我一样喜欢 js 的人免于像我一样为简单的事情而苦恼。嘘！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:10:09.740

您的锚标签的 href 是`#`. 这不会更改/重新加载页面，它只会更改 url 片段。见[http://en.wikipedia.org/wiki/Fragment_identifier](http://en.wikipedia.org/wiki/Fragment_identifier)

# spring - 使用 DAO 进行单元测试 Struts2 + Spring 动作

> ID：10987529
> 
> 赞同：0
> 
> 时间：2012-06-11T21:06:17.927
> 
> 标签：spring, struts2, jndi, jdbctemplate, junit3

我正在尝试对 struts2 操作进行单元测试（命中一个真实的数据库），但我无法成功连接到数据库。

我是 Spring 新手，项目设置在多个 bean 和 DAO 类中使用 jdbctemplate。

到目前为止，这是我的尝试：

测试类：

```
 public class Test extends StrutsSpringTestCase {

    private static final String serverURL = "jdbc:db2://xxxx.xxx.com:----/xxxx";
    private static final String username = "xxxxxxx";
    private static final String password = "xxxxxxx";

    @Override
    public String[] getContextLocations() {

    SimpleNamingContextBuilder s = new SimpleNamingContextBuilder();

    DB2SimpleDataSource db=new DB2SimpleDataSource(); 

    try {
    DriverManager.registerDriver( new com.ibm.db2.jcc.DB2Driver() );
    } catch (SQLException e2) {
    // TODO Auto-generated catch block
    e2.printStackTrace();
    }

    try {
    Class.forName("com.ibm.db2.jcc.DB2DataSource");
    } catch (ClassNotFoundException e1) {
    // TODO Auto-generated catch block
    e1.printStackTrace();
    }

    db.setServerName(serverURL);
    db.setPortNumber(----);
    db.setUser(username);
    db.setPassword(password);

    try {

    Hashtable env = new Hashtable();
    env.put(Context.INITIAL_CONTEXT_FACTORY,
     "com.ibm.websphere.naming.WsnInitialContextFactory");
    env.put(Context.PROVIDER_URL, "iiop://xxxx.xxx.com:----");
    Context ctx = new InitialContext(env);

    Context javaCtx = ctx.createSubcontext("jdbc");
    javaCtx.bind("xxx", db);
    ctx.bind("java:", javaCtx);

    } catch (IllegalStateException e) {
    e.printStackTrace();
    } catch (NamingException e) {
    e.printStackTrace();
    }

    String[] locations = new String[1];

    locations[0] = "xxxx.xml";

    return locations;
    }

    public void test() throws Exception {

    ActionProxy proxy = getActionProxy("/test");

    testAction rd = (testAction) proxy.getAction();

    System.out.println(rd.testMethod());

    }
    } 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:p="http://www.springframework.org/schema/p"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/aop
http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd">

<bean name="jndi" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="jdbc/XXX" />
</bean>

<bean name="dataSource"     class="org.springframework.jdbc.datasource.DriverManagerDataSource">
<property name="driverClassName" value="com.ibm.db2.jcc.DB2Driver"/>
<property name="url" value="jdbc:db2://----.---.com:xxxx/xxxx"/>
<property name="username" value="xxxxxxxx"/>
<property name="password" value="xxxxxxxx"/>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
<constructor-arg>
    <ref bean="dataSource" />
</constructor-arg>

</bean>

<bean id="xxxxDao"
    class="xxxx">
    <property name="jdbcTemplate" ref="jdbcTemplate" />
</bean> 
```

（继续使用其他与 DAO 相关的 bean）。

许多类都依赖于 JdbcTemplate，如下所示，所以我想找到一个包含它的解决方案：

```
private JdbcTemplate jdbcTemplate;
private String schemaName = "xxxxxx";
private String procedureName = "xxxxxx";

public void setJdbcTemplate(JdbcTemplate jdbcTemplate) {
    this.jdbcTemplate = jdbcTemplate;
}

public RDResponseBO browseRD(RDRequestBO rdReqBO) {
    SimpleJdbcCall storedProc = new SimpleJdbcCall(jdbcTemplate)
            .withSchemaName(schemaName)
            .withoutProcedureColumnMetaDataAccess().withProcedureName(
                    procedureName); ......... 
```

我的 applicationContext.xml 包含一个数据源和一个 jndi bean，这有点多余。我不知道是否可以在 JdbcTemplate 中将它们结合起来以使连接成功。

单独使用数据源会导致缺少元数据/jdbc 异常......虽然我想使用 jndiobjectfactorybean 类，但如果不通过服务器运行，bean 不会在 JUnit 中初始化。

我尝试在 jdbctemplate bean 中包含 jndi bean（在调用 simplenamingcontextbuilder 之后），这导致了匹配的构造函数异常。

想法/建议？

PS如果问题格式有点不对，我很抱歉，我也是stackoverflow的新手。

jndi bean 错误的堆栈跟踪：

```
 .springframework.beans.factory.BeanCreationException: Error creating bean with name 'jdbcTemplate' defined in class path resource [beans.xml]: Could not resolve matching constructor (hint: specify index/type/name arguments for simple parameters to avoid type ambiguities)
            at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:250)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1003)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:907)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485)
            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
            at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
            at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
            at org.apache.struts2.StrutsSpringTestCase.setupBeforeInitDispatcher(StrutsSpringTestCase.java:39)
            at org.apache.struts2.StrutsTestCase.setUp(StrutsTestCase.java:187)
            at junit.framework.TestCase.runBare(TestCase.java:128)
            at junit.framework.TestResult$1.protect(TestResult.java:106)
            at junit.framework.TestResult.runProtected(TestResult.java:124)
            at junit.framework.TestResult.run(TestResult.java:109)
            at junit.framework.TestCase.run(TestCase.java:120)
            at junit.framework.TestSuite.runTest(TestSuite.java:230)
            at junit.framework.TestSuite.run(TestSuite.java:225)
            at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
            at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
            at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196) 
```

使用 SimpleNamingContextBuilder 之前的 JNDI 错误：

```
 org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jndi' defined in class path resource [beans.xml]: Invocation of init method failed; nested exception is com.ibm.websphere.naming.CannotInstantiateObjectException: Exception occurred while the JNDI NamingManager was processing a javax.naming.Reference object. [Root exception is java.lang.NoClassDefFoundError: com.ibm.wsspi.runtime.service.WsServiceRegistry]
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
                at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293)
                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290)
                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192)
                at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
                at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)
                at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425)
                at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
                at org.apache.struts2.StrutsSpringTestCase.setupBeforeInitDispatcher(StrutsSpringTestCase.java:39)
                at org.apache.struts2.StrutsTestCase.setUp(StrutsTestCase.java:187)
                at junit.framework.TestCase.runBare(TestCase.java:128)
                at junit.framework.TestResult$1.protect(TestResult.java:106)
                at junit.framework.TestResult.runProtected(TestResult.java:124)
                at junit.framework.TestResult.run(TestResult.java:109)
                at junit.framework.TestCase.run(TestCase.java:120)
                at junit.framework.TestSuite.runTest(TestSuite.java:230)
                at junit.framework.TestSuite.run(TestSuite.java:225)
                at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
                at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
            Caused by: com.ibm.websphere.naming.CannotInstantiateObjectException: Exception occurred while the JNDI NamingManager was processing a javax.naming.Reference object. [Root exception is java.lang.NoClassDefFoundError: com.ibm.wsspi.runtime.service.WsServiceRegistry]
                at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:1033)
                at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookup(Helpers.java:730)
                at com.ibm.ws.naming.jndicos.CNContextImpl.processResolveResults(CNContextImpl.java:3691)
                at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1861)
                at com.ibm.ws.naming.jndicos.CNContextImpl.doLookup(CNContextImpl.java:1762)
                at com.ibm.ws.naming.jndicos.CNContextImpl.lookupExt(CNContextImpl.java:1513)
                at com.ibm.ws.naming.jndicos.CNContextImpl.lookup(CNContextImpl.java:645)
                at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:166)
                at com.ibm.ws.naming.util.WsnInitCtx.lookup(WsnInitCtx.java:180)
                at javax.naming.InitialContext.lookup(InitialContext.java:455)
                at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
                at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
                at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
                at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
                at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
                at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
                at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
                at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
                ... 25 more
            Caused by: java.lang.NoClassDefFoundError: com.ibm.wsspi.runtime.service.WsServiceRegistry
                at com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl$2.run(WSManagedConnectionFactoryImpl.java:835)
                at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:118)
                at com.ibm.ws.rsadapter.spi.WSManagedConnectionFactoryImpl.<init>(WSManagedConnectionFactoryImpl.java:840)
                at java.lang.J9VMInternals.newInstanceImpl(Native Method)
                at java.lang.Class.newInstance(Class.java:1325)
                at com.ibm.ejs.j2c.ConnectionFactoryBuilderImpl.createMCF(ConnectionFactoryBuilderImpl.java:1491)
                at com.ibm.ejs.j2c.ConnectionFactoryBuilderImpl.processObjectInstance(ConnectionFactoryBuilderImpl.java:746)
                at com.ibm.ejs.j2c.ConnectionFactoryBuilderImpl.processObjectInstance(ConnectionFactoryBuilderImpl.java:705)
                at com.ibm.ejs.j2c.ConnectionFactoryBuilderImpl.getObjectInstance(ConnectionFactoryBuilderImpl.java:664)
                at javax.naming.spi.NamingManager.getObjectInstanceByFactoryInReference(NamingManager.java:485)
                at javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:350)
                at com.ibm.ws.naming.util.Helpers.processSerializedObjectForLookupExt(Helpers.java:927)
                ... 44 more
            Caused by: java.lang.ClassNotFoundException: com.ibm.wsspi.runtime.service.WsServiceRegistry
                at java.lang.ClassNotFoundException.<init>(ClassNotFoundException.java:77)
                at java.net.URLClassLoader.findClass(URLClassLoader.java:383)
                at java.lang.ClassLoader.loadClass(ClassLoader.java:652)
                at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:346)
                at java.lang.ClassLoader.loadClass(ClassLoader.java:618)
                ... 56 more 
```

* * *

```
 javax.naming.CommunicationException: A communication failure occurred while attempting to obtain an initial context with the provider URL: "iiop://xxxx.xxx.com:----".  Make sure that any bootstrap address information in the URL is correct and that the target name server is running.  A bootstrap address with no port specification defaults to port 2809\.  Possible causes other than an incorrect bootstrap address or unavailable name server include the network environment and workstation network configuration. [Root exception is org.omg.CORBA.COMM_FAILURE: purge_calls:1988 Reason: CONN_ABORT (1), State: ABORT (5)  vmcid: IBM  minor code: 306 completed: Maybe]
                at com.ibm.ws.naming.util.WsnInitCtxFactory.mapInitialReferenceFailure(WsnInitCtxFactory.java:2269)
                at com.ibm.ws.naming.util.WsnInitCtxFactory.getWsnNameService(WsnInitCtxFactory.java:1457)
                at com.ibm.ws.naming.util.WsnInitCtxFactory.getRootContextFromServer(WsnInitCtxFactory.java:987)
                at com.ibm.ws.naming.util.WsnInitCtxFactory.getRootJndiContext(WsnInitCtxFactory.java:909)
                at com.ibm.ws.naming.util.WsnInitCtxFactory.getInitialContextInternal(WsnInitCtxFactory.java:581)
                at com.ibm.ws.naming.util.WsnInitCtx.getContext(WsnInitCtx.java:124)
                at com.ibm.ws.naming.util.WsnInitCtx.getContextIfNull(WsnInitCtx.java:799)
                at com.ibm.ws.naming.util.WsnInitCtx.createSubcontext(WsnInitCtx.java:370)
                at com.ibm.ws.naming.util.WsnInitCtx.createSubcontext(WsnInitCtx.java:385)
                at javax.naming.InitialContext.createSubcontext(InitialContext.java:523)
                at junit.Test.getContextLocations(Test.java:88)
                at org.apache.struts2.StrutsSpringTestCase.setupBeforeInitDispatcher(StrutsSpringTestCase.java:39)
                at org.apache.struts2.StrutsTestCase.setUp(StrutsTestCase.java:187)
                at junit.framework.TestCase.runBare(TestCase.java:132)
                at junit.framework.TestResult$1.protect(TestResult.java:110)
                at junit.framework.TestResult.runProtected(TestResult.java:128)
                at junit.framework.TestResult.run(TestResult.java:113)
                at junit.framework.TestCase.run(TestCase.java:124)
                at junit.framework.TestSuite.runTest(TestSuite.java:232)
                at junit.framework.TestSuite.run(TestSuite.java:227)
                at org.junit.internal.runners.OldTestClassRunner.run(OldTestClassRunner.java:76)
                at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45)
                at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386)
                at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)
            Caused by: org.omg.CORBA.COMM_FAILURE: purge_calls:1988 Reason: CONN_ABORT (1), State: ABORT (5)  vmcid: IBM  minor code: 306 completed: Maybe
                at com.ibm.rmi.iiop.Connection.purge_calls(Connection.java:1987)
                at com.ibm.rmi.iiop.Connection.doReaderWorkOnce(Connection.java:3134)
                at com.ibm.rmi.transport.ReaderThread.run(ReaderPoolImpl.java:138) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:16:59.900

用这个替换你的

```
 <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource" ref="dataSource" />
 </bean> 
```

# xml - 来自网页 xmlLib Error / msxml3 & msxml6 的消息

> ID：10987531
> 
> 赞同：0
> 
> 时间：2012-06-11T21:06:30.267
> 
> 标签：xml, database-connection, msxml, msxml6, msxml3

在工作中，一些用户在尝试运行某个基于 Web 的数据库时遇到 xmlLib 错误。我们曾经在运行 Windows XP 机器时得到它，但能够通过将更高版本的 msxml3.dll 替换为包含我们需要的某些安全功能的新版本来修复。现在所有的 Windows 7 机器都出现了问题，但旧的修复显然不起作用。起初我认为这可能是因为在 Windows 7 中不再调用 dllcache 文件夹，这是正确的，但更改路径以反映更改并不能解决问题。我倾向于不在 Windows 7 中使用 msxml3.dll，并且它必须是更新版本的 msxml6.dll？我想这样想的另一个原因是因为不久前我最初准备处理这个问题时，因为更重要的事情出现而退出，我正在阅读对 msxml3.dll 的代码引用，但没有关于此 dll 的较新版本。我也一直在通过谷歌在网上搜索，但还没有想出足够接近的东西来尝试。再说一次，虽然我对 XML 不太擅长，所以我可能在胡说八道。请参阅下面的错误消息。

> 来自网页的消息
> 
> xmlLib 错误：updateGram 响应不是有效的 xml。检查您的文档和路径。-1072896682 - 在文档的顶层无效。

对我来说，即使根据我有限的 XML 知识，该错误似乎也显示了到数据库的无效连接路径。

有人认为对代码进行验证会有所帮助吗？我没有编写代码也没有帮助它，所以我不能说它是否完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T06:58:34.610

-1072896682 (XML_E_INVALIDATROOTLEVEL, 0xC00CE556) 通常意味着当 XML 包含 DTD 处理时禁止处理。您可以通过调试代码来检查是否设置了[ProhibitDTD](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762632%28v=vs.85%29.aspx)以及 XML 是否包含 DTD 来验证这一点。要解决此问题，您可以将其关闭或从 XML 中删除 DTD。

# c# - 我可以使用对象列表作为字典键吗？

> ID：10987536
> 
> 赞同：5
> 
> 时间：2012-06-11T21:06:59.790
> 
> 标签：c#

```
// No overrides required .. let CLR take care of equal and hashcode.
Class Foo {public Name{get; set;} public Address{get; set;}} 

Dictionary<List<Foo>, int> map = new Dictionary<List<Foo>, int>(); 
```

问题：

这段代码看起来好吗？我知道要成为 Map 中的键， Foo 需要覆盖 equals 和 hashcode 方法 - 要么覆盖两者，要么不覆盖。

我想知道 List of objects as keys 怎么样？当涉及到 List 时，平等意味着什么？上面定义的地图是否不受“地图中的对象丢失”问题的影响？

-卡勒菲尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:08:51.607

这仅在您使用原始`List<T>`实例作为键时才有效。
如果您`List<T>`使用相同的项目创建一个新的，它将不会被视为相同的键，因为 `List<T>`不会覆盖`Equals()`and `GetHashCode()`。

换句话说，它将使用引用相等。

如果你想改变它，你可以写一个`IEqualityComparer<List<T>>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:12:41.980

```
List<int> a = new List<int>(1, 2, 3);
List<int> b = new List<int>(1, 2, 3); //different instance than a

Dictionary<List<int>, int>> map = new Dictionary<List<int>, int>>();
map.Add(a, a.Sum());
int aSum = map[b]; //KeyNotFoundException because this is a different instance.

HashSet<int> a = new HashSet<int>(1, 2, 3);
HashSet<int> b = new HashSet<int>(1, 2, 3); //different instance than a

Dictionary<HashSet<int>, int>> map1 = new Dictionary<HashSet<int>, int>>();
map1.Add(a, a.Sum());
int aSum = map1[b]; //KeyNotFoundException because this is a different instance.

HashSet<int> a = new HashSet<int>(1, 2, 3);
HashSet<int> b = new HashSet<int>(1, 2, 3); //different instance than a

Dictionary<HashSet<int>, int>> map2 = new Dictionary<HashSet<int>, int>>
  (HashSet<int>.CreateSetComparer()); //instance comparison not used - equal sets are equal
map2.Add(a, a.Sum());
int aSum = map2[b]; //6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:10:26.357

当然，你*可以*，但那将是***非常***有限的。简单地说，一个组合的列表`Foo`，即使列表元素都相同`Foo`，也不一定相同`List<Foo>`。因此，您需要以某种明确的方式保留引用以确保密钥相同，或者制作复杂的密钥匹配功能。

简单地使用更好的密钥类型会*好得多。*

# javascript - 使用 javascript 从数据库中检索到的数据

> ID：10987537
> 
> 赞同：0
> 
> 时间：2012-06-11T21:07:00.647
> 
> 标签：javascript, function, node.js

我有这个代码

```
App.Model('users').find(function (err, users) {
        users.forEach(function(user) {
        console.log(user.username);
    });
});

//make usernames availible here. 
```

此控制台记录用户名。我想利用数据而不是仅仅登录到控制台。

但是怎么能做到这一点呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:25:16.007

它们永远不会出现在您想要的地方。这不是 async/node.js 编程的工作方式。

可能的：

```
App.Model('users').find(function (err, users) {
    users.forEach(function(user) {
        myCallBack(user);
    });
});

var myCallBack = function(user) {
    //make usernames availible here.
    //this will be called with every user object
    console.log(user);
} 
```

其他可能性：[EventEmitter](http://nodejs.org/api/events.html)，流控制库（例如[async](https://github.com/caolan/async)）。

如果您已经用其他语言编写过代码，那么您需要开放以采用全新的方法来处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:20:10.760

使用节点 js，您不会这样做：

```
//make usernames availible here. 
```

你做：

```
App.Model('users').find(function (err, users) {
    //usernames are available here. Pass them somewhere. Notify some subscribers that you have data.
});

//The code here has executed a long time ago 
```

# c# - 通过绑定隐藏 WPF Expander 上的 ToggleButton

> ID：10987538
> 
> 赞同：4
> 
> 时间：2012-06-11T21:07:28.083
> 
> 标签：c#, wpf, xaml, expander

我正在尝试使用 ViewModel 上设置为 Visibility 属性的属性动态隐藏扩展器上的切换按钮。至少这是我的想法。有没有办法只更改 ToggleButton 控件上的一个设置，而不必在我的 xaml 中执行 Toggle Button 的整个模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:54:26.070

您可以使用`Loaded`事件`Expander`并在事件处理程序中设置，`Binding`或者如果您想要一种无需代码的可重用方式，您可以使用附加行为。

附加行为找到`ToggleButton`内部`Template`并设置`Binding`附加属性`ToggleButtonVisibility`。

在此处上传了一个示例应用程序：[ExpanderToggleButtonVisibilityTest.zip](https://dl.dropbox.com/u/39657172/ExpanderToggleButtonVisibilityTest.zip)

像这样使用它

```
<Expander Name="expander"
          behaviors:ExpanderBehavior.BindToggleButtonVisibility="True"
          behaviors:ExpanderBehavior.ToggleButtonVisibility="{Binding YourVisibilityProperty}"
          .../> 
```

*扩展器行为*

```
public class ExpanderBehavior
{
    public static DependencyProperty BindToggleButtonVisibilityProperty =
        DependencyProperty.RegisterAttached("BindToggleButtonVisibility",
                                            typeof(bool),
                                            typeof(ExpanderBehavior),
                                            new PropertyMetadata(false, OnBindToggleButtonVisibilityChanged));

    public static bool GetBindToggleButtonVisibility(Expander expander)
    {
        return (bool)expander.GetValue(BindToggleButtonVisibilityProperty);
    }
    public static void SetBindToggleButtonVisibility(Expander expander, bool value)
    {
        expander.SetValue(BindToggleButtonVisibilityProperty, value);
    }

    private static void OnBindToggleButtonVisibilityChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        Expander expander = target as Expander;
        if (expander.IsLoaded == true)
        {
            BindToggleButtonVisibility(expander);
        }
        else
        {
            RoutedEventHandler loadedEventHandler = null;
            loadedEventHandler = new RoutedEventHandler(delegate
            {
                BindToggleButtonVisibility(expander);
                expander.Loaded -= loadedEventHandler;
            });
            expander.Loaded += loadedEventHandler;
        }
    }

    private static void BindToggleButtonVisibility(Expander expander)
    {
        ToggleButton headerSite = expander.Template.FindName("HeaderSite", expander) as ToggleButton;
        if (headerSite != null)
        {
            Binding visibilityBinding = new Binding
            {
                Source = expander,
                Path = new PropertyPath(ToggleButtonVisibilityProperty)
            };
            headerSite.SetBinding(ToggleButton.VisibilityProperty, visibilityBinding);
        }
    }

    #region ToggleButtonVisibilityProperty

    public static DependencyProperty ToggleButtonVisibilityProperty = 
        DependencyProperty.RegisterAttached("ToggleButtonVisibility",
                                            typeof(Visibility),
                                            typeof(ExpanderBehavior),
                                            new PropertyMetadata(Visibility.Visible));

    public static Visibility GetToggleButtonVisibility(Expander expander)
    {
        return (Visibility)expander.GetValue(ToggleButtonVisibilityProperty);
    }
    public static void SetToggleButtonVisibility(Expander expander, Visibility value)
    {
        expander.SetValue(ToggleButtonVisibilityProperty, value);
    }

    #endregion // ToggleButtonVisibilityProperty
} 
```

# matlab - 如何计算复杂路径上两点之间的距离？

> ID：10987540
> 
> 赞同：1
> 
> 时间：2012-06-11T21:07:30.303
> 
> 标签：matlab

我有一组定义 W 形状的线条。在每一行上，我定义了一组`M`由固定宽度分隔的点。现在我想计算`MxM`距离矩阵，其中 的值`(i,j)`包含`along-the-path-distance`点之间的`i`和`j`。

这是`along-the-path-distance`两点之间的一个。

![在此处输入图像描述](../Images/bfa2678d00f227274e203ee30672303e.png)

如何在 Matlab 中计算这个距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:21:22.450

它主要归结为仅适用于这种形状的简单算法是否足够，或者您是否还需要找到具有不同复杂路径的距离。如果只是这个形状，那就太琐碎了

这里 yHoriz 是连接垂直线的水平线的 y 值，x 和 y I 和 J 是点 i 和 j 的 x 和 y 值。

```
distance= abs(yI - yHoriz) + abs(xJ-xI) + abs(yJ - yHoriz) 
```

您需要检查这些点是否在同一条垂直线上，如果它们在同一条线上，则只需找到它们 y 值的差异而不是上述值。

# matlab - 在matlab中将单元格转换为数组

> ID：10987542
> 
> 赞同：6
> 
> 时间：2012-06-11T21:07:44.960
> 
> 标签：matlab, number-formatting

我有一个大小为 400x1 的单元格。它基本上由字符串形式的数字组成。我的意思是当我这样做的时候

```
mycell{1} 
```

它给出了结果`'1'`

所以你可以看到数字 1 是字符串的形式。如何将其转换为数值数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T21:11:48.687

```
str2double(mycell) 
```

假设你有一系列看起来像双打的东西：

```
>> c = {'1' '2' ; '3' '4'}

c = 

    '1'    '2'
    '3'    '4'

>> str2double(c)

ans =

     1     2
     3     4

>> whos ans
  Name      Size            Bytes  Class     Attributes

  ans       2x2                32  double 
```

如果你有一些看起来不像双精度的东西，你会`NaN`在结果中的那个单元格中得到一个：

```
>> c{2,2} = 'aei'

c = 

    '1'    '2'  
    '3'    'aei'

>> str2double(c)

ans =

     1     2
     3   NaN 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T21:09:29.220

如果`size(mycell)`是 400x1 ，就像这样。. . . .

```
str2num(cell2mat(mycell)) 
```

...或者如果尺寸是 1x400 则像这样

```
str2num(cell2mat(mycell')) 
```

但是，如果您的任何字符串包含不同数量的字符，这将导致问题，即

```
mycell{1} = '2'
mycell{2} = '33' 
```

如果你有这样的情况，

```
str2double(mycell) 
```

...似乎可以处理这个问题，如另一个答案中所述！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-05T14:59:48.793

您也可以尝试`cellfun(@str2num,mycell)` 如果您有一个双精度元胞数组：

`mycell = {'1.56548524'; '1.5265'; '-4.2616' ;'-0.2154' ;'2.15'};`

you can try

`mat = cellfun(@str2num,mycell)`

# xmpp - 在 Smack 中将实体功能附加到数据包

> ID：10987545
> 
> 赞同：1
> 
> 时间：2012-06-11T21:07:52.067
> 
> 标签：xmpp, smack

我一辈子都看不到如何将实体功能扩展附加到 Smack 数据包。就我而言，我已经准备好数据了，我只需要把它放在 Packet 类中。

我是否错过了 API 中的某些内容？我可以将`<c/>`元素添加到 smack 数据包中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:21:52.630

有一个补丁添加了实体功能支持。Smack 中的集成被跟踪为[SMACK-361](http://issues.igniterealtime.org/browse/SMACK-361)，补丁可以在[论坛帖子中找到。](http://community.igniterealtime.org/message/219006#219006)

该补丁包含在[我的 smack fork](https://github.com/flowdalic/smack)中（由[aSmack](https://github.com/flowdalic/asmack)使用）。在 CapsExtension 的帮助下，该`<c/>`元素被添加到[ServiceDiscoveryManager.java:258中。](https://github.com/Flowdalic/smack/blob/master/source/org/jivesoftware/smackx/ServiceDiscoveryManager.java#L258)我仍在`caps`分行的 Smack 中致力于实体上限支持，并希望在未来的某个时间能够实现它。`git diff upstream caps`克隆存储库后，您可以使用 git 查看当前补丁。如果您有任何建议，请随时与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:27:29.320

Smack 似乎不支持开箱即用的此功能。你必须自己实现它。定义一个实现[PacketExtension](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/packet/PacketExtension.html)的类，在发送您的出席信息时创建一个新的实例并使用[addExtension](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/packet/Packet.html#addExtension%28org.jivesoftware.smack.packet.PacketExtension%29)附加它。

# cocoa-touch - 如何在 UITableView 滚动端上方或下方的额外空间显示信息

> ID：10987546
> 
> 赞同：0
> 
> 时间：2012-06-11T21:07:57.260
> 
> 标签：cocoa-touch, uitableview

我看到一些应用程序在进一步滚动到`UITableView`.

我怎样才能`UILabel`在这个区域显示一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:14:47.483

将您的 frame 属性设置为`UILabel`如下`UITableView`所示：

```
label.frame = CGRectMake(0, -40, 320, 40); 
```

...并确保`clipsToBounds`您的表格视图的属性设置为`NO`.

# java - 将 jRuby.jar 保存在内存中

> ID：10987549
> 
> 赞同：0
> 
> 时间：2012-06-11T21:08:05.960
> 
> 标签：java, tomcat, jruby, tomcat7

我在我的 tomcat 7 java 应用程序中编写了简单的 jRuby scriptlets 支持。如果我调用第一次使用 jRuby 的页面，它会加载大约 3-7 秒。下次加载速度更快。但是，经过一段时间 jRuby 从内存中卸载，并在请求后我再次等待 3-7 秒。

是否存在任何方法可以始终将 jRuby 保留在内存中而无需卸载？

PS。当前的tomcat运行选项：

> -Xmx2048M -Xms2048M -XX:ParallelGCThreads=8 -Xincgc -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSIncrementalPacing -XX:+AggressiveOpts -XX:+CMSParallelRemarkEnabled -XX:+DisableExplicitGC -XX:MaxGCPauseMillis=500 -XX :SurvivorRatio=16 -XX:TargetSurvivorRatio=90 -XX:+UseAdaptiveGCBoundary -XX:-UseGCOverheadLimit -Xnoclassgc -XX:UseSSE=3 -XX:PermSize=512m -XX:LargePageSizeInBytes=4m

我正在使用 Oracle java 6u26。

# mysql - MySQL/PHP 检查活动关系

> ID：10987553
> 
> 赞同：0
> 
> 时间：2012-06-11T21:08:16.737
> 
> 标签：mysql, relationship, database-relations

我有 2 张大桌子，我需要检查它们之间有多少关系仍然处于活动状态。第一个表是一个关系表，其中包含大约 100k 行（ID、ID_something1、ID_something2）。第二个表稍大一些，大约有 600 万个与特定关系相关的条目。随着时间的推移，一些关系被删除，但数据仍然存在。现在我很好奇有多少数据仍然完好无损。

所以我写了类似的东西：

```
SELECT count(tab_data.id) 
FROM tab_data, tab_rel
WHERE tab_data.id_rel = tab_rel.id 
```

我在不到几秒钟的时间内得到了一个很好的（可信的）答案。

然后我开始质疑上面的 WHERE 子句的准确性，并将其改写为应该满足我需求的东西。所以我最终得到了这个：

```
SELECT count(tab_data.id) 
FROM tab_data, tab_rel
WHERE tab_data.id_rel IN 
(SELECT ID FROM tab_rel) 
```

简而言之（呃），经过半小时的 CPU 折磨，我关闭了 MySQL 服务器并重新启动它：S 从那时起，我读到 MySQL 中的 WHERE IN 子句存在（或曾经）问题，所以我我想我不会再尝试那个了。

IMO 这两个查询应该是相同的，但我需要 100% 确定。所以我真正需要的是，有人来证实我的预感并告诉我一些事情：“别担心，这两个会给出相同的结果！”

当我们使用它时......该表只是称为关系表，因为这就是我使用它的目的。但我没有设置任何外键。我会通过添加这些来获得任何与时间相关的东西，还是我也必须重新编码一些东西？（在阅读您的答案之前，我可能会对此进行研究，但是由于您已经阅读了所有这些内容，因此您可以投入 2 美分：D）

# javascript - 仅当表单输入没有值时才更新 div（使用 AJAX）

> ID：10987560
> 
> 赞同：0
> 
> 时间：2012-06-11T21:08:57.670
> 
> 标签：javascript, jquery, ajax

我有一个显示在特定页面上的结果列表，这些结果使用简单的 AJAX 请求定期更新。输入表单允许我过滤这些结果，但是由于数据每隔几秒钟更新一次，输入表单在刷新所有数据时无法正常工作。当表单输入字段中有值时，AJAX 是否有任何方法不更新？

下面是 HTML 代码：

```
<div id="my-query-results" class="visible">
  <div>
    <form class="searchboxInput" action="#">
      <input id="kwd-my-query-results" type="text" value="">
    </form>
  </div>
  <div id="my_recent_queries">
    <span class="loading_placeholder">Loading ...</span><br />
    <img src="../img/ajax-loader.gif" />
  </div>
</div> <!-- my query results --> 
```

下面是我使用的 AJAX 请求：

```
if( $("#kwd-my-query-results").val() != "") {
  function updateMyQueries() {
    $.ajax({
      url: "/myrecentqueries",
      cache: false,
      success: function(html){
        $("#my_recent_queries").html(html);
      }
    });
    setTimeout("updateMyQueries()", 600000);
  }
  updateMyQueries();
} else {
  function updateMyQueries() {
    $.ajax({
      url: "/myrecentqueries",
      cache: false,
      success: function(html){
        $("#my_recent_queries").html(html);
      }
    });
    setTimeout("updateMyQueries()", 4000);
  }
  updateMyQueries();
} 
```

上面的 if else 语句似乎不起作用。一旦输入框中出现值，它将评估 else 语句。我想我也尝试过 length()，但这似乎也不起作用。还有其他方法可以解决这个问题吗？

**更新**

鉴于以下建议，我尝试了以下方法，并且在某种程度上有效。它最初加载结果，允许我在不重新加载数据的情况下搜索它们，但是即使输入字段中没有文本，它也不会定期重新加载结果......

```
$(function(){
  setTimeout(updateMyQueries(), 4000);
});

function updateMyQueries(){
  if ($("#kwd-my-query-results").val() == "") {
    // do ajax call
    $.ajax({
      url: "/myrecentqueries",
      cache: false,
      success: function(html){
        $("#my_recent_queries").html(html);
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:32:59.370

我将从将 updateMyQueries 函数移出 if 语句开始，然后可能是这样的。

```
$(function(){
     SetInterval(updateMyQueries(), 4000):
})

function updateMyQueries(){
    if($("#kwd-my-query-results").Val() == ""){
          // do ajax call
    }
} 
```

编辑 - 这将工作

```
setInterval(function (){    
    if($("#search").val() == ""){
           // Ajax call here
        }
    }, 4000); 
```

​</p>

# c++ - 用不克隆进程内存的调用替换 system 和 popen 调用

> ID：10987563
> 
> 赞同：4
> 
> 时间：2012-06-11T21:09:23.187
> 
> 标签：c++, memory, system, popen

我正在编写对内存宽度和性能敏感的多线程服务器。因此，我需要标准`system()`和`popen()`不使用`fork()`克隆所有进程内存的调用的替代方案，这通常需要太多时间。

看来，需要用`vfork()`the ​​n`execve()`来制作。

**有人可以帮助我完成两个功能：**

*   更换`system()`通话。***行为示例：****一个线程调用要执行的函数，例如`touch filename`，调用线程等待执行结束。（所有其他线程必须继续工作）*
*   替换`popen()`调用***行为示例：****相同的行为，但需要获取命令的输出，例如`ls -flags`*（此代码的替代方法：[正确代码 - 带有 popen 的非阻塞管道](https://stackoverflow.com/questions/10962044/correct-code-non-blocking-pipe-with-popen)）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:41:03.533

这只是关于如何处理您提出的解决方案的建议。对于您询问的两个具体操作：

*   `touch`：可以通过打开和关闭要触摸的文件来达到类似的效果
    *   小心不要在上面使用`O_TRUNC`标志`open`
*   `ls`: 有点痛苦，因为你需要`dirent.h`在POSIX系统上使用，并且走结果
    *   `opendir`
    *   `readdir`
    *   `closedir`完成后一定要打电话

如果您想用等效的 using替换`system`and调用，则需要小心。这个调用使用起来有点棘手，因为如果孩子在调用之后做任何事情，你就有可能破坏父母的记忆状态。`popen``vfork``vfork``exec`

为了您的替换`system`：

*   创建一个帮助程序来执行参数中提供的字符串
    *   帮助程序既可以调用`system`提供的参数，也可以解析命令字符串并调用`exec`
*   在您的`system`替换函数中，创建一个 arg 向量来调用帮助程序并传入您真正想要执行的程序字符串作为该程序的参数
*   在你打电话后`vfork`，你立即`exec`在孩子的助手程序中
*   父母等待孩子完成

在您的`popen`替代品中：

*   `stdout`创建一个接受和`stdin`文件描述符作为参数 的帮助程序，以及您要执行的命令的字符串
    *   助手程序将把传入的描述符复制到`0`或`1`（或两者），如参数所示
    *   辅助程序可以使用`popen`父子之间的代理数据来执行字符串，也可以`exec`在解析命令字符串后调用
*   在您的`popen`替换函数中，用于`pipe`创建`stdout`或`stdin`通信通道（根据第二个`popen`函数参数）并创建一个 arg 向量来调用帮助程序，传入适当的文件描述符编号和命令字符串作为参数
*   在你打电话后`vfork`，你立即`exec`在孩子的帮助程序
*   您需要`pclose`替换才能获得子进程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-13T14:07:33.533

```
Another way is to use the "fork()" with "execvp()" in child process. as mentioned by @jxh

int pid = fork();

if( pid == 0)
{
// In child process
  // redirect stderr/stdinput/stdoutput
  // prepare the execution command
  //use the exec() family of functions as per specific requirement.
}
else
{
// In parent process
  // check for open pipes and close the Std Output/Input/Error pipes.
} 
```

详细参考资料

[https://www3.physnet.uni-hamburg.de/physnet/Tru64-Unix/HTML/APS33DTE/DOCU_004.HTM](https://www3.physnet.uni-hamburg.de/physnet/Tru64-Unix/HTML/APS33DTE/DOCU_004.HTM)

# ios - UINavigationController 根视图 (iOS)

> ID：10987568
> 
> 赞同：0
> 
> 时间：2012-06-11T21:09:40.873
> 
> 标签：ios, uinavigationcontroller, rootview

```
[PersonListNav pushViewController:plist animated:FALSE];Hi there! :) Googling this has returned no luck... 
```

简而言之，我有 UINavigationController (Named PersonListNav)，它在我的主 xib 内部实例化......

我还有一个名为 plist 的自定义视图控制器。

我打电话：

```
[PersonListNav pushViewController:plist animated:FALSE]; 
```

在我的应用程序委托的 didFinishLauchingWithOptions 方法中。

它工作正常！除了一件事......有一个名为“根视图控制器”的后退按钮。所以我想“好吧，IB 一定是在为我推送它自己的空视图，我需要做的就是先弹出它……”

我尝试了以下代码：

```
[PersonListNav popViewControllerAnimated:FALSE];
[PersonListNav pushViewController:plist animated:FALSE]; 
```

发现同样的事情正在发生。

作为最终测试，我尝试反转这两个调用！

```
[PersonListNav pushViewController:plist animated:FALSE];
[PersonListNav popViewControllerAnimated:FALSE]; 
```

这正如我所期望的那样工作——plist 视图控制器永远不会出现——这个“根视图控制器”是当前显示的视图。

所以，这是我的两难境地，看来我不能从我的堆栈中弹出这个根视图控制器，用别的东西代替它！您将如何以编程方式使 plist 成为根控制器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:14:35.973

在`didFinishLaunchingWithOptions` 你初始化的时候`PersonListNav`

请执行下列操作

```
//set root view controller to plist controller
PersonListNav *nav = [PersonListNav initWithRootViewController:plist];
self.window.rootViewController = nav; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:13:17.720

在您的 didFinishLaunchingWithOptions 中，您正在使用 rootViewController 创建您的 navigationController，但您可以使用自定义视图控制器创建它，您将永远不需要 rootViewController。您是否使用它为您设置的默认代码？

# cloud - 在两个 WSO2 租户之间实施 SSO

> ID：10987571
> 
> 赞同：0
> 
> 时间：2012-06-11T21:09:58.040
> 
> 标签：cloud, single-sign-on, saml, wso2

我正在尝试在多个租户之间的 WSO2 上实施 SSO 解决方案。这可能吗？如果是这样，我应该研究什么样的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:54:27.057

目前这是不可能的 OOTB。但这可以通过自定义 SAML2 身份验证器实现。在此处检查现有的 SAML2 SSO 身份验证器。

[https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0/components/authenticators/saml2-sso-authenticator/](https://svn.wso2.org/repos/wso2/branches/carbon/3.2.0/components/authenticators/saml2-sso-authenticator/)

但是IMO，这相当复杂。您如何定义哪些用户可以向哪些租户进行身份验证？

——蒂琳娜

# javascript - 没有锚点的“跳过导航”链接

> ID：10987575
> 
> 赞同：1
> 
> 时间：2012-06-11T21:10:17.410
> 
> 标签：javascript, jquery, html, accessibility

我正在尝试创建一个“跳过导航”链接，但无法使用锚点。该网站以一种特殊的方式构建，其中锚链接格式已被重新使用。所以，我试图让人们通过使用焦点来跳过导航。但是，它不起作用。

跳过导航链接本身的 HTML 代码：

```
<!-- Start Top Left in Nav Bar -->
<aside>
<a href="" onClick="javascript:skipNav()" tabindex="1" id="skipNav" role="link">Skip Navigation</a>
</aside>
<!-- End Top Left in Nav Bar --> 
```

改变焦点的代码

```
var nav = document.getElementById('#skipNav');
nav.onclick=skipNav();

function skipNav(){
     document.activeElement.blur();

    if ($('#linkHome').hasClass('current')==true)
    {
        $('#homeFocus').focus();
    }
    if ($('#linkTeam').hasClass('current')==true)
    {
        $('#teamFocus').focus();
    }
    if ($('#linkTraining').hasClass('current')==true)
    {
        $('#trainingFocus').focus();
    }
    if ($('#linkTesting').hasClass('current')==true)
    {
        $('#testingFocus').focus();
    }
    if ($('#linkRemediation').hasClass('current')==true)
    {
        $('#remediationFocus').focus();
    }
    if ($('#linkContact').hasClass('current')==true)
    {
        $('#contactFocus').focus();
    }

}; 
```

更改页面和标记当前页面的脚本

```
var FluidNav = {
init: function() {
    $('a[href*="#"]').click(function(e) {
        e.preventDefault();
        if($(this).attr("href").split("#")[1]) {
            FluidNav.goTo($(this).attr("href").split("#")[1]);
        }
    });
    this.goTo("home");
},
goTo: function(page) {
    var next_page = $("#"+page);
    var nav_item = $('nav ul li a[href=#'+page+']');
    $("nav ul li").removeClass("current");
    nav_item.parent().addClass("current");
    FluidNav.resizePage((next_page.height() + 40), true, function() {
         $(".page").removeClass("current"); next_page.addClass("current"); 
    });
    $(".page").fadeOut(500);
    next_page.fadeIn(500);
    document.activeElement.blur();
    $('#'+page+'Focus').focus();

    FluidNav.centerArrow(nav_item);

},
centerArrow: function(nav_item, animate) {
    var left_margin = (nav_item.parent().position().left + nav_item.parent().width()) + 24 - (nav_item.parent().width() / 2);
    if(animate != false) {
        $("nav .arrow").animate({
            left: left_margin - 8
        }, 500, function() { $(this).show(); });
    } else {
        $("nav .arrow").css({ left: left_margin - 8 });
    }
},
resizePage: function(size, animate, callback) {
    if(size) { var new_size = size; } else { var new_size = $(".page.current").height() + 40; }
    if(!callback) { callback = function(){}; }
    if(animate) {
        $("#pages").animate({ height: new_size }, 400, function() { callback.call(); }); 
    } else {
        $("#pages").css({ height: new_size }); 
    }
}
};

 $("nav select").change(function() {
    if(this.options[this.selectedIndex].value != "#") {
        var page = this.options[this.selectedIndex].value.split("#")[1];
        FluidNav.goTo(page);
        $("html,body").animate({ scrollTop:$('#'+page).offset().top }, 700);
    }
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:18:25.007

听起来你正在尝试做一个“动态跳过链接”，你在运行时确定目标？

```
<a href="" onClick="javascript:skipNav()" tabindex="1" id="skipNav" role="link">Skip Navigation</a> 
```

问题是，当您单击链接时，会发生导航。A`href=""`不会阻止导航，它只是意味着您最终导航到当前页面 - 这将重置焦点。这发生在您的单击事件处理程序之后。因此，即使您可以正确地将焦点设置在您想要的位置，但当页面重新加载时，它最终会“丢失”。

有两种方法可以防止这种情况发生：一种是使用`href="javascript:void(0)"`-`href`指定导航的位置，如果评估为 void，则浏览器根本不会导航。

一种更简洁的方法是告诉浏览器不要在事件处理程序中执行默认操作：

```
function skipNav(e)
{
    e.preventDefault(); // prevent default action - link navigation - from taking place
    ... 
```

--

代码的其他几个问题：

不用担心- 保存这些属性`role="link"`以`A`备不时之需。要知道的关键是屏幕阅读器已经知道如何处理以标准方式使用的所有标准 HTML 元素。因此，如果您使用 an 作为链接或 a 作为按钮，则无需添加角色。

但是，如果您正在创建一个普通 DIV 的新控件，或者如果您将 HTML 元素重新用于不同用途，那么您需要一个角色属性来告诉屏幕阅读器您*实际上是*如何使用该元素的。

例如，具有 onclick 处理程序并且行为类似于按钮的 DIV 需要 role="button"，否则屏幕阅读器可能会忽略它或只说一些通用的东西，例如“元素”。或者，如果您正在从 A 标记创建一个按钮，并且从用户的角度来看，它最终表现得像一个按钮，那么您需要 role="button" 以便屏幕阅读器将其宣布为一个按钮而不是作为链接。

--

注意混合普通 DOM 和 jQuery 约定 - 只有 jQuery 使用 # 来按 ID 查找元素，因此请使用：

```
var nav = document.getElementById('skipNav'); // plain DOM way, no # 
```

或者

```
var nav = $('#skipnav'); // jQuery way using selector 
```

--

观察函数作为值与调用：

```
nav.onclick=skipNav(); 
```

这实际上会*调用* `skipNav()`，并分配返回值 - null！- 点击。设置回调时不要使用 ()。无论如何，您都不需要此代码，因为无论如何您都在标记中使用 onClick 设置处理程序。

另外，请注意，就您的代码而言，当调用 skipNav() 时，它会尝试调用 document.activeElement.blur() - 但在那个时间点 - 文档仍在加载 - 没有 activeElement，因此调用 blur() null 会生成一个异常 - 您应该在浏览器的控制台/调试窗口中看到它。

--

不要使用 .blur() - 没有必要这样做：

```
 document.activeElement.blur(); 
```

相反，只需关注您想要关注的元素。使用 .blur() 的危险在于，如果之后的代码未能将焦点设置在合理的位置，焦点最终会“丢失”，这对键盘用户来说非常不方便，因为他们必须从这页纸。

--

Javascript 编码实践：不要`== true`在 if() 表达式中烦恼；除非您希望多个元素具有“当前”类，否则请使用`else if`而不是 plain `if`：这在代码中清楚地表明您希望只使用一个分支。

--

最后，与浏览器的调试器（大多数情况下是 F12）交朋友：您将通过在事件处理程序和初始化代码中放置断点并单步执行以确保其行为符合您的预期来了解上述一些内容。

# javascript - 匹配条件正则表达式

> ID：10987579
> 
> 赞同：0
> 
> 时间：2012-06-11T21:10:58.250
> 
> 标签：javascript, regex

我需要能够去除字符串中的条件，这里是：

```
(("${Operation}" == "Fixed") && ("-" == "-")) 
```

我希望能够替换`"${Operation}" == "Fixed"`为`""`() 或其中包含 ${} 的任何内容。换句话说，如果条件左侧有 ${}，我想完全摆脱条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:14:30.727

这将匹配它

```
\([^(]*\${.*?}[^)]*\) 
```

![在此处输入图像描述](../Images/16ada04a910f287d7cca8c461356d49b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:16:43.023

**一般来说**，正则表达式在这里不是正确的方法。有很多情况是有效的 JavaScript 语法，但不能很好地适应正则表达式。但是，这是一种方法：

```
var code = '(("${Operation}" == "Fixed") && (thing1 == thing2))';
code = code.replace(/"[^"]*\$\{[^}]*\}[^"]*"\s*==\s*"[^"]*"/, 'true'); 
```

那只处理双引号。如果你需要处理这两种类型的引号，表达式会更复杂。如果您需要处理这两种类型的引号**并且**您的字符串可能包含引号，那么正则表达式确实不起作用。

如果你能想出不同的方法来解决这个问题，那么你应该这样做。例如 - 字符串来自哪里？你能得到不同格式的数据吗？

此外，听起来您正在设置此字符串以调用`eval`. 如果它包含任何类型的用户输入，那是个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:18:08.873

使用这个正则表达式`/^\(?[^)&]*?\${.*\)/`，我成功匹配了前两行，但没有匹配其他两行。这是你想要的？

> (("${Operation}" == "固定") && ("-" == "-"))
> 
> ("${Operation}" == "固定"))
> 
> (("$Operation" == "固定") && ("-" == "-"))
> 
> (("-" == "-") && ("${Operation}" == "固定"))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:19:28.157

有趣的是，我想出了`/\(("?\${.*}"?[^)]*)\)/g`：

```
'(("${Operation}" == "Fixed") && ("-" == "-"))'.replace(/\(("?\${.*}"?[^)]*)\)/g, '("")') 
```

这可能有太多了`*`，但无论如何互联网编码问题似乎总是有点开放。

注意：这就像对特殊 RegExp 字符的测试，很有趣，谢谢！

唯一能让我写的正则表达式沉没的东西就是`[^)]*`任何东西都不是结束`)`

# c - 为什么 Visual Studio 2010 包含两次头文件？

> ID：10987593
> 
> 赞同：1
> 
> 时间：2012-06-11T21:12:28.000
> 
> 标签：c, visual-c++, include, header-files, visual-c++-2010

我在使用 Visual Studio 2010 时遇到了这些非常奇怪的问题。在这一点上，这种行为非常不稳定，我真的希望我不必将它用于 CUDA（我知道我不必**，**但很难不使用它）。

我在使用非常基本的东西时遇到的许多问题之一是头文件被多次包含。例如：

```
//vars.cuh
#if !defined(VARS_cuh)
#define VARS_cuh

#include <cuda.h>
#include <cuda_runtime_api.h>

int* kern_xstart, *kern_xend, *kern_ystart, *kern_yend, *kern_zstart, *kern_zend;
/* more variable definitions */

#endif 
```

然后我将这个文件包含在我的大部分源文件中：

```
//source_file.cu
extern "C"{
#include "vars.cuh"
/* more includes of my own headers */
#include <cuda.h>
#include <cuda_runtime_api.h>
}

/* source file body */ 
```

VS 2010 编译器会输出如下错误：“error LNK2005: foo already defined in other_source_file_I_wrote.cu.obj”

为什么要这样做？另外，为了用一块石头杀死两只鸟，使用这种设置，我在 source_file.cu 中编写一个函数，然后在 vars.cuh 中对其进行原型设计时也遇到了问题。问题出现了 vars.cuh 看不到定义，即使我清楚地将 vars.cuh 包含在 source_file.cu 中！

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T21:15:49.887

头文件被多次编译，因为正如您所说，您在大多数源文件中都包含此头文件。这些全局变量包含在多个源文件中，因此在包含标头的每个源文件中*定义*。当链接器将所有目标文件链接在一起时，它会找到这些变量的多个定义，因此会出现错误。

如果要跨多个源文件共享全局变量，请将它们声明为`extern`在标头中，然后在一个源文件中定义它们中的每一个。

这不是 Visual Studio 或 Visual C++ 编译器的问题，而是 C 的工作方式。

# c# - Winforms 选择哪种设计模式/敏捷方法

> ID：10987594
> 
> 赞同：2
> 
> 时间：2012-06-11T21:12:30.730
> 
> 标签：c#, .net, winforms, domain-driven-design, scrum

我在没有遵循任何适当的设计模式或敏捷方法的情况下开发了桌面（winforms）应用程序。现在，我的任务是用 C# (Winforms) 重写现有的 ERP 应用程序。我一直在阅读有关领域驱动设计、scrum、极限编程、分层架构等方面的内容。尝试每一种方法然后决定走哪条路都非常令人困惑且非常困难（由于时间限制）。我很难理解大局并了解要遵循哪种模式和敏捷方法。更具体地说，我想知道的是：

1.  是否有可能遵循领域驱动设计并且仍然保持敏捷。
2.  在这种特定情况下，我应该选择极限编程还是 scrum
3.  MVP 和 MVVM 适合哪里，哪个对我来说是更好的选择

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:32:08.060

这是一个非常主观和有争议的话题，尤其是在开发者社区。我只是写下我的想法。你可以从中得到善（如果有的话）——

没有人在设计时有意识地应用设计模式。总有一种迭代方式可以达到一个好的设计。OO 原则应该是[可靠](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)的 你应该巧妙地选择你的抽象。试着从接口的角度来思考。

对于您的遗留代码，我认为您应该首先从[domain classes](http://en.wikipedia.org/wiki/Domain_model)开始。基本上，您的实际数据模型所在的位置。您在哪里与您的存储库/数据库交谈。开始一一重构它们并围绕它们创建单元测试。我不是在这里强调测试驱动。但是，`you need to have solid Unit Tests`因为你现在正在重写它。一旦你的域类准备好了，就可以很容易地按照任何标准模式连接到 UI。

你可以看看这个简单的 Winforms 应用程序，它具有普通 UI 模式的所有元素以及使用 backgroundworker 的多线程概念 -

[http://www.codeproject.com/Articles/88390/MVP-VM-Model-View-Presenter-ViewModel-with-Data-Bi](http://www.codeproject.com/Articles/88390/MVP-VM-Model-View-Presenter-ViewModel-with-Data-Bi)

这对于代码示例的详细解释也非常有帮助 - 他展示了如何将 MVVM 用于 Winforms [上述代码项目文章的父级] -

[http://aviadezra.blogspot.co.uk/2009/08/mvp-mvvm-winforms-data-binding.html](http://aviadezra.blogspot.co.uk/2009/08/mvp-mvvm-winforms-data-binding.html)

我在这里不能再详细说明了，因为我说这是一个非常主观的话题。在进行设计时，您可以搜索[Martin Fowler 的](http://martinfowler.com/apsupp/appfacades.pdf)一些文章。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T22:29:52.520

虽然你的问题很笼统......我知道你正处于一段伟大旅程的开始。

为了帮助你，我会根据我的经验给你一些建议......

一般来说，MVVM 非常适合中大型现实世界的应用程序（甚至适用于 winforms），因此您可以从这里开始研究。然后，您可能希望至少拥有一个 3 层架构（数据-业务-表示）。您也可以考虑服务层，稍后会...

嗯……试着坚持你现在最了解的东西，然后在路上适应！

正如“Angshuman Agarwal”所说……在每一步都尝试在界面中思考，这是成功的关键。

祝你好运！

# google-app-engine - 使用 GAE 全文搜索进行词干提取

> ID：10987596
> 
> 赞同：1
> 
> 时间：2012-06-11T21:12:31.017
> 
> 标签：google-app-engine, full-text-search

在用于全文搜索的新 GAE API 中，我找不到任何激活词干提取的选项。我试图在我的应用程序中搜索单数/复数单词，并且确实搜索“文档”不会返回与搜索“文档”相同的结果集。重音字符也是如此，搜索“vehicule”或“véhicule”不会返回相同的结果集。在 API 或查询语言语法中是否有某个选项可以用来激活词干提取？或者我是否必须通过预处理查询并将例如“文档”翻译成“（文档或文档）”来构建自己的词干？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:22:57.640

在[this other SO question](https://stackoverflow.com/questions/10523987/gae-full-text-search-api-phrase-matching)中，他们讨论了同样的问题。您应该使用现在[记录](https://developers.google.com/appengine/docs/python/search/overview#Text_Parsing)的~ 运算符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T07:56:45.157

你应该假设字符集类型。

# ios5 - iOS5 setHidden UITabBarItem 导致崩溃

> ID：10987600
> 
> 赞同：0
> 
> 时间：2012-06-11T21:12:45.987
> 
> 标签：ios5, storyboard, uitabbaritem

我在 iOS5 的 xcode 中使用 Storyboards。我有一个带有 6 个选项卡的 TabBarController。在 TabController 之前，用户选择一种类型的帐户 A 或 B，如果选择了 B 类型，我想隐藏其中一个选项卡。

我有一个 UITabBarController 的子类，这段代码有效，但不是我想要的。

```
if (accountType == 2) {
     [[[[self tabBar] items] objectAtIndex:1] setEnabled:NO];
} 
```

这使我的第二个标签变暗且无法使用，这没关系，但我真的希望它能够工作......

```
[[[[self tabBar] items] objectAtIndex:1] setHidden:YES]; 
```

但它会导致此错误：-[UITabBarItem setHidden:]: unrecognized selector sent to instance 0x856f490 *** Terminating app due to unaught exception 'NSInvalidArgumentException', reason: '-[UITabBarItem setHidden:]: unrecognized selector sent to instance 0x856f490'

还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:38:17.887

为什么不等待 tabBar viewControllers 的初始化，直到您知道您的用户选择了哪种类型的帐户？为此，请使用以下`setViewControllers:animated:`方法，例如：

```
if (accountType == 1) {
    NSArray* controllersForTabBar = [NSArray arrayWithObjects:myVC1,myVC2,myVC3,myVC4,myVC5,myVC6 nil];
     [[[self tabBar] setViewControllers:controllersForTabBar] animated:YES];
}
if (accountType == 2) {
    NSArray* controllersForTabBar = [NSArray arrayWithObjects:myVC1,myVC2,myVC3,myVC4,myVC5, nil];
     [[[self tabBar] setViewControllers:controllersForTabBar] animated:YES];
} 
```

这种方法的苹果文档说：

> 当您分配一组新的视图控制器运行时，标签栏控制器会在安装新视图控制器之前删除所有旧视图控制器。更改视图控制器时，选项卡栏控制器会记住先前选择的视图控制器对象并尝试重新选择它。如果选定的视图控制器不再存在，它会尝试在数组中与先前选择相同的索引处选择视图控制器。如果该索引无效，它将选择索引 0 处的视图控制器。

关于您的错误消息：您收到该错误是因为 tabBar 没有实现 method `setHidden:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:54:58.717

d.ennis 的回答为我指明了正确的方向。必须使用 Storyboards 为 ios5 稍微调整一下...

```
// load the storyboard by name
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

if (accountType == 1) {
   UIViewController *fvc = [storyboard instantiateViewControllerWithIdentifier:@"First"];
   UIViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"Second"];
} else {
   UIViewController *fvc = [storyboard instantiateViewControllerWithIdentifier:@"First"];
   UIViewController *svc = [storyboard instantiateViewControllerWithIdentifier:@"Second"];
   UIViewController *tvc = [storyboard instantiateViewControllerWithIdentifier:@"Third"];

}    

tabBarController = [[UITabBarController alloc] init];
tabBarController.delegate = self;

NSArray *controllersForTabBar = [NSArray arrayWithObjects: fvc, svc, nil];

[tabBarController setViewControllers:controllersForTabBar animated:NO];

[self.view addSubview:tabBarController.view]; 
```

# linux - 进程退出时会自动释放羊群吗？

> ID：10987606
> 
> 赞同：17
> 
> 时间：2012-06-11T21:13:07.767
> 
> 标签：linux, bash, unix, operating-system

在 Linux 的一个 bash 脚本中，我使用flock [命令flock，而不是系统调用flock()] 来实现文件锁定，从而保护对共享资源[这是tmpfs 中的文件] 的并发访问。

我有陷阱处理程序来处理我的脚本的异常终止： `trap "{ rm -rf $LOCK ; rm -rf $TMPFS_FILE; exit 255; }" SIGINT SIGTERM`

其中 $LOCK 是我的锁定文件， $TMPFS_FILE 是我的共享资源。

我的问题是我是否也需要明确地进行文件解锁？或者 Linux 会在所有程序终止时为我做这件事（自愿终止和强制终止）？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T21:16:31.710

来自[`man 1 flock`](http://linux.die.net/man/1/flock)：

> -u，--解锁
> 
> ```
>  Drop  a  lock.   This  is  usually not required, since a lock is
>           automatically dropped when the file is closed.  However, it  may
>           be  required  in special cases, for example if the enclosed com‐
>           mand group may have forked a background process which should not
>           be holding the lock. 
> ```

# c++ - 如何使用 printf 查看浮点类型变量？

> ID：10987609
> 
> 赞同：0
> 
> 时间：2012-06-11T21:13:21.993
> 
> 标签：c++

> **可能重复：**
> [C++：“float”的 printf() 格式规范是什么？](https://stackoverflow.com/questions/7197589/c-what-is-the-printf-format-spec-for-float)

我是 C++ 新手，使用经典的 Borland Turbo C++

图形初始化后，当我按以下方式使用 printf 时，它显示值 0。但是当我使用 cout 时，显示正确的值

```
float x=10;
printf("%d",x);   // displays 0
cout<<x;        // displays 10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:14:30.620

您可以使用`%f`修饰符来显示浮点值`printf`：

```
printf("%f", x); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:16:05.027

尝试`%f`改用。

`%d`用于整数。考虑阅读以下内容：

[http://www.cplusplus.com/reference/clibrary/cstdio/printf/](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:33:46.797

如果要打印两位小数，则应使用：

```
Printf("%2f",var); 
```

# php - 如何在 CodeIgniter 中使用字母进行分页？

> ID：10987610
> 
> 赞同：0
> 
> 时间：2012-06-11T21:13:22.803
> 
> 标签：php, codeigniter, pagination

我是 CodeIgniter 的新手，并阅读了网站上的用户指南。使用分页类，分页可以像这样进行：

```
<?php 

class Test extends CI_Controller {

function page(){
    $this->load->library('pagination');

    $config['base_url'] = 'http://localhost/CodeIgniter/index.php/test/page/';
    $config['total_rows'] = 20;
    $config['per_page'] = 1;

    $this->pagination->initialize($config);

    echo $this->pagination->create_links();
    }
}
?> 
```

但是我怎样才能按字母顺序进行分页呢？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:24:31.353

Codeigniter 分页类仅用于创建导航链接。您必须编写脚本以使用数据填充这些页面。因此，在您的模型查询中，您必须指定 order_by 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T12:10:28.260

您可以根据您的要求构建新的。CI 论坛已经讨论了这个话题。请查看论坛链接：

[http://ellislab.com/forums/viewthread/164849/](http://ellislab.com/forums/viewthread/164849/)

# php - 在 PHP 中为变量标识符连接字符串

> ID：10987614
> 
> 赞同：1
> 
> 时间：2012-06-11T21:13:43.080
> 
> 标签：php, variables, while-loop

我知道这不是执行此操作的正确方法，但是我正在尝试对另一个开发人员完成的表单进行快速修复。基本上，我想在 while 语句中向变量添加一个递增数字：

```
$count = 1;
while ($r = mysql_fetch_array($query)) {
    $variable . $count = $r['somefield'];
        $count++
} 
```

所以这使得变量：

$变量1 $变量2 $变量3 ....等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:14:57.710

```
$varname = 'variable' . $count;
$$varname = $r['somefield']; 
```

[http://www.php.net/manual/en/language.variables.variable.php](http://www.php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:16:29.473

你最好用一个数组...

```
$variable[] = $r['somefield']; 
```

您可以使用可变变量，但这可能不是一个好主意，尤其是对于像这样的微不足道的情况。

# javascript - Backbone.js - 查看不重新加载

> ID：10987618
> 
> 赞同：0
> 
> 时间：2012-06-11T21:14:09.840
> 
> 标签：javascript, backbone.js, backbone-views, backbone-routing

所以我设法弄清楚如何从外部文件填充我的集合，并根据 url 呈现视图，但我遇到了问题。下面的代码按预期工作，除了页面加载，我收到以下错误：

```
Uncaught TypeError: Cannot call method 'get' of undefined 
```

摆脱“view.render()”消除了错误，但现在应用程序不再响应 url 中的 ID 更改（例如，从 #/donuts/1 到 #/donuts/2 不会更新视图）

有人可以在这里指出我正确的方向吗？

编码：

```
(function(){
var Donut = Backbone.Model.extend({
    defaults: {
        name: null,
        sprinkles: null,
        cream_filled: null
    }
});
var Donuts = Backbone.Collection.extend({
    url: 'json.json',
    model: Donut,
    initialize: function() {
        this.fetch();
    }
})

var donuts = new Donuts();

var donutView = Backbone.View.extend({
     initialize: function() {
        this.collection.bind("reset", this.render, this)
    }, 
    render: function() {
        console.log(this.collection.models[this.id].get('name'))
    }
});

var App = Backbone.Router.extend({
    routes: {
        "donut/:id" : 'donutName',
    },

    donutName: function(id) {
        var view = new donutView({
            collection: donuts,
            id: id
        });
        view.render();

    }
});

var app = new App();
Backbone.history.start();
})(jQuery); 
```

JSON：

```
[
    {
        "name": "Boston Cream",
        "sprinkles" : "false",
        "cream_filled": "true"
    },
    {
        "name": "Plain",
        "sprinkles": "false",
        "cream_filled": "false"
    },
    {
        "name": "Sprinkles",
        "sprinkles": "true",
        "cream_filled": "false"
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:27:42.123

这里看起来有点流程问题。您可以让视图监听集合的“重置”事件。因此，当重置时，视图将呈现。那很好。但我相信问题出在你的路由器上。路由时，您正在创建视图的新实例，但不对集合做任何事情，因此它的状态是相同的。

由于您已经在观察集合，因此不要对视图执行任何操作。路由时，更新集合的 url，然后进行获取。这将触发重置，然后视图应自行更新。

# php - 高级主题支持

> ID：10987619
> 
> 赞同：0
> 
> 时间：2012-06-11T21:14:18.653
> 
> 标签：php, frameworks, symfony

我必须实现使用主题的能力。我尝试了[https://github.com/liip/LiipThemeBundle](https://github.com/liip/LiipThemeBundle)并且它有效。但是因为我使用的是多站点功能（即 site_id 是根据域名定义的），所以路径应该是这样的：

1.  app/sites/{site_id}/Resources/themes/phone/BundleName/template.html.twig
2.  app/sites/{site_id}/Resources/BundleName/views/template.html.twig
3.  src/BundleName/Resources/themes/phone/template.html.twig
4.  src/BundleName/Resources/views/template.html.twig

如果我请求`::template.html.twig`路径将是：

1.  应用程序/站点/{site_id}/Resources/themes/phone/template.html.twig
2.  应用程序/站点/{site_id}/Resources/views/template.html.twig

所以问题是：

1.  site_id 只能在运行时获取`$container->get('engine.site')->getId()`。我试图进入 Liip\ThemeBundle\Locator\FileLocator 的构造函数并`$this->path`在那里进行调整，以便能够为视图的不同站点获取路径`app/Resources/sites/{site_id}/`（但会超级获取`app/sites/{site_id}/Resources/`）。但是这样我们当然会在第一次请求并且缓存还没有形成时得到一个错误（`«Whoops, looks like something went wrong. InactiveScopeException: You cannot create a service ("request") of an inactive scope ("request").»`）。并且所有其他请求都将正常进行。但这真的不是一个解决方案。**从这个问题是我可以在哪里动态构建模板的路径？**

2.  LiipThemeBundle 中的所有主题都可以在 config.xml 中设置。**但是我如何动态地制作这个列表（我们可以获取的所有主题`$container->get('engine.site')->getThemes())`？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T16:55:02.027

LiipThemeBundle 创建参数 liip_theme.file_locator.class，其中包含类的名称（带有定位器）。

所以我们必须把bandle的DI中的这个参数改成我们类的名字。它的描述很简单：

```
<?php
namespace Acme\Bundle\EngineBundle\Locator;
use Liip\ThemeBundle\Locator\FileLocator as BaseFileLocator;

class MultisitesFileLocator extends BaseFileLocator
{
    public function locateAppResource($name, $dir = null, $first = true)
    {
        $container = $this->kernel->getContainer();
        if ($container->getParameter('engine.dir_sites') !== '') {
            $dir = $container->getParameter('kernel.root_dir') . '/' .
                   $container->getParameter('engine.dir_sites') .
                   $container->get('engine.site')->getId() . '/Resources';
        }

        return parent::locateAppResource($name, $dir, $first);
    }
} 
```

然而，多站点功能不能以这种方式工作......但这没什么大不了的。

# iphone - 如何始终将 UIView 放在顶部屏幕上？

> ID：10987620
> 
> 赞同：0
> 
> 时间：2012-06-11T21:14:23.123
> 
> 标签：iphone, ios, uiview, uiwindow

我将在调试模式程序中显示一个 UITextView，其中包含来自 NSLog 的所有消息。它有效，但我的问题是：我必须一直展示它。那么，我怎样才能让我的视图在我的程序中一直显示，看起来像状态栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:18:13.027

在你的`didFinishLaunchingWithOptions`

设置以下

```
//Add the textView to the rootviewcontroller view
UITextView *textView = [[UITextView alloc] init];
textView.frame = CGRectMake(0, 20, 320, 40);
[self.window.rootViewController.view addSubview:textView]; 
```

# python - Python代码，我应该线程吗？该怎么办？

> ID：10987621
> 
> 赞同：1
> 
> 时间：2012-06-11T21:14:23.953
> 
> 标签：python, multithreading, sockets

我有这段代码，它通过套接字侦听命令“更新的播放列表”。当它得到这个命令时，它知道数据库中的播放列表已经更新，它连接到数据库并下载新的播放列表，然后开始播放这些文件。我正在尝试找到最好的方法，因为当它获取命令时，然后调用 Media_Player 函数，它将播放播放列表中的所有视频，然后返回收听套接字。

同时，如果已发送另一个“更新播放列表”命令，则此命令的发送者会收到错误，因为此代码不会监听。我希望媒体播放器不停地播放，但它也必须不断收听，以防它被告知添加了新的播放列表。

然后，如果添加了新的播放列表，它就会知道，当播放列表中的一个文件播放完毕时，它可以切换到新的播放列表并继续播放。

我不知道该怎么做，我想我可以在一个进程中完成所有操作，然后为播放列表中的每个文件生成一个新线程，这样它就可以直接回到收听状态，但是接下来怎么样我想知道线程何时完成，因为播放列表中的每个文件的长度都不同。

同样在函数listen_serv（）中看到“返回数据”行，这是否意味着它不会因为返回而关闭连接？

```
# Echo server program
import socket
import time
import Database as DB

def listen_serv():
    HOST = ''                 # Symbolic name meaning all available interfaces
    PORT = 50007              # Arbitrary non-privileged port
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((HOST, PORT))
    s.listen(1)
    conn, addr = s.accept()
    print 'Connected by', addr
    while 1:
        data = conn.recv(1024)
        if not data: break
        conn.sendall('OK')
        return data

    conn.close()

while 1:
    val= listen_serv()
    if val=='Updated Playlist':
        PlayList = DB.get_play_list()
        Media_Player(PlayList)#This isnt implemented yet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:39:45.040

您可以运行两个进程，一个是服务器，另一个是 MediaPlayer，中间有一个队列。

服务器将命令推送到 MediaPlayer 弹出它们的队列中，播放每个视频后只需检查队列中是否有任何内容，如果有弹出并播放新的播放列表。

```
import socket
import time
import Database as DB
from multiprocessing import Process, Queue

def listen_serv(queue):
    HOST = ''                 # Symbolic name meaning all available interfaces
    PORT = 50007              # Arbitrary non-privileged port
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind((HOST, PORT))
    s.listen(1)
    conn, addr = s.accept()
    print 'Connected by', addr
    while 1:
        data = conn.recv(1024)
        if not data:
            break
        conn.sendall('OK')
        queue.put(data)
    conn.close()

def media_player(queue):
    while 1:
        val = queue.get() # This will block until theres something on the queue.
        if val == 'Updated Playlist':
            PlayList = DB.get_play_list()
            Media_Player(PlayList, queue) # Media_Player needs to check the queue and update when appropriate.

if __name__ == '__main__':
    q = Queue()
    server = Process(target = listen_serv, args = (q,))
    media_player = Process(target = media_player, args = (q,))
    server.start()
    media_player.start()
    server.join()
    media_player.join() 
```

您可以检查队列是否为空，`queue.empty()` 我确定那里有更好的实现，如果有错误/问题，我深表歉意。

祝你好运。

# html - 如何在html5中生成环绕声效果

> ID：10987625
> 
> 赞同：5
> 
> 时间：2012-06-11T21:14:33.147
> 
> 标签：html, audio, webgl, three.js

这是问题陈述...

我正在使用 WebGL(THREE.js) 创建一个场景。我周围有不同的物体发出不同的声音。现在我想根据他们的位置产生环绕声。

因此，如果一个物体在我的右侧，那么来自该物体的声音应该来自右扬声器等等。

这在 HTML5 中是否可行（任何浏览器）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T21:41:28.123

AlteredQualia 对此进行了测试。

[http://alteredqualia.com/three/examples/webgl_city.html](http://alteredqualia.com/three/examples/webgl_city.html)（仅限 Chrome）

按下`m`可禁用音乐，并`n`启用直升机空间音效。

# delphi - 如何访问非可视化 Delphi 组件的设计位置？

> ID：10987628
> 
> 赞同：2
> 
> 时间：2012-06-11T21:14:43.773
> 
> 标签：delphi, tcomponent

在 IDE 中设计表单时，可以自由放置和定位非可视组件（例如 TMainMenus、TDatamodules）。该位置是持久的，因此在重新加载表单时，这些组件会出现在正确的位置。

但是，TComponent 没有 Top 或 Left 属性！

那么，我的代码如何访问非可视组件的“设计位置”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T21:22:50.697

这可以在运行时访问，但它有点像 hack。（主要是因为它是作为一种黑客来实现的。）

Left 和 Top 属性设置为 Word-size 值，并将它们两个打包到一个名为 的 Longint`TComponent.FDesignInfo`中。`DesignInfo`您可以通过该属性获取其值。看看`TComponent.DefineProperties`它是如何使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T09:28:59.620

并且：

*   如何将 DesignInfo 设置为 (-100,-100) 之类的点？

目标：将图标放在可视区域之外，在设计时将其隐藏。

注意：例如，当创建直接从 TComponent 派生的简单可视组件时，它非常有用，我想到了一个非常简单的标签（taht 始终与顶部对齐，始终向左 = 0，顶部是自动计算的，bla bla bla）仅将其标题属性存储到 .dfm 文件中；并且任何定位器都只会看到该标题属性。

解决方案是用这样的代码覆盖`ReadState`：

```
procedure TMyComponent.ReadState(Reader:TReader);
var
   NewDesignInfo:LongRec;
begin
     inherited ReadState(Reader);
     NewDesignInfo.Hi:=Word(-100); // Hide design-time icon (top position = -100)
     NewDesignInfo.Lo:=Word(-100); // Hide design-time icon (left position = -100)
     DesignInfo:=Longint(NewDesignInfo); // Set the design-icon position out of visual area
end; 
```

希望帮助别人！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-09T13:48:14.370

这对我有用。来源：CnPack CnAlignSizeWizard.pas。

```
procedure SetNonVisualPos(Form: TCustomForm; Component: TComponent; X, Y: Integer);
const
  NonvisualClassNamePattern = 'TContainer';
  csNonVisualSize = 28;
  csNonVisualCaptionSize = 14;
  csNonVisualCaptionV = 30;
var
  P: TSmallPoint;
  H1, H2: HWND;
  Offset: TPoint;

  function HWndIsNonvisualComponent(hWnd: hWnd): Boolean;
  var
    AClassName: array[0..256] of Char;
  begin
    AClassName[GetClassName(hWnd, @AClassName, SizeOf(AClassName) - 1)] := #0;
    Result := string(AClassName) = NonvisualClassNamePattern;
  end;

  procedure GetComponentContainerHandle(AForm: TCustomForm; L, T: Integer; var H1, H2: hWnd; var Offset: TPoint);
  var
    R1, R2: TRect;
    P: TPoint;
    ParentHandle: hWnd;
    AControl: TWinControl;
    I: Integer;
  begin
    ParentHandle := AForm.Handle;
    AControl := AForm;
    if AForm.ClassNameIs('TDataModuleForm') then // ÊÇ DataModule
    begin
      for I := 0 to AForm.ControlCount - 1 do
        if AForm.Controls[I].ClassNameIs('TComponentContainer')
        and (AForm.Controls[I] is TWinControl) then
        begin
          AControl := AForm.Controls[I] as TWinControl;
          ParentHandle := AControl.Handle;
          Break;
        end;
    end;
    H2 := 0;
    H1 := GetWindow(ParentHandle, GW_CHILD);
    H1 := GetWindow(H1, GW_HWNDLAST);
    while H1 <> 0 do
    begin
      if HWndIsNonvisualComponent(H1) and GetWindowRect(H1, R1) then
      begin

        P.x := R1.Left;
        P.y := R1.Top;
        P := AControl.ScreenToClient(P);

        if (P.x = L) and (P.y = T) and (R1.Right - R1.Left = csNonVisualSize)
        and (R1.Bottom - R1.Top = csNonVisualSize) then
        begin
          H2 := GetWindow(ParentHandle, GW_CHILD);
          H2 := GetWindow(H2, GW_HWNDLAST);
          while H2 <> 0 do
          begin
            if HWndIsNonvisualComponent(H2) and GetWindowRect(H2, R2) then
            begin
              if (R2.Top - R1.Top = csNonVisualCaptionV) and (Abs(R2.Left + R2.Right - R1.Left - R1.Right) <= 1)
              and (R2.Bottom - R2.Top = csNonVisualCaptionSize) then
              begin
                Offset.x := R2.Left - R1.Left;
                Offset.y := R2.Top - R1.Top;
                Break;
              end;
            end;
            H2 := GetWindow(H2, GW_HWNDPREV);
          end;
          Exit;
        end;
      end;
      H1 := GetWindow(H1, GW_HWNDPREV);
    end;
  end;

begin
  P := TSmallPoint(Component.DesignInfo);
  GetComponentContainerHandle(Form, P.x, P.y, H1, H2, Offset);
  Component.DesignInfo := Integer(PointToSmallPoint(Point(X, Y)));
  if H1 <> 0 then
    SetWindowPos(H1, 0, X, Y, 0, 0, SWP_NOSIZE or SWP_NOZORDER);
  if H2 <> 0 then
    SetWindowPos(H2, 0, X + Offset.x, Y + Offset.y, 0, 0, SWP_NOSIZE or SWP_NOZORDER);
end; 
```

使用示例：

```
SetNonVisualPos(TCustomForm(Designer.Root),MyComponent,10,10); 
```

# python - 如何在 Django 中的 models.py 中获取当前的应用程序名称？

> ID：10987631
> 
> 赞同：0
> 
> 时间：2012-06-11T21:15:08.577
> 
> 标签：python, django, python-2.7, django-1.4

我有一个名为 C3po 的应用程序。我正在研究模型“文章”。在这个模型中，我想为另一个名为 Lea 的应用程序中的模型创建一个带有自定义相关名称的 ForeignKey 字段。为了确保related_name 是唯一的，我想将其命名为“c3po_articles”。但我不想硬编码应用名称 c3po。如何以动态方式获取文件夹/应用程序名称？我是使用 __file__ 并拆分它还是有更优雅的方法？

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:32:16.187

该`related_name`属性支持带有两个变量的自动字符串插值：`app_label`和`class`。例如：

```
models.ForeignKey(FooModel, related_name='%(app_label)s_%(class)s_foo') 
```

现在，老实说，我不确定 Django 是否会让你只包含一个或另一个，即 just `'%(app_label)s_foo'`，但你可以尝试。（仔细查看文档后，我非常怀疑它。似乎两者兼而有之，但仍然，自己测试一下看看。）

请参阅：[https ://docs.djangoproject.com/en/dev/topics/db/models/#be-careful-with-related-name](https://docs.djangoproject.com/en/dev/topics/db/models/#be-careful-with-related-name)

**编辑**

实际上，在考虑更多之后，对于您的情况，您可以只使用`'%(app_label)s_%(class)ss'`，这应该将您`c3po_articles`作为`related_name`.

# .net - .NET MVC3 - 长 POST 请求在 IIS7 上导致 404

> ID：10987632
> 
> 赞同：0
> 
> 时间：2012-06-11T21:15:21.527
> 
> 标签：.net, asp.net-mvc-3

我的表单在 MVC3 中发布数据时遇到问题。在本地，表单 POST 成功，但在实时服务器上，当有大量发布数据时，会显示 404 而不是成功页面。数据来自包含在 POST 中的模型，其中通常有很多数据，其中一些我正在使用。我已经查看了更改 web.config 中的设置，但这并没有帮助。以下是我的一些代码片段：

风景：

```
 @using (Html.BeginForm("Bookmarked", "Bookmarklet", Model, FormMethod.Post))
{

<div class="form">
@Html.ValidationSummary(false)

 @Html.TextBoxFor(a => a.Url, new { @class = "hidden" })
 @Html.TextBoxFor(a => a.SelectedImage, new { @class = "selected-image hidden" })

 <div class="form-left">
    <div class="row">
        <label>
            Name:
        </label>
        @Html.TextBoxFor(a => a.Name, new { @class = "textbox" })
        @Html.ValidationMessageFor(a => a.Name, null, new { style = "display:none" })
    </div>

    <div class="row">
        <label>
            Tags:
        </label>
        @Html.TextBoxFor(a => a.Tags, new { @class = "textbox tb-tags", @placeholder = "", onKeyUp = "submitForm(event)" })

    </div>

    <div class="row">
        <br />
        <label>
            &nbsp;</label><a href="javascript:document.forms[0].submit()" class="button fl"><span>Bookmark</span></a>
    </div>
</div>

// The controller

[HttpPost]
    public ActionResult Bookmarked(BookmarkModel initialState, BookmarkModel model)
    {
        try
        {
            HttpCookie cookie = Request.Cookies["UserGuid"];
            HttpCookie cookie2 = Request.Cookies["Username"];
            if (cookie != null && cookie2 != null)
            {
               //do stuff with model data received from the View that the POST comes from

               da.Save(model.Name, cookie.Value);
                return View();
             }
              else
                    throw new Exception("Error saving, please try again");

        }
        catch (Exception ex)
        {
            ModelState.AddModelError("", ex.Message);
            return Bookmark(model);
        }

    }

// web.config

 <system.web>
 <httpRuntime maxUrlLength="10999" maxQueryStringLength="2097151" />
 <compilation debug="true" targetFramework="4.0">
  <assemblies>
    <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  </assemblies>
</compilation>

<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication>

<pages>
  <namespaces>
    <add namespace="System.Web.Helpers" />
    <add namespace="System.Web.Mvc" />
    <add namespace="System.Web.Mvc.Ajax" />
    <add namespace="System.Web.Mvc.Html" />
    <add namespace="System.Web.Routing" />
    <add namespace="System.Web.WebPages"/>
    <add namespace="ConsumerMVC3.App_Code"/>
  </namespaces>
  </pages>
</system.web>

<system.webServer>
  <validation validateIntegratedModeConfiguration="false"/>
  <modules runAllManagedModulesForAllRequests="true"/>
  <security>
     <requestFiltering>
      <requestLimits maxAllowedContentLength="2147483648" />
    </requestFiltering>
  </security>
</system.webServer> 
```

谁能给我一些建议？

谢谢，科林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:18:19.757

由于您没有节省太多，您是否考虑过为您的视图创建一个 ViewModel？它可以是您模型的一个非常概括的版本，是该特定视图所需的全部内容。它还将大大减少往返于服务器的有效负载。

# android - 动画时禁用所有触摸屏交互

> ID：10987633
> 
> 赞同：15
> 
> 时间：2012-06-11T21:15:31.657
> 
> 标签：android, android-widget, clickable

我希望在显示动画时禁用所有触摸屏交互。我不希望`setClickable()`在动画开始或结束的按钮上使用该方法，因为有大量按钮。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T21:20:17.770

在您的活动中，您可以覆盖`onTouchEvent`并始终`return true;`指示您正在处理触摸事件。

[您可以在此处](http://developer.android.com/reference/android/app/Activity.html#onTouchEvent%28android.view.MotionEvent%29)找到该功能的文档。

**编辑**这是一种禁用整个屏幕触摸的方法，而不是一个一个地处理每个视图...首先像这样更改当前布局：

```
<FrameLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

    < .... put your current layout here ... />

    <TouchBlackHoleView
        android:id="@+id/black_hole"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</FrameLayout> 
```

然后使用以下内容定义您的自定义视图：

```
public class TouchBlackHoleView extends View {
    private boolean touch_disabled=true;
    @Override
    public boolean onTouchEvent(MotionEvent e) {
        return touch_disabled;
    }
    public disable_touch(boolean b) {
        touch_disabled=b;
    }
} 
```

然后，在活动中，您可以禁用触摸

```
(TouchBlackHoleView) black_hole = findViewById(R.id.black_hole);
black_hole.disable_touch(true); 
```

并启用它

```
black_hole.disable_touch(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T17:37:59.297

实现它的简单方法是在其上添加透明布局（将其添加到您的 xml 填充父级高度和宽度中）。

在动画开始：`transaparentlayout.setClickable(true);`

在动画结尾： `transaparentlayout.setClickable(false);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T18:42:38.450

回答这个问题

`for (int i = 1; i < layout.getChildCount(); i++) { TableRow row = (TableRow) layout.getChildAt(i); row.setClickable(false);`

**选择了具有所有视图并禁用它们的表布局的所有行**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-09T11:09:53.647

最终，我将@Matthieu 的基本答案作为基本答案，并使其以这种方式工作。我决定发布我的答案，因为我可能需要 30 分钟才能理解我为什么会出错。

XML

```
<...your path to this view and in the end --> .TouchBlackHoleView
    android:id="@+id/blackHole"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

班级

公共类 TouchBlackHoleView 扩展视图 { private boolean touchDisable = false;

```
public TouchBlackHoleView(Context context) {
    super(context);
}

public TouchBlackHoleView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public TouchBlackHoleView(Context context, AttributeSet attrs, int defStyleAttr) {
    super(context, attrs, defStyleAttr);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    return touchDisable;
}

public void disableTouch(boolean value){
    touchDisable = value;
}
} 
```

使用

```
blackHole = (TouchBlackHoleView) findViewById(R.id.blackHole);
blackHole.disableTouch(true); 
```

享受

# php - Symfony 1.4 中的用户密码重置

> ID：10987636
> 
> 赞同：1
> 
> 时间：2012-06-11T21:15:57.060
> 
> 标签：php, symfony-1.4

我正在使用 SfGuard 在 Symfony 1.4 中实现用户密码重置。

期望的过程：

*   用户点击链接
*   获取带有 url 和过期令牌的电子邮件
*   转到 url 并提供授权令牌（在请求中或手动）
*   重置密码
*   收到密码更改的第二封电子邮件通知

任何实现此功能的插件/模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:32:26.017

你几乎描述了这个过程。这是一个粗略的指南——因为我不知道你的 ORM，我相信你使用 Propel，因为这个功能存在于[sfDoctrineGuardPlugin](http://www.symfony-project.org/plugins/sfDoctrineGuardPlugin)中。

*   在 sfGuardProfile 用户模型中添加两​​个字段：token 和 tokenExpiresAt
*   创建一个操作 (reset_request) 来处理生成并通过电子邮件发送 URL + 令牌
*   从您的登录页面等链接到此操作。
*   创建一个操作 (reset_token)，根据提供的 :token 和 expireAt > time() 使用 UserProfilePeer 查找用户
*   为用户提供一个表单以设置新密码并处理提交+保存用户和登录。

看看它是如何在[sfGuardForgotPasswordActions](http://trac.symfony-project.org/browser/plugins/sfDoctrineGuardPlugin/trunk/modules/sfGuardForgotPassword/lib/BasesfGuardForgotPasswordActions.class.php)中实现的，以获得更多灵感。

# iphone - 验证，UITextField

> ID：10987637
> 
> 赞同：0
> 
> 时间：2012-06-11T21:16:01.760
> 
> 标签：iphone, objective-c, ios, nsstring, uitextfield

我正在做一些简单的表单验证，需要一些帮助。基本上，当用户运行一个简单的计算时，我只需要确保 a`UITextField`没有“0”或没有任何值（nil）。如果该字段确实包含/或标签将被更改以通知用户。这是我的声明：

```
if ([abc.text isEqualToString:@"0"] || [time.text isEqualToString:nil]) {
    self.123.text = @"Please enter a time";
} else {  whatever } 
```

当前，`NaN`如果在 abc 中没有输入任何内容，则会输出 123 标签`UITextField`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:18:28.670

替换`[time.text isEqualToString:nil]`为`[time.text isEqualToString:@""]`

您正在尝试将字符串与 nil 对象进行比较，并且由于 nil 对象 (nil) 与空字符串 (@"") 不同，因此它会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:28:22.903

```
if (![abc.text isEqualToString:@"0"]  &&
    ![time.text == nil]) 
    {
        self.123.text = @"Please enter a time";
    }
    else     
    { 
         whatever 
    } 
```

# hibernate - JBoss 7.1.1 (Hibernate 4.x) 中的 JPA 查询性能受到什么影响？

> ID：10987638
> 
> 赞同：1
> 
> 时间：2012-06-11T21:16:02.833
> 
> 标签：hibernate, jboss, jpa-2.0

我有一个在 JBoss 6.1（Hibernate 3.6）中运行良好的查询。这是一个简单的两表连接，返回 955 条记录。当我在 JBoss 7.1.1 中部署相同的 .war 文件时，性能会大幅下降（至少一个数量级）。这是查询：

```
SELECT c.uid, c.name, -1, c.file_Id, cs.error, cs.is_Error, c.parent_Uid, c.job_Id, c.description 
FROM stage.Classification_Status cs, stage.Classification c 
WHERE cs.is_Error = true AND cs.classification_Id = c.id AND c.job_Id = 3001; 
```

我无法确定 JBoss 7.1.1 中捆绑了哪个版本的 Hibernate，所以我不知道要针对哪个版本提交错误。

有没有其他人看到过从 Hibernate 3.6 到 4.x 的这种性能冲击？任何想法是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T08:08:57.990

你记录太多了吗？

因为这确实需要时间，所以如果你不登录，性能会更好。

我有一个只有一个日志调用的 servlet，根据 Firebug/Firefox，**它在 1 毫秒内响应**而不记录，2 毫秒只登录文件，3 毫秒登录文件和控制台。当我记录 955 次时**为 1,270 毫秒！**

那些记录的时间是多次尝试中最好的，但不是经常。另一方面，没有记录的 1ms 发生得更频繁。

# c++ - 如何在 Matlab/C++ 中组合两个具有不同增益的图像

> ID：10987641
> 
> 赞同：3
> 
> 时间：2012-06-11T21:16:10.777
> 
> 标签：c++, image, matlab, image-processing

我有两张图像，都是从同一个探测器同时拍摄的。

两个图像都有**11 位**分辨率（是的，这很奇怪，但这里就是这种情况）。两幅图像之间的区别在于，一幅图像被放大了 1 倍， **而另一幅图像被放大了****10**倍。

如何获取这两个**11 位**图像，并组合它们的像素值以获得单个**16 位**图像？基本上，这增加了最终图像的动态范围。

我对图像处理相当陌生。我知道有一个解决方案，因为其他系统在 FPGA 中逐个像素地执行此操作。我只是希望能够在 Matlab 后期处理中而不是在现场中做到这一点。我知道在 Matlab 中进行按位运算可能有点困难，但我们确实拥有每个可用工具箱的教育许可证。

如下所述，这看起来非常像 HDR 处理。目标不是艺术，而是数据保存。这最终将被放入 C++ 并在自主飞行计算机上飞行，并且在运行中运行标准臃肿的 HDR 软件会扼杀我们的时间要求

谢谢您的帮助！

作为旁注，我希望能够为任何收益组合做到这一点。即 2x 和 30x、4x 和 8x 等。在我的直觉中，我觉得这是一个看似简单的算法或插值，但我只是不知道从哪里开始。

**收益**

由于收益的含义存在一些混淆，我将尝试解释。我们定制相机上使用的图像传感器 (CMOS) 能够同时输出两个单独的图像，这两个图像都是从相同的曝光中拍摄的。它可以做到这一点，因为传感器在其数据路径上有**2 个不同的电子放大器。**

在摄影方面，就像您的 DSLR 能够同时使用**2 个**不同的 ISO 值拍照一样。

对困惑感到抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T01:46:07.873

您提出的问题被称为[“高动态范围成像”](http://en.wikipedia.org/wiki/High_dynamic_range_image)和[“色调映射”](http://en.wikipedia.org/wiki/Tone_mapping)。我建议您从那些 Wikipedia 文章开始，然后深入到其中引用的参考书目。

您没有提供有关图像的足够详细信息，无法给出更具体的答案。你提到的“收获”是什么？您是否提高了传感器的增益（达到 ISO 等效数字？），或者您是否使用了更长的曝光时间？11 位像素值是线性的还是已经进行了伽马压缩？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T02:04:41.630

将 11 位范围放大到 16 位范围，乘以 (2^16-1)/(2^11-1)。
*（**假设您想要线性缩放。**（按比例放大时这是合理的。）*

如果增益是离散的（应用于 11 位范围），那么您有两个 11 位图像，其中可能有一些值饱和。

如果在连续（模拟）或浮点范围内应用增益，那么您的值可能会超出原始 11 位。此外，如果增益应用于连续（模拟）或浮点范围，则可能首先将值缩放到另一个范围，例如 [0,1]（除以 (2^11-1)）。如果将值缩放到另一个范围，则必须除以新范围的最大值而不是 (2^11-1)。

无论哪种方式（无论增益是否在 11 位范围内），由于增益和添加，结果值可能大于原始范围。在这种情况下，您需要决定如何缩放它们：

*   是否要将原来的 11 位范围缩放到 16 位（可能导致饱和）？
    如果是乘以 (2^16-1)/(2^11-1) 的倍数

*   您想将最大可能值缩放到 2^16-1 吗？
    如果这样乘以 (2^16-1)/( (2^11-1) * (G1+G2) )

*   是否要将实际最大值缩放为 2^16-1？
    如果这样乘以 (2^16-1)/(max(sum(I1+I2))

编辑：

由于您不想添加图像，而是使用其中的不同细节，也许这篇文章会对您有所帮助：

[带闪光灯和无闪光灯图像对的数码摄影](http://research.microsoft.com/en-us/um/redmond/projects/flashnoflash/)

# http - accept_language 检测国家/地区的准确性

> ID：10987646
> 
> 赞同：11
> 
> 时间：2012-06-11T21:16:39.467
> 
> 标签：http, geolocation, http-accept-language

我需要检测用户所在的国家/地区，但我试图避免整个调用外部服务来获取基于 IP 或内部数据库的位置。我需要让这项服务真正响应，并且查询任何外部服务需要将近半秒钟，所以我试图避免这种情况。此外，这种方法对数据库的任何调用都是昂贵的。我需要页面在 20 毫秒内做出响应。

我正在考虑根据`Accept_language`标题获取国家/地区语言环境。

我的问题是。有谁知道这可能有多准确？我知道国家并不总是存在，或者用户可能会更改默认语言或使用他们的计算机出现在不同的国家。

有没有人有以前的经验，或者是否有任何文档（我在谷歌搜索或 w3 页面中找不到）指定使用这种方法的准确度或错误百分比？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T21:50:36.483

*   通过它的语言设置检测用户国家只是一个**糟糕**和**愚蠢**的想法。我来自德国，我认识很多人使用其他语言的浏览器/手机或操作系统，而不是德语。我知道有一些交付服务会检查浏览器传输的语言，如果不是德语则不起作用。猜猜我再也不会在哪里订购了。
*   简单地通过他们的 IP 检测语言。有一些（甚至是免费的）服务可以将 IP 转换为一个国家。
    例如： http: [//www.maxmind.com/app/geolite](http://www.maxmind.com/app/geolite)。他们确实有一个 Web API，一个您可以安装的服务器，或者只是获取整个数据库并自行实现它。此外，还有大量用于各种 Web 服务器的模块/帮助程序，不需要任何大量编码。（请参阅： http: [//www.maxmind.com/app/mod_geoip](http://www.maxmind.com/app/mod_geoip) for Apache，这会将访问者的国家/地区嵌入为 HTTP 标头。）
    数据库结果被缓存并且应该足够快以满足您的需要。20 毫秒非常快，如果您认为所有时间都浪费在包到达您的服务器然后全部返回 ;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:27:56.377

我只能推荐你使用本地数据库。自 5 年或更长时间以来，我一直使用以下免费数据库。只需下载压缩包。也许您需要在加载数据库之前将 cvs 转换为 mysql 数据，但这很容易做到。

[http://ip-to-country.webhosting.info/node/view/6](http://ip-to-country.webhosting.info/node/view/6)

它会定期更新。它比任何服务器/浏览器配置都更准确。

在[http://ip-to-country.webhosting.info/node/view/118](http://ip-to-country.webhosting.info/node/view/118)中使用它的基于 php 的指南。这很容易！

**编辑**：好的，我刚刚看到（最后更新于 2010 年 12 月 14 日）。你决定...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-01T23:05:53.887

用户@TheHippo 是完全正确的。使用`Accept-Language`HTTP 信息获取用户所在国家/地区确实不可靠。但是，它几乎没有速度等优势，因为它不依赖外部服务来从 IP 跟踪国家/地区。当 geoIP 类型的服务不可用或当它们为您提供您的网站不呈现或用户不提供服务的国家/地区时，您可以尝试将其用作后端服务。

当 geoIP 类型服务的结果不满足时，我将此功能用作后端服务。为此，还要检查[文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Language)。

```
//accept_language may be for example "pt"  or "pt-PT" or    
//"pt-PT,pt;q=0.9,en;q=0.8,en-GB;q=0.7,de-DE;q=0.6,de;q=0.5,fr-FR;q=0.4,fr;q=0.3,es;q=0.2"
var getCountryFromHTTP = function (accept_language){

    var CC; //Country Code

    //in some cases like "fr" or "hu" the language and the country codes are the same
    if (accept_language.length === 2){
        CC = accept_language.toUpperCase(); 
    }
    //get "PT" out of "pt-PT"
    else if (accept_language.length === 5){          
        CC = accept_language.substring(3, 5); 
    }
    //ex: "pt-PT,pt;q=0.9,en;q=0.8,en-GB;q=0.7,de-DE;q=0.6,de;q=0.5,fr-FR;q=0.4,fr;q=0.3,es;q=0.2"
    //gets the first two capial letters that fit into 2-letter ISO country code
    else if (accept_language.length > 5) {
        var substr;
        for (var i=0; i+2<accept_language.length; i++){
            substr = accept_language.substring(i, i+2);
            if (isoCountries.hasOwnProperty(substr)){
                return substr;
            }            
        }
    }

    if (isoCountries.hasOwnProperty(CC)){
        return CC;
    }

    return false;
};

//2-letter ISO Country Codes
var isoCountries = {
    'AF' : 'Afghanistan',
    'AX' : 'Aland Islands',
    'AL' : 'Albania',
    'DZ' : 'Algeria',
    'AS' : 'American Samoa',
    'AD' : 'Andorra',
    'AO' : 'Angola',
    'AI' : 'Anguilla',
    'AQ' : 'Antarctica',
    'AG' : 'Antigua And Barbuda',
    'AR' : 'Argentina',
    'AM' : 'Armenia',
    'AW' : 'Aruba',
    'AU' : 'Australia',
    'AT' : 'Austria',
    'AZ' : 'Azerbaijan',
    'BS' : 'Bahamas',
    'BH' : 'Bahrain',
    'BD' : 'Bangladesh',
    'BB' : 'Barbados',
    'BY' : 'Belarus',
    'BE' : 'Belgium',
    'BZ' : 'Belize',
    'BJ' : 'Benin',
    'BM' : 'Bermuda',
    'BT' : 'Bhutan',
    'BO' : 'Bolivia',
    'BA' : 'Bosnia And Herzegovina',
    'BW' : 'Botswana',
    'BV' : 'Bouvet Island',
    'BR' : 'Brazil',
    'IO' : 'British Indian Ocean Territory',
    'BN' : 'Brunei Darussalam',
    'BG' : 'Bulgaria',
    'BF' : 'Burkina Faso',
    'BI' : 'Burundi',
    'KH' : 'Cambodia',
    'CM' : 'Cameroon',
    'CA' : 'Canada',
    'CV' : 'Cape Verde',
    'KY' : 'Cayman Islands',
    'CF' : 'Central African Republic',
    'TD' : 'Chad',
    'CL' : 'Chile',
    'CN' : 'China',
    'CX' : 'Christmas Island',
    'CC' : 'Cocos (Keeling) Islands',
    'CO' : 'Colombia',
    'KM' : 'Comoros',
    'CG' : 'Congo',
    'CD' : 'Congo, Democratic Republic',
    'CK' : 'Cook Islands',
    'CR' : 'Costa Rica',
    'CI' : 'Cote D\'Ivoire',
    'HR' : 'Croatia',
    'CU' : 'Cuba',
    'CY' : 'Cyprus',
    'CZ' : 'Czech Republic',
    'DK' : 'Denmark',
    'DJ' : 'Djibouti',
    'DM' : 'Dominica',
    'DO' : 'Dominican Republic',
    'EC' : 'Ecuador',
    'EG' : 'Egypt',
    'SV' : 'El Salvador',
    'GQ' : 'Equatorial Guinea',
    'ER' : 'Eritrea',
    'EE' : 'Estonia',
    'ET' : 'Ethiopia',
    'FK' : 'Falkland Islands (Malvinas)',
    'FO' : 'Faroe Islands',
    'FJ' : 'Fiji',
    'FI' : 'Finland',
    'FR' : 'France',
    'GF' : 'French Guiana',
    'PF' : 'French Polynesia',
    'TF' : 'French Southern Territories',
    'GA' : 'Gabon',
    'GM' : 'Gambia',
    'GE' : 'Georgia',
    'DE' : 'Germany',
    'GH' : 'Ghana',
    'GI' : 'Gibraltar',
    'GR' : 'Greece',
    'GL' : 'Greenland',
    'GD' : 'Grenada',
    'GP' : 'Guadeloupe',
    'GU' : 'Guam',
    'GT' : 'Guatemala',
    'GG' : 'Guernsey',
    'GN' : 'Guinea',
    'GW' : 'Guinea-Bissau',
    'GY' : 'Guyana',
    'HT' : 'Haiti',
    'HM' : 'Heard Island & Mcdonald Islands',
    'VA' : 'Holy See (Vatican City State)',
    'HN' : 'Honduras',
    'HK' : 'Hong Kong',
    'HU' : 'Hungary',
    'IS' : 'Iceland',
    'IN' : 'India',
    'ID' : 'Indonesia',
    'IR' : 'Iran, Islamic Republic Of',
    'IQ' : 'Iraq',
    'IE' : 'Ireland',
    'IM' : 'Isle Of Man',
    'IL' : 'Israel',
    'IT' : 'Italy',
    'JM' : 'Jamaica',
    'JP' : 'Japan',
    'JE' : 'Jersey',
    'JO' : 'Jordan',
    'KZ' : 'Kazakhstan',
    'KE' : 'Kenya',
    'KI' : 'Kiribati',
    'KR' : 'Korea',
    'KW' : 'Kuwait',
    'KG' : 'Kyrgyzstan',
    'LA' : 'Lao People\'s Democratic Republic',
    'LV' : 'Latvia',
    'LB' : 'Lebanon',
    'LS' : 'Lesotho',
    'LR' : 'Liberia',
    'LY' : 'Libyan Arab Jamahiriya',
    'LI' : 'Liechtenstein',
    'LT' : 'Lithuania',
    'LU' : 'Luxembourg',
    'MO' : 'Macao',
    'MK' : 'Macedonia',
    'MG' : 'Madagascar',
    'MW' : 'Malawi',
    'MY' : 'Malaysia',
    'MV' : 'Maldives',
    'ML' : 'Mali',
    'MT' : 'Malta',
    'MH' : 'Marshall Islands',
    'MQ' : 'Martinique',
    'MR' : 'Mauritania',
    'MU' : 'Mauritius',
    'YT' : 'Mayotte',
    'MX' : 'Mexico',
    'FM' : 'Micronesia, Federated States Of',
    'MD' : 'Moldova',
    'MC' : 'Monaco',
    'MN' : 'Mongolia',
    'ME' : 'Montenegro',
    'MS' : 'Montserrat',
    'MA' : 'Morocco',
    'MZ' : 'Mozambique',
    'MM' : 'Myanmar',
    'NA' : 'Namibia',
    'NR' : 'Nauru',
    'NP' : 'Nepal',
    'NL' : 'Netherlands',
    'AN' : 'Netherlands Antilles',
    'NC' : 'New Caledonia',
    'NZ' : 'New Zealand',
    'NI' : 'Nicaragua',
    'NE' : 'Niger',
    'NG' : 'Nigeria',
    'NU' : 'Niue',
    'NF' : 'Norfolk Island',
    'MP' : 'Northern Mariana Islands',
    'NO' : 'Norway',
    'OM' : 'Oman',
    'PK' : 'Pakistan',
    'PW' : 'Palau',
    'PS' : 'Palestinian Territory, Occupied',
    'PA' : 'Panama',
    'PG' : 'Papua New Guinea',
    'PY' : 'Paraguay',
    'PE' : 'Peru',
    'PH' : 'Philippines',
    'PN' : 'Pitcairn',
    'PL' : 'Poland',
    'PT' : 'Portugal',
    'PR' : 'Puerto Rico',
    'QA' : 'Qatar',
    'RE' : 'Reunion',
    'RO' : 'Romania',
    'RU' : 'Russian Federation',
    'RW' : 'Rwanda',
    'BL' : 'Saint Barthelemy',
    'SH' : 'Saint Helena',
    'KN' : 'Saint Kitts And Nevis',
    'LC' : 'Saint Lucia',
    'MF' : 'Saint Martin',
    'PM' : 'Saint Pierre And Miquelon',
    'VC' : 'Saint Vincent And Grenadines',
    'WS' : 'Samoa',
    'SM' : 'San Marino',
    'ST' : 'Sao Tome And Principe',
    'SA' : 'Saudi Arabia',
    'SN' : 'Senegal',
    'RS' : 'Serbia',
    'SC' : 'Seychelles',
    'SL' : 'Sierra Leone',
    'SG' : 'Singapore',
    'SK' : 'Slovakia',
    'SI' : 'Slovenia',
    'SB' : 'Solomon Islands',
    'SO' : 'Somalia',
    'ZA' : 'South Africa',
    'GS' : 'South Georgia And Sandwich Isl.',
    'ES' : 'Spain',
    'LK' : 'Sri Lanka',
    'SD' : 'Sudan',
    'SR' : 'Suriname',
    'SJ' : 'Svalbard And Jan Mayen',
    'SZ' : 'Swaziland',
    'SE' : 'Sweden',
    'CH' : 'Switzerland',
    'SY' : 'Syrian Arab Republic',
    'TW' : 'Taiwan',
    'TJ' : 'Tajikistan',
    'TZ' : 'Tanzania',
    'TH' : 'Thailand',
    'TL' : 'Timor-Leste',
    'TG' : 'Togo',
    'TK' : 'Tokelau',
    'TO' : 'Tonga',
    'TT' : 'Trinidad And Tobago',
    'TN' : 'Tunisia',
    'TR' : 'Turkey',
    'TM' : 'Turkmenistan',
    'TC' : 'Turks And Caicos Islands',
    'TV' : 'Tuvalu',
    'UG' : 'Uganda',
    'UA' : 'Ukraine',
    'AE' : 'United Arab Emirates',
    'GB' : 'United Kingdom',
    'US' : 'United States',
    'UM' : 'United States Outlying Islands',
    'UY' : 'Uruguay',
    'UZ' : 'Uzbekistan',
    'VU' : 'Vanuatu',
    'VE' : 'Venezuela',
    'VN' : 'Viet Nam',
    'VG' : 'Virgin Islands, British',
    'VI' : 'Virgin Islands, U.S.',
    'WF' : 'Wallis And Futuna',
    'EH' : 'Western Sahara',
    'YE' : 'Yemen',
    'ZM' : 'Zambia',
    'ZW' : 'Zimbabwe'
};

console.log(getCountryFromHTTP("fr"));
console.log(getCountryFromHTTP("pt-BR"));
console.log(getCountryFromHTTP("pt-PT,pt;q=0.9,en;q=0.8,en-GB;q=0.7"));
console.log(getCountryFromHTTP("pt;q=0.9,en;q=0.8,en-GB;q=0.7"));
```

# java - 将int数组从ec2 servlet发送到s3而不创建本地文件

> ID：10987648
> 
> 赞同：0
> 
> 时间：2012-06-11T21:17:05.677
> 
> 标签：java, servlets, amazon-s3, amazon-ec2

我的想法是从运行在 AWS ec2 微实例上的 Java servlet 上传一个 int 数组。据我了解，我必须先将我的 int 数组转换为 java 对象文件，然后将文件上传到我的存储桶中，但是有没有办法在不先创建本地文件的情况下“即时”执行此操作？如果我必须先创建一个本地文件，它会有哪个路径名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T00:23:36.173

它会像这样：

```
public void arrayToS3(String bucket, String pathInS3, JSONArray array) {
    ObjectMetadata metadata = new ObjectMetadata();
    byte[] dataInMemory = array.toString().getBytes();
    s3client.putObject(bucket, pathInS3, new ByteArrayInputStream(dataInMemory), metadata);
} 
```

只需将任何内容转换为 IntputStream。例如，arrayToS3 方法将 JSONArray 转换为 String，将 String 转换为 byte[]。最后，将 byte[] 包装到 InputStream。

一切都在记忆中。如果您的数据不是很大，这是一种简单的方法。如果你的数据比 JVM 设置的内存大，内存不足会打击你。

# api - 通过 API 使用 PHP 和 cURL 将文件上传到 RapidShare

> ID：10987651
> 
> 赞同：0
> 
> 时间：2012-06-11T21:17:15.603
> 
> 标签：api, file-upload, rapidshare

我正在尝试使用他们的 API 和带有 cURL 的 PHP 将文件上传到 RapidShare。到目前为止，我有这个代码：

```
// Get the RapidShare server to upload to
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://api.rapidshare.com/cgi-bin/rsapi.cgi?sub=nextuploadserver');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$uploadServer = curl_exec($ch);

// Upload the file to RapidShare
$url = 'http://rs' . $uploadServer . '.rapidshare.com/cgi-bin/rsapi.cgi?sub=upload';
$url .= '&login=login';
$url .= '&password=mypass';
$url .= '&filename=' . $filename;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
// Set post fields
$postFields = array('filecontent' => array('@' . $targetDir . '/' . $id));
curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
$resp = curl_exec($ch);

die($resp); 
```

但我得到的唯一回应是：`ERROR: Subroutine invalid. (b6ba5d82)`。如果我只是这样做（基本上不随请求发送文件）：

```
// Upload the file to RapidShare
$url = 'http://rs' . $uploadServer . '.rapidshare.com/cgi-bin/rsapi.cgi?sub=upload';
$url .= '&login=login';
$url .= '&password=mypass';
$url .= '&filename=' . $filename;
curl_setopt($ch, CURLOPT_URL, $url);
$resp = curl_exec($ch); 
```

我得到这个回应：`ERROR: No files transmitted. (f269d341)`

所以我猜我通过 POST 发送文件的方式有问题。

有谁知道可能出了什么问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:26:53.060

奇怪的是，我也遇到了这个问题。在尝试了一两个小时后找出问题所在，结果很简单，并且是由于忽略了 api 文档中的一条语句造成的：“如果使用 POST 方法，则忽略 GET 参数。所以如果你使用 POST方法，通过 POST 发送**所有**参数。” 为了上传工作，sub=upload 也应该作为 POST 参数而不是 GET 发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T16:29:31.457

添加卷曲参数

```
 curl_setopt($ch, CURLOPT_INFILESIZE,(string)filesize($filename));
    curl_setopt($ch, CURLOPT_INFILE,fopen($filename,'r')); 
```

并且 $filename 必须写入完整路径。对不起，我英语很少。

# c# - ASP.NET 从 2.0 版到 4.0 版的变化？

> ID：10987652
> 
> 赞同：1
> 
> 时间：2012-06-11T21:17:31.237
> 
> 标签：c#, asp.net

我想学习 ASP.NET 并找到了一些关于它的好视频。但问题是它们适用于 .Net Framework 2.0 版。ASP.NET 从 2.0 版到 4.0 版是否发生了巨大变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:31:49.143

我会说你应该把精力集中在 4.0 上。
当 2.0 发布时，由于谷歌地图的令人惊叹的因素，Ajax 开始成为主流，数据绑定没有实体框架或 Linq，部署更多的是复制和粘贴。您需要的所有教程都可以在这里找到：[http ://www.asp.net/web-forms/tutorials](http://www.asp.net/web-forms/tutorials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:22:10.953

当然，新版本中会添加新功能。但是 4.0 版本支持所有（我猜，或者大多数东西）以前版本中可用的功能。所以学习2.0版本不会伤害到你。一旦您对 ASP.NET 有了基本的了解（您可以通过 stydying 2.0 轻松获得），您就可以查看新版本中引入的新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:22:51.077

*   这是[ASP.NET 4 重大更改的文档](http://www.asp.net/whitepapers/aspnet4/breaking-changes)

*   还要考虑到[验证模式发生了一些变化](https://stackoverflow.com/questions/3132368/can-i-deploy-net-4-0-web-application-on-iis6/3132724#3132724)

# iphone - 关于 Xcode 4.3 中带有故事板的图像库示例

> ID：10987654
> 
> 赞同：1
> 
> 时间：2012-06-11T21:17:32.873
> 
> 标签：iphone, objective-c, ios, xcode4.3

你好，我正在尝试制作一个带有故事板的 Xcode 4.3 图像库，它是标签栏项目的一部分，在这个项目中，我有 3 个部分，家庭、照片和视频，我非常努力地制作图像库，但到目前为止我没有成功，所以我问你们是否有人有我可以使用的示例

谢谢大家。

# javascript - javascript在第二页上不起作用

> ID：10987656
> 
> 赞同：0
> 
> 时间：2012-06-11T21:17:36.413
> 
> 标签：javascript

我正在我的一个页面上实现图像旋转器，但是我也想在另外两个页面上重新使用代码。我还希望每个页面以与其他页面不同的顺序旋转图像。我认为这可以通过声明不同的数组并用唯一的 id 调用它们来解决。

代码如下

```
 var ImageArr1 = new Array("/assets/function.jpg","assets/takeaway.jpg","/assets  /delivery.jpg");
 var ImageHolder1 = document.getElementById('Rotating1');

 var ImageArr2 = new Array("/assets/takeaway.jpg","/assets/function.jpg","/assets/delivery.jpg");
 var ImageHolder2 = document.getElementById('Rotating2');

  function RotateImages(whichHolder,Start)
  {
  var a = eval("ImageArr"+whichHolder);
   var b = eval("ImageHolder"+whichHolder);
  if(Start>=a.length)
  Start=0;
  b.src = a[Start];
  window.setTimeout("RotateImages("+whichHolder+","+(Start+1)+")",3000);
  }

  RotateImages(1,0);
  RotateImages(2,0); 
```

我的HTML如下-Page1

```
<img src="/assets/function.jpg" name="Rotating" id="Rotating1" width="260" height="180" alt=""> 
```

第2页

```
<img src="/assets/takeaway.jpg" name="Rotating" id="Rotating2" width="260" height="180" alt=""> 
```

我正在慢慢学习 Javascript，但这让我很难过

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:28:54.113

您遇到的问题实际上是一个错误。通过调用 b.src，您断言 b 已定义，但您的 ImageHolder 可能不存在。特别是通过在 page1 上调用 RotateImage(2... 或在 page2 上调用 RotateImage(1...

您可能会尝试的第一件事是从您的大脑中删除 eval 。你可以简单地使用 window["ImageArr"+whichHolder]，它会好得多。

接下来，将函数的末尾（最后两行）替换为

```
if(b) {
    b.src = a[Start];
    window.setTimeout("RotateImages("+whichHolder+", "+(Start+1)+")", 3000);
} 
```

接下来，您可以学习使用函数而不是字符串来调用 setTimeout：

```
window.setTimeout(function() {
    RotateImages(whichHolder, Start+1);
}, 3000); 
```

最后，更多的是代码约定，经典变量和函数的第一个字母不大写。所以它可能是旋转图像并开始。

# c++ - 轻松将 OpenCV C++ 变量发送到 Matlab 的分步指南

> ID：10987660
> 
> 赞同：3
> 
> 时间：2012-06-11T21:17:43.097
> 
> 标签：c++, opencv, singleton, matlab-engine

我希望能够将任何**OpenCV**变量发送到**Matlab**，以便以舒适的方式绘制图形和计算统计数据。

我知道我必须使用 Matlab 引擎，但是关于如何从代码的任何部分访问它，或者关于从 CV::Mat 转换为 Matlab 数组的函数，或者如何处理列，网络上几乎没有帮助-major 和 row-major 在这种特定情况下。

我认为**一步一步的过程 OpenCV-to-Matlab**会非常有趣，因为 OpenCV 变得非常流行并且 Matlab 对调试有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:14:58.463

**一步一步将数据从 OpenCV 发送到 Matlab**

**1.- 包括和链接库**

使用[Matlab 引擎](http://www.mathworks.es/help/techdoc/matlab_external/f29148.html)的必要头文件是**"engine.h"**和**"mex.h"**。包含路径将是这样的：

> c:\Program 文件 (x86\MATLAB\R2010a\extern\include)

在其他依赖项中，您应该添加：**libeng.lib**、**libmex.lib**和**libmx.lib**。

设置项目的最简单方法是使用 CMake，因为您只需要编写这些行

> find_package（需要 Matlab）
> 
> INCLUDE_DIRECTORIES(${MATLAB_INCLUDE_DIR})

CMake 将为您设置路径并链接所需的库。通过使用环境变量，您可以使项目与用户无关。这就是我总是使用 CMake 的原因。

**2.- Matlab 引擎独特实例的单例模板。**

从代码的任何部分调用 Matlab 引擎的一种非常舒适的方法是创建一个单例模板。例如，您可以创建一个**“matlabSingleton.h”**，然后编写类似这样的内容。

```
#include "engine.h";
#include "mex.h";

class MatlabWrapper
{
private:
    static MatlabWrapper *_theInstance;     ///< Private instance of the class
    MatlabWrapper(){}               ///< Private Constructor
    static Engine *eng; 
public:
        static MatlabWrapper *getInstance()         ///< Get Instance public method
    {
        if(!_theInstance) _theInstance = new MatlabWrapper();   // If NULL, create it
        return _theInstance;                    
    }
public:
        static void openEngine();
        void initializeVariable(const string vName) const;
        // ... other functions ...
}; 
```

然后在**“matlabSingleton.cpp”**中你应该写

```
#include "matlabSingleton.h"

MatlabWrapper *MatlabWrapper::_theInstance = NULL;  ///< Initialize instance as NULL    
Engine *MatlabWrapper::eng=NULL;

void MatlabWrapper::openEngine()
{
    if (!(eng = engOpen(NULL))) 
    {
        cerr << "Can't start MATLAB engine" << endl;
        exit(-1);
    }       
}
void MatlabWrapper::initializeVariable(const string vName) const
{
    string command = vName + "=0";
    engEvalString(eng, command.c_str());
} 
```

**3.- 从您的主代码中使用 Matlab 引擎。**

有很多方法可以做到这一点，但我通常定义一个函数来`initializeMatlab()`初始化稍后将使用的变量（Matlab 变量）。您不需要创建 MatlabWrapper 类，因为第一次调用 getInstance() 时会创建它。下次您调用 getInstance 时，它​​只会被返回。这就是单音的用途。

```
void initializeMatlab(){
   MatlabWrapper::getInstance()->initializeVariable("whatever1"); //class is created
   MatlabWrapper::getInstance()->initializeVariable("whatever2"); //instance of the class returned
} 
```

**4.- 向 Matlab 发送 OpenCV 矩阵**

这就是我发现更多困难的地方。这是一个简单的功能，只是将矩阵发送到matlab进行逐步调试。每次都会被覆盖。

```
void MatlabWrapper::cvLoadMatrixToMatlab(const Mat& m, const string name)
{
    int rows=m.rows;
    int cols=m.cols;        

    string text;
    mxArray *T=mxCreateDoubleMatrix(cols, rows, mxREAL);          

    double *buffer=(double*)mxGetPr(T);
    for(int i=0; i<rows; i++){    
        for(int j=0; j<cols; j++){
            buffer[i*(cols)+j]= (double)m.at<float>(i,j);      
        }
    }   
    engPutVariable(eng, name.c_str(), T);
    text = name + "=" + name + "'";                    // Column major to row major
    engEvalString(eng, text.c_str());
    mxDestroyArray(T);
} 
```

# java - Java - 反向读取的行输出

> ID：10987663
> 
> 赞同：0
> 
> 时间：2012-06-11T21:17:49.087
> 
> 标签：java, line, reverse

以下例程输出从国际象棋引擎移动到 JTextArea

```
public void getEngineOutputOriginal(Process engine) 
{
    try {           
        BufferedReader reader =
          new BufferedReader (new InputStreamReader (engine.getInputStream ()), 1);
        String lineRead = null;
        // send engine analysis to print method
        while ((lineRead = reader.readLine ()) != null)
           Application.showEngineAnalysis (lineRead);
    }
    catch (Exception e) {
                      e.printStackTrace();
    }
} 
```

样本输出将是

```
 12     3.49  39/40?  2\. b4      (656Knps)             
           12     3.49  40/40?  2\. Nd5     (656Knps)             
           12->   3.51   0.04   2\. Bxf4 Be6 3\. Be3 Qa5 4\. Nd5 Qxd2
           13     3.51   1/40?  2\. Bxf4    (655Knps) 
```

是否可以反转该过程，以便读取的最后一行始终出现在顶部而不是底部，如下所示：

```
 13     3.51   1/40?  2\. Bxf4    (655Knps)   
           12->   3.51   0.04   2\. Bxf4 Be6 3\. Be3 Qa5 4\. Nd5 Qxd2
           12     3.49  40/40?  2\. Nd5     (656Knps)             
           12     3.49  39/40?  2\. b4      (656Knps) 
```

我研究了谷歌，但找不到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:20:18.133

当然！一种选择是将这些行缓冲到一个`ArrayList`中，然后在最后以相反的顺序显示它们：

```
List<String> lines = new ArrayList<String>();

/* Add all lines from the file to the buffer. */
while((lineRead = reader.readLine()) != null) {
    lines.add(lineRead);
}

/* Replay them in reverse order. */
for (int i = lines.size() - 1; i >= 0; i--) {
     Application.showEngineAnalysis(lines.get(i));
} 
```

从概念上讲，您可以将其视为创建一个堆栈，将所有行压入堆栈，然后一次将它们弹出一个。

希望这可以帮助！

# jquery - jQuery滑块：根据滑块值克隆和删除元素

> ID：10987671
> 
> 赞同：1
> 
> 时间：2012-06-11T21:18:52.360
> 
> 标签：jquery, slider, clone

就像标题说的那样...

我正在尝试根据滑块值找到复制/克隆 div 的最佳方法；相反，当滑块值减小时，我也尝试删除添加的元素。实际上，滑块值应始终反映所显示的克隆元素的数量（彼此堆叠）。最初，将显示 0 个元素。

例如

要克隆的元素：

```
 <div class="test" style="display: none">test</div> 
```

滑块：http: [//jqueryui.com/demos/slider/#slider-vertical](http://jqueryui.com/demos/slider/#slider-vertical)

在里面：

```
 max: 20,
    value: 0, 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:01:20.960

您可以使用滑块的停止事件来计算您需要添加或删除多少个 div。我只是添加和减去 div 元素，但您也可以轻松克隆。

演示：http: [//jsfiddle.net/lucuma/ggC8s/](http://jsfiddle.net/lucuma/ggC8s/)

```
$(function() {
    $("#slider-vertical").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 0,
        stop: function(event, ui) {
            $("#amount").val(ui.value);
            var diff = ui.value - $('#content div').length;
            if (ui.value == 0) {
                $('#content div').remove();
            } else if (diff < 0) {
                $('#content div:gt(' + ($('#content div').length + diff - 1) + ')').remove();
            } else {
                var i = diff;
                while (i--) {
                    $('#content').append('<div>div</div>');
                }
            }
        },
        slide: function(event, ui) {
            $("#amount").val(ui.value);
        }
    });

});​ 
```

作为替代方案，您可以删除所有 div 并重新生成它们，而不是计算增量。

演示：http: [//jsfiddle.net/lucuma/ggC8s/3/](http://jsfiddle.net/lucuma/ggC8s/3/)

```
$(function() {
    $("#slider-vertical").slider({
        orientation: "vertical",
        range: "min",
        min: 0,
        max: 100,
        value: 0,
        stop: function(event, ui) {

            var diff = ui.value;
            $('#content div').remove();
            while (diff--) {
               $('#content').append('<div>div</div>');
            }
        },
        slide: function(event, ui) {
            $("#amount").val(ui.value);
        }
    });

});​ 
```

# objective-c - 目标C：没有@synchronized的整数原子递减？

> ID：10987672
> 
> 赞同：8
> 
> 时间：2012-06-11T21:18:53.960
> 
> 标签：objective-c, properties, atomic, race-condition, synchronized

如果我使用

```
@property (atomic,assign) int value; 
```

然后像这样访问它

```
self.value--; 
```

那减量是原子的吗？因为如果我必须这样做：

```
self.value = self.value - 1; 
```

那么我确信在读取和写入之间会有竞争条件的机会。

我的直觉当然是这样做

```
@synchronized(self) { value--; } 
```

但有人告诉我这不是犹太洁食。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T22:20:01.773

[按照Apple 的这篇文章](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW14)中的描述尝试 OSAtomicIncrement 和 OSAtomicDecrement 。

```
self.value = self.value - 1; 
```

无论属性如何定义，都不会是原子的。

# javascript - 为什么串联的 RequireJS AMD 模块需要加载器？

> ID：10987674
> 
> 赞同：37
> 
> 时间：2012-06-11T21:19:10.907
> 
> 标签：javascript, requirejs, web-deployment, amd, almond

我们在开发过程中喜欢 RequireJS 和 AMD，我们可以在其中编辑模块，在浏览器中点击重新加载，然后立即看到结果。但是当需要将我们的模块连接到一个文件中以进行生产部署时，显然必须有一个 AMD 加载器仍然存在，无论该加载器是 RequireJS 本身还是它的较小合作伙伴“almond”，如下所述：

[http://requirejs.org/docs/faq-optimization.html#wrap](http://requirejs.org/docs/faq-optimization.html#wrap)

我的困惑是：为什么需要一个装载机？除非您有非常不寻常的情况需要您`require()`在模块内部进行调用，否则似乎可以在没有加载程序的情况下连接一系列 AMD 模块。最简单的可能示例是如下所示的一对模块。

ModA.js：

```
define([], function() {
    return {a: 1};
}); 
```

ModB.js：

```
define(['ModA'], function(A) {
    return {b : 2};
}); 
```

鉴于这两个模块，连接器似乎可以简单地生成以下文本，而不会给生产服务器或浏览器带来 RequireJS 或 Almond 所需的额外带宽或计算负担。

我想象一个产生的连接器（我正在使用 chevron-quotes «,» 来显示上面两个模块的片段被插入的位置）：

```
(function() {
    var ModA = «function() {
        return {a: 1};
    }»();
    var ModB = «function(A) {
        return {b : 2};
    }»(ModA);
    return ModB;
})(); 
```

据我所知，这将正确地重现 AMD 的语义，并且使用最少的无关胶水 JavaScript。有这样的连接器可用吗？如果不是这样，我会不会傻到认为我应该写一个 - 真的很少有代码库由简单而干净的模块组成，`define()`并且不需要`require()`在内部进行进一步的调用来启动以后的异步代码获取？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-11T23:05:25.483

AMD 优化器不仅可以优化要下载的文件数量，还可以优化内存中加载的模块数量。

例如，如果您有 10 个模块并且可以将它们优化为 1 个文件，那么您已经为自己节省了 9 次下载。

如果 Page1 使用所有 10 个模块，那就太好了。但是如果 Page2 只使用 1 呢？AMD 加载程序可以延迟“工厂函数”的执行，直到模块被`require`“d”。因此，Page2 仅触发单个“工厂函数”执行。

如果每个模块在 'd 时消耗 100kb 的内存`require`，那么具有运行时优化的 AMD 框架也将为我们在 Page2 上节省 900kb 的内存。

这方面的一个例子可能是“关于框”样式对话框。它的执行被延迟到最后一秒，因为它在 99% 的情况下都不会被访问。例如（在松散的 jQuery 语法中）：

```
aboutBoxBtn.click(function () {
    require(['aboutBox'], function (aboutBox) {
        aboutBox.show();
    }
}); 
```

在您确定有必要之前，您可以节省创建与“关于框”相关联的 JS 对象和 DOM 的费用。

有关更多信息，请参阅[延迟执行定义，直到第一次需要](https://github.com/jrburke/requirejs/issues/183)requirejs 对此进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:26:42.480

唯一真正的好处是，如果您跨部分使用模块，那么独立缓存模块是有好处的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-10T10:32:08.217

我也有同样的需求，所以我为此创建了一个简单的 AMD“编译器”。您可以在[https://github.com/amitayh/amd-compiler获得它](https://github.com/amitayh/amd-compiler)

Please note that it has many features missing, but it does the job (at least for me). Feel free to contribute to the codebase.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T09:26:56.703

如果您将使用 require.js 的代码编译成单个大文件用于生产，您可以使用[almond.js](https://github.com/jrburke/almond)完全替换 require。

Almond 只处理模块引用管理，而不是不再需要的加载本身。

小心杏仁为了工作而施加的[限制](https://github.com/jrburke/almond#restrictions)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T17:35:05.683

没有理由*没有*像您建议的那样的构建工具。

上次*我查看了优化器的输出，它将模块转换为显式命名的模块，然后将它们连接在一起。它依靠 require 自身来确保工厂函数以正确的顺序被调用，并且正确的模块对象被传递。要构建您想要的工具，您必须明确线性化模块 - 并非不可能，但需要做更多工作。这可能是它没有完成的原因。

我相信**优化器具有自动将 require 本身（或杏仁）包含到构建文件中的功能，因此您只需下载一次。这将大于您想要的构建工具的输出，但其他方面相同。

如果有一个构建工具可以产生您要求的那种输出，则必须更加小心，以防同步`require`、使用`exports`代替返回以及任何其他 CommonJS 兼容性功能。

*那是几年前的事了。2010，我想。

**但现在似乎找不到它。

# php - file_get_contents 输出目标 php 而不是先执行它的错误

> ID：10987675
> 
> 赞同：0
> 
> 时间：2012-06-11T21:19:18.107
> 
> 标签：php, file-get-contents

嗨，我有一个文件`file_get_contents`用于获取另一个 php 文件 - 目标文件应该运行一些 php 并输出一个 HTML 表，如果我只是将它加载到浏览器中，它会执行此操作，但是当我使用`file_get_contents`它来检索它时，检索的是 php 代码，而不是 html 表。

我应该使用不同的东西`file_get_contents`吗？

我应该使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:32:12.210

使用 include("filename.php") 而不是 file_get_contents

file_get_contents 用于返回文件的内容。

# javascript - 如果...收音机被检查警报

> ID：10987677
> 
> 赞同：1
> 
> 时间：2012-06-11T21:19:25.363
> 
> 标签：javascript, jquery, if-statement, radio-button

我正在尝试编写一段在表单中使用用户选择的代码。代码应该给出一个警报窗口，其中包含所选收音机的名称但不起作用，它只显示 A 警报 A 是选择器或 B 被选中。这是表格

```
<FORM>
<input type="radio" name="search_type" value="A"/>type A<br/>
<input type="radio" name="search_type" value="B"/>type B<br/>
</FORM> 
```

这是js代码

```
$(document).ready(function(){
    $('input:radio[name="search_type"]').change(function() {
        if ($('input:radio[name="search_type"]').val() == 'A'){
                alert('type A');
        };
        if ($('input:radio[name="search_type"]').val() == 'B'){
                alert('type B');
        };
    });
}); 
```

在这里你可以找到运行代码： http: [//jsfiddle.net/ur7cc/](http://jsfiddle.net/ur7cc/) 谁能告诉我为什么它不工作？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T21:20:37.327

处理时需要使用 with`:checked`选择器。或者，您可以使用where基本上是触发更改的收音机。见下文，`.val()``radio/checkbox``$(this).val()``this`

```
$(document).ready(function(){
    $('input:radio[name="search_type"]').change(function() {
        if ($(this).val() == 'A'){
                alert('type A');
        }
        if ($(this).val() == 'B'){
                alert('type B');
        }
    });
}); 
```

要与`:checked`选择器一起使用，

```
$('input:radio[name="search_type"]:checked').val() 
```

**演示：http:** [//jsfiddle.net/skram/ur7cc/1/](http://jsfiddle.net/skram/ur7cc/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:22:03.553

改为使用`$(this)`。这是一个简化版本。

```
$(document).ready(function(){
    $('input:radio[name="search_type"]').change(function() {
        alert("Type: "+$(this).val());
    });
});
​ 
```

演示：http: [//jsfiddle.net/ur7cc/2/](http://jsfiddle.net/ur7cc/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:31:41.517

这是我编写和测试的工作代码。有用。它在不同的复选框中写出复选框的状态。试一试。它对我有用。

```
<input type="radio" onclick="alert(this.name);" name="A"/> button A<br>
<input type="radio" onclick="alert(this.name);" name="B"/> button B<br> 
```

我希望它有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:44:22.150

选择`$('input:radio[name="search_type"]')`器返回一个数组对象。你把这个复杂化了。无需再次使用它。这是使用检索到的对象的更简单的方法：

```
$(document).ready(function(e) {

 $('input:radio[name="search_type"]').change(function() {
    alert ("type "+$(this).val());
  })
}) 
```

# mysql - 可以在文件中加载数据（mysql批量上传）读取压缩文件吗？

> ID：10987682
> 
> 赞同：4
> 
> 时间：2012-06-11T21:19:35.920
> 
> 标签：mysql

我有一个要加载到 mysql 中的大型 xml 文件。它大约有 20 GB 未压缩，但我认为我可以将其压缩到其原始大小的 25% 左右，然后将其批量上传到压缩表中。

我知道我可以压缩数据库本身的数据，但它可以在批量添加过程中读取压缩文件吗？

编辑：通过压缩我并不意味着它是一个 .gz.tar 文件或任何东西。我的意思是当我在 Java 或 C++ 中创建文件时，我将它作为 gzip 输出，因此文件本身是 .csv 或 .xml 并保留正确的结构，但其中的项目（每一行）被压缩。

如果这是不可能的，我可以做一些像批量上传但以某种方式通过解压缩内容的程序过滤它吗？我正在考虑在 C 中打开文件并在将其加载到 mysql 时对其进行压缩。问题是我想在批量插入中执行此操作，而不是数百万个单独的插入。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T15:13:25.637

您绝对应该为此使用[LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)。插入可能比 LOAD DATA INFILE 慢一个数量级，尤其是在较大的文件上。

不幸的是，MySQL 本身并不支持直接加载压缩文件（据我所知，任何类型的）。但是，如果您查看上面的 LOAD DATA INFILE 链接，有一个技巧可以将数据直接从管道加载到表中（只需在页面上搜索“管道”）。我想您可以使用该方法解压缩文件并将输出通过管道传输到 MySQL，但压缩/解压缩显然比直接加载未压缩文件要慢。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-09T14:30:48.433

```
$ mkfifo --mode=0666 /tmp/namedPipe
$ gzip --stdout -d file.gz > /tmp/namedPipe 
```

然后将未压缩的数据加载到 MySQL 表中，如下所示：

```
LOAD DATA INFILE '/tmp/namedPipe' INTO TABLE tableName; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-06T16:07:53.460

不要使用 '--mode=-666' ，除非您希望系统上的每个其他用户都能够写入管道。使用“--mode=-600”，并将管道保存在本地主目录中，以降低未经授权访问的风险。

# mysql - 为搜索列表中的每个结果检索多个类别的最有效的 mysql 查询

> ID：10987683
> 
> 赞同：0
> 
> 时间：2012-06-11T21:19:42.153
> 
> 标签：mysql

我有搜索页面，每页返回 10 篇文章。每篇文章都可以分配到多个类别。作为搜索列表的一部分，我希望能够显示如下内容：

```
Title of Article
Added on: 6/11/02
Categories: Basic, Cars, Mustang
Summmary of article 
```

我能想到的唯一方法是为每个搜索结果执行一个检索其类别的查询。但是，如果我这样做，应用程序中的每次搜索都会生成 10 多个查询。我还让人们可以选择列出 10 多个搜索结果，这会产生更多的查询。

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:43:47.433

一种可能的解决方案：`JOIN`主查询上的类别表。这将为您提供每篇文章多行的结果集（每篇文章/类别组合一行）。然后，您可以 (a) 过滤 php/asp/ruby/whatever 代码或`GROUP BY`类别 ID 和子句[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)中的类别上的重复项`SELECT`。

# android - Android：如何将正在运行的文本打印到屏幕上

> ID：10987686
> 
> 赞同：0
> 
> 时间：2012-06-11T21:19:52.787
> 
> 标签：android, dialog, android-asynctask

我有一个后端进程正在运行（AsyncTask）。我有兴趣打印出 System.out.println(); 将信息发送到屏幕（类似于 Eclipse 中的控制台），以便通知用户哪些计算正在后面运行。

我希望完成的是看到在屏幕上运行的文本 - 类似于当前焦点活动顶部的对话框。

有没有人有这方面的经验？

感谢：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:31:27.007

我不认为您可以劫持 System.out.print() 并将其发送到屏幕。但是您可以制作一个 TextView 并在新的文本行准备好时将它们发送给它。像这样的东西应该工作。

```
String outputStr = "";

//Whenever you want to add a line to the TextView do it like this:
outputStr += "\n" + [yourNewText];
mTxt.setText(outputStr); 
```

如果您要以这种方式添加大量行，用户会看到与 Eclipse 控制台相同的情况。

由于您可以使用 TextView 执行此操作，因此您可以将该 TextView 添加到自定义对话框并将其显示给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:36:12.163

我相信您还需要在 UI 线程中更新文本视图。在异步任务中，您调用[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)，然后在 UI 线程中执行。否则，您可以使用[view.post](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)或使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。

# wordpress - setSrc 无法修复损坏的音频播放器

> ID：10987687
> 
> 赞同：5
> 
> 时间：2012-06-11T21:19:53.787
> 
> 标签：wordpress, html5-audio, mediaelement.js

我有一个在我的 WordPress 页面上初始化的音频播放器。不幸的是，有时音频 url 无效（甚至可能为空白）。我尝试通过调用来修复它，`mejs.players[0].setSrc('working.mp3');` 但它正在抛出`TypeError: this.media.setSrc is not a function`

我尝试设置 media.src 然后加载（），但这也不起作用。它制作了一个带有“me-cannotplay”类的 div。这是否意味着该播放器无法使用？

有什么办法还能用这个播放器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T09:21:39.547

您需要添加“flashmediaelement.swf”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T10:58:24.457

尝试

```
<audio id="player" controls="controls">
    <source type="audio/mp3" src=""/>
</audio>
```

然后

```
player.setSrc([{ "type": "audio/mp3", "src": "some/url.mp3" }]);
```

# windows - Windows 硬链接 - 防止写入

> ID：10987693
> 
> 赞同：0
> 
> 时间：2012-06-11T21:20:20.017
> 
> 标签：windows, filesystems, locking, ntfs, hardlink

我有一堆文件，我会在某个时候下载然后自定义。我想保留原件，但也允许修改，我想使用硬链接来做到这一点。

我想我首先将这批文件下载到某种存储库中，然后在我的工作位置创建硬链接。我想让用户删除他的文件（例如删除硬链接），这不会造成问题。

但是我也想让他写信给他们，在这种情况下，我希望我的原始文件在存储库中保持不变，这样我以后可以恢复。我怎样才能透明地做到这一点，而不实际锁定文件并强迫他删除它并重新创建它？

任何想法都非常感谢，谢谢。

考斯敏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:42:35.560

在 Windows 中，您没有这样的选项，因为 NTFS/FAT 不支持快照。无论如何，硬链接只是链接，它们都指向一个文件，如果链接 A 更改，链接 B 也会更改。

您可以使用 Windows 文件历史记录部分获得相同的结果，但是我不知道有什么方法可以按照您的描述设置它。

# postgresql - 使用 postgresql / plpgsql 更新多对多记录

> ID：10987694
> 
> 赞同：0
> 
> 时间：2012-06-11T21:20:30.623
> 
> 标签：postgresql, plpgsql

我有一个基于 Web 的系统，它有几个表（postgres/pgsql），它们包含多对多的关系，例如；表 x column_id1 smallint FK column_id2 smallint FK

在这种情况下，更新是基于 column_id2

首先要更新这些记录，我们将运行以下函数；

```
-- edited to protect the innocent
CREATE FUNCTION associate_id1_with_id2(integer[], integer) RETURNS integer
AS $_$
DECLARE
    a alias for $1;
    b alias for $2;
    i integer;
BEGIN
    delete from tablex where user_id = b;
    FOR i IN array_lower(a,1) .. array_upper(a,1) LOOP
        INSERT INTO tablex (
            column_id2,
            column_id1)
        VALUES (
            b,
            a[i]);
    end loop;
RETURN i;
END;
$_$ 
LANGUAGE plpgsql; 
```

这看起来很草率，现在加上审计，它真的显示出来了。

我现在要做的只是删除并插入必要的行。

我一直在尝试以下各种形式但没有运气

```
CREATE OR REPLACE FUNCTION associate_id1_with_id2(integer[], integer) RETURNS integer
AS $_$
DECLARE
    a alias for $1;
    b alias for $2;
c varchar;
    i integer;
BEGIN
    c = array_to_string($1,',');

    INSERT INTO tablex (
            column_id2,
            column_id1)
            (
    SELECT column_id2, column_id1
    FROM tablex
            WHERE column_id2 = b
    AND column_id1 NOT IN (c)
    );

    DELETE FROM tablex
    WHERE column_id2 = b
    AND column_id1 NOT IN (c);

RETURN i;
END;
$_$
LANGUAGE plpgsql; 
```

根据我正在尝试的函数版本，当前版本存在各种错误，例如显式类型转换（我猜它不喜欢 c 是 varchar？）。

首先，我的方法是正确的还是有更优雅的解决方案，因为有几个表需要这种类型的处理？如果不能，请您指出正确的方向吗？

如果这是正确的方法，您能否协助对 where 子句的 NOT IN 部分进行数组转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:36:18.590

而不是`array_to_string`，使用`unnest`将数组转换为一组行（就像它是一个表一样），并且可以使用 vanilla SQL 解决该问题：

```
INSERT INTO tablex(column_id1,column_id2)
 select ai,b from unnest(a) as ai where not exists
  (select 1 from tablex where column_id1=ai and column_id2=b);

DELETE FROM tablex
where column_id2=b and column_id1 not in
  (select ai from unnest(a) as ai); 
```

# c# - 创建多个下拉列表

> ID：10987697
> 
> 赞同：0
> 
> 时间：2012-06-11T21:20:44.457
> 
> 标签：c#, asp.net, forms

我有一个表，其中包含 27 个 DropDownLists 供用户输入。我的表中有 27 次出现此 HTML：

```
<span id="s1" runat="server"><asp:PlaceHolder ID="p1" runat="server"></asp:PlaceHolder></span> 
```

其中 span 的索引为 s1、s2、...、s27，而 PlaceHolders 的索引为 p1、p2、...、p27。对跨度进行索引的原因是，我可以用所做的任何选择替换 DropDownList —— 即，DropDownList 将消失。

这是我生成 DropDownLists 的方式：

```
protected void Page_Load(object sender, EventArgs e)
{
    var data = CreateDataSource();
    int x;
    for (x = 1; x <= 27; x++)
    {
        DropDownList dl = new DropDownList();
        string index = x.ToString();
        dl.ID = "TrendList" + index;
        dl.AutoPostBack = true;
        dl.SelectedIndexChanged += new EventHandler(this.Selection_Change);
        dl.DataSource = data;
        dl.DataTextField = "TrendTextField";
        dl.DataValueField = "TrendValueField";
        dl.DataBind();
        if (!IsPostBack)
        {
            dl.SelectedIndex = 0;
        }
        PlaceHolder ph = (PlaceHolder)form1.FindControl("p" + index);
        ph.Controls.Add(dl);
    }
} 
```

最后一行出现运行时错误。我可以选择我想要的任何 DropDownList 并进行选择，但是当我选择第二个 DropDownList 并进行选择时，我收到此错误：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Line 46:             }
Line 47:             PlaceHolder ph = (PlaceHolder)form1.FindControl("p" + index);
Line 48:             ph.Controls.Add(dl);
Line 49:         } 
```

当我通过蛮力这样做时，这似乎起作用了：

```
p1.Controls.Add(DropList1);
p2.Controls.Add(DropList2);
etc.... 
```

但现在我遇到了一个错误。我已经在调试器中运行了它，但我找不到空引用。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:25:44.757

您是否尝试过只使用一个占位符？错误消息似乎是关于“p”+ index.ToString() 的 ID 没有占位符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:33:35.237

占位符在技术上不在 form1 中，它们在 form1 中的跨度中（或者跨度在其他一些控件中，等等）。

这适用于跨度嵌套在 form1 中的情况：

```
var s = form1.FindControl("s" + index);
var ph = s.FindControl("p" + index);
ph.Controls.Add(dl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:34:49.393

该`FindControl`方法不是递归的，因此您必须使用一种方法来遍历嵌套对象。这是在 SO 上找到的一个很好的例子： [C#, FindControl](https://stackoverflow.com/questions/1457567/c-findcontrol)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T02:19:00.067

问题原来是在每个新页面上都调用了这个函数。这意味着在第一次运行后第一个占位符不再存在并引发空引用错误。用这段代码解决了这个问题：

```
if (placeHolder != null)
{
    placeHolder.Controls.Add(ddl);
} 
```

# assembly - 带符号半字的 ARM 程序集添加

> ID：10987700
> 
> 赞同：1
> 
> 时间：2012-06-11T21:21:01.227
> 
> 标签：assembly, arm

我正在做一个有 16 个通道的混音器。每个通道都是一个有符号半字（短），我想把它们加在一起，然后除以 16，这样结果就是一个有符号半字。我似乎无法理解如何做到这一点，以便保留标志。如果我添加 0x4fff 和 0x6fff 结果是负数，但真的希望它是 32 位字中的正值而不是负半字。我很确定这里需要使用符号扩展，但欢迎提出任何建议。我尝试将每个输入值缩放到 1/16，然后添加，这确实有效，但后来我失去了分辨率，因为每个通道都减少到 12 位

如果我添加所有通道并在添加之前对它们进行符号扩展，然后对添加的结果进行符号扩展，然后 asr #4 移位以返回 16 位结果。那行得通吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:55:54.500

一旦加载并添加了 2 个值，结果就已经在 32 位寄存器中。对除法使用算术移位应该保留最终结果的符号性。`ldrsh`将为您签名将您的负值扩展为 32 位。

```
 ldrsh r0, [r2], #4
ldrsh r1, [r2], #4
add r0, r0, r1
mov r0, r0, asr #4 
```

或者类似的东西。最后的班次也可以很容易地与另一个操作码结合起来。

# php - PHP MySQL 搜索不起作用？

> ID：10987701
> 
> 赞同：1
> 
> 时间：2012-06-11T21:21:15.847
> 
> 标签：php, mysql

我在我的一个 PHP 站点中进行了一个简单的 MySQL 查询搜索，但它并没有像我预期的那样工作。当用户在我的搜索栏中搜索一个词时，如果他/她要查找的内容不存在，我的函数应该返回“无结果”。但它只是显示空白，没有任何消息。

这是我的搜索代码：

```
function querySearch($searchTerm) {
    $query = "SELECT * FROM content_en WHERE content_body LIKE '%{$searchTerm}%' ORDER BY id DESC ";
    return $query;  
}

function getSearch($searchTerm) {
    $queryContents= querySearch($searchTerm);
    $exeQuery = mysql_query($queryContents);
    while( $fetchSet = mysql_fetch_array($exeQuery) ){
        if(empty($fetchSet)){
            echo "No Results Found";
        }else{
            if(empty($fetchSet['content_title'])){
                echo 'Sorry No results Found';
            }else{
                echo '<h2><a href="index.php?pageId='.$fetchSet['id'].'">'.$fetchSet['content_title'].'</a></h2><br/>';
                echo '<div>'.shortText($fetchSet['content_body'], 220).'</div><br/><br/>';
            }
        }
    }

} 
```

只是我强迫它工作，所以这就是为什么有两个检查 fetchSet 数组，一个是整个数组，一个是一个键。但是，是的，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:59:45.977

它不起作用的原因是您的查询中存在错误或未返回任何结果。

首先，您应该向您的 . 中添加某种错误处理`mysql_query`，如下所示：

```
$exeQuery = mysql_query($queryContents) or die(mysql_error()); 
```

其次，如果没有找到任何结果，它永远不会打印出任何东西的原因是因为`mysql_fetch_array`只有在有结果要获得时才会循环遍历结果。因此，如果返回 0 行，则`while`完全跳过整个循环。相反，您可以在循环`mysql_num_rows` **之前使用。**

例如：

```
if (mysql_num_rows($exeQuery) > 0) {
    while( $fetchSet = mysql_fetch_array($exeQuery) ){
        echo '<h2><a href="index.php?pageId='.$fetchSet['id'].'">'.$fetchSet['content_title'].'</a></h2><br/>';
        echo '<div>'.shortText($fetchSet['content_body'], 220).'</div><br/><br/>';
    }
}
else {
    echo "No Results Found";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:27:44.143

试试这个代码

```
function querySearch($searchTerm) {
    $query = "SELECT * FROM content_en WHERE content_body LIKE '%{$searchTerm}%' ORDER BY id DESC ";
    return $query;  
}

function getSearch($searchTerm) {
    $queryContents = querySearch($searchTerm);
    $exeQuery = mysql_query($queryContents);
    if(mysql_num_rows($exeQuery) > 0)
    {
        while( $fetchSet = mysql_fetch_array($exeQuery) )
        {
            echo '<h2><a href="index.php?pageId='.$fetchSet['id'].'">'.$fetchSet['content_title'].'</a></h2><br/>';
            echo '<div>'.shortText($fetchSet['content_body'], 220).'</div><br/><br/>';
        }
    }
    else
    {
         echo "No Results Found";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:28:23.570

我对此不是 100% 确定，但我记得*只有在*获取实际结果`mysql_fetch_array`时才会起作用。while 循环只会在函数成功运行时运行。但是，当查询没有返回结果时，将不会成功运行，因此循环不会运行，因此，您的 if 块也没有机会运行。*`mysql_fetch_array``mysql_fetch_array`*

 *编辑：Habeeb 的代码应该可以为您解决问题：p。不过，在这里保留我的答案，因为我确实对您的代码问题提供了一些解释。我相信这对于将来可能会关注此问题的人来说将是一个有用的参考。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T21:31:08.980

试试这个..

```
function querySearch($searchTerm) {
    $query = "SELECT * FROM content_en WHERE content_body LIKE '%{$searchTerm}%' ORDER BY id DESC";
    return $query;  
}

function getSearch($searchTerm) {
    $queryContents= querySearch($searchTerm);
    $exeQuery = mysql_query($queryContents);
    $num_rows = mysql_num_rows($exeQuery);
    if($num_rows)
    {
        while( $fetchSet = mysql_fetch_array($exeQuery) ){
            echo '<h2><a href="index.php?pageId='.$fetchSet['id'].'">'.$fetchSet['content_title'].'</a></h2><br/>';
            echo '<div>'.shortText($fetchSet['content_body'], 220).'</div><br/><br/>';
        }
    }else{
        echo "No Result Found!";
    }
} 
```*

# php - 设置一个配置 PHP 类来保留项目设置是否正确？

> ID：10987703
> 
> 赞同：19
> 
> 时间：2012-06-11T21:21:23.950
> 
> 标签：php, class, configuration, configuration-files

我想创建一个 config.php 文件来保留通常在项目之间更改的各种配置值，并且我想定义一个类来将配置值保留在该文件中，如下所示：

```
class Config {
    const DB_SERVER    = 'localhost',
          DB_NAME      = 'abc',
          DB_USERNAME  = 'admin',
          DB_PASSWORD  = '12345',

          WEBSITE_NAME = 'My New Website',
          IMAGE_DIR    = 'img';
} 
```

依此类推，我想在类中将所有值定义为常量，我将它们称为如下：

```
$connection = mysql_connect(Config::DB_SERVER, Config::DB_USERNAME, Config::DB_PASSWORD) or die("Database connection failed.."); 
```

我想知道：这种设置项目配置的方式对吗？这种方式有什么缺点吗？如果它是错误的，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T22:10:12.393

这是一种方法，是的。一个不错的方式，IMO。基本上这个类变成了一个配置文件，只是使用 PHP 语法。

但是，有几个缺点：

*   你不能有 const~~数组或~~对象。（当然，你也不能拥有全局常量~~数组/~~对象，所以......）（从 5.6 开始，你可以拥有常量数组。但仍然没有 const 对象。我很确定你也不能拥有 const 资源，因为这没有多大意义。）

    您可以通过为对象实现一个静态 getter 来解决这个问题（当然，它被编码为始终返回相同的对象）......但我建议在大多数情况下反对它。如果您的配置中的对象在设计上是不可变的，那么这只是一个安全的选择。（不是为不变性而设计的对象太容易改变，即使是偶然的。）

    （除了可变性问题之外，它让我在配置文件中拥有实际运行的代码......但这主要是个人喜好。）

*   这个类的目的与其他类不同——它*旨在*根据项目进行更改。您可能会考虑将 Config 类与其他类分开放置，例如通常保存配置文件的位置。

*   使用真正的配置文件，由于您在运行时解析它，您可以想象处理丢失或无效的文件（例如，通过使用默认设置运行，使用可解析的部分，和/或显示有用的错误消息）。但是一旦你的配置作为 PHP 代码运行，任何语法错误——或者，如果你没有考虑到它，缺少的 Config 类——都会阻止应用程序死在它的轨道上。如果您在`display_errors`关闭状态下运行（建议在生产中使用），则问题可能不太明显。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T20:22:08.147

我发现这 2 篇文章都在谈论相同的主题，我发现它们非常有用，所以我想在这里分享它们：

1-[使用 PHP 类存储配置数据](http://gonzalo123.wordpress.com/2011/01/10/using-php-classes-to-store-configuration-data/)
~~2-[使用 PHP 类存储配置](http://www.ultramegasoft.com/blog/2010/02/php-class-to-store-configuration/)~~

我希望他们能像他们为我所做的那样提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T21:25:24.897

我想，你想要的是[静态关键字！](http://php.net/manual/en/language.oop5.static.php)

```
class Config {
    static $DB_SERVER    = 'localhost';
    static $DB_NAME      = 'abc';
    static $DB_USERNAME  = 'admin';
    static $DB_PASSWORD  = '12345';

    static $WEBSITE_NAME = 'My New Website';
    static $IMAGE_DIR    = 'img';
} 
```

像那样。您不能使用 来调用它们`::`，例如`Config::$DB_SERVER`。

顺便提一句。如果它们是类变量，通常你不会像那样写它们。Big 通常意味着全局变量。

# magento - Magento - 你可以使用多个 在自定义模块的 confix.xml 中

> ID：10987705
> 
> 赞同：1
> 
> 时间：2012-06-11T21:21:38.037
> 
> 标签：magento, magento-1.5

我正在尝试修改两个类似的自定义模块以将它们组合成 1 个自定义模块。但是，这两个模块都使用`<routers>`confix.xml 中的标记。我已经搜索并搜索了一种方法来做到这一点，但没有运气。

例如：

**自定义模块 1**

```
<admin>
    <routers>
        <Namespace_Module1>
             <use>admin</use>
            <args>
                <module>Namespace_Module1</module>
                <frontName>frontname</frontName>
            </args>
        </Namespace_Module1>
    </routers>
</admin> 
```

**自定义模块 2**

```
<admin>
    <routers>
        <Namespace_Module1>
             <use>admin</use>
            <args>
                <module>Namespace_Module2</module>
                <frontName>namefront</frontName>
            </args>
        </Namespace_Module2>
    </routers>
</admin> 
```

我认为这是阻止我将两个相似模块组合在一起的唯一原因。**这可以做到吗？如果是这样，如何（一个例子）？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:34:40.883

Im not entirely sure what you are trying to achieve. Are you looking for two different routers i.e. two distinct front names, defined from within a single module?. If so, read on - if not, can you clarify things a little further please.

Firstly, you have a tag mismatch in the xml you have provided in Custom Module 2\. You are opening `<Namespace_Module1>` and closing with `</Namespace_Module2>` - so as it stands, this code will not work.

Secondly, to define a router, you must use the `<routers>` tag - so there is no issue with this. The nodes directly underneath it must be unique though.

So, assuming I have read your question correctly and you want to merge these two router nodes but still have two distinct front names, the following would work:

```
<admin>
    <routers>
        <namespace_module1>
            <use>admin</use>
            <args>
                <module>Namespace_Module1</module>
                <frontName>frontname</frontName>
            </args>
        </namespace_module1>
        <namespace_module2>
             <use>admin</use>
            <args>
                <module>Namespace_Module2</module>
                <frontName>namefront</frontName>
            </args>
        </namespace_module2>
    </routers>
</admin> 
```

Though, if there was a particular reason that these have to be separate routers, then I would offer the following as better alternative: use a single router but multiple controllers. So your xml would just be:

```
<admin>
    <routers>
        <namespace_module>
            <use>admin</use>
            <args>
                <module>Namespace_Module</module>
                <frontName>frontname</frontName>
            </args>
        </namespace_module>
    </routers>
</admin> 
```

Create two controllers in your modules controller directory, say `Module1Controller.php` and `Module2Controller.php`.

Then you would be able to access them (the index actions) via `/frontname/module1/` and `/frontname/module2`.

This feels like a much cleaner solution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:24:55.023

据我了解，您正在尝试通过一个 frontName 匹配 2 个模块的控制器。

这完全可以通过在第二个模块中使用“模块”节点来实现。保留第一个模块的配置，但将其用于第二个模块：

```
<admin>
    <routers>
        <Namespace_Module1>
            <args>
                <modules>
                    <Namespace_Module2>Namespace_Module2</Namespace_Module2>
                </modules>
            </args>
        </Namespace_Module1>
    </routers>
</admin> 
```

无需指定 'use' 或 'frontName'，这些 XML 文件无论如何都会合并。Magento 将首先尝试在第一个模块中找到匹配的控制器，然后在第二个模块中。

# php - 如何编写一个 php 从 webhook 获取 json 帖子？

> ID：10987707
> 
> 赞同：6
> 
> 时间：2012-06-11T21:21:56.007
> 
> 标签：php, json

我将我的 url xxx/getjson.php 添加到 webhook，一旦有人注册，它就会将 json 数据发布到我的 url。我使用[http://requestb.in/](http://requestb.in/)来检查数据，结果是这样的：

```
payload{ "signup": { "address": { "address1": "XX",
                                  "country": "United States"},                     
                     "id":22}}
token 
```

我写的php脚本是：

```
$obj=json_decode($_POST);            //cannot get the json data

$userid=$obj->signup->id; 
```

我也不知道如何使用“有效载荷”

我找到了一个类似的示例代码，并使用他们的网络挂钩对其进行了很好的测试。 [http://support.unbounce.com/entries/307685-how-does-the-form-webhook-work](http://support.unbounce.com/entries/307685-how-does-the-form-webhook-work) 但是，他们使用“data.json”而不是“payload”作为参数。

```
$form_data = json_decode($unescaped_post_data['data_json']);  
$userid= =$form_data->signup->id; 
```

我使用了他们的 stripslashes_deep 函数，并用 'payload' 替换了 'data_json' 但仍然不起作用。

我真的很感谢你的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:29:26.597

$_POST 将是一个数组，因此您需要指定密钥。

```
$obj=json_decode($_POST['payload']); // put the second parameter as true if you want it to be a associative array

$userid=$obj->signup->id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T14:17:44.220

终于搞定了！只需要三行，但我花了一整天的时间...... webhook API 提供者应该提供更多关于它的信息。谢谢你的帮助！

```
$data = $_REQUEST["payload"];           
$unescaped_data = stripslashes($data);
$obj = json_decode($unescaped_data);
$userid = $obj->signup->id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:30:31.477

看起来`$obj=json_decode($_POST);`无法解码您的 JSON 字符串。

我认为您遇到的问题是您没有正确地 JSON 编码您的“有效负载”数据。

```
payload{ 
    "signup": { 
             "address":{ 
                     "address1": "XX",
                     "country": "United States"
              },                     
              "id":22
     }
} 
```

令牌格式不正确。`{ "signup": { "address": { "address1": "XX","country": "United States"},"id":22}}`是正确的 JSON 字符串。JSON 两端的额外内容将导致它无法解析。

`$_POST['payload']`可能是您访问它的方式。

另外，您没有给我们足够的代码来真正提供帮助。我们需要 HTML 表单或实际发送/构建 POST 的 Javascript。（或者你在使用像 Curl 这样的东西吗？）

# java - 当 useFileMappedBuffer = true 时，Jetty 7.4.5 服务器泄漏文件描述符

> ID：10987710
> 
> 赞同：0
> 
> 时间：2012-06-11T21:22:08.657
> 
> 标签：java, linux, jetty, memory-leaks, memory-mapped-files

我目前在 Linux 上的 Jetty 7.4.5.v20110725 上运行我的 java webapp 时遇到问题。我的 Webapp 提供静态内容的文件描述符在其开始时间戳几天后用完了。我正在使用 useFileMappedBuffer = true( in webDefaults.xml ) 启动码头服务器。我正在使用 jdk1.6.0_30 。如果您对如何解决此问题有任何建议，请告诉我。

请注意，当 useFileMappedBuffer = false（在 webDefaults.xml 中）时，不会发生此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:02:57.670

如果您的应用程序下次用完时间戳，请尝试找出打开的文件以及打开的连接是否导致问题。

尝试通过调用列出打开的文件（我认为它是`lsof -p`，但尝试或查看 lsof 手册页，因为我正在写这个）：

```
lsof -p <jettypid> 
```

这将显示码头进程打开了哪些文件。查找可能应该已经关闭的文件等。

然后做一个：

```
netstat -an 
```

这将向您显示已建立的网络连接。查看是否有大量处于`CLOSE_WAIT`状态或类似状态的连接表明连接未正确关闭。

还可以查看您的系统范围的操作系统限制：

```
ulimit -a 
```

它将向您显示单个进程可以打开多少个文件描述符。如果您的网站流量很大并且非常常见的默认值 1024 max fd，您可能需要提高它。如果您认为交通是问题，请查看本指南：[http ://wiki.eclipse.org/Jetty/Howto/High_Load](http://wiki.eclipse.org/Jetty/Howto/High_Load)

但是，您已表示该问题仅在几天后才发生。这通常表示未正确关闭连接、文件资源等。

如果不确定如何处理上述命令的输出，请随意粘贴它们。

与问题无关，我建议您升级到最新的 jetty 7.x。

# asp.net-mvc - 引用来自不同项目的 web api

> ID：10987715
> 
> 赞同：2
> 
> 时间：2012-06-11T21:22:30.463
> 
> 标签：asp.net-mvc

我正在开发一个 MVC 应用程序。我想开发一些 web api，这样我就可以在其他项目中使用它们。

当我创建一个 web api 项目时，这可以像目前一样完成吗？它会创建所有控制器和视图等。

这也是您设置类型的地方，例如联系人类型，其中包含联系人的所有对象，例如姓名、地址等。

只需要在我进入它之前把它做好。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:40:30.977

`ApiController`您可以在单独的项目（类库）中完美地定义您的 Web API 控制器（源自）。Web API 通常是 RESTFul 并且 Web API 控制器不返回视图。它们返回通常是 XML 或 JSON 序列化的模型。您甚至可以将 Web API 托管在 ASP.NET 应用程序之外的其自己的主机中，例如 Windows 服务或控制台应用程序。你甚至不需要 IIS。以下[文章](http://code.msdn.microsoft.com/ASPNET-Web-API-Self-Host-30abca12)描述了一个自托管方案。

就消费客户端而言，它绝对可以是从桌面应用程序到另一个 ASP.NET 站点的任何类型的应用程序。客户端应用程序可以使用本机`HttpClient`类来使用 WEB API 或任何其他支持 HTTP 的客户端，例如，`WebClient`甚至`HttpWebRequest`. 客户端甚至可以在其他一些非 .NET 平台上编写。所需要的只是发送 HTTP 请求的能力。

# cakephp-2.1 - cakephp 更新数据

> ID：10987721
> 
> 赞同：1
> 
> 时间：2012-06-11T21:22:56.147
> 
> 标签：cakephp-2.1

我在数据库中有 2 个表：用户和配置文件。在一个页面中，我想查看所有用户及其与 user_id 关联的个人资料。问题是当我更新记录 cakephp 只更新表用户而不更新配置文件表。现在我很困惑，但这是我在 UsersController 中更新的代码

```
$this->User->id = $this->request->data['User']['id'];
                if (!$this->User->exists()) {
                    $this->Session->setFlash('Nessun utente trovato con questa corrispondenza');
                }
                if ($this->User->save($this->request->data)) {
                    $this->Session->setFlash('Modifica avvenute con successo');
                    $this->redirect(array('action'=>'index'));
                } 
                else {
                    debug($this->User->invalidFields());
                    $this->Session->setFlash('Errore di salvataggio dati, prova di nuovo');
                }
                $this->redirect(array('action'=>'index')); 
```

这是我的用户模型：class User extends AppModel{

```
public $name = 'User'; 
        public $hasOne = array(
            'Profile' => array('className'    => 'Profile',
            'conditions' => '',
            'dependant' => true,
            'foreignKey'   => 'user_id',
            'associatedKey'   => 'user_id'
            )
    );

        public $validate = array(
            'username' => array(
                'non_vuoto' => array(
                    'rule'=> 'notEmpty',//non è vuoto metodo che eredito da appmodel
                    'message'=> 'Lo username non può essere vuoto'  
                ),
                'stringa_alfanumerica' => array(
                    'rule'=> 'alphaNumeric',//alpha numerico
                    'message'=> 'Lo username deve essere alfanumerica'  
                )
            ),
            'password' => array(
                'non_vuoto' => array(
                    'rule'=> 'notEmpty',//non è vuoto metodo che eredito da appmodel
                    'message'=> 'La password non può essere vuota'  
                ),
                'min_lunghezza' => array(
                    'rule' => array('minLength',5),
                    'message' => 'La password deve contenere almeno 5 caratteri'
                ),
                'max_lunghezza' => array(
                    'rule' => array('maxLength',15),
                    'message' => 'La password deve contenere al massimo 15 caratteri'
                ),
                'password_uguale' => array(
                    'rule' => 'matchPasswords',
                    'message' => 'Le password inserite non coincidono'
                )
            ),
            'password_confirm' => array(
                'non_vuoto' => array(
                    'rule'=> 'notEmpty',//non è vuoto metodo che eredito da appmodel
                    'message'=> 'La password non può essere vuota'  
                )           
            ),
            'email' => array(
                'email_non_valida' => array(
                    'rule' => 'email',
                    'message' => 'L\'email inserita non è valida'
                ),
                'email_univoca' => array(
                    'rule' => 'isUnique',
                    'message' => 'Questa email inserita è già presente nel database'
                )
            ),
            'activation_key' => array(
                'stringa_alfanumerica' => array(
                    'rule' => 'alphaNumeric',//alpha numerico
                    'message'=> 'La chiave di attivazione non è valida'
                ),
                'lunghezza campo' => array(
                    'rule' => array('between',40,40),
                    'message'=> 'La chiave di attivazione non è valida'
                )           
            ),
            'url' => array(
                'url' => array(
                    'rule' => array('url',true), //invalida i protocolli http e https
                    'allowEmpty' => true, //dico che può essere anche vuoto
                    'message' => 'L\'url inserito non è valido'
                )
            ),
            'description' => array(
                'max_lunghezza' => array(
                    'rule' => array('maxLenght',100),
                    'allowEmpty' => true,
                    'message' => 'La descrizione è troppo lunga'
                )
            )
        );

        //metodo mio dichiarato
        public function matchPasswords($data){
            //Il primo dato non è criptato se è nella variabile data se utilizzavo il this lui vede il campo password e quindi prendo il campo che ho diciharato
            if ($data['password']==$this->data['User']['password_confirm']){
                return true;
            }
            //mando l'errore se non coincidono gli dico invalidami quel campo
            $this->invalidate('password_confirm','Le due password non coincidono');
            return false;
        }

        //metodo automatico non necessario avviene sempre prima del salvataggio in questo caso
        public function beforeSave(){
            //se trova il campo password cripta
            if (isset($this->data['User']['password'])){
                $this->data['User']['password']=AuthComponent::password($this->data['User']['password']);
            }
            return true;
        }

    }
?> 
```

我无法更新用户的个人资料，为什么？

我曾尝试像这样为个人资料创建模型，但没有

```
class Profile extends AppModel{
        public $name = 'Profile'; 
        var $belongsTo = array('User' =>
                        array(
                            'foreignKey' => 'user_id'
                        )
                    ); 

    } 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:20:38.067

在最上面的代码块中，您没有对配置文件进行任何引用，因此您不更新任何内容是正确的。

至少你必须有这样的东西：

```
loadModel("Profile"); //not necessary
$this->Profile->find('first', array('conditions' => array('user_id'=>'user_id')));
$this->Profile->save($data_you_want_to_save); 
```

* * *

如果这没有帮助，我建议像这样发布整个函数代码并澄清您的问题：

```
public function update($user_id) {
    *your code should be here so we know what function you are in*
} 
```

此外，您可能想重新[阅读博客教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html#editing-posts)。我为您指出了一个简单编辑功能的好例子。

# javascript - 从另一个视图调用 JavaScript 函数

> ID：10987724
> 
> 赞同：1
> 
> 时间：2012-06-11T21:23:19.513
> 
> 标签：javascript, asp.net-mvc-3, dom-events

我是 ASP.NET MVC 的新手，想知道视图的 JS 函数在哪里。我在显示_Layout 的@RenderBody 部分的视图中有一个表格元素，在它的第一个元素中，我有 -

```
<th id="one" oncontextmenu = "return menu(this)">label one</th> 
```

函数 main(..) 应该放在哪里？它可以在 _Layout 页面上的脚本标签中，还是允许各个视图页面在应该去的地方有自己的脚本标签？

我以前在 WebForms 工作过，所以转向 MVC，我无法想象如何将所有部分组合在一起。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:27:57.893

*   它可以在被脚本标签包围的同一个视图文件中

*   它可以在 Layout.cshtml 文件中被 script 标签包围

*   它可以在同一视图中引用的外部 javascript 文件中

*   它可以在
    `Layout.cshtml`视图中引用的外部 javascript 文件中

`Layout.cshtml`工作原理类似于母版页。因此，您在其中包含的任何内容都将可用于使用该布局的所有视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:29:43.543

在布局页面中定义脚本后，您可以在其他任何地方使用它。调用 javascrip 函数交叉视图没有限制。

# java - 这个枚举模式叫什么？

> ID：10987726
> 
> 赞同：6
> 
> 时间：2012-06-11T21:23:26.160
> 
> 标签：java, enums

我经常使用这种技术，但我不知道该怎么称呼它。我称之为关联枚举。那是对的吗？

例子：

```
public enum Genders {

    Male("M"), Female("F"), Transgender("T"), Other("O"), Unknown("U");

    private String code;

    Genders(String code) {
        this.code = code;
    }

    public String getCode() {
        return code;
    }

    public static Genders get(String code) {
        for (Genders gender : values()) {
            if (gender.getCode().equalsIgnoreCase(code)) {
                return gender;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:27:40.390

我有一组用于执行此操作的类，但除此之外我没有其他名称`Encodable`

```
interface Encodable<T>{
    T getCode();
}

public class EnumUtils{

      public static <U, T extends Enum<T> & Encodable<U>> T getValueOf(
            @Nonnull Class<T> enumClass,
            @Nullable U code){

            for (T e : enumClass.getEnumConstants()){
               if (Objects.equal(e.getCode(), code))
                  return e;
            }

            throw new IllegalArgumentException("No enum found for " + code);
      }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:38:30.843

I would say that looks a fair bit like the [Multiton Pattern](http://en.wikipedia.org/wiki/Multiton_pattern). If you do as erikb suggests and use a map instead of looping, I would say it's *exactly* like the Multiton Pattern.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:29:30.137

我会说这是一个非常非常简单的解析器。

# eclipse - Maven 在远程仓库而不是 .m2 目录中查找 jar 文件

> ID：10987733
> 
> 赞同：0
> 
> 时间：2012-06-11T21:24:26.803
> 
> 标签：eclipse, maven, jar, repository

我有一个 jar 文件的依赖项，该文件已经在我的 .m2 目录中。但是当我用 maven 编译 pom.xml 时，它不是在本地 .m2 存储库中查找那个 jar，而是在 setting.xml 中引用一个。为什么会这样？

谢谢。

# nose - 使用 NoseXUnit 导入

> ID：10987737
> 
> 赞同：1
> 
> 时间：2012-06-11T21:24:44.703
> 
> 标签：nose

我正在测试 NoseXUnit 以查看是否可以从某些代码中获取 XML 和覆盖率信息。我发现如果我使用

```
from testme import testmefunction 
```

鼻子崩溃给出输出：

```
Traceback (most recent call last):
  File "/opt/lib/python2.6/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/opt/lib/python2.6/site-packages/nose/util.py", line 622, in newfunc
    return func(*arg, **kw)
TypeError: testmefunction() takes exactly 1 argument (0 given) 
```

即使我只有 import 语句并且根本不使用 testmefunction() 也会出现此消息。我尝试用谷歌搜索答案并浏览代码，但没有发现任何问题。我可以使用以下方法成功导入：

```
import testme 
```

然后使用 testme.testmefunction()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:51:28.543

找到了我的问题的答案：

[https://github.com/nose-devs/nose/issues/127](https://github.com/nose-devs/nose/issues/127)

重命名了从测试到尝试的所有内容，并且有效。

# javascript - 主干事件触发两次

> ID：10987738
> 
> 赞同：12
> 
> 时间：2012-06-11T21:24:47.660
> 
> 标签：javascript, backbone.js, url-routing, unbind

为什么我必须创建一个完整的[封闭原型](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)才能让我的事件从我的视图中解除绑定？Backbone 不应该只内置它吗？有没有办法检测视图何时被删除？

在我离开并返回视图后，我的主干事件会触发两次。

```
 events : {
            "click #userDropdownButton > a" : "toggleUserDropdownMenu",
            "click" : "hideUserDropdownMenuIfClickedOutside"
        },

        el : "body",

        initialize : function() {
            this.render();
        },

        // Shows/hides the user dropdown menu
        toggleUserDropdownMenu : function() {
            if(!this.$el.find('#userDropdownButton > ul').is(':visible')) {
                this.showUserDropdownMenu();
            } else {
                this.hideUserDropdownMenu();
            }
            return false;
        },
        showUserDropdownMenu : function() {
            this.$el.find('#userDropdownButton').addClass('hover');
            this.$el.find('#userDropdownButton > ul').show();
            this.$el.find('#userDropdownButton > a .arrow-down').removeClass('arrow-down').addClass('arrow-up');
        },
        hideUserDropdownMenuIfClickedOutside : function() {
            if(this.$el.find('#userDropdownButton > ul').is(':visible')) {
                this.hideUserDropdownMenu();
            }
        },
        hideUserDropdownMenu : function() {
            this.$el.find('#userDropdownButton').removeClass('hover');
            this.$el.find('#userDropdownButton > ul').hide();
            this.$el.find('#userDropdownButton > a .arrow-up').removeClass('arrow-up').addClass('arrow-down');
        }, 
```

第一次渲染视图时，下拉菜单会正确打开和关闭，但在第二次渲染视图时，下拉菜单会解释每次点击两次，因此一旦打开，第二次点击就会关闭它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T23:00:31.543

*2013/05/01 更新*：Backbone 0.9.9+ 添加了一些内置功能，以方便处理 zomg 问题（请参阅[View.remove](http://backbonejs.org/#View-remove)和[StopListening](http://backbonejs.org/#Events-stopListening)）；但是你仍然需要通过调用其中一个来杀死你的僵尸。

* * *

*为什么我必须创建一个完整的封闭原型才能让我的事件从我的视图中解除绑定？*

[Derick 的文章](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)非常棒地涵盖了整个问题。但是我可以添加我的两个位，解决您关于“为什么”它没有内置的问题。

由于 Backbone 事件委托的工作方式，如果视图具有事件绑定，则当它们超出范围时不会被垃圾回收。这是因为它们绑定事件的对象——Backbone 对象，在绑定到 Backbone 对象事件的情况下，或 DOM 事件系统在“事件”回调的情况下——维护对视图函数的引用。

信不信由你，一些 Backbone 用户依赖于这种行为，并期望视图继续自动响应事件，就像他们被告知要做的那样，即使它们已经完全超出范围。（我已经看过几个这样做的教程。）这假设您永远不需要删除视图，或者视图可以响应事件并删除自己，因为您已经丢失了对它的任何引用，但是 IMO，this '只要您了解其含义，“创建并忘记”的功能就很好。

`mu is too short`对 UI 事件提出了一个很好的观点。从 DOM 中移除 el 也应该移除委托的事件。对于绑定到模型或集合事件或其他 Backbone 对象的事件（任何对象都可以扩展 Backbone 事件原型），情况并非如此。在这些情况下，您需要遵循链接到的文章中 Derick Bailey 的建议并手动关闭视图。我不确定这是否是 Backbone 与其他 JS MVC 框架相比的弱点，我还没有深入尝试过其他框架。

*“有没有办法检测视图何时被删除？”*

不是直接的，我知道。但一般来说，无论哪个代码删除视图，如果需要，也应该清理事件绑定。通常，在良好的 MVC 架构中，视图可以在相应的模型或集合上设置事件观察器，然后根据发生的事件（例如，从相应模型中的“删除”事件）删除和清理自己。如果您想让您的视图的删除普遍“可检测”，一种方法是在您自己的视图原型中覆盖删除功能并触发其他人可以观察到的自定义事件。

# linux - 如何在死屏会话中终止正在运行的脚本

> ID：10987739
> 
> 赞同：0
> 
> 时间：2012-06-11T21:24:51.200
> 
> 标签：linux, gnu-screen

我在屏幕会话中启动了一个脚本，然后分离，试图重新连接，但现在这个会话已经死了。
脚本仍在运行。
我如何杀死脚本，无法重新连接屏幕会话？
不幸的是，我已经杀死了显示的屏幕进程`ps`。

有没有可能停止脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:27:18.453

我假设您在 linux 环境中，正如您所说的使用 ps。如果你有进程的 uuid，你可以使用`kill < uuid> -9`. 如果您知道进程名称，请尝试`pkill < name>`. 这两种情况都应该在终端上工作。如果您无法打开终端，请尝试`ctrl`++ 。您应该会看到登录提示，然后是终端。要回到 xsession做++`alt``f1``ctrl``alt``f7`

如果一切都失败了，请尝试杀死所有进程：`kill -9 -1`. 这应该让你回到你的显示管理器。

如果您终止了屏幕进程，请`xinit`从终端尝试，然后尝试返回。

如果您看不到该过程，请尝试`ps aux`

# javascript - 在运行时在 javascript 中创建元素是否比经典 HTML 元素慢？

> ID：10987745
> 
> 赞同：3
> 
> 时间：2012-06-11T21:25:29.607
> 
> 标签：javascript, html, dom

我试图弄清楚创建元素以呈现给 DOM 是否比使用简单的 HTML 标记慢，`<h2>`例如。

我带着这个问题出发，并没有在这里找到我感到满足我的好奇心的答案。结果，我决定只做一个简单的测试来运行。这不是我意识到的一个问题，因为我将提供我的发现，但也许有一些极端情况或其他人有一些好的提示。

我使用了 mvc3 razor 引擎的一些帮助来生成大量的经典 HTML 元素。

Javascript方法：

```
<div id="appendHere">
</div>
<script type="text/javascript">
    var appenders = [];
    for(var i = 0; i < 10000; i++){
     var appenderIzer = document.createElement("h2");
     appenderIzer.innerHTML = "TestJs";
     document.getElementById("appendHere").appendChild(appenderIzer);
     appenders.push(appenderIzer);
    }
</script> 
```

所以在这里我将使用 javascript 创建元素，然后将其附加到 div 元素。我选择将元素存储在一个数组中，看看这是否也会影响加载性能。

经典 HTML（注意 razor 的帮助...写出许多 h2 可能很乏味）

```
@for (int i = 0; i < 10000; i++)
{
 <h2>TestClassic</h2>
} 
```

最后真的没有区别，也许是纳秒。可能有一些因素会突出这种差异，但在其他变化中我找不到它们。

这些发现准确吗？从纯 HTML 标记与从 javascript 创建的 javascript-appended 元素呈现页面所需的时间有区别吗**？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:29:17.720

将 DOM 元素插入到已经呈现的页面中比从页面刷新中呈现相同的元素要慢得多。慢多少取决于您如何进行插入。它还很大程度上取决于您有多少样式，以及有多少层**嵌套**的DOM。浏览器版本也很关键。

[Here](http://bitkickers.blogspot.com/2008/12/ajax-grid-performance-in-ie.html) is some (out of date) information:

> As you can see, the performance in IE7 degrades dramatically as the complexity of the HTML increases. If you put a timer before the innerHTML setter, you will see that the time increase to that point is negligible. It's actually not a javascript performance problem at all; it's DOM insertion performance!

Up to 70% of IE performance is spent in [rendering and layout](http://blogs.msdn.com/b/ie/archive/2008/08/26/ie8-performance.aspx), according to Microsoft.

# linux - 如果在仍有数据要读取时调用 select() 会阻塞吗？

> ID：10987746
> 
> 赞同：1
> 
> 时间：2012-06-11T21:25:32.910
> 
> 标签：linux, sockets, select, network-programming

如果一个socket有数据要读取并且调用了select()函数，会select()：

1.  立即返回，表示套接字已准备好读取，或
2.  阻塞直到在套接字上接收到更多数据

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:25:41.873

它可以很容易地进行测试，但我向您保证，如果在其中一个 readfd 上已经有数据可供读取，则 select() 将永远不会阻塞。如果在这种情况下它确实阻塞了，那么它对于使用非阻塞 I/O 进行编程就不是很有用了。以您在 select() 上循环的示例为例，您会看到要读取的数据，然后您就读取了它。然后，当您处理读取的数据时，会有更多数据进入。当您返回 select() 时，它会阻塞，等待更多数据。但是，连接另一端的对等方正在等待对已发送数据的响应。您的程序最终会永远阻塞。您可以通过超时等来解决它，但重点是提高非阻塞 I/O 的效率。

如果 fd 在 EOF，即使多次调用 select() 也永远不会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:31:23.193

`man 2 select`似乎很直接地回答了这个问题：

> select() 和 pselect() 允许程序监视多个文件描述符，等待一个或多个文件描述符“准备好”用于某种类型的 I/O 操作（例如，可能的输入）。如果可以在没有阻塞的情况下执行相应的 I/O 操作（例如 read(2)），则认为文件描述符已准备就绪。

因此，至少根据手册，如果有任何可用数据，它将立即返回。

# python - 数独求解器中的 Python 线程

> ID：10987752
> 
> 赞同：0
> 
> 时间：2012-06-11T21:26:10.233
> 
> 标签：python, multithreading, sudoku

我在 python 中编写了一个数独求解器，它使用递归函数来遍历数独板的所有可能排列。该程序线性地解决了数独难题，我试图通过将任务分成不同的线程来使其更快。然而，经过对线程的大量思考和研究，我仍然不知道如何在我的函数中实现线程。这是我的功能顺便说一句

```
def solve(num,possible,temp):
    y = num%9
    x = num-y
    try:
        for xyz in possible[num]:
            if num != 80:
                if ispossibility(temp,xyz,x,y) == True:
                    temp[num] = xyz
                    solution = solve(num+1,possible,temp)
                    if solution != None:
                        raise exception
                temp[num] = 0
            else:
                if ispossibility(temp,xyz,x,y) == True:
                    temp[num] = xyz
                    solution = copy(temp)
                    raise exception
    except exception:
        return solution 
```

所以我想要一个单独的线程来运行“solution = solve(num+1, possible, temp)”这一行，但问题是一旦一个线程找到答案，我无法弄清楚如何停止所有单独的线程。关于做什么的任何指示？

# text-editor - 哪个 HTML 编辑器将验证我是否正确或错误地使用了例如内联元素中的块级元素？

> ID：10987759
> 
> 赞同：0
> 
> 时间：2012-06-11T21:27:25.193
> 
> 标签：text-editor

例如，我知道我不能使用块级元素`p`，`h1`例如`DT`. 如果我错误地嵌套了我的元素，是否有编辑器会警告我或通知我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:38:40.900

Visual Studio will do this nicely, but I suspect if you had that you'd already know :)

# android - Android NDK 构建 - 包括 LOCAL_SHARED_LIBRARIES？

> ID：10987767
> 
> 赞同：11
> 
> 时间：2012-06-11T21:28:11.140
> 
> 标签：android, c++, android-ndk

我在 Android NDK 下构建项目时遇到问题。很可能是由于未包含正确的共享/静态库。我添加了 -lsomeLib 的那些，但似乎没有包括 LOCAL_SHARED_LIBRARIES 的那些......

我的 Android.mk 包含以下内容

LOCAL_SHARED_LIBRARIES += libutils libmedia libz libbinder

1.  ndk-build 实际上在哪里寻找这些库？
2.  如果我不包含 -lutils -lmedia -lz -lbinder，我什至无法找到链接器错误。我有一种感觉，包括 -LsomeDir 和 -lsomeLib 不是添加它们的正确方法。

这是完整的 Android.mk。

```
LOCAL_PATH := /Users/kevin/Desktop/player2/videoplayer/videoplayer/jni
LIBPLAYER_PATH := $(LOCAL_PATH)/../../LibPlayer

include $(CLEAR_VARS)

$(warning Android make file: $(LOCAL_PATH)/Android.mk)
$(warning Android sysroot: $(SYSROOT))
$(warning Additional LD_LIBS: $(LOCAL_PATH)/lib)

ifeq ($(BUILD_ID),MID)
        LOCAL_CFLAGS += -DENABLE_FREE_SCALE
endif

LOCAL_MODULE    := libamplayerjni
LOCAL_SRC_FILES := com_farcore_playerservice_AmPlayer.c sys_conf.c
LOCAL_ARM_MODE := arm
LOCAL_C_INCLUDES := $(LIBPLAYER_PATH)/amplayer/player/include \
    $(LIBPLAYER_PATH)/amplayer/control/include \
    $(LIBPLAYER_PATH)/amcodec/include \
    $(LIBPLAYER_PATH)/amffmpeg \
    $(JNI_H_INCLUDE) \
    /Android/ndk/build/tools/android-9-toolchain/sysroot/usr/include \
    /Android/ndk/build/platforms/android-9/arch-arm/usr/include \
    /Android/source_2.3/system/core/include \
    /Android/source_2.3/frameworks/base/include

LOCAL_LDLIBS := -L/Users/kevin/Desktop/player2/videoplayer/videoplayer/jni/lib -L$(SYSROOT)/usr/lib -llog -lz -lm -ldl **-lmedia -lstagefright -lutils -lbinder -lgcc -landroid -lc -lstdc++ -lthread_db**

**LOCAL_STATIC_LIBRARIES := libamplayer libamcodec libavformat libavcodec libavutil libamadec**
LOCAL_SHARED_LIBRARIES += libutils libmedia libz libbinder 

LOCAL_PRELINK_MODULE := false

include $(BUILD_SHARED_LIBRARY) 
```

与这些库（即 libmedia.so）专门相关的许多错误之一。

```
/Users/kevin/Desktop/player2/videoplayer/videoplayer/obj/local/armeabi-v7a/libamadec.a(android_out.o): In function `android_uninit':
/Users/kevin/Desktop/player2/videoplayer/LibPlayer/amadec/audio_out/android_out.cpp:220: undefined reference to `android::AudioTrack::stop()'
/Users/kevin/Desktop/player2/videoplayer/LibPlayer/amadec/audio_out/android_out.cpp:228: undefined reference to `android::AudioTrack::~AudioTrack()'
/Users/kevin/Desktop/player2/videoplayer/videoplayer/obj/local/armeabi-v7a/libamadec.a(android_out.o): In function `~Autolock': 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T17:02:30.043

在我看来，你不应该在你的论点中包含`-lmedia`等。`LOCAL_LDLIBS`

## 1\. ndk-build 实际上在哪里寻找这些库？

如果您查看，`$NDK/docs/STABLE-APIS.html`您会发现有一组指定的库可以以这种方式包含在内。笔记：

> `The headers corresponding to a given API level are now located under **$NDK/platforms/android-<level>/arch-arm/usr/include**`

看过我自己之后，那里没有您指定的库，尽管我只寻找 API-14。

* * *

## 2\. 如果我不包含 -lutils -lmedia -lz -lbinder，我什至无法得到链接器错误。我有一种感觉，包括 -LsomeDir 和 -lsomeLib 不是添加它们的正确方法。

如果您的库只是`#include`您应该使用的常规 c/c++ 库`LOCAL_C_INCLUDES`。

另请注意，来自`$NDK/docs/ANDROID-MK.html`：

> *   构建系统会为您处理许多细节。例如，您不需要在 Android.mk 中列出头文件或生成的文件之间的显式依赖关系。NDK 构建系统会自动为您计算这些。

为了在我的本机代码中使用其他库，我只是简单地使用`#include`它，然后指定在哪里可以找到头文件。这是我的`LOCAL_C_INCLUDES`：

```
LOCAL_C_INCLUDES := $(LOCAL_PATH)/shared/Core/inc \
                    $(LOCAL_PATH)/shared/Model/inc  \
                    $(LOCAL_PATH)/shared/boost/include 
```

我希望这有帮助。

# c++ - 在 C++ 中取消引用对象数组指针

> ID：10987769
> 
> 赞同：-1
> 
> 时间：2012-06-11T21:28:14.503
> 
> 标签：c++, arrays, pointers

我有一个关于取消引用数组的小问题。我在课堂上有这样的方法

```
T* foo()
{
 // create specific array of objects in here
 return (array)
}

foo2()
{
  myNewArray = *foo();
  // exactly the same algorithm as in foo to create checkArray
  cout << sizeof(myNewArray) << sizeof(checkArray) << endl;
} 
```

我得到两个不同的结果，但我希望它们是相同的？

好的，关于代码的附加信息：

```
vec4* getGridAttr()
{
        float xval = -0.5;
        float yval = -0.75;
        float xval2 = -0.5;
        float yval2 = -0.75;
        vec4 pointsGrid[100];

        for (int i=0;i<42;i++)
        {

          //Draw horizontal lines
          if (i % 2 == 0) pointsGrid[i] = vec4(xval, yval, 0.0,1);
          else if (i % 2 != 0) {
             pointsGrid[i] = vec4((xval+0.75), yval, 0.0,1);
             yval += 0.075;
             }
        }
        for (int j=42;j<64;j++)
        {

          //Draw horizontal lines
          if (j % 2 != 0)
          {
              pointsGrid[j] = vec4(xval2, yval2, 0.0,1);
              xval2 += 0.075;

          }
          else if (j % 2 == 0) {
             pointsGrid[j] = vec4(xval2, -yval2, 0.0,1);

             }

        }
        return (pointsGrid);
} 
```

在我的其他方法中，我有这个：

```
void display( void )
{

vec4 points1[100];
//code here populates points1 exactly the same as in getGridAttributes, 

cout << "points1 : " << sizeof(points1) << "   " << "  pointsFromGridAttr : " << sizeof(*getGridAttr()) << endl;
} 
```

输出为 points1 : 1600 pointsFromGridAttr 16

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:30:00.497

如果没有看到更多代码，我无法确定这一点，但如果你有这样的事情：

```
T* arr1 = makeArray();
T arr2[n]; 
```

然后`arr1`和`arr2`会有不同的大小。具体来说，`arr1`是一个指针，所以它的大小是指针的大小，`arr2`而是一个数组，它的大小将是一个`T`对象的大小乘以数组中的对象数。

尽管 C++ 中的数组和指针在某些情况下可以互换，但它们确实是不同的类型。 `T*`并且`T [n]`是不同大小的不同类型。一旦数组衰减为指针，它就会丢失其大小信息。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:32:49.043

I guess you would like to compare the *length* of the arrays. The length of a C array should be calculated as `sizeof(array_variable) / sizeof(type_of_array_elements)` or `sizeof(array_variable) / sizeof(one_element)`, not just as `sizeof(array_variable)`. For details see [this SO question](https://stackoverflow.com/questions/37538/how-do-i-determine-the-size-of-my-array-in-c).

Try this:

```
cout << sizeof(myNewArray) / sizeof(myNewArray[0]) << ", " << sizeof(checkArray) / sizeof(checkArray[0]) << endl; 
```

# python - Python，将索引列表转换为切片

> ID：10987777
> 
> 赞同：4
> 
> 时间：2012-06-11T21:28:58.763
> 
> 标签：python, list, slice, range

所以我有一个索引列表，

```
[0, 1, 2, 3, 5, 7, 8, 10] 
```

并想将其转换为此，

```
[[0, 3], [5], [7, 8], [10]] 
```

这将在大量索引上运行。

此外，这在技术上不适用于 python 中的切片，我正在使用的工具在给定范围时比给定单个 id 时更快。

该模式基于在一个范围内，就像 python 中的切片一样。所以在示例中，1 和 2 被删除，因为它们已经包含在 0 到 3 的范围内。5 需要单独访问，因为它不在一个范围内，等等。这在大量 id 时更有帮助被包含在一个范围内，例如 [0, 5000]。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T21:36:57.133

Since you want the code to be fast, I wouldn't try to be too fancy. A straight-forward approach should perform quite well:

```
a = [0, 1, 2, 3, 5, 7, 8, 10]
it = iter(a)
start = next(it)
slices = []
for i, x in enumerate(it):
    if x - a[i] != 1:
        end = a[i]
        if start == end:
            slices.append([start])
        else:
            slices.append([start, end])
        start = x
if a[-1] == start:
    slices.append([start])
else:
    slices.append([start, a[-1]]) 
```

Admittedly, that's doesn't look too nice, but I expect the nicer solutions I can think of to perform worse. (I did not do a benchmark.)

Here is s slightly nicer, but slower solution:

```
from itertools import groupby
a = [0, 1, 2, 3, 5, 7, 8, 10]
slices = []
for key, it in groupby(enumerate(a), lambda x: x[1] - x[0]):
    indices = [y for x, y in it]
    if len(indices) == 1:
        slices.append([indices[0]])
    else:
        slices.append([indices[0], indices[-1]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T21:45:35.670

```
def runs(seq):
    previous = None
    start = None
    for value in itertools.chain(seq, [None]):
        if start is None:
            start = value
        if previous is not None and value != previous + 1:
            if start == previous:
                yield [previous]
            else:
                yield [start, previous]
            start = value
        previous = value 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:35:33.180

由于性能是一个问题，请使用[@SvenMarnach 的第一个解决方案，](https://stackoverflow.com/a/10987875/1219006)但这里有一个有趣的一条线，分成两行！:D

```
>>> from itertools import groupby, count
>>> indices = [0, 1, 2, 3, 5, 7, 8, 10]
>>> [[next(v)] + list(v)[-1:]
     for k,v in groupby(indices, lambda x,c=count(): x-next(c))]
[[0, 3], [5], [7, 8], [10]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T13:35:47.223

下面是一个简单的带有 numpy 的 python 代码：

```
def list_to_slices(inputlist):
      """
      Convert a flatten list to a list of slices:
      test = [0,2,3,4,5,6,12,99,100,101,102,13,14,18,19,20,25]
      list_to_slices(test)
      -> [(0, 0), (2, 6), (12, 14), (18, 20), (25, 25), (99, 102)]
      """
      inputlist.sort()
      pointers = numpy.where(numpy.diff(inputlist) > 1)[0]
      pointers = zip(numpy.r_[0, pointers+1], numpy.r_[pointers, len(inputlist)-1])
      slices = [(inputlist[i], inputlist[j]) for i, j in pointers]
      return slices 
```

# python - 从过去 7 天创建 QuerySet 对象

> ID：10987778
> 
> 赞同：26
> 
> 时间：2012-06-11T21:29:02.267
> 
> 标签：python, django

`posts = Post.objects.filter(author=member.user, xyz=xyz_id, pub_date >= datetime.datetime.now()-7)`

我想根据作者和 xyz 的要求提取所有帖子，这些帖子将来自过去 7 天。仅过去 7 天的结果。我知道这是错误的，但我不知道如何编码。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-11T21:40:36.717

```
from datetime import datetime, timedelta

posts = Post.objects.filter(author=member.user, xyz=xzy_id, pub_date__gte=datetime.now()-timedelta(days=7)) 
```

# python - 如何在 Python 中将数组平均划分为预定义的大小和循环折叠

> ID：10987783
> 
> 赞同：2
> 
> 时间：2012-06-11T21:29:25.633
> 
> 标签：python

我正在使用 python 并尝试进行 10 次折叠循环。为了解释这个问题，我有一个任何大小> 10 的任何内容的数组，例如：

```
myArray = [12,14,15,22,16,20,30,25,21,5,3,8,11,19,40,33,23,45,65]
smallArray = []
bigArray = [] 
```

**我想做两件事：**

1.  将“myArray”分成 10 个相等的部分 [例如 part1, part2, ..., part10]
2.  我需要循环 10 次，每次**执行以下操作：**
    *   smallArray = 一次一个不同的部分
    *   其余部分分配到“bigArray”

并继续为剩下的 10 折做这个。

输出例如：

```
Loop1: smallArray = [part1], bigArray[the remaining parts except part1]
Loop2: smallArray = [part2], bigArray[the remaining parts except part2]
...
Loop10: smallArray = [part10], bigArray[the remaining parts except part10] 
```

如何在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:50:33.520

```
l = len(myArray)

#create start and end indices for each slice
slices = ((i * l // 10, (i + 1) * l // 10) for i in xrange(0, 10))

#build (small, big) pairs
pairs = [(myArray[a:b], myArray[:a] + myArray[b:]) for a, b in slices]

for small, big in pairs:
    pass 
```

# ruby - mongo减去两个字段

> ID：10987790
> 
> 赞同：0
> 
> 时间：2012-06-11T21:29:50.647
> 
> 标签：ruby, mongodb

我有一个 mongo 集合，其中包含两个字段“fieldA”和“fieldB”的文档，它们是时间戳，我需要获取所有文档“（fieldB-fieldA）/6000 > 2”......所以我在寻找对于某些功能，为了做到这一点......

我在一些帖子中看到了函数“$subtract”，但这似乎是在 mongo 2.1.x 中，目前我正在使用 2.0.x（它是稳定的），知道如何用 2.0.x 做到这一点吗？还是我需要创建一个新字段？或者我只能在应用程序端这样做吗？

顺便说一句，我正在使用 ruby​​ mongo 驱动程序...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:55:24.407

您可以使用 $where 运算符将查询表达式指定为 Javascript。在外壳中：

db.myCollection.find( { $where: "(this.fieldB - this.fieldA)/6000 > 2" } );

但是，您应该注意，Javascript 的执行速度可能非常慢。如果这是一次性查询， $where 可能是一个不错的解决方案。否则，将等式的结果存储在单独的字段中是确保查询及时的最佳方式。

$where 运算符的附加信息： [http ://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)

# android - 如何在android中禁用标签栏项目？

> ID：10987794
> 
> 赞同：0
> 
> 时间：2012-06-11T21:30:03.203
> 
> 标签：android, android-widget, android-tabhost, android-tabactivity, android-tabs

我正在制作我的第一个安卓应用程序。我想在我的 android 应用程序中禁用选项卡 bat 项目。我搜索并找到了以下方法：

```
 tabHost = (TabHost)findViewById(R.id.tabhost);
 tabHost.getTabWidget().getChildTabViewAt(your_index).setEnabled(false); 
```

但它不起作用，我收到以下错误：

```
 06-11 16:53:15.927: D/AndroidRuntime(8466): Shutting down VM
 06-11 16:53:15.927: W/dalvikvm(8466): threadid=1: thread exiting with uncaught exception (group=0x40028a00)
 06-11 16:53:16.037: D/dalvikvm(8466): GC_FOR_MALLOC freed 5350 objects / 347632 bytes in 98ms
 06-11 16:53:16.047: E/AndroidRuntime(8466): FATAL EXCEPTION: main
 06-11 16:53:16.047: E/AndroidRuntime(8466): java.lang.IllegalStateException: Could not execute method of the activity
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.view.View$1.onClick(View.java:2072)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.view.View.performClick(View.java:2408)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.view.View$PerformClick.run(View.java:8817)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.os.Handler.handleCallback(Handler.java:587)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.os.Handler.dispatchMessage(Handler.java:92)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.os.Looper.loop(Looper.java:143)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.app.ActivityThread.main(ActivityThread.java:4914)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at java.lang.reflect.Method.invokeNative(Native Method)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at java.lang.reflect.Method.invoke(Method.java:521)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at dalvik.system.NativeStart.main(Native Method)
 06-11 16:53:16.047: E/AndroidRuntime(8466): Caused by: java.lang.reflect.InvocationTargetException
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at com.eplinovo.runnoandroid.ActivityViewActivity.startClick(ActivityViewActivity.java:40)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at java.lang.reflect.Method.invokeNative(Native Method)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at java.lang.reflect.Method.invoke(Method.java:521)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    at android.view.View$1.onClick(View.java:2067)
 06-11 16:53:16.047: E/AndroidRuntime(8466):    ... 11 more
 06-11 16:53:16.047: E/AndroidRuntime(8466): Caused by: java.lang.NullPointerException
 06-11 16:53:16.047: E/AndroidRuntime(8466):    ... 15 more 
```

为什么我会这样？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:39:09.930

行。转到logcat中错误的顶部，即ActivityViewActivity.startClick。继续并单击此行。它将带您到 startClick 方法中存在空指针异常的某些行。告诉我们那条线上是什么。这可能是上面的行。如果它比例如 tabHost 可能为空。单独检查。

```
 tabHost.getWidget() 
  tagHost.getWidget().getChildTabViewAt(your_index)  // I bet its this one thats null. 
```

如果上述任何一项为空，您将得到该异常，假设该行导致问题。如果不是，它在另一条线上有类似的东西。

所以分而治之。找到线。将其拆分以查找可能为空的内容。然后在行运行之前设置一个断点，一次执行一行。将鼠标悬停在每一步查看什么是空的。这就是你如何解决android中的任何空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T08:46:38.517

我没有以正确的方式获得标签。

```
 tabHost = (TabHost)findViewById(R.id.tabhost); 
```

以下是从子活动中获取 tabhost 的正确方法：

```
 tabHost = (TabHost)getParent().findViewById(android.R.id.tabhost); 
```

# c# - 如何从用户提供的年份值中减去年份

> ID：10987796
> 
> 赞同：0
> 
> 时间：2012-06-11T21:30:19.597
> 
> 标签：c#, datetime

我有一个包含给定年份的文本字段，例如“2011”。我需要计算 70 年前那一年的价值。

我已经有了这段代码，它为文本框提供了一个默认值：

```
var LastYear = DateTime.Now.AddYears(-1).ToString("yyyy"); //"2011"
Yeartextbox.Text = LastYear; 
```

允许用户将文本框的值更改为他们想要的任何年份。我需要从文本框中取出数据，然后计算 70 年前。例如，如果文本框包含“2011”，我需要 1941 的结果；如果用户输入 2000 我需要 1930 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:34:24.567

是什么阻止您从文本框读取并分配给`DateTime`对象并调用`AddYears`函数？

```
DateTime dateEntered=DateTime.Parse(Yeartextbox.Text);
var thatYear= dateEntered.AddYears(-70);
Yeartextbox.Text = thatYear.ToShortDateString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:34:32.437

我不确定我是否理解......但这就是你要找的......用-70预污染文本框？

```
var LastYear = DateTime.Now.AddYears(-70).ToString("yyyy"); //"2011" 
Yeartextbox.Text = LastYear; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:38:51.047

您将一年存储到文本框中，而不是日期。只是，例如，2011。那只是一个数字，一个整数，你可以对其进行整数数学运算。（恰好是一年这一事实与`-`运营商无关。）

如果您想从中减去 70 年，只需执行 2011 - 70 年：

```
var year = Int32.Parse(Yeartextbox.Text) - 70; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T21:41:05.560

假设您有两个文本框，请按以下步骤操作：

```
// Get year as an integer from the text box
int currentYearAsInt = int.Parse(txtCurrentYear.Text);

// Create DateTime out of it (January 1st 1984, for example)
DateTime currentYear = new DateTime(currentYearAsInt, 1, 1);

// Create new DateTime 70 years older (remember, you cannot just call AddYears on the object, you have to assign returned value)
DateTime oldYear = currentYear.AddYears(-70);

// Populate new text box with old year's value (or do whatever you want with it
txtOldYear.Text = oldYear.Year.ToString(); 
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T21:43:25.530

> 例如，如果他们想要今年，它将是 2012-70

如果我对您的理解正确，则将年份从用户转换为`DateTime`对象时会遇到问题。

所以如果用户输入了`2005`你想要的 fe `1935-01-01`。我对吗？

这会起作用：

```
var input = "2005";  // Yeartextbox.Text
int year = 0;
DateTime result;
if(int.TryParse(input, out year))
{
    result = new DateTime(year, 1, 1).AddYears(-70); //1935-01-01
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T21:44:03.333

```
 string initialYear = "2011";
        int year;
        string calculatedYear;

        if (int.TryParse(initialYear, out year))
        {
            var initialDate = new DateTime(year, 1, 1);
            calculatedYear = initialDate.AddYears(-70).Year.ToString();
        }
        else
        { 

            // Handle error since no valid value was entered
        } 
```

这将完成工作（您显然需要使其适应您的代码）。如果没有，您可能需要确保屏幕已正确刷新。

# jquery - GoogleMap在隐藏的div偏离中心

> ID：10987802
> 
> 赞同：0
> 
> 时间：2012-06-11T21:30:50.080
> 
> 标签：jquery, google-maps

我为谷歌地图使用 GoMap jQuery 插件。带有地图的 div 默认是隐藏的。我几乎想出了如何正确显示地图，但不知何故，在我显示 div 后我无法将地图居中。我尝试了所有能找到的解决方案，现在我有下面的代码，但仍然无法正常工作。任何人都可以帮助我吗？谢谢。

```
<h3><a class="showmap" href="#">Show map</a></h3>
<div id="map" style="height: 350px; width: 700px;"> </div>

<script type="text/javascript">
$(function() { 
$("#map").goMap({
markers: [{  
        latitude: 49.676196, 
        longitude: 13.444927, 
        html: { 
            content: 'Marker description', 
            popup: true 
        } 
    }], 
    hideByClick: false,
    zoom: 12
}); 
});

$(document).ready(function(){
    $("#map").hide();
});

$('.showmap').click(function(){
 $('#map').slideToggle('slow', function() {
  var center = $.goMap.map.getCenter();      
  google.maps.event.trigger($.goMap.map, 'resize');
  $.goMap.map.setCenter(center);
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:14:03.297

您的解决方案几乎是完美的，但默认情况下，地图将平移以使 infoWindow 可见，这将改变中心。
您可以禁用 AutoPan：

```
$("#map").goMap({
markers: [{  
        latitude: 49.676196, 
        longitude: 13.444927, 
        html: { 
            content: 'Marker description', 
            popup: true ,
            disableAutoPan:true//<--
        } 
    }], 
    hideByClick: false,
    zoom: 12
}); 
}); 
```

# android - 带有 admob 的 libGDX 应用程序抛出 NoClassDefFoundError

> ID：10987805
> 
> 赞同：1
> 
> 时间：2012-06-11T21:31:07.763
> 
> 标签：android, admob, libgdx

请帮我弄清楚为什么下面注释掉的行会导致`NoClassDefFoundError`

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);             
    RelativeLayout layout = new RelativeLayout(this);  
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

    View gameView = initializeForView(new GraphicsView(), false);
    // ERROR comes from these lines:
    // AdView adView = new AdView(this, AdSize.BANNER, "a14fd65977f0c9f");
    // adView.loadAd(new AdRequest());

    RelativeLayout.LayoutParams adParams = 
            new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                            RelativeLayout.LayoutParams.WRAP_CONTENT);
    adParams.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    adParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);

    layout.addView(gameView);
    setContentView(layout);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T00:16:28.487

我必须在项目根目录中创建一个“libs”文件夹。不是“lib”、“libs”。并将您的 Admob jar 放在那里，并检查它是否已在 -Properties->Build Path 中导出。

一次得到那个错误：p

# android - Android USB-“找不到端点”

> ID：10987808
> 
> 赞同：1
> 
> 时间：2012-06-11T21:31:09.487
> 
> 标签：android, usb, endpoint

我是一名初学者 android 程序员，正在尝试使用我的平板电脑和设备设置一些 USB 功能。我的程序使用 Intent 过滤器来查找设备。我拿了 Android 的 MissileLauncherActivity.java 示例并重写了它。我在 logcat 中收到“找不到端点”错误。我的代码有问题吗，或者可能是我的设备？LogCat 在尝试查找 OUT 端点的 setDevice 方法中查找错误。这是代码：

```
public class UsbTestActivity extends Activity implements Runnable {

private UsbManager mUsbManager;
private UsbDevice mDevice;
private UsbDeviceConnection mConnection;
private UsbEndpoint mEndpointIntr;
private static final String TAG = "UsbTestActivity";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mUsbManager = (UsbManager)getSystemService(Context.USB_SERVICE);
}

@Override
public void onPause(){
    super.onPause();
}

@Override
public void onResume(){
    super.onResume();

    Intent intent = getIntent();
    Log.d(TAG, "intent: " + intent);
    String action = intent.getAction();
    UsbDevice device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
    if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
        setDevice(device);
    } else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
        if (mDevice != null && mDevice.equals(device)) {
            setDevice(null);
        }
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
}

public void setDevice(UsbDevice device){
    Log.d(TAG, "setDevice " + device);
    if (device.getInterfaceCount() != 1) {
        Log.e(TAG, "could not find interface");
        return;
    }
    UsbInterface intf = device.getInterface(0);
    // device should have one endpoint
    if (intf.getEndpointCount() != 1) {
        Log.e(TAG, "could not find endpoint");
        return;
    }
    System.out.println("Got endpoint");
    // endpoint should be of type interrupt
    UsbEndpoint ep = intf.getEndpoint(0);
    if (ep.getType() != UsbConstants.USB_ENDPOINT_XFER_INT) {
        Log.e(TAG, "endpoint is not interrupt type");
        return;
    }
    mDevice = device;
    mEndpointIntr = ep;
    if (device != null) {
        UsbDeviceConnection connection = mUsbManager.openDevice(device);
        if (connection != null && connection.claimInterface(intf, true)) {
            Log.d(TAG, "open SUCCESS");
            mConnection = connection;
            Thread thread = new Thread(this);
            thread.start();

        } else {
            Log.d(TAG, "open FAIL");
            mConnection = null;
        }
     }
}

private void sendCommand(int control) {
    synchronized (this) {
        if (mConnection != null) {
            byte[] message = new byte[1];
            message[0] = (byte)control;
            // Send command via a control request on endpoint zero
            if(mConnection.controlTransfer(0x21, 0x9, 0x200, 0, message, message.length, 0) > 0){
                Log.d(TAG, "Sending Failed");
        }
    }
}
}

public void run() {
    ByteBuffer buffer = ByteBuffer.allocate(1);
    UsbRequest request = new UsbRequest();
    request.initialize(mConnection, mEndpointIntr);
    byte status = -1;
    while (true) {
        // queue a request on the interrupt endpoint
        request.queue(buffer, 1);
        // send poll status command
        if (mConnection.requestWait() == request) {
            byte newStatus = buffer.get(0);
            if (newStatus != status) {
                Log.d(TAG, "got status " + newStatus);
                status = newStatus;
                sendCommand(7);

            }
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
            }
        } else {
            Log.e(TAG, "requestWait failed, exiting");
            break;
        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:08:44.967

```
// device should have one endpoint
    if (intf.getEndpointCount() != 1) {
        Log.e(TAG, "could not find endpoint");
        return;
    } 
```

看起来您正在尝试使用 USB HID 设备及其 OUT 端点。但是 HID 要求 IN 端点存在 - 所以`getEndpointCount()`很可能会返回`2`而不是一个。您将需要检查哪个是 IN，哪个是 OUT。

# database - 仅使用不可预测数量的外键构建多对多数据库模式

> ID：10987809
> 
> 赞同：1
> 
> 时间：2012-06-11T21:31:17.263
> 
> 标签：database, schema, database-schema, schema-design

下午好（至少在这附近），

我有一个多对多关系模式，但在构建时遇到了麻烦。主要问题是我只使用主键和外键（没有 varchars 或枚举来简化事情），并且多对多关系的数量是不可预测的，并且可以随时增加。

我环顾了各种问题，找不到直接解决这个问题的东西。

我把问题分成两半，所以我现在有两个一对多的模式。一个解决了，但另一个让我很不舒服。

让我们假设表 FOO 是一个标准的、无聊的表，它有一个简单的主键。它是一对多关系中的一个。

表 BAR 可以与 FOO 的多个键相关。事先不知道相关键的数量。

一个例子：

1.  从查询 FOO 返回 ids 3、4、5。
2.  BAR 需要一个与 3、4、5 相关的唯一键（尽管可能返回任意数量的 id）

通常的连接表不起作用：

```
Table FOO_BAR
primary_key  |  foo_id  |  bar_id  | 
```

由于 FOO 返回 3 个唯一键，并且此处 bar_id 与 foo_id 具有一对一的关系。

拥有两个连接表似乎也不起作用，因为它仍然无法将 foo_ids 3、4、5 映射到单个 bar_id。

```
Table FOO_TO_BAR
primary_key  |  foo_id  |  bar_to_foo_id  |

Table BAR_TO_FOO
primary_key  |  foo_to_bar_id  |  bar_id  | 
```

我究竟做错了什么？我让事情变得比他们更复杂吗？我应该如何处理这个问题？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:36:17.403

FOO-BAR 对我来说看起来不错。你为什么不认为这行得通？

```
Say FOO = 1,2,3
Say BAR = A,B,C

Then an everything to everything relation will look like:
FOOBAR = 1, A; 1, B; 1, C; 2, A; 2, B; 2, C; 3, A; 3, B; 3, C 
```

您可以使主键 foo_id、bar_id 不需要单独的键，除非您真的想要一个，这样可以避免重复关系。

# ios - 詹金斯工作区结构

> ID：10987810
> 
> 赞同：0
> 
> 时间：2012-06-11T21:31:18.153
> 
> 标签：ios, svn, jenkins

我有一个 iOS 项目，我试图将其作为 Continuos 集成的一部分。显然，每次我尝试编译项目时，它都会给我一个找不到文件的错误。

整个目录的结构如下

ABC/test2/Feed/xcodeproject.xcodespace

因此，在 SVN 中，我的网址如下：

www.company.com/trunk/

在trunk之后，ABC的整个目录被下载，并且应用程序的结构是正确的。但是，当我尝试构建应用程序时

> xcodebuild ARCHS=i386 ONLY_ACTIVE_ARCH=NO -target "ABC" -configuration Release -sdk iphonesimulator

现在 ABC 项目的内容位于 /ABC/test2/Feed/ 目录中，因此生成的错误是目录“xyz”不包含 Xcode 项目。

如果我使用 svn 作为 www.company.com/trunk/ABC/test2/Feed/ 的另一种方法，那么结构中的某些文件不会正确放置，并说文件丢失并且无法构建。

我如何解决第一个场景，我打赌在 Jenkins 配置中更容易解决所有这些问题？

谢谢

# java - String Tokenizer - 2 var 中的字符串

> ID：10987817
> 
> 赞同：1
> 
> 时间：2012-06-11T21:31:42.617
> 
> 标签：java, stringtokenizer

大家好，我想使用 StringTokenizer 将这个字符串“Ronald Andrade”拆分为 2 个 var。

我有这个代码：

```
package domApli;
import java.util.StringTokenizer;

public class string {

public static void main(String[] args) {

    String paciente = "Ronald Andrade";
    String linea = paciente;
    StringTokenizer tokens = new StringTokenizer(linea);
    String a= "";
    while(tokens.hasMoreTokens()){
        a+=tokens.nextToken();
    }

    System.out.print(a);

}

} 
```

我想要这样的东西：

```
String x = "Ronald";
String y = "Andrade"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:33:32.187

最好使用类中[`split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))找到的方法`String`，如下所示：

```
String[] data = paciente.split("\\s+");
String x = data[0];  // x = "Ronald"
String y = data[1];  // y = "Andrade" 
```

出于所有实际目的，[`StringTokenizer`](http://docs.oracle.com/javase/7/docs/api/java/util/StringTokenizer.html)已[弃用](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)，您应该停止使用它：

> StringTokenizer 是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人改用 String 的 split 方法或 java.util.regex 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:41:06.670

您发布的代码将与输入相同。对于所需的结果，请尝试此代码，

公共静态无效主要（字符串[]参数）{

```
String paciente = "Ronald Andrade";
String linea = paciente;
StringTokenizer tokens = new StringTokenizer(linea);
String x= "";
String y= "";
int i = 0;
while(tokens.hasMoreTokens()){
 if ( i = 0) {
         x = tokens.nextToken();
  }
  i = i+1;
 else
  {
      y = tokens.nextToken();
   }

}

System.out.print(x);
 System.out.print(y); 
```

}

这是一种非常粗暴和低效的方式。如果您更喜欢拆分功能会更好。您还可以使用子字符串函数。他们两个都足够快。

# android - 在android中使用DOM查找文件路径的IO异常

> ID：10987818
> 
> 赞同：0
> 
> 时间：2012-06-11T21:31:43.147
> 
> 标签：android, dom, filepath, ioexception

有一些帖子回复：这个主题，但无法弄清楚为什么这不起作用。继续获得一个`IOException`. 估计找不到文件。干杯。

```
DocumentBuilderFactory factory  = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse("//res/xml/xml_data.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:44:55.653

您的网址不正确。资源采用以下形式：

```
"android.resource://[package]/[res type]/[res name]" 
```

或者

```
"android.resource://[package]/[res id] 
```

IE

```
"android.resource://com.org.example/xml/xml_data" // No extension

"android.resource://com.org.example/" + R.xml.xml_data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:39:40.380

用这个改变你的

```
DocumentBuilderFactory factory  = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse("res/xml/xml_data.xml"); 
```

# c - 如何使用内联汇编比较数据？

> ID：10987819
> 
> 赞同：0
> 
> 时间：2012-06-11T21:31:48.583
> 
> 标签：c, assembly, x86, inline-assembly

我一直很难弄清楚这一点。所以我使用的是内联汇编，我基本上是在尝试将用户使用 Scanf 键入的数字与数字“20 美元”进行比较。

但我认为这是比较位置而不是实际价值。

这是我所拥有的：

```
asm(
    "main:                                                                                              \n"
    "                                                                                              \n"
    "push $msg                                                                                             \n"
    "call _printf                                                                                              \n"
    "add $4, %esp                                                                                              \n"
    "                                                                                              \n"
    "push $gus                                                                                              \n"
    "push $fmt                                                                                              \n"
    "call _scanf                                                                                              \n"
    "add $8, %esp                                                                                              \n"
    "                                                                                              \n"
    "movl $20, %eax                                                                                         \n"
    "movl $gus, %ebx                                                                                          \n"
    "cmp %eax, %ebx                                                                                             \n"
    "jg lower                                                                                              \n"
    "jl higher                                                                                              \n"
    "                                                                                              \n"
    "lower:                                                                                              \n"
    "push $lss                                                                                              \n"
    "call _printf                                                                                              \n"
    "add $4, %esp                                                                                              \n"
    "jmp next                                                                                              \n"
    "                                                                                              \n"
    "higher:                                                                                              \n"
    "push $gtr                                                                                              \n"
    "call _printf                                                                                              \n"
    "add $4, %esp                                                                                              \n"
    "jmp next                                                                                              \n"
    "                                                                                              \n"
    "next:                                                                                              \n"
    "jmp main                                                                                              \n"
    "ret                                                                                              \n"
    "                                                                                              \n"
    ".section .data                                                                                              \n"
    "msg: .asciz \"Please enter your guess: \"                                                                                              \n"
    "gtr: .asciz \"Higher! \"                                                                                     \n"
    "lss: .asciz \"Lower! \"                                                                               \n"
 //   "crr: .asciz \"Please enter your guess: \"                                                                                              \n"
    "fmt: .asciz \"%d\"                                                                                              \n"
    ".double 100                                                                                             \n"
    ".byte 0                                                                                             \n"
    "gus: .double 100                                                                                             \n"
    ".byte 0                                                                                         \n"
    ); 
```

是的，我知道这段代码确实没有实际使用的意义。我写这篇文章的目的实际上只是为了弄清楚如何比较。

但我的问题是，在：

```
 "movl $20, %eax                                                                                         \n"
"movl $gus, %ebx                                                                                          \n"
"cmp %eax, %ebx 
```

它应该将 20 与“gus”或用户输入的“guess”进行比较。但无论他们输入什么，它总是说“Lower”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:38:02.177

我承认我使用的汇编风格略有不同，但是 $20 不使用寄存器 20 中的值，而不是文字值 20？根据该程序集的工作方式，您应该将 20 作为立即数进行比较，或者将 20 加载到寄存器中并与该寄存器进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:06:35.903

在比较之前，您将 的地址而`gus`不是其值加载到 EBX。

你更大的问题是你试图用内联汇编做太多事情。
你想在汇编中进行比较？很好，对比一下。但是为什么要调用`printf`and`scanf`以及所有其他的呢？

# css - 两列仅等高css（不显示：表格，表格行，表格单元格）

> ID：10987821
> 
> 赞同：9
> 
> 时间：2012-06-11T21:31:49.637
> 
> 标签：css, height, equals

在 CSS 中，我可以这样做： [http://s1.ipicture.ru/uploads/20120612/Uk1Z8iZ1.png http://s1.ipicture.ru/uploads/20120612/Uk1Z8iZ1.png](http://s1.ipicture.ru/uploads/20120612/Uk1Z8iZ1.png)

但我不知道如何将其更改为：http: [//s2.ipicture.ru/uploads/20120612/eI5sNTeu.png http://s2.ipicture.ru/uploads/20120612/eI5sNTeu.png](http://s2.ipicture.ru/uploads/20120612/eI5sNTeu.png)

***高度不固定***

**请帮我做！谢谢大家！**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-11T21:49:56.373

我用这个，纯CSS。

的HTML：

```
<div id="container" class="holder">
    <div id="column-one" class="even-height">TEXT</div>
    <div id="column-two" class="even-height">TEXT</div>
</div> 
```

的CSS：

```
.holder {
   overflow: hidden;
   clear:    both;
}
.holder .even-height {
   float: left;
   padding-bottom: 100000px;
   margin-bottom:  -100000px;
}
#column-one { width: 30%; }
#column-two { width: 70%; } 
```

这些列实际上可以是您想要的任何宽度。无论如何，超级简单且跨浏览器友好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-11T21:41:20.857

[具有等高列的可变高度包装器](http://jsfiddle.net/gZLN8/7/)

## HTML

```
<section class="wrapper">
    <section>a</section>
    <aside>b<br>c</aside>
</section> 
```

## CSS

```
/* Set @max-column-height to greater than the maximum height of the tallest column */
.wrapper {
    overflow:hidden;
    margin:10px;
}
.wrapper > section {
    background:red;
    width:50%;
    float:left;
    padding-bottom:1000px; /* @max-column-height */
    margin-bottom:-1000px; /* @max-column-height */
}
.wrapper > aside {
    background:orange;
    width:50%;
    float:left;
    padding-bottom:1000px; /* @max-column-height */
    margin-bottom:-1000px; /* @max-column-height */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T22:39:25.397

我更喜欢 broh's/manonatelier 的更好（每个 +1），但如果你真的想要一个*完全*独立于内部内容量的解决方案，我会使用旧的设计“钩子”技术：http: [//jsfiddle.net /GTY8P/](http://jsfiddle.net/GTY8P/)

...使用更多的标记和 CSS。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T21:38:23.200

Make a wrapper with a div like this :

```
<div class="wrapper">
    <div class="box">Box 1</div>
    <div class="box">Box 2</div>
</div> 
```

Apply a style like that :

```
.wrapper {
    height: 400px;
}

.wrapper .box{
    float: left;
    height: 100%;
    width: 200px;
    background-color: red;
    margin-right: 10px;
}​ 
```

Didn't try, but will work.

**EDIT** jsFiddle : [http://jsfiddle.net/NXjk4/](http://jsfiddle.net/NXjk4/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T21:52:13.893

检查这个

## **HTML**

```
<div class="box" >
    <div class="box1">TEXT</div>
    <div class="box2">TEXT</div>
</div>​ 
```

## **CSS**

```
 .box{
    background:#000;
    height:60px
}

.box1{
    float: left;
    background-color: #fff;
    margin: 10px;
    text-align:center;
}
.box2{
    float: left;
    background-color: red;
    margin: 10px;
    margin-left:5px;
    text-align:center;
}​ 
```

**在此处查看演示：http:** [//jsfiddle.net/X3UY9/1/](http://jsfiddle.net/X3UY9/1/)

# ruby-on-rails - Rails 3 初学者 - 寻求关于图像上传和图库的建议

> ID：10987822
> 
> 赞同：1
> 
> 时间：2012-06-11T21:31:50.150
> 
> 标签：ruby-on-rails, image, gallery

我决定开始尝试使用 Rails 3 构建一个网站。我对它很陌生，实际上我只是在寻找有关如何开始的建议。我之前在这里问过问题并被问到“你已经尝试过什么？”，在这种情况下，我尝试按照我在网上找到的几个教程进行操作，但它们都适用于 Rails 1 或 2 ，而且我不明白的3中似乎有一些差异。

至于我为什么要使用 Rails 3 而不是 1 或 2 - 这是为了加快工作速度，到目前为止，我一直专注于前端开发，但想开始分支并做更复杂的事情。

我希望这个网站做的是允许用户上传一张图片，然后在主页上显示为列表项（稍后我将添加灯箱和其他东西，但我认为这很容易解决）。

任何建议或建议的指针将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:47:55.520

Rails 中的文件上传有很好的文档记录，但正如您所提到的，许多在线教程都是基于 Rails 2.x 的。

如果您刚刚开始，我建议您使用[回形针](https://github.com/thoughtbot/Paperclip)或[CarrierWave](https://github.com/jnicklas/carrierwave)来处理 Rails 应用程序中的文件上传。这两个项目都非常好，但我想你会发现 CarrierWave 从长远来看更加灵活。

此外，作为 Rails 的初学者，您可能还想查看 Ryan Bates 的[RailsCasts](http://railscasts.com/)，它是 Rails 的所有内容的绝佳资源。事实上，CarrierWave 和 Paperclip 文件上传都包含在剧集中。我提供了下面的链接。

[#253 - CarrierWave 文件上传](http://railscasts.com/episodes/253-carrierwave-file-uploads)- 这是 Rails 3 特定的。

[#134 - Paperclip](http://railscasts.com/episodes/134-paperclip) - Rails 2，但此处提供的信息以及项目 GitHub 页面上的 README 应该为您提供所需的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:41:48.587

这个 railscast 真的是你所需要的：[http ://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)

它将使用 Carrierwave 进行上传，使用 RMagick 进行图像处理。

最后：此时没有人会推荐 Rails 1 或 2。只需从 3.2.5 开始，并且做得很好。

# javascript - 如果在第二个下拉列表中选择 jquery dropdownlist 隐藏值

> ID：10987830
> 
> 赞同：2
> 
> 时间：2012-06-11T21:32:53.280
> 
> 标签：javascript, jquery, asp.net, drop-down-menu

好的，所以我有两个下拉菜单，我希望下拉菜单中的选定项目隐藏在下拉菜单二中，反之亦然。

到目前为止，我已经完成了以下操作，似乎无法弄清楚最后一步是希望得到帮助。

我目前拥有的是我有两个列表追加到下拉列表中，这些列表循环并将值追加到下拉列表中，然后我检查更改事件，当发生这种情况时，我根据其索引从下拉列表中删除值.

我目前正在删除 selectedIndex，我想删除 selectedValue 而不是索引，但也无法掌握。

```
<script type="text/javascript">

    var fromCurrencies = {

        FRO : 'Convert this currency',
        AUD : 'AUD, Australian Dollar',
        NZD : 'NZD, New Zealand Dollar',
        EUR : 'EUR, Euro',
        USD : 'USD, United States Dollar',
    };

    var toCurrencies = {
        TOC : 'To this currency',
        AUD : 'AUD, Australian Dollar',
        NZD : 'NZD, New Zealand Dollar',
        EUR : 'EUR, Euro',
        USD : 'USD, United States Dollar',
    };

    $(document).ready(function () {

        var ddFrom = $(".ddConvertFrom");
        $.each(fromCurrencies, function (val, text) {
            ddFrom.append(
                $('<option></option>').val(val).html(text)
            );
        }); /*End ddFrom loop*/

        var ddTo = $(".ddConvertTo");
        $.each(toCurrencies, function (val, text) {
            ddTo.append(
                $('<option></option>').val(val).html(text)
            );
        }); /*End ddTo loop*/

    }); /*End document.ready function*/

    function doAction(){

        if ($('.ddConvertFrom').val == "" || $('.ddConvertFrom').get(0).selectedIndex == 0) {
            //Do nothing or hide...?
        } else {
            /*Hide selected value from other dropdown*/
            var index = $('.ddConvertFrom').get(0).selectedIndex;
            $('.ddConvertTo option:eq(' + index + ')').remove();
        }

    }

</script> 
```

的HTML：

```
<div class="selectstyler">
    <asp:DropDownList ID="ddConvertFrom" OnChange="doAction()" CssClass="ddConvertFrom" runat="server"></asp:DropDownList>
</div>

<div class="selectstyler">
    <asp:DropDownList ID="ddConvertTo" CssClass="ddConvertTo" runat="server"></asp:DropDownList>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:35:05.897

纯粹是为了完整性，以添加到来自`undefined`.

要解决反之亦然以及重新添加这些值的扩展问题，包括自动选择先前的值（如果存在），请参阅：[**DEMO**](http://jsfiddle.net/FranWahl/kZdNC/6/)

请参阅下文，了解我对您的原始脚本所做的更改。

我确信下面的代码可以在多个级别上进行优化，但我只是尝试让它首先工作。让它漂亮我留给你:)

首先，我重构了您的代码，以便将这些值附加到它们各自的方法中。在重新添加值之前，下拉列表现在已完全清除。

首先，虽然我们记录了当前选择的选项的值，以确保如果它存在我们可以重新选择它。为其添加更动态的感觉并保存手动重新选择的用户表单。

请参阅将值附加到 from-dropdown 的示例：

```
function attachFromValues() {
    var ddFrom = $(".ddConvertFrom");
    var selectedValue = ddFrom.val();
    var selectedIndex = 0;

    ddFrom.html("");
    var index = 0;
    $.each(fromCurrencies, function(val, text) {
        ddFrom.append(
        $('<option></option>').val(val).text(text));

        if (selectedValue == val) {
            selectedIndex = index;
        }

        index++;
    }); /*End ddFrom loop*/

    if (selectedIndex > 0) {
        ddFrom.get(0).selectedIndex = selectedIndex;
    }
}; 
```

我还重构了删除另一个下拉列表中的值的代码，调用新的重构方法首先重新附加所有值，然后再删除特定值。这样可以确保您不会在一段时间后得到一个空的下拉列表。

`change`请参阅to-dropdown 事件的示例：（
*取自* `undefined`的*答案，仅添加了重新填充的调用）*

```
$('select.ddConvertTo').change(function() {
    if ($('.ddConvertTo').val == "") {
        //Do nothing or hide...?
    } else { /*Hide selected value from other dropdown*/
        attachFromValues();
        var txt = $(this).val();
        $('.ddConvertFrom option[value=' + txt + ']').remove();
    }
}) 
```

有关完整的代码更改，请查看链接的[**DEMO**](http://jsfiddle.net/FranWahl/kZdNC/6/)

**编辑（2012 年 6 月 25 日）**
更新了代码，因为我注意到如果进行了默认选择（索引 0），货币没有正确重新设置不一致。此代码的最新版本现在可以正确地重新绑定货币。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:50:33.303

试试这个，而不是使用 onChange 属性，您可以使用更改事件处理程序。

```
$('select:first').change(function(){
            /*remove selected value from other dropdown*/
            var txt = $(this).val();
            $('.ddConvertTo option[value=' + txt + ']').remove();
 }) 
```

[http://jsfiddle.net/ue4Cm/1/](http://jsfiddle.net/ue4Cm/1/)

# android - 无法在 VideoView 中播放视频

> ID：10987833
> 
> 赞同：0
> 
> 时间：2012-06-11T21:33:17.373
> 
> 标签：android

我正在尝试在 VideoView 中播放视频，但我失败了。我在 Eclipse 模拟器中工作，并且有一半希望它不能在那里工作，但是当我在我的 Android 手机（版本 2.2.1）上安装我的应用程序时，它也失败了。我收到的错误消息是“无法播放视频。抱歉，无法播放此视频。” 视频位于 Raw 文件夹中。下面是我的代码。parsedData[3].toString() 是从数据库调用中提取的视频名称（不带 3gp 扩展名）。我究竟做错了什么？

```
VideoView videoview = (VideoView) findViewById(R.id.videoView);
videoview.setMediaController(new MediaController(this));
String path = "android.resource://" + getPackageName() + "/R.raw/" + parsedData[3].toString();
videoview.setVideoURI(Uri.parse(path));
videoview.requestFocus(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:22:07.613

您不能在 Raw 文件夹中播放视频。您应该将视频（.3gp、mp4）放入模拟器的 SD 卡中并播放。因为 Emulator 只支持播放 SD 卡中的视频（不适用于 Raw 类音频）。您可以查看此链接：[http](http://android-coding.blogspot.ca/2011/03/using-videoview-to-play-mp4-from-sdcard.html) ://android-coding.blogspot.ca/2011/03/using-videoview-to-play-mp4-from-sdcard.html 以了解如何在 Emulator Android 中播放 mp4 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T15:32:36.087

您应该在 SD 卡（模拟器和设备）中播放视频。要在模拟器中推送文件（视频、音频、图像），您应该看到此链接： http: [//www.streamhead.com/android-tutorial-sd-card/](http://www.streamhead.com/android-tutorial-sd-card/)

或查看此链接以尝试在链接上 [播放视频：尝试从原始文件夹播放视频 (VideoView)](https://stackoverflow.com/questions/3609219/trying-to-play-video-from-raw-folder-videoview)

# python - 从 PyCharm IDE 运行 Django 项目时出现“ImportError：没有名为 cv2 的模块”

> ID：10987834
> 
> 赞同：3
> 
> 时间：2012-06-11T21:33:27.623
> 
> 标签：python, django, opencv, pycharm

我正在从 PyCharm 运行一个 Django 项目，其配置设置为使用依赖于 opencv 的 virtualenv 中的 Python 解释器。当我运行该站点时，该站点在本地运行良好，但是当我尝试直接从 PyCharm IDE 运行项目时`django-admin.py runserver`，我不断收到“ ”错误。`ImportError: No module named cv2`

PyCharm和opencv还有其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-12T07:26:23.117

最后，我不得不直接在 Pycharm Edit Configurations -> Run/Debug Configurations -> Environment Variables 面板中设置环境变量。在您点击编辑按钮后，我添加了以下选项：设置名称`PYTHONPATH`和值，`/usr/local/lib/python2.7/site-packages:$PYTHONPATH`编辑后应在输入框中显示为`PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH`. 此外，我确保注销并重新登录 osx，这也适用于其他几个与路径相关的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-19T05:03:35.337

我不太确定这是否适合你们，但它适合我。就我而言，在我看来，我安装 OpenCV 是为了与 OS X 附带的默认 Python 一起工作。我记得我也尝试在我的 Mac 中安装 Python 2.7.5 和 Python 3，当我选择我的 Python 时我看到了它们Pycharm 的解释器。而且他们都没有让我导入模块 cv2。所以我改成默认的Python2.7.2（/System/Library/Frameworks/Python.framework/Versions/2.7/bin/python）。然后，在 File/DefaultSettings/Project Interpreter/Python Interpreter 中，单击已添加的 Python 解释器（Python 2.7.2），单击 Paths 并定位到“/usr/local/bin/python2.7/site-packages”并添加它。单击蓝色刷新按钮，应用并确定。然后它可以使用导入和自动完成。

问候，

# java - 无法在单个 JWindow 中将第二个 JLabel 添加到第二个 JPanel

> ID：10987842
> 
> 赞同：0
> 
> 时间：2012-06-11T21:34:07.327
> 
> 标签：java, swing, jpanel, flowlayout

我正在尝试将 2 个单独的 JLabels 添加到 2 个单独的 JPanel，所有这些都在一个 JWindow 中！第一个标签在第一个 JPanel 中显示良好。然而第二个 JLabel 没有显示，虽然第二个 JPanel 显示了！所以我只需要基本上知道如何将组件（在本例中为第二个 JLabel）添加到第二个 JPanel。任何帮助表示赞赏...

```
package numchucks;

import java.awt.*;
import java.util.TimerTask;
import javax.swing.*;
import java.util.*;
import java.util.Timer;
import java.util.TimerTask;

/**
 *
 * @author aubrey
 */
public class Numchucks {

    Toolkit toolkit = null;
    Dimension dim = null;
    Integer width = null;
    Integer height = null;
    static NumchuckPanel1 label;
    static NumchuckPanel2 label2;

    JWindow frame = new JWindow();
    Container c = null;

    JLabel title1 = new JLabel("Player 1.");
    JLabel title2 = new JLabel("Player 2.");

    static Timer timer;

    public Numchucks(){
        //get screensize
        //double initialTheta = Math.toRadians(0); // start north
        double initialTheta = Math.toRadians(90); // start west
        // double initialTheta = Math.toRadians(180); // start south
        double initialTheta2 = Math.toRadians(270); // start east

        label = new NumchuckPanel1("Foo Bar", //
                450, // circleCenterX
                325, // circleCenterY
                300, // radius
                initialTheta, //
                0.005); // thetaIncrement

        label2 = new NumchuckPanel2("Foo Bar", //
                450, // circleCenterX
                325, // circleCenterY
                300, // radius
                initialTheta2, //
                0.005); // thetaIncrement

        label.setBorder(BorderFactory.createLineBorder (Color.black, 1));
       label2.setBorder(BorderFactory.createLineBorder (Color.black, 1));

        label.addMouseListener(label);
        label2.addMouseListener(label2);

            label.add(title1); 

            //Problem is Here, why isnt title2 visible on label2????
            label2.add(title2);

         //get screensize
        toolkit =  Toolkit.getDefaultToolkit ();
        dim = toolkit.getScreenSize();
        width = dim.width;
        height = dim.height;
        frame = new JWindow();
        frame.setSize(dim);
        //frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.add(label);
        frame.add(label2);
        frame.setVisible(true);

        timer = new java.util.Timer();
        timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {

                        label.rotate();
                        //System.out.println(label.theta);
                        label2.rotate();
                        //System.out.println(label2.theta);
                    }
                });

            }
        }, 0, 1000l / 560l); // 60 frames per second

    }

    public static void main(String[] args) {
        new Numchucks();
    }
} 
```

我使用 2 个几乎相同的 JPanel，称为 numchuckPanel1 和 numchuckPanel2。继承人的代码：

```
package numchucks;

import java.awt.*;
import java.awt.event.*;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.*;

/**
 *
 * @author aubrey
 */
public class NumchuckPanel1 extends JPanel implements MouseListener{
     int circleCenterX;
     int circleCenterY;
     int radius;
     double theta;
    private final double thetaIncrement;
    static Timer timer;
    static Toolkit toolkit = null;
    static Dimension dim = null;
    static Integer width = null;
    static Integer height = null;
    static NumchuckPanel1 label;

    static Boolean isFin = false;
    static int w = 100;
    static int h = 100;
    static Boolean isOpen = true;
    //static JLabel title1;
    //static JLabel title2;
    static JWindow frame;

    public NumchuckPanel1(String text, //
        int circleCenterX, int circleCenterY, int radius, //
        double initialTheta, double thetaIncrement) {
        //super(text);
        //this.setSize(150, 150);

        this.setBackground(Color.WHITE);
        this.setVisible(true);
        this.circleCenterX = circleCenterX;
        this.circleCenterY = circleCenterY;
        this.radius = radius;
        this.theta = initialTheta;
        this.thetaIncrement = thetaIncrement;
        rotate();
    }

    public void rotate() {
                      if (w!=500){
                    w++;
                    h++;
    }
        setBounds( //

                this.circleCenterX - (int) (Math.sin(this.theta) * this.radius), //
                this.circleCenterY - (int) (Math.cos(this.theta) * this.radius), //
                w, h);
        this.theta -= this.thetaIncrement;

        if(this.theta<=-4.704203673205014){
            System.out.println("Stopping Timer....");
            Numchucks.timer.cancel();

            isFin=true;
        }
    }
 public void reverse() {
                      if (w!=100){
                    w--;
                    h--;
    }
        setBounds( //

                this.circleCenterX - (int) (Math.sin(this.theta) * this.radius), //
                this.circleCenterY - (int) (Math.cos(this.theta) * this.radius), //
                w, h);
        this.theta += this.thetaIncrement;

        if(this.theta>=Math.toRadians(90)){
            //this.theta=0.0d;
            System.out.println("Stopping Timer....");
           Numchucks.timer.cancel();

            isFin=true;

        }
    }
   public void mouseClicked(MouseEvent me) {
       if(isOpen){
           isOpen=false;
           NumchuckPanel2.isOpen=false;
        Numchucks.timer = new Timer();
        Numchucks.timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {

                        Numchucks.label.reverse();
                        Numchucks.label2.reverse();
                        System.out.println(theta);
                        //label2.rotate();
                        //System.out.println(label2.theta);
                    }
                });

            }
        }, 0, 1000l / 560l); // 60 frames per second
       return;
       }
       if(!isOpen){
       isOpen=true;
       NumchuckPanel2.isOpen=true;
        Numchucks.timer = new Timer();
        Numchucks.timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {

                        Numchucks.label.rotate();
                        Numchucks.label2.rotate();
                        System.out.println(theta);
                        //label2.rotate();
                        //System.out.println(label2.theta);
                    }
                });

            }
        }, 0, 1000l / 560l); // 60 frames per second
       return;
       }
    }
     public void mouseEntered (MouseEvent me) {}

     public void mousePressed (MouseEvent me) {

    }
     public void mouseReleased (MouseEvent me) {

    } 
     public void mouseExited(MouseEvent me){}

} 
```

第二个 NumchuckPanel 的代码在这里：

```
package numchucks;

import java.awt.*;
import java.awt.event.*;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.*;

/**
 *
 * @author aubrey
 */
public class NumchuckPanel2 extends JPanel implements MouseListener{
     int circleCenterX;
     int circleCenterY;
     int radius;
     double theta;
    private final double thetaIncrement;
    static Timer timer;
    static Toolkit toolkit = null;
    static Dimension dim = null;
    static Integer width = null;
    static Integer height = null;
    static NumchuckPanel2 label2;

    static Boolean isFin = false;
    static int w = 100;
    static int h = 100;
    static Boolean isOpen = true;
    //static JLabel title1;
    //static JLabel title2;
    static JWindow frame;

    public NumchuckPanel2(String text, //
        int circleCenterX, int circleCenterY, int radius, //
        double initialTheta, double thetaIncrement) {
        //super(text);
        //this.setSize(150, 150);

        this.setBackground(Color.WHITE);
        this.setVisible(true);
        this.circleCenterX = circleCenterX;
        this.circleCenterY = circleCenterY;
        this.radius = radius;
        this.theta = initialTheta;
        this.thetaIncrement = thetaIncrement;
        rotate();
    }

    public void rotate() {
                      if (w!=500){
                    w++;
                    h++;
    }
        setBounds( //

                this.circleCenterX - (int) (Math.sin(this.theta) * this.radius), //
                this.circleCenterY - (int) (Math.cos(this.theta) * this.radius), //
                w, h);
        this.theta -= this.thetaIncrement;

        //System.out.println(this.theta);

       if(this.theta<=-1.5776110196152204){
            System.out.println("Stopping Timer....");
            //Numchucks.timer.cancel();

            isFin=true;
        }

    }
     public void reverse() {
                      if (w!=100){
                    w--;
                    h--;
    }
        setBounds( //

                this.circleCenterX - (int) (Math.sin(this.theta) * this.radius), //
                this.circleCenterY - (int) (Math.cos(this.theta) * this.radius), //
                w, h);
        this.theta += this.thetaIncrement;
/*
-4.664203673205015
-4.669203673205015
-4.674203673205015
-4.679203673205015
-4.6842036732050145
-4.689203673205014
-4.694203673205014
-4.704203673205014
         */
        if(this.theta>=Math.toRadians(270)){
            //this.theta=0.0d;
            //System.out.println("Stopping Timer....");
           Numchucks.timer.cancel();

            isFin=true;

            /*for (int i = 100; i<500; i++){
                label.setSize(i,i);

            }*/
            //System.exit(0);
        }
    }
     public void mouseClicked (MouseEvent me) {
       if(isOpen){
           isOpen=false;
           NumchuckPanel1.isOpen=false;

        Numchucks.timer = new Timer();
        Numchucks.timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {

                        Numchucks.label.reverse();
                        Numchucks.label2.reverse();
                        //System.out.println(label.theta);
                        //label2.rotate();
                        //System.out.println(label2.theta);
                    }
                });

            }
        }, 0, 1000l / 560l); // 60 frames per second
        return;
       }
       if(!isOpen){
        isOpen=true;
        NumchuckPanel1.isOpen=true;

        Numchucks.timer = new Timer();
        Numchucks.timer.scheduleAtFixedRate(new TimerTask() {
            @Override
            public void run() {

                SwingUtilities.invokeLater(new Runnable() {
                    @Override
                    public void run() {

                        Numchucks.label.rotate();
                        Numchucks.label2.rotate();
                        //System.out.println(label.theta);
                        //label2.rotate();
                        //System.out.println(label2.theta);
                    }
                });

            }
        }, 0, 1000l / 560l); // 60 frames per second
       return;
       }
    }
     public void mouseEntered (MouseEvent me) {}

     public void mousePressed (MouseEvent me) {

    }
     public void mouseReleased (MouseEvent me) {

    } 
     public void mouseExited(MouseEvent me){}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:55:06.603

好的，设法解决了问题。

第二个 Jpanel 将 JLabel 向右对齐。在我的面板上使用左对齐流布局解决了这个问题：

```
JPanel panel = new JPanel(new FlowLayout(FlowLayout.LEFT)); 
```

# ios5 - Creating your personal colors in Xcode for iOS 5

> ID：10987843
> 
> 赞同：0
> 
> 时间：2012-06-11T21:34:08.817
> 
> 标签：ios5, xcode4.3

How can you make custom colors in Xcode 4.3.2 for iOS5?

I have a few different colors that I would like to make.

*   [http://www.colorhexa.com/5893bd](http://www.colorhexa.com/5893bd)
*   [http://www.colorhexa.com/1a78be](http://www.colorhexa.com/1a78be)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T13:32:39.217

[http://www.colorhexa.com/5893bd](http://www.colorhexa.com/5893bd) “在 RGB 颜色空间中，十六进制 #5893bd 由**34.5%red**、**57.6% green**和**74.1%blue**组成。”

将颜色的百分比转换为小数并在此函数中输入代码。

```
colorWithRed: 0.345 green: 0.576 blue 
```

# iphone - 在视图中添加弹出窗口

> ID：10987854
> 
> 赞同：1
> 
> 时间：2012-06-11T21:34:55.847
> 
> 标签：iphone, objective-c, ios, cocoa-touch

每当我通过`didRecieveRemoteNotification`. 类似于附图中显示的窗口。我尝试`addSubview`使用我的视图控制器，但它占据了整个屏幕。如何创建弹出窗口？![弹出窗口用户界面](../Images/d2d0abfad8079af9952fa478a5db32f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:42:25.627

不要添加具有屏幕尺寸的子视图，而是`{320x460}`创建具有较小尺寸的视图，例如并通过属性`{100,100}`向它们添加圆角`UIView` `layer`

```
#import <QuartzCore/QuartzCore.h>

....
view.layer.cornerRadius = 5;
view.layer.masksToBounds = YES; 
```

**更新**：为了实现背景暗淡效果，与我最初的建议相矛盾。将您的 PopUp 视图添加到具有全屏尺寸框架的视图中`{320,460}`。然后，您通过该`UIColor` `-colorWithWhite:alpha:`方法对其应用透明颜色。如下所示：

```
view.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5]; 
```

# asp.net-mvc-3 - 无法通过“需要一个 jquery 脚本引用才能在“WebGrid”帮助程序中启用 Ajax 支持”

> ID：10987855
> 
> 赞同：1
> 
> 时间：2012-06-11T21:35:00.963
> 
> 标签：asp.net-mvc-3, model-view-controller, jquery, webgrid

我和这里的用户有相似之处： [ASP.NET MVC 3.0 WebGrid - Ajax Enabled](https://stackoverflow.com/questions/8590177/asp-net-mvc-3-0-webgrid-ajax-enabled) 和这里： [http ://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/22be0501-1b0b-496a- 9d0c-f9f5138996ac](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/22be0501-1b0b-496a-9d0c-f9f5138996ac)

但是，这些线程中的任何建议都没有帮助。

具体细节：当在我的 Windows 7/IIS 8 机器上的本地调试器中运行时，在 ajax 回发尝试更新后，我收到“A jQuery script reference is required in order to enable Ajax support in the "WebGrid" helper”消息. 但是，相同的代码不会在 FF 中或在针对服务器上运行的相同代码版本（IIS 6）使用 IE 时导致问题。更令人困惑的是，当我第一次*编写*这段代码时，我从来没有遇到过这个问题——它只是最近才开始抛出错误。

发生错误时，“正确”更新的内容会在整个页面重定向到仅部分视图并在屏幕上弹出弹出窗口之前在屏幕上闪烁。就好像它工作正常，但随后会重置它并导致它停止使用 ajax。

为了尝试排除故障，我将 jquery 的 .min 版本替换为完整版本并逐步执行代码。在调试器中，由于全局 ajax 计数器中的值，jQuery 的行为不同并触发“ajaxStop”。当我在同一个 IE 浏览器中针对相同代码的服务器版本运行外部脚本调试器时，这似乎不会发生（尽管我在服务器上仍然有“最小”版本，所以无法准确查看）。正是这个 ajaxStop 似乎迫使 webgrid 认为 jQuery 没有加载到页面上，并且不会让 ajax 行为“粘住” - 强制只加载部分视图的新页面。

我的页面不是很简单：主视图有几个包含部分视图的 div - divSearch 包含调用 ajax 回发的搜索部分视图，而 divList 包含需要根据搜索结果更新的网格。搜索部分视图调用的控制器方法将搜索结果的“新”内容呈现为字符串，并将它们作为 JsonResult 的一部分发送回，然后通过 jQuery 将其分配给 divList 的 html。（我在应用程序的几个地方使用了这种技术，并且我已经验证了返回的字符串是*局部*视图的正确内容）。

jQuery（以及所有其他 js 包括）位于布局页面的顶部，并在任何部分视图之前呈现。

主视图：

```
 @model WebUI.Areas.Admin.Models.Client.ManageClientsModel
 @{
    ViewBag.Title = "ManageClients";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
<style type="text/css">
.inv
{
    visibility: hidden;
}
.vis
{
    visibility: visible; 
}
</style>

<h2>ManageClients</h2>
<div id="divSearch">
    @Html.Partial("_ClientSearch", Model.ClientList)
</div>
<div id="divList">
    @Html.Partial("_ClientList", Model.ClientList)
</div>
<br/>
<div id="newSection">

    <div id="divEdit"> <button class="toggleNew">
       Add Client
       </button>
    </div>
    div class="inv" id="divNew">  @Html.Partial("_Create", Model.ClientVM ) </div>
</div>
<script type="text/javascript">
   $(function () {
    $(".toggleNew").click(function () {
        $("#divNew").toggleClass("inv");
        return false;
    });
   });

</script> 
```

客户搜索部分：

```
 @using  Core.Entities
 @model  WebUI.Areas.Admin.Models.Client.ClientListViewModel
 <div id="clientSearch">
     <form action="@Url.Action("JsonSearch","Client", new { area = "Admin"})"  
                 onsubmit="return formSearchSubmit(this);"  >
         <div class="divReturnErrors"></div>
     @if(TempData["SearchName"] == null)
     {
         TempData["SearchName"] = Model.SearchName;
     }
         <br/>
         @Html.LabelFor(model => model.SearchName, "Search for client name:")
         @Html.EditorFor(model => model.SearchName)
          <input type="submit" value="Search" name="btnSearch"   />
     </form>
 </div>
 <script type="text/javascript">
   function formSearchSubmit(formToSubmit) {
     //this line submits the form data to the JsonSearch method
      $.post($(formToSubmit).attr("action"),
             { SearchName: $(formToSubmit).find("#SearchName").val() },
        function (data) {  //this is the callback from JsonSearch
                                        // that handles the results.
          if (data["IsSuccess"] == undefined || data["IsSuccess"] == false)
            $('div.divReturnErrors').html(data["Errors"]); 
                              //put errors in divReturnErrors
          else { //if it succeeds we stuff the string containing the 
                              //partial view into the _ClientList control's div to 
                             //replace previous grid.
                    $("#divList").html(data["PartialViewHtml"]);
                }
            }, "json");

                       return false;
             }  
</script> 
```

客户列表部分视图

```
 @model WebUI.Areas.Admin.Models.Client.ClientListViewModel
 <h2>Clients</h2>
  @helper TrueFalseToYesNo(bool val) {
    if (val)
    {
       <span>Yes</span>
    }
    else
    {
       <span>No</span>
    }
   }
<div id="clientListing">

  @{
    if(Model.SearchName != null)
    {
        TempData["SearchName"] = Model.SearchName;
    }

    var grid = new WebGrid<NeedleFinder.Core.Entities.Client>(null, rowsPerPage: 10, 
              canSort: false, defaultSort: "ClientName", 
                       ajaxUpdateContainerId:"clientListing");
    grid.Bind(Model.Clients, rowCount: Model.TotalRows, autoSortAndPage: false);
    @grid.GetHtml(htmlAttributes: new {id= "clientListing"},
        tableStyle: "table90",
        alternatingRowStyle: "duncanTableAltRows",
        headerStyle: "duncanTableHeaders",
        columns: grid.Columns(
            grid.Column(columnName: "Client ID", style: "logcolumn", 
                    format: item =>              
                    @Ajax.ActionLink(((object)item.ClientID).ToString(), 
                    Model.LinkAction, new { id = item.ClientID }, new AjaxOptions { 
                    HttpMethod = "GET", UpdateTargetId = "divEdit", InsertionMode = 
                    InsertionMode.Replace })),
            grid.Column(columnName: "ClientName", style: "logcolumn"),
            grid.Column(columnName: "Abbreviation", style: "logcolumn"),
            //grid.Column(columnName: "IsActive", style: "logcolumn")
            grid.Column(columnName: "IsActive", style: "logcolumn", 
               format: item => @TrueFalseToYesNo(item.IsActive))
            )
               )
       }
</div> 
```

'错误'发生在这一行： $("#divList").html(data["PartialViewHtml"]); 从客户端搜索部分查看ajax回调函数。此行跳转到 jQuery 并在那里调用 ajaxStop。

请注意，我已经合并了来自其他线程的建议（jQuery 包括在顶部，将 webgrid 放在与 ajaxUpdateContainer 目标同名的 div 中，将 id 属性添加到同名的 webgrid 中。建议在 document.ready 中显式加载部分似乎不适用于我，因为我试图用基于输入的字符串填充这个 div，而不是简单地加载部分视图的默认“获取”版本。

这是页面第一次加载时呈现的 html（无论如何，当您执行 ajax 发布时它不会更新）：（对于不稳定的格式表示歉意，但在每行添加 4 个缩进并没有真正干净地工作）

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>ManageClients</title>
<link href="/Content/Site.css" rel="stylesheet" type="text/css" />
<link href="/Content/themes/redmond/jquery-ui.css" rel="stylesheet" type="text/css" />

<script src="/Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="/Scripts/jquery-ui-1.8.18.js" type="text/javascript"></script>
<script src="/Scripts/jquery.unobtrusive-ajax.js" type="text/javascript"></script>
<script src="/Scripts/modernizr-1.7.js" type="text/javascript"></script>
<script src="/Scripts/jQuery.Validate.js" type="text/javascript"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
</head>
<script type="text/javascript">

$(document).ready(function () {
    $('.dateEditor').datepicker({ dateFormat: "mm/dd/yy" });
});

//This function should be called in your ajax post return are staying on same page
     after success and/or you do have server side errors that couldn't have been found
//if there were still client side errors, otherwise you will still have the previous 
 validation errors.

function ClearValidationErrors() {

    var container = $('form').find('[data-valmsg-summary="true"]');
    var list = container.find('ul');

    if (list && list.length) {
        list.empty();
        container.addClass('validation-summary-valid').removeClass('validation-summary-
         errors');
    }
}

</script>
<body>
<style type="text/css">
#topbar
{
    background-color: Black;
    margin: 0px;
    padding: 5px;
}

#adminmenu_nav a
{
    float: left;
    width: 150px;
}

.logcolumn
{
    padding-left: 10px;
    padding-right: 10px;
    border: 1px solid #BBBBBB;
}

</style>
<script>
$(function () {
    $("#adminmenu_nav a").button();
    $("#optionsPanel input").button();
    $(".asButton input").button();
});
</script>
<div id="topbar">
<img style="margin-left:20px" src="/Content/Images/Logos/NFWhite.png" 
alt="NeedleFinder" />
</div>
<div>
<div id="adminmenu_nav" style="float: left">
    <table>
        <tr><td><a href="/Admin/Client/ManageClients">Clients</a></td></tr>
        <tr><td>Cases</td></tr>
        <tr><td><a href="/Admin/User/ManageUsers">Users</a></td></tr>
        <tr><td>Roles</td></tr>
        <tr><td><a href="/Admin/Logging/Summary">Logs</a></td></tr>
    </table>
</div>
<div style="overflow: hidden">
    <span class="validation-summary-errors"></span>
    <style type="text/css">
.inv
{
  visibility: hidden;
}
.vis
{
    visibility: visible; 
}
</style>

<h2>ManageClients</h2>
<div id="divSearch">
  <div id="clientSearch">
   <form action="/Admin/Client/JsonSearch" onsubmit="return formSearchSubmit(this);"  >
        <div class="divReturnErrors"></div>
        <br/>
        <label for="SearchName">Search for client name:</label>
        <input class="text-box single-line" id="SearchName" name="SearchName" 
          type="text" value="" />
         <input type="submit" value="Search" name="btnSearch"   />
    </form>
</div>
<script type="text/javascript">
function formSearchSubmit(formToSubmit) {
    //this line submits the form data to the JsonSearch method
    $.post($(formToSubmit).attr("action"),
            { SearchName: $(formToSubmit).find("#SearchName").val() },
        function (data) {  
        if (data["IsSuccess"] == undefined || data["IsSuccess"] == false)
            $('div.divReturnErrors').html(data["Errors"]); 
         else 
                     { 
            $("#divList").html(data["PartialViewHtml"]);
        }
    }, "json");

    return false;
    }  
</script>
</div>
<div id="divList">
  <h2>Clients</h2>

  <div id="clientListing">

<script type="text/javascript">if (typeof(jQuery)=='undefined') alert("A jQuery script 
reference is required in order to enable Ajax support in the \"WebGrid\" helper.");
</script><table class="table90" id="clientListing"><thead><tr 
  class="duncanTableHeaders"><th scope="col">Client ID</th><th 
  scope="col">ClientName</th><th scope="col">Abbreviation</th><th 
  scope="col">IsActive</th></tr></thead><tfoot><tr><td colspan="4">1 <a href="#" 
  onclick="$(&#39;#clientListing&#39;).load(&#39;/Admin/Client/ManageClients?page=2&
  amp;__=634750282355486955 #clientListing&#39;);">2</a> <a href="#" 
  onclick="$(&#39;#clientListing&#39;).load(&#39;/Admin/Client/ManageClients?page=3&
  amp;__=634750282355506956 #clientListing&#39;);">3</a> <a href="#" 
  onclick="$(&#39;#clientListing&#39;).load(&#39;/Admin/Client/ManageClients?page=4&
  amp;__=634750282355516957 #clientListing&#39;);">4</a> <a href="#" 
  onclick="$(&#39;#clientListing&#39;).load(&#39;/Admin/Client/ManageClients?page=5&
  amp;__=634750282355536958 #clientListing&#39;);">5</a> <a href="#" 
  onclick="$(&#39;#clientListing&#39;).load(&#39;/Admin/Client/ManageClients?page=2& 
  amp;__=634750282355546959 #clientListing&#39;);">&gt;</a> </td></tr></tfoot><tbody>
  <tr><td class="logcolumn"><a data-ajax="true" data-ajax-method="GET" data-ajax-
  mode="replace" data-ajax-update="#divEdit" href="/Admin/Client/_Edit/2042">2042</a>
  </td><td class="logcolumn">ABC Legal</td><td class="logcolumn">ABC123</td><td 
  class="logcolumn">           <span>Yes</span>

  </td></tr><tr class="duncanTableAltRows"><td class="logcolumn"><a data-ajax="true" 
  data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#divEdit" 
  href="/Admin/Client/_Edit/2044">2044</a></td><td class="logcolumn">ABC Legal 
  3</td><td class="logcolumn">ABC125</td><td class="logcolumn">           
  <span>Yes</span>

  </td></tr><tr><td class="logcolumn"><a data-ajax="true" data-ajax-method="GET" 
  data-ajax-mode="replace" data-ajax-update="#divEdit" href="/Admin/Client/_Edit
  /2045">2045</a></td><td class="logcolumn">ABC Legal 4b</td><td 
  class="logcolumn">ABC4bb</td><td class="logcolumn">           <span>Yes</span>

  </td></tr><tr class="duncanTableAltRows"><td class="logcolumn"><a data-ajax="true" 
  data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#divEdit" 
  href="/Admin/Client/_Edit/2047">2047</a></td><td class="logcolumn">ABC Legal 
  6</td><td class="logcolumn">ABC6</td><td class="logcolumn">           <span>No</span>

  </td></tr><tr><td class="logcolumn"><a data-ajax="true" data-ajax-method="GET" 
  data-ajax-mode="replace" data-ajax-update="#divEdit" href="/Admin/Client/_Edit
  /2048">2048</a></td><td class="logcolumn">ABC Legal 7</td><td 
  class="logcolumn">ABC7</td><td class="logcolumn">           <span>Yes</span>

  </td></tr><tr class="duncanTableAltRows"><td class="logcolumn"><a data-ajax="true"   
  data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#divEdit" 
  href="/Admin/Client/_Edit/2049">2049</a></td><td class="logcolumn">ABC Legal 
  8a</td><td class="logcolumn">ABC8a</td><td class="logcolumn">           
  <span>Yes</span>

  </td></tr><tr><td class="logcolumn"><a data-ajax="true" data-ajax-method="GET" 
  data-ajax-mode="replace" data-ajax-update="#divEdit" href="/Admin/Client/_Edit
  /2050">2050</a></td><td class="logcolumn">ABC Legal 9</td><td 
  class="logcolumn">ABC9</td><td class="logcolumn">           <span>Yes</span>

  </td></tr><tr class="duncanTableAltRows"><td class="logcolumn"><a data-ajax="true" 
  data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#divEdit" 
  href="/Admin/Client/_Edit/2043">2043</a></td><td class="logcolumn">ABC 
  Legal2</td><td class="logcolumn">ABC124</td><td class="logcolumn">           
  <span>Yes</span>
  </td></tr><tr><td class="logcolumn"><a data-ajax="true" data-ajax-method="GET" 
  data-ajax-mode="replace" data-ajax-update="#divEdit" href="/Admin/Client/_Edit
  /2046">2046</a></td><td class="logcolumn">ABC Legal5</td><td 
  class="logcolumn">ABC5</td><td class="logcolumn">           <span>Yes</span>
  </td></tr><tr class="duncanTableAltRows"><td class="logcolumn"><a data-ajax="true" 
  data-ajax-method="GET" data-ajax-mode="replace" data-ajax-update="#divEdit" 
  href="/Admin/Client/_Edit/2051">2051</a></td><td class="logcolumn">ACE Legal 
  1</td><td class="logcolumn">ACE1</td><td class="logcolumn">           
  <span>Yes</span>

  </td></tr></tbody></table></div>

  </div>
<br/>
<div id="newSection">

   <div id="divEdit"> <button class="toggleNew">
     Add Client
  </button></div><!-- placeholder for _Edit., will replace button when editing//-->
  <div class="inv" id="divNew">
 <form action="/Admin/Client/JsonCreate" onsubmit="return formCreateSubmit(this);">
  <div>
    <div class="titleText">Add Client</div>
    <div class="divClientSideVal">
    <div class="validation-summary-valid" data-valmsg-summary="true"><ul><li 
      style="display:none"></li>
    </ul></div>
    </div>
    <div class="divCreateErrors"></div>
    <fieldset>
        <table>

            <tr>
                <td>
                    <label for="CurrentClient_ClientName">Name</label>
                </td>
                <td><input data-val="true" data-val-length="Client Name must be 50 
                       characters or fewer" data-val-length-max="50" data-val-
                      required="Client Name is required." 
                     id="CurrentClient_ClientName" name="CurrentClient.ClientName" 
                      style="width: 120px;" type="text" value="" /> 
                </td>
                <td><span class="field-validation-valid" data-valmsg-
               for="CurrentClient.ClientName" data-valmsg-replace="false">*</span></td>
            </tr>
            <tr>
                <td>
                    <label for="CurrentClient_Abbreviation">Abbreviation</label>
                </td>
                <td><input data-val="true" data-val-length="Abbreviation must be 6 
                characters or fewer" data-val-length-max="6" data-val-
                required="Abbreviation is required." id="CurrentClient_Abbreviation" 
                name="CurrentClient.Abbreviation" style="width: 120px;" type="text" 
                value="" />
                </td>
                <td><span class="field-validation-valid" data-valmsg-
               for="CurrentClient.ClientName" data-valmsg-replace="false">*</span></td>
            </tr>
            <tr>
                <td>
                    <label for="CurrentClient_IsActive">Is Active:</label>
                </td>
                <td>

                <input data-val="true" data-val-required="The IsActive field is 
                required." id="CurrentClient_IsActive" name="CurrentClient.IsActive" 
                 type="checkbox" value="true" /><input name="CurrentClient.IsActive" 
                  type="hidden" value="false" />
                </td>
            </tr>
            <tr>
                <td>Enable for installations:</td>
                <td>
                    <select Multiple="multiple" id="SelectedInstallations" 
              multiple="multiple" name="SelectedInstallations" style="width: 
               120px;">       
                 <option value="1">Dev</option>
                 <option value="2">FakeDev</option>
                </select>
                </td>
            </tr>
        </table></fieldset>
    <p>
        <input type="submit" value="Create" name="btnCreate"  />
    </p>
</div>
</form>

<script type="text/javascript">

function formCreateSubmit(formToSubmit) {

    var installations = "";
    $('#SelectedInstallations option').each(function (i) {
        if (this.selected == true) {
            if (installations.length > 0) {
                installations += ",";
            }
            installations += this.value;
        }
    });

    //this line submits the form data to the JsonCreate method
    $.post($(formToSubmit).attr("action"),
            { ClientName: $(formToSubmit).find("#CurrentClient_ClientName").val(),
                Abbreviation:  
               $(formToSubmit).find("#CurrentClient_Abbreviation").val(),
                IsActive: 
             $(formToSubmit).find("#CurrentClient_IsActive").is(':checked'),
                SelectedInstallations: installations,
                Action: "Create"
            },
    function (data) {  
    if (data["IsSuccess"] == undefined ||  data["IsSuccess"] == false)
    {
       if (data["Errors"] != undefined &&                          
                   data["Errors"].length > 0) 
                {
                        ClearValidationErrors();                    

     ('div.divCreateErrors').html(data["Errors"]);                      
      } else {
$('div.divCreateErrors').html("");
   }

} else { 
        window.location = "/Admin/Client/ManageClients";
    }
}, "json");

    return false;
   }
</script> </div><!-- placeholder for _Create //-->
</div>
<script type="text/javascript">
   $(function () {
    $(".toggleNew").click(function () {
        $("#divNew").toggleClass("inv");
        return false;
    });
   });

</script>

  </div>
</div>
  <div class="InternalMenu"><a href="/Admin/Logging">Logging</a> - <a href="/Admin
          /Client/ManageClients">Client</a></div>
  </body>
</html> 
```

任何建议都将不胜感激，因为我对导致问题的原因感到非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:16:16.320

好的 - 我发现了问题，所以我会报告。

这个问题实际上比与 jQuery 相关的更多是 MVC，但这是我如何将搜索表单放在一起的问题。

我将搜索按钮设置为 type=submit，并且还有一个 onsubmit 事件处理程序执行 ajax 回发。发生的事情是 ajax 回发正在做它应该做的事情，但是当它完成时，提交正在触发一个“get”，并且搜索表单的控制器中的“get”处理程序只返回一个 PartialViewResult --> 所以这是将屏幕内容替换为正常负载。由于部分视图没有包含包含的布局，因此引发了错误。

所以解决方法是 a) 将按钮类型更改为“button” b) 从表单声明中删除“onsubmit” c) 在表单中添加一个 id="frmSearch"（以便于选择性） d) 修改 formSearchSubmit 以采取来自 $("#frmSearch").action 的动作，而不是来自函数参数（这是一个按钮，而不是表单）的动作。

之后，它正确提交了 ajax 帖子并处理了返回更新，而不会触发表单的另一次提交。

# c# - 基于 SiteFinity 的网站不更新页面标题？

> ID：10987858
> 
> 赞同：0
> 
> 时间：2012-06-11T21:35:05.033
> 
> 标签：c#, asp.net, sitefinity

这个让我难过，让我发疯。

我有一个基于 SiteFinity 的站点，使用 C# 和 ASP.NET。

在其中一个母版页中，我添加了以下行：

```
this.Page.Title = "Site Name: " + this.Page.Title; 
```

这*应该*将这两个字符串连接到页面的标题中。我已经这样做了几十次了...

...但是由于某种原因，*在这个站点中，并且仅在这个站点中，*这不起作用！我已经尝试过 Page_Load、Page_Init、Page_InitComplete ......似乎没有一个事件会更新标题。

这让我发疯了，因为这是一段如此简单的代码，它**应该**很容易。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:05:43.737

这是 Sitefintiy 的旧版本（3.7 或更早版本）还是最新版本（4.0+）？

如果是最新的，请记住 Sitefinity 现在是一个 Web 应用程序项目，这意味着正如追逐所提到的，需要编译和上传站点以进行代码更改。

希望这会有所帮助！

# google-app-engine - 通过 Google App Engine 上的 Google Apps 昵称发送电子邮件

> ID：10987865
> 
> 赞同：3
> 
> 时间：2012-06-11T21:36:15.760
> 
> 标签：google-app-engine, google-apps

我正在尝试使用 App Engine 建立一个商业网站。以前，我使用我的个人 gmail 帐户对网站进行了原型设计，但现在我购买了一个域名并设置了谷歌应用程序。到目前为止，我遇到的唯一障碍是让我的联系表正确地向试图联系我的人发送电子邮件。最初，我使用的是这段代码：

```
from google.appengine.api import mail

sender_email = "Admin <admin@example.appspotmail.com>"
mail.send_mail(sender_email, contact_email, subject, body) 
```

我想更改我在 Google Apps 上的电子邮件帐户的“昵称”在`sender_email`哪里`guru@example.com`。`guru`

当我尝试添加时，`guru@example.com`我可以收到一封邀请电子邮件，但无法将昵称添加为单独的帐户。

有没有办法在不向我的 Google Apps 帐户添加新邮箱的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T22:08:03.990

您将需要添加一个新邮箱。

我花了一些时间研究这个问题，但没有找到解决办法。除了可能使用[Python 电子邮件库](http://docs.python.org/library/email)之外，我最初对它的研究似乎比我的应用程序所付出的努力要多。您还需要在某处托管电子邮件服务器并在 DNS 中正确配置您的邮件交换记录。

如果您确实编写了自己的电子邮件发送功能并且您正在更改发件人，您的邮件可能会被标记为垃圾邮件。

此外，如果您计划使用 App Engine 应用程序处理或接收邮件，也需要将其发送至 user@myapp.appspotmail.com。从而否定了所有额外的努力来阻止使用appspotmail.com

# ruby - 如何使用 aws-s3 ruby gem 删除日志文件？

> ID：10987868
> 
> 赞同：0
> 
> 时间：2012-06-11T21:36:29.057
> 
> 标签：ruby, amazon-s3

我正在使用 ：

```
log_file = AWS::S3::Bucket.logs_for('downloads.idance.net').first 
```

然后我想删除我操作的每个文件，但不知道如何。

```
log_file.delete 
```

不抛出任何方法错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T14:30:42.653

我最终以这种方式解决了这个问题：

```
log_file.instance_variable_get('@log').delete 
```

日志文件有一个引用 s3 对象的实例变量。

# java - Configuration file is within the JAR. How to put the configuration file outside the JAR?

> ID：10987869
> 
> 赞同：1
> 
> 时间：2012-06-11T21:36:31.360
> 
> 标签：java, spring

When I create a Java Spring application, the spring.xml configuration file is usually in the src folder. When I export this application as a runnable JAR, the spring.xml file goes inside the JAR. But I don't want the jar to be extracted and only want the contents of spring.xml to be changed when necessary.

But since the XML is inside the JAR, it means I am changing the JAR file when I change the contents of spring.xml. How to get around this? Is it possible to have the spring.xml outside the JAR?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:43:46.457

是的，您可以`spring.xml`从 JAR 中取出，然后您可以通过几种方式从您的应用程序中引用它，无论是作为资源使用`file:`还是在类路径中使用`classpath:`.

例如，`web.xml`您现在可以执行以下操作：

```
<!-- if spring.xml is on the classpath -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:spring.xml</param-value>
</context-param> 
```

...或者：

```
<!-- if spring.xml is at a known location -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>file:/tmp/spring.xml</param-value>
</context-param> 
```

**更新**

请注意，我正在回答您的问题，但建议您使用 a`PropertyPlaceholderConfigurer`代替（假设您只想更改属性）。

否则，如果您的上下文将发生根本性的变化，您不妨将其保存在 JAR 中，其中版本化更改表示一个新的二进制文件。

# javascript - 在 Flot 中显示时间线/线性数据

> ID：10987870
> 
> 赞同：0
> 
> 时间：2012-06-11T21:36:33.050
> 
> 标签：javascript, jquery, html, flot, timeline

有谁知道如何让 flot 显示一种“时间线”？

例如

```
Y:
Person1| -----     -------
Person2|    -------   -------
Person3| -- -----    ----
Person4|       -------
        _____________________
X:      Jan  Feb  March  April 
```

我不确定如何在 y 轴上显示标签并线性显示数据

**到目前为止的解决方案:)**

$(文档).ready(函数(){

```
var d1 = [[(new Date("01/01/2009")).getTime(), 5], [(new Date("10/01/2009")).getTime(), 5]];

var placeholder = $("#placeholder");

// plot it
var plot = $.plot(placeholder, [d1], {xaxis:{mode:"time", timeformat:"%b.%y"}}); 
```

});

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T07:50:13.780

终于找到了答案。使用配置'ticks'。

**解决方案：**

```
//american dates
    var d1 = [[(new Date("01/01/2009")).getTime(), 1], [(new Date("01/10/2009")).getTime(), 1]];
    var d2 = [[(new Date("05/05/2009")).getTime(), 2], [(new Date("06/23/2009")).getTime(), 2]];
    var d3 = [[(new Date("03/10/2009")).getTime(), 3], [(new Date("03/15/2009")).getTime(), 3]];
    //var d1 = [[0, 5], [5, 5], null, [5, 10], [15, 10]];
    var placeholder = $("#placeholder");

    // plot it
    var plot = $.plot(placeholder, [d1,d2,d3], {
        xaxis:{mode:"time", timeformat:"%b.%y"},
        yaxis:{ticks:[[1, "Apple"], [2, "Microsoft"], [3, "Dell"]]}
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T23:44:47.720

查看[http://people.iola.dk/olau/flot/examples/basic.html](http://people.iola.dk/olau/flot/examples/basic.html)的源代码， 特别注意`// a null signifies separate line segments` 我认为应该可以让你到达你想去的地方的评论。

# lucene - Hibernate Search 4.1.1 NoSuchMethodError FSDirectory.open

> ID：10987874
> 
> 赞同：0
> 
> 时间：2012-06-11T21:36:57.013
> 
> 标签：lucene, hibernate-search

I am trying to use Hibernate-Search 4.1.1-Final + Lucene 3.5 with Hibernate 4.1.3 and Spring 3.1.1 frameworks (Dependency using Maven) to enable POJO-based text search. I followed the Hibernate-Search documentation. Based on the doc, here is my Hibernate configuration:

```
 <bean id="sessionFactory"
    class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
            <property name="dataSource" ref="dataSource" />
    <property name="mappingResources">
        <list>
            <value>com/mytutorial/User.hbm.xml</value>
                     </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <!-- Other Hibernate-specific properties -->
            <prop key="hibernate.search.default.directory_provider">filesystem</prop>
            <prop key="hibernate.search.default.indexBase">C:/temp/</prop>
            <prop key="hibernate.search.lucene_version">LUCENE_35</prop>
         </props>
    </property>
</bean> 
```

I turned on the log (DEBUG) for hibernate-search, it shows:

```
[INFO,Version,pool-2-thread-1] HSEARCH000034: Hibernate Search 4.1.1.Final
[DEBUG,ConfigContext,pool-2-thread-1] Setting Lucene compatibility to Version LUCENE_35
[DEBUG,ConfigContext,pool-2-thread-1] Using default similarity implementation: org.apache.lucene.search.DefaultSimilarity
[WARN,DirectoryProviderHelper,pool-2-thread-1] HSEARCH000041: Index directory not found, creating: 'C:\temp\com.mytutorial.User' 
```

at the startup. And after that, I get the following exception when I run my tomcat server on Windows 7 64-bit machine.

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/spring/application-context.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.open(Ljava/io/File;Lorg/apache/lucene/store/LockFactory;)Lorg/apache/lucene/store/FSDirectory;
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 45 more
Caused by: java.lang.NoSuchMethodError: org.apache.lucene.store.FSDirectory.open(Ljava/io/File;Lorg/apache/lucene/store/LockFactory;)Lorg/apache/lucene/store/FSDirectory;
    at org.hibernate.search.store.impl.DirectoryProviderHelper$FSDirectoryType.getDirectory(DirectoryProviderHelper.java:365)
    at org.hibernate.search.store.impl.DirectoryProviderHelper.createFSIndex(DirectoryProviderHelper.java:137)
    at org.hibernate.search.store.impl.FSDirectoryProvider.initialize(FSDirectoryProvider.java:70)
    at org.hibernate.search.store.impl.DirectoryProviderFactory.createDirectoryProvider(DirectoryProviderFactory.java:84)
    at org.hibernate.search.indexes.impl.DirectoryBasedIndexManager.createDirectoryProvider(DirectoryBasedIndexManager.java:216)
    at org.hibernate.search.indexes.impl.DirectoryBasedIndexManager.initialize(DirectoryBasedIndexManager.java:89)
    at org.hibernate.search.indexes.impl.IndexManagerHolder.createDirectoryManager(IndexManagerHolder.java:241)
    at org.hibernate.search.indexes.impl.IndexManagerHolder.buildEntityIndexBinding(IndexManagerHolder.java:111)
    at org.hibernate.search.spi.SearchFactoryBuilder.initDocumentBuilders(SearchFactoryBuilder.java:411)
    at org.hibernate.search.spi.SearchFactoryBuilder.buildNewSearchFactory(SearchFactoryBuilder.java:221)
    at org.hibernate.search.spi.SearchFactoryBuilder.buildSearchFactory(SearchFactoryBuilder.java:145)
    at org.hibernate.search.event.impl.FullTextIndexEventListener.initialize(FullTextIndexEventListener.java:129)
    at org.hibernate.search.hcore.impl.HibernateSearchIntegrator.integrate(HibernateSearchIntegrator.java:82)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:306)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1782)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBuilder.buildSessionFactory(LocalSessionFactoryBuilder.java:189)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:350)
    at org.springframework.orm.hibernate4.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:335)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 52 more 
```

I still get the exception, even if I remove the **"hibernate.search.lucene_version"** property from the configuration.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T23:07:57.267

*NoSuchMethodError*意味着您的类路径中的 Lucene 版本错误。

您可能还想检查重复项，并使用命令行工具（例如[Tattletale](http://www.jboss.org/tattletale)）轻松查找类和库重复项。

# c# - Is it mandatory to get an Acces token to use C# facebook SDK

> ID：10987876
> 
> 赞同：0
> 
> 时间：2012-06-11T21:36:58.590
> 
> 标签：c#, facebook, sdk

I found the [C# SDK](http://csharpsdk.org/) and I see only examples that needs the access token acquired through the OAuth process. I only want to access publics albums and pictures is it necessary to register an app and all the OAuth suff ? This seems overkill to access public data.

# perl - How can I add a variable to a regexp? (Perl)

> ID：10987881
> 
> 赞同：-1
> 
> 时间：2012-06-11T21:37:53.090
> 
> 标签：perl

So here's my sample

```
while (<FH>) {

  my $line = $_;
  chomp($line);

  my $marksearchpat= "href=\"\@X\@EmbeddedFile\.requestUrlStub\@X\@bbcswebdav\/xid";      
  my $markreplacepat= "href=\"http:\/\/www\.facepalm\.org\/bbcswebdav\/xid";    
  ## (Mark)  Duplicate input file lines to "altered" file, making substitutions as necessary.
  $linenumber++;    
    print "Line $linenumber Has Been Read\n";
  my $line2=$_;    
  $line2=~s/$marksearchpat/$markreplacepat/eig;  
  print WHOUT $line2;     
  print WHLOG 'At '.localtime().', I replaced '. $marksearchpat .' with '. $markreplacepat .' at line '.$linenumber.' of file '.$file."\n"; 
```

How do I add a regex variable (A regex match variable)to the $marksearchpat and to the $markreplacepat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:09:51.307

你不能做任何事情

```
s/$search_pat/$replace/ 
```

因为插值根本不解释插值。这就是你添加`/e`.

```
s/$search_pat/$replace_code/e 
```

上面的值`$replace_code`是 Perl 代码的预期值。最后一个表达式`$replace_code`求值的那个将是替换字符串。那么什么 Perl 代码可以做到这一点呢？以下任一项都可以：

```
'http://www.facepalm.org/bbcswebdav/xid-' . $1

"http://www.facepalm.org/bbcswebdav/xid-$1" 
```

要将其放入 中`$replace_code`，我们可以使用以下任何一种：

```
my $replace_code = '"http://www.facepalm.org/bbcswebdav/xid-$1"';
my $replace_code = q{"http://www.facepalm.org/bbcswebdav/xid-$1"};
my $replace_code = q{'http://www.facepalm.org/bbcswebdav/xid-' . $1};
etc 
```

所以我们最终得到：

```
my $search_re = qr{href="\K\@X\@EmbeddedFile\.requestUrlStub\@X\@bbcswebdav/xid-([0-9]{9}_2)};
my $replace_code = q{"http://www.facepalm.org/bbcswebdav/xid-$1"};
s/$search_re/$replace_code/gie; 
```

从技术上讲，不需要通过使用前瞻来捕获任何内容：

```
my $search_re = qr{href="\K\@X\@EmbeddedFile\.requestUrlStub\@X\@bbcswebdav/xid-(?=[0-9]{9}_2)};
my $replace_code = q{"http://www.facepalm.org/bbcswebdav/xid-"};
s/$search_re/$replace_code/gie; 
```

这也意味着我们不需要`/e`：

```
my $search_re = qr{href="\K\@X\@EmbeddedFile\.requestUrlStub\@X\@bbcswebdav/xid-(?=[0-9]{9}_2)};
my $replace_str = 'http://www.facepalm.org/bbcswebdav/xid-'
s/$search_re/$replace_str/gi; 
```

# java - 我可以在 java 中同步块之外的共享字段上检查 null 吗？

> ID：10987882
> 
> 赞同：1
> 
> 时间：2012-06-11T21:37:57.600
> 
> 标签：java, multithreading, synchronization, thread-safety, synchronized

假设我有一个可以由两个单独的线程访问的字段。我正在使用一个对象作为同步锁。我可以检查`null`同步块之外的情况吗？换句话说，这是线程安全的吗：

```
private Object sharedObject() = new Object();
private final Object sharedObjectLock() = new Object();

private void awesomeMethod() {
   if(sharedObject != null) {
      synchronized(sharedObjectLock) {
         //code the uses sharedObject
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:42:11.393

不，它不是线程安全的。如果另一个线程使`sharedObject`字段无效，则不能保证您的线程会看到该更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T21:43:44.373

不会。变量的分配可能发生在您检查之后但在您获得锁定之前。

曾经有一种观点认为同步锁很昂贵，但现在不是这样了。抓住锁就行了。

# php - 从零开始为私人文章构建一个快速的语义 MySQL 搜索引擎

> ID：10987883
> 
> 赞同：2
> 
> 时间：2012-06-11T21:37:57.653
> 
> 标签：php, mysql, full-text-search, search-engine, information-retrieval

我正在开展一个项目，该项目将涉及网站内文章*的全文* **和** *语义*搜索（如果无法组合，用户可以选择任一选项）。这些文章是订阅式的，只有登录后才能搜索；因此外部搜索引擎或其 API 无法访问它们。

[我阅读了有关](http://www.ibm.com/developerworks/library/os-php-sphinxsearch/)全文关键字搜索的 Sphinx（我打算在这方面实现它），但我不确定如何以此构建语义搜索引擎。例如，搜索“美国总统”应该列出包含对美国总统实际姓名的引用的文章，例如乔治华盛顿、比尔克林顿（或威廉杰斐逊克林顿）。

我的想法是，也许可以使用一种标记系统来关联各种关键字，例如将总统与乔治华盛顿联系起来，将总统与比尔克林顿联系起来，但由于数据非常庞大，而且会存在许多这样的关系，我不知道如何进一步这个想法。

请建议我如何从头开始构建语义搜索引擎（我猜 Sphinx 可以处理全文关键字搜索）。否则，请告知我任何基于 Internet 的资源，或者是否有任何语言的现有软件可以集成到我的应用程序中。

PS 我选择的数据库是 MySQL（如果其他数据库系统更适合该任务，请告知），我更喜欢用 PHP 编程，但如果我需要学习 Python 或任何其他对这项任务更有效的语言，我会愿意的。

我已经在[answers.semanticweb.com上搜索过](http://answers.semanticweb.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:41:02.517

我会使用[Apache Solr](http://lucene.apache.org/solr/)。我认为它比 Sphinx 更灵活。Solr 支持全文搜索，并且我相信有用于语义支持的附加组件（如[警报器](http://siren.sindice.com/download.html)）。Solr 是 Lucene 的服务器化版本。

Solr 支持 SynonymFilter：[http ://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#SynonymFilter](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#SynonymFilter)

这篇文章讨论了一些优化内容检索的策略[http://www.lucidimagination.com/devzone/technical-articles/optimizing-findability-lucene-and-solr](http://www.lucidimagination.com/devzone/technical-articles/optimizing-findability-lucene-and-solr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T22:28:52.957

这本书可能对阅读此主题的人有用。我刚在亚马逊上找到它。

[http://www.amazon.com/E-Librarian-Service-User-Friendly-Libraries-X-media-publishing/dp/3642177425](https://rads.stackoverflow.com/amzn/click/com/3642177425)

# qt - 为了避免 Qt Creator 从源代码错误，Qt 的版本在构建时

> ID：10987886
> 
> 赞同：0
> 
> 时间：2012-06-11T21:38:15.230
> 
> 标签：qt, qt4, qt-creator

当我尝试`Qt Creator` [从 source](http://get.qt.nokia.com/qtcreator/qt-creator-2.5.0-src.tar.gz)构建时出现以下错误。

```
user@host:/usr/share/qtcreator/qtcreator_build$ qmake -version
QMake version 2.01a
Using Qt version 4.8.2 in /usr/local/Trolltech/Qt-4.8.2/lib
user@host:/usr/share/qtcreator/qtcreator_build$ sudo qmake ../qtcreator_fromSrc/qtcreator.pro 
Project MESSAGE: Cannot build Qt Creator with Qt version 4.6.2.
Project ERROR: Use at least Qt 4.7.4. 
```

如图所示，`Qt`上面使用的库是 4.8.2，它应该是 4.7.2 版。它是[从源](http://qt-project.org/doc/qt-4.8/install-x11.html)安装的。如何让`qtcreator`安装程序识别正确的`qt`版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:38:15.810

我的解决方法是将源复制`Qt Creator`到不需要超级用户权限的区域。HTH。

# java - Why do try/catch or synchronized in Java require a statement block?

> ID：10987893
> 
> 赞同：9
> 
> 时间：2012-06-11T21:38:45.433
> 
> 标签：java, jls

Java allows for certain keywords to be followed by a statement or a statement block. For example:

```
if (true)
    System.out.println("true");

do
    System.out.println("true");
while (true); 
```

compiles as well as

```
if(true) {
    System.out.println("true");
}

do {
   System.out.println("true");
} while (true); 
```

This is also true for keywords like `for`, `while` etc.

However, some keywords don't allow this. `synchronized` requires a block statement. Same for `try ... catch ... finally`, which requires at least two block statements following the keywords. For example:

```
try {
    System.out.println("try");
} finally {
    System.out.println("finally");
}

synchronized(this) {
    System.out.println("synchronized");
} 
```

works, but the following doesn't compile:

```
try
    System.out.println("try");
finally
    System.out.println("finally");

synchronized (this)
    System.out.println("synchronized"); 
```

So why do some keywords in Java require a block statement, while others allow a block statement as well as a single statement? Is this an inconsistency in language design, or is there a certain reason for this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T22:56:12.140

如果你试图允许省略括号，你会得到一个悬空的 else-like 歧义。虽然这可以通过与 dangling-else 类似的方式来解决，但最好不要这样做。

考虑

```
try
try 
fn();
catch (GException exc)
g();
catch (HException exc)
h();
catch (IException exc)
i(); 
```

这是否意味着

```
try
    try 
        fn();
    catch (GException exc)
        g();
    catch (HException exc)
        h();
catch (IException exc)
    i(); 
```

或者

```
try
    try 
        fn();
    catch (GException exc)
        g();
catch (HException exc)
    h();
catch (IException exc)
    i(); 
```

我相信 CLU，catch 块只有一个语句（可能是错误的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:41:11.990

这只是语言的设计决策及其编译器机制。

我同意这个决定。不需要代码块可能会使代码更短，但它肯定会引起混乱并产生无法预料的后果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T06:56:51.037

即使使用允许这样做的语句，不使用 { } 也会存在问题，这可能会造成混淆。解决这个问题的方法是严格使用代码格式化程序。许多地方总是需要 { } 以避免出现问题。

例如

```
if (condition)
    if (condition2)
        statement
  else // which if
     statement

do
    statement
    while (condition) // is it do/while or an inner loop?
       statement
  while (condition2)
    statement 
```

我相信您可以为某些语句而不是 C 中的其他语句执行此操作的原因。在 C 中，您可以在没有语句块的情况下使用 if/do/while/for。然而，Java 中已经添加了 try/catch 和 synchronized。这些只有 { } 块的原因有两个。

*   这被认为是最佳做法
*   只允许一个选项更简单。

鉴于 Java 是一种功能精益语言，我怀疑后者与前者一样多或更多。

# jquery - 在 jquery 中需要帮助来纠正图像标题褪色

> ID：10987896
> 
> 赞同：0
> 
> 时间：2012-06-11T21:39:14.987
> 
> 标签：jquery, image, caption

[http://www.umairdesigner.com/emagics/](http://www.umairdesigner.com/emagics/)

嗨，我正在这个网站上工作，我开发了当鼠标悬停时图像标题淡出和 img 缩放，如果鼠标离开图像区域则相反。但是我注意到，当我将鼠标悬停在（与团队会面，在 about-us 部分下）中的任何图像上时，第一张图像也同样具有效果。任何建议都将是非常可观的。

这是代码；

```
 figure.mouseenter(function() {
    $(this).find('figcaption').fadeOut('fast');
    $(this).find('img').animate({top:'-20', left: '-20', width: '224', height: '270'});
});
figure.mouseleave(function() {
    $(this).find('figcaption').fadeIn('fast');
    $(this).find('img').animate({top:'0', left: '0', width: '193', height: '233'});
}); 
```

这是团队部分 ![在此处输入图像描述](../Images/036146ee29082b7009a604b1fca3e6a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:55:37.653

始终提供 jsfiddle 而不是提供您的网站 url ..**始终**

```
<div id="ibox"></div> 
```

将其更改为不同盒子的不同 ID。

你可以给 class = ibox 或 id="ibox1" ibox2 等等 .on ..

```
 <div id="ibox1"></div> or <div class="ibox"></div> 
```

# java - JSONException 疑难解答：字符 0 处的输入结束

> ID：10987902
> 
> 赞同：0
> 
> 时间：2012-06-11T21:39:47.410
> 
> 标签：java, android, json

我正在使用他们的 API 在 Active.com 上进行搜索，目前我的搜索遇到了这个错误：org.json.JSONException: End of input at character 0\. 我是新手，感谢任何帮助。

**主要活动**

```
 private class SearchTask extends AsyncTask<String, Integer, String>
{
    ProgressDialog dialog;

        @Override
        protected void onPreExecute() {

            dialog = ProgressDialog.show(StayActiveActivity.this,"","Please Wait...");

            super.onPreExecute();
        }

        @Override
        protected String doInBackground(String... params) {
            try {
                String result = ActiveHelper.download(params [0]);
                return result;
            } catch (ApiException e) {
                e.printStackTrace();
                Log.e("alatta", "Problem making search request");
            }
            return "";
        }
        @Override
        protected void onPostExecute(String result) {

            try {
                JSONObject obj = new JSONObject(result);
                m_results = obj.getJSONArray("results");
                if (m_results == null || m_results.length() == 0)
                {
                    Toast.makeText(getApplicationContext(),
                            "No Results found for " + m_search_text.getText(), 
                            Toast.LENGTH_LONG).show();

                }
                else
                    m_search_results.setAdapter(new JSONAdapter(getApplicationContext()));
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    }

private class JSONAdapter extends BaseAdapter
{
    public JSONAdapter(Context c){

    }

    public int getCount() 
    {
    return  m_results.length();
        }

    public Object getItem(int arg0){
        return null;
    }

    public long getItemId(int pos){
        return pos;

    }

    public View getView(int pos, View convertView, ViewGroup parent) {
        View tv;
        TextView t;

        if (convertView == null)
            tv = m_inflater.inflate (R.layout.item, parent, false);
        else
            tv = convertView;
        try {
            /* For each entry in the ListView, we need to populate 
             * its text and timestamp */
            t = (TextView) tv.findViewById(R.id.text);
            JSONObject obj = m_results.getJSONObject(pos);

            t.setText (obj.getString("event") + ": " + 
                        obj.getString("text"));

            t = (TextView) tv.findViewById(R.id.created_at);
            t.setText (obj.getString("created_at"));
        } catch (JSONException e) {

            Log.e("alatta", e.getMessage());
        }
        return tv;
    }

   } 
```

**主动助手**

```
 public class ActiveHelper {

private static final String ACTIVE_SEARCH = "http://api.amp.active.com/search?&v=json&api_key=rm4agnjv6k4m4tvpft95xvbn";
    private static final int HTTP_STATUS_OK = 200;
    private static byte[] buff = new byte[1024];

 public static class SearchException extends Exception {
        public SearchException (String msg)
        {
            super (msg);
        }

        public SearchException (String msg, Throwable thr)
        {
            super (msg, thr);
        }
 }
        protected static synchronized String download (String parm)
                throws SearchException
            {
                String url = ACTIVE_SEARCH+ parm;
                HttpClient client = new DefaultHttpClient();
                HttpGet request = new HttpGet(url);
                try {
                    HttpResponse response = client.execute(request);
                    StatusLine status = response.getStatusLine();
                    if (status.getStatusCode() != HTTP_STATUS_OK)
                        throw new SearchException("Invalid response from search.active.com" + 
                                status.toString());
                    HttpEntity entity = response.getEntity();
                    InputStream ist = entity.getContent();
                    ByteArrayOutputStream content = new ByteArrayOutputStream();
                    int readCount = 0;
                    while ((readCount = ist.read(buff)) != -1)
                        content.write(buff, 0, readCount);
                    return new String (content.toByteArray());
                } catch (Exception e) {
                    e.printStackTrace();
                    throw new SearchException("Problem using the API", e);
                }
            }
        } 
```

**堆栈跟踪**

```
06-11 15:01:27.569: E/alatta(7698): Problem making search request
06-11 15:01:27.569: W/System.err(7698): org.json.JSONException: End of input at character 0 of 
06-11 15:01:27.569: W/System.err(7698):     at org.json.JSONTokener.syntaxError(JSONTokener.java:446)
06-11 15:01:27.569: W/System.err(7698):     at org.json.JSONTokener.nextValue(JSONTokener.java:93)
06-11 15:01:27.569: W/System.err(7698):     at org.json.JSONObject.<init>(JSONObject.java:154)
06-11 15:01:27.569: W/System.err(7698):     at org.json.JSONObject.<init>(JSONObject.java:171)
06-11 15:01:27.569: W/System.err(7698):     at my.stayactive.plan.StayActiveActivity$SearchTask.onPostExecute(StayActiveActivity.java:120)
06-11 15:01:27.569: W/System.err(7698):     at my.stayactive.plan.StayActiveActivity$SearchTask.onPostExecute(StayActiveActivity.java:1)
06-11 15:01:27.569: W/System.err(7698):     at android.os.AsyncTask.finish(AsyncTask.java:417)
06-11 15:01:27.569: W/System.err(7698):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
06-11 15:01:27.579: W/System.err(7698):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
06-11 15:01:27.579: W/System.err(7698):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-11 15:01:27.579: W/System.err(7698):     at android.os.Looper.loop(Looper.java:150)
06-11 15:01:27.579: W/System.err(7698):     at android.app.ActivityThread.main(ActivityThread.java:4293)
06-11 15:01:27.579: W/System.err(7698):     at java.lang.reflect.Method.invokeNative(Native Method)
06-11 15:01:27.579: W/System.err(7698):     at java.lang.reflect.Method.invoke(Method.java:507)
06-11 15:01:27.579: W/System.err(7698):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
06-11 15:01:27.579: W/System.err(7698):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
06-11 15:01:27.579: W/System.err(7698):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T22:01:05.213

在`onPostExecute(...)`我认为你需要使用`_results`的名称`JSONArray`而不是`results`......

```
m_results = obj.getJSONArray("results"); // Change to "_results" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T00:53:28.467

你确定你会得到结果吗？您可以在获得`JSONObject`. 通常，仅当响应为空或空白时才会引发此错误。虽然通过浏览器访问 API 返回结果，但可能是某些原因阻止它在您正在测试的环境中获得响应。

# python - 防止换行符复制粘贴以进行 JSON 验证

> ID：10987906
> 
> 赞同：2
> 
> 时间：2012-06-11T21:40:09.063
> 
> 标签：python, html, json

问题：粘贴后 HTML 表单不保留换行符。

我正在开发一个执行 JSON 格式验证检查的应用程序。我想将 JSON 字符串粘贴到表单中，然后让应用程序使用 Python 中的 json 模块检查其有效性。

如果有任何错误，函数：

```
json.loads(jsonstring) 
```

返回发生错误的行和列。我需要检索线路和号码。但是，以我的形式粘贴不会保留换行符，因此所有内容都在第 1 行...

我该怎么做才能使表格中的粘贴保持换行符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T23:29:32.917

该问题的答案是在 textarea 标记中指定选项“wrap=soft”。这给出了以下内容：

```
<textarea "wrap=soft">
This is the text that I pasted after I copied the output of my JSON validation function. \n 
with newlines characters that are gonna be seen after I pasted it in the text field.
</textarea> 
```

# c# - 使用 SOAP Web 服务时出现奇怪的错误

> ID：10987911
> 
> 赞同：0
> 
> 时间：2012-06-11T21:40:35.750
> 
> 标签：c#, java, web-services, soap

对于一个学校项目，我必须创建一个 Java 服务器，该服务器能够为具有对 WSDL 的服务引用的 .NET 客户端提供服务。我有 .NET 客户端代码：

```
 using (var client = new MathServiceWSDLClient())
        {
            Console.WriteLine("Multiplying " + Num1 + " and " + Num2 + ": " + client.Multiply(Num1, Num2));
            Console.WriteLine("Adding" + Num1 + " and " + Num2 + ": " + client.Add(Num1, Num2));
        } 
```

我还编写了 Java 服务器：

```
Scanner sc = new Scanner(socket.getInputStream());

boolean clientExpectContinue = false;
            int contentLength = -1;
            String line;
            while (!(line = sc.nextLine()).isEmpty()) {
                System.out.println(line);
                if (line.startsWith("Content-Length")) {
                    String[] elements = line.split(": ");
                    contentLength = Integer.parseInt(elements[1]);
                } else if (line.startsWith("Expect")) {
                    clientExpectContinue = true;
                }
            }
            int notEmpties = 0;

            byte[] soapEnvelopeData = new byte[contentLength];
            char[] soapChars = new char[contentLength];
            for (int i = 0; i < contentLength; i++) {
                soapChars[i] = (char) socket.getInputStream().read();
                if (i == 0)
                    System.out.println("DFSDFSDf");
            }

            // System.out.println(socket.getInputStream().read(soapEnvelopeData));
            System.out.println(soapEnvelopeData.length);
            File file = new File("tempEnvelope.txt");
            FileOutputStream fileOut = new FileOutputStream(file);
            // fileOut.write(soapEnvelopeData);
            System.out.println("Content!");
            System.out.println(new String(soapChars));
            fileOut.write(new String(soapChars).getBytes());
            fileOut.flush();
            fileOut.close();
            /* Some fancy SOAP and Reflection stuff that works */ 
```

服务器的要点如下：它获取传入的请求，读取标头并查找内容长度。它解析并保存它。从这里有两个版本。第一个构造一个与内容长度大小相同的字节数组，并将该数组作为参数传递给 socket.getInputStream().read() 方法。第二个构造一个与内容长度相同的字符数组，然后从流中读取单个字节并将它们转换为字符。

如图所示，当我尝试在一次执行中运行具有多个请求的 .NET 客户端时，问题就出现了。第一个请求没有任何明显的问题。当第二个进来时，服务器读取标题，获取内容长度并构造数组。然而，当需要从套接字读取时，程序只是等待。使用 char 数组方法，我了解到它在读取第一个值时会等待。一旦过了一分钟，.NET 就会超时，程序的其余部分就会中断。

但是，如果我让服务器保持运行，并且每次执行 .NET 客户端只有一个请求，那么一切都很好；响应按原样返回。

我已经尝试了一些解决方案：

*   为每个请求创建一个新的 MathServiceWSDLClient
*   将每个请求放在自己的 using() 块中。
*   一次执行两个相同的请求：两个 Multiply() 或 Add() 请求。

任何帮助表示赞赏。谢谢大家。~里诺·扬斯·范伦斯堡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T05:36:46.990

.net 可能会为后续请求保持套接字打开。您的类似服务器的 java 代码中可能存在与此相关的错误。

您可以使用框架代替 Java 服务器代码吗？我强烈推荐这个，并毫不犹豫地推荐 rmbedded Jetty。这意味着您不必在 Java 中的套接字级别工作 - 您可以让 Jetty 处理所有这些复杂情况。

# android - NinePatchDrawable > java.lang.ClassCastException

> ID：10987913
> 
> 赞同：3
> 
> 时间：2012-06-11T21:40:37.193
> 
> 标签：android

尝试从资源文件夹加载资产时出现错误：

```
NinePatchDrawable ninePatchObj = ((NinePatchDrawable) context.getResources().getDrawable(R.drawable.orange_btn)); 
```

退货

```
java.lang.ClassCastException: android.graphics.drawable.BitmapDrawable 
```

此资源在使用 XML 按钮对象时可以正常工作。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:33:08.733

实际问题是 image.9.png 顶部和左侧的黑线 + 底部和右侧的“开始和结束”黑点是不够的（即使教程表明它们会这样）。

一旦将纯黑色标记添加到图像的所有侧面，块数据就不会为空，并且 NinePatchDrawable 已成功创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:20:37.050

我用自己的 image.9.png 解决了一个类似的问题，方法是确保底部黑线小于顶部黑线，并且右侧黑线小于左侧黑线。这是因为可以绘制文本的区域应该小于形状的可调整大小部分。

# java - Java：这是用于保存基本 JDK 日志文件的单例类的正确行为吗？

> ID：10987914
> 
> 赞同：0
> 
> 时间：2012-06-11T21:40:41.017
> 
> 标签：java, logging, error-handling

我为单例记录器类创建了以下包装器，以便我可以记录来自任何文件和/或类的异常。我的灵感来自这里：[Logging to one file from multiple java files](http://www.coderanch.com/t/411562/java/java/Logging-one-file-multiple-java)

我是 java 新手，这是我第一次尝试将异常记录到文件中。虽然以下代码确实有效，但我注意到一些怪癖，我想询问它们是否是“正常行为”或是否存在解决方法。

(1) 一旦创建了日志文件并写入了异常，如果我编辑日志文件（例如删除一些文本行），那么从那一刻起，日志文件将永远不会再次写入。在再次写入日志文件之前，Web 服务器需要重新启动与 Web 应用程序关联的域。这是正常的吗？理想情况下，我希望只保留日志文件中的相关错误，并删除不相关的错误，而无需在 Web 服务器中重新启动 Web 应用程序的域。

（2）如果我删除了日志文件，那么稍后在java程序中发生异常，日志文件不会再次创建，并且异常丢失。同样，在创建新的日志文件之前，Web 服务器需要重新启动与 Web 应用程序关联的域。这是正常的，还是通过编辑以下代码以某种方式解决？理想情况下，我希望能够随时删除日志文件并让应用程序创建一个新文件。

同样，我是新来的，所以请随时指出上述意图是糟糕的设计等。

------代码如下------

这是文件：LoggerWrapper.java

```
import java.io.OutputStream;
import java.io.FileOutputStream;
import java.io.PrintStream;
import java.util.logging.Logger;
import java.util.logging.Level;   
import java.util.logging.FileHandler;  
import java.util.logging.SimpleFormatter;

public class LoggerWrapper {
public static final Logger myLogger = Logger.getLogger("Test");
private static LoggerWrapper instance = null;  

 public static LoggerWrapper getInstance() {  
    if(instance == null) {  
        prepareLogger();  
        instance = new LoggerWrapper ();  
    }  
    return instance;  
 }  

private static void prepareLogger() {
try {
   FileHandler myFileHandler = new FileHandler("/path/to/myLogFile.log", true);  
   myFileHandler.setFormatter(new SimpleFormatter());  
   myLogger.addHandler(myFileHandler);  
   myLogger.setUseParentHandlers(false);  
   myLogger.setLevel(Level.ALL);
} catch (Exception e) {
   ...
}
}    
} 
```

要在不同的文件或类中调用上述代码，请发出这些行（例如）：

```
LoggerWrapper loggerWrapper = LoggerWrapper.getInstance();
...
loggerWrapper.myLogger.log(Level.SEVERE, "some text here"+e.fillInStackTrace()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T21:55:49.860

您无需在日志记录方面遇到所有这些麻烦。日志处理程序（以及所有替代方案，如 logback、log4j）或像 Commons Logging 或 slf4j 这样的包装框架将为您完成几乎所有这些工作。

使用日志最广泛接受的方法是使用包装系统（slf4j 非常流行），然后将日志类作为每个类的私有静态属性包含在内。然后，您可以使用单独的程序进行所有配置，或者您可以拥有将为您设置所有内容的配置文件。

如果你想在代码中设置你的日志系统（不是我会这样做的方式，但你可以......），在你知道会相对较早加载的静态初始化程序中进行。一旦日志系统有了它的信息，就不需要再次配置了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:56:02.600

我假设这是在linux上运行的？当您打开文件时，它指向该文件的引用。当您删除文件时，引用就消失了，但是由于您将引用保存在静态变量中，因此您的代码现在持有一个指向任何内容的文件句柄。相反，你应该做类似的事情

```
cat /dev/null > file 
```

这只会在文件上复制任何内容，而不会更改文件指向的实际 inode。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-12T14:47:45.647

你见过[这个](https://stackoverflow.com/questions/8142465/log4j-stops-logging-in-a-filefile-appenders-when-i-open-edit-the-file)吗？

它可能与您的编辑器/操作系统有关。链接问题的发帖人与 log4j 有类似的问题。

正如另一个答案所述，要清除日志文件而不干扰处理程序：

```
cat /dev/null > file.log 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-11T22:49:26.153

我建议您不要编辑文件！并且不要删除它们！

哈哈哈，那将是一个王牌解决方案，不是吗？

您应该真正使用 Jonathan 建议的开源日志记录（我一直喜欢 log4j - 大多数 IB 使用它，或 slf4j） - 这是进行日志记录的标准方式，没有人真正像您那样做日志记录. 至少，我不知道。

好的，这就是说 - 我根本不了解任何形状或形式的 linux - 正如 Rick 所建议的那样，当你编辑/删除文件时，你所指向的任何东西都会消失。所以，在伪代码中（因为，我对此感到抱歉 - 正如我所指出的，我使用 Windows，所以无法测试）：

```
public class LoggerWrapper {
    *private* FileHandler myFileHandler;
    *private* static final Logger myLogger = Logger.getLogger("Test");
    private static LoggerWrapper instance = null;  

    /*
      here check if the file you're using has been changed! If so, re-do the file setting
    */
    public void log(Level level, String message){
        //argh you are on your own here. I don't know how to *check* the file being used by the file handler...
        //you know what? you can just do this (but it isn't too clean)
        myLogger.removeFileHandler(myFileHandler);
        myFileHandler = new FileHandler("/path/to/myLogFile.log", true); 
        myLogger.addHandler(myFileHandler);
        myLogger.log(level,message);     
    }  

    private static void prepareLogger() {
        try {
            //don't shadow the myFileHandler by accident!
            myFileHandler = new FileHandler("/path/to/myLogFile.log", true); 

... 
```

当然，这只是在您每次登录时重置文件处理程序。而且您不会使用以下命令登录：

```
loggerWrapper.myLogger.log(Level.SEVERE, "some text here"+e.fillInStackTrace()); 
```

但与

```
loggerWrapper.log(Level.SEVERE, "some text here"+e.fillInStackTrace()); 
```

或者只是使用开源日志记录（log4j！）并快乐！可能有一些方法可以检查文件是否丢失 - 哦！也许检查 isLoggable 方法？我不知道这是否会影响已更改的文件……但我认为不会。

此外，您可能需要在您的文件处理程序上设置错误管理器 - 从事物的外观来看，如果记录器无法记录，它会向错误管理器发送一些东西。不过我对此并不熟悉，而且我可能会说胡话。

# delphi - 从触发器下载delphi文件并捕获文件名

> ID：10987918
> 
> 赞同：3
> 
> 时间：2012-06-11T21:40:58.573
> 
> 标签：delphi, http

我有一个网站的网址。它看起来像这样：[http](http://www.example.com/downloads/file/4789/download) ://www.example.com/downloads/file/4789/download ？

我想将文件保存到我的系统中，但我不知道如何获取示例中由 URL 触发的下载的文件名。有些文件是 pdf 其他文件是 doc 和 rtf 等。

如果有人能指出文件名问题的方向以及使用哪些组件，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:23:56.677

要从 url 获取文件名，您可以检索 HEAD 信息并检查[Content Disposition](http://www.ietf.org/rfc/rfc2183.txt)标头字段。对于此任务，您可以使用 TIdHTTP indy 组件。如果 Content Disposition 没有文件名，您可以尝试解析 url。

试试这个样本。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  IdURI,
  IdHttp,
  SysUtils;

function GetRemoteFileName (const URI: string) : string;
var
  LHttp: TIdHTTP;
begin
  LHttp := TIdHTTP.Create(nil);
  try
    LHttp.Head(URI);
    Result:= LHTTP.Response.RawHeaders.Params['Content-Disposition', 'filename'];
    if Result = '' then
     with TIdURI.Create(URI) do
      try
       Result := Document;
      finally
       Free;
      end;
  finally
    LHttp.Free;
  end;
end;

begin
  try
    Writeln(GetRemoteFileName('http://dl.dropbox.com/u/12733424/Blog/Delphi%20Wmi%20Code%20Creator/Setup_WmiDelphiCodeCreator.exe'));
    Writeln(GetRemoteFileName('http://studiostyl.es/settings/downloadScheme/1305'));

  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

# c - 跟踪精度

> ID：10987930
> 
> 赞同：0
> 
> 时间：2012-06-11T21:41:40.873
> 
> 标签：c, linux

我正在尝试为守护程序编写一个插件，现在我处于最后阶段。所以我想`mtrace`寻找内存泄漏，因为我没有看到任何可能的启动`valgrind`实例的方式（我没有运行实际的守护进程，我运行了一个启动进程来检查一些配置文件，然后启动守护进程）。

因此，当我查看来自 的日志时`mtrace`，我看到了很多非常不准确的信息。例如，它说这`index += UNIT`是一个永远不会被释放的内存分配，以及很多类似的东西。

我正在运行以下命令`mtrace`：

`mtrace ./a.out memory > raw.log; cat raw.log | tr -s " " " " | cut -d" " -f4 > err.log; cat err.log | addr2line -e a.out > fin.log`

关于为什么我得到完全没有用的输出的任何想法？

PS：a.out 编译时所有调试标志都打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:21:05.373

我相信问题出在`addr2line`.
您应该尝试阅读原文`raw.log`，看看是否有意义。
取一个可疑的分配，在原始日志中找到它，运行`objdump -lrd a.out`并找到流水线。应该是调用`malloc`. 如果是错就是错`addr2line`，如果不是错就是错`mtrace`。

一些可能的陷阱：
1\. 编译`a.out`时没有`-g`.
2\. 运行一个并给`a.out`另一个。 3\. 在错误的源代码版本中搜索您获得的行号。`a.out``addr2line`

PS你没有类似的东西`#define UNIT (malloc(1000),7)`，是吗？

# php - 使用 jQuery for PHP 获取 div 内容

> ID：10987936
> 
> 赞同：4
> 
> 时间：2012-06-11T21:42:16.637
> 
> 标签：php, jquery, html

**更新**：哇，这是有史以来最快的响应，而且在几分钟内就有这么多答案。惊人。好的，这就是我想要做的。 [http://edvizenor.com/invoice33/](http://edvizenor.com/invoice33/)

我想即时编辑这张发票，但是当我点击顶部的蓝框时，我想预览或在下一页上看到此内容，其中包含 php var 回显。

这个蓝色框稍后将更改为底部的按钮，但我正在使用它进行测试。

如您所见，它调用了 ajax 脚本，但我需要将编辑后的 ​​div 内容发送给一个 php var，我可以在预览页面上回显它。如果我可以把它放在一个 php var 中，我会在下一页上用它做我想做的事情。那有意义吗？谢谢你们的快速回复。

## 旧帖子

是否可以使用 jQuery 获取内容，`div`然后将它们放在 PHP var 中以通过 GET 或 POST 发送？

我可以`div`像这样使用 jQuery 获取内容：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

    <script>   
       $(document).ready(function() 
       {
           $("#MyButton").click(function()
           {
               var htmlStr = $("#MyDiv").html();
           });
        });
    </script> 
```

但是如何将 jQuery var 放入 php var 中。我也需要按一下按钮来做到这一点。这不包含在上面的代码中。我需要，因为`div`文件是可变的，当我点击 UPDATE 并通过 PHP 发送时，它需要有最新的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T21:57:09.853

根据您的情况，您正在尝试将 JavaScript 变量发送到 PHP。唯一常见的方法是以 JSON 格式进行交换，

例如，假设我们有基本的文本编辑器

查询：

```
$($document).ready(function(){

   $("#submit-button").click(function(){
       $.post('yourphpscript.php', {
             //this will be PHP var:   //this is JavaScript variable:   
             'text'                : $("#some_text_area").text()

        }, function(response){
            //To avoid JS Fatal Error: 
            try {
                var result = JSON.parse(response);
                //get back from PHP    
                if ( result.success){ alert('successfully changed') } 
               } catch(e){
              //response isn't JSON
             }
         });

   }); 

}); 
```

PHP 代码

```
<?php

/**
 * 
 * So we are processing that variable from JavaScript
 */
if ( isset($_POST['text']) ){
  //do smth, like save to database
}

/**
 * Well if you want to show "Success message"
 * that div or textarea successfully changed
 * you can send the result BACK to JavaScript via JSON  
 */

$some_array = array();
$some_aray['success'] = true;

die( json_encode($some_array) ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T21:45:39.630

您需要使用 ajax 将值发送到您的服务器。

```
var html = $('#myDiv').html();

$.ajax({
   type: 'POST',
   url: '/SomeUrl/MyResource.php',
   data: JSON.stringify({ text: html }),
   success: function(response)
   {
      alert('Ajax call successful!');
   }
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-11T21:46:32.600

您可以使用[隐藏的表单字段](http://www.tizag.com/htmlT/htmlhidden.php)并使用 jQuery 将隐藏字段的值设置为该值，因此当单击按钮并提交表单时，您的 PHP 可以像其他任何表单元素一样拾取它（使用`$_POST`）。或者，您可以使用[AJAX](http://api.jquery.com/jQuery.post/)向您的 PHP 页面发出异步请求。这可能更简单。这是一个例子：

```
$("#myButton").click(function() {
    var htmlStr = $('#myDiv').html();

    $.post("mypage.php", { inputHTML : htmlStr },
    function(data) {
        alert("Data returned from mypage.php: " + data);
    });
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-11T21:57:21.333

您需要的是 AJAX（参见[http://en.wikipedia.org/wiki/Ajax_(programming](http://en.wikipedia.org/wiki/Ajax_(programming) )）

基本思想是通过调用 php 脚本等方式使用 javascript 发送 http 请求并等待响应。

使用纯 Javascript AJAX 请求有点不方便，但由于您已经在使用 jQuery，您可以使用这个库。有关完整概述，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

客户端的代码将是这样的：

```
$.ajax({
    url:'http://example.com/script.php',
    data:'var=' + $('#myDiv').html(),
    type:'GET'
    success:function(response) {
        console.log(response) // Your response
    },
    error:function(error) {
        console.log(error) // No successful request
    }
}); 
```

在你的`script.php`你可以做这样的事情：

```
$var = $_GET['var'];

// Do some processing...

echo 'response'; 
```

并且在您的 javascript 控制台中会出现该字符串`response`。在基于 ajax 的现代应用程序中，发送和接收数据的最佳实践方式是通过[JSON](http://en.wikipedia.org/wiki/JSON)。

因此，要在您的请求和响应中处理更大的数据集，您可以执行以下操作：

```
$.ajax({
    url:'http://example.com/script.php',
    data:{
        var:$('#myDiv').html()
    },
    type:'GET'
    success:function(response) {
        console.log(response) // Your response
    },
    error:function(error) {
        console.log(error) // No successful request
    }
}); 
```

在您的 PHP 代码中，您可以使用`$someArray = json_decode($_GET['var'])`为 PHP 解码 JSON（它将返回一个关联数组）并将数组`$jsonString = json_encode($someArray)`编码为 JSON 字符串，您可以在 javascript 中将其作为常规 JSON 返回和处理。

我希望这可以帮助你。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-11T21:49:35.000

是的，有可能

```
<script type="text/javascript">
$(document).ready(function(){
  $('#MyButton').click(function(){
   $.post('sendinfo.php',
    {
     data: $('#data').html()
    },
    function(response){
     alert('Successfully');
    });
  });
 });
</script>

<div id="data">Here is some data</div> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-11T21:45:24.940

使用 ajax 向 php（服务器）发送值。这里有一个很好的 ajax 教程[http://www.w3schools.com/jquery/jquery_ajax.asp](http://www.w3schools.com/jquery/jquery_ajax.asp)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-11T21:45:34.287

你应该只使用 Ajax 来发送你的变量。

```
$.ajax({
   url:'whateverUrl.php',
   type:'GET',
   data:{
       html : htmlStr
   }
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-11T21:45:57.060

使用 AJAX：

```
$("#MyButton").click(function() {
    var htmlStr = $("#MyDiv").html();

    $.ajax({
      url: "script.php",
      type: "POST",
      data: {htmlStr : htmlStr},
      success: function(returnedData) {
         //do something
      }
    });

}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-11T21:46:30.353

像下面这样的东西应该可以工作。

阅读更多：[http ://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$("#YourButton").click(function(e){
    e.preventDefault();
    var htmlStr = $("#YourDiv").html();
    $.post(
        url: 'YourPHP.php',
        data: '{"htmlStr" : "'+htmlStr+'"}',
        success: function(){
            alert("Success!");
        }
    );  
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-11T21:46:01.050

通过 XmlHttpRequest（“ajax”）通过 POST 或 GET 将数据发送到您的 php 页面。

# java - 如何获取对非默认 MIDI 音序器的引用？

> ID：10987937
> 
> 赞同：3
> 
> 时间：2012-06-11T21:42:17.790
> 
> 标签：java, midi, javasound

我正在构建一个 Java 应用程序，它以编程方式生成一个 MIDI 序列，然后通过它发送，`LoopBe Internal Midi Port`以便我可以使用`Ableton Live`乐器来获得更好的声音播放质量。

如果我错了，请纠正我。我需要的是生成一个`Sequence`，将包含`Tracks`将包含`MidiEvents`，将包含`MIDI messages`时间信息。我想我下来了。

**真正的问题是如何通过 LoopBe MIDI 端口发送它。为此，我应该需要一个`Sequencer`，但我不知道如何获得一个而不是默认的，而且我不想要那个。**

我想一种解决方法是将序列写入 .mid 文件，然后以编程方式在 LoopBe 端口上播放它。

所以我的问题是：**我怎样才能获得一个非默认的 Sequencer？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T05:59:27.200

你需要方法`MidiSystem.getSequencer(boolean)`。当您使用`false`参数调用它时，它会为您提供未连接的音序器。

从您的目标 MIDI 设备获取`Receiver`实例并将其设置为带有`seq.getTransmitter().setReceiver(rec)`调用的音序器。

示例片段：

```
MIDIDevice device = ... // obtain the MIDIDevice instance
Sequencer seq = MidiSystem.getSequencer(false);
Receiver rec = device.getReceiver();
seq.getTransmitter().setReceiver(rec) 
```

有关 Sequencer 使用的示例，请参阅[http://docs.oracle.com/javase/tutorial/sound/MIDI-seq-methods.html上的教程](http://docs.oracle.com/javase/tutorial/sound/MIDI-seq-methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T13:22:31.587

对于我自己的项目，我使用 LoopBe1 将 MIDI 信号发送到 REAPER。当然，LoopBe1 应该已经安装好了。

在这个例子中，我为 LoopBe 的外部 MIDI 端口遍历系统的 MIDI 设备，然后发送音符 C 10 次。

```
import javax.sound.midi.*;

public class Main {
    public static void main(String[] args) throws MidiUnavailableException, InvalidMidiDataException, InterruptedException {
        MidiDevice external;

        MidiDevice.Info[] devices = MidiSystem.getMidiDeviceInfo();

        //Iterate through the devices to get the External LoopBe MIDI port

        for (MidiDevice.Info deviceInfo : devices) {

            if(deviceInfo.getName().equals("LoopBe Internal MIDI")){
                if(deviceInfo.getDescription().equals("External MIDI Port")){
                    external = MidiSystem.getMidiDevice(deviceInfo);
                    System.out.println("Device Name : " + deviceInfo.getName());
                    System.out.println("Device Description : " + deviceInfo.getDescription() + "\n");

                    external.open();
                    Receiver receiver = external.getReceiver();
                    ShortMessage message = new ShortMessage();

                    for (int i = 0; i < 10; i++) {
                        // Start playing the note Middle C (60),
                        // moderately loud (velocity = 93).
                        message.setMessage(ShortMessage.NOTE_ON, 0, 60, 93);
                        long timeStamp = -1;
                        receiver.send(message, timeStamp);
                        Thread.sleep(1000);
                    }

                    external.close();
                }
            }
        }
    }
} 
```

有关发送 MIDI 信号的更多信息，请参阅此链接：

[https://docs.oracle.com/javase/tutorial/sound/MIDI-messages.html](https://docs.oracle.com/javase/tutorial/sound/MIDI-messages.html)

我希望这有帮助！

# c# - 一种游戏设计解决方案，用于映射具有许多可以应用的突变的大型属性数据集。

> ID：10987947
> 
> 赞同：3
> 
> 时间：2012-06-11T21:43:04.837
> 
> 标签：c#, dictionary

我在想出一个声音设计时遇到了一些麻烦，因为对我来说这是一个相当棘手的模块。实际的业务逻辑把我弄得一团糟，所以我把它改写成更容易理解的形式。我正在用 C# 编码，尽管我猜实际设计与语言无关。

想象一下，您正在编写一个简单的奇幻角色扮演游戏。你有一个球员，他有一些基本的属性。玩家可以装备一些物品，这可能会以某种方式影响他的属性。项目具有一个或多个属性，这些属性定义了哪些属性被修改。

```
public Character
{
    public string charName;
    public int charStrength;
    public int charHitPoints;
    ...
    public List<Item> equippedItems;
}

public Item
{
    public string itemName;
    public List<ItemProperty> itemProperties;   
}

public ItemProperty
{
    public int propertyValue;
    public virtual void applyPropertyModification(Character charStatsToBeModified){}
} 
```

字符数据采用 XML 格式：

```
<Character>
    <Name>John Doe</Name>
    <BaseStrength>10</BaseStrength>
    <BaseHitPoints>100</BaseHitPoints>
    <Items>
        <Item>
            <Name>Short Sword</Name>
            <Properties>
                <Strength>10</Strength>
                <HitPoints>200</HitPoints>
            </Properties>
        </Item>
    </Items>
<Character> 
```

我正在寻找一种从 XML 加载字符数据的方法，它允许我轻松添加 X 通用新字符属性（想象 50 左右）和/或 Y 通用项目属性（想象 100-150 左右）。

我的设计思路：

每个可能的字符属性都作为新属性添加到 Character 类中。随着属性数量的增加，可能会变得笨拙。每个可能的 Item Property 都作为其自己的 ItemProperty 子类添加，并带有适当的`applyPropertyModification`方法。

```
public Strength : ItemProperty
{
    public override void applyPropertyModification(Character charStatsToBeModified)
    {
        charStatsToBeModified.charStrength += this.propertyValue
    }
} 
```

这看起来确实是大量的过多代码，特别是因为所有被覆盖的方法正在确定应该修改哪个字符属性。

ItemProperty 将使用反射创建，元素 XML 标记对应于适当的 ItemProperty 子类（我认为替代方案是 100 条件开关？）。

我的总体设计是合理的，还是我接近这个方向是错误的？我没有足够的知识来自己解决这个问题，但我相信有一种更简洁的方法可以做到这一点。此外，如果这个问题根本不清楚或漫无边际，请告诉我，我会尝试澄清/改述。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:35:11.407

好的，这里有几个人走在了正确的道路上……但是没有人一针见血，所以就这样吧。看起来你开始在正确的道路上，但需要更进一步。我在代码中写了这个注释，让它为我做一些解释。

开始：

```
//So you have a character...
public class Character
{
    //You know you ALWAYS need Raw Attribs in a game
    private Dictionary<string, Attrib> _rawAttributes;
    //You know you will always need a record of modified attribs
    private Dictionary<string, Attrib> _modifiedAttributes;
    //And while your at it, take a light optimization to not have to recalculate everytime
    private bool _areModifiedAttribsCurrent { get; set; }
    //A character has gear! This is what makes the world go around
    public List<Equipment> Equipment { get; private set; }

    //You don't want to give public access to setting gear, this should be controlled.
    //You'll want to do more as far as remove / change... but this'll get you started
    public void AddEquipment(Equipment e)
    {
        Equipment.Add(e);
        _areModifiedAttribsCurrent = false;
    }

    //And a way to add attribs and set base values..
    //once again, you will want more but this will get you started
    public void AddAttribute(Attrib x)
    {
        _rawAttributes.Add(x.Name, x);
    }

    //Finally you want a way to fetch the modified attribs
    //Keep in mind you need to do the copy dance in the  apply to not upset your 
    //base stats.
    public Dictionary<string, Attrib> FetchModifiedAttributes()
    {
        if (!_areModifiedAttribsCurrent)
        {
            var traceAttribs = _rawAttributes;
            foreach (var e in Equipment.OrderBy(x => x.ApplyOrder))
            {
                traceAttribs = e.ApplyModifiers(traceAttribs);
            }
            _modifiedAttributes = traceAttribs;
        }

        return _modifiedAttributes;
    }
}

//Attrib, pretty simple.. Could go away but we all know attribs have effects so don't even start down that path
//You WILL need this class later on... but right now it looks pretty meaningless.
public class Attrib
{
    public string Name { get; set; }
    public decimal Value { get; set; }
}

//GEAR... yes, this is what all RPG lovers love... 
//Grind for that awesome gear!
public class Equipment
{
    //Ok so I put in some stuff unrelated to your problem but you need a name right?!
    public string Name { get; set; }
    //What order does gear effect stats... this is important if you do more than flat modifiers.
    public int ApplyOrder { get; set; }
    //What modifiers does this gear have?!
    public List<Modifier> ItemModifiers { get; set; }
    //Aha.... let the gear apply its modifiers to an attrib dictionary... I knew I loved OO for some reason
    public Dictionary<string, Attrib> ApplyModifiers(Dictionary<string, Attrib> inParams)
    {
        //Copy / Clone... Whatever you want to call it this is important as to not 
        //unintentionally screw up yoru base collection.
        var response = new Dictionary<string, Attrib>();
        foreach (var m in ItemModifiers)
        {
            //If we have this attrib, keep going
            if (inParams.ContainsKey(m.TargetName))
            {
                //If this is the first time the response ran into it, add it
                if (!response.ContainsKey(m.TargetName))
                {
                    response.Add(m.TargetName, inParams[m.TargetName]);
                }

                //And wait what's this... let the Modifier apply it!?  
                //yes... pass it down again... you'll see why in a second.
                m.Apply(response[m.TargetName]);
            }
        }

        return response;
    }
}

//A modifier... what the!?
//Yep... abstraction is key to maintainable and expandable code
public class Modifier
{
    public string TargetName { get; set; }
    public decimal ModifierValue { get; set; }
    //The other stuff is kind of pointless... but this is where the magic happens... All in a modifier type.
    public ModifierType ModifierType { get; set; }
    //Let the modifier apply it's own values... off the type... yea
    //I did that on purpose ;-)
    public void Apply(Attrib a)
    {
        a.Value = ModifierType.ApplyModifier(this, a.Value);
    }
}

//Decoration... Wonderful
//This base class gives you a interface to work with... Hell, it could be an interface but I decided
//to type abstract today.
public abstract class ModifierType
{
    public abstract string ModifierName { get; }
    public abstract decimal ApplyModifier(Modifier m, decimal InitialValue);
}

//A concrete type of ModifierType... This is what determines how the modifier value is applied.
//This gives you more flexibility than hard coding modifier types.  If you really wanted to you could
//serialize these and store lambda expressions in the DB so you not only have type driven logic, you could have
//data driven behavior.
public class FlatModifier : ModifierType
{
    //The names can be really handy if you want to expose calculations to players.
    public override string ModifierName { get { return "Flat Effect"; } }
    //And finally... let the calculation happen!  Time to bubble back up!
    public override decimal ApplyModifier(Modifier m, decimal InitialValue)
    {
        return InitialValue + m.ModifierValue;
    }
} 
```

让您的对象为您完成工作。我知道它来自 XML，但让它们反序列化到您的对象中并调用一些选择方法来处理它。这避免了一些烦人的问题，比如 C# 是通过引用和所有烦人的东西。它还可以防止多余的处理通道抬高您的对象图。

如果您有任何问题，请告诉我...今晚我很无聊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:53:20.563

那么您`Character`的类型有数百个属性/字段，并且您想简单地根据 XML 元素名称设置这些字段的值吗？

最简单的解决方案是简单地读取 XML 元素并构造一个`Dictionary<string, string>`包含您的值的元素。然后，对于字典的每个元素，如果您的`Character`类型从字典键中公开了匹配的属性/字段，请尝试使用该值通过反射设置属性的值。又名：

```
Character someCharacter = // Create your character
Dictionary<string, string> myDictionary = // Load XML and transform
var properties = someCharacter.GetType().GetProperties();

foreach(KeyValuePair<string, string> kvp in myDictionary)
{
    var matchingProperty = properties.FirstOrDefault(x => x.PropertyName.ToLower() == kvp.Key.ToLower());

    if(matchingProperty != null)
    {
        matchingProperty.SetValue(character, kvp.Value, null); // make sure to type convert if necesary here, since kvp.Value is a string, etc
    }
} 
```

您只需编写一次代码，因此您可以将属性添加到您的 XML/Object 并能够随意覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T22:17:03.433

而不是使用反射。更改 xml 以匹配这样的内容

```
<Items>
  <Item name="Short Sword">
    <Properties>
      <Property name="Strength" type="int">10<Property>               
      <Propery name="HitPoints" type="int">200</HitPoints>
    </Properties>
  </Item>
</Items> 
```

根据属性将其解析为 a `Dictionary<String,Dynamic>`，实现索引器

例如

```
private Dictionary<String, Dynamic> _properties = new Dictionary<String,Dynamic>();

public dynamic this[Strng argIndex]
{
  get {return _properties[argIndex];}
} 
```

把它带到角色等等，你可以做一些有趣的事情，比如

```
characters["Fred"].Hitpoints = characters["Fred"].Items["Short Sword"].Hitpoints * characters["Fred"].Experience["Blades"] 
```

一旦你定义了propertybag 类（`Dictionary<String,Dynamic>`thingy），一个属性就可以是一个propertybag。

注意它会慢一点，因为基本上这是使用 .net 的 Ducktyping 版本，它使用后期绑定但它非常灵活，如果你想在运行时为 sirry ellors 付出代价。

# mysql - Mysql外键，必须在引用表中匹配或键被删除？

> ID：10987948
> 
> 赞同：0
> 
> 时间：2012-06-11T21:43:04.837
> 
> 标签：mysql, database, database-design, foreign-key-relationship

我在mysql中的两个表之间有一对多的关系。

一种以 url 为主的称为**类型**

```
url
varchar(255) 
```

还有一个叫**订单**，在 url 上有一个索引。

```
url          | id_no
varchar(255) | int 
```

**order**表中可以有许多值，并且已经设置了一个外键，因此如果`url`在 table**类型中删除 a ，它会删除所有与****order**`url`匹配的关联键。

 **订单也可以手动删除，这意味着 a`url`可能存在于与表**order**没有关系的**类型**中。

 **有没有办法设置外键，以便如果`url`in**类型与表****顺序**没有关系，那么它将从**type**中删除自己？

查看mysql手册我无法弄清楚，我很困惑，`CASCADE`因为它说它将删除所有关联的键，但我只想`url`从表**类型**中删除一个当且仅当两者之间没有关系？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:47:36.513

`DELETE`您可以使用表上的触发器轻松地做到这一点`order`：让它检查是否存在具有相同 url 的其他行，如果不从`type`.

另一种方法是创建一个维护脚本，类似于

```
DELETE FROM `type` WHERE url NOT IN (
  SELECT DISTINCT `url` FROM `order`
) 
```

并定期或按需运行它。****

# c# - C# StreamWriter ，从不同的类写入文件？

> ID：10987949
> 
> 赞同：2
> 
> 时间：2012-06-11T21:43:04.797
> 
> 标签：c#, class, streamwriter

如何从不同的类写入文件？

```
public class gen
{
   public static string id;
   public static string m_graph_file;
}

static void Main(string[] args)
{
  gen.id = args[1]; 
  gen.m_graph_file = @"msgrate_graph_" + gen.id + ".txt";
  StreamWriter mgraph = new StreamWriter(gen.m_graph_file);
  process();
}

public static void process()
{
  <I need to write to mgraph here>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:48:05.607

将 StreamWriter 传递`mgraph`给您的`process()`方法

```
static void Main(string[] args)
{
  // The id and m_graph_file fields are static. 
  // No need to instantiate an object 
  gen.id = args[1]; 
  gen.m_graph_file = @"msgrate_graph_" + gen.id + ".txt";
  StreamWriter mgraph = new StreamWriter(gen.m_graph_file);
  process(mgraph);
}

public static void process(StreamWriter sw)
{
 // use sw 
} 
```

但是，您的代码有一些难以理解的要点：

*   `gen`您使用两个静态变量声明该类。这些变量在所有 gen 实例之间共享。如果这是一个预期的目标，那么没问题，但我有点困惑。
*   您在 main 方法中打开 StreamWriter。考虑到静态 m_grph_file，这并不是真正必要的，并且在您的代码引发异常的情况下使清理变得复杂。

例如，在您的 gen 类中（或在另一个类中），您可以编写适用于同一文件的方法，因为文件名在类 gen 中是静态的

```
public static void process2()
{
    using(StreamWriter sw = new StreamWriter(gen.m_graph_file)) 
    { 
        // write your data .....
        // flush
        // no need to close/dispose inside a using statement.
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T21:58:39.753

您可以将 StreamWriter 对象作为参数传递。或者，您可以在您的流程方法中创建一个新实例。我还建议将您的 StreamWriter 包装在一个`using`：

```
public static void process(StreamWriter swObj)
{
  using (swObj)) {
      // Your statements
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T21:56:46.537

当然，您可以像这样简单地使用“过程”方法：

```
public static void process() 
{
  // possible because of public class with static public members
  using(StreamWriter mgraph = new StreamWriter(gen.m_graph_file))
  {
     // do your processing...
  }
} 
```

但从设计的角度来看，这会更有意义（编辑：完整代码）：

```
public class Gen 
{ 
   // you could have private members here and these properties to wrap them
   public string Id { get; set; } 
   public string GraphFile { get; set; } 
} 

public static void process(Gen gen) 
{
   // possible because of public class with static public members
   using(StreamWriter mgraph = new StreamWriter(gen.GraphFile))
   {
     sw.WriteLine(gen.Id);
   }
}

static void Main(string[] args) 
{ 
  Gen gen = new Gen();
  gen.Id = args[1];  
  gen.GraphFile = @"msgrate_graph_" + gen.Id + ".txt"; 
  process(gen); 
} 
```

# actionscript-3 - Flash 组件可以检查自己的使用次数吗？

> ID：10987951
> 
> 赞同：1
> 
> 时间：2012-06-11T21:43:24.400
> 
> 标签：actionscript-3, flash, actionscript, components, actionscript-2

Flash 组件（或通常链接到 MovieClip 的 Actionscript 类）有什么方法可以检查或返回其自己的使用计数？我对 AS2 和 AS3 的答案很感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:40:28.503

我不认为已经内置了任何东西，但是您可以使用静态 var 轻松实现这一点，例如：

```
public class MyClass
{
    private static var classCreationCount:int = 0;
    public function MyClass()
    {
        classCreationCount++;
    }
    public static function getClassCreationCount():int
    {
        return classCreationCount;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:55:25.850

（仅限 ActionScript 3）另一种可能性是，使用具有弱引用键的 Dictionary 来在运行时跟踪引用/保留的对象。通过检查字典中的实例，您可以大致了解发生了什么。但这是一种不确定的方法，因为您永远不知道垃圾收集何时运行。

另一个想法是 ObjectPool。这可以在几分钟内初步实现，但需要在整个应用程序中使用。

# seam - Seam3 @ViewConfig 和漂亮面孔映射 id

> ID：10987960
> 
> 赞同：0
> 
> 时间：2012-06-11T21:43:55.263
> 
> 标签：seam, seam3, prettyfaces

通过 Seam3 @ViewConfig 接口使用漂亮面孔时，如何获取 urlMapping 的 id？

在 pretty-config.xml 中，id 在 url-mapping 元素上指定。

```
<url-mapping id="foo">
   <pattern value="/page/foo/">
   <view-id value="..." /> 
</url-mapping> 
```

使用 Pretty Faces 提供的 @URLMapping 注释，我可以使用 id 属性。

```
@URLMapping(id = "foo", pattern = "/page/foo", viewId = "...")
public class FooBean {
    // some code here
} 
```

但是 Seam faces 提供的 @UrlMapping 注释没有任何 id 属性，所以我想知道这个映射的 id 是什么。

```
@ViewConfig
public interface PagesConfig {
   static enum Pages {
        @ViewPattern("...")
        @UrlMapping(pattern = "/page/foo")
        FOO,
    }

    static enum AnotherPages {
        @ViewPattern("...")
        @UrlMapping(pattern = "/page/foo2")
        FOO,
    }
} 
```

# java - 如何使用 JAXB 生成单个 XSD 文件？

> ID：10987964
> 
> 赞同：0
> 
> 时间：2012-06-11T21:44:04.883
> 
> 标签：java, jaxb, xsd

我有一个包含多种方法的 Web 服务，每种方法都有自己的响应和请求（POJO 类）。

我想将 XSD 文件分发给我的用户，所以我决定使用 JAXB 来生成模式文件。

我的问题是我想要单独的文件（每个服务一个）！

我已经尝试过 JAXB，但我得到的只是一个包含所有对象的大 XSD

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:34:28.093

当您使用 JAX-WS 发布您的 Web 服务时，请`wsdl`告诉一切每个客户端的需求和范围。

无论如何..说JAX-RS？

您可以使用 JAXBContext#generateSchema 为每个类或某些类生成小范围的 XSD

```
public void generateSchema(final Class<?> classesToBeBound,
                           final OutputStream schemaStream)
    throws JAXBException, IOException {

    final JAXBContext context = JAXBContext.newInstance(classesToBeBound);

    context.generateSchema(new SchemaOutputResolver() {
        public Result createOutput(final String namespaceUri,
                                   final String suggestedFileName)
            throws IOException {

            return new StreamResult(schemaStream) {
                @Override
                public String getSystemId() {
                    return suggestedFileName;
                }
            }
        }
    });
} 
```

# java - 如何在不将整个文件解压缩到磁盘的情况下读取 HUGE 压缩文件的最后 n 行

> ID：10987970
> 
> 赞同：0
> 
> 时间：2012-06-11T21:44:28.110
> 
> 标签：java, file-io, compression

我想读取压缩在 zip 文件中的大 txt 文件的最后 n 行而不解压缩它。

这就是我现在所拥有的：

```
ZipFile zf = new ZipFile(file.getAbsolutePath());
Enumeration<?> entries = zf.entries();
ZipEntry ze = (ZipEntry) entries.nextElement();
BufferedReader in = new BufferedReader(new InputStreamReader(zf.getInputStream(ze)));

void readLastNLines(BufferedReader bf){
//some code here
} 
```

我正在考虑使用的方式，`RandomAccessFile(File file, String mode)`但它需要 a`File`作为参数。不能将 Zip 文件视为目录，因此我无法通过它。

有任何想法吗？

感谢任何帮助和投入。

谢谢！

[编辑] 我想出了一种效率较低的方法来实现这一目标：

由于`RandomAccessFile`无法使用，我使用了以下`InputStream`方法：

```
InputStream is = zf.getInputStream(ze);
int length = is.available();
byte[] bytes = new byte[length];
int ch = -1;
while ((ch = is.read()) != -1) {
  bytes[--length] = (byte) ch;
}

String line = new String(bytes);
//reverse the string
String newLine = new StringBuilder(line).reverse().toString();

//Select how many lines do you want(some number = number of bytes)
System.out.println(newLine.substring(line.length()-#some number#)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T12:25:01.020

您不能对压缩流内容进行随机访问。你要么需要解压缩到一个临时文件，要么想办法从一个流中得到你需要的东西（例如，当你到达流的末尾时，通过流读取并将最后 N 行保留在内存中，你有最后 N 行）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T06:27:18.787

像解密和二进制反序列化这样的压缩只能从一开始就完成。有一些压缩形式可以做到这一点，但只有最简单的形式。（Zip 和 Jar 不是这些示例）这是因为您不知道字节的含义，除非您读取它们之前的一些（通常是全部）字节。

如果要访问压缩的“文件”的一部分，则需要将其分解为可以单独解压缩的较小部分。

# cuda - 使用元组键通过键减少 CUDA 推力

> ID：10987973
> 
> 赞同：1
> 
> 时间：2012-06-11T21:44:43.720
> 
> 标签：cuda, thrust

我有两个向量，在创建一个`tuple`(with `zip_iterator`) 之后，我会订购它们，`sort_by_key`然后 apply `reduce_by_key`。

但是按键还原效果不佳，因为它会创建一个不正确的矢量计数器。有人可以帮助我吗？这是我的相关代码片段。

```
...
typedef thrust::device_vector<int>::iterator IntIterator;
typedef thrust::tuple<IntIterator, IntIterator> IteratorTuple;
typedef thrust::zip_iterator<IteratorTuple> ZipIterator;
typedef  thrust::tuple<int, int> tupla; 
...
thrust::device_vector <int> documenti(n);
thrust::device_vector <int> strip(n);
...
ZipIterator bufferBegin (thrust::make_tuple(documenti.begin(),strip.begin()));
ZipIterator bufferEnd (thrust::make_tuple(documenti.end(),strip.end()));

...
thrust::sort_by_key(bufferBegin,bufferEnd, counter.begin());

thrust::device_vector <tupla> example(n);

thrust::reduce_by_key(bufferBegin,bufferEnd, counter.begin(), example.begin(), counter.begin());

thrust::sort_by_key(counter.begin(), counter.begin()+n, example.begin(),thrust::greater <int>()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-30T17:51:59.117

我提供这个问题的答案只是为了将其从未回答的列表中删除。

你的问题对我来说似乎不太清楚。从您发布的代码片段中，我的理解是您对**使用 tuple keys 进行键还原**感兴趣。

您可以在下面找到一个完整的工作示例。我希望它可以对未来的用户有所帮助。

```
#include <thrust/device_vector.h>
#include <thrust/reduce.h>

// --- Defining key tuple type
typedef thrust::tuple<int,int> Tuple;

typedef thrust::host_vector<Tuple>::iterator  dIter1;
typedef thrust::host_vector<float>::iterator  dIter2;

/************************************/
/* EQUALITY OPERATOR BETWEEN TUPLES */
/************************************/
struct BinaryPredicate
{
  __host__ __device__ bool operator () 
                      (const Tuple& lhs, const Tuple& rhs) 
  {
    return (thrust::get<0>(lhs) == thrust::get<0>(rhs)) && (thrust::get<1>(lhs) == thrust::get<1>(rhs));
  }
};

/********/
/* MAIN */
/********/
int main()
{
    const int N = 7;

    thrust::host_vector<Tuple> keys_input(N);
    thrust::host_vector<float> values_input(N);

    int keys1_input[N]          = {1, 3, 3, 3, 2, 2, 1};            // input keys 1
    int keys2_input[N]          = {1, 5, 3, 8, 2, 2, 1};            // input keys 2
    float input_values[N]       = {9., 8., 7., 6., 5., 4., 3.};     // input values

    for (int i=0; i<N; i++) {
        keys_input[i] = thrust::make_tuple(keys1_input[i], keys2_input[i]);
        values_input[i] = input_values[i];
    }

    for (int i=0; i<N; i++) printf("%i %i\n", thrust::get<0>(keys_input[i]), thrust::get<1>(keys_input[i]));

    thrust::host_vector<Tuple> keys_output(N);
    thrust::host_vector<float> values_output(N);

    thrust::pair<dIter1, dIter2> new_end;

    new_end = thrust::reduce_by_key(keys_input.begin(), 
                                    keys_input.end(), 
                                    values_input.begin(), 
                                    keys_output.begin(), 
                                    values_output.begin(), 
                                    BinaryPredicate(),
                                    thrust::plus<float>());

    int Nkeys = new_end.first - keys_output.begin();

    printf("\n\n");
    for (int i = 0; i < Nkeys; i++) printf("%i; %f\n", i, values_output[i]);

    printf("\n\n");
    for (int i = 0; i < Nkeys; i++) printf("%i %i\n", thrust::get<0>(keys_output[i]), thrust::get<1>(keys_output[i]));

    return 0;
} 
```

**编辑**

上述工作示例引用了`host_vector`'s. 下面是一个完整的示例，考虑到键和值向量是常规`cudaMalloc`'ed 数组的情况。

```
#include <thrust/device_vector.h>
#include <thrust/reduce.h>

#include "Utilities.cuh"

// --- Defining key tuple type
typedef thrust::tuple<int, int> Tuple;

typedef thrust::device_vector<Tuple>::iterator  dIter1;
typedef thrust::device_vector<float>::iterator  dIter2;

/************************************/
/* EQUALITY OPERATOR BETWEEN TUPLES */
/************************************/
struct BinaryPredicate
{
    __host__ __device__ bool operator ()
        (const Tuple& lhs, const Tuple& rhs)
    {
        return (thrust::get<0>(lhs) == thrust::get<0>(rhs)) && (thrust::get<1>(lhs) == thrust::get<1>(rhs));
    }
};

/********/
/* MAIN */
/********/
int main()
{
    const int N = 7;

    // --- Keys and input values on the host: allocation and definition
    int h_keys1_input[N] = { 1, 3, 3, 3, 2, 2, 1 };                                         // --- Input keys 1 - host side
    int h_keys2_input[N] = { 1, 5, 3, 8, 2, 2, 1 };                                         // --- Input keys 2 - host side
    float h_input_values[N] = { 9., 8., 7., 6., 5., 4., 3\. };                               // --- Input values - host side

    // --- Keys and input values on the device: allocation
    int *d_keys1_input;     gpuErrchk(cudaMalloc(&d_keys1_input, N * sizeof(int)));         // --- Input keys 1 - device side
    int *d_keys2_input;     gpuErrchk(cudaMalloc(&d_keys2_input, N * sizeof(int)));         // --- Input keys 2 - device side
    float *d_input_values;  gpuErrchk(cudaMalloc(&d_input_values, N * sizeof(float)));      // --- Input values - device side

    // --- Keys and input values: host -> device
    gpuErrchk(cudaMemcpy(d_keys1_input, h_keys1_input,   N * sizeof(int),   cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_keys2_input, h_keys2_input,   N * sizeof(int),   cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_input_values, h_input_values, N * sizeof(float), cudaMemcpyHostToDevice));

    // --- From raw pointers to device_ptr
    thrust::device_ptr<int> dev_ptr_keys1 = thrust::device_pointer_cast(d_keys1_input);
    thrust::device_ptr<int> dev_ptr_keys2 = thrust::device_pointer_cast(d_keys2_input);
    thrust::device_ptr<float> dev_ptr_values = thrust::device_pointer_cast(d_input_values);

    // --- Declare outputs
    thrust::device_vector<Tuple> d_keys_output(N);
    thrust::device_vector<float> d_values_output(N);

    thrust::pair<dIter1, dIter2> new_end;

    auto begin = thrust::make_zip_iterator(thrust::make_tuple(dev_ptr_keys1, dev_ptr_keys2));
    auto end   = thrust::make_zip_iterator(thrust::make_tuple(dev_ptr_keys1 + N, dev_ptr_keys2 + N));

    new_end = thrust::reduce_by_key(begin,
                                    end,
                                    dev_ptr_values,
                                    d_keys_output.begin(),
                                    d_values_output.begin(),
                                    BinaryPredicate(),
                                    thrust::plus<float>());

    int Nkeys = new_end.first - d_keys_output.begin();

    printf("\n\n");
    for (int i = 0; i < Nkeys; i++) {
        float output = d_values_output[i];
        printf("%i; %f\n", i, output);
    }

    thrust::host_vector<Tuple> h_keys_output(d_keys_output);
    printf("\n\n");
    for (int i = 0; i < Nkeys; i++) {
        int key1 = thrust::get<0>(h_keys_output[i]);
        int key2 = thrust::get<1>(h_keys_output[i]);
        printf("%i %i\n", key1, key2);
    }

    return 0;
} 
```

# r - 使用 grid.pattern 增加图案密度

> ID：10987974
> 
> 赞同：0
> 
> 时间：2012-06-11T21:44:48.777
> 
> 标签：r, graphics

提供的`grid.pattern`函数`gridExtra`将用对角线填充多边形。我想增加线条的密度，即出现在任何给定空间中的对角线的数量。有没有我可以传递的论点来`grid.pattern`控制线条的密度？

这是一个最小的例子：

```
library(gridExtra)
grid.pattern(pattern = 1) 
```

该代码绘制了一个由对角线覆盖的矩形。如何更改代码以使矩形包含（比如说）两倍的行？我已经阅读了函数文档并尝试将一些参数更改为`grid.pattern`，但没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T22:20:55.400

您可以使用`granularity`参数来设置对角线之间的距离：

```
library(gridExtra)
grid.pattern(pattern = 1, granularity = unit(2.5, "mm")) ## (Default is 5 mm) 
```

# windows-phone-7 - 如何在 windows phone 市场上更新 beta 测试应用程序

> ID：10987978
> 
> 赞同：4
> 
> 时间：2012-06-11T21:45:28.953
> 
> 标签：windows-phone-7

有什么方法可以更新我在 windows phone 市场上的 beta 测试应用程序吗？我试图提交相同的应用程序，但版本为 1.1，但网站说此名称的应用程序已经存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T23:38:51.420

不幸的是，您必须以不同的名称提交新版本。

[http://msdn.microsoft.com/en-us/library/hh334585%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh334585%28v=vs.92%29.aspx)

> 23.我可以在测试分发期间更新我的应用程序吗？
> 
> 不可以。您必须重新提交更新后的申请才能进入新的 beta 测试期

# javascript - iframe 加载误区？

> ID：10987982
> 
> 赞同：1
> 
> 时间：2012-06-11T21:45:52.300
> 
> 标签：javascript, jquery, html, iframe

我做了一个简单的**[测试](http://jsbin.com/adurew/2/edit)**

我有 10 个`<p>`元素。

在第一个元素之后我有一个脚本：它创建了 10 个`Iframes`，`SRc`并将它们附加到第一个

元素。

```
for (var i=0;i<10;i++)
     {
       var t=$("<iframe />").css({'width':'50px','height':'50px'}).attr('src','http://www.msdn.com');
        $("#hello").append(t);
      } 
```

奇怪，但我确实看到了其他 9 个`<p>` ，*在*整个 iframe 完全加载之前......

不应该在 Page 元素中添加新元素（iframe）应该阻止后续的 html 渲染吗？ *（另外，众所周知，javascript 是单线程的）*

![在此处输入图像描述](../Images/fad319a4d886c6dc0c038f78de6f174e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T21:47:35.987

不， *JavaScript*是单线程的，但这并不意味着浏览器不能同时启动多个 HTTP 请求。考虑到图像也通过并发 HTTP 请求加载。

`<iframe>`向文档添加一个HTTP 请求会*启动*一个 HTTP 请求，但是——*因为*JavaScript 是单线程的——代码不会等待该请求完成。

# regex - 尝试在 scala 中使用 jflap 正则表达式

> ID：10987983
> 
> 赞同：1
> 
> 时间：2012-06-11T21:45:55.397
> 
> 标签：regex, scala, jflap

请参阅以下 DFA [http://i.stack.imgur.com/iH3RM.png](http://i.stack.imgur.com/iH3RM.png)

通过 JFLAP 创建。当我转换为正则表达式时，JFLAP 给出：

```
 p+(q+pq)(pq)*(λ+p) 
```

当我将它粘贴到 Scala REPL 中时：

```
 scala> val regex = "p+(q+pq)(pq)*(+p)".r
  java.util.regex.PatternSyntaxException: Dangling meta character '+' near index 14
  p+(q+pq)(pq)*(+p)
                ^
      at java.util.regex.Pattern.error(Unknown Source) 
```

我有两个简单的问题。

1.  那是正确的正则表达式吗？为什么它包含一个 λ ？

2.  我如何在 Scala 中使用它，因为当我粘贴 repl 时 λ 没有正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:52:47.997

在正式的正则表达式中，符号`+`表示“或”。您要使用的正则表达式类似于：

```
p|(q|pq)(pq)*p? 
```

# iphone - iOS - 动态标签大小未正确返回

> ID：10987986
> 
> 赞同：1
> 
> 时间：2012-06-11T21:46:01.547
> 
> 标签：iphone, ios, uitableview, ios5

我花了几个小时试图解决这个问题，但没有成功。

我试图以根据数据动态调整高度的方式在 UITableViewCell 上显示数据。

现在，这些应用程序似乎可以很好地处理大量数据，但对于一些数据，标签无法正确调整。如您所见，已使用 constrainedToSize 功能，它返回给定文本的高度。

这个高度被错误地给出了很多次。例如。当标签文本为“高 - 脉冲白色，在下滑道 - 稳定白色，略低于下滑道稳定红色，低 - 脉冲红色”时。返回的高度是 63，它应该超过这个值。

另一个例子：“High - pulsing white, on course and on glidepath - stable white, off course but on glidepath - 脉冲白色和红色；低 - 脉冲红色”返回总标签高度为 84，当它应该大于标签根本不适合我的桌面视图。

我注意到的一件奇怪的事情是，不正常的单元格通常有 63 或 84 号......我没有遇到更多这样的尺寸，但如果这可以帮助......

编码：

```
if (tableView.tag ==1) {
    NSString *cellText;
    if ([multipleAddressSplit count]==0) {

        if (indexPath.row ==0) {

            cellText =[OptionText1 objectAtIndex:i];
        }
        if (indexPath.row == 1) {

            cellText =[OptionText2 objectAtIndex:i];

        }
        if (indexPath.row == 2) {

            cellText =[OptionText3 objectAtIndex:i];

        }
    }

    UIFont *cellFont = [UIFont fontWithName:@"Helvetica" size:17.0];
    CGSize constraintSize = CGSizeMake(OptionTable.frame.size.width , MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

    NSLog(@"========start=========");
    NSLog(@"Celltext is: %@",cellText);
    NSLog(@"Method Label %f",(labelSize.height));
    NSLog(@" 1/3rd %f",(OptionTable.frame.size.height/3-15));
    NSLog(@"=========stop========");

    if ((labelSize.height)<((OptionTable.frame.size.height/3)-15)) {
        NSLog(@" Returned 1/3rd is: %f",(OptionTable.frame.size.height/3));

        return (OptionTable.frame.size.height/3);
    }

    else {
        return labelSize.height + 15;

    } 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T17:47:53.443

解决这个问题非常简单和微不足道。

我将 LabelSize 的宽度设为单元格的宽度，而实际的 textLabel 距离每边大约 10 个像素。从高度减去 20 像素解决了这个问题。

谢谢大家的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T05:55:58.813

在委托方法中

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *strIden = [NSString stringWithFormat:@"cell%d",indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:strIden];
         if(cell==nil){
                cell = [[[UITableViewCell alloc]  initWithStyle:UITableViewCellStyleValue1

                reuseIdentifier:strIden] autorelease];
         }
} 
```

制作不同的单元格 ID。

# django - django登录失败页面

> ID：10987989
> 
> 赞同：0
> 
> 时间：2012-06-11T21:46:29.420
> 
> 标签：django, django-registration

我正在使用[django-registration](https://bitbucket.org/ubernostrum/django-registration/)并希望为登录失败提供不同的页面。初始登录屏幕是通过 jQuery 加载的，因此不需要扩展基本页面：

```
{% extends 'base.htm' %} 
```

但是“失败”页面确实需要扩展它。我不能“如果”扩展标签，因为它需要是页面上的第一个标签。

所以！我想加载一个不同的登录失败页面，但我没有最模糊的方法 - 我如何指定不同的登录失败页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:34:21.543

叹。

所以登录页面需要更改——我想我可以在子类中扩展和覆盖它——也许我会这样做，这样我就不会失去所有的逻辑！

是的，我将它剪切并粘贴到我自己的views.py文件中

好的，所以我所做的只是在 form.is_valid 检查后添加一个“else”，将变量（失败）设置为 true。

然后，在方法结束时，当我 render_to_response 时，我运行检查以查看 failed 是否为 True - 如果是，则仅渲染到不同的登录页面 (failedLogin.html) ~ 这个扩展 base.htm .

耶！

# jekyll - 在 Jekyll 中使用 MathJax

> ID：10987992
> 
> 赞同：76
> 
> 时间：2012-06-11T21:46:35.553
> 
> 标签：jekyll, mathjax

我有一个 Jekyll 博客，我想使用 MathJax，因为我希望能够输入类似

```
$$\sum_{n=1}^\infty 1/n^2 = \frac{\pi^2}{6}$$ 
```

在我的降价文件中，并使用 MathJax 生成正确的 LaTeX 表达式，其方式与在[math.stackexchange](https://gist.github.com/2912921)中的完成方式类似。

最简单的方法是什么？目前我的目录中有文件[jsmath.js](https://gist.github.com/2912921) (GitHub gist)，我想我可以`mathjs`在我的`_includes`目录中有一个简单的文件命名为

```
<script src="path/to/jsmath.js></script> 
```

并将其包含在每个帖子中

```
{% include mathjs %} 
```

但这似乎不起作用 - 当我运行`jekyll --server`页面时生成，但没有任何内容可见。

我会以正确的方式解决这个问题吗？有没有更好的方法将 MathJax 与 Jekyll 一起使用？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-19T01:37:53.900

当然，您可以将 mathjax 与 Jekyll 一起使用。要使其正常工作，请确保

1.  如果你用 markdown 写你的文章，你的 markdown 解释器不会敲击你的 mathjax 输入。我发现保护它的最好方法是始终将显示数学放在`<div>`元素中，将内联数学放在`<span>`元素中，大多数降价解释器都会不理会。
2.  javascript 行是否在 html 源代码中正确显示？我发现指向 mathjax CDN 比提供我自己的副本更容易、更快捷。尝试使用该行

    `<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>`

（这些配置选项允许您使用更多的 tex 表示法来启动您的数学环境，例如`\begin{equation}`等）。

`jsmath.js`也许您的脚本有问题；CDN 版本会更快，可能更可靠。（我在每个页面的页脚中都加载了 javascript，但是如果您不想在不需要的时候加载 javascript，那么使用 include 的策略当然是有意义的。）

如果您给我们一个指向您博客的链接，我们可以提供更多帮助吗？[您可以在我的博客上](http://www.carlboettiger.info/2012/06/13/Sethi-policy-functions.html)看到一些示例（如果有帮助，也可以在 github 上链接到 Jekyll 设置）。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-11-20T19:31:32.713

如果您对发布过程有足够的控制权（例如，您自己运行 Jekyll），一个[简单的解决方案](http://www.idryman.org/blog/2012/03/10/writing-math-equations-on-octopress/)是将 markdown 解析器切换到支持 TeX 的解析器。例如，使用[kramdown](http://kramdown.gettalong.org/)：

```
gem install kramdown 
```

`markdown`将行更改`_config.yml`为

```
markdown: kramdown 
```

并添加类似

```
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> 
```

到`_layouts/default.html`. 现在您可以简单地[用 标记您帖子中的任何数学`$$`](http://kramdown.gettalong.org/syntax.html#math-blocks)。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-21T16:46:55.640

如果您将`kramdown`其用作降价风格，那很容易。Kramdown 内置了对`mathjax`.

1.  `</head>`在默认布局中的标记之前添加它。

    ```
    <script type="text/javascript" async 
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?
    config=TeX-AMS-MML_HTMLorMML"></script> 
    ```

2.  `_config.yml`在行之后将其设置为 true `markdown: kramdown`。

    ```
    mathjax: true 
    ```

3.  完毕。用于渲染 Mathjax

    *   内联，使用`\( ... \)`，
    *   阻止，使用`\[ ... \]`。

        唯一需要注意的是使用 markdown 时反斜杠的转义，因此分隔符分别变为`\\( ... \\)`内`\\[ ... \\]`联和块数学。

4.  这是MathJax 内联渲染的*示例*`\\( 1/x^{2} \\)`，这里是块渲染： `\\[ \frac{1}{n^{2}} \\]`。

我在我的博客上使用它。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-26T09:02:48.563

不久前我写了一篇关于设置 MathJax 的博客文章：[Latex Math Magic](http://cwoebker.com/posts/latex-math-magic)

本质上，您必须阻止 Markdown与 MathJax**混淆。**

我最终使用了代码块，这对我来说很好。因此，在你写东西之前至少使用 4 个空格或使用锐角符号：```; 不幸的是，MathJax`<code>`默认跳过标签，因为它不想转换它不应该转换的代码。

因此，您必须在主布局文件的某处添加一些 javascript 代码：

```
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
}); 
```

此外，我们必须告诉 MathJax 忽略非乳胶代码块或普通代码块：

```
MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
}); 
```

在他看来，我们所有的乳胶代码块都将在其类名中包含 has-jax 字符串。因此，我们可以在我们的 CSS 表单中应用一些简单的样式来赋予它自己的样式。

```
code.has-jax {font: inherit; font-size: 100%; background: inherit; border: inherit;} 
```

可能不是最好的方法，但它在过去几年中对我的博客有用，而且我从未遇到任何进一步的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-01T01:17:33.043

你可以试试我的静态博客生成器：[Jekyde](https://github.com/zohooo/jekyde)。Jekyde 类似于 Jekyll，但它很好地处理了 Markdown 文件中的 LaTeX。您只需要将公式放入 $...$ 和 $$...$$ 中。Jekyde 还包含一个带有 LaTeX 预览的浏览器中的降价编辑器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-30T03:48:58.097

Jekyll 使用 kramdown 作为 2.0+ 的默认降价转换器。而且它不支持mathjax等，我认为下面的内容可以帮助你。

> jekyll-spaceship - 一个 Jekyll 插件，为 table、mathjax、plantuml、youtube、vimeo、dailymotion 等提供强大的支持。

[https://github.com/jeffreytse/jekyll-spaceship](https://github.com/jeffreytse/jekyll-spaceship)

将您的数学表达式放在 $...$ 内

```
$\LaTeX{}$ 
```

```
$\Pi$ 
```

```
$ a * b = c ^ b $ 
```

```
$ 2^{\frac{n-1}{3}} $ 
```

```
$ \int\_a^b f(x)\,dx. $ 
```

上面的代码将被解析为：

[![在此处输入图像描述](../Images/04ebdbae3562fbbce109c6d2d527acfb.png)](https://i.stack.imgur.com/RDHOV.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-26T07:52:21.943

## 在尝试以下任一选项之前的一些注意事项

*即使在大多数*情况下，选项`0`也会增加构建时间，`--incremental`而且实际上选项`1`可能会被使用，但是，如果您在客户端可能无法访问 CDN 的网络上进行部署，那么这以及占用的额外空间可能值得付出代价。

 *这两个选项都已在私有服务器上进行了测试，并在项目文件中设置`kramdown`了降价解释器；请参阅[Soham Bhattacharyya的回答](https://stackoverflow.com/a/46349188/2632107)[步骤](https://stackoverflow.com/a/46349188/2632107)及其前言，以及[Caramdir](https://stackoverflow.com/a/20105197/2632107)的前两个代码块，了解这些位的操作方法。`mathjax: true``_config.yml`[`2`](https://stackoverflow.com/a/46349188/2632107)

## 选项`0`下载并复制解压后的源码到`project-name`

1.  下载源

```
cd ~
mkdir -p git/hub && cd git/hub
git clone --depth 1 https://github.com/mathjax/MathJax.git 
```

2.  在您的项目中创建一个目录路径并将文件复制`MathJax/unpacked`到该路径

```
cd ~
mkdir -p git/lan/project-name/assets/JS_3rd_Party/MathJax
cp -r git/hub/MathJax/unpacked/* git/lan/project-name/assets/JS_3rd_Party/MathJax/ 
```

3.  将源添加到`git`跟踪

```
cd git/lan/project-name/
git add assets/JS_3rd_Party/MathJax
git commit -m 'Added MathJax.js unpacked source to git tracking' 
```

4.  编写包含文件

```
tee ./_includes/MathJax.html 1>/dev/null <<EOF
{%- if jekyll.environment == 'production' and site.mathjax == true -%}
  <script type="text/javascript" src="{{'/assets/javascripts/JS_3rd_Party/latest.js?config=TeX-AMS-MML_HTMLorMML' | relative_url}}"></script>
{%- elsif jekyll.environment != 'production' and site.mathjax == true -%}
  <script type="text/javascript" src="{{'/assets/javascripts/JS_3rd_Party/MathJax.js?config=TeX-AMS-MML_HTMLorMML' | relative_url}}"></script>
{%- endif -%}
EOF 
```

> 私有服务器构建将使用`MathJax.js`where 作为生产环境 (GitHub) 将使用`latest.js`上述 Liquid `if`... `elsif`...`endif`语句。

5.  写个帖子测试一下

```
tee ./_posts/$(date +'%Y-%d-%m')-math-tests.markdown 1>/dev/null <<EOF
---
layout: post
title:  "Math Tests"
date:   $(date +'%Y-%d-%m %H:%M:%S %z')
categories: math
---
{%- include MathJax.html -%}

<span>

for $x,y,z \in \{1, 2,\dots 9\}$
</span>

<span>

$$
\sum_{i=1}^n X_n
$$
</span>
EOF 
```

> 我没有尝试过没有`<span>`s 因为[cboettig](https://stackoverflow.com/a/11093303/2632107)的建议*似乎*完全可以解决问题。`span`此外， s 中的额外换行符**没有错误**，没有它们，渲染输出仍然存在问题。

6.  将这些最新文件添加到`git`跟踪

```
git add _posts/$(date +'%Y-%d-')math-tests.markdown
git add _includes/MathJax.html 
```

7.  在本地构建，或在远程服务器上推送和构建

```
bundle exec jekyll build --destination /tmp/www/project-name --config _config.yml --incremental 
```

* * *

## 仅用于使用 CDN（内容交付网络）的选项`1`复制`latest.js`

1.  见`Option 0`步骤`1.`

2.  为第三方 JavaScript 创建一个目录路径并复制`MathJax/unpacked/latest.js`到那里

```
cd ~
mkdir -p git/lan/project-name/assets/JS_3rd_Party/MathJax
cp git/hub/MathJax/unpacked/latest.js git/lan/project-name/assets/JS_3rd_Party/MathJax/ 
```

3.  编写包含文件

```
cd git/lan/project-name
tee ./_includes/MathJax.html 1>/dev/null <<EOF
<script type="text/javascript" src="{{'/assets/javascripts/JS_3rd_Party/latest.js?config=TeX-AMS-MML_HTMLorMML' | relative_url}}"></script>
EOF 
```

4.  见`Option 0`步骤`5.`

5.  将这三个文件添加到`git`跟踪中

```
git add _includes/MathJax.html
git add _posts/$(date +'%Y-%d-')math-tests.markdown
git add assets/JS_3rd_Party/MathJax
git commit -m 'Added `MathJax.html`, `latest.js`, and a test post to git tracking' 
```

6.  请参阅本地构建`Option 0`步骤`7.`

* * *

## 对于任何一个选项

如果部署在私有服务器上，您可能还需要`baseurl`在项目`_config.yml`文件中进行定义，尤其是在模拟`username.tld/project-name`GitHub 在您的私有服务器上使用的 URL 方案时。

如果同时部署到私有服务器和 GitHub，最好使用单独的配置文件并在构建问题时`--config _config.yml,_config_baseurl.yml`，例如...

```
# Write the special config file
tee ./_config_baseurl.yml 1>/dev/null <<EOF
baseurl: "project-name"
EOF

# Build with extra config
bundle exec jekyll build --destination /tmp/www/project-name --config _config.yml,_config_baseurl.yml --incremental 
```

希望这有助于通过包含加载资产。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-24T21:59:30.533

对我来说，将它添加到我的默认 _layout 或 head _include 作品中（结合前端的 _page 或 _post 变量）：

```
---
mathjax: yes
--- 
```

```
 <!-- mathjax -->
    {% if page.mathjax %}
        <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML">
            MathJax.Hub.Config({
                tex2jax: {
                    inlineMath: [["$", "$"], ["\\(", "\\)"]],
                    processEscapes: true
                }
            });
        </script>
    {% endif %} 
```

[工作示例](https://amaynez.github.io/neural-network-optimization-methods/#rmsprop)*

# jsf - JPA 和 JSF 数据表优化

> ID：10987994
> 
> 赞同：1
> 
> 时间：2012-06-11T21:46:49.747
> 
> 标签：jsf, optimization, jpa, datatable

我需要一次显示一个包含大约 1300 个角色的大表。（我知道我应该使用数据滚动，但我的用户希望一次查看整个表格。）该表格显示 4 列。其中两列来自对象，而另外两列来自原始对象中的引用对象。我需要找到最好/有效的方法来做到这一点。我目前有这个工作，但是当我重新加载表时，它会出现内存不足的错误。我认为这是由内存中大量冗余数据引起的。

1.  创建一个视图对象，存储库将只填写所需的字段。
2.  任何其他建议。

以下是对象：

```
 public class Database extends EntityObject {
      private Long id;
      private String name;
      private String connectionString;
      private String username; 
      private String password;
      private String description;

      // getter and setters omitted
    }

    public class Application extends EntityObject {
      private Long id;
      private String name;
      private String fullName = "";
      private String description;
      private Database database;
      private List<Role> roles = new ArrayList<Role>(0);

      // getter and setters omitted
    }

    public class Role extends EntityObject {
      private Long id;
      private String name;
      private String nameOnDatabase;
      private Application application;

      // getter and setters omitted
    } 
```

我需要从角色列表中显示的是：

角色 ID、角色名称、角色应用程序名称、角色应用程序数据库名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:31:34.773

要明智地优化，请定义您将如何处理数据、查看或/和编辑。以下是一些**常见的场景**：

1.  ~~[使用惰性获取类型进行检索](http://www.objectdb.com/java/jpa/persistence/retrieve#Retrieval_by_Eager_Fetch_)。使用 FetchType.LAZY 注释标记您在应用程序中的角色。~~

2.  [使用多选查询检索](http://www.objectdb.com/java/jpa/query/jpql/select#Multiple_SELECT_Expressions_)。创建您的自定义类（如 DTO）并使用多选查询从数据库中填充数据。（类似于 VIEW 映射为实体）

还有**其他可能性**，例如[Shared (L2) Entity Cache](http://www.objectdb.com/java/jpa/persistence/cache)或[Retrieval by Refresh](http://www.objectdb.com/java/jpa/persistence/retrieve#Retrieval_by_Refresh_)。

**看看您是否正确使用 EntityManager**读取[我是否应该经常调用 EntityManager.clear() 以避免内存泄漏？](https://stackoverflow.com/questions/2243554/am-i-supposed-to-call-entitymanager-clear-often-to-avoid-memory-leaks).