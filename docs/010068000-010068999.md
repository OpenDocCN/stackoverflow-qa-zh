# StackOverflow 问答 10068000-10068999

# c - 在 C 中包含头文件时，是否会自动包含同名的 .c 文件？

> ID：10068002
> 
> 赞同：7
> 
> 时间：2012-04-09T01:28:55.607
> 
> 标签：c, header

我在网上和我的教科书里都看过，这让我很困惑。

假设您在 stack.c 中有一些用于堆栈的函数，并将它们的原型放在 stack.h 中。例如，您的主程序 test.c`#include "stack.h"`位于顶部。这就是所有示例的显示方式。

所以它包含了原型，但是它是如何得到它们的实现的呢？头文件似乎不需要您`#include stack.c`使用它们。它只是搜索同一文件夹中的所有 .c 文件并尝试找到它们吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T01:30:30.190

不; 它只包括标题。

您单独编译源代码，并将其与使用它的代码链接。

例如（玩具代码）：

### 堆栈.h

```
extern int pop(void);
extern void push(int value); 
```

### 堆栈.c

```
#include "stack.h"
#include <stdio.h>
#include <stdlib.h>

enum { MAX_STACK = 20 };
static int stack[MAX_STACK];
static int stkptr = 0;

static void err_exit(const char *str)
{
     fprintf(stderr, "%s\n", str);
     exit(1);
}

int pop(void)
{
    if (stkptr > 0)
        return stack[--stkptr];
    else
        err_exit("Pop on empty stack");
}

int push(int value)
{
    if (stkptr < MAX_STACK)
        stack[stkptr++] = value;
    else
        err_exit("Stack overflow");
} 
```

### 测试.c

```
#include <stdio.h>
#include "stack.h"

int main(void)
{
    for (int i = 0; i < 10; i++)
        push(i * 10);

    for (int i = 0; i < 10; i++)
        printf("Popped %d\n", pop());
    return(0);
} 
```

### 汇编

```
c99 -c stack.c
c99 -c test.c
c99 -o test_stack test.o stack.o 
```

或者：

```
c99 -o test_stack test.c stack.c 
```

因此，您编译源文件（可选地生成目标文件）并链接它们。通常，该`stack.o`文件将被放入一个库（标准 C 库除外）中，并且您将与该库链接。当然，标准 C 库函数也会发生这种情况。C 编译器会自动将 C 库（通常`-lc`）添加到链接命令中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T01:31:26.430

仅需要标头才能获取原型。实现是单独编译的，并由[*链接器*](http://en.wikipedia.org/wiki/Linker_%28computing%29)组装成完成的库或可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T01:31:29.827

头文件 ( `*.h`) 只是为了支持编译器。通过链接器将各个源文件包含在一起。任何基本的 C 开发教科书都应该涵盖这一点，但是有一个不错的“教程”：

[http://www.tenouk.com/ModuleW.html](http://www.tenouk.com/ModuleW.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T01:31:42.110

**您**必须编译 test.c，生成 test.o，编译 stack.c 生成 stack.o，并在某个阶段链接 .o 文件以生成完整的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T01:47:31.710

不，您应该编译和链接 .c 文件。

# javascript - 谷歌浏览器扩展示例

> ID：10068009
> 
> 赞同：0
> 
> 时间：2012-04-09T01:30:25.693
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我已经阅读了一些文档，我已经搜索了示例概念，但我仍在努力想出在 dom 级别上工作的东西。我希望我的背景页面显示一个我希望能够使用页面上的 dom 元素执行操作的菜单。目前只是根据点击附加一个新元素。

我正在尝试使用我自己的自定义 js 加载 jQuery。我不知道这是否是我尝试编写清单的方式，我不知道具体发生了什么或在哪里发生，而且我无法让萤火虫报告它，所以我觉得我在黑暗不知道如何调试我的问题并试图找出我做错了什么。

所以我在这里希望有人可以向我展示这些东西的一个非常核心的例子，这样我就可以实际工作了。另外，如果有人知道我如何调试，我也很高兴知道这一点..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:19:55.827

好的，

1.  除了脚本和与脚本本身相关的元素之外，您不应该在[后台页面](http://code.google.com/chrome/extensions/background_pages.html)中放置任何内容，因为它应该对用户隐藏。
2.  如果您想将 jQuery 加载到扩展程序的任何页面中，您可以像通常在网页中那样进行操作。
    `<script type="text/javascript" src="jquery.js"></script>`
3.  对于调试，您可以按`Ctrl`++打开*开发者工具*`Shift`（在任何扩展程序的页面上），或单击扩展程序页面上的“background.html”（chrome://extensions）。`I`
**   如果您想控制网页上的 DOM，您可以使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)。*   有关更多扩展示例，请访问[http://code.google.com/chrome/extensions/samples.html](http://code.google.com/chrome/extensions/samples.html)（很多很酷的东西！）*

 *![在此处输入图像描述](../Images/10ed27a022d70ab5b8f20254741fd707.png)

> 点击链接打开开发者工具。（它就像 Firebug。对你来说一个有趣的事实是，它是由 Apple 开发的，而不是 Google。D :)

希望这可以帮助您并回答您所有的问题！*

# java - 用Java制作多个文件

> ID：10068016
> 
> 赞同：2
> 
> 时间：2012-04-09T01:31:13.980
> 
> 标签：java, file

我无法使用 Java 制作多个文件。我希望它制作 n 个相同的文件，这些文件将放置在定义的目录中。出于某种原因，现在它会创建一个文件，然后继续使用第一个文件的名称创建新文件，这基本上会刷新文件。我认为它可能会发生，因为它没有更新我的全局名称变量。到目前为止，这是我的代码：

```
import java.io.*;

public class Filemaker{
    //defining our global variables here

    static String dir = "/Users/name/Desktop/foldername/"; //the directory we will place the file in
    static String ext = ".txt"; //defining our extension type here
    static int i = 1; //our name variable (we start with 1 so our first file name wont be '0')
    static String s1 = "" + i; //converting our name variable type from an integer to a string 
    static String finName = dir + s1 + ext; //making our full filename
    static String content = "Hello World";

    public static void create(){  //Actually creates the files 

        try {
            BufferedWriter out = new BufferedWriter(new FileWriter(finName)); //tell it what to call the file
            out.write(content); //our file's content 
            out.close();

            System.out.println("File Made."); //just to reassure us that what we wanted, happened
        } catch (IOException e) {
            System.out.println("Didn't work");
        }
    }

    public static void main(String[] args){

        int x = 0;

        while(x <= 10){ //this will make 11 files in numerical order
            i++; 
            Filemaker.create();
            x++;
        }
    }
} 
```

看看你是否能在我的代码中找到任何会导致这种情况发生的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T01:36:11.933

你设置`finName`一次，当它被初始化时。相反，您应该在您的`create()`函数中更新它。例如：

```
public static void create(){  //Actually creates the files 
    String finName = dir + i + ext; 
    try {
        BufferedWriter out = new BufferedWriter(new FileWriter(finName)); //tell it what to call the file
        out.write(content); //our file's content 
        out.close();

        System.out.println("File Made."); //just to reassure us that what we wanted, happened
    } catch (IOException e) {

        System.out.println("Didn't work");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T01:38:29.860

首先，您在`i`变量的静态定义中使用`s1`变量。这对我来说看起来很奇怪，让我觉得你期望它被一次又一次地重新定义。

相反，请在`create()`函数内重新定义 s1 变量，使其实际递增。

此外，将来在解决此类问题时，您可以使用`System.out.println()`语句将输出打印到控制台以跟踪程序的执行情况。对于更高级的需求，请使用日志记录解决方案或 IDE 的调试器来跟踪程序执行并插入断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T01:38:53.303

字符串是不可变的，因此`finName`在第一次初始化后永远不会改变。

在您的创建方法中，您必须重新创建文件路径。

# javascript - 在父 div 上使用 stopPropagation 时如何使链接正常工作

> ID：10068017
> 
> 赞同：0
> 
> 时间：2012-04-09T01:31:14.523
> 
> 标签：javascript, ruby-on-rails, stoppropagation

我有一个模态弹出窗口，里面有几个链接，里面有 :confirm 和 :method => :delete 选项。问题是我使用 stopPropagation 来防止当用户在 div 内容区域内单击时关闭模式。

```
event.stopPropagation(); 
```

但是，这会禁用 Rails 用于具有 :remote => true 或 :confirm 或 :method 的链接的任何 javascript。

有谁知道这个问题的解决方法？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T01:36:11.217

您可以从链接的 href 属性中获取 url 并将其设置为窗口的 location href 属性......它看起来像这样：

```
var linkUrl = document.querySelector("a#IdOfTheLinkYouWant").href;
window.location.href = linkUrl; 
```

# ruby - 哈希或其他对象的内存大小？

> ID：10068018
> 
> 赞同：40
> 
> 时间：2012-04-09T01:31:15.663
> 
> 标签：ruby

在 Ruby 1.9.3 中以字节为单位获取给定哈希（或任何对象）大小的最佳方法是什么？

“[查找特定哈希在 Ruby 中使用的字节数](https://stackoverflow.com/questions/3687073/find-number-of-bytes-a-particular-hash-is-using-in-ruby)”的解决方案在 1.9.3 中似乎无效，因为`memsize_of`它不在[ObjectSpace](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html)的文档中。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-01-23T21:39:11.917

[`ObjectSpace.memsize_of`](https://ruby-doc.org/stdlib-2.6.4/libdoc/objspace/rdoc/ObjectSpace.html#method-c-memsize_of) [确实](http://ideone.com/DhEMnt)在 1.9.3 中工作，记录与否：

```
puts RUBY_VERSION #=>1.9.3

require 'objspace'

p ObjectSpace.memsize_of("a"*23)    #=> 23 
p ObjectSpace.memsize_of("a"*24)    #=> 24 
p ObjectSpace.memsize_of("a".*1000) #=> 1000
h = {"a"=>1, "b"=>2}
p ObjectSpace.memsize_of(h)         #=> 116 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-04T09:32:59.313

我曾经遇到过同样的问题。您必须知道，实际大小几乎无法确定，因为它取决于您使用的虚拟机、虚拟机的版本等。此外，如果您正在引用一个字符串，该字符串也在其他地方被引用，那么取消设置您的哈希并不意味着特定包含的字符串也将被取消设置，因为它已经在其他地方引用。

我曾经写过一个分析器，通过遍历给定对象中所有包含的对象来计算对象的估计大小。获得灵感来编写自己的：

[https://github.com/kaspernj/knjrbfw/blob/master/lib/knj/memory_analyzer.rb#L334](https://github.com/kaspernj/knjrbfw/blob/master/lib/knj/memory_analyzer.rb#L334)

我的工作是这样的：

```
require "rubygems"
require "knjrbfw"

analyzer = Knj::Memory_analyzer::Object_size_counter.new(my_hash_object)

puts "Size: #{analyzer.calculate_size}" 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2019-11-11T06:49:19.457

**粗略估计**散列大小的另一种方法是将其转换为字符串并计算字符数，每个字符将是一个字节。

```
hash = {hello:  "world"}
=> {:hello=>"world"}
hash.to_s
=> "{:hello=>\"world\"}"
hash.to_s.size
=> 17 
```

然后您可以使用[字符到字节/兆字节计算器](http://extraconversion.com/data-storage/characters/characters-to-megabytes.html)

# c# - 检查文件是否存在错误

> ID：10068027
> 
> 赞同：1
> 
> 时间：2012-04-09T01:32:22.653
> 
> 标签：c#, .net

所以我在另一个问题中看到了一个答案，说这应该有效：

```
using System.IO;
if (File.Exists(Path))
{
    Action();
} 
```

但是，当我这样做时，会出现以下错误：

```
'System.IO' is a 'namespace', which is not valid in the given context

The Name 'File' does not exist in the current context 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T01:35:06.380

您需要将`using System.IO;`文件放在课堂外的顶部。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T01:40:27.167

`using System.IO;`在文件顶部添加

**或者**

像使用它一样

```
if (System.IO.File.Exists(Path))
{
  //do whatever
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T01:58:25.763

很难说出你到底在做什么，但看起来你可能需要一些帮助来确定你的陈述顺序。 `using`语句出现在 .cs 文件的开头，您的逻辑需要出现在类中的方法中。

以下是使用控制台应用程序的方法：

```
using System.IO;

public class Program
{
    public static void Main(string[] args)
    {
        string path = @"c:\temp\file.txt";

        if (File.Exists(path))
        {
            Action();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-09T01:36:01.043

在文件的最顶部：

```
using System.IO; <--

namespace Application1
{ 
```

# python - 快速启动后遇到 hadoop 问题

> ID：10068029
> 
> 赞同：2
> 
> 时间：2012-04-09T01:32:29.207
> 
> 标签：python, apache, hadoop, streaming, mapreduce

我收到一个错误，我认为这与我设置目录的方式有关：

运行后：

hadoop-0.20.205.0/bin/hadoop jar hadoop-0.20.205.0/contrib/streaming/hadoop-streaming-*.jar -file mapper.py -mapper mapper.py -file reducer.py -reducer reducer.py -input cs4501input -输出 py_wc_out

我得到： packageJobJar: [mapper.py, reducer.py, /tmp/hadoop-ubuntu/hadoop-unjar6120166906857088018/] [] /tmp/streamjob1341652915014758694.jar tmpDir=null

12/04/08 01:34:01 INFO mapred.JobClient: 清理暂存区 hdfs://localhost:9000/tmp/hadoop-ubuntu/mapred/staging/ubuntu/.staging/job_201204080100_0004

12/04/08 01:34:01 ERROR streaming.StreamJob：启动作业时出错，输出路径已存在：输出目录 hdfs://localhost:9000/user/ubuntu/py_wc_out 已存在 流式作业失败！

我认为这与我使用 hdfs 指定 core-site.xml 文件有关，但那是在快速入门指南中。我不明白为什么我需要在带有端口号的 localhost 地址旁边指定 hdfs。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T01:36:46.287

问题是您试图在不清理输出目录的情况下运行相同的作业。先删除输出目录，然后重新运行。您必须在每项工作之间执行此操作。Hadoop 失败，而不是让您覆盖目录。

```
hadoop fs -rmr /user/ubuntu/py_wc_out 
```

就个人而言，我喜欢解决这个“问题”的方法是动态地将时间戳附加到输出目录。这样它就永远是独一无二的，你不必摆脱以前的运行。

```
hadoop-0.20.205.0/bin/hadoop jar ... -output py_wc_out-`date +%s` 
```

# google-chrome - 我在 Chrome 的“脚本”选项卡中看不到我的脚本

> ID：10068030
> 
> 赞同：0
> 
> 时间：2012-04-09T01:32:46.227
> 
> 标签：google-chrome, inspect

当我检查我的扩展程序页面时，我在 Chrome 的“脚本”选项卡中看不到我的脚本。我的脚本只是一个 hello world，我什至创建了一个 .js 文件并将其包含在 src 属性中，但它仍然没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-11T15:18:21.957

万一其他人遇到同样的问题，我使用 IP 或域名而不是 localhost “修复它”，问题是由安全策略引起的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T01:36:48.157

检查你的js文件的路径。也许chrome找不到文件。

# postgresql - POSTGRESQL外键引用两个不同表的主键

> ID：10068033
> 
> 赞同：43
> 
> 时间：2012-04-09T01:32:53.513
> 
> 标签：postgresql, foreign-keys

我有两个表 Books 和 Audiobooks，它们都以 ISBN 作为主键。我有一个 writeby 表，该表具有一个`isbn`对书籍和有声读物 ISBN 具有外键约束的属性。

当我插入时出现的问题`writtenby`是 postgresql 希望我插入的 ISBN`writtenby`同时出现在书籍和有声读物中。

`writtenby`有一个表来存储作者和他们写的书籍/有声读物对我来说很有意义，但是这并不能转换为 postgresql 中的表。

我正在考虑实施的替代解决方案是建立两个新关系`audiobook_writtenby`，`books_writtenby`但我不确定这是一个好的替代方案。

您能否告诉我如何实现我最初的想法，即让一个表`writtenby`引用两个不同的表，或者如何更好地设计我的数据库？如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-04-09T18:29:24.833

在 PostgreSQL 中有不止一种方法可以做到这一点。就个人而言，我更喜欢这种方式。

```
-- This table should contain all the columns common to both 
-- audio books and printed books.
create table books (
  isbn char(13) primary key,
  title varchar(100) not null,
  book_type char(1) not null default 'p'
    check(book_type in ('a', 'p')),
  -- This unique constraint lets the tables books_printed and books_audio 
  -- target the isbn *and* the type in a foreign key constraint.
  -- This prevents you from having an audio book in this table 
  -- linked to a printed book in another table.
  unique (isbn, book_type)
);

-- Columns unique to printed books.
create table books_printed (
  isbn char(13) primary key references books (isbn),
  -- Allows only one value. This plus the FK constraint below guarantee
  -- that this row will relate to a printed book row, not an audio book
  -- row, in the table books. The table "books_audio" is similar.
  book_type char(1) default 'p'
    check (book_type = 'p'),
  foreign key (isbn, book_type) references books (isbn, book_type),
  other_columns_for_printed_books char(1) default '?'
);

-- Columns unique to audio books.
create table books_audio (
  isbn char(13) primary key references books (isbn),
  book_type char(1) default 'a'
    check (book_type = 'a'),
  foreign key (isbn, book_type) references books (isbn, book_type),
  other_columns_for_audio_books char(1) default '?'
);

-- Authors are common to both audio and printed books, so the isbn here
-- references the table of books.
create table book_authors (
  isbn char(13) not null references books (isbn),
  author_id integer not null references authors (author_id), -- not shown
  primary key (isbn, author_id)
); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T03:04:35.803

您可以使用表继承来获得两全其美的效果。`INHERITS`使用引用 writeby 表的子句创建 audiobook_writtenby 和 books_writtenby 。正如您所描述的，外键可以在子级别定义，但您仍然可以在更高级别引用数据。（您也可以使用视图执行此操作，但听起来在这种情况下继承可能更清晰。）

请参阅文档：

[http://www.postgresql.org/docs/current/interactive/sql-createtable.html](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)

[http://www.postgresql.org/docs/current/interactive/tutorial-inheritance.html](http://www.postgresql.org/docs/current/interactive/tutorial-inheritance.html)

[http://www.postgresql.org/docs/current/interactive/ddl-inherit.html](http://www.postgresql.org/docs/current/interactive/ddl-inherit.html)

请注意，如果您这样做，您可能希望在 writeby 表上添加一个 BEFORE INSERT 触发器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-09T01:48:33.503

RDBMS 不支持多态外键约束。您想要做的事情是合理的，但不是关系模型很好地适应的事情，也是制作 ORM 系统时对象关系阻抗不匹配的真正问题之一。[在 Ward 的 WIki 上对此进行了很好的讨论](http://c2.com/cgi/wiki?ForeignKeysCanOnlyReferenceOneTable)

解决问题的一种方法可能是创建一个单独的表 known_isbns，并在书籍和有声书上设置约束和/或触发器，以便该表包含两种特定类型书籍表的所有有效 isbns。然后您对 writeby 的 FK 约束将检查 known_isbns。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-10T13:19:16.597

在这个特定示例中，绝对不需要使用多个表。只需使用表“Book”并添加“AudioBook”中的列（如果适用）。如果您必须在表级别上区分非常具体的列，请创建视图。您是否检查过内容相同的“书籍”和“有声读物”是否具有相同的 ISBN？

# ios - 在 NSString 上使用 unicode 字符

> ID：10068043
> 
> 赞同：0
> 
> 时间：2012-04-09T01:35:40.233
> 
> 标签：ios, nsstring, nsstringencoding

我在使用带有 'ç' 和 'ñ' 等 unicode 字符的 NSString 时遇到问题。一个像这样简单的例子：

```
NSString *alphabet = @"abçd";
NSLog(@"alphabet is %@", alphabet); 
```

在控制台上输出：

> 字母表是ab√ßd

如何确保 NSString 正在处理这些 un​​icode 字符？我通过在线搜索和 NSString 类参考尝试了几种不同的方法，但似乎都没有。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T01:42:27.113

您可以确保 NSString 通过输出到文件并从中读取来正确处理它们...

我会以 100% 的把握猜测问题不在于 NSString 而是控制台预期的文本编码，或者源文件的文本编码......可能是前者。

在 Xcode 的调试器中，我得到了预期的输出：

```
alphabet is abçd 
```

你的测试：

```
NSString *alphabet = @"abçd";       
[alphabet writeToFile:[@"~/Desktop/charTest.txt" stringByExpandingTildeInPath] atomically:NO encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T01:48:08.333

您可以尝试使用 UTF-8 编码初始化 NSString

```
NSString* newStr = [[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding]; 
```

代码取自另一个答案——[将 UTF-8 编码的 NSData 转换为 NSString](https://stackoverflow.com/questions/2467844/convert-utf-8-encoded-nsdata-to-nsstring#answer-2467856)

# scala - 如何使用 scala 模板中的 html 助手“选项”填充下拉列表（播放 2.0）

> ID：10068054
> 
> 赞同：4
> 
> 时间：2012-04-09T01:37:45.537
> 
> 标签：scala, playframework-2.0

我真的是 Scala 的初学者，如果我在这里很愚蠢，请原谅我！

我正在使用 play2.0/Scala 进行作业。

我想用不同的值（这里的timesheetId）和标签（2个日期值的连接）填充一个下拉列表。所以我做了这个。

```
@select(effortForm("timesheetId"),options(timesheets.map(aTimesheet=> aTimesheet.timesheetId.toString -> (aTimesheet.fromDate + " to " + aTimesheet.toDate))),'_label->"Choose Timesheet (*)") 
```

但是该页面有一个下拉列表，其中填充了相同的值（作为元组）和选择下的选项标签。

重载的方法值 [apply] 不能应用于 (List[(java.lang.String, java.lang.String)])

我想看到这个结果

```
<option value="1">Sun Apr 08 18:23:32 PDT 2012 to Sun Apr 08 18:23:32 PDT 2012</option> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-09T05:55:37.297

试试这个：

```
@select(
  effortForm("timesheetId"),
  timesheets.map{ t =>
    t.timesheetId.toString -> (t.fromDate + " to " + t.toDate)
  },
  '_label- > "Choose Timesheet (*)"
) 
```

查看[select](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/select.scala.html#L13)的实现，看起来第二个参数应该是`Seq[(String, String)]`您的`timesheets.map{ }`.

[`options(...)`](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/views/helper/Helpers.scala#L70)提供了构造的便捷方法，`Seq[(String, String)]`并且没有适用于此的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:50:11.760

在您的 play 安装附带的 samples/java 安装目录中有一个很好的示例。见“表格”。注册 - > 国家

# php - PHP Apple Push Notifications 反馈服务

> ID：10068057
> 
> 赞同：4
> 
> 时间：2012-04-09T01:37:49.423
> 
> 标签：php, ios, push-notification, apple-push-notifications

我想知道当您从苹果的推送反馈服务中获取令牌列表时，这些令牌是否仅针对发出呼叫的应用程序（使用该应用程序的 pem 证书），或者苹果是否会将您所有应用程序的令牌发回同一个账号下有app id吗？

我问的原因是我有一个脚本可以检查反馈服务，以便它可以在发送推送之前删除令牌。我复制了脚本并将其设置在我的新应用程序的新子目录中，并更改了所有适当的数据库信息并为这个新应用程序创建了新的 pem 文件。

由于这是一个新应用程序，数据库中只有一个令牌，我还没有发送任何推送，但是当我运行脚本时，反馈服务报告了 1200 个需要删除的令牌。由于我没有预料到这一点，我只检查了从数据库中为这个应用程序删除这些令牌，而不是从其他应用程序中删除。

我很困惑，因为 Apple 开发人员页面上写着“为此，Apple 推送通知服务包括一项反馈服务，该服务 APNs 不断更新**每个应用程序**的设备列表，其中列出了失败的交付尝试”，这让我相信我应该仅在每个应用程序的基础上获取令牌，而不是所有应用程序。

任何人都可以确认或否认反馈服务如何与多个应用程序一起工作，这样我就可以找出我的问题出在哪里（如果我有一个）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:01:13.660

我找到了一些关于此的信息：

> **APNS 反馈服务器仅返回自您上次反馈请求以来已“过期”的设备令牌。**

[来源](https://stackoverflow.com/questions/1278834/php-technique-to-query-the-apns-feedback-server)

这意味着如果你发送到你的几个应用程序，然后在 X 次推送到苹果之后，调用 feedback() 然后 feedback() 将有来自你所有应用程序的非活动令牌。

我目前的解决方案是在每次推送到苹果后调用反馈。*现在已经足够好了 ©*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T23:27:49.613

好吧，在向 Apple 发送电子邮件并等待大约 2 周后，我终于得到了他们的以下回复：

**连接到反馈服务使用您用于连接到 APNs 网关的相同 TLS/SSL 身份（证书和私钥）。APNs 通过证书的 UserID 属性标识您希望与哪个应用程序通信。**

**因此，正如您必须为每个应用程序建立与 APN 的单独连接以发送通知一样，您必须对反馈服务执行相同的操作。**

因此，您为每个应用程序与反馈服务建立了单独的连接。

# mysql - MYSQL IN 子句只返回第一个值组合的结果

> ID：10068059
> 
> 赞同：2
> 
> 时间：2012-04-09T01:37:57.223
> 
> 标签：mysql, clause

我以前使用过这个查询：

```
SELECT * 
FROM stone_list 
WHERE type IN ('ALEXANDRITE','AMETHYST') 
   AND shape IN ('OVAL') ORDER BY type, shape 
```

过去它对我有用，只是这次它做了一些非常奇怪的事情。当我只有一个 shape 值时`IN`，查询只返回 type is`ALEXANDRITE`和 shape is 的结果`OVAL`，即使也有行`type = AMETHYST and shape = OVAL`。

现在，当我添加第二个形状时，例如`shape IN ('OVAL','ROUND')`，它将返回两个`type = ALEXANDRITE and type = AMETHYST`和 for 的值`shape = OVAL and shape = ROUND`（因此，它按预期工作）。

真的胜过我。

有任何想法的人吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T01:55:14.527

查询没有任何问题，因此我只能假设您在问题中忽略或遗漏了某些内容。

```
mysql> select * from stone_list;
+----+-------------+--------+
| id | type        | shape  |
+----+-------------+--------+
|  1 | ALEXANDRITE | OVAL   |
|  2 | ALEXANDRITE | ROUND  |
|  3 | BASILIC     | OVAL   |
|  4 | AMETHYST    | SQUARE |
|  5 | AMETHYST    | ROUND  |
|  6 | AMETHYST    | OVAL   |
+----+-------------+--------+
6 rows in set (0.00 sec)

mysql> SELECT * FROM stone_list WHERE type IN ('ALEXANDRITE','AMETHYST') AND shape IN ('OVAL') ORDER BY type, shape
    -> ;
+----+-------------+-------+
| id | type        | shape |
+----+-------------+-------+
|  1 | ALEXANDRITE | OVAL  |
|  6 | AMETHYST    | OVAL  |
+----+-------------+-------+
2 rows in set (0.00 sec)

mysql> describe stone_list;
+-------+------------------+------+-----+---------+----------------+
| Field | Type             | Null | Key | Default | Extra          |
+-------+------------------+------+-----+---------+----------------+
| id    | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| type  | varchar(50)      | YES  |     | NULL    |                |
| shape | varchar(50)      | YES  |     | NULL    |                |
+-------+------------------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

# jquery - jQuery自动完成多值插件中的minLength

> ID：10068061
> 
> 赞同：3
> 
> 时间：2012-04-09T01:38:23.593
> 
> 标签：jquery, jquery-autocomplete

我正在使用 jquery 自动完成插件。配置为使用多个值。

我设置选项 **minLength : 2**

minLength 选项仅适用于第一个自动建议的单词，对于多个值它不起作用。

我如何配置或需要覆盖哪种方法来解决此问题。

[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T01:47:49.040

jQuery UI 网站上的多个远程演示演示了这种行为。您只需要添加一个自定义搜索功能：

```
$('#autocomplete').autocomplete({
    search: function() {
        // custom minLength
        var term = extractLast( this.value );
        if ( term.length < 2 ) {
            return false;
        }
    }
}); 
```

请参阅：http: [//jqueryui.com/demos/autocomplete/#multiple-remote](http://jqueryui.com/demos/autocomplete/#multiple-remote)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T19:58:49.773

我发现 Christian 2012 年的版本非常有用，但这里有一个在 2016 年可以使用的重新设计的版本（jQuery UI 1.12.0）：

```
function split(val) {
  return val.split(/\s+/);
}

function extractLast(term) {
  return split(term).pop();
}

source: function(request, response) {
  // delegate back to autocomplete, but extract the last term
  const term = extractLast(request.term)
  if (term.length < this.options.minLength) {
    return false;
  }
  response($.ui.autocomplete.filter(
    data, term));
} 
```

该`minLength`选项只需像往常一样提供，然后将在`source`函数内部使用。如果需要更多上下文，请参阅演示。

[演示](http://codepen.io/eirikbirkeland/pen/BLNbzV)

# .htaccess - 301 将子页面重定向到 .htaccess 中的父页面

> ID：10068063
> 
> 赞同：0
> 
> 时间：2012-04-09T01:38:46.550
> 
> 标签：.htaccess

我的网站页面有子页面，这些子页面有自己的子页面。

```
http://mysite.com/rookie/1/
   http://mysite.com/rookie/1/1/
   http://mysite.com/rookie/1/2/
   http://mysite.com/rookie/1/3/
   http://mysite.com/rookie/1/4/
   http://mysite.com/rookie/1/5/ 
```

是否可以使用 .htaccess 将子页面或孙页面的子页面重定向到各自的父页面？

在上面的示例中，我想重定向以下 URL

```
http://mysite.com/rookie/1/1/
http://mysite.com/rookie/1/2/
http://mysite.com/rookie/1/3/
http://mysite.com/rookie/1/4/
http://mysite.com/rookie/1/5/ 
```

至`http://mysite.com/rookie/1/`

提前致谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T02:08:54.180

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !(.*)1
RewriteRule ^(.*)$ 1/$1 [L] 
```

# java - 使用 Apache POI 库将工作表适配到 xlsx 文件中的单个页面时出现问题

> ID：10068074
> 
> 赞同：9
> 
> 时间：2012-04-09T01:40:55.623
> 
> 标签：java, printing, apache-poi, xlsx

我正在尝试使用适用于 Java 的 Apache POI 库创建一些 xlsx 文件，并且创建文件的一切工作正常。

当我想使用物理打印机打印这些文件时，问题就来了。我想让我的工作簿中的每张纸都适合单页。我查看了文档，下面的代码应该可以工作：

```
 XSSFWorkbook wb = new XSSFWorkbook();
       XSSFSheet sheet = wb.createSheet("format sheet");

       PrintSetup ps = sheet.getPrintSetup();

       sheet.setAutobreaks(true);

       ps.setFitHeight((short)1);
       ps.setFitWidth((short)1);

       for(int i = 0; i < 100; ++i){
            sheet.createRow(i);
            sheet.getRow(i).createCell(0).setCellValue("Test " + i);
        }

       FileOutputStream output = new FileOutputStream("Test.xlsx");
       wb.write(output);
       output.close(); 
```

但它没有......当我尝试打印它时，它会打印到三张纸上（如果我不使用 PrintSetup 部分，它实际上应该打印的内容）。所以代码根本不做任何事情。

谁能告诉我该代码有什么问题？

另外，我还有一个关于打印 xlsx 文件的问题：我想知道是否有一种方法可以从我的 Java 程序中打印 xlsx 文件，而无需实际打开文件并单击打印？像*wb.printAllSheetsInWorkbook();* 或类似的东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T18:30:26.297

后

```
ps.setFitHeight((short)1);
ps.setFitWidth((short)1); 
```

采用

```
sheet.setFitToPage(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T12:51:31.227

不适用于 poi-3.8 和使用 xls 格式的 office 2013

如果我从 poi 创建工作表，则设置不起作用。如果我在 office excel 中打开/创建工作表，并从 office excel 设置页面高度（例如，设置为 2 页），然后保存，然后运行程序以读取此工作表并设置高度/宽度（例如，设置为 1页），然后它工作。

如果我们从 poi 生成工作表，似乎记录不会被写入。如果记录已经存在，那么 poi 可以更新它。

Another weird thing - generate xls from poi - 6kb. open the excel in office and save - 22 kb. open the excel in office, adjust height/width and save - 30 kb. definitely poi isn't writing out the record when it generates the file. probably other info is also missing (22 )

# javascript - 如何在函数中合并函数

> ID：10068077
> 
> 赞同：0
> 
> 时间：2012-04-09T01:41:27.467
> 
> 标签：javascript, jquery, arrays, function, range

我用新日期创建的字符串日期更新了我的代码，并添加回了 if 语句。不过，这并没有禁用字符串或范围。我也添加了日期选择器代码。

```
function unavailableDays(date) {

function createDateRange(first, last) {
    var dates = [];
    for(var j = first; j < last; j.setDate(j.getDate() + 7)) {
        dates.push(new Date(j.getTime()));
    }
    var alwaysDisabled = [new Date("1963-3-10T00:00:00"), new Date("1963-3-17T00:00:00"), new Date("1963-3-24T00:00:00"), new Date("1963-3-31T00:00:00"), new Date("1965-9-18T00:00:00")];
    return dates.concat(alwaysDisabled);
}

var disabledDays = createDateRange(new Date("1978-8-10T00:00:00"), new Date("1978-11-5T00:00:00"));

var yy = date.getFullYear(), mm  = date.getMonth(), dd = date.getDate();
    for (i = 0; i < disabledDays.length; i++) {
    if($.inArray(yy + '-' + (mm+1) + '-' + dd,disabledDays) != -1 || new Date() < date) {
        return [false];
    }
}
    return [true];
}

$(document).ready(function (){
$('.selector').datepicker({
    inline: true,
    dateFormat: 'yy-mm-dd',
    constrainInput: true,
    changeYear: true,
    changeMonth: true,
    minDate: new Date(1940, 1-1, 1),
    maxDate: new Date(2011, 10-1, 24),
    beforeShowDay: unavailableDays,    
    onSelect: function(dateText, inst) {
            $("#img").attr("src", "http://www.example.com" + dateText + ".jpg"); 
         var chosenDates = $.datepicker.parseDate('yy-mm-dd', dateText);
         var backToString = $.datepicker.formatDate('MM dd' + ',' + ' yy', chosenDates);
         $('.info').html('You are viewing:' + '<br />' +
             backToString).addClass('background'); 
    } 
}); 
```

});

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T01:52:20.213

In your function, `dates.push` needs to be `date.push`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T01:49:47.937

因此，您似乎只想分离出功能：

```
function createDateRange(first, last) {
    var date = [];
    for(var j = first; j < last; j.setDate(j.getDate() + 7))
        dates.push(new Date(j.getTime()));
    return date;
}

function unavailableDays(date) {
    var disabledDays = createDateRange(new Date("1978-08-10"), new Date("1978-11-05"));

    //date array to be disabled
    var disabledDays = ["1963-3-10", "1963-3-17", "1963-3-24", "1963-3-31", "1965-9-18"];
    var yy = date.getFullYear(), mm = date.getMonth(), dd = date.getDate();
    for (i = 0; i < disabledDays.length; i++) {
        if($.inArray(yy + '-' + (mm+1) + '-' + dd,disabledDays) != -1 || new Date() < date) {
            return [false];
        } 
    }
    return [true]; 
} 
```

这将允许您在另一个函数中使用`createDateRange`和：`unavailableDays`

```
function someOtherFunction() {
    var someDateRange = createDateRange(new Date('1979-10-10'), new Date('1980-01-01'));
    … // stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T01:51:58.857

在另一个函数内部拥有一个函数没有问题，JavaScript 几乎就是基于此。你也可以有单独的功能，它也可以工作。

**更新**

（考虑到`date`vs`dates`问题是固定的）

Here is what seems to be the problem (**this is what your question seems to be really about, not functions inside of functions!**): `createDateRange` returns an array of `Date` objects, but your other version (`var disabledDays = ["1963-3-10", ...`) is an array of strings (and in a format that cannot be parsed by `new Date(str)`).

Your current loop seems to be trying to deal with the this string version, and it works, but you want to `createDateRange` to always ignore certain dates (as far as I understand what you are saying). So, try this:

```
function unavailableDays(date) {

    function createDateRange(first, last) {
        var dates = [];
        for(var j = first; j < last; j.setDate(j.getDate() + 7)) {
            dates.push(new Date(j.getTime()));
        }
        var alwaysDisabled = [new Date("1963-03-10T00:00:00"), new Date("1963-03-17T00:00:00"), new Date("1963-03-24T00:00:00"), new Date("1963-03-31T00:00:00"), new Date("1965-09-18T00:00:00")];
        return dates.concat(alwaysDisabled);
    }

    var disabledDays = createDateRange(new Date("1978-08-10T00:00:00"), new Date("1978-11-05T00:00:00"));
    for (i = 0; i < disabledDays.length; i++) {
        if(disabledDays[i].getTime() == date.getTime()) {
            return false;
        }
    }
    return true;

}

// Use `T00:00:00` after the date to set it as GMT, or
// dates can be interpreted as the previous day on some timezones.
var testDate1 = new Date('1978-08-10T00:00:00')
console.log("-- " + unavailableDays(testDate1)); // false
var testDate2 = new Date('1978-08-11T00:00:00')
console.log("-- " + unavailableDays(testDate2)); // true
var testDate3 = new Date('1978-08-17T00:00:00')
console.log("-- " + unavailableDays(testDate3)); // false
var testDate4 = new Date('1963-03-10T00:00:00')
console.log("-- " + unavailableDays(testDate4)); // false 
```

[http://jsfiddle.net/t4ahF/4/](http://jsfiddle.net/t4ahF/4/)

# vim - 如何在 .vimrc 中检测操作系统类型并设置 ctags 路径？

> ID：10068078
> 
> 赞同：1
> 
> 时间：2012-04-09T01:41:34.577
> 
> 标签：vim, ctags, exuberant-ctags

我在 FreeBSD 和 Linux 操作系统上都使用 vim，共享相同的 .vimrc 配置文件。有一个问题，在 FreeBSD 上 ctags 二进制路径是 /usr/local/bin/exctags，而在 linux 上是 /usr/bin/ctags。那么如何检测操作系统类型并分别设置ctags二进制路径呢？

更新：
我发现一旦安装了 taglist 插件，它会自动检测 ctags 路径并将其存储在 g:Tlist_Ctags_Cmd 变量中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:28:41.977

前段时间我遇到了同样的问题，我是这样解决的：

```
if executable('exctags')
   " On Free-BSD, exuberant ctags is installed as exctags
   let l:sCtagsName = 'exctags'
elseif executable('ctags')
   let l:sCtagsName = 'ctags'
endif 
```

然后我使用变量`l:sCtagsName`来调用 ctags。这对我来说很好。

而且，只要你在 Vim 中使用 ctags，为什么不使用专门为此制作的插件[Indexer ？](http://goo.gl/N2N1c)它会自动为项目的所有文件生成标签并保持标签是最新的。您可能想查看[我的另一个答案](http://goo.gl/zJafm)以获取更多详细信息。

# java - JSF 2.0 AJAX 重新呈现的次数超过了我指定的 ID。不知道我是否有一个基本的误解或只是一个错误

> ID：10068088
> 
> 赞同：0
> 
> 时间：2012-04-09T01:42:51.027
> 
> 标签：java, jsf

当我单击 logOutButton 时，它似乎也在重新渲染 ajaxR 元素。我希望它只重新渲染我在 f:ajax 渲染属性中的 ID。或者它正在重新渲染整个页面。问题是，为什么它渲染 ajaxR 元素和/或整个页面，而不仅仅是我指定的 ID。

为了确保我清楚：当我单击注销按钮时，ajaxR 元素没有被渲染，因为 render="#{userIdBean.isLoggedIn}"。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<h:head>
    <title>SandBox</title>
</h:head>
<h:body>

    <h1>SandBox</h1>    
    <h:form id="form1">

        Registration:<br></br>
        Email: <h:inputText value="#{regBean.email}"></h:inputText><br></br>
        User Id: <h:inputText value="#{regBean.userId}"></h:inputText><br></br>
        Password: <h:inputText id="passR" value="#{regBean.password}"></h:inputText><br></br>

        <h:outputText rendered="#{userIdBean.isLoggedIn}" id="nodeL" value="Good Luck: #{userIdBean.userId}" style="font-weight:bold" /><br></br>

        <h:commandButton value="Submit" type="submit" action="#{regBean.storeUserId}" />
        <h:commandButton id="logOutButton" rendered="#{userIdBean.isLoggedIn}" value="Log Out" type="submit" action="#{loginBean.logoutUser}" >
            <f:ajax event="keyup" render="nodeL logOutButton"/>
        </h:commandButton>
        <br></br>

    <h:outputText rendered="#{userIdBean.isLoggedIn}" value="AJAX Response: #{userIdBean.userId}"></h:outputText>

    </h:form>
</h:body>
</html> 
```

这是 bean 代码的片段。

```
public String logoutUser(){
        userIdBean.setIsLoggedIn(false);
        userIdBean.setUserId(null);
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T12:48:39.933

代码中有两个错误：

1.  必须将组件中`<f:ajax event>`的设置为。您也可以完全离开该属性，然后它将默认为正常默认值（用于命令组件和输入组件）。`UICommand``<h:commandButton>``action``event``action``valueChange`

    ```
    <h:commandButton id="logOutButton" rendered="#{userIdBean.isLoggedIn}" value="Log Out" type="submit" action="#{loginBean.logoutUser}" >
        <f:ajax render="nodeL logOutButton"/>
    </h:commandButton> 
    ```

2.  `<f:ajax render>`客户端 ID 应引用*始终*呈现给客户端的组件。然后，它将正是该组件的 HTML 表示，将由 JavaScript 更新。如果该组件的 HTML 表示不是 JSF 呈现给客户端的，因为`rendered`该组件的 是`false`，那么 JavaScript 没有什么可查找和更新的，实际上“什么都没有”会发生。例如，将其设置为`@form`表示整个表单：

    ```
    <h:commandButton id="logOutButton" rendered="#{userIdBean.isLoggedIn}" value="Log Out" type="submit" action="#{loginBean.logoutUser}" >
        <f:ajax render="@form" />
    </h:commandButton> 
    ```

    或一些始终呈现的常见包装器组件：

    ```
    <h:panelGroup id="group">    
        <h:outputText id="nodeL" value="Good Luck: #{userIdBean.userId}" style="font-weight:bold" rendered="#{userIdBean.isLoggedIn}" />
        <br></br>
        <h:commandButton value="Submit" action="#{regBean.storeUserId}" />
        <h:commandButton id="logOutButton" value="Log Out" action="#{loginBean.logoutUser}" rendered="#{userIdBean.isLoggedIn}">
            <f:ajax render="group" />
        </h:commandButton>
        <br></br>
        <h:outputText value="AJAX Response: #{userIdBean.userId}" rendered="#{userIdBean.isLoggedIn}" />
    </h:panelGroup> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:50:17.800

使用“ `click`”事件代替“ `keyup`”，如下所示。

```
<f:ajax event="click" render="nodeL logOutButton"/> 
```

# ios - UIImage 在缩放时变得模糊。为什么？（iOS 5.0）

> ID：10068095
> 
> 赞同：12
> 
> 时间：2012-04-09T01:44:04.267
> 
> 标签：ios, uiimage, scale

UIImage在缩放时总是变得模糊。如果让它保持清晰我该怎么办？

```
- (UIImage *)rescaleImageToSize:(CGSize)size {
    CGRect rect = CGRectMake(0.0, 0.0, size.width, size.height);
    UIGraphicsBeginImageContext(rect.size);
    [self drawInRect:rect];  // scales image to rect
    UIImage *resImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resImage;
} 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-11T02:19:46.850

# 四舍五入

首先，确保在缩放之前对尺寸进行四舍五入。 `drawInRect:`在这种情况下，可以模糊原本可用的图像。舍入到最接近的整数值：

```
size.width = truncf(size.width);
size.height = truncf(size.height); 
```

对于某些任务，您可能需要向下取整 (floorf) 或向上取整 (ceilf)。

# CILanczosScaleTransform 不可用

然后，忽略我之前对 CILanczosScaleTransform 的建议。虽然部分 Core Image 在 iOS 5.0 中可用，但 Lanczos 缩放不可用。如果它确实可用，请使用它。对于在 Mac OS 上工作的人来说，它是可用的，使用它。

# vImage 缩放

[但是，在vImage](https://developer.apple.com/library/mac/#documentation/performance/Conceptual/vImage/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001001-CH201-TPXREF101)中有一个高质量的缩放算法。下图显示了使用它的方法 (vImageScaledImage) 如何与不同的上下文插值选项进行比较。另请注意这些选项在不同缩放级别下的行为方式有何不同。

在这张[图](http://en.wikipedia.org/wiki/File:Verhulst-Mandelbrot-Bifurcation.jpg)上，它保留了最多的线条细节： ![图上的比例比较](../Images/c9236b676cf2f5a76f039648599d12a4.png)

在这张[照片](http://en.wikipedia.org/wiki/File:Hoh_Valley_Bigleaf_Maples2b.jpg)上，比较左下角的叶子： ![树照片的比例比较](../Images/ff63346a66daa43b16cb935d2a59a0c4.png)

在这张[照片](http://en.wikipedia.org/wiki/File:Siccar_Point_red_capstone_closeup.jpg)上，比较右下角的纹理： ![岩石照片的比例比较](../Images/bc88bceae79b39b880017a79752e38b3.png)

不要在[像素艺术](http://en.wikipedia.org/wiki/File:Png_pixel_cube.png)上使用它；它会产生奇怪的缩放伪影： ![像素艺术的缩放比较，显示缩放伪影](../Images/c3ef5705e2ec923b8001fe49c6999f25.png)

尽管它在[某些图像](http://en.wikipedia.org/wiki/File:SpaceInvaders-Gameplay.gif)上具有有趣的舍入效果： ![Space Invader 的缩放比较](../Images/e49cbb46b46a4b26b5ad135112e91934.png)

## 表现

毫不奇怪，kCGImageInterpolationHigh 是最慢的标准图像插值选项。此处实现的 vImageScaledImage 仍然较慢。为了将分形图像缩小到其原始大小的一半，它花费了 UIImageInterpolationHigh 时间的 110%。为了缩小到四分之一，它花费了 340% 的时间。

如果您在模拟器中运行它，您可能会有不同的想法；在那里，它可以比 kCGImageInterpolationHigh 快得多。据推测，vImage 多核优化使其在桌面上具有相对优势。

## 代码

```
// Method: vImageScaledImage:(UIImage*) sourceImage withSize:(CGSize) destSize
// Returns even better scaling than drawing to a context with kCGInterpolationHigh.
// This employs the vImage routines in Accelerate.framework.
// For more information about vImage, see https://developer.apple.com/library/mac/#documentation/performance/Conceptual/vImage/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001001-CH201-TPXREF101
// Large quantities of memory are manually allocated and (hopefully) freed here.  Test your application for leaks before and after using this method.
- (UIImage*) vImageScaledImage:(UIImage*) sourceImage withSize:(CGSize) destSize;
{
    UIImage *destImage = nil;

    if (sourceImage)
    {
        // First, convert the UIImage to an array of bytes, in the format expected by vImage.
        // Thanks: http://stackoverflow.com/a/1262893/1318452
        CGImageRef sourceRef = [sourceImage CGImage];
        NSUInteger sourceWidth = CGImageGetWidth(sourceRef);
        NSUInteger sourceHeight = CGImageGetHeight(sourceRef);
        CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
        unsigned char *sourceData = (unsigned char*) calloc(sourceHeight * sourceWidth * 4, sizeof(unsigned char));
        NSUInteger bytesPerPixel = 4;
        NSUInteger sourceBytesPerRow = bytesPerPixel * sourceWidth;
        NSUInteger bitsPerComponent = 8;
        CGContextRef context = CGBitmapContextCreate(sourceData, sourceWidth, sourceHeight,
                                                     bitsPerComponent, sourceBytesPerRow, colorSpace,
                                                     kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Big);
        CGContextDrawImage(context, CGRectMake(0, 0, sourceWidth, sourceHeight), sourceRef);
        CGContextRelease(context);

        // We now have the source data.  Construct a pixel array
        NSUInteger destWidth = (NSUInteger) destSize.width;
        NSUInteger destHeight = (NSUInteger) destSize.height;
        NSUInteger destBytesPerRow = bytesPerPixel * destWidth;
        unsigned char *destData = (unsigned char*) calloc(destHeight * destWidth * 4, sizeof(unsigned char));

        // Now create vImage structures for the two pixel arrays.
        // Thanks: https://github.com/dhoerl/PhotoScrollerNetwork
        vImage_Buffer src = {
            .data = sourceData,
            .height = sourceHeight,
            .width = sourceWidth,
            .rowBytes = sourceBytesPerRow
        };

        vImage_Buffer dest = {
            .data = destData,
            .height = destHeight,
            .width = destWidth,
            .rowBytes = destBytesPerRow
        };

        // Carry out the scaling.
        vImage_Error err = vImageScale_ARGB8888 (
                                                 &src,
                                                 &dest,
                                                 NULL,
                                                 kvImageHighQualityResampling 
                                                 );

        // The source bytes are no longer needed.
        free(sourceData);

        // Convert the destination bytes to a UIImage.
        CGContextRef destContext = CGBitmapContextCreate(destData, destWidth, destHeight,
                                                         bitsPerComponent, destBytesPerRow, colorSpace,
                                                         kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Big);
        CGImageRef destRef = CGBitmapContextCreateImage(destContext);

        // Store the result.
        destImage = [UIImage imageWithCGImage:destRef];

        // Free up the remaining memory.
        CGImageRelease(destRef);

        CGColorSpaceRelease(colorSpace);
        CGContextRelease(destContext);

        // The destination bytes are no longer needed.
        free(destData);

        if (err != kvImageNoError)
        {
            NSString *errorReason = [NSString stringWithFormat:@"vImageScale returned error code %d", err];
            NSDictionary *errorInfo = [NSDictionary dictionaryWithObjectsAndKeys:
                                       sourceImage, @"sourceImage", 
                                       [NSValue valueWithCGSize:destSize], @"destSize",
                                       nil];

            NSException *exception = [NSException exceptionWithName:@"HighQualityImageScalingFailureException" reason:errorReason userInfo:errorInfo];

            @throw exception;
        }
    }
    return destImage;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-18T10:05:59.340

我已经用 VImage 尝试了@Dondragmer 的答案，但结果的质量不够好（我以 1/10 的比例缩小图像）。

这个解决方案对我[有用：UIImage's drawInrect: smoothes image](https://stackoverflow.com/questions/12427435/uiimages-drawinrect-smoothes-image)

基本上，它只是说在视网膜显示器上，您需要使用视网膜参数创建图形上下文：

```
UIGraphicsBeginImageContextWithOptions(size, NO, 2.0f); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T01:53:09.993

试放：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 
```

在绘制之前获得高质量的插值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T03:09:36.417

在放大图像**并**希望保留任何尖角的特殊情况下，您需要关闭图像插值。如果您的图像是像素艺术，这就是您想要的。在大多数其他情况下，它不是。

```
UIGraphicsBeginImageContext(rect.size);

// Turn off interpolation to keep the scaled image from being blurred.
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetInterpolationQuality(context, kCGInterpolationHigh);

[self drawInRect:rect];  // scales image to rect
UIImage *resImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

如果您要按比例缩小，简单地使用 kCGInterpolationHigh 绘图也不是最佳选择。 ~~这很好，但[CILanczosScaleTransform](http://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CILanczosScaleTransform)稍微锐利一些。~~

**编辑：**从 iOS 5.1 开始，CILanczosScaleTransform 不可用。有关您可以使用的高质量缩放例程，请参阅我的其他答案。

# java - 从 SQLite 表中获取随机值

> ID：10068099
> 
> 赞同：1
> 
> 时间：2012-04-09T01:44:29.170
> 
> 标签：java, android, sqlite

我目前正在开发一个 Android 应用程序，我正在尝试从如下所示的数据库表中获取随机值：

```
| ID | Score|
| 1  | 20   |
| 2  | 5    |
| 5  | 5    |
| 6  | 5    |
| 14 | 15   | 
```

（假设这些是表中唯一的值）

我想从这个表中得到一个随机值，其中 ID 1 40%，ID 2 10% ，ID 5 10% 等等......你去吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:10:15.027

给定 a `List<Integer>`，`add()`每首歌曲索引`score`时间，[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)列表，并按顺序播放。为了获得更好的结果，请跳过连续重复。更多[在这里](https://stackoverflow.com/a/2524394/230513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:21:58.030

任何已知数据库都不支持随机选择。如果您进行一些搜索，您可能会发现以下内容：

```
select * from my_table order by rand(); 
```

但这是非常低效的，因为它试图对整个表进行排序。

如果您的数据集不是太大，您可以简单地将整个表拉入一个数组并从该数组中随机选择。

现在加权选择，这更棘手。

一个更简单的版本会是这样的：

1.  获取表中所有 id (`id)`和 weights ( `weight`) ) 的列表。
2.  遍历列表并计算`cwieght`每个 id 的累积权重。
3.  当您到达列表末尾时，您将获得所有权重的总和。`r`选择一个介于 0 和该总数之间的随机数。
4.  再次扫描列表，找到可以在其中`r >= cweight && r < cweight+weight` 使用二进制印章搜索的项目，如果你是游戏的话。

还有[其他](https://stackoverflow.com/questions/6052603/fast-weighted-random-selection-from-very-large-set-of-values) [更聪明的方法](https://stackoverflow.com/questions/352670/weighted-random-selection-with-and-without-replacement)，这取决于某些限制。

# php - mySQL数据库查询LIMIT帮助...如果返回的行数超过'x'，如何创建页面？

> ID：10068100
> 
> 赞同：4
> 
> 时间：2012-04-09T01:44:50.040
> 
> 标签：php, mysql, sql, database, limit

我正在尝试编写一个从 mySQL 数据库返回行的脚本。基本上，我网站上的用户会收到“经验值”，并根据他们获得的经验值来提升“排名”。

我有一个名为“recentexp.php”的页面，其中所有最近的 exp 都显示在表格中，最新的在顶部。

如何编写代码来创建更多页面，返回更多结果？

如果少于 10 行，则没有页码，仅显示第 1 页。但是，如果返回 12 行，则在我的页面上显示最近的 10 行（最最近的在顶部），然后让 PHP 创建一个页面“2”，放置最旧的 2 行。

如果我解释得不好，我很抱歉。我筋疲力尽……漫长的一天。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T02:01:31.597

您可以使用之后`LIMIT x, y`显示`y`结果`x`。

假设您有一个`$page`通过`$_GET`或通过其他方式传递的变量。`$page`默认为 1，或者是表示页码的数值。

然后，您可以通过以下方式选择该页面的行：

```
SELECT * FROM `table` WHERE `condition` = ? LIMIT ($page - 1) * 10, 10 
```

您可以将 10 替换为每页的结果数。如您所见，如果页码为 1，则此查询为：

```
SELECT * FROM `table` WHERE `condition` = ? LIMIT 0, 10 
```

显示前 10 个结果。如果页码为 2，则此查询为：

```
SELECT * FROM `table` WHERE `condition` = ? LIMIT 10, 10 
```

它显示第 10 行之后的 10 行，即第 11-20 行（应该在第 2 页上！）

# git - Git：如何避免重复提交 sub-sub-sub... Git -repos？

> ID：10068119
> 
> 赞同：2
> 
> 时间：2012-04-09T01:48:12.913
> 
> 标签：git, commit, repeat

我有很多子回购，这意味着一个拥有较小回购的大伞式回购。现在，当我在叶子仓库中进行提交时，这将自动意味着我在其父母中得到了改变。如果您将结构假设为二叉树，您可能会意识到这很荒谬——拥有 5 个 git-repo 深度结构很容易意味着`$ git commit -m 'did 1'; cd ..; git commit -m 'did 1 as mentioned'; ... git commit -m 'did 1 same as earlier'`. 我怎样才能避免这种重复提交？

> **示例 1：关于问题的图形示例**
> 
> ```
> X---------|
>           |
> Y---------A --------|
>                     |
>           B --------|<-----Pictures (graphic designers, animators--have repo)
>                     |
>           C --------| 
> ```
> 
> > 图片中的更改将更改 A、B、C、X 和 Y —— 臃肿的提交，由于一次更改而导致 6 次提交，糟糕的重复！现在，使用图片的人与使用 X、Y、A、B 和 C 做事的人完全不同，这让事情变得更加晦涩难懂。
> 
> **示例 2：使用 sub-sub...-repos 试用的动手 -example**
> 
> > [请在此处](https://stackoverflow.com/a/12027861/164148)复制此动手示例。您可以使用 3-level -sub-repos 测试那里的东西。

**到目前为止建议**

> 1.  Git 中的基本子模块，更多信息请[点击此处](http://book.git-scm.com/5_submodules.html)。
>     
>     
> 2.  [在这里](http://gitslave.sourceforge.net/)的Gitslave 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:24:09.793

不要在存储库中创建存储库。这将避免重复提交。可能也会解决其他问题。

如果你真的认为你需要存储库中的存储库，那么使用子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T17:02:04.587

您存储库中的文件是否经常与其他存储库中的其他文件相关联的更改？如果是这样，多个存储库*不是*您的朋友。只有当它们完全（或几乎完全）相互独立时，您才应该使用多个存储库。

另一方面，如果它们是完全独立的，那么您可以只使用单独的存储库。然后，要构建某种可能使用来自每个存储库的文件的主项目（即，它依赖于其他存储库），然后您使用子模块。

存储库是另一个存储库的子模块意味着它依赖于该子模块。如果 API 不稳定，子模块之间的依赖链接可能不是一个好主意，但如果 API 稳定，因此其中一个的更改不会直接影响另一个（即，无需更改代码），那么两个顶级子模块可以相互依赖。

现在，我一直在谈论子模块，但如果你想检查一下，看看你喜欢什么，还有一个叫做“子树”的替代方案。它位于主 git 存储库的 contrib/ 部分，因此默认情况下不安装。还存在子树策略（评论中链接到的 ProGit 章节）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:45:59.070

您的设计或结构可能很差，这可能是 GoZoner 命令背后的前提`"Don't create repositories within repositories."`，但也有可能您的项目已经到了需要更强大工具的地步。有时基本的子模块还不够，而且你的仓库太宽泛，那么你可能应该看看——GitSlave！它是一个工作流工具，您可以在其中指定您的超级存储库，然后指定从存储库。[您无需重复提交，而是在此处](http://gitslave.git.sourceforge.net/git/gitweb.cgi?p=gitslave/gitslave;a=blob;f=README;h=15cc7076fc876c402ad86bd1e4de7ac6c53ee278;hb=e096b161b5bf7cac1ac537fa749bb27daa2ac999)使用 gits -command --manual 。

**相关主题**

> *   [Git：管理和构建项目的工具？](https://stackoverflow.com/questions/11253615/git-a-tool-to-manage-and-to-structure-projects-in-the-version-control)
>     
>     
> *   不确定是否应该使用 Gitslave？[在此处](https://stackoverflow.com/a/12027861/164148)阅读带有演练的简短介绍。

# xmlhttprequest - CORS 请求不会将 https 的 cookie 发送到 https，但会发送 http

> ID：10068124
> 
> 赞同：5
> 
> 时间：2012-04-09T01:48:54.800
> 
> 标签：xmlhttprequest, cors

我有一个 CORS AJAX 请求，我正在尝试从 https 到 https 工作。从 http 到 http 时它工作正常，但由于 SSL 不发送 cookie 而失败。

这里有一些安全限制吗？我在`withCredentials`发出请求之前查看了 的状态，它设置为`true`. 知道是什么阻止了 cookie 被发送或如何调试吗？

这是初始飞行前 (OPTIONS) 请求：

```
Request URL:https://mydomain.com/resource
Request Method:OPTIONS
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Access-Control-Request-Headers:X-CSRFToken
Access-Control-Request-Method:POST
Cache-Control:no-cache
Connection:keep-alive
Cookie: [COOKIES]
Host:mydomain.com
Origin:https://www.google.com
Pragma:no-cache
Referer:https://www.google.com/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19

Response Headers
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:X-CSRFToken
Access-Control-Allow-Methods:POST, GET, OPTIONS
Access-Control-Allow-Origin:https://www.google.com
Access-Control-Max-Age:86400
Connection:keep-alive
Content-Encoding:gzip
Content-Length:20
Content-Type:text/html; charset=utf-8
Date:Mon, 09 Apr 2012 00:32:51 GMT
Server:nginx/0.8.54
Vary:Accept-Encoding 
```

POST 请求：

请求网址：https://mydomain.com/resource 请求方式：POST 状态码：200 OK

```
Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Host:mydomain.com
Origin:https://www.google.com
Pragma:no-cache
Referer:https://www.google.com/
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.151 Safari/535.19 
```

# audio - Windows 7 中的“音频增强”是如何创建的？

> ID：10068125
> 
> 赞同：1
> 
> 时间：2012-04-09T01:49:04.327
> 
> 标签：audio, windows-7, drivers

如果您在 Windows 7 上进入声音->播放设备->（某些声卡）->配置->增强功能，您可以看到可供选择的可能音频增强功能列表。我想知道，这些增强功能是如何创建的？使用什么 API 来列出增强功能等？

提前致谢。

# java - LogCat 异常：即使在 android 中添加，ApacheHttpTransport 也无法正常工作

> ID：10068126
> 
> 赞同：0
> 
> 时间：2012-04-09T01:49:05.687
> 
> 标签：java, android, google-api, google-places-api

我正在尝试设计一个在我的 Android 项目中使用 HttpTransport 的应用程序，但是在调用导入时，它会引发以下 Logcat 错误。

```
E/dalvikvm(481): Could not find class 'com.google.api.client.http.javanet.NetHttpTransport', referenced from method com.test.main.MyActivity.<clinit>
W/dalvikvm(413): VFY: unable to resolve new-instance 75 (Lcom/google/api/client/http/javanet/NetHttpTransport;) in Lcom/test/main/MyActivity
W/dalvikvm(481): VFY: unable to find class referenced in signature (Lcom/google/api/client/http/HttpTransport;)
I/dalvikvm(481): Failed resolving Lcom/test/main/MyActivity$2; interface 71 'Lcom/google/api/client/http/HttpRequestInitializer;'
D/dalvikvm(481): VFY: dead code 0x0002-0009 in Lcom/test/main/MyActivity;.createRequestFactory (Lcom/google/api/client/http/HttpTransport;)Lcom/google/api/client/http/HttpRequestFactory;
E/dalvikvm(481): Could not find class 'com.google.api.client.http.GenericUrl', referenced from method 
```

我试过在网站上搜索解决方案，但它们看起来很模糊或不值得需要。有人可以告诉我我在这里做错了什么吗？

我已经在我的项目中导入了所有依赖项 JAR，但它仍然不起作用。

我使用 Google API 版本 1.8.3。主要来源：google-api-java-client-1.8.3-beta.jar

上述 JAR 的所有依赖项都包含在 .zip 文件中，包括 Google 推荐的外部 JAR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:14:44.813

问题解决了。好像导入不正确。

另外，我必须在库下的 Eclipse 中正确链接它。

我使用 com.google.api.client.http.ApacheHttpTransport 而不是 Eclipse 建议的标准库。

现在它可以工作了。干杯!

# python - 使用 Django-piston 获取完整的堆栈跟踪

> ID：10068129
> 
> 赞同：2
> 
> 时间：2012-04-09T01:49:59.833
> 
> 标签：python, django, django-piston

我刚开始使用`django-piston`.

通常，在 Django 中，当我的视图抛出异常（并且我处于`DEBUG=True`模式）时，我会得到一个非常好的、有用的带有堆栈跟踪的 500 错误页面。

但是当我的 Django-piston 启用视图抛出一个异常而不是一个漂亮的堆栈跟踪页面时，我得到一个简单的错误页面，只打印出异常消息。

例如...

```
Piston/0.2.3rc1 (Django 1.3) crash report:

Method signature does not match.

Signature should be: domain

Exception was: exceptions must be old-style classes or derived from BaseException, not NoneType 
```

**如何取回有用的 Django 堆栈跟踪页面？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T19:28:20.910

所以这是对我自己的问题的一种非回答。

似乎[Django Piston](https://bitbucket.org/jespern/django-piston "django-活塞")是一个几乎死气沉沉的项目。我改用[Django Tastypie](https://bitbucket.org/jespern/django-piston "django-活塞")。

# jquery - 如果以某种方式链接，则在页面加载时打开 Colorbox

> ID：10068132
> 
> 赞同：0
> 
> 时间：2012-04-09T01:50:32.653
> 
> 标签：jquery, colorbox

我想让颜色框仅在以特定方式链接时才能在页面加载时工作，例如：

```
<a href="http://noemyrenascenca.com.br/site/produtos-noemy/#colorbox">Link</a> 
```

我看到这个答案教如何在加载时触发颜色框：[https ://stackoverflow.com/a/5969963](https://stackoverflow.com/a/5969963)

演示在这里：[http](http://noemyrenascenca.com.br/site/produtos-noemy/) : //noemyrenascenca.com.br/site/produtos-noemy/（链接是“Ver Coleção”）。

编辑：

对不起，我一点都不清楚。

我想链接到一个页面，当该页面加载时，它应该触发颜色框。但它应该只在以特殊方式链接时触发，并非总是如此。

例如：当您单击[http://noemyrenascenca.com.br/site/](http://noemyrenascenca.com.br/site/)中的号召性用语时，它应该打开[http://noemyrenascenca.com.br/site/produtos-noemy/](http://noemyrenascenca.com.br/site/produtos-noemy/)并在那里触发 colorobx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:11:03.480

```
//change "a" for the specific link
$("a").click(function(event) {
  event.preventDefault();
 //triger color box here
 $.fn.colorbox({width:"30%", inline:true, href:"#subscribe"});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:52:24.863

您需要检测页面加载时的哈希值，并对其进行处理。在您的情况下，您将初始化 Colorbox。

取自[此 SO 答案](https://stackoverflow.com/questions/5574943/get-ajax-hash-url-on-page-load)的代码：

```
(function() { 

   var hash = window.location.hash;

   if ('onhashchange' in window) {
      window.onhashchange = hashChanged;
   } else {
      setInterval(function() {
         if (window.location.hash != hash) {
             hash = window.location.hash;
             hashChanged();
         }
      }, 500);
   }

   var hashChanged = function() {
     alert('Hash has changed!');
     //This is where your colorbox would go.
   };

})(); 
```

# java - Java MIDI 解析器？

> ID：10068138
> 
> 赞同：0
> 
> 时间：2012-04-09T01:51:35.407
> 
> 标签：java, android, audio, midi, javasound

有人知道Java MIDI 解析器，它会将MIDI 解析成树状数据结构，其中节点将是诸如MTrks 之类的项目？我正在做一些分析书面音乐的工作，我想要一种包含数百首样本歌曲的格式。有人有喜欢的格式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:56:08.483

实际上 MIDI 文件是 MIDI 事件的列表，其中事件是音符、表情变化、延音踏板等。事件按 MIDI 通道分组。所以无论如何你都会处理事件。解析器呢，你试过[http://docs.oracle.com/javase/6/docs/api/javax/sound/midi/package-summary.html](http://docs.oracle.com/javase/6/docs/api/javax/sound/midi/package-summary.html)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:31:03.147

Google Code 上还有一个 MIDI 文件格式的基本 Java 实现：

[http://code.google.com/p/android-midi-lib/](http://code.google.com/p/android-midi-lib/)

# javascript - Javascript 对象文字表示法的意外行为

> ID：10068141
> 
> 赞同：0
> 
> 时间：2012-04-09T01:51:54.983
> 
> 标签：javascript, object-literal

我一直在尝试使用 Javascript 对象文字表示法与带有原型的函数，并且遇到了一个我无法弄清楚的错误。

以下是相关代码：

```
var MyTestObj = {

  myTestFunction: function() {
    var myArray = []

    console.log('Before:');
    console.log(myArray);
    console.log(myArray.length);
    console.log('---');

    for (var mi = 0; mi < 5; mi++) {
      myArray.push(1);
    }

    return myArray;
  }
} 
```

当我调用 console.log(myArray) 时，我希望它输出 []，但我得到了这个：

```
> MyTestObj.myTestFunction()
  Before:
  [1, 1, 1, 1, 1]
  0
  ---
  [1, 1, 1, 1, 1] 
```

有人可以解释为什么 myArray 在我在循环之前输出它时已经有一个值吗？为什么它会立即输出正确的长度（0）？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T01:54:10.007

这是 Chrome 和 Safari 控制台的一个怪癖。它不会立即评估 Array 以进行显示。

如果你`.slice()`这样做，它会正确显示，因为 Array 只有原语。

```
console.log('Before:');
console.log(myArray.slice()); // <-- copy the Array
console.log(myArray.length);
console.log('---'); 
```

# java - 在二叉树中按字母顺序排列字符串

> ID：10068143
> 
> 赞同：0
> 
> 时间：2012-04-09T01:52:02.457
> 
> 标签：java, tree, binary-tree

我正在构建一个由示例段落中的单词组成的二叉树，按字母顺序排序。到目前为止，我已经实现了所有基本的“幕后”工作来定义二叉树（构造函数、方法），我现在正在向树中添加元素（单词）。
每个单词都已删除其非字母数字字符，并且单词中的每个字母都转换为小写。我想知道如何按字母顺序在树中输入单词？我对二叉树所做的一切都与数字有关，所以我不确定在这种情况下该怎么做。（我在想一些与 ASCII 值有关的事情？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:07:01.980

你说你以前用数字做过这个。

你的新树并没有真正改变。

您可以将按字母顺序进行的比较视为一种让某事物优先于其他事物的方式。

因此，将这些字符串视为一个数字，数字越小，该字符串在树中占据的级别越低。你只是先让你的树按最小的数字排序。`A`小于`B`,`B`小于`C`等等。

查看[这个相关问题](https://stackoverflow.com/questions/6203411/comparing-strings-by-their-alphabetical-order)，以提供比较功能，为您提供您正在寻找的“数字”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:04:40.193

您不会“按字母顺序”将内容输入二叉树，您只需将内容输入二叉树即可。树进行排序。（请记住，字符串只是一个数字序列。）

# ios - 如何从相机视图中截屏？

> ID：10068145
> 
> 赞同：1
> 
> 时间：2012-04-09T01:52:14.127
> 
> 标签：ios

朋友和先生们

谢谢你花时间陪我。

我想在应用程序中拍摄屏幕截图。

现在我正在尝试使用以下代码。

```
- (UIImage *)captureView:(UIView *)view {
    CGRect screenRect = [[UIScreen mainScreen] bounds];

    UIGraphicsBeginImageContext(screenRect.size);

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    CGContextFillRect(ctx, screenRect);

    [view.layer renderInContext:ctx];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return newImage;
} 
```

但问题是，当我处于相机模式时，它只会出现黑屏。

上面的代码在除相机视图之外的其他视图中完美运行。

我想拍摄相机视图的屏幕截图。

简单地说，我可以`UIGetScreenImage`用来获取相机视图的屏幕截图，但这是非公共 api，如果我使用它，那么应用程序无法上传到 xcode 4.3 上的 appstore。

我怎样才能做到这一点？

有什么想法吗？

如果那样的话，这对我会有很大的帮助。

再次感谢。

# android - 可以缩放视频以适应 SurfaceView 吗？

> ID：10068152
> 
> 赞同：1
> 
> 时间：2012-04-09T01:54:33.437
> 
> 标签：android, media-player, glsurfaceview

以下是[MediaPlayerDemo_Video.java](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/MediaPlayerDemo_Video.html)使用的布局，除了我将尺寸更改为奇怪的分辨率 (300x480) 以说明这一点：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<SurfaceView android:id="@+id/surface"
    android:layout_width="300dip"
    android:layout_height="480dip"
    android:layout_gravity="center">
</SurfaceView> 
```

是的，视频完全显示在 300 x 480 的窗口中，但视频被缩放以适合我的平板电脑的宽度 (1024)，并且窗口显示整个视频 (1024 x 680) 的一部分 (300 x 480) ）。我认为，根据我的阅读，视频会缩放以适应 SurfaceView 的大小。

有没有办法缩放视频以适应 SurfaceView？

# jquery - JQuery .ajax() 函数的问题

> ID：10068155
> 
> 赞同：-2
> 
> 时间：2012-04-09T01:55:18.370
> 
> 标签：jquery, html

在过去的几个小时里，我一直在解决这个问题，但令人沮丧的是找不到解决方案。我正在尝试使用 JQuery .ajax() 函数提交表单，但它没有提交，代码如下，任何建议将不胜感激：

###  JS：

```
$(document).ready(function() {

    var livelistURL = "/scripts/livelist.php?guestlist=<?php echo $_GET['guestlist']; ?>";
    var names = '';
    var dot = '.';

    $("#livelist").load(livelistURL);
    $("input#name").select().focus();

    $("#addname").submit(function(event){
        event.preventDefault();

        $("input#name").blur();
        $('#working').show();
        $('#event-box').fadeTo('fast', 0.5);  

        var guestlist = '<?php echo $_GET['guestlist']; ?>';
        var name = $('input#name');
        var by = '<?php echo $email; ?>';

        var data = 'name=' + name.val() + '&guestlist=' + guestlist.val() + '&by=' + by.val();  

        $("input#name").blur();

        $.ajax({
            url: "/scripts/addname.php",
            type: "post",
            data: data,
            success: function(){
                var value = $("input#name").val().toUpperCase();;
                $("span.success").text(value);

                if (names == '') {
                    names = value;
                }
                else {
                    names = ' ' + value + ', ' + names;
                    $("span#dot").text(dot);
                }

                $("span#name1").text(names);
                $('#working').fadeOut('fast');
                $('#success').fadeIn('fast');
                $('#added-names').fadeIn('fast');
                $('#success').delay('600').fadeOut('fast');
                $('#event-box').delay('600').fadeTo('fast', 1.0);
            },
            error: function(){
                $('#working').fadeOut('fast');
                $('#error').fadeIn('fast');
                $('#error').delay('600').fadeOut('fast');
            },
            complete: function(){
                $("input#name").val('');
                $("input#name").select().focus();
            }
        });
    });
}); // end 
```

### 表单 HTML：

```
<form id="addname">
            <input id="name" name="name" class="tagcheck" style="z-index: 1000;" minlength="5" maxlength="60" placeholder="Add Name" />
        </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:03:16.143

安装 Firebug，然后检查控制台。这可以帮助您调试 Ajax 请求 - 我广泛使用它。

尝试删除所有其他 Javascript 内容，将其剥离，直到它工作为止。另外，addname.php 中可能有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:10:35.520

我在这条线上看到了几个问题：

```
var data = 'name=' + name.val() + '&guestlist=' + guestlist.val() + '&by=' + by.val(); 
```

请注意，guestlist 和 by 变量不是 jQuery 变量。所以不能使用val()，会报错。从两者中取出 val() 应该可以解决该问题。

```
var data = 'name=' + name.val() + '&guestlist=' + guestlist + '&by=' + by; 
```

我假设您的表单有某种提交按钮，对吧？您只是没有包含表单 HTML 的那部分吗？

# php - flash facebook 游戏认证

> ID：10068157
> 
> 赞同：0
> 
> 时间：2012-04-09T01:56:32.923
> 
> 标签：php, facebook, flash, facebook-graph-api, oauth

我需要授权我的 Flash 游戏（在 Facebook 上运行）用户访问我的游戏服务器。我能够从客户端上的 Facebook 获取他们的数据，如 id、访问令牌等（我正在使用 Flash Facebook API），但我不确定如何在我的游戏服务器上授权它们（例如登录使用数据库查询）。我想到的一种情况：

如果我可以在客户端（我已经这样做）和服务器（例如，我尝试过但似乎不起作用的重定向 URL）上从 Facebook 获得相同的访问令牌，那么我可以轻松比较两个令牌（连同用户 ID），从而授权用户。

有什么想法可以实现这一点或类似的东西吗？

**更新**更简单地说，我想在它到达客户端之前在服务器端捕获从 Facebook 返回的令牌（它可以是解析 URL 令牌参数的简单 PHP 脚本）。接下来，将其存储在服务器上的DB中，当客户端查询服务器时，我可以进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:18:39.200

我想我找到了解决方案。在[这个答案](https://stackoverflow.com/a/7742697/1146399)中进行了解释。基本上，当我在客户端收到访问令牌时，我会将其发送到服务器（我的游戏服务器），然后我将针对 Facebook 验证它（即[https://graph.facebook.com/me?access_token=@访问令牌](https://graph.facebook.com/me?access_token=@accessToken)）。如果它返回用户数据，那么它是正确的令牌，否则它是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:44:59.187

为什么你需要做这个比较？，没有必要比较来自同一来源的两个条目。

例如，如果比较是为了确保用户是否在您的客户端网页或 facebook 使用会话时间上登录过一次，请检查 php。

如果您需要比较任何我无法理解的值，如果您想从同一来源查询两次。

如果您想更新与 facebook 无关的某些值，那么我会动态创建第二个数据库，当应用程序运行时，它会将您自己的数据输入到客户端的数据库中，同样在每次应用程序开始时它都可以检查这首先。

这似乎您在这里更多地查看服务器端问题，我建议添加更多信息以说明您为什么需要这些查询并将“PHP”添加到您的主题相关标签。

# encoding - 如何在 mahout 中编码布尔特征值？

> ID：10068158
> 
> 赞同：1
> 
> 时间：2012-04-09T01:57:15.560
> 
> 标签：encoding, mahout, ml

我有一个布尔特征，其值可以是 0 或 1，我目前正在使用 ContinuousValueEncoder 将其编码为向量，因为我在 mahout 中看不到更合适的编码器。这是正确的吗？如果没有，我应该改用什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:43:23.217

您可以使用“addToVector(String originalForm, double weight, Vector data)”并将二进制值作为权重传递。更多信息：[https](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/vectorizer/encoders/FeatureVectorEncoder.html#addToVector(java.lang.String) : //builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/vectorizer/encoders/FeatureVectorEncoder.html#addToVector(java.lang.String , double, org.apache.mahout .math.Vector)

# c - MPI_Send 是如何用 MPI_Character 实现的？

> ID：10068160
> 
> 赞同：2
> 
> 时间：2012-04-09T01:57:50.067
> 
> 标签：c, character, fortran, mpi

在 fortran 中，我可以将字符串声明为：

```
character*80 mystring 
```

然后将其发送为：

```
call MPI_Send(mystring,len(mystring),MPI_CHARACTER,...,ierr) 
```

或者，我可以将我的字符串声明为一个字符数组（更符合 C 中的传统方式）

```
character mystring(80) 
```

然后将其发送为：

```
call MPI_Send(mystring,80,MPI_CHARACTER,...,ierr) 
```

我的理解是这两个调用在调用 C 函数时会有不同的接口。（前者通常由编译器通过按值传递一个包含字符串长度的附加参数来实现，而后者不传递该参数）。那么，MPI 实现（通常用 C 编写）如何知道其中的区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:46:22.570

[http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node37.htm#Node38](http://www.mcs.anl.gov/research/projects/mpi/mpi-standard/mpi-report-1.1/node37.htm#Node38)

后者基本不做。

# c++ - 如何使用 QDoubleValidator 设置验证器？(QValidator)

> ID：10068162
> 
> 赞同：0
> 
> 时间：2012-04-09T01:58:14.090
> 
> 标签：c++, c, qt

我现在有一个名为 EditBox 的类，它继承自 Qwidget 和 QTextEdit

我正在尝试为这个文本编辑框设置一个验证器......

```
EditBox manbox; 
```

如何将验证器设置为 0~100？带 2 个小数点？

我试过了

```
QDoubleValidator *testQD = new QDoubleValidator(manbox);
testQD->setRange(0.00,100.00,2);

QLineEdit *sb1 = new QLineEdit( manbox );
sb1->setValidator(testQD); 
```

但似乎不起作用。有哪里出错了吗？

或者请在某个地方指导我，我可以找到这个完整的教程。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:20:23.553

您不能为 a 设置验证器`QTextEdit`，它仅适用于`QLineEdit`（以及包含`QLineEdit`like的输入小部件`QSpinBox`，`QComboBox`...）。

如果您只需要一行，并将内容限制为一个数字，您也可以将`QTextEdit`您的班级中的 替换为`EditBox`a`QLineEdit`或 a `QDoubleSpinBox`。

# java - 在运行时重新编译和重新运行 Java 代码

> ID：10068164
> 
> 赞同：3
> 
> 时间：2012-04-09T01:58:33.100
> 
> 标签：java, compiler-construction

在 Unix 环境中，如果我正在运行 Java 代码并且我想使用不同的参数重新运行它，我可以重新编译它而不会丢失数据吗？之前的 Java 任务还会运行而不会卡死吗？

干杯，西蒙娜

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:13:31.837

您可以使用不同的（命令行）参数运行同一 java 程序的多个实例，而无需重新编译。

运行同一程序的不同版本并在运行时重新编译是可能的，但如果您在程序运行时修改类文件，如果该文件尚未加载，则可能会影响当前运行时。如果要同时运行两个不同的版本，您应该创建类文件或 jar 文件的另一个工作副本，然后在对其进行修改后启动该副本。如果您的程序修改可以更改为属性文件或其他配置文件mod，我认为这是一个更好的解决方案。

# javascript - 使用 Javascript 创建动态对象

> ID：10068169
> 
> 赞同：2
> 
> 时间：2012-04-09T02:00:10.223
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 从 DOM 中提取的属性创建一个新的 Javascript 对象。我试图提取的信息是来自此的数据-*：

```
 <button type='button' class='pickup' data-name="apple" data-weight='1' data-color='red'>food</button> 
```

所以我想获取数据名称和数据权重并将它们放入一个新的（或者如果我必须的话）对象中。这就是我遇到问题的地方。我希望对象看起来像这样：

```
 MyObject = {
                food:  {
                        weight: 1,
                        color: 'red'
                       }
                } 
```

我一直在尝试通过“for(var i in MyObject)”循环创建一个这样的新对象，但是当涉及到将属性和值添加到 MyObject{} 时，我不知道如何制作它工作。

有什么想法或建议吗？

* * *

下面的答案完美无缺！谢谢！如果我想动态创建：

```
 MyObject.food = {} 
```

从一个变量，像这样：

```
 var Name = "meal";
    MyObject.Name = {} // creates MyObject.meal = {}; 
```

我该怎么做？我认为 MyObject[Name] = {} 会起作用，但对我来说似乎没有。也许我打错了？:S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T02:10:31.637

如果您不知道属性是什么，您可以循环该`.attributes`对象。

```
var attrs = $('.pickup')[0].attributes;  // grab the attributes of the element

var MyObject = {  // create the object
    food: {}
};

  // loop the attributes, and add the data- attributes to the object
$.each(attrs, function(_, v) {
    if (v.name.indexOf('data-') !== -1)
        MyObject.food[v.name.replace('data-', '')] = v.value;
}); 
```

[http://jsfiddle.net/5m7KF/](http://jsfiddle.net/5m7KF/)

* * *

在兼容 HTML5 的浏览器中，您可以使用`.dataset`元素的属性来获取`data-`属性。

```
var data = $('.pickup')[0].dataset;  

var MyObject = {  
    food: {}
};

$.each(data, function(k, v) {
    MyObject.food[k] = v;
}); 
```

[http://jsfiddle.net/5m7KF/1/](http://jsfiddle.net/5m7KF/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T15:36:20.013

```
var FinalObject= {}
$('.filter-products select').each(function() {
   var property= $(this).attr('id');
   var value = $(this).val();
   FinalObject[property] = value;
});

console.log(FinalObject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T02:02:15.973

`$(".pickup").data("name")`会给你“苹果”等。

我脑海中的完整示例。

```
$(".pickup").click(function(){
    MyObject = {
        food:  {
            weight: $(this).data("weight"),
            color: $(this).data("color")
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T04:11:02.873

你可以像这样使用 jQuery

```
var d = $(".pickup").data(); 
```

"d" 是一个属性为 $('.pickup') 的 Object 以 'data-' 开头，你可以使用它希望对你有帮助！

# git - git push origin master 不起作用

> ID：10068172
> 
> 赞同：5
> 
> 时间：2012-04-09T02:00:54.027
> 
> 标签：git, github

虽然，我可以在本地提交我的更改，但我无法推送到原始主机

我跑

```
$ git remote add origin git@github.com:username/test.git 
```

我明白了

```
fatal: remote origin already exists. 
```

我跑

```
$ git push -u origin master 
```

我明白了

```
ERROR: Repository not found.
fatal: The remote end hung up unexpectedly 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T06:11:59.607

**2种方法来做到这一点**
**： -**

```
 git remote set-url <name> <newurl> 
```

**例子：-**

```
git remote set-url origin git@github.com:username/test.git 
```

**第二：-**

您需要做的是更改您的“原点”设置。您在项目根目录中编辑 .git/config，它可能看起来像这样：

```
...
[remote "origin"]
url = git://user@dev.foo.com/git/repos/path
fetch = +refs/heads/*:refs/remotes/origin/*
... 
```

或者如果您的“远程”实际上是本地的：

```
...
[remote "origin"]
url = /path/to/repos/on/this/machine
fetch = +refs/heads/*:refs/remotes/origin/*
... 
```

您需要做的就是使用您喜欢的编辑器编辑该文件并将 url = 设置更改为您的新位置。假设新存储库已正确设置并且您的 URL 正确，您将很高兴地推入和拉出新的远程位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-04T20:38:58.973

我知道这个问题比较老，但是我在试图找到我遇到的错误的答案时遇到了它，我找到了答案。自 2020 年 10 月起，任何创建该分支的新存储库都将被称为 main 而不是 master。由于具有主/从属性的种族主义，GitHub 正在重命名主分支。您将需要输入 git push orgin main。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T02:03:47.147

看起来`origin`您的配置文件中有一个错误的条目。

编辑您的存储库`.git/config`文件以更改它；格式是不言自明的，但如果您遇到问题，请发布其内容。

# c# - 如何将datatable的索引映射到datagridview的rowId？

> ID：10068173
> 
> 赞同：1
> 
> 时间：2012-04-09T02:01:16.493
> 
> 标签：c#

我正在使用 datagridview 编写查看器来加载文本文件并显示 m 行 xn 列表（该表可由用户编辑）。

此查看器的主要目的是将每列中最大值的背景颜色更改为红色，将每列的最小值更改为绿色，并将超过某个阈值的单元格更改为粉红色。（我使用按钮触发 checkMinMax() 方法，该方法遍历 dataTable 的每一列以提取 min/max/exceed 的行列表）

当我第一次将数据加载到数据表中时，我能够做到这一点。但是，当我对 datagridview 进行排序并再次调用 checkMinMax() 时，颜色仍固定在旧位置。

```
public void setCellBackColor (List<int> rows, int col, Color color)
{
    foreach (int row in rows)
    { 
        dataGridView_data.Rows[row].Cells[col].Style.BackColor = color;  
    }
} 
```

我知道我使用的是数据表的索引，而不是 datagridview 的 rowId。所以我的问题是是否有办法将我的数据表的索引映射到rowId？

还是有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:32:38.307

`setCellBackColumn`只需在对数据进行排序后回忆一下。行高亮不是动态的，所以你必须回忆它。`Sorted`您可以通过使用网格的事件来做到这一点。不要忘记将默认颜色专门设置为白色，这样它就不会保留过时的颜色。

# php - 标记帖子或评论逻辑解释

> ID：10068189
> 
> 赞同：-1
> 
> 时间：2012-04-09T02:05:27.050
> 
> 标签：php, mysql, flags

有人可以解释在我的网站上标记帖子和评论的逻辑吗？我在mysql中有一个评论表。并且该标志设置为默认值 0。当用户标记帖子时，他们会将值更改为 1。那么，会发生什么？版主是否准备好对数据库进行排序并删除任何已标记的帖子？或者这是它如何工作的其他部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:09:59.250

评论可以标记一次吗？如果您希望允许多个用户标记一个评论，您可能需要一个 CommentFlags 表来映射`user_id`和`comment_id`，如果您想扩展标记功能以包括用户给出标记的原因，这也很有用。

然后对于应用程序的审核部分，在管理面板中，您将提取所有标记的评论，如下所示：

```
SELECT comment_id, count(*) as flag_count from CommentFlags group by comment_id; 
```

从那时起，如果您也显示评论内容，您也可以加入评论表。

这些可以帮助您入门，但我建议您向您的客户/您自己询问确切的要求，然后从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T02:13:09.097

这当然是一种选择。另一种选择是创建另一个名为“flags”的表，并引用帖子 ID、标记它的用户等。然后您可以直接从中选择。这将使数据更有条理和统一，“标记帖子”页面可以简单地查询标志表并从帖子表中连接必要的数据。

# ruby-on-rails - Rails：从库冲突加载的模块中的初始化方法

> ID：10068193
> 
> 赞同：0
> 
> 时间：2012-04-09T02:06:12.730
> 
> 标签：ruby-on-rails, module

我有以下文件层次结构：

库 > MyModule.rb 库 > MyModule.rb > MyClass.rb

在 MyModule.rb 中，我有一个初始化方法：

```
def initialize(variable, parameter)
  @variable = variable
  @parameter = parameter
end 
```

但是，当我尝试创建我的类的实例时，结果是一个错误：

```
undefined method: set is not defined for nil 
```

我试图用这个重建的初始化版本来修复它：

```
def initialize(variable, parameter)
  @variable = variable
  @parameter = parameter
end 
```

这减轻了我收到的错误。但是，现在我要在 HTML.erb 文件中创建我的类的实例：

```
<%= MyModule::MyClass.new("string", 1) %> 
```

在这里我得到一个参数错误：2 for 0

谁能解释一下？

根据要求提供更多信息：

我正在尝试创建一些方法来创建 html 标记作为常用元素的便捷包装器。特别是，它们利用 rails 的 content_tag 辅助方法来创建新方法。该计划最终是通过使用简单的 << 运算符来添加嵌套标记支持。

库/标签.rb

```
module Tags
  include ActionView::Helpers::TagHelper
  include ActionView::Helpers::JavaScriptHelper
  include ActionView::Context

  def initialize(type, content, options, &block)
    @type = type
    @content = content
    @options = block_given? ? nil : options
    @block = block_given? ? block : nil
  end

  def show
    if @block.nil?
      content_tag(@type, @content, @options)
    else
      content_tag(@type, @content, @options) { @block.call }
    end
  end
end 
```

现在这是模块的最低级别；这些对于我将要实现的所有标签都是通用的。然后我在标签文件夹（Lib/tags/div.rb）中有一个类：

```
module Tags
  class DivTag
    def initialize(content, options, &block)
      super(:div, content, options, &block)
    end
  end
end 
```

然后在我的测试文件 main.rb （这是去本地主机时路由到的）

这就是我得到错误的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:21:46.783

“def Tags” - 这是错误的方法，你应该使用类标签......

在方法中调用“super” - 类应该从其他类继承，例如 class DivTag < Tags::Base def initialize super() # <- Tags::Base#initialize end end

默认情况下，每个新类都继承自“Object”类，并且 Object#initialize 接受 0 个参数。

为什么你不使用“content_tag”助手（http://apidock.com/rails/ActionView/Helpers/TagHelper/content_tag）？它几乎是你想要的

# ruby-on-rails - Rails Asset Pipeline - 编译 jQuery UI 资产的问题

> ID：10068198
> 
> 赞同：3
> 
> 时间：2012-04-09T02:07:31.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui, heroku, asset-pipeline

我正在使用 Rails 3.2.3 并部署到 Heroku 的 Cedar Stack，但我的资产管道和编译所需的 jQuery UI 文件时遇到问题。

具体来说，这个问题体现在我认为相关的两个独立问题上：

1）在开发中我的下拉按钮不起作用，但在生产中它们起作用

2）在开发中，我的日期选择器和滑块不起作用，它们在生产中也不起作用。`<script src="/assets/jquery-ui.js" type="text/javascript"></script>`但是，如果我在视图顶部调用 javascript ( )，则日期选择器和滑块在开发中有效，但在生产中无效

我曾尝试[在本地以及在 slug 编译期间编译资产](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)，但无济于事。

我的应用程序.js：

```
 //= require jquery
 //= require jquery_ujs
 //= require jquery-ui
 //= require bootstrap
 //= require_tree . 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.5'
gem 'date_validator'
gem 'jquery_datepicker'

group :development, :test do
gem 'sqlite3', '1.3.5'
gem 'rspec-rails', '2.9.0'
gem 'annotate', '~> 2.4.1.beta'
end

group :assets do
gem 'sass-rails',   '3.2.4'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.0'

group :test do
gem 'capybara', '1.1.2'
gem 'factory_girl_rails', '1.4.0'
end

group :production do
gem 'pg', '0.12.2'
end 
```

我的配置/环境/development.rb

```
 # Do not compress assets
 config.assets.compress = false

 # Expands the lines which load the assets
 config.assets.debug = true 
```

我的配置/环境/production.rb：

```
# Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = false

# Compress JavaScripts and CSS
config.assets.compress = true

# Don't fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = false

# Generate digests for assets URLs
config.assets.digest = true 
```

我的布局 application.html.erb：

```
 <%= javascript_include_tag "application" %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:43:39.837

您没有向我们展示您的代码。但我的猜测是这可能是一个 dom 负载问题。

尝试将您的实例化放在`jQuery()`调用中；

这是来自 twitter-bootstrap-rails 的示例；

```
jQuery(function($){
  $("a[rel=popover]").popover();
  $(".tooltip").tooltip();
  $("a[rel=tooltip]").tooltip();
}); 
```

任何 jquery UI 自动完成器都应该如此

```
jQuery(function($){
  $("input.search-autocomplete").autocomplete({
    source: "/search"
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T02:55:16.290

尝试将“jquery-ui”的名称更改为“jquery-ui-1.0”并将该名称的文件放入“app/assets”。我猜这个名字与宝石提供的东西有冲突。

# java - 将任务与线程分离是什么意思？

> ID：10068200
> 
> 赞同：3
> 
> 时间：2012-04-09T02:07:57.393
> 
> 标签：java, multithreading

我正在阅读 Java 中的多线程编程。在 java book 中，它说将任务与线程分离是一种首选设计。我不知道这是什么意思。

据我了解，最好使用实现 Runnable 而不是扩展线程。我只是不明白为什么会这样。

为什么实施比扩展更好？那么你什么时候使用扩展呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T02:17:03.520

软件设计中的一个重要原则是关注点分离：每个模块/对象/类/方法应该只有一个明确定义的职责。

Thread 类混合了两个问题：

*   指定要执行的步骤序列（Runnable）

*   与运行时系统交互以管理如何实现该序列的执行（在这种情况下通过专用 CPU 线程）

应用程序程序员不需要关心第二部分：她只需要写下她想要执行的代码路径，即实现一个 Runnable。

然后可以通过多种方式执行该 Runnable，例如通过启动一个新线程，也可以通过将其提供给 ExecutionService。当您将可运行文件硬编码到线程中时，这种灵活性就会消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T02:10:37.113

的优点`Runnable`是您可以将 a 传递`Runnable`给构造函数以外的东西`Thread`。例如，您可以将它们与新的并发框架结合使用。

您可能扩展的一个原因`Thread`是您的任务是否需要直接访问`Thread`它正在运行的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T09:30:25.460

从逻辑上讲，IS-A 关系不应处理组合概念。

因此，当您想要创建自定义 Thread 时，扩展 Thread 类是“有用的”，这是所有超级方法的好处或覆盖某些方法 => 在这种情况下，对于 Thread 类，它在大多数情况下肯定是无用的。

此外，扩展 Thread 会阻止您扩展所需的业务类，例如，使用接口，您仍然可以从所需的类扩展。

我们总是想知道新类是需要一个概念还是这个概念。

You NEED Thread for Business class ，因此很可能将其与所有 Threading 概念分开 => 所以 Runnable 足以掩盖它。

# google-app-engine - 在 Objectify 查询中忽略排序顺序

> ID：10068201
> 
> 赞同：0
> 
> 时间：2012-04-09T02:08:25.837
> 
> 标签：google-app-engine, objectify

我有一个名为*MyFile的 GAE 实体*

```
public class MyFile {  
   static enum LocationEnum {Folders, Hidden};  
   static enum FileType {File, Folder);  
   @Id private Long id;  
   private Key<MyFile> parent;  
   private String name;  
   private LocationEnum location;  
   private FileType fType;

   // getters and setters  
} 
```

以及一个单独的 DAO 类中的函数，用于根据父级查询文件，返回按名称排序的结果。

```
public List<MyFile> getFiles(Key<MyFile> parent) {  
    Query<MyFile> q1 = ofy().query(MyFile.class).filter("parent", parent).filter("location", LocationEnum.Folders).order("name");  
    return q1.list();
} 
```

似乎我的订单被忽略了，因为结果是按 id 排序的。我确实想到我缺少与索引有关的东西，但我注意到 GAE 祝福我一个基于位置、父级、名称的自动生成索引。所以我认为它会起作用。

如何按名称订购？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T23:38:31.997

我发现了问题。无法在 App Engine 上进行不区分大小写的搜索。GAE 将按大写字母排序，首先是 AZ，然后是 az。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T00:07:40.180

您使用的是什么版本的 Objectify？从 Objectify4 开始，默认情况下所有字段都没有**索引**。因此，您需要使用[@Index](http://code.google.com/p/objectify-appengine/source/browse/trunk/src/com/googlecode/objectify/annotation/Index.java)注释必要的字段。

# python - 如何绑定python内置函数？

> ID：10068203
> 
> 赞同：0
> 
> 时间：2012-04-09T02:09:20.047
> 
> 标签：python, function, built-in

我什至不知道这是否可能。

我想做类似的事情：

```
>>> foo = float
>>> x = foo('2')
>>> x
2 
```

但是当我尝试它时，我在 foo 中得到了一个类型对象：

```
>>> foo = float
>>> foo
<type 'int'> 
```

我想保存一个类似对象的结构，该对象在转换要从文件中读取的值时调用正确的函数。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:14:06.813

这当然是可能的；内置的标识符与任何其他标识符没有什么不同，并且没有理由不能将自己的标识符绑定到相同的对象。

如果您没有得到预期的结果，请检查并确保您没有意外地将标识符重新绑定到其他值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-09T02:15:25.237

你可以绑定它们。但这不是一个明智的做法，因为您用其他东西覆盖默认行为以及您依赖默认行为的功能会意外中断。**所以不要那样做！**

```
>>> foo = float
>>> bar = int
>>> foo('2')
2.0
>>> bar('2')
2
>>> type(foo)
<type 'type'>
>>> type(bar)
<type 'type'>
>>> 
```

# php - 重复检查 Sugar CRM 潜在客户导入的手机号码字段

> ID：10068204
> 
> 赞同：0
> 
> 时间：2012-04-09T02:09:35.100
> 
> 标签：php, sugarcrm

我有一个 CSV 文件，上面有一组记录。当我使用此 CSV 文件将潜在客户导入数据库时​​，它具有检查重复项的功能。但不幸的是，我无法在`mobile phone`现场应用重复检查。有什么方法可以配置它，以便我也可以在`mobile phone`现场检查重复项。我正在使用 Sugar CE 6.4 版本。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:08:45.123

您可以在这篇非常好的开发人员博客文章中找到全部答案：http: [//developers.sugarcrm.com/wordpress/2011/11/08/what%E2%80%99s-new-in-sugar-6-3-导入重复字段检查/](http://developers.sugarcrm.com/wordpress/2011/11/08/what%E2%80%99s-new-in-sugar-6-3-import-duplicate-fields-checking/)

# c# - GridView 渲染后清除选择参数

> ID：10068205
> 
> 赞同：0
> 
> 时间：2012-04-09T02:09:37.863
> 
> 标签：c#, gridview

在呈现 GridView（绑定到所述 SQL 数据源）后，如何清除 SQL 数据源的 SELECT 参数？

编辑：

我想在 SQL 数据源选择的数据显示在 GridView 中后清除 SQL 数据源的 SELECT 参数，但清除与 GridView 数据绑定和 SQL 数据源选定事件结果关联的**函数**中**的** 参数在“必须声明标量变量”错误中，表明执行 SELECT 查询时未定义参数。何时是清除 SELECT 参数的合适时间？

考虑以下代码，其中“Selected”与选择命令完成后触发的 SQL 数据源 Selected 事件相关联。这会导致“必须声明标量变量”错误。

```
static bool clearParams;

 protected void Selected(object sender, EventArgs e) {
            if (clearParams)
            {                
                SqlDataSource1.SelectParameters.Clear();                
                clearParams = false;
            }
        }

 protected void Button_Click(object sender, EventArgs e){

        SqlDataSource1.SelectCommand = [a dynamically generated select command];
        SqlDataSource1.SelectParameters.Add([various params are added]);

        clearParams = true; // clear params after this select command
        SqlDataSource1.Select(new DataSourceSelectArguments());

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:25:19.487

GridView 有一个**DataBound**事件，该事件在数据绑定后运行一次，**RowDataBound**事件针对每一行运行。所以你可以处理 DataBound 事件并且 t 就足够了

# iphone - 从 iPhone 应用程序的发布版本中排除 NSLog

> ID：10068208
> 
> 赞同：4
> 
> 时间：2012-04-09T02:10:18.800
> 
> 标签：iphone, objective-c, ios, xcode

有人可以讨论如何从应用程序的发布版本中免除 NSLog 吗？此外，是否在发布版本中留下评论是否重要？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T02:15:47.703

[使用类似于`DLog`wrap的宏`NSLog`，并在发布版本中将其关闭。](http://www.cimgf.com/2009/01/24/dropping-nslog-in-release-builds/)

```
#ifdef DEBUG
#    define DLog(...) NSLog(__VA_ARGS__)
#else
#    define DLog(...) /* */
#endif 
```

评论绝对不重要。它们只存在于您的源代码中，而不是编译后的输出。您无需将源代码提交给 Apple，只需将应用程序的构建副本提交给 Apple。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T03:07:41.500

我排除 NSLogs 的方法是将其添加到前缀文件中：

```
#define NSLog(...) 
```

这样，编译时，所有的 NSLog 都将被替换为空，就像一个空行。

至于评论，它们根本不会进入二进制文件，这些只适用于任何可以看到源代码的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T02:14:30.017

`DEBUG`较新版本的 Xcode 项目通常在构建调试版本时包含宏定义，因此最简单的方法是：

```
#ifdef DEBUG
NSLog(@"Safe and sound ...");
#endif 
```

但这并不重要，根据我的经验，有时您不希望控制台吐出一堆日志，您可能只在某些情况下需要它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T16:15:34.153

这不是已经 NSLog 的行为吗？我以为这就是重点……

# php - 用 PHP 上传多张图片 - 超过 5 张

> ID：10068217
> 
> 赞同：2
> 
> 时间：2012-04-09T02:12:05.163
> 
> 标签：php, file-upload

我有一个支持多个文件上传的图片上传功能，但不知何故它一次最多只能上传五张图片。

我真的需要它一次上传大约一百张图片。

这是处理上传的 PHP 文件：

```
session_start();
$path = $_SERVER['DOCUMENT_ROOT'];

// Include the Image class file and database for the database connection
include_once $path . "/includes/db.php";
include_once $path . "/classes/Image.php";
$folderName = $_SESSION['id'];

// Loop through the image array
for ($i = 0; $i < count($_FILES['upload']); $i++) {
    // Creating image location information
    $fileLink = "upload/$folderName/" . $_FILES['upload']['name'][$i];
    $fileType = $_FILES['upload']['type'][$i];
    $fileSize = ($_FILES['upload']['type'][$i]) / 1024;

    // See if a photo uploads to just upload not to a specific user
    $source = "$path/$fileLink";
    $insertImageQuery = "INSERT INTO Image (id, image_link, image_type, image_size) VALUES($folderName, '$fileLink', '$fileType', '$fileSize')";
    if ((move_uploaded_file($_FILES["upload"]["tmp_name"][$i], $source)) && mysql_query($insertImageQuery)) {

        // Create a new image object after a file moves to a location
        $curImage = new Image();
        $curImage -> scaleFunction($source);
        $curImage -> save($source);
    }
} 
```

这是 Image 类：

```
<?php
    $path = $_SERVER['DOCUMENT_ROOT'];
    require_once ($path . "/includes/constants.php");

    class Image {
        private $image;

        //Private Variable stores image type information
        private $image_type;
        // It creates a PHP picture "resource" from imagecreate
        // calls, and this allows for special function calls
        // like imagesy and imagesx.

    function load($filename) {
        $image_info = getimagesize($filename);
        $this -> image_type = $image_info[2];
        if ($this -> image_type == IMAGETYPE_JPEG) {
            //Create JPEG file from source
            $this -> image = imagecreatefromjpeg($filename);
        } elseif ($this -> image_type == IMAGETYPE_GIF) {
            //Create GIF file from source
            $this -> image = imagecreatefromgif($filename);
        } elseif ($this -> image_type == IMAGETYPE_PNG) {
            //Create PNG file from source
            $this -> image = imagecreatefrompng($filename);
        }
    }

    function getWidth() {
        // Use a built-in PHP function to get width in pixels
        return imagesx($this -> image);
    }

    function getHeight() {
        // Use a built-in PHP function to get height in pixels
        return imagesy($this -> image);
    }

    function resizeToHeight($height) {

        $ratio = $height / $this -> getHeight();
        $width = $this -> getWidth() * $ratio;
        $this -> resize($width, $height);
    }

    function resizeToWidth($width) {
        $ratio = $width / $this -> getWidth();
        $height = $this -> getHeight() * $ratio;
        $this -> resize($width, $height);
    }

    // Scale to a particular percentage, for future use
    function scale($scale) {
        $width = $this -> getWidth() * $scale / 100;
        $height = $this -> getheight() * $scale / 100;
        $this -> resize($width, $height);
    }

    function resize($width, $height) {
        $new_image = imagecreatetruecolor($width, $height);
        imagecopyresampled($new_image, $this -> image, 0, 0, 0, 0,
                           $width, $height, $this -> getWidth(),
                           $this -> getHeight());
        $this -> image = $new_image;
    }

    // Save a picture with a given quality (compression), with
    // 100 being the highest quality.
    // It is only used for JPEG files because the
    function save($filename, $image_type = IMAGETYPE_JPEG, $compression = 100) {

        if ($image_type == IMAGETYPE_JPEG) {
            imagejpeg($this -> image, $filename, $compression);
        } elseif ($image_type == IMAGETYPE_GIF) {

            imagegif($this -> image, $filename);
        } elseif ($image_type == IMAGETYPE_PNG) {

            imagepng($this -> image, $filename);
        }
    }

    function output($image_type = IMAGETYPE_JPEG) {

        if ($image_type == IMAGETYPE_JPEG) {

            imagejpeg($this -> image);
        } elseif ($image_type == IMAGETYPE_GIF) {

            imagegif($this -> image);
        } elseif ($image_type == IMAGETYPE_PNG) {

            imagepng($this -> image);
        }
    }

    function scaleFunction($filename) {
        $this -> load($filename);
        if ($this -> getHeight() > IMAGE_THRESHOLD) {
            $this -> resizeToHeight(IMAGE_THRESHOLD);
        }
        if ($this -> getWidth() > IMAGE_THRESHOLD) {
            $this -> resizeToWidth(IMAGE_THRESHOLD);
        }
    }

    } // End of the image class
?> 
```

好的，这就是我的 php.ini

```
max_execution_time = 120
max_input_time = 120
; Whether to allow HTTP file uploads.
file_uploads = On
; Maximum amount of memory a script may consume (50MB)
memory_limit = 50M
; Maximum size of POST data that PHP will accept.
post_max_size = 30M
; Maximum allowed size for uploaded files.
upload_max_filesize = 2M 
```

但它似乎仍然不适用于超过五个图像。我找到的文章说要重新启动服务器。但我的网站托管在[GoDaddy](https://en.wikipedia.org/wiki/GoDaddy)上。任何想法？

另外，这是我处理文件提交的表单

```
 <form action="/functions/processor.php" method="post" enctype="multipart/form-data">
        <input class="upload choose_file" type="file" name="upload[]" multiple/>
        <button class="upload" type="submit">
            Upload
        </button>
    </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:54:15.020

如果您有权访问 php.ini，请尝试设置 max_file_uploads 设置。GoDaddy 可能已经降低了它，您可以在 php.ini 中调整它

[最大文件上传](http://www.php.net/manual/en/ini.core.php#ini.max-file-uploads)

* * *

没关系，我想我明白了。

```
count($_FILES['upload']) 
```

是错的。做

```
count($_FILES['upload']['name']) 
```

`$_FILES['upload']`总是有五个元素：`name`、`tmp_name`、`size`、`type`和`error`。

# java - 在Java中，为什么某些变量首先需要初始化而其他变量只需要声明？

> ID：10068219
> 
> 赞同：3
> 
> 时间：2012-04-09T02:12:11.527
> 
> 标签：java, variables, initialization, declaration

如果我遗漏了一些关于 Java 何时需要初始化变量而不是简单声明的信息，我会尝试更深入地理解。在下面的代码中，变量 'row' 不需要被赋值来编译和运行，但是，变量 'column' 需要。

注意：该程序没有任何用处 - 它已被修剪为仅显示此问题所必需的内容，以免浪费人们宝贵的时间。

这是代码片段：

```
int row;      //row doesn't need initialization
int column=0; //column does need initialization
for (row=0; row<2; row++){
    for (column=0; column<2; column++){
    }
}
System.out.print("Col:" + column + " row:" + row); 
```

为什么`row`在顶部编译 w/o 初始化，但 Java 认为`column`“可能尚未初始化。”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T02:18:31.720

保证表达式`row = 0`（来自外部循环）被评估，因此`row`变量在使用之前总是会被初始化。`column`当且仅当外部循环至少迭代一次时，该变量才会被初始化。换句话说，**不**保证会评估表达式`column = 0`（来自内部循环） 。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T02:18:43.247

在 The`row`和`column`变量都在 中使用之前`System.out.println`，需要对它们进行初始化。 `row`在外循环中初始化，所以很好，但列在内循环中初始化，编译器不假设它会运行（即使它在实践中会运行）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T02:18:53.770

Java 编译器无法遵循您的代码。它看到它`column`在外部`for`循环的主体内被初始化，但无法确定该代码是否会运行。因此，不能确定您的变量在调用`print`.

另一方面，它知道外`for`循环的初始化语句无论如何都保证运行。所以它可以保证`row`会被初始化。**

# java - Java，布尔值可以从布尔值赋值，反之亦然？

> ID：10068222
> 
> 赞同：1
> 
> 时间：2012-04-09T02:12:29.500
> 
> 标签：java, reflection

当我运行这个代码片段时，双方都没有选择。

```
if (Boolean.class.isAssignableFrom(boolean.class)) {
     uLog.error("Boolean is => boolean");
}
if (boolean.class.isAssignableFrom(Boolean.class)) {
     uLog.error("boolean is <= Boolean");
} 
```

具体来说，我正在尝试使用反射测试参数类型：

```
Type[] pType = m.getGenericParameterTypes(); 
```

而且我无法弄清楚布尔参数的正确测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T02:15:58.980

`Boolean`（对象）和`boolean`（原语）不能相互转换/分配。但是，从 Java 1.5 开始，编译器会自动在两者之间装箱/拆箱。

当你这样做时：

```
boolean b =
Boolean bb = b;
b = bb; 
```

Java 编译器自动将其转换为：

```
boolean b=
Boolean bb = Boolean.valueOf(b);
b = bb.booleanValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T02:16:35.570

内置类型由`boolean`表示[`Boolean.TYPE`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Boolean.html#TYPE)。由于`boolean`不能被继承，因此您不需要`isAssignableFrom`：您可以简单地检查有问题的类型是否相等，`Boolean.TYPE`以查看参数的类型是否是内置的`boolean`。

# jquery - 如何在 XMPP 应用程序中获取 Web 浏览器的名称？

> ID：10068223
> 
> 赞同：1
> 
> 时间：2012-04-09T02:12:34.630
> 
> 标签：jquery, xmpp

我是 XMPP 的新手。目前我正在使用openfire和xmpp开发一个聊天应用程序。当用户登录服务器时，服务器必须获取用户使用的网络浏览器的信息。

有什么方法吗？我正在考虑使用 disco#info 和 disco#item 来做到这一点，但不知道该怎么做......

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:46:27.297

在 XMPP 中有多种方式来传达软件和版本。决定您要使用哪种方法的一种方法是问自己您想要这些信息的目的。

如果您使用软件版本来检测应用程序中的功能，您需要查看[XEP-0115: Entity Capabilities](http://xmpp.org/extensions/xep-0115.html)，它确实使用了[disco#info 和 disco#features](http://xmpp.org/extensions/xep-0030.html)。

如果您真的只希望软件的名称和版本作为报告和显示目的的字符串，您可以使用[XEP-0092: Software Version](http://xmpp.org/extensions/xep-0092.html)。在我编写的使用[Strophe.js](http://strophe.im/strophejs/)的应用程序中，我将以下代码与[BrowserDetect](http://www.quirksmode.org/js/detect.html)一起使用：

```
function version_handler(stanza)
{
    conn.send($iq({to: stanza.getAttribute("from"), type: "result", id: stanza.getAttribute("id") })
        .c('query', { xmlns: "jabber:iq:version" })
        .c('name').t(BrowserDetect.browser).up()
        .c('version').t(BrowserDetect.version.toString()).up()
        .c('os').t(BrowserDetect.OS).tree());
        return true;
} 
```

和：

```
conn.addHandler(version_handler, "jabber:iq:version", "iq", "get", null, null); 
```

# matlab - 从 3 个向量创建等高线图

> ID：10068233
> 
> 赞同：1
> 
> 时间：2012-04-09T02:14:35.083
> 
> 标签：matlab

我有一组三个向量：x、y 和 z，我想将它们变成等高线图。有没有人有我如何做到这一点的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:28:43.547

我认为文档解释得很好（并有示例） [http://www.mathworks.com/help/techdoc/ref/contour.html](http://www.mathworks.com/help/techdoc/ref/contour.html)

# java - 如何从循环外部访问嵌套循环中声明或初始化的数组或变量？

> ID：10068234
> 
> 赞同：1
> 
> 时间：2012-04-09T02:14:36.860
> 
> 标签：java, arrays, string, loops, nested

如何从循环外部访问嵌套循环中声明或初始化的数组或变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T02:15:49.423

你不能。您必须在循环外声明数组。起初这可能看起来很奇怪，但如果循环运行一次的条件从未满足怎么办？你怎么可能访问一个甚至从未创建过的数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:16:04.943

你不能。Java 使用块作用域，因此在任何块（例如循环）中声明的变量都不能从外部访问。您需要将它们分配给具有外部范围的东西。

# c++ - gnuplot c++ 接口通过管道 - 无法打开 wgnuplot

> ID：10068235
> 
> 赞同：2
> 
> 时间：2012-04-09T02:14:56.653
> 
> 标签：c++, gnuplot

我正在尝试从我的 c++ 程序中实时绘制我的图形。我已经安装了 gnuplot 4.6 并且能够打开 gnuplot.exe 并绘制图形。但是我无法通过管道打开应用程序。这是我使用的代码。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
  FILE* gp;
  char *path = "C:\Program Files\gnuplot\bin\wgnuplot";
#ifdef WIN32
  gp = _popen("gnuplot -persist", "w");
#else
  gp = _popen(path, "w");
#endif

  if (gp == NULL)
    return -1;

  fprintf(gp, "set isosample 100\n");
  fprintf(gp, "min=-1\n");
  fprintf(gp, "max=1\n");
  fprintf(gp, "pi=3.141592\n");
  fprintf(gp, "set hidden3d\n");
  fprintf(gp, "set pm3d\n");
  fprintf(gp, "set contour\n");
  fprintf(gp, "splot [min:max] [min:max] x*x+2*y*y-0.3*cos(3*pi*x)-0.4*cos(4*pi*y)+0.7\n");
  fprintf(gp, "pause -1\n");

  return 0;
} 
```

我已设置环境变量，但出现以下错误。c:program\ 不是内部或外部命令，也不是可运行的程序或批处理文件。

我尝试使用相同的路径运行 exe。但它没有打开。是不是因为cmd提示符中可以给出的字符串的最大长度..

请提出您宝贵的建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:50:19.420

反斜杠路径分隔符必须转义（或替换为斜杠）：

```
char *path = "C:\\Program Files\\gnuplot\\bin\\wgnuplot"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T10:02:53.980

而不是使用 char* 路径，您应该将 _popen 函数编写为

gp = _popen("E:\\myprograms\\ProgramFiles\\libraries\\Gnuplot\\bin\\gnuplot -persist", "w");

并且可能通过这种方式调用对应的数据数据文件

fprintf(gp,"splot \"C:\\\\Users\\\\username\\\\Documents\\\\Visual Studio 2012\\\\Projects\\\\laplace equation\\\\laplace.dat \"\n");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-11T15:05:15.220

您可以使用[gnuplot-cpp](https://github.com/orbitcowboy/gnuplot-cpp)来绘制图表。

这个小片段解决了您的问题（test1.cpp）：

```
#include "gnuplot_i.hpp" 

int main()
{
   Gnuplot gp;
   gp.cmd("set isosample 100\n");
   gp.cmd("min=-1\n");
   gp.cmd("max=1\n");
   gp.cmd("pi=3.141592\n");
   gp.cmd("set hidden3d\n");
   gp.cmd("set pm3d\n");
   gp.cmd("set contour\n");
   gp.cmd("splot [min:max] [min:max] x*x+2*y*y-0.3*cos(3*pi*x)-0.4*cos(4*pi*y)+0.7\n");
   gp.cmd("pause -1\n");

   std::cout << std::endl << "Press ENTER to continue..." << std::endl;
   std::cin.clear();
   std::cin.ignore(std::cin.rdbuf()->in_avail());
   std::cin.get();

   return 0;
} 
```

在 Linux 上编译并执行这个应用程序

```
g++ test1.cpp && ./a.out 
```

这给 [![结果](../Images/10c9ba5273fc7285b15aab545fffde47.png)](https://i.stack.imgur.com/Yy6tE.png)

# java - 使用线程测试 GAE 数据存储

> ID：10068239
> 
> 赞同：2
> 
> 时间：2012-04-09T02:15:54.410
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo, google-eclipse-plugin

我想用**多个线程**测试我的 JDO - DAO，以验证持久层是否知道同步。

这是我在 JUnit 测试中的一段代码

```
for(int i=0;i<10;i++) {
    Runnable runnable = new UserAccountLifeCycle(..);
    Thread thread = new Thread(runnable);
    thread.start();
} 
```

.. 其中 UserAccountLifeCycle 是一个扩展另一个业务层类并使用以下代码**实现“Runnable”的类：**

```
@Override
public void run() {
    CategoryBusiness catBusiness = new CategoryBusiness(..);
    Category cat1 = catBusiness.createEntity(..);
    catBusiness.createEntities(..);
    ContentBusiness conBusiness = new ContentBusiness(..);
    conBusiness.createEntities(..);
} 
```

如果我运行测试，我会得到：

> 线程“Thread-6”中的异常 java.lang.NullPointerException：没有为此线程注册 API 环境。在 com.google.appengine.api.datastore.DatastoreApiHelper.getCurrentAppId(DatastoreApiHelper.java:86) 在 com.google.appengine.api.datastore.DatastoreAttributes.(DatastoreAttributes.java:28) 在 com.google.appengine.api。 datastore.AsyncDatastoreServiceImpl.getDatastoreAttributes(AsyncDatastoreServiceImpl.java:952) 在 com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.getDatastoreType(AsyncDatastoreServiceImpl.java:944) 在 com.google.appengine.api.datastore.AsyncDatastoreServiceImpl.get(AsyncDatastoreServiceImpl. java:267) 在 com.google.appengine.api.datastore.DatastoreServiceImpl$1.runInternal(DatastoreServiceImpl.java:78) 在 com.google.appengine.api.datastore。

如果我运行此代码有效：

```
for(int i=0;i<10;i++) {
    UserAccountLifeCycle lifeCycle = new UserAccountLifeCycle(i,testUser.getKey());
    lifeCycle.run();
} 
```

（我知道它不会将该方法作为线程运行，但它旨在证明 JUnit 测试已通过[GAE 本地测试](https://developers.google.com/appengine/docs/java/tools/localunittesting)正确配置）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T04:37:20.120

尽管 App Engine Java 运行时支持线程，但 dev_appserver 不支持。因此，在本地开发环境中测试并发性的结果不能代表生产环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:30:29.670

您可以在新线程中尝试此处建议的解决方案：

[将数据预加载到 GAE 开发服务器数据存储中的验收测试](https://stackoverflow.com/questions/4767918/acceptance-testing-preloading-of-data-into-gae-dev-server-datastore)

# mysql - mysql - 计算查询中两次之间的差异

> ID：10068244
> 
> 赞同：4
> 
> 时间：2012-04-09T02:16:45.657
> 
> 标签：mysql, time

我知道我可以使用 PHP 来做到这一点，但想知道是否有一种方法可以仅使用查询来计算两次之间的差异？我尝试了下面的查询，但它为时差返回 NULL。

我表中的数据存储为：

```
| created    | changed    |
+------------+------------+
| 1333643004 | 1333643133 | 
```

我想找出一种返回的方法：

```
| 2012-04-05 09:23:24 | 2012-04-05 09:25:33 |     00:02:09 | 
```

我试过：

```
SELECT 
    FROM_UNIXTIME(created) AS created, 
    FROM_UNIXTIME(changed) AS changed, 
    TIMEDIFF ( changed, created ) / 60 AS timediff 
FROM content
    WHERE id = 45; 
```

这产生了：

```
| 2012-04-05 09:23:24 | 2012-04-05 09:25:33 | NULL | 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T02:20:04.637

返回的结果`TIMEDIFF()`被限制在 TIME 值允许的范围内。或者，您可以使用任何一个函数 `TIMESTAMPDIFF()`和`UNIX_TIMESTAMP()`，它们都返回整数。

我会调用`UNIX_TIMESTAMP()`两列（返回整数）然后减去它们。这将为您提供一个整数，您可以在查询或 PHP 中对其进行转换。

```
SELECT 
    UNIX_TIMESTAMP(created) AS created, 
    UNIX_TIMESTAMP(changed) AS changed, 
    changed-created AS difference
FROM content
    WHERE id = 45; 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

# python - 传递目录路径来创建字典而不是列表。

> ID：10068246
> 
> 赞同：0
> 
> 时间：2012-04-09T02:17:14.237
> 
> 标签：python, regex, parsing, email, word-count

本质上，我想做一个临时的超级字数统计，但我不确定如何从目录路径（作为参数传入）创建一个 dict 对象，而不是一个列表来做我需要做的事情。

虽然我想创建一个字典对象，但我还想使用电子邮件模块将作为文件名的键的 ASCII 值格式化为电子邮件或消息对象。然后我想使用有效负载提取正文并以这种方式解析它。我在下面有一些例子：

```
mylist=os.listdir(sys.stdin)
for emails in mylist:
    email_str = emails.open()
    #uncertain if this will get all emails and their content or not
    #all emails are supposed to have a unique identifier, they are essentially still just ascii
    file_dict = {emails : email_str}
#file_dict = dict(zip(mylist, mylist))
for emails in file_dict[emails]:
    msg = email.message_from_string(email_str)
    body = msg.get_payload(decode=True)
    #I'm not entirely sure how message objects and sub objects work, but I want the header to 
    #signature and I'm not sure about the type of emails as far as header style
    #pretend I have a parsing method here that implements the word count and prints it as a dict:
    body.parse(regex) 
```

除了解析它们的值之外，我并不完全需要这些键，因此我可以考虑使用 message_from_file 代替。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:49:38.180

您可以使用任何字符串作为文件路径，甚至可以使用相对文件路径。如果您只是想为自己格式化数据，您可以遍历您的电子邮件列表并存储输出。

```
for emailpath in list_of_email_paths
    emailpath = 'someemailpath'
    # open path -- only works if path exists.
    f = open(emailpath)
    file_dict[emailpath] = f.read()
    f.close() 
```

使用打开的文件对象作为键不是一个好主意（如果可能的话，只需读取它们并将字符串存储为标识符。阅读文档以[`os.path`](http://docs.python.org/library/os.html)获取更多信息（顺便说一句 - 您必须使用 导入`import os`，而不是`import os.path`）

除此之外，任何不可变对象或引用都可以是字典键，因此将路径存储为键没有问题。Python不关心路径来自哪里，dict也不关心它的键是否是路径；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:41:05.520

不幸的是，因为您要求一次显示这么多信息，所以我的回答必须更笼统一些才能概述它们。即使您说您的示例都是纯伪代码，但它完全错误，以至于很难知道您理解什么以及您不了解哪些部分，因此我将涵盖您在评论中所说的所有基础。

**如何读取文件**

您在滥用[`os.listdir`](http://docs.python.org/library/os#os.listdir)，因为它采用字符串路径，而不是文件类型对象。但就个人而言，我喜欢使用[`glob`](http://docs.python.org/library/glob). 它节省了几个步骤，让您获得完整路径，并按模式过滤。让我们假设您所有的电子邮件文件都以`.mail`

```
import sys
import glob

first_path = sys.argv[1]
pattern = "%s/*.mail" % first_path
for mail in glob.iglob(pattern):
    # with context will close the file automatically
    with open(main) as f:
        data = f.read()
        # do something with data here 
```

**解析电子邮件格式**

使用该[`email`](http://docs.python.org/library/email)模块的示例很广泛，所以除了给您一个查看链接之外，我在这里展示它们没有任何意义：http: [//docs.python.org/library/email-examples.html](http://docs.python.org/library/email-examples.html)
如果文件实际上是电子邮件，那么您应该能够使用此模块来解析它们并阅读每封邮件的消息正文

**使用字典**

在这种情况下使用字典与 python dict 的任何一般情况没有什么不同。您将从创建一个空字典开始：

```
file_dict = {} 
```

在您的目录列表的每个循环中，您将始终拥有字符串路径名，您希望将其作为您的密钥。无论您是使用第一个示例读取文件原始数据，还是使用电子邮件模块获取消息正文，无论哪种方式，您最终都会得到一些文本数据块。

```
for mail in glob.iglob(pattern):
    ...
    # do stuff to get the text data from the file
    data = some_approach_to_reading_file()
    ...
    file_dict[mail] = data 
```

现在你有一个`file_dict`键是原始文件的路径，值是读取的数据。

**概括**

有了这三个部分，您应该有大量的一般信息可以将它们放在一起。

# winforms - 代码优先 本地无数据加载

> ID：10068247
> 
> 赞同：0
> 
> 时间：2012-04-09T02:17:21.980
> 
> 标签：winforms, ef-code-first, sql-server-ce, code-first

我有一个 EntityFrameWork 4.3.1 代码优先生成的 SqlCe.4.0 数据库（更新的 nu-get 包）。

System.Data.Entity.Database.SetInitializer 是通过 sampledata 设置的，并且数据库生成正确，但是当我尝试从数据库中读取以在 DataGrid 中显示时，没有加载任何数据。这意味着：在调试中 DbSet.Local.Count 始终为零，但我可以迭代 DbSet 项目，所有项目都显示在 debugconsole 中。

怎么了？

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:25:30.213

DbSet.Local 中的内容是 DbContext 正在跟踪的内容 - 因此，如果您查询数据库并获取一些实体，那么它们将在 DbSet.Local 中可见。看看 Julie Lerman 的这篇文章[http://msdn.microsoft.com/en-us/magazine/hh781018.aspx](http://msdn.microsoft.com/en-us/magazine/hh781018.aspx)有一个关于 DbSet.Local 的部分。

# entity-framework-4 - 生成唯一的序列号和交易 - 使用实体框架 4

> ID：10068248
> 
> 赞同：0
> 
> 时间：2012-04-09T02:18:07.237
> 
> 标签：entity-framework-4, sql-server-2008-r2

我有一个 1 行 1 列的文档序列表。它所做的只是有一个序列号。每次我们需要创建一个新文档时，我们都会调用一个存储过程，它将该表中的现有序列号更新 1，并读取该序列号并将其用于文档表中的 id。

我的问题是：如果多个请求尝试调用这个存储过程来更新序列号并返回它，它是否有可能将相同的号码提供给多个调用者？我现在有另一个存储过程，它在事务中调用这个序列号生成器 sp，然后使用获得的 id 创建一个文档。我想知道我是否必须只使用代码中的实体框架而不使用存储过程，这可能吗？Entity framework 4 是否会单独支持事务，以便一次只有一个进程调用 seq# updater sp？

# asp.net - 我如何使用 Gdi print 在客户端打印快递文件？

> ID：10068251
> 
> 赞同：0
> 
> 时间：2012-04-09T02:18:44.120
> 
> 标签：asp.net, gdi

在我们公司，我收到一个请求，在网站上打印dhl和fedex快递文件，我写了一个类使用gdi打印快递文件，功能选择打印机在服务器上打印文件。现在我们有一个分支也需要这个功能，但是，我怎样才能让他们在本地选择打印机呢？

gdi asp.net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:20:23.393

这是根本不可能的。
服务器无权访问客户端计算机。

相反，您需要提供一个 HTML 页面（或 PDF）并要求用户打印它。

# c - 使用 Tab 移动到主应用程序窗口中的另一个编辑控件

> ID：10068253
> 
> 赞同：2
> 
> 时间：2012-04-09T02:18:55.050
> 
> 标签：c, windows, winapi, user-interface, win32gui

您好，我正在阅读有关我在 SO 上的问题的其他一些帖子，但尚未得到完全回答（如[this](https://stackoverflow.com/questions/8644543/dialog-box-in-c-not-receiving-certain-keystrokes)）。我现在有同样的问题。我在 C/Win32 上有***一个主窗口***，下面的表单中有许多编辑控件。请注意，这些按钮仅适用于我的主应用程序窗口...

```
hEdit = CreateWindowEx(WS_EX_CLIENTEDGE, "EDIT", "1",
            WS_GROUP | WS_VISIBLE | ES_NUMBER | ES_RIGHT,
            180, 94, 28, 20, hwnd, (HMENU)IDC_ATTRIBUTE_FITNESS, GetModuleHandle(NULL), NULL); 
```

我想使用制表键从一个移动到另一个。你可以想象我做不到，我已经尽我所能。我尝试使用任何组合**WS_EX_CLIENTEDGE**和**WS_GROUP**但没有任何效果。每次在我的一个编辑控件中按 Tab 键时，我都会听到来自 Windows 的“哔”声。任何人都可以提供有关这方面的有见地的信息，或者在线提供一些教程或演示来掌握它？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:25:23.373

为您的控件提供`WS_TABSTOP`样式，然后`IsDialogMessage`在您的消息循环中使用。另请参阅 Raymond Chen 的“[使用 TAB 键在非对话框中导航](http://blogs.msdn.com/b/oldnewthing/archive/2003/10/21/55384.aspx)”文章了解更多详细信息和示例代码。

# java - 为什么我的接口类型对象不会执行未在接口中声明的方法？

> ID：10068263
> 
> 赞同：0
> 
> 时间：2012-04-09T02:20:41.210
> 
> 标签：java, class, interface, methods, implements

这是我遇到问题的代码：

界面：

```
public interface anInterface {

    void printSomething();

} 
```

实现接口的类：

```
public class aClass implements anInterface {

    public aClass() {

    }

    public void printSomethingElse() {
         System.out.println("Something else");
    }

    @Override
    public void printSomething() {
        System.out.println("Something");
    }
} 
```

主要功能：

```
public static void main(String[] args) {
     anInterface object = new aClass();
     object.printSomething();   // works fine
     object.printSomethingElse();     // error
} 
```

错误：找不到符号。符号：方法 printSomethingElse();

谁能告诉我为什么这行不通？

在 Java 中，当您有一个实现某个接口的类时，是否可以向该类添加方法，即使这些方法尚未在接口中声明？还是我必须声明我将在界面中使用的所有方法？

我也在 C# 中尝试过，但也不起作用。

我究竟做错了什么？

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T02:22:32.560

您必须在接口中声明在这种情况下要使用的所有方法。该界面对 printSomethingElse 一无所知，这就是您收到上述错误的原因。

接口的目的是让您可以在多个类似的实现类中拥有一个通用的函数列表。例如，`List`一个接口包含一个由不同类以各种方式实现的函数的“列表”，例如，`LinkedList`它使用双向链接列表来提供功能，`List`以及`ArrayList`使用动态扩展数组来实现。

# build - Sublime Text 2 通过简单的批处理文件构建

> ID：10068264
> 
> 赞同：12
> 
> 时间：2012-04-09T02:20:45.407
> 
> 标签：build, sublimetext2

我一直在玩 ST2，它看起来是一个非常可爱的编辑器。不幸的是，它的文档很糟糕。

而且我很好。所以这是我的问题。

我在一个目录中有五个文件，我通常通过 .bat 文件构建这些文件

```
ifort file1.f90 file2.f90 file3.f90 ... 
```

如何通过快捷方式从 ST2 在 Windows cmd 上定义和执行这一行（考虑到 PATH 等环境变量）并查看输出？在这个阶段，ST2 是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-11T19:13:01.690

我刚刚做了一个这样的新版本：

```
{
    "cmd": ["$file"],
    "selector": "source.dosbatch"
} 
```

然后你会将你的`ifort ...`字符串放在一个 .bat 文件中并“构建”它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-13T06:46:05.607

以下是在构建过程中运行批处理文件的分步方法：

在 Sublime Text 2 中，转到工具 -> 构建系统 -> 新构建系统

您将看到一个新的文本文件，其中包含以下代码：

```
{
"cmd": ["make"]
} 
```

现在将“make”更改为批处理文件的确切路径，使其看起来像这样：

```
{
"cmd": ["D:\\xampp\\htdocs\\myproject\\dostuff.bat"]
} 
```

请注意，您必须对 Windows 路径使用双反斜杠。

然后将此文件作为 myproject.sublime-build 保存在它要求您保存它的默认目录中（应该是 $HOME_DIR/AppData/Roaming/Sublime Text 2/Packages/User）。

然后在您的项目中返回工具 -> 构建系统并选择与您刚刚创建的文件同名的构建系统（在本例中为“myproject”）。

按 ctrl + b 或转到工具 -> 构建，您的批处理文件应该运行并且输出将出现在 ST2 控制台中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-15T16:55:36.037

这对我有用，并且适用于带有*`whitespaces`*.

我已经修复了我在此处的 ST 论坛上发布的错误，[此处](https://forum.sublimetext.com/t/building-a-batch-file-in-the-cmd-console-problem/48946)包括该修复。

* * *

将此粘贴到您的**`Batch.sublime-build`**文件中。这将运行 cmd.exe 并在其本机控制台中运行代码。这将接受您输入的批处理文件。

```
{
  "file_patterns": ["*.bat", "*.cmd"],
  "selector": "source.batch",
  // This runs the batch file in the cmd window.
  "shell_cmd": "start \"${file_name}\" call \"${file}\""
} 
```

* * *

这是一个可以保存为的构建，**`BatchStConsole.sublime-build`** 它将在 Sublime Texts 的控制台中运行代码。这将不接受您输入的批处理文件。但对于调试仍然很有用，因为它传递了像本机 CLI 这样的任何参数，但没有交互。

```
{
    "file_patterns": ["*.bat", "*.cmd"],
    "selector": "source.Batch",
    // This outputs to Sublime Texts' console
    "shell_cmd": "\"${file}\""
} 
```

* * *

此外，您可以在新文件`...\Data\Packages\User\Batch File.sublime-settings`中放置此代码并保存。当您将自动构建作为构建检测时，这将构建这些文件类型。

```
{ "extensions": [ "bat", "cmd" ] } 
```

* * *

**相关帮助：**

[https://ss64.com/nt/start.html](https://ss64.com/nt/start.html)

[https://docs.sublimetext.io/guide/usage/build-systems.html](https://docs.sublimetext.io/guide/usage/build-systems.html)

[https://www.sublimetext.com/docs/3/build_systems.html](https://www.sublimetext.com/docs/3/build_systems.html)

# linux - SVN 未提交，显示文件不受控制

> ID：10068267
> 
> 赞同：3
> 
> 时间：2012-04-09T02:21:03.203
> 
> 标签：linux, svn, centos, commit

在这里我们可以看到SVN没有添加需要添加的文件，也没有提交：

```
$ ls -la forum
drwxr-xr-x  6 dotan.cohen coders   4096 Apr  9 02:09 before
$ svn status
?       tags
?       forum/before
$ svn add forum/before --force
$ svn status
?       tags
?       forum/before
$ svn commit -m "Some Comment"
$ 
```

第一个命令 ( `ls -la`) 向我们展示了它`forum/before/`实际上是一个目录。下一个命令`svn status`显示该目录不受版本控制。下一行 ( `svn add`) 显示了将目录添加到版本控制的尝试，它之后的行显示该目录*仍然*不受版本控制。最后一行显示 an`svn commit`什么都不做，即没有提交。

我可以确认有问题的目录没有添加到存储库中。为什么会这样，我该如何解决？这是在 CentOS 5 上。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:07:36.410

如果您再次遇到这种情况，我建议您使用`svn switch`而不是删除 .svn 目录。这将重新指向所有 URL。一般语法是`switch URL[@PEGREV] [PATH]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:21:18.987

问题是有问题的目录是从版本控制下的另一个目录复制的。删除所有`.svn`子目录解决了这个问题。我使用以下命令删除它们（从内部`forum/before/`）：

```
rm -rf `find . -name .svn` 
```

# linux - 我可以从 linux 上的函数地址获取模块句柄吗？

> ID：10068269
> 
> 赞同：1
> 
> 时间：2012-04-09T02:21:33.733
> 
> 标签：linux, ld

与 Win32 相同：

```
GetModuleHandleEx(GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS, (LPCTSTR)(void*)(myFunc), &h); 
```

[http://www.kernel.org/doc/man-pages/online/pages/man3/dlsym.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/dlsym.3.html)没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:15:50.557

使用`dladdr`. 文档[在这里](http://linux.die.net/man/3/dladdr)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:36:26.743

*本身*不是，不；如果符号被编译而不是通过`dlopen()`/访问`dlsym()`，则没有要返回的句柄。（句柄抽象的存在只是为了`dlsym()`对它从何处加载符号进行精细控制；除了通过链接器脚本外，对原始链接没有这种控制。）在事件的正常过程中，对象只是简单地`open()`编辑和`mmap()`编辑，其他细节隐藏在`ld.so`其中，只能通过`RTLD_DEFAULT`和`RTLD_NEXT`参数间接访问`dlsym()`。如果您正在使用`dlopen()`，则需要跟踪您的句柄。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T02:48:28.357

我知道的唯一方法是解析`/proc/self/maps`（和/或也许`smaps`）的内容，然后使用符号地址从映射的边界`.so`（开始及其大小）计算函数所在的映射模块。

注意：`/proc/self`是当前进程（带有 ID `<pid>`）元信息的符号链接（在 Linux 上），即`/proc/<pid>`.

您可以使用这些信息的一些编程接口。

编辑：啊，`dladdr()`那个界面也是如此。

# java - 检查字符串是否不包含任何符号而不添加一堆检查（java）

> ID：10068270
> 
> 赞同：1
> 
> 时间：2012-04-09T02:21:52.490
> 
> 标签：java

标题说什么。我想知道 JDK 中是否已经有一些东西，如果字符串包含任何符号（如 *、#、@、& 等），我可以返回 false，而无需为每个符号添加一个包含检查。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T02:25:33.363

您可以将通话中的字符列入白名单[`String.matches()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)：

```
!string.matches("[^A-Za-z]")  // only alpha characters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:26:05.297

我认为您正在寻找正则表达式，如果您不知道它们，那将非常复杂，但是一种快速执行您想要的方法是： `"somestring".matches("\\*#@&")`

# iphone - 延迟 NSFetchedResultsController 委托方法

> ID：10068278
> 
> 赞同：2
> 
> 时间：2012-04-09T02:23:31.890
> 
> 标签：iphone, objective-c, ios, core-data

我有一个`UITableView`基于`NSFetchedResultsController`. 为了在表格中插入新行，我打开了一个模态视图控制器，然后我点击了保存按钮，该按钮关闭了模态视图并导致我的`NSFetchedResultsController`委托方法（willChangeContent、didChangeObject`等）触发，从而动画插入一个新的细胞。一切都很好，但我希望用户见证这个动画，当模态视图消失时，动画已经完成。

如何延迟此动画直到模态视图完全消失，以便用户可以看到动画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:12:56.327

无论有没有 NSFetchedResults 控制器，这是一个很好的问题——您有一个正在观察模型的表 vc，并且您希望用户在从另一个视图控制器弹出或关闭后看到动画变化。

可能有更好的方法，但我最近在类似情况下所做的事情是让表 vc 根据来自子公司（推送或模态呈现）vc 的委托消息自行更新模型。

因此，在表 vc 中：

```
AddingVC *addingVC = [[AddingVC alloc] initWithDelegate:self];
[self presentModalViewController:addingVC animated:YES];

// adding to the model will happen in this vc, based on a delegate message

- (void)addingVcDidCreateAnObjectToAdd:(id)objectToAdd {

    // add to your model here
} 
```

添加 vc 可以做到这一点（我对此并不完全感到自豪，但它确实有效）......

```
- (void)thingIsReadyToAdd {

    SEL selector = @selector(addingVcDidCreateAnObjectToAdd:);
    [self.delegate performSelector:selector withObject:objectToAdd afterDelay:1.5];
    // 1.5 is on the long side, since the vc transition is about 0.5, so 1.0 is okay
} 
```

在我的例子中，我使用了一个更传统的委托协议，将addingVC作为第一个参数传递，但是这样做有延迟需要一个冗长的NSInvocation，所以我在这里跳过它。+1 也解决了困扰我的问题。我很好奇其他人的解决方案。

# php - Javascript/PHP 数组

> ID：10068279
> 
> 赞同：0
> 
> 时间：2012-04-09T02:24:00.600
> 
> 标签：php, javascript, arrays

我编辑了我的代码，见下文：

我正在尝试在途中做一个数组。$distance 工作正常。

现在“ete”为每条腿给出这个结果：NaN Hrs。南分钟。

我用 1500 替换了距离，它吐出了一个结果。这让我相信这个 [new Array();] 是问题所在。

我做了更多的挖掘 var distance = new Array(""); 给我这个结果：431,910,746,923 这是否意味着内爆不起作用？

```
<script type="text/javascript">
var distance = new Array(<?=implode(', ', $distance)?>);
function Aircraft() {
    var mylist = document.getElementById("myList");
    for(var i = 0; i < distance.length; i++) {
        var hour = (Math.floor(1500 / mylist.options[mylist.selectedIndex].value));
        var minute = Math.round((Math.round(1500 / mylist.options[mylist.selectedIndex].value) - hour) * 60);
        document.getElementById("ete" + i).innerHTML = hour + " Hrs. " + minute + " Mins.";
    }
    }
</script> 
```

我们越来越近了，我想...

```
 $distance = array();
 for($i = 0, $size = sizeof($Row1); $i < ($size - 1); ++$i){

 $distance[$i] = ROUND((ACOS(SIN($Row2[$i][4] * PI() / 180) * SIN($Row1[$i][4] * PI() / 180) + COS($Row2[$i][4] * PI() / 180) * COS($Row1[$i][4] * PI() / 180) * COS(($Row2[$i][5] - $Row1[$i][5]) * PI() / 180)) * 180 / PI()) * 60 );

 echo "<td width=100>" . $distance[$i] . " NM</td>";
 echo "<td width=100><span id=\"ete" . $i . "\"></span></td>";
 }

 ?>
 <script type="text/javascript">
var distance = new Array(<?=implode(', ', $distance)?>);
function Aircraft() {
    var mylist = document.getElementById("myList");
    for(var i = 0; i < distance.length; i++) {
        var hour = (Math.floor(distance / mylist.options[mylist.selectedIndex].value));
        var minute = Math.round((Math.round(distance / mylist.options[mylist.selectedIndex].value) - hour) * 60);
        document.getElementById("ete" + i).innerHTML = hour + " Hrs. " + minute + " Mins.";
    }
     } 
```

这是使用 Aircraft() 的地方：

```
 <select id=\"myList\" style=\"width:150px;\" onchange=\"Aircraft()\">
 <option>Select Aircraft</option>
 <option value=\"300\">King Air 350</option>
 <option value=\"450\">G-V</option>  
 <option value=\"470\">GLEX</option>
 <option value=\"350\">Astra</option>
 </select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:42:23.857

不是您直接问题的答案，但您不需要在 PHP 中编写这样的代码：

```
for($i = 0, $size = sizeof($Row1); $i < $size; ++$i){
if ($i < ($size-1)){

    $Row1[$i]['a']...
    $Row2[$i]['b']...
}
} 
```

您可以使用`foreach()`迭代数组：

```
foreach ($Row1 as $k => $r1){
    $r2 = $Row2[$k];

    $r1['a']...
    $r2['a']...
} 
```

除此之外，由于几个原因，您的代码无法执行您想要的操作。假设循环实际上不止一次运行，您正在创建多个函数，所有函数都被调用`Aircraft()`- 函数名称必须是唯一的。假设您实际上正在运行该函数，那么它将只运行该函数的最新定义版本（即最后一个）。你可能想要这样的东西：

```
<table>
<?
    # output table cells we will populate
    foreach (....){
        echo "<tr>";
        echo "<td id=\"$id\"></td>";
        echo "</tr>";
    }
?>
</table>

<script>
function Aircraft(distance, id){
    body of javascript here,
    inserts results into element with ID of `id`
}

<?
    # now output calls to the JS function that will produce the output
    foreach (....){

        $distance = ...;
        echo "Aircraft($distance, $id);\n";
    }
?>
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:24:58.153

如果我理解正确，您想根据所选飞机计算不同距离的多个时间估计值。

为此，可以存储一个带有距离的 JavaScript 数组。然后，该`Aircraft()`函数只需要遍历填充新 ETA 的不同跨度。

尝试用以下代码替换第一块代码：

```
<?php

$distance = array();
for ($i = 0, $size = sizeof($Row1); $i < ($size - 1); ++$i) {
    $distance[$i] = ROUND((ACOS(SIN($Row2[$i][4] * PI() / 180) * SIN($Row1[$i][4] * PI() / 180) + COS($Row2[$i][4] * PI() / 180) * COS($Row1[$i][4] * PI() / 180) * COS(($Row2[$i][5] - $Row1[$i][5]) * PI() / 180)) * 180 / PI()) * 60 );

    echo "<td width=100>" . $distance[$i] . " NM</td>";
    echo "<td width=100><span id=\"ete" . $i . "\"></span></td>";
}

?>
<script type="text/javascript">
    var distances = new Array("<?=implode('", "', $distance)?>");
    function Aircraft() {
        var mylist = document.getElementById("myList");
        for(var i = 0; i < distances.length; i++) {
            var hour = (Math.floor(distance / mylist.options[mylist.selectedIndex].value));
            var minute = Math.round((Math.round(distance / mylist.options[mylist.selectedIndex].value) - hour) * 60);
            document.getElementById("ete" + i).innerHTML = hour + " Hrs. " + minute + " Mins.";
        }
    }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T13:57:33.910

解决了它：

```
<script type="text/javascript">
var distance = new Array("<?php echo implode('","',$distance)?>");
function Aircraft() {
    var mylist = document.getElementById("myList");
    for(var i = 0; i < distance.length; i++) {
        var hour = (Math.floor(distance[i] /     mylist.options[mylist.selectedIndex].value));
        var minute = Math.round(((distance[i] / mylist.options[mylist.selectedIndex].value) - hour) * 60);
        document.getElementById("ete" + i).innerHTML = hour + " Hrs. " + minute + " Mins.";
    }
    }
</script> 
```

# python - 如何检查python字典键是否具有相同的值并提取这些值

> ID：10068280
> 
> 赞同：0
> 
> 时间：2012-04-09T02:24:30.117
> 
> 标签：python, dictionary

我想知道如何在所有键出现的字典中提取值。

例如，如果我有以下字典：

```
d = {'a': [num_1, num_2], 'b': [num_1],
                'c': [num_1,num_2, num_3]} 
```

我想提取所有键都存在的值，在本例中为 num_1。

我怎样才能做到这一点？

**编辑：**我将如何将公共值存储在列表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:30:42.793

做这样的事情：

```
d = {'a': ['num_1', 'num_2'], 'b': ['num_1'], 'c': ['num_1', 'num_2', 'num_3']}

vals = d.values()
uniq = set(vals[0])

for lst in vals[1:]:
    uniq.intersection_update(lst)

# now `uniq` holds the intersected values:
print uniq
> set(['num_1'])

# to get the result as a list:
uniq = list(uniq)
print uniq
> ['num_1'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:29:32.813

将所有值转换为集合，然后取它们的交集：

```
set.intersection(*(set(v) for v in d.values())) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:34:35.827

我奇怪的工作方式

```
vals = [i for v in d.values() for i in v]
set([i for i in vals if vals.count(i) == len(d.values())]) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-05-14T16:36:12.897

列表（集合（d['a']）& 集合（d['c']）& 集合（d['b']））

这应该有帮助

# objective-c - 如何填充图形以使线条不会被边缘剪裁？

> ID：10068283
> 
> 赞同：1
> 
> 时间：2012-04-09T02:25:31.507
> 
> 标签：objective-c, macos, cocoa, core-graphics, core-plot

我已经很好地环顾了这个问题的答案，并在我的代码中尝试了几种解决方案，到目前为止还没有找到。

我有一个正在绘制的折线图，一个`CPTScatterPlot`图表，并且我已经正确地添加了点。我想将这些点中的每一个显示为直径约 3-5 像素的点，并由约 3 像素宽的线连接。这一切都很好。

问题是，当绘图是沿着图形托管视图的一条边缘的直线时，线和点会被剪裁并且看起来根本不正确。

这是它应该是什么样子的模型：
![这就是它应该的样子](../Images/7c2bd567f3dec48075b1d1c9c15bda69.png)

这是我目前大部分时间看到的效果：
![在此处输入图像描述](../Images/552f26fc48109c1d1b306698620ef226.png)

我为小图像道歉，但希望您能看到在第二张中，线和点仅呈现到图形视图中的几个像素，而不是完全在视图中。在第二个中，前 75% 的数据实际上是 y=1，然后下降到 y=0。

**如何将图形组件的绘图插入几个像素以防止剪切任何形状？**

至今：

*   我已经尝试在图表上设置填充，但这只是缩小了它绘制的区域，我想为我不使用的标题腾出空间。

*   我还尝试添加基于我在后台更新的数据重新计算的最小/最大 x/y 范围设置。这有效，但显然只有当我添加到这些值的数量相对于将用于我输入的数据值的绘图比例是正确的时。

*   我在 Mac OS 上使用 NSView（实际上是 CPTGraphHostingView）所以`clipsToBounds`不可用。另外，我在 CPTXYGraph 上进行了尝试`masksToBounds`。`masksToBorder`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:49:08.190

我认为处理这个问题的最简单方法是简单地扩大你的范围。CPTPlotRange 中有一种方法可以很容易地将给定范围扩展固定百分比（例如 1%）。我认为主要的测试应用程序示例甚至显示了这一点。

另一种选择是关闭 CPTPlotArea (plotArea) 和可能的 CPTPlotAreaFrame (plotAreaFrame) 上的 maskToBounds 和/或 maskToBorder。您可以通过图形的属性访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T16:00:30.237

这可能会有所帮助..

图形本身（不是绘图区域框架）的默认填充是每边 20 像素。你也可以改变它。

```
graph.paddingLeft = 0.0;
graph.paddingTop = 0.0;
graph.paddingRight = 0.0;
graph.paddingBottom = 0.0; 
```

# javascript - Javascript：数组作为对象属性（& ZeroClipboard）

> ID：10068287
> 
> 赞同：0
> 
> 时间：2012-04-09T02:26:06.590
> 
> 标签：javascript, arrays, object, properties

好吧，我承认一开始我有点过头了。

我有一些代码工作正常。我创建了一个全局数组变量`z1=[];`，然后使用具有以下代码的唯一引用键 r 将 ZeroClipboard 对象存储在数组中。（这本身可能是邪恶的，但它确实有效。）

```
function zc(r){
    var a="RP"+r,b="RDC"+r,c="RP"+r;
    z1[r]=new ZeroClipboard.Client();
    z1[r].addEventListener('mouseDown',function(client){z1[r].setText(document.getElementById(c).innerHTML);});
    z1[r].addEventListener('complete',function(client,text){$('#'+a).aH("#D6EBFF",1000);});
    z1[r].glue(a,b);} 
```

我最近意识到将 z1 作为全局变量是多么邪恶，所以我正在尝试改正我的方式并创建一个对象来绑定整个业务。但它不工作...

我做了以下事情：

```
var zc={
    z1: [],

    add:function(r){
        var a="RP"+r,b="RDC"+r,c="RP"+r;
        z1[r]=new ZeroClipboard.Client();
        z1[r].addEventListener('mouseDown',function(client){z1[r].setText(document.getElementById(c).innerHTML);});
        z1[r].addEventListener('complete',function(client,text){$('#'+a).aH("#D6EBFF",1000);});
        z1[r].glue(a,b);}
} 
```

我现在打电话`zc.add(r)`而不是`zc(r)`像以前那样打电话。

我得到的 Firebug 错误是`z1 is not defined`. 为什么我的`'add'`方法看不到我的`'z1'`属性？

[哦，在有人问我为什么不`z1`按`zc`原样输入之前，那是因为我`z1`从代码中的其他地方访问，所以我要为对象添加更多方法。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:31:59.507

更改`z1[r]`为`this.z1[r]`

我可能还建议将其设置为范围内的变量以避免查找。

```
var zr = this.z1[r] = new ZeroClipboard.Client();
zr.addEventListener() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T02:33:25.277

1.  将出现替换`z1`为`this.r1`
2.  也许我误解了你的努力，但`zc`也是一个全局变量（似乎）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T02:33:15.233

`zc`是您的第二个代码块中的对象文字，所以我认为匿名函数不知道该对象的成员（即它们不在同一个闭包中）。您应该改为创建一个新函数：

```
var ZC = function () {
    var z1  = [];
    this.add = function(r){
        var a="RP"+r,b="RDC"+r,c="RP"+r;
        z1[r]=new ZeroClipboard.Client();
        z1[r].addEventListener('mouseDown',function(client){z1[r].setText(document.getElementById(c).innerHTML);});
        z1[r].addEventListener('complete',function(client,text){$('#'+a).aH("#D6EBFF",1000);});
        z1[r].glue(a,b);
    };
};
var _zc = new ZC();
_zc.add(); 
```

这还具有保持 z1 私有的优点（在函数范围之外无法访问）。

# java - 记住我如何与 Restful Web 服务一起使用

> ID：10068288
> 
> 赞同：1
> 
> 时间：2012-04-09T02:26:17.960
> 
> 标签：java, security, jax-ws

我在Java、服务器端的**Restful Web 服务**和客户端的**Jsp、javascript工作**

我想知道如何`Remember me`运作

我对很多网站进行了分析，我得到的一件事是他们不为此目的使用 Cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:28:30.453

记住我与 Cookie 一起使用。你不需要为此使用`REST`。

查看Balcus 的[这个](https://stackoverflow.com/a/5836520/295264)答案，看看如何。

# jquery - html鼠标悬停事件，无法显示对话框

> ID：10068291
> 
> 赞同：0
> 
> 时间：2012-04-09T02:27:05.310
> 
> 标签：jquery, html, css

我想显示基于鼠标悬停事件的工具提示。我试过这段代码，但失败了，什么都不会出现。

请指教。

```
<img onmouseover="showLongText();" BORDER=0 height=15 width=15 src="images/pick-button.gif"/>
<div id="longTextDiv" style="display:none;">
ddd
</div>

<script type="text/javascript">
function showLongText(className, fldName, objId){   
    var longTextDiv = $("#longTextDiv");
    //alert(longTextDiv);
    longTextDiv.style.leftPos += 10;
    longTextDiv.style.posLeft = event.clientX;
    longTextDiv.style.posTop = event.clientY;
    longTextDiv.style.display = "";
    longTextDiv.setCapture();           
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:34:22.383

由于您已经在使用 jQuery。你应该使用

```
$("img").hover(function(e) {
    var longTextDiv = $("#longTextDiv");
    //alert(longTextDiv);
    longTextDiv.css({
       left : e.pageX,
       top : e.pageY, 
       display : "block"
    });
    longTextDiv.setCapture();           
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:33:21.057

您没有为函数 onmouseover 提供必要的参数...将函数定义更改为：

`function showLongText(){`

# html - 在 2 个不同的 jsps 中同步两个输入字段

> ID：10068293
> 
> 赞同：0
> 
> 时间：2012-04-09T02:27:07.497
> 
> 标签：html, jsp

如果我在 jsp 中有 2 个输入字段并且我希望它们始终保持同步，我知道解决方案。为每个输入字段编写一个 onchange 事件并调用一个函数。此功能将同步这两个字段。

现在在我的情况下，两个输入字段位于两个不同的 jsps 中。它们都包含在第三个jsp中。是否仍然可以同步字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:24:39.080

如果两个 jsps 都生成一个 html 页面，那么在客户端你仍然在处理一个页面。有问题的方法应该在那里工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T02:42:42.887

在会话中设置一个属性，并在任何你想使用的地方使用这个值，

```
session.setAttribute("userName",userName);
session.getAttribute("userName"); 
```

# ios - 关于遮罩层的阴影

> ID：10068300
> 
> 赞同：0
> 
> 时间：2012-04-09T02:30:10.523
> 
> 标签：ios, mask, shadow

当我像这样设置单元格 imageView 阴影时：

```
[[[self imageView] layer] setShadowColor:[[UIColor redColor] CGColor]];
[[[self imageView] layer] setShadowOffset:CGSizeMake(1, 2)];
[[[self imageView] layer] setShadowOpacity:1.0];
[[[self imageView] layer] setShadowRadius:MASK_LAYER_RADIUS];

self.maskLayer = [[[CALayer alloc] init] autorelease];
[_maskLayer setFrame:CGRectMake(0, 0, [UIImage imageNamed:name].size.width, [UIImage imageNamed:name].size.height)];
[_maskLayer setBackgroundColor:[[UIColor grayColor] CGColor]];
[_maskLayer setCornerRadius:MASK_LAYER_RADIUS];
[_maskLayer setOpacity:MASK_LAYER_OPACITY];
[_maskLayer setShadowColor:[[UIColor greenColor] CGColor]];
[_maskLayer setShadowOffset:CGSizeMake(1, 2)];
[_maskLayer setShadowOpacity:1.0];
[_maskLayer setShadowRadius:MASK_LAYER_RADIUS];
[self.imageView.layer setMask:_maskLayer]; 
```

对不起，我无法上传效果图

当我跑步时，我发现 ShadowRadius 没有效果？我能看到角落

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T01:09:17.377

这是因为你的遮罩和阴影在同一层，所以你也遮住了你的阴影。

我写了一篇博客文章，其中的代码介绍了一种在 iOS 中掩盖和遮蔽图像的简单技术：http: [//travisjeffery.com/b/2012/08/ios-how-to-mask-and-shadow-an -图片/](http://travisjeffery.com/b/2012/08/ios-how-to-mask-and-shadow-an-image/)

# google-app-engine - 3天后迁移到HRD也挂了

> ID：10068308
> 
> 赞同：1
> 
> 时间：2012-04-09T02:30:47.037
> 
> 标签：google-app-engine

我正在将我的应用程序迁移到 HRD，现在大约需要 3 天。我也尝试过暂停和恢复。它仍处于“复制”阶段。我可以看到 Datastore 读取操作的变化在增加并计费。

我还在 [http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue提交了一个问题](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)

我还没有收到这个问题的回复。我应该等多久？

-阿斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:45:01.770

迁移我的应用程序时，我遇到了类似的问题。最后事实证明我有几个实体使用的索引数量超过了允许的数量（我认为是 5000）。直到 2011 年 11 月，App Engine 才强制执行[5000 个索引条目/实体限制](https://developers.google.com/appengine/docs/python/datastore/overview#Quotas_and_Limits)。已修复此问题，并且超出限制的所有现有实体键都被继承为旧行为。迁移到 HRD 将更改您的密钥，因此如果您超出限制，您将不得不减少实体数量。

我通过删除可能的索引来修复我的迁移，因为 App Engine 开始使用[zig zag 合并](https://developers.google.com/appengine/docs/python/datastore/queries#Big_Entities_and_Exploding_Indexes)来合并两个单独查询的结果。例如索引：

```
- kind: Product
  properties:
  - name: name
  - name: tags
  - name: tags
  - name: tags 
```

可以改为：

```
- kind: Product
  properties:
  - name: name
  - name: tags 
```

建议我修复迁移的其他解决方案是：

*   不平衡的命名空间。如果您使用 5000 个命名空间，但 99% 的实体位于 1 个命名空间中，则工具按命名空间分片，并且大多数实体将由单个工作实例提供服务。如果您将新实体写入此命名空间的速度比单个工作人员将它们复制到新应用程序的速度快，那么您的迁移将永远运行

*   比迁移工具映射键更快地编写实体。这是一个典型的例子，如果你每秒处理成百上千的查询（我们称之为 QPS）并且新实体正在以这种速度写入，则映射器无法跟上。映射器负责将实体分片到桶中，以便可以并行复制它们

# json - WCF REST 服务返回 405：jQuery AJAX GET 不允许的方法

> ID：10068317
> 
> 赞同：1
> 
> 时间：2012-04-09T02:32:54.733
> 
> 标签：json, jquery, wcf-rest, http-status-code-405

即使通过这篇文章 [wcf REST Services 和 JQuery Ajax Post: Method not allowed (3)](https://stackoverflow.com/questions/6633648/wcf-rest-services-and-jquery-ajax-post-method-not-allowed)

我无法通过 405：尝试通过以下 AJAX 调用在我的 WCF REST 服务上调用方法时不允许使用方法：

```
$.ajax({
    type: "GET",
    url: 'http://mydomain.com/service1/service.svc/json/getsupportedagencies',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    failure: function (msg) {
        alert(msg);
    },
    success: function (agencies) {
        alert("success via REST");
        $.each(agencies, function (i, a) {
            viewModel.agencies.push(new agency(a.Name, a.FullName));
        });
    }
}); 
```

服务接口定义如下：

```
 [ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebInvoke(Method = "GET",
        RequestFormat = WebMessageFormat.Json,
       ResponseFormat = WebMessageFormat.Json, UriTemplate = "getsupportedagencies")]
    AgencyDTO[] GetSupportedAgencies();

  // other methods
} 
```

在遇到跨域问题的线程后，我在webservice项目中手动添加了一个Global.asax文件，还添加了以下方法方法：

```
 protected void Application_BeginRequest(object sender, EventArgs e)
    {
        HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin",
                         "http://localhost:80");

        if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods",
                          "GET, POST");
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers",
                          "Content-Type, Accept");
            HttpContext.Current.Response.AddHeader("Access-Control-Max-Age",
                          "1728000");
            HttpContext.Current.Response.End();
        }

    } 
```

我在 web.config 中的服务模型配置如下所示：

```
<system.serviceModel>       
        <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />     
        <services>
            <service behaviorConfiguration="ServiceBehavior" name="Services.Service1">
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <endpoint address="basic" binding="basicHttpBinding" contract="Services.Contracts.IService1" />
                <endpoint address="json" 
                    behaviorConfiguration="JsonBehavior"
                    binding="webHttpBinding" 
                    contract="Services.Contracts.IService1" />
            </service>   
        </services>
        <behaviors>
        <endpointBehaviors>
            <behavior name="JsonBehavior">
                <webHttp />
            </behavior>
        </endpointBehaviors>
    <serviceBehaviors>
    <behavior name="ServiceBehavior">
     <serviceMetadata httpGetEnabled="true" />
     <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
   </serviceBehaviors>
  </behaviors>      
    </system.serviceModel> 
```

我使用以下代码对服务进行的单元测试通过：

```
[Test]
 public void TestGetAgencyForLocation()
       {
           var client = new WebClient();

           var response = client.DownloadString(
                  "http://mydomain.com/service1/service.svc/json/getsupportedagencies");
           Assert.IsTrue(!string.IsNullOrEmpty(response));

           var agencies= JsonConvert.DeserializeObject(response);
           Assert.IsNotNull(agencies);
       } 
```

如果我在 Chrome 或 IE 中发布 URL“ [http://mydomain.com/service1/service.svc/json/getsupportedagencies](http://mydomain.com/service1/service.svc/json/getsupportedagencies) ”，我会得到 JSON 格式的正确服务器响应。

是的，所有这些都到位后，我仍然得到 405: method not allowed。

TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-29T05:33:26.663

我通过在 WCF 项目**Global.asax**文件中添加以下代码解决了这个问题

```
protected void Application_BeginRequest(object sender, EventArgs e)
        {
            HttpContext.Current.Response.AddHeader("Access-Control-Allow-Origin", "*");
            if (HttpContext.Current.Request.HttpMethod == "OPTIONS")
            {
                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Methods", "POST, PUT, DELETE");

                HttpContext.Current.Response.AddHeader("Access-Control-Allow-Headers", "Content-Type, Accept");
                HttpContext.Current.Response.AddHeader("Access-Control-Max-Age", "1728000");
                HttpContext.Current.Response.End();
            }
        } 
```

# android - Keylabel 和 keyOutputText 问题

> ID：10068318
> 
> 赞同：0
> 
> 时间：2012-04-09T02:33:04.357
> 
> 标签：android, android-softkeyboard

好的，我注意到在 android 软键盘中，当用户提示插入笑脸时，用户想要发送笑脸时，会出现一个 andriod 笑脸列表供用户选择，我注意到笑脸旁边是一个:)（它因人而异关于笑脸的心情）我认为代码会读

```
<Key
    android:keylabel:=":)"
    android:keyOutputText="@drawable/image...." /> 
```

我相信（如果我错了，请纠正我）如果使用手动输入 a:) 可绘制图像仍然会出现？我是否正确...其次，如果我添加自己的表情符号而不是使用 :) 我使用“ *** ”作为 Keylabel，而我自己的图像作为可绘制的输出文本，用户是否能够使用我的表情符号？

最后，如果我只希望他们能够选择我的一个表情符号来使用而不看到“ *** ”..我可以只使用 android:KeyoutputText 来生成图像还是 android:keylabel 充当排序提示的？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:08:09.613

首先， keyOutputText 不能引用可绘制对象。它必须是文本，一个字符串。

除非它是该应用程序的内置笑脸之一，否则您的表情不会出现在文本框（短信框或您正在输入的任何地方）中。否则，他们只会看到类似这样的内容：“=)”。要对其进行测试，请尝试在 SMS 中发送“:-)”（取决于您的 SMS 应用程序，它可能会或可能不会显示为图标）和 Google 搜索框中。我向您保证，您不会在搜索框中看到图标。

注意：您可能希望为您的键定义 android:keyIcon，以便它们显示笑脸图标而不是输出文本（即“=”，参见 android:keyOutputText）。

要回答您的问题，如果用户手动输入“:)”，这**与**用户按下具有 android:keyOutputText=":)" 的键相同。

对于第二个问题，您的“表情”实际上最终会成为一个连续发送多个字符的键。它使人们不必键入':'、'-'、')'。取而代之的是，他们只需按一下键，就会出现他们笑脸的三个字符。

对于最后一个问题，keyOutputText 无法生成图像。只有显示文本的应用程序才能将文本转换为图像。简而言之，键盘用于发送和编辑*文本*，而不是图标和图像。

如果您还有任何问题，请给我发送电子邮件：我已经为 Android 编写软键盘快半年了，所以我非常熟悉触摸输入的工作原理。

# oauth - 无法将 3-legged OAuth 与 XACML 集成

> ID：10068323
> 
> 赞同：0
> 
> 时间：2012-04-09T02:33:29.863
> 
> 标签：oauth, wso2

我正在尝试将 WSO2 身份服务器用于我自己的 Web 应用程序的 OAuth 令牌管理。

我完全按照[这篇博](http://blog.facilelogin.com/2011/07/integrating-3-legged-oauth-with-xacml.html)文中的说明在 Ubuntu 10.04 中下载了 WSO2 身份服务器 3.2.3、wso2esb 4.0.3、wso2as 4.1.2。我成功获得了访问令牌。

但是，当我在 Eclipse 中运行博客最后一部分中的代码时（我已经在代码中使用了正确的 CONSUMER_SECRET、CONSUMER_KEY 和 OAUTH_TOKEN），我得到了一个错误：

```
java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at java.net.Socket.connect(Socket.java:495)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:178)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:409)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:240)
    at sun.net.www.http.HttpClient.New(HttpClient.java:321)
    at sun.net.www.http.HttpClient.New(HttpClient.java:338)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:488)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:515)
    at org.wso2.rest.security.oauth.OauthClient.main(OauthClient.java:44) 
```

我确定服务端口可用，但无法弄清楚问题所在。任何人都可以提供任何帮助吗？

此外，在该博客的示例中，似乎我必须将自己的 Web 应用程序连接到 ESB 以验证令牌。我可以在我的应用程序中使用任何 API 来直接使用 Identity Server 验证令牌吗？或者我应该如何将我的 Jsp Web 应用程序连接到 ESB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T03:59:54.990

在您的客户端代码中，请更改以下内容

私有静态最终字符串 ESB = "http://127.0.0.1:8280/";

至

私有静态最终字符串 ESB = "http://127.0.0.1:8282/";

# c++ - execve() 是做什么的？

> ID：10068327
> 
> 赞同：4
> 
> 时间：2012-04-09T02:34:57.693
> 
> 标签：c++, c, linux, execve

execve() 究竟是做什么的？我试过查看文档（http://linux.die.net/man/2/execve），但考虑到我对 linux 很陌生，而且这种编程方式没有多大意义。我想要做的是能够执行这个命令：

```
nc -l -p someport -e /bin/sh 
```

我可以执行以下操作吗（其中 someport 是一个数字，例如 4444）

```
char *command[2];
command[0] = "nc -l -p someport -e /bin/sh"
execve(command[0], name, NULL); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T02:49:12.960

`execve`用新进程替换当前进程，运行您指定为其第一个参数的命令。

您想要的机会是相当不错的，`execvp`或者`execlp`相反 - 您没有提到任何想要为孩子提供环境的事情，但从外观上看，您可能确实希望搜索路径以找到您正在使用的可执行文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-09T02:48:43.570

正确用法是

```
extern char * const environ[];
char * const command[] = {"nc", "-l", "-p", "porthere", "-e", "/bin/sh", NULL};
execve("/usr/bin/nc", command, environ); 
```

您必须使用完整的路径名，而不是短名称，例如`"nc"`（更准确地说：不`PATH`进行搜索，路径名必须是实际存在的文件），并且您必须事先将参数拆分为单独的字符串。您还需要以某种方式传播环境，或者通过`environ`上面代码片段中提到的 extern 或者从 ; 的第三个参数中获得`main()`。后者更符合标准，但根据需要传递可能会更痛苦。

# c - 这会导致堆栈出现问题吗？

> ID：10068328
> 
> 赞同：2
> 
> 时间：2012-04-09T02:34:58.397
> 
> 标签：c, optimization, stack-overflow

我有一个函数将位图字符串写入浏览器，然后将其打印在屏幕上。目前，这是通过单独为每个像素生成正确的值并为每个像素使用该`write(int fd, char *Buff, int NumBytes)`函数三次来实现的，例如：

```
for (i = 0; i < IMAGE_HEIGHT; ++i)
{
    for (j = 0; j < IMAGE_WIDTH; ++j)
    {
        blue = blue();
        green = green();            
        red = red();

        write(soc, &blue, 1);
        write(soc, &green, 1);
        write(soc, &red, 1);
    }
} 
```

我想优化代码，并认为多次调用 write() 函数肯定会让我付出一些代价。因此，想法是将所有值存储在一个字符数组中，然后调用一次 write 函数：

```
write (soc, image_array, sizeof(image_array)); 
```

但是我会对巨大的数组（数千/数百万个元素）有问题吗？分配给堆会解决这个问题吗？我只是想确保我没有做任何愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:50:48.907

是的，多次写入会伤害你。

Rather than write each byte individually or allocate the entire thing, I suggest writing to a small buffer (perhaps a few KB) and writing that every time it fills up. That should give you a good performance gain for small memory cost.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T02:45:21.200

是的，在典型情况下，使用动态分配将解决（或至少缓解）问题。在典型的系统（例如，Windows 或 Linux）上，堆栈被限制在几兆字节左右（有些变量，可以作为链接时间进行调整，至少在 Windows 上是这样）。

您在免费存储上的可用空间往往主要受可用地址空间的限制（或者，在单个大分配的情况下，连续地址空间）。最多分配几千兆字节是相当常规的。在 64 位系统上，更大的分配变得相当合理（在这种情况下，通常主要受可用 RAM 以及您愿意接受使用虚拟内存的减速程度的限制）。

# javascript - 脚本（效果）显示一个充满徽标的球体（或者它们可能是星星，阅读）

> ID：10068331
> 
> 赞同：0
> 
> 时间：2012-04-09T02:35:32.663
> 
> 标签：javascript, html

我记得很久以前我在一个网站上看到过这种效果。

这是一个充满标志的页面（所以我想这是一个著名的网站），我认为每个标志都代表一个明星。您可以移动一点徽标（并单击它们）以巧妙地查看所有内容。

我不记得该网站，但也许有人使用/找到它。如果有人可以指向具有这种效果的库或具有指向前面提到的网站的链接，我将不胜感激。

我通常自己创建脚本，但我认为我需要很多数学，这是我的弱点：\

也许它是一个充满标志的**球体**（透明），而不是充满星星的宇宙（你无法真正理解它，但希望我能给你这个想法）。

感谢您的任何回答。

**编辑1：** 我认为这是我的想法：http: [//www.devirtuoso.com/2009/09/3d-sphere-using-jquery/](http://www.devirtuoso.com/2009/09/3d-sphere-using-jquery/) 也许它是一个“标签云”（但带有徽标）我在看什么为了？我不知道名字。

**编辑2：** 我认为这正是我正在寻找的效果：[http](http://www.goat1000.com/tagcanvas.php) ://www.goat1000.com/tagcanvas.php 但是这使用画布。虽然我喜欢新技术，但我需要 ie8 支持，所以如果不使用 canvas 元素也能获得类似的效果会很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:49:55.550

看来我找到的脚本有高达 ie7 的备份脚本，所以我肯定找到了它并且它运行正常。

无论如何，谢谢，很抱歉自动回答。

[http://www.goat1000.com/tagcanvas.php](http://www.goat1000.com/tagcanvas.php)

# c - C 编程 - Malloc/免费

> ID：10068333
> 
> 赞同：2
> 
> 时间：2012-04-09T02:36:15.357
> 
> 标签：c, malloc, free

所以我有一个代码，当我运行它时，当我输入大于 3 的大小时它会挂起。当它正好是 3 时它运行顺利。我将问题缩小到 malloc 和 free ，但我不知道问题是什么。我是新手，因此不胜感激。

```
do  //repeatedly ask the user to put a number between 3-9
{ 
 printf("Enter the size of the game board between 3-9: ");
 scanf("%d", &size);
}while(size<3 || size>9);

if((board = (char***)malloc(sizeof(char**)*size))==NULL)
  printf("Memory Allocation failed\n");
  for(i=0; i<size; i++)
  {
    if((board[i] = (char**)malloc(sizeof(char*)*size))==NULL)
     printf("Memory Allocation failed\n");
     for(j=0; j<size; j++)
     {
       if((board[i][j] = (char *)malloc(sizeof(char)*4))==NULL)  
         printf("Memory Allocation failed\n");
         strcpy(board[i][j], "Go");
     }   
 } 
/*************Some random code ***********/ 

free(board);
for(i=0;i<size;i++)
{
 free(board[i]);
 for(j=0;j<size;j++)
   free(board[i][j]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:01:44.140

问题是您在访问`board`后访问`free`它。您应该以与您完全相反的顺序释放内存`malloc`。

另一种方法是您可以整体分配所需的所有内存，例如

```
 char ***board = NULL;
 char  **rows  = NULL;
 char   *data  = NULL;

 if((board = (char***)malloc(sizeof(char**)*size))==NULL)
  printf("Memory Allocation failed\n");
 if((rows = (char**)malloc(sizeof(char*)*size*size))==NULL)
     printf("Memory Allocation failed\n");
 if((data = (char *)malloc(sizeof(char)*size*size*4))==NULL)  
     printf("Memory Allocation failed\n");

 for (i = 0; i < size; i++) {
     int board_offset = i * size;
     board[i] = rows[board_offset];
     for (j = 0; j < size; j++) {
         int row_offset = board_offset + j;
         rows[row_offset] = data[row_offset * 4]；
         stcpy(data[row_offset * 4], "GO");
     }
 }

 free(board);
 free(rows);
 free(data); 
```

# javascript - 如何对此代码进行单元测试

> ID：10068335
> 
> 赞同：2
> 
> 时间：2012-04-09T02:37:30.767
> 
> 标签：javascript, unit-testing

我用谷歌搜索了如何进行单元测试，但示例非常简单。这些示例总是显示返回某些内容的函数或执行返回某些内容的 ajax - 但我从未见过执行回调、嵌套回调和“单向”函数的示例，它们只是存储某些内容而从不返回任何内容。

说我有这样的代码，我应该如何测试它？

```
(function(){
    var cache = {};

    function dependencyLoader(dependencies,callback2){
        //loads a script to the page, and notes it in the cache
        if(allLoaded){
            callback2()
        }
    }

    function moduleLoader(dependencies, callback1){
        dependencyLoader(dependencies,function(){
            //do some setup
            callback1()
        });
    }

    window.framework = {
        moduleLoader : moduleLoader
    }

}());

framework.moduleLoader(['foo','bar','baz'],function(){
    //call when all is loaded
}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:48:48.937

这说明了在 javascript 的匿名函数中保持私有的问题。验证事情是否在内部工作有点困难。

如果这是先进行测试，那么缓存、dependencyLoader 和 moduleLoader 应该在框架对象上公开可用。否则很难验证缓存是否被正确处理。

为了让事情顺利进行，我建议您看一下[BDD](http://en.wikipedia.org/wiki/Behavior_Driven_Development)，它可以方便地为您提供一种方法来帮助您开始，让您通过`given-when-then`约定来说明行为。我喜欢使用[Jasmine](http://pivotal.github.com/jasmine/)，它是一个 javascript BDD 框架（`jstestdriver`与

```
describe('given the moduleloader is clear', function() {

    beforeEach(function() {
        // clear cache
        // remove script tag
    });

    describe('when one dependency is loaded', function() {

        beforeEach(function() {
            // load a dependency
        });

        it('then should be in cache', function() {
            // check the cache
        });

        it('then should be in a script tag', function() {
            // check the script tag
        });

        describe('when the same dependency is loaded', function() {

            beforeEach(function () {
                // attempt to load the same dependency again
            });

            it('then should only occur once in cache', function() {
                // validate it only occurs once in the cache
            });

            it('then should only occur once in script tag', function() {
                // validate it only occurs once in the script tag
            });

        });
    });

    // I let the exercise of writing tests for loading multiple modules to the OP

}); 
```

希望这些测试是不言自明的。我倾向于重写测试以便它们很好地嵌套，并且通常实际调用在`beforeEach`函数中完成，而验证在`it`函数中完成。

# image - MATLAB 中有 histo 函数吗？

> ID：10068337
> 
> 赞同：1
> 
> 时间：2012-04-09T02:37:49.900
> 
> 标签：image, image-processing, matlab

MATLAB 中的 histo 函数，有人知道它的作用吗？histo(image) 这会返回什么？

我在 google 中找到，但在 MATLAB 中找不到任何预定义函数。最新的 MATLAB 中是否有一些新的包含。如果有人知道，请在下面解释发生了什么。

`hist=histo(image); pdf=hist/sum(hist); t_new=round(sum(pdf.*[0:255]));`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:23:01.277

`histo()`可能是一个计算图像直方图的用户定义函数。您可以改用内置的 Matlab 函数`hist()`：

```
 n = hist(image) 
```

阅读更多： http:
[//en.wikipedia.org/wiki/Histogram](http://en.wikipedia.org/wiki/Histogram)
[http://en.wikipedia.org/wiki/Histogram_equalization](http://en.wikipedia.org/wiki/Histogram_equalization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:54:58.743

计算图像直方图的MATLAB命令是[`imhist`](http://www.mathworks.com/help/images/ref/imhist.html)

它被用作

```
hist = imhist(image); 
```

# java - 如何访问谷歌日历 API 方法

> ID：10068342
> 
> 赞同：0
> 
> 时间：2012-04-09T02:38:52.777
> 
> 标签：java, google-calendar-api, google-api-java-client

我是 Google API 的新手，正在尝试根据此处描述的 Google Calendar API 示例创建一个应用程序：http: [//samples.google-api-java-client.googlecode.com/hg/calendar-appengine-sample/instructions .html](http://samples.google-api-java-client.googlecode.com/hg/calendar-appengine-sample/instructions.html)。

这可行，但我无法更进一步，因为我无法访问[https://developers.google.com/google-apps/calendar/中描述的所有 API 方法，例如 get、patch、list 等v3/参考/](https://developers.google.com/google-apps/calendar/v3/reference/)。

示例应用程序源代码中实现了一些方法：/year-planner/src/main/java/com/google/api/services/samples/calendar/appengine/server/CalendarGwtRpcSample.java：

```
void delete(GwtCalendar calendar) throws IOException;
GwtCalendar insert(GwtCalendar calendar) throws IOException;
GwtCalendar get(GwtCalendar calendar) throws IOException;
GwtCalendar update(GwtCalendar updated) throws IOException; 
```

但只实现了删除、插入和更新方法。我希望这些可以直接从客户端库中获得。

我错过了什么吗？还是我需要自己创建所有这些方法？

我已经按照示例应用程序的教程，在 Windows (Vista) 上使用 Eclipse 以及来自 Maven 存储库的源代码和客户端库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:28:59.783

您需要为所需的所有服务调用编写包装器 - 原因是您不能使用 Ajax 调用与托管 GWT 的服务器不同的服务器上的 Web 服务（在本例中为 google 日历 API）应用。

因此，在本示例中，您的 GWT 应用程序对您的服务器进行 AJAX 调用，然后服务器调用 Google 日历服务并将结果包装回 GWT 客户端。

# c# - 从 SQL Server 数据库写入 Excel 文件

> ID：10068343
> 
> 赞同：1
> 
> 时间：2012-04-09T02:39:22.737
> 
> 标签：c#, sql-server, excel

目前，我需要能够从 SQL Server DB 中检索值，根据*某个模板*填充 Excel 文件，然后允许用户下载该文件。我还需要这个*特定的模板*是可定制的，因为用户可以添加新字段和删除字段。

我知道我可以采取几种方法：使用**.xlt**和直接使用**C#**。使用 C#，用户需要与 UI 交互，然后 UI 将填充 SQL Server 中的 ExcelTemplate 表。当用户希望下载新的 Excel 文件时，将使用该 ExcelTemplate 表。

我知道所有这些东西可能听起来有点抽象，所以如果有一些地方我需要详细说明/澄清，请告诉我。非常感谢，伙计。

**编辑：**抱歉，我有点错过了这部分，但我更愿意允许用户通过 Silverlight UI 自定义这些 Excel 模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:36:00.187

For pulling down data from SQL Server and dumping it into Excel, you can use [Officewriter](http://www.officewriter.com/officewriter-for-sql-server-reporting-services.aspx). It has Reporting Services integration and supports generating .xls and .xlsx documents. There's also a template component that basically does what you're trying to do. The templates are actually Excel documents, so the users can edit them directly in Excel. Not Silverlight, but not bad. You can try an [eval](http://www.officewriter.com/officewriter-free-evaluation-b.aspx) for free.

DISCLAIMER: I'm one of the engineers who built the latest version.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:20:35.323

1.  您可以在 Excel 中创建数据源并从 MS SQL Server 中提取数据。
2.  您可以使用 MS Reporting Services，它允许获取 MS Excel 格式的报告。在这种情况下，用户可以[使用报表生成器来自定义报表](http://technet.microsoft.com/en-us/library/dd220460.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-19T13:47:41.180

在一天结束的时候，我想我会花一些时间来构建一个定制的仪表板。它不会是通用的，而是专注于现有的数据库。

我知道这个答案有点含糊，但我想感谢所有帮助:) 如果将来有动态解决方案，那就太好了！我认为...

# postgresql - 从字段名称 oid 中恢复文件

> ID：10068346
> 
> 赞同：0
> 
> 时间：2012-04-09T02:39:52.107
> 
> 标签：postgresql

我毫不怀疑，我的数据库中有一个**oid**类型的字段我正在保存文本文件，我想知道我是否可以以某种方式检索您保存文件的名称。不知道是否以某种方式成功*lo_export* 或其他方法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:27:33.300

PostgreSQL 不会为存储在数据库中的每个大对象创建单独的文件；使用带有 btree 索引的相当普通的堆表。因此，为了便于数据库管理空间，大对象被分成更小的部分，并混合在该表使用的 1GB 段文件中。

快速浏览一下 pg_class 表，我看到一个 pg_largeobject 条目，我认为它是存储所有具有“lo”大对象特征的对象的位置。在我的系统上，我看到 relfilenode 为 11869，这意味着用于存储数据的初始文件将是 11869，后续文件将是 11869.1、11869.2 等。我不知道是否有任何方法可以重新分配 relfilenode大型对象，但您可能应该检查您的 pg_class 条目以确定。

通常，不应访问存储在数据库中的大对象，除非通过提供的“lo”函数。如果您想要单独的文件并能够直接访问它们，您可能应该将它们直接保存到磁盘并存储文件名或 URI。您可以从 PostgreSQL 函数内部或外部将它们保存到磁盘。

# r - 如何在 R 中使用 getURL() 优化抓取

> ID：10068350
> 
> 赞同：6
> 
> 时间：2012-04-09T02:41:23.690
> 
> 标签：r, curl, web-scraping

我正试图从法国下议院网站的两页上刮掉所有法案。这些页面涵盖 2002-2012 年，每页代表不到 1,000 张钞票。

为此，我`getURL`通过这个循环进行刮擦：

```
b <- "http://www.assemblee-nationale.fr" # base
l <- c("12","13") # legislature id

lapply(l, FUN = function(x) {
  print(data <- paste(b, x, "documents/index-dossier.asp", sep = "/"))

  # scrape
  data <- getURL(data); data <- readLines(tc <- textConnection(data)); close(tc)
  data <- unlist(str_extract_all(data, "dossiers/[[:alnum:]_-]+.asp"))
  data <- paste(b, x, data, sep = "/")
  data <- getURL(data)
  write.table(data,file=n <- paste("raw_an",x,".txt",sep="")); str(n)
}) 
```

有什么办法可以优化这里的`getURL()`功能吗？我似乎无法通过传递`async=TRUE`选项来使用并发下载，这每次都会给我同样的错误：

```
Error in function (type, msg, asError = TRUE)  : 
Failed to connect to 0.0.0.12: No route to host 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T23:13:50.077

尝试 mclapply {multicore} 而不是 lapply。

> “mclapply 是 lapply 的并行版本，它返回一个与 X 长度相同的列表，其中的每个元素都是将 FUN 应用于 X 的相应元素的结果。” （[http://www.rforge.net/doc/packages/multicore/mclapply.html](http://www.rforge.net/doc/packages/multicore/mclapply.html)）

如果这不起作用，您可以使用[XML](http://cran.r-project.org/web/packages/XML/index.html)包获得更好的性能。像 xmlTreeParse 这样的函数使用异步调用。

> “请注意，xmlTreeParse 确实允许混合样式的处理，允许我们将处理程序应用于树中的节点，因为它们正在转换为 R 对象。这是一种事件驱动或异步调用的样式。” （[http://www.inside-r.org/packages/cran/XML/docs/xmlEventParse](http://www.inside-r.org/packages/cran/XML/docs/xmlEventParse)）

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-04-09T08:03:12.560

为什么使用 R？对于大型抓取工作，您最好使用已经为该任务开发的东西。我在 Down Them All 中取得了不错的效果，这是一个浏览器插件。只需告诉它从哪里开始，走多远，遵循什么模式，以及在哪里转储 HTML。

然后使用 R 从 HTML 文件中读取数据。

优点是巨大的——这些附加组件是专门为任务开发的，所以它们会进行多次下载（由你控制），它们会发送正确的标题，所以你的下一个问题不会是“我如何设置用户代理字符串RCurl?'，当某些下载失败时，他们可以应对重试，这是不可避免的。

当然，缺点是您不能轻松地自动启动此过程，在这种情况下，您最好在命令行上使用“curl”或其他一些命令行镜像实用程序。

老实说，与用 R 编写网站代码相比，你有更好的时间来做...

# random - 何时停止随机数生成器中的循环？

> ID：10068353
> 
> 赞同：1
> 
> 时间：2012-04-09T02:41:57.833
> 
> 标签：random, montecarlo

我不确定 StackOverflow 是否适合问这个问题，因为这个问题是半编程半数学的。如果我的问题很愚蠢，也很抱歉^_^

我正在通过“蒙特卡洛方法”一书研究蒙特卡洛模拟。我必须学习的第一件事是关于随机数生成器。RNG 的基本算法是：
*1\. 初始化：从 S 上的分布 µ 中画出种子 S0。设置 t = 1。
2\. 转移：设置 St = f(St−1)。
3\. 输出：设置 Ut = g(St)。
4\. 重复：设置 t = t+ 1 并返回步骤 2。*
（μ 是有限状态集 S 上的概率分布，输入是 S0，我们希望它是输出 Ut 的随机数）

这不难理解，但这里的问题是我没有看到重复次数中的随机因素。我们如何决定何时停止 RNG 的循环？我读到的所有实现 RNG 的示例都循环了 100 次，它们为特定的种子返回相同的值。一点都不随机>_<

有人可以解释我在这里缺少什么吗？任何帮助将不胜感激。感谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:47:57.337

如果没有专门的硬件，您无法在计算机上获得真正的随机数序列。（这种专用硬件相当于使用物理学来提供随机性的初始掷骰子。电子硬件通常使用恒温下专用二极管的电子噪声；其他硬件则使用放射性衰变事件。）

如果没有专门的硬件，您可以生成的是伪随机数，正如您所观察到的，它们总是为相同的初始种子生成相同的数字序列。对于简单的应用程序，您通常可以避免从调用时生成初始种子，这实际上是随机的。

当我说“简单的应用程序”时，我**将密码学排除在外。** （不仅如此，而且尤其如此。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:42:49.053

有时，当您尝试调试模拟时，您实际上*希望*有一个可重现的“随机”数字流，因此您可能会专门发送一个流以从特定种子开始。

例如在答案中[使用 ggplot2 在每个绘图 rcs 中使用不同的注释创建 facet_wrap 图](https://stackoverflow.com/questions/2050610/creating-a-facet-wrap-plot-with-ggplot2-with-different-annotations-in-each-plot)通过使用 R 代码创建可*重现的数据集来开始答案*

```
set.seed(1)
df <- data.frame(x=rnorm(300), y=rnorm(300), cl=gl(3,100))   # create test data 
```

在继续演示如何回答实际问题之前。

# android - 我需要在自定义视图中回调 super.onDraw() 吗？

> ID：10068354
> 
> 赞同：19
> 
> 时间：2012-04-09T02:42:10.170
> 
> 标签：android, android-custom-view

我不太清楚这一点，文档也不是。

当我创建自定义视图时，我会这样覆盖：

```
@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    //more code here...
} 
```

我的问题是是否有必要打电话`super.onDraw(canvas);`。没有它，代码似乎可以正常工作，但我想确保可以忽略它。

那么有必要吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T02:56:15.267

如果您希望它调用超类的 onDraw 方法（想想 TextView 或 KeyboardView 而不是通用视图），那么调用 super.onDraw。如果您不希望这样，即您计划自己绘制整个视图（您似乎是这样），则没有理由调用它。

此外，如果您正在扩展 View（而不是扩展视图的某个类）， super.onDraw 并没有真正做任何事情。

对我来说，当我想在 KeyboardView 上画线时，我会调用 super.onDraw。因此，super.onDraw 绘制了键盘，而我的自定义 LatinKeyboardView（它扩展了 KeyboardView）在键盘顶部绘制了滑动路径。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T01:24:26.763

查看源代码表明这`View.onDraw()`是一个空方法。`super.onDraw()`因此，如果父类本身就是调用，则`View`什么也不做。这是不必要但无害的。

无论如何，你是否应该继续这样做是效率、安全和风格的单独问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T02:51:05.347

是的。如果您自定义一个 TextView，super.onDraw 将确保绘制属于 TextView 属性的任何内容（如文本、文本颜色、文本阴影等...）与其他视图（如 Button、CheckBox...）相同

如果您的自定义视图扩展视图（不是视图的特定子类，只是视图），最好将 super.onDraw(canvas) 留在那里以用于某些视图的绘制方法（如 setBackgroundDrawable 等...）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T02:45:18.143

除非您实际上覆盖了该`onDraw()`方法，否则它不是必需的。如果新类没有覆盖它，将自动调用 super 的方法。

# php - 请帮助我使用主题中的 PHP 表单 - 我需要将字段更改为西班牙语

> ID：10068358
> 
> 赞同：1
> 
> 时间：2012-04-09T02:42:56.210
> 
> 标签：php, forms

我希望你能帮助我，我正在使用 Wordpress 主题。它带有一个表单的页面模板。您可以在我的网址上看到该表单正在运行：

[http://getpaidtotryitfree.com/contactenos/](http://getpaidtotryitfree.com/contactenos/)

这是一个不同项目的 URL。我把它拿下来，这样我就可以把我客户的网站放上去。我不知道如何更改字段以显示西班牙语。这是代码：

[http://getpaidtotryitfree.com/wp-content/themes/13Floor/contact.txt](http://getpaidtotryitfree.com/wp-content/themes/13Floor/contact.txt)

```
<input type="text" name="et_contact_name" value="<?php if ( isset($_POST['et_contact_name']) ) echo esc_attr($_POST['et_contact_name']); else esc_attr_e('Name','13floor'); ?>" id="et_contact_name" class="input" /> 
```

因此，我遍历了所有“值”并将括号中的部分更改为 ('Nombre','13floor') 等等所有其他值。

当我这样做时，该字段不会像现在一样在点击时消失，所以我认为“没关系”我会突出显示它并填写它，但是一旦我这样做了它就会激活错误“请全部填写”字段”，所以它不接受。好的......所以我做了：

按 Control + F，找到所有带有“et_contact_name”的地方并将其更改为“et_contact_nombre”，我开始：

```
<input type="text" name="et_contact_**nombre**" value="<?php if ( isset($_POST['et_contact_**nombre**']) ) echo esc_attr($_POST['et_contact_**nombre**']); else esc_attr_e('Nombre','13floor'); ?>" id="et_contact_**nombre**" class="input" /> 
```

然后使用 Control + F 命令，我发现所有其他命令都像：

```
$et_site_name = is_multisite() ? $current_site->site_name : get_bloginfo('name');
        wp_mail($et_email_to, sprintf( '[%s] ' . esc_html($_POST['et_contact_subject']), $et_site_name ), esc_html($_POST['et_contact_message']),'From: "'. esc_html($_POST['et_contact_**nombre**']) .'" <' . esc_html($_POST['et_contact_email']) . '>'); 
```

并对电子邮件、主题、消息等进行了相同的处理。不过运气不好，表格当时不起作用，它确实改变了字段，但它不起作用。（我之前告诉你的突出交易）

我能够改变：

```
<input class="et_contact_submit" type="submit" value="<?php esc_attr_e('**Enviar**','13floor'); ?>" id="et_contact_submit" /> 
```

哪个是“提交”，这改变了按钮中的文本，并使表单保持功能，我希望所有其他字段都一样简单，哈哈。

好的，除此之外，.php 中没有任何地方可以让我看到如何更改错误激活，例如：

```
Fill Name field
Fill Email Address field
Invalid email
Fill Subject field
Fill Captcha field
Fill Message field 
```

我只看到这段代码：

```
$et_contact_error = true;
        } else if ( empty($_POST['et_contact_name']) || empty($_POST['et_contact_email']) || empty($_POST['et_contact_subject']) || empty($_POST['et_contact_message']) ){
            $et_error_message .= '<p>' . esc_html__('**Make sure you fill all fields**. ','13floor') . '</p>';
            $et_contact_error = true; 
```

但是“确保填写所有字段”在使用实际表格时甚至都不会出现，所以你可以看到我完全迷路了，希望你能帮助我，我将不胜感激。

谢谢您联络我们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:07:53.810

字段的默认值存储在

[http://getpaidtotryitfree.com/wp-content/themes/13Floor/epanel/page_templates/js/et-ptemplates-frontend.js?ver=1.1](http://getpaidtotryitfree.com/wp-content/themes/13Floor/epanel/page_templates/js/et-ptemplates-frontend.js?ver=1.1)

第 67-70 行。

更新

`... else esc_attr_e('XXXXX','13floor'); ...`
是的，您还应该翻译表格中的值，您可以在以下位置找到它们
`... esc_textarea('Mensaje','13floor'); ...`

例子：

```
...
<input type="text" name="et_contact_name" value="<?php if ( isset($_POST['et_contact_name']) ) echo esc_attr($_POST['et_contact_name']); else esc_attr_e('Nombre','13floor'); ?>" id="et_contact_name" class="input" />
...
<input type="text" name="et_contact_email" value="<?php if ( isset($_POST['et_contact_email']) ) echo esc_attr($_POST['et_contact_email']); else esc_attr_e('Email','13floor'); ?>" id="et_contact_email" class="input" />
...
<input type="text" name="et_contact_subject" value="<?php if ( isset($_POST['et_contact_subject']) ) echo esc_attr($_POST['et_contact_subject']); else esc_attr_e('Sujetos','13floor'); ?>" id="et_contact_subject" class="input" />
...
<textarea class="input" id="et_contact_message" name="et_contact_message"><?php if ( isset($_POST['et_contact_message']) ) echo esc_textarea($_POST['et_contact_message']); else echo esc_textarea('Mensaje','13floor'); ?></textarea> 
```

# java - 如何在java中连接输入？

> ID：10068361
> 
> 赞同：0
> 
> 时间：2012-04-09T02:43:25.100
> 
> 标签：java, regex

我正在尝试连接并尝试同时解析。我现在正在制作一个类似 excel 的程序，我可以在其中说 a1 =“Hello”+“World”，并且在 A1 的单元格中说 HelloWorld。我只需要知道如何解析加号并连接这两个词。请告诉我您是否需要更多代码来理解这一点，例如跑步者。

这是我的 parseInput 类：

```
public class ParseInput {
    private static String inputs;
    static int col;
    private static int row;
    private static String operation;
    private static Value field;

    public static void parseInput(String input){
         //splits the input at each regular expression match. \w is used for letters and \d && \D for integers
        inputs = input;
        Scanner tokens = new Scanner(inputs);
        String none0 = tokens.next();
        @SuppressWarnings("unused")
        String none1 = tokens.next();
        operation = tokens.nextLine().substring(1);
        String[] holder =  new String[2];
        String regex = "(?<=[\\w&&\\D])(?=\\d)";   
        holder = none0.split(regex);
        row = Integer.parseInt(holder[1]);
        col = 0;
        int counter = -1;
        char temp = holder[0].charAt(0);
        char check = 'a';
        while(check <= temp){
            if(check == temp){
                col = counter +1;
            }
            counter++;
            check = (char) (check + 1);
        }
         System.out.println(col);
         System.out.println(row);
         System.out.println(operation);
         setField(Value.parseValue(operation));

         Spreadsheet.changeCell(row, col, field);

    }

    public static Value getField() {
        return field;
    }

    public static void setField(Value field) {
        ParseInput.field = field;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:00:21.910

这实际上是一个相当复杂的问题，除非您可以将输入限制为 Excel 接受的一小部分内容。如果没有，那么您可能会想研究类似[ANTLR](http://www.antlr.org/)的东西。但是，假设上述输入，那么您将需要执行以下操作：

1.  将等号上的字符串拆分为 s1 和 s2
2.  将加号上的 s2 拆分为 s3 和 s4。
3.  修剪所有字符串，删除 s3 和 s4 周围的引号。
4.  连接 s3 和 s4 并分配给由 s1 索引的数据存储。

根据您的连接需求的复杂程度，您可以使用字符串连接或 StringBuilder：

```
result = "" + s3 + s4; // string concatenation
result = new StringBuilder().append(s3).append(s4).toString(); // StringBuilder 
```

如果您对上述任何步骤有任何疑问，请告诉我。

上面（1）的细节，假设`input`是`a1 = "Hello" + "World"`：

```
String[] strings = input.split("=");
String s1 = strings[0].trim(); // a1
String s2 = strings[1].trim(); // "Hello" + "World"

strings = s2.split("+");
String s3 = strings[0].trim().replaceAll("^\"", "").replaceAll("\"$", "") // Hello
String s4 = strings[1].trim().replaceAll("^\"", "").replaceAll("\"$", ""); // World
String field = s3 + s4;

String colString = s1.replaceAll("[\\d]", ""); // a
String rowString = s1.replaceAll("[\\D]", ""); // 1
int col = colString.charAt(0) - 'a'; // 0
int row = Integer.parseInt(rowString);

Spreadsheet.changeCell(row, col, field); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:02:19.113

我建议您使用[JavaCC 之](http://javacc.java.net/)类的解析器生成器来实现您的自定义语法。

在这里你可以找到一个简单的[教程](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-cooltools.html)。

我相信这是更好的解决方案，因为这样你就可以处理你需要的每一个表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:06:08.773

您需要设计和实现解析器和评估器。在此之前，您需要设计解析器/评估器将要评估的语言。

怎么做。

*   如果你的语言真的很简单，你可以手动解析它，使用类似 StringTokenizer 的东西来做标记化，

*   否则，您可能最好学习使用 Java“解析器生成器”，例如 JavaCC 或 ANTLR。

无论哪种方式，您都需要阅读一些背景知识来理解所有术语。您可以从 Wikipedia 和/或其中一个解析器生成器的教程材料开始。或者，有关于这个主题的好教科书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T03:20:17.517

除了 Abdullah 所说的，如果你真的想尽可能节省每一盎司的内存，你应该使用 StringBuilder 而不是 String 连接。我相信我之前在某处读过，字符串连接为每个连接创建一个新的字符串对象，而 StringBuilder 会将它们全部添加到单个字符串中。不过应该没有太大关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T03:01:20.880

您确定要使用您正在使用的所有类吗？要解析“a=b+c+d..”之类的内容（假设您不尝试验证），最简单且可能最有效的方法是[在 Java lang String 中使用 split API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)

[然后使用StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)加入任何需要的内容

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-09T03:35:10.480

在我早年的生活中，我按照您的风格制作了一个方程求值器。**由于我对表达式树**一无所知，这花费了我大量的代码和复杂性。但是现在有了这个，您将能够轻松地使用本机 JAVA 代码向解析器添加更多功能。您将获得大量使用表达式树的示例。

# c# - 使用 C# 将 HashSet 中的一组正则表达式与 ASP.NET 中的字符串匹配的最佳方法是什么？

> ID：10068362
> 
> 赞同：2
> 
> 时间：2012-04-09T02:43:35.313
> 
> 标签：c#, asp.net, regex, performance

我想知道我是否以最有效的方式进行以下 ASP.NET C# 正则表达式匹配？

我在 HashSet 中有一组正则表达式，需要与输入字符串匹配，所以我这样做：

```
HashSet<string> hashMatchTo = new HashSet<string>();
hashMatchTo.Add(@"regexp 1");
hashMatchTo.Add(@"regexp 2");
hashMatchTo.Add(@"regexp 3");
hashMatchTo.Add(@"regexp 4");
hashMatchTo.Add(@"regexp 5");
//and so on

string strInputString = "Some string";

bool bMatched = false;
foreach (string strRegExp in hashMatchTo)
{
    Regex rx = new Regex(strRegExp, RegexOptions.CultureInvariant | RegexOptions.IgnoreCase);
    if (rx.IsMatch(strInputString))
    {
        bMatched = true;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:46:34.583

有两件事突然出现在我身上。第一个是您可以在创建集合的同时填充集合，如下所示：

```
 HashSet<string> hashMatchTo = new HashSet<string>()
  {
      @"^regexp 1$", 
      @"^regexp 2$",
      @"^regexp 3$",
      @"^[\w\s]+$",
      @"^regexp 5$"
      //and so on
  }; 
```

第二个是您应该使用静态版本`IsMatch()`，如下所示：

```
 string strInputString = "Some string";

  bool bMatched = false;
  foreach (string strRegExp in hashMatchTo)
  {
      if (Regex.IsMatch(strInputString,  strRegExp, 
            RegexOptions.CultureInvariant | RegexOptions.IgnoreCase))
      {
          bMatched = true;
          break;
      }
  }
  Console.WriteLine(bMatched);
} 
```

这样做的原因是静态 Regex 方法会自动缓存它们创建的任何 Regex 对象。但请注意，默认情况下缓存大小仅为 15；如果你认为你会使用更多，你需要增加[CacheSize](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.cachesize.aspx)属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:48:23.707

如果您的目标是一个简单的“是否匹配任何？真/假”，那么将所有正则表达式连接成一个大正则表达式并运行它。

```
string strRegexp = string.Join("|", listOfRegex.ToArray());

bool bIsMatched = Regex.IsMatch(strInputString, strRegExp, RegexOptions.CultureInvariant | RegexOptions.IgnoreCase);

Console.WriteLine(bMatched); 
```

*   没有“foreach”循环
*   更好的可读性
*   无需弄乱静态正则表达式缓存
*   在处理时，它会像在循环版本中使用“break”一样短路，但会进行更少的方法调用，这（应该）提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:36:54.483

这取决于你设置的内容，我不知道有多少是真的很多。但是您可能会考虑根据具体情况搜索标准。让您的程序知道要搜索的内容和位置，而不是遍历所有哈希集内容以检查可能的问题。我曾经使用一个简单的正则表达式从 2000 提供的 url 中提取要显示在列表视图中的信息，但它严重降低了整个程序的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T03:50:36.740

我看不出有什么不对。只要它足够快并且满足业务需求，我会考虑可读性而不是效率。

# html - 字符在不同浏览器中无法正确显示

> ID：10068367
> 
> 赞同：4
> 
> 时间：2012-04-09T02:45:14.427
> 
> 标签：html

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T02:51:34.503

You should save your HTML source as UTF8.

Alternatively, you can use HTML entities instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:05:08.320

The source code needs to be saved in the same encoding as you're instructing the browser to parse it in. If you're saving your files in UTF-8, instruct the browser to parse it as UTF-8 by setting an appropriate HTTP header or HTML meta tag (headers preferable, your web server may be setting one without you knowing). Use a decent editor that clearly tells you what encoding you're saving the file as. If it doesn't display correctly, there's a discrepancy between what you're telling your browser the file is encoded in and what it's really encoded in.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T02:52:14.363

Check to see if Apache is setup to send the charset. Look for the directive "AddDefaultCharset" and set it to Off in .htaccess or your config file.

Most/all browsers will take what is sent in the HTTP headers over what is in the document.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-19T13:25:43.483

If you're using Notepad++, I suggest You to use Edit Plus editor to copy the text (which has the special characters) and paste it in your file. This should work.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-09T03:02:33.843

Yes I had this problem too in notepad++ copy and pasting wasn't working with some symbols

I think SLaks is right

HTML entities for copyright symbol &#169

# mysql - MYSQL - 总和没有按预期求和

> ID：10068374
> 
> 赞同：0
> 
> 时间：2012-04-09T02:46:15.007
> 
> 标签：mysql, sum

现在是早上 04.17，我不知道出了什么问题！请帮忙！

我在表 user_logs 中有包含此类列的表：

```
id | user_id | action | reference | time
----------------------------------------
1  |   1     | login  |     0     | 1333800404
2  |   1     | logout |     1     | 1333800424
3  |   1     | login  |     0     | 1333800434
4  |   1     | logout |     3     | 1333800444 
```

并查询：

```
SELECT reference r,
  sum(time-(SELECT time FROM users_logs WHERE id = r)) time_of_logon
FROM users_logs
WHERE user_id = 1 AND action = 'logout' 
```

不幸的是 sum() 函数返回意外的值。

如果我删除 sum() 我会得到这样的查询：

```
SELECT reference r,
  (time-(SELECT time FROM users_logs WHERE id = r)) time_of_logon
FROM users_logs
WHERE user_id = 1 AND action = 'logout' 
```

结果：

```
r | time_of_logon
-----------
1 | 20
3 | 10 
```

正如预期的那样 - 我打印了所有行，其中 user_id = 1 的操作“注销”从我从子查询获得的时间（登录时间与注销连接）减少了注销时间。现在我有时间用户登录了。到目前为止一切都很好。现在，当我添加总和（如在第一个查询中）时，我希望 time_of_logon 的总和（应该是 30）。如果我使用 avg 函数而不是 sum 我会期望 15 ((10+20)/2)。

**总和版本：**我得到 60， **平均版本**- 我得到 30。

“时间”字段的类型是整数。

**我的猜测：** 我猜 mysql 以某种方式返回的不是 2 行，但它正在处理 4 行，或者将主查询下的一些计算加倍。因为 - avg 和 sum 结果都是应有的两倍。

也许这是我的大脑不再工作的时间问题，但我无法弄清楚出了什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:55:33.397

```
SELECT user_id, sum(time_of_logon) as sum_login_time
FROM
(
  SELECT user_id,
         reference as r, 
         (time-(SELECT time FROM users_logs WHERE id = r)) as time_of_logon
  FROM users_logs 
  WHERE user_id = 1 AND action = 'logout'
) subtable
GROUP BY user_id 
```

你能做一个两步查询吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:53:52.357

只需使用普通连接：

```
select t1.id as r, t2.time - t1.time as time_of_logon
from user_logs t1
join user_logs t2 on t2.reference = t1.id
where t1.action = 'login'
and t1.user_id = 1; 
```

除了显示的内容外，无需加入任何其他内容，因为只有注销具有非零参考值。实际上，`t1.action = 'login'`出于同样的原因，也没有必要，但可以保留 - 它可能有助于提高性能（你应该测试它）

如果你有一个索引，这也会表现得很好`reference`。

# javascript - 按字符串排序数组

> ID：10068377
> 
> 赞同：4
> 
> 时间：2012-04-09T02:46:23.430
> 
> 标签：javascript, jquery, arrays, sorting

现在，我有一个流列表，我想将带有字符串“online”的流推送到数组的前面，但我想很快地做到这一点。我知道我可以按值复制数组值并将在线值推到前面，但我想知道是否有更好的方法来做到这一点。

这只是一些示例代码，但它与我所做的类似。我怎样才能重新排列我的阵列以将在线推向前面？我对 JavaScript 或 jQuery 答案持开放态度。

```
var streams = new Array('online', 'offline', 'online', 'offline', 'online', 'offline', 'offline', 'online'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T02:47:58.453

```
streams.sort() 
```

会给你`["offline", "offline", "offline", "offline", "online", "online", "online", "online"]`

因为 f 在关闭和在线时出现在 n 之前

您可以使用`.reverse()`反转元素的顺序。

```
streams.sort().reverse() 
```

应该是您正在寻找的，您不需要重新分配数组（即做`streams = streams.sort().reverse()`），因为它在您的数组内部执行操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T02:48:54.803

使用内置数组函数：

```
streams.sort().reverse(); 
```

那很简单...

**MDN 文档：**

*   [`reverse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/reverse)
*   [`sort`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T02:48:27.020

```
streams.sort(); 
```

否则，您可能只想遍历数组。

# python - Virtualenv 返回“没有这样的文件或目录...”错误

> ID：10068388
> 
> 赞同：12
> 
> 时间：2012-04-09T02:49:36.537
> 
> 标签：python, virtualenv

该命令`virtualenv --no-site-packages env/`产生以下错误堆栈跟踪：

```
 The --no-site-packages flag is deprecated; it is now the default behavior.
New python executable in env/bin/python
Installing setuptools.............done.
Installing pip...
  Error [Errno 2] No such file or directory while executing command /home/zach/School/CS...env/bin/easy_install /usr/local/lib/pytho...pport/pip-1.1.tar.gz
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.7.1.2', 'console_scripts', 'virtualenv')()
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 928, in main
    never_download=options.never_download)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 1042, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 640, in install_pip
    filter_stdout=_filter_setup)
  File "/usr/local/lib/python2.7/dist-packages/virtualenv.py", line 966, in call_subprocess
    cwd=cwd, env=env)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1239, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory 
```

我正在使用 Ubuntu 11.10 和 Python 2.7。

编辑：想通了。

我最初使用 pip 安装它，所以我通过 pip 卸载并通过`apt-get`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-31T08:39:36.223

我在debian上也有同样的情况。升级`python-virtualenv`可以解决问题。

```
apt-get upgrade python-virtualenv 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T02:55:46.063

virtualenv 似乎正在尝试使用本地存档中的 easy_install 安装 pip。你能验证它是否存在于`/usr/local/lib/pytho...pport/pip-1.1.tar.gz`?

您可能需要确保事先正确安装了 pip。尝试：`easy_install -U pip`首先。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-12T13:23:35.037

在 mac 中运行`pip install virtualenv virtualenvwrapper`以安装 virtualenv。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T13:58:21.590

您应该确保 easy_install 的路径中没有空格：/home/zach/School/CS...env/bin/easy_install

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-18T19:30:06.610

If you are Debian user, then this command should resolve the problem:

```
sudo apt-get upgrade python-virtualenv 
```

# asp.net-mvc - 如何在 LINQ 和 MVC 中返回行，

> ID：10068390
> 
> 赞同：0
> 
> 时间：2012-04-09T02:50:05.600
> 
> 标签：asp.net-mvc, linq

我有带有 LINQ 的模型，它将返回 Rows。这里我在这个查询的模型类中的代码我想在视图中返回结果。我怎样才能做到这一点？

```
 public void retNumRecord(string email, string fname, 
                             string lname, string zip, string pref, 
                             string address, string tel)
    {
        int _pref = Convert.ToInt32(pref); 

        var x = (from p in db.eduardo_member_t
                 where (p.email != null && p.email.Contains(email))
                    || (p.fname != null && p.fname.Contains(fname))
                    || (p.lname != null && p.lname.Contains(lname))
                    || (p.zip != null && p.zip.Contains(zip))
                    || (p.pref != null && p.pref == _pref)
                    || (p.address != null && p.address.Contains(address))
                    || (p.tel != null && p.tel.Contains(tel))
                 select p); 

        return x;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T02:54:40.713

你需要把它作为一个模型放在你的视图和调用中

```
return View( retNumRecord(...) ); 
```

在你的行动中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T18:11:52.040

您将在控制器中调用该方法，然后返回 View(retNumRecord(..));

右键单击您的控制器名称，然后创建一个视图。进入视图后，您可以创建一个 for 循环来打印出每一行。

遵循[音乐商店教程](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)，因为它可以让您快速了解 MVC3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T18:03:08.310

void 不会返回任何东西。你需要一个`ActionResult`.

```
public ActionResult retNumRecord(....
{
   .....

   return View(x);
} 
```

这假设您有一个名为“retNumRecord”的视图，如果没有，则：

```
return View("yourviewname", x); 
```

或者，如果这是一个 ajax 调用：

```
return Json(x); 
```

# java - primefaces 组件不更新支持 bean

> ID：10068393
> 
> 赞同：0
> 
> 时间：2012-04-09T02:50:38.173
> 
> 标签：java, jsf, primefaces

我正在使用 primefaces 布局组件并且在嵌入形式的组件方面遇到困难：

```
<p:selectOneRadio id="customRadio" 
                    value="#{exams.examQuestions.currentQuestion.selectedAnswer}"
                    layout="custom">

<f:selectItem itemLabel="Option1" 
                    itemValue="#{exams.examQuestions.currentQuestion.examentry.answer1}"
                    rendered="#{exams.examQuestions.currentQuestion.render_question1}"/>

    <f:selectItem itemLabel="Option2" 
                    itemValue="#{exams.examQuestions.currentQuestion.examentry.answer2}"
                    rendered="#{exams.examQuestions.currentQuestion.render_question2}"/>

    <f:selectItem itemLabel="Option3" 
                    itemValue="#{exams.examQuestions.currentQuestion.examentry.answer3}"
                    rendered="#{exams.examQuestions.currentQuestion.render_question3}"/>

    <f:selectItem itemLabel="Option4" 
                    itemValue="#{exams.examQuestions.currentQuestion.examentry.answer4}"
                    rendered="#{exams.examQuestions.currentQuestion.render_question4}"/>

    <f:selectItem itemLabel="Option5" 
                    itemValue="#{exams.examQuestions.currentQuestion.examentry.answer5}"
                    rendered="#{exams.examQuestions.currentQuestion.render_question5}"/>

    <h:panelGrid columns="1">  
    <p:radioButton id="opt1"
        for="customRadio"
        itemIndex="0"
        rendered="#{exams.examQuestions.currentQuestion.render_question1}"/>  
    <h:outputLabel for="opt1"
        value="#{exams.examQuestions.currentQuestion.examentry.answer1}"
        rendered="#{exams.examQuestions.currentQuestion.render_question1}"/>
    <br/>
    <p:radioButton id="opt2" for="customRadio" 
        itemIndex="1"
        rendered="#{exams.examQuestions.currentQuestion.render_question2}"/>  
    <h:outputLabel for="opt2" 
        value="#{exams.examQuestions.currentQuestion.examentry.answer2}"
        rendered="#{exams.examQuestions.currentQuestion.render_question2}"/>
    <br/>
    <p:radioButton id="opt3" 
        for="customRadio" 
        itemIndex="2"
        rendered="#{exams.examQuestions.currentQuestion.render_question3}"/> 
    <h:outputLabel for="opt3" 
        value="#{exams.examQuestions.currentQuestion.examentry.answer3}"
        rendered="#{exams.examQuestions.currentQuestion.render_question3}"/>
    <br/>
    <p:radioButton id="opt4" 
        for="customRadio" 
        itemIndex="3"
        rendered="#{exams.examQuestions.currentQuestion.render_question4}"/>
    <h:outputLabel for="opt4" 
        value="#{exams.examQuestions.currentQuestion.examentry.answer4}"
        rendered="#{exams.examQuestions.currentQuestion.render_question4}"/>
    <br/>
    <p:radioButton id="opt5" 
        for="customRadio" 
        itemIndex="4"
        rendered="#{exams.examQuestions.currentQuestion.render_question5}"/> 
    <h:outputLabel for="opt5" 
        value="#{exams.examQuestions.currentQuestion.examentry.answer5}"
        rendered="#{exams.examQuestions.currentQuestion.render_question5}"/>
    </p:selectOneRadio> 
```

当我选择不同的项目时，支持 beanexams.examQuestions.currentQuestion.selectedAnswer 没有更新，怎么会？如果我从同一个表单调用此组件“customRadio”的更新，那么支持 bean 会自行更新，但是我无法在表单之外执行此操作。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:31:02.083

我真的不知道您到底想要什么（因为我在您的示例代码中看不到任何表单），但我想您的问题是您没有在最后一个 f:selectItem 之后关闭 p:selectOneRadio .. .

请仔细查看 primefaces 展示[selectOneRadio](http://www.primefaces.org/showcase/ui/selectOneRadio.jsf)

此外，如果您想从另一个表单更新组件，您可以像这样调用更新`update=":formIdOfComponent:componentID"`

# shell - (( COUNT++ )) -> shell 脚本中的“COUNT++: not found”

> ID：10068394
> 
> 赞同：3
> 
> 时间：2012-04-09T02:50:42.773
> 
> 标签：shell

```
#!/bin/sh
INTERVAL=1
COUNT=0
while [ $COUNT -le 9 ]
do
    (( COUNT++ ))
    sleep $INTERVAL
    echo "count is $COUNT"
done 
```

在执行。

```
$ sh ascript 
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found
count is 0
ascript: 9: COUNT++: not found 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T02:54:32.820

如果您想使用特定于 bash 的操作，您可能想要`#!/bin/bash`而不是在顶部。`#!/bin/sh`

您的脚本在我的 Mac 上运行良好，`sh`实际上只是`bash`. 如果你`sh`是一个真正的人，你可能不会那么幸运。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-09T02:55:24.470

`(( ))`将是一个嵌套子shell（实际上是其中两个），并调用了 command `COUNT++`。你想要`$(( ))`算术替换机制；但这实际上会*替换*，因此您要么想将其隐藏在注释中，要么使用涉及替换的增量。

```
: $(( COUNT++ )) # : is a shell comment 
```

或者

```
COUNT=$(( $COUNT + 1 )) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-05T15:35:55.813

```
#!/bin/bash
COUNT=0;
while [ $COUNT -le 9 ] ; 
do sleep 1; 
(( COUNT++ )) ; 
echo $COUNT ; 
done 
```

这是编写此脚本的更好方法。我建议您按以下方式运行脚本：
`./script.sh`
或
`bash ./script.sh`

如果您没有 bash，请使用以下方式：

```
#!/bin/sh
ENV=1
while [ $ENV -le 10 ]
do
sleep 1
echo $ENV
ENV=`expr $ENV + 1`
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T02:56:38.893

来自`help for`：

> ```
> for ((: for (( exp1; exp2; exp3 )); do COMMANDS; done
>     Arithmetic for loop.
> 
>     Equivalent to
>         (( EXP1 ))
>         while (( EXP2 )); do
>                 COMMANDS
>                 (( EXP3 ))
>         done
>     EXP1, EXP2, and EXP3 are arithmetic expressions.  If any expression is
>     omitted, it behaves as if it evaluates to 1.
> 
>     Exit Status:
>     Returns the status of the last command executed. 
> ```

不要忘记使用**`bash`**.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T02:55:57.110

这：`(( COUNT++ ))`不做你想做的事。

改成：`let "COUNT++"`

有关bash 中算术运算的更多信息，请参见：[http ://tldp.org/LDP/abs/html/ops.html。](http://tldp.org/LDP/abs/html/ops.html)

而且，要使用 bash，请使用`#!/bin/bash`而不是`#!/bin/sh`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-14T18:50:15.173

我的给我这个错误只是因为我尝试用 sh （例如 sh `code.sh`）执行它，但是当我这样做时`./code.sh`它起作用了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-25T20:27:18.033

当使用顺序重命名文件来增加变量时，从更改`#!/bin/sh`为`#!/bin/bash`对我来说就像一个梦想。`count++`

当我也得到时，原始脚本开始`#!/bin/sh`在 Fedora 中运行良好，但在 Kali (Debian) 中却不行

> 计数++：未找到

简单地替换`#!/bin/sh`来`#!/bin/bash`解决这个问题 - 大概是因为 Kali/Debian 中的默认 shell 不是 bash。这与我认为在配置使用破折号的 Kali 时必须更改默认 shell 一致。

# ruby-on-rails - 仅针对某些操作的自定义路由路径

> ID：10068395
> 
> 赞同：3
> 
> 时间：2012-04-09T02:50:44.553
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, routes

我已经有了这样的东西：

```
resources :users, :path => '', :path_names => { :edit => 'settings' } do
  resources :photos
end 
```

这给了我很多我真正想要的路线。

```
/{user_id}/settings #does everything "edit" did
/{user_id}/photos #lists photos for certain user 
```

但我在路由愿望清单上的最后一个条目是以资源丰富且 RESTful 的方式带回“用户”作为我的索引路径。因为现在，索引丢失到优先的根 URl。所以本质上，我不想`:path => ''`应用于索引操作。我试过添加`:except => [:index]`，但 ActiveRecord 仍然尝试匹配`/users/`为“用户”的 id。（这是字母数字，所以约束在这里没有帮助。）

接下来我应该尝试什么？还是我应该认真地写下个人的“匹配”声明？我觉得应该有一种方法可以从资源中构建它......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T02:31:34.927

我最终做的只是写了第二条路由规则（我想多了）。因为我已经`root`在我的路由中定义了，'/' 已经被 index、new 和 create 覆盖了。

因此，只需为单独的行重写规则，实际上就很容易了。

```
resources :users, :path => '/users', :only => [:index, :new, :create]
resources :users, :path => '', :path_names => { :edit => 'settings' } do
    resources :photos
end 
```

# macros - Clojure 中的广义线程宏

> ID：10068398
> 
> 赞同：32
> 
> 时间：2012-04-09T02:50:53.243
> 
> 标签：macros, clojure

注意：这与并发无关。这是关于线程宏的。

我知道`->`将对象放在第二个位置`->>`并将参数放在最后一个位置。

现在，我很好奇，就像`#( ... % )`函数的简写符号一样，是否有线程的简写符号可以让我将参数放置在*任意*位置？

目标是，不是让线程通过固定位置...我可以编写任意形式，并在特殊位置插入 %% ，而 %% 是插入线程的位置。

谢谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-07-14T00:29:19.373

从 1.5 开始，Clojure 中有一个通用的线程宏，称为[as->](https://github.com/clojure/clojure/blob/c9e70649d2652baf13b498c4c3ebb070118c4573/src/clj/clojure/core.clj#L6913)。

这条推文举例说明了它是如何工作的：[https ://twitter.com/borkdude/status/302881431649128448](https://twitter.com/borkdude/status/302881431649128448)

```
(as-> "/tmp" x
      (java.io.File. x)
      (file-seq x)
      (filter (memfn isDirectory) x)
      (count x)) 
```

第一个“x”绑定到“/tmp”，并用它制作一个文件。'x' 再次反弹到结果文件，并通过 'file-seq' 函数等。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-09T03:13:33.633

[Swiss Arrows](https://github.com/rplevy/swiss-arrows)图书馆的“钻石魔杖”可以满足您的要求：

```
(-<> 0
 (* <> 5)
 (vector 1 2 <> 3 4))
; => [1 2 0 3 4] 
```

也就是说，这不是您最终经常需要的东西（或者在我的*Clojure*经验中）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-09T06:18:31.847

万一其他人遇到这种情况，提供的宏存在是有原因的，但任意放置的宏不存在：后者会导致糟糕的 API 设计。

宏将`->`参数放在第一个位置。这对应于对某些主题参数起作用的函数，例如`conj`, `assoc`。

宏将`->>`参数放在最后一个位置。这对应于对序列起作用的函数，例如`map`, `reduce`。

设计好您的 API，您将不太可能需要这样的宏。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-09T03:26:30.620

有一个提供此功能的库，但我忘记了在哪里。它可能在已弃用的 clojure-contrib 中。这是`-$>`宏。

但是您可以从 clojure 的核心[-> 宏](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L1529)中派生出一个来制作您正在寻找的那个：

```
(defmacro -$>
    ([x] x)
    ([x form] (if (seq? form)
                (with-meta (map #(if (= %1 '$) x %1) form) (meta form))
                (list form x)))
    ([x form & more] `(-$> (-$> ~x ~form) ~@more))) 
```

并使用 $ 表示插入点：

```
user=> (-$> 2 str (identity $) (println $))
2
nil 
```

从技术上讲，您可以`$`在一种形式中使用多个。但是这种实现会多次扩展相同的表单（以换取简单性）。

# iphone - 从 NSIndex 访问字符串

> ID：10068402
> 
> 赞同：1
> 
> 时间：2012-04-09T02:51:30.547
> 
> 标签：iphone

我目前有一个 UITableView，它由一个充满练习的 .plist 填充。我想要做的是通过将每个单击的练习存储到一个数组中来访问表格中的各个练习，该数组稍后将用于填充单独的 UITableView。

我究竟如何访问这些单独的单元格，以便我可以将它们存储到这个数组中。这是我到目前为止所拥有的：

```
-(IBAction) saveWorkout {
    NSMutableArray *workout = [NSMutableArray arrayWithCapacity:10];

    [workout addObject: ] // I'm assuming this is where I add a cell to an array (or atleast the cell's string).

} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:21:59.717

-(void)didSelectRowAtIndexPath:(NSIndexPath*)indexPath {

您可以通过 indexPath.row 在这里获取索引

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:49:07.907

在不深入研究问题的实际代码部分的情况下，调用`-cellForRowAtIndexPath`检索标题（可能）非常昂贵，尤其是在多次调用的情况下。用于`-didSelectRowAtIndexPath:`获取数据源数组中标题的索引，然后将该对象添加到列表中。`-saveWorkout`完成/达到一定限制时调用。

同样可能看起来像：

```
-(void)didSelectRowAtIndexPath:(NSIndexPath*)indexPath {
     //other code and such... 
     //get the index of the object in our original array and add the corresponding object to the new array.
     [customWorkoutArray addObject:[workoutArray objectAtIndex:indexPath.row]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:10:20.680

在代码中重述@CodaFi：

```
@property (strong, nonatomic) NSMutableArray *selectedElements;
@synthesize selectedElements=_selectedElements;

- (NSMutableArray *)selectedElements {
    if (!_selectedElements) {
        _selectedElements = [NSMutableArray array];
    }
    return _selectedElements;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    id element = [self.myModel objectAtIndex:indexPath.row];
    // this is the key:  this array will now be the basis for your subsequent table of selected items
    [self.selectedElements addObject:element];

    // do something to your model here that indicates it's been selected
    // have your cellForRow... method interrogate this key and draw something special
    [element setValue:[NSNumber numberWithInt:1] forKey:@"selected"];

    // reload that row so it will look different
    [tableView beginUpdates];
    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath withRowAnimation:UITableViewRowAnimationFade];
    [tableView endUpdates];

    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

# windows-phone-7 - wp7 webbrowser 看不到 JS 警告信息？

> ID：10068403
> 
> 赞同：2
> 
> 时间：2012-04-09T02:51:31.820
> 
> 标签：windows-phone-7

我用 iOS、android 和 wp7 访问服务器上的同一个网页，其他都很好，但是 wp7 webbrowser 看不到 JS 警报消息。我设置 IsScriptEnabled=True，还是不行。在 WebBrowser 中显示警报消息的唯一方法是使用 ScriptNotify 并在服务器端更改代码（添加 Window.external.notify） ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:04:30.207

Windows Phone 中的 WebBrowser 似乎不支持 'alert' 语句。

# actionscript-3 - Flash CS 5.5 发布时不加载 xml 数据到列表

> ID：10068407
> 
> 赞同：0
> 
> 时间：2012-04-09T02:52:31.337
> 
> 标签：actionscript-3, flash, flash-cs5.5

我构建了一个 Flash 视频播放器，它在导出到 swf 时可以正常工作。但是，当我发布它时（F12）不会加载 xml 文件。结果视频播放器卡在第 2 帧（其中显示了一个带有视频标题的列表，点击标题播放特定视频）。xml 链接不以 .xml 结尾。这是我关于 xml 加载的代码。我尝试将 Flash Player 从 10.2 更改为 9，但我遇到了同样的问题。此外，我认为第 2 帧中的一些按钮不起作用，因为 xml 加载时“卡住”了。（在 swf 中导出时工作正常！）

Flash Player 版本：10.2，Actionscript:3.0，Flash Professional CS 5.5，fps:24，大小：850px(w)x480px(h)。FRAME 2 中的代码。谢谢你们的时间。

```
Security.allowDomain( "*" );
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.events.Event;
import fl.controls.Label;

var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.TEXT;
var request:URLRequest = new URLRequest("http://www.olympiacos.org/feeds/videos")
loader.load(request);
loader.addEventListener(Event.COMPLETE, handleComplete);
loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError)
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError)
loader.addEventListener(HTTPStatusEvent.HTTP_STATUS, onHTTPStatus2)    
function onIOError(evt:IOErrorEvent){
    trace("IOError: "+evt.text);
}
function onHTTPStatus2(evt:HTTPStatusEvent){
    trace("HTTPStatus: "+evt.status);
}
function onSecurityError(evt:SecurityErrorEvent){
    trace("SecurityError: "+evt.text);
}
function handleComplete(event:Event):void
{
try
{
    var rawXML:XML = new XML(event.target.data);
    trace(rawXML);
    var list:XMLList = rawXML.channel.item;
    for (var i:uint=0; i<list.length(); i++)
    {
        t_text.text = list.title.text()[i];
        var data1:String = (list[i].description);
        var srcRegExp:RegExp = /src="(.*?)"/;
        var data2:String = srcRegExp.exec(data1)[1];
        var lwr = data2.search(/1_/i);
        var her = lwr + 10;
        var data3 = data2.substring(lwr,her);
        trace("Entry Id"+i+": "+data3);
        List1.addItem({label:list.title.text()[i],data:data3});
    }
}
catch (e:TypeError)
{
    //Could not convert the data, probavlu because
    //because is not formated correctly
    trace("Could not parse the XML");
    trace(e.message);
}
}

List1.addEventListener(Event.CHANGE, itemChange);
openbtn.addEventListener(MouseEvent.CLICK, opentween);
closebtn.addEventListener(MouseEvent.CLICK, closetween);
closebtn.visible=true;
openbtn.visible=false;

function itemChange(e:Event):void
{
if ( currentFrame == 2)
{
    trace("Video selected");
    gotoAndPlay(3);
}
t_text.text = List1.selectedItem.label;
var videoslcd = List1.selectedItem.data;

}

stop(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:05:46.387

what;s your publishing setting regarding playback security? Should be "Access network only"

![FlashProfessional Publishing Settings](../Images/b13dadb051c23e25c111871a59431411.png)

# ruby-on-rails - 向后嵌套形式？

> ID：10068409
> 
> 赞同：0
> 
> 时间：2012-04-09T02:52:39.150
> 
> 标签：ruby-on-rails

通常人们制作嵌套形式，其中嵌套属性被“属于”主要对象的对象接受......

例如：

```
class Brand < ActiveRecord::Base
  has_many :models
end

class Model < ActiveRecord::Base
  belongs_to :brand
end 
```

因此，鉴于上述情况，人们可能期望为品牌制作一个嵌套表单，该表单接受模型的嵌套属性。

这听起来可能很荒谬，但我想做的是为模型创建一个表单，它接受品牌的嵌套属性……这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:37:06.137

是的你可以。

```
class Brand < ActiveRecord::Base
  has_many :models
end

class Model < ActiveRecord::Base
  belongs_to :brand
  accepts_nested_attributes_for :brands
end 
```

在视图中制作后

```
= form_for Model.new do |f|
  %p
    = f.label :name
    = f.text_field :name
  %p
    Brands:
    - 4.times do
      = f.fields_for :brand, Brand.new do |bf|
        = br.text_field :name
  ... 
```

此表单将为这样的品牌生成参数：

```
model: {
  name: "Shiny Ann",
  brands_attributes: {
    "0": {name: "Brand1"},
    "1": {name: "Brand2"},
    "2": {name: "Brand3"}
  }
} 
```

# matlab - matlab ode23求解器错误未知

> ID：10068410
> 
> 赞同：1
> 
> 时间：2012-04-09T02:53:08.550
> 
> 标签：matlab

我们正在尝试使用 matlab 的 ode23 求解器对 DC/DC 降压转换器进行建模。当我们尝试运行我们的代码时，会出现以下错误：

```
??? Error using ==> odearguments at 91
The last entry in tspan must be different
from the first entry.

Error in ==> ode23 at 171
[neq, tspan, ntspan, next, t0, tfinal,
tdir, y0, f0, odeArgs, odeFcn, ...

Error in ==> buck2 at 13
      [t,x] = ode23(@event1,[t0 tf],x0); 
```

当我们取出修改初始条件数组的代码时，代码运行没有错误，但不会产生预期的结果。

这是我们的代码：

```
function buck2
close all
clear all
clc

t0 = 0; 
tf = 1;
x0 = [0 0];  % Initial conditions

for i = 1:10
    if (1 <= i <= 4),
      [t,x] = ode23(@event1,[t0 tf],x0);
      nt = length(t);          
    else
      [t,x] = ode23(@event2,[t0 tf],x0);
      nt = length(t);   
    end   
    t0 = t(nt);
    x0 = x(nt);
end

plot(t,x)

function xdot = event1(t,x)
L = (12.12e-6);
C = (19.5e-6);
RC = (2.5*19.5e-6);
xdot = [(24/L) - (x(2)/L); (x(1)/C) - (x(2)/RC)];

function xdot = event2(t,x)
L = (12.12e-6);
C = (19.5e-6);
RC = (2.5*19.5e-6);
xdot = [-(x(2)/L); (x(1)/C) - (x(2)/RC)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:29:55.063

这是问题所在：

在循环中，第一次迭代：

你打电话给以下

```
[t,x] = ode23(@event1,[t0 tf],x0); 
```

t0 = 0；和 tf = 1;

然后进一步向下循环：

```
t0 = t(nt); %so t0 = 1; 
```

下一个 for 循环迭代：

```
[t,x] = ode23(@event1,[t0 tf],x0); 
```

换句话说：

[t,x] = ode23(@event1, ***[1 1]*** ,x0);

解决方案：

修改`t0 = t(nt);`或更新 tf`tf = t0 +1;`

更新：

另外，您应该更正以下内容`x0 = x(nt,:);`

# prolog - Prolog给出实例化错误

> ID：10068412
> 
> 赞同：0
> 
> 时间：2012-04-09T02:54:34.487
> 
> 标签：prolog

我被作业中的序言错误困扰了很长时间。

我尝试使用添加`is/2`，它总是导致：

```
++Error[XSB/Runtime/P]: [Instantiation] ++Error[XSB]: [Runtime/C] Uninstantiated
 argument of evaluable function +/2
   Goal: _Var + 2, probably as 2nd arg of is/2 
```

任何指针都会极大地帮助我完成作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T10:12:36.120

问题是当 Prolog 尝试计算 Cost2 的值时，F 的值仍然未知，因此添加尝试会导致实例化错误。当达到加法时，您应该确保 F 是基值。

# javascript - 为什么 pin it 按钮会创建一个 iframe？

> ID：10068417
> 
> 赞同：-3
> 
> 时间：2012-04-09T02:55:14.923
> 
> 标签：javascript, css, iframe

pin it 按钮的显示逻辑位于 iframe 之外，但仍会创建 iframe。可能是 iframe 的创建是为了不干扰父页面样式，但是否有任何引用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:19:55.910

创建 iframe 也是为了利用包含身份验证令牌的 cookie 来实现无缝交互，例如跟随我的 twitter 按钮或 facebook like 按钮。

# mysql - 选择并删除过期的重复记录？

> ID：10068418
> 
> 赞同：-1
> 
> 时间：2012-04-09T02:55:21.647
> 
> 标签：mysql, duplicates, sql-delete

我有一个分级数据库，如下所示：

```
StudentId | SubjectCode | Grade | DateApproved

Student1 | SUBJ1234 | - | 30-3-2012<br/>
Student1 | SUBJ1234 | 2.25 | 31-3-2012<br/>
Student1 | SUBJ45678 | 2.00 | 31-2012 
```

如果您注意到，有一个过时的副本，成绩为空白（用 表示`"-"`）。

我想从数据库中选择所有有重复但更近的项目的空白等级，所以我可以删除它们。

我该怎么做`SQL (MySql 5.5)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T07:34:51.613

你可以试试这个：

```
SELECT * 
   FROM yourTableName as t1 
   WHERE t1.Grade = "-" 
      AND EXISTS (SELECT * 
                     FROM yourTableName as t2 
                     WHERE t1.StudentId = t2.StudentId 
                         AND t1.SubjectCode = t2.SubjectCode 
                         AND t1.DateApproved < t2.DateApproved
                 ) 
```

该代码基本上从您的表中选择所有字段，这些字段的等级设置为`-`，并且有一条记录具有相同的`StudentId`和`SubjectCode`更高的（较新）`DateApproved`。

编辑：如果您希望“新”记录具有已定义`Grade`（除 之外`-`），`AND t2.Grade != '-'`请在内部查询中的最后一个条件之后、右括号之前添加：

# algorithm - 哈希碰撞线性探测运行时间

> ID：10068426
> 
> 赞同：11
> 
> 时间：2012-04-09T02:56:18.060
> 
> 标签：algorithm, data-structures, hashtable, asymptotic-complexity

我正在尝试和朋友一起做作业，一个问题询问线性探测方法的搜索、添加和删除的平均运行时间。我认为它是 O(n)，因为它必须检查一定数量的节点，直到找到要添加的开放节点。并且在搜索时，它从原始索引开始并向上移动，直到找到所需的数字。但我的朋友说它是 O(1)。哪一个是对的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T11:34:37.457

当我们谈论渐近复杂性时，我们通常会考虑非常大的 n。现在对于哈希表中的冲突处理，一些方法是链式哈希和线性探测。在这两种情况下，可能会发生两件事（这将有助于回答您的问题）： 1\. 由于哈希表已满，您可能需要调整其大小 2\. 可能会发生冲突。

在最坏的情况下，这将取决于您如何实现哈希表，例如在线性探测中您找不到数字，您继续移动并且您正在寻找的数字在最后。这是 O(n) 最坏情况的运行时间。谈到链式散列技术，当发生冲突时，要处理它们说我们已经将键存储在平衡二叉树中，因此最坏情况下的运行时间将是 O(log n)。

现在来到最佳情况运行时间，我认为没有混淆，在任何一种情况下都是 O(1)。

O(n) 会在最坏的情况下发生，而不是在设计良好的哈希表的平均情况下发生。如果在平均情况下开始发生这种情况，哈希表将不会在数据结构中找到位置，因为平均而言，平衡树将始终为您提供 O(log n) 并且在此之上也将保留顺序。

很抱歉这么说，但不幸**的是你的朋友是对的。**您的情况会在最坏的情况下发生。

还可以在这里查看更多信息，即摊销运行时间：[哈希表的时间复杂度](https://stackoverflow.com/questions/3949217/time-complexity-of-hash-table)

# python - 在 vpython 中移动/隐藏按钮

> ID：10068427
> 
> 赞同：1
> 
> 时间：2012-04-09T02:56:27.293
> 
> 标签：python, graphics, vpython

如何在 VPython 中隐藏按钮或将其移出屏幕？我试过了：

```
 del button
 button.visible = False
 button.pos.x = 500 # well off the screen 
```

这些似乎都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T02:23:44.253

我想到了。打开 Lib\site-packages\vis\controls.py（在您的 python 文件夹中）。找到按钮类。在底部插入此功能。

```
class button(ctrl):
...
  def _set_visible(self,value):
    self.box1.visible = value
    self.box2.visible = value
    self.box3.visible = value
    self.box4.visible = value
    self.button.visible = value
    self.label.visible = value
  def _get_visible(self):
    return self.box1.visible
  visible =property(_get_visible,_set_visible) 
```

# ios - MDM：服务器 url 的 ssl 问题

> ID：10068429
> 
> 赞同：4
> 
> 时间：2012-04-09T02:56:52.450
> 
> 标签：ios, https, localhost, mdm

我想使用 Lion Server 管理 iOS 设备，我已经购买了 Lion Server 并安装在具有 Lion OS 10.7 的 Mac 系统中。我想在我们自己的网络中管理设备，我没有为 MDM 指定域。在 IPCU 中为 MDM 创建配置文件时，需要服务器 url 必须以“https://”开头。

因此，由于“htts”，我无法在 iOS 设备中安装 MDM 配置文件。我尝试获取 ssl 证书进行试用，但这不适用于专用网络。

是否有任何解决方案可以在不购买 ssl 证书或公共域的情况下解决该问题。

如果我做错了什么，请纠正我并提出正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:05:01.877

自签名 ssl 将起作用，在服务器端生成自签名 ssl 证书时，生成 identity.p12 证书，此证书需要在 IPCU 的身份部分使用。

也经历[这个](https://stackoverflow.com/questions/9502420/the-identity-certificate-for-com-xyz-profile-mdm-could-not-be-found/10569613#10569613)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:04:48.063

如果您使用 Safari 访问 MDM Web 服务器上的页面并收到有关服务器身份的弹出对话框警告，则您需要在设备上安装 SSL 证书以允许证书受信任。这可以通过使用 iPCU 或允许来自 Web 服务器的证书来实现。

# jquery - Jquery - 如何更改动态创建的 div 的元素？

> ID：10068433
> 
> 赞同：0
> 
> 时间：2012-04-09T02:57:49.777
> 
> 标签：jquery, css, dynamic, styling

我有一个动态创建的 div 数组。我可以单独访问它们并相应地更改某些属性。问题是如何做到这一点，一旦我更改下一个 div 的属性，前一个会进入初始状态？我在代码中写了这个问题..

```
<% @relevant_videos.each_with_index do |vid, idx| %>
       <%=  image_tag("http://img.youtube.com/vi/#{vid.content}/0.jpg", :id  => "img_div_#{idx}", :class => "span2 thumb", :style => "margin-bottom: 10px; margin-top: 10px") %>
      <div id="vid_vid_<%=idx%>"  style="display: none"> <%= vid.id %></div>
    <% end %>

    <script>
      var ids = "<%= @node.parent_relation.videos.length %>";
      console.log(ids);
      var div_arr = [];
      var img_arr = [];
      var vid_id = 0;
      for( i=0; i < parseInt(ids); i++){
        var x = String("vid_vid_"+String(i));
        var y = String("img_div_"+String(i));
        div_arr.push(x);
        img_arr.push(y);
      }
    for ( i=0; i < parseInt(ids); i++){
      var vst = '#'+String(img_arr[i]);
      var dst = '#'+String(div_arr[i]);
      $(function() {
          $(vst).click({dst: dst}, function(event){
          var vid_id = $(event.data.dst).html();
          $.post("/nodes/iframize/", {video_id: vid_id});
          //HERE IS THE SOLUTION I AM USING, NOT SURE ABOUT IT'S EFFECTIVENESS..
          var old_div = $("#data_div").data("mydiv");
          $(old_div).css("background","rgba(255,255,255,0.3)", "border-radius", "8px");
          $(this).css("background","rgba(255,255,50,0.5)", "border-radius", "8px");
          $("#data_div").data("mydiv", this);
        }); 
     })
    }
    </script>
! 
```

谢谢！

# objective-c - ObjC 类对象可以符合协议吗？

> ID：10068434
> 
> 赞同：19
> 
> 时间：2012-04-09T02:58:13.347
> 
> 标签：objective-c, class, syntax, protocols

有没有办法向编译器指示类对象符合协议？

据我了解，通过创建`+(void)foo`类方法，*该类对象的实例*将这些方法作为*实例方法*。因此，只要我`+(void)foo`为所有必需的协议方法创建方法，我就可以让一个类对象充当委托。

我的问题当然是在类的头文件中，我只知道如何指示类的实例符合协议（通常是这种情况）。所以，我想出的最好的方法是像这样转换类对象：

```
something.delegate = (id<SomethingDelegate>)[self class] 
```

有任何想法吗？

相关但不同： [ObjC：是否有“类协议”之类的东西？](https://stackoverflow.com/questions/9387262/objc-is-there-such-a-thing-as-a-class-protocol)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-09T15:18:15.450

您现在正在做的事情是正确的，因为它会使警告静音，这是您的目标。您将发送协议中为实例定义的类对象消息，这有点令人困惑，但运行时并不关心。

这样想：你想为一个响应协议中定义的消息的对象设置一个委托。你的班级这样做，你的班级也是一个对象。因此，您应该将您的类视为符合该协议的对象。因此，您所写的内容是完全正确的（基于您要执行的操作）。

但是，需要注意的一点是，此类将无法正确响应`conformsToProtocol:`. 无论如何，这对于委托设置通常是可以的（委托通常不检查类是否符合 - 他们只是检查它是否可以响应选择器）。

作为旁注，您可以在语法上做的一件事是：

```
Class<SomethingDelegate> variable = (Class<SomethingDelegate>)[self class]; 
```

这里的区别在于编译器将使用协议中的类方法而不是实例消息。不过，这不是您想要的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T03:02:48.503

没有 Objective-C 语法来指示元类符合协议。

我认为你可以在运行时通过`class_addProtocol`在元类上使用来做到这一点。但我还没有尝试过。

我猜你也可以`+conformsToProtocol:`在你的类上写一个方法，然后对你的一致性撒谎。这可能会产生意想不到的副作用，因为已经有一个`+conformsToProtocol:`on `NSObject`（除了`-conformsToProtocol:`）。

这些都不会消除强制转换来关闭编译器的需要。只需使用单例。

# c# - 禁用浏览器缓存页面和在 Azure 中运行的 javascript

> ID：10068435
> 
> 赞同：2
> 
> 时间：2012-04-09T02:58:15.213
> 
> 标签：c#, .net, azure

每当我们部署应用程序并且客户端审查应用程序时，有时 javascript 不起作用（不完全）。但是当刷新浏览器时，页面会按预期工作。

我怀疑它与缓存有关。有没有办法禁用页面缓存？我正在使用带有 .NET 4.0 的 Azure

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:34:03.600

我知道在大多数浏览器中可靠地停止缓存文件和链接的唯一方法是在文件中附加一个随机数或时间。例如

```
http://www.domain.com/js/script.js?date=20120409120003 
```

这意味着每次加载页面时它都是一个新链接，并且下次它去获取文件时它不会在缓存中提供它。

# java - 在常规 Java 项目中使用 Android 库

> ID：10068448
> 
> 赞同：6
> 
> 时间：2012-04-09T03:00:15.280
> 
> 标签：java, android, class, face-detection

我希望在常规的非 android java 项目上使用 android 类。具体来说，我想使用来自 android.media 的 FaceDetector 我知道有 OpenCV 和其他库可以用来检测图像中的人脸，但我希望使用 androids 库。有没有办法将androids库链接到java项目？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-02T23:38:55.077

*   转到您的 java 项目的构建路径

*   添加一个新的外部 jar

*   浏览到您的 android 平台安装位置（通常是 C:\Program Files (x86)\Android）

*   在 android-sdk\platforms\android-x（其中 x 是您拥有的 android 版本）下选择要添加到项目的 android.jar 文件。

    现在你在引用的库下有了 android 库，你可以在你的 java 项目中使用任何你想要的 android 类。

另一种方法是使用 android 源，只从 android 库中获取您需要的 java 文件并将它们放入您的 java 项目中。这样做的好处是您可以修改代码并使其与您的 java 工作更兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T08:44:08.573

android 库可能包含对系统 API 的一些调用。在包含上述步骤的库之前查找它们。我建议您查看 android 库的文档并查找它调用 android 系统 API 的挂钩。修改源以使用您的网络摄像头的 API，然后将其作为库包含

# c# - 明显的 BufferBlock.Post/Receive/ReceiveAsync 竞赛/错误

> ID：10068451
> 
> 赞同：17
> 
> 时间：2012-04-09T03:00:39.960
> 
> 标签：c#, task-parallel-library, async-await, dataflow, tpl-dataflow

*交叉发布到[http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/89b3f71d-3777-4fad-9c11-50d8dc81a4a9](http://social.msdn.microsoft.com/Forums/en-US/tpldataflow/thread/89b3f71d-3777-4fad-9c11-50d8dc81a4a9)*

我知道......我并没有真正发挥 TplDataflow 的最大潜力。ATM 我只是`BufferBlock`用作消息传递的安全队列，其中生产者和消费者以不同的速率运行。我看到一些奇怪的行为让我不知道如何进行。

```
private BufferBlock<object> messageQueue = new BufferBlock<object>();

public void Send(object message)
{
    var accepted=messageQueue.Post(message);
    logger.Info("Send message was called qlen = {0} accepted={1}",
    messageQueue.Count,accepted);
}

public async Task<object> GetMessageAsync()
{
    try
    {
        var m = await messageQueue.ReceiveAsync(TimeSpan.FromSeconds(30));
        //despite messageQueue.Count>0 next line 
        //occasionally does not execute
        logger.Info("message received");
        //.......
    }
    catch(TimeoutException)
    {
        //do something
    }
} 
```

在上面的代码中（它是 2000 行分布式解决方案的一部分），`Send`每 100 毫秒左右定期调用一次。这意味着一个项目以每秒 10 次左右的速度被`Post`编辑。`messageQueue`这是经过验证的。但是，偶尔会出现`ReceiveAsync`在超时内没有完成（即`Post`没有导致`ReceiveAsync`完成）并且`TimeoutException`在 30 秒后被提升。此时，`messageQueue.Count`已是数百。这是出乎意料的。在较慢的发布速度（1 个帖子/秒）中也观察到此问题，并且通常发生在 1000 个项目通过`BufferBlock`.

所以，为了解决这个问题，我使用了以下代码，它可以工作，但在接收时偶尔会导致 1s 延迟（由于上述错误发生）

```
 public async Task<object> GetMessageAsync()
    {
        try
        {
            object m;
            var attempts = 0;
            for (; ; )
            {
                try
                {
                    m = await messageQueue.ReceiveAsync(TimeSpan.FromSeconds(1));
                }
                catch (TimeoutException)
                {
                    attempts++;
                    if (attempts >= 30) throw;
                    continue;
                }
                break;

            }

            logger.Info("message received");
            //.......
        }
        catch(TimeoutException)
        {
            //do something
        }
   } 
```

对我来说，这看起来像是 TDF 中的竞争条件，但我无法深入了解为什么在我`BufferBlock`以类似方式使用的其他地方不会发生这种情况。实验性地从`ReceiveAsync`to改变`Receive`并没有帮助。我没有检查过，但我想孤立地看，上面的代码可以完美运行。这是我在“TPL 数据流简介” [tpldataflow.docx](http://www.microsoft.com/download/en/details.aspx?id=14782)中看到的一种模式。

我能做些什么来解决这个问题？是否有任何指标可以帮助推断正在发生的事情？如果我无法创建可靠的测试用例，我还能提供哪些信息？

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:32:56.600

Stephen seems to think the following is the solution

> var m = await messageQueue.ReceiveAsync();
> 
> instead of:
> 
> var m = await messageQueue.ReceiveAsync(TimeSpan.FromSeconds(30));

Can you confirm or deny this?

# javascript - 使用类选择器附加事件处理程序会影响该类的动态添加元素吗？

> ID：10068452
> 
> 赞同：2
> 
> 时间：2012-04-09T03:00:51.047
> 
> 标签：javascript, jquery, delegates

我正在使用 jQuery 将一个函数附加到整个类的单击事件。例如：

```
$(".clickDiv").click(function(){
   $(this).hide();
}); 
```

在我的客户端 javascript 上，我`.clickDiv`动态创建了更多实例。
我需要`$(".clickDiv).click(function...)`再次调用，还是新实例会自动将该函数绑定到点击事件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T03:02:23.233

是的，除非您使用`delegate event`

像这样：

```
$('#container').on('click', '.clickDiv',  function() {
   $(this).hide();
}); 
```

`on` [文档](http://api.jquery.com/on/)：

> 如果选择器被省略或为空，则事件处理程序被称为直接或直接绑定。每次在选定元素上发生事件时都会调用处理程序，无论它是直接发生在元素上还是来自后代（内部）元素的冒泡。
> 
> 当提供选择器时，事件处理程序被称为委托。当事件直接发生在绑定元素上时，不会调用处理程序，而只会调用与选择器匹配的后代（内部元素）。jQuery 将事件从事件目标冒泡到附加处理程序的元素（即，从最里面到最外面的元素），并为沿着该路径匹配选择器的任何元素运行处理程序。
> 
> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。
> 
> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

只是因为这里有太多人建议您应该使用`live`,`live`已被弃用，因为 version `1.7`by并在 version by`on`中被替换`1.4.3``delegate`

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T19:39:37.353

```
I am attaching an event like : 

$('body').on('click', 'button[data-tracking], a[data-tracking]',

                function(event) { console.log($(event.target));
});

and want to get to the target of element which is set up as :
  <pre> <[]a data-tracking="hello" href="hello">
    \<\span\>test now\<\/span\>
   \<\/a\>
 </pre>
it does work perfectly, but event.target gives me "span" element but what i want is "a" element so that I could get to value of data-tracking attribute. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:09:16.930

这会将事件绑定到所有新实例

```
$('.clickDiv').live('click',  function() {
   $(this).hide();
}); 
```

[http://api.jquery.com/live/](http://api.jquery.com/live/)

# multithreading - 从单个“控制”面板重新绘制多个 JPanel

> ID：10068455
> 
> 赞同：3
> 
> 时间：2012-04-09T03:01:43.250
> 
> 标签：multithreading, swing, jpanel

所以我正在尝试设置一个应用程序，其中我在 jframe 中有多个面板。假设其中 3 个纯粹用于显示目的，其中一个用于控制目的。我正在使用borderLayout，但我认为布局不应该真正影响这里的事情。

我的问题是：我希望三个显示面板的重新绘制受控制面板中按钮的控制，并且我希望它们在按下控制面板上的按钮时同步执行。为此，我设置了这个小方法：

```
public void update(){
            while(ButtonIsOn){
                a.repaint();
                b.repaint()
                c.repaint();
                System.out.println("a,b, and c should have repainted");

                }
    } 
```

其中 a、b 和 c 都是显示面板，我希望 a、b 和 c 都连续重新绘制，直到我再次按下按钮。问题是，当我执行循环时，消息在无限循环中打印，但没有一个面板做任何事情，即它们都没有重新绘制。

我一直在阅读事件调度线程和摆动多线程，但到目前为止我发现没有任何东西真正解决了我的问题。有人可以告诉我我在这里做错了什么，或者更好的是一些示例代码来处理我所描述的情况吗？谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:36:13.510

[java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/package-summary.html)包为并发编程提供了非常强大的工具。

在下面的代码中，我使用了 a `ReentrantLock`（它的工作方式与 Java`synchronized`关键字非常相似，确保多个线程对单个代码块的互斥访问）。提供的另一件好事`ReentrantLock`是`Conditions`，它允许`Threads`在继续之前等待特定事件。

在这里，简单地循环，`RepaintManager`调用`repaint()`. `JPanel`但是，当`toggleRepaintMode()`被调用时，它会阻塞，等待`modeChanged Condition`直到`toggleRepaintMode()`再次被调用。

您应该能够立即运行以下代码。按下`JButton`切换重绘（您可以通过语句`JPanel`看到工作）。`System.out.println`

一般来说，我强烈建议您熟悉[java.util.concurrent](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/package-summary.html)提供的功能。那里有很多非常强大的东西。[http://docs.oracle.com/javase/tutorial/essential/concurrency/](http://docs.oracle.com/javase/tutorial/essential/concurrency/)上有一个很好的教程

```
import java.awt.Component;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Collection;
import java.util.Collections;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class RepaintTest {
    public static void main(String[] args) {

        JFrame frame = new JFrame();
        JPanel panel = new JPanel()
        {
            @Override
            public void paintComponent( Graphics g )
            {
                super.paintComponent( g );

                // print something when the JPanel repaints
                // so that we know things are working
                System.out.println( "repainting" );
            }
        };

        frame.add( panel );

        final JButton button = new JButton("Button");
        panel.add(button);

        // create and start an instance of our custom
        // RepaintThread, defined below
        final RepaintThread thread = new RepaintThread( Collections.singletonList( panel ) );
        thread.start();

        // add an ActionListener to the JButton
        // which turns on and off the RepaintThread
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                thread.toggleRepaintMode();
            }
        });

        frame.setSize( 300, 300 );
        frame.setVisible( true );
    }

    public static class RepaintThread extends Thread
    {
        ReentrantLock lock;
        Condition modeChanged;
        boolean repaintMode;
        Collection<? extends Component> list;

        public RepaintThread( Collection<? extends Component> list )
        {
            this.lock = new ReentrantLock( );
            this.modeChanged = this.lock.newCondition();

            this.repaintMode = false;
            this.list = list;
        }

        @Override
        public void run( )
        {
            while( true )
            {
                lock.lock();
                try
                {
                    // if repaintMode is false, wait until
                    // Condition.signal( ) is called
                    while ( !repaintMode )
                        try { modeChanged.await(); } catch (InterruptedException e) { }
                }
                finally
                {
                    lock.unlock();
                }

                // call repaint on all the Components
                // we're not on the event dispatch thread, but
                // repaint() is safe to call from any thread
                for ( Component c : list ) c.repaint();

                // wait a bit
                try { Thread.sleep( 50 ); } catch (InterruptedException e) { }
            }
        }

        public void toggleRepaintMode( )
        {
            lock.lock();
            try
            {
                // update the repaint mode and notify anyone
                // awaiting on the Condition that repaintMode has changed
                this.repaintMode = !this.repaintMode;
                this.modeChanged.signalAll();
            }
            finally
            {
                lock.unlock();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T08:22:06.250

```
jComponent.getTopLevelAncestor().repaint(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:06:49.083

您可以为此使用[SwingWorker 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)SwingWorker 旨在在后台执行长时间运行的任务，而不会阻塞事件调度程序线程。因此，您需要扩展`SwingWorker`和实现某些对您有意义的方法。请注意，所有长时间运行的操作都应该发生在`doInBackground()`方法中，并且 Swing UI 元素应该只在`done()`方法上更新。

所以这是一个例子：

```
class JPanelTask extends SwingWorker<String, Object>{
    JPanel panel = null;
    Color bg = null;
    public JPanelTask(JPanel panel){
        this.panel = panel;
    }
    @Override
    protected String doInBackground() throws Exception {
        //loooong running computation.
        return "COMPLETE";
    }
    @Override
    protected void done() {
        panel.repaint();
    }

} 
```

现在，在“控制”按钮的动作执行事件中，您可以执行以下操作：

```
 controlButton.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            JPanelTask task1 = new JPanelTask(panel1);
            task1.execute();
            JPanelTask task2 = new JPanelTask(panel2);
            task2.execute();
           //so on..
        }
    }); 
```

另一种方法是使用[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)。计时器可帮助您及时更改 ui 元素。这可能不是最合适的解决方案。但它也能完成工作。同样，您应该小心在正确的位置更新 UI 元素。

# php - .htaccess RewriteRule 导致 403 Forbidden

> ID：10068466
> 
> 赞同：7
> 
> 时间：2012-04-09T03:03:37.020
> 
> 标签：php, apache, .htaccess, http-status-code-403, recess

我正在尝试在我的网络主机（Dreamhost）上安装[Recess PHP 框架。](http://www.recessframework.org/)它包括以下 .htaccess：

```
Options FollowSymLinks
RewriteEngine On
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ bootstrap.php [QSA,L] 
```

这在我的机器上运行良好（Windows 7 上的 XAMPP 1.7.7）但在我的网络主机上的*某些*文件上导致 403 Forbidden 错误。所有目录权限设置为 755，所有文件权限设置为 644。PHP 在拥有文件的同一用户下运行。

以下 URL 会导致 403：

*   http://test.dd.moofz.com/
*   http://test.dd.moofz.com/recess-conf.php
*   http://test.dd.moofz.com/index.php
*   http://test.dd.moofz.com/bootstrap.php
*   http://test.dd.moofz.com/MIT-LICENSE

以下网址不会：

*   http://test.dd.moofz.com/.gitignore
*   http://test.dd.moofz.com/httpd_logo_wide.gif
*   http://test.dd.moofz.com/README.textile
*   http://test.dd.moofz.com/the-book-of-recess.pdf

什么会导致这种情况发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T21:55:38.213

事实证明，我需要改变这一行：

```
Options FollowSymLinks 
```

到：

```
Options +FollowSymLinks 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T03:33:06.420

不熟悉该框架，但看起来其他地方有一些行，或者可能需要调整。

虽然我承认我不是 mod 重写专家，但看起来第一行是将所有请求定向到 request_file.html，然后在第 2 行，如果文件不存在，它会在第 3 行调用 boostrap.php。

您的问题可能出在 boostrap.php 中，请查看该脚本中发生了什么以及如何处理请求。调试器在该步骤可能很有用。虽然你可以让它工作，但在我看来它*可能不是最佳的*。例如，我相信通常有一个规则集可以避免将 .gif、.jpg .css 定向到您的路由脚本。像这样的东西：

```
RewriteCond $1 !^(favicon\.ico|favicon\.png|media|robots\.txt|crossdomain\.xml|css|js) 
```

这避免了让 php 处理对这些类型文件的请求的开销。对于健壮的应用程序生产使用，甚至需要考虑更多的事情，只需调整您的规则，以便一切都正确路由并且一切都应该没问题。

# django - Django 视图测试失败。为什么？

> ID：10068467
> 
> 赞同：1
> 
> 时间：2012-04-09T03:03:41.100
> 
> 标签：django, unit-testing, django-views

我无法追踪此测试失败的原因：

```
def test_CreateViewPost(self):
    user = self.client.login(username="g",password="g")

    # this method creates a poi type and returns it for me
    poiType = self.stubPOIType()
    # this creates a point (django.contrib.gis.geos.Point)
    point = Point(10,10)

    response = self.client.post(reverse("createPOI"),{"name":"testPOI",
                                                      "description":"description",
                                                      "type":poiType,
                                                      "geometry":point})

    # the post is failing. I have errors in my form
    self.assertTemplateUsed(response,"gazetteer/detailPOI.html")
    self.assertEqual(response.status_code,302)

    self.assertEqual(POI.objects.count(),1) 
```

这是模型：

```
class POI(models.Model):
    name = models.CharField(max_length=128,verbose_name=u"Nome")
    description = models.CharField(max_length=1024,verbose_name=u"Descrição",null=True,blank=True)
    type = models.ForeignKey(POIType,verbose_name=u"Tipo de Ponto")
    geometry = models.PointField(verbose_name=u"Geometria",srid=4291)
    geohash = models.CharField(max_length=64,verbose_name=u"GeoHash",editable=False)

    objects = models.GeoManager() 
```

我从表单中返回两个错误：字段几何和类型的“无效几何值”和“无效选择”。我正在将这些传递给帖子，但它失败了。

有小费吗？

编辑：我已经跟踪到“无效几何值”的失败是我的表单需要文本（WKT 表单）而不是实际的 GEOS 点。我已经将实际的 .wkt 添加到它并且它有效。但是外键呢？我应该通过pk吗？

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:31:32.067

创建 django 单元测试时，不能将完整对象（外键对象）传递给发布数据。您应该传递原语（id/pk）。

对于几何来说，它是一样的。你应该通过它的 WKT 表示。

所以：

```
def test_CreateViewPost(self):
    user = self.client.login(username="g",password="g")

    # this method creates a poi type and returns it for me
    poiType = self.stubPOIType()
    # this creates a point (django.contrib.gis.geos.Point)
    point = Point(10,10)

    response = self.client.post(reverse("createPOI"),{"name":"testPOI",
                                                      "description":"description",
                                                      "type":poiType.pk,
                                                      "geometry":point.wkt})

    # the post is failing. I have errors in my form
    self.assertTemplateUsed(response,"gazetteer/detailPOI.html")
    self.assertEqual(response.status_code,302)

    self.assertEqual(POI.objects.count(),1) 
```

# django - 在 Django 中的多个应用程序中使用相同的静态文件

> ID：10068469
> 
> 赞同：7
> 
> 时间：2012-04-09T03:03:47.477
> 
> 标签：django, django-staticfiles

我的 Django 项目分为几个应用程序，静态文件存储在每个应用程序中，如下所示：

```
/Project
   /foo
      /static
         /css
            /style.css
      /views.py
      /models.py
      /urls.py
   /bar
      /static
         /css
            /style.css
      /views.py
      /models.py
      /urls.py
   /urls.py
   /manage.py
   /settings.py 
```

但我不确定如何在多个应用程序中使用相同的静态文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-09T04:41:54.870

这是[`STATICFILES_DIRS`](https://docs.djangoproject.com/en/2.2/ref/settings/#std:setting-STATICFILES_DIRS)设置的目的：

> 您的项目可能还会包含未绑定到特定应用程序的静态资产。STATICFILES_DIRS 设置是文件系统目录的元组，用于在加载静态文件时检查。这是一个默认为空的搜索路径。

# asp.net-mvc-3 - MVC3 自定义错误和 HTTP 状态

> ID：10068473
> 
> 赞同：1
> 
> 时间：2012-04-09T03:04:30.923
> 
> 标签：asp.net-mvc-3, custom-error-pages

我正在尝试实施这个公认的解决方案来显示自定义错误消息：

[https://stackoverflow.com/a/5229581/141172](https://stackoverflow.com/a/5229581/141172)

但是，IE9 使用此解决方案时始终显示一般的 500 错误消息。谷歌浏览器显示我的自定义错误消息。

进行此更改：

```
Response.StatusCode = 200; // don't return: 500 
```

导致 IE9 和 Chrome 中的预期行为。

然而，仅仅为了在 IE9 中工作而更改 HTTP 状态代码似乎完全不合理（例如，如果出现故障，网站监控解决方案将看不到 500）。

如何在不更改 HTTP 状态代码的情况下以适用于所有浏览器的方式添加自定义错误处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:21:21.087

显然，如果自定义错误页面小于 512 字节，IE 将忽略它。解决方法是确保页面至少有 513 字节的数据。此外，如果您使用 gzip 压缩，则压缩后必须超过 512 字节。

# c++ - 为什么我在插入地图时会出现段错误？

> ID：10068478
> 
> 赞同：1
> 
> 时间：2012-04-09T03:07:04.833
> 
> 标签：c++, stl, map, segmentation-fault

我正在尝试将一张地图的内容插入到另一张地图中。这是代码：

```
std::map<std::string, int> Student::getGrades() const;
...

for(set<Student*, Cmp>::const_iterator it = s.begin(); it!=s.end(); ++it)
{
    grades.clear();
    grades.insert((*it)->getGrades().begin(), (*it)->getGrades().end());
    for(map<string, int>::const_iterator itt = grades.begin(); itt!=grades.end(); ++itt)
    {
       if(itt->first == course && itt->second >= score1 && itt->second <= score2)
            (*it)->display(cout);
    }
} 
```

s 是一个集合，其中包含指向学生对象的指针，并且每个学生对象都有一个返回地图的 getGrades() 方法。我正在尝试查找与我从文件中读取的成绩相匹配的成绩，并打印与这些成绩相对应的记录。但是，插入方法给了我一个段错误。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:23:20.527

如果`getGrades()`返回成绩图的副本而不是参考，则`begin()`属于`end()`2 个不同的地图。

您可能应该制作一个本地副本，并像这样简化代码：

```
for(set<Student*, Cmp>::const_iterator it = s.begin(); it!=s.end(); ++it)
{
    map<string, int> grades = (*it)->getGrades();
    for(map<string, int>::const_iterator itt = grades.begin(); itt!=grades.end(); ++itt)
    {
        if(itt->first == course && itt->second >= score1 && itt->second <= score2)
            (*it)->display(cout);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:24:12.557

在 set 中可能有一个未初始化的指针`s`。

# iphone - 委托未在 iOS5 StoryBoard UISplitViewController 中设置

> ID：10068484
> 
> 赞同：1
> 
> 时间：2012-04-09T03:07:46.633
> 
> 标签：iphone, ios

我有一个带有 UISplitViewConroller 的通用应用程序。我正在使用故事板。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) 
{
      UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
      UINavigationController *masterNavigationController = [splitViewController.viewControllers objectAtIndex:0];
      LeftViewContrller *lcontroller = (LeftViewContrller *)masterNavigationController.topViewController;
      id<SplitViewDelegate> rightController = (id<SplitViewDelegate>)[splitViewController.viewControllers objectAtIndex:1];
      lcontroller.delegate = rightController; 
} 
```

我有 UISplitViewController 应用程序的左右控制器。

LeftViewController 有一个自定义委托，设置为 RightViewController。

```
//Custom delegate

@protocol SplitViewDelegate <NSObject>

- (void) matchSelectionChanged:(NSString *)curSelection;

@end

//LeftViewContoller

@interface LeftViewContrller : UITableViewController {
    id<SplitViewDelegate> _delegate;
    NSMutableArray *_matches;
}
@property (strong) id<SplitViewDelegate> delegate;
@property (strong) NSMutableArray *matches;

@end 
```

RightViewController 实现了这个委托协议。但是，当在 LeftViewController 中单击行内的单元格时，代表会失败。

```
//RightViewController
@interface RightViewController : UIViewController <SplitViewDelegate>

@property (weak,nonatomic) IBOutlet UILabel *matchLabel;

@end

//Implementation of RightViewController
- (void) matchSelectionChanged:(NSString *)curSelection {
    self.matchLabel.text = curSelection;
    //[self refresh];
}

//Did select row in LeftViewController
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSMutableString *s = [[NSMutableString alloc] initWithString:@"Row selected"];
    if (_delegate != nil) {
        [s appendFormat:@" %d ", indexPath.row];
        [_delegate matchSelectionChanged:s]; 
    }
} 
```

//获取错误CustomViewTab [1200：11303] ***由于未捕获的异常'NSInvalidArgumentException'而终止应用程序，原因：'-[UINavigationController matchSelectionChanged：]：无法识别的选择器发送到实例0xda6a770'***第一次抛出调用堆栈：（0x1559052 0x1da8d0a 0x155aced 0x14bff00 0x14b 0x1204e 0x62071d 0x620952 0x25986d 0x152d966 0x152d407 0x14907c0 0x148fdb4 0x148fccb 0x2500879 0x250093e 0x590a9b 0x1df8 0x1d55 终止调用

我看到 didSelectRowAtIndex 被调用，但 RightViewController 的 matchSelectionChanged:(NSString *)curSelection 永远不会被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T04:59:22.207

有点老问题，但我偶然发现了它，一看你有正确的代表吗？

```
@interface RightViewController : UIViewController <UISplitViewControllerDelegate> 
```

我正在看 iOS7，所以它可能自 iOS5 以来发生了变化

# android - 如何在 cocos2d-x 中使用 SimpleaudioEngine 的音高、平移、增益选项

> ID：10068489
> 
> 赞同：6
> 
> 时间：2012-04-09T03:08:30.550
> 
> 标签：android, cocos2d-x

我正在使用 cocos2d-x 将我的 iPhone 游戏转换为 Android。

我正在使用 C++ cocos2d-x 引擎进行编码。并且控制音频对我的游戏非常重要，因为它是台球游戏。我可以使用 cocos2d 的 SimpleAudioEngine 中的 playEffect(@"xxx.wav", pan, pitch, gain) 函数来控制音频播放（音高、平移、增益）。

但问题是 cocos2d-x 中没有这样的选项。只有 playEffect(char str*) 没有其他选项。所以我无法控制音频（如音高、平移、增益）。我在 cocos2d-x 论坛上查看了这个问题。这是一个问题，到目前为止它是“计划外的”。

这是一个非常严重的问题.. 除了这个.. 一切都很顺利.. 我不能跳过这个问题，因为控制声音对我的游戏来说是最重要的。

我怎么解决这个问题？有没有其他方法可以通过 cocos2d-x（使用 C++）使用音频（应该可以控制）引擎？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T10:41:02.847

我也有这个问题。幸运的是有一个解决方案： [http](http://www.cocos2d-x.org/boards/6/topics/5572?r=10217) ://www.cocos2d-x.org/boards/6/topics/5572?r=10217 我希望它有帮助:)

# php - 有没有办法打印将在 pdo->commit 上执行的 sql？

> ID：10068495
> 
> 赞同：2
> 
> 时间：2012-04-09T03:10:05.410
> 
> 标签：php, pdo

我有一个脚本，它能够建立一个较长的准备好的语句事务，我想要一种打印即将执行的内容的方法。

PDO 中没有一个[类方法看起来很有希望。](http://php.net/manual/en/book.pdo.php)

**编辑：** 这是一个（hacky）数据库升级脚本，作为健全性检查。开发人员应该在修改数据库时附加到脚本。

```
$commonStmt = $pdo->prepare("INSERT ... VALUES (:a, :b)");
function commonInsert($a, $b) {
    global $commonStmt;
    $commonStmt->bindParam(':a', $a);
    $commonStmt->bindParam(':b', $b);
    $commonStmt->execute();
}

$pdo->beginTransaction();
if ($db_version < $file_version) {
    commonInsert('a', 'b');
}
if ($db_version < $file_version) {
    commonInsert('c', 'd');
}

if ($db_version < $file_version) {
    $stmt = $pdo->prepare('INSERT ...');
    $stmt->execute();
}

if ($db_version < $file_version) {
    $pdo->query('INSERT');
}

// this will only get longer

$pdo->commit(); 
```

*我可以在每次*更新中添加调试语句（根据 Tamas 的建议），但这对于简单的完整性检查来说似乎很繁重。而且这个`commonInsert`案子是最不可能需要它的案子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:17:36.940

[PDOStatement::debugDumpParams](http://php.net/manual/en/pdostatement.debugdumpparams.php)怎么样？

# ruby-on-rails - 在 Rails 应用程序中记录 RestClient

> ID：10068496
> 
> 赞同：6
> 
> 时间：2012-04-09T03:10:13.740
> 
> 标签：ruby-on-rails, logging, rest-client

我想调试我的 Rails 应用程序使用[RestClient](https://github.com/archiloque/rest-client)发出的请求。RestClient 文档说：

> 要启用日志记录，您可以
> 
> 使用 ruby​​ Logger 设置 RestClient.log 或设置环境变量以避免修改代码（在这种情况下，您可以使用文件名“stdout”或“stderr”）：
> 
> $ RESTCLIENT_LOG=stdout path/to/my/program 要么产生这样的日志：
> 
> RestClient.get " [http://some/resource](http://some/resource) "
> 
> => 200 确定 | 文本/html 250 字节
> 
> RestClient.put " [http://some/resource](http://some/resource) ", "payload"
> 
> => 401 未经授权 | 应用程序/xml 340 字节
> 
> 请注意，这些日志是有效的 Ruby，因此您可以将它们粘贴到 restclient shell 或 >script 以重播您的 rest 调用序列。

如何将这些日志包含在我的 Rails 应用程序日志文件夹中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T15:50:25.427

来自：[https ://gist.github.com/jeremy/1383337](https://gist.github.com/jeremy/1383337)

```
require 'restclient'

# RestClient logs using << which isn't supported by the Rails logger,
# so wrap it up with a little proxy object.
RestClient.log =
  Object.new.tap do |proxy|
    def proxy.<<(message)
      Rails.logger.info message
    end
  end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T05:03:31.860

在以下位置创建一个文件`config/initializers`：
RestClient.log = 'log/a_log_file.log'
或者只是将最后一个放在控制台中

[https://github.com/adelevie/rest-client/commit/5a7ed325eaa091809141d3ef6e31087569614e9d](https://github.com/adelevie/rest-client/commit/5a7ed325eaa091809141d3ef6e31087569614e9d)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-22T18:48:48.320

这对我有用，在 RestClient 1.8 和 Rails 4.2.1 上运行：

`::RestClient.log = Rails.logger`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-25T03:56:09.537

你可以使用这个宝石：

[https://github.com/uswitch/rest-client-logger](https://github.com/uswitch/rest-client-logger)

只需将“gem 'rest-client-logger'”添加到您的 Gemfile 中，它就可以开箱即用。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-11T11:37:33.473

可能是这样：RestClient.log = Rails.logger

# maps - 有没有办法根据缩放级别更改图标图像？（传单.js）

> ID：10068500
> 
> 赞同：8
> 
> 时间：2012-04-09T03:11:56.980
> 
> 标签：maps, marker, leaflet

我正在为 Web 应用程序制作区域绘图工具，并且我正在使用标记作为锚点，用户可以使用它来更改多边形的形状。

这就是我到目前为止所拥有的。[http://demos.nodeline.com/leaflet_development/](http://demos.nodeline.com/leaflet_development/)

回购位于[https://github.com/SpencerCooley/Leaflet_development](https://github.com/SpencerCooley/Leaflet_development)

```
$(document).ready(function(){

var map, cloudmade, sanAntonio, polygonPoints  

 map = new L.Map('map');

 cloudmade = new L.TileLayer('http://{s}.tile.cloudmade.com/d4334cd6077140e3b92ccfae2b363070/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
    maxZoom: 18
});

 sanAntonio = new L.LatLng(29.4238889, -98.4933333); // geographical point (longitude and latitude)

 map.setView(sanAntonio, 13).addLayer(cloudmade);

polygonPoints = [];

var polygon = new L.Polygon(polygonPoints);
map.addLayer(polygon);

map.on('click', function(e) {  

  var marker = new L.Marker(e.latlng, {draggable:true});
  polygonPoints.push(e.latlng);
  var markerId = polygonPoints.length -1 
  map.addLayer(marker);
  polygon.setLatLngs(polygonPoints);

  marker.on('drag', function(){
    var locationWhileDrag = marker.getLatLng();
    $('#first_marker').val(locationWhileDrag);
    polygonPoints.splice(markerId,1,locationWhileDrag);
    polygon.setLatLngs(polygonPoints);
  });      

});

}); 
```

当用户放大到街道水平时，我只希望标记为正常大小。当您缩小正常大小的标记时，会完全淹没多边形。我浏览了文档，但找不到任何关于此的内容。

我主要是在寻找建议/头脑风暴。我在想也许有一种方法可以检测您当前处于哪种缩放状态？如果是这样，我可以使用 if 语句来更改图标。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T08:26:51.487

好的，所以我找到了一些方法并想出了这个：

```
//this sets up an icon to be replaced on redraw. 
var MyIcon = L.Icon.extend({
    iconUrl: 'marker.png',
    iconSize: new L.Point(10, 16),
    shadowSize: new L.Point(10, 16),
    iconAnchor: new L.Point(10, 16)
});

var icon = new MyIcon();

//When view resets use the smaller icon if zoom level is less than 13
map.on('viewreset', function(){
    if(map.getZoom() < 13){
        marker.setIcon(icon);
    }
}); 
```

setIcon() 方法不在文档中，我在谷歌论坛中找到它并且它有效。我制作了一个较小的图标，我基本上只是在缩放级别小于 13 时替换原始图标。我将实施现在为不同的缩放级别提供不同的标记，以使标记“更远”的效果。

这是修改后的代码。

```
$(document).ready(function(){

var map, cloudmade, sanAntonio, polygonPoints  

map = new L.Map('map');

cloudmade = new L.TileLayer('http://{s}.tile.cloudmade.com/d4334cd6077140e3b92ccfae2b363070/997/256/{z}/{x}/{y}.png', {
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
    maxZoom: 18
});

sanAntonio = new L.LatLng(29.4238889, -98.4933333); // geographical point (longitude and latitude)

map.setView(sanAntonio, 13).addLayer(cloudmade);

polygonPoints = [];

var polygon = new L.Polygon(polygonPoints);
map.addLayer(polygon);

map.on('click', function(e) {  
    //this sets up an icon to be replaced when redraw. 
    var MyIcon = L.Icon.extend({
        iconUrl: 'marker.png',
        iconSize: new L.Point(10, 16),
        shadowSize: new L.Point(10, 16),
        iconAnchor: new L.Point(10, 16)
    });

    var icon = new MyIcon(); 
    //this sets up an icon to be replaced when redraw.

    var marker = new L.Marker(e.latlng, {draggable:true});
    polygonPoints.push(e.latlng);
    var markerId = polygonPoints.length -1 
    map.addLayer(marker);
    polygon.setLatLngs(polygonPoints);

    marker.on('drag', function(){
        var locationWhileDrag = marker.getLatLng();
        $('#first_marker').val(locationWhileDrag);
        polygonPoints.splice(markerId,1,locationWhileDrag);
        polygon.setLatLngs(polygonPoints);
    });      

    //When view resets use the small icon if zoom level is less than 13
    map.on('viewreset', function(){
        if(map.getZoom() < 13){
            marker.setIcon(icon);
        }
    });
});

}); 
```

这是演示： [http ://demos.nodeline.com/leaflet_development/](http://demos.nodeline.com/leaflet_development/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-30T12:10:52.727

您还可以更改缩放的通用类并使用 CSS 进行更改。

```
map.on('zoomend', function(event) {
    document.body.className = "zoom"+map.getZoom();
}); 
```

那么你的 CSS 将是：

```
.myIcon{background:red;}
.zoom4 .myIcon{background:pint;} 
```

我用它来隐藏我的标记的名称，直到你放大到 10 级。

# ruby-on-rails - Rails 嵌套的新视图由于某种原因被路由显示？

> ID：10068502
> 
> 赞同：1
> 
> 时间：2012-04-09T03:12:18.783
> 
> 标签：ruby-on-rails, routing

运行 Rails 3.2.1，我有以下路线：

```
resources :photos, :path_names => { :new => 'upload' } do
  resources :votes
end 
```

出于某种原因，如果我浏览到`photos/1/votes/new`我得到

```
ActiveRecord::RecordNotFound in VotesController#show
Couldn't find Vote with id=new 
```

为什么 Rails 会路由`votes/new`到 show 动作？有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:29:47.310

捂脸！

我没有意识到该`:path_names`选项也适用于嵌套资源 - Votes 模型正在寻找新操作 at`votes/upload`而不是`votes/new`.

我改变了路线如下，一切都很好：

```
resources :photos do
  collection do
    get 'upload' => 'photos#new'
  end
  resources :votes
end 
```

# oop - 从 api 调用和模式映射创建实体

> ID：10068504
> 
> 赞同：2
> 
> 时间：2012-04-09T03:12:42.943
> 
> 标签：oop, design-patterns, domain-driven-design

我正在决定如何创建一个从 3rd 方 api 中提取的实体。我的实体的概念需要两个 API 调用，其中一个提取有关实体的唯一数据，另一个为我提供可能属于实体的所有可能数据的完整模式。

我已经为实体编写了一个存储库，但是如果我只想抓取一次，架构映射在哪里适合域层呢？
实体应该如何保存这个模式数据？
我不熟悉映射器模式，但这似乎是它的正确用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T03:54:45.263

如果您有模式数据，然后是数据，那么您正在处理具有动态属性的实体，类似于字典或哈希表，但需要验证。

您可以将模式数据视为它自己的实体，它提供*知识级别*来实例化和验证实体，这些实体位于*操作级别*。

[在此处查看 (pdf)](http://martinfowler.com/apsupp/properties.pdf)以了解许多相关模式。

# javascript - fullcalendar 未显示基于事件时间的事件

> ID：10068506
> 
> 赞同：3
> 
> 时间：2012-04-09T03:13:33.620
> 
> 标签：javascript, fullcalendar

我正在英雄框架中构建一个事件日历。我已经通过 JSON 方法将我的完整日历链接到数据库。记录显示从“2012-04-18 12:00”开始，到“2012-04-18 14:00”结束，但日历未能根据时间显示事件。它显示为 ALL-DAY 事件。知道如何解决吗？

```
<script type='text/javascript'>

$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            right: 'month,agendaWeek,agendaDay'
        },
        selectable: true,
        selectHelper: true,
        allDaySlot: false,
        firstHour: 9,
        select: function(start, end) {
            var title = prompt('Event Title:');
            if (title) {
                calendar.fullCalendar('renderEvent',
                    {
                        title: title,
                        start: start,
                        end: end
                    },
                    false // make the event "stick"
                );

                var startDateString = $.fullCalendar.formatDate(start, 'yyyy-MM-dd hh:mm');
                var endDateString = $.fullCalendar.formatDate(end, 'yyyy-MM-dd hh:mm');
                $.ajax({
                    type: 'POST',
                    url: '{url}ajaxpost/add',
                    data: {
                        startDate: startDateString,
                        endDate: endDateString,
                        eventTitle: title                            
                    },
                    dateType: 'json',
                    success: function (resp) {
                        calendar.fullCalendar('refetchEvents');

                    }
                });
            }
            calendar.fullCalendar('unselect');
        },
        editable: true,
        events: "{url}ajaxget/data",
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T18:37:45.227

您需要将事件 allDay 属性设置为 false

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T16:24:15.120

当您从您的`{url}ajaxget/data`url 返回事件时，您需要指定该事件不是全天的。

你这样做我在每个不是一整天都设置一个`allDay`字段。`event`

它可能看起来像这样：

```
[{
    start : 10000000,
    end :   10000500,
    title : 'example event'
    allDay : false
}, ... ] 
```

您还可以在[文档](http://arshaw.com/fullcalendar/docs/event_data/events_array/)中找到此信息。

# java - 如何处理静态最终变量

> ID：10068508
> 
> 赞同：0
> 
> 时间：2012-04-09T03:14:06.520
> 
> 标签：java, netbeans

我是 Java 的初学者，我在`static final`变量方面遇到了一些问题。我有一个登录页面，我可以从中获取当前登录用户的用户名。

**`Login Page Code`**

```
import javax.swing.*;

public class ProfileLogin extends JFrame {

    public ProfileLogin() {
        initComponents();
    }

    private void initComponents() {

        jPanel1 = new JPanel();
        proName = new JTextField();
        jButton2 = new JButton();
        jLabel2 = new JLabel();
        jPanel2 = new JPanel();
        logName = new JTextField();
        jButton1 = new JButton();
        jLabel1 = new JLabel();

        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setTitle("Sound Recognition System");
        setResizable(false);

        jPanel1.setBorder(BorderFactory.createTitledBorder("Create Profile"));

        jButton2.setText("Create New");
        jButton2.setToolTipText("Click to create a new profile");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });

        jLabel2.setText("Choose a Profile Name:");

        GroupLayout jPanel1Layout = new GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(proName, GroupLayout.DEFAULT_SIZE, 137, Short.MAX_VALUE)
                    .addComponent(jLabel2)
                    .addComponent(jButton2, GroupLayout.DEFAULT_SIZE, 137, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addComponent(jLabel2)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(proName, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton2, GroupLayout.PREFERRED_SIZE, 23, GroupLayout.PREFERRED_SIZE)
                .addGap(16, 16, 16))
        );

        jPanel2.setBorder(BorderFactory.createTitledBorder("Select Profile"));

        jButton1.setText("Login");
        jButton1.setToolTipText("Click to Login");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jLabel1.setText("Enter your Profile Name:");

        GroupLayout jPanel2Layout = new GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel1)
                    .addComponent(logName, GroupLayout.DEFAULT_SIZE, 137, Short.MAX_VALUE)
                    .addComponent(jButton1, GroupLayout.DEFAULT_SIZE, 137, Short.MAX_VALUE))
                .addContainerGap())
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addComponent(jLabel1)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(logName, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton1)
                .addGap(23, 23, 23))
        );

        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.TRAILING, false)
                    .addComponent(jPanel1, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel2, GroupLayout.Alignment.LEADING, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel2, GroupLayout.PREFERRED_SIZE, 111, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jPanel1, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-195)/2, (screenSize.height-294)/2, 195, 294);
    }

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
        String profileName;
        String empty;
        empty = "";
        profileName = proName.getText();

        try {
            if(profileName.equalsIgnoreCase("")) {
              JOptionPane.showMessageDialog(null, "Please Enter a Profile Name!");
              return;
            }

           database.rs = database.st.executeQuery("select pname from login where pname='"+profileName+"'");

           if(database.rs.next()) {
               JOptionPane.showMessageDialog(null, "Username Already Existing!");
               return;
           }

            database.st.executeUpdate("insert into login(pname) values('"+profileName+"')");
            JOptionPane.showMessageDialog(null, "Profile successfully created!");
            proName.setText(empty);;

        }
        catch(Exception e)
        {}

    }

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        try {
            String loginName=logName.getText().trim();
            if(loginName.equalsIgnoreCase(""))
            {
              JOptionPane.showMessageDialog(null, "Please Enter Profile Name!");
              return;
            }
            database.rs = database.st.executeQuery("select pname from login where pname='"+loginName+"'");
            if (database.rs.next()) {
                Account a = new Account();
                a.setVisible(true);
                this.dispose();   
            }
            else
            {
                JOptionPane.showMessageDialog(null, "No such username!");
            }

        } catch (Exception e) {

            System.out.println(e);
            e.printStackTrace();

        }

    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {

                new ProfileLogin().setVisible(true);
            }
        });
    }

    private JButton jButton1;
    private JButton jButton2;
    private JLabel jLabel1;
    private JLabel jLabel2;
    private JPanel jPanel1;
    private JPanel jPanel2;
    private JTextField logName;
    private JTextField proName;
    private DatabaseConnection database = new DatabaseConnection();
} 
```

现在我有一个 java 页面，我需要将登录页面中的用户名嵌入到静态最终变量中。但我不知道如何从登录页面传递变量并将值嵌入到静态最终变量中。

```
import javax.sound.sampled.*;
import java.io.*;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class SoundRecording extends JDialog {
        String name="JACOB";
    public static final String SAVE_PATH = "./data/recordings/"+name;

    private JLabel operationLabel;
    private JPanel recordPanel;
    private JButton applyButton;
    private JButton cancelButton;
    private JComboBox operationList;
    private JButton playButton;
    private JButton recordButton;
    private JButton stopButton;
    private JSeparator separator;
    private AudioVisualizer visualizer;

    private AudioInputStream audioStream;
    private SourceDataLine sourceLine;
    private AudioFormat audioFormat;
    private TargetDataLine line;
    private ByteArrayOutputStream output;

    public SoundRecording(JFrame parent) {
        super(parent, "Record", true);

        initComponents();
    }

    @SuppressWarnings("unchecked")
    private void initComponents() {
        recordPanel = new JPanel();
        recordButton = new JButton();
        stopButton = new JButton();
        playButton = new JButton();
        operationLabel = new JLabel("Select Operation:");
        operationList = new JComboBox();
        applyButton = new JButton();
        cancelButton = new JButton();
        separator = new JSeparator();
        visualizer = new AudioVisualizer();

        recordPanel.setBorder(BorderFactory.createTitledBorder("Options"));

        recordButton.setText("Record");
        recordButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                recordButtonActionPerformed(evt);
            }
        });

        stopButton.setText("Stop");
        stopButton.setEnabled(false);
        stopButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                stopButtonActionPerformed(evt);
            }
        });

        playButton.setText("Play");
        playButton.setEnabled(false);
        playButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                playButtonActionPerformed(evt);
            }
        });

        operationList.setModel(new DefaultComboBoxModel(new String[] { "Shutdown", "Sleep", "Close", "Minimize" }));

        applyButton.setText("Apply");
        applyButton.setEnabled(false);
        applyButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                applyButtonActionPerformed(evt);
            }
        });

        cancelButton.setText("Cancel");
        cancelButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                cancelButtonActionPerformed(evt);
            }
        });

        GroupLayout recordPanelLayout = new GroupLayout(recordPanel);
        recordPanel.setLayout(recordPanelLayout);
        recordPanelLayout.setHorizontalGroup(
            recordPanelLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(recordPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(recordPanelLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(operationList, GroupLayout.PREFERRED_SIZE, 148, GroupLayout.PREFERRED_SIZE)
                    .addComponent(separator, GroupLayout.PREFERRED_SIZE, 148, GroupLayout.PREFERRED_SIZE)
                    .addComponent(visualizer, GroupLayout.PREFERRED_SIZE, 148, GroupLayout.PREFERRED_SIZE)
                    .addGroup(recordPanelLayout.createSequentialGroup()
                        .addGroup(recordPanelLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
                            .addComponent(operationLabel, GroupLayout.PREFERRED_SIZE, 115, GroupLayout.PREFERRED_SIZE)
                            .addGroup(recordPanelLayout.createSequentialGroup()
                                .addComponent(recordButton)
                                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(stopButton, GroupLayout.PREFERRED_SIZE, 67, GroupLayout.PREFERRED_SIZE))
                    .addComponent(playButton, GroupLayout.PREFERRED_SIZE, 148, GroupLayout.PREFERRED_SIZE)))))
        );
        recordPanelLayout.setVerticalGroup(
            recordPanelLayout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(recordPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(operationLabel)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(operationList, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(separator, GroupLayout.PREFERRED_SIZE, 10, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                    .addComponent(visualizer, GroupLayout.PREFERRED_SIZE, 30, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(recordPanelLayout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(recordButton)
                    .addComponent(stopButton, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(playButton)
                .addContainerGap(10, Short.MAX_VALUE))
        );

        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(32, 32, 32)
                        .addComponent(applyButton)
                        .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(cancelButton)
                        .addGap(0, 8, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(recordPanel, GroupLayout.DEFAULT_SIZE, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(recordPanel, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(applyButton)
                    .addComponent(cancelButton))
                .addContainerGap(GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        setSize(215, 299);
        setResizable(false);

        /*
         * This is used to position the frame into
         * the center of the screen.
         */
        setLocationRelativeTo(null);
    }

    private void recordButtonActionPerformed(ActionEvent evt) {
        recordButton.setEnabled(false);
        stopButton.setEnabled(true);
        playButton.setEnabled(false);       
        applyButton.setEnabled(true);

        /*
         * Construct the data line from the microphone using
         * the custom audio format.
         */
        try {
            audioFormat = Microphone.getAudioFormat();
            DataLine.Info dataLineInfo = new DataLine.Info(TargetDataLine.class, audioFormat);
            line = (TargetDataLine) AudioSystem.getLine(dataLineInfo);
        } catch(Exception ex) {
            ex.printStackTrace();
        }

        /*
         * Create a thread to capture the microphone data
         * into an audio file and start the thread running.
         */
        CaptureThread capture = new CaptureThread();
        capture.start();
    }

    private void stopButtonActionPerformed(ActionEvent evt) {
        stopButton.setEnabled(false);
        recordButton.setEnabled(true);
        playButton.setEnabled(true);

        line.stop();
        line.close();
    }

    private void playButtonActionPerformed(ActionEvent evt) {
        playButton.setEnabled(false);

        PlaybackThread playback = new PlaybackThread();
        playback.start();
    }

    private void applyButtonActionPerformed(ActionEvent evt) {
        /*
         * Set the file type and the file extension.
         */
        String operation = operationList.getSelectedItem().toString();
        File audioFile = new File(SAVE_PATH + operation + ".wav");

        /*
         * Display the confirmation dialog.
         */
        if(audioFile.exists()) {
            Toolkit.getDefaultToolkit().beep();

            Object[] options = {"Yes", "No",};
            int returnValue = JOptionPane.showOptionDialog(this,
                "This recording already exists, do you want to overwrite?", "Overwrite",
                JOptionPane.YES_NO_OPTION,
                JOptionPane.QUESTION_MESSAGE,
                null,
                options,
                options[1]);

            if(returnValue == JOptionPane.NO_OPTION) {
                return;
            }
        }

        /*
         * Write the stored buffer bytes into the
         * saved audio file.
         */
        byte[] audioData = output.toByteArray();
        ByteArrayInputStream stream = new ByteArrayInputStream(audioData);
        try {
            AudioInputStream audioStream = new AudioInputStream(stream, audioFormat, audioData.length);
            AudioSystem.write(audioStream, AudioFileFormat.Type.WAVE, audioFile);
        } catch(IOException ex) {
            ex.printStackTrace();
        }

        this.dispose();
    }

    private void cancelButtonActionPerformed(ActionEvent evt) { 
        this.dispose();
    }

    /*
     * Inner class to capture data from microphone and
     * write it to an output audio file.
     */
    class CaptureThread extends Thread implements Runnable {

        @Override
        public void run() {
            /*
             * Start writing audio data into the data line.
             */
            try {
                /*
                 * Close the current running line while we
                 * listen for input on a new line.
                 */
                Microphone.getLine().stop();
                Microphone.getLine().close();

                /*
                 * Open the new line for recording
                 * sound clips.
                 */
                line.open(audioFormat);
                line.start();

                /*
                 * Start the drawing of the visualizer.
                 */             
                visualizer.start();

                /*
                 * Create a buffer which the data can be stored in
                 * and listen for input data.
                 */
                output = new ByteArrayOutputStream();
                while(true) {
                    if(!line.isOpen()) {                    
                        break;
                    }

                    /*
                     * Get the total about of bytes which
                     * are available on the line.
                     */
                    int available = line.available();

                    /*
                     * Make sure something is pending on
                     * the line before trying to read.
                     */
                    if(available > 0) {
                        byte[] buffer = new byte[available];
                        int read = line.read(buffer, 0, buffer.length);

                        if(read > 0) {
                            output.write(buffer, 0, buffer.length);
                        }

                        /*
                         * Set the chunk of data into the
                         * visualizer.
                         */
                        visualizer.setData(buffer);
                    }
                }

                /*
                 * Close the ouput buffer.
                 */
                output.close();

                /*
                 * Stop the drawing of the visualizer.
                 */
                visualizer.stop();

                /*
                 * Re-open the line and start it running
                 * again.
                 */
                Microphone.getLine().open(audioFormat);
                Microphone.getLine().start();
            } catch(Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    /*
     * This class is used for playing back audio which is
     * saved into a buffer. This feeds the audio into the
     * output speaker line.
     */
    class PlaybackThread extends Thread implements Runnable {

        @Override
        public void run() {
            byte[] audioData = output.toByteArray();
            ByteArrayInputStream stream = new ByteArrayInputStream(audioData);

            /*
             * Get the data line to the output speakers.
             */
            DataLine.Info info = new DataLine.Info(SourceDataLine.class, audioFormat);
            try {
                sourceLine = (SourceDataLine) AudioSystem.getLine(info);
                sourceLine.open(audioFormat);
            } catch(Exception ex) {
                ex.printStackTrace();
            }

            /*
             * Start the audio output line.
             */
            sourceLine.start();

            /*
             * Write the data into the audio stream.
             */
            int read = 0;
            byte[] data = new byte[stream.available()];
            while(read != -1) {
                try {
                    read = stream.read(data, 0, data.length);
                } catch(Exception e) {
                    e.printStackTrace();
                }

                if(read > 0) {
                    @SuppressWarnings("unused")
                    int written = sourceLine.write(data, 0, read);
                }
            }

            /*
             * Flush any unused bytes from the stream and
             * close the audio line to the speakers.
             */
            sourceLine.drain();
            sourceLine.close();

            /*
             * Re-enable the play button, allowing the user to
             * play the clip again.
             */
            playButton.setEnabled(true);
        }
    }
} 
```

用户名必须添加到静态最终变量`SAVE_PATH`中，以便它成为 `"./data/recordings/username"`

我试图直接向其中添加示例用户名，如下所示

```
String name="JACOB";
public static final String SAVE_PATH = "./data/recordings/"+name; 
```

`But it says Non-static variable name cannot be referenced from a static context.`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:16:01.513

最简单的方法是也使`name`静态：

```
static String name = "JACOB"; 
```

但通常，您希望在成员方法中创建不是静态的路径：

```
final String path = SAVE_PATH + name; 
```

由于我看不到您如何使用该`name`变量，因此我无法真正告诉您在您的情况下正确的方法是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:34:04.257

如果您需要设置或更改静态变量，您可以创建一个简单的静态方法，例如

```
public static void setGlobalSavePath(String name) {
  SoundRecording.SAVE_PATH = "./data/recordings/" + name;
} 
```

并在需要时调用它，例如

```
SoundRecording.setGlobalSavePath("JACOB"); 
```

但要做到这一点，请`final`从`SAVE_PATH`声明中删除，否则您无法更改其值。

# python - 正则表达式中是否存在贪婪的“或”组？

> ID：10068509
> 
> 赞同：7
> 
> 时间：2012-04-09T03:14:17.293
> 
> 标签：python, regex

我有一个自动生成的正则表达式，它基本上是一个大的“或”组，如下所示：

```
(\bthe\b|\bcat\b|\bin\b|\bhat\.\b|\bhat\b) 
```

我注意到，如果

```
hat. 
```

它只匹配“帽子”，而不匹配“帽子”。如我所愿。有没有办法让它更贪婪？

**更新：**忘记了单词边界，对此感到抱歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T03:17:06.270

将`hat\.`before`hat`放在正则表达式中。交替中的第一个匹配表达式获胜。`hat`匹配`hat.`所以`hat\.`永远不会被检查。

更好的方法是将那部分写成`hat\.?`而不是`hat\.|hat`. 这使得期间是可选的，因此您不需要交替使用两个术语。

编辑后：

`.`和空格之间没有单词边界（两者都是非单词字符）。所以只会在句号后面紧跟另一个字母的地方`\bhat\.\b`匹配。`hat.x`这意味着在例如一个句子中，`hat`将是匹配的那个。但是，我看到您找到了解决方案。

# c# - 如何将 Bitmap[] 渲染到 Canvas？

> ID：10068513
> 
> 赞同：1
> 
> 时间：2012-04-09T03:15:21.380
> 
> 标签：c#, .net, canvas, bitmap

我可能会得到一个数组或列表，`System.Drawing.Bitmap`并且我想将它们渲染到画布上（可能每秒一个）。我该怎么做？谢谢！

# ruby-on-rails - 如何在 Rails 的同一行显示 will_paginate？以及如何设置 will_paginate 样式？

> ID：10068514
> 
> 赞同：1
> 
> 时间：2012-04-09T03:15:31.333
> 
> 标签：ruby-on-rails, will-paginate

1）我试图让分页显示在同一行而不是新行。目前我有

<< 上一页
1
2
下一页 >>

我的 CSS 定义如下：

```
.pagination{CSS Style code}
.pagination a {CSS Style code}
.pagination a.current{CSS Style code} 
```

2) 如何关闭<<上一个和下一个>>？

3) 当前选择的分页调用的 a.(class) 是什么？

目前我有`.pagination a.current{CSS Style}`，但它不起作用

我正在使用[https://github.com/mislav/will_paginate](https://github.com/mislav/will_paginate)

我是一个完整的 Rails 新手；提前致谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-30T12:16:34.510

以防万一，任何机构仍然需要帮助......因为类中有很多东西`.pagination`都是`<%=will_paginate %>`. 您可能想要引用父元素。

```
div.pagination {
  max-width: 100%;
  min-width: 100%;
  width: 100%;
} 
```

以及您可能想要的任何其他样式。

此外，确保该 div 的父元素确实允许它展开..以防它恰好位于

*   或者宽度为 10 像素，您有 3000 页或类似的东西。您可能希望将其从其父元素中删除。

# javascript - javascript中的window和this.window有什么区别？

> ID：10068516
> 
> 赞同：3
> 
> 时间：2012-04-09T03:15:52.353
> 
> 标签：javascript

我正在研究一个复杂的 JavaScript，它正在对对象和脚本进行各种运行时/动态操作。在此过程中，我正在学习有关 Javascript 及其特性的各种细节。

不过，这让我很难过。有没有这样的情况

```
window !== this.window; //true 
```

换句话说，你什么时候会写 this.window 而不是直接写出 window ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T03:26:49.010

> *“有没有这样的情况`window !== this.window; //true`”*

当然，只要`this`指的是没有`.window`属性的对象或具有`.window`不指向全局对象的属性的对象*（假设浏览器环境`window`是全局对象）*。

> *“......你什么时候会写`this.window`而不是直接写出来`window`？*

当`this`指的是一个对象，其中一个`.window`属性预计不是对全局的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T03:27:39.043

`this`不会像在 C++ 和 java 中那样在 javascript 中隐式搜索名称。

在 javascript 中，引用某些东西`foo`而不是`this.foo`or `someobject.foo`，按顺序尝试任何`var`- 声明的变量，然后是全局命名空间。

`this.var`仅查找`this`（及其原型，原型的原型等）的成员

在脚本的顶层，`this`指的是默认的全局命名空间，即`window`对象，在您使用`foo.meth()`. `window`奇怪的是，它包含一个名为`window`which 指向自身的成员。所以你一般可以去：

`window.window.window.window.location = "some_url"`

如果你喜欢。实际上，您认为“就在那里”的很多名称都是全局对象的成员，例如

`Object === window.Object`

如果你喜欢你可以说

`var window;`

声明一个名为的变量，该变量`window`在该代码块中隐藏全局窗口。但不要那样做。

我相信您实际上也可以更改全局命名空间，但我不记得如何了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T03:26:06.703

好吧，它是重复的，但是`this`当您在全局范围（err）中时，它指的是全局范围，而全局范围是`window`. （所以`this == window`和`window.window == window`都是真的）

如果您在一个用作构造函数的函数中，例如 ( `new Pie()`)，`this`则不再指代全局范围，而是指所创建的对象。真正取决于您`this`在哪里运行代码。

# cryptography - 了解前向保密

> ID：10068519
> 
> 赞同：5
> 
> 时间：2012-04-09T03:15:58.127
> 
> 标签：cryptography, certificate, private-key

最近，一位朋友向我指出了 2011 年的一篇[帖子](http://googleonlinesecurity.blogspot.in/2011/11/protecting-data-for-long-term-with.html)，该帖子描述了谷歌向前向保密的方向发展。据我了解，前向保密的本质似乎在于私钥没有保存在持久存储中。

我对如何实施这样的事情有各种疑问。

1.  如果服务器在没有警告的情况下停机怎么办 - 是否必须重新生成密钥对？是否必须再次签署公钥才能创建另一个证书？
2.  有人可以指出我描述了这样的实现的帖子/pdf。推荐阅读资源？
3.  您是否知道其他实施前向保密的人？您是否在工作场所尝试过类似的事情？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T04:25:44.543

在**Forward Secrecy**中，仍然存在长期密钥。唯一的含义是，当长期密钥发生变化时，长期密钥的泄露将不允许攻击者泄露临时会话密钥。**这意味着不能**从另一个（旧）密钥派生长期密钥。

[这](http://www.cs.bu.edu/~itkis/pap/forward-secure-survey.pdf)是关于这个主题的一个很好的调查。

根据[维基百科](http://en.wikipedia.org/wiki/Perfect_forward_secrecy)：

*   PFS 是 IPsec (RFC 2412) 中的可选功能。
*   SSH。
*   Off-the-Record Messaging 是一种适用于许多即时消息传递客户端的加密协议和库，提供完美的前向保密和可拒绝加密。
*   理论上，自 SSLv3 以来，传输层安全性可以选择合适的密码，但在日常实践中，许多实现拒绝提供 PFS 或仅提供非常低的加密等级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T11:04:44.550

在 TLS 和许多其他协议中，前向保密是通过[Diffie-Hellman](http://en.wikipedia.org/wiki/Diffie_hellman) (DH) 算法提供的。Vanilla DH 相当简单，如果每次随机生成指数，则提供完美的前向保密，但不提供身份验证。因此，在 TLS 中，它与签名算法（通常是 RSA）结合使用。

TLS 提供了许多支持 PFS 的密码套件和许多不支持的密码套件。大多数 TLS 客户端支持 PFS，但许多服务器不支持，因为认为 PFS 占用过多 CPU。

# python - 如何从python将空小数/日期时间插入MYSQL？

> ID：10068522
> 
> 赞同：2
> 
> 时间：2012-04-09T03:16:34.773
> 
> 标签：python, mysql, mysql-python

我有数据文件：

```
'Laura', 'Laura Ellenburg', '5342 Picklied Trout Lane', 'Nashville', 'TN',
'38010','2000-02-22', ' ', '454-56-768' 
```

注意结尾附近的“”。

我正在使用python代码：

```
 data = []
  infile = open ("./BIGPVFC-ASC10e/Employee.asc", "r")
  for line in infile:
    line = line.rstrip("\n")
    line = line.strip()
    seq = line.split(", ")
    for i in range(0,9):
      seq[i] = seq[i].strip("'")
    seq = tuple (seq)
    data.append(seq)
  infile.close()

  cursor.executemany ("""insert into PV_employee
  (employeeid, employeename, employeeaddress, employeecity, employeestate,
   employeezip, employeedatehired, employeebirthdate, employeesupervisor)
   values (%s, %s, %s, %s, %s, %s, %s, %s, %s)""", data) 
```

我的表是：

```
create table PV_employee
 (employeeid         varchar(10)    not null
 ,employeename       varchar(25)    null
 ,employeeaddress    varchar(30)    null
 ,employeecity       varchar(20)    null
 ,employeestate      char(2)        null
 ,employeezip        varchar(10)         null  
 ,employeedatehired  datetime       null
 ,employeebirthdate  datetime      null
 ,employeesupervisor varchar(10)    null
 ,primary key (employeeid)
); 
```

我收到错误“警告：列的值超出范围......”

在空小数的情况下，我得到“警告：不正确的十进制值：' ' for column ...”

我试过`' '`将`''`,`'NULL'`和`NULL`. 这些似乎都不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:18:42.363

SQL NULL 的 Python 等效项是`None`.

# c# - 在 RavenDB 中存储/检索动态数据

> ID：10068523
> 
> 赞同：9
> 
> 时间：2012-04-09T03:16:39.740
> 
> 标签：c#, dynamic, ravendb

我正在使用 RavenDB 并且需要存储动态数据，例如：

```
public class User {
    public string Name;
    public dynamic Data;
} 
```

看来我可以使用许多不同的类型，例如`dynamic`, `RavenJObject`, `DynamicJsonObject`, `ExpandoObject`, `Dictionary<string, object>`，但我不知道有什么区别。

有人可以解释动态数据的选项吗？我不太关心查询，而更关心简单的存储和检索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T16:00:41.723

## 问题

这是交易，如果您有一个`dynamic`属性，那么 RavenDB 将**始终**将其反序列化为`RavenJObject`. 例如：

```
public class User {
    public dynamic Data = new ExpandoObject();
}

...

var user = new User();
user.Data.SomethingNew1 = "foo"; 
```

当您创建用户时，这看起来无害并且工作正常。但是当你**加载**用户时，RavenDB 不知道你想要什么类型，`dynamic`所以它使用`RavenJObject`. 您无法动态创建属性（扩展样式），`RavenJObject`因此失败：

```
var user = session.Find<User>(...);
user.Data.SomethingNew2 = "foo"; //compiles, but throws 
```

## 我的解决方案

`ExpandoObject`在序列化的属性中使用并显式定义其类型。这让 RavenDB（或者我猜是 JSON）知道你期待什么类型并且它不必猜测`RavenJObject`。然后，为了保持你的语法魔力，用动态访问器包装属性。

```
public class User {
    public ExpandoObject _Data = new ExpandoObject();

    public dynamic Data {
        get { return _Data; }
    }
} 
```

有一些方法可以使 expando 对象私有并为 . 创建一个 setter `Data`，但你明白了。

## 更多问题

更新：不幸的是，这个解决方案暴露了更多问题。假设您在动态数据中存储了一个字符串列表：

```
user.Data.Keys = new List<String>{"a","b","c"}; 
```

在您序列化/反序列化之后，JSON/Raven 再次不知道您期望什么类型。因此，如果您尝试这个（见下文），那么它会编译，但您会得到一个运行时异常*，无法将类型 'Raven.Abstractions.Linq.DynamicList' 隐式转换为 'System.Collections.Generic.List'*：

```
List<string> keys = user.Data.Keys; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T06:30:23.340

对于所有这些，你的内存类型是什么并不重要。

object、dynamic 和 DynamicJsonObject 是一回事——就 RavenDB 而言。它为您提供了一个使用 RavenJObject 作为后端的动态实现。

RavenJObject 实际上只是您从服务器获得的值。

ExpandoObject 和 Dictionary 被序列化到字典或从字典序列化，仅此而已。

# gcc - Linux内核中的函数可以是fastcall和内联吗？

> ID：10068525
> 
> 赞同：3
> 
> 时间：2012-04-09T03:17:09.500
> 
> 标签：gcc, linux-kernel

我想定义一个将从 entry_32.S 调用的函数。它将在真正的系统调用处理函数被调用之前被调用。

为了避免函数调用和参数传递的开销，我可以将 my_foo 声明为

```
 fastcall inline int my_foo (int n);

    /*in entry_32.S*/
    pushl %eax
    CFI_ADJUST_CFA_OFFSET 4
    SAVE_ALL
    ....
/* My code begins*/
    call my_foo
    cmpl $0, %eax
    jne syscall_wrong
    movl PT_ORIG_EAX(%esp), %eax
/* My code ends */
    call *sys_call_table(,%eax,4) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:31:10.183

编译器可以在 C 代码中内联函数（无论它们是否具有`inline`关键字），但汇编器并不那么聪明。您在汇编中编写的正是将要汇编的内容，根本没有优化（如内联）。

# mpi - 运行 MPI 程序时如何知道错误进程号？

> ID：10068527
> 
> 赞同：1
> 
> 时间：2012-04-09T03:17:28.410
> 
> 标签：mpi, runtime-error

帮助！

我正在运行我的 MPI 代码并返回“一个进程严重终止：清理...进程管理器错误等待完成”的运行时错误，我想弄清楚错误进程的数量以及如何？

更重要的是，使用4X4（4台机器每台使用4个进程）可以正常，但是如果我使用4X6或更多（4X8），则会出现错误。

我的减少代码如下：

```
#include <stdio.h>
int main(void)
{
   int num,rank;
   scanf("%d %d",&num, &rank);
   int depth = 1;
   int flag = 0;
   while(num > 1) {
      if(rank < num){
          flag = num % 2;
          if(rank % 2 != 0){
              //MPI_Send(to (rank-1)*depth);
              printf("Send to %d\n", (rank - 1) * depth);
              rank *= num;
              break;
          }
          else{
              if(!(flag && (rank == (num - 1)))) {
                  //MPI_Recv(from (rank+1)*depth);
                  printf("Recv from %d\n", (rank+1)*depth);
              }
              rank /= 2;
          }
          depth *= 2;
      }
      num = num / 2 + flag;
  }
  return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:32:21.253

如果问题与某些 MPI 错误有关，例如您尝试向不存在的排名发送消息，您应该使用`MPI_Comm_create_errhandler`. 在这里您可以打印产生错误的等级数。不过，您必须在调试器中运行代码才能解决问题。

# objective-c - 将 CGPoint 传递给另一个方法以 (inf, inf) 结尾

> ID：10068530
> 
> 赞同：0
> 
> 时间：2012-04-09T03:18:13.010
> 
> 标签：objective-c, ios, cgpoint

当试图将 CGPoint 传递给方法时，该点被传递，但是一旦在被调用的方法中，CGPoint 值就会显示（inf，inf）？因此，将位置 CGPoint 传递给 createShapeAt 方法会导致代码无法正常工作。也许我没有正确实现某些东西，或者我是否需要在传递时复制 CGPoint？

```
- (void)handleTap:(UITapGestureRecognizer *)recognizer {
if ([recognizer isKindOfClass:[UITapGestureRecognizer class]])
{
    NSLog(@"User just tapped!");
    CGPoint location = [recognizer locationInView:recognizer.view];
    float scale = [(BasicCanvasUIView *)recognizer.view scale];
    location = CGPointMake(location.x / scale, location.y / scale);
    [self createShapeAt:location];
}
}

- (void)createShapeAt:(CGPoint)point {
//Create a managed object to store the shape
----------------------------------------------------------------------------
<-- WHEN I GET HERE ON BREAKPOINT THE (point) VARIABLE SHOWS "(inf,inf)"  -->
----------------------------------------------------------------------------
NSManagedObject *shape = nil;

//Randomly choose a Circle or a Polygon
int type = arc4random() % 2;
if (type == 0) { // Circle
    //Create the circle
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Circle" inManagedObjectContext:self.managedObjectContext];
    NSManagedObject *circle = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:self.managedObjectContext];
    shape = circle;

    //Randomly create a radius and set the attributes of the circle
    float radius = 10 + (arc4random() % 90);
    [circle setValue:[NSNumber numberWithFloat:point.x] forKey:@"x"];
    [circle setValue:[NSNumber numberWithFloat:point.y] forKey:@"y"];
    [circle setValue:[NSNumber numberWithFloat:radius] forKey:@"radius"];
} else { // Polygon
    //Create the Polygon
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Polygon" inManagedObjectContext:self.managedObjectContext];
    NSManagedObject *polygon = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:self.managedObjectContext];
    shape = polygon;

    //Get the vertices. At this point, no Vertex objects for this shape exist.
    //Anything you add to the set, however, will be added to the Vertex entity;
    NSMutableSet *vertices =[polygon mutableSetValueForKey:@"vertices"];

    //Create a random number of vertices
    int nVertices = 3 + (arc4random() % 20);
    float angleIncrement = (2 * M_PI) / nVertices;
    int index = 0;
    for (float i = 0; i < nVertices; i++) {
        // Generate random values of each vertex
        float a = i * angleIncrement;
        float radius = 10 + (arc4random() % 90);
        float x = point.x + (radius * cos(a));
        float y = point.y + (radius * sin(a));

        // Create the Vertex managed object
        NSEntityDescription *vertexEntity = [NSEntityDescription entityForName:@"Vertex" inManagedObjectContext:self.managedObjectContext];
        NSManagedObject *vertex = [NSEntityDescription insertNewObjectForEntityForName:[vertexEntity name] inManagedObjectContext:self.managedObjectContext];

        //Set teh values for the vertex
        [vertex setValue:[NSNumber numberWithFloat:x] forKey:@"x"];
        [vertex setValue:[NSNumber numberWithFloat:y] forKey:@"y"];
        [vertex setValue:[NSNumber numberWithFloat:index++] forKey:@"index"];

        //Add the Vertex object to the relationship
        [vertices addObject:vertex];

    }// ----------------- END IF/ELSE (circle and polygon done) -------------------------------------------------------------------------------------

    //Set the shapes color
    [shape setValue:[self makeRandomColor] forKey:@"color"];

    //Add  the same shape to both canvases
    [[topView.canvas mutableSetValueForKey:@"shapes"] addObject:shape];
    [[bottomView.canvas mutableSetValueForKey:@"shapes"] addObject:shape];

    //Save the context
    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    // Tell the views to repaint themselves
    [topView setNeedsDisplay];
    [bottomView setNeedsDisplay];

 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:21:57.343

一种明显的可能性是`recognizer.view.scale`零。你测试过吗？

`handleTap:`在您致电之前，请将此声明放入`createShapeAt:`：

```
NSLog(@"recognizer.view.scale = %f", scale); 
```

该语句的输出是什么？如果它是零，那是你的问题。您需要使用不为零的比例。

# visual-studio-lightswitch - 在 lightswitch 中为自定义搜索屏幕添加自定义计算字段

> ID：10068532
> 
> 赞同：2
> 
> 时间：2012-04-09T03:18:52.840
> 
> 标签：visual-studio-lightswitch, calculated-field

所以我有这个应用程序，我必须根据查询创建一个简单的搜索屏幕**（此查询获取指定搜索条件的所有金融交易）**

所以我想要的是在屏幕上添加一个显示**搜索结果总和的计算字段。** 不是所有记录的总和。

我试图在金融交易表上添加一个计算字段，但它没有任何意义..

在这种情况下我该怎么办？

提前致谢。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T02:29:37.630

我假设您的意思是搜索，用户在搜索屏幕上的默认搜索框中输入他们的标准。请记住，内置搜索实际上不是对数据库的搜索，而是对您已经检索到的查询的过滤器。因此，当用户“搜索”某些东西时，他实际上是从屏幕上过滤掉了行，但仍然在绑定到网格的基础数据集合上。
我不知道有任何拦截内置搜索框行为的方法。

实现我认为您想要的一种方法是创建一个查询并根据所需的搜索条件对其进行参数化，然后围绕它构建一个搜索屏幕。您可以隐藏默认搜索框以使其更清晰。

例如，假设我有一个带有 Hours 字段的 Projects 表。首先，我根据项目创建一个查询，在其中添加一个过滤器，如“名称包含 NameParam”。使该参数在屏幕上可见（使用本文作为指南：http: [//blogs.msdn.com/b/bethmassi/archive/2010/11/09/creating-a-custom-search-screen-in-visual -studio-lightswitch.aspx](http://blogs.msdn.com/b/bethmassi/archive/2010/11/09/creating-a-custom-search-screen-in-visual-studio-lightswitch.aspx) )
现在我将使用一个技巧，这是我见过的一种技术，我对它不是 100% 满意，这是基于一个事实，到目前为止，绑定到查询参数的文本框的 Changed 事件在执行屏幕查询后发生，但它适用于当前版本的 LS。在设计器中，选择查询参数（在屏幕左侧），并为“Changed”事件添加代码。在该事件处理程序中，您可以计算您想要的字段。例如，我有这 2 个变量（已经定义为数据项）：

```
RecordsCount = ProjectsByName.Count.ToString() 
TotalHours = ProjectsByName.Sum(Function(project) project.Hours) 
```

（VB 代码）
每次您在 Name 文本框中输入内容并按 Enter 或 Tab 退出时，查询都会使用新条件执行，然后触发 Changed 事件处理程序并且属性刷新它们的值。
要记住的是，要使其正常工作，您应该关闭分页。否则它将计算当前页面的结果。
如果需要分页，那么您始终可以执行第二个查询以获取总结果。

# mysql - MySQL InnoDB 表在导出时锁定

> ID：10068533
> 
> 赞同：2
> 
> 时间：2012-04-09T03:19:00.387
> 
> 标签：mysql, innodb

我有一个`InnoDB`MySQL 数据库。当我导出`SQL`转储时，锁定是如何发生的？导出期间整个数据库是否锁定？还是只是桌子？还是只是个别行？出口究竟是如何运作的`InnoDB`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:24:00.043

您可以控制锁定的内容。

为了安全起见，您可以像这样锁定所有表：

```
mysqldump --lock-all-tables 
```

Docs：锁定所有数据库中的所有表。这是通过在整个转储期间获取全局读锁来实现的。此选项会自动关闭 --single-transaction 和 --lock-tables。

或者，如果您确定不会更改表：

```
mysqldump --single-transaction 
```

文档：在进行 --single-transaction 转储时，为确保转储文件有效（正确的表内容和二进制日志坐标），其他连接不应使用以下语句：ALTER TABLE、CREATE TABLE、DROP TABLE、RENAME TABLE , 截断表。一致性读取与这些语句不隔离，因此在要转储的表上使用它们可能会导致 mysqldump 执行的 SELECT 检索表内容以获取不正确的内容或失败。

# python - Python：用户字典

> ID：10068536
> 
> 赞同：2
> 
> 时间：2012-04-09T03:19:49.013
> 
> 标签：python

我正在阅读“潜入 Python”。我遇到了这段代码：

```
 class UserDict:
        def __init__(self, dict=None):
            self.data = {}
            if dict is not None: self.update(dict) 
```

问题：为什么是“self.update”而不是“self.data.update”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:26:02.850

如果您查看源代码，`UserDict`您会发现该`update`方法是单独定义的。该`__init__`方法只是调用它自己的`update`方法，该方法调用属性`update`的。`data`这使得代码更加模块化和可维护。同样正如@Ignacio 指出的那样，任何其他继承自的类都可以更容易地`UserDict`扩展或覆盖该`update`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:23:05.953

让孩子可以通过替换`update()`方法轻松地重新定义更新操作。

# python - Python Tkinter 菜单栏

> ID：10068538
> 
> 赞同：2
> 
> 时间：2012-04-09T03:19:53.757
> 
> 标签：python, tkinter

下面是一些示例代码，一切都适用于菜单和函数的 gui，但是当你传递值时函数不起作用，当我想要它做的是计算问题时，因为它是设计的至。

我希望该功能是一个单独的程序，对主窗口来说是这样。原因是我想将更多这些数学函数添加到菜单中。

我怎样才能让这个功能工作？我是新手，请放轻松....提前谢谢您...

```
from Tkinter import *
import ttk

def DVT():
    def dvt(*args):
        """This Function will determine distance in feet from a constant velocity and time"""
        try:
            val1 = float(vel.get())
            val2 = float(tme.get())
            dist.set(val1 * val2)
        except ValueError:
            pass

    root = Tk()
    root.title('Distance from Velocity and Time')

    mainframe = ttk.Frame(root, padding="3 3 12 12")
    mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
    mainframe.columnconfigure(0, weight = 1)
    mainframe.rowconfigure(0, weight=1)

    vel = StringVar()
    tme = StringVar()
    dist = StringVar()

    vel_entry = ttk.Entry(mainframe, width=7, textvariable=vel)
    vel_entry.grid(column=2, row=1, sticky=(E, W))
    tme_entry = ttk.Entry(mainframe, width=7, textvariable=tme)
    tme_entry.grid(column=2, row=2, sticky=(E, W))

    ttk.Label(mainframe, textvariable=dist).grid(column=2, row=3, sticky=(W, E))
    ttk.Button(mainframe, text="Calculate", command=dvt).grid(column=3, row=2, sticky=W)
    ttk.Label(mainframe, text="Velocity").grid(column=1, row=1, sticky=(W, E))
    ttk.Label(mainframe, text="Time").grid(column=1, row=2, sticky=W)
    ttk.Label(mainframe, text="The Distance is:").grid(column=1, row=3, sticky=E) 

    for child in mainframe.winfo_children(): child.grid_configure(padx=5, pady=5)

    vel_entry.focus()
    tme_entry.focus()
    root.bind('<Return>', dvt) 
    root.mainloop()

root = Tk()
menubar = Menu(root)

vel = StringVar()
tme = StringVar()
dist = StringVar()

filemenu = Menu(menubar, tearoff=0)
filemenu.add_command(label="Distance from Velocity and Time", command=DVT)

filemenu.add_separator()

filemenu.add_command(label="Exit", command=root.quit)
menubar.add_cascade(label="File", menu=filemenu)
editmenu = Menu(menubar, tearoff=0)

editmenu.add_separator()

root.config(menu=menubar)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:11:13.207

```
from Tkinter import *
import ttk
import tkMessageBox

def DVT():

    vel = StringVar()
    tme = StringVar()
    dist = StringVar()

    def dvt():
        """This Function will determine distance in feet from a constant velocity and time"""
        try:
            val1 = float(vel_entry.get())
            val2 = float(tme_entry.get())
            dist.set(val1 * val2)
            tkMessageBox.showinfo(None,"The Distance is: " + dist.get())
        except ValueError as v:
            pass

    root = Tk()
    root.title('Distance from Velocity and Time')

    mainframe = ttk.Frame(root, padding="3 3 12 12")
    mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
    mainframe.columnconfigure(0, weight = 1)
    mainframe.rowconfigure(0, weight=1)

    vel_entry = ttk.Entry(mainframe, width=7)
    vel_entry.grid(column=2, row=1, sticky=(E, W))
    tme_entry = ttk.Entry(mainframe, width=7)
    tme_entry.grid(column=2, row=2, sticky=(E, W))

    ttk.Button(mainframe, text="Calculate", command=dvt).grid(column=3, row=2, sticky=W)
    ttk.Label(mainframe, text="Velocity").grid(column=1, row=1, sticky=(W, E))
    ttk.Label(mainframe, text="Time").grid(column=1, row=2, sticky=W)
    ttk.Label(mainframe, text="The Distance is:").grid(column=1, row=3, sticky=E)

    for child in mainframe.winfo_children(): child.grid_configure(padx=5, pady=5)

    vel_entry.focus()
    tme_entry.focus()
    root.bind('<Return>', dvt) 
    root.mainloop()

root = Tk()
menubar = Menu(root)

filemenu = Menu(menubar, tearoff=0)
filemenu.add_command(label="Distance from Velocity and Time", command=DVT)

filemenu.add_separator()

filemenu.add_command(label="Exit", command=root.quit)
menubar.add_cascade(label="File", menu=filemenu)
editmenu = Menu(menubar, tearoff=0)

editmenu.add_separator()

root.config(menu=menubar)
root.mainloop() 
```

# sse - 可能使用 SSE/SSE2/SSE3/SSE4 指令从多个数字创建位掩码的有效方法

> ID：10068541
> 
> 赞同：4
> 
> 时间：2012-04-09T03:20:24.410
> 
> 标签：sse, vectorization, simd

假设我在一个 128 位变量/寄存器中有 16 个 ascii 字符（因此有 16 个 8 位数字）。我想创建一个位掩码，其中这些位将是高位，其位位置（索引）由这 16 个字符表示。

例如，如果由这 16 个字符组成的字符串是`"CAD..."`，则在位掩码中第 67 位、第 65 位、第 68 位等应为 1。其余位应为 0。有什么特别有效的方法使用 SIMD 指令？

我知道其中一种技术是这样的加法：`2^(67-1)+2^(65-1)+2^(68-1)+...` 但这需要大量的操作。如果可能的话，我想用一个/两个操作/指令来做。

请让我知道一个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T11:57:06.543

SSE4.2 包含一条指令，几乎可以执行您想要的操作：PCMPISTRM 与立即操作数 0。其中一个操作数应包含您的 ASCII 字符，其他 - 一个常量向量，其值如 32、33、... 47。您得到导致 XMM0 的 16 个最低有效位。由于您需要 128 位，因此该指令应使用不同的常量向量执行 8 次（如果您只需要可打印的 ASCII 字符则为 6 次）。在每个 PCMPISTRM 之后，使用按位或将结果累加到某个 XMM 寄存器中。

这种方法有两个缺点：（1）您需要阅读 Intel 的架构软件开发人员手册以了解 PCMPISTRM 的详细信息，因为这可能是有史以来最复杂的 SSE 指令，以及（2）该指令非常慢（吞吐量为 1/2在 Nehalem 上，在 Sandy Bridge 上 1/3，在 Bulldozer 上 1/4），因此与“蛮力”方法相比，您几乎不会获得任何显着的速度提升。

# objective-c - 文件读取期间的目标C异常？

> ID：10068544
> 
> 赞同：1
> 
> 时间：2012-04-09T03:20:39.077
> 
> 标签：objective-c, xcode, cocoa, exception, osx-lion

我正在尝试逐行读取文本文件，文本文件将是一个非常小的文件，所以我只使用了：

```
NSString *fileContents = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil]; 
```

但是，该行引发了一个异常，说：

```
[NSURL getFileSystemRepresentation:maxLength:]: unrecognized selector sent to instance 0x7f92c40e1890 
```

我对Objective-C真的很陌生，我不明白为什么会这样......

提前致谢。

* * *

```
NSString *filePath;
NSOpenPanel *fileBrowser = [NSOpenPanel openPanel];
[fileBrowser setCanChooseFiles:YES];
[fileBrowser setCanChooseDirectories:YES];
if ([fileBrowser runModal] == NSOKButton) {
    NSArray *files = [fileBrowser URLs];
    for ( int i = 0; i < [files count]; i++ ) {
        filePath = [files objectAtIndex:i];
    }
} 
```

这是因为 [fileBrowser URLs] 部分吗？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T03:26:27.503

它看起来像是`filePath`一个`NSURL`，但`stringWithContentsOfFile:encoding:error:`期望路径是一个`NSString`。

试试这个：

```
NSString *fileContents = [NSString stringWithContentsOfURL:filePath encoding:NSUTF8StringEncoding error:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:26:35.597

您收到此错误是因为`NSURL`没有方法`getFileSystemRespresentation`，这是在`NSString`.

您可以在`fileContents`字符串上使用此方法，也可以将字符串传递`fileContents`给`NSURL`'`URLWithString`方法。

# c# - 动画 Gif 在 WPF 中没有动画

> ID：10068545
> 
> 赞同：1
> 
> 时间：2012-04-09T03:20:42.660
> 
> 标签：c#, wpf, animation

如何制作动画 .gif 以动画 WPF 用户控件中的每一帧？此处的 .gif 仅显示第一帧。

```
<UserControl.Triggers>
    <EventTrigger RoutedEvent="Button.Click" SourceName="btnPressQ">
        <EventTrigger.Actions>
            <BeginStoryboard Storyboard="{StaticResource sbdShowAlfa}"/>
        </EventTrigger.Actions>
    </EventTrigger>    
</UserControl.Triggers>

<Button Grid.Column="2" Command="{Binding Path=PressAndRelease}" CommandParameter="Q" Style="{StaticResource TransparentButton}">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid>
                            <Image Name="imgNormalQ" Source="/Wosk;component/Images/Alphaberts/Q1.png" Height="127" />
                            <Image Name="imgPressedQ" Source="/Wosk;component/Images/Alphaberts/DancingPeaks.gif" Height="262" Width="119" Margin="-23,-136,-21,0" Visibility="Hidden"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Panel.ZIndex" Value="999"/>
                                <Setter TargetName="imgPressedQ" Property="Visibility" Value="Visible"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:25:08.073

为什么不让动画 gif 驻留在帧之外呢？每一帧上的动画 .gif 都会对动画起作用，因为每一帧都必须在每一帧上重新开始。

# .net - File.Delete() 不能在运行模式下工作，但只能在调试模式下工作

> ID：10068547
> 
> 赞同：0
> 
> 时间：2012-04-09T03:21:32.697
> 
> 标签：.net, c#-4.0, file-io

我有一个奇怪的问题。我将上传的文件保存到数据库，然后尝试从上传文件夹中删除上传的文件。

这在调试模式下工作正常，但在运行模式下，文件保持未删除。

有人遇到过这个问题吗？

这是.NET 4

下面的代码片段：

```
private string SaveFiles(string rootFolder)
{
  var uploadedPhotos = GetAllFilesUploaded();
foreach (var file in uploadedFiles)
{
                string path= Path.Combine(rootFolder, "userfile", file.FileName);

                FileService.SaveUploadedFile(fileName, GetBytesFromLocalFile(path));

                File.Delete(path); <-- this only works in debug mode!!

                }
    }

    public static byte[] GetBytesFromLocalFile(string filePath)
            {
                using (FileStream fs = new FileStream(filePath, FileMode.Open))
                {
                    byte[] bytes = new byte[fs.Length];
                    fs.Read(bytes, 0, (int)fs.Length);
                    return bytes;
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:30:05.673

IMO 因为它在调试模式下工作，所以这不是编码问题。问题在于为 File.Delete(path) 提供的路径。由于符合[http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

```
If the file to be deleted does not exist, no exception is thrown. 
```

检查发布模式下的路径。可能与 bin 文件夹中的 Release 和 Debug 文件夹有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T03:36:18.483

为了补充 Nikhil 的答案，我建议在发布模式下使用 a`MessageBox`并`path`手动检查路径是否正确。

注意：不要忘记删除`MessageBox`之后。

# javascript - VBA中的Base64 HMAC SHA1字符串

> ID：10068548
> 
> 赞同：5
> 
> 时间：2012-04-09T03:21:33.490
> 
> 标签：javascript, vba, encryption, hmacsha1

我正在尝试将 ASP/VBScript OAuth 库转换为 VBA。挑战之一是这行代码：

```
Get_Signature = b64_hmac_sha1(strSecret, strBaseSignature) 
```

这个函数，b64_hmac_sha1 实际上是一个包含在 JavaScript 库中的函数。在我看来，从 VBA 调用 JavaScript 函数是相当不切实际的。

因为我对加密知之甚少，所以我什至不清楚这个 b64_hmac_sha1 函数的作用。HMAC SHA1 与 SHA1 不同吗？

我有一半怀疑如果我只是了解这个函数实际上在做什么，我可能能够在网上找到一些 VBA 代码来做我需要做的事情。如果我没有找到现有的函数，我可能会编写一个使用 .NET Cryptography 库的函数（如果你知道怎么做，你实际上可以从 VBA 调用 .NET 加密库）。

我不是在寻找将这个 JavaScript 转换为 VBA 的人。我只是想了解这个 b64_hmac_sha1 函数正在输出什么，所以如果可能的话，我可以尝试找到在 VBA 中实现相同输出的方法。

此 JavaScript 库的副本可在本网站上看到。您必须从 VBScript 向下滚动到 JavaScript 部分。 [http://solstice.washington.edu/solstice/ASP_Signing_REST_Example](http://solstice.washington.edu/solstice/ASP_Signing_REST_Example)

**Edit1：**
好的，这是我最终编写和使用的函数：

```
Public Function Base64_HMACSHA1(ByVal sTextToHash As String, ByVal sSharedSecretKey As String)

    Dim asc As Object, enc As Object
    Dim TextToHash() As Byte
    Dim SharedSecretKey() As Byte
    Set asc = CreateObject("System.Text.UTF8Encoding")
    Set enc = CreateObject("System.Security.Cryptography.HMACSHA1")

    TextToHash = asc.Getbytes_4(sTextToHash)
    SharedSecretKey = asc.Getbytes_4(sSharedSecretKey)
    enc.Key = SharedSecretKey

    Dim bytes() As Byte
    bytes = enc.ComputeHash_2((TextToHash))
    Base64_HMACSHA1 = EncodeBase64(bytes)
    Set asc = Nothing
    Set enc = Nothing

End Function

Private Function EncodeBase64(ByRef arrData() As Byte) As String

    Dim objXML As MSXML2.DOMDocument
    Dim objNode As MSXML2.IXMLDOMElement

    Set objXML = New MSXML2.DOMDocument

    ' byte array to base64
    Set objNode = objXML.createElement("b64")
    objNode.DataType = "bin.base64"
    objNode.nodeTypedValue = arrData
    EncodeBase64 = objNode.Text

    Set objNode = Nothing
    Set objXML = Nothing

End Function 
```

使用此功能：

```
Debug.Print Base64_HMACSHA1("abc", "123")
VAsMU9SSWDe9krP3Gr56nXC2dsQ= 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:57:12.640

HMAC 是一种将哈希函数（如 SHA1）转换为[消息验证码](http://en.wikipedia.org/wiki/Message_authentication_code)(MAC) 的构造。

普通散列函数没有任何与之关联的秘密数据。这意味着任何人都可以计算摘要，假设他们有原始输入。HMAC 使用密钥，因此只有拥有密钥的人才能计算输出。

假设我有一个文件 file.txt。我想把这个寄给你，我们需要确保没有人篡改它。抱歉，我没有聪明的方法来仅用文字来表示这一点。

```
me -> file.txt -> you
me -> SHA1(file.txt) -> you 
```

然后，您通过计算自己的 SHA1 摘要来验证结果，并验证它与我发送给您的内容相匹配。

现在假设攻击者在中间。不幸的是，由于不涉及秘密，攻击者可以修改文件，并计算他自己的文件/摘要对。当您计算您的版本时，它将与他发送给您的内容相匹配，而您也不会更聪明。

```
me -> file.txt -> attacker -> modified.txt -> you
me -> SHA1(file.txt) -> attacker -> SHA1(modified.txt) -> you 
```

使用 HMAC，我们将密钥添加到计算中。

```
me -> file.txt -> you
me -> SHA1_HMAC(file.txt, our_secret) -> you 
```

当你计算你的版本时，你也应用了密钥，结果匹配。攻击者在不知道密钥的情况下无法替换摘要。

```
me -> file.txt -> attacker -> modified.txt -> you 
me -> SHA1(file.txt) -> attacker -> SHA1_HMAC(modified.txt, // DOESN'T KNOW KEY) -> you 
```

HMAC 是一种非常特殊的添加密钥的方法。不幸的是，仅将密钥连接到文件末尾或在散列之前预先挂起它的简单方法容易受到不同的攻击（例如长度扩展攻击）。

B64 是对输出进行 Base64 编码，以使其美观。

这段代码最终要做的是获取一些输入和一些密钥，计算一个 160 位的摘要，并对结果进行 base64 编码。

[.NET](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hmacsha1.aspx)中有一个 SHA1 HMAC 的实现

[这](https://stackoverflow.com/questions/169907/how-do-i-base64-encode-a-string-efficiently-using-excel-vba)看起来像是 VBA 的 Base64 实现

我希望这回答得足够好，或者足够清楚。如果文字令人困惑，请告诉我。我尝试了几种表达方式，但似乎都没有那么清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:07:49.677

你写：

> 在我看来，从 VBA 调用 JavaScript 函数是相当不切实际的。

那是一个误判。

Javascript 可以很容易地打包为 Windows 脚本组件 (WSC)，然后通过 COM、从 VBA、Perl、VB6 或其他工具调用。

这是将 Javascript 打包为 WSC 并调用它的示例： [https ://stackoverflow.com/a/849970/48082](https://stackoverflow.com/a/849970/48082)

因此，您的问题应该很容易解决。

# html-parsing - 使用 go-html-transform 预处理 HTML：替换失败

> ID：10068552
> 
> 赞同：1
> 
> 时间：2012-04-09T03:22:00.103
> 
> 标签：html-parsing, go

继[this question on whitelisting HTML tags](https://stackoverflow.com/questions/10025292/whitelist-tags-exempt-from-escaping-using-gos-html-template)之后，我一直在尝试 Jeremy Wall 的[go-html-transform](http://code.google.com/p/go-html-transform/)。为了改进可搜索的文档，我在这里问这个问题，而不是直接纠缠作者......希望这对于 SO 来说不是太特定于工具。

App Engine，最新的 SDK。Post.Body 是一个 [] 字节。这有效：

```
package posts

import (
    // ...      
    "html/template"
    "code.google.com/p/go-html-transform/html/transform"
    "code.google.com/p/go-html-transform/h5"
)

// ...

// Pre-process post body, then return it to the template as HTML()
// to avoid html/template's escaping allowable tags
func (p *Post) BodyHTML() template.HTML {
    doc, _ := transform.NewDoc(string(p.Body))
    t := transform.NewTransform(doc)

    // Add some text to the end of any <strong></strong> nodes.
    t.Apply(transform.AppendChildren(h5.Text("<em>Foo</em>")), "strong")
    return template.HTML(t.String())
} 
```

结果：

```
<strong>Blarg.<em>Foo</em></strong> 
```

但是，如果不是 AppendChildren() 我使用如下内容：

```
t.Apply(transform.Replace(h5.Text("<em>Foo</em>")), "strong") 
```

我收到内部服务器错误。我是否误解了 Replace() 的使用？[现有的文档](http://code.google.com/p/go-html-transform/source/browse/html/transform/transform.go)表明这种事情应该是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T16:46:43.483

在 App Engine 之外运行您的转换代码，它会出现恐慌，此时您可以在源代码中看到一个 TODO。然后阅读代码并看到如果给定一个根节点就会出现恐慌并不太难。

# android - onActivityResult 未在 Android 中触发

> ID：10068554
> 
> 赞同：1
> 
> 时间：2012-04-09T03:22:49.010
> 
> 标签：android, camera, android-camera

我正在制作一个 android 应用程序，它从相机中获取图像然后显示它。但是，我无法显示单击的图像可能是因为`onActivityResult()`未触发。

这是我的一段代码。谁能建议我我错过了什么？

```
public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final int CAMERA_PIC_REQUEST = 1337; 
        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

            }
            @override
            public void onActivityResult(int requestCode, int resultCode, Intent data) {
                Log.d("Message1", "I reached 2");
                 //super.onActivityResult(requestCode, resultCode, data);
                if (requestCode == CAMERA_PIC_REQUEST) {
                    // do something
                    Bitmap thumbnail = (Bitmap) data.getExtras().get("data");  
                    ImageView image = (ImageView) findViewById(R.id.imageView1);  
                    image.setImageBitmap(thumbnail); 

                }
            }

        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:30:46.877

onActivityResult() 必须在您的 Activity 类中声明（而不是在 onClickListener 中）。如果你更正了“@override”（'o' 必须大写），在你当前的 onActivityResult() 声明之前的错字，你会明白我的意思......

请参阅[Activity.onActivityResult() 文档](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)。

这是您的课程的外观：

```
public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        final int CAMERA_PIC_REQUEST = 1337; 
        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
                startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

            }
        });
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
       Log.d("Message1", "I reached 2");
       //super.onActivityResult(requestCode, resultCode, data);
       if (requestCode == CAMERA_PIC_REQUEST) {
         // do something
         Bitmap thumbnail = (Bitmap) data.getExtras().get("data");  
         ImageView image = (ImageView) findViewById(R.id.imageView1);  
         image.setImageBitmap(thumbnail); 
       }
     }

} 
```

# php - 在数组上设置键和值

> ID：10068558
> 
> 赞同：0
> 
> 时间：2012-04-09T03:23:23.150
> 
> 标签：php, arrays, foreach

我有这样的数组： `$myarray = array("color", "red", "size", "big", "flavor", "bitter");`颜色、大小和风味是键，另一个是值。我怎样才能循环真正的值只在数组上。

我有几个这样的数组，所以我只需要创建一个表并显示它们的值，例如：

```
<table>
 <thead>
  <tr>
   <th>Color</th>
   <th>Size</th>
   <th>Flavor</th>
  </tr>
 </thead>
 <tbody>
       // I'm stuck here because I don't know how to get the values of each array
 </tbody>
</table> 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:29:27.013

你的[语法](http://php.net/manual/en/language.types.array.php)有点不对劲；尝试这样的数组：

```
$myarray=array(
    'color'=>'red',
    'size'=>'big',
    'flavor'=>'bitter'
); 
```

然后你可以像这样获取值：

```
$color=$myarray['color'];
$size=$myarray['size'];
$flavor=$myarray['flavor']; 
```

或者使用上面的数组，您可以执行几个循环：

```
<table>
    <thead>
        <tr>
            <?php
                $keys=array_keys($myarray);
                foreach($keys as $key) {
                    echo('<th>'.$key.'</th>');
                }
            ?>
        </tr>
    </thead>
    <tbody>
        <tr>
            <?php
                foreach($myarray as $val) {
                    echo('<th>'.$val.'</th>');
                }
            ?>
        </tr>
    </tbody>
</table> 
```

[array_keys() 文档](http://php.net/manual/en/function.array-keys.php) 这是一个转换数组的简单函数；虽然有点粗糙，但它处理一切都很好：

```
<?php
    function addKey($arr) {
        $newArr=array();
        $key=null;
        foreach($arr as $val) {
            if(!$key) {
                $key=$val;
            } else {
                $newArr[$key]=$val;
                $key=null;
            }
        }
        return($newArr);
    }
    $myarray=array('color','red','size','big','flavor','bitter');
    $myNewArray=addKey($myarray);
?> 
```

然后在使用中，例如：

```
<?php
    foreach($myNewArray as $key=>$val) {
        echo('<p>Key: '.$key.'<br />Value: '.$val.'</p>');
    }
?> 
```

这将输出：

```
Key: color
Value: red

Key: size
Value: big

Key: flavor
Value: bitter 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T03:27:26.077

```
while (list(, $key) = each($array)) {
    $value = current($array);
    next($array);

    echo $key, ': ', $value, PHP_EOL;
} 
```

但是，是的，您应该真正使用适当的关联数组而不是这种临时解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T03:34:10.113

您错误地定义了数组。

```
$myarray=array(
    'color'=>'red',
    'size'=>'big',
    'flavor'=>'bitter'
); 
```

然后与 foreach 一起使用

```
foreach($myarray as $key => $value) {
   echo $key; //echoes the indexes like color
   echo $value; //echoes values like red
} 
```

# c#-4.0 - 包含用户控件的表单不隐藏

> ID：10068562
> 
> 赞同：0
> 
> 时间：2012-04-09T03:24:41.650
> 
> 标签：c#-4.0, user-controls

我面临一些表单隐藏问题。

实际上我有一个带有用户控件的表单。用户控件有提交按钮，当我单击它时，我希望用户控件以及包含它的表单消失。我可以使用 this.hide()，但它只是隐藏用户控件而不是表单。

我创建一个

```
 form1 f1 = new form1();
         f1.hide(); 
```

甚至尝试过

```
 f1.close(), 
```

但没有任何工作。请帮忙

编辑：这是实际代码：

```
 Input inp = new Input();
            inp.Show(); 
```

它是调用输入表单的地方。在它的加载事件中，我调用了 usinput 用户控件。

```
 USinput usinp = new USinput(); 
```

然后在用户控件的提交按钮中，使用以下代码：

```
 Input inpt = new Input();
            inpt.Hide();
            this.Hide();
            Companies co = new Companies();
            co.Show(); 
```

它显示了新表单并且用户控件消失了，但输入表单仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:33:10.230

*   您是否尝试过仅使用该代码？
*   您是否确保您的控件没有被调用`f1`并且没有名称冲突？
*   你的控件类名是form1吗？

肯定是围绕着它。

编辑：您的问题在这里的第一行。

输入 inpt = new Input(); inpt.Hide(); this.Hide(); 公司 co = 新公司（）；合作展示（）；

在您的 UserControl 中，您创建一个新表单。所以你有2个表格！但是，第二个永远不会可见。您必须向 UserControl 发送对表单的引用。这样，您始终使用相同的表单。

以下是从表单创建 UserControl 的方法：

```
USinput usinp = new USinput(this); //Will send a reference of the form to the control 
```

您的控件的构造函数将如下所示：

```
private Form parentForm;
public USinput(Input parentForm)
{
    this.parentForm = parentForm;
} 
```

您的提交按钮代码将包含以下内容：

```
parentForm.hide(); 
```

# objective-c - Xcode 不断要求输入密码以使用系统钥匙串

> ID：10068566
> 
> 赞同：112
> 
> 时间：2012-04-09T03:25:12.303
> 
> 标签：objective-c, ios, xcode

我在 Lion 10.7.3 下运行 Xcode 4.3.2，但每次我在设备上安装我的 iPhone 应用程序时，它都会不断询问我管理员用户名和密码。

我已经完成了这里建议的一切，甚至重新安装了 Xcode：

[另一个 StackOverflow 相关问题](https://stackoverflow.com/questions/1837889/authorize-a-non-admin-developer-in-xcode-mac-os)

但到目前为止还没有成功。

这是一直出现的窗口的图片：

![Xcode 4.3.2 不断要求输入管理员用户名和密码](../Images/dd42c774e3c506def776ffeb52be11a8.png)

关于如何解决这个问题的任何其他建议？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-04-14T04:32:52.150

问题是我的钥匙串上的开发人员证书位于左侧面板的“**系统”下，该面板始终处于锁定状态，需要我的密码才能解锁！**

然后我将开发者证书移至“**登录**”，它始终处于解锁状态，现在一切正常。xCode 要求输入密码的烦恼消失了。

请查看这张图片了解更多详情：![在此处输入图像描述](../Images/9c4a24891e0dc79a03874176213411d8.png)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-10-22T07:16:57.310

1.  转到“**钥匙串访问**”
2.  双击证书下的私钥用于对您的应用程序进行代码签名
3.  在“**访问控制**”部分列表下将“Xcode”添加到“**始终允许这些应用程序： ”。**

 *** * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-02-25T05:23:22.183

这是我在 Xcode 7.2 上修复它的方法（也适用于 7.3）：

1.  打开钥匙串。
2.  选择系统，选择证书类别。
3.  选择开发者证书并双击私钥。
4.  检查访问控制并勾选“允许所有项目访问此”。
5.  重新启动 Xcode 并在设备上运行应用程序。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2018-04-24T05:40:30.700

希望这些步骤可以解决您的问题。

*   打开钥匙串访问。
*   在左上角，解锁钥匙串（如果已锁定）。
*   从左上角选择系统钥匙串。
*   找到您的分发证书并单击披露三角形。
*   双击分发证书下的“私钥”。
*   在弹出窗口中，转到访问控制选项卡。
*   选择“允许所有应用程序访问此项目”。
*   保存更改。
*   关闭所有窗户。
*   运行应用程序。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-09-02T08:09:50.540

我确实按照这个来解决上述问题：

1.  转到**钥匙串访问**

2.  选择系统**>>**您的证书**>>**右键单击**“获取信息”**

3.  证书信息窗口将打开**>>**选择**“信任”**部分

4.  从下拉选项中选择**“始终信任”**

![在此处输入图像描述](../Images/b4fa2bd3178c8dfd173847dfb673c0ba.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-10T13:08:19.250

在我的情况下，带有私钥的所需证书保存在**系统**钥匙串，**证书**类别中。为了解决这个问题，我导出了证书（包括私钥），并将其移至**登录**钥匙串，**证书**类别。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-05T13:20:31.533

command+c 系统钥匙串中的分发证书

会话登录钥匙串中的 command+v

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-18T14:46:04.903

就我而言，我刚搬到新的 Mac 上。在模拟器中运行应用程序项目没有问题，并且在设备上运行它一开始也很好。但是，第二次在设备上运行项目时，XCode 突然弹出以下消息，要求输入钥匙串密码

> Codesign 想要访问关键“App Development: Some Name (Some Company)”

问题是，我的 Mac 密码和任何其他已知密码都不起作用……

经过一番搜索，我找到了解决方案：**重新启动您的 Mac ......！**

重新启动后，该条目仍在钥匙串中，但呈灰色显示，无法以任何方式选择、解锁或使用。

我不知道这是怎么回事，但知道 XCode 可以再次运行该项目而不会出现任何问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-25T12:33:23.297

注意：在我的情况下[，这个答案](https://stackoverflow.com/a/13006617/3811068)不起作用。正如其中一条评论所提到的，这是一种更优雅的方式，所以如果可行，请先尝试。

* * *

仅当上述方法不起作用时才尝试此操作，因为我不确定这是否是最佳方法。这对我来说可以。

1.  在 MacOS 中打开 Keychain Access 应用程序。接下来在左侧栏中，在“系统钥匙串”下单击以打开“系统”。在列表中搜索您的（在我的情况下是配置文件）“iPhone 开发人员...”证书，然后单击箭头将其展开。请参考这个截图：[![MacOS 中的钥匙串访问应用程序](../Images/2a096eba8b058c1969acdb3b6ef3d3a4.png)](https://i.stack.imgur.com/klm7o.png)
2.  双击展开的项目，在弹出窗口中打开您的私钥。转到访问控制选项卡并选择“允许所有应用程序访问此项目”选项。请参考这个截图：[![我们证书的私钥访问控制选项卡](../Images/67f92f0f1ff0fdabfa5c8f53729f7a5d.png)](https://i.stack.imgur.com/HXMdS.png)
3.  单击“保存更改”。出现提示时输入您的凭据 - 用户名和密码。关闭私钥的弹出窗口。退出 Keychain 并再次按照上述步骤检查更改是否已成功保存。
4.  **退出 Xcode 应用程序**并再次打开它。现在，当您使用此证书运行 iOS 项目时，它不应该要求输入密码。**

# algorithm - 字符串切割的动态编程练习

> ID：10068568
> 
> 赞同：9
> 
> 时间：2012-04-09T03:25:55.157
> 
> 标签：algorithm, dynamic-programming

我一直在研究这[本书](http://www.cs.berkeley.edu/~vazirani/algorithms/chap6.pdf)中的以下问题。

> 某种字符串处理语言提供了一种将字符串分成两部分的原始操作。由于此操作涉及复制原始字符串，因此无论剪切的位置如何，长度为 n 的字符串都需要 n 个单位时间。现在假设你想把一个字符串分成很多块。休息的顺序会影响总运行时间。例如，如果你想在位置 3 和 10 剪切一个 20 个字符的字符串，那么在位置 3 进行第一次剪切会产生 20+17=37 的总成本，而首先执行位置 10 的成本会更好 20+ 10=30。

我需要一个动态编程算法，给定 m 个切割，找到将一个字符串切割成 m+1 个片段的最小成本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T05:50:57.400

在我看来，分而治之的方法是解决这类问题的最佳方法。这是该算法的Java实现：

**注意**：数组`m`应按升序排序（使用`Arrays.sort(m);`）

```
public int findMinCutCost(int[] m, int n) {
   int cost = n * m.length;
   for (int i=0; i<m.length; i++) {
      cost = Math.min(findMinCutCostImpl(m, n, i), cost);
   }
   return cost;
}

private int findMinCutCostImpl(int[] m, int n, int i) {
   if (m.length == 1) return n;
   int cl = 0, cr = 0;
   if (i > 0) {
      cl = Integer.MAX_VALUE;
      int[] ml = Arrays.copyOfRange(m, 0, i);
      int nl = m[i];
      for (int j=0; j<ml.length; j++) {
         cl = Math.min(findMinCutCostImpl(ml, nl, j), cl);
      }
   }
   if (i < m.length - 1) {
      cr = Integer.MAX_VALUE;
      int[] mr = Arrays.copyOfRange(m, i + 1, m.length);
      int nr = n - m[i];
      for (int j=0; j<mr.length; j++) {
         mr[j] = mr[j] - m[i];
      }
      for (int j=0; j<mr.length; j++) {
         cr = Math.min(findMinCutCostImpl(mr, nr, j), cr);
      }
   }
   return n + cl + cr;
} 
```

例如 ：

```
 int n = 20;
 int[] m = new int[] { 10, 3 };

 System.out.println(findMinCutCost(m, n)); 
```

将打印`30`

****编辑****

我已经实施了另外两种方法来回答问题中的问题。

### 1\. 中切近似

这种方法总是递归地切割最大的块。结果并不总是最好的解决方案，但提供了不可忽略的增益（在我的测试中大约为 +100000% 增益），与最佳成本的最小切割损失差异可忽略不计。

```
public int findMinCutCost2(int[] m, int n) {
   if (m.length == 0) return 0;
   if (m.length == 1) return n;
      float half = n/2f;
      int bestIndex = 0;
      for (int i=1; i<m.length; i++) {
         if (Math.abs(half - m[bestIndex]) > Math.abs(half - m[i])) {
            bestIndex = i;
         }
      }
      int cl = 0, cr = 0;
      if (bestIndex > 0) {
         int[] ml = Arrays.copyOfRange(m, 0, bestIndex);
         int nl = m[bestIndex];
         cl = findMinCutCost2(ml, nl);
      }
      if (bestIndex < m.length - 1) {
         int[] mr = Arrays.copyOfRange(m, bestIndex + 1, m.length);
         int nr = n - m[bestIndex];
         for (int j=0; j<mr.length; j++) {
         mr[j] = mr[j] - m[bestIndex];
      }
      cr = findMinCutCost2(mr, nr);
   }
   return n + cl + cr;
} 
```

### 2\. 恒定时间多切

无需*计算*最小成本，只需使用不同的索引和缓冲区。由于此方法在恒定时间内执行，因此它总是返回 n。另外，该方法*实际上*将字符串拆分为子字符串。

```
public int findMinCutCost3(int[] m, int n) {
   char[][] charArr = new char[m.length+1][];
   charArr[0] = new char[m[0]];
   for (int i=0, j=0, k=0; j<n; j++) {
      //charArr[i][k++] = string[j];   // string is the actual string to split
      if (i < m.length && j == m[i]) {
         if (++i >= m.length) {
            charArr[i] = new char[n - m[i-1]];
         } else {
            charArr[i] = new char[m[i] - m[i-1]];
         }
         k=0;
      }
   }
   return n;
} 
```

**注意**：最后一个方法可以很容易地修改为接受`String str`参数而不是`n`set `n = str.length()`，并`String[]`从`charArr[][]`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T11:58:27.183

对于动态规划，我声称你真正需要知道的是状态空间应该是什么——如何表示部分问题。

在这里，我们通过创建新的中断将一个字符串分成 m+1 个片段。我声称一个好的状态空间是一组 (a, b) 对，其中 a 是子串的开始位置，b 是同一子串的结束位置，计为最后的中断数分解的字符串。与每对相关的成本是分解它的最低成本。如果 b <= a + 1，则成本为 0，因为没有更多的中断可放入。如果 b 更大，则该子字符串中下一个中断的可能位置是点 a+1、a+2 ,... b-1。不管我们把它放在哪里，下一次休息都会花费 ba，但是如果我们把它放在位置 k，那么以后休息的最小成本是 (a, k) + (k, b)。

因此，要使用动态规划解决这个问题，请建立一个最小成本表 (a, b)，您可以在其中通过考虑 k - 1 个可能的中断然后查找字符串的成本来计算具有 k 部分的字符串的中断成本最多有 k - 1 个部分。

对此进行扩展的一种方法是首先创建一个表 T[a, b] 并将该表中的所有条目设置为无穷大。然后再次检查表，其中 b <= a+1 放置 T[a,b] = 0。这将填充表示原始字符串部分的条目，这些部分不需要进一步切割。现在扫描表格，对于每个 T[a,b] 且 b > a + 1 考虑所有可能的 k 使得 a < k < b 并且如果 min_k ((break between a and b) + T[a,k] + T[k,b]) < T[a,b] 将 T[a,b] 设置为该最小值。这表明您现在知道一种方法可以廉价地切分 T[a,k] 和 T[k,b] 表示的子字符串，因此这为您提供了一种更好的切分 T[a,b] 的方法。如果你现在重复这 m 次你就完成了 - 使用标准的动态编程回溯来制定解决方案。如果您为每个 T[a,

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T01:20:32.423

蟒蛇代码：

```
mincost(n, cut_list) =min {   n+ mincost(k,left_cut_list) + min(n-k, right_cut_list) }

import sys

def splitstr(n,cut_list):

        if len(cut_list) == 0: 
            return [0,[]]
        min_positions = []
        min_cost = sys.maxint
        for k in cut_list:
            left_split = [ x for x in cut_list if x < k]
            right_split = [ x-k for x in cut_list if x > k] 
            #print n,k, left_split, right_split
            lcost = splitstr(k,left_split)
            rcost = splitstr(n-k,right_split)      
            cost = n+lcost[0] + rcost[0]
            positions = [k] + lcost[1]+ [x+k for x in rcost[1]] 
            #print "cost:", cost, " min: ", positions
            if cost < min_cost:
                min_cost = cost
                min_positions = positions

        return ( min_cost, min_positions) 

print splitstr(20,[3,10,16])  # (40, [10, 3, 16])

print splitstr(20,[3,10]) # (30, [10, 3])

print splitstr(5,[1,2,3,4,5]) # (13, [2, 1, 3, 4, 5])

print splitstr(1,[1]) # (1, [1]) # m cuts m+1 substrings 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-14T20:28:12.157

这是一个 c++ 实现。它是使用 DP 的 O(n^3) 实现。假设切割数组是排序的。如果不是，则需要 O(n^3) 时间对其进行排序，因此渐近时间复杂度保持不变。

```
#include <iostream>
#include <string.h>
#include <stdio.h>
#include <limits.h>
using namespace std;
int main(){
    int i,j,gap,k,l,m,n;
    while(scanf("%d%d",&n,&k)!=EOF){

        int a[n+1][n+1];
        int cut[k];
        memset(a,0,sizeof(a));
        for(i=0;i<k;i++)
            cin >> cut[i];
        for(gap=1;gap<=n;gap++){
            for(i=0,j=i+gap;j<=n;j++,i++){
                if(gap==1)
                    a[i][j]=0;
                else{
                    int min = INT_MAX;
                    for(m=0;m<k;m++){
                        if(cut[m]<j and cut[m] >i){
                            int cost=(j-i)+a[i][cut[m]]+a[cut[m]][j];

                            if(cost<min)
                                min=cost;
                        }
                    }
                    if(min>=INT_MAX)
                    a[i][j]=0;
                    else
                        a[i][j]=min;
                }
            }
        }
        cout << a[0][n] << endl;
    }
    return 0;
} 
```

# asp.net - 覆盖实体的删除

> ID：10068571
> 
> 赞同：3
> 
> 时间：2012-04-09T03:26:21.103
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework

我需要将文件与数据库条目一起存储。如何覆盖的`Remove`方法，`DbContext`以便条目*和*文件都被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T03:29:35.233

您可以覆盖该`SaveChanges`方法，如下所述：[Entity Framework 4.1 DbContext Override SaveChanges to Audit Property Change](https://stackoverflow.com/questions/6156818/entity-framework-4-1-dbcontext-override-savechanges-to-audit-property-change)

只需添加您自己的案例即可删除特定实体类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:32:44.390

我将创建 DbSet 的新类扩展，它将所有其他内容推送到基础，但删除它也会更改您的文件。这应该适用于 DBcontext。这也意味着您可以将您`FileAndDbSet<T>`用于某些实体，而将常规`DbSet<T>`用于您没有文件的实体

# python - 在 Python 中删除一个对象及其所有引用？

> ID：10068576
> 
> 赞同：3
> 
> 时间：2012-04-09T03:27:10.820
> 
> 标签：python, c, memory-management, swig

有没有办法一次删除对对象的所有引用？我知道那是不合情理的，所以我会解释我正在尝试做的事情，也许有人知道更好的方法。

我正在为 C 库的 SWIG 包装器编写面向对象的包装器。当删除 C 对象之一的代理时，它也会删除子对象（直接在 C 中）。我希望这也能触发在 Python 中删除他们的代理对象。否则我会遇到一种情况，即 Python 对象携带无效指针，如果它们被访问，则会出现段错误。

它看起来像这样：

```
class Parent(object):
    def __init__(self):
        self.ptr = swig.createParent()
    def __del__(self):
        swig.deleteParent(self.ptr) # also deletes children

class Child(object):
    def __init__(self, parent):
        self.ptr = swig.createChild(parent)
    def __del__(self):
        swig.deleteChild(self.ptr) 
```

这就是我担心的情况：

```
p = Parent()
c = Child(parent)
del p
# accessing c.ptr now would be bad right? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:52:29.093

如果我理解正确，您正在包装一些 C 代码，并且 C 代码有一个可以调用的析构函数。之后，任何使用指向 C 代码对象的指针的尝试都会导致致命的崩溃。

我不确定您的确切情况，因此我将给您两个替代答案。

0) 如果 C 对象由于某种原因可以从您的控制中释放出来，并且您需要确保您的 Python 包装器代码不会崩溃，您需要让 Python 包装器知道 C 对象是否可用。让您的 Python 对象处理指针不再有效。您可以引发 Python 异常、返回错误代码，或者只是让方法函数成为无操作函数，这取决于您正在做什么。消失的 C 对象不会释放 Python 对象，因此您可以干净地处理它。

1）如果仅在释放Python对象时释放C对象，则没有问题。Python 引用，当它们超出范围或你调用`del()`它们时，不要释放 Python 对象；他们只是减少该对象的引用计数。当引用计数变为零时，对象*被*释放，您的`__del__()`方法函数可以调用 C 代码来释放 C 对象。

您可以通过运行以下代码来观察它是如何工作的：

```
class DelTest(object):
    def __init__(self):
        print "__init__() called: object %08x created" % id(self)
    def __del__(self):
        print "__del__() called: object %08x destroyed" % id(self)

print "begin"
print "creating object, binding to name d"
d = DelTest()
print "adding reference bound to name x"
x = d
print "adding reference bound to lst[0]"
lst = []
lst.append(d)
print "deleting lst"
del(lst)
print "deleting x"
del(x)
print "deleting d"
del(d)
print "end" 
```

上述输出：

```
begin
creating object, binding to name d
__init__() called: object 01e4db50 created
adding reference bound to name x
adding reference bound to lst[0]
deleting lst
deleting x
deleting d
__del__() called: object 01e4db50 destroyed
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:41:33.247

[关于method](http://docs.python.org/reference/datamodel.html#object.__del__)[行为的`__del__()`](http://docs.python.org/reference/datamodel.html#object.__del__)注释。

> del x 不直接调用`x.__del__()`——前者将 x 的引用计数减一，后者仅在 x 的引用计数达到零时调用。

因此，即使您 delete `parent`，也不一定意味着`__del__`在有任何引用之前立即执行。这是一个例子。

```
>>> class C(object):
...     def __del__(self):
...         print "deleting object of type: %s" %self.__class__
... 
>>> class D(object):
...     def __init__(self, parent):
...         self.parent = parent
...     def __del__(self):
...         print "deleting object of type: %s" % self.__class__
... 
>>> c = C()
>>> d = D(c)
>>> del c
>>> del d
deleting object of type: <class '__main__.D'>
deleting object of type: <class '__main__.C'> 
```

请注意，`__del__`方法是在`C`调用*之后*`del d`调用的。

# c# - 在 MonoTouch Binding 项目中包含 xib(s) / nib(s)

> ID：10068581
> 
> 赞同：1
> 
> 时间：2012-04-09T03:27:49.073
> 
> 标签：c#, xamarin.ios, monodevelop, xib, nib

我正在尝试创建一个可重用的 MonoTouch 库，其中包含在 xib 中定义的视图和用 Objective-C 编写的控制器代码。

*   我创建了一个静态的 Objective-C 库，其中包含相关的控制器代码，并声明了所有的出口。
    一个静态的 *.a 库显然不能包含 xib/nib 数据（如果可能的话，有人可以告诉我），所以我不能在这个库中嵌入 xibs/nib。
*   我创建了一个定义相关包装类的“MonoTouch 绑定项目”。
    理想情况下，这也是我嵌入 xib/nib 的地方，并将它们包含在链接此 dll 的任何最终项目的应用程序包中。

现在看看“MonoTouch 库项目”对 xibs 的作用——它使用 ibtool 将其编译为 nib，然后使用 smcs 的 /res 选项将其作为资源嵌入到生成的库 dll 中。我假设这是因为 xib 文件在项目中标有“InterfaceDefinition”构建操作而被触发。

但是，“MonoTouch 绑定项目”没有“InterfaceDefinition”构建操作。使用 MonoTouch 绑定项目这是否可能？

我还没有尝试过，但我假设我可以通过结合 Library 项目与 ibtool 和 smcs /res 的功能以及 Binding Project 与 btouch 和 smcs 的功能来手动工作。但我宁愿避免这种情况，我最近很享受 Makefile 的缺失。

Xamarin/MonoTouch 团队 - 将来有没有计划将此添加到 Binding Projects 中？有什么方法可以强制它目前工作吗？

# css - CSS：在 li 项目前加上图像，可能吗？

> ID：10068583
> 
> 赞同：0
> 
> 时间：2012-04-09T03:28:39.697
> 
> 标签：css, image

是否可以在“li”项目前加上小图像？我没有找到合适的css属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T03:35:29.430

您可以使用图像作为要点：

```
ul { list-style-image: url("fancybullet.gif"); } 
```

如果做不到这一点，您将 list-style-type 冷设置为 none，然后使用 CSS 将图像放置在正确的位置，就像[在这篇文章中一样。](http://css.maxdesign.com.au/listamatic/vertical05.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:35:20.963

您可以使用 CSS :before 伪选择器。

```
li:before { content: url(image.jpg); } 
```

请注意，这在 IE8 及以下版本中可能无法完全正确。 [这里有更多关于 :before 和 :after 选择器的信息。](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)

我觉得你最好在 Javascript 中这样做，但是使用像 jQuery 这样的库。我认为这是一个在将 HTML 呈现到屏幕后需要动态解决方案的问题，在这种情况下，最好使用 Javascript。

# javascript - PHP to JS：打印与 AJAX responseText 兼容的 js 变量（如 PHP echo）？

> ID：10068584
> 
> 赞同：2
> 
> 时间：2012-04-09T03:28:50.400
> 
> 标签：javascript, ajax, variables

我使用 W3 Schools 的 AJAX PHP 示例 (http://www.w3schools.com/ajax/ajax_aspphp.asp) 作为我的**访客列表 Web 应用程序**的基础，该应用程序使用存储在*LocalStorage*而不是 MySQL 数据库中的数据，以便用户可以在离线时进行搜索。现在我正在尝试完成搜索客人部分。

这就是它的工作原理（与上面的示例*不同*）：

1.  （索引.php）。将 MySQL db 中的所有记录放置/镜像到 javascript 数组中
2.  （索引.php）。在 LocalStorage 中存储上述 js 数组
3.  （索引.php）。通过使用示例中使用的 AJAX GET 代码，将搜索到的项目发送到 getData.html（一个 html 文件而不是 W3 中的 php 文件）
4.  (getData.html)。通过url参数成功获取到搜索到的item
5.  (getData.html)。像上面的例子一样循环和匹配值（用javascript重写的代码）。

**但**这里结束了我的成功。AJAX 代码与上面提供的示例中的代码相同（当然除了对 getData.html 的引用），其他一切似乎都在工作，所以我不会用我的整个代码来打扰你。在提到的示例中，在 PHP 文件的最底部它说

```
 //output the response
    echo $response; 
```

这是javascript似乎失败的地方。我一直在拼命地尝试回显/打印响应，但由于某种原因，**它没有正确返回到 index.php。**强制它至少显示某些内容的唯一方法是使用 php echo，或者只是在 HTML 标记内的 getData 文档的某处写入纯 html 文本。我也试过 getElementById('txtHint').innerHTML = "hello"; 看看它是否有效但没有成功。

**最明显的方法**是简单地将 echo $response 替换为 js 中的等价物：

```
 document.write(response); 
```

但无论 document.write 打印什么，都没有显示任何内容。应该弹出“提示”的 div*仍然是空*的。我用谷歌搜索了解决方案，打印js变量的不同方式没有进一步的成功。也许，**document.write 与 XML 或 AJAX responseText 不“兼容”？**必须有一个简单的解决方案。希望你们能帮帮我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T22:04:46.080

php 当然是一种服务器端语言，它发出一个页面并在您的后端运行。
Node.js 当然是一种运行在用户前端的客户端语言。
document.write() 是发出客户端文本的正确函数；它在页面加载时运行。例子：

```
<b>My domain is: <script>document.write(document.domain);</script></b> 
```

适当地给予

> **我的域名是：www.mydomain.com**

# asp.net - 指定的字符串不是电子邮件地址所需的格式

> ID：10068585
> 
> 赞同：0
> 
> 时间：2012-04-09T03:28:52.880
> 
> 标签：asp.net, vb.net

我在这段代码中有问题

```
Imports Microsoft.VisualBasic
Imports System.Net.Mail
Public Class SendEmail

    Private _Mailto As String = ""
    Public Property Mailto() As String
        Get
            Return _Mailto
        End Get
        Set(ByVal value As String)
            _Mailto = value
        End Set
    End Property
    Private _MailSub As String = ""
    Public Property MailSub As String
        Get
            Return _MailSub
        End Get
        Set(ByVal value As String)
            _MailSub = value
        End Set
    End Property
    Private _MailBody As String = ""
    Public Property MailBody As String
        Get
            Return _MailBody
        End Get
        Set(ByVal value As String)
            _MailBody = value
        End Set
    End Property
    Private _Msg As String = ""
    Public ReadOnly Property Msg As String
        Get
            Return _Msg
        End Get
    End Property

    Public Sub email()
        Try
            Dim mail As New MailMessage()
            Dim SmtpServer As New SmtpClient("smtp.gmail.com")
            mail.From = New MailAddress("email@gmail.com")
            mail.[To].Add(_Mailto)
            mail.Subject = _MailSub
            mail.Body = _MailBody
            ' mail.Headers.Add("In-Reply-To", 1)
            SmtpServer.Port = 587
            SmtpServer.Credentials = New System.Net.NetworkCredential("email@gamil.com", "password")

            SmtpServer.EnableSsl = True
            SmtpServer.Send(mail)

            _Msg = " Check Your Mail "
        Catch ex As Exception
            _Msg = ex.Message
        End Try

    End Sub
End Class 
```

例外是：指定的字符串不是电子邮件地址所需的格式。：任何灵魂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:36:24.123

看起来您正在将 _MailTo 初始化为一个空字符串 ("")，然后将“To”电子邮件地址设置为该值。除非您将该字段的值设置为某个有效的电子邮件地址，否则电子邮件发件人不会将空字符串识别为有效的电子邮件地址。

（如果您从给定代码之外设置 MailTo 属性，则需要提供代码以显示您在哪里设置它以及值是什么。）

# postgresql - Postgres Plus 云数据库与 Amazon 关系数据库服务 (Amazon RDS)

> ID：10068587
> 
> 赞同：7
> 
> 时间：2012-04-09T03:29:22.117
> 
> 标签：postgresql, amazon-ec2, cloud, amazon-rds, enterprisedb

[Postgres Plus 云数据库](http://www.enterprisedb.com/cloud-database)于今年年初发布。

由于我在数据库集群方面没有太多经验，我想知道我应该使用哪一个。谁能给我比较一下 Postgres Plus 云数据库和 Amazon RDS 在功能、成本和维护方面的差异？

我们的应用程序的要求是：

1.  高可用性。
2.  我们的应用程序的负载将非常低。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T23:13:37.973

Amazon RDS（尚）不支持 PostgreSQL。所以回答你的问题并不容易。

无论如何：Heroku 可以替代 Postgres Plus 云数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T00:29:55.887

Amazon RDS 现在支持 PostgreSQL！

请参阅此处的博文：

[http://aws.typepad.com/aws/2013/11/amazon-rds-for-postgresql-now-available.html?sc_ichannel=EM&sc_icountry=Global&sc_icampaign=reinvent1114&sc_idetail=55698910&ref_=13](http://aws.typepad.com/aws/2013/11/amazon-rds-for-postgresql-now-available.html?sc_ichannel=EM&sc_icountry=Global&sc_icampaign=reinvent1114&sc_idetail=55698910&ref_=13)

# c++ - 花费的配置文件时间

> ID：10068591
> 
> 赞同：2
> 
> 时间：2012-04-09T03:29:31.867
> 
> 标签：c++, profiler, valgrind, callgrind

我正在寻找一些工具来分析时间花在哪里。看过oprofile，但这并没有真正给我我需要的东西。

我正在查看 callgrind，特别是使用 CALLGRIND_START_INSTRUMENTATION 和 CALLGRIND_STOP_INSTRUMENTATION 宏。我不希望该工具像 valgrind 通常那样使应用程序减慢太多。但这并没有真正起作用，因为 Valgrind 似乎将所有内容都序列化到一个线程中。

例如，如果 fn A 调用 fn C 的 fb B，然后返回到 B 和 A，我想知道在哪里花费了多少时间。我有一些正在使用的互斥锁工具，但是一个好的时间工具对于查看时间到底花在哪里非常有用，这样我就可以专注于这些路径。除了自己添加一些东西之外，有什么工具可以用来完成这项任务吗？顺便说一句，它是一个 C++ 应用程序。我不能使用 valgrind，因为它在内核中是单线程的。此外，我的应用程序需要花费大量时间等待，所以普通的 CPU 分析器并没有真正提供太多帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T17:27:53.307

您可能想看看[这篇文章](https://stackoverflow.com/questions/1777556/alternatives-to-gprof/1779343#1779343)的第 3 点。

它建议不要问时间花在*哪里，而要问**为什么*。

假设您正在寻找一些“花费太多时间”的方法与询问（通过研究堆栈样本，而不是总结它们）程序在一小部分时间点实际尝试完成什么之间存在质的差异。

这种方法可以找到任何你可以通过测量方法找到的东西，等等。如果重复应用，可能会导致很大的加速因素。

在多线程情况下，您可以识别非空闲的线程，并将其应用于它们。

# node.js - 如何更新 NPM 中的 devDependencies？

> ID：10068592
> 
> 赞同：185
> 
> 时间：2012-04-09T03:29:32.880
> 
> 标签：node.js, npm

`npm update`似乎只是更新了 中的包`dependencies`，但是`devDependencies`.

现在您可以`devDependencies`通过运行安装`npm install .`，但这不适用于`npm update .`

有任何想法吗？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2014-01-16T23:08:57.680

要更新 package.json 除了本地模块，运行

```
npm update --save-dev 
```

或者，使用相同的命令来节省时间

```
npm update -D 
```

您可以通过以下方式查看更新的完整详细信息或与此相关的任何命令

```
npm help <cmd> 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-03-14T19:32:18.833

安装 npm-check-updates ( [https://www.npmjs.org/package/npm-check-updates](https://www.npmjs.org/package/npm-check-updates) )，然后跳转到您的项目文件夹并运行：

```
npm-check-updates 
```

并更新和保存对您的 package.json 文件的更改：

```
npm-check-updates -u 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-05-11T23:24:04.103

这些步骤对我有用：

1.  `npm install -g npm-check-updates`
2.  `ncu -u`
3.  `npm update`
4.  `npm install`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-12T17:37:24.693

当前版本的 NPM (1.3.11) 不再解决此问题。

更新适用于：`npm update`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-13T11:05:07.083

如果您使用的是过时的 npm 版本，则可能是问题所在。所以在执行任何其他命令之前：

```
sudo npm install npm -g 
```

或（如果以上不起作用）：

```
sudo npm update npm -g 
```

然后**重新启动**控制台（以使更改生效）。现在您可以检查新的`npm --version`，如果它是最新的，请执行：

```
npm update 
```

或（如果您愿意）：

```
npm update --save-dev 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-07-18T11:46:43.707

对我有用的是安装这样的单个开发依赖项

```
npm install react-test-renderer@15.6.1 --save --only=dev 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-11-09T14:35:48.540

我遇到了与 OP 相同的问题，但没有找到解决方案，所以我决定编写一个 Grunt 插件来自动更新我的 devDependencies..

它在 Github 上，我很想获得一些意见和合作，以使其成为 NPM 尚未提供的最佳工具。

基本上它会通过一个简单的 Grunt 任务自动更新你过时的开发依赖。

[https://github.com/pgilad/grunt-dev-update](https://github.com/pgilad/grunt-dev-update)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-07-14T09:16:02.560

1.  `npm outdated`- 概述什么是过时的
2.  `npm install -g npm-check-updates`- 正如迈克尔正确指出的那样
3.  `ncu -u`- 它会**自动**更新所有依赖项（也`dependencies`就是，它当然不同于`devDependencies`） 中的版本`package.json`，而无需重新安装它。它只会改变“数字”`package.json`
4.  `npm update`- 实际依赖安装
5.  （可选，取决于场景）您**可能**需要使用标志`--force`，或（NPM v7 中的新功能）`--legacy-peer-deps`来完成该过程。您可以在[npm install --legacy-peer-deps 到底做什么？什么时候推荐/什么是潜在的用例？](https://stackoverflow.com/questions/66239691/what-does-npm-install-legacy-peer-deps-do-exactly-when-is-it-recommended-wh)
6.  （可选）您可以使用验证它，`ncu -u`并且对于正确更新的依赖项，您应该看到文本`All dependencies match the latest package versions :)`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-10-07T17:21:00.723

强制更新的一种（缓慢）方法是删除 node_modules 目录，然后再执行`npm install`一次。

这是该`npm update`命令的已知错误，已在 的开发分支上修复`npm`，请参见此处： [https ://github.com/isaacs/npm/pull/3863](https://github.com/isaacs/npm/pull/3863)

它应该很快就会登陆最新的稳定版本的 npm。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-17T07:39:33.727

我在 https://nodejs.dev/learn/update-all-the-nodejs-dependencies-to-their-latest-version 上找到了答案，这也适用于所有主要版本

```
npm install -g npm-check-updates
ncu -u
npm update 
```

检查过时的包使用

```
npm outdated 
```

# jquery - 代替 JQuery 的索引值？

> ID：10068597
> 
> 赞同：1
> 
> 时间：2012-04-09T03:30:16.523
> 
> 标签：jquery, replace, html-lists

我正在开发一个涉及使用无序列表的交互式网页。我想要的是，每当用户单击该列表中的元素时，无论是第一个子元素还是第十个元素，该元素都会成为第一个子元素。
我已经想出了一些方法来找到`<li>`被点击的索引值，但是我还没有找到一种方法来替换那个元素的索引值。
这似乎是一个以前应该问过的问题，但我梳理了一堆图像和元素幻灯片，他们所做的只是滚动浏览或淡入淡出灯箱的内容，这甚至与我的不相近。米之后。
任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T03:34:52.477

`prepend`将元素作为第一个子元素移动到选择器

[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

所以你可以这样做：

```
$('li').click(function() {
   $(this).parent().prepend($(this));
}); 
```

[http://jsfiddle.net/3hLk7/](http://jsfiddle.net/3hLk7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:33:40.663

看看 jQuery 的[prependTo](http://api.jquery.com/prependTo/)。

[http://jsfiddle.net/9CFm9/](http://jsfiddle.net/9CFm9/)

```
$('li').click( function() {
     $(this).prependTo($(this).parent());
}); 
```

# android - Android，在 onActivityResult 方法中为变量赋值？

> ID：10068600
> 
> 赞同：0
> 
> 时间：2012-04-09T03:30:59.427
> 
> 标签：android, variables, variable-assignment, subactivity

我正在尝试从我的 onActivityResult 方法中检索一些信息，在我的情况下是用户在子活动中选择的图片，我相信它工作正常，我遇到的问题是当我尝试分配该图片时（在字节数组的形式）到我的主要活动中的一个变量。我正在尝试在 onClick 方法中使用该变量，但由于某种原因，当我尝试使用该变量时，它的值始终为空。会发生什么？这是代码：

```
poptions.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View view, int pos, long id) {
            final Intent i;
            switch(pos){
            // Adjunta imagen
            case 0:
                i = new Intent(Intent.ACTION_GET_CONTENT);
                i.setType("image/jpeg");
                startActivityForResult(i,1);
                //Toast.makeText(view.getContext(), "MIERDA!!", 30).show();
                break; // more cases below, not relevant to my question....
                }
        }

    }); 
```

我的 onActivityResult 方法：

**编辑：解决方案是改变**

```
if(resultCode==1) 
```

**到：**

```
if(resultCode==RESULT_OK) 
```

**结果，RESULT_OK 实际上等于 -1。**

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent pic){
    super.onActivityResult(requestCode, resultCode, pic);
    if(resultCode==1){

        Uri selectedpic = pic.getData();

        try {
            Bitmap bitmappic = MediaStore.Images.Media.getBitmap(
                    this.getContentResolver(), 
                    selectedpic);

            ByteArrayOutputStream picstream = new ByteArrayOutputStream();

            bitmappic.compress(Bitmap.CompressFormat.JPEG, 100, picstream);
            setPicture(picstream.toByteArray());

        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

我的 onClickListener 方法，我试图使用上面的 setPicture 方法设置的图片。

```
 btnSend.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                Bundle usrpostData = new Bundle();
                if(txtMsg.getText().toString().equals("")){
                    Toast.makeText(v.getContext(), "MSG", 10).show();
                }else{
                    String msg = txtMsg.getText().toString();
                    usrpostData.putString("message", msg);
                    if(getPicture()==null){
                        Toast.makeText(v.getContext(),"NULL",30).show();
                    }else{
                        try {
                            // do something with the picture...

                        } catch (FileNotFoundException e) {
                            e.printStackTrace();
                        } catch (MalformedURLException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }

        }); 
```

正如你所看到的，我做了一个小测试，getPicture 方法总是返回 null，我尝试了 .equals 而不是 ==，它使我的应用程序崩溃。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:13:13.660

解决方案是改变

```
if(resultCode==1) 
```

到：

```
if(resultCode==RESULT_OK) 
```

结果，RESULT_OK 实际上等于 -1。

# c# - 选中后将Gridview下拉列表项添加到文本框

> ID：10068602
> 
> 赞同：1
> 
> 时间：2012-04-09T03:31:04.707
> 
> 标签：c#, asp.net, gridview

我有一个带有打印结果列表的网格视图。每行都有一个额外的重印按钮，并且需要一个重印原因。我手动将下拉列表项存储在 aspx 文件中，如下所示：

```
 <asp:GridView SkinID="gridviewSkinmspgate" ID="grdPrintConfirmation" 
                Width="400px" runat="server"
                            AutoGenerateColumns="false"  
                OnRowCommand="grdPrintConfirmation_RowCommand" 
                >
            <Columns>
            <asp:TemplateField HeaderText="Label Spec Ref" ControlStyle-Width="100px" >
                <ItemTemplate>
                    <asp:Label ID="LblSpecRef" runat="server" 
                    text='<%#Eval("GeneratedLabelForPrint.LabelSpecRef")%>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField  HeaderText="Printer Name" ControlStyle-Width="100%">
                <ItemTemplate>
                    <asp:Label ID="PrinterName" runat="server" 
                    text='<%#Eval("GeneratedLabelForPrint.PrinterName")%>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField  HeaderText="Print Successful" ControlStyle-Width="100px">
                <ItemTemplate>
                    <asp:Label ID="IsPrintSuccessful" runat="server" 
                    text='<%#Eval("IsPrintSuccessful")%>' ></asp:Label>       
                </ItemTemplate>
           </asp:TemplateField>
           <asp:TemplateField  HeaderText="Reprint Count" ControlStyle-Width="100px">
                <ItemTemplate>
                    <asp:Label ID="ReprintCount" runat="server" 
                    text='<%#Eval("ReprintCount")%>' ></asp:Label>  
                </ItemTemplate>
           </asp:TemplateField>
           <asp:TemplateField HeaderText="Reprint Reason" ControlStyle-Width="150px">
                <ItemTemplate>
                    <asp:DropDownList runat="server" ID="ddlReason">
                        <asp:ListItem Text="(Please Select)" Value="1" Selected="True"></asp:ListItem>
                        <asp:ListItem Text="Printer not working" Value="2"></asp:ListItem>
                        <asp:ListItem Text="Printer out of paper" Value="3"></asp:ListItem>
                        <asp:ListItem Text="Other" Value="4"></asp:ListItem>
                    </asp:DropDownList>
                </ItemTemplate>
           </asp:TemplateField>
           <asp:TemplateField HeaderText="Reprint" ControlStyle-Width="150px">
                <ItemTemplate>
                    <asp:LinkButton runat="server"
                    ItemStyle-Width="80px" ItemStyle-HorizontalAlign="Left" ItemStyle-VerticalAlign="Middle"
                    CommandArgument="<%# ((GridViewRow) Container).RowIndex %>"
                    CommandName="btnReprint" Text="Submit Reprint" />
                </ItemTemplate>
           </asp:TemplateField>
           </Columns>
           </asp:GridView> 
```

使用上面的代码，每一行都有下拉列表，其中包含以下 3 项：1\. 打印机不工作 2\. 打印机缺纸 3\. 其他

我想知道如何在 UI 上选择“其他”时，它会变成一个文本框，供用户输入任何其他原因。

# matlab - 曲面图 - 连接太多

> ID：10068605
> 
> 赞同：1
> 
> 时间：2012-04-09T03:31:58.383
> 
> 标签：matlab

我在 MATLAB 中有一个曲面图，但似乎连接的点太多。底部的表面是我想要显示的，但所有端点也都连接在一起。可以删除这个吗？

```
I have 3 data vectors: x, y, and z

[X, Y] = meshgrid(x,y);
Z = griddata(x,y,z,X,Y);
surf(X,Y,Z) 
```

![在此处输入图像描述](../Images/5abe8b6ad37880421271246197d1412a.png)

这是我的数据的散点图。

![在此处输入图像描述](../Images/6383b047a9c7bc0d5d0ff673f255dddf.png)

# javascript - JavaScript 计时器

> ID：10068610
> 
> 赞同：1
> 
> 时间：2012-04-09T03:33:29.650
> 
> 标签：javascript, html, timer

我想`setTimeout()`在点击发生后打电话。

如果用户在过去之前再次单击`300ms`，我想停止该计时器，启动另一个功能并重新启动原始计时器。

我知道，`setTimeout()`但我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:44:45.807

**JavaScript：**

```
myTimeout = setTimeout(function() {
                // this will fire in 300ms if you don't perform some other action!
          },300); 

document.getElementById("button").click = function() {
   // button clicked, stop the timeout
   clearTimeout(myTimeout);
}; 
```

**HTML：**

```
<button id="button">Click me</button> 
```

setTimeout 启动 300 毫秒计时器。单击处理程序将单击事件绑定到页面上的按钮，当单击该按钮时，将使用 clearTimeout 停止计时器。

当您调用 setTimeout 时，将其分配给一个变量。然后，您可以稍后通过调用 clearTimeout 使用该变量来停止计时器。

您可以对任何事件使用相同的技术，例如按键、鼠标悬停事件、按钮或 DOM 元素点击等等。

请注意，相同的过程也适用于 setInterval。

```
myInterval = setInterval(function() {
               // do stuff every 300ms
             },300);

clearInterval(myInterval);  // stop the interval 
```

**使用 addEventListener：**

```
function start() {
    window.addEventListener("click", function() { 
        timeout = setTimeout(function() {
            // do stuff after 300ms after the first click
            clearTimeout(timeout);
            start();
        }, 300)
    }, false);
} 
```

上面应该在页面上绑定一个全局点击监听器，并在点击后递归清除并重新启动计时器。如果没有点击，监听器就会停止，但这应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:39:58.207

我认为，您可以为此使用超时... window.setTimeout("", 300);

我不是你想要做什么......但是，我希望这会对你有所帮助。

# iphone - 关于 CVOpenGLESTextureCacheCreateTextureFromImage 的问题

> ID：10068617
> 
> 赞同：1
> 
> 时间：2012-04-09T03:34:07.260
> 
> 标签：iphone, opengl-es, yuv

我尝试从从相机接收到的像素缓冲区中提取 yuv 数据，然后重新创建一个像素缓冲区，但我在 CVOpenGLESTextureCacheCreateTextureFromImage 处得到 -6683，文档只是说明

> 由于不支持的缓冲区大小、像素格式或属性，像素缓冲区与 OpenGL 不兼容。

这对我没有多大帮助。我该如何解决？代码如下：

```
- (void)Init
{
    *****;
    OSStatus err = CMBufferQueueCreate(kCFAllocatorDefault, 1, CMBufferQueueGetCallbacksForUnsortedSampleBuffers(), &previewBufferQueue);

}
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
    didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
   fromConnection:(AVCaptureConnection *)connection
{

  OSStatus err = CMBufferQueueEnqueue(previewBufferQueue, sampleBuffer);
  if ( !err ) {        
    dispatch_async(dispatch_get_main_queue(), ^{
        CMSampleBufferRef sbuf = (CMSampleBufferRef)CMBufferQueueDequeueAndRetain(previewBufferQueue);
        if (sbuf) {
            CVImageBufferRef pixBuf = CMSampleBufferGetImageBuffer(sbuf);
            [self.delegate displayPixelBuffer:pixBuf];
            CFRelease(sbuf);
         }
     });
   }
} 
```

displayPixelBuffer 方法：

```
-(void)displayPixelBuffer:(CVImageBufferRef)pixelBuffer
{
     CVPixelBufferLockBaseAddress(pixelBuffer, 0);
     size_t planeWidth[2] = {CVPixelBufferGetWidthOfPlane(pixelBuffer, 0), width};
     size_t planeHeight[2] = {CVPixelBufferGetHeightOfPlane(pixelBuffer, 0),  
     CVPixelBufferGetHeightOfPlane(pixelBuffer, 1)};
     size_t planeBytesPerRow[2] = {CVPixelBufferGetBytesPerRowOfPlane(pixelBuffer, 0), width/2};

    unsigned char *YUV2[2] = {0};
    YUV2[0] = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 0);
    YUV2[1] = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer, 1);

    CVReturn renturn = CVPixelBufferCreateWithPlanarBytes(kCFAllocatorDefault,
                                                      width, 
                                                      height,
                                                      kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange, 
                                                      0,
                                                      0,
                                                      2, 
                                                      (void *)YUV2,
                                                      planeWidth,
                                                      planeHeight, 
                                                      planeBytesPerRow, 
                                                      nil,
                                                      nil, nil, &imageBuffer);

   glActiveTexture(GL_TEXTURE0);
   CVOpenGLESTextureRef texture = NULL;
   CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                            videoTextureCache,
                                                            imageBuffer,
                                                            NULL,
                                                            GL_TEXTURE_2D,
                                                            GL_LUMINANCE,
                                                            width,
                                                            height,
                                                            GL_LUMINANCE,
                                                            GL_UNSIGNED_BYTE,
                                                            0,
                                                            &texture);

   if (!texture || err) {
      NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
      return;
   }
    glBindTexture(CVOpenGLESTextureGetTarget(texture), 0);

   // Flush the CVOpenGLESTexture cache and release the texture
   CVOpenGLESTextureCacheFlush(videoTextureCache, 0);
   CVPixelBufferUnlockBaseAddress(pixelBuffer, 0);
   CFRelease(texture);

} 
```

结果是 CVOpenGLESTextureCacheCreateTextureFromImage failed(error:-6683)，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:18:54.507

我相信 CVPixelBuffer 需要是 ioSurfaceBacked。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-20T12:11:50.953

您错误地从图像缓冲区获取了用于创建纹理的属性值。这是怎么回事

```
done:

- (void)displayPixelBuffer:(CVPixelBufferRef)pixelBuffer
{
    CVReturn err;
    if (pixelBuffer != NULL) {
        int frameWidth = (int)CVPixelBufferGetWidth(pixelBuffer);
        int frameHeight = (int)CVPixelBufferGetHeight(pixelBuffer);

        /*
         CVOpenGLESTextureCacheCreateTextureFromImage will create GLES texture optimally from CVPixelBufferRef.
         */

        /*
         Create Y and UV textures from the pixel buffer. These textures will be drawn on the frame buffer Y-plane.
         */
        glActiveTexture(GL_TEXTURE0);
        err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault,
                                                           _videoTextureCache,
                                                           pixelBuffer,
                                                           NULL,
                                                           GL_TEXTURE_2D,
                                                           GL_RED_EXT,
                                                           frameWidth,
                                                           frameHeight,
                                                           GL_RED_EXT,
                                                           GL_UNSIGNED_BYTE,
                                                           0,
                                                           &_lumaTexture);
        if (err) {
            NSLog(@"Error at CVOpenGLESTextureCacheCreateTextureFromImage %d", err);
        }

        glBindTexture(CVOpenGLESTextureGetTarget(_lumaTexture), CVOpenGLESTextureGetName(_lumaTexture));
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        // UV-plane.
        glActiveTexture(GL_TEXTURE1);
        err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault,
                                                           _videoTextureCache,
                                                           pixelBuffer,
                                                           NULL,
                                                           GL_TEXTURE_2D,
                                                           GL_RG_EXT,
                                                           frameWidth / 2,
                                                           frameHeight / 2,
                                                           GL_RG_EXT,
                                                           GL_UNSIGNED_BYTE,
                                                           1,
                                                           &_chromaTexture);
        if (err) {
            NSLog(@"Error at CVOpenGLESTextureCacheCreateTextureFromImage %d", err);
        }

        glBindTexture(CVOpenGLESTextureGetTarget(_chromaTexture), CVOpenGLESTextureGetName(_chromaTexture));
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        glBindFramebuffer(GL_FRAMEBUFFER, _frameBufferHandle);

    } 
```

这是从 ADC 站点上的 AVBasicVideoOutput/APLEAGLView.m 复制的。这是我使用的，以及其他所有公开发布他们的代码（实际上有效）的人。如果有一千种方法可以做到这一点，我已经尝试了所有一千种。这就是方法。

注意 | 这是 OpenGL 2.0；如果您已准备好使用 3.0，我在我的博客上提供了 AVBasicVideoOutput 的升级版本：

[http://demonicactivity.blogspot.com/2016/02/technology-apples-opengl-related-sample.html?m=1](http://demonicactivity.blogspot.com/2016/02/technology-apples-opengl-related-sample.html?m=1)

# android - 无法在实际设备上运行 Linphone-android 源代码

> ID：10068619
> 
> 赞同：5
> 
> 时间：2012-04-09T03:34:33.160
> 
> 标签：android, logcat

我已经使用 git clone 下载了 Linphone-android 源代码。当我将源代码导入eclipse时，没有发现错误。然后我尝试在实际设备上运行该应用程序，但是，该应用程序无法加载并且崩溃了。这是错误的logcat。我可以知道如何解决这个问题吗？是什么导致了这个问题？

```
04-09 11:19:37.332: E/AndroidRuntime(9930): FATAL EXCEPTION: main
04-09 11:19:37.332: E/AndroidRuntime(9930): java.lang.ExceptionInInitializerError
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.Class.classForName(Native Method)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.Class.forName(Class.java:234)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.Class.forName(Class.java:181)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at org.linphone.core.LinphoneCoreFactory.instance(LinphoneCoreFactory.java:43)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at org.linphone.LinphoneManager.startLibLinphone(LinphoneManager.java:460)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at org.linphone.LinphoneManager.createAndStart(LinphoneManager.java:271)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at org.linphone.LinphoneService.onCreate(LinphoneService.java:142)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2208)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.app.ActivityThread.access$2500(ActivityThread.java:132)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1102)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.os.Looper.loop(Looper.java:143)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at android.app.ActivityThread.main(ActivityThread.java:4277)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.reflect.Method.invoke(Method.java:507)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at dalvik.system.NativeStart.main(Native Method)
04-09 11:19:37.332: E/AndroidRuntime(9930): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load linphone: findLibrary returned null
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.Runtime.loadLibrary(Runtime.java:429)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at java.lang.System.loadLibrary(System.java:554)
04-09 11:19:37.332: E/AndroidRuntime(9930):     at org.linphone.core.LinphoneCoreFactoryImpl.<clinit>(LinphoneCoreFactoryImpl.java:59)
04-09 11:19:37.332: E/AndroidRuntime(9930):     ... 18 more 
```

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:42:29.420

解决上述错误。

*   使用Ubuntu 11.10 git clone linphone-android 源码
*   在 Ubuntu 中使用终端安装 autoconf、automake、aclocal、libtoolize、pkgconfig（如 README 文件中所述）
*   ./prepare_sources.sh 在项目根文件夹中
*   使用 Android NDK 构建项目

# gwt - 弹出面板显示在小部件下方

> ID：10068633
> 
> 赞同：2
> 
> 时间：2012-04-09T03:36:32.357
> 
> 标签：gwt, dom, uibinder

我是 GWT 和网络的新手。

我正在根据 [http://code.google.com/p/cloud-tasks-io/source/browse/#svn%2Ftrunk%2FCloudTasks-AppEngine%2Fsrc%2Fcom%2Fcloudtasks%2Fclient制定自己的项目](http://code.google.com/p/cloud-tasks-io/source/browse/#svn%2Ftrunk%2FCloudTasks-AppEngine%2Fsrc%2Fcom%2Fcloudtasks%2Fclient)

我正在尝试使用弹出/对话框。弹出窗口和对话框始终显示在小部件后面。我一直在谷歌搜索，我发现最相关的是这个 [http://groups.google.com/group/gwt-google-apis/browse_thread/thread/40db4fcbe10d2060](http://groups.google.com/group/gwt-google-apis/browse_thread/thread/40db4fcbe10d2060)，它没有提供任何答案。无论如何，我有第 3 方库，bst-player 1.3，它使用 flash。所以我禁用了它（后来也将其删除），弹出窗口不会出现在顶部！它仍然隐藏在小部件后面。

我了解到 popuppanel/dialogpanel 类似[不需要添加到另一个小部件](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=10&ved=0CG8QFjAJ&url=http://groups.google.com/group/mvp4g/browse_thread/thread/d7dfd91a31df5462&ei=SVaCT6r8O7K40QG6trn5Bw&usg=AFQjCNGYRiRnRkX5_CaOXgJmnclnZnGA3A)。一种不同的说法是，它不是一个普通的小部件，它不能附加到父级，但它会将自己附加到 dom 以保证在顶部（来自[GWT 复合小部件](https://stackoverflow.com/questions/5168917/gwt-composite-widget)）

我不知所措，我在这里……

**更新**

这是我的弹出课程

```
public class PopUp {
    static PopupPanel simplePopup;

    public static void init() {
        simplePopup = new PopupPanel(true);
        simplePopup.hide();
        simplePopup.setVisible(false);

 //       DOM.setIntStyleAttribute(simplePopup.getElement(), "zIndex", 3);
    }

    public static void showpopupmsg(String msg, int left, int top) {
        if (simplePopup == null) {
            init();
        }
        if (msg != null && !msg.equalsIgnoreCase("")) {
            simplePopup.ensureDebugId("cwBasicPopup-simplePopup");
            simplePopup.setWidget(new HTML(msg));
            simplePopup.setVisible(true);
            simplePopup.setPopupPosition(left, top);
            simplePopup.setWidth("475px");  //575
            simplePopup.setGlassEnabled(true);
            simplePopup.show(); 
        }
    }

    public static void show(String message){
        if (simplePopup == null) {
            init();
        }
        simplePopup.setGlassEnabled(true);
        simplePopup.setTitle(message);
        simplePopup.center();
    }
} 
```

这是我打电话的方式

```
tasksTable.doneColumn.setFieldUpdater(new FieldUpdater<TaskProxy, Boolean>() {
  public void update(int index, TaskProxy task, Boolean value) {

      String msg = "Here is the popup. All the way underneath";
      Widget source = tasksTable;
      int left = source.getAbsoluteLeft() - 50;
      // source.getAbsoluteLeft() + 25;
      int top = source.getAbsoluteTop() - 25;
      PopUp.showpopupmsg(msg, left, top);       //Here is the calling method

    TaskRequest request = requestFactory.taskRequest();
    TaskProxy updatedTask = request.edit(task);
    updatedTask.setDone(value);
    request.updateTask(updatedTask).fire();

  }
}); 
```

这是弹出窗口在小部件**下方**的方式。 ![在此处输入图像描述](../Images/c1c1942ebb2f5665c32472e02af12281.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T04:46:03.283

问题的根源一直难以捉摸，因为我还是 webapp 的新手，但是，我终于自己解决了。罪魁祸首是CSS。它将整个事物的 z-index 定义为相当高，如以下代码行 1333 所示。

[http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/war/CloudTasks.css#1333](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/war/CloudTasks.css#1333)

我之前对 z-index 表示怀疑，并用一个微不足道的值 3 来尝试它，如相关 Popup 类的注释掉代码段中所示。我必须取消注释并将其设置为 101。

```
DOM.setIntStyleAttribute(simplePopup.getElement(), "zIndex", 101); 
```

我是，你知道，#$%#@#$*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T13:10:38.057

z-index 仅决定哪个小部件应显示在顶部.. 下方的小部件弹出窗口可能具有较高的 z-index 值。

通过 css 设置弹出窗口的 z-index（推荐）或 DOM 将为您工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T07:20:48.757

根据我的感觉，使用“PopUp”对象的静态方法有点奇怪......这样，我认为事情是相对于顶部而不是调用者对象。

也许你可以考虑让你的类'Popup'扩展'popupanel'并在你的调用代码中，只需

```
new PopUp(msg,left,top).show() ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:25:57.157

我最近为需要与其调用者对齐的弹出面板编写了自己的解决方案。该解决方案由一个 PopupPanel 扩展和一个 Button 扩展组成。

按钮扩展有一个面板扩展的实例，在**单击它的那一刻，它**会将其坐标、宽度和高度赋予其面板。

```
 @Override
            public void onClick(ClickEvent event) {
                if (optionsPanel.isShowing()) {
                    optionsPanel.hide();
                } else {
                    optionsPanel.setButtonBounds(new Bbox(
                            getAbsoluteLeft(), getAbsoluteTop(), getOffsetWidth(), getOffsetHeight()));
                    optionsPanel.show();
                }
            } 
```

（Bbox 类只是我可以用来包装坐标的便利类；为此编写您自己的类或 4 个方法）

然后主要工作在 PopupPanel 的**onLoad() 覆盖**中完成，其中按钮的坐标用于定位面板；

```
 @Override
    protected void onLoad() {
        super.onLoad();
        if (null == bounds) {
            super.hide();
        } else {
            left = (int) bounds.getX();
            top = (int) bounds.getMaxY();
            setPopupPosition(left, top);
        }
    } 
```

（边界是按钮的坐标；getMaxY() == 按钮的底部坐标）

# c# - RavenDB 中的循环引用

> ID：10068636
> 
> 赞同：5
> 
> 时间：2012-04-09T03:36:46.787
> 
> 标签：c#, ravendb, circular-reference

我将 RavenDB 与以下模型一起使用：

```
public class Cart {
    List<Item> Items = new List<Item>();
}

public class Item {
    public Cart Cart;
} 
```

当我将 an 添加`Item`到 a`Cart`时，我将关系的双方联系起来。

**RavenDB 如何处理序列化和反序列化？** 是自动分配参考`Cart`还是有办法在负载时手动连接它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-09T14:27:27.687

如果您保存购物车，您将在调用时收到异常“检测到自引用循环...” `SaveChanges()`。

修复很容易。您将`[JsonObject(IsReference = true)]`属性添加到购物车。这告诉序列化程序将 Item 的 Cart 存储为引用而不是新对象。

```
[JsonObject(IsReference = true)] 
public class Cart
{
    public List<Item> Items = new List<Item>();
}

public class Item
{
    public Cart Cart;
} 
```

我还想提一下它是反序列化的属性。换句话说，Cart 在加载时被重新分配给 Item。

```
var cart = new Cart();
cart.Items.Add(new Item { Cart = cart });
session.Store(cart);
session.SaveChanges();

...

var cart = session.Query<Cart>().First();
Assert.ReferenceEquals(cart, cart.Items.First().Cart); //this works 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:28:10.063

您可能想阅读这篇文章以了解 RavenDB 在这些场景中的工作原理： [http ://ravendb.net/docs/theory/document-structure-design](http://ravendb.net/docs/theory/document-structure-design)

在这种情况下，Item & Card 实际上会被序列化到 SAME 文档中，这可能不是您想要的。RavenDB 中的引用应该*只*包含引用文档的 id，而不是文档本身。

# git - git pull 上的 Git 错误（无法更新本地参考）

> ID：10068640
> 
> 赞同：234
> 
> 时间：2012-04-09T03:37:17.790
> 
> 标签：git, command-line-interface

我只有分支大师，每次我尝试“git pull”时都会收到这个错误：

```
error: Couldn't set refs/remotes/origin/master
From /var/lib/git/xxx/project
 ! a0f80ea..49177a3  master     -> origin/master  (unable to update local ref) 
```

当我做“git pull origin master”时，我得到：

```
error: Couldn't set ORIG_HEAD
fatal: Cannot update the ref 'ORIG_HEAD'. 
```

我一直在寻找但找不到原因

* * *

## 回答 #1

> 赞同：455
> 
> 时间：2014-12-03T17:44:16.740

我和我的团队在拉入 SourceTree 时遇到了这个错误，*无法更新本地 ref 。*

> **2020 年更新：**根据@Edward Yang 下面的回答，@bryan 对此答案的评论，以及[这个问题/答案](https://stackoverflow.com/questions/2998832/git-pull-fails-unable-to-resolve-reference-unable-to-update-local-ref)，您可能需要同时运行`git gc --prune=now`和`git remote prune origin`。只运行前者一直对我有用，但根据 ppl 的回复，我认为两者都是解决错误的不同原因所必需的。

我们用了：

```
git gc --prune=now 
```

这将删除任何应该解决问题的重复引用对象。

*以下是一些链接，您可以在其中了解有关 git 引用和修剪的更多信息*：

[本周 git 提示](http://alblue.bandlem.com/2011/11/git-tip-of-week-gc-and-pruning-this.html)

[git-prune 文档](http://git-scm.com/docs/git-prune)

[git 参考](http://git-scm.com/book/en/v2/Git-Internals-Git-References)

* * *

## 回答 #2

> 赞同：230
> 
> 时间：2015-07-28T08:40:19.013

我解决如下：

`git remote prune origin`

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2020-03-09T12:29:46.250

使用 gitbach line 命令，用于`git update-ref`更新本地分支的引用：

```
$ git update-ref -d refs/remotes/origin/[locked branch name] 
```

然后拉使用`$ git pull`

`[locked branch name]`是由于提交 ID 不匹配而发生错误的分支的名称。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2018-08-23T19:36:15.110

尝试在您的 git 存储库根文件夹中使用此命令：

```
rm .git/logs/refs/remotes/origin/master 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2018-08-06T03:37:12.587

`rm .git/refs/remotes/origin/master`

它对我有用！

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2021-03-27T14:08:05.330

## 问题

**Windows 用户**经常会遇到这个问题

```
git pull 
```

给出错误：`error: cannot lock ref` `unable to update local ref`

## 原因

**原因 a)**有多个分支，其 **名称从开头到任何斜线（或到结尾）仅在大写和小写上有所不同**。

```
Branch name clashing (upper/lower case)
#######################################

# Example 1)
#############################
feature/releasecandidate/fix123
feature/releaseCandidate/improveFeature789
------------------------
               ^
  Identical from beginning up to a slash (here the 2nd one)
  except for the marked letter, where the upper/lower case differs

# Example 2)
#############################
releaseBranch
releasebranch
-------------
       ^
  Identical from beginning to the end
  except for the marked letter 
```

**原因b）** linux上的一个问题：**一个分支是另一个分支的前缀，带有斜线边界**：

```
Prefix with slash-boundary
#######################################

# Example 1) - also a problem on linux
#############################
feature/release2021
feature/release2021/fixIssue07
                   ^
              slash boundary

# Example 2)
#############################
feature/release2022
feature/Release2022/fixIssue99
        ^          ^
  differing case   slash boundary
 (problem on 
   windows) 
```

## 解决方案

消除原因（参见上面的确切**原因**）。

```
# inspect your branches, to see if you have the upper/lower case problem
git ls-remote --heads YOUR-GIT-URL 
```

例如：创建一个分支命名策略，例如全部小写；或最后一个斜线之前的小写字母。或者一些智能钩子，可以检测违规行为。（但请注意：在原因 a）问题仅在 Windows 上，不在 linux 上）。

## 背景

问题是 Windows 将这些分支（来自示例 1 和 2）存储在`.git`文件夹中

```
# inspect the files/folders under
.git/refs/remotes/origin/ 
```

并且在**原因 a)** windows 无法区分大写/小写的差异，因此 git on window 变得疯狂。

在**原因 b)**中，您不能拥有与文件 ( `feature/release2021/`) 同名的文件夹 (例如`feature/release2021`)。

## 解决方法

通常有效的短期解决方法（直到您消除了原因）是：

```
git pack-refs --all

# delete the contents of .git/refs/remotes/origin/*  
rm -rf .git/refs/remotes/origin/*

git pull; git pull; git pull   # all good? yes! 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2014-04-25T11:46:09.610

我发现尝试从 Bitbuck Repo 中提取相同的错误消息到我的本地副本中。也只有一个 Branche Master 并且该命令`git pull origin master`导致此错误消息

```
From https://bitbucket.org/xxx
 * branch            master     -> FETCH_HEAD
error: Couldn't set ORIG_HEAD
fatal: Cannot update the ref 'ORIG_HEAD'. 
```

解决方法如下

1.  `git reflog`查找最后一次提交的编号
2.  `git reset --hard <numnber>`重置为最后一次提交
3.  `git pull origin master`再次拉动没有错误

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2021-08-05T13:19:00.077

这对 Windows 来说已经足够了：

> git pack-refs --all

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2021-09-08T10:22:03.393

# ****直接回答****

```
`git remote prune origin
rm .git/refs/remotes/origin/master
git fetch
git pull origin master` 
```

 **一步一步运行上面的命令

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2012-04-10T19:21:56.830

确保执行的`git pull`用户与创建存储库的用户相同。文件权限不正确。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2020-08-06T10:26:32.007

这里发生了什么事？对远程分支的本地引用已更改，因此当您运行时`git pull`，git 找不到任何相应的远程分支，因此它失败了。

```
git remote prune origin 
```

实际上清理了这个本地引用，然后`git pull`再次运行。

建议 - 请使用`--dry-run`安全选项运行

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2020-09-10T17:50:35.520

对我有用的是：

```
git config --global fetch.prune true 
```

现在它继续自动运行修剪。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2021-03-18T11:07:09.533

我已经删除了分支的本地参考：

```
git branch -d -r REPO/.git/refs/remotes/origin/BRANCHNAME 
```

然后我可以做我的取。

或者更彻底

```
rm -rf REPO/.git/refs/remotes/origin 
```

这也每次都有效。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-10-23T11:57:03.937

再次克隆存储库，并将 .git 文件夹复制到损坏的项目中。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-07-29T21:18:19.650

这可能是一个非常小众的情况，但是：我在我的 MacBook Pro 上的 Parallels VM 中运行 Windows，我的本地存储库存储在 VM 的磁盘上，该磁盘与 macOS 共享。

如果我在 Mac 应用程序中从位于 Windows VM 上的存储库中打开了一个文件，我有时会收到“无法更新本地引用”错误。发生这种情况时的解决方案是简单地关闭文件或退出 Mac 应用程序。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-05-10T07:10:16.297

这发生在我使用不区分大小写的文件系统的 OSX 上。不知何故，另一个开发人员推送了一个名称相同但大小写不同的分支：`My-Branch`vs `my-branch`.

`My-Branch`当我进行拉取时，我已经签出并收到错误“无法更新本地参考”，这可能是因为文件系统认为`My-Branch`== `my-branch`。

由于我们使用 Github，我可以通过 Github 的 GUI 删除其中一个分支来解决问题。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-07-14T17:44:02.610

删除文件 .git/logs/refs/remotes/origin/[锁定的分支名称]

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2013-01-16T23:21:20.273

如果您最近更改了密码并且有一些集成了您的 Windows 和 Linux 登录名的花哨的东西，也会发生此错误（无法更新本地参考）。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-12-30T13:33:53.680

我通过删除锁定的分支文件来解决这个问题。它可能看起来很粗糙，我不知道它为什么会起作用，但它解决了我的问题（即你得到的同样的错误）

删除： `.git/refs/remotes/origin/[locked branch name]`

然后我就跑了

```
git fetch 
```

并且 git 文件自行恢复，完全修复

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-09-21T16:19:12.120

`git pull origin <branch_name_you_are_currently_at>`只会拉那个分支。它可能会或可能不会给您合并冲突。解决它们并提交它们。它对我有用。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-12-05T05:25:34.640

来自 PC 用户的发言 - 重新启动。

老实说，它对我有用。我已经解决了两个奇怪的 git 问题，我认为这是这种方式的损坏。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-05-29T15:29:54.520

我有同样的错误，我是从 Eclipse 中更新的，我遇到了很多错误。所以我尝试从 DOS 命令窗口更新，并遇到了同样的问题。

然后我尝试了解决方案“ git gc --prune=now ” 这给出了文件被锁定在 refs 目录中的消息。

Eclipse 必须锁定“refs”目录中的某些内容。
我找到的解决方案是简单地关闭 Eclipse。然后我使用“git PULL”命令从 DOS 更新了存储库，一切正常。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-07-23T06:24:28.763

一种命令解决方案 [适用于 Linux/bash 用户]

1.  通过更改文件的所有权来更改权限。

`sudo chown username -R .git`

*（将“用户名”替换为您的用户名）*

如果文件的所有者是 sudo，则使用 sudo。

2.  删除文件也可以解决问题。

`sudo rm .git/logs/refs/remotes/origin/master`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-01-09T02:34:21.520

由于磁盘已满，我在我的 debian 服务器上遇到了同样的问题。由于设备上没有剩余空间，因此无法创建临时文件。清理了一些文件后，效果很好。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-28T19:23:40.060

这对我有用

```
rm .git/logs/refs/remotes/origin/master 
```**

# azure - Azure 表、blob

> ID：10068646
> 
> 赞同：2
> 
> 时间：2012-04-09T03:40:02.230
> 
> 标签：azure, blobs

刚开始研究Azure框架。

只需说您在表存储中创建一行。

然后在 Blob 存储中创建一个 Bob，

有什么方法可以将刚刚添加到表中的内容与刚刚创建的 Blob 关联起来？

或者任何时候您有相关条目都必须使用 SQL Azure？

假设您想将一些视频存储在一个 blob 中，但在 SQL Azure 表中有一些您想链接到该 Blob 的行，这将是令人失望的。

由于您无法获得此链接，您必须以某种方式将视频存储在 SQL Azure 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:56:03.570

您可以将存储在 blob 中的文件的唯一文件名存储到 azure 表行中。不建议在 Azure 表或 SQL azure 表中存储完整的视频/二进制内容，因为与 blob 相比，检索会变得有点慢，而且 SQL azure 有点贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:34:44.443

只要您仔细选择您的 blob 文件名，您就应该能够在您的 Azure 表中引用该文件名。但是，请注意如何命名它。使用基于时间戳的名称并在表中引用它是非常诱人的。但是，使用 Azure，您显然是在使用最终可以高度并行的可扩展解决方案。

为文件名使用 GUID 以保证唯一性。或者，如果您希望能够根据添加项目的时间更轻松地浏览存储，则可以选择带有 GUID 后缀的日期格式 YYYYMMDDHHMMSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T10:12:09.820

这是完全可能的，并且做了很多次，我亲自为我从事的一个项目实现了这样的架构。

对于写入表的实体，我使用 Blob 名称作为分区键和 Blob 容器名称作为行键。

您也可以采用其他方式，选择 Blob Container Name 作为 PK，Blob Name 作为 RK。然后，您可能需要考虑表中的分区不会变得太大，并且如果您的 blob 容器太拥挤，则会导致一些性能问题。

但是，您需要明确处理一件事，Blob Name 和 Blob Container Name 具有不同的命名约束，然后是 Table Partition Keys 和 Table Row 键，因此您需要清理 Blob Name 和 Blob Container Name，然后再将它们用作 PK和 RK 并将实体写入表或从表中读取实体。

以下是如何清理 Blob Name 和 Blob Container Name 以用作表键的方法：

public static readonly Regex DisallowedCharsInTableKeys = new Regex(@"[\#%/?\u0000-\u001F\u007F-\u009F]");

string sanitizedKey = DisallowedCharsInTableKeys.Replace(BlobName, disallowedCharReplacement);

在此阶段，您可能还希望在已清理的键（分区键或行键）前加上原始键的哈希（即 Blob 名称），以避免具有相同已清理值的不同无效键的错误冲突。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T08:51:36.643

Azure 支持将元数据与 blob 相关联。元数据本质上只是名称-值对。以下视频可能有用：[http ://www.bestechvideos.com/2009/04/15/mix09-windows-azure-storage](http://www.bestechvideos.com/2009/04/15/mix09-windows-azure-storage)

因此，您可能希望通过使用元数据来做相反的事情，而不是将表与 blob 相关联。

# javascript - jqgrid setColProp 不工作

> ID：10068647
> 
> 赞同：2
> 
> 时间：2012-04-09T03:40:11.390
> 
> 标签：javascript, jquery, jqgrid

我正在使用 setColProp 将值动态加载到`select`编辑类型中。

每当我调用时，我都会成功加载值：

```
loadComplete: function() {
                $("#profile_table").setColProp('contract_num', { editoptions: { value: contract_list} });
            }, 
```

然而，它只在这里有效，而且只有一次。如果我更改值`contract_list`并尝试通过调用更新 jqgrid

```
$("#profile_table").setColProp('contract_num', { editoptions: { value: contract_list} }); 
```

再次从任何地方（从按钮单击，从 afterSubmit，甚至重新加载表）它什么都不做。

有什么我做错了吗？

**编辑：这是对我正在尝试做的事情的更好解释。**

我有一个 id 的 jqGrid 表`#profile_table`。

这是`colModel`jqGrid 代码中的一部分：

```
colModel:[
                {name:'contract_num',index:'contract_num', editable: true, hidden: false, width:30, edittype: "select", editrules: {required: true}},   
] 
```

最初，`contract_num`编辑/添加表单中的编辑字段在其`select`框中没有值。我从一个名为的 javascript 变量加载初始值，该变量`contract_list`是在创建表之前创建的。我最初使用以下方法加载这些值：

```
loadComplete: function() {
                $("#profile_table").setColProp('contract_num', { editoptions: { value: contract_list} });
            }, 
```

`contract_list`这可以正常工作，但是每当用户更改显示此表的页面上的其他内容时，值可能会发生变化。所以我试图动态更新该表的编辑/添加表单内`select`的字段框内的选项。`contract_num`我成功更改了 内部的值`contract_list`，但是我无法让实际`select`框更新为新值。

我正在尝试通过调用来更新它：

```
$("#profile_table").setColProp('contract_num', { editoptions: { value: contract_list} }); 
```

然后在有人更改 的值时重新加载网格`contract_list`，但是表没有被更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T22:59:36.240

如果您使用[recreateForm: true](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties)表单编辑选项，我认为您的主要问题将得到解决（请参见[此处](https://stackoverflow.com/questions/6971453/how-to-add-different-texts-to-save-button-in-edit-and-add-forms-in-jqgrid/6971820#6971820)的用法示例）。我建议您在调用*之前*将设置设置为默认值`navGrid`（请参见[此处](https://stackoverflow.com/a/5032879/315935)的相应代码）。

此外，根据您在评论中写的信息，我认为您应该更好地使用`dataUrl`而`value`不是[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)。因此 jqGrid 可以在创建编辑表单期间直接从服务器加载值列表。有时使用`buildSelect`是有用的。它可以帮助您以例如 JSON 格式提供来自服务器的数据，并`<select><option value="...">...</option>...</select>`根据`buildSelect`. 此外，可能需要设置`ajaxSelectOptions: { cache: false }`jqGrid 选项（请参阅[此处](https://stackoverflow.com/a/7422410/315935)或[此处](https://stackoverflow.com/a/9615295/315935)）或强制重新验证有关`dataUrl`HTTP 标头的先前服务器响应`"Cache-Control: private, max-age=0"`（请参阅[此处](https://stackoverflow.com/a/3885956/315935)和[此处](https://stackoverflow.com/a/9269567/315935)）

# c# - 如何使用 Linq 从列表中获取两条随机记录？

> ID：10068648
> 
> 赞同：4
> 
> 时间：2012-04-09T03:40:17.367
> 
> 标签：c#, linq

如何使用 Linq 从列表中获取两条随机记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:51:36.030

```
Random rnd = new Random();
var sequence = Enumerable.Range(1, 2).Select(n => lst[rnd.Next(0, lst.Count)]).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T04:18:48.690

因为`Linq-to-Objects`它`EF4`很简单

```
db.Users.OrderBy(r => Guid.NewGuid()).Take(2) 
```

* * *

对于`Linq-to-SQL`您可以查看这篇文章 [http://michaelmerrell.com/2010/03/randomize-result-orders-in-t-sql-and-linq-to-sql/](http://michaelmerrell.com/2010/03/randomize-result-orders-in-t-sql-and-linq-to-sql/)

将映射到 SQL 函数的函数 Random 添加`NEWID`到 DataContext。

```
partial class DataContext
{
    [Function(Name = "NEWID", IsComposable = true)]
    public Guid Random()
    {
        throw new NotImplementedException();
    }
} 
```

用法

```
var qry = from row in DataBase.Customers
          where row.IsActive
          select row;

int count = qry.Count();
int index = new Random().Next(count);

Customer cust = qry.Skip(index).FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T03:46:19.640

没有直接的方法。你可以试试这个，虽然不漂亮。

```
int randomRecord = new Random().Next() % List.Count(); //To make sure its valid index in list
var qData = List.Skip(randomRecord).Take(1); 
var qValue = qData.ToList().First(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T04:08:51.970

这最终对我有用，它确保不返回重复项：

```
public List<T> GetRandomItems(List<T> items, int count = 3)
{
    var length = items.Count();
    var list = new List<T>();
    var rnd = new Random();
    var seed = 0;

    while (list.Count() < count)
    {
        seed = rnd.Next(0, length);
        if(!list.Contains(items[seed]))
            list.Add(items[seed]);
    }

    return list;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-09T03:59:09.847

为什么要使用Linq 来获取两条随机记录？

创建一个 Random 实例并获取两个随机数，其值小于列表的长度。

List 具有 Indexer 属性，因此 List[index] 成本不高。

保持**简单**。总是更喜欢可读性。如果您只是让事情变得复杂，那么将要维护您的代码的程序员将很难过。

我只是想知道您为什么要在**Linq**中执行此操作？这对我来说似乎是一种开销。

我错过了什么吗？

# facebook - 使用图形 API 将视频上传到 Facebook 页面？

> ID：10068651
> 
> 赞同：0
> 
> 时间：2012-04-09T03:41:21.173
> 
> 标签：facebook, facebook-graph-api, video

我计划在我的网站上实现上传视频。我在 facebook 中也有页面。所以当用户在我的网站上上传视频时，我的 facebook 页面中的视频商店。我已经尝试使用这个[http://developers.facebook.com/ blog/post/515/#video_upload，但](http://developers.facebook.com/blog/post/515/#video_upload,but)只有我作为 facebook 页面的管理员可以上传视频，否则会出现“无效令牌”结果。可以告诉我这个案例吗？？？谢谢你的重播

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T23:10:20.630

正如您从链接[http://developers.facebook.com/blog/post/515/#video_upload](http://developers.facebook.com/blog/post/515/#video_upload)上的代码中看到的那样）：

```
 // Find the access token for the page to which we want to post the video.
  foreach($accounts as $account) {
       if($account['id'] == $page_id) {
         $access_token = $account['access_token'];
         break;
       }
  } 
```

登录用户必须是页面管理员才能上传视频。否则它将无法正常工作。

# c++ - C++ 中的单独编译

> ID：10068653
> 
> 赞同：2
> 
> 时间：2012-04-09T03:42:06.990
> 
> 标签：c++, compilation

假设您正在创建一个包含多个 .cpp 文件（每个文件都包含成员函数的实现）的类，并且在 .h 文件中声明了类。此外，每个 .cpp 文件都通过 include 指令包含 .h 文件。

有人告诉我，如果您更改任何成员函数（.cpp 文件）的实现，则必须重新编译每个 .cpp 文件才能运行程序。也就是说，如果我有 5 个成员函数（每个都在 .cpp 文件中实现）并且我更改了 1 个 .cpp 文件的实现，我将不得不编译我更改的 1 个 .cpp 文件和我更改的 4 个其他 .cpp 文件没有为了正确运行我的程序而改变。

我的问题是，如果前面的陈述是真的，为什么陈述是真的？对这个概念的任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:47:48.720

这是假的。如果一个特定的实现文件没有变化，它包含的头文件没有变化，环境或编译器选项没有变化，那么绝对不需要重新编译它。影响该文件编译的所有内容都没有改变。

事实上，您可以编译每个文件，甚至根本不需要任何其他文件。然后，您可以将所有编译文件链接在一起，而无需所有实现文件都在同一个地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-09T04:09:31.860

该声明是错误的。事实上，`make`存在的全部原因（和类似的）是因为它是错误的——它们通过跟踪哪些源文件已更改并仅重新创建依赖于源文件的目标文件来最大限度地减少重建应用程序的时间/精力那已经改变了。最新的目标文件被简单地保留。

一旦所有目标文件都是最新的，它们就会链接在一起以生成最终的可执行文件（同样，这通常仅在/如果至少一个目标文件比当前可执行文件更新时执行）。

当然，它也可以`make`用于与编译和链接无关的工作，但这几乎可以肯定是它们最常见的用途，以及（至少大部分）它们被发明的原因（唯一明显的变化是它们最初主要用于 C 源代码而不是 C++，但在这方面两者几乎无法区分）。

两者之间唯一明显的区别是，当/如果您使用模板时，通常最终会将大量代码放入标题中。在这种情况下，更改标头会强制重新编译包含该标头的所有代码，这通常很多。使用 C 代码和/或非模板 C++ 代码，您将大部分代码放入源文件中，因此如果您更改代码的*接口*（通常会更改标头），则只需重新编译其他文件，但如果您在不更改接口的情况下限制对实现的更改，则只需重新编译该文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T05:27:25.583

正如其他人所说，这种说法是错误的。然而，在修改源文件、源依赖和重新编译方面确实存在有趣的复杂性。不出所料，最有帮助的讨论是在 Herb Sutter 的一系列 Guru of the Week 帖子中给出的，他在其中讨论了依赖隔离和 Pimpl 成语：

[编译防火墙](http://www.gotw.ca/gotw/024.htm)

[快速 Pimpl 成语](http://www.gotw.ca/gotw/028.htm)

[粉刺的喜悦](http://www.gotw.ca/publications/mill05.htm)

几乎每个人第一次看到这些东西时都觉得很深奥，但 Pimpl 成语在实践中却*非常*有用。

# android - 从 Android 应用程序中的 busybox 命令获取输出

> ID：10068655
> 
> 赞同：6
> 
> 时间：2012-04-09T03:42:25.870
> 
> 标签：android, shell, loops, busybox, su

对于我的一生，我无法让我的应用程序从 su shell 中调用busybox的进程中获取响应。

我尝试了三种不同的方法，也尝试了这三种方法的组合以使其工作，但我永远无法使用busybox从任何东西中获得输出，只有其余的命令。

更具体地说，我可以让它返回和之类的命令`ls /data`，`cat suchandsuch.file`但是任何以“busybox”开头的东西（即busybox mount，busybox free）都不会显示任何内容。

这是对我来说最接近的方法，此代码适用于`ls /data`，但不是“busybox free”

这将运行命令（大部分），并返回一个空字符串，而不是从输入流中无休止地循环。

```
Process p;
try {
    p = Runtime.getRuntime().exec(new String[]{"su", "-c", "/system/bin/sh"});
    DataOutputStream stdin = new DataOutputStream(p.getOutputStream());
    stdin.writeBytes("ls /data\n");
    DataInputStream stdout = new DataInputStream(p.getInputStream());
    byte[] buffer = new byte[4096];
    int read = 0;
    String out = new String();

    while(true){
        read = stdout.read(buffer);
        out += new String(buffer, 0, read);
        if(read<4096){
            break;
    }
}
    Toast.makeText(getApplicationContext(), out, Toast.LENGTH_SHORT).show();
} catch (IOException e) {
    e.printStackTrace();
} 
```

底部附近的 toast 显示从 开始的所有内容`ls /data`，但是当更改为 busybox 的任何内容时，它的空白或 null。

我也尝试过这两种方法，但都没有奏效。（我在命令运行后将进程传递给他们。）

当您点击方法的按钮时，这两种方法总是会导致应用程序冻结。

```
String termReader(Process process){
    BufferedReader reader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));   
    try {
        int i;
        char[] buffer = new char[4096];
        StringBuffer output = new StringBuffer();

        while ((i = reader.read(buffer)) > 0) 
            output.append(buffer, 0, i);

        reader.close();
        return output.toString();
    } catch (IOException e) {
        e.printStackTrace();
        return e.getMessage();
    }
}

String processReader(Process process){
    InputStream stdout = process.getInputStream();
    byte[] buffer = new byte[1024];
    int read;
    String out = new String();
    while(true){
        try {
            read = stdout.read(buffer);
            out += new String(buffer, 0, read);
            if(read<1024){
            break;
        }
        } catch (IOException e) {
            e.printStackTrace();                            
        }
    }
    return out;
} 
```

没有堆栈跟踪可以使用，所以我开始有点难过。

使用下面提出的代码进行编辑，嗯，下面 :D 我对其进行了一些更改，使其成为一键运行的东西，以便于故障排除和测试。

当它尝试读取输入流时，它也会冻结，如果我`stdin.writeBytes("exit\n")`在尝试读取流之前调用它会给我关闭终端的空白答案，如果我在之后调用它，它会无限循环。

```
void Run() {
    String command = "busybox traceroute\n";

    StringBuffer theRun = null;
    try {
        Process process = Runtime.getRuntime().exec("su");
        DataOutputStream stdin = new DataOutputStream(process.getOutputStream());
        stdin.writeBytes(command);
        BufferedReader reader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));
        int read;
        char[] buffer = new char[4096];
        StringBuffer output = new StringBuffer();

        while ((read = reader.read(buffer)) > 0) {
            theRun = output.append(buffer, 0, read);
    }

    reader.close();
    process.waitFor();

    } catch (IOException e) {
        throw new RuntimeException(e);
    } catch (InterruptedException e) {
        throw new RuntimeException(e);
    }
    Toast.makeText(getApplicationContext(), theRun, Toast.LENGTH_SHORT).show();
} 
```

似乎它跳过了第一行（每次调用命令时都会得到的busybox信息行）并且没有捕获其余数据。我已经尝试了所有我能想到的变体来让它正常工作：/

如果有人对此有所了解，我将不胜感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:15:53.953

这是一个快速的解决方案......这是我为此创建的实用程序类。您可以使用本机 shell，如果设备已获得 root 权限，则可以使用 root shell，或者设置自定义 shell。干得好。

[https://github.com/jjNford/android-shell](https://github.com/jjNford/android-shell)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:02:29.320

我找到了一种解决方法。

首先，在我的情况下，运行与busybox相关的命令永远不会通过他们的InputStream返回它们的输出，无论我尝试什么方法（我试过很多哈哈）。

这就是我发现我可以做到的。这有点乏味，并且不会为您提供完整的输出，但是如果您想要依赖某个命令是否正确触发（在我的情况下，如果我无法比较所有内容，我的应用程序将无法正常工作跑了。）

您无法从流程中获取输入，但如果您工作正确，您可以获得退出值:) 这适用于任何不会给您提供复杂响应的东西（例如在大文件上使用 cat ）

两者的区别很容易找到，例如：

```
command = "cat /sys" // works, exits with 1

command = "cat /init.rc"  doesnt work, exits with 0 
```

这就是我设置它以轻松工作的方式。使用 MasterJB 提供的方法正常运行命令：

```
process p;
try {
    p = Runtime.getRuntime().exec(new String[]{"su", "-c", "/system/bin/sh"});
    DataOutputStream stdin = new DataOutputStream(p.getOutputStream());
    stdin.writeBytes(command); 
    stdin.writeBytes("echo $?\n"); 

    DataInputStream stdout = new DataInputStream(p.getInputStream());
    byte[] buffer = new byte[4096];
    int read = 0;
    String out = new String();

    while(true){
        read = stdout.read(buffer);
        out += new String(buffer, 0, read);
        if(read<4096){
            break;
        }
    // here is where you catch the error value

    int len = out.length();
    char suExitValue = out.charAt(len-2);
    Toast.makeText(getApplicationContext(), String.valueOf(suExitValue), Toast.LENGTH_SHORT).show();

    return0or1(Integer.valueOf(suExitValue), command); // 0 or 1 Method
    // end catching exit value                            
}
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我还发现创建“0 或 1”方法来返回发生的事情更容易。在这个例子中，它作为吐司被触发。您可能还想测试 char 是否实际上是一个整数，因为有些命令没有给出任何退出值（很奇怪，我知道。一个实例是 ls /sys，当通过 su 终端运行时，它返回一个空白退出值。）

```
String return0or1 (int returnValue, String command){
String message = command + " - Cannot get return value.";

if (returnValue == 0){
    message = command + " - successful.";
    return message;
}
if (returnValue == 1){
    message = command + " - failed.";
    return message;
}
return message;
} 
```

通过一些研究，您几乎可以将任何退出值与适当的响应相匹配，只需正确捕获它们:)

这些方法只返回命令是否运行（0），但如果它得到一个双字符或三字符的退出代码，最后一个数字可能在失败时为 0（即当退出值为 10 时），所以这在大多数情况下都有效，但需要扩展以捕获双倍和三倍值。

# ios - 在iOS中使用线程返回图像

> ID：10068656
> 
> 赞同：1
> 
> 时间：2012-04-09T03:42:51.733
> 
> 标签：ios, multithreading, uikit

嗨，我正在学习斯坦福 iOS 开发课程。我有一个关于线程的问题。我知道 UIKit 调用应该由主线程处理。我想知道这样的事情是否合法？

```
- (UIImage *)mapViewController:(MapViewController *)sender imageForAnnotation:(id<MKAnnotation>)annotation {
    FlickrPhotoAnnotation *fpa = (FlickrPhotoAnnotation *) annotation;
    NSURL *url = [FlickrFetcher urlForPhoto:fpa.photo format:FlickrPhotoFormatSquare];

    __block UIImage *image;
    dispatch_queue_t downloadQ = dispatch_queue_create("download queue", NULL);
    dispatch_async(downloadQ, ^{
        NSData *data = [NSData dataWithContentsOfURL:url];
        if (data) {
            dispatch_async(dispatch_get_main_queue(), ^{
                image = [UIImage imageWithData:data];
            });
        }
    });
    dispatch_release(downloadQ);
    return image;
} 
```

或者我应该只返回 NSData 并处理调用方法中的所有线程？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:22:27.333

你的代码不会做你想做的事。

您将一个异步块放入队列中，然后立即从该方法返回。您不能保证该块在您返回之前会实际运行——事实上，它很可能不会运行。

因此，您将返回`image`. 由于您没有对其进行初始化，因此它可能是垃圾。调用此方法的人将尝试使用指向图像的垃圾指针，并且（如果幸运的话）崩溃。如果您已将其初始化为 nil：

```
__block UIImage *image = nil; 
```

那会更有礼貌一点。

这里的问题是：您的方法必须返回 a `UIImage`，因此在返回之前您必须等待完全构造 a 所需的时间`UIImage`。在其他线程上执行此操作的好处为零——您仍在等待相同的时间，并且切换线程只会增加开销。

为了以一种有用的异步方式加载图像，您需要某种方式通过对委托方法或块的回调来异步告诉调用者图像何时完成加载。例如，`NSURLConnection`在 Foundation 中查看。它有一个通过委托回调的旧方法，以及一个`+sendAsynchronousRequest:queue:completionHandler:`通过块回调的新方法 ()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:43:12.090

我同意 CodaFi 的评论。实际上，可以在主线程之外创建图像。UIView 创建和操作必须在主线程上完成，但 UIImage 不是 UIView。此外，如果您尝试在另一个线程上操作显示的 UI，运行时可能会给您一个警告或错误（当我不小心更新另一个线程上的 UITableView 时，它对我来说确实如此）。

# ruby-on-rails - Rails simple_form 关联

> ID：10068658
> 
> 赞同：5
> 
> 时间：2012-04-09T03:43:21.047
> 
> 标签：ruby-on-rails, simple-form

我正在尝试使用 simple_form 为“成员”创建一个表单，但在显示关联时遇到了麻烦，它显示的组织如下所示，而不是 id 或 organization_name。我在这里错过了什么吗？我该怎么办？

**组织：0x0000000485cf88

组织：0x0000000485c948

组织：0x0000000485c358**

```
class Organization < ActiveRecord::Base
  has_many :members
  attr_accessible :organization_name
end

class Member < ActiveRecord::Base
  belongs_to :organization
  attr_accessible :active, :email, :first_name, :last_name, :role
end

  <%= f.input :first_name %>
  <%= f.input :last_name %>
  <%= f.input :role %>
  <%= f.input :email %>
  <%= f.input :active %>
  <%= f.association :organization %>

  <%= f.button :submit %> 
```

谢谢。

干杯，阿兹伦

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T09:46:49.483

看起来`Organization`模型没有任何这些字段：`[ :to_label, :name, :title, :to_s ]`因此`SimpleForm`无法检测到默认标签和值方法进行收集。我认为您应该手动传递它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-02T17:27:49.827

向您的组织类添加`to_label`功能，如下所示

```
class Organization < ActiveRecord::Base
  has_many :members
  attr_accessible :organization_name

  def to_label
    "#{organization_name}"

  end
end 
```

引用 [简单表单关联自定义标签名称](https://stackoverflow.com/questions/6334582/simple-form-association-question)

# grails - 在 Grails 中将 xml 转换为域对象

> ID：10068661
> 
> 赞同：4
> 
> 时间：2012-04-09T03:43:25.680
> 
> 标签：grails, groovy, grails-domain-class, xmlslurper

我是一个 grails 新手，在一个有趣的项目上工作。我正在序列化这样的类：

```
def msg = (listing as XML).toString() 
```

尝试使用 XMLSlurper 反序列化一个类，如下所示：

```
def root = new XmlSlurper().parseText(listingString)
def sellerNode = root.seller 
```

我正在尝试重建这个对象：

```
Listing{

    Date dateCreated
        String description
        Date endDateTime
        String name
        Float startingPrice
        Customer winner
        static hasMany = [bids: Bid] // B-4
        static belongsTo = [seller: Customer]
    }

} 
```

从这个xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<listing>
    <bids>
        <bid>
            <amount>10.5</amount>
            <bidder>
                <accountExpired>false</accountExpired>
                <accountLocked>false</accountLocked>
                <dateCreated/>
                <emailAddress>validguy@valid.com</emailAddress>
                <enabled>false</enabled>
                <password>secret</password>
                <passwordExpired>false</passwordExpired>
                <username>validguy</username>
            </bidder>
            <dateCreated>2012-04-08 21:16:41.423 CDT</dateCreated>
            <listing/>
        </bid>
        <bid>
            <amount>10.0</amount>
            <bidder>
                <accountExpired>false</accountExpired>
                <accountLocked>false</accountLocked>
                <dateCreated/>
                <emailAddress>validguy@valid.com</emailAddress>
                <enabled>false</enabled>
                <password>secret</password>
                <passwordExpired>false</passwordExpired>
                <username>validguy</username>
            </bidder>
            <dateCreated>2012-04-08 21:16:41.415 CDT</dateCreated>
            <listing/>
        </bid>
    </bids>
    <dateCreated/>
    <description>A test listing</description>
    <endDateTime>2012-04-09 21:16:41.407 CDT</endDateTime>
    <name>Default</name>
    <seller>
        <accountExpired>false</accountExpired>
        <accountLocked>false</accountLocked>
        <dateCreated/>
        <emailAddress>validguy@valid.com</emailAddress>
        <enabled>false</enabled>
        <password>secret</password>
        <passwordExpired>false</passwordExpired>
        <username>validguy</username>
    </seller>
    <startingPrice>10.0</startingPrice>
    <wasNotificationSent>false</wasNotificationSent>
    <winner>
        <accountExpired>false</accountExpired>
        <accountLocked>false</accountLocked>
        <dateCreated/>
        <emailAddress>validguy@valid.com</emailAddress>
        <enabled>false</enabled>
        <password>secret</password>
        <passwordExpired>false</passwordExpired>
        <username>validguy</username>
    </winner>
</listing> 
```

首先，我在获取每个节点的值时遇到问题。我试过 def Seller = new Customer(name:sellerNode.@username) 但这不起作用，因为我认为 @username 需要是一个属性而不是一个元素。其次，我是否必须“手动”解析这个 xml？难道没有更好的方法来自动反序列化这个xml吗？

我已经看过几篇文章，包括这篇文章：[将 XML 导入 Grails 域类](https://stackoverflow.com/questions/1519395/import-xml-into-a-grails-domain-class) ，但是如您所见，我的 xml 没有像这篇文章中的 xml 这样的属性。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T17:17:09.403

如果 XML 的来源是 Web 请求，您可以添加`parseRequest: true`到控制器的 UrlMapping，grails 会自动解析 XML 请求。XML 将显示为`params`，您可以像任何其他请求一样进行数据绑定。

如果您从其他来源获取 XML，请查看类中的 XML 到参数映射转换[`XMLParsingParameterCreationListener.groovy`](https://github.com/grails/grails-core/blob/master/grails-plugin-converters/src/main/groovy/org/codehaus/groovy/grails/web/converters/XMLParsingParameterCreationListener.groovy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T13:43:35.833

我确实看过 aTaylor 建议的类，但由于时间限制，我最终以这种方式用 slurper 解析 xml：

```
def listing = new XmlSlurper().parseText(listingXML)
def winner = listing."winner"."username".text() 
```

我受制于只能获取文本值的事实。例如，我无法将bids 元素反序列化为集合并执行bids.Max(b->b.amount) 之类的计算。那是我的最终目标。

顺便说一句 - 这不是网络请求。这是一个序列化为 xml 的 MQ 消息。

# forms - Symfony2 绑定请求错误

> ID：10068662
> 
> 赞同：2
> 
> 时间：2012-04-09T03:43:28.283
> 
> 标签：forms, symfony, php-5.3

```
namespace Topxia\LiftBundle\Form;

use Symfony\Component\Validator\Constraint as Assert;

class AddUser {

    /**
     * @Assert\NotBlank(message="用户名不能为空")
     */
    public $username;

    /**
     * @Assert\NotBlank(message="用户姓名不能为空")
     */
    public $name;

    /**
     * @Assert\NotBlank(message="密码不能为空")
     * @Assert\MinLength(limit=4,message="密码太短了")
     * @Assert\MaxLength(limit=24,message="密码太长了")
     */
    public $password;

    /**
     * @Assert\NotBlank(message="密码不能为空")
     */
    public $rpassword;

    /**
     * @Assert\NotBlank(message="邮箱格式不正确")
     * @Assert\Email(message="邮箱格式不正确")
     */
    public $email;

    /**
     * @Assert\NotBlank(message="k3系统编号不能为空")
     */
    public $num;

    /**
     * @Assert\NotBlank()
     * @Assert\Choice({"0", "1", "2", "3", "4"})
     */
    public $roles;

    public $changePassword;
} 
```

* * *

```
<?php
// src/Topxia/LiftBundle/Form/AddUserType.php

namespace Topxia\LiftBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class AddUserType extends AbstractType{

    public function buildForm(FormBuilder $builder, array $options){
        $builder->add('username', 'text', array('label' => '用户姓名'));
        $builder->add('name', 'text', array('label' => '用户名'));
        $builder->add('password', 'password', array('label' => '密码'));
        $builder->add('rpassword', 'password', array('label' => '重复密码'));
        $builder->add('email', 'email', array('label' => '邮件'));
        $builder->add('num', 'text', array('label' => 'K3系统编号'));
        $builder->add('roles', 'choice', array('label' => '用户组', 'multiple'  => false, 'expanded' => true,
                'choices' => array(
                    '0' => '超级管理员',
                    '1' => '仓库管理员',
                    '2' => '采购管理员',
                    '3' => '采购员',
                    '4' => '供应商'
        ),
        ));
        $builder->add('changePassword', 'checkbox', array('label' => '登录修改密码',  'value' => '1'));
    }

    public function getName(){
        return 'add_user';
    }

} 
```

当我使用 $form->bindRequest($request); 在控制器中出现错误：[语义错误] 属性 Topxia\LiftBundle\Form\AddUser::$username 中的注释“@Symfony\Component\Validator\Constraint\NotBlank”不存在，或无法自动加载。500 Internal Server Error - AnnotationException 我对此一无所知。谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-09T05:27:16.680

You have a typo in your namespace declaration. You're missing an "s":

```
use Symfony\Component\Validator\Constraints as Assert; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T20:44:23.900

最大长度在 2.3 之后不存在。利用：

```
\Length(max = "150") 
```

我花了这么多时间才弄清楚。

我遇到的错误是：

> [语义错误] 属性 ....Publication::$comment 中的注释“@Symfony\Component\Validator\Constraints\MaxLength”不存在，或无法自动加载。

# c# - 通过 C# 在 TinyMCE 中输入文本

> ID：10068664
> 
> 赞同：0
> 
> 时间：2012-04-09T03:43:43.230
> 
> 标签：c#, asp.net, wpf

我已将 TinyMCE 嵌入到 WebBrowser 控件中，并将其用作我的 WPF 应用程序中的 HTML WYSIWYG 编辑器。

在包含 TinyMCE 的 html 页面上，我有：

```
function getContent() {
 return tinyMCE.get('elm1').getContent();
} 
```

我在 WPF 按钮上调用这个函数点击如下获取 TinyMCE 在 C# 中的内容：

```
 string editHtml = this.webBrowser1.InvokeScript("getContent").ToString(); 
```

但是我想在加载之前从文件中设置 TinyMCE 的内容，只是为了显示用户以前输入的文本，以便他/她可以继续修改旧内容，而不是编写新内容。如何通过 C# 设置 TinyMCE 的内容。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:48:58.863

如果您将数据保存在数据库中，然后在编辑时，从表中选择数据，并将文本分配给您的文本框。

```
txbItemText.Text = ListofItems[0].description; 
```

# apache - Mod Rewrite 以创建简短的直接链接

> ID：10068665
> 
> 赞同：1
> 
> 时间：2012-04-09T03:43:48.363
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

目前在我的网站上，访问者可以通过“www.mywebsite.com/index.php?post=123”直接访问不同的帖子，其中 123 是帖子编号。

我正在尝试使用 htaccess 稍微清理直接链接，期望的结果是用户可以转到“www.mywebsite.com/123”，htaccess 会将他们带到“www.mywebsite.com/index.php ?后=123。

我曾尝试使用以下 Modrewrite，但它会将我引导至 404 错误：

```
RewriteRule ^/([0-9]+)$ /index.php?videoID=$1 [QSA] 
```

我确信 Modrewrite 模块正在工作，因为我也在使用其他规则。这是我的整个 .htaccess 文件：

```
RewriteEngine On
RewriteRule ^/([0-9]+)$ /index.php?videoID=$1 [QSA]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T03:54:02.180

如果这些规则在您的 .htaccess 文件中，您需要从用于匹配 URI 的正则表达式中删除前缀（前导斜杠）：

```
RewriteRule ^([0-9]+)$ /index.php?videoID=$1 [QSA] 
```

# javascript - JavaScripting .sort()'ing 一个多维分数数组来排序玩家姓名

> ID：10068671
> 
> 赞同：3
> 
> 时间：2012-04-09T03:45:16.070
> 
> 标签：javascript, jquery, sorting, multidimensional-array

我非常了解 JS .sort() 函数，并且我对多维数组有一个松散的掌握，但我有点卡住了。这是我所拥有的：

```
var player1 = ["bob", 20];
var player2 = ["jon", 40];
var player3 = ["tim", 10];
var scores = [player1[1], player2[1], player3[1]];

scores.sort(sortfunc);

function sortfunc(a,b){
  return a - b;
}

alert(scores); 
```

显然，这对分数进行了正确排序，但我想要的是根据他们的分数在 alert() 中适当地对玩家姓名进行排序，例如 tim、bob、jon。我不一定要找人直接发布答案，但是在正确的方向上一点提示不会有什么坏处！

此外，是否有更好的（即更清洁、更简单，你有什么）用 jQuery 来做这件事？我知道这并不重要，但我只是想知道它在 jQuery 中会是什么样子。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T03:50:26.210

传入整个数组`scores`，您的 sortFunc 提取第一个元素：

[http://jsfiddle.net/PS2wS/](http://jsfiddle.net/PS2wS/)

```
var player1 = ["bob", 20];
var player2 = ["jon", 40];
var player3 = ["tim", 10];
var scores = [player1, player2, player3];

scores.sort(sortfunc);

function sortfunc(a,b){
  return a[1] - b[1];
} 
```

# xcode4.2 - 从模态视图故事板 iOS 5 返回数据

> ID：10068673
> 
> 赞同：0
> 
> 时间：2012-04-09T03:45:22.483
> 
> 标签：xcode4.2, storyboard, modalviewcontroller, parentviewcontroller

我目前正在开发一个将创建模态视图的应用程序，并且我知道如何将数据发送到模态视图，但是如何让模态视图将数据发送回父视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:17:00.133

传统的机制是定义一个**协议**，并让模态视图支持设置一个实现协议的**委托。**

从那里开始很简单：父视图实现协议，并将自己设置为委托。然后，当您从模态视图获得要发布的数据时，将其传递给委托，父视图通过其协议实现接收它。

# ruby-on-rails - Rails - Cucumber 场景中的 DRY。什么是好的平衡？

> ID：10068680
> 
> 赞同：2
> 
> 时间：2012-04-09T03:47:17.313
> 
> 标签：ruby-on-rails, cucumber, dry

我有以下场景：

```
Scenario: Create a game with valid information
      Given I am logged in
      When I visit the new game page
      And I fill in "Game type" with "Basketball"
      And I fill in "Zip code" with "94040"
      And I fill in "Description" with "Friendly match"
      And I click on the button "Create Game"
      Then I should see "Awesome! Your game has been created."

Scenario: Create a game with missing information
      Given I am logged in
      When I visit the new game page
      And I fill in "Zip code" with "94040"
      And I fill in "Description" with "Friendly match"
      And I click on the button "Create Game"
      Then I should see "Game type can't be blank." 
```

如您所见，我在重复代码，从**开发人员**的角度来看，我讨厌在两种情况下都重复一些句子。但是，我认为场景必须独立清晰，因此任何**利益相关者**都可以看看并说..哦，我知道这个场景在描述什么。

我正在尝试测试我的表单验证是否适用于不同类型的字段值。所以，我会有很多类似的场景，基本上会改变“**填充**”部分。因此，另一个类似/相关的场景是检查邮政编码是否必须是数字的场景：

```
Scenario: Create a game with invalid zip code
          Given I am logged in
          When I visit the new game page
          And I fill in "Game type" with "Basketball"
          And I fill in "Zip code" with "ffff"
          And I fill in "Description" with "Friendly match"
          And I click on the button "Create Game"
          Then I should see "Zip code has to contain 5 digits." 
```

所以，我的问题是：是否有任何**干**的、商务人士友好的方式来做到这一点？我的意思是，代码优化和清晰易懂的独立场景定义之间的平衡？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T09:31:16.200

我认为[场景大纲](https://github.com/cucumber/cucumber/wiki/Scenario-outlines)很适合你。

# php - 关于 Yii CMarkdown 类

> ID：10068686
> 
> 赞同：0
> 
> 时间：2012-04-09T03:48:40.797
> 
> 标签：php, yii, markdown

我想在`CDetailView`以前以**MarkDown**格式编码的 a 中显示一些文本。

这是我的视图代码：

```
<?php 
$this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'title',
    array(
                'name'=>'text',
                'type'=>'raw',
                'value'=>$this->markdown->transform($model->text)
            ),
    'author_id',
    'date_added',
),
)); 
?> 
```

**在我的控制器中，**我实例化了一个`CMarkDown`像这样的过滤器：

```
 private $_markdown = null;

    public function getMarkdown()
    {
            if ( $this->_markdown === null)
            {
                    $this->_markdown = new CMarkdown();
                    $this->_markdown->purifyOutput = true;
            }
            return $this->_markdown;
    } 
```

注意我是如何明确设置`purifyOutput`为`true`.

所以我创建了一个充满诸如选框和注入javascript之类的模拟帖子，以查看它的行为方式，它根本没有过滤任何东西！我的脸上出现了警报，选框很高兴在页面上四处移动……

我找到了一种解决方法，可以设置`'type'=>'html'`但`CDetailView`我不需要这样做，我应该吗？

当我调用该方法时，该`purifyOutput`选项不应该为我过滤掉不需要的东西吗？`->transform()`

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:01:03.293

要净化你需要使用的输出`CMarkdown::processOutput`，而不是`transform`方法（那个更底层并且不尊重`purifyOutput`）。

如果您仔细查看文档，您会注意到其中`processOutput` [提到](http://www.yiiframework.com/doc/api/1.1/CMarkdown#processOutput-detail)了`purifyOutput`设置，而`transform` [没有](http://www.yiiframework.com/doc/api/1.1/CMarkdown#transform-detail)。查看源代码证实了这一点。

# javascript - Simple Fancybox 2 Keys Options - 如何使用？

> ID：10068693
> 
> 赞同：0
> 
> 时间：2012-04-09T03:49:24.463
> 
> 标签：javascript, fancybox

我正在尝试禁用 Fancybox 2 上左右箭头的热键。我尝试使用“键”可用选项，但无法正常工作！请帮忙：

这是我输入的...

```
keys: {
                "next": [13, 32, 34, 39], // enter, space, page down, right arrow, down arrow
                "prev": [8, 33, 37], // backspace, page up, left arrow, up arrow
                "close": [27] // escape key
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:22:42.727

为了禁用导航，您需要设置：

```
 modal: true,
keys: {
 ....
}, 
```

希望有帮助

# silverlight - 自定义数据透视表标题时的问题

> ID：10068695
> 
> 赞同：3
> 
> 时间：2012-04-09T03:49:56.143
> 
> 标签：silverlight, windows-phone-7, xaml

尝试自定义每个 PivotItem 的标题，我先 google 并在下面编写代码，这样就可以了：

```
<controls:Pivot Title="MyPivot">
    <!--Pivot item one-->
    <controls:PivotItem>
        <controls:PivotItem.Header>
            <TextBlock Text="Pivot1" FontSize="40"/>
        </controls:PivotItem.Header>
        <Grid/>
    </controls:PivotItem>
</controls:Pivot> 
```

当我以这种方式添加第二个枢轴项时，出现错误“值不在预期范围内。”，错误从“枢轴项二”的[controls：PivotItem]开始，

```
<controls:Pivot Title="MyPivot">
    <!--Pivot item one-->
    <controls:PivotItem>
        <controls:PivotItem.Header>
            <TextBlock Text="Pivot1" FontSize="40"/>
        </controls:PivotItem.Header>
        <Grid/>
    </controls:PivotItem>

    <!--Pivot item two-->
    <controls:PivotItem>
        <controls:PivotItem.Header>
            <TextBlock Text="Pivot2" FontSize="40"/>
        </controls:PivotItem.Header>
        <Grid/>
    </controls:PivotItem>
</controls:Pivot> 
```

当我构建项目时，错误就消失了，整个应用程序运行起来就像一个魅力。但是每次我以这种方式添加新的数据透视项目时，都会出现错误。

我的问题是：

1.  为什么会发生此错误以及如何解决？
2.  我可以忽略这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T06:26:19.107

这个“错误”只是在设计时抛出的，我认为你可以忽略它。此外，它会在您第一次构建项目时彻底消失（因此这意味着您的项目中没有真正的问题，也没有警告）！

设计师抛出的此类错误更多。

忽略它！

# excel - 比较excel中的2列

> ID：10068696
> 
> 赞同：1
> 
> 时间：2012-04-09T03:50:17.580
> 
> 标签：excel, excel-formula, match

我正在尝试比较 2 列的相似之处。
A 列和 B 列中有字符串，我想在 Col A 的特定行与 Col B 中的相应行匹配时显示。请注意，Col A 中的某些行可能为空。

所以，基本上这个=>`if (A1==B1), C1 = TRUE`

这是我到目前为止所尝试的：

`=IF(ISERROR(MATCH(A1,B1:B1,0)),"",A1)`

`=EXACT(A1,B1)`

`=IF(A1=B1,"True",B1)`

这些都没有给我匹配包含以下数据的列：

`ColA` `ColB`

`Xanthomonas oryzae` `Xanthomonas oryzae`

非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T04:03:24.783

由于@Carl 的答案对您不起作用，因此单元格内容*不*相等。检查多余的空格或其他非打印字符。

试试这些

```
=CLEAN(A1)=CLEAN(B1) 
```

或者

```
=TRIM(A1)=TRIM(B1) 
```

或者

```
=TRIM(CLEAN(A1))=TRIM(CLEAN(B1)) 
```

`Trim`将删除前导和尾随空格，`Clean`将删除 0 到 31 的 ascii 字符。您可能需要更精细的公式，具体取决于差异所在。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-09T03:51:22.437

在 C1 中，放置公式

```
=A1=B1 
```

# ios - iOS：自定义 UISlider 中的图像大小

> ID：10068709
> 
> 赞同：0
> 
> 时间：2012-04-09T03:52:34.177
> 
> 标签：ios, objective-c, iphone, uislider

在我们的 iOS 应用程序中，我们将 UISlider 子类化以使用自定义设计。然而，无论我们如何尝试，UISlider 中使用的图像都会失真。例如，原始拇指矩形是 156x44。我们已将其覆盖为 15x22，这会导致图像放大。其他排列导致拇指偏离轨道，并且仍然被炸毁。我们如何通过在图像上使用填充或覆盖适当的函数来正确设置拇指和轨道的图像大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T04:10:51.477

我认为 UISlider 只设计了一种分辨率，并且使元素更小，会对用户体验产生负面影响。但是，如果您真的想尝试，请尝试以下方法之一：

1.  使用更大的图像，但将 UISlider 实例的变换属性设置为一些 CGAffineTransformMakeScale(scaleX, scaleY)。

2.  为您的图像添加透明填充，使它们看起来很小，但实际上大小合适。

也就是说，如果你真的希望你的 UISlider 更小​​。如果您只关心造成的失真，但自动放大，请考虑将 UIImages 加载为可拉伸的，fi 与

```
 - (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets // iOS >=5.0 
```

或者

```
 - (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight // iOS <5.0 
```

# xcode - 为什么 xcode 4.3.2 中的 iphone 模拟器会出现空白屏幕？

> ID：10068711
> 
> 赞同：0
> 
> 时间：2012-04-09T03:52:57.767
> 
> 标签：xcode, ios-simulator

我有一个大问题。我的应用在 xcode 4.2 和 iOS 5.0 中运行良好。但是，当我更新到 xcode 4.3.2 和 iOS 5.1 时，我遇到了一个问题。

当我现在尝试运行我的应用程序时，ios 模拟器出现了我的初始屏幕，然后是一个带有状态栏的空白屏幕。我也得到

> 2012-04-08 20:46:48.025 Birdflix [67666:fb03] 应用程序窗口预计在应用程序启动结束时有一个根视图控制器

在日志中。

请帮忙，我真的需要发布我的应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:31:41.763

不好意思，我没有Xcode4.3.2，总是说的不对。

xcode 4.2，不要使用 MainWindow.nib，所以你应该指定 self.window.rootViewController。

rootViewController 是以前版本的 MainWindow.nib 中 AppDelegate 的视图控制器的 ViewController。

假设类是RootViewController，那么

```
#import "RootViewController.h"
- (BOOL)application:(UIApplication *)application 
          didFinishLaunchingWithOptions:(NSDictionary *)launchOptions   
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.window.rootViewController = [[RootViewController alloc] init]; 
    [self.window.makeKeyAndVisible];

     return YES:
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:59:54.153

请在 AppDelegate.m`self.window.rootViewController`的方法中设置。`application:didFinishLaunchingWithOptions:`

# c++ - 如何在 Makefile 中找到适当的库的 LDFLAG？

> ID：10068712
> 
> 赞同：1
> 
> 时间：2012-04-09T03:53:02.323
> 
> 标签：c++, ios, linker, makefile, clang

在 Makefile 中将库与 LDFLAGS 链接时如何知道库的名称？

例如：

libxml2.dylib 与 -lxml2 链接

实际上名为 zlib 的 libz.dylib 与 -lz 链接

这些标志在哪里指定？如何查找它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T03:59:12.203

按照惯例，您从库文件名中删除前面的“lib”。对于名为“libmyspecial_library.so”的库文件，相应的标志是：

```
-lmyspecial_library 
```

这实际上是 gcc 编译器的约定。有关更多信息，请参见[gcc 手册页](http://cf.ccmr.cornell.edu/cgi-bin/w3mman2html.cgi?gcc)：

> ```
>  -llibrary
>       Use the library named library when linking.
> 
>       The  linker searches a standard list of directories
>       for the library, which is  actually  a  file  named
>       `liblibrary.a'.   The linker then uses this file as
>       if it had been specified precisely by name.... 
> ```

# ocaml - 字符串到 char 列表

> ID：10068713
> 
> 赞同：22
> 
> 时间：2012-04-09T03:53:27.063
> 
> 标签：ocaml

我想编写一个接受字符串并返回字符列表的函数。这是一个函数，但我认为它不是我想要的（我想获取一个字符串并返回一个字符列表）。

```
let rec string_to_char_list s =
    match s with
      | "" -> []
      | n -> string_to_char_list n 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-09T06:56:16.267

除了，但非常重要：

您的代码显然是错误的，因为您有一个递归调用，其所有参数都与您输入的完全相同。它将引发具有相同值的无限调用序列，因此永远循环（堆栈溢出不会' t 发生在 tail-rec 位置）。

* * *

做你想做的代码是：

```
let explode s =
  let rec exp i l =
    if i < 0 then l else exp (i - 1) (s.[i] :: l) in
  exp (String.length s - 1) [] 
```

资料来源： [http ://caml.inria.fr/pub/old_caml_site/FAQ/FAQ_EXPERT-eng.html#strings](http://caml.inria.fr/pub/old_caml_site/FAQ/FAQ_EXPERT-eng.html#strings)

* * *

或者，您可以选择使用库：电池[String.to_list](http://batteries.forge.ocamlcore.org/doc.preview:batteries-beta1/html/api/String.html#VALto_list)或 extlib [String.explode](http://ygrek.org.ua/p/extlib/doc/ExtString.String.html#VALexplode)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-09-18T18:49:50.177

尝试这个：

```
let explode s = List.init (String.length s) (String.get s) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-12T00:03:17.250

很好很简单：

```
let rec list_car ch = match ch with
    | "" -> []
    | ch -> (String.get ch 0 ) :: (list_car (String.sub ch 1 ( (String.length ch)-1) ) )  ;; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-10T21:47:12.320

像这样的东西怎么样：

```
let string_to_list str =
  let rec loop i limit =
    if i = limit then []
    else (String.get str i) :: (loop (i + 1) limit)
  in
  loop 0 (String.length str);;

let list_to_string s =
  let rec loop s n =
    match s with
      [] -> String.make n '?'
    | car :: cdr ->
       let result = loop cdr (n + 1) in
       String.set result n car;
       result
  in
  loop s 0;; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-18T11:01:25.310

这是从字符串中获取字符列表的迭代版本：

```
let string_to_list s = 
let l = ref [] in
for i = 0 to String.length s - 1 do
    l := (!l) @ [s.[i]]
done;
!l;; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-28T15:09:41.020

我的代码，适用于现代 OCaml：

```
let charlist_of_string s =
  let rec trav l i =
    if i = l then [] else s.[i]::trav l (i+1)
  in
  trav (String.length s) 0;;

let rec string_of_charlist l =
  match l with
    [] -> "" |
    h::t -> String.make 1 h ^ string_of_charlist t;; 
```

# node.js - 如何让 Node.JS Express 仅在 localhost 上监听？

> ID：10068714
> 
> 赞同：57
> 
> 时间：2012-04-09T03:53:33.217
> 
> 标签：node.js, express

我有一个在反向代理后面的应用程序，我希望它只收听 localhost/127.0.0.1。

我希望这会起作用：

`app.listen(3001, 'localhost');`

或者

`app.listen(3001, '127.0.0.1');`

...但是我得到一个错误：

```
node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: Cannot read property 'port' of null
    at Object.<anonymous> (/home/ctoledo/hive-go/go.js:204:76)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

在不指定主机名的情况下运行应用程序可以正常工作，即`app.listen(3001);`.

我正在运行 Node **v0.6.14**和 express@ **2.5.5**并阅读了这个[google groups 讨论](https://groups.google.com/group/express-js/browse_thread/thread/6a46488f2a7c3758?pli=1)，并在 Express application.js 中找到[了这条评论](https://github.com/visionmedia/express/blob/master/lib/application.js#L420)：“这个方法采用与节点相同的参数`http.Server#listen()`。”

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-09T05:02:24.647

感谢您的信息，我想我看到了问题。这是一个错误`hive-go`，仅在您添加主机时才会出现。它的最后几行是：

```
app.listen(3001);
console.log("... port %d in %s mode", app.address().port, app.settings.env); 
```

当您在第一行添加主机时，它在调用时崩溃`app.address().port`。

问题在于`.listen()`. 真的应该在`console.log`传递给监听的回调中进行调用。添加主机时，它会尝试进行异步 DNS 查找。因此，当该行尝试获取地址时，还没有地址，因为 DNS 请求正在运行，所以它崩溃了。

尝试这个：

```
app.listen(3001, 'localhost', function() {
  console.log("... port %d in %s mode", app.address().port, app.settings.env);
}); 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-07-19T05:21:45.777

您遇到此问题是因为您在建立连接之前尝试控制台日志 app.address()。您只需要确保在建立连接后（即在回调中或在发出连接已建立信号的事件后）记录控制台日志。

幸运的是，在建立连接后，服务器会发出“监听”事件，所以只需执行以下操作：

```
var express = require('express');
var http = require('http');

var app = express();
var server = http.createServer(app);

app.get('/', function(req, res) {
    res.send("Hello World!");
});

server.listen(3000, 'localhost');
server.on('listening', function() {
    console.log('Express server started on port %s at %s', server.address().port, server.address().address);
}); 
```

这在 nodejs v0.6+ 和 Express v3.0+ 中工作得很好。

# javascript - API V3 上的 Google Maps ClusterManager 无法重新加载/初始加载

> ID：10068718
> 
> 赞同：1
> 
> 时间：2012-04-09T03:54:02.463
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试使用来自[http://cm.qfox.nl/](http://cm.qfox.nl/)的 Google Maps V3 API ClusterManager将地图上的标记聚集在一起，但我在代码中遇到了与原始网站相同的错误 - 一个错误当页面第一次加载或重新加载时：

`Uncaught TypeError: Cannot call method 'fromLatLngToPoint' of undefined ClusterManager_v3.js:586
ClusterManager.latlngToPoint ClusterManager_v3.js:586
ClusterManager._getMarkerBounds ClusterManager_v3.js:645
ClusterManager._cacheMarkerIcon ClusterManager_v3.js:580
ClusterManager.update ClusterManager_v3.js:345
(anonymous function) ClusterManager_v3.js:91` 

它在初始加载后工作正常，所以我很确定这是因为时间问题 - 例如，地图或标记在使用之前没有初始化。不幸的是，我无法找到等待一切初始化的方法，因为 Javascript 不是我的第一语言。任何帮助或指示都将受到欢迎。该网站的来源是我几乎完全使用的代码。

更新：

如果发现换行：

```
cm._requestUpdate(50); 
```

至

```
cm._requestUpdate(250); 
```

防止了错误。将其更改为 150 会导致错误发生 3/10 次。我不完全确定这是一个修复，但它可能所以我留下这个帖子以防万一其他人有更好的解决方案或想知道我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T19:58:51.833

为了使用[投影](https://developers.google.com/maps/documentation/javascript/reference#Projection)方法，它必须被初始化。[地图](https://developers.google.com/maps/documentation/javascript/reference#Map)会触发`"projection_changed"`事件，什么时候`Projection`会被创建。只有在那之后你才能使用`map.getProjection()`。所以我的建议是，添加`"projection_changed"`事件的监听器，并`ClusterManager`在它被调用时进行初始化：

```
google.maps.event.addListenerOnce(map, 'projection_changed', function(){
     var cm = window.cm = new ClusterManager(
        map,
        {
            objClusterIcon: new google.maps.MarkerImage('markers/cluster.png', false, false, false, new google.maps.Size(20,20)),
            objClusterImageSize: new google.maps.Size(20,20)
        }
    );

    // now json contains a list of marker positions. lets add them.
    for (var i = 0; i < json.length; ++i) {

       .....
    }
    cm._requestUpdate(50);
}); 
```

# python - Python中列表字典的最小总和

> ID：10068720
> 
> 赞同：1
> 
> 时间：2012-04-09T03:54:04.863
> 
> 标签：python, dictionary

我对 Python（和 stackoverflow）很陌生……请耐心等待！我有一本看起来像这样的字典：

`valueDict[i] = [x,y]`

我想根据 x 和 y 的总和找到最小键。我知道我可以使用的值字典：

`minVal = min(valueDict, key=valueDict.get)`

但我认为我不能为列表的字典修改这种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T03:57:47.977

`key`您可以为 的参数提供任何函数`min`。对于你做的值字典

```
minVal = min(dict, key=dict.get) # note no parentheses 
```

如果你想基于总和的最小值，你可以这样做

```
minVal = min(dict, key=lambda i: sum(dict[i])) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T03:57:20.923

您可以使用：

```
minVal = min(d, key=lambda x: sum(d[x])) 
```

其中 d 是字典。

# ruby-on-rails - Formtastic单选按钮问题

> ID：10068724
> 
> 赞同：0
> 
> 时间：2012-04-09T03:55:28.187
> 
> 标签：ruby-on-rails, formtastic

我的视图中有以下代码

```
<%= semantic_form_for @instance do |f| %> <!-- formtastic gem form creation -->
  <%= f.inputs do %>
    <%= f.input :name %>
    <%= f.input :foo, :label => "dType", as: :radio, collection: [ ["val1", false], ["val2", false] ] %>
    <%# strange bug omitting first letter of label %>
    <br>
  <% end %>
  <%= f.buttons do %>
    <%= f.commit_button %>
  <% end %>
<% end %> 
```

两个问题。首先，我遇到了一个奇怪的错误，它忽略了标签的第一个字母。其次，您必须在一个按钮（第一个按钮除外）上至少单击两次才能选中该按钮。提前致谢

Rails 3.1.1 和 Formtastic 2.0.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T19:47:15.520

您正在混合哈希语法......您开始使用经典的 Ruby hashrocket 样式（：eg => this），但随后您使用 JSON 样式（如：：radio）。选择一个并保持一致。

# iphone - 如何加载存储在 MainBundle 中的 PPT 的 TableView？

> ID：10068725
> 
> 赞同：0
> 
> 时间：2012-04-09T03:55:34.737
> 
> 标签：iphone, xcode, uitableview, nsarray, powerpoint

我正在尝试使用存储在我的应用程序的 MainBundle 中的 powerpoint 文件加载 TableView。我有很多困难。

```
NSBundle *bundle = [NSBundle mainBundle];
NSArray *paths  = [bundle pathsForResourcesOfType:@"ppt" inDirectory:@"Resources"];
NSFileManager *manager = [NSFileManager defaultManager];
self.title = @"Devo Songs";
self.files = [[[manager contentsOfDirectoryAtPath:paths error:nil] pathsMatchingExtensions:[NSArray arrayWithObjects:@"ppt", nil]] retain]; 
```

应用程序崩溃，我在最后一行收到警告，指出不兼容的指针类型将 NSArray 发送到 NSString。我怎样才能最好地将 PPT 文件加载到 TableView 中？

# javascript - JavaScript - 将长数字转换为字符串

> ID：10068727
> 
> 赞同：3
> 
> 时间：2012-04-09T03:55:47.803
> 
> 标签：javascript, jquery, coffeescript

```
"" + 237498237498273908472390847239084710298374901823749081237409273492374098273904872398471298374
> '2.3749823749827392e+92' 
```

我以一种美丽而神秘的方式计算 ID：

```
time = new Date().getTime()
pid = process.pid
host = 0; (host +=s.charCodeAt(0) for s in os.hostname())
counter = MIPS.unique_id()

"#{host}#{pid}#{time}#{counter}" 
```

不幸的是，在 ID 的某个地方（例如`11207648813339434616800`）。不幸的是，这意味着他们有时会求助于`1.1207648813339434e+22`.

**更新**：

这似乎是redis的“错误/功能”。万万没想到。

```
# Bug with Big Numbers on zadd
redis = require 'redis'
r = redis.createClient()
r.zadd 'zset', '342490809809999998098', 'key', ->
    r.zscore 'zset', 'key', (_, results) ->
        console.log typeof results # string
        console.log results # 3.4249080981000002e+20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:07:10.507

Javascript 使用 8 字节双精度来存储大数，即 53 位精度。在你的情况下，它远远超过 53 位，所以你应该使用一个大数库，它可以精确地存储大数。试试[javascript-bignum](https://github.com/jtobey/javascript-bignum)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T03:58:00.410

`2.3749823749827392e+92`在将数字与字符串连接以进行转换之前，您的数字将被转换为。

唯一的解决方案是使用接受任意位数的容器格式，可以是字符串或数组。

您能否向我们提供更多关于您如何获得此号码的详细信息？

# jquery - 如何将 $.post 的返回值分配给变量

> ID：10068729
> 
> 赞同：2
> 
> 时间：2012-04-09T03:57:04.113
> 
> 标签：jquery, .post

我的代码是

```
data1 = "";

$('#send').click(function(){
   var post = $(this).val();

   $.post('post.php',{post:post},function(data){
      data1 = data;
   });

   $(this).val(data1);
}); 
```

似乎函数 .click 的所有过程都是在执行 $.post 函数之前执行的。有谁能够帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T04:00:46.773

`.post()`是异步的，这意味着它在后台运行并且不会阻止其后函数的执行。在`data1 = data`设置之前，`$(this).val()`已经调用了。

`data`尝试对`$.post()`函数回调中依赖的所有内容进行编码：

```
$('#send').click(function() {
  $.post('post.php', {
    post: $(this).val()
  }, function(data) {
    $('#send').val(data);
  });
}); 
```

# browser - 注销后清除历史记录，并在点击浏览器中的后退按钮时重定向回登录，就像 gmail、facebook

> ID：10068732
> 
> 赞同：0
> 
> 时间：2012-04-09T03:57:39.417
> 
> 标签：browser, struts2, try-catch, browser-history

嗨朋友们，我在用户注销时开发了 Web 应用程序，我正在清除会话并重定向到注销页面。问题是当用户单击浏览器的后退按钮时，它会显示上一页内容，我想在用户单击浏览器的后退按钮后将用户重定向到登录页面。我尝试了 no-catch、no-store、expire-0 包含在 jsp 中的所有方法，并且还通过操作方法进行设置但不起作用。

**当我用谷歌搜索它时，我发现它显示的内容是历史，在一些文章中他们说通过 https 而不是 http 重定向它会忽略所有这些，所以任何人都可以提出我迫切需要的建议。我也想知道这些 gmail、facebook 的研究员是如何克服这一点的。我愿意接受建议，请准确告诉我如何克服这个问题，因为在我的应用程序中它会执行一些信用卡交易**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T19:40:28.507

你可以使用 JavaScript 来控制重定向吗？如果是这样，您可以使用：

```
window.location.replace(path/to/page); 
```

用浏览器历史记录中的注销页面替换确认页面。如果用户单击后退按钮，他们将被重定向到确认页面之前的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:13:28.257

将此添加到头部。发生的事情是浏览器将页面存储在缓存中；它实际上并没有重新加载页面。

此代码告诉浏览器不要缓存页面（因此再次请求页面，触发您的重定向代码）

```
<meta http-equiv="cache-control" content="no-cache"> <!-- tells browser not to cache -->
<meta http-equiv="expires" content="0"> <!-- says that the cache expires 'now' -->
<meta http-equiv="pragma" content="no-cache"> <!-- says not to use cached stuff, if there is any --> 
```

# php - 未定义的索引，而索引存在

> ID：10068745
> 
> 赞同：0
> 
> 时间：2012-04-09T04:00:02.623
> 
> 标签：php, arrays

```
print_r($address['Country']);
echo $address['Country']['name']; 
```

这是我为 print_r 得到的：

```
Array
(
    [Country] => Array
        (
            [id] => 1
            [code] => US
            [name] => United States
        )
) 
```

对于回声：

> 注意（8）：未定义索引：名称

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T04:05:37.573

如果`$address['Country']`是真的

```
Array
(
    [Country] => Array
        (
            [id] => 1
            [code] => US
            [name] => United States
        )
) 
```

那么你`name`应该在`$address['Country']['Country']['name']`，不知道为什么你的数组那么复杂，但无论如何。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T04:05:50.053

它肯定你有一个三维数组。试试`$address['Country']['Country']['name']`。

# facebook-fql - target_id 始终为空

> ID：10068750
> 
> 赞同：2
> 
> 时间：2012-04-09T04:00:49.193
> 
> 标签：facebook-fql

我正在开发一个应用程序来显示用户新闻提要，一切都很好，除了“target_id”变量，它总是返回一个空值。

[当我在http://developers.facebook.com/docs/reference/fql/stream/](http://developers.facebook.com/docs/reference/fql/stream/)上测试第一个查询并将“target_id”变量添加到查询时，它会正确返回值，但是当我运行相同的查询时我的应用程序的 access_token，始终为“target_id”返回 null

我怀疑这可能是权限问题，但我将所有权限添加到我的应用程序中，问题仍然存在。有什么帮助吗？谢谢

# python - 使用 RegEx 解析 NOAAPORT 提要

> ID：10068751
> 
> 赞同：2
> 
> 时间：2012-04-09T04:01:19.307
> 
> 标签：python, regex

所以我正在编写一个 Python 包，它将解析来自实时 NOAAPORT 提要的数据，并将其放入 SQL 数据库中。我很难理解 RegEx。

我特别希望匹配 LAT...LON 行：

```
LAT...LON 3153 10127 3153 10118 3152 10118 3142 10122
      3141 10127 3152 10127 
```

我能想到的最好的是：

```
r'^LAT...LON(.*)' 
```

但是 LAT...LON 之后的每两个数字都是纬度和经度点，我似乎无法让它与下一行点相匹配。

这也是可选的，我还想对这个龙卷风警告的某些部分进行分组。我想将 WMO 标题“TORSJT”分开（前三个字母是咨询类型，后三个是发布咨询的气象局。TOR=Tornado Warning SJT=San Angelo, TX weather office）

然后我只想将警告文本分开：

```
BULLETIN - EAS ACTIVATION REQUESTED
TORNADO WARNING
NATIONAL WEATHER SERVICE SAN ANGELO TX
802 PM CDT SAT APR 7 2012

THE NATIONAL WEATHER SERVICE IN SAN ANGELO HAS ISSUED A

* TORNADO WARNING FOR...
  NORTHWESTERN IRION COUNTY IN WEST CENTRAL TEXAS...

* UNTIL 815 PM CDT

* AT 757 PM CDT...A SEVERE THUNDERSTORM CAPABLE OF PRODUCING A
  TORNADO WAS OVER EXTREME NORTHWESTERN IRION COUNTY...OR 24 MILES
  NORTHEAST OF BIG LAKE...MOVING SOUTH SOUTHWEST AT 15 MPH. THIS
  STORM HAS A HISTORY OF PRODUCING A TORNADO AND MAY PRODUCE A
  TORNADO AT ANY TIME.

  IN ADDITION TO DANGEROUS TORNADIC WINDS...OTHER HAZARDS INCLUDE...
  LARGE DAMAGING HAIL UP TO TENNIS BALL SIZE.
  DAMAGING STRAIGHT LINE WINDS IN EXCESS OF 60 MPH.
  POTENTIALLY DEADLY LIGHTNING.

*THE TORNADO WILL REMAIN OVER MAINLY RURAL AREAS OF...
  NORTHWESTERN IRION COUNTY.

PRECAUTIONARY/PREPAREDNESS ACTIONS...

A SEVERE THUNDERSTORM WATCH REMAINS IN EFFECT UNTIL 1000 PM CDT
SATURDAY EVENING FOR WEST CENTRAL TEXAS.

&& 
```

我基本上希望将所有内容放入字典中，所有 3 个都有自己的密钥。

这是完整的警告以供参考：

```
368
WFUS54 KSJT 080102
TORSJT
TXC235-080115-
/O.NEW.KSJT.TO.W.0012.120408T0102Z-120408T0115Z/

BULLETIN - EAS ACTIVATION REQUESTED
TORNADO WARNING
NATIONAL WEATHER SERVICE SAN ANGELO TX
802 PM CDT SAT APR 7 2012

THE NATIONAL WEATHER SERVICE IN SAN ANGELO HAS ISSUED A

* TORNADO WARNING FOR...
  NORTHWESTERN IRION COUNTY IN WEST CENTRAL TEXAS...

* UNTIL 815 PM CDT

* AT 757 PM CDT...A SEVERE THUNDERSTORM CAPABLE OF PRODUCING A
  TORNADO WAS OVER EXTREME NORTHWESTERN IRION COUNTY...OR 24 MILES
  NORTHEAST OF BIG LAKE...MOVING SOUTH SOUTHWEST AT 15 MPH. THIS
  STORM HAS A HISTORY OF PRODUCING A TORNADO AND MAY PRODUCE A
  TORNADO AT ANY TIME.

  IN ADDITION TO DANGEROUS TORNADIC WINDS...OTHER HAZARDS INCLUDE...
  LARGE DAMAGING HAIL UP TO TENNIS BALL SIZE.
  DAMAGING STRAIGHT LINE WINDS IN EXCESS OF 60 MPH.
  POTENTIALLY DEADLY LIGHTNING.

*THE TORNADO WILL REMAIN OVER MAINLY RURAL AREAS OF...
  NORTHWESTERN IRION COUNTY.

PRECAUTIONARY/PREPAREDNESS ACTIONS...

A SEVERE THUNDERSTORM WATCH REMAINS IN EFFECT UNTIL 1000 PM CDT
SATURDAY EVENING FOR WEST CENTRAL TEXAS.

&&

LAT...LON 3153 10127 3153 10118 3152 10118 3142 10122
      3141 10127 3152 10127
TIME...MOT...LOC 0102Z 355DEG 11KT 3148 10125

$$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:14:32.630

您基本上是在尝试执行多行正则表达式匹配。

而不是使用贪婪匹配，`.*`尝试使用这样的东西：

```
import re

regex = re.compile('LAT...LON([0-9\s]+)', flags=re.MULTILINE)
matches = regex.search('''LAT...LON 3153 10127 3153 10118 3152 10118 3142 10122
      3141 10127 3152 10127
TIME...MOT...LOC 0102Z 355DEG 11KT 3148 10125''')
print re.split('\s+', matches.group(1))[1:-1] 
```

在实时控制台会话中：

```
>>> import re
>>> 
>>> regex = re.compile('LAT...LON([0-9\s]+)', flags=re.MULTILINE)
>>> matches = regex.search('''LAT...LON 3153 10127 3153 10118 3152 10118 3142 10122
...       3141 10127 3152 10127
... TIME...MOT...LOC 0102Z 355DEG 11KT 3148 10125''')
>>> print re.split('\s+', matches.group(1))[1:-1]
['3153', '10127', '3153', '10118', '3152', '10118', '3142', '10122', '3141', '10127', '3152', '10127']
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T04:40:44.523

其他人已经介绍了正则表达式的构造，但您也应该注意如何使用 re。如果你想抓取一大块文本`re.findall`会更容易，因为它仍然是多行的并且它返回一个字符串列表（而不是匹配对象）。显然，这取决于你想做什么。相反， re.match*仅*在行首查找匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T04:15:47.320

`.`除非指定了 DOTALL 标志，否则匹配除换行符以外的所有内容。
所以只需添加一个`\n`然后另一个`.*`：

```
import re

test = '''LAT...LON 3153 10127 3153 10118 3152 10118 3142 10122
      3141 10127 3152 10127
TIME...MOT...LOC 0102Z 355DEG 11KT 3148 10125'''

result = re.search(r'LAT...LON.*\n.*', test)

print result.group() 
```

或者

```
result = re.search(r'LAT...LON[\d\s]+\n[\d\s]+', test) 
```

# android - 警报对话框

> ID：10068756
> 
> 赞同：0
> 
> 时间：2012-04-09T04:03:57.767
> 
> 标签：android, android-alertdialog

我的代码中有一个警告对话框，我想在为该对话框按下取消按钮时为变量分配一个值。

我的实际代码是 -

```
private void clicked() {
    AlertDialog.Builder builder = new AlertDialog.Builder(Feedback.this);
    builder.setTitle("FEEDBACK");
    builder.setSingleChoiceItems(options, -1,
            new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    switch (which) {
                    case 0:
                        String url = "http://killmathsapp.blogspot.in/";
                        Intent i = new Intent(Intent.ACTION_VIEW);
                        i.setData(Uri.parse(url));
                        startActivity(i);
                        break;

                    case 1:
                        Intent s = new Intent(Intent.ACTION_SEND);
                        s.setType("plain/text");
                        s.putExtra(android.content.Intent.EXTRA_EMAIL,
                                new String[] { "pankaj_88_88@yahoo.com" });
                        s.putExtra(android.content.Intent.EXTRA_SUBJECT,
                                "feedback from app");
                        startActivity(s);
                        break;

                    }

                }
            });
    AlertDialog alert = builder.create();
    alert.setCancelable(true);
    alert.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:22:26.503

在对话框中显示警报消息的非常简单的方法...

```
 public void onClick(View v) 
        {
            if(somthing_wrong)
                          {
           Dialog d=new Dialog(AmitregistrationActivity.this);
           d.setContentView(R.layout.detail);
           d.setTitle("Warning....");
           d.show();
                  }
                else{
                  //Code that you want to execute 
                       }
             } 
```

你也必须像这样创建一个 detail.xml 文件

```
<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/detail" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="26dp"
    android:layout_marginTop="15dp"
    android:layout_toRightOf="@+id/imageView1"
    android:text="Please fill all Details..." android:textSize="20dp"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T10:38:57.953

这段代码就是你需要的。只需将其插入您需要启动警报对话框的任何位置。我还没有弄清楚如何自动启动键盘，但这应该不难。

```
AlertDialog.Builder alert = new AlertDialog.Builder(this);
                alert.setTitle(multiLangTranslation(R.string.manualshippermessage));
                final EditText input = new EditText(this);
                input.setInputType(InputType.TYPE_CLASS_NUMBER);
                input.setRawInputType(Configuration.KEYBOARD_12KEY);
                alert.setView(input);  
                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                  //Put actions for OK button here
                  }
                });
                alert.setNegativeButton(multiLangTranslation(R.string.cancel), new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int whichButton) {
                      //Put actions for CANCEL button here, or leave in blank
                  }
                });
                alert.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:12:07.383

```
AlertDialog.Builder alert=new AlertDialog.Builder(this);
        alert.setTitle("FeedBack");
        alert.setNegativeButton("No",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {
                        // TODO Auto-generated method stub
                       dialog.dismiss();
                    //do Set variable here or any other code    
                    }
                });
        alert.setPositiveButton("Yes",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {
                    //do Set variable here or any other code    
                    }
                }).show(); 
```

# mongodb - 副本集中的 mongodb 节点是否需要时间同步？

> ID：10068761
> 
> 赞同：4
> 
> 时间：2012-04-09T04:05:21.003
> 
> 标签：mongodb, replication

“MongoDB in Action”一书说：

> 想象一下，您向副本集的主节点发出写入。接下来发生什么？首先，写入被记录，然后添加到主节点的 oplog 中。同时，所有辅助节点都有自己的 oplog 来复制主节点的 oplog。因此，当给定的辅助节点准备好自我更新时，它会做三件事。首先，它查看自己 oplog 中最新条目的时间戳。接下来，它会在主节点的 oplog 中查询所有大于该时间戳的条目。最后，它将这些条目中的每一个添加到它自己的 oplog 中，并将这些条目应用于它自己

所以这意味着节点必须是时间同步的？因为时间戳在所有节点上必须相等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T10:14:27.977

一般来说，是的，让您的主机同步是一个非常好的主意（NTP 是通常的解决方案）。事实上，我见过比不同步 oplog 更糟糕的问题——集群中数据库主机上的不同时间应该被认为是必须的。

这实际上是在文档的生产说明页面上提到的：

[http://www.mongodb.org/display/DOCS/Production+Notes#ProductionNotes-Linux](http://www.mongodb.org/display/DOCS/Production+Notes#ProductionNotes-Linux)

请参阅有关最小化时钟偏差的说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T10:28:33.660

根据您提供的写入，节点将所有内容都基于最近收到的写入的时间戳，而不是它们自己的时钟。但是，当主节点被降级并且辅助节点成为主节点时，就会出现问题。如果时间偏差很大，可能会导致复制延迟或其他问题。

# ios - 我可以使用哪种字体来支持 iPhone 的所有脚本（拉丁文、汉字、西里尔文等）？

> ID：10068764
> 
> 赞同：0
> 
> 时间：2012-04-09T04:05:43.743
> 
> 标签：ios, fonts, uilabel

是否有支持所有脚本的字体？理想情况下和“Apple”字体，所以我可以在我的 iOS 应用程序中使用它而无需支付版税。

我将在 UILabel 中使用它。

谢谢，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:10:39.147

据我所知，iOS 自己处理变音符号语言，并且 iOS 键盘在处理标准系统字体中的重音字符时非常强大。Xcode 甚至支持将大部分（如果不是全部）这些字符直接复制和粘贴到字符串文字中。

*tl;dr*使用系统字体。( `[UIFont systemFontOfSize:mySize];`)

# c# - c# UnexpectedJavaScriptError 中的硒测试

> ID：10068766
> 
> 赞同：0
> 
> 时间：2012-04-09T04:06:19.060
> 
> 标签：c#, javascript, selenium

我想找到一个`textbox id= UserName`并给它一个`value =sa`，

我的测试有问题。

错误显示`UnexpectedJavaScriptError`。

这是怎么回事？我该如何解决这个问题？

这是我的代码。

```
public void SetupTest()
{

    driver.Manage().Timeouts().ImplicitlyWait(new TimeSpan(0, 0, 30));
    driver.Navigate().GoToUrl(**the WEBSITE url**);

}

public void Test1()
{

    IJavaScriptExecutor js = (IJavaScriptExecutor)driver;
    js.ExecuteScript("document.getElementById('UserName').value='sa'");
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T15:07:17.807

我在日常工作中使用 Selenium，这种代码应该可以正常工作。我认为问题可能是当您尝试使用它时该元素不存在。

我的建议是尝试这样的事情：

```
try {
  var element = document.getElementById('UserName');
  if(element) {
     element.value = 'sa';
  }
} catch(e) {} 
```

我实际上在我们的 selenium 代码中有一个“jquery”辅助方法，它使用 jQuery 来查找元素，然后返回 [0] 元素，以便我们可以将它与 Selenium API 一起使用。

```
 private IWebElement GetFirstElement()
    {
        return (IWebElement)((IJavaScriptExecutor)_driver).ExecuteScript("return $(\"" + _selector + "\")[0];", null);
    } 
```

此外，您可能只需要等到元素出现在屏幕上。一个简单的方法是使用 Selenium 的 FindElement(By...)，因为 Selenium 将等待可配置的时间量以使元素出现。

如果您这样做，在这种情况下完全避免使用 JavaScript 可能更有意义，但您尝试做的事情应该在完美的场景中工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T10:12:48.620

您无法使用 selenium webdriver 访问 DOM。您可以使用以下代码片段来实现相同的目的，而不是使用 javascript

```
string text = "sa";
IWebElement element =  driver.FindElement(By.Id("UserName"));
element.SendKeys(text); 
```

# objective-c - 通过 NSView 或 Magnify 放大和缩小

> ID：10068767
> 
> 赞同：1
> 
> 时间：2012-04-09T04:06:22.783
> 
> 标签：objective-c, xcode, cocoa

我希望能够制作类似于下面显示的通用访问缩放窗口的东西。我已经创建了一个 NSView 并使用填充操作制作了一个带有清晰“透视”合成的矩形，以透视我的窗口并显示桌面。现在我想知道是否可以像下图一样在我的视图内放大和缩小。我在想这可能是一个 IkImageView 或我可以应用的东西，但我不确定它是如何完成的。有谁知道如何做到这一点或告诉我在文档中哪里可以找到它？一些代码会很棒。谢谢！

![在此处输入图像描述](../Images/fef1b5256ff08b2f9b8b0c94bd166ed8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T20:00:28.383

看看 Apple 的示例**CIAnnotation**。在这个例子中是放大图像，但我认为你可以实现你想要的。[您可以从这里](https://developer.apple.com/library/mac/#samplecode/CIAnnotation/Introduction/Intro.html)下载示例代码。

CIAnnotation 应用示例：

![在此处输入图像描述](../Images/5ad22bad113a8499aa035fd559e9da7b.png)

可以帮助您的参考和指南：

[Core Image 编程指南](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)
[Quartz 2D 编程指南](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)
[NSGraphicsContext 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSGraphicsContext_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T17:21:01.917

NSView 支持缩放`- (void)scaleUnitSquareToSize:(NSSize)newUnitSize`

这会缩放视图的内容，因此要使用它，您必须将鼠标后面的桌面设置为视图内容（可能是 NSImage？），然后缩放视图。拖动鼠标时必须更新。

检查 Quartz 的 ImageKit 部分，特别是 class `IKImageView`。它具有缩放功能，但我自己还没有使用它。

# postgresql - PL/PgSQL 在循环中调用函数给出错误

> ID：10068768
> 
> 赞同：1
> 
> 时间：2012-04-09T04:06:24.263
> 
> 标签：postgresql, plpgsql

下面的代码在`w_add_ax_extra(1, 'k', 'v')`以前给出错误是`w_add_ax_extra(some_id, kv.k, kv.v)`我将其更改`k, v`为重现相同的错误

```
declare
  kv record;
begin
  -- Lines skipped
  for kv in select * from (select (each(extras)).*) as f(k,v) loop
    raise notice 'key=%,value=%',kv.k,kv.v;
    w_add_ax_extra(1, 'k', 'v');
  end loop;
  -- Lines Skipped
end 
```

我收到语法错误，但不明白我缺少什么

```
ERROR:  syntax error at or near "w_add_ax_extra"
LINE 1: w_add_ax_extra(1, 'k', 'v') 
```

但是，如果我这样做的`dummy = w_add_ax_extra(1, 'k', 'v')`话。是的，这个函数返回一个整数。但我不需要将它存储在这里。是否必须保留返回值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T04:30:42.927

来自[精美手册](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-NORESULT)：

> **39.5.2。执行没有结果的命令**
> 
> [...]
> 
> 有时对表达式或 SELECT 查询求值但丢弃结果很有用，例如在*调用具有副作用但没有有用结果值的函数*时。要在 PL/pgSQL 中执行此操作，请使用 PERFORM 语句：
> 
> ```
> PERFORM query; 
> ```

强调我的。你不是通过说类似的话来调用函数`f();`，你需要`perform f();`或者`select f() into ...;`：

```
for kv in select * from (select (each(extras)).*) as f(k,v) loop
    raise notice 'key=%,value=%',kv.k,kv.v;
    perform w_add_ax_extra(1, 'k', 'v');
end loop; 
```

# css - CSS：垂直对齐 li item 中的文本，不起作用

> ID：10068769
> 
> 赞同：5
> 
> 时间：2012-04-09T04:06:29.867
> 
> 标签：css, image

我对 li items 使用 list-style-image 和单行文本。

![在此处输入图像描述](../Images/5f15ea5c08b98594b1892299703f2f03.png)

但它看起来很糟糕，所以我想将文本垂直对齐到图像的中间。

我应该使用 vertical-align: middle ，对吗？但这对我不起作用。

```
<html>
    <head>
        <title> This is an demo </title>
        <style>
            body {
                background-color: #464443;
                color: white;
            }
            ul {
                list-style-image: url('bg.png');
            }

            li {
                vertical-align: middle;
            }

        </style>
    </head>

    <body>
        <ul>
            <li>abc</li>
            <li>abc</li>
            <li>abc</li>
            <li>abc</li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T04:08:50.583

一种令人满意的方法（imo）是不使用列表样式图像，而是使用背景属性来设置“项目符号”（注意我替换了我自己的占位符图像，因为我只是从小提琴中复制/粘贴）。您的填充和其他尺寸将根据“子弹”图像的大小而有所不同。

这是小提琴：http: [//jsfiddle.net/huBpa/1/](http://jsfiddle.net/huBpa/1/)

```
body {
  background-color: #464443;
  color: white;
}

 ul {
   list-style: none;
   padding: 0;
   margin: 0;
 }

 li {
   background: url('http://lorempixel.com/output/technics-q-c-32-32-1.jpg') no-repeat;
   line-height: 32px;
   vertical-align: middle;
   padding-left: 40px;
 }​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T04:51:05.070

这就是我会使用的。我不使用垂直对齐，而是使用填充将文本移动到我想要的任何位置。

```
 ul {
            list-style: none;
            margin-left: 0;
            padding-left: 0;
    }

    li {
            padding: 10px 10px 15px 20px;
            background-image: url(images/arrow.png);
            background-repeat: no-repeat;
            background-position: 0px;
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-09T04:11:13.907

将行高添加到 li。确保它与图像的高度相同

`

> ```
> li {
>             vertical-align: middle;
>             line-height: 30px; 
>         } 
> ```

# java - 使用 Maven 进行更智能的原生依赖处理

> ID：10068775
> 
> 赞同：6
> 
> 时间：2012-04-09T04:07:32.113
> 
> 标签：java, dependencies, maven-3

我目前正在将一个大型多模块项目（约 100 个子模块）转换为使用 Maven。目前我们使用 Ant + Ivy。

到目前为止，还没有出现任何重大问题，我很满意 Maven 仍然很合适。但是，我想知道是否有更好的方法来处理本机依赖项。

到目前为止，我得出了以下结论。

1.  最好将每个本机依赖项作为独立库或包含多个依赖项的存档包安装到 maven 存储库中。
2.  我没有迷失在使用 Maven 依赖插件声明每个依赖项，而是选择给每个分类器（例如 natives-win32）并在父 POM 中使用以下内容：

    ```
     <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
                <execution>
                    <id>copy</id>
                    <phase>compile</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <includeScope>runtime</includeScope>
                        <includeClassifiers>natives-win32</includeClassifiers>
                        <outputDirectory>${project.build.directory}/natives</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
    ```

到目前为止，这似乎是一个简单的全方位解决方案，不需要太多的麻烦来添加新的本机依赖项。它还为我提供了一个简单的全方位解决方案来管理本地人。我唯一必须做的就是确保我的 /natives/ 目录是在 java.library.path 上定义的。

关于这种方法让我（有点）困扰的一件事是，我的所有本机依赖项都被复制到每个子模块中，这些子模块表达了对它们的传递依赖，而我的快乐 jar 库被添加到引用它们所在位置的类路径中我的本地存储库（不需要副本）。

有没有办法对此更聪明，并让我的本地人从他们的存储库位置引用（假设我没有将它们存档，即 dll）。这将节省一堆不必要的复制。

对于上述方法，我还应该关注其他任何潜在的陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:16:17.580

您的代码段显示附加到构建阶段的目标，而不是依赖项。超级 pom 中的“复制依赖项”目标是否由所有模块继承？有没有办法只将它移动到将作为应用程序运行/打包的模块？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:47:23.793

可能是，我没有得到它。但是为什么不首先将所有本机库部署到存储库中。如果本机库稳定且很少更改，则可以在单独的反应器中完成。

之后，您只需通过 GAV 将这些本机依赖项引用为任何其他依赖项。也解决了不必要的复制问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:44:12.700

我最终使用了[maven natives 插件](http://code.google.com/p/mavennatives/)并处理了我周围有本地库的冗余副本这一事实。这样做的原因主要是由于该插件提供的简单性以及它还有一个相关的 eclipse 插件，该插件可以在开发人员 eclipse 环境中设置本机而无需干预。

# php - 如何更改目的地图片的颜色？

> ID：10068778
> 
> 赞同：0
> 
> 时间：2012-04-09T04:07:51.347
> 
> 标签：php, javascript, rgb

如何更改目的地图片的颜色？假设我们有一个来自 URL 的具有两种颜色的图像（例如：黑色和白色或棕色和白色），并且希望在我们的 URL 中以不同的颜色显示该图像。PHP或JavaScript中有什么功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:18:57.943

您是指使用 GD 库吗？

您可以通过使用 url 中的 get 函数来解决此问题

示例网址。domain.com/index.php?bgcolor=#234218

$bg_color = $_get[bgcolor];

# javascript - JavaScript 伪协议实际上做了什么？

> ID：10068781
> 
> 赞同：17
> 
> 时间：2012-04-09T04:08:27.730
> 
> 标签：javascript

换句话说，有什么区别

```
onclick="myFunction()" 
```

和

```
onclick="JavaScript:myFunction()" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-09T05:09:54.940

事件处理程序中的`JavaScript:`TYPE/LABEL/PREFIX（找不到它的实际名称）仅用于**一个目的**：

在 IE 中，如果**页面**上的第一个脚本**不是**JavaScript，则页面其余部分上的内联 JavaScript 有（仍然有？）有`javascript:`前缀。

`javascript:` *不要与 href 中的协议*混淆（顺便说一句，也应该避免）。`href="javascript:..."`仅在 AREA 标记中的旧网景中才需要。当您看到`href="javascript:void(0)"`有人需要使用`onclick="....; return false"`时，除非他们将其放在那里以提醒用户该链接是由 javascript 驱动的链接。如果关闭 JS，它将失败。

我从 msdn 中查找了官方文档，但这里有一些支持我的讨论：

[从 Javascript 调用 VBScript](https://stackoverflow.com/questions/1039341/calling-vbscript-from-javascript)

> Internet Explorer 默认使用它解析的第一个脚本元素的语言。因此，如果第一个脚本元素是 javascript，则无需在事件处理程序中指定“javascript:”。

[http://www.webdeveloper.com/forum/archive/index.php/t-135462.html](http://www.webdeveloper.com/forum/archive/index.php/t-135462.html)

> 您必须告诉 IE 您正在使用 VBS 和 JScript，否则假设在这种情况下所有函数都是 VBS。要么添加一个（空的？）JavaScript 脚本元素 [在页面顶部]，要么在 onchange 上使用 jscript: 协议。onchange="jscript:location.hash=this[this.selectedIndex].value;"

例子

```
<html>
<head>
<script language="VBScript">
' some vbscript here forces the default language
' of the page to be VBScript and not jScript/JavaScript
</script>
</head>
<body onload="javascript:alert('I am inline in an event handler - boo me')">
.
.
<a href="..." onclick="javascript:alert('and so am I'); return false">Click</a>
.
<a href="javascript:alert('javascript: PROTOCOL is NOT the same (but avoid it too)')">
  Click
</a>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-09T04:18:07.477

正如@ephemient 在他的评论中提到的那样，`javascript`in`onclick`什么都不做，它基本上是一个无用的标签。`javascript`标签中使用前缀`<a>`告诉浏览器将以下内容作为 javascript 运行，就像您在浏览器中输入了相同的内容一样。你可以在自己浏览器的地址栏试试看，直接输入`javascript: alert("Hello")`。

总结一下：

在`onclick`: 浏览器希望这是 javascript，所以如果你输入`javascript:`前缀，浏览器会说：'哦，多么古怪，你放了一个标签'。

在`<a href`浏览器位置栏中或中：浏览器不希望这是 javascript，因此如果您输入`javascript:`作为前缀，浏览器会说：'哦，我需要将其作为 javascript 运行'。

# asp.net - ASP.NET 中的异常 Javascript 行为

> ID：10068783
> 
> 赞同：0
> 
> 时间：2012-04-09T04:08:40.287
> 
> 标签：asp.net, ajax

我在 ASP.NET 中创建了一个应用程序，并使用 JavaScript 来验证字段是否为空；调用 ASP.NET 按钮控件的 onClientClick 事件验证函数，并使用 onClick 事件进行服务器端处理。

在这里，我附上了 javascript: 验证函数

```
function validate() {

    if (document.getElementById("<%=txt_msn.ClientID%>").value == "") {
        alert("Membership number can not be blank; Fill all fields marked as *");
        document.getElementById("<%=txt_msn.ClientID%>").focus();
        return false;
    }
 return true;
} 
```

在这里，我在 ASP.NET Control 下调用该函数

```
<asp:Button ID="btn_save_pi" runat="server" 
Text="Save" OnClientClick="return validate()" OnClick="btn_save_pi_click" /> 
```

现在我观察到，当验证函数返回 false 时，它​​会执行服务器端方法，即 onclick 事件，但在返回 true 时它什么也不做。但是当我切换返回值时，意味着在空字段上返回 true 而在非空字段上返回 false，那么它工作正常。

我很困惑为什么它会这样。它应该像我上面写的那样行事，即在错误返回时不做任何事情，在真正返回时执行服务器端处理。

请解释一下，这也将帮助我开发进一步的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:30:36.367

你的代码在 IE 和 FF 中对我来说都很好。

因此，如果它仍然给您带来问题，您可以使用 asp.net 验证控件寻找一种问题较少的方法。

但是，如果您仍想自己进行 javascript 验证，请使用以下命令：

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

您可以使用验证并按照您想要的方式进行验证。为了更好地理解它，请阅读最后给出的示例或参考：

[http://jquery.bassistance.de/validate/demo/](http://jquery.bassistance.de/validate/demo/)

希望这可以帮助....

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-09T04:34:07.217

So perhaps there is an actual solution, but I just do this little workaround to avoid the OnClientClick property altogether.

Hide your button:

```
style="display:none;" 
```

Next to your button, stick in another "fake" button:

```
<input type="button" value="Save" 
onclick="if (validate()) { 
document.getElementById('<%=btn_save_pi.ClientID%>').click(); }" /> 
```

# php - PHP在修改后丢失二维关联数组中的值

> ID：10068786
> 
> 赞同：0
> 
> 时间：2012-04-09T04:09:06.853
> 
> 标签：php, arrays

我对 PHP 和 2-dim 关联数组的问题感到困惑。我正在上 PHP 课程，而讲师却一无所知。

我声明该数组以使其具有一些信息的全局性。我使用 html 表单来显示数组中的数据。我使用 html 表单“计算”按钮修改了数组中的两个空值。一切都很好。数组已更新。然后，我使用表单“订单”按钮使用数组值创建一个文本文件。这是它变得奇怪的时候。数组中的修改值消失了。我可以在 $_Post calc If 语句中创建和保存文本文件就好了。使用 $_Post 提交按钮的相同文本 - 给了我旧的空值。

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Strict//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd'>

<html xmlns='http://www.w3.org/1999/xhtml'>

<head>

<title>Online Orders</title>

</head>

    <body>
    <?php

        function DisplayTable(){
            echo "<h2 style ='text-align:center'>Online Order</h2>\n";
            echo "<p>Enter the desired items you wish to order:</p>\n";

            echo "<form action='OnlineOrders.php' method ='POST'>";
            echo "<table style='background-color:lightgray' border='1' width='80%'>";           
            echo "<tr><td width = '10%' style = 'text-align:center'><span style = 'font-weight:bold'>Item</span></td>
            <td width = '40%' style = 'text-align:center'><span style = 'font-weight:bold'> 
                        Description</span></td>";
            echo "<td width = '10%' style = 'text-align:center'><span style = 'font-weight:bold'>Price</span></td>";
            echo "<td width = '10%' style = 'text-align:center'><span style = 'font-weight:bold'>Quantity</span></td>";
            echo "<td width = '10%' style = 'text-align:center'><span style = 'font-weight:bold'>Total</span></td></tr>";

            //foreach($products as $item){

            global $products;
            for ($i = 0; $i < count($products); ++$i){
                $name = key($products);
                echo "<tr><td style = 'text-align:left'>" . $name . "</td>";
                echo "<td style = 'text-align:left'>" . $products[$name]['Description']. "</td>";       
                echo "<td style = 'text-align:center'>" . $products[$name]['Price']. "</td>";
                if($products[$name]['Quantity'] > 0)
                    $value = $products[$name]['Quantity'];
                else
                    $value = "";
                echo "<td style = 'text-align:left'><input type='text' name = 'quantity[" . $name ."]' value = $value></td>";
                if($products[$name]['Total'] > 0)
                    echo "<td style = 'text-align:left'>" . $products[$name]['Total']. "</td>";
                else
                    echo "<td></td>";
                echo "</tr>";
                next($products);
            }
            echo "</table>";
            echo "<p></p>";
            echo "<input type ='submit' name='submit' value='Order' />";
            echo "<input type ='submit' name='calc' value='Calculate' />";
            echo "</form>";     
        }   

        //creates data array
        $pencils = array("Price" => "1.50", "Description" =>"12pk of #2 pencils", "Quantity" => NULL, "Total" => NULL);
        $pens = array("Price" => "3.50", "Description" =>"12pk of Bic blue ink pens", "Quantity" => NULL, "Total" => NULL);
        $paper = array("Price" => "5.50", "Description" =>"6pk of letter-sized, 100 count paper pads", 
                    "Quantity" => NULL, "Total" => NULL);
        $stapler = array("Price" => "6.40", "Description" =>"Streamline stapler - black", "Quantity" => NULL, 
                    "Total" => NULL);
        $staples = array("Price" => "2.00", "Description" =>"Streamline staples, 5000 count", "Quantity" => NULL, 
                    "Total" => NULL);
        $products = array("Pencils" => $pencils, "Pens" => $pens, "Paper" => $paper, "Stapler" => $stapler, 
                        "Staples" => $staples);

//doesn't work right doesn't have updated values
//Uses the array to create a text file and saves it to the hard drive in a folder entitled "/OnlineOrders"  
    if(isset($_POST['submit'])){
        global $products;
        $Dir = "OnlineOrders";
            if (is_dir($Dir)){
                echo "Products in order";
                //print_r($products);  //prints out the array as it was declared not modified!
                $SaveString = "Online Order\r\n\r\n";
                $SaveString .= date('m/d/Y') . "\r\n\r\n";
                $SaveString .= "Item\t\tPrice\t   Quantity\tTotal\r\n";
                for ($i = 0; $i < count($products); ++$i){
                    $name = key($products);
                //  if ($products[$name]['Quantity']>0){
                        $SaveString .= $name ."\t\t" . $products[$name]['Price'] ."\t\t". $products[$name]['Quantity'] .
                                        "\t" . $products[$name]['Total'] ."\r\n\r\n";                           

                //  }
                //  else
                //      echo "Nothing to write to file";
                    next($products);
                }
                $TimeStamp = date('Y_m_d_G_i');
                $SaveFileName  = "$Dir/order.$TimeStamp.txt";
                $fp = fopen($SaveFileName, "wb");
                if ($fp === FALSE){
                    echo "There was an error creating \"" . htmlentities($SaveFileName) . "\".<br />\n";                    
                }
                else {
                    if (flock($fp, LOCK_EX)) {
                        if (fwrite($fp, $SaveString)>0)
                            echo "Successfully wrote to file \"" . htmlentities($SaveFileName) . "\".<br />\n";
                        else
                            echo "There was an error writing to file \"" . htmlentities($SaveFileName) . "\".<br />\n";
                        flock($fp, LOCK_UN);
                    }
                    else{
                        echo "There was an error locking file \"" . htmlentities($SaveFileName) . 
                             " for writing\".<br />\n";
                    }
                    fclose($fp);
                }   
            }
        echo "<p><a href='OnlineOrders.php'>Order Again?</p>\n";
    }
    //enter values into the quantity input items and addes qty and total to array and redisplays the html table with updated values
    else if(isset($_POST['calc'])){
        global $products;
        $quantity = $_POST['quantity'];
        if(is_array($quantity)){
            foreach ($quantity as $item => $value){

                if($value <> NULL){
                    $amount = stripslashes($value);
                    if(is_numeric($amount) && ($amount > 0)){
                        $products[$item]['Quantity'] = $amount;
                        $products[$item]['Total'] = ($products[$item]['Price'] * $amount);
                    }
                    else
                        echo "<p>You must enter a number greater than 0 for $item's quantity</p>\n";
                }   
            }

            DisplayTable();
            //print_r($products);  //TEST - PRINTS OUT THE ARRAY WITH UPDATED VALUES CORRECTLY

//TESTING STARTS HERE - SAME CODE FROM submit button and it works
        $Dir = "OnlineOrders";
            if (is_dir($Dir)){
                $SaveString = "Online Order\r\n\r\n";
                $SaveString .= date('m/d/Y') . "\r\n\r\n";
                $SaveString .= "Item\t\tPrice\t   Quantity\tTotal\r\n";
                reset($products);
                for ($j = 0; $j < count($products); ++$j){  
                    $name = key($products);
                    if ($products[$name]['Quantity']>0){
                        $SaveString .= $name ."\t\t" . $products[$name]['Price'] ."\t\t". $products[$name]['Quantity'] .
                                        "\t" . $products[$name]['Total'] ."\r\n";
                    }
                    next($products);
                }
                $TimeStamp = date('Y_m_d_G_i');
                $SaveFileName  = "$Dir/order.$TimeStamp.txt";
                $fp = fopen($SaveFileName, "wb");
                if ($fp === FALSE){
                    echo "There was an error creating \"" . htmlentities($SaveFileName) . "\".<br />\n";                    
                }
                else {
                    if (flock($fp, LOCK_EX)) {
                        if (fwrite($fp, $SaveString)>0)
                            echo "Successfully wrote to file \"" . htmlentities($SaveFileName) . "\".<br />\n";
                        else
                            echo "There was an error writing to file \"" . htmlentities($SaveFileName) . "\".<br />\n";
                        flock($fp, LOCK_UN);
                    }
                    else{
                        echo "There was an error locking file \"" . htmlentities($SaveFileName) . 
                             " for writing\".<br />\n";
                    }
                fclose($fp);
                }   
            }
//Testing Ends Here
        }
    }
    else
        DisplayTable();
    ?>
    </body> 

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:52:22.010

我的编程“上帝”同学甚至不在我班上，他向我介绍了 PHP 和服务器端处理的工作原理。基本上，一旦完成处理，阵列就不会存在。当页面重新加载时，使用默认 NULL 值重新创建默认数组。我创建了几个函数并为 Calc 按钮和 Order 按钮运行计算，并且它可以正常工作。

# java - 无法初始化存储库...未知存储库格式“null”；预期为“0”

> ID：10068789
> 
> 赞同：0
> 
> 时间：2012-04-09T04:09:38.787
> 
> 标签：java, gwt, maven

当我尝试运行 Maven 安装我的 proejct 或运行我的应用程序时出现此错误

```
 Could not initialize repository... Unknown repository format "null"; expected "0" 
```

我刚刚从存储库导入项目，它开始显示这个错误我已经谷歌但没有运气。

这也是我的应用程序中的一个错误

```
The container 'Maven Dependencies' references non existing library 'C:\Users\wageeha junaid\git\Quran-Sementic-Search-Engine\qsse\target\javax.validation-validation-api-1.0.0.GA-sources.jar'  qsse        Build path  Build Path Problem

Could not initialize repository... (pl.project13.maven:git-commit-id- plugin:1.5:revision:default:generate-sources) pom.xml /qsse   line 315    Maven Build Problem 
```

知道可能是什么原因谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:19:23.143

在您导入 Eclipse 的每个项目中，Eclipse 在文件系统上创建一些文件 - `.project, .classpath`，文件夹`.settings`，...。似乎 Eclipse 没有正确更新这些。

答案是右键单击一个项目并选择`Maven/Update`快照。

# python - pysqlite 和 python：不会将数据插入表中，但代码执行得很好

> ID：10068790
> 
> 赞同：0
> 
> 时间：2012-04-09T04:09:41.890
> 
> 标签：python, sqlite, pysqlite

我正在尝试将一些数据插入到 pysqlite 数据库中，但即使代码运行良好且没有错误，数据库中也没有显示任何内容，并且我确保变量确实包含一个值

```
 cur = self.con.execute("insert into urllist(url) values('%s')" % seed) 
```

我已经仔细检查了表和列名，它们也是正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:48:25.307

你在打电话 con.commit() 吗？

除非在关闭连接之前使用此方法，否则显然更改会丢失。

[http://readthedocs.org/docs/pysqlite/en/latest/sqlite3.html](http://readthedocs.org/docs/pysqlite/en/latest/sqlite3.html)

# scala - 为什么 Scala 查询以单位返回？

> ID：10068793
> 
> 赞同：1
> 
> 时间：2012-04-09T04:09:56.590
> 
> 标签：scala

对从多个位置提取的某些数据运行 Squeryl 调用，但由于某种原因，它作为一个单元返回。如何让它作为 Iterable 返回？

下面是数据的拉取：

```
/**
   * gets a stream for a particular user
   */
  def getUserStream(userId:Long) {
    User.teamIds(userId).toList.map( (team) =>
      Stream.findByTeam(team,0,5).map( (stream) => 
        List(stream)
      ).flatten
    ).flatten.sortBy(_.id)
  } 
```

然后输出数据，结果返回为`Unit`：

```
Stream.getUserStream(userId) match {
      case results => {
        Ok( generate(results.map( (stream) => Map(
                "id" -> stream.id,
                "model" -> stream.model,
                "time" -> stream.time,
                "content" -> stream.content
                ))
            ) ).as("application/json")
      }
      case _ => Ok("")
    } 
```

我最初的猜测是一个函数可以返回一个无，但它不会只返回一个空列表吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T04:17:56.833

`def getUserStream(userId:Long)`您在方法正文之前缺少等号。

```
def func(x: Int) { x + 1 } // This will return Unit
def func(x: Int) = { x + 1 } // This will return a Int 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T06:08:31.603

添加一些可能有用的东西，说`def f(x: Int) {}`

相当于说`def f(x: Int): Unit = {}`

如果您没有声明返回类型（例如`def f(x: Int) = {}`），则将从您的方法体中推断出该类型。

一种保证您返回某种类型的技术是显式声明它。当您想要导出具有特定签名的公共接口时，您会执行此操作。这很重要，因为如果您让类型推断器完成所有工作，它可能会暴露出比您想要的更通用的抽象。

`def f(x: Int): List[User] = {} // This will not compile.`

# c# - 使用带有 MVC4 的高级集线器 api 的 SignalR 错误-“/echo/negotiate 404 Not Found Error”

> ID：10068794
> 
> 赞同：1
> 
> 时间：2012-04-09T04:10:06.090
> 
> 标签：c#, javascript, asp.net-mvc, signalr

我在 js 客户端上运行了一些非常基本的 SignalR 代码：

```
var conn = $.connection("@Url.Content("/echo")");

conn.Debug = function (msg) {
    console.log(msg);
};

conn.start(); 
```

这段代码执行并工作，除了我得到一个 404 错误。JS 试图访问[http://localhost:32344/echo/negotiate](http://localhost:32344/echo/negotiate)并且找不到它。如果我在没有“协商”的情况下点击 url，则请求完成。

我没有接触 Global.asax，服务器代码是最基本的，但是客户端还没有调用此代码：

```
public class SpatialHub : Hub
{
    public void Send(string data)
    {
        Caller.Debug("sent!");
    }
} 
```

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T04:59:17.830

您正在将“高级集线器”客户端服务器代码与“低级连接”客户端 API 混合。

按照此处的快速入门和端到端示例进行操作：

*   [连接](https://github.com/SignalR/SignalR/wiki/QuickStart-Persistent-Connections)
*   [集线器](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:12:13.420

我知道我哪里出错了。我一直在寻找解决不同问题的方法，并将两者混为一谈。但是，我了解到，如果方法调用立即发生，则必须在 hub.start 中包含方法调用：

```
$.connection.hub.start(function () {
     myhub.send('test');
}); 
```

# java - >>项目管理

> ID：10068798
> 
> 赞同：2
> 
> 时间：2012-04-09T04:10:37.997
> 
> 标签：java, backup, project, logging

我通常自己编写代码，但目前我需要和我的 8 个朋友一起做一个基于 Java 的 Web 项目。我想问以下问题：

1）如何正确**记录开发**？比如如何保存每日日志？有什么软件或格式推荐吗？您认为将哪些内容包含在日志中很重要？

2）如何一起**编码**？是否有任何软件/IDE 允许团队一起编码？像谷歌文档这样的东西？

3）如何**为团队项目做适当的备份**？有什么软件或技巧可以分享吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:15:33.917

协作编码：它不是你可以感谢协作编码的 IDE，它全部都在分布式源代码控制中......就像 git 或 mercurial。Svn 也适用于源代码控制，但不太适合协作。

备份：git 和 mercurial 解决了这个问题。

记录项目的进度最适合某种任务经理/项目经理。我使用 projo 项目管理器.. 主要是因为我编写了它。还有其他著名的应用程序，例如 basecamp 和竞争对手。

# html - 表格的 CSS 问题

> ID：10068801
> 
> 赞同：0
> 
> 时间：2012-04-09T04:11:02.687
> 
> 标签：html, css, css-tables

我有一个简单的问题：在我最新的[http://www.derekbeck.com/1775](http://www.derekbeck.com/1775)版本中，“最近更新”行是一个跨越三个单元格的表格单元格。（这个表格的三个单元格分别是左侧、中间的间隔和右侧。）您看到的线条是 CSS 设置的border-bottom。我想要在该行下方有更多间距，在下一行显示最近的第一个帖子之前。

我尝试通过将表格行设置为边距底部值来做到这一点，但没有任何反应。我对包含“最近更新”的表格单元格做了同样的事情，但仍然没有。padding-bottom 有效，但只是增加了“最近更新”和行之间的间距。我想要行之后的间距，在下一个表格行之前。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:15:50.983

不要将虚线边框放在单元格上，而是将其放在“最近更新”div上，然后通过设置增加表格单元格的大小`height: ##px`并使其具有`vertical-align: top;`（或`padding-bottom`在单元格上使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:52:07.957

只需在“最近更新”行之后添加一个空白表格行，如下所示：

```
<tr class="recentrow">
<td colspan="3" class="titlecell"><div align="center">Recent Updates</div></td>
</tr>
<tr><td colspan="3">&nbsp;</td></tr> 
```

`height: ##px`您可以通过设置空白行来增加间距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:06:42.270

我刚刚查看了您的网站，并通过在浏览器中使用 Firebug 对您的 CSS 进行了一些更改：

```
td.titlecell {
    border-bottom: 1px dotted #AAAAAA;
    padding: 0 0 15px;
} 
```

# java - 在 Java 中提取 XML 属性（ISBNDB）

> ID：10068805
> 
> 赞同：0
> 
> 时间：2012-04-09T04:11:25.497
> 
> 标签：java, android, xml, parsing

所以我正在编写一个需要从网络上获取图书价格数据的安卓应用程序。我发现 isbndb.com 似乎提供了很好的参考和价格比较。唯一的问题是他们的 xml 文件有点复杂。

我是用Java解析XML的新手，不太了解。我知道如何解析基本的 xml 文件。带有简单的标签。我通常使用 DocumentBuilder 和 DocumentBuilderFactory 但是这是我要解析的文件的一部分。

```
<Prices price_time="2012-04-08T20:05:49Z">
<Price store_isbn="" store_title="Discworld: Thief of Time" store_url="http://isbndb.com/x/book/thief_of_time/buy/isbn/ebay.html" store_id="ebay" currency_code="USD" is_in_stock="1" is_historic="0" check_time="2008-12-09T12:00:51Z" is_new="0" currency_rate="1" price="0.99"/>
<Price store_isbn="" store_title="" store_url="http://bookshop.blackwell.com/bobus/scripts/home.jsp?action=search&type=isbn&term=0061031321&source=1154376025" store_id="blackwell" currency_code="USD" is_in_stock="0" is_historic="0" is_new="1" check_time="2011-11-08T02:54:15Z" currency_rate="1" price="7.99"/> 
</Prices> 
```

我想要做的是获取属性值中的信息，例如 store_isbn 或 store_title。如果有人可以帮助我，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:32:57.467

您可以使用上面提到的[链接](http://mkyong.com/java/how-to-read-xml-file-in-java-sax-parser)来解析 xml 和检索属性值，您可以使用以下内容。

```
 public void startElement(String uri, String localName,String qName, 
            Attributes attributes) throws SAXException {

    System.out.println("Start Element :" + attributes.getValue("store_title"));

} 
```

attributes.getValue("store_title") 方法将用于解析属性值。希望它会有所帮助。

# c++ - 试图从类中调用函数

> ID：10068806
> 
> 赞同：0
> 
> 时间：2012-04-09T04:11:32.613
> 
> 标签：c++, function

我试图通过创建一个对象来执行 .h 文件中的代码。我做错了什么？

```
 //TicketFineCalculator.h
#include <iostream>
using namespace std;

class TicketFineCalculator
{

    public:
int getFine() {
        int procFee, zone, speedLimit, actualSpeed, totalFine;
     int anotherRun = 1;
     while (anotherRun == 1){
cout << "\n-------------------------------";
cout << "\nSpeeding Ticket Fine Calculator";
cout << "\n-------------------------------";
cout << "\nEnter processing fee, in dollars:";
cin >> procFee;
cout << "\nSpeeding Ticket #1";
cout << "\nEnter the type of speeding offense (1 for regular, 2 for work zone, 3 for residential district):";
cin >> zone;

cout << "\nEnter the speed limit, in miles per hour:";
cin >>  speedLimit;
cout << "\nEnter the vehicle's speed, in miles per hour:";
cin >> actualSpeed;
cout << "\nThe total fine is:" << totalFine;
cout << "\nEnter 1 to enter process another speeding ticket or 0 to quit:";
cin >> anotherRun;
     } // terminates while loop
return totalFine; 
        }
 // Calculate the total fine given the road zone, speed limit, and the vehicle's actual speed.
 // Return the fine as an integer.

};

//Project1.cpp
#include <iostream>
#include "TicketFineCalculator.h"

int totalFine;
TicketFineCalculator::getFine(totalFine);

    int main(){
    cout << totalFine;
return 0;
} //terminates main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:18:16.913

如果要在 TicketFineCalculator 中调用 getFine() 方法，则必须将方法声明为 static，如下所示：

```
class TicketFineCalculator
{
public:
    static getFine()
    {
    }
}; 
```

或者您必须创建一个 TicketFineCalculator 实例并使用该实例调用该方法。

# cakephp - 如何将 cakephp 从 1.3 升级到 2.1？

> ID：10068809
> 
> 赞同：0
> 
> 时间：2012-04-09T04:12:03.530
> 
> 标签：cakephp, cakephp-1.3, cakephp-2.0

我是 cakephp 的新手，我正在尝试将 cakephp 升级到最新版本。我在我的电脑上安装了新的 cakephp 1.3 并将其升级到 cakephp 2.1。

我使用 shell 进行升级，但是在运行“upgrade all”命令后，我看到了两个错误：

> `Warning Error: chmod(): Operation not permitted in [/var/www/cakephp-1.3/lib/Cake/Utility/Folder.php, line 639]`
> 
> `Warning Error: touch(): Utime failed: Operation not permitted in [/var/www/cakephp-1.3/lib/Cake/Utility/Folder.php, line 640]`

我认为它已经升级完成。因为我看到来自终端的消息是这样的：

> 完成更新 /var/www/cakephp-1.3/app/Console/cake.php
> 
> 完成更新 /var/www/cakephp-1.3/app/Console/Command/AppShell.php
> 
> 运行组件
> 
> 运行异常

然后我刷新我的应用程序，我得到了一些错误： http: [//flic.kr/p/bwUpwY](http://flic.kr/p/bwUpwY)

然后我删除 'cake' 目录，错误信息变了：http: [//flic.kr/p/bKP7Te](http://flic.kr/p/bKP7Te)

所以现在我不知道下一步该做什么，因为我做了很多方法，但仍然没有成功。所以有人请告诉我我做错了什么以及如何成功升级cakephp。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:22:15.283

看起来您在 CakePHP 迁移脚本期望可写的某些目录上存在权限问题。

这可能会导致某些部分的迁移失败，并在完成后留下部分损坏的安装。

# javascript - 如何优化画布中的像素编辑

> ID：10068812
> 
> 赞同：0
> 
> 时间：2012-04-09T04:12:22.250
> 
> 标签：javascript, html, animation, canvas, pixel-manipulation

我尝试在 JavaScript cnavas 中制作一些图片动画，所以我必须使用像素进行操作，但问题是像素的遍历数组需要大量时间，上下文的本机函数执行速度要快得多。

该测试表明：

```
 <canvas width="600" height="400" id="canvas"></canvas>
<script type="text/javascript">
ctx = document.getElementById('canvas').getContext("2d");
// Test 1
var date1 = new Date();
ctx.fillRect(100, 100, 200, 200);
// Test 2
var date2 = new Date();
var imageData = ctx.getImageData(0, 0, 600, 400);
var i, j, p;
for(i = 100; i < 300; ++i)
    for(j = 100; j < 300; ++j) {
        p = (i * 600 + j) * 4;
        imageData.data[p] = 0;
        imageData.data[p + 1] = 0;
        imageData.data[p + 2] = 0;
        imageData.data[p + 3] = 255;
    }
ctx.putImageData(imageData, 0, 0);
// Test 3
var date3 = new Date();
var imageData = ctx.getImageData(100, 100, 200, 200);
var i, j, p;
for(i = 0; i < 200; ++i)
    for(j = 0; j < 200; ++j) {
        p = (i * 200 + j) * 4;
        imageData.data[p] = 0;
        imageData.data[p + 1] = 0;
        imageData.data[p + 2] = 0;
        imageData.data[p + 3] = 255;
    }
ctx.putImageData(imageData, 100, 100);
var date4 = new Date();

alert("fillRect: " + (date2.getTime() - date1.getTime()) + "\ngetImageData(full): " + (date3.getTime() - date2.getTime()) + "\ngetImageData(part): " + (date4.getTime() - date3.getTime()));
</script> 
```

近似结果为：0、14、12。

为什么会发生？手动更改像素的最快方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:31:41.480

Have a look at: [Faster Canvas Pixel Manipulation with Typed Arrays](http://hacks.mozilla.org/2011/12/faster-canvas-pixel-manipulation-with-typed-arrays/)

And [here](http://jsperf.com/canvas-pixel-manipulation) you can run the benchmark yourself.

# iphone - 在 CCSprite 子类中调用 self.addChild 时 iPhone 应用程序崩溃 ..？

> ID：10068813
> 
> 赞同：1
> 
> 时间：2012-04-09T04:12:47.697
> 
> 标签：iphone, crash, subclass, ccsprite, addchild

我已经下载了ABC开源并将源代码转成cocos2d 1.01。现在我遇到了初始化 Sprite 子类的问题。（我的子类是@interface OrbSprite：CCSprite）

此代码是无限循环和较旧的 cocos2d 版本。

```
-(id) init {
self = [super init];

if (self)
{
    [self initWithFile:@"bubble1.png"];
    Animation *bub = [Animation animationWithName:@"bubble" delay:0 images:@"bubble1.png", @"bubble2.png", nil];
    self.bubble = bub;
    [bub release];

    [self addAnimation:bubble];

    Label *l = [[Label alloc] initWithString:@"" dimensions:CGSizeMake(45, 45) alignment:UITextAlignmentCenter
                            fontName:@"Arial Rounded MT Bold" fontSize:18];
    self.label = l;
    [l release];

}

return self;  } 
```

我搜索了一个解决方案，可以通过更改init方法的名称来解决。

```
-(id) initWithBubbleImage { 

if ((self = [super initWithFile :@"bubble1.png"]))
{
    NSLog(@"OrbSprite init in if self Method");

    bubblea = [NSArray arrayWithObjects:@"bubble1.png",@"bubble2.png",nil];

bub = [CCAnimation animationWithFrames:bubblea delay:0 ];
    [[CCAnimationCache sharedAnimationCache] addAnimation:bub name:@"bubbleAnim"];
    self.bubble = bub;
    [bub release];

label = [[CCLabelTTF alloc] initWithString:@"" dimensions:CGSizeMake(45, 45) alignment:UITextAlignmentCenter
                fontName:@"Arial Rounded MT Bold" fontSize:18];
}
return self;  } 
```

？？？问题是，当已经更改初始化名称时，我在*同一子类中的“ -(void) setLabelStr:(NSString ) str ”中发现 addChild: 在调试区域中出错.. " ** * Assertion failure in -[OrbSprite addChild: ]”和“由于未捕获的异常‘NSInternalInconsistencyException’而终止应用程序，原因：‘参数必须为非零’”

这是同一子类中的方法

```
- (void) setLabelStr:(NSString *) str  {
[label setString:str];
[self addChild:label];
[label setAnchorPoint:ccp(0, 13)];  } 
```

任何人都请帮助我.......非常感谢。

==================================================== ====================

# 编辑——编辑——编辑——编辑——编辑——编辑

我已经这样做了作为答复。但仍然不起作用 听到的是 .h 和 .m 代码

> ## **OrbSprite.h**
> 
> 这是代码

```
#import "cocos2d.h"
@interface OrbSprite : CCSprite   
{
CCLabelTTF *label;
CCAnimation *bubble;
BOOL isBubble;
BOOL isHidden;
int order;

CCSequence *popSequence;   
}
@property (nonatomic, retain) CCLabelTTF *label;
@property (nonatomic, retain) CCSequence *popSequence;
@property (nonatomic, retain) CCAnimation *bubble;
@property (nonatomic, retain) NSArray *bubblea;
@property (readwrite) BOOL isBubble;
@property (readwrite) BOOL isHidden;
@property (readwrite) int order;
-(id)initWithBubbleImage;
- (void) pop;
- (void) setLabelStr:(NSString *) str;
- (void) showBubble;
- (void) reset;
@end 
```

> ## **OrbSprite.m**
> 
> 这是代码

```
#import "OrbSprite.h"
@implementation OrbSprite
@synthesize bubble;
@synthesize label;
@synthesize isBubble;
@synthesize isHidden;
@synthesize popSequence;
@synthesize order;
@synthesize bubblea;

-(id) initWithBubbleImage { 

if ((self = [super initWithFile:@"bubble1.png"]))
{

    bubblea = [NSArray arrayWithObjects:@"bubble1.png",@"bubble2.png",nil];

    bubble= [CCAnimation animationWithFrames:bubblea delay:0 ];
    [[CCAnimationCache sharedAnimationCache] addAnimation:bub name:@"bubbleAnim"]; 

    label = [[CCLabelTTF alloc] initWithString:@"" dimensions:CGSizeMake(45, 45)
    alignment:UITextAlignmentCenter fontName:@"Arial Rounded MT Bold" fontSize:18];
    }
return self;
}

- (void) pop {
isBubble = NO;
popSequence = [CCSequence actions:[CCScaleTo actionWithDuration:.1 scale:.5],
    [CCScaleTo actionWithDuration:.1 scale:2], [CCCallFunc actionWithTarget:self 
    selector:@selector(finishedPopSequence)], nil];
[self runAction:popSequence];
}

- (void) finishedPopSequence {
self.scale = 1;
[self setDisplayFrameWithAnimationName:@"bubble" index:0];  }

- (void) reset  {
self.scale = 1;
[self setDisplayFrameWithAnimationName:@"bubble" index:0]; }

- (void)showBubble  {
    isBubble = YES;
    [self removeChild:label cleanup:NO];
    [self setDisplayFrameWithAnimationName:@"bubbleAnim" index:1];
    self.scale = .5;
    id Orbshowscale = [CCScaleTo actionWithDuration:1 scale:1.5];
    id Orbshowscale2= [CCScaleTo actionWithDuration:.1 scale:1];
    [self runAction:[CCSequence actions:Orbshowscale,Orbshowscale2 , nil]];  }

- (void) setLabelStr:(NSString *) str {
[label setString:str];
[self addChild:label]; //<<< *** Assertion failure in -[OrbSprite addChild:]
[label setAnchorPoint:ccp(0, 13)];  }

@end 
```

我已经解决了过度发布问题..但它仍然不起作用..

也发现同样的问题是

### ***-[OrbSprite addChild:] 中的断言失败

### ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“参数必须为非零”

感谢所有善良的人...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:32:47.733

Looks as if you're over-releasing the variable "bub" in your init method. You don't create it via an alloc or create method call, so you shouldn't be releasing it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:31:26.720

使用 Alloc，然后释放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T05:20:42.793

你已经分配`bub`给`self.bubble`然后你释放`bub`。两者都指向同一个地址。同样的情况也发生在`self.label`. 试试这种方式：

```
-(id) init {
self = [super init];

if (self)
{
[self initWithFile:@"bubble1.png"];
Animation *bub = [Animation animationWithName:@"bubble" delay:0 images:@"bubble1.png", @"bubble2.png", nil];
self.bubble = bub;
//[bub release]; <-- This shouldn't be done

[self addAnimation:bubble];

Label *l = [[Label alloc] initWithString:@"" dimensions:CGSizeMake(45, 45) alignment:UITextAlignmentCenter
                        fontName:@"Arial Rounded MT Bold" fontSize:18];
self.label = l;
//[l release]; <-- This shouldn't be done

}
return self;  } 
```

**编辑-试试**这个-

```
[self addChild:self.label]; //<<< *** Assertion failure in -[OrbSprite addChild:] 
```

# android - 从android访问soap服务

> ID：10068814
> 
> 赞同：0
> 
> 时间：2012-04-09T04:12:51.860
> 
> 标签：android, soap

这是对我发布的[Android 访问肥皂服务](https://stackoverflow.com/questions/10052020/android-accesing-soap-service)问题的跟进。经过大量调试和使用wireshark后，我意识到这就是发送的内容。

```
 POST /GetGoldPrice.asmx HTTP/1.1 
user-agent: kSOAP/2.0 
soapaction: http://freewebservicesx.com/GetCurrentGoldPrice 
content-type: text/xml 
connection: close 
content-length: 475 
Host: www.freewebservicesx.com 

<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header /><v:Body>
<GetCurrentGoldPrice xmlns="http://www.freewebservicesx.com/" id="o0" c:root="1">
<UserName i:type="d:string">username</UserName>
<Password i:type="d:string">111</Password></GetCurrentGoldPrice></v:Body></v:Envelope> 
HTTP/1.1 500 Internal Server Error 
Connection: close 
Date: Mon, 09 Apr 2012 04:38:50 GMT 
Server: Microsoft-IIS/6.0 
X-Powered-By: ASP.NET 
X-AspNet-Version: 2.0.50727 
Cache-Control: private 
Content-Type: text/xml; charset=utf-8 
Content-Length: 753 
```

错误响应

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body><soap:Fault><faultcode>soap:Server</faultcode>
<faultstring>System.Web.Services.Protocols.SoapException: Server was unable to process request. ---&gt; System.ArgumentNullException: Value cannot be null. 
Parameter name: password 
   at System.Web.Security.FormsAuthentication.HashPasswordForStoringInConfigFile(String password, String passwordFormat) 
   at GetGoldPrice.GetCurrentGoldPrice(String UserName, String Password) 
   --- End of inner exception stack trace ---</faultstring><detail /></soap:Fault></soap:Body></soap:Envelope> 
```

网站期望的详细信息。

[http://www.freewebservicesx.com/GetGoldPrice.asmx?op=GetCurrentGoldPrice](http://www.freewebservicesx.com/GetGoldPrice.asmx?op=GetCurrentGoldPrice)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:17:43.373

XML 区分大小写。改变

> <密码>

到

> <密码>

适用于任何地方。请参阅下面的标签定义。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetCurrentGoldPrice xmlns="http://freewebservicesx.com/">
      <UserName>string</UserName>
      <Password>string</Password>
    </GetCurrentGoldPrice>
  </soap:Body>
</soap:Envelope> 
```

编辑：是的，我假设您正确关闭了 <UserName> 标记，并且问题是一个错字。

最新编辑：通过 ASP.Net C# 尝试示例后，我能够在发送以下 XML 时得到响应。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetCurrentGoldPrice xmlns="http://freewebservicesx.com/">
      <UserName>username</UserName>
      <Password>password</Password>
    </GetCurrentGoldPrice>
  </soap:Body>
</soap:Envelope> 
```

我得到的回应是：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <GetCurrentGoldPriceResponse xmlns="http://freewebservicesx.com/">

      <GetCurrentGoldPriceResult>
        <string>0</string>
        <string>JAN 2, 2000 00:-00 PM EST</string>
        <string>+0.0</string>
      </GetCurrentGoldPriceResult>
    </GetCurrentGoldPriceResponse>
  </soap:Body>
</soap:Envelope> 
```

当用户名和密码不正确时，我认为这是一个相关的响应。您可以通过从 Android 生成类似请求来进行检查吗？

编辑：添加了有关如何将 XML 从 Android 发布到 Web 服务的链接。参考：[Android，通过 HTTP POST (SOAP) 发送 XML](https://stackoverflow.com/questions/2559948/android-sending-xml-via-http-post-soap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:05:15.887

```
<webServices>
  <protocols>
    <add name="HttpGet"/>
    <add name="HttpPost"/>
  </protocols>
</webServices> 
```

将此添加到标签中的`web.config`文件`system.web`

# r - R 使用 apply/plyr 和 RQuantlib 函数

> ID：10068817
> 
> 赞同：4
> 
> 时间：2012-04-09T04:14:30.333
> 
> 标签：r, plyr

我在数据框中有一个数据集，其中包含以下信息：

```
> head(rs1)
       dater adjStkPrice                optSym     expire strike   bid   ask unadjStkPrice daysLeft   pnl
1 2011-01-03      127.05 SPY   131221P00115000 2013-12-21    115 14.89 15.40        127.05     1083 319.5
2 2011-01-04      126.98 SPY   131221P00115000 2013-12-21    115 15.00 15.39        126.98     1082 328.4
3 2011-01-05      127.64 SPY   131221P00115000 2013-12-21    115 14.39 14.86        127.64     1081 287.2
4 2011-01-06      127.39 SPY   131221P00115000 2013-12-21    115 14.38 14.80        127.39     1080 278.7
5 2011-01-07      127.14 SPY   131221P00115000 2013-12-21    115 14.67 15.10        127.14     1079 300.2
6 2011-01-10      126.98 SPY   131221P00115000 2013-12-21    115 14.75 15.19        126.98     1076 303.4 
```

我正在尝试使用包`AmericanOptionImpliedVolatility`中的函数来获得隐含波动率`RQuantLib`。问题是它似乎只采用单组值：

```
> rs1$impVol <- AmericanOptionImpliedVolatility("put", rs1$ask,
+ rs1$adjStkPrice, rs1$strike, .02, .05, rs1$daysLeft/ 365, .4)$impliedVol
Error in AmericanOptionImpliedVolatility.default("put", rs1$ask, rs1$adjStkPrice,  : 
  expecting a single value 
```

我认为这是该`apply`功能的一个地方，但我不确定我是否正确使用它：

```
> rs1$impVol <- apply(rs1, 1, AmericanOptionImpliedVolatility("put", rs1$ask,
+ rs1$adjStkPrice, rs1$strike, .02, .05, rs1$daysLeft/ 365, .4)$impliedVol)
Error in AmericanOptionImpliedVolatility.default("put", rs1$ask, rs1$adjStkPrice,  : 
  expecting a single value 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T06:26:19.257

您可以使用`Vectorize`或`mapply`。

```
Vectorize(AmericanOptionImpliedVolatility)(
  type="put", value=15:16, underlying=130:131, 
  strike=115, dividendYield=.02, riskFreeRate=.05, maturity=1, 
  volatility=.1
)

mapply(
  AmericanOptionImpliedVolatility,
  type="put", value=15:16, underlying=130:131, 
  strike=115, dividendYield=.02, riskFreeRate=.05, maturity=1, 
  volatility=.1
) 
```

如果你想使用`apply`，它的第三个参数应该是一个函数。此外，它会将每一行转换为一个向量，当某些列包含字符串时，这是有问题的。

您也可以`sapply`在行号上使用，但它只是一个变相的循环，比`mapply`.

```
sapply(
  seq_len(nrows(rs1)),
  function(i) AmericanOptionImpliedVolatility( 
    type="put", 
    value=rs1$ask[i],
   ... (add the other arguments)
  )
) 
```

# java - 准备好发布的java程序

> ID：10068820
> 
> 赞同：1
> 
> 时间：2012-04-09T04:15:10.003
> 
> 标签：java, compilation, package

我需要帮助让我的 java 程序准备好发布。我有一个程序，每个包中的三个包都是类。在一个包中是带有 main 的类，它在运行时需要所有其他类。我的问题是如何构建这个 Java 项目，以便任何人都可以运行它。文件结构如下：

*   src/table/java 文件
*   src/学校/java文件
*   src/schoolSort/java 文件

主要位于`schoolSort/Main.java`我设置了 Windows 7 并且我尝试过：

```
javac table/*.* school/*.* schoolSort/*.* 
```

这产生了类文件，但主文件不会运行。请帮忙。我正在使用 Eclipse 并且也尝试过，但它似乎没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:24:11.250

在 Eclipse 中，您可以右键单击您的项目并选择将其导出为可执行 jar。它会询问你的主类（通过你使用的运行配置），你应该从那里开始。

右键单击项目 > 导出 > Java > 可运行 Jar 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:22:40.233

您必须创建所谓的可执行 jar。这是您将与他人分享的神器。

[这](http://www.cs.usfca.edu/~parrt/course/601/lectures/java.tools.html)是创建 jar 必须遵循的一组基本步骤

[这](http://www.skylit.com/javamethods/faqs/createjar.html)是创建可执行 jar 的一组步骤。

我确信 eclipse 会帮助你完成这些步骤，但我并没有使用太多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:29:06.437

在 Eclipse 中，你可以执行 File->Export->Java->Runnable JAR file...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T04:53:03.663

检查您的包是否在类路径中。如果你的包在类路径中，你应该尝试使用 'ant' 来构建你的应用程序。

# php - 将 PHP 字符串发送到 C++

> ID：10068826
> 
> 赞同：0
> 
> 时间：2012-04-09T04:16:33.363
> 
> 标签：php, c++

我试图从 php 传递一个字符串到 C++，我设法弄清楚如何传递数字，但它不适用于字母。这是我拥有的适用于 PHP 的内容

```
<?php 

$r = 5; 
$s =  12;
$x= 3;  
$y= 4; 
$q= "Hello World"; 
$c_output=`project1.exe $r $s $x $y $q`; // pass in the value to the c++ prog 
echo "<pre>$c_output</pre>"; //received the sum 
 //modify the value in php and output 
echo "output from C++ programm is" . ($c_output + 1);

?> 
```

这会将变量 r、s、x、y 和 q 发送到 C++ 程序 project1.exe 和 IT WORKS，但问题是它不适用于字符串变量 $q。

这是我在 C++ 程序中的代码，很简单：

```
#include<iostream> 
#include<cstdlib> 
#include<string>
using namespace std;
int main(int in, char* argv[]) { 
 int val[2]; 
 for(int i = 1; i < in; i++) { // retrieve the value from php 
  val[i-1] = atoi(argv[i]); 
 }  
 double r = val[0];
double s = val[1];
double x = val[2];
double y = val[3];

double q = val[4]; // here's the problem, as soon as i try to define val[4] as a string or char, it screws up
 cout << r;
 cout <<s;
cout << x;
cout << y;
cout << q;

  // will output to php 
 return 0; 

 } 
```

它有效，但是对于我从 PHP 通过 $q 传递的字符串“Hello world”并没有给我返回字符串（我知道它被定义为双精度，但是一旦我尝试将其更改为字符串或char 变量，代码无法编译）。

请向我解释我必须如何解决这个问题，以便可以将 $q 作为字符串处理。仅供参考，我是编程新手（6 个月）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:25:29.670

它不适用于字母，因为您正在`atoi(..)`C++ 程序中执行（将字符字符串转换为整数）。

有一些方法可以让程序知道会发生什么——无论是数字还是字符串。可能是第一个参数可以帮助程序区分，可能如下：

```
$c_output = `project1.exe nnsnns 1 2 string1 3 4 string2` 
```

然后你可以这样做：

```
for(int i = 0/*NOTE*/,len=strlen(argv[1]); i < len; i++) { // retrieve the value from php 
    if (argv[1][i] == 'n'){
         //argv[2+i] must be an integer
    }else if (argv[1][i] == 's'){
        //argv[2+i] is a string
    }
} 
```

当然，您应该检查是否`(strlen(argv[1]) == in-2)`.

顺便说一句，在上面的 C++ 代码中，`val`是一个包含 2 个整数的数组；并且您正在尝试访问超出索引 1 的内容。

* * *

要将单个字符串传递给 C++，您可以执行以下操作：

```
$output = `project1.exe $q`; //Read below. 
```

**注意**：`$q`必须是一个单词。没有空格，没有额外的字符，如 '|'、'&' 或任何其他 shell 可能会以不同方式解释的字符。`$q`在将其传递给 C++ 程序之前必须是干净的。如果 $q 不止一个单词，请使用引号。

C++ 部分（只需尝试以下，然后您可以随时修改）

```
cout<<argv[1]<<endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:26:53.053

尽量不要使用 atoi(argv[i]) 转换最后一个参数。只需将其保留为 argv[i]。

```
for(int i = 1; i < in-1; i++)
{
    val[i-1] = atoi(argv[i]); 
}
q = argv[i]; 
```

# android - 使用给定单词列表的 Android 语音识别（在搜索小部件中）

> ID：10068828
> 
> 赞同：1
> 
> 时间：2012-04-09T04:16:54.113
> 
> 标签：android, search, voice-recognition

是否可以限制语音搜索搜索小部件以查找靠近给定单词集的匹配项。例如，如果我使用它来搜索名称列表，则它没有意义，因为名称通常会被更正为某些单词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-06T08:39:11.397

如果您使用来自 Nuance（DragonDictate 背后的人）的第 3 方 Android 识别，它支持“语法模式”，您可以在此限制在识别过程中识别的短语。

重要的是，如果您将不寻常的名称添加到自定义词汇表中，它们应该变得可识别（除了复杂的发音问题）

您可以通过以下方式找到信息：http: [//dragonmobile.nuancemobiledeveloper.com](http://dragonmobile.nuancemobiledeveloper.com)，寻找“自定义词汇”。语法模式本质上是自定义词汇表的一种特殊模式。

在撰写本文时，这里有一个文档提到了语法模式： [http](http://dragonmobile.nuancemobiledeveloper.com/downloads/custom_vocabulary/Guide_to_Custom_Vocabularies_v1.5.pdf) ://dragonmobile.nuancemobiledeveloper.com/downloads/custom_vocabulary/Guide_to_Custom_Vocabularies_v1.5.pdf - 只有当你尝试进步时，它才会真正变得清晰他们的配置 Web GUI。

您必须设置一个帐户，并跳过其他环节，但有一个免费层级。这是我发现限制识别词汇的唯一潜在方法。好吧，没有运行 PocketSphinx，但这仍然被描述为“研究”“PreAlpha”。

不，我不为 Nuance 工作。不确定是否有人这样做。他们可能都被僵尸吃掉了。你会猜到阅读他们的支持论坛。他们从不回复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:00:53.370

不，不幸的是，这是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T08:26:36.183

您还可以查看 AT&T 的认可度。他们有一个功能非常丰富的 Web API，包括完整的语法支持。我最近才知道！

每月免费 1,000,000 笔交易。慷慨的！

寻找“AT&T API 计划”。奇怪的名字。

撰写本文时的链接：http: [//developer.att.com/apis/speech](http://developer.att.com/apis/speech)

对我来说不幸的是，在撰写本文时没有澳大利亚口音语言模型。只有美国和英国英语。嘘。

编辑：在我提交上述内容几个月后，AT&T 停用了上述服务。似乎每个人都只想要一个“简单的”API，你只需调用一个识别器，它就会返回单词。当然，这当然是圣杯，但设计得当、受约束的语法通常会更好。作为具有语音技能的人，当今常见语音 API 的极简主义真的令人沮丧......

# iphone - 在iphone中阻止类的委托方法

> ID：10068829
> 
> 赞同：0
> 
> 时间：2012-04-09T04:16:54.917
> 
> 标签：iphone, uitextfield, uitextfielddelegate

我有一个问题，我正在研究 UITextField 的子类。它将在许多课程中进一步使用。但我不想让用户以任何方式使用它的委托方法。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:59:50.223

覆盖`setDelegate:`，以便它抛出异常或记录关于做什么的指令。这样您的 API 用户就会知道实际发生了什么。

```
-(void) setDelegate: (id <UITextFieldDelegate>) delegate
{
    NSLog(@"*** Use the blocks API instead of calling %s", __PRETTY_FUNCTION__);
    [self doesNotRecognizeSelector: _cmd];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T04:31:35.157

覆盖该`-setDelegate:`方法，使其从不实际设置委托。您可以只提供一个无法调用的空方法`super`：

```
-(void) setDelegate:(id<UITextFieldDelegate>) delegate
{
    // this method intentionally empty to prevent a delegate from ever being set
} 
```

# jsf-2 - JSF2 使用 JSF + PrettyFaces 处理导航和 bean 操作时，Java Web 应用程序出现问题。 使用版本： JSF - 2.1 PrettyFaces - 3.3.3< 问问题 问问题 2012-04-09T04:17:30.457 2061 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 使用 JSF + PrettyFaces 处理导航和 bean 操作时，Java Web 应用程序出现问题。 使用版本： JSF - 2.1 PrettyFaces - 3.3.3 使用来自链接的 PrettyFaces Filter 处理导航时发生错误：<pretty:link mappingid="viewProduct">![](#{request.contextPath}/image?id=#{product.mainImage.fileReference.id}) <f:param value="#{productMB.filters.productCategoryName}"><f:param value="#{product.name}"></f:param></f:param></pretty:link> pretty-config.xml 映射是： <url-mapping id="viewProduct"><pattern value="/shop/product/#{ productCategoryName : productMB.filters.productCategoryName }/#{ productName : productMB.filters.productName }/"><view-id value="/pages/productDetails.faces"><action>#{productMB.openProductDetails}</action></view-id></pattern></url-mapping> 豆行动： public String openProductDetails() { if (filters.getProductCategoryName() != null && !filters.getProductName().equals("")) { loadProductDetailsByName(filters.getProductCategoryName()); } return "/pages/productDetails.faces"; } 用户登陆产品详细信息页面，在那里他可以选择颜色、尺寸等产品功能... <ui:fragment rendered="#{productMB.productVO.featureColorAvailable}">#{msg.color} <h:selectonemenu id="colorSelect" value="#{productMB.productVO.colorSelected}" valuechangelistener="#{productMB.colorSelectedValueChanged}"><f:selectitem itemlabel="#{msg['select']}" noselectionoption="true"><f:selectitems value="#{productMB.productFeatureAvailableApplMap['color']}" var="colorItem" itemvalue="#{colorItem}" itemlabel="#{msg[colorItem.name]}"><f:ajax event="valueChange" listener="#{productMB.colorSelectedValueChanged}" render="@this productDetailImage productSubImage productSubImage2 productSubImage3 sizeSelect"></f:ajax></f:selectitems></f:selectitem></h:selectonemenu></ui:fragment>//... Bean 动作方法 public void colorSelectedValueChanged(ValueChangeEvent event) { if (null != event.getNewValue()) { ProductFeatureAppl prodFeatureAppl = (ProductFeatureAppl) event.getNewValue(); filterProductFeatureSelectItem(AppConstants.SIZE, prodFeatureAppl.getProductFeature().getName() ); } else { filterProductFeatureSelectItem(AppConstants.SIZE, null ); } } public void colorSelectedValueChanged(AjaxBehaviorEvent event) throws javax.faces.event.AbortProcessingException { try { if (null != productVO.getColorSelected()) { ProductFeatureAppl prodFeatureAppl = productVO.getColorSelected(); filterProductFeatureSelectItem(AppConstants.SIZE, prodFeatureAppl.getProductFeature().getName() ); String prodFeatName = prodFeatureAppl.getProductFeature().getName(); // switch selected pics. productVO.setCurrentDetailImageName(productVO.getProduct().getProductImageByTypeAndFeatureName( NameConstants.DETAIL, prodFeatName).getFileReference().getId()); productVO.setCurrentBigImageName(productVO.getProduct().getProductImageByTypeAndFeatureName( NameConstants.BIG, prodFeatName).getFileReference().getId()); } else { filterProductFeatureSelectItem(AppConstants.SIZE, null ); filterProductFeatureSelectItem(AppConstants.COLOR, null ); // reset to default productVO.setCurrentDetailImageName(productVO.getProduct().getProductImageByType(ProductImageType.DETAIL1.toString()).getFileReference().getId()); productVO.setCurrentBigImageName(productVO.getProduct().getProductImageByType(ProductImageType.BIG1.toString()).getFileReference().getId()); } } catch (Exception ex) { addErrorMessage(getMessage("error")); if (screenComponent.isDisplayException()) { addErrorMessage(ex.getMessage()); } } } 在第一次导航到产品详细信息页面后，无论何时从 selectOneMenu id="colorSelect" 中选择一个值，都不会调用 valueChangeListener 和 ajax 侦听器。除此之外，还调用了 productMB.openProductDetails 操作。 ajax 调用已完成，我在日志中没有看到任何错误，但没有调用任何侦听器方法。有人知道为什么会跳过这些 JSF ajax 侦听器吗？ 提前致谢。 或者，您可以使用后缀格式。 <%= "Hello World!" if true %> jsf-2servlet-filtersprettyfaces 4 1 回答 1 This answer is useful 1 如果您直接从 URL 访问该页面是否有效？如果 PrettyFaces 被禁用，它会起作用吗？ 我怀疑这是链接或 PrettyFaces 的问题。我打赌它与 AJAX 和部分状态保存有更多关系。 它可能与此有关： public String openProductDetails() { if (filters.getProductCategoryName() != null && !filters.getProductName().equals("")) { loadProductDetailsByName(filters.getProductCategoryName()); } return "/pages/productDetails.faces"; // why is this being returned? } 您正在那里返回一个页面名称。PrettyFaces 实际上可能会尝试在此字符串上导航。如果您希望显示您在映射中配置的页面，只需返回 null、返回 "" 空字符串或不返回任何内容。 希望这可以帮助。 于 2012-04-10T15:01:59.213 回答 Related 1 scala - FoldRight 函数 2 jquery - 如何在我的私人博客中显示代码块 1 c# - 以编程方式滚动 .NET 浏览器窗口 1 ruby-on-rails - 如何为开发和登台环境正确配置 mongoid？ 1 javascript - 如何获取 Ext.form.field.ComboBox 中选中项的索引？ 1 asp.net - PageLoad 中的客户端计算机（浏览器）属性 2 matlab - 如何从 Scope (Simulink) 获得最大值 1 jndi - Jetty 8（嵌入式）与 HSQLDB 数据源 1 wordpress - 显示来自 wp_nav_menu 的帖子内容？ 2 java - Apache POI 率公式与长时间不一致 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10068833
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jsf-2, servlet-filters, prettyfaces

使用 JSF + PrettyFaces 处理导航和 bean 操作时，Java Web 应用程序出现问题。

使用版本：

JSF - 2.1
PrettyFaces - 3.3.3

使用来自链接的 PrettyFaces Filter 处理导航时发生错误：

```
 <div class="product_img">
                <pretty:link mappingId="viewProduct">
                    <img src="#{request.contextPath}/image?id=#{product.mainImage.fileReference.id}" />                                             
                    <f:param value="#{productMB.filters.productCategoryName}" />
                    <f:param value="#{product.name}" />                                                                         
                </pretty:link>                                                   
             </div> 
```

pretty-config.xml 映射是：

```
 <url-mapping id="viewProduct">
      <pattern value="/shop/product/#{ productCategoryName : productMB.filters.productCategoryName }/#{ productName : productMB.filters.productName }/" />
      <view-id value="/pages/productDetails.faces" />
      <action>#{productMB.openProductDetails}</action>
  </url-mapping> 
```

豆行动：

```
public String openProductDetails() {

    if (filters.getProductCategoryName() != null && !filters.getProductName().equals("")) {         
        loadProductDetailsByName(filters.getProductCategoryName());
    }

    return "/pages/productDetails.faces";
} 
```

用户登陆产品详细信息页面，在那里他可以选择颜色、尺寸等产品功能...

```
 <ui:fragment rendered="#{productMB.productVO.featureColorAvailable}">
        <span class="productFeatureLabel">#{msg.color}</span>

        <h:selectOneMenu id="colorSelect"
            value="#{productMB.productVO.colorSelected}"
            valueChangeListener="#{productMB.colorSelectedValueChanged}">
            <f:selectItem itemLabel="#{msg['select']}" noSelectionOption="true" />
            <f:selectItems value="#{productMB.productFeatureAvailableApplMap['color']}" var="colorItem" itemValue="#{colorItem}"
                itemLabel="#{msg[colorItem.name]}"  />
            <f:ajax event="valueChange"             
            listener="#{productMB.colorSelectedValueChanged}"   
                render="@this productDetailImage productSubImage productSubImage2 productSubImage3 sizeSelect"></f:ajax>
        </h:selectOneMenu>      
    </ui:fragment> 
```

//... Bean 动作方法

```
 public void colorSelectedValueChanged(ValueChangeEvent event) {

        if (null != event.getNewValue()) {
            ProductFeatureAppl prodFeatureAppl = (ProductFeatureAppl) event.getNewValue();
            filterProductFeatureSelectItem(AppConstants.SIZE, prodFeatureAppl.getProductFeature().getName() );
        } else {
            filterProductFeatureSelectItem(AppConstants.SIZE, null );
        }
    }   

  public void colorSelectedValueChanged(AjaxBehaviorEvent event) throws javax.faces.event.AbortProcessingException {

      try {
            if (null != productVO.getColorSelected()) {
                ProductFeatureAppl prodFeatureAppl = productVO.getColorSelected(); 
                filterProductFeatureSelectItem(AppConstants.SIZE, prodFeatureAppl.getProductFeature().getName() );

                String prodFeatName = prodFeatureAppl.getProductFeature().getName();

                // switch selected pics.
                productVO.setCurrentDetailImageName(productVO.getProduct().getProductImageByTypeAndFeatureName(
                        NameConstants.DETAIL, prodFeatName).getFileReference().getId());

                productVO.setCurrentBigImageName(productVO.getProduct().getProductImageByTypeAndFeatureName(
                        NameConstants.BIG, prodFeatName).getFileReference().getId());

            } else {
                filterProductFeatureSelectItem(AppConstants.SIZE, null );
                filterProductFeatureSelectItem(AppConstants.COLOR, null );

                // reset to default
                productVO.setCurrentDetailImageName(productVO.getProduct().getProductImageByType(ProductImageType.DETAIL1.toString()).getFileReference().getId());
                productVO.setCurrentBigImageName(productVO.getProduct().getProductImageByType(ProductImageType.BIG1.toString()).getFileReference().getId());                                                
            }       

      } catch (Exception ex) {
            addErrorMessage(getMessage("error"));
            if (screenComponent.isDisplayException()) {
                addErrorMessage(ex.getMessage());
            }
        }

  } 
```

在第一次导航到产品详细信息页面后，无论何时从 selectOneMenu id="colorSelect" 中选择一个值，都不会调用 valueChangeListener 和 ajax 侦听器。除此之外，还调用了 productMB.openProductDetails 操作。

ajax 调用已完成，我在日志中没有看到任何错误，但没有调用任何侦听器方法。有人知道为什么会跳过这些 JSF ajax 侦听器吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:01:59.213

如果您直接从 URL 访问该页面是否有效？如果 PrettyFaces 被禁用，它会起作用吗？

我怀疑这是链接或 PrettyFaces 的问题。我打赌它与 AJAX 和部分状态保存有更多关系。

它可能与此有关：

```
public String openProductDetails() {
    if (filters.getProductCategoryName() 
            != null && !filters.getProductName().equals("")) {         
        loadProductDetailsByName(filters.getProductCategoryName());
    }

    return "/pages/productDetails.faces"; // why is this being returned?
} 
```

您正在那里返回一个页面名称。PrettyFaces 实际上可能会尝试在此字符串上导航。如果您希望显示您在映射中配置的页面，只需返回 null、返回 "" 空字符串或不返回任何内容。

希望这可以帮助。

# multitasking - 在无中断 DCPU-16 上是否可以使用抢占式多任务操作系统？

> ID：10068847
> 
> 赞同：10
> 
> 时间：2012-04-09T04:20:11.293
> 
> 标签：multitasking, interrupt, dcpu-16

我正在研究各种操作系统设计，希望为 DCPU-16 编写一个简单的多任务操作系统。然而，我读到的所有关于抢占式多任务实现的内容都以中断为中心。听起来在 16 位硬件和软件的时代，协同多任务处理更为普遍，但这要求编写每个程序时都要考虑到多任务处理。

有没有办法在无中断架构上实现抢占式多任务处理？我能想到的只是一个可以动态切换任务的解释器，但这会对性能产生巨大的影响（如果它必须解析每个操作并且不让任何东西在本机运行，那么它可能会降低 10-20x+ 的数量级，我是想象）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:18:24.340

抢占式多任务通常通过中断例程将状态更改/感兴趣的事件发布到调度程序来实现，调度程序决定暂停哪些任务，以及根据优先级启动/继续哪些新任务。但是，当正在运行的任务调用 OS 例程时，可能会发生其他有趣的事件，这可能具有相同的效果。

但重要的是某处记录了某个事件，调度程序决定运行谁。因此，您可以使所有此类事件信号/调度仅在操作系统调用时发生。

您可以在各种任务应用程序代码中的“方便”点添加对调度程序的异常调用，以使您的系统更频繁地切换。无论是只是切换，还是使用一些背景信息，例如自上次调用以来经过的时间，都是调度程序的详细信息。

您的系统不会像由中断驱动的系统那样响应迅速，但您已经通过选择您所做的 CPU 放弃了这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T05:31:11.420

其实，是。最有效的方法是简单地修补加载程序中的运行时。内核/守护进程的东西可以有自定义补丁以获得更好的响应能力。更好的是，如果您可以访问所有源代码，则可以在编译器中打补丁。

补丁可以由各种分布式调度程序组成。每个程序都可以被修补以具有非常低的延迟计时器；在加载时，它将设置计时器，并且在调度程序的每次返回时，它将重置它。一个简单的方法将允许代码简单地做一个

```
if (timer - start_timer) yield to scheduler; 
```

这不会产生太大的性能影响。主要的麻烦是找到将它们弹出的好点。在每个函数调用之间都是一个开始，检测循环并插入它们是原始的，但如果你真的需要响应式抢占，那么它是有效的。

它并不完美，但它会起作用。

主要问题是确保计时器返回是低延迟的；这样它只是一个比较和分支。此外，以某种方式处理异常——例如导致无限循环的代码错误。从技术上讲，您可以使用一个相当简单的硬件看门狗定时器并在 CPU 上断言一个复位，而无需清除任何 RAM；内存中的例程将是 RESET 向量指向的位置，它将检查堆栈并将其展开回程序调用（从而使程序崩溃但保留其他所有内容）。这有点像蛮力 if-all-else-fails 使程序崩溃。或者您可以通过这种方式将其更改为多任务，将 RESET 作为中断，但这要困难得多。

所以……是的。这是可能的，但很复杂；使用来自 JIT 编译器和动态翻译器的技术（模拟器使用它们）。

这是一个有点混乱的解释，我知道，但我很累。如果还不够清楚，我明天可以回来清理。

顺便说一句，在 CPU 中间程序上断言复位听起来很疯狂，但这是一项历史悠久且经过验证的技术。早期版本的 Windows 甚至正确地在 386 上运行兼容模式，因为没有办法从 16 位模式切换回 32 位。其他处理器和操作系统也这样做了。

编辑：所以我对 DCPU 做了一些研究，哈哈。它不是真正的 CPU。我不知道你是否可以在 Notch 的模拟器中断言重置，我会问他。方便的技术，就是这样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-09T05:28:07.757

我认为你的评估是正确的。如果调度程序可以中断（在非屈折的字典意义上）正在运行的任务并自主切换到另一个任务，则会发生抢占式多任务。所以必须有某种类型的参与者来促使调度程序采取行动。如果没有中断设备（在变形的技术意义上），那么您通常无能为力。

然而，与其切换到一个完整的解释器，一个想法只是动态地重新编程提供的程序代码。因此，在进入进程之前，调度程序知道完整的进程状态，包括它将进入的程序计数器值。然后它可以从那里向前扫描，例如用第二十条指令代码或下一个不在程序计数器处的跳转指令代码替换为跳转回调度程序。当进程返回时，调度程序将原始指令放回原处。如果它是一个跳转（条件或其他），那么它也会适当地影响跳转。

当然，这种方案只有在程序代码不动态修改自身的情况下才有效。在这种情况下，您可以对其进行预处理，以便在没有线性搜索的情况下提前知道跳转的位置。如果它愿意指定所有可能被修改的地址，那么从技术上讲，您可以允许编写良好的自修改代码，从而绝对可以避免在调度程序的动态修改中使用这些地址。

你最终会运行一个解释器，但只是为了跳转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T14:20:27.820

另一种方法是保留基于事件队列的小任务（如当前的 GUI 应用程序）

这也是合作的，但效果是不需要操作系统调用，您只需从任务返回，然后它将继续执行下一个任务

如果您需要继续执行任务，则需要将下一个“函数”和指向您需要的数据的指针传递给任务队列

# android - Android：在多选对话框中跟踪检查的值

> ID：10068848
> 
> 赞同：1
> 
> 时间：2012-04-09T04:20:26.460
> 
> 标签：android, dialog, multi-select

我有一个按钮，点击它我会显示一个多选对话框。我用数据库中的值加载对话框。我想跟踪检查的对话框中的值。我怎么做？？是否可以在最初加载对话框时检查某些服务。我的 ButtonOnClickHandler 代码如下所示：

```
class ButtonClickHandler implements View.OnClickListener {      
    public void onClick( View view ) {  
        int i=0;  
        List<Service> svc = EditBusinessdh.getServiceList();  
        Log.v(TAG, "Setting svc size:"+ svc.size()  );  
        serName = new ArrayList<String>();  
        for(i=0;i<svc.size();i++)  
        {  
        serName.add(svc.get(i).toString());                 
        Log.v(TAG, "service ="+svc.get(i));  
        }  
        showDialog(0);  
    }  
}  

@Override  
protected Dialog onCreateDialog(int id)   
{  
String[] ser =  serName.toString().substring(1,serName.toString().length()-1).split(",");  
return new AlertDialog.Builder( this )  
    .setTitle( "Select Services" )  
    .setMultiChoiceItems(ser, selected, new DialogSelectionClickHandler())  
    .setPositiveButton( "Ok", new DialogButtonClickHandler() )  
    .create();  
}  

public class DialogSelectionClickHandler implements DialogInterface.OnMultiChoiceClickListener  
{  
public void onClick( DialogInterface dialog, int clicked, boolean checked )  
{  
    String firstSelected= serName.set(clicked, ser.toString());  
}  
}  

public class DialogButtonClickHandler implements DialogInterface.OnClickListener  
{  
    public void onClick( DialogInterface dialog, int clicked )  
    {  
    switch( clicked )  
    {  
        case DialogInterface.BUTTON_POSITIVE:  
            closeContextMenu();  
            break;  

        case DialogInterface.BUTTON_NEGATIVE:  
            break;  
    }  
    }  
}  

@Override  
public void closeContextMenu() {  
    super.closeContextMenu();       
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:25:38.123

制作一个 ArrayList，并在选择选项时将其添加到列表中，并在取消选择时将其从列表中删除。而已

```
ArrayList<String> checkedValue= new ArrayList<String>();

public void onClick( DialogInterface dialog, int clicked, boolean checked )  
{  
      if (isChecked) 
            {
                if(!checkedValue.contains(ser[which]))
                    checkedValue.add(ser[which]);
            } 
            else
            {
              if(checkedValue.contains(ser[which]))
                  checkedValue.remove(ser[which]);
            }

} 
```

# c# - 无论 .NET 中的时区如何，如何获取 FAT32 文件的正确修改日期时间？

> ID：10068855
> 
> 赞同：10
> 
> 时间：2012-04-09T04:22:11.367
> 
> 标签：c#, .net, timezone, utc

**在回答之前，请仔细**阅读这个问题。答案并不像看起来那么简单。

我正在编写一个程序，该程序需要跟踪文件的修改日期时间，其中一些文件存储在外部 FAT32 驱动器上。该程序正在各种 Windows 7 机器上运行。

问题是当前 UTC 偏移量发生变化时，UTC 修改的日期时间会发生变化。具体来说，当我们从新西兰标准时间 (UTC+12) 到新西兰夏令时间 (UTC+13) 再返回时。这不是错字 - **UTC**修改的日期时间更改。不应该，这是 UTC 的重点，但确实如此。这似乎是 FAT32 文件系统的限制 - NTFS 上的文件可以正常工作。

```
Console.WriteLine(DateTime.Now.ToString() + (DateTime.Now.IsDaylightSavingTime() ? " Daylight" : " Standard"));
Console.WriteLine(new FileInfo(args[0]).LastWriteTimeUtc.ToString("yyyyMMdd HH mmss")); 
```

系统时区为新西兰，系统日期为新西兰标准时间 2012 年 4 月 9 日。

```
C:\Dev\UtcModifiedDatetime\bin\Debug>UtcModifiedDatetime.exe M:\Test1\Test.txt
2012-04-09 3:53:46 pm Standard
20120409 03 5316 
```

现在将系统日期设置为 2012 年 3 月 1 日，即新西兰夏令时。请注意，我已重命名包含测试文件的目录。这很重要，因为否则**Windows 将缓存**文件的修改日期时间。在我弄清楚这一点之前，我浪费了很多时间。

```
C:\Dev\UtcModifiedDatetime\bin\Debug>UtcModifiedDatetime.exe M:\Test2\Test.txt
2012-03-01 3:54:13 pm Daylight
20120409 02 5316 
```

现在将系统日期设置回 2012 年 4 月 9 日，并将时区更改为阿德莱德 (UTC+09:30)。

```
C:\Dev\UtcModifiedDatetime\bin\Debug>UtcModifiedDatetime.exe M:\Test3\Test.txt
2012-04-09 1:27:21 pm Standard
20120409 06 2316 
```

那么我怎样才能得到正确的修改日期时间呢？我可以尝试确定该文件是否在 FAT32 文件系统上，如果是夏令时，请调整一小时，但即使我可以让它工作，这将是一个可怕的丑陋黑客。使用低级系统调用会起作用吗（我怀疑不是因为问题似乎出在操作系统级别）？我可以更改进程的时区，而不在整台机器上更改它吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-09T06:46:16.800

问题是，[FAT32 文件系统将文件时间存储为本地时间](http://msdn.microsoft.com/en-us/library/ms724290.aspx)。因此 UTC 时间是计算的时间，它考虑了 DST，这会导致不同的 UTC 时间。一般来说，这个问题非常复杂，无法解决。

例如，您需要将真实的 UTC 文件修改时间存储在一个单独的文件中，在移除外部驱动器之前，必须在每台机器上同步该文件。如果同步至少不会执行一次，则不能认为它是正确的。并且没有简单的方法可以将其强制执行给用户。

# xml - xml、xsd验证问题

> ID：10068857
> 
> 赞同：1
> 
> 时间：2012-04-09T04:22:28.717
> 
> 标签：xml, xsd

[当我在http://corefiling.com/opensource/schemaValidate.html](http://corefiling.com/opensource/schemaValidate.html)使用验证器时，我试图弄清楚这个错误意味着什么。这是我从这个验证器收到的错误。

```
s4s-elt-must-match.1: The content of 'orders' must match (annotation?, (simpleType | 
    complexType)?, (unique | key | keyref)*)). 
    A problem was found starting at: element. 
```

这个错误信息是什么？

这是我的 xsd 文件

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="orders">
 <xs:element name ="order" maxOccurs="unbounded">
  <xs:complexType>
   <xs:sequence>  
    <xs:element name="case" type="xs:caseColor" >
      <xs:simpleType name="caseColor">
        <xs:restriction base="string">
            <xs:enumeration value="Lemonde" />
            <xs:enumeration value="Strawberry" />
            <xs:enumeration value="Lime" />
            <xs:enumeration value="Blueberry" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name="batteries" type="xs:numOfBat" default = 
"1"> 
      <xs:simpleType name="numOfBat">
        <xs:restriction base="integer">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
            <xs:enumeration value="3" />
            <xs:enumeration value="4" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name="recharger" type="xs:volt"> 
    <xs:simpleType name="volt">
        <xs:restriction base="string">
            <xs:enumeration value="110-120" />
            <xs:enumeration value="220-240" />
        </xs:restriction> 
    </xs:simpleType>
    </xs:element>
    <xs:element name="arm"> 
       <xs:element name ="reaches" minOccurs="2" maxOccurs="3" 
type="xs:reach">
         <xs:simpleType name="reach">
            <xs:restriction base = "integer">
              <xs:enumeration value = "50" />
              <xs:enumeration value = "75" /> 
              <xs:enumeration value = "100" />
             </xs:restriction>
     </xs:simpleType>
    </xs:element>
   </xs:element>
    <xs:element name ="camera" type="numOfCam"> 
      <xs:simpleType name="numOfCam">
        <xs:restriction base="string">
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
        </xs:restriction> 
      </xs:simpleType>
    </xs:element>
    <xs:element name = "speech" type="xs:language">
      <xs:simpleType name = "language">
        <xs:restriction base = "string">
            <xs:enumeration value = "Spanish" />
            <xs:enumeration value = "Chinese" />
            <xs:enumeration value = "English" />
            <xs:enumeration value = "German" />
            <xs:enumeration value = "French" />
         </xs:restriction>
       </xs:simpleType>
    </xs:element>
   </xs:sequence>
  </xs:complexType>
 </xs:element>
</xs:element>
</xs:schema> 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<orders>
  <order>
    <case> Strawberry </case>
    <batteries> 2 </batteries>
    <recharger> 110-120 V </recharger>
    <arm> 2 
       <length> 50 </length>
       <length> 100 </length>
    </arm>
    <camera> 2 </camera>
    <speech> Spanish </speech>
  </order>
  <order>
    <case> Lime </case>
    <batteries> 4 </batteries>
    <recharger> 220-240 V </recharger>
    <arm> 3 
       <length> 75 </length>
       <length> 75 </length>
       <length> 100 </length>
    </arm>
    <camera> 1 </camera>
    <speech> Chinese </speech>
  </order>
  <order>
    <case> Blueberry </case>
    <batteries> 1 </batteries>
    <recharger> 110-120 V </recharger>
    <arm> 2 
       <length> 75 </length>
       <length> 100 </length>
    </arm>
    <camera> 2 </camera>
    <speech> French </speech>
  </order>
</orders> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:35:56.653

There were multiple errors I have fixed all of them, refer the improved code below:

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="orders">
    <xs:complexType>
      <xs:sequence>
    <xs:element name ="order" maxOccurs="unbounded">
      <xs:complexType>
        <xs:sequence>
          <xs:element name="case">
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:enumeration value="Lemonde" />
                <xs:enumeration value="Strawberry" />
                <xs:enumeration value="Lime" />
                <xs:enumeration value="Blueberry" />
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="batteries" default = 
"1">
            <xs:simpleType>
              <xs:restriction base="xs:integer">
                <xs:enumeration value="1" />
                <xs:enumeration value="2" />
                <xs:enumeration value="3" />
                <xs:enumeration value="4" />
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="recharger">
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:enumeration value="110-120" />
                <xs:enumeration value="220-240" />
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name="arm">
            <xs:complexType>
              <xs:sequence>
            <xs:element name ="reaches" minOccurs="2" maxOccurs="3">
              <xs:simpleType>
                <xs:restriction base = "xs:integer">
                  <xs:enumeration value = "50" />
                  <xs:enumeration value = "75" />
                  <xs:enumeration value = "100" />
                </xs:restriction>
              </xs:simpleType>
            </xs:element>
                </xs:sequence>
                  </xs:complexType>
          </xs:element>
          <xs:element name ="camera">
            <xs:simpleType>
              <xs:restriction base="xs:string">
                <xs:enumeration value="1" />
                <xs:enumeration value="2" />
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
          <xs:element name = "speech">
            <xs:simpleType>
              <xs:restriction base = "xs:string">
                <xs:enumeration value = "Spanish" />
                <xs:enumeration value = "Chinese" />
                <xs:enumeration value = "English" />
                <xs:enumeration value = "German" />
                <xs:enumeration value = "French" />
              </xs:restriction>
            </xs:simpleType>
          </xs:element>
        </xs:sequence>
      </xs:complexType>
    </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

# android - 如何使用来自 URL 链接的 XML 数据？

> ID：10068859
> 
> 赞同：0
> 
> 时间：2012-04-09T04:22:37.613
> 
> 标签：android, xml, https

标题可能有点混乱，所以我将在这里解释更多细节。首先，我有一个`URL link`使用`HTTPS secured site`. 我已经成功尝试使用 WebView 连接到站点，使用`loadDataWithBaseURL method`.

`URL link`不以 .xml 结尾，**所以**我遇到了这个问题。`URL link`为了在不以**.xml**结尾的文件上使用 xml 数据，需要执行哪些程序？

**编辑：**

```
<MGMT>
    <NET>
        <HEAD>
            <ClientID>99999999</ClientID>
            <ServerID>WEB_01</ServerID>
            <Rsp>00</Rsp>
            <Auth></Auth>
        </HEAD>
        <STAT>
            <IP>192.168.5.158</IP>
            <Status>OK, Success!</Status>
    </NET>
</MGMT> 
```

我确实有 XML 解析知识。但那是如果 url 链接返回 XML 数据或者我有一个 XML 文件。这**不是实际链接**，但它是相似的，我更改了其中的一些值。

`https://192.168.0.254/?ClientID=999999&Cert=0f7a248e3b017effec2b36cf53912b0f&IP=192.168.5.128`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:48:10.200

好的。当我了解您的问题时，您必须获得一些关于 xml 解析的知识，它将获取的 XML 数据转换为特定的变量。

在下面的示例中，项目从服务器获取 Http 响应，该响应采用 xml 文件的格式。（哪个 URL 没有 .XML 扩展名）。并且该数据存储在特定变量中。

您必须根据您的 xml 结构基于选项卡获取各种数据。就像 "MGMT", "NET" 。. 等等等等。.

请参阅：[示例 1](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

另请参阅：[示例 2](http://www.ibm.com/developerworks/xml/library/x-androidxml/index.html?ca=drs-)

希望你有逻辑去做。

# java - 执行一些更新后，可执行的 jar 文件将无法运行

> ID：10068863
> 
> 赞同：0
> 
> 时间：2012-04-09T04:22:55.927
> 
> 标签：java, jakarta-ee

我正在开发 Java 项目（类似沙盒游戏的泰拉瑞亚），我遇到了一些我不明白的东西。我一直在将项目导出为 .jar 以上传并与朋友分享，但上次我这样做时，.jar 不会运行，但是当我在 eclipse 中运行它时，它运行良好。当我尝试运行 jar 时，它所做的只是一瞬间失去对资源管理器窗口的关注，然后返回。我已经尝试了很多事情，比如更改主类、更改 META 以及将文件移动到特定包中，但没有任何效果。

该项目是9个类，所以我不会在这里粘贴所有代码，但是可以在这里找到最新的，非工作源代码（http://www.mediafire.com/?fiw6wq73j7cff4t），非工作罐在这里（http://www.mediafire.com/?bhjo162oh3hi2j9），工作罐在这里（http://www.mediafire.com/?h918s8xpyxw4psr）。如果有更多java经验的人可以看看这个，将不胜感激。

我尝试的其中一件事是不添加 JPanel（游戏），而只是离开启动画面，然后 jar 就可以工作了。这说明一定是某个地方的编码有问题。

谢谢你的时间，身份证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:40:29.537

`Couldn't find`消息来自您的`ReadMap`班级。因此，请检查哪种情况导致此错误。很可能您没有将所有类或其他文件添加到 JAR，因此找不到文件。在 Eclipse 导出对话框中检查所有需要的文件是否已添加到导出的 JAR 中。提供更多调试信息（stacktrace 可以）也是一个好主意，尤其是在您学习的时候。顺便说一句，很酷的游戏:)

# backbone.js - 表单按钮不会使用backbone.js 表单提交

> ID：10068864
> 
> 赞同：1
> 
> 时间：2012-04-09T04:23:05.273
> 
> 标签：backbone.js

我正在关注 Ryan Bates 主干.js RailsCast，第二部分。在其中，他正在制作一个抽奖应用程序，您可以在其中将新名称添加到列表中，然后随机选择一个获胜者。这是他在模板中用来提交新名称的表格。但是，当我按下提交时，什么也没有发生。它没有点击。

```
<h1>raffler</h1>

<form id="new_entry">
  <input type="text" name="name" id="new_entry_name">
  <input type="submit" value="Add">
</form>

<ul>
<% for entry in @entries.models: %>
  <li><%= entry.get('name') %></li>
<% end %>
</ul> 
```

在视图中，在提交事件上，他使用 createEntry 函数创建一个新名称

```
 events:
    'submit #new_entry': 'createEntry'

  initialize: ->
    @collection.on('reset', @render, this)

  render: ->
    $(@el).html(@template(entries: @collection))
    this

  createEntry: (event) ->
    event.preventDefault()
    @collection.create name: $('#new_entry_name').val() 
```

有什么想法可能是错的吗？

# php - 从javascript更改值时Php不打印正确的值

> ID：10068867
> 
> 赞同：0
> 
> 时间：2012-04-09T04:23:26.677
> 
> 标签：php, javascript

我有一个通过 javascript 提交表单的 html 页面。在提交表单之前，我更改了隐藏标签的值，然后尝试进入 php，但它不起作用。它显示为空白。

这是javascript

```
function remove(){

remove.value = 'true';

  document.newrow.submit() ;

} 
```

remove 的值设置成功，但是当我提交表单时，我得到一个空白值。

这是检索值的 php 代码。

```
$test = $_POST['remove'];

echo $test; 
```

知道为什么该值为空白吗？

谢谢

```
<form name = 'newrow' action = 'update.php' method = 'post'>

<input type='hidden' name='remove' id = 'remove' /><a href='javascript:remove()'><img src = 'images/delete.png' / ></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:30:27.203

```
remove.value = 'true'; 
```

Is too ambigous. Try using `document.getElementById('remove').value`, assuming that the element has `remove` as its ID.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:30:30.070

You should do like this

```
<input type='hidden' name='random' id='random' />
<input type='submit' name='enter' value="Enter" onclick="remove" /> 
```

function remove() { document.getElementById("random").value='true'; }

//PHP part

```
if(isset($_POST['enter']))
{
   $ramdom=$_POST['random'];
} 
```

The error probably is that you are submitting it twice

--Update for anchor tag

Here is what you're missing:

```
A link does not submit the form with input data, it just changes the url.
Submit the form.
Override the default <a> behavior (for example, using return false).

function random()  
{  
    document.getElementById("random").value = 'true';  
    document.getElementById("thisForm").submit();
    return false;
} 
```

You can call it using:

```
<a href="" name="enter" onclick="return random();">Enter </a> 
```

# ios - 如果文件没有更改，请避免再次下载文件

> ID：10068868
> 
> 赞同：3
> 
> 时间：2012-04-09T04:23:47.937
> 
> 标签：ios, objective-c, xml

我需要使用 HTTP 协议下载一个 XML 文件，以便在我的 iPhone 应用程序上本地使用它。偶尔这个文件会在服务器上更新，但不是很频繁。

如何比较已经在 Documents 文件夹中下载的文件与服务器上的文件，如果内容已在服务器上更新，则只需下载它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-09T04:34:18.320

第一次下载文件时，保存响应的 Last-Modified 标头中的日期。您可以将其从`NSHTTPURLResponse`对象中拉出。

在随后的运行中，将该日期`If-Modified-Since`放在`NSURLRequest`. 如果服务器上的文件没有改变，`statusCode`则`NSHTTPURLResponse`应该是 304（意思是“未修改”）并且响应的正文应该是空的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T04:28:41.070

如果您想遍历文档目录以查找特定命名的文件，请使用 NSFileManager`-fileExistsAtPath:isDirectory`并将其与下载文件的名称（`-suggestedFilename`只要您使用 NSURLResponse）进行比较`-isEqualToString`。

如果您需要获取修订日期，请`-attributesOfItemAtPath:error:`结合使用 NSFileManager 和键 NSFileModificationDate。

# python - sel.click("xpath=//*[@id='seriesNwsHldr']/div[2]/p[1]/a") 不工作

> ID：10068871
> 
> 赞同：0
> 
> 时间：2012-04-09T04:24:19.467
> 
> 标签：python, xpath, selenium-rc

> 例外：错误：未找到元素 xpath=//*[@id='seriesNwsHldr']/div[2]/p[1]/a。

我检查了Fierbug。路径是正确的，但我不知道这个测试用例失败的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T18:00:40.213

我可以有网站检查吗？

顺便说一句，有时您应该等待页面的加载，因此您需要在此操作之前执行如下指令：

点击并等待（30000）

在我的情况下，它解决了很多问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T17:57:35.763

看来是时间问题。可能您可以有意添加等待时间，直到元素出现在页面上。

另一种可能性是您尝试交互的元素被隐藏。

如果您可以发布测试失败时遇到的错误，那就太好了。

# android - 如何从android中的另一个包中获取布局？

> ID：10068872
> 
> 赞同：0
> 
> 时间：2012-04-09T04:24:27.233
> 
> 标签：android, android-layout

我启动了一个项目 MyFileChooser，其中包含包 com.MyFileChooser。在我的项目中，我有一个布局 abc.xml。我在同一个项目中创建了另一个包 com.FileChooser。在第二个包内的类文件中，我需要设置 abc。 xml 布局。但不可能这样做。我也无法访问 abc.xml 中的 EditText。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T05:21:44.400

只导入

```
import com.MyFileChooser.R; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:29:04.487

现在尝试获取布局，`setContentView(R.layout.abc);`您可以通过findviewbyid获取abc.xml的所有工具。

并且无需提供任何参考。现在只需在构建之前转到项目->清理项目。

# ajax - 如何使用 AJAX 获取远程文件信息？

> ID：10068879
> 
> 赞同：0
> 
> 时间：2012-04-09T04:26:23.460
> 
> 标签：ajax

我是 AJAX 新手，我对`XMLHttpRequest.open(method,url,async)`方法有疑问。我的问题是，如果文件在其他服务器中（即远程机器中的文件），方法中的 url 是什么？. 我的理解是，如果文件在 unix 机器上并且与 Windows 机器相同，我必须打开 ssh 连接。有人可以建议代码片段吗？如果我错了，请纠正我

提前致谢，

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:30:45.127

Refer [http://www.w3schools.com/dom/dom_httprequest.asp](http://www.w3schools.com/dom/dom_httprequest.asp) and you will understand how to use the `XMLHttpRequest.open(method,url,async)` method.

# shell - 期望脚本没有正确发送新行

> ID：10068886
> 
> 赞同：3
> 
> 时间：2012-04-09T04:27:30.013
> 
> 标签：shell, keyboard, newline, expect

我正在使用 expect 来响应网络服务。但是，当我执行以下操作时，我在 Wireshark 中注意到：

```
send "mystring\r\n" 
```

它被在线翻译成：

> “我的字符串\n”

我尝试过设置`stty raw`, 和 , 的各种组合`\r`，`\n`以及从期望中发送 ASCII 码。Expect 似乎正在将这些组合中的任何一个转换为`\n`. 问题是服务器似乎需要一个`\r\n`才能接受输入。我已经能够确定这一点，因为当我在 expect 中使用“interact”，然后`^M`从 shell 中键入 a (control-v enter) 时，Wireshark 会看到以下字符串：

> “我的字符串 \r\n”

通过网络发送出去，服务器正确处理输入。有没有办法在没有翻译的情况下通过期望正确发送这个组合？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-09T04:38:45.577

你是`stty`直接做还是`set stty_init raw`在`expect`脚本中使用？（`expect`的`stty`命令在*您的*`-nottyinit`终端上运行，而不是在pty上运行。）您可能还想查看`spawn`.

# c++ - 使用模板指向 C++ 中对象的指针数组

> ID：10068888
> 
> 赞同：1
> 
> 时间：2012-04-09T04:28:07.283
> 
> 标签：c++, arrays, pointers

我有两个问题，首先我正在尝试创建一个哈希表：我是否正确地实例化了数组？我正在尝试创建一个指向链表的动态指针数组以进行链接：链表节点按值存储。我认为我的 ItemType** 语法不正确，但我不确定：这是我的理解，如果我弄错了，请纠正我。

第一个 * 将 'HashArray' 实例化为一个数组，然后第二个 * 将其实例化为一个指向每个链表头部的指针数组：我应该指向一个节点。Node嵌套在LinkedList中；虽然是公开的。无论如何，这听起来很荒谬，但它应该读到类似“LinkedList::Node::ItemType** HashArray”的内容吗？有什么建议么？

编辑：为简单起见，我没有包括我的复制/删除/分配构造函数：

编辑2：我也没有包括我的“哈希”/“增长函数”/“收缩函数”。显然，在我写好插入内容并且模板事先工作之前，编写删除函数等是没有意义的……让我知道发布更多我所拥有的内容是否有帮助。现在我收到编译错误

C2440: '=' : 无法从 'list< type >' *' 转换为 'std::string *'
行

HashArray[索引] = 链表；

这应该有助于确定问题

```
template <typename ItemType>
class HashSet {

int oldCapacity;
int capacity;
int size;
ItemType** HashArray;

HashSet()   {
    HashArray = new ItemType*[capacity] ;
    memset(HashArray, 0, sizeof(ItemType*)*capacity);
    size=0;
    capacity = 0;
    oldCapacity = 0;
}

void insert(const ItemType& item){
    list <ItemType> *LinkedList= new list<ItemType>();
    unsigned int index = hash(item);

    if(HashArray[index]== NULL)
    {
    LinkedList->pushback(item);
    HashArray[index] = LinkedList;
    }
    else if(!LinkedList->find(item)) //if it's not in the list
    {
    LinkedList->pushback(item);
    HashArray[index] = LinkedList;
    }
    else //in list already
        return;

}
} 
```

# linux - Bash - 因为我在猫？

> ID：10068890
> 
> 赞同：5
> 
> 时间：2012-04-09T04:28:32.697
> 
> 标签：linux, bash

我不是 bash 脚本编写者，所以这无疑是一个非常简单的问题。

我有一个抛出错误的 bash 脚本。它看起来像这样：

```
#!/bin/bash
for i in (cat /root/list.txt)
do
        doSomething
done 
```

错误在第二行，与大括号有关。所以看起来大括号不应该在这里......在这种情况下，第2行应该是什么样子？

该脚本应该从 /root/list.txt 中读取每一行，然后用它做一些事情（我删除了这个例子的实际命令。）

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-09T04:29:55.720

大概

```
for i in $(cat /root/list.txt) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-09T04:32:21.403

您不应该使用 for 循环来读取行。[请改用 while 读取循环。](http://mywiki.wooledge.org/BashFAQ/001)

```
#!/bin/bash
while read -r i; do
  doSomething
done < /root/list.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-09T05:14:48.990

尝试

```
#!/bin/bash
for i in `cat /root/list.txt`
do
    doSomething
done 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-09T05:12:00.460

您可以使用以下命令调试 bash 脚本：

```
set -x 
```

用这个 ：

```
for line in $(cat /etc/fstab)
do 
   echo $line ; sleep 1
done 
```

或这个 ：

```
while read line
do
    echo $line ; sleep 1
done < /etc/fstab 
```

注意：行是可变的

# salesforce - Scheduled Batchable process in salesforce

> ID：10068891
> 
> 赞同：4
> 
> 时间：2012-04-09T04:28:32.507
> 
> 标签：salesforce, apex-code

I am trying my hands on implementing a batch process. I need some help/guidance on how to test this. All I am doing here is to display the opportunity name in the debug logs. But when I run the class scheduledBatchable which also has the test class in it in Apex test execution. The debug statements on the Opp_BatchProcess are not getting displayed. What is that I am doing wrong?

Here is the code i have

```
global class Opp_BatchProcess implements Database.Batchable < sObject >
{
    globalDatabase.QueryLocator start(Database.BatchableContextBC)
    {
        system.debug('Insidestart');
        returnDatabase.getQueryLocator('select name,id from opportunity');
    }

    global void execute(Database.BatchableContext BC, List <sObject> batch)
    {
        for (Sobject s : batch)
        {
            opportunity o = (opportunity)s;
            system.debug('Opp name is' + o.name);
        }
    }

    global void finish(Database.BatchableContext BC) {}
} 
```

I also have a schedulable class

```
global class scheduledBatchable implements Schedulable
{
    global void execute(SchedulableContext sc)
    {
        Opp_BatchProcess b = new Opp_BatchProcess();
        ID myBatchJobID = database.executebatch(b);
    }

    public static testMethod void testscheduleMerge()
    {
        Test.startTest();
        scheduledBatchable s8 = new scheduledBatchable();
        string sch = '0 0 * * 1-12 ? *';
        system.schedule('Process Trans 1', sch, s8);
        Test.stopTest();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T21:02:52.543

看起来您的 testmethod 只测试 Schedulable 类。您还需要测试 Batchable 类。

尝试这个：

```
global class scheduledBatchable implements Schedulable
{
    global void execute(SchedulableContext sc)
    {
        Opp_BatchProcess b = new Opp_BatchProcess();
        ID myBatchJobID = database.executebatch(b);
    }

    public static testMethod void testscheduleMerge()
    {
        Test.startTest();
        scheduledBatchable s8 = new scheduledBatchable();
        string sch = '0 0 * * 1-12 ? *';
        system.schedule('Process Trans 1', sch, s8);
        Test.stopTest();
    }

    public static testMethod void testBatchMerge()
    {
        Test.startTest();
        Opp_BatchProcess b = new Opp_BatchProcess();
        ID myBatchJobID = database.executebatch(b);
        Test.stopTest();
    }
} 
```

# java - What is a good pattern for storing implementations of an interface and retrieving specific implementations?

> ID：10068897
> 
> 赞同：9
> 
> 时间：2012-04-09T04:29:47.563
> 
> 标签：java, interface, subclass, simulation

I am writing a simulator that has several interfaces which all simulated objects implement. The `Entity` interface has methods that all objects must have, such as ID retrieval and advancing the time step for the object's state. `Collidable` extends `Entity`, and represents anything with volume and position that should be considered when collision detection algorithms run. `Field` extends `Entity`, and represents anything that maps a location to a value; these are used to model things like magnetic fields that permeate the world but have no volume or physical form. `RigidBody` is a class that implements `Collidable` and provides rigid-body dynamics algorithms. I have a `World` class which manages all `Entities` and has methods for advancing the simulator's clock and partitioning the world so as to make collision detection more efficient.

My issue involves retrieving `Entity` subtypes from `World`. Originally, `World` just had a map of `Entities` keyed by ID, and to retieve a `Field` or `RigidBody` there would be methods that would grab the `Entity` out of the map and do an `instanceof` check plus a cast to the desired subtype. I'm well-aware that `instanceof` usage is frowned upon, however, so I tried another approach.

Currently, I have separate maps within `World` for each interface. For instance, there is a map for `Collidables` as well as a map for all `Entities`. The `addCollidable()` method will add to both maps, and `getCollidable()` will retrieve only from the `Collidable` map. This avoids `instanceof`, but it still seems like poor design to me. If I dream up another interface to extend `Entity`, I'll need another map in `World` and corresponding methods.

I feel like this issue isn't terribly obscure, so what is typically done in this situation?

**EDIT**

I don't believe the Visitor pattern will work here, as Visitor allows you to dispatch on the concrete type, and some of my retrieval methods need to retrieve interface types. For instance, Visitor would work if `World` only needed methods to retrieve `RigidBodies` and other such concrete classes, but I cannot make a method that retrieves all `Collidables` with Visitor.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:00:15.980

使用`instanceof`是不受欢迎的，因为它*经常*出现在暗示不完整封装的上下文中。例如，`instanceof`有时用于区分不同种类的对象，然后根据它们的类型对它们进行操作。一种更简洁的方法是将代码放入对象的相应类中，并改为使用[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。因此，与其*从不*使用`instanceof`，不如问问自己，您当前使用的`instanceof`是否**合法**？

换句话说： **是否可以将依赖于实体类型的代码移动到对应的实体类中？** （*当然，一旦得出结论，就应该记录下来，因为事情可能会发生变化。*）

顺便说一句，我认为您可以使用 a轻松**概括您当前的设计**`Map<Class,List<Entity>>`，这将允许您为任意数量的类型保留实体列表。`Class[] types = {...}`您还可以拥有一个包含所有需要区分的类型的数组。现在，您的方法中的循环中只需要一个`instanceof`运算符，它将遍历所有需要区分的类型，并将实体添加到所有相关列表中/从所有相关列表中删除。`for``add/removeEntity(...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T05:08:42.143

您可以在这里使用访问者模式，本教程中的访问者模式使用它来解决您遇到的类似问题。 [http://www.youtube.com/watch?v=KSEyIXnknoY](http://www.youtube.com/watch?v=KSEyIXnknoY)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T14:19:24.077

在我看来，您在世界级中为可碰撞对象使用额外的字段似乎是合理的，因为它是数据的特殊子集，需要专门处理。

不过，我唯一会改变的（主要是由于个人喜好）是使用`List<Collidable>`as 类型，因为根据您的需要 - 遍历所有这些以进行碰撞检查 - 列表是一种更快、更轻量级的方法。

# c# - Response.Redirect cannot be called in a Page callback

> ID：10068907
> 
> 赞同：1
> 
> 时间：2012-04-09T04:31:21.340
> 
> 标签：c#, asp.net

I am getting this error. I am using ICallbackEventHandler to fill the some dropdowns. On a particular condition I want to redirect to a certain aspc page but I am getting

> Response.Redirect cannot be called in a Page callback.

I have also used Server.Transfer but problem did not solve.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:35:58.010

Response.Redirect() implicate call the `Response.End()` which would absolutely stop the page-lifecycle execution.

So you cannt use it in your callback method. You can use a client method instead it like `window.location.href = "...."`

# asp.net - Setting Rating controls CurrentValue in ASP.NET script instead of code behind

> ID：10068910
> 
> 赞同：0
> 
> 时间：2012-04-09T04:32:11.523
> 
> 标签：asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit

I want to set the ASP.NET Ajax Control Toolkit's Rating control's CurrentValue in ASP.NET script instead of code behind i.e. in PageLoad or any other kind of event. I want to bind it to the SqlDataSource on my page. (The way we can bind GridView through its SmartTask panel, which establishes ites binding in ASP.NET script) How can I do this?

# c# - How to store greater value than that of decimal(7.9*10 power 28) data types can hold in c#

> ID：10068911
> 
> 赞同：0
> 
> 时间：2012-04-09T04:32:18.383
> 
> 标签：c#

Decimal, float ,long and double etc are the data types present in c#. I found that Decimal data types can hold maximum value of 7.9*10 power 28.

Now, i would like to know, if i need to store greater value than that decimal data types can hold, then how can i do that ? Similarly , is there any other data types present in C#?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T06:24:13.767

实际上`double`，数据类型可以保存高达[1.0 次方 300](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.100%29.aspx)的值（不记得确切的值）。如果这对您来说还不够，请为我们提供您的真实示例。

# jaxb - (Jersey + Jackson) XmlAdapter

> ID：10068917
> 
> 赞同：1
> 
> 时间：2012-04-09T04:33:09.073
> 
> 标签：jaxb, jersey, jackson, xmladapter

I have a class Foo which has a variable `Map` bar. But as a requirement, I need to be able to represent it as an Object.

So I use a GenericXmlAdapter which in turn does an instanceof check and invokes a Map adapter. A MapAdapter converts the Map into a MapElementList which is just a List of the elements of the Map.

The code falls through as required i.e. the GenericXmlAdapter is invoked and it returns the MapElementList.

But then I get the infamous **class MapElementList nor any of its super class is known to this context** error

**Partial headway**: The MapAdapter is not referenced in Foo or any other class which needs to be serialized. So the @XmlSeeAlso in the MapAdapter will not help. I need to add it elsewhere. Where? is the question. Adding it in the GenericXmlAdapter is not helping.

A quick run through the code

```
class Foo{
   private Object bar;

   @XmlJavaAdapter(GenericAdapter.class)
   @XmlElement(name="bar")
   public Object getBar(){
      return bar;
   }
} 
```

The following GenericAdapter is invoked by Jackson as expected

```
class GenericAdapter extends XmlAdapter<Object,Object>{
   public Object marshall(Object v){
      final XmlAdapter adapter = getAppropriateAdapter(v);
      return adapter.marshall(v);
   }

   public Object unmarshall(Object v){
      final XmlAdapter adapter = getAppropriateAdapter(v);
      return adapter.unmarshall(v);
   }

   public XmlAdapter getAppropriateAdater(Object v){
      if(v instanceof Map){
         return MapAdapter();
      }
   }
} 
```

The following MapAdapter is being invoked by the GenericAdapter as expected

```
@XmlSeeAlso({ MapElement.class, MapElementList.class })
class MapAdapter<K,V> extends XmlAdapter<MapElementList<K,V>, Map<K,V>>{
   public MapElementList<K,V> marshall(Map<K,V> map){
      return new MapElementList(map);
   }

   public Map<K,V> unmarshall(MapElementList list){
      ...
   }
} 
```

The following MapElementList is a list representation of a Map

```
class MapElementList<K,V>{
   @XmlAnyElement
   private ArrayList<MapElement<K,V> list;

   //Getters and setters
} 
```

The following is the MapElement finally

```
class MapElement<K,V>{
   @XmlAnyElement
   private K key;

   @XmlAnyElement
   private V value;

   //Getters and setters WITHOUT any annotations
} 
```

# jquery - Ajax calls and variable scope/closure

> ID：10068918
> 
> 赞同：2
> 
> 时间：2012-04-09T04:33:32.900
> 
> 标签：jquery, ajax, scope, closures

I have a combo select and an AJAX call to load the data and populate it.

```
<select id="order_products"><option value="0">Loading data...</option></select>

var kmx = jQuery.noConflict();
function loadProducts() {
        var myProductSelect = kmx('#order_products');
        myProductSelect.empty();
        myProductSelect.append("<option value='0'>Loading data...</option>");
        kmx.ajax({
            type: "POST",
            url: baseurl,
            data: urlquery_ajax + "getOrderProductsInJsonFormatAjax&order_id=" + order_id + '&not_linked=1',
            success: function(data){
                        data = kmx.parseJSON(data);
                        populateCombo(myProductSelect, data, 'Select Product');
                     },
             failure: function(msg){
                        msg = kmx.trim(msg);
                        alert('Error: ' + msg.responseText);
                      }
        });
    }
    /**
    * Populate the combo
    */
    function populateCombo(myComboObj, myData, myText) {
        myComboObj.empty();
        myComboObj.append("<option value='0'>" + myText + "</option>");
        kmx.each(myData.rows, function(index,item) {
            myComboObj.append('<option value="' + item.id + '"' + '>' + item.number + '</option>');
        });
    } 
```

Nothing special but there is a problem when I run the code: The page becomes white! I cannot even see the code source of the page!

But if I add the variable:

```
var myProductSelect = kmx('#order_products'); 
```

into the success method, before calling the function to populate, it works:

```
success: function(data){
data = kmx.parseJSON(data);
var myProductSelect = kmx('#order_products'); // <<<<<-----
populateCombo(myProductSelect, data, 'Select Product');
}, 
```

So, I would like to understand what is the problem? I read the post about the variable scopes, closure and asynchronous calls for AJAX, but I still don't understand my problem.

# node.js - Connection string for azure table storage for local connection

> ID：10068920
> 
> 赞同：2
> 
> 时间：2012-04-09T04:33:46.497
> 
> 标签：node.js, azure, azure-storage, azure-table-storage

I am new to cloud development with the combination of azure table storage + node.js. In all samples I found the connection string for azure storage is only those who have account with real windows azure. As I am developing in my local PC need to the configuration of local azure storage account.

I tried with connection string as:

```
<add key="AZURE_STORAGE_ACCOUNT" value="DevStorage"/>
  <add key="AZURE_STORAGE_ACCESS_KEY" value="Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw=="/> 
```

It is possible connect azure storage via azure storage emulator not in code.

Can anyone get me the solution please??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:39:18.440

像这样创建你的 node.js 表服务客户端：

```
var azure = require('azure');
var tableClient = azure.createTableService(ServiceClient.DEVSTORE_STORAGE_ACCOUNT, ServiceClient.DEVSTORE_STORAGE_ACCESS_KEY, ServiceClient.DEVSTORE_TABLE_HOST); 
```

通过使用 DEVSTORE_STORAGE_ACCOUNT、DEVSTORE_STORAGE_ACCESS_KEY 和 DEVSTORE_BLOB_HOST，您可以使用在 node.js Azure SDK中[硬编码的 blob 存储模拟器设置。](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/serviceclient.js#L55)这消除了等式中的 node.js 配置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:50:15.167

试试下面的连接信息，看看它是否有帮助。

帐户名称 = devstoreaccount1

帐户密钥 = Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVERCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-13T03:46:35.080

就我而言，我在外部虚拟机上运行了存储模拟器，使用 Passport 将端口 20000、20001、20002 的外部请求重定向到该虚拟机内的 localhost 端口 10000、10001、10002...

```
var connectionString = 'DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://192.168.56.56:20000/devstoreaccount1;TableEndpoint=http://192.168.56.56:20002/devstoreaccount1;QueueEndpoint=http://192.168.56.56:20001/devstoreaccount1;';

var azure = require('azure-storage');
var tableSvc = azure.createTableService(connectionString);

var query = new azure.TableQuery()
  .top(5)
  .where('PartitionKey eq ?', 'CONDITION');

tableSvc.queryEntities('TABLENAME',query, null, function(error, result, response) {
    if(!error) {
      // query was successful
      console.log(result.entries);
    }
  }); 
```

# php - 如何使用php调整表格中显示的图像大小

> ID：10068921
> 
> 赞同：1
> 
> 时间：2012-04-09T04:33:58.303
> 
> 标签：php, mysql, image, resize

这是我从 mysql 数据库中检索图像的 php。我想调整图像大小-

```
<?php
$con = mysql_connect('db', 'table', 'p/w');
if (!$con) { die('Could not connect: ' . mysql_error()); } 
mysql_select_db("db", $con); 
$result = mysql_query("SELECT * FROM computers WHERE KEYWORDS='Computers'");
echo "<table border='1' width='100%' >"; 
while($row = mysql_fetch_array($result)) { 
    echo "<tr>";
    echo "<td><img src='folder_name/".$row['image_name']."'></td>";
    echo "</tr>";
}
echo "</table>";
mysql_close($con);
?> 
```

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:36:59.223

您只是希望图像以特定尺寸显示吗？然后在 HTML 中输入：

```
echo "<td><img src=\"folder_name/{$row['image_name']}\" width=\"100\" height=\"100\" /></td>"; 
```

# oop - How to create friend structure in c++ builder

> ID：10068924
> 
> 赞同：1
> 
> 时间：2012-04-09T04:34:47.823
> 
> 标签：oop, c++builder, c++builder-2010

I am working with third party dll and using it's methods. As their funcs are not in TForm namespace I cannot use my structure written in my unit before class `TfMain : public TForm {}` definition.

tried

```
friend struct SVisDoc{
..
..
} doc; 
```

Somehow I need to make it friend to be able to use from

```
void MethName(args) // not in TForm::
{
//I need to use it here
} 
```

Looked at [How do you mark a struct template as friend?](https://stackoverflow.com/questions/206045/how-do-you-mark-a-struct-template-as-friend) but during initialization shows an error.

How can I make my struct friend??

# c++ - 如何正确使用 C++ 强类型枚举？

> ID：10068930
> 
> 赞同：1
> 
> 时间：2012-04-09T04:35:51.083
> 
> 标签：c++, enums, c++11

我想使用具有默认 int 实现的 C++11 范围枚举：

```
enum class Color
{
    gray          = 1,  
    red           = 2
}; 
```

这使用 gcc 编译，但是：

```
Color color = Color::red;  // 'Color' is not a class or a namespace
Color color = red;         // 'red' was not declared in this scope 
```

我究竟做错了什么？

编辑：

这应该是可编译的，但至少对我来说不是。我正在使用 gcc 版本 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3)。当我尝试：

```
 make -std=c++0x -w in /home/martin/Projects/StrongTypedEnums-build-desktop 
```

我明白了

```
:-1: error: invalid option -- '='. 
```

我正在通过 IDE 做所有事情，并且对传递编译器参数一无所知。

```
enum class Color
{
    gray          = 1,
    red           = 2
};

int main(int argc, char *argv[])
{
    Color color = Color::red; // 'Color' is not a class or a namespace
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T04:42:02.180

强类型枚举*需要*作用域。您*必须*在它们前面加上`EnumName::`，就好像它们是`static`一个类的成员一样。C++11 中的常规枚举可以选择添加前缀，但强类型枚举需要它。

C++11 本质上为枚举添加了三个新特性：

*   显式输入 ( `enum class EnumName : int`)
*   词法作用域（`EnumName::`语法）
*   强类型。

您可以使用常规枚举获得前两个（向后兼容性使得它们对于非`class`枚举都是可选的）。但是获得强类型的唯一方法是 with `enum class`，这需要其他两者（如果您没有为`enum class`声明指定显式类型，我相信它使用`int`）。

强制范围意味着您通常不需要为`enum class`es 设置 ALL_CAPS 枚举器名称，因为无论如何您都必须明确地确定它们的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T18:00:35.257

我在使用 GCC 的 Code::Blocks 10.05 时遇到了同样的问题。

我要做的是转到项目 > 构建选项，在左侧窗格中选择我的项目名称（不是“调试”或“发布”）。然后，在选定的编译器“GNU GCC Compiler”下，在“Compiler Settings”、“Compiler Flags”下，勾选“Have g++ follow thecoming C++0x ISO C++ language standard [-std=c++0x]”。

# java - java - 如何在Java中正确结束未确定长度的循环时的文件扫描器

> ID：10068935
> 
> 赞同：0
> 
> 时间：2012-04-09T04:36:29.127
> 
> 标签：java

我写了一个函数来扫描一个制表符分隔的棒球统计文件。

```
public static ArrayList dataRead() throws FileNotFoundException {
    //ArrayList array = new ArrayList<ArrayList>();
    Scanner s = new Scanner(new File("c:\\stats.txt")).useDelimiter("\r");

    ArrayList<String> array = new ArrayList<String>();
    int i = 0;
    while(s.next() != null) {
        String currentLine = s.next();
        Scanner split = new Scanner(currentLine).useDelimiter("\t");
        for(int j = 0; j < 16; j++) {
            System.out.print(split.next() + " ");

            j++;

        }
        System.out.println("\r");
    }
    s.close();
    return array;
} 
```

此功能一直有效，直到文件结束。据我所知，while 循环应该在文件末尾关闭，因为它返回 null，但我不断收到 noSuchElement 错误。如果我能保证文件大小，我会使用一个带有大小的 for 循环，但我不能，因为团队规模在技术上可能会有所不同。如何在循环时正确结束文件扫描仪以便关闭扫描仪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T04:44:52.623

来自：[Scanner.next() 的 Javadocs](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)

> 抛出：NoSuchElementException - 如果没有更多的令牌可用

当文件中没有更多行时，调用`s.next()`会引发`NoSuchElementException`异常。您还调用`s.next()`了两次，一次在 while() 中，一次在循环内。你真的应该被召唤`while(s.hasNext())`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T04:47:11.157

不是在循环条件中使用`scanner.next()`use`scanner.hasNext()`来检查是否有新元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:46:09.223

for 循环有两个问题：

1.  为什么`j < 16`？如果一行中的标记少于 16 个，那么这将是一个错误。请考虑使用带有`split.hasNext()`条件的 while 循环，类似于外部 while 循环。

2.  索引变量`j`增加了两次——一次在 for 循环的声明中，再一次在同一个 for 循环的主体中。

需要更正外部 while 循环以使用`hasNext()`而不是`next() != null`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T04:46:11.483

做就是了：

```
while(s.hasNext())
{
    //blah
} 
```

也使用 a`StringTokenizer`而不是 a`for loop`的标记。

```
StringTokenizer str = new StringTokenizer(currentLine,"\t");
while(str.hasMoreTokens)
{
    System.out.print(str.nextToken());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T04:50:44.357

您可以在 while 条件下使用 s.hasNext() 。如果下一个令牌存在，它将返回 true，否则返回 false。

```
while(s.hasNext()){
} 
```

# ios - 排序和不正确的单个源格式是否会影响在 iOS Safari 上播放 html5 视频？

> ID：10068937
> 
> 赞同：2
> 
> 时间：2012-04-09T04:36:45.297
> 
> 标签：ios, html, mobile-safari, html5-video

HMTL5 视频标签中源格式的顺序是否重要？此外，如果其中一种格式不正确，难道不是所有浏览器都只会找到他们喜欢的那种，而忽略那些不好的吗？

我不明白为什么以下代码在 iOS4.2 safari 上不起作用：

```
<video id="myVideo"  poster="/images/01.png" width="600" height="400" >
<source src="/uploads/12373/6/oceans-clip.mp4" type="video/mp4" />
<source src="/uploads/12373/6/oceans-clip.webM" type="video/webM" />
<source src="/uploads/12373/6/oceans-clip.ogv" type="video/ogg" />
<p>Your browser does not support the video tag.</p>
</video>

<div class="control">
<a href="#" class="btnPlay">Play/Pause</a>
</div> 
```

在我的 Safari 中的 iPhone 上，播放暂停按钮工作正常，它似乎正在加载视频，但随后我收到一个弹出窗口，说“无法播放电影”。我能想到的唯一事情是 .webM 文件实际上并不存在（这是真的，它不存在，尽管其他文件存在）或者我需要在 .webM 之前指定 .ogv。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:53:07.883

据我了解，浏览器按顺序尝试源，因此您的示例将首先尝试 mp4，然后是 .webM，最后是 .ogv 文件。

如果 webM 文件不存在，那就是你的问题。浏览器兼容 webM 格式，尝试获取文件，然后得到 404 错误。我认为 m(any) 浏览器不会尝试在源中加载下一个视频格式，如果它已经兼容的话。

但是，如果不是这种情况，您可以一次尝试一个来源并观察结果。

# qt - Qt 颜色选择对话框，如 gcolor2

> ID：10068938
> 
> 赞同：0
> 
> 时间：2012-04-09T04:36:54.033
> 
> 标签：qt, colors

有没有办法让用户从屏幕上选择颜色？就像 GIMP 或 gcolor2 中的一样，您单击屏幕上的任意位置，它会告诉您鼠标下的颜色。

PS：QColorDialog 没有“pick”功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:51:57.413

您可以抓取整个屏幕的一个像素部分并将其转换为[QPixmap](http://qt-project.org/doc/qt-4.8/qpixmap.html)：

```
// crop screen in a pixmap containing only one pixel
QPixmap pixmap = QPixmap::grabWindow(QApplication::desktop()->winId(), mouse_pos_x, mouse_pos_y, 1, 1);
// convert pixmap to QImage so we can access pixel data crossplatform
QImage img = pixmap.toImage(); 
// image has only one pixel at coords (0,0), get its color
QColor col = QColor(img.pixel(0,0)); 
```

然后很容易提取颜色。[请参阅此处](http://qt-project.org/doc/qt-4.8/qpixmap.html#grabWindow)的功能文档。

# visual-studio - 哪些文件要包含在源代码控制中或与他人共享 Visual Studio 项目时？

> ID：10068940
> 
> 赞同：0
> 
> 时间：2012-04-09T04:37:06.730
> 
> 标签：visual-studio

我相信这个问题已经说得通了。为了进一步解释，Visual Studio 项目通常包含解决方案文件、项目目录、一些个人偏好等。在使用源代码控制（例如 Git）或与朋友或同事共享项目时，我应该包含哪些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:51:55.970

最好颠倒问题并按照您应该排除的内容进行思考，因为它自然会是一个较小的列表。查看我的一个解决方案，我可以看到我已排除以下内容：

*   .svn 文件夹
*   ReSharper 缓存文件夹
*   ReSharper 用户选项文件
*   Visual Studio 用户选项文件
*   每个项目下的bin和obj文件夹

那应该让你开始。

# java - java.math.BigInteger.bitCount() 的替代方案？是否需要？

> ID：10068942
> 
> 赞同：1
> 
> 时间：2012-04-09T04:37:18.307
> 
> 标签：java, biginteger

我在

```
java.math.BigInteger.bitCount() 
```

是否有相同的替代品或我们不需要它？因为如果未初始化，则正在计算值。

只是想证实我的说法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:54:07.587

不，您不需要替代品，它可以正常工作并且会继续这样做（有些时候它会在将来摆脱其已弃用的部分，但这不应该是您的担忧。）

此处不推荐使用的代码用于让其他 JDK 开发人员知道他们不应使用变量 bitCount，而是使用方法 bitCount()。

# ajax - 屏幕抓取和ajax

> ID：10068943
> 
> 赞同：-2
> 
> 时间：2012-04-09T04:37:21.910
> 
> 标签：ajax, screen, scrape

我想要每两分钟重新加载一次的页面中的三个表。我已经使用 php 对三个表进行了屏幕抓取，现在我想将这三个表放在我页面上的一个 div 中，最好的 ajaxy 方法是什么？

我应该将这三个表保存为单独的 html 文件，然后通过 load() 加载它们还是使用 json 或 ...？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-09T18:51:51.400

最好的方法是使用 jquery get 函数

```
$.get(url [, data],function(data) {
    $("#element").html(data);
},'html') 
```

# php - 加权数组结果的 PHP 数组

> ID：10068947
> 
> 赞同：0
> 
> 时间：2012-04-09T04:38:05.373
> 
> 标签：php, mysql

我开发了一个网站，其中包含用户个人资料页面 eye_colour ， hair_colour ， size 等。每个项目都有一组通过下拉列表输入的值。我希望允许用户搜索这些设置范围以找到他们的理想匹配。为此，我设置了一个搜索表单，并使用元组用户向数组搜索提供了一些 SELECT 语句。IE

```
<?php
$var1 = SELECT ‘user’ FROM ‘profile’ WHERE ‘hair_colour’ = $hair; 
$var2 = SELECT ‘user’ FROM ‘profile’ WHERE ‘eye_colour’ = $eye;
$var3………4………..5………..n etcc
?> 
```

我认为有一个功能可以将所有数组合并在一起，然后按用户的最多出现次数进行排序/加权，然后可以显示所有项目。有谁知道这样的 php 函数是否存在以及它的名称是什么？如果这样的函数不存在，我可以尝试 SQL，但我肯定会犯一些错误！谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T04:44:36.097

我会首先使用单个查询来获取您想要的行：

```
$sql = "SELECT * FROM profile WHERE (hair = '$hair_esc') OR (eye = '$eye_esc')";
$result = mysql_query($sql); 
```

然后遍历结果，为每一行分配一个分数：

```
$rows = array();
while ($row = mysql_fetch_array($result)){

    $row['score'] = 0;
    if ($row['hair'] == $hair) $row['score']++;
    if ($row['eye']  == $eye ) $row['score']++;

    $rows[] = $row;
} 
```

最后按分数对列表进行排序：

```
usort($rows, 'sort_by_score');

function sort_by_score($a, $b){
    return $a['score'] - $b['score'];
} 
```

# jquery-mobile - jquery mobile页脚文本垂直对齐

> ID：10068948
> 
> 赞同：0
> 
> 时间：2012-04-09T04:38:18.037
> 
> 标签：jquery-mobile, alignment, vertical-alignment

我正在尝试将文本与页脚区域中的图像对齐。但似乎文本要么向上 (vertical-align:top) 要么向下向下 (vertical-align:middle)，而不是在我想要的中间。

```
 <div data-role="footer">
        <div class="ui-grid-b">
            <div class="ui-block-a"><img src="img/13-target.png">
                <label style="vertical-align:middle;">Overview</label>
            </div>
            .........
        </div><!-- /grid-b -->
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:39:14.583

根据您用于设置页脚样式的 CSS（在 JQM 样式之外），您可能需要调整`line-height`标签的属性。当出现对齐问题时，这对我有用。

希望这可以帮助！

# c++ - 修改对内部数据的引用时更新 STL 优先队列

> ID：10068953
> 
> 赞同：5
> 
> 时间：2012-04-09T04:38:55.523
> 
> 标签：c++, priority-queue, dijkstra

假设我正在编写[Dijkstra 算法](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)，并且我有一个优先级队列，它将最短距离节点保持在顶部。但是，当我遍历图表时，我将更新到该顶点的距离。我已经在数据结构中包含的优先级队列中放置了对所有顶点的引用。现在，当我更新数据结构中的顶点时，我希望优先级队列中的数据能够适应这些变化，因此最近的节点始终位于顶部。但是，在使用调试器单步执行我的应用程序后，我注意到优先级队列不会自行更新。我如何让它做到这一点，而无需将所有顶点重新插入其中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T05:24:42.730

STL priority_queue 假设您只使用 push() 和 pop() 方法来修改数据结构。它不跟踪对数据结构的更改。

在修改priority_queue的底层容器的内部之后，您需要在容器上调用make_heap()来恢复堆属性。STL priority_queue 不在底层容器上提供迭代器。相反，您需要手动管理双端队列或向量作为优先级队列，并根据需要调用 make_heap()、push_heap() 和 pop_heap()。

# android - 为什么 Intent.createChooser() 需要一个 BroadcastReceiver 以及如何实现？

> ID：10068954
> 
> 赞同：13
> 
> 时间：2012-04-09T04:39:03.447
> 
> 标签：android, android-intent, broadcastreceiver

下面的代码片段，从我的 实现中调用`onOptionsItemSelected()`，可以很好地将用户从我的应用程序带到邮件客户端，并预先填写了电子邮件地址、主题和正文。我将其用作让用户给我反馈的简单方法。

```
String uriText =
    "mailto:" + emailAddress +
    "?subject=" + subject +
    "&body=" + body;

Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse(uriText));
startActivity(Intent.createChooser(emailIntent, "Pick an email app:")); 
```

当邮件应用程序打开时（在我的 Nexus S 上，Android 4.0.4），LogCat 输出以下内容，我不知道为什么；谷歌和 SO 搜索*createChooser unregisterReceiver*似乎没有结果，我找不到很多这样的例子`createChooser()`也`unregisterReceiver()`可以帮助这种情况。

> 04-08 21:26:19.094: E/ActivityThread(27894): Activity com.android.internal.app.ChooserActivity 泄露了最初在这里注册的 IntentReceiver com.android.internal.app.ResolverActivity$1@4150aac8。您是否错过了对 unregisterReceiver() 的调用？
> 
> 04-08 21:26:19.094: E/ActivityThread(27894): android.app.IntentReceiverLeaked: Activity com.android.internal.app.ChooserActivity 泄露了 IntentReceiver com.android.internal.app.ResolverActivity$1@4150aac8 原来是在这里注册。您是否错过了对 unregisterReceiver() 的调用？
> 
> 04-08 21:26:19.094: E/ActivityThread(27894): 在 android.app.LoadedApk$ReceiverDispatcher.(LoadedApk.java:763)

这感觉像是一个 Android 错误，因为我自己的代码没有调用`registerReceiver()`，那么为什么 Android 抱怨我需要调用`unregisterReceiver()`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-24T01:13:15.830

I see this as well on my Galaxy Nexus with 4.0.4, but only if there's only one option and the chooser doesn't appear.

This is a bug in Android source - not much you can do about it. Their ResolverActivity registers a BroadcastReceiver, but doesn't always unregister it.

More detail:

Intent.createChooser() will start a ResolverActivity. In onCreate(), the activity calls

```
mPackageMonitor.register(this, false); 
```

mPackageMonitor is a BroadcastReceiver and within `register()` it registers itself on the activity. Normally, the receiver is unregistered in `onStop()`. However, later in `onCreate()` the code checks how many options the user can choose from. If there's only one it calls `finish()`. Since `finish()` is called in `onCreate()` the other lifecycle methods are never called and it jumps straight to `onDestroy()` - leaking the receiver.

I didn't see a bug for this in the Android issues database, so I [created one](http://code.google.com/p/android/issues/detail?id=29399).

For more info you can see this in code:

*   [ResolverActivity](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/app/ResolverActivity.java)
*   [PackageMonitor](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/content/PackageMonitor.java)

As a side note, Google uses email as an example of when you wouldn't want to use a chooser so you may consider just launching the intent normally. See the javadocs for [Intent#ACTION_CHOOSER](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/content/Intent.java).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T10:28:19.750

简单解决问题。

更多信息在这里：[https ://developer.android.com/training/basics/intents/sending.html](https://developer.android.com/training/basics/intents/sending.html)

```
Uri location = Uri.parse("geo:0,0?q=1600+Amphitheatre+Parkway,+Mountain+View,+California");
Intent mapIntent = new Intent(Intent.ACTION_VIEW, location);

PackageManager pkManager = getPackageManager();
List<ResolveInfo> activities = pkManager.queryIntentActivities(mapIntent, 0);

if (activities.size() > 1) {
    // Create and start the chooser
    Intent chooser = Intent.createChooser(mapIntent, "Open with");
    startActivity(chooser);

  } else {
    startActivity( mapIntent );
} 
```

# asp.net - 使用 vb.net 发送电子邮件

> ID：10068955
> 
> 赞同：-1
> 
> 时间：2012-04-09T04:39:39.663
> 
> 标签：asp.net, vb.net

班级代码：-

```
Imports Microsoft.VisualBasic

Imports System.Net.Mail

Public Class SendEmail

    Private _Mailto As String = ""
    Public Property Mailto() As String
        Get
            Return _Mailto
        End Get
        Set(ByVal value As String)
            _Mailto = value
        End Set
    End Property
    Private _MailSub As String = ""
    Public Property MailSub As String
        Get
            Return _MailSub
        End Get
        Set(ByVal value As String)
            _MailSub = value
        End Set
    End Property
    Private _MailBody As String = ""
    Public Property MailBody As String
        Get
            Return _MailBody
        End Get
        Set(ByVal value As String)
            _MailBody = value
        End Set
    End Property
    Private _Msg As String = ""
    Public ReadOnly Property Msg As String
        Get
            Return _Msg
        End Get
    End Property

    Public Sub email()
        Try
            Dim mail As New MailMessage()
            Dim SmtpServer As New SmtpClient("smtp.gmail.com")
            mail.From = New MailAddress("email@gmail.com")
            mail.[To].Add(_Mailto)
            mail.Subject = _MailSub
            mail.Body = _MailBody
            ' mail.Headers.Add("In-Reply-To", 1)
            SmtpServer.Port = 587
            SmtpServer.Credentials = New System.Net.NetworkCredential("email@gamil.com", "password")

            SmtpServer.EnableSsl = True
            SmtpServer.Send(mail)

            _Msg = " Check Your Mail "
        Catch ex As Exception
            _Msg = ex.Message
        End Try

    End Sub
End Class 
```

ctrl“按钮子”内的代码

```
Dim objemail As New SendEmail
objemail.Mailto = txtEmail.Text
objemail.email()
LabelEmail.Text = "The email has been sent" 
```

指定的字符串不是电子邮件地址所需的格式，我试图在“mailto”字段中使用有效的电子邮件，我删除了属性和字段中的所有内容，但尚未解决，，，帮助：D

任何灵魂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:50:14.683

`txtEmail.Text`当用户输入值时，您是否验证有效的电子邮件地址？如果没有，请这样做。

你在`email()`方法中有一些例外吗？

# tokyo-cabinet - 东京内阁是否支持内存 B+ 树实现？

> ID：10068960
> 
> 赞同：2
> 
> 时间：2012-04-09T04:40:59.203
> 
> 标签：tokyo-cabinet, kyotocabinet, tokyo-tyrant

东京内阁是否支持内存 B+ 树？如果是这样，我该如何使用它们？因为在一些网络文章（例如[这里](http://korrespondence.blogspot.it/2009/09/tokyo-tyrant-tuning-parameters.html)和[这里](http://capttofu.livejournal.com/23381.html)）中，报告了这种用法，但我找不到任何描述如何做到这一点的文档。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T09:25:25.317

该[文档](http://fallabs.com/tokyocabinet/spex-en.html)描述了 tcadbopen(TCADB *adb, const char *name) 如下：

> `name' 指定数据库的名称。如果是“*”，则该数据库将是一个内存散列数据库。如果为“+”，则数据库将是内存树数据库。

因此，名称“+”可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:12:02.377

您还可以在这里找到关于东京暴君可能性的一个很好的概述：http: [//korrespondence.blogspot.fr/2009/09/tokyo-tyrant-tuning-parameters.html](http://korrespondence.blogspot.fr/2009/09/tokyo-tyrant-tuning-parameters.html)

# html - 需要脚本通过输入更改 div 背景.. 不工作

> ID：10068962
> 
> 赞同：0
> 
> 时间：2012-04-09T04:41:06.073
> 
> 标签：html, input, background-color

我想更改包含我的输入字段的 DIV 的背景颜色。当您在输入中键入数据时，我的代码工作正常，背景颜色变为红色。但是当我返回并删除输入字段空白的数据时，背景不会恢复到原来的颜色。

我需要 DIV 的背景颜色在空白时恢复到原来的颜色。

我究竟做错了什么？

这是我的代码：

```
<script>
$(document).ready(function(){

$("#id").keypress(function() {
if($("#id").val().length > 0) $("#in").css("background-color", "red");
 else {
   if($("#id").val().length = 0) $("#in").css("background-color", "grey"); 
 }

 });
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T04:58:45.990

除了已经提到的错误，试试这个。将这两个类放在您的 css 文件中：

```
.greyColor
{
background-color: grey;
}

.redColor
{
background-color: red;
} 
```

并在您的 javascript 中使用 addClass 和 removeClass 函数：

```
<script>
$(document).ready(function(){
$("#id").keypress(function() {
if($("#id").val().length > 0)
{
    $("#in").addClass("redColor");
}
else {
   if($("#id").val().length == 0) 
{
$("#in").addClass("greyColor");
$("#in").removeClass("redColor");
}
}

});
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T04:45:54.170

你有一个错误：

```
else {
if($("#id").val().length = 0) 
```

应该：

```
else {
if($("#id").val().length == 0) 
```

此外，永远不要在 Javascript 中省略 if 语句周围的大括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-09T04:47:40.533

```
 $(document).ready(function(){

$("#id").keypress(function() {
if($("#id").val().length > 0) $("#in").css("background-color", "red");
 else {
  if($("#id").val().length == 0) $("#in").css("background-color", "grey");
 }

 });
 }); 
```

# jquery - 如何在 jQuery 中解析 XML 跨域？

> ID：10068963
> 
> 赞同：21
> 
> 时间：2012-04-09T04:41:06.747
> 
> 标签：jquery, xml

从不同的服务器/域解析 XML 时，我将如何解决跨域问题？有人可以给我一个例子吗？该示例不必仅限于 jQuery，因为 JavaScript 也足够了。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-04-09T05:09:02.523

要完全理解为什么*纯*跨域 XML 行不通，首先看看如何促进跨域 JSON 会有所帮助。

首先，让我们看看在 jQuery 中发出 AJAX 请求时会发生什么：

```
$.ajax({
    url: '/user.php?userId=123',
    success: function(data) {
        alert(data); // alerts the response
    }); 
```

在上面的示例中，AJAX 请求是相对于域进行的。我们知道，如果我们尝试在路径前添加不同的域，请求将失败并出现安全异常。

但是，这并不是说浏览器不能向另一个域发出请求。这是您可能熟悉的示例：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

根据我们对如何在页面上导入 JavaScript 的了解，我们看到可以加载存在于另一个域中的资源！

JSONP 是一个利用这一知识的概念。JSONP 代表“带有填充的 JSON”，它的成功取决于 JavaScript 对象可以使用字符串表示法表示，以及 JavaScript 脚本标签可以从外部域加载和运行内容的事实。

在引擎盖下，jQuery 的 JSONP 看起来像这样，虽然它可能不准确：

```
// programmatically load a script tag on the page using the given url
function loadRemoteData(url) {
    var script = document.createElement("script");
    script.setAttribute("type","text/javascript");
    script.setAttribute("src", url);
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

此外，在页面某处，我们定义了一个回调处理程序：

```
function processData(jsonResult) {
    alert(JSON.stringify(jsonResult)); //alert the JSON as a string
} 
```

在这里，我们提出请求：

```
// make a request for the data using the script tag remoting approach.
loadRemoteData("http://example.com/users.php?userId=123&callback=processData"); 
```

为了使其正常工作，我们的 PHP 脚本必须以 JSON 格式返回数据，并且还必须以 JavaScript 函数名称的形式在字符串周围添加“填充”，我们可以将其作为参数传入（即“回调” )

因此，如果我们在 Firebug 或 Chrome NET 选项卡中查看它，来自服务器的响应可能看起来像这样：

```
processData( { "userId" : "123" , "name" : "James" , "email" : "example@example.com" } ); 
```

因为我们知道 JavaScript 内容在下载后立即运行，所以`processData`我们之前定义的函数会立即被调用，并将我们的 JSON 字符串作为参数传递。然后它会收到警报，使用 JSON.stringify 将对象转换回字符串。

由于它是一个对象，我还可以访问它的属性，如下所示：

```
function processData(jsonResult) {
    alert(JSON.stringify(jsonResult)); //alert the JSON as a string

    // alert the name and email
    alert("User name is " + jsonResult.name + " and email is " + jsonResult.email);
} 
```

最后，让我们进入主要问题：**JSONP 可以用于获取 XML，还是可以跨域解析 XML？** 正如其他人指出的那样，答案是一个响亮的“否”，但让我们通过一个例子来看看为什么：

```
processData(<?xml version="1.0"><user><userid>12345</userid><name>James</name><email>example@example.com</email></user>); 
```

现在，如果将原始 XML 传递给函数会发生什么？它将中断，因为 JavaScript 无法将 XML 转换为 JSON。

但是，假设我们将 XML 放在引号中：

```
processData("<?xml version="1.0"><user><userid>12345</userid><name>James</name><email>example@example.com</email></user>"); 
```

现在，在这个例子中， jsonResult 变量实际上接受了一个字符串，我们可以使用它。使用一些 JavaScript XML 解析实用程序，我们可以将该字符串加载到 XML DOM Parser 中并使用它来处理！

但是，它不是纯 XML，它仍然是底层的 JavaScript 响应。PHP 服务器的响应类型仍然是 text/javascript，我们仍然使用脚本标签来加载真正只是纯 JavaScript 的内容。

总之，您可以使用“XMLP”或带填充的 XML（我只是编造的，这不是真的！），但如果您要经历实际修改响应以返回函数回调的所有麻烦wrapper，您也可以将输出转换为 JSON，让浏览器自动本地处理转换，省去使用 XML 解析器的麻烦。

但是如果出于某种原因将数据保存为 XML 格式更容易，您可以修改响应并为其提供 JavaScript 包装器。

如果您将来自遗留应用程序的 XML 数据存储在数据库中，并且您使用脚本标记远程处理或 JSONP 调用将其返回到客户端，那么我认为这很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T17:00:55.313

我找到了一个很好的解决方案来从跨域 ajax 请求中检索 xml。

从 jQuery 1.5 开始，您可以使用 dataType "jsonp xml" (http://api.jquery.com/jQuery.ajax/) ！

所以我用了这个：

```
$.ajax({
            type: "GET",
            url: "http://yoururl",
            dataType: "jsonp xml",
            success: function(xmlResponse) { // process data }
        }); 
```

我的 Web 服务的服务器端用于将 xml 字符串结果封装在 jQuery 创建的回调中：

```
private static Stream GetXmlPStream(string result, string callback)
        {
            if (result == null)
                result = string.Empty;

            result = EncodeJsString(result);

            if (!String.IsNullOrEmpty(callback))
                result = callback + "(" + result + ");";

            byte[] resultBytes = Encoding.UTF8.GetBytes(result);

            if (WebOperationContext.Current != null)
                WebOperationContext.Current.OutgoingResponse.ContentType = "application/xml";
            return new MemoryStream(resultBytes);
        } 
```

以及您需要清理 xml 字符串（以便 javascript 可以解析它）的魔法方法（我在另一个 Stack 线程中找到它）：

```
private static string EncodeJsString(string s)
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("\"");
            foreach (char c in s)
            {
                switch (c)
                {
                    case '\"':
                        sb.Append("\\\"");
                        break;
                    case '\\':
                        sb.Append("\\\\");
                        break;
                    case '\b':
                        sb.Append("\\b");
                        break;
                    case '\f':
                        sb.Append("\\f");
                        break;
                    case '\n':
                        sb.Append("\\n");
                        break;
                    case '\r':
                        sb.Append("\\r");
                        break;
                    case '\t':
                        sb.Append("\\t");
                        break;
                    default:
                        int i = (int)c;
                        if (i < 32 || i > 127)
                        {
                            sb.AppendFormat("\\u{0:X04}", i);
                        }
                        else
                        {
                            sb.Append(c);
                        }
                        break;
                }
            }
            sb.Append("\"");

            return sb.ToString();
        } 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-07T12:34:02.047

我意识到这是一个老问题，但我在搜索时发现了这个。而且，我认为答案是针对与此处发布的问题略有不同的问题，因此我想添加此答案，该答案至少应适用于 jQuery 1.12 及更高版本。我没有在早期版本中测试过。

好的，我想请求这个 URL：`http://sample.domain/feeds/itemdata.xml`

我想找到`Item`如下所示的内容：

```
<Item>
  <ProductItemNo>1228101530</ProductItemNo>
  ...
</Item> 
```

这有效，跨域：

```
$.ajax({
  dataType: "xml", 
  url: "http://sample.domain/feeds/itemdata.xml", 
  success: function(xml) {
    var itemdata = $(xml).find("ProductItemNo:contains('1228101530')").parent();
  }
}); 
```

# asp.net - 从 asp.net 页面下载 excel 问题？

> ID：10068964
> 
> 赞同：0
> 
> 时间：2012-04-09T04:41:14.810
> 
> 标签：asp.net, vb.net

我在使用我的 aspx 页面之一下载 excel 时遇到问题。Excel 文件大小仅为 256KB。

从所有 aspx 页面下载文件，但从一个 aspx 页面除外。我不明白为什么会这样。不仅如此，它还在开发和质量保证环境中工作，而且当我们将相同的代码推送到生产环境时。它不工作。

## 更新

在 Master Page 菜单项上下载代码。

## 母版页

```
ElseIf e.Item.Text = "Download" Then              
             ResponseHelper.DownloadExcel() 
```

## 响应助手.vb

Public Shared Sub DownloadExcel() GenerateData() End Sub Public Shared Sub GenerateData() Dim response As HttpResponse response = System.Web.HttpContext.Current.Response

```
 Dim sqlDs As New DataSet
    Dim sqlCmd As New SqlClient.SqlCommand
    Dim sqlDa As New SqlClient.SqlDataAdapter
    Dim SqlCnn As New SqlClient.SqlConnection(AppSettings("dbKey"))

    --All ADO.Net statements here

    If sqlDs.Tables(0).Rows.Count > 0 Then
        Dim dtAllDownload As DataTable = sqlDs.Tables(0)
        Dim dtChinaManufacturing As New DataTable
        Dim dtChinaHealthcare As New DataTable
        Dim dtChinaManagement As New DataTable
        Dim dtChinaSelling As New DataTable

        Dim dv As DataView
        dv = New DataView(sqlDs.Tables(0), "GL_Source='Manufacturing'", "Id", DataViewRowState.CurrentRows)
        dtChinaManufacturing = dv.ToTable

        dv = New DataView(sqlDs.Tables(0), "GL_Source='Healthcare'", "Id", DataViewRowState.CurrentRows)
        dtChinaHealthcare = dv.ToTable

        dv = New DataView(sqlDs.Tables(0), "GL_Source='Management'", "Id", DataViewRowState.CurrentRows)
        dtChinaManagement = dv.ToTable

        dv = New DataView(sqlDs.Tables(0), "GL_Source='Selling'", "Id", DataViewRowState.CurrentRows)
        dtChinaSelling = dv.ToTable

        dv.Dispose()

        Using pck As New ExcelPackage()
            'Create the worksheets
            Dim wsAll As ExcelWorksheet = pck.Workbook.Worksheets.Add("All")
            Dim wsChinaManufacturing As ExcelWorksheet = pck.Workbook.Worksheets.Add("Manufacturing")
            Dim wsChinaHealthcare As ExcelWorksheet = pck.Workbook.Worksheets.Add("Healthcare")
            Dim wsChinaManagement As ExcelWorksheet = pck.Workbook.Worksheets.Add("Management")
            Dim wsChinaSelling As ExcelWorksheet = pck.Workbook.Worksheets.Add("Selling")

            'Load the datatable into the sheet, starting from cell A1\. Print the column names on row 1

            wsAll.Cells("A1").LoadFromDataTable(dtAllDownload, True)
            If dtChinaManufacturing.Rows.Count > 0 Then
                wsManufacturing.Cells("A1").LoadFromDataTable(dtManufacturing, True)
            End If

            If dtChinaHealthcare.Rows.Count > 0 Then
                wsChinaHealthcare.Cells("A1").LoadFromDataTable(dtHealthcare, True)
            End If

            If dtChinaManagement.Rows.Count > 0 Then
                wsChinaManagement.Cells("A1").LoadFromDataTable(dtManagement, True)
            End If

            If dtChinaSelling.Rows.Count > 0 Then
                wsChinaSelling.Cells("A1").LoadFromDataTable(dtSelling, True)
            End If

            'wsAll.Cells(1, 1, dtAllDownload.Rows.Count - 1, dtAllDownload.Columns.Count).AutoFitColumns(30)
            wsAll.defaultColWidth = 20

            'Write it back to the client

            Dim filename As String = "FullExtract_" & Now.Year.ToString & Now.Month.ToString & Now.Day.ToString & ".xlsx"
            response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
            response.AddHeader("content-disposition", "attachment;  filename=" & filename)
            response.BinaryWrite(pck.GetAsByteArray())
            response.End()

        End Using
    End If
End Sub 
```

## 此下载给出错误的 Aspx 页面。

[http://uploading.com/files/18b59f94/Observations.aspx/](http://uploading.com/files/18b59f94/Observations.aspx/)

## 错误截图

![在此处输入图像描述](../Images/af654f34ed9b3fa4977d617c12c3c894.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:09:16.877

您是否尝试过使用其他内容类型？请改用“application/vnd.ms-excel”。

祝你好运！

# expect - 在期望脚本中调用 & 执行 shell 脚本

> ID：10068966
> 
> 赞同：0
> 
> 时间：2012-04-09T04:41:59.613
> 
> 标签：expect

```
#!/usr/bin/expect
spawn ssh derrick@$abc123.net
expect "password"
send "helloworld\n"
send "cd /tmp\n"
send "sh rename.sh\n" # this shell script will get a list of files and rename each file
send "exit\n"
expect eof 
```

问题是在`'rename.sh'`启动后不到 3 秒内，`'expect'`脚本在`'rename.sh'`尚未执行完毕的情况下退出。

我的问题是如何让我的期望脚本等待“rename.sh”执行完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T20:48:38.197

你可以在期望脚本中使用超时

示例：设置超时<以秒为单位>

设置超时 8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T04:57:57.030

我终于发现一开始就禁用超时是可行的。

# netbeans - 带有 Netbeans 的 Twitter 4j

> ID：10068976
> 
> 赞同：0
> 
> 时间：2012-04-09T04:43:52.180
> 
> 标签：netbeans, twitter4j

第一次发海报，但我真的被卡住了。我正在做一个小项目，我正在尝试使用 netbeans 项目发送一条推文。我正在使用 twitter4j，似乎最近事情已经改变到您必须使用他们的 OAuth 功能的地方。我在 twitter 上创建了一个应用程序并尝试了一些代码，但我一直收到此错误：线程“main”中的异常连接超时相关讨论可以在 Internet 上：

```
http://www.google.co.jp/search?q=b2b52c28 or
http://www.google.co.jp/search?q=1b442895 
TwitterException{exceptionCode=[b2b52c28-1b442895 b2b52c28-1b44286b], statusCode=-1, retryAfter=-1, rateLimitStatus=null, featureSpecificRateLimitStatus=null, version=2.2.5}
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:200)
at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:65)
at twitter4j.internal.http.HttpClientWrapper.post(HttpClientWrapper.java:102)
at twitter4j.TwitterImpl.post(TwitterImpl.java:1929)
at twitter4j.TwitterImpl.updateStatus(TwitterImpl.java:433)
at login.Login.start(Login.java:36)
at login.Login.main(Login.java:63)
Caused by: java.net.SocketTimeoutException: connect timed out
at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:75)
at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
at java.net.Socket.connect(Socket.java:579)
at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:483)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:213)
at sun.net.www.http.HttpClient.New(HttpClient.java:300)
at sun.net.www.http.HttpClient.New(HttpClient.java:316)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:992)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:928)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:846)
at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1087)
at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:158)
... 6 more
Java Result: 1 
```

我不完全确定我做错了什么。下面是我尝试过的代码。

```
package login;

import java.io.IOException;

import twitter4j.ResponseList;
import twitter4j.Status;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.auth.AccessToken;

public class Login {

    private final static String CONSUMER_KEY = "******";
    private final static String CONSUMER_KEY_SECRET =
     "******";

    public void start() throws TwitterException, IOException {

 Twitter twitter = new TwitterFactory().getInstance();
 twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_KEY_SECRET);

 // here's the difference
 String accessToken = getSavedAccessToken();
 String accessTokenSecret = getSavedAccessTokenSecret();
 AccessToken oathAccessToken = new AccessToken(accessToken,
  accessTokenSecret);

 twitter.setOAuthAccessToken(oathAccessToken);
 // end of difference

 twitter.updateStatus("Hi, im updating status again from Namex Tweet for Demo");

 System.out.println("\nMy Timeline:");

 // I'm reading your timeline
 ResponseList list = twitter.getHomeTimeline();
/* for (Status each : list) {

     System.out.println("Sent by: @" + each.getUser().getScreenName()
      + " - " + each.getUser().getName() + "\n" + each.getText()
      + "\n");
 }*/

    }

    private String getSavedAccessTokenSecret() {
 // consider this is method to get your previously saved Access Token
 // Secret
 return "oC8tImRFL6i8TuRkTEaIcWsF8oY4SL5iTGNkG9O0Q";
    }

    private String getSavedAccessToken() {
 // consider this is method to get your previously saved Access Token
 return "102333999-M4W1Jtp8y8QY8RH7OxGWbM5Len5xOeeTUuG7QfcY";
    }

    public static void main(String[] args) throws Exception {
            new Login().start();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T12:59:36.900

我可以建议一条替代路线吗..

我最近一直在搞乱 twitter4j，但我的处理方式略有不同——我找到了一种很好且简单的方法来使用 ConfigurationBuilder 对象对客户端进行身份验证，并将其传递给获取所需 Twitter 对象实例的工厂。

```
package main;

import twitter4j.Twitter;
import twitter4j.TwitterFactory;
import twitter4j.TwitterStream;
import twitter4j.TwitterStreamFactory;
import twitter4j.conf.ConfigurationBuilder;

public class Base {

    protected Twitter twitter;
    //protected TwitterStream twitterStream;
    private ConfigurationBuilder configBuilder;

    public Base(){

        configBuilder = new ConfigurationBuilder();
        configBuilder.setDebugEnabled(true);        
        configBuilder.setOAuthConsumerKey("[consumer key here]");
        configBuilder.setOAuthConsumerSecret("[consumer secret key here]");
        configBuilder.setOAuthAccessToken("[OAuthAccessToken here]");
        configBuilder.setOAuthAccessTokenSecret("[secret OAuthAccessToken here]");

        //use the ConfigBuilder.build() method and pass the result to the TwitterFactory
        TwitterFactory tf = new TwitterFactory(configBuilder.build());
        //you can now get authenticated instance of Twitter object.
        twitter = tf.getInstance();
    }
} 
```

然后，您可以使用实现所需功能的子类来扩展此类，或者在代码的其他位置创建 ConfigurationBuilder/TwitterFactory/Twitter 对象。

下面我实现了一个创建状态的类，并且可以返回包含附加信息的状态对象，例如 createdAt() 和 ID 等。

```
package main;

import twitter4j.Status;
import twitter4j.TwitterException;

public class StatusUpdater extends Base{   

    public StatusUpdater(){}

    public Status updateStatus(String statusToUpdate) throws TwitterException{
        Status status = twitter.updateStatus(statusToUpdate);
        System.out.println("statusToUpdate: " + status + ".");
        return status;
    }
} 
```

然后您可以使用以下语句来创建状态。这可以通过 mbean/ejb/servlet 等来完成。

```
 try {
            StatusUpdater statusUpdater = new StatusUpdater();
            String statusTextToSet = "test status";
            Status updatedStatus = statusUpdater.updateStatus(statusTextToSet);
            System.out.println("Created at: " + updatedStatus.getCreatedAt());
        } catch (TwitterException tex) {
            System.out.println(tex.getErrorMessage());
        } 
```

有关配置过程的更多信息在[这里](http://twitter4j.org/en/configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T05:11:59.117

你的代码看起来不错。您是否确认您确实为您的应用使用了正确的消费者密钥和秘密？尝试`twitter.verifyCredentials()`查看您是否收到相同的错误或更具体的错误。

如果您通过代理更正到网络，则需要包括您的代理设置以允许连接成功，可以在此处找到详细信息[http://twitter4j.org/en/configuration.html#HTTP%20proxy% 20服务器](http://twitter4j.org/en/configuration.html#HTTP%20proxy%20server)

顺便说一句，您可能希望从您的帖子中删除您的访问令牌和密码，如果它们仍然有效，那么有人可以使用他们登录您的帐户。

# android - 在 Android 中通过 HTTPS 请求使用 SOAP+XML 的 Exchange Web Services 2007/2010

> ID：10068979
> 
> 赞同：6
> 
> 时间：2012-04-09T04:44:43.263
> 
> 标签：android, exchangewebservices

我使用来自 Microsoft 的以下 C# 代码请求 EWS 2010 [MSDN 链接](http://msdn.microsoft.com/en-us/library/cc526065.aspx)并且它有效。我需要为 android 提供相同的解决方案。

我尝试使用以下代码，但没有帮助

```
 DefaultHttpClient client = new HttpsClient(
                MyActivity.this);

        requestBytes = myXMLStringRequest.getBytes("UTF-8");

        HttpPost httpPost = new HttpPost(url);
        httpPost.setHeader("Content-Type", "text/xml;utf-8");
        if (requestBytes != null) {
            httpPost.setHeader("Content-length",
                    String.valueOf(requestBytes.length));
            Log.d(TAG, "content length: " + requestBytes.length);
        }

        client.getCredentialsProvider().setCredentials(
                new AuthScope(url, 443),
                new UsernamePasswordCredentials(userName,
                        password));
        Log.d(TAG, "Begin request");
        HttpResponse response = client.execute(httpPost);
        Log.d(TAG, "status Line: " + response.getStatusLine().toString()); 
```

这是我的 xml 请求

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns="http://schemas.microsoft.com/exchange/services/2006/messages" 
xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types"> 
<soap:Body>
<GetFolder xmlns="http://schemas.microsoft.com/exchange/services/2006/messages"                xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types">   
<FolderShape>     
    <t:BaseShape>Default</t:BaseShape>  
</FolderShape>    
<FolderIds>      
    <t:DistinguishedFolderId Id="inbox"/>     
    <t:DistinguishedFolderId Id="deleteditems"/>  
</FolderIds> 
</GetFolder> 
```

我还将自定义 HttpsClient 与密钥库一起使用。

```
public class HttpsClient extends DefaultHttpClient {
private final Context context;

public HttpsClient(final Context context) {
    super();
    this.context = context;
}

/**
 * The method used to create client connection manager
 */
@Override
protected ClientConnectionManager createClientConnectionManager() {
    final SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 8080));

    // Register for port 443 our SSLSocketFactory with our keystore
    // to the ConnectionManager
    registry.register(new Scheme("https", newSslSocketFactory(), 8443));
    return new SingleClientConnManager(getParams(), registry);
}

private SSLSocketFactory newSslSocketFactory() {
    try {
        // Get an instance of the Bouncy Castle KeyStore format
        final KeyStore trusted = KeyStore.getInstance("BKS");
        // Get the raw resource, which contains the keystore with
        // your trusted certificates (root and any intermediate certs)
        final InputStream inputStream = context.getResources().openRawResource(R.raw.parkgroup_ws_client);
        try {
            // Initialize the keystore with the provided truste
            // certificates
            // Also provide the password of the keystore
            trusted.load(inputStream, "myKeyStorePassword".toCharArray());
        } finally {
            inputStream.close();
        }
        // Pass the keystore to the SSLSocketFactory. The factory is
        // responsible
        // for the verification of the server certificate.
        final SSLSocketFactory ssf = new SSLSocketFactory(trusted);
        // Hostname verification from certificate
        // http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d4e506
        ssf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
        return ssf;
    } catch (Exception e) {
        Log.e("MYTAG", e.getMessage());
        throw new AssertionError(e);
    }
}

@Override
protected HttpParams createHttpParams() {
    final HttpParams httpParams = super.createHttpParams();
    httpParams.setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, 1000);
    httpParams.setParameter(CoreConnectionPNames.STALE_CONNECTION_CHECK, false);
    return httpParams;
} 
```

}

但它总是显示“*连接超时*”并且没有响应
请告诉我我的问题在哪里？任何例子都会有所帮助。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T10:57:13.130

非常感谢 Nikolay Elenkov！

最后，我找到了解决方案。我点击此链接：[在 Android 上使用自定义证书信任库](http://nelenkov.blogspot.com/2011/12/using-custom-certificate-trust-store-on.html)

首先，我使用`DefaultHttpClient`代替`HttpClient`（方法`createHttpClientWithDefaultSocketFactory()`应该是`return DefaultHttpClient`）：

```
private DefaultHttpClient createHttpClientWithDefaultSocketFactory(
        KeyStore keyStore, KeyStore trustStore) {
    try {
        SSLSocketFactory sslSocketFactory = SSLSocketFactory
                .getSocketFactory();
        if (keyStore != null && trustStore != null) {
            sslSocketFactory = new SSLSocketFactory(keyStore,
                    KEYSTORE_PASSWORD, trustStore);
        } else if (trustStore != null) {
            sslSocketFactory = new SSLSocketFactory(trustStore);
        }

        return createHttpClient(sslSocketFactory);
    } catch (GeneralSecurityException e) {
        throw new RuntimeException(e);
    }
} 
```

然后我添加`CredentialsProvider`身份验证。

```
 DefaultHttpClient client = createHttpClientWithDefaultSocketFactory(
                keyStore, trustStore);
        HttpPost httpPost = new HttpPost(SERVER_AUTH_URL);
        httpPost.setHeader("Content-type", "text/xml;utf-8");

        StringEntity se = new StringEntity(builder.toString(), "UTF8");
        se.setContentType("text/xml");
        httpPost.setEntity(se);
        CredentialsProvider credProvider = new BasicCredentialsProvider();

        credProvider.setCredentials(new AuthScope(URL,
                443), new UsernamePasswordCredentials(USERNAME, password));

        // This will exclude the NTLM authentication scheme

        client.setCredentialsProvider(credProvider);
        HttpResponse response = client.execute(httpPost); 
```

现在，它可以正常工作了！

# javascript - setTimeout 返回什么？

> ID：10068981
> 
> 赞同：48
> 
> 时间：2012-04-09T04:45:04.287
> 
> 标签：javascript

我很好奇 setTimeout 会返回什么。所以我做了一个快速测试：

```
var thing = setTimeout(function(){},1); 
```

令我惊讶的是，它给了我一个数字。`1351`每次都不一样。

那么它返回的真的只是一个数字吗？所以我实际上也可以这样做吗？

```
clearTimeout(1351); 
```

很混乱...

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-09T04:46:48.083

它是一个句柄（一个唯一标识符）。当您创建超时时，JavaScript 运行时会将句柄与您创建的超时相关联，并且它可以通过句柄`setTimeout()`返回来识别该超时。当你运行时`clearTimeout()`，它会通过查看你传入的唯一句柄来知道你在谈论什么超时。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-15T07:34:32.620

它可以是一个`Object`，我用它测试过`node.js`：

```
var sto = setTimeout(
    function(){console.log('ping');}, 
    1000
);

console.log(sto); 
```

输出是：

```
{ _idleTimeout: 1000,
  _idlePrev:
   { '0': [Function: listOnTimeout],
     _idleNext: [Circular],
     _idlePrev: [Circular],
     msecs: 1000 },
  _idleNext:
   { '0': [Function: listOnTimeout],
     _idleNext: [Circular],
     _idlePrev: [Circular],
     msecs: 1000 },
  _idleStart: 2413359232,
  _onTimeout: [Function],
  _repeat: false,
  domain:
   { domain: null,
     _events: { error: [Function] },
     _maxListeners: undefined,
     members: [] } } 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-09T04:48:41.283

你可以把它想象成一个`timerID`，它唯一地标识一个定时器，这样你就可以通过`clearTimeout(timerID)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-10T14:08:38.693

它是一个任务 ID（我更愿意认为它是一个 task_ID 而不是一个让每个人都感到困惑的 Timeout_ID）。

假设您必须启动一个默认功能：“f_cup_of_tea”，任何普通人在您的网站上停留 5 分钟后最终都会需要该功能。：

```
tea_Task_ID = window.setTimeout(f_cup_of_tea, (5*60*1000), 15, 2); 
```

比如：function f_cup_of_tea(milk_ml, sugar) { .... }

但不幸的是，晚了十秒，迷幻药使用者更愿意得到与整个世界不同的东西，并选择了bad_tequila ...

您必须在五分钟内取消预定的美味“f_cup_of_tea”......幸运的是javascript想到了这种问题，您可以使用：

```
window.clearTimeout(tea_Task_ID); 
```

（但只有在“ f_cup_of_tea ”尚未启动时才有效）。

接下来，您可以启动：

```
tequila_Task_ID = window.setTimeout(f_bad_tequila, (5*1000), 0);  // for in 5s, with zero ice... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T06:48:50.567

实际上，您应该非常小心地清除超时帽子方式，因为该数字在某些情况下可能会发生变化。例如，如果您在代码中的某处添加另一个超时（意外地在此之前（1351），此 id 可能会更改为 1352。因此您清除超时将清除不同的超时。最好的方法是使用变量；

```
let test = "set_Timeout(() => {
    alert("hi")
}, 3000);

clear_Timeout(test); 
```

# qt - 为什么在 exec() 之前调用 quit() 不会退出应用程序？

> ID：10068983
> 
> 赞同：8
> 
> 时间：2012-04-09T04:45:39.177
> 
> 标签：qt

为什么这个程序运行正常并显示主窗口？我希望它退出，因为`quit()`在构造函数中被调用。

**主要.cpp：**

```
#include<QApplication>
#include"MainWindow.h"

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);
    MainWindow mainWindow;
    mainWindow.show();
    return app.exec();
} 
```

**主窗口.cpp：**

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent)
{
   qApp->quit();
}

void MainWindow::closeEvent(QCloseEvent *)
{
    qDebug("Hello world!");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-06-26T20:12:42.140

Since `QCoreApplication::quit()` is a no-op until the event loop has been started, you need to defer the call until it starts. Thus, queue a deferred method call to `quit()`.

The following lines are [functionally identical](https://stackoverflow.com/a/24153731/1329652), either one will work:

```
QTimer::singleShot(0, qApp, &QCoreApplication::quit);
//or
QTimer::singleShot(0, qApp, SLOT(quit()));
// or - see https://stackoverflow.com/a/21653558/1329652
postToThread([]{ QCoreApplication::quit(); });
// or
QMetaObject::invokeMethod(qApp, "quit", Qt::QueuedConnection); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-09T07:18:11.047

调用`QCoreApplication::quit()`与调用相同`QCoreApplication::exit(0)`。

如果您查看后一个函数的[文档](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#exit)：

> 调用此函数后，应用程序离开主事件循环并从对 exec() 的调用中返回。exec() 函数返回 returnCode。**如果事件循环没有运行，这个函数什么也不做**。

在您的示例中，当调用 s 构造函数时，事件循环尚未启动`MainWindow`，因此调用`quit()`什么也不做。

# c# - 如何将 VS lightswitch 与 MS 访问数据库一起使用

> ID：10068989
> 
> 赞同：3
> 
> 时间：2012-04-09T04:46:25.620
> 
> 标签：c#, ms-access, entity-framework-4, wcf-ria-services, visual-studio-lightswitch

可以使用 WCF RIA 服务创建连接到 MS 访问数据库的 Lightswitch 应用程序。但是，我对 WCF 完全陌生，有关如何执行此操作的官方文档让我感到困惑。

我只想将我的电灯开关应用程序连接到现有的 MS 访问数据库。是否有关于如何实现这一目标的简化教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:27:04.817

[这是 Michael Washington 的一篇文章，它应该指导您完成设置 RIA 服务以供 Lightswitch 使用的步骤。](http://lightswitchhelpwebsite.com/Forum/tabid/63/aft/89/Default.aspx)

现在，MS Access 存在问题。EntityFramework 本身不支持访问，因此您应该添加“ADO.NET 实体数据模型”的步骤不会像那样工作。

在我看来，您有以下选择：

1.  将 ACCESS 数据库迁移到 SQL Server。
2.  将您的 ACCESS 数据库作为链接服务器添加到 SQL Server（Express Edition[免费]），然后创建一个新的 SQL 数据库，其中视图从链接服务器的访问表中获取数据。
3.  查找为 Access 编写的第三方提供商。
4.  建立自己的提供者
5.  ？？？

# visual-studio-2012 - 如何更改 Visual Studio 2012 安装目录？

> ID：10068991
> 
> 赞同：38
> 
> 时间：2012-04-09T04:46:33.297
> 
> 标签：visual-studio-2012

我已经使用 Windows 安装程序卸载了 VS11，并删除了几乎所有我能找到的与之相关的注册表项，但是当我尝试重新安装它时它仍然会弹出：

![](../Images/8834699b0263723b661983eeac5f1f0c.png)

而且我无法单击“...”或编辑路径。右键单击也无济于事。

我必须销毁什么来更改安装目录？

* * *

仍然在官方发布中发生：

![](../Images/856487ff48f67b7e835656a3158b6ad8.png)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-28T15:11:24.903

我遇到了同样的问题，但不是强迫我安装到“c:\program Files”，而是强迫我安装到我用于 Visual Studio RC 的目录中。使用 Process Monitor 和安装程序的日志文件后，我能够找到需要删除的注册表项。

钥匙位于

> HKLM\Software\Microsoft\Windows\CurrentVersion\Installer\UserData\S-1-5-21-776561741-789336058-725345543-318838\Components\31F687BD8A467D54C830E018D99F7F3B

对于其他系统，SID 很可能会有所不同，但您可能能够找到最后一个字符串 (31F687BD8A467D54C830E018D99F7F3B)

* * *

**为了找到钥匙，我做了以下事情：**

1.  从 Sysinternals 下载 ProcessMonitor
2.  使用过滤器启动 Processmonitor

    > 图片路径以 vs_premium.exe 结尾

3.  启动 vs_premium.exe

4.  关闭设置
5.  等到 Processmonitor 不再获取事件
6.  从 %TEMP% 打开最新的 dd_vs_premium_.log 文件
7.  搜索了一些东西并找到了

    > 条件“VS_Install_path_KeyExists”评估为假。（我想它会在受影响的系统上评估为真。我在干净的 Windows 安装上试过这个）

8.  它上面的一行说

    > 未找到注册表项。键 = 'SOFTWARE\Microsoft\VisualStudio\SxS\VS7'

9.  搜索

    > 微软\VisualStudio\SxS\VS7

    在进程监视器中

10.  ProcessMonitor 向下几行显示了我必须删除的密钥

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-17T18:26:16.427

一种更简单的方法对我有用：

1 - 从命令行运行安装程序，使用 /uninstall /force 开关，如下所示：

```
c:\vs_professional_ENU.exe /uninstall /force 
```

2 - 重新正常运行安装程序。

我在 Windows 10 下使用 VS2015 完成了此操作。 [参考链接。](https://social.msdn.microsoft.com/Forums/vstudio/en-US/114e18df-ffc5-442d-86c1-3b2ad4b28e36/change-visual-studio-2015-enterprise-installation-path?forum=vssetup)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-04T19:54:51.130

我发现的唯一解决方案是在 Windows 7 上创建指向您想要安装 Visual Studio 的目录的硬连接链接。

例如，我的 SSD 驱动器不是我的引导驱动器，它的驱动器号为 B:。

我运行以下命令行

mklink /J "C:\Program Files (x86)\Microsoft Visual Studio 11.0" "B:\Program Files (x86)\Microsoft Visual Studio 11.0"

对于安装程序和 Windows，它认为它已将其安装到 C: 驱动器上的 Program Files x86 目录中，而实际上它已将其安装到 B: 驱动器上的 Program Files x86 文件夹中。

这是有关在 Windows Vista 和 7 中创建 Junction 链接的页面链接。[http://www.howtogeek.com/howto/windows-vista/using-symlinks-in-windows-vista/](http://www.howtogeek.com/howto/windows-vista/using-symlinks-in-windows-vista/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-09T23:51:41.020

我没有代表对上面的帖子发表评论。尽管他在这些命令开关的语法中是正确的，但程序存在错误，它不适用于选择 CustomInstallPath。事实上，对我来说，它只是决定在进程列表中打开大约 50 次以上的 vs_ultimate.exe 迭代......

我会尝试上面提到的 Hard Junction，因为我相信它会起作用。

作为旁注，如果有人感兴趣，您可以使用允许您通过运行 vs_ultimate.exe /Layout X:\somefolder\ 提前获取安装的开关

我昨晚这样做了，希望我的安装会很快，因为我有所有的信息，但是我认为为了强制它使用离线版本，你必须运行 vs_ultimate.exe /noweb。

此页面指的是所有开关： http: [//msdn.microsoft.com/en-us/library/e2h7fzkw (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/e2h7fzkw(v=vs.110).aspx)

上面的页面指出： /p CustomInstallPath “在您指定的目录中安装所有可重新定位的包。” Thay 可能意味着默默地，无论它能够从根驱动器安装什么，它都会，但很难确定，我的 SSD 空间有限。

在我尝试硬连接之前，我也可以尝试上面的方法，看看会发生什么，然后在需要时将其卸载。将发布结果

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-04T19:19:50.433

尝试使用以下选项启动安装程序：

```
/p CustomInstallPath="[your_path]" 
```

例如：

```
vs_ultimate.exe /p CustomInstallPath="C:\MyDirectory" 
```

要查看所有选项，请使用开关**/?**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-02T03:30:29.550

我之前安装了 VS 2012 测试控制器。卸载它允许我更改安装路径。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-10-14T02:20:39.223

如何更改 Visual Studio 2012 安装目录？我必须销毁什么来更改安装目录？

答：您可以更改物理目录，而无需“破坏或更改”安装目录。这是另一种“更聪明地思考而不是更努力”的解决方案建议。

以下是您需要继续使用逻辑 M:\Program Files 目录并解决文件存储物理位置问题所需的具体材料详细信息。

它还可以很好地服务于社区的其他人，以便在使用 Beta 版本时进行更清洁、更可重复的安装、更少的努力和风险。它的风险较小，因为它封装了 beta 安装中的每个文件。想要从 beta 到 RC，没问题，只是不要安装 beta 驱动器，使用脱壳注册表清洁器，每次都将干净的驱动器重新安装到新的驱动器。

该过程使用可以根据需要登录和注销/备份的 PGP 磁盘。

最初，似乎可以只创建两个驱动器。不是这样。- 驱动器 #1 安装为 F:\ for f:\Program Files (x86)\Microsoft Visual Studio 11.0 这是我告诉 Visual Studio 安装程序安装文件的地方。它确实可以作为 2.7 Gigs 文件的可挂载容器。

*   驱动器 #2 作为文件夹安装在“C:\Program Files (x86)\”“Microsoft Visual Studio 11.0”上 安装文件夹的预期目的是收集剩余的 5.5 Gigs 文件。

实际创建的 33 个文件夹列表我必须移动到其他 PGP 文件夹。

这是您可以在安装程序将文件部署到它们之前创建的文件夹的包含列表。

```
C:\Program Files\Microsoft SQL Server
C:\Program Files\Microsoft SQL Server Compact Edition
C:\Program Files\Application Verifier
C:\Program Files\MSBuild
C:\Program Files\Microsoft
C:\Program Files\IIS Express
C:\Program Files\IIS
C:\Program Files\Microsoft Visual Studio 11.0

C:\Program Files (x86)\IIS
C:\Program Files (x86)\IIS Express

C:\Program Files (x86)\Microsoft ASP.NET
C:\Program Files (x86)\Microsoft Help Viewer
C:\Program Files (x86)\Microsoft SDKs
C:\Program Files (x86)\Microsoft SQL Server
C:\Program Files (x86)\Microsoft SQL Server Compact Edition
C:\Program Files (x86)\Microsoft WCF Data Services
C:\Program Files (x86)\Microsoft Web Tools
C:\Program Files (x86)\MSBuild
C:\Program Files (x86)\NuGet
C:\Program Files (x86)\Windows Kits

C:\Program Files (x86)\Common Files\Merge Modules
C:\Program Files (x86)\Common Files\Microsoft
C:\Program Files (x86)\Common Files\microsoft shared\DevServer
C:\Program Files (x86)\Common Files\microsoft shared\MSDesigners8
C:\Program Files (x86)\Common Files\microsoft shared\MSEnv
C:\Program Files (x86)\Common Files\microsoft shared\MSI Tools
C:\Program Files (x86)\Common Files\microsoft shared\SQL Debugging
C:\Program Files (x86)\Common Files\microsoft shared\SQL Server Developer Tools
C:\Program Files (x86)\Common Files\microsoft shared\TextTemplating
C:\Program Files (x86)\Common Files\microsoft shared\Visual Database Tools
C:\Program Files (x86)\Common Files\microsoft shared\VS7Debug
C:\Program Files (x86)\Common Files\microsoft shared\WF
C:\Program Files (x86)\Common Files\microsoft shared\Windows Simulator 
```

这是完美的预防；- 补丁管理器和补丁管理系统在无意和无监督的情况下，在故意无知的幸福中未经审计，违反了良好促进生产变更控制最佳实践的前提

*   编写代码的开发人员大多是随机工作的，并且真的不知道最终产品中的内容。

*   黑客利用构建环境。

可以使用 True Crypt 或 PGP 桌面。只是不是整个磁盘加密，必须能够挂载和卸载资源。

我很欣赏硬连接方法，但除非您安全地弹出和关闭驱动器，否则它提供的过程合规性很小，与安全 PGP 卸载/安装相比，既不安全也不可靠。开发人员只需打开驱动器电源并进行更改。

关于备份和恢复的努力程度，与硬盘连接的驱动器相比，备份 PGP 驱动器的工作量大致相同。但是不必记住哪些文件夹已连接，可能需要恢复以恢复开发环境的价值有利于包含所有需要的文件夹的较少数量的 .PGD 驱动器（即为您记住作为其功能的一部分）

将其视为一个环境，当要求是强制性的、非自由裁量的、绝对可审计的保证以实现可重现的安全构建时。为了实现该核心目标，它必须仅在其实际“需要”时可用，并且必须在不需要时加以保护。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-29T13:55:02.383

对我来说，最终的 Visual Studio 2012 想要安装到与（未安装的）测试版相同的路径中。我删除了 HKLM 中与设置目录完全匹配的大部分内容（以`\`eg结尾`C:\VS11Beta\`），然后设置让我再次选择。

可能不是 OP 的解决方案（`M:\Program Files`听起来太笼统而无法删除），但也许对于其他有这个问题的人来说。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-08-05T09:23:30.417

查看已安装的程序并查看是否已安装 Visual Studio 的实例，如果已安装，请将其删除并重新运行设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-09T19:48:21.337

对于仍在寻找解决方案的这个人，我尝试并从这个问题中学到的是，虽然“正常”（从控制面板）卸载并不是 VS 的每个签名都没有被删除。所以我们从命令行强制卸载以删除所有 VS 足迹。我发现堆栈溢出中的以下答案对我非常有用。

在命令行（管理员）中使用参数运行安装程序：

vs_community_ENU.exe /uninstall /force

然后：

运行 vs_community_ENU.exe（或专业/企业）。

[如何在不同的驱动器上安装 Visual Studio 2015](https://stackoverflow.com/questions/32029751/how-to-install-visual-studio-2015-on-a-different-drive?noredirect=1&lq=1)

# objective-c - 带有 NSShadow 减速的 WebView

> ID：10068995
> 
> 赞同：0
> 
> 时间：2012-04-09T04:47:20.830
> 
> 标签：objective-c, macos, cocoa, nsview

我有一个显示一些动画框的 web 视图，但是当我在视图中放置阴影时，它会变慢并严重滞后。没有阴影，webview 内容动画流畅。

*当您使用触摸板进行弹性滚动时，我实现了与 safari/chrome 类似的效果。看起来不错！但并不像我的灵感那样顺利。*

这是阴影设置的片段：

```
NSShadow *dropShadow = [[NSShadow alloc] init];
[dropShadow setShadowColor:[NSColor blackColor]];
[dropShadow setShadowOffset:NSMakeSize(0, 0)];
[dropShadow setShadowBlurRadius:5.0];

[webview setWantsLayer: YES];
[webview setShadow: dropShadow];

[dropShadow release]; 
```

--

**我的问题是：我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:26:33.040

您不应该调用`setWantsLayer:YES`. `WebView`不支持基于图层的 Web 视图。不幸的是，这实际上在 10.5 发行说明中已经指出并且没有改变。你需要想出一个替代的解决方案。

# objective-c - 如何有效地通过 tcp 发送对象

> ID：10068998
> 
> 赞同：0
> 
> 时间：2012-04-09T04:47:47.540
> 
> 标签：objective-c, ios, object, tcp, nsdata

好的，所以我的目标是构建一个易于使用的协议，用于通过 tcp 发送数据。基本上，它会通过 tcp 发送一条消息和一个对象（类型未知）。要发送，它只需要一个方法调用，而接收它也只需要一个。

所以这就是我想格式化“消息”的方式。

length_of_message - “作为消息的字符串” - length_of_Object - 对象

length_of_message 将是一组字节数。连同length_of_Object。

实际的消息字符串和实际的对象将是可变长度的。

如果不知道对象的实际类，我可以以某种方式将其声明为“通用对象”吗？然后从“通用对象”中获取其类名，消息会告诉接收者如何处理该对象？

如果它是一个常量对象类型会很简单，但我希望能够为需要发送/接收的任何对象使用一个发送函数和一个接收函数。

有什么建议么？

谢谢，安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T05:11:58.630

确保您没有重新发明轮子（除非这样做是您的主要目标）。

考虑到这一点，请考虑：

• 实施和使用 NSCoding 协议。它允许对复杂连接的对象图（包括循环）进行有效归档。

• 使用HTTP 代替原始TCP。虽然它在标头中增加了一点开销，但正文可以是直接编码的数据。更重要的是，HTTP 无处不在。它几乎可以路由任何东西，而其他协议可能会被阻止（想想代理服务器）。

• 通过HTTP，您可以利用压缩。如果您的通信管道的一侧是某种现有的 Web 服务器，它可能已经支持 gzip 通信。压缩 NSData（这将是 NSCoding 的结果）是微不足道的。

• 或者，坚持使用直板。

除非您确实有一些要求使上述方法不可行，否则您最好利用上述技术而不是推出新的技术。

话虽如此，你的提议很好。我可能会添加如下结构：

[标题][MSGID][LEN][TYPE][数据长度][POST]

POST 是一个已知的字节序列，接收者可以验证它以确保所有数据都被正确接收。或者您可以全力以赴并集成校验和。或者可以根据需要重复子片段（即 [LEN][TYPE][DATA] 一遍又一遍。