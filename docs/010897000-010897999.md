# StackOverflow 问答 10897000-10897999

# javascript - 将函数作为参数传递

> ID：10897003
> 
> 赞同：-1
> 
> 时间：2012-06-05T12:05:20.677
> 
> 标签：javascript

这是我的例子：

```
function a(b)
{
    b();
}

function b()
{
    alert("d");
}

function c()
{
    alert("e");
}

a(c);//Output e 
```

用小提琴：http: [//jsfiddle.net/YqeS3/](http://jsfiddle.net/YqeS3/)

如何从 a 触发真正的 b 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:12:26.000

如果您的 B 函数不是全局的，并且您不想使用命名约定，则可以创建一个附加函数

```
function d() {
    b();
} 
```

而是打电话给那个。我仍然认为你应该简单地命名你的参数和你的函数，因为它也会给任何其他人（包括你自己的未来版本）在查看你的代码时造成更少的混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:06:42.100

如果所有这些函数都在全局范围内定义，则可以使用：

```
window.b(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:14:19.387

函数 a 中的变量 b 只是一个局部变量，您可以随意命名。在 a 范围内调用它 b 将使您无法在函数范围内调用具有该名称的外部变量或函数。正如 Sirko 之前在这里回答的那样，您可以通过使用

```
window.b(); 
```

如果遇到问题，请考虑重命名作用域变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:07:33.360

您可以通过两种方法调用它

```
b();

a(b); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T12:08:21.223

假设您需要从 调用真正的函数`b`，`a`您应该编写：

```
window.b(); 
```

# .net - 在 .NET 上绘制大量二维数据

> ID：10897006
> 
> 赞同：1
> 
> 时间：2012-06-05T12:06:01.103
> 
> 标签：.net, graphics, visualization

需要使用 .NET 框架来可视化大量 2d 图形对象（绘制一些复杂结构的模式） - 例如在一个画布上 10-20000 个图元。假设我们有各自的硬件 - 具有多核 CPU、大量 RAM 和一些最新显卡的强大服务器 PC。根据书籍和 MSDN，解决方案是使用 WPF 及其硬件加速，特别是绘图子系统。我已经用 GeometryDrawings 和 VisualHost 实现了简单的场景，它相当不错，但有一个问题 - 可视化对象还需要具有不断变化的状态（即快速更改颜色而不重绘）并接受鼠标事件（单击、拖放) Freezables 不支持，因为它们不是框架元素。任何想法如何最有效地解决问题？我们的图形对象看起来非常像框架提供的 Shape 及其后代，但它肯定不符合性能要求。
* 编辑 *
图形对象可以具有简单的结构（红色矩形）和复杂的（包含路径的多个嵌套对象 - 随机形状的曲线）。对象可能重叠。分层（在某个特定时刻隐藏和显示特定对象）可以稍后作为附加功能实现。状态变化可能每 2-5 秒发生一次，由外部事件触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:16:49.180

一个词：**着色器。**

[这看起来像是](http://www.codeproject.com/Articles/71617/Getting-Started-with-Shader-Effects-in-WPF)在 WPF 中使用着色器的不错的教程。像素和顶点着色器本身对于绘制图元非常简单。

着色器将让您充分利用硬件加速。在一个不错的 GPU 上，10k 个基元算不了什么。

在这种情况下，逐帧更改颜色等是微不足道的。

大多数着色器教程都是针对 3D 的，但它们也适用于 2D。

你也可以看看 XNA。它本身不支持在 WPF 或 Winforms 窗口内放置 DirectX 上下文，但也有相当多的教程。XNA 非常强大，可以处理您需要的许多样板代码，例如矩阵操作等。即使您决定不使用 XNA，[create.msdn.com](http://create.msdn.com/en-US/)上的教程也很有教育意义。

**更新 10/2012**

XNA 实际上已经死了，但是有很多在 WPF 中使用着色器的例子。如果您的 C++ 技能达标，您可以使用[D3DImage 类](http://msdn.microsoft.com/en-us/library/system.windows.interop.d3dimage.aspx)在您的 WPF 表单上放置一个 Direct3D 窗口。XNA 样本的着色器内容和高级图形开发方法仍然很有价值。

如果您对 XNA 感到兴奋，请查看[MonoGame](http://monogame.codeplex.com)，它正在顺利推出。我成功地将它用于一些跨平台的 3D 东西（Win7、OSX、iOS）并且没有任何抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:07:12.430

如果您需要详细控制绘图的完成方式以及重绘哪些区域，请使用 GDI+（由 WinForms 使用）。

您可以使用 GDI+ 绘制位图对象，并且可以在更改时重新绘制它的任意部分。

AFAIK GDI+ 不是硬件加速的，所以我会做一个快速的基准测试。我的感觉是在你的情况下它会更快。

# jquery - jquery $(this) 是如何真正存储的？

> ID：10897013
> 
> 赞同：2
> 
> 时间：2012-06-05T12:06:21.153
> 
> 标签：jquery

请参阅[此](http://jsfiddle.net/dg2Hp/)基本示例：

```
<div id="cont">
   <input type=button value='button'>  
</div>
<input type=button value='button'> 
```

和脚本：

```
$('input').click(function(){
    console.log($(this));
    console.log($('#cont').has($(this)));
    console.log($('#cont').has($(this)).length);
    console.log("---");
    });​ 
```

`$(this)`根据console.log的两个按钮单击的值是相同的：

```
[<input type=​"button" value=​"button">​] 
```

为什么他们给出的结果仍然不同？

换句话说，当我控制台记录 $(this) 时，某些信息没有表示出来。此信息可能指向元素唯一 ID。但它是什么，它存储在哪里？为什么它没有显示在日志中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:13:55.147

它只是看起来是一样的，因为按钮具有相同的标记。

[编辑示例](http://jsfiddle.net/tricki/dg2Hp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:19:59.187

根据 API 规范

“给定一个表示一组 DOM 元素的 jQuery 对象，.has() 方法从匹配元素的子集构造一个新的 jQuery 对象。提供的选择器针对匹配元素的后代进行测试；该元素将被包含如果其任何后代元素与选择器匹配，则在结果中。”

[http://api.jquery.com/has/](http://api.jquery.com/has/)

'$('#cont').has($(this))' 的返回结果不是布尔值，而是匹配对象。

在您的情况下，具有 id 'cont' 的 div 包含第一个按钮但不包含第二个按钮。

因此，按下第一个按钮会返回 has 函数中包含的 div 并按下第二个对象不会返回任何 div，因为 div 不包含按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:15:44.013

我想我明白你在问什么。在 jQuery 函数中使用`this`与事件发生的元素相关。在您的情况下，发生点击事件的特定输入。尽管您的两个输入具有相同的 HTML，但它们是不同的元素。因此，如果您单击`#cont`div 之外的那个，则`console.log($('#cont').has($(this)));`不应返回任何内容。

# jboss - 持久性单元，不同的 hibernate.transaction.manager_lookup_class 属性

> ID：10897015
> 
> 赞同：2
> 
> 时间：2012-06-05T12:06:31.180
> 
> 标签：jboss, glassfish, weblogic, persistence.xml

我有 Java EE 应用程序，我的 EJB 模块有`persistence.xml`.

我将我的应用部署在 3 个应用服务器上：JBoss、GlassFish 和 WebLogic，每个服务器都需要自己的`hibernate.transaction.manager_lookup_class`属性。
WL 需求

```
<property name="transaction.manager_lookup_class" value="org.hibernate.transaction.WeblogicTransactionManagerLookup" /> 
```

JBoss 需求

```
<property name="transaction.manager_lookup_class" value="org.hibernate.transaction.JBossTransactionManagerLookup" /> 
```

玻璃鱼

```
<property name="transaction.manager_lookup_class"    
value="org.hibernate.transaction.SunONETransactionManagerLookup" /> 
```

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T11:58:48.783

解决方案是使用

```
<property name="hibernate.transaction.factory_class" value="org.hibernate.transaction.JTATransactionFactory"/> 
```

代替

```
<property name="transaction.manager_lookup_class" 
```

# java - 使用 xstream 反序列化 json 数组

> ID：10897016
> 
> 赞同：10
> 
> 时间：2012-06-05T12:06:33.003
> 
> 标签：java, json, deserialization, xstream

stackoverflow 上有很多关于如何使用 Gson 反序列化 json 数组的信息。

但是我怎么能用`XStream`jettison 做同样的事情呢？

这是json：

```
{"entity":[{"id":"1", "name":"aaa"}, {"id":"2", "name":"bbb"}]} 
```

这是`XStream`我尝试解析它的代码：

```
XStream xstream = new XStream(new JettisonMappedXmlDriver());
xstream.alias("entity", Entity[].class);
return (Entity[])xstream.fromXML(jsonString); 
```

我有以下例外：

```
com.thoughtworks.xstream.converters.ConversionException: id : id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-10T16:54:05.177

使用数组我无法让它运行，但是有一个列表：

爪哇：

```
package de.mosst.spielwiese;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

import org.junit.Test;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.annotations.XStreamAlias;
import com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;

import lombok.Data;

public class XStreamDeserializeJsonWithJettison {

    @Test
    @SuppressWarnings("unchecked")
    public void smokeTest() {
        InputStream file = XStreamDeserializeJsonWithJettison.class.getResourceAsStream("XStreamDeserializeJsonWithJettison.json");
        XStream xStream = new XStream(new JettisonMappedXmlDriver());
        xStream.processAnnotations(Entity.class);

        List<Entity> entities = (List<Entity>) xStream.fromXML(file);
        System.out.println(entities);
    }

    @Data
    @lombok.AllArgsConstructor
    @XStreamAlias("entity")
    class Entity {
        String id;
        String name;
    }
} 
```

XML:

```
{
    "list": [
        {
            "entity": [
                {
                    "id": 1,
                    "name": "odin"
                },
                {
                    "id": 2,
                    "name": "dwa"
                }
            ]
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T10:08:17.237

从[这个与根元素相关的答案](https://stackoverflow.com/questions/1263356/xstream-parse-json-with-no-root-node) 可以看出，当 JSON 中没有根元素时，**XStream失败。**

一旦将*实体映射到某个 Java 类，XStream 就无法找到**id*和*name*对的根元素（在 JSON 中，它们没有包含在元素中）。

只有手工制作的包装器、操作输入流或使用自定义转换器可以提供帮助。

# ios - iCloud 上传进度和密钥

> ID：10897019
> 
> 赞同：1
> 
> 时间：2012-06-05T12:06:54.477
> 
> 标签：ios, icloud

我正在尝试从我的一个应用程序将文件推送到 iCloud，但有时无法跟踪文件是否已经在 iCloud 上。在将文件标记为普遍存在后，我有一个方法可以通过 NSMetadataQuery 定期检查文件的状态。当我得到结果时，我使用这些键来获取文件的状态：

```
NSNumber *isUploaded = [file valueForAttribute:NSMetadataUbiquitousItemIsUploadedKey];
NSNumber *isUploading = [file valueForAttribute:NSMetadataUbiquitousItemIsUploadingKey];
NSNumber *uploadPercent = [file valueForAttribute:NSMetadataUbiquitousItemPercentUploadedKey]; 
```

这似乎有时有效，但在其他时候 isUploaded 值为 0 而 isUploading 值也为 0！uploadPercent 值实际上始终为 0。当我进入设备的“设置”应用程序并检查我的应用程序的文件时，这些文件已经在那里列出，所以我不确定为什么“NSMetadataUbiquitousItemIsUploadedKey”键会返回 0？

任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T01:21:16.303

我正在尝试做同样的事情。根据 iCloud 指南，尝试使用 NSURLUbiquitousItemIsUploadedKey 而不是 NSMetadataUbiquitousItemIsUploadedKey。让我知道这是否适合你。我仍然无法让这个工作。这是指南中的部分：

**确定文件或目录的传输状态**

您写入 iCloud 容器目录的项目会尽快自动传输到 iCloud 服务器。但是，根据网络和设备类型，文件可能不会立即上传到服务器或下载到设备。在需要了解文件状态的情况下，可以使用 的`getResourceValue:forKey:error:`方法`NSURL`检索以下属性之一的值：

*   `NSURLIsUbiquitousItemKey`— 指示项目是否存储在 iCloud 中。

    *   `NSURLUbiquitousItemIsDownloadedKey`— 指示当前版本的项目是否已下载并可访问。

    *   `NSURLUbiquitousItemIsDownloadingKey`— 指示是否正在下载项目的当前版本并且尚不可用。

    *   `NSURLUbiquitousItemPercentDownloadedKey`— 对于正在下载的项目，指示已下载更改的百分比。您可以使用此值来更新进度条。

    *   `NSURLUbiquitousItemIsUploadedKey`— 表示本地所做的更改已成功上传到 iCloud 服务器。

    *   `NSURLUbiquitousItemIsUploadingKey`— 表示本地所做的更改现在正在上传到 iCloud 服务器。

    *   `NSURLUbiquitousItemPercentUploadedKey`— 对于正在上传的项目，指示已将更改的百分比上传到服务器。

尽管 iCloud 服务器会主动拉取您的应用在本地所做的更改，但 iOS 设备通常不会从服务器拉取更改，直到您尝试访问该文件。如果您尝试打开当前正在下载的文件，iOS 会阻止发出打开请求的线程，直到文件下载并可供使用。因此，如果您担心潜在的延迟，请根据需要检查文件的当前状态，并可能更新您的用户界面以反映该文件尚不可用或当前正在下载。

有关可以为 URL 请求的属性的更多信息，请参阅*NSURL 类参考*。

# windows-phone-7 - 如何在 Windows Phone 应用程序中添加新的日历事件

> ID：10897032
> 
> 赞同：0
> 
> 时间：2012-06-05T12:07:57.620
> 
> 标签：windows-phone-7, class, calendar, appointment

我猜 Windows Phone 的约会课程是只读课程。任何人都可以建议我如何在 Windows Phone 7 应用程序中创建日历事件。是否有任何可用的 API。

谢谢，哈尔伯恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:07:16.137

[google 日历](https://developers.google.com/google-apps/calendar/)和[Windows Live 日历](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#calendar)都有一个 rest API。您可能可以通过调用这些方法来做一些事情。我从未尝试过其中任何一个，但它们可能值得一看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:38:33.523

您无法在 windows phone 7 中创建或编辑日历项目

# jquery - 将表单字段附加到 url

> ID：10897034
> 
> 赞同：1
> 
> 时间：2012-06-05T12:08:06.077
> 
> 标签：jquery, forms

我正在尝试将文本输入字段中的值（数量）附加到 url。我当然不能让它工作。

我所拥有的是：

```
<form class="formProduct" id="formProduct" action="#" method="post">
<input type="text" name="quantity" id="formProductQuantity" value="{{ product.stock.minimum }}" /> // text field with quantity
<a class="button blue opener" href="" title="{{ 'Add to cart' | t }}"><span>{{ 'Add to cart' | t }}</span></a> // submit button
</form>

<script>
 var addUrl = "http://shop.com/cart/add/123456/?quantity="; // 123456 is the product id

asset("#formProduct");

function asset(product){

    $(product + " input#formProductQuantity").val("1");
    $(product + " #formProductQuantity").keyup(function () {
         var val = $(product + " input#formProductQuantity").first().val();
    });

    $(product + " .opener").click(function() {
           var val = $(product + " input#formProductQuantity").first().val();

              // Go to page
              window.location.href = addUrl + val;

    });
 }
 </script> 
```

所以我尝试将表格中填写的数量传递给[http://shop.com/cart/add/123456/?quantity=100](http://shop.com/cart/add/123456/?quantity=100)例如。我在这个论坛上找到了上面的代码，但我无法让它工作。

欢迎任何帮助

**更新**

好的，感谢这里的所有帮助，我让它工作了。任何意见或修改仍然更受欢迎。函数代码如下所示：

```
<script type="text/javascript">
 var addUrl = "http://shop.com/cart/add/123456/?quantity="; // 123456  is the product id

 jQuery(document).ready(function(){
  asset("#formProduct");
  });
 function asset(product){

jQuery(product + " input#formProductQuantity").val("1");
jQuery(product + " #formProductQuantity").keyup(function () {
     var val = jQuery(product + " input#formProductQuantity").first().val();
});

jQuery(product + " .opener").click(function(event) {
  event.preventDefault();
   $.get($(this).attr('href'), function(data, status) {
       var val = jQuery(product + " input#formProductQuantity").first().val();

          // Go to page
          window.location.href = addUrl + val;
  $( "#dialog" ).dialog( "open" );
          return false;

  });
 })} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:36:31.233

您正在尝试将 Javascript 添加到提交按钮，以便它将通过 Javascript 运行，但仍将提交表单，因此不会发生 window.location.href。你需要做的是添加

> 返回假；

到你的资产（）函数的末尾：

```
$(product + " .opener").click(function() {
    var val = $(product + " input#formProductQuantity").first().val();

    // Go to page
    window.location.href = addUrl + val;
    return false;
}); 
```

这将阻止表单提交，允许您的 window.location.href 根据您的需要重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:34:08.533

你很亲密。如果您想要 #formProductQuantity 中的 val，请使用以下命令：

```
var val = $("#formProductQuantity").val();

var addUrl = "http://shop.com/cart/add/123456/?quantity=" + val
top.location = addUrl 
```

更新函数中的 href：{{ 'Add to cart' | t }} // 提交按钮

在你的函数中添加这个：

```
$(".opener").attr("href", "http://shop.com/cart/add/123456/?quantity=" + val ); 
```

现在锚已设置并准备就绪...然后当他们单击锚时，我们走了:-) 您还可以添加 target="_blank" 以在新页面中打开 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:09:54.530

我认为您可以使用 get 方法提交表单，它将通过 url 发送您的数据

# windows - 如何在 Windows 服务器上设置 Magento cron？

> ID：10897036
> 
> 赞同：1
> 
> 时间：2012-06-05T12:08:13.360
> 
> 标签：windows, magento

我的意思是，我知道在 Windows 中我必须使用计划任务服务，我只是不知道我应该执行什么命令。任何线索将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:02:58.277

所以是的，答案是获取 wget 的 windows 版本并使用它来调用 cron.php 页面：

"C:\Program Files(x86)\GNUWin32\bin\wget.exe" http:\mypage.com\cron.php

将其添加到 Windows 调度程序就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:15:45.103

Windows 不支持 Magento。但如果你想尝试，也许尝试运行 cron.php

# ajax - 304 未修改

> ID：10897038
> 
> 赞同：1
> 
> 时间：2012-06-05T12:08:20.537
> 
> 标签：ajax, drupal, caching

我已经编写了一个 Drupal 块和一个 ajax 调用来在加载块时刷新它（块内容）。（这是因为我启用了缓存）。

但现在我的问题是每当我访问缓存页面时，我都会收到响应 - “304 Not Modified”。因此，我没有得到我想要的正确内容。

我找到了一个解决方案，可以传递一个数字 - **new Date().getTime()** - 这样虽然页面被缓存，但由于下一个请求有另一个数字，我得到了正确的值。但这似乎很“丑陋”。:)

还有其他方法可以完成这项任务吗？

谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:15:39.740

使用[cacheexclude](http://drupal.org/project/cacheexclude)模块从缓存中排除该 URL。

# c# - Queryover 的动态 Where 条件

> ID：10897044
> 
> 赞同：1
> 
> 时间：2012-06-05T12:08:39.943
> 
> 标签：c#, .net, nhibernate, orm, queryover

我有一个应用程序，我正在尝试实现 DDD 概念。我的存储库类有一些列出实体的方法。我想知道如何使用 QueryOver 进行查询以使用`AND`运算符过滤分离，当参数填充时，示例

```
public IEnumerable<Product> FindProducts(string name, decimal? price, DateTime? validDate, int? stock, int? idSupplier)
{
   var query = Session.QueryOver<Product>().OrderBy(x => x.Name).Asc;

   if (!string.IsNullOrEmpty(name))
      // add where condition for name parameter

   if (price.HasValue)
      // add 'AND' where condition for price parameter

   if (validDate.HasValue)
      // add 'AND' where condition for validDate parameter

   if (idSupplier.HasValue)
      // add 'AND' where condition for idSupplier parameter

   // other possible conditions

   return query.List();
} 
```

在我使用 HQL 字符串查询之前有什么办法吗？呵呵呵呵

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:28:27.900

在这里，使用 PredicateBuilder：

如何：

```
IQueryable<Product> SearchProducts (params string[] keywords)
{
  var predicate = PredicateBuilder.False<Product>();

  foreach (string keyword in keywords)
  {
    string temp = keyword;
    predicate = predicate.Or (p => p.Description.Contains (temp));
  }
  return dataContext.Products.Where (predicate);
} 
```

PredicateBuilder 来源：

```
using System;
using System.Linq;
using System.Linq.Expressions;
using System.Collections.Generic;

public static class PredicateBuilder
{
  public static Expression<Func<T, bool>> True<T> ()  { return f => true;  }
  public static Expression<Func<T, bool>> False<T> () { return f => false; }

  public static Expression<Func<T, bool>> Or<T> (this Expression<Func<T, bool>> expr1,
                                                      Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.OrElse (expr1.Body, invokedExpr), expr1.Parameters);
  }

  public static Expression<Func<T, bool>> And<T> (this Expression<Func<T, bool>> expr1,
                                                       Expression<Func<T, bool>> expr2)
  {
    var invokedExpr = Expression.Invoke (expr2, expr1.Parameters.Cast<Expression> ());
    return Expression.Lambda<Func<T, bool>>
          (Expression.AndAlso (expr1.Body, invokedExpr), expr1.Parameters);
  }
} 
```

有关 PredicateBuilder 和 LinqKit 的更多信息，请访问此处：[http ://www.albahari.com/nutshell/linqkit.aspx](http://www.albahari.com/nutshell/linqkit.aspx)

# java - Java：在 readObject/writeObject 方法中传递参数

> ID：10897050
> 
> 赞同：3
> 
> 时间：2012-06-05T12:09:17.107
> 
> 标签：java, serialization

我重写了这些方法`readObject/writeObject`以自定义我的对象的序列化。问题是这些方法没有参数。无论如何在这些方法中传递参数以便我可以在我的序列化过程中使用它们？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:14:16.373

不，没有传递参数的选项，而且你为什么需要这样做。

序列化，反序列化是写入和读取一个对象状态的过程，所以你的类在被序列化或反序列化之前应该具有其中的所有属性。

应该没有任何理由将参数传递给这两种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:17:08.407

您不能更改读/写方法的签名。一种解决方法是设置序列化参数并将其存储在对象中，并在读/写方法中使用它们。

或者您可以创建一个静态类，例如 SerializationParameter，并将您的序列化参数存储在那里。由于它们是静态的，因此您不必为每个序列化对象在内存中复制它们。

# .net - C双打与.NET双打不同吗？

> ID：10897052
> 
> 赞同：10
> 
> 时间：2012-06-05T12:09:21.740
> 
> 标签：.net, c, floating-point

比较一些 C 代码和我试图替换它的 F#，我观察到最终结果存在一些差异。

备份代码，我发现即使存在差异 - 尽管很小。

代码首先从文件中读取数据。第一个数字的结果不同。例如，在 F# 中（更易于编写脚本）：

```
let a = 71.9497985840
printfn "%.20f" a 
```

我得到了预期的（对我而言）输出`71.94979858400000000000`。

但在 C 中：

```
a =  71.9497985840;
fprintf (stderr, "%.20f\n", a); 
```

打印出来`71.94979858400000700000`。

那个 7 是从哪里来的？

差异很小，但它困扰着我，因为我不知道为什么。（这也让我很困扰，因为它让我更难追踪我的两个版本的代码在哪里分歧）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T12:16:52.393

这是印刷的区别。将该值转换为 IEEE754`double`产生

```
Prelude Text.FShow.RealFloat> FD 71.9497985840
71.94979858400000694018672220408916473388671875 
```

但该表示`71.949798584`足以将该数字与其邻居区分开来。C，当被要求以小数点后 20 位的精度打印时，将值正确舍入为所需的位数，显然 F# 使用最短的唯一确定表示并用所需的 0 数填充它，就像 Haskell 一样.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T12:17:17.813

这只是不同的四舍五入。数字是相同的（至少根据 CPython）：

```
>>> '%.44f' % 71.94979858400000000000
'71.94979858400000694018672220408916473388671875'
>>> '%.44f' % 71.94979858400000700000
'71.94979858400000694018672220408916473388671875' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T21:16:02.373

区别在于 .NET System.Double.ToString() 方法，该方法将双精度数转换为字符串。您可以通过下载 SSCLI20 中提供的 CLR 源代码来查看相关代码。转换由 clr/src/vm/comnumber.cpp, COMNumber::FormatDouble() 函数完成。看起来[像这样](http://www.koders.com/cpp/fid03737280F05F3996789AC863BDE66ACB337C1E9B.aspx)，代码中的注释最能描述正在发生的事情：

```
//In order to give numbers that are both friendly to display and round-trippable,
//we parse the number using 15 digits and then determine if it round trips to the same
//value.  If it does, we convert that NUMBER to a string, otherwise we reparse using 17 digits
//and display that. 
```

C 运行时库没有该功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:29:05.923

其他答案充分解释了问题的根源（双精度和舍入）。

如果您的数字通常具有中等大小并且小数精度非常重要（比计算速度更重要），那么也许可以考虑使用 .NET`decimal`格式。这为您提供了 28-29 个精确的小数位精度，而没有像 double 那样的小数二进制舍入错误。限制是范围更小（没有大指数！）。

[http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-06T11:46:33.147

任何绊倒此的人的更多信息。

使用[此处](https://stackoverflow.com/questions/397692/how-do-i-display-the-binary-representation-of-a-float-or-double)找到的代码位，我已经确认（我相信）底层二进制表示（至少对于这个特定数字）是相同的断言。

这是代码示例 - 请注意“将零乘以零”以消除负零 - 这在转换为长时很难看。

```
//(C# this time)
var d = 71.9497985840;   //or other incoming double value
if(d == 0) d = d * d;    //for negative zero
var longval = System.BitConverter.DoubleToInt64Bits(d); // = 4634763433907061836 
```

在 C 中：

```
double d;
long long a;
d = 71.9497985840;      //or other incoming double value
if(d == 0) d = d * d;   //for negative zero
a = *(long long*)&d;    //= 4634763433907061836 
```

**更新**- 我跟进，发现在矩阵求逆过程中引入了差异，因为每个系统调用不同的库，以不同的方式实现求逆......

# apache-flex - 单击事件后如何防止滚动高级 DataGrid 项目？

> ID：10897054
> 
> 赞同：0
> 
> 时间：2012-06-05T12:09:23.730
> 
> 标签：apache-flex

当我在 Adv DataGrid 中双击选定行的单元格时，会出现一个带有 ok 按钮的警报，当单击 OK 按钮时，先前选择的行会取消选择，并且数据网格的第一行会突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:33:18.610

如果没有，请导入关闭事件。

```
import mx.events.CloseEvent; 
```

创建一个变量来保存 selectedIndex：

```
[Bindable]
public var idindex:int = new int(); 
```

在双击事件中获取高级数据网格的 selectedIndex。

```
protected function adg1_doubleClickHandler(event:MouseEvent):void
{
idindex = adg1.selectedIndex;
Alert.show("Double clicked here.", "Test Title", Alert.OK | Alert.CANCEL, this, ClassalertListener, null, Alert.OK);
} 
```

在警报的警报侦听器中，将 selectedIndex 设置回原来的值。

```
private function ClassalertListener(eventObj:CloseEvent):void 
{
            if (eventObj.detail==Alert.OK) 
            { adg1.selectedIndex = idindex; }
} 
```

# css - 如何在视口中居中一组 JQuery Mobile 单选按钮？

> ID：10897056
> 
> 赞同：3
> 
> 时间：2012-06-05T12:09:34.633
> 
> 标签：css, jquery-mobile, cordova, radio-button, centering

我正在PhoneGap（Cordova）之上使用JQuery Mobile 制作应用程序。我使用 Codiqa 为我的 UI 设计了一个线框。到目前为止看起来还不错，但是我将用来更改视图的单选按钮组没有居中 - 在 WVGA800 大小的 webkit 浏览器上，它向左偏移了大约 25 像素。当缩放为平板电脑形状时，该组离视口中心越来越远。

这是我的项目的 jsFiddle 链接，问题未解决 - [http://jsfiddle.net/jaspermogg/sahXy/1/](http://jsfiddle.net/jaspermogg/sahXy/1/)

这是我修复的项目的 jsFiddle 链接 - [http://jsfiddle.net/jaspermogg/NvMsK](http://jsfiddle.net/jaspermogg/NvMsK)

我想出了一个使用 JQuery 的解决方案，但我缺乏经验，不知道要触发哪个事件。

当我在 Webkit 中加载 UI 时，它会呈现 UI 前脚本，然后在 <1s 后刷新到后脚本状态。这看起来很蹩脚。我将脚本设置为在`$(window).load`.

问题：

1.  我应该寻找什么事件，你能告诉我如何实现吗？

2.  我的脚本是否在正确的位置 - 它应该在页面内部、它的原样还是外部？或者`head`甚至？

3.  用 JQ 做这件事感觉真的很愚蠢——肯定有办法用 CSS 做这件事吗？

提前感谢您提供的任何帮助！干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T13:25:03.623

我想我在上面的评论中回答了我自己的问题，所以通过接受我的回答来正式化它。

我最后做的是——

`visibility: hidden`(1)在 CSS 中设置单选按钮包含的 div 。

(2) 找出每个单选按钮的宽度并将它们相加。

(3) 将包含单选按钮的div的宽度设置为总宽度。

(4) 将可见性属性的更改链接到 (3) 上。

CSS必须像这样设置 -

```
#viewselector{
    margin: 0 auto;
    text-align: center;
    visibility: hidden;
} 
```

做（1）到（4）的代码如下 -

```
$(document).ready(function(){

    var idealwidth = 0

    $(".ui-radio").each(function(){
        idealwidth = idealwidth + $(this).width();
    });

    $("#viewselector").width(idealwidth).css('visibility','visible');

}); 
```

希望这对某人有帮助！

# websphere - 对 Websphere Application Server 中的安全功能的担忧

> ID：10897060
> 
> 赞同：0
> 
> 时间：2012-06-05T12:10:05.280
> 
> 标签：websphere

我对文件`security.xml`与`inbound/outbound SSL`websphere 应用程序服务器中附加图片之间的关系感到困惑。

文件`security.xml`位于此路径下`PROFILE_HOME/config/cells/CELL_NAME`

如果我通过将**`enable`**属性设置**`false`**为该 secuirty.xml 来禁用安全性，那么 SSL 功能是否也被禁用？这也意味着，如果**`enable`**设置为 ** `true**`，则相应地启用 SSL。

如果我理解错误，请纠正我。 ![在此处输入图像描述](../Images/d0d99c860d849af24ba0ee26b87fcdf5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T00:39:11.040

一般来说，安全性和 SSL 是不一样的，但那里有很强的关系。

如果启用了安全性，则可能会在某些通信中强制执行 SSL。正如 Davanum srinivas 所提到的，节点代理和 dmgr 之间的通信开始使用 SSL。当启用安全性等时，要求机密性的部署描述符条目将开始强制执行。

高温高压

# python - 使用外来字符抓取网站的问题

> ID：10897063
> 
> 赞同：7
> 
> 时间：2012-06-05T12:10:22.620
> 
> 标签：python, unicode, encoding, web-scraping

我需要关于我正在写的刮刀的帮助。我正在尝试抓取大学排名表，其中一些学校是欧洲大学，名称中有外国字符（例如ä，ü）。我已经以完全相同的方式与外国大学在另一个网站上刮了另一张桌子，一切正常。但是由于某种原因，当前的刮板无法处理外来字符（就解析外来字符而言，两个刮板完全相同）。

这是我正在做的尝试并使事情正常进行的工作：

1.  在文件的第一行声明编码：

    ```
    # -*- coding: utf-8 -*- 
    ```

2.  从 django.utils.encoding 导入和使用来自 django 框架的智能 unicode import smart_unicode

    ```
    school_name = smart_unicode(html_elements[2].text_content(), encoding='utf-8',        
    strings_only=False, errors='strict').encode('utf-8') 
    ```

3.  当与 smart_unicode 函数链接时，使用 encode 函数，如上所示。我想不出我还能做错什么。在和这些爬虫打交道之前，我对不同的编码真的不是很了解，所以还是有点大开眼界的体验。我已尝试阅读以下内容，但仍然无法解决此问题

    *   [http://farmdev.com/talks/unicode/](http://farmdev.com/talks/unicode/)

    *   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

我知道在编码中，每个字符都分配有一个数字，可以用十六进制、二进制等表示。不同的编码对于它们支持的语言有不同的能力（例如 ASCII 只支持英语，UTF-8 支持它看起来的一切.但是，我觉得我正在尽一切努力确保正确打印字符。我不知道我的错误在哪里，这让我发疯了。请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:24:43.527

从网页中提取信息时，您需要确定其字符编码，类似于浏览器如何执行此类操作（分析 HTTP 标头，解析 HTML 以查找`meta`标签，以及可能基于实际数据的猜测，例如看起来像某些编码中的BOM）。希望您能找到一个为您执行此操作的库例程。

在任何情况下，您都不应该期望所有网站都是 utf-8 编码的。Iso-8859-1 仍在广泛使用，通常将 iso-8859-1 视为 utf-8 会导致大混乱（​​对于任何非 Ascii 字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:31:02.463

如果您使用[requests 库](http://docs.python-requests.org/)，它将根据 HTTP 标头自动解码内容。获取页面的 HTML 内容非常简单：

```
>>> import requests
>>> r = requests.get('https://github.com/timeline.json')
>>> r.text
'[{"repository":{"open_issues":0,"url":"https://github.com/... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T16:55:29.327

# arrays - Mongodb查询不起作用

> ID：10897064
> 
> 赞同：0
> 
> 时间：2012-06-05T12:10:32.443
> 
> 标签：arrays, node.js, mongodb, mongoose

在我的图像共享应用程序中，您可以上传图像和创建相册。当您从网站上删除图像时，它也应在相册中删除（其中包含图像的相册）。

下面是删除图片的路径，我真正需要帮助的是为什么删除下面相册中的图片（imageName和imageId）的代码不起作用。

提前致谢！

**型号：**

```
var AlbumSchema = new Schema({
      title             : String,
      imageName         : [String],
      imageId           : [String]
});

modelObject.AlbumSchema = AlbumSchema;
modelObject.Album = mongoose.model('Album', AlbumSchema); 
```

-

```
var BlogPostSchema = new Schema({
    name : String,
    size : Number,
    type : String,
    author : ObjectId,
    title   : String
});

modelObject.Comment = mongoose.model('Comment', CommentSchema);
modelObject.BlogPost = mongoose.model('BlogPost', BlogPostSchema); 
```

**以下代码中不起作用的部分如下：**

```
albums[i].imageName.remove(j);
albums[i].imageId.remove(j);                            
albums[i].save(function (err){
    if (err) {
        console.log(err);
        // do something
    }
}); 
```

**完整代码：**

```
 app.get('/blog/delete/:id', function(req, res){

    model.BlogPost.findById(req.params.id, function (err, blog){

        var theImage = blog.name;

        var query = albumModel.Album.find( { imageName:theImage } )
        query.exec(function (err, albums) {

            if (!albums) {

                blog.remove(function(err) {
                    console.log(err);
                    // do something
                });

                res.redirect('/blogs');

            }

            else {
                for (var i = 0; i < albums.length; i++) {
                    for (var j = 0; j< albums[i].imageName.length; j++){

                        if (theImage == albums[i].imageName[j]){

                            albums[i].imageName.remove(j);
                            albums[i].imageId.remove(j);                            
                            albums[i].save(function (err){
                                if (err) {
                                    console.log(err);
                                    // do something
                                }
                            });
                        }
                    }
                }
            }

            blog.remove(function(err) {
                console.log(err);
                // do something
            });

            res.redirect('/blogs');
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:28:13.150

JavaScript 数组没有`remove`方法，所以我希望您的代码可能会崩溃。您应该使用类似的代码`albums[i].imageName.splice(j, 1);`。

# android - Android NDK 和 FFMPEG 构建

> ID：10897066
> 
> 赞同：7
> 
> 时间：2012-06-05T12:10:59.133
> 
> 标签：android, android-ndk, ffmpeg

我正在尝试使用 NDK 为我的 android 应用程序构建 FFMPEG 库。我已经从它的网站下载了源代码，我想我已经构建了它（这是我第一次尝试使用 NDK 和 ffmpeg）。我创建了一个`build.sh`文件，用于从 Mac OS X 上的命令行执行它。但我有几个问题......

首先，我知道我需要 Android.mk 文件，这样我才能在我的应用程序中使用构建的库，但由于我上面告诉你的原因，我不知道该怎么做。在我运行我的文件夹后，`build.sh`我得到`android`了一些文件夹和一些库。所以我的第一个问题是，如何构建我需要的 Android.mk 文件……也许有人可以解释我为什么需要它。

![在此处输入图像描述](../Images/95b4836812a66ebd5ac9907d63064e7c.png)

我的第二个问题是我需要一些来自 ffmpeg 的库才能从我的应用程序中使用它们，但是在构建之后我无法在我的源代码树中看到它们。我知道我必须在我的中启用它们，`build.sh`我想我做到了，但我看不到它们。所以任何关于我的构建文件的信息都将有助于我理解如何配置它。这是它的样子：

```
 #!/bin/bash
######################################################
# Usage:
# put this script in top of FFmpeg source tree
# ./build_android
# It generates binary for following architectures:
# ARMv6 
# ARMv6+VFP 
# ARMv7+VFPv3-d16 (Tegra2) 
# ARMv7+Neon (Cortex-A8)
# Customizing:
# 1\. Feel free to change ./configure parameters for more features
# 2\. To adapt other ARM variants
# set $CPU and $OPTIMIZE_CFLAGS 
# call build_one
######################################################
NDK=~/Desktop/android-ndk-r5b
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86
function build_one
{
./configure \
    --target-os=darwin \
    --prefix=$PREFIX \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --arch=arm \
    --cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    --nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
    --disable-doc \
    --disable-ffmpeg \
    --disable-ffplay \
    --disable-ffserver \
    --disable-ffprobe \
    --extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \
    --enable-zlib \
    --enable-version3 \
    --enable-nonfree \
    --enable-libmp3lame \
    --enable-libspeex \
    --enable-libtheora \
    --enable-libfaac \
    --enable-libvorbis \
    --enable-libaacplus \
    --prefix=$DIST_DIR \
    $ADDITIONAL_CONFIGURE_FLAG

make clean
make  -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v6
#CPU=armv6
#OPTIMIZE_CFLAGS="-marm -march=$CPU"
#PREFIX=./android/$CPU 
#ADDITIONAL_CONFIGURE_FLAG=
#build_one

#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU
ADDITIONAL_CONFIGURE_FLAG=
build_one

#arm v7vfp
#CPU=armv7-a
#OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU "
#PREFIX=./android/$CPU-vfp
#ADDITIONAL_CONFIGURE_FLAG=
#build_one

#arm v7n
#CPU=armv7-a
#OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=neon -marm -march=$CPU -mtune=cortex-a8"
#PREFIX=./android/$CPU 
#ADDITIONAL_CONFIGURE_FLAG=--enable-neon
#build_one

#arm v6+vfp
#CPU=armv6
#OPTIMIZE_CFLAGS="-DCMP_HAVE_VFP -mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU"
#PREFIX=./android/${CPU}_vfp 
#ADDITIONAL_CONFIGURE_FLAG=
#build_one 
```

感谢您提供任何有用的信息/建议/示例等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T10:42:39.853

我制作了一个关于如何构建`ffmpeg`和`x264`for的教程`android`： [zip with build of ffmpeg with x264](https://dl.dropboxusercontent.com/u/22605641/ffmpeg_android/android_ffmpeg.zip)

您还可以下载 zip 文件，其中包含在`android`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-02T09:46:55.413

如果您想更详细地了解如何构建 ffmpeg 以及如何使用它来构建 Android 应用程序，请参阅 Android NDK 食谱： http: [//www.packtpub.com/android-native-development-kit-cookbook/书](http://www.packtpub.com/android-native-development-kit-cookbook/book)

奖金第 1 章专门用于使用 Android NDK 和 ffmpeg 进行多媒体应用程序开发，可在[http://www.packtpub.com/sites/default/files/downloads/Developing_Multimedia_Applications_with_NDK.pdf免费获取](http://www.packtpub.com/sites/default/files/downloads/Developing_Multimedia_Applications_with_NDK.pdf)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T09:25:09.277

首先，您应该阅读 Android NDK 的文档并查看一些示例应用程序。您可以在 android_NDK_home/docs 和 android_NDK_home/samples 中找到这些详细信息（其中 android_NDK_home 是您的 android NDK 的文件夹名称）。

另外，请在 stackoverflow 上查看此链接： [Using FFmpeg with Android-NDK](https://stackoverflow.com/questions/9605757/using-ffmpeg-with-android-ndk)

对于一步一步的教程，这是一个很好的教程： [http ://www.roman10.net/how-to-build-ffmpeg-for-android/](http://www.roman10.net/how-to-build-ffmpeg-for-android/)

此外，您必须在 Eclipse 上安装/配置一些元素，以支持开发使用 NDK 构建的应用程序：http: [//mhandroid.wordpress.com/2011/01/23/using-eclipse-for- android-cc-development/](http://mhandroid.wordpress.com/2011/01/23/using-eclipse-for-android-cc-development/) [http://wiki.eclipse.org/Sequoyah/ndk_checklist](http://wiki.eclipse.org/Sequoyah/ndk_checklist)

还有一个使用 ffmpeg 库的非常好的项目： [https ://github.com/havlenapetr/FFMpeg](https://github.com/havlenapetr/FFMpeg)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T18:52:27.187

ffmpeg 使用[autoconf](https://www.gnu.org/software/autoconf/)作为其构建系统。在撰写本文时，还没有人为 Android 上的 ffmpeg 构建[Gradle](http://www.gradle.org/)构建包。据我所知，Gradle 还不支持 autoconf，因此很难做到

也就是说，在尝试了一些现有的教程以及一些预构建的软件包之后，我们决定为 ffmpeg 推出我们自己的 Android 构建脚本包装器，其中包括对[OpenSSL](https://www.openssl.org/)和[librtmp](http://rtmpdump.mplayerhq.hu/librtmp.3.html)的支持。

你可以在这里找到它：[https ://github.com/cine-io/android-ffmpeg-with-rtmp](https://github.com/cine-io/android-ffmpeg-with-rtmp)

**前提条件：**必须安装[Android NDK](https://developer.android.com/tools/sdk/ndk/index.html)

**指示：**

```
$ git clone git@github.com:cine-io/android-ffmpeg-with-rtmp.git
$ cd android-ffmpeg-with-rtmp
$ ./build.sh 
```

脚本完成后，所需的共享库和`ffmpeg`可执行文件将被放入`build/dist`目录中。您可以像任何其他本机二进制文件一样将它们包含在您的项目中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-22T22:57:52.940

要构建 ffmpeg 可执行文件，我使用以下**Android.mk**：

```
SYSROOT-armeabi-v7a      := $(NDK_ROOT)/platforms/android-9/arch-arm/
SYSROOT-arm64-v8a := $(NDK_ROOT)/platforms/android-21/arch-arm64/
SYSROOT-x86      := $(NDK_ROOT)/platforms/android-9/arch-x86/
SYSROOT := $(SYSROOT-$(TARGET_ARCH_ABI))

TOOLCHAIN_TARGET_ARCH-armeabi-v7a := arm
TOOLCHAIN_TARGET_ARCH-arm64-v8a := aarch64
TOOLCHAIN_TARGET_ARCH-x86 := i686
TOOLCHAIN_TARGET_ARCH := $(TOOLCHAIN_TARGET_ARCH-$(TARGET_ARCH_ABI))

TOOLCHAIN_TARGET_ABI-armeabi-v7a := androideabi
TOOLCHAIN_TARGET_ABI-arm64-v8a := android
TOOLCHAIN_TARGET_ABI-x86 := android
TOOLCHAIN_TARGET_ABI := $(TOOLCHAIN_TARGET_ABI-$(TARGET_ARCH_ABI))

TOOLCHAIN_TRIPLET := $(TOOLCHAIN_TARGET_ARCH)-linux-$(TOOLCHAIN_TARGET_ABI)-

TOOLCHAIN_NAME-$(TARGET_ARCH_ABI) := $(TOOLCHAIN_TRIPLET)$(TOOLCHAIN_VERSION)
TOOLCHAIN_NAME-x86 := x86-$(TOOLCHAIN_VERSION)
TOOLCHAIN_NAME := $(TOOLCHAIN_NAME-$(TARGET_ARCH_ABI))

TOOLCHAIN_VERSION_PREFIX := $(TOOLCHAIN_TRIPLET)$(TOOLCHAIN_VERSION)

ARCH_ARM_MODE-armeabi := arm
ARCH_ARM_MODE-armeabi-v7a := thumb
ARCH_ARM_MODE-arm64-v8a := thumb
ARCH_ARM_MODE := $(ARCH_ARM_MODE-$(TARGET_ARCH_ABI))

include $(CLEAR_VARS)
LOCAL_ARM_MODE   := $(ARCH_ARM_MODE)

FFMPEG_PATH      := $(BUILD_DIRECTORY)/ffmpeg

LOCAL_CFLAGS-armeabi-v7a := -march=armv7-a -mfpu=vfpv3-d16 -mfloat-abi=softfp
LOCAL_CFLAGS-x86 := -m32
LOCAL_CFLAGS-arm64-v8a := -march=armv8-a+simd+fp

LOCAL_CFLAGS := $(LOCAL_CFLAGS-$(TARGET_ARCH_ABI))

LOCAL_LDFLAGS-x86 := -m32 -Wl,-eh-frame-hdr -Wl,-m,elf_i386 -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now

LOCAL_LDFLAGS := $(LOCAL_LDFLAGS-$(TARGET_ARCH_ABI))

LOCAL_CFLAGS += -fPIE
LOCAL_LDFLAGS += -fPIE -pie

FFMPEG_CONFIG_OPTS := 

FFMPEG_CONFIG_OPTS += --target-os=linux
FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI) := --cross-prefix=$(TOOLCHAIN_PREFIX)
FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI) += --enable-cross-compile
FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI) += --sysroot=$(SYSROOT)
FFMPEG_CONFIG_OPTS += $(FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI))

## disable
FFMPEG_CONFIG_OPTS += --disable-doc
FFMPEG_CONFIG_OPTS += --disable-shared
FFMPEG_CONFIG_OPTS += --disable-avdevice
FFMPEG_CONFIG_OPTS += --disable-postproc
FFMPEG_CONFIG_OPTS += --disable-network
FFMPEG_CONFIG_OPTS += --disable-iconv
FFMPEG_CONFIG_OPTS += --disable-zlib
FFMPEG_CONFIG_OPTS += --disable-ffplay
FFMPEG_CONFIG_OPTS += --disable-ffprobe
FFMPEG_CONFIG_OPTS += --disable-ffserver
FFMPEG_CONFIG_OPTS += --disable-swscale-alpha
## enable
FFMPEG_CONFIG_OPTS += --enable-pthreads
FFMPEG_CONFIG_OPTS += --enable-small

FFMPEG_CONFIG_OPTS += --extra-cflags="$(LOCAL_CFLAGS)"
FFMPEG_CONFIG_OPTS += --extra-cxxflags="$(LOCAL_CXXFLAGS)"
FFMPEG_CONFIG_OPTS += --extra-ldflags="$(LOCAL_LDFLAGS)"

FFMPEG_CONFIG_OPTS += --enable-runtime-cpudetect

ARMBITS-$(TARGET_ARCH_ABI) :=
ARMBITS-arm64-v8a := 64
ARMBITS := $(ARMBITS-$(TARGET_ARCH_ABI))

FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI) :=

FFMPEG_CONFIG_OPTS-armeabi := --enable-armv5te
FFMPEG_CONFIG_OPTS-armeabi += --enable-inline-asm
FFMPEG_CONFIG_OPTS-armeabi += --arch=arm$(ARMBITS)

FFMPEG_CONFIG_OPTS-armeabi-v7a := $(FFMPEG_CONFIG_OPTS-armeabi)
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-armv6
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-armv6t2
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-vfp
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-neon
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-thumb
FFMPEG_CONFIG_OPTS-armeabi-v7a += --enable-fast-unaligned

FFMPEG_CONFIG_OPTS-arm64-v8a := $(FFMPEG_CONFIG_OPTS-armeabi-v7a)

FFMPEG_CONFIG_OPTS-x86 := --enable-yasm
FFMPEG_CONFIG_OPTS-x86 += --arch=x86

FFMPEG_CONFIG_OPTS += $(FFMPEG_CONFIG_OPTS-$(TARGET_ARCH_ABI))

LOCAL_MODULE := ffmpeg
LOCAL_SRC_FILES := $(abspath $(TARGET_OBJS))/ffmpeg/lib...ffmpeg...so # see http://stackoverflow.com/a/17384650/192373

clean: $(TARGET_OBJS)/ffmpeg/clean

$(TARGET_OBJS)/ffmpeg/clean: PRIVATE_ABI := $(FFMPEG_TARGET_ABI)
$(TARGET_OBJS)/ffmpeg/clean:
    $(call host-echo-build-step,$(PRIVATE_ABI),Clean) "ffmpeg [$(PRIVATE_ABI)]"
    $(hide) $(call host-rmdir,$(@D))

$(shell $(call host-mkdir,$(dir $(LOCAL_SRC_FILES))))
$(shell $(HOST_ECHO) >$(LOCAL_SRC_FILES))
.PHONY: $(LOCAL_SRC_FILES)
$(LOCAL_SRC_FILES): $(TARGET_OBJS)/ffmpeg/ffmpeg
    $(hide) $(call host-mv,$<,$@)

include $(PREBUILT_SHARED_LIBRARY)

$(TARGET_OBJS)/ffmpeg/Makefile: FFMPEG_CONFIG_OPTS := $(FFMPEG_CONFIG_OPTS)
$(TARGET_OBJS)/ffmpeg/Makefile:
    $(hide) $(call host-mkdir,$(@D))
    $(hide) cd $(@D) && $(abspath $(FFMPEG_PATH))/configure $(FFMPEG_CONFIG_OPTS)

$(TARGET_OBJS)/ffmpeg/ffmpeg: FFMPEG_CONFIG_OPTS := using toolchain:$(NDK_ROOT)/toolchains/$(TOOLCHAIN_NAME) compiler:$(TOOLCHAIN_COMPILER) triplet:$(TOOLCHAIN_TRIPLET)
$(TARGET_OBJS)/ffmpeg/ffmpeg: $(TARGET_OBJS)/ffmpeg/Makefile
    @echo $(FFMPEG_CONFIG_OPTS)
    $(hide) $(MAKE) --no-print-directory -C $(@D) 
```

# sql - 从两个表中选择 ID 列和最新日期的 SQL 语法

> ID：10897068
> 
> 赞同：2
> 
> 时间：2012-06-05T12:11:11.513
> 
> 标签：sql, sql-server-2008, union, distinct

我有一个系统，用户可以在其中完成两种类型的测试。我需要获取`DISTINCT`按最新测试完成日期排序的用户列表。

为此目的，这些表格也可以如下列出：

```
Test_Users
 - Test_User_Id (int)

Test_1_Results
 - Test_1_Result_Id (int)
 - Test_User_Id (int)
 - Date_Of_Completion (datetime)

Test_2_Results
 - Test_2_Result_Id (int)
 - Test_User_Id (int)
 - Date_Of_Completion (datetime) 
```

我可以很高兴地使用 a 获得所有不同`Test_User_Id`'s的列表，`UNION`如下所示：

```
SELECT Test_User_Id FROM Test_1_Results
UNION
SELECT Test_User_Id FROM Test_2_Results 
```

而且我可以使用 a 轻松地对这些表之一的结果进行排序，`ORDER BY Date_Of_Completion DESC`但我不知道如何使用 the 来执行此操作，`UNION`或者这是否是进行的最佳方式。

最终，我希望能够将此查询包装在其他查询中，例如：

```
SELECT *
FROM Test_Users
WHERE Test_User_Id IN (
    //The query i am asking about
)
WHERE some_criteria 
```

但到目前为止，我在使用 a 时没有任何运气这样做，`UNION`而且我不确定我做错了什么。

我尝试这样做的原因是管理员用户需要能够查看已完成测试的每个人的列表，其中最近完成的内容位于顶部。

我对 SQL 相当熟悉，但我以前从未真正使用过`UNION`运算符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:17:32.537

这应该工作

```
 SELECT Test_User_Id, max(Date_Of_Completion) AS doc
 FROM ( 
     SELECT Test_User_Id, Date_Of_Completion FROM Test_1_Results
       UNION ALL
     SELECT Test_User_Id , Date_Of_Completion FROM Test_2_Results 
 ) AS temptab
 GROUP BY Test_User_Id
 ORDER BY doc DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:24:33.160

```
;WITH x(u,d) AS 
(
  SELECT u = Test_User_Id, d = MAX(Date_Of_Completion) 
    FROM dbo.Test_1_Results GROUP BY Test_User_Id
  UNION ALL
  SELECT Test_User_Id, MAX(Date_Of_Completion) 
    FROM dbo.Test_2_Results GROUP BY Test_User_Id
),
y AS 
(
  SELECT u, d, rn = ROW_NUMBER() OVER (PARTITION BY u ORDER BY d DESC)
  FROM x
)
SELECT Test_User_Id = u, Date_Of_Completion = d
FROM y
WHERE rn = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:18:03.337

```
SELECT t.Test_User_Id, max(Date_Of_Completion)
FROM Test_Users t
INNER JOIN
   (SELECT Test_User_Id, Date_Of_Completion FROM Test_1_Results
    UNION
    SELECT Test_User_Id, Date_Of_Completion FROM Test_2_Results) aux on aux.Test_User_Id = t.Test_User_Id
GROUP BY t.Test_User_Id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T14:50:42.440

我喜欢原始问题的 ejb_guy 答案。如果问题被扩展，以至于您还想知道每个用户的最新结果的测试类型和结果 ID，那么我相信以下内容将起作用（未经测试），并且应该非常有效。

```
with All_Tests as (
  select Test_User_Id,
         Date_Of_Completion,
         'Test1' as Test_Type,
         Test_1_Result_Id as Result_Id
    from Test_1_Results
  union all
  select Test_User_Id,
         Date_Of_Completion,
         'Test2' as Test_Type,
         Test_2_Result_Id as Result_Id
    from Test_2_Results
),
Ranked_Tests as (
  select rank() over( partition by Test_User_Id
                      order by Date_Of_Completion desc,
                               Test_Type,
                               Result_Id
                    ) as Test_Rank,
         Test_User_Id,
         Date_Of_Completion,
         Test_Type,
         Result_Id
    from All_Tests
)
select Test_User_Id,
       Date_Of_Completion,
       Test_Type,
       Result_Id
  from Ranked_Tests
 where Test_Rank=1
 order by Date_Of_Completion desc, Test_User_Id 
```

# java - c14n 与 Android

> ID：10897075
> 
> 赞同：0
> 
> 时间：2012-06-05T12:11:31.910
> 
> 标签：java, android

有没有办法在android上以规范形式制作xml？

一些 apache 项目的规范化程序不起作用，因为它们依赖于一些 javax.xml.* 包，这些包在 android 上不可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:48:00.047

好的，找到了解决方案：XOM 项目（http://www.xom.nu/）中使用的 Canonizer 在 android 上运行。

# android - android RRule 的时区

> ID：10897079
> 
> 赞同：0
> 
> 时间：2012-06-05T12:11:41.340
> 
> 标签：android, icalendar, rrule

android 使用什么时区来解释事件规则`FREQ=WEEKLY;WKST=SU;BYDAY=WE`？我知道如果我要更改设备设置或日历设置中的默认时区，事件将正确显示，那么他从哪里获得此类规则的时区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:38:03.613

Android 2.3：创建事件的时区位于表中`ExtendedProperties`。它有下一个字段：`_id, event_id, name, value`. 也许它对某人有用。

# jquery - 检索最后一个已知的地理位置 - Phonegap

> ID：10897081
> 
> 赞同：2
> 
> 时间：2012-06-05T12:12:08.490
> 
> 标签：jquery, android, iphone, html, geolocation

以下代码

```
navigator.geolocation.getCurrentPosition(getGeo_Success, getGeo_Fail, {
    enableHighAccuracy : true,
    maximumAge : Infinity,
    timeout : 15000
}); 
```

检索当前 GPS 位置 -*但是*- 必须有有效的 GPS 信号（当然，设备的 GPS 功能应该打开）。

如果我们查看其他应用程序（例如，Android 设备上的地图）——它知道如何检索**最后一个已知**位置——即使我在打开地图*之前*没有使用更新地理位置的应用程序——它也会在地图上显示我的位置，即使我在完全没有 GPS 信号的建筑物内。

澄清一下：我对我的应用程序检索到的最后一次地理位置不感兴趣，因为下次我将启动它时，该地理位置可能无关紧要。

**问题是：**我们如何使用 HTML5/Phonegap 实现这一点？似乎`navigator.geolocation`只知道检索当前位置，即使，`maximumAge`设置为`Infinity`（这意味着，最后一个缓存位置的年龄是无关紧要的，所以任何命中都可以（或者，应该是！））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:28:32.870

**ANDROID 解决方案（iPhone 解决方案如下）：**

这很整洁：

我已经使用了 Android 的 native `LocationManager`，它提供了一个`getLastKnownLocation`功能 - 名字就说明了一切

这是相关代码

1）**将以下java类添加到您的应用程序**

```
package your.package.app.app;

import org.apache.cordova.DroidGap;

import android.content.Context;
import android.location.*;
import android.os.Bundle;
import android.webkit.WebView;

public class GetNativeLocation implements LocationListener {
    private WebView mAppView;
    private DroidGap mGap;
    private Location mostRecentLocation;

    public GetNativeLocation(DroidGap gap, WebView view) {
        mAppView = view;
        mGap = gap;
    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        getLocation();
    }

    public void getLocation() {
        LocationManager lm = 
                        (LocationManager)mGap.
                                        getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        String provider = lm.getBestProvider(criteria, true);

        lm.requestLocationUpdates(provider, 1000, 500, this);
        mostRecentLocation = lm
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    }

    public void doInit(){
        getLocation();
    }

    public double getLat(){ return mostRecentLocation.getLatitude();}
    public double getLong() { return mostRecentLocation.getLongitude(); }
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub  
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub  
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
} 
```

2)**确保您的主类如下所示：**

```
public class App extends DroidGap {

    // Hold a private member of the class that calls LocationManager
    private GetNativeLocation gLocation;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // This line is important, as System Services are not available
        // prior to initialization
        super.init();

        gLocation = new GetNativeLocation(this, appView);

        // Add the interface so we can invoke the java functions from our .js 
        appView.addJavascriptInterface(gLocation, "NativeLocation");

        try {
            super.loadUrl("file:///android_asset/www/index.html");
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
    }

    @Override
    protected void onStop() {
        // TODO Auto-generated method stub
        super.onStop();
    }
} 
```

3）在您的 JS 代码上，只需使用以下命令调用本机 java：

```
window.NativeLocation.doInit();
alert(window.NativeLocation.getLat());
alert(window.NativeLocation.getLong()); 
```

这就是所有人！:-)

**编辑： iPhone 解决方案：**

我写了一个很小的 ​​Phonegap 插件，它创建了一个使用 iOS 原生的自定义类的接口`CLLocationManager`

**1）Phonegap插件（JS）**

```
var NativeLocation = {
    doInit: function(types, success, fail) {
        return Cordova.exec(success, fail, "NativeLocation", "doInit", types);
    },

    getLongitude: function(types, success, fail){
        return Cordova.exec(success, fail, "NativeLocation", "getLongitude", types);
    },

    getLatitude: function(types, success, fail){
        return Cordova.exec(success, fail, "NativeLocation", "getLatitude", types);
    }
} 
```

**2) 使我们能够调用'CCLocationManager 的函数的objective-c 类** * *NativeLocation.h* *

```
#import <Foundation/Foundation.h>
#import <Cordova/CDVPlugin.h>
#import <CoreLocation/CoreLocation.h>

@protocol NativeLocationDelegate
@required
- (void)locationUpdate:(CLLocation *)location;
- (void)locationError:(NSError *)error;

@end

@interface NativeLocation : CDVPlugin <CLLocationManagerDelegate> {
    id delegate;
    NSString* callbackID;
    CLLocationManager *lm;
    Boolean bEnabled;
    double nLat;
    double nLon;
}

@property (nonatomic, copy) NSString* callbackID;
@property (nonatomic, retain) CLLocationManager *lm;
@property (nonatomic, readonly) Boolean bEnabled;
@property (nonatomic, assign) id delegate;

- (void) doInit:(NSMutableArray*)arguments
                                 withDict:(NSMutableDictionary*)options;
- (void) getLatitude:(NSMutableArray*)arguments 
                                 withDict:(NSMutableDictionary *)options;
- (void) getLongitude:(NSMutableArray*)arguments 
                                 withDict:(NSMutableDictionary *)options;

@end 
```

**NativeLocation.m**

```
#import "NativeLocation.h"

@implementation NativeLocation

@synthesize callbackID;
@synthesize lm;
@synthesize bEnabled;
@synthesize delegate;

- (void)doInit:(NSMutableArray *)arguments 
                                 withDict:(NSMutableDictionary *)options{
    if (self != nil){
        self.lm = [[[CLLocationManager alloc] init] autorelease];
        self.lm.delegate = self;
        if (self.lm.locationServicesEnabled == NO)
            bEnabled = FALSE;
        else bEnabled = TRUE;
    }

    nLat = 0.0;
    nLon = 0.0;

    if (bEnabled == TRUE)
        [self.lm startUpdatingLocation];

    CDVPluginResult* pluginResult = [CDVPluginResult 
                                    resultWithStatus:CDVCommandStatus_OK 
                                    messageAsString[@"OK"
                                    stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    if (bEnabled == TRUE){
        [self writeJavascript: [pluginResult 
                               toSuccessCallbackString:self.callbackID]];
    } else {
        [self writeJavascript: [pluginResult 
                               toErrorCallbackString:self.callbackID]];
    }
}

- (void)locationManager:(CLLocationManager *)manager 
                        didUpdateToLocation:(CLLocation *)newLocation 
                        fromLocation:(CLLocation *)oldLocation {
    if ([self.delegate conformsToProtocol:@protocol(NativeLocationDelegate)])
        [self.delegate locationUpdate:newLocation ];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error {
    if ([self.delegate conformsToProtocol:@protocol(NativeLocationDelegate)])
        [self.delegate locationError:error];
}

- (void)dealloc {
    [self.lm release];
    [super dealloc];
}

- (void)locationUpdate:(CLLocation *)location {
    CLLocationCoordinate2D cCoord = [location coordinate];
    nLat = cCoord.latitude;
    nLon = cCoord.longitude;

}

- (void)getLatitude:(NSMutableArray *)arguments 
                                      withDict:(NSMutableDictionary *)options{

    self.callbackID = [arguments pop];

    nLat = lm.location.coordinate.latitude;
    nLon = lm.location.coordinate.longitude;

    CDVPluginResult* pluginResult = [CDVPluginResult 
                                    resultWithStatus:CDVCommandStatus_OK 
                                    messageAsDouble:nLat];

    [self writeJavascript: [pluginResult toSuccessCallbackString:self.callbackID]];

}
- (void)getLongitude:(NSMutableArray *)arguments 
                                       withDict:(NSMutableDictionary *)options{

    self.callbackID = [arguments pop];

    nLat = lm.location.coordinate.latitude;
    nLon = lm.location.coordinate.longitude;

    CDVPluginResult* pluginResult = [CDVPluginResult 
                     resultWithStatus:CDVCommandStatus_OK messageAsDouble:nLon];

    [self writeJavascript: [pluginResult toSuccessCallbackString:self.callbackID]];

}

@end 
```

**3) 最后，调用主 .js 中的所有内容**

```
function getLongitudeSuccess(result){
    gLongitude = result;
}

function getLatitudeSuccess(result){
    gLatitude = result;
}

function runGPSTimer(){
    var sTmp = "gps";

    theTime = setTimeout('runGPSTimer()', 1000);

    NativeLocation.getLongitude(
                                ["getLongitude"],
                                getLongitudeSuccess,
                                function(error){ alert("error: " + error); }
                                );

    NativeLocation.getLatitude(
                               ["getLatitude"],
                               getLatitudeSuccess,
                               function(error){ alert("error: " + error); }
                               ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:54:41.087

在我的 PhoneGap/Sencha Touch 2 应用程序中，我创建了函数

```
function getLastKnownLocation(){
    if(typeof localStorage.lastKnownPosition == "undefined"){
        localStorage.lastKnownPosition = JSON.stringify(null);
    }

    navigator.geolocation.getCurrentPosition(
        function(position){
            localStorage.lastKnownPosition = JSON.stringify(position);
        }
    );

    return JSON.parse(localStorage.lastKnownPosition);
} 
```

因此，每次我调用 getLastKnownLocation() 时，我都会立即得到结果。就我的目的而言，这是一个很好的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:26:32.863

我建议在您的`getGeo_Success`函数调用中将`setLocation([the_location])`其存储在**localStorage**上。
您可以假设每个使用phoneGap 的设备都已经实现了localStorage。
这样，您总是在那里有有效的位置。然后在你需要的时候弹出它。

```
function getLocation() {
  return JSON.parse(localStorage.getItem('location'));
}
function setLocation(location) {
  localStorage.setItem('vibesList', JSON.stringify(vibes));
} 
```

**编辑：**如果您想检索**设备**知道的最新位置（不是应用程序），您必须通过从设备中提取当前数据的**后台进程来完成。**这是有问题的方法，因为：

1.  并非所有设备都允许这样做。
2.  为此，您必须编写自己的本机自定义[插件](https://github.com/phonegap/phonegap-plugins)才能与 phonegap 连接。

# php - zend：使用 multidb 时将会话存储在数据库中

> ID：10897082
> 
> 赞同：2
> 
> 时间：2012-06-05T12:12:09.977
> 
> 标签：php, zend-framework

我的 zend 应用程序使用多个数据库连接，因此我使用该`multidb`资源在`application.ini`文件中配置了多个连接。

现在我想使用 将应用程序会话存储到数据库中`Zend_Session_SaveHandler_DbTable`，但我找不到一种方法来指定要使用哪些连接来访问数据库。

我在网上找到的每个示例都使用该`db`资源并依赖于默认数据库适配器。不幸的是，会话必须存储在一个不是默认数据库的数据库中......

如何指定用于存储会话的数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:47:15.623

尽管 Zend 文档中没有指定，但`Zend_Session_SaveHandler_DbTable`该类的构造函数接受一个名为的参数，该参数`db`指定要使用的数据库连接。

```
$db = $this->getPluginResource('multidb')->getDb('zend');
$config = array(
    'db'             => $db,
    'name'           => 'session',
    'primary'        => 'id',
    'modifiedColumn' => 'modified',
    'dataColumn'     => 'data',
    'lifetimeColumn' => 'lifetime'
);
Zend_Session::setSaveHandler(new Zend_Session_SaveHandler_DbTable($config));
Zend_Session::start(); 
```

我无法在`application.ini`配置文件中指定这些设置，但......

# php - file() VS file_get_contents() 哪个更好？PHP

> ID：10897084
> 
> 赞同：2
> 
> 时间：2012-06-05T12:12:13.797
> 
> 标签：php

我只想知道如何提高我正在创建的 Web 应用程序的速度。

我也愿意接受其他建议。

fread 或 file_get_contents??

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T12:14:29.760

实际上，它们是无关的。

`file()`[通过解析EOL](http://en.wikipedia.org/wiki/Newline)字符将文件读入数组，而`file_get_contents()`实际上将文件内容读入字符串。

此外，这意味着您受服务器操作系统的支配，因为 Windows EOL 与 Linux EOL 不同（例如）。

所以，第一个是文本友好的，而第二个是二进制友好的。

简而言之，不要尝试做`file('image.png');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:14:02.580

[file_get_contents](http://php.net/manual/en/function.file-get-contents.php) — 将整个文件读入字符串

[file](http://www.php.net/manual/en/function.file.php) — 将整个文件读入一个数组

使用最适合您的情况的任何东西。你想读取数组或字符串中的文件吗？

# multithreading - 多线程 BIOS

> ID：10897087
> 
> 赞同：3
> 
> 时间：2012-06-05T12:12:33.393
> 
> 标签：multithreading, bios, uefi

我想知道为什么 BIOS 是单线程的，即使我们有 4 核/8 核。最新的 UEFI 技术允许使用 GUI 实用程序。不实施多线程 BIOS 是否有任何具体原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T20:37:16.660

简单的答案是：收益递减

在大多数 PC 上，BIOS/UEFI 的启动顺序只需要大约 5 秒即可工作（不包括 HDD 启动延迟）。对于大多数人来说，这已经足够快了。（如果你想要更快，让你的电脑进入睡眠状态而不是关闭它。）

请记住，在 BIOS 中完成的许多任务无法并行化。必须首先初始化内存控制器。必须先枚举 PCI/PCIe 总线，然后才能检查任何后续设备（USB、SATA、视频等）。在磁盘启动之前，您无法启动。

有**一些**初始化项目很耗时，可以并行完成。

*   IDE/SATA - 由于机械磁盘延迟，通常需要一段时间。
*   USB - 某些 USB 设备在通电后需要 100 毫秒的时间才能启动。
*   视频（任何其他第三方 BIOS 扩展）- 与显示器通信和同步需要一段时间。

这些任务可以并行完成，这可能会加快 PC 的启动时间。请记住，要到达那里，您需要编写内核和任务调度程序。在旧版 BIOS（纯 x86 汇编程序）中，这并不漂亮。在 UEFI（主要是 C 源代码）中，这更可行。但是，它仍然需要不平凡的工程工作才能获得少量收益（可能需要 1-2 秒的启动时间。）

Phoenix 之前曾尝试引入多线程 BIOS 初始化。据我所知，它从未起飞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T14:07:54.957

因为没有必要。BIOS 不会进行繁重的计算。它进行一些协调，然后（永远）退出。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-20T10:51:56.247

**UEFI**没有描述任何多处理功能。但是，**PI**规范[（也由 UEFI 论坛制作）](http://uefi.org/specifications/)提供，并且[**EDK2**](https://github.com/tianocore/edk2)提供`EFI_MP_SERVICES_PROTOCOL`（目前仅适用于 IA32/X64）。

它不完全是 pthreads，但它确实让您可以安排任务在*应用处理器*上运行，同时*引导处理器*继续提供单线程 UEFI 实例。

DXE 阶段的接口在 v1.5 PI 规范的第 3 卷*MP 服务协议*(13.4) 部分中进行了描述。

*第 2 卷EFI MP 服务 PPI* (8.3.9)描述了 PEI 期间可用的功能。

# django - 如何在 Django 中测试单个应用程序（不是项目）？

> ID：10897090
> 
> 赞同：20
> 
> 时间：2012-06-05T12:12:58.973
> 
> 标签：django, testing

我想测试我的小应用程序，我把它放在一个单独的包中。现在我创建了一个“test_project”目录，在那里创建了一个测试项目，我正在使用该项目的 manage.py 来运行测试。但我一直想知道 - 有没有更好的方法？是否可以启动单个应用程序的测试，也许使用一些默认配置（如 sqlite 数据库）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-04T17:22:17.023

写下来因为我还没有在这里看到

[从文档](https://docs.djangoproject.com/en/1.9/topics/testing/overview/)

如果您的 django 结构看起来像这样：

```
Project dir/
    /myapp
    /myotherapp
    /myproject 
```

Django 允许您通过执行以下命令仅从“myotherapp”执行测试：

```
./manage.py test myotherapp/ 
```

这将在“myotherapp”下执行所有测试，而

```
./manage.py test 
```

将在您的项目目录中执行所有测试。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-21T12:09:55.713

可以独立运行单个应用程序的测试，而无需为此创建 Django 测试项目。这样做的一种方法是`runtests.py`在应用程序的根目录中创建一个设置 Django 设置并以`./manage.py test your_app`编程方式运行的目录。一个例子`runtests.py`是 Django 自己的：[runtests.py](https://github.com/django/django/blob/master/tests/runtests.py)（[文档](https://docs.djangoproject.com/en/dev/internals/contributing/writing-code/unit-tests/)）。

Django's own`runtests.py`是一个很好的参考，但我发现它在大多数情况下很复杂。以下是几个替代示例：

*   [Django-模型翻译](https://github.com/deschler/django-modeltranslation/blob/master/runtests.py)
*   [我自己的极简主义](https://github.com/dmarcelino/django-sameas/blob/b6a6d8bfaf7f4b1398ad778c620260f2efd970a2/runtests.py)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-05T12:40:53.097

如果您使用鼻子，您可以运行单个应用程序的测试。

`python manage.py test app.tests:TestClassHere`

至于测试单个应用程序。我只是遵循其他大型 django 项目所做的约定，而这正是您正在做的事情。创建一个 test_project 目录。

[https://github.com/mozilla/django-piston/tree/master/tests/test_project](https://github.com/mozilla/django-piston/tree/master/tests/test_project)

我想如果它对于一些最大的 django 可插拔应用程序来说足够好的话，它对我来说已经足够好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T12:35:39.357

当然，如果您不需要任何 django 依赖项，您*可以使用独立的单元测试来测试 Python 部分*

一个 Django 环境至少需要一个**settings.py**和**manage.py**文件。您可以仅使用基本内容设置它们，并使用 manage.py 对您的应用程序进行单元测试。您应该将项目视为 Django 运行时环境，没有它就没有 Django。您可能可以模仿设置，但您只会创造更多的技巧而不是简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-21T06:39:19.100

您还可以创建自定义测试运行程序并覆盖它在其中搜索测试的路径。

也许我在这里埋葬了lede。我最近继承了一个项目，由于历史原因，他们想要保留遗留测试，所以我被迫将所有测试写在一个文件夹中并指向它

```
from django.test.runner import DiscoverRunner

class MyTestRunner(DiscoverRunner):

    def __init__(self, *args, **kwargs):
        kwargs.update({'top_level': str(settings.TEST_DISCOVER_TOP_LEVEL)})
        super().__init__(*args, **kwargs)

    def run_tests(self, test_labels, extra_tests=None, **kwargs):
        # In order to override the top_level directory, the test_label must match the top_level
        kwargs.update({'test_labels': [str(settings.TEST_DISCOVER_TOP_LEVEL)]})
        return super().run_tests(extra_tests=extra_tests, **kwargs) 
```

并在您的设置中

```
TEST_RUNNER = 'path.to.my.module.MyTestRunner'

TEST_DISCOVER_TOP_LEVEL = BASE_DIR / 'tests/unit_and_integration_tests' 
```

# c# - 使用 Entity Framework 4.1，我怎样才能达到以下要求？

> ID：10897091
> 
> 赞同：0
> 
> 时间：2012-06-05T12:13:00.713
> 
> 标签：c#, entity-framework

考虑我有 2 个实体 - a) Publisher b) Book Publisher 具有称为 PublishedBooks 的导航属性，它是书籍的集合。假设 Publisher1 已经出版了 2 本书，即 Book1 和 Book2 我想做的是，对于 Publisher1，删除已出版的书 Book1 并在数据库中添加一本新出版的书（即 Book3）。

Context.SaveChanges() 抛出错误 -

> 操作失败：无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

注意：删除级联规则存在于数据库和上下文类中。顺便说一句，我正在使用 C# & Sql Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:38:07.263

听起来你正在做这样的事情：

```
Foo foo = entity.RelatedFoos.Where(f=>f.id=xyz);
entity.RelatedFoos.Remove(foo); //this is the problematic line
context.SaveChanges(); 
```

那是; 您正在从一组相关项目中删除一个实体 - 而不是从上下文本身的主集合中删除。如错误中所述，删除上述方式只会删除*关系*。不是对象`foo`。如果您要删除以下内容，这可能就是您的意思`foo`：

```
Foo foo = entity.RelatedFoos.Where(f=>f.id=xyz);
context.Foos.Remove(foo);
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:42:01.273

您需要在保存之前显式删除子对象，例如

```
Context.DeleteObject(Book1);
Context.SaveChanges(); 
```

# java - 当文本更改时，如何阻止 JLabel 更改其大小？

> ID：10897092
> 
> 赞同：5
> 
> 时间：2012-06-05T12:13:09.207
> 
> 标签：java, swing, jlabel, resize, gridbaglayout

我正在代码中生成一些 JComponents 并使用 GridBag 布局来排列它们。我的布局由 12 行和 3 列组成，每行由一个 JSlider、一个 JCheckBox 和一个 JLabel 组成。这是我用来生成 UI 的代码：

```
final int NUM_MOTORS = 12;

// This is the panel I'm adding the components to.
pnlMotorSliders.setLayout(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();

for (int i = 0; i < NUM_MOTORS; ++i) {
    c.gridy = i;

    // Create the slider
    JSlider slider = new JSlider(SwingConstants.HORIZONTAL, 10, 4085, 10);
    c.fill = GridBagConstraints.HORIZONTAL;
    c.gridx = 0;
    c.weightx = 0.9;
    pnlMotorSliders.add(slider, c);

    // Create the checkbox
    JCheckBox checkBox = new JCheckBox();
    checkBox.setOpaque(true);
    checkBox.setBackground(Color.blue);
    c.fill = GridBagConstraints.NONE;
    c.gridx = 1;
    c.weightx = 0.1;
    pnlMotorSliders.add(checkBox, c);

    // Create the current label
    JLabel label = new JLabel("0");
    label.setBorder(BorderFactory.createLineBorder(Color.red));
    c.fill = GridBagConstraints.HORIZONTAL;
    c.gridx = 2;
    c.weightx = 0.2;
    pnlMotorSliders.add(label, c);
} 
```

我遇到的问题是，当我在任何 JLabels 中设置文本时，它们会改变它们的宽度并影响布局的其余部分，即使我设置的文本的宽度看起来比JLabel 的宽度。以下两个屏幕截图演示了我的意思（红色和蓝色边框用于调试目的）：

![更改 JLabel 文本之前的布局。](../Images/bf61feca55d75692a9b2c68708fa5fdf.png)

![更改底部 JLabel 文本后的布局。 注意标签是如何变大的。](../Images/e64d298b4dd9c9d5c766075980e4f255.png)

我已将底部 JLabel 上的文本设置为“-12”。尽管 JLabel 看起来比文本宽得多，但它已经改变了它的大小，影响了布局的其余部分。

为什么会发生这种情况，我能做些什么来防止它发生？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:24:16.567

您可以通过设置最小、首选和最大尺寸来固定标签的尺寸：

```
label.setMinimumSize(width, height);
label.setPreferedSize(width, height);
label.setMaximumSize(width, height); 
```

还要确保将 GridBagConstraints#fill 设置为 NONE，尽管我不确定这是否仍然必要（我认为是）。

编辑：顺便说一句，要摆脱聚焦组件周围的那些讨厌的虚线，您可以将其设置为不可聚焦：

```
slider.setFocusable(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:32:46.187

设置首选大小的解决方案仅在您没有组件水平填充它们在 GridBagLayout 中的包时才有效。

另一种解决方案是删除您在 GridBagLayout 的该列中放置在组件上的权重。然后，您可以手动控制列宽。这样做的一种简单方法（在设计时）是将 JLabel 放置在具有零高度和您想要的特定宽度的列中。

为什么是这样？您需要深入了解 GridBagLayout 的工作原理：

GridBagLayout 根据所需空间调整其列的大小，然后使用权重分配“剩余”空间，以便生成的列宽加起来等于面板的总宽度。每列所需的空间是通过查找该列中最宽的组件来计算的。

每个组件所需的空间是通过询问它想要的宽度来确定的。在您的情况下，带有“0”的 JLabel 小于带有“-12”的 JLabel，因此该列正在改变大小。

剩余空间是根据分配给每列中组件的水平权重分配的。对权重进行总计，每列的百分比是根据该列占总数的百分比确定的。

列大小是根据所需空间加上剩余空间确定的。因此，如果列中的所有组件都没有权重，那么您将不会获得任何剩余空间，因此不会获得动态变化。

第三种解决方案是不使用 GridBagLayout。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:19:47.563

使用明确设置标签的*首选*大小[`JLabel#setPreferredSize(Dimension)`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComponent.html#setPreferredSize%28java.awt.Dimension%29)。

这样，您*锁定*了组件的大小，并告诉布局管理器不要调整它的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-14T01:31:00.463

```
label.setPreferredSize(new Dimension(width, height)); 
```

这是我能找到使它工作的唯一方法。设置 a`Minimum`和/或 a`Maximum`对我没有任何作用。另外，对我来说，在 java 8 上我需要使用 a `Dimension`，或者对以前的不合适的大小没有任何变化。

# c++ - C++11 内存模型能防止内存撕裂和冲突吗？

> ID：10897093
> 
> 赞同：7
> 
> 时间：2012-06-05T12:13:11.553
> 
> 标签：c++, multithreading, thread-safety, c++11

阅读 C++11 的草稿，我对第 1.7.3 节感兴趣：

> 内存位置要么是标量类型的对象，要么是所有具有非零宽度的相邻位域的最大序列。... 两个执行线程 (1.10) 可以更新和访问单独的内存位置，而不会相互干扰。

此条款是否保护与硬件相关的竞争条件，例如：

*   在两个总线事务中更新内存的未对齐数据访问（*内存撕裂*）？
*   在系统内存单元中有不同的对象，例如 32 位字中有两个 16 位有符号整数，并且单独对象的每次独立更新都需要写入整个内存单元（*内存冲突*）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:39:59.213

关于第二点，标准*保证*那里不会有比赛。话虽如此，我被告知当前的编译器没有实现这个保证，在某些架构中甚至可能无法实现。

关于第一点，如果第二点得到保证，并且如果您的程序不包含任何竞态条件，那么自然的结果就是这也不会是竞态条件。也就是说，假设标准*保证*写入不同的子字位置是安全的，那么唯一可能出现竞争条件的情况是多个线程访问同一个变量（即跨字拆分，或者更可能是这是有问题的，跨缓存行）。

同样，这可能很难甚至不可能实现。如果您的未对齐数据跨越缓存行，那么几乎不可能保证代码的正确性而不会对性能造成巨大成本。由于这个原因和其他原因（包括原始性能，对涉及两个缓存行的对象的写入涉及将多达 32 个字节写入内存，并且如果任何其他线程正在触及任何一个缓存行，它还涉及缓存同步的成本......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:38:08.893

它不能防止内存撕裂，这仅在两个线程访问同一内存位置时可见（但该子句仅适用于单独的内存位置）。

根据您的示例，它似乎可以防止内存冲突。实现这一点的最有可能的方法是，一个不能一次写入少于 32 位的系统将具有 32-bit `char`，然后两个单独的对象永远不能共享一个“系统内存单元”。（在具有 32 位的系统上，两个 16 位整数可以相邻的唯一方法`char`是作为位域。）

# c++ - 如何在 Xcode 中构建 Clucene

> ID：10897094
> 
> 赞同：0
> 
> 时间：2012-06-05T12:13:13.173
> 
> 标签：c++, xcode, lucene, lucene.net, clucene

我从[这里](http://sourceforge.net/projects/clucene/)下载了 Clucene ，我想在 Xcode 中构建它以便使用 Clucene。我已经使用 Cmake 构建了它并将其附加到我的项目中，但标题不存在，我无法导入标题。

有没有办法简单地将 Clucene 添加到 Xcode 并工作。我在 Visual Studio 中使用过 Lucene.net 甚至 Clucene，但在 Xcode 中使用 clucene 时遇到了一些麻烦。我搜索了很多，但仍然找不到答案，因为很少有人在 xcode 中使用 Clucene。如果您对如何做到这一点有任何想法，请告诉我。

谢谢你。

# php - PHP 会话不工作/ SSL 问题？

> ID：10897097
> 
> 赞同：2
> 
> 时间：2012-06-05T12:13:29.700
> 
> 标签：php, session, ssl

我的网站在线，但我使用此代码将其重定向到即将推出的页面。

```
<?php

if(!isset($_GET['en'])) {

    header("Location: /comingsoon");
    exit;

} 
```

然后，我将第三方 SSL 添加到我的站点，当我删除那段代码时，初始站点会出现，但是在登录页面之后，会话没有被存储。

当我将那段代码（之前）介绍回来时，它就可以工作了。

这真是让我百思不得其解。

我在 HTAccess 中使用了这段代码来从 HTTP 重定向到 HTTPs。

```
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

不确定这是否与它有关。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-05T12:50:56.570

```
function redirectToHTTPS()
{
  if($_SERVER['HTTPS']!="on")
  {
     $redirect= "https://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
     header("Location:$redirect");
  }
} 
```

// 在必须重定向到 https 的页面中调用上述函数。

# jsf - Jboss 7.1 Seam 2.2.1 JSF 1.2 项目环境中的 javax.servlet.ServletException

> ID：10897099
> 
> 赞同：0
> 
> 时间：2012-06-05T12:13:30.963
> 
> 标签：jsf, maven, richfaces, jboss7.x, seam2

我们使用 Jboss 7.1 + Seam 2.2.1.Final + JSF 1.2 + Richfaces 3.3.3.Final 和 JBoss Maven Integration 1.0 开发了一个 Web 应用程序。我们已成功将 .war 文件部署到应用程序服务器。但是其中一个.xhtml 页面我们希望在一个动作完成后进行重定向操作。但是浏览器抛出以下异常。我们已经调试了代码，似乎在接缝的响应阶段发生了异常。此外，此异常没有任何原因，因此我们无法确定该异常的主要原因。有没有人有想法？

```
ERROR [org.jboss.seam.exception.Exceptions] (http-localhost-127.0.0.1-8080-1) handled and logged exception: javax.servlet.ServletException: Servlet execution threw an exception
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:346) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206) [richfaces-impl-3.3.3.Final.jar:3.3.3.Final]
at org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) [richfaces-impl-3.3.3.Final.jar:3.3.3.Final]
at org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) [richfaces-impl-3.3.3.Final.jar:3.3.3.Final]
at org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) [richfaces-impl-3.3.3.Final.jar:3.3.3.Final]
at org.jboss.seam.web.Ajax4jsfFilter.doFilter(Ajax4jsfFilter.java:56) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) [jboss-seam-2.2.1.Final.jar:2.2.1.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.10.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
at java.lang.Thread.run(Thread.java:636) [rt.jar:1.6.0_20] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:23:03.967

我使用这个链接解决了这个问题[http://lucasterdev.altervista.org/wordpress/2011/06/14/working-with-seam-2-2-and-jboss-as-6/](http://lucasterdev.altervista.org/wordpress/2011/06/14/working-with-seam-2-2-and-jboss-as-6/)

作为记录：在`pom.xml`您的 Web 项目中，从依赖项中排除`servlet-api`和`jboss-seam-jul`工件`jboss-seam-ui`，如以下代码片段所示：

```
<dependency>
    <groupId>org.jboss.seam</groupId>
    <artifactId>jboss-seam-ui</artifactId>
    <version>${seam.version}</version>
    <exclusions>
        <exclusion>
            <artifactId>servlet-api</artifactId>
            <groupId>javax.servlet</groupId>
        </exclusion>
        <exclusion>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam-jul</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

# ruby-on-rails - 如何为“选项”模型设置关联？

> ID：10897100
> 
> 赞同：0
> 
> 时间：2012-06-05T12:13:33.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rails-activerecord

如果有模型`Store`, `Product`,`User`并`Price`具有以下关联

```
class User < ActiveRecord::Base
  has_many :products
  has_many :stores
  has_many :prices
end

class Store < ActiveRecord::Base
  belongs_to :user
  has_many :prices
end

class Product < ActiveRecord::Base
  belongs_to :user
  has_many :prices
end

class Price < ActiveRecord::Base
  belongs_to :user
  belongs_to :product
  belongs_to :store
end

class Estate < ActiveRecord::Base
  belongs_to :user
end 
```

并且想要创建一个`Option`模型，该模型包含模型特定选项类型，例如，如果庄园有后院、游泳池、网球场或价格有交易、折扣或买一送一。这会通过多态关联来完成吗？我这样做是为了不必为每个模型创建一个选项模型，并且可以只为我想要添加的所有新选项创建一个模型。那么这是解决这个问题的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T23:32:45.063

如果您使用多态选项模型，那么对象所属的每个类/记录的字段都是相同的。我认为这不是您想要的，因为交易没有游泳池，而庄园也不是买一送一的（我希望！）。

我会考虑使用[Rails 3.2 和 ActiveRecord::Store 功能](http://api.rubyonrails.org/classes/ActiveRecord/Store.html)。有了这个，只需将一个文本列添加到您的模型（称为“选项”），然后您就可以定义您需要的所有选项。

```
class Estate < ActiveRecord::Base
  belongs_to :user
  store :options, accessors: [ :backyard, :pool, :tennis, :butler, :wine_cellar ]
end

estate = Estate.new
estate.pool = true
estate.options[:number_of_sharks] = 3 # Attributes not defined as accessors work too 
```

# apache - 除非查看目录，否则重定向到另一个子域

> ID：10897108
> 
> 赞同：0
> 
> 时间：2012-06-05T12:14:04.797
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个最近被移动到负载均衡器后面的站点。在我的客户尝试使用某些需要很长时间才能完成的功能之前，这不是问题 - 这显然会达到负载平衡器的超时并且操作失败。我知道理想情况下，函数会被重写以更快地运行，或者使用后台进程，但客户现在不愿意为此付费，因此设计了一种解决方法。

我能够创建一个直接访问服务器 IP 的 URL，绕过负载平衡器，但我不希望普通用户能够从该 URL 访问该站点。因此，我正在尝试创建一个 .htaccess 规则，该规则将用户 301 访问到站点的主 URL，除非他们从管理页面查看它。据我所知，正确的格式应该是：

```
RewriteCond %{HTTP_HOST} bypass.mydomain.com
RewriteCond %{REQUEST_URI} !^admin
RewriteRule (.*) http://www.mydomain.com/$1 [r=301,L] 
```

根据我的理解，这应该是：

*   如果用户在 bypass.mydomain.com
*   并且访问的 URI 不是以“admin”开头
*   将用户从 bypass.mydomain.com 转发到 www.mydomain.com

但是，这似乎不起作用。相反，它每次都转发。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:38:35.740

你可能已经检查过了，但你有任何 .htaccess 文件在工作吗？如果不是，这可能是由 allowoverride 参数引起的。[查看文档](http://httpd.apache.org/docs/current/fr/mod/core.html#allowoverride)

亚历克西斯

# c - 声明“int t[0];”的目的是什么？服务？

> ID：10897113
> 
> 赞同：4
> 
> 时间：2012-06-05T12:14:18.560
> 
> 标签：c, c99

以下声明的目的是什么？

```
struct test
{
     int field1;
     int field2[0];
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T12:17:46.447

这只是一个长度为 0 的数组。根据[http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)：

> GNU C 允许使用零长度数组。它们作为结构的最后一个元素非常有用，它实际上是可变长度对象的标头：

```
 struct line {
   int length;
   char contents[0];
 };

 struct line *thisline = (struct line *)
 malloc (sizeof (struct line) + this_length);
 thisline->length = this_length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T12:16:49.110

它是一个大小为零的数组，如果您没有 C99 ，它是一个有用的[GCC 扩展。](http://gcc.gnu.org/onlinedocs/gcc-4.1.1/gcc/Zero-Length.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:19:05.213

是为了封装。

它用于在不知道任何细节的情况下创建界面。下面是一个简单的例子。

在 test.h （接口）中，它显示有一个 struct test_t 有两个字段。它具有三个功能，第一个是创建结构。set_x 是将一些整数存储到结构中。get_x 是获取存储的整数。

那么，我们什么时候可以存储 x？

负责实现（test.c）的人将声明另一个包含 x 的结构。并在“test_create”中玩一些技巧来malloc这个结构。

一旦接口和实现已经完成。应用程序 (main.c) 可以在不知道它在哪里的情况下设置/获取 x。

测试.h

```
struct test_t
{
    int field1;
    int field2[0];
};

struct test_t *test_create();
void set_x(struct test_t *thiz, int x);
int get_x(struct test_t *thiz); 
```

测试.c

```
#include "test.h"
struct test_priv_t {
    int x;
};

struct test_t *test_create()
{
    return (struct test_t*)malloc(sizeof(struct test_t) + sizeof(struct test_priv_t);
}

void set_x(struct test_t *thiz, int x)
{
    struct test_priv_t *priv = (struct test_priv_t *)thiz->field2;
}

int get_x(struct test_t *thiz)
{
    struct test_priv_t *priv = (struct test_priv_t *)thiz->field2;
} 
```

主程序

```
#include "test.h"

int main()
{
    struct test_t *test = test_create();
    set_x(test, 1);
    printf("%d\n", get_x(test));
} 
```

# hibernate - org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory 不能转换为 org.hibernate.cache.RegionFactory

> ID：10897115
> 
> 赞同：0
> 
> 时间：2012-06-05T12:14:22.500
> 
> 标签：hibernate

尝试在我的网络应用程序中使用休眠并获得以下异常：

```
Initial SessionFactory creation failed.org.hibernate.HibernateException: could not
instantiate RegionFactory [org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory]
org.hibernate.HibernateException: could not instantiate RegionFactory  
[org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory]
at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:423)

Caused by: java.lang.ClassCastException: 
org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory cannot be cast to 
org.hibernate.cache.RegionFactory
at org.hibernate.cfg.SettingsFactory.createRegionFactory(SettingsFactory.java:409)
... 31 more 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:57:51.230

问题是本地数据库问题。问题解决了。

# c# - 如何以 JSON 格式从 ASP.NET 返回名称和电子邮件

> ID：10897117
> 
> 赞同：0
> 
> 时间：2012-06-05T12:14:32.063
> 
> 标签：c#, asp.net, sql-server, json, web-services

我需要以 JSON 格式返回从 MS SQL 2008 表中选择的名称和电子邮件。这是我到目前为止所得到的：

```
public class RaumHelper
{
    internal static string[] Raum()
    {
        List<string> raumObject = new List<string>();

        using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
        using (SqlCommand cmd = new SqlCommand(@"SELECT NAME, EMAIL FROM RAUM", con))
        {
            con.Open();
            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
                while (rdr.Read())
                {
                    if (rdr["NAME"] != DBNull.Value && rdr["EMAIL"] != DBNull.Value)
                    {
                        raumObject.Add(rdr["NAME"].ToString());
                        raumObject.Add(rdr["EMAIL"].ToString());
                    }
                }
            }
        }
        return raumObject.ToArray();
    }
} 
```

我想以 json 格式而不是数组返回它。

它应该看起来像这样或类似的：

```
 {"d":[{
  "Name": "Hans",
  "Email": "bla@blub.de"
  }]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:18:50.000

您的 JavaScriptSerializer 类将列表对象转换为 json 格式

```
string JSonString = new JavaScriptSerializer().Serialize(raumObject).ToString() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:19:17.577

使用[JavascriptSerializer](http://msdn.microsoft.com/fr-fr/library/system.web.script.serialization.javascriptserializer.aspx) Serialize 函数或其他序列化程序，如[Json.NET](http://json.codeplex.com/)

编辑：

与`JavascriptSerializer`：

```
new JavascriptSerializer().Serialize(new{d=raumObject.ToArray()}); 
```

编辑2：

要为您的值设置键，请不要将您的值存储在列表中：

```
internal static string[] Raum()
{
    List<object> raumObject = new List<object>();

    using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
    using (SqlCommand cmd = new SqlCommand(@"SELECT NAME, EMAIL FROM RAUM", con))
    {
        con.Open();
        using (SqlDataReader rdr = cmd.ExecuteReader())
        {
            while (rdr.Read())
            {
                if (rdr["NAME"] != DBNull.Value && rdr["EMAIL"] != DBNull.Value)
                {
                    raumObject.Add(new{
                         Name=rdr["NAME"].ToString(),
                         Email=rdr["EMAIL"].ToString()
                    });
                }
            }
        }
    }

    return  new JavaScriptSerializer().Serialize(new{d=raumObject.ToArray()});
} 
```

# django - 如何为新添加的自定义字段编写手动南移

> ID：10897125
> 
> 赞同：1
> 
> 时间：2012-06-05T12:14:56.637
> 
> 标签：django, django-models, django-south

**这是我在报价模型中新添加的字段

```
quote_template = models.CharField(_('Template'), choices=TEMPLATE, max_length=20) 
```

在 sudo ../hatsenv/bin/python manage.py schemamigration quote --auto

我收到此错误

！无法冻结字段“quote.quote.tags”

！（该字段有类 tags.managers.PartnerTaggableManager）

！南方不能自省一些领域；这可能是因为它们是定制的

！字段。如果他们在 0.6 或更低版本中工作，这是因为我们已经删除了

！模型解析器（它经常破坏东西）。

！要解决此问题，请阅读[http://south.aeracode.org/wiki/MyFieldsDontWork](http://south.aeracode.org/wiki/MyFieldsDontWork)

如何为此编写手动迁移**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:27:56.210

迁移时忽略该字段

从 south.modelsinspector 导入 add_ignored_fields

add_ignored_fields(["^taggit.managers"])

# r - 使用 R 比较两个不同长度的变量

> ID：10897133
> 
> 赞同：0
> 
> 时间：2012-06-05T12:15:54.167
> 
> 标签：r

我需要比较存储在两个变量中的值。变量大小不同。例如

```
x = c(1,2,3,4,5,6,7,8,9,10) 
```

和

```
y = c(2,6,11,12,13) 
```

我需要一个答案，即两个变量中都存在 2 和 6。我需要在 R 中完成此操作。请大家帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T12:29:52.687

intersect 函数避免了对@mdsumner 的简单索引的需要：

```
> x = c(1,2,3,4,5,6,7,8,9,10)
> y = c(2,6,11,12,13)
> intersect(x,y)
[1] 2 6 
```

在这里可以找到一大堆集合运算符：`help(intersect)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T14:01:36.367

在允许某种公差的附加要求之后发布：您可以顺序检查一组值与第二组中的所有其他值，或者您可以使用`outer()`. 一旦您将外部结果作为逻辑矩阵，仍然存在引用值的任务，但 expand.grid 似乎能够处理：

```
expand.grid(x,y)[outer(x,y, FUN=function(x,y) abs(x-y) < 0.01), ]
#   Var1 Var2
#2     2    2
#16    6    6 
```

发布后我发现您的值已排序。事实证明，从 expand.grid() 中提取的内容在传递未排序的向量时仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:21:02.007

```
x[x %in% y]
[1] 2 6 
```

或者，更明确地说：

```
x[match(x, y, nomatch = 0) > 0]
[1] 2 6 
```

请注意，您实际上将 的结果`match`与输入值的简单索引链接在一起。

见`?match`。

# scala - 用于评论的 IntelliJ IDEA 热键不适用于 Scala

> ID：10897136
> 
> 赞同：14
> 
> 时间：2012-06-05T12:16:07.463
> 
> 标签：scala, intellij-idea

[这里](http://www.jetbrains.com/idea/webhelp/keyboard-shortcuts-you-cannot-miss.html)提到的所有热键（`Ctrl`+`Slash`或`Ctrl`+ `Divide`、`Ctrl`++或`Shift`++ ）都不适用于我的 IntelliJ IDEA 11.1.2。在 Windows 7、64 位下安装。我使用德语键盘布局。 `Slash``Ctrl``Shift``Divide`

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-05T12:28:50.620

此问题特定于您的键盘布局，您需要在|中更改**带有行注释**的注释和**带有块注释**快捷方式的注释。.`Settings``Keymap`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-18T11:15:38.547

如果您不想更改键盘映射，也可以使用**键盘小键盘**`÷`上的 - 按钮。- 按钮也代表德语（可能还有大多数其他人）-Keyboard Layouts 上的**/ 。****`÷`**

 ****因此`Ctrl`+ `÷`(Numpad) 和`Ctrl`+ `Shift`+ `÷`(Numpad) 工作。

好的部分是，这将适用于其他尚未重新映射其键盘映射的开发人员的机器。

*编辑（见下面的评论）：* 如果您的键盘不提供小键盘，您的键盘布局可能会为您提供一种模拟小键盘的方法（例如使用 -`Fn`键）。****

# php - Php：如何从字符串中删除任何字符或整个字符串，不包括引号之间的字符？

> ID：10897137
> 
> 赞同：3
> 
> 时间：2012-06-05T12:16:08.237
> 
> 标签：php, regex

[该线程](https://stackoverflow.com/questions/1721921/how-could-i-find-all-whitespaces-excluding-the-ones-between-quotes/1722055)非常相似，但我不想删除空格，而是删除任何字符。例如，我试图从字符串中删除新行（0x10 或 0x13 字符），但如果有东西在 ' ' 或 " " 周围，那么它必须保持不变。我正在使用 php。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:26:39.153

您可以通过替换以下表达式来做到这一点：

```
("[^"]*"|'[^']*')|[\r\n]+ 
```

使用第一个捕获组的内容：`$1`.

这可以通过捕获引号并将其替换为自身，或匹配您要删除的内容并将其替换为空字符串来实现。

如果您也想处理反斜杠转义，则可以在同一个替换中使用以下表达式：

```
("(?:[^"\\]+|\\.)*"|'(?:[^'\\]+|\\.)*')|[\r\n]+ 
```

# django - SyntaxError 无效语法（views.py，第 52 行）

> ID：10897138
> 
> 赞同：0
> 
> 时间：2012-06-05T12:16:08.300
> 
> 标签：django, list, syntax, views

你知道为什么它在返回行中显示无效语法吗？一切似乎都很好，我检查了。如果缩进有问题，我已经用空格替换了制表符。

```
def detail(request, sl):
    try:
        post = Post.objects.filter(slug=sl)[0]
        try:
            previous_post = post.get_previous_by_published()
        except:
            previous_post = ""
        try:
            next_post = post.get.next_by_published()
        except:
            next_post = ""
    return render_to_response('blog/detail.html',{'post':post,
                                                  'next_post':next_post,
                                                  'previous_post':previous_post,
                                                 },) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:49:27.873

呃，你开了三个`try`s 并且只有两个`except`s ......你需要先抓住它，`try`然后再`return`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:22:03.540

列表索引似乎在线

```
post = Post.objects.filter(slug=sl)[0] 
```

如果您知道您的查询将返回单个结果，则不要使用 FILTER，将其替换为 GET 并与它一起使用 try except。

```
try:
    post = Post.objects.get(slug = sl)
except:
    pass #something 
```

否则你可以简单地做

```
try:
    post = Post.objects.filter(slug = sl)[0]
except IndexError, e:
    pass #something 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:33:22.287

在您的退货声明中添加 RequestContext

```
from django.template.context import RequestContext

return render_to_response('blog/detail.html',{'post':post,
                                              'next_post':next_post,
                                              'previous_post':previous_post,
                                             },
                          context_instance=RequestContext(request)) 
```

# c++ - 在 C++ 中解析文本头数据包的问题

> ID：10897142
> 
> 赞同：0
> 
> 时间：2012-06-05T12:16:18.813
> 
> 标签：c++, sip

我正在尝试解析基于文本的协议的 SIP 协议（​​类似于 HTTP）的标头数据包。标题中的字段没有顺序。例如：如果有 3 个字段 f1、f2 和 f3，它们可以按任意顺序出现任意次数，例如 f3、f2、f1、f1。

这增加了我的解析器的复杂性，因为我不知道哪个会先出现。

我应该怎么做才能克服这种复杂性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:27:16.107

最终，您只需将处理与收货顺序分离。为此，有一个在遇到字段时重复的循环，并在循环内确定它是哪种字段类型，然后分派给该字段类型的处理。如果您可以立即处理字段，但如果您需要保存为字段类型提供的潜在多个值，您可能 - 例如 - 将它们放入字段名称或 ID 上的一个`vector`甚至是共享键中。`multimap`

伪代码：

```
Field x;
while (x = get_next_field(input))
{
    switch (x.type())
    {
       case Type1: field1_values.push_back(x.value()); break;
       case Type2: field2 = x.value(); break;  // just keep the last value seen...
       default: throw std::runtime_error("unsupported field type");
    }
}

// use the field1_values / field2 etc. variables.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:40:08.070

托尼已经给出了主要想法，我会更具体。

解析的基本思想是一般分为几个阶段。在您的情况下，您需要将词法分析部分（提取标记）与语义部分（作用于它们）分开。

你可以以不同的方式进行，因为我更喜欢结构化的方法，让我们假设我们有一个简单的结构来表示标题：

```
struct SipHeader {
    int field1;
    std::string field2;
    std::vector<int> field3;
}; 
```

现在，我们创建一个函数，它接受一个字段名称、它的值，并适当地填充`SipHeader`结构的相应字段。

```
void parseField(std::string const& name, std::string const& value, SipHeader& sh) {
    if (name == "Field1") {
       sh.field1 = std::stoi(value);
       return;
    }

    if (name == "Field2") {
       sh.field2 = value;
       return;
    }

    if (name == "Field3") {
       // ...
       return;
    }

    throw std::runtime_error("Unknown field");
 } 
```

然后您遍历标题的行，并为每一行分隔名称和值并调用此函数。

明显有改进：

*   您可以使用仿函数映射而不是 if 链，或者您可以完全标记源并将字段存储在`std::map<std::string, std::string>`
*   您可以使用状态机技术立即对其进行操作而无需复制

但基本建议是相同的：

> 要管理复杂性，您需要将任务分离为正交子任务。

# jquery - 使用 AJAX 保存时，jQuery 模态表单验证不起作用

> ID：10897149
> 
> 赞同：0
> 
> 时间：2012-06-05T12:16:47.670
> 
> 标签：jquery, ajax, validation, dialog

我希望这里的一位专家可以用我一直在研究的 jQuery 对话框脚本为我指明正确的方向。

我的问题：通过 $.ajax() 保存时，我无法使用我的对话框窗口进行验证。如果我不通过 AJAX 保存并提交表单，我的脚本就可以正常工作：

例如。$( this ).find('form#mws-validate-event').submit();

如果有人有时间查看我在下面留下的代码并帮助验证部分，我将不胜感激。我在stackoverflow上搜索了高低，但还没有找到解决方案。

谢谢。

```
 $("#mws-addform-dialog").dialog({
                autoOpen: false, 
                title: "My Form / Add New", 
                modal: true, 
                width: "480",
            //working validation (NO AJAX)
            //buttons: [{
            //      text: "Submit", 
            //      click: function() {
            //          $( this ).find('form#mws-validate-event').submit();
            //      }}] 
            buttons: {
            "Submit": function() {

            },
            'Save': function() {

                $.ajax({
                    type : 'POST',
                    url : 'ajax.php?action=addnew',
                    data : $('#mws-validate-event').serialize(),
                    beforeSubmit : function (){
                        // Validate data before submit?? anyone??
                        //$( this ).find('form#mws-validate-event').submit();
                    },
                    success : function(data) {
                        // Show OK message
                        $('#mws-validate-event').find('.mws-form-message').html(data);
                        alert('ok');
                    },
                    error: function(error){
                        // Show error message
                        alert('error');
                    }
                });

            },
            'Cancel': function() {

                $(this).dialog("close");

            }
          } 
        });

        $("#mws-addform-dialog-btn").bind("click", function(event) {
            $("#mws-addform-dialog").dialog("option", {modal: true}).dialog("open");
            event.preventDefault();
        });
        //- modal form

        // validate form        
        $("#mws-validate-event").validate({
        //ignore: ".ignore",
            rules: {
                spinner: {
                    required: true, 
                    max: 5
                }

            }, 
            invalidHandler: function(form, validator) {
                var errors = validator.numberOfInvalids();
                if (errors) {
                    var message = errors == 1
                    ? 'You missed 1 field. It has been highlighted'
                    : 'You missed ' + errors + ' fields. They have been highlighted';
                    $("#mws-validate-error").html(message).show();
                } else {
                    $("#mws-validate-error").hide();
                    }
            }
        });
        //- validate form 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:24:51.503

您是否尝试过使用 jquery 验证器进行验证？它为您完成大部分验证工作，并且易于使用。

```
http://bassistance.de/jquery-plugins/jquery-plugin-validation/ 
```

# key - 在 Textmate2 中取消绑定捆绑菜单操作命令

> ID：10897155
> 
> 赞同：-1
> 
> 时间：2012-06-05T12:17:07.750
> 
> 标签：key, unbind, textmatebundles, textmate2

我在捆绑编辑器中摆弄了一下。对于捆绑菜单操作，我设置*Key 等效*项只是为了尝试一下，效果很好。

现在我想弄清楚如何取消绑定/清除这个特定的捆绑菜单操作。据我所知，通过捆绑编辑器是不可能的。

我试图删除两者`~/Library/Application Support/TextMate/Cache`，`~/Library/Application Support/TextMate/Managed/Cache`但这不会这样做。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:39:38.550

我实际上是通过将 TextMate2 升级到版本**9113**来解决的。此版本引入了清除关键等效项的功能。看：

> 将清除按钮添加到关键等效记录器。

# visual-studio-2010 - 从 HTML 解析财务信息

> ID：10897162
> 
> 赞同：0
> 
> 时间：2012-06-05T12:17:43.323
> 
> 标签：visual-studio-2010, c#-4.0, html-agility-pack

第一次尝试学习在 Visual Studio 和 C# 中使用 HTML。我正在使用[html 敏捷包](http://htmlagilitypack.codeplex.com/ "敏捷包")库。进行解析。

从这个[页面](http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii "德克萨斯州") 我试图从每个季度的“净收入”行中提取数字。

这是我目前的进展，（但我不确定如何进一步进行）：

```
 String url = "http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii"
        var webGet = new HtmlWeb();
        var document = webGet.Load(url);
        var body = document.DocumentNode.Descendants()
                            .Where(n => n.Name == "body")
                            .FirstOrDefault();

        if (body != null)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:27:10.663

嗯，首先不需要先获取body，你可以直接在文档中查询你想要的。至于找到你正在寻找的价值，你可以这样做：

```
HtmlNode tdNode = document.DocumentNode.DescendantNodes()
  .FirstOrDefault(n => n.Name == "td"
    && n.InnerText.Trim() == "Net Income");
if (tdNode != null)
{
  HtmlNode trNode = tdNode.ParentNode;
  foreach (HtmlNode node in trNode.DescendantNodes().Where(n => n.NodeType == HtmlNodeType.Element))
  {
    Console.WriteLine(node.InnerText.Trim());
    //Output:
    //Net Income
    //265.00
    //298.00
    //601.00
    //672.00
    //666.00
  }
} 
```

还要注意`Trim`调用，因为某些元素的内部文本中有换行符。

# hadoop - Cloudera Manager 格式化 HDFS 失败，topology.py.vm 丢失

> ID：10897167
> 
> 赞同：0
> 
> 时间：2012-06-05T12:18:07.390
> 
> 标签：hadoop, cloudera

使用 Cloudera Manager（免费版）添加新服务（服务类型 = HDFS）时遇到错误。错误消息如下：

> 无法创建进程：com.cloudera.cmf.service.config.ConfigFileSpec$GenerateException：无法处理模板：**找不到模板 hadoop/topology.py.vm**

我检查了 /var/log/cloudera-scm-server/cloudera-scm-server.log 并找到了如下一行。

> org.apache.velocity.exception.ResourceNotFoundException：**找不到资源'/WEB-INF/templates/hadoop/topology.py.vm'**

我猜想某个 war 文件不包含 hadoop-metrics.properties.vm （速度模板文件？）虽然它应该这样做，并且这可能与[WHIRR-370](https://issues.apache.org/jira/browse/WHIRR-370 "配置文件的模板")有关。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:39:38.367

请问使用的是哪个版本的Cloudera Manager？这个错误是在您尝试添加服务后的一段时间后才出现的吗？

根据错误，似乎缺少一些配置，说明服务添加失败的原因。所以我想知道你是如何在这个集群上安装 Hadoop 的？

如果您下载虚拟机​​并从您的安装中进行比较，您可以比较文件夹的完整性和缺失的内容。它总是对我有用。

# java - 什么是引用复制技术，为什么字符串对象引用值没有改变？

> ID：10897168
> 
> 赞同：0
> 
> 时间：2012-06-05T12:18:10.437
> 
> 标签：java

**强文本**什么是参考复制技术？

```
The reference copying technique is much more difficult to use for mutable objects, because if any user of a reference to a mutable object changes it, all other users of that reference will see the change 
```

另一件事我测试了下面的示例代码以传递值和传递引用。原始值是传递值，对象引用是传递引用。在示例示例中，我测试了字符串常量，字符串对象，字符串缓冲区，int，ArrayList。

```
 String s="foo";
    String sample1=new String("dog");
    StringBuffer sb=new StringBuffer();
    sb.append("abc");
    ArrayList l=new ArrayList();
    l.add("ssss");
    l.add("bbbb");
    l.add("ssbbbss");
    l.add("bbbb");
    l.add("bbbb");
    int k=14,listsize=0;
    listsize=l.size();
    TesingPrimitivRefernce.generateString(s);
    TesingPrimitivRefernce.generateString(sample1);
    TesingPrimitivRefernce.generateStringBuilder(sb);
    TesingPrimitivRefernce.generateInt(k);
    TesingPrimitivRefernce.generateNewList(l);
    System.out.println("String============"+s+" String Buffer========"+sb+" String object "+sample1);
    System.out.println("int Primitive Values==="+k);
    System.out.println("Orignal List Size"+listsize+" After called method List Size=========="+l.size());

 public static void generateString(String s){
       s=s.concat("d");
   }
   public static void generateStringBuilder(StringBuffer s){
       s=s.append("d");

   }
   public static void generateInt(int s){
       s=10;

   }
   public static void generateNewList(ArrayList list){
      list.remove("bbbb");

   } 
```

**我的疑问是为什么 String 对象**在调用***TesingPrimtivRefernce.generateString(sample1) 后没有改变（**ie，variable sample1）。***但是在arraylist中我删除了值“bbb”并自动减小大小。这里我传递了String对象引用。那么为什么它没有改变？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:21:46.957

我不知道谁告诉你“原始值是按值传递，对象引用是按引用传递”。这是错误的。

在 Java 中，一切都是按值传递的。

现在，对象不是直接操作，而是通过引用。多个引用可以指向同一个对象，但这些引用像任何其他参数一样被复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:22:13.320

Java 中的引用是*按值*传递的。因此，如果您将第一个参数重新分配`TesingPrimitivRefernce.generateString`给其他内容，则引用的副本*已*`sample1`更改（您没有尝试使用 some... 修饰符来修改参数，是吗？:)）。

所以，修改前：

*   sample1`->`狗
*   的`->`狗

修改后：

*   sample1`->`狗
*   s `->`dogdd（一旦方法退出，这个 String 对象就会丢失）。

在 ArrayList 案例中，您正在修改基础列表，因此修改了最初引用的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:29:17.453

字符串是常量；它们的值在创建后无法更改。在您将字符串传递给方法时，会创建该字符串的副本。此方法中的所有进一步更改都会修改此副本，而不是字符串本身。

# java - 如何通过编码关闭/关闭 Android 平板电脑？

> ID：10897177
> 
> 赞同：2
> 
> 时间：2012-06-05T12:18:53.763
> 
> 标签：java, hardware, android-4.0-ice-cream-sandwich, android

我正在使用 Android 版本 4.0.3 的 Micromax Fun Book，我想通过我的 android 代码关闭该平板电脑。

实际上，我想在我的应用程序退出后立即关闭平板电脑。
可能是我需要一些硬件许可。我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:29:17.497

您可以使用 PowerManager API 重新启动设备。不过，您可能需要在清单中获得 REBOOT 权限。

[http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String](http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String) ) [http://developer.android.com/reference/android/Manifest.permission.html#REBOOT](http://developer.android.com/reference/android/Manifest.permission.html#REBOOT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-23T11:38:40.240

Android 将不允许通过代码关闭设备，也许稍后一些有根设备会允许这样做。

但是我们可以给他们一个对话框，如下所示，关闭设备：

```
Intent i = new Intent("android.intent.action.ACTION_REQUEST_SHUTDOWN");
i.putExtra("android.intent.extra.KEY_CONFIRM", true);
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-23T11:43:44.177

所有这些代码都只能在 Rooted 设备上工作，否则不能。

# vb.net - Nullable(Of ) : 参数类型 . 它有效吗？

> ID：10897181
> 
> 赞同：2
> 
> 时间：2012-06-05T12:19:24.707
> 
> 标签：vb.net, reflection, attributes

我正在尝试将 Boolean 类型用于某些参数。

```
<AttributeUsage(AttributeTargets.Method, Inherited:=True, AllowMultiple:=False)>
Public Class MyAttribute
             Inherits Attribute
  Property MyCondition As Boolean
End Class 
```

我面临的问题是，在我的对象*MyAttribute*中，我无法说布尔属性的值是否为 False：

*   因为参数的存在（e:MyCondition:=false）

或者，

*   因为没有传递任何参数，并且我的属性由于我的对象的初始化而具有值 False。

我虽然关于使用属性 Nullable(Of Boolean) 来代替，但这似乎是不允许的？

```
Property MyCondition As Nullable(of Boolean) 
```

**错误消息**“*属性或字段 'MyCondition' 没有有效的属性类型*。”

有这种情况吗？唯一可行的参数类型是字符串（实例化时为空）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:30:08.750

我相信您只能使用可以在代码中表示为文字常量的简单数据类型（例如 100、True、“Test”）。这可能就是 Nullable(Of Boolean) 不适合你的原因。但是，您可以通过创建实际的属性处理程序来完成您想要做的事情：

```
<AttributeUsage(AttributeTargets.Method, Inherited:=True, AllowMultiple:=False)>
Public Class MyAttribute
    Inherits Attribute

    Public Property MyCondition As Boolean
        Get
            Return _myCondition
        End Get
        Set(ByVal value As Boolean)
            _myCondition = value
            _explicitlySet = True
        End Set
    End Property
    Private _myCondition As Boolean = False

    Public ReadOnly Property ExplicitlySet As Boolean
        Get
            Return _explicitlySet
        End Get
    End Property
    Private _explicitlySet As Boolean = False
End Class 
```

或者，您可以将其设为只读可空属性并使用构造函数对其进行设置：

```
<AttributeUsage(AttributeTargets.Method, Inherited:=True, AllowMultiple:=False)>
Public Class MyAttribute
    Inherits Attribute

    Public Sub New()
    End Sub

    Public Sub New(myCondition As Boolean)
        _myCondition = myCondition
    End Sub

    Public ReadOnly Property MyCondition As Nullable(Of Boolean)
        Get
            Return _myCondition
        End Get
    End Property
    Private _myCondition As Nullable(Of Boolean)
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:30:43.490

改为使用枚举

```
public enum TriState
{
    NotSet,
    False,
    True
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:32:54.627

我会使用三类方法

```
MyAttribute (inherits Attribute)
ValidMyAttribute (interits MyAttribute)
InvalidMyAttribute (inherits MyAttribute)

' means true
<ValidMyAttribute> _
Public Sub MyMethod1()

' means false
<InvalidMyAttribute> _
Public Sub MyMethod2()

' means not defined
<MyAttribute> _
Public Sub MyMethod3() 
```

类应该是这样的

```
Public class MyAttribute
    Inherits Attribute

    Public Overridable ReadOnly Property Value as Boolean?
        Get
            return nothing
        End Get
    End Property

End Class

Public class ValidMyAttribute
    Inherits MyAttribute

    Public Overrides ReadOnly Property Value as Boolean?
        Get
            return true
        End Get
    End Property

End Class

Public class ValidMyAttribute
    Inherits MyAttribute

    Public Overrides ReadOnly Property Value as Boolean?
        Get
            return false
        End Get
    End Property

End Class 
```

**更新：**

只是再想一想，这应该容易得多：

```
<AttributeUsage(AttributeTargets.Method, Inherited:=True, AllowMultiple:=False)>
Public Class MyAttribute
    Inherits Attribute
    Public Property Value As Boolean? = Nothing
    Public Sub New(value As Boolean)
        Me.Value = value
    End Sub
    Public Sub New()
    End Sub
End Class 
```

用法：

```
<MyAttribute(True)> _
Public Sub Method()

<MyAttribute(false)> _
Public Sub Method()

' Value will be nothing
<MyAttribute()> _
Public Sub Method() 
```

# java - 从 Java 控制台隐藏信息

> ID：10897182
> 
> 赞同：1
> 
> 时间：2012-06-05T12:19:31.453
> 
> 标签：java, applet, console

是否可以从 Java 控制台隐藏一些信息？我的小程序从外部网站抓取数据。不幸的是，在 URL 中有一些我想隐藏的信息。但是当我启动我的小程序和 java 控制台时，设置跟踪级别 = 5，我可以看到类似 `network: Connecting url_here`
Is it possilbe to hide this information？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:22:27.450

> 是否可以隐藏此信息？

不，小程序不可能隐藏该信息。您的网站可以通过提供代理来隐藏信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T18:07:41.453

如果您不介意从 java 控制台中删除所有 sysout 日志记录，我发现[这个技巧可以正常工作：](https://stackoverflow.com/questions/4799006/in-java-how-can-i-redirect-system-out-to-null-then-back-to-stdout-again)

```
try {
    System.setOut(new PrintStream(new OutputStream() {
        public void write(int b) throws IOException {
            //DO NOTHING
        }
        public void write(byte b[], int off, int len) throws IOException {
            //DO NOTHING
        }
    }));
} catch (Exception e) {
    // ignore
} 
```

# iphone - iOS：用于录制语音编码以进行网络传输的音频格式

> ID：10897185
> 
> 赞同：4
> 
> 时间：2012-06-05T12:19:35.693
> 
> 标签：iphone, ios, audio, avaudiorecorder

我正在寻找一种好的音频格式来在本地保存录音并通过网络传输。要求是：

*   体面的质量。这些剪辑，收到后将被多次收听
*   工作流程应支持传输前的修剪和褪色
*   文件大小合适

这是我目前的录制方法：

```
// SEE IMA4 vs M4A http://stackoverflow.com/questions/3509921/recorder-works-on-iphone-3gs-but-not-on-iphone-3g
NSDictionary *recordSettings =
[[NSDictionary alloc] initWithObjectsAndKeys:
 [NSNumber numberWithFloat: 11025],               AVSampleRateKey,
 [NSNumber numberWithInt: kAudioFormatLinearPCM], AVFormatIDKey,
 [NSNumber numberWithInt: 1],                     AVNumberOfChannelsKey,
 [NSNumber numberWithBool:NO],                    AVLinearPCMIsFloatKey,
 [NSNumber numberWithInt: AVAudioQualityMax],     AVEncoderAudioQualityKey,
 nil];

NSError *error = nil;
self.audioRecorder = [[ AVAudioRecorder alloc] initWithURL:self.recordingFile settings:recordSettings error:&error]; 
```

以及编码方法：

```
NSString *file = [NSString stringWithFormat:@"recordingConverted%x.caf", arc4random()];
self.filePath = [NSTemporaryDirectory() stringByAppendingPathComponent: file];
NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:self.filePath]) {
    NSError *error;
    if ([fileManager removeItemAtPath:self.filePath error:&error] == NO) {
        NSLog(@"removeItemAtPath %@ error:%@", self.filePath, error);
    }
}
NSLog(@"IN: %@", self.recordingFile);
NSLog(@"OUT: %@", self.filePath);

AVAsset *avAsset = [AVAsset assetWithURL:self.recordingFile];

// get the first audio track
NSArray *tracks = [avAsset tracksWithMediaType:AVMediaTypeAudio];
if ([tracks count] == 0) return nil;
AVAssetTrack *track = [tracks objectAtIndex:0];

// create the export session
// no need for a retain here, the session will be retained by the
// completion handler since it is referenced there
AVAssetExportSession *exportSession = [AVAssetExportSession
                                       exportSessionWithAsset:avAsset
                                       presetName:AVAssetExportPresetAppleM4A];
if (nil == exportSession) return nil;

// create trim time range
CMTime startTime = CMTimeMake(self.speakingBeginTime*44100, 44100);
CMTime stopTime = CMTimeMake((self.speakingBeginTime+[self.duration doubleValue])*44100, 44100);
CMTimeRange exportTimeRange = CMTimeRangeFromTimeToTime(startTime, stopTime);

// create fade in time range
CMTime startFadeInTime = startTime;
CMTime endFadeInTime = CMTimeMake((self.speakingBeginTime+RECORDING_INTERVAL)*1.5*44100, 44100);
CMTimeRange fadeInTimeRange = CMTimeRangeFromTimeToTime(startFadeInTime,
                                                        endFadeInTime);

// setup audio mix
AVMutableAudioMix *exportAudioMix = [AVMutableAudioMix audioMix];
AVMutableAudioMixInputParameters *exportAudioMixInputParameters =
[AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:track];

[exportAudioMixInputParameters setVolumeRampFromStartVolume:0.0 toEndVolume:1.0
                                                  timeRange:fadeInTimeRange]; 
exportAudioMix.inputParameters = [NSArray
                                  arrayWithObject:exportAudioMixInputParameters]; 

// configure export session  output with all our parameters
exportSession.outputURL = [NSURL fileURLWithPath:self.filePath]; // output path
exportSession.outputFileType = AVFileTypeAppleM4A; // output file type
exportSession.timeRange = exportTimeRange; // trim time range
exportSession.audioMix = exportAudioMix; // fade in audio mix

// MAKE THE EXPORT SYNCHRONOUS
dispatch_semaphore_t semaphore = dispatch_semaphore_create(0);
[exportSession exportAsynchronouslyWithCompletionHandler:^{
    dispatch_semaphore_signal(semaphore);
}];
dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);
dispatch_release(semaphore);

if (AVAssetExportSessionStatusCompleted == exportSession.status) {
    return self.filePath;
    //NSLog(@"AVAssetExportSessionStatusCompleted");
} else if (AVAssetExportSessionStatusFailed == exportSession.status) {
    // a failure may happen because of an event out of your control
    // for example, an interruption like a phone call comming in
    // make sure and handle this case appropriately
    NSLog(@"AVAssetExportSessionStatusFailed %@", exportSession.error.localizedDescription);
} else {
    NSLog(@"Export Session Status: %d", exportSession.status);
} 
```

目前，3 秒音频剪辑的性能为：PCM 为 62,228 字节，编码为 36,654 字节。好像我可以做得更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T18:53:08.973

我在这里找到了指南：

[http://gamua.com/blog/2010/06/sound-on-ios-best-practices/](http://gamua.com/blog/2010/06/sound-on-ios-best-practices/)

有助于挑选声音格式（尤其是评论）

这里也有一些很好的例子：

[如何使用 AVAudioRecorder 在 iPhone 上录制音频？](https://stackoverflow.com/questions/1010343/how-do-i-record-audio-on-iphone-with-avaudiorecorder)

特别是具有各种导出格式的示例，以及这个答案：

[https://stackoverflow.com/a/3870385/2214106](https://stackoverflow.com/a/3870385/2214106)

这显着减少了文件大小。

# php - 编写一个适用于任何语言的 php 函数

> ID：10897186
> 
> 赞同：0
> 
> 时间：2012-06-05T12:19:39.590
> 
> 标签：php, character-encoding

我正在编写一个函数来清除带有或不带有 ut8 字符的文本。

我不断收到这样的文字。

```
Coventry Salary - �25,000 - �35,000 
```

但是使用此功能，它会删除�但留下其他。

我想知道是否有人编写了一个清理文本的函数。

```
function convertHTMLSpecialChars ( $str='' ) 
{
    $str = htmlspecialchars ( $str );
    $str = mb_convert_encoding($str, 'UTF-8', mb_detect_encoding($str));
    $str = htmlspecialchars($str, ENT_NOQUOTES, 'UTF-8');
    return $str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:24:36.877

确保服务器将您的页面输出为 UTF-8。

您可以通过使用强制它：

```
header ('Content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:25:31.213

这个功能：

```
$str = mb_convert_encoding($str, 'UTF-8', mb_detect_encoding($str)); 
```

只是`tries`为了检测字符集`$str`; 如果它发现 $str 包含 utf8 字符，它将返回“utf8”，因此 func 实际上是：

```
$str = mb_convert_encoding($str, 'UTF-8', 'UTF-8'); 
```

这没有多大帮助..在我看来**，您应该**手动提供字符串的字符集。例如，如果它的**土耳其语： iso-8859-5**，如果它的**希腊语： iso-8859-7**等等..

# mysql - 重置自动增量以填补空白

> ID：10897187
> 
> 赞同：1
> 
> 时间：2012-06-05T12:19:41.727
> 
> 标签：mysql

我目前正在构建一个简单的用户数据库，在其中使用 AUTO INCREMENT 来获取唯一的用户 ID。当我删除单个用户时，用户 ID 会出现空白。我很好奇是否可以让自动增量填充这些空白而不是使用下一个最高数字：

用户 ID
1000
1001
1002
1004

现在我插入到表中的下一个用户 ID 将是 1005，但我希望它是 1003。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:24:23.943

不，使用自动增量这是不可能的。您将需要手动进行一些额外的编码。通常，如果您保持最大值足够高，跳过的记录不会有太大问题。

# sql-server-2008 - 底层提供程序无法打开，用户 IIS APPPOOL 登录失败

> ID：10897189
> 
> 赞同：1
> 
> 时间：2012-06-05T12:19:49.807
> 
> 标签：sql-server-2008, entity-framework, ef-code-first

我不是 sql server 人，但我正在开发客户端的应用程序，并希望首先通过 EF 代码连接到数据库

**我的异常消息是**

> 底层提供者打开失败

**异常详情**

> 无法打开登录请求的数据库 [DatabaseName]。登录失败
> 
> 用户“IIS APPPOOL\ASP.NET v4.0”登录失败

**我的网络配置**

```
<add name="TraininGoDB"
    providerName="System.Data.SqlClient"
    connectionString="Server=LOCALPCNAME\SQLEXPRESS;Database=[DATABASENAME];Integrated Security=True;"/> 
```

**EF 上下文和实体在一个单独的项目中定义，应用程序配置如下**

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.3.1.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </configSections>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="Data Source=(localdb)\v11.0; Integrated Security=True; MultipleActiveResultSets=True" />
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

我正在使用 SQL Server Express 2008

不知道来自数据库配置或网络配置的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:32:00.280

运行 Web 应用程序池（与您的 Web 应用程序关联）的用户无权访问您的数据库。您需要授予它权限或在另一个具有权限的用户下运行。因此，总结一下：检查您的应用程序池在哪个用户下运行，然后检查该用户是否有权访问您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T16:13:38.963

如果您的所有 Web.config 文件都正确，SQLSERVER 具有适当的权限等，您还可以检查一件事。当客户让我配置项目以使 Entity Framework 不会自动删除数据库（例如，如果模型发生更改）时，我曾经遇到过这个问题，但我仍在 localhost 上测试项目。因此，我需要创建一个新数据库，但我忘了修复我的上下文文件。例如，我的问题是：

```
public MasterContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
        Database.SetInitializer<MasterContext>(null);
    } 
```

什么时候应该（***为了测试***）：

```
public MasterContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
        Database.SetInitializer<MasterContext>(new DropCreateDatabaseIfModelChanges<MasterContext>());

    } 
```

否则，我会收到相同的错误，即底层提供程序在打开时失败，内部异常是用户登录失败。

# tomcat - 无法在 Netbeans 7.1.1 中启动 tomcat7

> ID：10897193
> 
> 赞同：0
> 
> 时间：2012-06-05T12:19:56.260
> 
> 标签：tomcat, netbeans

我正在尝试通过 Tomcat 7 通过 NetBeans 部署一个空的 webapp。

Tomcat 在“服务器”->“Apache Tomcat”中定义。我单击“开始”，它运行。我可以通过 访问它`http://localhost:8080`，那里有标准的 Tomcat 网页。

然后我切换到“项目”选项卡，其中驻留了一个空的、新创建的“Java Web 应用程序”。该类已正确创建：

```
@WebServlet(name = "myProj", urlPatterns = {"/myProj"})
public class myProj extends HttpServlet {
... 
```

当我尝试访问`http://localhost:8080/myProj`时，我收到 404 错误。
我尝试右键单击该项目，然后“部署”，然后弹出此消息：
`Deployment error: Starting of Tomcat failed, the server port 8080 is already in use. See the server log for details.`

另外，由于某种原因，我无法停止 Tomcat 服务器。暂停/停止选项显示为灰色。

我究竟做错了什么？
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:28:03.480

找到了。
由于某种原因，NetBeans 尝试使用在 IE 中定义的代理。

嗯。

# sql-server-2008 - 优化器忽略过滤的索引条件

> ID：10897198
> 
> 赞同：20
> 
> 时间：2012-06-05T12:20:08.257
> 
> 标签：sql-server-2008, indexing, filtered-index

假设我正在运行一个显示有趣猫图片的网站。我有一个名为`CatPictures`、 和 列的表`Filename`，`Awesomeness`以及`DeletionDate`以下索引：

```
create nonclustered index CatsByAwesomeness
on CatPictures (Awesomeness) 
include (Filename)
where DeletionDate is null 
```

我的主要查询是这样的：

```
select Filename from CatPictures where DeletionDate is null and Awesomeness > 10 
```

我作为一个人，知道上面的索引就是SQL Server所需要的，因为索引过滤条件已经保证了`DeletionDate is null`部分。

然而，SQL Server 不知道这一点；我的查询的执行计划不会使用我的索引：

![查询计划，进行表扫描](../Images/660450ac3cdf6450a420734f0b6e4cfe.png)

即使添加索引提示，它仍然会`DeletionDate`通过查看实际表数据来显式检查：

![使用索引但仍执行书签查找的查询计划](../Images/a7d933c8f25c7a53262133519553f6c2.png)

（此外还抱怨缺少包含 的索引`DeletionDate`）。

我当然可以

```
include (Filename, DeletionDate) 
```

相反，它将起作用：

![具有包含删除日期的索引的查询计划； 使用该索引](../Images/77b9d5e50d5ca7ded9a0ea59f6628f45.png)

但是包含该列似乎是一种浪费，因为这只会占用空间而没有添加任何新信息。

有没有办法让 SQL Server 知道过滤条件已经在做检查工作`DeletionDate`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T12:26:36.720

不，目前没有。

[请参阅此连接项](http://connect.microsoft.com/SQLServer/feedback/details/643850/filtered-index-execution-plan-is-not-optimized)。它因无法修复而关闭。（或者[这个](http://connect.microsoft.com/SQLServer/feedback/details/454744/filtered-index-not-used-and-key-lookup-with-no-output)专门针对这种`IS NULL`情况）

连接项确实提供了如下所示的解决方法。

> RichardB CFCU 于 2011 年 9 月 29 日上午 9:15 发布
> 
> 一种解决方法是针对`INCLUDE`正在过滤的列。
> 
> ## 例子：
> 
> ```
> CREATE NONCLUSTERED INDEX [idx_FilteredKey1] ON [dbo].[TABLE] 
> (
>     [TABLE_ID] ASC,
>     [TABLE_ID2] ASC
> )
> INCLUDE ( [REMOVAL_TIMESTAMP]) --explicitly include the column here
> WHERE ([REMOVAL_TIMESTAMP] IS NULL) 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T11:41:48.463

> 有没有办法让 SQL Server 知道过滤条件已经在执行检查删除日期的工作？

不。

过滤索引旨在解决某些问题，而不是全部。随着事情的发展，有一天，您可能会看到 SQL Server 支持您期望的过滤索引功能，但您也有可能永远看不到它。

我可以看到它的工作原理有几个很好的理由。

它改进了什么：

1.  贮存。索引只包含匹配过滤条件的键
2.  表现。从上面的一个嘘声。更少的写入和更少的页面 = 更快的检索

它不做什么：

1.  彻底改变查询引擎

将它们放在一起，考虑到 SQL Server 是一个高度流水线、多处理器并行能力的野兽，我们在处理查询服务时会得到以下行为：

1.  查询优化器选择索引的前提条件：检查过滤索引是否适用于 WHERE 子句。
2.  查询优化器继续从统计数据中确定选择性，根据索引是否覆盖等权衡索引->书签查找与集群/堆扫描等的正常工作

我怀疑将针对过滤索引的条件线程化到查询优化器“核心”中，这比将其留在第 1 步要大得多。

就个人而言，我尊重 SQL Server 开发团队，如果它足够简单，他们可能会将其拉入一个不远的 sprint 并完成它。然而，目前那里的东西已经达到了它的预期，让我很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T10:36:15.640

刚刚发现“功能上的差距”，过滤索引被优化器忽略真的很遗憾。我想我会尝试为此使用索引视图，看看这篇文章

[http://www.sqlperformance.com/2013/04/t-sql-queries/optimizer-limitations-with-filtered-indexes](http://www.sqlperformance.com/2013/04/t-sql-queries/optimizer-limitations-with-filtered-indexes)

# ios - iOS 企业配置文件分发

> ID：10897203
> 
> 赞同：0
> 
> 时间：2012-06-05T12:20:27.717
> 
> 标签：ios, xcode, ipad, profile, enterprise

我正在使用企业证书在我的应用程序中签署 dylib，并注意到在某些设备上我收到以下错误：

```
0xe8008015: A valid provisioning profile for this executable was not found. 
```

奇怪的是在我从未手动安装过配置文件的设备上。我认为当我使用 XCode 时，它​​会以某种方式自动安装。

在这些设备上手动安装与证书关联的“内部分发”配置文件解决了这个问题，但我试图了解如何在不需要这个额外步骤的情况下部署我的软件。

推出企业配置文件的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:23:13.520

提到的企业证书是否出现在遇到问题的 iOS 设备上的*设置➞配置文件下？*

在打包最终 .ipa 的 Xcode 安装中，企业证书是否可用作有效（可签名）证书？

您是否使用相同的证书来签署 dylibs 和应用程序？

将企业证书推送到设备的标准方法是在打包/归档应用程序时包含它。Xcode*应该*自动执行此操作 - 至少对于用于签署应用程序本身的证书。

您可以提取 .ipa（重命名为 .zip）并在 .app 包中查找名为“embedded.mobileprovision”的文件。

# cocoa - windowScriptObject setValue:self forKey: 中的 WebView 内存泄漏？

> ID：10897206
> 
> 赞同：3
> 
> 时间：2012-06-05T12:20:34.867
> 
> 标签：cocoa, memory-leaks, webview, webkit, automatic-ref-counting

我有一个嵌入的 Cocoa 应用程序`WebView`。我使用下面的代码将窗口控制器设置为可通过 JavaScript 访问。

问题是调用`setValue:self forKey:@"console"`似乎在 ARC 下引入了内存泄漏，因为 WebView 和窗口控制器在窗口关闭后永远不会释放。

当我注释掉该`setValue`行时，WebView 和控制器会在窗口关闭时自动释放。

我试过`[self.webView.windowScriptObject removeWebScriptKey:@"console"]`了，但这也没有用。

在窗口控制器中添加 JavaScript 对象的代码：

```
- (void)webView:(WebView *)sender didClearWindowObject:(WebScriptObject *)windowObject
       forFrame:(WebFrame *)frame {

    if (frame != self.webView.mainFrame) return;

    [self.webView.windowScriptObject setValue:self forKey:WELCOME_WINDOW_JS_NAME];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:34:09.323

标记，

您已确定问题代码。缺少的是当您释放窗口时您没有将密钥设置为 nil: `setValue: nil forKey: @"console"`。这样做，一切都会好起来的。

安德鲁

# google-maps-api-3 - 一个站点上的 Google Maps API V3 灰色框，在另一个站点上运行良好

> ID：10897207
> 
> 赞同：0
> 
> 时间：2012-06-05T12:20:38.407
> 
> 标签：google-maps-api-3

我有一个网站 [http://beta.aico.co.uk/trained-installers.html](http://beta.aico.co.uk/trained-installers.html)，加载时我得到一个灰色框。我在以下站点（不同的模板）[http://joomla.bemoore.com/index.php?option=com_content&view=article&id=22&Itemid=29](http://joomla.bemoore.com/index.php?option=com_content&view=article&id=22&Itemid=29)上有相同的代码，这工作正常。因此我想这一定是一个 CSS 问题，但对于我的生活，我无法弄清楚它可能是什么。

有没有人知道问题出在哪里？

谢谢，

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T20:16:34.137

这确实是一个 CSS 问题。这是罪魁祸首的CSS规则：

```
div {
overflow: hidden !important;
overflow-y: hidden !important;
overflow-x: hidden !important;
} 
```

train-installers.html 的第 397 行

您需要修改规则以仅适用于相关 DIV，而不是所有 DIV。

# iphone - 如何在 Core Data 中存储 NSString？

> ID：10897215
> 
> 赞同：0
> 
> 时间：2012-06-05T12:21:03.553
> 
> 标签：iphone, ios, xcode, core-data

我有一个遵循这个的模型：

![模型](../Images/38a0d116e5d728b723d87188e2c366ff.png)

然后我想从`UITableView`. 问题是，我想将它们保存在 iPhone（数据库）中直到达到 10，然后它会删除第一个并添加最后一个。我有这个想法，但我不能只是添加任何东西，我很困惑。

![在此处输入图像描述](../Images/3d9e195f2169e5a1e056cdc8afa79f00.png)

当我点击一个城市时，它会推送到下一个视图，从响应 JSON 发送城市的 id 和名称.. 没关系。但我想存储这些以便拨打相同的电话，但来自另一个`UITableView`（在它下面）所以它就像“搜索的最后一个城市”之类的东西。

我想保存 id、name，然后将其加载到仅显示名称的另一个 tableView 中。有了这个我很好，但我无法达到让库存发生。

代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

DetailTaxi *detailView = [[DetailTaxi alloc] initWithNibName:nil bundle:[NSBundle mainBundle]];

NSString *nomville = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"label"];
NSString *idVille = [[_jsonDict objectAtIndex:indexPath.row] objectForKey:@"id"];

detailView.title = nomville;
detailView.idVille = idVille;

NSLog(@"Valor: %@", nomville);
NSLog(@"Valor: %@", idVille);

AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *context = [appDelegate managedObjectContext];

NSString *insert = [[NSString alloc] initWithFormat:@"%@,%@",idVille,nomville];
NSManagedObject *newVille;

NSArray *insertVilles = [insert componentsSeparatedByString:@","];

for(NSString *insert in insertVilles) {
    newVille = [NSEntityDescription insertNewObjectForEntityForName:@"Ville" inManagedObjectContext:context];

    [newVille setValue:[insertVilles objectAtIndex:0] forKey:@"id"];
    [newVille setValue:[insertVilles objectAtIndex:1] forKey:@"nom"];
}

[self.navigationController pushViewController:detailView animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:30:40.603

只需添加一个 NSDate 类型的新属性，您在创建新条目时将其设置为当前日期。再次检索城市后，使用排序描述符按保存时间对城市进行排序，并使用获取限制。

如果需要删除以前的城市，日期属性也将证明是有用的。

# javascript - Jquery 鼠标事件不会触发

> ID：10897218
> 
> 赞同：0
> 
> 时间：2012-06-05T12:21:33.643
> 
> 标签：javascript, jquery, javascript-events

我有一个非常奇怪的问题。我的示例代码 [here][1] 运行良好，但我的 aptana 工作室编辑器中有完全相同的代码，当我在 Chrome 或 Eclipse 浏览器中尝试它时，事件不会触发。我无法想象有什么问题，因为它是完全相同的代码......

***HTML***

```
<!DOCTYPE html>
<html>
    <head>
        <title>OrderScreen</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="js/script.js" type="text/javascript"></script>
    </head>
    <body>
                <a href="">Test</a>
    </body>
</html> 
```

***jQuery***

```
$("a").mouseup(function() {
    clearTimeout(pressTimer);
    // Clear timeout
    return false;
}).mousedown(function() {
    // Set timeout
    pressTimer = window.setTimeout(function() {
        alert("hcbdhaf")
    }, 1000);
    return false;
}).click(function() {
    alert("dfsdg");
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:25:03.813

如果您的代码确实像引用的那样，问题是当您尝试将事件处理程序挂钩到它们时元素不存在。jsFiddle 的默认设置对你隐藏了这个问题。（看左边，你会看到你的代码在`load`事件触发之前不会运行——这在页面加载过程中非常非常晚。）

要修复它，要么：

1.  将您的脚本标签移动到文档的末尾，就在结束`</body>`标签之前或之后。当浏览器运行您的脚本时，这些元素将存在。这是[YUI 团队的推荐，](http://developer.yahoo.com/performance/rules.html) Google 的 web 工程师[也很喜欢](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)。

2.  使用 jQuery 的[`ready`](http://api.jquery.com/ready)事件。

结合其中任何一个，您还可以考虑使用事件委托，而不是直接在元素上连接事件。您的`mouseup`和`mousedown`处理程序将分别附加到*每个* `a`元素。这是很多连接。如果所有这些`a`元素都在一个容器中（`body`或者更好的是，更接近的东西），您可以改为在该容器上挂钩事件（因为这些事件冒泡），然后检查事件是否起源于一个`a`元素。jQuery 支持事件委托，通过[`delegate`](http://api.jquery.com/delegate)（我喜欢它，因为它非常明确）和最近，您传递给[`on`](http://api.jquery.com/on).

# java - 如何使用java将图像保存在磁盘上的文件夹中

> ID：10897221
> 
> 赞同：1
> 
> 时间：2012-06-05T12:21:52.073
> 
> 标签：java, image, netbeans-7, javax.imageio

我想将图像保存在磁盘上，例如网络摄像头使用 java 捕获的 c:/images ..再次我想在 JForm 上显示该图像作为标签...这可以使用 java 和 netbeans 我是新来的吗在java中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:33:23.137

你可以保存图像

```
private static void save(String fileName, String ext) {

   File file = new File(fileName + "." + ext);
   BufferedImage image = toBufferedImage(file);
try {
   ImageIO.write(image, ext, file);  // ignore returned boolean
} catch(IOException e) {
 System.out.println("Write error for " + file.getPath() +
                               ": " + e.getMessage());
  }
 } 
```

并从磁盘读取图像并显示为标签

```
File file = new File("image.gif");
    image = ImageIO.read(file);
JFrame frame = new JFrame();
JLabel label = new JLabel(new ImageIcon(image));
frame.getContentPane().add(label, BorderLayout.CENTER);
frame.pack();
frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:28:51.667

您可以使用 BufferedImage 从硬盘加载图像：

```
BufferedImage img = null;
try {
    img = ImageIO.read(new File("strawberry.jpg"));
} catch (IOException e) {
} 
```

尝试此链接以获取更多信息。[在 Java 中读取/加载图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)

而这个用于保存图像。[写入/保存图像](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)

```
try {
    // retrieve image
    BufferedImage bi = getMyImage();
    File outputfile = new File("saved.png");
    ImageIO.write(bi, "png", outputfile);
} catch (IOException e) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-08T18:17:28.450

纯 Java，不需要第三方库：

```
 byte[] image = /*your image*/
  String filePath = /*destination file path*/

  File file = new File(filePath); 

        try (FileOutputStream fosFor = new FileOutputStream(file)) {
            fosFor.write(image);
        } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-22T19:21:21.100

```
 //Start Photo Upload with  No// 
    if (simpleLoanDto.getPic() != null && simpleLoanDto.getAdharNo() != null) {
        String ServerDirPath = globalVeriables.getAPath() + "\\";
        File ServerDir = new File(ServerDirPath);
        if (!ServerDir.exists()) {
            ServerDir.mkdirs();
        }
        // Giving File operation permission for LINUX//
        IOperation.setFileFolderPermission(ServerDirPath);
        MultipartFile originalPic = simpleLoanDto.getPic();
        byte[] ImageInByte = originalPic.getBytes();
        FileOutputStream fosFor = new FileOutputStream(
                new File(ServerDirPath + "\\" + simpleLoanDto.getAdharNo() + "_"+simpleLoanDto.getApplicantName()+"_.jpg"));
        fosFor.write(ImageInByte);
        fosFor.close();
    }
    //End  Photo Upload with  No// 
```

# java - 如何在网格（GXT 3）中创建一个复选框（我不想要整列）

> ID：10897223
> 
> 赞同：0
> 
> 时间：2012-06-05T12:22:02.060
> 
> 标签：java, gxt

我正在尝试在网格（GXT 3.0）中添加一个复选框（我不想要复选框列），同时从模型（VO/DTO）获取值，如果我得到空值，那么我想添加复选框而不是空值。

任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:21:36.913

您应该覆盖 DataReader [http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/data/shared/loader/class-use/DataReader.html](http://dev.sencha.com/deploy/gxt-3.0.0/javadoc/gxt/com/sencha/gxt/data/shared/loader/class-use/DataReader.html)

假设您有一个带有 CheckColumnConfig 的网格。

```
CheckColumnConfig checkColumnConfig = new CheckColumnConfig ("myProperty" + prop.getId(), "myProperty"
                + prop.getId(), 40); 
```

关联的 Loader 应如下所示：

```
RpcProxy<BeanModel> proxy = new RpcProxy<BeanModel>() {
        @Override
        protected void load(Object loadConfig, AsyncCallback<BeanModel> callback) {
            //call your rpc service
        }
    };
    final ListLoader<BaseListLoadResult<BeanModel>> loader = new BaseListLoader<BaseListLoadResult<BeanModel>>(
        proxy, new CustomGridBeanModelReader());
    loader.load(); 
```

现在只需在 DateReader 中实现一些逻辑：

```
public class CustomGridBeanModelReader implements DataReader<List<BeanModel>> {

/** The reader. */
private BeanModelReader reader = new BeanModelReader();

/**
 * Checks if is factory for each bean.
 * 
 * @return true, if is factory for each bean
 */
public boolean isFactoryForEachBean() {
    return reader.isFactoryForEachBean();
}

/* (non-Javadoc)
 * @see com.extjs.gxt.ui.client.data.DataReader#read(java.lang.Object, java.lang.Object)
 */
public List<BeanModel> read(Object loadConfig, Object data) {
    ListLoadResult<ModelData> models = reader.read(loadConfig, data);
    List<ModelData> modelsData = models.getData();
    Iterator<ModelData> itModels = modelsData.iterator();
    List<BeanModel> newModelsData = new ArrayList<BeanModel>();
    while (itModels.hasNext()) {
        BeanModel model = (BeanModel) itModels.next();
        Mybean myBean = model.getBean();
        //add some logic
        if ((myBean.getMyProperty() == null){
            model.set("myProperty" + myBean.getId(), true);
        }
        //add more logic
        //...
        newModelsData.add(model);
    }
    return newModelsData;
}

/**
 * Sets the factory for each bean.
 * 
 * @param factoryForEachBean the new factory for each bean
 */
public void setFactoryForEachBean(boolean factoryForEachBean) {
    reader.setFactoryForEachBean(factoryForEachBean);
} 
```

}

# cucumber - Jenkins 创建 HTML 报告但链接断开

> ID：10897226
> 
> 赞同：2
> 
> 时间：2012-06-05T12:22:25.210
> 
> 标签：cucumber, jenkins, jenkins-plugins

使用 Jenkins 时，它会自动生成一份色彩丰富的报告，其中包含您所有的测试结果。但是，我遇到的问题是访问该报告。

我的所有配置都设置为与所有其他节点相同。（我在 Jenkins 上使用主从配置，有 4 个从节点 VM 运行 Win 7 x64。）但是，当我打开第 5 组并打开 HTML 报告页面时，我收到以下错误。

![在此处输入图像描述](../Images/4eba0f09a6cd0552d5a71ee00439ffd6.png)

一如既往，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:44:44.063

虽然我为无法分享错误的任何细节（配置等）而道歉，但我能够解决我的问题。

如果您已为节点设置了所有内容，并且正在主服务器和从服务器之间来回复制文件（有一个插件允许您在构建之前将文件复制到工作区而不是使用 SCM），那么就没有 post-选中“保留过去的 HTML 报告”的“发布 HTML 报告”选项的构建操作。否则，您最终会遇到文件冲突，并且您将获得与我选择的相同的 404 状态代码。

# linux - 使用 Git 自动部署

> ID：10897229
> 
> 赞同：1
> 
> 时间：2012-06-05T12:22:28.983
> 
> 标签：linux, git, node.js, ubuntu

好的，我正在尝试使用 git 自动部署我的 node.js 应用程序。

这是我在我的服务器上的：

```
/home/git/myproj.git - bare repo
/home/me/public_html - cloned repo of the aforementioned bare repo 
```

现在的问题是，我无法从中提取，`myproj.git/hooks/post-receive`因为对 repo 的推送是作为 git 用户进行的，所以我有权限问题。我也尝试了一些部署脚本，但我一直面临很多权限问题。

我听说过 capistrano、fabric、gitolite 等工具，但我想这对我来说太复杂了，我想要更简单的东西（非常容易设置，并继续在多个项目中复制）。

我希望我说清楚了。我认为这个问题是相关的 -[使用 Gitolite 自动部署 PHP 脚本](https://stackoverflow.com/questions/10009279/auto-deployment-php-script-using-gitolite)- 但我没有使用 gitolite，他的回答对我来说没有意义（可能是因为他的英语不太好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:46:28.320

我自己开始使用 git 和 post-recieve 钩子，但我并不喜欢它们。然后我切换到一个非常简单的 bash[脚本](https://github.com/visionmedia/deploy)。即使您不使用该脚本，它总共也只有 200 行，因此从中窃取一些片段非常好。

# javascript - 使用 Sammy.js 取消路由而不影响历史

> ID：10897230
> 
> 赞同：9
> 
> 时间：2012-06-05T12:22:35.440
> 
> 标签：javascript, url-routing, sammy.js, single-page-application, toastr

我想拦截 Sammy 的所有路由更改，以首先检查是否有待处理的操作。我已使用`sammy.before`API 完成此操作，并返回 false 以取消路由。这使用户保持在“页面”上，但仍会更改浏览器地址栏中的哈希并将路由添加到浏览器的历史记录中。如果我取消路线，我不希望它出现在地址栏或历史记录中，而是希望地址保持不变。

目前，为了解决这个问题，我可以调用 window.history.back (yuk) 以返回历史记录中的原始位置，或者调用 sammy.redirect。两者都不理想。

有没有办法让 sammy 真正取消路线，使其停留在当前路线/页面上，保持地址栏不变，并且不添加到历史记录中？

如果没有，是否有另一个路由库可以做到这一点？

```
sammy.before(/.*/, function () {
    // Can cancel the route if this returns false
    var response = routeMediator.canLeave();

if (!isRedirecting && !response.val) {
    isRedirecting = true;
    // Keep hash url the same in address bar
    window.history.back();
    //this.redirect('#/SpecificPreviousPage'); 
}
else {
    isRedirecting = false;
}
return response.val;
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-21T14:21:38.837

万一其他人碰到这个，这就是我结束的地方。我决定使用`context.setLocation`sammy 的特性来处理重置路线。

```
sammy.before(/.*/, function () {
    // Can cancel the route if this returns false
    var
        context = this,
        response = routeMediator.canLeave();

    if (!isRedirecting && !response.val) {
        isRedirecting = true;
        toastr.warning(response.message); // toastr displays the message
        // Keep hash url the same in address bar
        context.app.setLocation(currentHash);
    }
    else {
        isRedirecting = false;
        currentHash = context.app.getLocation();
    }
    return response.val;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:37:47.337

使用问题和答案中提供的代码时，您必须注意，您取消的路由也将被阻止以供将来所有调用， routeMediator.canLeave 将不会再次评估。调用路由两次并根据当前状态取消它是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T10:04:29.857

我可以产生与 John Papa 在 SPA/Knockout 课程中使用 SammyJS 时相同的结果。

我使用 Crossroads JS 作为路由器，它依赖于 Hasher JS 来监听浏览器“发出”的 URL 变化。

代码示例是：

```
hasher.changed.add(function(hash, oldHash) {
    if (pageViewModel.isDirty()){
        console.log('trying to leave from ' + oldHash + ' to ' + hash);

        hasher.changed.active = false;
        hasher.setHash(oldHash);
        hasher.changed.active = true;

        alert('cannot leave. dirty.');
    }
    else {
        crossroads.parse(hash);
        console.log('hash changed from ' + oldHash + ' to ' + hash);
        }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T23:08:30.900

在重新访问一个较旧的项目并遇到类似情况后，我想分享另一种方法，以防万一其他人被引导到这里。

所需要的本质上是一种现代的“身份验证”模式，用于拦截页面并根据凭据进行重定向。

`Sammy.around(callback)`在这里定义 的使用效果很好： [Sammy.js docs: Sammy.Application around(callback)](http://www.sammyjs.org/docs/api/0.7.4/all#Sammy.Application-around)

然后，只需执行以下操作...

```
(function ($) {
    var app = Sammy("body");

    app.around(checkLoggedIn);

    function canAccess(hash) {
        /* access logic goes here */
        return true;
    }

    // Authentication Guard
    function authGuard(callback) {
        var context = this;
        var currentHash = app.getLocation();
        if (!canAccess(currentHash)) {
            // redirect
            context.redirect("#/login");
        }
        else {
            // execute the route path
            callback();
        }
    };

})(jQuery); 
```

# oracle - 在外部表中有动态列

> ID：10897232
> 
> 赞同：0
> 
> 时间：2012-06-05T12:22:43.707
> 
> 标签：oracle, oracle11g

我的要求是我必须在存储过程中为具有不同列的不同文本文件使用单个外部表。

我可以在 Oracle 11g 的外部表中使用动态列吗？像这样：

```
create table ext_table  as select * from TBL_test              
                organization external (
                type  oracle_loader
                default directory  DATALOAD
                access parameters(                
                records delimited  by newline
                fields  terminated by '#'
                missing field values are null
                )
                location ('APD.txt')
              )
              reject limit unlimited; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:31:37.220

为外部表定义的列集，就像为常规表定义的列集一样，在定义外部表时必须是已知的。您不能在运行时选择确定该表今天有 30 列，明天有 35 列。您还可以潜在地将外部表定义为具有任何平面文件将具有的最大列数，一般地命名列（即`col1`通过`col50`），然后移动确定外部表的列 N 的复杂性实际上是ETL 代码的特定字段。但是，这并不明显为什么这比正确创建外部表定义更有用。

为什么要求您使用单个外部表定义来加载许多不同格式的文件？这似乎不合理。

您可以在运行时删除并重新创建外部表定义吗？或者这是否违反了对单个外部表定义的要求？

# php - 如何在 TCPDF 中设置不同的字体

> ID：10897235
> 
> 赞同：8
> 
> 时间：2012-06-05T12:22:53.253
> 
> 标签：php, tcpdf

我正在寻找一种解决方案，为使用 tcpdf 创建的 PDF 文档设置不止一种字体。

我想做这样的事情：

```
$pdf->SetFont('verdana_bold', 'B', 12);
$pdf->SetFont('verdana', '', 12); 
```

我的文档需要粗体字体和常规字体。上面的例子不起作用。当我切换两行时，文本都是粗体的。当我使用上面的示例时，文本只是常规的。

我想`font-weight`用常规的 CSS 样式表设置。

希望你有解决办法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T13:21:26.603

您可以像这样在 html 中使用自定义字体：

```
$fontname=$pdf->addTTFfont('path/myfont.ttf', '', '', 32);
//echo $fontname;

$html='<span style="font-family:'.$fontname'.;font-weight:bold">my text in bold</span>: my normal text';
$pdf->writeHTMLCell($w=0,$h=0,$x=11,$y=201,$html,$border=0,$ln=0,$fill=false,$reseth=true,$align='L',$autopadding=false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:14:31.463

将 Verdana 转换为 TCPDF 使用：

```
$fontname = $pdf->addTTFfont('/path-to-font/verdana.ttf', 'TrueTypeUnicode', '', 32); 
```

*   确保字体文件夹是可写的
*   您是否将路径 K_PATH_FONTS 常量设置为 config/tcpdf_config.php 中的字体？
*   [通过 TCPDF 字体](https://tcpdf.org/docs/fonts/)阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-23T15:40:41.407

下面的行将在您的字体文件夹中生成 3 个文件

rotisserifi56.php, rotisserifi56.ctg, rotisserifi56.rar

使用它来生成文件

```
$fontname = $this->pdf->addTTFfont('fonts/Rotis Serif Italic 56.ttf', 'TrueTypeUnicode', '', 32);

// use the font
$this->pdf->SetFont($fontname, '', 14, '', false); 
```

现在，使用这样的字体：

```
$this->pdf->AddFont('rotisserifi56', '', 'rotisserifi56.php');
$this->pdf->SetFont('rotisserifi56'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-22T23:23:18.933

我知道这个问题已经很老了，但我遇到了同样的问题并修复了它。

你可以做但不应该做的是：

```
$pdf->SetFont('verdana_bold', 'B', 12);
$pdf->SetFont('verdana', '', 12); 
```

您在这里基本上要做的是定义 2 种字体。一个名称为 verdana，另一个名称为 verdana_bold。当您将 B 指定为粗体时，它找不到此 ttf。因为 TCPDF 基本上会检查字体目录中名为 verdana_boldb.ttf 的文件。这不存在，所以它需要 verdana_bold.ttf （乍一看似乎是正确的行为）。

对我来说，在我尝试在表格中同时使用粗体和非粗体样式后，这个问题变得很明显，我要么只将整个表格设为粗体，要么将整个表格设为非粗体（删除或添加 B 样式说明符不会做出改变）。

你应该做什么：

添加新的字体类型：

```
$fontname = TCPDF_FONTS::addTTFfont($fontfile, 'TrueType', '', 32); 
```

当你想使用字体时：

```
$pdf->SetFont('verdana', '', 10, '', false); 
```

当您希望在 HTML 单元格中以粗体显示项目时，请使用 html b 标签：

```
<b>myvalue</b> 
```

如果您有 verdanab.ttf 文件，您可以检查字体目录。

```
$ ls fonts/verdanab.
verdanab.ctg.z  verdanab.php    verdanab.z 
```

我希望这对其他人有帮助:)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-11T10:19:56.820

我刚刚解决了我的问题。问题是，字体必须以正确的方式命名。verdana_bold 是错误的 - 它必须是 verdanab。然后我只需要注册 verdana 字体和 tcpdf 自动获取该字体的粗体版本的 verdanab.ttf。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-11T04:51:29.353

包括自定义字体的步骤：

1.  您可以从 c://windows/fonts 目录中找到所需的自定义字体的 .ttf 文件。
2.  将该文件复制到位于 tcpdf/fonts 的字体文件夹中
3.  利用`$pdf->addTTFfont('C://wamp/www/projectname/...path to .ttf file', 'TrueTypeUnicode', '', 32);`
4.  `$pdf->SetFont('custom_font_name');`

您的自定义字体已准备好使用。

# python - Python中的虚拟括号

> ID：10897239
> 
> 赞同：6
> 
> 时间：2012-06-05T12:23:17.943
> 
> 标签：python, linux

（警告：潜在的火焰战争启动器。但这不是我的目标，这里的重点不是讨论 Python 的设计选择，而是要知道如何充分利用它）。

是否有一个程序、脚本、方法（理想情况下基于 Unix）来显示 Python 中代码块周围的“虚拟”括号，并将它们保持在原处，以便即使缩进被破坏，代码仍然可以执行？

我意识到 Python 只使用缩进来定义代码块，并且最终的程序可能不包含括号。

但是，我发现您的程序可能因为不幸且未被检测到的回车而停止运行，这很烦人。

所以，理想情况下，我会在文本编辑器（kate，gedit ...）中寻找一个插件，它将：

*   在我的 Python 程序中的代码块周围显示虚拟括号
*   将它们固定在适当的位置
*   动态生成“正确”的 Python 代码，缩进对应于括号所属的位置。

（请不要进行火焰战争！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:36:19.377

我使用了一个执行代码汇总并理解 Python 语法的编辑器，然后我查找了位于意外位置的汇总。我不记得凯特有没有那样做。存在问题并不明显，但它使您在查找问题时更容易。

# fonts - Mac firefox 上的字体渲染不同

> ID：10897244
> 
> 赞同：0
> 
> 时间：2012-06-05T12:23:36.083
> 
> 标签：fonts, font-face, truetype, text-rendering, webpage-rendering

您好我正在尝试使用自定义字体开发网站。

然而，Firefox 渲染自定义字体与 Chrome 有很大不同（Chrome 在我眼中“正确”渲染它）有人知道让世界各地的 Firefox 像 Chrome 一样渲染字体吗？

字体是：

> > reddit 目录 » 本地

在顶部栏中：

[http://redditdirectory.com/54/Local](http://redditdirectory.com/54/Local)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:49:57.523

想通了：必须使用 da CSS专门将 font-weight 设置为**100** ，也就是**更薄**

# delphi - 在 TadvMemo 中选择列

> ID：10897245
> 
> 赞同：3
> 
> 时间：2012-06-05T12:23:43.073
> 
> 标签：delphi, tms

是否可以在 TadvMemo 组件中选择列文本区域？就像在 Delphi IDE 中按住鼠标左键和 ALT 键选择文本一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:45:30.673

`SelectionMode`您可以通过将属性设置为 来切换到块选择模式`smBlock`。

```
AdvMemo1.SelectionMode := smBlock; 
```

# php - 使用 PHP 通过安全连接导出 XLS 时出错

> ID：10897247
> 
> 赞同：0
> 
> 时间：2012-06-05T12:23:54.257
> 
> 标签：php, mysql, https, xls

我正在开发一个需要生成 XLS 文件的 PHP MYSQL 系统，该系统在正常的 http 连接上工作正常，但是在尝试通过 https 连接使用 PHP 导出 XLS 文件时，该文件未生成。

通过安全连接生成 XLS 文件时是否应使用特定技术？

谢谢

# android - 我的下载视频代码在 android 4.0 中不起作用

> ID：10897255
> 
> 赞同：1
> 
> 时间：2012-06-05T12:24:30.870
> 
> 标签：android

我已经完成了应用程序的视频文件下载代码及其最高版本 2.3.3 的工作性能，但它在 android 4.0 中无法正常工作，并且出现类似 java.io.FileNotFoundException 的错误任何人都可以帮我解决这个问题问题？提前致谢

```
public void video_download(String urlstring, String Name) {

    URL url;
    try {
        url = new URL(urlstring);
        HttpURLConnection c = (HttpURLConnection) url.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

        String PATH = Environment.getExternalStorageDirectory()
                + "/application/";
        Log.v("PATH", "PATH: " + PATH);
        File file = new File(PATH);
        file.mkdirs();
        String fileName;
        fileName = Name + ".mp4";

        File outputFile = new File(file, fileName);
        FileOutputStream fos = new FileOutputStream(outputFile);

        InputStream is = c.getInputStream();

        byte[] buffer = new byte[1024];
        int len1 = 0;
        while ((len1 = is.read(buffer)) != -1) {
            fos.write(buffer, 0, len1);
        }
        fos.close();
        is.close();
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

# mongodb - mongodb：非性能索引

> ID：10897259
> 
> 赞同：1
> 
> 时间：2012-06-05T12:24:37.560
> 
> 标签：mongodb, indexing, mongodb-indexes

玩过之后

*db.largecollection.find( { $or : [ { identifierX : "sha1_hash123" } , { identifierY : "md5_hash456" } , { identifierZ : "another_hash789" } ] } )*

我检查了 mongodb 自动准备的索引。除了标识符 x/y/z 的“单个”ensureIndex 之外，现在还有一个标识符 X_1_identifierY_1_identifierZ_1 并且性能下降:-(

您是否有想法或提示如何向 mongodb 解释使用单个标识符的索引更快，因为我没有 $and，但是 $or 查询？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:42:42.813

MongoDB 不会自行创建索引。这是应用程序、用户或框架所做的事情。对于您的查询，MongoDB 只能使用 identifierX、identifierY 或 identifierZ 的索引。但是，如果您没有这样的索引，那么当然不会使用任何索引。该`identifierX_1_identifierY_1_identifierZ_1`索引不能用于此查询。

在这种情况下，您可能需要为所有这些标识符创建一个索引：

```
db.ensureIndex( { 'identifierX' : 1 } );
db.ensureIndex( { 'identifierY' : 1 } );
db.ensureIndex( { 'identifierZ' : 1 } ); 
```

MongoDB 一次只能使用一个索引，它会尝试选择“最好的”一个。尝试使用`explain`来查看正在选择哪个索引：

```
db.largecollection.find( { $or : [
    { identifierX : "sha1_hash123" },
    { identifierY : "md5_hash456" },
    { identifierZ : "another_hash789" }
] } ).explain(); 
```

这应该会给你一些关于正在使用哪个索引的想法。

There is an exception for `$or` though, where MongoDB can use a different index for each of the parts and de-dup for you. It's here in the [docs](http://www.mongodb.org/display/DOCS/Indexing+Advice+and+FAQ#IndexingAdviceandFAQ-Oneindexperquery.). It would (of course) still not use the compound index, and you need the indexes that I've written here above.

# android - 更新数据库

> ID：10897260
> 
> 赞同：0
> 
> 时间：2012-06-05T12:24:39.777
> 
> 标签：android, database

欢迎。
数据库以这种方式更新：

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (newVersion > oldVersion) {
        Log.e("TAG", "New database version exists for upgrade.");

        try {
            Log.e("TAG", "Copying database...");
            copyDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

问题是我在数据库中有一张统计表，我想把这张表中的数据顺序复制到新的数据库中。

我如何能？问一个例子。

对我糟糕的英语表示问候和抱歉。

* * *

我试图这样做：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (newVersion > oldVersion) {
        Log.e("TAG", "New database version exists for upgrade.");

        db.beginTransaction();
        try {
            Log.e("TAG", "Copying database...");
            this.getReadableDatabase();
            ArrayList<Statystyka> statystyki = getAllStatistic();
            copyDataBase();
            for (int i = 0; statystyki.size() >= i; i++) {
                addStat(statystyki.get(i).getId_pytania(),
                        statystyki.get(i).getIlosc_rozwiazan(), statystyki
                                .get(i).getIlosc_poprawnych(), statystyki
                                .get(i).getIlosc_blednych());
            }
            db.setTransactionSuccessful();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        db.endTransaction();
    }

} 
```

但我得到了错误：

java.lang.IllegalStateException：递归调用 getReadableDatabase

如何打开数据库来加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:37:57.193

升级数据库后，旧表仍然存在，您只需更改为新的架构版本。请参阅[此文档](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#onUpgrade%28android.database.sqlite.SQLiteDatabase,%20int,%20int%29)。

例如::
说你必须在你的表中添加一个新列::

```
String alter_table_command=" ALTER TABLE " + TABLE_NAME + " ADD COLUMN " + NEW_COLUMN + " TEXT; ";
db.execSQL( alter_table_command ); 
```

[在此处](http://sqlite.org/lang_altertable.html)阅读有关 ALTER TABLE的信息。

注意：：如果您想从另一个数据库复制表，请使用上面@vipul 建议的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T23:43:02.483

onUpgrade 不会创建新数据库。它只是让您有机会创建新的列或表，或者以某种方式更新数据库中的数据以使其与新版本兼容。

因此，您不需要将任何数据复制到新数据库中。

# nsis - Exec 在 NSIS 安装程序中不起作用

> ID：10897271
> 
> 赞同：3
> 
> 时间：2012-06-05T12:25:34.563
> 
> 标签：nsis

我是 NSIS 的新手，我正在尝试在安装时执行可执行文件，类似于预请求。我尝试了下面的代码，它将 exe 复制到安装路径，但它没有执行它。

```
Section "example" example
  SetOutPath "$INSTDIR"
  File "setup.exe"
  Exec "$INSTDIR\setup.exe"
  BringToFront
SectionEnd 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T15:27:05.693

The answer from Seki is mostly correct, I'd just like to add that the correct syntax for Exec/ExecWait is **always** `Exec '"c:\path\app.exe" param1 "par am2" param3'`

Parameters are of course optional but the path to the app should always be quoted, not just because in your case where $INSTDIR could contain spaces but at least on Win9x it will fail no matter what if you don't quote (According to the NSIS manual)

If the spaces/lack of quotes is not the issue then there are a couple of other things you might want to look into:

*   $OUTDIR is the working directory for the new process (SetOutPath sets this)
*   Missing dll's etc (Check with [Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:05:19.293

变量是否`$INSTDIR`映射到名称包含空格的目录？如果是这样，您应该添加简单引号以将双引号包含到`Exec`参数中：

```
Exec '"$INSTDIR\setup.exe"' 
```

# php - 加载数据文件默认值不插入表中

> ID：10897277
> 
> 赞同：2
> 
> 时间：2012-06-05T12:26:05.047
> 
> 标签：php, mysql

我正在使用 LOAD DATAINFILE 导入 csv 文件

csv 列是名称、类型、状态

我的表结构是

```
名称：varchar
类型 : Varchar
状态：Tiny int 默认值 1

```

我使用这个 stmt ：

```
LOAD DATA INFILE '/var/www/names.csv' 
INTO TABLE users FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' IGNORE 1 LINES 
```

当我使用上面的语句时，它必须为每一行插入状态值 1，但它没有插入相同的值。请指教。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T12:52:50.977

加载文件时，MySQL 期望它具有与目标表相同的列数，除非您另外指定，即使缺少的列具有默认值。因此，为您的语句提供一个列列表`LOAD`，并为 的值提供文字 1 `STATUS`：

```
LOAD DATA INFILE '/var/www/names.csv' 
INTO TABLE users 
  FIELDS TERMINATED BY ',' 
  ENCLOSED BY '"' 
  LINES TERMINATED BY '\n' 
  IGNORE 1 LINES 
  (`name`, `type`, 1) 
```

你也可以用一个`SET`子句来做到这一点：

```
LOAD DATA INFILE '/var/www/names.csv' 
INTO TABLE users 
  FIELDS TERMINATED BY ',' 
  ENCLOSED BY '"' 
  LINES TERMINATED BY '\n' 
  IGNORE 1 LINES 
  (`name`, `type`)
  SET `status` = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:49:52.390

执行查询后，使用以下命令检查任何警告

```
show warnings 
```

数字数据类型的默认值为 0，字符串的默认值为 ''。

所以你应该在创建表时设置默认值 1

```
create table tableName
(
name nvarchar(100) not null,
type nvarchar(100) not null,
status smallint default 1
); 
```

# javascript - 带有 AJAX 的 HTML/Javascript 搜索功能

> ID：10897278
> 
> 赞同：1
> 
> 时间：2012-06-05T12:26:15.327
> 
> 标签：javascript, html, ajax, search, html-table

我创建了一个网页，我希望用户能够搜索存储在 CSV 文件中的单词/术语，如果找到该术语，则该行条目的整行将返回并显示给用户（理想情况下在表格格式，否则使用文本区域）。

但是我需要使用 AJAX 来做到这一点，而且我也不能使用 PHP（不幸的是，否则我不会问这个问题）。

到目前为止，我有一个表格/输入/按钮的表格，我也有读取文件的代码，但我有点坚持将两者结合在一起。我知道这应该是一件容易的事，但我花了很多时间浏览教程和在线问题，但找不到类似的东西。

如果有人知道任何涵盖此内容的教程，或者可以帮助提供下面的代码，将不胜感激。

```
 <table>        
     <tr><td>Enter Search Term:
     <input type="text" name="searchword" />
     <input type="button" name="searchbutton" value="Search" onclick="contentDisp();">
     </td></tr>
     <tr><td><textarea id="contentArea" rows="40" cols="60"></textarea></td></tr>
    </table>  //currently using text area but ideally this would be displayed in a table

    <script type="text/javascript">
    function contentDisp()
        {
            $.ajax({
                url : "file.csv",
                success : function (data) {
                    $("#contentArea").html(data); // I THINK SOMETHING NEEDS TO GO IN HERE, WHICH WILL GRAB THE SEARCH TERM ABOVE AND THEN ONLY DISPLAY FILE CONTENTS USING THAT TERM, POSSIBLY 'CONTAIN' */
                }
            });
        }  
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:13:34.397

HTML

```
<input type="text" id="text" />
<input type="submit" id="btnsubmit" /> 
```

脚本

```
$(function(){
$('#btnsubmit').on('click', function(){
    var csv = $.ajax('text.csv');
    csv.done(function(data){
        var str = data.split(',');
        var value = $('#text').val();
        $.each(str, function(index, item){
            if(item.match(value)){
                console.log(item) //Output
            };
        })
    })  
})
}); 
```

CSV

```
Presidency ,President ,Wikipedia Entry,Took office ,Left office ,Party ,Portrait,Thumbnail,Home State 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:45:52.140

可以使用一些 strpos 和 indexOf 函数通过 JavaScript 严格执行此操作（indexOf 是起点，而另一个将查找字符串分隔符）。

如果您对它感到满意，也可以使用 php 完成任务，如果您受到域来源限制的限制，请查看 JSONP，它代表 JSON with Padding - 这基本上意味着您需要将结果包装在 JavaScript 函数中。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:47:13.483

用户正则表达式来查找您的字符串并解析 CSV 数据中找到的行。

[http://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:18:02.797

当 javascript 已经有用于匹配字符串的内置函数时，为什么还要使用 strpos 和 indexOf？

[http://jsfiddle.net/AWZg8/](http://jsfiddle.net/AWZg8/)

# extjs - 如何在重新加载期间禁用 ExtJs 验证错误？

> ID：10897279
> 
> 赞同：1
> 
> 时间：2012-06-05T12:26:16.083
> 
> 标签：extjs

我有一个必需的依赖组合框。当父组合框值被选中时，从属组合被清除并重新加载存储。如何在重新加载期间不显示 ExtJs 验证错误？

```
 new Ext.form.ComboBox({
                id: 'ddlMake',
                store: makeStore,
                displayField: 'Description',
                valueField: 'TypeCode',
                width: 110,
                typeAhead: true,
                mode: 'local',
                forceSelection: true,
                triggerAction: 'all',
                emptyText: 'Select a make',
                selectOnFocus: true,
                allowBlank: false,
                listeners:
                    {
                        select: function (combo, record, index) {
                            var selVal = Ext.getCmp('ddlMake').getValue();
                            var modelCombo = Ext.getCmp('ddlModel');
                            modelCombo.setValue('');
                            modelCombo.store.reload({
                                params: { categoryTypeCode: 'MODEL', subCategoryTypeCode: selVal }
                            });
                        }
                    }
            }),
            new Ext.form.ComboBox({
                id: 'ddlModel',
                store: modelStore,
                displayField: 'Description',
                valueField: 'TypeCode',
                width: 110,
                typeAhead: true,
                mode: 'local',
                forceSelection: true,
                triggerAction: 'all',
                emptyText: 'Select a model',
                selectOnFocus: true,
                allowBlank: false
            }), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:39:46.193

Reset() 方法将清除所有验证消息。这是我最终使用的：

```
function LoadModelCombo(combo, record, index) {
    var selVal = Ext.getCmp('ddlMake').getValue();

    if (selVal != '') {
        var modelCombo = Ext.getCmp('ddlModel');
        modelCombo.setValue('');
        modelCombo.store.reload({
            params: { categoryTypeCode: 'MODEL', subCategoryTypeCode: selVal }
        });
        modelCombo.reset();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:47:05.387

我没有确切的代码，但有一些方法可以让其他听众保持沉默 - 有关 stopEvent 和 stopPropogation，请参阅文档。

# testng - TestNG：如何使用 DataProvider 提供的数据按顺序执行多个测试方法

> ID：10897280
> 
> 赞同：0
> 
> 时间：2012-06-05T12:26:17.667
> 
> 标签：testng, dataprovider

有没有办法使用来自数据提供者的不同数据来执行多个测试方法？

例如

```
@DataProvider(name = "test1")
public Object[][] createData1() {
    return new Object[][] {
        { "Cedric", new Integer(36) },
        { "Anne", new Integer(37)}, 
    };
}

@Test(dataProvider = "test1")
public void verifyData1(String n1, Integer n2) {
    System.out.println(n1 + " " + n2);
}

@Test
public void verifyData2() {
    System.out.println("Verify2");
} 
```

运行它的输出将是
Cedric 36
Verify2
Anne 37
Verify2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:41:53.213

为什么不在该类中使用多个数据提供者？

```
@DataProvider(name = "test1")
public Object[][] createData1() {
    return new Object[][] {
        { "Cedric", new Integer(36) },
        { "Anne", new Integer(37)}, 
    };
}

@DataProvider(name = "test2")
public Object[][] createData2() {
    return new Object[][] {
        { "Amir", new Integer(42) },
        { "Alice", new Integer(39)}, 
    };
}

@Test(dataProvider = "test1")
public void verifyData1(String n1, Integer n2) {
    System.out.println(n1 + " " + n2);
}

@Test(dataProvider = "test2")
public void verifyData2(String n1, Integer n2) {
    System.out.println(n1 + " " + n2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T20:23:16.200

这是一种方法：使用注释来指定哪个方法应该接收哪些数据：

```
public class A {

  @DataProvider
  public Object[][] dp(Method m) {
    if (m.getAnnotation(Different.class) != null) {
      return new Object[][] {
          new Object[] { "different-a", "different-b" },
          new Object[] { "different-c", "different-d" },
        };
      } else {
        return new Object[][] {
            new Object[] { "c", "d" },
            new Object[] { "a", "b" },
        };
      }
    }

  @Test(dataProvider = "dp")
  public void test1(String a, String b) {
    System.out.println("test1: " + a + " " + b);
  }

  @Different
  @Test(dataProvider = "dp")
  public void test2(String a, String b) {
    System.out.println("test2: " + a + " " + b);
  }
} 
```

注释：

```
@Retention(java.lang.annotation.RetentionPolicy.RUNTIME)
@Target({METHOD})
public @interface Different {} 
```

输出：

```
test1: c d
test1: a b
test2: different-a different-b
test2: different-c different-d 
```

# unix - awk 不能重新创建它删除的文件？

> ID：10897281
> 
> 赞同：4
> 
> 时间：2012-06-05T12:26:17.823
> 
> 标签：unix, awk

```
echo bla | awk 'BEGIN{fname="foo.txt"} {print $0 >>fname; print "rm -f " fname | "/usr/bin/ksh"; close("/usr/bin/ksh"); print $0 >>fname}' 
```

执行此命令后，我应该得到一个文件“foo.txt”，对吧？

它不起作用。我尝试使用 system("/usr/bin/rm -f " fname) 删除文件，bash 而不是 ksh，Linux，HP-UX，Cygwin，fflush("")，... 只是不起作用！似乎在删除文件后，Awk 就无法再写入同名文件了。

看起来像 Awk 中的错误，或者我错过了什么（大时代！）？！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:48:20.083

awk 保持文件打开。尝试关闭它：

```
echo bla | awk 'BEGIN{fname="foo.txt"} 
{
    print $0 >>fname 
    print "rm -f " fname | "/usr/bin/ksh"
    close("/usr/bin/ksh")
    close( fname ) 
    print $0 >>fname
}' 
```

awk 在您第一次写入文件时打开该文件，并保持该文件打开。当从文件系统中删除链接时，awk 仍然打开文件，因此它不使用“foo.txt”名称来访问它。通过关闭文件，您强制 awk 再次查看文件系统并创建现在不存在的链接“foo.txt”。

对于不了解链接和文件之间区别的读者，请尝试以下操作：

```
$ rm -rf /tmp/foo; mkdir /tmp/foo; cd /tmp/foo  # start with a clean directory
$ touch foo.txt; ln foo.txt bar.txt             # Create a file with two links
$ # run original awk script (without closing the file)
$ cat bar.txt 
```

您将在 bar.txt 中看到两次“bla”行。原因是`bar.txt`和`foo.txt`都是指向同一个文件的链接。 `awk`打开该文件并向其中写入一行，然后删除链接`foo.txt`，然后将另一行写入该文件。`awk`终止时，链接已`foo.txt`被删除，但文件仍然存在并可通过链接访问`bar.txt`。如果`bar.txt`被删除，则文件系统会注意到文件的链接计数已降至零，并且文件将被删除。

# javascript - 使用jQuery获取数组中具有属性最大值的元素

> ID：10897282
> 
> 赞同：7
> 
> 时间：2012-06-05T12:26:19.717
> 
> 标签：javascript, jquery, arrays, minmax

我有一个自定义 JavaScript 对象的数组，它有一个名为`order`. 我有一个这个对象的数组，我想获得具有最高“顺序”的项目。

由于我对 jQuery 比较陌生，并且来自 C# 背景，这是我非常欣赏 LINQ 的实例之一 :)

无论如何，长话短说，我已经检查了以下链接，但它们只返回值，而不是数组元素本身的引用......所以在改变它以返回元素方面提供一点帮助将不胜感激。

[来自元素数组的 jQuery 最小/最大属性](https://stackoverflow.com/questions/5052673/jquery-min-max-property-from-array-of-elements)

[一组元素中具有最大高度的元素](https://stackoverflow.com/questions/6060992/element-with-the-max-height-from-a-set-of-elements)

有问题的自定义对象（我有一个数组）如下：

```
var severity = function (key, value, order) {
    this.key = key;
    this.value = value;
    this.order = order;
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T12:31:20.337

也许我误会了你……但你正在寻找吗？

```
function getHighest(array) {
    var max = {};
    for (var i = 0; i < array.length; i++) {
        if (array[i].order > (max.order || 0))
            max = array[i];
    }
    return max;
}

// var array = [object, object, object ...];
var highest = getHighest(array); 
```

**演示：http:** [//jsfiddle.net/c6gfj/](http://jsfiddle.net/c6gfj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-23T16:51:33.063

```
array[array.map((o)=>o.order).indexOf(Math.max(...array.map((o)=>o.order)))] 
```

# 演示：

```
let array=[{order:3},{order:5},{order:2},{order:2}];

console.log(
  array[array.map((o)=>o.order).indexOf(Math.max(...array.map((o)=>o.order)))]
)
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:55:00.883

Sort array and pop the last object in array

```
function sortObj(a, b){
     return a.order < b.order ? 0 : 1;
}
obj.sort(sortObj)   
var highest =obj.pop(); 
```

DEMO: [http://jsfiddle.net/VaYNb/](http://jsfiddle.net/VaYNb/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:02:50.693

使用 yourarray.sort()。它将按升序到降序排序。它也适用于二维数组。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-05T12:31:07.620

尝试这个：

```
function getHighest(array, value){
  return array.sort(function(a,b){ b[value] - a[value] })[0];
} 
```

# visual-studio-2010 - Entity Framework 4 无法识别我的数据库中的引用完整性

> ID：10897287
> 
> 赞同：0
> 
> 时间：2012-06-05T12:26:32.067
> 
> 标签：visual-studio-2010, entity-framework, sql-server-2005, entity-framework-4

为了测试在我们现有的 Web 应用程序中用 Entity Framework 4 替换我们的内部数据访问层的选项，我开始了一个新项目并添加了一个 ADO.NET 实体数据模型，然后让它从现有数据库中生成。

它识别我数据库中的表，但不显示这些表之间的任何关系，它们完全相互分离。数据库是否有任何先决条件，以便可以使用数据库优先方法？

DBMS 是 SQL Server 2005，PK 和 FK 是在数据库中定义的。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:41:34.213

外键约束是存储模型的一部分。您可以使用模型浏览器窗口来查看约束。此窗口可能仅适用于 Visual Studio 的 Service Pack 1。 ![在此处输入图像描述](../Images/1f6548b141f88f6c2ae75265caa4c965.png)

实体框架使用内存模型和概念模型。这些存储在一个。edmx 文件。它是一个通用的 XML 文件，可以使用任何文本编辑器进行编辑。外键约束出现在元素中，例如

```
<Association Name="FK_X_Y_NNNN">; ... </Association> 
```

在模型编辑器中，外键引用由实体之间的线表示。在行的末尾标明了基数。

如果您没有看到外键约束，那么数据库可能没有定义它们。请检查您的数据库。

![在此处输入图像描述](../Images/e262cea11b994c5a5122a43cf17e0c0f.png)

# uiscrollview - 滚动视图上带有动画的 CALayer

> ID：10897291
> 
> 赞同：0
> 
> 时间：2012-06-05T12:26:41.030
> 
> 标签：uiscrollview, calayer

所以，我有一个 CALayer 添加到 UIScrollView 中，它执行一些路径动画。在我的应用程序中，我调整滚动视图的大小并移动所有内容以创建“负”区域。将 contentOffset 与 UIScroll 视图一起使用，我的所有子视图都会移动，并且没有闪烁效果。但是，当 CALayer 上的线条移动时，会出现闪烁效果，因为它们是先在“负”区域绘制，然后再移过来。

这最初是作为动画发生的，但我使用 CATransaction -begin 和 -commit 来删除动画。但闪烁仍在发生，因为线条仍被绘制然后移动。

有什么办法解决吗？提前致谢。

编辑：我想出了解决这个问题的方法。之前，我将每个动画添加到动画层，然后将其添加到 UISCrollView。相反，我将每个动画直接添加到 UISCrollView，然后像以前一样适当地移动所有图层。CATransaction -begin 和 -commit 仍然需要删除任何类型的班次动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T04:47:19.057

我想出了一个办法来解决这个问题。之前，我将每个动画添加到动画层，然后将其添加到 UISCrollView。相反，我将每个动画直接添加到 UISCrollView，然后像以前一样适当地移动所有图层。CATransaction -begin 和 -commit 仍然需要删除任何类型的班次动画。

# ajax - XMLHttpRequest 无法加载

> ID：10897292
> 
> 赞同：0
> 
> 时间：2012-06-05T12:26:46.420
> 
> 标签：ajax, web-services

我收到错误

XMLHttpRequest 无法加载[https://abc.com/xml](https://abc.com/xml)。Access-Control-Allow-Origin 不允许来源“http://localhost:8080”。

在 chrmoe 中同时连接到网络服务。我试图在html的标题部分使用。但它不起作用。我调用的 Web 服务不支持 JSONP。相同的代码在 IE8 上运行良好。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:31:18.557

如果您在原始页面之外的其他域中调用 URL，则浏览器默认禁止此类请求。为了使 XMLHttpRequest 到具有不同域的 URL，您必须将其放置在远程服务器 clientaccesspolicy.xml 文件的根文件夹中以进行跨域访问。更多信息在这里：http: [//msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)

# iphone - 绘制加载 UIActivity 指示器视图的东西

> ID：10897294
> 
> 赞同：0
> 
> 时间：2012-06-05T12:26:54.127
> 
> 标签：iphone, uiactivityindicatorview

在很棒的应用程序 Draw Something 中，当您单击某物并加载页面时，会拉起一个自定义 uiactivity 指示器视图，其中铅笔在循环中以（非圆形）路径移动。我将如何开始在我自己的 iPhone 应用程序中进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:31:10.910

您可以创建自己的[动画“ `UIImageView`”](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImageView/startAnimating)对象（您可以调用它而不是 UIActivityIndi​​catorView），也可以将“ `UIActivityIndicatorView`”子类化并进行自己的绘图（是的；我会说第一种方法是我更喜欢的方式）。

# android - 刷新列表视图

> ID：10897302
> 
> 赞同：0
> 
> 时间：2012-06-05T12:27:51.883
> 
> 标签：android

嗨，我有一个包含 2 个屏幕的应用程序。第一个屏幕（主屏幕）包含一个 ListView，它通过与服务器通信来动态填充行。单击行元素时会出现一个新屏幕，此屏幕上有一个按钮，按下此按钮时会与服务器进行通信（为此，我使用了 AsyncTask 类）。处理完成后，我必须自动切换回第一个屏幕（主屏幕），并且必须从ListView中消除刚刚完成与服务器通信的前一个行元素。我面临着消除 ListView 的行元素的问题。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:31:34.700

用于`SimpleAdapter`使用该`notifyDataSetChanged()`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:32:17.873

用于`StartActivityForResult`打开第二个活动并`Custom adepte`在列表视图中使用 r 并使用新的和 n 更新适配器的数据`otify change to list`。

[http://support.xamarin.com/customer/portal/articles/531998-android-startactivityforresult-and-finish-with-video-](http://support.xamarin.com/customer/portal/articles/531998-android-startactivityforresult-and-finish-with-video-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:34:27.537

[我建议您使用startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)开始第二个活动（当您单击列表视图项时） 。因此，第二个活动可以从服务器执行删除，并在任务完成时通知主活动。在您的情况下，主要活动将从第二个活动接收结果，并将从列表视图中删除该项目。希望有帮助！

# python - App Engine Python 2.5 / 2.7 上的 Python 时间戳不同

> ID：10897303
> 
> 赞同：0
> 
> 时间：2012-06-05T12:28:01.333
> 
> 标签：python, google-app-engine, python-2.7, python-2.5

Python datetime.fromtimestamp 在 App Engine Python 2.5 和 2.7 上返回不同的值。

[http://shell.appspot.com/](http://shell.appspot.com/)

```
Google App Engine/1.6.6
Python 2.5.2 (r252:60911, May 17 2011, 11:51:03) 
[GCC 4.3.1]

>>> import datetime
>>> print datetime.datetime.fromtimestamp(4102444800)
2100-01-01 00:00:00 
```

[http://shell-27.appspot.com/](http://shell-27.appspot.com/)

```
Google App Engine/1.6.6
Python 2.7.2 (default, Dec 14 2011, 14:36:31) 
[GCC 4.4.3]

>>> import datetime
>>> print datetime.datetime.fromtimestamp(4102444800)
1963-11-25 17:31:44 
```

2.5 实例正在返回所需的值。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:38:26.317

2.5：

```
Google App Engine/1.6.6
Python 2.5.2 (r252:60911, May 17 2011, 11:51:03) 
[GCC 4.3.1]

>>> import sys
>>> sys.maxint
9223372036854775807 
```

2.7：

```
Google App Engine/1.6.6
Python 2.7.2 (default, Dec 14 2011, 14:36:31) 
[GCC 4.4.3]

>>> import sys
>>> sys.maxint
2147483647 
```

# asp.net-mvc - mvc4 htmlhelper 扩展来存储 html 块以供以后在同一文件中输出

> ID：10897304
> 
> 赞同：0
> 
> 时间：2012-06-05T12:28:04.820
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, html-helper

好的，这就是我想要做的......给定这个剃须刀代码

```
@using(Html.WriteLater())
{
    output line one
}
actual first line
@using(Html.WriteLater())
{
    output line two
}
actual second line

@HTML.WriteNow(); 
```

我想要这个输出：

```
actual first line
actual second line
output line one
output line two 
```

有时在视图中将代码块逻辑地组合在一起很不错，但最终输出需要以不同的方式组织。我尝试在我的辅助逻辑中附加一个不同的 ViewContext ，但它不起作用：

```
public static WriteLaterContainer WriteLater( this HtmlHelper htmlHelper )
{
    ViewContext vc = new ViewContext();
    return new WriteLaterContainer( vc );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:58:51.160

不知道你为什么要重新发明轮子而不是使用标准方法，如部分、部分、助手……但我想你可能有一些原因。所以不完全是你展示的语法，但你可以通过使用 2 个助手的结合来获得类似的结果：

```
public static class HtmlExtensions
{
    private const string QueueKey = "_output_queue_";
    public static IHtmlString WriteLater(this HtmlHelper htmlHelper, Func<object, HelperResult> action)
    {
        var queue = htmlHelper.ViewContext.HttpContext.Items[QueueKey] as Queue<Func<object, HelperResult>>;
        if (queue == null)
        {
            queue = new Queue<Func<object, HelperResult>>();
            htmlHelper.ViewContext.HttpContext.Items[QueueKey] = queue;
        }
        queue.Enqueue(action);

        return MvcHtmlString.Empty;
    }

    public static IHtmlString WriteNow(this HtmlHelper htmlHelper)
    {
        var queue = htmlHelper.ViewContext.HttpContext.Items[QueueKey] as Queue<Func<object, HelperResult>>;
        if (queue == null)
        {
            return MvcHtmlString.Empty;
        }

        var writer = htmlHelper.ViewContext.Writer;
        foreach (var item in queue)
        {
            item(null).WriteTo(writer);
        }

        return MvcHtmlString.Empty;
    }
} 
```

可以这样使用：

```
@Html.WriteLater(@<div>output line one</div>)
<div>actual first line</div>
@Html.WriteLater(@<div>output line two</div>)
<div>actual second line</div>
@Html.WriteNow() 
```

输出将是预期的：

```
actual first line
actual second line
output line one
output line two 
```

# java - Java类中的Scala getter和setter

> ID：10897307
> 
> 赞同：11
> 
> 时间：2012-06-05T12:28:24.103
> 
> 标签：java, scala, getter-setter, scala-java-interop

我想创建一个遵循 Scala 设置器/获取器约定的 Java 类。

我尝试了以下简单的课程，但它不起作用：

```
public class JavaA {
private int a = 0;

public int a() {
    return a;
}

public void a_$eq(int a) {
    this.a = a;
}
} 
```

但是当我尝试从 scala 访问它时：

```
val x = new JavaA
x.a = 1 
```

我收到“重新分配给 val”错误消息。我试图寻找这个，但我发现了从 scala 到 java 的所有问题。

正确的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T14:19:41.457

你只能做到这一点，而且你可能不想这样做已经够难了。

你*不能*做的是编写一个神奇地被解释为 Scala getter 和 setter 的裸 Java 类。原因是 Scala 将信息嵌入到它的 getter 和 setter 所需的类文件中（例如，是否有零参数块或一个空参数块——JVM（或 Java）中没有保留的区别）。

你*可以*做的是使用 Java 来实现一个 Scala 定义的接口（即 trait）：

```
// GetSetA.scala
trait GetSetA { def a: Int; def a_=(a: Int): Unit }

// JavaUsesGSA.java
public class JavaUsesGSA implements GetSetA {
  private int a = 0;
  public int a() { return a; }
  public void a_$eq(int a) { this.a = a; }
} 
```

即便如此，你*也不能*直接使用类（同样因为 Java 没有为 Scala 添加适当的注解信息）：

```
scala> j.a = 5
<console>:8: error: reassignment to val
       j.a = 5 
```

但由于它*确实*成功地实现了 trait，所以当它被输入为 trait 时，您可以根据需要使用它：

```
scala> (j: GetSetA).a = 5
(j: GetSetA).a: Int = 5 
```

所以它是一个混合包。无论如何都不完美，但在某些情况下它可能具有足够的功能来提供帮助。

（当然，另一种选择是提供从 Java 类到具有引用 Java 类上的真实方法的 getter/setter 的隐式转换；即使您不能从 Scala 继承 Java，这也有效.)

（编辑：当然，编译器*必须*以这种方式运行并没有关键的理由；有人可能会争辩说，将 Java 定义的 getter/setter 对解释为就好像它们是 Scala 的一样（即，如果类文件没有明确说明它来自 Scala）是一种改进 Java 互操作性的功能增强的良好候选者。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:00:29.830

恐怕你不能。在 Scala 中，访问器必须是没有参数列表的方法，例如`def a = _a`. 例如，在 Scala 中编写`def a() = _a`会导致相同的错误，并且您无法在 Java 中定义没有参数列表的方法。你也许可以通过生成自己的 Scala 编译器来欺骗 Scala 编译器`ScalaSignature`，但这可能不值得这么麻烦……</p>

# gwt - 使用 GWT RPC 序列化在 POST 中将对象从客户端发送到服务器

> ID：10897308
> 
> 赞同：0
> 
> 时间：2012-06-05T12:28:26.557
> 
> 标签：gwt, serialization, rpc

我更喜欢使用 RPC 序列化，然后使用 servlet 发送数据。我们奇怪地发现这执行得更好，并且它允许我们有通用逻辑来重试所有 servlet 调用。

我已经弄清楚如何将对象从服务器发送到客户端，但找不到在客户端序列化和在服务器上反序列化的方法。

服务器到客户端

服务器：

`serializedObj = RPC.encodeResponseForSuccess(DUMMY_METHOD_OF_TYPE_SERIZABLE, object);`

客户：

```
GWT.create(MyRpc.class).createStreamReader(serializedObj).readObject(); 
```

客户端到服务器客户端：

```
 SerializationStreamWriter streamWriter = streamFactory.createStreamWriter();
    streamWriter.writeObject(object);
    serializedObj =  streamWriter.toString(); 
```

但是，在通过 POST 将其发送到服务器后，我该如何反序列化呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T23:35:47.113

[http://softteco.blogspot.com/2010/02/serializing-objects-in-gwt-and.html](http://softteco.blogspot.com/2010/02/serializing-objects-in-gwt-and.html)

注意服务器端反序列化选项

```
 // Getting parameter from request
String content = request.getParameter("content");
// Initializing stream reader
ServerSerializationStreamReader streamReader = new ServerSerializationStreamReader(
Thread.currentThread().getContextClassLoader(), null);
// Filling stream reader with data
streamReader.prepareToRead(content);
// Reading deserialized object from the stream
dto = (D) streamReader.readObject(); 
```

# linux - 安装 Nginx

> ID：10897309
> 
> 赞同：0
> 
> 时间：2012-06-05T12:28:26.620
> 
> 标签：linux, nginx, yum

```
./configure --user=boxflux 
            --group=boxflux 
            --prefix=/usr/local/nginx-1.3.0                    
            --with-pcre=/usr/lib64 
            --with-md5=/usr/lib64 
            --with-sha1=/usr/lib64 
            --with-zlib=/usr/lib64 
            --with-libatomic=/usr/lib64 
            --with-openssl=/usr/lib64 | grep 'not found'
checking for sys/filio.h ... not found
checking for /dev/poll ... not found
checking for kqueue ... not found
checking for crypt() ... not found
checking for F_READAHEAD ... not found
checking for F_NOCACHE ... not found
checking for directio() ... not found
checking for dlopen() ... not found
checking for SO_SETFIB ... not found
checking for SO_ACCEPTFILTER ... not found
checking for setproctitle() ... not found
checking for POSIX semaphores ... not found
checking for struct dirent.d_namlen ... not found 
```

我在安装 nginx 时遇到问题。我已经使用 'yum' 安装了 gcc、pcre*、zlib*、openssl*

我的配置有什么问题？对了，我的电脑是64bit centos6，现在正在安装nginx 1.3.0（开发版）

--------- 添加 -----------

我忘了说它比我添加的那些 --with-*=DIR 更糟糕......当我运行 kolbyjack 给我的一行代码时，结果是......

```
./configure --user=boxflux --group=boxflux --prefix=/usr/local/nginx-1.3.0 |grep 'not found'
checking for sys/filio.h ... not found
checking for /dev/poll ... not found
checking for kqueue ... not found
checking for crypt() ... not found
checking for F_READAHEAD ... not found
checking for F_NOCACHE ... not found
checking for directio() ... not found
checking for dlopen() ... not found
checking for SO_SETFIB ... not found
checking for SO_ACCEPTFILTER ... not found
checking for setproctitle() ... not found
checking for POSIX semaphores ... not found
checking for struct dirent.d_namlen ... not found
checking for PCRE JIT support ... not found
checking for system md library ... not found
checking for system md5 library ... not found
checking for sha1 in system md library ... not found 
```

由于我是centos6的新手..我对这个问题真的没有任何想法..请帮助我..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T23:46:55.440

很多时候，我宁愿不使用来自 src 的“售后”构建，而是使用本机 CentOS 软件包。

当安装了 pcre 包而不是 pcre-devel 包时，也可能导致“PCRE Library Not Found”错误。

只是，'yum install pcre-devel' 并重新运行 ./configure。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T13:02:47.763

来自`./configure --help`：

```
--with-pcre=DIR                    set path to PCRE library sources
--with-md5=DIR                     set path to md5 library sources
--with-sha1=DIR                    set path to sha1 library sources
--with-zlib=DIR                    set path to zlib library sources
--with-libatomic=DIR               set path to libatomic_ops library sources
--with-openssl=DIR                 set path to OpenSSL library sources 
```

如果您阅读帮助文本，这些选项中的每一个都设置了库*源*的目录，而不是库的安装版本。如果系统上已经安装了该库，nginx 应该在配置期间自动找到它。如果它安装在非标准位置，您应该使用`--with-cc-opt`and`--with-ld-opt`设置 nginx 搜索的包含和库路径。由于您已经通过 yum 安装了所有库，我希望您真正需要的是：

```
./configure --user=boxflux --group=boxflux --prefix=/usr/local/nginx-1.3.0 
```

# visual-studio-2010 - 如何使 Visual Studio 架构比较忽略数据库引用

> ID：10897316
> 
> 赞同：4
> 
> 时间：2012-06-05T12:28:54.770
> 
> 标签：visual-studio-2010, database-project, schema-compare

我们正在使用 Visual Studio 2010，我们的数据库脚本位于数据库项目中。
我们有两个数据库 DB1 和 DB2。DB1 使用 DB2。
我为每个数据库创建了一个数据库项目，并将 DB2 的 .dbschema 文件作为“数据库参考”添加到 DB1 的项目中。所以我在 DB1 中的视图代码就像

```
CREATE VIEW dbo.myView 
AS 
SELECT * FROM [$(DB2Ref)].dbo.SomeTable
GO 
```

直到这里一切都很好。但是当我在实际 DB1 数据库和 DB1 数据库项目之间进行模式比较时，比较发现项目中的“myView”和数据库中的“myView”之间存在差异。

有没有办法让架构比较忽略这些引用的数据库变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-13T08:40:12.293

Yo can set the Default for the SQL CMD Variable in the project settings to the actual database name. The schema compare in visual studio will then know that there is no change. Unfortunately if you compare against different databases with different names, you'll need to change this Default each time to the database you're comparing to.

[Setting SQL Cmd variable Default](http://i.stack.imgur.com/GchK0.png)

[SQL Schema Compare of View](http://i.stack.imgur.com/SZnBS.png) - the top is without the default defined and thus the object is marked as a change, and the bottom with the variable defined and thus marked as no-action

Sorry not enough rep to add images or more than 3 links yet

# javascript - 讨厌 IE 拒绝回复 JQuery Post

> ID：10897317
> 
> 赞同：1
> 
> 时间：2012-06-05T12:28:56.597
> 
> 标签：javascript, jquery, post

女士/男士：

做一个在 Chrome 和 FireFox 中运行良好的 $.post。IE - 没那么多......成功回调（addTicketAndRender（））永远不会被击中：

[http://jsfiddle.net/AeQxJ/1/](http://jsfiddle.net/AeQxJ/1/)

我已经阅读了一些关于需要通过我的 POST 对 IE 进行“缓存清除”的内容，但我对这些东西比较陌生，所以不知道这是否适合尝试，如果是，该怎么做。

资源：

```
function addTicketAndRender(incomingTicket) {

    console.log("Add and Render");
    alert(incomingTicket);
}

$(document).ready(function() {

    console.log('ready');

    // variables to feed trusted ticket retrieval
    var trustedURL = "http://tableau.russellchristopher.org/trusted",
        userName = "foo",
        serverURL = "http://tableau.russellchristopher.org/";

    $.post(trustedURL, {
        username: userName,
        server: serverURL,
        client_ip: "",
        target_site: "",
        cache: "false"
    }, function(response) {
        addTicketAndRender(response);
    });

});​ 
```

请帮个忙好吗？

**Update1：**​​将其切换为 ajax 帖子：没有区别。在 Chrome 和 Firefox 上仍然很好，在 IE 中仍然死气沉沉：

```
 $.ajax( {
      url : trustedURL,
      type: "POST",
      data : {
        username : userName,
        server : serverURL,
        client_ip : "",
        target_site : "" 
      },    
      cache : false

    } ).done( addTicketAndRender ); 
```

**更新 2：**集成了额外的缓存清除技术。[相同的行为 - Chrome/FF 工作，IE 没有任何东西 - 使用 Fiddler，我可以看到从http://jsfiddle.net/AeQxJ/3//](http://jsfiddle.net/AeQxJ/3//)运行下面的代码时 POST 出去了。在 IE 中，这永远不会发生。在 jsfiddle 之外测试并看到相同的结果。下一步：通过在我没有触及浏览器设置的盒子上进行测试，排除我愚蠢的 IE 浏览器设置。

```
function addTicketAndRender(incomingTicket){

    alert(incomingTicket);
}

$(document).ready(function() {
   // variables to feed trusted ticket retrieval

    var trustedURL = "http://tableau.russellchristopher.org/trusted",
        userName = "foo",
        serverURL = "http://tableau.russellchristopher.org/";

var number=Math.floor(Math.random()*1);
$.ajax( {
      url : trustedURL + "?" + number,
      type: "POST",
      data : {
        username : userName,
        server : serverURL,
        client_ip : "",
        target_site : "" 
      },    
      cache : false
     } ).done( addTicketAndRender );

});​ 
```

**更新 4：**排除了我的 IE 副本作为问题。在 POST 中添加了错误捕获代码，并且只有在 IE 中运行时，我才会看到这个抛出：

```
 error: function(xhr, textStatus, error){
              alert(xhr.statusText);
              alert(textStatus);
              alert(error);

//output:

//    xhr.StatusText: No Transport
//    testSttus: Error
//    error: No Transport 
```

搜索“IE No Transport jquery POST”将我带到这里：

[对 WebService 的 jQuery 调用返回“无传输”错误](https://stackoverflow.com/questions/5241088/jquery-call-to-webservice-returns-no-transport-error)

帖子表明添加`jQuery.support.cors = true;`应该可以解决问题，但是当我这样做时，会返回错误：

```
//output:

//    xhr.StatusText: Error: Access is denied
//    testSttus: Error
//    error: Error: Access is denied 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:31:05.323

改变

```
$.post( ...
    cache: "false"
    ... 
```

至：

```
$.ajax(...
    cache: false,
    ... 
```

注意，第一个缓存是一个无意义的字符串，而后者是一个布尔值 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:57:55.047

If the cache: false is not working for you, the old school way was to add a get parameter to the url, like a random number, so:

```
var number=Math.floor(Math.random()*1)
$.ajax( {
      url : trustedURL + "?" + number,
      type: "POST",
      data : {
        username : userName,
        server : serverURL,
        client_ip : "",
        target_site : "" 
      },    
      cache : false

    } ).done( addTicketAndRender ); 
```

This should help you debugging as well (change from random number to sequential). If still doesnt work I remove `.done` and use something like `complete` i.e.

```
$.ajax( {
      url : trustedURL,
      type: "POST",
      data : {
        username : userName,
        server : serverURL,
        client_ip : "",
        target_site : "" 
      },    
      cache : false,
      complete : function() {
         addTicketAndRender
      }
  }); 
```

One last thing, if your doing this using your jsfiddle page, make sure you remove console.log() from your code, as this will cause IE to break (it doesn't understand console.log).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:59:08.493

IE 倾向于在`console.log('');`语句上绊倒。尝试将其包装到 Log() 函数中：

```
function Log(text) {
    try {
        console.log(text);
    }
    catch (e) {
    }
} 
```

如果这样可以解决您的问题，您将希望在整个项目中使用[这种方法来使用 console.log() 。](https://stackoverflow.com/a/3767958/299756)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:42:36.873

`$.post`只是`$.ajax()`链接的简写版本：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

如果您需要更多控制，我建议`$.ajax()`您使用，因为“本机”方法有更多选择。链接：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

除了关于 jQuery.ajax() 的一个很好的编码技巧之外，总是将`$.ajax({cache: false})`某个地方设置为默认值，因为 IE 是（令人惊讶的）唯一`cache: true`默认的浏览器

# c# - 类似的函数重构模式

> ID：10897321
> 
> 赞同：6
> 
> 时间：2012-06-05T12:29:10.837
> 
> 标签：c#, .net, design-patterns

我有大约 20 个具有几乎相同模式的函数，我在站点数组上运行，使用站点对象创建 SiteOperation 并执行一些操作（在这种情况下只有一个参数，但有时没有或更多）

```
int wantedBandwidthInLBps = 2048 / 8;
foreach (Sites site in _sitesManagement.GetAll())
{
 SiteOperation siteOperation = new SiteOperation(site);
 siteOperation.LimitBandwidth(wantedBandwidthInLBps);
}

foreach (Sites site in _sitesManagement.GetAll())
{
 SiteOperation siteOperation = new SiteOperation(site);
 siteOperation.KillJames();
}

foreach (Sites site in _sitesManagement.GetAll())
{
 SiteOperation siteOperation = new SiteOperation(site);
 siteOperation.FlyToMoon(2012, new TaskIdentifier(10,20));
} 
```

是否可以包装此代码，所以我将只发送操作让我们说 _sitesManagement 它将在所有站点上运行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:35:03.053

尝试这个：

```
void PerformOperationOnAllSites(Action<SiteOperation> doIt) {
    foreach (Sites site in _sitesManagement.GetAll()) {
        SiteOperation siteOperation = new SiteOperation(site);
        doIt(siteOperation);
    }
}

...

_sitesManagement.PerformOperationOnAllSites(op => op.LimitBandwidth(wantedBandwidthInLBps));
_sitesManagement.PerformOperationOnAllSites(op => op.KillJames());
_sitesManagement.PerformOperationOnAllSites(op => op.FlyToMoon(2012, new TaskIdentifier(10,20)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:39:31.820

```
public void DoSiteOperationActions(Action<SiteOperation> toDo)
{
        foreach (Sites site in _sitesManagement.GetAll())
        {
           SiteOperation mySiteOperation = new SiteOperation(site);
           toDo(mySiteOperation);
        }
} 
```

然后你可以这样称呼它......

`DoSiteOperationActions(so => so.FlyToMoon(2012, new TaskIdentifier(10,20)));`

语法可能有点偏离，我这里没有 IDE，但这里有更多信息 [http://msdn.microsoft.com/en-us/library/018hxwa8.aspx](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:44:47.380

```
 private static void InvokeMethod(Action<SiteOperation> action)
    {
        foreach (SiteOperation siteOperation in _sitesManagement.GetAll()
                               .Select(site=>new SiteOperation(site))
        {
            action(siteOperation);
        }
    }
..

    public static void KillJames()
    {
        InvokeMethod(so => so.KillJames());
    }

    public static void LimitBandwidth(int wantedBandwidthInLBps)
    {
        InvokeMethod(so => so.LimitBandwidth(wantedBandwidthInLBps));
    }

    public static void FlyToMoon(int year=2012, TaskIdentifier ti=new TaskIdentifier(10,20))
    {
        InvokeMethod(so => so.FlyToMoon(year, ti));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:33:26.953

这听起来像是模板方法模式的一个很好的候选者。

[http://en.wikipedia.org/wiki/Template_method_pattern](http://en.wikipedia.org/wiki/Template_method_pattern)

# codeigniter - 使用 codeigniter 将文件上传到数据库

> ID：10897322
> 
> 赞同：3
> 
> 时间：2012-06-05T12:29:17.347
> 
> 标签：codeigniter, file-upload

我需要使用 codeigniter 在 mysql 数据库中上传文件。我的看法是：

```
<?php echo form_open_multipart('home/addpagina2'); ?>
<label for="titolo">Titolo:</label>
<input type="text" size="20" id="titolo" name="titolo"/>
<br/>
<label for="testo">Testo</label><br/>
<textarea name="testo" cols="50" rows="10"></textarea>
<br/>
<label for="file">File:</label>
<input type="file" name="file" />
<br />
<input type="submit" value="Aggiungi"/>
</form> 
```

控制器是：

```
function addpagina2(){
    $this->form_validation->set_rules('titolo', 'Titolo', 'trim');
    $this->form_validation->set_rules('testo', 'Testo', 'trim');

    if($_FILES["file"]["size"] > 0){
        $tmpName = $_FILES["file"]['tmp_name'];         
        $fp = fopen($tmpName, 'r');
        $file = fread($fp, filesize($tmpName));
        $file = addslashes($file);
        fclose($fp);
    }

    $pagina = array();
    $pagina['titolo'] = $this->input->post('titolo');
    $pagina['testo'] = $this->input->post('testo');
    $pagina['file'] = $file;

    $this->db->insert('pagine', $pagina);
    redirect('home/pagine');
} 
```

当我想显示文件时，我称这个视图为：

```
<?php
header("Content-type: ".$file['type']);
echo $file;
?> 
```

由该控制器调用：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class File extends CI_Controller {

function __construct(){
    parent::__construct();
}

public function index(){

}

function id($id){
    $immagine = $this->db->get_where('pagine', array('id' => $id));
    $data['file'] = $immagine->row()->file;
    $this->load->view('file', $data);
} 
```

}

问题是我在浏览器中调用视图时出错，您可以在此处看到：http: [//mattialori.net/amv/index.php/file/id/2](http://mattialori.net/amv/index.php/file/id/2) 如果我在数据库上上传文件使用 phpmyadmin 它可以工作。

我能怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T15:15:36.647

为什么不将文件名保存到数据库中？然后，您可以将 img 上传到特定文件夹中，在您的视图中，您可以设置文件夹的完整路径并在末尾附加文件名。

编辑：您可以通过这种方式使用文件上传类：

```
//Check if the file exists in the form
if($_FILES['file']['name']!=""){

//load library
$this->load->library('upload');

//Set the config
$config['upload_path'] = './uploads/'; //Use relative or absolute path
$config['allowed_types'] = 'gif|jpg|png'; 
$config['max_size'] = '100';
$config['max_width'] = '1024';
$config['max_height'] = '768';
$config['overwrite'] = FALSE; //If the file exists it will be saved with a progressive number appended

//Initialize
$this->upload->initialize($config);

//Upload file
if( ! $this->upload->do_upload("file")){

    //echo the errors
    echo $this->upload->display_errors();
}

//If the upload success
$file_name = $this->upload->file_name;

//Save the file name into the db
} 
```

# ios - iOS 教程在 iOS 5.1 中不起作用

> ID：10897328
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:29:35.037
> 
> 标签：ios, ios5.1

我已经完全完成了本教程，这似乎对我不起作用。

[http://zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins](http://zaldzbugz.posterous.com/how-to-mark-or-get-the-highlighted-string-ins)

这是一个很棒的教程，展示了如何从 uiwebview 复制/粘贴内容。我下载了源代码并在我的 ios 模拟器上运行它，但我无法获得我选择的文本。结果我只得到一个空字符串。

有谁知道它为什么不再运行？我正在使用 iOS SDK 5.1

真挚地，

佐利

**使用 iOS 5.0 模拟器的附加信息** 它正在工作，使用 iOS 5.1 它不是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:24:54.970

我是一个非常有趣的错误。安装 ios5.0 模拟器后，它也可以在 5.1 和 5.0 中运行。

# php - 从 codeigniter 中删除查询

> ID：10897330
> 
> 赞同：1
> 
> 时间：2012-06-05T12:29:45.803
> 
> 标签：php, mysql, codeigniter

我试图弄清楚我需要如何做这个查询。我正在尝试删除所有已注册但在一定时间限制内未激活的用户。

```
function purgeNA($expirePeriod)
{
    $this->db->where('usersStatusesID', 1);
    $this->db->where('UNIX_TIMESTAMP(registrationDate) <', time() - $expirePeriod);
    $this->db->delete($this->usersRegistrationsTable);
} 
```

这是我的数据库结构：

```
usersRegistrationsTable - userID, registrationDate
usersTable              - userID, usersStatusesID 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:44:25.333

据我所知，codeigniter 不支持通过 Active Record 接口`JOIN`的查询中的 s 。`DELETE`相反，您需要执行一条 SQL 语句：

```
$sql = "DELETE FROM 
          usersTable u
          JOIN usersRegistrationsTable r ON u.userID = r.userID
          WHERE usersStatusesID = 1 AND UNIX_TIMESTAMP(registrationDate) < ?";
$this->db->query($sql, array(time() = $expirePeriod)); 
```

# java - Java - 如何通过按钮获取下一个图像

> ID：10897332
> 
> 赞同：1
> 
> 时间：2012-06-05T12:29:54.420
> 
> 标签：java, image, button, next

我已经设法将图像添加到 netbeans 中的 JPanel 中并显示它。我想知道如何通过按下按钮进入下一个图像。

我使用以下代码添加了图像：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent  evt){                                         
    // TODO add your handling code here:
    JFileChooser fileChooser = new JFileChooser();
    int result = fileChooser.showOpenDialog(null);
    if ( result == JFileChooser.APPROVE_OPTION ){
         String Ruta = fileChooser.getSelectedFile().getAbsolutePath();
         jTextField1.setText(Ruta);
         Icon icon = new ImageIcon(Ruta);
         jLabel2.setIcon(icon);
         JOptionPane.showMessageDialog(this,"You chose to open this file: " + 
                    fileChooser.getSelectedFile().getName());  
    } 
} 
```

当我按下一个名为“jButton2”的按钮来获取下一个图像时，无需从文件夹中再次手动选择它。

例如：

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt){                                         
     // TODO add your handling code here:       
} 
```

非常感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:34:09.267

您必须枚举您正在浏览的目录中的图像。当用户选择文件时，您应该保留该目录中所有图像的列表，以便在用户单击下一步按钮时检索它们。您也可以在用户单击下一步按钮时获取文件列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:48:24.870

也许是这样的：

```
private File allFiles;
private int currentIndex;

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    JFileChooser fileChooser = new JFileChooser();
    int result = fileChooser.showOpenDialog(null);
    if ( result == JFileChooser.APPROVE_OPTION ){
            currentFile = fileChooser.getSelectedFile();
            String Ruta = currentFile.getAbsolutePath();
            jTextField1.setText(Ruta);
            allFiles = currentFile.getParent().listFiles(); // maybe you need a filter to include image files only....

            currentIndex = indexOf(allFiles, currentFile);

           Icon icon = new ImageIcon(Ruta);
                jLabel2.setIcon(icon);
                JOptionPane.showMessageDialog(this,"You chose to open this file: " + fileChooser.getSelectedFile().getName());  
    } 
```

}

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    if (currentIndex+1 < allFiles.length) {
        jtextField1.setText(allFiles[++currentIndex]);
    }
}

private int indexOf(File[] files, File f) {
    for (int i=0; i+1 < files.length; i++)  {
       if (files[i].equals(f)) {
          return i;
       } 
    }
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:34:25.110

我假设您想要下一个图像，如果可能的话，在您在第一个代码摘录中选择的同一目录中。您可以做的是，一旦用户选择了图像，您就可以使用 Apache 的[FileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)来获取文件的扩展名。如果文件是`JPG`, `JPEG`,`PNG`等，您可以将其位置加载到字符串列表中。

这将为您提供图片路径列表。然后，您可以使用按钮遍历列表。按下按钮后，您将移至下一个项目，加载图像并渲染它。

编辑：这就是我将如何一步一步地去做：

1.  创建一个 List 类型的全局变量。
2.  创建一个作为计数器的全局变量；
3.  在你的`jButton1ActionPerformed`方法中：
    *   获取用户选择的文件的父目录；
    *   使用 Apache 的`FileUtil`类来获取文件名的扩展名。如果文件名是图像，例如`PNG`,`JPG`等，请将其（该文件的路径）添加到您的列表中。
4.  在 you`jButton2ActionPerformed`中，递增计数器（如果计数器不小于列表的大小，请将其重新初始化为 0，以避免`OutOfBoundsExceptions`）并使用与您的方法类似的逻辑加载由计数器表示的文件`jButton1ActionPerformed`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:35:19.987

*   如果当前图像 ( `File.getParent()`)，则获取父文件。
*   使用其中一种`File.list..()`方法获取图像文件。
*   将它们按某种顺序排序，这对用户来说意味着“下一个”。
*   迭代该连接，直到找到当前连接，`File`然后显示下一个连接。

# matlab - 在 Matlab 中对信号应用 LFO

> ID：10897335
> 
> 赞同：0
> 
> 时间：2012-06-05T12:30:07.227
> 
> 标签：matlab, audio, signal-processing, audio-processing

我希望 LFO 是 6Hz 正弦波，它将原始信号的幅度修改 +/- 2db。

```
[y, Fs] = wavread('input.wav');
t = 0:1/Fs:(length(y)-1)/Fs;
y1 = y .* 1.584893.*sin(2*pi*6*t);
wavwrite(y1,Fs,'output.wav'); 
```

那会做需要做的吗？因为在我听完输出信号后，它听起来变形了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:07:52.347

为了对信号应用正弦波幅度调制，您需要将信号乘以

```
1 + Am * sin(2 * pi * Fm * t) 
```

其中`Am`是调制幅度（在您的情况下为 0.258925，对于 +/- 2 dB），`Fm`是调制频率（在您的情况下为 6 Hz）。

所以你的表达应该是：

```
y1 = y .* (1 + 0.258925 .* sin(2 * pi * 6 * t)); 
```

# python - Python：从列表中获取前 10 个结果

> ID：10897339
> 
> 赞同：201
> 
> 时间：2012-06-05T12:30:19.660
> 
> 标签：python

有没有办法我们可以从列表中获取前 10 个结果。可能是这样的：

```
list = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]

list.fetch(10) 
```

?

* * *

## 回答 #1

> 赞同：401
> 
> 时间：2012-06-05T12:31:23.903

```
list[:10] 
```

将使用切片为您提供此列表的前 10 个元素。

但是，请注意，最好***不要***用作`list`变量标识符，因为它已被 Python 使用：[list()](http://docs.python.org/library/functions.html#list)

要了解有关这些类型的操作的更多信息，您可能会发现[列表上的本教程](http://docs.python.org/tutorial/introduction.html#lists)很有帮助，并且链接 @DarenThomas 提供了[解释 Python 的切片符号](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)- 感谢 Daren）

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-06-05T12:32:29.770

检查这个

```
 list = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]

 list[0:10] 
```

输出：

```
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-05T12:34:39.743

[itertools](http://docs.python.org/library/itertools.html)模块中有很多很棒的东西。因此，如果标准切片（Levon 使用的）不能满足您的要求，请尝试以下`islice`功能：

```
from itertools import islice
l = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
iterator = islice(l, 10)
for item in iterator:
    print item 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-06-05T12:32:17.633

使用切片运算符：

```
list = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]
list[:10] 
```

# php - JQuery - 使用 url 循环多个图像

> ID：10897353
> 
> 赞同：0
> 
> 时间：2012-06-05T12:31:21.997
> 
> 标签：php, jquery, cycle

我正在用 php 渲染一些图像，但我也渲染了`a href=""`- 图像区域在它们褪色时会发生变化，但 url 是相同的。

如何同时更改网址和图像？

jQuery 循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:49:54.440

jquery Cycle 插件可以循环任何任何元素。所以最简单的方法是用一个超链接包装每个图像：

[http://jsfiddle.net/lucuma/MV9S5/](http://jsfiddle.net/lucuma/MV9S5/)

```
<div id="slideshow">
  <a href="/page/a"><img src="img1.jpg" /></a>
  <a href="/page/b"><img src="img2.jpg" /></a>
  <a href="/page/c"><img src="img3.jpg" /></a>
</div>

$('#slideshow').cycle(); 
```

此外，如果您想要更新滑块之外的标题，您可以使用您的幻灯片属性。你会使用 after 事件。以下代码`h1`在每张幻灯片更改后更新 的超链接。它将文本设置为幻灯片上 img 的标题。因为我的图像包含在超链接中，所以我需要这一行`var $cur = $('img', currSlideElement)` 来访问幻灯片的 img 元素。

演示：http: [//jsfiddle.net/lucuma/dsK9S/2/](http://jsfiddle.net/lucuma/dsK9S/2/)

```
<h1 id="title"><a href="#"></a></h1>
<div id="slideshow">
  <a href="/page/a"><img src="img1.jpg" /></a>
  <a href="/page/b"><img src="img2.jpg" /></a>
  <a href="/page/c"><img src="img3.jpg" /></a>
</div>
$('#slideshow').cycle({
    after:function(currSlideElement, nextSlideElement, options, forwardFlag) {
        var $cur = $('img',currSlideElement);
        $('#title a').text($cur.attr('title'));
       $('#title a').attr('href',$cur.attr('src')).text();
    }
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:37:17.817

**jQuery解决方案：**

```
$(yourImage).attr('src', 'newImageUrl'); 
```

如果您尝试实现滑块。试试[尼沃](http://nivo.dev7studios.com/)。

# php - 获取对数组元素的引用，其中数组可以作为 $obj->$propName 访问

> ID：10897356
> 
> 赞同：3
> 
> 时间：2012-06-05T12:31:34.123
> 
> 标签：php, arrays, reference, variable-variables

假设我们有这段代码（简化示例）：

```
$propertyName = 'items';
$foo = new \stdClass;
$foo->$propertyName = array(42); 
```

在这一点上，我想编写一个表达式，计算出对数组内值的引用。

**是否有可能做到这一点？如果是这样，怎么做？**

将“完成工作”但**不是**我正在寻找的答案是：

```
// Not acceptable: two statements
$temp = &$foo->$propertyName;
$temp = &$temp[0]; 
```

但是为什么要把它写成两个语句呢？好吧，因为这不起作用：

```
// Will not work: PHP's fantastic grammar strikes again
// This is actually equivalent to $temp = &$foo->i
$temp = &$foo->$propertyName[0]; 
```

当然`&$foo->items[0]`是另一个不可接受的解决方案，因为它修复了属性名称。

*如果有人想知道奇怪的要求：我在一个循环中执行此操作，其中`$foo`它本身是对图中某个节点的引用。任何涉及的解决方案`$temp`都需要`unset($temp)`事后进行，以便`$temp`下一次迭代的设置不会完全弄乱图形；如果您对引用不是非常小心，则可能会忽略此`unset`要求，因此我想知道是否有一种方法可以编写此代码，从而减少引入错误的可能性。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:41:23.167

像这样的模棱两可的表达式需要解析器的一些帮助：

```
$temp = &$foo->{$propertyName}[0]; 
```

顺便说一句，无论您是在寻找变量别名（又名引用）还是只是值，这都是一样的。如果您使用数组访问表示法，两者都需要它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:41:39.573

花了一些谷歌搜索，但我找到了解决方案：

```
$propertyName = 'items';
$foo = new \stdClass;
$foo->$propertyName = array(42);

$temp = &$foo->{$propertyName}[0]; // note the brackets

$temp++;

echo $temp;
print_r($foo->$propertyName); 
```

这将打印`43 array(43)`.

我在这篇文章中找到了解决方案：[Referencing an array in a variable object property by Jeff Beeman](http://jeffbeeman.com/node/92)

# html - 如果存在操作，则不提交表单

> ID：10897360
> 
> 赞同：1
> 
> 时间：2012-06-05T12:31:41.303
> 
> 标签：html, forms, apache, wamp

前几天我搭建了一个小型的开发服务器。在 Windows Vista Business 和最新的 WAMP 上运行。

今天我写了一个简单的脚本来测试一些东西，当我点击提交按钮时，什么也没有发生。它不会提交到同一页面，它不会给我一个 404 not found （它应该）。没有什么。页面甚至不闪烁：

```
<form method='POST' action='controller.php'>
    <input type='hidden' name='test' value='test' />
    <input type='submit' />
</form> 
```

没有什么！但是，如果我删除该操作，如下所示，页面将提交给自身，并且对全局 $_POST 变量的探测显示隐藏值已传递。

```
<form method='POST'> 
```

甚至以下工作：

```
<form method='POST' action=''> 
```

我在 apache 设置中遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:24:07.890

解决了！

经过反复试验，我发现它只发生在 Chrome 中。原来是 . 这不会影响任何其他浏览器！

感谢大家的意见。

# java - 需要了解java中的线程（this，ThreadName）吗？

> ID：10897361
> 
> 赞同：2
> 
> 时间：2012-06-05T12:31:42.820
> 
> 标签：java, multithreading

```
public class GetCurrentThread implements Runnable {
   Thread th;

   public GetCurrentThread(String threadName) {
      th = new Thread(this,threadName); //<----DOUBT 
      System.out.println("get threadname "+th.getName());
      th.start();
   }

  public void run() {
     System.out.println(th.getName()+" is starting.....");
     System.out.println("Current thread name : " + Thread.currentThread().getName());
  }

  public static void main(String args[]) {
     System.out.println("Current thread name : " + Thread.currentThread().getName());
     new GetCurrentThread("1st Thread");
     //new GetCurrentThread("2nd Thread");
   }
} 
```

有人可以解释上面代码的第二行在做什么吗？我对“th = new Thread(this,threadName)”的理解是，它将创建具有给定名称的线程对象；让我们说名称“第一个线程”。现在，“this”关键字在这里做什么？因为当我删除它并尝试获取线程的名称时，我得到的名称没有问题，但它从未开始运行（）。有人可以解释一下简单来说，而不是单行答案。我真的很感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:33:47.590

> th = new Thread(this, threadName); //<----疑问

`Thread`您的第二行是用您的`GetCurrentThread`类作为目标 ( `this`) 和线程名称构造一个新对象`"threadName"`。您`this`可以成为目标，因为它实现了`Runnable`. 在`Thread`类内部，当线程启动时，它会调用`Thread.run()`which：

```
public void run() {
    if (target != null) {
        target.run();
    }
} 
```

你`GetCurrentThread`是目标，因为你传递`this`给构造函数。真的*不*应该调用`GetCurrentThread`它，因为它不是线程。构建完 2 行代码后`Thread`，开始运行：

> th.start();

该`start()`方法执行创建单独工作本机线程的实际工作。线程做的第一件事是调用类中的`run()`方法`GetCurrentThread`。

作为评论，通常*不*建议在其构造函数中将类作为`start()`自身。有一些固有的竞争条件可能会导致问题。最好有一个`start()`方法在你的`GetCurrentThread`

```
/** start the underlying thread */
public void start() {
   th.start();
} 
```

你的主要看起来像：

```
public static void main(String args[]) {
   System.out.println("Current thread name : " + Thread.currentThread().getName());
   GetCurrentThread thread1 = new GetCurrentThread("1st Thread");
   thread1.start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:33:37.313

那么构造函数的第一个参数`Thread`是一个对象，它的类型实现了`Runnable`，这正是它所`this`代表的。注意类声明：

```
public class GetCurrentThread implements Runnable 
```

因此，当线程启动时`run`，当前实例的方法 ( `this`) 会被执行。

无论如何，我尽量避免这种代码。它只会导致混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:35:00.857

尝试这个，

```
th = new Thread(this,threadName); 
```

在上面的行`"this" keyword`中将表示具有可运行`implemented`接口的类的对象。

现在我将尝试更详细地向您展示：

```
public class A implements Runnable{

   public void run(){

                // some work
        }

}

public class B {

public static void main(String[] args){

A a = new A;
Thread t = new Thread(a);// a is an obj ref variable of class A which implements Runnable
t.start();

 }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:47:02.550

`this`这里是调用其 run 方法的对象，在这种情况下是`GetCurrentThread`类的一个实例。无法保证在您执行`th.start()`此操作后线程立即开始执行。这里发生的是主线程在您看到 run 方法中的输出行之前完成执行。在 main 中创建对象后添加`th.join()`，以便等待新创建的线程完成：

```
public class GetCurrentThread implements Runnable {
    Thread th;

    public Thread getThread(){
        return th;
    }

    public GetCurrentThread(String threadName) {
        th = new Thread(this, threadName); // <----DOUBT
        System.out.println("get threadname " + th.getName());
        th.start();
    }

    public void run() {
        System.out.println(th.getName() + " is starting.....");
        System.out.println("Current thread name : "
                + Thread.currentThread().getName());
    }

    public static void main(String args[]) {
        System.out.println("Current thread name : "
                + Thread.currentThread().getName());
        GetCurrentThread currentThread = new GetCurrentThread("1st Thread");
        // new GetCurrentThread("2nd Thread");
        try {
            Thread thread = currentThread.getThread();
            if (thread != null) {
                thread.join();
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

你得到的输出是这样的：

```
Current thread name : main
get threadname 1st Thread
1st Thread is starting.....
Current thread name : 1st Thread 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T12:50:32.823

您指的是构造函数`Thread(Runnable target, String name)`，其中第一个参数是具有方法`target`的任何实例。`Runnable``run()`

在这种特殊情况下，`target`对象是创建和启动线程的类`GetCurrentThread` 本身（即 Runnable）的实例。所以这里 `this`代表的实例 `GetCurrentThread`

`Runnable.run()`方法实际上是一个线程（由对象表示）**要执行的任务**。`Thread`如果您传递 null 而不是它，则不会有任何任务要线程执行，因此不会`run()`调用任何方法。

# javascript - 阴影的奇怪行为

> ID：10897365
> 
> 赞同：1
> 
> 时间：2012-06-05T12:32:09.813
> 
> 标签：javascript, shadowing

尽管不应该使用阴影（或只是为了混淆），因为它令人困惑，但我想完全理解它。我得到了这个奇怪的东西：

```
alert(parseInt('123'));//Here, I expected 123 but it's 'overshadowed'
function parseInt(){return 'overshadowed';}
alert(parseInt('123'));//Here it's 'overshadowed' too 
```

为什么第一个`alert`输出“黯然失色”而功能尚未修改？

PS：我受到[JavaScript 中的变量阴影的启发](https://stackoverflow.com/questions/5373278/variable-shadowing-in-javascript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:37:39.607

在 JavaScript 中，所有声明都*隐式*放置在作用域的开头（*“hoisted”*），因此 parseInt() 定义是在第二行、最后一行还是第一行并不重要。

# windows - Erlang 在 windows 上使用 maven 编译

> ID：10897369
> 
> 赞同：2
> 
> 时间：2012-06-05T12:32:21.507
> 
> 标签：windows, maven, path, erlang

我尝试用 maven 编译一些 erlang。我使用 maven-erlang-plugin 来完成这项任务。

它在 linux 上运行良好，但是当我尝试在 windows 上编译时，会发生此错误：

```
 [erlang:validate]

    [erlang:initialize]

    [erlang:extract-dependencies]

    [erlang:reload-dependencies]

    [erlang:generate-resources]

    [erlang:compile]

    C O M P I L E R

    No MIBs to compile.
    Errors:

    c:UsersDelkaspoDocumentsNetBeansProjectsirtualbrownpaperMiddleWare rcmainrlang oto.erl:none
 I/O error
 ------------------------------------------------------------------------
 BUILD FAILURE
 ------------------------------------------------------------------------
 Total time: 2.438s Finished at: Tue Jun 05 11:52:46 CEST 2012 Final Memory: 11M/108M
 ------------------------------------------------------------------------
 Failed to execute goal eu.lindenbaum:maven-erlang-plugin:2.2.0:compile (default-compile) on project middleware: Failed to >compile [C:UsersDelkaspoDocumentsNetBeansProjectsirtualbrownpaperMiddleWare rcmainrlang oto.erl]. -> [Help 1]
    To see the full stack trace of the errors, re-run Maven with the -e switch.
    Re-run Maven using the -X switch to enable full debug logging.

    For more information about the errors and possible solutions, please read the following articles:
    [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
    Successfully shut down 'middleware-maven-erlang-plugin-backend@ipadrress' 
```

看起来他解释了窗口的反斜杠。

有关信息：maven-erlang-plugin -> 2.3.0（我尝试了其他版本 -> 相同的问题）maven -> 2.2.1

有任何想法吗 ？

谢谢大家。

# java - 在 Java 中以整数形式返回 ASCII 值

> ID：10897374
> 
> 赞同：4
> 
> 时间：2012-06-05T12:32:46.797
> 
> 标签：java, jakarta-ee

我正在尝试获取字符的 Ascii 值，但我有点无能为力

到目前为止我发现

```
 Character.getNumericValue 
```

但是当我阅读文档时，它说

> 返回指定 Unicode 字符的 int 值

在 php 中我曾经使用过 ord(string String)

那么 Character.getNumericValue 会为我做些什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T12:34:12.193

您所要做的就是 cast `(int) c`，`c`您的`char`（即角色）在哪里。

# php - 教义php中的问题处理日期

> ID：10897380
> 
> 赞同：3
> 
> 时间：2012-06-05T12:33:20.120
> 
> 标签：php, mysql, orm, doctrine-orm, php-5.3

我遇到了日期格式问题。我正在使用 mysql、doctrine2 和 php 5.3。

问题是当我查询数据库时，`getRepository('Entity\\Srm').findBy($id)`我最终得到一个负日期值：`-0001-11-30 00:00:00`。

当前存储在数据库中的值为`0000-00-00`。mysql 中字段的数据类型是`date`.

学说实体将变量标识为`date`类型。

我已经做了很多搜索，但没有好的线索。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T20:04:49.717

如果您可以更改数据库，请在列上添加可空属性并将 0000-00-00 值替换为空。

否则，您需要实现自定义类型：[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/advanced-field-value-conversion-using-custom-mapping-types。 html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/advanced-field-value-conversion-using-custom-mapping-types.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:42:32.043

我找到了解决我的问题的方法。我在实体中的属性上设置了最新的注释，所以我决定删除注释以便 PHP 处理它们。现在它正在工作，因为它是作为字符串类型而不是日期类型查询的。我想这就是我从静态世界与动态世界中得到的结果。

# c# - 使用 LINQ 读取 XML 文件并使用 IEnumerable 属性创建对象

> ID：10897383
> 
> 赞同：2
> 
> 时间：2012-06-05T12:33:25.683
> 
> 标签：c#, .net-4.0, linq-to-xml

这是我的问题：

我有这个 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<settings>
  <app name="Application1">
    <log name="Log1" path="d:\paths\" filename="Log1File"/>
    <log name="Log2" path="d:\paths\"/>
    <log name="log3" path="d:\paths\" filename="Log3File"/>
  </app>
</settings> 
```

我正在尝试使用 LINQ 阅读它并创建此类的对象：

```
 public class Apps
  {
    public string Name { get; set; }
    public IEnumerable<Logs> Logs { get; set; }
  }

  public class Logs
  {
    public string Name { get; set; }
    public string Path { get; set; }
    public string Filename { get; set; }
  } 
```

到目前为止，我设法创建了这段代码，但看起来它只获取第一个日志元素，平均时间我需要每个应用程序元素的所有日志元素：

```
 public static IEnumerable<Apps> GetAllApps()
    {
      var items = from a in db.Descendants("app")
                  orderby a.Attribute("name").Value
                  select new Apps
                  {
                    Name = a.Attribute("name").Value,
                    Logs = from b in a.Descendants("log")
                           select new Logs 
                           { 
                            Name = b.Attribute("name").Value,
                            Path = b.Attribute("path").Value,
                            Filename = b.Attribute("filename").Value
                           }
                  };

      return items;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:49:00.637

我会在这里使用*序列化*

```
XmlSerializer ser = new XmlSerializer(typeof(Settings));
var result = (Settings)ser.Deserialize(stream);

[XmlRoot("settings")]
public class Settings
{
    [XmlElement("app")]
    public Apps[] apps;
}

public class Apps
{
    [XmlAttribute("name")]
    public string Name { get; set; }
    [XmlElement("log")]
    public Logs[] Logs { get; set; }
}

public class Logs
{
    [XmlAttribute("name")]
    public string Name { get; set; }
    [XmlAttribute("path")]
    public string Path { get; set; }
    [XmlAttribute("filename")]
    public string Filename { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:57:05.017

我使用了 fluent API，但让你随心所欲地适应......

问题是 NullReferenceException，因为您在 xml 中的日志之一没有“文件名”属性。当你在 null 上使用“Value”时，你会得到一个 NRE。

因此，在尝试获取它的值之前检查属性是否存在。

```
var it = db.Descendants("app")
                    .OrderBy(app => app.Attribute("name").Value)
                    .Select(app => new Apps() {
                        Name = app.Attribute("name").Value,
                        Logs = app.Descendants("log").Select(a =>
                            new Logs() {
                                Name = a.Attribute("name") != null ? a.Attribute("name").Value : null,
                                Path = a.Attribute("path") != null ? a.Attribute("path").Value : null,
                                Filename = a.Attribute("filename") != null ? a.Attribute("filename").Value : null
                            }).ToList()
                    }).ToList(); 
```

# flash - MXML：Spark 皮肤 VGroups 滚动条

> ID：10897386
> 
> 赞同：0
> 
> 时间：2012-06-05T12:33:32.733
> 
> 标签：flash, apache-flex, mxml

我有一个 VGRoup，如果内容太长，它会自动获取滚动条。

我想对滚动条进行蒙皮（使其更宽）。我怎样才能做到这一点？

```
<s:Panel title="Replay" width="95%" height="860" top="920" horizontalCenter="0">
    <s:VGroup id="vgroup" left="10" right="10" top="10" bottom="10">
        <s:List id="list" height="100%" width="100%" itemRenderer="ListRenderer" />         
    </s:VGroup>
</s:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:55:10.630

首先，您应该知道获得滚动条的不是 VGroup，而是 List。组是没有任何视觉元素的布局组件。（在您显示的代码中，VGroup 也是多余的，但我想您可能出于这个问题的目的删除了一些不相关的代码。）

现在进行蒙皮：您可以通过创建自己的 Spark VScrollBarSkin 版本来做到这一点。如果您使用 FlashBuilder，请右键单击您的项目（或要在其中创建皮肤的包）；单击“新建 > MXML 皮肤”；在向导中填写`spark.components.VScrollBar`为主机组件并让它创建一个`spark.skins.spark.VScrollBarSkin`.

![在此处输入图像描述](../Images/b46c3de8f446ad219909f2f56fcf4b1b.png)

在您刚刚创建的类中，您会看到四个按钮，每个按钮都有自己的皮肤。一个是“向上滚动”按钮，另一个是“向下滚动”按钮，第三个是可点击的轨道（背景），最后一个是可以拖动的拇指。

您现在可以像使用 VScrollBarskin 一样为每个按钮创建自定义外观，但由于您只想调整宽度，因此可能没有必要。只需在每个按钮上设置显式宽度就足够了。

现在要应用你的皮肤而不是默认皮肤，只需将它放在你的样式表中：

```
@namespace s "library://ns.adobe.com/flex/spark";

s|VScrollBar {
    skinClass: ClassReference("my.skins.VScrollBarSkin")
} 
```

或者，如果您希望它仅应用于列表滚动条，请使用更具体的选择器，例如：

```
s|List s|VScrollBar { ... } 
```

# ios - 为什么我无法为注释的字幕设置 pin 地址？

> ID：10897400
> 
> 赞同：0
> 
> 时间：2012-06-05T12:34:34.717
> 
> 标签：ios, xcode, annotations, street-address, subtitle

如果 == nil，则尝试将 pin 位置的地址设置为注释字幕。但什么也没有发生。

```
if (myAnnotation.subtitle == nil)
                    [self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
                     ^(NSArray *placemarks, NSError *error) {

                         CLPlacemark *placemark = [placemarks objectAtIndex:0];
                         NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];  
                         myAnnotation.subtitle = locatedAt;

                     }];   
                else {
                    myAnnotation.subtitle = [[ann objectAtIndex:i] objectForKey:@"Address"];
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:22:49.290

您的代码正在发生的事情是地理编码器是异步操作。在地理编码完成之前放置您的图钉。根据您的代码设置方式，您可能会在地理编码完成之前丢失对您的 pin 的引用。在创建注释之前尝试对地标进行地理编码。

# objective-c - 如何在iphone sdk中将字符串转换为字节

> ID：10897401
> 
> 赞同：0
> 
> 时间：2012-06-05T12:34:36.883
> 
> 标签：objective-c

我想将字符串转换为字节，并且字符串不超过 2 个字节。

谁能告诉我如何将字符串转换为字节并检查它不超过 2 个字节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:42:12.630

请参考[NSString](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)类中的**cStringUsingEncoding:方法。**

# c# - 如何在 Windows azure worker 角色中安排任务

> ID：10897404
> 
> 赞同：9
> 
> 时间：2012-06-05T12:34:44.650
> 
> 标签：c#, azure

我有一个简单的 Azure Worker 角色正在运行，它每天下午 12 点执行一项任务。下面是完成此操作的代码。

```
public override void Run()
{
    try
    {
        while (true)
        {
              int time = Convert.ToInt32(DateTime.Now.TimeOfDay);
              if (time == 12)
              {
                   DoSomethingElse();
              }
        }

    }
    catch (Exception ex)
    {
        Log.Add(ex, true);
    }            
} 
```

这`DoSomethingElse()`是一种在每天下午 12 点发送电子邮件的方法，并且每天只触发一次。

我怎样才能实现一个调度程序，当时间是 12PM 时触发并执行`DoSomethingElse()`。

我的问题是：这是（上面的代码）是最好的方法还是使用任何第三方工具。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:50:37.593

这里还有其他几个问题可以解决这个问题（我在上面标记了一个）。话虽如此，并且冒着重复其他答案已经说明的风险：

在您的情况下，Windows Azure 队列上的一条简单消息（延迟到中午才出现）将起作用。这也有助于处理多实例场景：如果您正在运行角色的两个实例，您不希望同一个计划任务运行两次，因此您需要一种方法让其中一个实例执行此代码。这可以通过队列消息轻松处理，或者您可以通过使用诸如 blob 租约（可能只有一个写锁）作为互斥锁在单个实例上运行调度程序代码。这在@smarx 的博客文章中有所介绍，[这里](http://blog.smarx.com/posts/building-a-task-scheduler-in-windows-azure)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T19:00:51.887

您还可以使用 Quartz.Net [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/) 使用上面提到的 blob 租约是确保只有一个实例托管任务的好方法。

[使用 Quartz.Net 在 Windows Azure Worker 角色中安排作业](http://alexandrebrisebois.wordpress.com/2013/01/20/using-quartz-net-to-schedule-jobs-in-windows-azure-worker-roles)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-28T01:59:31.523

Cloud Scheduler 专门处理云中的任务调度。

我只是遇到了这个，所以我没有尝试过。

[http://getcloudscheduler.com/](http://getcloudscheduler.com/)

**更新**：忘记云调度程序！我连续运行了 600 次每日日程安排，最终向我的客户发送了 600 封电子邮件。不要用！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-06T18:20:06.407

使用[Azure 任务计划程序](http://azure.microsoft.com/en-us/services/scheduler/)。Scott Gu 的很好的教程[在这里](http://weblogs.asp.net/scottgu/windows-azure-new-scheduler-service-read-access-geo-redundant-storage-and-monitoring-updates)。

具体来说，我会查看 Storage Queue 操作类型 - 只需在您的 Worker Role 中注册队列事件。

（请注意，如果您想比每小时更频繁地安排任务，这项服务可能会花钱。）

# image - 在 Firefox 中从剪贴板粘贴图像突然启用（tinymce）

> ID：10897407
> 
> 赞同：6
> 
> 时间：2012-06-05T12:35:03.790
> 
> 标签：image, firefox, tinymce, clipboard, paste

我在 webmail 客户端中使用 TinyMCE 进行富文本编辑。突然，经过多年恳求我们构建这样的东西，客户能够直接从剪贴板粘贴图像。虽然我一直努力实现与 Google 一样聪明，但我立即登录到我的 Gmail 帐户并开始粘贴。是的，粘贴也可以在 Gmail 中使用，是的，发送的电子邮件中的图像也被破坏了。

这是 html 的缩短部分，由 firefox 在将我的屏幕截图粘贴到 textarea 后生成：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABDgAAA<andsoonfor100k>"/> 
```

我不得不说，我对这个新功能感到非常兴奋，但我似乎找不到关于这个主题的任何东西（字面意思！），所以关于何时将它添加到 firefox 的任何建议，甚至如何使它真正起作用电子邮件客户将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T07:47:10.073

这有点旧，但是从版本 4 开始添加到 Firefox，从版本 6 开始添加到 Thunderbird（有点）（似乎从版本 3 开始它可以读取它们）。

对于 Thunderbird，即使 Thunderbird 支持数据 URI，其他电子邮件客户端可能不支持，因此 Thunderbird 将它们转换为经典的 MIME 附件（以 CID 作为 URL）。

对于 GMail，截至今天（2013 年 3 月），粘贴的图像数据作为数据 URI 包含在内，而拖放图像（至少在 Linux 中，使用 Gnome，从 Nautilus 到 Firefox）包含它们作为常见的 MIME 附件. 因此，如果您发送带有数据 URI 图像的电子邮件，一些电子邮件客户端会正确显示它，而另一些则不会。（具有讽刺意味的是，Gmail 无法显示它们，至少不能在 Firefox 和 Chrome 中显示）。

顺便说一句，至少在 Thunderbird 中，由于数据 URI 没有关于图像的完整信息，如果您尝试保存它，您需要提供名称或使用“image.jpeg”通用名称。

有关数据 URI 的信息：

*   [https://www.rfc-editor.org/rfc/rfc2397](https://www.rfc-editor.org/rfc/rfc2397)
*   [http://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

有关如何从 CKEditor 中的粘贴数据中删除或转换数据 URI 的信息（有些人出于某些 [有效] 原因不喜欢它们）：

*   [http://ckeditor.com/forums/Plugins/ImagePaste-plugin-for-Firefox](http://ckeditor.com/forums/Plugins/ImagePaste-plugin-for-Firefox)
*   [http://dev.ckeditor.com/ticket/8208](http://dev.ckeditor.com/ticket/8208)

所以，有很多信息，也许只是搜索“数据 uri”会返回更多结果。

# c# - 在 C# WPF 中向移动椭圆添加文本

> ID：10897408
> 
> 赞同：1
> 
> 时间：2012-06-05T12:35:17.367
> 
> 标签：c#, wpf, text, ellipse

我有一个 C# 程序，wpf。我有一块画布，画布上有许多随机移动的椭圆。我可以为每个椭圆添加文本，例如椭圆的位置？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:11:34.140

当然，创建一个用户控件。该用户控件的 xaml 是一个网格，其中包含您的椭圆和您根据需要设置的文本框。然后定义您需要的 PropertyChanged 通知属性，例如 X、Y 和其他文本属性。然后将用户控件的 xaml (Canvas.Top/.Left) 绑定到用户控件的属性，就大功告成了。

# android - 更改蓝牙 SPP 连接的波特率

> ID：10897411
> 
> 赞同：3
> 
> 时间：2012-06-05T12:35:33.137
> 
> 标签：android, bluetooth, baud-rate

我需要使用蓝牙 SPP 以 1.15k 的速率从远程蓝牙设备收集蓝牙数据。我按如下方式连接到远程设备。

```
try {
  tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
} catch (IOException e) {
  Log.e(TAG, "create() failed", e);
}
mmSocket = tmp;
}

public void run() {
  Log.i(TAG, "BEGIN mConnectThread");
  setName("ConnectThread");
  // Always cancel discovery because it will slow down a connection
  mAdapter.cancelDiscovery();
  // Make a connection to the BluetoothSocket
  try {
    // This is a blocking call and will only return on a
    // successful connection or an exception
    mmSocket.connect();
  } catch (IOException e) {
    connectionFailed();
    // Close the socket
    try {
      mmSocket.close();
    } catch (IOException e2) {
      Log.e(TAG, "unable to close() socket during connection failure", e2);
    } 
```

对远程设备的连接请求成功，我可以以默认波特率 9600bps 接收数据。

但是当我将远程蓝牙适配器设备上的发送波特率更改为 1.15kbps 时，我的应用程序在蓝牙上没有收到任何数据包。正如我上面提到的，我已经尝试过[这篇文章](https://stackoverflow.com/questions/5576237/android-bluetooth-serial-rfcomm-spp-how-to-change-the-baud-rate)的建议。

有什么我错过的吗？我真的不需要在我的应用程序中做任何事情来改变波特率吗？RFComm 通道是否自动调整波特率？

我正在使用 Android 2.1-update1 平台。

问候，贾格米特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T03:58:34.017

我找到了我的问题的答案。

我真的不需要在我的应用程序中做任何事情来改变波特率吗？

答：不，我们不需要在客户端做任何事情来改变波特率。RFComm 通道自动调整波特率。

# android - 具有许多相同可绘制性能的 Android ListView

> ID：10897412
> 
> 赞同：0
> 
> 时间：2012-06-05T12:35:33.840
> 
> 标签：android, performance, listview, android-listview, drawable

我正在开发一个包含大量可绘制对象的列表视图的 Android 应用程序。它们中的大多数是相同的，所以我尝试使用一个 HashMap，它在需要时返回相同的分配位图，但仍然有很多分配和 GC 操作，因此列表在滚动时会不时卡住。

在这种情况下，我能做些什么来优化性能？

缓存方法——loadImage[使用google代码](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

```
mImageWorker.loadImage(pic_url, holder.pic);
holder.*some bitmap*.setImageBitmap(Utility.getBitmap(context, id); //can be one of 5 bitmaps do I use caching with a hashMap 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:03:38.357

[看这个例子](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List13.html) 这将帮助你....

不要在 getView() 方法下放这么多过程。如果您想进行图像抓取或可绘制到位图转换或任何事情，这将缺乏列表视图滚动性能..只需在加载适配器之前完成所有过程..并为 getView() 中的每一行分配值...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:37:59.377

如果您想优化代码，请尝试使用延迟加载概念来加载列表中的图像。请参考：[Android 中 Listview 上的延迟加载图像（初级）？](https://stackoverflow.com/questions/2912054/lazy-load-images-on-listview-in-androidbeginner-level)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:38:57.623

尝试使用使用缓存的延迟加载技术，您可以在网上找到很多教程：

[你必须看到这个 SO 线程](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

另请参阅：

[Multithreading For Performance](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)，Gilles Debunne 的教程。

这来自 Android 开发者博客。建议的代码使用：

1.  异步任务。
2.  一个硬的、有限大小的 FIFO 缓存。
3.  一个软的、易于垃圾收集的缓存。
4.  下载时的占位符 Drawable。

# android - Android：HTTPCLIENT POST - 拒绝 Cookie

> ID：10897413
> 
> 赞同：0
> 
> 时间：2012-06-05T12:35:34.260
> 
> 标签：android, httpclient, gsoap

运行 HttpClient 示例时，我经常收到以下警告

```
 06-05 17:43:40.568: W/ResponseProcessCookies(725): Cookie rejected:   "BasicClientCookie[version=1,name=visit,domain=.127.0.0.1,path=/,expiry=Tue Jun 05 17:53:40 IST 2012]". Domain attribute ".127.0.0.1" violates RFC 2965: effective host name does not domain-match domain attribute. 
```

我正在尝试将数据发送到 gsoap 服务器。我已经通过了这个[链接1](https://stackoverflow.com/questions/7459279/httpclient-warning-cookie-rejected-illegal-domain-attribute) [链接](https://stackoverflow.com/questions/4146861/android-httpclient-persistant-cookies) [2 链接 3](https://stackoverflow.com/questions/3587254/how-do-i-manage-cookies-with-httpclient-in-android-and-or-java)但没有得到太多帮助。这是我的 HttpClient 代码

```
public class newA extends Activity implements OnClickListener {

private static final String TAG = "MyPost";

private boolean post_is_running = false;

private doSomethingDelayed doSth;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    Button pushButton = (Button) findViewById(R.id.push_button);
    pushButton.setOnClickListener(this);

}

@Override
protected void onPause() {
    super.onPause();
    if (post_is_running) { // stop async task if it's running if app gets
                            // paused
        Log.v(TAG, "Stopping Async Task onPause");
        doSth.cancel(true);
    }
}

@Override
protected void onResume() {
    super.onResume();
     if (post_is_running) { // start async task if it was running previously
                            // and was stopped by   onPause()
        Log.v(TAG, "Starting Async Task onResume");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();
        ((Button) findViewById(R.id.push_button)).setText("Resuming..");
    }
}

public void onClick(View v) {
    if (post_is_running == false) {
        post_is_running = true;
        Log.v(TAG, "Starting Async Task onClick");
        doSth = (doSomethingDelayed) new doSomethingDelayed().execute();

        ((Button) findViewById(R.id.push_button)).setText("Starting..");
    } else {
        Log.v(TAG, "Stopping Async Task onClick");
        post_is_running = false;
        doSth.cancel(true);
        ((Button) findViewById(R.id.push_button)).setText("Stopping..");
    }
}

private class doSomethingDelayed extends AsyncTask<Void, Integer, Void> {

    private int num_runs = 0;

    @Override
    protected Void doInBackground(Void... gurk) {

        while (!this.isCancelled()) {
            Log.v(TAG, "going into postData");

            long ms_before = SystemClock.uptimeMillis();
            Log.v(TAG, "Time Now is " + ms_before);

            postData();

            long ms_after = SystemClock.uptimeMillis();

            long time_passed = ms_after - ms_before;

            Log.v(TAG, "coming out of postData");
            Log.i(TAG, "RTT: " + time_passed + " ms");

            num_runs++;

            // publish to UI
            if (!this.isCancelled()) {
                publishProgress(num_runs, (int) time_passed);
            }
        }
        return null;
    }

    @Override
    protected void onCancelled() {
        Context context = getApplicationContext();
        CharSequence text = "Cancelled BG-Thread";
        int duration = Toast.LENGTH_LONG;

        Toast.makeText(context, text, duration).show();

        ((Button) findViewById(R.id.push_button))
                .setText("Stopped. Tap to Start!");
    }

    @Override
    protected void onProgressUpdate(Integer... num_runs) {
        Context context = getApplicationContext();
        CharSequence text = "Looped " + num_runs[0].toString() + " Times";
        int duration = Toast.LENGTH_SHORT;

        Toast.makeText(context,
                text + "\nRTT: " + num_runs[1].toString() + " ms", duration)
                .show();

        ((Button) findViewById(R.id.push_button)).setText(text
                + "\nTap to Stop");

    }
}

/**
 * stupid function that posts hardcoded data to hardcoded address
 */

public void postData() {
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    // HttpPost httppost = new HttpPost("http://129.132.131.73:8880/form");
    HttpPost httppost = new HttpPost("http://192.168.1.37");
    // HttpPost httppost = new HttpPost("http://disney.com/");
    // HttpGet httppost = new HttpGet("http://192.168.1.137:8880/form");

    String resp = null;
    long time_passed = 0;
    try {
        // create data to POST
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("id", "12345"));
        nameValuePairs.add(new BasicNameValuePair("stringdata",
                "XXXXX Pvt Ltd!"));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        long ms_before = SystemClock.uptimeMillis();

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

        long ms_after = SystemClock.uptimeMillis();
        time_passed = ms_after - ms_before;

        resp = response.toString();

    } catch (ClientProtocolException e) {
        Log.e(TAG, e.toString());
    } catch (IOException e) {
        Log.e(TAG, e.toString());
    }

    Log.i(TAG, "RTT inside post-data: " + time_passed);

    Log.i(TAG, resp.toString());
}

} 
```

请让我知道问题出在哪里..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:19:13.180

我认为您的 HTTPClient/Android 代码很好。看起来 HTTP 服务器正在尝试为域“.127.0.0.1”发送 cookie，但这是基于 IP 地址而不是域名。

您可能需要配置您的 HTTP/SOAP 服务器以相信它有一个真实的名称，可以从您的网络访问，而不是 127.0.0.1 或其他 IP 地址。这*也可能*有效：`37.1.168.192.in-addr.arpa`

配置服务器后，您可能需要更改 Java 代码以使用该域名（例如 . `new HttpPost("http://server-name.local/");`）。

# python - 如何从 facebook 应用程序创建墙贴到应用程序的粉丝页面？

> ID：10897416
> 
> 赞同：1
> 
> 时间：2012-06-05T12:35:42.820
> 
> 标签：python, facebook, facebook-graph-api

每个 Facebook 应用都可以有自己的粉丝专页，所以我有一个问题：如何让应用发布到自己的粉丝专页墙上？有什么特别的授权吗？示例（尤其是在 python 中（有人脸皮吗？））会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:58:10.677

回答我自己的问题：

原来每个facebook粉丝页面都有自己的oauth_token，要获取它，你需要先在你的应用程序中授权粉丝页面管理员，然后，你可以通过[https://graph.facebook.com/获取页面oauth_token FAN_PAGE_ID_HERE?fields=access_token](https://graph.facebook.com/FAN_PAGE_ID_HERE?fields=access_token)获取请求。

有了这个 access_token，您就可以从您的应用发布到粉丝页面。就这么简单！

在 Facebook 文档中，您可以找到更多信息：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

# python - 本地执行位于 Web 服务器上的 python 文件

> ID：10897417
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:35:50.233
> 
> 标签：python, web, exec

我正在开发一个名为[RubberBand](http://lukeshiels.com/rubberband/)的开源项目，它是一个开源项目，可让您按照标题所说的去做。在本地执行位于 Web 服务器上的 python 文件，但是我遇到了问题。如果逗号位于字符串中（例如“http:”），则会返回错误。

```
'''
RubberBand Version 1.0.1 'Indigo-Charlie'
http://www.lukeshiels.com/rubberband

CHANGE-LOG:

Changed Error Messages.
Changed Whole Code Into one function, rather than three.
Changed Importing required libraries into one line instead of two

'''
#Edit Below this line

import httplib, urlparse

def executeFromURL(url):
    if (url == None):
        print "!# RUBBERBAND_ERROR: No URL Specified #!"
    else:
        CORE = None
        good_codes = [httplib.OK, httplib.FOUND, httplib.MOVED_PERMANENTLY]

    host, path = urlparse.urlparse(url)[1:3]
    try:
        conn = httplib.HTTPConnection(host)
        conn.request('HEAD', path)
        CORE = conn.getresponse().status

    except StandardError:
        CORE = None

    if(CORE in good_codes):
        exec(url)
    else:
        print "!# RUBBERBAND_ERROR: File Does Not Exist On WEBSERVER #!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:41:56.277

没有错误检查的三行RubberBand：

```
import requests
def execute_from_url(url): 
    exec(requests.get(url).content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:32:21.973

我建议检查这个问题。

避免在 URL 中使用逗号，这是我的建议。

[我可以在 URL 中使用逗号吗？](https://stackoverflow.com/questions/198606/can-i-use-commas-in-a-url)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:46:07.243

您应该在块中使用`return`语句，`if (url == None):`因为继续执行您的功能没有意义。

代码中的错误在哪里，是否有完整的回溯，因为带有逗号的 URI 可以很好地使用`urlparse`模块解析。

~~是不是`httplib.ResponseNotReady`打电话的时候`CORE = conn.getresponse().status`？~~

没关系那个错误消息，那是我快速测试您的代码并重新使用相同的连接对象。我看不出你的代码有什么错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T12:01:31.557

这似乎对我很有效：

```
import urllib
(fn,hd) = urllib.urlretrieve('http://host.com/file.py')
execfile(fn) 
```

我更喜欢使用标准库，因为我使用的是与第三方软件 (abaqus) 捆绑在一起的 python，这使得添加软件包非常头疼。

# perl - 如何检查 Mac OS 是 32 位还是 64 位？

> ID：10897418
> 
> 赞同：1
> 
> 时间：2012-06-05T12:35:53.773
> 
> 标签：perl, macros

我想确定 Mac OS 是 32 位还是 64 位。

谁能帮我写下 Perl 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:48:14.597

不清楚你想要什么。

要查找用于 的指令集`perl`，您可以使用以下命令：

```
$ perl -V:myarchname
myarchname='x86_64-linux'; 
```

（相对于`i686-linux`.）

要查找 使用的整数的大小`perl`，可以使用以下命令：

```
 $ perl -V:ivsize
  ivsize='4'; 
```

（相对于`8`.）

可以从 Perl 中访问这些值，如下所示：

```
use Config qw( %Config );
say $Config{myarchname};
say $Config{ivsize}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:48:03.187

我不是 perl 程序员，但是尝试将 1 加到最大 32 位整数并根据溢出值检查它怎么样？如果相等，则您使用的是 32 位...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:01:48.423

您可以检查输出`uname -a`并查看它是否显示`i386`或`x86_64`结尾：

```
#! /usr/bin/env perl

use strict;
use warnings;
use feature qw(say);
no warnings qw(uninitialized);

if (not -x "/usr/bin/uname") {
    say "Can't determine system bit mode: uname command not found";
}
else {
    chomp ( my $arch_type = qx(/usr/bin/uname -a) );
    if (not $arch_type) {
        say "Can't determine system bit mode";
    }
    elsif ($arch_type =~ /x86_64$/) {
        say "System is in 64 bit mode";
    }
    else {
        say "System is in 32 bit mode: $arch_type";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:38:37.267

一种可能性是调用“ `arch`”。

我刚刚快速键入的脚本如下所示：

```
#!/usr/bin/perl -w
$arch=`arch`;
print $arch; 
```

但是，当我在`arch`终端命令行中输入“”时，会得到“ `i386`”的输出。我的 Mac Pro 塔式机支持 64 位（如果不是全部，一些应用程序以 64 位模式运行），所以我不确定为什么我没有看到 " `x86_64`" 输出。

# python - 使用 Python 从 JSON / 字典中提取数据

> ID：10897419
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:35:57.047
> 
> 标签：python

我有一个输出：

```
result  = {
    "sip_domains":{
        "prefix":[{"name":""}],
        "domain":[{"name":"k200.com"},{"name":"Zinga.com"},{"name":"rambo.com"}]
    },
    "sip_security":{"level":2},
    "sip_trusted_hosts":{"host":[]},
    "sip_proxy_mode":{"handle_requests":1}
} 
```

从此我只想将输出打印到我的屏幕上：

```
domain : k200.com 
domain : Zinga.com 
domain : rambo.com 
```

如何使用正则表达式获取此输出

急需帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:38:39.337

如果是您需要解析的文本，则使用 JSON 模块解析 JSON 有效负载：

[http://docs.python.org/library/json.html?highlight=json#json](http://docs.python.org/library/json.html?highlight=json#json)

像 Python 这样好的编程语言不需要正则表达式。

否则，如果它是 Python 字典，则使用 Python 字典 [] 样式项访问从字典中读取数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:55:29.237

If you are getting this data as a string from somewhere you must convert it to a python dictionary object to access it. You should not have to use any regular expressions to get this output.

```
import json
# get the json str somehow
json_dict = json.loads(json_str)
for domain_dict in json_dict['sip_domains']['domain']:
  print 'domain : %s' % (domain_dict['name']) 
```

# objective-c - NSWindow 子窗口在父点击时关闭

> ID：10897425
> 
> 赞同：1
> 
> 时间：2012-06-05T12:36:28.143
> 
> 标签：objective-c, cocoa, appkit

我需要实现一个自定义弹出框（不能使用`NSPopover`）。一切正常，但我还需要实现当用户单击父窗口中的某个位置时弹出框会自行关闭。

什么是实现这一点的最佳方法，分别。如果不对父窗口进行子类化，如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:43:56.497

在显示它时制作弹出键窗口，并`NSWindowDidResignKeyNotification`在它退出该状态时使用（或委托方法）关闭（当用户激活其他窗口时会发生这种情况）。每当关闭父窗口时关闭也是一个好主意 ( `NSWindowWillCloseNotification`)。

# jsf - Richfaces可编辑数据表未在Bean中设置更新值

> ID：10897427
> 
> 赞同：1
> 
> 时间：2012-06-05T12:36:38.940
> 
> 标签：jsf, richfaces

谷歌搜索后我尝试了很多建议，但到目前为止没有一个对我有用。我试图在每一行中显示一个带有可编辑 inputText 值的简单数据表。表是通过通常的对象列表从数据库中填充的。这是我的 xhtml 页面和托管 bean

Richfaces 4.2.1、JSF 2 mojarra 与 JBoss 7.1、JDK 1.6 捆绑在一起

```
<rich:dataTable value="#{wlScoreBean.scoreList}" binding="#{wlScoreBean.scoreTable}" var="item" id="table" style="width:100%">
        <rich:column>
            <f:facet name="header">PARAM NAME</f:facet>
            <h:outputText value="#{item.paramName}" />
        </rich:column>
        <rich:column>
            <f:facet name="header">1 Score</f:facet>
             <h:inputText value="#{item.name1}" />
        </rich:column>
        <rich:column>
            <f:facet name="header">2 Score</f:facet>
             <h:inputText value="#{item.name2}" />
        </rich:column>
      </rich:dataTable>

        <br/>
        <h:panelGrid columns="3" id="buttonRow">
            <a4j:commandButton value="Save" render="table" execute="@this" action="#{wlScoreBean.update()}">                    
            </a4j:commandButton>
        </h:panelGrid>

import java.io.Serializable;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.faces.component.html.HtmlDataTable;
import javax.faces.event.ValueChangeEvent;

import org.richfaces.component.UIDataTable;

@ManagedBean(name = "wlScoreBean")
@ViewScoped
public class WS implements Serializable
{

    private static final long serialVersionUID = 1L;

    private HtmlDataTable scoreTable;
    private List<WorkloadScore> scoreList;

    public void watchScore(ValueChangeEvent e)
    {
        System.out.println("old value="+e.getOldValue() + ", New Value="+e.getNewValue());
    }

    public List<WorkloadScore> getScoreList() {
        return scoreList;
    }

    public void setScoreList(List<WorkloadScore> scoreList) {
        this.scoreList = scoreList;
    }

    @EJB
    private WorkloadScoreManagerService wlScoreManager;

    public HtmlDataTable getScoreTable() {
        return scoreTable;
    }

    public void setScoreTable(HtmlDataTable scoreTable) {
        this.scoreTable = scoreTable;
    }

    public WorkloadScoreBean()
    {

    }

    @PostConstruct
    private void getAllScores()
    {
        this.scoreList = wlScoreManager.getAllScores();
    }

    public void update()
    {

        for (WorkloadScore wls : getScoreList())
        {
            System.out.println(wls.getParamName()+"="+wls.getPortabilityScore()+","+wls.getVirtualizationScore());
        }

        //wlScoreManager.update(workloadScore);
    }
} 
```

这是我尝试过的所有东西。所有这些都导致在 update() 方法中仅将 OLD VALUES 打印到控制台。

1.  从 rich:dataTable 更改为普通的旧 JSF h:dataTable，结果相同

2.  将 dataTable 绑定到托管 Bean 属性，在 update() 方法中进行检查，旧值也在此处打印。我刚刚对 UIDataTable 对象执行了 getVlaue() 并将其转换为 List。

    该列表应该已经使用表单中的更改值进行了更新，但我没有看到它发生。我确实确保将 MBean 放在 ViewScope 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:49:02.357

你有啊：数据表外的表格吗？您是否尝试将 inputtext 替换为 inplaceinput 字段？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:49:52.980

在这里查看答案[https://community.jboss.org/thread/200684?tstart=0](https://community.jboss.org/thread/200684?tstart=0)

我更改了 execute=@form 并且它起作用了！不需要 ValueChangeEvent 或搞乱 dataTable 绑定。列表值已就地更新，更新方法打印正确的值

# c# - 如何使用在 jscript 中声明的参数调用 Html.RenderAction()？

> ID：10897433
> 
> 赞同：5
> 
> 时间：2012-06-05T12:37:08.410
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我在 *.cshtml 文件中有一个 javascript

```
$(function () {

sliderDiv.slider({
  range: true,
  min: minVal,
  max: maxVal,
  values: [minVal, maxVal]
});

sliderDiv.bind("slidechange", function (event, ui) {

  var d = "min=" + ui.values[0] + "&max=" + ui.values[1];
  $.ajax({
    type: "POST",
    url: '@Url.Action("Update", "Default")',
    data: d,
    success: function (result, ajaxObj) {
        alert('ok');
        alert(result.min + " - " + result.max);
        $("#ajaxresult").html('@{Html.RenderAction("Update", "Default");}');
    },
   error: function (ajaxObj, message, exceptionObj) { alert('no'); }
});
});
} 
```

和控制器：

```
public ActionResult Update(int? min, int? max)
        {
            if(min == null) min = 1;
            if(max == null) max = 1;
            var s = new SliderModel()
                                {
                                    min = (int)min * 1000,
                                    max = (int)max * 1000
                                };

            return new JsonResult
                       {
                           Data = s,
                           ContentEncoding = Encoding.UTF8,
                           JsonRequestBehavior = JsonRequestBehavior.AllowGet,
                           ContentType = "json"
                       };

        } 
```

我想用这条线

```
$("#ajaxresult").html('@{Html.RenderAction("Update", "Default");}'); 
```

发送`ui.values[0]`和`ui.values[1]`as`min`和`max`参数到`Html.RenderAction("Update", "Default")`

就像是`$("#ajaxresult").html('@{Html.RenderAction("Update", "Default", new {min = ui.values[0], max = ui.values[1]});}');`

我怎么能做这样的事情？？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T12:38:15.067

```
var url = '@Url.Action("Update", "Default")';
url += '/?min=' + ui.values[0] + '&max=' + ui.values[1];
$("#ajaxresult").load(url); 
```

[**`load`文档**](http://api.jquery.com/load/)：

> 描述：从服务器加载数据并将返回的 HTML 放入匹配的元素中。

# plone - 查看权限以检查已登录的成员

> ID：10897439
> 
> 赞同：4
> 
> 时间：2012-06-05T12:37:31.083
> 
> 标签：plone, zope

我想将 Plone 站点根目录中的视图限制为仅登录成员。

我应该检查哪个权限？

为了澄清起见，我想将此权限用作 Zope 3 视图配置，并拥有默认工作的东西。如果可以避免这种情况，我不想自己创建和分配权限。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T14:26:07.407

没有“经过身份验证”的权限，所有权限都仅针对特定操作，如果经过身份验证的用户需要能够执行该操作，那么您应该将相应的权限分配给“经过身份验证”的角色。

要获得“Authenticated”角色的（Zope2 基于字符串的）权限的快速列表，请使用以下 ZMI 视图：

```
http://localhost:8080/Plone/manage_roleForm?role_to_manage=Authenticated 
```

我假设您在端口 8080 上运行您的站点，并且您命名了 Plone object `Plone`。它在多选列表中显示*所有权限，当前分配的权限已激活。*

在默认站点上，此列表非常少，只有`Set own password`和`Set own properties`已`Use external editor`分配。对于前两个，Zope3 等效项[在 Products.CMFCore 中定义](http://svn.zope.org/Products.CMFCore/trunk/Products/CMFCore/permissions.zcml?rev=107523&view=markup)；它们是`cmf.SetOwnPassword`, 和`cmf.SetOwnProperties`; 第三个目前没有 Zope3 等价物，但很容易定义，只需将其添加到某处的 ZCML 文件中：

```
<permission
  id="plone.UseExternalEditor"
  title="Use external editor"
  /> 
```

Zope3 权限只是使用有效 python id 的 Zope2 对应项的别名。

我真的不知道你想对你的视图做什么，但你最好的选择是找到一个适当的权限并将其分配给“已验证”角色，或者创建一个新权限。

实际上，后者真的很容易。

假设我想创建一个“访问 foo bar”权限，我只需在 ZCML 文件中使用 Zope3 标识符直接注册它：

```
<permission
    id="foobar.AccessFooBar"
    title="Access foo bar"
    /> 
```

这里的所有都是它的; “Access foo bar”权限现在将在 ZMI 中可见。

如果您想默认将此权限授予特定角色，请将它们列为包含元素：

```
<permission
    id="foobar.AccessFooBar"
    title="Access foo bar">
  <role name="Authenticated" />
</permission> 
```

这仅适用于“全局”角色（在 Zope 根中定义），例如“经理”、“匿名”和“已验证”。

或者，使用 rolemap.xml 文件将其列在 GenericSetup 配置文件中，以将此新权限分配给 Authenticated 角色：

```
<?xml version="1.0"?>
<rolemap>
  <permissions>
    <permission name="Access foo bar" acquire="False">
      <role name="Authenticated"/>
    </permission>
  </permissions>
</rolemap> 
```

仅当您要分配在 Plone 级别定义的权限时才需要使用后者，例如“站点管理员”或“编辑器”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T14:03:09.203

在股票 Plone 中，经过身份验证但不是匿名的用户可以更改自己的密码。您可以使用该权限。它被称为：

cmf.SetOwnPassword

# jquery - 仅淡出背景

> ID：10897443
> 
> 赞同：0
> 
> 时间：2012-06-05T12:37:52.327
> 
> 标签：jquery, css, jquery-effects

当我单击按钮时，会显示隐藏的图像。我遇到的问题是我希望（现在）背景褪色或变黑，而正在发生的事情是一切都褪色了，包括显示的图像。

[显示隐藏图像](http://i1198.photobucket.com/albums/aa451/KakaOriginal/album/fadeChartBackgroundEdited.png)

如何仅淡出背景？

```
<div id="chart" style="text-align: center;display:none;position:fixed;z-index:-100;">
    <img src="/donor-radar-chart?radar=%5B%5B%22W.Feather%22%2C0%2C26635692%2C240660%5D%2C%5B%22Jesterium%22%2C6%2C26297636%2C668476%5D%2C%5B%22OCFthanks%5BH%5D%22%2C6%2C19286508%2C8442507%5D%2C%5B%22wyluliraven%22%2C11%2C23246906%2C2486642%5D%2C%5B%22Quisarious%22%2C21%2C15048498%2C4027046%5D%2C%5B%22Breeze%22%2C22%2C23116432%2C1369416%5D%2C%5B%22Filter%22%2C40%2C27698092%2C54722%5D%2C%5B%22Axiomatic%22%2C70%2C16109511%2C1287889%5D%2C%5B%22DEJ915%22%2C80%2C21659570%2C677966%5D%2C%5B%22rIg0r_m0rTiS%22%2C84%2C29503180%2C1212%5D%2C%5B%22daggerhead%22%2C103%2C2553248%2C1880421%5D%5D"
        width="640" height="300" class="imgChart" alt="Donor Radar Chart"
        />
    </div>

<div style="background-color: #fafafa;">
    <table class="radar" id="radar" width="100%">
        <thead>
            <tr>
                <th colspan="2">Overtake</th>
                <th rowspan="3">Challenging Member</th>
                <th colspan="10">Challenging Member Stats
                    <span>
                        <input type="button" value="Chart" onclick="
                            var $body = $('body');
                            var $chart = $('#chart');
                            var left = Math.floor(($body.outerWidth() - 640) / 2);
                            var top = Math.floor(($body.outerHeight() - 300) / 2);
                            $body.fadeTo('fast', 0.5);
                            $chart
                                .css('left', left).css('top', top)
                                .css('z-index', '100').fadeTo('fast', 1);
                            $chart.on('click', function() {
                                $chart.fadeOut('fast');
                                $body.fadeTo('fast', 1);
                            });
                            "></span>
                    </th>
                </tr> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:53:40.693

这很简单。最简单的方法：首先——扔掉

```
$body.fadeTo('fast', 0.5); 
```

和

```
$body.fadeTo('fast', 1); 
```

第二 - 为图表元素添加一些样式：

```
<div id="chart" style="text-align: center;display:none;position:fixed;z-index:-100; width: 100%; height: 100%; background: rgba(0,0,0,0.5); top: 0px; left: 0px;">
<img src="/donor-radar-chart?radar=%5B%5B%22W.Feather%22%2C0%2C26635692%2C240660%5D%2C%5B%22Jesterium%22%2C6%2C26297636%2C668476%5D%2C%5B%22OCFthanks%5BH%5D%22%2C6%2C19286508%2C8442507%5D%2C%5B%22wyluliraven%22%2C11%2C23246906%2C2486642%5D%2C%5B%22Quisarious%22%2C21%2C15048498%2C4027046%5D%2C%5B%22Breeze%22%2C22%2C23116432%2C1369416%5D%2C%5B%22Filter%22%2C40%2C27698092%2C54722%5D%2C%5B%22Axiomatic%22%2C70%2C16109511%2C1287889%5D%2C%5B%22DEJ915%22%2C80%2C21659570%2C677966%5D%2C%5B%22rIg0r_m0rTiS%22%2C84%2C29503180%2C1212%5D%2C%5B%22daggerhead%22%2C103%2C2553248%2C1880421%5D%5D"
    width="640" height="300" class="imgChart" alt="Donor Radar Chart"
    />
</div> 
```

现在，图表采用所有屏幕宽度和高度，并具有自己的透明背景，涵盖了图表下的所有内容：) 希望它会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T12:46:55.557

您可以使用 jQuery UI 动画将背景颜色从一种颜色转换为另一种颜色：

```
$("#radarDiv").toggle(function() {
    $(this).animate({ backgroundColor: "white" }, 1000);
},function() {
    $(this).animate({ backgroundColor: "#fafafa" }, 500);
}); 
```

您可能还需要专门设置表格的背景颜色。

# django - 在 Django 中创建自定义用户并自定义管理员

> ID：10897451
> 
> 赞同：1
> 
> 时间：2012-06-05T12:38:12.547
> 
> 标签：django, admin

我需要在我的应用程序中创建自定义用户。

在[文档中给出的示例中](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)

```
class CustomUser(models.Model):
    user = models.OneToOneField(User)
    #custom fields 
```

在创建 CustomUser 之前，用户必须存在。

我想要做的是在创建自定义用户时自动创建用户。

在 CustomUser 管理员（仅由超级用户可见）中，我希望只有自定义字段和 User 模型中的一些字段，以及允许超级用户更改现有实例密码的某种形式。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:45:33.830

你问题的第一部分很简单，你可以使用一个信号：

```
def create_custom_user(sender, instance, created, **kwargs):
    if created:
        custom_user, created = CustomUser.objects.get_or_create(user=instance)

post_save.connect(create_custom_user, sender=User) 
```

至于第二部分，管理员中已经有一个更改密码表单。要过滤掉显示的字段，您可以创建一个 CustomUserAdmin 并将其与模型一起注册。在 django 文档中非常自我​​解释。

[django 文档：list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_display)

# c# - IEnumerable '需要'1'类型参数

> ID：10897453
> 
> 赞同：1
> 
> 时间：2012-06-05T12:38:15.877
> 
> 标签：c#, .net, ienumerable, postsharp

为了对提供给我们的 dll 进行更改，我使用了 IAspectProvider 接口并满足其所需的 ProvideAspects 方法。作为

```
public class TraceAspectProvider : IAspectProvider {
    readonly SomeTracingAspect aspectToApply = new SomeTracingAspect();

    public IEnumerable ProvideAspects(object targetElement) {
        Assembly assembly = (Assembly)targetElement;
        List instances = new List();
        foreach (Type type in assembly.GetTypes()) {
            ProcessType(type, instances);
        }
        return instances;
    }
    void ProcessType(Type type, List instances) {
        foreach (MethodInfo targetMethod in type.GetMethods(BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly)) {
            instances.Add(new AspectInstance(targetMethod, aspectToApply));
        }
        foreach (Type nestedType in type.GetNestedTypes()) {
            ProcessType(nestedType, instances);
        }
    }
} 
```

运行此程序时，我收到这些错误

等待您的宝贵意见

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:48:56.477

如果您查看[的文档`ProvideAspects()`](http://doc.sharpcrafters.com/postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/M_PostSharp_Aspects_IAspectProvider_ProvideAspects.htm)，您会注意到它返回`IEnumerable<AspectInstance>`，因此您也必须在代码中使用它：

```
public class TraceAspectProvider : IAspectProvider {
    readonly SomeTracingAspect aspectToApply = new SomeTracingAspect();

    public IEnumerable<AspectInstance> ProvideAspects(object targetElement) {
        Assembly assembly = (Assembly)targetElement;
        List<AspectInstance> instances = new List<AspectInstance>();
        foreach (Type type in assembly.GetTypes()) {
            ProcessType(type, instances);
        }
        return instances;
    }
    void ProcessType(Type type, List<AspectInstance> instances) {
        foreach (MethodInfo targetMethod in type.GetMethods(BindingFlags.Instance | BindingFlags.Public | BindingFlags.DeclaredOnly)) {
            instances.Add(new AspectInstance(targetMethod, aspectToApply));
        }
        foreach (Type nestedType in type.GetNestedTypes()) {
            ProcessType(nestedType, instances);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:40:32.903

你必须使用`IEnumerable<SomeClass>`and`List<someClass>`为此。还要检查`yield return`专门为在这种情况下使用而设计的。

# objective-c - Base64EncodedString 内存泄漏

> ID：10897454
> 
> 赞同：0
> 
> 时间：2012-06-05T12:38:17.063
> 
> 标签：objective-c, memory-leaks, base64

我正在将 githubt 上的 NSData+Base64 opensrc 库[用于](https://github.com/nicklockwood/Base64)下个月到期的项目。我刚刚开始分析、分析和优化，并发现了来自该代码的泄漏。我已经禁用了 NSZombie 和所有调试方法和 try-catch，因为我之前发现它们有时会泄漏内存。精确定位泄漏的确切线是：

```
- (NSString *)base64EncodedString        
{
    return [self base64EncodedStringWithWrapWidth:0];
} 
```

和拆卸：

```
+0x0    pushl                          %ebp
+0x1    movl                           %esp, %ebp
+0x3    subl                           $24, %esp
+0x6    calll                          -[NSData(Base64) base64EncodedString]+0xb
+0xb    popl                           %eax
+0xc    movl                           +86389(%eax), %eax
+0x12   movl                           %eax, +4(%esp)
+0x16   movl                           +8(%ebp), %eax
+0x19   movl                           %eax, (%esp)
+0x1c   movl                           $0, +8(%esp)
+0x24   calll                          DYLD-STUB$$objc_msgSend   // 100% leak
+0x29   addl                           $24, %esp
+0x2c   popl                           %ebp
+0x2d   ret 
```

我没有联系作者，因为我担心没有正确使用库可能是我的错，或者只是我的代码的其他部分。

当我使用特定方法（仅使用一次）时，我会在加密例程之后这样做：

```
+ (NSString *) encryptString:(NSString *)plaintext withKey:(NSString *)key 
{    
    // Convert string-to-be-encrypted to Data
    NSData *inData = [Miscellaneous utf8string2data:plaintext];
    // Encrypt, Encode, Return
    return [[self encryptData:inData withKey:key] base64EncodedString];
} 
```

但是，我感觉内存泄漏的实际点在方法调用的方法中

> base64EncodedStringWithWrapWidth

确切的行是：

```
outputBytes = realloc(outputBytes, outputLength);
    NSString *result = [[NSString alloc] initWithBytesNoCopy:outputBytes length:outputLength encoding:NSASCIIStringEncoding freeWhenDone:YES]; 
```

所以我想我的问题是：1）有没有人使用这个库观察到类似的行为 2）我是否可能通过使用分配不当的字符串来引发泄漏 3）任何人都知道如何解决它，或者我可以用另一个库来替换它?

谢谢！

编辑：我已将 Instruments 指出为泄漏代码的上述行更改为：

```
 outputBytes = realloc(outputBytes, outputLength);
 NSString *result = [[NSString alloc] initWithBytes:outputBytes length:outputLength encoding:NSASCIIStringEncoding];
 free(outputBytes); 
```

但是，我仍然从那条线上泄漏。目标 C 中的 malloc/realloc/free 是否存在问题？

编辑2：

```
Bytes Used  # Leaks     Symbol Name
    512 Bytes    5.2%   2       thread_start
    512 Bytes    5.2%   2        _pthread_start
    512 Bytes    5.2%   2         __NSThread__main__
    512 Bytes    5.2%   2          -[NSThread main]
    512 Bytes    5.2%   2           -[Sync get]
    512 Bytes    5.2%   2            -[Request DoRequest]
    512 Bytes    5.2%   2             -[Request encryptMessage:]
    512 Bytes    5.2%   2              +[AES256 encryptString:withKey:]
    512 Bytes    5.2%   2               -[NSData(Base64) base64EncodedString]
    512 Bytes    5.2%   2                -[NSData(Base64) base64EncodedStringWithWrapWidth:]
    512 Bytes    5.2%   2                 -[NSPlaceholderString initWithBytes:length:encoding:]
    512 Bytes    5.2%   2                  CFStringCreateWithBytes
    512 Bytes    5.2%   2                   __CFStringCreateImmutableFunnel3
    512 Bytes    5.2%   2                    _CFRuntimeCreateInstance
    512 Bytes    5.2%   2                     CFAllocatorAllocate
    512 Bytes    5.2%   2                      __CFAllocatorSystemAllocate 
```

我不知道它是否有助于确定这是否是错误警告，但是通过不过滤任何内容，罪魁祸首似乎是 CFAllocatorSystemAllocate：

```
+0x13   calll                          DYLD-STUB$$malloc_zone_malloc
+0x18   addl                           $8, %esp 
```

所以我开始对这是否真的是泄漏有所保留。但是，在模拟器和 iPad 上进行调试具有相同的结果。使用了 ARC，我试图复制对象而不是引用它们。

解决方案：我发现了泄漏，它是在使用错误类型的演员不正确地实施的方法中（愚蠢的我，我第一次没有看到这个）

```
return (__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(NULL,
                                                               (__bridge_retained CFStringRef)string,
                                                               NULL,
                                                               (CFStringRef)@"!*'\"();:@&=+$,/?%#[]% ",
                                                               CFStringConvertNSStringEncodingToEncoding(encoding)); 
```

bridge_retain 在这里将 ARC 增加了 1，因此它没有被释放，这就是我收到警告的原因。有趣的是，在我意识到出了什么问题之前，这是我查看的最后一段代码。谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:47:22.203

您的分析可能是正确的，泄漏来自`outputBytes`重新分配的地方。但是，请注意，泄漏的“真正”罪魁祸首是`outputBytes`最终没有释放。问题是为什么它没有被释放。

如果你看下一行，直接`outputBytes`输入`NSString`而不复制它指向的字符串的内容，所以我猜作者的意图是从那时起`NSString`获得内存块的所有权，它是释放它`outputBytes`的责任。当它的引用计数器变为零时，将释放这个块。代码中接下来的几行显示自动释放：`NSString``NSString``NSString`

```
#if !__has_feature(objc_arc)
[result autorelease];
#endif 
```

如果`NSString`是自动释放的，那么一切都应该没问题——所有权由自动释放池获取，使用它时您`NSString`不必自己拥有它。`release`上面的代码片段还说，`autorelease`只有在没有 ARC（自动引用计数）的情况下编译代码时才会调用它。所以，我认为代码是正确的，因此`outputBytes`可能泄露的唯一原因是因为您将返回的内容保留在`NSString`某处，然后忘记释放它。换句话说，泄漏的内存是在您正在使用的库中分配的，但它没有被释放的原因在于库之外，并且库本身不能对泄漏负责。

您的`encryptString`方法似乎采用编码字符串并将其传递给其调用者，而不是在任何地方更改其引用计数，因此您必须继续查看您正在调用的地方，`encryptString`看看是否有任何地方您不小心保留了字符串并且以后不发布。

# echo - 如何为给定的波形文件添加/删除回声/噪声

> ID：10897455
> 
> 赞同：0
> 
> 时间：2012-06-05T12:38:24.343
> 
> 标签：echo, add, wav, noise

在不知道噪音和回声的情况下，我问了这个问题。如何为给定的 WAV 文件删除/添加噪音/回声？请提供建议/指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:17:33.107

为了从信号中“去除”噪声，您必须拥有或重新创建要去除的噪声并从音频中减去该噪声。因此，这取决于您是否可以隔离或复制问题信号。

在某种程度上，可以从音频信号中清除“噪音”（嘶嘶声或其他恒定声音），并且有各种应用程序/插件试图做到这一点 - 成功取决于噪音与信号的一致性和幅度。

删除“回声”（不确定您的意思是什么，但我假设您的意思是“混响”，或录制声音的空间的声学特性）非常复杂，因为它并不一致，在大多数情况下是不可能的复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T01:19:53.650

去除噪音我相信，去除背景噪音，也称为环境噪音。通常有两个步骤可以去除音频中的噪音。

1.  创建背景噪声配置文件
2.  音频 - noise_profile = 干净的音频

我们可以通过两种方式完成上述操作。

**大胆：** 步骤

*   安装大胆的桌面应用程序 [![在此处输入图像描述](../Images/0d73ee7196d34170658bf9b417e04d3a.png)](https://i.stack.imgur.com/CjQaW.jpg)
*   打开并进入文件菜单， [![在此处输入图像描述](../Images/02f84f3034d6b50e6a3fbbf47e79ba01.png)](https://i.stack.imgur.com/TR5Fd.png) 如果你听文件，选择要去除噪音的音频，你可以实现静音清除噪音，并且该部分的频率很小。这需要从通话中删除。 [![在此处输入图像描述](../Images/592b607638fb75c6ba9073f73da5818b.png)](https://i.stack.imgur.com/3mCMF.png)
*   从音频中选择噪声部分 [![在此处输入图像描述](../Images/1a9845192fbdb5387e0b33b58c972cdd.png)](https://i.stack.imgur.com/sdNTl.png)
*   转到效果菜单>>然后选择降噪>>单击获取噪声配置文件 [![在此处输入图像描述](../Images/dcc47265983f021d636be13860c5f73b.png)](https://i.stack.imgur.com/amd9Q.png)
*   然后 ctrl + a 选择完整的音频以应用噪声配置文件以减少噪声
*   从效果菜单>>降噪>>单击确定将噪声配置文件应用于音频。您可以调整参数并测试哪个最好。如果你设置这么高，你可能会失去几个字。 [![在此处输入图像描述](../Images/3407d9f0e2320851afed493b5a04ed08.png)](https://i.stack.imgur.com/AWoKr.png) 现在你可以看到静音部分的噪音已经消失了。你可以通过听这些来验证。 [![在此处输入图像描述](../Images/de98df3af92e19584533488c5eb768ce.png)](https://i.stack.imgur.com/MW0ue.png)

**SOX：**步骤

*   安装 SOX
*   使用音频文件创建背景噪声配置文件

    /usr/bin/sox noise.wav -n noiseprof noise.prof

*   使用配置文件从 mp3 中去除噪音

    /usr/bin/sox noise.wav clean.wav noisered noise.prof 0.20

# c++ - c++ 文件解析器比 c# 慢

> ID：10897463
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:38:43.730
> 
> 标签：c++

我需要用 C++ 编写一个文件解析器。

这是我的代码：

```
std::string line;       
vector<string> slice;

while(getline(m_inputStream, line))  
{           
} 
```

我的文件很大，所以这个循环需要 12 秒。

我的 C# 代码是：

```
StreamReader sr = new StreamReader(fileName);
string strline = "";

while (!sr.EndOfStream)
{
    strline = sr.ReadLine();
} 
```

它需要 0.6 秒......我在 C++ 中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:45:17.273

首先，你在做什么`slice`？

可能是 C# 版本正在读入字符串然后将其丢弃 - 而 c# JIT 正在将其优化为无操作，因此所需的 0.6 秒只是初始化和退出。C++ 版本将生成代码来读取字符串，因此它确实在处理输入文件。如果要比较性能，请确保使用发布设置构建 C++，调试代码对性能毫无意义。

对字符串执行一些操作，您会看到不同的性能数据，并检查两个系统中的内存使用情况，C# 系统会占用更多的 RAM，直到 GC 启动。

# iphone - 在多个朋友的 Facebook 墙上发帖

> ID：10897464
> 
> 赞同：0
> 
> 时间：2012-06-05T12:38:47.307
> 
> 标签：iphone, facebook, ios4

我只用一个 facebook 墙贴申请。使用 FBConnect 对我很有用。但现在我想通过一键点击一次将墙贴给多个朋友。是否可以在多个朋友墙上发帖？如果可能的话，建议我。

我的代码：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [NSString stringWithFormat:@"%@",[[arrData objectAtIndex:i] objectForKey:@"id"]], @"to",
                                   @"post on facebook", @"name",
                                   @"facebook wall post", @"description",
                                   @"http://m.facebook.com/apps/myapp", @"link",
                                   nil];

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] dialog:@"feed"
                      andParams:params
                    andDelegate:self]; 
```

请回复我。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:22:35.433

如果您正在使用提要对话框，那么您别无选择，只能为每个朋友打开一个对话框。

但是，您可以做的是请求`publish_stream`允许您在他或他的朋友墙上以登录用户身份发布的参数。
获得该权限后，您只需向 fb 发送一个请求，它就会被发布，而无需使用对话框，您可以发送任意数量的请求。

在 ios sdk 上，它是通过[Requests](http://developers.facebook.com/docs/reference/iossdk/request/)完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:58:01.437

If you already know how to post users wall then you can do this task using following approach, Or see [this](http://developers.facebook.com/tools/explorer) link for help

1.  Get Face book fiends id for all your friends.
2.  Save in array.
3.  Iterate loop array's length and post one by one on friends wall.

# nexus - 如何从 Nexus 下载工件文件夹（大量下载）？

> ID：10897467
> 
> 赞同：4
> 
> 时间：2012-06-05T12:38:57.973
> 
> 标签：nexus

我想将一组工件从一个 Nexus 移动到另一个（下载并稍后上传）。我只能一个一个下载工件，¿有没有办法下载整个文件夹？¿ 是否有任何其他类型的操作，如导出/导入？

谢谢！

编辑：

我可以访问用户文件夹中的 nexus 存储库 (sonatype-work\nexus\storage)。我从那里得到了所有的文物。我没有从网络客户端找到任何方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T20:11:14.990

Nexus 将工件以标准 Maven 2/3 存储库布局存储在磁盘上，因此您可以使用任何您喜欢的方式直接将工件从一个存储目录复制到另一个。

完成后，针对目标存储库安排修复索引任务，以便从 Web UI 搜索工件。请注意，您的构建将在您复制工件后立即工作，maven 构建不使用索引。

# java - 如何替换Java中第一次出现的字符串

> ID：10897470
> 
> 赞同：53
> 
> 时间：2012-06-05T12:39:12.420
> 
> 标签：java, string, replace

我想在下面替换第一次出现的字符串。

```
 String test = "see Comments, this is for some test, help us" 
```

**如果测试包含如下输入，则不应替换

1.  见评论，（末尾有空格）
2.  看评论，
3.  看评论**

我想得到如下输出，

```
 Output: this is for some test, help us 
```

提前致谢，

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-06-05T12:42:10.850

您可以使用[`replaceFirst(String regex, String replacement)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)字符串的方法。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-26T03:45:52.700

您应该使用已经过测试且记录良好的库来编写自己的代码。

```
org.apache.commons.lang3.
  StringUtils.replaceOnce("coast-to-coast", "coast", "") = "-to-coast" 
```

# Javadoc

*   [https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceOnce-java.lang.String-java.lang.String-java.lang.String-](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#replaceOnce-java.lang.String-java.lang.String-java.lang.String-)

甚至还有一个不区分大小写的版本（这很好）。

# 马文

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.7</version>
</dependency> 
```

# 学分

我的答案是：[https ://stackoverflow.com/a/10861856/714112](https://stackoverflow.com/a/10861856/714112)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2017-04-16T11:18:30.377

您可以使用以下语句将第一次出现的文字字符串替换为另一个文字字符串：

```
String result = input.replaceFirst(Pattern.quote(search), Matcher.quoteReplacement(replace)); 
```

但是，这在后台做了很多工作，而用于替换文字字符串的专用函数不需要这些工作。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-05T12:41:00.040

使用[`substring(int beginIndex)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)：

```
String test = "see Comments, this is for some test, help us";
String newString = test.substring(test.indexOf(",") + 2);
System.out.println(newString); 
```

**输出：**

> 这是一些测试，帮助我们

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-04-25T15:59:13.047

您可以使用以下方法。

```
public static String replaceFirstOccurrenceOfString(String inputString, String stringToReplace,
        String stringToReplaceWith) {

    int length = stringToReplace.length();
    int inputLength = inputString.length();

    int startingIndexofTheStringToReplace = inputString.indexOf(stringToReplace);

    String finalString = inputString.substring(0, startingIndexofTheStringToReplace) + stringToReplaceWith
            + inputString.substring(startingIndexofTheStringToReplace + length, inputLength);

    return finalString;

} 
```

以下[链接](http://self-learning-java-tutorial.blogspot.in/2017/04/replace-first-occurrence-of-string-in.html)提供了使用带和不带正则表达式替换第一次出现的字符串的示例。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-14T19:43:37.583

使用 String replaceFirst 将分隔符的第一个实例交换为唯一的：

```
String input = "this=that=theother"
String[] arr = input.replaceFirst("=", "==").split('==',-1);
String key = arr[0];
String value = arr[1];
System.out.println(key + " = " + value); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-10-02T11:24:49.587

您也可以使用此方法；

```
public static String replaceFirstOccurance(String str, String chr, String replacement){
    String[] temp = str.split(chr, 2);
    return temp[0] + replacement + temp[1];
} 
```

# php - CJUIDatePicker 与 CGridView 不起作用

> ID：10897472
> 
> 赞同：3
> 
> 时间：2012-06-05T12:39:28.467
> 
> 标签：php, yii

我试图在 CGridView 中包含一个 Datepicker，如下所示，datepicker 小部件在网格视图中使用。

```
this->widget('zii.widgets.grid.CGridView', array(
'id'=>'order-grid',
'dataProvider'=>$model->search(),
'filter'=>$model,
'columns'=>array(
    'order_id',
    'customer.address.firstname',
    'customer.address.lastname',
    /*array('name' => 'ordering_date',
        'value' => 'date("M j, Y", $data->ordering_date)'),
    */  

    array('name'=>'ordering_date',
                    'value'=>'$data->ordering_date',     
                    'filter'=>$this->widget('zii.widgets.jui.CJuiDatePicker', array(
                                                    'model'=>$model,
                                                    'attribute'=>'ordering_date',
                                                    'options'=>array(
                                                            'showButtonPanel'=>true,
                                                            'changeYear'=>true,
                                                            )
                                                    ),
                                                    true),
                    'htmlOptions'=>array('width'=>'80','style'=>'text-align:center'),
            ),             
    array(
        'class'=>'CButtonColumn', 
        'template' => '{view} {rollback} {receive}{pack} {dispatch}{delivered}',
        'htmlOptions'=>array('width'=>'250px'),

        'buttons'=>array(
            'receive'=>array(
                'id'=>'receive',
                'name'=>'receive',
                'url'=>'$this->grid->controller->createUrl("/shop/order/admin&received=true", array("id"=>$data->order_id,"asDialog"=>1,"gridId"=>$this->grid->id))',
                'type'=>'submit',
                'imageUrl'=>'/mdg/images/Receive1.png',
                'visible'=>'($data->status=="pending")?true:false;'
             ),
             'pack'=>array(
                'id'=>'pack',
                'name'=>'pack',
                'type'=>'submit',
                'url'=>'$this->grid->controller->createUrl("/shop/order/admin&packed=true", array("id"=>$data->order_id,"asDialog"=>1,"gridId"=>$this->grid->id))',
                'click'=>'',
                'imageUrl'=>'/mdg/images/pack1.png',
                'visible'=>'($data->status=="received")?true:false;'
             ),
             'dispatch'=>array(
                'id'=>'dispatch',
                'name'=>'dispatch',
                'url'=>'$this->grid->controller->createUrl("/shop/order/admin&dispatched=true", array("id"=>$data->order_id,"asDialog"=>1,"gridId"=>$this->grid->id))',
                'click'=>'',
                'imageUrl'=>'/mdg/images/dispatch.png',
                'visible'=>'($data->status=="packed")?true:false;'
             ),
             'delivered'=>array(
                'id'=>'delivered',
                'name'=>'delivered',
                'url'=>'',
                'click'=>'',
                'imageUrl'=>'/mdg/images/delivered1.png',
                'visible'=>'($data->status=="dispatched")?true:false;'
             ),
             'rollback'=>array(
                'id'=>'rollback',
                'name'=>'rollback',
                'url'=>'$this->grid->controller->createUrl("/shop/order/admin&rollback=true", array("id"=>$data->order_id,"asDialog"=>1,"gridId"=>$this->grid->id))',
                'click'=>'',
                'imageUrl'=>'/mdg/images/rollback.jpg',
                'visible'=>'($data->status=="pending")?false:true;'
             ),
        ),
    ),

'status',

),
'afterAjaxUpdate'=>'function(){
                                    jQuery("#'.CHtml::activeId($model, 'ordering_date').'").datepicker({showButtonPanel:true, changeYear:true});
                            }', 
```

)); ?>

此代码取自 yiiframework 论坛中给出的建议。但它什么也没做。

知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:54:03.253

在这种情况下，我会将日期选择器放在`_search`视图中。如果您使用 Gii 生成您的 CRUD，它应该已经存在，可从`admin`视图中获得：

`<?php echo CHtml::link('Advanced Search','#',array('class'=>'search-button')); ?> <div class="search-form" style="display:none">
<?php $this->renderPartial('_search',array( 'model'=>$model, )); ?> </div><!-- search-form -->`

# sql-server - 复杂的 SQL Server 数据库查询

> ID：10897473
> 
> 赞同：0
> 
> 时间：2012-06-05T12:39:30.713
> 
> 标签：sql-server

以前我只有一张桌子（我有更多，ofc，但这些是我正在努力解决的问题），这就是`UNIVERSITY`桌子。

我现在想再创建两个表：`STATE`和`CITY`。

### 表属性

```
UNIVERSITY: ID, NAME, SHORTNAME, FK_STATE, FK_CITY

STATE: ID, NAME, SHORTNAME

CITY : ID, NAME 
```

### 问题

我正在解析大学（包括这所大学所在的城市和州）的 Excel 表。一旦我把所有这些信息都记在心里，最难的部分就来了。

我如何：

> 在数据库中插入所有大学，包括其州和城市，但查询 STATE 和 CITY 数据库的 ID，以正确设置大学的 FK。

示例：
一旦我添加一所名为“PUC-RIO”的大学，它就会显示在“RIO DE JANEIRO”、（城市）“RIO DE JANEIRO”（州）中。添加大学本身不是问题，但是，如何将其外键更新为州和城市表上的“RIO DE JANEIRO”键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:11:11.733

在声明外键关系时，您会看到一个对话框，您可以在其中指定关系的表

![更新规则](../Images/2af59594d8d4b84bb95bfcd4d322f157.png)

默认情况下，更新规则设置为无操作。根据 msdn 文章，您可以在为表指定外键时更改几个选项

```
 Update Rule 
```

指定如果用户尝试使用外键关系中涉及的数据更新行时会发生什么：

1.**无操作**错误消息告诉用户不允许更新并且回滚更新。

2.  **级联**更新包含外键关系中涉及的数据的所有行。如果表将包含在使用逻辑记录的合并发布中，请不要指定 CASCADE。有关逻辑记录的更多信息，

3.  **Set Null**如果表的所有外键列都可以接受空值，则将该值设置为空。仅适用于 SQL Server 2005。

4.  **设置默认** 值 如果表的所有外键列都定义了默认值，则将该值设置为为列定义的默认值。仅适用于 SQL Server 2005。

您可以探索这些可能帮助您解决问题的选项。请参考[MSDN 文章文档](http://msdn.microsoft.com/en-us/library/ms177288%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:13:45.847

您必须为每所大学执行此操作：

```
INSERT INTO UNIVERSITY (..., FK_CITY, FK_STATE)
VALUES (..., (SELECT ID FROM CITY WHERE Name = @city), (SELECT ID FROM STATE WHERE Name = @state)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:14:13.390

不幸的是，您不能给出上面的表定义，至少不能以自动方式给出。University 表中需要有一些东西将其与 City 和 State 表联系起来。如果我理解正确，您需要在 University 表中临时包含 CityName 和 StateName 列，然后您可以在名称字段之间进行连接：

```
UPDATE U
    SET FK_CITY = C.ID
FROM UNIVERSITY AS U
    JOIN CITY AS C
        ON U.CITYNAME = C.NAME 
```

否则，您需要查找 FK 并在添加新大学时手动添加它们。此外，在 City 表中包含 FK_State 可能更容易，这样您只需将城市的 ID 添加到您的大学表中。

# opencv - FlannBasedMatcher 使用哪个距离函数以及如何更改它？

> ID：10897475
> 
> 赞同：4
> 
> 时间：2012-06-05T12:39:32.747
> 
> 标签：opencv, flann

openCVs flannBasedMatcher 使用哪个距离函数，是否可以更改默认值？在 Muja 和 Lowe 的原始 flann 的用户手册中，有一些不同的距离类型（flann_distance_t），我没有在 opencv 中看到更改它们的方法：-/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T21:08:33.937

这在 openCV 的代码中记录得很差，但是在这两个函数中可以找到 flannBasedMatcher 的默认设置

flann::SearchParams(); //32 次检查，0，sorted=true flann::KDTreeIndexParams(); //使用4个随机KD树

距离函数默认为 FLANN_DIST_L2。

我认为这段代码解释了为什么你还不能改变它 `printf("[WARNING] You are using cv::flann::Index (or cv::flann::GenericIndex) and have also changed the distance using cvflann::set_distance_type. This is no longer working as expected cv::flann::Index always uses L2). You should create the index templated on the distance, for example for L1 distance use: GenericIndex< L1<float> > \n"); \`

# c++ - 通过 .net 互操作类调试 COM C++ 代码

> ID：10897478
> 
> 赞同：3
> 
> 时间：2012-06-05T12:39:49.477
> 
> 标签：c++, .net, debugging, com, tlbimp

是否可以通过 tlbimp.exe 从 C++ 程序创建的 .net 互操作层进入正在使用的 COM C++ 代码。我看到 COM C++ dll 的符号已加载到 Debug->Modules 窗口中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T12:42:56.833

这是可能的，但您需要在项目属性中将 Visual Studio 调试器设置为混合模式。这位于`Project properties->Configuration Properties->Debugging->Debugger Type`

# javascript - Dojo build 1.7 内置包不起作用

> ID：10897480
> 
> 赞同：4
> 
> 时间：2012-06-05T12:39:52.257
> 
> 标签：javascript, build, dojo

我刚开始构建我的项目，我遇到了一些无法理解为什么会发生的错误。

您可以在下面看到`my app.profile.js`文件的内容。我从命令提示符执行 `"build profile=../../app.profile.js -r"`此行，并且在该过程完成后我没有收到任何错误。我的问题是，如果我将这些包的发布（构建）版本复制到未构建版本存在的地方，我会收到太多诸如“ `Error: multipleDefine`”之类的 javascript 错误。即使我只复制 dojo、dojox 和 dijit 文件夹，同样的错误也会不断发生。

当我查看两个 js 文件的构建和未构建之间的差异时（例如 dojo/Deferred），我意识到的唯一区别是：

```
//built 
define("dojo/Deferred", [ 
        "./_base/lang", 
        "./promise/CancelError", 
        "./promise/Promise" 
], function( 
```

* * *

```
define([ 
        "./_base/lang", 
        "./promise/CancelError", 
        "./promise/Promise" 
], function( 
```

所以一开始我有点卡住了。我想尽快尝试使用层来减少 http 请求，但我需要一些关于我提到的情况的帮助。任何帮助将不胜感激，谢谢。

app.profile.js：

```
var profile = { 
    basePath: "..", 
    layerOptimize: "shrinksafe.keepLines", 
    optimize: "shrinksafe", 
    releaseDir: "./release", 
    hasReport: true, 

    packages: [ 
        { 
            name: "dojo", 
            location: "./dojo" 
        }, 

        { 
            name: "dijit", 
            location: "./dijit" 
        }, 

        { 
            name: "app", 
            location: "./app" 
        }, 
        { 
            name: "dtk", 
            location: "./dtk" 
        }, 
        { 
            name: "dojox", 
            location: "./dojox" 
        } 
    ], 

    layers: { 
        "app/layers/core": { 
            include: [ 
                        "dojo/_base/declare", 
                        "dtk/core/ILifeCycle", 
                        "dtk/core/AppConfig", 
                        "dtk/core/TopicContext", 
                        "dtk/core/NavigationContext", 
                        "dojo/require", 
                        "dojo/_base/Deferred", 
                  "dojo/DeferredList", 
                        "dojo/_base/lang" 
            ] 
        }, 
        "app/layers/appcontext": { 
            include: [ 
                "dtk/core/AppContext" 
            ], 
            exclude: [ 
                "app/layers/core" 
            ] 

        } 

    } 
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T09:59:53.810

Dojo 构建器将为每个模块定义添加一个模块标识符，除非您告诉它不要这样做。这会产生*multipleDefine 错误*。

从[构建器文档](http://livedocs.dojotoolkit.org/releasenotes/1.7)中：

> **insertAbsMids（默认 = 未定义）**
> 
> *   **[truthy]**使转换确保每个 AMD 定义应用程序都包含一个模块标识符参数。
> *   **[falsy]**转换对定义应用程序中的模块标识符参数没有任何作用。特别是，虚假值不会导致转换删除源代码中存在的模块标识符参数。

***在我将insertAbsMids*** *:false*添加到我的个人资料之前，我遇到了完全相同的问题。

例如：

```
var profile = {
    basePath: "./",
    releaseDir: "release",
    action: "release",

    layerOptimize: "shrinksafe",
    optimize: "shrinksafe",
    cssOptimize: "comments",
    mini: false,
    insertAbsMids: false,

    packages: [
        { name: "dijit", location :"dijit" },
        { name: "dojox", location :"dojox" },
        { name: "dojo", location :"dojo" }
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T01:49:41.363

如果您的问题出在 AMD 模块中创建的 id 定义（id，[deps]，factory）.. 我遇到了类似的问题，我不得不手动删除压缩文件上的所有 id：

```
//built 
define([ 
        "./_base/lang", 
        "./promise/CancelError", 
        "./promise/Promise" 
], function() 
```

或者，我不得不使用 id 来要求模块。

例如，我需要一个模块：

```
require(["app/Dialog"]) 
```

这与添加的 id 不同。

```
require(["demo/app/Dialog"]) 
```

这是我让它工作的唯一方法。其他任何人都知道如何删除 id 或我们应该始终拥有 id 的原因吗？不确定这是否与您的问题相关，但因为您显示了差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T14:46:37.353

*这将构建一个层，除了在 discardLayer 中提到的组件之外*，还需要创建 dojox.image.Gallery 所需的所有模块。

```
 layers: [ {
                    name: "../dojox/discardLayer.js",
                    discard: true,
                    dependencies: [
                            "dojox.image.Gallery",
                            "dojox.image.SlideShow",
                            "dojox.image.ThumbnailPicker"
                    ]
            },{
                    name: "../drops/layer.js",
                    layerDependencies:  [ "../dojox/discardLayer.js" ],
                    dependencies: [
                            "dojox.image.Gallery"
                    ] 
```

尝试而不是`exclude`，使用`layerDependencies`密钥 - 我认为排除在您的 dojo_source 树中而不是在 dojo_release 树中查找 app/layers/core。所以在构建时排除未知组件。

上面的示例是我曾经能够覆盖其他地方的 3 个废弃组件的东西，但是它不适合您的需要。

您需要为您的**核心层设置****不**设置，而只需将其设置为依赖项（这将排除所有已构建的层的所有依赖项）。`discard`

 **然后，根据您使用的 dojo 版本 - 您应该调用`dojo.require("layers.core"); dojo.require("layers.appcontext")`或`require(["layers/core", "layers/appcontext"], function() { });`断言这些层存在。

在使用依赖项中的任何内容之前，请使用另一个 require 调用来引入需求，例如`dojo.require("dijit.form.Button"); new dijit.form.Button({ ... });`. 该层会将组件填充到缓存的哈希（dojo.cache）中，并确保它们被完全声明，拉入需求。**

# macos - OS X Lion 上的 irb readline 和 rvm ruby 1.9.3

> ID：10897482
> 
> 赞同：0
> 
> 时间：2012-06-05T12:39:53.947
> 
> 标签：macos, readline, irb

我正在使用 os x Lion 并使用自制软件成功安装和链接 readine。此外，我使用带有 readline 支持的 rvm 成功编译了 ruby​​ 1.9.3。

```
rvm install 1.9.3 --with-readline-dir=$rvm_path/usr 
```

但是，当我启动 irb 并尝试输入重音字符（例如使用 option + e）时，没有字符出现。

我究竟做错了什么？或者如何在 IRB（或 PRY）中获得重音字符？

# java - Javamail 不发送邮件

> ID：10897486
> 
> 赞同：0
> 
> 时间：2012-06-05T12:40:15.683
> 
> 标签：java, jakarta-mail

我正在开发一个 Java 应用程序，我正在使用 Javamail 发送邮件。我的代码如下：

```
Properties props = new Properties();
props.put("mail.smtp.host", "diana.cartif.es");
props.put("mail.smtp.socketFactory.port", "465");
props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
props.put("mail.smtp.auth", "true");
props.put("mail.smtp.port", "465");

Session session = Session.getDefaultInstance(props,
    new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("alerts","pass");
        }
    });

Message message = new MimeMessage(session);
message.setFrom(new InternetAddress("alerts@cartif.es"));
message.setRecipients(Message.RecipientType.TO,InternetAddress.parse("campus21@cartif.es"));
message.setSubject("Testing Subject");
message.setText("Dear Mail Crawler," +"\n\n No spam to my email, please!");

Transport.send(message); 
```

但是，当我执行此代码时，它会引发异常：

```
javax.mail.MessagingException: Could not connect to SMTP host: diana.cartif.es, port: 465, response: -1
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1960)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:642)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at com.cartif.data.MainConnection.getFTPConnection(MainConnection.java:106)
    at com.cartif.main.Main.connectToServer(Main.java:72)
    at com.cartif.main.Main.main(Main.java:60) 
```

要连接的数据是正确的，因为我在我的邮件服务器中检查了它。有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:49:28.847

尝试可能是这样的：

```
 String  d_email = "email",
             d_password = "pass";

    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.server");
    props.put("mail.smtp.user", d_email);
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", port);

    Authenticator auth = new SMTPAuthenticator();
    Session session = Session.getInstance(props, auth); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:37:05.527

摆脱 socketFactory* 属性。在大多数情况下，它们不再需要并添加

```
props.put("mail.smtp.ssl.enable", true); 
```

尝试调用：

```
session.setDebug(true); 
```

看看你是否有任何帮助。

如果您使用的是自签名证书，请查看：[http ://www.oracle.com/technetwork/java/javamail145sslnotes-1562622.html](http://www.oracle.com/technetwork/java/javamail145sslnotes-1562622.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T07:09:53.837

最后，我用以下属性解决了这个问题：

```
props.setProperty("mail.smtp.host", "smpt.host");
props.setProperty("mail.smtp.starttls.enable", "false");
props.setProperty("mail.smtp.port","25");
props.setProperty("mail.smtp.user", "alerts");
props.setProperty("mail.smtp.auth", "true");

Session session = Session.getDefaultInstance(props);
session.setDebug(true);

MimeMessage message = new MimeMessage(session);
message.setFrom(new InternetAddress("mail1@mail.es"));
message.addRecipient(Message.RecipientType.TO, new InternetAddress("mail2@mail.es"));
message.setSubject("Subject");
message.setText("Text");

Transport t = session.getTransport("smtp");
t.connect("user","pass");
t.sendMessage(message,message.getAllRecipients());
t.close(); 
```

# iphone - 动态更改导航控制器的 rootviewcontroller

> ID：10897489
> 
> 赞同：0
> 
> 时间：2012-06-05T12:40:29.353
> 
> 标签：iphone, ios, xcode

我正在尝试更改in `RootViewController`。 但我不知道我该怎么做。`NavigationController``didFinishLaunchingWithOptions`

我也浏览了这个链接：
[http ://starterstep.wordpress.com/2009/03/05/changeing-a-uinavigationcontroller%E2%80%99s-root-view-controller/](http://starterstep.wordpress.com/2009/03/05/changing-a-uinavigationcontroller%E2%80%99s-root-view-controller/)

这是我的代码`didFinishLaunchingWithOptions`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController *rootController=[[HomePageController alloc] initWithNibName:@"HomePageController" bundle:nil];
    navigationController=[[UINavigationController alloc] initWithRootViewController:rootController];

//    presentation=[[PresentationController alloc]initWithNibName:@"PresentationController" bundle:nil];
//    
//    navigationController=[[UINavigationController alloc]initWithRootViewController:presentation];
//    
//    presentationList=[[PresentationListController alloc]initWithNibName:@"PresentationListController" bundle:nil];
//    
//    UINavigationController *listnavigation = [[UINavigationController alloc] initWithRootViewController:presentationList];
//    
//    revealer=[[ZUUIRevealController alloc]initWithFrontViewController:navigationController rearViewController:listnavigation];

    [self.window addSubview:navigationController.view];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

现在我评论然后运行应用程序来改变`rootviewcontroller`. 然而，这不是实用的方法。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T12:42:27.430

而不是这个：

```
[self.window addSubview:navigationController.view]; 
```

把这个：

```
self.window.rootViewController = navigationController; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:06:53.060

导航控制器不关心它的根视图控制器是什么类型的视图控制器，只要它是 UIViewController 的子类即可。所以你可以像这样使用指向 UIViewController 的指针：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIViewController *rootController = nil;
    if (iWantHomePageController)
    {
        rootController = [[HomePageController alloc] initWithNibName:@"HomePageController" bundle:nil];
    }
    else if (iWantPresentationController)
    {
        rootController = [[PresentationController alloc] initWithNibName:@"PresentationController" bundle:nil];
    }
    else if (iWantPresentationListController)
    {
        rootController = [[PresentationListController alloc] initWithNibName:@"PresentationListController" bundle:nil];
    }

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = navController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T00:38:30.477

这对我来说真的很好：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

/*
    both *navigationController and *viewController are declared 
    as properties in the .h file 
*/
[self setViewController:[[[RootViewController alloc] initWithNibName:@"RootViewController" bundle:nil] autorelease]];
[self setNavigationController:[[[UINavigationController alloc] initWithRootViewController:self.viewController]autorelease]];
[self.window setRootViewController:[self navigationController]];
[self.window makeKeyAndVisible]; 
```

# jsf - 如何设置 h:graphicImage 的 alt 属性？

> ID：10897493
> 
> 赞同：0
> 
> 时间：2012-06-05T12:40:43.823
> 
> 标签：jsf, jsf-2, image, alt

我在我的 JSF 应用程序中定义了一个图像：

```
<h:graphicImage library="myPath" name="myImg"/> 
```

结果我的HTML输出：

```
<img src="bla-bla-bla" alt="" /> 
```

它工作正常，但我有一个问题。在这种情况下如何设置`alt`HTML 标签的属性`img`？例如

```
<h:graphicImage library="myPath" name="myImg" alt="myText"/> 
```

不工作...

# asp.net - 如何使用linq在数据表中查找列的最大长度

> ID：10897494
> 
> 赞同：3
> 
> 时间：2012-06-05T12:40:52.653
> 
> 标签：asp.net

如何在 vb.net 中使用 linq 在数据表中查找列的最大长度我想要 col1 中的最大长度 5.如何使用 linq 实现这一点

```
 Dim DT as new datatable
    datatable.columns.add("Col1")
    datatable.rows(0).item("Col1")="123"`val inserted
    datatable.rows(1).item("Col1")="1234"`val inserted
    datatable.rows(2).item("Col1")="12345`val inserted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T10:09:08.123

试试这个，它是 VB.Net 之一。

```
Dim datatable As New DataTable()
datatable.Columns.Add("Col1")
datatable.Rows.Add("123")
datatable.Rows.Add("123456")
datatable.Rows.Add("12345")
datatable.Rows.Add("Z")
datatable.Rows.Add("ABCD")
datatable.Rows.Add("Cd")
datatable.Rows.Add("Z")
datatable.Rows.Add("Za123456Akwef")`

datatable.AsEnumerable().Select(Function(r) r.Field(Of String)("Col1").Length).Max 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T10:50:39.540

尝试这个：

```
Dim DT as new DataTable
DT.columns.add("Col1")
DT.rows(0).item("Col1")="123"
DT.rows(1).item("Col1")="1234"
DT.rows(2).item("Col1")="12345" 
Dim maxlength As Integer = DT.AsEnumerable.Max(Function() x("Col1").ToString.Length) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:39:32.113

试试这个，它是 C# 之一。

```
DataTable datatable = new DataTable();
datatable.Columns.Add("Col1");
datatable.Rows.Add("123");  
datatable.Rows.Add("123456");
datatable.Rows.Add("12345");
int maxlength = 0;
datatable.Rows.OfType<DataRow>().ToList()
    .ForEach(ss => { maxlength = Convert.ToString(ss.ItemArray[0]).Length > maxlength ? 
        Convert.ToString(ss.ItemArray[0]).Length : maxlength; }); 
```

结果是 6

Vb.Net 代码片段（已翻译，不太确定语法）。

```
Dim datatable As New DataTable()
datatable.Columns.Add("Col1")
datatable.Rows.Add("123")
datatable.Rows.Add("123456")
datatable.Rows.Add("12345")
Dim maxlength As Integer = 0
datatable.Rows.OfType(Of DataRow)().ToList().ForEach(Function(ss) 
maxlength = If(Convert.ToString(ss.ItemArray(0)).Length > maxlength, Convert.ToString(ss.ItemArray(0)).Length, maxlength)

End Function) 
```

希望这有帮助..

# android - 来自非活动类的意图

> ID：10897497
> 
> 赞同：1
> 
> 时间：2012-06-05T12:40:54.883
> 
> 标签：android, android-intent, android-activity

在我的 android 应用程序中，我正在使用一个库，其中有一个非活动类，我想从那里开始，如何做到这一点

我正在使用这个库

[https://github.com/galex/android-mapviewballoons](https://github.com/galex/android-mapviewballoons)

这是我想要的代码片段，这个函数在库中被调用

```
 protected boolean onBalloonTap(int index, OverlayItem item) {
    Toast.makeText(c, "clicked pin is :  " + item.getTitle(),
            Toast.LENGTH_SHORT).show();

    Intent intent = new Intent(firstActivity.class,secondActivity.class);
    startActivity(intent);
    //there is no startActivity method here
    return true;
} 
```

这是日志猫

```
06-05 18:06:19.350: D/dalvikvm(370): GC_EXTERNAL_ALLOC freed 72K, 49% free 2790K/5379K, external 2064K/2137K, paused 74ms
06-05 18:06:19.709: D/dalvikvm(370): GC_EXTERNAL_ALLOC freed 34K, 47% free 2885K/5379K, external 2300K/2686K, paused 50ms
06-05 18:06:20.240: D/dalvikvm(370): GC_EXTERNAL_ALLOC freed 6K, 47% free 2884K/5379K, external 3730K/4658K, paused 72ms
06-05 18:06:42.919: D/PhoneWindow(370): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@40538220 has no id.
06-05 18:06:44.569: D/dalvikvm(370): GC_EXTERNAL_ALLOC freed 54K, 46% free 3022K/5511K, external 5867K/6444K, paused 47ms
06-05 18:06:47.969: D/dalvikvm(370): GC_CONCURRENT freed 831K, 49% free 3472K/6727K, external 7393K/8076K, paused 5ms+7ms
06-05 18:06:48.829: I/MapActivity(370): Handling network change notification:CONNECTED
06-05 18:06:48.829: E/MapActivity(370): Couldn't get connection factory client
06-05 18:06:49.220: D/dalvikvm(370): GC_CONCURRENT freed 1748K, 53% free 3827K/8007K, external 7777K/8076K, paused 6ms+7ms
06-05 18:06:51.919: D/AndroidRuntime(370): Shutting down VM
06-05 18:06:51.919: W/dalvikvm(370): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-05 18:06:51.949: E/AndroidRuntime(370): FATAL EXCEPTION: main
06-05 18:06:51.949: E/AndroidRuntime(370): android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.app.ContextImpl.startActivity(ContextImpl.java:624)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.content.ContextWrapper.startActivity(ContextWrapper.java:258)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.project.ennis.Maps.SimpleItemizedOverlay.onBalloonTap(SimpleItemizedOverlay.java:80)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay$2.onTouch(BalloonItemizedOverlay.java:231)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.View.dispatchTouchEvent(View.java:3881)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:903)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:942)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1691)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1125)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.app.Activity.dispatchTouchEvent(Activity.java:2096)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1675)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2194)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1878)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.os.Looper.loop(Looper.java:130)
06-05 18:06:51.949: E/AndroidRuntime(370):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-05 18:06:51.949: E/AndroidRuntime(370):  at java.lang.reflect.Method.invokeNative(Native Method)
06-05 18:06:51.949: E/AndroidRuntime(370):  at java.lang.reflect.Method.invoke(Method.java:507)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-05 18:06:51.949: E/AndroidRuntime(370):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-05 18:06:51.949: E/AndroidRuntime(370):  at dalvik.system.NativeStart.main(Native Method)
06-05 18:06:53.749: I/Process(370): Sending signal. PID: 370 SIG: 9
06-05 18:06:55.140: D/dalvikvm(383): GC_EXTERNAL_ALLOC freed 55K, 49% free 2762K/5379K, external 2102K/2137K, paused 80ms 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:43:35.370

将[Context](http://developer.android.com/reference/android/content/Context.html)对象从您的 Activity 传递给非 Activity 类，

```
contextObj.startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:46:13.483

使用我认为您在该课程中有上下文.....

```
 Intent intent = new Intent(c,secondActivity.class);
  intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  //intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);//it you are already adding other
 c.startActivity(intent); 
```

正在使用

Toast.makeText(c, "点击的图钉是：" + item.getTitle(), Toast.LENGTH_SHORT).show();

# iphone - 访问/设置 iOS-Settings-App 的全局设置

> ID：10897498
> 
> 赞同：2
> 
> 时间：2012-06-05T12:40:57.333
> 
> 标签：iphone, objective-c, ios, ipad, ipod-touch

是否有可能以编程方式访问/更改（全局）设置，通过每个 iDevice 上的设置图标可访问的设置。

背景：我想对我的应用程序中的本地化设置进行一些更改。（不，我不打算将它发布到 App Store => 是的，它可以使用私有 API；））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:48:49.263

取决于你想改变什么。您可以使用 dateFormatter 的 setLocale 函数设置应用程序的区域格式，您可以在应用程序中将日期格式设置为 24 或 12 小时格式，无论设备中使用 setDateFormat 等设置的时间格式如何。您无法更改手机，但您可以让您的应用程序遵循您想要的设置。

# c# - foreach 循环中的匿名代表

> ID：10897500
> 
> 赞同：3
> 
> 时间：2012-06-05T12:41:04.087
> 
> 标签：c#, delegates, foreach, scope, anonymous-function

> **可能重复：**
> [关于 foreach 和 delegates 的问题](https://stackoverflow.com/questions/1600597/question-about-foreach-and-delegates)

我想知道这里发生了什么现象：

将 a`List<string>`转换为返回相同字符串的委托列表会出错。

当我直接使用输入列表`WrongConversion`返回的变量时，就会发生这种情况。`foreach`（每次返回 *列表中的最后一个字符串）*

在 中`CorrectConversion`，我首先分配一个局部变量并在委托中使用它。

这个任务起初似乎是多余的。

输入：

```
using System.Collections.Generic;
class Program
{
  delegate string StringReturner();

  static void Main(string[] args)
  {
    var list = new List<string> { "a", "b", "c" };
    Display(WrongConversion(list));
    Display(CorrectConversion(list));
    System.Console.ReadKey();
  }
  static List<StringReturner> WrongConversion(List<string> list)
  {
    var result = new List<StringReturner>();
    foreach (var s in list)
    {
      result.Add(() => { return s; });  // <========= s is always "c" ?
    }
    return result;
  }
  static List<StringReturner> CorrectConversion(List<string> list)
  {
    var result = new List<StringReturner>();
    foreach (var s in list)
    {
      var localString = s;              // <========= What happens here?
      result.Add(() => { return localString; });
    }
    return result;
  }
  private static void Display(List<StringReturner> list)
  {
    foreach (var stringReturner in list)
      System.Console.Write(stringReturner());
    System.Console.WriteLine();
  }
} 
```

输出：

```
ccc
abc 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-05T12:44:49.983

这是 C# 中的一个已知“错误”（我认为也是 VB.NET）。简单的答案是您创建的 localString 变量的范围在 foreach 内，因此每次迭代都使用它的一个新副本，但是在另一种情况下，您只需引用 s，最终会成为 c（在您打印之前）至少）。为了“解决”这类问题，我已经习惯了

```
foreach(var _s = ....) {
    var s = _s;
    /* code here that uses s */
} 
```

每次我都使用这样的代表。

# android - 在 Android 开发者控制台上重用扩展文件

> ID：10897501
> 
> 赞同：9
> 
> 时间：2012-06-05T12:41:05.720
> 
> 标签：android, reusability, expansion-files

在开发者控制台中更新 APK 时如何重复使用扩展文件？

当我上传一个更高版本代码的新apk时，我[无法选择](http://img6.imageshack.us/img6/8514/playconsoleissueblurr.png)以前使用的主扩展文件...

如果我用新的 apk 再次上传相同的扩展文件，它会被分配一个新的扩展版本，这不是预期的行为。

[APK 扩展文件](https://developer.android.com/google/play/expansion-files#Filename)文档：

> ...开发者控制台允许您通过新的 APK 重新使用上传的扩展文件，扩展文件的名称不会更改 - 它会保留您首次上传文件时应用的版本。

如何在开发者控制台上实现这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-12T23:32:32.180

我从 Google Play 开发者支持那里得到了答复。

> 您描述的行为是有意的。您只能重复使用与已发布的 APK 关联的 OBB。这两个 APK 都从未发布过，因此我们不提供重复使用他迄今为止上传的 OBB 的选项。

因此，我似乎无法在更新时测试我的应用程序的 obb 文件行为，而无需实际**发布**应用程序的先前版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T12:49:27.130

如果您`[main|patch].<expansion-version>.<package-name>.obb`通过 Google Downloader Activity 手动下载扩展文件时观察到扩展版本的名称格式需要相同。

有时您的扩展文件保持不变并且您只修改了apk，因此您无需使用新名称再次创建扩展文件，您必须保持版本代码相同并在Downloader Activity中映射相同的代码并重新启动它。

[http://developer.android.com/guide/market/expansion-files.html#Download](http://developer.android.com/guide/market/expansion-files.html#Download)

# opengl - 打开全屏 OpenGL 窗口

> ID：10897503
> 
> 赞同：7
> 
> 时间：2012-06-05T12:41:20.847
> 
> 标签：opengl, x11, nvidia, glfw

我正在尝试在 linux red-hat 上使用 GLFW 打开一个 OpenGL 全屏窗口。我有一个跨越两台显示器的桌面，总分辨率为 3840*1080。

我有两个问题： 1\. 窗口只在一台显示器上打开，最大窗口宽度为 1920（单个显示器的宽度）。2、窗口最大高度为1003（我认为是屏幕高度减去任务栏和顶栏高度）。

这是我用来打开窗口的代码：

```
if (glfwInit() == GL_FALSE)
    std::cout<< "Unable to initialize GLFW\n";
glfwOpenWindowHint(GLFW_STEREO, GL_FALSE);
if (glfwOpenWindow(3840,1080,8,8,8,0,24,0,GLFW_FULLSCREEN) == GL_FALSE)
    std::cout<< "Unable to open window\n";
int width, height;
glfwGetWindowSize(&width, &height);
std::cout << "width = " << width << " height = " << height << "\n"; 
```

输出：宽度 = 1920 高度 = 1003

编辑：我使用 xrandr 检查可用的屏幕模式并得到：

屏幕 0：最小 3840 x 1080，当前 3840 x 1080，最大 3840 x 1080 默认连接 3840x1080+0+0 0mm x 0mm 3840x1080 50.0*

EDIT2：我已更改代码以使用 X11 打开窗口

```
int doubleBufferAttributes[] = {
GLX_DRAWABLE_TYPE, GLX_WINDOW_BIT,
GLX_RENDER_TYPE,   GLX_RGBA_BIT,
GLX_DOUBLEBUFFER,  True,  /* Request a double-buffered color buffer with */
GLX_RED_SIZE,      1,     /* the maximum number of bits per component    */
GLX_GREEN_SIZE,    1, 
    GLX_BLUE_SIZE,     1,
    None
};

static Bool WaitForNotify( Display *dpy, XEvent *event, XPointer arg ) {
    return (event->type == MapNotify) && (event->xmap.window == (Window) arg);
}
int main( int argc, char *argv[] )
{
    Display              *dpy;
    Window                xWin;
    XEvent                event;
    XVisualInfo          *vInfo;
    XSetWindowAttributes  swa;
    GLXFBConfig          *fbConfigs;
    GLXContext            context;
    GLXWindow             glxWin;
    int                   swaMask;
    int                   numReturned;
    int                   swapFlag = True;

    /* Open a connection to the X server */

dpy = XOpenDisplay( NULL );
if ( dpy == NULL ) {
    printf( "Unable to open a connection to the X server\n" );
    exit( EXIT_FAILURE );
}

/* Request a suitable framebuffer configuration - try for a double 
** buffered configuration first */
fbConfigs = glXChooseFBConfig( dpy, DefaultScreen(dpy),
                               doubleBufferAttributes, &numReturned );

/* Create an X colormap and window with a visual matching the first
** returned framebuffer config */
vInfo = glXGetVisualFromFBConfig( dpy, fbConfigs[0] );

swa.border_pixel = 0;
swa.event_mask = StructureNotifyMask;
swa.colormap = XCreateColormap( dpy, RootWindow(dpy, vInfo->screen),
                                vInfo->visual, AllocNone );

swaMask = CWBorderPixel | CWColormap | CWEventMask;

xWin = XCreateWindow( dpy, RootWindow(dpy, vInfo->screen), 0, 0, 3840, 1080,
                      0, vInfo->depth, InputOutput, vInfo->visual,
                      swaMask, &swa );
XWindowAttributes attt;

XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "he = " << attt.height << " wi = " << attt.width << "\n";

/* Create a GLX context for OpenGL rendering */
context = glXCreateNewContext( dpy, fbConfigs[0], GLX_RGBA_TYPE,
             NULL, True );
XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "2he = " << attt.height << " wi = " << attt.width << "\n";

/* Create a GLX window to associate the frame buffer configuration
** with the created X window */
glxWin = glXCreateWindow( dpy, fbConfigs[0], xWin, NULL );
XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "3he = " << attt.height << " wi = " << attt.width << "\n";

/* Map the window to the screen, and wait for it to appear */
XMapWindow( dpy, xWin );
XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "4he = " << attt.height << " wi = " << attt.width << "\n";

XIfEvent( dpy, &event, WaitForNotify, (XPointer) xWin );
XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "5he = " << attt.height << " wi = " << attt.width << "\n";

/* Bind the GLX context to the Window */
glXMakeContextCurrent( dpy, glxWin, glxWin, context );
XGetWindowAttributes( dpy,xWin, &attt);
std::cout << "6he = " << attt.height << " wi = " << attt.width << "\n"; 
```

输出是：

```
he = 1080 wi = 3840
2he = 1080 wi = 3840
3he = 1080 wi = 3840
4he = 1080 wi = 3840
5he = 1003 wi = 1920
6he = 1003 wi = 1920 
```

似乎当窗口显示时，它的大小会缩小。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T15:43:19.527

不知道 GLFW，也许它有问题，但 X11 全屏窗口不能那样工作。任何值得一提的窗口管理器都会强制窗口适应（单个、非虚拟）屏幕。

您想完全绕过窗口管理器（使用`OverrideRedirect`窗口属性），或者要求您的 WM 配合（使用窗口属性`_NET_WM_STATE_FULLSCREEN`）。第一种方法有很多缺点，所以让我们使用第二种方法。以下程序将在您的显示器上显示一个窗口，然后将其切换到全屏模式：

```
#include <X11/X.h>
#include <X11/Xlib.h>
#include <strings.h>
#include <memory.h>
#include <stdlib.h>
#include <stdio.h>

int main ()
{
    Display* dis = XOpenDisplay(NULL);
    Window win = XCreateSimpleWindow(dis, RootWindow(dis, 0), 0, 0, 10, 10,
                                     0, BlackPixel (dis, 0), BlackPixel(dis, 0));

    Atom wm_state = XInternAtom(dis, "_NET_WM_STATE", False);
    Atom fullscreen = XInternAtom(dis, "_NET_WM_STATE_FULLSCREEN", False);

    XEvent xev;
    memset(&xev, 0, sizeof(xev));
    xev.type = ClientMessage;
    xev.xclient.window = win;
    xev.xclient.message_type = wm_state;
    xev.xclient.format = 32;
    xev.xclient.data.l[0] = 1;
    xev.xclient.data.l[1] = fullscreen;
    xev.xclient.data.l[2] = 0;

    XMapWindow(dis, win);

    XSendEvent (dis, DefaultRootWindow(dis), False,
                    SubstructureRedirectMask | SubstructureNotifyMask, &xev);

    XFlush(dis);
    /*Sleep 5 seconds before closing.*/
    sleep(5);
    return(0);

} 
```

您可能从一开始就为窗口使用真实的屏幕尺寸，以避免任何调整大小的动画效果。

我没有在多头系统上尝试这个，因为我没有，但在单个显示系统上它可以正常工作（覆盖面板，移除窗口装饰等）。请让我知道它是否适合您。

**更新**他们说要让多头工作，你需要使用`_NET_WM_FULLSCREEN_MONITORS`属性（见[这里](http://standards.freedesktop.org/wm-spec/wm-spec-latest.html#id2579022)）。它是一个由 4 个整数组成的数组，应该像这样设置：

```
 Atom fullmons = XInternAtom(dis, "_NET_WM_FULLSCREEN_MONITORS", False);
    XEvent xev;
    memset(&xev, 0, sizeof(xev));
    xev.type = ClientMessage;
    xev.xclient.window = win;
    xev.xclient.message_type = fullmons;
    xev.xclient.format = 32;
    xev.xclient.data.l[0] = 0; /* your topmost monitor number */
    xev.xclient.data.l[1] = 0; /* bottommost */
    xev.xclient.data.l[2] = 0; /* leftmost */
    xev.xclient.data.l[3] = 1; /* rightmost */
    xev.xclient.data.l[4] = 0; /* source indication */

    XSendEvent (dis, DefaultRootWindow(dis), False,
                    SubstructureRedirectMask | SubstructureNotifyMask, &xev); 
```

有了这个，您应该能够将全屏窗口设置为占用单个显示器、整个桌面或（对于超过 2 个显示器）介于两者之间的任何内容。

我没有检查这个，因为我没有多头系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-19T07:39:32.507

xcb版本：

```
 xcb_connection_t *xcbConnection = xcb_connect(":0", &screenp);
    xcb_intern_atom_cookie_t type = xcb_intern_atom(xcbConnection, false, strlen("_NET_WM_FULLSCREEN_MONITORS"), "_NET_WM_FULLSCREEN_MONITORS");
    xcb_intern_atom_reply_t *reply_st = xcb_intern_atom_reply(xcbConnection, type, NULL);

    xcb_client_message_event_t event;
    memset(&event, 0, sizeof(event));
    event.response_type = XCB_CLIENT_MESSAGE;
    event.type = reply_st->atom;
    event.window =  this->winId();
    event.format = 32;
    event.data.data32[0] =  0; // top
    event.data.data32[1] =  0; // bottom
    event.data.data32[2] =  0; // left
    event.data.data32[3] =  1; // right

    event.data.data32[4] = 1;
    uint32_t eventMask = XCB_EVENT_MASK_SUBSTRUCTURE_REDIRECT|XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY;
    xcb_send_event(xcbConnection, false, pScreen0->root, eventMask, reinterpret_cast<const char*>(&event));
    xcb_flush(xcbConnection); 
```

# sql - 如何在每个部门的所有最后发送测验中显示未参加者的姓名？

> ID：10897505
> 
> 赞同：0
> 
> 时间：2012-06-05T12:41:24.097
> 
> 标签：sql, sql-server-2008-r2

我正在开发一个基于网络的培训管理系统，该系统为用户提供简短的测验以更新他们的知识。无论如何，我有以下数据库设计：

```
Employee Table: Username, Name, DivisionCode
Divisions Table: SapCode, DivisionShortcut
Quiz Table: QuizID, Title, IsSent
Question Table: QuestionID, Question, QuizID...
UserQuiz Table: UserQuizID, QuizID, Username, Score. 
```

我能够提出一个查询，该查询仅在最后一次测验中显示所有部门中所有非参与者的姓名。我现在想要的是在已发送给用户参与的所有测验中显示非参与者的姓名。结果应按测验标题和 DivisionShortcut 分组列出。**那么该怎么做呢？**

我的查询：

```
SELECT d.DivisionShortcut, e.Name 
FROM employee e
 join Divisions d on (e.DivisionCode = d.SapCode)
 left join (select A.QuizID, a.Username 
            from UserQuiz a join 
                 (select max(QuizID) QuizID from dbo.Quiz where IsSent=1) b
                       on a.QuizId = b.QuizID ) c
                                 on e.Username = c.Username
                                 WHERE c.QuizID is null
                                 Order By d.DivisionShortcut 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:53:26.957

您可以使用`CROSS JOIN`获取员工和测验的所有组合，然后使用`NOT EXISTS`消除已完成的所有组合：

```
SELECT  *
FROM    Employee e
        INNER JOIN Divisions d
            ON e.DivisionCode = d.SapCode
        CROSS JOIN Quiz
WHERE   Quiz.IsSent = 1 
AND     NOT EXISTS
        (   SELECT  1
            FROM    UserQuiz uq
            WHERE   uq.QuizID = Quiz.QuizID
            AND     uq.UserName = e.UserName
        ) 
```

# iphone - 如何在不使用 iphone 中的 UIDatepicker 的情况下自定义 iphone 中的日历？

> ID：10897506
> 
> 赞同：0
> 
> 时间：2012-06-05T12:41:26.183
> 
> 标签：iphone, ios, uidatepicker

您好，我想自定义日历。日历看起来像月历。怎么可能做到这一点。任何人帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:47:19.783

可能这不是答案，但我可以建议你在我的项目中做了什么。
此日历 API 的外观与 iPhone 内置日历完全相同

您可以集成[github 上提供的 Kal 项目](https://github.com/klazuka/Kal)

那里已经给出了整合项目的步骤。

您也可以参考[这个项目](http://super-mak.blogspot.in/2011/06/how-to-create-calendar-in-iphone-and.html)，它非常简单，只有 2 个文件可以集成到项目中。

同样在[这个问题](https://stackoverflow.com/questions/10845688/nscalendar-find-saturday-and-sunday-of-current-month)中，您会找到禁用特定日期（如周末或特定日期）的步骤

# java - 字节码注入在哪里可能有用？

> ID：10897510
> 
> 赞同：1
> 
> 时间：2012-06-05T12:41:56.463
> 
> 标签：java, java-bytecode-asm

今年我打算写一篇软件工程硕士论文。我对 Java 中的字节码注入/操作很感兴趣。我想编写一些可能对 Java EE 开发人员有用的应用程序。不幸的是，我找不到任何可以使用字节码转换的真实用例。我考虑编写故障注入器或一些突变测试框架。遗憾的是，这样的项目已经存在，可能不符合论文要求（项目应该是创新的）。你还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T05:13:45.300

你有很多使用它的工具/框架，主要是使用注释处理器。只是我想到的那些：[AspectJ](http://www.eclipse.org/aspectj/)，[projectlombok](http://projectlombok.org)，......

没有注释，就意味着你想做一个可以应用于任何程序的工具。例如，记录所有方法进入/退出并测量所有方法执行时间的工具。

# java - 考虑运行时配置类型应用范围的最佳实践/最佳设计选择

> ID：10897515
> 
> 赞同：0
> 
> 时间：2012-06-05T12:42:20.767
> 
> 标签：java, design-patterns, wicket

我想考虑我的 web 应用程序（部署/开发）的配置类型，以在我的 web 应用程序中的许多模块的功能在实时和测试行为之间切换。

例如，有一些模块提供支付服务，我需要在 live 和 sandbox 之间切换 API 配置。我想根据 webapplications 配置类型来决定。例如提供如下方法：

```
public boolean isRuntimeConfigurationTypeDeployment() {
        return getConfigurationType().equals(RuntimeConfigurationType.DEPLOYMENT);
    } 
```

在我的应用程序类中，我可以通过任何检票口页面调用它。但是，与其将切换行为的责任留给检票口组件本身，不如集中管理这些决策。由于需要在许多不同的地方做出决定，我想知道设计这种架构的最佳实践是什么。

另一个实际示例：在管理前端中手动将订单提交到履行中心的按钮

```
public void onClick(AjaxRequestTarget target) {
                if(getShopAdminApplication().isRuntimeConfigurationTypeDeployment())
                    Export.fullfillment().send();
                else {
                    ExportMock.fullfillment().send();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:54:11.560

我会使用提供运行时模式的单一服务（dev、prod、uat 等）。以及根据模式执行不同类型 ioc 的另一个服务（弹簧配置）。我会避免按组件检查模式。ioc 应该在启动时完成，然后所有组件都应该完全相同，无论它是 prod 还是 test。只是尝试替换一些组件的实现进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T08:25:59.797

如果主要是切换服务，您可以使用 Google Guice（或其他一些依赖注入框架）来提供这些服务，并根据 Application.init() 中的当前运行时模式设置一个中心点来加载模块。这样你的代码就不会被样板文件乱扔，你也不会忘记这个样板文件......

# javascript - 谷歌地图动态 URL 生成

> ID：10897516
> 
> 赞同：0
> 
> 时间：2012-06-05T12:42:21.680
> 
> 标签：javascript, google-maps, url

我只有源坐标和目标坐标，我想在两者之间绘制一条路径。使用由地图网站生成的谷歌地图网址，我已经看到他们搜索并精确定位有名称的地方。因为我只想传递源和目标坐标，所以我不知道它是如何完成的。

示例 URL [https://maps.google.com/maps?saddr=Wall+Street,+New+York,+NY,+United+States&daddr=New+York,+NY&hl=en&sll=40.714353,-74.005973&sspn=0.312274 ,0.441513&geocode=FUUnbQIdPriW-ynxKrREPlrCiTEa7wMmAK6YDw%3BFXFAbQIdK8KW-yk7CD_TpU_CiTFi_nfhBo8LyA&oq=Wall&mra=ls&t=m&z=16](https://maps.google.com/maps?saddr=Wall+Street,+New+York,+NY,+United+States&daddr=New+York,+NY&hl=en&sll=40.714353,-74.005973&sspn=0.312274,0.441513&geocode=FUUnbQIdPriW-ynxKrREPlrCiTEa7wMmAK6YDw%3BFXFAbQIdK8KW-yk7CD_TpU_CiTFi_nfhBo8LyA&oq=Wall&mra=ls&t=m&z=16)

在这里，您可以看到仅使用一组坐标传递了地点名称。有人可以启发我如何将其映射到源坐标和目标坐标。因此

示例 URL [https://maps.google.com/maps?saddr=(SourceCoordinate)&daddr=(destinationCoordinates)&hl=en&TypeOfDirections=Walking](https://maps.google.com/maps?saddr=(SourceCoordinate)&daddr=(destinationCoordinates)&hl=en&TypeOfDirections=Walking)

最后一点是我仍然卡住的地方..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:50:44.543

这对我有用： [https ://maps.google.com/maps?saddr=40,-117&daddr=45,-114&hl=en](https://maps.google.com/maps?saddr=40,-117&daddr=45,-114&hl=en)

# php - 慢速 S3 -> EC2 传输。错误代码？

> ID：10897517
> 
> 赞同：4
> 
> 时间：2012-06-05T12:42:22.500
> 
> 标签：php, amazon-s3, amazon-ec2

我将此脚本与 PHP5-CLI 一起使用，将文件从 Amazon S3 下载到 EC2 实例，但速度相当慢（160 MB 需要 1 分钟，大约 2 MB/s）。假设至少 10 MB/s 应该是可能的。我在代码中做错了吗？

```
require 'aws-sdk/sdk.class.php';

$s3 = new AmazonS3(array(
        'key' => '********',
        'secret' => '******************'
));
$s3->get_object('mahbucket', 'filename.tar.gz', array('fileDownload' => 'downloaded.tar.gz')); 
```

存储桶在`eu-west-1`其中，实例在`eu-west-1a`

（[交叉发布到 AWS 论坛](https://forums.aws.amazon.com/thread.jspa?threadID=96221&tstart=0)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:55:57.543

您的脚本看起来不错，但不久前我遇到了类似的问题，我无法解决......</p>

我的新方法是使用[s3cmd](http://s3tools.org/s3cmd)在 S3 存储桶和我的 EC2 实例之间传输文件。您只需配置一次，然后就可以通过 PHP 触发它。它也更安全，因为您不必将 AWS 凭证存储在脚本中。

我认为速度还可以：

```
user@mothership:~/s3# s3cmd put test.bin s3://data.example.com/test.bin

test.bin -> s3://data.example.com/test.bin  [part 1 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.39 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 2 of 13, 15MB]
 15728640 of 15728640   100% in    0s    15.55 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 3 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.18 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 4 of 13, 15MB]
 15728640 of 15728640   100% in    0s    17.32 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 5 of 13, 15MB]
 15728640 of 15728640   100% in    0s    18.87 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 6 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.58 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 7 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.29 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 8 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.95 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 9 of 13, 15MB]
 15728640 of 15728640   100% in    0s    15.33 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 10 of 13, 15MB]
 15728640 of 15728640   100% in    0s    17.01 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 11 of 13, 15MB]
 15728640 of 15728640   100% in    0s    15.36 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 12 of 13, 15MB]
 15728640 of 15728640   100% in    0s    16.56 MB/s  done
test.bin -> s3://data.example.com/test.bin  [part 13 of 13, 10MB]
 11256320 of 11256320   100% in    0s    14.15 MB/s  done

user@mothership:~/s3# s3cmd get s3://data.example.com/test.bin test.bin.new
s3://data.example.com/test.bin -> test.bin.new  [1 of 1]
 200000000 of 200000000   100% in   11s    16.20 MB/s  done 
```

也许这篇文章也很有趣：[Amazon EC2 和 Amazon S3 中的网络性能](http://blog.rightscale.com/2007/10/28/network-performance-within-amazon-ec2-and-to-amazon-s3/)

# java - importNode 抛出异常 org.w3c.dom.DOMException

> ID：10897519
> 
> 赞同：1
> 
> 时间：2012-06-05T12:42:25.567
> 
> 标签：java, android, xml, nodes

我正在编写必须***将节点添加***到XML 文档中的给定***节点的函数。***

这是该功能的实现：

```
/**
 * Adds the node aNewChild to the end of the list of children of this node.
 * If the newChild is already in the tree, it is first removed.
 * @param aNewChild The node to add.If it is a DocumentFragment object,
 *                  the entire contents of the document fragment are moved
 *                  into the child list of this node
 * @return The node added or null.
 */
 public Node AddNode(Node aNode, Node aOldNode) {
    Log.i(TAG, "AddNode()" );

    if (aNode == null) {
        Log.e(TAG, "aNode is null!");
        return null;
    }

    if (aOldNode == null) {
        Log.e(TAG, "aOldNode is null!");
        return null;
    }

    Document document = aNode.getOwnerDocument();

    aOldNode = document.importNode(aOldNode, true);

    return aNode.appendChild(aOldNode);

} /* Node AddNode(Node aNode, Node aOldNode) **/ 
```

这段代码在 Android 4.0.3 上运行良好，没有问题，函数将节点添加到给定节点没有错误，但是当我在 Android 2.3.3 下运行相同的代码`aOldNode = document.importNode(aOldNode, true);`时，当我尝试像这样添加 try catch 块时，函数崩溃就行了：

```
try {
    aOldNode = document.importNode(aOldNode, true);
}
catch(Exception ex) {
    Log.e(TAG, ex.getMessage());
} 
```

我只看到`null`而不是错误消息。谁知道是什么原因？

这是例外：

```
06-05 17:58:09.111: I/TestRunner(2769): ----- begin exception ----- 
06-05 17:58:09.122: I/TestRunner(2769): org.w3c.dom.DOMException 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.NodeImpl.setNameNS(NodeImpl.java:227) 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.ElementImpl.<init>(ElementImpl.java:50) 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.DocumentImpl.createElementNS(DocumentImpl.java:336) 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.DocumentImpl.shallowCopy(DocumentImpl.java:156) 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.DocumentImpl.cloneOrImportNode(DocumentImpl.java:208) 
06-05 17:58:09.122: I/TestRunner(2769):     at org.apache.harmony.xml.dom.DocumentImpl.importNode(DocumentImpl.java:222) 
06-05 17:58:09.122: I/TestRunner(2769):     at com.fido.android.framework.service.XMLDOMNode.AddNode(XMLDOMNode.java:108) 
06-05 17:58:09.122: I/TestRunner(2769):     at com.fido.android.test.framework.service.XMLDOMNodeTest.testAddNodeNodeNode(XMLDOMNodeTest.java:89) 
06-05 17:58:09.122: I/TestRunner(2769):     at java.lang.reflect.Method.invokeNative(Native Method) 
06-05 17:58:09.122: I/TestRunner(2769):     at java.lang.reflect.Method.invoke(Method.java:507) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestCase.runTest(TestCase.java:154) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestCase.runBare(TestCase.java:127) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestResult$1.protect(TestResult.java:106) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestResult.runProtected(TestResult.java:124) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestResult.run(TestResult.java:109) 
06-05 17:58:09.122: I/TestRunner(2769):     at junit.framework.TestCase.run(TestCase.java:118) 
06-05 17:58:09.122: I/TestRunner(2769):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169) 
06-05 17:58:09.122: I/TestRunner(2769):     at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154) 
06-05 17:58:09.122: I/TestRunner(2769):     at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529) 
06-05 17:58:09.122: I/TestRunner(2769):     at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
06-05 17:58:09.132: I/TestRunner(2769): ----- end exception ----- 
```

据我所知`importNode`，这是一个错误的功能，我还能用什么来将节点添加到节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:15:52.747

我找到了解决方案，它对我有用，这里是修改后的函数，它将节点添加到节点而不抛出任何异常：

```
/**
  * Adds the node aNewChild to the end of the list of children of this node.
  * If the newChild is already in the tree, it is first removed.
  * @param aNewChild The node to add.If it is a DocumentFragment object,
  *                  the entire contents of the document fragment are moved
  *                  into the child list of this node
  * @return The node added or null.
  */
  public Node AddNode(Node aNode, Node aOldNode) {
        CustomLog.i(TAG, "AddNode()" );

        if (aNode == null) {
            CustomLog.e(TAG, "aNode is null!");
            return null;
        }

        if (aOldNode == null) {
            CustomLog.e(TAG, "aOldNode is null!");
            return null;
        }

        Document document = aNode.getOwnerDocument();

        aOldNode = document.adoptNode(aOldNode);

        return aNode.appendChild(aOldNode);

    } /* Node AddNode(Node aNode, Node aOldNode) **/ 
```

我只是使用`aOldNode = document.adoptNode(aOldNode);`而不是`aOldNode = document.importNode(aOldNode, true);`方法。

# java - 如何在 Javadoc 中引用同一类的另一个方法？

> ID：10897520
> 
> 赞同：44
> 
> 时间：2012-06-05T12:42:25.943
> 
> 标签：java, javadoc

假设您的班级有 2 个方法：

```
contains() and
containsSame() 
```

它们之间的区别很微妙，您想将其作为 Javadoc 的一部分提及

在 Javadoc 中，如何通过名称引用同一类中的方法？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-05T18:01:29.197

使用`@link`内联标签，并引用带有前导的方法`#`。

```
/**
 * ...
 * This method is similar to {@link #contains()}, with the following differences:
 * ...
 */
public boolean containsSame();

/**
 * This method does ...
 */
public boolean contains(); 
```

这个例子只有在实际上有一个`contains()`没有参数的方法时才有效（实际上，这似乎没有那么有用）。如果您只有一个`contains`带参数的方法，则将参数类型写在括号中：

```
/**
 * ...
 * This method is similar to {@link #contains(Element)}, with the following differences:
 * ...
 */
public boolean containsSame(Element e);

/**
 * This method does ...
 */
public boolean contains(Element e); 
```

或者您可以完全省略括号：

```
/**
 * ...
 * This method is similar to {@link #contains}, with the following differences:
 * ...
 */
public boolean containsSame(Element e);

/**
 * This method does ...
 */
public boolean contains(Element e); 
```

如果您有多个命名的方法`contains`（具有不同的参数列表），则此版本无法决定使用哪一个（链接将跳转到其中的任何一个，希望它们都在一起并做类似的事情）。

# asp.net - ASP.Net Web API 在 VS 中正确显示但给出 HTTP500

> ID：10897523
> 
> 赞同：4
> 
> 时间：2012-06-05T12:42:41.000
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

经过昨天的大量帮助，我在 asp.net4 beta 中遇到了一个已知错误 - 我升级到 VS2012 RC Express (4.5)，现在我遇到了内部服务器错误，我不明白为什么。我正在创建一个 Web API：

**模型**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.ModelConfiguration.Conventions;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations.Schema;

namespace MvcApplication6.Models
{
    public class tblCustomerBooking
    {
        [Key()]
        public int customer_id { get; set; }
        public string customer_name { get; set; }
        public string customer_email { get; set; }
        public virtual ICollection<tblRental> tblRentals { get; set; }
    }

    public class tblRental
    {
        [Key()]
        public int rental_id { get; set; }
        public int room_id { get; set; }
        public DateTime check_in { get; set; }
        public DateTime check_out { get; set; }
        public decimal room_cost { get; set; }
        public int customer_id { get; set; }
        [ForeignKey("customer_id")]
        public virtual tblCustomerBooking tblCustomerBooking { get; set; }
    }
} 
```

然后我使用添加控制器向导，选择“模板：具有读/写动作的 API 控制器，使用实体框架”，选择 tblCustomerBooking 作为我的模型类，然后单击，即：

```
using System.Data.Entity;

namespace MvcApplication6.Models
{
    public class BookingsContext : DbContext
    {
        public BookingsContext() : base("name=BookingsContext")
        {
        }
        public DbSet<tblCustomerBooking> tblCustomerBookings { get; set; }
    }
} 
```

Visual Studio 2012 Express 自动生成的我的控制器 (BookingsController.cs) 是：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web;
using System.Web.Http;
using MvcApplication6.Models;

namespace MvcApplication6.Controllers
{
    public class BookingsController : ApiController
    {
        private BookingsContext db = new BookingsContext();

        // GET api/Bookings
        public IEnumerable<tblCustomerBooking> GettblCustomerBookings()
        {
            return db.tblCustomerBookings.AsEnumerable();
        }
    }
} 
```

我在上面的“return db .....”处添加了一个断点，并检查了 VS 中的 Watch 部分——它清楚地显示了对象、客户以及相关的租金：

![客户和租赁对象的快照](../Images/012e5c38ec346ce05516ea1e4fca5bbb.png)

但是，如果我允许脚本继续，我只会得到一个 http500 错误（如下面的 Fiddler 所示）： ![显示 HTTP500 的 Fiddler 屏幕截图](../Images/4ea023c0fc651355e1d45d962a04536f.png)

是否还有更多代码可以添加到控制器中以让我查看它为什么出错？或者任何人都可以看到可能出了什么问题？VS 似乎可以检索它，如第一个屏幕截图所示，但似乎无法将其发送出去。

感谢您的任何帮助或指点，

标记

**更新**

嗨 - 我只是对 API 要求太多了吗？它不可能（开箱即用）简单地返回具有一对多关系的对象吗？它真的只能产生一个对象列表吗？

谢谢，马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T19:59:43.900

[Update]

**1, change the action code to include the navigation property data:**

```
 // GET api/Bookings
    public IEnumerable<tblCustomerBooking> GettblCustomerBookings()
    {
        return db.tblCustomerBookings.Include("tblRentals").AsEnumerable();
    } 
```

**2, turn off proxy in data context**

[EF suggests to turn off proxy when serializing POCO](http://msdn.microsoft.com/en-us/library/dd456853.aspx).

If you want to support proxy, there are different ways for different serializers:

JSON.net serializer: It can support proxy by upgrading to latest version. Version 4.5.1 has a bug that can't support ignore NonserializedAttribute. It will block proxy to be serialized.

DataContractSerializer (JSON/XML): use ProxyDataContractResolver to resolve the types, here is a [walkthrough](http://msdn.microsoft.com/en-us/library/ee705457.aspx).

**3, enable preserving reference in model class**

Both json.net and DataContract serializer support detecting circular reference and they give developer to control how to handle it.

Change the model class to following:

```
[JsonObject(IsReference = true)]
[DataContract(IsReference = true)]
public class tblCustomerBooking
{
    [Key()]
    public int customer_id { get; set; }
    [DataMember]
    public string customer_name { get; set; }
    [DataMember]
    public string customer_email { get; set; }
    [DataMember]
    public virtual ICollection<tblRental> tblRentals { get; set; }
}

public class tblRental
{
    [Key()]
    public int rental_id { get; set; }
    public int room_id { get; set; }
    public DateTime check_in { get; set; }
    public DateTime check_out { get; set; }
    public decimal room_cost { get; set; }
    public int customer_id { get; set; }
    [ForeignKey("customer_id")]
    public virtual tblCustomerBooking tblCustomerBooking { get; set; }
} 
```

Note that, if the model is attributed with DataContract, you have to specify DataMember for all its members, otherwise none of them will be serialized.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-08T23:03:03.067

为了解决返回带有 virtual 关键字的实体的 JSON 时出现的错误 500 问题，我执行了以下操作，

```
 public class BookingsController : ApiController
{
    private BookingsContext db = new BookingsContext();

    // GET api/Bookings
    public IEnumerable<tblCustomerBooking> GettblCustomerBookings()
    {
        db.Configuration.ProxyCreationEnabled = false;  
        return db.tblCustomerBookings.AsEnumerable();
    }
} 
```

对于代理干扰的特定情况，如序列化，禁用代理创建（也禁用延迟加载）就足够了。这只会为特定的上下文实例禁用代理创建`db`

```
db.Configuration.ProxyCreationEnabled = false; 
```

[http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

[http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-1-introduction-and-model.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-1-introduction-and-model.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:45:12.447

你在做什么：

```
db.tblCustomerBookings.Include("tblRentals").Select(i => 
    new { i.something //etc }); 
```

另外，您使用的是哪个 MediaTypeFormatter，Xml 还是 Json？错误 500 通常意味着 Formatter 阻塞。

切换到 JSON.NET 格式化程序（在 Web API RC 中最简单的方法是这样做`GlobalConfiguration.Configuration.Formatters.RemoveAt(1)`- 这将删除 XML 格式化程序）并查看它是否有帮助或至少给出更有意义的错误（或使用内容类型 JSON 请求您的方法）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T12:52:17.020

您可能希望将全局错误处理程序添加到您的项目中。它可以捕获和记录后台线程中发生的任何奇怪错误。这篇 S/O 文章讨论了一些可靠的方法。它们将在任何项目中为您节省大量时间： [ASP.NET MVC Error Logging in Both Global.asax 和 Error.aspx](https://stackoverflow.com/questions/832046/asp-net-mvc-error-logging-in-both-global-asax-and-error-aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T22:43:04.523

我也为将代理对象序列化为 poco 的问题而苦苦挣扎。您可以在上下文中构建一个切换 db.Configuration.ProxyCreationEnabled = false 的标志；

或者您应该设置一个视图模型并获取代理对象并将参数分配给视图模型。

```
public IEnumerable<tblCustomerBooking> GettblCustomerBookings()
        {
            return db.tblCustomerBookings.Select(cb=> new CustomerBookingsViewModel{id=cb.Id, et.....);
        } 
```

或使用匿名类型：

```
.Select(cb=>new{id=cb.id....} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T13:12:59.680

我猜您由于延迟加载实体而在序列化时遇到异常。

这个[线程](http://www.strathweb.com/2012/03/serializing-entity-framework-objects-to-json-in-asp-net-web-api/)可以帮助你。

**更新：**

试试这是否有效，如果是，那么问题主要是我所说的

```
public IList<tblCustomerBooking> GettblCustomerBookings()
{
    var custBookings = db.tblCustomerBookings.Include("tblRentals").AsEnumerable();

    return custBookings
               .Select(c => new tblCustomerBooking
                            { 
                               customer_id = c.customer_id,
                               customer_name = c.customer_name,
                               customer_email = c.customer_email,
                               tblRentals = c.tblRentals
                                               .Select(r => new tblRentals
                                                      {
                                                          rental_id = r.rental_id,
                                                          // other props exclude the 
                                                          // tblCustomerBooking 
                                                      })
                            }
                      ).ToList();
} 
```

我想如果您使用带有 web api 的**JSON.NET**库，您可以通过指定属性轻松控制不需要序列化的`[JsonIgnore]`属性，这样您就可以避免编写上述 LINQ 查询。

[http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706](http://code.msdn.microsoft.com/Using-JSONNET-with-ASPNET-b2423706)

[http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size.aspx](http://james.newtonking.com/archive/2009/10/23/efficient-json-with-json-net-reducing-serialized-json-size.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T13:20:45.707

Api Controller 是基于 Convention-Over-Configuration 的，因此您可以尝试通过以下任一方式解决：

*   将您的方法重命名为“Get”，使其与 GET 动词匹配

*   使用 HttpGet 属性装饰您的方法：[HttpGet]

*   在 Global.asax 和 {controller}/ 之后的 {action} 中转到 API 的路由映射，以便通过[http://mydomain.com/myapi/api/bookings/GettblCustomerBookings](http://mydomain.com/myapi/api/bookings/GettblCustomerBookings) ()调用它

# android - 自定义警报对话框中的黑色空间

> ID：10897525
> 
> 赞同：0
> 
> 时间：2012-06-05T12:42:44.267
> 
> 标签：android

我设计了一个自定义警报对话框，但黑色空间出现在警报框的顶部和底部。我的布局代码如下。我试图在我的主要 LinearLayout 中给出负边距，但仍然存在问题。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/layout_root"
          android:orientation="vertical"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:background="#000000"
          >
          <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/first_part"
          android:orientation="horizontal"
          android:layout_width="580px"
          android:layout_height="90px"
          android:background="#1c1c1c"
          >
          <ImageView android:id="@+id/ic_messageicon"
           android:scaleType="fitXY"
           android:layout_width="70px"
           android:layout_height="70px"
           android:layout_marginLeft="20px"
           android:layout_marginTop="10px"
           android:src="@drawable/ic_messagewarn"
           />
         <TextView android:id="@+id/title"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="25px"
          android:layout_marginLeft="15px"
          android:textSize="28px"
          android:typeface="sans"
          android:textColor="#FFFFFF"
          android:textStyle="bold"
          android:text="@string/errorTitle"
          ></TextView>

  </LinearLayout>
          <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/first_part_line"
          android:orientation="horizontal"
          android:layout_width="580px"
          android:layout_height="1px"
          android:background="#626262"
          >
          </LinearLayout>
           <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/second_part"
          android:orientation="horizontal"
          android:layout_width="580px"
          android:layout_height="120px"
          android:background="#252525"
          >
        <TextView android:id="@+id/messagetext"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:typeface="sans"
          android:textColor="#FFFFFF"
          android:textSize="25px"
          android:layout_marginLeft="20px"
          android:layout_marginTop="20px"
          />
          </LinearLayout>
          <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/third_part_line"
          android:orientation="horizontal"
          android:layout_width="580px"
          android:layout_height="1px"
          android:background="#aaaaaa"
          >
          </LinearLayout>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/third_part"
          android:orientation="horizontal"
          android:layout_width="580px"
          android:layout_height="90px"
          android:background="#999999"
          >
        <Button android:id="@+id/yes"
           android:scaleType="fitXY"
           android:layout_width="236px"
           android:layout_height="57px"
          android:layout_marginTop="16px"
          android:onClick="onClick"
          android:text="@string/yes"
          android:textColor="#000000"
          android:textSize="20px"
          android:textStyle="bold"
          android:layout_marginLeft="27px"
          android:background="@drawable/messagebutton"
          />
          <Button android:id="@+id/no"
           android:scaleType="fitXY"
           android:layout_width="236px"
           android:layout_height="57px"
          android:layout_marginTop="16px"
          android:layout_marginRight="27px"
          android:onClick="onClick"
          android:text="@string/no"
          android:layout_alignParentRight="true"
          android:textColor="#000000"
          android:textSize="20px"
          android:textStyle="bold"
          android:background="@drawable/messagebutton"
          />
          </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:06:18.120

xml 在 Values 文件夹中并添加此代码

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="Theme" parent="android:Theme">
</style>
<style name="CustomDialogTheme" >
<item name="android:layout_width">wrap_content</item>
<item name="android:layout_height">wrap_content</item>
<item name="android:windowBackground">@color/transparent1</item>
<item name="android:windowIsFloating">false</item>
<item name="android:windowNoTitle">true</item>
</style> 
```

并将此主题引用到您的对话框中，如下所示

```
Dialog dialog = new Dialog(activity, R.style.CustomDialogTheme); 
```

然后将您的自定义对话框布局 Xml 文件设置为**setContentView**。

```
dialog.setContentView(R.layout.customdialog); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:44:01.113

you are not closing the parent LinearLayout at the end

and you are using #000000 color code for parent layout this will display black color at background

try to change the color code you bottom color will chance. and use

```
 requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

in you dialog class this will remove the dialog title so your top color also will remove..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:45:44.267

如果您查看[AlertDialog](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/app/AlertDialog.java)类源，您会发现大多数方法只是私有 AlertController mAlert 周围的代理方法（外观）。

查看[AlertController](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/com/android/internal/app/AlertController.java#AlertController)类源代码，您会看到 4 个有趣的成员变量：

```
private int mViewSpacingLeft;
private int mViewSpacingTop;
private int mViewSpacingRight;
private int mViewSpacingBottom;
private boolean mViewSpacingSpecified = false; 
```

将 mViewSpacingSpecified 设置为 true 将删除对话框顶部和底部的边框。

这可以通过更改此行来正确完成：

```
dialog.setView(layout); 
```

至：

```
dialog.setView(layout, 0, 0, 0, 0); 
```

参考这个[链接](https://stackoverflow.com/questions/10433764/alertdialog-how-to-remove-black-borders-above-and-below-view)

# sharepoint - 如何创建具有到期日期的 SharePoint 调查？

> ID：10897526
> 
> 赞同：3
> 
> 时间：2012-06-05T12:42:55.703
> 
> 标签：sharepoint, survey

我有自定义调查，在 RootWeb.Properties 中有到期日期。如何将所有希望在过期日期后回复调查的用户（单击“回复调查”或使用直接链接到 NewForm.aspx）重定向到带有一些自定义文本的自定义页面（即“此调查已过期”）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T11:04:41.430

您可以编写一个事件接收器来实现这一点。在事件接收器代码上，您可以检查到期日期，如果到期，您可以取消项目添加并将用户重定向到自定义页面。请注意，您的自定义 url 必须是相对 url。

```
public override void ItemAdding(SPItemEventProperties properties)
   {
       base.ItemAdding(properties);
       if (DateTime.Now > "your expiration date")
       {
           properties.Status = SPEventReceiverStatus.CancelWithRedirectUrl;
           properties.RedirectUrl = "your custom url";
       }
   } 
```

# java - 如何在 Oracle VM 上运行命令

> ID：10897528
> 
> 赞同：0
> 
> 时间：2012-06-05T12:43:01.547
> 
> 标签：java, solaris-10, vmware-tools

我们的 Solaris 机器中安装了 oracle 虚拟机。（我们需要只能安装在 Windows 上的 waptpro 工具）。所以，我们在 oracle 虚拟机上安装了这个工具。

现在我的 solaris 机器上有一个 java 代码。我需要从 solaris 机器上执行 waptpro 工具。如果有任何命令可以在 oracle 虚拟机上从 solaris 运行命令，我可以将其集成到我的 javacode 中

所以，如果有人知道如何在 oracle 虚拟机上从 solaris 执行命令，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:54:05.367

这在最简单的情况下很容易，但需要相当多的肘部油脂才能在所有情况下都正确。

对于 Java 1.5 及更高版本，来自[http://www.rgagnon.com/javadetails/java-0014.html （根据需要调整命令）：](http://www.rgagnon.com/javadetails/java-0014.html)

```
import java.io.*;
import java.util.*;

public class CmdProcessBuilder {
  public static void main(String args[])
     throws InterruptedException,IOException
  {
    List<String> command = new ArrayList<String>();
    command.add(System.getenv("windir") +"\\system32\\"+"tree.com");
    command.add("/A");

    ProcessBuilder builder = new ProcessBuilder(command);
    Map<String, String> environ = builder.environment();
    builder.directory(new File(System.getenv("temp")));

    System.out.println("Directory : " + System.getenv("temp") );
    final Process process = builder.start();
    InputStream is = process.getInputStream();
    InputStreamReader isr = new InputStreamReader(is);
    BufferedReader br = new BufferedReader(isr);
    String line;
    while ((line = br.readLine()) != null) {
      System.out.println(line);
    }
    System.out.println("Program terminated!");
  }
} 
```

# iphone - 上传和调试位于 /Applications 文件夹中的应用程序

> ID：10897529
> 
> 赞同：0
> 
> 时间：2012-06-05T12:43:06.407
> 
> 标签：iphone, xcode, debugging, ios5, permissions

有没有办法将我的应用程序上传到 iPhone 的 /Applications 文件夹而不是 Xcode 中的 /private/var/mobile/Applications 并调试它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T09:29:00.297

好吧，我想不是从沙箱调试应用程序的唯一方法是使用控制台。

# c# - 有没有办法比较两个富文本框文本并突出显示？

> ID：10897530
> 
> 赞同：2
> 
> 时间：2012-06-05T12:43:08.650
> 
> 标签：c#, comparison, compare, richtextbox, highlighting

我有两个显示存储过程及其以前版本的富文本框。

我想知道我是否可以比较两者并突出差异？

它类似于 notepad++ 比较插件。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T06:51:38.617

我建议使用[google diff (lib)](http://code.google.com/p/google-diff-match-patch/)来区分文本，然后获取输出并将其放入另一个文本框：D

该库具有类似于 diff *nix 命令的功能。它也是在 apache 2.0 许可下发布的，[这里描述了](http://www.apache.org/foundation/license-faq.html#WhatDoesItMEAN)它，简而言之，它可以用于任何类型的项目，除非最终结果应该作为“免费”软件发布，例如 GPL 3.0。

# c++ - 继承是设计建造者/工厂的好工具吗

> ID：10897537
> 
> 赞同：2
> 
> 时间：2012-06-05T12:44:03.510
> 
> 标签：c++, design-patterns, factory, builder

我有几个复杂的类，它们是使用从要创建的类继承的单独的创建者类构造的。

一个示例可能是由无序数据构建的图。

```
class Graph{
  //....
  public:
   void showData(); 
  protected: 
    std::vector<std::pair<int,int> > mConnectedData;

}

class GraphCreator:private Graph{
  public:
    //...
    void construct();
  private:
   std::map<double,int> mSomeHelperContainer;
   //...
} 
```

对于构造，我需要许多辅助函数和辅助数据，我将它们放在另一个类 GraphCreator 中。由于许多与图形相关的函数也是必需的，而且我在任何情况下都需要图形的数据，所以我使用私有继承。由于这绝不是著名的 is-a 关系，而且由于私有继承通常被认为是不良设计的暗示，我有一些疑问：这是一个好主意，是设计工厂的一种适当方式，还是有一些我认为的主要缺点？有没有想过？设计这样一个工厂的更好方法是什么？

**编辑：**

感谢您到目前为止的答案！一些附加信息，使当前使用的方法的原因更清楚。我不能使用静态创建方法（Creator 中的状态变量太多）并且我有另一个约束：我想在库中向其他人提供独立于创建者的 Graph（例如，连同从文件读取方法）。那些不应该关心创造者。因此我也有点不确定朋友的使用情况，因为它在 Graph 类中添加了代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:53:05.117

这不是一个好方法（从任何有数据的东西继承很少是）。

传统方法是：

*   做`GraphCreator`一个`friend`_`Graph`
*   将方法实现为（直接）中的`static` `Build`方法`Graph`

该决定主要取决于您是否需要“工厂”是有状态的。A`class`用于表示状态，这是方法无法做到的。

*   因此，如果您需要 state，您需要 a`class`来存储它，因此`GraphCreator`是您最好的选择。
*   对于无状态方法，该`static`方法更轻量级。

如果您尚未决定，请选择最简单的（`static`方法），看看它走多远:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:51:49.550

[我从这里](http://www.parashift.com/c++-faq-lite/private-inheritance.html#faq-24.3)采用的经验法则是

> 尽可能使用组合，必要时使用私有继承。

“你必须”的一个具体例子是，当你继承的类有一些你必须实现的虚函数或纯虚函数才能使用你的私有基时：你根本无法在没有继承的情况下做到这一点。

从您的描述来看，使用继承并不是不可避免的；因此，我认为最好使用组合。

# perl - 如何从我的 perl 脚本调用同一目录中的脚本

> ID：10897542
> 
> 赞同：0
> 
> 时间：2012-06-05T12:44:32.567
> 
> 标签：perl, directory

我正在尝试从 perl 脚本中调用脚本。我可以看到两种方法。

使用 ./somescript 或指定完整的目录路径。两者都不是理想的，因为“./”只有在调用者 cd 进入目录时才会起作用。完整路径，不是相对的，而是绝对的。无论如何围绕这个？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:28:58.173

[`FindBin`](http://p3rl.org/FindBin)如果要查找原始脚本所在的目录，请使用模块，如果要[`Cwd`](http://p3rl.org/Cwd)查找当前工作目录，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:44:56.590

一种方法是确定您的脚本所属的目录，并使用该目录[如何获取正在执行的 Perl 脚本的完整路径？](https://stackoverflow.com/questions/84932/how-do-i-get-the-full-path-to-a-perl-script-that-is-executing)

提供了 2 种方法来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:57:49.663

要获取当前正在执行的脚本的完整路径，可以使用PerlMonks[中的以下任一代码块](http://www.perlmonks.org/?node_id=40553)。文件::基本名称：

```
#!/usr/bin/perl -w
use strict;
use File::Spec::Functions qw(rel2abs);
use File::Basename;
print dirname(rel2abs($0)); 
```

或[CWD](http://perldoc.perl.org/Cwd.html)可用于此目的。CWD 示例：

```
use Cwd;
my $dir = getcwd; 
```

应该可以使用基本目录构建完整路径，再加上您对初始脚本和要调用的第二个脚本的相对位置的了解。这样，虽然您将使用绝对路径来调用第二个脚本，但您只是在硬编码相对路径？

# asp.net - 客户端 ftp windows 服务器中的 asp.net 站点托管程序集缺少错误

> ID：10897543
> 
> 赞同：0
> 
> 时间：2012-06-05T12:44:34.180
> 
> 标签：asp.net, website-hosting

这是我的错误

“/”应用程序中的服务器错误。

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：CS0246：找不到类型或命名空间名称“FlickrNet”（您是否缺少 using 指令或程序集引用？）

源错误：

第 12 行：使用 System.Xml.Linq；第 13 行：

**第 14 行：使用 FlickrNet；**

第 15 行：使用 System.Globalization；

第 16 行：

源文件：e:\inetpub\vhosts\thecouncilhost.com\httpdocs\kidzania\Flickr_Photo.aspx.cs 行：14

e:\inetpub\vhosts\thecouncilhost.com\httpdocs\kidzania\Flickr_Photo.aspx.cs(14,7)：错误 CS0246：找不到类型或命名空间名称“FlickrNet”（您是否缺少 using 指令或装配参考？）

e:\inetpub\vhosts\thecouncilhost.com\httpdocs\kidzania\Flickr_Photo.aspx.cs

这不是我的计算机路径，它是客户端 windows 服务器路径

另一个文件上传后通过点网发布网页后出现错误

解析器错误消息：无法加载程序集“App_Web_login.aspx.cdcab7d2”。确保在访问页面之前已对其进行编译。

源错误：

第 1 行：<%@ page language="C#" autoeventwireup="true" inherits="Kidzania_Final.login, App_Web_login.aspx.cdcab7d2" %>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:50:05.603

检查此堆栈跟踪错误：

```
error CS0246: The type or namespace name 'FlickrNet' could not be found 
(are you missing  a using directive or an assembly reference? 
```

您的解决方案的或目录中有`FlickrNet`dll吗？？？如果没有，则在项目中添加该库 dll 并记住在项目中添加引用时选中复选框。`bin``App_Code``copy local`

# javascript - FB.api 响应未定义

> ID：10897544
> 
> 赞同：0
> 
> 时间：2012-06-05T12:44:37.010
> 
> 标签：javascript, facebook-graph-api

我正在开发一个与 facebook 帐户集成的网站，以在网站上显示来自 facebook 帐户的注释。但是，在调用 FB.api 方法后，我收到的响应是未定义的，我无法访问“response.data”中的数据。

测试

```
<body>
    <div id="fb-root"></div>
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script>

    window.fbAsyncInit =    function() 
                            {

                                FB.init({appId: '12345678', status: true, cookie: true, xfbml: true});

                                FB.api  (
                                            '/pagename/notes',  
                                            function(response) 
                                            {

                                                alert(response.data.length);

                                            }

                                        );

                            };

    </script>

</body> 
```

有谁知道我哪里出错了？任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T12:48:42.673

如果您[`console.log`](https://stackoverflow.com/questions/4743730/javascript-what-is-console-log-and-how-do-i-use-it)在响应对象上使用，您会发现它包含一个“ `error`”属性，即`response.error.message`“*请求此资源需要访问令牌。* ”

您可以使用以下方法检查您的响应是否包含错误：

```
function (response) {
    if (response.hasOwnProperty("error")) {
        alert("Error: " + response.error.message);
    } else {
        //Success!
    }
} 
```

对于该错误，可以在此处找到一个类似的问题：[“使用 Facebook php sdk 访问相册/照片时需要访问令牌来请求此资源”](https://stackoverflow.com/questions/4121535/an-access-token-is-required-to-request-this-resource-while-accessing-an-album)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:47:13.413

阅读笔记需要 read_stream 权限——你的代码看起来不像你首先得到它。[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# github - 为什么 GitHub 会报告公钥无效？

> ID：10897549
> 
> 赞同：8
> 
> 时间：2012-06-05T12:44:52.480
> 
> 标签：github, ssh-keys

我已经生成了 ssh 密钥。
结果是：

```
Your identification has been saved in /home/rajani/.ssh/id_rsa.
Your public key has been saved in /home/rajani/.ssh/id_rsa.pub. 
```

密钥是十六进制格式，但是在将其添加到 GitHub 时，我收到如下错误：

```
Key is invalid. 
It must begin with 'ssh-rsa' or 'ssh-dss'. 
Check that you're copying the public half of the key . 
```

我应该如何正确地将 ssh 密钥添加到 GitHub？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T12:58:21.723

### 问题

1.  **ssh-keygen**实用程序通常默认生成 RSA 密钥，但您的实现可能默认为 ECDSA，GitHub 当前不支持。
2.  如果您真正生成 RSA 密钥，您可能会尝试将您的私钥而不是您的公钥粘贴到服务器上。

### 解决方案

1.  通过将**-t**标志传递给*ssh-keygen*来强制生成 RSA 密钥。
2.  确保复制带有**.pub**扩展名的密钥，并且包含*整*行。如果您要复制 RSA 公钥，这将包括**ssh-rsa前缀。**

### 有关的

当然`man 1 ssh-keygen`是你的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:52:45.457

您应该添加“十六进制部分”并将“ssh-rsa”放在前面，这应该可以解决问题。

# java - Android java.lang.RuntimeException：无法恢复活动

> ID：10897551
> 
> 赞同：1
> 
> 时间：2012-06-05T12:45:00.107
> 
> 标签：java, android, eclipse, nullpointerexception

```
Caused by: java.lang.NullPointerException
at com.myapp.code.WordDescription.onRestart(WordDescription.java:685)
at android.app.Instrumentation.callActivityOnRestart(Instrumentation.java:1245)
at android.app.Activity.performRestart(Activity.java:3892)
at android.app.Activity.performResume(Activity.java:3911)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2424) 
```

我真的不明白为什么我在 WordDescription.onRestart 上不断收到错误消息。许多人抱怨强制关闭问题。关于如何解决这个问题的任何线索？谢谢

我认为这个是相关的..

```
public class MyArrayAdapter extends ArrayAdapter<String> {

    private final Activity context;
    private final String[] aListText;
    private final String [] meaningText;

    public MyArrayAdapter(Activity context, String[] wordText, String[] meaningText) {
        super(context, R.layout.desclist2, wordText);
        this.context=context;
        this.aListText= wordText;
        this.meaningText=meaningText;
    }
} // ..... 

@Override
public void onRestart(){
    super.onRestart();
    clickFlag = false;
    clickWordFlag = false;
    myArrayAdapter.notifyDataSetChanged();  <-- line 685
}
Handler handler = new Handler(){  <-- line 709
    @Override
    public void handleMessage(Message msg){
        progressDialog.dismiss();

        if{ ....
        }else{
            myArrayAdapter = new MyArrayAdapter(WordDescription.this, wordArray, meaningArray);
            listView.setAdapter(myArrayAdapter);
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:47:43.310

改变

```
myArrayAdapter.notifyDataSetChanged(); 
```

到

```
if(myArrayAdapter != null)
      myArrayAdapter.notifyDataSetChanged(); 
```

我强烈建议您按照**Vipul Shah**在评论中所说的去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:24:06.230

试试这样...

```
myArrayAdapter = new MyArrayAdapter(WordDescription.this, wordArray, meaningArray);
listView.setAdapter(myArrayAdapter);
if(myArrayAdapter != null){
      myArrayAdapter.notifyDataSetChanged();
} 
```

# c++ - 在 main 之前调用一个函数

> ID：10897552
> 
> 赞同：43
> 
> 时间：2012-06-05T12:45:05.573
> 
> 标签：c++, c, startup, main

> **可能重复：**
> [main() 真的是 C++ 程序的开始吗？](https://stackoverflow.com/questions/4783404/is-main-really-start-of-a-c-program)

可以在程序启动之前调用我的函数吗？我怎样才能在`C++`or中完成这项工作`C`？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-05T12:46:47.973

你可以有一个全局变量或一个`static`类成员。

**1)`static`班级成员**

```
//BeforeMain.h
class BeforeMain
{
    static bool foo;
};

//BeforeMain.cpp
#include "BeforeMain.h"
bool BeforeMain::foo = foo(); 
```

**2) 全局变量**

```
bool b = foo();
int main()
{
} 
```

请注意此链接 - [http://www.parashift.com/c++-faq-lite/ctors.html#faq-10.14 的镜像](http://dietmar-kuehl.de/mirror/c++-faq/ctors.html#faq-10.14)/[建议的替代方案](https://isocpp.org/wiki/faq/ctors#static-init-order)- 由 Lundin 发布。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-05T12:46:53.210

里面有`C++`一个简单的方法：**使用全局对象的构造函数**。

```
class StartUp
{
public:
   StartUp()
   { foo(); }
};

StartUp startup; // A global instance

int main()
{
    ...
} 
```

这是因为全局对象是在`main()`开始之前构建的。正如*Lundin*所指出的，请注意[*静态初始化顺序惨败*](https://isocpp.org/wiki/faq/ctors#static-init-order)。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-05T13:10:10.353

如果使用`gcc`和`g++`编译器，那么这可以通过使用来完成`__attribute__((constructor))`

例如::
在 gcc (c)::

```
#include <stdio.h>

void beforeMain (void) __attribute__((constructor));

void beforeMain (void)
{
  printf ("\nbefore main\n");
}

int main ()
{
 printf ("\ninside main \n");
 return 0;
} 
```

在 g++ (c++) 中::

```
#include <iostream>
using namespace std;
void beforeMain (void) __attribute__((constructor));

void beforeMain (void)
{
  cout<<"\nbefore main\n";
}

int main ()
{
  cout<<"\ninside main \n";
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-06-05T12:54:50.513

In C++ it is possible, e.g.

```
static int dummy = (some_function(), 0);

int main() {} 
```

In C this is not allowed because initializers for objects with static storage duration must be constant expressions.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-05T13:17:11.713

我建议你参考这个链接..

[http://bhushanverma.blogspot.in/2010/09/how-to-call-function-before-main-and.html](http://bhushanverma.blogspot.in/2010/09/how-to-call-function-before-main-and.html)

对于 Linux/Solaris 上的 GCC 编译器：

```
#include

void my_ctor (void) __attribute__ ((constructor));
void my_dtor (void) __attribute__ ((destructor));

void
my_ctor (void)
{
printf ("hello before main()\n");
}

void
my_dtor (void)
{
printf ("bye after main()\n");
}

int
main (void)
{
printf ("hello\n");
return 0;
}

$gcc main.c
$./a.out
hello before main()
hello
bye after main() 
```

# c# - c# 时隙计算(today-givenDate)

> ID：10897558
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:45:32.110
> 
> 标签：c#, .net, datetime, dayofweek

我正在准备一个计算图书馆罚款的课程。例如：我有一本书。我将在 2009 年 11 月 12 日归还这本书。但是我推迟了这个返回日期。我于 2009 年 11 月 30 日归还了这本书。我会以金钱的形式支付罚金。如何在 c# 上计算（11 月 31 日 - 11 月 12 日）？

罚款应仅针对营业日计算。这意味着我的计算应该考虑到周末和国定假日。

```
 <Holiday Date="25.11.2009"/>
    <Holiday Date="26.11.2009"/>
    <Holiday Date="27.11.2009"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:50:34.807

```
public int CountBusinessDaysBetween(DateTime start, DateTime end) {
    int days = end.Subtract(start).Days;
    return Enumerable.Range(0, days)
                     .Select(day => start.AddDays(day))
                     .Where(date => date.IsBusinessDay())
                     .Count();
} 
```

当然，*你*必须`IsBusinessDay`自己编码。我不知道你对工作日的定义是什么。它是**高度**本地化的。

另外，我不知道你是否想包含在内，所以你可能需要一个`+ 1`关于`days`if 的定义。

# jquery - jqGrid 寻呼机按钮与箭头按钮重叠

> ID：10897560
> 
> 赞同：0
> 
> 时间：2012-06-05T12:45:38.770
> 
> 标签：jquery, jqgrid

我在 jgGrid 寻呼机上添加了一些我自己的按钮。我还将网格的宽度增加到窗口宽度（在 loadComplete 中）。当我增加宽度时，分页控件（首先移动、最后移动、文本框等）不会保留在中心。它向左移动并与按钮重叠。请参阅下面的屏幕截图。谢谢

![分页重叠](../Images/90f0b7edd293ba1ebca4cfd86b0c2ad7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T18:05:15.600

对于重叠，我建议在每个导航按钮（**navButtonAdd ）之后使用****navSeparatorAdd**。

 **```
.navSeparatorAdd("#pager",{separator_parameters} 
```

`separator_parameters ==> sepclass : "ui-separator", sepcontent: "&nbsp;&nbsp;&nbsp;"`如果要创建三个空格的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:28:36.457

可能原因是您在创建 jqGrid 时使用的网格的*初始宽度。*我建议您尝试`width`在创建 jqGrid 时使用的参数值。或者，您可以考虑更改`#pager_center`(grid pager 的中间部分) 或`#pager_left`and的宽度`#pager_right`。**

# android - Android PopupWindow 中的 ListView

> ID：10897561
> 
> 赞同：1
> 
> 时间：2012-06-05T12:45:40.767
> 
> 标签：android, android-layout, user-interface, baseadapter

是否有一个简单的示例或教程，如何在 Android中放入（通过 XML 解析器`ListView`获取值）？`BaseAdapter``PopupWindow`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T12:40:17.340

您可能需要检查[ListPopupWindow](http://developer.android.com/reference/android/widget/ListPopupWindow.html)

我是这样做的：

`PopupWrapper`类只是包装`PopupWindow`在一个更友好的类中：

```
package com.blablabla.android.helpers.gui.dialog;

import com.blablabla.android.helpers.R;

import android.app.Activity;
import android.content.Context;
import android.graphics.Rect;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup.LayoutParams;
import android.view.WindowManager;
import android.widget.PopupWindow;

/**
 * This class does most of the work of wrapping the {@link PopupWindow} so it's
 * simpler to use.
 */
public class PopupWrapper implements OnTouchListener {

    /** Context where to show the popup */
    protected Context context = null;

    /** The popup to show */
    protected PopupWindow window = null;

    /** What to show in the popup */
    protected View root = null;

    /** Parent/anchor View */
    protected View anchor = null;

    /** Optional background */
    protected Drawable background = null;

    /** Window manager */
    private WindowManager windowManager;

    public PopupWrapper(Activity activity) {        
        anchor = null;
        context = activity; 
        init();
    }

    public PopupWrapper(View anchor) {

        this.anchor = anchor;
        context = anchor.getContext();
        init();     
    }

    private void init() {

        window = new PopupWindow(context);
        window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setTouchable(true);
        //window.setFocusable(true);
        window.setOutsideTouchable(true);

        // when a touch even happens outside of the window
        // make the window go away
        window.setTouchInterceptor(this);
        windowManager = (WindowManager) context
                .getSystemService(Context.WINDOW_SERVICE);
        onCreate();
    }

    /**
     * Anything you want to have happen when created. Probably should create a
     * view and setup the event listeners on child views.
     */
    protected void onCreate() {
    }

    /**
     * In case there is stuff to do right before displaying.
     */
    protected void onShow() {
    }

    private void preShow() {
        if (root == null) {
            throw new IllegalStateException(
                    "setContentView was not called with a view to display.");
        }
        onShow();

        if (background == null) {
            window.setBackgroundDrawable(new BitmapDrawable());
        } else {
            window.setBackgroundDrawable(background);
        }

        // if using PopupWindow#setBackgroundDrawable this is the only values of
        // the width and hight that make it work
        // otherwise you need to set the background of the root viewgroup
        // and set the popupwindow background to an empty BitmapDrawable
        window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setTouchable(true);
        window.setFocusable(true);
        window.setOutsideTouchable(true);
        window.setContentView(root);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_OUTSIDE) {
            window.dismiss();
            return true;
        }
        return false;
    }

    public void setBackgroundDrawable(Drawable background) {
        this.background = background;
    }

    /**
     * Sets the content view. Probably should be called from {@link onCreate}
     * 
     * @param root
     *            the view the popup will display
     */
    public void setContentView(View root) {
        this.root = root;
        window.setContentView(root);
    }

    /**
     * Will inflate and set the view from a resource id
     * 
     * @param layoutResID
     */
    public void setContentView(int layoutResID) {
        LayoutInflater inflator = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        setContentView(inflator.inflate(layoutResID, null));
    }

    /**
     * If you want to do anything when {@link dismiss} is called
     * 
     * @param listener
     */
    public void setOnDismissListener(PopupWindow.OnDismissListener listener) {
        window.setOnDismissListener(listener);
    }

    /**
     * Displays like a popdown menu from the anchor view
     */
    public void showLikePopDownMenu() {
        showLikePopDownMenu(0, 0);
    }

    /**
     * Displays like a popdown menu from the anchor view.
     * 
     * @param xOffset
     *            offset in X direction
     * @param yOffset
     *            offset in Y direction
     */
    public void showLikePopDownMenu(int xOffset, int yOffset) {
        preShow();

        window.setAnimationStyle(R.style.Animations_PopDownMenu);

        window.showAsDropDown(anchor, xOffset, yOffset);
    }

    /**
     * Displays like a QuickAction from the anchor view.
     */
    public void showLikeQuickAction() {
        showLikeQuickAction(0, 0);
    }

    /**
     * Displays like a QuickAction from the anchor view.
     * 
     * @param xOffset
     *            offset in the X direction
     * @param yOffset
     *            offset in the Y direction
     */
    public void showLikeQuickAction(int xOffset, int yOffset) {
        preShow();

        window.setAnimationStyle(R.style.Animations_GrowFromBottom);

        int[] location = new int[2];
        anchor.getLocationOnScreen(location);

        Rect anchorRect = new Rect(location[0], location[1], location[0]
                + anchor.getWidth(), location[1] + anchor.getHeight());

        root.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

        int rootWidth = root.getMeasuredWidth();
        int rootHeight = root.getMeasuredHeight();

        int screenWidth = windowManager.getDefaultDisplay().getWidth();
        //int screenHeight = windowManager.getDefaultDisplay().getHeight();

        int xPos = ((screenWidth - rootWidth) / 2) + xOffset;
        int yPos = anchorRect.top - rootHeight + yOffset;

        // display on bottom
        if (rootHeight > anchorRect.top) {
            yPos = anchorRect.bottom + yOffset;
            window.setAnimationStyle(R.style.Animations_GrowFromTop);
        }

        window.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);
    }

    public void dismiss() {
        window.dismiss();
    }

    public void showAtLocation(int gravity, int x, int y) {
        window.showAtLocation(anchor, gravity, x, y);
    }
} 
```

`FileExplorer`类是使用的一个例子`PopupWrapper`：

```
package com.blablabla.android.helpers.gui.dialog.fexplorer;

import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import com.blablabla.android.helpers.R;
import com.blablabla.android.helpers.gui.ViewHelper;
import com.blablabla.android.helpers.gui.dialog.PopupWrapper;
import com.blablabla.android.helpers.util.FileHelper;
import com.blablabla.android.helpers.util.Log;

import android.app.Activity;
import android.os.Environment;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.WindowManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

/**
 * Simple file explorer popup window. Only allows selecting one normal file (no
 * directory).
 * 
 * @author mymail@blablabla.eu
 * 
 */
public class FileExplorer extends PopupWrapper implements Runnable,
        OnClickListener, OnItemClickListener {

    private static final String TAG = FileExplorer.class.getName();

    /** ListView for the file listing */
    private ListView fileList = null;

    /** Top path (cannot go backward than this) */
    private File rootPath = new File(Environment.getExternalStorageDirectory()
            .getPath());

    /** Current path */
    private File path = new File(Environment.getExternalStorageDirectory()
            .getPath());

    /** Selected item */
    private File selected = null;

    /** Who to notify when file selecting finished */
    private OnFileSelectedListener listener = null;

    /** Show hidden files or not */
    private boolean showHidden = false;

    public FileExplorer(Activity activity, boolean showHidden) {
        this(activity);
        this.showHidden = showHidden;
    }

    public FileExplorer(Activity activity) {
        super(activity);

        // View to show on the popup
        root = ViewHelper.inflateViewById(activity, R.layout.explorer);

        // Parent view
        anchor = ViewHelper.getRootView(activity);

        // Listeners
        initializeViews();
    }

    /** Initializes View listeners */
    private void initializeViews() {

        // Set up the popup window
        window.setFocusable(true);
        window.setContentView(root);
        window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT);
        window.setClippingEnabled(true);

        // Set up ListView
        fileList = (ListView) root.findViewById(R.id.explorer_list);
        fileList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        fileList.setSelector(android.R.drawable.screen_background_light_transparent);
        fileList.setOnItemClickListener(this);

        // Set up button listeners
        ImageButton dirup = (ImageButton) root.findViewById(R.id.explorer_up);
        dirup.setOnClickListener(this);

        Button but = (Button) root.findViewById(R.id.explorer_ok);
        but.setOnClickListener(this);

        but = (Button) root.findViewById(R.id.explorer_cancel);
        but.setOnClickListener(this);
    }

    /** First time load with files in path */
    private void loadList() {

        File[] finalList;
        try {
            finalList = FileHelper.getFileList(path, showHidden);
        } catch (IOException e) {
            Log.e(TAG, e.getMessage(), true);
            return;
        }

        FileExplorerAdapter list = (FileExplorerAdapter) fileList.getAdapter();

        // No adapter set yet
        if (list == null) {
            // Java's way of life... most stupid thing ever
            List<File> aux = new ArrayList<File>();
            aux.addAll(Arrays.asList(finalList));
            FileExplorerAdapter adapter = new FileExplorerAdapter(context,
                    aux);
            fileList.setAdapter(adapter);

        } else { // Modify adapter
            list.clear();
            list.addAll(finalList);
            list.notifyDataSetChanged();
        }
    }

    public void show() {
        loadList();
        showAtLocation(Gravity.CENTER, 0, 0);
    }

    @Override
    public void run() {
        show();
    }

    /** Set path to show */
    public void setPath(String path) {
        this.path = new File(path);
    }

    /** Show or not hidden files */
    public void showHidden(boolean show) {
        showHidden = show;
    }

    /** Refresh the list with current set path */
    public void refresh() {
        loadList();
    }

    @Override
    public void onClick(View v) {       

        // Cannot use a switch/case...
        int id = v.getId();     
        if (id == R.id.explorer_up) {
            dirUp();            
        } else if (id == R.id.explorer_ok) {
            ok();
        } else if (id == R.id.explorer_cancel) {
            //cancel();
        }

    }

    /** Called when "explorer_up" button is clicked */
    public void dirUp() {
        File newPath = path.getParentFile();
        if (newPath != null) {
            path = newPath;
            loadList();
        }
    }

    /** Called when "explorer_ok" button is clicked */
    public void ok() {
        if (selected == null) {
            Log.d(TAG, "Nothing selected");
        } else {
            Log.d(TAG, selected.getPath());
        }
    }

    @Override
    public void onItemClick(AdapterView<?> adapter, View v, int pos, long id) {
        Log.d(TAG, "onItemClick");
        selected = (File) fileList.getItemAtPosition(pos);
    }
} 
```

最后是弹出窗口的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/explorer_title"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center_vertical|center_horizontal"
        android:layout_margin="8dp"
        android:ellipsize="marquee"
        android:text="@string/explorer_title"
        android:textColor="#ffffffff"
        android:textSize="16dp" />

    <ListView
        android:id="@+id/explorer_list"
        android:layout_width="fill_parent"
        android:layout_height="400dp"
        android:layout_margin="8dp" >

    </ListView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="8dp"
        android:orientation="horizontal" >

        <ImageButton
            android:id="@+id/explorer_up"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:src="@drawable/dirup_icon"
            android:onClick="dirUp" />

        <Button
            android:id="@+id/explorer_ok"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:text="@string/ok"
            android:textSize="16dp" />

        <Button
            android:id="@+id/explorer_cancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:text="@string/cancel"
            android:textSize="16dp" />

    </LinearLayout>

</LinearLayout> 
```

这个实现的唯一问题是[这个](https://stackoverflow.com/questions/12706520/problems-with-listview-inside-a-popupwindow)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T13:23:55.690

尝试这个....

```
public class hotelListAct extends ListActivity {

    TextView hn, ad, pr;
    ListView lv;
    ArrayList<search_hotel_setterGetter> result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.combine);

        // this is array of your result which you get while xml parsing.
        result = new search_hotel_xmlhandler().search_hotel;

        lv = getListView();

        MyAdapter madp = new MyAdapter(getApplicationContext(), R.layout.listact,result);
        lv.setAdapter(madp);
        lv.setBackgroundColor(Color.WHITE);

        lv.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

            }
        });
    }

    class MyAdapter extends BaseAdapter {

        ArrayList<search_hotel_setterGetter> arrayList;
        Context baseContext;
        private LayoutInflater mInflater;
        public MyAdapter(Context context, int textViewResourceId, ArrayList<search_hotel_setterGetter> array) {
            super();
            arrayList = array;
            mInflater = LayoutInflater.from(context);
            this.baseContext = context;
        }
        public int getCount() {
            // TODO Auto-generated method stub
            return arrayList.size();
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return arrayList.get(position);
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ViewHolder holder;
            if(convertView == null){
                convertView = mInflater.inflate(R.layout.listact, null);
                holder = new ViewHolder();
                holder.image = (ImageView)convertView.findViewById(R.id.imageView1);
                holder.Hname = (TextView) convertView.findViewById(R.id.TextView01);
                holder.address = (TextView) convertView.findViewById(R.id.TextView02);
                holder.rating = (RatingBar) convertView.findViewById(R.id.ratingBar1);
                holder.city = (TextView) convertView.findViewById(R.id.textView1);
                holder.lowrate = (TextView)convertView.findViewById(R.id.lowrate);

                convertView.setTag(holder);
            }else{
                 holder = (ViewHolder) convertView.getTag();
            }
            if (arrayList != null) {

                 holder.image.setImageBitmap(arrayList.get(position).getImageUrl());
                 holder.Hname.setText(arrayList.get(position).getname());
                 holder.address.setText(arrayList.get(position).getaddress());
                 holder.rating.setRating(Float.parseFloat(arrayList.get(position).getrating()));
                 holder.city.setText(arrayList.get(position).getcity());
                 holder.lowrate.setText(arrayList.get(position).getLowRate());
            } else {
                Log.d("array", "null");
            }
            return convertView;
        }
    }

    class ViewHolder{

        TextView Hname;
        TextView address;
        TextView city;
        ImageView image;
        RatingBar rating;
        TextView lowrate;
    } 
```

# hibernate - 从 Camel Hibernate Componenet 运行 HQL

> ID：10897562
> 
> 赞同：1
> 
> 时间：2012-06-05T12:45:42.683
> 
> 标签：hibernate, hql, apache-camel

有没有直接从 Camel Hibernate 组件执行 HQL 的示例？我查看了[此处](http://camel.apache.org/hibernate.html)给出的示例。但找不到与运行 HQL 相关的任何内容。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:19:30.157

Camel Hibernate 组件不支持该功能。

您可以改用[Camel JPA](http://camel.apache.org/jpa.html)。页面还包含示例。如果您使用 Hibernate 作为包装实现 HQL 可以在消费者 namedQuery 和查询中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-06T09:50:23.210

它没有记录，但你可以这样做：

```
<from uri="hibernate:com.example.Foo?consumer.query=from com.example.Foo order by id"/> 
```

我正在使用 Camel 2.14.1 做到这一点。

# php - 如何将下面的代码从 mysql() 更改为 PDO

> ID：10897566
> 
> 赞同：2
> 
> 时间：2012-06-05T12:45:53.463
> 
> 标签：php, mysql, pdo

我一直在研究，发现我应该在我的 php 中使用 PDO 而不是 mysql() 来连接到数据库。为了帮助我进行研究并能够将多个页面中的所有 mmysql() 代码更改为 PDO，我想知道是否有人可以将下面的代码转换为 PDO，以便我可以看到并能够使用您提供的答案为了帮助我更改其他页面中的代码。

下面是代码：

```
<?php

session_start();

$username="xxx";
$password="xxx";
$database="xxx";

mysql_connect('localhost',$username,$password);

mysql_select_db($database) or die( "Unable to select database");

$i = 0;
$c = count($_POST['gridValues']);

$insertquestion = array();

for($i = 0;  $i < $c; $i++ ){

    $optionquery = "SELECT OptionId FROM Option_Table WHERE (OptionType = '". mysql_real_escape_string($selected_option)."')";
    $optionrs = mysql_query($optionquery);
    $optionrecord = mysql_fetch_array($optionrs);
    $optionid = $optionrecord['OptionId']; 

    $insertquestion[] = "'". mysql_real_escape_string($_SESSION['id'] ) . 
                    ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : '') ."' ,'". 
                    mysql_real_escape_string( $_POST['numQuestion'][$i] ) ."','".  
                    mysql_real_escape_string( $optionid ) ."'";

}

 $questionsql = "INSERT INTO Question (SessionId, QuestionId, QuestionContent, NoofAnswers, ReplyId, QuestionMarks, OptionId) 
    VALUES (" . implode('), (', $insertquestion) . ")";

mysql_query($questionsql);

mysql_close();

?> 
```

还有什么是下面的 PDO 版本：

```
$num = mysql_num_rows($result = mysql_query($query));

while($row = mysql_fetch_array($result)){
} 
```

# ruby-on-rails - 这个网页有一个重定向循环 rails 3

> ID：10897568
> 
> 赞同：0
> 
> 时间：2012-06-05T12:45:59.460
> 
> 标签：ruby-on-rails, redirect, loops, passenger, spree

我在登录 spree 网站的管理部分时遇到问题。我设置了一个子域 `www.bwscatalog.bestwatchsource.com`，它工作正常，但是当我尝试登录到管理端时，我收到了这个错误：

> 此网页有重定向循环

`www.bwscatalog.bestwatchsource.com/admin`托管在 a2 共享主机上。（铁路 3，乘客）

```
SpreeStand::Application.routes.draw do
  root :to => 'products#index'

  resources :products

  match '/locale/set' => 'locale#set'

  resources :tax_categories

  resources :states, :only => :index

  # non-restful checkout stuff
  match '/checkout/update/:state' => 'checkout#update', :as => :update_checkout
  match '/checkout/:state' => 'checkout#edit', :as => :checkout_state
  match '/checkout' => 'checkout#edit', :state => 'address', :as => :checkout

  # non-restful admin checkout stuff
  match '/admin/orders/:order_number/checkout' => 'admin/checkout#update', :method => :post, :as => :admin_orders_checkout
  match '/admin/orders/:order_number/checkout/(:state)' => 'admin/checkout#edit', :method => :get, :as => :admin_orders_checkout

  resources :orders do
    post :populate, :on => :collection

    resources :line_items
    resources :creditcards
    resources :creditcard_payments

    resources :shipments do
      member do
        get :shipping_method
      end
    end

  end
  match '/cart', :to => 'orders#edit', :via => :get, :as => :cart
  match '/cart', :to => 'orders#update', :via => :put, :as => :update_cart
  match '/cart/empty', :to => 'orders#empty', :via => :put, :as => :empty_cart

  resources :shipments do
    member do
      get :shipping_method
      put :shipping_method
    end
  end

  #   # Search routes
  match 's/*product_group_query' => 'products#index', :as => :simple_search
  match '/pg/:product_group_name' => 'products#index', :as => :pg_search
  match '/t/*id/s/*product_group_query' => 'taxons#show', :as => :taxons_search
  match 't/*id/pg/:product_group_name' => 'taxons#show', :as => :taxons_pg_search

  #   # route globbing for pretty nested taxon and product paths
  match '/t/*id' => 'taxons#show', :as => :nested_taxons
  #
  #   #moved old taxons route to after nested_taxons so nested_taxons will be default route
  #   #this route maybe removed in the near future (no longer used by core)
  #   map.resources :taxons
  #

  #from auth
  devise_for :user,
             :controllers => { :sessions => 'user_sessions',
                               :registrations => 'user_registrations',
                               :passwords => "user_passwords" },
             :skip => [:unlocks, :omniauth_callbacks],
             :path_names => { :sign_out => 'logout'}
  resources :users, :only => [:edit, :update]

  devise_scope :user do
    get "/login" => "user_sessions#new", :as => :login
    get "/signup" => "user_registrations#new", :as => :signup
  end

  match '/checkout/registration' => 'checkout#registration', :via => :get, :as => :checkout_registration
  match '/checkout/registration' => 'checkout#update_registration', :via => :put, :as => :update_checkout_registration

  match '/orders/:id/token/:token' => 'orders#show', :via => :get, :as => :token_order

  resource :session do
    member do
      get :nav_bar
    end
  end
  resource :account, :controller => "users"

  #From Dash  
  match '/admin' => 'admin/overview#index', :as => :admin
  match '/admin/overview/get_report_data' => 'admin/overview#get_report_data'

  #From Promo
  namespace :admin do
    resources :promotions do
      resources :promotion_rules
    end
  end

  namespace :admin do
    resources :zones
    resources :users
    resources :countries do
      resources :states
    end
    resources :states
    resources :tax_categories
    resources :configurations, :only => :index
    resources :products do
      resources :product_properties
      resources :images do
        collection do
          post :update_positions
        end
      end
      member do
        get :clone
      end
      resources :variants do
        collection do
          post :update_positions
        end
      end
      resources :option_types do
        member do
          get :select
          get :remove
        end
        collection do
          get :available
          get :selected
        end
      end
      resources :taxons do
        member do
          get :select
          delete :remove
        end
        collection do
          post :available
          post :batch_select
          get  :selected
        end
      end
    end
    resources :option_types do
      collection do
        post :update_positions
      end
    end

    resources :properties do
      collection do
        get :filtered
      end
    end

    resources :prototypes do
      member do
        get :select
      end

      collection do
        get :available
      end
    end

    resource :inventory_settings
    resources :google_analytics

    resources :orders do
      member do
        put :fire
        get :fire
        post :resend
        get :history
        get :user
      end

      resources :adjustments
      resources :line_items
      resources :shipments do
        member do
          put :fire
        end
      end
      resources :return_authorizations do
        member do
          put :fire
        end
      end
      resources :payments do
        member do
          put :fire
        end
      end
    end

    resource :general_settings

    resources :taxonomies do
      member do
        get :get_children
      end

      resources :taxons
    end

    resources :reports, :only => [:index, :show] do
      collection do
        get :sales_total
      end
    end

    resources :shipments
    resources :shipping_methods
    resources :shipping_categories
    resources :tax_rates
    resource  :tax_settings
    resources :calculators
    resources :product_groups do
      resources :product_scopes
    end

    resources :trackers
    resources :payment_methods
    resources :mail_methods
  end

  #from API
  namespace :admin do
    resources :users do
      member do
        put :generate_api_key
        put :clear_api_key
      end
    end
  end

  namespace :api do
    resources :shipments, :except => [:new,:edit] do
      put :event, :on => :member
      resources :inventory_units, :except => [:new,:edit] do
        put :event, :on => :member
      end
    end
    resources :orders, :except => [:new,:edit] do
      put :event, :on => :member
      resources :shipments, :except => [:new,:edit]
      resources :line_items, :except => [:new,:edit]
      resources :inventory_units, :except => [:new,:edit] do
        put :event, :on => :member
      end
    end
    resources :inventory_units, :except => [:new,:edit] do
      put :event, :on => :member
    end
    resources :products, :except => [:new,:edit]
    resources :countries, :except => [:new,:edit] do
      resources :states, :except => [:new,:edit]
    end
    resources :states, :except => [:new,:edit]
  end

  match '/admin' => 'admin/orders#index', :as => :admin

  match '/content/cvv' => 'content#cvv'

  #RAILS3 TODO - we should disable this by default
  #match '/:controller(/:action(/:id(.:format)))'

  # a catchall route for "static" content (except paths with explicit extensions: .html, .ico, etc)
  #if Spree::Config.instance && Spree::Config.get(:use_content_controller)
    match '/*path' => 'content#show'
  #end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:02:59.230

查看服务器的响应标头，它不断地从 HTTPS 重定向到 HTTP 并返回。可能在您的应用程序控制器中。我不熟悉 Spree，但您可以为您的整个站点启用 HTTPS 吗？

# mysql - 在分组 SQL 查询中按范围有效计算结果数

> ID：10897571
> 
> 赞同：0
> 
> 时间：2012-06-05T12:46:06.400
> 
> 标签：mysql

我正在使用一个相当大的数据库，其中每一行都有一个特定的类。每个类又属于一个广义类，该类在单独的表中指定。因此，为了找到项目的广义类，必须执行 JOIN。

此外，其中一列包含某个数值，例如“w”。我正在尝试找到一个有效的查询，该查询给出特定范围内的“w”范围内的项目数，按广义类分组​​。因此，例如，其中一个结果行将给出该类中 w < 500、500 < w < 1500 和 w > 1500 的项目数的细分。

现在，我使用一个预先存在的视图，该视图已经将泛化类连接到结果集中，因此在最终查询中不需要 JOIN。最后的查询使用我在[这里](https://stackoverflow.com/questions/3247630/mysql-group-by-age-range-including-null-ranges)找到的一个技巧来计算特定范围内的项目数量。

```
SELECT generalized_class, 
    SUM(IF(w BETWEEN 1 AND 500, 1, 0)) AS low, 
    SUM(IF(w BETWEEN 500 AND 1500, 1, 0)) AS middle,
    SUM(IF(w > 1500, 1, 0)) AS high
FROM table_vw
GROUP BY generalized_class 
```

但是，我不太确定这是否是最有效的方法。由于数据库相当大，整个事情需要五分钟才能完成。我想计算这类东西通常是一项昂贵的操作，但我只是想知道我是否可以使用一种不同的方法来消除一些负载。任何人？

-edit- 视图的定义并没有什么特别的，就像

```
CREATE VIEW table_vw AS SELECT d.id, d.class, c.generalized_class, <more fields>, 
(w_high/w_low)/2 AS w
FROM base_table d
LEFT OUTER JOIN secondary_table c   
    ON (d.class = c.class) 
```

我很确定还有一个左外连接正在另一个表中，但没有使用该表中的行（正如我所说，这是一个预先存在的视图，所以里面有很多东西不是定制的对于这个查询）。连接行“类”仅在辅助表中编制索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:48:28.080

您的查询需要这么长时间才能执行的原因可能是它没有正确使用索引（或者根本不使用它们！）。使用 EXPLAIN 查看 MySQL 如何执行您的查询。
[http://dev.mysql.com/doc/refman/5.5/en/explain.html](http://dev.mysql.com/doc/refman/5.5/en/explain.html)

另一个原因可能是 MySQL 首先计算视图的整个结果，然后使用它来计算整个查询的结果。
在这种情况下，解决方案是将视图定义与您的查询合并。

# javascript - 带有悬停的引导选项卡弹出菜单

> ID：10897574
> 
> 赞同：0
> 
> 时间：2012-06-05T12:46:13.860
> 
> 标签：javascript, tabs, hover, twitter-bootstrap, flyout

我正在尝试创建一个弹出菜单，其中第二级是一个大 div，用户可以在其中做一些事情。将其视为产品页面。您有 3 种产品，弹出窗口显示产品的功能和信息。在底部可能有一个 DownloadNow-Button 或其他东西。

因此，当悬停在相应的选项卡按钮或浮出控件本身时，浮出控件必须可见。它应该在任何其他时间自动不可见。

它必须通过 Bootstrap-Tab 插件来完成。

粗略的 jsFiddle：http: [//jsfiddle.net/QPfWb/2/](http://jsfiddle.net/QPfWb/2/)

Aaand 现在我卡住了。未将鼠标悬停在按钮或浮出控件上时，浮出控件应消失。我尝试了一些 mouseLeave 函数，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T19:14:51.590

你应该像我的例子一样尝试 .mouseout() [http://jsfiddle.net/baptme/Mf4Vh/](http://jsfiddle.net/baptme/Mf4Vh/)

# c# - 从字典创建文档术语矩阵

> ID：10897580
> 
> 赞同：0
> 
> 时间：2012-06-05T12:46:59.287
> 
> 标签：c#, dictionary, matrix, corpus

我正在尝试预处理一个文本文件，其中每一行都是一个文档的双语法词，它们在该文档中的频率。这是每一行的示例：

i_like 1 你知道 2 .... not_good 1

我设法从整个语料库中创建了字典。现在我想逐行阅读语料库并拥有字典，创建文档术语矩阵，以便矩阵中的每个元素（i，j）将是文档“i”中术语“j”的频率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:11:20.443

创建一个使用字典为每个单词生成整数索引的函数：

```
Dictionary<string, int> m_WordIndexes = new Dictionary<string, int>();

int GetWordIndex(string word)
{
  int result;
  if (!m_WordIndexes.TryGet(word, out result)) {
    result = m_WordIndexes.Count;
    m_WordIndexes.Add(word, result);
  }
  return result;
} 
```

结果矩阵为：

```
List<List<int>> m_Matrix = new List<List<int>>(); 
```

处理文本文件的每一行会生成一行矩阵：

```
List<int> ProcessLine(string line)
{
  List<int> result = new List<int>();
  . . . split the line in a sequence of word / number of occurences . . . 
  . . . for each word / number of occurences . . .{
    int index = GetWordIndex(word);      
    while (index > result.Count) {
      result.Add(0);
    }  
    result.Insert(index, numberOfOccurences);
  }
  return result;
} 
```

您一次读取一行文本文件，调用`ProcessLine()`每一行并将结果列表添加到 m_Matrix。

# c# - viewstate 变量总是可用的？

> ID：10897592
> 
> 赞同：0
> 
> 时间：2012-06-05T12:47:54.603
> 
> 标签：c#, asp.net, .net

我在考虑是否在每次页面访问（相同的浏览器会话）（如但客户端）时`ViewState`始终可用自定义变量还是仅在页面回发时可用？`Session`我知道这是客户端数据，始终与`Request`数据包和`Response`来自服务器的数据包一起封装。

我现在正在测试这个，我做了以下事情：

在 Home.aspx 上：

```
protected void Page_Load(object sender, EventArgs e)
{
    ViewState["test"] = "test1";
}
protected void Button1_Click(object sender, EventArgs e)
{
    string test = ViewState["test"].ToString();

    Server.Transfer("Default.aspx");
} 
```

在 Default.aspx 上：

```
protected void Page_Load(object sender, EventArgs e)
{
    string test = ViewState["test"].ToString();
} 
```

但我明白了`NullReferenceException`。所以这意味着它`ViewState["test"]`不存在，因为它`ViewState`是全新的和再生的。所以我的结论是你`ViewState`只能在表单回发时使用变量（但事实上，你总是在表单回发之后进行重定向，所以我不能总是使用 ViewState ......）。

我的观点对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:53:51.640

ViewState 可以通过不同的（或自定义的）提供程序以不同的方式进行配置，或者可以完全禁用。但是，*默认*提供者是一个表单字段，所以是的：在*默认配置*情况下，它只会存在于 POST 中，而不会存在于 GET 中。传输*本质上*类似于 GET。

如果您需要不相关页面之间的数据，但与用户相关 - 使用会话状态或基于 cookie 的东西。

在不相关的新闻中：视图状态在很多方面都非常可怕 - 想想小猫！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:53:18.627

您在这里所做的是偶然发现了 ASP.NET Web 窗体中的基本理解点之一，以及它如何将 HTTP 的无状态特性从您身上抽象出来。

*Session*变量和*Viewstate*的区别很简单：

*   会话存储在*服务器端*，并在浏览器返回可识别的 cookie 时生成
*   Viewstate 完全存储在*客户端*隐藏`<input>`标签中，**这意味着它们在每次回发时都是新鲜提交的**

正如您所经历的，Session 可以跨页面存在，而 Viewstate 仅在发布到同一页面时可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:31:40.377

如果您使用[`HttpServerUtility.Transfer Method (String, Boolean)`](http://msdn.microsoft.com/en-us/library/caxa892w.aspx) url 和`true`参数，那么它将保留 QueryString 和 Form 集合。但是您仍然不能直接从第二页访问 ViewState。这是一种访问视图状态的方法。

主页.aspx：

```
protected void Page_Load(object sender, EventArgs e)
{
    ViewState["test"] = "test1";
}

protected void Button1_Click(object sender, EventArgs e)
{
    Server.Transfer("Default.aspx", true);
}

// adding this method to return view state

public StateBag ReturnViewState()
{
    return ViewState;
} 
```

Default.aspx：这里使用 PreviousPage 我们可以调用该页面上的方法并获取视图状态

```
private StateBag PreviousPageViewState
{
    get
    {
        StateBag returnValue = null;
        if (PreviousPage != null)
        {
            Object objPreviousPage = (Object)PreviousPage;
            MethodInfo objMethod = objPreviousPage.GetType().GetMethod
                    ("ReturnViewState");
            return (StateBag)objMethod.Invoke(objPreviousPage, null);
        }
        return returnValue;
    }
}

protected void Page_Load(object sender, EventArgs e)
{
    if (PreviousPage != null)
    {
        if (PreviousPageViewState != null)
        {
            var text = PreviousPageViewState["test"].ToString();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:54:19.520

使用 Page_PreRender，Page_Load 在视图状态处于可用状态 IIRC 之前。

# mysql - 如何在事务中包装 mysql 存储函数

> ID：10897594
> 
> 赞同：3
> 
> 时间：2012-06-05T12:48:06.213
> 
> 标签：mysql, function, transactions

```
DROP FUNCTION IF EXISTS my_func;
DELIMITER ||
CREATE FUNCTION my_func(arg_id INT) RETURNS VARCHAR(200)
BEGIN
    DECLARE local_id INT;
    DECLARE local_name VARCHAR(200);
    START TRANSACTION; /* <-- this is allowed */
        SELECT      id, name
            INTO    local_id, local_name
            FROM    table
            WHERE   id = arg_id
            FOR UPDATE;
        SELECT my_other_function(local_name) INTO local_name;
        UPDATE table SET name = local_name;
    COMMIT; /* <-- this is not allowed
        and yields an "Explicit or
        implicit commit is not
        allowed..." error */
    RETURN local_name;
END||
DELIMITER ; 
```

return 语句是隐式提交吗？

您应该如何确保某个功能**作为**事务运行？

将其包装在交易中？

```
START TRANSACTION;
    SELECT my_func(33); /* <-- no transaction statements inside the function */
COMMIT; 
```

在函数内部启动事务并提交？

```
SELECT my_func(33); /* <-- contains only the START TRANSACTION line */
COMMIT; 
```

此外，我研究了这个问题，发现一些信息类似于以下内容：“存储函数中的语句不能保证以声明的顺序执行，这可能会使二进制日志记录（和隐式复制）不一致”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:11:21.133

我以前必须使用它，它对我有用：

**选项1**

```
SET autocommit = {0 | 1} 
```

完成您想做的事情后，您可以重新启用它或调用显式提交。

**选项 2** 要为单个语句系列隐式禁用自动提交模式，请使用 START TRANSACTION 语句：

```
START TRANSACTION;
SELECT @A:=SUM(salary) FROM table1 WHERE type=1;
UPDATE table2 SET summary=@A WHERE type=1;
COMMIT; 
```

我从 mysql 网站本身得到这个 - [MySQL](http://dev.mysql.com/doc/refman/5.5/en/commit.html)

* * *

对于您的情况，我认为在函数之前将 autocommit 设置为 false 可以解决问题（如果您查看上面的描述，启动事务是同样的事情）。这样，在交易期间，您的功能不会自动提交。

# android - Android：从相机返回后创建新活动，而不是返回到以前的活动

> ID：10897605
> 
> 赞同：3
> 
> 时间：2012-06-05T12:48:50.423
> 
> 标签：android, android-activity, camera, instance

我有一个活动 A，您可以在其中按下按钮并在从图库中选择图片和拍摄新照片之间进行选择。当从图库中选择一张照片时，一切都很好，并且图像显示在活动 A 中。如果你想拍一张新照片，相机应用程序将被打开，你可以拍照并保存。现在奇怪的事情发生了：不是返回到您选择拍照的上一个活动 A，而是创建并启动一个新的活动 A (A') 实例。我不知道为什么它不返回活动 A... 活动 A 是否可能超时，这就是为什么要创建一个新实例的原因？或者任何其他想法为什么要创建一个新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-22T07:11:52.980

放

> 机器人：noHistory =“真”

在 MainActivity 中

> AndroidManifest.xml

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T12:51:52.600

用于`startActivityForResult`启动相机活动。当您想返回上一个活动时，只需使用`setResult`并调用`finish()`当前活动即可。您可能`startActivity()`再次调用活动 A，因此它再次被创建。所以试试这个，让我知道它可以解决问题。:)

# delphi - COM 端口已在 Windows 7 中打开

> ID：10897606
> 
> 赞同：2
> 
> 时间：2012-06-05T12:48:56.463
> 
> 标签：delphi, serial-port, port

当我尝试使用 AsyncPro (TApdComPort) 连接到 Windows 7 上的 COM 端口时，我收到类似“设备已打开”的错误消息。但相同的应用程序在 Win Xp 机器上运行良好。我使用 Delphi 6 开发程序。请帮我解决这个问题。感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:51:05.637

您使用什么组件连接到 COM 端口？

如果您使用 CreateFile API 打开端口，请使用 GetLastError() API 来获取问题的详细错误。

如果这对您没有帮助，则表示这是硬件问题

不知道您正在使用 ApdComPort 的组件，但您可以做一个简单的测试编写一个简单的应用程序来打开端口，就像这样

```
var
  comHandle : THandle;
begin
  comHandle := CreateFile('COM66',GENERIC_READ or GENERIC_WRITE,0,nil,OPEN_EXISTING,0,0);
  if comHandle = INVALID_HANDLE_VALUE then ShowMessage(SysErrorMessage(GetLastError))
  else ShowMessage('Port opened');
end //Make shure to replace COM66 with your actual COM Port you wish to open 
```

如果它显示端口已打开，那么这是您正在使用的组件的问题，所以我会推荐这个[http://sourceforge.net/projects/comport/](http://sourceforge.net/projects/comport/)在此处发布其他错误消息以找到解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:09:18.347

我有一个类似的问题，通过在串行端口高级属性（通过设备管理器）中将端口名称从 COM1 更改为 COM4 来解决。

然后一切正常。有些程序仍将重命名的端口视为 COM1，但现在它们可以访问该端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T19:29:09.040

对我来说，问题是远程桌面。我取消选中连接中的所有本地资源。不知何故，远程桌面阻塞了 com 端口！

# apache - 将 .htaccess 传输到生产服务器会导致找不到 URL 错误

> ID：10897611
> 
> 赞同：1
> 
> 时间：2012-06-05T12:49:06.210
> 
> 标签：apache, .htaccess, redirect, web, hosting

我刚刚花了一个下午的时间为我正在进行的项目编写了一个 .htaccess 文件。

它可以在我的测试环境中运行，但是当我将其传输到实时服务器时，出现 404 错误：

> 在此服务器上找不到请求的 URL /albums/hua-hin/。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 404 Not Found 错误。

我的 .htaccess 如下：

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^albums/([^/]+)/image/([^/]+)/([^/]+) /getimage.php?a=$1&i=$2&pt=$3 [NC]
RewriteRule ^albums/([^/]+)/tags/([^/]+) /index.php?a=$1&tag=$2 [NC]
RewriteRule ^albums/([^/]+)/sag/([^/]+) /index.php?a=$1&sag=$2 [NC]
RewriteRule ^albums/([^/]+)/ /index.php?a=$1 [NC] 
```

我想知道我的服务器设置方式是否与它有关。这是我托管多个站点的共享帐户。

www.mymaindomain.com 指向服务器（我的空间）的根目录。那里有一个 .htaccess 文件，然后将所有流量从 www.mymaindomain.com 指向 (root)/mymaindomain

该站点位于 (root)/anotherdomain 中，并直接指向那里。

我在 (root)/domain3、(root)/yetanotherdomain 等处有其他站点；据我所知，没有一个使用 .htaccess 文件！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:33:40.673

好的，我找到了问题！

我在根目录中有一个名为 albums.php 的文件，我所有的重定向都基于 /albums/

出于某种原因，虽然这在测试环境中没有引起任何问题，但它导致生产服务器在我身上出现 404。将 albums.php 文件重命名为不同的文件解决了这个问题。

# javascript - 如何在 asp.net 中使用 asp:HyperlinkField 和 javascript 而不是普通的 html 超链接和 javascript

> ID：10897612
> 
> 赞同：-1
> 
> 时间：2012-06-05T12:49:09.147
> 
> 标签：javascript, asp.net, .net, hyperlink

我正在尝试用 asp:hyperlink 和 javascript 替换普通的 html 超链接和 javascript。“返回 javascript();” 函数在 asp:hyperlink 列中不起作用。请帮我解决一下这个。我的纯 html 链接在下面我想用 asp:hyperlink 替换它

```
<asp:TemplateField HeaderText="Edit">
                        <ItemTemplate>
                            <a href="javascript:void(0)" onclick="return fn_Edit_Customer(<%# Eval("CustomerID") %>);" target="_blank" title="Click here to Edit" style=" text-decoration:underline; color:Blue; cursor:hand;"  >Edit</a>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

我想在下面放一些东西

```
<asp:HyperLinkField HeaderText="Edit" Text="Edit"  NavigateURL="javascript:fn_editCustomer({0})"  Target="_blank"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:05:23.550

使用`OnClick="fn_editCustomer({0});"`- 如果它对您有帮助，请始终接受答案，否则人们将**停止**帮助您..

# nhibernate - 使用 DTO 集合 NHibernate 查询 DTO

> ID：10897613
> 
> 赞同：1
> 
> 时间：2012-06-05T12:49:22.243
> 
> 标签：nhibernate, alias, fetch, dto

我有 ObjectA（带有相应的 ObjectADTO）和 ObjectB 的集合（带有相应的 ObjectBDTO）。如何在 ObjectB 上使用 join 查询所有 ObjectA 并将它们都映射到 DTO？我真的不想从 db 查询所有内容。

```
 class ObjectA {
        public string Name { get; set; }
        public byte[] Garbage { get; set; }
        public IEnumerable<ObjectB> Collection { get; set; }
    }

    class ObjectB {
        public string Name { get; set; }
        public byte[] Garbage { get; set; }
        public ObjectA Parent { get; set; }
    } 
```

// 映射到 =>

```
 class ObjectADTO {
        public string Name { get; set; }
        public IEnumerable<ObjectBDTO> Collection { get; set; }
    }

    class ObjectBDTO {
        public string Name { get; set; }
        public ObjectADTO Parent { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T06:29:25.887

可以做这样的事情：

```
ObjectB objectBAlias = null;
var query = _session.QueryOver<ObjectA>()
.JoinAlias(x=>x.Collection, ()=> objectBAlias, JoinType.LeftOuterJoin)
.List();

var list = query.Select(x=>new ObjectADTO
{
   Name=x.Name,
   Children=x.Collection.Select(c=>new ObjectBDTO {Name=c.Name, Parent=x).ToList()
})
.ToList(); 
```

没有检查VS中的语法，但你明白了

# microsoft-metro - 如何在 Metro 风格应用中触发挂起、恢复和后台事件

> ID：10897616
> 
> 赞同：0
> 
> 时间：2012-06-05T12:49:28.240
> 
> 标签：microsoft-metro

这可能看起来很愚蠢，但我看不到本文所述的“调试工具栏上的事件列表”：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974425%28v= vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974425%28v=vs.110%29.aspx)

谁能给我一个更详细的描述，我在哪里可以找到它？我有 Visual Studio Ultimate Beta。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T11:14:31.563

右键单击菜单区域上的任何位置并选择调试位置，您将拥有它。

# arrays - 无法检索所有数组元素

> ID：10897619
> 
> 赞同：2
> 
> 时间：2012-06-05T12:49:38.153
> 
> 标签：arrays, bash

我有一个脚本，我在其中定义了两个数组。现在取决于传递的数组名称（作为参数），我想在下面的函数中处理相同的。早些时候，在我使用之前，我什至没有在变量“ARRAY”中获得任何元素`${!}`

现在的问题是，当我打印数组内容（或该数组中的元素数量）时，我只得到第一个元素。

有什么建议么？

脚本：

```
#!/bin/bash

APP=$1

process_data() {
    ARRAY="${!1}"
    echo "No of array elements: ${#ARRAY[@]}"
    echo "Array content: ${ARRAY[@]}"
}

ORADATA=(
"oraserver/content:abcDaily/ORAServer/"
"oraserver/w3s-ix86:abcDaily/ORAServer/"
)

SQLDATA=(
"sqlserver/content:abcDaily/SQLServer/"
"sqlserver/w3s-ix86:abcDaily/SQLServer/"
)

process_data ${APP[@]} 
```

命令：

```
-bash-2.05b$ ./testarray.sh ORADATA 
```

输出：

```
No of array elements: 1
Array content: oraserver/content:abcDaily/ORAServer/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:11:56.230

这是您修改后的有效脚本（在 dreaded 的帮助下`eval`）：

```
#!/bin/bash

APP=$1

process_data() {
   ARRAY=( $(eval echo \${$1[@]}) )
   echo "No of array elements: ${#ARRAY[@]}"
   echo "Array content: ${ARRAY[@]}"
}

ORADATA=(
"oraserver/content:abcDaily/ORAServer/"
"oraserver/w3s-ix86:abcDaily/ORAServer/"
)

SQLDATA=(
"sqlserver/content:abcDaily/SQLServer/"
"sqlserver/w3s-ix86:abcDaily/SQLServer/"
)

process_data ${APP[@]} 
```

**输出：**

```
No of array elements: 2
Array content: oraserver/content:abcDaily/ORAServer/ oraserver/w3s-ix86:abcDaily/ORAServer/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T03:56:53.173

这是一个没有 eval 的版本（因此它可以正确处理数组值中的 shell 元字符）：

```
#!/bin/bash

APP=$1

process_data() {
    ARRAYVAR="$1[@]"   # This just textually appends "[@]" to $1
    ARRAY=("${!ARRAYVAR}")   # Use indirect expansion to get contents of array, store as new array
    echo "No of array elements: ${#ARRAY[@]}"
    echo "Array content: ${ARRAY[@]}"
}

ORADATA=(
"oraserver/content:abcDaily/ORAServer/"
"oraserver/w3s-ix86:abcDaily/ORAServer/"
)

SQLDATA=(
"sqlserver/content:abcDaily/SQLServer/"
"sqlserver/w3s-ix86:abcDaily/SQLServer/"
)

process_data $APP   # Note that APP is not an array, so the [@] bit was irrelevant 
```

例子：

```
$ ./testarray.sh ORADATA
No of array elements: 2
Array content: oraserver/content:abcDaily/ORAServer/ oraserver/w3s-ix86:abcDaily/ORAServer/ 
```

# php - 控制剩余时间的输出

> ID：10897620
> 
> 赞同：0
> 
> 时间：2012-06-05T12:49:42.070
> 
> 标签：php, mysql, html

我正在尝试添加一些 php，以显示我网站上产品的剩余时间，有点像拍卖。一切都显示得很好，但是当时间变短时，它显示`0d 34h 12m`这意味着 0 天、34 小时和 12 分钟，我想知道如果没有这样的日子，是否有办法摆脱 0d 位`34h 12m`，它只是让它看起来更好，当没有几个小时只剩下几分钟时也是如此。

这是计算剩余时间的代码

```
$date = date('m/d/Y h:i:s', time());
$date3 = new DateTime($date);
$date4 = new DateTime($time_ending);
$interval_date = $date3->diff($date4);
$time_left = $interval_date->d."d ". $interval_date->h."h ". $interval_date->i."m "; 
```

无论如何我可以做到这一点吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:54:51.133

是的，最短的方法是

```
$time_left = (($interval_date->d) ? $interval_date->d.'d ' : '')
           . (($interval_date->h) ? $interval_date->h.'h ' : '')
           . $interval_date->i.'m '; 
```

简单解释`(cond) ? (stmA) : (stmB)`
等于`if(cond){ stmA } else{ stmB }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:57:20.497

您可以为此使用函数，请参阅：

```
function BetterLook($time, $sulfix)
{
    if ($time > 0)
    {
        return "$time $sulfix";
    }

    return "";
} 
```

所以...

```
$time_left = BetterLook($interval_date->d, "d "). BetterLook($interval_date->h, "h "). BetterLook($interval_date->i, "m "); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:52:59.743

只是写下来，没有测试。

```
$d = $interval_date->d;
$h = $interval_date->h;
$m = $interval_date->i; 

$time_left = ($d ? $d."d " : "") . ($d or $h ? $h."h " : "") . $i."m "; 
```

更长，也许更容易阅读的版本：

```
$time_left = "";

if($d) {
    $time_left .= $d . "d ";
}

if($d or $h) {
    $time_left .= $h . "h ";
}

$time_left .= $m . "m "; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T12:54:24.330

您是否尝试过一个简单的`if`语句来查看是否`$interval_date->d`小于 1？如果是这样，那么只需显示剩余时间。您可以在每个分段中执行此操作。这没有经过测试，只是一个建议。

# dns - 如何将 Office 365 试用帐户与我自己的域相关联？

> ID：10897625
> 
> 赞同：1
> 
> 时间：2012-06-05T12:50:06.897
> 
> 标签：dns, ms-office, office365

如何将 office 365 试用帐户与我自己的域关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:54:19.180

要将自定义域名添加到 Office 365，请使用添加域向导，如下所示。

*   在“管理”页面的左窗格中的“管理”下，单击“域”，然后单击“添加域”。
*   在“添加域”页上的“指定域”下，键入要添加的域名，然后单击“下一步”。
*   按照向导中的步骤使用 Office 365 验证您添加的域名是否属于您。有关分步说明，请参阅在任何域名注册商处验证域。

最新帮助： http: [//onlinehelp.microsoft.com/en-us/office365-enterprises/ff637620.aspx](http://onlinehelp.microsoft.com/en-us/office365-enterprises/ff637620.aspx)

# c# - 将 DataRow 合并到 SQL Server 数据库表

> ID：10897626
> 
> 赞同：1
> 
> 时间：2012-06-05T12:50:21.913
> 
> 标签：c#, winforms, sql-server-2008, datagridview

在我的 SQL Server 2008 R2 数据库中，我有一个现有的表`[dbo].[abc].[MyTable]`。现在我想从我的 DataGridView 中读取行并将它们合并到`MyTable`.

假设我使用存储过程。

我不知道循环和合并行。

感谢帮助。

```
private void saveRecords(DataGridView dgv)
{
        foreach (DataGridViewRow row in dgv.Rows)
        {
            DataRow myRow = (row.DataBoundItem as DataRowView).Row;
            // merge it to table in database.
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:54:38.180

您可以使用 SQLBulkCopy 将网格中的所有数据提取到数据库中的表中，然后简单地使用 SQL 将数据合并到一起（假设它们具有某种相关数据）

此链接将提供如何进行批量复制：

[http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server](http://www.sqlteam.com/article/use-sqlbulkcopy-to-quickly-load-data-from-your-client-to-sql-server)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:56:18.060

您应该使用命令生成器，看看[这个 SqlCommandBuilder 示例](http://www.dotnetperls.com/sqlcommandbuilder)。

# java - 如何配置消息驱动 Bean 应用程序和 Glassfish 以使用来自远程消息代理的消息？

> ID：10897630
> 
> 赞同：3
> 
> 时间：2012-06-05T12:50:37.287
> 
> 标签：java, glassfish, ejb, jms, messaging

我创建了一个简单的 MDB 应用程序并将其部署到带有嵌入式 MQ 代理的 Glassfish v 3.1。名称为“jms/Queue”的目标资源也已创建。请看下面的部分代码：

```
 @MessageDriven(
       mappedName = "jms/Queue",
       activationConfig = {
          @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
        }
    )

    public class MessageBean implements MessageListener {

         public void onMessage(Message message) {
........ 
```

这很好用，但是如何配置此应用程序以使用远程 MQ 代理实例（位于另一台主机上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:21:23.283

你有两个选择：

*   在为实体配置 JNDI 资源时[使用 REMOTE 模式](http://www.packtpub.com/article/configuring-jms-resources-in-glassfish-1)`ConnectionFactory`，`Queue`以便这些实体由远程 OpenMQ 托管。

*   配置网桥以将托管在不同实例中的两个队列连接在一起。这是有关该功能的[文档参考](http://mq.java.net/4.4-content/jmsbridge-funcspec.html)。

# html - 右边距不起作用

> ID：10897635
> 
> 赞同：0
> 
> 时间：2012-06-05T12:50:54.107
> 
> 标签：html, css

有人可以帮我解决这个问题[http://jsfiddle.net/q4rdL/2/](http://jsfiddle.net/q4rdL/2/) 我正在做一个菜单，其中包含下一个和上一个按钮，一个向右浮动，另一个向左浮动，我添加了一个宽度为 100% 高度为 100 的 div % 在 pre 和 next divs 之间，左边距工作正常右边距根本不起作用

这是代码：

```
 <div id="menu" style ="width : 100% ; height:50px ; border : 2px solid red ; position : absolute  ; top:0 ; display : none" >
            <div id="pre" style ="height:100% ; width: 50px ; border :1px solid green ; float :left ; left:0  "><</div>
            <div id="menuContent" style="width:100% ; height:100% ; border : 5px solid green ; position:absolute; margin-left :60px ;" > </div>
            <div id="next" style ="height:100% ; width: 50px ; border :1px solid green ; float :right ; right:0 ; position:absolute  ">></div>
            </div>
            <div id="show_hide" style ="width : 100% ; height:70px ; position : absolute  ; top:0" ></div> 
```

问题是如何使边距正确有效，为什么要这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:18:46.527

试试这个[http://jsfiddle.net/q4rdL/32/](http://jsfiddle.net/q4rdL/32/)

我删除宽度 100% 并更改某些 div 上的“位置”，解决方案可以拉伸到任何分辨率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T12:56:06.577

据我所知，您应该删除 position:absolute 元素的 id = "next"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:10:58.087

我试图清理你的 html 并将其移动到非内联 css。

**HTML**：

```
<div id="menu">
    <div id="pre"><</div>
    <div id="menuContent"></div>
    <div id="next">></div>
</div>
<div id="show_hide"></div>​ 
```

**CSS**：

```
#menu {
    width: 100%; 
    height: 50px; 
    border: 2px solid red; 
}

#pre {
    height: 100%; 
    width: 3%;
    border: 1px solid green;
    float: left;
    padding-left:7px;
}

#menuContent {
    float:left;
    width: 90%; 
    height: 100%; 
    border: 5px solid green; 
}

#next {
    height: 100%; 
    width: 3%; 
    border: 1px solid green; 
    float: right; 
    padding-left:7px;
}

#show_hide {
    width: 100%; 
    height: 70px; 
    position: absolute;
    top:0;
}​ 
```

[现场演示](http://jsfiddle.net/q4rdL/31/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:12:36.033

如果你的意思是为潜水设置一个右边距`menuContent`，你必须把`width`它改成更低，100% 意味着你的视图的宽度和边距将被添加，所以你的浏览器会有一个水平滚动。

试试这个 ：

`<div style="height: 100%; border: 5px solid green; position: absolute; width: 90%; margin: 0pt 58px;" id="menuContent"> </div>`

另外，我真的不知道你在做什么，但我希望你有想法，我的回答对你有帮助。

**编辑：**哦，我更改`menu`为相对位置，请参阅此链接：[http ://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:25:13.093

我尝试了自己的不使用浮点数的版本。这一切都被定位为绝对的。我删除了`width: 100%`菜单上的 div，因为由于您拥有的边框，它总是会关闭 2px。我没有使用 div 来改变其宽度，而是简单地使用`position: absolute; left: 50%; margin-left: -<half the size of #menuContent>`. 因此，如果 #menuContent 为 500 像素，则`margin-left: -250;`. 让我知道你的想法：[JS Fiddle](http://jsfiddle.net/tq84U/4/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-05T13:29:17.270

在我看来，如果你改变结构会好得多；检查这个[小提琴](http://jsfiddle.net/Ghq4u/)。

**HTML：**

```
<div id="menu">
    <table width="100%" cellspacing="0" cellpadding="0">
        <tr>
            <td id="pre">            
                <
            </td>
            <td id="menuContent">            

            </td>
             <td id="next">            
                >
            </td>
       </tr>
    </table>
</div> 
```

**CSS：**

```
#menu {
    width : 100% ; 
    height:50px ; 
    border : 1px solid red ; 
    top:0 ; 
}

#pre, #next {
    width: 50px;
}

#menu td {
    border : 1px solid red ; 
    height: 50px;
    vertical-align: middle;
    text-align: center;
} 
```

# informix - 文件从一个目录移动到另一个目录

> ID：10897637
> 
> 赞同：1
> 
> 时间：2012-06-05T12:50:56.977
> 
> 标签：informix, 4gl

我有一个保存文件名和该文件位置的变量，我需要将该文件从一个位置移动到另一个位置。如何使用 informix 4gl 来完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:08:51.273

将使用 RUN 命令：

```
LET cmd = "mv ", old_location, "/", file_name, " ", new_location

RUN cmd 
```

这假定`old_location`,`file_name`和`new_location`都是 VARCHAR 变量而不是 CHAR 变量。如果它们是 CHAR，则需要在连接之前去除尾随空格：

```
LET cmd = "mv ", old_location CLIPPED, "/", file_name CLIPPED, " ", new_location CLIPPED 
```

（您可以省略最后一个 CLIPPED。）这还假设文件名或位置中没有空格。如果可以存在空格，则必须更加努力；如果您需要处理文件名中的引号或换行符（等），您必须更加努力地工作。

# asp.net - 使用 ASP.NET 显示和更新 HTML 表

> ID：10897645
> 
> 赞同：0
> 
> 时间：2012-06-05T12:51:30.933
> 
> 标签：asp.net, html

所以，我对网络编程很陌生，我只了解基本语法，没有太多高级功能或任何东西。另外，我真的没有任何使用 Javascript 的经验，但我再次从我使用 C++ 的经验中非常了解语法和一般编程知识，所以我可能会弄明白。

这就是我想要做的。我有一个返回 DataSet 变量/数组/数据结构的 Web 服务。由于这是一个 .NET 类型，我认为使用 ASP.NET 访问该服务也是最简单的。我可以从 Web 服务中读取数据并通过指定表、行和列来显示各个元素，因此我知道数据就在那里。但是，我想在表格中显示结果。我确实让这个工作（但是我现在没有代码），但只有在页面第一次加载时。我正在访问的 Web 服务方法执行 SQL 查询，我希望能够在文本框中输入查询字符串，将其提交给服务器，并让它更新/填充/创建一个表。我确信这很简单，但就像我说的那样，我对网络编程真的很陌生。

我记得在 w3 的教程网站上看到一个页面，该页面在 HTML 表中使用“Web Pages”语法，并使用 foreach 循环进行迭代、创建新行、输入数据等。我明白这一点，但我不知道如何使用“Web Forms”类型的项目完成类似的事情（我一直在使用 Visual Studio 或 Notepad++，因为我在我的工作 PC 上执行此操作，并且我认为 .cshtml 文件使用不同的编辑器）

我正在考虑某种形式的内联代码，或者从 C# 代码（在代码隐藏文件中）修改 HTML 元素，或者在 HTML 元素本身中使用内联代码。我不确定如何在 ASP.NET 中编写事件处理程序，您可以使用 HTML 表单/按钮来调用 ASP.NET 函数（同样，它位于代码隐藏文件中）吗？另外，很抱歉，如果有人问过类似的问题，我有点发疯了，因为我上周刚刚学会了所有这些网络开发的东西！顺便说一句，有人可以解释将 ASP.NET 元素返回到浏览器时会发生什么情况吗？服务器是否基本上将它们转换为基本的 HTML 元素？我正在开发的应用程序将在移动设备上使用，因此它需要在客户端尽可能简单。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:12:30.927

您应该能够在 ASP.NET 应用程序中执行您希望执行的操作，而不会让人头疼。您应该能够将控件添加到您的页面，然后在回发时调用 Web 服务。

是否有理由将结果绑定在内联代码中？如果不是，为什么不考虑使用[ASP.NET gridview](http://msdn.microsoft.com/en-us/library/aa479339.aspx)或[Data Repeater Control](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)。您可以将控件添加到网页，然后在从 Web 服务检索到值后将它们绑定到代码中。

使用gridview，您应该能够设置您想要显示的列，设置数据源，然后调用数据绑定。当呈现给浏览器时，这将显示为 HTML 表格。

使用中继器控件，您将不得不做更多的工作来设置项目模板，但它也应该适合您。

# asp.net - Windows Azure Web 角色日志文件

> ID：10897646
> 
> 赞同：2
> 
> 时间：2012-06-05T12:51:31.917
> 
> 标签：asp.net, windows, azure, azure-configuration

是否有一种简单的方法可以在 ASP.Net MVC3 Azure Web 角色中跟踪或编写一些日志？
我只想写一些信息并查看日志文件是否已打印。
喜欢：WriteLine("Start Function A");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:57:35.920

您需要一种在 Windows Azure 之外获取这些跟踪语句的方法，而 Windows Azure 处理此问题的方式是通过其诊断监视器。然后，所有跟踪都被路由到一个表 (WADLogsTable)，然后您可以从角色实例本身或从 Windows Azure 之外运行的应用程序查询此表（通过执行 Linq 查询，可能是 Cerebrata 的[诊断管理器](http://www.cerebrata.com/products/AzureDiagnosticsManager/)等）。此表将汇总您所有角色实例的日志输出。

我的一位队友 Greg Oliver 最近写了一篇关于基础知识的[博客](http://blogs.msdn.com/b/golive/archive/2012/04/21/windows-azure-diagnostics-from-the-ground-up.aspx)。

# c# - 查找类型 T 的所有实例

> ID：10897653
> 
> 赞同：4
> 
> 时间：2012-06-05T12:51:51.290
> 
> 标签：c#, reflection, types, instance

我想获取特定类型的所有实例。最好在没有所有实例列表的情况下找到它们。我只找到了解释如何找到接口实现的解决方案。反射是否提供了实现这一目标的任何方法？

# android - 将值传递给我不想显示的活动

> ID：10897656
> 
> 赞同：0
> 
> 时间：2012-06-05T12:51:55.423
> 
> 标签：android, android-intent, android-activity

我有一个活动（比如活动 1），它将一堆额外内容发送到另一个活动（活动 2）。我希望将这些额外内容发送到活动 2，但我根本不希望显示该活动。

我想将意图发送到活动 2，然后直接进入活动 3。

这样做的原因是：

> 活动 1：用户从 UI 中选择一些选项
> 
> --> Activity 2 发送一些选择的参数
> 
> --> 启动了一个使用活动 2 中的参数的服务
> 
> 显示活动 3，这是用户的下一个 UI。

一种方法是启动活动 2，并让活动 2 启动活动 3。但这对我不起作用，因为即使没有内容视图，活动 2 仍会尝试暂时显示。此外，如果在活动 3 中使用后退按钮，则会显示活动 2。我不想显示活动 2。活动 2 应该是服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:58:13.020

您可以使用标志阻止在按 BACK 后显示活动：查看[http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG%5FACTIVITY%5FNO%5FHISTORY)

您可以让您的 Activity 2 不 setContentView() 并且不会显示任何内容

为什么Activity 1不能直接调用Activity 3？Activity 2 需要添加数据吗？也许您可以将所有代码移至 Application 对象的子类并通过它管理状态？

# jquery - var anSelected = fnGetSelected(oTable) 未执行

> ID：10897661
> 
> 赞同：2
> 
> 时间：2012-06-05T12:52:27.753
> 
> 标签：jquery, datatables

```
var oTable = $('#posGridView').dataTable( {
"bPaginate": false,
"bFilter": false,
"bSort": false,
"bInfo": false,
"oLanguage": {
"sZeroRecords": "",
"sEmptyTable": ""
}

} ); 
```

和

```
$("#posGridView tbody").click(function(event) {
$(oTable.fnSettings().aoData).each(function (){
$(this.nTr).removeClass('row_selected');
});
$(event.target.parentNode).addClass('row_selected');
}); 
```

上面的代码工作正常，当我选择 row 时，它会突出显示。但是当我按下 Delete Button 时，选择的行没有被删除。

```
$('#delete').click( function() {
var anSelected = fnGetSelected( oTable );
oTable.fnDeleteRow( anSelected[0] );
} ); 
```

当我发出警报（anSelected）时，我知道语句 var anSelected = fnGetSelected( oTable ); 不执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T12:59:48.470

有几件事需要考虑

*   您正在选择 id on `$('#delete')`。到目前为止，我了解您有一个逐行删除按钮，因此您将拥有多个具有相同 ID 的元素。这是不允许的。向删除按钮添加一个 css 类（或使用现有的）并像这样选择`$('#posGridView .delete')`

*   如果您要动态添加行，则需要使用`[on](http://api.jquery.com/on/)`方法附加点击事件。否则新添加的行将没有点击处理程序。代码将是这样的`$('#posGridView').on('click', '.delete', function(){...})`

# php - 似乎无法访问 php.ini

> ID：10897662
> 
> 赞同：0
> 
> 时间：2012-06-05T12:52:28.887
> 
> 标签：php, shell

我正在使用 shell 登录到 ubuntu 服务器。我想在 php.ini 中启用 curl

我使用了 whereis php.ini 命令，它显示 /usr/bin/php 作为 php.ini 的位置。

但是，每次我尝试将 CD 写入 php 时，它都会显示“php 不是目录” 我如何编辑我的 php.ini？

还是我需要在其他地方创建一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T12:54:06.080

/usr/bin/php 是 PHP 的可执行解释器。

您需要找到现有的 php.ini 文件：

```
$ find / -name php.ini 
```

您可能希望在 /etc 中的某个位置找到它，因此您可能会发现这样更快：

```
$ find /etc -name php.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T12:55:32.703

PHP 会告诉你它从哪里加载配置文件或者它期望它通过运行：

```
php --ini 
```

或者：

```
php -i | grep -i php.ini 
```

# android - 通过 LoaderManager 销毁加载器有时会引发异常？

> ID：10897665
> 
> 赞同：2
> 
> 时间：2012-06-05T12:52:33.380
> 
> 标签：android

我需要销毁一个加载器，有时我会得到以下异常：

```
java.lang.NullPointerException
at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:960)
at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:768)
at android.support.v4.app.FragmentManagerImpl.startPendingDeferredFragments(FragmentManager.java:1104)
at android.support.v4.app.LoaderManagerImpl.destroyLoader(LoaderManager.java:672)
at com.me.test.MyTest.test(MyTest.java:213) 
```

我正在执行以下操作：

```
LoaderManager lm = ...;
Loader loader = ...;
lm.destroyLoader(loader.getId()); 
```

这是否意味着装载机可能已经不知何故已经消失了？还有人看到这个吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:56:17.653

Mayeb 加载程序持有对超出范围的 Context 的引用：当您更改活动或加载程序时会发生这种情况吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T12:06:43.683

对我来说没问题，要么他们更新了库，要么这是它应该被调用的顺序：

```
@Override
public void onDestroy() {
    getActivity().getSupportLoaderManager().destroyLoader(0);
    super.onDestroy();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T07:01:50.600

你得到 NPE 是因为你没有意识到`loaderManager.getLoader(id)`如果加载器不再存在，它可以返回 null。

[Android 开发者文档](http://developer.android.com/reference/android/app/LoaderManager.html)说：

> `public abstract Loader<D> getLoader (int id)`
> 
> 如果没有找到匹配的 Loader，则返回具有给定 id 或 null 的 Loader。

所以你需要的是添加一个空检查，如：

```
LoaderManager lm = ...;
Loader loader = ...;
if (loader != null) {    //this will fix you NPE
    lm.destroyLoader(loader.getId());
} 
```

或者你可以避免所有的大惊小怪，并在下面的代码行中销毁加载器：

```
lm.destroyLoader(LOADER_ID); 
```

# java - 如何在 JAX-RS 资源中注入 ConnectionFactory？

> ID：10897666
> 
> 赞同：2
> 
> 时间：2012-06-05T12:52:42.417
> 
> 标签：java, dependency-injection, jax-rs, neo4j

我的团队目前正在重新打包 Neo4j webadmin 控制台，使其可用作 Glassfish 标准 JavaEE Web 应用程序。[我们在neo4j-jca-connector](https://github.com/alexsmirnov/neo4j-connector)之上构建它。

我们已经找到了一种重新打包各种网络资源并从我们的战争中提供服务的方法。我们现在与各种 REST 端点作斗争。

事实上，这些端点都将它们的 neo4j`Database`作为`@Context`元素注入（例如参见[RestfulGraphDatabase 构造函数](http://components.neo4j.org/neo4j-server/milestone/apidocs/org/neo4j/server/rest/web/RestfulGraphDatabase.html#RestfulGraphDatabase%28javax.ws.rs.core.UriInfo,%20org.neo4j.server.database.Database,%20org.neo4j.server.rest.repr.InputFormat,%20org.neo4j.server.rest.repr.OutputFormat,%20org.neo4j.server.rest.paging.LeaseManager%29)）。我们可以通过 JNDI 命名和@Resource 注入来访问 Neo4J 数据库。但是，由于我们不想更改这些 REST 资源的任何代码行，我们如何将数据库注入该 JAX-RS 资源中？

我们可以在 web.xml 中做点什么吗？

我们是否必须编写一个 JAX-RS 应用程序类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:35:58.007

为了添加自定义 @Context 参数，您必须为您希望注入的每种类型创建一个 @Provider 类（实现 Injectable）。有关详细信息，请参阅[此](https://stackoverflow.com/questions/10897933/where-do-context-objects-come-from)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:04:23.430

我认为这是在[http://docs.neo4j.org/chunked/snapshot/server-unmanaged-extensions.html](http://docs.neo4j.org/chunked/snapshot/server-unmanaged-extensions.html)中使用的，因此您可以查看数据库对象是如何插入其中的，[https://github.com/ neo4j/社区/树/主/服务器](https://github.com/neo4j/community/tree/master/server)？

# c# - 在richTextBox中显示ftp站点的源代码

> ID：10897673
> 
> 赞同：0
> 
> 时间：2012-06-05T12:53:03.730
> 
> 标签：c#, ftp

我想在richTextBox 中显示使用C# 的ftp 站点的源代码。在浏览器中它看起来像

```
4/13/12 4:52:00 PM
4/13/12 4:54:00 PM
9/2/10 12:00:00 AM
4/13/12 4:46:00 PM
5/8/12 9:13:00 AM
3/7/09 12:00:00 AM 
```

但是当我在 richTextBox 看到这个时：

```
Apr 13 16:52
Apr 13 16:54
Sep  2  2010
Apr 13 16:46
May  8 09:13
Mar  7  2009 
```

我想显示数据，就像在浏览器中查看的一样。

我的代码：

```
string url="ftp://ftp.something.com/"
FtpWebRequest req;
req = (FtpWebRequest)WebRequest.Create(url);            
            FtpWebResponse res = (FtpWebResponse)req.GetResponse();
            StreamReader sr = new StreamReader(res.GetResponseStream());
            richTextBox1.Text = sr.ReadToEnd(); 
```

我不知道我错在哪里，因为在某些行中我得到的是年份而不是时间，而在某些情况下得到的是时间而不是年份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:07:09.527

在您发送请求并获得回复之前，您可以添加一种方法来请求更好/更多详细信息。尝试：

```
req.Method = WebRequestMethods.Ftp.ListDirectoryDetails; 
```

或者

```
req.Method = WebRequestMethods.Ftp.ListDirectory; 
```

# xml - 获取列表中每个元素的子字符串并在 XSLT 中使它们不同

> ID：10897676
> 
> 赞同：1
> 
> 时间：2012-06-05T12:53:19.573
> 
> 标签：xml, xslt, xpath

我需要用 XSLT 转换一个 XML 文件，这个任务有点棘手。

我有带有名称的属性，`attr_1000_a`而数字和后缀是动态的，所以这`attr_2000_b`也是有效的。

此外，还有`<row>`组合相关数据的元素。我需要对它们进行转换，以便将相同编号的属性（即`attr_1000_a`和`attr_1000_b`）放入同一个元素中。

让我给你举个例子。以下输入 XML：

```
<root>
  <row id="1">
    <foo attr_1000_a="true">1</foo>
    <foo attr_1000_b="true">2</foo>
    <foo attr_1000_c="true">3</foo>
  </row>
  <row id="2">
    <foo attr_1000_a="true" attr_1000_b="true" attr_1000_c="true">10</foo>
    <foo attr_2000_a="true" attr_2000_b="true" attr_2000_c="true">20</foo>
  </row>
  <row id="3">
    <foo attr_1000_a="true" attr_2000_a="true" attr_3000_a="true">100</foo>
    <foo attr_1000_b="true" attr_2000_b="true" attr_3000_b="true">200</foo>
    <foo attr_1000_c="true" attr_2000_c="true" attr_3000_c="true">300</foo>
  </row>
</root> 
```

您可以看到属性可以通过多种方式组合，这使得转换变得困难。每个属性在每个属性中都是唯一的，`<row>`但可以位于任何 `<foo>`元素中。此外，每个都`<foo>`可以有任意数量的属性。

期望的结果：

```
<result>
  <row id="1">
    <field attr="1000">
      <a>1</a>
      <b>2</b>
      <c>3</c>
    </field>
  </row>
  <row id="2">
    <field attr="1000">
      <a>10</a>
      <b>10</b>
      <c>10</c>
    </field>
    <field attr="2000">
      <a>20</a>
      <b>20</b>
      <c>20</c>
    </field>
  </row>
  <row id="3">
    <field attr="1000">
      <a>100</a>
      <b>200</b>
      <c>300</c>
    </field>
    <field attr="2000">
      <a>100</a>
      <b>200</b>
      <c>300</c>
    </field>
    <field attr="3000">
      <a>100</a>
      <b>200</b>
      <c>300</c>
    </field>
  </row>
</result> 
```

我想我必须以某种方式获取所有数字的列表（例如 1000、2000 和 3000），然后遍历所有具有这种属性的元素。

我如何使用 XSLT 做到这一点？这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:41:51.940

这是一个示例样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:strip-space elements="*"/>
<xsl:output indent="yes"/>

<xsl:key name="k1" 
  match="row/foo/@*" 
  use="concat(generate-id(../..), '|', substring-before(substring-after(local-name(), '_'), '_'))"/>

<xsl:template match="root">
  <result>
    <xsl:apply-templates/>
  </result>
</xsl:template>

<xsl:template match="row">
  <xsl:copy>
    <xsl:copy-of select="@*"/>
    <xsl:apply-templates select="foo/@*[generate-id() = generate-id(key('k1', concat(generate-id(../..), '|', substring-before(substring-after(local-name(), '_'), '_')))[1])]" mode="field"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="foo/@*" mode="field">
  <field attr="{substring-before(substring-after(local-name(), '_'), '_')}">
    <xsl:apply-templates select="key('k1', concat(generate-id(../..), '|', substring-before(substring-after(local-name(), '_'), '_')))"/>
  </field>
</xsl:template>

<xsl:template match="foo/@*">
  <xsl:element name="{substring-after(substring-after(local-name(), '_'), '_')}">
    <xsl:value-of select=".."/>
  </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T13:56:38.237

**又快又脏，这个 xslt**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

    <xsl:output indent="yes"/>

    <xsl:template match="root">
        <result>
         <xsl:apply-templates select="@*|node()"/>
        </result>
    </xsl:template>

    <xsl:template match="foo/@*">
        <xsl:element name="{substring-after(local-name(),'000_')}">
            <xsl:value-of select=".."/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="row">
        <row id="{@id}">
            <xsl:for-each-group select="foo/@*" group-by="substring(local-name(),1,9)">
                <field attr="{substring-after(current-grouping-key(),'attr_')}">
                   <xsl:apply-templates select="current-group()"/>
                </field>
            </xsl:for-each-group>
        </row>
    </xsl:template>

    <xsl:template match="foo">
        <xsl:apply-templates  select="@*"/>
    </xsl:template>

     <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>   
</xsl:stylesheet> 
```

**应用于此输入**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <row id="1">
        <foo attr_1000_a="true">1</foo>
        <foo attr_1000_b="true">2</foo>
        <foo attr_1000_c="true">3</foo>
    </row>
    <row id="2">
        <foo attr_1000_a="true" attr_1000_b="true" attr_1000_c="true">10</foo>
        <foo attr_2000_a="true" attr_2000_b="true" attr_2000_c="true">20</foo>
    </row>
    <row id="3">
        <foo attr_1000_a="true" attr_2000_a="true" attr_3000_a="true">100</foo>
        <foo attr_1000_b="true" attr_2000_b="true" attr_3000_b="true">200</foo>
        <foo attr_1000_c="true" attr_2000_c="true" attr_3000_c="true">300</foo>
    </row>
</root> 
```

**产生这个结果**

```
<?xml version="1.0" encoding="UTF-8"?>
<result>
    <row id="1">
      <field attr="1000">
         <a>1</a>
         <b>2</b>
         <c>3</c>
      </field>
   </row>
    <row id="2">
      <field attr="1000">
         <a>10</a>
         <b>10</b>
         <c>10</c>
      </field>
      <field attr="2000">
         <a>20</a>
         <b>20</b>
         <c>20</c>
      </field>
   </row>
    <row id="3">
      <field attr="1000">
         <a>100</a>
         <b>200</b>
         <c>300</c>
      </field>
      <field attr="2000">
         <a>100</a>
         <b>200</b>
         <c>300</c>
      </field>
      <field attr="3000">
         <a>100</a>
         <b>200</b>
         <c>300</c>
      </field>
   </row>
</result> 
```

**魔法就在**

```
 <xsl:element name="{substring-after(local-name(),'000_')}">
        <xsl:value-of select=".."/>
    </xsl:element> 
```

这将创建具有动态名称的 a/b/c 元素并向上移动一个节点以从父节点获取值（我们当前在属性中）。

**并且在**

```
 <xsl:for-each-group select="foo/@*" group-by="substring(local-name(),1,9)">
            <field attr="{substring-after(current-grouping-key(),'attr_')}">
               <xsl:apply-templates select="current-group()"/>
            </field>
        </xsl:for-each-group> 
```

*它*`foo/@*`使用部分名称 ( )重新组合所有属性 ( )。如您所见 ，第一个随后可用作，后者可用作。*`substring(local-name(),1,9)``current-group()``current-grouping-key()`*

# c# - 存储库 NInject linq 异常：同一上下文上的不同上下文异常

> ID：10897687
> 
> 赞同：0
> 
> 时间：2012-06-05T12:54:06.247
> 
> 标签：c#, linq, entity-framework, exception-handling, ninject

我正在使用 mvc 和存储库方法，将 ninject 与 InRequestScope() 一起使用。使用 EF 我有一个包含我所有表的 edmx 文件。我正在通过一个测试项目测试我的功能，它运行良好。但是在运行该站点（并使用 ninject）时，我得到了异常：

> 指定的 LINQ 表达式包含对与不同上下文关联的查询的引用

我假设因为每次我调用数据库时，我的 dbContext 都会立即创建和销毁，然后 EF 认为我有两个不同的上下文。我该如何解决这个问题？

# javascript - Jquery preventdefault（）函数不起作用

> ID：10897691
> 
> 赞同：2
> 
> 时间：2012-06-05T12:54:35.073
> 
> 标签：javascript, jquery, jquery-ui, javascript-events

这是我的[Jsfiddle](http://jsfiddle.net/hhyZk/1/)

实际上，我正在尝试在提交之前验证文本字段。如果文本字段为空，我想显示 errormsg_box，如果不是，则提交表单。但在这里它不起作用这是我的脚本：

```
$("form").submit(function(event) {

    var text_val = $('#emailid').val();
    alert(text_val);
    if (text_val != ' ') {
        $('.errormsg_box').show();
        return false;
        event.preventdefault();
    }
    else if (text_val != '') {
        $('.errormsg_box').hide();
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:56:33.977

```
if ($.trim(text_val) === "") {
    return false;
    // Or
    event.preventDefault(); // event.preventdefault()
                            // javascript is case sensitive.
} 
```

**完整代码：**

```
$("form").submit(function(event) {
    var text_val = $('#emailid').val();

    if ($.trim(text_val) === "") {
        $('.errormsg_box').show();
        return false;
    }
    else 
        $('.errormsg_box').hide();
});​ 
```

[**现场演示**](http://jsfiddle.net/hhyZk/6/)

如果你想验证文本是一个有效的电子邮件地址：

```
var regex = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
if (!regex.test($.trim(text_val)))
    ... Error 
```

[**现场演示**](http://jsfiddle.net/hhyZk/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:55:00.057

```
$("form").submit(function(event) {    
    var text_val = $.trim($('#emailid').val()); // $.trim() for remove space
    if (!text_val) { // check for empty
        $('.errormsg_box').show();
        return false;
        //or
        //event.preventDefault();
    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/hhyZk/9/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T12:56:47.840

**编辑**这可能是一个更好的解决方案：

```
<input id="emailid" class="required email" /> 
```

并使用 jQuery 验证插件： [http ://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

```
$("#form").validate(); 
```

所以是这样的：

```
$(document).ready(function () {
    $("#form").submit(function () {
        var container = $('errormsg_box');

        var validator = $("#form").validate({
            errorContainer: container,
            errorLabelContainer: $("ul", container),
            ignore: ":not(:visible)", 
            wrapper: 'li',
            rules: {
                emailid: { required: true, email: true }
            },
            messages: {
                emailid: "The e-mailaddress is invalid!"
            }
        });
        if ($("#form").valid()) {
            alert('ok nice!');
        }      
    });
}); 
```

# css - 让 CSS 过渡持续时间双向工作？

> ID：10897694
> 
> 赞同：2
> 
> 时间：2012-06-05T12:54:48.360
> 
> 标签：css, css-transitions

我意识到 CSS 过渡总是适用于已添加的类，而不是删除的类。但我想知道我的问题是否有一个优雅的解决方案。我有一组盒子，当悬停时，它们会变成一个圆圈。当按下按钮时，它们会增长/缩小。

我希望它们慢慢长大和缩小，但很快变成圆形/正方形。

此刻，它们慢慢地变大和缩小，很快变成圆形，**又慢慢变回方形。**这当然是因为盒子的 CSS 过渡持续时间设置为慢速，因此当圆形类被移除时，它们会恢复到原始速度。我提出了一个可行的解决方案（此处未包含），用于`setTimeout`暂时添加“快速”类并将其删除。它确实解决了这个问题，但对我来说感觉非常难看。

你们有没有遇到过这个问题并想过更好的方法？或者这只是超出了 CSS 过渡的范围？

**CSS：**

```
.box {
    background: red;
    width: 100px;
    height: 100px;
    margin: 10px;
    -webkit-transition: all 2s;
}

.big {
  width: 300px;    
}

.circle {
    background: blue;
    border-radius: 50px;
    -webkit-transition-duration: .5s;
} 
```

**jQuery：**

```
$('.box').on('mouseenter', function() {
    $(this).addClass('circle');            
})

$('.box').on('mouseleave', function() {
    $(this).removeClass('circle');            
})    

$('.makeBig').on('click', function() {
    $('.box').toggleClass('big');            
}) 
```

**HTML：**

```
<div class="box"></div>
<div class="box"></div>
<div class="box"></div>
<button class="makeBig">Grow!</button> 
```

**jsFiddle：**

[http://jsfiddle.net/VDyPG/1/](http://jsfiddle.net/VDyPG/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:17:46.440

可以单独使用 CSS3 来完成。您需要做的就是将所有转换移动到`.box`规则中，如下所示：

```
.box {
     background-color: red;
     width: 100px;
     height: 100px;
     margin: 10px;
     -webkit-transition: width 2s, border-radius .5s, background-color .5s;
}

.big {
   width: 300px;    
}

.circle {
    background-color: blue;
    border-radius: 50px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T14:19:11.210

Sófka 有正确的答案，但我想补充一点，而不是这样做：

```
$('.box').on('mouseenter', function() {
    $(this).addClass('circle');            
})

$('.box').on('mouseleave', function() {
    $(this).removeClass('circle');            
}) 
```

你可以这样做：

```
$('.box').hover(function() {
    $(this).addClass('circle');
}, function () {
    $(this).removeClass('circle');
}); 
```

# jquery - 将输入和输出值隐藏为文本，并能够通过显示输入来更改值

> ID：10897697
> 
> 赞同：0
> 
> 时间：2012-06-05T12:54:53.627
> 
> 标签：jquery

你能告诉我一个关于jquery的插件或解决方案吗？

我需要有一个电子邮件类型的输入字段。输入时，它显示就像附加的图像一样。

![点击更改](../Images/3a244d08932493de51a0fdf4a4b35f76.png)

您可以单击更改链接，输入将再次显示该值。

最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:01:44.563

像这样的东西？ `<span>Eugene@gmail.com</span><a href="#" onclick="var value = $(this).prev().text();$(this).prev().hide().after('<input type=text name=email value="'+value+'">')">Change</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:02:04.107

```
$("#changelink").click(function(){
   $("#emaildiv").text($("#inputarea").val())
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:11:17.373

您可以使用[Jeditable 之](http://www.appelsiini.net/projects/jeditable)类的插件，也可以实现如下自定义解决方案：

**HTML**

```
<label for="email">Email:</label>
<div id="email">eugene@gmail.com</div>
<a href="#" id="changeEmail" data-target="email">change</a> 
```

**JS**

```
// Switch to Input //
$('#changeEmail').bind('click', function(e){

    // Prevent Switch if Already Input //
    if ($(this).get(0).tagName != 'input') {
        var $target = $('#'+$(this).data('target')); // Get Target Element
        var val = $target.text(); // Get Current Target Value

        // Swap Elements //
        $target.replaceWith('<input id="email" type="text" value="'+val+'" />');

        // Hide Change //
        $('#changeEmail').hide();
    }
});

// Switch to Div //
$(document).delegate('#email', 'blur', function(){

    // Prevent Switch if Input is Empty //
    if ($(this).val() != ''){
        $(this).replaceWith('<div id="email">'+$(this).val()+'</div>');
        $('#changeEmail').show();
    } else {
        $('#changeEmail').hide();
    }
}); 
```

**[此处更新演示](http://jsfiddle.net/n9BkM/5/)**

我希望这有帮助！

# vb.net - Verifying Files In A Folder Based On Line Count

> ID：10897704
> 
> 赞同：-1
> 
> 时间：2012-06-05T12:55:08.757
> 
> 标签：vb.net, loops, count, wait, verify

Ok, I'm trying to figure the best way to verify the contents of a folder based on another count via a listbox. Let me further explain.

Here is my current code to count the number of PDFs in two different locations and total them together for a grand total.

```
 'counts test1 pdfs
    Dim f As String, c As Long
    f = Dir$("\\Test1\PDFs\*.pdf")
    Do While Len(f) <> 0
        c = c + 1
        f = Dir$()
    Loop

    'counts test2 pdfs
    Dim n As String, d As Long
    n = Dir$("\\Test2\PDFs\*.pdf")
    Do While Len(f) <> 0
        d = d + 1
        n = Dir$()
    Loop

    GtotalPDFs = c + d 
```

Here is my current code to count files I've selected in a listbox.

```
 'adds temp1 files
    Dim sum1 As Double
    For Each item As String In Me.ListBox6.Items
        sum1 += Double.Parse(item)
    Next

    'adds temp2 files
    Dim sum2 As Double
    For Each item As String In Me.ListBox7.Items
        sum2 += Double.Parse(item)
    Next

    'adds temp3 files
    Dim sum3 As Double
    For Each item As String In Me.ListBox8.Items
        sum3 += Double.Parse(item)
    Next

    'adds all files together to get a grand total
    Gtotal = sum1 + sum2 + sum3 
```

I have another process before this that will create the PDF's based on the files listed in the listbox.

What I am having trouble with is verifying that the PDFs that are created in the Test1 and Test2 folders equal the counts from the listboxes. This count needs to match before running the next process. I'm kind looking for wait or loop until both counts match, again before running the next process.

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:16:27.000

我很乐意提供帮助，但您将不得不进一步解释您正在尝试做什么以及您的问题是什么。现在，还不是很清楚你需要什么。但是，为了让您开始，可以对您的代码进行一些明确的改进。

首先，永远不要使用 Dir 和 Len。这些方法只是为了向后兼容 VB6，它们甚至不是在 VB6 中使用的良好编程实践！使用 System.IO 命名空间中的对象，例如：

```
Dim count1 As Integer = Directory.GetFiles("\\Test1\PDFs", "*.pdf").Length
Dim count2 As Integer = Directory.GetFiles("\\Test2\PDFs", "*.pdf").Length 
```

其次，为什么在第二个代码示例中使用双精度数？如果它们是简单的文件计数，那么您应该使用整数，而不是双精度数。但是，根本不清楚您在这里做什么。在这种情况下，Double.Parse 方法起作用的唯一原因是列表中的每个项目都包含一个数字。但是在您的描述中，您谈论列表时就好像它们包含文件名一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:25:32.417

```
Imports System.IO 

Dim PDFFileCount As Integer = 0
Dim ListboxCount As Integer = 0
While Not (PDFFileCount > 0 And PDFFileCount = ListboxCount)
  PDFFileCount = Directory.GetFiles("\\Test1\PDFs", "*.pdf").Count + _
                 Directory.GetFiles("\\Test2\PDFs", "*.pdf").Count
  ListboxCount = ListBox6.SelectedItems.Count + ListBox7.SelectedItems.Count + _
                 ListBox8.SelectedItems.Count
  Application.DoEvents()
End While 
```

# objective-c - Cocoa 中有没有办法知道 NSTextField 是否脏？如果编辑过？

> ID：10897710
> 
> 赞同：0
> 
> 时间：2012-06-05T12:55:42.997
> 
> 标签：objective-c, cocoa

可可中有没有办法知道 a`NSTextField`是否脏？如果已编辑？

我知道有委托方法：

```
- (void)textDidChange:(NSNotification *)notification; 
```

但我想知道编辑后，当我关闭窗口时是否`NSTextField`已编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:59:18.327

在委托方法中 -`textDidBeginEditing`或者`textDidChange`您可以设置一个 bool 变量，然后您可以检查该 bool 变量的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:59:28.340

如果您不想`NSTextField`通过委托方法比较“”对象的“之前”和“之后”值，则可以始终比较“”对象的“之前”和“之后”值，`NSTextField`而*无需*在窗口时使用委托被关闭或解雇。

换句话说，`NSTextField`在窗口/视图出现时保存“”内容的副本，然后将先前保存的内容与当前内容进行比较。然后你会看到你的不同之处。

既然您有 95 个不同的字段（哇！）并且可能从某个地方设置这些字段，为什么不以编程方式枚举 95 个不同的字段并将它们与之前保存的字符串进行比较，看看其中有多少发生了变化？

# c# - Portable Class Library in MVC 4 / Razor with Visual Studio 2012 RC?

> ID：10897712
> 
> 赞同：40
> 
> 时间：2012-06-05T12:55:52.697
> 
> 标签：c#, asp.net, razor, .net-4.5, portable-class-library

since working with Visual Studio 2012 RC we get an HttpCompileException when using a class out of an portable class library (.net 4.5 & metro profile) within a razor view.

Exception: (german to english translated on google, sorry)

```
System.Web.HttpCompileException (0x80004005):     
c:\Users\user\AppData\Local\Temp\Temporary ASP.NET        
Files\root\1995167a\126b7c4d\App_Web_index.cshtml.1fbcdbb1.zaniprm5.0.cs(29):

error CS0012: The type 'System.Object' is not in a referenced assembly is 
defined. Add a reference to the Assembly "System.Runtime, Version = 4.0.0.0, 
Culture = neutral, PublicKeyToken = b03f5f7f11d50a3a" added.   

at
System.Web.Compilation.AssemblyBuilder.Compile()   
System.Web.Compilation.BuildProvidersCompiler.PerformBuild()    
System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
... 
```

Solution structure:

*   Portable Class Library (.net 4.5 & metro profile)
    *   public class User { ... }
*   MVC 4 (.net 4.5)
    *   Reference to Portable Class Library
    *   Razor-View
        *   @model User

Since Visual Studio 2012 RC adding reference "System.Runtime" is not possible any more.

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-09T23:16:39.977

在 Views\Web.config 文件中，在该`<system.web>`部分下添加以下代码：

```
<compilation debug="true" targetFramework="4.5">
    <assemblies>
        <add assembly="System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </assemblies>
</compilation> 
```

您可能还需要参考许多其他程序集，具体取决于您的可移植代码使用的类型。您可以在遇到错误时添加每个程序集，也可以在`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades`.

# php - need a regular expression in javascript which allows text having special character * in the begining of input data

> ID：10897713
> 
> 赞同：-3
> 
> 时间：2012-06-05T12:56:00.010
> 
> 标签：php, javascript, regex

I am new to regex. I need a regex for JavaScript code that allows special character * in the beginning of text input, but not anywhere else in the text.

example : it should allow ***text**, it should not allow ***text*abcd**

I would need a similar regex for PHP as well.

I have tried using "/^\s*/", but this doesn't work. Anyways I dont have anyidea of regex. I have started learning it.

Thanks Dora

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:00:37.190

学习如何使用正则表达式的一部分是知道什么时候不需要它。在这种情况下，对于 PHP，没有正则表达式的解决方案就足够了：

```
if (strrpos($str, '*') > 0) {
  // invalid position of *
} 
```

对于 JavaScript：

```
if (str.lastIndexOf('*') > 0) {
    // invalid position for *
} 
```

它基本上找到了特殊字符的最后一个位置；如果它出现在字符串中并且不是第一个字符，则条件内的代码将被执行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T13:02:30.600

```
^\*?[^*]+$ 
```

*   均值从字符串的`^`开头匹配
*   `\*?`可选匹配 a （`*`表示`?`零或一匹配）
*   匹配一个`[^*]+`或多个不是`*`
*   这`$`意味着匹配必须在字符串的最后结束，以确保没有任何额外`*`的 s

这可以在[PHP](http://www.regular-expressions.info/php.html)和[Javascript](http://www.regular-expressions.info/javascript.html)中使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:00:30.497

应该送你到那里。

```
^\*[^\*]+$    // forces the first asterisk

^\*?[^\*]+$   // allows the first asterisk 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T13:20:34.260

如果我理解得很好，我认为你应该像这样 \* 那样转义 *，还记得写这个 \\* 以防你在字符串中写正则表达式

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T12:59:00.700

试试这个代码：

```
/^(\*)?[^*]+/ 
```

`^`符号的意思`in the beginning`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T13:00:21.980

试一试这个表达式：

```
^.?[^*]+$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-05T13:03:17.450

试试这个正则表达式：

```
/^\*[^\*]+$/g 
```

这是[jsFiddle](http://jsfiddle.net/3uRhc/)中的一个示例。

# internet-explorer - progressbar: GIF animation in IE slower than in FF/Chrome

> ID：10897714
> 
> 赞同：0
> 
> 时间：2012-06-05T12:56:03.510
> 
> 标签：internet-explorer, animated-gif

I have an animated gif.

It's a progress bar and the animation is a light which is moving from left to right and then back from right to left in a loop.

The progessbar has a `width` of 250px.

Every e.g. 100ms I'm adding 1px to the width of the progessbar. So after a short time it has grown to the full size.

Then it is shown for a specific time in full size.

I've made the animation in `photoshop` and it has `58 frames` that are displayed with `0.05 seconds delay`, that the animation is smoothly.

But the animation is not smoothly (it's too slow) in `internet explorer`. In `Firefox` and `Chrome` it's working well.

What is the best do to?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:01:18.197

当 IE 比 0.1 快时，似乎 IE 将 GIF 动画减慢到 0.1。请参阅此[错误描述](https://bugzilla.mozilla.org/show_bug.cgi?id=125137#c0)。

有关详细说明，另请参阅[此答案](https://webmasters.stackexchange.com/questions/26994/why-is-this-gifs-animation-speed-different-in-firefox-vs-ie)。

根据这个[MSDN 博客](http://blogs.msdn.com/b/ieinternals/archive/2010/06/08/animated-gifs-slow-down-to-under-20-frames-per-second.aspx)，**IE 10**将支持高达 0.02 的帧速率：

> IE10 Consumer Preview 增加了支持的帧率；帧可能会以低至 20 毫秒的延迟显示。如果服务器指定较低的延迟，则动画将延迟到 100 毫秒以实现旧版兼容性。

# html - How to target four layers deep UL with css without affecting its parents

> ID：10897715
> 
> 赞同：0
> 
> 时间：2012-06-05T12:56:03.640
> 
> 标签：html, css, css-selectors

I am creating drop down menu using UL and I did. except I can't target four layer deep UL because as I assume target path code gets repeated and css gets confused.

I want to target last ul in this `ul lu ul lu ul li ul` sequence and tell him to opacity:0

ul is wrapped by #menu div. consequently I wrote: `#menu li li li ul {opacity:0}` I think css here can't tell the difference between `li li ul` and `li li li ul` so changes get applied to parent as well.

Any solutions that I am missing?

thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:52:18.817

这就是我为我的多级下拉菜单所做的，仅使用 css .. 我希望这会对你有所帮助，你可以以同样的方式添加更多级别

```
#menu {
    width:1000px;
    margin:0 auto;
    height:44px;
    z-index:300;
}

#menu ul {
    list-style:none;
    position:relative;
}

#menu ul li {
    float:left;
}

#menu ul li a {
    display:block;
    padding:13px 35px 13px 35px;
    text-decoration:none;
    color:#FFF;
}

#menu ul li a:hover {
    background:#4255a4 url(../images/nav_hover.jpg) bottom left repeat-x;
}

#menu ul li ul {
    position:absolute;
    top:43px;
    visibility:hidden;
    z-index:300;
    width:184px;
    height:auto;
    -moz-box-shadow: 1px 1px 10px #333;
    -webkit-box-shadow: 1px 1px 10px #333;
    box-shadow: 1px 1px 10px #333;
}

#menu ul li ul li {
    position:relative;
    float:none;
}

#menu ul li ul li a {
    padding:8px 10px 8px 10px;
}

#menu ul li:hover ul {
    visibility:visible;
}

#menu ul li ul:hover {
    visibility:visible;
}

#menu ul li:hover ul li ul{
    visibility:hidden;
}

#menu ul li ul:hover li ul{
    visibility:hidden;
}

#menu ul li ul li ul {
    position:absolute;
    top:0px;
    margin:0px 0px 0px 185px;
    visibility:hidden;
    z-index:300;
    width:184px;
    height:auto;
    -moz-box-shadow: 1px 1px 10px #333;
    -webkit-box-shadow: 1px 1px 10px #333;
    box-shadow: 1px 1px 10px #333;
}

#menu ul li ul li ul li {
    float:none;
}

#menu ul li ul li ul li a {
    padding:8px 10px 8px 10px;
}

#menu ul li ul li:hover > ul {
    display:block;
    visibility:visible;
    z-index:300;
}

#menu ul li ul li:hover ul {
    display:block;
    visibility:visible;
    z-index:300;
}

#menu ul li ul li ul:hover {
    display:block;
    visibility:visible;
    z-index:300;
} 
```

# android - 数组列表不起作用

> ID：10897722
> 
> 赞同：0
> 
> 时间：2012-06-05T12:56:36.107
> 
> 标签：android, list, download, sd-card

我已经编写了将内容下载到 sdcard 上的代码，现在我正在尝试列出下载的内容.xml.当我这样做时，我收到异常，因为 java.lang.IllegalStateException：ArrayAdapter 要求资源 ID 是 TextView。

我的主要课程是

```
public class Downloadlist extends ListActivity {
    private List<String> item = null;
    private List<String> path = null;
    private String root="/sdcard";
    private TextView myPath;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mydownload);
        myPath = (TextView)findViewById(R.id.path);
        getDir(root);
    }
    private void getDir(String dirPath)
    {
        myPath.setText("Location: " + dirPath);
        item = new ArrayList<String>();
        path = new ArrayList<String>();
        File f = new File(dirPath);
        File[] files = f.listFiles();
        if(!dirPath.equals(root))
        {
            item.add(root);
            path.add(root);
            item.add("../");
            path.add(f.getParent());
        }
        for(int i=0; i < files.length; i++)
        {
            File file = files[i];
            path.add(file.getPath());
            if(file.isDirectory())
                item.add(file.getName() + "/");
            else
                item.add(file.getName());
        }
        Log.d("itemssssssss", item.toString());
        ArrayAdapter<String> fileList =
                new ArrayAdapter<String>(this, R.layout.rowmydownload, item);
        setListAdapter(fileList);
    }
} 
```

我的xml是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFFFF"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:background="#A9D0F5"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/image1"
            android:layout_width="40dp"
            android:layout_height="40dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="8dp"
            android:src="@drawable/untitled" />

        <TextView
            android:id="@+id/txt1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_marginLeft="65dp"
            android:layout_toRightOf="@+id/image1"
            android:gravity="center"
            android:text="MY Downloads"
            android:textColor="#000000"
            android:textSize="26px"
            android:textStyle="bold" />
    </RelativeLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/path"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <ListView
            android:id="@android:id/list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="No Data" />
    </LinearLayout>

</LinearLayout> 
```

我的 row.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/rowtext"
        android:layout_width="fill_parent"
        android:layout_height="25px"
        android:textSize="23sp" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/course"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Sales Training"
            android:textColor="#000000"
            android:textStyle="bold" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginTop="20dp"
        android:orientation="horizontal" >

        <Button
            android:layout_width="60dp"
            android:layout_height="30dp"
            android:layout_marginLeft="90dp"
            android:background="#81BEF7"
            android:text="View" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:10:56.203

使用 ArrayAdapter 时，row.xml 的第一个元素应该是 TextView，而不是 LinearLayout。

如果要在行中使用多个元素，则不应使用 ArrayAdapter，而应使用自定义适配器。参见例如[这个 android 开发者示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/List4.html)

# wordpress - Wordpress new user goes directly to admin panel

> ID：10897731
> 
> 赞同：0
> 
> 时间：2012-06-05T12:57:16.030
> 
> 标签：wordpress

I have created a wordpress site where users can register to post blogs. Problem is, after registering and logging in, the users goes directly to wp-admin panel. This shouldn't be the behavior.

How can I prevent logged in users from accessing wp-admin panel?

Please help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:05:11.243

这也将使不是管理员的每个人都远离后端。

把它放在你的functions.php 文件的顶部。

```
<?php
if(is_admin() && !current_user_can('administrator'))
{
    wp_redirect( home_url(),302);
    exit;
}
?> 
```

只需将 home_url() 替换为您希望他们在登录后访问的任何 url。

Ramon：变更日志：将 301 重定向更改为 302 重定向，以修复使用多个帐户（一个具有管理员权限）时的浏览器缓存问题。如果您一开始没有登录，后来您以管理员身份登录，您的浏览器很可能会记住您的重定向，默认情况下这是 301。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:06:08.587

下载这个插件，[http://wordpress.org/extend/plugins/theme-my-login/](http://wordpress.org/extend/plugins/theme-my-login/)。

安装并激活插件，从此用户将看不到 wp-admin 登录页面。此外，为了防止管理仪表板访问，请转到设置->主题我的登录。在 General->Modules 选项卡下，启用自定义重定向。

现在在重定向选项卡中，您可以为不同的角色设置自定义登录页面，该页面可以设置为指向您的主页。因此，登录后，他将被定向到您的主页。

并使用这个小技巧来隐藏屏幕顶部的管理栏：转到 Appearance->Editor->functions.php

在某处添加此代码段：

```
//Snippet Begins
if (!current_user_can('administrator')) :
show_admin_bar(false);
endif;
//Snippet Ends 
```

你去吧。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:56:53.567

像这样的东西？这将为除管理员用户之外的任何人（！）重定向 wp-admin。 [http://www.mijnpress.nl/blog/deny-wp-admin-for-non-administrator-users/](http://www.mijnpress.nl/blog/deny-wp-admin-for-non-administrator-users/)

# android - 如何在安装和卸载应用程序期间接收广播接收器？

> ID：10897732
> 
> 赞同：1
> 
> 时间：2012-06-05T12:57:17.637
> 
> 标签：android, broadcastreceiver

我试图在从 Google Play 下载和安装应用程序时收到通知。有没有办法在同一个应用程序中接收广播接收器。有没有可能做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:59:13.393

无法通知应用程序自身正在安装/卸载

# jquery - How to wrap an element as parent of a known element using GQuery

> ID：10897736
> 
> 赞同：0
> 
> 时间：2012-06-05T12:57:43.273
> 
> 标签：jquery, gwt, gquery

Say I have a div as:

```
<div id="myDiv"> </div> 
```

I have a GQuery object which I got using

```
GQuery mydiv = GQuery.$("#myDiv"); 
```

Using this, I want to create a new parent which wraps this div element inside it. For example, if the parent is another div, following is what I want:

```
<div id = "parentDiv"> 
   <div id="myDiv"> </div>
</div> 
```

Though this sounds like a simple thing to do, I am not able to get the desired result.

Note: I have tagged JQuery for this question as well since if a simple method for the same exists in JQuery, it is probable that it would exist in GQuery as well.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:01:58.367

我想你想使用[wrap()](http://gwtquery.googlecode.com/svn/trunk/gwtquery-core/javadoc/com/google/gwt/query/client/GQuery.html#wrap%28com.google.gwt.dom.client.Element%29)：

```
GQuery mydiv = GQuery.$("#myDiv").wrap('<div id="parentDiv" />'); 
```

我不知道 GQuery，它基于 jQuery。

* * *

我阅读了一些[文档](http://code.google.com/p/gwtquery/wiki/GettingStarted#Selecting_Content)，但不确定您的语法是否应该是：

```
GQuery mydiv = $("#myDiv").wrap('<div id="parentDiv" />'); 
```

或者是其他东西。只要确保你有良好的语法并使用`wrap()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:07:23.623

在 jQuery 中是这样的

```
$(document).ready(function(){
var parent = $("#myDiv").parent();
$("<div id='parentDiv'></div>").appendTo(parent)
                  $("#myDiv").appendTo($("#parentDiv"));
});​ 
```

见[http://jsfiddle.net/fZ6zx/](http://jsfiddle.net/fZ6zx/)

# c++ - VS compiler could access private copy ctor

> ID：10897737
> 
> 赞同：7
> 
> 时间：2012-06-05T12:57:44.420
> 
> 标签：c++, visual-studio

> **Possible Duplicate:**
> [Can objects with private copy constructors be thrown?](https://stackoverflow.com/questions/10103645/can-objects-with-private-copy-constructors-be-thrown)

As I know, when you trow object as value, copy should be created. So copy constructor should be called if exist. If copy ctor exists and is private then this should cause compilation error. Here is code sample

```
class Exception {
public:
Exception() {
    cout << "Exception()" << endl;
}

~Exception() {
    cout << "~Exception() " << endl;
}
private:
Exception(const Exception &c) {
        cout << "Exception(c)" << endl;
    }
}; 
```

And next code should lead to compilation error.

```
try {
        Exception local;

        throw local;
    } catch (...) {
    } 
```

But both in VS 2005 and VS 2008 succesfully compile that code and call private ctor. Am I wrong that this is non standard behaviour and is an error in compiler?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T14:12:28.997

我要在这里冒昧地说这可能是一个合法的 MSVC 10 错误。但是，我找不到这方面的参考。

这是一个测试工具：

```
#include <cstdlib>
#include <string>
#include <iostream>
#include <iomanip>
using namespace std;

class Exception {
public:
Exception() {
    cout << "Exception()" << endl;
}

~Exception() {
    cout << "~Exception() " << endl;
}
private:
Exception(const Exception &c) {
        cout << "Exception(c)" << endl;
    }
};

int main()
{
    try {
        Exception local;

        int n = 42;

        throw local;
    } catch (...) 
    {
    }
} 
```

由于您注意到的原因，此代码应该无法编译 - 复制构造函数是`private`从类的上下文外部调用的。

此代码在 MSVC 10 和 MSVC 11 Dev Preview 中成功编译。

RHEL6.2 下的 GCC 4.4.4 发出：

```
[xxx@yyy ~]$ gcc --version
gcc (GCC) 4.4.4 20100726 (Red Hat 4.4.4-13)
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
[xxx@yyy ~]$ gcc hack.cpp 
hack.cpp: In function ‘int main()’:
hack.cpp:17: error: ‘Exception::Exception(const Exception&)’ is private
hack.cpp:29: error: within this context
[xxx@yyy ~]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T15:55:27.863

该标准规定异常必须是可复制的，因为 throw 可能会复制。您已将复制构造函数设为私有，因此不应编译。

然而，它并没有说明 throw 的实现是复制所*必需的——事实上，它可能被省略，或者在 C++11 中甚至被移动。*因此，尽管 MSVC 应该以不符合标准为由拒绝编译代码，但它仍然会这样做，因为它可以使用 MSVC 的处理方式。

这不太可能是错误，而只是 VC 不符合标准的情况。

# android - SIGSEGV in Android 2.1 WebView

> ID：10897744
> 
> 赞同：0
> 
> 时间：2012-06-05T12:58:07.327
> 
> 标签：android

I am intermittently getting a SIGSEGV when using a WebView in Android 2.1\. The SIGSEGV is inside /system/lib/libwebcore.so .

Is there a known problem with this WebView implementation that I could work around with to avoid the SEGV?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:31:00.280

`SIGSEGV`表示本机代码崩溃。假设您不使用 NDK，则本机代码将是固件。

如果您可以在多个 Android 设备上或在模拟器中重现此错误，请创建一个生成崩溃的示例项目，并将[其作为问题发布（](http://b.android.com)如果尚未出现）。如果您仅在一台特定设备上看到此内容，请尽可能联系该设备制造商。

`SIGSEGV`但是，除了尝试确定 Web 内容或 Java 代码中的什么触发它并删除该内容或代码之外，没有其他解决方法。

# codeigniter - CodeIgniter 调整图像大小

> ID：10897745
> 
> 赞同：1
> 
> 时间：2012-06-05T12:58:07.480
> 
> 标签：codeigniter

我的脚本是：

```
public function resize_image($dir, $new_name, $image, $width, $height)
{
$img_cfg_thumb['image_library'] = 'gd2';
$img_cfg_thumb['source_image'] = "./" . $dir . "/" . $image;
$img_cfg_thumb['maintain_ratio'] = TRUE;
$img_cfg_thumb['new_image'] = $new_name;
$img_cfg_thumb['width'] = 200;
$img_cfg_thumb['height'] = 200;
$this->load->library('image_lib');
$this->image_lib->initialize($img_cfg_thumb);
$this->image_lib->resize();
} 
```

但它只创建**200 x 150的缩略图**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:02:11.630

您的原始图像尺寸是多少？

因为

```
 $img_cfg_thumb['maintain_ratio'] = TRUE; 
```

尝试将其设置为 false

# configuration - 即使在配置之后也无法登录到 phpMyAdmin

> ID：10897746
> 
> 赞同：1
> 
> 时间：2012-06-05T12:58:08.587
> 
> 标签：configuration, phpmyadmin, wamp, wampserver

我刚刚设置了 WAMP 服务器。我的端口 80 已经在使用中，所以我更改了 Apache`httpd.conf`文件中的以下几行以使用端口号 8080。

![httpd.conf 文件](../Images/4ddb0e2019922f48d844c24b44db7a90.png)

然后我将 MySQL 的 root 密码更改为`abc123`使用 MySQL 控制台。到目前为止一切都很好。

然后我如下配置了 phpMyAdmin 的设置脚本（*config.inc*文件）（通过使用 GUI 的浏览器）。我保存了配置。

```
<?php
/*
 * Generated configuration file
 * Generated by: phpMyAdmin 3.4.10.1 setup script
 * Date: Tue, 05 Jun 2012 12:42:11 +0000
 */

/* Servers configuration */
$i = 0;

/* Server: localhost [1] */
$i++;
$cfg['Servers'][$i]['verbose'] = '';
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['port'] = 8080;
$cfg['Servers'][$i]['socket'] = '';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['auth_type'] = 'cookie';
$cfg['Servers'][$i]['user'] = 'root';
$cfg['Servers'][$i]['password'] = 'abc123';

/* End of servers configuration */

$cfg['blowfish_secret'] = '4fcdfe94a0e6c7.79135356';
$cfg['DefaultLang'] = 'en';
$cfg['ServerDefault'] = 1;
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';
?> 
```

但是即使我提供了正确的用户凭据，我仍然无法登录到 phpMyAdmin。它没有给我任何错误消息。只需要很长时间加载并转到带有这样 URL 的空白页面。

```
http://localhost:8080/phpmyadmin/index.php?token=d30e16bb6e28ae70e8c2ed12a9c4e61f 
```

我不知道还能做什么。我错过了一步吗？任何帮助/建议将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:16:50.983

知道了！这里的端口号`$cfg['Servers'][$i]['port'] = 8080;`不是 localhost 的端口。它是 MySQL 的端口号。哪个应该留空作为默认设置。我以前不知道。现在一切正常。

# perl - 如何在 Perl 中实现秒表计时器

> ID：10897748
> 
> 赞同：-2
> 
> 时间：2012-06-05T12:58:09.150
> 
> 标签：perl, timer, stopwatch

您好我想使用 Perl 实现并以毫秒为单位显示秒表计时器。

假设我想在**Windows XP中采用这种格式****HH:MIN:SECS:MILLISECS**。

 **我尝试使用 Perl TK。我有一个开始和停止按钮。当我按下开始按钮时，秒表计时器应启动并以上述格式显示。通过按下停止按钮，它必须停止。

我从谷歌搜索了一些示例代码，但我没有得到毫秒格式：
（3 位分辨率）**即 1:23:45:678**

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T20:07:18.600

这是您问题的部分解决方案 - 使用 TK 的秒表 - [http://www.perlmonks.org/?node_id=897958](http://www.perlmonks.org/?node_id=897958)

附加的代码（不幸的是未经测试）将帮助您以所需的格式显示时间。

```
use strict;
use warnings;

use Time::HiRes qw(gettimeofday tv_interval usleep); 

my ($hrs, $mins, $secs, $mils) = (0, 0, 0, 0);

for my $h (0..23) {
    for my $m (0..59) {
        for my $s (0..59) {
            for my $ms (0..999) {
                print "$h:$m:$s:$ms\n";
                usleep(1000);
                $ms += 0.001;
            }
        }
    }
} 
```**

# javascript - 简单的 nicEdit 根本无法正常工作，没有任何错误

> ID：10897749
> 
> 赞同：0
> 
> 时间：2012-06-05T12:58:11.840
> 
> 标签：javascript, richtextbox

我正在尝试使用 nicEdit 创建一个简单的 textarea 编辑器。但它不起作用，也没有给出任何错误。

这是链接 [http://aht.com.pk/temp/html/index.html](http://aht.com.pk/temp/html/index.html)

检查富文本编辑器的描述，输入内容并点击粗体或下划线等按钮。怎么了？

这是我的html

```
<textarea name="description">Sample text</textarea> 
```

和js

```
bkLib.onDomLoaded(nicEditors.allTextAreas); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:08:14.433

尝试这样的事情。

```
 bkLib.onDomLoaded(function() { nicEditors.allTextAreas() }); 
```

不要忘记`nicEdit-latest.js`将上面的代码包含并放在`<script>`标签内。

# android - ICS 的加密功能在模拟器上不起作用

> ID：10897753
> 
> 赞同：2
> 
> 时间：2012-06-05T12:58:25.250
> 
> 标签：android, encryption, android-source

我正在尝试在模拟器上测试 ICS 的加密功能。

要启用“加密电话”，我们运行“telnet localhost 5554”，然后运行“power capacity 100”。

在此之后，当我单击“加密电话：最终确认按钮”时，我看到一个屏幕上有“Android”图标但没有任何反应。我检查了 logcat，它给出了以下错误。06-05 18:08:49.760: E/Cryptfs( 31): 无法获取块设备的大小

任何帮助表示赞赏。

谢谢，苏希尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:55:43.300

我可以确认加密功能没有在模拟器上运行。如果您想在不使用物理手机/平板电脑的情况下测试此功能，您可以使用现在支持此功能的 Buildroid（Android 端口到 VirtualBox）：[Buildroid 博客](http://www.buildroid.org/blog/?p=159)

担。

# php - 无法将非应用网址发布到供稿

> ID：10897754
> 
> 赞同：0
> 
> 时间：2012-06-05T12:58:31.477
> 
> 标签：php, facebook-graph-api

当我使用图形 api (php) 发布帖子，然后单击帖子上的链接时，我收到以下错误：

> API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

链接 url 与指定为站点 URL 或画布 URL 的链接 url 不同，但这已经工作了一年多，最近几天才停止工作。

[查看http://www.facebook.com/becki.yore](http://www.facebook.com/becki.yore)上的任何最新链接。这些都工作到几天前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:28:02.640

检查您的应用程序设置以进行迁移“Stream post URL security” - 是否有任何机会启用？

# php - 将 CSS 添加到 PHP Wordpress 插件

> ID：10897755
> 
> 赞同：7
> 
> 时间：2012-06-05T12:58:32.190
> 
> 标签：php, css, wordpress, plugins

我写了一个简单的插件，它使用 wp_options 设置了一些 css 代码。这一切看起来都像这样：

```
add_action('init','easy_style');

function easy_style()
{
    ?>
    <style>
    #header a {
        color: <?php echo get_option('topcolor'); ?>;
        font-size: <?php echo get_option('topsize'); ?>px;
        <?php
            if (get_option('topstyle') == "bold")
            { echo "font-weight: bold;"; echo "font-style: normal;"; }
            elseif (get_option('topstyle') == "italic")
            { echo "font-style: italic;"; echo "font-weight: normal;"; }
            elseif (get_option('topstyle') == "bolditalic")
            { echo "font-weight: bold;"; echo "font-style: italic;"; }
            else { echo "font-weight: normal;"; echo "font-style: normal;"; }
        ?>;
    }

    </style>
    <?php
} 
```

现在可以了，但是如果我激活我的“联系表 7”插件，联系表 7 就不再起作用了。它不能发送任何邮件。所以我认为我的做法是错误的。如果我删除这段代码，联系表格会再次起作用......

我认为我做错了，因为 css 需要加载到标题中，不是吗？所以我认为我会做的测试是将相同的代码放在标题中。但是，其他一些 css（我不知道在哪里）会覆盖这些，所以这也不起作用。

我认为有一些 wp 函数可以将 css 代码添加到标题中，但我不知道如何准确。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-05T13:08:19.570

将 CSS 添加到插件的一种安全方法是使用`wp_enqueue_style`.

```
/**
 * Register with hook 'wp_enqueue_scripts', which can be used for front end CSS and JavaScript
 */
add_action( 'wp_enqueue_scripts', 'prefix_add_my_stylesheet' );

/**
 * Enqueue plugin style-file
 */
function prefix_add_my_stylesheet() {
    // Respects SSL, Style.css is relative to the current file
    wp_register_style( 'prefix-style', plugins_url('style.css', __FILE__) );
    wp_enqueue_style( 'prefix-style' );
} 
```

[参考](http://codex.wordpress.org/Function_Reference/wp_enqueue_style)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:05:05.403

也许您正在使用的插件想要发送一些 http 标头。

由于您使用的是**init**钩子（详细信息：http: [//codex.wordpress.org/Plugin_API/Action_Reference/init](http://codex.wordpress.org/Plugin_API/Action_Reference/init)），当插件开发人员认为标头尚未发送时，您正在运行一些操作。

但是，由于您发送了一些输出（回显某些样式），因此您正在强制更快地发送标头。我建议您使用另一个在输出已经启动后发生的钩子。

**更新：**您可以使用 wp_enqueue_style 函数（参考此处：[http](http://codex.wordpress.org/Function_Reference/wp_enqueue_style) ://codex.wordpress.org/Function_Reference/wp_enqueue_style ），因为它是显示样式的推荐方式。您只需将这些规则保存在 css 文件中并将其排队以在调用 wp_head 函数之前加载

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-13T06:40:26.963

在插件**开发**中，不要忘记发送参考`class ($this)`

```
add_action( 'wp_enqueue_scripts', array($this,'prefix_add_my_stylesheet' )); 
```

* * *

## 回答 #4

> 赞同：-14
> 
> 时间：2012-06-08T18:22:15.767

我通过加载styles.css文件解决了我的问题，编辑它并再次保存

# c# - MbUnit - 从 SetUp 方法中终止测试

> ID：10897756
> 
> 赞同：1
> 
> 时间：2012-06-05T12:58:36.030
> 
> 标签：c#, mbunit, gallio

我想用 SetUp 方法中的特定结果终止我的测试。

我已经尝试过 SilentTestException 和 Assert.Terminate 和 Assert.TerminateSilently 但实际的 Test 方法似乎无论如何都会执行。

您可以使用以下代码重现此行为：[https ://gist.github.com/2857816](https://gist.github.com/2857816)

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:17:08.223

请参阅[https://groups.google.com/forum/?fromgroups#!topic/gallio-user/jQby62ak8es](https://groups.google.com/forum/?fromgroups#!topic/gallio-user/jQby62ak8es)

# c# - 单击父表单时如何关闭子表单？

> ID：10897759
> 
> 赞同：0
> 
> 时间：2012-06-05T12:58:47.247
> 
> 标签：c#, vb.net

我在我的 Windows 窗体应用程序中遇到了一些问题。我有两种形式：

第一个主/父表格

2nd Sub / Child Form（菜单）

问题：

当我单击第一个表单时，我想关闭我的第二个表单（在第一个表单顶部打开）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:02:36.497

您可以注册到主窗体“焦点”事件（此链接是一个基本教程，展示了如何在 VB 中注册事件：http: [//www.homeandlearn.co.uk/net/nets10p1.html](http://www.homeandlearn.co.uk/net/nets10p1.html)）

当该事件发生时，您必须检查第二个表单是否打开（保存对打开的表单的引用以便您可以这样做）然后关闭它。

如果您将添加一些代码，我将能够更具体...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:07:00.570

像这样的东西应该工作：

```
Public Class Form1
    Private childForm As Form2

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        childForm = New Form2()
        childForm.Show()
    End Sub

    Private Sub Form1_Activated(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Activated
        If childForm IsNot Nothing Then
            childForm.Hide()
        End If
    End Sub
End Class 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:03:55.047

当您显示您的子表单时，您必须将子表单保存在父表单的变量中。单击父表单，您可以使用该变量关闭或处置您的子表单

# c# - wp7中listpicker的选定索引

> ID：10897761
> 
> 赞同：1
> 
> 时间：2012-06-05T12:58:54.927
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我的页面中有 silverlight listpicker 控件，并且它与`List<Countries>`Let Say绑定

美国

英国

巴基斯坦

丹麦

我将此列表与我的 listpickercountries 绑定我希望默认选择的值是巴基斯坦

我可以通过这种方式设置所选项目

```
listpickercountries.selectedindex = 2; 
```

有什么办法可以从后面的代码中找到巴基斯坦的索引并设置这个列表选择器的这个 selectedietm Like This Way

```
listpickercountries.selectedindex.Contain("Pakistan"); 
```

或类似的东西 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:11:52.043

您必须在列表中搜索您想要的国家/地区，检查它是哪个索引，然后在选择器本身上设置选定的索引。

索引将是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:58:55.627

我假设您的国家课程为，

```
public class Countries
    {
        public string name { get; set; }
    } 
```

然后你可以这样做，

```
listpickercountries.ItemsSource = countriesList;
listpickercountries.SelectedIndex = countriesList.IndexOf( countriesList.Where(country => country.name == "Pakistan").First()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T15:23:31.327

我建议同时绑定 ItemsSource 和 SelectedItem

```
<toolkit:ListPicker x:Name="listpickercountries" 
                ItemsSource="{Binding Countries}"
                SelectedItem="{Binding SelectedCountry, Mode=TwoWay}"> 
```

在后面的代码中，设置一个视图模型

```
public SettingsPage()
{
    ViewModel = new ViewModel();
    InitializeComponent();
}

private ViewModel ViewModel
{
    get { return DataContext as ViewModel; }
    set { DataContext = value; }
} 
```

在视图模型中

```
public class ViewModel : INotifyPropertyChanged
{
    public IList<Country> Countries
    {
        get { return _countries; }
        private set
        {
            _countries = value;
            OnPropertyChanged("Countries");
        }
    }

    public Country SelectedCountry
    {
        get { return _selectedCountry; }
        private set
        {
            _selectedCountry= value;
            OnPropertyChanged("SelectedCountry");
        }
    }

} 
```

从那里您可以随时设置 SelectedCountry 的值，它将在选择器中设置所选项目，例如：

```
// from code behind
ViewModel.SelectedCountry = ViewModel.Countries.FirstOrDefault(c => c.Name == "Pakistan");

// From ViewModel
this.SelectedCountry = this.Countries.FirstOrDefault(c => c.Name == "Pakistan"); 
```

# jsf - JSF：从 jar 中提供资源

> ID：10897763
> 
> 赞同：1
> 
> 时间：2012-06-05T12:58:59.340
> 
> 标签：jsf, facelets

我正在创建几个装有 facelets 模板的 jar，以供整个组织使用。

在 JSF 1.2 中，此功能并非开箱即用。堆：

*   Jboss EAP 5.1
*   接缝 2.2
*   Richfaces 3.3.3

在我看来，我主要需要两个资源：

1.  查找 Faclets 资源的资源解析器
2.  从 jar 中提供 css 和 js 资源的东西

资源解析器似乎是简单的部分： http: [//ocpsoft.org/opensource/create-common-facelets-jar/](http://ocpsoft.org/opensource/create-common-facelets-jar/)

流式传输 css / js 的事情稍微复杂一些： **JSF: Serving Resources From a Jar** [http://cagataycivici.wordpress.com/2006/05/09/jsf_serving_resources_from_a/](http://cagataycivici.wordpress.com/2006/05/09/jsf_serving_resources_from_a/)

*   相位监听器
*   筛选
*   小服务程序
*   网络小程序

我非常想使用 Weblets，因为它似乎是专门解决这个问题的项目。此外，在我购买的这本很棒的 JSF 书籍中推荐它：“Pro JSF and Ajax Building Rich Internet Components”

**问题是我在任何 Maven 存储库中都找不到稳定版本，也没有文档。在示例中，没有使用任何 faclets：**

[https://github.com/werpu/weblets](https://github.com/werpu/weblets)

在上面的文章中，过滤器被强调为一个很好的解决方案。 [http://myfaces.apache.org/tomahawk-project/tomahawk/apidocs/org/apache/myfaces/webapp/filter/ExtensionsFilter.html](http://myfaces.apache.org/tomahawk-project/tomahawk/apidocs/org/apache/myfaces/webapp/filter/ExtensionsFilter.html)

遗憾的是，加入这个解决方案并不是一项简单的任务。我根本没有时间（或目前的知识）:(

可能我可以使用这个项目：[http](http://jawr.java.net/introduction.html) : //jawr.java.net/introduction.html Jawr 旨在捆绑 js 和 css 文件。

项目 wiki 表明它是可能的：http: [//jawr.java.net/docs/generators.html](http://jawr.java.net/docs/generators.html)请参阅“类路径资源生成器”部分。

请指教 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T22:28:35.203

您好，您想从 jar 中加载 css、js 等，您可以使用以下内容。

```
package se.lu.ldc.core.servlet;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import javax.faces.webapp.FacesServlet;
import javax.servlet.ServletConfig;
import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.log4j.Logger;

/**
 * Servlet för att hämta diverse filer från jar om de finns i jaren
 *  jpg, png, gif, css, xcss,xml,js
 * @author ldc-jha
 *
 */
@WebServlet(name="ldcServlet",loadOnStartup=1,urlPatterns={"*.jpg","*.png","*.gif","*.css","*.xcss","*.js"})
public class LDCFrameWorkServlet extends HttpServlet
{  

    //where the files are in the jar.
    public final String BASE_PATH = "xhtml/framework";

    private Logger log = Logger.getLogger(getClass().getName());

    @Override
    public void init(ServletConfig config) throws ServletException
    {
        System.out.println("INIT()");
        super.init(config);
    }
    @Override
    public void doGet(HttpServletRequest request, 
            HttpServletResponse response) throws ServletException, IOException {

        /* if this servlet is not mapped to a path, use the request URI */
        String path = request.getPathInfo();
        if (path == null) {
            path = request.getRequestURI().substring(
                    request.getContextPath().length());
        }

        URL resource = Thread.currentThread().getContextClassLoader().
        getResource(BASE_PATH+"/"+path.substring(1));

        if (resource == null) {
            ServletContext sc = getServletContext();

            String filename = sc.getRealPath(path);
            log.info("During Load:"+resource+":"+path+":"+filename);
            try{
                resource = sc.getResource(path);
            }catch(Exception e){}
            if(resource == null)
            {
                response.sendError(404, path + " denied");

            }

        }
        /* failure conditions */
        if (path.endsWith(".seam")) {
            javax.faces.webapp.FacesServlet facesServlet = new FacesServlet();
            facesServlet.service(request, response);

            return;
        }
        if (path.endsWith(".class")) {
            response.sendError(403, path + " denied");
            return;
        }

        /* find the resource */
        log.info("Looking for " + path + " on the classpath");

        //response.sendError(404, path + " not found on classpath");

        log.info("found " + path + " on the classpath:"+resource.toString());

        /* check modification date */
        URLConnection connection = resource.openConnection();
        long lastModified = connection.getLastModified();
        long ifModifiedSince = request.getDateHeader("If-Modified-Since");
        if (ifModifiedSince != -1 && lastModified <= ifModifiedSince) {
            response.setStatus(HttpServletResponse.SC_NOT_MODIFIED);
            return;
        }

        /* write to response */
        response.setContentType(getServletContext().getMimeType(path));
        OutputStream out = new BufferedOutputStream(
                response.getOutputStream(), 512);
        InputStream in = new BufferedInputStream(
                resource.openStream(), 512);
        try {
            int len;
            byte[] data = new byte[512];
            while ((len = in.read(data)) != -1) {
                out.write(data, 0, len);
            }
        } finally {
            out.close();
            in.close();
            if (connection.getInputStream() != null) {
                connection.getInputStream().close();
            }
        }

    } /* doGet() */

    @Override
    public void service(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException
    {
        doGet(request, response);
    }

} 
```

如果你想从 jar 中加载 faclets，你可以使用 Custom DefaultResourceResolver

```
/**
 * Används för hämta hämta xhtml filer från jar filen
 * @author ldc-jha
 *
 */
public class ClassletsResourceResolver extends DefaultResourceResolver implements ResourceResolver{

    public ClassletsResourceResolver() {
        super();
    }

    private static final String PREFIX = "/framework/";
    private static final String LAYOUT = "/layout/";

    public String getPrefix() {
        return PREFIX;
    }

    public URL resolveUrl(String path) {
        final String prefix = getPrefix();
        System.out.println("resolveUrl()"+path);
        URL url = null;
        if (path != null && path.startsWith(PREFIX)) {
            final String resource = path.substring(PREFIX.length());
            url = getClass().getClassLoader().getResource("xhtml/framework/"+resource);
        }

        if (path != null && path.startsWith(LAYOUT)) {
            System.out.println("LAYOUT:"+path);
            url = getClass().getClassLoader().getResource("xhtml/framework"+path);
            System.out.println(url);
        }

        if(url != null){
            return url;
        }
        else
        {
            return super.resolveUrl(path);
        }
    }
} 
```

如果您想在不编辑 xhtml 的情况下加载 resourceResolver，您可以这样做。

```
@WebListener
public class SimpleServletContextListener implements ServletContextListener{

    private static final LogProvider log = Logging.getLogProvider(SimpleServletContextListener.class);

    public void contextInitialized(ServletContextEvent event){

                      event.getServletContext().setAttribute("facelets.RESOURCE_RESOLVER","se.lu.ldc.core.reslover.ClassletsResourceResolver");

} 
```

}

您可能还必须让 Seam 了解 Faclets，如果有任何问题，请告诉我。我有同样的想法，并让它与将所有 css、xhtml 等打包在一个罐子里一起工作。

# javascript - 检测鼠标悬停/鼠标点击，无论 z 顺序/图层级别如何

> ID：10897776
> 
> 赞同：1
> 
> 时间：2012-06-05T12:59:56.363
> 
> 标签：javascript, dom

有没有办法在其他 HTML 元素后面但*不在同一个 DOM 路径内的*元素上检测鼠标事件（悬停、单击、...） （即事件不会冒泡到元素）？

一个简单的例子来澄清我的意思：http: [//jsfiddle.net/xeJyg/1/](http://jsfiddle.net/xeJyg/1/)

目前我没有看到其他选项，除了在第一个公共父级上注册事件处理程序（在上面的示例中是`<BODY>`）并检查自己是否事件发生在相关元素之上。问题是，对于许多元素，这可能会变得非常低效。

在漫长的回合中，我尝试在多个 OpenLayer 图层上捕获鼠标事件以进行标记，这是不支持开箱即用的（事件仅适用于顶层）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:11:02.030

在较新的浏览器上，您可以使用`pointer-events: none;`

```
#cover {
    ...
    pointer-events: none;
} 
```

小提琴：http: [//jsfiddle.net/PVxbq/](http://jsfiddle.net/PVxbq/)

# jquery - 如何防止在动画完成之前点击 html 元素？

> ID：10897779
> 
> 赞同：1
> 
> 时间：2012-06-05T13:00:05.233
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-animate

我正在使用 div 上的单击事件绑定来展开/折叠 div。展开/折叠使用 `$('#myid').animate(myfunctiontocollapse/expand)`. 现在例如 div 的高度为零，我单击 div 展开它，然后在完成展开之前再次单击它，调用折叠代码并且 div 变形。当折叠/展开正在进行时，如何防止第二次点击事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:05:05.700

取消绑定单击，然后将处理程序重新绑定为完成参数的一部分

目前尚不清楚您的动画功能是什么，但对您来说`show()`可能是一个更好的选择：

```
var myClickHandler = function(el){
    $(el).unbind("click");
    $('#myid').show('slow', function() { $("#mytrigger").click(myClickHandler) }
}
$('#mytrigger').click(myClickHandler); 
```

`animate()`如果您的功能确实是自定义的，您也可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:12:24.560

您可以检查它是否仍在 click 函数中设置动画，如果是则返回 false 以防止默认的点击操作和传播。

```
if($('#myid').is(':animated')){
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:16:30.703

您可以使用 jQuery `.stop()` [http://api.jquery.com/stop/](http://api.jquery.com/stop/)方法来停止当前正在运行的动画。

这是一个示例代码。

```
$('#hoverme-stop-2').hover(function() {
  $(this).find('img').stop(true, true).fadeOut();
}, function() {
  $(this).find('img').stop(true, true).fadeIn();
}); 
```

# c# - 有没有办法在 aspx C# 中附加列表框的 DataTextField？

> ID：10897783
> 
> 赞同：1
> 
> 时间：2012-06-05T13:00:20.303
> 
> 标签：c#, data-binding

我有一个列出项目名称的数据绑定列表框，我现在想要显示项目编号和项目名称，如下所示：i-001 - 项目 1。我做了类似的事情，但它是当我不使用数据文本字段，而是使用 iDataReaders 时。

那么我可以附加 datatextfield 属性以接受多个列吗？在 aspx 页面中还是在后面的代码中？

如果有任何可以帮助的代码，我可以提供给你，如果有任何可以完成的清理工作，我会尽力做到这一点。

谢谢

示例代码：

```
listItems.DataSource = DAL.Util.getItemProfiles(vendor,catalog);
listItems.DataBind();

public string ItemNumName
{
    get { return "CustItemNum" + " - " + "Name"; }
}

protected void listItems_DataBound(object sender, EventArgs e)
{
    listItems.DataTextField = ItemNumName;
} 
```

这会导致以下错误消息：

DataBinding：“System.Data.DataRowView”不包含名为“CustItemNum - Name”的属性。

如果我从属性中删除 + " - " + "Name" ，它会通过仅显示 CustItemNum 字段来正常运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:09:30.580

您可以在 ListBox 的 OnDataBound 事件中执行此操作。这里的例子：http: [//asp-net-example.blogspot.com/2011/07/how-to-use-listbox-ondatabound-event-in.html](http://asp-net-example.blogspot.com/2011/07/how-to-use-listbox-ondatabound-event-in.html)

```
 protected void ListBox1_DataBound(object sender, EventArgs e)  
    {  
//... your logic here to set the text of the item
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:07:39.107

您可以向模型中添加一个新属性，该属性结合了这两个字段并将其用作数据值

```
 public string SomeProperty
  {
      get{return  itemnumber + "-"+ itemName ; }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:17:46.880

您还可以编辑您的 sql 以连接两列，然后将其用作您的数据文本字段。使用提供的变量名，它看起来像：

```
Select CustItemNum, Name,  CustItemNum + ' - ' + Name AS NumberName 
```

那么您应该能够使用 NumberName 作为 DataTextField 并且它应该显示为“itemNumber - itemName”

# filesystems - reverse/stride/pread 和 pwrite 的典型应用用途是什么？

> ID：10897790
> 
> 赞同：3
> 
> 时间：2012-06-05T13:00:41.520
> 
> 标签：filesystems, benchmarking, disk, interpretation, iozone

如果不耐烦，请跳到下面的“问题”标题。

语境

我从事 Unix(like) 系统管理和基础设施开发工作，但我认为我的问题由程序员回答得最好:o)

我想做的是学习如何使用 iozone 对文件系统（普通、卷管理、虚拟化、加密等）进行基准测试。[作为练习，我在我的 slug ( http://www.nslu2-linux.org/](http://www.nslu2-linux.org/) )中对用作系统磁盘的 USB pendrive 进行了基准测试，格式分别为 vfat、ntfs、ext3、ext4 和 xfs。该测试产生了一些令人惊讶的结果，这些结果发布在下面。然而，结果让我感到惊讶的原因很可能是因为我对 iozone 还很陌生，并不真正知道如何解释这些数字。因此，这篇文章。

在我的测试中，iozone 对 11 种不同的文件操作进行了基准测试，但仅针对一种记录大小（4k，与所有测试文件系统的块大小匹配）和一种文件大小 (512MB)。文件系统记录大小和文件大小的片面性当然会给测试带来一些偏差。无论如何，文件操作在下面列出，每个都有我自己的简短解释：

*   初始写入：按顺序将新数据写入磁盘，常规文件使用
*   重写：将新数据附加到现有的顺序、常规文件使用中
*   read：顺序读取数据，常规文件使用
*   重新读取：顺序重新读取数据（缓冲测试，还是什么？）
*   反向阅读：？？？
*   大步阅读：？？？
*   随机读取：非顺序读取，通常是数据库使用
*   随机写入：非顺序写入，通常使用数据库
*   pread：读取某个位置的数据 - 用于索引数据库？
*   pwrite：在某个位置写入数据 - 用于索引数据库？
*   混合工作量：（很明显）

其中一些操作看起来很简单。我猜初始写入、重写和读取都用于常规文件处理，包括让指针寻找直到到达某个块，顺序读取或写入（通常通过许多块），有时由于碎片而不得不向前跳跃一点文件。重读测试的唯一目标（我猜）是缓冲测试。同时，随机读/写是典型的数据库操作，其中指针必须在收集数据库记录的同一文件中从一个地方跳到另一个地方，例如在连接表时。

那么问题是什么？

到目前为止，一切都很好。我非常感谢对上述假设的任何更正，尽管它们似乎相当普遍。现在是真正的问题：你为什么要做反向阅读？什么是跨步阅读？有人告诉我，“位置”操作 pread 和 pwrite 用于索引数据库，但为什么不简单地将索引保存在内存中呢？或者这是实际发生的情况，然后一旦给定某个索引，pread 就可以方便地跳转到记录的确切位置？您还使用 pread/pwrite 做什么？

总而言之，到目前为止，我觉得我只能半途而废地解释我的 iozone 结果。我或多或少知道为什么随机操作中的高数字会为数据库提供良好的文件系统，但为什么我需要以相反的顺序读取文件，以及良好的跨步读取告诉我什么？这些操作的典型应用用途是什么？

奖金问题

既然问了，这里有一个额外的问题。作为给定文件系统的管理员，感激地从有洞察力的程序员那里学会了如何解释我的文件系统基准;) - 有人对如何对文件系统的实际使用进行分析有什么建议吗？试验文件系统记录（块）大小是微不足道的，虽然很耗时。关于给定文件系统中文件的大小和分布，“查找”是我的朋友。但是我该怎么做才能计算实际的文件系统调用，如 read()、pwrite() 等？

我也非常感谢任何关于其他资源对文件系统测试结果的影响的评论，例如处理器能力和 RAM 容量和速度的作用。例如，当我想在带有 266 MHz ARM Intel XScale 处理器和 32/8 MB SD/闪存？

具有建筑思维的文档？

因为我不喜欢重复自己太多，我也不喜欢问别人，所以，如果这些问题不能以简短的方式回答，我将非常感谢进一步文档的链接，重要的是不是它解释了上述文件操作的实际作用（我可以参考 API），但是该文档具有架构意识，也就是说，它解释了这些操作通常如何在现实生活中的应用程序中使用。

试验结果

正确的。我承诺了我相当不起眼的 USB pendrive 文件系统测试的结果。我的主要期望是写入结果通常很差（作为闪存驱动器，考虑到它的性质，通常具有比管理它的实际文件系统更大的块大小，这意味着要写入一个较小的更改相对大量的未更改数据必须重写)，并且读取结果很好。事实证明，要点是：

*   vfat 在所有操作上都做得很好，除了有点晦涩（对我来说，无论如何）反向和跨步读取。我猜缺少功能消除了很多簿记。

*   ntfs 在重写（追加）和读取操作方面很糟糕，使其成为常规文件操作的糟糕候选者。它还很糟糕的预操作，使其成为索引数据库的糟糕候选者。

*   令人惊讶的是，ext3 和 ext4，后者在所有操作上都略胜一筹，在初始写入、重写、读取、随机写入和 pwrite 操作方面表现不佳，这使得它们不适合常规文件使用以及频繁更新的数据库。但是，ext4 是随机读取和预读的大师，使其成为某种静态数据库的绝佳候选者（？）。ext3 和 ext4 在晦涩难懂的反向读取和跨步读取操作上得分都很高，不管这意味着什么。

*   无与伦比的全面测试获胜者是 xfs，其唯一的弱点似乎是反向阅读。在初始写入、重写、读取、随机写入和 pwrite 方面，它是最好的，使其成为常规文件使用以及（强烈更新）数据库的绝佳候选者。在重读、随机阅读和预读方面，它是亚军，使其成为（有些静态的）数据库的良好候选者。它在跨步阅读方面也做得很好——不管这意味着什么！

欢迎对这些结果的解释发表任何评论！下面列出了数字（由于长度原因有所删减），一个 iozone 测试套件 pr。文件系统类型，均在标准 4GB Verbatim pendrive（橙色 ;)）上进行测试，停靠在配备 N450 1.66Ghz Atom CPU 和 2GB DDR2 667 Mhz RAM 的三星 N105P 笔记本电脑上，运行 Linux 3.2.0-24 x86 内核使用加密交换（是的，我知道，我应该安装一个 64 位 Linux 并让交换保持清晰！）。

问候，托斯滕

PS。写完这篇文章后，我发现 Debian NSLU2 发行版显然不支持 xfs。不过，我的问题仍然存在！

--- vfat ---

```
Iozone: Performance Test of File I/O
        Version $Revision: 3.397 $
    Compiled for 32 bit mode.
    Build: linux 

Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins
             Al Slater, Scott Rhine, Mike Wisner, Ken Goss
             Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,
             Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,
             Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,
             Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,
             Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer.
             Ben England.

Run began: Mon Jun  4 14:23:57 2012

Record Size 4 KB
File size set to 524288 KB
Command line used: iozone -l 1 -u 1 -r 4k -s 512m -F /mnt/iozone.tmp
Output is in Kbytes/sec
Time Resolution = 0.000002 seconds.
Processor cache size set to 1024 Kbytes.
Processor cache line size set to 32 bytes.
File stride size set to 17 * record size.
Min process = 1 
Max process = 1 
Throughput test with 1 process
Each process writes a 524288 Kbyte file in 4 Kbyte records

Children see throughput for  1 initial writers  =   12864.82 KB/sec
Parent sees throughput for  1 initial writers   =    3033.39 KB/sec

Children see throughput for  1 rewriters    =   25271.86 KB/sec
Parent sees throughput for  1 rewriters     =    2876.36 KB/sec

Children see throughput for  1 readers      =  685333.00 KB/sec
Parent sees throughput for  1 readers       =  682464.06 KB/sec

Children see throughput for 1 re-readers    =  727929.94 KB/sec
Parent sees throughput for 1 re-readers     =  726612.47 KB/sec

Children see throughput for 1 reverse readers   =  458174.00 KB/sec
Parent sees throughput for 1 reverse readers    =  456910.21 KB/sec

Children see throughput for 1 stride readers    =  351768.00 KB/sec
Parent sees throughput for 1 stride readers     =  351504.09 KB/sec

Children see throughput for 1 random readers    =  553705.94 KB/sec
Parent sees throughput for 1 random readers     =  552630.83 KB/sec

Children see throughput for 1 mixed workload    =  549812.50 KB/sec
Parent sees throughput for 1 mixed workload     =  547645.03 KB/sec

Children see throughput for 1 random writers    =   19958.66 KB/sec
Parent sees throughput for 1 random writers     =    2752.23 KB/sec

Children see throughput for 1 pwrite writers    =   13355.57 KB/sec
Parent sees throughput for 1 pwrite writers     =    3119.04 KB/sec

Children see throughput for 1 pread readers     =  574273.31 KB/sec
Parent sees throughput for 1 pread readers  =  572121.97 KB/sec 
```

--- ntfs ---

```
Iozone: Performance Test of File I/O
        Version $Revision: 3.397 $
    Compiled for 32 bit mode.
    Build: linux 

Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins
             Al Slater, Scott Rhine, Mike Wisner, Ken Goss
             Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,
             Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,
             Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,
             Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,
             Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer.
             Ben England.

Run began: Mon Jun  4 13:59:37 2012

Record Size 4 KB
File size set to 524288 KB
Command line used: iozone -l 1 -u 1 -r 4k -s 512m -F /mnt/iozone.tmp
Output is in Kbytes/sec
Time Resolution = 0.000002 seconds.
Processor cache size set to 1024 Kbytes.
Processor cache line size set to 32 bytes.
File stride size set to 17 * record size.
Min process = 1 
Max process = 1 
Throughput test with 1 process
Each process writes a 524288 Kbyte file in 4 Kbyte records

Children see throughput for  1 initial writers  =   11153.75 KB/sec
Parent sees throughput for  1 initial writers   =    2848.69 KB/sec

Children see throughput for  1 rewriters    =    8723.95 KB/sec
Parent sees throughput for  1 rewriters     =    2794.81 KB/sec

Children see throughput for  1 readers      =   24935.60 KB/sec
Parent sees throughput for  1 readers       =   24878.74 KB/sec

Children see throughput for 1 re-readers    =  144415.05 KB/sec
Parent sees throughput for 1 re-readers     =  144340.90 KB/sec

Children see throughput for 1 reverse readers   =   76627.60 KB/sec
Parent sees throughput for 1 reverse readers    =   76362.93 KB/sec

Children see throughput for 1 stride readers    =  367293.25 KB/sec
Parent sees throughput for 1 stride readers     =  366002.25 KB/sec

Children see throughput for 1 random readers    =  505843.41 KB/sec
Parent sees throughput for 1 random readers     =  500556.16 KB/sec

Children see throughput for 1 mixed workload    =  553075.56 KB/sec
Parent sees throughput for 1 mixed workload     =  551754.97 KB/sec

Children see throughput for 1 random writers    =    9747.23 KB/sec
Parent sees throughput for 1 random writers     =    2381.89 KB/sec

Children see throughput for 1 pwrite writers    =   10906.05 KB/sec
Parent sees throughput for 1 pwrite writers     =    1931.43 KB/sec

Children see throughput for 1 pread readers     =   16730.47 KB/sec
Parent sees throughput for 1 pread readers  =   16194.80 KB/sec 
```

--- 分机 3 ---

```
Iozone: Performance Test of File I/O
        Version $Revision: 3.397 $
    Compiled for 32 bit mode.
    Build: linux 

Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins
             Al Slater, Scott Rhine, Mike Wisner, Ken Goss
             Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,
             Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,
             Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,
             Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,
             Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer.
             Ben England.

Run began: Sun Jun  3 16:05:27 2012

Record Size 4 KB
File size set to 524288 KB
Command line used: iozone -l 1 -u 1 -r 4k -s 512m -F /media/verbatim/1/iozone.tmp
Output is in Kbytes/sec
Time Resolution = 0.000001 seconds.
Processor cache size set to 1024 Kbytes.
Processor cache line size set to 32 bytes.
File stride size set to 17 * record size.
Min process = 1 
Max process = 1 
Throughput test with 1 process
Each process writes a 524288 Kbyte file in 4 Kbyte records

Children see throughput for  1 initial writers  =    3704.61 KB/sec
Parent sees throughput for  1 initial writers   =    3238.73 KB/sec

Children see throughput for  1 rewriters    =    3693.52 KB/sec
Parent sees throughput for  1 rewriters     =    3291.40 KB/sec

Children see throughput for  1 readers      =  103318.38 KB/sec
Parent sees throughput for  1 readers       =  103210.16 KB/sec

Children see throughput for 1 re-readers    =  908090.88 KB/sec
Parent sees throughput for 1 re-readers     =  906356.05 KB/sec

Children see throughput for 1 reverse readers   =  744801.38 KB/sec
Parent sees throughput for 1 reverse readers    =  743703.54 KB/sec

Children see throughput for 1 stride readers    =  623353.88 KB/sec
Parent sees throughput for 1 stride readers     =  622295.11 KB/sec

Children see throughput for 1 random readers    =  725649.06 KB/sec
Parent sees throughput for 1 random readers     =  723891.82 KB/sec

Children see throughput for 1 mixed workload    =  734631.44 KB/sec
Parent sees throughput for 1 mixed workload     =  733283.36 KB/sec

Children see throughput for 1 random writers    =     177.59 KB/sec
Parent sees throughput for 1 random writers     =     137.83 KB/sec

Children see throughput for 1 pwrite writers    =    2319.47 KB/sec
Parent sees throughput for 1 pwrite writers     =    2200.95 KB/sec

Children see throughput for 1 pread readers     =   13614.82 KB/sec
Parent sees throughput for 1 pread readers  =   13614.45 KB/sec 
```

--- 分机 ---

```
Iozone: Performance Test of File I/O
        Version $Revision: 3.397 $
    Compiled for 32 bit mode.
    Build: linux 

Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins
             Al Slater, Scott Rhine, Mike Wisner, Ken Goss
             Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,
             Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,
             Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,
             Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,
             Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer.
             Ben England.

Run began: Sun Jun  3 17:59:26 2012

Record Size 4 KB
File size set to 524288 KB
Command line used: iozone -l 1 -u 1 -r 4k -s 512m -F /media/verbatim/2/iozone.tmp
Output is in Kbytes/sec
Time Resolution = 0.000005 seconds.
Processor cache size set to 1024 Kbytes.
Processor cache line size set to 32 bytes.
File stride size set to 17 * record size.
Min process = 1 
Max process = 1 
Throughput test with 1 process
Each process writes a 524288 Kbyte file in 4 Kbyte records

Children see throughput for  1 initial writers  =    4086.64 KB/sec
Parent sees throughput for  1 initial writers   =    3533.34 KB/sec

Children see throughput for  1 rewriters    =    4039.37 KB/sec
Parent sees throughput for  1 rewriters     =    3409.48 KB/sec

Children see throughput for  1 readers      = 1073806.38 KB/sec
Parent sees throughput for  1 readers       = 1062541.84 KB/sec

Children see throughput for 1 re-readers    =  991162.00 KB/sec
Parent sees throughput for 1 re-readers     =  988426.34 KB/sec

Children see throughput for 1 reverse readers   =  811973.62 KB/sec
Parent sees throughput for 1 reverse readers    =  810333.28 KB/sec

Children see throughput for 1 stride readers    =  779127.19 KB/sec
Parent sees throughput for 1 stride readers     =  777359.89 KB/sec

Children see throughput for 1 random readers    =  796860.56 KB/sec
Parent sees throughput for 1 random readers     =  795138.41 KB/sec

Children see throughput for 1 mixed workload    =  741489.56 KB/sec
Parent sees throughput for 1 mixed workload     =  739544.09 KB/sec

Children see throughput for 1 random writers    =     499.05 KB/sec
Parent sees throughput for 1 random writers     =     399.82 KB/sec

Children see throughput for 1 pwrite writers    =    4092.66 KB/sec
Parent sees throughput for 1 pwrite writers     =    3451.62 KB/sec

Children see throughput for 1 pread readers     =  840101.38 KB/sec
Parent sees throughput for 1 pread readers  =  831083.31 KB/sec 
```

--- xfs ---

```
Iozone: Performance Test of File I/O
        Version $Revision: 3.397 $
    Compiled for 32 bit mode.
    Build: linux 

Contributors:William Norcott, Don Capps, Isom Crawford, Kirby Collins
             Al Slater, Scott Rhine, Mike Wisner, Ken Goss
             Steve Landherr, Brad Smith, Mark Kelly, Dr. Alain CYR,
             Randy Dunlap, Mark Montague, Dan Million, Gavin Brebner,
             Jean-Marc Zucconi, Jeff Blomberg, Benny Halevy, Dave Boone,
             Erik Habbinga, Kris Strecker, Walter Wong, Joshua Root,
             Fabrice Bacchella, Zhenghua Xue, Qin Li, Darren Sawyer.
             Ben England.

Run began: Mon Jun  4 14:47:49 2012

Record Size 4 KB
File size set to 524288 KB
Command line used: iozone -l 1 -u 1 -r 4k -s 512m -F /mnt/iozone.tmp
Output is in Kbytes/sec
Time Resolution = 0.000005 seconds.
Processor cache size set to 1024 Kbytes.
Processor cache line size set to 32 bytes.
File stride size set to 17 * record size.
Min process = 1 
Max process = 1 
Throughput test with 1 process
Each process writes a 524288 Kbyte file in 4 Kbyte records

Children see throughput for  1 initial writers  =   21854.47 KB/sec
Parent sees throughput for  1 initial writers   =    3836.32 KB/sec

Children see throughput for  1 rewriters    =   29420.40 KB/sec
Parent sees throughput for  1 rewriters     =    3955.65 KB/sec

Children see throughput for  1 readers      =  624136.75 KB/sec
Parent sees throughput for  1 readers       =  614326.13 KB/sec

Children see throughput for 1 re-readers    =  577542.62 KB/sec
Parent sees throughput for 1 re-readers     =  576533.42 KB/sec

Children see throughput for 1 reverse readers   =  483368.06 KB/sec
Parent sees throughput for 1 reverse readers    =  482598.67 KB/sec

Children see throughput for 1 stride readers    =  537227.12 KB/sec
Parent sees throughput for 1 stride readers     =  536313.77 KB/sec

Children see throughput for 1 random readers    =  525219.19 KB/sec
Parent sees throughput for 1 random readers     =  524062.07 KB/sec

Children see throughput for 1 mixed workload    =  561513.50 KB/sec
Parent sees throughput for 1 mixed workload     =  560142.18 KB/sec

Children see throughput for 1 random writers    =   24118.34 KB/sec
Parent sees throughput for 1 random writers     =    3117.71 KB/sec

Children see throughput for 1 pwrite writers    =   32512.07 KB/sec
Parent sees throughput for 1 pwrite writers     =    3825.54 KB/sec

Children see throughput for 1 pread readers     =  525244.94 KB/sec
Parent sees throughput for 1 pread readers  =  523331.93 KB/sec 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:54:16.153

我唯一需要深入挖掘文件系统性能的时候是在 Windows 系统上。无论您使用什么操作系统/文件系统，一般原则都适用...

**为什么你会做反向阅读？**

当程序运行时，它读取块 987654，然后使用该数据确定它需要块 123456。这可能发生在连接上：您的 Db 可能正在使用 table1 上的索引从表 2 中选择记录（使用索引）。拣货操作可能以表 1 的顺序进行（与表 2 的顺序相反）。

当使用两个键时，可能会发生类似的情况。

**什么是跨步阅读？**

读取每个第 N 个块 ex。读取块 12345600 然后读取块 12345700 然后块 12345800 的步幅为 100。想象一个包含许多和/或大列的表。该表可能包含需要多个文件系统块来保存数据的行。通常，数据库会将这些数据组织到每一行的记录中，每条记录占用几个连续的文件系统块。如果您的数据库行占用 10 个文件系统块并且您在两列上进行选择，您可能只需要读取该 10 个块记录的第 1 个和第 6 个块。然后，您的查询需要读取块 10001、10006、10011、10016、10021、10026 - 步长为 5。

**有人告诉我，“位置”操作 pread 和 pwrite 用于索引数据库，但为什么不简单地将索引保存在内存中呢？**

索引的大小可能会超过合理的 RAM 使用量。或者，您之前的使用将其他索引或数据调用到 ram 中，导致未使用的索引从文件系统/数据库缓存中删除。

*或者这是实际发生的情况，然后一旦给定某个索引，pread 就可以方便地跳转到记录的确切位置？* 是的，这可能就是您的数据库正在做的事情。

**您还使用 pread/pwrite 做什么？**

一些数据文件具有预定义的“有趣”位置。这可能是 B-Tree 索引、表头、日志/日志尾部或其他内容的根，具体取决于您的 Db 实现。pread/rwrite 正在测试重复跳到一组特定位置的性能，而不是测试均匀随机混合的位置。

**链接？**

存在适用于所有主流操作系统的系统[实用程序](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)，可以捕获每个操作系统文件系统操作。我认为这些在 *NIX 系统上可能被命名为 DTRACE 或 pTAP 或 pTRACE。您可以使用来自这些监视器的海量数据（智能过滤）来查看系统中的磁盘访问模式。

然后一般的经验法则是，对于 Db 的使用来说，大量的 RAM 是有帮助的。然后你的所有索引一直驻留在 RAM 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:39:24.370

抱歉：我无法添加有关您询问的特定系统调用的信息。所以我添加了一些自以为是的内容，而不是......

在我看来，iozone 并不是一个非常有趣的基准测试工具。我认为，分析各种系统调用也不是那么有趣。

重要的是文件系统在现实世界中的工作方式。然而，用真实世界场景进行基准测试可能非常耗时；例如，创建有效的测试环境可能需要很长时间。这就是为什么基准工具确实派上用场的原因。但是基准测试工具应该能够以尽可能接近实际应用的方式工作；此外，如果基准测试工具以粗暴的方式工作通常很好，以便探索所涉及的硬件/软件的限制。

满足这些要求的两个基准测试工具是[fio](http://freecode.com/projects/fio)和 Oracle 的[orion](http://www.oracle.com/technetwork/topics/index-089595.html)。使用这两种工具，可以相对容易地指定一个将使用读取和写入的合理组合的基准，并指定基准应该运行的并行度。并且可以执行设备级和 FS 级基准测试；这很好，因为有时您希望在没有特定文件系统开销的情况下对存储设备进行基准测试。与 Orion 相比，fio 具有动态邮件列表的优势，其中非常有可能获得好的答案（我还没有找到 Orion 的邮件列表）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-02T19:42:02.563

我可以就您问题的两个部分提供一些背景信息。由于观察了一些机械工程应用程序的 I/O 行为，引入了“向后读取”测试。这些应用程序经常会从磁盘顺序向前然后向后读取。有人*猜测*这与（线性代数）前向和后向替换有关，或者与依赖磁带驱动器的原始实现有关。

至于跨步访问，这是许多地震勘探应用程序（深度和/或时间偏移 IIRC）的常见 I/O 模式。与“向后读取”场景一样，这也是在观察这些应用程序的 I/O 行为后引入的。

# functional-specifications - 如何调用现有应用程序的功能规范？

> ID：10897793
> 
> 赞同：0
> 
> 时间：2012-06-05T13:00:45.160
> 
> 标签：functional-specifications

您将现有应用程序的功能规范称为什么？我有一个现有的应用程序，我需要重做该应用程序。它没有文档，我被要求编写功能分解规范。分解应用程序没有问题，但我正在寻找要使用的文档模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:06:59.143

您可以尝试[IEEE 1016-1998](http://en.wikipedia.org/wiki/Software_Design_Description)：“IEEE 1016-1998，也称为软件设计描述的推荐实践，是一个 IEEE 标准，它指定了软件设计描述 (SDD) 的组织结构。SDD 是用于在软件相关项目中指定系统架构和应用程序设计。”

# macos - Sublime Text 上的 ANT build.xml

> ID：10897798
> 
> 赞同：0
> 
> 时间：2012-06-05T13:01:08.190
> 
> 标签：macos, ant, sublimetext2

与我一起工作的人使用 Eclipse 作为他们的 IDE，而我使用的是 Sublime。真的不想放弃它，因为它运作良好。

他们在包含 build.xml 文件的构建目录下的项目根目录下有一个构建脚本。

Sublime 显然正在查看我的 build.xml 项目根目录但失败了，我该如何更改它的外观？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:37:54.980

您可以更改默认的 Ant.sublime-build 或复制它并将新文件设置为默认的“构建系统”。您可以更改“working_dir”或将 cmd 更改为类似

"cmd": ["ant", "-f", "/path_to/build.xml"]

或两者。

在 OSX 上，它位于 ~/Library/Application Support/Sublime Text 2/Packages/Java

# c++ - 临时对象——它们是什么时候创建的，你如何在代码中识别它们？

> ID：10897799
> 
> 赞同：41
> 
> 时间：2012-06-05T13:01:12.037
> 
> 标签：c++, temporary-objects

在 Eckel，第 1 卷，第 367 页

```
//: C08:ConstReturnValues.cpp
// Constant return by value
// Result cannot be used as an lvalue
class X {
   int i;
public:
   X(int ii = 0);
   void modify();
};

X::X(int ii) { i = ii; }

void X::modify() { i++; }

X f5() {
   return X();
}

const X f6() {
   return X();
}

void f7(X& x) { // Pass by non-const reference
   x.modify();
}

int main() {
   f5() = X(1); // OK -- non-const return value
   f5().modify(); // OK
// Causes compile-time errors:
//! f7(f5());
//! f6() = X(1);
//! f6().modify();
//! f7(f6());
} ///:~ 
```

为什么会`f5() = X(1)`成功？这里发生了什么？？？

Q1。当他这样做`X(1)`的时候——这里发生了什么？这是一个构造函数调用吗-不应该然后阅读`X::X(1);`它是类实例化吗-类实例化不是类似于：`X a(1);`编译器如何确定什么 `X(1)`是？我的意思是..名称装饰发生所以..`X(1)`构造函数调用将转换为：`globalScope_X_int`作为函数名称.. ???

Q2。当然，临时对象用于存储`X(1)` 创建的结果对象，然后将其分配给对象`f5()`返回（这也将是一个临时对象）？鉴于`f5()`返回一个将很快被丢弃的临时对象，他如何将一个常量临时分配给另一个常量临时？有人可以清楚地解释为什么： `f7(f5());`应该导致一个持续的临时性而不是简单的旧`f5();`

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-05T13:32:20.323

您所有的问题都归结为 C++ 中的一条规则，即临时对象（没有名称的对象）不能绑定到非常量引用。（因为 Stroustrup 认为这可能会引发逻辑错误……）

一个问题是您可以在临时上调用一个方法：所以`X(1).modify()`很好，但`f7(X(1))`不是。

至于临时创建的位置，这是编译器的工作。该语言的规则明确规定，临时对象只能存活到当前完整表达式结束（并且不再存在），这对于析构函数具有副作用的类的临时实例很重要。

因此，以下语句`X(1).modify();`可以完全翻译为：

```
{
    X __0(1);
    __0.modify();
} // automatic cleanup of __0 
```

考虑到这一点，我们可以攻击`f5() = X(1);`. 我们这里有两个临时工，还有一个任务。在调用赋值之前，赋值的两个参数都必须被完全评估，但顺序并不精确。一种可能的翻译是：

```
{
    X __0(f5());
    X __1(1);
    __0.operator=(__1);
} 
```

（另一种翻译是交换*和**初始化**的顺序`__0``__1`*）

它工作的关键`__0.operator=(__1)`是方法调用，并且可以在临时对象上调用方法:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-10T05:08:06.780

我对答案并不完全满意，所以我看了一下：

> “更有效的 C++”，Scott Meyers。第十九条：“了解临时对象的由来”

. 关于布鲁斯·埃克尔对“临时演员”的报道，好吧，正如我怀疑的那样，正如克里斯蒂安·劳直接指出的那样，这是完全错误的！呸！他（埃克尔的）把我们当作豚鼠！（一旦他纠正了所有的错误，这对于像我这样的新手来说将是一本好书）

> Meyer：“C++ 中真正的临时对象是不可见的——它们不会出现在您的源代码中。每当创建非堆对象但未命名时，它们就会出现。这种未命名的对象通常出现在以下两种情况之一：当隐式类型转换时用于使函数调用成功以及函数何时返回对象。”
> 
> “首先考虑创建临时对象以使函数调用成功的情况。当传递给函数的对象类型与其绑定的参数类型不同时，就会发生这种情况。”
> 
> “这些转换仅在按值传递对象或传递给引用到 const 参数时发生。它们不会在将对象传递到引用到非 const 参数时发生。”
> 
> “创建临时对象的第二组情况是函数返回对象时。”
> 
> “任何时候你看到一个引用到 const 的参数，都有可能创建一个临时的来绑定到那个参数。任何时候你看到一个函数返回一个对象，一个临时的就会被创建（然后被销毁）。”

答案的另一部分可以在：“Meyer: Effective C++”中找到，在“Introduction”中：

> “复制构造函数用于初始化具有相同类型的不同对象的对象：”

```
String s1;       // call default constructor
String s2(s1);   // call copy constructor
String s3 = s2;  // call copy constructor 
```

> “可能复制构造函数最重要的用途是定义按值传递和返回对象的含义。”

关于我的问题：

```
f5() = X(1) //what is happening? 
```

这里没有初始化一个新对象，因此这不是初始化（复制构造函数）：它是一个赋值（正如 Matthieu M 指出的那样）。

创建临时对象是因为根据 Meyer（顶部段落），两个函数都返回值，因此正在创建临时对象。正如 Matthieu 使用伪代码指出的那样，它变成： `__0.operator=(__1)`并且发生按位复制（由编译器完成）。

关于：

```
void f7(X& x);
f7(f5); 
```

因此，无法创建临时文件（Meyer：顶部段落）。如果已声明：`void f7(const X& x);`则将创建一个临时对象。

关于临时对象是常量：

Meyer 说（和 Matthieu）：“将创建一个临时的来绑定到该参数。”

因此，临时对象仅绑定到常量引用，并且本身不是“常量”对象。

关于：什么是`X(1)`？

Meyer，Item27，Effective C++ - 3e，他说：

> "C 风格的转换看起来像这样： (T)expression //将表达式转换为 T 类型
> 
> 函数样式转换使用以下语法： T(expression) //将表达式转换为 T 类型"

`X(1)`函数式演员也是如此。`1`表达式被强制转换为 type `X`。

迈耶又说了一遍：

> “我唯一一次使用旧式强制转换是在我想调用显式构造函数将对象传递给函数时。例如：

```
class Widget {
  public:
    explicit Widget(int size);
    ...
};

void doSomeWork(const Widget& w);
doSomeWork(Widget(15)); //create Widget from int
                        //with function-style cast

doSomeWork(static_cast<Widget>(15)); 
```

> 不知何故，故意的对象创建“感觉”不像是强制转换，所以在这种情况下，我可能会使用函数式强制转换而不是 static_cast。”

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-05T13:31:42.537

1.  这确实是一个构造函数调用，一个计算类型为临时对象的表达式`X`。`X([...])`作为类型名称的表单表达式是`X`创建临时类型对象的构造函数调用`X`（尽管我不知道如何用适当的标准来解释这一点，并且在某些特殊情况下解析器的行为可能会有所不同）。这与您在`f5`and`f6`函数中使用的构造相同，只是省略了可选`ii`参数。

2.  由`X(1)`生命创建的临时变量（不会被破坏/无效）直到包含它的完整表达式结束，这通常意味着（就像在这种情况下的赋值表达式一样）直到分号。同样确实会`f5`创建一个临时文件`X`并将其返回到调用站点（内部`main`），从而复制它。所以在 main`f5`调用也返回一个临时的`X`. 然后将此临时`X`分配给由`X`创建的临时`X(1)`。完成之后（如果需要，分号到达），两个临时对象都会被销毁。此分配有效，因为这些函数返回普通**的非常量**对象，无论它们是否只是临时的并在表达式被完全评估后被销毁（从而使赋值或多或少毫无意义，即使完全有效）。

    它不起作用，`f6`因为它会返回`const X`您无法分配的 a 。同样不起作用`f7(f5())`，因为`f5`创建临时对象和临时对象不会绑定到非常量左值引用`X&`（C++11`X&&`为此目的引入了右值引用，但这是另一回事）。`f7`如果采用 const reference它将起作用`const X&`，因为常量左值引用绑定到临时对象（但`f7`它本身将不再起作用，当然）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-11T13:55:58.860

这是执行代码时实际发生的示例。我做了一些修改以澄清幕后的过程：

```
#include <iostream>

struct Object
{
    Object( int x = 0 ) {std::cout << this << ": " << __PRETTY_FUNCTION__ << std::endl;}
    ~Object() {std::cout << this << ": " << __PRETTY_FUNCTION__ << std::endl;}
    Object( const Object& rhs ){std::cout << this << ": " << __PRETTY_FUNCTION__ << " rhs = " << &rhs << std::endl;}
    Object& operator=( const Object& rhs )
    {
        std::cout << this << ": " << __PRETTY_FUNCTION__ << " rhs = " << &rhs << std::endl;
        return *this;
    }
    static Object getObject()
    {
        return Object();
    }
};

void TestTemporary()
{
    // Output on my machine
    //0x22fe0e: Object::Object(int) -> The Object from the right side of = is created Object();
    //0x22fdbf: Object::Object(int) -> In getObject method the Temporary Unnamed object is created
    //0x22fe0f: Object::Object(const Object&) rhs = 0x22fdbf -> Temporary is copy-constructed from the previous line object
    //0x22fdbf: Object::~Object() -> Temporary Unnamed is no longer needed and it is destroyed
    //0x22fe0f: Object& Object::operator=(const Object&) rhs = 0x22fe0e -> assignment operator of the returned object from getObject is called to assigne the right object
    //0x22fe0f: Object::~Object() - The return object from getObject is destroyed
    //0x22fe0e: Object::~Object() -> The Object from the right side of = is destroyed Object();

    Object::getObject() = Object();
} 
```

您必须知道，在大多数现代编译器上，将避免复制构造。这是因为编译器进行了优化（返回值优化）。在我的输出中，我明确删除了优化以显示根据标准实际发生的情况。如果您也想删除此优化，请使用以下选项：

```
-fno-elide-constructors 
```

# mysql - 如何将 MySQL 过程作为触发器返回？

> ID：10897800
> 
> 赞同：0
> 
> 时间：2012-06-05T13:01:18.157
> 
> 标签：mysql, triggers, plpgsql, procedure

我是 MySQL 程序的新手。我需要模拟一些我通常使用 PLpgSQL 执行的代码，如下所示：

```
DROP FUNCTION IF EXISTS "aprtr_controlo_tabelas_ins_upd" () CASCADE;
CREATE OR REPLACE FUNCTION "aprtr_controlo_tabelas_ins_upd" ()         
RETURNS trigger AS

$BODY$
        BEGIN
            IF (TG_OP = 'INSERT') THEN
                NEW.data_ult_actual := current_timestamp;
                NEW.id_utiliz_ins := current_user;
            RETURN NEW;
            ELSEIF (TG_OP = 'UPDATE') THEN
                NEW.data_ult_actual := current_timestamp;
                NEW.id_utiliz_upd := current_user;
            RETURN NEW;
            END IF;

            RETURN NULL;
        END;
$BODY$
        LANGUAGE PLpgSQL
        CALLED ON NULL INPUT
        VOLATILE
        EXTERNAL SECURITY DEFINER; 
```

可以在 MySQL 中编写返回触发器的过程吗？或者更好的是，我可以在 INSERT 或 UPDATE 操作中使用过程代码并将其称为触发器吗？

此致，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T14:12:38.820

MySQL 只支持特定的数据类型作为函数返回类型。根据 MySQL 文档`trigger`不是数据类型。作为数据类型的自定义对象不是AFAIK的功能。[***此处***](http://dev.mysql.com/doc/refman/5.6/en/data-type-overview.html)详细介绍了支持的数据类型。

参考：[***MySQL CREATE FUNCTION 语法***](http://dev.mysql.com/doc/refman/5.6/en/create-procedure.html)。

# dojo - dojo addOnLoad/ready 不适用于对话框

> ID：10897805
> 
> 赞同：1
> 
> 时间：2012-06-05T13:01:56.480
> 
> 标签：dojo

所以看起来`dojo.addOnLoad`和`dojo.ready`功能不适用于对话框。

我正在寻找替代品。问题是我的对话框 HTML 是动态创建的，并且包含许多不同的脚本块，每个脚本块都使用一个`dojo.connect`函数来添加功能。例如，我有：

```
<input type='checkbox' name='value(liquid40011252)'  value='1' dojoType='dijit.form.CheckBox' id='liquid4001125249' />
 <script type='text/javascript'>dojo.addOnLoad(function() {
    dialogConnect4001125249();});
    function dialogConnect4001125249() { 
        dojo.connect(dijit.byId('liquid4001125249'), 'onChange', 
         function(){
           // my code for toggling checkboxes ets
         });
    }
  </script> 
```

这在普通网页中工作正常，但对话框`addOnLoad`不受尊重且未`dijit.byId('liquid4001125249')`定义。`ready`没有帮助。

我实例化对话框

```
searchDlg = dojox.widget.DialogSimple();
searchDlg.set("title", title);
searchDlg.set("style", "width: " + width + "px; max-height: "+height+"px; overflow:auto;");
searchDlg.set("content", content);
searchDlg.show(); 
```

并考虑调用`dialogConnect`之后，`show`但有很多`dialogConnectxxxxx`，我没有列表。

也许另一种选择是以某种方式在`dialogConnect`某处添加 s 列表 - 也许在对话框本身上。没有把握。

关于如何解决这个复杂问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:02:29.993

在您的情况下，对话框仅在`searchDlg...`代码执行后才存在。在例程`dijit.byId`中找不到它们是正常的。`addOnLoad`

我真的不知道您想在`connectDialog`函数中做什么，但我认为您将通过子类化 Dialog 并使用该`postCreate`方法连接到对话框来获得可读性。

```
dojo.declare("mynamespace.MyCustomDialog", [dijit.Dialog], {

    templateString: dojo.cache("mynamespace", "templates/MyCustomDialog.html"),
    widgetsInTemplate: true,

    postCreate: function()
        {
        // do whatever dojo.connect you need
        },

    }); 
```

# iphone - Monotouch 为渐变添加边框

> ID：10897806
> 
> 赞同：0
> 
> 时间：2012-06-05T13:01:57.920
> 
> 标签：iphone, xamarin.ios, drawing, gradient

我正在尝试为渐变按钮添加边框：

```
var c = bdPencil.ColorMain;
Context.SetLineWidth(bdPencil.Width);
Context.SetStrokeColor(c.R, c.G, c.B, c.A);
Context.Clip();
CGColorSpace colorSpace = CGColorSpace.CreateDeviceRGB();
CGGradient gradient = new CGGradient(colorSpace, colors, 
new float[]{ 0, 1 });
Context.DrawLinearGradient(gradient, new PointF((float)r.CenterX, (float)r.Top), new PointF((float)r.CenterX, (float)r.Bottom), 
CGGradientDrawingOptions.DrawsAfterEndLocation);
Context.RestoreState(); 
```

它不工作。如果我用纯色做同样的事情，一切都会正常工作：

```
 var c = bdPencil.ColorMain;
  Context.SetLineWidth(bdPencil.Width);
  Context.SetStrokeColor(c.R, c.G, c.B, c.A);
  var g = bgPencil.ColorMain;
  Context.SetFillColor(g.R, g.G, g.B, g.A);
  Context.DrawPath(CGPathDrawingMode.FillStroke); 
```

当我在`DrawLinearGradinet`什么都没有发生后试图抚摸路径时。我想我需要像 GradientStroke 这样的东西，但我找不到它。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:34:07.470

错误是我尝试在上下文中做所有事情。我画了一条路径，抚摸它，然后我画了渐变，它起作用了。

# gradle - 为 Gradle 任务属性提供派生默认值的正确方法

> ID：10897811
> 
> 赞同：2
> 
> 时间：2012-06-05T13:02:15.547
> 
> 标签：gradle

我正在编写一个 Gradle 任务来生成应用程序部署所需的某个配置文件。我想让用户自定义生成文件的名称和位置。

任务类的粗略草图是：

```
class ConfigurationFileTask extends DefaultTask {

    String configFileName = 'config.xml'

    File configFilePath = new File(project.buildDir, configFileName) 

} 
```

这个想法是让用户随心所欲地覆盖文件名或整个文件位置。

我意识到上面的代码实际上不起作用，因为在初始化程序运行`project`时没有定义；`configFile`我的问题是找出正确的方法来做到这一点。

现在，我希望这个任务在更广泛的构建中成为一个好公民，这意味着其他任务应该能够引用它的属性。例如，我希望用户能够编写：

```
task createConfigFile(type: ConfigurationFileTask) {
    configFileName = 'app-config.xml'
}

jar {
    from(createConfigFile.configFilePath)
}
jar.dependsOn createConfigFile 
```

并将生成的配置文件添加到 jar 中。请注意，在这种情况下，用户正在设置`configFileName`，但指的是`configFilePath`. 这意味着必须在设置名称后的某个时间计算路径。

那么，我如何提供一个可由用户设置但具有基于另一个属性的默认值的属性，以及该属性在哪里可以被其他任务使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:03:45.507

那么让它成为一种方法，这绝对有效

```
task overrideBoth(type: ConfigurationFileTask) {
    _configFileName = 'app-configb.xml'
    _dir = '../'
}   

task overrideFileName(type: ConfigurationFileTask) {
    _configFileName = 'app-confign.xml'
}

task overridePath(type: ConfigurationFileTask) {
    _dir = '../../'
}

task defaultBehavior(type: ConfigurationFileTask) {
}

class ConfigurationFileTask extends DefaultTask {
    def _configFileName = 'config.xml'
    def _dir = project.buildDir
    def getFile() {
        return new File(_dir,_configFileName)
    }   
}   

task otherTask(type: DefaultTask) {
    println("defaultValues ${defaultBehavior.getFile().canonicalPath}")
    println("overrideFileName ${overrideFileName.getFile().canonicalPath}")
    println("overridePath ${overridePath.getFile().canonicalPath}")
    println("overrideBoth ${overrideBoth.getFile().canonicalPath}")

} 
```

configFileName 被覆盖

# php - 查找数组中第二高的变量

> ID：10897812
> 
> 赞同：3
> 
> 时间：2012-06-05T13:02:24.250
> 
> 标签：php

我想在数组中找到第二高的变量。

**例如，如果我有：**

```
$cookies = array(
                "chocolate" => "20",
                "vanilla" => "14",
                "strawberry" => "18",
                "raspberry" => "19",
                "bluebery" => "29"
); 
```

我可以用它`max($cookies)`来找到最高的变量，即`"bluebery" => "29"`.

**但是我如何找到第二高的呢？** `"chocolate" => "20"`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-05T13:05:18.477

对其进行排序并获得第二项是最简单的方法：

```
arsort($cookies);
$keys = array_keys($cookies);

echo $keys[1]; // chocolate
echo $cookies[$keys[1]]; // 20 
```

如果您想要一种更有效的方法，您也可以手动完成，同时跟踪最高和次高的项目：

```
function secondMax($arr) {
    $max = $second = 0;
    $maxKey = $secondKey = null;

    foreach($arr as $key => $value) {
        if($value > $max) {
            $second = $max;
            $secondKey = $maxKey;
            $max = $value;
            $maxKey = $key;
        } elseif($value > $second) {
            $second = $value;
            $secondKey = $key;
        }
    }

    return array($secondKey, $second);
} 
```

用法：

```
$second = secondMax($cookies);
echo "{$second[0]} => {$second[1]}"; // chocolate => 20 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T13:05:06.557

为了好玩，您可以使用[`max()`](http://php.net/max)两次 :)

例如：

*   复制数组
*   跑`max()`
*   删除*最大值*
*   `max()`再次运行

另一种方法是根据值对数组进行排序并获取数组的第二个元素。我很好奇哪个*更快*。大概是那种。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T13:09:14.940

```
arsort($cookies) AND array_shift($cookies) AND list($k, $v) = each($cookies);
echo "$k => $v"; // chocolate => 20 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T13:05:44.980

尝试 ：

```
asort($cookies);
end($cookies);
prev($cookies);
list($key,$value) = each($cookies); 
```

或反转它

```
arsort($cookies);
reset($cookies);
next($cookies);
list($key,$value) = each($cookies); 
```

****编辑****

我想无论如何我都会分享这个，如果有人偶然发现这个并需要它：

```
/**
 * Returns the key => value pair with the specific rank.
 * if $rank is 0, falase is returned. If $rank is positive,
 * then the $rank th smallest pair is returned. If $rank
 * is negative, then the $rank th biggest pair is returned.
 * If $rank range is outside the size of the array, false
 * is returned. If a callable function is provided, it will
 * be used to sort the data. If $keySort is true, then the
 * data will be sorted by keys instead (the callback functions
 * will receive the keys to compare instead of values)
 * 
 * @param $data array
 * @param $rank int
 * @param $cmd_function callable (optional)
 * @param $keySort boolean (optional)
 * @return array            the key => value pair or false
 */
function findByRank($data, $rank, $cmd_function = null, $keySort = false) {
    if (($rank == 0) || (abs($rank) > count($data))) {
        return false;
    }
    $sort = ($keySort?'k':'a').'sort';
    if ($cmd_function != null) {
        $sort = 'u'.$sort;
        $sort($data, $cmd_function);
    } else {
        $sort($data);
    }

    if ($rank > 0) {
        reset($data);
        $next = 'next';
    } else {
        end($data);
        $next = 'prev';
        $rank = abs($rank);
    }
    while (--$rank > 0) $next($data);
    return each($data);
}

$cookies = array(
                "chocolate" => "20",
                "vanilla" => "14",
                "strawberry" => "18",
                "raspberry" => "19",
                "bluebery" => "29"
);

header('Content-type:text/plain; charset=utf-8');
var_dump(findByRank($cookies, -10));  // -> false
var_dump(findByRank($cookies, -2));   // -> 'chocolate' key=>value pair
var_dump(findByRank($cookies, -1));   // -> 'blueberry' key=>value pair
var_dump(findByRank($cookies, 0));    // -> false
var_dump(findByRank($cookies, 1));    // -> 'vanilla' key=>value pair
var_dump(findByRank($cookies, 3));    // -> 'raspberry' key=>value pair 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-05T13:08:30.860

```
rsort($cookies);
echo $cookies[1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-05T13:05:21.517

对数组进行降序排序并取第二个值。或者，为了保存，取第一个值并遍历数组，直到找到一个较小的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T07:51:19.183

检查这个网址

[http://maheshbokkisam.blogspot.in/2013/04/find-nth-highest-value-in-array-without.html](http://maheshbokkisam.blogspot.in/2013/04/find-nth-highest-value-in-array-without.html)

从给定数组中查找第 N 个/第 N 个最大值，而不使用 PHP 中的任何排序

 `````
$ar  =  array(23,56,87,12,98,85,24,54,99,100,1,4,5,2,76,37,92);

$n   = count($ar) - 5;

for($i = 0; $i < $n; $i++){
    // Get the max value from array // get the Nth value from last loop
    echo $a = max($ar); 

    echo "<br /><pre>"; print_r($ar);

    $ar = array_flip($ar);    // Flip the array
    //print_r($ar);

    unset($ar[$a]);           // Unset the max value from array
    //print_r($ar);

    $ar = array_flip($ar);    // Flip the array
    echo "</pre>";
    echo "<hr />";
} 
````  `* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-20T11:50:52.647

```
function second_largest($arr)
{
    sort($arr, SORT_NUMERIC);

    return($arr[count($arr) - 2]);
}

//echo 3

echo second_largest(array(0, 3, 4, 1, 2)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-31T16:16:31.207

```
<?php

 // Finding Second highest number (In case of index of array is random)
$arr = [-5 => 33, -4 => -2, 8 => 0, 44, 44, 44, 44, 44];
$max = -INF;
$secondMax = -INF;
$size = sizeof($arr);
if ($size > 1) {
    foreach ($arr as $key => $value) {
        echo "KEY-> ", $key, "VALUE->", $value, "\n";
        if ($value > $max) {
            $max = $value;
        } else {
            if ($value < $max && $value > $secondMax) {
                $secondMax = $value;
            }
        }
    }
} else if ($size == 0) {
    $max = "No Max element";
    $secondMax = "No Second highest element";
} else {
    foreach ($arr as $key => $value) {
        $max = $arr[$key];
        $secondMax = "No second highest element";
    }
}

echo "maxvalue = ", $max, "\n";
echo "secondmax =", $secondMax; 
`````

# facebook - 通过 Graph API 将图像上传到 Facebook Wall/Feed

> ID：10897817
> 
> 赞同：2
> 
> 时间：2012-06-05T13:02:36.777
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-wall

我正在尝试将本地图像直接上传到页面提要（即“Wall Photos”相册）。

这是我认为*应该*工作的代码：

```
<?php
$facebook = new Facebook(array(
    'appId'  => $the_app_id,
    'secret' => $this_app_secret,
));
$facebook->setAccessToken($the_access_token);
$facebook->setFileUploadSupport(true);

$attachment = array(
    'message' => $the_post_body,
    'name' => $this_image_name,
    'picture' => '@' . $the_absolute_path_to_image
);

$result = $facebook->api('/me/feed, 'post', $attachment); 
```

但是这段代码只产生了一个纯文本墙贴，内容为“消息”（即图片字段似乎被忽略了）。我也尝试过“/page_id/feed”，结果相同。

现在，只需将端点更改为“/me/photos”，将照片上传到带有应用名称的“普通”相册，但我希望它看起来尽可能像普通帖子，因此进入“墙照片”专辑）。

我意识到我可以通过使用 FQL 查询图表来找到“Wall Photos”相册的 object_id 来实现这一点，但如果它不存在，则需要额外的权限才能创建它，我宁愿保持权限尽可能简单。

**如果有人能指出如何将照片上传到“/me/feed”，我将不胜感激。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:55:47.113

> 但是这段代码只产生了一个纯文本墙贴，内容为“消息”（即图片字段似乎被忽略了）。我也尝试过“/page_id/feed”，结果相同。

您只能提供图片链接，不能提供数据。

> 现在，只需将端点更改为“/me/photos”，将照片上传到带有应用名称的“普通”相册，但我希望它看起来尽可能像普通帖子，因此进入“墙照片”专辑）。

是的，它默认创建一个基于应用程序的相册。如果已经存在，则上传到相册。并生成一个帖子。

> 我意识到我可以通过使用 FQL 查询图表来找到“Wall Photos”相册的 object_id 来实现这一点，但如果它不存在，则需要额外的权限才能创建它，我宁愿保持权限尽可能简单。

您不能为我/饲料端点上传到 fb。您应该存储在您的 server/s3/some 服务中，并将公共 url 提供给我/feed 参数。

# php - jQuery 文件上传，将文件限制为 1 个图像和 1 个视频？

> ID：10897818
> 
> 赞同：0
> 
> 时间：2012-06-05T13:02:43.680
> 
> 标签：php, jquery, forms, uploading

我正在尝试使用这个 jQuery 插件来上传文件[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

我希望能够将用户可以上传的文件限制为仅 1 个图像和 1 个视频。我知道我可以将表单设置为只允许 jpg、gif、png、mov 和 mp4 文件，但这不会阻止某人上传 2 个图像或 2 个视频。有没有办法将其限制为 1 个图像和 1 个视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:26:41.777

我认为您必须为每种类型添加一个上传字段，然后设置以下值：

```
limitConcurrentUploads 
```

要限制并发上传的数量，请将此选项设置为大于 0 的整数值。

```
Type: number
Default: undefined
Example: 3

maxNumberOfFiles 
```

此选项限制允许使用此小部件上传的文件数量。默认情况下，允许无限制的文件上传。

```
Type: number
Example: 10 
```

[资源](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:23:34.463

您可以将可一次上传的最大文件数设置为 2，在`php.ini`. 因此，如果您想限制每个用户，您可以在后端进行。

从 php 层检查扩展。`User Context`还可以在上传之前提供一些（`AJAX POST`可以做），在后端处理以了解用户是否已经完成了他/她的上传。根据响应的值，您可以在回调中上传文件。

前端处理，可能是某种页面级别`ACL`，可以在页面加载时根据用户信息进行初始化，并允许或禁止他上传，但您需要对此缓存进行某种失效。

# excel - 垂直滚动不起作用。Excel

> ID：10897824
> 
> 赞同：1
> 
> 时间：2012-06-05T13:03:04.833
> 
> 标签：excel, vba

我有一个 excel 表，我试图让滚动条显示列表中可能数百个项目中的 10 个。我创建了一个滚动条，让它引用一个字段，用于计算。滚动条与之交互的每个字段也会在字段外引用。所以我无法想象为什么它不起作用。

发生的事情是，当我上下滚动条时，它右侧的文本不会移动。我想知道是不是我的电脑。如果是我的电脑，我需要做什么才能让它工作？我使用 VBA，我可能不小心禁用了某些东西以使滚动不起作用，但我不知道。

有人可以帮忙吗？

这是有问题的工作表。

[https://dl.dropbox.com/u/3327208/Excel/scrollnotworking.xlsx](https://dl.dropbox.com/u/3327208/Excel/scrollnotworking.xlsx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:19:49.820

您的计算设置为手动。

做这个。在下面

`Formulas Tab`点击`Calculation Options`然后点击`Automatic`

现在试试

![在此处输入图像描述](../Images/ac36e2063fa3200c3891815b187838b3.png)

**跟进**

> 甜蜜的完美，VBA中有没有办法做到这一点？我必须检查我的代码并找出是否有一个地方可以将它作为手册......因为我认为有。– 马特里奇 1 分钟前

通过 VBA 切换到手动计算主要有两个原因

**1）**您设置它`MANUAL`然后忘记将其设置回来。例如

```
Sub Sample()
    Application.Calculation = xlCalculationManual

    '~~> Rest of your code
End Sub 
```

**2）**您将其设置`MANUAL`为开头并设置`AUTOMATIC`为结尾，但它仍然存在`MANUAL`。这主要是因为您没有包含正确`Error Handling`的代码，因此代码过早地从过程中退出。看这个例子

**错误的方法**

```
Sub Sample()
    Application.Calculation = xlCalculationManual

    '~~> Rest of your code

    Application.Calculation = xlCalculationAutomatic
End Sub 
```

**首选方式**

```
Sub Sample()
    On Error GoTo Whoa

    Application.Calculation = xlCalculationManual

    '~~> Rest of your code

Letscontinue:
    Application.Calculation = xlCalculationAutomatic
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

**注意**：如果需要，您还可以存储当前状态`Calculation`并将其设置回代码末尾。

# linux - 添加带有差异文件的补丁时出错

> ID：10897830
> 
> 赞同：2
> 
> 时间：2012-06-05T13:03:34.253
> 
> 标签：linux, diff, patch

我在使用差异文件添加补丁时遇到了一些麻烦。我以这种方式使用两个 C 源创建了差异文件：

```
$diff gitrans.c.origin gifstrans > giftrans.diff 
```

当我尝试使用 diff 文件创建补丁时，我收到此错误：

```
$patch -p1 < giftrans.diff
patch: **** Only garbage was found in the patch input. 
```

有人可以帮我吗？我找不到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:11:47.520

您没有使用正确的语法。像这样使用：

```
$diff -aNur gitrans.c.origin gifstrans > giftrans.diff 
```

在哪里

```
-a , treats it as text
-N , treats absent files as empty, useful if you want
     just changes of different existing files but not 
     for new files
-u , output as unified. This is need to fix you problem
-r , recursively, useful if you want diff directories 
```

我总是忘记选项，所以我只记得这个词**`aNur`**。这很容易记住。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:56:04.603

您应该使用具有给定补丁语法的统一差异格式

```
$diff -u gitrans.c.origin gifstrans > giftrans.diff
$patch < giftrans.diff 
```

或具有以下补丁语法的默认差异格式

```
$diff gitrans.c.origin gifstrans > giftrans.diff
$patch gitrans.c.origin giftrans.diff 
```

# ruby-on-rails-3 - Rails group_by 和 in_groups_of 错误

> ID：10897832
> 
> 赞同：1
> 
> 时间：2012-06-05T13:03:43.703
> 
> 标签：ruby-on-rails-3, group-by

我有一个组织列表，按名称按字母顺序分组和显示。我想为每个字母在 4 列中显示这些，即：

```
A
A... A... A... A...
A... A... A... A...

...

Z
Z... Z... 
```

我使用了以下代码：

```
<% @organisations.keys.sort.each do |starting_letter| %>
    <div class="page-chunk default">
        <h6><%= starting_letter %></h6>
        <% @organisations[starting_letter].each do |organisations| %>
            <% organisations.in_groups_of(4).each do |column| %>
                <div class="one_quarter">
                    <% column.each do |organisation| %>
                        <%= link_to organisation.name, organisation_path(organisation) %><br />
                    <% end %>
                </div>
            <% end %>
        <% end %>
    </div>
<% end %> 
```

在控制器中：

```
@organisations = Organisation.all.group_by{ |org| org.name[0] } 
```

但是`undefined method`为 # `for my troubles. If I change the code to`@organisations[starting_letter].in_groups_of(4).each 获取 in_groups_of' 做 |organisations| `then I get a`NilClass 错误。

我做错了什么，我应该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T22:25:24.437

Try `organisations.in_groups_of(4, false)` without the `false`，它将用 s 填充最后一组中的任何空白点，`nil`这意味着它将尝试调用`name`。`nil`

# xmpp - 如何通过 XMPP（smack API）查询用户及其订阅

> ID：10897833
> 
> 赞同：0
> 
> 时间：2012-06-05T13:03:46.873
> 
> 标签：xmpp, openfire, smack

我目前正在一个 openfire 服务器上工作，我有不同的用户和 4 个可能的订阅主题。现在我想显示在客户端开始时订阅的主题。

有没有办法通过 Smac (xmpp) 搜索用户的订阅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T16:35:06.297

您应该能够使用[PubSubManager](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/pubsub/PubSubManager.html)（<- Smack api 文档链接）来获取所有订阅和节点。下面使用 PubSubManager 获取订阅列表，然后使用该列表获取所有订阅 ID：

```
try
{
    PubSubManager manager = new PubSubManager(XMPPClient.connection);
    List<Subscription> listSubs = manager.getSubscriptions();
    for(int i = 0; i < listSubs.size(); i++)
    {
        System.out.println(listSubs.get(i).getId());
    }
}
catch(XMPPException e)
{
    System.out.println(e.getMessage());
} 
```

打印连接订阅的所有订阅 ID 的简单示例。XMPPClient 是您的 Smack XMPPClient 实例的名称。但是，如果您需要节点和特定节点信息，您可以使用管理器从 id 获取节点，然后使用[Node](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/pubsub/Node.html)类获取节点信息。检查该文档，您可以获得有关订阅节点的几乎所有信息。

希望有帮助！

# iphone - 我可以实现一个具有 2 种通知类型的应用程序（远程和报亭通知）

> ID：10897837
> 
> 赞同：0
> 
> 时间：2012-06-05T13:03:55.113
> 
> 标签：iphone, xcode, notifications, newsstand-kit

我需要知道我是否可以实现一个可以处理两种类型通知的应用程序

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T00:21:39.517

远程和本地通知都使应用程序能够通知其用户它有一些东西（信息）给他们——以通知的形式（它可能是一条消息、即将发生的日历事件或远程服务器上的新数据），当应用程序未在前台运行。

当由操作系统呈现时，本地通知和推送通知的外观和声音相同。他们可以显示警报消息，也可以标记应用程序图标。他们还可以在显示警报或徽章编号时播放声音。

两者的区别在于：

*   本地通知由应用程序安排，并由同一设备上的 iOS 传递。本地通知仅在 iOS 中可用。
*   推送通知，也称为远程通知，由应用程序的远程服务器（其提供者）发送到 Apple 推送通知服务，该服务将通知推送到安装了应用程序的设备。推送通知在 iOS 和从 Mac OS X v10.7 (Lion)、Mac OS X 开始都可用。

回到你的问题，答案是肯定的。

根据 Apple 文档中的讨论：

为了让 iOS 稍后发送本地通知，应用程序创建一个 UILocalNotification 对象，为其分配一个发送日期和时间，指定演示详细信息并安排它。要接收推送通知，应用程序必须注册以接收通知，然后将其从操作系统获取的设备令牌传递给其提供者。

当操作系统提供本地通知（仅限 iOS）或推送通知（iOS 或 Mac OS X）并且目标应用程序未在前台运行时，它会显示通知（警报、图标徽章编号、声音）。如果有通知警报并且用户点击或单击操作按钮（或移动操作滑块），应用程序将启动并调用方法以传入本地通知对象或远程通知有效负载。如果在传递通知时应用程序正在前台运行，则应用程序委托会收到本地或推送通知。

要进一步了解，请阅读有关[本地和推送通知](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW2)的更多信息。

# java - 如何在 JTable 的单元格中实现自动完成功能？

> ID：10897839
> 
> 赞同：2
> 
> 时间：2012-06-05T13:04:23.613
> 
> 标签：java, swing, autocomplete, jtable, jcombobox

我的 JTable 有一个作为 DefaultCellEditor(JComboBox) 类的实例实现的单元格编辑器。我尝试了几种不同的方法（[向 Swing Comboboxes 添加自动完成支持](http://today.java.net/pub/a/today/2007/07/19/adding-auto-completion-to-swing-comboboxes.html) ），但它仍然不起作用。

1：

```
//
JComboBox combo = new JComboBox(new Object[] { "Ester", "Jordi", "Jordina", "Jorge", "Sergi" });
AutoCompleteDecorator.decorate(combo);
DefaultCellEditor cellEditor = new DefaultCellEditor(combo);
TableColumn column = myTable.getColumnModel().getColumn(2);
column.setCellEditor(cellEditor);
// 
```

2：

```
//
Object[] elements = new Object[] { "Ester", "Jordi", "Jordina", "Jorge", "Sergi" };
JComboBox c = new JComboBox(elements);
c.setEditable(true);
AutoCompleteSupport support = AutoCompleteSupport.install(c, GlazedLists.eventListOf(elements));
support.setSelectsTextOnFocusGain(false);
support.setHidesPopupOnFocusLost(false);
support.setStrict(false);
ComboBoxCellEditor combo = new ComboBoxCellEditor(c);
TableColumn column = myTable.getColumnModel().getColumn(2);
ComboTableCellRenderer renderer = new ComboTableCellRenderer();
column.setCellRenderer(renderer);
column.setCellEditor(combo);
// 
```

3：

```
//
Object[] elements = new Object[] { "Ester", "Jordi", "Jordina", "Jorge", "Sergi" };
JComboBox comboBox = new JComboBox(elements);
comboBox.setEditable(true);
AutoCompletion ac = new AutoCompletion(comboBox);
ac.setStrict(false);
DefaultCellEditor cellEditor = new DefaultCellEditor(comboBox);
TableColumn column = myTable.getColumnModel().getColumn(2);
column.setCellEditor(cellEditor);
// 
```

我面临的问题是，一旦用户开始在组合框中输入，它就会退出编辑模式，从而有效地防止输入任何值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:26:17.883

[我最喜欢的AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)没有问题，仍然有第二选择使用，`AutoComplete JTextField`而不是`AutoComplete JComboBox`，

![在此处输入图像描述](../Images/b4c46d27d166b4696a5a08eb8384a5ba.png)

![在此处输入图像描述](../Images/8083bd32ea77451e6d65281eea736767.png)

添加到 Oracle JTable 教程的代码中

```
import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.util.ArrayList;

/**
 * TableRenderDemo is just like TableDemo, except that it
 * explicitly initializes column sizes and it uses a combo box
 * as an editor for the Sport column.
 */
public class TableRenderDemo extends JPanel {
    private static final long serialVersionUID = 1L;

    private boolean DEBUG = false;

    public TableRenderDemo() {
        super(new GridLayout(1, 0));
        JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);
        //Set up column sizes.
        initColumnSizes(table);
        //Fiddle with the Sport column's cell editors/renderers.
        setUpSportColumn(table, table.getColumnModel().getColumn(2));
        //Add the scroll pane to this panel.
        add(scrollPane);
    }

    /*
     * This method picks good column sizes.
     * If all column heads are wider than the column's cells'
     * contents, then you can just use column.sizeWidthToFit().
     */
    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel) table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer = table.getTableHeader().getDefaultRenderer();
        for (int i = 0; i < 5; i++) {
            column = table.getColumnModel().getColumn(i);
            comp = headerRenderer.getTableCellRendererComponent(null, column.getHeaderValue(), false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;
            comp = table.getDefaultRenderer(model.getColumnClass(i)).getTableCellRendererComponent(table, longValues[i], false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;
            if (DEBUG) {
                System.out.println("Initializing width of column " + i + ". " + "headerWidth = " + headerWidth + "; cellWidth = " + cellWidth);
            }
            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    public void setUpSportColumn(JTable table, TableColumn sportColumn) {
        //Set up the editor for the sport cells.
        ArrayList<String> listSomeString = new ArrayList<String>();        
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
        Java2sAutoComboBox comboBox = new Java2sAutoComboBox(listSomeString);
        comboBox.setDataList(listSomeString);
        comboBox.setMaximumRowCount(3);
        sportColumn.setCellEditor(new DefaultCellEditor(comboBox));
        //Set up tool tips for the sport cells.
        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
        renderer.setToolTipText("Click for combo box");
        sportColumn.setCellRenderer(renderer);
    }

    class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {{"Kathy", "Smith", "Snowboarding", new Integer(5), false},
            {"John", "Doe", "Rowing", new Integer(3), true}, {"Sue", "Black", "Knitting", new Integer(2), false},
            {"Jane", "White", "Speed reading", new Integer(20), true}, {"Joe", "Brown", "Pool", new Integer(10), false}};
        public final Object[] longValues = {"Jane", "Kathy", "None of the above", new Integer(20), Boolean.TRUE};

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        /*
         * JTable uses this method to determine the default renderer/
         * editor for each cell.  If we didn't implement this method,
         * then the last column would contain text ("true"/"false"),
         * rather than a check box.
         */
        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        /*
         * Don't need to implement this method unless your table's
         * editable.
         */
        @Override
        public boolean isCellEditable(int row, int col) {
            //Note that the data/cell address is constant,
            //no matter where the cell appears onscreen.
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        /*
         * Don't need to implement this method unless your table's
         * data can change.
         */
        @Override
        public void setValueAt(Object value, int row, int col) {
            if (DEBUG) {
                System.out.println("Setting value at " + row + "," + col
                        + " to " + value
                        + " (an instance of "
                        + value.getClass() + ")");
            }

            data[row][col] = value;
            fireTableCellUpdated(row, col);

            if (DEBUG) {
                System.out.println("New value of data:");
                printDebugData();
            }
        }

        private void printDebugData() {
            int numRows = getRowCount();
            int numCols = getColumnCount();

            for (int i = 0; i < numRows; i++) {
                System.out.print("    row " + i + ":");
                for (int j = 0; j < numCols; j++) {
                    System.out.print("  " + data[i][j]);
                }
                System.out.println();
            }
            System.out.println("--------------------------");
        }
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        TableRenderDemo newContentPane = new TableRenderDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T11:41:28.050

试试这个

```
 JTable table = new JTable(data, columns);
    table.putClientProperty("terminateEditOnFocusLost", true);
    JScrollPane scrollPane = new JScrollPane(table);
    final JXComboBox editorComboBox = new JXComboBox(array);
    editorComboBox.addAncestorListener(new AncestorListener() {
        public void ancestorAdded(AncestorEvent event) {
            //make sure combobox handles key events
            editorComboBox.requestFocusInWindow();
        }
        public void ancestorMoved(AncestorEvent event) {}
        public void ancestorRemoved(AncestorEvent event) {}
    });
    AutoCompleteDecorator.decorate(editorComboBox);
    TableColumn column = table.getColumnModel().getColumn(0);
    column.setCellEditor(new ComboBoxCellEditor(editorComboBox)); 
```

# .net - .Net 日期时间错误？或者只是设计不佳

> ID：10897840
> 
> 赞同：1
> 
> 时间：2012-06-05T13:04:33.437
> 
> 标签：.net, datetime

这种行为导致我在过去一周浪费了大量时间。有没有人解释一下为什么会这样设计？？？|
*（我在 PST，所以 DST 偏移现在是 +7）*

```
var utc = new DateTime(2012, 6, 5, 9, 0, 0, DateTimeKind.Utc);  
var lcl = new DateTime(2012, 6, 5, 8, 0, 0, DateTimeKind.Local);  // this is 15:00 Utc
Assert.IsTrue(lcl.ToUniversalTime() > utc);   //  THIS SUCCEEDS  (as it should)
Assert.IsTrue(lcl > utc);                     //  THIS FAILS (with the same times!!!) 
```

这令人倍感困惑，因为在我的实际代码中，kind 设置为 DateTimeKind.Local 的变量*最初*是使用 DateTimeKind.Utc 设置的（在另一台机器上），但在网络传输到进行比较的机器后正在评估，并且在传输过程中改变了它的类型*（使用 net.tcp 远程处理）*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:06:34.300

这是已知的，并且与此相关：http: [//msmvps.com/blogs/jon_skeet/archive/2012/05/02/more-fun-with-datetime.aspx](http://msmvps.com/blogs/jon_skeet/archive/2012/05/02/more-fun-with-datetime.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:57:56.470

这不是一个错误，这是一个功能”。

`DateTime`Type 不知道时区，因此没有明智的方法来比较 Kind 属性（可以是“Unspecified”、“Local”或“Utc”）。事实上，在 .NET 1.x 中它甚至没有 Kind 属性。

如果您需要比较不同时区的日期/时间值，则需要使用可识别时区的类型，例如`DateTimeOffset`.

# regression - 带有虚拟变量的 Mlogit 宏

> ID：10897841
> 
> 赞同：1
> 
> 时间：2012-06-05T13:04:46.623
> 
> 标签：regression, stata, stata-macros

我是Stata和宏的新手。

我试图循环几个变量以从`mlogit`命令生成估计值，然后将它们保存在数据集中。那部分运作良好。

我遇到的问题是一个分类变量，我需要将其拆分为虚拟变量：

```
global mypath "/Volumes/NO NAME/Dissertation/Data/AIM 2"
use "$mypath/AIM 2 DATA"
global SES "sesq2 sesq3 sesq4 sesq5"

/*regression*/

foreach xvar in age_median female marital ethnicity literacy $SES poor_health physical_median mental_median facility_fee time_clinic {
    mlogit trauma_main `xvar', b(5) vce(cluster ea_id) rrr
    parmest, saving("$mypath/multi_`xvar'.dta", replace)
} 
```

我以为通过设置`SES`为全局变量，循环会将其视为一组变量，但我错了。代码循环遍历每个变量，`$SES`因此我最终将每个虚拟变量`trauma_main`分别回归，这不是我想要的。

有没有办法“告诉”Stata 将虚拟变量视为一个块？此外，我知道我可以这样做`i.SES`并且使用它确实可以正常工作，但是使用的参考组不是我想要的。我已经用谷歌搜索了如何为类似的东西设置参考组`i.var`，但我没有找到任何有用的东西，可能是因为我使用了错误的搜索词。

提前感谢您的任何建议。

劣质煤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:44:47.600

您不需要将分类变量拆分为虚拟变量。您可以改用因子变量表示法 ( `i.`)。这记录在`help fvvarlist`. 使用因子变量，参考类别的更改很简单。

这是一个例子。*站点*变量具有三个类别。默认情况下， *site = 1*是分类变量的参考类别：

> webuse sysdsn1，清除
> 
> foreach v 年龄男性 i.site {
> mlogit insure `v'
> }

您可以将`ib`参考类别设置为任何所需的级别。如果您希望*site = 2*作为参考，您可以执行以下操作：

> foreach v 年龄男性 ib2.site {
> mlogit insure `v'
> }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:33:24.000

[`foreach`该命令的 Stata 文档](http://stata.com/help.cgi?foreach)表明它可以在没有全局宏的情况下工作，即

```
. foreach xvar in age_median female marital ethnicity literacy "sesq2 sesq3 sesq4 sesq5" poor_health physical_median mental_median facility_fee time_clinic { 
```

如果要使用全局宏来执行此操作，则需要使用复合双引号来定义包含引号的宏：

```
. global SES `""sesq2 sesq3 sesq4 sesq5""' 
```

# android - NFC 发送错误的标签/记录

> ID：10897844
> 
> 赞同：0
> 
> 时间：2012-06-05T13:04:55.543
> 
> 标签：android, nfc, ndef

我的活动正在实施

```
CreateNdefMessageCallback, OnNdefPushCompleteCallback 
```

我打电话

```
 mNfcAdapter.setNdefPushMessageCallback(this, this);
    // Register callback to listen for message-sent success
    mNfcAdapter.setOnNdefPushCompleteCallback(this, this); 
```

我已经覆盖

```
@Override
public NdefMessage createNdefMessage(NfcEvent event) {
    Log.d(TAG, "Creating massage");
    String text = TAG + DATA_SPLITTER + ADDRESS + DATA_SPLITTER
            + USER_NAME;

    // Nachricht vorbereiten.
    // String text = "Hello NFC World!";
    NdefRecord record = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,
            MIME_TYPE.getBytes(), new byte[0], text.getBytes());
    NdefRecord[] records = { record };
    NdefMessage msg = new NdefMessage(records);
    return msg;
} 
```

但是当我收到时，我得到了不同的记录，其中两条，一条带有用于搜索应用程序的市场 uri，一条带有 java 包名称（我猜）。在此之前，我只是简单地使用了 enableForegroundNdefPush... 等，所以没有任何回调，但是因为我需要它来处理我在两个设备上的推送的完成。我已经将它更改为这种方式，现在它没有正确传输我的数据了。

**编辑：**

为了更好地理解：

```
public class NfcActivity extends Activity implements CreateNdefMessageCallback,
    OnNdefPushCompleteCallback {
// ================================ Member =================================
// Speichert den NFC Adapter.
private NfcAdapter mNfcAdapter = null;
private boolean retryChannel = false;

public static final String TAG = "NfcActivity";
private static final String DATA_SPLITTER = "__:DATA:__";
private static final String MIME_TYPE = "application/my.applications.mimetype";

private String ADDRESS = null;
private String USER_NAME = null;

// Speichert das Intent, welches von Android mit erkannten Tags gefüllt
// und an die Activity weitergeleitet wird.
private PendingIntent mNfcPendingIntent = null;

private static final String LOG_TAG = "NfcActivity";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ADDRESS = "Something";

    USER_NAME = "Someone";

    // Zugriff auf den NFC Adapter erhalten.
    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

    mNfcAdapter.setNdefPushMessageCallback(this, this);
    mNfcAdapter.setOnNdefPushCompleteCallback(this, this);

    Intent intent = new Intent(this, getClass());
    intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    mNfcPendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
}

@Override
protected void onNewIntent(Intent intent) {
    if (!NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
        return;
    }

    // Nutzdaten des Intent auslesen.
    Parcelable[] rawMsgs = intent
            .getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
    if (rawMsgs == null) {
        return;
    }

    for (int i = 0; i < rawMsgs.length; ++i) {
        NdefMessage msg = (NdefMessage) rawMsgs[i];
        NdefRecord[] records = msg.getRecords();
        for (NdefRecord record : records) {
            String text = new String(record.getPayload());
                            // this one has the wrong content. I receive two records, one for the market, one with java packet name (or something)
        }
    }
}

@Override
protected void onResume() {
    super.onResume();

            // activate receiving of messages
    mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent, null,
            null);
}

@Override
protected void onPause() {
    super.onPause();
    // deactivate receiving
    mNfcAdapter.disableForegroundDispatch(this);
}

private void logError(String msg) {
    Toast.makeText(this, msg, Toast.LENGTH_LONG).show();
    Log.v(LOG_TAG, msg);
}

@Override
public void onNdefPushComplete(NfcEvent arg0) {
    Log.d(TAG, "Push complete");
}

@Override
public NdefMessage createNdefMessage(NfcEvent event) {
    Log.d(TAG, "Creating massage");

            String text = "asdfgh";

    // Nachricht vorbereiten.
    // String text = "Hello NFC World!";
    NdefRecord record = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,
            MIME_TYPE.getBytes(), new byte[0], text.getBytes());
    NdefRecord[] records = { record };
    NdefMessage msg = new NdefMessage(records);
    return msg;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:32:58.427

我为您发布此答案，您可以接受。

解决方案是 Android-Manifest 中的错误 Mime-Type。它必须与 NdefRecord 定义的相同

# php - 为一些类写一个 PHPUnit 测试我是新的 PHPUnit 用户

> ID：10897850
> 
> 赞同：0
> 
> 时间：2012-06-05T13:05:17.543
> 
> 标签：php, unit-testing, class, phpunit

**我想为这些类编写 phpunit 测试**

并且确定我知道如何执行 phpunit

1000 感谢您的帮助:)

IRandomGenerator.php

```
<?php
/**
 * Random Generator interface
 * 
 * @package GNS
 */

interface IRandomGenerator
{
  /**
     * Get Random Byte
     * 
     * @return int 0..255 range integer
     * @throws NoMoreBytesException
     */
    public function getByte();
}

/**
 * No more bytes can be get exception
 * 
 * It can be useful if generator depends on external source
 */
class NoMoreBytesException extends Exception {}
?> 
```

ARandomGenerator.class.php

```
<?php
/**
 * Base class for random generators
 */

require_once 'IRandomGenerator.php';

abstract class ARandomGenerator implements IRandomGenerator
{
  /**
     * Get Bytes
     * 
     * @param int $number
     * @return array Array of 0..255 range integers
     * @throws NoMoreBytesException
     */
    public function getBytes($number = 1)
    {
      $bytes = array();
      for ($i = 0; $i < $number; $i++) $bytes[] = $this->getByte();
      return $bytes;
    }

    /**
     * Get Word
     * 
     * @return int 0..65535 range integer
     * @throws NoMoreBytesException
     */
    public function getWord()
    {
      return $this->getByte() << 8 | $this->getByte();
    }

    /**
     * Get Words
     * 
     * @param int $number
     * @return array Array of 0..65535 range integers
     * @throws NoMoreBytesException
     */
    public function getWords($number = 1)
    {
      $words = array();
      for ($i = 0; $i < $number; $i++) $words[] = $this->getWord();
      return $words;
    }

    /**
     * Get Long
     * 
     * @return 4-byte integer
     * @throws NoMoreBytesException
     */
    public function getLong()
    {
      return $this->getWord() << 16 | $this->getWord();
    }

    /**
     * Get Longs
     * 
     * @param int $number
     * @return array Array of 4-byte integers
     * @throws NoMoreBytesException
     */
    public function getLongs($number = 1)
    {
      $longs = array();
      for ($i = 0; $i < $number; $i++) $longs[] = $this->getLong();
      return $longs;
    }
}
?> 
```

FileRandomGenerator.class

```
<?php
/**
 * File random generator (reading data from file)
 * 
 * Take care of your file holds really random data
 * and contains it enough for task. Don't use the same
 * data twice
 */

require_once 'ARandomGenerator.class.php';

class FileRandomGenerator extends ARandomGenerator
{
  /** @const int Chunk to read from file */
  const CHUNKSIZE = 128;

  /** @var array $pool of data */
  private $pool = array();

  /** @var resourse Open file descriptor */
  private $fd;

  /**
   * Constructor
   * 
   * @param string $fname File name with random data
   */
  public function __construct($fname)
  {
    $this->fd = fopen($fname, 'rb');
    if ($this->fd === false) throw new NoMoreBytesException('Cannot open file: ' . $fname);
  }

    /**
     * Get Random Byte
     * 
     * @return int 0..255 range integer
     * @throws NoMoreBytesException
     */
    public function getByte()
    {
      // reading to pool
      if (count($this->pool) === 0)
      {
      if (($data = fread($this->fd, self::CHUNKSIZE)) !== false)
        $this->pool = unpack('C*', $data);
        else
          throw new NoMoreBytesException('No more data in file left');
      }

      return array_pop($this->pool);
    }
}
?> 
```

以及如何知道 phpunit 框架中的函数必须用于测试每个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:45:28.223

一种简单的入门方法是使用[phpunit-skelgen](http://www.phpunit.de/manual/3.6/en/skeleton-generator.html)。该实用程序将为您的班级快速设置基本测试。

您将需要阅读手册，但“tl;dr”是：

```
$ mkdir -pv tests/unit
$ phpunit-skelgen --test -- FileRandomGenerator FileRandomGenerator.class.php \ 
  FileRandomGeneratorTest tests/unit/FileRandomGeneratorTest.php 
```

高温高压

# xcode - Xcode 中单个项目中的多个命令行工具目标

> ID：10897855
> 
> 赞同：0
> 
> 时间：2012-06-05T13:05:22.327
> 
> 标签：xcode

单个项目中是否可以有多个命令行工具目标？我正在使用命令行工具编写 C++，并且可以构建第一个目标但第二个目标失败。

我正在使用 Xcode 4.1、Mac 10.7.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:43:44.547

您可以有多个目标并从 xcode 命令行工具构建每个目标。您可以从命令行工具指定目标，例如：

```
xcodebuild -sdk iphonesimulator6.0 -target "HelloWorld" 
```

您可以对每个目标重复此操作。我还遇到了直接构建工作空间的问题，您也可以查看一下。

苹果关于它的文档；

> 如果您在此目录中有多个项目，您将需要使用 -project 来指示应该构建哪个项目。默认情况下，xcodebuild 使用默认构建配置构建项目中列出的第一个目标。目标的顺序是项目的属性，对项目的所有用户都是相同的。

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)

# java - TCP 发送方 android

> ID：10897858
> 
> 赞同：-4
> 
> 时间：2012-06-05T13:05:24.077
> 
> 标签：java, android, tcp

请告诉我一个从 android 发送消息协议 tcp 的简单示例。Sand(ipServer,Port)的方法如何实现；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:10:16.827

```
String host = ...; // The host name can either be a machine name, such as "java.sun.com", or a textual representation of its IP address
int port = ...;
Socket socket = new Socket(InetAddress.getByName(host), port);
BufferedReader reader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
PrintWriter writer = new PrintWriter(socket.getOutputStream(), true); // true for auto flush 
```

现在，您可以通过 writer 发送消息，例如：

```
writer.println("Hello World"); 
```

您可以通过阅读器读取传入的数据，例如：

```
String incoming = reader.readLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:08:52.063

您在网上询问的主题有大量文章。其中之一是：[http ://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication](http://www.helloandroid.com/tutorials/simple-connection-example-part-ii-tcp-communication)

亲切的问候，
博

# regex - 在 Perl 中选择性地拆分字符串

> ID：10897859
> 
> 赞同：6
> 
> 时间：2012-06-05T13:05:24.227
> 
> 标签：regex, perl, parsing, split

Perl 新手。

我需要解析一个看起来像这样的报告：

```
2012-05-29@emaillocalpart@emaildomain@customerid@errormessage@messageid 
```

我用了：

```
my @fields = split(/@/, $line, 6); 
```

大多数情况下它工作正常，但有时错误消息将包含一个电子邮件地址和该电子邮件上 @ 符号之后的所有文本，直到字符串末尾将在我的消息 ID 上结束。

我考虑过检查@s 的数量并进行条件解析，但有更好的方法吗？

编辑：

所需的输出是一个字符串列表，错误消息包含其中的任何内容（包括偶尔的电子邮件地址）。

由于有其他应用程序使用相同的报告，我无法更改分隔符或转义输出。

报告上的示例行：

```
2012-05-29@joedoe@example.com@AB99-5@440 4.4.1 Some error occurred@XYZ35
2012-05-29@foobar@invalid.com@ZZ88-6@550 5.1.1 <foobar@invalid.com>... User Unknow@GGH93
2012-05-29@barfoo@invalid.com@YY88-0@550 5.1.1 barfoo@invalid.com no such user@GGH93 
```

解析第 1 行后 @fields 的预期内容：

```
2012-05-29
joedoe
example.com
AB99-5
440 4.4.1 Some error occurred
XYZ35 
```

在解析第 2 行之后：

```
2012-05-29
foobar
invalid.com
ZZ88-6
550 5.1.1 <foobar@invalid.com>... User Unknow
GGH93 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:21:35.737

如果 $teststr 包含，例如：'2012-05-29@emaillocalpart@emaildomain@customerid@error@me@ssage@messageid'；

以下代码：

```
my @fields2=split('@',$teststr);
my @finalfields=@fields2[0 .. 3];
my $finalat=$#fields2-1;
my $errormessage=join('@',@fields2[4 .. $finalat]);
push(@finalfields,$errormessage);
push(@finalfields,$fields2[$#fields2]);

print Data::Dumper->Dump([@finalfields])."\n"; 
```

给出以下输出：

```
$VAR1 = '2012-05-29';
$VAR2 = 'emaillocalpart';
$VAR3 = 'emaildomain';
$VAR4 = 'customerid';
$VAR5 = 'error@me@ssage';
$VAR6 = 'messageid'; 
```

道歉 - 这是一个相当冗长的解决方案。您也可以在一个正则表达式中执行相同操作：

```
$teststr=~/(.[^@]*)@(.[^@]*)@(.[^@]*)@(.[^@]*)@(.*)@(.[^@]*)/;
print "$1\n$2\n$3\n$4\n$5\n$6\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:02:04.597

这会正确解析可选的电子邮件地址：

```
$str = '5-29@foobar@invalid.com@ZZ88-6@550 5.1.1 <foobar@invalid.com>... User Unknow@GGH93';
#$str= '2012-05-29@joedoe@example.com@AB99-5@440 4.4.1 Some error occurred@XYZ35';

$str =~ s/(\<[^\>]+\>)/!!/; # replace an email address with !!
$email = $1; # store the email

@fields = split(/@/,$str); # split on @

s/!!/$email/ foreach (@fields); # find the old !! and replace with the email address

print STDERR map { "$_ \n" } @fields; # print fields to standard error 
```

看到它在[这里](http://codepad.org/VSTuksBJ)工作。这假设您只有一封可选电子邮件。通过一些工作，它可以被修改为适用于具有任意数量的`< >`分隔电子邮件的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T14:08:47.763

类似于 daxim 的答案，但另一种写法：

```
my $re = '^' . '([^@]*)@'x4 . '(.*)@([^@]*)$';
my @fields = $line =~ /$re/; 
```

您可能还想在此处进行一些错误检查：

```
my @fields = $line =~ /$re/ or die "can't parse '$line'"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:21:22.633

处理此问题的最简单方法是更改`@`​​为另一个极不常见的分隔符，例如`;;;;`

# objective-c - CCProgressTimer 不更新，然后突然跳

> ID：10897861
> 
> 赞同：1
> 
> 时间：2012-06-05T13:05:27.267
> 
> 标签：objective-c, xcode, cocos2d-iphone

我有以下代码：

```
CCProgressTimer *aTimer;

-(void) generateDungeon {

    srand (time(NULL));
    [self initDungeonArray];

    int numRooms = RNDM(10,100);
    for (int a=0; a< numRooms; a++) {
         [self makeRandomRoom];
         aTimer.percentage += 100/numRooms;
    }

[self connectTheRooms];
[self placeStairs];
} 
```

问题是，在循环期间，计时器不会在屏幕上更新，然后突然（我认为循环结束后）填满几乎满。我不明白为什么会这样。我认为当您更改百分比时，图像会更新。

谁能帮我理解我应该理解的内容？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T15:57:30.500

您的图像（在这种情况下，您的进度计时器），在 draw() 和 visit() 方法中更新屏幕。它们被称为每个滴答声。在这里，您可以一键更改它的值。因此，在上一次绘图期间，计时器的值为 0%，而在下一次绘图中，它的值将是 100

你在单线程中完成它。所以在这种情况下你的计时器不会更新。要创建可更新的计时器，您可以尝试将长时间工作的代码移动到单独的线程。然后您将能够更新计时器。

# oop - Matlab的arrayfun用于类对象的统一输出

> ID：10897862
> 
> 赞同：3
> 
> 时间：2012-06-05T13:05:39.520
> 
> 标签：oop, class, matlab

我需要`ID`使用arrayfun构建一个类对象数组：

```
% ID.m
classdef ID < handle
    properties
        id
    end
    methods
        function obj = ID(id)
            obj.id = id;
        end
    end
end 
```

但是得到一个错误：

```
>> ids = 1:5;
>> s = arrayfun(@(id) ID(id), ids) 
??? Error using ==> arrayfun
ID output type is not currently implemented. 
```

我可以在循环中交替构建它：

```
s = [];
for k = 1 : length(ids)
    s = cat(1, s, ID(ids(k)));
end 
```

但是arrayfun的这种用法有什么问题？

编辑（澄清问题）：问题不是如何解决问题（有几种解决方案），而是为什么简单的语法`s = arrayfun(@(id) ID(id), ids);`不起作用。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:24:56.863

`'UniformOutput'`也许最简单的方法是使用 cellfun，或者通过设置选项强制 arrayfun 返回一个元胞数组。然后，您可以将此单元数组转换为对象数组（与上面使用 cat 相同）。

```
s = arrayfun(@(x) ID(x), ids, 'UniformOutput', false);
s = [s{:}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:26:43.673

You are asking `arrayfun` to do something it isn't built to do.

[The output from `arrayfun` must be](http://www.mathworks.com/help/techdoc/ref/arrayfun.html):

> scalar values (numeric, logical, character, or structure) or cell arrays.

Objects don't count as any of the scalar types, which is why the "workarounds" all involve using a cell array as the output. One thing to try is using `cell2mat` to convert the output to your desired form; it can be done in one line. (I haven't tested it though.)

```
s = cell2mat(arrayfun(@(id) ID(id), ids,'UniformOutput',false)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T22:34:19.827

这就是我创建[对象数组的方式](http://www.mathworks.com/help/techdoc/matlab_oop/brd4btr.html)：

```
s = ID.empty(0,5);
for i=5:-1:1
    s(i) = ID(i);
end 
```

提供不带参数的“默认构造函数”总是一个好主意，或者至少使用默认值：

```
classdef ID < handle
    properties
        id
    end
    methods
        function obj = ID(id)
            if nargin<1, id = 0; end
            obj.id = id;
        end
    end
end 
```

# ruby-on-rails - URI::InvalidURIError PostgreSQL Rails 3.2.3

> ID：10897863
> 
> 赞同：0
> 
> 时间：2012-06-05T13:05:41.633
> 
> 标签：ruby-on-rails, postgresql, taps

有问题。在 Windows 7 上运行 PostgreSQL、Rails 3.2.3、Ruby 1.9.2p180 和 1.9.3（通过 Pik）。当我尝试做

```
heroku db:push 
```

在 ruby​​ 1.9.2 上，我得到一个错误

```
Loaded Taps v0.3.23
Auto-detected local database: postgres://postgres:lalala@localhost/prelaunch_d
evelopment
# Connect on a TCP socket. Omitted by default since the client uses a?encoding=u
tf8
.....
Failed to connect to database:
URI::InvalidURIError -> bad URI(is not URI?): postgres://postgres:lalala@loc
alhost/prelaunch_development
# Connect on a TCP socket. Omitted by default since the client uses a?encoding=u
tf8 
```

请问我可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:51:33.170

原来问题出在我的 database.yml 文件上，Was using [this](https://gist.github.com/2876868/)有问题。切换[到此](https://gist.github.com/2876841)解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T01:51:07.060

如果您在本地机器上工作，请尝试这样的事情。

```
login: &login
  adapter: postgresql
  host: localhost
  username: postgres
  password: yourpassword!
  pool: 5
  encoding: unicode

development:
    database: dbname
    <<: *login

test:
   database: dbname
   <<: *login

production:
  database: dbname
  <<: *login 
```

请注意，添加了 host:localhost 是因为默认文件没有。

# python - 如何有效地从 Python 中的目录（包括子目录）中选择 100 个随机 JPG 文件？

> ID：10897866
> 
> 赞同：2
> 
> 时间：2012-06-05T13:05:46.307
> 
> 标签：python, file, directory-structure

我有一个非常大的文件和文件夹目录。目前，我扫描整个目录以查找 JPG 并将它们存储在一个列表中。由于目录的大小，这真的很慢。有没有更快、更有效的方法来做到这一点？也许不用扫描所有东西？

我的目录如下所示：

```
/library/Modified/2000/[FolderName]/Images.JPG
/library/Modified/2001/[FolderName]/Images.JPG
/library/Modified/2002/[FolderName]/Images.JPG
/library/Modified/2003/[FolderName]/Images.JPG
/library/Modified/2004/[FolderName]/Images.JPG
...
/library/Modified/2012/FolderName/Images.JPG 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:09:46.060

请参阅[面向系统程序员](http://www.dabeaz.com/generators-uk/index.html)的生成器技巧，了解一堆简洁的东西。但具体来说，请参见[gen-find](http://www.dabeaz.com/generators-uk/genfind.py)示例。这与您将获得的一样有效，无需对您的文件结构布局做出大量假设。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T13:13:07.487

假设您的应用程序是唯一一个更改目录，并且您可以控制目录名称/结构，并且您必须多次执行问题中描述的操作：

一次重命名所有文件，以便您可以按可预测的顺序访问它们。比如说，给所有文件从 1 到 N 的数字名称（其中 N 是目录中的文件数），并有一个特殊的文件“.count”，它将为每个目录保存 N。然后使用随机生成器生成的名称直接访问它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T13:28:08.230

我不知道缓慢发生在哪里，但是为了扫描目录和文件，我发现首先使用批处理文件将目录/文件转储到文本文件中然后让 python 读取文件要快得多。这在我们拥有 7 台服务器和数千个目录的服务器系统上运行良好。Python 当然可以运行批处理文件。

# wcf - BizTalk WCF 服务轮询

> ID：10897868
> 
> 赞同：0
> 
> 时间：2012-06-05T13:06:01.783
> 
> 标签：wcf, web-services, biztalk, polling, biztalk-2010

我需要对 BizTalk 中的 WCF 服务执行轮询。工作流程如下：

1.  池化服务（返回一个字符串，应该映射到一个模式）
2.  如果没有可用的消息（引发异常/404/空字符串/任何更容易的），转到 5
3.  将字符串转换为正确的模式，处理并转发消息
4.  回到 1
5.  等待 5 分钟，然后回到 1

我使用“使用 WCF 服务”来生成端口和架构。但现在我找不到协调这个工作流程的方法。以下是一些我无法找到答案的问题：

*   如何创建计划检查以查看 Web 服务调用中是否有可用数据？
*   如何将请求中的 XML 字符串转换为已知模式？
*   想象一下，我希望根据接收到的 XML 中的属性将消息转换为不同的模式，我应该怎么做？

任何帮助都感激不尽！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:56:21.210

BizTalk 不是作业调度程序，但是当组织已经使用 BizTalk 时，这种工作流确实出现了很多。您最好的选择是找到一种可靠的（并且有弹性、受监控、记录等）方法来触发该过程，告诉 BizTalk 何时该调用 WCF 服务。

[我在这里](https://stackoverflow.com/a/5435123/241754)回答了关于 BizTalk 调度的另一个问题。从该答案中，您可以使用以下选项之一进行调度：

*   [CodePlex 上的计划任务适配器](http://biztalkscheduledtask.codeplex.com/)- 如果您不能使用其他方法来触发您的计划工作流，我只会使用它
*   Windows 计划任务（更难管理，尤其是在 Windows Server 2008 之前；您可以使用[Powershell](http://technet.microsoft.com/en-us/library/ee176949.aspx#EBAA)写入文件或写入 BizTalk 吸入的消息队列以启动其进程）
*   第三方作业调度软件（尤其是已经在使用的情况下；甚至[SQL Server](http://msdn.microsoft.com/en-us/library/ms191439.aspx)也可以为您执行[此](http://www.simple-talk.com/code/WorkingWithFiles/spWriteStringTofile.txt)操作）

# objective-c - 将 UITableView 滑出屏幕？

> ID：10897869
> 
> 赞同：0
> 
> 时间：2012-06-05T13:06:13.547
> 
> 标签：objective-c, ipad, uitableview, animation

我正在尝试使我的 UITableView 滑出屏幕的动画，我在下面尝试了这个但没有成功：

```
-(void)slideTableViewOffScreen
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    [UIView setAnimationDelegate:self];

    stageSelectionTable.frame = CGRectMake(stageSelectionTable.frame.origin.x - stageSelectionTable.frame.size.width, stageSelectionTable.frame.origin.y, stageSelectionTable.frame.size.height, stageSelectionTable.frame.size.width);

    [UIView commitAnimations];
} 
```

有什么想法为什么它可能不起作用，或者我需要做什么才能使这个动画起作用？当调用该代码时，什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:43:10.720

原来这段代码没有任何奇怪的地方工作：

```
-(void)slideTableViewOffScreen
{
    CGRect newFrame = stageSelectionTable.frame;
    newFrame.origin.x -= 130;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    [UIView setAnimationDelegate:self];

    stageSelectionTable.frame = newFrame;

    [UIView commitAnimations];
} 
```

# php - 为什么这个 UPDATE 过程更新每一行？

> ID：10897872
> 
> 赞同：1
> 
> 时间：2012-06-05T13:06:33.140
> 
> 标签：php, mysql, sql

我有一个这样的 MySQL 存储过程

```
UPDATE `Discounts` SET `Occupation`=occupation,
`Organization`=organization,
`LastName`=lastName,
`FirstName`=firstName,
`Email`=email,
`Phone`=phone,
`Description`=description,
`ExpirationDate`=expiration,
`Notes`=notes 
  WHERE `ID` = id 
```

我用这个 PHP 调用它

```
$occupation = $_POST["occupation"];
$organization = $_POST["organization"];
$last = $_POST["last"]; 
$first = $_POST["first"]; 
$email = $_POST["email"];
$phone = $_POST["phone"]; 
$description = $_POST["description"];
$notes = $_POST["notes"];
$expiration = date("Y-m-d H:i:s", strtotime($_POST["expiration"]));
$id = intval($_POST["id"], 10);

$password = $_POST["password"];

$mysqli = new mysqli("localhost", "xxx", $password, "xxxxxxxx");
if ($mysqli->connect_errno) {
    die("Could not connect");
}
$stmt = mysqli_stmt_init($mysqli);
if (mysqli_stmt_prepare($stmt, 'CALL UpdateDiscount(?,?,?,?,?,?,?,?,?,?)')) {
    mysqli_stmt_bind_param($stmt, "isssssssss", 
      $id, 
      $occupation, 
      $last, 
      $first,
      $email, 
      $phone, 
      $description,
      $organization,
      $notes,
      $expiration);
  mysqli_stmt_execute($stmt);
  mysqli_stmt_close($stmt);
  echo "Success!";
} 
```

更新完全按照我的预期工作，只是它更新*每一行*而不是对应于 ID 的一行。我不明白为什么会这样，我有一个`WHERE 'ID'=id`检查。到底是怎么回事？我怎样才能使它只更新一行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T13:09:36.110

因为 `ID` 是您的列的区分大小写的名称，而 id 是同一列的不区分大小写的名称。

**编辑这是错误的**：您应该使用小写**id**所在的 PHP 变量。类似 $id 的东西。

在您的情况下，您正在调用带有绑定参数的过程。

**为id**参数使用不同的名称。

这是属于该过程的名称范围局部变量，与属于该过程的参数变量与表列名称的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:17:02.870

在存储过程中，当字段名和参数名发生名称冲突时，使用参数。

您的查询被解析为：

```
UPDATE  ...
WHERE   :id = :id 
```

这总是正确的（除非你通过 a `NULL`）

在参数名称前加上下划线：

```
CREATE PROCEDURE myprc (_id, _occupation, ...)
AS
BEGIN
        UPDATE  mytable
        SET     occupation = _occupation
        WHERE   id = _id;
END; 
```

# php - 取消编码时出现卷曲错误

> ID：10897874
> 
> 赞同：11
> 
> 时间：2012-06-05T13:06:39.493
> 
> 标签：php, curl, encoding

嗨，我正在使用 Curl 发送一个简单的获取请求，它适用于我必须使用它的所有站点，除了最后一个。当我得到响应时，我得到一个奇怪的未编码错误。这就是我得到的详细信息。

```
* About to connect() to www.shufersal.co.il port 80 (#0)
*   Trying 212.199.57.42...
* connected
* Connected to www.shufersal.co.il (212.199.57.42) port 80 (#0)
> GET /Pages/Catalog.aspx HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) C
hrome/19.0.1084.52 Safari/536.5
Host: www.shufersal.co.il
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Referer:
Cookie: SMC=; TSeb84b7=6c5fc932ce03e1ab1ca864bae7ec71c8d659417300b51c794fce0178

< HTTP/1.1 200 OK
< Cache-Control: private
< Transfer-Encoding: chunked
< Content-Type: text/html; charset=utf-8
< Content-Encoding: gzip
< Vary: Accept-Encoding
< SPRequestGuid: 217857fb-493b-4542-a5b4-575023c5767a
< X-SharePointHealthScore: 0
* Added cookie ASP.NET_SessionId="5lwlq2ify1glmxirhndgdm45" for domain www.shufe
rsal.co.il, path /, expire 0
< Set-Cookie: ASP.NET_SessionId=5lwlq2ify1glmxirhndgdm45; path=/; HttpOnly
< X-AspNet-Version: 2.0.50727
< X-UA-Compatible: IE=8
< Date: Tue, 05 Jun 2012 12:58:24 GMT
* Added cookie BIGipServerB2C_Commerce="1533875210.20480.0000" for domain www.sh
ufersal.co.il, path /, expire 0
< Set-Cookie: BIGipServerB2C_Commerce=1533875210.20480.0000; path=/
* Replaced cookie TSeb84b7="6c5fc932ce03e1ab1ca864bae7ec71c8d659417300b51c794fce
0178" for domain www.shufersal.co.il, path /, expire 1338902005
< Set-Cookie: TSeb84b7=6c5fc932ce03e1ab1ca864bae7ec71c8d659417300b51c794fce0178;
 Max-Age=900; Path=/
<
* Error while processing content unencoding: invalid block type
* Failed writing data
* Closing connection #0
PHP Fatal error:  Call to a member function find() on a non-object in C:\wamp\ww
w\adwords\grocery_scraper.php on line 86
PHP Stack trace:
PHP   1\. {main}() C:\wamp\www\adwords\grocery_scraper.php:0

Fatal error: Call to a member function find() on a non-object in C:\wamp\www\adw
ords\grocery_scraper.php on line 86

Call Stack:
    0.0011     367424   1\. {main}() C:\wamp\www\adwords\grocery_scraper.php:0

c:\wamp\www\adwords>php grocery_scraper.php
* About to connect() to www.shufersal.co.il port 80 (#0)
*   Trying 212.143.91.230...
* connected
* Connected to www.shufersal.co.il (212.143.91.230) port 80 (#0)
> GET /Pages/Catalog.aspx HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/536.5 (KHTML, like Gecko) C
hrome/19.0.1084.52 Safari/536.5
Host: www.shufersal.co.il
Accept: */*
Accept-Encoding: gzip,deflate,sdch
Referer:

< HTTP/1.1 200 OK
< Cache-Control: private
< Transfer-Encoding: chunked
< Content-Type: text/html; charset=utf-8
< Content-Encoding: gzip
< Vary: Accept-Encoding
< SPRequestGuid: 8adff954-20d7-4d0a-9cab-193bc6cd6e72
< X-SharePointHealthScore: 0
< X-AspNet-Version: 2.0.50727
* Added cookie ASP.NET_SessionId="ji00xpqq5z1ufa454t1c0c45" for domain www.shufe
rsal.co.il, path /, expire 0
< Set-Cookie: ASP.NET_SessionId=ji00xpqq5z1ufa454t1c0c45; path=/; HttpOnly
* Added cookie SMC="" for domain www.shufersal.co.il, path /, expire 1370437143
< Set-Cookie: SMC=; expires=Wed, 05-Jun-2013 12:59:03 GMT; path=/; HttpOnly
< X-UA-Compatible: IE=8
< Date: Tue, 05 Jun 2012 12:59:02 GMT
* Added cookie BIGipServerB2C_Commerce="1533875210.20480.0000" for domain www.sh
ufersal.co.il, path /, expire 0
< Set-Cookie: BIGipServerB2C_Commerce=1533875210.20480.0000; path=/
* Added cookie TSeb84b7="c054d61ec8ab44efb7ca8f8680023cf1889b86d8962f57f14fce029
7" for domain www.shufersal.co.il, path /, expire 1338902044
< Set-Cookie: TSeb84b7=c054d61ec8ab44efb7ca8f8680023cf1889b86d8962f57f14fce0297;
 Max-Age=900; Path=/
<
* Error while processing content unencoding: invalid stored block lengths
* Failed writing data
* Closing connection #0 
```

任何想法出了什么问题？或如何解决？也许有一个参数可以跳过 unencoding 之类的并在 php.ini 上执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-13T09:46:59.840

错误消息`Error while processing content unencoding`来自 libcurl，表示它在 gzip 流中检测到问题，导致无法解压缩完整内容。

这表明站点或 zlib/curl 中存在问题，但我宁愿怀疑该站点...

作为一种解决方法，尝试在不压缩的情况下请求页面。

# .net - wcf 请求包装器名称

> ID：10897877
> 
> 赞同：2
> 
> 时间：2012-06-05T13:06:50.353
> 
> 标签：.net, wcf

有什么方法可以更改用于使用`WebMessageBodyStyle.Wrapped`或`WebMessageBodyStyle.WrappedRequest`不使用操作名称的 WCF 请求的包装器？

因此，对于以下内容：

```
[OperationContract()]
[WebInvoke(Method = "PUT",
       BodyStyle = WebMessageBodyStyle.WrappedRequest,
       UriTemplate = "foo")]
bool PutSomeValue(string id, string bar); 
```

而不是请求是：

```
<PutSomeValue>
    <id>1234</id>
    <bar>myValue</bar>
</PutSomeValue> 
```

我希望它是：

```
<MyNewWrapperName>
    <id>1234</id>
    <bar>myValue</bar>
</MyNewWrapperName> 
```

我知道响应是可能的，我们可以更改请求的各个参数，但我找不到有关更改请求包装器的任何信息。

编辑：我想这样做的原因是将包装器更改为通用的东西，如“参数”或“请求”，并且最好为我的每个操作使用相同的包装器。我认为这将比要求客户端担心每个请求的包装器更清洁和更用户友好，而且它会显示更少的元数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:10:16.300

类似的问题在这里； [如何控制通用 WCF 返回类型的名称？](https://stackoverflow.com/questions/172265/how-can-i-control-the-name-of-generic-wcf-return-types)

和答案 [https://stackoverflow.com/a/172370/929902](https://stackoverflow.com/a/172370/929902)

```
[OperationContract]
[return: MessageParameter(Name="YOURNAME")]
Response<List<Customer>> GetCustomers(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:44:41.430

```
[OperationContract(Name = "MyNewWrapperName")]
[WebInvoke(Method = "PUT",
       BodyStyle = WebMessageBodyStyle.WrappedRequest,
       UriTemplate = "foo")]
bool PutSomeValue(string id, string bar); 
```

# mysql - 即使抛出异常 DUPLICATE KEY 或事务回滚，auto_increment 值也会增加

> ID：10897878
> 
> 赞同：3
> 
> 时间：2012-06-05T13:06:50.487
> 
> 标签：mysql, auto-increment

我有一个表 -`id`其中是`auto_increment`和一`email`列被定义为`UNIQUE`。

考虑`auto_increment`将 设置为 1。

在我`stored procedure`创建`INSERT`一个具有唯一电子邮件 ID 的新行时，auto_increment 列会递增。正确的行为。

现在，当我再次尝试`INSERT`相同的电子邮件时，`UNIQUE KEY`它被违反了。我检查了这个并做一个`ROLLBACK`. 但是 auto_increment 现在设置为 2。**为什么？**

在第三次尝试中`INSERT`，这次使用唯一的电子邮件插入了行，但是该`id`字段的值为 3。不好。

有没有办法可以将值减回到 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T13:09:00.647

检查这个：[MySQL AUTO_INCREMENT 不回滚](https://stackoverflow.com/questions/449346/mysql-auto-increment-does-not-rollback)

最突出的一点是：**您永远不应该依赖自动生成的键的数字特征。**

# java - Axis 2 Web 服务 SSL 通信

> ID：10897881
> 
> 赞同：0
> 
> 时间：2012-06-05T13:06:57.997
> 
> 标签：java, web-services, security, axis2, ssl-certificate

我从这段代码中得到**肥皂响应**

```
SOAPConnectionFactory sfc = SOAPConnectionFactory.newInstance();
SOAPConnection connection = sfc.createConnection();
SOAPMessage soapMessageResponse = connection.call(soapRequest, new URL(serviceLocation)); 
```

我怎样才能使它基于 SSL？

我知道如何`SSLSocketFactory`通过`SSLContext`提供我指定的**密钥库**来创建。

我怎样才能告诉`SOAPConnection`班级`SSLSocketFactory`or `SSLContext`？这样我的通讯就可以得到保障。

我不想在系统属性或 xml 文件中设置密钥库。我正在使用 Websphere 7。

## 编辑：

```
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:600)
    at com.ibm.ws.webservices.engine.soap.SOAPConnectionImpl.callJAXWSDispatch(SOAPConnectionImpl.java:416)
    ... 49 more
Caused by: javax.xml.soap.SOAPException: javax.xml.ws.WebServiceException: javax.net.ssl.SSLHandshakeException: General SSLEngine problem
    at com.ibm.ws.webservices.engine.xmlsoap.saaj13only.SOAPConnectionJAXWS.call(SOAPConnectionJAXWS.java:72)
    ... 54 more
Caused by: javax.xml.ws.WebServiceException: javax.net.ssl.SSLHandshakeException: General SSLEngine problem 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T13:47:46.227

登录管理控制台并通过 SSL 证书和密钥管理 > SSL 配置 > NodeDefaultSSLSettings > 密钥库和证书 > NodeDefaultTrustStore > 签名者证书添加证书

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:34:29.033

通常，除了提供以 https:// 开头的端点 URL 之外，您不需要做任何事情。

Axis2 使用 http-commons 反过来将使用 JSSE 来处理安全性。因此，只要您正确配置了 JSSE，它应该可以开箱即用，除了在 URL 中传递 https 之外没有任何变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:50:55.570

伊姆兰，你试过这个技巧吗？“您必须从您尝试连接的远程主机检索签署者证书并将它们添加到 WAS 服务器信任库”

[http://turanunes.wordpress.com/2011/05/04/cwpki0022e-ssl-handshake-failure/](http://turanunes.wordpress.com/2011/05/04/cwpki0022e-ssl-handshake-failure/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T05:42:13.717

这行代码在 SSL 的情况下不起作用。

```
SOAPMessage soapMessageResponse = connection.call(soapRequest, new URL(serviceLocation)); 
```

为了从axis2 webservice通过SSL获得响应，您需要打开像给定的流`[here][1]`。

# hibernate - Java EE Hibernate 只插入？我的 postgresql 数据库中的值

> ID：10897887
> 
> 赞同：1
> 
> 时间：2012-06-05T13:07:11.447
> 
> 标签：hibernate, postgresql, jakarta-ee

我目前正在尝试休眠以使用 EJB 在我的 postgresql 数据库中发送我的 Java EE 实体。我的实体代码（为了测试，我使用最简单的）是：

```
 import java.io.Serializable;

@Entity

public class Coup implements Serializable {

    private static final long serialVersionUID = 1L;

    @Column(unique=true, nullable=false)
    @Id
    private String name;

    @Column(nullable=false)
    private String jeu;

    public Coup() {
    }

    public Coup(String name, String jeu) {
        this.name = name;
        this.jeu = jeu;
    }

    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getJeu() {
        return this.jeu;
    }

    public void setJeu(String jeu) {
        this.jeu = jeu;
    }

} 
```

 ``and my hibernate.xml file is` 

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="PostgresDSjeeux" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>java:/PostgresDSjeeux</jta-data-source>
    <class>Equipe</class>
    <class>Joueur</class>
    <class>Salon</class>
    <class>Partie</class>
    <class>HautFait</class>
    <class>Coup</class>
    <properties>

    <!-- <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>  -->  
      <property name="hibernate.hbm2ddl.auto" value="create-drop"/>
      <property name="hibernate.show_sql" value="true" />
    <!-- <property name="transaction.factory_class" value="org.hibernate.transaction.JDBCTransactionFactory" /> --> 

    </properties>
  </persistence-unit>
</persistence> 
```

However, after I execute this

```
            Coup c = new Coup();
            c.setJeu("superjeu");
            c.setName("supername");
                em.persist(c);

```

code, the generated query that I see in the JBOSS6 log is :` 

```
14:57:59,364 INFO  [STDOUT] Hibernate: insert into Coup (jeu, name) values (?, ?) 
```

感谢您提供的任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:09:53.370

我认为这只是来自 PreparedStatement 的日志消息，用于显示绑定参数。

您是否查看了数据库以查看插入的内容？这是唯一重要的事情，而不是日志。

# python - 在 Python 中为不同的结果线程化相同的函数

> ID：10897888
> 
> 赞同：1
> 
> 时间：2012-06-05T13:07:14.597
> 
> 标签：python, function, if-statement, module, python-multithreading

我需要我的程序并行执行某个功能。但是根据用户与程序的交互方式，该功能会产生不同的结果。我在一个名为 threadGUI.py 的模块中有一个简单的 GUI，它有两个选项：下载和上传。这些选项创建包含与函数相关的变量的字典。这些字典存储在主字典中，主字典存储在 thread_test.py 模块中。这些在一个接一个地执行时工作正常，但是当我尝试并行执行时出现问题。threadGUI.py中的线程相关代码：

```
def OnStartClick(self):
  for i in thread_test.dictList.values():        #the main dictionary is stored as a global in thread_test.py
     thread = Thread(target = thread_test.begin_tests, args = (i, ))
     thread.start()
  print "thread finished...exiting" 
```

上述函数调用 thread_test.py 模块中的 begin_test 函数。该函数如下所示：

```
def begin_tests(arg): 
    print arg
    print dictList
    dictItem = arg
    print dictItem
    if dictItem['Type'] == "HTTP_Downloading":
        print "DOWNLOAD"
    elif dictItem['Type'] == "FTP_Uploading":
        print "UPLOAD"
    else:
        print "Invalid input"
        sys.exit(1) 
```

这是我的代码的简化示例。我的问题是我的代码只执行两个函数中的一个，而不是两个函数。因此，如果我创建了一个名为下载、上传、下载的字典，那么它将执行三个下载，而不是所需的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:35:06.573

问题不在发布的代码中：

```
from threading import Thread

dictList = {
    'foo': { 'Type': 'HTTP_Downloading' },
    'bar': { 'Type': 'FTP_Uploading' },
    'baz': { 'Type': 'HTTP_Downloading' }
}

def begin_tests(arg):
    print arg
    print dictList
    dictItem = arg
    print dictItem
    if dictItem['Type'] == "HTTP_Downloading":
        print "DOWNLOAD"
    elif dictItem['Type'] == "FTP_Uploading":
        print "UPLOAD"
    else:
        print "Invalid input"
        sys.exit(1)

def OnStartClick(self):
  for i in dictList.values():        #the main dictionary is stored as a global in thread_test.py
     thread = Thread(target = begin_tests, args = (i, ))
     thread.start()
  print "thread finished...exiting"

OnStartClick(None) 
```

结果是：

```
{'Type': 'HTTP_Downloading'}
{'baz': {'Type': 'HTTP_Downloading'}, 'foo': {'Type': 'HTTP_Downloading'}, 'bar': {'Type': 'FTP_Uploading'}}
{'Type': 'HTTP_Downloading'}
 {DOWNLOAD
{'Type': 'FTP_Uploading'}
'Type': 'HTTP_Downloading'}
{'baz': {'Type': 'HTTP_Downloading'}, 'foo': {'Type': 'HTTP_Downloading'}, 'bar': {'Type': 'FTP_Uploading'}}
{'baz': {'Type': 'HTTP_Downloading'}, 'foo': {'Type': 'HTTP_Downloading'}, 'bar': {'Type': 'FTP_Uploading'}}
 thread finished...exiting
{'Type': 'HTTP_Downloading'}
DOWNLOAD
{'Type': 'FTP_Uploading'}
UPLOAD 
```

猜测一下，您正在重用内部字典。

更新：

我认为这种情况最好通过使用工作池和队列策略来解决。就像是：

```
from Queue import Queue
from threading import Thread

queue = Queue() # Replaces the dictList

threads = []
for n in range(10):
    thread = Thread(target = worker, args = (begin_tests, queue, ))
    thread.start()
    threads.append(thread)

Stop = object()
def worker(work, queue):
    while True:
        task = queue.get()
        if task is Stop:
            break
        work(task) 
```

像这样使用它：

```
queue.put({ 'Type': 'HTTP_Downloading' })
queue.put({ 'Type': 'FTP_Uploading' })
queue.put({ 'Type': 'HTTP_Downloading' })
queue.put(Stop) 
```

这本身并不能解决改变字典的问题；这必须在其他地方修复。这种策略有两个好处：它确实保留了任务的顺序，并且不会冒丢失任务的风险：dict 提供有限的并发保证，而 Queue() 保证是线程安全的。

# bash - sed、awk、grep 匹配单词 2 文件

> ID：10897894
> 
> 赞同：2
> 
> 时间：2012-06-05T13:07:52.750
> 
> 标签：bash, sed, awk

希望有人可以提供帮助。

我有两个文件。 `file-a`好像

```
 bank
    sofa
    table 
```

`file-b`是一个“脚本”。例如，它看起来像：

```
 abcdfg bank
    kitchen abcdfg
    uhuh sofa := 
```

我只需要知道`file-a`不匹配任何单词的单词`file-b`并将其打印到`file-c`

我知道必须在一个文件中执行此操作，但不知道如何将其与另一个文件进行比较。

我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:13:39.907

分两步：

```
fgrep -f file-a -o file-b > this_words_from_file-a_are_in_file-b
sort file-a this_words_from_file-a_are_in_file-b | uniq -u 
```

（第一次搜索单词，然后只输出找到的单词，然后`sort`过滤`uniq`掉那些。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T14:19:04.667

```
fgrep -of file-a file-b | fgrep -vf - file-a 
```

首先查找 file-a 中位于 file-b 中的所有单词，然后再次使用 fgrep 从 file-a 中获取不在该列表中的单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T15:47:54.300

这不会赢得代码高尔夫，但它只对数据进行一次传递，并且不会浪费任何 cpu 时间排序：

```
awk '{ for( i=1; i<=NF; i++ ) if( NR==FNR ) w[$i]=1; else delete w[$i] }
     END{ for( i in w ) print i}' file-a file-b > file-c 
```

请注意，加速是巨大的。使用`file-a`和`file-b`as `/usr/share/dict/words`，这个 awk 解决方案在我的系统上运行了 1.578 秒。John Lawrence 的 fgrep 解决方案的时间：9.157s。Zsolt 的 fgrep 的时间 | 唯一性：4.951。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T13:14:20.247

```
join -1 1 -2 2 -v 1 <(sort file-a) <(sort -k2,2 file-b) > file-c 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T13:21:36.693

```
> fileC; cat fileA | while read ZWORD ; do fgrep -q "$ZWORD" fileB || echo $ZWORD >>fileC; done
$ cat fileC
table 
```

*线索*：

*   `> fileC`创建一个空文件
*   `read`读取一行`fileA`并将其放入变量中`ZWORD`
*   `fgrep`不评估`$ZWORD`为正则表达式
*   `-q`是安静的
*   `||`在前面的命令失败时执行

# sql-server-2008 - 从备份文件中恢复数据库到以前的数据库

> ID：10897895
> 
> 赞同：0
> 
> 时间：2012-06-05T13:07:58.490
> 
> 标签：sql-server-2008

我有一个数据库`db1`。我两天前备份了这个数据库，它存储为`db1.bak`.

现在我创建了另一个数据库`db2`并使用备份文件恢复`db1.bak`。我对`db2`.

今天由于某些原因，我在没有备份的情况下恢复`db2`使用:(`db1.bak``db2`

但是现在我需要`db2`使用昨天的行来恢复数据库。我想这是不可能的，但我在这里发帖试一试。

注意：我使用的是 Microsoft SQL Server 2008。

如果有人知道恢复的方法，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:10:23.433

这是不可能的。您已丢失更改

# jquery - 从一个叠加层链接到另一个叠加层

> ID：10897896
> 
> 赞同：0
> 
> 时间：2012-06-05T13:07:58.707
> 
> 标签：jquery, jquery-plugins, jquery-tools

我使用 JQuery Tools 的覆盖功能。

我的问题是，我想在一个叠加层中有一个链接，以便在关闭现有叠加层的同时打开另一个叠加层。

我怎样才能让它工作？

```
<a href="#" class="takeatour" rel="#sitetour1">Site tour</a>

<div class="overlay" id="sitetour1">
Step 1 <a href="#" rel="#sitetour2">Click here to learn more</a>
</div>
<div class="overlay" id="sitetour2">
Step 2
</div>

        $("a[rel]").each(function(i) { 
            $(this).overlay({ 

                // common configuration for each overlay 
                oneInstance: false,  
                closeOnClick: true,     
                expose: '#3FB8AF',
            });             
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:22:31.477

添加这个：

```
$('a[rel=#sitetour2]').click(function(e) {
    $('a[rel=#sitetour1]').overlay().close();
}); 
```

​</p>

# android-layout - Android 资源使用 XHDPI、HDPI

> ID：10897899
> 
> 赞同：2
> 
> 时间：2012-06-05T13:08:14.387
> 
> 标签：android-layout, android

所以我在这些目录中有以下文件：

```
res/drawable-hdpi/icon_logo.png
res/drawable-xhdpi/icon_logo.png 
```

在我的 XHDPI 布局`res/layout-xlarge/main.xml`中，我在图像中引用了 icon_logo，但是显示的是 HDPI 分辨率资产而不是 XHDPI 资产。

```
<ImageView
        android:layout_width="229.50dp"
        android:layout_height="42.50dp"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="13dp"
        android:contentDescription="@string/cd_header_text"
        android:src="@drawable/icon_logo" /> 
```

为什么会这样，在过去的一个小时里，我一直在用头撞墙，试图弄清楚这一点。

*ps 我正在测试的平板电脑是 Galaxy Tab 10.1 Running HoneyComb 3.2*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:15:13.807

据我所知，Galaxy Tab 10.1 的 MDPI 屏幕与 Moto Xoom 相同，所以我的猜测是，如果您没有 MDPI 图标，资源管理器会采用下一个可用的图标，即 HDPI 图标？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:20:30.003

`xhdpi`指的是密度，而`xlarge`指的是屏幕尺寸。

Galaxy Tab 10.1 的密度为 149 ppi，屏幕分辨率为 1280x800。

您可以查看[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)以了解有关可用于资源的限定符的详细信息。

# angularjs - AngularJS - 自己的过滤器

> ID：10897900
> 
> 赞同：3
> 
> 时间：2012-06-05T13:08:15.027
> 
> 标签：angularjs, filter, module, angularjs-filter

由于AngularJS中的一些教程，我正在尝试制作自己的过滤器。

我的代码看起来像这样

```
angular.module('fooAppFilters', []).filter('scenarioDate', function() {
  return function(input) {
    // do some changes on input
    return input;
  };
});

angular.module('fooApp', ['fooAppFilters']);

function FooCtrl($scope, $http, $ogrAppFilters) {
  // ...
} 
```

无论如何，我收到了这个错误：

```
Error: Unknown provider: $fooAppFiltersProvider <- $fooAppFilters 
```

你能给我一个提示吗？我被困在这里更长的时间。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T14:19:27.787

您只能将服务注入控制器，而不是模块。

要创建过滤器，向模块注册过滤器，然后在 HTML 中使用 ng-app="fooApp" 进行引导。

# html - html css 工具栏

> ID：10897902
> 
> 赞同：-1
> 
> 时间：2012-06-05T13:08:25.860
> 
> 标签：html, css

我在调整工具栏的宽度时遇到问题，当我增加 100px 时，一切都出错了，我怎样才能使边距角变圆？

这是一个演示 - [http://jsfiddle.net/bArx5/](http://jsfiddle.net/bArx5/)

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:13:39.230

当您增加每个`a`元素的宽度时，它将包裹列表（如果这就是您所说的“一切都出错了”）。您可以通过设置`ul`元素的最小宽度来防止这种情况（[此处为小提琴](http://jsfiddle.net/HYhBe/)）：

```
ul#list-nav {
    margin: 20px;
    min-width: 700px;
} 
```

这必须根据`a`元素的宽度进行调整。

我真的不知道你的意思是“我怎样才能使边缘角变圆”，但如果你想要的是你的锚元素的圆角，你可以为它们添加一个边框半径：

```
ul#list-nav li a:hover {
    background-color:black;
    color:white;
    border-radius: 5px;
}​ 
```

# c++ - 矩形在鼠标移动时留下它的标记

> ID：10897903
> 
> 赞同：0
> 
> 时间：2012-06-05T13:08:27.983
> 
> 标签：c++, gdi+

我正在尝试创建一个矩形并为反向（该矩形之外的区域）区域着色。

```
Gdiplus::Region *cropRegion = new Gdiplus::Region(cropRectF);
Gdiplus::Rect gdiCropRect(0.0f, 0.0f, 1000.0f, 1000.0f);

Gdiplus::Rect imageContainer(0.0f, 0.0f, 1000.0f, 1000.0f);
Gdiplus::Region *completeRegion = new Gdiplus::Region(imageContainer);
completeRegion->Intersect(cropRegion);

gdiGraphics.SetClip(completeRegion, Gdiplus::CombineModeXor);

Gdiplus::GraphicsPath *cropRectPath = new Gdiplus::GraphicsPath();
cropRectPath->AddRectangle(cropRectF);

Gdiplus::Pen* myPen = new Gdiplus::Pen(Gdiplus::Color::White);
myPen->SetWidth(1);
gdiGraphics.DrawPath(myPen, cropRectPath);

Gdiplus::SolidBrush dimmingBrush(Gdiplus::Color::MakeARGB(50, 0, 0, 0));
gdiGraphics.FillRegion(&dimmingBrush, completeRegion); 
```

到这里的代码工作得很好，

但是，当我尝试在 MouseMove CallBack 中使用鼠标移动移动此矩形时，它会移动但会留下白色痕迹。

最后我尝试调用 InvalidateRect 但我的矩形根本没有移动。任何想法如何清除旧矩形。我正在使用 GDI+ 和 C++。谢谢

# sql - sql 获得前 5 名

> ID：10897906
> 
> 赞同：0
> 
> 时间：2012-06-05T13:08:34.677
> 
> 标签：sql, vertica

我有一个包含以下列的销售表：

```
[Date], [StoreID], [ItemID], [AmountInDollars]. for example:

06052012 | 1  | 111 | 2.35
06052012 | 1  | 222 | 5.00
06052012 | 2  | 333 | 9.99
...
01052012 | 30 | 999 | 3.98 
```

我希望能够以这种方式选择数据：

```
[Date] |  [StoreID] | totalSalesForTheDay | TopSellingItemID1 | TopSellingItemID2 | TopSellingItemID3 
```

我正在尝试以下操作：

```
select date,
       storeID,
       sum(AmountInDollars),
       ItemID
from sales
group by date,
       storeID,
       ItemID 
```

这给出了当天售出的所有 ItemID... 我该怎么做 1\. 仅限于 3 个顶级项目 2\. 在同一行中水平显示 3 个顶级项目

谢谢！

根据要求 - 数据样本。这是原始表

```
Date | StoreID | ItemID | AmountInDollars
06052012 | 1  | 111 | 2.35
06052012 | 1  | 222 | 5.00
06052012 | 1  | 444 | 9.99
06052012 | 1  | 222 | 5.00
06052012 | 1  | 444 | 9.99
06052012 | 1  | 333 | 9.99
06052012 | 1  | 444 | 9.99
06052012 | 2  | 222 | 5.00
06052012 | 2  | 444 | 9.99
06052012 | 2  | 333 | 9.99
06052012 | 2  | 444 | 9.99
05052012 | 1  | 111 | 2.35
05052012 | 1  | 222 | 5.00
05052012 | 1  | 444 | 9.99
05052012 | 1  | 222 | 5.00
05052012 | 1  | 444 | 9.99
05052012 | 1  | 333 | 9.99
05052012 | 1  | 444 | 9.99
05052012 | 2  | 222 | 5.00
05052012 | 2  | 444 | 9.99
05052012 | 2  | 333 | 9.99
05052012 | 2  | 444 | 9.99 
```

将导致：

```
 Date     | StoreID |totalsales |  TopSellingItemID1 |  TopSellingItemID2 |  TopSellingItemID3 
 06052012 | 1       | 52.31 | 444 | 222 | 111
 06052012 | 2       | 34.97 | 444 | 222 | 333
 05052012 | 1       | 52.31 | 444 | 222 | 111
 05052012 | 2       | 34.97 | 444 | 222 | 111 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T13:11:28.173

我不相信 Vertica 支持 Pivot。

这是一个类似问题的答案：[我如何在 Vertica 中做交叉表](https://stackoverflow.com/questions/2449781/how-do-i-do-a-crosstab-in-vertica)

# core-graphics - 如何在 Core-Graphics Framework 中设计 undo 功能？

> ID：10897907
> 
> 赞同：1
> 
> 时间：2012-06-05T13:08:34.813
> 
> 标签：core-graphics, restore, cgcontext, undo

许多人建议我保存刚刚绘制的图像，并在当前图片中需要撤消时加载它。

但我认为这可能不是一个好方法：

1.  保存并加载到磁盘会导致滞后。
2.  撤消后无法擦除，因为您无法擦除图像（不填充背景颜色）。

因此，我正在寻找一种方法来恢复 CGLayer 或上下文的数据，当您需要撤消时，将当前数据覆盖为“绘制资源”。我已经使用 NSMutableData 来执行此操作，但它根本不起作用，因为只保存了指针。

而且我不明白如何使用CGContextSaveState，CGContextRestoreState。当你保存它时，你必须在 drawRect 完成之前恢复它，你不能保存它并在需要撤消时恢复它，因为当 drawRect 完成时上下文将被破坏或重置，以及我所做的一切试过了，没有任何反应。

有人可以在这里帮助我吗？谢谢！

# string - 如何在字符串文件（txt）中返回数字？

> ID：10897910
> 
> 赞同：-2
> 
> 时间：2012-06-05T13:08:54.377
> 
> 标签：string, parsing, numbers, return

我想解析一个带有信息的txt文件。我想要的是，要找到该字符串中的所有数字，我的意思是我想要一个子在第二个、第三个等之后返回第一个数字（与数字一样多的数字）。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:15:18.170

$string = preg_replace('/\D/', ' ', $string);

$numberArray = explode(' ',$string);

# php - PHP Mongodb不更新数组

> ID：10897914
> 
> 赞同：0
> 
> 时间：2012-06-05T13:09:01.563
> 
> 标签：php, mongodb, mongodb-php

我不知道为什么，但我收到了这个错误

```
Fatal error: Call to a member function update() on a non-object in /home/XXXXXXXXXXXXXXXXX/classes/core.php on line 22 
```

在那个页面上我有这个

```
public function updatemongo($from,$data)
    {
        $this->db = $m->exchange_rates;
        $collection = $this->db->exchangeDB;
        $collection->update(array("from" => $from), $data);
    } 
```

这就是我调用这个函数的方式

```
foreach ($currencies as $to)
 {
    if($from != $to)
    {

        $url = 'http://finance.yahoo.com/d/quotes.csv?f=l1d1t1&s='.$from.$to.'=X';
        $handle = fopen($url, 'r');

        if ($handle) {
            $result = fgetcsv($handle);
                fclose($handle);
        }

        $newdata = array('$set' => array("exchangehistory.{$result[1]}.{$result[2]}" => array("to" => $to, "rate" => $result[0], "updated" => $result[2])));
        $fetch->updatemongo($from,$newdata);

        $newdata = array('$set' => array("currentexchange" => array("to" => $to, "rate" => $result[0], "updated" => $result[2])));
        $fetch->updatemongo($from,$newdata);

    }
 } 
```

是的，需要访问的文件也有`require_once("core.php");`

请让我知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T13:13:04.010

看起来像一个错字：对象“$m”没有在函数中实例化`updatemongo()`

要么在此处创建它，要么在`global $m;`它存在时获得访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:15:21.897

$this->db->e​​xchangeDB 放入 $collection 时是否包含 null 或类似内容？我们很难说清楚，因为我们不知道该变量在哪里被实例化。

$collection->update(array("from" => $from), $data);

是您的错误的原因，并且错误很明显： $update 不是对象。否则它会抱怨“PHP 致命错误：在第 xx 行的 /my/php/file.php 中调用未定义的方法 YourClass::yourMethod()”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T14:03:19.450

该`updatemongo()`函数无权访问该`$m`变量。请将它传递给这样的函数：

```
$fetch->updatemongo($m, $from, $newdata); 
```

并将您的函数定义更改为：

公共函数 updatemongo($m, $from, $data) {

或者，您可以`m`在创建对象后将其属性设置为连接。例如：

```
public function __construct)
{
    $this->m = new Mongo();
}
...
public function updatemongo($from, $data)
{
    $this->db = $this->m->exchange_rates;
    $collection = $this->db->exchangeDB;
    $collection->update(array("from" => $from), $data);
} 
```

或者，也许您可​​以`$this->exchange_rates`在上面使用...无论如何，您都无法`$m`使用该功能。

# excel - 如何在 Visual Studio 2008 中为 Excel XLL 编译 C 代码，使其在 Office 2010 64 位版本上运行

> ID：10897916
> 
> 赞同：0
> 
> 时间：2012-06-05T13:09:09.377
> 
> 标签：excel, excel-addins, xll

我有一个使用 Excel 2007 SDK 开发的 Excel 加载项，它在 Excel 2007 和 Excel 2010 32 位版本上运行良好

最近，我注意到 Office 2010 或 Excel 2010 也作为 64 位软件提供，而 Excel 2007 中的 32 位版本和 Excel 2010 中的对应版本

我知道它需要 Excel 2010 SDK 和 Visual Studio 2008 才能将 XLL 编译为 64 位版本，因此它将在 Win7 上的 Excel 2010 64 位中运行

是否需要在 Visual Studio 2008 中设置任何特定选项，以便我可以将代码编译为 64 位版本

我查看了 Excel 2010 SDK 中的示例代码，它使用相同的 XLOPER12 数据类型，示例代码看起来很像 Excel 2007 SDK 中的示例代码

这导致我询问以前版本的代码在 64 位 Excel 环境中运行之前是否需要进行任何更改

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T01:44:03.063

你不需要做任何特别的事情来让你的代码工作。如果您想要一种创建加载项的简单方法，请查看[http://xll.codeplex.com 。](http://xll.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:58:09.250

如果您的代码编译 - 你应该很高兴。也就是说 - 如果您使用 XLOPER12s 进行任何指针算术运算 - 您当然需要记住指针在 64 位构建中是 8 个字节。

另外 - 如果您动态链接到 CRT，请确保您提供可再发行组件。或者 - 静态链接到 64 位 crt。

# asp.net - Sitecore 创建项目的默认语言

> ID：10897917
> 
> 赞同：2
> 
> 时间：2012-06-05T13:09:14.933
> 
> 标签：asp.net, sitecore, sitecore6

如何更改 sitecore 中新项目的默认语言？更改 <setting name="DefaultLanguage" value="fr" /> 不起作用，因为 Sitecore 仍在添加带有“en”作为默认版本的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T18:21:23.103

这似乎有点简单的答案，但我认为这与其说是一个全局设置，不如说它是更灵活和以用户为中心的东西。我相信 Sitecore 会根据您使用的当前语言版本添加新项目。例如，如果您正在查看某个项目的法语版本。下次你创建一个项目时……任何类型的，它都会创建一个法语版本的项目。

另外，当您说默认语言时，我假设您正在谈论默认语言设置。您还可以在站点声明中指定语言设置。如果有帮助的话。

# sax - java.lang.NoClassDefFoundError: org/saxpath/SAXPathException

> ID：10897922
> 
> 赞同：1
> 
> 时间：2012-06-05T13:09:30.833
> 
> 标签：sax, noclassdeffounderror

在我的应用程序中，在运行时我得到`java.lang.NoClassDefFoundError: org/jaxen/NamespaceContext`

因此，在查看了[这个](https://stackoverflow.com/questions/7058158/jdom-working-with-xpath)线程之后，我使用 maven添加`dom4j.jar`并添加到了我的类路径中：`jaxen.jar`

```
 <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>jaxen</groupId>
        <artifactId>jaxen</artifactId>
        <version>full</version>
    </dependency> 
```

在 dong 之后我遇到了一个不同的异常：

```
java.lang.NoClassDefFoundError: org/saxpath/SAXPathException 
```

我无法找到任何合适的解决方案。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:20:11.770

包括**[dom4j-1.6.1.jar](http://repo1.maven.org/maven2/dom4j/dom4j/1.6.1/dom4j-1.6.1.jar)**。

由于您正在映射到版本 1.6.1

# android - 如何在 viewpager 中以编程方式更改图像？

> ID：10897923
> 
> 赞同：0
> 
> 时间：2012-06-05T13:09:34.077
> 
> 标签：android, image, android-viewpager, measure

我正在使用一个 viewpager，它将从 web 服务获取图像源，并将页面动态添加到 viewpager。

但现在，我只是在测试如何以编程方式更改图像。

这是简单的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerInside"
        android:src="@drawable/button_increase" />

</LinearLayout> 
```

这是 ViewPager 类中的 instantiateItem：

```
public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View view = inflater.inflate(R.layout.test_layout, null);

           ImageView imageView1= ((ImageView)(View)findViewById(R.id.imageView1));
           imageView1.setImageDrawable(getResources().getDrawable(R.drawable.button_increase));

            ((ViewPager) collection).addView(view);

            return view;
        } 
```

我在 setImageDrawable 上遇到异常，这是堆栈跟踪：

```
06-05 14:58:17.923: E/AndroidRuntime(22982): FATAL EXCEPTION: main
06-05 14:58:17.923: E/AndroidRuntime(22982): java.lang.NullPointerException
06-05 14:58:17.923: E/AndroidRuntime(22982):    at *project*.MainActivity$CustomPagerAdapter.instantiateItem(MainActivity.java:93)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:649)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.support.v4.view.ViewPager.populate(ViewPager.java:783)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.View.measure(View.java:12863)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:594)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:376)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.View.measure(View.java:12863)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.View.measure(View.java:12863)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.View.measure(View.java:12863)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2256)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.View.measure(View.java:12863)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1197)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2585)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.os.Looper.loop(Looper.java:137)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at android.app.ActivityThread.main(ActivityThread.java:4507)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at java.lang.reflect.Method.invokeNative(Native Method)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at java.lang.reflect.Method.invoke(Method.java:511)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
06-05 14:58:17.923: E/AndroidRuntime(22982):    at dalvik.system.NativeStart.main(Native Method) 
```

有人知道我可以尝试什么吗？我可以看到这是某种度量问题，但我不知道如何处理这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:17:48.473

代替

```
 ImageView imageView1= ((ImageView)(View)findViewById(R.id.imageView1)); 
```

采用

```
 ImageView imageView1= ((ImageView) view.findViewById(R.id.imageView1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:16:21.790

试试这种方式：

```
imageView1.setImageResource(R.drawable.button_increase); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:25:49.037

试试这个

```
 View view = inflater.inflate(R.layout.test_layout, null);

       ImageView imageView1= (ImageView)view.findViewById(R.id.imageView1);
       imageView1.setImageResource(R.drawable.button_increase); 
```

# java - 如何使用 Java Observer 的 update(Observable, Object) 函数？

> ID：10897928
> 
> 赞同：4
> 
> 时间：2012-06-05T13:09:47.667
> 
> 标签：java, model-view-controller

我有一个用 Java 创建的基本 MVC 模式，它使用 Observable/Observer 类/接口。

```
Observable    Observer      Observable/Observer
Model         Controller    View

View triggers an event to the Controller, when the user interacts with the GUI.
- E.g presses a button, fills in a field, etc.

Model triggers an event to the View when it updates its state.
- E.g when the a button was pressed and the Controller requests new results. 
```

我的问题是关于观察者功能

```
update(Observable obs, Object arg); 
```

这是一个功能，但例如，我有许多不同类型的更新要做`View`。我如何优雅地区分对搜索结果的更新或附加信息的显示？这是两个完全不同的更新，它们使用模型中的不同对象。

我的第一个想法是使用 Object 传递一个描述需要更新的字符串。

```
"UpdateResults" "DisplayAdditionalInformation" "AddQuestions" 
```

但这似乎容易出错且丑陋。我的第二个直觉是创建一个将作为对象传递的 EventObject，但是我必须不断询问我正在使用哪种 EventObject：

```
if (arg instanceof ResultEventObject) 
    // Get results from model
else if (arg instanceof InformationEventObject)
    // Get information from model
else if (arg instanceof QuestionsEventObject)
    // get questions from model 
```

我的第三个想法是简单地更新所有内容，但这似乎毫无意义地低效。

我可能没有正确理解 Observable/Observer 接口，或者我没有按照作者的意图使用 update()。`update`因此我的问题是，当我有许多不同类型的更新或事件要处理时，如何正确使用该功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:17:55.053

`Listener`您可以根据您正在收听的视图/模型创建自己的界面。这允许您的视图/模型准确地将所需的信息传递给您的控制器，并使对控制器进行单元测试变得更加容易。

对于聆听模型，更新所有内容是最简单的解决方案，除非性能被证明是一个问题，否则您可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:33:02.073

是的，我认为最好使用监听器接口

检查此说明[http://www.softcoded.com/web_design/java_listeners.php](http://www.softcoded.com/web_design/java_listeners.php)

# objective-c - Objective-c：将目标添加到 UIButton 不调用

> ID：10897931
> 
> 赞同：0
> 
> 时间：2012-06-05T13:10:04.823
> 
> 标签：objective-c, ios, events, uibutton

我尝试使用 addTarget 将事件添加到这样的 UIButton

```
EGOImageButton* image = [[EGOImageButton alloc] initWithPlaceholderImage:[UIImage imageNamed:@"screen.png"]];
    [image setImageURL:[NSURL URLWithString:thumbnail]];
    [image setFrame:CGRectMake(x, y, self.cellsize, self.cellsize)];
    [image setTag: [self.photoIDs count]-1];
    [image addTarget:self action:@selector(buttonTouched:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:image];
    [image release]; 
```

函数定义是这样的：

```
-(void)buttonTouched:(id)sender {
   NSLog(@"Thumbnail Clicked");
 } 
```

这是 EGOImageButton 初始化函数的代码

```
- (id)initWithPlaceholderImage:(UIImage*)anImage {
return [self initWithPlaceholderImage:anImage delegate:nil];    }

- (id)initWithPlaceholderImage:(UIImage*)anImage delegate:(id<EGOImageButtonDelegate>)aDelegate {
if((self = [super initWithFrame:CGRectZero])) {
    self.placeholderImage = anImage;
    self.delegate = aDelegate;
    [self setImage:self.placeholderImage forState:UIControlStateNormal];
}

return self; 
```

}

错误看起来像这样：

> -[ **NSCFType buttonTouched:]：无法识别的选择器发送到实例 0x6c804a0 2012-06-06 01:36:59.061 Facebook 的照片拼贴 [2416:16103] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSCFType buttonTouched :]: 无法识别的选择器发送到实例 0x6c804a0' ***第一次抛出调用堆栈：( 0 CoreFoundation 0x0046a5a9 __exceptionPreprocess + 185 1 libobjc.A.dylib 0x01402313 objc_exception_throw + 44 2 CoreFoundation 0x0046c0bb -[NSObject(NSObject) doesNotRecognizeFoundationSelector:] + 0x003db966 __*转发***+ 966 4 核心基础 0x003db522 _CF_forwarding_prep_0 + 50

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:21:14.400

它没有被调用有点奇怪，因为它看起来设置正确（[https://stackoverflow.com/questions/8968446/cant-able-to-add-click-event-in-uibutton 作为参考](https://stackoverflow.com/questions/8968446/cant-able-to-add-click-event-in-uibutton)）。我的第一个猜测是，实际上无法访问您的代码，您的图像上方有一些东西，因此点击事件不会传递给 UIButton 子类（EGOImageButton）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T06:04:50.153

检查以确保您的选择器引用的方法包含 UIButton 类型的发送者

就像这样 -(void)buttonTouched:(UIButton *)sender

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:29:53.737

行动：

```
@selector(buttonTouched:) 
```

我认为你不需要冒号：在这里，删除它并尝试操作：像这样：

```
@selector(buttonTouched) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T13:12:53.387

我认为你的`buttonTouched`方法需要有一个返回类型`IBAction`而不是`void`.

# security - 如何选择安全模型

> ID：10897932
> 
> 赞同：1
> 
> 时间：2012-06-05T13:10:06.623
> 
> 标签：security, permissions, access-rights

我正在寻找在网站上实施访问权限的最佳安全模型。最初应根据以下规则授予对象访问权限：

*   用户
*   用户组
*   等级制度
*   权限 (CRUD)

我可以使用哪些安全模型，每种模型的优缺点是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:22:09.860

[访问控制](http://en.wikipedia.org/wiki/Access_control)模型有时被分类为任意或非任意的。三种最广泛认可的模型是自主访问控制 (DAC)、强制访问控制 (MAC) 和基于角色的访问控制 (RBAC)。MAC 和 RBAC 都是非自由裁量的。

但我建议使用[RBAC](http://en.wikipedia.org/wiki/Role-based_access_control)模型。它对您的问题非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T13:53:01.010

[RBAC](http://en.wikipedia.org/wiki/Role-based_access_control)通常很容易实现和直接。但是，如果您的平台不存在现有的访问控制库，我会感到惊讶。

# java - @Context 对象来自哪里

> ID：10897933
> 
> 赞同：14
> 
> 时间：2012-06-05T13:10:08.323
> 
> 标签：java, glassfish, jersey, jax-rs

我一直在到处寻找，但似乎找不到明确的答案......

服务器（我的问题是 glassfish）注入带有@Context 注释的实际对象的机制是什么？更具体地说，如果我想编写一个执行以下操作的类：

```
@Path("/")
public class MyResource {
  @GET
  public String doSomething(@Context MyObject obj) {
    // ...
  }
} 
```

那我该怎么做呢？MyObject 在哪里被实例化，谁做的，如何做的？

编辑：我见过类似以下的东西：

[在 JAX-RS 中使用 @Context、@Provider 和 ContextResolver](https://stackoverflow.com/questions/3047400/using-context-provider-and-contextresolver-in-jax-rs)

[http://jersey.576304.n2.nabble.com/ContextResolver-confusion-td5654154.html](http://jersey.576304.n2.nabble.com/ContextResolver-confusion-td5654154.html)

但是，这与我所看到的不符，例如在 org.neo4j.server.rest.web.RestfulGraphDatabase 的构造函数中，它具有以下签名：

```
public RestfulGraphDatabase(
  @Context UriInfo uriInfo,
  @Context Database database,
  @Context InputFormat input,
  @Context OutputFormat output,
  @Context LeaseManager leaseManager ) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T14:47:25.517

您可以编写自己的注入提供程序并将其插入 Jersey - 查看[SingletonTypeInjectableProvider](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/inject/SingletonTypeInjectableProvider.html)和[PerRequestTypeInjectableProvider](http://jersey.java.net/nonav/apidocs/latest/jersey/com/sun/jersey/spi/inject/PerRequestTypeInjectableProvider.html) - 扩展这些类之一（取决于您想要的可注入对象的生命周期）并将您的实现注册为 Web 应用程序中的提供程序。

例如，像这样：

```
@Provider
public class MyObjectProvider extends SingletonTypeInjectableProvider<Context, MyObject> {
    public MyObjectProvider() {
        // binds MyObject.class to a single MyObject instance
        // i.e. the instance of MyObject created bellow will be injected if you use
        // @Context MyObject myObject
        super(MyObject.class, new MyObject());
    }
} 
```

要将提供程序包含在您的 Web 应用程序中，您有多种选择：

1.  如果您的应用程序使用类路径扫描（或包扫描），只需确保提供程序位于正确的包中/在类路径上
2.  或者您可以简单地使用 META-INF/services 条目注册它（添加 META-INF/services/com.sun.jersey.spi.inject.InjectableProvider 文件，其中包含您的提供程序类的名称）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T15:41:48.780

我想我可能正在做某事……如果这可行，马丁应该得到部分荣誉。:)

看来@Provider 类必须实现**com.sun.jersey.spi.inject.Injectable<T>**接口。但是，我不确定这是否足以实际注入@Context。缺少的是，我们必须告诉 Web 应用程序的 ResourceConfig 对象有关 @Provider 的信息。在我正在尝试做的事情的背景下，并从 neo4j-server 获得提示，剩下的工作归结为：

*   扩展 com.sun.jersey.spi.container.servlet.ServletContainer，并覆盖 configure 方法：

> ```
> @Override
> protected void configure(WebConfig wc, ResourceConfig rc, WebApplication wa)
> {
>   super.configure( wc, rc, wa );
>   Set<Object> singletons = rc.getSingletons();
>   singletons.add(new MyObjectProvider());
> } 
> ```

*   指定必须在 web.xml 部署描述符中使用此容器：

> ```
> <servlet>
>   <servlet-name>JAX-RS Servlet Container</servlet-name>
>   <servlet-class>com.blah.MyServletContainer</servlet-class>
> </servlet> 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T13:25:47.240

我认为您不能使用`@Context`用户定义的类型，例如`MyObject`. 它用于注入 jax-ws 已经理解的类型。[这里](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e516)提到了。

> [JAX-RS 规范的第 5 章](http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html#x3-520005)介绍了可以与 @Context 一起使用的所有标准 JAX-RS Java 类型。

您可能想使用类似`@FormParam`or的东西`@PathParam`。有关说明，请参阅规范的[第 2.3 节。](http://jersey.java.net/nonav/documentation/latest/jax-rs.html#d4e247)这是您的答案，从规范的该部分复制：

> 通常，方法参数的 Java 类型可能：
> 
> 1.  是原始类型；
> 2.  有一个接受单个 String 参数的构造函数；
> 3.  有一个名为 valueOf 或 fromString 的静态方法，它接受单个 String 参数（例如，参见 Integer.valueOf(String) 和 java.util.UUID.fromString(String)）；或者
> 4.  是 List、Set 或 SortedSet，其中 T 满足上述 2 或 3。生成的集合是只读的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T13:24:14.870

请参阅[JAX-RS 规范的第 5-6 章](http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html#x3-520005)。这应该告诉你你需要知道的一切。

# php - 从android手机在php服务器上发布gps坐标

> ID：10897936
> 
> 赞同：1
> 
> 时间：2012-06-05T13:10:19.860
> 
> 标签：php, android, post, gps

我正在尝试的是获得我当前的位置（坐标），并且我想将这些坐标发布在服务器上。我已经使用 WAMP 制作了一个服务器。我已经编写了 php 代码和 java 中的代码，但它在**POST**字中显示错误。请告诉我它是否正确或者我是否可以修改它！

PHP代码

```
<?php
echo 'Hello, world!';
$json = $_GET['jsonpost'];//get the post you sent...
$data = json_decode($json); //decode the json formatted string...
print_r($data);
$id = $data->id;
$devid = $data->devid;
$latitude = $data->latitude;
$longitude = $data->longitude;
$service = $data->service;
$con = mysql_connect("","","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("a5234826_ul", $con);
$devid = $_POST['devid']; 
$latitude = $_POST['latitude'];
$longitude = $_POST['longitude'];
echo "devid" +$devid;
echo "latitude" + $latitude;
echo "longitude" + $longitude; 
$sql = "INSERT INTO  `a5234826_ul`.`locations` (
`id` ,
`devid` ,
`latitude` ,
`longitude` ,
`service`
)
VALUES (
NULL ,  '$devid',  '$latitude',  '$longitude', '$service'  
)";
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
mysql_close($con);
echo json_encode($variable); 
```

?>

**编辑** LocationService.java

```
 @Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId) {
    PowerManager pm = (PowerManager)getSystemService(Context.POWER_SERVICE);
    wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "lock");
    wl.acquire();
    context = this;
    final String who = intent.getStringExtra("who");
    final LocationManager locMan = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    final LocationListener listener = new LocationListener(){

        // start location changed

        public void onLocationChanged(Location loc) {
            double latitude = loc.getLatitude();
            double longitude = loc.getLongitude();

            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://.../serverFile.php");
            JSONObject json = new JSONObject();

            TelephonyManager telephonyManager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
            String devid = telephonyManager.getDeviceId();

            String postData = "{\"request\":{\"type\":\"locationinfo\"},\"userinfo\":{\"latitude\":\""+latitude+"\",\"longitude\":\""+longitude+"\",\"devid\":\""+devid+"\"}}";

            try {  

                json.put("longitude", longitude);//place each of the strings as you did in postData method
                json.put("latitude", latitude);

                json.put("devid", devid);

                JSONArray postjson=new JSONArray();
                postjson.put(json);
                httppost.setHeader("json",json.toString());
                httppost.getParams().setParameter("jsonpost",postjson);     
                HttpResponse response = httpclient.execute(httppost);

                // for JSON retrieval:
                if(response != null)
                { 
                InputStream is = response.getEntity().getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
                }
                } catch (IOException e) {
                e.printStackTrace();
                } finally {
                try {
                is.close();
                } catch (IOException e) {
                e.printStackTrace();
                }
                }
                String jsonStr = sb.toString(); //take the string you built place in a string

                JSONObject rec = new JSONObject(jsonStr);
                String longitudecord = rec.getString("lon");
                    String latitudecord = rec.getString("lat");
                // ...
                }
                }catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            if (who.equals("me")){
                Intent i = new Intent(context.getPackageName()+".LocationReceived");
                i.putExtra("lat", String.valueOf(latitude));
                i.putExtra("longitude", String.valueOf(longitude));
                i.putExtra("accuracy", String.valueOf(loc.getAccuracy()));
                context.sendBroadcast(i);
                Notification notif = new Notification();
                NotificationManager nm = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
                notif.tickerText = "Location Found!";
                notif.icon = R.drawable.ic_launcher;
                notif.flags = Notification.FLAG_AUTO_CANCEL;
                notif.when = System.currentTimeMillis();
                Intent notificationIntent = new Intent(context, TestLocatorActivity.class);
                notificationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                notificationIntent.putExtra("lat", String.valueOf(latitude));
                notificationIntent.putExtra("longitude", String.valueOf(longitude));
                notificationIntent.putExtra("accuracy", String.valueOf(loc.getAccuracy()));
                PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
                notif.setLatestEventInfo(context, "Location Found!", "Click to open.", contentIntent);
                nm.notify(0, notif);
            } else {
                SmsManager smsMan = SmsManager.getDefault();
                smsMan.sendTextMessage(who, null, "http://maps.google.com/maps?q=loc:"+latitude+","+longitude, null, null);
                smsMan.sendTextMessage(who, null, "Latitude: "+latitude+"\nLongitude: "+longitude, null, null);
            }
            locMan.removeUpdates(this);
            try {
                wl.release();
            } catch (Exception e){
                e.printStackTrace();
            }
            stopSelf();
        }

        public void onProviderDisabled(String provider){

        }

        public void onProviderEnabled(String provider) {
            //Log.i(tag, "GPS IS ON");
        }

        public void onStatusChanged(String provider, int status, Bundle extras){
            switch(status) {
                case LocationProvider.OUT_OF_SERVICE:
                case LocationProvider.TEMPORARILY_UNAVAILABLE:
                case LocationProvider.AVAILABLE:
                    break;
            }
        } };

    locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
    locMan.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, listener);

    return 2;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:29:16.333

我在这里可以看到的主要问题是您正在谈论`POST`但在您的 android 中`LocationService`您正在创建一个`HttpGet`对象：

```
HttpGet httppost = new HttpGet("http://.../serverFile.php"); 
```

然后从无处使用一个`httpost`变量作为`post`：

```
post.setHeader("json",json.toString());
post.getParams().setParameter("jsonpost",postjson); 
```

在 PHP 中，我不确定您想通过以下方式实现什么：

```
$_SERVER['HTTP_JSON']; 
```

因为我确定没有这样的索引。而是打电话

```
$_POST['jsonpost']; // <-- that is the parameter name from Your JAVA code... 
```

或者

```
$_GET['jsonpost']; // <-- that is the parameter name from Your JAVA code... 
```

它几乎看起来像 You COPY + PASTE the code from similar question here（**这应该是一个副本！**）：[Sending Data From Android To Server with JSON data](https://stackoverflow.com/questions/8317553/sending-data-from-android-to-server-with-json-data)。

**编辑：**好的，假设您的 android JAVA 代码正常并且您正在通过 GET 发送数据。然后你将不得不修复你的 PHP - 试试这个：

```
<?php
echo 'Hello, world!';

$json = $_GET['jsonpost']; // get the json you sent through GET...
$data = json_decode($json); // decode the json formatted string...

print_r($data); // print out the $data variable to see whether everything is OK...

$devid = $data->devid;
$longitude = $data->longitude;
$latitude = $data->latitude;

$con = mysql_connect("","","") or die('Could not connect: ' . mysql_error());    
mysql_select_db("a5234826_ul", $con);

echo "devid" +$devid;
echo "latitude" + $latitude;
echo "longitude" + $longitude; 

$sql = "INSERT INTO  `a5234826_ul`.`locations` (
    `devid`,
    `latitude`,
    `longitude` 
) VALUES (
    '$Devid',
    '$latitude',  
    '$longitude'
);";
if (!mysql_query($sql,$con)) {
    die('Error: ' . mysql_error());
}

mysql_close($con);
echo json_encode($variable); 
```

您应该继续`print_r($data);`查看数据是否到达以及 JSON 是否已解码，并查看它包含哪些属性。

**编辑 2 由于发布了 logcat：**您是否从 logcat 中读取了错误？太清楚了！！！程序员当然应该理解错误消息在说什么，并且应该了解他在做什么，而不仅仅是从某个地方复制+粘贴代码片段而不考虑它......在你的 manifest.xml 你需要添加一个权限 READ_PHONE_STATE -在此处阅读有关权限：http: [//developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)以及在此处向 manifest.xml 添加权限：http: [//developer.android.com/guide/topics/security/安全性.html#permissions](http://developer.android.com/guide/topics/security/security.html#permissions)。

# c# - 从 XElement 中读取包含与纯内容混合的元素的数据

> ID：10897937
> 
> 赞同：2
> 
> 时间：2012-06-05T13:10:21.427
> 
> 标签：c#, .net, xml, linq-to-xml, xelement

XElement 具有以下值：

```
<parent><child>text inside element</child>and plain content</parent> 
```

如何将其转换为包含：“元素内的文本和纯内容”的字符串。

**我已经尝试过什么？**

我厌倦了使用`xElement.Value`，但这将两个节点连接起来而没有在它们之间放置空格：“元素内的文本和纯内容”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:22:04.600

您要查找的文本存储在 XText 类型的节点中。因此，您可以像这样访问这些节点：

```
xElement.DescendantNodes()
        .OfType<XText>()
        .Select(t => t.Value) 
```

这会给你这个结果：

```
text inside element 
and plain content 
```

然后，您可以根据需要连接它们（例如使用`String.Join`）。

# osgi - 我的声明式服务激活器如何失败？

> ID：10897947
> 
> 赞同：0
> 
> 时间：2012-06-05T13:11:09.500
> 
> 标签：osgi, declarative-services

当我知道失败不可恢复时，在声明式服务的 activate() 方法中失败的最佳方法是什么？具体来说：我的服务可以通过带有元类型属性的 configadmin 进行配置。如果配置无效（例如格式错误的 URL），失败的最佳实践方法是什么？我目前的做法是抛出 IllegalArgumentException。有没有更好的办法？DS主机是否关注异常类型，还是所有异常都被同等对待？

4.2 规范简单地说“如果激活方法抛出异常，SCR 必须使用日志服务记录包含异常的错误消息（如果存在），并且组件配置未激活。” 这向我表明，我可以抛出任何异常，而哪一个并不重要。

我注意到 DS 会在某些情况下重试 activate 方法，例如如果其他依赖项之一发生更改。是否有任何机制可以告诉基础设施不要打扰，除非配置是固定的？还是我应该不担心，只是接受我的激活器会被多调用几次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:50:36.147

任何例外都可以。

我想你只是接受你的激活器可能会再次尝试。当配置固定时，可能随时发生。你可以禁用你的组件，但是你怎么知道什么时候重新启用它呢？

# android - 相机活动不会返回到它的父活动

> ID：10897957
> 
> 赞同：0
> 
> 时间：2012-06-05T13:11:54.370
> 
> 标签：android, android-intent, android-camera

我正在尝试打开 android 相机，当我按 OK 时，相机活动应该返回到父活动“我开始相机活动的那个”

但现在发生的是，当我按下 OK 时，相机活动仍保留在屏幕上，并且不会返回到父活动。

**代码**：

```
 private String retrievePath() {
    int []x = imgOpHlpr.getIDs();
    String s = imgOpHlpr.getImg_Path(x.length);
    return s;       
} 
```

**代码**：

```
private static final int RequestCode = 0;
OnClickListener btn_TakePictureListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        String imgPath = retrievePath();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, getImageUri(imgPath));
        startActivityForResult(intent, RequestCode);
    }
};
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    //super.onActivityResult(requestCode, resultCode, data);

    if (RequestCode == requestCode && resultCode == RESULT_OK) {
       //String s = data.getData().toString();
       //Toast.makeText(getBaseContext(), ""+s, Toast.LENGTH_SHORT).show();
        Toast.makeText(getBaseContext(), "picture is taken", Toast.LENGTH_SHORT).show();
    }           
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T13:20:24.357

模拟器不提供相机支持。请参阅[http://code.google.com/p/android/issues/detail?id=14545](http://code.google.com/p/android/issues/detail?id=14545)。所以检查设备。

查看

```
if (resultCode == RESULT_OK) {
            if (data.getExtras().get("data") != null) {
                Bitmap photo = Bitmap.createScaledBitmap((Bitmap) data.getExtras().get("data"), 90, 90, false);
               if(photo != null){
                   Log.d("Photo","photo not null");
} 
```

# excel - 以编程方式在 Excel 中选择其他工作表先例或依赖项

> ID：10897958
> 
> 赞同：6
> 
> 时间：2012-06-05T13:11:56.427
> 
> 标签：excel, vba

在 Excel `Ctrl`+ `[`or`]`中有时会直接切换到另一个工作表以显示该工作表中的先例或依赖项。

我希望以编程方式进行，因为我想获得选择单元格的先例（或依赖项）。

`Range.Dependents`还有`Range.Precedents`其他[问题](https://stackoverflow.com/q/5541342/256431)，但那里的解决方案不能解决额外的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-19T13:57:28.430

马克做得很好，但是这个宏完全没有去'同一张纸上的凹痕并且失败了，当有来自多张纸的'凹痕时，因为无法从多个工作表单元格中创建选择。

我个人需要所有这些功能来替换“Ctrl + [”和“Ctrl + ]”快速快捷功能，以便跳转到先例和依赖项。不幸的是，这些快捷键在国际键盘上完全无法使用，其中这些方括号隐藏在 AltGr（右 Alt）组合下，Excel 不允许 Ctrl+AltGr+8 和 Ctrl+AltGr+8 给出相同的结果，而且还有无法重新映射默认快捷方式。

所以我稍微改进了 Mark 的代码来解决这些问题，并从代码中删除了弹出消息，因为如果我不能选择所有的凹痕，我应该知道自己，但我希望该功能能够顺利运行，而无需单击全部确定时间。所以该函数只是跳转到工作表，该工作表在公式中首先链接。

我希望这对其他人也有用。

唯一仍然困扰我的是，虽然 Application.ScreenUpdating = False 避免在工作表和工作簿周围跳转，但箭头仍然不断闪烁。有什么办法可以避免这种情况？

```
Option Explicit

Private Sub GetOffSheetDents(ByVal doPrecedents As Boolean)
'Main function, calling for separate function to find links to all cells to one of the input cells. Works for finding precedents for a whole selection (group of cells)
'doPrecedents is TRUE, if we are searching for precedents and FALSE, if looking for dependents
Dim InputCell As Range
Dim results As Range
Dim r As Range
Dim sheet As Worksheet

Application.ScreenUpdating = False

For Each InputCell In Application.Intersect(ActiveSheet.UsedRange, Selection)
'Cycle to go over all initially selected cells. If only one cell selected, then happens only once.
    Set r = oneCellDependents(InputCell, doPrecedents)
    ' r is resulting cells from each iteration of input cell to the function.
    If Not r Is Nothing Then      'if there were precedents/dependents
        If sheet Is Nothing Then  'if this is the first time.
            Set sheet = r.Worksheet
            Include results, r
        ElseIf Not sheet Is r.Worksheet Then 'if new precedent/dependent is on another worksheet, don't add to selection (gets lost)
        Else
            Include results, r
        End If
    End If
Next
Application.ScreenUpdating = True

If results Is Nothing Then
    Beep
Else
    results.Worksheet.Activate
    results.Select
End If
End Sub

Sub GetOffSheetDependents()
'Function defines, if we are looking for Dependents (False) or Precedents (True)
GetOffSheetDents False

End Sub

Sub GetOffSheetPrecedents()
'Function defines, if we are looking for Dependents (False) or Precedents (True)
GetOffSheetDents True

End Sub

Private Function Include(ByRef ToUnion As Range, ByVal Value As Range) As Range
If ToUnion Is Nothing Then
    Set ToUnion = Value
    ElseIf Value.Worksheet Is ToUnion.Worksheet Then 'if new precedent/dependent is on the same worksheet, then add to selection
            'if new precedent/dependent is on another worksheet, don't add to selection (gets lost)
        Set ToUnion = Application.Union(ToUnion, Value)
End If
Set Include = ToUnion
End Function

Private Function oneCellDependents(ByVal inRange As Range, Optional doPrecedents As Boolean) As Range
'Function finds dependents for one of the selected cells. Happens only once, if initially only one cell selected.
Dim inAddress As String, returnSelection As Range
Dim i As Long, pCount As Long, qCount As Long
Application.ScreenUpdating = False
If inRange.Cells.Count <> 1 Then Error.Raise 13 'seems to check, that only one cell is handled, but does not seem to be necessary step.

'remember selection
Set returnSelection = Selection ' to keep initial selection for GetOffSheetDents function.
inAddress = fullAddress(inRange) ' takes address of starting cell what is analyzed.
pCount = 1

With inRange   'all functions apply to this initial cell.
    .ShowPrecedents
    .ShowDependents
    .NavigateArrow doPrecedents, 1 ' go to first precedent (if first argument is true)/dependent. But why required?
    Do Until fullAddress(ActiveCell) = inAddress
        .NavigateArrow doPrecedents, pCount 'go to first precedent, then second etc.
        If ActiveSheet.Name <> returnSelection.Parent.Name Then ' checks, if the precedent is NOT on the same sheet

            Do
                qCount = qCount + 1   'qCount follows external references, if arrow is external reference arrow.
                .NavigateArrow doPrecedents, pCount, qCount 'go to first exteranl precedent, then second etc.
                Include oneCellDependents, Selection
                On Error Resume Next
                .NavigateArrow doPrecedents, pCount, qCount + 1 'could remove this step and check for error before Include?
                If Err.Number <> 0 Then Exit Do
                On Error GoTo 0  ' not sure if this is used, since if there is error, then already Exit Do in previous step.
            Loop
            On Error GoTo 0 'not sure, if necessary, since just asked in loop.
        Else  ' if precedent IS ON the same sheet.
            Include oneCellDependents, Selection
        End If
        pCount = pCount + 1
        .NavigateArrow doPrecedents, pCount
    Loop
    .Parent.ClearArrows
End With

'return selection to where it was
With returnSelection
    .Parent.Activate
    .Select
End With

End Function

Private Function fullAddress(inRange As Range) As String
'Function takes a full address with sheet name

With inRange
    fullAddress = .Parent.Name & "!" & .Address
End With
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T13:11:56.677

经过一番谷歌搜索后，我发现它已在[2003](http://www.xtremevbtalk.com/printthread.php?t=126236)年解决。

但我使用了[这里](http://www.mrexcel.com/forum/showthread.php?t=297888)的代码。

问题是`Dependents`和`Precedents`是`Range`属性，不能引用多个工作表。

该解决方案用于`NavigateArrow`定位交叉表的“凹痕”。

这是我的代码：

```
Option Explicit

Private Sub GetOffSheetDents(ByVal doPrecedents As Boolean)

Dim c As Range
Dim results As Range
Dim r As Range
Dim sheet As Worksheet
Dim extra As Boolean

For Each c In Application.Intersect(ActiveSheet.UsedRange, Selection)
    Set r = oneCellDependents(c, doPrecedents)
    If Not r Is Nothing Then
        If r.Worksheet Is ActiveSheet Then
            ' skip it
        ElseIf sheet Is Nothing Then
            Set sheet = r.Worksheet
            Include results, r
        ElseIf Not sheet Is r.Worksheet Then
            If Not extra Then
                extra = True
                MsgBox "More than one external sheet in " & IIf(doPrecedents, "Precedents", "Dependents") & ". Only displaying first sheet."
            End If
        Else
            Include results, r
        End If
    End If
Next

If results Is Nothing Then
    Beep
Else
    results.Worksheet.Activate
    results.Select
End If
End Sub

Sub GetOffSheetDependents()

GetOffSheetDents False

End Sub

Sub GetOffSheetPrecedents()

GetOffSheetDents True

End Sub

Private Function Include(ByRef ToUnion As Range, ByVal Value As Range) As Range
If ToUnion Is Nothing Then
    Set ToUnion = Value
Else
    Set ToUnion = Application.Union(ToUnion, Value)
End If
Set Include = ToUnion
End Function

Private Function oneCellDependents(ByVal inRange As Range, Optional doPrecedents As Boolean) As Range

Dim inAddress As String, returnSelection As Range
Dim i As Long, pCount As Long, qCount As Long

If inRange.Cells.Count <> 1 Then Error.Raise 13

Rem remember selection
Set returnSelection = Selection
inAddress = fullAddress(inRange)

Application.ScreenUpdating = False
With inRange
    .ShowPrecedents
    .ShowDependents
    .NavigateArrow doPrecedents, 1
    Do Until fullAddress(ActiveCell) = inAddress
        pCount = pCount + 1
        .NavigateArrow doPrecedents, pCount
        If ActiveSheet.Name <> returnSelection.Parent.Name Then

            Do
                qCount = qCount + 1
                .NavigateArrow doPrecedents, pCount, qCount
                Include oneCellDependents, Selection
                On Error Resume Next
                .NavigateArrow doPrecedents, pCount, qCount + 1
                If Err.Number <> 0 Then _
                    Exit Do
                On Error GoTo 0
            Loop
            On Error GoTo 0
            .NavigateArrow doPrecedents, pCount + 1
        Else
            Include oneCellDependents, Selection
            .NavigateArrow doPrecedents, pCount + 1
        End If
    Loop
    .Parent.ClearArrows
End With

Rem return selection to where it was
With returnSelection
    .Parent.Activate
    .Select
End With
Application.ScreenUpdating = True

End Function

Private Function fullAddress(inRange As Range) As String
With inRange
    fullAddress = .Parent.Name & "!" & .Address
End With
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-09T18:50:14.527

我发现 kaidobor 的 Mark Hurd 代码版本正是我所需要的。我编写了一个包装器来记录所选单元格中的所有依赖项并将它们插入到新工作表中。我的代码只是调用了kaidobor的代码并记录了结果。

我的用例：我有一个复杂的电子表格（由其他人编写）需要清理。我想删除一些看起来不必要的工作表，但想知道在删除工作表之前我将在哪里破坏公式。这将创建一个索引，显示在其他工作表中引用的所有单元格。

```
Sub FindDependentsForThisSheet()
' Find all cells in the selection that have dependents on some other sheet
' Calls code by kaidobor
' January 9, 2017
Dim rCurrent As String, strNoDependents As String, strDependents As String, strCurrrentParent As String
Dim aDependents(1000, 4) As String ' Starting sheet, starting cell, referenced sheet, referenced cell
Dim intArrayRows As Long
strNoDependents = "No Dependents" & vbCrLf
strDependents = "Dependents" & vbCrLf
intArrayRows = 0
Application.ScreenUpdating = False

'Step through each cell in the current sheet (for each…)
For Each cell In Selection.Cells
    ' improvement: step through just the cells that are selected in case I know some are not worth bothering with
    Range(cell.Address).Select
    rCurrent = ActiveCell.Address
    strCurrrentParent = ActiveCell.Parent.Name
    'Run GetOffSheetDependents() for each cell
    GetOffSheetDependents
    'GetOffSheetPrecedents
    'When GetOffSheetDependents() is done, if the ActiveCell.Address is not changed,
    'If (rCurrent = ActiveCell.Address And strCurrrentParent = ActiveCell.Parent.Name) Then ' We do care about links on the current sheet
    If (strCurrrentParent = ActiveCell.Parent.Name) Then ' Do not care about links on the current sheet
        'then nothing
        strNoDependents = strNoDependents & ActiveCell.Parent.Name + " - " + ActiveCell.Address & vbCrLf
    Else
        ' Stuff the array
        aDependents(intArrayRows, 0) = strCurrrentParent
        aDependents(intArrayRows, 1) = rCurrent
        aDependents(intArrayRows, 2) = ActiveCell.Parent.Name
        aDependents(intArrayRows, 3) = ActiveCell.Address
        intArrayRows = intArrayRows + 1
        strDependents = strDependents + strCurrrentParent + "!" + rCurrent + " referenced in " + ActiveCell.Parent.Name + "!" + ActiveCell.Address & vbCrLf
        '1 record ActiveCell.Address + parent.
        '2 return to home sheet and
        Sheets(strCurrrentParent).Select
        '3 record the address of the active cell
    End If
    If intArrayRows > 999 Then
        MsgBox "Too many cells, aborting"
        Exit Sub
    End If
Next
'Debug.Print strDependents
'Debug.Print strNoDependents

' Store results in a new sheet
If intArrayRows > 0 Then
    varReturn = NewSheetandPaste(aDependents)
    MsgBox ("Finished looking for dependencies. Created sheet with results. Found this many: " & intArrayRows)
Else
    MsgBox ("Finished looking for dependencies, found none.")
End If
Application.ScreenUpdating = True
End Sub
' ************************************************************************************************

Function NewSheetandPaste(aPasteThis As Variant) '(strSheetName As String)
' Create new sheet and past strDependents
Dim strName As String, strStartSheetName As String, n As Long
'strName = strSheetName + "Dependents"
strStartSheetName = ActiveSheet.Name
strName = strStartSheetName + "Dependents"
Sheets.Add After:=ActiveSheet
ActiveSheet.Name = strName
'Sheets("Sheet4").Name = "Sheet1Dependents"
Range("A1").Value = "Dependents from " + strStartSheetName
'ActiveCell.FormulaR1C1 = "Dependents from Sheet1"
'Range("A2").Value = strPasteThis
Range("A2").Value = "Starting Sheet"
Range("B2").Value = "Starting Sheet Cell"
Range("C2").Value = "Dependent Sheet"
Range("D2").Value = "Dependent Sheet Cell"

Range("A3").Select
intLengthArray = UBound(aPasteThis) - LBound(aPasteThis) + 1
n = 0
'For n = 0 To intLengthArray
While aPasteThis(n, 0) <> ""
    ActiveCell.Value = aPasteThis(n, 0)
    ActiveCell.Offset(0, 1).Select
    ActiveCell.Value = aPasteThis(n, 1)
    ActiveCell.Offset(0, 1).Select
    ActiveCell.Value = aPasteThis(n, 2)
    ActiveCell.Offset(0, 1).Select
    ActiveCell.Value = aPasteThis(n, 3)
    ActiveCell.Offset(1, -3).Select
    n = n + 1
Wend

NewSheetandPaste = True
End Function 
```

# vim - cindent 在 vi m 中不工作

> ID：10897961
> 
> 赞同：0
> 
> 时间：2012-06-05T13:12:02.760
> 
> 标签：vim

我正在使用 vim6.3，但即使手动设置它们，`smartindent`也`cindent`根本无法正常工作。`autoindent`如果我手动设置它确实有效。我可以看到 vim 是`cindent`用`:version`. 甚至`filtype`插件缩进也打开了。

这有什么可能的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:55:01.780

通过以下方式将您的 vim 更新到 7.3（或更高版本）：

```
sudo apt-get update 
sudo apt-get install vim 
```

编写 ~/.vimrc 文件：

```
set cindent
set smartindent
set autoindent 
```

现在试试 vim，希望它会起作用。

# sql - Jaspersoft iReport 中的“汇总”组

> ID：10897962
> 
> 赞同：0
> 
> 时间：2012-06-05T13:12:03.730
> 
> 标签：sql, jasper-reports, ireport

我有一份损益表，目前有三个级别的分组：1.药房 2.客户 3.包装类型

我已设置报告以提示用户提供药房、客户和包装类型的值。详细信息带显示收入和利润等度量。为药房、客户或包装类型选择默认值会返回组中的所有值。

我想知道 - 如果用户为参数选择“使用默认值”，有什么方法可以告诉 iReport 汇总分组？现在，如果我选择了一家药店和一个客户，但使用默认包装类型，我仍然会为几种包装类型中的每一种获得一个详细信息带。我如何告诉 iReport 总结所有包装类型？或者，如果未指定客户，则对给定药房的所有客户求和？或者我可以在查询中这样做吗？我有一个 Oracle 数据库并且正在使用 iReport Professional 4.5.1。

谢谢，丽莎

编辑添加代码：

```
 SELECT
      FAC.FILL_MONTH AS FILL_MO,
      FAC.PHAR_CODE AS PHAR_CODE,
      FAC.FAC_ID AS FAC_ID,
      FAC.PACKTYPE_CODE AS PACKTYPE,
      SUM(FAC.TOT_RXCOUNT_NUM) AS RX_COUNT,
      SUM(FAC.TOT_REVENUE_AMT) AS REVENUE,
      SUM(FAC.TOT_COGS_AMT) AS COGS,
      SUM(FAC.TOT_MARGIN_AMT) AS MARGIN
 FROM
      MySchema.Table FAC
 WHERE
      FAC.FILL_MONTH BETWEEN $P{startdate} AND $P{enddate}
      AND $X{IN, FAC.PHAR_CODE, pharmacy}
      AND $X{IN, FAC.FAC_ID, facility}
      AND $X{IN, FAC.PACKTYPE_CODE, packtype}
 GROUP BY
      FAC.PHAR_CODE,
      FAC.FAC_ID,
      FAC.PACKTYPE_CODE,
      FAC.FILL_MONTH
 ORDER BY
      PHAR_CODE ASC,
      FAC_ID ASC,
      PACKTYPE ASC,
      FILL_MO ASC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T16:19:19.537

你有正确的 SQL 来获得你想要的原始数据。`PACKTYPE`但是在用户指定 no 的特殊情况下，您需要对其进行修改以强制（和其他字段）进行不同的分组`PACKTYPE`。

创建一个新参数`$P{PACKTYPE_SELECT_SQL}`。它的默认值直接基于您现有参数的值`$P{packtype}`。（这意味着`$P{packtype}`必须首先出现在 .jrxml 中。）将`$P{PACKTYPE_SELECT_SQL}`的默认值设置为如下所示：

```
$P{packtype}==null ? " 'All Package Types' " : " FAC.PACKTYPE_CODE " 
```

然后像这样修改SQL查询（只修改了一行，其余的只是为了上下文）：

```
SELECT
     FAC.FILL_MONTH AS FILL_MO,
     FAC.PHAR_CODE AS PHAR_CODE,
     FAC.FAC_ID AS FAC_ID,
     $P!{PACKTYPE_SELECT_SQL} AS PACKTYPE,
...
WHERE
     FAC.FILL_MONTH BETWEEN $P{startdate} AND $P{enddate}
     AND $X{IN, FAC.PHAR_CODE, pharmacy}
     AND $X{IN, FAC.FAC_ID, facility}
     AND $X{IN, FAC.PACKTYPE_CODE, packtype} 
```

在 where `$P{packtype}`is not null 的情况下，生成的 SQL 将与以前完全相同。但是在 where`$P{packtype}`为 null 的情况下，您现在将获得一个硬编码的字符串来代替 PACKTYPE_CODE。

大概您的报告正在分组`PACKTYPE`。因此，您应该能够保持报表中的布局和分组不变。

您可以想象一些变化，例如添加一个布尔输入控件来明确地让用户选择是否将 PACKTYPE 保留在报告中。但是这个基本想法应该可以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T13:19:09.503

我会尝试在查询中执行此操作。如果没有看到您的查询，很难给出具体信息，但我可以提供一些我的代码作为示例。在这个特定的 jasper 报告中，我根据用户指定的 PGM_NAME 和 USER_NAME 显示值。但是，指定这些参数是可选的。如果未指定参数，则默认为所有 PGM_NAME 和/或 USER_NAME 报告。在我的 ireport 查询中，WHERE 子句有以下几行：

```
WHERE   ($P{PGM_NAME} IS NULL OR job.pgm_name = $P{PGM_NAME})
AND     ($P{USER_NAME} IS NULL OR details.username = $P{USER_NAME}) 
```

这就像一个魅力。我希望这对您确定如何调整自己的查询有所帮助。如果您需要这方面的帮助，请在您的问题中发布查询本身。

# asp.net - 在 ASP .NET 4.0 主机上托管 .NET MVC 3 网站

> ID：10897964
> 
> 赞同：0
> 
> 时间：2011-08-19T05:13:37.333
> 
> 标签：asp.net, web-hosting

是否可以在托管服务上托管我的 .NET MVC 3 Razor 网站，该托管服务声明他们托管 ASP .NET 4.0 网站但未明确托管 .NET MVC 3？

如果是这样，我必须考虑哪些事情？例如，我需要在部署等中包含其他程序集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T12:00:52.787

是的，

您只需要了解他们是否部署了 MVC 3 DLL。如果他们没有，或者您不想检查，您可以简单地将它们包含在您的项目中。然后，当您发布应用程序时，所有必需的 MVC DLL 都将复制到您的 bin 目录中。

*   在 VS 中右键单击您的 MVC 项目
*   选择“包括可部署的依赖项”
*   选择 MVC 3 Razor 选项

这将创建一个 dll_deployable 文件夹，其中包含发布时要包含在项目中的所有 DLL。

# c# - 不从局部视图发布的强类型模型

> ID：10897971
> 
> 赞同：0
> 
> 时间：2012-06-05T13:12:36.600
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-partialview, strong-typing

我有一个由以下组件组成的 MVC3 页面：

***ProfileController*** - 包含所有操作并加载下面的所有视图

***/Profile/Index*** - 此操作方法创建一个 UserViewModel 实例，其中包含多个属性和嵌套集合，包括一个名为“PrefPrograms”的“PreferencePrograms”类型，其定义为：

```
public class PreferencePrograms : List<PreferenceProgram> 
```

“Index”操作方法填充 PrefPrograms 集合和 UserViewModel 的其余部分，并将该模型传递给强类型的“Index.cshtml”视图。

***Index.cshtml*** - 这是“UserViewModel”类型的强类型视图。它由多个局部视图组成。此页面中名为“Preferences.cshtml”的部分视图提供了 PrefPrograms 集合的格式化显示。Index.cshtml 的相关部分如下。

```
@model ProfilePreferenceCenterProto.Models.UserViewModel

@{ Html.RenderPartial("Preferences", Model); } 
```

***Preferences.cshtml*** - 这个强类型的局部视图由 Index.cshtml 使用 Html.RenderPartial（上图）加载。在 Preferences.cshtml 中，我有一个 Begin.AjaxForm() 方法，用于发布到“PreferenceSubmit”操作，输入提交按钮位于该局部视图的底部。在局部视图中，我调用一个 @Html.EditorFor() 助手来为“PrefPrograms”集合中的每个“PreferenceProgramModel”项加载一个编辑器模板。

***这是我的问题 - 所有项目都正确加载（包括组件的部分视图和编辑器），但是当我将 Preferences.cshtml 上的表单发布到“PreferencesSubmit”操作时，模型的值没有被传递（模型被实例化，但是值仅初始化 - 属性和集合值实际上并未传回控制器）。***

Preferences.cshtml 部分视图如下所示。

```
@model ProfilePreferenceCenterProto.Models.UserViewModel

<div id="accordian">
@using(Ajax.BeginForm("PreferencesSubmit", "Profile", new AjaxOptions{ UpdateTargetId = "accordian" })){

  <div id="accordion">

  <ul class="tabs">

  </ul>

  <div class="panes">
  <div> 
  @{
      List<string> AffiliateNames = new List<string>();
      foreach(ProfilePreferenceCenterProto.Models.PreferenceProgramModel list in Model.PrefPrograms)
      {
          AffiliateNames.Add(list.SubcategoryName);
      }

      IEnumerable<string> listNames = AffiliateNames.Distinct();
      int counter = 0;
  }

  @foreach (string AccordionTabName in listNames)
  {
     <h2>@AccordionTabName</h2>
      <div class="pane" @if (counter == 0){ <text>style="display:block;"</text> } >
      <table>
        <tr class="row">
            <th class="name">Subscription</th>
            <th class="icon">Email</th>            
            <th class="icon">SMS</th>
            <th class="icon">Facebook</th>
            <th class="icon">Mail</th>
            <th class="icon">Phone</th>
        </tr>

    @{ 
    counter++;
    var TabPrograms = (from l in Model.PrefPrograms
                       where l.SubcategoryName == @AccordionTabName
                       select l);
    }                              
    @Html.EditorFor(m => TabPrograms)                     
      </table>
      </div>
  }
  </div>

      </div>
    </div>
       <div align="center"><input type="submit" value="Save Preferences" /></div> 
```

}

***/Shared/EditorTemplates/PreferenceProgramModel.cshtml*** - “PreferenceProgramModel”项目的编辑器模板，定义如下：

```
@model ProfilePreferenceCenterProto.Models.PreferenceProgramModel

<tr class="row">
<td class="name">@Model.ListName</td>                
<td class="icon">
@if (Model.EmailEnabled)
{    
    <a id="@Model.EmailFilterID" href="#" onclick="ImageClick(@Html.IdFor(m => m.EmailStatus));"><img height="25" width="28" src="@Model.Email_Icon_NotSelected" /></a>
}
</td>
<td class="icon">
@if (Model.SMSEnabled)
{
    <a id="@Model.SMSFilterID" href="#"><img height="25" width="28" src="@Model.SMS_Icon_NotSelected" /></a>
}
</td>
<td class="icon">
@if (Model.FBEnabled)
{
    <a id="@Model.FBFilterID" href="#"><img height="25" width="28" src="@Model.FB_Icon_NotSelected" /></a>
}
</td>
<td class="icon">
@if (Model.MailEnabled)
{
    <a id="@Model.MailFilterID" href="#"><img height="25" width="28" src="@Model.Mail_Icon_NotSelected" /></a>
}
</td>
<td class="icon">
@if (Model.PhoneEnabled)
{
    <a id="@Model.PhoneFilterID" href="#"><img height="25" width="28" src="@Model.Phone_Icon_NotSelected" /></a>
}
</td>
</tr>  

@Html.HiddenFor(m => m.EmailStatus)
@Html.HiddenFor(m => m.SMSStatus)
@Html.HiddenFor(m => m.FBStatus)
@Html.HiddenFor(m => m.MailStatus)
@Html.HiddenFor(m => m.PhoneStatus)

<script type="text/javascript">
$(document).ready(function () {

    function ImageClick(Resource) {
        alert(Resource.attr("value"));
        if (Resource.attr("value") != 1) {
            Resource.val("1");
        }
        else {
            Resource.val("2");
        }
        alert(Resource.attr("value"));
    }

    if ("@Model.EmailEnabled" == "True") {
        $("#@Model.EmailFilterID").click(function () {

            ImageClick($("#@Html.IdFor(m => m.EmailStatus)"));
            return false;
        });
    }

    if ("@Model.SMSEnabled" == "True") {
        $("#@Model.SMSFilterID").click(function () {
            ImageClick($("#@Html.IdFor(m => m.SMSStatus)"));
            return false;
        });
    }

    if ("@Model.FBEnabled" == "True") {
        $("#@Model.FBFilterID").click(function () {
            ImageClick($("#@Html.IdFor(m => m.FBStatus)"));
            return false;
        });
    }

    if ("@Model.MailEnabled" == "True") {
        $("#@Model.MailFilterID").click(function () {
            ImageClick($("#@Html.IdFor(m => m.MailStatus)"));
            return false;
        });
    }

    if ("@Model.PhoneEnabled" == "True") {
        $("#@Model.PhoneFilterID").click(function () {
            ImageClick($("#@Html.IdFor(m => m.PhoneStatus)"));
            return false;
        });
    }

});
</script> 
```

PreferencesSubmit 控制器动作是用这个签名定义的：

```
public ActionResult PreferencesSubmit(Models.UserViewModel model) 
```

页面中呈现的表单标签如下：

```
<form action="/Profile/PreferencesSubmit" data-ajax="true" data-ajax-mode="replace" data-ajax-update="#accordian" id="form0" method="post"> 
```

一些渲染的隐藏字段如下所示：

```
<input data-val="true" data-val-number="The field EmailStatus must be a number." data-val-required="The EmailStatus field is required." id="TabPrograms_0__EmailStatus" name="TabPrograms[0].EmailStatus" type="hidden" value="0" />
<input data-val="true" data-val-number="The field SMSStatus must be a number." data-val-required="The SMSStatus field is required." id="TabPrograms_0__SMSStatus" name="TabPrograms[0].SMSStatus" type="hidden" value="0" />
<input data-val="true" data-val-number="The field FBStatus must be a number." data-val-required="The FBStatus field is required." id="TabPrograms_0__FBStatus" name="TabPrograms[0].FBStatus" type="hidden" value="0" />
<input data-val="true" data-val-number="The field MailStatus must be a number." data-val-required="The MailStatus field is required." id="TabPrograms_0__MailStatus" name="TabPrograms[0].MailStatus" type="hidden" value="0" />
<input data-val="true" data-val-number="The field PhoneStatus must be a number." data-val-required="The PhoneStatus field is required." id="TabPrograms_0__PhoneStatus" name="TabPrograms[0].PhoneStatus" type="hidden" value="0" /> 
```

我已验证 ModelState.IsValid 在调用 PreferencesSubmit 时为真，但模型本身不包含页面中的实际值。***如何在提交时将我的强类型模型值从部分视图传递回 Action 方法？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:24:16.517

从表单提交的值根据模型的属性名称和 HTML 中的字段名称绑定到模型的属性。在您的代码中：

```
var TabPrograms = (from l in Model.PrefPrograms
                   where l.SubcategoryName == @AccordionTabName
                   select l);
}                              
@Html.EditorFor(m => TabPrograms) 
```

HtmlHelper 不知道 UserViewModel 中的属性名称是什么。它采用“TabPrograms”局部变量名称来生成 HTML 中的字段名称，例如：

```
<input name="TabPrograms[0].EmailStatus" data-val="true" data-val-number="The field EmailStatus must be a number." data-val-required="The EmailStatus field is required." id="TabPrograms_0__EmailStatus"  type="hidden" value="0" /> 
```

因此 MVC 将尝试将上面字段中的值绑定到 UserViewModel 中名为“TabPrograms”的属性（它应该是 PreferenceProgramModel 对象的集合）。UserViewModel 类中是否有“TabPrograms”属性？如果没有，您应该创建它，这些字段中的数据将绑定到它。另一个更好的解决方案是使用“PrefPrograms”局部变量名而不是“TabPrograms”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T21:46:09.273

我现在已经解决了这个问题，但最终不得不添加几个隐藏字段并通过在将数据发布到我的接收操作方法后回调我的数据源来重建模型。

我确实在我的 Preferences.cshtml 视图中遇到了另一个问题，因为我试图解析我的集合以便在界面中单独分组的区域中显示特定的集合项。@Html.EditorFor 辅助方法导致自动生成的表单 ID 相互踩踏，因为我从特定循环多次调用集合上的 @Html.EditorFor。我可以通过从 Html.EditorFor 切换到 Html.RenderPartial 并使用 Steve Sanderson 的 BeginCollectionItem 助手来解决这个问题，如下所述：

[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)

如果您有任何问题或想看看我是如何做到这一点的，请随时直接与我联系。

非常感谢你的帮助！

# sql - 如何将文本附加到备注字段？

> ID：10897973
> 
> 赞同：0
> 
> 时间：2012-06-05T13:12:39.097
> 
> 标签：sql, type-conversion, advantage-database-server

我正在使用 Advantage Database Server 9.10，并且我想将文本附加到备注字段。

我试过这个方法

```
UPDATE 
  myTable 
SET 
  memo =   cast(memo as SQL_VARCHAR(max)) 
         + cast(' Appended string' as SQL_VARCHAR(max)) 
WHERE 
  pk = '80' 
```

但它不起作用，

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:22:12.087

我认为你可以更简单地写成：

```
UPDATE 
  myTable 
SET 
  memo = memo + ' Appended string' 
WHERE 
  pk = '80' 
```

如果该`memo`字段可能为 NULL 并且您不希望结果为 NULL，则可以执行以下操作：

```
...
SET
  memo = ifnull( memo, '' ) + ' Appended string'
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T15:52:21.633

ADS中没有`VARCHAR(MAX)`数据类型，但您可以强制转换为`SQL_VARCHAR`或`SQL_CHAR`替代。

正确的语法：

```
UPDATE
  myTable 
SET 
   memo =   cast(memo as SQL_VARCHAR) 
          + cast(' Appended string' as SQL_VARCHAR) 
WHERE 
   pk = '80' 
```

您可以在广告文档中找到 CAST 和 CONVERT 的有效数据类型列表：

[http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_miscellaneous_functions.htm](http://devzone.advantagedatabase.com/dz/webhelp/Advantage10.1/master_miscellaneous_functions.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T03:51:03.347

这对我有用，你只需要确保你允许足够的字符 `VARCHAR()`：

```
UPDATE 
   myTable 
SET 
   memo = CONVERT(VARCHAR(8000),memo) + ' Appended String'
FROM 
   myTable
WHERE 
   pk = '80' 
```

我添加了`FROM myTable`因为在我的项目中我还必须添加`LEFT JOIN`几个表。

# mysql - MySQL连接插入时的相同值

> ID：10897990
> 
> 赞同：1
> 
> 时间：2012-06-05T13:13:41.373
> 
> 标签：mysql, insert

鉴于这些表：

```
create table country
(
    country_id integer     primary key auto_increment,
    name       varchar(16) unique not null
);
insert into country(name) values
    ('USA'),
    ('Canada');

create table network
(
    network_id integer primary key auto_increment,
    name       varchar(32) not null,
    country_id integer references country(country_id)
        on cascade update
        on delete restrict
); 
```

我想执行`insert into network(country_id, name) values`where`name`是一个值列表，但`country_id`对于每一行都是相同的，子查询的结果类似于`select country_id from country where name = 'Canada'`. 我想在一次插入中完成这一切，而不是在插入之后进行更新。我认为它需要一个`join`，但我不确定。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:21:51.953

```
INSERT INTO network
    (country_id, name) 
SELECT
    c.country_id, n.network_name  
FROM
    ( SELECT country_id
      FROM country
      WHERE name = 'Canada'
    ) AS c
  CROSS JOIN
    ( SELECT 'name1' AS network_name UNION ALL
      SELECT 'name2' UNION ALL
      SELECT 'name3' UNION ALL
      ...
      SELECT 'nameN'
    ) AS n ; 
```

* * *

Sidekick：不要**在**MySQL 中内联定义外键，它们会被**忽略**：

```
create table network
(
    network_id integer primary key auto_increment,      --- PK fine, not ignored
    name       varchar(32) not null,
    country_id integer references country(country_id)   --- this FK is ignored
        on cascade update
        on delete restrict
); 
```

在列列表之后分别定义它们。我更喜欢在列之后定义主键约束：

```
CREATE TABLE network
(
    network_id  INTEGER      NOT NULL  AUTO_INCREMENT,
    name        VARCHAR(32)  NOT NULL,
    country_id  INTEGER      NULL,

    PRIMARY KEY (network_id),

    FOREIGN KEY (country_id)                --- FK not ignored
      REFERENCES country (country_id) 
        ON CASCADE UPDATE
        ON DELETE RESTRICT
); 
```

# iphone - Zip Kit 与 Xcode 4.3 的集成

> ID：10897991
> 
> 赞同：1
> 
> 时间：2012-06-05T13:13:42.600
> 
> 标签：iphone, objective-c, ios, xcode4.3

为此，我试图在我的 iOS 应用程序中使用 zip/unzip 功能，我从博客链接中找到了一个库 - [https://bitbucket.org/kolpanic/zipkit/wiki/UsingZipKit](https://bitbucket.org/kolpanic/zipkit/wiki/UsingZipKit)。

我正在使用 Xcode 4.3 并出现以下错误

```
ZKDefs.h, ZKFileArchive.h No such file or directory 
```

我已按照所有说明进行操作，但仍然出现此错误。有人为 Xcode 4.3 iOS 5 尝试过这个库吗？可能是由于标题路径而导致此错误，但我无法解决此问题。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:23:10.587

我找到了答案。我正在使用 shell 命令并尝试通过它进行压缩/解压缩。它在模拟器上对我有用。

例如
system("zip newfile.zip oldfile.rtf");

# cocoa - 隐藏 NSScrollView 的滚动条

> ID：10897995
> 
> 赞同：0
> 
> 时间：2012-06-05T13:13:48.190
> 
> 标签：cocoa, nsscrollview

好吧，我被难住了。我的窗口中有几个可滚动的视图、两个 NSTableView 和一个 NSTextView。我想让滚动条在不使用时隐藏，并使用 Xcode 中 IB 中的 NSScrollView 设置来做到这一点。对于 NSTextView，它可以工作，但对于 NSTableView，滚动条不会隐藏，而且滚动条也更宽。

所有三个 NSScrollView 的滚动条设置完全相同。

我在这里错过了什么，还有另一个秘密设置吗？

（狮子，Xcode 4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:17:11.847

问题是它`NSScrollView`与旁边的视图重叠了几个像素。我在 Interface Builder 中稍微移动了它们，现在一切正常。

# delphi - Gethomepath 在 iOS 5 / OSxLion 上不起作用

> ID：10897996
> 
> 赞同：29
> 
> 时间：2012-06-05T13:14:04.587
> 
> 标签：delphi, osx-lion, firemonkey

每当我使用 Delphi 的 Gethomepath 函数时，我都会不断收到 Shell Script Invocation Error。

此功能是否已被更新的功能取代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:18:19.517

我终于找到了解决方法：blogs.embarcadero.com/ao/2011/10/04/39144#comment-7998

所以“S := ExtractFilePath(paramstr(0)); S := Copy(S, 1, length(S) - 14);” 完成工作。

请注意，S 的长度取决于您的应用程序标题。

# android - 在 android 中连接到 .wsdl Web 服务

> ID：10897997
> 
> 赞同：0
> 
> 时间：2012-06-05T13:14:07.077
> 
> 标签：android, web-services, ksoap

我是 android 新手，我正在开发一个连接到**wsdl** Web 服务的应用程序，

我尝试了许多教程，但它们都有点令人困惑，最终我得到了错误。我使用 J2ME 轻松做到了，但我发现使用 android 很难。我尝试使用**ksoap**，但最终出现如下错误：

```
06-05 12:34:42.634: W/System.err(387): 
SoapFault - faultcode: 'S:Client' faultstring:'Cannot find dispatch method for 
{http://mobile.ws.web.bla.bla.com}
login' faultactor: 'null' detail: null 
```

谁能推荐一些有用的教程？

我会很感激的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T09:41:43.863

试试这个链接[在 Eclipse 中创建基于 Java 的 Web 服务，](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)它将帮助您创建基于 Java 的 Web 服务，如果您有问题可以写信给我。

# c++ - 我无法理解 Webkit 中的 deleteOwnedPtr 函数

> ID：10897998
> 
> 赞同：2
> 
> 时间：2012-06-05T13:14:07.143
> 
> 标签：c++, webkit

在 Webkit 中找到了这个函数

```
template<typename T> inline void deleteOwnedPtr(T* ptr)
{
    typedef char known[sizeof(T) ? 1 : -1];
    if(sizeof(known))
        delete ptr;
} 
```

为什么他们不使用

```
if (sizeof(T))
    delete ptr; 
```

这是什么意思

```
char known[-1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:28:30.983

在 webkit-dev 邮件列表中找到了解释。如果有人试图删除不完整的类型，它会引发编译器错误。

[https://lists.webkit.org/pipermail/webkit-dev/2010-November/015051.html](https://lists.webkit.org/pipermail/webkit-dev/2010-November/015051.html)

> 如果我们删除一个指针并且对象的类型不完整，我们会得到未定义的行为。相反，如果对象的类型不完整，则此代码会导致编译失败。对数组大小使用负数是一种保证我们得到编译错误的方法。