# StackOverflow 问答 10571000-10571999

# java - Java小程序：无名按钮的动作监听器

> ID：10571000
> 
> 赞同：1
> 
> 时间：2012-05-13T10:27:19.267
> 
> 标签：java, swing, applet, jbutton, actionlistener

我有一个代表图片的 JButtons HashMap。

`this.nahledy.put(s.getName(), new JButton());`

```
this.nahledy.get(s.getName()).addActionListener(); 
```

但我不知道如何告诉 actionlistener 按下了哪个按钮，因为 e.getActioncommand() 什么都没有，并且当用户按下按钮时 s.getName() 已经改变，所以我也不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:48:28.553

它并不完美，但也许你可以使用这样的东西

```
public void actionPerformed(ActionEvent e) {
   JButton source = (JButton)e.getSource();
   Set<String> keys = nahledy.keySet();

   for(String key : keys) {
      if(nahledy.get(key).equals(source)) {
         // do something with your button
      }
   }
} 
```

通过这种方式，您可以找出用于此按钮的 s.getName() 的值。

# php - Mysqli 连接给出错误访问被拒绝用户''@'localhost' 到数据库'mydb'

> ID：10571005
> 
> 赞同：0
> 
> 时间：2012-05-13T10:28:55.617
> 
> 标签：php, mysqli

我正在尝试编写一个mysql类...

```
enter code here
class ASQL
{

public $baglanti;

   public function __construct()
{
    $host = "localhost";
    $user = "root";
    $password = "";
    $db = "mydb";

    $this->baglanti = new mysqli($host, $user, $password)
            or die('Could not connect to the database server' . mysqli_connect_error());

    $this->baglanti -> connect();

    if(!$this->baglanti -> select_db($db)){
        echo "Check the DB name!";
        echo "<br>";
        $this->baglanti->error;
        echo "<br>";
    }

}

public function Q( $query )
{
    if ($stmt = $this -> baglanti -> prepare($query))
    {
        $stmt -> execute();
        $result = $stmt -> get_result();
        while ($myrow = $result -> fetch_assoc())
        {
            var_dump($myrow);
        }
    }
    else
    {
        var_dump($this -> baglanti);
    }

}

public function __destruct()
{
    $this -> baglanti -> close();
}

}

$vt = new ASQL;
$vt -> Q("SELECT * FROM mytable");
?> 
```

这段代码给了我一个错误

```
Access denied for user ''@'localhost' to database 'mydb' 
```

我试图删除 select_db() 部分并将数据库名称添加到 __construct 但我得到了一个不同的错误：

```
No database selected 
```

我尝试了与此帐户的程序连接，它工作正常。

顺便说一句，您可以看到第一个错误告诉我正在尝试使用空白用户名连接...

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:52:28.247

删除行 $this->baglanti->connect(); 并假设您的数据库凭据是正确的，一切都应该正常工作。

方法 mysqli::connect() 甚至没有在[文档](http://de2.php.net/mysqli)中提到，并且已经混淆了其他人（[a-bug-in-mysqli-connect-method](https://stackoverflow.com/questions/7924088/a-bug-in-mysqli-connect-method)）

# cocoa-touch - GCDAsyncUdpSocket 通过 Internet 进行的 UDP 通信

> ID：10571008
> 
> 赞同：2
> 
> 时间：2012-05-13T10:29:03.513
> 
> 标签：cocoa-touch, ios5, udp, cocoaasyncsocket, gcdasyncsocket

我在互联网上使用 GCDAsyncUdpSocket 时遇到问题。当我在本地计算机上进行测试时，一切正常。

我尝试在使用 3G 密钥连接到互联网的计算机和通过 wifi 连接的 Ipod 之间发送 UDP 消息。不幸的是，消息没有被传输。我尝试使用 GCDAsyncUdpSocket 的示例进行相同的测试：UdpEchoClient 和 UdpEchoServer，但它也无法正常工作。

要知道我的电脑的地址 IP 用 3G 密钥，我查看了系统偏好设置 -> 网络，我还查看了[http://whatismyipaddress.com/](http://whatismyipaddress.com/)，我看到地址不同。两者都不起作用。

我通过 wifi 连接的 Ipod 在 NAT/防火墙后面，但根据这个网站：[https](https://www.gotroot.com/blogpost4-Why-your-should-never-forward-UDP-out-of-your-firewall) ://www.gotroot.com/blogpost4-Why-your-should-never-forward-UDP-out-of-your-firewall它应该不是问题。

是否可以在不打开任何端口的情况下在 2 个设备之间发送消息？为什么我的3G电脑上有两个不同的IP地址？

# php - 一个内衬类功能，做还是不做？

> ID：10571009
> 
> 赞同：2
> 
> 时间：2012-05-13T10:29:09.207
> 
> 标签：php, pdo

使用单行功能而不是多行功能有什么害处吗？例如，我为 PDO 数据库连接编写了一个类文件。我为它编写的所有函数都是一行行的。我还没有遇到任何错误，但是如果有滞后之类的，它们会突然出现吗？

以下是其中的一些功能。

```
public function getObject($query, $object) {
  return $this->db->prepare("$query")->execute()->fetch(PDO::FETCH_OBJ)->$object;
}

public function getArray($query) {
  return $this->db->prepare("$query")->execute()->fetchAll(PDO::FETCH_NUM);
}

public function insertArray($query, $array) {
  return $this->db->prepare("$query")->execute($array);
} 
```

这最终会遇到问题吗？还是他们一次被称为一个部分，就好像他们在自己的线路上一样？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T10:55:19.867

像这样在一行中使用链式方法

```
return $this->db->prepare("$query")->execute()->fetch(PDO::FETCH_OBJ)->$object; 
```

就是[Robert Martin在](https://en.wikipedia.org/wiki/Robert_Cecil_Martin)[Clean Code (pg 98/99)](http://books.google.de/books/about/Clean_Code.html?id=dwSfGQAACAAJ&redir_esc=y)中所说的“Train Wrecks” 。它很难阅读并且*“通常被认为是草率”*，应该避免阅读以提高可读性

```
$statement = $this->db->prepare("$query");
$statement->execute();
$result = $statement->fetch(PDO::FETCH_OBJ);
return $result->$object; 
```

请注意，我更正了上面代码片段中的代码，因为你的单行代码**不起作用**，因为[`execute`返回一个 boolean](http://php.net/manual/de/pdostatement.execute.php)，所以你不能调用`fetch`它：

> `bool PDOStatement::execute ([ array $input_parameters ] )`

换句话说，无论如何你都不能把它写成一行语句。

另请注意，方法链接通常违反[Demeter 定律，该定律](https://en.wikipedia.org/wiki/Law_of_Demeter)指出

> 对象 O 的方法 M 只能调用以下几种对象的方法：
> 
> *   O本身
> *   M的参数
> *   在 M 中创建/实例化的任何对象
> *   O 的直接组件对象
> *   一个全局变量，可由 O 访问，在 M 的范围内

不遵循 LoD 通常会导致您的单元测试中出现 Mockfest，并使您的应用程序紧密耦合到比必要的更多的类，这反过来又会损害可重用性并增加更改所需的时间（以及其他事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:32:21.170

命令式代码将始终按预期顺序调用。没有什么可担心的，除非代码是否可读。如果该行非常长，您可能希望将其包装成多行，但您展示的示例对我来说看起来不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T10:34:03.247

如果与数据库的连接由于某种原因失败，则可能导致 FATAL_ERROR，因为其中一个对象将返回 false。

# spring - 从早上开始，我就陷入了以下问题。在一个地方同样的事情正在工作，第二个地方它不工作是不显示错误。我检查了这个问题被问了很多次，我参考了所有的问题和解决方案，但问题仍然是一样的。按照我在控制器中使用的代码。 @RequestMapping(method = RequestMethod.POST) public String findRide(@Mo 问问题 问问题 2012-05-13T10:29:19.560 315 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 从早上开始，我就陷入了以下问题。在一个地方同样的事情正在工作，第二个地方它不工作是不显示错误。我检查了这个问题被问了很多次，我参考了所有的问题和解决方案，但问题仍然是一样的。按照我在控制器中使用的代码。 @RequestMapping(method = RequestMethod.POST) public String findRide(@ModelAttribute("postAd") PostAdRR user,ModelMap model,@Valid PostAdRR postAd, BindingResult result,HttpSession session,HttpServletRequest request) { if (result.hasErrors()) { System.out.println(result.toString()); return "postAd"; } 即使它进入错误块并打印 SOP 行。 但它没有显示在表格上。 <form:form method="POST" commandname="postAd" enctype="multipart/form-data"><form:errors path="contactName" cssclass="Err">我的域类（PostAdRR）代码是 @NotEmpty(message = "You must provide Title.") private String title =null; 并且相同的代码正在其他地方工作请提出一些几乎我尝试了所有组合的东西。 java应用程序中的Flash游戏 我想把我用 CS.5 制作的一个 Flash 游戏（它被导出到一个 .swf）放到一个 java 应用程序中。通过研究，我发现了一些方法可能是使用嵌入式网络浏览器或某种 Flash 播放器： 将 .swf 文件嵌入到我的 Jframe 在 Java 应用程序中嵌入 Web 浏览器 但这是最好的方法吗？它会保持交互性（即游戏）吗？如果嵌入式 Web 浏览器显示 back/front/url/etc，它也将完全适合。按钮然后我不能使用它 那么最好的方法是什么？java 应用程序中的 Flash 播放器是否会保持交互性（游戏的工作方式与在 Web 浏览器或 Flash 播放器应用程序中的工作方式相同）？ springhibernatespring-mvc 4 3 回答 3 This answer is useful 1 我认为问题出在您的控制器功能签名中。您正在验证其他对象，并且您的模型属性是另一个对象。这不是验证对象并在表单上显示错误的正确方法。 您的方法签名应如下所示。 public String findRide(@Valid @ModelAttribute("postAd") PostAdRR user,ModelMap model, BindingResult result,HttpSession session,HttpServletRequest request) 那就是现在您将同一个对象绑定到您正在验证的视图。 希望对您有所帮助。 干杯。 于 2012-05-14T05:49:32.147 回答 This answer is useful 0 我有点想知道为什么你的例子中的名字不匹配。 一方面是：另一方面contactName 是<form:errors path="contactName" cssclass="Err">：title 愿这就是原因。 如果这不起作用，请尝试<form:errors path="*" cssclass="Err">（在 from 范围内）显示所有错误消息。该测试的结果有望帮助您确定问题是在视图中还是在控制器中 于 2012-05-13T12:28:29.863 回答 This answer is useful 0 您可以尝试@NotNull与@NotEmpty. 也可以@Valid在您的模型属性之前尝试您的控制器。这些只是猜测，因为您告诉其他页面正在工作。 于 2012-05-14T05:45:13.443 回答 Related 2 java - jtable中整行的删除线 1 php - PHP 会话不可用 1 android - 如何让onDraw绘图更流畅 2 javascript - setInterval javascript 似乎反应不佳 1 android - 使用内置 textAppearanceLarge 时，包装内容与填充父级是否会影响应应用的文本大小 1 c - 数学库是静态链接的吗？ 1 json - jQuery ajax 成功回调未触发 1 wix - 有没有办法在不中止安装的情况下检查 CustomAction 失败？ 1 xml - BizTalk 2009 的 HL7 消息中的新行问题 4 biztalk - 如何在运行时动态选择管道中的 XSD？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</form:errors></form:errors></form:errors></form:form>

> ID：10571012
> 
> 赞同：0
> 
> 时间：
> 
> 标签：spring, hibernate, spring-mvc

从早上开始，我就陷入了以下问题。在一个地方同样的事情正在工作，第二个地方它不工作是不显示错误。我检查了这个问题被问了很多次，我参考了所有的问题和解决方案，但问题仍然是一样的。按照我在控制器中使用的代码。

```
@RequestMapping(method = RequestMethod.POST)
    public String findRide(@ModelAttribute("postAd") PostAdRR user,ModelMap model,@Valid PostAdRR postAd,
    BindingResult result,HttpSession session,HttpServletRequest request) {
    if (result.hasErrors()) {
        System.out.println(result.toString());

            return "postAd";
     } 
```

即使它进入错误块并打印 SOP 行。

但它没有显示在表格上。

```
 <form:form method="POST" commandName="postAd" enctype="multipart/form-data" >
     <form:errors path="contactName"  cssClass="Err"/> 
```

我的域类（**PostAdRR**）代码是

```
@NotEmpty(message = "You must provide Title.")
    private String title =null; 
```

并且相同的代码正在其他地方工作请提出一些几乎我尝试了所有组合的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:49:32.147

我认为问题出在您的控制器功能签名中。您正在验证其他对象，并且您的模型属性是另一个对象。这不是验证对象并在表单上显示错误的正确方法。

您的方法签名应如下所示。

```
public String findRide(@Valid @ModelAttribute("postAd") PostAdRR user,ModelMap model, BindingResult result,HttpSession session,HttpServletRequest request) 
```

那就是现在您将同一个对象绑定到您正在验证的视图。

希望对您有所帮助。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:28:29.863

我有点想知道为什么你的例子中的名字不匹配。

一方面是：另一方面`contactName` 是`<form:errors path="contactName" cssClass="Err"/>`：`title`

愿这就是原因。

* * *

如果这不起作用，请尝试`<form:errors path="*" cssClass="Err"/>`（在 from 范围内）显示所有错误消息。该测试的结果有望帮助您确定问题是在视图中还是在控制器中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T05:45:13.443

您可以尝试`@NotNull`与`@NotEmpty`. 也可以`@Valid`在您的模型属性之前尝试您的控制器。这些只是猜测，因为您告诉其他页面正在工作。

# unicode - Unicode 通用类别中的 GC=Mark 和 GC=Punctuation 有什么区别？

> ID：10571013
> 
> 赞同：3
> 
> 时间：2012-05-13T10:29:36.773
> 
> 标签：unicode, symbols, punctuation, character-properties

我无法理解一些概念。在 Unicode 规范中，有一个名为[*general category*](http://unicode.org/reports/tr44/#General_Category_Values)的属性。

好的，我了解字母（通常的字符；`GC=L`）、数字（如数字 0-9 和其他具有数值的字符；`GC=N`）和分隔符（分隔符；`GC=Z`）是什么。但是很难区分符号 ( `GC=S`)、标点符号 ( `GC=P`) 和标记 ( `GC=M`)。

我查找了它们的列表，但找不到概念上的差异。而且这份文件对我帮助不大。所有这些有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:44:01.317

标记不是独立的字符，而是应用于另一个字符。非间距标记显示在目标字符上，间距标记显示在目标字符上，封闭标记显示在目标字符周围。例如，这是一个盒子中的 a（字符“a”与封闭的方形字符组合）：a⃞</p>

关于标点符号与符号：正如您链接的文本所解释的那样，某些极端情况的分类相当随意，但原则上的区别在于标点符号用于“组织和分隔文本单元”（即标记句子的结尾，分隔不同的句子的一部分，将枚举的元素分开等）和符号“代表概念”（例如单位或数学符号）。

# xmpp - 持久性在 XMPP 中是如何工作的？

> ID：10571014
> 
> 赞同：1
> 
> 时间：2012-05-13T10:29:53.370
> 
> 标签：xmpp, amqp

我试图了解 AMQP 和 XMPP 之间的区别，除此之外，我真的不明白 XMPP 是否像队列一样工作。当您向各种客户端发送消息时，如果其中一个客户端出现故障会发生什么情况？服务器将消息排入队列，直到客户端再次启动，或者它是如何工作的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:22:58.093

当 JID 离线时，如何处理消息和 iq 取决于 XMPP 服务器实现。[RFC 3921 第 11.1 节](http://xmpp.org/rfcs/rfc3921.html#rules)：

> 否则，如果 JID 是表单并且没有与用户关联的可用资源，则如何处理节取决于节类型：
> 
> ...
> 
> 对于消息节，服务器可以选择代表用户存储节并在用户下次可用时将其传送，或者通过其他方式（例如，到用户的电子邮件帐户）将消息转发给用户。但是，如果未启用离线消息存储或消息转发，则服务器必须向发送者返回一个节错误。（注意：离线消息存储和消息转发在 XMPP 中没有定义，因为它们严格来说是实现和服务供应的问题。）
> 
> 对于 IQ 节，服务器本身必须代表用户回复 IQ 结果或 IQ 错误。具体来说，如果限定名称空间的语义定义了服务器可以提供的回复，则服务器必须代表用户回复该节；如果不是，服务器必须回复一个节错误。

# java - java应用程序中的Flash游戏

> ID：10571016
> 
> 赞同：0
> 
> 时间：2012-05-13T10:30:06.660
> 
> 标签：java, flash, flash-cs5.5

我想把我用 CS.5 制作的一个 Flash 游戏（它被导出到一个 .swf）放到一个 java 应用程序中。通过研究，我发现了一些方法可能是使用嵌入式网络浏览器或某种 Flash 播放器：

[将 .swf 文件嵌入到我的 Jframe](https://stackoverflow.com/questions/5275174/embed-swf-file-to-my-jframe)
[在 Java 应用程序中嵌入 Web 浏览器](https://stackoverflow.com/questions/943927/embed-a-web-browser-within-a-java-application)

但这是最好的方法吗？它会保持交互性（即游戏）吗？如果嵌入式 Web 浏览器显示 back/front/url/etc，它也将完全适合。按钮然后我不能使用它

那么最好的方法是什么？Java 应用程序中的 Flash 播放器是否会保持交互性（游戏的工作方式与在 Web 浏览器或 Flash 播放器应用程序中的工作方式相同）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:57:28.353

您可以使用 swf COM API ExternalInterface.call() 与 swf 应用程序进行通信。

但它只支持动作脚本 3 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:08:00.220

```
 public void callFunction( String function, String params )
    {
        if ( !created )
            return;
        String request = "<invoke name=\""
                + function
                + "\"><arguments><string>"
                + params
                + "</string></arguments></invoke>";
        Variant[] args = new Variant[1];
        args[0] = new Variant( request );
        flashObject.invokeNoReply( DISPID_CALLFUNCTION, args );
} 
```

这是一个 swt swf 调用函数的实现。

你可以实现一个swf容器，很简单。JNative、JNA 等一些 JNI jar 可以帮助您。

我实现了一个win32库swt-win32-extension.jar，它包含一个自定义的swf容器，但是swing不能使用它。

# sql - 即使没有数据也显示表中的数据！！甲骨文

> ID：10571025
> 
> 赞同：1
> 
> 时间：2012-05-13T10:32:08.987
> 
> 标签：sql, oracle11g

我有一个查询，显示基于日期收到的消息数。例如：

```
1 | 1-May-2012 
3 | 3-May-2012 
4 | 6-May-2012 
7 | 7-May-2012 
9 | 9-May-2012 
5 | 10-May-2012 
1 | 12-May-2012 
```

如您所见，在某些日期没有收到任何消息。我想要的是它应该显示所有日期，如果没有收到消息，它应该显示 0 像这样

```
1 | 1-May-2012
0 | 2-May-2012
3 | 3-May-2012
0 | 4-May-2012
0 | 5-May-2012
4 | 6-May-2012
7 | 7-May-2012
0 | 8-May-2012
9 | 9-May-2012
5 | 10-May-2012
0 | 11-May-2012
1 | 12-May-2012 
```

当表中没有行时，如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:28:11.447

首先，听起来您的应用程序将从日历表中受益。日历表是日期列表和有关日期的信息。

其次，您可以在不使用临时表的情况下执行此操作。这是方法：

```
with constants as (select min(thedate>) as firstdate from <table>)
     dates as (select( <firstdate> + rownum - 1) as thedate
               from (select rownum
                     from <table> cross join constants
                     where rownum < sysdate - <firstdate> + 1
                    ) seq
              )
select dates.thedate, count(t.date)
from dates left outer join
     <table> t
     on t.date = dates.thedate
group by dates.thedate 
```

这是想法。别名常量记录表中最早的日期。别名日期然后创建日期序列。内部子查询使用 rownum 计算整数序列，然后将它们添加到第一个日期。请注意，这假设您平均每个日期至少有一笔交易。如果没有，您可以使用更大的桌子。

最后一部分是用于返回有关日期信息的连接。请注意使用 count(t.date) 而不是 count(*)。这会计算表中的记录数，对于没有数据的日期，该记录数应为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:40:09.307

*如果*您有另一个要加入的表包含所有可能的日期，则可以使用左外连接来实现这一点。

一种选择可能是在临时表中生成日期并将其连接到您的查询中。

像这样的东西可能会奏效。

```
CREATE TABLE #TempA (Col1 DateTime)
DECLARE @start DATETIME = convert(datetime, convert(nvarchar(10), getdate(), 121))
SELECT @start

DECLARE @counter INT = 0

WHILE @counter < 50
BEGIN
    INSERT INTO #TempA (Col1) VALUES (@start)
    SET @start = DATEADD(DAY, 1, @start)
    SET @counter = @counter+1
END 
```

这将创建一个 TempTable 来保存日期......从今天开始，我刚刚生成了其中的 50 个。

```
SELECT 
    a.Col1,
    COUNT(b.MessageID)
FROM
    TempA a
    LEFT OUTER JOIN YOUR_MESSAGE_TABLE b
        ON a.Col1 = b.DateColumn
GROUP BY
    a.Col1 
```

然后你可以离开加入你的消息计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T20:09:42.073

为此，您不需要单独的表，您可以在查询中创建所需的内容。这适用于五月：

```
WITH month_may AS (
    select to_date('2012-05-01', 'yyyy-mm-dd') + level - 1 AS the_date
    from dual
    connect by level < 31
)
SELECT *
  FROM month_may mm
  LEFT JOIN mytable t ON t.some_date = mm.the_date 
```

日期范围将取决于您希望如何执行此操作以及您的范围是什么。

# android - 如何仅从元素的一侧删除边框？

> ID：10571026
> 
> 赞同：15
> 
> 时间：2012-05-13T10:32:15.240
> 
> 标签：android, border, android-xml, android-drawable

我有：

```
<stroke android:width="1px" android:color="#A6ACB1"/> 
```

我想从元素的底部（例如）删除这个边框。可能吗？（Eclipse 只建议我：颜色、宽度、dashWidth 和 dashGap）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-01-03T21:21:03.070

*这有点小技巧*`inset`，但可以使用带有负值的可绘制对象来删除一个或多个边框。将形状包裹在 an 中`inset`并应用负`android:insetTop`, `android:insetBottom`, `android:insetLeft`, 或`android:insetRight`abs 值等于笔划宽度。

![在此处输入图像描述](../Images/659d94baf57df5c46527203018625547.png)

例如，要从带有笔划的矩形中删除底部边框，请`4dp`使用`android:insetBottom`.`-4dp`

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
    android:insetBottom="-4dp">

    <shape android:shape="rectangle">
        <solid android:color="#FFFFFF" />
        <stroke android:width="4dp" android:color="#000000" />
        <corners android:radius="4dp" />
    </shape>

</inset> 
```

只要形状的角的半径小于等于笔划宽度，这似乎工作得很好。否则，在应用插图时使用两个值中较大的一个（半径），以完全隐藏相邻边框的圆形部分。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-13T10:47:06.680

据我了解，没有一种简单的方法可以做到这一点。**但是，如果您将 layer-list 与具有边框的项目一起使用，然后将其与您希望边框**等于边框宽度的所有边的偏移量不存在的项目一起使用，则可以实现。

让我为您制作代表无边界底部的 xml..

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <!-- Border -->
    <item>
        <shape>
            <solid android:color="#f000"></solid>
        </shape>
    </item>
    <!-- Body -->
    <item android:left="2dip"
          android:top="2dp"
          android:right="2dp">
        <shape>
            <solid android:color="#ffafafaf"></solid>
        </shape> 
    </item>
</layer-list> 
```

正如你所看到的，我告诉第二个项目在除底部之外的所有侧面由两个 dp 插入第一个项目（因此底部的无边框结果），你去：

![在此处输入图像描述](../Images/82d13dd77843f20affe4173711b49de2.png)

所以本质上这不是一个边框本身，它是下面的形状（尽管如果你需要虚线或点线或其他任何东西，你可以添加一个边框）被第二个项目覆盖，它将是按钮的主体。都在同一个drawable中:)

这可以应用于您要删除的任何边框，方法是更改​​该项目插入的值，例如，如果我`right`将 Body 项目中的 更改为`bottom`，则缺少的边框将是正确的，因为它是没有插入的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-02T16:08:28.757

这是一个xml技巧。首先，您必须使用特定颜色（线条颜色）填充图层。然后你必须用另一种颜色（背景颜色）填充它，同时将绘图从你想要画线的一侧推一点。这是我的代码：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

        <!-- First we have to create the line color (Black: #000000 and
           Set position to 0 from all sides, this will allow us
           even to to determine border size in any side (top,
           right, bottom, left) -->

    <item android:top="0dp"
        android:right="0dp"
        android:left="0dp"
        android:bottom="0dp">
        <shape android:shape="rectangle">
            <solid android:color="#000000"></solid>
        </shape>
    </item>

    <!-- Here we fill the content with our color, and I will
         push 1dp from the top so this size (top = 1dp) will
         keep the previous color and it will look like the border
         -->

    <item android:top="1dp"
        android:right="0dp"
        android:left="0dp"
        android:bottom="0dp">
        <shape android:shape="rectangle">
            <solid android:color="#f4f4f4"></solid>
        </shape>
    </item>
</layer-list> 
```

[https://i.stack.imgur.com/ifak8.jpg](https://i.stack.imgur.com/ifak8.jpg)

它的外观如下：

[![在此处输入图像描述](../Images/1bfb29369c0b1300f144f0ed60967ca0.png)](https://i.stack.imgur.com/JTYr7.jpg)

# jsf - 从 DynamoDB 填充数据表

> ID：10571030
> 
> 赞同：1
> 
> 时间：2012-05-13T10:33:08.740
> 
> 标签：jsf, iterator, amazon-dynamodb

我试图用我从 DynamoDB 表（Amazon NoSQL DB）中检索的数据填充 JSF 数据表。目前一切正常，直到对 scanResults 的迭代。调试器显示我的 scanResult 有一个所有帐户的列表，但是当我尝试迭代这些结果以构建我的列表时，似乎没有任何内容添加到 allUserSummary 列表中，并且最终出现空指针异常。

基本用户 POJO：

```
public class User {

private String uuid;

   public User(String uuid) {
       this.uuid = uuid;
   }
} 
```

托管bean：

```
private List<User> allUserSummary;
private List<String> uuid;
private User selectedUser;

public List<User> getAllUserSummary() throws Exception {
    populateData();
    return allUserSummary;
}

private void populateData() throws Exception {

    // Create a new AmazonDynamoDBClient and mapper
    AmazonDynamoDBClient client = dynamoClient.getDynamoClient();
    DynamoDBMapper mapper = new DynamoDBMapper(client);

    try {
        // Create a new scan expression and filter to find the required data from the db
        DynamoDBScanExpression scanExpression = new DynamoDBScanExpression();
        Map<String, Condition> scanFilter = new HashMap<String, Condition>();
        Condition scanCondition = new Condition().withComparisonOperator(ComparisonOperator.NOT_NULL);
        scanFilter.put("uuid", scanCondition);
        scanExpression.setScanFilter(scanFilter);

        // Run the scan
        List scanResults = mapper.scan(UserAccounts.class, scanExpression);

        // Iterate over the scanned results and add the required data to a new User
        for (Iterator it = scanResults.iterator(); it.hasNext();) {
            allUserSummary.add(new User(scanResults.get(1).toString()));
        }

    } catch (Exception e) {
        // TODO
    }

} 
```

数据表（我使用 primefaces，但问题与标准 JSF DT 相同）：

```
 <h:form>

                <pou:dataTable id="users" 
                               var="user" 
                               value="#{accountManager.allUserSummary}" 
                               paginator="true" 
                               rows="10"
                               selection="#{accountManager.selectedUser}">  

                    <f:facet name="header">  
                        UUID  
                    </f:facet>  

                    <pou:column selectionMode="multiple" />  

                    <pou:column headerText="Uuid">  
                        #{user.uuid}  
                    </pou:column>  

                    <f:facet name="footer">  
                        <pou:commandButton id="multiViewButton" 
                                           value="View" 
                                           icon="ui-icon-search"
                                           update="" 
                                           oncomplete=""/>  
                    </f:facet>  
                </pou:dataTable>  

            </h:form> 
```

堆栈跟踪：

```
java.lang.IllegalArgumentException: ""
    at javax.faces.component.UIComponentBase.findComponent(UIComponentBase.java:570)
    at org.primefaces.util.ComponentUtils.findClientIds(ComponentUtils.java:244)
    at org.primefaces.renderkit.CoreRenderer.buildAjaxRequest(CoreRenderer.java:222)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeMarkup(CommandButtonRenderer.java:81)
    at org.primefaces.component.commandbutton.CommandButtonRenderer.encodeEnd(CommandButtonRenderer.java:53)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at org.primefaces.component.datatable.DataTableRenderer.encodeFacet(DataTableRenderer.java:839)
    at org.primefaces.component.datatable.DataTableRenderer.encodeTFoot(DataTableRenderer.java:823)
    at org.primefaces.component.datatable.DataTableRenderer.encodeRegularTable(DataTableRenderer.java:247)
    at org.primefaces.component.datatable.DataTableRenderer.encodeMarkup(DataTableRenderer.java:224)
    at org.primefaces.component.datatable.DataTableRenderer.encodeEnd(DataTableRenderer.java:108)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1764)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1757)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:288)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108)
    at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:449)
    at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:365)
    at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90)
    at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83)
    at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:380)
    at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:362)
    at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:125)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:36:07.210

干得好...

将值设置到按钮`update=""`中`oncomplete=""`或从按钮中删除它们...

```
 <pou:commandButton id="multiViewButton" 
                                       value="View" 
                                       icon="ui-icon-search"
                                       update="" 
                                       oncomplete=""/> 
```

**编辑**

尝试以下更改：

```
private List<User> allUserSummary = new ArrayList<User>(); 
```

. . .

```
@PostConstruct
public void populateData() throws Exception { 
```

. . . .

```
public List<User> getAllUserSummary() throws Exception {
    return allUserSummary;
} 
```

# hadoop - couchdb 等数据存储的 MapReduce 与 Hadoop 的区别？

> ID：10571034
> 
> 赞同：1
> 
> 时间：2012-05-13T10:33:39.700
> 
> 标签：hadoop, mapreduce, couchbase

最近在 Couchbase 的网络研讨会上，他们说 Hadoop 用于处理大型日志文件，而 Couchbase 用于将其呈现给应用层。他们声称 Couchbase 和 Hadoop 的 map 和 reduce 是不同的，并且适用于所提到的各自的用例。我打算使用 Couchbase map reduce 来处理大量的日志文件。有人可以澄清一下两张地图减少的确切区别吗？Hadoop 中是否有任何特性使其更适合处理大型日志文件？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T14:16:20.273

主要区别在于 couchbase 使用增量 map/reduce 并且不会扫描您需要更新或删除项目的所有数据集。另一个区别是“大”的大小。如果您需要一次处理数百 GB 的日志，那么沙发底座不是最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T14:13:21.350

Couchbase 是众多 NoSQL 数据存储应用程序之一。数据存储在键/值对中，键被索引以便快速检索。

相反，hadoop 中的数据没有索引（除了文件名），从 HDFS 中的文件中提取特定值要慢得多，可能涉及扫描许多文件。

您通常会使用 Hadoop mapreduce 之类的东西来处理大文件，并更新/填充 NoSQL 存储（例如 Couchbase）。

使用 NoSQL 数据存储来处理大量数据很可能不如使用 MapReduce 来完成相同的工作。但是 NoSQL 数据存储将能够比 MapReduce 作业更有效地为 Web 层提供服务（可能需要 10 秒的初始化时间，以及几分钟/几小时的运行时间）。

# android - 如何最有效地将 git build 版本号绑定到带有 eclipse 的 apk 版本？

> ID：10571039
> 
> 赞同：1
> 
> 时间：2012-05-13T10:34:37.577
> 
> 标签：android, eclipse, git, version-control

我使用 eclipse 构建一个 android 应用程序，并在本地运行 git 进行版本控制。目前我在 strings.xml 中有一个代表版本号的值。如果我更改该数字，我接下来要做的就是在 git 中使用注释中的相同版本号提交代码，这样我就可以将特定构建与生成它的匹配代码联系起来。非常手动的过程。

Larsks 的评论帮助我指出了更好地定义事物的方向。我想我想要的是某种类型的 git hook。如果我更改特定版本变量，它会自动添加相应的标签。或者，如果我发出特定格式“v3.1.4”的标签，它将更新代码中的版本号。

我认为在阅读有关钩子之前，我希望有一些东西可以放置“ReplaceWithVersion”或其他一些特殊代码，并且在提交时git会自动知道用当前标签/版本替换它。

我希望太多了吗？有没有一种可行的方法来使版本/标签同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:33:05.617

这听起来像是 git 标签的预切使用。更新 strings.xml 并提交更改后，使用版本号标记提交：

```
git tag 3.14.15 
```

然后，您可以在其他 git 命令中使用此标记来引用此特定提交。例如，也可以查看自发布以来您所做的任何更改：

```
git diff 3.14.15 
```

# database - 在 Django 中，我无法保存模型的新内容

> ID：10571041
> 
> 赞同：1
> 
> 时间：2012-05-13T10:35:47.640
> 
> 标签：database, django, django-models, django-forms, django-templates

再一次，我有一个小问题要在 django 中完成。但至少你们帮助我更好地理解事情。

这是我的看法：

```
def editUserprofile(request):
rc = context_instance=RequestContext(request)
u=request.user
if request.method=='POST':
    form = UserProfileEdit(request.POST, request.FILES)
    if form.is_valid():
        u = UserProfile.objects.get(user=u)
        u.avatar = request.FILES['avatar']
        u.first_name = form.cleaned_data['first_name']
        u.last_name = form.cleaned_data['last_name']
        u.email = form.cleaned_data['email']
        u.country = form.cleaned_data['country']
        u.date_of_birth = form.cleaned_data['date_of_birth']
        u.save()
        return HttpResponseRedirect("/editprofile")

else:
    u = UserProfile.objects.get(user=u)
    form = UserProfileEdit()
return render_to_response('users/editprofile.html',
                         {'form':form, 'u':u},
                         rc) 
```

没有错误，但我的模型没有被修改。这也是我的模板：

```
 <form method="POST" action=".">
    {% csrf_token %}

    {% if u.avatar %}
        <img src="{{ MEDIA_URL }}{{ u.avatar }}" height="80px" />
    {% else %}
        <p>You have no avatar</p>
    {% endif %}
        <p>Change Avatar: {{form.avatar}}</p>
    <br />
    {% if u.first_name %}
        <p>First Name: {{u.first_name}}</p>
    {% else %}
        <p>First Name: No first name added </p>
    {% endif %}
        <p>Modify:{{form.first_name}}</p>
    <br />
    {% if u.last_name %}
        <p>Last Name: {{u.last_name}}</p>
    {% else %}
        <p>Last Name: No last name added </p>
    {% endif %}
        <p>Modify:{{form.last_name}}</p>
    <br />
    {% if u.email %}
        <p>Email: {{ u.email }}</p>
    {% else %}
        <p>Email: No email added</p>
    {% endif %}
    <p>Modify:{{ form.email }}</p>
    <br />

    {% if u.date_of_birth %}
        <p>Date of birth: {{ u.date_of_birth }}
    {% else %}
        <p>Date of birth: No birthday added </p>
    {% endif %}
    <p>Modify:{{form.date_of_birth}}</p>
    <br />

    {% if u.country %}
        <p>Country: {{ u.country }}</p>
    {% else %}
        <p>Country: No Country added</p>
    {% endif %}
    <p>Modify:{{form.country}}</p>
    <br />

    <input type="submit" value="Save Changes">
</form> 
```

希望你们能帮助我的家伙..！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:52:47.470

`form.is_valid()`在您的表单验证中是True 吗？

# html - CSS clearfix 如何克服无法使用它使元素居中的问题

> ID：10571048
> 
> 赞同：1
> 
> 时间：2012-05-13T10:37:24.790
> 
> 标签：html, css, clearfix

好的，我正在为我的一个客户重新制作一个网站，多年来，就 CSS 而言，我一直在做一些过时的事情。我已经阅读了一些东西，发现了一种称为 clearfix 的方法，自从我读到它以来，我一直想试一试。

现在我试了一下，我发现我的元素居中方法不起作用

通常我会将它居中，`margin:0 auto;`但实施 clearfix 这不再有效。所以现在我正在寻找一种应用相同逻辑但在等式中保留 clearfix 的方法。我发现了一些可以在较新的浏览器上运行的东西，但不确定它们是否适用于较旧的浏览器，并且我正在努力使其尽可能地保持跨浏览器兼容，而不会为了做其他事情而做一些事情。这就是我重新制作网站的众多原因之一，我希望从头开始为他们提供一个漂亮的新代码库，这是合规的。

供参考，这是我使用的 clearfix 方法 [http://www.webtoolkit.info/css-clearfix.html](http://www.webtoolkit.info/css-clearfix.html)

****编辑显示代码****

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>[title here]</title>
<style type="text/css" media="all">
*{margin:0;padding:0;}
body{background-color:#3F3965;font-family:Verdana, Geneva, sans-serif;color:#000;}
#content_wrap{margin:0 auto;padding:0;width:800px;background-color:#FFF;}
#content_left{width:180px;float:left;}
#content_right{width:620px;float:left;}
.rounded{
  -moz-border-radius: 10px; /* Firefox */
  -webkit-border-radius: 10px; /* Safari, Chrome */
  border-radius: 10px; /* CSS3 */
  behavior: url(border-radius.htc);
}
.border{border:solid 2px;}
.light{border-color:#999;}
.dark{border-color:#666;}
.clr{clear:both;} /*standard clear*/
/*start clearfix*/
.clearfix:after {content: ".";display: block;clear:both;visibility:hidden;line-height:0;height:0;}
.clearfix {display:inline-block;}
html[xmlns] .clearfix {display:block;}
* html .clearfix{height:1%;}
/*end clearfix*/
</style>
</head>
<body>

<div id="content_wrap" class="clearfix rounded border dark">
    <div id="content_left">left</div>
    <div id="content_right">right</div>
</div>
</body>
</html> 
```

如前所述，主包含元素在应用 clearfix 类后失去其“居中”位置。根据我的理解，clearfix 的全部意义在于它采用其中具有浮动元素的父元素是让元素将自身调整到其中最大浮动元素的高度。现在，我相信它应该在哪里起作用，margin:0 auto; 通过提供的类在同一元素上，否则将被忽略

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:48:01.483

解决具有浮动子元素的容器高度计算错误的一种方法是在它们上放置溢出：隐藏。计算错误是因为在计算容器 DIV 的高度时内部布局尚未准备好。overflow:hidden on container DIV 强制在渲染所有子项后重新计算高度。

```
<div class="container">
    <div class="child">
    Lorem ipsum
    </div>
    <div class="child">
    Lorem ipsum
    </div>
    <div class="child">
    Lorem ipsum
    </div> 
```

```
.container{
    overflow:hidden;
    }
.child{
    float:left;
    width:20px;
    } 
```

这只会在您有一些绝对或相对定位的元素实际放置在容器外部的地方引起问题，例如一些横幅和丝带。否则，这是一个干净的解决方案。

PPK 有一篇关于它的文章[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T21:42:49.897

好的，我会回答我自己的问题。看到这里没有人可以提供更好的或特定于该问题的任何东西。

我最终做的是将另一个 div 放在 content_wrap div 中，并从此元素中删除了 clearfix 类。这个新的 div 被赋予了 clearfix 类并包裹了其余的内容 div，因此它将按照预期的方式应用 clearfix。

这允许 content_wrap div 以我想要的方式居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T11:47:30.673

扩展克里斯的答案，在这种情况下您需要两个包装器。

外部包装器应设置容器的宽度，并应用您的`margin: 0 auto;`样式：

```
.content_center {
  width: 800px;
  margin: 0 auto;
} 
```

然后，我们可以将`clearfix`类和样式应用到您的内容包装器，并将其宽度设置为`100%`（其父级的）：

```
.content_wrap {
  width: 100%;
} 
```

[这是一个小提琴。](http://jsfiddle.net/FU58j/1/)

# javascript - 使用RegEx通过“：”之前的单词获取“：”之后的单词

> ID：10571056
> 
> 赞同：0
> 
> 时间：2012-05-13T10:38:25.650
> 
> 标签：javascript, regex

考虑以下文本：

```
var t="asdf  t1 : v1   xasdf  dfas sdf   t2 : v2  asdfad   t3 : v3   adsfasdf   t4 : v4"; 
```

如何使用正则表达式按标题检索值？

我正在寻找如下解决方案：

```
t.match(/ ??? t2 ??? /);  //should return v2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:53:17.600

关于什么：

`t.match(/t2\s*:\s*(\w+)/)[1]`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:42:38.577

如果输入这么简单，我建议只使用字符串操作函数而不是正则表达式。按行拆分文件，然后按每行拆分`:`，最后修剪标签和值。

# c# - XSLT 和特殊字符的问题

> ID：10571057
> 
> 赞同：0
> 
> 时间：2012-05-13T10:38:38.167
> 
> 标签：c#, asp.net, xml, xslt, for-xml

在我的网络应用程序（ASP.net 4，C#）上，我使用 FOR XML PATH('') 将数据从 SQL Server 转换为 XML，并使用以下行将其提供给 XSLT：

```
MemoryStream stream = new MemoryStream(UTF8Encoding.UTF8.GetBytes(xml));
XPathDocument document = new XPathDocument(stream);
StringWriter writer = new StringWriter();
XslCompiledTransform transform = new XslCompiledTransform();
transform.Load(xsltPath);
transform.Transform(document, null, writer);
return writer.ToString(); 
```

现在，当我从我的论坛中提供消息时，在晴天的情况下，应该完全没有问题，也没有。当用户决定在他们的消息中使用像 < > 这样的特殊字符时，我们就有了未雨绸缪的一天。我收到一个错误，顺便说一句，有时会有所不同（从消息到消息，取决于他们在那里写的内容）。我已经尝试过 disable-output-escaping="yes" 不用说，我希望用户能够使用一些标签，例如

```
<a href... or <font ...> 
```

以下是导致问题的消息之一的示例：

```
setting-->about phone----< software update 
```

任何可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T10:44:08.400

您需要对此类特殊字符进行*编码。*就 XML 而言，有 5 个：

*   `>`-`&gt;`
*   `<`-`&lt;`
*   `&`-`&amp;`
*   `"`-`&quot;`
*   `'`-`&apos;`

您需要从使用输入中对这些进行编码。

另一种方法是将所有用户生成的内容放在[`<!\[CDATA\[\]\]>`](http://en.wikipedia.org/wiki/CDATA)部分中，这有效地实现了相同的目的。

# javascript - 将 HTML 从控制器传递到 Javascript 的正确方法是什么？

> ID：10571059
> 
> 赞同：2
> 
> 时间：2012-05-13T10:38:46.407
> 
> 标签：javascript, html, ruby-on-rails, escaping

在我的应用程序中，我让用户输入注释，这可能是不安全的。当我在视图中渲染它们时，以下很好地显示了注释：

```
<%= simple_format h annotation.body %> 
```

它保留了换行符，但也正确地转义了 HTML。现在，我需要在由 Javascript 创建的叠加层中呈现这个主体。现在，我通过从控制器调用以下命令通过 JSON 获取我的注释：

```
def index
  # ...
  respond_to do |format|
    format.json { render :json => @annotations }
  end
end 
```

并像这样创建叠加层（非常简化的示例）：

```
$.getJSON(this.annotations_url, function(data) { 
  $.each(data, function(key, val) {
      annotation = val;
      this.div_body.html(annotation.body);
      // ... 
```

当然，生成的 HTML*不会*被正确转义，并且换行符也不会被保留。

![](../Images/c12b38c899104cdae6c22c3ccb505030.png)

* * *

现在，我不想使用纯 Javascript 来进行转义和换行转换，因为如果我这样做的话，我感觉我不会干很多。整个代码似乎很难维护和混乱。

我不能以某种方式通过 JSON 从控制器发送安全的 HTML 正文吗？看起来好像 ERB`simple_format`和`h`方法仅在视图中可用。

或者我真的应该用 Javascript 做所有事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:01:49.303

我认为您可以在`helpers`每个地方使用他们的长名来称呼他们：

> `ActionController::Base.helpers.simple_format str`
> `ERB::Util::[html_escape](http://api.rubyonrails.org/classes/ERB/Util.html#method-c-html_escape) str`

一旦你有了这个，你就可以[自定义你的`Model.to_json`行为](https://stackoverflow.com/questions/607873/ruby-on-rails-advanced-json-serialization)来包含一个已经解析过的`Model.body`.

当然，这种方法有两个问题：

1.  模型中的 Rails 依赖项
2.  在模型中添加视图行为

但有时试图避免这些问题带来的复杂性多于清晰度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:53:16.650

您可以从 erb 模板返回 JSON，就像对 html 一样。与其在控制器中返回 JSON，不如让它不进行渲染，就像 html 响应一样。不要将视图命名为 index.hmtl.erb，而是将其命名为 index.json.erb。

我不确定这是最好的最干净的方法。这是 Rails 为响应 html 或其他内容提供 simple_format 的唯一方式。

# java - 如何过滤具有特定范围的Java字符串（电子邮件格式）

> ID：10571065
> 
> 赞同：5
> 
> 时间：2012-05-13T10:41:04.643
> 
> 标签：java, string

我在 Java 中有一个名为`Kiran<kiran@gmail.com>`. 我想通过删除其他内容来获取字符串 kiran@gmail.com。

```
String s1= kiran<kiran@gmail.com> 
```

输出应该是`kiran@gmail.com`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:44:36.293

如果您尝试解析电子邮件地址，我建议使用[InternetAddress](http://docs.oracle.com/javaee/1.4/api/javax/mail/internet/InternetAddress.html)类。它是 Java EE 的一部分（如果您使用的是 Java SE，则需要添加**javax.mail**依赖项）。

该类能够解析包含像您这样的电子邮件地址的字符串。

```
String s1 = "kiran<kiran@gmail.com>";
InternetAddress address = new InternetAddress(s1);
String email = address.getAddress(); 
```

我是这样想的：

*   您的算法自动符合标准
*   您的代码比使用正则表达式提取电子邮件地址更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T10:44:30.040

您可以执行以下操作。

```
String s = "To: John Smith <john@smith.com>, Janes Smith\n"
            + "<jane@smith.org>, Tom Barter <tom@test.co.uk>, Other \n"
            + "Weird @#$@<>#^Names <other@names.me>, \n"
            + "Long Long Long Long Name <longlong@name.com>";
    s = s.substring(3); // filter TO:
    System.out.println(s);
    // Use DOTALL pattern  
    Pattern p = Pattern.compile("(.*?)<([^>]+)>\\s*,?",Pattern.DOTALL);

    Matcher m = p.matcher(s);

    while(m.find()) {
        // filter newline
        String name = m.group(1).replaceAll("[\\n\\r]+", ""); 
        String email = m.group(2).replaceAll("[\\n\\r]+", "");
        System.out.println(name + " -> " + email);
    } 
```

# sed - 使用 gawk / awk / sed 从多个文件中删除行

> ID：10571069
> 
> 赞同：2
> 
> 时间：2012-05-13T10:41:47.027
> 
> 标签：sed, awk, gawk

我有两组文本文件。第一套在 AA 文件夹中。第二组在 BB 文件夹中。第一组（AA 文件夹）的 ff.txt 文件的内容如下所示。

```
Name        number     marks
john            1         60
maria           2         54
samuel          3         62
ben             4         63 
```

如果标记> 60，我想从这个文件中打印第二列（数字）。输出将是 3,4。接下来，读取 BB 文件夹中的 ff.txt 文件并删除包含数字 3,4 的行。

BB 文件夹中的文件如下所示。第二列是数字。

```
 marks       1      11.824  24.015  41.220  1.00 13.65
 marks       1      13.058  24.521  40.718  1.00 11.82
 marks       3      12.120  13.472  46.317  1.00 10.62
 marks       4      10.343  24.731  47.771  1.00  8.18 
```

我使用了以下代码。此代码适用于一个文件。

```
gawk 'BEGIN {getline} $3>60{print $2}' AA/ff.txt | while read number; do gawk -v number=$number '$2 != number' BB/ff.txt > /tmp/ff.txt; mv /tmp/ff.txt BB/ff.txt; done 
```

但是当我用多个文件运行这段代码时，我得到了错误。

```
gawk 'BEGIN {getline} $3>60{print $2}' AA/*.txt | while read number; do gawk -v number=$number '$2 != number' BB/*.txt > /tmp/*.txt; mv /tmp/*.txt BB/*.txt; done

error:-
mv: target `BB/kk.txt' is not a directory 
```

两天前我问过这个问题。请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:13:07.213

`> /tmp/*.txt`并且`mv /tmp/*.txt BB/*.txt`是错误的。

* * *

### 对于单个文件

```
awk 'NR>1 && $3>60{print $2}' AA/ff.txt > idx.txt

awk 'NR==FNR{a[$0]; next}; !($2 in a)' idx.txt BB/ff.txt 
```

* * *

### 对于多个文件

```
awk 'FNR>1 && $3>60{print $2}' AA/*.txt >idx.txt

cat BB/*.txt | awk 'NR==FNR{a[$0]; next}; !($2 in a)' idx.txt - 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:31:22.810

这将创建文件夹中所有文件的索引`AA`并检查文件夹中的所有文件`BB`：

`cat AA/*.txt | awk 'FNR==NR { if ($3 > 60) array[$2]; next } !($2 in array)' - BB/*.txt`

这将比较两个单独的文件，假设它们在文件夹中具有相同的名称`AA`并且`BB`：

`ls AA/*.txt | sed "s%AA/\(.*\)%awk 'FNR==NR { if (\$3 > 60) array[\$2]; next } !(\$2 in array)' & BB/\1 %" | sh`

高温高压

**编辑**

这应该有帮助:-)

`ls AA/*.txt | sed "s%AA/\(.*\)%awk 'FNR==NR { if (\$3 > 60) array[\$2]; next } !(\$2 in array)' & BB/\1 > \1_tmp \&\& mv \1_tmp BB/\1 %" | sh`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T14:41:04.457

一种`perl`解决方案：

```
use warnings;
use strict;
use File::Spec;

## Hash to save data to delete from files of BB folder.
## key -> file name.
## value -> string with numbers of second column. They will be
## joined separated with '-...-', like: -2--3--1-. And it will be easier to
## search for them using a regexp.
my %delete;

## Check arguments:
## 1.- They are two.
## 2.- Both are directories.
## 3.- Both have same number of regular files and with identical names.
die qq[Usage: perl $0 <dir_AA> <dir_BB>\n] if
        @ARGV != 2 ||
        grep { ! -d } @ARGV;

{
        my %h;
        for ( glob join q[ ], map { qq[$_/*] } @ARGV ) {
                next unless -f;
                my $file = ( File::Spec->splitpath( $_ ) )[2] or next;
                $h{ $file }++;
        }

        for ( values %h ) {
                if ( $_ != 2 ) {
                        die qq[Different files in both directories\n];
                }
        }
}

## Get files from dir 'AA'. Process them, print to output lines which 
## matches condition and save the information in the %delete hash.
for my $file ( glob( shift . qq[/*] ) ) {
        open my $fh, q[<], $file or do { warn qq[Couldn't open file $file\n]; next };
        $file = ( File::Spec->splitpath( $file ) )[2] or do { 
                warn qq[Couldn't get file name from path\n]; next };
        while ( <$fh> ) {
                next if $. == 1;
                chomp;
                my @f = split;
                next unless @f >= 3;
                if ( $f[ $#f ] > 60 ) {
                        $delete{ $file } .= qq/-$f[1]-/;
                        printf qq[%s\n], $_;
                }
        }
}

## Process files found in dir 'BB'. For each line, print it if not found in
## file from dir 'AA'.
{
        @ARGV  = glob( shift . qq[/*] );
        $^I = q[.bak];
        while ( <> ) {

                ## Sanity check. Shouldn't occur.
                my $filename = ( File::Spec->splitpath( $ARGV ) )[2];
                if ( ! exists $delete{ $filename } ) {
                        close ARGV;
                        next;
                }

                chomp;
                my @f = split;
                if ( $delete{ $filename } =~ m/-$f[1]-/ ) {
                        next;
                }

                printf qq[%s\n], $_;
        }
}

exit 0; 
```

* * *

一个**测试**：

假设下一个文件树。命令：

```
ls -R1 
```

输出：

```
.:
AA
BB
script.pl

./AA:
ff.txt
gg.txt

./BB:
ff.txt
gg.txt 
```

以及文件的下一个内容。命令：

```
head AA/* 
```

输出：

```
==> AA/ff.txt <==
Name        number     marks
john            1         60
maria           2         54
samuel          3         62
ben             4         63
==> AA/gg.txt <==
Name        number     marks
john            1         70
maria           2         54
samuel          3         42
ben             4         33 
```

命令：

```
head BB/* 
```

输出：

```
==> BB/ff.txt <==
 marks       1      11.824  24.015  41.220  1.00 13.65
 marks       1      13.058  24.521  40.718  1.00 11.82
 marks       3      12.120  13.472  46.317  1.00 10.62
 marks       4      10.343  24.731  47.771  1.00  8.18
==> BB/gg.txt <==
 marks       1      11.824  24.015  41.220  1.00 13.65
 marks       2      13.058  24.521  40.718  1.00 11.82
 marks       3      12.120  13.472  46.317  1.00 10.62
 marks       4      10.343  24.731  47.771  1.00  8.18 
```

像这样运行脚本：

```
perl script.pl AA/ BB 
```

通过以下输出到屏幕：

```
samuel          3         62
ben             4         63
john            1         70 
```

并且`BB`修改的目录文件如下：

```
head BB/* 
```

输出：

```
==> BB/ff.txt <==
 marks       1      11.824  24.015  41.220  1.00 13.65
 marks       1      13.058  24.521  40.718  1.00 11.82

==> BB/gg.txt <==
 marks       2      13.058  24.521  40.718  1.00 11.82
 marks       3      12.120  13.472  46.317  1.00 10.62
 marks       4      10.343  24.731  47.771  1.00  8.18 
```

因此，从`ff.txt`带有数字的行`3`和`4`已被删除，以及带有数字的行`1`in `gg.txt`，它们都比`60`最后一列大。我认为这就是您想要实现的目标。我希望它有所帮助，虽然不是`awk`。

# jquery - Jquery 在 .not() 函数中传递 2 个 id

> ID：10571071
> 
> 赞同：2
> 
> 时间：2012-05-13T10:41:48.963
> 
> 标签：jquery

```
$("#bbody").children().not("#" + pageid && "#show") 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T10:45:20.740

您可以使用逗号选择器：

```
.not("#show, #" + pageid); 
```

或使用两次通行证：

```
.not("#show").not("#" + pageid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:45:24.763

只需在两个 id 之间放一个逗号，它将适用于两个元素

```
$("#bbody").children().not("#" + pageid + ",#show") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T10:46:16.493

对于 multi [not](http://api.jquery.com/not-selector/)条件，您需要放入要避免的选择器内。
对于[多](http://api.jquery.com/multiple-selector/)选，为每个条件添加一个逗号。

```
$("#bbody").children().not("#" + pageid + ",#show"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T10:46:28.837

你可以试试....它的工作

```
$("#bbody").not('#' + pageid).not('#show') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T10:47:07.127

是的，使用逗号：

```
$("#body").children().not("#" + pageid + ", #show") 
```

# html - html5拖放具有相同ID的div

> ID：10571078
> 
> 赞同：0
> 
> 时间：2012-05-13T10:42:42.580
> 
> 标签：html, drag-and-drop

我认为标题是不言自明的。我有许多从数据库中获取产品的 php 代码生成的 div。问题是当我将它们拖到两个容器（也是 div）之间时，我无法将它们全部返回到第一个容器，因为产品 div id 相同，并且它从容器 1 --> 2 重复而不是从容器向后2 --> 1.（2个容器有并且所有产品div都有相同的id）。我可以通过在产品的 div id 中添加 +1 来解决这个问题（因此它们具有不同的 id），但这样我就不能使用 css 中的 id。有什么解决办法吗？这是js代码

```
<script type="text/javascript">
            function allowDrop(ev){
                ev.preventDefault();
                }
            function drag(ev){
                ev.dataTransfer.setData("Text",ev.target.id);
                }
            function drop(ev){
                if (ev.target.id == "container"){
                var data=ev.dataTransfer.getData("Text");
                ev.target.appendChild(document.getElementById(data));
                ev.preventDefault();
                }}
        </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:44:51.103

你不能有两个具有相同 id 的 div。尝试使用类。

你的`drop()`函数应该是这样的：

```
function drop(ev){
   if ( ev.hasClass('container') ) {
            // do some stuff
   }
} 
```

`.addclass()`您可以使用 jQuery方法动态添加类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:46:59.567

ID 必须是唯一的，HTML 才有效。当您复制 ID 时，会发生奇怪的事情。即使您设法让它在一个浏览器中运行，其他浏览器也可能以不同的方式处理事情。您可以尝试改用类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T17:49:06.590

我已经通过对 php 生成的 div 使用递增的 id 解决了这个问题。怎么 tha 不是我想要的解决方案之一。感谢您的帮助

# eclipse - 带有 Spring Beans 的 Eclipse RCP 应用程序

> ID：10571082
> 
> 赞同：1
> 
> 时间：2012-05-13T10:43:28.553
> 
> 标签：eclipse, spring, rcp

如何配置 Eclipse RCP 应用程序以使用 Spring Beans？我可以在 Eclipse RCP 中使用什么来在应用程序创建时创建并在执行期间随时检索？我希望它看起来像在 Web 开发中我得到一个应用程序上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:57:04.787

您可以将所有 Spring-Jars 放入一个新插件中，并使您的主插件依赖于此。两者都应该是 eclipse-buddys (http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fmisc%2Fbundle_manifest.html)。这对我有用

# java - 通过java中的套接字连接接收数据时无法写入文件

> ID：10571083
> 
> 赞同：1
> 
> 时间：2012-05-13T10:43:40.613
> 
> 标签：java, sockets, datagram

我尝试通过套接字实现发送接收示例，但效果不佳。发送方成功发送数据，接收方接收数据并显示在控制台中，但我想将此数据保存在文件中，但我不能。正如我注意到的那样，接收器一直在监听而没有结束 while 循环。那么任何人都可以帮我解决这个问题吗？

发件人模块

```
import java.io.*;
import java.net.*; 
import java.util.*;

public class UDPSend {

 public static void main(String[] args) throws IOException
  {
      FileInputStream fstream = new FileInputStream("T.txt");
      DataInputStream in = new DataInputStream(fstream);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));

      File file = new File("T.txt");
      FileInputStream fis = new FileInputStream(file);
      byte[] fsize = new byte[(int) file.length()];
      int size = fis.read(fsize);
                System.out.println("Size = " + size);

      InetAddress addr = InetAddress.getByName("localhost");
      byte[]  buf  = new byte[10000];

      String DataLine; 
      while ((DataLine = br.readLine()) != null)  
      { 
                DatagramPacket packet =new DatagramPacket(DataLine.getBytes(),         DataLine.length() , addr, 4555);
          System.out.println (DataLine);
          DatagramSocket socket = new DatagramSocket();
          socket.send(packet);

      }//end while loop

  }//end main method 

 } 
```

接收器模块

```
import java.io.*;
import java.net.*;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class UDPRecieve {

public static void main(String args[]) throws Exception
      {

      FileWriter fw = new FileWriter(new File("D:/JavaPrograms/Multimedia-proj-2/src/outtt.txt"));
      fw.write("hi");
      try{
      //DatagramSocket serverSocket = new DatagramSocket(4555);
      DatagramSocket Socket = new DatagramSocket(4555);
      byte[] receiveData = new byte[1000000];    
     // byte[] sendData = new byte[1024];
      //while(true)
      while(receiveData !=null)
         {  
            DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
            Socket.receive(receivePacket);
            String sentence = new String( receivePacket.getData());
            fw.write(sentence);
            fw.flush();
            System.out.printf("RECEIVED: %s " , new String(receivePacket.getData()));
            //System.out.println("Done");
            //InetAddress IPAddress = receivePacket.getAddress();
            //int port = receivePacket.getPort();
            //String capitalizedSentence = sentence.toUpperCase();
           /* sendData = capitalizedSentence.getBytes();
            DatagramPacket sendPacket =
            new DatagramPacket(sendData, sendData.length, IPAddress, port);
            serverSocket.send(sendPacket);*/
         }

      fw.flush();
      fw.close(); 

      } catch (Exception e) {
          System.err.println(e);
        }

    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:53:04.420

您可以通过以下代码更改来实现它。在接收器类中，在以下循环中进行更改。

```
while (receiveData != null) {
                DatagramPacket receivePacket = new DatagramPacket(receiveData,
                        receiveData.length);
                Socket.receive(receivePacket);
                String sentence = new String(receivePacket.getData());
                fw.write(sentence.trim());
                fw.flush();
                System.out.printf("RECEIVED: %s ", new String(receivePacket
                        .getData()));
                // System.out.println("Done");
                // InetAddress IPAddress = receivePacket.getAddress();
                // int port = receivePacket.getPort();
                // String capitalizedSentence = sentence.toUpperCase();
                /*
                 * sendData = capitalizedSentence.getBytes(); DatagramPacket
                 * sendPacket = new DatagramPacket(sendData, sendData.length,
                 * IPAddress, port); serverSocket.send(sendPacket);
                 */
            } 
```

**编辑**

成功运行的程序的完整代码。

**发件人**

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;

public class UDPSend {

 public static void main(String[] args) throws IOException
  {
      FileInputStream fstream = new FileInputStream("D:/T.txt");
      DataInputStream in = new DataInputStream(fstream);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));

      File file = new File("D:/T.txt");
      FileInputStream fis = new FileInputStream(file);
      byte[] fsize = new byte[(int) file.length()];
      int size = fis.read(fsize);
                System.out.println("Size = " + size);

      InetAddress addr = InetAddress.getByName("localhost");
      byte[]  buf  = new byte[10000];

      String DataLine; 
      while ((DataLine = br.readLine()) != null)  
      { 
                DatagramPacket packet =new DatagramPacket(DataLine.getBytes(),         DataLine.length() , addr, 4555);
          System.out.println (DataLine);
          DatagramSocket socket = new DatagramSocket();
          socket.send(packet);

      }//end while loop

  }//end main method 

 } 
```

**接收者**

```
import java.io.File;
import java.io.FileWriter;
import java.net.DatagramPacket;
import java.net.DatagramSocket;

public class UDPReceive {

    public static void main(String args[]) throws Exception {

        FileWriter fw = new FileWriter(new File(
                "D:/outtt.txt"));
        fw.write("hi");
        try {
            // DatagramSocket serverSocket = new DatagramSocket(4555);
            DatagramSocket Socket = new DatagramSocket(4555);
            byte[] receiveData = new byte[1000000];
            // byte[] sendData = new byte[1024];
            // while(true)
            while (receiveData != null) {
                DatagramPacket receivePacket = new DatagramPacket(receiveData,
                        receiveData.length);
                Socket.receive(receivePacket);
                String sentence = new String(receivePacket.getData());
                fw.write(sentence.trim());
                fw.flush();
                System.out.printf("RECEIVED: %s ", new String(receivePacket
                        .getData()));
                // System.out.println("Done");
                // InetAddress IPAddress = receivePacket.getAddress();
                // int port = receivePacket.getPort();
                // String capitalizedSentence = sentence.toUpperCase();
                /*
                 * sendData = capitalizedSentence.getBytes(); DatagramPacket
                 * sendPacket = new DatagramPacket(sendData, sendData.length,
                 * IPAddress, port); serverSocket.send(sendPacket);
                 */
            }

            fw.flush();
            fw.close();

        } catch (Exception e) {
            System.err.println(e);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:50:34.017

查看您的接收器循环：

```
while(receiveData != null)
{  
     DatagramPacket receivePacket = new DatagramPacket(receiveData,
                                                       receiveData.length);
     Socket.receive(receivePacket);
     String sentence = new String( receivePacket.getData());
     fw.write(sentence);
     fw.flush();
     System.out.printf("RECEIVED: %s " , new String(receivePacket.getData()));
} 
```

撇开各种字符编码问题等不谈，你会如何*期望*成为`receiveData`那个`null`循环？循环如何*结束？*

鉴于您使用的是 UDP 而不是 TCP，因此您实际上并没有连接，那么您希望如何判断作者何时停止写入？此外，您应该考虑数据包乱序到达的可能性。

# security - JBoss AS 7 安全性：如何获取当前登录的用户名？

> ID：10571091
> 
> 赞同：6
> 
> 时间：2012-05-13T10:44:43.587
> 
> 标签：security, jakarta-ee, jboss, jboss7.x

我在 Jboss AS 7 环境中。我的应用程序的 /admIn/* 路径受安全约束保护，需要基于表单的身份验证。安全域由数据库支持。

没关系，但现在我想在每个页面的标题中显示“早上好”。我正在寻找某种 getLoggedUsername() 或 getPrincipal() 函数，但我找不到它。

如果有的话，请发布对官方文档的参考。谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T10:54:53.810

您应该能够使用 JAAS。这是 JBoss 7 应该使用的。

调用主体将存储在`SessionContext`您可以通过告诉 JBoss 它是一个资源来获得的。

```
@Resource 
private SessionContext context;

public void myAwesomeMethod() {
    String currentUser = context.getCallerPrincipal().getName();
} 
```

如果由于某种原因注入在无状态 bean 上不起作用，您可以直接查找 EJBContext。

```
@Stateless
public class HelloBean implements com.foo.ejb.HelloRemote {
    public void hello() {
        try {
            InitialContext ic = new InitialContext();
            SessionContext sctxLookup =
              (SessionContext) ic.lookup("java:comp/EJBContext");
            System.out.println("look up EJBContext by standard name: " + sctxLookup);
        } catch (NamingException ex) {
            throw new IllegalStateException(ex);
        }
    }
} 
```

该片段是从[4 种获取 EJBContext](http://javahowto.blogspot.com/2006/06/4-ways-to-get-ejbcontext-in-ejb-3.html)的方法中获得的。

# java - 禁用文本框中的字符

> ID：10571093
> 
> 赞同：-1
> 
> 时间：2012-05-13T10:45:16.077
> 
> 标签：java, android

是否有可能在 TextView / TextBox 中禁用某些输入，如空格键、换行符等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:25:44.157

有几种方法可以限制对 EditText 的输入。

其中最重要的是设置 android:inputType。选项列表在[这里](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)。

您还可以设置一个 TextWatcher。文档[在这里](http://developer.android.com/reference/android/text/TextWatcher.html)。

# c++ - 在 VC++ 中为 32 位 Windows 上的 64 位编译 JNI 应用程序

> ID：10571103
> 
> 赞同：1
> 
> 时间：2012-05-13T10:46:37.837
> 
> 标签：c++, java-native-interface, 32bit-64bit

我正在构建一个必须使用 Java 库但需要生成 CLR DLL 的应用程序，所以我使用的是 JNI。

DLL 可以正常编译 32 位，但会产生 64 的链接器错误：错误 LNK2001: 无法解析的外部符号 "extern "C" long __cdecl JNI_CreateJavaVM(struct JavaVM_ * *,void * *,void *)" (?JNI_CreateJavaVM@@$ $J0YAJPEAPEAUJavaVM_@@PEAPEAXPEAX@Z)

我认为问题出在 jvm.lib 上，因为在库路径中没有它会为 32 位产生相同的错误。jvm.lib 架构是特定的吗？我看到有人遇到相反的问题（针对 64 编译，针对 32 出现类似错误），他通过安装 32 位 JDK 解决了这个问题。但是，尝试在我的 32 位机器上安装 64 位 JDK 会引发“无效的 win32 应用程序”错误。

任何想法如何让它编译？

# php - 获取本地 PHP 页面作为外部客户端

> ID：10571109
> 
> 赞同：2
> 
> 时间：2012-05-13T10:47:13.267
> 
> 标签：php, local

我希望使用 PHP 调用本地 PHP 页面，并且服务器端代码已经执行。

例如，如果我有一个包含以下内容的页面：

```
Hello, this is <?php $name="John"; echo $name ?> 
```

我希望有一个 get 命令，例如 file_get_contents(local_php_page) 或 fopen(handle) 返回：

```
Hello, this is John 
```

而不是

```
Hello, this is <?php $name="John"; echo $name ?> 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:54:44.683

输出缓冲应该能够为您做到这一点：

```
ob_start();
include 'myfile.php';
$xhtml = ob_get_clean(); 
```

您还可以获得包含的输出，例如：

```
$xhtml = include 'myfile.php'; 
```

有关这方面的更多信息，请查看[PHP 手册](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:03:43.233

正如您已经提到的，您可以使用[file_get_contents](http://de3.php.net/file_get_contents)向任何 http url 发送 get 请求。您必须确保启用了[allow_url_fopen](http://de3.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)。当然，您的网络服务器必须配置为正确处理 php 请求

```
<?php
$requestUrl = 'http://localhost/your_file.php';
$content = file_get_contents($requestUrl);
var_dump($content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T11:04:48.330

如果您的服务器中有 allow_url_fopen，您可以使用带有 url 的 fopen。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T11:20:24.670

需要调用http url而不是path

```
$url="http://".$_SERVER['HTTP_HOST']."/yourpath/";
$str=file_get_contents($url."/yourfile.php");
echo $str; 
```

# variables - Lua调用程序时加载变量~参数？

> ID：10571111
> 
> 赞同：4
> 
> 时间：2012-05-13T10:47:37.473
> 
> 标签：variables, load, lua

我最近接触了 Computer Craft（Minecraft 的 Mod），您可以使用 lua 对计算机进行编码。

我想进入“水状态”，它会加载“水”，然后将变量设置为“状态”或任何其他单词/字符串，这样我就可以将它用于任何事情。我猜你会称之为参数？

```
os.run( environment, prgmpath, arguments ) 
```

不明白什么环境。prgmpath 是水，参数是状态？我只是不确定如何从中抓住这些论点。

所以是的，我很困惑=/

尽力解释它，谢谢，Jazza

在四处寻找之后，我想我找到了答案。

```
lua water arg1 
```

进入命令行

```
derp = arg[2] 
```

进入档案？

编辑：在潜伏了一些之后，我发现：

```
derp = ...
print(derp) 
```

在文件中：

```
file hi 
```

它打印了你好，所以我想这可行，但我似乎无法再添加 D=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T00:53:12.997

os.run 是专门为该 mod 编写的 os 库的扩展。根据wiki上的文档：

*   environment 是为您在 prgmpath 运行的脚本设置状态的元表
*   arguments 是您想要传递给您正在调用的代码的任何内容，该代码位于 prgmpath 的脚本中

所以基本上，如果您设置了一些代码来执行 path/to/file.lua 中的特定操作，但它取决于某些外部状态，您将在调用文件中设置该状态，并传递环境（或它的子集）通过将其作为表传递给 os.run() 中的第一个参数来传递给 file.lua 中的代码。

arguments 应该是您想要传递给您将在 file.lua 中调用的函数的参数表。所以如果在 file.lua 你有......

```
function doSomething(arg1, arg2, arg3)
    ...
end 
```

您可以通过创建一个表并像这样传递它来将 arg1、arg2 和 arg3 传递给 doSomething...

```
local args = {"arg1Val", {}, 1234}
os.run({}, '/path/to/file.lua', args) 
```

os.run 然后会在 file.lua 中为函数 doSomething() 设置一个空环境，并将 args 中的 3 个值传递给函数。

说得通？

# semantic-web - 语义网：单个本体中 2 个实体之间的关系程度

> ID：10571112
> 
> 赞同：0
> 
> 时间：2012-05-13T10:47:37.603
> 
> 标签：semantic-web

假设我们在一个本体中有一些概念，例如：grand_mother、mother 和 son。祖母概念有一些实体，如：布朗夫人、琳达夫人...... 母亲概念有一些实体，如：詹妮弗夫人、金夫人.. 儿子概念有：迈克、比尔......

实体属于 2 个相邻概念（如母子或祖母和母亲）的度数为 0.6。实体的程度属于 2 个远概念（如儿子和祖母）是：0.6 * 0.6。

用户可以在搜索框中输入一些关键词，我必须衡量它们的程度。例如，第一个关键字是布朗夫人，第二个是迈克。我不知道该怎么做？（使用推理器，但我不知道如何衡量它们的程度）。有技术可以做到吗？

谁能帮我？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:04:18.303

我认为您正在寻找的关键字是加权图和最短路径算法，例如。[http://en.wikipedia.org/wiki/Dijkstra's_algorithm](http://en.wikipedia.org/wiki/Dijkstra) _

# android - 任何适用于 Android 开发的 iOS 故事板？

> ID：10571114
> 
> 赞同：14
> 
> 时间：2012-05-13T10:47:41.397
> 
> 标签：android, iphone, ios, storyboard

是否有任何适用于 Android 开发的 iOS Storyboard？

iOS Storyboard 非常棒，它为我们节省了大量编写代码的时间。它也几乎就像是最终开发的直接线框/原型。

Android 开发中的任何东西都可以执行相同的操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-11T18:52:21.537

**更新**

> 从 2.0 版开始，导航编辑器在 Android Studio 中不可用。这是一个实验性功能，我们将来可能会重新访问它。此页面上的信息留作存档用途。

* * *

Android 工具团队刚刚推出了 Android 应用程序导航编辑器的早期原型，他们计划在明年发布

截至目前，它可以在 Android Studio 中试用/使用。

在 Android 工具网站上获取所有信息：[http ://tools.android.com/navigation-editor](http://tools.android.com/navigation-editor)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T11:00:37.080

老实说，我认为没有。尽管我确信您可以找到允许您在应用程序的屏幕之间创建工作流的工具。

# jquery - mp3 播放列表，不带 flash，适用于所有浏览器

> ID：10571120
> 
> 赞同：1
> 
> 时间：2012-05-13T10:48:05.000
> 
> 标签：jquery, html, mp3, playlist

我正在创建一个歌曲网站，里面有播放列表和 mp3 文件。我创建了很多 flash mp3 播放列表播放器，但我希望不使用 flash，并与所有浏览器和智能手机（如 iphone、android 等）一起使用。你能帮我么。此致。祖海尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:25:40.750

尝试这个！

[http://webplayer.yahoo.com/](http://webplayer.yahoo.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:06:50.377

您最好的选择是先尝试使用 html5 的音频标签，然后再使用 flash，反之亦然。需要注意的一点是，android 在实现 html5 音频时完全失败了。尤其是播放列表。我发现的最佳解决方案是简单地提供指向 mp3 的链接。Android 将使用默认的原生音频播放器开始播放它。

另请注意，一个缺点是并非每个浏览器都播放 mp3。您必须在 ogg 中进行编码才能获得尽可能广泛的浏览器支持。如果您有一个音频库，这很容易成为一个大问题。

您可以自己制作播放器/播放列表。但是，如果您对这类事情比较陌生，那么您很快就会把头发拔掉。尝试类似[jPlayer](http://jplayer.org "播放器")的东西。jPlayer 添加了播放列表。如果您想要不同的外观，您可以自己设置主题。

# php - 使用 PHP 获取 Facebook 访问令牌

> ID：10571121
> 
> 赞同：0
> 
> 时间：2012-05-13T10:48:17.257
> 
> 标签：php, facebook, token

我正在开发需要访问用户 facebook 帐户的应用程序。它正在工作，但我需要获取用户的 facebook 令牌并将其保存到 MySQL 数据库。如何使用 PHP 获取 facebook 令牌（权限由我定义）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:59:33.890

facebook 开发人员文档中有一个很好的官方指南/教程。您正在寻找的是[Server-Side authentication flow](http://developers.facebook.com/docs/authentication/server-side/)，因为它会产生一个长期存在的访问令牌（60 天），您可以将其保存在您的数据库中并在需要时重复使用。

还有[客户端流程](http://developers.facebook.com/docs/authentication/client-side/)，但它授予您短暂的令牌（几个小时），这对持久性没有好处。但是，如果您确实决定使用客户端流程，那么您可以使用由于[弃用 offline_access 权限而引入的新端点来延长](http://developers.facebook.com/roadmap/offline-access-removal/)**有效**令牌的到期时间。

# apache - 在 Ubuntu 12.04 上的 Apache2 中配置 VirtualHost 的问题

> ID：10571123
> 
> 赞同：2
> 
> 时间：2012-05-13T10:48:24.767
> 
> 标签：apache, ubuntu, apache2, virtualhost

在阅读了各种教程 [1] 之后，我仍然无法让我的 VirtualHost 设置按预期工作。当我`403 Forbidden`尝试将 VirtualHost 与我的用户目录下的目录用作其`DocumentRoot`.

### 到目前为止我所做的

*   创建的文件`/etc/apache2/sites-available/workspace`具有以下内容：

    ```
    NameVirtualHost *:80
    <VirtualHost *:80>
        ServerName project-site
        DocumentRoot /home/user/Workspace/project/site
    </VirtualHost> 
    ```

*   编辑后的文件`/etc/hosts`现在产生：

    ```
    127.0.0.1   localhost
    127.0.1.1   my-machine

    # The following lines are desirable for IPv6 capable hosts
    ::1     ip6-localhost ip6-loopback
    fe00::0 ip6-localnet
    ff00::0 ip6-mcastprefix
    ff02::1 ip6-allnodes
    ff02::2 ip6-allrouters

    # VirtualHosts added by me
    127.0.0.1   project-site 
    ```

*   启用虚拟主机使用`sudo a2ensite workspace`

*   使用重新启动 Apache`sudo services apache2 restart`
*   尝试在我的网络浏览器中打开`http://project-site`和`http://project-site/test.html`（在哪里`test.html`存在）`/home/user/Workspace/project/site/`

### 发生什么了

*   重新启动 Apache 我在命令行上收到以下消息：

    ```
    * Restarting web server apache2
    apache2: Could not reliably determine the server's fully qualified domain name, using 127.0.1.1 for ServerName
    [Sun May 13 10:33:37 2012] [warn] NameVirtualHost *:80 has no VirtualHosts
    [ OK ] 
    ```

*   打开`http://project-site`或`http://project-site/test.html`提供“403 Forbidden”。

### 应该发生什么

`/home/user/Workspace/project/site`当我浏览到`http://project-site`.

### 到目前为止我学到了什么

通过阅读此站点上的类似问题，我了解到这可能是权限问题 [2]。中的文件`/home/user/Workspace/project/site`可能无法被`www-data`. 但我怎么知道或纠正这一点？

此外`.htaccess`，文件被提到 [3] 位于

```
/home/.htaccess
/home/user/.htacces
[...]
/home/user/path/to/project/.htaccess 
```

并且可能不可读。我从未创造过它们，我不想要它们，我会需要它们吗？

另一个问题 [4] 的第二个答案让我`NameVirtualHost`负责 Apache 重启时的警告。是否有必要，如果，我该如何正确使用它？

**任何帮助深表感谢！告诉我，如果您需要知道任何其他信息来定位问题。**

* * *

资源

1.  `http://www.thegeekstuff.com/2011/07/apache-virtual-host/, http://httpd.apache.org/docs/2.2/vhosts/name-based.html, http://mintarticles.com/read/software-articles/multiple-virtual-hosts-in-xampplampp-in-ubuntu,977/, http://www.pgorecki.pl/content/virtual-host-na-localho%C5%9Bcie-apache-ubuntu, ...`
2.  [Apache VirtualHost 403 被禁止](https://stackoverflow.com/questions/6959189/apache-virtualhost-403-forbidden)
3.  [Ubuntu、Apache、虚拟主机和访问被禁止](https://stackoverflow.com/questions/8880258/ubuntu-apache-virtualhost-and-access-forbidden)
4.  [虚拟主机配置](https://stackoverflow.com/questions/2674460/virtualhost-configuration)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:54:06.467

我找到了以下解决方案，不满足我，但解决了我的主要问题。实际上，它与 [1] 中建议的权限有关。`/home/user`网络服务器无法访问我的目录。为了授予我使用的最小权限

```
chmod 701 /home/user 
```

使其可访问。此外，我递归地为虚拟主机的 webroot 授予组所有权，`www-data`如 [2] 中推荐的那样，但我不确定这是否有必要。

```
sudo chown -R user:www-data /home/user/Workspace/project/site
sudo chmod -R g+s /home/user/Workspace/project/site 
```

我将在一个单独的问题中要求一个更优雅的解决方案。

关于提到的其他问题，除了其他资源之外，我在 [3] 的帮助下发现了以下内容：

*   `NameVirtualHost *:80`如果它出现在 apache 的其他配置文件之一中，则没有必要并且可能会导致虚拟主机描述中出现错误。
*   为了让 apache 知道它的完全限定域名是`localhost`one，创建了一个`/etc/apache2/conf.d/fqdn`包含 content的文件`ServerName localhost`。

* * *

1.  [https://stackoverflow.com/a/7576526/948404](https://stackoverflow.com/a/7576526/948404)
2.  [https://stackoverflow.com/a/9133067/948404](https://stackoverflow.com/a/9133067/948404)
3.  [https://help.ubuntu.com/community/ApacheMySQLPHP](https://help.ubuntu.com/community/ApacheMySQLPHP)

# c# - 在按 ID 跳过 HTML 元素时将页面加载到 WebBrowser 控件？

> ID：10571125
> 
> 赞同：0
> 
> 时间：2012-05-13T10:49:35.423
> 
> 标签：c#, html, winforms, browser

我试图通过 WebBrowser 控件加载某个页面，同时避免在名为“tb”的 DIV 元素中加载不必要的广告横幅。

我怎样才能做到这一点？我做了一些谷歌搜索并找到了一个使用 mshtml 参考的示例，但我无法从这个示例中使其工作：[https ://stackoverflow.com/a/1218875](https://stackoverflow.com/a/1218875)

有任何想法吗？

为什么这行不通？

```
using System;
using mshtml;
using System.Windows.Forms;

namespace Client
{
    public partial class Client : Form
    {
        public Client()
        {
            InitializeComponent();

            HTMLDocumentClass htmldoc = wbBrowser.Document.DomDocument as HTMLDocumentClass;
            IHTMLDOMNode node = htmldoc.getElementById("tb") as IHTMLDOMNode;
            node.parentNode.removeChild(node);
        }
    }
} 
```

我收到一个错误：

> “mshtml.HTMLDocumentClass”不包含“getElementById”的定义，并且找不到接受“mshtml.HTMLDocumentClass”类型的第一个参数的扩展方法“getElementById”（您是否缺少 using 指令或程序集引用？）

和：

> 无法嵌入互操作类型“mshtml.HTMLDocumentClass”。请改用适用的接口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:06:05.623

您可以使用以下方法执行此操作：

```
IHTMLDocument3 htmldoc = wbCtrl.Document.DomDocument as IHTMLDocument3;
IHTMLDOMNode node = htmldoc.getElementById("xBar") as IHTMLDOMNode;
node.parentNode.removeChild(node); 
```

# c - 如何在 ANSI/ISO C 中编写控制台菜单？

> ID：10571127
> 
> 赞同：5
> 
> 时间：2012-05-13T10:49:56.120
> 
> 标签：c

我正在尝试在 c 中创建一个简单的程序，用户必须在几个选项之间进行选择：

```
char command = '1';
while(command!='0') {
    printf("Menu:\n");
    printf("1\. First option\n");
    printf("2\. Second option\n");
    printf("0\. Exit\n");
    printf("Choose: 0,1,2?: ");
    command = getchar();
    while(getchar()!='\n');     
    switch(command) {
        case '0': break;
        case '1': functionCall1(); break; 
        case '2': functionCall2(); break;
    }
} 
```

我的代码的问题是，每次我输入 1,2 或 0 时，什么都没有发生，只有菜单再次打印。使用调试器，我可以看到，在 command = getchar() 之后 command 的值**等于**''，每隔一次。我以为吃换行符就够了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-20T09:56:44.123

试试我的自定义菜单，当我使用包含多项选择操作的程序时，我实现了它以使我的生活更轻松。菜单是可导航的（箭头：上、下、左、右），进行选择只需按回车键，菜单方向可以垂直或水平设置，填充可以设置为一组项目（子项），子起始位置，并延迟更新。

**菜单调用示例（垂直）：**

```
int response = menu("OPTIONS","[*]","->",
                    1,3,3,0,5,
                    "PROFILES","ACTIVITY","VIDEO","SOUND","GAMEPLAY"); 
```

最重要的是因为函数实现只需要 60 行代码。

**菜单实现：**

```
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <windows.h>

// LXSoft
// mod: cui/menu_021
// stdarg.h  -> used for variable list of arguments (va_list, va_start ...)
// windows.h -> used for Sleep function, for *nix use unistd.h

typedef unsigned short int usint_t;
// Menu function prototype
int menu(char* name, char* prefix, char* cursor, usint_t orientation,
         usint_t padding, usint_t start_pos, usint_t delay,
         usint_t num_childs, ...);

int main()
{
    int response = menu("OPTIONS","[*]","->",1,3,3,0,5,
                        "PROFILES","ACTIVITY","VIDEO","SOUND","GAMEPLAY");
    switch(response)
    {
        case 1:
            // doSomethingFoo1();
        break;
        case 2:
            //doSomethingFoo2();
        break;
        /*
         * .
         * .
         * .
         * case n:
         * break;
         */
    }
    printf("\nYour choice is: %d", response);
    return 0;
}

// Menu implementation
int menu
(
    char *name,        // Menu name (eg.: OPTIONS)
    char *prefix,      // Menu prefix (eg.: [*])
    char *cursor,      // Menu cursor (eg.: ->)
    usint_t orient,    /*
                        * Menu orientation vertical or horzontal.
                        * 0 or false for horizontal
                        * 1 or true for vertical
                        */
    usint_t padding,   // Menu childrens padding (eg.: 3)
    usint_t start_pos, // Menu set active child (eg.: 1)
    usint_t delay,     // Menu children switch delay
    usint_t childs,    // Number of childrens
    ...                /*
                        * Variable list of arguments char* type.
                        * Name of the childrens.
                        */
)
{
    va_list args;
    int tmp=0,pos;
    char chr;
    usint_t opt=start_pos;
    char* format=malloc
    (
        (
            strlen(name)+strlen(prefix)+strlen(cursor)+
            3+ /* menu suffix (1 byte) and backspace (2 bytes) */
            (2*childs)+ /* newline (2 bytes) times childs */
            (padding*childs)+ /* number of spaces times childs */
            childs*15 /* children name maxlen (15 bytes) times childs*/
        )*sizeof(char)
    );
    do
    {
        if(tmp!=0)chr=getch();
        if(chr==0x48||chr==0x4B)
            (opt>1&&opt!=1)?opt--:(opt=childs);
        else if(chr==0x50||chr==0x4D)
            (opt>=1&&opt!=childs)?opt++:(opt=1);
        else {/* do nothing at this time*/}
        strcpy(format,"");
        strcat(format,prefix);
        strcat(format,name);
        strcat(format,":");
        va_start(args,childs);
        for (tmp=1;tmp<=childs;tmp++)
        {
            (orient)?strcat(format,"\n"):0;
            pos=padding;
            while((pos--)>0) strcat(format," ");
            if(tmp==opt)
            {
                strcat(format,"\b");
                strcat(format,cursor);
            }
            strcat(format,va_arg(args,char*));
        }
        /*if(tmp!=childs)
        {
            fprintf(stderr,"%s: recieved NULL pointer argument,"
                           " child not named", __func__);
            return -1;
        }*/
        Sleep(delay);
        system("cls");
        printf(format);
        va_end(args);
    }while((chr=getch())!=0x0D);
    return opt;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T08:10:28.477

可能您应该尝试将其`int x`用作键来使用所需的命令，可能是这样的：

> ```
> while(x != 0)
> {
>     scanf("%d", &x);
>     switch (x)
>     {
>         printf("input '2' to...\n");
>         printf("input '3' to...\n");
>         printf("input '4' to...\n");
>         printf("input '5' to...\n");
>         printf("input '6' to...\n");
>         case 1:
>             head = Enqueue(head);
>             break;
>         case 2:
>             head1 = spisokMagazinovScenoiMensheiZadannoi(head, head1);
>             break;
>         case 3:
>             head1 = udalenieElementa(head1);
>             break;
>         case 4:
>             head1 = addNewMagazin(head1);
>             break;
>         case 5:
>             head1 = addNewMagazin(head1);
>             break;
>         case 6:
>             printToTheFile(head);
>             break;
> 
>     }
> } 
> ```

我在以前的作业中使用过它。希望对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T17:53:26.453

这是我的 func 菜单示例。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <windows.h>

int menu(char s[][80],int kolop){
    int pos = 0,push = 0,i,flag = 0;
    printf("MENU:\n>");
    puts(s[0]);
    for(i = 1;i < kolop;i++){
        printf(" ");
        puts(s[i]);
    }
    printf("Enter 5 to move the cursor down 8 to the top(Press ENTER to end)\n");
    do{
            if(flag == 1)
              printf("Error try to press 5,8 or ENTER\n");
            push = getch();
            flag = 1;
    }
    while(push != 56 && push != 53 && push != 13);
    flag = 0;
    system("cls");
    while(push != 13){
        if(push == 53){
            puts("MENU:");
            for(i = 0;i < kolop;i++){
                if(i == pos + 1 && flag == 0){
                    printf(">");
                    puts(s[i]);
                    flag = 1;
                    pos++;
                }
                else{
                    printf(" ");
                    puts(s[i]);
                }
            }
        }
        if(push == 56){
            puts("MENU:");
            for(i = 0;i < kolop;i++){
                if(i == pos - 1 && flag == 0){
                    printf(">");
                    puts(s[i]);
                    flag = 1;
                    pos--;
                }
                else{
                    printf(" ");
                    puts(s[i]);
                }
            }
        }
        _flushall();
        printf("Enter 5 to move the cursor down 8 to the top(Press ENTER to end)\n");
        flag = 0;
        do{
            if(flag == 1)
              printf("Error try to press 5,8 or ENTER\n");
            push = getch();
            flag = 1;
        }
        while(push != 56 && push != 53 && push != 13);
        flag = 0;
        system("cls");
    }
    pos++;
    return pos;
}

int main()
{
    SetConsoleCP(1251);
    SetConsoleOutputCP(1251);
    char s[][80] = {"1","2","3","4","5","6","7"};
    int i,pos = 0,push,flag = 0;
    pos = menu(s,7);
    printf("%d",pos);
    //system("cls");
  return 0;
} 
```

# php - 显示来自 mysql 的未序列化数组数据

> ID：10571128
> 
> 赞同：0
> 
> 时间：2012-05-13T10:50:02.240
> 
> 标签：php

我从我的数据库中获取这些数据并将它们反序列化以供我使用，并希望显示这些详细信息的输出

```
a:3:{s:8:"firstid";s:9:"photo1977";s:3:"secondid";s:16:"photos/view/1977";s:5:"thirdid";a:1:{i:0;s:40:"uploads/userfiles/201205/09_34_bqqi9.png";}} 
```

除了 thirdid 之外，一切都按预期工作。将输出作为 Array

我在用

```
$firstid = $arr['firstid'];
$secondid = $arr['secondid'];
$thirdid = $arr['thirdid']; 
```

显示输出。我得到了 firstid 和 secondid 的输出就好了，但是我没有得到thirdid 输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T10:53:39.190

`$arr['thirdid]`是一个数组本身，所以`$thirdid`持有一个数组。尝试

```
$thirdid = $arr['thirdid'][0]; 
```

获取文件路径或

```
print_r($arr['thirdid']); 
```

输出数组。

**更新。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T10:53:35.390

在序列化的数据中可以看到firstid和secondid都是纯字符串，但是thirdid是一个数组，使用print_r代替echo来输出数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T11:10:37.123

尝试

```
 var_dump($thirdid); 
```

例如`echo $thirdid;`

# mysql - mySQL 30天内的每日回顾

> ID：10571130
> 
> 赞同：0
> 
> 时间：2012-05-13T10:50:31.070
> 
> 标签：mysql

我想每天查看营业额摘要。

这是 mySQL 查询：

```
SELECT 
 o.date_purchased,
 round(ot.value,2)
FROM orders o
JOIN orders_total ot ON ot.orders_id = o.orders_id
WHERE o.date_purchased <=  '2012-05-12'
AND o.date_purchased >=  '2012-04-12'
AND ot.class =  'ot_total' 
```

结果，我收到了 10 个带有购买日期的订单。但我也会得到没有营业额期间的天数，比如这个例子： 2012-04-12 0,00 2012-04-13 120,95 2012-04-14 0,00

格雷茨罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:13:03.690

仅仅通过更改查询不可能做你想做的事，因为当它们根本不存在时，SQL 不会添加行。

两种可能的解决方案：

*   显示结果时填补应用程序中的空白 - 推荐的解决方案。
*   创建一个包含所有没有间隔的日期的附加表，并首先与表进行外部连接`orders`，尽管这样做通常没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:00:24.180

试试这样

```
$todayDate = date("Y-m-d");
$today = strtotime($todayDate);
$nextmonth =  mktime(0, 0, 0, date("m")+1, date("d"), date("Y")); 
```

然后在您的查询中使用此变量

```
SELECT 
 o.date_purchased,
 round(ot.value,2)
 FROM orders o
 JOIN orders_total ot ON ot.orders_id = o.orders_id
 WHERE o.date_purchased <=  $today
 AND o.date_purchased >=  $nextmonth
 AND ot.class =  'ot_total' 
```

您也可以使用介于

```
SELECT 
 o.date_purchased,
 round(ot.value,2)
 FROM orders o
 JOIN orders_total ot ON ot.orders_id = o.orders_id
 WHERE ot.class =  'ot_total'
 AND o.date_purchased  BETWEEN $today AND $nextmonth 
```

# jquery - jQuery Animation on hover a li

> ID：10571136
> 
> 赞同：0
> 
> 时间：2012-05-13T10:52:19.197
> 
> 标签：jquery, animation, mouseover, jquery-hover

我想要悬停动画

*   它将从顶部滑动，并且在鼠标移出时它应滑动顶部。我已经做了所有，但有一个小问题。[请在这里](http://jsfiddle.net/amitabhaghosh197/DSusn/)查看我的演示

    我的代码是 CSS

    ```
     #nav{width:200px;
    height:60px;
    background:#096;
    list-style:none;
    } 

     #nav li
     {
         width:200px;
         height:60px;
         float:left;
         position:relative;

    }

         #nav li a
         {
             width:200px;
             height:50px;
             background:#09F;
             color:#000;
             display:block;
             position:relative;
             margin:0;
             z-index:100;

             }

             #nav li a:hover
             {
                 color:#fff;
                 }

             #nav li .hover
             { width:200px;
             height:50px;
             background:#000;
             color:#0FF;
            display:none;
           background-position:0 0;
           position:absolute;
           top:0;
             margin:0;
             z-index:0;
             opacity:0.9;

                 } 
    ```

    脚本

    ```
    $(document).ready(function()
     {    
      $('#nav li a').append('<div class="hover">');

      $('#nav li a').hover(function (){
          $('.hover').stop(true, true).slideDown('1000');    

            }, 

            //Mouseout, fadeOut the hover class
            function() {

                $('.hover').stop(true, true).slideUp('1000');   

        }).click (function () {

            //Add selected class if user clicked on it
            $(this).addClass('selected');

          });
    }); 
    ```

    HTML

    ```
    <ul id="nav">

       <li><a href="index.html">Home</a></li>

      </ul> 
    ```

    但我只查看 .hover div 正在滑动，但我的主页文本没有查看。我还添加了 z-index 到标签，但是在幻灯片工作时也没有查看文本。

    请帮我整理一下。提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:06:04.820

设置`z-index: -1`为`.hover`。它将解决问题。

**演示：http:** [//jsfiddle.net/DSusn/2/](http://jsfiddle.net/DSusn/2/)

并注意您的`fadeIn`来电`fadeOut`。如果您需要将速度设置为毫秒数，它的参数应该是一个整数，即不带引号`fadeIn(1000)`。

# linq - NHibernate 3 Linq 和 IUserType

> ID：10571138
> 
> 赞同：0
> 
> 时间：2012-05-13T10:52:29.630
> 
> 标签：linq, nhibernate, iusertype

我有一张桌子：

```
Page (
   Id int,
   Name nvarchar(50),
   TemplateName varchar(50)
   ...
) 
```

并将其映射到域模型：

```
public class Page {
   public virtual int Id { get; set; }
   public virtual string Name { get; set; }
   public virtual Template Template { get; set; }
} 
```

请注意，在域模型中，“模板”属性不是“字符串”类型。模板类是这样的：

```
public class Template {
   public string Name { get; set; }
   // other properties...
} 
```

“模板”是从文件系统加载的。我有一个 TemplateManager 类：

```
public class TemplateManager {
    public static Template LoadTemplate(string templateName) {
        // check if there's a folder named <templateName>
    }
} 
```

我可以使用 IUserType 来映射“模板”属性。

```
public class PageMap : ClassMapping<Page> {
    public PageMap() {
        ...
        Property(c => c.Template, m => {
             m.Column("TemplateName");
             m.Type<TemplateUserType>();
        }
    }
}

public class TemplateUserType : IUserType {
    public object NullSafeGet(System.Data.IDataReader rs, string[] names, object owner)
    {
        var templateName = rs[names[0]].AsString();

        if (!String.IsNullOrEmpty(templateName))
        {
            return TemplateManager.LoadTemplate(templateName);
        }

        return null;
    }
} 
```

好的，到目前为止一切顺利。但问题是，如何在 Linq 查询中使用 Template 属性？例如：

```
var pages = session.Query<Page>().Where(it => it.Template.Name == "MyTemplate"); 
```

我认为解决方案可能是编写一个类（比如 TemplatePropertyHqlGenerator）实现`IHqlGeneratorForProperty`. 这是NHibernate 3提供的linq查询扩展点。**但是这个TemplatePropertyHqlGenerator类怎么写呢？**

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:11:04.423

该`IUserType`接口允许您定义一种被认为是原子的类型。也就是说，您可以在类型的实例之间进行直接比较，NHibernate 将知道如何翻译它们。

例如，以下查询将评估：

```
var template = new Template();
session.Query<Page>().Where(it => it.Template == template); 
```

如果你想定义一个类型，它具有你可以操作的组件值，你需要实现`ICompositeUserType`接口。该接口要求您将类型的属性定义为原子元素，从而为 NHibernate 提供了解该类型的特定属性所需的信息。

因此，它比`IUserType`实现要复杂一些，但它应该有助于实现您想要实现的目标。

`Money`这是实现类型接口的一个可以理解的示例：http: [//geekswithblogs.net/opiesblog/archive/2006/08/05/87218.aspx](http://geekswithblogs.net/opiesblog/archive/2006/08/05/87218.aspx)

# php - Kohana 3.2 - 路由问题

> ID：10571141
> 
> 赞同：1
> 
> 时间：2012-05-13T10:52:56.250
> 
> 标签：php, regex, routes, kohana, kohana-3

首先，Kohana 的文档很糟糕，在人们去“阅读文档”之前，我已经阅读了文档并且它们似乎没有多大意义，即使复制和粘贴一些代码也不适用于文档中的某些内容。

考虑到这一点，我有一条这样的路线：

```
//(enables the user to view the  profile / photos / blog, default is profile)
Route::set('profile', '<userid>(/<action>)(/)', array( // (/) for trailing slash
    "userid" => "[a-zA-Z0-9_]+",
    "action" => "(photos|blog)"
))->defaults(array(
    'controller' => 'profile',
    'action' => 'view'
)) 
```

这使我能够前往`http://example.com/username`用户个人资料，`http://example.com/username/photos`查看用户照片并`http://example.com/username/blog`查看博客。

如果有人去，`http://example.com/username/something_else`我希望它默认为`view`中指定的用户的操作，`<userid>`但我似乎找不到任何方法来做到这一点。

我可以这样做：

```
Route::set('profile', '<userid>(/<useraction>)(/)', array(
    "userid" => "[a-zA-Z0-9_]+",
    "useraction" => "(photos|blog)"
))->defaults(array(
    'controller' => 'profile',
    'action' => 'index'
)) 
```

然后在控制器中执行此操作：

```
public function action_index(){
    $method = $this->request->param('useraction');
    if ($method && method_exists($this, "action_{$method}")) {
        $this->{"action_{$method}"}();
    } else if ($method) {
    // redirect to remove erroneous method from url
    } else {
        $this->action_view(); // view profile
    }
} 
```

（它可能在`__construct()`功能上更好，但你明白了它的要点。）

如果有更好的方法可用（确实应该有），我宁愿不这样做

我认为答案可能在正则表达式中，但以下不起作用：

```
$profile_functions = "blog|images";
//(enables the user to view the images / blog)
Route::set('profile', '<id>/<action>(/)', array( 
            "id" => "[a-zA-Z0-9_]+",
            "action" => "($profile_functions)",
))->defaults(array(
    'controller' => 'profile'
));
Route::set('profile_2', '<id>(<useraction>)', array(
            "id" => "[a-zA-Z0-9_]+",
            "useraction" => "(?!({$profile_functions}))",
))->defaults(array(
    'controller' => 'profile',
    'action'     => 'view'
)); 
```

尽管当 ID 后面没有任何内容时它确实匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:52:16.540

我会这样设置路线：

```
Route::set('profile', '<userid>(/<action>)(/)', array(
    "userid" => "[a-zA-Z0-9_]+",
    "action" => "[a-zA-Z]+"
))->defaults(array(
    'controller' => 'profile',
    'action' => 'index'
)) 
```

然后在控制器 before() 方法中：

```
if(!in_array($this->request->_action, array('photos', 'blog', 'index')){
    $this->request->_action = 'view';
} 
```

或类似的东西，只需验证控制器中的操作...

编辑：

这也可以工作：

```
if(!is_callable(array($this, 'action_' . $this->request->_action))){
    $this->request->_action = 'view';
} 
```

# php - mysql distinct语句不起作用

> ID：10571145
> 
> 赞同：0
> 
> 时间：2012-05-13T10:53:06.527
> 
> 标签：php, mysql

```
 $query = "SELECT DISTINCT t.task_id, e.url,e.error_id, p.page_rank, e.scan_status, e.url_is_route,e.url_is_route,e.forbidden_word,e.google_host_fail,e.google_cache_fail,e.google_title_fail,e.robots_noindex_nofollow,e.xrobots_noindex_nofollow,e.title_fetch_warn,e.h1_fail,e.h2_fail,e.h3_fail,e.h1_warn,e.h2_warn,e.h3_warn 
              FROM `error_report` AS e 
              INNER JOIN task_pages AS t ON t.task_id=e.task_id
              INNER JOIN `pages` AS p ON p.page_id=t.page_id
              WHERE t.task_id=" . $this->task_id ; 
```

我希望查询仅由 t.task_id 区分。问题是当我添加更多字段时..查询不再不同。还有一种方法可以仅通过 t.task_id 选择不同的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T10:56:17.490

而不是`distinct`使用`group by`

```
$query = "SELECT t.task_id, e.url,e.error_id, p.page_rank, e.scan_status, e.url_is_route,e.url_is_route,e.forbidden_word,e.google_host_fail,e.google_cache_fail,e.google_title_fail,e.robots_noindex_nofollow,e.xrobots_noindex_nofollow,e.title_fetch_warn,e.h1_fail,e.h2_fail,e.h3_fail,e.h1_warn,e.h2_warn,e.h3_warn 
          FROM `error_report` AS e 
          INNER JOIN task_pages AS t ON t.task_id=e.task_id
          INNER JOIN `pages` AS p ON p.page_id=t.page_id
          WHERE t.task_id=" . $this->task_id
          ."group by t.task_id"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T10:59:19.337

如果添加更多字段，则应使用`GROUP BY`iirc。

请注意，您的额外字段*应该*是聚合，例如`MIN`，`MAX`等。MySQL 更宽容，并显示每个字段的第一个值（尽管显然不可靠）。

# java - 如何停止在android的活动应用程序窗口中显示应用程序

> ID：10571152
> 
> 赞同：2
> 
> 时间：2012-05-13T10:54:07.317
> 
> 标签：java, android

我制作了一个应用程序作为在后台运行的服务。这个应用程序基本上是一个电池警报。它工作正常，但唯一的问题是，当此服务运行时，它还会在活动应用程序任务管理器中显示此应用程序。因此，当我退出此应用程序时，它也会停止该服务。所以我想要的是仅当用户取消选中应用设置中的框时才停止此服务。如果它被选中，那么即使它在活动应用程序任务管理器中关闭，它也不应该被停止。

如何停止在任务管理器中显示我的应用程序？

**我想我应该在这里提供代码**这是我的服务类

```
public class BatteryService extends Service {
Notify notification = new Notify();
BatteryAlarm alarm = new BatteryAlarm();
private MediaPlayer mMediaPlayer;
boolean flag = false;

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

//method to start service
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    notification.initNotification(this, false);
    this.registerReceiver(this.mBatInfoReceiver, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));

    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

//Broadcast receiver to get battery info
private BroadcastReceiver mBatInfoReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context c, Intent i) {
        //notification.initNotification(c);

        int level = i.getIntExtra(BatteryManager.EXTRA_LEVEL, 0);
        int plugged = i.getIntExtra(BatteryManager.EXTRA_PLUGGED, 0);

        SharedPreferences getAlarm = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
        String alarms = getAlarm.getString("ringtones", "content://media/internal/audio/media/45"); // /system/media/audio/ringtones/ANDROMEDA.ogg , content://media/internal/audio/media/45
        Uri uri = Uri.parse(alarms);

        if(plugged == 2) {
            if(level == 100) {
                if(uri != null) {
                    if(flag == false) {
                        playAlarm(c, uri);
                        notification.initNotification(c, true);
                        Toast.makeText(c, "Battery charge is completed. Unplug your mobile phone!", Toast.LENGTH_LONG).show();
                        flag = true;
                    }
                }
            }
        } else if (plugged == 0) {
            if(uri != null) {
                stopAlarm();
            }
            notification.cancelNotification(c);
            //Toast.makeText(c, "Mobile is unplugged", Toast.LENGTH_LONG).show();   
        }   
    }
};

//play alarm method
private void playAlarm(Context c, Uri uri) {

    mMediaPlayer = new MediaPlayer();
    try {
        mMediaPlayer.reset();
        mMediaPlayer.setDataSource(getBaseContext(), uri);
        final AudioManager audioManager = (AudioManager) c.getSystemService(Context.AUDIO_SERVICE);
        if (audioManager.getStreamVolume(AudioManager.STREAM_ALARM) != 0) {
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
            mMediaPlayer.prepare();
            mMediaPlayer.start();
        }
    } catch (Exception ex) {
        ex.printStackTrace();
        onDestroy();
    }

}

//method to stop playing alarm
private void stopAlarm() {
    mMediaPlayer.stop();
    flag = false;
}

//method to stop service
public void onDestroy() {
    super.onDestroy();
    notification.cancelNotification(this);
    unregisterReceiver(this.mBatInfoReceiver);
    stopAlarm();
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}

} 
```

这是我的主要活动

```
public class BatteryNotify extends PreferenceActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.xml.prefs);
    addPreferencesFromResource(R.xml.prefs);

    SharedPreferences getCB = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    boolean cb = getCB.getBoolean("checkbox", true);
    final CheckBoxPreference checkboxPref = (CheckBoxPreference) getPreferenceManager().findPreference("checkbox");

    if(cb == true) {
        startService(new Intent(getBaseContext(), BatteryService.class));
    } else if(cb == false) {
        stopService(new Intent(getBaseContext(), BatteryService.class));
    }

    checkboxPref.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {

        public boolean onPreferenceChange(Preference preference, Object newValue) {
            if(newValue.toString().equals("true")) {
                startService(new Intent(getBaseContext(), BatteryService.class));
            } else {
                stopService(new Intent(getBaseContext(), BatteryService.class));
            }
            return true;
        }
    });

}

} 
```

这是我的清单文件

```
<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".BatteryNotify"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <service android:name=".BatteryService"></service>
</application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:14:44.663

最好的方法是创建一个`BroadcastReceiver`，在清单中用适当`intent-filter`的 s 注册它，当它收到一个时，它会启动`Service`or`Activity`执行您需要的任何任务。

编辑：

创建`BroadcastReceiver`一个单独的类并将其注册到清单中。当它接收到电池事件时，创建一个`PendingIntent`来启动`Service`. 这样，如果您的应用程序未运行，则无关紧要。它将为您启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:10:29.500

> 如何停止在任务管理器中显示我的应用程序？

出于明显的安全原因，您不能。

# java - 使用new创建字符串对象及其与intern方法的比较

> ID：10571158
> 
> 赞同：0
> 
> 时间：2012-05-13T10:55:01.857
> 
> 标签：java, string

我在 Kathy Sierra 的书中读到，当我们使用像 String s = new String("abc") 这样的 new 运算符创建字符串时，由于我们使用了 new 关键字，Java 将在普通（非池）内存中创建一个新的 String 对象，和 s 将引用它。此外，文字“abc”将被放置在池中。

intern() 表示如果 String 池已经包含一个字符串，则返回池中的字符串，否则，将 String 对象添加到池中并返回对该 String 对象的引用。

如果使用 new 创建的字符串“abc”也将字符串放入池中，那么 intern() 表示如果字符串池包含字符串，则返回池中的字符串，否则将字符串对象添加到池中。

另外我想知道我们是否使用 new 创建了一个字符串，那么实际上创建了多少个对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T10:57:44.837

**TL;DR**：如果你真的需要这样做`new String("abc")`，你就会知道你需要这样做，并且你会知道为什么。它是如此罕见，以至于说你永远不需*要这样做几乎是*有效的。只需使用`"abc"`.

* * *

长版：

当您拥有代码`new String("abc")`时，会在不同时间发生以下事情：

*   加载包含该代码的类时，如果带有字符的字符串`"abc"`不在实习池中，则会创建并放入实习池。
*   `new String("abc")`代码运行时 ：
    *   来自实习生池的字符串的引用`"abc"`被传递到`String`构造函数中。
    *   通过将传入的字符复制到构造函数中来创建和初始化一个*新对象。* `String``String`
    *   新`String`对象将返回给您。

> 如果使用 new 创建的字符串“abc”也将字符串放入池中，那么为什么`intern()`说如果字符串池包含字符串，则返回池中的字符串，否则将字符串对象添加到池中。

因为这就是这样`intern`做的。请注意，调用`intern`字符串文字是无操作的；字符串文字都是自动实习的。例如：

```
String s1 = "abc";               // Get a reference to the string defined by the literal
String s2 = s1.intern();         // No-op
System.out.println(s1 == s2);    // "true"
System.out.println(s1 == "abc"); // "true", all literals are interned automatically 
```

> 另外我想知道我们是否使用 new 创建了一个字符串，那么实际上创建了多少个对象？

您创建至少一个`String`对象（新的、非实习的），可能还有两个（如果字面量尚未在池中；但同样，当类文件的字面量被加载时，该位更早发生）：

```
String s1 = "abc";            // Get a reference to the string defined by the literal
String s2 = new String(s1);   // Create a new `String` object (guaranteed)
System.out.println(s1 == s2); // "false"
String s3 = s2.intern();      // Get the interned version of the string with these characters
System.out.println(s1 == s3); // "true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-13T16:43:00.233

字符串池是一个字符串引用池。对象仅在堆中创建。

当使用`new String("abc").intern()`或使用类似的方法时`String s = "abc"`；如果存在引用“abc”的引用，则检查字符串池。

如果“abc”的引用已经存在于池中，并且`.intern()`在引用`String object`创建的 using的引用上被调用`new String("abc")`，则由创建的对象`new String("abc")`有资格进行垃圾回收。请参阅下面的代码以获得更清晰的信息。

```
public static void main(String[] args) {
    String s = new String("abc");
    String a = s;
    System.out.println(s==a);// true
    String b = "abc";
    s = s.intern();
    System.out.println(s==a);// false
} 
```

# android - 带有Path.addArc的圆形扇形剪贴蒙版？

> ID：10571160
> 
> 赞同：6
> 
> 时间：2012-05-13T10:55:18.303
> 
> 标签：android, graphics, drawing, android-canvas, clipping

我需要创建一个圆形扇形的剪贴蒙版。

我可以使用以下方法绘制一个：

```
paint.setColor(0x88FF0000);
paint.setStyle(Style.FILL);
canvas.drawArc(oval, 0, 30, true, paint); 
```

我想将它用作剪切路径，所以我尝试过：

```
Path path = new Path();
path.addArc(oval, 0, 30);
canvas.clipPath(path, Op.REPLACE); 
```

但是 addArc 没有 useCenter 参数所以我得到的不是一个扇区而是一个段。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T18:16:19.313

好的，似乎没有使用剪贴蒙版的正确方法。

但是，还有另一种使用`PorterDuffXfermode`. 请参阅 ApiDemos 中的 Xfermodes。

我只是`drawArc`用操作员在我的图像上绘制一个扇区`DST_OUT`。这使得该扇区所覆盖的图像部分不可见（未绘制）。

```
paint = new Paint(Paint.ANTI_ALIAS_FLAG);
paint.setColor(0xFFFFFFFF);
paint.setStyle(Style.FILL);
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));

canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
drawable.draw(canvas);
canvas.drawArc(oval, 30, 90, true, paint); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:30:21.580

我需要调整适用于 Android 的 AChartEngine 库，以将饼图变成圆环图。我需要更换以下内容：

```
canvas.drawArc(oval, startAngle, sweepAngle, useCenter, paint); 
```

通过使用 Path 类以便能够使用剪辑。以下代码为我完成了这项工作：

```
Path path = new Path();
path.moveTo(oval.centerX(), oval.centerY());
path.addArc(oval, startAngle, sweepAngle);
path.lineTo(oval.centerX(), oval.centerY());
canvas.drawPath(path, paint); 
```

我希望这可以避免像我这样不熟悉 Canvas API 的人感到头疼。

# umbraco5 - Umbraco Hive 和服务层

> ID：10571167
> 
> 赞同：0
> 
> 时间：2012-05-13T10:56:41.523
> 
> 标签：umbraco5

我正在试验新的 Umbraco 5 蜂巢，我有点困惑。

我正在插入一个现有的 Linq to SQL 服务层，该层是我为 webforms 站点开发的。

我对存储库模式了解不多，我的服务处理与数据上下文的所有连接，并且工作得很好。

我已经创建了一些存储库，它们可以插入到 hive 中，并处理我的实体到 Umbraco TypedEntity 类型的转换。

这些存储库引用我现有的服务层，以检索、添加、更新和删除。这些服务还处理其他实体特定的功能，这些功能不会被 hive 使用。

现在，很高兴插入这些服务，并在 hive 存储库中引用它们，但根据我所读到的官方存储库模式，我似乎做错了事情。

我知道没有硬性规定，但我希望能对我为实现此功能所做的工作发表评论。

我在这里而不是 Umbraco 论坛问这个问题，因为我想要一个更广阔的视角。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T10:24:33.480

我个人觉得 Hive 太过分了。由于能够直接在 razor 宏中使用您自己的类，我认为最好的方法是完全放弃配置单元并简单地使用您的类。你为什么要交换现有服务的所有功能，只是为了使其适合 hive 界面？

如果您正在为其他 Umbraco 开发人员编写一个库，您可能需要这样做，但我个人认为 hive 在最坏的情况下是过度设计的，而在最好的情况下是针对新开发人员的抽象层。

所以，如果我要建议你，我会说考虑更一般的原则：“保持简单”和“你不需要它”。如果他们为您提供的界面提供了切实的好处，请实施它。如果没有，请考虑一下您从所有这些工作中真正获得了什么。

# c++ - 对进程有句柄如何注册以监视其关闭/重新启动/复制事件？

> ID：10571169
> 
> 赞同：3
> 
> 时间：2012-05-13T10:57:32.777
> 
> 标签：c++, winapi

拥有一个像这样的过程的句柄：

```
HANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION |
    PROCESS_VM_READ,
    FALSE, processID ); 
```

如何注册此流程更新事件 - 如关闭\重启？是否可以报名参加重复活动（启动第二个相同的流程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:04:58.830

进程句柄在它们代表的进程退出时发出信号。因此，要找出进程何时退出，您可以传递`hProcess`给`WaitForSingleObject`或任何其他等待函数。

# arrays - 使用该算法在最坏情况下二分查找会进行多少次比较？

> ID：10571170
> 
> 赞同：20
> 
> 时间：2012-05-13T10:57:43.313
> 
> 标签：arrays, algorithm, complexity-theory, binary-search

您好，下面是我的二进制搜索实现的伪代码：

```
Input: (A[0...n-1], K)
begin
   l ← 0; r ← n-1
   while l ≤ r do
      m ← floor((l+r)/2)
      if K > A[m] then l ← m+1
      else if K < A[m] then r ← m-1 else return m
      end if 
   end while
   return -1 // key not found
end 
```

我只是想知道如何计算这个实现在最坏情况下对大小为 n 的排序数组进行的比较次数？

比较次数 = lg n + 1？或不同的东西？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-13T11:23:19.193

在这种情况下，最坏的情况是，如果元素 K 不存在于 A 中并且小于 A 中的所有元素。那么我们在每个步骤中有两个比较：`K > A[m]`和`K < A[m]`。

因为在每一步中，数组都被分成两部分，每部分的大小`(n-1)/2`，我们有最大的`log_2(n-1)`步骤。

这导致总`2*log_2(n-1)`比较，渐近确实等于`O(log(n))`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-13T13:25:37.600

[对hielsnoppe 的回答的](https://stackoverflow.com/a/10571300/1011995)一个非常小的修正：

在`n`-element 数组 ( `n > 0`) 中，要比较的元素位于 index 处`m = floor((n-1)/2)`。所以有三种可能

1.  `A[m] < K`，然后在一次比较之后，在`n-1-m = ceiling((n-1)/2)`-element 数组中继续搜索。
2.  `A[m] > K`，然后在两次比较之后，在`m`-element 数组中继续搜索。
3.  `A[m] == K`，那么我们经过两次比较就完成了。

`n`因此，如果我们用 表示在-element 数组中搜索的最大（最坏情况）比较次数`C(n)`，我们有

```
C(0) = 0
C(n) = max { 1 + C(ceiling((n-1)/2), 2 + C(floor((n-1)/2) }, n > 0 
```

对于奇数`n = 2k+1`，地板和天花板是相同的，所以最大值显然是后者，

```
C(2k+1) = 2 + C(k) 
```

甚至`n = 2k`，我们发现

```
C(2k) = max { 1 + C(k), 2 + C(k-1) }. 
```

因为`n = 2`, 解决了`C(2) = 1 + C(1) = 1 + 2 = 3`, 对于所有更大的偶数`n`, 最大值是`2 + C(k-1)`, 因为`n >= 1`我们有`C(n) <= C(n+1) <= C(n) + 1`.

评估前几个的递归`n`，我们发现

```
C(0) = 0
C(1) = 2
C(2) = 3
C(3) = C(4) = 4
C(5) = C(6) = 5
C(7) = C(8) = C(9) = C(10) = 6
C(11) = ... = C(14) = 7
C(15) = ... = C(22) = 8
C(23) = ... = C(30) = 9 
```

所以通过归纳我们证明

```
C(n) = 2k, if 2^k <= n+1 < 2k + 2^(k-1), and
C(n) = 2k+1, if 2^k + 2^(k-1) <= n+1 < 2^(k+1) 
```

或者

```
C(n) = 2*log2(n+1) + floor(2*(n+1)/(3*2^floor(log2(n+1)))). 
```

这是一个确切的上限。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-13T11:11:21.303

根据 wikipedia page on [binary search](http://en.wikipedia.org/wiki/Binary_search_algorithm)，该算法的最坏情况性能是`O(lg n)`，它测量所需比较的渐近次数。正如@hielsnoppe 的回答所指出的那样，实际*最坏*情况的比较次数是。`2*lg(n-1)`

问题中的伪代码表示二进制搜索的典型实现，因此预期的性能复杂性适用于 size 的数组（或向量）`n`：

*   最佳案例表现： `O(1)`
*   平均案例表现：`O(lg n)`
*   最坏情况下的表现： `O(lg n)`

仔细检查，问题中的伪代码存在两个问题：

*   行：`if K > A[m] then return l ← m+1`应该读`if K > A[m] then l ← m+1`. 你还不能回来
*   行：`m ← floor((l+r)/2)`如果在使用固定大小的整数时数字足够大，可能会导致溢出。正确的语法因您使用的实际编程语言而异，但随之而来的一些事情将解决问题：`m ← (l + r) >>> 1`，`>>>`无符号右移运算符在哪里。[在此处](http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html)阅读有关该问题的更多信息。

# c - C 库教程

> ID：10571172
> 
> 赞同：1
> 
> 时间：2012-05-13T10:57:49.440
> 
> 标签：c

`for`我正在尝试学习如何用 C 编程。由于 C 与 C++ 相似，因此我在学习基本命令（如、`while`、`do`、变量声明、预处理器指令等）时没有任何问题。但是我发现很难理解 C 的库。有谁知道任何关于 C 库的教程和代码示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:02:55.470

Dennis M. Ritchie、Brian W. Kernighan - “C 编程语言”。

# security - 选择针对直接磁盘访问的安全 DBMS

> ID：10571175
> 
> 赞同：3
> 
> 时间：2012-05-13T10:58:39.117
> 
> 标签：security, encryption, disk, database, data-protection

我将创建一个 Java 应用程序来收集一些企业信息。
我的问题是 DBMS 安全性。
**编辑：我的应用程序未连接到网络以及整个数据库和应用程序。位于该应用程序的系统上。从那里访问；用户有 ACL，所以我不希望用户能够通过使用磁盘上的数据库文件来读取无法访问他们的数据。**
我需要一个 DBMS 来加密磁盘上的数据，以保护数据免受使用文本/十六进制编辑器或其他 SQL 浏览工具（如没有安全机制的 SQLite 或......）的人的攻击！

我可以使用哪个 DBMS 来确保只能通过我的应用程序（当然还有 DBMS 本身）而不是直接从磁盘访问数据？

MySQL或PostgreSQL有这种直接磁盘访问保护机制吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T16:50:47.640

如果个人可以访问磁盘本身，那么他很有可能可以访问您的应用程序的代码和其他数据。并且加密密钥（用于加密数据库文件）也将可用。如果计算机设备落入不法分子的手中，则此问题没有通用解决方案（请参见下面的一种方法）。

抛开上述内容，您有几个选择：

1.  SQLite 有[全数据库加密插件](http://www.hwaci.com/sw/sqlite/see.html)。
2.  您可以使用 TrueCrypt 或其替代方法之一安装磁盘
3.  我们有几个产品（即 SolFS 和 CallbackFilter），让您可以使用虚拟磁盘 (SolFS) 或通过过滤文件 I/O 请求 (CallbackFilter) 动态加密/解密文件来动态加密 DB 文件。

如果您能够让用户以某种方式提供密码/密钥，那么您可以使用会话密钥来加密数据库数据，然后使用每个用户的密码加密此会话密钥。然后，当用户想要访问数据时，您要求他输入密码，解密会话密钥并使用该密钥访问数据库。通过这种方式，用于加密数据的密钥不会以“明文”形式存储，并且对磁盘进行物理访问不会泄露数据。

# c++ - c++中windows应用程序的好库

> ID：10571176
> 
> 赞同：-1
> 
> 时间：2012-05-13T10:58:53.607
> 
> 标签：c++, user-interface, windows-applications

我已经学习 c++ 8 个多月了，我想我已经掌握了 c++ 的每一个基本概念。我已经创建了一些不错的基于控制台的应用程序，但现在我想构建具有漂亮界面的 GUI 应用程序。

初学者开发基于 GUI 的 Windows 应用程序有哪些好的免费 C++ 库？

还请推荐一些与该库相关的网络上可用的好教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:06:31.167

> 有哪些不错的免费 C++ 库

[Qt 4](http://qt.nokia.com)。

> 一些很好的教程

[Qt 文档](http://doc.qt.nokia.com/)。教程可以在[这个页面](http://qt-project.org/doc/qt-4.8/)上找到。

# logging - 如何禁用 log.Logger

> ID：10571182
> 
> 赞同：49
> 
> 时间：2012-05-13T11:00:27.790
> 
> 标签：logging, go, flags

我有一些使用该`log`包的大量检测代码。现在是时候关闭日志记录了，我无法确定如何关闭标准记录器。

我错过了什么吗？我应该在进行日志调用之前检查标志，还是在生产中将它们注释掉？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-05-21T15:25:03.397

当 io/ioutil 包中存在一个通用 io.Writer 时，没有理由为通用 io.Writer 创建自己的类型。

```
import (
    "log"
    "io/ioutil"
)

func init() {
    log.SetOutput(ioutil.Discard)
} 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-12-24T21:10:33.247

对于完全禁用日志，实际上最好调用`log.SetFlags(0)`^([Joril](https://stackoverflow.com/questions/10571182/go-disable-a-log-logger#comment43485550_10688098))并将输出设置为无操作`io.Writer`（即，`log.SetOutput(ioutil.Discard)`）

但即使在此之后，操作也会在[500-600 ns/op](https://gist.github.com/Avinash-Bhat/48c4f06b0cc840d9fd6c#file-log_test-go "YMMV，在 i7-4500U CPU @ 1.80GHz 上测试") ^(*1左右空闲*)

这仍然可以通过使用自定义实现来缩短（到*100 ns/op*`Logger`左右） ，并将所有功能实现为无操作 - 如此处所示[（](https://gist.github.com/Avinash-Bhat/48c4f06b0cc840d9fd6c#file-log_test-go "包日志的基准")仅为`Println`bervity 覆盖）。

所有这些的替代方法是使用具有级别的自定义日志框架并将其设置为完全关闭。

但请注意，常用的日志记录库之一 ( [logrus](https://github.com/Sirupsen/logrus) ) 具有[性能影响——无论如何，在它使用](https://github.com/Sirupsen/logrus/issues/125 "问题 #125")*3K+ ns/op*执行的[基准测试](https://gist.github.com/Avinash-Bhat/48c4f06b0cc840d9fd6c "要旨")中都可以找到相同的内容。

 **有偏见的意见：从基准测试来看，无论后端和格式如何，库[go-logging](https://github.com/op/go-logging)在设置to`Logger`时的性能与自定义实现相当`Level``-1`*

（基准源可以在[这里](https://gist.github.com/Avinash-Bhat/48c4f06b0cc840d9fd6c "要旨")找到）

基准的输出如下：

```
testing: warning: no tests to run
PASS
BenchmarkGoLogging-4                                             1000000          2068 ns/op
BenchmarkGoLoggingNullBackend-4                                  5000000           308 ns/op
BenchmarkGoLoggingNullBackendWithFancyFormatter-4                3000000           435 ns/op
BenchmarkGoLoggingOffLevel-4                                    20000000           109 ns/op
BenchmarkGoLoggingNullBackendAndOffLevel-4                      20000000           108 ns/op
BenchmarkGoLoggingNullBackendWithFancyFormatterAndOffLevel-4    20000000           109 ns/op
BenchmarkLog15-4                                                  200000          7359 ns/op
BenchmarkLog15WithDiscardHandler-4                               2000000           922 ns/op
BenchmarkLog15WithDiscardHandlerAndOffLevel-4                    2000000           926 ns/op
BenchmarkLog15WithNopLogger-4                                   20000000           108 ns/op
BenchmarkLog15WithNopLoggerDiscardHandlerA-4                    20000000           112 ns/op
BenchmarkLog15WithNopLoggerAndDiscardHandlerAndOffLevel-4       20000000           112 ns/op
BenchmarkLog-4                                                   1000000          1217 ns/op
BenchmarkLogIoDiscardWriter-4                                    2000000           724 ns/op
BenchmarkLogIoDiscardWriterWithoutFlags-4                        3000000           543 ns/op
BenchmarkLogCustomNullWriter-4                                   2000000           731 ns/op
BenchmarkLogCustomNullWriterWithoutFlags-4                       3000000           549 ns/op
BenchmarkNopLogger-4                                            20000000           113 ns/op
BenchmarkNopLoggerWithoutFlags-4                                20000000           112 ns/op
BenchmarkLogrus-4                                                 300000          3832 ns/op
BenchmarkLogrusWithDiscardWriter-4                                500000          3032 ns/op
BenchmarkLogrusWithNullFormatter-4                                500000          3814 ns/op
BenchmarkLogrusWithPanicLevel-4                                   500000          3872 ns/op
BenchmarkLogrusWithDiscardWriterAndPanicLevel-4                   500000          3085 ns/op
BenchmarkLogrusWithDiscardWriterAndNullFormatterAndPanicLevel-4   500000          3064 ns/op
ok      log-benchmarks  51.378s
go test -bench .  62.17s user 3.90s system 126% cpu 52.065 total 
```

^(*#1：**YMMV**，在 i7-4500U CPU @ 1.80GHz 上测试*)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-13T11:06:42.467

```
type NullWriter int
func (NullWriter) Write([]byte) (int, error) { return 0, nil }

// ...

log.SetOutput(new(NullWriter)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T20:03:07.280

这种方法允许您在运行时打开和关闭日志记录：

```
type LogWriter struct{
    enabled bool
}

func (l *LogWriter) Enable() {
    l.enabled = true
}

func (l *LogWriter) Disable() {
    l.enabled = false
}

func (l *LogWriter) Write([]byte) (int, error) {
    if l.enabled {
        //...
    }
    return 0, nil
} 
```

这种方法启用或禁用整个运行时的日志记录：

```
type LogWriter struct{}

func (l *LogWriter) Write([]byte) (int, error) {
    if some.Constant {
        //...
    }
    return 0, nil
} 
```

[where`some.Constant`将是您在编译之前设置的常量（生成*“生产”*二进制文件）或在通过命令行标志运行程序时仅设置一次的变量（类似于`myprogram --enable-logging=true`）]

使用这两种方法，您可以几乎完全保持当前代码不变。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-21T22:48:16.207

由于`SetOutput()`仅为全局记录器定义，自定义编写器对于其他记录器仍然很方便。一个简短的写法是这样的：

```
type LogWriter struct{ io.Writer }
func (w *LogWriter) Enable()  { w.Writer = os.Stdout }
func (w *LogWriter) Disable() { w.Writer = ioutil.Discard } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T07:50:33.420

其他人来这里寻找这个和其他日志记录工具的注意事项：看看 log4go 包，因为它包括关闭日志记录、设置日志级别、日志轮换、重定向到文件等可能有用。

[请参阅http://godoc.org/code.google.com/p/log4go](http://godoc.org/code.google.com/p/log4go)上的文档*

# android - 制作可以处理大位图的表达式

> ID：10571185
> 
> 赞同：0
> 
> 时间：2012-05-13T11:00:38.000
> 
> 标签：android, bitmap

像许多其他人一样，我有恼人的 VM 预算问题。我正在从 sdcard 中获取文件，并使用以下方法对其进行解码并对其进行压缩：

```
 BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 1; 
```

问题是我每次调用 onCreate 方法时都会得到位图。因此，在打开手机或启动活动几次后，它会崩溃。我能找到避免这种情况的唯一方法是：`yourBitmap.recycle()`，但您无法捕获回收的位图。

我需要一个表达式，即使它通常会在 VM 预算上崩溃，它仍然能够显示位图。我将位图显示为可绘制对象，因此经典的 unbindDrawables 独奏不起作用。我需要一个表达式，将 Bitmap 压缩到几乎没有，或者回收并显示一个相同大小的新 Bitmap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:03:40.620

试试看这个：

[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

看着这个：

[http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)

另外，关于可绘制对象，请注意在不需要它们之后您没有对它们的任何引用。可绘制对象可能导致内存泄漏。

# .net - 如何使用温莎城堡解决不同的问题

> ID：10571187
> 
> 赞同：3
> 
> 时间：2012-05-13T11:01:25.137
> 
> 标签：.net, castle-windsor

我有 2 个控制器依赖于`ISomeService`

```
public class FirstController
{
    public FirstController(ISomeService someService)
    {
    }
}

public class SecondController
{
    public SecondController(ISomeService someService)
    {
    }
} 
```

`ISomeService`有一个实现，这取决于`IRepository`：

```
public class SomeService : ISomeService
{
    public SomeService(IRepository repository)
    {
    }
} 
```

`IRepository`有 2 个实现：`FirstRepository`和`SecondRepository`.

如何配置容器以解决`FirstController`with`FirstRepository`和`SecondController`with `SecondRepository`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:00:30.013

您可以使用不同的名称注册 2 个实现，然后可以在调用 Resolve 方法时传递名称。[http://castleproject.org/container/documentation/trunk/manual/windsortypedocs/Generated_IWindsorContainer.html#IWindsorContainer_Methods5](http://castleproject.org/container/documentation/trunk/manual/windsortypedocs/Generated_IWindsorContainer.html#IWindsorContainer_Methods5)

检查[温莎文档中的此部分](http://stw.castleproject.org/Windsor.Three-Calls-Pattern.ashx#Call_two_-_Resolve__1)

# php - 如何将 $_POST 属性放入 httpost 以及如何将带有列表的对象发送到 PHP (JSON)

> ID：10571189
> 
> 赞同：1
> 
> 时间：2012-05-13T11:01:50.893
> 
> 标签：php, android, json, http-post

我正在开发适用于 Android 操作系统的应用程序。有一件事，我不知道该怎么办。我需要将信息发送到 PHP Web 服务（我已经创建）。

我的问题（第一个更容易，但我没有找到任何答案）。我在某个地方找到了这个

```
HttpPost httppost = new HttpPost(address);
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
HttpResponse response = httpclient.execute(httppost); 
```

它有效，因为地址包含 GET 信息。我想问一下，如何或在哪里放置`$_POST`信息。我的意思是，在 PHP 中，我将检查是否 (isset($_POST['name']) - 那么该“名称”应该放在哪里？？我有一个 php，我正在检查设置了哪个帖子。

我的第二个问题是，我想将信息发送到类似于 Object 的 PHP web。

```
Student student = new Student (String name, .. );
Class class = new Class(long id, String name, int floor, List<Students>); 
```

我想将包含对象列表的“类”对象发送到 php 服务。

我在想，我可以将班级属性和列表作为其他帖子发送（例如，只是一组学生）。我不太了解 JSON，但我认为，它会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:50:53.320

回答你的第一个问题

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost ht = new HttpPost("http://192.168.1.208/moodle/demo.php");
List<NameValuePair> nvp = new ArrayList<NameValuePair>(); 
```

像这样添加变量及其值

```
nvp.add(new BasicNameValuePair("variable", "value-to-pass")); 
```

知道了。

```
UrlEncodedFormEntity uefe = new UrlEncodedFormEntity(nvp, HTTP.UTF_8);
ht.setEntity(uefe);
HttpResponse response = httpclient.execute(ht);
HttpEntity entity = response.getEntity();
InputStream is = entity.getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
StringBuilder sb = new StringBuilder();
String line = null;
String result="";
while ((line = reader.readLine()) != null)
    sb.append(line + "\n");
result = sb.toString();
is.close(); 
```

对不起，但我不知道第二个问题的答案.. :(

# ios - APNS 通知未到达在 Apple MDM 中注册的设备

> ID：10571190
> 
> 赞同：7
> 
> 时间：2012-05-13T11:02:03.023
> 
> 标签：ios, apple-push-notifications, mdm

使用 Apple MDM。它是使用 APNs 的 MDM。

*   mobileconfig的主题与APSP-XXX.pem的Subject相同。
*   设备令牌和 PushMagic 的字符串在设置 mobileconfig 后到达 MDM 服务器。

我使用 APNs 为设备令牌发送了电报的措辞。它被 PushMagic 的字符串替换。虽然`{"mdm":"xxxxxxxxxxxxx-xxxx-xxxx-xxxx"}`从 MDM 服务器通过 APNs 发送，但无法到达 iPhone。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:37:08.070

非常仔细地遵循[MDM_Protocol pdf。](https://media.blackhat.com/bh-us-11/Schuetz/BH_US_11_Schuetz_InsideAppleMDM_WP.pdf)

如果您关注此链接： http: [//www.softhinker.com/in-the-news/iosmdmvendorcsrsigning](http://www.softhinker.com/in-the-news/iosmdmvendorcsrsigning) 然后验证几件事。

使用此命令从 customerPrivateKey.pem 中删除密码

```
openssl rsa -in customerPrivateKey.pem -out PlainKey.pem 
```

然后使用此命令合并从门户[https://identity.apple.com/pushcert/](https://identity.apple.com/pushcert/)下载的 APNS 证书（例如 CustomerCompanyName.pem）

```
cat CustomerCompanyName.pem PlainKey.pem > PlainCert.pem 
```

现在这个 PlainCert.pem 文件可以在您的服务器中用作 APNS/MDM 证书。

如果仍有问题，请在此处显示您的设备日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T22:52:06.707

我制作了一个执行供应商签名部分的 python 脚本，因此您不必使用 softhinker java 代码。

[https://github.com/grinich/mdmvendorsign](https://github.com/grinich/mdmvendorsign)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T18:24:17.273

这个问题可能是因为两个原因：

1.  key 和 pem 都应该存在。
2.  使用的密码应该属于创建pem时使用的密码

# php - 如何从 mysql db 填充下拉列表并基于选择以 php 形式填充另一个下拉列表？

> ID：10571193
> 
> 赞同：0
> 
> 时间：2012-05-13T11:02:39.363
> 
> 标签：php, mysql

我有一种情况，我在 mysql 表中有列，我从中填充下拉列表以获取另一个表中第二个下拉列表的查询条件。我如何使用 php 并选择第二个下拉列表传递给另一个输入表单？我在两个表中都有相同的 formBarkod 列，它是表数据之间的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:15:25.000

这听起来像是 javascript 的工作。您可以使用 php 和 mysql 填充每个下拉列表，但您需要 javascript 才能使第一个下拉列表中的选择影响下一个下拉列表中的哪个可见。PHP 和 MySQL 看起来像这样：

```
<?
//Assuming $dbh is a proper mysqli object...
$options = $dbh->query("SELECT * FROM options");

echo '<select id="firstDropdown">';
while($o = $options->fetch_object()) {
    echo '<option value="'.$o->id.'">'.$o->name.'</option>';
}
?> 
```

对每个下拉菜单重复该过程。

然后，您必须编写一些 javascript 来进行更改。我不知道足够的“纯”javascript 来做到这一点，但我可以向您展示它在 jQuery 中的样子。假设您的 html 如下所示：

```
<select id="firstDropdown">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
</select>
<select id="dropdown1" class="dropdown">
    ...
</select>
<select id="dropdown2" class="dropdown">
    ...
</select>
<select id="dropdown3" class="dropdown">
    ...
</select> 
```

然后 jQuery 看起来像这样（当然都包含在 document.ready() 中）

```
$(".dropdown").hide();

$("#firstDropdown").on("change",function(){
    $(".dropdown").hide();
    var value = $("#firstDropdown").val();
    $("#dropdown"+value).show();
}); 
```

基本流程是您隐藏所有辅助下拉菜单。然后，每当第一个下拉列表中的值发生更改时，您就会重新隐藏第二个下拉列表，并仅显示所需的下拉列表。您可以通过实际动态创建 dom 元素或使用 ajax 调用来获取新的下拉列表来做更多的事情，但这涵盖了基本概念。

[编辑：这是jsfiddle.net](http://jsfiddle.net/jakemask/S8eQp/)上的一个工作示例

# quicksort - 快速排序粉碎的例子

> ID：10571195
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:02:56.470
> 
> 标签：quicksort

我知道快速排序不是稳定的方法，即对于相等的元素，数组的成员可能不会放置在正确的位置，我需要数组的示例（其中元素重复多次）快速排序不起作用（例如需要三种方式的划分方法）。我无法在互联网上找到这样的阵列示例，您能帮帮我吗？

当然我可以使用其他类型的排序方法来解决这个问题（如堆排序，合并排序等），但我的态度是在现实世界的例子中知道，什么样的数据包含快速排序的风险，因为众所周知，这是最有用的方法，经常使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:09:45.257

无论给出什么数组，快速排序都不应该崩溃。

当排序算法被称为“稳定”或“不稳定”时，它并不是指算法的安全性或它是否崩溃。它与维护具有相同键的元素的相对顺序有关。

举个简单的例子，如果你有：

[9、5、7、5、1]

然后一个“稳定”的排序算法应该保证在排序后的数组中，前 5 个仍然放在第二个 5 之前。即使对于这个简单的例子没有区别，但有些例子会有所不同，例如在排序时基于一列的表（您希望其他列保持与以前相同的顺序）。

在此处查看更多信息：[http ://en.wikipedia.org/wiki/Stable_sort#Stability](http://en.wikipedia.org/wiki/Stable_sort#Stability)

# cocoa - 将选项卡焦点移动到另一个 NSWindow 的视图，然后再返回

> ID：10571197
> 
> 赞同：0
> 
> 时间：2012-05-13T11:03:07.017
> 
> 标签：cocoa, focus

在 NSTextField 上有一个无边框窗口，该窗口中有一个 NSButton。canBecomeKeyView 为这个 NSButton 返回 YES。我希望能够模拟 setNextKeyView 让这个 NSButton 成为 NSTextField 之后的下一个焦点持有者。无边框窗口是主窗口的子窗口。NSTextField 位于主窗口上。做这件事的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T09:53:45.927

我遇到了同样的问题。

在界面生成器中，我有一个带有 NSTextField 和 NSButton 的窗口。我希望能够在它们之间切换。我做了我认为正确的事情：

*   将 NSWindow 的 intialFirstResponser 设置为我的 NSTextField
*   将 NSTextField nextKeyView 设置为 NSButton
*   将 NSButton nextKeyView 设置为我的 NSTextField

但这并没有按预期工作。

事实证明，在 Apple > System Preferences > Keyboard 中有一个设置允许您按 Tab 键在以下位置之间移动键盘焦点：

*   仅限文本框和列表
*   所有控件

第一个选项是默认设置的。一旦更改为所有控件，一切都按预期工作。

# mysql - 代码在mysql中加倍netsalary

> ID：10571200
> 
> 赞同：0
> 
> 时间：2012-05-13T11:04:30.580
> 
> 标签：mysql, join

请谁能告诉我为什么下面的代码不从扣除表中计算金额，然后从出勤表中的金额总和中扣除以获得净工资。在应用扣除之前，它不会将出勤表中的金额总和加倍，而不是相加和扣除，我非常感激。

```
select sum(attendance.amount) - max(deduction.amount) 
from attendance 
join deduction on attendance.staffid = deduction.staffid 
where attendance.staffid = some_staffid 
    and month(attendance.date) = some_month
    and month(deduction.date_approved) = some_month 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:07:41.870

只是一个疯狂的猜测 - 每个出勤都有 2 条扣除记录 => 连接将复制出勤表中的金额 => 总和将汇总这些重复的记录

简单的解决方案（但我害怕表现不佳）将是：

```
select sum(a) - max_d
from (
  select attendance.amount a, deduction.amount d, max(deduction.amount) max_d
  from attendance 
  join deduction on attendance.staffid = deduction.staffid 
  where attendance.staffid = some_staffid 
      and month(attendance.date) = some_month
      and month(deduction.date_approved) = some_month
)
where d = max_d 
```

# discovery - 如何获取对等列表？

> ID：10571201
> 
> 赞同：0
> 
> 时间：2012-05-13T11:04:33.380
> 
> 标签：discovery, jxta

我有 jxta 的问题。我没有得到同行名单。

```
 @Override public void discoveryEvent(DiscoveryEvent event) {
           DiscoveryResponseMsg res = event.getResponse();
           Enumeration en = res.getAdvertisements();
            if (en != null) {
            while (en.hasMoreElements()) {
            PeerAdvertisement a = (PeerAdvertisement)en.nextElement();
            Console.append(a.name()+"\n");
            }
           } 
```

和

`discovery.getRemoteAdvertisements(null, DiscoveryService.PEER, null, null, 1, null);`

Console.append - 附加到 JTextArea。在此控制台中仅打印一个对等点，但 jxtanetwork 有 3 个对等点。错误在哪里？PS 我从[How do I find peers and send messages in JXTA-JXSE 2.6 中获取代码？](https://stackoverflow.com/questions/8910929/how-do-i-discover-peers-and-send-messages-in-jxta-jxse-2-6) PPS对不起我的英语不好..我希望你的帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:46:02.907

`1`是问题，这是您将获得的最大答案数（1 小于 3）。

# tridion - AudienceManagerProfile 没有数据访问对象

> ID：10571215
> 
> 赞同：2
> 
> 时间：2012-05-13T11:07:54.723
> 
> 标签：tridion

当我进行任何 OE API 调用时，得到“没有 AudienceManagerProfile 的数据访问对象”。

在 cd_core 日志中，我可以看到：

```
2012-05-13 11:59:30,520 DEBUG StorageManagerFactory - Default storage provider has caching set to: false
2012-05-13 11:59:30,520 DEBUG StorageManagerFactory - Loaded following dao Properties[publication=0, typeMapping=AudienceManagerProfile, storageId=profiledb, cached=false] for publication/typeMapping/itemExtension: 0 / AudienceManagerProfile / null
2012-05-13 11:59:30,520 DEBUG StorageManagerFactory - Loading a non cached DAO for publicationId/typeMapping/itemExtension: 0 / AudienceManagerProfile / null
2012-05-13 11:59:30,535 ERROR Contact - Unable get contact for requested Identification fields
java.sql.SQLException: No Data Access Object for AudienceManagerProfile 
```

我检查了我的 cd_storage_conf.xml 文件，它看起来是正确的（我将它与论坛上 Nuno 的工作版本进行了比较）。

进一步在日志中说：

```
2012-05-13 11:59:29,724 INFO  StorageManagerFactory - Checking if product Tridion CD Storage is enabled....
2012-05-13 11:59:29,724 INFO  StorageManagerFactory - Tridion CD Storage is running in limited mode 
```

“限制模式”听起来很糟糕！这是问题的根本原因还是无关？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:44:02.273

如果代理以受限模式运行，则意味着它找不到“完整”代理的许可证。所以要么它找不到许可证文件，要么许可证文件不包含代理许可证。

发生这种情况时，代理将回退到使用其内置的 ItemType 映射，这意味着它只支持将它们存储到文件系统。

通常最好将 指向`cd_storage_conf.xml`许可证文件的正确位置。您不会以这种方式依赖内置搜索路径，并且代理将开始使用您配置的映射。

```
<License Location="/path/to/cd_licenses.xml"/> 
```

# c# - Visual Studio 调试，请参阅/不参阅 debug.writelines

> ID：10571216
> 
> 赞同：0
> 
> 时间：2012-05-13T11:08:58.593
> 
> 标签：c#, visual-studio, visual-studio-2010, debugging

是否有任何机制可以让您`Debug.WriteLine(someinfo)`在调试项目时标记一些复选框，如果我不想调用这个 debug.writeline(someinfo) 就不会被调用。我想查看有关小数据的调试信息，但在大数据上，我可以将其关闭，而无需注释掉所有 debug.writelines。我`#DEBUG`可以在 Visual Studio 中使用 /preprocessor 标志吗？当我想查看而不是根据某种标志查看 debug.writelines 时，我仍然处于“调试”上下文中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T11:33:16.627

可用选项：

*   右键单击“输出”窗口并取消选中“程序输出”选项
*   Project + Properties，Build选项卡，取消勾选“Define DEBUG constant”选项并重建
*   添加`Trace.Listeners.Clear();`到您的 Main 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:18:07.773

您可以创建一个新的构建配置（`DEBUG_NO_TRACE`例如，基于 Debug，并命名为 ）。

菜单构建 => 配置管理器

在 Active Solution Configuration 中，选择 new ， Copy settings from Debug

`#DEBUG_NO_TRACE`然后在您的项目属性（构建选项卡）中创建一个新的预处理器标志。

并将`#IF DEBUG_NO_TRACE`其放在您想要与众不同的地方。

并在需要时选择构建配置。

但也许有一个更优雅的解决方案......

# php - 将 wget shell exec 与 args 一起使用

> ID：10571217
> 
> 赞同：1
> 
> 时间：2012-05-13T11:09:06.020
> 
> 标签：php, linux, wget, shell-exec

我的脚本中有一个奇怪的问题，我正在尝试使用 wget 下载文件...在第一个 GET var 之后，剩下的只是igonre。

我的代码：

```
$data = shell_exec("wget http://www.domain.com/file.php?id=51B82153C123C6BE&key=09cfa30c2261cf5a -o progress.log & echo $! > errors.log"); 
```

我的意思是为什么它不使用密钥 GET 并且只使用第一个 GET 作为 id？

# hadoop - 如何在 Hadoop Map/Reduce 作业中访问 DistributedCache？

> ID：10571221
> 
> 赞同：1
> 
> 时间：2012-05-13T11:10:13.253
> 
> 标签：hadoop, mapreduce, distributed-cache

我正在尝试使用`GenericOptionsParser`'`-files`标志将一个小文件传递给我正在运行的作业：

```
$ hadoop jar MyJob.jar -conf /path/to/cluster-conf.xml -files /path/to/local-file.csv data/input data/output 
```

这应该将作业发送到我的集群并附加 local-file.csv 以便在需要时可供 Mapper/Reducer 使用。当我在伪分布式模式下运行它时效果很好，但是当我在集群上启动作业时，似乎找不到该文件。我正在使用映射器的`setup`方法读取文件，如下所示：

```
public static class TheMapper extends Mapper<LongWritable, Text, Text, Text> {

  @Override
  public void setup(Context context) throws IOException, InterruptedException {

    URI[] uriList = DistributedCache.getCacheFiles( context.getConfiguration() );
    CsvReader csv = new CsvReader(uriList[0].getPath());

    // work with csv file..
  }

  // ..
} 
```

当作业运行时，我得到以下异常：

```
java.io.FileNotFoundException: File /hdfs/tmp/mapred/staging/hduser/.staging/job_201205112311_011/files/local-file.csv does not exist.
at com.csvreader.CsvReader.<init>(Unknown Source)
at com.csvreader.CsvReader.<init>(Unknown Source)
at com.csvreader.CsvReader.<init>(Unknown Source)
at MyJob$TheMapper.setup(MyJob.java:167)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:142)
... 
```

知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T14:08:13.363

这是一个常见问题 - 该`-files`选项作为 DistributedCache 之外的一个选项。

使用`-files`时，GenericOptionsParser 配置一个名为的作业属性`tmpfiles`，而 DistributedCache 使用一个名为 的属性`mapred.cache.files`。

分布式缓存还期望文件已经在 HDFS 中并将它们复制到任务节点，其中 -files 在作业提交时将文件复制到 HDFS，然后将它们复制到每个任务节点。

在您的情况下，要使您的代码正常工作，只需创建一个`File`对象并命名您传入的文件（显然这需要您知道本地文件的文件名，并将其硬编码到您的映射器代码中）。该文件将位于当前工作目录中：

```
@Override
public void setup(Context context) throws IOException, InterruptedException {
  CsvReader csv = new CsvReader(new File("local-file.csv"));

  // work with csv file.. 
```

}

# jquery - 将更具描述性/有意义的 id 名称添加到其他选项卡

> ID：10571222
> 
> 赞同：0
> 
> 时间：2012-05-13T11:10:13.363
> 
> 标签：jquery

我希望能够将更具描述性/有意义的 id 名称添加到 #tab0 到 #tab3 等以外的选项卡。对于此示例，我想以 URL 为目标的最后一个选项卡`http://domainName/tagetpage/#services`。请记住，我宁愿不使用 jQuery UI 选项卡。此脚本允许我为特定选项卡添加书签或从另一个页面链接到特定选项卡。谢谢

这是我的代码：

```
jQuery(document).ready(function(){

    $('#tabs').append('<ul id="tabs"></ul>')
    $('.tabs').each(function(i){
        // Gives element a unique ID -
        this.id = 'tab'+i;
        // If a title does not exist then use the ID for anchor text -
        var title = (this.title) ? this.title : this.id;
        // Define contents of link (to go within list items) -
        var link = '<a href="#' + this.id + '">' + title + '</a>';
        // Append list items to UL -
        $('<li>'+link+'</li>').appendTo('#tabs ul');

        // Check if the URL contains an anchor
        var url = document.location.toString();
        if (url.match('#')) {
            // Get the name of the anchor used in the URL
            var anc = '#' + url.split('#')[1];
            // Hide all TABS -
            $('.tabs').hide();
            // Show the corresponding content
            $(anc).show();      
        } else {
            // Hide all Tabs except the first one -
            if(i===0) $('.tabs:not(#'+this.id+')').hide();
    }
    if (url.match('#')) {       

        // Get the name of the anchor used in the URL    
        var anc = '#' + url.split('#')[1];
        $('#tabs a[href='+anc+']').addClass("active"); }// < ADD THIS LINE
    })

    $('#tabs a').click(function(){

        // get ID of tab to be shown -
        var id = '#'+this.href.split('#')[1];
        // Hide all TABS -
        $('.tabs').hide();
        // Show the tab which matches anchor's href -
        $(id).show();
        $('a').removeClass("active");
        $(this).addClass("active");
        // Don't forget to return false -
        //return false;
    })
   }); 
```

HTML

```
 <section>

 <div class="tablist">
 <div id="tabs"></div>
 </div>

 <div class="tabs" title="Tab 1 title">
<p>content for tab 0</p>
 </div>

 <div class="tabs" title="Tab 2 title">
<p>content for tab 1</p>
 </div>

 <div class="tabs" title="Tab 2 title">
<p>Some cool content for the third tab</p>
 </div>
 <div class="tabs" title="Services">
 <h2>Tab 4 </h2>
 <p>content for tab 3</p>
 </div>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:19:17.870

然后使用该`title`属性设置 ID。但要小心，所有`title`s 都应该是唯一的。

```
this.id = this.title ? this.title.toLowerCase().replace(/\s+/g, "_") : 'tab' + i; 
```

它将`tab_2_title`为`Tab 2 title`和。`services`_`Services`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:43:24.200

我仍然认为对于唯一 ID，您可以使用元素位置：这是**VisioNs** answer + i

```
this.id = this.title ? this.title.toLowerCase().replace(/\s+/g, "_") + '_' + i : 'tab' + i; 
```

# java - 自我更新的 Java 应用程序？

> ID：10571227
> 
> 赞同：1
> 
> 时间：2012-05-13T11:11:00.633
> 
> 标签：java, jar, auto-update, server-application

我正在编写一个 Java 服务器端应用程序，我想提供内置功能，以便苹果可以自行更新。我希望应用程序轮询服务器，如果有可以更新到的新版本，那么它应该让用户激活更新命令。

我希望在此更新期间发生以下情况：

*   下载新版本的新 JAR 文件
*   将该 JAR 的内容重新加载到主应用程序中
*   从旧 JAR 中卸载任何旧类

理想情况下，我希望这种情况发生，而在此过程中不会更改应用程序 PID。

我相信詹金斯确实做到了这一点，但我无法弄清楚他们是如何做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:20:55.153

卸载/加载技术是部署到应用程序容器中的 Java EE 应用程序的标准配置，您可以免费获得。

唯一的问题是如何以编程方式管理更新。它必然是特定于容器的。如果您不部署到 Java EE 容器，则必须深入研究自定义类加载器的血腥细节。但这只是一个开始，因为它不仅仅是卸载类。例如，您的应用程序可能已经启动了需要正常关闭的线程，或者打开了套接字等。

# android - Twitter 中的趋势跟踪器 (Android)

> ID：10571228
> 
> 赞同：0
> 
> 时间：2012-05-13T11:11:02.700
> 
> 标签：android, twitter, trading, tracker

我正在开发一个应用程序，它将用于 twitter 中的趋势跟踪器。该应用程序可以打开并显示 twitter 上的流行趋势，然后您可以单击流行的单词，它会带您进入正在谈论的内容。

我认为它被称为趋势跟踪器。

请我想知道您是否有这样做的开源代码，或者可以帮助执行此操作的库。任何信息都可以使用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:18:20.613

[一个从Twitter API 趋势文档](https://dev.twitter.com/docs/api#trends)开始的好地方

要立即了解全球趋势，请致电

```
https://api.twitter.com/1/trends/1.json 
```

这将返回趋势，并包含指向 Twitter 搜索页面的链接。

# mysql - 简单的sql脚本不起作用

> ID：10571231
> 
> 赞同：-5
> 
> 时间：2012-05-13T11:11:06.690
> 
> 标签：mysql

我创建了简单的 sql 脚本并尝试在 phpMyAdmin 中执行它。它给出了错误信息：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '{ id INT, firstName VARCHAR(15), lastName VARCHAR(15), email VARCHAR(20)' at line 1 
```

这是代码：

```
CREATE TABLE phoneList{id INT,
    firstName VARCHAR( 15 ) ,
    lastName VARCHAR( 15 ) ,
    email VARCHAR( 20 ) ,
    phone VARCHAR( 15 ) }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:13:11.433

`{`s 必须替换为`(`并且s`}`为`)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T11:14:29.370

```
CREATE TABLE phoneList(
    id INT,
    firstName VARCHAR( 15 ) ,
    lastName VARCHAR( 15 ) ,
    email VARCHAR( 20 ) ,
    phone VARCHAR( 15 ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T11:54:17.390

不要在代码中使用 { }。您需要使用 ( ) 代替。

```
CREATE TABLE phoneList(id INT,
firstName VARCHAR( 15 ) ,
lastName VARCHAR( 15 ) ,
email VARCHAR( 20 ) ,
phone VARCHAR( 15 ) ); 
```

希望这可以帮助！

凯:-)

# php - 将结果保存在 preg_replace 的数组中

> ID：10571234
> 
> 赞同：-2
> 
> 时间：2012-05-13T11:11:29.870
> 
> 标签：php, mysql, arrays, preg-replace

我需要在数组中制作 $with 才能在 preg_replace 中使用它？？

```
foreach($matches[0] as $match) {
$sql = "insert into url values('$id','$match','$shorturl')";
mysql_query($sql,$con);
$with="<a href=\"http://127.0.0.1/url1/". $shorturl ."\">http://127.0.0.1/". $shorturl ."</a>";
 } 
$html_links = preg_replace('"\b(http://\S+)"',$with , $_POST['url']); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:16:03.917

您可能想使用`preg_match_all()`, 将结果保存在数组中。例子：

```
preg_match_all("e( |s)", "the matches", $matches); 
```

`$matches`将包含所有匹配项。

查看文档以获取更多详细信息：http: [//php.net/manual/en/function.preg-match-all.php](http://php.net/manual/en/function.preg-match-all.php)

* * *

编辑：如果要将 $with 保存在数组中，请使用以下命令：

```
foreach($matches[0] as $match) {
// $sql...
// mysql...
$with[] = "<a href=\"http://127.0.0.1/url1/". $shorturl ."\">http://127.0.0.1/". $shorturl ."</a>";
 } 

for ($w in $width) {
   // do something nice with each width, using $w
   $html_links = preg_replace('"\b(http://\S+)"',$w, $_POST['url']);
} 
```

# javascript - 带走域名并保存位置

> ID：10571238
> 
> 赞同：-3
> 
> 时间：2012-05-13T11:12:10.310
> 
> 标签：javascript, youtube

> **可能重复：**
> [Javascript 正则表达式：如何从 URL 获取 youtube 视频 ID？](https://stackoverflow.com/questions/3452546/javascript-regex-how-to-get-youtube-video-id-from-url)

JS有没有办法拿走喜欢`http://www.youtube.com`并保留id？

示例： `http://www.youtube.com/watch?v=Y_UmWdcTrrc&feature=plcp`到`watch?v=Y_UmWdcTrrc&feature=plcp`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:17:22.660

您可能可以通过[indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/indexOf)和[substring](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring) javascript 函数进行字符串操作，以获取[URL 路径](http://en.wikipedia.org/wiki/Uniform_resource_locator#Syntax)，如下所示：

```
var url = 'http://www.youtube.com/watch?v=Y_UmWdcTrrc&feature=plcp';
var path = '';

if (url.indexOf('.com/') != -1) {
    path = url.substring(url.indexOf('.com/') + 5);
} 
```

# ajax - 多类别下拉父>子+根据用户权限

> ID：10571241
> 
> 赞同：1
> 
> 时间：2012-05-13T11:12:51.210
> 
> 标签：ajax, wordpress, permissions, drop-down-menu, categories

我正在尝试制作一个顶部有父类别下拉列表的页面，因此一旦您选择任何类别，如果有子类别，它将加载另一个下拉列表。并且根据选择内容（类别页面）将在不刷新页面的情况下加载。

我从 wordpress codex 中找到了两个代码，如下所示

```
<li id="categories">
    <h2><?php _e('Posts by Category'); ?></h2>
    <form action="<?php bloginfo('url'); ?>/" method="get">
    <div>
<?php
$select = wp_dropdown_categories('show_option_none=Select category&show_count=1&orderby=name&echo=0&hierarchical=1&hide_empty=0');
$select = preg_replace("#<select([^>]*)>#", "<select$1 onchange='return this.form.submit()'>", $select);
echo $select;
?>
    <noscript><div><input type="submit" value="View" /></div></noscript>
    </div></form>
</li> 
```

和

```
<li id="categories"><h2><?php _e('Posts by Category'); ?></h2>
    <?php wp_dropdown_categories('show_option_none=Select category'); ?>

<script type="text/javascript"><!--
    var dropdown = document.getElementById("cat");
    function onCatChange() {
        if ( dropdown.options[dropdown.selectedIndex].value > 0 ) {
            location.href = "<?php echo get_option('home');
?>/?cat="+dropdown.options[dropdown.selectedIndex].value;
        }
    }
    dropdown.onchange = onCatChange;
--></script>
</li> 
```

两个代码都可以正常工作并加载具有所选类别的页面。但是我真正想要的是最初只有一个带有父类别列表的下拉列表，当用户选择该类别时，将出现另一个带有子类别的下拉列表，并且如果选择的不是另一个，则会在子类别中出现一次..和依此类推，取决于类别的深度。

我还想只列出登录用户有权访问的那些类别，其余的将被隐藏。

非常感谢。

# c++ - 如何读取管道并将其放入带有 mingw 的字符串变量中？

> ID：10571246
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:13:38.977
> 
> 标签：c++, windows, mingw, pipe

我正在尝试编写一个简单的测试程序来执行以下操作：

```
echo Hello world! | myprogram.exe 
```

输出将是：

```
I heard: "Hello world!". Message length: 12 chars. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:31:09.240

使用在<iostream> 中声明的输入流std::cin。具体用法取决于您的需要，即您需要不同的功能来读取单词、字符、整行甚至所有输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:20:17.807

我发现，这是功能：

```
string readStdin() {
  stringstream ss;
  string line;
  while (getline(cin, line)) {
    ss << line << endl;
  }
  cin.clear();
  return ss.str();
} 
```

# c++ - ctime 在哪里以及如何分配内存？

> ID：10571248
> 
> 赞同：3
> 
> 时间：2012-05-13T11:14:02.163
> 
> 标签：c++, memory-management, ctime

我正在使用[ctime](http://www.cplusplus.com/reference/clibrary/ctime/ctime/)函数来获得`time_t`变量的可读表示。`ctime`声明如下：

```
char *ctime (const time_t *timer); 
```

您可以看到它返回一个指向结果 char 数组的指针，而没有在参数中传递任何 char 指针。因此，我想知道在哪里`ctime`分配 char 缓冲区，谁将销毁它，而不是在`malloc`被认为是一团糟的函数内部分配内存（当然，除了各种 's ）。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:16:29.710

从您引用的链接：

> 保存此字符串的数组由 ctime 和 asctime 函数**静态分配和共享。**每次调用这些函数中的任何一个时，都会覆盖该数组的内容

该数组的存在时间与程序一样长，任何人都不得释放它。

POSIX 2008 有一个[`ctime_r`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/ctime_r.html)可重入的函数（你传入你的缓冲区），但它在 C 或 C++ 中不是标准的。

# qt - CMake、Qt 和 CMAKE_INCLUDE_PATH

> ID：10571249
> 
> 赞同：2
> 
> 时间：2012-05-13T11:14:23.223
> 
> 标签：qt, cmake

我找到了一个很好的答案，关于如何使用 CMake 在 Qt 中找到可执行文件，[cmake not find Qt4](https://stackoverflow.com/questions/9933939/cmake-not-finding-qt4)

你如何使用 CMAKE_INCLUDE_PATH？我试过了，但我得到了一个错误：

```
 cmake_minimum_required(VERSION 2.8)

set(CMAKE_MODULE_PATH ${CMAKE_SOURCE_DIR}/../cmake_modules)

project(vrvu)

find_package(OpenGL REQUIRED)(CMAKE_INCLUDE_PATH <--- this is where I'm getting an error
 C:\QtSDK\Desktop\Qt\4.8.0\msvc2010\bin)find_package(Qt4 COMPONENTS QtCore QtGui QtOpenGL REQUIRED)
include(${QT_USE_FILE})
find_package(Coin3 REQUIRED)
find_package(Quarter REQUIRED)

add_subdirectory(bullet-2.77)
add_subdirectory(starlight)

file(GLOB SOURCES "*.cpp" "*.cxx" "*.h" "*.hpp")

include_directories(${OPENGL_INCLUDE_DIR} ${QT_INCLUDE_DIR} ${COIN_INCLUDE_DIR} ${QUARTER_INCLUDE_DIR} "./bullet-2.77/src" "./starlight")
link_directories(${QT_LIB_DIR} ${COIN_LINK_DIRECTORIES} ${QUARTER_LINK_DIRECTORIES})

add_definitions(${QT_DEFINITIONS} ${COIN_DEFINITIONS} ${QUARTER_DEFINITIONS})

add_executable(vrvu ${SOURCES})
target_link_libraries(vrvu ${OPENGL_LIBRARIES} ${QT_LIBRARIES} ${COIN_LIBRARIES} ${QUARTER_LIBRARIES} LinearMath BulletCollision starlight) 
```

抱歉，代码太长了……谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:44:15.163

这里有几个问题。

我不确定这是否只是一个错字，但你不能只是将指令附加到命令`CMAKE_INCLUDE_PATH`的末尾`find_package`，你需要一个单独的`set`命令：

```
find_package(OpenGL REQUIRED)
set(CMAKE_INCLUDE_PATH "C:\\QtSDK\\Desktop\\Qt\\4.8.0\\msvc2010\\bin")
find_package(Qt4 COMPONENTS QtCore QtGui QtOpenGL REQUIRED) 
```

请注意，如果您使用反斜杠，则指定的路径需要对分隔符进行转义。或者，您可以使用单个正斜杠代替双反斜杠，即使在 Windows 上也是如此。在这种情况下，将路径放在引号中没有任何效果，但如果路径包含空格，则进入引号是一个好习惯。

设置[`CMAKE_INCLUDE_PATH`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#variable%3aCMAKE_INCLUDE_PATH)扩展了 CMake 在执行`find_path`和`find_file`调用时尝试的路径列表。这对调用很有用`find_package`，但在这种情况下更重要的是设置扩展所有命令[`CMAKE_PREFIX_PATH`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#variable%3aCMAKE_PREFIX_PATH)的搜索路径。`find_XXX`这确实意味着您需要从路径中删除“\bin”，因为它`CMAKE_PREFIX_PATH`在搜索可执行文件时附加到：

```
set(CMAKE_PREFIX_PATH "C:\\QtSDK\\Desktop\\Qt\\4.8.0\\msvc2010") 
```

接下来，`file(GLOB SOURCES "*.cpp" "*.cxx" "*.h" "*.hpp")`。虽然这实际上不是错误，但通常不赞成使用这种技术创建源文件列表，因为如果将文件添加或删除到源树中，CMake 将没有“知识”并且不会重新跑。推荐的方法是手动将每个源文件添加到 CMakeLists.txt 中，这样添加或删除都会自动导致 CMake 重新运行。

此外，“ `SOURCES`”是变量名的错误选择，因为它也代表 CMake 目标的属性。

另一种不受欢迎的做法是使用[`link_directories`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3alink_directories). 文档说明了为什么通常不需要它，这里应该是这种情况。

这`add_definitions`条线也可能是不必要的。Qt 确实定义了定义，但在您这样做时已经添加了它们`include(${QT_USE_FILE})`（请参阅[FindQt4 的文档](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module%3aFindQt4)），因此您在此处添加了两次。我不熟悉 Coin3 或 Quarter，但它们实际上可能不会生成任何必需的预处理器定义。您可以通过添加以下内容来检查它们的内容：

```
message("COIN_DEFINITIONS: ${COIN_DEFINITIONS}")
message("QUARTER_DEFINITIONS: ${QUARTER_DEFINITIONS}") 
```

暂时（在相应的`find_package`调用之后）。如果这些是空的，您可以删除`add_definitions`呼叫。

假设变量`${COIN_LIBRARIES}`并`${QUARTER_LIBRARIES}`指定这些库的完整路径，那么我认为你应该很高兴。

# php - 用 3 列 PHP 在表格中动态显示图像

> ID：10571255
> 
> 赞同：0
> 
> 时间：2012-05-13T11:15:02.377
> 
> 标签：php, sql-server, pagination, html-table

我正在尝试在动态生成的表中显示从数据库获取的图像，该表将像这样连续显示 3 列图像

```
"Image1   Image 2  Image 3    
Image 4  Image 5  Image 6     
etc" 
```

这是我现在拥有的代码：

```
 <?php
        $dynamicList = "";
        while( $row = sqlsrv_fetch_array($stmt)) 
            {   
                $rownumber = $row['rownumber'];
                $end_at = $items_on_page + $start_from;

                if (($rownumber>$start_from)&&($rownumber<=$end_at))
                {
                    $prod_id = $row['productID'];
                    $cat_id = $row['catalogueID'];
                    $col_id1 = $row['colour1'];
                    $col_id2 = $row['colour2'];
                    $col_id3 = $row['colour3'];

                    $sql3 = "SELECT * FROM product_colours WHERE colourID =? OR colourID =? OR colourID =?"; 
                    $params3 = array($col_id1,$col_id2,$col_id3);
                    $stmt3 = sqlsrv_query( $conn, $sql3, $params3);

                    $count = 1;
                    while( $row3 = sqlsrv_fetch_array( $stmt3)) 
                    {
                        switch ($count)
                        {
                            case 1:$colour1 = $row3['colour_description'];break;
                            case 2:$colour2 = $row3['colour_description'];break;
                            case 3:$colour3 = $row3['colour_description'];break;
                        }
                        $count++;
                    }

                    $sql3 = "SELECT catalogueID, product_name, product_price, description FROM product_catalogue WHERE catalogueID = ?"; 
                    $params3 = array($cat_id);
                    $stmt3 = sqlsrv_query( $conn, $sql3, $params3);

                    $columncount = 0;
$dynamicList = '<table width="744" border="0" cellpadding="6"><tr>';
while( $row3 = sqlsrv_fetch_array( $stmt3)) 
{
  $prod_name = $row3['product_name'];
  $prod_price = $row3['product_price'];
  $prod_desc = $row3['description'];

  $dynamicList .= '<td width="135"><a href="product_details_women.php?productID=' . $prod_id . '">
      <img src="images/products/Small/Women/' . $prod_id . '.jpg" alt="' . $prod_name . '" width="129" height="169" border="0">
    </a>
  </td>

  <td width="593" valign="top">' . $prod_name . '<br>
  £' . $prod_price . '<br>
  <a href="product_details_women.php?productID=' . $prod_id . '">View Product Details</a></td>';

if($columncount == 2)
{
 $dynamicList .= '</tr><tr>';
 $columncount = 0;
}
 else
{
  $columncount++; 
 }
}

$dynamicList .= '</tr></table>';

echo $dynamicList;

                        }

                        }
                        ?> 
```

但是由于某种原因，图像一直只显示在一列中。我希望能够在每行 3 列中显示它们。我尝试将所有代码放在一个while循环中，但这也不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:18:37.760

```
$dynamicList = '<table width="744" border="0" cellpadding="6">';
while( $row3 = sqlsrv_fetch_array( $stmt3)) 
{
    $prod_name = $row3['product_name'];
    $prod_price = $row3['product_price'];
    $prod_desc = $row3['description'];

    $dynamicList .= '<tr><td width="135"><a href="product_details_women.php?productID=' . $prod_id . '"><img src="images/products/Small/Women/' . $prod_id . '.jpg" alt="' . $prod_name . '" width="129" height="169" border="0"></a></td><td width="593" valign="top">' . $prod_name . '<br> £' . $prod_price . '<br><a href="product_details_women.php?productID=' . $prod_id . '">View Product Details</a></td></tr>';

}

  $dynamicList .= '</table>';

  echo $dynamicList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:20:21.187

```
$columncount = 0;
$dynamicList = '<table width="744" border="0" cellpadding="6"><tr>';
while( $row3 = sqlsrv_fetch_array( $stmt3)) 
{
  $prod_name = $row3['product_name'];
  $prod_price = $row3['product_price'];
  $prod_desc = $row3['description'];

  $dynamicList .= '<td width="135"><a href="product_details_women.php?productID=' . $prod_id . '">
      <img src="images/products/Small/Women/' . $prod_id . '.jpg" alt="' . $prod_name . '" width="129" height="169" border="0">
    </a>
  </td>

  <td width="593" valign="top">' . $prod_name . '<br>
  £' . $prod_price . '<br>
  <a href="product_details_women.php?productID=' . $prod_id . '">View Product Details</a></td>';

if($columncount == 2)
{
 $dynamicList .= '</tr><tr>';
 $columncount = 0;
}
 else
{
  $columncount++; 
 }
}

$dynamicList .= '</tr></table>';

echo $dynamicList; 
```

# c++ - 有没有办法在 C++ 中预先声明嵌套类？

> ID：10571265
> 
> 赞同：5
> 
> 时间：2012-05-13T11:16:51.583
> 
> 标签：c++, reference, nested, prediction

> **可能重复：**
> [C++ 中嵌套类型/类的前向声明](https://stackoverflow.com/questions/951234/forward-declaration-of-nested-types-classes-in-c)

对于类的简单交叉引用，预先声明类名并将其用作引用是可行的。以这种方式，表示是一个指针。但是如果我想交叉引用两者的嵌套类（看下面的例子），我会遇到麻烦，因为似乎没有办法预先声明一个嵌套类。

所以我的问题是：有没有办法预先声明嵌套类，以便我的示例可以工作？

如果没有：是否有一个通用的解决方法，这不会使代码过于丑陋？

```
// Need to predeclare it to use it inside 'First'
class Second;
class Second::Nested; // Wrong

// Definition for my 'First' class
class First
{
public:
    Second::Nested* sested; // I need to use the nested class of the 'Second' class.
                            // Therefore I need to predeclare the nested class.
    class Nested { };
};

// Definition for my 'Second' class
class Second
{
public:
    First::Nested* fested; // I need to use the nested class of the 'First' class.
                           // This is okay.
    class Nested { };
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:21:06.210

简而言之，答案是否定的。

但是您应该首先寻找[类似的问题](https://stackoverflow.com/questions/951234/forward-declaration-of-nested-types-classes-in-c)...

**编辑：**一种可能的解决方法可能是将两个类包装在另一个类中，并在包装​​器内转发嵌套类。

```
class Wrapper
{
public:

   // Forward declarations
   class FirstNested;
   class SecondNested;

   // First class
   class First
   {
   public:
      SecondNested* sested;
   };

   // Second class
   class Second
   {
   public:
      FirstNested* fested;
   };
}; 
```

这样，您必须实现它们`Wrapper::A`，`Wrapper::B`同时仍将它们与您正在实施的任何命名空间隔离开来。

# r - 在 R 中的树状图中着色分支

> ID：10571266
> 
> 赞同：3
> 
> 时间：2012-05-13T11:16:54.603
> 
> 标签：r, dendrogram

亲爱的居民 R 天才们，

我想在没有标记叶子的树状图中为簇的分支着色。

我在 Stackoverflow 上找到了以下脚本：

```
clusDendro <- as.dendrogram(Clustering)
labelColors <- c("red", "blue", "darkgreen", "darkgrey", "purple")

## function to get colorlabels
colLab <- function(n) {
   if(is.leaf(n)) {
       a <- attributes(n)
       # clusMember - a vector designating leaf grouping
       # labelColors - a vector of colors for the above grouping
       labCol <- labelColors[clusMember[which(names(clusMember) == a$label)]]
       attr(n, "nodePar") <- c(a$nodePar, lab.col = labCol)
   }
   n
}

## Graph
clusDendro <- dendrapply(clusDendro, colLab)
op <- par(mar = par("mar") + c(0,0,0,2))
plot(clusDendro,
     main = "Major title",
     horiz = T, type = "triangle", center = T)

par(op) 
```

我已尝试将其按如下方式适应我的数据，但没有成功。

```
Gdis.UPGMA<-hclust(Gdis, method = "average", members=NULL)
k<-12
Gdiswo<-reorder.hclust(Gdis.UPGMA, Gdis, labels = FALSE)
cutg <- cutree(Gdiswo, k=k)

clusDendro <- as.dendrogram(Gdiswo)
labelColors <- c("red", "blue", "darkgreen", "darkgrey", "purple")

## function to get colorlabels
colLab <- function(n) {
   if(is.leaf(n)) {
       a <- attributes(n)
       # cutg - a vector designating leaf grouping
       # labelColors - a vector of colors for the above grouping
       labCol <- labelColors[cutg[which(names(cutg) == a$label)]]
       attr(n, "nodePar") <- c(a$nodePar, lab.col = labCol)
   }
   n
}

## Graph
clusDendro <- dendrapply(clusDendro, colLab)
op <- par(mar = par("mar") + c(0,0,0,2))
plot(clusDendro,
     main = "Major title",
     horiz = T, type = "triangle", center = T)

par(op) 
```

我怀疑是 n 引起了问题，但我不确定我应该放什么而不是 n。由于论文截止日期迫在眉睫，我将不胜感激任何建议。谢谢，-伊丽莎白

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:12:39.683

您需要设置`edgePar`树状图对象的元素。

在帮助中`?dendrapply`有一个设置节点标签颜色的示例。通过仅更改一行以指向`"edgePar"`并设置`col`，您几乎就在那里：

```
attr(n, "edgePar") <- c(a$nodePar, list(col = mycols[i], lab.font= i%%3)) 
```

完整的修改示例：

```
## a smallish simple dendrogram
dhc <- as.dendrogram(hc <- hclust(dist(USArrests), "ave"))

## toy example to set colored leaf labels :
local({
  colLab <<- function(n) {
    if(is.leaf(n)) {
      a <- attributes(n)
      i <<- i+1
      attr(n, "edgePar") <-
        c(a$nodePar, list(col = mycols[i], lab.font= i%%3))
    }
    n
  }
  mycols <- grDevices::rainbow(attr(dhc21,"members"))
  i <- 0
})
dL <- dendrapply(dhc21, colLab)
plot(dL) ## --> colored labels 
```

![在此处输入图像描述](../Images/ae2eb5139bb519f8d4b00d2694fd5f29.png)

* * *

您可以通过仔细研究`?dendrapply`和`?as.dendrogram`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T04:43:32.323

只是为了获得更多信息，如果您想为标签着色，请将 edgePar 更改为 nodePar，然后使用 lab.col。由于节点默认值，如果您希望事情看起来相同，还需要将 pch 设置为 NA：

```
## a smallish simple dendrogram
dhc <- as.dendrogram(hc <- hclust(dist(USArrests), "ave"))

## create random colours for leaves based on a md5 hash of the leaf labels
library(digest);
dL <- dendrapply(dhc, function(n){
  if(is.leaf(n)){
    labelCol <- paste("#",substring(digest(attr(n,"label")),1,6), sep="");
    attr(n, "edgePar") <- list(col = labelCol);
    attr(n, "nodePar") <- list(pch = NA, lab.col = labelCol, lab.cex = 0.75);
  }
  n;
});

plot(dL); ## --> colored labels 
```

![带有彩色标签的树状图](../Images/878e9fa4633d97316c64664956273d6f.png)

# android - Android 自定义进度对话框 webview

> ID：10571268
> 
> 赞同：1
> 
> 时间：2012-05-13T11:17:00.630
> 
> 标签：android, webview, progress-bar, spinner

我目前正在为我的 webivew 使用 ProgressDialog。像下面这样：

我怎样才能使微调器可见而不是对话框，并使微调器居中？

```
 pd = ProgressDialog.show(this, "", "Loading...",
         true);

 Webf = (WebView) findViewById(R.id.WebFaceId);
 Webf.setWebViewClient(new WebViewClient() {
     @Override
     public void onPageFinished(WebView view, String url) {
         if(pd.isShowing() && pd!=null)
         {
         pd.dismiss();
         }
     }

     public boolean shouldOverrideUrlLoading(WebView v, String url) {
            v.loadUrl(url);

            return true;

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:51:37.750

您需要将 Indeterminate ProgressBar 添加到布局 xml。使用适当的属性将其放置在您喜欢的任何位置。将其设置为可见性 =“消失”。而不是 pd.show() 使用 progressBar.setVisibility(View.Visible); 和 View.GONE，当你想再次隐藏它时。

# nhibernate - NHibernate 获取转换

> ID：10571271
> 
> 赞同：0
> 
> 时间：2012-05-13T11:17:18.163
> 
> 标签：nhibernate

我正在尝试使用 QueryOver 进行查询，并尝试通过获取进行一些转换。

但我遇到了错误

```
 HSPTransactionDto hspTransactionDto = null;
    var hspTransactionDtoList =
        Session.QueryOver<Transaction>()
            .Where(x => x.TransactionStatus == TransactionStatus.Draft)
            .Fetch(x => x.HealthServiceProvider).Eager
            .Fetch(x => x.HealthMaintenanceOrganization).Eager
            .SelectList(list => list
                                    .Select(x => x.Id).WithAlias(() => hspTransactionDto.Id)
                                    .Select(x => x.Version).WithAlias(() => hspTransactionDto.Version)
                                    .Select(x => x.HealthServiceProvider.Id).WithAlias(() => hspTransactionDto.HSPId)
                                    .Select(x => x.HealthServiceProvider.Name).WithAlias(() => hspTransactionDto.HSPName)
                                    .Select(x => x.HealthMaintenanceOrganization.Id).WithAlias(() => hspTransactionDto.HMOId)
                                    .Select(x => x.HealthMaintenanceOrganization.Name).WithAlias(() => hspTransactionDto.HMOName)
                                    .Select(x => x.HSPPatientCode).WithAlias(() => hspTransactionDto.HSPPatientCode)
                                    .Select(x => x.PatientFirstName).WithAlias(() => hspTransactionDto.PatientFirstName)
                                    .Select(x => x.PatientMiddleName).WithAlias(() => hspTransactionDto.PatientMiddleName)
                                    .Select(x => x.PatientLastName).WithAlias(() => hspTransactionDto.PatientLastName)
            )
            .TransformUsing(Transformers.AliasToBean<HSPTransactionDto>()).List<HSPTransactionDto>();
    return hspTransactionDtoList; 
```

有人可以帮忙吗？

实际上找到了答案，只需要输入一些别名，所以我最终得到了

```
 HSPTransactionDto hspTransactionDto         = null;
    HealthMaintenanceOrganization hmoAlias      = null;
    HealthServiceProvider hspAlias              = null;
    var hspTransactionDtoList =
        Session.QueryOver<Transaction>()
            .Where(a => a.TransactionStatus == TransactionStatus.Draft)
            .Fetch(b => b.HealthServiceProvider).Eager
            .Fetch(c => c.HealthMaintenanceOrganization).Eager
            .JoinAlias(x=> x.HealthMaintenanceOrganization,() => hmoAlias)
            .JoinAlias(x => x.HealthServiceProvider, () => hspAlias)
            .SelectList(list => list
                                    .Select(x => x.Id).WithAlias(() => hspTransactionDto.Id)
                                    .Select(x => x.Version).WithAlias(() => hspTransactionDto.Version)
                                    .Select(x => hspAlias.Id).WithAlias(() => hspTransactionDto.HSPId)
                                    .Select(x => hspAlias.Name).WithAlias(() => hspTransactionDto.HSPName)
                                    .Select(x => hmoAlias.Id).WithAlias(() => hspTransactionDto.HMOId)
                                    .Select(x => hmoAlias.Name).WithAlias(() => hspTransactionDto.HMOName)
                                    .Select(x => x.HSPPatientCode).WithAlias(() => hspTransactionDto.HSPPatientCode)
                                    .Select(x => x.PatientFirstName).WithAlias(() => hspTransactionDto.PatientFirstName)
                                    .Select(x => x.PatientMiddleName).WithAlias(() => hspTransactionDto.PatientMiddleName)
                                    .Select(x => x.PatientLastName).WithAlias(() => hspTransactionDto.PatientLastName)
            )
            .TransformUsing(Transformers.AliasToBean<HSPTransactionDto>()).List<HSPTransactionDto>();
    return hspTransactionDtoList; 
```

有人知道更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T09:18:49.090

我认为您不需要使用 Fetch，因为您已将 Select 用于选择性属性，并且它与 DTO 分组：

```
 HSPTransactionDto hspTransactionDto         = null;
        HealthMaintenanceOrganization hmoAlias      = null;
        HealthServiceProvider hspAlias              = null;
        var hspTransactionDtoList =
            Session.QueryOver<Transaction>()
                .Where(a => a.TransactionStatus == TransactionStatus.Draft)
                .JoinAlias(x=> x.HealthMaintenanceOrganization,() => hmoAlias)
                .JoinAlias(x => x.HealthServiceProvider, () => hspAlias)
                .SelectList(list => list
                                        .Select(x => x.Id).WithAlias(() => hspTransactionDto.Id)
                                        .Select(x => x.Version).WithAlias(() => hspTransactionDto.Version)
                                        .Select(x => hspAlias.Id).WithAlias(() => hspTransactionDto.HSPId)
                                        .Select(x => hspAlias.Name).WithAlias(() => hspTransactionDto.HSPName)
                                        .Select(x => hmoAlias.Id).WithAlias(() => hspTransactionDto.HMOId)
                                        .Select(x => hmoAlias.Name).WithAlias(() => hspTransactionDto.HMOName)
                                        .Select(x => x.HSPPatientCode).WithAlias(() => hspTransactionDto.HSPPatientCode)
                                        .Select(x => x.PatientFirstName).WithAlias(() => hspTransactionDto.PatientFirstName)
                                        .Select(x => x.PatientMiddleName).WithAlias(() => hspTransactionDto.PatientMiddleName)
                                        .Select(x => x.PatientLastName).WithAlias(() => hspTransactionDto.PatientLastName)
                )
                .TransformUsing(Transformers.AliasToBean<HSPTransactionDto>()).List<HSPTransactionDto>();
        return hspTransactionDtoList; 
```

# proxy - squid 透明代理

> ID：10571275
> 
> 赞同：0
> 
> 时间：2012-05-13T11:17:31.597
> 
> 标签：proxy, squid

我有两个鱿鱼代理

```
A:cache_peer 127.0.0.1 parent 8111 6000  no-query

B:cache_peer 127.0.0.1 parent 8112 6000  no-query 
```

A 用于 http 流量，B 用于 https 流量

用户访问http去A，https去B时，如何为用户编写acl规则？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:36:14.027

使用以下网址：

[http://wiki.squid-cache.org/ConfigExamples/Reverse/MultipleWebservers](http://wiki.squid-cache.org/ConfigExamples/Reverse/MultipleWebservers)

或者这应该根据我的工作。

```
acl secure port 443
acl simple port 80
cache_peer 127.0.0.1 parent 8111 6000 no-query name=phttp
cache_peer 127.0.0.1 parent 8112 6000 no-query name=phttps
cache_peer_access phttp allow simple
cache_peer_access phttps allow secure 
```

# android - 你如何以编程方式填充 xml 中定义的矩形

> ID：10571276
> 
> 赞同：2
> 
> 时间：2012-05-13T11:17:33.617
> 
> 标签：android

我有一个简单的 Android 项目，它在 xml 中定义了一个矩形，但我找不到一种方法以编程方式用纯色填充它。

main.xml 文件有以下内容

```
<ImageView
    android:id="@+id/Smoke20"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/editText2"
    android:layout_marginLeft="26dp"
    android:src="@drawable/zonebox" /> 
```

其中 zonebox 在 res/drawable/zonebox.xml 中定义如下

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 

android:shape="rectangle" >

<size
    android:width="80sp"
    android:height="20sp" />

<stroke
android:width="1dp"
android:color="#88888888" />

<!--  solid
    android:color="#0A0" />    
-->
</shape> 
```

在我的代码中，我可以例如更改矩形边界的颜色，例如

```
int colourBox = getResources().getColor(R.color.fire2_fire_color);
View rectTest = findViewById(R.id.Smoke20);
rectTest.setBackgroundColor(colourBox); 
```

但我无法在代码中复制在 xml 中如此容易完成的“solid”属性，如图所示已注释掉。我显然是以错误的方式解决这个问题，但经过大量研究，我仍然一无所知。

我已经查看了如下获取 xml 资源的方法，但这也没有提供合适的方法来填充矩形。

```
ShapeDrawable viewTest = (ShapeDrawable)getResources().getDrawable(R.id.Smoke20); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:46:57.127

迟到的答案，但也许有帮助......我在可绘制形状方面遇到了类似的问题。我试图访问我的 shape-drawable 并发现 shape drawable 是 GradientDrawable。因此，如果您想获得访问权限，请尝试以下操作：

```
 GradientDrawable yourShape = (GradientDrawable)getResources().getDrawable(
            R.drawable.yourShape); 
```

# android - 2d 安卓 mmorpg 游戏

> ID：10571280
> 
> 赞同：0
> 
> 时间：2012-05-13T11:18:26.367
> 
> 标签：android, opengl-es, client, mmo

我想做一个mmorpg游戏，在开始之前我想知道一些事情，
嗯，首先，我知道如何为android制作游戏，我一直在使用canvas，opengl es 1.0/1.1和一些andengine（还有opengl es 1.0/1.1)。我想知道我应该使用什么来获得良好的可靠和快速的 mmorpg，是否有任何其他选择可以获得更好的性能？

该游戏目前仅针对 android，我正在使用 android sdk 和 eclipse 来编写我的游戏。

另外，我在哪里可以学习如何制作合适的客户端和服务器？因为我从来没有这方面的经验。到目前为止，我只制作了 2d 和一些 3d 游戏，它们都不是在线游戏或任何类型的 MMO。

如果需要，我也有一些网站开发的 sql 和 php 经验。我曾为我的网站与 PhpMyAdmin 合作过。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:35:12.673

我认为您应该使用NDK。**使用C**而不是 C++编写程序，以便于项目管理。您应该考虑使用**libevent**进行异步请求处理。不要将 PHP 用于**Web**界面，**Python**在这一点上要好得多。如果您愿意**弄脏**C 是*最好的*解决方案。

 **对于开发套接字，我会说你应该使用**POSIX**套接字——行业标准。稍后您应该查看更高级的解决方案，例如**ZeroMQ**。根据您的要求使用**PostgreSQL** /* *MongoDB *。*这些是真正先进的数据库管理系统，你肯定会发现比 MySQL 更少的大修。我想说***MongoDB***会更好地适应这个原因——它更快，但不完全支持 ACID 数据。

您应该在任何在线/离线文档库的**MAN 页面**中了解套接字编程所需的内容。这并不难。这是一个**C语言的服务器示例**，**学习它**，尝试**编写自己的客户端实现**，了解TCP/IP数据包抽象的基本原理（顺便说一下，这是一个TCP套接字，你应该**查看UDP示例**，这些更多与您的项目相关）：

```
/*
"Arch_server" - a basic server program in C
Copyright © Juozas Domarkas 2012, all rights served
*/

#include <stdlib.h>
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h>
#include <strings.h>
#include <unistd.h>

void respond(int socket);

void error(char *msg)
{
    perror(msg);
    exit(1);
}

int main
(int argc, char *argv[])
{
    int socket_server_fd, socket_client_fd, pid;
    socklen_t client_address_length;
    struct sockaddr_in server_address, client_address;

    if (argc != 3)
        error("Correct usage: server [host] [port]\n");

    socket_server_fd = socket(AF_INET, SOCK_STREAM, 0);

    bzero(&server_address, sizeof(server_address));
    server_address.sin_family = AF_INET;
    server_address.sin_addr.s_addr = INADDR_ANY;
    server_address.sin_port = htons(atoi(argv[2]));

    bind(socket_server_fd, (const struct sockaddr *) &server_address, sizeof(server_address));

    listen(socket_server_fd, 16);
    client_address_length = sizeof(client_address);

    while (1) {
        socket_client_fd = accept(socket_server_fd, (struct sockaddr *) &client_address, &client_address_length);
        pid = fork();
        if (pid == 0) {
            close(socket_server_fd);
            respond(socket_client_fd);
            exit(0);
        }
    }

    return EXIT_SUCCESS;
}

void respond
(int socket)
{
    int n;
    char buffer[1024];

    bzero(buffer, 1024);
    n = recv(socket, buffer, 1023, 0);
    if (n < 0) error("ERROR reading from socket");
    printf("Here is the message: %s\n", buffer);
    n = send(socket,"Message received.", 17, 0);
    if (n < 0) error("ERROR writing to socket");
} 
```

根据您的经验，您应该编写服务器套件或**使用现有解决方案**。我建议给自己一个合适的截止日期（比如***8 个月***）并自己编写所有“高级”工具。这样您就可以充分利用您的项目。尽量把它们写成*基本*的。使用低级现有解决方案以获得更好的性能，研究它们，从 31337 h2x0r5 中学习一些东西。

绝对检查 OGRE 3D 而不是 GL/ES。它是 OpenGL 的抽象库。比 OpenGL 容易得多，更好地支持现代 3D 开发、库、插件、各种已经开发的粒子、运动、天空/水系统。

不要选择 Unity3D 之类的东西。你有更好的事情要做。

* * *

学习真正的 C 编程最好的书是**Dennis M. Ritchie**和**Brian W. Kernighan的《** **The C programming language**》。

 ****Google 有很多关于 NDK 的 Android 开发教程。**绝对使用 NDK**。Java 对 3D 图形有很好的支持，但它确实不是适合这项工作的工具。这是一个“利基”解决方案，而不是游戏开发行业公认的标准。关于这一点，业界使用 C++ 进行游戏开发。我强烈建议在整个产品生命周期中使用一种语言。你需要一个网络服务器、数据库接口、钩子……使用 C。使用 C++，你会得到太多的大修。你最终会学习 BOOST、STL 以及 C++ 附带的所有其他废话。更好地使用 C、libevent、OGRE 3D、一些现有的 OGRE 系统。所有这些项目都有很好的可靠文档，并且可以在黄金时段使用。

**Ogre3D**用于 3D 游戏。您可以用它制作“2D 平台”游戏。一个额外的维度并不是真正要学习的。

逐个学习每个平台。不要阅读“一体式”书籍。

查看这些项目的文档。

* * *

既然你手头有很多空闲时间，最好先给自己制定一个好计划。以一种方式组织你自己，你的想法，并尝试达到“目标”。在 4 到 5 年内完成 MMO 真的很现实。这就是专业人士，有时甚至是独立人士需要多长时间。

坚持不懈，每天学习新东西，每天尝试编写代码。朝着一个目标努力——你的游戏。如果出现其他项目 - 推迟它。做一个务实的程序员。不要害怕弄脏。每个月为你的头衔请假几天，不要去上学（不要放弃！！！）。坚持不懈。

* * *

我讨厌这样做，但选择编译器、工具、平台、语言是*纯粹*的政治。我更喜欢“最好的工作工具”，类似于 Linus Torvalds。我主要使用开源软件，因为它做得更好。当谈到“GPL”与“BSD”或限制性与许可性软件许可证时，我绝对选择 BSD，仅仅是因为我相信自由软件而不是某种“社会自由”。

在我看来，一个好的编译器应该是来自 Apple 的 LLVM 编译器集合的**CLANG 。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-28T23:19:41.200

做一个mmorpg服务器，对于不涉及动作游戏的项目，可以使用Kraken Framework。使用 安装`gem install krakenlab`，然后使用`kraken -n app_name`.******

# mysql - 根据其他两个表获取一行

> ID：10571284
> 
> 赞同：2
> 
> 时间：2012-05-13T11:18:50.017
> 
> 标签：mysql, sql

例如，我们有这三个表：

**术语关系**

```
╔═════════╦═════════╗
║ post_id ║ term_id ║
╠═════════╬═════════╣
║       1 ║       1 ║
║       1 ║       2 ║
║       1 ║       3 ║
╚═════════╩═════════╝ 
```

**术语分类**

```
╔════╦═════════╦══════════╗
║ id ║ term_id ║ taxonomy ║
╠════╬═════════╬══════════╣
║  1 ║       1 ║ categ    ║
║  2 ║       2 ║ categ    ║
║  3 ║       3 ║ tag      ║
║  4 ║       3 ║ categ    ║
║  5 ║       4 ║ categ    ║
║  6 ║       5 ║ tag      ║
╚════╩═════════╩══════════╝ 
```

**条款**

```
╔════╦════════╦════════╗
║ id ║  name  ║  slug  ║
╠════╬════════╬════════╣
║  1 ║ samsung║ samsung║
║  2 ║ nokia  ║ nokia  ║
║  3 ║ opera  ║ opera  ║
║  4 ║ chrome ║ chrome ║
║  5 ║ webkit ║ webkit ║
╚════╩════════╩════════╝ 
```

什么时候`terms_relation.post_id = 1`，我如何选择所有基于in`terms`的`taxonomy`行？`categ``terms_taxonomy``term_id`

所以它必须得到：`samsung`，`nokia`（不是`opera`因为它是一个标签）。

这是我目前的尝试，不幸的是我不明白我的查询有什么问题：

```
select terms.name from terms_taxonomy 
join terms_relation 
on terms_relation.post_id = 1
join terms
on terms_taxonomy.term_id = terms.id
where taxonomy = "categ" 
```

上面查询的不需要的输出：

```
+---------+
| name    |
+---------+
| samsung |
| nokia   |
| opera   |
| chrome  |
| samsung |
| nokia   |
| opera   |
| chrome  |
| samsung |
| nokia   |
| opera   |
| chrome  |
| samsung |
| nokia   |
| opera   |
| chrome  |
| samsung |
| nokia   |
| opera   |
| chrome  |
| samsung |
| nokia   |
| opera   |
| chrome  |
+---------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:28:28.007

您可能应该只是将条件移动到`JOIN`. 此外，`post_id`在 WHERE 中移动条件似乎更合乎逻辑：

```
SELECT t.name 
FROM terms_relation tr
JOIN terms_taxonomy tt ON tr.term_id = tt.term_id AND tt.taxonomy = "categ"
JOIN terms t ON tr.term_id = tt.id
WHERE tr.post_id = 1 
```

**编辑**我再次重读了您的问题，但无法真正弄清楚关系是如何定义的，我假设了这些连接条件：

*   terms_taxonomy.term_id = terms_relation.term_id
*   terms.id = terms_taxonomy.term_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:23:01.657

这是一个没有连接的版本：

```
SELECT name FROM terms WHERE id IN 
(SELECT id FROM terms_taxonomy,terms_relation,terms
 WHERE terms_relation.post_id = 1 
 AND terms_taxonomy.taxonomy = "categ" 
 AND terms.id = terms_taxonomy.term_id); 
```

# node.js - 在 Node.js 中实现密码重置

> ID：10571285
> 
> 赞同：2
> 
> 时间：2012-05-13T11:18:56.323
> 
> 标签：node.js, mongodb, express

如何在 Node.js、express.js 和 Mongodb 中实现密码重置？我想向用户发送一封带有密码重置链接的电子邮件，该链接有效期为一两个小时。是否有任何现有的库支持这一点？我怎么能实现它？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:25:30.427

这实际上可能是一个与框架无关的问题。我从这个截屏视频中获得了很多信息：[http](http://railscasts.com/episodes/274-remember-me-reset-password) ://railscasts.com/episodes/274-remember-me-reset-password我知道它是 Ruby 代码，但是那里描述的技术很容易移植到 node.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T17:32:39.550

如果您准备使用第三方系统，Stormpath express 库在他们的文档中介绍了这一点：[https ://docs.stormpath.com/nodejs/express/product.html#use-password-reset](https://docs.stormpath.com/nodejs/express/product.html#use-password-reset)

我在这个库@Stormpath 上工作，但它很好地涵盖了这个用例。我知道的唯一其他选择是从头开始编写这些东西。

# html - HTML/CSS 网格布局

> ID：10571294
> 
> 赞同：3
> 
> 时间：2012-05-13T11:21:22.063
> 
> 标签：html, css, grid

我怎样才能改变这个网格布局，使第二行块位于其上方相应块的正下方，而不是形成一个全新的行？

[http://jsfiddle.net/AndyMP/wSvrN/](http://jsfiddle.net/AndyMP/wSvrN/)

```
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
#container {
    position: absolute;
    width: 60%;
    left: 50%;
    margin-left: -30%;
    border: 1px dotted #333;
    padding: 20px;
}
.box1 {
    position: relative;
    float: left;
    width: 100px;
    height: 150px;
    background: #666;
    margin: 0 15px 15px 0;
}
.box2 {
    position: relative;
    float: left;
    width: 100px;
    height: 200px;
    background: #666;
    margin: 0 15px 15px 0;
}
.box3 {
    position: relative;
    float: left;
    width: 100px;
    height: 100px;
    background: #666;
    margin: 0 15px 15px 0;
} 
```

HTML

```
<div id="container">

    <div class="box1"></div>
    <div class="box3"></div>
    <div class="box1"></div>
    <div class="box2"></div>
    <div class="box3"></div>
    <div class="box2"></div>
    <div class="box3"></div>
    <div class="box2"></div>
    <div class="box1"></div>
    <div class="box1"></div>
    <div class="box3"></div>
    <div class="box2"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:55:42.280

纯 CSS 无法实现这一点。为此，您必须使用[http://masonry.desandro.com/](http://masonry.desandro.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T11:49:31.540

你的意思是这样吗？ [http://jsfiddle.net/LtLrx/](http://jsfiddle.net/LtLrx/)

CSS：

```
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
#container {
    position: absolute;
    width: 60%;
    left: 50%;
    margin-left: -30%;
    border: 1px dotted #333;
    padding: 20px;
}
.contleft
{
    float: left;
    margin-right: 15px;
    width: 30%;
    position: relative;
    height: 100%;
}
.contmiddle
{
    float: left;
    margin-right: 15px;
    width: 30%;
    position: relative;
    height: 100%;
}
.contright
{
    float: left;
    width: 30%;
    position: relative;
    height: 100%;
}
.box1 {
    position: relative;
    float: left;
    width: 100px;
    height: 150px;
    background: #666;
    margin: 0 15px 15px 0;
}
.box2 {
    position: relative;
    float: left;
    width: 100px;
    height: 200px;
    background: #666;
    margin: 0 15px 15px 0;
}
.box3 {
    position: relative;
    float: left;
    width: 100px;
    height: 100px;
    background: #666;
    margin: 0 15px 15px 0;
} 
```

HTML：

```
<div id="container">

    <div class="contleft">
        <div class="box1"></div>
        <div class="box2"></div>
        <div class="box3"></div>
        <div class="box1"></div>
    </div>
    <div class="contmiddle">
        <div class="box2"></div>
        <div class="box1"></div>
        <div class="box1"></div>
        <div class="box2"></div>
    </div>
    <div class="contright">
        <div class="box3"></div>
        <div class="box1"></div>
        <div class="box2"></div>
        <div class="box1"></div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T11:30:15.807

我不完全得到你想要的。当我将该代码放入测试文件时，我在浏览器中得到以下信息：![在此处输入图像描述](../Images/cd3c44b67340221de39bd46a34361bd5.png)

对我来说，最后两个块看起来正好在同一列中的其他块下方。

一个问题可能是您将容器的宽度指定为屏幕的百分比，而将块的宽度指定为绝对值。

请发表评论，以便我可以更清楚地回答我的问题，这是我可以从您的问题中获得的所有信息。

# javascript - jQuery 可以多次使用 .fadeTo() 吗？

> ID：10571295
> 
> 赞同：1
> 
> 时间：2012-05-13T11:21:38.357
> 
> 标签：javascript, jquery, html

我正在尝试编写一个脚本，以便每次按下特定按钮时，我都想在 div 标签中发送一条警告消息。我决定使用 fadeTo，因为我的 div 标签在表格内，我不希望它折叠。但是，似乎在第一次按下之后，任何后续按下都将不再起作用。有谁知道这个的解决方法？

这是我的警告代码：

```
$("#warning").html("The value is too low!").css('color','red').fadeTo(10000,0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:24:48.803

在 的末尾`fadeTo`，元素的不透明度为`0`。要重新开始，请将不透明度重置回 100，否则它会尝试从 to 动画`0`，`0`这至少可以说是微妙的。:-)

例如：

```
$("#warning")
    .html("The value is too low!")
    .stop()            // <=== New bit: Stop the animation if it's running
    .css({
      'opacity': 1,    // <=== New bit: Reset the opacity
      'color': 'red'
    })
    .fadeTo(10000,0); 
```

[实例](http://jsbin.com/ozilof/2)| [来源](http://jsbin.com/ozilof/2/edit)（使用一秒而不是十秒）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:25:00.193

您将不得不再次显示 div：

```
$("#warning").show().html("The value is too low!").css('color','red').fadeTo(10000,0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T11:25:49.460

另一种方法是改用不透明动画：

```
$("#warning").html("The value is too low!").css({
    color : 'red',
    opacity : 1
}).stop().animate({
    opacity : 0
}, 1000); 
```

**演示：http:** [//jsfiddle.net/SDWmn/1/](http://jsfiddle.net/SDWmn/1/)

# c - 限制管道程序的执行时间

> ID：10571299
> 
> 赞同：0
> 
> 时间：2012-05-13T11:23:17.383
> 
> 标签：c, time, pipe, fork

我想在 C 程序中执行 Linux 命令并在程序`stdout`中从此命令中读取（解析）。下面的代码有效，但除了字符串和字节读取限制之外，我不知道如何限制命令的执行时间。有任何想法吗？

```
FILE *ps_pipe; 
int bytes_read;
int nbytes = 100;
char *my_string=NULL;
char message[1024];
message=sprintf(message,"any command here");
ps_pipe = popen (message, "r");
my_string = (char *) malloc (nbytes + 1);
bytes_read = getdelim (&my_string, &nbytes, "delimiter_word", ps_pipe);
pclose(ps_pipe);
free(my_string); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:23:47.257

你可以用 select() 来做到这一点。Select 可以在一个或多个文件描述符上“等待”事件发生（可读，可写，...），并带有可选的超时。由于它对文件描述符进行操作，因此您还需要 fileno(ps_pipe)。

但是请记住，您将无法轻松杀死分叉的进程，因为 popen 隐藏了子进程的某些细节。如果您需要这样的控制，您将需要使用较低级别的函数 fork()、pipe()、dup()、exec()、wait() 和可能的 kill()。

# c#-4.0 - .net 4.0 c#：暂时从线程池暂停/恢复并行运行的线程？

> ID：10571301
> 
> 赞同：0
> 
> 时间：2012-05-13T11:23:21.517
> 
> 标签：c#-4.0

我可以使用 .net ThreadPool 设置多线程环境，并且确实获得了显着的性能优势。这在我的应用程序的后台运行。

现在，当用户请求新任务时，我希望它获得最大的 CPU 资源以最大化性能。因此，我想暂时暂停我开始的所有线程（通过 ThreadPool.Queueuserworkitem 方法），然后在前台用户请求的新任务完成后恢复。

我的问题可能有几种解决方案：

一个。启动较少的后台线程，以便任何新的用户请求都能获得一些 CPU 资源。（但我失去了我所获得的性能提升：（）

湾。为新用户请求的任务的线程设置更高的优先级。（不确定这是否有效？）

C。暂停/恢复我开始的 ThreadPool 线程。但是非常不鼓励暂停/恢复/中断线程。此外，这可能会变得棘手且容易出错。

还有其他想法吗？

注意：当用户发出请求时，执行任务通常不会超过 300ms。但是，当我在后台启动 ThreadPool 线程时，现在大约需要 3 秒才能完成（差 10 倍）！不过，如果需要 500-800 毫秒，我可以。所有后台线程在大约 8 秒内完成（如果它们多花 1-2 秒我就可以了）。因此，我现在正在尝试选项 ( a )。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:41:50.367

请注意，线程调度是由 CPU 完成的，因此不能从程序内部进行。唯一可以做的就是设置 ThreadPriority（这也是在新线程上，而不是在 ThreadPool 线程上）。检查[使用线程池的限制部分](http://msdn.microsoft.com/en-us/library/ff647332.aspx)

由于您的要求是在执行新任务时暂停所有后台线程，您可以做的是创建一个类级别标志。

现在您可以将检查点放在要在后台任务中执行的方法中。在检查点，检查类级别标志，如果已设置，则调用 Thread.Sleep，它应该（不是必须）触发 OS/CPU 线程调度程序的线程上下文切换。

在方法中放置检查点（由 ThreadPool 执行）类似于[在后台工作人员中放置取消支持的检查点。](http://www.dotneat.net/2009/02/10/BackgroundworkerExample.aspx)

# mysql - 将计算转储到数据库

> ID：10571303
> 
> 赞同：0
> 
> 时间：2012-05-13T11:23:24.480
> 
> 标签：mysql, concurrency

我正在尝试使用 Java 和 MySQL 5.1.63 GA 构建一个系统，其中数据库中有一些输入表和一些输出表。
为了填充输出表，我编写了一个过程，该过程将从 servlet 调用并在最终填充输出表之前生成大量中间表。有很多计算，甚至可能需要一分钟的时间。

输入和输出表使用 user_id 操作，但中间表只包含值列。

但我有以下担忧：
1）如果两个用户同时触发计算序列会发生什么，我该如何保护中间表？

2）我可以使用任何其他技术，如临时表等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:50:38.297

隔离每个用户的方法是在临时表中完成所有中间计算。根据 MySQL 文档：

> TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除。这意味着两个不同的连接可以使用相同的临时表名称，而不会相互冲突或与现有的同名非临时表冲突。

只要输入和输出表都由 user_id 隔离，你应该没问题。

更改代码以使用临时表也可能很容易。大多数时候，您所要做的就是将这个词添加`TEMPORARY`到您的`CREATE TABLE`陈述中，如下所示：

```
CREATE TEMPORARY TABLE foo [...] 
```

# regex - 正则表达式搜索“150/2”之类的字符串

> ID：10571305
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:23:41.187
> 
> 标签：regex

我正在使用 VB 2010 和 Regex 在 HTML 块中查找模式“[number]/[number]”的文本。我应该使用什么正则表达式搜索模式？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:31:18.663

```
(\d+)\s*\/\s*(\d+) 
```

解释：

```
(\d+): One or more digits. Captured in first group.
\s*  : Zero or more space like chars
\/   : The `/`. Escaped.
\s*  : Zero or more space like chars
(\d+): One or more digits. Captured in second group. 
```

# javascript - 我需要你的隐藏按钮的帮助

> ID：10571308
> 
> 赞同：-3
> 
> 时间：2012-05-13T11:24:16.010
> 
> 标签：javascript, html

单击按钮后如何隐藏按钮？我正在等待您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:40:04.287

如果你不想依赖像 jQuery 这样的额外框架，你可能想尝试这样的事情：

```
<button onclick="this.style.display='none';">Click to hide</button> 
```

有关您的问题的更多信息确实会帮助其他人帮助您。

# java - 来自特定节点的 Xpath 查询

> ID：10571309
> 
> 赞同：0
> 
> 时间：2012-05-13T11:24:21.920
> 
> 标签：java, xml, xpath, nodes

我目前支持的常见查询来自 root ，意思是：

```
public Object evaluate(String expression, QName returnType) {...} 
```

现在我想从某个给定的 Node 开始执行 Xpath 查询，例如：

```
public Object evaluate(String expression, Node source, QName returnType) { ? } 
```

然后，如果我通常的查询是这样的（这里是一个例子）：

```
//load the document into a DOM Document
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
domFactory.setNamespaceAware(true); // never forget this!
DocumentBuilder builder = domFactory.newDocumentBuilder();
Document doc = builder.parse("books.xml");
//create an XPath factory
XPathFactory factory = XPathFactory.newInstance();
//create an XPath Object
XPath xpath = factory.newXPath();

//make the XPath object compile the XPath expression
XPathExpression expr = xpath.compile("/inventory/book[3]/preceding-sibling::book[1]");
//evaluate the XPath expression
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
//print the output
System.out.println("1st option:");
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println("i: " + i);
    System.out.println("*******");
    System.out.println(nodeToString(nodes.item(i)));
    System.out.println("*******"); 
```

为了使上述方法发生这种情况，我需要进行哪些更改（`public Object evaluate(String expression, Node source, QName returnType);`）

谢谢！

# image - 如何在opencv中实现色度过滤？

> ID：10571313
> 
> 赞同：0
> 
> 时间：2012-05-13T11:25:14.027
> 
> 标签：image, image-processing, opencv

我是 Opencv 的新手。我想做的是使用单个数码相机测量液位。经过大量搜索后，我得到了一篇研究论文，其中包含以下链接中的算法和步骤。

[http://personnel.sju.edu.tw/](http://personnel.sju.edu.tw)改善师资研究成果/98年度/著作/22.pdf

但是这个算法有一个步骤，我需要在捕获的图像上应用色度过滤。Opncv 没有这样的内置功能。那么如何实现色度过滤，有什么方法可以做到这一点。请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:04:49.120

我没有设法访问你提供的链接，但我想你想要的是根据颜色（色度）分割你的图像。为此，您必须首先将 BGR 图像（RGB，但红色和蓝色通道交换，这是 OpenCV 的自然排序）转换为基于色度的空间。您可以使用`cv::cvtColor()`带有参数的函数来执行此操作，例如`CV_BGR2YUV`or `CV_BGR2YCrCb`。

[在此处](http://opencv.itseez.com/modules/imgproc/doc/miscellaneous_transformations.html#cvtcolor)查看转换函数的完整文档。

之后，您可以使用以下命令拆分图像的通道`cv::split()`：

```
cv::Mat yuvImage;
std::vector<cv::Mat> yuvChannels;
cv::split(yuvImage, yuvChannels); 
```

然后处理包含您感兴趣的频道的结果矢量的图像。

# c - 结构名称的数据类型是什么

> ID：10571322
> 
> 赞同：1
> 
> 时间：2012-05-13T11:26:17.710
> 
> 标签：c, oop, types, struct, instanceof

如果我想创建一个以结构名称作为参数的函数，方法签名会是什么样子？

```
typedef struct Class{
} Class;

main()
{
    Class *a = malloc(Class);
    return instanceOf(a, Class);
} 
```

声明`instanceOf`会是什么样子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T11:30:52.117

您不能将类型传递给 C 中的函数。但是，您可以使用宏来模拟这种行为：

```
#define new_instance(t) (malloc(sizeof(t)))

Class *instance = new_instance(Class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:44:15.447

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define type(x) #x

typedef struct Class{
    char* type;
} Class;

Class *Class_new(){
    Class *v;
    v=(Class*)malloc(sizeof(Class));
    v->type = "Class";
    return v;
}

void Class_free(Class *a){
    free(a);
}
int instanceOf(Class *a, const char* type){
    return strcmp(a->type, type) == 0;
}

int main(){
    Class *a = Class_new();
    printf("%s\n", instanceOf(a, type(Class)) ? "YES" : "NO");
    Class_free(a);
    return 0;
} 
```

# java - (Java) 将一串数字转换为整数数组

> ID：10571324
> 
> 赞同：0
> 
> 时间：2012-05-13T11:27:10.693
> 
> 标签：java, arrays, string, parsing

我正在尝试将一个填充有 16 位数字的字符串转换为一个整数数组，其中每个索引都保存其在字符串中相应索引的数字。我正在编写一个程序，我需要对字符串中的单个整数进行数学运算，但我尝试过的所有方法似乎都不起作用。我也不能按字符分割，因为用户正在输入数字。

这是我尝试过的。

```
//Directly converting from char to int 
//(returns different values like 49 instead of 1?)    
//I also tried converting to an array of char, which worked, 
//but then when I converted
//the array of char to an array of ints, it still gave me weird numbers.

for (int count = 0; count <=15; count++)
{
   intArray[count] = UserInput.charAt(count);
}

//Converting the string to an int and then using division to grab each digit,
//but it throws the following error (perhaps it's too long?):
// "java.lang.NumberFormatException: For input string: "1234567890123456""

int varX = Integer.parseInt(UserInput);
int varY = 1;
for (count=0; count<=15; count++)
{
    intArray[count]= (varX / varY * 10);
} 
```

知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T11:30:36.323

这个怎么样：

```
for (int count = 0; count < userInput.length; ++count)
   intArray[count] = userInput.charAt(count)-'0'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-13T11:46:34.453

我认为这里有点令人困惑的是整数和字符可以相互插入。**字符**'1'的 int 值实际上是 49。

这是一个解决方案：

```
for (int i = 0; i < 16; i++) {
    intArray[i] = Integer.valueOf(userInput.substring(i, i + 1));
} 
```

substring 方法将字符串的一部分作为另一个字符串返回，而不是字符，并且可以将其解析为 int。

一些技巧：

*   我将 <= 15 更改为 < 16。这是对流，它会告诉您实际上将通过多少循环交互 (16)
*   我将“计数”更改为“我”。另一个约定...

# php - 为什么我解析 Markdown 链接的 PHP 正则表达式被破坏了？

> ID：10571326
> 
> 赞同：6
> 
> 时间：2012-05-13T11:27:18.007
> 
> 标签：php, regex, markdown

```
$pattern = "/\[(.*?)\]\((.*?)\)/i";
$replace = "<a href=\"$2\" rel=\"nofollow\">$1</a>";
$text = "blah blah [LINK1](http://example.com) blah [LINK2](http://sub.example.com/) blah blah ?";
echo preg_replace($pattern, $replace, $text); 
```

上述方法有效，但如果在 [] 和 () 之间意外插入空格，则所有内容都会中断，并且两个链接会混合为一个：

```
$text = "blah blah [LINK1] (http://example.com) blah [LINK2](http://sub.example.com/) blah blah ?"; 
```

我有一种感觉是松散的明星打破了它，但不知道如何匹配重复链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T11:31:30.343

如果我理解正确，那么您真正需要做的就是匹配两者之间的任意数量的空格，例如：

```
/\[([^]]*)\] *\(([^)]*)\)/i 
```

解释：

```
\[             # Matches the opening square bracket (escaped)
([^]]*)        # Captures any number of characters that aren't close square brackets
\]             # Match close square bracket (escaped)
 *             # Match any number of spaces
\(             # Match the opening bracket (escaped)
([^)]*)        # Captures any number of characters that aren't close brackets
\)             # Match the close bracket (escaped) 
```

理由：

我可能应该证明我把你`.*?`改成`[^]]*`

第二个版本更有效，因为它不需要做大量的回溯`.*?`。此外，一旦遇到开口`[`，`.*?` 版本将继续查找，直到找到匹配项，而不是如果它不是我们想要的标签则失败。例如，如果我们使用`.*?`反对匹配表达式：

```
Sad face :[ blah [LINK1](http://sub.example.com/) blah 
```

它会匹配

```
[ blah [LINK1] 
```

和

```
http://sub.example.com/ 
```

使用该`[^]]*`方法将意味着输入正确匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:31:44.950

试试这个：

```
$pattern = "/\[(.*?)\]\s?\((.*?)\)/i"; 
```

`\s?``\[(.*?)\]`在和之间添加`\((.*?)\)`

# c++ - 在 resource.rc 文件中返回多个资源

> ID：10571328
> 
> 赞同：2
> 
> 时间：2012-05-13T11:27:21.647
> 
> 标签：c++, windows, resources

好的，我想我知道出了什么问题，但我不知道如何解决这个问题。

LoadResource 正在从多个资源返回文本。

（这些是由 MINGW 的“winres”实用程序编译到我的 EXE 中的资源。）（这不是 OpenGL 问题。）

我正在尝试将着色器的文本从存储在 EXE 中的资源加载到内存中。

以下是相关的代码片段：

我从哪里调用我的函数：

```
void SetupDisplay() {
    UINT vShader = LoadShaderResource (VERTEX1, GL_VERTEX_SHADER);
    UINT fShader = LoadShaderResource (FRAGMENT1, GL_FRAGMENT_SHADER); 
```

……

上半部分开始加载着色器的过程......（我在这里放了一堆东西试图找到问题，我往回走，直到找到这个：

```
UINT LoadShaderResource (int index, int type) {
    std::vector<std::string> Lines;
    std::string tShader = LoadTextFileResource(index);
    std::cerr << "-------BEGIN " << index << "\n";
    std::cerr <<  tShader;
    std::cerr << "-------END\n";
    std::istringstream iss(tShader); 
```

...其余的并不重要，着色器编译崩溃，底部是由此产生的诊断结果。我使用 istringstream 是因为我将所有文本都放在一个大的 glob 中，但这不是问题，（我有遵循此拆​​分的代码。）问题是两个文件在不应该包含的同时被包含至少对于其中一个，我的猜测是它们是如何存储的，但我不知道如何解决这个问题。

好的，也许这里需要做点什么？

```
std::string LoadTextFileResource(int name) {
    HMODULE handle = GetModuleHandleA(NULL);
    HRSRC rc = FindResourceA(handle, MAKEINTRESOURCE(name),  RT_RCDATA);
    HGLOBAL rcData = LoadResource(handle, rc);
    std::string result = (const char*) LockResource(rcData);
    return result;
 } 
```

好的，这就是所有的 C++ 代码，现在是资源：

资源.rc

```
// Generated by ResEdit 1.5.11
// Copyright (C) 2006-2012
// http://www.resedit.net

#include <windows.h>
#include <commctrl.h>
#include <richedit.h>
#include "resource.h"

LANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL
VERTEX1        RCDATA         "..\\Data\\shader.vert"

LANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL
FRAGMENT1      RCDATA         "..\\Data\\shader.frag"

//
// Icon resources
//
LANGUAGE LANG_NEUTRAL, SUBLANG_NEUTRAL
IDI_ICON1          ICON           "..\\Data\\Generic.ico" 
```

....我只显示图标，以便您可以看到下面的内容，其余的是版本信息等。

我的 resource.h 文件将我的代码链接到 resource.rc 文件：

```
#ifndef IDC_STATIC
#define IDC_STATIC (-1)
#endif

#define IDI_ICON1                               100
#define VERTEX1                                 110
#define FRAGMENT1                               120 
```

现在，着色器的文本。（请记住，这不是 OpenGL 问题。）

着色器.frag

```
#version 330
#pragma optimize(off)
#pragma debug(on)

smooth in vec3 theColor;
out vec4 outputColor;

void main()
{
    outputColor = vec4(theColor, 1.0);
} 
```

着色器.vert

```
#version 330
#pragma optimize(off)
#pragma debug(on)

layout (location = 0) in vec3 inPosition;
layout (location = 1) in vec3 inColor;

smooth out vec3 theColor;

void main()
{
    gl_Position = vec4(inPosition, 1.0);
    theColor = inColor;
} 
```

好的，除了所有这些，这就是它产生的结果。（包括双倍间距。）

```
-------BEGIN 110
#version 330

#pragma optimize(off)

#pragma debug(on)

layout (location = 0) in vec3 inPosition;

layout (location = 1) in vec3 inColor;

smooth out vec3 theColor;

void main()

{

    gl_Position = vec4(inPosition, 1.0);

    theColor = inColor;

}

#version 330

#pragma optimize(off)

#pragma debug(on)

smooth in vec3 theColor;

out vec4 outputColor;

void main()

{

    outputColor = vec4(theColor, 1.0);

}

-------END
-------BEGIN 120
#version 330

#pragma optimize(off)

#pragma debug(on)

smooth in vec3 theColor;

out vec4 outputColor;

void main()

{

    outputColor = vec4(theColor, 1.0);

}

-------END 
```

好的，现在如果您注意到，BEGIN 110 包含两个着色器，而 BEGIN 120 没有。当然，110 中的两个着色器都让事情变得更糟。我无法理解的是它从 110 中获取两个着色器的位置？

这里发生了一些我不明白的事情，但我不知道接下来要看什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:22:06.110

在`LoadTextFileResource()`您将资源数据复制到`std::string`using 中`std::string::operator=(const char*)`。此运算符假定您的字符串是`null`- 终止的。但是你给它的指针不一定指向一个 -`null`终止的字符串。要解决此问题，您需要调用`SizeofResource()`以确定字符串的实际长度：

```
std::string LoadTextFileResource(int name) {
    HMODULE handle = GetModuleHandleA(NULL);
    HRSRC rc = FindResourceA(handle, MAKEINTRESOURCE(name),  RT_RCDATA);
    HGLOBAL rcData = LoadResource(handle, rc);
    DWORD data_size = ::SizeofResource(handle, rc);

    std::string result;

    if (data_size != 0) {
        const char* data = (const char*)::LockResource(rcData);
        result.assign(data, data_size);
    }

    return result;
} 
```

# css - CSS3背景大小奇怪

> ID：10571331
> 
> 赞同：0
> 
> 时间：2012-05-13T11:27:33.763
> 
> 标签：css, internet-explorer-7

我对背景大小有一个非常奇怪的问题：包含。

当我从 Visual Studio(F5) 的本地 IIS 运行我的站点时，我可以看到图像根据其父 div 缩小。

但是，当我在服务器上的 IIS 上使用相同的 css 运行相同的站点时 - 我看不到它。

当我查看本地站点的源代码（IE 中的 F12）时，我可以看到 background-size: contains; 但是当我查看服务器上站点的源代码时，我看不到它。当我直接打开 css 时，我确实看到了 - 它的代码相同..：S

我从同一个浏览器运行网站 - Internet Explorer 9

css3 与 IIS 配置有什么关系吗？它非常奇怪..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:41:42.507

IE7 不支持 background-size: 属性。请看一下兼容性图表：http: [//msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx#color](http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx#color)

作为使用 background-size 属性的替代方法，请查看以下可能有帮助的内容：http: [//bit.ly/JLbPCX](http://bit.ly/JLbPCX)

# c++ - C++ 教程和完整的 API 规范和 Java 一样吗？

> ID：10571334
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:27:50.627
> 
> 标签：c++, java

有没有像 Java 一样的 C++ 资源？

喜欢完整的教程`http://docs.oracle.com/javase/tutorial`

和完整的 API 规范一样`http://docs.oracle.com/javase/7/docs/api/index.html`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:51:56.743

C++ 标准库的文档是 C++ 标准 (ISO/IEC 14882:2011) 的一部分。该标准必须购买，但与官方标准仅有微小差异的最新草案可在[C++ 工作组](http://open-std.org/JTC1/SC22/WG21/)的主页上找到。

请注意，该标准非常简洁。[Nicolai Josuttis 编写了](http://www.amazon.de/The-Standard-Library-Tutorial-Reference/dp/0321623215)对 C++ 标准库的更适合初学者的介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:36:00.457

C++ 是一种语言而不是 API，有 C++ 的规范，但没有 API 之类的东西。

有一个 C++ 的 ISO 标准和一本书：[http ://eu.wiley.com/WileyCDA/WileyTitle/productCd-0470846747.html](http://eu.wiley.com/WileyCDA/WileyTitle/productCd-0470846747.html)

有很多关于标准库的书籍详细介绍了 STL 的惯用用法，新的 C++11 标准采用了许多 Boost 库，例如智能指针。

Josuttis 的书：[http](http://www.josuttis.com/libbook/) ://www.josuttis.com/libbook/ ，有趣的是有第二版涵盖了我不知道的 C++11。

还有很多 Boost 书籍，你可以用谷歌搜索，我推荐以下：[http ://www.amazon.co.uk/The-Boost-Libraries-Boris-Schaling/dp/0982219199/ref=sr_1_5?ie= UTF8&qid=1336925944&sr=8-5](http://www.amazon.co.uk/The-Boost-Libraries-Boris-Schaling/dp/0982219199/ref=sr_1_5?ie=UTF8&qid=1336925944&sr=8-5)

和[http://www.amazon.co.uk/Beyond-Standard-Library-Introduction-Boost/dp/0321133544/ref=sr_1_6?ie=UTF8&qid=1336925944&sr=8-6](http://www.amazon.co.uk/Beyond-Standard-Library-Introduction-Boost/dp/0321133544/ref=sr_1_6?ie=UTF8&qid=1336925944&sr=8-6)

您将看到的任何 API 都将是特定于框架和操作系统的，不幸的是，标准库没有像 JAVA 那样涵盖这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T12:22:26.160

我知道这个[网站](http://www.cplusplus.com/)。我同意没有关于 C++ 的 API。这种语言没有 Java 所具有的 abcd() 形式。但是，如果您知道要查找的内容，此站点将非常有用

# bash - 如何使用 wget 或 curl 获取可用文件列表？

> ID：10571335
> 
> 赞同：11
> 
> 时间：2012-05-13T11:28:03.167
> 
> 标签：bash, curl, terminal, wget

我想知道是否可以做`ls`一个 URL，例如，我可以查看网站中可用的 *.js 文件。就像是：

```
wget --list-files -A.js stackoverflow.com 
```

并得到

```
ajax/libs/jquery/1.7.1/jquery.min.js
js/full.js
js/stub.js
... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T11:55:24.527

`ls`除非服务器自己提供此类列表，否则您不能执行等效的操作。但是，您可以检索`index.html`然后检查包含，例如

```
wget -O - http://www.example.com | grep "type=.\?text/javascript.\?" 
```

请注意，这依赖于以某种方式格式化的 HTML——例如，在这种情况下，包含在单独的行上。如果您想正确执行此操作，我建议您解析 HTML 并以这种方式提取 javascript 包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-23T15:50:08.163

让我们将这个打开的目录（[http://tug.ctan.org/macros/latex2e/required/amscls/](http://tug.ctan.org/macros/latex2e/required/amscls/)）作为我们实验的对象。这个目录属于[综合 TeX 档案网络](https://ctan.org/)，所以不要太担心下载恶意文件。

现在，假设我们要列出所有扩展名为`pdf`. 我们可以通过执行以下命令来做到这一点。

下面显示的命令会将 的输出保存`wget`在文件中`main.log`。因为`wget`为每个文件发送一个请求并打印有关请求的一些信息，所以我们可以`grep`通过输出获取属于指定目录的文件列表。

```
wget \
  --accept '*.pdf' \
  --reject-regex '/\?C=[A-Z];O=[A-Z]$' \
  --execute robots=off \
  --recursive \
  --level=0 \
  --no-parent \
  --spider \
  'http://tug.ctan.org/macros/latex2e/required/amscls/doc/' 2>&1 | tee main.log 
```

现在，我们可以列出扩展名为`pdf`.`grep`

```
grep '^--' main.log 
```

```
--2020-11-23 10:39:46--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/
--2020-11-23 10:39:47--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/
--2020-11-23 10:39:47--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/amsbooka.pdf
--2020-11-23 10:39:47--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/amsclass.pdf
--2020-11-23 10:39:47--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/amsdtx.pdf
--2020-11-23 10:39:47--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/amsmidx.pdf
--2020-11-23 10:39:48--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/amsthdoc.pdf
--2020-11-23 10:39:48--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/thmtest.pdf
--2020-11-23 10:39:48--  http://tug.ctan.org/macros/latex2e/required/amscls/doc/upref.pdf 
```

请注意，我们还可以获取目录中所有文件的列表，然后`grep`在命令的输出上执行。但是，这样做会花费更多时间，因为显然为每个文件发送了一个请求。通过使用`--accept`，我们可以`wget`只发送对我们感兴趣的文件的请求。

最后但同样重要的是，文件的大小保存在 file`main.log`中，因此您可以检查该文件中的信息。

# javascript - 如何让 mocha 与 tamejs 一起使用？

> ID：10571340
> 
> 赞同：0
> 
> 时间：2012-05-13T11:28:29.037
> 
> 标签：javascript, unit-testing, mocha.js, tamejs

我想用 tamejs 写 mocha 测试，但是 mocha 默认不支持。

有什么方法可以让 mocha 与 tamejs 一起工作？我不想在运行测试之前每次都编写`.tjs`文件并将它们编译到。`.js`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:24:39.450

`--compilers`您可以使用选项在 mocha 中指定外部编译器

> --编译器
> 
> 开箱即用不再支持咖啡脚本。可以通过映射文件扩展名（与 –watch 一起使用）和模块名称来使用 CS 和类似的转译器。例如 --compilers coffee:coffee-script。

因此，`mocha.opts`在您的 app/tests 路径中创建并添加：

```
--compilers tjs:tamejs 
```

然后每个扩展`.tjs`都会在启动 mocha 时自动编译

# javascript - location.href 仅适用于 Chrome

> ID：10571341
> 
> 赞同：0
> 
> 时间：2012-05-13T11:28:43.450
> 
> 标签：javascript, facebook

[编辑：好的，我的错。重定向有效，这是 app.php 中的错误，它立即重定向回 index.php。不过感谢您的帮助:)]

所以我正在构建这个 Facebook 应用程序，经过一系列步骤后，您被重定向（在 iframe 内）到名为 app.php 的 PHP 文件。此重定向是使用 JS 完成的：

```
// this is in 'join-app.js':
location.href = "app.php?userid=" + userdata.id; 
```

这部分 JS 位于一个单独的 .js 文件（join-app.js）中，该文件被加载到 index.php 中：

```
<!-- this is in 'index.php': -->
<script language="javascript" type="text/javascript" src="js/join-app.js"></script> 
```

index.php 是 Facebook 上 iframe 的来源。

以上在 OS X 上的 Chrome 中运行良好，但由于某种原因，它在 OS X 上的 Safari 或 Windows 上的 IE 中不起作用。它确实可以在 OS X 和 Windows 上的 Firefox 上运行……在 IE 和 Safari 中，index.php 页面不断重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T11:32:34.497

对于 JavaScript 中的重定向，通常使用`window.location`：

```
<script type="text/javascript">
   <!--
      window.location = "http://www.google.com/"
   //-->
</script> 
```

# ruby - Ruby 错误：“字符类有 '[' 没有转义”和“字符类过早结束”

> ID：10571345
> 
> 赞同：2
> 
> 时间：2012-05-13T11:29:16.700
> 
> 标签：ruby, regex, special-characters

对于这行代码：

```
text = totaltext2.reject {|sentence| nilfacs.any?{|fac| sentence =~ /#{fac}/i}} 
```

我收到以下错误：

1.）“字符类有'['没有转义”

和

2.）“字符类的过早结束”后跟：“在“每个”中，“在“任何？”中，“在“拒绝”中”，“在”中

谁能告诉我我需要改变什么和/或问题是什么？我无法弄清楚错误是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:00:26.753

'fac' 中的字符串之一具有未转义的正则表达式字符。

# php - PHP二维数组转换成HTML

> ID：10571346
> 
> 赞同：6
> 
> 时间：2012-05-13T11:29:26.160
> 
> 标签：php, html, loops, html-table

一个简单的 Google 搜索将揭示大量使用 PHP 将二维数组转换为 HTML 的解决方案。不幸的是，这些都没有我正在寻找的答案。

我想要一段将数组转换为 HTML 表格的通用代码。大多数示例出错的地方是他们假设程序员知道表字段的名称。我希望这段代码是通用的，这样即使我不知道字段的名称也可以使用它。

我可以看到我需要两个循环。一个嵌套在另一个内部。我不确定的是如何获取值，因为我不知道键。

最终结果将有望输出类似这样的 html：

```
<th>
  <td>x/y</td>
  <td> x1 </td>
  <td> x2 </td>
</th>
<tr>
  <td>y1</td>
  <td> x1y1 </td>
  <td> x2y1 </td>
</tr>
<tr>
  <td>y2</td>
  <td> x1y2 </td>
  <td> x2y2 </td>
</tr> 
```

请记住，我想要一个通用且简单的解决方案。我希望这很清楚。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T11:34:10.183

以下代码将查看数组的两个维度并将它们制成表格。不管它是什么`key`，你都会得到它的视觉表示。如果它们**确实**有键名而不仅仅是索引，则这些值将分别在`$key`和中可用`$subkey`。因此，如果您需要它们，您将拥有它们。

**编码：**

```
$myarray = array("key1"=>array(1,2,3,4),
                 "key2"=>array(2,3,4,5),
                 "key3"=>array(3,4,5,6),
                 "key4"=>array(4,5,6,7)); //Having a key or not doesn't break it
$out  = "";
$out .= "<table>";
foreach($myarray as $key => $element){
    $out .= "<tr>";
    foreach($element as $subkey => $subelement){
        $out .= "<td>$subelement</td>";
    }
    $out .= "</tr>";
}
$out .= "</table>";

echo $out; 
```

**结果：**

![在此处输入图像描述](../Images/558dbcfd8ce6aed8fa89062b8e7c260c.png)

如果您想将键视为标题，可以`echo "<table>";`在行后添加以下代码：

```
echo "<tr>";
foreach($myarray as $key => $element) echo "<td>$key</td>";
echo "</tr>"; 
```

结果是：

![在此处输入图像描述](../Images/b5e4b25cfff0b081d7b5b8666fbc04f4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T11:51:57.743

你需要两个循环。一个循环通过第一级，另一个循环通过第二级。这假设您的二维数组是规则的矩形。

```
//our example array
$foo['one']['a'] = '1a';
$foo['one']['b'] = '1b';
$foo['two']['a'] = '2a';
$foo['two']['b'] = '1b';

//open table
echo '<table>';

//our control variable
$first = true;

foreach($foo as $key1 => $val1) {
    //if first time through, we need a header row
    if($first){
        echo '<tr><th></th>';
        foreach($val1 as $key2 => $value2){
            echo '<th>'.$key2.'</th>';
        }
        echo '</tr>';

        //set control to false
        $first = false;
    }

    //echo out each object in the table
    echo '<tr><td>'.$key1.'</td>';
    foreach($val1 as $key2 => $value2){
        echo '<td>'.$value2.'</td>';
    }
    echo '</tr>';
}

echo '</table>'; 
```

还没有测试过，但这应该适合你。数组的第一级是行，数组的第二级是列。

我们的 $foo 数组的示例输出：

```
+-----+-----+-----+
|     |  a  |  b  |
+-----+-----+-----+
| one | 1a  | 1b  |
+-----+-----+-----+
| two | 2a  | 2b  |
+-----+-----+-----+ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T11:32:05.270

您的循环将是这样的：

```
foreach($myArray as $k => $v) 
```

在 $k 中，您将保存密钥，在 $v 中保存值...然后您可以打印两者。

# ruby-on-rails - Ruby on Rails 的 belongs_to 与 has_one 关联 - 要求澄清

> ID：10571347
> 
> 赞同：0
> 
> 时间：2012-05-13T11:29:52.920
> 
> 标签：ruby-on-rails, associations

在下面的例子中，在 Chlid 类中使用 belongs_to :mother 和 has_one :mother 有什么区别？我一直在阅读有关这方面的 Rails 文档，除了阅读它所涉及的语义之外，我看不出任何一个会有什么不同。

据我所知，各种关联为每个类添加了额外的方法，但我无法找到文档来列出每个关联的方法是什么以及它们的作用。

```
class BiologicalMother < ActiveRecord::Base
  has_many :children
end

class Child < ActiveRecord::Base
  belongs_to :biological_mother
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:33:28.183

在这一点上，它几乎是纯粹的语义。使用 mongoid，我知道外键存储在带有 的模型上`belongs_to`，所以 ActiveRecord 也可能有类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:10:08.567

在您的情况下，这`has_many` `belongs_to`是正确的方法，不仅在语义上，而且在 rails 的工作方式上。外键始终存储在`belongs_to`关联部分中。一个有效的`has_one`场景可能就像拥有一个`Purchase`模型，其中`has_one` `BillingAddress`.

例子：

```
class Purchase
   has_one :billing_address
end

class BillingAddress
   belongs_to :purchase #this holds the foreign key - purchase_id
end 
```

关于您的情况，您不能`has_many`在关联的一侧和`has_one`另一侧使用，因为该`belongs_to`部分始终持有外键。

让我知道这是否适合您。

# java - 对象锁定私有类成员 - 最佳实践？（爪哇）

> ID：10571350
> 
> 赞同：3
> 
> 时间：2012-05-13T11:29:57.413
> 
> 标签：java, multithreading, concurrency, locking, deadlock

前几天我问[了一个类似的问题](https://stackoverflow.com/questions/10548066/multiple-object-locks-in-java)，但对回答不满意，主要是因为我提供的代码有一些人们关注的问题。

基本上，在 Java 中锁定私有成员的最佳实践是什么？假设每个私有字段只能单独操作而不能一起操作（如下面的测试类示例），您应该直接锁定每个私有字段（示例 1），还是应该对每个您希望锁定的私有字段使用通用锁定对象（示例 2）？

**示例 1：直接锁定私有字段**

```
class Test {
  private final List<Object> xList = new ArrayList<Object>();
  private final List<Object> yList = new ArrayList<Object>();

  /* xList methods */ 

  public void addToX(Object o) {
    synchronized(xList) {
      xList.add(o);
    }
  }

  public void removeFromX(Object o) {
    synchronized(xList) {
      xList.remove(o);
    }
  }

  /* yList methods */ 

  public void addToY(Object o) {
    synchronized(yList) {
      yList.add(o);
    }
  }

  public void removeFromY(Object o) {
    synchronized(yList) {
      yList.remove(o);
    }
  }
} 
```

**示例 2：对每个私有字段使用锁定对象**

```
class Test {
  private final Object xLock = new Object();
  private final Object yLock = new Object();
  private List<Object> xList = new ArrayList<Object>();
  private List<Object> yList = new ArrayList<Object>();

  /* xList methods */ 

  public void addToX(Object o) {
    synchronized(xLock) {
      xList.add(o);
    }
  }

  public void removeFromX(Object o) {
    synchronized(xLock) {
      xList.remove(o);
    }
  }

  /* yList methods */ 

  public void addToY(Object o) {
    synchronized(yLock) {
      yList.add(o);
    }
  }

  public void removeFromY(Object o) {
    synchronized(yLock) {
      yList.remove(o);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T11:39:55.933

我个人更喜欢第二种形式。*根本*没有其他代码可以使用该引用（除非反射、调试 API 等）。您无需担心列表的内部细节是否会尝试在其上同步。（您在列表上调用的任何方法显然都可以访问`this`，因此可以对其进行同步。）您*纯粹*将其用于锁定 - 因此您还可以分离“我是锁”和“我”之间的关注点我是一个列表”。

我发现这样更容易推理监视器，因为您可以轻松查看使用它的*所有可能代码。*

您可能希望创建一个单独的类，纯粹用作监视器，并对其进行覆盖，`toString()`以帮助诊断。这也将使变量的目的更加清晰。

诚然，这种方法*确实*需要更多的内存，*通常*你不需要担心代码锁定`this`......但我个人认为分离关注点并且不必担心代码是否会锁定自身的好处*超过*了效率成本。如果您发现“浪费”的对象由于某种原因成为性能瓶颈（并且在您分析了类中的代码之后，您可能会同步），您总是可以选择第一种*形式*。

（我个人希望 Java 和 .NET*都没有*走“每个对象都有一个关联的监视器”路线，但这是另一天的咆哮。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T11:36:48.133

示例 1 要好得多。由于`xList`are `final`，它们非常适合同步。不需要额外的锁对象，不必要地使代码复杂化并消耗内存。只需确保列表本身永远不会暴露给外界，破坏封装和线程安全。

但是考虑：

*   [`CopyOnWriteArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)

*   [`Collections.synchronizedList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#synchronizedList(java.util.List))- 另请参阅：[Java 同步块与 Collections.synchronizedMap](https://stackoverflow.com/questions/567068)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:13:47.930

即使您确定您正在执行锁定的对象永远不会改变，我发现使用特殊对象仅用于锁定更令人放心。它使它更加透明。如果该类将来要被其他人显着扩展和/或修改，他可能会找到一个理由来制作`xList`非最终的，而不会注意到它用于锁定。这可能很快导致问题。线程安全并非微不足道，并且随着代码的发展会变得更加复杂，因此请使其尽可能清晰和安全。与诊断线程安全问题的成本相比，仅用于锁定的单独对象的成本很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T11:59:30.970

让我们这样说吧：第二种方法使用更多的代码——这些额外的代码给你带来了什么？就并发性而言，两者完全相同，所以从你的应用程序设计的大局来看，它一定是其他方面。

# simperium - Simperium 的依赖问题

> ID：10571352
> 
> 赞同：1
> 
> 时间：2012-05-13T11:30:18.877
> 
> 标签：simperium

我正在评估将项目移动到 Simperium 以进行同步。该项目已经使用了 CocoaHTTPServer、ASIHTTPRequest 和其他一些框架。

现在 Simperium 似乎也包含（至少部分）这些框架。从我的项目链接阶段删除 CocoaHTTPServer 框架，我得到了关于这些符号的未定义符号链接器错误：HTTPAsyncFileResponse、HTTPFileResponse、HTTPDataResponse、HTTPServer、HTTPDataResponse、HTTPConnection。

是否可以使用当前框架版本修复这些链接器错误？

或者是否可以提供一个框架，将这些框架作为外部依赖框架，以便我可以使用自己的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:55:24.017

这相当于[使用 Simperium 构建 iOS 应用程序时出现链接器错误](https://stackoverflow.com/questions/10543277/linker-errors-building-ios-app-with-simperium)，在实施适当修复的同时提供了建议的解决方法。正确的修复应该很快准备好。

# php - 维护“服务器版本”的正确方法是什么 - 在 Git 中只更改配置文件？

> ID：10571358
> 
> 赞同：8
> 
> 时间：2012-05-13T11:31:26.943
> 
> 标签：php, git, codeigniter, version-control

我有时使用 Codeigniter，在本地站点上完成开发后，我需要将文件迁移到服务器。`/config/`需要更改文件夹中的所有文件以匹配服务器设置。对这些更改进行完整提交是不对的，我是让 Git 完全忽略这些文件，还是有办法跟踪这些更改并在适当的时候使用 Git 应用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T12:08:27.847

你可以保持版本：

*   两个“值配置文件”，每个环境都有正确的值
*   一个模板配置文件，其中包含值占位符（例如，`@@PORT_NUMBER@@`）
*   一个能够根据当前环境*生成实际配置文件的脚本*
*   内容[过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)，在结帐时将触发脚本以生成正确的配置文件。

![内容过滤器驱动程序](../Images/8943af588dcf3e235a58e031e17324d9.png)

注意：假设您的模板配置文件具有可识别的内容（过滤器没有文件的名称或路径）。有关git 内容过滤驱动程序限制的更多信息，请参阅“ [Git 相当于 subversion 的`$URL$`关键字扩展”。](https://stackoverflow.com/questions/2059326/git-equivalent-of-subversions-url-keyword-expansion/2059393#2059393)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:14:25.647

这取决于您的需求。在我的公司，我们使用其他方法。我们创建了几个环境（其中 asterix 是内部项目名称）：

*   devel - 站点在域 **.local.com* 上运行
*   测试 - 站点在域*test.*.company.com上运行*
*   beta - *beta.*.company.com*
*   生产 - 每个其他域。

根据域名我们自动切换配置。基本上配置文件看起来像：

```
<?php
return array(
  '_env' => array(
    'devel' => array(
      // config for devel
    ),
    'production' => array(
      // config for production
    )
  )
);
?> 
```

一些框架（AFAIR Zend）在虚拟主机配置（或 .htaccess）中设置环境名称。你应该看看：[zend framework auto switch production staging test .. etc](https://stackoverflow.com/questions/2510556/zend-framework-auto-switch-production-staging-test-etc)

你看过 CI 文档吗？有一[节](http://codeigniter.com/user_guide/general/environments.html)是关于它的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-09T03:07:22.390

在文件夹中创建两个文件`config`夹。一个被称为`development`，另一个是`production`。现在将 config.php、database.php 等复制到每个文件夹中。现在，当您在生产服务器上时，CodeIgniter 将首先检查`production`文件夹中的文件。如果不存在，则使用文件`config`夹中的默认文件。如果您在开发环境中，CodeIgniter 将首先检查该`development`文件夹。

如果您想保持任何配置文件与生产和开发环境相同，请将其保存在`config`文件夹中。

如果要设置环境，请在 .htaccess 文件中添加以下代码：

```
#This code for Development Environment
SetEnv CI_ENV development 
```

和

```
#This code for Production Environment
SetEnv CI_ENV production 
```

# auto-compile - 如何让tamejs自动将所有.tjs文件编译成.js？

> ID：10571361
> 
> 赞同：0
> 
> 时间：2012-05-13T11:31:39.860
> 
> 标签：auto-compile, tamejs

我对 tamejs 很感兴趣，想在我的项目中使用它。

但是我不想在运行/测试等之前手动将它们编译成js文件。我想让tamejs监视一个目录，并在文件更改时自动将.tjs编译为.js。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T05:40:57.070

这在自述文件中进行了讨论：[https ://github.com/maxtaco/tamejs](https://github.com/maxtaco/tamejs)

```
require ('tamejs').register (); // register the *.tjs suffix
require ("mylib.tjs");          // then use node.js's import as normal 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T21:11:52.380

var myTamedModule = require("./app.tjs");

# boost - 为多客户端进程正确使用 boost::asio

> ID：10571365
> 
> 赞同：0
> 
> 时间：2012-05-13T11:32:33.407
> 
> 标签：boost, asynchronous, parallel-processing, boost-asio

我第一次尝试使用 boost::asio 来编写一个连接到 N 个服务器的进程，从中读取数据。

我的问题是关于异步工作的方式。我的设计目标是并行连接到所有服务器，并同时从每个服务器读取数据。这应该通过 async_connect 和 async_read 完成，并调用 io_service::run() N 次，然后读取结果。问题是：从单个线程依次调用 io_service::run() 是否足以实现并行性？

请注意，这是 asio 的实现问题：具体来说，当调用 connect_async 和 write_async 时，调用是否会在返回之前向操作系统发出开始连接/读取的信号，或者它是否只是将同步的连接/读取任务委托给工作线程和立即返回？- 从单个线程调用 io_service::run() 意味着串行执行任务的情况。

当然，我的猜测是前者，但我需要有人确认。我发现异步内容的文档（http://think-async.com/Asio/boost_asio_1_3_1/doc/html/boost_asio/overview/core/basics.html）没有提到 async_xxx 调用何时返回，这会澄清我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T01:53:02.110

asio 的核心是一个事件循环，它以对 的调用开始`io_service::run()`，这是一个阻塞调用。当您调用 时`async_connect`，您将连接操作排入`io_services`事件队列。要实现并行性，您必须创建一个线程池并让每个线程调用`run()`同一个`io_service`实例。

# php - PHP - IP 地址回显为 127.0.0.1

> ID：10571368
> 
> 赞同：3
> 
> 时间：2012-05-13T11:32:55.370
> 
> 标签：php, ip

我是 PHP 的新手。

我希望在使用 HotSpot shield 显示在我的网页上时，我（仅我自己。我为 HotSpot shield 网页修改了我的 hosts 文件）提供了 IP 地址，但不幸的是，它被回显为 127.0.0.1。主要目标是当我连接时，我设置的 IP 地址会在页面上回显。这是我使用的代码：

```
<?php $rmt = $_SERVER["REMOTE_ADDR"]; echo "$rmt \n" ?> 
```

唯一的问题是 $rmt 是 127.0.0.1。你们中有人知道如何让它显示要显示的公共 IP 地址吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T11:36:14.930

这可能发生在本地代理服务器上；您可以查看与您的请求一起发送的其他标头`var_dump($_SERVER);`并搜索类似`X-Forwarded-For`或`X-Real-IP`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:37:31.417

`$_SERVER['REMOTE_ADDR']`指的是您连接的IP地址。如果您在本地计算机上运行服务器并从本地计算机连接，它使用您的本地 IP（127.0.0.1 始终是“localhost”）。

为了显示不同的 ip，您需要在另一台服务器（最好是公共网络酒店服务器）上运行它，或者从另一台机器连接到您的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-07T01:50:34.293

我也有同样的问题。事实证明，我得到的是代理 IP 地址而不是我自己的 IP。所以我跑了：

```
var_dump($_SERVER) 
//you could also use print_r($_SERVER); 
```

然后寻找这样的东西：

```
 ["HTTP_X_REAL_IP"] 
```

然后将其捕获到这样的 var 中：

```
$ip = getenv('HTTP_X_REAL_IP') 
```

# azure - 我可以使用自动缩放应用程序块来缩放 Azure VM 角色实例吗？

> ID：10571370
> 
> 赞同：2
> 
> 时间：2012-05-13T11:33:02.447
> 
> 标签：azure, wasabi

我可以使用自动缩放应用程序块来平衡/缩放 Azure VM 角色实例吗？如果这是可能的，我是否需要在服务模型定义中包含用于虚拟机角色的自动缩放应用程序块？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T17:47:42.900

是的，您应该能够在 Wasabi 通过标准[Windows Azure 管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)时定位 VM 角色。有关更多信息，请参阅[芥末的设计](http://msdn.microsoft.com/en-us/library/hh680880%28v=pandp.50%29)部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T16:57:03.983

WASABi 使用 VM 角色完全支持的标准诊断和管理 API。但是，如果您无法让 WASABi 与您的 VM 角色一起使用，您可以尝试[AzureWatch](http://www.paraleap.com)，这是一种第三方 SaaS 监控和自动缩放服务

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T04:46:45.413

VM 角色不支持 No WASABI。它主要仅使用 Web/Worker 角色进行设计和测试。事实是，如果您了解 WASABI 并计划在 VM 角色中使用 WASABI，那么使用 Web/Worker 角色而不是使用 VM 角色可能会更好。

访问下面的链接了解更多信息：http: [//blogs.msdn.com/b/agile/archive/2011/08/23/autoscaling-windows-azure-applications.aspx](http://blogs.msdn.com/b/agile/archive/2011/08/23/autoscaling-windows-azure-applications.aspx)

# android - 如何将更新从服务发送到活动

> ID：10571371
> 
> 赞同：0
> 
> 时间：2012-05-13T11:33:12.967
> 
> 标签：android, service, gps

我有 ARSensorsService 扩展 Service 并实现 LocationListener ...如何将位置更新“onLocationChanged()”发送到 Activity ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:45:15.983

您可以通过两种方式实现此目的：

1.  **将您的服务***绑定*到活动并使用ResultReceiver获取更新
***   或者在 Service 中广播意图（包含位置更新），并在您的活动中使用**BroadcastReceiver**来收听那些广播的消息**

# linux - 如何拆分大文件？

> ID：10571376
> 
> 赞同：6
> 
> 时间：2012-05-13T11:34:00.560
> 
> 标签：linux

我有一个大的 CSV 文件（7.3GB；16,300,000 行），如何将此文件拆分为两个文件？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-13T11:35:42.947

你看过`split`命令吗？有关更多信息，请参[见此](http://unixhelp.ed.ac.uk/CGI/man-cgi?split) **手册**页。

此[页面](http://www.howtogeek.com/howto/ubuntu/split-a-text-file-in-half-or-any-percentage-on-ubuntu-linux/)包含此命令的示例用法。

在旁边：

`man -k`如果您不太确定特定命令是什么，该命令对于查找 unix/linux 命令非常有用。使用 man -k 命令指定关键字，系统会拉出相关命令。例如，

```
% man -k split 
```

将产生：

```
csplit (1)           - split a file into sections determined by context lines
dirsplit (1)         - splits directory into multiple with equal size
dpkg-split (1)       - Debian package archive split/join tool
gpgsplit (1)         - Split an OpenPGP message into packets
pnmsplit (1)         - split a multi-image portable anymap into multiple single-image files
ppmtoyuvsplit (1)    - convert a portable pixmap into 3 subsampled raw YUV files
split (1)            - split a file into pieces
splitdiff (1)        - separate out incremental patches
splitfont (1)        - extract characters from an ISO-type font.
URI::Split (3pm)     - Parse and compose URI strings
wcstok (3)           - split wide-character string into tokens
yuvsplittoppm (1)    - convert a Y- and a U- and a V-file into a portable pixmap
zipsplit (1)         - split a zipfile into smaller zipfiles 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-05T08:47:43.050

拆分 -d -nl/N 文件名.csv tempfile.part。

将文件拆分为 N 个文件而不拆分行。正如上面评论中提到的，每个文件中的标题都不会重复。

# c# - 添加ServiceContract接口

> ID：10571377
> 
> 赞同：0
> 
> 时间：2012-05-13T11:34:05.960
> 
> 标签：c#, .net, wcf

我有一些标记为`[ServiceContract]`用于 WCF 服务的接口。但它也用于我的代码中的两个不同的非 WCF 位置。

问题是我正在使用一个`[ServiceContract]`在非 WCF 项目中标记为的接口。

有没有办法只在 WCF 上下文中拥有 this 属性而不复制代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T11:40:35.363

您可以使用条件编译指令：

```
#if WCF
[ServiceContract]
#endif
public interface ... 
```

然后只在您的 WCF 项目中定义 WCF 令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:02:49.063

为什么在不是 WCF 的地方使用 WCF 合同定义？它的接口是 WCF 实现细节的事实。在您的其他代码中定义一个与 WCF 无关的接口，然后如果它需要与 WCF 对话，则编写一个转发到 WCF 接口的适配器。

这样做的额外好处是您提供了一个隔离边界，因为对 WCF 合同的更改不必渗透到您的其他代码中

```
interface IFoo
{
    void DoSomething();
}

[ServiceContract]
interface IWCFFoo
{
    [OperationContract]
    void DoSomething();
}

class FooAdapter : IFoo
{
     IWCFFoo wrapped;

     public FooAdapter(IWCFFoo wrapped)
     {
          this.wrapped = wrapped;
     }

     public void DoSomething()
     {
          wrapped.DoSomething(); 
     }
} 
```

它还允许在 IFoo 和 IWCFFoo 上使用不同的类型，因此 DataContract DTO 不会渗入您的其余代码

# php - 表单动作文件在同一页面上执行？

> ID：10571379
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:34:12.120
> 
> 标签：php, submit

我有一个表单，在它的操作上我有一个 php 文件，我希望当我单击提交时，它应该首先打开操作 php（意味着在浏览器中查看），然后开始执行其中的代码。

表单标签是这样的

```
<form action="myScript.php" method="post"></form> 
```

现在发生的事情是，当我单击提交时，它停留在同一页面上并开始执行 php 文件，当它完成时，它会在浏览器中显示脚本文件页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T23:24:13.003

You have to execute the PHP in order to generate the page that is shown in the browser as a result of the POST. Even if your PHP is generating the page and then performing a long operation, output buffering and compression will defeat you, so you will need to turn them off. See [How to flush output after each `echo` call?](https://stackoverflow.com/questions/3133209/) for other things you may have to do to get your output to appear immediately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:50:19.027

你可以使用 jquery POST 做任何你想做的事： [jQuery.POST](http://api.jquery.com/jQuery.post/ "jQuery.POST")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:01:46.580

是`<input type="submit">`标签内的`<form>`标签等。如果不是，那么输入按钮是没有意义的，只是返回 false。您的代码应如下所示：

```
<form action="myScript.php" method="post">
    <input type="submit" />
</form> 
```

这有帮助吗？

凯:-)

# ruby-on-rails - 如何在 squeel 中动态处理 where 条件？

> ID：10571380
> 
> 赞同：2
> 
> 时间：2012-05-13T11:34:32.590
> 
> 标签：ruby-on-rails, squeel

从这个输入： {'hearing' => 1} 我需要生成这个查询

```
Score.joins(:target_disability).where{ (target_disabilities.name == 'hearing') & (round(total_score) >= 1) } 
```

从这个输入是 {'hearing' => 1, 'mobility' => 2}，我需要生成这个：

```
Score.joins(:target_disability).where{ (target_disabilities.name == 'hearing') & (round(total_score) >= 1) | (target_disabilities.name == 'mobility') & (round(total_score) >= 2) } 
```

等等...

这怎么能概括？因为我的输入有时有 3 或 4 个键...有时 1...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:42:57.047

假设您的哈希在`my_params`：

```
@scores = Score.joins(:target_disability).where do
    my_params.map{|k,v| (target_disabilities.name==k) & (round(total_score)>=v) }.inject(:|)
end 
```

# html - 您可以在 PDF 文件中嵌入 HTML 网页吗？

> ID：10571381
> 
> 赞同：7
> 
> 时间：2012-05-13T11:34:51.690
> 
> 标签：html, flash, pdf

Flash 文件可以嵌入到 PDF 文档中。有谁知道是否也可以嵌入 HTML 网页？

添加：

*   我的意思不仅仅是一个普通的 HTML 文档，而是一个带有 Javascript 的网页。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T07:10:07.320

答案是不。虽然您可以在 PDF 中嵌入视频、声音和 SWF 文件，但不支持动态 HTML 文件。（Adobe AIR 更适合打包和分发 HTML 文件）。

您可以在 PDF 中做的最好的事情是使用 Adob​​e Acrobat 中的 ATTACH 选项。这将“附加”任何带有 PDF 文档的文件，类似于您在电子邮件中添加附件的方式。但附件不能在 PDF 文档中查看，必须单独打开。

* * *

更多信息：
[Javascript 可以添加到 PDF 文件中](http://www.adobe.com/devnet/acrobat/javascript.html)并用于操作 PDF 文件中的各种元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T11:38:37.227

不是直接的。但是，根据您要查找的内容，您可以使用[dompdf](http://code.google.com/p/dompdf/) (PHP) 之类的工具从 HTML 文档生成 PDF 文件，然后将该文档与您的原始文档合并。它甚至支持 JavaScript，达到 Adob​​e Reader 支持 JavaScript 的水平。

也就是说，PDF 文件格式确实适用于您想要打印的东西（即希望在任何地方看起来都一样），而不是您想要点击的东西（即在任何地方看起来都很合理）。Adobe 决定加入 Flash 支持可能是从营销角度而非技术角度做出的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-04T00:19:48.377

最好的解决方法是在 Adob​​e Flash 中创建一个 web/html 查看器，并将其作为 SWF 嵌入到 PDF 中。在 Acrobat 中的“富媒体”下有一个“添加 SWF”选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-30T00:03:11.793

创建了一个[NPM 模块](https://github.com/Kaisle/add-html-to-pdf)，允许您将自定义 HTML 和 CSS 添加到 PDF。

```
const pdf = require('add-html-to-pdf');

var options = {
input: 'sample.pdf',
output: 'done.pdf',
html: "<div style='color:red'>This is awesome!</div>",
useDocker: true
}

pdf.insertHTMLInPDF(options); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-27T22:55:44.907

您可以使用 php 重构网页上的 html、css 和 js。

我正在使用一个带有非常过时的 wordpress 站点的插件，但非常适合使用 html、css 和 javascript 创建 pdf。

它被称为 tcpdf

插件/tcpdf/tcpdf.php

[https://tcpdf.org/examples/](https://tcpdf.org/examples/)

pdf 是作为函数即时制作的。

# asp.net-mvc - 图片上传问题

> ID：10571382
> 
> 赞同：1
> 
> 时间：2012-05-13T11:34:56.870
> 
> 标签：asp.net-mvc, file-upload, image-uploading

这是我的上传操作：

```
[HttpPost]
    public ActionResult addcar(Models.vehicule model)
    {
        ViewBag.cat = new SelectList(entity.categorie, "Idcat", "Nom");
        ViewBag.mark = new SelectList(entity.marque, "id", "nom");      
        if (ModelState.IsValid)
        {
// Upload Function begin
            var destinationFolder = Server.MapPath("/Content/Vpic");
            foreach (string name in Request.Files)
            {
                HttpPostedFileBase postedFile = Request.Files[name];
                if (postedFile.ContentLength > 0)
                {
                    var fileName = model.Matv;
                    var path = Path.Combine(destinationFolder, fileName + ".jpg");
                    postedFile.SaveAs(path);
                }
            }
// upload function end

            model.Idag = User.Identity.Name.ToString();
            entity.vehicule.AddObject(model);
            entity.SaveChanges();
            TempData["Resultat"] = "L'ajout de véhicule a reussi";
            return RedirectToAction("GesV", "Agence");
        }
        else
            return View();

    } 
```

这是我的观点：

```
 <% using (Html.BeginForm("addcar", "Agence", FormMethod.Post, new { @class = "search_form", @enctype = "multipart/form-data" })) 
```

我已经在其他代码中使用过相同的功能，它在这里工作正常我不知道它不起作用，其余的操作工作正常，但照片没有上传

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:06:58.890

你的视图是什么样的？您是否在视图中的表单标签上包含属性 enctype =“multipart/form-data”？

验证 @ 符号，在 enctype 上不需要

# spring - Spring Security 自定义登录页面

> ID：10571383
> 
> 赞同：0
> 
> 时间：2012-05-13T11:35:08.823
> 
> 标签：spring, spring-security, login-page

任何人都可以帮我了解如何在自定义登录 jsp 文件中添加更多字段吗？默认值为“j_username”和“j_password”。如果我想添加更多字段 ie 并想在我`CustomAuthenticationProvider`的扩展类中获取它怎么办`AbstractUserDetailsAuthenticationProvider`？如果有任何资源或链接，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T11:42:51.053

引用[官方常见问题解答](http://static.springsource.org/spring-security/site/faq.html#faq-extra-login-fields)：

> ### 1.1。我需要使用更多信息登录，而不仅仅是用户名。如何添加对额外登录字段（例如公司名称）的支持？
> 
> 这个问题在 Spring Security 论坛中反复出现，因此您可以通过搜索档案（或通过 google）在那里找到更多信息。
> 
> 提交的登录信息由`UsernamePasswordAuthenticationFilter`. 您将需要自定义此类以处理额外的数据字段。一种选择是使用您自己定制的身份验证令牌类（而不是标准的`UsernamePasswordAuthenticationToken`），另一种是简单地将额外的字段与用户名连接起来（例如，使用“ `:`”作为分隔符）并将它们传递到 的用户名属性中`UsernamePasswordAuthenticationToken`。
> 
> 您还需要自定义实际的身份验证过程。例如，如果您使用自定义身份验证令牌类，则必须编写一个`AuthenticationProvider`来处理它（或扩展标准`DaoAuthenticationProvider`）。如果您已连接字段，则可以实现自己的字段，`UserDetailsService`将它们拆分并加载适当的用户数据以进行身份​​验证。

# wordpress - 从搜索中排除帖子类型

> ID：10571385
> 
> 赞同：0
> 
> 时间：2012-05-13T11:35:22.333
> 
> 标签：wordpress, post

我的博客中有几种自定义帖子类型。如何从搜索中排除帖子类型，以便仅显示我的自定义帖子类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:54:36.950

经过一番挖掘，我找到了答案。只需在搜索表单中添加以下隐藏字段：

```
<input type="hidden" name="post_type[]" value="custom1" />
<input type="hidden" name="post_type[]" value="custom2" /> 
```

这将搜索仅限于帖子类型`custom1`和`custom2`.

# lucene - 设置 Lucene IndexWriter 最大字段

> ID：10571391
> 
> 赞同：1
> 
> 时间：2012-05-13T11:36:26.777
> 
> 标签：lucene

我开始通过使用 3.0 API 的“Lucene in Action”的第二版进行工作，作者使用以下方法创建了一个基本的索引编写器

```
private IndexWriter getIndexWriter() throws CorruptIndexException, LockObtainFailedException, IOException {
     return new IndexWriter(directory, new WhitespaceAnalyzer(), IndexWriter.MaxFieldLength.Unlimited);
    } 
```

在下面的代码中，我根据当前的 API 进行了更改，除了我无法弄清楚如何将编写器的最大字段长度设置为无限制，就像书中示例中的常量一样。我刚刚在下面插入了 int 1000。这个无限常量是否在当前 API 中完全消失了？

```
private IndexWriter getIndexWriter() throws CorruptIndexException, LockObtainFailedException, IOException {
        IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_36, 
                new LimitTokenCountAnalyzer(new WhitespaceAnalyzer(Version.LUCENE_36), 1000));  
        return new IndexWriter(directory, iwc);
    } 
```

谢谢，这只是为了好奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T11:25:45.363

`IndexWriter`javadoc 说：

> @deprecated 改为使用`LimitTokenCountAnalyzer`。请注意，行为略有变化 - 分析器限制每个创建的令牌流的令牌数量，而此设置限制要索引的令牌总数。不过，这仅在您索引许多多值字段时才重要。

因此，换句话说，硬连线的方法已被漂亮的适配器/委托模式所取代。

# java - 扩展 java.io.Reader 的类的默认文件夹是什么，为什么？

> ID：10571392
> 
> 赞同：0
> 
> 时间：2012-05-13T11:36:32.360
> 
> 标签：java, standards

扩展 java.io.Reader 的类从哪个默认文件夹获取输入？例如，“data.txt”应该位于对 FileReader 的调用中，如下所示？

```
FileReader fr = new FileReader("data.txt"); 
```

对于我目前正在处理的项目（我正在使用 Eclipse 及其标准项目目录结构），它似乎是 bin 文件夹。但是逻辑在哪里，该文件夹不应该包含 .class-files 和类似的非触摸编译器输出吗？

这里的标准做法是什么，是否真的将包含输入数据的文件夹放在 bin/ 下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:34:13.780

该文件在当前工作目录中查找，即您启动应用程序时所在的目录。

# bash - 如何告诉 curl 在下载前检查文件是否存在？

> ID：10571393
> 
> 赞同：9
> 
> 时间：2012-05-13T11:36:33.610
> 
> 标签：bash, curl

我使用此命令下载一系列图像：

```
curl -O --max-time 10 --retry 3 --retry-delay 1 http://site.com/image[0-100].jpg 
```

有些图像已损坏，因此我将其删除。

```
for i in *.jpg; do jpeginfo -c $i || rm $i; done 
```

如何告诉`curl`在下载前检查文件是否存在？

我可以使用此命令来防止`curl` 覆盖现有图像：

```
chmod 000 *.jpg 
```

但我不想重新下载它们。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T14:17:40.410

如果目标资源是静态的，`curl`则可以选择`-z`仅下载较新的目标副本。

使用示例：

```
curl -z image0.jpg http://site.com/image0.jpg 
```

您的案例的示例：

`for i in $(seq 0 100); do curl -z image$i.jpg -O --max-time 10 --retry 3 --retry-delay 1 http://site.com/image$i.jpg; done`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-13T12:42:07.437

不知道用 curl 来做，但你可以在运行 curl 命令之前用 Bash 检查它。

```
for FILE in FILE1 FILE2 …
do
  if [[ ! -e $FILE ]]; then
    # Curl command to download the image.
  fi
done 
```

# python - 按每个元素的第一个字符拆分列表

> ID：10571394
> 
> 赞同：6
> 
> 时间：2012-05-13T11:36:35.800
> 
> 标签：python, list, group-by, split, python-2.7

我有一个 Python 列表`mylist`，其元素是一个包含字母和数字字符串的子列表。我想知道如何`mylist`在不使用每个字符的单独语句/案例的代码的情况下按字符串开头的字符进行拆分。假设我想将 mylist 拆分为列表`a, b, c`：

```
mylist = [['a1'],['a2'],['c1'],['b1']]
a = [['a1'],['a2']]
b = [['b1']]
c = [['c1']] 
```

重要的是我将它们保留为列表列表（即使它只是每个子列表中的单个元素）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:45:09.290

这将起作用：

```
import itertools as it

mylist  = [['a1'],['a2'],['c1'],['b1']]
keyfunc = lambda x: x[0][0]

mylist = sorted(mylist, key=keyfunc)
a, b, c = [list(g) for k, g in it.groupby(mylist, keyfunc)] 
```

仅当 in 中的元素尚未按字符串开头的字符排序时，使用where 的行`sorted()`才是必需的。`mylist`

**编辑 ：**

正如评论中所指出的，一个更通用的解决方案（一个不将变量数量限制为三个的解决方案）将使用字典推导（在 Python 2.7+ 中可用），如下所示：

```
result_dict = {k: list(g) for k, g in it.groupby(mylist, keyfunc)} 
```

现在答案由字典中的第一个字符键入：

```
result_dict['a']
> [['a1'],['a2']]

result_dict['b']
> [['b1']]

result_dict['c']
> [['c1']] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:17:21.060

使用字典也可以

```
mylist = [['a1'],['a2'],['c1'],['b1']]

from collections import defaultdict

dicto = defaultdict(list)

for ele in mylist:
    dicto[ele[0][0]].append(ele) 
```

结果：

```
>>> dicto
defaultdict(<type 'list'>, {'a': [['a1'], ['a2']], 'c': [['c1']], 'b': [['b1']]}) 
```

它没有给出您要求的确切结果；但是，访问与每个字母相关的列表列表非常容易

```
>>> dicto['a']
[['a1'], ['a2']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T16:18:58.617

您还可以使用一个简单的函数来获取这些子列表：

```
def get_items(mylist, letter):
  return [item for item in mylist if item[0][0] == letter] 
```

该表达式`item[0][0]`只是意味着获取当前项目的第一个元素的第一个字母。然后，您可以为每个字母调用该函数：

```
a = get_items(mylist, 'a')
b = get_items(mylist, 'b')
c = get_items(mylist, 'c') 
```

# javascript - 评估 JavaScript 中的布尔变量有什么好处？

> ID：10571396
> 
> 赞同：1
> 
> 时间：2012-05-13T11:37:08.710
> 
> 标签：javascript, boolean

`alert`我有这种稍微奇怪的情况，我有一个布尔语句在and运算符中给了我两个不同的评估`if`。

```
var test = new Boolean(homePageNonActive && ((firstTime && homePageHash) || (!firstTime && !homePageHash)));
alert(homePageNonActive && ((firstTime && homePageHash) || (!firstTime && !homePageHash))); // GIVES ME FALSE
alert(test); // GIVES ME TRUE ??? WHY?

if(test){
    alert(homePageNonActive); // GIVES ME TRUE
    alert(firstTime); // GIVES ME TRUE
    alert(homePageHash); // GIVES ME FALSE
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:53:25.697

只要您使用布尔基元，一切似乎都可以[正常工作。](http://jsfiddle.net/Tkhy4/)

但问题是您将布尔对象 ( `homePageHash`) 与布尔基元 (`homePageNonActive`和`firstTime`) 混合在一起。之所以`test`为“真”，是因为“布尔对象为假”是“真”。

> [布尔对象与布尔基元不同。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean)
> 
> 任何值不是 undefined 或 null 的对象，包括值为 false 的布尔对象，在传递给条件语句时评估为 true。

```
var x = new Boolean(false),
    y = false; 

if (x) {/*this code is executed*/}
if (y) {/*this code is NOT executed*/} 
```

# java - Android - 持有 4 件物品的对象

> ID：10571397
> 
> 赞同：-2
> 
> 时间：2012-05-13T11:37:15.043
> 
> 标签：java, android, string, object

我使用的是安卓 2.1

我需要知道如何将 4 个项目（字符串、字符串、字符串、字符串）混合成一个可以输入到数组中的项目（以显示在列表视图上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T11:40:34.690

您可以为该对象定义一个类，其中每个字符串都有一个字段。根据您希望在列表视图中显示的内容，您也应该覆盖此类的 toString() 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T11:46:53.773

写一堂课啦

```
public class MyClass {
     private String field1;
     private String field2;
     private String field3;
     private String field4;

     public MyClass(String field1, String field2, String field3, String field4) {
         this.field1 = field1;
         //... etc etc
     }

     public String getField1() { return field1;}
     public void setField1(String field1) {this.field1 = field1;}

     //etc etc
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T11:42:20.320

您可以使用具有四个参数的方法创建自定义类。现在你可以在任何你想要的地方使用这个类。请学习以下示例。

```
public class myObjectClass
{
      String str1,str2,str3,str4;

      // Setting the values 
      public void setString1 ( String str1 )
      {
            this.str1 = str1;
      }
      public void setString2 ( String str2 )
      {
            this.str2 = str2;
      }
      public void setString3 ( String str3 )
      {
            this.str3 = str3;
      }
      public void setString4 ( String str4 )
      {
            this.str4 = str4;
      }

      // Gettng the values
      public String getString1 ()
      {
            return str1;
      }
      public String getString2 ()
      {
            return str2;
      }
      public String getString3 ()
      {
            return str3;
      }
      public String getString4 ()
      {
            return str4;
      }

      public void myObjects ( String str1, String str2, String str3,String str4 )
      {
             // Your Operation Code
      }
} 
```

# python - Python不读取文件，返回空结果

> ID：10571399
> 
> 赞同：1
> 
> 时间：2012-05-13T11:37:37.883
> 
> 标签：python, python-2.7

aaa.txt：

```
aszczx
d
as
w
ad 
```

蟒蛇脚本：

```
f = open('aaa.txt','r')
f.read()
f.close() 
```

安慰：

```
C:\Python27>test.py

C:\Python27> 
```

为什么不显示文件的内容？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:38:35.487

您没有显示文件的内容，只是阅读它。

例如，您可以执行以下操作：

```
with open('aaa.txt') as infp:
    data = infp.read()

print data # display data read 
```

使用`with`也会自动关闭文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:39:53.407

您可以将读入的行保存到变量中，然后再打印。

```
lines = f.read()
# Later...
print lines 
```

# jquery - 获取对象元素内的图像高度

> ID：10571400
> 
> 赞同：0
> 
> 时间：2012-05-13T11:37:46.067
> 
> 标签：jquery, html, height

我有以下 HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>Untitled Page</title>
    <script language='javascript'>
        window.onload = function () {
            alert($('#object1').height());
        }; 
    </script>
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
</head>
<body>
    <object id="object1" height="205" width="246">
        <img id="Img1" height="205" width="246" src="../images/google_ad_example.jpg" />
    </object>
</body>
</html> 
```

使用jQuery：

```
alert($('#object1').height()); 
```

我19岁回来了！而不是 205 为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:41:14.533

Hiya**演示** [http://jsfiddle.net/keXRf/3/](http://jsfiddle.net/keXRf/3/)（使用`attr`）**或者**您可以随时设置 css 像这里并使用`.css` [http://jsfiddle.net/LAp2c/](http://jsfiddle.net/LAp2c/)

链接：[http](http://api.jquery.com/height/) ://api.jquery.com/height/ :)

注意：因为`height=`在您的情况下使用了属性；你可以使用`attr`它会给你想要的输出，但是这个链接应该可以帮助你更好地理解。

```
$('#object1').attr("height") 
```

**还有**额外的信息：您可以`.css("height", 205)`在 bwoser 之间分配一致性，我在上面分享的链接中有很好的讨论。

`.css('height')`进一步：和之间的区别在于`.height()`后者返回一个无单位的像素值（例如，`400`），而前者返回一个具有完整单位的值（例如，`400px`）。`.height()`当需要在数学计算中使用元素的高度时，建议使用该方法。

截图 1：在 osx Safari 中

![在此处输入图像描述](../Images/855df9294455c51d980ed510b9622ad3.png)

截图2：

![在此处输入图像描述](../Images/59fae6956378d9cdb9cb464e9330253f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:41:02.993

应该是

```
$('#object1 img').height() 
```

# html - 将两个灵活的 div 并排放置

> ID：10571401
> 
> 赞同：0
> 
> 时间：2012-05-13T11:38:02.533
> 
> 标签：html, css

我正在尝试创建一个网页，其中有 2 个彼此相邻的灵活的 div。这样当浏览器窗口被压缩在一起时，每个 div 都会随着浏览器的宽度缩小（直到某个点）。我遇到的问题是，使用下面的解决方案，当浏览器窗口变得足够小时，div 不会缩小，而是它们之间的线会中断......

我知道我错过了一些简单的东西......只是不知道它是什么：

```
<html>
<body>

<div style="border-style:solid;border-color:green;max-width:100%;overflow: hidden;">
  <div style="float:left;border-style:solid;border-color:red;background-color:transparent;padding:15px 30px 0px 30px;min-width:100px;max-width:100%">This is a sample text to fill the space so that it can be looked at in a realistic way.</div>
  <div style="overflow: hidden;float:right;border-style:solid;border-color:yellow;min-width:100px;max-width:100%;max-height:100%;">This is a sample text to fill the space so that it can be looked at in a realistic way.</div>
</div>

<body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T11:52:51.330

您可以为此使用 CSS`display:table-cell`属性。像这样写：

```
.parent{
    display:table;
    width:100%;
}
.parent > div{
    display:table-cell;
    min-width:100px;
    background:red;
}
.parent > .right{
    background:green;
} 
```

检查这个：http: [//jsfiddle.net/Ld3r6/](http://jsfiddle.net/Ld3r6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T11:58:54.747

或这个

```
 <style>
.col       {width: 45%; float:left; border: solid 1px #ccc; margin: 0 10px 0 0;}
.container {width: 80%; margin: 0 auto; }
.clear  {clear: both}
</style>
<body>

  <div class="container">
 <div class="col">This is a sample text to fill the space so that it can be looked at in a realistic way.</div>
    <div class="col">This is a sample text to fill the space so that it can be looked  at in  a realistic way.</div>
  <div class="clear"></div>
  </div> 
```

# api - 适用于 iOS 的 ARC 和 ABAddressBook API

> ID：10571405
> 
> 赞同：0
> 
> 时间：2012-05-13T11:38:52.163
> 
> 标签：api, automatic-ref-counting, addressbook

我有一个使用 ABAddressBook API 的应用程序，我正在尝试将我的应用程序转换为使用 ARC。

我知道 AddressBook API 是用原生 C 编写的，并且在启用 ARC 时它给了我很多错误。

任何人都知道该怎么做，或者甚至值得这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T01:24:37.423

一种可能的解决方案是为难以转换的代码设置编译器标志。转到您正在使用的特定目标的构建设置，并将标志“-fno-objc-arc”添加到有问题的文件中。此外，有关实际问题的任何更多信息都会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T13:20:13.737

调酒师，

首先，工作代码就是工作代码。您可以在同一个应用程序中轻松混合使用两种内存管理机制。我只在为其他目的打开代码时将类转换为 ARC。这让我可以慢慢地将我的应用程序移动到 ARC。为什么要更改此代码以使用 ARC？

其次，核心基础项目和 ARC 之间的接口可能看起来很复杂……但事实并非如此。大多数问题都是通过使用`__bridge`类型限定符来处理的。通常，编译器/修复它会准确地告诉您需要做什么。（工作的、不泄漏的 CF 代码不需要更改。它只需要告诉 ARC 让它别管它。）

安德鲁

# ember.js - 在事务提交后设置回调

> ID：10571406
> 
> 赞同：8
> 
> 时间：2012-05-13T11:38:58.937
> 
> 标签：ember.js, ember-data

我正在尝试实现一些我猜有一个简单答案的东西，但不知何故我在阅读`ember-data`.

我想在将一组特定的修改提交到数据存储后触发一个操作。这是我当前的代码：

```
var transaction = App.store.transaction();
user = App.get('currentUser');
transaction.add(user);
user.set('name', "Michael Jackson");
transaction.commit();
App.navigate('dashboard'); 
```

我的第一次尝试是在这个用户的`isDirty`属性上添加一个观察者，但是a）它看起来并不惯用，更重要的是b）我必须在最后手动删除那个观察者——如果在两者之间引发一些异常，这很容易出错例如，不会被删除。

有任何想法吗？你会怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-14T19:08:20.427

您可以在模型上使用 didCreate 和 didUpdate。我假设您有一个用户模型，例如：

```
MyApp.User = DS.Model.extend({
  first: DS.attr('string'),
  page: DS.attr('string'),
  didUpdate: function() {
    //Do something
  },
  didCreate: function() {
    //do something
  }
}); 
```

# java - Java 两个同步方法在一个实例中

> ID：10571409
> 
> 赞同：12
> 
> 时间：2012-05-13T11:39:04.590
> 
> 标签：java, multithreading, synchronization

考虑以下代码：

```
public class SynchronizedCounter extends Thread {
    private int c = 0;

    public synchronized void increment() {
        c++;
    }

    public synchronized void decrement() {
        c--;
    }

    public void run() {
        for(;;)
            increment();
    }
}

static void main(String[] args) {
    SynchronizedCounter counter = new SynchronizedCounter();
    counter.start();
    for(;;)
        counter.decrement();
} 
```

这是否意味着*increment()*和*decrement()方法将**相互*等待完成与否？

**编辑：** 这不等待？

```
static void main(String[] args) {
    SynchronizedCounter counter1 = new SynchronizedCounter();
    SynchronizedCounter counter2 = new SynchronizedCounter();
    counter1.start();
    for(;;)
        counter2.decrement();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T11:45:00.647

是的，`synchronized`关键字是以下的简写：

```
synchronized(this) {
  //...
} 
```

所以这两种方法都有效地锁定了同一个互斥对象。如果您希望它们彼此独立（在此示例中这是一个坏主意，因为它们都访问相同的值），请参阅[对象锁定私有类成员 - 最佳实践？（爪哇）](https://stackoverflow.com/questions/10571350)。

顺便说一句，你`SynchronizedCounter`应该实现`Runnable`而不是扩展 a`Thread`因为你将它传递给其他线程的构造函数 - 现在它有点令人困惑。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T12:03:24.043

锁**总是在整个对象上**。如果其中任何一个`synchronized`成员被访问。

在您的第一个示例中，有两个线程**争用同一个** `counter`对象，一个是您显式启动的（它`increment()`在无限循环中调用该方法），另一个线程是主线程（它`decrement()`无限地调用该方法）。

在第二个示例中，创建了两个对象，`counter1`并且`counter2`. 这些将有自己的彼此独立的锁。锁定一个对象不会影响其他线程访问其他对象。两个线程（显式线程和主线程）获取两个不同对象的锁，因此**不存在争用**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T18:38:14.630

*这是否意味着 increment() 和 decrement() 方法将相互等待完成与否？*

**NO**，这意味着当一个线程在其中时，没有其他线程将能够调用 increment() 和 decrement() 。完整地说，其他线程无法执行此实例/对象的任何同步方法

您可以从同步方法调用任何其他同步方法，而无需锁定同一实例/对象

# node.js - Facebook Open Graph 给出错误“无法下载：无法从 URL 检索数据”和状态码 206

> ID：10571413
> 
> 赞同：1
> 
> 时间：2012-05-13T11:39:32.847
> 
> 标签：node.js, express, facebook-opengraph

这有效：

> [http://www.opengraph.in/?url=snakes.eric-wieser.tk/fb-og.html](http://www.opengraph.in/?url=snakes.eric-wieser.tk/fb-og.html)

但这不会：

> [http://developers.facebook.com/tools/debug/og/object?q=snakes.eric-wieser.tk/fb-og.html](http://developers.facebook.com/tools/debug/og/object?q=snakes.eric-wieser.tk/fb-og.html)

被抓取的页面在[这里](http://snakes.eric-wieser.tk/fb-og.html)。我不认为我可以让它变得更简单

Facebook 给出状态 206，并表示无法从该页面下载任何数据。

* * *

我正在使用 Express 和 Node.js，设置如下：

```
var app = express.createServer();
app.listen(8090);
app.use(express.static(__dirname, {maxAge: 60000})); 
```

为什么它不起作用？什么

# jsp - JSP - Servlet 调用出错

> ID：10571419
> 
> 赞同：0
> 
> 时间：2012-05-13T11:40:15.183
> 
> 标签：jsp, servlets

我的练习项目有问题。也许我是个盲人，但我解不开这个谜。希望这不仅仅是另一个重复。

*   1.jsp里面有一个list，可以抽象的呈现对象。从那里我将每个链接到一个带有`<a href>`.

    ```
     <c:forEach var="object" items="${dealer.objectList}" varStatus="status">
                  <div class="changableElement">
                            <jsp:include page="/Object/objectDetails.jsp"></jsp:include>
                            <a href="/MyProjekt/ObjectResolverServlet/${object.id}" id="send">Change</a>
                  </div>
           </c:forEach> 
    ```

    这工作正常。

    *   2.`ObjectResolverServlet`再次从后台获取对象并将其作为属性放入请求中。

    ```
     protected void doGet(HttpServletRequest request, HttpServletResponse response) throws      ServletException, IOException {
           System.out.println("Mark #1");
           String objectId = request.getPathInfo().substring(1);
           MyObject obj = dbHandler.getMyObjectById(objectId );
           System.out.println(obj);
           request.setAttribute("objectDetails", obj);
           response.setContentType("text/html");        
           getServletContext().getRequestDispatcher("/MyObjectChangePage").forward(request, response) ;
    } 
    ```

    在`MyObjectChangePage`用户上是能够操作的细节`obj`。

    *   3.`MyObjectChangePage`主要由一个表单、文本字段和提交按钮组成，这些按钮指向另一个 servlet。

    ```
    <form id="object_change_values_form" action="ObjectChangeServlet" method="post" >
        <div>
            <label for="name">Name:</label><br> 
            <input id="name" name="name" type="text" value="${obj.name}" />
            <span id="nameDetails"bla bla ..</span>
        </div>

        <div>
            <label for="origin"Origin:</label><br>
            <input id="origin" name="origin" type="text" value="${obj.origin}" />
            <span id="originDetails">bla bla ../span>
        </div>

        <div>
            <label for="year">Bitte Jahrgang eingeben!</label><br>
            <input id="year" name="year" type="text" value="${obj.year}" />
            <span id="yearDetails">bla bla ..</span>
        </div>

        <div>
            <label for="description">Description</label><br>
            <textarea name='description' id='description'>${obj.description}</textarea>
            <span id="descriptionDetails">bla bla ..</span>
        </div>

        <div>
            <label for="priceSelling">Price</label><br>
            <input id="priceSelling" name="priceSelling" type="text" value="${obj.priceSelling}" />
            <span id="priceSellingDetails">bla bla ..</span>
        </div>

        <input id="send" type="submit" value="Change" name = "button"/>                     
        <input id="send" type="submit" value="Cancel" name = "button"/>
    </form> 
    ```

    *   4.`ObjectChangeServlet`从不调用 - 而是打印`ObjectResolverServlet`新行中的输出 Mark #1。`null`我发现从“ObjectResolverServlet”`doPost`中调用了该方法。猜猜我犯了一个奇怪的错误。

    我`web.xml`这里的部分内容：

    ```
     ....
      <servlet>
        <servlet-name>ObjectChangeServlet</servlet-name>
        <servlet-class>impl.servlets.ObjectChangeServlet</servlet-class>
      </servlet>
      <servlet-mapping>
        <servlet-name>ObjectChangeServlet</servlet-name>
        <url-pattern>/ObjectChangeServlet</url-pattern>
      </servlet-mapping>

      <servlet>
        <servlet-name>ObjectChangePage</servlet-name>
        <jsp-file>/Object/object_change_values.jsp</jsp-file>
      </servlet>
      <servlet-mapping>
        <servlet-name>ObjectChangePage</servlet-name>
        <url-pattern>/ObjectChangePage</url-pattern>
      </servlet-mapping>

      <servlet>
        <description>Gets the object by id</description>
        <servlet-name>ObjectResolverServlet</servlet-name>
        <servlet-class>impl.servlets.ObjectResolverServlet</servlet-class>
      </servlet>
      <servlet-mapping>
        <servlet-name>ObjectResolverServlet</servlet-name>
        <url-pattern>/ObjectResolverServlet/*</url-pattern>
      </servlet-mapping>
      .... 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:42:54.507

由于上述评论中的良好线索找到了解决方案。只是`<form .. >`tag中的action必须以绝对的方式指向处理servlet，所以我在3.中的第一次尝试是绝对错误的

**错误的** `<form id="object_change_values_form" action="ObjectChangeServlet" method="post" >`

但**正确**的解决方案是
`<form id="object_change_values_form" action="/MyProjekt/ObjectChangeServlet" method="post" >`

# php - 通过 JQuery AJAX 将 Javascript 数组传递给 PHP

> ID：10571421
> 
> 赞同：0
> 
> 时间：2012-05-13T11:40:22.327
> 
> 标签：php, javascript, jquery, ajax, arrays

```
$('#button').live('click', function () {
    values_array = [];
    $('.field').each(function () {
        values_array.push = $(this).val();
    });
    $.ajax({
        url: 'page.php',
        data: {
            array_a: values_array
        },
        type: 'POST',

        success: function (data) {
            $('#div').html(data);
        }
    });
});

//page.php
echo $_POST['array_a'] . "<br/>"; //The line break echos, but nothing else 
```

A.) 我是否需要遍历每个类`$.each`以创建正确的数组，以及

B.) 为什么 php 不回显它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T11:47:40.323

改变：

`values_array.push = $(this).val();`

到：

`values_array.push($(this).val());`

这应该够了吧 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T11:50:20.460

`.push`是一种您使用过的方法，例如属性 try 代替

```
values_array = [];
   $('.field').each(function() {
      values_array.push($(this).val());
   }); 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/push)

# javascript - 如何打印 Extjs 窗口

> ID：10571431
> 
> 赞同：0
> 
> 时间：2012-05-13T11:41:47.257
> 
> 标签：javascript, javascript-framework

我有一个由 FormPanel 和 gridPanel 组成的窗口。我单击网格以将数据填充到表单中。然后我希望能够打印出表格。

使用 window.print() 打印无法正确打印，我尝试了几种解决方案，但无法让它们正常工作。

请问有没有简单的方法可以做到这一点。

谢谢，伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:42:41.133

我要将数据发送到 fpdf 并以​​这种方式打印。

谢谢

# android - Android 添加更多不同内容的小部件

> ID：10571433
> 
> 赞同：0
> 
> 时间：2012-05-13T11:42:05.050
> 
> 标签：android, widget

我正在尝试使用小部件创建应用程序。当用户将小部件放在桌面上时，列表视图应该会显示一个项目列表。用户选择一个项目，然后使用与该项目相关的相应文本创建小部件。为简单起见，我现在使用警报对话框。输入文本应该只出现在我创建的小部件中。它不应出现在其他小部件中。我该怎么做？我没有发现任何关于此的信息。

AppWidgetProvider：

```
public class MyWidgetProvider extends AppWidgetProvider {

    private static final String ACTION_CLICK = "ACTION_CLICK";

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        Log.i("INFO", "AppWidgetProvider"); 

        ComponentName thisWidget = new ComponentName(context, MyWidgetProvider.class);
        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
        //Intent intent = new Intent(context.getApplicationContext(),   UpdateWidgetService.class);
        //intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);
        //context.startService(intent);
            Intent intentA = new Intent(context.getApplicationContext(), NoteListToWidget.class);
    intentA.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(intentA);

        }

} 
```

服务：

```
public class UpdateWidgetService extends Service {
    public static String ACTION_WIDGET_CONFIGURE = "ConfigureWidget";
    public static String ACTION_WIDGET_RECEIVER = "ActionReceiverWidget";
    String value;
    Dialog dialog_newitem;

    @Override
    public void onStart(Intent intent, int startId) {
        Log.i("INFO", "UpdateWidgetService");

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this.getApplicationContext());

        int[] allWidgetIds = intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

        ComponentName thisWidget = new ComponentName(getApplicationContext(), MyWidgetProvider.class);
        int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);

        for (int widgetId : allWidgetIds) {
            int number = (new Random().nextInt(100));
            String v = GlobalVars.getValue();
            RemoteViews remoteViews = new RemoteViews(this.getApplicationContext().getPackageName(), R.layout.widget_layout);
            //remoteViews.setTextViewText(R.id.update, "Random: " + String.valueOf(number));
            remoteViews.setTextViewText(R.id.update, v);

            Intent configIntent = new Intent(this, Notepad.class);
            configIntent.setAction(ACTION_WIDGET_CONFIGURE);
            PendingIntent configPendingIntent = PendingIntent.getActivity(this, REQUEST_CODE_ONE, configIntent, PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.widgetlayout, configPendingIntent);

            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();

        super.onStart(intent, startId);

    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

这是带有 AlertDialog 的 Activity（后一个列表视图）：

```
public class NoteListToWidget extends Activity {

    Dialog dialog_newitem;
    EditText et_newitem;
    String value;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        dialog_newitem = new Dialog(NoteListToWidget.this);
        dialog_newitem.setContentView(R.layout.dialog_productlists_grp_capitalized);
        dialog_newitem.setTitle("Select");
        dialog_newitem.setCancelable(true);

        et_newitem = (EditText) dialog_newitem.findViewById(R.id.et_item_name);

        Button btn_Save = (Button) dialog_newitem.findViewById(R.id.btn_save_pr);
        btn_Save.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                value = et_newitem.getText().toString();
                 GlobalVars.setValue(value);
                dialog_newitem.dismiss();
                /*
                Intent serviceIntent = new Intent();
                serviceIntent.setAction("com.myapp.app.UpdateWidgetService");
                startService(serviceIntent);
                */
                Intent intent = new Intent(NoteListToWidget.this, com.myapp.app.UpdateWidgetService.class);
                startService(intent);

            }
            });

        Button btn_Cancel = (Button) dialog_newitem.findViewById(R.id.btn_cancel_pr);
        btn_Cancel.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                dialog_newitem.dismiss();
            }

        });
        dialog_newitem.show();

    }

} 
```

我不知道我应该如何以及从哪里调用 NoteListToWidget 活动以及如何使这一切正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T17:24:03.160

首先，不可能完整地回答您的问题。这是因为您似乎遗漏了很多关于应用程序小部件如何工作的信息，因此您必须阅读更多关于它们的信息。不过，我会给你一个开始的地方。

AppWidgetProvider 的 onUpdate 方法在每次**已经放置**在桌面上的应用小部件需要更新时被调用。也就是说，即使您设法从那里显示您的列表并且用户取消了操作，也无法从 onUpdate 方法中删除您的应用程序小部件。此外，当 onUpdate 方法完成时，AppWidgetProvider 将被销毁，因此即使您设法从那里显示您的列表，也无法获取用户选择的项目。长话短说，你**不能**从 onUpdate 方法做到这一点，你**不能**用这种方法做到这一点。

但是，您可以通过在应用小部件创建过程的指定点使用配置活动来**做到这**一点，但这无法在您的问题上下文中回答，因为您必须首先了解应用小部件系统在 Android 中的工作原理。最好的起点是[这个链接](http://developer.android.com/guide/topics/appwidgets/index.html)。我的第一个 app-widget 应用程序遇到了同样的问题（你的问题几乎相同），但后来我开始阅读和阅读，最终在 1.5 个月后，我设法做出了你想做的事情。所以不要说

> 我该怎么做？我还没有找到任何关于这个

开始阅读吧，这就是 Android 的生活。这一切都在上面的链接中，谷歌代码中也有非常好的开源项目，[比如这个天气小部件](http://code.google.com/p/yaww/)，它允许用户在将它放在桌面上之前对其进行配置。

希望这可以帮助...

# asp.net-mvc - ServiceStack 应该是 MVC 应用程序中的服务层还是应该调用服务层？

> ID：10571450
> 
> 赞同：23
> 
> 时间：2012-05-13T11:46:29.557
> 
> 标签：asp.net-mvc, asp.net-web-api, servicestack, service-layer

我正在创建一个 MVC 网站，还打算创建一个 Web API，供网站内部使用，也可能供第三方使用。

我将从 MVC 控制器调用服务层，该服务层将包含业务逻辑、对域模型进行操作、执行验证、进行基础设施外部服务调用等。服务层反过来将调用存储库以进行任何数据库交互。

现在，我喜欢[ServiceStack](http://www.servicestack.net/)的外观并打算将它用于 Web API - 它似乎比[ASP.NET MVC 4 Web API](http://www.asp.net/web-api)更成熟。我的问题是，我应该将 ServiceStack API 调用到上面的服务层，类似于 MVC 控制器，还是应该将其作为服务层，同时为 Web 客户端和 MVC 控制器提供服务？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-13T15:35:14.493

我都不会。

理想情况下，MVC 和 ServiceStack 都应该使用和共享纯 C# 依赖项。一个 MVC + ServiceStack 网站和谐共处的好例子是[SocialBootstrapApi](https://github.com/ServiceStack/SocialBootstrapApi/)演示项目，该项目已部署在 AppHarbor 上：[http ://bootstrapapi.apphb.com](http://bootstrapapi.apphb.com)

我将在您的 ServiceStack AppHost 中注册您的所有依赖项，然后注册一个[MVC 控制器工厂](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/AppHost.cs#L134)，以便您的 MVC 控制器和 ServiceStack 服务都与这些依赖项自动连接。

在您的 AppHost 中：

```
void Configure(Funq.Container container) {
    container.Register<IGreeter>(c => new Greeter());
    //Set MVC to use the same Funq IOC as ServiceStack
    ControllerBuilder.Current.SetControllerFactory(
       new FunqControllerFactory(container));
} 
```

使用 ServiceStack 服务的示例`IGreeter`

```
public class HelloService : Service {
    public IGreeter Greeter { get; set; } //Autowired

    public HelloResponse Get(Hello request) {
        return new HelloResponse { 
           Result = Greeter.SayHelloTo(request.Name) };
    }
} 
```

使用相同 IGreeter 的 MVC 控制器示例：

```
public HelloController : ServiceStackController {
    public IGreeter Greeter { get; set; } //Autowired

    public void Index(string name) {
       ViewBag.GreetResult = Greeter.SayHelloTo(name);
       return View();
    }        
} 
```

总体思路是 MVC 控制器内部的逻辑，ServiceStack 服务应该关注 HTTP 层/集成点，即从 QueryString 或 FORM POST 变量中收集用户输入，并用它调用纯/可测试的 C# 逻辑，然后准备响应，在 ServiceStack 中将填充响应 DTO，而对于 MVC 控制器，您将填充 ViewModel。

### 从 MVC 控制器调用 ServiceStack 服务

虽然我会通过上面的 C# greet 服务获得 Controllers + ServiceStack 共享功能，但您也可以从 MVC 控制器调用 ServiceStack 服务，例如：

```
public HelloController : ServiceStackController {

  public void Index(string name) 
  {
    using (var helloService = AppHostBase.ResolveService<HelloService>())
    {
       ViewBag.GreetResult = helloService.Get(name).Result;
       return View();
    }
  }        
} 
```

### 与 ServiceStackController 共享会话/缓存

尽管 MVC 控制器示例继承自[ServiceStackController](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.FluentValidation.Mvc3/Mvc/ServiceStackController.cs#L51)，但这不是必需的，但允许您在 MVC 和 ServiceStack 中共享相同的 Session / Caching / Authentication + RequiredRole/RequiredPermission 属性。

有关ServiceStack 为 MVC 带来的其他好处，请参阅[MVC PowerPack 。](http://www.servicestack.net/mvc-powerpack/)

# android - 如何实现SlidingMenu？

> ID：10571457
> 
> 赞同：2
> 
> 时间：2012-05-13T11:47:44.957
> 
> 标签：android, android-side-navigation

我想尝试像在这个应用程序中那样构造 main.xml。实际上，我想构建它以便拥有相同的菜单（具有其他样式）。

这个菜单非常有用。我可以向右拉（或拖动，不知道）屏幕，菜单将在左侧。视觉它位于背景侧。

[VK http://vk.com/doc16200012_87954624?hash=f5ac3dff8816dbd63e](http://vk.com/doc16200012_87954624?hash=f5ac3dff8816dbd63e) [VK http://vk.com/doc16200012_87957448?hash=7b66a484606b806f29](http://vk.com/doc16200012_87957448?hash=7b66a484606b806f29)

这个菜单是可滚动的。 [VK http://vk.com/doc16200012_87954750?hash=b1ac2c96c6fc49d532](http://vk.com/doc16200012_87954750?hash=b1ac2c96c6fc49d532) 那么，我应该如何构造我的 main.xml 来获得这样的东西（使用这个菜单）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-14T06:55:54.097

[Alex Korovyansky](https://github.com/korovyansk)在 github 上的[android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)项目具有您正在寻找的菜单类型。这是该功能的[视频演示](http://www.youtube.com/watch?v=Cqu7YdNMzeQ&feature=youtu.be)。在 FB 在他们的移动应用程序上实现它之后，菜单类型有时被称为“Facebook 风格的滑入式菜单”或类似的。

这个问题已经在 SO 上回答了好几次。您可以在这些答案中找到更多实现的链接：

*   [android-facebook 风格的幻灯片。](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)

*   [如何制作 facebooks-app-new-menu-on-android](https://stackoverflow.com/questions/8428416/how-to-make-facebooks-app-new-menu-on-android)

# php - 在隐藏字段中添加javascript的值

> ID：10571458
> 
> 赞同：-2
> 
> 时间：2012-05-13T11:47:45.313
> 
> 标签：php, javascript, field, hidden

我有这个 javascript 行

```
<script type="text/javascript">document.write(top.location);</script> 
```

和这段代码

```
<form action="rating.php" method="post">
<input type="hidden" name="url" value="xxxx" />
<input type="submit" />
</form>

<?

echo $_POST["url"];

?> 
```

请问，我如何在隐藏字段中添加javascript（xxx）的值？

也可以让`<input type="submit" />`自动提交吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:51:28.230

你的意思是，为了给隐藏的领域喂食？

```
<input type="hidden" name="url" value="<? echo $_POST["url"]; ?>" /> 
```

关于提交，您可以使用 javascript 来处理提交事件：

如果在标签`name="FORMNAME"`内添加属性，则可以使用：`<form ... >`

```
document.FORMNAME.submit(); 
```

用于提交表单，而不使用提交按钮。

为了**通过 javascript 提供隐藏字段**，请使用：

```
document.FORMNAME.url.value = top.location; 
```

# c++ - kbhit 测试无法编译“找不到 -lcurses”

> ID：10571461
> 
> 赞同：1
> 
> 时间：2012-05-13T11:48:01.293
> 
> 标签：c++, compiler-errors

```
"/usr/bin/gmake" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf
gmake[1]: Entering directory `/home/josh/Projects/Testing grounds/kbhit'
"/usr/bin/gmake"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux-x86/kbhit
gmake[2]: Entering directory `/home/josh/Projects/Testing grounds/kbhit'
mkdir -p build/Debug/GNU-Linux-x86
rm -f build/Debug/GNU-Linux-x86/main.o.d
g++    -c -g -Iusr/include/ -MMD -MP -MF build/Debug/GNU-Linux-x86/main.o.d -o build/Debug/GNU-Linux-x86/main.o main.cpp
mkdir -p dist/Debug/GNU-Linux-x86
g++     -o dist/Debug/GNU-Linux-x86/kbhit build/Debug/GNU-Linux-x86/main.o -L/usr/include/ncurses -L/usr/include/ncurses6 -L/usr/include/ncursesw -lncurses.h 
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld: cannot find -lncurses.h
collect2: ld returned 1 exit status
gmake[2]: *** [dist/Debug/GNU-Linux-x86/kbhit] Error 1
gmake[2]: Leaving directory `/home/josh/Projects/Testing grounds/kbhit'
gmake[1]: *** [.build-conf] Error 2
gmake[1]: Leaving directory `/home/josh/Projects/Testing grounds/kbhit'
gmake: *** [.build-impl] Error 2

BUILD FAILED (exit value 2, total time: 477ms) 
```

它似乎找不到“lcurses”，但我从未定义它来寻找 lcurses。我实际上添加了要链接的 ncurse 库。

我已经导航到 /usr/include/ncurses 并且实际上应该有文件。

我不完全知道整个编译过程中发生了什么，这超出了我的范围。我只知道有人告诉我链接我需要的库。ncurses.h 这就是我的代码。

```
#include <iostream>
#include <ncurses/ncurses.h>

using namespace std;

bool kbhit()
{
  int ch = getch();
  if(ch != ERR)
  {
    ungetch(ch);
    return true;
  }
  return false;

}

int main() {

  while(!kbhit())
  {
    cout << "no input";
  }
  cout << "Mummy, it's over.";
  return 0;
} 
```

欢迎任何帮助；我搞不清楚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:08:12.850

这不是您的 c++ 代码的问题，而是您的构建环境的问题，您使用的是 netbeans IDE 吗？

据我所知，这段代码根本不需要 ncruses，以及 NetBeans 的链接指令？已为您设置指向 ncruses.h 文件，该文件应类似于“-Wl，-lncurses”或仅“-lncurses”。所以猜测是在netbeans的某个地方你应该指出你写的库名ncruses.h而不是只有ncruses（我认为，不确定）

尝试询问 pkg-config ncurses 的哪些参数应该在你的机器上 "pkg-config --libs ncurses" 和 "pkg-config --cflags ncurses"

# git - Git - 拉和推 - 生产服务器

> ID：10571462
> 
> 赞同：1
> 
> 时间：2012-05-13T11:48:09.727
> 
> 标签：git, repository, push, pull

[我有一个带有此处](http://www.krizka.net/2010/12/30/setting-up-a-public-git-repository-with-godaddy-shared-hosting/)描述的 git-1.7.3.4_centos5.2 的生产服务器，并且我有一个带有 git 1.7.7.1 的本地机器。我需要的是本地服务器上的副本，我可以在其中开发站点并将其上传到生产服务器。还有另一个人可以修改内容，所以我也需要拉动这些更改。我怎样才能用 git 解决这个问题？（最实际的代码现在在我的本地机器上。）

我做了一些测试：我克隆了一个空的仓库，然后我修改了服务器上的仓库。我无法使用远程/下载（git gui）下载它，但通过结帐我成功了。推动也没有奏效。我怎样才能让它们运行起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:40:26.820

您应该定义两个遥控器：

> 我需要的是本地服务器上的副本，我可以在其中开发站点并将其上传到生产服务器

那是一个简单的

```
git clone http://www.your_prod_server.com/git/your_bare_repo.git 
```

这将克隆 repo 并定义一个名为“origin”的远程。您将能够推送它，因为它是一个裸仓库。
请参阅“[关于“裸”存储库的所有信息——什么、为什么以及如何修复非裸推送](http://sitaramc.github.com/concepts/bare.html)“。
另请参阅“ [GIT：推送后，远程仓库将文件显示为已删除](https://stackoverflow.com/a/3761891/6309)”，以了解推送到非裸仓库的危险：

> 当您在 Git 中推送到远程存储库时，它不会更新该远程存储库的工作副本。
> 这意味着工作副本将与您推送的最后一个版本不同步。

* * *

> 还有另一个人可以修改内容，所以我也需要拉动这些更改。

您需要添加一个指向“其他人的回购地址”的远程

```
git remote add otherguy http://otherguy_server/other_guy_repo 
```

即使该同事的 repo 不是裸露的，您也可以从中*获取*，在您的 repo 中取回他的更改，并将它们合并到您的本地分支中。

# sql-server-2008 - SQL - 结合 2 个表得到 1 个表结果

> ID：10571465
> 
> 赞同：-2
> 
> 时间：2012-05-13T11:48:36.207
> 
> 标签：sql-server-2008

假设我有 2 张桌子

销售

```
ProductName    SellingDate    ProductID   
iPhone 4G      2011-05-11     1
iPhone 4S      2011-05-12     2
iPhone 4S      2011-05-13     2
iPhone 4G      2011-05-15     1 
```

购买

```
ProductName    BuyingDate    ProductID   
iPhone 4S      2011-05-09     2
iPhone 4G      2011-05-10     1
iPhone 4G      2011-05-13     1
iPhone 4G      2011-05-14     1 
```

如何将这个日期组合成这样？

```
ProductName    Date          Status      ProductID   
iPhone 4G      2011-05-10    Buying      1
iPhone 4G      2011-05-11    Selling     1
iPhone 4G      2011-05-13    Buying      1
iPhone 4G      2011-05-14    Buying      1
iPhone 4G      2011-05-15    Selling     1 
```

我不知道如何将 2 个表日期（SellingDate/BuyingDate）组合成 1 个表（日期）...

任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:05:18.737

我假设您所需的输出与您给定的输入**不匹配**，因此如果这只是组合两个表的情况， a`UNION ALL`应该就足够了。

```
SELECT ProductName, Date, 'Buying' AS Status, ProductID FROM Buying
UNION ALL SELECT ProductName, Date, 'Selling' AS Status, ProductID FROM Selling 
```

您可以使用以下内容添加用户可选择的 productid

```
SELECT ProductName, Date, 'Buying' AS Status, ProductID FROM Buying WHERE ProductID = 1
UNION ALL SELECT ProductName, Date, 'Selling' AS Status, ProductID FROM Selling WHERE ProductID = 1 
```

或这个

```
SELECT * 
FROM   (
         SELECT ProductName, Date, 'Buying' AS Status, ProductID FROM Buying
         UNION ALL SELECT ProductName, Date, 'Selling' AS Status, ProductID FROM Selling
       ) p
WHERE   ProductID = 1 
```

如果您确实需要给定输入**的这些**输出，则必须向我们提供一些附加信息

1.  ProductID 2 发生了什么？
2.  iPhone 4S系列怎么了？
3.  为什么不保留这些？

作为旁注和供将来参考，请尽可能准确和完整。我假设您的反对意见是您的输出与您的输入不匹配的结果。

# javafx-2 - 解析节点的 CSS 属性

> ID：10571466
> 
> 赞同：2
> 
> 时间：2012-05-13T11:48:53.430
> 
> 标签：javafx-2

也许我的 google-fu 今天让我失望了，但我还没有找到一种方法来解析节点的任意属性以获得样式属性。例如，我希望能够询问节点“-fx-fill 的价值（如果有）是多少？”。

一个简单的应用示例：我想为图表构建一个自定义图例。为此，我必须向渲染节点询问其填充属性。当然，我可以使用我对 default-colorN 类的知识并简单地查找填充，但感觉这将是一种非常糟糕的方法，因为它违反了 CSS 的整体理念。

提前致谢。

顺便说一句：JavaFX 版本是 2.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T17:39:14.777

> 我希望能够问一个节点“-fx-fill 你的价值是什么（如果有的话）？”

目前还没有公开的 API。计划在未来的版本中添加这样的 API。请参阅[RT-17293 Java 中的 CSS 样式对象模型](https://bugs.openjdk.java.net/browse/JDK-8091202)。

对于 2.0 和 2.1 版本，您可能可以使用未记录的、已弃用的 impl_ 方法找到信息，但我不建议这样做。

现在，我建议尽可能使用[css 图表样式，并在无法使用 css 实现样式的情况下添加一些动态](http://docs.oracle.com/javafx/2/charts/css-styles.htm)[node.lookup()](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#lookup%28java.lang.String%29)代码来补充它。

# java - Android 应用内结算公钥异常

> ID：10571467
> 
> 赞同：3
> 
> 时间：2012-05-13T11:49:21.693
> 
> 标签：java, android, in-app-billing

我目前正在使用 Android 示例代码进行应用内计费。但是，运行示例应用程序时出现一个非常奇怪的错误：

```
java.lang.IllegalArgumentException: 
java.security.spec.InvalidKeySpecException: java.lang.ClassCastException:    
    com.android.org.bouncycastle.asn1.DERApplicationSpecific cannot be cast to     
    com.android.org.bouncycastle.asn1.ASN1Sequence 
```

应用程序期望来自 Android 页面的公钥以 base64 编码。我使用 Web 应用程序将公钥编码为 base64 来做到这一点，然后还检查了编码是否真的有效。逐字节比较表明内容是相等的。

你们有没有人遇到过这个问题，可以给我一个提示，上面的异常消息是什么意思？

非常感谢，马蒂亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:39:46.330

够傻的，原来是这个原因。我试图重新编码已经编码的公钥。这就是异常出现的原因。谢谢！

# c# - WPF C# 应用程序，.xaml 文件错误。缺少程序集参考

> ID：10571470
> 
> 赞同：1
> 
> 时间：2012-05-13T11:49:54.593
> 
> 标签：c#, wpf

我的 .xaml 文件中有一些类似的错误。这是错误消息：找不到类型“vm:MainViewmodel”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。有谁能够帮我？

> ```
>  xmlns:vm="clr-namespace:GoogleMap.ViewModel" 
>          x:Class="GoogleMap.App"
>          StartupUri="MainWindow.xaml">  
> <Application.Resources>
>     <vm:MainViewModel x:Key="MainViewModel"/>
>     <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter"/>
> </Application.Resources>     </Application> 
> ```

# visual-studio-2010 - 将库添加到 Visual Studio 2010 Express

> ID：10571472
> 
> 赞同：5
> 
> 时间：2012-05-13T11:50:17.623
> 
> 标签：visual-studio-2010, visual-c++

似乎无法找到如何添加库的明确答案。项目属性有很多地方可以添加文件路径，但我想知道我是否应该编辑所有这些，有人可以告诉我每个可能条目的目的，如果还有更多，以及可能我应该编辑哪些？还是方便的教程？生病列出我知道的条目。目前正在尝试添加 Wwise 库。

1.  > 项目->*项目名属性*->配置属性->vc++目录->库目录（点击编辑添加相关文件路径）

2.  > 项目->*项目名属性*->配置属性->链接器->通用->附加库依赖（点击编辑添加相关文件路径）

3.  > 项目->*项目名称属性*->配置属性->链接器->输入->附加依赖（手动输入库的名称）

如果我经历了所有这些，我会得到比我开始时更多的链接器错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T15:46:06.043

1.  这些是链接器将搜索 Visual Studio 提供的 .lib的*目录。*像 CRT、MFC、ATL 和 Windows SDK。您不想修改那个，默认值是从注册表中读取的，并由安装程序写入那里。仅当您想链接到这些 .libs 的非标准版本时才进行更改

2.  这些是链接器实际链接的*文件。*

3.  这些是链接器将搜索在项目符号 2 中或源代码中的 #pragma 注释指令中指定的文件的附加*目录。*如果项目符号 2 未指定文件的完整路径或 .lib 文件不存在于 VS 标准目录或项目目录之一中，您只需要设置此项。例如，您通常将 Boost 安装目录放在那里。

所以要点 2 是重要的，它实际上指定了要链接的内容。Bullet 3 只是帮助链接器找到文件。

# c# - 从 android 将 json 字符串发送到 C# Web 服务

> ID：10571475
> 
> 赞同：0
> 
> 时间：2012-05-13T11:50:29.047
> 
> 标签：c#, android, json, service, web

我正在尝试将我的 android 应用程序与 json c# web 服务通信，我必须从 web 服务中检索 json 对象，但是我无法将 json 对象发送到 web 服务。

这是我的网络服务代码

```
 [WebMethod]
    public void recibePosicion(string json_cad)
    {

        JavaScriptSerializer jss = new JavaScriptSerializer();
        Posicion nueva_posicion = jss.Deserialize<Posicion>(json_cad); 
        PosicionDAO posicion_dao = new PosicionDAO();
        posicion_dao.InsertaPosicion(nueva_posicion);

    } 
```

这是我的安卓代码

```
 HttpClient client = new DefaultHttpClient();
         HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
         HttpResponse response;
         JSONObject json = new JSONObject();

         try
         {
             HttpPost post = new HttpPost("http://10.0.2.2:1218/JSON.asmx/recibePosicion");
             post.setHeader("Accept", "application/json");
             post.setHeader("Content-type", "application/json");

             json.put("idPosicion", "-1");
             json.put("x", "100");
             json.put("y", "200");
             StringEntity se = new StringEntity( json.toString(), HTTP.UTF_8);  
             se.setContentType("application/json");
             post.setEntity(se);                                  

            HttpResponse getResponse = client.execute(post);

            final int statusCode = getResponse.getStatusLine().getStatusCode();

            if (statusCode != HttpStatus.SC_OK) { 
               Log.w(getClass().getSimpleName(), "Error " + statusCode + " for URL " + url); 
               return null;
            }

         }
         catch(Exception e)
         {
             e.printStackTrace();
             System.out.println("Cannot Estabilish Connection");
         } 
```

我得到状态码 500。相反，如果我将网络方法更改为

公共无效recibePosicion（）

我可以打电话给服务，但我不知道如何获取 json 数据。

请我感谢任何提示来解决该问题。

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-13T14:32:10.673

您的代码中几乎没有错误：

1.  WebMethod 必须是`static`
2.  您想在 webmethod 中获取 json 对象，但您的 webmethod 的参数是 type `string`，请将其更改为`object`：

    ```
    [WebMethod]
    public static void recibePosicion(object json_cad){

        JavaScriptSerializer jss = new JavaScriptSerializer();
        Posicion nueva_posicion = jss.Deserialize<Posicion>(json_cad); 
        PosicionDAO posicion_dao = new PosicionDAO();
        posicion_dao.InsertaPosicion(nueva_posicion);

    } 
    ```

# algorithm - 您可以对图形进行哪些修改以允许 Dijkstra 算法对其进行处理？

> ID：10571476
> 
> 赞同：0
> 
> 时间：2012-05-13T11:50:30.257
> 
> 标签：algorithm, graph, shortest-path, dijkstra

所以我一直在想，在不求助于另一种算法的情况下，您可以对图表进行哪些修改以允许 Dijkstra 的算法对其进行处理，并且在一天结束时仍能得到正确的答案？如果有可能呢？

我首先想到在所有权重中添加一个等于最负权重的常数，但我发现这会搞砸一切并改变原来的单一来源路径。

然后，我想到遍历图表，将所有小于零的权重放入一个数组或类似的东西中，然后将其乘以 -1。我认为他会工作（不考虑运行时间限制），但也许我看错了。

编辑：另一个想法。将所有负权重永久设置为无穷大怎么样。那样确保它们被忽略？

所以我只是想听听对此的一些看法；你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:28:54.823

似乎您正在寻找类似于[约翰逊](http://en.wikipedia.org/wiki/Johnson%27s_algorithm)算法的东西：

> 1.  首先，将一个新节点 q 添加到图中，由零权重边连接到每个其他节点。
>     
>     
> 2.  其次，使用 Bellman-Ford 算法，从新的顶点 q 开始，为每个顶点 v 找到从 q 到 v 的路径的最小权重 h(v)。如果这一步检测到负循环，则算法终止.
>     
>     
> 3.  接下来，使用 Bellman-Ford 算法计算的值对原始图的边进行重新加权：从 u 到 v，长度为 w(u,v)，给定新长度 w(u,v) + h( u) - h(v)。
>     
>     
> 4.  最后，去掉 q，并使用 Dijkstra 算法在重新加权的图中找到从每个节点 s 到每个其他顶点的最短路径。

通过任何算法，您都应该检查负循环，如果没有负循环，则找到最短路径。

在您的情况下，您需要运行一次 Dijkstra 算法。另请注意，在约翰逊算法中，半贝尔曼-福特算法仅针对新添加的节点运行。（并非所有顶点）。

# php - 无法使用 javascript 访问 json 文件

> ID：10571478
> 
> 赞同：1
> 
> 时间：2012-05-13T11:50:40.727
> 
> 标签：php, javascript, json, get, xmlhttprequest

我想阅读此页面的 json 内容：`http://89.92.40.250:8010/dreamteam/interface/get_event_detail.php?id=397`使用 javascript。

所以我开始了这个脚本：

```
var req = new XMLHttpRequest();
    req.open("GET", "http://89.92.40.250:8010/dreamteam/interface/get_event_detail.php?id=397", true); 
    req.onreadystatechange = monCode;   
    req.send(null);      

    function monCode() { 
        if (req.readyState == 4) { 
            var doc = eval('(' + req.responseText + ')');
            alert(req.responseText);
        }
    } 
```

当我想显示我使用的内容时 alert(req.responseText); 我没有看到内容。另外我有一个 Firebug 语法错误：语法错误：var doc = eval('(' + req.responseText + ')');

JSONP 不可能。

我们可以提取页面的内容，然后将其转换为 JSON 格式然后解析它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:58:31.920

由于跨域限制，这是不可能的；您的页面应托管在同一主机上。

您可以投资以下替代方案：

*   使用 JSONP（在您的情况下可能不起作用）
*   在将提取文件内容的同一主机上使用服务器端脚本（如代理）
*   查看配置跨域访问控制的方法：[https](https://developer.mozilla.org/En/HTTP_access_control) ://developer.mozilla.org/En/HTTP_access_control （您也不太可能选择）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:06:07.350

如果您无法创建自己的代理，则应使用 YQL 以避免跨域问题。

这是一个示例网址`id=397`，

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20json%20where%20url%3D'http%3A%2F%2F89.92.40.250%3A8010%2Fdreamteam%2Finterface%2Fget_event_detail.php%3Fid%3D397'&format=json&diagnostics=true 
```

你可以像这样动态设置id，

```
var id = 397;
var baseurl = "http://query.yahooapis.com/v1/public/yql?q=";
var q = "select * from json where url = 'http://89.92.40.250:8010/dreamteam/interface/get_event_detail.php?id="+id+"'";  
var url = baseurl + encodeURI(q) + "&format=json&diagnostics=true";
var req = new XMLHttpRequest();
req.open("GET", url, true);
req.onreadystatechange = monCode;
req.send(null);

function monCode() {
    if (req.readyState == 4) {
        var data = JSON.parse(req.responseText).query.results;
        console.log(data);
        //console.log(data.event);
        alert(data.event.title);
    }
}​ 
```

这[是一个 jsFiddle DEMO](http://jsfiddle.net/y2fa6/1/)

[YQL 的使用限制](http://developer.yahoo.com/yql/)

*   每个应用程序限制（由您的访问密钥标识）：每天 100,000 次调用
*   每个 IP 限制：/v1/public/ *：每小时 2,000 次呼叫；/v1/yql/* : 每小时 20,000 次通话

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:15:11.173

由于您正在从 127.0.0.1 向 89.92.40.250:8010 发出请求，这将是一个跨域请求，即使您访问同一台机器上的不同端口（如 127.0.0.1:8080），它也是一个跨域请求。

如果您可以控制 89.92.40.250:8010 呈现的内容，您可以使用`jsonp`它来绕过跨域限制，但它需要在后端进行一些更改，或者您可以使用[http://jsonp.jit.su/](http://jsonp.jit.su/)提供的功能它基本上代表您联系服务器，创建一个`jsonp`您可以处理的响应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:35:56.770

正如我在上面的评论中所说，您不能执行跨域 AJAX 请求。浏览器通常禁止这样做。

如果你真的想做一个跨域请求，有几个选项，一个是代理（配置你的本地网络服务器以将请求发送到远程服务器），另一个是[JSONP](https://en.wikipedia.org/wiki/JSONP)）。

JSONP 基本上包括在`script`您的 HTML 文档中添加一个额外的标签，同时使用请求 URL 作为`src`. 这允许您绕过跨域安全控制，因为您始终可以包含来自其他站点的 JS 资源。但是，远程服务器必须知道它必须对请求应用前缀（即`read_data({ /* JSON response */});`，否则返回的信息将不会被处理。

**更新**

例如，jQuery 可以透明地处理 JSONP，就好像它是一个普通的 AJAX 请求一样：

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

IE：

```
$.ajax({url:'http://your/request/url/',
        jsonp: 'your_desired_prefix',
        success: function(result) {
          /* result should hold you JSON data */
        }); 
```

# c# - 如何将鼠标的每次点击存储在一个整数数组中

> ID：10571481
> 
> 赞同：-1
> 
> 时间：2012-05-13T11:51:51.470
> 
> 标签：c#

我有一个 bresenham 算法，我在 Line 类中写了它 我可以画线 现在我想绘制多边形，所以我写了它的函数（void Polygon） 我应该将每次点击的坐标存储在一个数组中，然后我的函数应该得到它们我不'不知道如何存储每次点击
Radiobutton1 用于绘制线，radiobutton2 用于绘制多边形

```
private void panel1_MouseClick(object sender, MouseEventArgs e)
        {           
           if(radioButton1.Checked)
            if (firstClick)
            {
                firstX = e.X;
                firstY = e.Y;
                firstClick = false;
            }
            else
            {
              Line l = new Line(firstX, firstY, e.X, e.Y, panel1.CreateGraphics(), Convert.ToInt32(textBox1.Text));

              firstClick = true;

            }
           if(radioButton2.Checked)
            {
       //how to write here so as to store each click in array

                }
            }

        private void button1_Click(object sender, EventArgs e)
        {
            int n = Convert.ToInt32(textBox2.Text);

            Polygon(n, coor);
        }
   void Polygon(int n,int[] coordinates)
     {
       if(n>=2)
      {
         Line l=new Line(coordinates[0],coordinates[1],coordinates[2],coordinates[3],panel1.CreateGraphics(), Convert.ToInt32(textBox1.Text));
         for(int count=1;count<(n-1);count++)
             l=new Line(coordinates[(count*2)],coordinates[((count*2)+1)],coordinates[((count+1)*2)],coordinates[(((count+1)*2)+1)],panel1.CreateGraphics(), Convert.ToInt32(textBox1.Text));
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:58:01.697

您可以点一下点击坐标：

```
Point p = new Point(e.x, e.y); 
```

将您获得的积分保存在列表中：

```
// Declaration:
List<Point> myPoints = new List<Point>();

// in the method: 
if (radioButton2.Checked) {
   myPoints.Add(new Point(e.x, e.y));
} 
```

数组不是一个好主意，因为您通常不知道会有多少点击。List 是可变长度的，因此在这种情况下很有用。

# python - Eclipse，使用外部工具直接编辑文本

> ID：10571484
> 
> 赞同：2
> 
> 时间：2012-05-13T11:52:12.477
> 
> 标签：python, eclipse, pydev, indentation

我是日食的新手。我注意到关于 eclipse+PyDev 的一件事是，如果缩进不是 4 个空格的倍数，它会给我警告。这很好，因为我可以使用“reindent.py”来重新缩进它。我设法将它设置为外部工具。但问题是，当我使用它时，（使用Run->Externaltools->reindent）它会在后台修改代码，所以之后会弹出说源代码已被修改（duh！）会你想重新加载文件？（再次重复！）所以，我的问题是，有没有办法通过 reindent 管道当前选择的源代码（它在没有参数的情况下使用标准输入/输出），然后自动用 reindent 标准输出替换选择。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:59:13.987

如果您同时选中了“访问时刷新”和“使用本机挂钩刷新”，请检查首选项 > 常规 > 工作区（这可能会解决您的问题）。

要检查的另一件事是在您的外部工具配置中：它有一个“刷新”选项卡，您可以在其中选择在完成时刷新选定的资源。

另一件事......如果你的东西只是在不同的缩进中（比如2个空格），你可以简单地将所有2个空格替换为4个空格，而不是通过重新缩进......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:45:04.760

当您将 reindent.py 作为外部工具运行时，您修改的是包含源代码的整个文件，而不是编辑器中的当前选择。但是根据[PEP 8](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)，你不应该混合制表符和空格，所以这实际上可能是你想要的。在这种情况下，只需单击确定以重新加载文件并发现它有效。

在设置中，您可以在 Window->Preferences->PyDev->Editor 下找到一些选项

在那里，您可以在键入时激活用空格自动替换选项卡。您还可以选择 PyDev 为包含制表符的文件假定制表符间距。

您可能想阅读以下内容： [如何在 Eclipse 中集成 pep8.py？](https://stackoverflow.com/questions/399956/how-to-integrate-pep8-py-in-eclipse)

当您激活 Window->Preferences->PyDeV->Editor->Code Analysis->pep8.py 时，您可以为每一行生成一个警告，这与约定冲突。

# excel - 在 Excel 中将格式从一个列范围复制到另一列范围

> ID：10571492
> 
> 赞同：0
> 
> 时间：2012-05-13T11:53:44.530
> 
> 标签：excel, ms-office

我有一个 8 行和 4096 列的 excel 表。我试图找到每列的前 4 个值并突出显示它们。我可以通过使用条件格式对一列执行此操作并将格式复制到下一列但它不可能对于 4096 列。是否有宏或任何其他方式突出显示每列中的前 4 个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T14:36:03.100

将 Excel 的**条件格式**与*前 10 项...*功能结合使用

*   选择 A 列
*   调用前 10 项功能
*   将顶部数字设置为 4 并设置单元格的条件格式

A 列现在突出显示前 4 个值现在使用格式刷工具克隆它：

*   选择 A 列
*   单击格式刷按钮
*   单击列 B 以与 A 相同的方式应用格式
*   对C列到H列重复操作，一列接一列

现在您的列具有所有正确的格式。如果您选择您的表格，您将获得一个条件格式规则列表，如下所示：

![在此处输入图像描述](../Images/cf5431ccc626f9e9871d669e3a25a6ee.png)

# multithreading - 内核如何从线程返回

> ID：10571495
> 
> 赞同：1
> 
> 时间：2012-05-13T11:54:23.220
> 
> 标签：multithreading, process, operating-system, kernel, bootloader

我正在对计算机等进行一些硬核研究，因此我可以开始使用自己的迷你 Hello World 操作系统。

我正在寻找内核如何工作，我想知道内核如何使当前线程返回内核（以便它可以切换到另一个），即使内核没有运行并且线程没有执行此操作的指令。

它是否使用某种在几纳秒后返回内核的 CPU 中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:12:40.350

> 它是否使用某种在几纳秒后返回内核的 CPU 中断？

在定时器中断和（阻塞）系统调用期间，内核决定是继续执行当前活动的线程还是切换到另一个线程。计时器中断处理程序更新资源使用情况，例如消耗的系统和用户时间，用于当前运行的进程和`scheduler_tick()`决定是否需要抢占进程/线程的函数。

[请参阅Linux Kernel Development book](http://stid.googlecode.com/files/Linux.Kernel.Development.3rd.Edition.pdf)的第 62 页上的“抢占和上下文切换” 。

> 然而，内核必须知道何时调用 schedule()。如果它仅在代码明确调用时调用 schedule()，则用户空间程序可以无限期地运行。相反，内核提供了 need_resched 标志来表示是否应该执行重新调度（参见表 4.1）。这个标志在进程应该被抢占时由 scheduler_tick() 设置，当进程具有更高优先级时由 try_to_wake_up() 设置比当前正在运行的进程被唤醒。内核检查该标志，发现它已设置，并调用 schedule() 以切换到一个新进程。该标志是给内核的消息，即应尽快调用调度程序尽可能，因为另一个进程值得运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:01:51.147

> 它是否使用某种 CPU 中断

**是的！** 现代抢占式内核绝对依赖于来自硬件的中断来提供良好的 I/O 性能。键盘、鼠标、磁盘、NIC、USB 等驱动程序都是从中断输入的，并且可以使正在等待它们的线程在需要时（例如，当数据可用时）准备好/运行。

线程也可以通过进行 OS 调用来更改状态，该调用更改调用者自己的状态与另一个线程的状态。

来自硬件定时器的中断是许多中断源之一，唯一的特殊之处在于许多系统操作都有由该中断发出的超时信号。除此之外，定时器中断只会导致重新调度，在大多数情况下，不会改变任何事情。线程的就绪/运行状态。如果机器的 CPU 严重超载到就绪线程数多于内核数的地步，则定时器中断的副作用会导致 CPU 时间在就绪线程之间共享。

不要专注于定时器中断——其他驱动程序中断是绝对必要的。构建一个完全没有定时器中断的功能性抢占式多线程内核并非不可能。

# php - PHP PDO 不会使用 NOW() 准备语句

> ID：10571498
> 
> 赞同：2
> 
> 时间：2012-05-13T11:55:01.973
> 
> 标签：php, sqlite

我有一些将记录插入 SQLite 表的代码：

```
$statement = $db -> prepare("INSERT INTO posts (postedOn, content, tags) VALUES (DATE('now'), :content, :tags)");
$statement -> bindParam(':content', $content);
$statement -> bindParam(':tags', $tags); 
```

问题是postedOn 列只获取日期，而不是发布时间。我尝试使用 NOW() 代替：

```
$statement = $db -> prepare("INSERT INTO posts (postedOn, content, tags) VALUES (NOW(), :content, :tags)"); 
```

但我明白了

```
Call to a member function bindParam() on a non-object 
```

在第一个 bindParam 调用上。如果我在 SQLite 2009 Pro 中运行它，这很好用：

```
INSERT INTO posts (postedOn, content, tags) VALUES (NOW(), 'some content', 'tags') 
```

为什么不像 NOW() 那样准备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:14:14.167

[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

sqlite中没有`NOW()`函数，请尝试`'now'`在`datetime()`. SQLite 2009 Pro 必须有它自己的这个函数的实现，你可以尝试自己在 php 中实现：http: [//php.net/manual/en/pdo.sqlitecreatefunction.php](http://php.net/manual/en/pdo.sqlitecreatefunction.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:37:58.100

问题是 SQLite 中不存在 NOW() 函数。而是使用**datetime('NOW','localtime')**。[这是SQLite](http://snippetsofcode.wordpress.com/2012/08/14/now-function-in-sqlite/)中 NOW 函数的替代示例

# javascript - 如何知道在两个相同的项目中点击了什么

> ID：10571499
> 
> 赞同：0
> 
> 时间：2012-05-13T11:55:08.153
> 
> 标签：javascript, jquery, jquery-ui

我在切换某些被点击的内容时遇到问题。这两个项目是相同的，一旦我点击一个项目，另一个未点击的项目也会切换。有没有一种技术可以用来识别被点击的内容，以便被点击项目可以切换，另一个不受影响？

这是 jfiddle [http://jsfiddle.net/dNt9e/中的示例](http://jsfiddle.net/dNt9e/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:02:47.893

我已经更新了你的小提琴，请在这里查看 - [http://jsfiddle.net/57vsn/4/](http://jsfiddle.net/57vsn/4/)

基本上变化如下：

```
if($('.toggleContent', $(this).parent()).is(':visible')){
    $('.toggleContent', $(this).parent()).hide("slow");
    $('.green', $(this).parent()).val("+");
} else {
    $('.toggleContent', $(this).parent()).show("slow");
    $('.green', $(this).parent()).val("-");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:07:48.733

尝试

```
$(function(){
    $('.togglenav').click(function(e){  
        if($(this).closest('.toggleContainer').find(".toggleContent").is(':visible'){
            $(this).closest('.toggleContainer').find(".toggleContent").hide("slow");
            $('.green',this).val("+");
        } else {
            $(this).closest('.toggleContainer').find(".toggleContent").show("slow");
            $('.green',this).val("-");
        }

    });
}); 
```

[http://jsfiddle.net/dNt9e/2/](http://jsfiddle.net/dNt9e/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T11:59:55.617

给你的元素不同的 id，然后为这两个 id 编写两个不同的切换函数，这些函数将在点击事件上调用，`jQuery(#id1).click(function() { // Your code to toggle })`对于其他元素也一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:02:38.133

`$(this)`在事件中使用切换开关。

$(this) 表示触发事件的元素。

# c++ - 对两个 boost::accumulator_set 实例求和

> ID：10571501
> 
> 赞同：12
> 
> 时间：2012-05-13T11:55:25.190
> 
> 标签：c++, boost, c++11, boost-accumulators

我最近发现了优秀的库 boost::accumulators，我想用它来替换我的一些积累统计数据的代码。

我在文档中找不到的一件事是能够对两个累加器集求和，如 operator+=

例子：

```
using namespace boost::accumulators;
typedef accumulator_set<double, features<tag::variance> > AccumSet;

class Foo {
    AccumSet acc;
public:
    Foo& operator+=(const Foo& that) {
        this->acc += that.acc; // error! no such operator
        return *this;
    }
    double GetVariance() { return variance(acc); }
}; 
```

如何使用可用的 API 实现这一点？我不知道这是否可以用于库中所有类型的累加器（可能不适用于尾部），但它肯定可以用于重要的事情，如计数、总和、均值、矩、协方差等

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T16:30:48.677

不幸的是，Boost.Accumulators 没有提供这个特性，可能是因为组合只适用于一些统计数据。

[Boost 跟踪器上](https://svn.boost.org/trac/boost/ticket/2215)有一张票，要求提供这样的`combine`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T13:37:09.390

没有合适且可用的 operator+= 用于添加两个 accumulator_set<> 对象。

# python - Python平分秋色

> ID：10571505
> 
> 赞同：0
> 
> 时间：2012-05-13T11:56:18.293
> 
> 标签：python

这可能很愚蠢。我现在无法弄清楚。

有一个总数 (x)

哪个需要与（y）平分

如果 x 是 10,000 而 y 是 10，

这意味着 10,000 将在 10 之间吐出。

如何找到起点

```
1 starts at 1 and ends 1,000
2 starts at 1,001 & ends 2,000
3 ..
4 ..
5 .. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T12:02:15.803

这实际上只是一些简单的数学运算：

```
x = 10000
y = 10
print([(item, item+(x//y-1)) for item in range(1, x, x//y)]) 
```

给我们：

```
[(1, 1000), (1001, 2000), (2001, 3000), (3001, 4000), (4001, 5000), (5001, 6000), (6001, 7000), (7001, 8000), (8001, 9000), (9001, 10000)] 
```

在这里，我们使用[内置`range()`函数](http://docs.python.org/library/functions.html#range)和[列表推导](https://www.youtube.com/watch?v=t85uBptTDYY)。

这通过使用`range()`内置函数从`1`到 下面构造一个生成器`x`，采用`x`除法（整数除法，所以我们没有得到浮点数）的步骤来工作`y`。

然后我们使用列表推导来获取这些值（`1, 1001, 2001, ..., 9001`），然后将它们放入元组对，将`(x//y-1)`（在这种情况下`999`）添加到值以获得结束边界。

自然，例如，如果您想在循环中使用它，最好使用生成器表达式，以便在列表推导上懒惰地评估它。例如：

```
>>> for number, (start, end) in enumerate((item, item+(x//y-1)) for item in range(1, x, x//y)): 
...     print(number, "starts at", start, "and ends at", end)
... 
0 starts at 1 and ends at 1000
1 starts at 1001 and ends at 2000
2 starts at 2001 and ends at 3000
3 starts at 3001 and ends at 4000
4 starts at 4001 and ends at 5000
5 starts at 5001 and ends at 6000
6 starts at 6001 and ends at 7000
7 starts at 7001 and ends at 8000
8 starts at 8001 and ends at 9000
9 starts at 9001 and ends at 10000 
```

# mysql - 如何按月获取mysql行

> ID：10571507
> 
> 赞同：1
> 
> 时间：2012-05-13T11:56:36.790
> 
> 标签：mysql, rows

我有问题，我很困惑。我有一个事件表，其中有一列包含创建日期时间的时间戳。我想获取在本月、上个月以及上个月前 2 个月创建的所有事件（行）。所以，基本上4个月。我想分别显示它们，我可以认为我可以在一个查询中查询本月所有行的数据库，并在另一个查询中查询上个月，依此类推 4 个月。问题是我不知道我该怎么做。mysql中有一个month（）函数，但我迷路了，不知道如何使用它。

任何帮助将不胜感激。谢谢

编辑：表结构是这样的。

```
Title  | Uri  | created

Event  | Event| 1337782223
name   | uri  |  
....... 
```

**编辑 2**

谢谢大家的帮助..我自己和我的朋友谷歌尝试过......:)我用过这个

```
SELECT * FROM `events` WHERE MONTH(FROM_UNIXTIME(created)) = $month; 
```

这似乎对我有用，我只会通过我想要从 php 获得的行的月份，这对我来说更容易......哈哈

再次感谢大家的回答，感谢。这个地方很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:01:55.680

```
Select * From your_table Group By Month(column_with_date); 
```

当然，您的表中必须有一个时间戳列。

如果没有，则在插入条目时无法恢复信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:02:21.093

```
$month = '5,4,3,2';
select colum_name from table_name where month(table_field_name) IN ($thismonth) Group By month(table_field_name) 
```

如果您每个月都使用单独的查询，请尝试这个

```
$todayDate = date("Y-m-d");
$thismonth = strtotime($todayDate);
 $previous_month =  mktime(0, 0, 0, date("m")-1, date("d"), date("Y")); 
```

你可以得到过去的几个月，只需减去 NUMBER ex -2,-3 .....对于当前月份

```
select colum_name from table_name where month(table_field_name) = month ($thismonth) AND year(table_field_name) = year ($thismonth)  Group By month(table_field_name); 
```

上个月

```
 select colum_name from table_name where month(table_field_name) = month ($previous_month ) AND year(table_field_name) = year ($thismonth) Group By month(table_field_name) 
```

# javascript - SugarCRM - 从视图调用 js 函数（例如 editviewdefs.php）

> ID：10571508
> 
> 赞同：0
> 
> 时间：2012-05-13T11:56:53.513
> 
> 标签：javascript, view, sugarcrm

在 SugarCRM 中，我想编辑潜在客户编辑视图，因此当用户将焦点留在其中一个文本框 (onblur) 上时，我可以调用 js 函数。我编辑了 editviewdefs.php 文件 - 在“phone_work”中添加了一个“customcode”，带有标签：

```
array (
  array('name'=>'last_name',
        'displayParams'=>array('required'=>true),
  ),
  array(
  'name' => 'phone_work',
  'customCode' => '<input name="phone_work"  id="phone_work" size="30" maxlength="25" type="text" value="{$fields.phone_work.value}" onblur="hello()">'
  ),
), 
```

如您所见，我将 js 函数称为 hello()。我将 js 函数添加到 jssource\src_files\modules\leads\lead.js 并使用管理员重建 JS 压缩文件。功能是这样的：

功能你好（）{警报（'asaf'）; }

它不起作用并且没有调用该函数，为什么？这是在视图中使用 js 函数的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:21:35.377

您需要将其添加到名为 custom/modules/Leads/Lead.js 的 js 文件中。然后，将您自定义的 editviewdefs.php 文件复制到 custom/modules/Leads/metadata/ 目录（如果尚未完成，请创建它），并将其添加到它的末尾...

```
$viewdefs['Leads']['EditView']['templateMeta']['includes'][] = 'custom/modules/Leads/Lead.js'; 
```

但是要小心，因为这些东西是特定于版本的，我花了几个小时才弄清楚我的版本（SugarCRM CE 5.5）更像`Leads, EditView , templateMeta, includes, file, 'path'`

# php - 文件打开/另存为对话框和 MIME 类型

> ID：10571509
> 
> 赞同：1
> 
> 时间：2012-05-13T11:57:21.783
> 
> 标签：php

我正在为一个站点开发一个简单的文档管理系统 - 用户可以上传大约 20 种不同的文件类型，文档被重命名，然后存储在 www 上方的文件夹中，在文档表中创建一个条目以捕获由用户，然后通过另一个 php 文件检索该项目，因此文件的存储位置对用户隐藏。

当用户使用简单的 a href 点击下载文件时，它会调用，例如“view.php?doc=image.jpg” - 当他们这样做时，当前文件会在浏览器中打开，因此 jpg 会打开一个带有页面的窗口像字符等的“翅膀”。

我希望能够强制打开/保存对话框，以便用户决定要做什么，并且我的应用程序不会尝试在浏览器窗口中打开上述结果。

从以前的帖子中，我发现我知道我无法在“a href”标签中传递 mime 类型，那么我还有哪些其他选择？例如，我可以将标题信息放入下面的 view.php 文件吗？

```
$_file = $_GET['doc'];

$filename = './dir/'.$_file; 

if (file_exists($filename)) { 
echo file_get_contents('./dir/'.$_file);
} else { 
echo "The file $_file does not exist"; 
} 
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:07:30.730

您可以使用[get_headers()](http://php.net/manual/en/function.get-headers.php)获取所需文件的 MIME 类型标头，然后使用[header()](http://php.net/manual/en/function.header.php)将这些标头输出到您正在显示的文件中。

或者，要简单地强制下载，这：

```
header('Content-Description: File Transfer');
header("Content-type: application/octet-stream"); 
```

应该这样做。

# c# - 使用 WPF 中网格中的选定项目填充面板

> ID：10571512
> 
> 赞同：0
> 
> 时间：2012-05-13T11:58:11.157
> 
> 标签：c#, wpf, binding, datagrid, datatemplate

我有`DataGrid`一堆代表系统中项目的行。我希望每次用户在网格中选择一个项目（允许用户选择多个项目）时，该项目将被添加到 a`StackPanel`并拥有自己的数据模板，使用 an`Expander`来显示其数据。

谁能帮我在 WPF 中做到这一点？

谢谢！约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:34:35.810

我不会使用 StackPanel，而是使用 ItemsControl，并将其 ItemsSource 绑定到 DataGrid 的 SelectedItems。但是，目前我不确定 SelectedItems 是否有更改通知。如果没有，您可能必须在两者之间使用 CollectionViewSource，并在 DataGrid.SelectionChanged 事件期间调用 CollectionViewSource.Refresh。

# c# - c# 模糊属性

> ID：10571515
> 
> 赞同：1
> 
> 时间：2012-05-13T11:58:34.090
> 
> 标签：c#, attributes, ambiguous

我阅读了以下很好的问题：[C# 中的属性](https://stackoverflow.com/questions/726029/attributes-in-c-sharp)并学到了很多关于属性的知识。

我正在使用一个使用多个属性的库。例子：

```
[State]
public class USStates
{
    [City]
    public void isNewYork() { }
    [Zip]
    public ZipCode GetZipCode() { }
} 
```

我想创建自己的属性并使用来自 3rd 方命名空间的现有属性（州、城市、邮编）对我的类执行额外的工作。例如，我正在努力实现这一目标：

```
using 3rdPartyNamespace;
using MyOwnSuperNamespace;

public class State : Attribute 
{ 
    // my own implementation/extension of State 
}

// create City, Zip attributes respectively

[State]
public class USStates
{
    [City]
    public void isNewYork() { }
    [Zip]
    public ZipCode GetZipCode() { }
} 
```

我尝试了上述方法，但在所有 3 个属性上都出现了不明确的属性错误。我可以告诉编译器直接调用这两个属性而不是使用其中一个吗？我想保留现有属性并执行额外的工作，而不必用我创建的其他属性标记我的类。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:01:50.887

> 我可以告诉编译器直接调用这两个属性而不是使用其中一个吗？

如果要应用这两个属性，则需要指定这两个属性。您需要完全限定属性名称，或使用`using`别名指令，例如

```
using Mine = MyOwnSuperNamespace;
using Theirs = 3rdPartyNamespace;

[Mine.State]
[Theirs.State]
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:04:19.857

您可以扩展 State 属性并添加您自己的属性。例如：

```
public class MyState : StateAttribute
{ 
    public string MyProperty {get;set;}
}

// create City, Zip attributes respectively

[MyState {MyProperty = "Test"}]
public class USStates
{
    [City]
    public void isNewYork() { }
    [Zip]
    public ZipCode GetZipCode() { }
} 
```

你可以这样检查属性：

```
USStates states = new USStates();
var attribute = states.GetType().GetCustomAttributes(typeof(MyStateAttribute, false)).FirstOrDefault();
if (attribute != null)
{
  var prop = attribute.MyProperty;
 // Do stuff..
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:02:18.127

你想`[State]`解决*这两个*属性？这是完全不可能的。您需要同时指定两者，并使用命名空间以避免歧义。

# xaml - Vs Blend + Windows 8：如何为应用程序中的元素设置系统通知主题的样式？

> ID：10571516
> 
> 赞同：0
> 
> 时间：2012-05-13T11:58:44.060
> 
> 标签：xaml, blend

我需要为我的应用程序中的按钮设置样式 通知窗口中的按钮类似样式（适用于 Windows 8） 非常感谢您提供任何信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:38:35.553

使用的窗口`MessageBox`没有公开，也没有从应用程序继承样式（这是正确的）。

解决方案通常是推出您自己的消息框服务，该服务将使用您设计的窗口。因为它会继承`Window`它，所以会使用应用程序中的样式。

# ms-access - 在其他表单的查询中使用主表单中按下按钮的标题

> ID：10571520
> 
> 赞同：0
> 
> 时间：2012-05-13T11:58:56.193
> 
> 标签：ms-access, vba, byref, byval

我的问题是：

主窗体有 9 个命令按钮和连续的子窗体。单击某个按钮打开其他带有用于输入数量的文本框和两个命令按钮的表单。单击第一个按钮时，我想使用主窗体中按下按钮的标题进行查询。如何获得该按钮标题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:43:37.237

您刚刚单击了按钮，您知道控件的名称，所以我不太明白问题所在，除此之外，这听起来是个很糟糕的主意。

```
Private Sub cmdClickMe_Click()
Debug.Print Me.cmdClickMe.Caption
Debug.Print Screen.ActiveControl.Caption
End Sub 
```

# html - 一页 网站页面指定的页脚。立场：改变

> ID：10571521
> 
> 赞同：0
> 
> 时间：2012-05-13T11:59:11.470
> 
> 标签：html, css

我正在建立一个单页布局网站。现在我希望 class="footer-bar" 在每个站点上都是 position:absolute，但在 #Home Page 它应该是 position:relative。

有谁知道如何对每个页面进行页面特定的更改？页脚不应写入每一页。只有一次。如果我在#Home 页面上，则只有 CSS 更改。

感谢您的想法。

```
<ul>
<li><a href="#Home">Home</a></li>
<li><a href="#Other">Home</a></li>
</ul>

<ul class="tabs-content">
<li id="Home"> Content Page Home </li>       ---->Footer position:relative
<li id="Other"> Content Other Page </li>     ---->Footer position:absolute
</ul>

<div class="footer">Footer Content</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T21:21:44.310

我不确定我是否收到您的问题，但据我了解，这行不通：

```
.footer-bar {
position: absolute;
/* the rest of your styles */
}

.footer-bar#Home {
position: relative;
/* anymore additional styles */
} 
```

编辑：

将上述css中的#Home设为.Home，并将下面的jQuery放入必要的函数中。

```
$(".footer-bar").addClass("Home"); 
```

或者

```
$(".footer-bar").css("position","relative"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:58:29.047

我想你将不得不使用像 Jquery 这样的东西来做到这一点。

您需要一种方法来识别在任何给定时间哪个选项卡处于活动状态，因此在导航链接中构建一个单击事件，该事件会将 .active 类切换到您的选项卡。

然后，您可以查询哪个选项卡处于活动状态，测试它是否是您的“主页”选项卡，并根据需要调整您的 CSS。

如果这有点泥泞，我会为你准备一把小提琴。=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:56:45.023

我是这样做的：

```
$("#navpoint1, #navpoint2, #navpoint3, #navpoint4").bind("click", function () {
         $(".footerbar").css({

         position: 'absolute',
         bottom: '0'

         });
     }); 
```

# javascript - Javascript 获取嵌入的 youtube id

> ID：10571522
> 
> 赞同：0
> 
> 时间：2012-05-13T11:59:22.067
> 
> 标签：javascript, youtube, html-parsing

我嵌入了 youtube 视频，如下所示：

```
 <object height="25" width="610"><param name="movie" 
    value="http://www.youtube.com/v/GBApIkX0YN4&hl=en_US&color1=0xf4f4f4&color2=0xffffff&hd=0&fs=0&enablejsapi=1&playerapiid=ytplayer">
    </param>
    <param name="allowFullScreen" value="true">
    </param>
    <param name="allowscriptaccess" value="always">
    </param>
    <embed src="http://www.youtube.com/v/GBApIkX0YN4&hl=en_US&color1=0xf4f4f4&color2=0xffffff&hd=0&fs=0" height="25" width="610" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always">
    </embed></object> 
```

* * *

在 youtube 示例中，他们使用以下代码查看玩家状态何时发生变化。

```
 function onYouTubePlayerReady(playerId) {
  ytplayer = document.getElementById("myytplayer");
  ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
}

    function onytplayerStateChange(newState) {
    alert("Player's new state: " + newState);
    } 
```

**当我将它放入我的页面时，当我播放暂停视频时没有任何反应（我认为它应该发出警报，说明状态是什么。）**

我想使用“GBApIkX0YN4”的javascript获取它的id，这样我就可以使用youtube api并找出视频何时结束来调用javascript函数。

1.  有没有更简单的方法来判断视频何时结束？

2.  如果没有，我将如何获得它的 ID？

我看到另一个人使用

```
 youtubeID = v.attr('src').match(/youtube\.com.*?v[\/=](\w+)/)[1]; 
```

但我不知道如何从嵌入代码中找到 url。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:16:02.873

您应该使用[Youtube Javascript API](https://developers.google.com/youtube/js_api_reference)这可以通过包含在您的嵌入 URL 中启用，`&enablejsapi=1`这样您的 URL 将如下所示：

`http://www.youtube.com/v/GBApIkX0YN4&hl=en_US&color1=0xf4f4f4&color2=0xffffff&hd=0&fs=0&enablejsapi=1`

为了调用播放器 API 方法，您必须首先获取对您希望控制的播放器对象的引用。这可以通过在 or 标记上调用 getElementById() 来获取播放器对象来完成。

然后，您可以`onStateChange`在播放器对象上设置事件，该事件将根据视频的状态返回一个值。您需要检查值是否为 0，表示视频已结束。

从文档中：

```
This event is fired whenever the player's state changes. Possible values are unstarted (-1), ended (0), playing (1), paused (2), buffering (3), video cued (5). When the SWF is first loaded it will broadcast an unstarted (-1) event. When the video is cued and ready to play it will broadcast a video cued event (5). 
```

我希望这会有所帮助。

# playn - Playn和多点触控？

> ID：10571523
> 
> 赞同：3
> 
> 时间：2012-05-13T11:59:23.893
> 
> 标签：playn

我制作了这个 Button 类，以捕捉 Pointer 事件：

```
public class Button implements Pointer.Listener {

  public void initLayer(Image defaultImage) {
    layer = parent.createImageLayer(this.defaultImage);
    layer.addListener(this);
  }

... 
```

如果我触摸其中一个实例化按钮，我会收到 onPointerStart 和 onPointerEnd 事件。但是，如果我的一个按钮已经被触摸并且我开始触摸另一个按钮，我不会得到第二个按钮的 onPointerStart 事件。

有没有办法用 playn 获得这些多点触控事件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T04:30:21.367

该`Pointer`服务旨在通过简单的触摸交互或鼠标交互进行抽象。因此它不支持任何类型的多点触控交互。除了通过服务进行的第一次触摸之外，您不会收到有关任何触摸的通知`Pointer`。

如果要处理多个触摸，则必须使用`Touch`服务，并且目前没有办法`Touch`直接在图层上注册监听器。因此，您必须注册一个全局侦听器并进行自己的命中测试，并将触摸移动映射到该触摸首先击中的图层等。

# magento - Magento - cms/page 集合 - 应用过滤器以仅返回给定商店 ID 唯一的页面（即未分配给其他商店）

> ID：10571527
> 
> 赞同：3
> 
> 时间：2012-05-13T11:59:55.160
> 
> 标签：magento, magento-1.5

我可以用：

```
Mage::getModel('cms/page')->getCollection()->addStoreFilter($store_id); 
```

检索按商店 ID 过滤的 CMS 页面集合。

但是我如何让它删除那些也分配给其他商店的呢？

即：我不希望它返回具有“所有商店视图”作为商店视图的项目。（或分配给该 CMS 页面的任何其他附加商店 ID。）它必须只返回该商店唯一的页面。

我正在扩展 Aitoc 权限模块，以便商店管理员无法查看或编辑可能影响其他商店的 CMS 页面和静态块。这涉及从网格中过滤这些项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T18:52:00.467

没有本机收集方法可以执行此操作，因此您需要

1.  查询`cms_page_store`表中给定商店独有的页面

2.  在过滤器中使用上面的结果

我没有完全测试以下内容，但它**应该可以**工作（如果没有，它会给你一个很好的开始你自己的查询）

```
$page     = Mage::getModel('cms/page');
$resource = $page->getResource();
$read     = $resource->getReadConnection();

#$select   = $read->query('SELECT page_id FROM ' . $resource->getTable('cms/page_store') . ' GROUP BY store_id');

//set total count to look for.  1 means the page only appears once.
$total_stores_count_to_look_for = '1';

//get the table name.  Need to pass through getTable to ensure any prefix used is added
$table_name                     = $resource->getTable('cms/page_store');

//aggregate count select from the cmd_page_store database
//greater than 0 ensures the "all stores" pages aren't selected
$select = $read->query('SELECT page_id as total
FROM '.$table_name.' 
WHERE store_id > 0 
GROUP BY page_id
HAVING count(page_id) = ?',array($total_stores_count_to_look_for));

//fetch all the rows, which will be page ids
$ids   = $select->fetchAll(); 

//query for pages using IDs from above
$pages = Mage::getModel('cms/page')->getCollection()->addFieldToFilter('page_id',array('in'=>$ids));

foreach($pages as $page)
{
    var_dump($page->getData());
} 
```

如果您有成千上万的 CMS 页面，那么更改`cms/page`集合`select`以加入聚合表数据可能是值得的。我将把它作为练习留给读者，因为这些连接可能会变得很棘手。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-13T19:36:39.583

```
$collection = Mage::getModel('cms/page')->getCollection();
$collection->getSelect()
    ->join(
        array('cps' => $collection->getTable('cms/page_store')),
        'cps.page_id = main_table.page_id AND cps.store_id != 0',
        array('store_id')
    )
    ->columns(array('stores_count' => new Zend_Db_Expr('COUNT(cps.store_id)')))
    ->group('main_table.page_id')
    ->having('stores_count = ?', 1)
    ->having('cps.store_id = ?', $storeId)
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T23:18:00.573

将 Alan 和 Vitaly 提出的解决方案的一些元素与我自己的繁琐理解融合在一起，我通过以下代码实现了我所需要的。

*具体来说，我正在扩展 Aitoc 权限模块，以便商店管理员无法查看或编辑可能影响其他商店的 CMS 页面和静态块。这涉及从网格中过滤这些项目。*

```
$collection = Mage::getModel('cms/page')->getCollection();
$collection->addStoreFilter(Mage::helper('aitpermissions')->getStoreIds());
$conn = Mage::getSingleton('core/resource')->getConnection('core_read');
$page_ids = array();
foreach($collection as $key=>$item) {
    $page_id = $item->getId();
    $results = $conn->fetchAll("SELECT * FROM cms_page_store 
                                WHERE page_id = ".$page_id.";");
    $count = 0;
    $arr_stores = array();
    foreach($results as $row) {
        $arr_stores[] = $row['store_id'];
        $count++;
    }

    //We dont want to show the item if any of the following are true:
       //The store id = 0 (Means its assigned to All Stores)
       //There is more than one store assigned to this CMS page         
    if( in_array('0',$arr_stores) || $count>1) {
            //This removes results from the grid (but oddly not the paging)
        $collection->removeItemByKey($key); 
    }
    else {
        //build an array which we will use to remove results from the paging
        $page_ids[] = $page_id; 
    }
}

//This removes results from paging (but not the grid)
$collection->addFieldToFilter('page_id',array('in'=>$page_ids)); 
```

我不确定为什么需要使用两种不同的方法从分页和网格中过滤。该站点使用magento 1.5，因此可能存在与此相关的问题。

无论哪种方式，这个解决方案都对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T12:58:33.543

我通过加入将字段 store_id 添加到页面集合的解决方案，并使用集合方法 addFieldToFilter()。

```
$pages = Mage::getModel('cms/page')->getCollection();

$pages->getSelect()->joinInner(
     array('cms_page_store' => 'cms_page_store'),
     'main_table.page_id = cms_page_store.page_id',
     array()
);

$pages->addFieldToFilter('store_id', ['in' => [1, 2]]); 
```

# vb6 - 如何创建没有隐藏“框架”窗口的 VB 6 应用程序，如 ThunderRT6Main？

> ID：10571529
> 
> 赞同：1
> 
> 时间：2012-05-13T12:00:16.943
> 
> 标签：vb6

我对我的旧版 vb6 应用程序有一个安全要求，即不创建任何隐藏窗口，例如 ThunderRT6Main，这是为每个 vb 应用程序创建的隐藏窗口。

我尝试过创建activex dll等，并修改PE头以作为真正的控制台exe运行，但它们都会产生这些隐藏的vb窗口。

我知道这些隐藏窗口用于事件处理，但我的 exe 没有 GUI，也不是以任何方式驱动的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:43:11.320

据我所知，这是不可能的。每个 VB 6 应用程序都有一个隐藏的顶级窗口，框架在内部使用它来接收来自系统的通知和其他事件，并监督应用程序中的所有其他窗口。

即使您不创建任何其他窗体，仍然会创建此顶级窗口，您无法阻止它。

正如其他人所提到的，最好的选择可能是使用不同的编程语言/GUI 框架来创建这个应用程序。VB 的简单性和易用性伴随着成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:08:29.823

好吧，我不明白——通常会有一个隐藏窗口——即使你作为服务运行，你也必须有隐藏窗口，例如用于处理异步 HTTP 请求（因为它们是事件驱动的）。

无论如何，安全原因是什么？

# mobile - 移动应用程序的本地语言或跨平台语言（如 HTML5）之间的比较

> ID：10571533
> 
> 赞同：0
> 
> 时间：2012-05-13T12:01:10.923
> 
> 标签：mobile

我在一些网站上进行了研究，发现使用跨平台语言编写应用程序更好。
但是，它对使用 HTML5 有好处吗？是否有编写移动应用程序的教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:11:39.830

它不是更好，但它更快更容易。Android 想要Java，iPhone 想要Objective C，同时你可以启动例如PhoneGap 并用JavaScript 编写一切。因此，您可以节省开发时间，但应用程序本身会运行得更慢，需要更多的工作才能使其符合平台的外观和感觉。至于教程，它们伴随着每个单独的框架。

# iphone - MPMoviePlayerController 在 iOS 5 上不起作用

> ID：10571536
> 
> 赞同：1
> 
> 时间：2012-05-13T12:01:32.017
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, ios5

我正在使用 MPMoviePlayerController 播放“.3gp”视频，我从服务器获取数据并将其保存在 NSData 对象中，然后将其写入 Document 目录中的文件这是我的代码

在 .hi 中将 videoPlayer 定义为

```
@interface MainViewController : UIViewController {
   MPMoviePlayerController* videoPlayer;   }
@property (strong, nonatomic) MPMoviePlayerController* videoPlayer; 
```

在 .m 文件中

```
-(void)videoWillStartPlayWithUrl:(NSData *)d
{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,      YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"myMove.3gp"];

    [d writeToFile:path atomically:YES];

    NSURL *url = [NSURL fileURLWithPath:path];
    adBannerView.hidden = YES;
    self.videoPlayer = [[MPMoviePlayerController alloc]initWithContentURL:url];
    self.videoPlayer.controlStyle = MPMovieControlStyleEmbedded;  
    self.videoPlayer.shouldAutoplay = YES;  

    [self.videoPlayer.view setFrame: self.view.bounds];

    [self.view addSubview:self.videoPlayer.view];  

    [self.videoPlayer setFullscreen:YES animated:YES];
    [self.videoPlayer prepareToPlay];
    [self.videoPlayer play];

} 
```

**它在 iOS < 5 中完美运行，但在 iOS 5 中它只是显示黑屏并直接退出** ，我似乎无法解决阻止视频在 iOS 5 中播放的问题，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:11:47.117

经过数小时的搜索和调试，问题原来与我试图播放的视频的编解码器有关，

虽然它们在 iOS 4 中完美运行，但 iOS 5 需要[MPMoviePlayerController](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)中提到的 .3GP 视频的特殊编解码器。编程指南，因此解决方案是更改我的视频的编解码器，并且该代码在 iOS 5 上完美运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:09:35.877

在您的头文件中执行此操作：-

```
MPMoviePlayerController *myPlayer; 
```

并将您的财产更改为：-

```
@property(nonatomic, strong) MPMoviePlayerController *myPlayer; 
```

按如下方式启动moviePlayer：-

```
MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:Url];
self.myPlayer= player; 
```

您可能启用了弧。

# telerik - 关闭 RadWindow 后如何重新绑定 RadGrid

> ID：10571541
> 
> 赞同：1
> 
> 时间：2012-05-13T12:01:52.857
> 
> 标签：telerik, radgrid, radwindow

我有一个`MasterPage`与`RadAjaxManager`.

`RadGrid`我的`ContentPage`( `Default.aspx`)中有一个。我想`RadGrid`在关闭我的`RadWindow`.

我怎样才能重新绑定`RadGrid`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T14:04:46.160

`default.aspx`当您调用 RadWindow 打开时，在您的内容页面 ( ) 上附加属性`OnClientClose="refreshGrid"`。当窗口关闭时，该函数将被调用。

```
<telerik:RadWindow runat="server" ID="myRadWin" OnClientClose="refreshGrid" /> 
```

您可以使用这样的函数来获取您的 radGrid 并在客户端重新绑定它。

```
function refreshGrid() 
{        
      var masterTable = $find("<%=radGrid1.clientId%>").get_masterTableView();
      masterTable.rebind();
} 
```

* * *

我已经在 masterPages 中为您的情况添加了此内容，但保留上述内容，因为它对于遇到此问题的任何其他人也有效，因为有不止一种方法可以完成此操作。

在您的 Rad 窗口页面中包含一个 JavaScript 函数，您将使用它来关闭您的 RadWindow，该函数还将回调您的父页面。最优雅的方法是创建一个在 MasterPage 中处理的通用回调函数，其中包含一些参数，并让该函数将其委托给您正在处理的页面的另一个更具体的回调函数。一种更通用的方法是我在下面描述的：

在您的 RadWindow 页面中：

```
function CloseAndRefreshGrid() {
            var oWin = GetRadWindow();
            var parentWindow = oWin.BrowserWindow;
            $(oWin).ready(function()
            {
                oWin.close();
            });
            parentWindow.refreshGrid();            
        }

 function GetRadWindow() {
            var oWindow = null;
            if (window.radWindow) oWindow = window.radWindow; //Will work in Moz in all cases, including classic dialog
            else if (window.frameElement.radWindow) oWindow = window.frameElement.radWindow; //IE (and Moz as well)

            return oWindow;
        } 
```

在您的内容页面中，您可以包含以下 JavaScript：

```
 function refreshGrid() 
    {        
          var masterTable = $find("<%=radGrid1.clientId%>").get_masterTableView();
          masterTable.rebind();
    } 
```

# javascript - 使用 JS 计算一组按钮的每个单选按钮的两个值的总和

> ID：10571554
> 
> 赞同：1
> 
> 时间：2012-05-13T12:02:40.107
> 
> 标签：javascript, jquery

我有 4 组单选按钮，每组有 4 个按钮。每个按钮都设置了两个用 | 分隔的值 IE：

```
<input type="radio" id="t20" name="train2" value="0|0">
<input type="radio" id="t20" name="train2" value="5|0.19">
<input type="radio" id="t20" name="train2" value="10|0.19">
<input type="radio" id="t20" name="train2" value="15|0.19"> 
```

所有 4 个组都遵循上面的示例 - 第一个值的数字不同，按钮 2,3 和 4 的第二个值的数字相同。从每个组中，我只检查了一个按钮。

我有一个 java 脚本，它必须对选中按钮的值进行一些计算：

```
$(document).ready(function()
{   
var total = 0;
function calcTotal()
{
    $("input:checked").each(function()
    {
        var value = $(this).attr("value");
        var array = value.split('|')
        var firstValue = array[0];
        var secondValue = array[1];
        total += parseFloat(firstValue);
    });
}
calcTotal();
$("sum").before('<font class="total" style="font-family: Myriad Pro, Gill Sans, Gill Sans MT, Calibri, sans-serif; font-size: 18px; font-weight: bold;">' + total + '</font>');
}); 
```

选中的单选按钮的第一个值之和的结果是确定的。如果您还更改了某些选择，则更新了一些。

我不能正确地计算第二个值的总和并以相同的方式输出它们。我已经尝试了一天没有运气。

**注意**我只需要选中按钮的总和。但是我需要一个第一个值的总和和另一个第二个值的总和一次

**注意 2**在每组中我只检查了 1 个按钮，这就是我需要的原因，`$("input:checked").each(function()`所以它不是 1 组中 4 个按钮的总和。

**NOTE3**完整代码[http://jsfiddle.net/P3ZyH/10/](http://jsfiddle.net/P3ZyH/10/)

任何帮助高度赞赏。

* * *

最后我发现了问题所在……很难阻止我用头撞墙。

最后一组 2 个 rafio 按钮，我忘记分配它们的第二个值。所以现在一切正常。

如果有人有兴趣 - [http://jsfiddle.net/milenmk/P3ZyH/17/](http://jsfiddle.net/milenmk/P3ZyH/17/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:19:45.053

在 jsfiddle 上查看[此解决方案。](http://jsfiddle.net/jakemask/aqhA8/)

基本上，您在总变量上有一些范围问题，而您只是总结了第一个值。我将 total 更改为一个数组，并将其中的两个值相加。

听起来您想要的是复选框，并且每次他们选中复选框时都会更新总数？这可以通过添加一个

```
$('#checkboxes').on("change",calcTotal); 
```

到复选框字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:13:57.310

如果要查找所有单选按钮的值，则每组具有相同名称的单选按钮仅返回所选单选按钮的值，则不应选择`:checked`值。

```
$(":radio").each(function(){

}) 
```

[http://jsfiddle.net/KRMjX/](http://jsfiddle.net/KRMjX/)

如果您想对选定的输入执行一些操作，您可以使用`change`事件处理程序：

```
$("input:checked").change(function(){
    var value = $(this).attr("value");
    var array = value.split('|')
    var firstValue = array[0];
    var secondValue = array[1];
    total += parseFloat(firstValue);
}) 
```

如果您只想检查前 2 个输入的值，请尝试以下操作：

```
$(":radio").each(function(i, v){
    if (i < 2) {
    var value = $(this).attr("value");
    var array = value.split('|')
    var val = array[0];
    var secondValue = array[1];
    total = parseFloat(val);
    }
}) 
```

[http://jsfiddle.net/KRMjX/1/](http://jsfiddle.net/KRMjX/1/)

# android - 如何在非活动类或任何静态方法中调用 startManagingCursor 从 sqlite（在 android 中）检索数据？

> ID：10571560
> 
> 赞同：0
> 
> 时间：2012-05-13T12:03:46.823
> 
> 标签：android, sqlite, cursor, static-methods

```
DBHelper db =new DBHelper(context);
Cursor result = db.weeklyMedicinesTaken();  
//WeeklyMedicinesTaken is a function in DBHelper class which returns cursor containing an integer value.
startManagingCursor(result);        //this function is a resistance in what i want to do.
      while(result.moveToNext())
     {
        int count=result.getInt(0); 
     }
 result.close(); 
```

实际上我有简单的类（非活动类），我想在其中从 sqlite 检索数据并对数据进行一些处理和评估。但问题是上面的代码在活动中工作正常，但在任何非活动类中都不起作用或在活动的任何静态函数中，以便我可以从任何类调用该函数。

请问有什么建议吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:15:16.183

使用`getActivity().startManagingCursor(c)`上下文的实例或将其传递给要调用的类`startManagingCursor()`

假设您的课程是这样的：

```
Person{
Context mContext;
String name, surname;

Person (Context context){
mContext = context;
} 
```

在创建您的 Person 对象时，您应该像这样传递上下文：

在您`onCreate()`或活动中的其他地方：

```
Person p = new Person(getActivity()); 
```

但是，在活动之外管理光标并不是一个好习惯。您可以查看[本教程](http://developer.android.com/resources/tutorials/notepad/index.html)以了解简单的模式。

# visual-studio-2010 - 获取 Visual Studio 2010 扩展中的项目/引用列表

> ID：10571561
> 
> 赞同：6
> 
> 时间：2012-05-13T12:03:52.810
> 
> 标签：visual-studio-2010, visual-studio-extensions

我正在创建一个 Visual Studio 2010 扩展包 ( `Microsoft.VisualStudio.Shell.Package`)，它需要分析所有项目和这些项目的引用。我会假设这是通过服务完成的（例如`Package.GetService(typeof(IMenuCommandService))`）。我需要的是包含获取项目列表和这些项目参考的功能的界面。此外，任何关于在哪里可以找到包含 Visual Studio 中可用界面的参考的建议都将不胜感激。

请注意，我见过很多人尝试使用宏中的 DTE 做类似的事情。这不是我想要做的。我正在尝试从 Visual Studio 扩展中做同样的事情。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T17:59:01.347

因此，即使您将其作为扩展的一部分，您仍然需要使用 DTE API 来获取所需的所有信息。它可能看起来倒退，但这就是它的工作原理。您应该通过`(EnvDTE.DTE)Package.GetService(typeof(SDTE))`. 拥有[EnvDTE.Project](http://msdn.microsoft.com/en-us/library/envdte.project.aspx%28v=vs.100%29)后，访问它的 Object 成员并将其转换为[VSLangProj.VSProject](http://msdn.microsoft.com/en-us/library/vslangproj.vsproject%28v=vs.100%29)（如果它是 C# 或 VB 项目）。这有您需要的参考信息。

# ruby - 将文件路径转换为 URI

> ID：10571562
> 
> 赞同：6
> 
> 时间：2012-05-13T12:04:09.703
> 
> 标签：ruby

我有一个代表文件路径的字符串，例如“/home/user/dir1/dir2/dir3/name.ext”。现在我想将其转换为合法的 URI（以“file://”等开头的字符串）。

我如何在 Ruby 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T12:09:15.900

```
require 'uri'

uri = URI.join('file:///', '/home/user/dir1/dir2/dir3/name.ext')
 => #<URI::Generic:0x0000000263fcc0 URL:file:/home/user/dir1/dir2/dir3/name.ext>

uri.scheme
 => "file"
uri.path
 => "/home/user/dir1/dir2/dir3/name.ext"
uri.to_s
 => "file:/home/user/dir1/dir2/dir3/name.ext" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-29T12:09:46.220

由于 Ruby 2.6.3 使用可以使用[URI::File](https://ruby-doc.org/stdlib-2.6.1/libdoc/uri/rdoc/URI/File.html)

```
path = '/somewhere/on/your/drive'
URI::File.build([nil, path]) 
```

# c# - 自定义聊天框控件 - 如何使其可滚动以及更多

> ID：10571571
> 
> 赞同：0
> 
> 时间：2012-05-13T12:06:01.783
> 
> 标签：c#, winforms, custom-controls

我正在制作一个简单的聊天框控件。它只是一个学习的爱好项目。我想像下面这样进行自己的控制：

![在此处输入图像描述](../Images/75305e4597f935fed3962dc53bec00be.png)

`control`我已经学会了如何在继承自OnPaint的自定义控件表面上绘制图形和文本。但问题是我希望这个控件在屏幕截图中有元素，最重要的是能够无限滚动。尝试谷歌搜索，但没有找到任何答案。

也因为它是画的，我可能无法区分不同的用户，或者对话气泡，因为它们对控件都是一样的。

但是有没有办法知道用户`clicking`在某个气泡上，或者某个用户上？另一个问题是如何制作`scrollable`？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:17:09.533

如果您想让它可滚动，您应该尝试将每个评论设为单独的面板并将该面板添加到您的控件中。然后将控件的 autosize 属性设置为 true（您需要将控件设为面板，继承控件没有 autosize 属性）。

对于单击气泡，我再次建议将每个气泡设置为自定义控件，然后将其添加到面板（主面板内的面板），然后只需使用 MouseEnter 事件。

# asp.net - 如何将 ASP.NET 项目放入 IIS

> ID：10571572
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:06:39.763
> 
> 标签：asp.net, sql, sql-server-2008

我开发了一个 asp.net 项目。它正在 Visual Studio 2010 的临时服务器中连接 Visual Studio 2010，但是当我将它放到 iis 时它没有连接。请问这个问题怎么解决？我的 web.config 就是这样；

```
<?xml version="1.0"?>
<!--
For more information on how to configure your ASP.NET application, please visit
http://go.microsoft.com/fwlink/?LinkId=169433
-->
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Design, Version=4.0.0.0,      Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies></compilation>
</system.web>

<connectionStrings>
 <add name="ConnectionString"
 connectionString="Server=SRV-WORKFLOW; Database=PTC;User ID =   MIKES\EMREAL;Password=EMAL5616.;Trusted_Connection=True;"
  providerName="System.Data.SqlClient"  />

 <add name ="PTCconnection"
  connectionString="Server=SRV-PLM; Database=wcadmin;User ID = MIKES\EMREAL;Password=EMAL5616.;Trusted_Connection=True;"
   providerName="System.Data.SqlClient"   />

 </connectionStrings>

</configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:38:07.083

您正在使用`Trusted_Connection=True`这意味着它尝试使用运行应用程序的用户的凭据连接到您的数据库。对于 IIS，它通常是 AppPool 用户。允许此用户访问数据库、更改应用程序池用户或使用 SQL Server 身份验证。

您可以在此处获得连接字符串的概述：[http ://connectionstrings.com/](http://connectionstrings.com/)

# java - 暂停和恢复方法

> ID：10571573
> 
> 赞同：3
> 
> 时间：2012-05-13T12:06:49.267
> 
> 标签：java, multithreading

我在暂停和恢复方法时遇到了一些麻烦。（在 Eclipse 中使用 Java）。

基本上我正在编写一个有点像编译器的程序。我给它一个字符串，它解释这个字符串，将它转换成一个包含 n 个命令、条件和诸如循环之类的东西（取决于强）并执行这些命令。像这样：

```
(while 
  (energy-at-least 1000)
  (seq
    (move) 
    (turn clockwise)
  )
) 
```

目前我有一个在第 N 个命令处停止的方法，但我不确定在此之后如何继续，因为重用此方法并告诉它在第 N+1 个命令处开始它会忘记程序处于循环中（s ）。

抱歉解释不佳，但基本上我需要能够在第 N 个命令处停止此方法并让它从它所遵循的过程中恢复。Java 有这些方法（resume() 和 stop() ），但我见过它们已被弃用。有人有好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:23:59.270

一个简单的方法是使用 wait() 和 notify() 方法。当然，这将取决于您将运行多少并行线程，因为 notify() 方法无法保证您实际上将唤醒哪个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:33:54.477

据我了解，您的说法是，您需要对线程中的循环进行更细粒度的控制，然后提供“通知”、“恢复”等方法。你可以这样做：

线程的类可能如下所示：

```
public WhateverLoop implements Runnable {
    private volatile boolean run = true;

    public void run() {
        while(run) {
            doWhatever();
        }        
    }

    public setRun(boolean run) {
        this.run = run;
    }
} 
```

“易失性”部分非常重要。它使其他线程能够影响“运行”变量（基本上它可以防止线程将其复制到自己的内存中）。否则从其他线程到变量的更改将在线程中不可见。

控制类可以这样做：

```
WhateverLoop whateverLoop = new WhateverLoop();
Thread WhateverLoopThread = new Thread(whateverLoop);
whateverLoopThread.start();
// Do stuff which consumes time.
...
// Stop the loop
whateverLoop.setRun(false); 
```

在这个例子中，我使用了一个布尔值，但显然你可以让它变得像你想要的那样复杂（或不复杂）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:49:59.853

做到这一点的一种方法是以这样一种方式表示执行状态，即需要恢复的子集可以存储在可从“上下文”对象访问的堆对象中。

要暂停执行，您可以让解释器记录上下文对象中的所有相关状态，并将其返回。要恢复，您调用解释器并传入先前使用的上下文。

如果您的解释器对程序树进行递归遍历以执行它，这将不起作用......

* * *

另一种方法是通过让解释器执行对 CLI 的回调来实现“暂停”（或者在程序暂停时处理内容的任何东西）。CLI 通过从回调方法返回来“恢复”执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T09:32:40.240

你有没有考虑过控制它`BlockingQueue`？

以 N 条指令队列启动它以执行它。它将从队列中拉出每条指令并进行处理。一旦到达第 N 条指令，它将停止/阻塞。要从停止的地方重新开始，将更多指令推入队列。

# java - maven-assembly-plugin - 如何启用按模块处理项目模块输出目录的基础

> ID：10571575
> 
> 赞同：2
> 
> 时间：2012-05-13T12:07:01.213
> 
> 标签：java, maven, maven-assembly-plugin

我正在尝试遵循本指南：[http](http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html) ://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html ，以便创建具有以下要求的项目结构（在所有建筑和包装之后）：

```
Parent
      `child1
      |      `target/child1-1.0.jar
      `child2
      |      `target/child2-1.0.jar
      `child3
      |      `target/child3-1.0.jar
      `distribution
      |            `target/distribution-1.0-bin/child1/child1-1.0.jar
      |            `target/distribution-1.0-bin/child2/child2-1.0.jar
      |            `target/distribution-1.0-bin/child3/child3-1.0.jar
      `src
          `assemble/bin.xml 
```

问题是：包装阶段之后；组装插件将所有`target/distribution-1.0-bin/childN/`目录展平为单个`distribution`目录；这使它看起来像这样：

```
 distribution
                   `target/distribution-1.0-bin/distribution/child1-1.0.jar
                   `target/distribution-1.0-bin/distribution/child2-1.0.jar
                   `target/distribution-1.0-bin/distribution/child3-1.0.jar 
```

我如何防止这种扁平化？

我正在使用以下 shellscript 创建项目：

```
#!/bin/sh

# creating project root
mvn archetype:generate -D archetypeGroupId=org.codehaus.mojo.archetypes -D archetypeArtifactId=pom-root -D groupId=org.test -D artifactId=parent -D version=1.0 -D package=org.test -D interactiveMode=false
cd parent/

# creating child modules
for i in 1 2 3; do mvn archetype:generate -D archetypeGroupId=org.apache.maven.archetypes -D archetypeArtifactId=maven-archetype-quickstart -D groupId=org.test -D artifactId=child${i} -D version=1.0 -D package=org.test -D interactiveMode=false; done

# creating distribution module
mvn archetype:generate -D archetypeGroupId=org.codehaus.mojo.archetypes -D archetypeArtifactId=pom-root -D groupId=org.test -D artifactId=distribution -D version=1.0 -D package=org.test -D interactiveMode=false

# making dir for assemblies
mkdir src/assemble/ -p 
```

; 我的 Parent/src/assemble/bin.xml 与[上面提到的 url](http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html)（程序集描述符部分）以及 Parent/pom.xml（POM 部分，片段 #1）和我的 Parent/distribution/完全没有变化。来自 POM 部分的 pom.xml 令牌，片段 #2 仅更改在和`<plugins>`之间添加缺少的标签。`<build>``<plugin>`

**编辑1**

好的，因为我两次被问及实际的 poms，所以在这里它们从[url](http://maven.apache.org/plugins/maven-assembly-plugin/examples/multimodule/module-binary-inclusion-simple.html)和 maven quicktype 原型移动到这个页面：

**`Parent/pom.xml`**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.test</groupId>
  <artifactId>parent</artifactId>
  <version>1.0</version>

  <packaging>pom</packaging>

  <name>Parent</name>

  <modules>
    <module>child1</module>
    <module>child2</module>
    <module>child3</module>
    <module>distribution</module>
  </modules>

  <build>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.3</version>
          <configuration>
            <descriptors>
              <descriptor>src/assemble/bin.xml</descriptor>
            </descriptors>
          </configuration>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project> 
```

**`Parnet/child1/pom.xml`**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>parent</artifactId>
    <groupId>org.test</groupId>
    <version>1.0</version>
  </parent>
  <groupId>org.test</groupId>
  <artifactId>child1</artifactId>
  <version>1.0</version>
  <name>child1</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project> 
```

**`Parent/distribution/pom.xml`**

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.test</groupId>
    <artifactId>parent</artifactId>
    <version>1.0</version>
  </parent>

  <artifactId>distribution</artifactId>

  <packaging>pom</packaging>

  <name>Distribution</name>

  <!-- NOTE: These dependency declarations are only required to sort this project to the 
       end of the line in the multimodule build. 

       Since we only include the child1 module in our assembly, we only need to ensure this
       distribution project builds AFTER that one...
  -->
  <dependencies>
    <dependency>
      <groupId>org.test</groupId>
      <artifactId>child1</artifactId>
      <version>1.0</version>
    </dependency>
  </dependencies>

  <build>
<plugins> <!-- exception -->
    <plugin>
      <artifactId>maven-assembly-plugin</artifactId>
      <executions>
        <execution>
          <id>distro-assembly</id>
          <phase>package</phase>
          <goals>
            <goal>single</goal>
          </goals>
          <configuration>
            <descriptors>
              <descriptor>src/assemble/bin.xml</descriptor>
            </descriptors>
          </configuration>
        </execution>
      </executions>
    </plugin>
</plugins> <!-- exception -->
  </build>
</project> 
```

**编辑2**

以及描述符文件：

**`Parent/src/assemble/bin.xml`**

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  <id>bin</id>
  <formats>
    <format>dir</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <moduleSets>
    <moduleSet>

      <!-- Enable access to all projects in the current multimodule build! -->
      <useAllReactorProjects>true</useAllReactorProjects>

      <!-- Now, select which projects to include in this module-set. -->
      <includes>
        <include>org.test:child1</include>
      </includes>
      <binaries>
        <outputDirectory>modules/${artifactId}</outputDirectory>
        <unpack>false</unpack>
      </binaries>
    </moduleSet>
  </moduleSets>
</assembly> 
```

# php - SQL 不喜欢小数

> ID：10571582
> 
> 赞同：0
> 
> 时间：2012-05-13T12:08:36.143
> 
> 标签：php, mysql

我正在尝试将新记录插入到表“订单​​”中。这是代码：

```
$orderDB = mysql_query("INSERT INTO order (itemsID, deliveryDestinationID, total, shipped) VALUES ($itemID, $delivery, $totalprice, 'N')") or die(mysql_error()); 
```

变量是 $itemID，它是一个 5 位数字，$delivery 也是一个 5 位数字，$totalprice 是交易成本（例如 137.97）和“N”，它用于我表中的已发货字段。

我认为问题来自 $totalprice，但是当我在此行之前回显所有变量时，它们似乎是正确的。以下是 $totalprice 为 170 时的回声和错误示例：

00036 00022 N 170 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“订单（itemsID，deliveryDestinationID，total, shipping）VALUES (00036, 00022, 170') 附近使用正确的语法

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:14:27.487

`ORDER`是保留关键字。如果将其用作表名，请使用反引号对其进行转义：

```
"INSERT INTO `order` (itemsID ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:14:39.090

`ORDER`是[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。要将其用作表名或列名，您必须将其括在反引号中。

```
$orderDB = mysql_query("INSERT INTO `order` (itemsID, deliveryDestinationID, total, shipped) VALUES ($itemID, $delivery, $totalprice, 'N')") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T12:14:46.353

`order`是 MySQL 中的保留字。考虑更改表名或将其包含在反引号中（例如：``order``）

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T12:11:10.610

`order`是[保留关键字](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。这是您查询中的错误来源。正如其他人建议的那样，将其括在反引号中以使查询起作用。

# php - php在带有预览的图像上渲染文本

> ID：10571583
> 
> 赞同：0
> 
> 时间：2012-05-13T12:08:55.703
> 
> 标签：php, image, text, render, preview

任何人都可以推荐一个教程或库来解决将
文本渲染到带有预览选项的图像的问题吗？这个想法是向用户展示一张图片，他们可以在上面添加他们选择的文本。查看预览后，他们可以提交。
知道 php 的 imagettftext 可以处理这个并且有一些 ajax 经验。我希望
已经存在完整或接近完整的解决方案。
[这里有一个类似的应用程序](http://builder.cheezburger.com/builder/#step2_6202782976,http://i.chzbgr.com/imagestore/2012/5/7/4b62c954-d747-40ed-a9a3-816f71cd205a.jpg)
提前感谢任何尝试帮助并度过美好的一天:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:20:44.767

您可能想看看[实时向图像添加文本](http://blog.doh.ms/2008/02/12/adding-text-to-images-in-real-time-with-php/)

# objective-c - 在 Objective-C 中，如果一个方法不是 alloc、new 或 copy，那么你不做释放，它应该在自动释放池中，这是真的吗？

> ID：10571584
> 
> 赞同：0
> 
> 时间：2012-05-13T12:08:56.227
> 
> 标签：objective-c, nsautoreleasepool

似乎在 Objective-C 中有一个标准约定，如果方法是`alloc`、`new`或`copy`，则：您现在拥有新对象的所有权，因此您应该使用它来释放它`[obj release]`（假设这不是 ARC） .

但是，如果获取新实例的方法是通过那些“方便的方法”，例如 in `[NSMutableArray arrayWithCapacity:100]`，因为它不是`alloc`,`new`或`copy`，所以按照惯例，新对象在自动释放池中，您不必担心释放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:10:59.683

是的，如果你没有分配对象，你就不需要释放它。（当然在你的假设下）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T12:12:43.693

是的，这是真的。这是[定义规则的 Objective-C 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)（这更像是一种约定，但是如果您不遵守约定，clang 静态分析器将反对）。

# php - 有没有办法让 HTML 页面“记住”在前一页上按下了哪个按钮？

> ID：10571585
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:08:56.523
> 
> 标签：php, javascript, html

我有一个包含三个按钮的页面，我希望能够“记住”在稍后的页面上按下了哪个按钮。事件的顺序是这样的：

1.  page1.html: "请点击一个按钮。" 按钮 1、按钮 2、按钮 3

2.  page2.html: "感谢您点击按钮。点击下一页。"

3.  page3.html：“您从第 1 页选择了 BUTTON (x)。”

我不知道该怎么做。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:11:35.743

使用 cookie。

PHP：

```
setcookie(name,value,expiration); 
```

我认为您正在寻找有关如何执行此操作的教程，一个很棒的入门网站是 [w3schools](http://www.w3schools.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:42:31.700

您还可以在每个页面上使用一个表单，并使用隐藏的输入来记住前一页中您想要的任何内容，只需使用一点 javascript。这是原理（未经测试），根据您自己的情况进行修改：

```
<form name='session_form' action='' method='POST'>
    <input type='hidden' name='button_name' value=''>
</form>

<input type='button' name='button1' value='BUTTON 1' onClick='go(this);'>
<input type='button' name='button2' value='BUTTON 2' onClick='go(this);'>
<input type='button' name='button3' value='BUTTON 3' onClick='go(this);'>

<script type='text/javascript'>
    function go(button) {
        var f = document.forms.form_session;
        var bname = button.name;
        f.button_name.value = bname;
        f.action = 'page' + bname[-1] + '.php';
        f.submit();
    }

// or if you have loaded jQuery, drop the `onClick` attribute and use something like this:
    $('input[type=button]').click(function(e) {
       var bname = $(this).attr('name');
       $('input[name=button_name]').val(bname);
       var action = 'page' + bname[-1] + '.php';
       $('form[name=session_form]').attr('action', action).submit();
    });
</script> 
```

在 PHP（服务器端）中，您可以使用`$_POST["button_name"]`.

# php - 如果用户已登录，则添加 javascript 文件

> ID：10571587
> 
> 赞同：1
> 
> 时间：2012-05-13T12:09:28.973
> 
> 标签：php, drupal, drupal-7

如果用户登录到网站，如何添加 javascript 文件或 javascript 代码？

该网站是用drupal 7构建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:44:16.323

试试下面的代码：

```
global $user;
if($user->uid != 0)
{
    drupal_add_js("PATH_TO_JS_FILE");
} 
```

希望这会有所帮助……穆罕默德。

# r - R - 带有聚合点的逻辑曲线图

> ID：10571591
> 
> 赞同：1
> 
> 时间：2012-05-13T12:09:40.550
> 
> 标签：r

假设我有以下数据集

```
bodysize=rnorm(20,30,2) 
bodysize=sort(bodysize) 
survive=c(0,0,0,0,0,1,0,1,0,0,1,1,0,1,1,1,0,1,1,1) 
dat=as.data.frame(cbind(bodysize,survive)) 
```

我知道 glm plot 函数有几个不错的图可以向您展示适合性，但我仍然想创建一个初始图：

1) 原始数据点 2) 逻辑曲线和两者 3) 预测点 4) 和多个预测变量级别的聚合点

```
library(Hmisc)   
plot(bodysize,survive,xlab="Body size",ylab="Probability of survival") 
g=glm(survive~bodysize,family=binomial,dat)
curve(predict(g,data.frame(bodysize=x),type="resp"),add=TRUE)
points(bodysize,fitted(g),pch=20) 
```

到这里一切都好。

现在我想绘制给定 x1 水平的真实数据存活率

```
dat$bd<-cut2(dat$bodysize,g=5,levels.mean=T)
AggBd<-aggregate(dat$survive,by=list(dat$bd),data=dat,FUN=mean)
plot(AggBd,add=TRUE)
#Doesn't work 
```

我试图将 AggBd 与用于模型的数据集和所有其他东西相匹配，但我根本无法将两者绘制在一起。有没有解决的办法？我基本上想在同一轴上过度绘制最后一个图。

除了这个特定的任务，我经常想知道如何在二维图上过度使用不同的图来绘制不同的变量但具有相似的比例/范围。我将衷心感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:30:28.637

的第一列`AggBd`是一个因子，您需要先将级别转换为数字，然后才能将点添加到绘图中。

```
AggBd$size <- as.numeric (levels (AggBd$Group.1))[AggBd$Group.1] 
```

要将点添加到现有绘图中，请使用`points`

```
points (AggBd$size, AggBd$x, pch = 3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:31:12.233

您最好指定您的 y 轴。也可能使用`par(new=TRUE)`

```
plot(bodysize,survive,xlab="Body size",ylab="Probability of survival") 
g=glm(survive~bodysize,family=binomial,dat)
curve(predict(g,data.frame(bodysize=x),type="resp"),add=TRUE)
points(bodysize,fitted(g),pch=20)
#then
par(new=TRUE)
#
plot(AggBd$Group.1,AggBd$x,pch=30) 
```

显然删除或更改轴刻度以防止重叠，例如

```
plot(AggBd$Group.1,AggBd$x,pch=30,xaxt="n",yaxt="n",xlab="",ylab="") 
```

给予：

![在此处输入图像描述](../Images/56884c74bfa59f23ba597eb2257c894d.png)

# java - 谁能给我一个无效 XML 字符的列表

> ID：10571594
> 
> 赞同：3
> 
> 时间：2012-05-13T12:10:28.497
> 
> 标签：java, xml, jaxb, xml-serialization, xml-parsing

以下是错误：http: [//java.net/jira/browse/JAXB-614](http://java.net/jira/browse/JAXB-614)

以上所说的bug，建议我们使用以下链接中提到的解决方案：http: [//blog.lesc.se/2009/03/escape-illegal-characters-with-jaxb-xml.html](http://blog.lesc.se/2009/03/escape-illegal-characters-with-jaxb-xml.html)

解析列表31个代码：

```
final String escapeString = "\u0000\u0001\u0002\u0003\u0004\u0005" +                
    "\u0006\u0007\u0008\u000B\u000C\u000E\u000F\u0010\u0011\u0012" +            
    "\u0013\u0014\u0015\u0016\u0017\u0018\u0019\u001A\u001B\u001C" +               
    "\u001D\u001E\u001F\uFFFE\uFFFF"; 
```

现在，我的问题是，我可以得到上述代码的 ASCII 中的实际字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:14:00.787

这些字符都不可打印。

将该字符串粘贴到 Javascript 控制台中会给出`"�"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:16:31.907

如果您想在 XML 中存储二进制数据，使用例如 Base64 编码是有意义的。我不认为用相同的“无效”字符替换它们是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-04T04:56:40.673

我编写了一个返回`List<Character>`包含所有无效 XML 字符的方法。这有助于我对去除这些字符的正则表达式进行单元测试。[你可以在这里](https://gist.github.com/mriccid/bec0544de7d7b5b4b6009049d3abd27d)查看要点

如果上面的链接停止工作，这里是代码：

```
return IntStream.rangeClosed(0, 65536).filter(XMLChar::isInvalid).mapToObj(c -> new Character((char) c))
            .collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:15:57.973

ASCII？不，ASCII 最高可达 255。0x1F 及以下的实体都是控制字符。

*   [http://en.wikipedia.org/wiki/ASCII](http://en.wikipedia.org/wiki/ASCII)
*   [http://www.ascii-code.com/](http://www.ascii-code.com/)

*   如果您想了解它们所代表的 Unicode/UTF-8 字符的详细信息，请参阅任何 Unicode 图表，例如：

[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T12:21:02.260

在谷歌搜索“java unicode”。示例结果如下：

[http://www.ssec.wisc.edu/~tomw/java/unicode.html](http://www.ssec.wisc.edu/~tomw/java/unicode.html)

Unicode 旨在涵盖所有字符集。最初的“ASCII”只适用于北美。Java 本身已构建了 unicode 支持，但仍有许多字符编码“陷阱”有待发现 :-)

# jquery - 显示/隐藏 jquery mouseout 子项

> ID：10571597
> 
> 赞同：0
> 
> 时间：2012-05-13T12:10:45.923
> 
> 标签：jquery, mouseout

我尝试制作一个菜单，显示鼠标何时位于 div 上，并在鼠标位于该 div 之外时隐藏。

问题是当我将鼠标放在主 div 的子 div 上，或放在链接或其他东西上时，div 会隐藏。当我把鼠标放在他们身上时，我怎么能忽略所有的孩子。

我部分解决了这个问题，但是使用该解决方案，当我单击子 div 和离开主 div 后，我的菜单会出现隐藏问题。

我的代码是：

```
$("div.fixed-leftside").mouseover(function(){
    $("div.fixed-leftside").hide("fast");
    $("div.fixed-leftside-hovered").show("fast");

});

$("div.fixed-leftside-hovered").mouseout(function(e){
    if (! $(e.target).is('div.fixed-leftside-hovered')) return; // Ignore the children
    $("div.fixed-leftside").show("fast");
    $("div.fixed-leftside-hovered").hide("fast");

}); 
```

# java - 提交form2而不在具有2个表单的jsp中提交form1

> ID：10571598
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:10:47.397
> 
> 标签：java, jsp, struts

我在一个jsp页面中使用了两个表单。我想提交form2，但它需要提交第一个form1，然后提交第二个表单。请帮助我如何只提交form2而不提交form1 ..thankyou :)

```
 <html:form action="action1">
<html:submit property=method><bean:message key="userform.login"/></html:submit>
        </html:form>

        <html:form action="action2">
<html:submit property=method><bean:message key="userform.contactus"/></html:submit></html:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:19:29.520

您需要通过 Ajax 提交一个表单，并在回调中，对提交第一个表单的结果执行任何您需要的操作。那么第二个表单就可以正常提交了。

IMO 您的用例似乎有点扭曲：您首先不需要登录“联系我们”。如果目标是在“联系我们”表单中包含用户信息，那么 (a) 为什么在您使用它之前显示“联系我们”链接，和/或 (b) 只是做正常的“您必须登录”处理，不要担心做你正在做的事情的卷积。

或者，在“联系我们”页面上有一个额外的登录表单，并将其作为表单验证的一部分，并跳过所有这些问题，创造更流畅的用户体验，并使您的开发更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T22:25:49.537

您将无法在不离开页面的情况下提交表单，除非您使用：

Ajax（如建议） - 以及“成功”返回表格 2

或 iframe

iframe - 发布到页面上的 iframe，iframe 页面可以通过使用 javascript 'parent.form2.submit()' 触发 form2 的发布（如果 form1 发布成功）

# visual-studio - qmake 能否支持 Visual Studio 解决方案的文件夹层次结构？

> ID：10571607
> 
> 赞同：2
> 
> 时间：2012-05-13T12:12:24.760
> 
> 标签：visual-studio, qmake

我正在 Visual Studio 中开发我的项目，并且正在使用 qmake 创建解决方案文件。我试图通过引入包含类似项目的子文件夹来组织解决方案。但是，qmake 生成的解决方案文件的文件夹层次结构只有一层。

有没有办法配置qmake为Visual Studio生成文件夹层次结构，类似于解决方案资源管理器中“添加→新建解决方案文件夹”的效果？

**编辑**：澄清一下，假设我有这个目录结构：

```
MainDir
   +--- GroupDir1
   |       +--- ProjectDir1
   |       +--- ProjectDir2
   +--- GroupDir2
           +--- ProjectDir3 
```

我希望*在 Visual Studio 中看到*的解决方案中的文件夹层次结构能够反映这一点，但这是我设法使用 qmake 生成的解决方案：

```
Solution
   +--- ProjectDir1
   +--- ProjectDir2
   +--- ProjectDir3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T12:48:53.837

您可能正在寻找的是在您的专业文件中添加以下内容

```
CONFIG -= flat 
```

查看[有关此选项的 Qt 文档](http://doc-snapshot.qt-project.org/4.8/qmake-variable-reference.html#config)

例如，您还[可以查看](http://code.google.com/p/ballelevgenerator/source/browse/trunk/NEW/NEW.pro)使用此选项的这个 pro 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T11:23:33.727

尝试

```
TEMPLATE = subdirs
CONFIG  += ordered

SUBDIRS +=  project1\
        project2\
            ...
        projectn 
```

[subdirs](http://doc.qt.nokia.com/4.7-snapshot/qmake-variable-reference.html#template)模板用于在子目录中构建目标。您可以使用变量[SUBDIRS](http://doc.qt.nokia.com/4.7-snapshot/qmake-variable-reference.html#subdirs)添加子目录。

一般来说，添加 是一个好主意`CONFIG += ordered`，以防项目之间存在依赖关系（如库）。

您还可以使用`.pri`文件（相当于项目文件的标题）在子项目之间共享变量。

***编辑：试试这个***

创建`maindir.pro`与

```
TEMPLATE = subdirs
CONFIG  += ordered

SUBDIRS +=  GroupDir1\
        GroupDir2\ 
```

然后`groupdir1.pro`与

```
TEMPLATE = subdirs
CONFIG  += ordered

SUBDIRS +=  ProjectDir1\
        ProjectDir2\ 
```

然后`groupdir2.pro`用

```
TEMPLATE = subdirs
CONFIG  += ordered

SUBDIRS +=  ProjectDir3 
```

这保证可以与 Qt Creator 一起使用，不能用视觉工作室测试它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T19:22:19.167

是的，您可以在 .pro/pri 中有一个层次结构，但它会在 Visual Studio 中“转换”为单级结构。但是由于 pro/pri 是 qmake 实际使用的，它并不是真正的单级/平面（您的源文件不会被移动）。

希望这是有道理的！

# javascript - 无法使用 JSONP 访问 json 页面

> ID：10571608
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:12:27.427
> 
> 标签：javascript, jquery, json, jsonp

我使用 JSONP 访问 json 页面（通过 jQuery）。我有一个 html 按钮

`<input type="button" value="Récupérer les données" onclick="getInfo();" />`

我的代码

```
function getInfo() {
                $.ajax({
                    dataType:'jsonp',
                    url: 'http://89.92.40.250:8010/dreamteam/interface/get_event_detail.php?id=106',
                    data: { param:'event' },
                    success:function(response) {
                    alert("Réponse : "+ response.data);
                    }
                });
            }; 
```

警报不起作用...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:16:18.990

该服务器不支持 JSONP，至少不支持标准`callback`参数构造。

考虑使用服务器端解决方案来解决此问题。

**顺便提一句**

原始问题：[无法使用 javascript 访问 json 文件](https://stackoverflow.com/questions/10571478/cannot-acces-json-file-with-javascript)

再次您好，在 SO，您可以编辑现有问题或与回答者互动；您不必再问一个基本相同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:21:23.603

作为安全预防措施，您不能进行跨源请求，请将[**CORS**](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)视为替代方案，您可以创建服务器端代理，让该代理调用您打算调用的 Web 服务并以您喜欢的任何格式返回响应，无论是它`xml`还是`json`. `jsonp`正如@SLaks 在评论中提到的，除非远程服务器批准，否则您不能消费。

# java - 如何使用 Guice 设置同一个对象图的多个配置？

> ID：10571609
> 
> 赞同：3
> 
> 时间：2012-05-13T12:12:27.500
> 
> 标签：java, guice

您将如何构建下图中显示的对象图？

用户对象必须结合来自两个数据库后端的信息。

![同一个对象图的多个配置](../Images/84fd59f0ba702b494e53587d65bf9b6b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T09:02:45.673

我找到了使用私有模块的解决方案。

```
static class Service {
    @Inject Dao daoA;

    public void doSomething() {
        daoA.doA();
    }
}

static class Dao {
    @Inject DataSource dataSource;

    public void doA() {
        dataSource.execute();
    }
}

@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.FIELD, ElementType.PARAMETER})
@BindingAnnotation
public @interface Connection {}

@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.FIELD, ElementType.PARAMETER})
@BindingAnnotation
public @interface X {}

@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.FIELD, ElementType.PARAMETER})
@BindingAnnotation
public @interface Y {}

static class DataSource {
    @Connection @Inject String connection;

    public void execute() {
        System.out.println("execute on: " + connection);
    }
}

static class XServiceModule extends PrivateModule {
    @Override
    protected void configure() {
        bind(Service.class).annotatedWith(X.class).to(Service.class);
        expose(Service.class).annotatedWith(X.class);

        bindConstant().annotatedWith(Connection.class).to("http://server1");
    }
}

static class YServiceModule extends PrivateModule {
    @Override
    protected void configure() {
        bind(Service.class).annotatedWith(Y.class).to(Service.class);
        expose(Service.class).annotatedWith(Y.class);

        bindConstant().annotatedWith(Connection.class).to("http://server2");
    }
}

public static void main(String[] args) {
    Injector injector = Guice.createInjector(new XServiceModule(), new YServiceModule()); 

    Service serviceX = injector.getInstance(Key.get(Service.class, X.class));  
    serviceX.doSomething(); 

    Service serviceY = injector.getInstance(Key.get(Service.class, Y.class));
    serviceY.doSomething(); 
} 
```

*   Service 类的不同实例可以通过 X 和 Y 注释来标识。
*   通过隐藏私有模块中的所有其他依赖项，Dao 和 DataSource 之间没有冲突
*   在两个私有模块中，可以通过两种不同的方式绑定常量
*   服务通过暴露暴露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T17:42:07.680

我会说您应该使用 Guice 的[辅助注入](http://code.google.com/p/google-guice/wiki/AssistedInject)扩展来生成一个工厂，该工厂将 a`Service`应用于 a `DataSource`，然后将该工厂应用于两个不同`Service`的 s。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T06:09:09.923

您可以为此使用 BindingAnnotation 或简单的通用 @Named Annotation。我发现它们与@Provides-Methods 一起使用最简单：

```
@Provides
@Named("User1")
public SomeUser getUser(Service1 service) {
   return service.getUser();
}
@Provides
@Named("User2")
public SomeUser getUser(Service2 service) {
   return service.getUser();
} 
```

进而：

```
@Inject
@Named("User1")
private SomeUser someuser;
... 
```

# forms - 使用标签在表单中编辑 Symfony2 大实体

> ID：10571612
> 
> 赞同：5
> 
> 时间：2012-05-13T12:12:44.093
> 
> 标签：forms, symfony, tabs, symfony-forms

我正在使用 Sf2 的表单生成器构建表单。

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('firstName')
            ->add('lastName')... 
```

实体有很多字段，我想将它们放在 jQuery UI 选项卡中。但是在树枝模板中我想使用单个命令

```
<form action="#" method="post" {{ form_enctype(form) }}>
    {{ form_widget(form) }}
    <input type="submit" value="Save"/>
</form> 
```

什么是最好的解决方案？

****编辑 ******

 **更具体一点：我有 4 个字段：名字、姓氏、出生日期、死亡日期。我希望前 2 个字段位于第一个选项卡上，后 2 个字段位于第二个选项卡上。我想保持前面提到的呈现表单的方式。

我想到了一个解决方案来创建我自己的字段，这些字段与底层对象无关，它将呈现所需的 html 标签（h3、div 等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T21:28:49.410

我定义了自己的名为“Tab”的字段，并在出现新选项卡时添加它。

```
<?php
//\src\Alden\xyzBundle\Form\Type\TabsType.php

namespace Alden\BonBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Form\FormView;
use Symfony\Component\Form\FormInterface;
use Symfony\Component\Form\FormError;
use Symfony\Component\Form\CallbackValidator;
use Symfony\Component\Form\FormValidatorInterface;
use Symfony\Component\Form\Form;

class TabsType extends AbstractType {

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->setAttribute('starting', $options['starting']);
        $builder->setAttribute('ending', $options['ending']);
        $builder->setAttribute('header', $options['header']);
    }

    public function buildView(FormView $view, FormInterface $form)
    {
        $parent = $form->getParent();
        if (is_null($parent->getParent()))
        {
            $tabs = $this->findTabs($parent);
        }
        else
        {
            $tabs = array();
        }
        $view->set('starting', $form->getAttribute('starting'));
        $view->set('ending', $form->getAttribute('ending'));
        $view->set('header', $form->getAttribute('header'));
        $view->set('tabs', $tabs);
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'property_path' => false,
            'starting' => true,
            'ending' => true,
            'header' => false,
        );
    }

    public function getName()
    {
        return 'tabs';
    }

    public function getParent(array $options)
    {
        return 'field';
    }

    private function findTabs(Form $form)
    {
        $prefix = $form->getName();
        $tabs = array();
        foreach ($form->getChildren() as $child)
        {
            foreach ($child->getTypes() as $type)
            /* @var $child \Symfony\Component\Form\Form */
            {
                if (get_class($type) == __NAMESPACE__ . '\TabsType')
                {
                    if ($child->getAttribute('starting'))
                    {
                        $tabs[$prefix . '_' . $child->getName()] = $child->getAttribute('label');
                    }
                }
            }
        }
        return $tabs;
    }

}

?> 
```

和树枝

```
{# \src\Alden\xyzBundle\Resources\views\Form\fields.html.twig #}
{% block tabs_row %}
{% if header %}
<ul>
    {% for tid, t in tabs %}
        <li>
            <a href="#{{ tid }}">{{ t }}</a>
        </li>
    {% endfor %}
</ul>
{% endif %}
{% if ending %}
</div>
{% endif %}
{% if starting %}
<div id="{{ id }}">
{% endif %}
{% endblock %} 
```

和表单生成器中的用法：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
            ->add('tabs_head', new TabsType(), array(
                'ending' => false,
                'starting' => false,
                'header' => true
            ))
            ->add('tab_1', new TabsType(), array(
                'ending' => false,
                'label' => 'Podstawowe'
            ))
            ->add('firstName', null, array(
                'label' => 'Imię'
            ))
            ->add('lastName', null, array(
                'label' => 'Nazwisko'
            ))
            ->add('tab_contact', new TabsType(), array(
                'label' => 'Kontakt'
            ))
            ->add('address', new AddressType(), array(
                'label' => 'Adres zameldowania'
            ))
            ->add('tabs_end', new TabsType(), array(
                'starting' => false
            ))
    ;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:22:51.993

如果您希望表单像表单向导一样运行，您可以查看[多步骤表单包](http://knpbundles.com/craue/CraueFormFlowBundle)

挺好的，比如你可以把第一步定义为填写软件详细信息，然后在第二步填写版本详细信息。或任何你想要的。

**特征**

*   导航（下一步、返回、重新开始）
*   步骤说明
*   跳过指定步骤
*   每个步骤的不同验证组
*   动态步进导航

这[是](http://www.craue.de/sf2playground/en/CraueFormFlow/)一个现场演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:54:51.120

> 但是在树枝模板中我想使用单个命令

你的意思是渲染字段吗？

```
{{ form_rest(form) }} 
```

渲染所有未渲染的表单**

# mysql - Mysql连接查询使用三张表

> ID：10571615
> 
> 赞同：0
> 
> 时间：2012-05-13T12:13:43.483
> 
> 标签：mysql

我正在使用三个表。第一个表中记录了客户的问题。

```
 customer_id   |   question   | question_id
----------------------------------------------
       58       |   question 4 |      4
       41       |   question 5 |      5
       37       |   question 3 |      3 
```

在第二个表格中记录了与第一个表格中的问题相关的评论

```
 comment   | question_id   |  user
---------------------------------------
    comment 1 |      4        |    41  
    comment 2 |      5        |    58         
    comment 3 |      4        |    41  
    comment 4 |      5        |    58  
    comment 5 |      3        |    23 
```

在第三个表中是有关该站点用户的数据

```
 user      | status
--------------------------------
     58       |      1
     41       |      1
     37       |      0 
     23       |      0 
```

如何进行查询，结果将是按 question_id 排序的最后五个问题的列表以及与每个问题相关的评论总数。这些问题和评论只能由状态为“1”的用户在第三个表中提出。

此示例中的结果应如下所示：

```
 question   | total comments  |   user
-----------------------------------------------
 question 5  |      2          |    41
 question 4  |      2          |    58 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:20:48.360

我有理由确定这是正确的，尽管我这里没有要验证的数据。

```
SELECT questions.question, 
       count(comments.question_id) as 'total comments', 
       user.user
FROM user 
  JOIN questions on user.user = questions.customer_id
  LEFT JOIN comments on questions.question_id = comments.question_id
WHERE user.status = 1
GROUP BY comments.question_id,  questions.question, users.user
ORDER BY questions.question
LIMIT 5 
```

问题上的 LEFT JOIN 将允许表示问题，即使没有留下任何评论。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:20:44.907

快速看一下，我会这样做：

```
SELECT q.question_id, count(c.comment) from questions as q left join 
comments as c on q.question_id=c.question_id left join user as u on 
c.user=u.user where u.status=1 group by q.question_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:20:52.217

```
SELECT question, count(*) as total_comments, T1.user 
FROM T1, T2, T3
WHERE T1.customer_id = T3.user 
  AND T3.status = 1,
  AND T1.question_id = T2.question_id
GROUP BY T2.user 
ORDER BY question_id DESC
LIMIT 5 
```

T1、T2、T3 是按它们出现的顺序讨论的表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T19:01:39.567

```
SELECT      question_id as question, count(c.comment) as 'total comments', q.customer_id as user
FROM        (SELECT * 
            FROM question
            ORDER BY question_id DESC
            LIMIT 5) as q LEFT JOIN 
            comment as c using(question_id) LEFT JOIN
            user as u using(user) 
WHERE       u.status=1 
GROUP BY    q.question_id
ORDER BY    question_id DESC 
```

# c# - 在另一个模态表单之后打开一个模态表单 - 第二个模态表单不显示

> ID：10571616
> 
> 赞同：0
> 
> 时间：2012-05-13T12:13:48.800
> 
> 标签：c#, winforms

我有一个 ac# net 程序，它通过一个模态形式提出问题，是或否。响应 yes 将显示另一个模式表单来获取名称的输入。我是这样编码的。

```
if (count == 0)
{
 Form5 nameQstFrm = new Form5("Add Name?");
 DialogResult nameQstRst = nameQstFrm.ShowDialog(this);
 if (nameQstRst == DialogResult.Yes)
 {
   nameQstRst = DialogResult.None;
   this.DialogResult = DialogResult.None;
   string nameGet = "";
   Form6 nameAddFrm = new Form6("Name Please～");
   DialogResult nameAddRst = nameQstFrm.ShowDialog(this);
   if (nameAddRst == DialogResult.Yes)
   {
    nameAddRst = DialogResult.None;
    this.DialogResult = DialogResult.None;
    nameGet = nameAddFrm.AddShitaStr;
    kyaranameKanaTxt = nameGet.Trim();
   }
   kyaranameAru = true;
 }
} 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:19:33.293

修改这一行（我认为是错字）：

```
Form6 nameAddFrm = new Form6("Name Please");
DialogResult nameAddRst = nameQstFrm.ShowDialog(this); 
```

至

```
Form6 nameAddFrm = new Form6("Name Please");
DialogResult nameAddRst = nameAddFrm.ShowDialog(this); 
```

您不能`ShowDialog`在同一实例上调用两次。

# bash - 如何在bash中使用不可打印的字符作为排序命令的字段分隔符？

> ID：10571620
> 
> 赞同：3
> 
> 时间：2012-05-13T12:14:06.433
> 
> 标签：bash, shell, sorting

sort 命令有一个参数“-t”来声明字段分隔符而不是默认的空白。例如：

```
sort -t 'a' file 
```

如果我想使用不可打印的字符作为分隔符，比如 ASCII 表中的第五个字符，该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T12:16:45.377

bash 中有一个特殊的引用，可用于此目的。尝试以下命令并`$'...'`在 bash 手册中查找：

```
sort -t $'\05' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:17:42.997

您可以使用 ctrl-V 然后使用不可打印的控制代码在 bash（以及 vim）中输入不可打印的字符。因此，对于字符 0x04，Ctrl-V Ctrl-D 插入`^D`，这是字符 0x04 的表示。

按：

```
sort -t '<ctrl-V><ctrl-D>' file 
```

这将显示：

```
sort -t '^D' file 
```

# ruby - Ruby - Rails - 将文本传递给 javascript

> ID：10571630
> 
> 赞同：2
> 
> 时间：2012-05-13T12:15:23.777
> 
> 标签：ruby, ruby-on-rails-3

为什么这不将文本传递给 javascript/jquery。？`@i[:error]`里面肯定有一个字符串，我可以在控制台上打印它。

js.erb 文件 -

```
<% if @i[:error] != "" %>
<% puts "--> " + @i[:error]  %>
#--> error
#Validation error(s):
#-  Item Is not defined or blank. # that's the error string in @i[:error]

$(function() {
$("#error_message").attr("class", "message_error");
$('#error').text("<%= @i[:error]%>"); #Not working for @i[:error]
#$('#error').text("<%= "#{@i[:error]}"%>");#Not working for @i[:error]

#$('#error').text("Test"); #This is working
#$('#error').text("<%= "?????"%>"); #This is working
});
<% else %>
........#fine here
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:28:09.283

是的，可能是因为换行。您可以使用[`escape_javascript`](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript).

> 为 JavaScript 段转义回车和单引号和双引号。

所以：

```
$('#error').text("<%= escape_javascript(@i[:error]) %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:44:56.607

如果您指定调试器所说的内容，则更容易理解问题。此 erb 视图的代码工作正常：

```
<% @i = {} %>
<% @i[:error] = "Error" %>  

<% unless @i[:error].blank? %>
  <script>
    $(document).ready(function() {
      $('#error').text('<%= @i[:error] %>'); // Works fine
    });
  </script>
<% end %> 
```

注意字符串的空性是用**空格检查的吗？****方法，我认为它看起来比使用!=**运算符要好得多。

# visual-studio-lightswitch - 电灯开关中的新数据屏设计

> ID：10571633
> 
> 赞同：0
> 
> 时间：2012-05-13T12:16:03.093
> 
> 标签：visual-studio-lightswitch

我正在创建一个电灯开关应用程序，我必须按照我的客户的要求创建一个自定义屏幕设计。我附上了一个粗略的设计（一小部分）它应该是怎样的。我尝试在不创建表格的情况下添加屏幕并添加了一些自定义控件但没有正确（也找不到图像按钮）..然后尝试添加数据库并自动创建所有控件..搜索字段文本框被禁用，因为它是一个主键。如何启用它。有人可以指导我如何在电灯开关中设计自定义页面或指向一些教程或文章。谢谢。![粗糙的屏幕设计](../Images/88a307c6a70650d60960355be0fdb408.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:27:11.687

要利用电灯开关，您应该尝试使用内置控制的电灯开关制作屏幕。

您在设计中显示的三个控件在 Visual Studio 灯开关中可用。

如果 lightswitch 控件符合您的需要，您将使用 lightswitch 编写快速应用程序，如果您需要使用 silverlight 重写屏幕，那么您可能需要 silverlight 应用程序而不是 lightswitch 应用程序。

我写了一些自定义控件和屏幕，我在这里共享代码：

*   [LightSwitch 自定义控件：树查找操作](http://beutil.blogspot.com.es/2012/04/lightswitch-custom-control-tree-loojup.html)
*   [LightSwitch 自定义控件：树 CRUD 操作](http://beutil.blogspot.com.es/2012/04/lightswitch-custom-control-tree-crud.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T00:54:48.367

@karthi - 您实际上*不需要*自定义屏幕模板来拥有您描述的搜索屏幕（除非您需要多次添加该特定类型的屏幕）。如果您观看 Beth Massi 关于创建自定义搜索屏幕的视频，您应该会明白这一点。

[http://msdn.microsoft.com/en-us/lightswitch/hh499661](http://msdn.microsoft.com/en-us/lightswitch/hh499661)

您需要取消选中数据网格的“支持搜索”框，以便您可以使用自己的搜索条件屏幕。

希望有帮助。

# java - Java - 找不到 HttpClient.executeMethod()

> ID：10571640
> 
> 赞同：1
> 
> 时间：2012-05-13T12:16:27.653
> 
> 标签：java, file-upload, httpclient, java-io

我正在尝试使用 Apache 的 HTTP 客户端和 MultipartRequests 上传文件，但它给了我一个错误，这是我的代码：

```
PostMethod filePost = new PostMethod("http://host/some_path");
Part[] parts = {
  new StringPart("param_name", "value"),
  new FilePart(f.getName(), f)
 };
filePost.setRequestEntity(
  new CountingMultipartRequestEntity(parts, filePost.getParams())
  );
HttpClient client = new DefaultHttpClient();
int status = client.executeMethod(filePost); 
```

它说“找不到符号executeMethod（）”。这很奇怪，因为我的代码基于我在 Internet 上找到的示例，当我复制/粘贴他们的代码时，它会显示错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:18:57.367

您正在使用[HtppClient 4.x](http://hc.apache.org/httpcomponents-client-ga/)（请参阅参考资料[`DefaultHttpClient`](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DefaultHttpClient.html)），而示例代码基于[HttpClient 3.x](http://hc.apache.org/httpclient-3.x/)（请参阅参考资料[`HttpClient`](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/HttpClient.html)）。这些版本之间的 API 已完全更改。

只需在您的 CLASSPATH 中包含 HttpClient 4 并摆脱版本 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:19:24.853

我假设您仔细检查过您使用的是为这些示例编写的相同版本？也许[这](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/index.html)会有所帮助。

# javascript - 向上滑动 div，然后附加一个新的 div 以在其位置向上滑动

> ID：10571644
> 
> 赞同：0
> 
> 时间：2012-05-13T12:17:06.117
> 
> 标签：javascript, jquery

当用户成功填写注册表单时，我试图为两个 div 框设置动画。动画的第一个 div 是注册表本身，当用户正确填写表单时，它将从底部向上滑动到中心，然后向上滑动并离开屏幕。

我的第一个工作正常，但我需要第二个 div 从屏幕底部向上滑动到中心，其中包含一条消息，告诉用户检查他们的电子邮件以激活他们刚刚创建的帐户。我怎样才能让这个位工作和动画？

我使用的代码是这样的：

```
 $("#registerForm").validate({
            rules: {
            name: { required: true, minlength: 3 },
            eMail:{ required: true},
            passWord: { required: true, minlength: 5 },
            rePassWord: { equalTo: ".passWord" }
            },
            submitHandler: function(form) 
            {

            // do other stuff for a valid form
            $.post('../inc/register.php', $("#registerForm").serialize(), function(data) {

            if(data == "true")
                {
                $('#loaderWrap').remove();
                $('#reg_dialog').animate({
                marginTop : -2000,
                opacity   : 0
                }, 400);

            $.append('<div id="reg_success">Please check your emails to active your account</div>');

                //Slide Up Success Message 
                $('#reg_success').css({
                top     : winH / 2 - $this.height() / 2,
                left    : winW / 2 - $this.width() / 2,
                display : 'block'
                }).animate({
                marginTop : 0,
                opacity   : 1
                }, 400);

                }
            });
        }
    }); 
```

# c# - 以表格形式添加到listBox？

> ID：10571645
> 
> 赞同：1
> 
> 时间：2012-05-13T12:17:08.923
> 
> 标签：c#, winforms

我正在尝试从另一个表单向表单中的列表框添加一些文本，但是在应该添加到列表框的代码中出现红色下划线。是否可以将数据从我正在尝试做的另一个类传递到一个类中的表单？我正在使用 VisualStudio 2010

我在 MainForm 类中使用了这段代码：

```
// Local object of SearchResultForm
SearchResultForm frmSearchResult = new SearchResultForm();
frmSearchResult.Show();
frmSearchResult.lstSearchResult.Items.Add("Test"); 
```

错误消息：由于其受保护级别而无法访问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:26:13.240

困惑，你是。

假设如下：

*   frmSearchResult - 表单的名称
*   myDDL -`DropDownList`嵌套在后一种形式中的

为了向下拉列表中添加新项目，

```
frmSearchResult.myDDL.Items.Add(new ListItem("New item!", "some-value")); 
```

编辑：

创建一个新的公共方法`frmSearchResult`，允许您添加新项目

```
public void addNewListItem(string sText, string sValue){
    myDDL.Items.Add(new ListItem(sText, sValue));
} 
```

然后`addNewListItem`从第一种形式调用：

```
frmSearchResult.addNewListItem("New item!", "some-value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:20:44.317

控件通常是一个变量，所以在 Winforms 上试试这个：

```
frmSearchResult.lstSearchResult.Add("Test"); 
```

WPF：

```
frmSearchResult.lstSearchResult.Items.Add("Test"); 
```

# php - 如何将 XML 内容倒序排列？

> ID：10571651
> 
> 赞同：0
> 
> 时间：2012-05-13T12:18:20.883
> 
> 标签：php, xml, reverse

我尝试了一些已经在此处发布的解决方案，但似乎没有任何效果。那可能是因为我对 php 或 xml 真的不是很熟悉。我只需要为 xcoding 输出 xml。所以希望有人可以阐明我如何可以反转我的 xml 的顺序，以便最后一个条目位于顶部。我最后一次尝试什么：

```
$query = array_reverse($doc->xpath('query')); 
```

但它不喜欢它，例如它不起作用。

所以这是我的代码，以创建我的 xml 文档：

```
<?php 

if(!$dbconnect = mysql_connect('localhost', '-', '-')) {
echo "Connection failed to the host 'localhost'.";
exit;
} // if
if (!mysql_select_db('-')) {
echo "Cannot connect to database '-'";
exit;
} // if

$table_id = 'table1';
$query = "SELECT Name,Age,Sex FROM $table_id";

$dbresult = mysql_query($query, $dbconnect);

// create a new XML document
$doc = new DomDocument('1.0');

// create root node
$root = $doc->createElement('root');
$root = $doc->appendChild($root);

// process one row at a time
while($row = mysql_fetch_assoc($dbresult)) {

// add node for each row
$occ = $doc->createElement($table_id);
$occ = $root->appendChild($occ);

// add a child node for each field
foreach ($row as $fieldname => $fieldvalue) {

$child = $doc->createElement($fieldname);
$child = $occ->appendChild($child);

$value = $doc->createTextNode($fieldvalue);
$value = $child->appendChild($value);

} // foreach
} // while

// get completed xml document
$xml_string = $doc->saveXML();
$doc->save("yolo.xml") 

//echo $xml_string;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:50:10.963

最好的办法是发出一个 SQL 查询，它按您想要的顺序返回结果。您在此处的 SQL 查询没有`ORDER BY`子句，因此返回的结果没有特定的顺序。

但是，您也可以在将结果添加到 XML 文档时颠倒它们的顺序：不要为每一行*附加*新的子节点，而是将它们添加到*前面*。替换这一行：

```
$occ = $root->appendChild($occ); 
```

和

```
$occ = $root->insertBefore($occ, $root->firstChild); 
```

同样一般来说，最好在将 XML 树添加到文档之前完成构建它。

# xcode - XCode 4.3.2 Settings.bundle 缺少文件

> ID：10571652
> 
> 赞同：0
> 
> 时间：2012-05-13T12:18:26.297
> 
> 标签：xcode, settings

环境：XCode 4.3.2，IOS 5.1

我正在尝试为我的项目添加一个 setting.bundle。

```
File->New->File->IOS Resource->Setting.bundle->Next->Create 
```

此捆绑包中没有文件。我在终端中尝试了“cd”，但我仍然看不到任何东西——它是一个空目录。

捆绑包中应该有 3 个文件和 1 个目录。谁能告诉我为什么我丢失了所有这些文件，或者 Apple 是否更改了 settings.bundle 的概念？

我在我的几个项目中尝试了这个，甚至重新安装了 xcode 和 lion，但一点运气都没有。

PS：更改 setting.bundle 的文件类型没有帮助；4.3.2 中没有这样的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T12:48:10.693

全新安装解决了这个问题。

# python - Tornado 作为异步容器的最佳监控工具是什么？

> ID：10571655
> 
> 赞同：3
> 
> 时间：2012-05-13T12:18:57.297
> 
> 标签：python, monitoring, tornado

Tornado web 可以与 WSGI 或 ASYNC 容器一起使用。WSGI 容器有很多解决方案。目前最吸引人的解决方案是 RPM Lite，但它需要 Tornado 以我不想要的 wsgi 模式运行。我需要能够完全监控 Tornado Async 应用程序的解决方案。

EDOT：感谢@Graham 在字里行间的阅读，我一直期待理解主题的人会有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T00:14:23.437

这个问题有点模糊，但这里的假设是您在询问存在哪些 Web 应用程序性能监控工具。在这种情况下，您要求使用 Tornado ASYNC API 与位于 Tornado Web 服务器顶部的 WGSI 容器。

您提到“RPM Lite”，它可以解释为 New Relic Web 应用程序性能服务。为此，如您所见，目前仅支持在 Tornado 上运行的 WSGI 应用程序，而不支持 Tornado 的 ASYNC API。已经对 ASYNC Python web 框架的支持进行了一些调查，但 Tornado API 没有用作测试用例，因此不知道何时/是否支持 ASYNC API。

至于替代方案，这取决于您想从中得到什么，并且是您需要扩展问题的地方。如果您更喜欢跟踪网络流量，那么您始终可以使用谷歌分析或从网络服务器日志中提取详细信息的工具。

如果您特别关注可以检测实际 Web 应用程序并告诉您其中发生了什么的工具，包括在数据库中显示的时间、Web 外部等，就像 New Relic 所做的那样，那么目前没有任何其他选项我所知道的 ASYNC 系统，尤其是 Tornado ASYNC API。

# javascript - 在新的 Array Javascript 中计算和记录对象中的部分重复对象

> ID：10571656
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:18:57.417
> 
> 标签：javascript

我需要处理对象的源数组，数组中的许多对象都具有三个相同的属性值。正是这些值将用于创建新对象并将其推送到目标数组。当源数组上的另一个对象与目标数组中的一个对象具有相同的三个属性值时，目标数组上的匹配对象的访问计数将加一。

为了帮助您理解，在源数组中，每个对象都是属于用户的一顿饭的记录。在第二个数组中，我需要存储用户详细信息和他们的用餐次数。

我尝试了一些失败的解决方案，如下所示。我认为下面的代码会创建一个文字对象，通过查找它的 indexOf（-1 表示未找到）来检查它是否在目标数组中，如果未找到则将其推送。问题是它永远找不到对象，如果我搜索 3000 顿饭，第二个数组的长度为 3000！

下面的代码不会尝试存储访问次数。

```
userArray = new Array();
for (var i = 0; i < filteredObjects.length; i++) {
    var user = { 
        forname: filteredObjects[i].forname,
        surname: filteredObjects[i].surname,
        dincat: filteredObjects[i].dincat,
    };
    var index = userArray.indexOf(user);
    if (index = -1) {
        userArray.push(user);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:59:10.780

这不起作用，因为`user`您在循环中创建的对象与您在其中添加的任何对象都不相同`userArray`。它们可能包含相同的键和值，但严格来说（===）它们并不相同。

为了帮助您的代码，您可以添加一个用户地图对象：

```
var userArray = new Array(),
userMap = {};

for (var i = 0, item; item = filteredObjects[i]; ++i) {
    var userKey = item.forname + '-' + item.surname + '-' + item.dincat;

    if (!(userKey in userMap)) {
        userArray.push({
            forname: filteredObjects[i].forname,
            surname: filteredObjects[i].surname,
            dincat: filteredObjects[i].dincat,
        });
        userMap[userKey] = true;
    }
} 
```

用户映射是一个对象，它使用其键来确定您之前是否已经插入过用户。这通过选择用户标识符来工作，在您的情况下是名字、姓氏和 dincat 的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:58:31.260

indexOf 使用严格相等将搜索元素与 Array 的元素进行比较。如果两个操作数都是对象，则将它们作为对象进行比较，并且仅当两个操作数都引用同一个对象时，相等性测试才为真。在您的情况下，您每次都创建一个新对象并将其与数组中的现有对象进行比较，它将返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:27:34.803

那里有几个语法错误，但代码不起作用的主要原因是您正在做的是使用您当前在数组循环中的对象的值创建一个新对象，然后在数组中查找该新对象，所以它永远不会在那里。

如果有更有效的解决方案，我实际上有点好奇，但一种可能性是

```
var demo = [
    {a: 'green', b: 'blue', c:'red'},
    {a: 'blue', b: 'green', c: 'not blue'},
    {a: 'green', b: 'blue', c: 'red'}       
],
records= {};

for (var i=0; i<demo.length; i++){
    if (records.hasOwnProperty(demo[i].a) &&
       records[demo[i].a].hasOwnProperty(demo[i].b) &&  
       records[demo[i].a][demo[i].b].hasOwnProperty(demo[i].c)
    ){
      //do something with a match
    } else {
        if (!records.hasOwnProperty(demo[i].a)) 
            records[demo[i].a] = {};

        if (!records[demo[i].a].hasOwnProperty(demo[i].b))
            records[demo[i].a][demo[i].b] = {};

        records[demo[i].a][demo[i].b][demo[i].c] = 'yes';
        //no match found
    }   
} 
```

只需将您的值替换为 a、b 和 c，它应该可以工作。

# javascript - ReferenceError：找不到变量：$

> ID：10571657
> 
> 赞同：0
> 
> 时间：2012-05-13T12:19:19.893
> 
> 标签：javascript, html, cordova

大家好，我正在开发一个游戏，当我在 chrome 上运行它时它可以工作，但是当我在模拟器上尝试它时，我的 javascript 代码中出现错误，我无法理解源代码或原因

这是错误：

```
05-13 11:53:11.726: E/Web Console(790): ReferenceError: Can't find variable: $ at file:///android_asset/www/js/html5games.matchgame6.js:5 
```

错误在第 5 行：这是我的 javascript 文件内容：

```
 var matchingGame = {};
  ***var uiPlay1 = $("#gamePlay1");***  //////line 5
  var uiPlay2 = $("#gamePlay2");
  var uiIntro = $("#popup");
  var uiExit = $("#gameExit");
  var uiNextLevel = $("#gameNextLevel");
  var uigameQuit =$("#gameQuit");
 var uiPlay3 = $("#gamePlay3");
 matchingGame.savingObject = {};

 matchingGame.savingObject.deck = [];

 matchingGame.savingObject.removedCards = [];

 // store the counting elapsed time.
  matchingGame.savingObject.currentElapsedTime = 0;

  //store the last-elapsed-time

//matchingGame.savingObject.LastElapsedTime = 0;//now

  // store the player name
  matchingGame.savingObject.palyerName=$("#player-name").html();
  matchingGame.savingObject.currentLevel="game6.html";
  // all possible values for each card in deck
matchingGame.deck = [
'cardAK', 'cardAK',
'cardAQ', 'cardAQ',
'cardAJ', 'cardAJ',

  ];

   $(  function(){init();}  );

  //initialise game
   function init() {

                    $("#game").addClass("hide");

                    $("#cards").addClass("hide");

                   uiPlay1.click(function(e) {
                    e.preventDefault();

            $("#popup").addClass("hide");
            startNewGame();

             });

                uiPlay2.click(function(e) {
                    e.preventDefault();
                $("#popup").addClass("hide");
                        var savedObject = savedSavingObject();
               // location.href =savedObject.currentLevel ;

                if (savedObject.currentLevel=="game6.html")
                 rejouer();
                 else 
                 location.href =savedObject.currentLevel ;

                //ResumeLastGame();
                //alert ("level :"+savedObject.currentLevel );

                });

            uiExit.click(function(e) {e.preventDefault();
                                     //alert("u clicked me ");
                                    }
                        );

                uiPlay3.click(function(e) {
                e.preventDefault();
                $("#popupHelp").fadeIn(500, function() {
                $(this).delay(10000).fadeOut(500)}); });

    } 
```

任何想法请提前谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T12:20:08.020

您可能没有包含 jQuery。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T12:20:17.753

大概你还没有在`$`任何地方定义函数。

也许您的文档假设您已经加载了[Prototype.js](http://www.prototypejs.org/)、[Mootools](http://mootools.net/)、[jQuery](http://jquery.com/)或许多其他库之一，这些库设置了那个[（非常糟糕的）名称](http://en.wikipedia.org/wiki/Self-documenting)的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T12:25:48.530

在使用`$`.

您是否在文档末尾包含了您的库，并且在下载库之前编写了脚本。

确保你有一个引用你的库的脚本标签，然后有你的脚本内容。

还有一点需要注意的是，执行 scriot 时您的文档可能尚未加载，并且页面上可能不存在某些控件，因此请确保将它们包装在一个 API 中，该 API 将在文档完成后运行该函数完全加载。在 jquery 中你使用`$(document).ready(function(){});`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T00:48:29.550

我正在 Ejecta 中开发一个 JS 应用程序。jQuery 被包括在内，但 DOM 就绪不适用于 Ejecta。相反，在站点/应用程序初始化时，我会执行以下操作：

```
function func() {
    init();
    animate();
}

setTimeout(func, 1000); 
```

这给了 jQuery 时间来加载和解析。

# path - GNU Make 将空格转换为冒号

> ID：10571658
> 
> 赞同：26
> 
> 时间：2012-05-13T12:19:20.857
> 
> 标签：path, makefile, gnu-make, space, colon

给定一个以冒号分隔的路径列表，使用*GNU Make*获得一个以空格分隔的列表很简单：

```
CPATHS := /usr/bin/foo:/usr/bin/baz:/usr/bin/baz
SPATHS := $(subst :, ,$(CPATHS)) 
```

但是，我找不到一个好的方法去相反的方向。以下 hack 确实有效（至少在安装*sed的情况下），但我很确定使用**Make*的内部函数会有更好的方法来解决这个问题。

```
SPATHS := /usr/bin/foo /usr/bin/baz /usr/bin/baz
CPATHS := $(shell echo $(SPATHS) > tmp; sed 's/ \+/:/g' tmp; rm tmp) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-13T12:55:44.320

这里唯一棘手的部分是定义一个文字空间：

```
space := $(subst ,, )

SPATHS := /usr/bin/foo /usr/bin/baz /usr/bin/baz
CPATHS := $(subst $(space),:,$(SPATHS)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-08-16T10:23:37.233

获得文字空间的最短方法是 via `$() $()`。因此：

```
$(subst $() $(),:,$(CPATHS)) 
```

或者，为简洁起见：

```
_=$() $()
$(subst $(_),:,$(CPATHS)) 
```

有趣的是，同样的技巧适用于 cmake 的宏，即它`${}`是一个分隔符，但它本身不引入空格。

# javascript - 调整图像大小而不模糊

> ID：10571664
> 
> 赞同：0
> 
> 时间：2012-05-13T12:19:49.583
> 
> 标签：javascript, css, image, web-applications, minecraft

我正在为 Minecraft 创建一个网络应用程序，我需要抓取某人的皮肤，并在不模糊的情况下调整它的大小。也许一些javascript或其他东西可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:40:05.457

如果我正确理解了您的问题，我相信您想在不进行插值的情况下调整图像大小并仅使用最近邻，例如：

![脆马里奥](../Images/61e9e5d95d9be315a964bcbdcd35a394.png)

而不是：

![模糊的马里奥](../Images/bada193e405eec2b422c31262b1ae939.png)

不幸的是，没有简单的方法可以用 CSS 做到这一点，所以你必须：

1.  在服务器端使用最近邻缩放图像并提供服务，或者，
2.  查看[这个问题](https://stackoverflow.com/questions/8597081/how-to-stretch-images-with-no-antialiasing/)以获得涉及 HTML5 画布的复杂答案。

# iphone - 在 UISearchDisplay 控制器中从详细视图返回时显示的表节标题

> ID：10571666
> 
> 赞同：1
> 
> 时间：2012-05-13T12:20:03.223
> 
> 标签：iphone, ios5

我有以下设置： - TabBarControler - 在选项卡内 UINavigationController - 在此内部是 UITableViewController - 在此内部可以使用 UISearchDisplayController 搜索条目

我可能不会发布可以更好地解释一切的图片，但不允许这样做。

*   所以我有一个带有部分和条目的表格以及一个搜索栏。
*   现在我进行搜索并选择其中一个搜索结果进入详细视图
*   选择其中一个结果并返回搜索结果后

Sections 标题在那里，但我确保在适当的部分回调中，当搜索表处于活动状态时，返回一个 nil 相应的 0 值。我猜它与 NavController 连接，但我不知道如何将部分标题再次发送到后台。

任何帮助表示赞赏，

谢谢，

安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:14:35.707

...找到了...真丢脸，这是 ViewDidApear 方法中父类中的表重新加载调用。

# javascript - 如何在新打开的窗口中设置文本框值？

> ID：10571680
> 
> 赞同：0
> 
> 时间：2012-05-13T12:21:22.010
> 
> 标签：javascript, jquery

我有一个带有文本框的 div。

```
<div id="DvPrint">
    <div>
    <input type="text" style="width: 100px;
                                    margin-left: 25px;" class="textbox" id="ctl00_content_TxtLetterNumber" readonly="readonly" name="ctl00$content$TxtLetterNumber">
    </div>
    </div> 
```

现在我使用在新窗口中写入 div 内容`window.open.`

```
 n = window.open('M80Print.aspx', '_blank', 'status=no,toolbar=no,menubar=yes,height=550px,width=640px');
            n.document.open();
 n.document.write($('#DvPrint').html()); 
```

现在我想在新打开的窗口中更改文本框的值。我该怎么做？？像这样的东西：

```
n.document.getElementById('ctl00_content_TxtLetterNumber').innerHTML = "1"; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:23:28.057

```
n.document.getElementById('ctl00_content_TxtLetterNumber').value = "1"; 
```

更改文本框值是用 完成的`value`，而不是用`innerHTML`.

**jQuery：**

```
$('#ctl00_content_TxtLetterNumber', n.document).val('1'); 
```

# javascript - 如何维护加载到流星应用程序的 HTML 头部/主体块的顺序？

> ID：10571688
> 
> 赞同：2
> 
> 时间：2012-05-13T12:22:46.393
> 
> 标签：javascript, meteor

来自[http://docs.meteor.com](http://docs.meteor.com)

> Meteor 扫描目录中的所有 HTML 文件以查找三个顶级元素：<head>、<body> 和 <template>。头部和身体部分分别连接成一个单独的头部和身体，在初始页面加载时传输给客户端。

非常好的功能，但我现在遇到了以下问题。

如何维护加载到流星应用程序的 HTML 头部/主体块的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:46:03.823

您目前正在做的事情很可能是这样的：

**文件1.html**

```
<body>
    <!-- some stuff -->
</body> 
```

**文件2.html**

```
<body>
    <!-- some other stuff -->
</body> 
```

* * *

考虑改用模板，因此您可以执行以下操作：

**main.html**

```
<body>
    {{> template1}}
    {{> template2}}
</body> 
```

**文件1.html**

```
<template name="template1">
    <!-- some stuff -->
</template> 
```

**文件2.html**

```
<template name="template2">
    <!-- some other stuff -->
</template> 
```

* * *

**你应该做什么：**确保你的模板帮助你定义 HTML 流；其他一切都可以通过[CSS 定位](http://www.alistapart.com/articles/css-positioning-101/)来完成，甚至可以[为具有定义的高度或宽度的事物更改流程](https://stackoverflow.com/questions/92239/can-css-truly-override-the-order-of-html-elements-on-a-page)。

**你不应该做**的事情：按字母顺序命名文件，这样 Meteor 就会按顺序排列它们。使用 jQuery 处理正文的内容，使用`.bind`或`.on`列出插入 DOM 节点的事件；当一个被插入时，你将它移到正确的位置。*这些都是**坏习惯***。

# simperium - Simperium 无法加载成员数据（不支持的类型）

> ID：10571694
> 
> 赞同：1
> 
> 时间：2012-05-13T12:23:45.277
> 
> 标签：simperium

尝试将 Simperium 添加到我现有的应用程序中，我收到 NSAssertion 错误：

```
(gdb) po $eax
Simperium couldn't load member data (unsupported type) 
```

堆栈跟踪：

```
(gdb) bt
#0  0x02f63cbc in objc_exception_throw ()
#1  0x0190da48 in +[NSException raise:format:arguments:] ()
#2  0x00a5b2cb in -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] ()
#3  0x003ac625 in -[SPCoreDataExporter addMembersFrom:to:] (self=<value temporarily unavailable, due to optimizations>, entityDesc=<value temporarily unavailable, due to optimizations>) at /Users/kineticpoet/dev/simperium-ios-private/Simperium/SPCoreDataExporter.m:95
#4  0x003acd3b in -[SPCoreDataExporter exportModel:classMappings:] (_cmd=0x3fa641, model=0x7b377560) at /Users/kineticpoet/dev/simperium-ios-private/Simperium/SPCoreDataExporter.m:156
#5  0x00374a4d in -[Simperium startWithAppID:APIKey:model:context:coordinator:] (self=<value temporarily unavailable, due to optimizations>, _cmd=<value temporarily unavailable, due to optimizations>, model=<value temporarily unavailable, due to optimizations>) at /Users/kineticpoet/dev/simperium-ios-private/Simperium/Simperium.m:385
#6 … 
```

支持的类型有哪些？是否支持二进制数据？我的应用程序对二进制数据使用“允许外部存储”。支持吗？

我怎样才能找到更多信息？

**更新：**

扩展 Simperiums Simpletodo 示例并添加具有二进制数据属性的新实体会导致相同的错误：

```
…
2012-05-13 14:30:20:192 SimpletodoFinal[42429:fb03] Simperium starting... 
2012-05-13 14:30:20.222 SimpletodoFinal[42429:fb03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Simperium couldn't load member data (unsupported type)'
*** First throw call stack:
(0x17f2022 0x1bcecd6 0x179aa48 0xdda2cb 0x3fb85 0x4029b 0x7fad 0x2e37 0x441386 0x442274 0x451183 0x451c38 0x445634 0x2082ef5 0x17c6195 0x172aff2 0x17298da 0x1728d84 0x1728c9b 0x441c65 0x443626 0x290d 0x2875 0x1)
terminate called throwing an exception 
```

**更新^2**：

Simperium 在将具有二进制数据的实体的超类更改为非`NSManagedObject`类后开始同步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:26:58.590

Simperium 对 Core Data 中二进制类型的支持目前没有记录且受到限制。要防止 Simperium 看到任何特定属性（包括尚未完全支持的二进制属性），您可以向该属性添加用户信息参数。

在模型编辑器中突出显示该属性，打开检查器窗格，然后添加一个用户信息参数。将键设置为`spDisableSync`，将值设置为`1`。这应该允许该实体的其余部分与 Simperium 一起成功使用（如果需要）。

# iphone - 归档时 Xcode KEEPS 崩溃

> ID：10571698
> 
> 赞同：0
> 
> 时间：2012-05-13T12:24:36.137
> 
> 标签：iphone, ios, xcode, crash, archiving

这是错误控制台：Xcode 昨天刚开始崩溃，我不知道为什么！我正在构建我的应用程序以提交它，但我不能。我已经尝试重新安装和其他尝试，请帮助！

这是它崩溃并提出崩溃报告时的代码进程：Xcode [1150] 路径：/Applications/Xcode.app/Contents/MacOS/Xcode 标识符：com.apple.dt.Xcode 版本：4.3.2 (1177 ) Build Info: IDEApplication-1177000000000000~6 App Item ID: 497799835 App External ID: 7171108 Code Type: X86-64 (Native) Parent Process:launchd [352]

```
Date/Time:       2012-05-13 08:15:21.649 -0400
OS Version:      Mac OS X 10.7.3 (11D50b)
Report Version:  9

Interval Since Last Report:          111561 sec
Crashes Since Last Report:           38
Per-App Interval Since Last Report:  155115 sec
Per-App Crashes Since Last Report:   25
Anonymous UUID:                   XXXXXXXXXXXXXXXXXXXXXXXX
Crashed Thread:  10  Dispatch queue: IDEArchiveManager

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

 Application Specific Information:
    ProductBuildVersion: 4E2002
    UNCAUGHT EXCEPTION (NSInvalidArgumentException): -[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x4039cb820
    UserInfo: (null)
    Hints: None
    Backtrace:
      0  0x00007fff889ecfaa __exceptionPreprocess (in CoreFoundation)
      1  0x00007fff8a778d5e objc_exception_throw (in libobjc.A.dylib)
      2  0x00007fff88a792ae -[NSObject doesNotRecognizeSelector:] (in CoreFoundation)
      3  0x00007fff889d9e73 ___forwarding___ (in CoreFoundation)
      4  0x00007fff889d9c88 _CF_forwarding_prep_0 (in CoreFoundation)
      5  0x0000000101323f62 +[IDEArchivedApplication archivedApplicationInfoForApplicationInArchiveProductsDirectory:] (in IDEFoundation)
      6  0x0000000101322885 +[IDEArchive createArchiveWithName:schemeName:platform:products:auxiliaryFiles:usingFileManager:error:] (in IDEFoundation)
      7  0x000000010131ea3e __block_global_0 (in IDEFoundation)
      8  0x0000000100c084c0 __DVTDispatchAsync_block_invoke_0 (in DVTFoundation)
      9  0x00007fff8c2b48ba _dispatch_call_block_and_release (in libdispatch.dylib)
     10  0x00007fff8c2b610a _dispatch_queue_drain (in libdispatch.dylib)
     11  0x00007fff8c2b5f66 _dispatch_queue_invoke (in libdispatch.dylib)
     12  0x00007fff8c2b5760 _dispatch_worker_thread2 (in libdispatch.dylib)
     13  0x00007fff8a4b23da _pthread_wqthread (in libsystem_c.dylib)
     14  0x00007fff8a4b3b85 start_wqthread (in libsystem_c.dylib)

    objc[1150]: garbage collection is ON
    NSURL
    abort() called

    Thread 0:: Dispatch queue: com.apple.main-thread
    0   libsystem_kernel.dylib          0x00007fff8e66167a mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff8e660d71 mach_msg + 73
    2   libsystem_kernel.dylib          0x00007fff8e653d84 mach_port_insert_member + 131
    3   com.apple.CoreFoundation        0x00007fff88981e00 __CFRunLoopRun + 1104
    4   com.apple.CoreFoundation        0x00007fff88981676 CFRunLoopRunSpecific + 230
    5   com.apple.HIToolbox             0x00007fff8367931f RunCurrentEventLoopInMode + 277
    6   com.apple.HIToolbox             0x00007fff8368051b ReceiveNextEventCommon + 181
    7   com.apple.HIToolbox             0x00007fff83680456 BlockUntilNextEventMatchingListInMode + 62
    8   com.apple.AppKit                0x00007fff892b8f5d _DPSNextEvent + 659
    9   com.apple.AppKit                0x00007fff892b8861 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 135
    10  com.apple.AppKit                0x00007fff892b519d -[NSApplication run] + 470
    11  com.apple.AppKit                0x00007fff89533b88 NSApplicationMain + 867
    12  com.apple.dt.Xcode              0x0000000100b62eec 0x100b62000 + 3820

    Thread 1:: Dispatch queue: com.apple.libdispatch-manager
    0   libsystem_kernel.dylib          0x00007fff8e6637e6 kevent + 10
    1   libdispatch.dylib               0x00007fff8c2b65be _dispatch_mgr_invoke + 923
    2   libdispatch.dylib               0x00007fff8c2b514e _dispatch_mgr_thread + 54

    Thread 2:: com.apple.NSURLConnectionLoader
    0   libsystem_kernel.dylib          0x00007fff8e66167a mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff8e660d71 mach_msg + 73
    2   com.apple.CoreFoundation        0x00007fff889796fc __CFRunLoopServiceMachPort + 188
    3   com.apple.CoreFoundation        0x00007fff88981e64 __CFRunLoopRun + 1204
    4   com.apple.CoreFoundation        0x00007fff88981676 CFRunLoopRunSpecific + 230
    5   com.apple.Foundation            0x00007fff8f0baffb +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:] + 335
    6   com.apple.Foundation            0x00007fff8f0af74e -[NSThread main] + 68
    7   com.apple.Foundation            0x00007fff8f0af6c6 __NSThread__main__ + 1575
    8   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    9   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 3:
    0   libsystem_kernel.dylib          0x00007fff8e66167a mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff8e660d71 mach_msg + 73
    2   com.apple.CoreFoundation        0x00007fff889796fc __CFRunLoopServiceMachPort + 188
    3   com.apple.CoreFoundation        0x00007fff88981e64 __CFRunLoopRun + 1204
    4   com.apple.CoreFoundation        0x00007fff88981676 CFRunLoopRunSpecific + 230
    5   com.apple.DTDeviceKit           0x00000001082a4ee8 -[DTDKRemoteDeviceDataListener listenerThreadImplementation] + 298
    6   com.apple.Foundation            0x00007fff8f0af74e -[NSThread main] + 68
    7   com.apple.Foundation            0x00007fff8f0af6c6 __NSThread__main__ + 1575
    8   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    9   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 4:: com.apple.CFSocket.private
    0   libsystem_kernel.dylib          0x00007fff8e662df2 __select + 10
    1   com.apple.CoreFoundation        0x00007fff889cacdb __CFSocketManager + 1355
    2   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    3   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 5:: DYMobileDeviceManager
    0   libsystem_kernel.dylib          0x00007fff8e66167a mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff8e660d71 mach_msg + 73
    2   com.apple.CoreFoundation        0x00007fff889796fc __CFRunLoopServiceMachPort + 188
    3   com.apple.CoreFoundation        0x00007fff88981e64 __CFRunLoopRun + 1204
    4   com.apple.CoreFoundation        0x00007fff88981676 CFRunLoopRunSpecific + 230
    5   com.apple.Foundation            0x00007fff8f060f9f -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 267
    6   com.apple.Foundation            0x00007fff8f060e8b -[NSRunLoop(NSRunLoop) run] + 62
    7   com.apple.Foundation            0x00007fff8f0af74e -[NSThread main] + 68
    8   com.apple.Foundation            0x00007fff8f0af6c6 __NSThread__main__ + 1575
    9   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    10  libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 6:: CVDisplayLink
    0   libsystem_kernel.dylib          0x00007fff8e662bca __psynch_cvwait + 10
    1   libsystem_c.dylib               0x00007fff8a4b42a6 _pthread_cond_wait + 890
    2   com.apple.CoreVideo             0x00007fff8927363f CVDisplayLink::waitUntil(unsigned long long) + 279
    3   com.apple.CoreVideo             0x00007fff89272aa5 CVDisplayLink::runIOThread() + 559
    4   com.apple.CoreVideo             0x00007fff8927285d _ZL13startIOThreadPv + 148
    5   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    6   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 7:
    0   libsystem_kernel.dylib          0x00007fff8e662bca __psynch_cvwait + 10
    1   libsystem_c.dylib               0x00007fff8a4b4274 _pthread_cond_wait + 840
    2   com.apple.Xcode.DevToolsCore    0x0000000104893b48 -[XCInvocationQueue _processInvocationsInThreadSlotNumber:] + 348
    3   com.apple.Foundation            0x00007fff8f0af74e -[NSThread main] + 68
    4   com.apple.Foundation            0x00007fff8f0af6c6 __NSThread__main__ + 1575
    5   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    6   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 8:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 9:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 10 Crashed:: Dispatch queue: IDEArchiveManager
    0   libsystem_kernel.dylib          0x00007fff8e662ce2 __pthread_kill + 10
    1   libsystem_c.dylib               0x00007fff8a4b27d2 pthread_kill + 95
    2   libsystem_c.dylib               0x00007fff8a4a3a7a abort + 143
    3   com.apple.dt.IDEKit             0x000000010173560e +[IDEAssertionHandler _handleAssertionWithLogString:] + 506
    4   com.apple.dt.IDEKit             0x0000000101736280 -[IDEAssertionHandler handleUncaughtException:] + 603
    5   com.apple.dt.DVTFoundation      0x0000000100c084e9 __DVTDispatchAsync_block_invoke_0 + 57
    6   libdispatch.dylib               0x00007fff8c2b48ba _dispatch_call_block_and_release + 18
    7   libdispatch.dylib               0x00007fff8c2b610a _dispatch_queue_drain + 264
    8   libdispatch.dylib               0x00007fff8c2b5f66 _dispatch_queue_invoke + 54
    9   libdispatch.dylib               0x00007fff8c2b5760 _dispatch_worker_thread2 + 198
    10  libsystem_c.dylib               0x00007fff8a4b23da _pthread_wqthread + 316
    11  libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 11:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 12:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 13:: Dispatch queue: Garbage Collection Work Queue
    0   com.apple.CoreFoundation        0x00007fff88951e86 CFRelease + 662
    1   com.apple.CoreFoundation        0x00007fff88959f43 __CFURLDeallocate + 35
    2   com.apple.Foundation            0x00007fff8f1bdbb2 -[NSURL(NSURL) finalize] + 96
    3   libobjc.A.dylib                 0x00007fff8a77757c finalizeOneObject + 53
    4   libauto.dylib                   0x00007fff8402107e Auto::foreach_block_do(auto_zone_cursor*, void (*)(void*, void*), void*) + 94
    5   libobjc.A.dylib                 0x00007fff8a7774ac batchFinalize + 53
    6   libobjc.A.dylib                 0x00007fff8a7775fb batchFinalizeOnTwoThreads + 91
    7   libauto.dylib                   0x00007fff84021019 Auto::Zone::invalidate_garbage(unsigned long, void**) + 73
    8   libauto.dylib                   0x00007fff8400e7db auto_collect_internal(Auto::Zone*, unsigned int) + 459
    9   libauto.dylib                   0x00007fff8400a21a __auto_zone_collect_block_invoke_0 + 74
    10  libdispatch.dylib               0x00007fff8c2b48ba _dispatch_call_block_and_release + 18
    11  libdispatch.dylib               0x00007fff8c2b610a _dispatch_queue_drain + 264
    12  libdispatch.dylib               0x00007fff8c2b5f66 _dispatch_queue_invoke + 54
    13  libdispatch.dylib               0x00007fff8c2b5760 _dispatch_worker_thread2 + 198
    14  libsystem_c.dylib               0x00007fff8a4b23da _pthread_wqthread + 316
    15  libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 14:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 15:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 16:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 17:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 18:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 19:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 20:
    0   libsystem_kernel.dylib          0x00007fff8e663192 __workq_kernreturn + 10
    1   libsystem_c.dylib               0x00007fff8a4b2594 _pthread_wqthread + 758
    2   libsystem_c.dylib               0x00007fff8a4b3b85 start_wqthread + 13

    Thread 21:
    0   libsystem_kernel.dylib          0x00007fff8e66167a mach_msg_trap + 10
    1   libsystem_kernel.dylib          0x00007fff8e660d71 mach_msg + 73
    2   com.apple.CoreFoundation        0x00007fff889796fc __CFRunLoopServiceMachPort + 188
    3   com.apple.CoreFoundation        0x00007fff88981e64 __CFRunLoopRun + 1204
    4   com.apple.CoreFoundation        0x00007fff88981676 CFRunLoopRunSpecific + 230
    5   com.apple.DebugSymbols          0x00007fff84d9c2f2 _ZL20SpotlightQueryThreadPv + 434
    6   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    7   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Thread 22:
    0   libsystem_kernel.dylib          0x00007fff8e662e42 __semwait_signal + 10
    1   libsystem_c.dylib               0x00007fff8a466dea nanosleep + 164
    2   com.apple.CoreSymbolication     0x00007fff887233bb cleaner_thread_main(void*) + 42
    3   libsystem_c.dylib               0x00007fff8a4b08bf _pthread_start + 335
    4   libsystem_c.dylib               0x00007fff8a4b3b75 thread_start + 13

    Is there any other solutions to try before I quit?
I need help, Thanks
Any solutions 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:36:37.627

您应该[向 Apple 报告](http://bugreport.apple.com)。看起来他们有一个他们认为应该是字典的数组（也许这是解析项目文件时的错误）。

# iphone - 使用 iPod 录制和播放音频

> ID：10571699
> 
> 赞同：3
> 
> 时间：2012-05-13T12:24:40.400
> 
> 标签：iphone, objective-c, ios, ipod

我正在尝试在通用应用程序中录制和播放音频。AVAudioSession 配置为：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayAndRecord error: nil]; 
UInt32 category = kAudioSessionCategory_PlayAndRecord;  
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category), &category); 
```

这适用于带有内置麦克风的设备。但在第三代 iPod 中，我遇到了随机的不良行为。有时一切正常，有时只有在插入带有集成麦克风的耳机时才会发生。在这种情况下，没有耳机就无法在应用程序中听到任何声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:07:17.457

第三代 iPod Touch 没有内置麦克风。拥有一个的唯一方法是用麦克风插入耳机。唯一带有内置麦克风的 iPod Touch 是第 4 代。

您可以检查 inputRecording 是否可用：

```
UInt32 propertySize, micConnected;
AudioSessionGetProperty(kAudioSessionProperty_AudioInputAvailable, &propertySize, &micConnected); 
```

# sql - 如何让 EntityManager 按照我调用它的顺序运行 SQL？

> ID：10571702
> 
> 赞同：1
> 
> 时间：2012-05-13T12:25:47.413
> 
> 标签：sql, jakarta-ee, jpa, jdbc, entitymanager

在开发我的 Java EE 应用程序时，我遇到了两种情况，即我的实体过早地在数据库中创建；它们是在插入引用的行之前插入的，导致违反外键。

起初我以为我弄错了，以错误的顺序在数据库中创建行。
但不，事实并非如此。然后我开始认为我的 JPA 提供程序* 中存在错误，或者他们只是弄错了。
但后来我意识到 EntityManager 不知道表之间的连接。

让我解释一下：
在两种情况下，表 A 都使用外键引用表 B。

### 情况＃1：

```
My code:
 1\. Creates an entity of table B.
 2\. Creates a row of table A using JDBC (there's no entity for table A).  
JPA provider:
 1\. Runs the JDBC first (inserts a row into table A).
 2\. SQLException is thrown, because B isn't created yet. 
```

为什么要使用 JDBC？
因为这不是我的代码。

### 情况#2：

```
My code:
 1\. Creates an entity of table B.
 2\. Creates an entity of table A. The thing is, A only holds B's ID.
JPA provider:
 1\. Creates entity A.
 2\. SQLException is thrown, because B isn't created yet. 
```

为什么B没有A作为成员？
因为 B 里面有一个大的 blob，它需要很多内存，我想尽量减少对 B 对象的引用。

我需要一个解决方案。也许有办法告诉 EntityManager 按照我调用它的顺序运行 SQL。
在厕所里，我也想过在创建实体 B 后使用“flush”，但我现在无法测试它，因为我们的开发数据库因维护而停机（DBA 正在发挥他们的魔力）。

* 我正在使用 Oracle WebLogic 12.1.1.0 附带的 TopLink。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:12:14.817

解决的好方法是在 A 和 B 之间建立关系。可以做些什么来提高效率：

*   使从 A 到 B 的关系变得懒惰（[FetchType .LAZY](http://docs.oracle.com/javaee/5/api/javax/persistence/FetchType.html)）
*   使 B 中的 blob 字段变得懒惰
*   当只需要引用 B 时，请使用[EntityManager.getReference](http://docs.oracle.com/javaee/5/api/javax/persistence/EntityManager.html#getReference%28java.lang.Class,%20java.lang.Object%29)。

如果由于某种原因无法完成，那么您应该在后续操作之前需要完成的每个操作之后刷新 entitymanager。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T19:08:23.460

如果无法定义关系，可以使用 DescriptorCustomizer 并调用 API addConstraintDependency() 让 EclipseLink 知道约束，然后它将以正确的顺序发出 SQL。

# ssas - 在其他域中定义 SSAS 角色

> ID：10571704
> 
> 赞同：2
> 
> 时间：2012-05-13T12:25:49.053
> 
> 标签：ssas, ssas-2008

我正在为客户开发 SSAS 多维数据集。现在我正在我公司域中的 PC 上进行开发。是否可以根据客户的域和活动目录组定义角色和安全选项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T10:16:36.323

是的，如果您无法通过设计器添加它们，则可以编辑您的 AS 项目的源 XML 文件。角色以“.role”文件扩展名保存在您的解决方案目录中。

使用此 XML 构造修改您的角色成员：

```
<Members>
    <Member>
        <Name>Domain\GroupOrUserName</Name>
    </Member>
</Members> 
```

预定义您的角色可能也是一个好主意，但让您的服务器管理员/DBA 在生产中向他们添加成员。

之后，您可以部署新版本的 SSAS 数据库，同时通过[Analysis Services 部署向导](http://msdn.microsoft.com/en-us/library/ms176121)保留多维数据集的安全设置。

# html - 单击一下，我想在新窗口中打开链接，并在上一个窗口中打开 2 个新标签

> ID：10571708
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:26:43.837
> 
> 标签：html, image, tabs, window

我想在新窗口中打开图像链接，同时在前一个窗口中打开 2 个新标签。请告诉我如何使用 html/java 脚本代码或任何方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:47:14.467

只是你应该在图像链接上添加 javascript 事件并使用此代码；

```
<a id="test" href="your address for main window"> <img> </img> </a>
<script type="text/javascript">

   document.getElementById("test").onclick = function(){
      window.open("url to open in new tab",'_blank');
      return true;
   }
</script> 
```

重要的是要返回 true（或者不要在 onclick 函数中使用返回）。

如果您只想在 js 中执行此操作，则可以在 onclick 上执行两个窗口函数：

```
document.getElementById("test").onclick = function(){
   window.open("url to open in new tab",'_blank');
   window.open("url to open in main window",'_blank');
} 
```

类似的东西应该工作。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:33:33.710

从技术上讲，在选项卡或新窗口中打开 URL 取决于用户浏览器的个人设置，因此您使用的任何内容都将受到这些设置的影响，并且可能不可靠。

# scala - Scala集合，单键多值

> ID：10571709
> 
> 赞同：8
> 
> 时间：2012-05-13T12:26:44.250
> 
> 标签：scala, collections, map

我有一个父键列表，每个父键都可能有零个或多个关联值。我不确定要使用哪个集合。

我在用`Map[Int,List[String]]`

我将地图声明为

```
var nodes = new HashMap[Int, List[String]] 
```

然后我有两种方法来处理添加新元素。第一个是添加新键`addNode`，第二个是添加新值`addValue`。最初，该键将没有任何与之关联的值。稍后，在执行期间，将关联新值。

```
def addNode(key: Int) = nodes += (key -> "")

def addValue(key: Int, value: String) = ??? 
```

我不确定如何实施`addValues`

## 更新：

回应@oxbow-lakes 的回答，这是我收到的错误。请注意，键不需要有与之关联的值。

```
scala> var nodes = Map.empty[Int, List[String]]
nodes: scala.collection.immutable.Map[Int,List[String]] = Map()

scala> nodes += (1->null)

scala> nodes += (1 -> ("one" :: (nodes get 1 getOrElse Nil)))
java.lang.NullPointerException
    at .<init>(<console>:9)
    at .<clinit>(<console>)
    at .<init>(<console>:11)
    at .<clinit>(<console>)
    at $print(<console>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
    at scala.tools.nsc.interpreter.IMain$Request$$anonfun$14.apply(IMain.scala:920)
    at scala.tools.nsc.interpreter.Line$$anonfun$1.apply$mcV$sp(Line.scala:43)
    at scala.tools.nsc.io.package$$anon$2.run(package.scala:25)
    at java.lang.Thread.run(Thread.java:680) 
```

## 更新 2：

上面代码的问题是`nodes += (1->null)`键应该与之关联的行`Nil`。下面是工作代码。

```
scala> var nodes = Map.empty[Int, List[String]]
nodes: scala.collection.immutable.Map[Int,List[String]] = Map()

scala> nodes += (1->Nil)

scala> nodes += (1 -> ("one" :: (nodes get 1 getOrElse Nil)))

scala> nodes
res27: scala.collection.immutable.Map[Int,List[String]] = Map(1 -> List(one)) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-13T12:45:35.293

## 使用多图

您可能想要使用`MultiMap`，它是一个与 同构的可变集合`Map[K, Set[V]]`。使用如下：

```
import collection.mutable
val mm = new mutable.HashMap[Int, mutable.Set[String]] with mutable.MultiMap[Int, String] 
```

然后添加节点：

```
mm addBinding (key, value) 
```

## 没有多重映射

另一种方法是坚持不可变的值。假设您想避免使用[镜头](http://www.youtube.com/watch?v=efv0SQNde5Q)（请参阅[scalaz](https://github.com/scalaz/scalaz/tree/master/core/src/main/scala/scalaz/)），您可以按如下方式添加节点：

```
nodes += (key -> (value :: (nodes get key getOrElse Nil))) 
```

它在这里工作（响应您的评论）：

```
scala> var nodes = Map.empty[Int, List[String]]
nodes: scala.collection.immutable.Map[Int,List[String]] = Map()

scala> def addNode(key: Int, value: String) =
     | nodes += (key -> (value :: (nodes get key getOrElse Nil)))
addNode: (key: Int, value: String)Unit

scala> addNode(1, "Hi")

scala> addNode(1, "Bye")

scala> nodes
res2: scala.collection.immutable.Map[Int,List[String]] = Map(1 -> List(Bye, Hi)) 
```

## 使用 Scalaz

使用 scalaz 库，您可以意识到这只是使用`Empty`模式：

```
nodes += (key -> (value :: ~(nodes get key))) 
```

或者你可以利用`Map`一个**monoid**的事实：

```
nodes = nodes |+| Map(key -> List(value)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T14:16:22.497

除了@oxbow_lakes 的回答之外，这里还有一个关于如何使用`addMap`将两个映射正确添加在一起的方法的想法（即，组合匹配键的列表，为新键添加新列表）：

```
class EnhancedListMap(self: Map[Int,List[String]]) {
  def addMap(other: Map[Int,List[String]]) =
    (this.ungroup ++ enhanceListMap(other).ungroup)
      .groupBy(_._1)
      .mapValues(_.map(_._2))

  def ungroup() =
    self.toList.flatMap{ case (k,vs) => vs.map(k -> _) }
}

implicit def enhanceListMap(self: Map[Int,List[String]]) = new EnhancedListMap(self) 
```

你会像这样使用它：

```
val a = Map(1 -> List("a","b"), 2 -> List("c","d"))
val b = Map(2 -> List("e","f"), 3 -> List("g","h"))
a addMap b
//Map(3 -> List(g, h), 1 -> List(a, b), 2 -> List(c, d, e, f)) 
```

您可以包括`addNode`, `addValue`, 和`addValues`相同的方式（到`EnhancedListMap`上面）：

```
 def addNode(key: Int) =
    if(self contains key) self else self + (key -> Nil)

  def addValue(key: Int, value: String) =
    self + (key -> (value :: (self get key getOrElse Nil)))

  def addValues(key: Int, values: List[String]) =
    self + (key -> (values ::: (self get key getOrElse Nil))) 
```

然后一起使用它们：

```
var nodes = Map.empty[Int, List[String]]             
// Map()
nodes = nodes.addNode(1)                             
// Map(1 -> List())
nodes = nodes.addValue(1,"a")                        
// Map(1 -> List(a))
nodes = nodes.addValue(2,"b")                        
// Map(1 -> List(a), 2 -> List(b))
nodes = nodes.addValues(2,List("c","d"))             
// Map(1 -> List(a), 2 -> List(c, d, b))
nodes = nodes.addValues(3,List("e","f"))             
// Map(1 -> List(a), 2 -> List(c, d, b), 3 -> List(e, f))
nodes = nodes.addMap(Map(3 -> List("g","h"), 4-> List("i","j")))
// Map(1 -> List(a), 2 -> List(c, d, b), 3 -> List(e, f, g, h), 4 -> List(i, j)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T22:36:04.873

我很喜欢`getOrElseUpdate`可变映射提供的方法：

```
import scala.collection.mutable._

private val nodes = new HashMap[Int, Buffer[String]]

def addNode(key: Int): Unit =
  nodes.getOrElseUpdate(key, new ArrayBuffer)

def addValue(key: Int, value: String): Unit  =
  nodes.getOrElseUpdate(key, new ArrayBuffer) += value 
```

# java - HashMap 中的洗牌值

> ID：10571712
> 
> 赞同：2
> 
> 时间：2012-05-13T12:27:16.313
> 
> 标签：java, collections, shuffle

我想对 HashMap 中的值进行洗牌。我有以下类型的 HashMap

```
Map<Integer,ArrayList<String> > trainDataSet = new HashMap<Integer, ArrayList<String>>(); 
```

我想洗牌地图中的值。我该怎么做？

以下是我的尝试：

```
 collections.shuffle(trainDataSet.values()); 
```

出现错误：

```
 Values cannot be cast to java.util.List 
```

是的，这是有道理的，因为我的值在 Arraylist 中而不是在 List 中。是否可以洗牌数组列表的集合？

编辑

如果我有以下订单::

```
key1  [aa,bb,cd]
key2  [xx,xy,sfr] 
```

进入类似的东西

```
key1  [xx,xy,sfr]
key2  [aa,bb,cd] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-13T12:30:10.977

您实际上想要随机重新关联键和值。这是一个如何实现的示例：

```
final Map<String, Object> x = new HashMap<String, Object>();
x.put("x", 1); x.put("y", 2); x.put("z", 3); x.put("w", 4);
System.out.println(x);
final List<Object> vs = new ArrayList<Object>(x.values());
Collections.shuffle(vs);
System.out.println(vs);
final Iterator<Object> vIter = vs.iterator();
for (String k : x.keySet()) x.put(k, vIter.next());
System.out.println(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:52:45.683

根据您对我在原始问题中的评论的回复，这是您如何获取地图中的所有值并将它们放入随机存储桶中的方法

```
Random random = new Random();
    Map<Integer,ArrayList<String> > shuffled = new HashMap<Integer, ArrayList<String>>();
    ArrayList<Integer> keys = new ArrayList<Integer>(trainDataSet.keySet());
    for (Integer key : keys) {
        shuffled.put(key, new ArrayList<String>());
    }
    for (ArrayList<String> values : trainDataSet.values()) {
        for (String string : values) {
            Integer randomKey = random.nextInt(keys.size());
            ArrayList<String> list = shuffled.get(randomKey);
            list.add(string);
            shuffled.put(randomKey, list);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-27T05:45:59.633

这对我有用：

```
Collections.shuffle(Arrays.asList(trainDataSet)); 
```

# c# - C#项目中的错误

> ID：10571713
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:27:19.137
> 
> 标签：c#, visual-studio-2010, windows-phone-7

这是我的两个功能：

```
 public void SetCompanies()
    //set the Companies table from Shret.net DataBase
    {
        try
        {
            WebClient webClient = new WebClient();
            Uri uri = new Uri("http://api.sherut.net/?method=Company");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

            try
            {
                webClient.OpenReadAsync(uri);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    void webClient_OpenReadCompleted(object sender, OpenWriteCompletedEventArgs e)
    {
        try
        {
            DataContractJsonSerializer serializer = null;
            var companies = (Companies)serializer.ReadObject(e.Result);
            foreach (Company c in companies.data)
            {
                MessageBox.Show(c.Name + " " + c.CompanyID);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
} 
```

这是我得到的错误：

> “'webClient_OpenReadCompleted' 没有重载匹配委托 'System.Net.OpenReadCompletedEventHandler'”

我不明白为什么，因为我在这个函数之后写了处理程序......提前谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T12:29:15.030

`OpenReadCompleted`不采取。`Open**Write**CompletedEventArgs`

# wordpress - WP_List_Table 中的自定义操作

> ID：10571714
> 
> 赞同：0
> 
> 时间：2012-05-13T12:27:54.847
> 
> 标签：wordpress, admin

使用`WP_List_Table`该类在管理员中创建表时，是否可以创建除`edit`and以外的自定义操作`delete`？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-13T12:30:52.660

是的，请参阅：[http](http://codex.wordpress.org/Class_Reference/WP_List_Table) ://codex.wordpress.org/Class_Reference/WP_List_Table 。

您使用的是哪个版本的 Wordpress？

如果您不仅想显示项目，还想操作它们，您必须定义一些操作。例如：

```
function column_booktitle($item) {
  $actions = array(
            'edit'      => sprintf('<a href="?page=%s&action=%s&book=%s">Edit</a>',$_REQUEST['page'],'edit',$item['ID']),
            'delete'    => sprintf('<a href="?page=%s&action=%s&book=%s">Delete</a>',$_REQUEST['page'],'delete',$item['ID']),
             );
  return sprintf('%1$s %2$s', $item['booktitle'], $this->row_actions($actions) );
} 
```

# java - Android NDK - 在不同的标头中包含 C++ 标头？

> ID：10571716
> 
> 赞同：4
> 
> 时间：2012-05-13T12:28:18.973
> 
> 标签：java, android, c++, android-ndk, javah

我有一个`Ability.h`依赖于文件的`Effect.h`文件。

我需要使用**javah**来生成我的头文件，但是我**无法**在我的`Ability.java`类中定义一个 Effect 依赖项，我希望从中生成 c++ 头文件。

例子：

```
public class Ability {

  static {
    System.loadLibrary("com_test_Effect");
    System.loadLibrary("com_test_Ability");
  }

  public native Effect foo(Effect x);

} 
```

**此代码生成一个没有**该函数的 *.h 文件`foo()`，就好像它无法识别它一样。如果我将返回类型交换为 int 并且不包含 com_test_Effect，它确实会生成一个正确的文件。

我确实在 Android.mk 文件中定义了两个模块（com_test_Effect 和 com_test_Ability）。

**如何在javah**生成的`Xyz.java`类中直接包含另一个 c++ 文件？ `*.h`

 **编辑：这个问题也可以这样问：有没有办法传递 C++ 类型的参数或从作为 C++ 和 Java 之间接口的函数返回 C++ 类型的值？（接口媒介是 JNI。）例如，您可以使用 int 等基本类型，然后将其转换为 jint 等。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T04:07:05.257

返回一个对象怎么样：

```
private native Object fooNative(Object x); 
```

然后对其进行转换，使其具有相同的签名：

```
public Effect foo(Effect x) {
    return (Effect)fooNative(x);
} 
```**

# linux - 加载不受信任的配置变量

> ID：10571721
> 
> 赞同：3
> 
> 时间：2012-05-13T12:29:00.100
> 
> 标签：linux, bash, shell

我正在开发一个 bash 提示项目，该项目对您当前所在目录中的不同状态起作用。

我现在需要的是一种从当前目录加载迷你配置的方法，这很容易用`. .params.conf`.您偶然发现了一个包含 .params.conf 文件的目录。

从这样的文件中加载变量的最佳方法是什么？变量将主要处于真/假状态，因此我不会以任何方式解析它们以便可以执行它。

可能的解决方案：

*   一个循环，加载每个预定义的变量是可能的，但我想保持代码可读。

*   将整个文件放在 bash 数组中是最好的解决方案，但是我怎样才能像这样在 bash 中填充键/值字典呢？

*   如果 bash 可以源文件只加载变量..

我还不知道 params.conf 文件的格式会是什么样子。但我认为最简单的方法是每个参数一行，用空格分隔。就像每行中的一个：`key value that can have space in it`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:17:31.823

`eval`可能[非常不安全](http://mywiki.wooledge.org/BashFAQ/048)，仍然可以执行恶意代码。最好使用`declare`：

```
while read varname value
do
    declare "$varname=$value"
done < .params.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:06:25.203

如果您的值不包含引号，则很容易：

```
while read varname value ; do
    eval $varname="'$value'"
done < .params.conf 
```

如果变量内有引号，则必须更加小心并添加一些转义。

# c# - 如何将摩擦力应用于这个物理模型？

> ID：10571723
> 
> 赞同：0
> 
> 时间：2012-05-13T12:29:29.317
> 
> 标签：c#, unity3d, game-physics

我正在尝试制作我的小引擎，以制作像这样的桌面冰球滑块[游戏](http://cdn.sweatband.com/Uber_Games_Shuffle_Puck_325x325.jpg)：

然后，我无法很好地移动冰球，因为我使用速度法线使加速度与速度矢量相反：

```
 velocity = ((Vector2) (initMousePosition - Input.mousePosition)).normalized*1.42f*Mathf.Min(1f,((Vector2) (initMousePosition - Input.mousePosition)).magnitude/Screen.height);
        acceleration = - velocity.normalized;
 ... 
```

这是我们有用的变量来解决我的问题：

**Board.COEFFICIENTE_OF_FRICTION = 0.1f；**

公共 Vector2 位置；

公共 Vector2 速度；

公共 Vector2 加速；

**代码**：

```
private static void Move()
{
    foreach(BoardObject obj in objects)
    {
        if (obj is Puck)
        {
            auxPuck = (Puck) obj;
            if (auxPuck.velocity.magnitude > 0f)
            {
                auxPuck.acceleration += (-auxPuck.acceleration * 9.8f*auxPuck.mass*Board.COEFFICIENTE_OF_FRICTION*Time.deltaTime);
                auxPuck.velocity +=  auxPuck.acceleration * Time.deltaTime;
                auxPuck.position += auxPuck.velocity * Time.deltaTime;

                if (VectorsChangeMagnitudeSign(auxPuck.velocity,auxPuck.velocity-auxPuck.acceleration*Time.deltaTime))
                {
                    auxPuck.acceleration = Vector2.zero;
                    auxPuck.velocity = Vector2.zero;
                }
            }
        }
    }
} 
```

也许我必须使用像 float 这样的加速度，或者从另一个不是速度归一化的向量开始。我的问题是当速度变大时，它似乎有一个奇怪的剩余速度，使它在最后不断移动。

知道我必须如何做到这一点才能顺利运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:42:26.813

对不起，我发现了问题。我告诉你了 。我开始使用归一化矢量，当我扔冰球时，问题来了，因为冰球改变了与墙壁的方向，然后加速休息减少了摩擦力，导致恒速。

对不起，谢谢你。

# java - 如何读取大文本文件 - java

> ID：10571724
> 
> 赞同：-2
> 
> 时间：2012-05-13T12:29:57.690
> 
> 标签：java, text, 7zip

我正在制作一个游戏，但是要安装它，它需要 7zip 来解压缩文件，所以我已经包含了 7zip 安装程序。我创建了一个带有 JTextArea 的 JFrame 来输入[7zip icense](http://www.7-zip.org/license.txt "7zip 许可证")，但是我无法让 BufferedReader 读取整个 txt 文件（它的 57 行，我认为这主要是因为 Bufferedreader 不是为读取那么多行而设计的。）你能请帮我阅读文件，以便我可以将许可证添加到游戏中。谢谢，杰克逊

编辑当你们为不知道的事情付钱给新手时，我感到非常喜欢-_-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:33:40.683

只需从文件中读取完整的文本。将它存储到一个`String`变量中，然后将该值放入 中`JTextArea`，因为 57 行存储在 JVM 的内存中并没有那么大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:47:45.793

我最近编写了一个程序，它使用 BufferedReader 从 gzip 文件中读取 11 亿行。

读取小至 57 行的整个文件的最简单方法是使用

```
String text = FileUtils.readFileToString(new File("uncompressedfile.txt")); 
```

或者

```
String text = FileUtils.readFileToString(new File("uncompressedfile.txt"), "UTF-8"); 
```

或者如果使用 gzip 压缩（与 7zip 类似）

```
String text = IOUtils.toString(new GZipInputStream("compressedfile.txt.gz")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:48:23.593

你可以通过两种方式做到这一点： -

1>使用扫描仪

```
void read() throws IOException {
    StringBuilder text = new StringBuilder();
    String NL = System.getProperty("line.separator");
    Scanner scanner = new Scanner(new FileInputStream(fFileName), fEncoding);
    try {
      while (scanner.hasNextLine()){
        text.append(scanner.nextLine() + NL);
      }
    }
    finally{
      scanner.close();
    }
    log("Text read in: " + text);
  } 
```

2>BufferredReader

```
static public String getContents(File aFile) {

    StringBuilder contents = new StringBuilder();

    try {

      BufferedReader input =  new BufferedReader(new FileReader(aFile));
      try {

        while (( line = input.readLine()) != null){
          contents.append(line);
          contents.append(System.getProperty("line.separator"));
        }
      }
      finally {
        input.close();
      }
    }
    catch (IOException ex){
      ex.printStackTrace();
    }

    return contents.toString();
  } 
```

57行不是那么大，bufferedreader已经被用来读取gb中的文件了：）

# iphone - iPhone App入店后发布iPad App

> ID：10571725
> 
> 赞同：2
> 
> 时间：2012-05-13T12:29:58.663
> 
> 标签：iphone

我已经开发了一个 iPhone 应用程序并准备将其上传到 iTunes 商店。稍后我也想要我目前正在开发的应用程序的 iPad 版本。

所以我想知道是否可以稍后发布 iPad 应用程序作为商店中现有应用程序的更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:32:31.473

只要 iPad 版本是通用捆绑包的一部分（同一应用程序中的 iPhone 和 iPad 资源），它就会被视为更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:12:21.387

是的。您可以通过更新使其通用，但在发布通用应用程序后，您**无法停止支持设备！**

如果您想上传不同的 iPad 版本（例如 AppXY HD），您也可以在同一个 Xcode 项目中创建它并将它们作为不同版本上传。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T12:32:39.380

我不相信你可以。但是，我认为您可以将其更新为通用应用程序。

大多数人只是将 iPad 版本分开并称之为 App HD 或提供通用版本。

# android - 将动态单选按钮添加到 RadioGroup

> ID：10571726
> 
> 赞同：0
> 
> 时间：2012-05-13T12:29:59.330
> 
> 标签：android

```
public class MCQSample extends Activity implements OnClickListener{

    TextView title;
    String gotBread;
    RadioGroup AnswerRG;
    int value ;
    int value1;

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mcqsample); 
        title = (TextView) findViewById(R.id.abc);
        nextP = (Button) findViewById(R.id.nextP);
        backP = (Button) findViewById(R.id.backP);
        AnswerRG = (RadioGroup) findViewById(R.id.AnswerRG);

            Bundle b = getIntent().getExtras();
            value = b.getInt("key", 0);

        }
    } 
```

大家好，我正在做 Android 应用程序并坚持创建动态单选按钮。因为我不知道我需要多少按钮（这取决于值 - 用户输入）。我阅读了一些可以添加到布局中的帖子，但我想添加到 radioGroup 中。有什么办法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T12:43:29.427

步骤#1：`RadioButton`通过它的构造函数创建一个新的并按照你认为合适的方式配置它。

步骤#2：调用`addView()`你`RadioGroup`的添加`RadioButton`到它。

第 3 步：没有第 3 步

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T12:47:51.270

尝试这种方式添加单选按钮`RadioGroup`：

```
private final int WC = RadioGroup.LayoutParams.WRAP_CONTENT;
RadioGroup.LayoutParams rParams;
AnswerRG = (RadioGroup) findViewById(R.id.AnswerRG);

RadioButton radioButton = new RadioButton(this);
radioButton.setText("Yellow");
radioButton.setId(1001);//set radiobutton id and store it somewhere
rParams = new RadioGroup.LayoutParams(WC, WC);
AnswerRG.addView(radioButton, rParams); 
```

# javascript - HTML5 历史 API 演示

> ID：10571734
> 
> 赞同：3
> 
> 时间：2012-05-13T12:30:57.980
> 
> 标签：javascript, html, html5-history

我一直在阅读有关 HTML5 历史 API 的内容，到目前为止，我还没有找到一个简单的工作演示来展示代码机制。

**这是一个有效的[jsfiddle](http://jsfiddle.net/KxkrV/)：4 个按钮和 4 个 div。**当用户按下一个按钮时，它会显示相应的面板。

我要做的是：

```
1) rewrite the URL so that when the user is on panel 4 the url ends with /Panel4
2) make the back button and forward button work with the history API. 
```

我知道有 history.js 插件，但我想了解 API 如何以最简单的形式工作。

希望 jsfiddle 能帮助到这个页面寻找代码演示的其他人。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T14:28:34.247

好的，我为你做了这个例子。从 HTML 代码（**index.html**）开始：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Stackoverflow</title>
        <script type="text/javascript" src="sof.js"> </script>
    </head>
    <body onLoad="load();">
        <ul id="menu">
            <li><a href="/home">home</a></li>
            <li><a href="/about">about</a></li>
            <li><a href="/blog">blog</a></li>
            <li><a href="/photos">photos</a></li>
        </ul>
        <button onclick="back ();">Back</button>
        <button onclick="ff ();">Forward</button>
        <div>
            Action: <span id="action"></span><br/>
            Url: <span id="url"></span><br/>
            Description: <span id="description"></span>
        </div>
    </body>
</html> 
```

然后是 javascript 文件（**sof.js**）：

var menu、url、description、action、data、historyState、act；

```
function $ (id) {return document.getElementById (id);}

// Updates infos
function update (state) {
    action.innerHTML = act;
    url.innerHTML = state.url;
    description.innerHTML = state.description;
}

// Goes back
function back () {
    act = 'Back';
    history.back ();
}

// Goes forward
function ff () {
    act = 'Forward';
    history.forward ();
}

function load () {
    menu = $ ('menu');
    url = $ ('url');
    description = $ ('description');
    action = $ ('action');

    // State to save
    historyState = {
        home: {
            description: 'Homepage'
        } ,
        about: {
            description: 'Infos about this website'
        } ,
        blog: {
            description: 'My personal blog'
        } ,
        photos: {
            description: 'View my photos'
        }
    };

    // This is fired when history.back or history.forward is called
    window.addEventListener ('popstate', function (event) {
        var hs = history.state;

        if ((hs === null) || (hs === undefined)) hs = event.state;
        if ((hs === null) || (hs === undefined)) hs = window.event.state;

        if (hs !== null) update (hs);
    });

    menu.addEventListener ('click', function (event) {
        var el = event.target;
        // Prevents url reload
        event.preventDefault ();

        // Handles anchors only
        if (el.nodeName === 'A') {
            // Gets url of the page
            historyState[el.innerHTML].url = el.getAttribute ('href');
            // Creates a new history instance and it saves state on it
            history.pushState (historyState[el.innerHTML], null, el.href);
            act = 'Normal navigation';
            update (historyState[el.innerHTML]);
        }
    });

    // Handles first visit navigation
    var index = location.pathname.split ('/');
    index = index[index.length-1];
    if (index !== '') {
        historyState[index].url = location.pathname;
        history.pushState (historyState[index], null, location.pathname);
        act = 'First visit';
        update (historyState[index]);
    }
} 
```

还有一个**.htaccess**用于直接请求：

```
RewriteEngine On

RewriteRule ^home$ ./index.html
RewriteRule ^about$ ./index.html
RewriteRule ^blog$ ./index.html
RewriteRule ^photos$ ./index.htm 
```

每次单击锚点时，都会将一个新的历史实例推送到历史堆栈并保存一个对象（称为状态）：更改本地 url，但通过 'event.preventDefault()' 方法停止加载。此外，更新了一些信息（如 URL、描述和操作）。

然后，使用“后退”和“前进”按钮，您可以浏览历史并使用“history.state”（或 event.state 或 window.event.state，这取决于浏览器）来检索当前状态。

最后，如果您直接在地址栏中输入整个 url，它的工作原理与上面的 .htaccess 相同；）

我希望这个例子对你有帮助；）

再见

威尔克

PS：更多详情：

1.  [处理浏览器历史记录](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)
2.  [历史对象](https://developer.mozilla.org/en/DOM/window.history)
3.  [历史指南](http://diveintohtml5.info/history.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T16:51:04.800

**好的，我创建了我认为最简单的历史 API 演示形式。**

它不能在 jsfiddle 中工作，因为它需要在自己的窗口中运行。但是，如果您将代码复制粘贴到记事本中，在指示的地方添加对 jquery 的引用，并将其作为 html 文件保存在桌面上，它将起作用。当然，它在 IE 中不起作用，但我们都知道。我提供了两个版本：一个没有 URL 重写组件（它可以在您的桌面上工作），我还注释掉了您可以操作 URL 的版本。对于后者，您需要从远程或本地服务器运行它。

我一直在努力让它在所有浏览器上运行，因为 Chrome、Safari 和 Firefox 的工作方式不同！这是代码：

```
 <html>
    <head>
    <style type="text/css">

    .Panel{
       width:200px;
       height:100px;
       background:red;
       display:none;
       color:white;
       padding:20px 20px;}

    .ChangeButton{
       margin:10px 10px;
       float:left;}   

    </style>

   // add reference to jquery.js file here 
   // <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>        

    <script type="text/javascript">

    var TheURL; // if you don't need URL rewrite, then we're always going to 
                // show the same URL. Remove this line if you want URL rewrite.

    var MyDivs = { // this object stores the name and the URL of each possible state
       ShowPanel1: {panelID:'Panel1', DisplayURL:'/panel1'},
       ShowPanel2: {panelID:'Panel2', DisplayURL:'/panel2'},
       ShowPanel3: {panelID:'Panel3', DisplayURL:'/panel3'},
       ShowPanel4: {panelID:'Panel4', DisplayURL:'/panel4'},
    };

    $(document).ready(function () {

    TheURL = document.URL; // You can remove this line if you're doing
                           // URL rewrite

    window.addEventListener('popstate', function (event) {

       //cross-browser nightmare here!!!!!
       var HistoryState = history.state;

       if (HistoryState === null || HistoryState === undefined) {
            HistoryState = event.state; }

       if (HistoryState === null || HistoryState === undefined) {
            HistoryState = window.event.state; }

       SwitchPanel(HistoryState);
    });

    $('.ChangeButton').click(function () {
           DoChange(parseInt($(this).attr('id').charAt(6), 10)); });

    DoChange(1);

    });

    function DoChange(ButtonID) {

       switch (ButtonID) {

       // here's the 2-version option: 
       // toggle the commented and uncommented history.pushState
       // lines to see the change to the URL in action
       case 1:
           SwitchPanel(MyDivs.ShowPanel1.panelID);
           history.pushState(MyDivs.ShowPanel1.panelID, "", TheURL);
           // history.pushState(MyDivs.ShowPanel1.panelID, "", MyDivs.ShowPanel1.DisplayURL);
           break;
       case 2:
           SwitchPanel(MyDivs.ShowPanel2.panelID);
           history.pushState(MyDivs.ShowPanel2.panelID, "", TheURL);
           // history.pushState(MyDivs.ShowPanel2.panelID, "", MyDivs.ShowPanel2.DisplayURL);
           break;
       case 3:
           SwitchPanel(MyDivs.ShowPanel3.panelID);
           history.pushState(MyDivs.ShowPanel3.panelID, "", TheURL);
           // history.pushState(MyDivs.ShowPanel3.panelID, "", MyDivs.ShowPanel3.DisplayURL);
           break;
       case 4:
           SwitchPanel(MyDivs.ShowPanel4.panelID);
           history.pushState(MyDivs.ShowPanel4.panelID, "", TheURL);
           // history.pushState(MyDivs.ShowPanel4.panelID, "", MyDivs.ShowPanel4.DisplayURL);
           break;
       }
    }

    function SwitchPanel(PanelID) {

       if (PanelID === null) {return false;}

       $('.Panel').hide();
       $('#' + PanelID).fadeIn('medium');
    }

    </script>
    </head>

    <body>

    <input type="button" id="Button1" class="ChangeButton" value="panel 1" />
    <input type="button" id="Button2" class="ChangeButton" value="panel 2" />
    <input type="button" id="Button3" class="ChangeButton" value="panel 3" />
    <input type="button" id="Button4" class="ChangeButton" value="panel 4" />

    <div id="PanelContainer" style="clear:both;">

       <div class="Panel" id="Panel1">panel 1</div>
       <div class="Panel" id="Panel2">panel 2</div>
       <div class="Panel" id="Panel3">panel 3</div>
       <div class="Panel" id="Panel4">panel 4</div>

    </div>

    </body>
    </html> 
```

如果它对您有用，请点赞。

**享受！**

# node.js - node.js 本机扩展与纯 js 模块

> ID：10571735
> 
> 赞同：3
> 
> 时间：2012-05-13T12:31:00.397
> 
> 标签：node.js

我正在编写一个新的 node.js 组件。我从头开始编写它 - 没有可重用的现有资产。构建原生扩展与纯 js 模块有哪些注意事项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T04:30:05.273

您应该尝试编写纯 js 模块。首先，它们更容易编写和维护。其次，它们是跨平台的。第三，我认为这也很重要，当你用纯 JavaScript 编写扩展时，你可能不会有内存泄漏。

当您完成纯 javascript 实现并且需要性能时/好的，我认为您不应该编写本机扩展。仅在性能低于标准时尝试此操作。

另外我相信他们正在改变完整的基础设施来编写本机扩展并且会使用[gyp](https://github.com/TooTallNate/node-gyp)来代替？

# html - authorized.net 国名含糊不清

> ID：10571740
> 
> 赞同：1
> 
> 时间：2012-05-13T12:31:44.420
> 
> 标签：html, authorize.net

嗨，我正在一个网站上工作并集成 authorize.net 支付网关。我正在考虑为国家名称添加一个下拉列表，将“美利坚合众国”作为国家变量传递吗？还是我应该使用“美国”？我应该为每个国家/地区使用 ISO 代码吗？我尝试了测试开发者帐户，但它似乎接受我传递给它的所有内容都是正确的！

~阿吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:53:11.713

我知道 authorize.net 不需要国名。查看他们是否验证它们的一种简单方法是通过生产网关运行事务，传递一个无意义的值并查看事务是否仍然通过。

如果您确实标准化以支持 authorize.net（或出于其他原因），我建议您使用国家代码而不是全名。代码似乎不太经常更改，也可以用作标识符。例如，我有一个应用程序可以显示大约 200 个国家/地区的数据；我有标志图标（每个国家/地区有多种尺寸），其名称中使用 2 位国家/地区代码。使用代码使得这很容易实现和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T00:12:24.397

根据他们的[AIM 指南](http://www.authorize.net/support/AIM_guide.pdf)：

> **x_country** : 可选
> **值：**客户账单所在的国家/地区
> **格式**：最多 60 个字符（无符号）

# sql - PostgreSQL 函数返回任意类型

> ID：10571741
> 
> 赞同：3
> 
> 时间：2012-05-13T12:31:49.787
> 
> 标签：sql, postgresql, plpgsql, plv8

有没有办法让 PostgreSQL 中的函数返回任意类型？

我正在尝试使用 PLV8 从 PostgreSQL 9.2 中的 JSON 类型中获取和比较字段。

以下作品：

```
CREATE or replace FUNCTION jn (j json, key any ) RETURNS numeric 
LANGUAGE plv8   
IMMUTABLE 
AS $function$  
  var ej = JSON.parse(j);   
  if (typeof ej != 'object') return NULL;   
  return JSON.stringify(ej[key]);  
$function$;

SELECT * FROM things WHERE jn(data,'count') <= '10'; 
```

返回计数字段<= 10的位置。但是，如果该字段不是数字，它将失败。我不想为我的 json 可能持有的每种类型的数据创建一个特定的函数，有没有办法以某种方式推断数据类型并隐式转换？

另请参阅[如何使用新 PostgreSQL JSON 数据类型中的字段进行查询？](https://stackoverflow.com/questions/10560394/how-do-i-query-using-fields-inside-the-new-postgresql-json-datatype)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:46:39.520

您似乎正在寻找具有[多态类型](http://www.postgresql.org/docs/current/interactive/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC)的函数。
阅读上面关于类型的部分和[本节](http://www.postgresql.org/docs/current/interactive/plpgsql-declarations.html#PLPGSQL-DECLARATION-PARAMETERS)中的最后 2 个示例。

请注意，`key`参数的类型和函数的输出应该匹配。如果这不是您的情况，那么您可能应该返回`text`然后将其转换为函数外部的正确类型。

我认为这将为您完成工作：

```
CREATE or replace FUNCTION jn (j json, key anyelement ) RETURNS anyelement
LANGUAGE plv8   
IMMUTABLE 
AS $function$  
  var ej = JSON.parse(j);   
  if (typeof ej != 'object') return NULL;   
  return JSON.stringify(ej[key]);  
$function$; 
```

抱歉，我周围没有 9.2 服务器，所以我无法对此进行测试。

* * *

**编辑：**

事情是——在你能够在函数中执行任何强制转换之前，必须先创建它。在创建时函数的输入参数的类型和返回类型是固定的。这意味着您只有两种可能性：

*   使用`anyelement`类型，这将强制您拥有`key`与您希望从函数返回的类型相同的参数；
*   在函数外使用`text`类型和强制转换结果。

由于`PLV8`还不支持`anyelement`类型，您实际上可以在 PL/pgSQL 上创建一个包装函数来为您完成这项工作：

```
CREATE FUNCTION jn_wrap(jn varchar, key anyelement, OUT ret anyelement)
    AS $js_wrap$
BEGIN
    EXECUTE 'SELECT CAST(jn($1, $2) AS '||pg_typeof(key)||')'
        USING jn, key INTO ret;

    RETURN ;
END;
$js_wrap$ LANGUAGE plpgsql; 
```

尽管我认为这可能很典型，但它`key`的类型将与所需的返回类型不同。

# delphi - 如何防止 Delphi 应用程序在启动时创建 GLScene 日志文件？

> ID：10571749
> 
> 赞同：3
> 
> 时间：2012-05-13T12:32:56.090
> 
> 标签：delphi, delphi-xe2, glscene

我的 delphi 应用程序在启动时创建以下 .log 文件：

```
0    (I)    Thread ID 6168  Log subsystem started in elapsed time mode.
0    (I)    Thread ID 4620  Service thread started
312  (i)    Thread ID 4620  Temporary rendering context created
312  (I)    Thread ID 4620  Getting OpenGL entry points and extension
... 
```

控制在哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-13T13:56:42.410

检查 GLScene.inc

```
// Activate Logging
{$DEFINE GLS_LOGGING} 
```

要关闭注销，您必须注释掉该定义

```
// Activate Logging
{.$DEFINE GLS_LOGGING} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T13:57:25.280

是的，这是 GLScene 进行日志记录。您可以通过确保未在文件中`GLS_LOGGING`定义条件来禁用它。`GLScene.inc`

# eclipse - 将 grails 2.0.3 应用程序部署到 cloudfoundry 而不使用 cloudfoundry grails-plugin？

> ID：10571752
> 
> 赞同：0
> 
> 时间：2012-05-13T12:33:14.477
> 
> 标签：eclipse, tomcat, grails, grails-orm, cloud-foundry

我可以使用 Cloud Foundry grails 插件和 cf-push 将我的 grails 2.0.3 应用程序部署到云端，一切正常。

现在我想使用 sts/eclipse cloud Foundry 扩展来使用 eclipse 进行部署（而不是使用 grails 命令 cf-push！）并在服务器视图中查看服务器实例等等。

我使用 eclipse 插件创建了一个新的 cloudfoundry 实例，它部署但中止并显示错误消息：

```
May 14, 2012 10:39:21 AM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-19036
May 14, 2012 10:39:21 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 377 ms
May 14, 2012 10:39:21 AM org.apache.catalina.realm.JAASRealm setContainer
INFO: Set JAAS app name Catalina
May 14, 2012 10:39:21 AM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
May 14, 2012 10:39:21 AM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
May 14, 2012 10:39:21 AM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory ROOT

Configuring Spring Security Core ...
... finished configuring Spring Security Core

May 14, 2012 10:39:32 AM org.apache.catalina.core.StandardContext start
SEVERE: Error listenerStart
May 14, 2012 10:39:32 AM org.apache.catalina.core.StandardContext start
SEVERE: Context [] startup failed due to previous errors
May 14, 2012 10:39:32 AM org.apache.catalina.loader.WebappClassLoader         clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named    [net.sf.ehcache.CacheManager@1edb587] but has failed to stop it. This is very likely to create   a memory leak.
May 14, 2012 10:39:32 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [projectBee.Requestmap.data] but has failed to stop it. This is very likely to create a memory leak.
May 14, 2012 10:39:32 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [projectBee.Role.data] but has failed to stop it. This is very likely to create a memory leak.
May 14, 2012 10:39:32 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [org.hibernate.cache.UpdateTimestampsCache.data] but has failed to stop it. This is very likely to create a memory leak.
May 14, 2012 10:39:32 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: The web application [] appears to have started a thread named [org.hibernate.cache.StandardQueryCache.data] but has failed to stop it. This is very likely to create a memory leak.

Stopping Tomcat because the context stopped. 
```

这里有人知道这个问题的解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T03:16:35.027

您需要查看包含堆栈跟踪和详细错误消息的真实日志文件。使用 vmc 命令行客户端或 STS。有一个 /logs 文件夹可能没有你想要的，但也有一个 /tomcat/logs 可能有。另请查看 stacktrace.log。

# android-viewpager - 如何在 API 12.0 中使用 ViewPager 和 FragmentStatePagerAdapter？

> ID：10571758
> 
> 赞同：1
> 
> 时间：2012-05-13T12:34:20.067
> 
> 标签：android-viewpager, android

我正在为平板电脑 API 3.0 编写应用程序。如何在我的项目中包含 ViewPager 和 FragmentStatePagerAdapter？我是否必须使用兼容性包或此功能包含在 API 3.0 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:37:51.490

是的，您需要在您的应用程序中添加 v4 的 Android 兼容库，或者您也可以使用[actionbarsherlok](http://actionbarsherlock.com/)库

# drupal - 翻译购物车/结帐页面中的账单信息

> ID：10571759
> 
> 赞同：0
> 
> 时间：2012-05-13T12:34:31.580
> 
> 标签：drupal, ubercart

我需要你的帮助 我在这个问题上花了一个星期没有任何解决方案 我想翻译购物车/结帐页面中的账单信息我不知道怎么做？？

我使用翻译界面但没有翻译名字等...请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:06:45.703

在这里试试[http://your_site.com/admin/store/settings/countries/fields](http://your_site.com/admin/store/settings/countries/fields)

# git - 跨多个站点管理 git

> ID：10571760
> 
> 赞同：2
> 
> 时间：2012-05-13T12:34:33.417
> 
> 标签：git, version-control, repository, infrastructure

我们的场景是我们的组织位于几个地理位置。

我想设置一个 git 中央服务器，以便每个分布式团队都可以将他们的更改推送到其中并与其他团队共享。

我想知道做这种事情的最佳选择是什么。

我能想到的当前2个选项是：

1.  所有全球团队的中央服务器。
2.  *每个*地理站点一台中央服务器。在服务器之间设置某种自动推送以保持同步。
3.  托管解决方案。

虽然#3 目前不是我们组织 AFAIK 的选项，但还有其他选择吗？什么是最好的选择？

我假设已经有一些指导方针和最佳实践来解决这个特定问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:37:06.187

你真的需要多个“中央服务器”吗？为什么不让所有团队都使用一个存储库。大部分 gits 工作都是离线完成的，甚至必须与网络通信的部分也得到了相当优化。我认为只有一个中央存储库不会有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:37:47.823

我的第一反应是简单地设置一个 github“组织”并通过它管理您组织的私有存储库。有很多好处——包括备份正在处理的数据，让非常了解 git 的人管理基础设施等。

但是，如果公司由于某种原因无法做到这一点，我建议尽可能拥有一个单一的全局存储库。

然后每个人都可以简单地克隆中央存储库并将更改拉/推到它。添加额外的存储库会增加复杂性和风险，例如：

*   必须备份多个服务器以确保存储库是安全的
*   必须有流程来确保不同的存储库都相互推/拉更改。
*   让一些团队没有足够频繁地同步他们的区域存储库。
*   跟踪通过其他存储库中的提交引入的错误。

据我所知，拥有区域服务器也没有真正的好处。

# java - 无法理解警告消息：预期： 但是是：

> ID：10571765
> 
> 赞同：-2
> 
> 时间：2012-05-13T12:36:52.717
> 
> 标签：java, jdbc

我在单元测试中收到此消息`expected:<interface java.sql.Connection> but was:<class com.mysql.jdbc.JDBC4Connection>`

从我的代码：

```
@Test
public void connectionTest() throws SQLException{
    Connection conn = ConnectionManager.createConnection();
    assertEquals(Connection.class, conn.getClass());
    conn.close();
} 
```

我用于获取连接的模拟类：

```
public class ConnectionManager {

    @SuppressWarnings("unused")
    public static Connection createConnection() throws SQLException {
        String url = "jdbc:mysql://localhost:3306/library";
        String name = "root";
        String password = "root";
        Connection connection = null;
        try {
            Class.forName("com.mysql.jdbc.Driver");
            connection =  DriverManager.getConnection(url, name, password);
        } catch (ClassNotFoundException e) {
            if (connection != null){
                connection.close();
            }
            throw new SQLException(e);
        }
        return connection;
    }
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:37:59.643

您的断言从根本上是错误的。

`Connection.class`是一个接口。
`conn.getClass()`将返回一个实现该接口的具体类。

# assembly - 在 VirtualBox 上运行操作系统

> ID：10571771
> 
> 赞同：6
> 
> 时间：2012-05-13T12:37:28.613
> 
> 标签：assembly, operating-system, virtualbox, nasm, bin

我在 Windows 7 上使用 VirtualBox 4.1.14，并试图让它运行我的测试操作系统。我正在使用下面的汇编代码，我正在编译它

nasm -f bin -o boot.bin boot.asm

我正在尝试将生成的 bin 文件转换为 VB4.1.14 可以使用的 ISO（我不想花钱或受到试用程序的任何限制）。我曾尝试下载不同的转换器，如 bin2iso，但每当我尝试打开其中的生成 ISO 时，VB 都会出现不同的错误，如 VERR_NOT_SUPPORTED 等。

我希望该解决方案是一个命令行工具，这样我就可以在批处理脚本中使用它来加快测试速度。

```
BITS 16

start:
    mov ax, 07C0h       ; Set up 4K stack space after this bootloader
    add ax, 288     ; (4096 + 512) / 16 bytes per paragraph
    mov ss, ax
    mov sp, 4096

    mov ax, 07C0h       ; Set data segment to where we're loaded
    mov ds, ax

    mov si, text_string ; Put string position into SI
    call print_string   ; Call our string-printing routine

    jmp $           ; Jump here - infinite loop!

    text_string db 'This is my cool new OS!', 0

print_string:           ; Routine: output string in SI to screen
    mov ah, 0Eh     ; int 10h 'print char' function

.repeat:
    lodsb           ; Get character from string
    cmp al, 0
    je .done        ; If char is zero, end of string
    int 10h         ; Otherwise, print it
    jmp .repeat

.done:
    ret

    times 510-($-$$) db 0   ; Pad remainder of boot sector with 0s
    dw 0xAA55       ; The standard PC boot signature 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-13T13:10:39.870

您可以使用 dd（在 dd 中搜索 windows）为初学者创建软盘。二进制文件仅写入 1440 kib 文件的前 256 个字节。

```
dd if=/dev/zero of=floppy.img ibs=1k count=1440
dd if=boot.img of=floppy.img conv=notrunc 
```

现在我们开始：

![](../Images/6ec9a0533ca48989ae23d5decf9c3723.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T22:18:48.053

您可以使用此答案中的`mkisofs`工具来[回答不同的问题](https://stackoverflow.com/a/7776577/968261)。该工具也可用于 Linux。

# java - Java - 套接字继承

> ID：10571777
> 
> 赞同：0
> 
> 时间：2012-05-13T12:38:23.757
> 
> 标签：java, inheritance

我编写了一个扩展 Socket 类的类 - 目的是保留常规套接字的所有方法，同时添加我自己的两个方法：

```
public class ClientSocket extends Socket{

private long lastOnline;

public ClientSocket() {
      super();
}

public long getLastOnline() {
    return lastOnline;
}

public void setLastOnline(long lastOnline) {
    this.lastOnline = lastOnline;
} 
```

当我尝试初始化此类的新实例并向其添加打开的套接字时，我做错了（或者我可能有问题），它告诉我无法将套接字设置为ClientSocket 对象（虽然它扩展了 Socket）：

```
ClientSocket socket = serverSocket.accept(); 
```

我该如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T12:40:22.713

`serverSocket.accept()`返回一个普通的`Socket`，而不是一个`ClientSocket`。
A`ClientSocket` *是 a* `Socket`，但反之则不然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:39:44.627

您可以使用[组合](http://www.javapractices.com/topic/TopicAction.do?Id=72)：

```
public class ClientSocket {

    private final Socket socket;
    private long lastOnline;

    public ClientSocket(Socket socket) {
        this.socket = socket;
    }

    public long getLastOnline() {
         return lastOnline;
    }

    public void setLastOnline(long lastOnline) {
        this.lastOnline = lastOnline;
    }

    ...
} 
```

然后创建一个ClientSocket：

```
ClientSocket clientSocket = new ClientSocket(serverSocket.accept()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:40:19.587

作为记录，我相信您的特殊情况最好通过*组合*而不是*继承*来解决。Aka，最好包装通过检索的套接字`accept`，而不是像现在一样尝试子类化。有一本好书（Joshua Bloch 的 Effective Java）描述了何时使用组合而不是继承。阅读后，如果您认为继承适合您的用例，您可以为套接字实现它，如下所示*：*

**更专业的套接字实现：**

```
public class AuditableClientSocket extends Socket {
   private long lastPacketReceived = -1;

   // Constructors removed for brevity. Add them back here

   public long getLastPacketReceived() {
      return lastPacketReceived;
   }

   protected void setLastPacketReceived(long lastPacketReceived) {
      this.lastPacketReceived = lastPacketReceived;
   }

   public String formatLastReceived() {
      if (lastPacketReceived < 0)
         return "Never";

      return new Date(lastPacketReceived).toString();
   }
} 
```

**能够创建专用套接字的服务器套接字实现：**

```
public class AuditableClientServerSocket extends ServerSocket {

   // Constructors removed for brevity. Add them back here

   @Override
   public Socket accept() throws IOException {
      if (isClosed())
         throw new SocketException("Socket is closed");
      if (!isBound())
         throw new SocketException("Socket is not bound yet");
      final Socket s = new AuditableClientSocket((SocketImpl) null);
      implAccept(s);
      return s;
   }
} 
```

**测试类：**

```
public class AuditableClientServer implements Runnable {
   public static void main(String[] args) {
      AuditableClientServer server = new AuditableClientServer();
      new Thread(server).start();
   }

   private AuditableClientServerSocket serverSocket = null;

   public void run() {

      try {
         serverSocket = new AuditableClientServerSocket(5656);
         final AuditableClientSocket sock = (AuditableClientSocket) serverSocket.accept();
         System.out.printf(
               "Client connected at %s. Last received packet at %s",
               new Date(), sock.formatLastReceived());

         sock.close();
         serverSocket.close();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}

public class AuditableClient {
   public static void main(String[] args) {
      try {
         Socket s = new Socket("localhost", 5656);
         s.close();
      } catch(IOException ioe) {
         ioe.printStackTrace();
      }
   }
} 
```

# database - 键/值存储中的事务

> ID：10571781
> 
> 赞同：1
> 
> 时间：2012-05-13T12:38:40.513
> 
> 标签：database, key-value-store

著名的键/值存储中哪个也有事务支持？我们只需要在事务中交错操作并时不时回滚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-15T06:07:41.467

以防将来有人偶然发现这一点。

[FoundationDB](https://en.m.wikipedia.org/wiki/FoundationDB)完全是 ACID

看起来基础数据库已经消失，这不再相关链接已更新到维基百科

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:43:29.503

就个人而言，我建议使用 REDIS。我已经将它用于许多不同的应用程序，它可靠、快速并且有一个很棒的社区。

它完全支持事务：这里是关于[REDIS 事务支持的信息](http://redis.io/topics/transactions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:43:14.963

我对 KV 数据库不是很了解，但我想到了[Berkeley DB](http://en.wikipedia.org/wiki/Berkeley_DB)。

# php - 如何定位我的自定义标记附近的地方

> ID：10571785
> 
> 赞同：0
> 
> 时间：2012-05-13T12:39:20.437
> 
> 标签：php, javascript, google-maps-api-3

我有一个在谷歌地图上创建标记的网络应用程序，我想知道是否有某种方法可以定位我的自定义标记附近的位置，以便用户可以看到它们周围的东西。

先感谢您，

罗伯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:55:04.793

**Places Library** [^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#PlacesService)提供您寻找的信息。您可以通过将`libraries=places`参数添加到加载 Google 地图的 URL 来加载库，如下所示：

```
<script type="text/javascript"
    src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false">
</script> 
```

然后您使用类似于此的代码请求有关地点的数据，该代码从 Developer's Guide 的[**Place Search Requests**部分](https://developers.google.com/maps/documentation/javascript/places#place_search_requests)复制，它将搜索变量中定义的点 500 米内的商店`pyrmont`：

```
var map;
var service;
var infowindow;

function initialize() {
  var pyrmont = new google.maps.LatLng(-33.8665433,151.1956316);

  map = new google.maps.Map(document.getElementById('map'), {
      mapTypeId: google.maps.MapTypeId.ROADMAP,
      center: pyrmont,
      zoom: 15
    });

  var request = {
    location: pyrmont,
    radius: '500',
    types: ['store']
  };

  service = new google.maps.places.PlacesService(map);
  service.search(request, callback);
}

function callback(results, status) {
  if (status == google.maps.places.PlacesServiceStatus.OK) {
    for (var i = 0; i < results.length; i++) {
      var place = results[i];
      createMarker(results[i]);
    }
  }
} 
```

# objective-c - 如何更新 Core Data 中的现有对象？

> ID：10571786
> 
> 赞同：63
> 
> 时间：2012-05-13T12:39:29.233
> 
> 标签：objective-c, core-data

当我插入新对象时，我使用以下代码：

```
NSManagedObjectContext *context = [appDelegate managedObjectContext];

Favorits *favorits = [NSEntityDescription insertNewObjectForEntityForName:@"Favorits" inManagedObjectContext:context];

favorits.title = @"Some title";

NSError *error;                    
if (![context save:&error]) {
    NSLog(@"Whoops");
} 
```

如何更新核心数据中的现有对象？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-05-13T13:28:32.730

更新就像创建一个新的一样简单。

要更新特定对象，您需要设置一个`NSFetchRequest`. 此类相当于 SQL 语言中的 SELECT 语句。

这里有一个简单的例子：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:[NSEntityDescription entityForName:@"Favorits" inManagedObjectContext:moc]];

NSError *error = nil;
NSArray *results = [moc executeFetchRequest:request error:&error];

// error handling code 
```

该数组`results`包含 sqlite 文件中包含的所有托管对象。如果要获取特定对象（或更多对象），则需要对该请求使用谓词。例如：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title == %@", @"Some Title"];
[request setPredicate:predicate]; 
```

在这种情况下`results`，包含 title 等于 的对象`Some Title`。设置谓词等于将 WHERE 子句放在 SQL 语句中。

有关更多信息，我建议您阅读 Core Data 编程指南和`NSFecthRequest`课程参考。

*   [核心数据编程指南](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreData/index.html)

*   [NSFecthRequest 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)

希望能帮助到你。

**编辑**（可用于更新的片段）

```
// maybe some check before, to be sure results is not empty
Favorits* favoritsGrabbed = [results objectAtIndex:0];    
favoritsGrabbed.title = @"My Title";

// save here the context 
```

或者如果您没有使用`NSManagedObject`子类。

```
// maybe some check before, to be sure results is not empty
NSManagedObject* favoritsGrabbed = [results objectAtIndex:0];
[favoritsGrabbed setValue:@"My title" forKey:@"title"];

// save here the context 
```

在这两种情况下，如果您`save`对上下文执行操作，数据将被更新。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-13T13:16:56.177

您必须从上下文中[获取](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdFetching.html)对象，更改所需的属性，然后像在示例中一样保存上下文。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-25T06:28:42.320

我希望这会帮助你。因为它对我有用。

```
 NSMutableArray *results = [[NSMutableArray alloc]init];
int flag=0;
NSPredicate *pred;
if (self.txtCourseNo.text.length > 0) {
    pred =  [NSPredicate predicateWithFormat:@"courseno CONTAINS[cd] %@", self.txtCourseNo.text];
    flag=1;
} else {
    flag=0;
    NSLog(@"Enter Corect Course number");
}

if (flag == 1) {

    NSLog(@"predicate: %@",pred);
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc]initWithEntityName:@"Course"];
    [fetchRequest setPredicate:pred];
    results = [[self.context executeFetchRequest:fetchRequest error:nil] mutableCopy];

    if (results.count > 0) {
        NSManagedObject* favoritsGrabbed = [results objectAtIndex:0];
        [favoritsGrabbed setValue:self.txtCourseName.text forKey:@"coursename"];
        [self.context save:nil];
        [self showData];
    } else {
        NSLog(@"Enter Corect Course number");
    }

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-05-22T04:36:43.730

如果你是一个快速的程序员，这可以帮助你：

如果你想删除一个 NSManagedObject

在我的情况下，ID 是实体 STUDENT 的唯一属性

```
/** for deleting items */

func delete(identifier: String) {

    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext
    let fetchRequest:NSFetchRequest<NSFetchRequestResult> = NSFetchRequest.init(entityName: "STUDENT")
    let predicate = NSPredicate(format: "ID = '\(identifier)'")
    fetchRequest.predicate = predicate
    do
    {
        let object = try context.fetch(fetchRequest)
        if object.count == 1
        {
            let objectDelete = object.first as! NSManagedObject

                 context.delete(objectDelete)
        }
    }
    catch
    {
        print(error)
    }
} 
```

如果要更新 NSManagedObject ：

```
/** for updating items */
func update(identifier: String,name:String) {

    let context = (UIApplication.shared.delegate as! AppDelegate).persistentContainer.viewContext
    let fetchRequest:NSFetchRequest<NSFetchRequestResult> = NSFetchRequest.init(entityName: "STUDENT")
    let predicate = NSPredicate(format: "ID = '\(identifier)'")
    fetchRequest.predicate = predicate
    do
    {
        let object = try context.fetch(fetchRequest)
        if object.count == 1
        {
            let objectUpdate = object.first as! NSManagedObject
            objectUpdate.setValue(name, forKey: "name")
            do{
                try context.save()
            }
            catch
            {
                print(error)
            }
        }
    }
    catch
    {
        print(error)
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-12T05:44:41.943

I saw an answer in Objective-C which helped me. I am posting an answer for Swift users -

```
guard let appDelegate = UIApplication.shared.delegate as? AppDelegate else {
    return
}
let updateCont = appDelegate?.persistentContainer.viewContext
let pred = NSPredicate(format: "your_Attribute_Name = %@", argumentArray : [your_Arguments])
let request = NSFetchRequest<NSFetchRequestResult>(entityName: "your_Entity_Name")
request.predicate = pred

do {
    let resul = try updateCont?.fetch(request) as? [NSManagedObject]
    let m = resul?.first
    m?.setValue(txtName.text, forKey: "your_Attribute_Name_Whose_Value_Should_Update")
    try? updateCont?.save()
} catch let err as NSError {
    print(err)
} 
```

# objective-c - Objective-C 使用变量名访问浮点 getter

> ID：10571792
> 
> 赞同：3
> 
> 时间：2012-05-13T12:40:42.853
> 
> 标签：objective-c

假设我有`NSArray`一个s ( `myArray`, , )`NSString``@"a0"``@"a1"``@"a2"`

然后在快速枚举中，我循环进入我的数组以根据该 NSStrings 构建属性。我在访问该属性时遇到问题。

我正在尝试这样的事情：

```
@property (nonatomic) float a0propertyLow;
@property (nonatomic) float a0propertyHigh;
@property (nonatomic) float a1propertyLow;
@property (nonatomic) float a1propertyHigh;
..
.. etc.

for (NSString *aPos in myArray) {
    NSString *low = [NSString stringWithFormat:@"%@propertyLow",aPos];
    NSString *high = [NSString stringWithFormat:@"%@propertyHigh",aPos];
    SEL lowSel = NSSelectorFromString(low);
    SEL highSel = NSSelectorFromString(high);
    if ([self respondsToSelector:lowSel]&&[self respondsToSelector:highSel]) {
        id sumPartOne = [self performSelector:lowSel];
        id sumPartTwo = [self performSelector:highSel];
        float bla = (float)sumPartOne + (float)sumPartTwo;
    }
} 
```

我知道我的代码是错误的，但我不知道如何使它工作。我的问题是 lowSel 和 highSel 是返回的 getter，`float`但是执行选择器方法返回的方法`id`对对象来说是可以的，但对 s 来说是不行`float`的。

那么，如何使用变量名访问我的浮动吸气剂？我敢肯定答案一定很简单，但似乎我的大脑正在寻找一些复杂的东西（而且这显然不起作用）所以我正在寻求帮助:)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T12:51:12.593

您不能`performSelector:`用来调用返回标量值的方法。文档`performSelector:`清楚地说明了您必须做什么：

> 对于返回对象以外的任何内容的方法，请使用`NSInvocation`.

An`NSInvocation`设置起来有点复杂，但在参数和返回类型方面更灵活。

在您的情况下，使用键值编码可能更容易：

```
[self valueForKey:low]; 
```

将返回类型考虑在内，并会自动`float`将`NSNumber`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:51:31.147

如果您确实需要使用这些 getter 方法，可以将属性更改为`double`并使用 objc_msgSend_fpret()：

```
#include <objc/runtime.h>
#include <objc/message.h>

double arg0 = objc_msgSend_fpret(self, lowSel); 
```

如果您可以避免 getter（我知道，这不是一个好习惯，但无论如何，它肯定适用于以下方法），并直接使用实例变量：

```
void *object_getIvarPtr(id obj, const char *name)
{
    if (!obj || !name)
    {
        return NULL;
    }

    Ivar ivar = object_getInstanceVariable(obj, name, NULL);

    if (!ivar)
    {
        return NULL;
    }

    return ((char *)obj + ivar_getOffset(ivar));
}

float arg0 = *(float *)object_getIvarPtr(self, [lowSel UTF8String]); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-13T12:55:22.190

您可以做的一种方法是在运行时将您的浮点数转换为对象，例如：-

```
NSString *str=[NSSTring stringWithFormat:@"%f",yourFloatValue]; 
```

然后你可以使用它来检索它

```
[str floatValue]; 
```

# c++ - C++：写入/读取无效/超出范围的数组索引？

> ID：10571794
> 
> 赞同：2
> 
> 时间：2012-05-13T12:41:07.023
> 
> 标签：c++, arrays, indexing

首先，我是 C++ 编程的初学者。昨天我遇到了一件很奇怪的事情。我试图通过指向它的指针来确定数组的长度。由于*sizeof*不起作用，我做了一点谷歌搜索，最后在这个网站上找到了不可能的答案。相反，我应该在数组的最后一个索引处放置一个超出界限的值，并增加一个计数器，直到达到这个索引。因为我不想覆盖最后一个索引中包含的信息，所以我尝试将超出界限的值放在最后一个索引之后。我预计它会失败，但由于某种原因它没有。

我认为我在其他地方犯了一个错误，并且数组比我分配的要长，所以我做了以下测试：

```
int a[4];
a[20] = 42;
std::cout << a[20]; 
```

输出为 42，没有任何错误。为什么这行得通？这根本不应该有效，对吧？更有趣的是它适用于任何原始类型数组。但是，一旦我使用 std::string 程序立即以 1 存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-13T12:45:22.773

您的系统恰好没有使用恰好是`20 * sizeof(int)`距数组地址更远的字节的内存。（从一开始。）或者内存属于你的进程，因此你可以弄乱它，要么自己破坏一些东西，要么只是幸运的巧合什么都不破坏。

底线，不要那样做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:07:12.003

我认为您需要了解以下内容：
当您创建`a[4]`编译器时，为 4 个整数分配内存并记住`a`第一个整数的地址：（`*a == &(a[0])`）。
当您读\写时，编译器不会检查您是否在界限内（因为他不再拥有此信息）。只需按以下方式转到请求的数组单元的地址：`a[X] == &(a + sizeof(int) * X)`
在 C++ 中，访问数组时检查边界是程序员的责任。

# macos - PyQt配置和安装错误

> ID：10571796
> 
> 赞同：1
> 
> 时间：2012-05-13T12:41:25.650
> 
> 标签：macos, qt, pyqt, maya, python-sip

我正在尝试在我的 Macbook pro 上安装 PyQt for Maya。我已经成功安装了 Qt 和 Sip，但我无法安装 PyQt。

我正在使用的版本是

OSX 10.6.8、Qt 4.7.1 - 修改后的 Autodesk Qt、Sip 4.13.2、PyQt 4.9.1

配置 pyqt 时成功，但构建时失败。我认为这可能与配置中使用的目录 /Users/warnold 有关。它被列出了四次，但该目录不存在，我不知道它来自哪里。Qt 安装在 /usr/local/Trolltech/Qt-4.7.1

配置我得到以下信息：

```
export QTDIR=/usr/local/Trolltech/Qt-4.7.1/
export PATH=/usr/local/Trolltech/Qt-4.7.1/bin:$PATH
export QMAKESPEC=/usr/local/Trolltech/Qt-4.7.1/mkspecs/macx-g++
export DYLD_LIBRARY_PATH=/usr/local/Trolltech/Qt-4.7.1/lib/
/Applications/Autodesk/maya2013/Maya.app/Contents/bin/mayapy configure.py LIBDIR_QT=/usr/local/Trolltech/Qt-4.7.1/lib INCDIR_QT=/usr/local/Trolltech/Qt-4.7.1/include MOC=/usr/local/Trolltech/Qt-4.7.1/bin/moc --no-designer-plugin --use-arch=x86_64

Determining the layout of your Qt installation...
This is the GPL version of PyQt 4.9.1 (licensed under the GNU General Public
License) for Python 2.6.4 on darwin.

Type '2' to view the GPL v2 license.
Type '3' to view the GPL v3 license.
Type 'yes' to accept the terms of the license.
Type 'no' to decline the terms of the license.

Do you accept the terms of the license? yes             
Found the license file pyqt-gpl.sip.
Checking to see if the QtGui module should be built...
Checking to see if the QtHelp module should be built...
Checking to see if the QtMultimedia module should be built...
Checking to see if the QtNetwork module should be built...
Checking to see if the QtDBus module should be built...
Checking to see if the QtDeclarative module should be built...
Checking to see if the QtOpenGL module should be built...
Checking to see if the QtScript module should be built...
Checking to see if the QtScriptTools module should be built...
Checking to see if the QtSql module should be built...
Checking to see if the QtSvg module should be built...
Checking to see if the QtTest module should be built...
Checking to see if the QtWebKit module should be built...
Checking to see if the QtXml module should be built...
Checking to see if the QtXmlPatterns module should be built...
Checking to see if the phonon module should be built...
Checking to see if the QtAssistant module should be built...
Checking to see if the QtDesigner module should be built...
Qt v4.7.1 free edition is being used.
SIP 4.13.2 is being used.
The Qt header files are in /Users/warnold/qt/qt-4.7.1/include.
The shared Qt libraries are in /Users/warnold/qt/qt-4.7.1/lib.
The Qt binaries are in /Users/warnold/qt/qt-4.7.1/bin.
The Qt mkspecs directory is in /Users/warnold/qt/qt-4.7.1.
These PyQt modules will be built: QtCore.
The PyQt Python package will be installed in
/Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/Current/lib/python2.6/site-packages.
PyQt is being built with generated docstrings.
PyQt is being built with 'protected' redefined as 'public'.
The PyQt .sip files will be installed in
/Applications/Autodesk/maya2013/Maya.app/Contents/bin/../Frameworks/Python.framework/Versions/Current/share/sip/PyQt4.
pyuic4, pyrcc4 and pylupdate4 will be installed in
/Applications/Autodesk/maya2013/Maya.app/Contents/bin/../Frameworks/Python.framework/Versions/Current/bin.
Generating the C++ source for the QtCore module...
Creating the Makefile for the QtCore module...
Generating the C++ source for the Qt module...
Creating the Makefile for the Qt module...
Creating QScintilla API file...
Creating top level Makefile...
Creating QPy support library for QtCore Makefile...
Creating QPy support libraries Makefile...
Creating pyuic4 wrapper...
Creating pyuic4 Makefile...
pylupdate4 and pyrcc4 will not be built because the Qt XML module is missing.
Creating pyqtconfig.py...
Exception TypeError: TypeError("'NoneType' object is not callable",) in <bound method Popen.__del__ of <subprocess.Popen object at 0x100495450>> ignored 
```

构建我得到一堆代码，以

```
ld: library not found for -lQtCore
collect2: ld returned 1 exit status
make[1]: *** [QtCore.so] Error 1
make: *** [all] Error 2 
```

我完全不知所措。不知道如何纠正这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T16:47:38.720

我已经对此主题进行了详细的撰写：
[http ://www.justinfx.com/2011/11/09/installing-pyqt4-for-maya-2012-osx/](http://www.justinfx.com/2011/11/09/installing-pyqt4-for-maya-2012-osx/)

它还包含可供您安装的现成包，包括适用于 Lion 的 Maya 2013。我没有在 Snow Leopard 上尝试过 Lion 包，但我怀疑它应该可以工作，因为它是使用相同的 SDK 和 arch 构建的。

我创建了一个存储库来存储每个 Maya 版本的构建脚本：
[https ://github.com/justinfx/MyQt4](https://github.com/justinfx/MyQt4)

以及 Maya 2011 手动 PyQt 安装的原始记录：
[http](http://www.justinfx.com/2011/01/07/installing-pyqt-for-maya-2011-osx/)
://www.justinfx.com/2011/01/07/installing-pyqt-for-maya-2011-osx/ 您仍然可以将相同的过程应用于较新的版本，只需将 Qt、Sip、PyQt 的包版本更新为适当的版本。但 MyQt 存储库的想法是消除它的挫败感，只需从脚本中完成。

# python - 递归提取数字

> ID：10571797
> 
> 赞同：3
> 
> 时间：2012-05-13T12:41:47.510
> 
> 标签：python, recursion

我需要编写一个递归函数`getdigits(n)`，它返回正整数 n 中的数字列表。

例子`getdigits(124) => [1,2,4]`

到目前为止，我得到的是：

```
def getdigits(n):
    if n<10:
        return [n]
    else:
        return [getdigits(n/10)]+[n%10] 
```

但是对于 124 而不是`[1, 2, 4]`我得到`[[[1], 2], 4]`

在我的脑海中工作它就像：

```
getdigits(124) = [getdigits(12)] + [4]
getdigits(12) = [getdigits(1)] + [2]
get digits(1) = [1] 
```

所以`getdigits(124) = [1] + [2] + [4] = [1, 2, 4]`

我认为它的第二部分有问题，因为我看不出这种情况有什么问题，有没有给出整个解决方案的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:44:47.350

getDigits 返回一个列表，那么为什么要将列表包装到另一个列表中（最后一行）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:47:11.607

您的问题是您返回`[n]`而不是`n`或使用`[getDigits(n / 10)]`而不是`getDigits(n / 10)`.

例如，以您的示例为例：

```
getDigits(124) = [getDigits(12)] + [4] = [getDigits(12), 4]
getDigits(12) = [getDigits(1)] + [2] = [getDigits(1), 2]
getDigits(1) = [1] 
```

因此如下：

```
getDigits(12) = [[1], 2]
getDigits(124) = [[[1], 2], 4] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T13:26:54.737

[之前](https://stackoverflow.com/a/10568880/201359)已经回答了同样的问题，请参阅链接以获取更多详细信息。

```
def getdigits(n):
    if n < 10:
        return [n]
    return getdigits(n/10) + [n%10]

getdigits(123)
> [1, 2, 3] 
```

以上将适用于整数 n >= 0，请注意您不必将结果包装`getdigits(n/10)`在*另一个*列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T09:06:03.023

使用 Lambda

```
(lambda x: [int(a) for a in str(y)])(number) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T13:23:48.193

你可以简单地使用这个：

```
>>> num=124
>>>list(map(int,str(num)))
[1,2,4] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-13T13:05:36.110

您的问题听起来像家庭作业（递归要求），但这可以通过[`list comprehension`](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)

```
>>> def getdigits(n):
...    return [int(y) for y in str(n)]
... 
>>> getdigits(12345)
[1, 2, 3, 4, 5] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-18T15:29:53.003

```
def getdigits(n):
    if n<10:
        return [n]
    else:
        return getdigits(n//10)+[n%10] 
```

你的答案是浮动的。您需要使用地板除法使其 [1] 而不是 1.2

# c - 如何用 C 编写 GMM（高斯混合模型）？

> ID：10571802
> 
> 赞同：2
> 
> 时间：2012-05-13T12:42:38.733
> 
> 标签：c, mixture-model

如何在 C 中编写 GMM（高斯混合模型）。Matlab 中有一些实现，但我正在寻找一些关于它的文档和 C 中的示例代码，而不是 C++ 中的示例代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:48:27.060

OpenCV 有一个 GMM 的实现，用于他们的 GrabCut 实现。[例如，您可以在此处](http://code.opencv.org/svn/opencv/trunk/opencv/modules/imgproc/src/grabcut.cpp)找到它。

编辑：我刚刚注意到您正在寻找 C 中的实现。OpenCV 实现使用 C++。但也许你可以把它作为一个起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:04:54.513

在这里您可以找到 C 中的实现：

[https://engineering.purdue.edu/~bouman/software/cluster/](https://engineering.purdue.edu/~bouman/software/cluster/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T12:47:29.257

[Apophenia](http://apophenia.info/group__models.html#gaf085564a8adc67ba156c4cd1db8145e3)中的混合模型怎么样？

# php - CodeIgniter 验证码验证

> ID：10571804
> 
> 赞同：3
> 
> 时间：2012-05-13T12:43:04.123
> 
> 标签：php, validation, codeigniter, captcha

我创建了一些表格，用于将数据插入数据库并检查数据是否来自人类，我使用了已集成到 CI 的 CAPTCHA。

这是我的控制器：

```
 $checkrules = array(
        'img_path' => realpath(APPPATH . '../upload/checking/img') . '/',
        'img_url' => base_url() . 'upload/checking/img/',
        'font_path' => realpath(APPPATH . '../upload/checking/font.ttf'),
        'img_width' => 150,
        'img_height' => 30,
        'expiration' => 7200
    );

    $check = create_captcha($checkrules);
    $data['checkimg'] = $check['image'];

    $this->form_validation->set_rules('name', 'Name', 'required|max_length[40]|xss_clean');
    $this->form_validation->set_rules('email', 'E-mail', 'required|valid_email|xss_clean');
    $this->form_validation->set_rules('website', 'Website', 'max_length[80]|prep_url|xss_clean');
    $this->form_validation->set_rules('comment', 'Comment', 'required|xss_clean');
    $this->form_validation->set_rules('check', 'Check', 'required|xss_clean');

    if ($this->form_validation->run() == FALSE)
    {
        $this->load->view('cms/theme', $data);
    }
    else
    {
        echo "success";
        $this->load->view('cms/theme', $data);
    } 
```

我现在的问题是验证 CAPTCHA 的最佳方法是什么？

1.）创建回调，我已经完成了，但是有问题，因为当我发送表单时新的验证码错误。

2.) 将 CAPTCHA 的代码插入数据库并从中检查。问题是因为会有很多加载数据库并且它会很忙。

第二个问题。此验证码是否仅将 .jpg 图片保存在文件夹中，或者它可以是任何其他格式？（我问这个是因为我想在使用后删除这个验证码。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T07:56:49.430

```
 * Example of captcha validation without database useage
 * Instead of it used session to store captcha value
 * The images will be deleted after the use 
```

* * *

```
public function index()
{   
    $this->load->helper(array('form', 'url','captcha'));
    $this->load->library('form_validation');

       $this->form_validation->set_error_delimiters('<div class="error">', '</div>');
       $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
       $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');
       $this->form_validation->set_rules('captcha', 'Captcha', 'callback_validate_captcha');

    if($this->form_validation->run() == FALSE)
       {

        $original_string = array_merge(range(0,9), range('a','z'), range('A', 'Z'));
        $original_string = implode("", $original_string);
        $captcha = substr(str_shuffle($original_string), 0, 6);

         //Field validation failed.  User redirected to login page
        $vals = array(
                'word' => $captcha,
                'img_path' => './captcha/',
                'img_url' => 'http://mycodeignitor.org/captcha/',
                'font_path' => BASEPATH.'fonts/texb.ttf',
                'img_width' => 150,
                'img_height' => 50,
                'expiration' => 7200
        );

        $cap = create_captcha($vals);
        $data['image'] = $cap['image'];

        if(file_exists(BASEPATH."../captcha/".$this->session->userdata['image']))
            unlink(BASEPATH."../captcha/".$this->session->userdata['image']);

        $this->session->set_userdata(array('captcha'=>$captcha, 'image' => $cap['time'].'.jpg'));
        $this->load->view('index_index',$data);
       }
       else
       {
            if(file_exists(BASEPATH."../captcha/".$this->session->userdata['image']))
                unlink(BASEPATH."../captcha/".$this->session->userdata['image']);

            $this->session->unset_userdata('captcha');
            $this->session->unset_userdata('image');
            redirect('home', 'refresh');
       }

}

public function validate_captcha(){
    if($this->input->post('captcha') != $this->session->userdata['captcha'])
    {
        $this->form_validation->set_message('validate_captcha', 'Wrong captcha code, hmm are you the Terminator?');
        return false;
    }else{
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T12:56:56.443

我建议您使用在 codeigniter 中易于实现的 recaptcha：http: [//codeigniter.com/wiki/ReCAPTCHA](http://codeigniter.com/wiki/ReCAPTCHA)

# php - 脸书搜索

> ID：10571808
> 
> 赞同：1
> 
> 时间：2012-05-13T12:43:21.327
> 
> 标签：php, facebook

我是 facebook api 的新手。我想在 facebook 上**搜索**一个特定的词。我已经浏览了[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)上的文档。但我不知道如何在 PHP 中构造查询。

任何人都可以提供一个示例代码。另外我如何指定**计数和页面**（如 twitter）？

我目前正在使用 facebook 提供的 API。我看到有其他 API，但我想将 API 限制为官方 API

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:45:36.680

Facebook 提供的搜索功能类似于使用 facebook.com 内的搜索进行搜索。

要阅读它，请访问此处：http: [//developers.facebook.com/docs/reference/api/#searching](http://developers.facebook.com/docs/reference/api/#searching)

* * *

# 编辑

正如该文件中所述：

> 在用户的新闻提要上搜索公共帖子或帖子时，您可以使用since、until 和limit 参数对结果进行翻页。since 和 until 都接受 unix 时间戳。

此外，在“搜索”部分上方有一个“分页”部分，使用这两个部分可以得出：

> [https://graph.facebook.com/search?q=coffee&type=place&offset=X&limit=4](https://graph.facebook.com/search?q=coffee&type=place&offset=X&limit=4)

就使用 php sdk 而言，可能类似于：“search?q=coffee&type=place&offset=X&limit=4”

# javascript - 如何计算一个字符的字节数

> ID：10571814
> 
> 赞同：2
> 
> 时间：2012-05-13T12:44:45.867
> 
> 标签：javascript, node.js

编辑：哎呀。

```
console.log (Buffer.byteLength ("", "utf8")); //--> 3 
```

* * *

我想计算一个字符的字节数。这就是我所拥有的：

```
var charBytesLength = function (c){
    var n = 0;
    c = c.charCodeAt (0);
    do{
        c = c >>> 8;
        n++;
    }while (c);
    return n;
}; 
```

如果字符使用 UTF8 编码，对于超过 2 个字节的字符，该函数始终返回 2，因为在 Javascript 中，字符是一个 16 位值，并且`charCodeAt()`只返回 0 到 65535 之间的值。

例如：

```
"".charCodeAt (0) 
```

当真正的十六进制值为 0x24065（十进制为 147557）时，返回 65533

你知道如何计算实际字节数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T12:50:55.490

```
console.log (Buffer.byteLength ("", "utf8")); //--> 3 
```

# java - 在 java 中使用准备好的语句插入自定义 SQL 类型

> ID：10571821
> 
> 赞同：19
> 
> 时间：2012-05-13T12:45:28.550
> 
> 标签：java, sql, postgresql, prepared-statement

我有一些自定义类型。它们基本上都是枚举。以下是它们的外观示例：

```
CREATE TYPE card_suit AS ENUM
   ('spades',
    'clubs',
    'hearts',
    'diamonds'); 
```

我在 Java 中有一些准备好的语句，看起来像这样：

```
// Setup stuff up here.
sql = "INSERT INTO foo (suit) VALUES (?)";
st.setString(1, 'spades');
st.executeUpdate(sql); 
```

Java 给了我一些像这样的讨厌的异常：

```
org.postgresql.util.PSQLException: ERROR: column "suit" is of type card_suit but expression is of type character varying
Hint: You will need to rewrite or cast the expression. 
```

他们很高兴给我一个提示，但我不确定如何遵循它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-13T12:54:26.517

您是否尝试将列转换为枚举？

```
// Setup stuff up here.
sql = "INSERT INTO foo (suit) VALUES (?::card_suit)";
st.setString(1, 'spades');
st.executeUpdate(sql); 
```

在“网络编码博客”的[Java 枚举和 PostgreSQL 枚举之间的转换文章中进行了解释，并附有示例：](http://www.gotoquiz.com/web-coding/programming/java-programming/convert-between-java-enums-and-postgresql-enums/)

```
INSERT INTO pet (pet_id, pet_type, name) 
         VALUES (?, CAST(? AS animal_type), ?);

--or

INSERT INTO pet (pet_id, pet_type, name) 
         VALUES (?, ?::animal_type, ?); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-17T15:56:07.507

另一种方法是

```
st.setObject(1, 'spades', Types.OTHER); 
```

# c# - 如何删除最左边的位并在最右边的位中添加位

> ID：10571822
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:45:30.183
> 
> 标签：c#, binary, hex, byte

如何删除最左边的位？

我有一个十六进制值`BF`

它的二进制表示是`1011 1111`

如何删除第一位，即`1`，然后它将变为`0111 1110`？

如何在最后一部分添加“0”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T13:00:51.933

## 将变量的位 N 设置`x`为`0`

```
x &= ~(1 << N); 
```

**工作原理：**表达式 1 << N[向左移动 N 次](http://msdn.microsoft.com/en-us/library/a1sway8w)。对于 N = 7，这将是

```
1000 0000 
```

[按位 NOT](http://en.wikipedia.org/wiki/Bitwise_operation#NOT) [运算符`~`](http://msdn.microsoft.com/en-us/library/d2bd4x66%28v=vs.100%29.aspx)将其反转为

```
0111 1111 
```

然后将结果[与 进行按位与运算](http://en.wikipedia.org/wiki/Bitwise_operation#AND)，`x`得到：

```
xxxx xxxx
0111 1111
--------- [AND]
0xxx xxxx 
```

结果：第 7 位（从 LSB 开始的从零开始的计数）被关闭，所有其他位都保留其先前的值。

## 将变量的位 N 设置`x`为`1`

```
x |= 1 << N; 
```

它是如何工作的：这次我们将移位的位和[按位或](http://en.wikipedia.org/wiki/Bitwise_operation#OR)它与`x`，给出：

```
xxxx xxxx
1000 0000
--------- [OR]
1xxx xxxx 
```

结果：第 7 位打开，所有其他都保留其先前的值。

## 查找最高位设置为`1`：

如果您不知道设置为 1 的最高位是哪个，您可以即时找出。有很多方法可以做到这一点；一个合理的方法是

```
int x = 0xbf;
int highestSetBit = -1; // assume that to begin with, x is all zeroes
while (x != 0) {
    ++highestSetBit;
    x >>= 1;
} 
```

在循环结束时，`highestSetBit`将是 7 正如预期的那样。

**[看到它在行动](http://ideone.com/AAbGY)**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-13T12:51:03.373

```
int i=0xbf;
int j=(i<<1) & 0xff; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T13:01:55.673

或者你可以这样做： (i*2) && 0xff 如果你不想做一些玩弄。>>1 相当于 /2，<<1 相当于 *2。

# python - Python：修改内置打印功能

> ID：10571831
> 
> 赞同：0
> 
> 时间：2012-05-13T12:46:46.227
> 
> 标签：python, python-2.7, stdout, jython, stdin

我想自定义`print`Python 中的语句以获取其他文本。但是用我的方法，似乎`Enter`关键在输入中得到缓冲。

我使用的程序是：

```
class rename_print:
    def __init__(self, stdout):
        self.stdout = stdout     
    def write(self, text):
        self.stdout.write('###' + text)     
        self.stdout.flush()
    def close(self):
        self.stdout.close()

import sys

prints = rename_print(sys.stdout)
sys.stdout = prints
print 'abc' 
```

我得到的输出是

> ###abc###

我期望的输出是

> ###abc

这可能是什么原因？我怀疑输入流是否被`Enter`密钥缓冲。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:11:53.457

`print`根据默认值（或每个参数之间的空格）将换行符写入输出流。所以你会接到两个电话`write`，一个是 with `"abc"`，一个是 with `"\n"`。

因此，如果您不想要这种行为，则必须单独处理该调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:20:33.953

我认为正在发生的事情是 print 隐式添加了换行符。这个额外的打印也调用了你的重定向写入函数，所以你得到另一个“###\n”

这有点hacky，但试试这个：

...

```
def write(self, text):
    if text!="\n":
       self.stdout.write('###' + text) 
```

...

# javascript - 如何识别变量的对象类型？

> ID：10571833
> 
> 赞同：3
> 
> 时间：2012-05-13T12:47:03.473
> 
> 标签：javascript, jquery, debugging

我正在尝试在 Chrome 的 Javascript 控制台中学习调试 Javascript。但是，我不明白控制台如何显示 object 的数据类型。例如，在 Javascript 控制台中，它显示如下：

![在此处输入图像描述](../Images/b1974482051197a534483cd338946224.png)

在这张图片中，我使用的是 JQuery。我尝试对`console.log`一些变量进行操作，但我如何知道特定变量是 JQuery 对象还是原始 DOM 对象？显示控制台中列出的标记的那个或另一个是 JQuery 对象还是原始 DOM对象`HTMLDivElement`？`div`

一般来说，我应该如何在 Chrome 的 Javascript 控制台等调试器控制台中知道 Javascript 中对象或变量的数据类型？在 Java 等语言中，变量的数据类型在调试器中显示得很清楚；我可以从调试器中知道变量是什么类型的对象，它是实例`Class A`还是实例`Class B`等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:50:51.030

```
if (variable instanceof jQuery) // Or variable.jquery 
    // jQuery object. 
```

[**现场演示**](http://jsfiddle.net/zwUcf/)

`instanceof`[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Operators/instanceof)上的文档：

> instanceof 运算符测试对象的原型链中是否具有构造函数的原型属性。

* * *

jQuery 检查 DOM 元素的方式是`nodeType`：

```
// Handle $(DOMElement)
if ( selector.nodeType ) { 
```

jQuery 检查 jQuery 对象的方式是使用以下`jquery`属性：

```
// HANDLE: $(expr, $(...))  
else if ( !context || context.jquery ) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T12:49:27.597

这些都是 jQuery 对象。

控制台将它们识别为包含 DOM 元素的类数组对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T12:55:50.747

如果您转到“**脚本**”选项卡，则可以在调试器中查看类型。
然后在右侧按**Watch Expressions下的****+**号并添加您喜欢的任何内容。 **![检查员](../Images/e9d969b4573c11c7b934d54a678bfe07.png)**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T12:59:31.847

JQuery 对象实际上是 DOM 元素的数组，微乐 DOM 元素只是 DOM 元素。**

# atk4 - 在表单上使用 multiSelect 的示例

> ID：10571836
> 
> 赞同：0
> 
> 时间：2012-05-13T12:47:08.317
> 
> 标签：atk4

有没有人有一个关于如何在表单上使用 multiSelect 字段的好例子？文档中没有关于它的任何内容。

如果我像任何其他字段一样添加它，我会收到错误消息。我正在使用 atk 4.2。

这段代码：

```
$f = $form->addField('multiSelect', 'name', 'Caption'); 
```

将引发此错误

```
Exception_Logic

Method is not defined for this object

Additional information:

class: jUI
method: addPlugin
arguments: Array ( [0] => multiSelect )
.../atk4/lib/BaseException.php:38 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:54:48.007

使用 setAttr('multiple') 时，“下拉”表单字段中存在错误，导致仅返回最后选择的值，该问题现已由 github 中的 ATK4 开发人员解决，请参阅：[https ://github.com/ atk4/atk4/拉/233](https://github.com/atk4/atk4/pull/233)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T19:13:52.827

这是一个已弃用的字段类型。您可以使用默认下拉菜单并使用方法添加多选选项`setAttr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T21:55:51.470

```
$f = form->addField('DropDown', 'name','Caption')->setAttr('multiple')->setModel('Application'); 
```

但我仍在寻找如何设置一些要选择的记录...

# iphone - 如何在 ios 4.3 版本中测试我的 ios 应用程序？

> ID：10571837
> 
> 赞同：1
> 
> 时间：2012-05-13T12:47:09.017
> 
> 标签：iphone, ios, ios4, xcode4.3

我现在正在运行最新的 IOS Xcode 和 iTunes 版本。一周前我发布了我的一个应用程序，4.3 个用户在特定点上崩溃了。没有选项可以在模拟器上测试我的应用程序，它必须在真实设备上运行，有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:19:46.010

[http://www.redmondpie.com/downgrade-5.1-to-5.0.1-5.0-4.3.3-4.3.5-on-iphone-ipad-ipod-touch-how-to-tutorial/](http://www.redmondpie.com/downgrade-5.1-to-5.0.1-5.0-4.3.3-4.3.5-on-iphone-ipad-ipod-touch-how-to-tutorial/)

该链接可以向您展示如何降级

否则模拟器应该是一个测试的好地方，除非你的游戏有“力量”属性，比如游戏，在这种情况下模拟器（本质上是 iMac）将比设备表现更好和不同。否则，您可以进入项目/目标设置并将构建版本类型更改为较低版本

# c# - 按钮上的按钮

> ID：10571840
> 
> 赞同：-1
> 
> 时间：2012-05-13T12:47:36.227
> 
> 标签：c#, winforms, button

我的 winform c# 项目有问题。在我的项目中，我有两个主要功能，一个在运行时制作按钮，另一个功能允许我在运行时移动表单上的按钮。现在，如果我在其他按钮上有按钮，我该怎么办，所以我制作了替换按钮位置的功能，但如果有人可以帮助我，该功能会出现问题，那就太好了！

```
public void upandunder(Button cBtn1, Button cBtn2)
    {
        if ((cBtn1.Location.X == cBtn2.Location.X) && (cBtn1.Location.Y == cBtn2.Location.Y))
        {
            int placex = cBtn1.Location.X;
            int placey = cBtn1.Location.Y;
            cBtn1.Location.X = cBtn2.Location.Y;
            cBtn1.Location.Y = cBtn2.Location.Y;
            cBtn2.Location.X = placex;
            cBtn2.Location.Y = placey;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:00:24.117

> 它让我认为errorError 1无法修改'System.Windows.Forms.Control.Location'的返回值，因为它不是变量

正确，`Location`属性的返回值不可编辑。根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)：

> 因为`Point`类是值类型（`Structure`在 Visual Basic 中，`struct`在 Visual C# 中），所以它是按值返回的，这意味着访问该属性会返回控件左上角的副本。因此，调整从该属性返回的`X`or`Y`属性`Point`不会影响控件的`Left`, `Right`, `Top`, or`Bottom`属性值。要调整这些属性，请单独设置每个属性值，或`Location`使用新的`Point`.

因此，您需要将代码重写为以下内容：（
另外，我*强烈*建议将参数命名为 and 以外的名称`x`，`y`因为您正在处理函数中具有 x 和 y 值的坐标...）

```
public void upandunder(Button btn1, Button btn2)
{
    if ((btn1.Location.X == btn2.Location.X) && (btn1.Location.Y == btn2.Location.Y))
    {
        Point originalLocation = btn1.Location;
        btn1.Location = btn2.Location;
        btn2.Location = originalLocation;
    }
} 
```

甚至更好，只需比较属性`Point`返回的两个值`Location`（`Point`结构[重载`==`operator](http://msdn.microsoft.com/en-us/library/system.drawing.point.op_equality.aspx)）：

```
public void upandunder(Button btn1, Button btn2)
{
    if (btn1.Location == btn2.Location)
    {
        Point originalLocation = btn1.Location;
        btn1.Location = btn2.Location;
        btn2.Location = originalLocation;
    }
} 
```

当然，我看不出它是如何完成任何事情的。首先，您检查按钮是否位于彼此之上（具有完全相同的 x 和 y 坐标），然后如果有，则交换它们的位置。它们已经*处于*相同的位置——您在执行交换代码之前对其进行了测试。

从您的函数名称来看（`upandunder`应该`UpAndUnder`遵循标准的 .NET 命名约定），您似乎希望更改按钮的 Z 顺序。如果是这种情况，那么您应该调用按钮控件的[`BringToFront`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.bringtofront.aspx)或[`SendToBack`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.sendtoback.aspx)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:02:01.937

控件上的`Location`属性返回一个点。Point 结构具有您正在使用的 X 和 Y 值。我认为您不想直接访问它们，而是想提供新的位置点。

试试这个（它适用于我的机器）

```
public void UpAndUnder(Button cBtn1, Button cBtn2)
{
    if (cBtn1.Location == cBtn2.Location.Y)
    {                
        Point oldPoint = new Point(cBtn1.Location.X, cBtn1.Location.Y);
        cBtn1.Location = new Point(cBtn2.Location.X, cBtn2.Location.Y);
        cBtn2.Location = oldPoint;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:03:39.777

如果您想将一个按钮放在另一个按钮上，只需调用

```
button1.BringToFront(); 
```

这将改变 button1 的 Z 顺序并将其置于所有其他控件之上。

# qt - 在 Qt 中删除插件崩溃

> ID：10571842
> 
> 赞同：1
> 
> 时间：2012-05-13T12:47:44.703
> 
> 标签：qt, qt4

`plotter = qobject_cast<PlotterInterface*>(plugin);`我使用当我关闭应用程序时初始化插件 ，`closeEvent(QCloseEvent *event)`我尝试删除插件`delete plotter;`但我崩溃了。如果我没记错的话，可以删除用 new 创建的对象。为什么我会崩溃？

**编辑（插件导入）：**

```
QPluginLoader* pluginLoader = new QPluginLoader(pluginDir.absoluteFilePath(fileName)); 
QObject* plugin = pluginLoader->instance(); 
plotter = qobject_cast<PlotterInterface*>(plugin); 
plotter->initPlotter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:11:03.583

从文档中：

[QPluginLoader::instance](http://grip.espace-win.org/doc/apps/qt4/html/qpluginloader.html#instance)

> ...当 QPluginLoader 被销毁时，此函数返回的根组件不会被删除。如果您想确保根组件被删除，您应该在不再需要访问核心组件时立即调用 unload()...

[QPluginLoader::卸载](http://grip.espace-win.org/doc/apps/qt4/html/qpluginloader.html#unload)

> 不要试图删除根组件。相反，依靠 unload() 会在需要时自动删除它。

尝试使用卸载，看看问题是否仍然存在。

# html - 垂直对齐导航

> ID：10571845
> 
> 赞同：0
> 
> 时间：2012-05-13T12:47:46.193
> 
> 标签：html, css, alignment

我有一个导航栏，我想完全垂直对齐（滚动时也是如此）。

我从另一个线程中知道您可以垂直对齐：

```
#container
{
    position: absolute;
    top: 50%;
    height: 400px;
    margin: -200px 0;
} 
```

但是如何垂直对齐导航栏，这样我就不必硬链接大小？

谷歌大多有旧的技术和硬链接。如果我错过了包含此主题的链接，请提醒我！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T12:56:00.857

使用表格标签来完成这个任务，你可以用它更好地构建你的导航。喜欢：

```
<table id="tblMain" width="80%">
<tr><td colspan="2">Your Header </td></tr>
<tr><td width="30%">
<table id="tblNavigation">
  <tr><td><a href="#">Navigation Link 1</a> </td></tr>
  <tr><td><a href="#">Navigation Link 2 </a></td></tr>
  <tr><td><a href="#">Navigation Link 3</a> </td></tr>
</table>
</td>
<td width="70%"><div id="mainDiv"></div>
</td>
<td colspan="2">Your footer </td>
</tr>
<table> 
```

# qt - Qt Webkit - 浏览器交互问题

> ID：10571848
> 
> 赞同：3
> 
> 时间：2012-05-13T12:48:22.300
> 
> 标签：qt, jquery, post, qtwebkit

我正在开发一个 Qt 程序，其中包含一个作为 HTML 页面的 OpenStreetMap 应用程序，并且该页面能够访问数据库——通过提交一个包含查询开始和结束日期的 ajax 表单——以便检索和可视化查询地图。我想将此查询过程从 HTML/Javascript 部分移至 Qt。到目前为止，我设法通过 Qt 与浏览器进行交互，但我仍然遇到以下问题：

1) 单击 Qt 的 fetch queries 按钮，应该会弹出一个警告框，提示 Ajax POST 失败 - 数据库不在我当前的笔记本电脑上，当我单击 HTML 浏览器窗口的 fetch 时应该会收到错误查询按钮或 Qt 的获取按钮 -

2）而且，每当我单击 HTML 浏览器的 Fetch 查询按钮时，它会显示 POST 警告，但也会显示额外的 POST 警告警报框，具体取决于我单击 Qt 的 Fetch 查询按钮的次数。- 例如，如果我连续 5 次单击 Qt 的 fetch 查询按钮，然后单击 HTML 窗口的 fetch 按钮一次，我会连续收到 6 条 POST 失败消息 -

HTML 代码如下所示：

```
<form id="ajaxForm" action="index.php" method="post">
Start <input type="text" name = "date1" id = "datepicker" value = "2011-07-13" style = "width:70px">
<input type="text" name = "time1" id = "timepicker1" value = "00:00" style = "width:40px"> 

End <input type="text" name = "date2" id = "datepicker2" value = "2011-07-13" style = "width:70px">
<input type="text" name = "time2" id = "timepicker2" value = "00:01" style = "width:40px"> 
```

AJAX形式的post方法是这样的：

```
<script type="text/javascript">

$(document).ready(function(){

 // ajaxForm submit
 $('#ajaxForm').submit(function() {
  $.ajax({
   type: 'POST',
   url: 'heatQuery.php',
   data: $(this).serialize(),
   dataType: 'json',
   success: function(response)
   {   
       // update the points for heatmap layer          
       updateHeatMap(response);

   },
   error: function(errorMsg)
   {
       alert('Error in Ajax POST');
       }
  });

  return false;
 });
});

</script> 
```

最后，调用该函数的 Qt 代码是这样的：

```
void MainWindow::onButtonClicked() // clicking the button in order to POST 
{
    //the QString a is the same ajax post function as declared above

    QString a = "$(document).ready(function(){$('#ajaxForm').submit(function() {$.ajax({type: 'POST',url: 'heatQuery.php',data: $(this).serialize(),dataType: 'json',success: function(response){updateHeatMap(response);},error: function(errorMsg){alert('Error in Ajax POST');}});return false;});});"; 

    this->view->page()->mainFrame()->evaluateJavaScript(a);

} 
```

关于这里有什么问题的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T07:13:02.160

我想我有问题。`XMLHttpRequest`成功加载您的本地文件，但它返回`0`in `request.status`，这就是为什么`error()`会从您的 jQuery 代码中触发。

`QWebView`我在..中运行了以下示例代码

```
var request = new XMLHttpRequest();  
request.open('POST', 'file:///C:/hello.txt', true);

request.onreadystatechange = function(e) {  

    if(request.readyState == 4)
    {
        // 'responseText' will not be empty if file present..
        alert("response text: " + request.responseText);
        alert("status: " + request.status);
    }
}

request.send(); 
```

希望这可以帮助..

# php - 示例中的可用电影未显示正确的计算字段

> ID：10571854
> 
> 赞同：0
> 
> 时间：2012-05-13T12:49:17.243
> 
> 标签：php, user-interface, frameworks, atk4

遵循链接[http://agiletoolkit.org/learn/app/logic](http://agiletoolkit.org/learn/app/logic)并计算字段

```
// add into Model_DVD_InStore
function dsql_count(){
    return $this
        ->dsql(null,false)
        ->field('count(*)')
        ->where('('.$this->calculate_is_rented().')!=','Y')
        ->where('dvd.movie_id=movie.id')
        ;
} 
```

但这是一个内部连接，所有租用的 dvd（在租用的表中有条目）并返回都会被考虑在内，但所有尚未租用的 dvd 都不会被考虑在内。任何解决方案......

解决了 ：：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:10:13.250

使用 Agile Toolkit 4.2（您需要 Git 版本或 4.2.1），您可以使用：

```
$model->count(); 
```

它返回带有应用条件的 DSQL。

# c++ - 查找两个数之间的质数

> ID：10571855
> 
> 赞同：1
> 
> 时间：2012-05-13T12:49:17.360
> 
> 标签：c++

我试图找到两个给定数字之间的所有素数并将素数相加。

我有这个循环可以正确检测素数。

但是，由于某种原因，我不知道如何对所有素数求和。

```
int a,b,i,j,sum=0;

do
{   cout << "Enter a number: ";
    cin >> a;
    if (a < 4 || a > 1000000) 
    {   cout << "Input must be between 4 and 1000000 inclusive." << endl;
    }
}while (a < 4 || a > 1000000);

do
{   cout << "Enter a second number: ";
    cin >> b;
    if (b < 4 || b > 1000000) 
    {   cout << "Input must be between 4 and 1000000 inclusive." << endl;
    }
}while (b < 4 || b > 1000000);

if (a > b)
{   int hold;
    hold = b;
    b = a;
    a = hold;
}

cout << "The prime numbers between " << a << " and " << b << " inclusive are: " << endl;
//int sum;
for (i = a; i <= b; i++)
{
 for (j = 2; j <= i; j++) // Changed the < to <=, and got rid of semicolon
 {
    if (!(i%j)&&(i!=j)) break;
    if (j==i) 
    {
              cout << i << endl;
              sum += i;
              cout << sum ;

    }
 }
} 
```

该变量`sum`给了我垃圾结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T12:53:34.160

没有确切的细节是不可能知道的，但最可能的两种可能性是：

1.  `sum`使用前未初始化为 0
2.  您遇到了一个[溢出](http://en.wikipedia.org/wiki/Integer_overflow)，因为数字的总和太大而无法放入其中。这显然取决于 的类型`sum`和范围。

编辑：

编辑后的代码适用于我，适用于小范围（请注意，对于较大的范围，还应该考虑问题 #2）。
您可能误读了结果，请尝试`endl`添加`cout << sum ;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:52:24.443

我不确定你是否向我们提供了所有信息。否则，对我来说，您似乎没有初始化`sum`.

```
int sum = 0;
for (i = a; i <= b; i++) {
    for (j = 2; j <= i; j++) {
        if (!(i%j)&&(i!=j)) 
            break;

        if (j==i) { 
            cout << i << endl;
            sum += i;
            cout << sum;
        }
    } 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T13:12:59.700

问题似乎只是您的格式。将结束循环更改为以下内容，输出会更清晰（注意：在您的代码中，未声明 sum2 - 我在所有这些之上添加了“int sum2 = 0”）

```
for (i = a; i <= b; i++)
{
    for (j = 2; j <= i; j++) // Changed the < to <=, and got rid of semicolon
    {
        if (!(i%j) && (i!=j)) break;
        if (j==i) 
        {
            cout << "i = " << i << endl;
            sum += i;
            cout << "sum = " << sum << endl;

        }
        sum2 += sum ;
        //cout << "sum2 = " << sum2 << endl;
    }
} 
```

# css - 改进 div 对齐

> ID：10571857
> 
> 赞同：0
> 
> 时间：2012-05-13T12:49:48.293
> 
> 标签：css, html, alignment

目标是对齐两个相邻的 div。

HTML：

```
<div class="test1>Text 1</div>
<div class="test2>Text 2</div> 
```

CSS：

```
.test1 {
    float: left;
}
.test2 {
    float: left;
} 
```

只要浏览器窗口比两个 div 宽，它就可以工作。当浏览器窗口宽度不能再容纳两个相邻的 div 时，test2 被推到 test1 下方。

如何防止这种行为？因此它们将始终彼此相邻（如果它们的总宽度大于浏览器宽度，则显示水平滚动条？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:03:35.970

将它们包装在包含 div 中，并为包含 div 的内容提供固定宽度（以像素为单位）。一旦浏览器窗口变得小于该宽度，它将显示滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:14:15.253

您应该*包装*这些*div*，并将包装设置为`width`等于所有孩子的总和`width`：

请参阅此[小提琴示例！](http://jsfiddle.net/zuul/SdBT2/)

**HTML**

```
<body>
    <div id="wrap" class="clearfix">
        <div class="test1 floatL">Div 01</div>
        <div class="test2 floatL">Div 02</div>
    </div>
</body> 
```

**CSS**

```
body {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
}
.floatL {
    float: left;
}
.test1 {
    width: 500px;
    height: 50px;
    background-color: #D9D9D9;
}

.test2 {
    width: 700px;
    height: 30px;
    background-color: #CCC;
}

/* helpers */
.clearfix:before,
.clearfix:after {
  content: '\0020';
  display: block;
  overflow: hidden;
  visibility: hidden;
  width: 0;
  height: 0;
}
.clearfix:after {
  clear: both;
}
.clearfix {
  zoom: 1;
} 
```

**查询**

```
$(function() {
    var sum=0;
    $('#wrap > div').each( function(){ sum += $(this).width(); });
    $('#wrap').width( sum );
}); 
```

这样做的目的是收集 的每个*第一个孩子*的with`#wrap`并将其加起来设置为 的宽度`#wrap`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:14:21.830

您可以做的是创建一个表格并将 div 放入其中。这样它就不会溢出到下一行。

# javascript - 如何在 Three.js 中加载 .x 模型？

> ID：10571860
> 
> 赞同：2
> 
> 时间：2012-05-13T12:50:26.627
> 
> 标签：javascript, three.js, collada, .x

有没有办法在 Three.js 中加载动画 .x 模型？我不知道该怎么做。另外，我尝试将.x模型转换为collada，但是我没有找到任何可以将动画.x转换为collada的免费程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-13T13:59:26.707

.x 是一种 ascii 格式，因此解析/转换应该不难。

或者，您可以使用具有 .x 导入器的 Blender 2.4x，您可以导出一个 .obj，您可以将其转换为 json 或其他适合您的格式。

默认情况下，在 Blender 2.5x 中，只有一个 .x 导出器可以在首选项中激活。也许某处有进口商。

# android - 从多个号码中删除通话记录？

> ID：10571861
> 
> 赞同：1
> 
> 时间：2012-05-13T12:50:48.110
> 
> 标签：android, string, uri, calllog

需要帮助从多个号码中删除通话记录，使用以下代码我可以使用字符串从确切号码中删除通话记录，我需要的是能够从字符串中的号码中删除通话记录。

这是我用来删除确切数字的代码：

```
String strUriCalls = "content://call_log/calls";
            Uri UriCalls = Uri.parse(strUriCalls);
            Cursor c = context.getContentResolver().query(UriCalls, null,
                    null, null, null);
            if (c.getCount() <= 0)

            {
                Toast.makeText(context, "Call log empty",
                        Toast.LENGTH_SHORT).show();
            }

            while (c.moveToNext())
            {
                //eg.what I need is:    String gonnabpref = "0750627663 09876756446 08987766545 0908977534";
                String gonnabpref = "0750627663";
                String queryString = "NUMBER='" + gonnabpref + "'";
                Log.v("Number ", queryString);
                int i = context.getContentResolver().delete(UriCalls,
                        queryString, null);
                  if (i >= 1)

                { 
```

希望这是有道理的（菜鸟）非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T07:15:24.583

开头带有 + 号的数字不会被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:54:53.547

通过在空间的基础上拆分字符串来尝试这种方式：

```
String gonnabprefd = "0750627663 09876756446 08987766545 0908977534";
String[] numarry=gonnabprefd.split(" ");
for(int i=0;i<numarry.length;i++)
{
String gonnabpref = numarry[i];
String queryString = "NUMBER='" + gonnabpref + "'";
Log.v("Number ", queryString);
int i = context.getContentResolver().delete(UriCalls,
 queryString, null);
 if (i >= 1)
  {
}
} 
```

# php - 我可以使用 AJAX 将文本放入 2 个框而不是 1 个框吗

> ID：10571864
> 
> 赞同：1
> 
> 时间：2012-05-13T12:50:57.813
> 
> 标签：php, html, sql, ajax

我制作了一个简单的 html 页面，它从我的一个数据库表中获取信息并将其粘贴到文本框中。它通过处理请求的 AJAX 函数连接到 PHP 来做到这一点。

我想知道的是是否可以将这些数据放入两个文本框中，而不仅仅是一个。我不知道该怎么做，因为在我的代码中我必须声明一个文本框，我是否必须为每个文本框创建单独的函数才能使其工作，还是有更简单的解决方案？

网页：

```
<html>
<head>
<script type="text/javascript">
function getDetails(str)
{
if (str=="")
  {
  document.getElementById("Text1").value=""; 
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("Text1").value=xmlhttp.responseText; // here is why it only      goes into "Text1"
    }
  }
xmlhttp.open("GET","getDetails.php?q="+str,true);
xmlhttp.send();
}
</script>
</head>
<body>

<form>
<!--here a user enters an "RFID" and the details are returned into "Text1"-->
<input type="text" name="RFID1" value="" onKeyup="getDetails(this.value)" /> 
<input type="text" id="Text1" name="Text1" />
<input type="text" id="TextScore1" name="TextScore1"/>
</form>

<br/>

<form>
<!--here a user enters another "RFID" and the details are also returned into "Text1"
(though I would like it to go to Text2 and TextScore2)-->
<input type="text" name="RFID2" value="" onKeyup="getDetails(this.value)" />
<input type="text" id="Text2" name="Text2"/>
<input type="text" id="TextScore2" name="TextScore2"/>
</form>

</body>
</html> 
```

PHP页面：

```
<?php
$q=$_GET["q"];

$con = mssql_connect("SQL", "0001", "Password");
if (!$con)
  {
  die('Could not connect: ' . mssql_get_last_message());
  }

mssql_select_db("database1", $con);

$sql="SELECT * FROM Scrabble WHERE RFID = '".$q."'";

$result = mssql_query($sql);

while($row = mssql_fetch_array($result))
  {

  echo $row['Tile'];

  echo $row['TileScore'];
  }

mssql_close($con);
?> 
```

*注意 - 我的服务器使用 MsSQL

另一个问题，正如您在 HTML 文件中看到的那样，我有两个表单，我需要相同的功能发生在两个表单上。在这里，我想我可能必须为每个表单创建另一个 PHP 文件来连接。但是为了确定我要问，是否可以将其保存在一个文件中，如果可以，您将如何处理？

**编辑**似乎我让一些人感到困惑，我不希望将文本放入两个文本框中，但实际上将结果拆分为两个文本框。这样“文本”将出现在文本框 Text1 中，而 TextScore 将出现在文本框 TextScore1 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:55:16.930

为什么不是这个？

```
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
  var response=xmlhttp.responseText;
  document.getElementById("Text1").value=response;
  document.getElementById("Text2").value=response;
} 
```

对于第二个函数，您可以使用相同的 PHP 文件。在进行 ajax 调用以确定“此调用来自何处”时，您可能需要将查询字符串值传递给 PHP 页面。

就像是

```
getDetails.php?from="userinfo" 
```

和

```
getDetails.php?from="checkprice" 
```

在您的 PHP 文件中，您可以检查查询字符串变量的值并执行相应的代码集。您可以在那里使用 if /switch 等...

但我更愿意在逻辑上分离功能并将其保存在单独的文件中。

**例如**：我会将所有与用户相关的功能保存在 a 中`userajaxhelper.php`，并将与订单相关的功能保存在另一个名为 o 的文件中`rderajaxhelper.php`。这使我的代码井井有条且干净。

**编辑**：只想在我的回答中加入安迪休谟的评论，因为它很重要。你真的应该确保你不会成为[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)的受害者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:00:33.583

你有一个代码线

```
document.getElementById("Text1").value=xmlhttp.responseText; 
```

如果您想在 box2 中添加相同的文本

```
document.getElementById("yourSecondText").value=xmlhttp.responseText; 
```

如果不一样，那么 php 应该以 JSON 格式给出答案，part1,.... 分开。

作为对 ajax 的响应，您应该为其文本框分配适当的部分。

对不起，如果我没有得到这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:08:24.937

您可以将 PHP 的结果作为 JSON 返回，请参阅[json_encode](http://php.net/json_encode)并发送正确的标头，内容类型为 application/json。

[然后使用json2](https://github.com/douglascrockford/JSON-js)解析 JavaScript 中的 JSON，您将能够将一个键/参数分配给第一个字段，另一个分配给另一个字段。

```
...
$result = array();
while($row = mssql_fetch_array($result))
{
    $result[] = $row;
}
mssql_close($con);

header('Content-type: application/json');
echo json_encode($result); 
```

和 JS（注意：我没有测试 JS 代码，但它应该提供一个示例）：

```
...
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
    var jsonObj = JSON.parse(xmlhttp.responseText);

    document.getElementById("Text1").value = jsonObj.Title;
    document.getElementById("TextScore1").value = jsonObj.TileScore;
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T13:49:20.513

简短的回答：是的。

更长的答案：当响应返回时，您可以“随心所欲”。你只需要弄清楚你想要做什么以及如何实现它；较早的答案已经给出了很好的指导。但是，作为一般概念，您可能希望“缩减”到问题的准系统 - 让您拥有的页面尽可能通用，以便它仍然可以满足您的需求。

您可能想要做的示例（未经测试，只是快速设置，但我认为您应该做到这一点）......

```
<html>
    <head>
        <script type="text/javascript"><!--
            function doAjaxRequest() {
                // Set up Ajax-request, that will execute the
                // response it gets from the server "as is"...
                // Just what you were doing, but instead of
                // putting the response into textarea, execute it...
                eval(xmlhttp.responseText);
            }
        // --></script>
    </head>
    <body>
        <form>
            <textarea id="txt1"></textarea>
            <textarea id="txt2"></textarea>
            <input type="button" onclick="doAjaxRequest();return false">
        </form>
    </body>
</html> 
```

而服务器端...

```
<?php
    // It doesn't matter which way you get the data, just... use it :-p
    echo('document.getElementById("txt1").value="Response 1";');
    echo('document.getElementById("txt2").value="Response 2";');
?> 
```

# android - Android：如何解析具有多字符分隔的字符串

> ID：10571871
> 
> 赞同：1
> 
> 时间：2012-05-13T12:51:48.843
> 
> 标签：android, parsing

我想解析这个字符串“hello>kok>peoplekok”我希望分隔符不仅仅是一个字符，而是一个字符串。假设 ">kok>" 所以结果将是 1 : hello 2: peoplekok

我已经研究了 split() 方法，但似乎分隔符只是字符。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T12:54:14.183

split 方法采用正则表达式:) 试试

```
"hello>kok>peoplekok".split(">kok>"); 
```

也看看这个[链接](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T12:55:34.763

```
String testString = "hello>kok>peoplekok";
String result[] = testString.split("">kok>"); 
```

现在结果包含答案

```
result[0] =  hello
result[1] =  peoplekok 
```

# c++ - OpenCV imwrite 保存完整的黑色 jpeg

> ID：10571874
> 
> 赞同：12
> 
> 时间：2012-05-13T12:51:58.460
> 
> 标签：c++, opencv, matrix, save, depth

我已经为 dft 做了一些预处理，我正在尝试通过 imwrite 保存这张图片。

我裁剪的图像包含此信息

```
output.type()           5   

output.channels()       1

output.depth()          5 
```

但是每次我保存它都会给出黑色输出。我已经检查了 stackoverflow 的旧现有线程，但似乎都对我不起作用。例如 [OpenCV2.3 imwrite 保存黑色图像](https://stackoverflow.com/questions/7463732/opencv2-3-imwrite-saves-black-image)

我也尝试了许多颜色转换和深度转换，但我不知道为什么它不起作用。

```
std::vector<int> qualityType;
qualityType.push_back(CV_IMWRITE_JPEG_QUALITY);
qualityType.push_back(90);

Mat out1,out2;

cv::cvtColor(output, out1, CV_GRAY2BGR);
//out1.convertTo(out2,CV_8U,1./256); // i tried this too 
cv::imwrite("dft1.jpg",out1,qualityType); // tried even using quality type 
```

imshow 显示此图像很好，只有当我保存它时才会出现问题。

请帮忙

[编辑] 也许我制作的 dft 类有问题，因为每当我使用 dft 函数时，输出只能与 inshow 一起使用，但保存时它不起作用。

```
CDftRidgeAnalyses::CDftRidgeAnalyses(void)
{
}

CDftRidgeAnalyses::~CDftRidgeAnalyses(void)
{
}

Mat CDftRidgeAnalyses::GetRidgeAnalyses(Mat inpGray)
{
    Mat img = inpGray;
    int WidthPadded=0,HeightPadded=0;
    WidthPadded=img.cols*2;
    HeightPadded=img.rows*2;
    int M = getOptimalDFTSize( img.rows );
    //Create a Gaussian Highpass filter 5% the height of the Fourier transform
    double db  = 0.05 * HeightPadded;

    Mat fft = ForierTransform(img.clone(),HeightPadded,WidthPadded);

    Mat ghpf = CreateGaussianHighPassFilter(Size(WidthPadded, HeightPadded), db);
    Mat res;

    cv::mulSpectrums(fft,ghpf,res,DFT_COMPLEX_OUTPUT);

    Mat mag  = GetDftToImage(res,img);

    int cx = mag.cols/2;
    int cy = mag.rows/2;
    cv::Mat croped = mag(cv::Rect(0,0,cx, cy));

    cv::threshold(mag, mag, 0.019, 1, cv::THRESH_BINARY);

    Mat bgr;
    cvtColor(mag,bgr,CV_GRAY2RGB);

    //imshow("XXX",bgr);
    //imshow("croped", croped);
    //imshow("img",img);
    //
    //cv::waitKey();
    return croped;
}

Mat CDftRidgeAnalyses::ForierTransform(Mat inpGray,int M,int N)
{
    Mat img = inpGray;
    int i = img.channels();

    Mat padded;
    Mat img2;
    img.convertTo(img2,CV_64F,1./255);

    copyMakeBorder(img2, padded, 0, M - img2.rows, 0, N - img2.cols, BORDER_CONSTANT, Scalar::all(0));

    Mat element1 = Mat_<float>(padded);
    Mat element2 = Mat::zeros(padded.size(), CV_32F);
    Mat planes[] = {element1, element2};
    Mat complexImg;

    merge(planes, 2, complexImg);

    dft(complexImg, complexImg ,0, img.rows);

    //printMat(complexImg);

    return complexImg;
}

double CDftRidgeAnalyses::pixelDistance(double u, double v)
{
    return cv::sqrt(u*u + v*v);
}

double CDftRidgeAnalyses::gaussianCoeff(double u, double v, double d0)
{
    double d = pixelDistance(u, v);
    return 1.0 - cv::exp((-d*d) / (2*d0*d0));
}

cv::Mat CDftRidgeAnalyses::CreateGaussianHighPassFilter(cv::Size size, double cutoffInPixels)
{
    Mat ghpf(size, CV_32F);

    cv::Point center2((size.width*0.80), size.width/2);
    //cv::Point center2(0,0);

    for(int u = 0; u < ghpf.rows; u++)
    {
        for(int v = 0; v < ghpf.cols; v++)
        {
            ghpf.at<float>(u, v) = gaussianCoeff(u - center2.x, v - center2.y, cutoffInPixels);
        }
    }

    Mat bmp;

    int channels = ghpf.channels();
    int type = ghpf.type();
    int depth = ghpf.depth();

    cv::cvtColor(ghpf,bmp,CV_GRAY2RGB); 
    cv::cvtColor(ghpf,bmp,CV_GRAY2BGRA); 
    //imshow("XXX",bmp);
    int cx = ghpf.cols/2;
    int cy = ghpf.rows/2;
    Mat tmp;
    int iExactright =  (size.width*0.59);
    int iExactbottom = (size.height*0.86);
    //full   Mat q0(ghpf, Rect(69,10,400,290));

//  Mat whiteq(ghpf, Rect(0,390,270,330));

    int iMainleft=0, iMainright=0;
    int iMainBottom=0,iMainTop=0;

    Mat Quad;
    Mat ql(ghpf, Rect(190,0,270,330));

    /** Make the rectangle on middle default filter with respect to top right angle**/
    iMainleft=(size.width*0.111);
    iMainright=(size.width*0.402);
    iMainTop=(size.height*0.484);
    iMainBottom = (size.height*0.155);
    Quad = ghpf(Rect(iMainleft,iMainTop,iMainright+6,iMainBottom));
    Mat qTopRight(ghpf, Rect(iExactright,0, iMainright+6, iMainBottom));
    Quad.copyTo(qTopRight);

    /** Make the rectangle on middle default filter with respect to top left angle**/
    iMainright=(size.width*0.402);
    Quad = ghpf(Rect(300,iMainTop,300,iMainBottom));
    Mat qTopLeft(ghpf, Rect(0,0, 300, iMainBottom));
    Quad.copyTo(qTopLeft);

    /** Make the rectangle on middle default filter with respect to bottom left angle**/
    iMainTop = iMainTop-iMainBottom;
    iExactbottom = size.height - iMainBottom;
    Quad = ghpf(Rect(300,iMainTop,300,iMainBottom));
    Mat qBottomLeft(ghpf, Rect(0,iExactbottom, 300, iMainBottom));
    Quad.copyTo(qBottomLeft);

    /** Make the rectangle on middle default filter with respect to bottom right angle**/
    iMainleft=(size.width*0.111);
    iMainright=(size.width*0.402);

    Quad = ghpf(Rect(iMainleft,iMainTop,iMainright+6,iMainBottom));
    Mat qBottomRight(ghpf, Rect(iExactright,iExactbottom, iMainright+6, iMainBottom));
    Quad.copyTo(qBottomRight);

    // remove middle rectangle [ circle ] 
    iMainright=(size.width*0.402);
    Quad = ghpf(Rect(0,iMainTop+iMainTop,size.width,iMainBottom+iMainBottom-130));
    Mat qMiddle(ghpf,Rect(0,iMainTop+150,size.width,iMainBottom+iMainBottom-130));
    Quad.copyTo(qMiddle);
    qMiddle =ghpf(Rect(0,iMainTop-10,size.width,iMainBottom+iMainBottom-130));
    Quad.copyTo(qMiddle);

    normalize(ghpf, ghpf, 0, 1, CV_MINMAX);

    /*Mat x;
    cv::resize(ghpf,x,cv::Size(400,700));
    imshow("fftXhighpass2", x);*/
    Filter = ghpf;
    Mat padded;

    copyMakeBorder(ghpf, padded, 0, size.height - ghpf.rows, 0, size.width - ghpf.cols, BORDER_CONSTANT, Scalar::all(0));

    Mat planes[] = {Mat_<float>(padded), Mat::zeros(padded.size(), CV_32F)};
    Mat complexImg;

    merge(planes, 2, complexImg);

    return complexImg;
}

Mat CDftRidgeAnalyses::GetDftToImage(Mat res,Mat orgImage)
{
    idft(res,res,DFT_COMPLEX_OUTPUT,orgImage.rows);

    Mat padded;
    copyMakeBorder(orgImage, padded, 0,orgImage.rows, 0, orgImage.cols, BORDER_CONSTANT, Scalar::all(0));
    Mat planes[] = {Mat_<float>(padded), Mat::zeros(padded.size(), CV_32F)};
    split(res, planes);
    magnitude(planes[0], planes[1], planes[0]);
    Mat mag = planes[0];
    mag += Scalar::all(1);
  //  log(mag, mag);

    // crop the spectrum, if it has an odd number of rows or columns
    mag = mag(Rect(0, 0, mag.cols & -2, mag.rows & -2));

    normalize(mag, mag, 1, 0, CV_MINMAX);

    return mag;
} 
```

我试图保存的输出来自

```
Mat org = imread("4.png",CV_LOAD_IMAGE_GRAYSCALE);
Mat re;
resize(org,re,cv::Size(311,519));
Mat xyz = CDftRidgeAnalyses::GetRidgeAnalyses(re);
cv::imwrite("dft1.jpg",xyz); 
```

这里矩阵 xyz 有这些值

```
output.type()           5   

output.channels()       1

output.depth()          5 
```

我希望你们现在可以更好地帮助我......也许从复杂过滤器转换后我失去了一些分数？？？？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-28T17:41:09.353

`imwrite`以 0 到 255 的比例打印，但您的图像是 0 到 1 的比例。要扩大规模，请使用以下行：

```
image.convertTo(image, CV_8UC3, 255.0); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-26T10:20:45.117

这“感觉”像是浮点数和整数的问题。当您的图像具有浮点值时，opencv 的 imshow() 期望这些值介于 0 和 1 之间：

[http://opencv.itseez.com/modules/highgui/doc/user_interface.html?highlight=imshow#cv2.imshow](http://opencv.itseez.com/modules/highgui/doc/user_interface.html?highlight=imshow#cv2.imshow)

我不太确定 imwrite() 对浮点图像有什么作用，因为我在这里无法阅读：

[http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imwrite#cv2.imwrite](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imwrite#cv2.imwrite)

无论如何， imwrite 可能期望 0 到 255 之间的整数值，并且可能只是将浮点数转换为整数。在这种情况下，几乎所有内容都被转换为 0（ig 0.8 被转换为 0），因此您的黑色图像。

尝试将您的图像转换为 CV_U8CX。或者，这是我用来调试此类 opencv 问题的东西：

```
void printType(Mat &mat) {
         if(mat.depth() == CV_8U)  printf("unsigned char(%d)", mat.channels());
    else if(mat.depth() == CV_8S)  printf("signed char(%d)", mat.channels());
    else if(mat.depth() == CV_16U) printf("unsigned short(%d)", mat.channels());
    else if(mat.depth() == CV_16S) printf("signed short(%d)", mat.channels());
    else if(mat.depth() == CV_32S) printf("signed int(%d)", mat.channels());
    else if(mat.depth() == CV_32F) printf("float(%d)", mat.channels());
    else if(mat.depth() == CV_64F) printf("double(%d)", mat.channels());
    else                           printf("unknown(%d)", mat.channels());
}

void printInfo(const char *prefix, Mat &mat) {
    printf("%s: ", prefix);
    printf("dim(%d, %d)", mat.rows, mat.cols);
    printType(mat);
    printf("\n");
}

void printInfo(Mat &mat) {
    printf("dim(%d, %d)", mat.rows, mat.cols);
    printType(mat);
    printf("\n");
} 
```

通过这种方式，您可以找出您的 cv::Mat 在其数据字段中的内容。

PS：我没有彻底调试你的代码，所以对其他问题保持开放。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-01T23:13:44.360

来自 Google的 **Python 解决方案**

```
import numpy as np
import cv2

frame_normed = 255 * (frame - frame.min()) / (frame.max() - frame.min())
frame_normed = np.array(frame_normed, np.int)

cv2.imwrite("path/to/out/file", frame_normed) 
```

# agda - 在商类型上定义非一元函数时避免外延假设

> ID：10571878
> 
> 赞同：8
> 
> 时间：2012-05-13T12:52:29.410
> 
> 标签：agda

我试图在商类型上定义具有多个参数的函数。使用柯里化，我可以将问题减少到在逐点积 setoid 上定义函数：

```
module Foo where

open import Quotient
open import Relation.Binary
open import Relation.Binary.PropositionalEquality as P using (proof-irrelevance)

private
  open import Relation.Binary.Product.Pointwise
  open import Data.Product

  _×-quot_ : ∀ {c ℓ} {S : Setoid c ℓ} → Quotient S → Quotient S → Quotient (S ×-setoid S)
  _×-quot_ {S = S} = rec S (λ x → rec S (λ y → [ x , y ])
                           (λ {y} {y′} y≈y′ → [ refl , y≈y′ ]-cong))
                           (λ {x} {x′} x≈x′ → extensionality (elim _ _ (λ _ → [ x≈x′ , refl ]-cong)
                           (λ _ → proof-irrelevance _ _)))
    where
    open Setoid S
    postulate extensionality : P.Extensionality _ _ 
```

我的问题是，有没有办法在`×-quot`不假设外延性的情况下证明它的合理性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T16:29:22.673

您需要可扩展性，因为您选择的`P`参数值是函数类型。`rec`如果您避免这种情况并改用`Quotient`类​​型`P`，则可以这样做：

```
module Quotients where

open import Quotient
open import Relation.Binary
open import Relation.Binary.PropositionalEquality as P using (proof-irrelevance; _≡_)

private
  open import Relation.Binary.Product.Pointwise
  open import Data.Product
  open import Function.Equality

  map-quot : ∀ {c₁ ℓ₁ c₂ ℓ₂} {A : Setoid c₁ ℓ₁} {B : Setoid c₂ ℓ₂} → A ⟶ B → Quotient A → Quotient B
  map-quot f = rec _ (λ x → [ f ⟨$⟩ x ]) (λ x≈y → [ cong f x≈y ]-cong)

  map-quot-cong : ∀ {c₁ ℓ₁ c₂ ℓ₂} {A : Setoid c₁ ℓ₁} {B : Setoid c₂ ℓ₂} → 
    let open Setoid (A ⇨ B) renaming (_≈_ to _≐_) in
    (f₁ f₂ : A ⟶ B) → (f₁ ≐ f₂) → (x : Quotient A) → map-quot f₁ x ≡ map-quot f₂ x
  map-quot-cong {A = A} {B = B} f₁ f₂ eq x = 
     elim _ 
     (λ x → map-quot f₁ x ≡ map-quot f₂ x)
     (λ x' → [ eq (Setoid.refl A) ]-cong)
     (λ x≈y → proof-irrelevance _ _)
     x

  _×-quot₁_ : ∀ {c ℓ} {A B : Setoid c ℓ} → Quotient A → Quotient B → Quotient (A ×-setoid B)
  _×-quot₁_ {A = A} {B = B} qx qy = rec A (λ x → map-quot (f x) qy)
                       (λ {x} {x′} x≈x′ → map-quot-cong (f x) (f x′) (λ eq → x≈x′ , eq) qy) qx
    where
     module A = Setoid A
     f = λ x → record { _⟨$⟩_ = _,_ x; cong = λ eq → (A.refl , eq) } 
```

还有另一种证明方式，经历`_<$>_`（我首先做了并决定不扔掉）：

```
 infixl 3 _<$>_
  _<$>_ : ∀ {c₁ ℓ₁ c₂ ℓ₂} {A : Setoid c₁ ℓ₁} {B : Setoid c₂ ℓ₂} → Quotient (A ⇨ B) → Quotient A → Quotient B
  _<$>_ {A = A} {B = B} qf qa = 
      rec (A ⇨ B) {P = Quotient B} 
      (λ x → map-quot x qa) 
      (λ {f₁} {f₂} f₁≈f₂ → map-quot-cong f₁ f₂ f₁≈f₂ qa) qf 

  comma0 : ∀ {c ℓ} → ∀ {A B : Setoid c ℓ} → Setoid.Carrier (A ⇨ B ⇨ A ×-setoid B)
  comma0 {A = A} {B = B} = record 
    { _⟨$⟩_ = λ x → record 
      { _⟨$⟩_ = λ y → x , y
      ; cong = λ eq → Setoid.refl A , eq 
      }
    ; cong = λ eqa eqb → eqa , eqb
    }

  comma : ∀ {c ℓ} → ∀ {A B : Setoid c ℓ} → Quotient (A ⇨ B ⇨ A ×-setoid B)
  comma = [ comma0 ]

  _×-quot₂_ : ∀ {c ℓ} {A B : Setoid c ℓ} → Quotient A → Quotient B → Quotient (A ×-setoid B)
  a ×-quot₂ b = comma <$> a <$> b 
```

还有另一个版本`_<$>_`，现在使用`join`：

```
 map-quot-f : ∀ {c₁ ℓ₁ c₂ ℓ₂} {A : Setoid c₁ ℓ₁} {B : Setoid c₂ ℓ₂} 
      → Quotient A → (A ⇨ B) ⟶ (P.setoid (Quotient B))
  map-quot-f qa = record { _⟨$⟩_ = λ f → map-quot f qa; cong = λ eq → map-quot-cong _ _ eq qa }

  join : ∀ {c ℓ} → {S : Setoid c ℓ} → Quotient (P.setoid (Quotient S)) → Quotient S
  join {S = S} q = rec (P.setoid (Quotient S)) (λ x → x) (λ eq → eq) q

  infixl 3 _<$>_
  _<$>_ : ∀ {c₁ ℓ₁ c₂ ℓ₂} {A : Setoid c₁ ℓ₁} {B : Setoid c₂ ℓ₂} → Quotient (A ⇨ B) → Quotient A → Quotient B
  _<$>_ {A = A} {B = B} qf qa = join (map-quot (map-quot-f qa) qf) 
```

在这里很明显那里有某种单子。多么好的发现！:)

# android - 在不受支持的国家/地区的 android 市场上发布免费的 android 应用程序

> ID：10571887
> 
> 赞同：0
> 
> 时间：2012-05-13T12:53:54.787
> 
> 标签：android

我知道我的国家“印度”尚不支持在 android 市场上销售应用程序，根据此链接[支持商家销售付费应用程序的位置。](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

但是根据[免费发布者支持的位置](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=136758)，我应该能够发布免费应用程序。

但是，当我尝试在 Android 开发者控制台上注册时，在我需要接受条款和条件的屏幕“开发者分发协议”上，没有选项可以在下拉列表中选择我的国家“印度”。

我只需要发布免费的应用程序。:(

> 我的问题是——
> 
> 如果有来自不受支持国家/地区的开发者已经注册，您在条款和条件页面（“阅读并同意开发者分发协议”）上选择了哪个国家/地区？

我也试过邮寄谷歌帮助中心......但他们只是给出一个自动标准回复，这对我没有帮助。

非常感谢任何帮助！

已编辑：这是我需要选择国家/地区的页面：（此处未列出印度） ![在此处输入图像描述](../Images/9424114afa0de43d970300e1f9fa993d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T16:53:43.547

此语言选择器用于以其他语言显示许可协议。它与发布免费应用程序无关。您将在那里选择什么语言并不重要。所以接受许可协议并继续，您将能够发布您的应用程序。

希望这可以帮助...

# java - java- jsf 库，具有良好的移动浏览器支持

> ID：10571888
> 
> 赞同：0
> 
> 时间：2012-05-13T12:54:06.037
> 
> 标签：java, jsf

我正在寻找创建一个简单的移动 Web 应用程序，并且为此目的我正在考虑一个好的 jsf（Java 服务器端面）库。

您推荐哪些 JSF 库？我正在寻找的东西

(a) 对至少 android/iphone/blackberry/windows 移动设备有很好的支持。(b) 易于创建新的移动皮肤。（这非常重要！） (c) 当从 PC 访问 Web 应用程序时，相同的代码库工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:18:27.507

我有时会使用 Primefaces 来开发网络应用程序。他们有一个移动版本的库，从演示来看，它看起来很棒。[在http://www.primefaces.org/showcase-labs/mobile/index.jsf](http://www.primefaces.org/showcase-labs/mobile/index.jsf)尝试一下。

# php - PHP ImageMagick 将图像字符串输出到标准输出而不是将其保存到文件中

> ID：10571889
> 
> 赞同：1
> 
> 时间：2012-05-13T12:54:11.107
> 
> 标签：php, imagemagick, exec, stdout, animated-gif

我有以下代码：

```
$animation = 'animation.gif';

$watermark = 'watermark.jpg';

$watermarked_animation = 'watermarked.gif';

$cmd = "$animation -extent 400x255 -coalesce -gravity southwest -geometry +0+0 null: $watermark -layers composite -layers optimize";

exec("convert $cmd $watermarked_animation", $output);

print_r($output); 
```

我想将图像字符串输出到标准输出而不是将其保存到文件中？

我怎样才能做到这一点？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:02:08.183

您是否尝试在目标文件名的位置添加连字符？为我工作，但是没有用你更复杂的文件名测试它..

因此，例如，这很好用：

```
convert test.jpg -size 50x50 - 
```

要处理字符集，试试这个：

```
exec('LANG=\"en_US.UTF8\" convert test.jpg -size 50x50 -'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:11:58.097

你也可以试试这个方法。

```
$im = new Imagick('image.jpg');
header("Content-type: image/jpeg");
$output = (string) $im;
echo $output; 
```

# iphone - iOS NSMutableString 拆分类似于 java 的 String 方法 split()

> ID：10571901
> 
> 赞同：1
> 
> 时间：2012-05-13T12:55:44.507
> 
> 标签：iphone, ios

我有一个使用 $ 作为分隔符的 NSString，例如

```
 NSMutableString *str = @"AA$BB$CC"; 
```

所以，我的问题是：有没有一种方法可以通过分隔符 '$' 拆分 NSMutableString 并存储到一个数组中，就像在 java 中一样：

```
 String[] list = str.split() 
```

感谢提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:00:20.447

```
NSArray* splittedArray= [str componentsSeparatedByString:@"$"];
for (NSString *component in splittedArray) {
  NSLog(@"%@", component);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T13:02:10.163

是的。您可以使用与方法`componentsSeparatedByString`类似的`split()`方法。例子：`NSArray* list= [str componentsSeparatedByString:@"$"];`

# versioning - 通过 DAV 对 JCR 节点进行版本控制 - 如何？

> ID：10571902
> 
> 赞同：1
> 
> 时间：2012-05-13T12:55:46.487
> 
> 标签：versioning, jackrabbit, jcr

背景：我一直在考虑采用包括 Apache Sling、Jackrabbit 和 Jetty 在内的服务组合，用于网站设计中的内容管理。在这一点上，我想设想可以创建一个使用 DAV 访问 JCR 内容存储库的移动内容创建平台。JCR 2.0 (JSR-283) 中的版本控制问题让我想知道，如何通过 HTTP 进行 JCR 版本控制操作？

更详细地说：我正在查看我认为是[JSR-283 第 15 节的内容，以 Adob​​e 的 HTML 格式提供。](http://www.day.com/specs/jcr/2.0/15_Versioning.html)在该部分中，JSR-283 提出了 JCR 节点的版本控制概念。

那么，我知道在 JSR-283 兼容的 Jackrabbit 版本中[有一个 VersionManager API 。](https://stackoverflow.com/questions/3943609/jcr-checkin-checkout-operations)这用于解释如何通过 API 执行 JCR (JSR-283) 版本控制操作。那么，用户代理如何通过 DAV 进行版本控制操作呢？

我想自己回答这个问题，但我什至不知道从哪里开始。

JSR-283 的另一部分是否解释了版本签入/签出操作如何转换为 HTTP 请求？这是简单的 DAV 属性的问题吗？我什至接近目标吗？

/需要同行评审，哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-24T16:49:25.907

Jackrabbit 网站上有一个文档（JCR_Webdav_Protocol.doc - Apache Jackrabbit）描述了 WebDAV 方法调用和 Jackrabbit JCR API 调用之间的映射：

[http://jackrabbit.apache.org/JCR_Webdav_Protocol.doc](http://jackrabbit.apache.org/JCR_Webdav_Protocol.doc)

虽然本文档最后一次更新是 2006 年 3 月 29 日，但我发现迈出第一步非常有帮助。

我使用 Word 和 Wireshark 针对我的 Jackrabbit 默认存储库跟踪了与 Microsoft Office 2010 的会话。以下 shell 脚本在 *nix 上使用 curl 和 libreoffice 执行相同的操作。

* * *

如您所见，删除、上传、版本控制文档 WebDAV 调用是在 Word 中的操作之前执行的。

浏览目录会在您的 Internet Explorer 实例中打开 URL。

Microsoft Word 检索文档属性 (PROPFIND)，然后打开 (GET) 并锁定文档。它还出于未知原因请求 %EE%B3%B0 上的属性（UTF-8 (hex) 0xEE 0xB3 0xB0 (eeb3b0) 或 UTF-16 "\uECF0" aka "" from the Private Use Range of Unicode Character Set） .

在 Microsoft Word 中保存文档后，它将上传 (PUT) 并更新文档节点的属性 (PROPPATCH) 以包括 Win32CreationTime、Win32LastModifiedTime 和 Win32LastAccessTime 戳。

在 Word 中关闭文档将使用 UNLOCK 释放获取的锁。

再次手动执行 CHECKIN 文档以完成版本生命周期。

版本树报告也可以从 WebDAV 获得。

```
#!/bin/sh

# Delete document
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X DELETE -v http://localhost:7001/repository/default/test.docx

# Upload document
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PUT -v http://localhost:7001/repository/default/test.docx --data-binary "@test.docx"

# Version-Control document
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X VERSION-CONTROL -v http://localhost:7001/repository/default/test.docx 

# Checkout document
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X CHECKOUT -v http://localhost:7001/repository/default/test.docx

# Browse directory
curl -A "Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko" -X GET -v http://localhost:7001/repository/default/ 

# Open document in Word
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PROPFIND -v http://localhost:7001/repository/default/test.docx | xmllint --format -
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X GET -v http://localhost:7001/repository/default/test.docx -O
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PROPFIND -v http://localhost:7001/repository/default/test.docx%EE%B3%B0
cat > LOCK_document.xml <<EOF
<?xml version="1.0" encoding="utf-8" ?>
<D:lockinfo xmlns:D="DAV:">
  <D:lockscope>
    <D:exclusive/>
  </D:lockscope>
  <D:locktype>
    <D:write/>
  </D:locktype>
  <D:owner>
    <D:href>WINDOWSDOMAIN\USER</D:href>
  </D:owner>
</D:lockinfo>
EOF
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X LOCK -v http://localhost:7001/repository/default/test.docx --data "@LOCK_document.xml" | xmllint --format - | tee LOCK_document.txt
export LOCK_token=$(grep opaquelocktoken LOCK_document.txt | sed 's/^.*opaquelocktoken:/<opaquelocktoken:/' | sed 's/<\/D:href>.*$/>/')

curl -A "Microsoft Office Existence Discovery" -X HEAD -v http://localhost:7001/repository/default/test.docx
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X OPTIONS -v http://localhost:7001/ -H "translate: f"

# Edit document in Word
libreoffice test.docx 

# Save document in Word
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X HEAD -v http://localhost:7001/repository/default/test.docx
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PUT -v http://localhost:7001/repository/default/test.docx -H "If: (${LOCK_token})" --data-binary "@test.docx"
cat > PROPPATCH_document.xml <<EOF
<?xml version="1.0" encoding="utf-8" ?>
<D:propertyupdate xmlns:D="DAV:" xmlns:Z="urn:schemas-microsoft-com:">
  <D:set>
    <D:prop>
      <Z:Win32CreationTime>Mon, 09 Mar 2015 15:24:36 GMT</Z:Win32CreationTime>
      <Z:Win32LastAccessTime>Mon, 16 Mar 2015 13:22:40 GMT</Z:Win32LastAccessTime>
      <Z:Win32LastModifiedTime>Mon, 16 Mar 2015 13:22:40 GMT</Z:Win32LastModifiedTime>
    </D:prop>
  </D:set>
</D:propertyupdate>
EOF
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PROPPATCH -v http://localhost:7001/repository/default/test.docx -H "If: (${LOCK_token})" --data "@PROPPATCH_document.xml" | xmllint --format -

# Close document in Word
curl -A "Microsoft Office Existence Discovery" -X HEAD -v http://localhost:7001/repository/default/test.docx
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X UNLOCK -v http://localhost:7001/repository/default/test.docx -H "Lock-Token: ${LOCK_token}"

# Checkin document
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X CHECKIN -v http://localhost:7001/repository/default/test.docx

# Version tree report on document
cat > REPORT_version-tree.xml <<EOF
<?xml version="1.0" encoding="utf-8" ?>
<D:version-tree xmlns:D="DAV:">
 <D:prop>
   <D:version-name/>
 </D:prop>
</D:version-tree>
EOF
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X REPORT -v http://localhost:7001/repository/default/test.docx --data "@REPORT_version-tree.xml" | xmllint --format - 
```

我只是对 Jackrabbit 的自动版本功能有问题，显然还没有实现。

[https://issues.apache.org/jira/browse/JCR-1348](https://issues.apache.org/jira/browse/JCR-1348)

```
#<!--
# see http://www.webdav.org/specs/rfc3253.html#PROPERTY_auto-version
#      <D:auto-version>checkout-checkin</D:auto-version>
#      <D:auto-version>checkout-unlocked-checkin</D:auto-version>
#      <D:auto-version>checkout</D:auto-version>
#      <D:auto-version>locked-checkout</D:auto-version>
#-->
cat > PROPPATCH_auto-version.xml <<EOF
<?xml version="1.0" encoding="utf-8" ?>
<D:propertyupdate xmlns:D="DAV:">
  <D:set>
    <D:prop>
      <D:auto-version>checkout-checkin</D:auto-version>
    </D:prop>
  </D:set>
</D:propertyupdate>
EOF
curl -A Microsoft-WebDAV-MiniRedir/6.1.7601 -X PROPPATCH -v http://localhost:7001/repository/default/test.docx -H "If: (${LOCK_token})" --data "@PROPPATCH_auto-version.xml" | xmllint --format - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T14:54:24.047

> 我知道 JCR 版本控制框架有效地围绕 mix:versionable JCR mixin 节点类型（Jackrabbit Wiki）。因此，如果一个节点被创建为 mix:versionable 类型，那么我认为传统的 WebDAV 签入和签出操作——可以用 WebDAV API 封装——这些可能就是执行 JCR 签入/签出操作的方式在可版本化的节点上。那，我想，会回答这么多问题
> 
> 我没有看到对 JCR 检查点操作的任何确切的 DAV 补充，但如果这只是检查后检查，正如文档所解释的那样，那么通过 DAV 模拟就很容易了——因此对 JCR 操作进行了补充。

# drupal - 如何在drupal中显示产品的多个图像

> ID：10571903
> 
> 赞同：0
> 
> 时间：2012-05-13T12:55:46.800
> 
> 标签：drupal, commerce

我正在使用 Drupal commerce 目前，我已经展示了一张大尺寸的产品图片，或者可以展示多张相同尺寸的产品图片。但是，我想显示每个产品的多个图像，一个大尺寸的图像，其余的小缩略图尺寸，这样无论点击哪个都成为大图像，就像使用 drupal commerce 制作的以下页面一样：

[https://badboy.com/products/tops/girls-t-shirts/ornate-crest-deep-v-neck](https://badboy.com/products/tops/girls-t-shirts/ornate-crest-deep-v-neck)

我想做类似的事情。有人可以指出正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T17:51:52.663

[这与您描述的http://www.drupalcommerce.org/node/1083](http://www.drupalcommerce.org/node/1083)非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T07:41:01.833

--登录到您的drupal管理员端--单击结构->内容类型->您的内容类型->管理字段-将图像字段添加到您的内容类型-->选择“无限”选项为您的产品上传多个图像

# hibernate - 如何使用 Hibernate Annotation 使用其中的自身列表来注释实体

> ID：10571909
> 
> 赞同：2
> 
> 时间：2012-05-13T12:56:30.943
> 
> 标签：hibernate, hibernate-annotations

我有一个类别实体，它有一个类别作为父类别，一个类别列表作为子类别。这是它的声明：

```
@Entity
@Table(name="CATEGORYENTITY")
public class CategoryEntity extends BaseEntity<Long> {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue
    @Column(name="ID")
    private Long id;

    @Column(name="NAME")
    private String name;

    @Column(name="VIEWSCOUNT")
    private Integer viewsCount;

    @OneToMany(fetch=FetchType.EAGER, cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
    @Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
    @JoinColumn(name="CATEGORY_ID")
    private List<CategoryEntity> childCategories;

    @ManyToOne(fetch=FetchType.EAGER)
    @JoinColumn(name="CATEGORY_ID")
    private CategoryEntity parent;

setters and getters... 
```

它在保存和更新时工作正常，但是当尝试获取所有类别时......每个孩子也返回一个父母！我的意思是，如果我有一个 mainCat 并且这个 mainCat 有 4 个孩子，例如，当从 db 获取所有类别时，它返回所有四个孩子和令人惊讶的 4 个 mainCat ...奇怪的部分是返回的对象是正确的，它们的属性是设置正确和 4 mainCat 是一样的！！！我该怎么办？

我使用以下代码来检索结果：

```
public List<E> find(E example, final PagingObject paging, Map<?, ?> filter) throws Exception {
    // create the criteria
    final DetachedCriteria detachedCriteria = createCriteria(filter);
    // add restrictions to the criteria based on example entity
    pruneCriteria(detachedCriteria, example);
    List<E> result = getHibernateTemplate().execute(new HibernateCallback<List<E>>() {
        @SuppressWarnings("unchecked")
        @Override
        public List<E> doInHibernate(Session session) throws HibernateException, SQLException {
            // attach criteria to the session
            Criteria criteria = detachedCriteria.getExecutableCriteria(session);
            // add paging and sort to the criteria
            paginate(criteria, paging);
            List<E> list = criteria.list();
            return list;
        }
    });
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:08:18.450

双向关联总是有所有者方和反方。所有者方面是您定义关联如何映射的地方（使用@JoinColumn）。另一方面，您不能定义关联的映射方式（这将是多余的）。但是您必须通过使用 mappedBy 属性来定义它的反面。

您定义了两个不同的关联，而不是定义父子双向关联。

集合的映射应该是：

```
@OneToMany(mappedBy = "parent",
           fetch=FetchType.EAGER, 
           cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
@Cascade(org.hibernate.annotations.CascadeType.SAVE_UPDATE)
private List<CategoryEntity> childCategories; 
```

请注意，将这种关联的两侧设置为 EAGER 将强制 Hibernate 在每次加载树的单个节点时加载整个树。为要执行的大量查询和糟糕的性能做好准备。

# c++ - mongoDb C++ 驱动程序忽略 mongoclient 库

> ID：10571911
> 
> 赞同：1
> 
> 时间：2012-05-13T12:56:50.497
> 
> 标签：c++, mongodb, boost, linker-errors

我尝试将我的游戏代码从 Windows 7 移植到 Unix 平台。我使用的是从源最新的 c++ mongodb 驱动程序编译的。步骤与 windows 相同。但是我在 mongoclient 库链接方面遇到了一些麻烦。我在这里有错误分支[很多很多错误](http://pastebin.com/J42yes5u)。当我根本不链接 libmongoclient.a 时，g++ 会产生相同的错误。我有 g++ 4.4.5 版本。我在这里错过了什么？

更新：
我正在尝试用 mongo_client_lib.cpp 编译结果将在稍后公布。重新编译 boost 和 mongo 后仍然有同样的错误。当我包含 mongo_client_lib.cpp 时，我有[更多错误](http://pastebin.com/zwtzMaGE)。它仍然没有看到 mongo 客户端的库文件。=/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:50:50.767

[MongoDB 文档](http://www.mongodb.org/pages/viewpage.action?pageId=21266598#C%2B%2BDriverCompilingandLinking-Linux)中的示例显示在库*之前*`-lmongoclient`列出。你的有它。*`-boost...`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:40:42.987

最后原因是编译模式错误。MongoDb 为发布版本提供驱动程序。我是在调试模式下构建的。在 x64 版本中构建使 mongoclient 工作！*

# jquery - jquery .animate() 在滚动时一遍又一遍地重复

> ID：10571914
> 
> 赞同：1
> 
> 时间：2012-05-13T12:57:27.713
> 
> 标签：jquery, scroll, jquery-animate

嗨，我有一个“返回顶部”按钮，一旦浏览器滚动一定距离，它就会淡入并动画。问题是每次浏览器都会重复 .animate() 一次又一次。任何想法如何在动画发生一次后停止动画？干杯

这是代码：

```
 $('.up_arrow').hide();

  // fade in up arrow 
  $(function () {
  $(window).scroll(function () {
    if ($(this).scrollTop() > 100) {
        $('.up_arrow').fadeIn(2000, 'swing')

        .animate ({
           opacity: 1,
           left: '+=30'
        },
        {
           duration: '2000',
           easing: 'swing',
           queue: false
        }           
        );

        } else {
        $('.up_arrow').fadeOut(2000, 'swing');
        }
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:01:09.703

```
$(function () {
    var stop = false;
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100 && stop == false) {
            $('.up_arrow').fadeIn(2000, 'swing')
                .animate({
                opacity: 1,
                left: '+=30'
            }, {
                duration: '2000',
                easing: 'swing',
                queue: false
            });
            stop = true;
        } else {
            $('.up_arrow').fadeOut(2000, 'swing');
            stop = false;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:02:49.010

我怀疑 stop() 方法应该在这里工作，并且可能是最佳实践。

例如

```
$('.up_arrow').stop().fadeOut(2000, 'swing'); 
```

我只将它与 animate() 一起使用，但它应该可以解决问题。

# joomla - 为 joomla 2.5 模板动态创建 templateDetails.xml

> ID：10571921
> 
> 赞同：0
> 
> 时间：2012-05-13T12:58:31.260
> 
> 标签：joomla, joomla-template

是否有任何软件可以动态创建 templateDetails.xml？我在想的是一个软件，我提供了构成模板的文件，并且该软件应该为我创建 templateDetails.xml。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T14:07:42.260

[Joomla 模板扩展](http://extensions.joomla.org/search?q=template%20xml)页面上有很多模板工具可以解决问题。

# mysql - 从列表中获取那些不在数据库中的 ID

> ID：10571923
> 
> 赞同：2
> 
> 时间：2012-05-13T12:58:56.000
> 
> 标签：mysql, sql

我有一个包含大约 200k 唯一 ID 的简单表。现在我想对照表检查一个 ID 列表（3k-10k），并从列表中获取那些不在数据库中的 ID（很少）。

我可以使用：

```
SELECT ids FROM table WHERE ids IN(id1,id2,id3...list_of_IDs_end) 
```

但这会给我数据库中列表中的 ID。

我可以做额外的编程，但有没有唯一的 sql 解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:01:07.433

你试过了吗：

```
SELECT ids FROM your_table WHERE ids NOT IN(id1,id2,id3...list of IDs end) 
```

如果可以，您可以将列表放在临时表中并使用：

```
SELECT t1.ids
FROM your_table t1 LEFT JOIN temp_table t2
    ON t1.ids = t2.ids
WHERE t2.ids IS NULL 
```

# html - 图像不会垂直拉伸到浏览器大小

> ID：10571926
> 
> 赞同：1
> 
> 时间：2012-05-13T12:59:21.577
> 
> 标签：html, css, stretch

当用户第一次访问网站时，我试图将大型背景图像拉伸到浏览器窗口的大小。从这里他们向下浏览网站的其余部分，但无论浏览器窗口的大小如何，您都看不到它而不滚动（[http://whiteboard.is](http://whiteboard.is)就是一个很好的例子）。

我正在使用下面的代码，虽然它水平拉伸，但它不会垂直拉伸超过最小高度。有任何想法吗？

**HTML**

```
<body>
<section id="first-section">
</section>
</body> 
```

**CSS**

```
body, html  {
    font-family: Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    height: 100%;
    }

#first-section {
    background: url(1.jpg) no-repeat center center;
    background-attachment: fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-width: 1024px;
    min-height: 768px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:02:18.940

可能你也可以写`height:100%`。

```
#first-section {
    background: url(1.jpg) no-repeat center center;
    background-attachment: fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    min-width: 1024px;
    min-height: 768px;
    height:100%;
    } 
```

# c# - 最终确定 C# 中的方法指南和最佳实践

> ID：10571927
> 
> 赞同：2
> 
> 时间：2012-05-13T12:59:26.253
> 
> 标签：c#, .net, coding-style, finalize

我最近遇到了一个与在 Finalize 方法重载中运行的代码有关的问题。

我主要了解与内存管理/性能相关的问题，但我很感兴趣是否有任何关于“哪些代码应该/不应该进入 Finalize 方法”的指导方针？

例如：

1.  不要从 Finalize 方法中抛出异常。
2.  代码应该快速执行。
3.  不要引发事件（？）
4.  ETC...

由于引发了导致某些异常的事件，因此可以看到我的情况。

所以我的问题是——关于最终确定方法，我必须遵循哪些准则（甚至可能使用某些工具强制执行）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-13T13:12:30.683

最终确定仅用于摆脱非托管资源

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)

> 如果 Finalize 或 Finalize 的覆盖引发异常，并且运行时不是由覆盖默认策略的应用程序托管，则运行时将终止进程，并且不会执行任何活动的 try-finally 块或终结器。如果终结器无法释放或销毁资源，此行为可确保进程完整性。
> 
> Finalize 操作具有以下限制：
> 
> 垃圾回收期间终结器执行的确切时间未定义。除非调用 Close 方法或 Dispose 方法，否则不保证在任何特定时间释放资源。
> 
> 不保证两个对象的终结器以任何特定顺序运行，即使一个对象引用另一个对象。也就是说，如果对象 A 具有对对象 B 的引用并且两者都有终结器，那么当对象 A 的终结器启动时，对象 B 可能已经终结。
> 
> 运行终结器的线程未指定

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T13:36:40.050

你应该没有理由调用finalize。尽管它对您开放，但使用 finalize 的最佳做法是不要使用它们。相反，从 IDisoposable 继承。这不仅是最佳实践，而且不会干扰垃圾收集，并且具有方便的“使用”子句来自动处理。继承这个类也向其他开发者说明这是一个有资源要处理的对象，而我是一个特殊的方式。~~我什至认为 GC 会在垃圾运行期间调用 dispose。~~

简而言之，你可以用 finalize 做的任何事情都最好用 dispose 来完成。

# php - 使用自定义框架从目录运行 PHPUnit 测试

> ID：10571931
> 
> 赞同：3
> 
> 时间：2012-05-13T13:00:10.777
> 
> 标签：php, jenkins, phpunit

对于我们的项目，我在 PHPUnit 框架之上创建了一个框架，它可以帮助我们完成编写单元测试的一些常见任务。

这个自定义框架继承自**PHPUnit_Framework_TestCase**，然后修改了 mySetup() 并为我们的代码添加了一堆有用的函数。

```
<?php

class OurUnitTestFramework extends PHPUnit_Framework_TestCase {

    public $dbMock;
    protected function mySetup (..) { ... }
    protected function testHelper () { ... }

}
?> 
```

现在在我们的测试代码中，我们只是扩展 OurUnitTestFramework 然后编写测试。

```
<?php 
require_once ("OurUnitTestFramework");
class DatabaseConnectionTest extends OurUnitTestFramework {
     parent::setUp (..) { ... }
     public function testSomeThing () { ... }
     public function testSomeOtherThing () { ... }

}
?> 
```

到目前为止，我们一直在通过 Jenkins 运行所有单元测试，它仍然运行良好，但是现在当我们尝试在文件夹中运行测试时它失败了。文件夹/子文件夹内的所有测试都运行成功，但有一个失败：

```
[sumit@dev model]$ phpunit database
PHPUnit 3.5.14 by Sebastian Bergmann.

F........

Time: 0 seconds, Memory: 10.50Mb

There was 1 failure:

1) Warning
No tests found in class "OurUnitTestFramework".

FAILURES!
Tests: 9, Assertions: 30, Failures: 1. 
```

我有一个目录数据库，其中包含子目录，并且所有测试都从该文件夹及其子文件夹通过，但是 OurUnitTestFramework 失败，说在此自定义框架中找不到测试。所以我无法理解为什么 phpunit 对测试文件中包含/扩展的文件运行单元测试？

我们可以简单地选择忽略这个错误，但我想知道是否可以这样离开，或者是否需要配置一些东西才能让它通过。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T16:30:41.003

使“OurUnitTestFramework”成为一个抽象类。

# c# - 从异常换行符规范化文本文件？

> ID：10571938
> 
> 赞同：2
> 
> 时间：2012-05-13T13:00:44.277
> 
> 标签：c#, .net-4.0, newline, normalization, text-normalization

我有几个文本文件，在我想规范化的文本之间有很多换行符，但是文本之间的换行符没有模式，例如：

```
Text

Some text

More text

More

more 
```

所以我想改变换行符的数量大于 X 到 Y 的地方所以让我们说，当有 5 个连续的换行符时，它变成 2，10 变成 3。

我目前的问题是我不知道我应该如何确定我必须规范化哪些行。

我知道我可以使用拆分来计算新行，以及其他方法，例如验证行是否为空等......但也许有一个简单的正则表达式或更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T13:32:25.447

```
List<string> Normalize(string fileName, int size)
{
    List<string> result = new List<string>();
    int blanks = 0;

    foreach (var line in File.ReadAllLines(fileName))
    {
        if (line.Trim() == "")
        {
            if (blanks++ < size)
                result.Add("");
        }
        else
        {
            blanks = 0;
            results.Add(line);
        }
    }
    return line;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:11:12.307

这是一种方法

```
string sText = File.ReadAllText(@"c:\file.txt");
sText = removeLines(sText);

public string removeLines(string sData) {
            string[] sArray = sData.Split(sDelim, 
                                          StringSplitOptions.RemoveEmptyEntries);
            StringBuilder builder = new StringBuilder();
            foreach (string value in sArray)
            {
                builder.Append(value);
                builder.Append("\r\n");
            }
            return builder.ToString();
} 
```

或使用正则表达式的单行：

```
string sText = File.ReadAllText(@"c:\file.txt");
sText = Regex.Replace(sText, "[\r\n]+", "\n"); 
```

# php - 无法在php中序列化数组数组

> ID：10571944
> 
> 赞同：-3
> 
> 时间：2012-05-13T13:01:33.270
> 
> 标签：php, serialization

我想序列化数组的数组，即多维数组，但由于某种原因它无法序列化，下面我提到我的情况

```
 array(
        'a'=>'abc',
        'b'=>array(
                   'cd'=>array(
                               'd'=>123
                              )
                   'ef'=>array(
                              'e'=>456
                              )
                   )
       ) 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:04:42.613

你忘了加逗号：

```
$myarr = array(
    'a' => 'abc',
    'b' => array(
        'cd'=>array(
            'd'=>123
        ),            // <-- comma
        'ef'=>array(
            'e'=>456
        )
    )
);
serialize($myarr); 
```

# ruby - Ruby URI 模块产生非法文件-URI

> ID：10571945
> 
> 赞同：4
> 
> 时间：2012-05-13T13:01:35.723
> 
> 标签：ruby, uri

[这是Converting file path to URI](https://stackoverflow.com/questions/10571562/converting-file-path-to-uri)的后续问题。

考虑：

```
require 'uri'

uri = URI.join('file:///', '/home/user/dir1/dir2/dir3/name.ext')
 => #<URI::Generic:0x0000000263fcc0 URL:file:/home/user/dir1/dir2/dir3/name.ext>

uri.to_s
 => "file:/home/user/dir1/dir2/dir3/name.ext" 
```

结果不合法吗？不应该是`"file://home/..."`双斜线吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:07:40.533

No. `file://home/...`是指主机上名为“home”的文件。完整的语法是`file:///home/...`，带有*三个*斜杠，其中空主机组件表示本地主机。但是，大多数识别“文件”方案的 URI 解析器也`file:/pathname`只接受一个斜杠；缺少双斜线意味着主机组件被跳过。

# android - android错误反馈装置

> ID：10571947
> 
> 赞同：0
> 
> 时间：2012-05-13T13:01:36.437
> 
> 标签：android

我想知道在 Android 设备上运行应用程序时，是否有任何方法可以获取有关幕后情况的任何反馈。如果我使用模拟器和 Eclipse，我可以看到 logcat 中发生了什么。但我正在用 ROS android 制作一个程序，但我无法在模拟器上运行它。现在我的程序崩溃了，我不知道为什么。有什么办法可以获得更多信息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:05:01.947

我可以想出几种（不太优雅）的方法来尝试找出发生了什么。

1) 显示来自潜在问题区域的 toast（是否有屏幕？）
2) 将日志写入 SD 卡（是否有 SD 卡？？）

**编辑**

我没有想清楚......你必须能够将程序加载到设备上，所以你必须能够将它连接到你的电脑。因此，正如 Agarwal 指出的那样，您很可能可以将它连接起来，在设备/机器人/其他任何设备上运行它，然后看看 logcat 会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:06:26.717

您可以使用 adb 在您的设备上调试应用程序。请参阅[http://developer.android.com/guide/developing/device.html](http://developer.android.com/guide/developing/device.html)

# c# - 从另一个线程获取控件的属性

> ID：10571949
> 
> 赞同：3
> 
> 时间：2012-05-13T13:01:49.080
> 
> 标签：c#, .net, vb.net, winforms, multithreading

我想从`BackgroundWorker`我的表单中获取控件的属性：

```
foreach (ListViewItem i in ListView.CheckedItems) { //error: Cross-thread operation not valid: Control 'ListView' accessed from a thread other than the thread it was created on.
    //do something with i
} 
```

谁能建议最简单和最简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:12:03.180

让我再试一次……

1.) 将 ListView 拖到窗体上

2.) 将 BackgroundWorker 拖到窗体上

3.) 创建一个遍历 ListViewItem 集合的方法

```
private void LoopThroughListItems()
{
    foreach (ListViewItem i in listView1.CheckedItems)
        DoSomething(); 

} 
```

4.) 添加代码以在 BackgroundWorker 的 DoWork 事件中调用 LoopThroughListItems()

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    LoopThroughListItems();
} 
```

5.）在您的表单加载中 - 在主线程上执行代码（它可以工作）然后在 backgroundWorkder 线程上（它失败）

```
private void Form1_Load(object sender, EventArgs e)
{
    // Try it on the UI Thread - It works
    LoopThroughListItems();

    // Try it on a Background Thread - It fails
    backgroundWorker1.RunWorkerAsync();

} 
```

6.) 修改您的代码以使用 IsInvokeRequired/Invoke

```
private void LoopThroughListItems()
{

    // InvokeRequired == True when executed by non-UI thread
    if (listView1.InvokeRequired)
    {
        // This will re-call LoopThroughListItems - on the UI Thread
        listView1.Invoke(new Action(LoopThroughListItems));
        return;
    }

    foreach (ListViewItem i in listView1.CheckedItems)
        DoSomething(); 
} 
```

7.) 再次运行应用程序 - 现在它可以在 UI 线程和非 UI 线程上运行。

即解决问题。检查 IsInvokeRequired/Invoking 是一种常见的模式，你会习惯很多（这就是它包含在所有控件中的原因）。如果您在所有地方都这样做，您可以做一些聪明的事情并将其全部包装起来 - 如此处所述：[自动化 InvokeRequired 代码模式](https://stackoverflow.com/questions/2367718/c-automating-the-invokerequired-code-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T20:51:45.317

尝试这样的事情：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void OnClick(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
        }

        private void OnDoWork(object sender, DoWorkEventArgs e)
        {
            foreach (ListViewItem i in GetItems(listView1))
            {
                DoSomething(i);
            }
        }

        private IEnumerable<ListViewItem> GetItems(ListView listView)
        {
            if (InvokeRequired)
            {
                var func = new Func<ListView, IEnumerable<ListViewItem>>(GetItems);
                return (IEnumerable<ListViewItem>)Invoke(func, new[] { listView });
            }
            // Create a defensive copy to avoid iterating outsite UI thread
            return listView.CheckedItems.OfType<ListViewItem>().ToList();
        }

        private void DoSomething(ListViewItem item)
        {
            if (InvokeRequired)
            {
                var action = new Action<ListViewItem>(DoSomething);
                Invoke(action, new[] { item });
                return;
            }
            // Do whatever you want with i
            item.Checked = false;
        }
    }
} 
```

但是，您的问题确实很笼统。如果您分享更多细节，也许会有更简单或更好的解决方案。

# c# - 在 wpf 中，如何循环输出文本框中的数据？

> ID：10571955
> 
> 赞同：1
> 
> 时间：2012-05-13T13:02:08.333
> 
> 标签：c#, wpf, textbox

以下代码只能显示最后一个数字：

```
 for (i=0; i<3; i++)
       textbox.text({0},i); 
```

但我想像这样在文本框中输出数字；

```
 0
    1
    2 
```

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T13:03:46.187

创建一个`StringBuilder`，或多或少像这样（伪代码）：

```
StringBuilder sb = new StringBuilder();
for (i=0; i<3; i++)
     sb.AppendLine(string.Format({0},i));

textbox.Text = sb.ToString(); 
```

请注意：如果您使用的是`WPF`避免直接访问控件属性并进行操作`ViewModel`，否则，您将失去该技术为您带来的显着部分好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:32:27.680

林克方式

```
var result=Enumerable.Range(0,3).Select(i=>i.ToString()).Aggregate((init, next)=> init+ Environment.NewLine+next);
textBox.Text = result; 
```

# objective-c - 在 Objective-C 中，所有权是对象，而不是变量或指针？

> ID：10571957
> 
> 赞同：11
> 
> 时间：2012-05-13T13:02:14.133
> 
> 标签：objective-c

在一本书中，是这样说的：

> 那么你怎么知道一个对象什么时候拥有，由谁拥有呢？考虑以下示例：
> 
> ```
> NSString *str = [[NSString alloc] initWithString:@”Hello”];  
> NSString *str2 = str; 
> ```
> 
> 在此示例中，您使用`alloc`关键字 for `str`，因此您拥有`str`。因此，您需要在不再需要它时释放它。但是， `str2`只是指向`str`，因此您不拥有`str2`，这意味着您使用完后无需释放`str2`它。

我认为所有权是对象，而不是变量或指针......所以我们不能说我们“拥有`str`”或“拥有”......我们拥有一个由or`str2`指向的对象，如果我们使用or ，都是一样的。`str``str2``[str release]``[str2 release]`

另一种描述是：

> 例如，考虑上一节中使用的示例：
> 
> ```
> NSString *str = [[NSString alloc] initWithString:@”Hello”]; 
> NSString *str2 = str;
> [str release];
> [str2 release]; //---this is not OK as you do not own str2--- 
> ```
> 
> 尝试释放`str2`将导致运行时错误，因为您无法释放不属于您的对象。

`[str2 release]`如果之前调用了它，我们实际上可以使用 它`[str release]`。如果我们这样做，那么该行将`[str release]`导致错误，因为 now`str`和`str2`都是悬空指针，并且假设`release`第一次发送到对象时，引用计数变为 0，并`dealloc`立即被调用，并且内存被释放由 C 函数`free()`。

以上是否正确，或者还有其他需要更正的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:33:58.173

不要从管理内存的角度考虑它，而是从对象所有权的角度考虑。当您分配、保留或复制对象时，您将获得对象的所有权。您负责完全释放您拥有的对象，而不是其他对象。

在您的示例中，分配 to`str2`不获取对象的所有权，但是如果您确实需要对它的第二个“拥有”引用，那么您应该这样做`[str2 retain]`，之后这样做不是错误`[str release]; [str2 release];`。这也是使用 ARC 会自动发生的情况，除非您将其注释`str2`为弱引用。（当然，在这种简单的情况下，编译器可以在内部优化不必要的保留/释放。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T13:10:50.003

你的猜测是正确的：这本书使用模糊语言（即使含义是正确的）来简化指针：

您拥有该对象`str`并`str2`指向该对象。

这当然意味着您只能释放对象一次（或者更确切地说，它被保留的频率是一次 - 在您的示例中，隐含地， by `alloc`），并且您是否通过`str`或`str2`（或任何其他方式）这样做是无关紧要的。

但是，在实践中，您应该将变量视为您拥有它们。这使得跟踪保留/释放对变得更加容易，并且您不能依赖这样一个事实，即没有人在两者之间的某个地方更改这些变量之一的值。

将指向已释放实例的所有变量设置为`nil`之后是一种很好的做法（但不是必需的）。

深入研究技术细节（实际上应该将其视为：实现细节；私有 API 的工件）：

从技术上讲，没有人*拥有*该对象。该对象有一个它被保留的次数的计数器（你可以通过调用来找到它`anObject retainCount`- 但你不应该，尤其是因为有些对象有一个虚假的retainCount，而且因为它真的与你无关）。当一个对象被`alloc`ed时，它的retainCount为1。每发送一次`retain`（“它被保留”），它的retainCount就加1，每发送一次`release`（“它被释放”），它的retainCount就减1 1.

一旦对象的 retainCount 达到零，它就会被释放（并`dealloc`调用它的方法）。

谁发送了所有这些`retain`/`release`消息（以及通过哪些变量）并不重要。

**再说一遍：这些是实现细节。它们是 Objective-C/Cocoa 进行内存管理的方式的产物。像对待任何私有 API 一样对待它们：很好奇，但永远不要依赖内部。仅在生产代码中使用公共 API（在本例中为`retain`/`release`和自动释放池）。**

注意：一些对象（例如一些单例）会覆盖默认的保留/释放方法。永远不要相信`retainCount`你从一个对象中得到的东西，除非是出于好奇（例如看看 retainCount `[UIColor clearColor]`）。

有关此主题的更多想法，[此问题](https://stackoverflow.com/questions/5784084/calling-retaincount-considered-harmful)及其答案可能是一个很好的总结/起点。

也就是说，**考虑切换到 ARC**，这将使您摆脱几乎所有内存管理的麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-13T13:09:39.343

> 我认为所有权是对象，而不是变量或指针......所以我们不能说我们“拥有str”或“拥有str2”......我们拥有一个由str或str2指向的对象，如果我们使用 [str release] 或 [str2 release]，都是一样的。

这是对的。

我认为作者所说的“我们拥有 str”的意思是您拥有该字符串实例。不是指针或变量。理论上，您可以使用其他指针释放对象。但通常最好使用用于初始化对象的变量来释放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-13T18:54:29.580

我认为*其他答案是错误的或不完整的。*

**所有权由谁释放资源来定义。**一个对象（通常）不拥有*自己*，它是*拥有*的。

同样：所有者是负责释放内存的人。

在你的代码中，`str`已经声明了它对对象的所有权，`str2`还没有。为了`str2`也拥有该对象（*共享* `str`所有权），您需要`retain`它：

```
[str2 retain]; 
```

现在你可以稍后说，

```
[str2 release]; 
```

放弃`str2`对所有权的要求，对于`str`.

另一方面，对于 ARC，指向资源的*所有*（引用计数）指针都是它的共享所有者。在这种情况下，*所有*指针都负责跟踪对象引用计数，并在确定它们是唯一所有者并超出范围时释放对象。

重申：所有权*不是*按客体的。所有权是指向对象的*指针*，以及这些指针的所有者，但前提*是*这些指针可能在某些情况下被释放。如果不存在释放资源的情况，则指针是非拥有的。在这种情况下，它们被称为*弱*。

*如果对象拥有自己，弱指针*的概念将毫无意义（因为所有指针都是弱指针）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-13T13:07:20.667

如果释放`str`或`str2`，则释放内存位置`str`和`str2`指向 。所以，你只需要调用`str`or `str2`，而不是两者，因为它们指向同一个内存位置。

我不明白“拥有”一个变量是什么意思，据我所知，指针可以指向内存中的一块空间，仅此而已。

# python - 如何禁用 Django Celery 管理模块？

> ID：10571960
> 
> 赞同：8
> 
> 时间：2012-05-13T13:03:01.717
> 
> 标签：python, django, django-admin, celery, django-celery

我不需要 Django 管理员中的 celery 模块。有没有办法可以删除它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-13T17:41:38.723

更具体地说，在`admin.py`任何应用程序里面`INSTALLED_APPS` **之后** `'djcelery'`

```
from django.contrib import admin
from djcelery.models import (
    TaskState, WorkerState, PeriodicTask, 
    IntervalSchedule, CrontabSchedule)

admin.site.unregister(TaskState)
admin.site.unregister(WorkerState)
admin.site.unregister(IntervalSchedule)
admin.site.unregister(CrontabSchedule)
admin.site.unregister(PeriodicTask) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-23T10:19:11.793

更新版本如下所示：

```
from django_celery_beat.models import (
    IntervalSchedule,
    CrontabSchedule,
    SolarSchedule,
    ClockedSchedule,
    PeriodicTask,
)

admin.site.unregister(SolarSchedule)
admin.site.unregister(ClockedSchedule)
admin.site.unregister(PeriodicTask)
admin.site.unregister(IntervalSchedule)
admin.site.unregister(CrontabSchedule) 
```

您始终可以通过以下方式获取已注册模型的列表：

```
admin.site._registry 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T14:46:37.343

您可以简单地取消注册芹菜模型，如 admin.site.unregister(CeleryModelIdoNotWantInAdmin)

# jquery - jQuery .slideUp() 跳过动画

> ID：10571963
> 
> 赞同：7
> 
> 时间：2012-05-13T13:03:41.507
> 
> 标签：jquery, css, animation, slideup

我正在开发一个应用程序，它显示用户并排上传的图像缩略图。我希望能够显示完整尺寸的图像以及有关它的一些信息。

我的解决方案是在`#wrapper`单击图像以显示显示全尺寸图像的页面时向上滑动（可能通过 iframe 的帮助，尚不确定）。

我正在努力迈出第一步，即向上滑动`#wrapper`。下面的代码应该可以工作，但没有显示滑动动画 -`#wrapper`只是消失了。如果我从图像中删除该类`.image`，然后添加该行`<p class="images">Test</p>`并单击它，则滑动可以工作，但是图像会失去样式。

那么这里有什么问题呢？我看到有几个相同主题的问题，但都是关于使用表格的。

**HTML：**

```
<section id="wrapper">
    <div id="blogs">
        <div class="blog">
        <div class="post">
            <img class="images" src="images/image1.png" />
            </div>
        </div>
        <div class="blog">
        <div class="post">
            <img class="images" src="images/image2.png" />
            </div>
        </div>
        <div class="blog">
        <div class="post">
            <img class="images" src="images/image2.png" />
            </div>
        </div>
    </div>
</section> 
```

**jQuery :**

```
$('.images').click(function (){
    $('#wrapper').slideUp('slow', function() {
    });
}); 
```

**CSS：**

```
#wrapper {
    background: yellow;
    margin: 0px auto;
    width: 100%;
    height: 1000px;
    position: relative;
    top: -20px;
    left: 20px;
    text-align: left;
    margin: 0px auto;
    padding: 10px;
}

.post {
    background: white;
    width: 200px;
    height: 220px;
    margin: 0px auto;
    float: left;
    margin-right: 30px;
    margin-bottom: 30px;
    position: relative;
    padding: 5px;
    -moz-box-shadow: 0 0 4px 1px #777;
    -webkit-box-shadow: 0 0 4px 1px#777;
    box-shadow: 0 0 4px 1px #777;
}

.images {
    margin-left: 5px;
    margin-top: 5px;
    width: 188px;
    height: 170px;
    border: 1px solid #aaa;
    border-radius: 2px; 
    -moz-border-radius: 2px; 
    -webkit-border-radius: 2px;
}

.blogs {
    height: 400px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T15:05:27.763

它对我有好处（Chrome）。但试试这个：

```
<section id="wrapper">
    <div id="blogs">
        <div class="blog">
           <div class="post">
               <span class="images">
                  <img src="images/image2.png" alt="" >
               </span>
            </div>
        </div>
    </div>
</section> 
```

# c++ - 在c ++ win32中绘制/打印具有透明背景的文本

> ID：10571966
> 
> 赞同：3
> 
> 时间：2012-05-13T13:03:52.600
> 
> 标签：c++, winapi, text

我正在尝试绘制/打印文本，但我需要透明背景。我一直在尝试这个：

```
 TextOut(hDC, 50, 50, "MY TEXT", lstrlen("MY TEXT")); 
```

问题是这会产生白色背景。我也试过这个：

```
 ExtTextOut(hDC, 50, 50, ETO_OPAQUE, TA_LEFT,  "MY TEXT", lstrlen("MY TEXT"), NULL); 
```

ETO_OPAQUE - 将文本区域的背景颜色设置为程序的当前背景颜色。但是如果我的背景是动态的并且发生变化，这将不起作用，这就是我需要透明背景的原因。

有关这两个功能的更多信息[http://msdn.microsoft.com/en-us/library/dd144821(v=vs.85)](http://msdn.microsoft.com/en-us/library/dd144821(v=vs.85))

我知道我可以将文本插入位图中并使用“TransparentBlt”来实现“相同”的效果，但是......任何知道另一个功能来绘制/打印具有透明背景的文本的人，或者关于我如何解决这个问题的任何想法所谓的问题？

谢谢... =)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-13T13:10:53.493

```
SetBkMode( hdc, TRANSPARENT ); 
```

# ios - ASIHTTPRequest 缓存我的数据。我不想要任何类型的缓存

> ID：10571969
> 
> 赞同：1
> 
> 时间：2012-05-13T13:04:14.500
> 
> 标签：ios, caching, asihttprequest

我有一个大应用程序。它最初假定为 20 MB RAM。

例如，我想下载一个 14 MB 的歌剧。几分钟后，我下载了一部歌剧。我的应用程序 RAM 从 20 MB 增加到 34 MB。这是个大问题，因为如果我想下载 200 MB 的文件，我的应用程序将被杀死。（14+200）。我试了几次，我得到“确实收到内存警告”，然后应用程序被杀死了。

ASIHTTPRequest 缓存我的数据。我不知道为什么。我什至从请求中删除了所有代码：didReceiveData:。但这对我没有帮助。

**重要提示**：我创建了一个新的空项目并添加了此代码。在这个项目中，一切正常。ASIHTTPRequest 不缓存任何数据。可能我需要更改 XCode 设置吗？

```
-(void) downloadOpera
{
 self.currentPath = @"http://get-tsw-1.opera.com/pub/opera/mac/1164/Opera_11.64_Setup_Intel.dmg";
 self.ASIRequest = [[[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:currentPath]] autorelease];
 ASIRequest.delegate = self;
 ASIRequest.shouldContinueWhenAppEntersBackground = YES;
 [ASIRequest setCachePolicy:ASIDoNotWriteToCacheCachePolicy];
 [ASIRequest startAsynchronous];
}

- (void)request:(ASIHTTPRequest *)request didReceiveData:(NSData *)data {}
- (void)requestFailed:(ASIHTTPRequest *)request {}
- (void)requestFinished:(ASIHTTPRequest *)request {NSLog(@"download finished");} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T15:05:58.083

关闭启用僵尸对象并放松...

# css - ie7 中的按钮选择器（html5 doctype）

> ID：10571975
> 
> 赞同：0
> 
> 时间：2012-05-13T13:05:03.177
> 
> 标签：css, html, internet-explorer

我在 ie7 中定位我的按钮时遇到了一些问题。这不适用于 html5 文档类型吗？

```
 input[type="button"] { color: red; } 
```

只要

```
input { color: red; } 
```

有效，但这并不是我真正追求的...

谢谢

编辑：这是一个原生 ie7 问题。ie7 模式在 ie9 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T13:10:45.307

属性选择器`input[type=button]`是 CSS 级别 2.1 的组件，HTML 类型（无论是 4.x 还是 5）或多或少无关紧要。然而，最重要的因素是实现取决于浏览器，以及它的 CSS 合规性/支持级别。

具体来说，根据[Quirksmode](http://www.quirksmode.org/css/contents.html#t31)，“高级属性选择器”不是由 IE < 7 实现的（在这种情况下，这并不能真正解决您的困难）。

在我自己的实现中，我偶尔会在引用属性值的值时发现问题，通常通过将选择器修改为来解决，在这种情况下：`input[type=button]`，但我没有执行任何客观测试来验证这种方法，并且纯粹基于记忆。

参考：

*   [CSS 2.1 选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:10:46.080

注意：IE7 和 IE8 仅在指定了 !DOCTYPE 时才支持属性选择器。IE6 及更低版本不支持属性选择。

[http://www.w3schools.com/css/css_attribute_selectors.asp](http://www.w3schools.com/css/css_attribute_selectors.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-13T13:10:54.400

> 这不适用于 html5 文档类型吗？

doctype 可能会阻止/允许某些东西工作，但它不会实现浏览器本身不支持的东西。我想这就是你的意思；只是澄清。

IE7 确实支持这样的选择器：[CSS Selector for <input type="?"](https://stackoverflow.com/questions/470702/css-selector-for-input-type)

据我所知，每个 CSS 选择器都适用于 HTML 5 文档类型（假设没有压倒一切的因素，例如兼容模式）。

我可以确认（至少在 IE9 中）属性选择器在兼容性视图中仍然有效。但是，强制 quirks 模式会破坏属性选择器（并在结构良好的页面上导致普遍的无政府状态）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T13:36:27.090

尝试使用`<button></button>`而不是`<input type="button" />`. 然后，您将能够使用元素选择器 ( `BUTTON`) 而不是属性选择器 ( `INPUT[type="button"]`)。

而且，以防万一，当然，您不能使用选择器选择`BUTTON`元素，`INPUT[type="button"]`反之亦然。

# c++ - 如何设置getline不获取空字符串

> ID：10571979
> 
> 赞同：1
> 
> 时间：2012-05-13T13:05:41.290
> 
> 标签：c++, string, getline, stringstream

我有例如

```
string s = "      abc        edef"; 
```

我`istringstream`用这个字符串创建。有没有办法从`getline`只得到`"abc"`和`"edef"`？因为现在我在成对的空格之间得到了那个空字符串：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T13:07:38.083

使用`>>`运算符仅获取以空格分隔的“单词”。

# android - 在按钮单击时设置图像视图背景？

> ID：10571983
> 
> 赞同：0
> 
> 时间：2012-05-13T13:06:13.147
> 
> 标签：android, resources, imageview, setbackground

假设我有一个计时器活动。有一个显示数字 0 - 9 的图像视图（这些被视为图像，而不是文本）。例如。图像名称为clock_0、clock_1、clock_2...clock_9。有一个加号和减号按钮应该改变一个计数器（选择图像）。如果当前图像是clock_0，按加号按钮会将视图更改为clock_1等。我如何有效地做到这一点？

编辑这是我试图做的；设置一个 int[]，

```
int[] clockResource = new int[10];
    clockResource[0] = R.drawable.clock_0;
    clockResource[1] = R.drawable.clock_1;
    clockResource[2] = R.drawable.clock_2;
    clockResource[3] = R.drawable.clock_3;
    clockResource[4] = R.drawable.clock_4;
    clockResource[5] = R.drawable.clock_5;
    clockResource[6] = R.drawable.clock_6;
    clockResource[7] = R.drawable.clock_7;
    clockResource[8] = R.drawable.clock_8;
    clockResource[9] = R.drawable.clock_9; 
```

为 addbutton 分配一个 onclicklistener

```
case R.id.addMin:
        if (addMin.isEnabled()) {
            if (mintwo < 9) {
                mintwo++;
            } else if (mintwo == 9) {
                minone++;
                mintwo = 0;
            }
            min2.setBackgroundResource(clockResource[mintwo]);
            min1.setBackgroundResource(clockResource[minone]);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:23:29.360

```
case R.id.addMin:
        if (addMin.isEnabled()) {
            if (mintwo < 9) {
                mintwo++;
            } else if (mintwo == 9) {
                minone++;
                mintwo = 0;
            }
            min2.setImageResource(clockResource[mintwo]);  //updated
            min1.setImageResource(clockResource[minone]);  //updated
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T13:59:24.630

由于它们是 ImageView，请改用[setImageDrawable](http://developer.android.com/reference/android/widget/ImageView.html#setImageDrawable%28android.graphics.drawable.Drawable%29)或[setImageResource](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)。

[相关的 SO 问题。](https://stackoverflow.com/questions/8592911/android-imageview-setbackgroundresource-doesnt-work)

# java - 外部光传感器的输入频率

> ID：10571989
> 
> 赞同：1
> 
> 时间：2012-05-13T13:06:46.827
> 
> 标签：java, android

背景：我有一个 IOIO，用于测量光电二极管的输出，然后将其转换为数字输出。我需要找到信号在 1 和 0 之间变化的频率。有人给了我一些可以用来测量频率的代码，但我不知道如何将它集成到我现有的应用程序中。我知道我实现它的方式不起作用，因为更新变量的 UI 线程正在等待另一个计算频率的线程的返回，因此该线程只会在开始运行时获得二极管的值。那么如何使频率线程具有二极管的实时值，并且在计算出频率后将其传递回 UI 线程以显示？

这是我的 UI 线程（FrequencyApp.java）：

```
 public class FrequencyApp extends IOIOActivity {
private TextView textView_;
private TextView textView2_;
private TextView textView3_;
private ToggleButton toggleButton_;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textView_ = (TextView)findViewById(R.id.TextView);
    textView2_ = (TextView)findViewById(R.id.TextView2);
    textView3_ = (TextView)findViewById(R.id.FrequencyLabel);
    toggleButton_ = (ToggleButton)findViewById(R.id.ToggleButton);

    enableUi(false);
}

class Looper extends BaseIOIOLooper {
    private AnalogInput input_;
    private DigitalOutput led_;
    volatile int diode;
    private long frequency;

    @Override
    public void setup() throws ConnectionLostException {
        try {
            input_ = ioio_.openAnalogInput(31);
            led_ = ioio_.openDigitalOutput(IOIO.LED_PIN, true);
            enableUi(true);
        } catch (ConnectionLostException e) {
            enableUi(false);
            throw e;
        }
    }

    @Override
    public void loop() throws ConnectionLostException {
        try {
            led_.write(!toggleButton_.isChecked());

            float reading = input_.getVoltage();

            if(reading  > 1){
                diode = 1;
            } else { 
                diode = 0;
            }
            if(toggleButton_.isChecked()){
                FrequencyThread frequencyTaskThread = new FrequencyThread();
                frequencyTaskThread.setPriority(Thread.NORM_PRIORITY-1); //Make the background thread low priority. This way it will not affect the UI performance
                frequencyTaskThread.start();
                frequency = (long) frequencyTaskThread.run(diode);
                frequencyTaskThread.stop();
            }
            setText(Float.toString(reading), Long.toString(diode), Long.toString(frequency));
            Thread.sleep(100);
        } catch (InterruptedException e) {
            ioio_.disconnect();
        } catch (ConnectionLostException e) {
            enableUi(false);
            throw e;
        }
    }
}

@Override
protected IOIOLooper createIOIOLooper() {
    return new Looper();
}

private void enableUi(final boolean enable) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            toggleButton_.setEnabled(enable);
        }
    });
}

private void setText(final String str,final String str2,final String str3 ) {
    runOnUiThread(new Runnable() {
        @Override
        public void run() {
            textView_.setText(str);
            textView2_.setText(str2);
            textView3_.setText(str3);
        }
    });
} 
```

}

这是计算频率的线程（FrequencyThread.java：

```
 public class FrequencyThread extends Thread {
public float run(int diode){
// Find frequency to the nearest hz (+/- 10%)
// It's assumed that some other process is responsible for updating the "diode"
// variable.  "diode" must be declared volatile.
long duration = 1000;   // 1 second
final int interval = 100;    // sampling interval = .01 second
int oldState = diode;
int count = 0;
final long startTime = System.currentTimeMillis();
final long endtime = startTime + duration;
while (System.currentTimeMillis() < endtime) {
  // count all transitions, both leading and trailing
  if (diode != oldState) {
    ++count;
    oldState = diode;
  }

    Thread.sleep(interval);
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}
// find the actual duration
duration = System.currentTimeMillis() - startTime;
// Compute frequency. The 0.5 term is because we were counting both leading and
// trailing edges.
float frequency = (float) (0.5 * count / (duration/1000));
return frequency;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T14:11:19.100

您设置它的最简单方法可能是使用[处理](http://developer.android.com/reference/android/os/Handler.html)程序将消息从频率线程发送到主线程。[使用AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)抽象出 Thread / Handler 并使整个情况更容易处理的方式可能更受欢迎。这样做可能需要您将 IOIOLooper 放入 AsyncTask 中，但我没有使用该板或其 Java API 的经验。

此外，您的 setText() 方法中根本不需要“runOnUiThread”或 Runnable。无论如何，这似乎只是从主线程中调用的。

您要做的是覆盖您的处理程序 handleMessage() 以调用 setText()。然后在 FrequencyThread 内部调用 handler.sendMessage() 传回数据和/或消息（即错误）。

我尝试使用您发布的代码作为示例，但我无法诚实地遵循它。

# c# - 为什么结构中的字段会丢失其值而相同类中的字段不会丢失？

> ID：10571990
> 
> 赞同：1
> 
> 时间：2012-05-13T13:06:52.513
> 
> 标签：c#, .net, struct, field

我有一个结构体，其中有一个失去其价值的字段。我可以将字段声明为静态并解决问题。我也可以将结构更改为类（不更改其他内容），这也解决了问题。我只是想知道这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T13:10:31.353

结构是按值传递的。换句话说，当你传递一个结构时，你传递的是它的值的副本。因此，如果您复制该值并对其进行更改，那么原始值将显示为未更改。您更改了副本，而不是原件。

如果没有看到您的代码，我无法确定，但我认为这就是正在发生的事情。

类不会发生这种情况，因为它们是通过引用传递的。

值得一提的是，这就是为什么结构应该是不可变的——也就是说，一旦它们被创建，它们就不会改变它们的值。提供修改版本的操作返回新结构。

* * *

编辑：在下面的评论中，@supercat 建议可变属性可以更方便。然而，结构上的属性设置器也可能导致奇怪的失败。除非您深入了解结构的工作原理，否则这里有一个示例可能会让您大吃一惊。对我来说，完全避免可变结构就足够了。

考虑以下类型：

```
struct Rectangle {
    public double Left { get; set; }
}

class Shape {
    public Rectangle Bounds { get; private set; }
} 
```

好的，现在想象一下这段代码：

```
myShape.Bounds.Left = 100; 
```

也许令人惊讶的是，这根本**没有效果**！为什么？让我们以更长但等效的形式重新编写代码：

```
var bounds = myShape.Bounds;
bounds.Left = 100; 
```

在这里更容易看到如何将 的值*复制*`Bounds`到局部变量，然后更改其值。`Shape`但是，在任何时候都不会更新原始值。

这是使所有公共结构不可变的非常有说服力的证据。如果您知道自己在做什么，可变结构可能会很方便，但我个人只是以这种形式真正将它们用作私有嵌套类。

正如@supercat 指出的那样，替代方案有点难看：

```
myShape.Bounds = new Rectangle(100, myShape.Bounds.Top, 
                               myShape.Bounds.Width, myShape.Bounds.Height); 
```

有时添加辅助方法更方便：

```
myShape.Bounds = myShape.Bounds.WithLeft(100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:09:29.277

当结构体通过值传递时，系统会为被调用者制作一个结构体的副本，这样它就可以看到它的内容，也许可以修改自己的副本，但不能影响调用者副本中的字段。也可以通过 传递结构`ref`，在这种情况下，被调用者将能够使用调用者的结构副本，如果需要，可以对其进行修改，甚至可以将其传递`ref`给可以执行类似操作的其他函数。请注意，被调用函数可以使调用者的结构副本对其他函数可用的唯一方法是通过 传递它`ref`，并且被调用函数只有在将结构传递给的所有函数之后才能返回`ref`也回来了。因此，调用者可以确信，由于函数调用而对结构发生的任何更改都将在它返回时发生。

这种行为与类对象不同；如果一个函数将一个可变类对象传递给另一个函数，它无法知道该函数是否或何时会导致该对象立即或在将来的任何时间发生突变，即使在函数完成运行之后也是如此。唯一能确定任何可变对象不会被外部代码改变的方法是，从创建到废弃的那一刻，成为该对象的唯一持有者。

虽然不习惯对语义赋值的人最初可能会对按值传递结构只是给被调用函数一个它的副本，并将一个结构存储位置分配给另一个只是复制结构的内容这一事实感到“惊讶”，但保证提供的值类型非常有用。由于`Point`是一个结构，因此可以知道像`MyPoints[5].X += 1;`（假设`MyPoints`是一个数组）这样的语句会影响`MyPoints[5].X`但不会影响任何其他`Point`. 可以进一步保证，唯一`MyPoints[5].X`会改变的方法是，要么`MyPoints`被另一个数组替换，要么写入`MyPoints[5]`. 相比之下，`Point`是一个类和`MyPoint[5]`曾经暴露于外部世界，了解上述语句是否会影响`X`任何其他类型存储位置的字段/属性的唯一方法`Point`是检查每个类型的存储位置`Point`或`Object`存在于代码中的任何位置，以查看是否它指向与 相同的实例`MyPoints[5]`。由于代码无法检查特定类型的所有存储位置，因此如果`Point[5]`曾经暴露于外部世界，这种保证将是不可能的。

`ref`但是，结构有一个令人讨厌的问题：通常，如果允许调用的代码写入相关结构，系统只会允许结构通过。然而，结构方法调用和属性获取器`this`作为`ref`参数接收，但没有上述限制。相反，当在只读结构上调用结构方法或属性 getter 时，系统将复制该结构，将该副本传递`ref`给方法或属性 getter，然后丢弃它。由于系统无法知道方法或属性 getter 是否会尝试 mutate `this`，因此在这种情况下它不会抱怨——它只会生成愚蠢的代码。如果一个人避免变异`this`但是，除了属性设置器（系统不允许在只读结构上使用属性设置器）之外的任何东西，都可以避免问题。

# c - 如何在 C 编程中将 IP 地址定义为常量变量？

> ID：10571994
> 
> 赞同：0
> 
> 时间：2012-05-13T13:07:27.700
> 
> 标签：c, ip

我需要使用 PC 的 eth0 接口的 IP 地址（Linux OS - IPv4）。在事先不知道 IP 地址的情况下，如何将其定义为常量变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T13:11:56.810

你不能。

在 C 中定义常量有两种方法：预处理器 ( `#define`) 和常量 ( `const something`)。这两者都要求在编译时知道常量的值¹。因此，如果您的目标是有一种方法来引用此 IP，而在程序执行期间不可能用另一个值覆盖它，那根本不可行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-13T13:36:56.640

如果您将它们作为指向地址缓冲区的指针，则可以。导出指向`const`限定类型​​的指针

```
extern your_address_type const*const addr; 
```

你必须让你的图书馆代码看到类似的东西

```
static your_address_type my_address;
your_address_type const*const addr = &my_address; 
```

在您的库中，您可以`my_address`正确初始化，客户端代码只能看到`addr`并且无法更改它。

# wpf - WPF 实时渲染

> ID：10571999
> 
> 赞同：1
> 
> 时间：2012-05-13T13:07:50.523
> 
> 标签：wpf, rendering, 2d, real-time

我正在设计一款游戏，并考虑使用 WPF 制作基本游戏玩法的简单原型。

是否可以在 WPF 中实时渲染基本的 2d 图形？基本图形是指简单的形状，例如线条、圆形等。“实时”是指根据速度、加速度等参数渲染事物，这些参数会根据玩家输入而变化——我认为这意味着我可以不要为动画使用故事板。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-13T13:20:43.317

查看上一个问题[High Performance Graphics using the WPF Visual Layer](https://stackoverflow.com/questions/8713864/high-performance-graphics-using-the-wpf-visual-layer/8714107#8714107)以获得很好的相关讨论。虽然 WPF 为丰富的矢量图形提供了一个很好的框架，但它在实时 2D 性能方面有些欠缺。

有一些变通方法，例如，根据您的场景复杂性，您可以使用[DrawingVisuals](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingvisual.aspx)或虚拟化 Shape 类（WPF 矢量图形）来绘制您的精灵。再低一点，您可以使用.NET4.0 中可用的[BitmapCache模式缓存精灵，或者将它们预呈现到位图并使用各种](http://msdn.microsoft.com/en-us/library/system.windows.media.bitmapcache%28v=vs.95%29.aspx)[优化模式](https://stackoverflow.com/questions/9317460/bitmap-performance-optimization-patterns/9467543#9467543)来提高吞吐量。

再低一点，您可以使用神奇的[WriteableBitmapEx项目混合矢量/光栅图形，或使用](http://writeablebitmapex.codeplex.com/)[D3DImage](http://www.codeproject.com/Articles/28526/Introduction-to-D3DImage)混合矢量/GPU 图形。

关于如何更新场景，您需要编写一个原始游戏引擎，在[CompositionTarget.Rendering](http://msdn.microsoft.com/en-us/library/system.windows.media.compositiontarget.rendering.aspx)事件（在屏幕重绘时触发）上，您可以获得更新的参数并计算精灵的位置/方向。可能对此有所帮助的是这个伟大的[codeplex 项目](http://physicshelper.codeplex.com/)，它集成了 WPF/Silverlight 和 Farseer 物理。