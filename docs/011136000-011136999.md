# StackOverflow 问答 11136000-11136999

# spring-integration - 当在 init 方法中使用通道时，Spring 集成“调度程序没有订阅者”

> ID：11136000
> 
> 赞同：5
> 
> 时间：2012-06-21T10:14:39.023
> 
> 标签：spring-integration

尝试在 Spring bean 的 init 方法中将消息发布到通道时出现“调度程序没有订阅者”错误。请看下面的例子：

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:rmi="http://www.springframework.org/schema/integration/rmi"
    xmlns:int="http://www.springframework.org/schema/integration"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/integration
        http://www.springframework.org/schema/integration/spring-integration.xsd
        http://www.springframework.org/schema/integration/rmi
        http://www.springframework.org/schema/integration/rmi/spring-integration-rmi.xsd">

    <bean id="currencyService" class="com.demo.CurrencyService" init-method="init"/>

    <int:channel id="currencyChannel" />
    <int:channel id="currencyReplyChannel">
        <int:queue/>
    </int:channel>
    <rmi:outbound-gateway id="currencyServiceGateway"
        request-channel="currencyChannel" remote-channel="currencyServiceChannel"
        reply-channel="currencyReplyChannel" host="localhost" port="2197" />
</beans> 
```

Spring托管bean：

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.integration.Message;
import org.springframework.integration.MessageChannel;
import org.springframework.integration.core.MessagingTemplate;
import org.springframework.integration.core.PollableChannel;
import org.springframework.integration.message.GenericMessage;

public class CurrencyService {

    @Autowired
    private MessageChannel currencyChannel;

    @Autowired
    private PollableChannel currencyReplyChannel;

    private CurrencyListBO currencyListBO;

    public CurrencyListBO getCurrencyList() {
        return currencyListBO;
    }

    public void init() {
        CurrencyIN request = new CurrencyIN();
        request.setChannelCode("RMW");
        request.setTransactionType(CurrencyIN.TransactionType.currencyLoaderService
                .toString());
        GenericMessage<IRequestBO> message = new GenericMessage<IRequestBO>(
                request);
        MessagingTemplate template = new MessagingTemplate();
        template.send(currencyChannel, message);
        Message<CurrencyListBO> reply = template.receive(currencyReplyChannel);
        currencyListBO = reply.getPayload();
    }
} 
```

如果不是 init 方法，而是在第一次调用之后初始化 currencyListBO，那么一切正常。

```
public CurrencyListBO getCurrencyList() {
    if(currencyListBO == null) {
        init();
    }
    return currencyListBO;
} 
```

请让我知道第一种方法有什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T11:49:11.637

init/@PostConstruct 方法在你的 bean 被实例化之后但在上下文的其余部分被连接之前调用（在这种情况下，在 RMI 适配器订阅通道之前）。

您需要等到上下文完全刷新。

一种方法是实施

```
ApplicationListener<ContextRefreshedEvent> 
```

并将您的代码放入

```
public void onApplicationEvent(ContextRefreshedEvent event) 
```

该方法将在上下文完全连接后调用。

# c# - 给定一个Path，如何判断是目录还是文件

> ID：11136001
> 
> 赞同：1
> 
> 时间：2012-06-21T10:14:51.580
> 
> 标签：c#

我需要在目录中复制文件和目录。假设只有一层。

有一个目录 C:\AAAA 包含 5 个其他目录（没有其他子目录的子目录）和 7 个文件。

当我打电话时：

```
System.IO.Directory.GetFileSystemEntries("C:\\AAAA"); 
```

它返回一个字符串数组。它将包含按字典排序顺序排序的条目。因此，当我调用 for-each 循环时：

```
foreach(string path in System.IO.Directory.GetFileSystemEntries("C:\\AAAA"))
{
    //how to determine path is dictonay or file??
} 
```

那么从 System.IO.Directory.GetFileSystemEntries("C:\AAAA") 返回的数组中，如何确定给定路径是文件路径还是目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:16:40.677

检查使用`Directory.Exists`或`File.Exists`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:17:01.847

你可以试试[`Directory.Exists`](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)：

```
bool isDir = Directory.Exists(path) 
```

或[`FileSystemInfo.Attributes`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.attributes.aspx)：

```
var info = new FileInfo(path);
bool isDir = (info.Attributes & FileAttributes.Directory) == FileAttributes.Directory; 
```

[`File.GetAttributes`](http://msdn.microsoft.com/en-us/library/system.io.file.getattributes.aspx)也可以为您提供这些属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:19:47.987

您可以使用 Directory.Exists / File.Exists 或只是做

```
Directory.GetFiles();
Directory.GetDirectories(); 
```

MSDN：

*   [获取文件（）](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)
*   [获取目录（）](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T10:21:31.190

您可以使用 FileAttributes 发现一个字符串是代表一个文件还是一个目录。

```
 foreach(string currentName in Directory.GetFileSystemEntries("C:\\AAAA")) 
   { 
       FileAttributes att = File.GetAttributes(currentName);
       if((att & FileAttributes.Directory) == FileAttributes.Directory)
           // is a directory
       else
           // is a file
   } 
```

使用 FileAttributes 对 File.Exist 或 Directory.Exist 只有一个缺点。
如果文件或目录不存在，则会抛出异常，但根据您上面的代码，这种情况发生的可能性很小，并且 File.GetAttributes 比较快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T10:19:50.667

```
foreach(string path in System.IO.Directory.GetFileSystemEntries("C:\\AAAA"))
{
    // get the file attributes for file or directory
    FileAttributes attr = File.GetAttributes(path);

    //detect whether its a directory or file
    if((attr & FileAttributes.Directory) == FileAttributes.Directory)
        MessageBox.Show("Its a directory");
    else
        MessageBox.Show("Its a file");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T10:19:45.283

这应该这样做：

```
System.IO.Directory.GetFileSystemEntries("C:\\Temp");

foreach (string path in System.IO.Directory.GetFileSystemEntries("C:\\Temp"))
{
      if (File.Exists(path))
      {
          Console.WriteLine("im a file");
      }
      else
      {
          Console.WriteLine("im a folder");
       }
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T10:22:21.050

如果您需要以不同的方式处理文件和目录，我建议您分别使用它们`GetDirectories`并`GetFiles`酌情处理它们。这样你就可以提前知道他们是什么。

我认为这对于您所描述的内容会更好，因为您可以遍历所有文件并复制它们，然后遍历所有目录并递归调用副本。

是的，我知道这实际上并没有回答所提出的问题，但我认为它回答了如何做 X 的精神。:)

# python - Python Pandas：创建日期时间索引的最快方法是什么？

> ID：11136006
> 
> 赞同：5
> 
> 时间：2012-06-21T10:15:21.227
> 
> 标签：python, performance, parsing, datetime, pandas

我的数据如下所示：

```
TEST
2012-05-01 00:00:00.203 OFF 0
2012-05-01 00:00:11.203 OFF 0
2012-05-01 00:00:22.203 ON 1
2012-05-01 00:00:33.203 ON 1
2012-05-01 00:00:44.203 OFF 0
TEST
2012-05-02 00:00:00.203 OFF 0
2012-05-02 00:00:11.203 OFF 0
2012-05-02 00:00:22.203 OFF 0
2012-05-02 00:00:33.203 ON 1
2012-05-02 00:00:44.203 ON 1
2012-05-02 00:00:55.203 OFF 0 
```

我`pandas` `read_table`用来读取预解析的字符串（它摆脱了“TEST”行），如下所示：

```
df = pandas.read_table(buf, sep=' ', header=None, parse_dates=[[0, 1]], date_parser=dateParser, index_col=[0]) 
```

到目前为止，我已经尝试了几个日期解析器，未注释的一个是最快的。

```
def dateParser(s):
#return datetime.strptime(s, "%Y-%m-%d %H:%M:%S.%f")
return datetime(int(s[0:4]), int(s[5:7]), int(s[8:10]), int(s[11:13]), int(s[14:16]), int(s[17:19]), int(s[20:23])*1000)
#return np.datetime64(s)
#return pandas.Timestamp(s, "%Y-%m-%d %H:%M:%S.%f", tz='utc' ) 
```

我还能做些什么来加快速度吗？我需要读取大量数据 - 每个文件数 Gb。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T00:49:26.073

快速的答案是，**您指出的将日期/时间字符串解析为`datetime`-type 索引的最快方法确实是最快的方法**。我对你的一些方法和其他一些方法进行了计时，这就是我得到的。

首先，获取一个`DataFrame`可以使用的示例：

```
import datetime
from pandas import *

start = datetime(2000, 1, 1)
end = datetime(2012, 12, 1)
d = DateRange(start, end, offset=datetools.Hour())
t_df = DataFrame({'field_1': np.array(['OFF', 'ON'])[np.random.random_integers(0, 1, d.size)], 'field_2': np.random.random_integers(0, 1, d.size)}, index=d) 
```

在哪里：

```
In [1]: t_df.head()
Out[1]: 
                    field_1  field_2
2000-01-01 00:00:00      ON        1
2000-01-01 01:00:00     OFF        0
2000-01-01 02:00:00     OFF        1
2000-01-01 03:00:00     OFF        1
2000-01-01 04:00:00      ON        1
In [2]: t_df.shape
Out[2]: (113233, 2) 
```

这是一个大约。如果将其转储到磁盘上，则为 3.2MB 文件。我们现在需要删除`DataRange`您的类型`Index`并将其作为一个列表`str`来模拟您将如何解析数据：

```
t_df.index = t_df.index.map(str) 
```

如果您`parse_dates = True`在将数据读入使用时`DataFrame`使用`read_table`您正在查看**9.5 秒**的平均解析时间：

```
In [3]: import numpy as np
In [4]: import timeit
In [5]: t_df.to_csv('data.tsv', sep='\t', index_label='date_time')
In [6]: t = timeit.Timer("from __main__ import read_table; read_table('data.tsv', sep='\t', index_col=0, parse_dates=True)")
In [7]: np.mean(t.repeat(10, number=1))
Out[7]: 9.5226533889770515 
```

其他策略依赖于将您的数据解析为`DataFrame`第一个（解析时间可以忽略不计），然后将您的索引转换`Index`为`datetime`对象：

```
In [8]: t = timeit.Timer("from __main__ import t_df, dateutil; map(dateutil.parser.parse, t_df.index.values)")
In [9]: np.mean(t.repeat(10, number=1))
Out[9]: 7.6590064525604244
In [10]: t = timeit.Timer("from __main__ import t_df, dateutil; t_df.index.map(dateutil.parser.parse)")
In [11]: np.mean(t.repeat(10, number=1))
Out[11]: 7.8106775999069216
In [12]: t = timeit.Timer("from __main__ import t_df, datetime; t_df.index.map(lambda x: datetime.strptime(x, \"%Y-%m-%d %H:%M:%S\"))")
Out[12]: 2.0389052629470825
In [13]: t = timeit.Timer("from __main__ import t_df, np; map(np.datetime_, t_df.index.values)")
In [14]: np.mean(t.repeat(10, number=1))
Out[14]: 3.8656840562820434
In [15]: t = timeit.Timer("from __main__ import t_df, np; map(np.datetime64, t_df.index.values)")
In [16]: np.mean(t.repeat(10, number=1))
Out[16]: 3.9244711160659791 
```

现在对于获胜者：

```
In [17]: def f(s):
   ....:         return datetime(int(s[0:4]), 
   ....:                     int(s[5:7]), 
   ....:                     int(s[8:10]), 
   ....:                     int(s[11:13]), 
   ....:                     int(s[14:16]), 
   ....:                     int(s[17:19]))
   ....: t = timeit.Timer("from __main__ import t_df, f; t_df.index.map(f)")
   ....: 
In [18]: np.mean(t.repeat(10, number=1))
Out[18]: 0.33927145004272463 
```

在使用`numpy`,`pandas`或`datetime`-type 方法时，肯定会考虑更多优化，但在我看来，使用 CPython 的标准库并将每个日期/时间`str`转换为`int`s 的元组并将其转换为`datetime`实例是最快的方法得到你想要的。

# zend-framework - 如何过滤/验证布尔值？

> ID：11136008
> 
> 赞同：2
> 
> 时间：2012-06-21T10:15:26.853
> 
> 标签：zend-framework, zend-validate, zend-filter

我刚刚阅读了Michelangelo van Dam aka DragonBe 的一篇[关于 PHP 项目质量保证的精彩演讲。](http://www.slideshare.net/DragonBe/workshop-quality-assurance-for-php-projects-tek12 "PHP 项目的质量保证")在他的演讲中，他以 Zend-Framework 为例，我在基本层面上对此很熟悉。

由于我想提高自己，我从单元测试开始，虽然我觉得问题出在 ZF 方面。

**问题：**

`false`每当我分配Zend_Filter 或 Zend_Validator的布尔值时，使用给定的代码工件将其更改为`null`. 我不明白为什么会这样。

**请参阅底部的更新以获取更新的代码和测试**

**首先是测试**

```
public function goodData() {
  return array(
    array('DU-IT', 'Sample Description', true, false),
    array('Mercüß', 'bla"ß"trager', false, true),
    array('Mia123', '728 Tage im Jahr', false, false)
  );
}

/**
 * @dataProvider goodData()
 */
public function testModelAcceptsValidData($name, $description, $flag_active, $flag_deleted)
{
  $data = array(
    'id'            => 0,
    'name'          => $name,
    'description'   => $description,
    'flag_active'   => $flag_active,
    'flag_deleted'  => $flag_deleted
  );

  try {
    $this->_model->populate($data);
  } catch (Zend_Exception $e) {
    $this->fail('Unexpected Exception: '.$e->getMessage());
  }

  $this->assertSame($data, $this->_model->toArray());
} 
```

**该模型**

```
public function __construct($props = null)
{
  // Set Filters
  $this->_filters = array(
    'id'            => array('Int'),
    'name'          => array('StringTrim', 'StripTags'),
    'description'   => array('StringTrim', 'StripTags'),
    'flag_active'   => array(new Zend_Filter_Boolean()),
    'flag_deleted'  => array(new Zend_Filter_Boolean())
  );

  // Set Validators
  $this->_validators = array(
    'id'            => array('Int'),
    'name'          => array(new Zend_Validate_StringLength(array('min'=>4, 'max'=>50))),
    'description'   => array(new Zend_Validate_StringLength(array('max'=>5000))),
    'flag_active'   => array(new Zend_Validate_InArray(array(true, false))),
    'flag_deleted'  => array(new Zend_Validate_InArray(array(true, false)))
  );

  // Set Properties
  if (!is_null($props)) {
    $this->populate($props);
  }
}

public function setFlagActive($arg)
{
  $input = new Zend_Filter_Input($this->_filters, $this->_validators);
  $input->setData(array('flag_active'=>$arg));
  if (!$input->isValid('flag_active')) {
    throw new Zend_Exception('Invalid FLAG_ACTIVE provided'. gettype($input->flag_active));
  }
  $this->_flag_active = (bool) $input->flag_active;
  return $this;
} 
```

就模型而言，我尝试将验证器`flag_active`留空`flag_deleted`，但这并没有改变我的结果。phpunit 的错误信息保持不变：

```
Unexpected Exception: Invalid FLAG_ACTIVE providedNULL 
```

而 NULL 是变量的类型，而当我通过`false`数据提供程序 goodData() 作为标志的参数传递时（badData 也一样）。

我的猜测是这与 Zend_Filter 有关，但我就是想不通。非常感谢提示！

**更新** 由于德鲁给出了一点提示，我已经进一步测试了一点，但问题仍然存在。我已将更新的类和单元测试粘贴到 pastebin 以提高可读性。

*   [模型类的 PasteBin](http://pastebin.com/A7QZqA6h "模型类的 PasteBin")
*   [TestClass 的 PasteBin](http://pastebin.com/DsEzGwLH "TestClass 的 PasteBin")

PHPUnit 给出以下错误：`You must give a non-empty value for field 'flag_active'`flag_deleted 相同。一半测试的第二个错误是`<null> does not match expected type "boolean"`. 我被困住了。无论我使用过滤器还是 inArrayValidator(array(0=>true,1=>false)) 它都不会改变任何事情：\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:11:46.583

如果您检查 的内容`$input->getMessages()`，它应该提供一些解释，说明为什么该特定值无效。

当您使用 时`Zend_Filter_Input`，任何未通过验证的值都不会通过其名称神奇地访问（例如`$input->flag_active`）。`NULL`如果它没有通过验证步骤，该值将始终为。

某些过滤器在某些情况下几乎可以保证验证（即带有 Int 验证器的 Int 过滤器），因为过滤器将过滤数据并为验证器返回有效值。即使原始输入数据无效`hello`，通过过滤`Int`器返回`0`也可以使用简单的验证器进行验证。`Int`

您最有可能在异常中获得空值的原因是该值不可用，因为它没有验证；因此，请检查输入消息以获取有关原因的任何提示。

编辑：

我认为您遇到的问题是`Zend_Filter_Input`默认情况下不允许空值。因此，如果进入过滤器的值为`false`或`NULL`，则会导致过滤器出错。

看看这段代码：

```
 <?php

    // set up a boolean validator and inarray validator like you have
    $filters    = array('test' => array(new Zend_Filter_Boolean()));
    $validators = array('test' => array(new Zend_Validate_InArray(array(true, false))));

    // set up the input filter with default options
    $input      = new Zend_Filter_Input($filters, $validators);

    // our "input" value which is (bool)false
    $test       = false;

    $input->setData(array('test' => $test));

    // run through input filter using default values
    // should throw error about a non-empty value
    if (!$input->isValid('test')) {
        echo "Test is not valid.  <br />Original Value: ";
        var_dump($test);
        echo "<br />";
        print_r($input->getMessages());
    } else {
        echo "Test is valid.<br />Original Value: ";
        var_dump($test);
        echo "<br />Value now: ";
        var_dump($input->test);
    }

    // now allowing empty values...
    echo "<hr />\n";

    // tell Zend_Filter_Input to allow empty values on input
    $options = array(Zend_Filter_Input::ALLOW_EMPTY => true);

    // set up new input filter with option
    $input   = new Zend_Filter_Input($filters, $validators, null, $options);

    $input->setData(array('test' => $test));

    // run through input filter allowing empty values
    // this should NOT throw an error
    if (!$input->isValid('test')) {
        echo "Test is not valid.  <br />Original Value: ";
        var_dump($test);
        echo "<br />";
        print_r($input->getMessages());
    } else {
        echo "Test is valid.<br />Original Value: ";
        var_dump($test);
        echo "<br />Value now: ";
        var_dump($input->test);
    } 
```

所以问题似乎是 Zend_Filter_Input 不喜欢空值，除非你指定一个选项。因此，将有效 ( `false`) 值发送到过滤器会导致错误，除非您设置`Zend_Filter_Input::ALLOW_EMPTY`为`true`.

# ios5 - 登录页面，然后导航到另一个视图（UIViewController）

> ID：11136009
> 
> 赞同：0
> 
> 时间：2012-06-21T10:15:27.073
> 
> 标签：ios5, login, navigation, storyboard

我正在使用 iOS5 故事板。我想为应用程序创建一个登录屏幕并导航到另一个视图控制器，以防提供的用户名和密码正确。目前我正在为用户名和密码采用硬编码字符串。

如何从登录屏幕导航到另一个视图控制器？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:42:39.310

我会将登录屏幕显示为根视图控制器之上的模式视图。

# google-chrome-devtools - 当前浏览器窗口关闭时，如何防止 Chrome 开发者工具关闭？

> ID：11136010
> 
> 赞同：93
> 
> 时间：2012-06-21T10:15:30.610
> 
> 标签：google-chrome-devtools

我正在尝试使用 chrome 开发人员工具来调试我在使用 Twitter oauth 时遇到的问题。

当 oauth 窗口出现时，我打开开发者工具来监控请求 - 但是一旦 oauth 窗口关闭，开发者工具窗口也随之关闭。我希望能够保持开发人员工具窗口打开，以便我可以检查提出的请求。

这可能吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2015-02-23T15:52:38.593

这不是一个完美的解决方案，但您可以在事件上添加断点`Window.close`并`unload`打开以下位置的复选框：

```
Developer tools -> "Sources" tab -> Event Listener Breakpoints -> Window -> close 
```

和

```
Event Listener Breakpoints -> Load -> unload 
```

尝试标记两者，看看哪一个最适合你

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-07-18T04:03:41.310

另一种选择是自己手动添加断点。打开关闭太快的窗口，打开 JS 控制台，然后：

```
window.addEventListener('unload', function() { debugger; }) 
```

但这一切都归结为窗口正在做什么，以及您何时想要停止某些事情，因此如@jfhfhf839 的回答一样，在 Sources 选项卡中尝试使用 Event Listener Breakpoints 也是一个好主意。

在我的情况下（调试 Google OAuth 流程），这个技巧既没有`Window -> Close`也没有，但是很有用，尽管我必须恢复执行几次才能到达我想要的位置。`Load -> Unload``Script > Script First Statement`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-06T20:38:53.240

尝试使用远程调试：[https](https://developers.google.com/chrome-developer-tools/docs/remote-debugging) ://developers.google.com/chrome-developer-tools/docs/remote-debugging 在这种情况下，开发人员工具将在不会自动关闭的单独浏览器选项卡中打开。

如果可以找到它，还可以考虑在关闭窗口的代码中设置断点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-01T17:54:05.640

只需在关闭和暂停前按 F8，然后添加断点。

# url - 仅通过 jQuery 从 url 获取元标记

> ID：11136011
> 
> 赞同：7
> 
> 时间：2012-06-21T10:15:34.890
> 
> 标签：url, dom, jquery, meta-tags

现在有很多 facebook 风格的从 url 获取数据的脚本，但它们都只能在 jQuery 和 PHP 的组合中工作。是否可以仅通过 jQuery 获取 url？

我在这里找到了如何通过以下方式获取页面的 mata-tags：

```
$('meta[name=description]').attr("content");
$("meta[property=og:title]").attr("content", document.title); 
```

但是如何正确地在 jQuery.get() 中插入此查询以获取文本值？

```
$.get('http://www.imdb.com/title/tt1375666/', function(data) {
  $('meta[name=adescription]').attr("content");
}); 
```

如果最流行的网站使用 OpenGraph，我应该看看 jQuery.getJSON() 的方向吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-10-21T06:01:24.060

[由于跨域政策](https://stackoverflow.com/questions/14681292/same-origin-policy-and-cors-cross-origin-resource-sharing)，这似乎是不可能的

肯定有办法通过结合客户端和服务器端更改来做到这一点。相反，我一直在一个项目中使用这个 API，它可以作为一个简单的 REST API 来获取 url 的开放图形数据。 `GET https://opengraph.io/api/1.0/site/<URL encoded site URL>` [https://opengraph.io/](https://opengraph.io/)

它一直在为我工作，作为仅客户端 javascript 的解决方案。

[注意：我与此产品或其创建者没有任何关系。我通过在线研究找到它并在一个项目中使用它。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-03-14T19:17:09.367

可以在任何地方使用[CORS](https://github.com/Rob--W/cors-anywhere)：

```
$.get("https://cors-anywhere.herokuapp.com/http://www.imdb.com/title/tt1375666/", function(data) {
    var meta = $(data).filter('meta[name="apple-itunes-app"]').attr("content");
    console.log(meta)
}); 
```

使用`apple-itunes-app`它是因为它是 IMDB 上的实际元标记。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-22T19:58:10.233

带滤镜效果很好！

你可以试试。

```
$.get('http://www.guardian.co.uk/culture/2012/jun/21/jimmy-carr-apologises-error-tax', function(data) {
    $(data).filter('meta[name=adescription]').attr("content");
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T10:23:09.507

使用从 URL 检索到的 html 数据

```
$.get('http://www.guardian.co.uk/culture/2012/jun/21/jimmy-carr-apologises-error-tax', 
function(data) {
   $(data).find('meta[name=adescription]').attr("content");
}); 
```

# java - 合并Spring引用的多个属性文件

> ID：11136012
> 
> 赞同：4
> 
> 时间：2012-06-21T10:15:43.947
> 
> 标签：java, spring, properties

我的 Spring 配置如下所示：

```
<jee:remote-slsb id="ejb1"
    jndi-name="org.example.Ejb1"
    business-interface="org.example.Ejb1"
    environment-ref="ejb1Properties">
</jee:remote-slsb>
<util:properties id="ejb1Properties" location="classpath:ejb1.properties"/>

<jee:remote-slsb id="ejb2"
    jndi-name="org.example.Ejb2"
    business-interface="org.example.Ejb2"
    environment-ref="ejb2Properties">
</jee:remote-slsb>
<util:properties id="ejb2Properties" location="classpath:ejb2.properties"/> 
```

...因为这两个 EJB 可能使用不同的 JNDI URL、不同的上下文工厂和身份验证凭据。ejb1.properties 和 ejb2.properties 具有相同名称的属性，但具有不同的值：

```
ejb1.properties:
  java.naming.factory.initial=weblogic.jndi.WLInitialContextFactory
  java.naming.provider.url=t3://example1:7101
  java.naming.security.principal=id1
  java.naming.security.credential=foo

ejb2.properties:
  java.naming.factory.initial=weblogic.jndi.WLInitialContextFactory
  java.naming.provider.url=t3://example2:7101
  java.naming.security.principal=id2
  java.naming.security.credential=bar 
```

但是，我希望我的用户拥有一个要维护的属性文件，而不是两个。

显然，编写一个从核心属性文件生成 ejb1.properties 和 ejb2.properties 的启动脚本很容易。但是有没有办法让 Spring 从单个文件中获取属性，并适当地映射名称？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T18:38:11.313

AFAIK，Spring 中没有任何东西可以处理您的情况。但是，一种直接的解决方案是扩展 PropertiesFactoryBean 并覆盖 mergeProperties() 方法。下面是一个基于名称前缀过滤属性条目的扩展示例：

```
public class FilteringPropertiesFactoryBean extends PropertiesFactoryBean {

    private String namePrefix;

    @Override
    protected Properties mergeProperties() throws IOException {
        Properties unfilteredProperties = super.mergeProperties();

        Properties filteredProperties = new Properties();

        // iterator over keys
        // discard entries whose key doesn't start with prefix
        for (Object key : unfilteredProperties.keySet()) {
            String name = key.toString();

            // trim the property name by removing the target prefix.
            String trimmedName = trimName(name);
            if (trimmedName != null) {
                // add the property to the filtered collection
                String value = unfilteredProperties.getProperty(name);
                filteredProperties.setProperty(trimmedName, value);
            }
        }

        return filteredProperties;
    }

    public void setNamePrefix(String value) {
        this.namePrefix = value;
    }

    private String trimName(String name) {
        // does name start with the prefix and is the name longer than the prefix
        if (name.startsWith(namePrefix) && name.length() > namePrefix.length()) {
            return name.substring(namePrefix.length());
        }
        return null;
    }

} 
```

配置工厂 bean 类似于：

```
<bean id="ejb1Properties" class="example.FilteringPropertiesFactoryBean">
  <property name="location" value="classpath:merged.properties"/>
  <property name="namePrefix" value="ejb1."/>
</bean> 
```

使用上述配置和一个合并的.properties 文件，其中包含：

```
ejb1.java.naming.factory.initial=weblogic.jndi.WLInitialContextFactory
ejb1.java.naming.provider.url=t3://example1:7101
ejb1.java.naming.security.principal=id1
ejb1.java.naming.security.credential=foo

ejb2.java.naming.factory.initial=weblogic.jndi.WLInitialContextFactory
ejb2.java.naming.provider.url=t3://example2:7101
ejb2.java.naming.security.principal=id2
ejb2.java.naming.security.credential=bar 
```

FilteringPropertiesFactoryBean#mergeProperties() 返回的结果属性是（注意前缀从最终属性名称中去除）：

```
java.naming.factory.initial = weblogic.jndi.WLInitialContextFactory
java.naming.provider.url = t3://example1:7101
java.naming.security.principal = id1
java.naming.security.credential = foo 
```

# iphone - 响应预期内容长度返回 -1

> ID：11136020
> 
> 赞同：3
> 
> 时间：2012-06-21T10:15:56.340
> 
> 标签：iphone, ios5, nshttpurlresponse

您好，当我从我的 web 服务加载数据时，我需要创建一个 progressView。

实际上，expectedContentLength 总是返回-1。

在看了很多类似的问题之后，看起来我的网络服务从未发送过 Content-Length:。

然后我用 CURL 检查，结果如下：

```
< HTTP/1.1 200 OK
< Date: Thu, 21 Jun 2012 10:04:39 GMT
< Server: Apache/2.2.16 (Debian)
< X-Powered-By: PHP/5.3.3-7+squeeze9
< cache-control: no-cache
< Vary: Accept-Encoding
< Content-Type: text/html; charset=UTF-8
< Content-Length: 3239  
< Connection: Keep-Alive
< Set-Cookie: PHPSESSID=u4o4i9dofdgnkfmtnf163635j6; path=/ 
```

这是我捕捉长度的代码

```
long long expectDataSize;
long long currentDataSize;

....

 - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSHTTPURLResponse *)response
{
    NSLog(@"expect content length %lld", [response expectedContentLength]);
    expectDataSize = [response expectedContentLength];
    currentDataSize = 0;
} 
```

有人已经看到这个问题了吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T09:26:31.690

好的，我自己解决了这是我真正的问题和解决方案：

当我问卷曲时，我可以得到长度没问题。

但是当我使用 NSurlConnection

```
NSURLConnection *c = [[NSURLConnection alloc] initWithRequest:req delegate:self]; 
```

响应将用“Gzip”压缩（不要问我为什么）。如果响应是用 Gzip 编码的，就不可能知道长度，那么“ **expectedContentLength** ”返回**-1**。**[response allHeaderFields]**中没有“Content-Length” 。

如果您真的想获得长度，您可以简单地强制不使用 Gzip，如下所示：

```
[req setValue:@"" forHTTPHeaderField:@"Accept-Encoding"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T16:36:32.050

我遇到了同样的问题，似乎预期的文件大小是未知的，这就是它返回-1的原因。

看到类似的威胁[为什么 [response expectedContentLength] 总是返回 -1](https://stackoverflow.com/questions/7417610/why-response-expectedcontentlength-always-return-1)

# cvs - 有没有办法删除 CVS 中的所有粘性选项？

> ID：11136022
> 
> 赞同：5
> 
> 时间：2012-06-21T10:16:03.460
> 
> 标签：cvs, options, sticky, removeall

我不小心将一个文件作为二进制文件提交到 CVS（粘性选项 -kb），现在我想删除它。可能吗？

我找到了一种使用 cvs admin -kv 将选项更改为其他选项的方法，但是有没有办法完全删除它？

我还尝试删除该文件，然后再次重新添加（不指定任何粘性选项），但该文件的新版本也具有相同的旧 -kb 选项。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-15T14:28:48.900

您可以使用回购手术删除二进制标志，如下所示：

1.  编辑`file,v`存储在 repo 中的内容并删除带有`expand @b@;`.
2.  如果您已签出 的版本`file`，请编辑`CVS/Entries`并删除末尾的`-kb`for ，以便该行以 . 结尾。`file``/file/1.1/Mon Sep 9 09:30:10 2013/-kb/``//`

这就是这里的诀窍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T05:28:02.997

从[https://lists.nongnu.org/archive/html/info-cvs/2000-10/msg00620.html](https://lists.nongnu.org/archive/html/info-cvs/2000-10/msg00620.html) 我已经尝试过了，它可以工作。

例如，您有一个名为“abc”的文件。

```
cvs update -A abc
cvs admin -kkv abc
cvs update -A abc
cvs status abc 
```

注意：确保在 cvs admin 之后进行 cvs 更新，因为在 cvs admin 之后您的本地文件不会自动更新。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-06T03:20:01.350

不：

*   没有这个命令

*   它不是为此而设计的

# sql-server-2005 - MS SQL表包含一列的重复行值，但其他列的值不同，多个条目的唯一值？

> ID：11136023
> 
> 赞同：1
> 
> 时间：2012-06-21T10:16:03.773
> 
> 标签：sql-server-2005, duplicates

我有一个表 a 有多个 artikelNr 条目，它包含多个 Enhet 值，如下图所示，我想查询所有与 Enhet=5 无关的唯一 artikelNr。

如果可以提供帮助，还有另一个表仅包含唯一的 artikelNr。我在本地数据库中使用 MS SQL。

```
artikelNr enhet                      output should look like
  1         0                        artikelnr          enhet 
  1         5                          2                 0 or 3  no problem
  1         8                          6                 0 or 8 or 3 no problem 
  1         3
  2         0
  2         3 
  4         5  
  4         0  
  4         1  
  4         2
  6         8
  6         0
  6         3
  1         2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:19:22.050

尝试这个

```
 Select distinct (artikelNr) from ArtAlias where artikelNr NOT IN 
    (select artikelNr from ArtAlias where enhet = 5) order by ArtikelNr 
```

# forms - 删除表单内的按钮/链接

> ID：11136024
> 
> 赞同：1
> 
> 时间：2012-06-21T10:16:04.040
> 
> 标签：forms, cakephp-2.1

我的会话卡有一个表格，我想配置删除链接。我认为我可以在每行末尾使用获取请求来做到这一点。但是，在 cakephp 2 中，它“建议”最好使用发布请求。

没关系 ：

```
<?php
    echo $this->Form->postLink(
                    '<button class="btn btn-danger">
                         <i class="icon-trash icon-white"></i>
                     </button>',
                    array(
                          'action'   => 'deleteBasket', $plaque['id']
                          ),
                    array(
                          'class'    => 'tip',
                          'escape'   => false, 
                          'confirm'  => 'Are you sure ?'
                         ));
?> 
```

除了当我使用这段代码时，它会在我的表单中生成一个表单，所以当我提交时它搞砸了。我不能把这个放在我的行之外。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-27T14:29:42.363

从 CakePHP 2.5 开始，您可以在表单元素中使用 postLink。您必须将选项设置`inline`为 false：

```
echo $this->Form->postLink('delete', array(
    'controller' => 'somewhere',
    'action' => 'delete',
    $deletedID
), array(
   'inline' => 'false'
)); 
```

...然后最好在布局视图的底部获取“postLink”块（实际的 html 表单标签所在的位置），如下所示

```
echo $this->fetch('postLink'); 
```

此解决方案需要启用 javascript！

[引用文档：](https://api.cakephp.org/2.5/class-FormHelper.html#_postLink)

`inline`- 关联的表单标签是否应该内联输出。设置为 false 以将表单标记附加到“postLink”视图块。默认为真。

`block`- 选择一个自定义块来附加表单标签。使用此选项将覆盖 inline 选项。

（是的，这是个老话题，但因为我发现这个研究同样的问题，如果有更新的答案会很好......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-22T20:10:21.680

尝试以下操作：

```
<?php echo $this->Form->create('Controller Name', array('url' => `array('controller' => 'Controller Name', 'action' => 'deleteBasket', $plaque['id']))); ?>`
<?php echo $this->Form->submit(arrray('class' => 'btn btn-danger', 'value' => '<i class="icon-trash icon-white"></i>', 'escape' => false, 'onclick' => 'confirm('Are you sure you want to continue')')); ?> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-27T09:52:29.410

阅读文档，[http://api20.cakephp.org/class/form-helper#method-FormHelperpostLink](http://api20.cakephp.org/class/form-helper#method-FormHelperpostLink)

```
This method creates a <form> element. So do not use this method inside an existing form. Instead you should add a submit button using FormHelper::submit() 
```

# spring - 休息球衣中的身份验证

> ID：11136027
> 
> 赞同：1
> 
> 时间：2012-06-21T10:16:17.417
> 
> 标签：spring, struts, restful-authentication

我有一个使用 struts、spring、hibernate 构建的应用程序。在这个应用程序中，我想建立休息服务。此休息服务将用于 Android 应用程序。在这个应用程序中，用户和角色存储在我的数据库中。用户表中的用户名和密码以及角色表中的角色。我想问的是，如何对想要访问其余服务的客户端进行身份验证。因此，要访问静态资源服务，客户端必须先登录。如果用户尚未登录，则其余部分将始终返回字符串“not_authenticated”，例如。通常在 web 应用程序中，这使用会话。其余的也一样吗？

编辑以添加我当前的代码并更新我的问题

```
@POST
@Path("/login")
@Produces(MediaType.APPLICATION_JSON)
public Response login(@FormParam("username") String username,
        @FormParam("password") String password){
    MessageDto messageDto = customerService.autenticate(username, password);
    if(messageDto.getResult().equals("success")){
        return Response.ok(messageDto)
            .cookie(new NewCookie("customerId", messageDto.getMessage()))
            .build();
    }else{
        return Response.ok(messageDto)
                       .build();
    }
} 
```

MessageDto 是一个对象，它有两个变量字符串结果和字符串消息。比如客户端登录成功，json返回是这样的

```
{"result":"success","message":"1-admin"} 
```

当客户端登录不成功时

```
{"result":"error","message":"Your username is not registered"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:50:04.020

登录成功时，使用带有**HTTPONLY属性的****Jersey 响应对象**设置用户 cookie（如 userId、token 等） ，

 ****并在您的控制器中使用@CookieParam**获取该cookie ，如果未找到匹配项，则首先验证您的数据库记录，然后将其重定向到您的登录页面，否则继续。**

# java - 如何将 Java 中的“问号（？）”类型泛型模拟为 C++？

> ID：11136029
> 
> 赞同：7
> 
> 时间：2012-06-21T10:16:18.517
> 
> 标签：java, c++, templates

我有一个 Java 代码，其中函数的返回类型具有无界通配符类型 (?)。我如何在 C++ 中模拟这样的东西？例如

```
 public GroupHandlerSetting<?> handleGroupProcessingFor(final EventHandler<T> eventHandler)
    {
        return new GroupHandlerSetting<T>(eventHandler, eventProcessors);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:33:28.960

在 C++ 中，所有类型参数都必须有一个名称，无论您是否使用它，所以没有问号。只需将其作为函数的模板参数并为其命名，就可以了。

```
template <typename T>
struct templ {
   template <typename U>
   void assign( templ<U> & u );      // public void assign<?>( temple<U> u )      
}; 
```

这是微不足道的部分，更复杂的部分是对类型强制执行约束，为此您可以使用 SFINAE：

```
template <typename T>
struct templ {
   template <typename U, typename _ = std::enable_if< 
                              typename std::is_base_of<U,T>::value
                                       >::type >
   void super( templ<U> & u );       // public void super_<? super T>( templ<?> u )

   template <typename U, typename _ = std::enable_if<
                              typename std::is_base_of<T,U>::value 
                                       >::type >
   void extends( templ<U> & u );     // public void extends_<? extends T>( templ<?> u )
} 
```

那就是将 C++11 用于 SFINAE，在 C++03 中，它有点复杂（好像这个版本很简单），因为你不能在函数模板参数上使用 SFINAE，所以 SFINAE 需要应用于返回类型或额外的函数参数。SFINAE 是一个功能更强大的解决方案，它不仅可以用于提供`super`，`extends`而且可以用于提供许多其他类型或编译时间值的特性。谷歌搜索 SFINAE，你会发现很多使用 SFINAE 的案例，其中很多都是 C++03 风格的。

有一个概念提案将大大简化语法，但没有达成一致，为了推动标准完成，它被推迟到以后的标准。

现在，这在 C++ 中确实不像在 Java 中那么常见，所以我建议您提供一个不同的问题来说明您想要做什么，您将获得更多地道 C++ 设计的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:50:20.813

您的具体示例很容易完成，而且由于我不使用 Java，所以我不明白为什么它需要`<?>`那里。在 C++ 中，您只需填写相同的模板参数：

```
template<class T>
GroupHandlerSetting<T> handleGroupProcessingFor(EventHandler<T> const& evHandler){
  return GroupHandlerSetting<T>(evHandler, evProcessors);
} 
```

`T`将从传递给的任何参数中推导出来`handleGroupProcessingFor`，并且我们`T`对返回类型使用相同的类型，基本上与您在函数体中所做的完全一样。

# android - 具有大多边形数量的 Android OpenGL ES FPS 优化

> ID：11136033
> 
> 赞同：0
> 
> 时间：2012-06-21T10:16:43.983
> 
> 标签：android, optimization, opengl-es, frame-rate

我在 5-6 个绘制调用中绘制 3d 场景，但场景中有大约 60000-65000 个三角形。LG 擎天柱黑色有 13-14 fps，LG 擎天柱一号有 10-12 fps，这并不酷。

我可以以编程方式减少远离相机的模型中的三角形数量吗？或者我还能如何提高FPS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:45:02.987

是的，这通常称为细节层次或 LOD。在现代硬件上执行此操作的最有效方法是手动或以编程方式离线创作具有各种三角形计数的多个版本的网格。

# php - 如何在付款流程前显示 Magento 订单评论

> ID：11136034
> 
> 赞同：0
> 
> 时间：2012-06-21T10:16:53.247
> 
> 标签：php, magento

我正在开发一个magento购物车。我对magento没有足够的经验。在默认情况下，magento**的“订单审核”**是在付款流程之后放置的，但我需要在付款流程之前将**“订单审核”**替换为。我怎样才能做到这一点？任何人都可以分享任何想法吗？或提供任何链接以供参考。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:24:48.270

对于初学者，请查看文件**/app/code/core/Mage/Checkout/Block/Onepage.php**

第 44 行：`$stepCodes = array('billing', 'shipping', 'shipping_method', 'payment', 'review');`

显然不要覆盖任何核心文件，这主要是一个起点，如果您需要更多指导，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T06:29:46.617

在magento 1.7.0.2

/public_html/shoesales/app/code/local/Mage/Checkout/Block/Abstract.php

line 208 protected function _getStepCodes() { //return array('login', 'billing', 'shipping', 'shipping_method', 'payment', 'review'); return array('billing', 'shipping', 'review', 'payment'); }

这只会在计费后不久更改显示顺序（选择相同的送货地址选项） 步骤切换到付款

# android - Android GridView ItemClikListneter 问题

> ID：11136039
> 
> 赞同：0
> 
> 时间：2012-06-21T10:17:06.720
> 
> 标签：android, gridview, onitemclicklistener

`GridView`我用 item.xml创建了一个包含图像的`LinearLayout`.

网格视图代码：

```
<GridView
            android:id="@+id/gridView"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:clickable="true"
            android:columnWidth="150dip"
            android:gravity="center"
            android:horizontalSpacing="10dip"
            android:numColumns="auto_fit"
            android:stretchMode="columnWidth"
            android:verticalSpacing="15dip" >
        </GridView> 
```

item.xml 代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/itemLayout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="@drawable/selector"
android:clickable="true"
android:gravity="center_horizontal"
android:orientation="vertical" >

<ImageView
    android:id="@+id/itemIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:scaleType="matrix"
    >
</ImageView> 
```

然后我为背景添加了 selector.xml`LinearLayout`以避免在单击项目时显示选定区域。

选择器.xml 代码：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<item android:drawable="@android:color/transparent" android:state_enabled="true" android:state_pressed="true"/>
<item android:drawable="@android:color/transparent" android:state_enabled="true" android:state_focused="true"/>
<item android:drawable="@android:color/transparent" android:state_enabled="true"/> 
```

添加`android:clickable="true"`到 item.xml后`LinearLayout`，`GridView` `ItemClickListner`不起作用。否则它可以工作，但不会将 selector.xml 效果应用于`LinearLayout`。我想将 selector.xml 效果应用于`LinearLayout`and`ItemClickListner`也可以。

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:28:50.630

只需将属性添加`android:focussable=false`到 item.xml 中的 ImageView。这应该可以解决问题。

```
<ImageView
    android:id="@+id/itemIcon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:clickable="true"
    android:focussable=false
    android:scaleType="matrix"
    >
</ImageView> 
```

由于您为此 ImageView 分配了可点击的 True，因此默认情况下它会获得焦点，因此不允许点击您的 GridView 项目。因此，将其设置为不可聚焦状态将帮助您实现这两个点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:32:33.623

**从item.xml**布局的线性布局和 imageview 中删除 android:clickable="true"并在 imageview 中添加这三个参数

```
 android:focusable="false"
 android:clickable="false"
 android:focusableInTouchMode="false" 
```

之后，在可绘制的**background.xml** 中使用类似此参数 的内容创建一个 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
   <item android:state_focused="true" android:drawable="@color/focusedcolor"
   <item android:state_pressed="true" android:drawable="@color/selectedcolor" />
   <item android:drawable="@color/normalcolor" />
</selector> 
```

之后以线性布局 添加您的**item.xml**

```
 android:background="@drawable/background" 
```

在我的代码中，我在**values文件夹中有****colors.xml** ， 例如

 **```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
 <color name="focusedcolor">#b6c4c5</color>
 <color name="selectedcolor">#ff33ffff</color>
 <color name="normalcolor">#f7ff1f</color>
 </resources> 
```

如果你想要图像而不是在**background.xml**中，你也可以使用可绘制文件夹中的图像而不是颜色，你必须更改

```
 android:drawable="@color/focusedcolor" line by 

 android:drawable="@drawable/imagename" 
```**

# html - 为什么当两个 div 都设置为 float:left 时它不会发生冲突？

> ID：11136040
> 
> 赞同：0
> 
> 时间：2012-06-21T10:17:09.510
> 
> 标签：html, css, css-float

```
<div class="header">

<div class="contact half">
    <dl>
        <dt>Email</dt>
        <dd>z@srgbethet.com</dt>

        <dt>Phone</dt>
        <dd>+456 333 444</dd>

        <dt>Website</dt>
        <dd>kkkk.com</dd>
    </dl>
</div>

<div class="skills half">
    <ul>
        <li>Quantum Accelerators</li>
        <li>dfeerfbe</li>
        <li>Parachuting</li>
        <li>Photon Cannons</li>
    </ul>
</div> 
</div> 
```

CSS 代码：

```
.half {
 float: left;
 width: 50%;
 } 
```

最终的结果是接触`div`和技能`div`都很好地并排在一起。`float:left`既然两者都在跟踪财产，为什么它没有发生冲突？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:20:16.610

当您应用于`float:left`一个元素时，以下块元素将位于它的右侧（除非另有说明）。

他们都拥有的事实`float:left`是无关紧要的，这只是因为你的第一个元素`contact half`, 有`float:left`

在我创建的这个 jsfiddle 示例中，我`half`从第二个元素中删除了，它们仍然并排放置：

[http://jsfiddle.net/Curt/nV5Sx/](http://jsfiddle.net/Curt/nV5Sx/)

如果您不希望他们并排坐着，您可以`clear:left`使用第二个元素：

[http://jsfiddle.net/Curt/nV5Sx/1/](http://jsfiddle.net/Curt/nV5Sx/1/)

我觉得你可以通过更多地了解如何`float:left`工作来做。有关此样式属性的更多信息，请参阅此方便的教程：

[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:20:59.490

[在这里查看](http://www.w3schools.com/jsref/prop_style_cssfloat.asp)float 属性的定义 Float 用于水平对齐对象，因此它没有冲突。尽管您对两个元素使用了相同的类，但对于 HTML DOM 来说并不重要。

# triggers - 触发器与 JPA 事件

> ID：11136042
> 
> 赞同：22
> 
> 时间：2012-06-21T10:17:13.207
> 
> 标签：triggers, jpa-2.0

我正在使用 Spring 3.1.0.RELEASE、JSF 2.x、JPA 2 和 Hibernate Provider、MySql 5.1.x 做一个 Web 应用程序。该应用程序在 Tomcat 7.X 上运行。

在我的实体中，我有一些日期，例如上次更新日期：

```
@Column(name = "last_update_date", insertable = false, updatable = false)
@Temporal(TemporalType.TIMESTAMP)
private Date lastUpdateDate; 
```

目前我有一个更新的触发器：

```
CREATE TRIGGER upd_site BEFORE UPDATE ON site
FOR EACH ROW SET NEW.last_update_date = CURRENT_TIMESTAMP(); 
```

它工作正常，但我只是注意到 JPA [http://www.objectdb.com/java/jpa/persistence/event中有一些回调方法](http://www.objectdb.com/java/jpa/persistence/event)

JPA 事件和 MySql 的触发器之间最好的是什么？

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-21T11:09:50.063

没有*最好*的东西。数据库触发器将在每次更新行时更新最后更新日期，无论用于更新行的方式（Hibernate、JDBC 查询或来自数据库管理工具的更新）。仅当使用 JPA 更新行时才会调用 JPA 回调。你可能想要一个或另一个。

另一个区别是 JPA 不知道数据库执行的触发器。因此，如果您更新实体中的某些字段，并且 JPA 刷新了更改，则触发器将修改更新日期，但 JPA 实体会将更新日期的旧值保留在内存中。所以如果更新后在GUI中显示这个更新日期，那么更新日期是不正确的。您必须刷新实体才能获得最新的更新日期。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-22T13:30:44.533

我已经将它与数据库中的触发器和 JPA 侦听器一起使用，我选择了 JPA 侦听器，因为：

*   JPA 代码中唯一与数据库通信的代码，因此我不必担心时间戳字段过时。（如果将来发生这种变化，我可以添加触发器并更改映射的超级类）

*   JPA 侦听器不那么复杂，因为我不必在数据库中创建大量触发器，因此我需要维护的东西更少。由于我正在积极开发和更改数据库结构，因此在我快速迭代开发时不必去更新触发器。

*   `insert_ts`我完全控制了数据库，并为数据库制定了一个规则，即每个表都将有一个整数 pkey 和一个整数版本，并且时间戳表将具有`update_ts`这些列是我的数据库设计中的通用规则，所以生活很容易我有这两个映射的超类，因为我从它们扩展而来，所以我的所有实体都易于编码。

```
@MappedSuperclass
public abstract class PersistableObject {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name="pkey")
    private Integer pkey;

    @Version
    @Column(name="version")
    private Integer version;

    public Integer getPkey() {
        return this.pkey;
    }

    public Integer getVersion() {
        return this.version;
    }

    @Override
    public String toString() {
        return "Presistable Object: pkey=" + this.pkey + " Object: " + this.getClass().getName();
    }
} 
```

和

```
@MappedSuperclass
public class TimeStampedPersistableObject extends PersistableObject {

    @Column(name = "insert_ts")
    @Temporal(TemporalType.TIMESTAMP)
    private Date    insertTimestamp;

    @Column(name = "update_ts")
    @Temporal(TemporalType.TIMESTAMP)
    private Date    updateTimestamp;

    @SuppressWarnings("unused")
    @PrePersist
    private void onInsert() {
        this.insertTimestamp = new Date();
        this.updateTimestamp = this.insertTimestamp;
    }

    @SuppressWarnings("unused")
    @PreUpdate
    private void onUpdate() {
        this.updateTimestamp = new Date();
    }

    public Date getInsertTimestamp() {
        return this.insertTimestamp;
    }

    public Date getUpdateTimestamp() {
        return this.updateTimestamp;
    }
} 
```

# solr - 使用 DIH 索引后的 SOLR 内存消耗

> ID：11136043
> 
> 赞同：1
> 
> 时间：2012-06-21T10:17:18.597
> 
> 标签：solr, jetty, dih

我正在使用 solr 3.6。我每小时使用 DIH aprox 2.6GB 数据进行索引（现在，我使用完全导入，但我也知道增量导入）。我只为 JVM 使用 24GB 的 RAM。solr 实例是一个多核实现（现在有 8 个核心，但会增长），但只有一个核心有大索引（大约 2.6GB）。我观察到每个完整索引后 RAM 使用量都在增加，并且在我不重新启动 servlet 容器（码头）之前永远不会回来。这是来自 New Relic 的数据图像： ![New Relic 的码头快照](../Images/6bb64b6ea239bc18b9503b9d9d2724cd.png)

这是solr的问题还是错误？我想问题是垃圾收集。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:19:13.973

这完全没问题，没有错误。在java中，如果你为堆分配X数量的ram，jvm会很乐意根据需要使用它，并且可能需要一段时间才能释放它，甚至直到它需要新对象的内存时才释放它。

[在有关 java 内存的其他问题中](https://stackoverflow.com/questions/8265240/burst-memory-usage-in-java)查看更多详细信息

# mysql - 如何使用 IN 和参数检查 MySQL 中的多个值？

> ID：11136044
> 
> 赞同：1
> 
> 时间：2012-06-21T10:17:31.863
> 
> 标签：mysql, regex, stored-procedures, parameters

我正在生成一串值（颜色），如下所示：

```
 'red|green|blue|yellow|orange|black' 
```

我可以将它作为参数（param_cols）传递给 MySQL 存储过程并像这样检查它：

```
 SELECT tbl.products
  FROM table AS tbl
  WHERE tbl.color IN ( param_cols ); 
```

**问题**：这可能使用参数吗？我应该使用 IN、LIKE 还是 REGEX？

**编辑**：
感谢您的提示。但是，我更关心是否可以将颜色列表作为变量传递到存储过程中，而不是必须单独插入每种颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:25:04.253

似乎有一个[FIND_IN_SET](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_find-in-set)函数：

```
 SELECT tbl.products
 FROM table AS tbl
 WHERE FIND_IN_SET(tbl.color , 'red,green,blue,yellow,orange,black'); 
```

不过，我不确定[这是否可以与 index 一起使用](http://bugs.mysql.com/bug.php?id=37564)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:21:50.193

如果你的颜色有一个 int 索引，你最好使用它。

但是你在正确的轨道上，你可以使用 IN

```
SELECT tbl.products FROM table as tbl WHERE tbl.color 
IN ('red','green','blue','yellow','orange','black') 
```

不过，这只会寻找完全匹配的内容。

# java - servlet 不可用

> ID：11136045
> 
> 赞同：0
> 
> 时间：2012-06-21T10:17:32.997
> 
> 标签：java, jsp, servlets, tomcat6, web.xml

我有一个远程 tomcat 6.0.24 服务器，上面有一个网络应用程序。现在，当我输入映射在服务器上的特定 url ( website/wordbank/xmldictionaryservice ) 时，我得到以下信息：

> HTTP 状态 404 - Servlet xmldictionaryserviceservlet 不可用
> 
> 类型：状态报告
> 
> 消息：Servlet xmldictionaryserviceservlet 不可用
> 
> 描述：请求的资源（Servlet xmldictionaryserviceservlet 不可用）不可用。

...我期待一个带有文件选择器和提交按钮的小表单。

web.xml 的相关部分在这里：

```
<web-app>
...
    <servlet>
        <servlet-name>xmldictionaryserviceservlet</servlet-name>
        <servlet-class>wordbank.servlets.XMLDictionaryServiceServlet</servlet-class>
    </servlet>
...
    <servlet-mapping>
        <servlet-name>xmldictionaryserviceservlet</servlet-name>
        <url-pattern>/xmldictionaryservice</url-pattern>
    </servlet-mapping>
...
</web-app> 
```

xmldictionaryservice.jsp 的内容：

```
<html>
<body>

<form action="xmldictionaryservice" method="post" enctype="multipart/form-data">
<input name="xmlfile" type="file">
<input name="send" type="submit">
</form>

</body>
</html> 
```

目录树是：

```
webapps
 |
 ...
 +-wordbank
    |
    ...
    +-xmldictionaryservice.jsp
    +-WEB-INF
       |
       +-web.xml
       +-classes
          |
          +-wordbank
             |
             ...
             +-servlets
                |
                ...
                +-XMLDictionaryServiceServlet.class 
```

我检查了各种类似的线程，但它们并没有帮助我。有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:00:40.350

> *Servlet xmldictionaryserviceservlet 不可用*

这个特定于 Tomcat 的消息意味着在 webapp 的启动过程中，Tomcat 的以下内容失败了：

```
String servletClass = "wordbank.servlets.XMLDictionaryServiceServlet";
String servletUrlPattern = "/xmldictionaryservice";

Servlet servlet = (Servlet) Class.forName(servletClass).newInstance();
servlet.init(servletConfig);
servlets.put(servletUrlPattern, servlet); 
```

所以，可能的原因至少是找不到servlet类，或者servlet的默认构造函数不存在或者抛出了异常，或者`init()`方法抛出了异常，或者类没有实现`Servlet`（阅读：extend `HttpServlet`）一点也不。

在启动期间，有关此问题的信息应该在服务器日志的早期可用。再次阅读您的服务器日志以找到真正的异常和堆栈跟踪，并相应地修复 servlet 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:28:16.040

重新启动环境就可以了。它在日食中太频繁了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:10:34.097

Tomcat 正在识别 URL，因此尝试加载**XMLDictionaryServiceServlet**来创建实例。**加载类XMLDictionaryServiceServlet**似乎存在问题，请仔细检查类（**XMLDictionaryServiceServlet**）是否遵循 servlet 约定。

能否请您粘贴**XMLDictionaryServiceServlet.java的源代码**

# android - 是否可以在 9patch 图像中制作两个比例区域？

> ID：11136047
> 
> 赞同：0
> 
> 时间：2012-06-21T10:17:48.540
> 
> 标签：android, nine-patch

我正在尝试制作可扩展的滑块背景。

draw9patch 实用程序中的预览看起来不错， ![绘制9补丁](../Images/a883a0339b559acbc809b1e5b5cfa398.png)

但在设备中间部分有时会向上移动。 ![设备截图](../Images/6ea6858c2fa79e8e67b47d4c81e09882.png)

我做错什么了吗？或者有没有解决方法的孩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:27:59.627

找到了针对这种特殊情况的解决方法：将图像分成两部分：边框和中间区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:23:57.210

您需要在右侧和底部添加黑色像素来定义视图的填充。

# c# - 暂停代码执行，直到某个变量为真

> ID：11136049
> 
> 赞同：0
> 
> 时间：2012-06-21T10:17:57.773
> 
> 标签：c#, json, windows-phone

我正忙于开发一个调用 servlet 的 Windows Phone 应用程序，然后依次返回 JSON，然后将其转换为 C# 对象。

当用户单击按钮时，将执行此代码：

```
 //Login button pressed
    private void btnLogin_Click(object sender, RoutedEventArgs e)
    {

        //Get needed variables
        Doctor doctor = new Doctor();
        string userName = txtUsername.Text;
        string password = txtPassword.Text;

        if ((userName != "" || userName != null) && (password != "" || password != null))
        {
            //Log doctor in
            doctor.Login(userName, password);
        }
        else
        {
            MessageBox.Show("Please make sure all fields are filled out");
        }

        //If doctor has valid session ID, forward to search page
        if ((doctor.getOk() != "false") || (doctor.getOk() != "") && (doctor.getSessionID() != ""))
            NavigationService.Navigate(new Uri("/Search.xaml", UriKind.Relative));
            //MessageBox.Show("Ok: "+doctor.getOk()+"\nSessionID: "+doctor.getSessionID());
        else
            MessageBox.Show("Login failed, please check your username and password and try again");
    } 
```

这是医生课：

```
public class Doctor
{
    string sessionID = "";
    string username = "";
    string password = "";
    string ok = "";

    public void Login(string argUsername, string argPassword){           

        if ((username != "" || username != null) && (password != "" || password != null))
        {
            //Set doctor username and password for later reference if necesarry
            this.username = argUsername;
            this.password = argPassword;

            //Url to login servlet
            string servletUrl = "http://196.3.151.36:8080/AuthService/login?u=" + username + "&p=" + password;

            //Calls Servlet
            WebClient client = new WebClient();
            client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(logonJsonDownloadComplete);
            client.DownloadStringAsync(new Uri(servletUrl, UriKind.Absolute));

        }

    }

    //Converts returned Json to C# Object
    private void logonJsonDownloadComplete(object sender, DownloadStringCompletedEventArgs e)
    {
        var jsonResponse = e.Result;
        var session = JsonConvert.DeserializeObject<Session>(e.Result);
        ok = session.ok;
        sessionID = session.sid;
        MessageBox.Show("Ok: " + ok + "\nSessionID: " + sessionID);
    }

    public string getOk()
    {
        return this.ok;
    }

    public string getSessionID()
    {
        return this.sessionID;
    }

} 
```

这是会话类：

```
public class Session
{
    public string sid { get; set; }
    public Account account { get; set; }
    public string ok { get; set; }
    public string expiry { get; set; }
} 
```

现在的问题是：当用户单击登录按钮时，会创建一个新的医生对象，然后在该医生对象上调用 login() 方法，然后再调用 servlet。当 json 成功下载后，**logonJsonDownloadComplete**方法在医生类中被调用。然后基本上获取 json，并将其转换为几乎只有一堆 getter 和 setter 的会话对象。然后登录方法将医生变量（sessionID 和 ok）设置为会话对象中的任何内容。（呸！）

但是，当我在按钮单击事件中对我的医生对象调用 getOk() 和 getSessionID() 时，它会返回空白字符串，就像从未设置过变量一样。我认为这是因为代码可能异步运行？

如何在 getOk() 和 getSessionID() 语句之前在 onclick 方法中暂停我的代码，直到调用**logonJsonDownloadComplete**方法。这意味着已经收到了这些值......如果这有意义吗？

## 编辑

还可能值得一提的是，当我在 logonJsonDownloadComplete 方法中调用 MessageDialog 时，它可以工作，但是当我在 click 事件中调用它（当前已注释掉）时，它会返回空白变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:22:06.217

您不想*真正*暂停 UI 线程中的代码。您想要的是发生正常的 UI 事件（重新绘制等），但在登录完成之前禁用某些/所有其他控件。

基本上在编写 WP7 应用程序时，您*必须*异步思考。你不是真的在做`Login`——你在做`BeginLogin`。您需要在调用完成时向该方法发送回调以执行相关结果......然后您继续进入下一个屏幕或其他任何内容。

请注意，异步目前相对繁琐，但在 C# 5 和 .NET 4.5 中，通过/功能将变得*更加*简单。`async``await`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:25:13.800

我认为您正在寻找行动代表：http: [//msdn.microsoft.com/en-us/library/018hxwa8.aspx](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)

在这里，我举了一个例子：

```
 public void IsStringEmpty(string input, Action<bool, Exception> callback)
    {
        try
        {
            if (string.IsNullOrEmpty(input)) callback(true, null);
            else callback(false, null);
        }
        catch (Exception ex)
        {
            callback(false, ex);
        }
    }

    public void Test()
    {
        string test = string.Empty;

        // show busy indicator here

        IsStringEmpty(test, (result, error) =>
        {

            //hide busy indicator here

            if (error == null)
            {
                if (result) { /* string is empty */}
                else { /* string is not empty */}
            }
            else
            {
                /* show/log error?*/
            }
        });
    } 
```

# android - Android - 从中 间到顶部翻译动画

> ID：11136050
> 
> 赞同：2
> 
> 时间：2012-06-21T10:18:11.867
> 
> 标签：android, animation

我想为从屏幕中心开始的 ImageView 设置动画，并将其向上移动到屏幕顶部下方 10 px。我怎样才能在代码中实现这一点？

我目前正在做的是，我正在将屏幕坐标放在另一个图像上，并将这个动画图像放在上面一点，但是在高密度的大屏幕中，它不会保持相同的距离，所以相反，我想将它从顶部移动 10px。

我怎样才能做到这一点？

这是我的代码：

```
//calculate where to put the logo in y-axis depending on screen size
            int coords[] = {0,0};
            logoImageFixed.getLocationOnScreen(coords);
            int y = coords[1];
            int imgFixedHeight = logoImageFixed.getHeight();
            Log.d("daim","height: "+imgFixedHeight);
            float pointY = -(y + 3*imgFixedHeight);

            Animation a = new LogoAnimation(0.0f, 0.0f, 0.0f, pointY);
            a.setFillAfter(true);
            a.setDuration(600);
            a.setAnimationListener(new AnimationListener() {
                @Override
                public void onAnimationStart(Animation animation) {}
                @Override
                public void onAnimationRepeat(Animation animation) {}
                @Override
                public void onAnimationEnd(Animation animation) {
                    logoAnimated = true;
                }
            });
            logoImage.startAnimation(a); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:26:05.747

好吧，我认为您走在正确的道路上

```
int[] coords = {0,0};
logoImage.getLocationOnScreen(coords);
int y = coords[1];

//to top of screen  
TranslateAnimation toTop = new TranslateAnimation(0, 0, 0, -y);
toTop.setDuration(700);
toTop.setFillAfter(true);
logoImage.startAnimation(toTop); 
```

但是如果你想增加 10 个像素的填充，你需要这样做

```
//padding 10 pixels from top    
TranslateAnimation toTop = new TranslateAnimation(0, 0, 0, ((-y) - 10));
toTop.setDuration(700);
toTop.setFillAfter(true);
logoImage.startAnimation(toTop); 
```

# android - 减少opengl es Android中的混蛋

> ID：11136058
> 
> 赞同：1
> 
> 时间：2012-06-21T10:18:56.887
> 
> 标签：android, bitmapimage

我在我的屏幕上为位图图像设置动画，它显示了一点点抖动，但是当我将它连接到 LCD 时，抖动非常明显。以下是代码。他们是让它变得自由的方法吗//这是方形类

```
public class Square {
private FloatBuffer vertexBuffer;   // buffer holding the vertices
private float vertices[] = {
        -1.0f, -1.0f,  0.0f,        // V1 - bottom left
        -1.0f,  1.0f,  0.0f,        // V2 - top left
         1.0f, -1.0f,  0.0f,        // V3 - bottom right
         1.0f,  1.0f,  0.0f         // V4 - top right
};

private FloatBuffer textureBuffer;  // buffer holding the texture coordinates
private float texture[] = {         
        // Mapping coordinates for the vertices
        0.0f, 1.0f,     // top left     (V2)
        0.0f, 0.0f,     // bottom left  (V1)
        1.0f, 1.0f,     // top right    (V4)
        1.0f, 0.0f      // bottom right (V3)
};

/** The texture pointer */
private int[] textures = new int[1];

public Square() {
    // a float has 4 bytes so we allocate for each coordinate 4 bytes
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(vertices.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());

    // allocates the memory from the byte buffer
    vertexBuffer = byteBuffer.asFloatBuffer();

    // fill the vertexBuffer with the vertices
    vertexBuffer.put(vertices);

    // set the cursor position to the beginning of the buffer
    vertexBuffer.position(0);

    byteBuffer = ByteBuffer.allocateDirect(texture.length * 4);
    byteBuffer.order(ByteOrder.nativeOrder());
    textureBuffer = byteBuffer.asFloatBuffer();
    textureBuffer.put(texture);
    textureBuffer.position(0);
}

/**
 * Load the texture for the square
 * @param gl
 * @param context
 */
public void loadGLTexture(GL10 gl, Context context) {
    // loading texture

    Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.car);
    // generate one texture pointer
    gl.glGenTextures(1, textures, 0);
    // ...and bind it to our array
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // create nearest filtered texture
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
    gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

    //Different possible texture parameters, e.g. GL10.GL_CLAMP_TO_EDGE

    // Use Android GLUtils to specify a two-dimensional texture image from our bitmap 
    GLUtils.texImage2D(GL10.GL_TEXTURE_2D, 0, bitmap, 0);

    // Clean up
    bitmap.recycle();
}

/** The draw method for the square with the GL context */
public void draw(GL10 gl) {
    // bind the previously generated texture
    gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

    // Point to our buffers
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

    // Set the face rotation
    gl.glFrontFace(GL10.GL_CW);

    // Point to our vertex buffer
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

    // Draw the vertices as triangle strip
    gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0, vertices.length / 3);

    //Disable the client state before leaving
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
} 
```

}

//这是渲染器

```
public class GlRenderer implements Renderer {

private Square      square;     // the square
private Context     context;
private float mTransY = -8;

/** Constructor to set the handed over context */
public GlRenderer(Context context) {
    this.context = context;

    // initialise the square
    this.square = new Square();
}

public void onDrawFrame(GL10 gl) {
    // clear Screen and Depth Buffer
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    // Reset the Modelview Matrix
    gl.glLoadIdentity();

    // Drawing
    gl.glTranslatef(mTransY, 0.0f, -10.0f);     // move 5 units INTO the screen
                                            // is the same as moving the camera 5 units away
    System.gc();                                        // otherwise it will be too large
    square.draw(gl);                        // Draw the triangle
    mTransY += 0.1f;

    if (mTransY>=8.0f)
        mTransY=-8.0f;
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    if(height == 0) {                       //Prevent A Divide By Zero By
        height = 1;                         //Making Height Equal One
    }

    gl.glViewport(0, 0, width, height);     //Reset The Current Viewport
    gl.glMatrixMode(GL10.GL_PROJECTION);    //Select The Projection Matrix
    gl.glLoadIdentity();                    //Reset The Projection Matrix

    //Calculate The Aspect Ratio Of The Window
    GLU.gluPerspective(gl, 45.0f, (float)width / (float)height, 0.1f, 100.0f);

    gl.glMatrixMode(GL10.GL_MODELVIEW);     //Select The Modelview Matrix
    gl.glLoadIdentity();                    //Reset The Modelview Matrix
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // Load the texture for the square
    square.loadGLTexture(gl, this.context);

    gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
    gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    //Black Background
    gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
    gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
    gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do

    //Really Nice Perspective Calculations
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST); 

} 
```

}

// 这是活动

```
public class Run extends Activity {

/** The OpenGL view */
private GLSurfaceView glSurfaceView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // requesting to turn the title OFF
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    // Initiate the Open GL view and
    // create an instance with this activity
    glSurfaceView = new GLSurfaceView(this);

    // set our renderer to be the main renderer with
    // the current activity context
    glSurfaceView.setRenderer(new GlRenderer(this));
    setContentView(glSurfaceView);
} 
```

}

# jsf - 使用 JSF/IceFaces 的应用程序架构

> ID：11136060
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:19:09.280
> 
> 标签：jsf, dynamic, architecture, icefaces

基本上，我正在尝试实现一个应用程序，该应用程序在左侧有一个菜单（有很多项目）和一个填充屏幕其余部分的“容器”，显示通过菜单选择的内容。我是 JSF 的新手，但我已经习惯了其他 RIA 技术。所以我要做的是让每次用户点击菜单项时动态加载容器的内容（使用 Ajax，没有完整的页面刷新）。在某些情况下，容器的内容也可以自行重新加载。在寻找答案时，我发现的唯一可比较的东西是一个已经加载了容器的所有内容的示例（一个 panelStack 中的多个 panelGroups）。当用户单击菜单时，panelStack 的 selectedPanel 属性发生了变化。这不符合需求。那么 JSF/IceFaces 的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:39:50.897

您想要类似 ICEfaces Showcase 示例中实现的行为吗？

[http://icefaces-showcase.icesoft.org/showcase.jsf](http://icefaces-showcase.icesoft.org/showcase.jsf)

该示例与 ICEfaces 发行版捆绑在一起，因此（或其中的一个示例）可能会提供一些关于如何进行的建议。

# oauth - 从桌面应用程序使用 AppHarbor oauth api

> ID：11136062
> 
> 赞同：1
> 
> 时间：2012-06-21T10:19:12.493
> 
> 标签：oauth, oauth-2.0, appharbor

AppHarbour [oauth API](http://support.appharbor.com/kb/api/oauth-v2)的文档仅显示了如何在网站内执行 oauth，即使用`redirect_uri`

```
GET https://appharbor.com/user/authorizations/new?client_id=:client_id&redirect_uri=:http://mysite.com/home/auth 
```

这最终会重定向到[http://mysite.com/home/auth?&code=ACCESS_CODE](http://mysite.com/home/auth?&code=ACCESS_CODE)

但是有没有办法将`ACCESS_CODE`值作为 GET 的一部分取回？我希望在桌面应用程序中使用 AppHarbour api。我可以使用嵌入式网络浏览器打开网页，以便用户可以验证我的应用程序，但我没有重定向 URL 让它返回？

我怎样才能使用 api 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:18:32.717

**更新**：我们已经向 SDK 推送了更新，以使桌面客户端身份验证变得非常容易。查看博客文章：[http ://blog.appharbor.com/2012/06/21/oauth-for-net-desktop-applications](http://blog.appharbor.com/2012/06/21/oauth-for-net-desktop-applications)

AppHarbor 尚不支持从非 Web 应用程序获取令牌的[规范。](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-4.1.3)

AppHarbor CLI 有一个用于检索令牌的 Web 服务，您可以自己建立。您可以在[此处](https://github.com/appharbor/appharbor-cli/blob/master/src/AppHarbor/Commands/LoginUserCommand.cs)查看实现。不要使用此 Web 服务获取令牌，您应该使用正确的客户端 ID 拥有自己的服务。

我们正在考虑为非 Web 应用程序实施正确的流程。

# sql - 将 GROUP BY 用于非唯一性警告列

> ID：11136063
> 
> 赞同：0
> 
> 时间：2012-06-21T10:19:13.493
> 
> 标签：sql, group-by, aggregate-functions, having-clause

我有一个查询（实际上是一个视图），通常应该定义一个从`key`to的唯一映射`value2`。

```
select key, value1, value2
from tbl -- joins are left out here
where (1=1) -- left out here
order by key
; 
```

通常结果是这样的

```
key       value1  value2
--------------------------
Harry     fish    blue
Sally     dog     green
Willy     dog     red 
```

所以我可以唯一地映射`key`到`value2`。

但是当它发生时，底层数据可能有一天会包含垃圾：

```
key       value1  value2
--------------------------
Harry     fish    blue
Harry     fish    black     -- <<< breaks uniqueness
Sally     dog     green
Willy     dog     red 
```

我想添加`HAVING`和/或`GROUP BY`表达式来轻松识别非唯一行。因为在这种情况下我必须做一些事情，`value2`所以我必须以某种方式聚合它——我的想法是`max`。

因此，一个示例结果将是

```
key       value1  value2   count_value2
----------------------------------------
Harry     fish    blue     2
Sally     dog     green    1
Willy     dog     red      1 
```

但和往常一样，我完全被`GROUP BY`它的配偶弄糊涂了。我在哪里呢？聚集的地点和地点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:23:10.320

像这样的东西？

```
select 
  key, 
  min(value1) as "a value1", 
  min(value2) as "a value2", 
  max(value2) as "another value2", 
  count(distinct value2) "number of value2"
FROM tbl
group by key
having count(distinct value2) > 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:23:39.817

更接近解决方案：

```
select tbl.*,count(distinct value2) over (partition by key) from tbl 
```

或与一组

```
select key,count(distinct value2) from tbl group by key having count(distinct value2)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:50:33.460

**请试试这个，让我知道这就是你要找的**

```
select C.key,C.value1,C.value2,A.count_value2 from
(select key,value1,COUNT(*) count_value2
from tbl
group by key,value1)A
join
(select B.key,B.value1,B.value2 from
(select *,ROW_NUMBER() over(partition by T.key,T.value1 order by T.key )  rn 
from tbl T 
group by T.key,T.value1,T.value2)B
where B.rn=1)C
on C.key=A.key
and C.value1=A.value1 
```

# joomla - 在 joomla 文章中添加左右栏

> ID：11136066
> 
> 赞同：0
> 
> 时间：2012-06-21T10:19:16.827
> 
> 标签：joomla

我对joomla不是很熟悉，我添加了新文章，但是左右位置（左右栏）没有出现在两侧，请问如何添加它们？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:32:26.330

如果您转到模块管理器，然后选择要显示的模块，确保它们在所有页面上都已启用。尽管您必须使用文章管理器创建 html 页面，但我不会。Joomla 并不是真正为此而构建的。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:06:21.467

如果我没有错，那么我认为您想在文章页面中添加两列。

在您的文章编辑器中有一个最简单的功能，单击该`html`按钮会显示一个新窗口，您可以在其中设置您的 html。对于左右两侧，只需创建一个 html 页面并将正文内容粘贴到您的 joomla 编辑器中，如果您想添加一些样式，则在您的文章中定义 id 或类，或者您可以设置内联 css..

希望对你有帮助..

# mingw - MingW 和 MStask

> ID：11136073
> 
> 赞同：2
> 
> 时间：2012-06-21T10:19:40.877
> 
> 标签：mingw, scheduled-tasks

我正在尝试使用 mstask，这是来自使用 MingW 的应用程序的 Windows 任务调度程序。

但是，如果我只包含 windows mstask.h，我会遇到编译器冲突，并重新定义位。

有没有人这样做过？有没有进入 Windows 任务计划程序的 MingW 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:08:39.457

MinGW-w64 似乎有标题。看看[这里](http://tdm-gcc.tdragon.net/download)的 tdm64-gcc 编译器套件。不错的安装程序，当前版本，适用于我在 Windows 7 64 上生成 32 位和 64 位二进制文​​件。

您可能需要链接一些 MinGW-w64 的库，例如 ole32。这个链接器命令对我有用：

```
g++ "-LC:\\progs\\MinGW64\\x86_64-w64-mingw32\\lib" -static -o TaskScheduler.exe "src\\TaskScheduler.o" -lole32 
```

# postgresql - 在 ScalaQuery O/R 框架中映射自定义类型

> ID：11136078
> 
> 赞同：2
> 
> 时间：2012-06-21T10:19:49.057
> 
> 标签：postgresql, scala, orm, scalaquery

在[比较 ScalaQuery 和 Squeryl](https://github.com/szeiger/scala-query/wiki/ScalaQuery-vs-Squeryl)时，Stefan Zeiger（ScalaQuery 的作者）在第三个要点中说：

> ScalaQuery 支持一组基本的 JDBC 类型，并且可以使用 DBMS 或特定于应用程序的类型进行扩展。

但是，我一直无法找到如何实际执行此操作的示例或解释。我正在尝试为 Postgres 数据库编写 ScalaQuery 模式，其中一些列是我在 Postgres 中创建的自定义枚举类型。

例如，我有一个名为 的枚举类型`gender`，具有可能的值`male`和`female`. 这不是 Java 枚举，以整数形式保存到数据库中。相反，它是在 DBMS 中定义的自定义 Postgres 类型。Postgres 以特殊的 4 字节数据结构而不是原语存储那些。

如何将 Postgres 类型的列合并`gender`到 ScalaQuery 模式中？

（如果您认为不同的强类型 O/R 方法更适合该任务，我也将不胜感激。我已经看过 Squeryl，并且不相信它可以处理自定义类型，除非它们作为原语保留在数据库管理系统。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T12:21:11.647

```
import org.scalaquery.ql.{MappedTypeMapper => Mapper}

object TypeMapper {

  type Stamp = java.sql.Timestamp

  val joda2Stamp = 
    Mapper.base[JodaTime, Stamp](
      dt => new Stamp(dt.getMillis), 
      ts => new JodaTime(ts.getTime) )
} 
```

然后，例如，在您的 DAO（或您运行查询的任何地方）中，使用它：

```
import TypeMapper._
implicit val j2Stamp = joda2Stamp // type conversion automatically 
```

您需要尝试为 Enums 和 PostGres 的枚举存储类型实现相同的目标。我倾向于不打扰，更喜欢使用 Java Enums 并将其存储为原始类型。

例如：

```
public enum CardType implements ILabel {
  V("Visa"),
  M("MasterCard"),
  D("Discover"),
  A("American Express");

  private CardType(String label) { this.label = label; }
  public String getLabel() { return this.label; }
  final String label;

  public static List<String> asList() {
    return EnumHelper.asList(CardType.class);
  }

  public static Map<String,String> asMap() {
    return EnumHelper.asMap(CardType.class);
  }
} 
```

然后在 DB a la 中存储为 char(1) `Orders.insert(cardType = cardType.toString)`，或者您可以创建一个类型映射器 Enum-String 转换并在插入时省略 enum.toString ...

# iphone - 谷歌地图和 Siri 实施

> ID：11136083
> 
> 赞同：0
> 
> 时间：2012-06-21T10:20:06.997
> 
> 标签：iphone, ipad, maps, siri

只是想知道，我们可以将谷歌地图和 Siri 集成在一起。例如：

> 我问 Siri，“显示最近的星巴克”，Siri 会打开地图应用程序或谷歌地图，并在地图上显示最近的星巴克。

或者

> 我问 Siri，“显示所有 Apple Store 商店”。Siri 将打开地图并在地图上显示 Apple Store 的所有位置。

这是可行的吗？

除了文章之外，我还没有找到任何好的教程和文档来研究更多关于 Siri 实现的信息。没有可用的技术文档/API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:19:51.007

现在不直接支持这一点，无需编写 Siri 可以连接的第三方网站。根据以下链接文档，来自 Apple 的网站，iOS 6 上的 Siri 将至少在有限的部分支持此功能：

[http://www.apple.com/ios/ios6/siri/](http://www.apple.com/ios/ios6/siri/)

> **眼睛免费**
> 
> Apple 正在与汽车制造商合作，将 Siri 集成到特定的语音控制系统中。通过方向盘上的语音命令按钮，您可以向 Siri 提问，而无需将视线从道路上移开。为了进一步减少干扰，您的 iOS 设备的屏幕不会亮起。借助 Eyes Free 功能，让 Siri 呼叫他人、选择和播放音乐、收听和撰写短信、使用地图和获取路线、阅读通知、查找日历信息、添加提醒等等。这只是 Siri 帮助您完成工作的另一种方式，即使您在驾驶时也是如此。

这让我相信他们也会在 iOS 6 生命周期期间（可能在 iOS 6.1 之前或在该版本中）向普通 API 消费者公开 API（因为如果它存在，就会有人将其找出来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:22:11.693

不幸的是，Apple 尚未向开发人员开放 Siri 的 API，这使得这项任务变得不可能。但是，Apple 可能很快就会开放它。如果您只是想将其用于个人用途，请查看 SiriProxy ( [https://github.com/plamoni/SiriProxy](https://github.com/plamoni/SiriProxy) )。SiriProxy 让你完全按照你的要求去做；但是，要让它工作，你必须在你的 wifi 网络上，所以它不能在你的一个应用程序中。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:46:54.807

目前无法通过 Apple 使用的任何类型的 API。但是，您可以使用一些第三方 API，例如：[https://www.ispeech.org/developers/iphone](https://www.ispeech.org/developers/iphone)您必须使用它，然后将返回的数据传递给 Google Maps API。

尽管这种方法不像使用 Siri 那样直观，因为目前还不可能，但这是您目前最好的选择。

# iphone - 使用多线程捕获 UIView 的图像

> ID：11136085
> 
> 赞同：0
> 
> 时间：2012-06-21T10:20:15.030
> 
> 标签：iphone, multithreading, ios5, uiview, grand-central-dispatch

我正在使用 Grand Central Dispatch 对任务进行排队以将 a 捕获`UIView`为图像。除了在队列上运行的图像捕获需要很长时间之外，一切都很好。

有什么办法可以加快速度或提高我的技术。这是捕获和缩放图像的代码，然后将其设置为 a`UIImageView`的图像以进行显示。

```
(void)captureScrollViewImageForLayoverView
{
    // capture big map image
    CGSize size = mainView.bounds.size;
    UIGraphicsBeginImageContext(size);
    [[mainView layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // scale map
    size = myLocationOverlay.bounds.size;
    UIGraphicsBeginImageContext(size);
    [newImage drawInRect:CGRectMake(0,0,size.width,size.height)];
    UIImage *scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    myLocationOverlay.imageMap.image = scaledImage;
} 
```

这是排队任务的代码。

```
...
mapImageDrawQueue = dispatch_queue_create("mapImage.drawQueue", NULL);

(void)captureScrollViewImageForLayoverViewWrapper {
    // multithreaded approach to draw map
    dispatch_async(mapImageDrawQueue, ^{ [self captureScrollViewImageForLayoverView]; });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:46:05.780

我曾经在我的应用程序中的队列中加载图像，并遇到您提到的相同问题。我查看了官方编程指南，记得它告诉它不能保证队列在你调用后立即运行。所以我使用 NSThread 完成了这项工作，并且运行良好：

```
NSThread* myThread = [[NSThread alloc] initWithTarget:self
                                        selector:@selector(captureScrollViewImageForLayoverView)
                                        object:nil];
[myThread start]; 
```

请记住将这些行添加到函数 captureScrollViewImageForLayoverView 中：

在顶部：`NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];` 在末尾：`[pool release];`

查看此文档以了解更多信息 -[线程编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/CreatingThreads/CreatingThreads.html) 希望它有所帮助。

# java - java中是否有任何方法与c++中的Streamreader()做同样的事情？

> ID：11136089
> 
> 赞同：0
> 
> 时间：2012-06-21T10:20:18.023
> 
> 标签：java, visual-c++

`Streamreader()`java中是否有与VC++中相同的方法？另外，有什么方法可以实现VC++ 中`seek()`实现的功能？`seekorigin()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:28:03.857

有关搜索功能，请查看[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:25:23.043

也许 BufferedReader 是你想要的。

如果您想要随机搜索访问，我只会使用字符串而不是流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:38:34.177

对于 StreamReader，下面是[这里](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx)提到的示例，翻译为 java：

```
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;

public class Test {

    public static void main(String[] args) throws IOException {
        BufferedReader input = null;
        try {
            input = new BufferedReader(new InputStreamReader(
                    new FileInputStream("TestFile.txt")));
            String line = null;
            while ((line = input.readLine()) != null) {
                System.out.println(line);
            }
        }
        finally {
            if (input != null) { input.close(); };
        }
    }
} 
```

至于 seek 和 seekorigin，看看[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)看看它是否做你想要的。

# c# - NSERVICEBUS - 类型未在序列化程序中注册

> ID：11136094
> 
> 赞同：0
> 
> 时间：2012-06-21T10:20:44.297
> 
> 标签：c#, nservicebus

我已经按照这封信的 NServiceBus 入门指南进行了操作，唯一的更改是将属性添加到我的消息类中。

当我尝试运行它时，我得到：

```
Type [my type] was not registered in the serializer. 
Check that it appears in the list of configured assemblies/types to scan. 
```

我遵循了[http://docs.particular.net/nservicebus/serialization/type-was-not-registered](http://docs.particular.net/nservicebus/serialization/type-was-not-registered)上的指导，但这根本没有帮助。清除文件夹后，进行清理和重建后，我仍然遇到同样的问题，当生成的 INServiceBusComponent 类调用 Bus.Send 时会触发异常。

有人对我可以在这里尝试的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:01:51.723

dtryon 提供的答案 - 添加 IMessage 解决了这个问题。

```
[Serializable]
public class MyMessage : IMessage
{
} 
```

# javascript - 使用循环和输入文本框创建对象属性名称

> ID：11136095
> 
> 赞同：0
> 
> 时间：2012-06-21T10:20:45.670
> 
> 标签：javascript, jquery

我正在重构一些代码，在其中获取输入到文本框中的值并使用所述值进行计算。问题不是多次使用 document.getElementByID，而是我想遍历页面上的每个文本框并将每个值分配给这个对象，我将传递给我的计算函数。我还想通过查看输入文本框 ID 并使用对象属性名称的 ID 字符串来设置此对象的属性名称。

请参见下面的代码：

```
$(document).ready(function() {

    var calcObj = new Object();
    $("input[id^='txt']").each(function(i, val) {
        calcObj[i] = this.value;
    });

    $.each(calcObj, function(i, val) {
        //        alert(val);
    });

}); 
```

如您所见，当文档准备好时，对象已创建。有一个 jquery .each 循环来遍历每个 id 包含 txt 的输入。我将 this.value 分配给索引为 i 的对象。

所以我想知道如何命名这个对象的属性并赋值，这样我就可以在代码中的其他地方引用对象属性名称，我将这个对象传递给另一个函数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:23:58.540

据我了解，您想要：

```
calcObj[this.id] = this.value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:24:30.580

我不完全明白你的要求，因为看起来你已经在做我认为你要求的事情。

现在，你正在做：

```
calcObj[i] = this.value; 
```

这与分配它没有什么不同：

```
calcObj['foo'] = this.value;

// and later we can access that via
alert( calcObj.foo );  // or calcObj['foo'] 
```

您也可以对此进行动态处理，例如：

```
calcObj[this.id] = this.value; 
```

# android - C2DM 注册流程

> ID：11136096
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:20:45.833
> 
> 标签：android, android-c2dm

我有一个疑问，当我们尝试注册 C2DM 时，注册是在后台线程还是在普通线程中进行的。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:21:23.277

它是通过 Intent 完成的，但是当 google 更改您的注册 id 时，您需要有一个广播接收器来处理新的注册 id。当您获得新的时，您需要将其发送到您的第 3 方服务器，以使其能够向手机发送消息。正如@Jay Thakkar 所说，[Vogella 的文章](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html)是了解 c2dm 的非常好的教程。

# java - 使用声明式服务的 OSGi+Pax-Web 中的 GWT 问题

> ID：11136105
> 
> 赞同：3
> 
> 时间：2012-06-21T10:21:40.053
> 
> 标签：java, gwt, osgi, declarative-services, pax-web

我正在迁移在 OSGi (Equinox) 和 Pax-web 上运行的现有 GWT 应用程序，以使用声明式服务而不是程序化服务跟踪器。

我在 Equinox 中使用 Pax-Web。PAX-WEB War 扩展器可以毫无问题地加载基于 WAR 的 GWT 应用程序，但在这种操作方式中您不能拥有声明式服务。

我成功地从战争中重构了所有 servlet，并将它们转换为声明性 OSGi 服务 ( `<provide interface="javax.servlet.Servlet"/>`)。这样我就摆脱了 servlet 中所有凌乱的 ServiceTracker 代码和特定的 OSGi 依赖项。我进一步复制了所有其他 web.xml 功能，以使用[[1]上的信息注册过滤器、提供静态内容和欢迎页面](https://github.com/ops4j/org.ops4j.pax.web/blob/master/samples/whiteboard/src/main/java/org/ops4j/pax/web/extender/samples/whiteboard/internal/Activator.java)

此时，它通常应该可以工作，但我遇到了 PAX-WEB 和 GWT 尝试加载其资源的方式的问题：

在加载序列化描述符时，GWT 从本地上下文加载序列化策略文件。在我的例子中，它尝试解析这样的资源：/ctx/ctx/62394587E47773FB1594FF.gwt.rpc 此资源由 GWT 编译器创建并放置在：/war/ctx/ctx/resource...

以前，使用标准 wab 映射 ( `Webapp-Context: /ctx, Webapp-Root: /war`) gwt 会正确找到它的资源。现在我正在使用程序化资源映射：

```
DefaultResourceMapping resourceMapping = new DefaultResourceMapping();
resourceMapping.setAlias( "/ctx" );
resourceMapping.setPath( "/war" ); 
```

GWT 无法加载资源并产生以下错误：

```
2012-06-20 12:46:36.283:INFO:/:AbcProxy: ERROR: The serialization policy file '/ctx/ctx/600000000000000773FB1594FF.gwt.rpc' was not found; did you forget to include it in this deployment?
2012-06-20 12:46:36.283:INFO:/:AbcProxy: WARNING: Failed to get the SerializationPolicy '600000000000000773FB1594FF' for module 'https://localhost:8443/ctx/ctx/'; a legacy, 1.3.3 compatible, serialization policy will be used.  You may experience SerializationExceptions as a result. 
```

[注意最后一句应该是“你会因此而遇到大量的序列化问题”]

我已经跟踪到 HttpServiceContext 加载资源并将路径解释为文件而不是相对于编程 Web 上下文的 url 的问题：

```
getting resource: [/mx/mx/6ECAD5B3A6F908CE17E47773FB1594FF.gwt.rpc]
HttpServiceContext | not a URL or invalid URL: [/ctx/ctx/600000000000000773FB1594FF.gwt.rpc], treating as a file path
DefaultHttpContext | Searching bundle [bundle] for resource [/ctx/ctx/600000000000000773FB1594FF.gwt.rpc] 
```

这显然失败了，因为此资源位于捆绑文件系统中的 /war/ctx/ctx/ 下。这似乎与错误 PAXWEB-314 [2] 有关，其实现是将相对路径转换为文件路径：

```
// IMPROVEMENT start PAXWEB-314
257              try {
258                  resource = new URL(path);
 259                  LOG.debug( "resource: [" + path + "] is already a URL, returning" );
 260                  return resource;
261              }
262                  catch (MalformedURLException e) {
 263                        // do nothing, simply log
264                      LOG.debug( "not a URL or invalid URL: [" + path + "], treating as a file path" );
 265              }
266              // IMPROVEMENT end PAXWEB-314 
```

有没有办法解决这个问题？有人使用 GWT 和 PAX-WEB 使用 OSGi DS 而不是 WAB？一种可能的方法是将 GWT 编译器生成的 /war/ctx 复制回 /ctx，但我想在进入 hack 方向之前找到一个不错的解决方案。

有任何想法吗？

[1](https://github.com/ops4j/org.ops4j.pax.web/blob/master/samples/whiteboard/src/main/java/org/ops4j/pax/web/extender/samples/whiteboard/internal/Activator.java) - [https://github.com/ops4j/org.ops4j.pax.web/blob/master/samples/whiteboard/src/main/java/org/ops4j/pax/web/extender/samples/whiteboard/internal/ Activator.java](https://github.com/ops4j/org.ops4j.pax.web/blob/master/samples/whiteboard/src/main/java/org/ops4j/pax/web/extender/samples/whiteboard/internal/Activator.java) [2] - [http://team.ops4j.org/browse/PAXWEB-314](http://team.ops4j.org/browse/PAXWEB-314)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:23:42.897

我做了一些进一步的挖掘。

在 GWT 上，这是负责加载这些策略文件的相关代码：[1]

```
protected SerializationPolicy doGetSerializationPolicy(
      HttpServletRequest request, String moduleBaseURL, String strongName) {
    // The request can tell you the path of the web app relative to the
    // container root.
    String contextPath = request.getContextPath();
    String modulePath = null;
    if (moduleBaseURL != null) {
      try {
        modulePath = new URL(moduleBaseURL).getPath();
      } catch (MalformedURLException ex) {
        // log the information, we will default
        log("Malformed moduleBaseURL: " + moduleBaseURL, ex);
      }
    }
... 
```

在这种情况下，我怀疑 contextPath 是潜在的候选嫌疑人。为了测试这个理论，我部署了一个简单的 servlet 来转储它的上下文。我使用 WAB（清单：Webapp-Context + web.xml）部署它。在此部署中，servlet 报告：[getContextPath]->[/ctx]

然后，使用包含资源映射的编程激活器将部署更改为 OSGi-ds。DefaultResourceMapping resourceMapping = new DefaultResourceMapping(); resourceMapping.setAlias("/ctx"); resourceMapping.setPath("/war");

在这种情况下，servlet 报告：[getContextPath]->[]

转换为 gwt 问题 --> 当 gwt 与 WAB 一起部署时，它在 /ctx/app 中找到它的配置，当我使用编程资源映射时，它正在查看 /app，因此找不到它的资源。

底线：在 PAX-WEB 中，Webapp-Context 不等同于别名。别名不会像 Webapp-Context 那样填充 ContextPath。

针对这种情况，当前唯一的解决方法是让构建将 GWT 生成的文件向下复制一层（消除应用程序上下文路径）

PS: Following Achim Nierbeck from Pax-web, the OSGi spec is evolving to manage the app-ctx issue: [http://wiki.osgi.org/wiki/WebExperience](http://wiki.osgi.org/wiki/WebExperience)

[1] [http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/server/rpc/RemoteServiceServlet.java?spec=svn5045&r=5045](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/server/rpc/RemoteServiceServlet.java?spec=svn5045&r=5045)

# opencv - 访问 C 中索引图像的调色板

> ID：11136106
> 
> 赞同：3
> 
> 时间：2012-06-21T10:21:47.903
> 
> 标签：opencv, gif, bmp, color-palette, indexed-image

假设我想按原样读取索引图像（不是 3 通道 24 位图像）我希望读取和修改索引图像的调色板。在opencv中，我没有遇到任何提取图像调色板的函数！我也想知道调色板的数据类型。我正在使用opencv在c中编码任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:01:49.470

好吧，我不认为 OpenCV 有任何功能可以做到这一点。cvLoadImage() 或 imread() 函数使用 libpng 编解码器直接读取图像。

查看文档以获取更多信息

[http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#imread](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imread#imread)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:33:47.050

感谢您提供图片链接。首先，OpenCV 不支持 GIF（如 Ameya005 链接）。但是，还有其他索引调色板图像格式。它无法在 OpenCV 中获得索引调色板图像，因此除非我错过了什么，否则我认为您将无法直接在 OpenCV 中使用索引调色板。听起来您需要替代解决方案。为什么需要直接使用索引调色板？

如果这就是您所需要的，下面的第二个选项可能会让您在 OpenCV 中拥有索引（调色板会丢失）。

这是我尝试过的：

**加载调色板 PNG（转换为 3 通道颜色）**

```
import cv2

im = cv2.imread("mandril_color.png")
im.shape # returns (512, 512, 3) so it's been converted to 3-channel color 
```

**加载调色板 GIF（转换为灰度）**

我想这正在转换为灰度，索引用作强度，但我还没有验证它。

```
import cv2
import Image
import numpy as np

im_pil = Image.open("mandril_color.gif")
im_cv = np.asarray(im_pil)
im_cv.shape # returns (512, 512) so it's become grayscale 
```

**在 OpenCV 中从头开始创建调色板图像**

我还没有找到任何方法来做到这一点。

# google-nativeclient - NaCl 上的 C++ 代码

> ID：11136107
> 
> 赞同：1
> 
> 时间：2012-06-21T10:21:48.967
> 
> 标签：google-nativeclient

我只有一个简单的问题要问：

是否可以使用 NaCl 调用本地 dll？

如果答案是肯定的，任何人都可以告诉我一个示例方法来做到这一点。

我试过 loadlibrary 但编译拒绝包含 windows.h

非常感谢

尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:27:49.477

答案是不。

Google Native Client 应用程序旨在在类似沙盒环境的虚拟机中工作，并且不允许任何外部资源访问。这是设计使然，我认为将来不会允许访问 DLL。这可能会破坏使其独立于平台的承诺。

# sql-server - SQL Server 2012 中的行级安全性

> ID：11136109
> 
> 赞同：10
> 
> 时间：2012-06-21T10:21:52.030
> 
> 标签：sql-server, sql-server-2012, row-level-security

SQL Server 2012 中的行级安全性有什么新东西吗？

在 2008 年及以下，唯一的方法是使用 Views，在 2012 年他们宣布了类似的[东西](http://msdn.microsoft.com/en-us/library/bb522628.aspx)`Row Level Security in Tabular Models`，这与表格上的 RLS 有什么关系吗？

2012年RLS有什么消息吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-21T10:55:18.130

仍然没有开箱即用的支持。有一份白皮书《[在分类数据库中实现行级和单元级安全性》](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/mission-critical-operations/security-and-compliance.aspx)以及一个随附的[工具包](http://sqlserverlst.codeplex.com/)，可用于实现 RLS、基于标签的 CLS，它们已更新以涵盖 SQL Server 2012。

# java - 远程访问大型机的 Java API

> ID：11136112
> 
> 赞同：1
> 
> 时间：2012-06-21T10:21:59.223
> 
> 标签：java, api, interface, remote-access, mainframe

我正在寻找一个 java API 来远程访问大型机。我正在寻找类似于 JTOpen 或 IBM Toolbox for iseries 系统的东西。通过这个 API，我应该能够连接到大型机并从大型机获取信息，就像这样 -

```
public static void main(String[] args){
    Mainframe myMainframe = new Mainframe(ipAddress, userName, password);
    myMainframe.connect();
    System.out.println(myMainframe.getSystemName);
    myMainframe.disconnect();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:27:30.913

看看[JMX](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)。它提供了用于构建分布式系统的 API。我相信它可以在您的大型机环境中使用。它是服务器-客户端模型。您可以编写如下界面：

```
public interface MainframeMXBean {
    public String getName();
} 
```

并在您的大型机类中实现它，然后为本地使用创建代理：

```
MainframeMXBean remoteMF = JMX.newMXBeanProxy(connection, jmxName, MainFrameMXBean.class);
System.out.println(remoteMF.getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:28:33.110

Java 管理扩展 (JMX) 应该足够广泛和通用以满足您的需要。

[这](http://docs.oracle.com/javase/1.5.0/docs/guide/jmx/examples.html)是一个官方的在线示例集。此外，您还可以找到一本关于它的 O'Reilly[书籍。](https://rads.stackoverflow.com/amzn/click/com/0596002459)

# jquery - XMLHttpRequest 异常 101：同步请求中出现网络错误

> ID：11136115
> 
> 赞同：0
> 
> 时间：2012-06-21T10:22:18.133
> 
> 标签：jquery, ajax, apache, file-exists

因此，我正在构建一个 jQuery 插件，以便在用户使用高像素密度设备时将普通图形替换为视网膜图形。该交换的一部分需要检查文件的视网膜版本是否存在于网络上的某个 url。以下是它的检查方式：

```
function urlExists(url) {
    var http = new XMLHttpRequest();
    http.open('HEAD', url, false);
    http.send();
    return http.status!=404;
}; 
```

但是，当它尝试检查与当前服务器不同的服务器上的文件时，它会在控制台中出现以下错误：

`XMLHttpRequest Exception 101: A network error occurred in synchronous requests.`

如何允许跨域 XML https 请求，以便在加载插件的任何站点上都可以使用？

另外，我想最终将其转换为 JS，因此不使用 jQuery 将是最佳选择。

这是一个 JSFiddle： http: [//jsfiddle.net/JacksonGariety/7YYgP/1/](http://jsfiddle.net/JacksonGariety/7YYgP/1/) （注意：我已经注释掉了检查视网膜设备部分，所以你可以测试东西）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:31:19.890

允许跨域 AJAX 请求取决于*服务器*配置，而不是*客户端*（据我所知）。这意味着仅通过单独加载 jQuery / JS 插件无法确保成功/允许的跨域 AJAX 请求。

不过，如果有的话，天哪，我很想知道。

# mysql - 如何修复 Drupal Commons 架构错误？

> ID：11136118
> 
> 赞同：0
> 
> 时间：2012-06-21T10:22:22.550
> 
> 标签：mysql, drupal

这里有两个问题，第二个比第一个复杂一点。

1 - 我的 Drupal Commons 安装中有 18 个“额外”表。从数据库中删除这些表是否安全？（如果有帮助，我可以提供此列表）

2 - 我在同一个站点上有 3 个“不匹配表”错误。只更新这些表是否安全？

不匹配的具体表是：

*   搜索数据集
*   搜索索引
*   搜索节点链接

具体来说，varchar 的大小与应有的不同。我可以更新 SQL 来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T18:11:30.293

这里给出的建议是“什么都不做” [http://drupal.org/node/263582](http://drupal.org/node/263582)

# ruby-on-rails - 在 Rails 3.2.0 上执行了验证，但字段没有被 field_with_errors div 包围，仅在生产中

> ID：11136120
> 
> 赞同：2
> 
> 时间：2012-06-21T10:22:29.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, production-environment

我有一个发布模型，对某些字段进行验证，例如标题。

我删除了我觉得烦人的错误消息，并为当输入被包围在 field_with_error div 中时设置了一个不错的 CSS，以便用户知道哪个字段没有验证。

问题是当我部署到生产环境时，仍然会执行验证（即用户被发送回表单），但输入没有被错误 div 包围。

我尝试在生产模式下在本地运行该应用程序，我所知道的是，当我在 config/environments/production.rb 文件中将 config.cache_classes 设置为 true 时，它​​开始发生。

此外，当我在控制器中记录 @publication.errors 时，也会出现错误。

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T20:27:59.397

在 rails 4.0.1 项目中，我添加了一个初始化程序：

```
config/initializers/field_with_errors.rb 
```

用这些线

```
ActionView::Base.class_eval do
  @@field_error_proc = Proc.new{ |html_tag, instance| "<div class=\"field_with_errors\">#{html_tag}</div>".html_safe }
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:05:38.567

在深入研究 Rails 本身后，我发现在 actionpack/lib/action_view/helpers/active_model_helper.rb

```
Base.field_error_proc.call(html_tag, self) 
```

返回 html_tag 而不将其包装在错误 div 中。

进一步表明，在 actionpack/lib/action_view/base.rb 中，

```
@@field_error_proc = Proc.new{ |html_tag, instance| "<div class=\"field_with_errors\">#{html_tag}</div>".html_safe } 
```

已重置或从未设置。

所以作为一种解决方法，我发现把

```
ActionView::Base.field_error_proc = Proc.new{ |html_tag, instance| "<div class=\"field_with_errors\">#{html_tag}</div>".html_safe } 
```

在任何控制器的顶部都解决了这个问题，我想是因为它是在 rails 加载后解释的。

现在的问题是，它怎么可能第一次没有加载，而应用程序中的其他所有内容都运行良好？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-27T19:45:33.243

就我而言，这是因为宝石“酪蛋白”而发生的。没有这颗宝石，它工作正常。同样在开发中它正在工作，但不是在生产中。

它忽略了我为 field_error_proc 设置的初始化程序。这是因为它被我猜的宝石覆盖了..

例如参见：[https ://github.com/russellquinn/casein/blob/master/app/controllers/casein/casein_controller.rb](https://github.com/russellquinn/casein/blob/master/app/controllers/casein/casein_controller.rb)

最后，我将控制器复制到我的项目中并删除了这一行：

```
ActionView::Base.field_error_proc = proc { |input, instance| "#{input}".html_safe } 
```

然后初始化程序在生产中也可以正常工作。

# c - 为什么这个反向字符串函数会出现段错误？

> ID：11136128
> 
> 赞同：3
> 
> 时间：2012-06-21T10:22:52.173
> 
> 标签：c, string, segmentation-fault, reverse

我想做一个反向字符串函数，我已经这样做了：

```
void reverse_str(char s[])  {
    int i, j;
    char ch;
    for(i = 0, j = strlen(s) - 1; i < j; i++, j--)  {
        ch = s[i];
        s[i] = s[j];
        s[j] = ch;
    }
    return ;
} 
```

但是由于某种原因，当我更改为时`i < j`，`i != j`我遇到了分段错误。当`i`和`j`是指针时也会发生这种情况。为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:25:57.010

几乎可以肯定是因为`i`和`j`相互传递（无论它们是索引还是指针在这里都无关紧要）。例如，任何偶数个字符的字符串都会出现这个问题。

考虑以下字符串序列`drum`：

```
 0123 <- indexes
     ----
s = "drum", i = 0, j =  3, swap d and m.
s = "mrud", i = 1, j =  2, swap r and u.
s = "murd", i = 2, j =  1, swap u and r, oops, we've passed each other.
s = "mrud", i = 3, j =  0, swap m and d.
s = "drum", i = 4, j = -1, swap who knows what, undefined behaviour. 
```

请注意，对于奇数长度的字符串，您不会遇到此问题，因为`i`最终等于`j`（在中间字符处）。

该`i < j`检查还解决了这个问题，因为它检测到指针的相等性*和*相互传递的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:25:29.710

如果 j 以奇数开始（当`s`字符数为偶数时），则 i 和 j 永远不会相等 - 因此循环将在数组边界之外继续`s`。

例如，如果`i = 0`and`j = 1`在第一次评估时，那么下一个循环将有`i = 1`and `j = 0`（注意仍然不等于）并且第三个循环将有`i = 2`and `j = -1`，因此错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:26:10.020

你是如何调用函数的？换句话说，你确定你传入的字符数组是可写的吗？

如果内存没问题，它可能会在您使用时崩溃，`!=`因为无法保证在您期望的时候会发生这种情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T10:26:56.670

如果`strlen(s) - 1`是奇数，那么您的条件`i!=j`将始终为真。

# c# - 尝试获取数据库类型的实例时发生激活错误，键“DatabaseConnection”？

> ID：11136129
> 
> 赞同：1
> 
> 时间：2012-06-21T10:22:54.030
> 
> 标签：c#, asp.net, web-config, database-connection, enterprise-library-5

我正在使用一个带有 app.config 的类库，并在我的 Web 项目中使用该库的 dll 引用，我得到了标题中显示的错误。这是我的类库和 app.config 中的代码

```
public List<EppActualsBEO> GetEppActualsList(String requestId)
{
List<EppActualsBEO> listitem = new List<EppActualsBEO>();
try
{
Database database = EnterpriseLibraryContainer.Current.GetInstance<Database>("DatabaseConnection");
command = database.GetSqlStringCommand(query.GetEPPredictionActualsQuery(requestId));
dr = database.ExecuteReader(command);
}
catch (Exception err)
{
throw err;
}
finally
{
dr.Close();
}
return listitem;
} 
```

和

```
<configuration>
    <configSections>
        <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral"/>
    </configSections>
    <dataConfiguration defaultDatabase="DatabaseConnection"/>
    <connectionStrings>
        <add name="DatabaseConnection"
              connectionString="Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=****)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME= ****)));User Id= ****;Password= ****;Persist Security Info=True;"
              providerName="System.Data.OracleClient" />
    </connectionStrings>
</configuration> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T02:00:21.890

我遇到了同样的问题，并且与我的 App.Config 配置文件有关。我使用企业库配置工具，然后在企业库配置工具中打开我项目的App.Config，实现默认设置并保存文件，运行正常。

# android - 如何使用不同大小写的包名称将 Android 应用更新部署到 Market

> ID：11136130
> 
> 赞同：2
> 
> 时间：2012-06-21T10:23:05.277
> 
> 标签：android, push-notification, xamarin.android, android-c2dm

**简短的问题**

在 Mono for Android (MonoDroid) - 或一般的 Android 应用程序中 - 是相同的包名称，只有大小写变化被认为是相等的？例如'Application.Application' = 'Application.Application'。该问题专门针对 Android 市场应用程序更新机制所考虑的平等性。不是一般的平等。

如果不是，那么是否有另一种方法可以更改包名称但仍然让 Android Market 将应用程序视为同一个应用程序？我们希望确保最终用户无需安装全新的应用程序，而是可以使用标准的市场更新机制。

**更详细的问题描述**

我们的应用程序使用包含大写符号的包名称放入 Android 市场，例如“Application.Application”。所以 - 事后看来 - 我们没有遵循建议的 Java 包命名约定。然而，原来的应用程序运行没有任何进一步的问题。

我们现在已经通过推送通知扩展了我们的 Android 应用程序。在测试期间，一个问题浮出水面，即通过 Google C2DM 服务发送推送通知无法使用大写包名称。只有在将包名称更改为在点 (.) 之前不包含大写符号之后，推送通知才会在我们的测试环境中通过。例如'application.Application'。为了实现这一点，我们更改了 manifest.xml 文件中的包名称，并通过 C2DM 注册表单提交了一个新的请求以获取不同大小写的包名称。

我们没有预见到这个问题。但是我们现在仍然希望通过 Market 部署我们的应用程序的新版本，但担心能够使用传统的更新机制。我们不想将应用程序作为一个全新的应用程序分发。

我们能意识到这一点吗？如果是这样，那怎么办？1\. 我们可以只使用“application.Application”包名吗？2\. 或者是否有某种机制允许更改包名？然后我们可能会进一步更改我们的包名称，使其符合标准，例如“ext.domain.application”

*   请注意，我们还没有部署我们的新应用程序。我们希望在将服务器端更改部署到生产环境之前解决这个包名称问题（例如推送通知“提供者”），因为服务器端代码还包含用于发送消息的包名称。
*   进一步注意，该应用程序是使用 MonoDroid 构建的，并使用 C2dm-Sharp 库来发送和接收推送通知。也许问题源于那里，尽管它似乎是一个普遍的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:02:44.140

我做了一些研究，在 Google Play 上发现了两个不同的应用程序，两个包名称只是以防万一。

查看：

> [https://play.google.com/store/apps/details?id=Jk.app.app](https://play.google.com/store/apps/details?id=Jk.app.app)

对比

> [https://play.google.com/store/apps/details?id=JK.app.app](https://play.google.com/store/apps/details?id=JK.app.app)

结论：谷歌播放包名称区分大小写 - 所以你试图做的事情是不可能的。

# android - htmls音频和视频在android中不起作用

> ID：11136135
> 
> 赞同：0
> 
> 时间：2012-06-21T10:23:18.717
> 
> 标签：android, html

我有一个使用 html5 在 android 中播放的内联音频文件。我了解 android 不支持该`<audio>`标签。我也尝试使用`<video>`标签。但它仍然无法正常工作。我也希望它自动播放。当前正在显示控件，但未播放音频。如果有人可以请帮助我？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:52:36.977

这一直是 android 对 HTML 5 标签的支持的一个问题：它们在不同的设备上表现得相当不同。我可以向您指出[这个](https://stackoverflow.com/questions/1711078/html5-video-element-on-android)巨大但有用的视频标签线程。我仍然在那里推荐[我的答案](https://stackoverflow.com/a/8952025/1108032)，因为如果它适合您，这似乎是一个很好的通用方法 - 让 html 代码调用本机意图。

希望这会帮助你。

# android - Android TextView 文本未在 2.3.3 版的 RelativeLayout 中换行

> ID：11136145
> 
> 赞同：3
> 
> 时间：2012-06-21T10:23:48.340
> 
> 标签：android, textview, word-wrap

我一直在尝试让 TextView 在 Android 2.3.3 上将文本包装成多行一段时间，但我无法让它工作，即使在最基本的级别上也是如此。无论我做什么，文本总是在屏幕边缘被切断。它在 Android 4 上运行良好，但我也想以 2.3.3 为目标。

我在这里只尝试了基本部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
                android:id="@+id/mainDescText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/A_MORE_DESCRIPTION_TEXT" />
</LinearLayout> 
```

但这仍然不包含文本。我试图让它工作的真实布局在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="55dp" >

            <TextView
                android:id="@+id/mainDescText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:lines="2"
                android:text="@string/A_MORE_DESCRIPTION_TEXT" />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="80dp" >

            <TextView
                android:id="@+id/ageCurrentText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/ageButton"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:text="@string/A_MORE_CURRENT_SIGHTINGS_AGE" />

            <Button
                android:id="@+id/ageButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:onClick="loadSightingsAge"
                android:text="@string/A_MORE_SIGHTINGS_AGE_BUTTON" />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="80dp"
            android:layout_marginTop="10dp" >

            <TextView
                android:id="@+id/languageCurrentText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/languageButton"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:text="@string/A_MORE_CURRENT_LANGUAGE" />

            <Button
                android:id="@+id/languageButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:onClick="loadLanguage"
                android:text="@string/A_MORE_LANGUAGE_BUTTON" />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/redPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/red_pin"
                android:contentDescription="@string/A_MORE_RED_PIN_IMAGE" />

            <TextView
                android:id="@+id/redPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/redPinImage"
                android:text="@string/A_MORE_RED_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/yellowPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/yellow_pin"
                android:contentDescription="@string/A_MORE_YELLOW_PIN_IMAGE" />

            <TextView
                android:id="@+id/yellowPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/yellowPinImage"
                android:text="@string/A_MORE_YELLOW_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/greenPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/green_pin"
                android:contentDescription="@string/A_MORE_GREEN_PIN_IMAGE" />

            <TextView
                android:id="@+id/greenPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/greenPinImage"
                android:text="@string/A_MORE_GREEN_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <TextView
                android:id="@+id/thanksText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:text="@string/A_MORE_CREATED_BY_TEXT" />

        </RelativeLayout>

    </LinearLayout>
</ScrollView> 
```

**编辑：** 我不记得我到底改变了什么，但我能够让它与这个 xml 一起工作：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="55dp" >

            <TextView
                android:id="@+id/mainDescText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:lines="3"
                android:scrollHorizontally="false"
                android:text="@string/A_MORE_DESCRIPTION_TEXT" />
        </LinearLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="80dp" >

            <TextView
                android:id="@+id/ageCurrentText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/ageButton"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:gravity="center"
                android:text="@string/A_MORE_CURRENT_SIGHTINGS_AGE" />

            <Button
                android:id="@+id/ageButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:onClick="loadSightingsAge"
                android:text="@string/A_MORE_SIGHTINGS_AGE_BUTTON" />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="80dp"
            android:layout_marginTop="10dp" >

            <TextView
                android:id="@+id/languageCurrentText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_above="@+id/languageButton"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:gravity="center"
                android:text="@string/A_MORE_CURRENT_LANGUAGE" />

            <Button
                android:id="@+id/languageButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:onClick="loadLanguage"
                android:text="@string/A_MORE_LANGUAGE_BUTTON" />
        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/redPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/red_pin"
                android:contentDescription="@string/A_MORE_RED_PIN_IMAGE" />

            <TextView
                android:id="@+id/redPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/redPinImage"
                android:lines="3"
                android:scrollHorizontally="false"
                android:text="@string/A_MORE_RED_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/yellowPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/yellow_pin"
                android:contentDescription="@string/A_MORE_YELLOW_PIN_IMAGE" />

            <TextView
                android:id="@+id/yellowPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/yellowPinImage"
                android:lines="3"
                android:scrollHorizontally="false"
                android:text="@string/A_MORE_YELLOW_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <ImageView
                android:id="@+id/greenPinImage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/green_pin"
                android:contentDescription="@string/A_MORE_GREEN_PIN_IMAGE" />

            <TextView
                android:id="@+id/greenPinText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_marginLeft="10dp"
                android:layout_toRightOf="@+id/greenPinImage"
                android:lines="3"
                android:scrollHorizontally="false"
                android:text="@string/A_MORE_GREEN_PIN_DESCRIPTION" />

        </RelativeLayout>

        <RelativeLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="10dp" >

            <TextView
                android:id="@+id/thanksText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:gravity="center"
                android:lines="3"
                android:scrollHorizontally="false"
                android:text="@string/A_MORE_CREATED_BY_TEXT" />

        </RelativeLayout>

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:51:30.930

我有同样的问题。我只想说我最近刚从使用 Android 2.3.3 平台更改为 Android 4.0.3 平台，因为我想利用 Holo 主题。所以我的默认主题看起来像这样。

```
<style name="mytheme" parent="android:Theme.Holo">
    <item name="android:windowNoTitle">true</item>
</style> 
```

在运行 Android 4.0.3 的手机上，我所有的 textViews 看起来都很棒

但是当我在运行 Android 2.3.3 的模拟器中运行我的应用程序时，没有任何 textViews 被包装。我用谷歌搜索和搜索，几乎尝试了以下每种组合：

```
 android:inputType="textMultiLine"
  android:scrollHorizontally="false"
  android:ellipsize="none"
  android:layout_weight="1" 
```

纳达。所以我决定恢复到我原来的主题：

```
<style name="myapp" parent="android:Theme.Black.NoTitleBar"/> 
```

中提琴！TextViews 再次开始换行。去搞清楚。这不是一个真正的解决方案，但也许其他人可以解释为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:30:41.997

这是一个很好的相关答案，表明您可以**根据运行的 Android 版本使用不同的主题**- 只需创建一个版本化的样式文件夹。

在这里回答：[TextView 不会破坏文本](https://stackoverflow.com/a/13032036/383414)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T19:12:57.593

我对 Android 2.3 和 4.x 也有类似的问题。正如@Richard Le Mesurier 在对这个问题的回答中所引用的那样，这个问题与主题有关：Android 4.x 使用 Holo 主题，它不会打破长线。正如 Richard 所引用的，该解决方案是通过使用版本化样式来实现的。

但是我通过向 EditText 添加两个属性来解决问题，而无需使用版本化样式：android:scrollHorizo​​ntally="false" 和 android:inputType="textMultiLine"。问题是通过将 inputType 添加为 textMultiline，拼写检查器在 Android 4.x 中启用。因此，通过在 inputType 属性中添加“textNoSuggestions”，拼写检查器被禁用，问题得到解决。

```
<TextView 
   android:id="@+id/my_text"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:scrollHorizontally="false"
   android:inputType="textMultiLine|textNoSuggestions"
   android:layout_marginTop="2dp"
   android:ellipsize="end" /> 
```

# grails - 显示不同视图的视图

> ID：11136148
> 
> 赞同：0
> 
> 时间：2012-06-21T10:23:59.037
> 
> 标签：grails

大家好，我有一个简单的程序，它有 6 个域类。人，地址，帐户，车辆..等。每个类都有自己的控制器和视图。我的问题是我可以创建另一个域类来显示这些类中的所有数据。Person.gsp 将仅显示人员数据，Address.gsp 仅显示地址数据等。我想要一个将显示以上所有内容的类和 gsp

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:40:55.370

是的，正如它[在文档中显示的那样](http://grails.org/doc/latest/guide/theWebLayer.html#modelsAndViews)，您可以创建一个控制器，将模型中的所有数据返回到视图（经过编辑以更适合您的问题）：

```
class AllDataController {
    List people
    List addresses

    def list() {
        people = Person.list()
        addresses = Address.list()
    }
} 
```

正如文档所说：

> 如果没有返回显式模型，则控制器的属性将用作模型

或者，当然，您可以只返回一个模型，其中包含您希望视图可用的所有数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:45:58.853

在您的 Person.gsp 视图中，您可以在显示人员数据时使用如下内容：

```
${person.address.text} 
```

这是假设在您的地址域中，您有一个名为 text 的字符串。如果您希望此视图不在 person.gsp 中而位于其他位置，只需将所有 Person 记录传递给您的视图，并使用 person.address 关系来显示它们。

# .htaccess - htaccess 将多个域重定向到中心域

> ID：11136149
> 
> 赞同：0
> 
> 时间：2012-06-21T10:24:04.887
> 
> 标签：.htaccess

嗨，如果有 3 个域名的 dns 指向一个中央站点，并通过中央 htaccess 文件。我想通过 dns 将站点重定向到包含域名的中心站点 + 子目录。

例如：

*   testsite1.com => thesite.com/testsite1/
*   testsite2.com => thesite.com/testsite2/
*   testsite3.com => thesite.com/testsite3/

我的想法

重写引擎开启

```
RewriteCond %{HTTP_HOST} !^www.bla1.com$ [AND]
RewriteCond %{HTTP_HOST} !^bla1.com$

RewriteRule ([^.]+)\.com(/[*]) http://bla2.com/$1/$2 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:04:35.613

问题是，`RewriteRule`不适用于 a `HTTP_HOST`，仅适用于 a `REQUEST_URI`。

所以你可以这样做：

```
 RewriteEngine On
 RewriteCond %{HTTP_HOST} !^(www\.)?example.com$
 RewriteRule (.*) http://example.com/%{HTTP_HOST}/$1 [L,R,QSA] 
```

但是请注意，“.com”不会从新路径中传递的主机名中删除

顺便说一句，“301”是“永久移动”。我不确定你想要那个，但无论如何，在重定向时首先使用 302 状态是一个常见的好习惯，直到你完成测试并且一切都完成了

# javascript - 如何删除项目的可排序 JQuery

> ID：11136153
> 
> 赞同：1
> 
> 时间：2012-06-21T10:24:19.333
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

我有一个带有三个项目的手风琴的程序。

在第一个项目的手风琴中有一个可排序的，有一个按钮，点击上方后，我想删除一个项目的可排序。

如何删除 id="three" 的项目？？？（示例）

我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:10:25.043

只需您可以`#three`使用方法删除元素[`.remove`](http://api.jquery.com/remove/)。例如，

```
$('#r').click(function(){
    $('#three').remove();
}); 
```

# java - RegEx - 从匹配项中排除字符序列

> ID：11136163
> 
> 赞同：2
> 
> 时间：2012-06-21T10:25:15.390
> 
> 标签：java, regex

我正在努力使用 RegEx，并希望在这里找到一些指导。我已经在这里和谷歌上进行了搜索，但我很难找到合适的术语。我可以想象非捕获组会帮助我，但我不知道如何应用它们。

基本上我想**找到 Java 单行注释，它们是“尖叫”**（没有小写字母）：

```
^[ \t]*//[^a-z]+?$ 
```

现在我也发现了这样的评论：

```
// PN-123456 
// ITK 12345
//IT-12345 
```

**这些评论**对我来说是有效的，所以我想**从上面的 RegEx 中排除它们**。总是这样的模式：

1.  可选空格
2.  “PN”或“IT”或“ITK”
3.  连字符、空格或什么都没有
4.  四到六位数
5.  可选空格

这是我对这种模式的方法：

```
[ ]?PN[ -]?[0-9]{1,6} 
```

但是现在我无法在一个 RegEx 中将两个表达式结合起来。这将如何工作？

TIA，彼得

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T10:42:30.810

你想要一个[负面的前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^//(?!\s*(?:PN|ITK?)[ -]?[0-9]{1,6}[ ]*$)[^a-z]+?$ 
```

请注意，`[^a-z]+`要求不会有小写字母，但与“仅大写字母”并不完全相同。例如，它会捕捉到评论`// ----------`，甚至是一个空的`//`（只要有空格）。

示例：[http ://regexr.com?31app](http://regexr.com?31app)

# c# - DropDownListFor 回调或 if 语句

> ID：11136170
> 
> 赞同：6
> 
> 时间：2012-06-21T10:26:16.120
> 
> 标签：c#, asp.net-mvc-3, razor

在我的 MVC3 应用程序中，我有一个下拉列表。在那里我必须显示所有结果，但必须禁用某些结果，以便它们不可选择。我怎样才能做到这一点？

这就是我现在所拥有的。它根本不显示已*禁用*设置为*true*的玩家。

```
@Html.DropDownListFor(m => m.Position1, Model.SelectedTeam.TeamPlayers
                     .Where(c => c.Player.Disabled == false)
                     .OrderBy(t => t.Player.Lastname)
                     .ToSelectList(m => m.FullName, m => m.PlayerId)) 
```

那么是否有另一种方法也可以显示禁用的玩家，但输出会是这样的，而不是完全隐藏它们：

```
<select>
  <option>Player 1</option>
  <option disabled="disabled">Player 2</option>
  <option>Player 3</option>
  <option>Player 4</option>
  <option disabled="disabled">Player 5</option>
  <option>Player 6</option>
</select> 
```

DropDownListFor 有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:39:56.387

好的，这是这样做的“艰难方法”。:) 也许其他人会有更好的主意。

首先，您需要区分选择列表上的有效条目和禁用条目 - 唯一的方法`value`是`text`通过`option`. 假设无效值将具有`value == "disabled"`，否则它是有效 ID：

```
//Somewhere in the controller
...
var list = yourViewModel.SelectedTeam.TeamPlayers.OrderBy(p => p.LastName).Select(new SelectListItem
    {
        Text = item.LastName,
        Value = item.Disabled ? "disabled" : item.PlayerId.ToString()
    }).ToList();

//pass it however you want, in the model or by ViewBag
ViewBag.MyDropDownList = new SelectList(list, "Value", "Text"); 
```

然后在视图中

```
@Html.DropDownListFor(model => model.Position1, ViewBag.MyDropDownList as SelectList); 
```

```
$(document).ready(function()
{
    $(#"Position1 option[value=\"disabled\"]").prop("disabled",true);
}); 
```

# java - Java Jsoup 网页抓取

> ID：11136172
> 
> 赞同：1
> 
> 时间：2012-06-21T10:26:26.573
> 
> 标签：java, web-scraping, jsoup

我正在尝试以这种方式获取此代码的结果：

> 标题： Ben 10 Ultimate Alien
> 
> 评论：taseen_shafquattaseen_shafquat：这个系列有第四季吗
> 
> 作品名：阿基拉
> 
> 评论：dragon3476dragon3476：我最喜欢的动画之一，出色的工作和关于我的第 300 块手表，我仍然得到它刚出来时的原始海报 + dvd 和 vid，甚至是 T 恤，所以是的，我不能说任何坏话关于这么棒的动画 5/5

但是，我是这样理解的：

> 标题： Ben 10 Ultimate Alien
> 
> 标题：taseen_shafquattaseen_shafquat：这个系列有第四季吗
> 
> 作品名：阿基拉
> 
> 标题：dragon3476dragon3476：我最喜欢的动画之一，出色的工作，关于我的第 300 块手表，我仍然得到它发布时的原始海报 + dvd 和 vid，甚至是 T 恤，所以是的，我不能说任何坏话关于这么棒的动画 5/5

**代码**

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.Node;
import org.jsoup.select.Elements;

import java.io.*;
import java.util.List;

public class WebScraper {

    public static void main(String[] args) throws Exception {
        String url = "http://www.1channel.ch/latest_comments.php";
        Document doc = Jsoup.connect(url).get();
        for (Element E : doc.select("div.latest_comments > a, div.latest_comments > p")) {

         System.out.print("title: "+ E.getElementsByTag("a").text());
         System.out.println(  E.getElementsByTag("p").text());
          //    System.out.println(T);
            System.out.print("\n");

            try 
            {
            PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("/Users/samualdoku/Desktop/Twitter/scraped.txt", true)));
            out.println(E.text());
            out.close();
             } catch (IOException e) {
            }  
        }

    }

} 
```

这是我要抓取的 html。我认为问题出`href`在`span`. 它包含评论者用户名。我要求`getElementsByTag("a")`标题是因为标题在锚标记内。如何摆脱 span 标签，因为它会在用户名前面打印标题，这不应该是这样。

```
 <div class="latest_comments com_class_tv">
    <a href="/tv-2733767-Dallas/season-1-episode-3">Dallas</a>
    ( 6 minutes ago )
    <p>
        <span class="latest_comments_poster">
          <a href="/profile/jowar">jowar</a>
          :
        </span>
        i just started watchin...eeing as its 34nyrs old
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:37:13.810

试试这个

```
public static void main(String[] args) throws Exception {
 String url = "http://www.1channel.ch/latest_comments.php";
 Document doc = Jsoup.connect(url).get();
 for (Element E : doc.select("div.latest_comments)) {

  System.out.print("title: "+ E.select("a").text());
  System.out.println("comment: " + E.select("p").text());

 }
} 
```

# .net - 在应用服务器之间同步服务状态

> ID：11136175
> 
> 赞同：1
> 
> 时间：2012-06-21T10:26:42.983
> 
> 标签：.net, windows-services, scalability, synchronize

1.  假设我们有 N 个相同的 Windows 服务（用 C#/.NET 开发）同时运行在 N 个应用服务器上。“不幸的是”，每个服务都有自己的内存状态（例如，“晚上 10:00 我需要执行一项工作”）。

2.  通过前端 Web UI，用户可以更改这些服务之一的状态（例如，将作业开始时间从 10 更改为 12）。

我的问题：用户更改状态后，在这些服务之间同步状态的最佳做法是什么？（最好在 .NET 平台上）。

ps 你可能想知道为什么我们要在不同的服务器上运行相同的服务。这是因为管理人员认为冗余可以防止单点故障。但是，当服务实例拥有自己的内存状态（用户可以通过 UI 更改）时，也会引发上述问题。

任何建议在这里表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:17:27.433

听起来您正在使用本地服务状态作为主要配置/设置/等。对于每个服务实例。由于您希望它们保持同步，这意味着更新每个操作实例。

我可以想到许多解决此问题的方法，但是根据您提供的信息，我将使用带有更新轮询的集中配置：

*   用于配置/设置的中央数据库，例如工作时间。
*   所有服务在初始化时从中央数据库读取以获取设置/配置并将它们在状态下应用到服务实例。
*   管理 UI 只是将数据保存到配置/设置数据库。
*   所有服务都会定期从数据库查询更新并相应地应用。

这是一个简单的分布式结构，使每个服务负责获取其设置以进行操作（拉模型），并且比向每个服务实例发出通知（推模型）更易于管理。它的另一个好处是允许您稍后添加更多服务器和服务实例，而无需更改应用程序代码或修改任何配置信息。

# ios - IOS GLKit：渲染循环停止

> ID：11136176
> 
> 赞同：1
> 
> 时间：2012-06-21T10:26:43.890
> 
> 标签：ios, opengl-es, uiscrollview, glkit

奇怪的问题，我做了这个原型项目，它是一个 GLKit 渲染，顶部有一个 UIScrollview 来移动渲染的对象。必须使用 CADisplayLink 等使其正常工作，因为滚动会停止渲染。一切都很好！

然后我将这些类复制到另一个项目中并启动它，一切似乎都工作正常，除了它不是每秒 x 次启动渲染循环。一次（直到滚动视图调用它）。

什么可以阻止自动调用下面的方法？

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:52:24.457

修复它，奇怪的是控制器被暂停了。我不知道如何以及为什么但是

self.paused = 否；（GLKViewController）修复它

# java - 在 android 模拟器上运行 facebook 应用程序

> ID：11136177
> 
> 赞同：0
> 
> 时间：2012-06-21T10:26:49.710
> 
> 标签：java, android, facebook, emulation

要创建 facebook android 本机应用程序，我们需要在 facebook 应用程序设置中提供我们的 Android 应用程序签名。每当我导出一些测试应用程序并在应用程序上提供它的键和类名时它工作得很好，我想知道如何使它在模拟器上可用......如何`keyhash`在模拟器中创建一个......有什么想法吗？

仅供参考，我正在遵循以下教程 [http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/](http://www.androidhive.info/2012/03/android-facebook-connect-tutorial/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:39:01.860

从 eclipse 安装在模拟器上的应用程序*通常*是默认签名的 android 调试密钥存储，您将使用该 android 密钥存储生成密钥哈希，将该哈希也添加到您的 android 应用程序的 facebook 应用程序设置中，所以会有两个哈希，一个用于调试密钥库，第二个由密钥库生成，您将使用它来签署您的应用程序以在真实设备上进行测试。

# wcf - 为什么我的模块不在模块列表中？

> ID：11136178
> 
> 赞同：4
> 
> 时间：2012-06-21T10:26:51.470
> 
> 标签：wcf, visual-studio-2010, debugging

我有一个可以调试的 WCF 服务。我在代码中我想要调试并获取消息的位置放置了一个断点

```
The breakpoint will not currently be hit.  The source code is different from the original version. 
```

我已经为此苦苦挣扎了 3 天，并尝试了我在其他帖子中找到的所有内容。

我注意到的一件事是，如果我转到**Debug -> Windows -> Modules**，我想要调试的模块不在该列表中。我认为这可能与它有关。有谁知道我应该怎么做。

谢谢，

萨钦

**编辑：**

我已经尝试了所有这些事情以及更多，但由于某种原因，我仍然遇到同样的问题。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:37:49.933

在关闭其中打开的任何文件后尝试关闭 Visual Studio。然后进入您的 bin 文件夹进行调试并删除所有 .pdb 文件。现在重新打开 Visual Studio 并重建您的项目或进行清理和构建以确保您处于调试模式而不是发布模式。如果您的 pdb 文件被锁定，则可能会出现此问题。如果您有该 dll 的 pdb 文件，那么它应该选择该模块进行调试。

如果这不起作用，您是否重新启动了机器？如果不尝试重新启动，因为有时该过程可能会在 Windows 中被捕获，并且重新启动将释放锁定以覆盖文件。

快速提问。有问题的模块是外部模块还是您正在调试的当前解决方案的一部分？如果它是一个内部模块，那么上面的解决方案应该可以正常工作，因为您将为该程序集生成一个新的 .pdb 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:30:57.540

右键单击解决方案资源管理器中的项目，然后选择清理。构建项目的新版本，断点将再次起作用。如果这不起作用，请尝试从 bin 和 obj 文件夹中删除所有内容，然后重新构建您的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:31:10.533

显而易见，这个错误意味着编译后的服务与源代码不匹配，即源代码在服务运行后发生了变化。确保重建您的解决方案。

我调试 WCF 服务的方法是拥有 2 个 Visual Studio 实例。一个运行 WCF 服务托管应用程序（控制台），另一个运行客户端。确保您正在运行调试版本。只要客户端可以成功连接到您的服务，它就应该可以正常工作（和调试）。

你得到

> 当前不会命中断点。

当具有该断点的模块尚未加载（尚未）时。在客户端连接之前，您的服务不会被加载。

# json - 如何限制此代码显示的字符数？

> ID：11136184
> 
> 赞同：0
> 
> 时间：2012-06-21T10:27:15.620
> 
> 标签：json, character, limit

我正在使用这段代码：

```
<script>
$(document).ready(function ()
{
 $.getJSON("http://twitter.com/statuses/user_timeline/USERNAME.json?callback=?", function(data) {
  $(".show_tweet").html(data[0].text);
 });
});
</script>

<div class='show_tweet'></div> 
```

在我的网站上显示最新的推文，但是我希望将显示的字符数限制为 75 个字符。我该怎么做呢？

感谢您的回复，马库斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:33:00.737

你是这个意思

```
 function(data) {

   if(data[0].text.length > 75)
         $(".show_tweet").html(data[0].text.substring(0,75));
   else
         $(".show_tweet").html(data[0].text);
 });
}); 
```

# jquery - jQuery 插件如何对 HTML 表格进行排序？

> ID：11136186
> 
> 赞同：1
> 
> 时间：2012-06-21T10:27:28.693
> 
> 标签：jquery, algorithm, html-table

我有一个自定义表格，它具有自定义格式，这使得应用现有表格排序插件变得非常不可能。

大多数插件如何在标准 HTML 表格上完成此操作。

只是一个基本的，简单的项目符号解释就可以了。只是想了解它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:31:43.330

您将不得不重新构建表。例如，提取所有`tr`元素，`.sort`在行数组上运行 a，传递自定义排序函数来检查您感兴趣的列，然后按排序顺序重新插入行。

您的自定义排序函数只需要提取您要比较的值，如果它们相等则返回 0，如果第一个值更大则返回 1，如果第二个值更大则返回 -1。

```
myArray.sort(function(a, b) {
    var a = parseInt($(a).find('td:first').text(), 10);
    var b = parseInt($(b).find('td:first').text(), 10);

    if(a == b) return 0;
    return a>b ? 1 : -1;
}); 
```

[演示](http://jsfiddle.net/jgHLK/)

请注意，如果您使用分页数据，您当然只能对已发送到客户端的数据进行排序。在这些情况下，您最好向填充表格的服务器发送 AJAX 请求，以请求排序的数据，并根据该响应重新填充表格，就像它是分页响应一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:42:08.593

好吧，我从来没有看过这种插件的来源，但我认为它是这样工作的。

HTML 表格是一种矩阵，您可以像这样表示它：

```
var table = [
 ['Id', 'Name',    'Phone number',   'Email'],
 [2,    'Boris',   '+33686868686',   'ahah@example.com'],
 [1,    'You',      null,            'foo@bar.baz'],
 [5,    'Anyone',   null,            null]
]; 
```

使用这样的矩阵，您可以像这样重新排序：

```
table.sort(function(a, b) {
   return ((a[0] == b[0]) ? 0 : ((a[0] > b[0]) ? 1 : -1));
}); 
```

结果是：

```
 ['Id', 'Name',    'Phone number',   'Email'],
 [1,    'You',      null,            'foo@bar.baz'],
 [2,    'Boris',   '+33686868686',   'ahah@example.com'],
 [5,    'Anyone',   null,            null] 
```

然后，您通过使用排序数组移动它们来重新排序行。

显然，你会有更复杂的排序算法，但我认为基本上是这样完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:36:10.093

我很好奇您认为无法使用现有插件进行排序的“自定义格式”，例如 jQuery 的“tablesorter”插件非常灵活：[http ://tablesorter.com/docs/](http://tablesorter.com/docs/)

我在过去使用'sorttable'插件（没有jQuery）也取得了巨大的成功，它允许您使用完全自定义的排序键，所以这可能非常适合您的设置：[http ://www.kryogenix.org/代码/浏览器/排序表/](http://www.kryogenix.org/code/browser/sorttable/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T10:34:48.460

这很容易。您可以在 DOM 中移动元素。很简单，您可以将行中的数据放入数组中，对它们进行排序并重建表。

# android - 在 Android 共享首选项中为 If-None-Mach 标头存储实体标签是个好主意吗？

> ID：11136190
> 
> 赞同：0
> 
> 时间：2012-06-21T10:27:40.267
> 
> 标签：android, http

由于 android 没有内置的 If-None-Match 标头支持，我计划存储实体标签并手动添加相应的标头。

我共享适用于此的偏好，还是有更好的解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:10:29.663

由于我没有找到任何关于 If-None-Match 标头支持的建议，我最终使用了 SharedPreferences。尚未发现此技术的任何缺陷。

# excel - 更改图表excel VBA中的点颜色

> ID：11136194
> 
> 赞同：8
> 
> 时间：2012-06-21T10:28:01.423
> 
> 标签：excel, vba, charts

我有这张图表，如果图表中的任何点超过特定限制，那么它的颜色应该会改变。

![在此处输入图像描述](../Images/4d0ea46510e84bea2e1188a980aeec91.png)

谁能建议我如何在 VBA 中获取图表，然后应用这种条件，例如我想更改上图中最高点的颜色。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-21T15:42:18.120

使用：`ActiveWorkbook.Sheets("Sheet1").ChartObjects("Chart1").Chart.SeriesCollection(1)`

每个点的颜色是`.Points(PointNumber).Interior.Color`

你必须循环的点数是`.Points.Count`

每个点的值是`.Points(PointNumber).Value`

标记本身的颜色（仅适用于折线图、散点图和雷达图）：

```
.Points(PointNumber).MarkerBackgroundColor = RGB(0,255,0)    ' green
.Points(PointNumber).MarkerForegroundColor = RGB(255,0,0)    ' red
.Points(PointNumber).MarkerStyle = xlMarkerStyleCircle ' change the shape 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-30T21:42:09.447

让我们采用另一种方法，它不需要任何代码。

假设您的数据位于 A 列（序列号或时间）和 B 值中，从 A2 和 B2 开始，因为您的标签位于 A1 和 B1 中。我们将在图表中添加一个系列，其中包含 B 列中的任何异常值。该系列将在任何异常点前面绘制一个标记，因此原始点仍然存在，并且新系列不会重新格式化该点，而是显示一个观点。

在单元格 C1 中，输入“异常”。

在单元格 C2 中，输入检测异常点的公式，例如：

=IF(AND(B2>上限,B2

如果 B 列超过上限和下限，这会将值放入 C 列，否则将 #N/A 放入 C 列，#N/A 将不会产生绘图点。

复制 C 列中的数据，选择图表，然后选择性粘贴为新系列。将此系列格式化为没有线条和任何你想用来指示失控点的明显标记。

# java - 在已构建的表上设置 TableModel

> ID：11136203
> 
> 赞同：0
> 
> 时间：2012-06-21T10:29:07.877
> 
> 标签：java, swing, constructor, jtable, tablemodel

您可以创建表模型并将其添加到表中

```
TableModel tm = new TableModel();
JTable table = new JTable(tm); 
```

但是，如果我初始化一个表

```
JTable table = new JTable(); 
```

然后稍后创建一个表模型......

```
TableModel tm = new TableModel();
tm.addValueAt(...);
... 
```

有没有办法可以将此表模型添加到原始表中？

我实际上已经创建了自己的类来扩展`TableModel`and `JTable`，并且我认为我可以在给定新表模型的情况下简单地重建表，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:32:03.663

如此处所述：[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setModel%28javax.swing.table.TableModel%29)，您可以使用`setModel(TableModel)`

> **公共无效 setModel(TableModel 数据模型)**
> 
> 将此表的数据模型设置为 newModel 并向其注册以接收来自新数据模型的侦听器通知。

# jquery - 使用 Ajax 将图像发送到 PHP

> ID：11136204
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:29:09.693
> 
> 标签：jquery, ajax, upload, filesize, file-type

我又有一个问题。我想知道我是否可以通过 AJAX 将图片发送到 PHP 文件。我应该将数据写入图像中以图像而不是文本的形式到达

```
<form onsubmit="sendWithAjax()">
    <label>File:
        <input name="myfile" type="file" size="30" />
    </label>
    <input type="submit" name="submitBtn" class="sbtn" value="Upload" />
</form>

sendWithAjax(e) {
    e.preventDefault();
    jQuery.ajax({
        type: "POST",
        url: "upload.php",
        data: ? ? ?
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:38:36.743

您可以使用[uploadify](http://www.uploadify.com/)将图片发送到特定的 PHP 页面以进行详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:33:35.333

您不能直接通过 AJAX 将数据（文件、图像）发送到服务器。

您必须使用一些框架，例如：[http](http://www.plupload.com/) : //www.plupload.com/、http: [//valums.com/ajax-upload/](http://valums.com/ajax-upload/)，或者您可以在此处阅读更多信息 -> [http://www.webdeveloperjuice.com/2010 /02/13/7-trusted-ajax-file-upload-plugins-using-jquery/](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:41:18.910

在 jquery 上进行文件上传有各种现成的插件。

进行这种上传技巧并不是一种愉快的体验，因此人们喜欢使用现成的解决方案。

这里有几个：

[http://www.webmotionuk.co.uk/jquery-image-upload-and-crop-for-php/](http://www.webmotionuk.co.uk/jquery-image-upload-and-crop-for-php/)

[http://www.phpletter.com/Demo/AjaxFileUpload-Demo/](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)

您可以从 jquery 的插件站点中搜索更多内容。

# silverlight - Telerik TeamPulse 主菜单和上下文菜单，怎么样？

> ID：11136205
> 
> 赞同：0
> 
> 时间：2012-06-21T10:29:10.217
> 
> 标签：silverlight, silverlight-4.0, telerik, rad-controls

我喜欢 TeamPulse 中 Telerik 的主菜单和上下文感知菜单。

我在这里使用 SL 4 Rad Controls 瞄准 Silverlight4。

是否有实施此操作的示例项目（使用 Office Dark 主题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:21:32.163

您正在寻找[RadContextMenu](http://www.telerik.com/help/silverlight/radcontextmenu-features-working-with-radcontext-menu.html)

```
<telerik:RadContextMenu.ContextMenu>
     <telerik:RadContextMenu telerik:StyleManager.Theme="{StaticResource OfficeDarkTheme}">
          <telerik:RadMenuItem Click="RadMenuItem_Click" Header="My Menu Item"/>
     </telerik:RadContextMenu>
</telerik:RadContextMenu.ContextMenu> 
```

`ContextMenu`是附加属性，可以附加到任何`FrameworkElement`

# java - 有没有办法将增量更改热部署到 Android 设备上？[说，像JRebel]

> ID：11136206
> 
> 赞同：12
> 
> 时间：2012-06-21T10:29:21.257
> 
> 标签：java, android, hotdeploy, jrebel

我是一名独立游戏开发人员，目前正在使用 NDK 为 Android 平台构建游戏。

我的问题是，这款游戏现在已经超过 20MB，并且在我的 Android 设备上部署和启动需要花费大量时间，这让我感到很痛苦并且让我慢了下来。

所以，我想知道

> 有什么方法可以热部署我对我的 Android 项目所做的增量更改，而不是一次又一次地构建和安装整个东西到我的 Android 设备？
> 
> 甚至可能吗？我正在为 Java VM 和 Java 容器寻找 JRebel 工具之类的东西。

[更新：关于缩短构建时间的任何其他想法，好吗？]

谢谢和干杯！

[注意：只是想提一下，我将无法使用模拟器进行更快的构建，因为我的游戏大量使用 OpenGL 库，模拟器无法处理。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:57:20.747

> 所以，我想知道是否有任何方法可以热部署我对 Android 项目所做的增量更改，而不是一次又一次地构建和安装整个东西到我的 Android 设备？

不适用于您在 APK 中打包的内容。

> 只是想提一下，我将无法使用模拟器进行更快的构建，因为我的游戏大量使用了 OpenGL 库，而模拟器无法处理这些库。

我希望最新的模拟器（带有硬件加速）和 2.3.3 和 4.0.3 的 x86 模拟器图像能够以可接受的速度运行您的游戏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-16T00:10:46.167

实际上，在 Android 上进行热插拔 delta 更改是可能的。您应该使用一些特殊工具来实现此行为。你可以试试这个工具：[InstaRelaoder](http://www.instareloader.com/download/)使用“inirwetrust”作为密码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-07T14:58:38.927

JRebel 适用于 Android，并支持 NDK 项目。

[https://zeroturnaround.com/software/jrebel-for-android/](https://zeroturnaround.com/software/jrebel-for-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T17:56:42.147

Android Studio 2.0 现在具有[即时运行](http://developer.android.com/tools/building/building-studio.html#instant-run)功能。

[![在此处输入图像描述](../Images/23c8939d28714a5e1565cb24e1d07be5.png)](https://i.stack.imgur.com/3wr2Q.png)

[此链接](http://android-developers.blogspot.ie/2016/04/android-studio-2-0.html)中的更多信息。

# sentry - raven - sentry + django = 未配置服务器，未安装哨兵。无法发送消息

> ID：11136207
> 
> 赞同：3
> 
> 时间：2012-06-21T10:29:21.610
> 
> 标签：sentry, raven

我有一个工作正常的哨兵服务器。

```
raven test <dnstoserver> -> Sending a test message... success! 
```

我有一台带有 django 1.3 和 raven 1.93 的开发机器。在 django 项目中，我有这个：

设置.py：

```
SENTRY_KEY=<secretkey>
SENTRY_DNS=<dnstoserver>

INSTALLED_APPS = (
    'bar',
    'foo',
    'raven.contrib.django',
)

LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'root': {
        'level': 'WARNING',
        'handlers': ['sentry'],
    },
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
    },
    'handlers': {
        'sentry': {
            'level': 'ERROR',
            'class': 'raven.contrib.django.handlers.SentryHandler',
        },
        'console': {
            'level': 'DEBUG',
            'class': 'logging.StreamHandler',
            'formatter': 'verbose'
        }
    },
    'loggers': {
        'django.db.backends': {
            'level': 'ERROR',
            'handlers': ['console'],
            'propagate': False,
        },
        'raven': {
            'level': 'DEBUG',
            'handlers': ['console', 'sentry'],
            'propagate': False,
        },        
    },
} 
```

注意 installed_apps 中没有“哨兵”。这是故意的，因为哨兵是服务器，不应该在客户端上！

views.py（在视图中）：

```
import logging
logger = logging.getLogger("raven")
logger.error("test") 
```

当我运行视图时，我进入控制台：

```
No servers configured, and sentry not installed. Cannot send message 
```

为什么，以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T17:31:29.033

你真的是在设置`SENTRY_DNS`还是`SENTRY_DSN`？

当您设置`SENTRY_DSN`主要配置变量的实例化时会自动发生（包括`SENTRY_SERVERS`、`SENTRY_PUBLIC_KEY`、`SENTRY_SECRET_KEY`和`SENTRY_PROJECT`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:36:36.150

问题出在 raven DjangoClient 的构建中。它没有通过任何服务器，也找不到哨兵配置来窃取该配置。我在settings.py中添加：

```
SENTRY_SERVERS=<dnstoserver> 
```

控制台现在每次调用 raven 时都会输出：

```
INFO 2012-06-21 05:33:19,831 base 4323 140735075462336 Configuring Raven for host: <dnstoserver> 
```

但它就像一个魅力！哨兵中的消息...

顺便提一句。对于所有未记录的设置，请查看`raven.contrib.django.models.get_client()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T20:22:22.707

我建议使用：

```
SENTRY_DSN = 'http://user:password@<domain>:<port>/<project_id>' 
```

并在 APPS_INSTALLED 添加：

```
'raven.contrib.django.raven_compat' 
```

另请查看本指南： [http ://code.fetzig.at/post/18607051916/sentry-and-raven-setup-for-django-projects](http://code.fetzig.at/post/18607051916/sentry-and-raven-setup-for-django-projects)

# android - android方向 - 意图问题（相机）

> ID：11136209
> 
> 赞同：5
> 
> 时间：2012-06-21T10:29:33.577
> 
> 标签：android, android-intent, crash, camera, orientation

这是一个有趣的...

我有一个正在为运行 android 2.3.3 及更高版本的设备编写的应用程序。

它有一个通过 Intent 调用相机的主要活动。

如果用户单击按钮启动相机；然后拍照；然后单击“完成”返回主活动 - 应用程序工作正常，并在主活动的图像视图中显示新图片。

但是，如果用户在纵向使用主要活动；然后单击按钮打开相机意图并将方向更改为横向；然后单击完成返回主活动 - 应用程序崩溃

但是……但是，如果用户在纵向使用主要活动；然后单击按钮打开相机意图并将方向更改为横向；然后将方向更改回纵向（在相机中），然后单击完成以返回主活动 - 然后应用程序继续正常运行。

我尝试过的东西：我更改了清单文件以强制应用程序（主要活动）面向纵向（我也删除了这个）我已将此行添加到主要活动中以尝试处理重新绘制它上面的活动从相机意图返回：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

在调试窗口中，我收到描述空指针异常的错误 - 我认为这是因为在要传递图像的方向更改后视图不再存在，除非方向与离开时的方向相同。

我有点卡住了，所以会很感激一些建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:35:08.203

当您的屏幕方向发生变化时，您的屏幕将`Activity`被销毁并以新的方向重新创建。因此，在 的生命周期内获得引用的任何变量都`Activity`将不再引用任何东西，如果您随后尝试访问它们引用的对象而不重新分配它们的值，您将得到一个`NullPointerException`.

该方法`onSaveInstanceState()`用于在配置更改之间保存临时数据。这会创建一个 Bundle，`onCreate()`当`Activity`再次启动时传递给它。

没有任何代码，我不知道这是否是您的问题，但值得一看。

请参阅[http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)了解更多信息（毫无疑问，我提供的信息比我提供的更准确）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:53:04.827

嘿，我不确定，但尝试将此属性放在清单文件中，希望它可以工作

```
android:configChanges="orientation|keyboardHidden" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T06:00:35.667

三星 S3 和 S4 等一些 Android 设备在横向模式下具有默认的相机表面视图。当您调用相机并捕获图像并进入您的应用程序时，无论您是否设置了方向 PORTRAIT，它都会首先以 LANDSCAPE 模式打开，然后更改为 PORTRAIT 模式。

它的 Android 操作系统行为。由于这个活动重新创建它自己。那时你得到空指针异常。您可以通过`configChanges`在清单文件中设置来处理。

```
android:configChanges="keyboard|keyboardHidden|screenLayout|screenSize|orientation" 
```

并且您可以将数据临时存储在`onSaveInstanceState()`@Spinner 在他的回答中正确地说的中。

# javascript - 根据 Excel 工作表中的条目动态添加复选框

> ID：11136211
> 
> 赞同：1
> 
> 时间：2012-06-21T10:29:47.413
> 
> 标签：javascript, html

前提条件：*在 Excel 工作表中，会出现一些名称*。

脚步：

1.  它将从 excel 表中读取。
2.  它将根据 Excel 工作表中存在的条目数在网页中创建复选框。
3.  复选框的名称与 Excel 工作表中的名称相同。

在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:58:08.780

这在 jQuery 中似乎很容易，如果您可以将它与 HTML 网页一起使用，您将在其中处理您的 Excel 工作表。jQuery 有一个完美的迭代函数（.each() 就是其中之一）并且可以即时创建新对象（包括复选框），将它们的属性（包括名称）设置为您想要的任何内容。

我无法为您提供任何工作示例，因为在从 Excel 工作表中读取数据后，您没有提供有关数据外观的足够详细信息。

我在这里假设您已经完成了 Excel 工作表部分的阅读。因为，如果不是，那么请相信我 - 向网页添加复选框对于在网页上阅读任何 Office 格式的问题来说是小菜一碟。这是一个完全不同的问题。

# c# - keyup 事件调用数据库函数并填充列表框

> ID：11136213
> 
> 赞同：1
> 
> 时间：2012-06-21T10:29:53.750
> 
> 标签：c#, javascript, jquery, asp.net, .net

我在 ASP.NET 中有一个网页，其中包含以下代码**Default.aspx**：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="SearchHandler.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server"> 
        <asp:TextBox ID="search" runat="server"></asp:TextBox>
        <asp:ListBox ID="listbox" runat="server" SelectionMode="Multiple"></asp:ListBox>
    </form>
</body>
</html> 
```

在我的**SearchHandler.js**中，我有以下代码：

```
$(document).ready(function () {
    $('#search').keyup(function () {
        //..do something here and populate listbox from database query result.
        //..call C# function GetItems(), passing input as parameter and use to populate ListBox.
    });
}); 
```

在**Functions.cs**中：

```
public class Functions
{
   Database db = new Database();   
   public List<string> GetItems(string searchinput) 
   {
      List<string> items = db.DoSomething(searchinput);
      return items;
   }
} 
```

抱歉，我对此很陌生，但是我将如何完成上面的代码以填充同一页面上的列表框？基本上，每次用户在文本框中“按键”时，列表框的内容都会刷新。我想`GetItems()`从**Functions.cs**类文件中调用一个 C# 函数。

新编辑：

基本上`GetItems()`需要一个键输入，每次按下一个键，它都会触发一个数据库查询来检索相关记录。我有一个如下表（例如）：

```
TableA
Name       Country
Tom        England
Bill       USA
John       Australia
Jim        China
Harry      Belgium
Johnathan  France 
```

因此，当有人在搜索框中输入“John”时，“Australia”和“France”将出现在列表框中。

```
SELECT Country FROM TableA WHERE Name LIKE '%John%' 
```

编辑 21/06/12：如果我不使用 KeyUp 事件而是使用按钮事件，这会使其成为更好的方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:44:23.127

我在这里的第一反应是不要这样做。每次有人在列表中输入字母时进行数据库调用对于您的数据库访问来说非常昂贵，并且会使您的性能下降一些可怕的东西。即使您使用 ajax 调用 - 您也无法在有效的时间内获得响应。所以我会给你一些广泛的建议：

1.  可以有多少条目？你能把它们加载到 JS 数组中，然后在 JS 中搜索它们吗？可能不会，否则您不需要执行此过程。

2.  一次从数据库中获取列表，并将其存储为序列化对象。然后在此对象中搜索相关选项。在站点初始化中加载此数据。

3.  一旦您输入了一个字符 - 或者可能是 2 个，具体取决于您的数据 - 执行 ajax 调用以获取完整的相关选项列表。从那里开始，在 JS 中使用这个列表来根据进一步的输入进行限制。

调整它直到它运作良好。如果需要，我可以提供有关任何特定部分的更多详细信息。

编辑基于更多细节。

我建议在第一次按键时，加载与该单个字符相关的所有条目。从那里开始，您在加载的列表中搜索匹配项，从那里缩小范围。

您应该启动一个 ajax 查询以第一次获取所有引用，并且在返回之前对条目不做任何其他事情。

您可能还希望在应用程序加载时将整个列表加载到内存中，并在需要时获取其中的一个子集。可能，为每个初始字符取 26 个条目，但这可能是这种大小的 OTT。这可能取决于您从数据库调用和选择中获得的性能。

这非常复杂，但应该会为您生成一个满足您需要的响应接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:52:25.117

不太确定，但您可能正在寻找类似[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

编辑：没关系，我误读了您的问题，但是我会环顾 ajax 库，看看您是否可以找到合适的东西或可以适应您需要的东西。祝你好运。

编辑：如果您将列表包含在更新面板中，您可以在该事件中刷新它。 [http://weblogs.asp.net/jeffreyzhao/archive/2008/04/26/refresh-the-updatepanel-using-javascript-code.aspx](http://weblogs.asp.net/jeffreyzhao/archive/2008/04/26/refresh-the-updatepanel-using-javascript-code.aspx)

# excel - 在excel中通过vba格式化的邮件范围

> ID：11136214
> 
> 赞同：1
> 
> 时间：2012-06-21T10:29:57.863
> 
> 标签：excel, outlook, range, mailing, vba

网上有很多文章，如何在outlook邮件中通过excel范围。所以我使用以下代码：

```
Set OutApp = GetObject(, "Outlook.Application")
If OutApp Is Nothing Then Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)
Set rng = Sheets("Report").Range("A3:F" & ThisWorkbook.Worksheets("Report").UsedRange.Rows.Count)

With OutMail
    .HTMLBody = RangetoHTML(rng)   
    .Display
End With 
```

在我的范围内，我有超链接表。我希望它们在电子邮件正文中是可点击的。但他们不是。我理解这一点，因为 BodyFormat 属性是 olFormatHTML。如果我将 BodyFormat 更改为 Plain 或 RichText，超链接将变为可点击，但所有格式都会崩溃。如何保存所有格式并同时使超链接可点击？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:47:20.790

我相信你正在使用 Ron 的[RangetoHTML](http://www.rondebruin.nl/mail/folder3/mail4.htm)

如果是，那么您必须向其中添加一些额外的代码，以便它保留超链接。

我已经添加了代码，你可以看到相同的

```
'~~~~~~~~~~~~~~~~~~~~  ADDED THIS ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
```

这是修改后的代码。

```
Function RangetoHTML(rng As Range)
    ' Changed by Ron de Bruin 28-Oct-2006
    ' Working in Office 2000-2010
    Dim fso As Object
    Dim ts As Object
    Dim TempFile As String
    Dim TempWB As Workbook

    TempFile = Environ$("temp") & "/" & Format(Now, "dd-mm-yy h-mm-ss") & ".htm"

    'Copy the range and create a new workbook to past the data in
    rng.Copy
    Set TempWB = Workbooks.Add(1)
    With TempWB.Sheets(1)
        .Cells(1).PasteSpecial Paste:=8
        .Cells(1).PasteSpecial xlPasteValues, , False, False
        .Cells(1).PasteSpecial xlPasteFormats, , False, False
        .Cells(1).Select
        Application.CutCopyMode = False
        On Error Resume Next
        .DrawingObjects.Visible = True
        .DrawingObjects.Delete
        On Error GoTo 0
    End With

    '~~~~~~~~~~~~~~~~~~~~  ADDED THIS ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Dim HyperL As Hyperlink
    For Each HyperL In rng.Hyperlinks
        TempWB.Sheets(1).Hyperlinks.Add _
        Anchor:=TempWB.Sheets(1).Range(HyperL.Range.Address), _
        Address:=HyperL.Address, _
        TextToDisplay:=HyperL.TextToDisplay
    Next HyperL
    '~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    'Publish the sheet to a htm file
    With TempWB.PublishObjects.Add( _
         SourceType:=xlSourceRange, _
         Filename:=TempFile, _
         Sheet:=TempWB.Sheets(1).Name, _
         Source:=TempWB.Sheets(1).UsedRange.Address, _
         HtmlType:=xlHtmlStatic)
        .Publish (True)
    End With

    'Read all data from the htm file into RangetoHTML
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set ts = fso.GetFile(TempFile).OpenAsTextStream(1, -2)
    RangetoHTML = ts.ReadAll
    ts.Close
    RangetoHTML = Replace(RangetoHTML, "align=center x:publishsource=", _
                          "align=left x:publishsource=")

    'Close TempWB
    TempWB.Close savechanges:=False

    'Delete the htm file we used in this function
    Kill TempFile

    Set ts = Nothing
    Set fso = Nothing
    Set TempWB = Nothing
End Function 
```

**跟进**

**快照**

![在此处输入图像描述](../Images/83d977d1abdc472f77162b4c28799777.png)

# android - ScrollView 和缺少滚动条

> ID：11136215
> 
> 赞同：0
> 
> 时间：2012-06-21T10:29:58.973
> 
> 标签：android, android-layout, android-scrollview, android-scrollbar

我创建了自己的类，它扩展了 ScrollView 但滚动条消失了。滚动页面时如何显示滚动条。这是我的课的代码：

```
package se.nindev.restaurant.views;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.widget.ScrollView;

public class ScrollViewer extends ScrollView {
    private float mLastX;
    private float mLastY;
    private float mDiffX;
    private float mDiffY;

         public ScrollViewer(Context context) {
          this(context, null);
         }

         public ScrollViewer(Context context, AttributeSet attrs) {
          this(context, attrs, 0);
         }
         public ScrollViewer(Context context, AttributeSet attrs, int defStyle) {
          super(context, attrs, defStyle);
         }

//       @Override
//       public boolean dispatchTouchEvent(MotionEvent ev){
//           return super.dispatchTouchEvent(ev);
//       } 
         @Override
        public boolean onInterceptTouchEvent(MotionEvent ev) {
             switch (ev.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    // reset difference values
                    mDiffX = 0;
                    mDiffY = 0;

                    mLastX = ev.getX();
                    mLastY = ev.getY();
                    break;

                case MotionEvent.ACTION_MOVE:
                    final float curX = ev.getX();
                    final float curY = ev.getY();
                    mDiffX += Math.abs(curX - mLastX);
                    mDiffY += Math.abs(curY - mLastY);
                    mLastX = curX;
                    mLastY = curY;

                    // don't intercept event, when user tries to scroll horizontally
                    if (mDiffX > mDiffY) {
                        return false;
                    }
             }
        return super.onInterceptTouchEvent(ev);
        }
} 
```

当我在滚动视图中的页面中间滚动时，其他元素会消失，在页面的顶端底部有图形效果，但在我的课堂上我没有那种效果。如何将普通滚动视图中的所有效果添加到我的班级？

编辑：好的，我添加滚动条：`android:scrollbars="vertical"`但仍然不知道如何添加这个 grafic 效果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:40:07.217

```
 ScrollView scrollView = new ScrollView(getContext());
 scrollView.setVerticalScrollBarEnabled(true);
 scrollView.setHorizontalScrollBarEnabled(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:36:48.843

```
android:background="@color/white"
android:fadingEdge="vertical" 
```

我们需要在白色上更改背景滚动视图并使用淡入淡出的边缘

# php - Symfony2：同时使用 2 种方法保护路线

> ID：11136216
> 
> 赞同：0
> 
> 时间：2012-06-21T10:29:59.460
> 
> 标签：php, symfony

我有一个管理区域，我用 ROLE 保护它，位于`security.yml`：

```
access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/addrating, role: IS_AUTHENTICATED_FULLY }
    - { path: ^/admin/, role: ROLE_ADMIN } 
```

我想为我们所有的管理员提供一个额外的密码，我可以通过电话进行交流...所以我想使用 http 密码....我可以`security.yml`以启用的方式更改我的密码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:31:40.900

如果你只是想要 HTTP 基本身份验证作为附加层，你可以在你的 web 服务器配置中添加它，而无需触及你的 Symfony 安全配置。

例如，在 Apache 中，您可以将其添加到适用 vhost 中的 /admin 或 web/admin 中的 .htaccess 文件中。

# javascript - 花括号后面的括号是什么意思？

> ID：11136217
> 
> 赞同：13
> 
> 时间：2012-06-21T10:30:02.230
> 
> 标签：javascript

我已经看到 Javascript 代码在函数的右花括号后立即使用括号，我不明白它们的用途。

例子：

```
function foo(bar){
  return bar;
}(0); 
```

*   做什么`(0)`？

*   这个叫什么？

*   什么时候应该使用这种技术？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T10:31:35.060

它们立即调用函数，类似于调用函数时：

```
function foo() {
   alert('hello');
}

foo(); // call 
```

您也可以**直接**调用它：

```
(function foo(){
   alert('hello');
})(); // <-------------- 
```

* * *

目前你有 `Function Declaration`. ***要真正自我调用它***，您需要在**括号**中使用它（使其成为表达式）：

```
(function foo(bar){
  return bar;
})(0); 
```

现在它是`Function Expression`并且将立即调用。要了解 和 之间的区别`Function Declaration`，`Function Expression`请查看[Kangax](http://perfectionkills.com)的这篇优秀文章：

*   [命名函数表达式揭秘](http://kangax.github.com/nfe/)

* * *

> (0) 做什么？

它是传递给`foo`函数的参数，因此`bar`将`0`在函数内部。

> 这个叫什么？

它是一个自我更新或自我执行的功能。您可能还想看看[这个](https://stackoverflow.com/questions/4472528/javascript-jquery-closure-function-syntax/4472589#4472589)。

> 什么时候应该使用这种技术？

当您想立即调用函数并将变量范围仅保留在该函数表达式内时。外部世界或该函数表达式之外的代码将无法使用它。

* * *

**学到更多：**

*   [自调用函数逐行解释](http://www.javascriptkata.com/2011/08/22/self-invoking-functions-explained-line-by-line/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-21T10:43:59.187

在您的示例中，您只有两个语句，它相当于：

```
function foo(bar){
  return bar;
}
0; 
```

这**不是**自调用函数。第一条语句是**函数声明**，第二条语句只是数字文字`0`，它不做任何事情。括号不执行函数，它们是[分组运算符](http://es5.github.com/#x11.1.6)。

我们如何证明这一点？尝试：

```
function foo(bar){
  return "bar";
}(0); 
```

并告诉我输出是什么。

* * *

**如果我们有一个函数表达式**，它将是一个自调用函数。为此，您可以使用分组运算符强制将其评估为表达式。

例如：

```
(function foo(bar){
  return bar;
})(0); 
```

这是一个命名函数表达式。表达式 ( `(function ....)`) 的结果是函数引用，并`(0)`执行函数，`0`作为参数传递。

括号的位置也可以是：

```
(function foo(bar){
  return bar;
}(0)); 
```

也许这就是你所看到的。

这种技术已经在这里广泛讨论过：[JavaScript 中自执行函数的目的是什么？](https://stackoverflow.com/questions/592396/what-is-the-purpose-of-a-self-executing-function-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:35:47.550

这是一个自调用函数。您将 0 作为参数传递。因此，您的函数将返回等于 0 的 bar。

例如，下面的函数是等价的：

```
function foo(bar) {
    return bar;
}

foo(0); // returns 0 
```

# silverlight - 在 silverlight 应用程序中访问托管在 Windows 服务中的 WCF

> ID：11136218
> 
> 赞同：0
> 
> 时间：2012-06-21T10:30:02.377
> 
> 标签：silverlight

我已经在 Windows 服务中托管了我的 Wcf 服务，我可以在我的测试控制台应用程序中毫无问题地使用它，但是当我尝试通过在我的 silverlight 应用程序中使用服务引用来使用相同的服务时，它给了我错误。

ServiceReferences.ClientConfig 有这个条目：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        ...
      </netTcpBinding>
    </bindings>
    <client>
      <endpoint address="net.tcp://localhost:8732/myservices/myservice/"
          binding="netTcpBinding" bindingConfiguration="NetTcpBinding_myservice"
          contract="ServiceReference1.myservice" name="NetTcpBinding_myservice">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel>
</configuration> 
```

我收到此错误：服务参考配置中无法识别元素“netTcpBinding”。请注意，Silverlight 中只有一部分 Windows Communication Foundation 配置功能可用。将感谢您的帮助..

阿尔卑斯山

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:37:20.537

Have you Installed `WCF Non-HTTP Activation` on your IIS?

Found this rather good article on using NetTcpBinding with WCF and Silverlight: [http://www.codeproject.com/Articles/311250/NetTcpBinding-Configurations-for-WCF-and-Silverlig](http://www.codeproject.com/Articles/311250/NetTcpBinding-Configurations-for-WCF-and-Silverlig)

The other thing I noted is that apparently you can't specify security options with Silverlight and netTcp, so have to specify an insecure binding (from that same example):

```
<bindings>
      <netTcpBinding>
        <binding name="InsecureTcp" receiveTimeout="Infinite">
          <security mode="None"/>                                    
        </binding>                                                   
      </netTcpBinding>
</bindings> 
```

# sql-server - 我想从 SQL Server 2008 中获取自动递增的 varchar 值

> ID：11136220
> 
> 赞同：0
> 
> 时间：2012-06-21T10:30:05.323
> 
> 标签：sql-server

我想在事件`varchar`中将 SQL Server 2008 中的自动增量值提取到 asp.net 中的文本框中。`pageload`

假设我有一列`trn_no`，数据类型`varchar`。如果在表中手动插入第一个值，例如`T100`，那么我将如何`T101`在 pageload.xml 的文本框中获取该值。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:42:05.963

如果您想在键中包含字母数字值，请使用以下 sql 获取最后插入的 id +1。

```
SELECT 'T' 
       + Cast(Max(Substring(trn_no, 2, Len(trn_no)-1) + 1 ) AS varchar(15)) 
FROM   table 
```

`Varchar(15)`根据可能的最大长度更改

# ruby-on-rails - RSpec 测试失败显示闪烁消息

> ID：11136222
> 
> 赞同：1
> 
> 时间：2012-06-21T10:30:16.010
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我的控制器（用户控制器）

```
 def reset_password
      @user = User.find_by_reset_code(params[:reset_code]) unless params[:reset_code].nil?     

      if request.post?    
        if @user && @user.update_attributes(:password => params[:user][:password], :password_confirmation => params[:user][:password_confirmation])
          self.current_user = @user
          @user.delete_reset_code
          flash[:success] = t('helpers.password_reset_successful')
          render :template => "sessions/new"
        else
          flash[:error] = t('helpers.password_reset_error')
          redirect_to root_path
        end
      end
   end 
```

我想测试它，我做...

```
 it "should have a flash message" do
    @attr = { :password => "newpassword", :password_confirmation => "newpassword" }
    @user.reset_code = Digest::SHA1.hexdigest( Time.now.to_s.split(//).sort_by {rand}.join )

    post :reset_password, :reset_code => @user.reset_code, :password => @attr[:password], :password_confirmation => @attr[:password_confirmation]
    flash[:success].should == I18n.t('helpers.password_reset_successful')
  end 
```

但我在 Rspec 中有例外 -

```
Failure/Error: flash[:success].should == I18n.t('helpers.password_reset_successful')
       expected: "Password successfully updated"
            got: nil (using ==) 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:34:50.660

更正您的参数：

```
post :reset_password, :reset_code => @user.reset_code, :user => { :password => @attr[:password], :password_confirmation => @attr[:password_confirmation] } 
```

# android - 即使使用“确切名称”搜索，Android App 也不会出现在 google play 的第一页

> ID：11136224
> 
> 赞同：2
> 
> 时间：2012-06-21T10:30:18.033
> 
> 标签：android, search, google-play

两天前，我在市场上发布了以下 android 应用程序。[https://play.google.com/store/apps/details?id=com.whatappnext.topmusicvideos](https://play.google.com/store/apps/details?id=com.whatappnext.topmusicvideos)。即使我按确切的应用名称搜索，该应用也不会出现在 Google Play 页面的第一页中。但是，当我搜索其他应用程序时，当我使用确切的应用程序名称进行搜索时，它们会显示为 Google Play 页面中的第一个结果。我是不是错过了什么。请帮我弄清楚我是否做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:54:32.570

好吧，我刚刚了解到您要求您的应用在搜索结果中的排名不佳。

排名算法不仅仅按照应用名称对结果进行排序，它还包括应用评分、下载次数，可能还有其他一些东西。应用名称和描述用于过滤结果并删除不相关的结果，但我什至不确定它们是否用于对结果进行排序。

事实上，使用三个非常常见的关键字作为应用标题可能是个坏主意。谷歌非常努力地降低这类标题的排名，因为他们试图按质量而不是关键字对应用程序进行排序。

仅仅因为其他应用没有使用正确的关键字，就很容易做出一个糟糕的应用并出现在搜索结果中。我不是说你的应用不好，但谷歌算法可能会这么认为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:34:59.863

您的应用可能需要一些时间才能在搜索结果中编入索引。该网站会在几天内更新他们的列表。稍等片刻，它就会出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:37:55.807

我通过应用程序包名称甚至应用程序名称找到了它:)

# java - 如何在不使用 android 中的 textview 的情况下从 try catch 语句中获取字符串值？

> ID：11136226
> 
> 赞同：-3
> 
> 时间：2012-06-21T10:30:24.387
> 
> 标签：java, android, json, text, try-catch

```
 public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);
        TextView lattv=(TextView)findViewById(R.id.lat);
        TextView lngtv=(TextView)findViewById(R.id.lng);
        JSONParstring jParser = new JSONParstring();
        String json = jParser.getJSONFromUrl(url);
        // getting JSON string from URL

        try
        {
            JSONObject jobj = new JSONObject(json);

            res = jobj.getJSONArray(TAG_RESULTS);
            for(int i = 0; i < res.length(); i++){
                JSONObject c = res.getJSONObject(i);

                JSONObject loc = c.optJSONObject(TAG_GEO).optJSONObject(TAG_LOCATION);

            String lat =loc.getString(TAG_LAT);

            String lng = loc.getString(TAG_LNG);

            lattv.setText(lat);
            lngtv.setText(lng);
            Log.i("Lat",lat);

            }
        }
        catch (JSONException e){ }
        String i=(String) lattv.getText();
        String j=(String) lngtv.getText();

        double lat1 = Double.parseDouble(i);  
        double lng1 = Double.parseDouble(j); 
```

在我的 try catch 语句中，我得到的是纬度和经度值而不是直接获取，我使用 textview 然后转换为字符串格式。我想直接从 try catch 语句中获取这两个值。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:34:01.300

嗨，请尝试下面的代码。

```
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);
setContentView(R.layout.map);
TextView lattv=(TextView)findViewById(R.id.lat);
TextView lngtv=(TextView)findViewById(R.id.lng);
JSONParstring jParser = new JSONParstring();
String json = jParser.getJSONFromUrl(url);
// getting JSON string from URL
String lat ="",lng="";
try
{
    JSONObject jobj = new JSONObject(json);

    res = jobj.getJSONArray(TAG_RESULTS);
    for(int i = 0; i < res.length(); i++){
        JSONObject c = res.getJSONObject(i);

        JSONObject loc = c.optJSONObject(TAG_GEO).optJSONObject(TAG_LOCATION);

    lat =loc.getString(TAG_LAT);

    lng = loc.getString(TAG_LNG);

    //lattv.setText(lat);
    //lngtv.setText(lng);
    Log.i("Lat",lat);

    }
}
catch (JSONException e){ }
//String i=(String) lattv.getText();
//String j=(String) lngtv.getText();

double lat1 = Double.parseDouble(lat);  
double lng1 = Double.parseDouble(lng); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:36:05.650

在块外声明变量`lat`，你可以在块内修改它的值，在块外访问它`lng``try catch``try catch``try catch`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:34:03.797

您可以直接在 try/catch 块中解析变量：

```
double lat1;
double lng1;

try
{
    // ...
    lat1 = Double.parseDouble(loc.getString(TAG_LAT));
    lng1 = Double.parseDouble(loc.getString(TAG_LNG));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:36:56.593

您只需在 try catch 之外声明您的字符串 lat 和 lng。

公共无效 onCreate(Bundle savedInstanceState) {

```
 super.onCreate(savedInstanceState);
    setContentView(R.layout.map);

      String lat = null;

        String lng = null;

    JSONParstring jParser = new JSONParstring();
    String json = jParser.getJSONFromUrl(url);
    // getting JSON string from URL

    try
    {
        JSONObject jobj = new JSONObject(json);

        res = jobj.getJSONArray(TAG_RESULTS);
        for(int i = 0; i < res.length(); i++){
            JSONObject c = res.getJSONObject(i);

            JSONObject loc = c.optJSONObject(TAG_GEO).optJSONObject(TAG_LOCATION);

        lat =loc.getString(TAG_LAT);

        lng = loc.getString(TAG_LNG);

        lattv.setText(lat);
        lngtv.setText(lng);
        Log.i("Lat",lat);

        }
    }
    catch (JSONException e){ }

    double lat1 = Double.parseDouble(lat );  
    double lng1 = Double.parseDouble(lng ); 
```

# eclipse - How Can I stop gwt's embedded server

> ID：11136234
> 
> 赞同：5
> 
> 时间：2012-06-21T10:31:03.977
> 
> 标签：eclipse, gwt, jetty

While developing an application using gwt in ecliplse crashed. Now the server is running on the port 8888 I'm unable to stop it. Nothing is showing in the console but I can access the application from the browser. How can I kill the instance of this embedded server?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T09:16:50.920

as @jesse said in the comments 'jps -l' is the solution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-25T20:00:34.660

In eclipse you can do this from the "Development mode" view. [Click here to see the image](http://i.stack.imgur.com/kqZaC.png)

# javascript - 如何选择未选中的复选框

> ID：11136248
> 
> 赞同：0
> 
> 时间：2012-06-21T10:32:13.687
> 
> 标签：javascript, jquery

我正在使用 jquery UI 选项卡。我有 2 个分别带有 id `#tab1`&的标签`#tab2`。两个选项卡

包含*2 个复选框（共 4 个）*。而目前都是`unchecked`. 现在我写了这个 jquery 代码：

```
 $("#tab2").find("input:not(:checked)").each(function () { alert("1"); }); 
```

我的问题是，警报*来了 4 次*，但它应该*来了 2 次*。这里有什么问题？

**编辑**

```
 <div class="dialog">
            <div id="tab">
                <ul>
                    <li><a href="#tab1">A</a></li>
                    <li><a href="#tab2">B</a></li>
                </ul>
                <div id="tab1">
                        <input type="checkbox" />
                        <input type="checkbox" />
                </div>
                <div id="tab2">
                        <input type="checkbox" />
                        <input type="checkbox" />
                </div>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:51:08.903

**检查这个小提琴。它对我来说很好..**

[http://jsfiddle.net/kabichill/6XmYn/](http://jsfiddle.net/kabichill/6XmYn/)

# javascript - 通过 JavaScript 生成表

> ID：11136249
> 
> 赞同：0
> 
> 时间：2012-06-21T10:32:20.550
> 
> 标签：javascript

我在 html5 中使用 SQLite，它运行良好。但问题是我在页面本身中显示的行看起来并不那么好。我使用 innerhtml 来显示用户插入的行。这是脚本

```
function showRecords() {

    results.innerHTML = '';
    // This function needs a single argument, which is a function that takes
    // care of actually executing the query
    db.transaction(function(tx) {
        tx.executeSql(selectAllStatement, [], function(tx, result) {
            dataset = result.rows;
            for ( var i = 0, item = null; i < dataset.length; i++) {
                item = dataset.item(i);
                results.innerHTML += '<li>' + item['lastName'] + ' , '
                                    + item['firstName']
                                    + ' <a href="#" onclick="loadRecord(' + i
                                    + ')">edit</a>  '
                                    + '<a href="#" onclick="deleteRecord(' + item['id']
                                    + ')">delete</a></li>';
            }
        });
    });
}

/**
 * Loads the record back to the form for updation
 * 
 * @param i
 */
function loadRecord(i) {
    var item = dataset.item(i);
    firstName.value = item['firstName'];
    lastName.value = item['lastName'];
    phone.value = item['phone'];
    id.value = item['id'];
}

/**
 * Delete a particular row from the database table with the specified Id
 * 
 * @param id
 */
function deleteRecord(id) {
    db.transaction(function(tx) {
        tx.executeSql(deleteStatement, [ id ], showRecords, onError);
    });
    resetForm();
} 
```

所以在代码`showRecords()`方法中，我对要显示的数据进行了硬编码。我想要的是，数据应该以适当的表格格式显示。我知道我必须在 JavaScript 中创建元素以生成动态表格，但我无法这样做，也无法在表格中显示内容。
每次用户填写表单并单击插入按钮时，插入语句都会被执行，然后`showRecords()`方法被调用。我无法找出正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:05:19.937

对于纯 JavaScript 解决方案，我认为这（未经测试）会起作用：

```
function loadRecord(i) {
    var item = dataset.item(i);
    firstName.value = item.firstName;
    lastName.value = item.lastName;
    phone.value = item.phone;
    id.value = item.id;
}
function showRecords() {
    results.innerHTML = '';
    // This function needs a single argument, which is a function that takes
    // care of actually executing the query
    db.transaction(function (tx) {
        var i = 0,
            table = document.createElement('table'),
            tbody = document.createElement('tbody');
        tx.executeSql(selectAllStatement, [], function (tx, result) {
            var tr = {},
                tdName = {},
                tdEdit = {},
                tdDel = {},
                span = {},
                aEdit = {},
                aDel = {};
            dataset = result.rows;
            for (i = 0, item = null; i < dataset.length; i += 1) {
                //create new table elements
                tr = document.createElement('tr');
                tdName = document.createElement('td');
                tdEdit = document.createElement('td');
                tdDel = document.createElement('td');
                aEdit = document.createElement('a');
                aDel = document.createElement('a');
                //grab dataset row
                item = dataset.item(i);
                //set the name
                tdName.innerText = item.lastName + ' , ' + item.firstName;
                //create the edit link
                aEdit.href = '#';
                aEdit.onclick = loadRecord(i);
                aEdit.innerText = ' edit ';
                tdEdit.appendChild(aEdit);
                //create the delete link
                aDel.href = '#';
                aDel.onclick = deleteRecord(item.id);
                aDel.innerText = ' delete ';
                tdDel.appendChild(aDel);
                //append to row
                tr.appendChild(tdName);
                tr.appendChild(tdEdit);
                tr.appendChild(tdDel);
                //append to body
                tbody.appendChild(tr);
            }
        });
        table.appendChild(tbody);
        results.innerHTML = table.outerHTML;
    });
}
/**
 * Delete a particular row from the database table with the specified Id
 * 
 * @param id
 */
function deleteRecord(id) {
    db.transaction(function (tx) {
        tx.executeSql(deleteStatement, [id], showRecords, onError);
    });
    resetForm();
} 
```

# css - 不能移动 朝着某个方向

> ID：11136254
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:32:44.620
> 
> 标签：css, twitter-bootstrap

**已编辑** 我正在使用 Twitter Bootstrap，需要向右移动导航栏（**不是浮动：向右，而是在某个值上向右移动**）。我可以向下移动它，但它不能正确移动。

我的导航的CSS：

```
.nav
{
top:1px;
border-bottom: 3px solid #c893c7;
padding-top:20px;
padding-bottom:16px;
} 
```

我的html：

```
 <div class="topbar">
<div class="navbar ">
     <div class="container">

    <a href="#" id="logo"> <img src="logo.png" alt="logo" width="258" height="130" /></a>

    <ul class="nav">                    
          <li><a href="#">Home</a></li>
          <li class="divider-vertical"></li>
          <li><a href="#about">Download</a></li>
          <li class="divider-vertical"></li>
          <li><a href="#contact">F.A.Q.</a></li>
          <li class="divider-vertical"></li>
          <li><a href="#contact">Support</a></li>        
        </ul>      
        </div>

    </div>

</div> 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:57:01.847

在您的导航类中添加浮动

```
.nav
{
top:1px;
border-bottom: 3px solid #c893c7;
padding-top:20px;
padding-bottom:16px;
float:right;
} 
```

[http://jsfiddle.net/rizwanabbasi/WmGpU/](http://jsfiddle.net/rizwanabbasi/WmGpU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:31:29.213

我不知道这个解决方案是否很好，但我只是将我的导航放在附加的 div 中并在其中添加了填充。

# sql-server - 在 SQL Server 和 SYBASE 中如何将 71632.0638353154 转换为 71,632.06？

> ID：11136255
> 
> 赞同：0
> 
> 时间：2012-06-21T10:32:47.227
> 
> 标签：sql-server, database, sybase

在这里，我有一个关于 SQL Server 和 SYBASE 数据转换的问题。

以71632.0638353154为例，在SQL Server和SYBASE中如何转换为71632.06？

我知道`convert()`SQL Server 和 SYBASE 中有一个函数，但是每次我尝试使用它来转换那个数字时，数据库 UI 都会抛出一个异常。

我使用 sybase UI 来执行下面的 SQL 实例：

```
select convert(varchar(30),convert(varchar(8),convert(money,71632.0638353154),1)) 
```

但这会导致此错误：

> 结果空间不足，无法将 MONEY 值 '71,632.06' 显式转换为 VARCHAR 字段。

有人会告诉我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:06:22.610

我无法在 Sybase 中进行测试，但是

```
SELECT CONVERT(VARCHAR(30), CAST(71632.0638353154 AS MONEY),1) 
```

在 SQL Server 中为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:17:12.337

更通用的解决方案是：

```
select cast(71632.0638353154 as decimal(10, 2)) 
```

cast 函数是标准 SQL，可在大多数数据库中使用。DECIMAL 是一种内置数据类型。

# iphone - iPhone sdk 工具提示

> ID：11136256
> 
> 赞同：0
> 
> 时间：2012-06-21T10:32:57.323
> 
> 标签：iphone, objective-c, ios, uitouch

我可以显示这样的工具提示：

![截屏](../Images/c75a80fbff5677654ff7055c7ac0603f.png)

另外，我想在按下并按住该区域时显示此工具提示。这个手势有处理程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:36:22.173

您可以在委托方法的`didSelectRowAtIndex`方法中做到这一点。`TableViewController`

看[这里](https://github.com/werner77/WEPopover)。最好在 iPhone 中安装 Popover 控制器。下载运行并集成到您的代码中，并根据您的要求进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:43:09.957

除了@jennis 所说的，确实有一种方法可以捕捉你可以使用的长按手势`UILongPressGestureRecognizer`

像这样

```
UILongPressGestureRecognizer *gesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longHold)];

[cell addGestureRecognizer:gesture]; 
```

和 longHold 方法

```
- (void) longHold
{
     //Cell has recieved gesture
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T11:14:07.847

它有效，我同意 Omar Abdelhafith

```
-(void)viewWillAppear:(BOOL)animated
{ //gesture declared in .h file
    gesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longHold)];
    [your view addGestureRecognizer:gesture];
}

-(void)longHlod
{
//do whatever you want
} 
```

# python - 下载 Torrent 文件并使用 urllib2 将其保存在用户定义的目录中？

> ID：11136259
> 
> 赞同：-4
> 
> 时间：2012-06-21T10:33:04.217
> 
> 标签：python, django

如何使用 urllib 2 下载 torrent 文件并将其保存在用户定义的目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:02:42.613

我建议不要使用 urllib2.urlopen 自己完成工作，而是使用 urllib.urlretrieve，因为这将在幕后完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:35:50.077

您想要下载种子文件并不重要。您可以通过这种方式下载和保存任何类型的文件：

```
import urllib2
with open("mytorrent", "w") as f:
  f.write(urllib2.urlopen('http://megatorrent.com/torrent-url').read()) 
```

来自的文件`http://megatorrent.com/torrent-url`将在当前目录中保存为`mytorrent`.

当您想将文件保存在其他目录中时，您可以执行以下操作：

```
import urllib2
with open(os.path.join(torrents_die_path, "mytorrent"), "w") as f :
  f.write(urllib2.urlopen('http://megatorrent.com/torrent-url').read()) 
```

# lua - 使用独立 Lua 的 Luad

> ID：11136265
> 
> 赞同：4
> 
> 时间：2012-06-21T10:33:32.983
> 
> 标签：lua, d, lua-api

编辑：这已被追踪到共享库、d 运行时和 os x 的一个更普遍的问题。请参阅此处：[在 OS X 上初始化 D 运行时](https://stackoverflow.com/questions/11170139/initializing-the-d-runtime-on-os-x)

我正在尝试从 Lua 独立解释器访问一个简单的 d 函数。

我看不到让 lua 实例识别广告库的直接明显方法，所以我尝试了这个 hack

```
import luad.all, luad.c.all;

extern (C) int luaopen_luad_test(lua_State* L) {
    auto lua = new LuaState(L);
    lua["addition"] = &addition;
    return(0);
}

int addition(int a, int b)
{
    return(a+b);
} 
```

我知道当我调用 require("luad_test") 时，它会调用 luaopen_luad_test(lua_State* L) 让我可以访问解释器的 lua_State。但是，当我调用 require 时，我只会遇到段错误。

我看这个完全错误的方式吗？

编辑：我在 os x 上使用 lua 5.1.5，我在 package.cpath 中添加了 ";?.dylib" 以允许加载 .dylib 而不是 .so

编辑2：我缩小了一点。在 luaopen_luad_test 中任何使用 new 都会导致段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:21:00.597

您必须初始化 D 运行时库。尝试以下操作：

```
import luad.all, luad.c.all;

extern (C) int luaopen_luad_test(lua_State* L) {
  Runtime.initialize();
  static __gshared LuaState lua = new LuaState(L);
  lua["addition"] = &addition;
  return(0);
} // luaopen_luad_test() C function

int addition(int a, int b) {
  return(a+b);
} // addition() function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T19:06:17.447

一种可能是您尚未设置 D 运行时并且 GC 未处于有效状态。

我从来没有使用过 luad （或没有提供主要功能的 D ），所以我可能会离开基地。

# c# - 您可以使用 System.Threading.Thread.CurrentThread 作为字典中的键吗

> ID：11136266
> 
> 赞同：0
> 
> 时间：2012-06-21T10:33:34.747
> 
> 标签：c#, thread-safety, weak-references

我目前正在尝试实现一个简约的 ThreadLocal 类。我知道这是在 DotNet 4 中实现的，但我处于无法升级的情况。

我的想法是使用一个非常简单的类，它包含一个弱哈希表，并且只存储基于当前线程的对象作为键。（我们有一个弱哈希表的自定义实现）

您认为这是一种可行的方法还是需要考虑任何线程问题？可以使用当前线程作为键，内存问题等吗？

```
public class SimpleThreadLocal<T>
{
    private readonly WeakHashtable _threadToValue;

    public SimpleThreadLocal()
    {
        _threadToValue = new WeakHashtable();
    }

    public void Set(T value)
    {
        lock (this)
        {
            _threadToValue[Thread.CurrentThread] = value;
        }
    }

    public T Get()
    {
        lock (this)
        {
            return (T) _threadToValue[Thread.CurrentThread];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:39:59.843

为什么不使用[`LogicalCallContext`](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.logicalcallcontext.setdata.aspx)？它不仅像 TLS 一样工作，而且实际上更智能，并且会将您的“TLS”插槽值保留在异步回调等中。请参阅[逻辑调用上下文：跨线程、应用程序域和进程的流动数据](http://www.wintellect.com/cs/blogs/jeffreyr/archive/2010/09/27/logical-call-context-flowing-data-across-threads-appdomains-and-processes.aspx)以及[ExecutionContext 与 SynchronizationContext](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)。

# eclipse-cdt - 远程调试时，如何访问目标上的源文件

> ID：11136272
> 
> 赞同：0
> 
> 时间：2012-06-21T10:34:03.560
> 
> 标签：eclipse-cdt, jit, gdbserver

我正在使用 CDT 远程调试应用程序。应用程序构造一个源片段并将其 JIT 到内存中。为了调试，它创建内存中的 ELF/DWARF 映像并将其注册到 GDB JIT 接口，并将与 DWARF 对应的源文件写入本地（目标）文件系统。

问题是调试器前端期望在主机文件系统上找到源文件。如果我在每个 JIT 事件之后手动将源文件从目标复制到主机，那么调试器可以单步执行源文件，但这是不切实际的。让 JIT 将文件上传到主机需要 JIT 知道它正在被调试（以及从哪里调试）。有没有办法让 gdbserver 或 CDT 在需要时从目标文件系统检索源文件？

我创建了传递给 GDB JIT 接口的 ELF/DWARF 图像，因此如果有帮助的话，我可以使用替代路径来描述源文件位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:23:23.930

gdbserver 协议已经支持[获取远程文件](http://sourceware.org/gdb/onlinedocs/gdb/File-Transfer.html#File-Transfer)。

诀窍是让 GDB 自动发出 fetch 命令以响应 JIT 事件。使用 Python 脚本很容易做到这一点。不幸的是，[JIT 事件似乎没有暴露给 Python](http://sourceware.org/gdb/onlinedocs/gdb/Events-In-Python.html#Events-In-Python)。

[我建议在GDB bugzilla](http://sourceware.org/bugzilla/enter_bug.cgi?product=gdb)中提交功能请求。

# wix - 如何在 WiX Icon.SourceFile 属性中引用 SystemFolder？

> ID：11136274
> 
> 赞同：0
> 
> 时间：2012-06-21T10:34:06.477
> 
> 标签：wix, wix3.5

长话短说，这是行不通的：

```
<Icon Id="msiexec.ico" SourceFile="[SystemFolder]msiexec.exe"/> 
```

（错误 4 系统找不到文件'[SystemFolder]msiexec.exe'）

这也不起作用：

```
<Icon Id="msiexec.ico" SourceFile="$(var.SystemFolder)msiexec.exe"/> 
```

错误 3 未定义的预处理器变量“$(var.SystemFolder)”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:07:24.540

如果您`var.SystemFolder`作为参数传递给`candle.exe`.

该`<Icon>`元素被映射到[Icon MSI 表](http://msdn.microsoft.com/library/aa369210.aspx)。**在构建时**，它会尝试查找您在`SourceFile`属性中指定的路径，并将其作为二进制数据流式传输到`Data`Icon 表的列。这意味着，在构建时应该知道路径。但这在您的第一个示例中并非如此 -`SystemFolder`在安装时解决。

# php - 无法访问 codeigniter 中的库函数

> ID：11136275
> 
> 赞同：0
> 
> 时间：2012-06-21T10:34:07.807
> 
> 标签：php, codeigniter

我是codeigniter的菜鸟。我使用外部类文件来获取音频文件的长度。我将文件放在应用程序/库目录中。在谷歌搜索和阅读文档之后，我尝试了两件事来访问我在 codeigniter 问题下提到的库函数。

**来自外部库文件的工作演示**

```
 require ('classAudioFile.php');
 $filename = "40f11852c2314cdf1d06308f07de3b1c.mp3";
 $AF = new AudioFile;
 $AF->loadFile($filename);
 echo $AF->wave_length; 
```

**CodeIgniter 问题**

```
 $filename = "./uploads/audio_files/347f21502e9b27fac4707b07c3c15eb7.mp3";
 $CI =& get_instance();
 $CI->load->library('AudioFile');
 $CI->AudioFile->loadFile($filename);

 $filename = "./uploads/audio_files/347f21502e9b27fac4707b07c3c15eb7.mp3";
 $this->load->library('AudioFile');
 $this->AudioFile->loadFile($filename); 
```

我**在第 149 行的 D:\wamp\www\webcartz\application\modules\playlist\controllers\admin.php 中的非对象上调用成员函数 loadFile()，这是实际错误。**. 任何机构都可以帮忙。我试图在控制器和视图文件中调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:06:07.817

要使一切正常化，请尝试以下操作：

1.  您放入库文件夹中`AudioFile.php`，使文件名全部小写，如`audiofile.php`. 如果它被调用`classAudioFile.php`，将其重命名为`audiofile.php`
2.  检查. `AudioFile`_`audiofile.php`
3.  将`AudioFile`in更改`load->library`为全部小写
4.  将`AudioFile`in更改`$this->AudioFile->`为全部小写
5.  如果它仍然不起作用，请将类（不是文件）的名称更改为`Audiofile`、大写 A、小写 f。

此外，类中应该有一个默认的无参数构造函数`Audiofile`。像这样：

```
public function __construct()
{
    // you can put some code here if you want
} 
```

# drupal-7 - css 文章布局和 php 获取字段

> ID：11136277
> 
> 赞同：0
> 
> 时间：2012-06-21T10:34:17.120
> 
> 标签：drupal-7

我会在 drupal 中插入一些自定义文章。那每一篇文章，我决定的一些领域。然后我想用 CSS 的图形集来显示这些文章。所以我会在每篇文章中使用 php.ini 的字段。

如何发布将图形设置为 css 的文章？以及如何获取 php 变量？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:34:21.363

从您对我的评论的回答看来，您想编辑文章内容类型，然后对结果页面进行“主题化”。

您可以在管理员的“内容类型”中将字段添加到任何内容类型（或添加新的内容类型）。选择您想要的类型（文章），然后单击“管理字段”。在这里，您可以添加任意数量的字段或您喜欢的任何类型。每个字段都将被赋予一个机器名称、小部件，并且将有一个向导解释所有相关选项。

添加所有字段后，单击“管理显示”以更改字段显示的顺序和方式。

要将模板添加到您的主题，请在您的主题文件夹中创建一个名为“模板”的文件夹。然后`node.tpl.php`从 root/modules/node/ 复制到这个新文件夹。将复制的文件重命名为`node--machine_name.tpl.php`. 因此，对于内容类型“文章”，您可以将文件更改为`node--article.tpl.php`.

清除您的缓存（管理员/配置/开发/性能），该内容类型将使用该新模板。默认情况下，这行代码将显示所有字段`print render($content);`如果您注释掉该行，您可以单独显示字段，但获取字段机器名称并执行`<?php print render($content['field_page_image']); ?>`

阅读 Drupal 主题，那里有很多好的文档。

# c# - 在 C# 中的 winforms webbrowser 控件上拖放事件

> ID：11136282
> 
> 赞同：3
> 
> 时间：2012-06-21T10:34:56.973
> 
> 标签：c#, winforms, webbrowser-control

在 winforms 应用程序中，我想开始将表格拖到 winforms 浏览器控件中。

我无法注册 drapenter 和拖放事件，因为这给了我一个 NotSupported 异常。但是，如果我将 AllowDrop 设置为 True 并将文件拖到 webbrowser 控件中，它将导航到该文件。因此，代码中的某处似乎支持拖动。我希望能够获得任何拖动输入/拖放事件并在我的 C# 代码中读取它。

做这个的最好方式是什么？

我已经尝试使用此处提供的建议（http://stackoverflow.com/questions/1361007/implementing-drag-and-drop-functionality-webbrowser-control-winforms-c-sharp），但我的目标是不叫。

最好的方法是什么？我错过了什么或应该阅读什么？

# ios - 导航控制器内的标签栏控制器，如何将新的视图控制器推送到标签控制器？

> ID：11136283
> 
> 赞同：0
> 
> 时间：2012-06-21T10:34:57.547
> 
> 标签：ios, uitabbarcontroller, uitabbar

设计要求：

1.  显示用户可以选择的项目列表
2.  选择一个项目后，使用后退按钮将用户带到一个新视图。新视图应在底部包含第一个屏幕中不存在的选项卡列表
3.  单击选项卡中的项目时，应出现一个带有后退按钮的新屏幕，并且选项卡仍应在底部可见。
4.  单击选项卡应使用户将层次结构备份到#2。不是第一个屏幕。

我尝试了以下结构：

*   `UINavigationController`
*   `UIViewController`与`UITableView`
*   `UIViewController`与`UITabBar`（如这里[http://www.wiredbob.com/2009/04/iphone-tweetie-style-navigation.html](http://www.wiredbob.com/2009/04/iphone-tweetie-style-navigation.html)）

并且

*   `UINavigationController`
*   `UIViewController`与`UITableView`
*   `UITabbarController`

这两种情况都可以很好地显示`UITabBar`，但是当我单击其中一个选项卡中的一个项目并推送一个新`UIViewController`的 时，底部的选项卡就会消失。我希望标签保留`UIViewControllers`在`UITabBarController`.

一个相关的问题是this one，但它不处理标签内推送视图控制器的问题： [导航控制器内的标签栏控制器，或共享导航根视图](https://stackoverflow.com/questions/576764/tab-bar-controller-inside-a-navigation-controller-or-sharing-a-navigation-root?lq=1)

我是否需要将 rootcontroller 更改为`UITabController`? 有人真正实现了这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:39:04.013

这是正确的结构：

```
UITabBarcontroller (UIWindow's rootViewController)
->UINavigationController (first tab)
-->UIViewController
->UINavigationController (second tab)
-->UIViewController 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:43:50.220

听起来您想更改视图层次结构的布局以适应您的要求。你应该这样展示你的视图控制器：

UITabBarController -> UINavigationController -> UIViewController

在您的应用程序委托中，您可以使用以下方式以编程方式实现此功能：

```
UIViewController *viewControllerOne = [[[UIViewController alloc] init] autorelease];
UINavigationController *navigationControllerOne = [[[UINavigationController alloc] initWithRootViewController:viewControllerOne] autorelease];

UIViewController *viewControllerTwo = [[[UIViewController alloc] init] autorelease];
UINavigationController *navigationControllerTwo = [[[UINavigationController alloc] initWithRootViewController:viewControllerTwo] autorelease];

UITabBarController *tabBarController = [[[UITabBarController alloc] init] autorelease];

[tabBarController setViewControllers:[NSArray arrayWithObjects:navigationControllerOne, navigationControllerTwo, nil]];

[[self window] setRootViewController:tabBarController] 
```

我没有检查上面的内容，它只是从内存中写的，但应该做你需要的例子。

使用这种格式，您可以将任何其他视图控制器推送到导航控制器堆栈，而不会消失您的标签栏。

如果您想在不将选项卡栏控制器作为根视图控制器的情况下推送此视图层次结构，只需推送选项卡栏控制器而不是将其设置为应用程序委托中的根视图控制器。

希望有帮助！

# c# - 阅读 2010 Word 文件

> ID：11136285
> 
> 赞同：0
> 
> 时间：2012-06-21T10:35:05.917
> 
> 标签：c#, asp.net, interop, ms-word

我添加了对`Microsoft.Office.Interop.Word 12.0.0.0`. 我有 Visual Studio 2008 和 Microsoft Word 2010(Starter)。

```
string filePath = @"C:\PP.docx";
Microsoft.Office.Interop.Word.Application word = new Microsoft.Office.Interop.Word.ApplicationClass();

// create object of missing value
object miss = System.Reflection.Missing.Value;

// create object of selected file path 
object path = filePath;

// set file path mode 
object readOnly = false;

// open document                 
Microsoft.Office.Interop.Word.Document docs = word.Documents.Open(ref path, ref miss, ref readOnly, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss);

// select whole data from active window document
docs.ActiveWindow.Selection.WholeStory();

// handover the data to cllipboard 
docs.ActiveWindow.Selection.Copy();

// clipboard create reference of idataobject interface which transfer the data
System.Windows.Forms.IDataObject data = Clipboard.GetDataObject(); 
```

我收到下面提到的错误：

> 由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154\. at Microsoft.Office.Interop.Word.Application word => new Microsoft.Office.Interop.Word .ApplicationClass();

谢谢，萨钦K

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:29:56.953

Office Starter 2010 版本受到限制，不支持自动化。

您需要获得适当的完整 Office 套件（例如专业版）。

有关限制的更多信息，请参阅[http://www.microsoft.com/oem/en/products/office/pages/office_2010_starter.aspx](http://www.microsoft.com/oem/en/products/office/pages/office_2010_starter.aspx)

# html - CSS浮动空格

> ID：11136286
> 
> 赞同：5
> 
> 时间：2012-06-21T10:35:06.743
> 
> 标签：html, css

我在一个包装中有多个 div，它们有不同的高度。我想向左飘。2 个 div 可以排成一排。但是由于每个 div 都有不同的高度，所以下一行还有很多奇怪的空间。我可以删除空间并将 div 向上移动吗？

请看图片：

**这是代码：**

```
<div class="wrap">
    <div class="box1">Box1 with less height.</div>
    <div class="box2">Box2 with more height.</div>
    <div class="box3">Box3 with whatever height.</div>
</div> 
```

**CSS：**

```
.wrap{
    width:410px;
    border:1px solid red;
    overflow:hidden;
}

.box1{
    width:200px;
    height:50px;
    float:left;
    border:1px solid green;
}

.box2{
    width:200px;
    height:150px;
    float:left;
    border:1px solid blue;
}

.box3{
    width:200px;
    height:250px;
    float:left;
    border:1px solid blue;
} 
```

**JSFiddle：http:** [//jsfiddle.net/NsH5M/](http://jsfiddle.net/NsH5M/)

PS。div 高度不固定。这只是一个例子。 **编辑：对不起，我应该提到它无法编辑标记。**

![在此处输入图像描述](../Images/ebeab612034dc318bd8c4d084ed64088.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T10:41:44.480

尝试使用[砖石](http://masonry.desandro.com/)。这应该可以帮助您安排没有空白空间的 div。

这就是它用作代码示例的方式：[jsfiddle](http://jsfiddle.net/NsH5M/123/)（2018 年 11 月更新）

HTML：

```
<div class="wrap">
    <div class="box box1">Box1 with less height.</div>
    <div class="box box2">Box2 with more height.</div>
    <div class="box box3">Box3 with whatever height.</div>
</div> 
```

JavaScript：

```
$(function(){
  $('.wrap').masonry({
      // options
    itemSelector : '.box'
  });
});​
​ 
```

和 CSS：

```
.wrap{
    width:410px;
    border:1px solid red;
    overflow:hidden;

}

.box{
    float: left;
    width: 200px;
}

.box1{
    height:50px;
    border:1px solid green;
}

.box2{
    height:150px;
    border:1px solid blue;
}

.box3{
    height:250px;
    border:1px solid blue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:39:30.300

只需将 float:right 用于右侧所需的元素。在这种情况下：

```
.box2{
width:200px;
height:150px;
float:right;
border:1px solid blue;
} 
```

您的 jsfiddle 已[在此处更新](http://jsfiddle.net/Rorok_89/NsH5M/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:38:00.043

像`float:right`这样`.box2`写：

```
.box2{
    width:200px;
    height:150px;
    float:right;
    border:1px solid blue;
} 
```

检查这个[http://jsfiddle.net/NsH5M/2/](http://jsfiddle.net/NsH5M/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T10:37:07.253

我不确定它是否可行，但您可以尝试将框 1 和框 3 浮动到左侧以及框 2 到右侧

编辑：在 Firefox [http://jsfiddle.net/NsH5M/1/中工作](http://jsfiddle.net/NsH5M/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T10:38:15.783

如果您可以编辑标记，则可以将 box1 和 box3 包装在浮动的容器中：

[http://jsfiddle.net/NsH5M/3/](http://jsfiddle.net/NsH5M/3/)

您也可以 float: right your box3 但这会稍微改变结果（左侧浮动的框与右侧浮动的框之间会有间隙 - 根据您的设计，这可能不是问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T11:01:23.653

[同位素](http://isotope.metafizzy.co/)可以为您做到这一点，使用砖石布局。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-07T00:08:21.327

正确的解决方案......关键问题是“你只有 2 列吗？”。既然是这种情况，正确的解决方案是：

（这是一个 jQuery 代码，但显然如果在纯 JS 中再多几个字就可以完成）

我的案例类“add-info”被分配给容器中的所有元素。您所做的只是检查下一个元素是否应该向左或向右浮动。不要对所有事情都使用复杂的脚本。一半的人通过手机访问网络，移动数据量有限。

```
function contactFloats() {
    var leftCounter = 0;
    var rightCounter = 0;
    $('.add-info').each(function(){
            if(leftCounter <= rightCounter){
                $(this).css('float', 'left');
                leftCounter += $(this).outerHeight();
            }else{
                $(this).css('float', 'right');
                rightCounter += $(this).outerHeight();
            }
    });
} 
```

# google-analytics - 在 Android 中使用 Robolectric 和 Google Analytics

> ID：11136287
> 
> 赞同：1
> 
> 时间：2012-06-21T10:35:15.367
> 
> 标签：google-analytics, robolectric

我只是在针对使用[GoogleAnalytics 1.4.2](https://developers.google.com/analytics/devguides/collection/android/resources)的 Android 应用程序试验 Robolectric 1.1 。

在每次调用 GoogleAnalyticsTracker trackPageView Robolectrics ShadowSQLiteDatabase 类时都会引发异常

```
java.lang.IllegalStateException: transaction already successfully
    at com.xtremelabs.robolectric.shadows.ShadowSQLiteDatabase.setTransactionSuccessful(ShadowSQLiteDatabase.java:291)
    at android.database.sqlite.SQLiteDatabase.setTransactionSuccessful(SQLiteDatabase.java)
    at com.google.android.apps.analytics.PersistentHitStore.putEvent(Unknown Source)
    at com.google.android.apps.analytics.GoogleAnalyticsTracker.createEvent(Unknown Source)
    at com.google.android.apps.analytics.GoogleAnalyticsTracker.trackPageView(Unknown Source)
    at uk.co.bmc.rad.util.Analytics.trackPageView(Analytics.java:78)
    at uk.co.bmc.rad.ui.FindCragActivity.onCreate(FindCragActivity.java:95)
    at uk.co.bmc.rad.roboelectric.activities.FindCragActivityTests.setUp(FindCragActivityTests.java:36)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

该应用程序运行良好，如果我注释掉对 GoogleAnalyticsTracker 的调用，那么测试也运行良好。

我的设置中是否缺少某些内容或...

# php - pdo和mysqli之间的混淆

> ID：11136288
> 
> 赞同：-3
> 
> 时间：2012-06-21T10:35:23.327
> 
> 标签：php, mysql, pdo, mysqli

我在 stackoverflow 中阅读了很多线程，也用谷歌搜索过，但我仍然有一个困惑

请告诉我，如果我有以下内容，哪个对我更好

数据库：MYSQL

1.  大约 10 个表中的 10 000 条记录
2.  100张桌子
3.  每秒 100 个请求

我想制作将来可能会出现上述细节的网站

如果有 100 个用户同时查看我的网站，这将是最好的 PDO 或 mysqli

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:50:53.987

PHP 手册中的[选择 API章节是这样说的：](http://es.php.net/manual/en/mysqlinfo.api.choosing.php)

> 所有三个扩展的整体性能被认为是大致相同的。尽管扩展的性能只占 PHP Web 请求总运行时间的一小部分。通常，影响低至 0.1%。

总结一下：如果性能是您唯一关心的问题，那么您选择哪一个都无关紧要。（更不用说数据库大小或复杂性基本上是 MySQL Server 的问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:08:14.077

在我看来，PDO 比 mysqli 更好，毫无疑问。支持另一个数据库，命名参数，更简单的 SQL 注入安全性（使用准备好的语句）。

Mysqli 稍微快一点，但我认为在这种情况下它不是主要原因。

# php - 检测用户是否退出聊天

> ID：11136289
> 
> 赞同：3
> 
> 时间：2012-06-21T10:35:37.300
> 
> 标签：php, javascript, ajax, jquery

我在 PHP/Ajax/MySQL 中制作了一个简单的聊天应用程序。

我经常调用这两种方法-

```
setInterval("GetChatParticipants()",5000);
setInterval("GetChatMessages()",1000); 
```

现在根据客户端设计，没有注销或注销按钮，所以我想检测用户何时关闭浏览器，那时我必须从数据库中删除参与者记录。我不想使用`onbeforeunload`Chrome 拒绝接受有关窗口卸载事件的 Ajax 请求。

所以我正在考虑通过重复请求在 Ajax 中实现。但问题是我该怎么做。我是否应该更新 Participant 表，`last_active_time`如果当前时间与`last_active_time`也就是说，超过 10 分钟，那么我应该删除用户吗？这是一个实用的解决方案还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:41:53.950

是的，它是实用的解决方案，然后只有一个您可以依赖，因此，无论您使用什么其他方法，最后的检查都应该始终在您的逻辑中。也就是说，结合几种方法将为您提供更多检测用户提前离开的可能性。添加`onbeforeunload`支持它的浏览器。为来自不安全位置的客户添加“注销”按钮，这些客户想要在离开 PC 时立即注销，最后检查是否处于不活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:44:09.493

你有最好的解决方案 IMO。在 Javascript 中创建一个“ping”函数，该函数每分钟/两分钟 ping 一次，并使用该浏览器/会话唯一的会话 ID。在您的服务器上有一个会话表，并在您收到 ping 时更新。使用另一个脚本来查找长时间没有被 ping 过的条目并关闭会话。

我已经在一个站点上为数千个并发用户运行了这个结构，当负载变得很重时，我不得不将 ping 从 1 分钟降低到每 2 分钟（在运行站点的其余部分时，这是在 2 个负载平衡的服务器上）也）。显然你让你的 ping 大约 45% 的超时时间（所以如果一个失败，第二个应该命中）。这是一个可以处理负载的简单过程。

* * *

编辑：不要对 ping 使用“setInterval”，而是在每个 ping 返回或失败时使用“setTimeout”。否则，使用 setInterval，如果您的服务器负载过大，则 pings 队列，永远不会响应并排队更多。由于使用了所有服务器套接字，因此服务器崩溃了，然后您无法通过 ssh 连接来修复它……这不是我引以为豪的时刻。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:50:49.627

是的，这是实用的解决方案。唯一的区别是在哪里存储有关用户 ping 的信息。[您可以在数据库中或在memcached](http://php.net/manual/en/book.memcached.php)等键值存储中执行此操作。我更喜欢第二个，因为我认为它需要更少的资源。

# c# - 通过 Windows 服务检查批处理文件是否正在执行

> ID：11136293
> 
> 赞同：0
> 
> 时间：2012-06-21T10:35:55.553
> 
> 标签：c#, windows-services, scheduled-tasks

我有一个场景，我必须创建一个 Windows 服务，它可以定期检查批处理文件，如果该文件没有执行，那么服务应该开始执行相同的操作。如果它正在执行中，那么什么也不做。

目前我正在使用计划任务执行此操作，但是计划任务有一个限制，我必须猜测我的批处理文件的预期执行时间并相应地设置计划任务。

我希望我的服务每隔 5 分钟检查一次批处理文件的执行，如果文件没有执行，那么它应该开始执行批处理文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:34:50.583

您可以更改批处理文件，以便它在启动时创建一个文件，并在完成后删除相同的文件。

该服务可以简单地检查文件是否存在。

在服务中：

```
while(_running)
{
    if(!File.Exists("..."))
    { 
        // start batch job
    }
    Thread.Sleep(5 * 60 * 1000);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T15:35:30.540

这是一个可以做的例子：

```
@echo off

color 1F

@sc query >%COMPUTERNAME%_START.TXT

ECHO REPORT MISSING INSTALL SERVICES >%COMPUTERNAME%.TXT

find /I "AcPrfMgrSvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "AcPrfMgrSvc"

IF ERRORLEVEL 1 REG IMPORT REG\AcPrfMgrSvc.REG >>%COMPUTERNAME%.TXT && ECHO AcPrfMgrSvc >>%COMPUTERNAME%.TXT

find /I "AcSvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "AcSvc"

IF ERRORLEVEL 1 REG IMPORT REG\AcSvc.REG >>%COMPUTERNAME%.TXT && ECHO AcSvc >>%COMPUTERNAME%.TXT

find /I "AudioSrv" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "AudioSrv"

IF ERRORLEVEL 1 REG IMPORT REG\AudioSrv.REG >>%COMPUTERNAME%.TXT && ECHO AudioSrv >>%COMPUTERNAME%.TXT

find /I "BITS" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "BITS"

IF ERRORLEVEL 1 REG IMPORT REG\BITS.REG >>%COMPUTERNAME%.TXT && ECHO BITS >>%COMPUTERNAME%.TXT

find /I "btwdins" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "btwdins"

IF ERRORLEVEL 1 REG IMPORT REG\btwdins.REG >>%COMPUTERNAME%.TXT && ECHO btwdins >>%COMPUTERNAME%.TXT

find /I "CcmExec" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "CcmExec"

IF ERRORLEVEL 1 REG IMPORT REG\CcmExec.REG >>%COMPUTERNAME%.TXT && ECHO CcmExec >>%COMPUTERNAME%.TXT

find /I "CryptSvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "CryptSvc"

IF ERRORLEVEL 1 REG IMPORT REG\CryptSvc.REG >>%COMPUTERNAME%.TXT && ECHO CryptSvc >>%COMPUTERNAME%.TXT

find /I "DcomLaunch" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "DcomLaunch"

IF ERRORLEVEL 1 REG IMPORT REG\DcomLaunch.REG >>%COMPUTERNAME%.TXT && ECHO DcomLaunch >>%COMPUTERNAME%.TXT

find /I "Dhcp" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Dhcp"

IF ERRORLEVEL 1 REG IMPORT REG\Dhcp.REG >>%COMPUTERNAME%.TXT && ECHO Dhcp >>%COMPUTERNAME%.TXT

find /I "dmserver" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "dmserver"

IF ERRORLEVEL 1 REG IMPORT REG\dmserver.REG >>%COMPUTERNAME%.TXT && ECHO dmserver >>%COMPUTERNAME%.TXT

find /I "Dnscache" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Dnscache"

IF ERRORLEVEL 1 REG IMPORT REG\Dnscache.REG >>%COMPUTERNAME%.TXT && ECHO Dnscache >>%COMPUTERNAME%.TXT

find /I "DozeSvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "DozeSvc"

IF ERRORLEVEL 1 REG IMPORT REG\DozeSvc.REG >>%COMPUTERNAME%.TXT && ECHO DozeSvc >>%COMPUTERNAME%.TXT

find /I "EEPROMService" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "EEPROMService"

IF ERRORLEVEL 1 REG IMPORT REG\EEPROMService.REG >>%COMPUTERNAME%.TXT && ECHO EEPROMService >>%COMPUTERNAME%.TXT

find /I "enterceptAgent" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "enterceptAgent"

IF ERRORLEVEL 1 REG IMPORT REG\enterceptAgent.REG >>%COMPUTERNAME%.TXT && ECHO enterceptAgent >>%COMPUTERNAME%.TXT 

find /I "Eventlog" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Eventlog"

IF ERRORLEVEL 1 REG IMPORT REG\Eventlog.REG >>%COMPUTERNAME%.TXT && ECHO Eventlog >>%COMPUTERNAME%.TXT

find /I "EventSystem" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "EventSystem"

IF ERRORLEVEL 1 REG IMPORT REG\EventSystem.REG >>%COMPUTERNAME%.TXT && ECHO EventSystem >>%COMPUTERNAME%.TXT

find /I "EvtEng" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "EvtEng"

IF ERRORLEVEL 1 REG IMPORT REG\EvtEng.REG >>%COMPUTERNAME%.TXT && ECHO EvtEng >>%COMPUTERNAME%.TXT

find /I "FontCache3.0.0.0" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "FontCache3.0.0.0"

IF ERRORLEVEL 1 REG IMPORT REG\FontCache3.REG >>%COMPUTERNAME%.TXT && ECHO FontCache3.0.0.0 >>%COMPUTERNAME%.TXT

find /I "helpsvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "helpsvc"

IF ERRORLEVEL 1 REG IMPORT REG\helpsvc.REG >>%COMPUTERNAME%.TXT && ECHO helpsvc >>%COMPUTERNAME%.TXT

find /I "hips" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "hips"

IF ERRORLEVEL 1 REG IMPORT REG\hips.REG >>%COMPUTERNAME%.TXT && ECHO hips >>%COMPUTERNAME%.TXT

find /I "IBMPMSVC" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "IBMPMSVC"

IF ERRORLEVEL 1 REG IMPORT REG\IBMPMSVC.REG >>%COMPUTERNAME%.TXT && ECHO IBMPMSVC >>%COMPUTERNAME%.TXT

find /I "IviRegMgr" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "IviRegMgr"

IF ERRORLEVEL 1 REG IMPORT REG\IviRegMgr.REG >>%COMPUTERNAME%.TXT && ECHO IviRegMgr >>%COMPUTERNAME%.TXT

find /I "JavaQuickStarterService" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "JavaQuickStarterService"

IF ERRORLEVEL 1 REG IMPORT REG\JavaQuickStarterService.REG >>%COMPUTERNAME%.TXT && ECHO JavaQuickStarterService >>%COMPUTERNAME%.TXT

find /I "LanmanServer" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "LanmanServer"

IF ERRORLEVEL 1 REG IMPORT REG\LanmanServer.REG >>%COMPUTERNAME%.TXT && ECHO LanmanServer >>%COMPUTERNAME%.TXT

find /I "lanmanworkstation" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "lanmanworkstation"

IF ERRORLEVEL 1 REG IMPORT REG\lanmanworkstation.REG >>%COMPUTERNAME%.TXT && ECHO lanmanworkstation >>%COMPUTERNAME%.TXT

find /I "LmHosts" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "LmHosts"

IF ERRORLEVEL 1 REG IMPORT REG\LmHosts.REG >>%COMPUTERNAME%.TXT && ECHO LmHosts >>%COMPUTERNAME%.TXT

find /I "LucentIKE" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "LucentIKE"

IF ERRORLEVEL 1 REG IMPORT REG\LucentIKE.REG >>%COMPUTERNAME%.TXT && ECHO LucentIKE >>%COMPUTERNAME%.TXT

find /I "McAfeeFramework" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "McAfeeFramework"

IF ERRORLEVEL 1 REG IMPORT REG\McAfeeFramework.REG >>%COMPUTERNAME%.TXT && ECHO McAfeeFramework >>%COMPUTERNAME%.TXT

find /I "McShield" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "McShield"

IF ERRORLEVEL 1 REG IMPORT REG\McShield.REG >>%COMPUTERNAME%.TXT && ECHO McShield >>%COMPUTERNAME%.TXT

find /I "McTaskManager" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "McTaskManager"

IF ERRORLEVEL 1 REG IMPORT REG\McTaskManager.REG >>%COMPUTERNAME%.TXT && ECHO McTaskManager >>%COMPUTERNAME%.TXT

find /I "MDM" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "MDM"

IF ERRORLEVEL 1 REG IMPORT REG\MDM.REG >>%COMPUTERNAME%.TXT && ECHO MDM >>%COMPUTERNAME%.TXT

find /I "Messenger" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Messenger"

IF ERRORLEVEL 1 REG IMPORT REG\Messenger.REG >>%COMPUTERNAME%.TXT && ECHO Messenger >>%COMPUTERNAME%.TXT

find /I "mfevtp" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "mfevtp"

IF ERRORLEVEL 1 REG IMPORT REG\mfevtp.REG >>%COMPUTERNAME%.TXT && ECHO mfevtp >>%COMPUTERNAME%.TXT

find /I "MSIServer" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "MSIServer"

IF ERRORLEVEL 1 REG IMPORT REG\MSIServer.REG >>%COMPUTERNAME%.TXT && ECHO MSIServer >>%COMPUTERNAME%.TXT

find /I "Net Driver HPZ12" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Net Driver HPZ12"

IF ERRORLEVEL 1 REG IMPORT REG\Net_Driver_HPZ12.REG >>%COMPUTERNAME%.TXT && ECHO Net Driver HPZ12 >>%COMPUTERNAME%.TXT

find /I "Netlogon" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Netlogon"

IF ERRORLEVEL 1 REG IMPORT REG\Netlogon.REG >>%COMPUTERNAME%.TXT && ECHO Netlogon >>%COMPUTERNAME%.TXT

find /I "Netman" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Netman"

IF ERRORLEVEL 1 REG IMPORT REG\Netman.REG >>%COMPUTERNAME%.TXT && ECHO Netman >>%COMPUTERNAME%.TXT

find /I "Nla" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Nla"

IF ERRORLEVEL 1 REG IMPORT REG\Nla.REG >>%COMPUTERNAME%.TXT && ECHO Nla >>%COMPUTERNAME%.TXT

find /I "NMSAccess" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "NMSAccess"

IF ERRORLEVEL 1 REG IMPORT REG\NMSAccess.REG >>%COMPUTERNAME%.TXT && ECHO NMSAccess >>%COMPUTERNAME%.TXT

find /I "PlugPlay" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "PlugPlay"

IF ERRORLEVEL 1 REG IMPORT REG\PlugPlay.REG >>%COMPUTERNAME%.TXT && ECHO PlugPlay >>%COMPUTERNAME%.TXT

find /I "Pml Driver HPZ12" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Pml Driver HPZ12"

IF ERRORLEVEL 1 REG IMPORT REG\Pml_Driver_HPZ12.REG >>%COMPUTERNAME%.TXT && ECHO Pml Driver HPZ12 >>%COMPUTERNAME%.TXT

find /I "PolicyAgent" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "PolicyAgent"

IF ERRORLEVEL 1 REG IMPORT REG\PolicyAgent.REG >>%COMPUTERNAME%.TXT && ECHO PolicyAgent >>%COMPUTERNAME%.TXT

find /I "Power Manager DBC Service" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Power Manager DBC Service"

IF ERRORLEVEL 1 REG IMPORT REG\Power.REG >>%COMPUTERNAME%.TXT && ECHO Power Manager DBC Service >>%COMPUTERNAME%.TXT

find /I "ProtectedStorage" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "ProtectedStorage"

IF ERRORLEVEL 1 REG IMPORT REG\ProtectedStorage.REG >>%COMPUTERNAME%.TXT && ECHO ProtectedStorage >>%COMPUTERNAME%.TXT

find /I "RasMan" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "RasMan"

IF ERRORLEVEL 1 REG IMPORT REG\RasMan.REG >>%COMPUTERNAME%.TXT && ECHO RasMan >>%COMPUTERNAME%.TXT

find /I "RegSrvc" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "RegSrvc"

IF ERRORLEVEL 1 REG IMPORT REG\RegSrvc.REG >>%COMPUTERNAME%.TXT && ECHO RegSrvc >>%COMPUTERNAME%.TXT

find /I "RemoteRegistry" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "RemoteRegistry"

IF ERRORLEVEL 1 REG IMPORT REG\RemoteRegistry.REG >>%COMPUTERNAME%.TXT && ECHO RemoteRegistry >>%COMPUTERNAME%.TXT

find /I "RpcSs" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "RpcSs"

IF ERRORLEVEL 1 REG IMPORT REG\RpcSs.REG >>%COMPUTERNAME%.TXT && ECHO RpcSs >>%COMPUTERNAME%.TXT

find /I "S24EventMonitor" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "S24EventMonitor"

IF ERRORLEVEL 1 REG IMPORT REG\S24EventMonitor.REG >>%COMPUTERNAME%.TXT && ECHO S24EventMonitor >>%COMPUTERNAME%.TXT

find /I "SamSs" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "SamSs"

IF ERRORLEVEL 1 REG IMPORT REG\SamSs.REG >>%COMPUTERNAME%.TXT && ECHO SamSs >>%COMPUTERNAME%.TXT

find /I "Schedule" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Schedule"

IF ERRORLEVEL 1 REG IMPORT REG\Schedule.REG >>%COMPUTERNAME%.TXT && ECHO Schedule >>%COMPUTERNAME%.TXT

find /I "SENS" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "SENS"

IF ERRORLEVEL 1 REG IMPORT REG\SENS.REG >>%COMPUTERNAME%.TXT && ECHO SENS >>%COMPUTERNAME%.TXT

find /I "ShellHWDetection" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "ShellHWDetection"

IF ERRORLEVEL 1 REG IMPORT REG\ShellHWDetection.REG >>%COMPUTERNAME%.TXT && ECHO ShellHWDetection >>%COMPUTERNAME%.TXT

find /I "Spooler" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Spooler"

IF ERRORLEVEL 1 REG IMPORT REG\Spooler.REG >>%COMPUTERNAME%.TXT && ECHO Spooler >>%COMPUTERNAME%.TXT

find /I "srservice" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "srservice"

IF ERRORLEVEL 1 REG IMPORT REG\srservice.REG >>%COMPUTERNAME%.TXT && ECHO srservice >>%COMPUTERNAME%.TXT

find /I "TapiSrv" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "TapiSrv"

IF ERRORLEVEL 1 REG IMPORT REG\TapiSrv.REG >>%COMPUTERNAME%.TXT && ECHO TapiSrv >>%COMPUTERNAME%.TXT

find /I "TermService" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "TermService"

IF ERRORLEVEL 1 REG IMPORT REG\TermService.REG >>%COMPUTERNAME%.TXT && ECHO TermService >>%COMPUTERNAME%.TXT

find /I "Themes" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "Themes"

IF ERRORLEVEL 1 REG IMPORT REG\Themes.REG >>%COMPUTERNAME%.TXT && ECHO Themes >>%COMPUTERNAME%.TXT

find /I "TPHKLOAD" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "TPHKLOAD"

IF ERRORLEVEL 1 REG IMPORT REG\TPHKLOAD.REG >>%COMPUTERNAME%.TXT && ECHO TPHKLOAD >>%COMPUTERNAME%.TXT

find /I "TPHKSVC" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "TPHKSVC"

IF ERRORLEVEL 1 REG IMPORT REG\TPHKSVC.REG >>%COMPUTERNAME%.TXT && ECHO TPHKSVC >>%COMPUTERNAME%.TXT

find /I "TpKmpSVC" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "TpKmpSVC"

IF ERRORLEVEL 1 REG IMPORT REG\TpKmpSVC.REG >>%COMPUTERNAME%.TXT && ECHO TpKmpSVC >>%COMPUTERNAME%.TXT

find /I "UPHClean" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "UPHClean"

IF ERRORLEVEL 1 REG IMPORT REG\UPHClean.REG >>%COMPUTERNAME%.TXT && ECHO UPHClean >>%COMPUTERNAME%.TXT

find /I "W32Time" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "W32Time"

IF ERRORLEVEL 1 REG IMPORT REG\W32Time.REG >>%COMPUTERNAME%.TXT && ECHO W32Time >>%COMPUTERNAME%.TXT

find /I "winmgmt" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "winmgmt"

IF ERRORLEVEL 1 REG IMPORT REG\winmgmt.REG >>%COMPUTERNAME%.TXT && ECHO winmgmt >>%COMPUTERNAME%.TXT

find /I "WSearch" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "WSearch"

IF ERRORLEVEL 1 REG IMPORT REG\WSearch.REG >>%COMPUTERNAME%.TXT && ECHO WSearch >>%COMPUTERNAME%.TXT

find /I "wuauserv" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "wuauserv"

IF ERRORLEVEL 1 REG IMPORT REG\wuauserv.REG >>%COMPUTERNAME%.TXT && ECHO wuauserv >>%COMPUTERNAME%.TXT

find /I "WZCSVC" %COMPUTERNAME%_START.TXT >nul

IF ERRORLEVEL 1 NET START "WZCSVC"

IF ERRORLEVEL 1 REG IMPORT REG\WZCSVC.REG >>%COMPUTERNAME%.TXT && ECHO WZCSVC >>%COMPUTERNAME%.TXT

START /max NOTEPAD.EXE %COMPUTERNAME%.TXT

START cmd /c shutdown -R -t 60 -c "REDEMARRAGE DU PC DANS 1 MN" /f 
```

# php - echo 按类别列出的产品列表

> ID：11136294
> 
> 赞同：0
> 
> 时间：2012-06-21T10:35:55.613
> 
> 标签：php, mysql, sql

有人可以告诉我如何回显与另一个表相关的数据吗？

我有一张桌子

```
tbl_category_products:<
- id_categorys
- category 
```

和其他产品表

```
tbl_products:
- title
- description
- id_categorys 
```

如何在 PHP 中按类别回显产品列表？

这是一些代码，但没有成功。我正在尝试但没有成功，这是原始代码表名称：tbl_categorias_noticias
- id_categoria_noticias
- categoria

tbl_noticias
- id_noticia
- id_categoria_noticia
-titulo
-decricao
-msg
-nome_arquivo
-legenda

```
<?php
 $categoryId = 1; 
  $sql_visualizar = mysql_query("SELECT * FROM tbl_noticias AS t1 JOIN tbl_categorias_noticias c
ON c.id_categoria_noticia=t1.id_categoria_noticia WHERE id_categoria_noticia = {$categoryId}");
while($linha = mysql_fetch_array($sql_visualizar)){
$titulo = $linha ['titulo'];
$descricao = $linha['descricao'];
$msg = $linha['msg'];
$legenda = $linha['legenda'];
$nome_arquivo = $linha['nome_arquivo'];
$id_noticia = $linha['id_noticia'];

  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:39:23.833

您需要加入：

```
SELECT t1.title, t1.description, t2.category
FORM tbl_products t1
LEFT JOIN tbl_category_products t2 ON t1.id_categorys = t2.id_categorys 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:44:49.010

像这样的东西

首先：[mysql连接](http://www.php.net/manual/en/mysqli.construct.php)

```
$categoryId = 1;    
$query = "SELECT t1.* FROM tbl_products AS t1 JOIN tbl_category_products c
ON c.id_categorys=t1.id_categorys WHERE id_categorys = {$categoryId}";
$result = mysql_query($query);

while($r = mysql_fetch_assoc($result)) {
    //show your products
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:49:39.510

尝试这个

```
SELECT t1.title, t1.description, t2.category
FORM tbl_products t1
JOIN
tbl_category_products t2 
ON t1.id_categorys = t2.id_categorys
WHERE t1.id_categorys = 'myCategory' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T10:41:23.113

使用 JOIN 查询两个表

```
SELECT p.title, p.decription, c.category
FROM tbl_products p
JOIN tbl_category_products c
ON c.id_categorys=p.id_categorys
ORDER BY c.category ASC 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T10:42:57.880

```
SELECT tp.title, tp.description, tcp.category FORM tbl_products tp,tbl_category_products tcp where tp.id_categorys = tcp.id_categorys 
```

# apache - 多域名下的vBulletin论坛

> ID：11136299
> 
> 赞同：2
> 
> 时间：2012-06-21T10:36:18.203
> 
> 标签：apache, seo, locale, multilingual, vbulletin

希望有人能帮我解决我遇到的这个问题。就这样吧。

有一个网站，里面有集成的**vBulletin**论坛。该论坛可通过 `https://site.de/forum`域访问。主站点本身有许多基于区域设置的其他域。也就是说，有`https://site.ch`, `https://site.it`, `https://site.at`, 等（每一个都是对应的语言）。

现在需要在至少 2 个这样的附加域下拥有这个论坛。我的意思是，应该有一个`https://site.ch/forum`域，它将包含**相同**的论坛，**但**在风格上会有一些差异，当然，会有与它自己的域 (site.ch) 一起工作的论坛内部链接。整个系统也将被 SEO 编辑。

所以现在我的问题是如何实现这一目标？我知道有一些插件可以管理多域访问，但它们不受支持并且仍处于测试版。

首先，如何设置论坛在多个域下工作？

然后，也许我需要手动更改一些代码来设置`$vbulletin->options['bburl']`用于在论坛内生成链接的代码？

最后一个，我如何使所有这些**搜索引擎优化**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:02:54.960

你问了很多问题，如果你为每个问题创建一个单独的问题，你可能会得到更好的结果：

1) 如何将一个论坛目录用于多个域？（带有 vbulletin 标记和您正在使用的 Web 服务器的标记）

2) vbulletin 中如何根据当前域设置语言？（带有 vbulletin 标签和以下一个或多个标签：本地化、区域设置、多语言、多语言）

3) 在多个域上以多种语言呈现的重复内容的最佳实践（使用 seo 和 vbulletin 标签）

* * *

一些答案：

1) 如果您使用的是 apache web 服务器，您可以在 httpd.conf 文件中添加如下内容：

```
Alias /forums /var/www/...xxx.../forum_directory // use the path to your forum directory, no trailing slash

<Directory /var/www/...xxx.../forum_directory>
Order allow,deny
Allow from all
</Directory> 
```

然后在 vbulletin ACP 中，将基本路径 URL 的设置更改为“否”：
管理控制面板 -> 站点名称/URL / 联系方式 -> 始终使用论坛 URL 作为基本路径

2) 有一些插件可以检测浏览器使用的语言并将 vBulletin 设置为使用该语言：
[Language Detection](http://www.vbulletin.org/forum/showthread.php?t=256064)
[Set forum-language automatic to browser-language for first-visitors](http://www.vbulletin.org/forum/showthread.php?t=243201)

3) SEO 涵盖了很多内容，但要处理多个域上的重复内容，您可以查看 Google 网站管理员中心博客。

这篇文章很有帮助：
[Working with multi-regional website](http://googlewebmastercentral.blogspot.com/2010/03/working-with-multi-regional-websites.html)

帖子中的一个部分：*处理全球网站上的重复内容*

为不同地区和不同语言提供内容的网站有时会创建相同或相似但在不同 URL 上可用的内容。只要内容针对不同国家的不同用户，这通常不是问题。虽然我们强烈建议您为每个不同的用户组提供独特的内容，但我们理解这可能并非始终适用于所有页面和变体。通常不需要通过在 robots.txt 文件中禁止抓取或使用“noindex”机器人元标记来“隐藏”重复项。但是，如果您在不同的 URL 上向相同的用户提供相同的内容（例如，如果“example.de/”和“example.com/de/”都为德国用户显示德语内容），

我在其他搜索引擎上没有任何内容。

# c# - 在 C# 中定义 Partial Class 时有哪些约束

> ID：11136301
> 
> 赞同：0
> 
> 时间：2012-06-21T10:36:35.877
> 
> 标签：c#, partial-classes

我在网上搜索但在定义部分类时没有找到有关约束/规则的任何有用信息，我的意思是所有类都可以命名为 Partial 还是某些类不能命名？静态类可以是部分的和所有这些东西，请解释清楚我在面试中被问到这个问题，但我没有任何答案。我真的很想深入了解这一点，我曾经在**msdn**中找到了一些用于定义部分方法的规则，例如

```
 1\. Partial method declarations must begin with the contextual keyword
 2\. partial  and the method must return void. 
 3\. Partial methods can have ref  but not out  parameters.
 4\. Partial methods are implicitly private, and therefore they cannot be virtual. 
 5\. Partial methods cannot be extern , because the presence of the body determines whether they are defining or implementing.
 6\. Partial methods can have static and unsafe  modifiers.
 7\. Partial methods can be generic.
 8\. Constraints are put on the defining partial method declaration, and
    may optionally be repeated on the implementing one.
 9\. Parameter and type parameter names do not have to be the same in the
    implementing declaration as in the defining one.
 10\. You can make a delegate  to a partial method that has been defined and implemented, but not to a partial method that has only been defined. 
```

上课也有规定吗...

谢谢小伙子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:46:11.630

老实说，我会不惜一切代价避免使用 partial 关键字。它的存在是因为 VS/MS 想要一种自动生成代码的方法，并且仍然允许开发人员添加他们自己的自定义逻辑。

主要是 Win/WebForms。您可以将控件拖放到屏幕上并使用属性窗口来配置对象。然后，您可以打开“代码背后”并添加您自己的逻辑，并可以完全访问您通过所见即所得添加的所有控件。

除此之外，partials 可以很容易地创建比解决的问题更多的问题。创建看起来好像是面向对象的代码的程序神类太容易了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:48:16.920

归功于 C# 规范。

partial 修饰符表示类型声明的附加部分可能存在于别处，但这些附加部分的存在不是必需的；具有单个声明的类型包含部分修饰符是有效的。

部分类型的所有部分必须一起编译，以便可以在编译时将这些部分合并为单个类型声明。部分类型特别不允许扩展已编译的类型。

可以使用 partial 修饰符在多个部分中声明嵌套类型。通常，包含类型也使用 partial 声明，并且嵌套类型的每个部分都在包含类型的不同部分中声明。

在委托或枚举声明中不允许使用 partial 修饰符。

**属性**

部分类型的属性是通过以未指定的顺序组合每个部分的属性来确定的。如果一个属性放在多个零件上，就相当于在类型上多次指定该属性。比如这两部分：

```
[Attr1, Attr2("hello")]
partial class A {}

[Attr3, Attr2("goodbye")]
partial class A {} 
```

相当于一个声明，例如：

```
[Attr1, Attr2("hello"), Attr3, Attr2("goodbye")]
class A {} 
```

类型参数的属性以类似的方式组合。

**修饰符**

当部分类型声明包含可访问性规范（public、protected、internal 和 private 修饰符）时，它必须与包含可访问性规范的所有其他部分一致。如果部分类型的任何部分都不包含可访问性规范，则为该类型提供适当的默认可访问性（第 3.5.1 节）。

**类型参数和约束**

如果一个泛型类型在多个部分中声明，每个部分都必须声明类型参数。每个部分必须按顺序具有相同数量的类型参数，并且每个类型参数的名称相同。

当部分泛型类型声明包含约束（where 子句）时，约束必须与包含约束的所有其他部分一致。具体来说，包含约束的每个部分都必须具有针对同一组类型参数的约束，并且对于每个类型参数，主约束、辅助约束和构造函数约束集必须是等效的。如果两组约束包含相同的成员，则它们是等效的。如果部分泛型类型的任何部分都没有指定类型参数约束，则类型参数被认为是不受约束的。

这个例子

```
partial class Dictionary<K,V>
    where K: IComparable<K>
    where V: IKeyProvider<K>, IPersistable
{
    ...
}
partial class Dictionary<K,V>
    where V: IPersistable, IKeyProvider<K>
    where K: IComparable<K>
{
    ...
}
partial class Dictionary<K,V>
{
    ...
} 
```

是正确的，因为包含约束（前两个）的那些部分有效地分别为同一组类型参数指定了同一组主要、次要和构造函数约束。

# sql-server - 如何在不重新创建表的情况下添加实体

> ID：11136304
> 
> 赞同：0
> 
> 时间：2012-06-21T10:36:42.593
> 
> 标签：sql-server, entity-framework

我有这个 edmx 模型（见下文），我想添加一个额外的关联 from `Order`to`Worker` `*-1`如红线所示，问题是，数据库已经有很多我不想擦除的数据，是否可能添加这样做而不重新创建表？

![在此处输入图像描述](../Images/113fc3b8603711232cd402faa6b4d558.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:42:23.330

仅仅因为您开始使用实体设计器并不意味着您每次都必须完全重新创建数据库。

如果您从更改的模型生成 SQL，您应该能够很容易地找到引用您的新关系的部分。这是您需要针对数据库运行的唯一部分 - 只需将其拆分为自己的文件即可。如果有疑问，请保存旧 SQL 文件的副本，添加您的关系，生成新文件并创建差异以确保。

或者，如果您对 EF 如何表示数据和关系有很好的理解，您可能可以手动更改数据库。只要数据库和模型准确一致，EF 并不真正关心数据库是如何做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:43:35.417

只需让 EF 在您的开发环境中创建一个新数据库并使用一些数据库差异。用于将更改脚本从旧数据库更改为新数据库的工具。VS 2010 Premium 和 Ultimate 包含此差异。工具，如果您安装[数据库生成工具电源包](http://visualstudiogallery.msdn.microsoft.com/df3541c3-d833-4b65-b942-989e7ec74c87)，您甚至可以直接从 EDMX 设计器中使用它。

另一个流行的差异工具是[RedGate 的 SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/index-b)。

# actionscript-3 - Flex 拖放问题 - 鼠标右键单击禁用拖动

> ID：11136308
> 
> 赞同：0
> 
> 时间：2012-06-21T10:36:51.453
> 
> 标签：actionscript-3, flash, apache-flex, air

我有一个边界容器和几个矩形对象。

我可以拖动容器内的对象，但是当我右键单击一个矩形并在按下 rmb 的同时移动鼠标时，所有拖动都停止工作。我不知道为什么。

![问题草图](../Images/e5297e3e8e67a54c92f604d438abe3b9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:15:36.720

鼠标右键是为上下文菜单保留的。你不能改变这一点。您可以添加到上下文菜单，但不能将其删除。在矩形上单击鼠标右键应该会弹出该上下文菜单并停止所有拖动。据我所知，按预期工作。如果我有误解，请澄清，如果可以的话，我很乐意提供进一步的帮助。

# jquery - jquery .animate() 没有动画

> ID：11136314
> 
> 赞同：0
> 
> 时间：2012-06-21T10:37:01.127
> 
> 标签：jquery, jquery-animate

我正在尝试使边框在元素周围淡入。

在回答[jquery animate .css](https://stackoverflow.com/questions/4347104/jquery-animate-css)之后，我使用了jquery 函数并按照[jquery site 上](http://api.jquery.com/animate/)`.animate()`的教程进行操作。

但是，我无法让它工作。这是我在 jsbin 上的代码：http://jsbin.com/epojaw/2 [将](http://jsbin.com/epojaw/2) 鼠标悬停在文本上应该会在它周围的边框中消失，但它只是突然出现。

为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:40:24.540

您通过将边框的宽度从 0px 更改为 1px 来使用淡入效果。我假设步长为 1px，所以是的，它会立即出现。

相反，您可以尝试使用边框颜色创建淡入淡出，例如从白色变为红色。然后jQuery可以有更多的步骤，你的效果会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:40:57.540

这是因为边框仅将边框的宽度设置为 1 x 1 的动画。

如果您将边框宽度设置为 10px，它会进行动画处理：http: [//jsbin.com/utiwoy/3](http://jsbin.com/utiwoy/3)

# objective-c - 在IOS中乘以2个非常大的数字

> ID：11136316
> 
> 赞同：1
> 
> 时间：2012-06-21T10:37:11.237
> 
> 标签：objective-c, ios, c

我必须乘以 2 个大整数，每个都是 80+ 位。

此类任务的一般方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:50:32.250

您将不得不使用一个大型整数库。[维基百科的任意精度算术页面上列出了](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic#Arbitrary-precision_software)一些开源算法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T17:16:37.270

我们忘记了 CPU 可以将适合单个寄存器的数字相乘是多么了不起。一旦您尝试将两个大于寄存器的数字相乘，您就会意识到实际将数字相乘是多么痛苦。

不久前我不得不写一个大数类。这是我的乘法函数的代码。KxVector 只是一个带有计数的 32 位值的数组，并且非常不言自明，此处不包括在内。为简洁起见，我删除了所有其他数学函数。除了乘法和除法之外，所有的数学运算都很容易实现。

```
#define BIGNUM_NEGATIVE 0x80000000

class BigNum
{              
public:
   void mult( const BigNum& b );
   KxVector<u32> mData;
   s32           mFlags;
};

void BigNum::mult( const BigNum& b )
{
   // special handling for multiply by zero
   if ( b.isZero() )
   {
      mData.clear();
      mFlags = 0;
      return;
   }

   // apply sign
   mFlags ^= b.mFlags & BIGNUM_NEGATIVE;

   // multiply two numbers using a naive multiplication algorithm.
   // this would be faster with karatsuba or FFT based multiplication
   const BigNum* ppa;
   const BigNum* ppb;

   if ( mData.size() >= b.mData.size() )
   {
      ppa = this;
      ppb = &b;
   } else {
      ppa = &b;
      ppb = this;
   }
   assert( ppa->mData.size() >= ppb->mData.size() );

   u32 aSize = ppa->mData.size();
   u32 bSize = ppb->mData.size();

   BigNum tmp;
   for ( u32 i = 0; i < aSize + bSize; i++ )
      tmp.mData.insert( 0 );

   const u32* pb = ppb->mData.data();
   u32 carry = 0;
   for ( u32 i = 0; i < bSize; i++ )
   {
      u64 mult = *(pb++);
      if ( mult )
      {
         carry = 0;
         const u32* pa = ppa->mData.data();
         u32* pd = tmp.mData.data() + i;
         for ( u32 j = 0; j < aSize; j++ )
         {
            u64 prod = ( mult * *(pa++)) + *pd + carry;
            *(pd++) = u32(prod);
            carry = u32( prod >> 32 );
         }
         *pd = u32(carry);
      }
   }

   // remove leading zeroes
   while ( tmp.mData.size() && !tmp.mData.last() ) tmp.mData.pop();

   mData.swap( tmp.mData );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:12:58.943

这取决于你想对这些数字做什么。您想使用更多的算术运算符还是只想将两个数字相乘然后将它们输出到文件中？如果是后者，将数字放入 int 或 char 数组中然后实现乘法函数就相当简单了，它的工作原理就像你学会了用手进行乘法一样。

如果您想在 C 中执行此操作，这是最简单的解决方案，但当然它的内存效率不是很高。我建议寻找 C++ 的 Biginteger 库，[例如](http://gmplib.org/)，如果你想做更多，或者只是自己实现它以满足你的需要。

# silverlight-5.0 - Silverlight：禁用文本框上的复制/粘贴/剪切操作

> ID：11136321
> 
> 赞同：3
> 
> 时间：2012-06-21T10:37:31.853
> 
> 标签：silverlight-5.0

我需要禁用文本框上的复制/粘贴/剪切操作。为此，我继承了文本框并创建了 MyTextbox 并使用以下代码覆盖了 KeyDown 事件

```
if (!(e.Key == Key.Back || e.Key == Key.Left || e.Key == Key.Right || e.Key == Key.Delete || e.Key == Key.Tab))
{
    if ((e.Key == Key.C || e.Key == Key.X || e.Key == Key.V) &&
                     (Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
    {
        e.Handled = true;
    }
} 
```

然后使用这个文本框。此文本框现在可以防止复制/粘贴/剪切操作。

我正在尝试使用 Behaviors 来实现同样的目的。为此，我创建了一个行为。代码如下

```
public class MyTextboxBehavior : Behavior<TextBox>
{
        protected override void OnAttached()
        {
            base.OnAttached();

            this.AssociatedObject.KeyDown += new KeyEventHandler(AssociatedObject_KeyDown);
        }

        private void AssociatedObject_KeyDown(object sender, KeyEventArgs e)
        {
            if (!(e.Key == Key.Back || e.Key == Key.Left || e.Key == Key.Right || e.Key == Key.Delete || e.Key == Key.Tab))
            {
                if ((e.Key == Key.C || e.Key == Key.X || e.Key == Key.V) &&
                     (Keyboard.Modifiers & ModifierKeys.Control) == ModifierKeys.Control)
                {
                    e.Handled = true;
                }
            }
        }
} 
```

并将此行为添加到文本框，如下所示

```
<TextBox>
     <Interactivity:Interaction.Behaviors>
          <CustomControl:MyTextboxBehavior></CustomControl:MyTextboxBehavior>
     </Interactivity:Interaction.Behaviors>
</TextBox> 
```

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:33:15.453

**6 月 24 日更新**

在 WPF 中，您将能够在事件中捕获*CTRL* + *X/C/V*按键`PreviewKeyDown`，然后您将能够在文本框中抑制这些功能。

在 Silverlight中，*预览*方法不可用，因此在这里它不是一个选项。该`TextBox`控件还具有对剪贴板操作复制和粘贴的内置处理`CTRL+C`以及`CTRL+V`（请参阅[剪贴板类注释](http://msdn.microsoft.com/en-us/library/system.windows.clipboard%28v=vs.95%29.aspx)），因此抑制这些操作并不简单。

[这里](http://www.dotnetspark.com/kb/1961-restrict-clipboard-shortcuts-textbox-silverlight.aspx)有一个 SL3 项目的尝试，其中`OnKeyDown`和`OnKeyUp`事件处理程序在派生自`TextBox`. 该实现调用了在实现`base`中显然不可访问的方法`Behavior`，因此在通过行为中直接实现*复制*和*粘贴*抑制`TextBox`似乎是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T00:09:59.850

```
 if (e.Key == Key.Ctrl)
            Clipboard.SetText(string.Empty); 
```

# sql-server-2008 - 指南是否保证是唯一的？

> ID：11136322
> 
> 赞同：3
> 
> 时间：2012-06-21T10:37:35.497
> 
> 标签：sql-server-2008, guid

我在我的数据库中使用 Guids 作为主键，并且想知道是否有可能生成重复的 Guid。指南是否保证是唯一的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:41:11.823

虽然不能保证每个生成的 GUID 都是唯一的，但唯一键的总数（2^128 或 3.4×10^38）是如此之大，以至于生成两次相同数字的概率非常小。例如，考虑可观测宇宙，它包含大约 5×10^22 颗恒星；然后，每颗星都可以有 6.8×10^15 个普遍唯一的 GUID。

来自[维基百科](http://en.wikipedia.org/wiki/Globally_Unique_Identifier)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:42:17.653

> 虽然不能保证每个生成的 GUID 都是唯一的，但唯一键的总数（2128 或 3.4×1038）是如此之大，以至于生成两次相同数字的概率非常小。

您可以在[此处](http://weblogs.asp.net/nannettethacker/archive/2008/09/03/guids-unique-or-not.aspx)查看更多信息。

* * *

**避免重复 guid（如果您仍然需要）的**一种可能解决方案是使用**[UNIQUE 约束](http://msdn.microsoft.com/en-us/library/ms191166%28v=sql.105%29.aspx)。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T10:44:26.730

如果您使用 NEWSEQUENTIALID() 生成它们，则它们保证是唯一的。尽管如此，微软声称 [1] 它将是独一无二的，并且

> 世界上没有其他计算机会生成该 GUID 值的副本。

维基百科指出[2]

> Microsoft 在 Transact-SQL 语言中添加了一个名为 NEWSEQUENTIALID()[8] 的函数，该函数生成的 GUID 值保证会增加，但在服务器重新启动时可能以较小的数字开始（仍然保证唯一）

简而言之：在实践中，它们将是独一无二的。

[1] [http://msdn.microsoft.com/en-us/library/ms190215(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms190215(SQL.105).aspx)
[2] [http://en.wikipedia.org/wiki/Globally_unique_identifier#Sequential_algorithms](http://en.wikipedia.org/wiki/Globally_unique_identifier#Sequential_algorithms)**

# c# - 在 C# 中运行 Z3 时出现错误

> ID：11136324
> 
> 赞同：1
> 
> 时间：2012-06-21T10:37:38.367
> 
> 标签：c#, z3

任何人都可以请帮助！当我尝试运行下面的代码时，我收到了这个错误：

> “ 无法加载文件或程序集 'Microsoft.Z3, Version=4.0.0.0, Culture=neutral, PublicKeyToken=9c8d792caae602a2' 或其依赖项之一。尝试加载格式不正确的程序”

这是代码：

```
class Program
{
    static void Main(string[] args)

    {

        using (Context ctx = new Context())
        {

            RealExpr c = ctx.MkRealConst("c");

            BoolExpr Eqzero = ctx.MkGt(c, ctx.MkReal(0));
            BoolExpr Gezero = ctx.MkGe(c, ctx.MkReal(0));
            BoolExpr Lttwo = ctx.MkLt(c, ctx.MkReal(2));
            BoolExpr Gtthree = ctx.MkGt(c, ctx.MkReal(3));
            BoolExpr b1 = ctx.MkBoolConst("b1");
            BoolExpr b2 = ctx.MkBoolConst("b2");
            BoolExpr b3 = ctx.MkBoolConst("b3");
            BoolExpr b0 = ctx.MkBoolConst("b0");
            RealExpr[] lamb = new RealExpr[1];
            lamb[0] = ctx.MkRealConst("lamb");
            BoolExpr temp = ctx.MkAnd(ctx.MkGt(lamb[0], ctx.MkReal(0)), ctx.MkEq(b0, ctx.MkTrue()), ctx.MkEq(b1, ctx.MkTrue()), ctx.MkGe(ctx.MkAdd(c, lamb[0]), ctx.MkReal(0)), ctx.MkLe(ctx.MkAdd(c, lamb[0]), ctx.MkReal(3)), ctx.MkGe(c, ctx.MkReal(0)), ctx.MkLe(c, ctx.MkReal(3)));
            BoolExpr exist = ctx.MkExists(lamb, temp, 1, null, null, ctx.MkSymbol("Q2"), ctx.MkSymbol("skid2"));
            Console.WriteLine(exist.ToString());
            Solver s1 = ctx.MkSolver();
            s1.Assert(exist);
            if (s1.Check() == Status.SATISFIABLE)
            {
                Console.WriteLine("get pre");
                Console.Write(s1);
            }
            else
            {
                Console.WriteLine("Not reach");
            }
            Console.ReadKey();
        }

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:35:13.893

在对这个问题的先前答案的评论中，提到了 x86 发行版和 x64 发行版，我不确定这个问题是否得到解决。澄清：

编译 64 位二进制文​​件（在 Visual Studio 中称为 x64）时，需要 64 位版本的 z3.dll 和 Microsoft.Z3.dll。这些位于Z3 发行版中名为**x64的文件夹中。**请注意，这不**取决于**运行 Visual Studio 的实际机器。

编译 32 位二进制文​​件时，需要**bin**目录中的 dll。同样，这不**依赖**于运行 Visual Studio 的实际机器。

Visual Studio 可以从 32 位交叉编译到 64 位，反之亦然，也就是说，可以为 32 位架构编译二进制文件（称为**x86**而不是**x64**) 在 64 位机器上。也可以在 32 位机器上编译 64 位二进制文​​件。根据正在编译的二进制文件类型，必须添加正确的 dll 集。重要的设置是在 Visual Studio 中项目的构建配置中（在顶部，通常在选择调试/发布模式的位置旁边）。在这个编译阶段，在什么类型的机器上执行编译并不重要。实际机器仅在尝试在 32 位机器上运行 64 位二进制文​​件时才重要（但错误消息将与报告的不同）。在 64 位机器上运行 32 位二进制文​​件通常可以正常工作（但程序的最大内存使用量将受到限制）。

我希望这有助于消除一些混乱！

此外，我们同意包含这两个版本的组合分发会造成一些不必要的混淆，因此未来我们将考虑为 32 位和 64 位二进制文​​件分发单独的安装程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:45:10.187

最简单的方法是使用文件夹中的`build.cmd`脚本`examples/dotnet`并根据需要进行修改。该脚本将`Microsoft.Z3.dll`和复制`z3.dll`到工作目录并在相应平台上编译代码。

如果从 Visual Studio 编译：

*   确保`Microsoft.Z3.dll`您引用的版本与您正在编译的平台（x86、x64、...）相匹配。`bin`和`x64`文件夹中有两个Z3版本。
*   包括包含*Project Properties* -> *Reference Paths*`Microsoft.Z3.dll`的文件夹。原因是使用 unmanaged ，您无法在 Visual Studio 中直接引用。**`Microsoft.Z3.dll``z3.dll`**

# c# - 数据库查询性能：.net 中缓慢的读取器迭代

> ID：11136325
> 
> 赞同：0
> 
> 时间：2012-06-21T10:37:42.017
> 
> 标签：c#, .net, sql, sql-server

我有一个这样的 SQL 查询：

```
set @fromdate = '2012/01/01 00:00:00'
set @todate = '2013/01/01 00:00:00'

SELECT TableOne.date_time, TableTwo.* 
FROM TableOne 
INNER JOIN TableTwo ON TableOne.gprs_id = TableTwo.recordid 
WHERE date_time >= @fromdate AND date_time <= @todate 
```

我在 .net 4 (c#) 中使用它，如下所示：

```
string strSQL = "SELECT TableOne.date_time, TableTwo.* FROM TableOne INNER JOIN TableTwo ON " +
                "TableOne.gprs_id = TableTwo.recordid where date_time >= @fromdate AND date_time <= @todate";

var pCommand = pConnectionWrapper.DBConnection.CreateCommand();
pCommand.CommandText = strSQL;

var paramFromDate = pCommand.CreateParameter();
paramFromDate.ParameterName = "@fromdate";
paramFromDate.DbType = DbType.DateTime;
paramFromDate.SourceColumn = "date_time";
paramFromDate.Value = fromDate;
pCommand.Parameters.Add(paramFromDate);

var paramToDate = pCommand.CreateParameter();
paramToDate.ParameterName = "@todate";
paramToDate.DbType = DbType.DateTime;
paramToDate.SourceColumn = "date_time";
paramToDate.Value = toDate;
pCommand.Parameters.Add(paramToDate);

var pReader = pCommand.ExecuteReader();

while (pReader.Read())
{
   var someValue = double.Parse(pReader["somevalue"].ToString());
   var date = DateTime.Parse(pReader["date_time"].ToString());

   var someObject = new someObject(someValue, someDate);
   someObjects.Add(comeObject);
} 
```

在 SQL Server Management Studio 中运行此查询比在 .net 中运行快得多。从 .net 遍历行非常慢。我认为这个内部连接会导致这个（？），因为我的其他不包含连接的查询在.net 下非常快。

我可以提高 .net 的查询性能吗？像这样使用数据集而不是阅读器或 sg？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:49:52.693

这不会真正修复查询，但会更有效地从查询中获取数据。仅按名称返回您需要的列。阅读器应该比数据集更快。

```
Double someValue;
DateTime date;
while (pReader.Read())
{
   someValue = pReader.GetDouble(0);
   date = pReader.GetDate(1);

   var someObject = new someObject(someValue, someDate);
   someObjects.Add(comeObject);
}

//or
while (pReader.Read())
{
   someObjects.Add(new someObject(pReader.GetDouble(0), pReader.GetDate(1)));
} 
```

至于查询，它似乎很基本。

注释掉 2 个对象行，看看这是否可能是瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:54:42.103

您是否使用 Table2 中的所有列名？如果不是，则仅指定您需要的列名，并消除返回数据集的一些开销。即使您正在使用所有这些，使用命名列也是一个好习惯。

# objective-c - NSString 类型的属性何时为 [NSNull null]

> ID：11136329
> 
> 赞同：1
> 
> 时间：2012-06-21T10:37:56.237
> 
> 标签：objective-c, ocunit, ocmock, nsnull

我正在解析一些 json 以返回基本字符串令牌或错误消息。

```
- (void)callBackWithVerifyHttpResponse:(NSData *)response
{
    SomeResult *result = [self.parser parseVerifyHttpResponseAndReturnResult:response];
    if (result.token) { [self.delegate callBackWithToken:result.token]; }
    if (result.error) { [self.delegate callBackWithError:result.error]; }
} 
```

证明这一点的测试

```
- (void)testVerifyCallbackInvokesErrorCallbackOnDelegateWhenParserReturnsError
{
    SomeResult *result = [[SomeResult alloc] init];
    result.error = @"fail";
    [[self.delegate expect] callBackWithError:@"fail"];
    [[self.delegate reject] callBackWithToken:OCMArg.any];
    [[[self.parser stub] andReturn:result] parseVerifyHttpResponseAndReturnResult:nil];
    [self.sut callBackWithVerifyHttpResponse:nil];
    [self.delegate verify];
}

- (void)testVerifyCallbackInvokesTokenCallbackOnDelegateWhenParserReturnsToken
{
    SomeResult *result = [[SomeResult alloc] init];
    result.token = @"token";
    [[self.delegate expect] callBackWithToken:@"token"];
    [[self.delegate reject] callBackWithError:OCMArg.any];
    [[[self.parser stub] andReturn:result] parseVerifyHttpResponseAndReturnResult:nil];
    [self.sut callBackWithVerifyHttpResponse:nil];
    [self.delegate verify];
} 
```

一切都很好，直到我将它连接到一个实际的端点 - 只是发现除非我像下面这样修改回调 - 它正在调用两个回调（不是我希望的）

```
- (void)callBackWithVerifyHttpResponse:(NSData *)response
{
    SomeResult *result = [self.parser parseVerifyHttpResponseAndReturnResult:response];
    if (result.token != [NSNull null]) { [self.delegate callBackWithToken:result.token]; }
    if (result.error != [NSNull null]) { [self.delegate callBackWithError:result.error]; }
} 
```

所以 2 部分问题

1.  为什么我不能写一个测试来证明这一点？每当我将错误或令牌设置为 NULL 或 NSNull 时，它都可以正常工作（但生产工作需要此代码）

2.  为什么生产代码只会在条件条件下失败`!= [NSNull null]`（但我似乎什么也得不到，但是`<null>`当我在模拟器中运行它时 NSLog 值时？

请记住，SomeResult 对象上的令牌/错误属性如下所示

```
@interface SomeResult : NSObject

@property (strong, nonatomic) NSString *token;
@property (strong, nonatomic) NSString *error;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:07:49.150

您的原始代码和测试期望 token 或 error 是`nil`，而不是`[NSNull null]`。大概当您针对生产端点运行它时，您的解析器将值设置为`[NSNull null]`.

这些测试应该与您修改的代码一起通过：

```
- (void)testVerifyCallbackInvokesErrorCallbackOnDelegateWhenParserReturnsError
{
    SomeResult *result = [[SomeResult alloc] init];
    result.error = @"fail";
    result.token = [NSNull null];
    [[self.delegate expect] callBackWithError:@"fail"];
    [[self.delegate reject] callBackWithToken:OCMArg.any];
    [[[self.parser stub] andReturn:result] parseVerifyHttpResponseAndReturnResult:nil];
    [self.sut callBackWithVerifyHttpResponse:nil];
    [self.delegate verify];
}

- (void)testVerifyCallbackInvokesTokenCallbackOnDelegateWhenParserReturnsToken
{
    SomeResult *result = [[SomeResult alloc] init];
    result.token = @"token";
    result.error = [NSNull null];
    [[self.delegate expect] callBackWithToken:@"token"];
    [[self.delegate reject] callBackWithError:OCMArg.any];
    [[[self.parser stub] andReturn:result] parseVerifyHttpResponseAndReturnResult:nil];
    [self.sut callBackWithVerifyHttpResponse:nil];
    [self.delegate verify];
} 
```

当您处理可能微妙地改变其行为的 Web 服务和/或第三方解析器时，最好进行防御性编码。您可以同时处理`nil`和`NSNull`：

```
- (void)callBackWithVerifyHttpResponse:(NSData *)response
{
    SomeResult *result = [self.parser parseVerifyHttpResponseAndReturnResult:response];
    if (result.token && result.token != [NSNull null]) { [self.delegate callBackWithToken:result.token]; }
    if (result.error && result.error != [NSNull null]) { [self.delegate callBackWithError:result.error]; }
} 
```

您可能还希望将此设置为 if/else——首先测试错误，如果有错误则永远不要设置令牌，或者如果您获得令牌则忽略错误。如果您不想同时调用这两个回调，那么在您的代码路径中使其成为不可能。

# watir - LoadError: 无法加载此类文件 -- watir/WindowHelper

> ID：11136331
> 
> 赞同：0
> 
> 时间：2012-06-21T10:38:06.723
> 
> 标签：watir

```
irb(main):011:0> require 'watir/WindowHelper'

LoadError: cannot load such file -- watir/WindowHelper from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i    
n `require' from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:i    
n `rescue in require'from C:/Ruby193/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:i    
n `require'from (irb):11 from C:/Ruby193/bin/irb:12:in `<main>' 
```

我在尝试时收到此错误

```
require 'watir/WindowHelper' 
```

谁能告诉我为什么会发生这种情况以及解决方案？单击下载文件的链接时，我无法处理 IE 弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T11:49:46.803

Watir wiki 有一堆使用弹出窗口的示例 - [http://wiki.openqa.org/display/WTR/Pop+Ups](http://wiki.openqa.org/display/WTR/Pop+Ups)。

# wcf - wcf 数据服务 - 在数据模型中公开相同类型的属性

> ID：11136333
> 
> 赞同：2
> 
> 时间：2012-06-21T10:38:18.723
> 
> 标签：wcf, wcf-data-services

我是 WCF 数据服务的新手。我有一个非常简单的数据模型。它的一些属性具有相同的类型，如下所示：

```
public IQueryable<IntegerSum> HouseholdGoodsSums
{
    get
    {
        return GetData<IntegerSum>(DefaultProgramID, "rHouseholdGoodsPrice", IntegerSumConverter);
    }
}

public IQueryable<IntegerSum> StructureSums
{
    get
    {
        return GetData<IntegerSum>(DefaultProgramID, "rStructurePrice", IntegerSumConverter);
    }
} 
```

IntegerSum 是一个非常简单的类：

```
[DataServiceKey("Amount")]
public class IntegerSum
{
    public int Amount { get; set; }
} 
```

当我在 Web 浏览器中导航到我的服务时，我看到以下错误消息：

服务器在处理请求时遇到错误。异常消息是 'Property 'HouseholdGoodsSums' 和 'StructureSums' 是 IQueryable 类型的 'IntegrationServices.PropertyIntegrationServices.IntegerSum' 和 'IntegrationServices.PropertyIntegrationServices.IntegerSum' 并且类型 'IntegrationServices.PropertyIntegrationServices.IntegerSum' 是类型 'IntegrationServices.PropertyIntegrationServices 的祖先.IntegerSum'。请确保每个类型层次结构只有一个 IQueryable 属性。'。

当我摆脱这两个属性之一时，服务开始工作。

我在 google 中搜索了此错误消息，但没有找到解决方案。数据模型中真的不允许有两个相同类型的属性吗？如果是这样，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T21:51:04.813

同志，

要首先解决该错误，您会遇到[反射](http://msdn.microsoft.com/en-us/library/dd723653.aspx)提供程序的限制。具体来说，反射提供程序不支持[MEST](http://blogs.msdn.com/b/alexj/archive/2008/05/16/mest-what-is-it-and-how-does-it-work.aspx)。

也就是说，有更好的方法可以实现您想要实现的目标。您可能不应该将 IntegerSum 设为实体类型（实体类型是唯一可识别的实体，它并不真正适合您的场景）。虽然您不能直接公开它，但您可以将其公开为[服务操作](http://msdn.microsoft.com/en-us/library/cc668788.aspx)。这似乎更接近您想要实现的目标。

区分某物是否应该是实体的几种方法：

1.  如果它已经有一个键，例如数据库中的一个 PK，它可能应该是一个实体类型
2.  如果需要独立创建/更新/删除对象，必须是实体类型

HTH，马克

# javascript - appendChild() 与 documentFragment 一起使用时的替代方案？

> ID：11136338
> 
> 赞同：0
> 
> 时间：2012-06-21T10:38:52.240
> 
> 标签：javascript, dom

我正在尝试使用 documentFragment() 从头开始​​构建部分标签。它将包括一个 h1 标签和一个文章标签，最初是使用 appendChild() 添加的。此部分标签也将在某些时候被克隆并使用 cloneNode() 进行调整。

然后我发现[appendChild() 在 IE 中是错误的，](http://support.microsoft.com/kb/927917/en-us)还有来自[Nick Zakas](http://www.nczonline.net/blog/2008/03/17/the-dreaded-operation-aborted-error/)、[Paul Irish](http://paulirish.com/2011/surefire-dom-element-insertion/)和[Steve Souders](http://www.stevesouders.com/blog/2010/05/11/appendchild-vs-insertbefore/)的文章量化了 appendChild 的糟糕程度。我通过 SO 搜索了一个替代方案，使用 insertBefore 和 firstChild 似乎是普遍共识。因为我想在其他节点内插入节点，所以我不确定 insertBefore 是否是这里的一个选项。

公平地说，这可能不是最有效的代码。使用页面上的所有子节点在 section 标记中进行编码可能会更快，然后将所有内容编写脚本，然后将其加载到页面上。当我克隆它时，很容易找到带有 firstChild 的子节点，然后调整它们。但在我这样做之前，我只想确保除了 appendChild() 之外，没有其他方法可以在元素内插入节点？

在此先感谢...凯德兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:45:27.413

`appendChild()`只要您不尝试在仍由浏览器呈现的元素上使用它，就没有任何问题。等到`DOMContentLoaded`or`load`事件在文档上触发，你会没事的。

# php - 在 innerHTML 中不起作用

> ID：11136339
> 
> 赞同：1
> 
> 时间：2012-06-21T10:38:55.843
> 
> 标签：php, javascript, drop-down-menu

我用 javascript 创建了一个下拉列表，并从 MySQL 数据库中获取数据来填充它。

我遇到的问题是我无法将下拉列表放在 innerHTML 代码中。

这是我写的用 JS 创建下拉列表的内容：

```
var mySpan = document.getElementById('myDiv');

var myLine = document.getElementById('testcat');
myLine.value++;

// Create select
var selection = document.createElement('select');
selection.setAttribute('name',"category[]");
mySpan.appendChild(selection); 

// Create Option
createSelectOption(selection);

// Create the container
var ni = document.getElementById('myDiv');
ni.setAttribute('style', 'width:790px;');
...........
........... 
```

然后我创建其他东西并创建 HTML 代码，我使用：

```
newdiv.innerHTML = '<div class="table">.........</div>';
ni.appendChild(newdiv); 
```

这是 HTML 的一部分：

```
// test dropdown list
<input name="testcat" id="testcat" type="hidden" value="0" />   
<div id="myDiv"></div> 
```

正如您在上面的代码中看到的那样，我测试了我的下拉列表，如果我`<input name="testcat" id="testcat" type="hidden" value="0" />`在 HTML 中声明（我的意思是`<body></body>`在myLine.value++;"。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:00:26.773

这就是我在旧代码中所做的：

```
var selectcat = document.createElement("select");
selectcat.name = "category[]";
selectcat.options[0] = new Option("","");
selectcat.options[1] = new Option("cat1","cat1");
selectcat.options[2] = new Option("cat2","cat2");
..........
..........
selectcat.options[12] = new Option("cat1","cat12"); 
```

和使用的：

```
newdiv.innerHTML = '<div class="table"><ul><li><select name="category[]"><option value=""></option><option value="cat1">cat1</option><option value="cat2">cat2</option></select></li></ul></div>'; 
```

但现在我必须从 MySQL 数据库中获取值。

所以我创建了这个函数：

```
function createSelectOption(element)
    {
        var objSelect = ele;
        var Item = new Option("", "");
        objSelect.options[objSelect.length] = Item;
        <?
        while($categ = mysql_fetch_array($resultf_categ))
        {
        ?>
            var Item = new Option("<?=$categ["cat_name"];?>", "<?=$categ["cat_name"];?>");
            objSelect.options[objSelect.length] = Item;
        <?
        }
        ?>
    } 
```

但仍然不明白如何直接在我的 innerHTML 中使用。对不起，愚蠢的问题，但我真的被困在这里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:17:12.707

您不能使用 innerHTML 作为文本为元素分配 ID - ID 不会在 DOM 上注册。您需要首先创建元素，为其分配 ID，然后将该元素放入 DOM。

您可能会发现使用 jQuery 会更容易：

```
var input = document.createElement("input"); 
input.id="testcat"; 
input.innerHTML = "testcat" ;
$('somediv').appendChild(input); 
```

# r - zoo/xts 微秒读取问题

> ID：11136340
> 
> 赞同：3
> 
> 时间：2012-06-21T10:38:57.053
> 
> 标签：r, time-series, xts, zoo, strptime

数据看起来像

```
 Time  Set1    Set2   
10:19:38.551629 16234   16236   
10:19:41.408010 16234   16236   
10:19:47.264204 16234   16236 
```

我正在尝试将其加载到动物园中。

```
orig <- read.zoo("~/sample.txt",sep="",header=TRUE,index.column=1,format="%H:%M:%S.%6f")

Error in read.zoo("~/sample.txt", sep = "", header = TRUE, index.column = 1,  : 
  index has 3 bad entries at data rows: 1 2 3 ... 
```

我已经检查了所有相关的帖子 1\. [R 问题与舍入毫秒](https://stackoverflow.com/questions/10931972/r-issue-with-rounding-milliseconds) 2.[在 R 中调用 strptime 时的毫秒难题](https://stackoverflow.com/questions/8889554/milliseconds-puzzle-when-calling-strptime-in-r?lq=1) 3.[如何解析 R 中的毫秒？](https://stackoverflow.com/questions/2150138/how-to-parse-milliseconds-in-r?rq=1)

然而，这无济于事。有什么建议么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:55:05.440

您希望索引是时间类，例如`POSIXct`or `POSIXlt`。另外，你的`format`论点也不完全正确。尝试这个

```
read.zoo("~/sample.txt", header = TRUE, format="%H:%M:%OS", FUN=as.POSIXct) 
```

其中，对于提供的样本数据，给出

```
read.zoo(text="           Time  Set1    Set2   
10:19:38.551629 16234   16236   
10:19:41.408010 16234   16236   
10:19:47.264204 16234   16236   ", header = TRUE, format="%H:%M:%OS", FUN=as.POSIXct)
#                            Set1  Set2
#2012-06-21 10:19:38.551629 16234 16236
#2012-06-21 10:19:41.408010 16234 16236
#2012-06-21 10:19:47.264204 16234 16236 
```

# jquery - jQuery 等待动画继续 PHP

> ID：11136342
> 
> 赞同：1
> 
> 时间：2012-06-21T10:38:58.367
> 
> 标签：jquery, animation

我的 jQuery 动画有问题。

我有一个带有两个选项的圆形菜单。当我单击一个选项时，圆圈会分裂，并且双方会彼此分开。但问题是它不会让动画在使用新的 GET 和 POST 变量刷新页面之前完成。

有谁知道让两个部分同时动画并在继续之前让动画完成的解决方案？

菜单：

[http://imgur.com/iLjFb](http://imgur.com/iLjFb)

代码：

```
 $("a").live("click", function(){
       $(".circle1").animate({ 
           marginLeft: "-=1000px"
       }, 1000)
       $(".circle2").animate({ 
           marginLeft: "+=1000px"
       }, 1000)
  }); 
```

...

```
echo "<div id = 'cirkels' class = 'cirkels'>
<a href='?media=fotos' class = 'circle1'><span>Foto</span></a>
<a href='?media=videos' class = 'circle2'><span>Video</span></a>
</div>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:52:29.380

“animate”的最后一个参数是“complete”。这是一个您可以在动画完成时运行的功能——即，正是您所要求的。[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

你不能准确地说“当两者都完成时”（除非你设置一个变量=0，完成时：变量=变量+1，如果变量=2，那么两者都完成了——但是失败的风险很小）所以相信他们'将在第二个之后结束并仅在其中一个动画上设置'完成'。或者添加一个分数间隙（例如 0.1 秒）并运行。

所以一种方法：

```
$("a").live("click", function(){ 
   $(".circle1").animate({  
       marginLeft: "-=1000px" 
   }, 1000) 
   $(".circle2").animate({  
       marginLeft: "+=1000px"}, 1000, function() {
                 setTimeout(function() {alert('both done'); }, 100 );
}); 
```

以及具有部分失败风险的冗长方法：

```
$("a").live("click", function(){ 
   var comp = 0;
   $(".circle1").animate({  
       marginLeft: "-=1000px" 
   }, 1000, function() {comp++; if (comp==2) {  alert('both done'); } }) 
   $(".circle2").animate({  
       marginLeft: "+=1000px" 
   }, 1000, function() {comp++; if (comp==2) {  alert('both done'); } }) 
}); 
```

* * *

编辑

在下面的评论之后，我添加了所有必要的位，更正了“超时”功能等（上面是示例，以提供一个思路）。这里有一些调整的测试脚本，包括使用“on”（不是“live”）、取消点击和添加加载器。

```
<html>
<head>
  <title>Test</title>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
  <script>
    $().ready( function() {
      $("a").live("click", function(){
         $(".circle1").animate({
             marginLeft: "-=1000px"
             }, 1000);
         $(".circle2").animate({
             marginLeft: "+=1000px"
             }, 1000, function() { setTimeout(function() {alert('both done'); }, 100 );
         });
         return false;
       });
   });
  </script>
</head>
<body>
      <div id="counter"></div>
  <a href="#">Click Me</a>
  <div class="circle1"></div>
  <div class="circle2"></div>
</body>
</html> 
```

.

```
<html>
<head>
  <title>Test</title>
  <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
  <script>
    $().ready( function() {
      $("a").on("click", function(){
       var comp = 0;
       $(".circle1").animate({
           marginLeft: "-=1000px"
       }, 1000, function() {comp++; if (comp==2) {  alert('both done'); } });
       $(".circle2").animate({
           marginLeft: "+=1000px"
       }, 1000, function() {comp++; if (comp==2) {  alert('both done'); } });
       return false;
    });
   });
  </script>
</head>
<body>
  <div id="counter"></div>
  <a href="#">Click Me</a>
  <div class="circle1"></div>
  <div class="circle2"></div>
</body>
</html> 
```

.

# iphone - UITextField 的子类

> ID：11136345
> 
> 赞同：1
> 
> 时间：2012-06-21T10:39:13.217
> 
> 标签：iphone, ios, uikit, uitextfield

我想继承 UITextField 并有一个设置最大字符数的方法。允许。在这个子类的 init 方法中，我尝试将 inputDelegate 设置为 self 但不会触发回调。这也只是 iOS 5 的东西。我的问题是什么协议或通知允许我在点击一个键时触发一个事件，这样我就不必在我的视图控制器中实现 UITextField 委托来实现这个限制。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:15:28.317

你可以这样做，为你的文本字段创建一个委托类

.m 文件

```
@implementation LimitedTextFieldDelegate

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    if(textField.text.length >= 5 && ![string isEqualToString:@""])
        return NO;

    return YES;
}
@end 
```

.h 文件

```
@interface LimitedTextFieldDelegate : UITextField<UITextFieldDelegate>
@end 
```

在 UITextField 子类中执行以下操作

```
- (id)init
{
    self = [super init];
    if (self) {
        //limitedDelegate is a property of your textfield subclass
        self.limitedDelegate = [[LimitedTextFieldDelegate alloc] init];
        self.delegate = self.limitedDelegate;
    }
    return self;

} 
```

# heroku - heroku 雪松控制台

> ID：11136351
> 
> 赞同：1
> 
> 时间：2012-06-21T10:39:30.763
> 
> 标签：heroku

我一直在尝试在 cedar 上进行 heroku 控制台会话，但我没有任何乐趣。

旧的方法是：

```
heroku console 
```

我了解新方法涉及两个步骤：

```
heroku run bash 
```

然后

```
$ rails console 
```

但在 heroku run bash 阶段，我不断得到：

```
heroku run bash
Running `bash` attached to terminal... up, run.1
 !    
 !    Timeout awaiting process 
```

所以我检查了没有端口阻塞问题并且

```
telnet rendezvous.heroku.com 5000 
```

给

```
Trying 50.19.103.36... 
Connected to ec2-50-19-103-36.compute-1.amazonaws.com. 
Escape character is '^]'. 
```

正如我所料

我做错了什么，我需要做什么才能让这个控制台启动并运行？

谢谢！

PS我也试过了——heroku运行控制台——也超时了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-16T19:04:56.617

在 cedar 中，每个需要附加到终端的命令都使用 run。前任：

```
heroku run console
heroku run rake db:migrate 
```

如果不需要附加，请不要使用`run`:
ex:`heroku logs`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:02:35.417

新方法是`heroku run console`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T16:55:13.653

好的 - 睡了几个小时后很明显。只需更新在我的 Mac 上以某种方式损坏的 heroku gem。如果您有类似的问题，请先执行此操作...

# javascript - 为什么 .fetch() 未为 Collections 定义？

> ID：11136353
> 
> 赞同：1
> 
> 时间：2012-06-21T10:39:35.463
> 
> 标签：javascript, backbone.js

我将 Backbone.js 的模型和视图放在单独的文件中。模型和集合是这样的

```
$(function(){

    TodoList.Models.Todo = Backbone.Model.extend({
        url: function (){
                return this.id? '/todos/' + this.id : '/todos/' ;
                },
        initialize: function () {
                }
    });

    TodoList.Collections.Todos = Backbone.Collection.extend({
        model: TodoList.Models.Todo,
        url: "/todos"
});

}); 
```

视图代码为：

```
$(function(){
    Todos = TodoList.Collections.Todos;
    TodoList.Views.AppView = Backbone.View.extend({
    el: $("#todo_app"),
    events: {
        "submit form#new_todo": "createTodo"
    },
    initialize: function(){
        _.bindAll(this, 'addOne', 'addAll');
        Todos.bind("add", this.addOne);
        Todos.bind("refresh", this.addAll);
        Todos.bind("all", this.render);
        Todos.fetch();
    },
        .
        .
        .
}); 
```

javascript 现在不会运行。它说 fetch() 函数未定义。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:43:42.267

您应该创建一个 Todos 集合的新实例：

```
Todos = new TodoList.Collections.Todos(); 
```

# css - CSS Helper 类的使用

> ID：11136354
> 
> 赞同：2
> 
> 时间：2012-06-21T10:39:46.743
> 
> 标签：css, helper, abstraction

我今天尝试用“帮助类样式”编写 CSS，Twitter 上的许多开发人员说这是一种不好的做法。

这是一个例子：

```
<span class="et-margin-top-30 et-width-400 et-display-inline">
    <p class="et-common-frame-shadow et-inner-img-shadow">
        <img class="et-common-frame-img" src="img3.jpg"/>
    </p>
    <h3 class="et-margin-top-10 et-fontsize-26 et-fontweight-bold">foo</h3>
    <p class="et-margin-top-10">bar</p>
</span> 
```

为什么这是一个不好的做法？我们什么时候应该使用 .clear 之类的辅助类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:47:10.717

*通过 CSS 进行样式*设置的想法是内容和样式之间的分离。您的内容采用 HTML 格式，CSS 提供了有关如何直观显示的信息。如果你想改变一个，你可以在不改变另一个的情况下这样做。

通过命名您的类`et-margin-top-30`，您将样式信息放回您的 HTML 中。你不妨写`style="margin-top: 30px"`。因为如果您决定该元素毕竟应该有*50像素的边距，那么您需要同时更改 CSS**和*HTML。这就是为什么它的风格不好。

你应该用它们的功能来命名你的 HTML 元素（例如`class="headline"`，或`class="call-to-action"`），然后在你的 CSS 中描述*标题*或*号召性*用语的样式。如果你想稍后改变它，你可以通过简单地编辑你的 CSS 来做到这一点，HTML 不需要改变。

更不用说，如果你使用 Javascript 来操作元素，使用`document.getElementsByClassName('et-margin-top-30')`a) 很难理解你的脚本和 HTML 结构的含义，并且 b)每次你想要调整时都需要修改你的 HTML、CSS*和 Javascript*元素的视觉外观。使用描述性的类名变得更加重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:47:24.557

你在那里尝试做的事情看起来很可怕。看起来您有一个适用于所有不同样式属性的类。它不仅会使您的 HTML 不可读，而且还会扩大文件大小。

如果一个元素有 15 种“附加”样式怎么办。会有15节课吗？

我也认为这只会使渲染速度变慢（这只是我刚刚编造的东西，我没有证据），因为它必须查找所有这些类。

我看不出有什么不同`<p style="color: red;"></p>`。

# finder - Automator Finder 服务继续运行，应该只运行一次

> ID：11136357
> 
> 赞同：0
> 
> 时间：2012-06-21T10:39:59.433
> 
> 标签：finder, automator

我使用 automator 创建了一个简单的服务，它需要一个 *.tiff，从中创建一个 *.jpg，然后删除原始文件。

但是，我在 *.tiff 文件上运行它，它会继续运行，这意味着它会一遍又一遍地转换（然后是 jpg）文件。也就是说，我相信它确实如此，因为文件消失并重新出现大约每分钟 2 次，并且时间戳发生变化。我如何告诉它只运行一次服务（即 shell 命令）？

Automator 中的服务只是“运行 Shell-Script”类型的这一操作。Shell 脚本是

```
newName=${@%.tiff}.jpg
echo "$newName"
sips -s format jpeg "$@" --out "${newName}"
rm "$@" 
```

谢谢！（会张贴 Automator 窗口的图片，但不允许）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:32:29.220

这种行为似乎是一个**文件夹操作**。
如果您创建了文件夹操作：
1- 您必须过滤 TIFF 文件，因为该文件夹操作不会处理创建的 JPEG 文件。
2- 如果您在该文件夹中放置一个或多个文件，则必须使用循环。
3-仅当 sips 命令成功完成时，才使用“ **&& ”删除 TIFF 文件。**

这是脚本：

```
for f in "$@";do
    if [[ "$f" = *.tiff ]]; then
        sips -s format jpeg "$f" --out "${f%.tiff}.jpg" && rm "$f"
    fi
done 
```

# xtk - XTK 中 object._colors 的 Alpha 分量

> ID：11136359
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:02.577
> 
> 标签：xtk

object._colors 是否可以有 Alpha 分量？

```
 var object = new X.object();
    var c = object._colors;

    var color = new Array(4);
    c.add(color[0], color[1], color[2], color[4]);//Is this Allowed ..? 
```

我有颜色的 R、G、B、A 值。其中 R= 红色，G= 绿色，B= 蓝色，A = 透明度分量。

是否可以允许透明度/Alpha 组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:27:21.803

X.object 有一个属性“opacity”（在 0 和 1 之间变化）在 mixin“displayable”中实现，所以要在框架内部使用它，使用 object._opacity 和从外部“object.opacity=;” 或“var myvar = object.opacity;” （分别是不透明度的 setter 和 getter）。

您可以使用的其他属性是 object._visible (boolean) 来选择是否显示它。

Ricola3D

# c# - Linq2Sql 内存不足异常

> ID：11136361
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:04.100
> 
> 标签：c#, .net, linq-to-sql, out-of-memory

从数据库中获取时，我的应用程序中遇到 OutOfMemory 异常。它是一个使用 Linq2Sql 的 C# .Net 应用程序。

我尝试使用`GC.GetTotalMemory()`来查看调用数据库之前和之后占用了多少内存。这对正在发生的事情给出了一个很好的虽然不是很准确的画面。当我查看 Windows 任务管理器时，我可以看到峰值工作集在使用以下代码以分页方式获取数据时并不小：

```
public static void PreloadPaged()
{
    int NoPoints = PointRepository.Count();
    int pagesize = 50000;
    int fetchedRows = 0;

    while (fetchedRows < NoPoints)
    {
        PreloadPointEntity.Points.AddRange(PointRepository.ReadPaged(pagesize, fetchedRows));
        PointRepository.ReadPointCollections();
        PreloadPointEntity.PointCollections.Count());
        fetchedRows += pagesize;
    }
}

private static List<PointEntity> ReadPaged(int pagesize, int fetchedRows)
{
    DataModel dataContext = InstantiateDataModel();
    var Points = (from p in dataContext.PointDatas
                select p.ToEntity());

    return Points.Skip(fetchedRows).Take(pagesize).ToList();
} 
```

我猜是 Linq2Sql 代码用尽了内存而不是重用它或之后释放它，但我能做些什么来降低内存足迹？

我观察到它使用 10 倍的内存来获取数据，因为它将它们存储在我的实体列表中。我考虑过调用垃圾收集器，但我宁愿避免它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:57:24.070

您正在检索太多数据并将其存储在内存中，这就是您收到 OOM 异常的原因。

发生 2 件事中的 1 件：

1.  当用户只会查看结果的子集和/或这是第一次尝试“缓存”数据时，您正在加载过多的数据。
2.  您确实需要所有这些数据，但使用了错误的技术 (Linq2Sql) 来访问数据。

如果是第一个，您需要

1.  加载较小的数据块（20-50 条记录，而不是 50K 或所有内容）
2.  如果这仅用于显示目的，则查询所需内容的投影，而不是实体本身。

如果它是第二个而不是使用旨在管理大量数据的 ETL 工具。我更喜欢[Rhino.ETL](http://hibernatingrhinos.com/open-source/rhino-etl)但 SSIS 也可以。

# javascript - javascript中拦截的原型

> ID：11136362
> 
> 赞同：1
> 
> 时间：2012-06-21T10:40:04.387
> 
> 标签：javascript, prototype

谁能向我解释这段代码？它的含义和使用方法是什么？

```
 Function.prototype.createInterceptor = function createInterceptor(fn) {
       var scope = {};
       return function () {
           if (fn.apply(scope, arguments)) {
               return this.apply(scope, arguments);
           }
           else {
               return null;
           }
       };
   };
   var interceptMe = function cube(x) {
           console.info(x);
           return Math.pow(x, 3);
       };
   //
   var cube = interceptMe.createInterceptor(function (x) {
       return typeof x === "number";
   }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T10:49:28.743

该代码无法正常运行，因此我进行了此编辑：

```
Function.prototype.createInterceptor = function createInterceptor(fn) {
    var scope = {},
        original = this; //<-- add this
    return function () {
        if (fn.apply(scope, arguments)) {
            return original.apply(scope, arguments);
        }
        else {
            return null;
        }
    };
};
var interceptMe = function cube(x) {
        console.info(x);
        return Math.pow(x, 3);
    };
//
var cube = interceptMe.createInterceptor(function (x) {
    return typeof x === "number";
}); 
```

拦截器函数在调用它之前验证传递给原始函数的内容，`null` 如果它没有看到参数有效则返回。如果参数有效，则调用原始函数。

```
cube(3) //27 - the argument is valid so the original function is called
cube("asd") //null - Not valid according to the interceptor so null is returned 
```

# cocoa - 是否还有另一个不错的 Cocoa 文档查看器，例如“Ingredients”，它没有死？

> ID：11136364
> 
> 赞同：1
> 
> 时间：2012-06-21T10:40:13.997
> 
> 标签：cocoa, documentation

我指的是这个项目： http: [//fileability.net/ingredients/](http://fileability.net/ingredients/)

这个想法很棒，而且成分也很完美……只是它的开发似乎已经停止了。它是开源的并且在 Github 上，但它的 Github 页面 (https://github.com/fileability/Ingredients) 显示最新的贡献是在很久以前做出的。看来，无论出于何种原因，对成分的兴趣已经减弱，该项目正在消亡。这是一个耻辱！

你知道有什么类似的项目吗？

目前，我在 Alfred 中使用自定义搜索，该搜索在 Safari 中打开一个新选项卡，其中包含 Apple 的基于 Web 的文档版本。我发现它们比 Xcode 中的内置文档更易于导航。虽然这可行，但我不禁认为必须有一种更好的方式来使用这些文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:10:25.667

[Dash](http://kapeli.com/dash/)可能会满足您的需求，但它不是免费的。

# wordpress - 通过 .htaccess 托管重定向到子目录

> ID：11136366
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:23.543
> 
> 标签：wordpress, .htaccess, redirect, joomla

所以我有一个托管帐户，要求您使用域来代表您的根，然后所有子域都在域文件夹中，这似乎是程序员的噩梦。所以这是我需要知道的是否有一种方法可以将 html 或 .htaccess 文件放在我的所有子域文件夹旁边的根目录中，这些文件夹会将 www.example.com 指向 www.example.com/organizedfile 并显示 www.example .com 在 url 栏中，使其看起来不像重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:18:32.390

Imo 你应该`mod_rewrite`在你的`.htaccess`文件中使用。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

# iphone - 在 XCode 4.3.3 中为表格视图单元格添加字幕样式

> ID：11136370
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:29.457
> 
> 标签：iphone, uitableview

我有一个让我发疯的问题。我认为这很容易解决，但我无法弄清楚。我制作了一个简单的表格视图，其中包含根据两个数组的单元格。一个用于单元格中的正文，另一个用于单元格中的副标题。但问题是当我用字幕样式制作单元格时，运行应用程序时看不到它们。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if ( cell == nil){
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text = [hop objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [hop2 objectAtIndex:indexPath.row];

    return cell;
} 
```

当我调试时，我意识到当程序到达 if 块时，它不会进入块。这意味着“细胞”在那一刻不是零。问题是为什么会发生这种情况，我该如何解决？您的所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:57:17.900

我假设您正在使用 iOS5 和故事板。然后`dequeueReusableCellWithIdentifier:`即使重用堆栈中没有一个有效的单元格，也会返回一个有效的单元格。尝试在情节提要中编辑您的单元格。

这个[stackoverflow 问题](https://stackoverflow.com/questions/9142817/does-dequeuereusablecellwithidentifier-work-with-arc)应该可以帮助您了解会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:11:44.417

检查您的数组数据。我认为您没有正确插入数组。否则你没有初始化数组

# javascript - 在设置 cookie 时指定到期日期时，我可以使用哪些日期格式？

> ID：11136372
> 
> 赞同：57
> 
> 时间：2012-06-21T10:40:40.463
> 
> 标签：javascript, cookies

我正在使用一个设置 cookie 的函数。此函数允许将 cookie 名称、cookie 值和 cookie 的附加到期日期传递给它。

```
function setCookie(name, value, exdate) {
    var c_value = escape(value) + 
      ((exdate === null || exdate === undefined) ? "" : "; expires=" + exdate);
    document.cookie = name + "=" + c_value;
}; 
```

用法：

```
setCookie("my-cookie-name","my-value","Sun, 15 Jul 2012 00:00:01 GMT"); 
```

我已经使用了上述日期格式的函数，并且相信它是跨浏览器兼容的，因为我已经测试过关闭各种浏览器并重新打开它们后 cookie 是否仍然存在。我发现使用`"15 Jul 2012"`. 这种格式在 Firefox 的开发过程中对我有用，但其他浏览器似乎只将 cookie 设置为会话 cookie。

我应该坚持只使用这种格式：`"Sun, 15 Jul 2012 00:00:01 GMT"`还是有其他格式可以用于主要浏览器（IE 7-9、Firefox、Chrome、Opera、Safari）的到期日期？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-21T12:52:05.860

根据测试和进一步阅读**，cookie 需要 UTC/GMT 格式**的日期，例如**Sun, 15 Jul 2012 00:00:01 GMT**

因此，任何其他格式的日期，例如**15 Jul 2012**或**15/Jul/2012**或**07/15/2012**，都必须作为`new Date`对象传递，然后通过`toUTCString()`or`toGMTString()`函数传递。

**因此我将我的功能编辑为以下内容：**

```
function setCookie(name, value, exdate) {
    //If exdate exists then pass it as a new Date and convert to UTC format
    (exdate) && (exdate = new Date(exdate).toUTCString());
    var c_value = escape(value) + ((exdate === null || exdate === undefined) ? "" : "; expires=" + exdate);
    document.cookie = name + "=" + c_value;
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-08T21:23:53.450

[rfc 6265 中指定的用于生成 Set-Cookie 标头的语法](https://www.rfc-editor.org/rfc/rfc6265#section-4.1.1)使用
[`rfc1123-date = wkday "," SP date1 SP time SP "GMT"`](https://www.rfc-editor.org/rfc/rfc2616#section-3.3.1)cookie 日期格式，因此`"Sun, 15 Jul 2012 00:00:01 GMT"`有效。

如果我理解正确，[解析算法](https://www.rfc-editor.org/rfc/rfc6265#section-5.1)将识别其他格式，例如： `00:00:01 15 jul 2012`但不应生成它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-08T04:52:42.323

找到日期格式`ddd, dd MMM yyyy HH':'mm':'ss 'GMT'`。愿有人发现有用。[这里](https://gist.github.com/y-gagar1n/8469484)也是很好的参考

# arrays - Smarty 2：以字符串为键调用数组

> ID：11136373
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:41.397
> 
> 标签：arrays, dynamic, key, smarty, smarty2

我有这个数组`{$man_data}`，其结构类似于

```
10 > 'Text 8'
14 > 'Text 12'
24 > 'Text 13' 
```

并`{$entry.client_id}`返回一个整数（10、14 或 24）。我不知道如何使用键 $entry.client_id 调用 $man_data？

我试过：`{$man_data.{$entry.client_id}}`，，`{$man_data.{entry.client_id}}`...`{$man_data.$entry.client_id}`有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:46:12.800

你有没有尝试过：

```
{$man_data[$entry.client_id]} 
```

# java - 使用 Jackson 将 Map 转换为 JsonParser

> ID：11136376
> 
> 赞同：0
> 
> 时间：2012-06-21T10:40:57.507
> 
> 标签：java, json, jackson

我想利用 Jackson 库的 JsonParser API 类。但是，构建一个 json 字符串构建器对我来说是相当乏味的。所以我使用 Map 来包含我的 Json 对象的值。

```
 Map<String,Object> myMainMap = new HashMap<String,Object>();
   Map<String,String> myMap = new HashMap<String,String>();
   myMap.put("node1","value1");
   myMap.put("node2","value2");
   myMainMap.put("rootNode",myMap); 
```

如何将此 Map 转换为 org.codehaus.jackson.JsonParser 以便我可以利用此 API 可用的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:27:59.887

```
ObjectMapper mapper = new ObjectMapper();
System.out.println(mapper.writeValueAsString(myMap) ); 
```

# perl - GD::Graph::histogram 无法正常工作

> ID：11136380
> 
> 赞同：2
> 
> 时间：2012-06-21T10:40:58.323
> 
> 标签：perl, graph

我正在尝试使用[GD::Graph::histogram](http://search.cpan.org/~whizdog/GDGraph-histogram-1.1/lib/GD/Graph/histogram.pm)，根据存储在哈希中的一些数据创建直方图。我的代码如下所示：

```
sub __gen_pval_histogram {
    my ($tbl_ref, $outfile, $outdir) = @_;
    my $data = [values %$tbl_ref];
    foreach (@$data) {
        $_ = int( -1 * log($_)/log(10) );
    }

    my $hist = new GD::Graph::histogram(400,600);
    $hist->set (x_label      => "p-value",
        y_label      => "count",
        title        => "$outfile",
        x_labels_vertical => 1,
        bar_spacing  => 0,
        shadow_depth => 1,
        shadowclr    => 'dred',
        transparent  => 0,
    ) or warn $hist->error;

    my $out = $hist->plot($data) or die $hist->error;

    open my $file, ">", "$outdir/$outfile" or
        die "Couldn't open $outdir/$outfile: '$?'";
    binmode $file;
    print {$file} $out->png;
    print "Created histogram at $outdir/$outfile\n";
}

my %hash = (a => 0.0000009, b => 0.000034, c => 0.00045, d => 0.0000000012, e => 0.00000098);

__gen_pval_histogram \%hash, "hist.png", "."; 
```

运行此命令会在调用 plot 函数时生成错误并生成错误的直方图：

```
Use of uninitialized value in string eq at /usr/lib/perl5/vendor_perl/5.12.4/GD/Graph/histogram.pm line 42. 
```

显然，我将数据传递给函数的方式有问题。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T14:44:06.223

GD::Graph::Histogram 中的第 42 行是指参数 histogram_type，它应该默认为 Count，但看起来默认不起作用。

所以尝试包括

```
histogram_type => 'count', 
```

# xdebug - xdebug + phpstorm +typo3 扩展

> ID：11136381
> 
> 赞同：2
> 
> 时间：2012-06-21T10:40:58.693
> 
> 标签：xdebug, typo3, phpstorm

我正在尝试在我的远程 ubuntu 服务器上运行调试以调试typo3 扩展。

我已经在我的机器上安装了 XDebug 2.2.0 和 PHP-Storm 4.0。似乎一切正常。如果我在任何核心类上设置断点，它就会被命中。一旦我在我的扩展中设置断点 - 它就会被忽略。我最接近的页面上我的扩展在这个地方有些中断：class.t3lib_svbase.php：第 668 行

我尝试了我找到的所有教程，但没有帮助我让它工作......

有任何想法吗？

回答：非常感谢您的提示！这是两个配置错误的组合：1）它实际上是一个符号链接问题。我试图映射到符号链接文件夹... 2）为了能够调试 xdebug.ini 必须具有以下几行的东西，否则什么也不会发生！

```
xdebug.auto_trace=1
xdebug.collect_includes=1
xdebug.collect_params=1
xdebug.collect_return=1
xdebug.default_enable=1
xdebug.extended_info=1 
```

出于某种有趣的原因

```
xdebug.remote_autostart=1 
```

也必须在 ini 中设置。如果不是，它是用 GET-Var 或 ini_set() 设置的，它不会在扩展名处中断......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-21T09:00:30.493

这是两个配置错误的组合：

*   这实际上是一个符号链接问题。我试图映射到符号链接的文件夹......
*   为了能够调试 xdebug.ini 必须有以下几行

否则什么都不会发生！！

```
xdebug.auto_trace=1
xdebug.collect_includes=1
xdebug.collect_params=1
xdebug.collect_return=1
xdebug.default_enable=1
xdebug.extended_info=1 
```

出于某种有趣的原因

```
xdebug.remote_autostart=1 
```

也必须在 ini 中设置。如果不是，它是用 GET-Var 或 ini_set() 设置的，它不会在扩展名处中断......

# c# - IEnumerable 之间的差异 Where & IQueryable Where 扩展方法

> ID：11136382
> 
> 赞同：2
> 
> 时间：2012-06-21T10:41:00.477
> 
> 标签：c#, .net, linq, lambda, extension-methods

之间有什么区别

```
public static IEnumerable<TSource> Where<TSource>
        (this IEnumerable<TSource> source, Func<TSource, bool> predicate) 
```

和

```
public static IQueryable<TSource> Where<TSource>
        (this IQueryable<TSource> source, 
         Expression<Func<TSource, bool>> predicate) 
```

两种方法都可以以相同的方式接受 lambda 表达式。

```
List<string> fruits =
                new List<string> { "apple", "passionfruit", "banana", "mango", 
                                "orange", "blueberry", "grape", "strawberry" };
IEnumerable<string> query = fruits.Where(fruit => fruit.Length < 6); 
```

为什么存在委托函数和委托函数的表达式？我必须照顾它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:49:16.980

An`IEnumerable`只是一系列 C# 项。在 C# 中，字面上的`IEnumerable`版本只是迭代 input 中的项目，针对委托函数测试它们，并产生匹配的项目。`Select``IEnumerable`

然而，一个`IQueryable`可以表示例如 SQL 表中的项目。（或许多其他类型的数据源，但 SQL 可能是最常见的。） 的`IQueryable`版本`Select`可以将表达式转换为 SQL 查询（或类似查询）的一部分，并将决定哪些项目返回给 SQL 的负担服务器（或类似服务器）。

您真的不必*担心*这种区别——LINQ 可以为您隐藏所有这些细节。如果要查询 C# 对象列表，它将使用`IEnumerable`版本；如果您通过 Linq-to-SQL 查询 SQL，它将使用该`IQueryable`版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:42:23.793

一个工作`IEnumerable<T>`，另一个工作`IQueryable<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:49:46.197

当您有`IQueryable<T>`一个最终使用的数据源（SqlServer 或其他）尚未查询时，生成的 sql 仍然可以通过附加条件进行修改。

当您拥有一个`IEnumerable<T>`可能的查询时，您将只过滤集合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T10:50:31.033

OR Mapper 的回答是最充分和最简单的。我认为您需要检查的是[IEnumerable 和 IQueryable 之间的区别](https://stackoverflow.com/questions/252785/what-is-the-difference-between-iqueryablet-and-ienumerablet)，您可以在[此处](https://stackoverflow.com/questions/252785/what-is-the-difference-between-iqueryablet-and-ienumerablet)找到。

# android - 使用微调器，应用程序可以正常工作，但是单击按钮时会显示错误

> ID：11136383
> 
> 赞同：0
> 
> 时间：2012-06-21T10:41:06.253
> 
> 标签：android, android-spinner

这里是编码

```
 <Button
        android:id="@+id/conv"
        android:layout_width="150dp"
        android:layout_height="70dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="76dp"
        android:text="Convert" 
        android:onClick="onCreate"/> 
```

* * *

```
public class LstActivity extends Activity {

EditText et;
TextView tv;
Button b1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState ) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et=(EditText)findViewById(R.id.editText1);

 Spinner spinner=(Spinner)findViewById(R.id.spinner1);
 Spinner s2=(Spinner)findViewById(R.id.spinner2);

 ArrayAdapter<?> adapter=ArrayAdapter.createFromResource(this, R.array.weight, android.R.layout.simple_spinner_item);
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 spinner.setAdapter(adapter);    
  spinner.setOnItemSelectedListener(new myaction());

  tv=(TextView)findViewById(R.id.textView3);

  ArrayAdapter<?> adapter1=ArrayAdapter.createFromResource(this, R.array.weight, android.R.layout.simple_spinner_item);
  adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  s2.setAdapter(adapter1);    
   s2.setOnItemSelectedListener(new myaction2());
   b1=(Button)findViewById(R.id.conv);
   et.setText("0");

   float x=(Float.parseFloat(String.valueOf(et.getText())));

   if ((spinner.getSelectedItemPosition()==2) && ((s2.getSelectedItemPosition()==1)))
   {

       tv.setText(String.valueOf(gmtomilli(x)+"mg"));
   }

   } 
```

该应用程序可以正常启动，但是单击该按钮时，会显示以下错误。

```
06-21 15:48:46.509: E/AndroidRuntime(2260): java.lang.IllegalStateException: Could not find a method onCreate(View) in the activity class kk.and.LstActivity for onClick handler on view class android.widget.Button with id 'conv' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:16:34.407

使用代码扩展 Samir 的答案（将 更改`android:onClick="onCreate"`为`android:onClick="btnclick"`），向您展示如何使其工作：

```
public class LstActivity extends Activity {   

    EditText et;   
    TextView tv;   
    Button b1;   
    Spinner spinner;
    Spinner s2;
    float x;

    @Override  
    public void onCreate(Bundle savedInstanceState ) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.main);  

        spinner=(Spinner)findViewById(R.id.spinner1);      
        s2=(Spinner)findViewById(R.id.spinner2);     

        // your other code

        x=(Float.parseFloat(String.valueOf(et.getText())));           

    } 

    public void btnclick(View v){       
          if ((spinner.getSelectedItemPosition()==2) && ((s2.getSelectedItemPosition()==1))) {            
            tv.setText(String.valueOf(gmtomilli(x)+"mg"));            
          }     
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:43:11.600

当您`android:onClick="onCreate"`在按钮中使用时，要处理按钮单击事件，您必须`onCreate(View v)`在您的活动中创建函数 a

```
 Button
        android:id="@+id/conv" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:47:26.603

当我查看上面的代码时，按钮没有点击处理程序:)

尝试这个：

```
 <Button
        android:id="@+id/conv"
        android:layout_width="150dp"
        android:layout_height="70dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="76dp"
        android:text="Convert" 
        android:onClick="click_view"/> 
```

并在您的 java 代码中创建一个方法 click_view，如下所示：

```
public void click_view(View v){
  //your to-do code here...
} 
```

# html - 如何在网页上由 JSP 标签编写的无序列表上应用 CSS

> ID：11136386
> 
> 赞同：0
> 
> 时间：2012-06-21T10:41:21.250
> 
> 标签：html, css, jsp

我有一个 JSP 自定义标签

```
<ex:UndorderdList list="<%= MenuItems%>"></ex:UndorderdList> 
```

最终创建无序列表并 在网页上使用**jsTree显示树。**

在我的自定义标签 java 文件中，我有：-

```
pageContext.getOut().write(htmlString); 
```

这里 htmlString 包含我的无序列表。我想在我的无序列表中的每个项目前面显示一个图像。

我使用 jsTree.js 创建树，它再次呈现页面。`$(document).ready(function() { $("#UndorderdList").jstree(); });`这是在`<head>`所以，我想我应该在这个方法调用之后做点什么。但我不知道我该怎么做。:(

我需要帮助/指导。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:51:06.530

与使用纯 HTML 相同的方式；通过`list-style-image`对无序列表应用 CSS 规则。

还有其他方法（例如授予列表项具有伪元素，并为其应用背景图像），但`list-style-image`得到最广泛的支持。

**参考：**

*   [`list-style-image`在 Mozilla 开发者网络上](https://developer.mozilla.org/en/CSS/list-style-image)
*   [关于创建三角形子弹的 CSS-Tricks 参考](http://css-tricks.com/snippets/css/triangular-list-bullets/)（也可用于图像）
*   [MacWorld 上关于列表自定义项目符号的文章](http://www.macworld.com/article/1048296/januarycreate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:51:52.593

我对 JSP 了解不多，但我确信如果您可以将 CSS 文件附加到您的应用程序和目标，`<ul> and <li>` 在您的样式上，它应该呈现样式。最终您的代码最终会出现在浏览器中。在[此处](http://css.maxdesign.com.au/listamatic/vertical05.htm)查看如何获取图像作为您`li`的项目符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:18:56.783

使用以下 import 语句导入 java.util.List：

```
<%@ page import="java.util.List" %> 
```

顺便说一句，要导入多个类，请使用以下格式：

```
<%@ page import="package1.myClass1,package2.myClass2,....,packageN.myClassN" %> 
```

# visual-studio-2008 - opencv 2.2.0 surfFeaturedetector

> ID：11136389
> 
> 赞同：0
> 
> 时间：2012-06-21T10:41:30.953
> 
> 标签：visual-studio-2008, dll, opencv, linker

我正在使用带有 Visual Studio 2008 的 open cv 2.2.0 版，我正在做一些图像处理尝试了很多事情，但我在做 SURF 匹配时遇到了困难......在这里给出了一些错误......

错误 2 错误 LNK2019：函数 _main test1.obj cvtest2008 中引用的未解析外部符号“public: __thiscall cv::SurfFeatureDetector::SurfFeatureDetector(double,int,int)”(??0SurfFeatureDetector@cv@@QAE@NHH@Z)

错误 3 错误 LNK2019：未解析的外部符号“public: virtual __thiscall cv::FeatureDetector::~FeatureDetector(void)”(??1FeatureDetector@cv@@UAE@XZ) 在函数“public: virtual __thiscall cv::SurfFeatureDetector: :~SurfFeatureDetector(void)" (??1SurfFeatureDetector@cv@@UAE@XZ) test1.obj cvtest2008

错误 4 致命错误 LNK1120: 2 unresolved externals C:\Documents and Settings\User.MYPC\Desktop\cvtest2008\Debug\cvtest2008.exe cvtest2008

这是我的简单代码...

```
#include <iostream>
#include <vector>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/features2d/features2d.hpp>

int main() {

    // Read input images
    cv::Mat image1= cv::imread("i1.jpg",0);
    cv::Mat image2= cv::imread("i2.jpg",0);
    if (!image1.data || !image2.data)
        return 0; 

    // Display the images
    cv::namedWindow("Right Image");
    cv::imshow("Right Image",image1);
    cv::namedWindow("Left Image");
    cv::imshow("Left Image",image2);

    // vector of keypoints
    std::vector<cv::KeyPoint> keypoints1;
    std::vector<cv::KeyPoint> keypoints2;

    // Construction of the SURF feature detector 
    cv::SurfFeatureDetector surf(3000);

    cv::waitKey();

    return 0;
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:50:17.757

我不是 C++ 程序员，但看起来你的链接器不知道你的 opencv 库在哪里。对于 2.2，我相信他们在这里：

`...\OpenCV2.2\lib`

在我的[这个 SO 问题](https://stackoverflow.com/questions/10664658/how-to-get-a-python-pyd-for-windows-from-c-c-source-code)中，很多都不适用，但链接和库部分可能是您需要的。当然忽略我最初的问题并跳到任何一个答案。

# java - Java，ThreadPoolExecutor，afterExecute，重新提交任务？

> ID：11136390
> 
> 赞同：2
> 
> 时间：2012-06-21T10:41:34.490
> 
> 标签：java, multithreading

我需要再次对队列执行正确完成的任务（某种循环）。是否可以重写 afterExecute 方法并调用 getQueue().offer(runnable); ? 我担心线程同步，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:00:49.197

执行者可能会运行不同的任务，而不仅仅是您要重复的任务。因此，在覆盖的 afterExecute 方法中，您应该确定完成的任务是否是要重复的任务。结果，执行者知道特定的任务。这是一个糟糕的设计，INHO。

考虑使用 ScheduledThreadPoolExecutor.scheduleWithFixedDelay()。但是，它要求延迟>0，但您可以将延迟设置为 1 纳秒。

另一种选择（我更喜欢）是将您的任务包装在另一个 Runnable 中，如果嵌套任务正确完成，它将重新提交自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:18:18.773

你的提议应该没有问题。但是，不要调用`getQueue().offer()`，而只是调用`submit()`executor 服务。另外，由于`afterExecute`是受保护的方法，我假设您已经创建了一个子类`ThreadPoolExecutorService`？一定要调用`super.afterExecute()`你的`afterExecute`方法。

就个人而言，我喜欢负责将 Runnables 放在服务上的提交者类的想法。执行完成时使用回调通知提交者（可能使用 a`Callable`而不是 a `Runnable`）并且提交者确定是否应重新提交任务。这可以很好地隔离潜在的关注点。

最后，@Alexei 的建议可能是很好的建议，可以作为 subclassing 的更标准替代方案`ThreadPoolExecutorService`。

# ruby-on-rails - ruby on rails 仅加载 1 个 css 和 js 文件

> ID：11136392
> 
> 赞同：1
> 
> 时间：2012-06-21T10:41:42.170
> 
> 标签：ruby-on-rails, ruby, controller

我是新手`ruby on rails`，每当我创建并且我可以看到它加载一个名称为控制器名称的新`access`文件...`controller``css & js`

我怎样才能让它只加载一个**名为** `css and js`的文件`style.css`，`site.js`例如？

`js & css`每当我访问控制器时拥有多个文件的目的是什么？

如果我去`application.html.erb`改变

```
 <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %> 
```

至

```
 <%= stylesheet_link_tag("application") %>
  <%= javascript_include_tag("application") %> 
```

它似乎没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:03:31.233

我不知道您使用的是哪个 Rails 版本，但假设它是最新版本，那么 Rails 正在使用 Assets Pipeline 来合并多个文件并提供所有压缩/合并的 css / javascript 文件。

您可以在[http://guides.rubyonrails.org/asset_pipeline.html了解更多信息](http://guides.rubyonrails.org/asset_pipeline.html)

基本上你所做的是，你引用一个文件'应用程序'（css或js）并在这个文件中，你自定义它应该包含哪些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:28:03.323

编码：

```
<%= stylesheet_link_tag    "application", :media => "all" %>
<%= javascript_include_tag "application" %> 
```

将包括和中可用的所有`.css`和`.js`文件。因此，如果您只想包含并删除其他所有内容。`assets/javascripts/``assets/stylesheets/``style.css``site.js`

你`assets/javascripts/`应该只有`application.js`and `site.js`。

你`assets/stylesheets/`应该有`application.css`and `style.css`。

**编辑**

``application.js`并且`application.css`是[资产管道](http://guides.rubyonrails.org/asset_pipeline.html#what-is-the-asset-pipeline)的一部分。

如果需要，您可以通过在您的`application.rb`

```
config.assets.enabled = false 
```

您还可以将 更改`application.html.erb`为仅包含您的`style.css`and `site.js`：

```
<%= stylesheet_link_tag    "style", :media => "all" %>
<%= javascript_include_tag "site" %> 
```

我希望它有帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:01:45.960

尝试使用`:cache => 'cache-display'`

```
<%= stylesheet_link_tag :all, :cache => 'cache/display' %>
<%= javascript_include_tag :all, :cache => 'cache/display' %> 
```

# ruby-on-rails - Puppet 模块存储库和 puppet 依赖解析

> ID：11136394
> 
> 赞同：1
> 
> 时间：2012-06-21T10:41:48.807
> 
> 标签：ruby-on-rails, ruby, puppet

我只是想找出 puppet 是否有类似于 maven repo 的东西，它允许我在 IDE(geppetto) 中解决我的 puppet 依赖项，而无需在本地拥有所有模块？作为一名 java 开发人员，在 Eclipse 中解决了我的所有依赖项后，我无法忍受我的 geppetto 中的所有红线都说某些模块是未知资源。

例如。

```
define mymodule:A() {
    anothermodule:B
} 
```

如上面的示例，无论如何我可以将“另一个模块”放在回购中，配置指向回购的本地木偶并解决我的依赖关系吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:45:28.930

简短的回答，不。

但是，您可以为每个项目或每个工作区设置一个“Puppet 搜索路径”并将其指向本地存储库。

此外，我从 geppetto 用户列表中看到的一件事是创建一个虚拟项目，然后将其设置为链接或引用项目。

# html - 以单一形式提交文本和图像/视频

> ID：11136397
> 
> 赞同：2
> 
> 时间：2012-06-21T10:41:58.347
> 
> 标签：html

我正在社交网站上工作，用户可以在其中发布照片和文本，例如 facebook 墙贴。表单类型应该是什么。有没有例子请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:49:48.343

您的表单应该将 enctype 设置为“ **multipart/form-data** ”。

这是一个例子：

```
<form method="post" action="index.php" enctype="multipart/form-data">
    <input type="text" name="text">
    <input type="file" name="video">
    <input type="submit" name="just_a_button">
</form> 
```

当然，您需要在服务器端使用适当的 PHP（或其他服务器端语言）脚本来处理此类表单。

浏览器和服务器端（PHP 环境配置）可能会出现最大文件大小的附加限制。因此，对于发送视频文件，我强烈建议考虑一些现成的插件，用于 jQuery、Flash 上传器或其他东西，这些插件可以逐部分传输正在发送的文件，而不是一次发送整个文件。通常，由于这些限制，仅通过简单的 HTML 表单就很难发送 30-50 MB 或更大的文件。

# session - 数字和日期格式：更改 NLS_SESSION_PARAMETER 不起作用？

> ID：11136402
> 
> 赞同：8
> 
> 时间：2012-06-21T10:42:16.577
> 
> 标签：session, oracle-apex, number-formatting, date-formatting, nls

甲骨文 11.2.0.3.0，APEX 4.1.1.00.23。

我们需要在我们的应用程序中以英文格式显示**数字**`FM999999999990.000`和**日期**`DD-MON-YYYY`。

即使应用程序语言要改变（法语、西班牙等），我们总是需要这种格式的数字（组分隔符没有空格或逗号，小数点分隔符，*即 -1254.010*）和日期（3英文月份名称的第一个字母，*即 12-FEB-2012*）。

以下是我们正在使用的**全球化属性（***应用程序生成器 -> 应用程序 -> 编辑全球化属性*）：

*   申请主要语言：*法语（法国）（fr）*
*   应用程序语言源自：*会话*
*   申请日期格式：*DD-MON-YYYY*

我无法让它按预期工作......我仍然得到像`-1254,01`和日期这样的数字`12-FÉVR.-2012`而不是`-1254.010`和`12-FEB-2012`。似乎 APEX 忽略了任何更改会话的调用...

我尝试在“**初始化 PL/SQL 代码**”属性（*应用程序生成器 -> 应用程序 -> 编辑安全属性*）中输入以下代码，但没有成功：

```
BEGIN
   EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_NUMERIC_CHARACTERS= ''.,'' ';
   EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_DATE_LANGUAGE = ''AMERICAN'' ';
   EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_LANGUAGE = ''AMERICAN'' ';
END; 
```

我有一个包含以下查询的报告，以查看参数是否正在更改：

```
SELECT
  a1.parameter as "Parameter",
  a1.value as "Database value",
  a2.value as "Instance value",
  a3.value as "Session value"
FROM
  nls_database_parameters a1
  LEFT JOIN nls_instance_parameters a2 ON a1.parameter = a2.parameter
  LEFT JOIN nls_session_parameters a3 ON a1.parameter = a3.parameter
ORDER BY
  a1.parameter asc; 
```

结果：

![报告 NLS 参数没有变化](../Images/e2c163fe08fd7cd8ebcf1167c7c979b2.png)

如您所见，`ALTER SESSION`电话不会改变任何东西...

当我尝试在“ **Before Header**`ALTER SESSION` ”应用程序流程中调用时，会话似乎被更改（报告显示修改后的值），但我的报告和项目中的日期和数字格式仍然错误......我尝试了“**格式掩码**” “**数字字段**”项目的属性，但它似乎也没有改变任何东西......

 ******我可以让它工作的唯一方法是调用`ALTER SESSION`我从 APEX 调用的每个 PL/SQL 函数。对于报告，我可以使用“数字/日期格式”列属性。

**问题：**有什么方法可以更改整个应用程序会话的数字和日期参数？

* * *

## 编辑 ：

当我在每个页面上运行以下**Before Header 进程时：**

```
BEGIN
   APEX_UTIL.SET_SESSION_LANG('fr');
   EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_NUMERIC_CHARACTERS= ''.,'' ';
   EXECUTE IMMEDIATE 'ALTER SESSION SET NLS_DATE_LANGUAGE = ''AMERICAN'' ';
END; 
```

报告显示会话已更改：

![报告 NLS 参数](../Images/b2800bb7f202863a8235d7c7a1a49717.png)

然后我创建了一个新的测试页面：

1.  上面的Before Header过程。
2.  显示 NLS 参数值的报告。
3.  一份显示我的一张表中的日期和数字的报告。
4.  源类型为“SQL 查询”的文本字段项以获取日期。
5.  源类型为“SQL 查询”的数字字段项以获取数字。
6.  一个与 JQuery 绑定的按钮，它调用一个应用程序进程，该进程调用一个 PL/SQL 过程，该过程`htp.prn()`从表中获取日期，然后填充我的文本字段项。
7.  一个与 JQuery 绑定的按钮，用于插入（使用应用程序进程等）表中的两个字段。

加载页面后，报告显示会话已正确更改，并且我在项目和报告中获得了正确的数字和日期格式。“插入”按钮可以毫无问题地进行插入。

当我单击“getDate”按钮以使用 ajax 调用从数据库中获取日期时，我得到的是法语格式的日期！然后“插入”按钮失败（`invalid date`）。

**您是否知道为什么从 JavaScript 获取值**（对在包中调用 PL/SQL 函数的按需应用程序进程进行 ajax 调用）**会导致问题？**

并且在我的其他现有页面中仍然很奇怪，即使我使用相同的 Before Header 流程​​，我在报告中的格式也错误。我们必须和我的同事一起更多地研究这个问题，也许我们在某处有一段“隐藏”的代码会破坏一切。

我查看了页面的调试消息数据，但对我来说没什么奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-15T00:40:16.390

您是否在 Apex 应用程序中使用它？如果是这样，则应用程序创建过程的一部分是指定 NLS 相关值。Apex 将始终使用应用程序设置覆盖您的设置。

[![在此处输入图像描述](../Images/a6019a8b2efb856b21f54b87d7633162.png)](https://i.stack.imgur.com/utcmV.png)

我总是创建具有固定 NLS 值的应用程序，因此我确信日期和数字会正确显示。

您可以拥有 Apex 切换 NLS 设置（应用程序首选项、项目首选项）。那些工作得很好。

但是您需要在应用程序级别而不是数据库级别执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-21T06:45:18.220

从 apex-client 到服务器的每个调用都是单独的 oracle 会话。它回答了为什么你会通过 js 回调得到错误的格式。

你试过这个吗？

Application Express 会话语言可以通过**APEX_UTIL.SET_SESSION_LANG**过程或通过 URL 中 F 过程的**P_LANG**参数进行设置。

您也可以尝试将初始化代码放在这里：安全属性 -> 数据库会话 -> 初始化 PL/SQL 代码。但我不确定回调。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:37:54.447

很抱歉，我不能告诉你为什么全球化属性没有“坚持”跨语言，因为我很幸运不必担心它。您是否尝试过在此处使用替换变量而不是将文字放入？它*不应该*解决这个问题，但值得一试，嗯？我尝试了一下，设置应用程序项的值：= SYSDATE。当我更改应用程序->全局设置->应用程序日期格式时，每次我重新显示页面项目所在的页面时，它都会应用指定的格式。

另外，我很难想象您的用户有权更改 APEX_PUBLIC_USER 模式的会话，这是运行您的应用程序的地方。也就是说，我很难想象 DBA 会授予该权限，因为这对于该帐户来说似乎非常危险。

此外，请记住 Apex 会话（如 URL 中的会话 ID 所示）与 Oracle 会话不同。因此，您上面的匿名块实际上可能能够更改它在上面提到的测试页面运行的 Oracle 会话中的会话，但是您与数据库的 AJAX 调用会话将在不同的 Oracle 会话中运行。所以“ALTER SESSION”对它没有影响。

我希望这个讨论可以帮助你找到你的答案。如果有，请给我道具！:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-27T13:25:59.980

我不知道它是否回答了你的问题，但这个链接刚刚拯救了我的一天：

*   [为 Oracle 数据库设置 NLS_LANG 环境变量](http://docs.oracle.com/cd/E12102_01/books/AnyInstAdm784/AnyInstAdmPreInstall18.html)

就我而言，我有一个法国环境，我需要一个“美国 Oracle 数据库”（本地化）。每次我为我创建一个会话时，`sqlldr`我都有一个法语 NLS（尽管我需要一个美国 NLS）。

这是此页面的副本，以防它消失：

* * *

* * *

## 按照此过程`NLS_LANG`为 Oracle 数据库设置环境变量。

要`NLS_LANG`为 Oracle 数据库设置环境变量，我们必须确定`NLS_LANG`值。

运行命令：

```
SELECT * FROM V$NLS_PARAMETERS 
```

记下格式为 的 NLS_LANG 值`[NLS_LANGUAGE]_[NLS_TERRITORY].[NLS_CHARACTERSET]`。

例如：**American_America.UTF8**

## 对于 Windows：

*   导航到`Control Panel > System`并单击`Advanced tab`。单击`Environment Variables`。
*   在`System variables`部分中，单击`New`。
*   在变量名称字段中，输入`NLS_LANG`。
*   在变量值字段中，输入在步骤 1 中返回的 NLS_LANG 值（例如：）`American_America.UTF8`。

## 对于 UNIX，如下所示设置变量：

```
setenv NLS_LANG <NLS_LANG> 
```

例如：

```
setenv NLS_LANG American_America.UTF8. 
```

如果您的数据是 7 位或 8 位 ASCII 并且 Informatica Server 在 UNIX 上运行，则设置

```
NLS_LANG <NLS_LANGUAGE>_<NLS_TERRITORY>.WE8ISO8859P1 
```

**注意**：确保按照此过程中的说明正确设置 NLS_LANG 变量，否则您的数据将无法正确显示。

**创建变量后重新启动机器。********

# facebook-graph-api - 使用graph api按名称从facebook获取朋友列表？

> ID：11136404
> 
> 赞同：3
> 
> 时间：2012-06-21T10:42:18.347
> 
> 标签：facebook-graph-api, ios5, xcode4

我正在使用图形 api 获取朋友列表。我已经搜索了很多以按顺序获取名称。无论如何（进行排序）从图形 api 获取排序名称？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:00:24.433

您可以在 FQL 中执行此操作。

[SELECT uid, name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) ORDER BY name](http://developers.facebook.com/tools/explorer?fql=SELECT%20uid%2C%20name%20FROM%20user%20WHERE%20uid%20IN%20(SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me())%20ORDER%20BY%20name)

（使用[https://graph.facebook.com/fql?q=QUERY](https://graph.facebook.com/fql?q=QUERY)在 Graph API 中运行 FQL 查询。）

# c - 从 C 中的 32 位浮点数中提取位

> ID：11136408
> 
> 赞同：1
> 
> 时间：2012-06-21T10:42:26.670
> 
> 标签：c, opencv, floating-point, bit-manipulation, ieee-754

32 位使用 IEEE 格式以二进制表示。那么我怎样才能提取这些位呢？& 和 | 等按位运算 不要对他们工作！我基本上想做的是提前从opencv thanx中的32位浮点图像中提取LSB！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:53:36.267

您可以使用联合来安全地提取值（[演示](http://ideone.com/o82fN)）：

```
union fi_t
{
    unsigned int i;
    float f;
};

fi_t fi;
fi.f = 1.5;
unsigned int i = fi.i; 
```

（只是从不进行类型转换，这将调用 dreaded `ftol`，它可能使用 SSE2 转换为整数形式，或者`FISTP`，它不会产生您所追求的 IEEE 位）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T11:02:07.647

```
uint32_t get_float_bits(float f) {
    assert(sizeof(float) == sizeof(uint32_t)); // or static assert
    uint32_t bits;
    memcpy(&bits, &f, sizeof f);
    return bits;
} 
```

从 C99 开始，标准保证联合技巧有效（前提是大小匹配），并且实现通常甚至在需要之前就保证了它。就个人而言，我不知道人们在其中看到了什么，我更喜欢这个。

如果您只想要 LSB，并且您知道字节序，则可以直接访问 float 的一个字节，而无需任何`memcpy`、 或 union 或违反严格别名。

```
int lsb = ((unsigned char*)&f)[0] & 1; // little-endian
int lsb = ((unsigned char*)&f)[sizeof(float)-1] & 1; // big-endian 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:48:45.833

```
#include<stdio.h>
union abc
{
    float fo;
    unsigned int no;
};
int main()
{   
    union abc test;
    test.fo=36.5;
    unsigned int x=test.no;
    for( int i = 0; i < sizeof(float)*8; i++ )
    {
        printf("%d", x & 0x1);
        x = x >> 1;
    }

    return 0;
} 
```

这是一种提取浮点数的方法！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T10:43:22.363

老套路：

```
float num = 0.5;
uint32_t binary_representation = *(uint32_t *)&num; 
```

# text-editor - 如何从 sublimetext2 中省略某些语言？

> ID：11136416
> 
> 赞同：0
> 
> 时间：2012-06-21T10:42:59.453
> 
> 标签：text-editor, sublimetext2

我正在使用[sublimetext2](http://www.sublimetext.com/2)，我使用了 sublimetext v1 并且它有这个选项来编辑它显示的语言，在第二个版本中我找不到这个选项，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:52:57.937

好的，我想我找到了一个解决方案，尽管它不是最佳的，您基本上可以将 /sublimetext/Pristine Packages 中的语言文件移动到语言消失的另一个文件夹，我宁愿有一个配置文件，其中包含将语言列入白名单的选项我每天都在名单上。有没有人有更好的解决方案？

# java - 解析 XML 文档中的非 ASCII 字符

> ID：11136419
> 
> 赞同：1
> 
> 时间：2012-06-21T10:43:07.373
> 
> 标签：java, xml, character-encoding, xml-parsing, sax

我正在尝试使用 SAX 解析器解析这个 XML 文档：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE WIN_TPBOUND_MESSAGES SYSTEM "tpbound_messages_v1.dtd">
<WIN_TPBOUND_MESSAGES>
    <SMSTOTP>
        <SOURCE_ADDR>+447522579247</SOURCE_ADDR>
        <TEXT>TEST: @£$¥èéùìò?ØøÅå&amp; ^{}\\[~]¡&#8364;ÆæßÉ!\"#¤%'()*+,-./0123456789:;&lt;=&gt;? ÄÖÑÜ§¿äöñüà end</TEXT>
        <WINTRANSACTIONID>652193268</WINTRANSACTIONID>
    </SMSTOTP>
</WIN_TPBOUND_MESSAGES> 
```

解析`<TEXT>`元素后，内容转换为：

```
TEST: @Â£$Â¥Ã¨Ã©Ã¹Ã¬Ã²?Ã�Ã¸Ã�Ã¥& ^{}\\[~]Â¡€Ã�Ã¦Ã�Ã�!\"#Â¤%'()*+,-./0123456789:;<=>? Ã�Ã�Ã�Ã�Â§Â¿Ã¤Ã¶Ã±Ã¼Ã  end 
```

很明显，非 ASCII 字符发生了一些不好的事情。解析 XML 的代码如下所示：

```
public void parse(InputStream xmlStream) throws WinGatewayException {
    XMLReader parser = XMLReaderFactory.createXMLReader("org.apache.xerces.parsers.SAXParser");
    parser.setContentHandler(this);
    parser.setErrorHandler(error);
    parser.setEntityResolver(new DTDResolver());
    parser.setDTDHandler(this);
    parser.setFeature("http://xml.org/sax/features/validation", true);
    parser.setFeature("http://apache.org/xml/features/validation/schema", true);
    parser.setFeature("http://apache.org/xml/features/nonvalidating/load-dtd-grammar", true);
    parser.setFeature("http://xml.org/sax/features/namespace-prefixes", true);
    parser.setFeature("http://apache.org/xml/features/continue-after-fatal-error", false);
    parser.parse(new InputSource(xmlStream));
} 
```

并且引用的对象`this`具有以下方法：

```
public void endElement(String uri, String localName, String qName)
        throws SAXException {

        if (localName.equals("TEXT")) {   
            logger.debug("Parsed message text: " + cData.toString());
            message.setText(cData.toString());
        }
} 
```

为什么 XML 解析器不保留这些非 ASCII 字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:00:48.570

我相信您的 XML 文件*实际上*是 UTF-8 而不是 ISO-8859-1。

ISO-8859-1 编码的文件每个字符有一个字节，因此英国磅符号将是一个单字节 0xA3。但是，您的文件看起来有 0xC2 0xA3，这是您在 UTF-8 中为 U+00A3 获得的字节序列。

更改 XML 声明以反映这一点：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

看看是否能解决问题。假设确实如此，那么您首先需要弄清楚是什么产生了这些不良数据。

# c - C中奇怪的四舍五入

> ID：11136427
> 
> 赞同：3
> 
> 时间：2012-06-21T10:43:24.870
> 
> 标签：c, double, precision, rounding

> **可能重复：**
> [C编程部门](https://stackoverflow.com/questions/8906722/c-programming-division)

在下面的代码示例中，结果应该产生 130.0，但一旦编译，我得到 129.0。右侧是否没有产生足够的精度来获得准确的结果？有没有解决的办法？

```
#include<stdio.h>
int main(void) {
    double sum = ((117+130)/3) + ((130+13)/3);
    printf("sum: %f\n", sum);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T10:46:04.893

您正在观察的是 **整数截断**的结果。当用两个整数操作数进行整数除法时，结果将是另一个整数，*小数*部分被丢弃。请注意，这与舍入不同，例如，截断 3.8 将变为 3。

这将为您提供预期的输出：

```
double sum = ((117+130) / 3.0) + ((130+13) / 3.0); 
```

因为我们除以`3.0`而不是`3`.

即，如果整数除法中的至少*一个*或*两个*操作数是浮点类型，则结果将是浮点数。`int`（请注意，关于s 和截断，我在这里使用 float/double 有点互换）

除了将 a`.`或附加`.0`到值之外（`.0`将生成 a `double`，而`.0f`将生成 a `float`- 正如下面@Morwenn 的有用评论所指出的那样），我们还可以显式地将 int 转换为浮点数，但是*当*我们这样做时很重要。一个简单的示例（请注意，在任何情况下，在此示例中的赋值`float` *之后*`v`的值都是 a `float`）：

```
float v = 0;
                     /* values shown are BEFORE assignment */
v = (5 / 2);         /* value is 2 due to integer truncation before assignment */
v = (float) (5 / 2); /* 2.0 as integer division occurs 1st, then cast to float */
v = (float) 5 / 2;   /* 2.5 since 5 becomes 5.0 through casting first. */ 
```

[我从除法和浮点中](https://stackoverflow.com/a/11060283/1209279)借用了上面的例子

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:45:57.417

尽管您声明`sum`为`float`，但操作的右侧仅包含整数，因此它被视为整数表达式，并且除法被截断。尝试

```
double sum = ((117 + 130) / 3.0) + ((130 + 13) / 3.0); 
```

反而。

# python - 使用 cython 加速耗时的列表操作

> ID：11136428
> 
> 赞同：0
> 
> 时间：2012-06-21T10:43:27.610
> 
> 标签：python, performance, python-2.7, cython, processing-efficiency

我有一个函数，它将 numpy ndarray 中表示的图像作为参数。此 ndarray 由一个*列表*x*列表*x*列表*项（行 x 像素 x 像素）组成，需要转换为常规列表格式的*列表*x*列表*x*元组*（因此不再作为 ndarray）。

因此，例如这个变量的内容可能看起来像

```
[[[0,0,0],[1,0,1],[2,4,5]],[[3,4,5],[1,7,4],[1,3,5]],[[2,4,2],[1,6,7],[1,9,0]]] 
```

并且应该变成：

```
[[(0,0,0),(1,0,1),(2,4,5)],[(3,4,5),(1,7,4),(1,3,5)],[(2,4,2),(1,6,7),(1,9,0)]] 
```

下面的（cython）代码段正是这样做的，但完成一个 1024x768 的图像需要大约 800 毫秒。

```
import numpy as np
cimport numpy as np
DTYPE = np.int
ctypedef np.int_t DTYPE_t

def convertToBackdrop(np.ndarray arr3d):    
    agc = arr3d.swapaxes(0,1).tolist()
    agc = [map(tuple,line) for line in agc]
    return agc 
```

我的问题是：我可以通过哪些方式使这段代码更（时间）高效？我已经搜索了列表是否有 cdef，但没有找到任何线索。如果我想在 100 毫秒的完成时间内完成它，我希望我不是在要求不可能的事情。在此先感谢您的任何建议。

# jquery - 当属性键存在时，jquery如何在样式属性中获取属性值？

> ID：11136429
> 
> 赞同：0
> 
> 时间：2012-06-21T10:43:31.150
> 
> 标签：jquery, properties, styles, inline

```
<div class="test" style="position:absolute; font-size: 12; right:400px; top:100px;"><p>Hello</p></div>
<div class="test" style="position:absolute; font-size: 14; right:200px; top:140px;"><p>Hello</p></div> 
```

我想做类似的事情

```
var positionvalue= $('.test'). get value where position is exist inside style attribute  
var topvalue= $('.test'). get value where top is exist inside style attribute. 
```

有没有简单的方法可以通过 jquery 来完成这个？

这意味着无需将样式读入变量，然后拆分为数组数组，循环通过比较属性键来获取值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:47:50.827

要获得顶部，请使用此

```
$('.test').position().top 
```

*示例：返回**100***

要获得位置，请使用此

```
$('.test').css('position') 
```

*示例：返回**绝对值***

参考**[现场演示](http://jsfiddle.net/SivaCharan/3Xu3b/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:52:37.157

这是 JQuery API [position()的链接](http://api.jquery.com/position/)

如上所述，您的代码将是：-

```
var topvalue= $('.test').position.top; 
```

# ruby-on-rails - 当 rails gem 没有动态链接到 active_record 等其他 gem 时，边缘导轨如何工作

> ID：11136431
> 
> 赞同：3
> 
> 时间：2012-06-21T10:43:37.863
> 
> 标签：ruby-on-rails

如果我创建一个全新的 Rails 应用程序，那么 Gemfile 会说。

```
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git' 
```

现在让我们去看看 github 上的 rails 项目。在[https://github.com/rails/rails](https://github.com/rails/rails)有两个我们感兴趣的文件。

*   [https://github.com/rails/rails/blob/master/Gemfile](https://github.com/rails/rails/blob/master/Gemfile)
*   [https://github.com/rails/rails/blob/master/rails.gemspec](https://github.com/rails/rails/blob/master/rails.gemspec)

第二个文件按版本声明对 activerecord 的依赖。当前版本是“4.0.0.beta”。[https://github.com/rails/rails/blob/master/RAILS_VERSION](https://github.com/rails/rails/blob/master/RAILS_VERSION)

如果意味着定期 Rails 核心人员将推送 beta 版本，我将获得 beta 版本。但是，我可能会也可能不会获得 activerecord 的优势（github 上的最新大师）。

现在让我们看看 rspec-expectations Gemfile。 [https://github.com/rspec/rspec-expectations/blob/master/Gemfile#L10](https://github.com/rspec/rspec-expectations/blob/master/Gemfile#L10)。这里它链接到 github repo，所以我保证能得到最新的 github 东西。

那么这是否意味着 rails edge 是一种边缘，但不是真正的边缘！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:06:05.527

当您在 edge bundler 上运行时，将下载 Rails github 存储库，所有 gem，包括`active_record`，也将在那里，因为它们**位于**rails 存储库中。所以，是的，您将拥有其中所有内容的最新版本。

# jquery - 重新启用 preventDefault

> ID：11136433
> 
> 赞同：0
> 
> 时间：2012-06-21T10:43:44.970
> 
> 标签：jquery, click, preventdefault

我正在尝试在提交点击之前修改锚点中的 href。

但是，以下创建了一个无限循环：

```
$('.preview').live('click', function(e){
    e.preventDefault();
    var _this = this;
    var content = $('#redactor_content').getCode();
    var page_id = $('#page_id').val();
    $.ajax({
        url: ADMIN_CORE_URL + 'pages/autosave.php',
        dataType: 'json',
        type: 'POST',
        data: {page_id : page_id, content : content},
        success: function(data){
            var url = $(_this).attr('href') + data.revision_id;
            $(_this).attr('href', url);
            $(_this).unbind('click').click();
        }
    });
}); 
```

要么我无法点击提交，要么我得到了循环。

如何在没有循环的情况下重新启用点击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:48:44.753

你可以尝试这样的事情。这样处理程序只有在链接有类`x`（或者你想调用它的任何东西）时才会被执行。
在 ajax 响应之后，删除该类并且不应再执行单击处理程序。

```
$(body).on('click', '.preview.x', function(e){
    e.preventDefault();
    var _this = this;
    var content = $('#redactor_content').getCode();
    var page_id = $('#page_id').val();
    $.ajax({
        url: ADMIN_CORE_URL + 'pages/autosave.php',
        dataType: 'json',
        type: 'POST',
        data: {page_id : page_id, content : content},
        success: function(data){
            var url = $(_this).attr('href') + data.revision_id;

            // $(_this).attr('href', url);
            // $(_this).removeClass('x').click();
            //
            // edit: version 2:
            window.open(url);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:48:13.033

我假设它是循环的，因为`unbind()`它没有按照您的预期进行，然后您手动强制每次 ajax 调用成功时单击链接，这可能会一次又一次地运行相同的代码位。

去掉多余的`.click()`部分，首先弄清楚如何正确解开原始点击，然后`click()`在需要时重新添加。附带说明一下，由于您使用`live()`的是绑定，因此使用取消绑定会更有意义`.die()`（这两种方法也已被替换为`.on()`and `.off()`API）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:49:53.587

代替

```
$(_this).unbind('click').click(); 
```

和

```
$(_this).off('click'); 
```

从 jquery 1.7.2开始`.live`，已弃用，使用[.on](http://jqapi.com/#p=on)

```
$('body').on('click','.preview', handler); 
```

解除绑定后，您将通过 触发点击事件`.click()`。

删除应该可以解决问题

**编辑**

```
var handler = function(event){
    event.preventDefault();
    var _this = this;
    alert('called');
    $(_this).off('click').on(handler);
}

$('body').on('click','.preview', handler); 
```

使用 .on() 附加事件处理程序并使用 .off()[删除](http://jqapi.com/#p=off)它。

**[演示](http://jsfiddle.net/dhirajbodicherla/NGhvn/1/)**

希望这可以帮助

# android - Android，数组到for循环

> ID：11136435
> 
> 赞同：0
> 
> 时间：2012-06-21T10:43:48.823
> 
> 标签：android, arrays, for-loop

我有一个数组，如下所示，我手动记下照片链接，我有一个问题如何将数组转换为 for 循环，以便在我更改 SQL 中的链接后图像将自动更新。

```
public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);

            i.setImageResource(mImageIds[position]);                             

            return i;
        }        

        private Integer[] mImageIds = {
                R.drawable.ctr,
                R.drawable.fb,
                R.drawable.games,
                R.drawable.ic_launcher,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ea,
                R.drawable.fb,
                R.drawable.ctr
        }; 
```

* * *

更新我想我几乎解决了：我把这些放在 getView()

```
public View getView(int position, View convertView, ViewGroup parent) {
        ImageView i = new ImageView(mContext);

        final String SOAP_ACTION = "http://tempuri.org/findAppsByID";
        final String METHOD_NAME = "findAppsByID";
        final String NAMESPACE = "http://tempuri.org/";
        final String URL = "http://domainURL.com/appsFeaturedWS.asmx";

        SoapObject Request = new SoapObject (NAMESPACE, METHOD_NAME);
        Request.addProperty("ID", position+1);
        SoapSerializationEnvelope soapEnvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        soapEnvelope.dotNet = true;
        soapEnvelope.setOutputSoapObject(Request);

        AndroidHttpTransport aht = new AndroidHttpTransport(URL);

        try
        {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject resultString = (SoapObject) soapEnvelope.getResponse();

            final String[] strLogo = new String[resultString.getPropertyCount()];

            for(int j =0; j<resultString.getPropertyCount(); j++)
            {
                SoapObject array = (SoapObject) resultString .getProperty(j);
                strLogo[j] = array.getProperty(5).toString();   //get logo

                i.setImageResource(Integer.parseInt(strLogo[j]));
            }
        }

        catch(Exception e){
        }                    

        return i;
    } 
```

但我的屏幕只是显示空白......有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T04:55:07.557

检查 LazyAdapter 示例的链接[LazyAdapter](https://github.com/thest1/LazyList)这对于从网络获取图像以显示在gridview、listview 或galary 视图中很有用检查它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T10:48:44.250

mImageIds 定义全局

```
public View getView(int position, View convertView, ViewGroup parent) {
            ImageView i = new ImageView(mContext);
            for(int i=0;i<mImageIds.length;i++{
            if(i==position){ 
             i.setImageResource(mImageIds[position]);                             
             }
            }
            return i;
        }        

        private Integer[] mImageIds = {
                R.drawable.ctr,
                R.drawable.fb,
                R.drawable.games,
                R.drawable.ic_launcher,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ctr,
                R.drawable.ea,
                R.drawable.fb,
                R.drawable.ctr
        }; 
```

# python - 金字塔：路由模式和限制

> ID：11136437
> 
> 赞同：5
> 
> 时间：2012-06-21T10:43:51.757
> 
> 标签：python, python-2.7, pyramid

我已经完成了研究并进行了一些模式匹配试验，但我仍然无法弄清楚如何：

1.  使部分路线可选。例如：

    /required **(/optional/{str})** 这里括号中的部分是可选的。

2.  将限制应用于路由，因此它必须匹配元组中的项目，而不是通配符字符串。

    /view_1/ **{('opt_a', 'opt_b', 'opt_c' ...)}** 在这种情况下，如果匹配元组中的项目，则如果不是 404 或 FORBIDDEN 则路由

我怎样才能实现这些？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T15:12:57.310

Pyramid 不支持路由中的可选模式。另一个答案表明`*optional`，但这将比您要求的一个可选占位符匹配得多，并且在路线结束时您没有选择更多模式。

```
config.add_route('name_with_optional', '/required/{optional}/{str}')
config.add_route('name', '/required/{str}') 
```

现在您想对我想象的两者使用相同的视图，因为您认为占位符是可选的。因此，只需为这两种情况注册视图：

```
@view_config(route_name='name_with_optional')
@view_config(route_name='name')
def my_view(request):
    optional = request.matchdict.get('optional') 
```

`optional`变量将是如果`None`是`'name'`匹配的路由模式。

至于您的第二个问题，您可以简单地创建一个自定义谓词。这可以在路线上或视图上（请记住，这些在 Pyramid 中是分开的）。谓词的签名在每种情况下都不同。

路线上的谓词（不太常见）：

```
def opt_must_contain(info, request):
    opt = info['match'].get('opt')
    return opt in ('opt_a', 'opt_b', 'opt_c')

config.add_route('my_route', '/view_1/{opt}', custom_predicates=[opt_must_contain]) 
```

如果此谓词返回`False`，则可以匹配具有相同模式的另一条路由（忽略该路由）。

视图上的谓词（更常见）：

```
def opt_must_contain(context, request):
    opt = request.matchdict.get('opt')
    return opt in ('opt_a', 'opt_b', 'opt_c')

config.add_route('my_route', '/view_1/{opt}')

@view_config(route_name='my_route', custom_predicates=[opt_must_contain])
def my_view(request):
    opt = request.matchdict.get('opt') 
```

在视图中我们会知道`opt`是必需的选项之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T11:07:29.880

解释起来很棘手，但你想要的是这里[http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/hybrid.html](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/narr/hybrid.html) - 这不是最容易阅读的，但解释了你是什么后。

**进一步研究后更新**

使用：

```
config.add_route('name', 'foo/*optional') 
```

可以将剩余的路径元素作为元组接收

自定义谓词可用于过滤 url 调度，如 [http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html?awesome中所述](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html?awesome)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T22:37:35.020

除了使用自定义路由谓词之外，您还可以使用 URL 遍历来实现这两件事。我写了一个[详细的答案](https://stackoverflow.com/a/11147511/320021)来回答你的另一个问题。

对于此类用例，我相信遍历是一种更清洁且“更自然”的解决方案。

# prestashop - Prestashop 网站域名转移

> ID：11136447
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:44:27.873
> 
> 标签：prestashop

我正在将位于armarkat.biggo.org 上的prestashop 网站移动到armarkat.be。我搜索了数据库中的所有表，并在可能的情况下从armarkat.biggo.org 更改为armarkat.be。prestashop 配置文件的 base_url 为“/”。站点连接到数据库。

现在的问题是：如果您访问[http://armarkat.be](http://armarkat.be)，您会注意到该站点无法加载。可能是什么问题呢？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:50:39.677

最好的办法是得到一个实际的 PHP 错误消息。当错误被禁用从服务器端发送到客户端时，通常会显示“厄运”白页。您通常可以检查错误文件以获取正在发生的事情的列表，或暂时启用错误以查看。

如果您的托管服务提供商允许，您通常可以使用 .htaccess 启用错误访问

```
php_flag  log_errors on
php_value error_log  /home/path/public_html/domain/PHP_errors.log 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:06:24.927

我发现了问题！在工具 -> 配置信息中，未满足**必需参数。**我不得不给一些文件夹写权限:)

# android - 将整数从自定义光标适配器传递给活动

> ID：11136450
> 
> 赞同：0
> 
> 时间：2012-06-21T10:44:41.250
> 
> 标签：android, android-intent, bind, custom-cursor

我可以使用与您在不同活动之间传递数据相同的过程吗？这将适用于活动和游标适配器之间的数据传递。产生的错误不是运行时是编译

```
The constructor Intent(MyAdapterQuestion, Class<Basic_database_questionsActivity>) is undefined

Intent i = new Intent(MyAdapterQuestion.this, Basic_database_questionsActivity.class);
            Bundle b = new Bundle();
            // get the current value of timerStart variable and store it in timerlogic
            //Log.e(LOGS, "Whatis the value of timerstart inside the intentcalls method" + aInt);

            b.putInt("timerlogic", aInt); 
```

我有一个名为 MyAdapterQuestion 的适配器和一个名为 Basic_database_questionsActivity 的活动。

我有一个计数器，它在方法 bindView 方法中

```
public void bindView(View v, Context context, Cursor c) {

     if(radiopos1.isChecked())
        {

          // i want to update my main activity 
    // this method increment the correct answer by one I want to get that value and //pass it back to the activity      
    correctAnswer();

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:47:46.383

不可以。您不能将 Intent 发送到适配器。Activity 创建了适配器，因此它应该能够与之通信。通过调用方法，在构造函数中传递参数等。

**编辑：添加代码示例**

如果适配器需要调用 Activity 中的方法，你可以这样做：

在我的适配器问题中：

```
// Stores a reference to the owning activity
private Basic_database_questionsActivity activity;

// Sets the owning activity (caller should call this immediately after constructing
//  the adapter)
public void setActivity(Basic_database_questionsActivity activity) {
    this.activity = activity;
}

// When you want to call a method in your activity (to get or set data), you do
//   something like this:
activity.setCorrectAnswer(answer); 
```

在 Basic_database_questionsActivity 中：

```
// In the place where you create the adapter, do this:
MyAdapterQuestion adapter = new MyAdapterQuestion(parameters...);
adapter.setActivity(this); // Passes a reference of the Activity to the Adapter

public void setCorrectAnswer(int answer) {
    // Here is where the adapter calls the activity back
    ...
} 
```

我希望你能明白。您只需要一种方法让适配器获取对 Activity 的引用，以便它可以在必要时调用其上的方法。

**注意：**更好的编程风格是将 Activity 作为参数包含在您的 Adapter 构造函数中，但由于您没有发布 Adapter 构造函数的代码，我不想让您感到困惑。

# vb.net - vb.net 获取gif当前帧数+停止动画+播放动画

> ID：11136458
> 
> 赞同：0
> 
> 时间：2012-06-21T10:45:17.780
> 
> 标签：vb.net, winforms

```
picturebox1.image = image.fromfile("c:/anim.gif") 
```

导入动画后，我想**停止动画**
，例如：

```
picturebox1.stop() 
```

（我知道没有“Stop（）”这样的东西）
之后我停止了我想通过点击或其他方式**播放动画的动画**

```
b_click
picturebox1.start() 
```

现在我想获取动画 的**当前帧号**

```
picturebox1.frameNumber 
```

如果用picturebox控件没有这样的方法，那么可以停止播放并获取帧数的控件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:53:59.613

看看这个链接，它可能会帮助你！我不认为有一种方法可以将动画放入图片框中，msdn 文章向您展示了如何创建自己的控件，您可以在其中放置动画，然后自定义您触发的事件以获取它播放/停止等

[http://msdn.microsoft.com/en-us/library/aa446483.aspx](http://msdn.microsoft.com/en-us/library/aa446483.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-24T12:00:58.980

1.  将gif图像放入图片框中
2.  添加一个按钮....

    Private Sub Button1_Click(sender As Object, e As EventArgs) 处理 Button1.Click If PictureBox1.Enabled = False Then PictureBox1.Enabled = True ElseIf PictureBox1.Enabled = True Then PictureBox1.Enabled = False End If End Sub

# testing - 以各种配置测试守护进程的黑盒行为

> ID：11136464
> 
> 赞同：3
> 
> 时间：2012-06-21T10:45:41.090
> 
> 标签：testing, daemon

我正在开发一个 node.js 守护进程，它提供一个 html 页面（启用 ajax），它通过 web 表单上传（基于 html5 的）文件，该守护进程还处理与相关的所有 PUT、POST、OPTIONS 和 GET 请求文件上传和状态查询（不一定来自它服务的网页，任何客户端都可以通过http交互）

我想通过将服务器本身（例如它是 node.js 的事实）视为黑匣子来以编程方式测试一大堆东西。

输入如下：

*   json 配置文件中不存在、为空或各种类型（不正确）的配置值
*   使用不同的命令行参数运行程序
*   与网页交互（导航到它，单击按钮，从文件选择对话框中选择特定文件，单击确定等，这将在后台导致许多 http 请求）
*   以编程方式执行“原始”http请求

然后通过以下方式验证事物的行为是否符合预期：

*   在日志文件中查找条目
*   检查 $num 的进程是否（仍在）运行
*   检查所有请求的 http 响应代码。（包括后台的所有ajaxy-one，或对测试中定义的单个请求的响应）
*   任意命令（例如从网络服务器下载文件并对其进行 md5summing）

我一直在寻找一些选择：

*   cucumber 经常出现这种话题，但似乎很冗长，而且太针对商务人士。
*   httpunit 似乎假设系统正在使用一种特定配置运行
*   rspec 似乎是用于白盒测试红宝石
*   vows 太基础了，没有浏览器自动化

如果有人有建议，我将不胜感激

谢谢迪特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T07:11:25.553

一个通用的解决方案可能是[http://robotframework.org/](http://robotframework.org/)以及一些标准和外部库，如各种 http 和 selenium 库：[http ://robotframework.org/#test-libraries](http://robotframework.org/#test-libraries)

# java - 莫名其妙的延期任务

> ID：11136465
> 
> 赞同：1
> 
> 时间：2012-06-21T10:45:43.233
> 
> 标签：java, google-app-engine

我在 App Engine 上有一个相当简单的项目。不知何故，创建了大量的延迟任务，并用完了我所有的配额。在我的所有代码中（由 grep 证明；）），我不使用任务（还），所以我不知道从哪里来......

任务载荷如下：

```
....sr.;com.google.appengine.api.taskqueue.DatastorePutDeferredTask..(=.R.s...L..putMet.+Lcom/google/appengine/api/datastore/Entity;xpsr.)com.google.appengine.api.datastore.Entity.c.<]..y...L..keyt.(Lcom/google/appengine/api/datastore/Key;L..propertyMapt..Ljava/util/Map;xr.4com.google.appengine.api.datastore.PropertyContainer..:<3.;....xpsr.&com.google.appengine.api.datastore.Key....6E.....J..idL..appIdt..Ljava/lang/String;L..kindq.~..L..nameq.~..L..parentKeyq.~..xp........t..s~incoappt.._ah_SESSIONt.._ahshEQtxFwHEoPJXGuGBSXuUgpxsr..java.util.HashMap......`....F..loadFactorI..thresholdxp?@......w.........t.._expiressr..java.lang.Long;.....#....J..valuexr..java.lang.Number...........xp...8...Gt.._valuessr.'com.google.appengine.api.datastore.BlobV0.........[..bytest..[Bxpur..[B......T....xp...R....sr..java.util.HashMap......`....F..loadFactorI..thresholdxp?@......w.........xx 
```

我注意到 _ah_SESSION 是有效载荷的一部分，并且确实创建了很多新会话，但我不知道为什么。

关于何时创建任务：我不知道......不是每个请求，或者我可以扣除的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:31:06.703

您很可能[启用了会话](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessionshttp://)，并带有异步保存会话数据的选项（通过任务队列）：

```
<async-session-persistence enabled="true" /> 
```

# ruby - 我可以以某种方式存储一个块以供以后使用吗？

> ID：11136474
> 
> 赞同：1
> 
> 时间：2012-06-21T10:46:07.490
> 
> 标签：ruby

好的，这就是我想要做的：

我将一个块传递给类似的方法：`Generator.generate(...) {|x| ...}`. 我想存储块，因为我在一些子例程中调用它，这些子例程从不同的地方被调用了很多次。

当然我可以在所有方法和调用中拖动 &block，但我想将它实际保存在一个类变量中并在适当的方法中使用它。

像这样的东西：

```
class Generator
  class << self
    attr_accessor :my_block

    def generate(..., &block)
      my_block = &block
      ....each {important_method(x)}
    end

    def important_method(x)
      my_block.yield(x)
    end
  end
end 
```

是否可以存储一个块并在以后使用一些参数生成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:48:14.327

如果您的方法接受`&block`形式的块，那么它会转换为 Proc 对象并可以存储到变量中。您可以稍后通过向其发送`call`消息来调用它。

```
my_block.call(x) 
```

另一个例子

```
class Foo

  def init &block
    @my_block = block
  end

  def process ary
    ary.each do |a|
      @my_block.call a
    end
    #   or this
    # ary.each(&@my_block)
  end
end

f = Foo.new
f.init {|a| puts a}
f.process [1, 2, 3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:50:02.227

您需要对代码进行 2 处调整：

```
class Generator
  class << self
    attr_accessor :my_block

    def generate(..., &block)
      self.my_block = block # Because otherwise you're just setting a method-local variable
      ....each {important_method(x)}
    end

    def important_method(x)
      my_block.call(x) # Because this is how Proc objects are called
    end
  end
end 
```

# python - 更改为装饰器模式

> ID：11136479
> 
> 赞同：0
> 
> 时间：2012-06-21T10:46:21.630
> 
> 标签：python

我正在学习装饰器，在这里我试图将下面的内容更改为装饰器模式。

```
def invert(x):
    return 1/x

print invert(5) 
```

可以使用装饰器进行更改。

```
def safe(fun, *args):
    if args[0]!=0:
        return fun(*args)
    else:
        "Division by 0"

def invert(x):
    return 1/x

print safe(invert, 5) 
```

使用@wapper 语法，

```
def safe(fun, *args):
    if args[0]!=0:
        return fun(*args)
    else:
        "Division by 0"
@safe
def invert(x):
    return 1/x

print invert(5) 
```

上面的代码给出了错误`IndexError: tuple index out of range`。我试图了解是什么造成了错误以及如何纠正它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T10:48:43.110

您的主要问题是装饰器需要返回一个函数，而不是一个值。装饰器将定义的函数替换为基于它的新函数。

除此之外，您在块中没有`return`语句`else`，只有字符串文字。你可能打算退回那个。

```
def safe(fun):
    def f(*args):
        if not args[0] == 0:
            return fun(*args)
        else:
            return "Division by 0"
    return f 
```

就像一个注释，我认为这只是为了练习的目的，但*错误不应该*在 Python 中静默传递 - 发出异常的行为通常比在错误时返回字符串有用得多。事实上，为了更自然地为 Python 实现这一点，您需要遵循*请求宽恕，而不是许可的*口头禅：

```
def safe(fun):
    def f(*args):
        try:
            return fun(*args)
        except ZeroDivisionError:
            return "Division by 0"
    return f 
```

此外，请注意像“安全”这样的广泛语句名称 - 仍然可能引发其他异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:59:51.663

你这样做是错的。

```
def safe(fun):
    def wrapper(*args)
        if args[0]!=0:
            return fun(*args)
        else:
            return "Division by 0"
    return wrapper 
```

该函数`safe`为您用它装饰的每个函数调用*一次*。每次调用装饰函数时都会调用由`safe`-- 这里称为--返回的内部函数。`wrapped`它负责调用原始函数，或者完全做其他事情。

所以装饰器只接受一个参数：要包装的函数。*但是*，有装饰器*函数*，它是一个返回装饰器的函数（因此多了一层包装函数）：

```
def safe(singularities):
    def decorator(fun):
        def wrapper(*args)
            if args[0] not in singularities:
                return fun(*args)
            else:
                return "Division by 0"
        return wrapper
    return decorator 
```

所以`safe`装饰器函数现在可能会返回无数个不同的装饰器。像这样使用：

```
@safe([0])
def invert(x):
    return 1 / x

@safe([-1, 1])
def foo(x)
    return 1 / ((x - 1) * (x + 1)) 
```

*对于那些想知道为什么在他发布他的 Lattyware 之后我发布了与 Lattyware 基本相同的答案的人：直到我开始编写我的答案之后，该答案才解决了所有问题，现在我添加的信息比他的更多，所以我会不要删除它，因为它不是完全重复的。*

# c# - 已知的“填充”词列表；如何使用 C# 抓取好的关键字？

> ID：11136483
> 
> 赞同：4
> 
> 时间：2012-06-21T10:46:43.390
> 
> 标签：c#

如果我有一段英文文本，清除所有“填充”词的最佳方法是什么，例如“the, it, or, we, us”等……只留下可行的词文本的真实、核心、内容？

我正在集思广益，根据它们在关键字组成中的相似程度自动将文本块联系在一起。

我不能成为第一个想到这一点的人。有没有一种流行的、有效的方法可以使用 C# 来完成？

**更新**

我试图从本质上将一个文本块链接到 n 个“相关”文本块，其中主要“内容”非常相似，以至于它可以被认为是与它相关的文本的附加信息......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:55:11.573

这个东西被称为[**停用词**](http://en.wikipedia.org/wiki/Stop_words)- 通常¹对于理解数据不是必需的词，并且被索引器删除。

我所知道的几乎所有[信息检索系统都实现了过滤这些单词的标记器。](http://en.wikipedia.org/wiki/Information_retrieval)

我熟悉 java 的 lucene，它有[StandardAnalyzer](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/standard/StandardAnalyzer.html)为你做这件事，但我假设这个分析器也存在于[lucene.net](http://incubator.apache.org/lucene.net/)中——你可能想要跟踪它并使用它。

您可能还对[stemming感兴趣，例如](http://en.wikipedia.org/wiki/Stemming)[EnglishAnalyzer](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/contrib-analyzers/org/apache/lucene/analysis/en/EnglishAnalyzer.html)也在 lucene 中完成的。

* * *

(1) 为什么通常？例如，在讽刺诙谐者中 - 似乎（根据经验）停用词对于获得良好结果至关重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T10:54:51.960

如果您希望大规模完成此操作并且过滤词要不断增加，那么您可以使用像[openNLP这样的 NLP](http://opennlp.apache.org)

您可以使用它来删除介词，连接符等...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T10:48:43.380

创建一个“填充词”列表。用 String.Empty 替换原始文本块列表中所有出现的任何元素。

[使用 List<string> 替换字符串](https://stackoverflow.com/questions/3712317/string-replace-using-a-liststring)

# javascript - jQuery点击事件触发不止一次

> ID：11136484
> 
> 赞同：1
> 
> 时间：2012-06-21T10:46:46.433
> 
> 标签：javascript, jquery

我无法弄清楚是什么导致 click 事件在下面的 webapp 中多次触发。请访问 url，点击任何级别 [from Ground - 4]，然后点击一个单位。

[http://plaza.foxqa.com.au/touch/index.html](http://plaza.foxqa.com.au/touch/index.html)

这将显示单元详细信息 [价格、图像等]。此页面中的图像附加了一个单击事件，基本上可以放大图像。这个事件一直在堆积。第一次单击一个单位时它会正常工作。

然后它将为第二个单元发射两次，为第三个单元发射三次，依此类推。一旦放大视图关闭但仍然无法正常工作，我尝试取消绑定单击事件。

任何帮助，将不胜感激。

编辑：请在谷歌浏览器中测试。

编辑 2：可能帮助您尽快找出问题的步骤。

1.  在控制台中打开 components_draft.js。
2.  在第 687 行添加断点。
3.  单击建筑物上的一个级别
4.  点击任何绿色单位[或手]。
5.  显示单元详细信息后，单击单元计划图像。
6.  它变大了。
7.  单击图像上的任意位置，它将被最小化。
8.  单击关闭图标返回第 4 步。
9.  重复 5、6、7。
10.  现在，当单击放大的图像时，单步执行控制台中的功能，您将看到单击事件循环两次单击。

我知道遵循所有这些是一种痛苦，但请花一些时间来分析它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T10:53:42.983

请再次查看您的申请。

您可以在 firebug 控制台中看到一些错误（JavaScript 编码错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:18:37.637

发现了错误。如果有人遇到这种情况，即 jQuery 点击事件会随着时间的推移而增加，那么最可能的罪魁祸首是

```
jQuery.live() 
```

它不需要嵌套在其他点击事件下。

# android - 如何在我的项目 Android 中创建 libs 文件夹

> ID：11136485
> 
> 赞同：1
> 
> 时间：2012-06-21T10:46:46.973
> 
> 标签：android

如何在我的 android 项目中创建 Libs 文件夹。我想“添加外部 Jar”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:49:24.793

`Your Project->Right Click->New->Folder->give name libs->Finish`. 在 libs 文件夹中添加 lib 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:53:59.067

```
Right click on Yout project  -> Click on New -> goto Folder -> Give Folder name 
```

**在库中添加 .jar**

```
Right click on res folder -> Goto Build path -> click on Add External jar
or
Right click on res folder -> Goto Build path -> Configure build path -> From Left side menu Select "Java Build path" ->There will be 4 tabs Click on Libraries -> Click on Add Externals JARs.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T10:52:19.800

与您在普通 java 项目中创建的一样正常。

Rignt 单击您的项目-->> 新建-->> 文件夹->> 命名。

之后将 jar 文件添加到此文件夹中，然后右键单击您的项目 -->> 构建路径 -->> 添加外部存档

# facebook - FQL 从链接中的朋友那里获得点赞数

> ID：11136489
> 
> 赞同：2
> 
> 时间：2012-06-21T10:46:59.540
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

这听起来可能很复杂。

我想从我的网站检索链接，这些链接被用户和我的朋友喜欢。但我想按我朋友的点赞数对结果进行排序。

我已经检查了 link_stat，它只提供了一个一般的统计数据。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:01:22.473

我以为我有你的答案。我没有，我不确定为什么。

我昨天分享了一堆链接来测试我在网站上实现的一个赞按钮。我认为这将是一个容易回答的问题。在玩了大约 30 分钟后，我得出的结论是不是。

在 API 资源管理器中查看`/me/feed`，我的链接与`"type": "link"`. 但是，当我查看`me/links`或运行 FQL 查询时，`SELECT link_id, owner, url FROM link WHERE owner = me() ORDER BY created_time DESC`这些链接不存在。[已发布错误报告](https://developers.facebook.com/bugs/376990809033134)

无论如何，您应该能够从 FQL 查询开始，如下所示：

```
SELECT link_id, owner, url FROM link 
   WHERE owner IN 
     (SELECT uid2 FROM friend WHERE uid1 = me()) 
     AND strpos(url, 'mysite.com') >= 0 
```

`link_id`通过 Multiquery 将这些s 传递给 like 表。FQL 没有`count`方法，因此您必须计算点赞数并在脚本中对结果进行排序。

祝你好运。

# php - PHP 很长的字符串支持

> ID：11136491
> 
> 赞同：3
> 
> 时间：2012-06-21T10:47:08.533
> 
> 标签：php, variables

我想使用 php 在数据库中存储一个很长的字符串。字符串大小为 43kb。但是当我将此字符串传递给它不支持的 php 变量时。它在一个字符串中支持 16379 个字符。当我再添加一个字符时，Dreamweaver 会在该行显示 s 语法错误。如何在 php 变量中存储 50,000 个字符的长字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T10:51:46.483

只要您有足够的内存来处理它，您就可以将任何内容存储在 PHP 字符串变量中。

43kb 还不如 16379 个字符。

Dreamweaver（我会尽量好），应该只是有它自己的内存限制，或者不用于处理这样的变量。

您没有尝试运行 PHP 脚本吗？

顺便说一句，如果你有这么大的数据要存储在变量中，我真的建议你把它从你的 PHP 脚本移动到一个文件中。

请注意，默认情况下，PHP 有`memory_limit`128MB，但您可以增加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T10:52:26.557

PHP 字符串没有实际限制。

这是您的问题的可能重复项：[PHP 中字符串的最大长度是多少？](https://stackoverflow.com/questions/3189040/what-is-the-maximum-length-of-a-string-in-php)

为了您的方便，我将在此处粘贴[Bill Karwin](https://stackoverflow.com/users/20860/bill-karwin)的回复：

> 但是，PHP 脚本在给定脚本执行中可以为所有变量分配的总内存有限制，因此这也有效地限制了单个字符串变量的长度。
> 
> 这个限制是`memory_limit`php.ini 配置文件中的指令。内存限制在 PHP 5.2 中默认为 128MB，在早期版本中默认为 8MB。
> 
> 如果您未在 php.ini 文件中指定内存限制，它将使用默认值，该默认值已编译到 PHP 二进制文件中。理论上你可以修改源代码并重建 PHP 来改变这个默认值。
> 
> 如果您`-1`在 php.ini 文件中指定内存限制，它将停止检查并允许您的脚本使用操作系统将分配的内存。这仍然是一个实际限制，但取决于系统资源和架构。

# javascript - 在 Javascript 文件中使用 Ruby/Rails 代码

> ID：11136494
> 
> 赞同：1
> 
> 时间：2012-06-21T10:47:20.530
> 
> 标签：javascript, ruby-on-rails-3

我正在一个界面中工作，该界面需要来自我创建的视频模型的信息。这意味着我需要执行 MySQL 查询，以获取我需要的信息。我的代码是这样的，在我的`interface.js.erb`文件中：

```
...
    function play_vid()
    {
        low_fps = '<%= @video.low_fps %>' ;
        alert(low_fps); //checking
        if(low_vid.paused){
            low_vid.play();
            play_icon.classList.remove("icon-play-circle");
            play_icon.classList.add("icon-pause");
        }else{
            low_vid.pause();
            play_icon.classList.remove("icon-pause");
            play_icon.classList.add("icon-play-circle");
        }

    }
... 
```

上面的代码返回给我这个：

```
NoMethodError in Videos#show

Showing /home/user/My Projects/Ruby Projects/Video_APP/app/views/layouts/application.html.erb where line #8 raised:

undefined method `low_fps' for nil:NilClass
  (in /home/user/My Projects/Ruby Projects/Video_APP/app/assets/javascripts/jQuery/interface.js.erb)

Extracted source (around line #8):

5:   <%= stylesheet_link_tag    "application", :media => "all" %>
6:   <%= javascript_include_tag "jQuery/jquery-1.7.2.min.js" %>
7:   <%= javascript_include_tag "jQuery/jquery-ui-1.8.21.custom.min.js" %> 
8:   <%= javascript_include_tag "application.js" %>
9:   <%= javascript_include_tag "bootstrap-dropdown.js" %>
10:   <%= javascript_include_tag "jQuery/interface.js.erb" %>  
11:   <%= javascript_include_tag "jQuery/events_controls.js" %> 
```

我应该使用普通的 *.js 文件吗？主要区别是什么？如何解决我的问题？

编辑：

```
 # GET /videos/1
  # GET /videos/1.json
  def show
    @video = Video.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @video }
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:20:29.820

在您看来 (videos/show.html.erb?) 尝试执行以下操作

```
<div id="video" data-lowfps="<%= @video.low_fps %>"></div> 
```

然后更改您的 JS 函数：

```
function play_vid()
{
    low_fps = $('#video').data('lowfps');
    alert(low_fps); //checking
    if(low_vid.paused){
        low_vid.play();
        play_icon.classList.remove("icon-play-circle");
        play_icon.classList.add("icon-pause");
    }else{
        low_vid.pause();
        play_icon.classList.remove("icon-pause");
        play_icon.classList.add("icon-play-circle");
    }

} 
```

# bluetooth - 在 windows XP 上通过蓝牙自动接收文件

> ID：11136497
> 
> 赞同：1
> 
> 时间：2012-06-21T10:47:38.580
> 
> 标签：bluetooth, windows-xp, file-transfer, obex

我阅读了很多帖子来解决这个问题，但直到现在我还没有成功！非常感谢任何帮助！我有一个在智能手机上运行的 android 应用程序，它允许用户拍摄图片并将一些 exif 标签添加到生成的 jpg 中。这些图片都保存在同一个文件夹中。
只要智能手机可以通过蓝牙连接到 PC（Windows XP 嵌入式），应用程序就应该将它们发送到 PC。发送图片的最佳解决方案是使用 Android 支持应用程序使用 OBEX 协议进行文件传输（可以通过 Intent.setAction(Intent.ACTION_SEND) 调用）。

我的问题是自动接收我从智能手机发送的文件。
现在我可以通过始终从任务栏上的蓝牙图标菜单将 PC 置于“接收文件”模式（右键单击 -> 接收文件）然后确认保存文件的位置来执行此操作。但我必须手工完成所有工作。

有没有办法自动接收文件并将它们保存在所需的文件夹中？
我可以通过使用另一个 BT 堆栈来实现这一点吗？

我能想到的另一种方法是在 PC 上实现一个应用程序，并通过蓝牙在串行端口上通过原始数据交换实现我自己的协议。（但当然这将是一个糟糕的解决方法！！！）

这似乎几乎是不可能的，但应该有一个解决这个问题的好方法！:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:04:54.723

如果您不固定蓝牙，请查看我的开源项目[http://cross-copy.net](http://cross-copy.net)。

它简化了应用程序之间的设备间文件传输：通过匹配代码字的服务器建立连接。RESTful API 非常简单，您可以轻松地修改网络应用程序以在文件到达后立即开始下载。

# ruby-on-rails - Rails - 新路径不起作用。为什么？

> ID：11136501
> 
> 赞同：0
> 
> 时间：2012-06-21T10:47:59.407
> 
> 标签：ruby-on-rails, routing

我需要像`photos/13/rate`=> 这样的 URL 我已经创建了以下路由规则：

```
match 'photos/:id/rate' => 'photos#rate' 
```

在这种情况下，我会假设这条路径：

```
link_to 'Rate', rate_photos_path(@photo) 
```

但我仍然收到错误消息

```
undefined method `rate_photo_path' for #<#<Class:0x0000012aa18170>:0x0000012aa14520> 
```

我试图打印出来`rake:routes`，但在声明中只有

```
 /photos/:id/rate(.:format)                    photos#rate 
```

没有路径。

在这种情况下有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:50:05.793

试试这个：

```
resources :photos do
  member do
    get 'rate'
  end
end 
```

或者您需要为路线命名。

```
match 'photos/:id/rate' => 'photos#rate', :as => :rate_photo 
```

# google-maps - win 7 和 ie 9 Google Maps API 上的双滚动

> ID：11136503
> 
> 赞同：1
> 
> 时间：2012-06-21T10:48:10.137
> 
> 标签：google-maps, internet-explorer-9, google-maps-api-2

我的滚动问题仅发生在 ie 9 和 win 7 上。

期望的操作是： - 当光标在地图上方时：滚动使放大和缩小 - 当光标在侧边栏上方时：滚动使页面向上和向下。

不幸的是，在上述组合滚动中，两者兼而有之。缩放和上下移动。

为什么会这样？

# git - msysgit 1.7.11 中缺少 cvsps？

> ID：11136506
> 
> 赞同：0
> 
> 时间：2012-06-21T10:48:15.997
> 
> 标签：git, msysgit

我正在尝试按照以下说明将我们的旧 cvs 存储库导入 git 存储库：http: [//www.gromacs.org/Developer_Zone/Git/Migrating_a_CVS_repository_to_GIT](http://www.gromacs.org/Developer_Zone/Git/Migrating_a_CVS_repository_to_GIT)

我正在使用 Windows，所以我尝试使用 msysgit。我可以登录到我的 cvs 存储库，但是在运行 git-cvsimport 命令时，它会尝试执行 msysgit 安装中显然缺少的 cvsps。我在哪里可以得到它，为什么它不见了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:43:02.387

缺少它是因为 cvsps 尚未移植到 msys 或本机窗口。周围可能有 cygwin 版本，但您最好在 unix 机器上执行转换。转换存储库后，您可以在 Windows 上使用它。

cvsps 利用`fork()`了 msys 程序的一个问题，并且需要付出很大的努力才能移植到本机窗口。对于某些存储库或一次性转换，您可能会发现[cvs2git](http://cvs2svn.tigris.org/cvs2git.html)是一种更好的转换工具。我不知道这是否可以在 Windows 上运行，但由于它是用 Python 编写的，所以它可能会这样做。

# playframework-2.0 - 如何在 windows cmd 下而不是在 play 控制台下运行 port=9001 的 play 框架？

> ID：11136508
> 
> 赞同：1
> 
> 时间：2012-06-21T10:48:17.147
> 
> 标签：playframework-2.0

在 Play 控制台下，我可以输入“run 9001”在端口 9001 中运行服务器。但是在 windows cmd 下，当我输入“play run 9001”时，它不起作用。

请帮忙 。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T14:06:31.447

完全像这样写（有配额）

```
play "run 9001" 
```

您还可以添加其他选项（同样配额很重要）

```
play -DapplyEvolutions.default=true "start 9003" 
```

**后期编辑：**

在 Windows 上，您可以尝试这样的技巧来避免错误消息`9001"" was unexpected at this time`

```
play '-Dhttp.port=9004' 'run 9004' 
```

或者

```
play '-Dconfig.file=C:\apps\some-app\conf\other.conf' "run 9005" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T22:27:12.780

似乎以下命令将失败，至少在 Windows 上

```
>play "run 9001" 
```

对我有用的是只需键入即可启动游戏控制台

```
>play
[app01] $run 9001 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-04-10T09:12:21.707

运行以下命令在所需端口上运行播放。

1.  > 玩
2.  > 运行 port_no 即示例：- 运行 8080

# javascript - 在 jQuery 对话框中对齐 iframe

> ID：11136509
> 
> 赞同：0
> 
> 时间：2012-06-21T10:48:17.630
> 
> 标签：javascript, jquery, css, jquery-ui, jquery-ui-dialog

我想在 jquery ui 对话框中显示和 iframe。此 iframe 需要根据所需用户的对话框大小调整大小。对话框应占据对话框的所有空间，但标题（顶部）和调整大小按钮（右下角）除外。

```
jQuery(document).ready(function(){
    jQuery("<div id ='container'><iframe src='http://www.google.com'></iframe></div>").dialog({modal:true,title:"Title",width:800,height:600});
}); 
```

有什么想法吗？我对 css 的宽度和高度感到很生气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:54:17.040

这对你来说没问题。

```
jQuery(document).ready(function(){
    jQuery("<div id ='container' style='padding:0px; margin:0px; overflow:hidden;'><iframe height=100% width=100% style='width:100%; height:100%;padding:0px; margin:0px;' frameborder=0 src='http://www.stack.com'></iframe></div>").dialog({modal:true,title:"Title",width:400,height:400});
}); 
```

**更新** 由于可能的填充边距问题而更改了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:55:32.053

**请尝试这个工作演示** [http://jsfiddle.net/xyctR/18/](http://jsfiddle.net/xyctR/18/)

iframe 将填充 jsfiddle 并休息你可以看到行为。

希望这可以帮助，

以下代码足以满足您的需要，即“需要根据所需用户的对话框大小调整大小。对话框应占用对话框的所有空间，但标题（顶部）或调整大小按钮”

**代码**

```
function showDialog(url){
   var iframe = $('<iframe id="modalIframeId" width="100%" height="100%" src='+url+' marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title">Your browser does not support</iframe>')
    .on('load', function() {
        console.log('loaded');
    });

    $("#divId")
        .append('<div id="loading">Loading....</div>')
        .append(iframe)
        .dialog({modal:true,title:"Title",width:800,height:600});
}

showDialog('http://jsfiddle.net');

​**image** 
```

![在此处输入图像描述](../Images/27928a7f6d701095b5a01e1c2c4a3c9e.png)

# python - Django：将变量传递给登录设置文件

> ID：11136510
> 
> 赞同：5
> 
> 时间：2012-06-21T10:48:17.677
> 
> 标签：python, django, logging

我正在尝试通过我的 settings.py 文件向我的日志行添加一个变量。

这是设置中的代码（日志记录部分）：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
                        'level': 'CRITICAL',
                         'class': 'django.utils.log.AdminEmailHandler'
                        },

        'customhandler':{
                        'level':'DEBUG',
                        'class':'logging.RotatingFileHandler',
                        'formatter':'custom_format',
                        'filename':LOG_LOCATION
                        },
                 },

     'loggers': {
         'django.request': {
                        'handlers': ['mail_admins'],
                         'level': 'CRITICAL',
                        'propagate': True,
                            },
         'Logger_Custom1': {
                        'handlers':['customhandler'],
                        'level':'DEBUG',
                        'propagate':True
                           },
                 },

    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
                     },
         'simple': {
            'format': '%(levelname)s %(message)s'
                     },
         'custom_format':{
            'format':'[%(asctime)s %(levelname)s T:%(threadName)s F:%(funcName)s ] %(message)s '
                         },
                 }
} 
```

上面的代码工作正常，但现在我希望每条日志消息最后都有一个变量。就像是：

```
MyVariable = "Somelines" 
[%(asctime)s %(levelname)s T:%(threadName)s F:%(funcName)s ] %(message)s 'MyVariable 
```

因此，我的日志将在每个日志记录行的末尾包含该变量的内容。我知道我们可以像这样在视图函数中做到这一点：`logging.warning('% before you %','Look','Leap')`但这将要求我们在任何地方单独包含该行。此外，当我们需要添加或更改该变量名时，我们将需要在每个文件中的任何位置更改该行。

所以我想知道是否有任何方法可以直接从 settings.py 中执行此操作，以便我们可以进行一项更改，它将应用于所有日志记录消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:50:54.337

我自己找到了解决方案。我不知道这是否是一个好习惯，但它确实有效。

我所做的只是分配一个变量：

```
testvar = "MyVariable" 
```

然后附加此变量，如下所示：

```
'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s ' + testvar 
```

输出将使您的日志条目中的变量与日志格式合并。谢谢你。请让我知道是否有更多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:33:43.323

您所指的日志格式字符串具有日志模块提供的许多变量。完整列表[在这里](http://docs.python.org/dev/library/logging.html#logrecord-attributes)。本质上，它将字典传递到字符串中以进行格式化-您无法操作该列表。相反，您应该直接在格式字符串中将变量“硬编码”为实际值，或者将值存储在设置文件中的变量中，然后附加它。

```
'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s and look, custom stuff here!!!' 
```

或者..

```
custom = 'and look, custom stuff here!!!'
'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s ' + custom 
```

# iphone - Facebook“喜欢”按钮到 iphone 原生应用程序

> ID：11136511
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:48:17.600
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, facebook-like

谁能告诉我如何在不使用 UIWebview 的情况下在 Iphone 本机应用程序中添加类似 facebook 的按钮。

提前致谢

南迪塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:52:30.453

您必须使用 Graph API：成功登录后，发出 HTTP POST 请求到

```
http://graph.facebook.com/[object ID]/likes 
```

# java - Axis2/Rampart 客户端自签名证书

> ID：11136512
> 
> 赞同：0
> 
> 时间：2012-06-21T10:48:19.533
> 
> 标签：java, ssl, certificate, axis2, rampart

我正在尝试使用安全客户端访问 Web 服务。

我生成了两个文件：

nb19200.pkcs12

服务器.jks

我将服务器密钥库粘贴到 tomcat 并将 pkcs12 上传到我的浏览器，一切正常。

现在，在我的客户端应用程序中，我尝试了以下操作：

首先，导出服务器证书，我使用了以下命令：

**keytool -exportcert -alias servercert -file servercert.cer -keystore server.jks -storepass *** ***

然后将其导入到没有任何内容的密钥库中：

**keytool -importcert -keystore truststore.jks -alias servercert -file servercert.cer -v trustcacerts -noprompt -storepass *** ****

我的代码如下：

```
 System.setProperty("javax.net.ssl.trustStore","servertrust.jks");
    System.setProperty("javax.net.ssl.trustStorePassword", "password");

    //To be able to load the client configuration from axis2.xml
    ConfigurationContext ctx = ConfigurationContextFactory.createConfigurationContextFromFileSystem("client-repo", null);

    SecureServiceStub stub = new SecureServiceStub(ctx,"https://localhost:8443/axis2/services/SecureService");

    ServiceClient sc = stub._getServiceClient();

    sc.engageModule("rampart");

    //call the service etc. 
```

好的，使用此配置，我收到以下错误：

**引起：java.net.SocketException：连接被远程主机关闭**

如果我评论前两行，我得到的错误是：

**原因：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径**

那么我做错了什么？

我完全迷路了。

更新完整代码：

[http://pastebin.com/8xTYK3tY](http://pastebin.com/8xTYK3tY)

堆栈跟踪：

```
Exception in thread "main" org.apache.axis2.AxisFault: Connection refused: connect
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:197)
at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:404)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:231)
at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at tutorial.rampart.client.SecureServiceStub.add(SecureServiceStub.java:191)
at tutorial.rampart.client.SecureServiceCGClient.main(SecureServiceCGClient.java:36)
Caused by: java.net.ConnectException: Connection refused: connect
at java.net.PlainSocketImpl.socketConnect(Native Method)
at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:564)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.commons.httpclient.protocol.ReflectionSocketFactory.createSocket(ReflectionSocketFactory.java:140)
at org.apache.commons.httpclient.protocol.SSLProtocolSocketFactory.createSocket(SSLProtocolSocketFactory.java:130)
at org.apache.commons.httpclient.HttpConnection.open(HttpConnection.java:707)
at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.open(MultiThreadedHttpConnectionManager.java:1361)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:387)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:23:58.343

查看定义密钥库路径的行：

```
System.setProperty("javax.net.ssl.trustStore","servertrust.jks"); 
```

但是您提到文件名是**server.jks**。因此，如果是这种情况，这就是代码找不到正确证书文件的原因。

更新：

使用 ssl (https) 时，服务器会根据“CN”搜索正确的证书。CN 必须等于主机的名称。根据您发布的 URL，我看到您正在使用 localhost，因此您必须使 CN 等于您的机器名称（您可以通过右键单击我的电脑 -> 属性来查看它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:03:58.310

请确保服务正在侦听端口 8443。检查 URL 是否`https://localhost:8443/axis2/services/SecureService`存在。您可以试试这个 URL `https://localhost:8443/axis2/services/SecureService?wsdl`，看看是否可以从该 URL 获取服务的 WSDL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:22:23.510

我找到了解决方案。

我错过了这个：

```
System.setProperty("javax.net.ssl.keyStore","keys/client.jks");
System.setProperty("javax.net.ssl.keyStorePassword", "password"); 
```

# php - php 会话：显示添加或删除按钮

> ID：11136513
> 
> 赞同：0
> 
> 时间：2012-06-21T10:48:30.667
> 
> 标签：php

我得到了一些帮助，并开始了一个会话，它在单击按钮时保存一个事件 ID（通过 wordpress 每页生成）。

看起来像这样...

```
<form action="/addtobasket.php" method="post">
<input type="hidden" name="event_id" value="101" />
<input type="submit" name="Add to Basket" />
</form> 
```

并且 addtobasket.php 是...

```
<?php
session_start();
$_SESSION['event_orders'][] = $_POST['event_id'];
?> 
```

现在的问题是当我添加

```
<?php
session_start();
foreach($_SESSION['event_orders'] AS $event_id){
echo 'Your ordered event ID is: ' .$event_id;
} ?> 
```

在标题中（只是为了测试代码是否正常工作）它可以显示多个相同的事件 ID，具体取决于我是否多次单击它。我认为阻止这种情况的解决方案（因为我只希望用户能够在会话中保存最多 1 个事件 ID）是如果该人在其会话中保存了当前事件 ID，则显示一个删除按钮，我有点理解逻辑，只是不知道如何执行它，大意是这样的......

（如果会话有当前页面，如果）显示从会话按钮中删除 ID（不确定它的外观）（ELSE）显示标准添加 ID 按钮（结束）

这是正确的逻辑吗？如果是这样，我该如何执行？

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:58:34.633

如果将事件 id 存储在数组的键中，可以避免重复添加。

```
<?php
session_start();
$_SESSION['event_orders'][ $_POST['event_id']] = true;
?> 
```

现在的问题是当我添加

```
<?php
session_start();
foreach($_SESSION['event_orders'] AS $event_id => $true){
echo 'Your ordered event ID is: ' .$event_id;
} ?> 
```

# knockout.js - KnockoutJS 变量

> ID：11136522
> 
> 赞同：2
> 
> 时间：2012-06-21T10:48:47.790
> 
> 标签：knockout.js

我定义了以下对象

```
 function BusinessUnit(id, name, code) {
             this.id = ko.observable(id);
             this.name = ko.observable(name);
             this.code = ko.observable(code);
         } 
```

在我的视图模型中，我定义了以下内容

```
this.selectedEntry = new BusinessUnit("", "", ""); 
```

并且它被绑定使用

```
$('#readID').attr('data-bind', 'text :  selectedEntry.id'); 
```

这是我得到的错误

> 无法解析绑定。消息：ReferenceError: selectedEntry 未定义；绑定值：文本：selectedEntry.id

我也试过`$('#readID').attr('data-bind', 'text : $root.selectedEntry.id');` 了，我得到了同样的错误。任何想法都会有所帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:59:27.770

看起来您需要在 BusinessUnit() 本身周围使用父包装模型作为前缀。尝试引用 viewmodel 变量，然后是 BusinessUnit 和它周围的属性。

还有任何理由使用'attr'属性进行绑定。为什么不直接在标记中绑定？如果 attr 调用在绑定之后，我不确定 ko 可能会“错过”绑定。像这样：

```
function BusinessUnit(id, name, code) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.code = ko.observable(code);
}

function ViewModel() {
    this.selectedEntry = new BusinessUnit("", "", "");
}

var vm = new ViewModel();
ko.applyBindings(vm); 
```

绑定标记将是：

```
<div id="readID" data-bind="text: vm.selectedEntry.id"></div> 
```

我没有对此进行测试，但希望你能明白这一点。

# php - 将数据追加到已经有数据的列

> ID：11136539
> 
> 赞同：0
> 
> 时间：2012-06-21T10:49:55.727
> 
> 标签：php, mysql

我正在尝试建立一个静力学系统

我想在一列中列出所有页面，并`,`作为页面之间的分隔符

例如

```
visitor_ip | pages_visited
122.32.223.2 | /,/post/20/,category/php,post/12,tag/hi
23.32.55.22 | /post/20,post/12
23.39.34.1 | /category/start 
```

我`,`用作分隔符

现在我想知道如何在已经有数据的列上附加一些东西？

如何更新这个

```
23.39.34.1 | /category/start 
```

到

```
23.39.34.1 | /category/start,post/12 
```

我想要这样的东西

```
mysql_query("update statics SET pages_visited = pages_visited.','.$_SERVER['REQUEST_URI'] WHERE visitor_ip = '$ip'"); 
```

我没有尝试这个查询，但我认为..它永远不会工作！

那么，这项工作的正确查询是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:20:42.467

更好的方法是：

```
mysql_query("UPDATE statics 
             SET pages_visited = CONCAT(pages_visited,',',$_SERVER['REQUEST_URI']) 
             WHERE visitor_ip = '$ip'"); 
```

# java - 在取消（）上的 SwingWorker doInBackground（）中停止持久的方法

> ID：11136541
> 
> 赞同：2
> 
> 时间：2012-06-21T10:50:02.610
> 
> 标签：java, swingworker

有很多关于如何取消/停止 SwingWorker 的信息。`doInBackround()`但是，当`cancel`从 EDT 调用时，我找不到关于如何停止在方法中启动的持久方法的适当解决方案。

例如，如果在`doInBackround()`using 方法中启动递归文件搜索`org.apache.commons.io.FileUtils.listFiles(file, FileUtils.getFileFilter(), DirectoryFileFilter.DIRECTORY);`，并`cancel(true)`从 EDT 调用，那么文件搜索如何中断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:02:22.293

您需要后台任务的协作才能阻止它。它应该定期检查任务是否已被取消，如果取消，则尽快返回。

因此，要么您`listFiles()`自己重新实现该方法并在每次迭代时检查该任务是否被取消，或者您使用一个肮脏的技巧，如果任务已被取消，则从文件过滤器内部抛出一些运行时异常（因为文件过滤器将为`listFiles()`方法检查的每个文件调用。

# javascript - 如何在 Grails 中重用外部 javascript 文件？

> ID：11136544
> 
> 赞同：0
> 
> 时间：2012-06-21T10:50:10.317
> 
> 标签：javascript, jquery, grails

我创建了一个简单的 javascript 文件并将其放在 web-app/js 中并将其命名为 util.js

它包含以下代码：

```
$(document).ready(function() {

    // adds a space after 3rd digit/letter of postal code
    $('#postalCode').keyup(function() {
        var postalCodeValue = this.value;
        var postalCodeLength = postalCodeValue.length;

        if(postalCodeLength == 3){
            this.value = postalCodeValue + " ";
        }
    });
}); 
```

这是非常简单的代码，我将它附加在 main.gsp 上，这样我就不必每次都继续导入它。

```
...
<div class="footer" role="contentinfo"></div>
<div id="spinner" class="spinner" style="display:none;">
    <g:message code="spinner.alt" default="Loading&hellip;" /></div>
    <g:javascript library="application" />
    <g:javascript library="util" />
    <r:layoutResources />
... 
```

现在，有两种形式使用它（Form1 和 Form2）。它们属于不同的 gsp 文件。Form1 和 Form2 都有一个具有相同 ID“#postalCode”的文本字段。

```
<g:textField name="postalCode" maxlength="7" id="postalCode" pattern="([A-Z]|[a-z])[0-9]([A-Z]|[a-z]) [0-9]([A-Z]|[a-z])[0-9]" required="" value="${fosterHomeInstance?.postalCode}"/> 
```

问题是，util.js 适用于 Form1，但奇怪的是，它不适用于 Form2。鉴于它们具有相同的 id，并将代码`<g:javascript library="util" />`放在 main.gsp 中，那么理论上它们应该可以正常工作吗？嗯..这很奇怪。我右键Form2查看源码，util.js肯定有。我真的想不出它不应该起作用的原因。我希望它适用于两种形式，因为我不想重新重写相同的代码。

PS：我尝试将 id 更改为 class = "postalCode" 并将 $('#postalCode')... 更改为 $('.postalCode') 但仍然无效。我还在邮政编码文本字段上添加了一个 onClick 触发器，单击时会出现警报（其代码来自 util.js），以测试是否正在读取 util.js，它有效，但仍然无法解决问题。我很困惑。我可以简单地将它重写为 onKeyUp 并添加一个旧 javascript 时尚的函数，但我可能在这里遗漏了一些东西，所以我想先听听你们的意见。:'(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:40:20.520

我建议在整个主要 JavaScript 函数的位置添加 console.log("Descriptive text") 以进行调试。这将让您在 JavaScript 停止工作之前了解您对 JavaScript 的了解程度。很可能某些 JavaScript 正在按您的预期执行，但其他部分则没有。例如，

```
$(document).ready(function() {
console.log("Document is ready");
  $('#postalCode').keyup(function(){
    console.log("Keyup function started.");
    var postalCodeValue = this.value;
    var postalCodeLength = postalCodeValue.length;
    console.log("Postal Code Value is: " + postalCodeValue);
    console.log("Postal Code Length is: " + postalCodeLength);

    if(postalCodeLength == 3){
        console.log("The postal code length is exactly 3.");
        this.value = postalCodeValue + " "
    }
}); }); 
```

值得注意的是，Internet Explorer 默认情况下没有打开控制台，因此您需要在发布站点以供公众使用之前删除这些行，或者检查浏览器并将控制台定义为其他内容（如果浏览器是 IE）。

您可以使用 CTRL+SHIFT+J 在 Chrome 中打开 JS 控制台。有关打开它的其他方法，请参阅[https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers 。](https://webmasters.stackexchange.com/questions/8525/how-to-open-the-javascript-console-in-different-browsers)

# android - 从文件中读取 double[] 值

> ID：11136553
> 
> 赞同：0
> 
> 时间：2012-06-21T10:50:46.453
> 
> 标签：android, file

这段代码是可以将double值以double[]的形式保存到文件中的部分。我想使用保存的值来绘制折线图。它应该是'double []'形式。如何读取保存的值“doublelist”？

--这是我修复的新代码。“double[] value = (double[]) ois.readObject();”中有错误 线。它说“重复的局部变量值”

```
public static double[] getValue(){
    FileInputStream fis = null;
    ObjectInputStream ois = null;
    List<Double> newList = new ArrayList<Double>();
    double[] value;
    try {
        fis = new FileInputStream("user_data.txt");
        ois = new ObjectInputStream(fis);

       double[] value = (double[]) ois.readObject();

    } catch (Exception ex) {

        try {
            fis.close();
            ois.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:06:56.913

变化中`getDoubles()`：

```
newList = (ArrayList<Double>) ois.readObject(); 
```

至

```
double[] doubles = (double[]) ois.readObject();
newList = new ArrayList<Double>(doubles.length);
for (Double d : doubles) {
    newList.add(d);
} 
```

这里的主要问题是没有一种非常方便的方法可以将基元数组（`double`在这种情况下）转换为对象数组（`Double`在这种情况下）。

# oracle - sdo_geom.relate 确定 CONTAINS 预期的 DISJOINT

> ID：11136555
> 
> 赞同：0
> 
> 时间：2012-06-21T10:50:48.350
> 
> 标签：oracle, oracle-spatial

我在 10.2.0.5 (win64) 和 11.2.0.3 补丁 7 (win32) 上得到以下行为。

我不确定我的期望是错误的还是甲骨文的结果。

在围绕线元素创建缓冲区并确定缓冲区与线之间的关系时，我希望得到 CONTAINS（该线包含在缓冲区的边界内），但我得到了 DISJOINT。

这是测试代码：

```
declare
   l_geo1   mdsys.sdo_geometry;
   l_geo2   mdsys.sdo_geometry;
   l_relate varchar2(100);
begin

   -- Create the line
   l_geo1 := mdsys.sdo_geometry(2002
                               ,90112
                               ,null
                               ,mdsys.sdo_elem_info_array(1, 2, 1)
                               ,mdsys.sdo_ordinate_array(153972.952, 473287.52, 153972.839, 473281.531));

   -- Create the buffer using 0.020 meters = 20mm

   l_geo2 := sdo_geom.sdo_buffer(l_geo1, 0.020, 0.0005);

   -- Determine the relation
   l_relate := sdo_geom.relate(l_geo2, 'determine', l_geo1, 0.0005);

   dbms_output.put_line(l_relate);

end; 
```

当使用缓冲区大小 0 时，关系为 EQUAL（如预期的那样）。当使用缓冲区大小 0.01-0.26 时，关系是 DISJOINT 当使用缓冲区大小 > 0.027 时，关系是 CONTAINS。

这种行为在我们数据集中的很多行中都可以找到。所有这些线路几乎都是南北走向。

我对结果的期望是否正确？sdo_geom.relate 函数是否返回错误的结果？

谢谢，雷内。

编辑：为不同的缓冲区大小添加了一个循环：

```
0 EQUAL
.001 CONTAINS
.002 CONTAINS
.003 CONTAINS
.004 CONTAINS
.005 CONTAINS
.006 DISJOINT
.007 DISJOINT
.008 DISJOINT
.009 DISJOINT
.01 DISJOINT
.011 DISJOINT
.012 DISJOINT
.013 DISJOINT
.014 DISJOINT
.015 DISJOINT
.016 DISJOINT
.017 DISJOINT
.018 DISJOINT
.019 DISJOINT
.02 DISJOINT
.021 DISJOINT
.022 DISJOINT
.023 DISJOINT
.024 DISJOINT
.025 DISJOINT
.026 DISJOINT
.027 CONTAINS
.028 CONTAINS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T17:35:01.923

可能是 sdo_geom.relate 返回了错误的结果（结果在 MapViewer 上看起来都很好且合理）。

但是，值得注意的是，如果您以 0.0001 的容差执行相关 DETERMINE，它会如您预期的那样返回所有上述情况（0.001 到 0.028）的 CONTAINS。

尽管我没有进一步研究，但您可能会发现缓冲结果（出于某种原因）在 0.006 和 0.026 之间的容差范围内。过去，内置缓冲命令存在一些问题，所以如果它不完全一致，我也不会感到惊讶。

# ios - 如何在 xcode 中保持 coco2d 中 UIimage 的分辨率？

> ID：11136557
> 
> 赞同：0
> 
> 时间：2012-06-21T10:50:50.207
> 
> 标签：ios, xcode, uiimage, ccsprite

嗨，我正在使用 cocos2d 开发图像编辑应用程序。当我曾经在 cocos2d 中对 ccsprite 执行一些操作时，我会截取 ccsprite 的屏幕截图并将其保存以执行下一个效果。但是在执行每个动作之后，屏幕截图的图像变得更加模糊。我想在整个过程中保持相同的图像分辨率，所以如果你有任何想法在每次屏幕截图后保持分辨率。如何解决分辨率问题？

你可以通过 stackram1988@gmail.com 给我发电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T07:33:57.700

嗨，我正在使用此代码截屏

+(CCRenderTexture*) screenshotWithStartNode:(CCSprite *)startNode 文件名:(NSString* )filename { [CCDirector sharedDirector].nextDeltaTimeZero = YES;

```
CGSize winSize = CGSizeMake(startNode.contentSizeInPixels.width, startNode.contentSizeInPixels.height);

CGSize   photoSize =CGSizeMake(startNode.contentSize.width, winSize.height * startNode.scaleX);
CCRenderTexture* rtx =[CCRenderTexture renderTextureWithWidth:startNode.contentSizeInPixels.width height:startNode.contentSizeInPixels.height];
[rtx begin]; 
```

[开始节点访问]; [rtx 结束];

```
// save as file as PNG
[rtx saveBuffer:[self screenshotPathForFile:filename]
         format:kCCImageFormatPNG];

return rtx; 
```

}

# c# - 如何获取仅包含 youtube 链接的图形 facebook 链接

> ID：11136559
> 
> 赞同：0
> 
> 时间：2012-06-21T10:50:55.057
> 
> 标签：c#, asp.net, facebook, json, facebook-graph-api

我只想在我或我的朋友墙上获取**youtube.com链接。**我正在使用以下 Facebook Graph API 调用：

```
https://graph.facebook.com/me/links&fields=link 
```

它给了我这样的好清单：

```
{
  "data": [
    {
      "link": "http://www.youtube.com/watch?v=jozTK-MqEXQ", 
      "id": "311162005645378", 
      "created_time": "2012-06-21T08:35:46+0000"
    }, 
    {
      "link": "http://www.facebook.com/photo.php?fbid=385669064830879&set=a.384862068244912.91206.150665568331231&type=1", 
      "id": "136116106525926", 
      "created_time": "2012-06-14T10:12:33+0000"
    }, 
```

列表很长，所以这只是一个示例。

我希望能够仅获取来自**youtube.com的链接**

我的意思是，如您所见，有第二个链接来自**facebook**，而不是 youtube.com

我希望能够获得我或我朋友的所有**youtube.com**链接的列表。

**这可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:05:05.270

好吧，我不认为 Facebook API 提供过滤功能。因此，您需要获取整个列表并自己遍历它，以便过滤掉 youtube.com 链接。

一种简单的方法是将所有以**[http://www.youtube.com](http://www.youtube.com)**开头的链接复制到另一个列表中。

[另外：主页提要](https://stackoverflow.com/questions/9693546/home-feed-get-specific-links)的可能副本获取特定链接

# php - 根据先前选择的值刷新选择列表

> ID：11136560
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:50:55.520
> 
> 标签：php, javascript, jquery

我有两个选项列表：第一个是国家，第二个是城市。如果用户选择像巴基斯坦这样的国家，那么第二个列表应该只显示巴基斯坦城市名称。

我是 Web 开发人员的新手，等待您的回复。

问候：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:56:42.240

您的问题太模糊，无法给出具体答案，但总的来说，此时您应该开始考虑**数据结构**。

**城市列表需要以某种方式与国家联系起来。**

想一想你想如何做到这一点，或者你可能已经拥有它，并以此为基础提出一个**新的、更具体的问题**。

# php - 在php中创建正好30个字符的随机字符串

> ID：11136561
> 
> 赞同：3
> 
> 时间：2012-06-21T10:50:55.697
> 
> 标签：php, random

我正在尝试创建一个应该包含 30 个字符的随机字符串。但有时它也会创建 28 个字符。如何解决问题？我的代码是这样的：

```
function random_string(){
    $character_set_array = array( );
    $character_set_array[ ] = array( 'count' => 15, 'characters' => 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ' );
    $character_set_array[ ] = array( 'count' => 6, 'characters' => '0123456789' );
    $character_set_array[ ] = array( 'count' => 9, 'characters' => '!@#$%^&+_|~-=\{}[]:?/' );
    $temp_array = array( );
    foreach ( $character_set_array as $character_set )
    {
      for ( $i = 0; $i < $character_set[ 'count' ]; $i++ )
      {
        $temp_array[ ] = $character_set[ 'characters' ][ rand( 0, strlen( $character_set[ 'characters' ] ) - 1 ) ];
      }
    }
    shuffle( $temp_array );
    return implode( '', $temp_array );
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:55:17.507

我执行了该函数 10.000 次，但从未得到少于 30 个字符的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:50:01.823

我忍不住重写了这个函数。不然我就睡不着了……

```
<?php

function random_string(){

        $charset = array();

        $charset[]='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ';
        $charset[]='0123456789';
        $charset[]='!@#$%^&+_|~-=\{}[]:?/';

        $res='';

        for($i=0;$i<30;$i++){
                $j=$charset[array_rand($charset)];
                $res.=$j[mt_rand(0,strlen($j)-1)];
        }

        return($res);
}

// Let us do a long test that the returned random string is always 30 characters long
for($a=0;$a<1000000;$a++){
        $z=random_string();
        if(strlen($z)!=30){print("ERR!!! --> $z");exit;}
}

// If we make it here then all is good... probably.
print("OK!\n");

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:26:51.687

尝试这个：

```
function random_string(){
    $character_set_array = array( );
    $character_set_array[ ] = array( 'count' => 15, 'characters' => 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ' );
    $character_set_array[ ] = array( 'count' => 6, 'characters' => '0123456789' );
    $character_set_array[ ] = array( 'count' => 9, 'characters' => '!@#$%^&+_|~-=\{}[]:?/' );
    $temp_array = array( );

    foreach ( $character_set_array as $character_set )
    {
      for ( $i = 0; $i < $character_set[ 'count' ]; $i++ )
      {
        $temp_array[ ] = substr($character_set[ 'characters' ], 0, rand(0, count( $character_set[ 'characters' ] ) - 1 ));
      }
    }

    shuffle( $temp_array );
    return implode( '', $temp_array );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:17:24.317

尝试这个 ：

```
$temp_array = array( );
$temp_array[] = '\';
$temp_array[] = 'A';
echo implode( '', $temp_array );
echo '<br>length:'.strlen( implode( '', $temp_array )); 
```

这显示

```
A
length:1 
```

尝试`\`从您的列表中删除。

# c# - 自动映射器布尔属性为是或否

> ID：11136563
> 
> 赞同：4
> 
> 时间：2012-06-21T10:50:56.893
> 
> 标签：c#, .net, automapper, automapper-2

对于 TypeA 和 TypeB 之间的映射，我希望将所有布尔属性映射到“是”或“否”。我不想覆盖`<bool, string>`映射，因为我只希望 TypeA 和 TypeB 之间的映射。而且我不想为每个 TypeA 的布尔属性使用 .ForMember，因为它们很多。也许 ForAllMembers 有一个技巧，但我不能让它起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:03:59.320

您是否尝试过在 Bool 和 String 之间添加映射器并将其注册到引擎中？可能就这么简单，但我不记得了。

您还可以创建一个 ValueConverter，然后通知映射使用转换器。自从我使用 AM 以来已经有一段时间了，但这听起来是对的。

# css - 是否可以将生成的内容垂直居中？

> ID：11136564
> 
> 赞同：1
> 
> 时间：2012-06-21T10:50:58.990
> 
> 标签：css, pseudo-element

假设我`div`应用了以下样式：

```
div {
    border: 1px solid #000;
    padding-left: 35px;
    position: relative;
} 
```

为此，`div`我应用了一个`:before`伪元素。该伪元素的内容是图像：

```
div:before {
    content: url(someImage.png);
    background-color: #ccc;
    position: absolute;
    left: 0;
    width: 30px;
    height: 100%;
} 
```

的高度`div`是动态的。有什么方法可以使作为生成内容的一部分的图像垂直居中？

这是[一个例子](http://jsfiddle.net/H9r5S/1/)。

我不能使用`line-height`，因为我不知道`div`. 我不能使用边距或填充，因为生成的内容的背景颜色会超出`div`. 我怀疑答案是否定的，但我认为在我必须去更改很多标记之前在这里问一下可能是值得的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T10:56:55.050

理论上它应该是可能的，因为它只不过是常规内联`<img>`标签的 CSS 版本，但这在很大程度上取决于它的格式（可能还有生成元素的格式）。

为简单起见，我会将其设为背景图像，其内容为空字符串：

```
div:before {
    content: '';
    background: #ccc url(someImage.png) center center no-repeat;
    position: absolute;
    left: 0;
    width: 30px;
    height: 100%;
} 
```

请注意，我利用了灰色背景已经充分覆盖了生成区域的事实——我只是将图像居中在该灰色背景上。

[更新的小提琴](http://jsfiddle.net/BoltClock/H9r5S/9)

# tomcat - Solr 数据导入处理程序调度程序错误

> ID：11136571
> 
> 赞同：0
> 
> 时间：2012-06-21T10:51:14.567
> 
> 标签：tomcat, solr, dataimporthandler

我无法让 solr dataimportscheduler 工作。我有最新的 jar 文件，它打包了所有需要的类文件。尝试启动tomcat时出现以下错误。

```
 Jun 21, 2012 11:36:06 AM org.apache.catalina.core.StandardContext listenerStart
    SEVERE: Error configuring application listener of class        org.apache.solr.handler.dataimport.scheduler.ApplicationListener
java.lang.ClassNotFoundException: org.apache.solr.handler.dataimport.scheduler.ApplicationListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:525)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:507)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:124)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4715)
    at   org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1095)
    at org.apache.catalina.startup.HostConfig$DeployDirectory.run(HostConfig.java:1617)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

    Jun 21, 2012 11:36:06 AM org.apache.catalina.core.StandardContext listenerStart
    SEVERE: Skipped installing application listeners due to previous error(s) 
```

我假设当他们说“不要忘记将以下侦听器声明添加到 Solr 的 web.xml：

```
<listener>
   <listener-class>org.apache.solr.handler.dataimport.scheduler.ApplicationListener</listener-class>
</listener> 
```

这意味着将下面的行添加到 Tomcat 的 web.xml

```
<listener>
   <listener-class>org.apache.solr.handler.dataimport.scheduler.ApplicationListener</listener-class>
</listener> 
```

任何帮助都感激不尽。

谢谢

更新：

我更新了 solr 的 web.xml，现在 tomcat 启动时没有任何错误，但是当计划任务运行时，它会清空我的索引。我有不止一个 solr 核心......我已经将 dataimport.properties 放在根文件夹中，每个核心都有一个。这就是我在根目录中的属性文件的样子。

```
#################################################
#                                               #
#       dataimport scheduler properties         #
#                                               #
#################################################

syncEnabled=1
syncCores=Internal.Locations #(Locations is a folder inside Internal)

server=localhost
port=8080

webapp=solr

params=/select?qt=/dataimport&command=delta-import&clean=false&commit=true

interval=10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:36:00.183

属性文件中列出的核心只是为了让调度程序可以组装调用数据导入的 URL。

这正是您需要在属性文件中放置的内容，当您从浏览器手动触发 DIH 时，它们会在 URL 中列出，以逗号分隔的核心名称。
当然，您知道核心是在`solr/solr.xml`.

顺便说一句，您应该在 Tomcat 控制台（或日志文件）中看到这一行：

```
<index update process> Multiple cores identified in dataimport.properties. Sync active for: list-of-your-cores 
```

# java - 从 Java Web 应用程序触发一个静态 SOAP 请求

> ID：11136574
> 
> 赞同：0
> 
> 时间：2012-06-21T10:51:21.967
> 
> 标签：java, soap

我需要从我的 java web 应用程序中调用一个安全的 web 服务 (Https)。我们收到了一个静态soap请求（完整的soap消息），需要触发它并获取我们通信的身份验证令牌。现在，问题是如何从 Java 触发这个静态soap请求？由于某种原因，我们有不使用 Axis 的限制。我们如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:12:31.083

我决定写一个答案，以便我可以详细说明我在评论中写的内容。包括 Glassfish 在内的任何应用程序服务器都捆绑了一个 Web 容器。这个 web 容器负责处理 http 请求，其中包括 web 服务请求。

此外，Glassfish 附带了一些捆绑脚本，其中之一是用于从 WSDL 文件创建客户端存根。如果您使用 netbeans IDE，这很容易，如果没有，您可以在 bin 文件夹中手动运行脚本。

因为您使用的是 HTTPS，所以您还需要生成一个密钥库并将证书放在那里（请服务提供商将其提供给您）。

我知道它更复杂，但它也更加健壮，一旦你运行它，进行更改就更加容易和自动化。

# php - 在 PHP 中获取 .htaccess RewriteBase 参数的值

> ID：11136575
> 
> 赞同：3
> 
> 时间：2012-06-21T10:51:24.527
> 
> 标签：php, .htaccess

我想知道 PHP 中是否有一种方法可以获取 .htaccess 文件中列出的特定规则的值？用基本术语来说：如果有（例如）`RewiteBase`规则，它的价值是什么？

手册中似乎没有任何内容可以为之服务`$_SERVER`，也许`fread()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T10:55:09.460

不，没有办法找回它。

`RewriteBase`本身不是一个规则，它只是一个字符串，将在重写过程之前切断 url。

所以php没有任何机会检索它

PS：我个人想不出任何理由依赖它的价值。可能您正试图以错误的方式解决某些问题。

PPS：我从这里的评论中回答了@Adi 的问题：

不可能只阅读`.htaccess`原因，因为：

1.  不同目录中可能有多个`.htaccess`文件，您无法确定使用了哪一个
2.  `RewriteCond`可以指定在`httpd.conf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:57:26.963

这样做的目的是什么？

请注意，您可以通过/设置`ENV`变量。`.htaccess``php_flag``php_value`

如果这不是一个选项，您显然可以阅读文件内容并执行某种 grep。

`file_get_content('.htaccess');`应该做的伎俩。

# windows-phone-7 - ListBox：选择后TextBlock的“省略号”颜色错误

> ID：11136578
> 
> 赞同：0
> 
> 时间：2012-06-21T10:51:28.537
> 
> 标签：windows-phone-7, xaml

我的 ItemTemplate 中有一个带有一些 TextBlocks 的 ListBox。这个 TextBlocks 被定义为这个

```
<TextBlock Grid.Column="1" Grid.Row="0" Text="{BindingGasStationName}" 
    FontSize="20" FontFamily="Segoe WP SemiLight" Margin="0,0,0,0" Padding="0"
    MinHeight="27" TextTrimming="WordEllipsis"/> 
```

省略号按预期工作。问题是，当用户选择一个项目时，文本（以及“...”）的颜色会变为当前系统突出显示的颜色。这就是我想要的。但是当用户更改选择时，“...”在文本再次变回白色期间保持突出显示颜色。

这是一个已知的错误还是我做错了什么？

**更新**
当用户再次选择带有无效彩色省略号的项目时，它会在再次设置突出显示颜色之前变白......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:51:08.020

我刚刚重现了我的错误，对我来说绝对是一个 WP 错误。

解决方法是手动`ListBoxItem`使用`VisualStates`. 我在这里提供了一个示例，说明如何`ListBoxItem`使用正确的强调色完全突出显示（包括省略号）。您设置 的`ControlTemplate`并`ListBoxItem`为 Unselected 与 Selected 状态指定前景色。希望这可以帮助！

```
<ListBox Name="TheListBox">
        <ListBox.ItemContainerStyle>
            <Style TargetType="ListBoxItem">
                <Setter Property="Foreground" Value="{StaticResource PhoneAccentBrush}"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="ListBoxItem">
                            <Border x:Name="LayoutRoot" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" HorizontalAlignment="{TemplateBinding HorizontalAlignment}" VerticalAlignment="{TemplateBinding VerticalAlignment}">
                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="Normal"/>
                                        <VisualState x:Name="MouseOver"/>

                                    </VisualStateGroup>
                                    <VisualStateGroup x:Name="SelectionStates">
                                        <VisualState x:Name="Unselected">
                                            <Storyboard>
                                                <ColorAnimation Duration="0" To="{StaticResource PhoneForegroundColor}" Storyboard.TargetProperty="(Control.Background).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                                <ColorAnimation Duration="0" To="{StaticResource PhoneForegroundColor}" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="Selected">
                                            <Storyboard>
                                                <ColorAnimation Duration="0" To="{TemplateBinding Foreground}" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                            </Storyboard>
                                        </VisualState>
                                        <VisualState x:Name="SelectedUnfocused">
                                            <Storyboard>
                                                <ColorAnimation Duration="0" To="{TemplateBinding Foreground}" Storyboard.TargetProperty="(Control.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="ContentContainer" d:IsOptimized="True"/>
                                            </Storyboard>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <ContentControl x:Name="ContentContainer" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="#FF1BA1E2" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Background="Black" BorderBrush="Black"/>
                            </Border>
                        </ControlTemplate>

                    </Setter.Value>
                </Setter>
            </Style>
        </ListBox.ItemContainerStyle>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Grid.Column="1" Grid.Row="0" Text="{Binding}" 
FontSize="20" FontFamily="Segoe WP SemiLight" Margin="0,0,0,0" Padding="0"
MinHeight="27" TextTrimming="WordEllipsis"/>

            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

# c++ - 套接字发送的协议缓冲区流类型

> ID：11136580
> 
> 赞同：0
> 
> 时间：2012-06-21T10:51:35.603
> 
> 标签：c++, networking, protocol-buffers

我试图在套接字上发送长度前缀缓冲区。我正在使用协议缓冲区。我搜索了一下，发现可以使用 CodedOutputStream 中的 WriteVarint32 来实现。但所有示例都使用文件流或提升 asio。正常的套接字发送需要一个 void * 作为缓冲区才能通过套接字发送，但是当使用 boost asio 完成时，我收到以下错误

> 错误：从类型“boost::asio::const_buffers_1”到类型“void*”的无效转换</p>

我的客户端代码是

```
Person payload ;
payload.set_log_msg("We are using protobuf");
boost::asio::streambuf b;
std::ostream os(&b);

ZeroCopyOutputStream *raw_output = new OstreamOutputStream(&os);
CodedOutputStream *coded_output = new CodedOutputStream(raw_output);

coded_output->WriteVarint32(payload.ByteSize());
payload.SerializeToCodedStream(coded_output);
delete coded_output;
delete raw_output;
.
.
.
bytecount=send(hsock, (void *) b.data(), 10,0); 
```

我的 message.proto 文件的内容是

```
message Person {
  required fixed64 log_time =1;
  required fixed32 log_micro_sec =2;
  required fixed32 sequence_no =3;
  required fixed32 shm_app_id =4;
  required string packet_id =5;
  required string log_level=6;
  required string log_msg=7;

  } 
```

任何人都可以帮助我用其他东西替换 boost::asio::streambuf 以便我可以在普通套接字发送上发送它。该客户端的功能是向服务器发送一些消息。服务器在进行一些格式化后又将它们写入日志文件。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:36:09.873

来自[boost::asio 文档](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/const_buffer.html)

访问缓冲区内容：

```
boost::asio::const_buffer b1 = ...;
std::size_t s1 = boost::asio::buffer_size(b1);
const unsigned char* p1 = boost::asio::buffer_cast<const unsigned char*>(b1); 
```

所以你可以打电话：

```
bytecount = send(hsock, 
                 boost::asio::buffer_cast<const unsigned char*>(b.data()),  
                 boost::asio::buffer_size(b.data()), 
                 0); 
```

# android - Android 3.1 上 ViewPager 的替代品

> ID：11136584
> 
> 赞同：1
> 
> 时间：2012-06-21T10:51:47.470
> 
> 标签：android, android-fragments, android-viewpager

我正在开发一个 Android 3.1 平板电脑应用程序。

我发现了一个非常不错的小部件 ViewPager，它仅在`android.support.v4.view.ViewPager`.

`android.support.v4`如果我使用的是 Android 3.1 SDK，我想我不必使用。

**你知道Android 3.1上是否有类似ViewPager的东西吗？**
或
**如何在 Android 3.1 上使用片段？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:55:02.137

> 如果我使用的是 Android 3.1 SDK，我想我不必使用 android.support.v4。

因为`ViewPager`，是的，你知道。Android 支持包包含向后移植（例如，片段）和新的东西（例如，`ViewPager`）。

> 你是否有类似于 Android 3.1 上的 ViewPager 的东西？

`ViewPager`在 Android 支持包中，而不是在任何固件版本中。

> 如何在 Android 3.1 上使用片段？

如果您的应用仅在 API 级别 11+ 上运行，您可以使用[原生片段。](http://developer.android.com/guide/topics/fundamentals/fragments.html)

# ruby-on-rails - Rail AssociationTypeMismatch，如何在更新/创建之前将字符串转换为对象

> ID：11136585
> 
> 赞同：1
> 
> 时间：2012-06-21T10:51:50.877
> 
> 标签：ruby-on-rails, ruby-on-rails-3

不得不说我并没有真正寻找解决方案，因为我不知道我应该寻找什么。

情况是这样的：

我有一个对象（NewsItem），它有一个名为标签的关系。

```
class NewsItem < ActiveRecord::Base
    has_many :tags
end 
```

在提交导致此错误的更新/创建表单时，我将这些标签作为字符串数组获取：

```
ActiveRecord::AssociationTypeMismatch 
Tag expected, got String 
```

现在，在 rails 将它们保存为关系之前，我需要将这些字符串转换为标签，如下所示：

```
params[:tags].each do |tag|
    Tags.find_or_create_by_name(tag)
end 
```

通过这种方式，rails 可以获得所需的标签。

我知道我可以把它放在控制器中，但我需要它在模型上..

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:43:40.143

最简单的解决方案是添加一个新方法`tags_list`，与您在控制器中所做的相同，如下所示：

```
class NewsItem < ActiveRecord::Base

  has_many :tags

  def tags_list
    self.tags.map { |tag| tag.name }
  end

  def tags_list=(tag_names)
    self.tags = tag_names.map do |tag|
      Tag.find_or_create_by_name(tag)
    end
  end

end 
```

然后，在您看来，您必须将表单字段名称从更改`tags`为`tags_list`也。这就是常见的插件`acts_as_taggable_on`通常会做的事情。

# android - 自动更新的更好方法？

> ID：11136587
> 
> 赞同：0
> 
> 时间：2012-06-21T10:51:55.457
> 
> 标签：android, android-viewpager, updates

我有一个应用程序在按下按钮时执行更新（调用 AsyncTask）。现在我想改进它进行自动更新（在特定的时间范围内）。然后，如果“收听”了新的更新，我想显示我的应用程序界面（比如 whatsapp 或 skype）。

您认为执行此操作的更好方法是什么？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:56:46.023

最好的方法是[推送通知](https://developers.google.com/android/c2dm/?hl=pl)（假设您想轮询您自己的服务的更新）。在这种情况下，您不需要进行定期检查。

提供更多细节你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:56:58.243

您可以使用 Timer 来安排调用更新的 TimerTask。

# ruby-on-rails - 从 index.erb 到 show.erb 的 rails ajax 链接

> ID：11136594
> 
> 赞同：0
> 
> 时间：2012-06-21T10:52:24.527
> 
> 标签：ruby-on-rails

我从来没有在rails中做过ajax，所以我不知道如何开始。我想要做的是，在脚手架的顶部，我希望 index.erb 中的显示链接是 ajax 链接，从显示操作中获取内容，然后 ajax 将它们放在 index.erb 内的 div 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:03:39.763

您可以在 rails 中轻松地制作一个 href 标记，但根据您的 rails 版本，它会略有不同

如果您使用的是 < 3 的导轨

利用`link_to_remote`

[http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/link_to_remote](http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/link_to_remote)

如果您使用的是 rails > 3

您可以使用带有选项`link_to`的标签`:remote => true`

[http://apidock.com/rails/v3.0.0/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/v3.0.0/ActionView/Helpers/UrlHelper/link_to)

# extjs - 如何使用 ExtJS4 存储读取 JSON 中类似 CSV 的数据结构？

> ID：11136602
> 
> 赞同：0
> 
> 时间：2012-06-21T10:52:44.607
> 
> 标签：extjs, extjs4

正常的 JSON 方法如下所示：

```
{
  "list": [
    {
      "header1": "some value",
      "header2": "some other value"
    },
    {
      "header1": "some value",
      "header2": "some other value"
    },
    {
      "header1": "some value",
      "header2": "some other value"
    },
    ...
  ]
} 
```

但是当我使用它时，会有很大的开销，因为所有的“header1”和“header2”的东西。

所以我想到了一种更像 CSV 的方法：

```
{
  "headers": [ "header1", "header2" ],
  "list": [
    [ "some value", "some other value" ],
    [ "some value", "some other value" ],
    [ "some value", "some other value" ],
    ...
  ]
} 
```

但 ExtJS4 商店更喜欢第一种风格。是否有可能使用第二种格式，或者我应该在客户端上转换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:20:17.400

我认为您需要对其进行转换，但是还有其他方法可以减少开销，例如字段上的映射属性，因此您实际上可以只发送一个字母来标识属性，例如：

```
{
  "list": [
    {
      "1": "some value",
      "2": "some other value"
    },
    {
      "1": "some value",
      "2": "some other value"
    },
    {
      "1": "some value",
      "2": "some other value"
    },
    ...
  ]
} 
```

和领域：

```
{name: 'header1', type:'string', mapping:'1'}
{name: 'header2', type:'string', mapping:'2'} 
```

这只是一个建议，但这将减少开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:03:57.447

您应该将 Ext.data.Store 与数组读取器和 ajax 代理一起使用。您不需要服务器端的任何标头，您应该只定义您的标头在客户端的模型中将是什么。例如，您可以在客户端使用这样的代码：

```
Ext.define("MyModel", {
    extend: "Ext.data.Model",
    fields: [
        {name: "header1"},
        {name: "header2"}
    ]
});
var theProxy = new Ext.data.proxy.Ajax({
    timeout: 120000,
    method:  "POST",
    url:     "your_url_here",
        reader:  new Ext.data.reader.Array({
            root:          "list"
        })
});
var store = new Ext.data.Store({
    proxy:      theProxy,
    model:      "MyModel"
}); 
```

确保在定义模型时字段与从服务器返回的数组的顺序相同。这将是服务器返回的内容：

```
{
  "list": [
    [ "some value", "some other value" ],
    [ "some value", "some other value" ],
    [ "some value", "some other value" ],
    ...
  ]
} 
```

# java - 如何使用 AsyncTask 实现初始化

> ID：11136603
> 
> 赞同：0
> 
> 时间：2012-06-21T10:52:47.930
> 
> 标签：java, android, initialization, android-asynctask, game-engine

我想用 AsyncTask 初始化游戏引擎的所有组件。有人可以指导我如何做到这一点吗？

我想要这样的东西： 1\. 在代码运行之前，设置一个启动画面（.xml） 2\. 运行初始化代码 3\. 完成后，运行游戏的加载屏幕

这是我当前的代码：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display splash screen
        if(this.splashScreen != null) {
            // .xml
            setContentView(this.splashScreen);
        }

        // Do all the initialization

        // Acquire a wakeLock to prevent the phone from sleeping
        PowerManager powerManager = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, "GLGame");

        // Setup all the Game Engine components 
        gameEngineLog = new WSLog("WSGameEngine");
        gameEngineLog.setLogType(this.gameEngineLogType);
        gameLog = new WSLog(this.gameLogTAG);
        gameLog.setLogType(this.gameLogType);
        io = new FileIO(this, getAssets());
        audio = new Audio(this);
        wsScreen = new WSScreen(this, this.screenResizeType, this.customTopYGap, this.customLeftXGap, this.gameScreenWidth, this.gameScreenHeight);
        graphics = new Graphics(this, wsScreen.getGameScreen(), wsScreen.getGameScreenextended());
        renderView = new RenderView(this, wsScreen.getGameScreen(), wsScreen.getGameScreenextended(), FPS, maxFrameskippes);
        input = new Input(this, renderView, logGameEngineInputLog);
        networkSocket = new NetworkSocket(this);

        this.gameEngineLog.d(classTAG, "Completed initialization");
        setContentView(renderView);

        // Check that the developer has initialized the assets
        if(this.assets == null) {
            this.gameEngineLog.w(classTAG, "The assets for the game haven't been defined!");
        }

        this.getNetworkSocket().useAnalytics(this.analyticsAppAPIKey);
        this.getNetworkSocket().useServerCommunication(this.serverCommunicationAppID, this.serverCommunicationClientKey);
        this.getNetworkSocket().useFacebookCommunicaiton(this.facebookCommunicationAppID);

        // Check if server communication should be initialized
        if(this.networkSocket.getUseOfServerCommunication() == true) {
            this.networkSocket.getServerCommunication().initialize(this, this.networkSocket.getServerCommunicationAppID(), this.networkSocket.getServerCommunicationClientKey()); 
        }

        // Check if facebook communication should be initialized
        if(this.networkSocket.getUseFacebookCommunication() == true) {
            this.networkSocket.getFacebookCommunication().initialize(this.networkSocket.getFacebookCommunicationAppID(), true);
        }

        // Start the Load screen
        // Once all of this code has been executed, the class that extends this class calls "setScreen(new LoadScreen(this));" to set the LoadScreen, which
        // loads all the assets of the game

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:28:58.997

根据[asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)文档，该类公开了四种可用于实现应用程序加载逻辑的方法：

> onPreExecute()，在任务执行后立即在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。
> 
> doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。
> 
> onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。
> 
> onPostExecute(Result)，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。

按照文档，您可以在主 Activity 中启动异步任务。在 onPreExecute 方法中，您可以显示启动画面。

在 doInBackGround 方法中插入执行所有加载内容的代码。如果您想向用户提供有关加载状态的一些信息，您可以在此方法中使用 publishProgress 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

最后在 onPostExecute 方法中，您可以删除启动画面并运行游戏的加载画面。

看看[这个](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#WorkerThreads)例子。

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:32:31.960

啰嗦的回答，请耐心等待。

你必须做一些事情才能得到你想要的。

首先将您的活动分开，而不是多次调用 setContentView。

然后设置一个域对象，它是您的“游戏设置”，以便您可以加载它，初始化它的所有字段。

还有一个配置对象来加载您的设置。

在下面的示例中，我没有加载您的所有字段，但我希望您明白这一点。

最终结果将是这样的：

第一个活动：

```
package com.blundell.tut.ui;

import com.blundell.tut.R;
import com.blundell.tut.domain.Config;
import com.blundell.tut.task.LoadingTask;
import com.blundell.tut.task.LoadingTask.LoadingTaskFinishedListener;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.ProgressBar;

public class SplashActivity extends Activity implements LoadingTaskFinishedListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Show the splash screen
        setContentView(R.layout.activity_splash);
        // Find the progress bar
        ProgressBar progressBar = (ProgressBar) findViewById(R.id.activity_splash_progress_bar);
        // Start your loading
        new LoadingTask(progressBar, this, getAssets(), new Config()).execute("www.google.co.uk"); // Pass in whatever you need a url is just an example we don't use it in this tutorial
    }

    // This is the callback for when your async task has finished
    @Override
    public void onTaskFinished(GameDomain result) {
            // The result object is your loaded files!
        completeSplash();
    }

    private void completeSplash(){
        startApp();
        finish(); // Don't forget to finish this Splash Activity so the user can't return to it!
    }

    private void startApp() {
        Intent intent = new Intent(SplashActivity.this, MainActivity.class);
        startActivity(intent);
    }
} 
```

然后是执行加载的 ASyncTask：

```
package com.blundell.tut.task;

import com.blundell.tut.domain.Config;
import com.blundell.tut.domain.GameDomain;

import android.content.res.AssetManager;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ProgressBar;

public class LoadingTask extends AsyncTask<String, Integer, GameDomain> {

    public interface LoadingTaskFinishedListener {
        void onTaskFinished(GameDomain domain); // If you want to pass something back to the listener add a param to this method
    }

    private static final int NUM_OF_TASKS = 2;

    // This is the progress bar you want to update while the task is in progress
    private final ProgressBar progressBar;
    // This is the listener that will be told when this task is finished
    private final LoadingTaskFinishedListener finishedListener;

    private final AssetManager assets;

    private final Config config;

    /**
     * A Loading task that will load some resources that are necessary for the app to start
     * @param progressBar - the progress bar you want to update while the task is in progress
     * @param finishedListener - the listener that will be told when this task is finished
     */
    public LoadingTask(ProgressBar progressBar, LoadingTaskFinishedListener finishedListener, AssetManager assets, Config config) {
        this.progressBar = progressBar;
        this.finishedListener = finishedListener;
        this.assets = assets;
        this.config = config;
    }

    @Override
    protected GameDomain doInBackground(String... params) {
        GameDomain gameDomain = new GameDomain();
        Log.i("Tutorial", "Starting task with url: "+params[0]);
        if(resourcesDontAlreadyExist()){
            downloadResources(gameDomain);
        }

        return gameDomain;
    }

    private boolean resourcesDontAlreadyExist() {
        // Here you would query your app's internal state to see if this download had been performed before
        // Perhaps once checked save this in a shared preference for speed of access next time
        return true; // returning true so we show the splash every time
    }

    private void downloadResources(GameDomain gameDomain) {
        // We are just imitating some process thats takes a bit of time (loading of resources / downloading)
            int count = NUM_OF_TASKS;

            // Do some long loading things

            // Setup all the Game Engine components
           gameDomain.setGameEngineLog("WSGameEngine", config.LOG_TYPE);

           updateProgress(count--);

           gameDomain.setAssets(assets);

           updateProgress(count--);
    }

    public void updateProgress(int count) {
        // Update the progress bar after every step
        int progress = (int) ((NUM_OF_TASKS / (float) count) * 100);
        publishProgress(progress);
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        super.onProgressUpdate(values);
        progressBar.setProgress(values[0]); // This is ran on the UI thread so it is ok to update our progress bar ( a UI view ) here
    }

    @Override
    protected void onPostExecute(GameDomain result) {
        super.onPostExecute(result);
        finishedListener.onTaskFinished(result); // Tell whoever was listening we have finished
    }
} 
```

然后是您要实例化的对象：

```
public class GameDomain {

    private WSLog gameEngineLog;
    private FileIO io;

    public void setGameEngineLog(String name, String logType){
         gameEngineLog = new WSLog(name);
         gameEngineLog.setLogType(logType);
    }

    public void setAssets(AssetManager assets) {
         io = new FileIO(assets);
    }

} 
```

还有你的配置：

```
package com.blundell.tut.domain;

public class Config {
    public String LOG_TYPE = "logType";
} 
```

最后，您的 WakeLock 应该在每个活动 onCreate 中“获得”并在“onPause”中释放

# php - 未终止的字符串文字 - 将 php 变量传递给 javascript 函数，从 onclick 处理程序，在 echo 块中

> ID：11136604
> 
> 赞同：-1
> 
> 时间：2012-06-21T10:52:49.223
> 
> 标签：php, string, echo, literals

使用此代码获取未终止的字符串文字错误。它工作正常，但错误让我觉得我做错了什么。$Filearray 已经填充了文件名，并且对于每个文件名，它都会打印一个 div 块，单击该块时会调用“makeLightbox”。我在这里看不到任何未终止的字符串文字，但可能是我错误地传递了 php 变量。有任何想法吗？

```
for ($i = 0; $i < $numberFiles; $i++)
{
  $file = $fileArray[$i];
  echo ("
          <div class=\"block\">
            <img src=\"$file\" class='thumb' onclick=\"makeLightbox('$file')\") \" />
          </div>
       ");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:00:24.917

在输出之前将 PHP 变量编码为 JSON，以便将它们转换为有效的 JavaScript 文字。

例如

```
var s = <?php echo json_encode($val); ?> 
```

# objective-c - 如何仅根据名称在应用程序中设置图标

> ID：11136613
> 
> 赞同：0
> 
> 时间：2012-06-21T10:53:49.200
> 
> 标签：objective-c, ios, xcode, xcode4

有没有办法仅根据名称设置应用程序图标。例如，我知道如果我将文件命名为**Default.png**和**Default@2x.png**并将其添加到我的项目中，它们就会成为我的 Splash/Default 屏幕。应用图标呢？

第二种方式：也许我可以在 plist/app 的某个地方声明名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:56:35.853

应用图标应命名为**Icon.png**和**Icon@2x.png**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T10:59:47.417

您可以在目标的 info.plist 文件中选择所有这些资源的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:08:12.933

您还可以从任何地方选择图像，如下所示： ![在此处输入图像描述](../Images/29c852fad3120f00e87a4b5fb9a79003.png)

# c# - 当路由包含 WebServiceHostFactory 时 ASP MVC RedirectToAction 重定向错误

> ID：11136615
> 
> 赞同：1
> 
> 时间：2012-06-21T10:53:55.227
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, wcf, asp.net-mvc-routing

我有 ASP MVC 3 应用程序。我创建了 WCF REST JSON 服务，并通过 RegisterRoutes 方法中 Global.asax 文件中的下一个代码将其添加到我的应用程序中：

```
 routes.Add("Api", new ServiceRoute("api", new WebServiceHostFactory(), typeof     (ExternalApiService))); 
```

服务运作良好，但当我尝试使用

```
 RedirectToAction("Index", "User", new { id = 1 }); 
```

我的控制器操作中的方法，它重定向到 (http://localhost:8091/api?action=Index&controller=User&id=1) url。

谁能帮助我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:31:33.893

我认为您可能缺少路由约束。看看这个讨论[路由与 WCF ServiceRoute：Html.ActionLink 呈现不正确的链接！](https://stackoverflow.com/q/3570887/1437962)

# javascript - 如何为 Pinterest 按钮的 onlick 事件添加另一种方法？

> ID：11136617
> 
> 赞同：0
> 
> 时间：2012-06-21T10:53:59.110
> 
> 标签：javascript, jquery, pinterest

pinit.js 用 IFRAME 替换了特殊标记的锚标记。

我想在用户在实际要求我登录之前单击 Pinterest 按钮时添加一条警报消息。那可能吗？

这是代码：http: [//jsfiddle.net/ucuHY/14/](http://jsfiddle.net/ucuHY/14/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:58:32.340

这是不可能的。除非，有人回答说这确实是可能的。我会接受这个答案

# xcode - Xcode 理解如何分析调用栈

> ID：11136621
> 
> 赞同：0
> 
> 时间：2012-06-21T10:54:05.210
> 
> 标签：xcode, debugging, callstack

我正在使用 Xcode 4.3.1，但我不太了解如何使用控制台来通过调用堆栈。在我的代码中，我有多行调用一个特定的动作，并且在这个动作中有一个失败的断言。从输出中我只能看到断言失败消息和调用调用堆栈的对象的地址（至少我猜是这样）。但是我无法浏览并查看我的类的哪一行代码调用了导致断言的操作（有点像你可以从 Eclipse 分析堆栈跟踪）。是否有一些相关的教程可以解释这一点？

这是我从班级的多行中调用的操作：

```
 [[CCActionManager sharedManager] addAction:[CCSequence actions:fadeAction, nil] target:source paused:NO]; 
```

我知道它会引发断言，但我无法从控制台输出中了解调用此方法的哪些行会导致此问题。

这是我的控制台输出：

```
*** Assertion failure in -[CCActionManager addAction:target:paused:], /Users/user/Desktop/SourceCode - Backups/MyApp/MyApp/libs/cocos2d/CCActionManager.m:162
2012-06-21 12:40:54.761 MyApp[4148:707] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Argument target must be non-nil'
*** First throw call stack:
(0x338e08bf 0x303d41e5 0x338e07b9 0x311273b3 0xdc3b 0x5fbe5 0x66d2b 0x338e3814 0x3383e7e1 0x1afbb 0x1c39b 0x1981f 0x3383a435 0x435a7 0x43277 0x44aed 0x3128550f 0x31284f01 0x3126b4ed 0x3126ad2d 0x37fa9df3 0x338b4553 0x338b44f5 0x338b3343 0x338364dd 0x338363a5 0x37fa8fcd 0x31299743 0x58b9b 0x20e4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:00:11.190

Apple 对此有技术说明 - [TN2151](https://developer.apple.com/library/ios/#technotes/tn2151/_index.html)。特别是有关符号化崩溃报告的部分。

使用应用程序的 .dSYM 文件，您可以将堆栈地址（那些十六进制数字）以更易读的格式转换为来自源的调用。

# vba - CDO 电子邮件访问报告

> ID：11136626
> 
> 赞同：2
> 
> 时间：2012-06-21T10:54:20.697
> 
> 标签：vba, ms-access, smtp, ms-access-2007, cdo.message

我有一份由 SQL 语句修改的访问报告，以便生成一份报告给相应的收件人。我在 access 2007 的 VBA 代码中使用 CDO。我有兴趣获取这份报告并通过电子邮件发送。如何使 HtmlBody 具有访问报告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:04:20.033

也许是这样的。想法是将报告保存为 HTML 或 RTF，然后将其读入：

```
Const ForReading = 1

DoCmd.OutputTo acOutputReport, "Report1", acFormatHTML, "Report1.htm"

Set fs = CreateObject("Scripting.FileSystemObject")
Set f = fs.OpenTextFile("Report1.htm", ForReading)
sBody = f.ReadAll
f.Close

obj.HTMLBody = sBody 
```

# java - 使用 Apache Axis2 从 WSDL 文件生成单独的 Java 文件而不是单个 Stub

> ID：11136627
> 
> 赞同：2
> 
> 时间：2012-06-21T10:54:27.207
> 
> 标签：java, web-services, wsdl, axis2, wsdl2java

目前，我们正在使用以下命令从给定的 WSDL 文件生成单个存根：

```
wsdl2java -uri "filename.wsdl" 
```

这会生成一个包含所有函数调用等的 Java Stub。问题是这次生成的 Java Stub 的大小超过 20mb，这使得编译、调试和重用变得困难。

有人可以建议一种方法来生成隔离的 Java 文件而不是单个存根。

其他人可以建议一些其他方法来通过 Java Web 服务处理大型 WSDL 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-12T20:45:01.207

在生成存根时，*wsdl2java*通常会生成数据绑定类作为存根类的内部类。所以你所有的数据绑定类都包含在存根类文件中，增加了文件的大小。

wsdl2java 参数`-u`使其将数据绑定类生成为常规类，每个类都在其自己的文件中。这将减少存根类文件的大小，尽管您最终仍然会得到相同数量的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:58:54.143

我认为唯一可管理的方法是将 wsdl 生成的类作为一个单独的模块。因此，它应该编译一次，放入 maven 存储库，然后用作`.jar`.

您也可以尝试使用标准的 jaxws，或者更强大和更现代的 CXF，也许它会更好地生成代码。

# login - 以编程方式登录 msn Messenger

> ID：11136628
> 
> 赞同：0
> 
> 时间：2012-06-21T10:54:42.063
> 
> 标签：login, msn, messenger

如何启动一个 msn 信使窗口，填写电子邮件并传递字段，然后使用 C# 以编程方式“按下”按钮“登录”？

我想这样做是因为这样可以省去我为 4 个电子邮件地址手动执行所有这些操作的麻烦。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T10:57:47.787

我想你可以像这里解释的那样做一些轻量级的 UI 自动化（带有完整示例） - [http://msdn.microsoft.com/en-us/magazine/cc163864.aspx](http://msdn.microsoft.com/en-us/magazine/cc163864.aspx)

# php - 检查列值 if 1 return 1 else 0

> ID：11136632
> 
> 赞同：-2
> 
> 时间：2012-06-21T10:54:57.227
> 
> 标签：php, sql

我有一个函数 disp ，我在其中传递表的列名值，以检查该列值在数据库中是 1 还是 0。如果值为 1 它应该返回 1 否则 0 这是我试图制作的函数。但没有给出想要的结果。

请告诉我是否有其他方法可以检查特定行中列的值是 1 还是 0

```
 function disp($x){
   @$ncenter=$_SESSION['ncenter'];
  $sql = "SELECT COUNT('$x') FROM sel WHERE 'numcenter' = '$ncenter' and '$x' = 1";
  $sql.=';';
   echo $sql;
 $res = mysql_query($sql);
  if(!$res) die ('Unable to run query:'.mysql_error());
  $row = mysql_fetch_array($res);
  if($row["COUNT('$x')"] > 0){

            return 0;
        }
      else{

            return 1; 
        }
 } 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:11:59.037

```
// SELECT * FROM sel WHERE 'numcenter' = '$ncenter' and '$x' = 1 LIMIT 1

if(empty($row)){
    return 0;
}
else{
    return 1; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:29:45.553

您可以使用 SQL CASE 语句：

```
SELECT (CASE WHEN `column_name` = '1' THEN 1 ELSE 0 END) AS `column_name_equals_one` FROM `table_name` WHERE `row_identifier_column_name` = 'row_identifier_value'; 
```

编辑：我还重写了你的代码，因为它伤害了我的眼睛（我没有测试过这个）。

```
/**
 * Checks if the value of a specific field equals 1 or 0
 * 
 * @param string $columnName The name of the column
 * @param string $rowIdentifier The row identifier
 * @returns boolean|integer Returns false on failure or the query result as an integer on success
 */
function disp($columnName, $rowIdentifier) {
    $returnValue = false;

    $query = sprintf("SELECT (CASE WHEN `%s` = '1' THEN 1 ELSE 0 END) AS `result` FROM `table_name` WHERE `row_identifier_column_name` = '%s'", mysql_real_escape_string($columnName), mysql_real_escape_string($rowIdentifier));

    if (($result = mysql_query($query)) !== false) {
        if (($row = mysql_fetch_assoc($result)) !== false) {
            $returnValue = (int)$row['result']
        }

        mysql_free_result($result);
    }

    return $returnValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:35:54.303

尝试这个;

```
$row = mysql_result($res, 0, 0); 
$numb_of_rows = mysql_num_rows($row);
  if($numb_of_rows > 0){ 

            return 1; 
        } 
      else{ 

            return 0;  
        } 
```

# wpf - 基于 Thumb 可见性的 WPF ScrollBar 不透明度

> ID：11136634
> 
> 赞同：3
> 
> 时间：2012-06-21T10:55:02.460
> 
> 标签：wpf, styles, slider, scrollbar, visibility

当不再需要拇指时，我无法弄清楚如何更改 ScrollBar Opactity。

换句话说：我想拥有像 Auto 一样的 ScrollViewer 的属性 VerticalScrollBarVisibility，但 ScrollViewer 的内容应该保留它的大小。我必须考虑到必须将 ScrollBar 的样式应用于具有内部 ScrollViewers 的 3rd 方控件。

这是我的代码。我试图对 Thumb 的 IsVisible 触发器做出反应，但没有成功。

```
<Style x:Key="ScrollBarThumb" TargetType="{x:Type Thumb}">
<Setter Property="OverridesDefaultStyle" Value="true"/>
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Thumb}">
            <Border x:Name="ScrollBarThumbBorder" CornerRadius="4" />
        </ControlTemplate>
    </Setter.Value>
</Setter>
<!--<Style.Triggers>
    <Trigger Property="IsVisible" Value="False">
        <Setter Property="Opacity" Value="0.3" />
    </Trigger>
</Style.Triggers>--> 
```

```
<ControlTemplate x:Key="VerticalScrollBar" TargetType="{x:Type ScrollBar}">
<Border CornerRadius="4">
    <Track
        Name="PART_Track"
        IsDirectionReversed="true">
        <Track.DecreaseRepeatButton>
            <RepeatButton 
                Style="{StaticResource ScrollBarPageButton}"
                Command="ScrollBar.PageUpCommand" />
        </Track.DecreaseRepeatButton>
        <Track.Thumb>
            <Thumb Style="{StaticResource ScrollBarThumb}" />
        </Track.Thumb>
        <Track.IncreaseRepeatButton>
            <RepeatButton 
                Style="{StaticResource ScrollBarPageButton}"
                Command="ScrollBar.PageDownCommand" />
                    </Track.IncreaseRepeatButton>
    </Track>
</Border> 
```

```
<Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
<Setter Property="OverridesDefaultStyle" Value="True"/>
<Style.Triggers>
    <Trigger Property="Orientation" Value="Vertical">
        <Setter Property="Width" Value="10"/>
        <Setter Property="Height" Value="Auto" />
        <Setter Property="Template" Value="{StaticResource VerticalScrollBar}" />
    </Trigger>
</Style.Triggers> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:49:47.860

我做的 ：）

诀窍是在 ControlTemplate 触发器中使用 SourceName。

现在 ScrollBar 的 ControlTemplate 看起来像这样：

```
 <ControlTemplate x:Key="VerticalScrollBar" TargetType="{x:Type ScrollBar}">
    <Border
        Background="{StaticResource ScrollBarBackgroundBrush}"
        CornerRadius="4">
        <Track
            Name="PART_Track"
            IsDirectionReversed="true">
            <Track.DecreaseRepeatButton>
                <RepeatButton 
                    Style="{StaticResource ScrollBarPageButton}"
                    Command="ScrollBar.PageUpCommand" />
            </Track.DecreaseRepeatButton>
            <Track.Thumb>
                <Thumb Name="Thumb" Style="{StaticResource ScrollBarThumb}" />
            </Track.Thumb>
            <Track.IncreaseRepeatButton>
                <RepeatButton 
                    Style="{StaticResource ScrollBarPageButton}"
                    Command="ScrollBar.PageDownCommand" />
                        </Track.IncreaseRepeatButton>
        </Track>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger SourceName="Thumb" Property="IsVisible" Value="False">
            <Setter Property="Opacity" Value="0" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

# asp.net-mvc-3 - MVC 3 - 绑定到自定义的匿名类型 linq 查询

> ID：11136636
> 
> 赞同：1
> 
> 时间：2012-06-21T10:55:06.743
> 
> 标签：asp.net-mvc-3, model-binding

以下示例有效。对此没有任何疑问。问题是如何使以下示例使用**由 select new {...} 形成的复杂查询的匿名类型结果集**

控制器：

```
public ActionResult Index()
{
    var myJobs = from j in db.Jobs where j.deleted == false select j;
    //Need to REPLACE myJobs WITH a complex query
    return View(myJobs.ToList());
} 
```

索引视图：

```
@model IEnumerable<MyProj.Models.Jobs> //NOT SURE WHAT TO DO HERE
@{
    ViewBag.Title = "Jobs";
}
<table>
<tr>
    <th>
        Job-No
    </th>
    <th>
        Job-Name
    </th>
</tr>
@foreach (var item in Model)
    {
        <tr>
            <td>@String.Format("{0:000000}", item.jobId)
            </td>
            <td>@item.jobName
            </td>
        </tr>
    }
</table> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:02:18.940

从问题中很难理解您的问题-“我不知道该怎么做”有点含糊。

但是，这是我对您的问题的猜测：

`IEnumerable`如果该查询的基本结果（即***element***）由于 a 是匿名类型`select new {}`，那么我建议制作一个反映您期望的结果的已知类型（顺便说一句 - 即嵌套枚举等）并替换匿名而是使用该类型的投影。现在您可以在视图中以声明方式使用该类型。

即如果您的查询是这样的

```
from job in jobs
where !job.deleted
select new { id = job.id } 
```

让自己成为模型类型：

```
public class JobQueryResult{
  public int id { get; set; }
} 
```

并相应地改变你的`select`：

```
select new JobQueryResult { id = job.id } 
```

然后，您还可以在模型类型上创建一个构造函数，它只接受一个`Job`对象，然后拉入您需要的数据（将责任从查询表达式中移开）。

无论哪种方式，您现在都`IEnumerable<JobQueryResult>`可以轻松地将其用作视图中的模型类型。

一个快速而肮脏的方法是考虑使用`dynamic`- （但你没有从我这里听到）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:46:06.627

考虑到您想要显示“选择新”的事实......您仍然需要向视图发送一些内容。获取新实体中存在最多字段的实体。

创建部分类

```
namespace YourDomain.Model
{
    [MetadataType(typeof(EntityWithinXList))]
    public partial class EntityWithinXList
    {
        [DataMember]
        public string DesiredFieldFromA{ get; set; }

        [DataMember]
        public int DesiredFieldFromB{ get; set; }
    }
    public class EntityWithinXList
    { } 
```

因此，您需要将 2 个其他表中的 2 个新字段添加到您的实体中：

```
 var list = (from x in xList 
             join a in AList on x.commonfield equals a.commonfield
             join b in BList on x.newCommonField equals b.newCommonField
                            select new { x, a.DesiredFieldFromA, b.DesiredFieldFromB }).ToList();

list.ForEach(el =>
                {
                    el.x.DesiredFieldFromA= el.DesiredFieldFromA;
                    el.x.DesiredFieldFromB= el.DesiredFieldFromB ;
                });
return list.Select(p=>p.x); 
```

除非我误解了你的问题，否则应该这样做。您发送到视图的列表是`List<EntityWithinXList>`

# web-crawler - 用于商业目的的最佳网络爬虫？

> ID：11136637
> 
> 赞同：1
> 
> 时间：2012-06-21T10:55:07.360
> 
> 标签：web-crawler, nutch

我正在开发一个抓取数千万网页的系统，该系统将上线。我宁愿不从头开发爬虫。

哪些开源网络爬虫符合以下标准：

*   可以定制
*   高度可扩展
*   轻松爬取ajax网站
*   智能爬行
*   遵纪守法

如果我遗漏了任何一个，请评估您认为重要的其他标准。

我有以下开源爬虫的列表。他们是否具备上述特征？

1.  刮擦
2.  机械化
3.  纳奇
4.  赫里特里克斯
5.  亚麻
6.  跟踪
7.  蜘蛛侠
8.  搜查鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T23:05:41.303

我已经和 nutch 合作了一段时间，它似乎很适合这个标准。插件系统允许您抓取新材料并轻松部署。我遇到的一件事是让它使用多个代理，但总的来说它是非常可定制的。

# android - 通过 sql 查询过滤联系人姓名

> ID：11136645
> 
> 赞同：0
> 
> 时间：2012-06-21T10:55:26.997
> 
> 标签：android, sql, android-contacts

我一直在尝试使用 ContactsContract 获取所有联系人。我想使用“选择”参数过滤结果。换句话说，我想检索所有以字母 A 开头的联系人。所以我写了这个片段。但它崩溃了。

```
Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] {
        Contacts._ID, // the contact id column
        Contacts.DISPLAY_NAME,  // column if this contact is deleted
        Contacts.HAS_PHONE_NUMBER   };

String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + 
            " COLLATE LOCALIZED ASC";
cursor = getContentResolver().query
            (uri,
            projection,
            "android.provider.ContactsContract.Contacts.DISPLAY_NAME like 'A'",
            null,
            sortOrder); 
```

据我所知，我可以插入到选择参数中，就像你可以在 SQL 语句的 where 子句中插入一样，这就是我所做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:07:51.713

干得好。

```
db.query(
  TABLE_NAME,
  projection, 
  Contacts.DISPLAY_NAME + " like " + "'?%'",
  new String[] { "A" },
  null, null, null
); 
```

# visual-c++ - 无效的对话框模板名称 MFC

> ID：11136648
> 
> 赞同：3
> 
> 时间：2012-06-21T10:55:45.307
> 
> 标签：visual-c++, mfc, visual-c++-2008

我在我的 MFC 应用程序中创建了一个对话框，如下所示：

> BackfaceControlPoints *controlpoints = new BackfaceControlPoints();
> 
> 控制点->创建（BackfaceControlPoints::IDD）；
> 
> 控制点->显示窗口（SW_SHOWNORMAL）；

我编译得很好，但是当我尝试运行应用程序时，我在尝试创建对话框时得到了一个调试断言。

下面是 dlgcore.cpp 中我获得调试断言的行。

> if (!_AfxCheckDialogTemplate(lpszTemplateName, FALSE))
> 
> {断言（错误）；// 无效的对话框模板名称

我为此项目使用了单独的 dll（从解决方案的主项目中加载它。）和“在静态库中使用 mfc”选项。请帮我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T17:44:35.377

通常，当 MFC 在资源中找不到您的对话框时会发生该错误。您的项目听起来有点奇怪，因为听起来好像您正在创建 MFC 库并将它们与应用程序静态链接？

在调用 controlpoints->Create() 之前，使用包含对话框资源的 DLL 的 HINSTANCE 调用 AfxSetResourceHandle()。如果您开始遇到与资源相关的奇怪失败，您可能希望在调用后将其重置回原始状态。

# php - 在 PHP 中将两个查询合并为一个

> ID：11136649
> 
> 赞同：1
> 
> 时间：2012-06-21T10:56:01.733
> 
> 标签：php, mysql, html

我需要将以下两个查询合二为一，但不能，当我尝试对其进行测试时，它根本没有运行，我不知道为什么。如果有人可以提供帮助，我将不胜感激。这是我的第一个查询 -

```
$exportArray[] = $row['reviewId'];
$row_num++;

$sql = <<<SQL
SELECT * FROM review WHERE (reviewForum = "$reviewForum") 
```

这是我的第二个-

```
$sql = "SELECT * FROM mom WHERE ( reviewId = " . $row['reviewId'] . " )"; 
```

我尝试了 UNION 但也不起作用。两个表之间的公共字段是 reviewId。我正在查询两个表，上面的第一个查询有效，但是当我尝试包含第二个时，我无法让它工作。谢谢，如果有人可以帮助我，它可能很小，但我已经看了一段时间了，在这个阶段它很烦人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:10:25.260

你可以试试这个：

```
SELECT a.*, b.*
FROM review a
JOIN mom b 
ON a.reviewId=b.reviewId
WHERE a.reviewForum ='$reviewForum' 
```

我假设，reviewId 在两个表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:13:52.163

```
SELECT m.*,r.* 
FROM review r
  LEFT JOIN mom m 
    ON r.reviewId = m.reviewId
WHERE r.reviewForum = "$reviewForum" 
```

# delphi - 在 Delphi 中编辑文本文件

> ID：11136650
> 
> 赞同：1
> 
> 时间：2012-06-21T10:56:13.857
> 
> 标签：delphi, text

我的画布上有一个编辑和一个列表框，列表框内容加载了一个 txt 文件的内容，为了做到这一点，我使用了代码：

```
 listbox1.Items.LoadFromFile('data\data.dat'); 
```

在编辑时输入名称时，我想在列表框中突出显示它，所以我使用了代码：

```
procedure TformMain.Edit1Change(Sender: TObject);
const
   indexStart = -1;
 var
   search : array[0..128] of Char;
begin
   StrPCopy(search, Edit1.Text) ;
   ListBox1.ItemIndex := ListBox1.Perform(LB_SELECTSTRING, indexStart, LongInt(@search));
end; 
```

现在我的画布上有一个按钮，我想从 txt 中删除选定的名称。

我怎样才能做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:06:40.513

如果您只想删除与编辑控件匹配的文本：

```
var
  newS : string;
...
newS := ListBox1.Items[ListBox1.ItemIndex];
Delete(newS,Pos(Edit1.Text,newS),Length(Edit1.Text));
ListBox1.Items[ListBox1.ItemIndex] := newS; 
```

如果要删除整行：

```
ListBox1.Items.Delete(ListBox1.ItemIndex); 
```

# php - 将变量从 php while 循环传递给 javascript 函数

> ID：11136657
> 
> 赞同：1
> 
> 时间：2012-06-21T10:56:49.033
> 
> 标签：php, javascript

我有一些图像，我想做的是将鼠标悬停在每张图片上以更改 div 内的文本，即图像标题。

所以这是我的代码：

```
<?php
...

$i=0;
while($i<$imageno)
{

echo'
<script type="text/javascript">
function changeText() {document.getElementById("title").innerHTML = "'.$title[$i].'";}
</script>';

if ($imagine[$i]){
echo '<div onmouseover="changeText()"><img src="'.$imagine[$i].'"></div>';
};
$i++;
}

...
?> 
```

但是我的脚本只显示了我最后一张照片的文字......

请帮忙！...没有阿贾克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:00:17.380

您需要将变量传递给`changeText`函数：

```
echo '<div onmouseover="changeText('".$title[$i]."')"><img src="'.$imagine[$i].'"></div>'; 
```

并改变`changeText`这样的功能：

```
function changeText( myText ) {document.getElementById("title").innerHTML = myText;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:04:40.340

您不需要将函数定义放在循环中，您需要使用参数。

```
<script type="text/javascript">
function changeText(title) {document.getElementById("title").innerHTML = title;}
</script>

<?php
//... 
$i=0;
while($i<$imageno) {
  if ($imagine[$i]){
    $title = json_encode(htmlspecialchars($title[$i]));
    echo '<div onmouseover="changeText('.$title.')"><img src="'.$imagine[$i].'"></div>';
  };
  $i++;
}
//...
?> 
```

# jquery - 图像替换输入元素

> ID：11136677
> 
> 赞同：0
> 
> 时间：2012-06-21T10:57:59.433
> 
> 标签：jquery, triggers, image-upload

我想做“图片上传脚本”。我不想使用输入元素。单击红色图像时，将出现系统窗口，您可以选择图像文件。但它在 IE 9 中不起作用。

jQuery代码：

```
// this part of code does not work in IE9
$('img').click(
    function(){
      $('#photoimg').trigger('click');
});

// this works fine
$('#photoimg').live('change', function(){
    $("#preview").html('');
    $("#preview").html('<img src="loader.gif" alt="Uploading...."/>');
    $("#imageform").ajaxForm({
      target: '#preview',
      success: function() {
          alert('IMG was loaded.');
      } 
    }).submit();
}); 
```

HTML 代码：

```
<img id="icon" src="http://ynternet.sk/test2/close_1.jpg">

<form id="imageform" method="post" action='upload_file.php'>
    <input type="file" name="photoimg" id="photoimg" />
</form>
<div id='preview'> </div> 
```

例子 ：

```
 http://ynternet.sk/test_4/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:05:16.383

问题是您的代码正在尝试访问 id 为“myfile”的元素，但您的标记没有这样的元素。

当我更改文件输入的 id 以匹配代码中的内容时，它在 IE9 和 Chrome 中都对我有用（尽管显然您可以更改 JS 以匹配 html）：

```
<input type="file" name="photoimg" id="myfile" /> 
```

演示：http: [//jsfiddle.net/ytcXF/](http://jsfiddle.net/ytcXF/)

# php - 社交网站，可以进行调查/测验 - elgg 或其他（开源）软件？还是 LimeSurvey 的整合？

> ID：11136678
> 
> 赞同：0
> 
> 时间：2012-06-21T10:58:00.517
> 
> 标签：php, networking, social, survey

我已经搜索过这个主题，但我找不到令人满意的答案。我只需要开源软件，并且更喜欢 php/mysql，因为它很快。

我想建立一个社交网络，
a/每个主题都应该有一个调查/测验，就像一个页面：
aa/topic
ab/text text text
ac/survey/quiz。
广告/调查结果图表
ae/谈话（帖子/点赞）
b/ 即：必须提供整合调查/测验的可能性。我已经尝试过 elgg 1.8（易于安装和使用）和 simple_survey 1.7，它工作正常，但它是：简单。说，我想另外还有 cvs export .. 但我可能认为我可以弄清楚如何获取数据。

问题：
1/ 不确定 elgg/simple_survey 解决方案是否是最好的。Limesurvey 非常好，但后来我不得不添加社交网络。您能否分享您的经验，哪种解决方案可能最适合我的问题？（给定 php/mysql 和操作系统）
- 去另一个 soc.net 可能会更好。或者有 Limesurvey/soc.net。额外的？

2/ 如果我选择 elgg，我想要：
- 管理员设置主题，并且对于我拥有的每个主题：调查/测验和帖子列表。
- 每个人都可以添加（无需登录）到博客。
- 要进行调查，用户必须登录。
- 如果可能，每个主题的调查结果的小图表或漂亮图表。但似乎大多数调查都有。

非常感谢您的帮助。链接参考也受到高度赞赏。请告诉我什么最适合我的目的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:29:31.470

所有这些都可以在 Elgg 中实现。但这需要大量的编码时间。如果您准备花一些时间在编码上并学习 ElggAPI，那么它是您最好的解决方案。如果您正在 Elgg 中为此寻找现成的解决方案，不幸的是，不存在满足该需求的插件。最好在 Elgg 社区论坛本身提出这些类型的问题。

# unix - 将 jpg 帧组合成高质量的 gif

> ID：11136681
> 
> 赞同：1
> 
> 时间：2012-06-21T10:58:07.460
> 
> 标签：unix, gif, jpeg, imagick

我需要将一些 jpg 帧转换为高质量的 gif。我知道imagick，但它占用了很多资源并使用了很多资源。一个快速的方式它的 gifsicle 但它只支持 256 色。

我知道 gif 支持 265 种颜色，但 imagick 使用颜色图（我认为）并提供比 gifscile 更高的质量。

顺便说一句，它还需要支持自定义帧动画延迟。

对于 imagick 我正在使用：

```
convert -loop 0 -resize 400x337 -quality 100% *.jpg result.gif 
```

大约有24帧，每帧大约700Kb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-20T18:43:19.447

对于真正的高质量有[gifski 编码器](https://gif.ski/)，它结合帧来实现每帧超过 256 种颜色。但是，它不如 gifsicle 快，而且它只支持 PNG 帧，不支持 JPEG（JPEG 对于 GIF 输入来说是一个非常糟糕的主意，因为压缩伪影会给图像添加大量浪费的颜色）。

# android - 如何在android中的onclick函数中获取字符串值？

> ID：11136684
> 
> 赞同：-2
> 
> 时间：2012-06-21T10:58:28.147
> 
> 标签：android, string, onclick

```
 final RadioGroup radioGroup1 = (RadioGroup) findViewById(R.id.radiogroup);
              final TextView tv=(TextView) findViewById(R.id.textView1);   
        Button  mSubmitButton = (Button) findViewById(R.id.btnSubmit);
        relation.setOnItemSelectedListener(new CustomOnItemSelectedListener());
        radioGroup1.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
        String text1;
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) 
            {
                RadioButton checkedRadioButton = (RadioButton) findViewById(checkedId);
               text1 = checkedRadioButton.getText().toString();

                Toast.makeText(getApplicationContext(), text1, Toast.LENGTH_SHORT).show();

            }
        });

        mSubmitButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                 String fName = first_name.getText().toString();
                 String re_lation = (String) relation.getSelectedItem(); 
                 String add_ress = address.getText().toString();
                  } 
```

在我的 Onclick 函数中，我想从 onCheckedChanged 获取 text1 值。如何在我的 onclick 函数中获取 text1 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:01:25.110

将字符串 text1 声明为全局变量，例如，`onCreate()`活动的之前方法

```
String text1;

    @Override
    public void onCreate()
    {

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:59:59.703

`String text1;`作为一个全局变量：

```
public class YourActvity extends Actvity {

   String text1;

   public onCreate( //...   

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:03:58.440

我认为您需要在类初始化下面初始化 text1 以便任何方法都可以使用此 text1 然后在一个方法中设置值并将值放入另一个方法中

```
public YourActvity extends Actvity {
String text1;
public method1(
set the value
}

public method1(
get the value
} 
```

# c++ - 阻止连接到插槽（“真正的”私有插槽）

> ID：11136689
> 
> 赞同：0
> 
> 时间：2012-06-21T10:58:39.957
> 
> 标签：c++, qt

使用 Qt 我知道这`private slots`意味着当直接调用时插槽是私有的，但`connect()`仍然可以允许信号连接到插槽，无论是私有的、公共的还是我猜是受保护的。

那么，有没有办法让一个插槽真正私有化，这样只能在一个类中进行连接？我在这里想的是因为`QTimer::singleShot`它调用了一个插槽，但我想调用的函数我不想在课堂之外访问。我确信还有其他原因，但这是我目前发现的主要原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:07:33.227

只需使用[timerEvent](http://qt-project.org/doc/qt-4.8/qobject.html#timerEvent)和[startTimer](http://qt-project.org/doc/qt-4.8/qobject.html#startTimer)而不是 slot 和 QTimer::singleShot。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:09:17.047

如果您真的想强制执行此操作，并且您认为适当的文档无法解决此问题，请将插槽添加到一个额外的类中，该类具有私有构造函数并将调用中继到您的真实类。

```
class PrivateSlotClass : public QObject
{
Q_OBJECT
friend class YourRealClass;
PrivateSlotClass( YourRealClass ) : QObject( YourRealClass ){}
private slots:
  void theSlot(){ static_cast<YourRealClass*>(parent())->theFunction();
};

class YourRealClass : public QObject
{
public:
   YourRealClass();
friend class PrivateSlotClass;
private:
 void theFunction();
};

YourRealClass::YourRealClass(){ 
    PrivateSlotClass* myPrivateSlot = new PrivateSlotClass(this);
    QTimer::singleShot( 50, myPrivateSlot, SLOT(theSlot()) );
}
void YourRealClass::theFunction()
{
/* your slot code here */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:41:22.080

我认为可以向您的插槽和相应的信号添加一个参数，如下所示：

```
...
private slots:
    void slot(..., QObject* sender = 0);
...

void YourClass::slot(..., QObject* sender)
{
    if (sender != (QObject*)this)
    {
        /* do nothing or raise an exception or do whatever you want */
    }
    ...
} 
```

当然，它不会使您的插槽“完全”私有，但它不会让您的代码在收到来自对象外部的信号后执行。

# iphone - 如何让导航栏后退按钮返回到另一个视图控制器

> ID：11136690
> 
> 赞同：1
> 
> 时间：2012-06-21T10:58:40.630
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller

我将如何让 UINavigation 控制器导航到之前的视图而不是之前的视图。基本上我希望它跳回 2 个位置而不是默认位置。

我敢肯定，这是非常规的，但我现在只需要这样做。

```
 self.navigationItem.backBarButtonItem =
    [[[UIBarButtonItem alloc] initWithTitle:@"Back"
                                      style:UIBarButtonItemStyleBordered
                                     target:nil
                                     action:nil] autorelease]; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:04:51.453

放：

```
self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(goBack)] autorelease]; 
```

然后创建一个方法`-goBack`

```
-(void)goBack
{
   UIViewController *ctrl = [self.navigationController.viewControllers objectAtIndex:self.navigationController.viewControllers.count - 2];
   [self.navigationController popToViewController:ctrl animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:06:30.917

如果您不想依赖数组的索引，那么您可以执行以下操作：

```
MyController * aMyController = nil ;
for (int i=0; i<[[self.navigationController viewControllers] count]; i++) 
{
    NSLog(@"%@",[[self.navigationController viewControllers] objectAtIndex:i]);
    if ([[[self.navigationController viewControllers] objectAtIndex:i] isKindOfClass:[MyController class]]) 
    {
        aMyController = [[self.navigationController viewControllers] objectAtIndex:i];      
    }
}           
[self.navigationController popToViewController:aMyController animated:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:08:45.913

如果您在 NavigationController 中有三个视图控制器，并且当前您正在查看第三个视图控制器并且您想跳转到第一个视图控制器。

尝试这个。这会将您导航两次。

```
[self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:0] animated:YES]; 
```

在您的情况下设置适当的值而不是 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T11:02:00.673

将目标添加到您添加的按钮

然后使用以下代码返回超过1个viewController

```
//Get the view controller that is 2 step behind
UIViewController *controller = [nav.viewControllers objectAtIndex:nav.viewControllers.count - 2];

//Go to that controller
[nav popToViewController:controller animated:YES]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T11:02:19.363

```
self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(youractonEvent:] autorelease]; 
```

# android - 应用程序崩溃时，应用程序范围内的静态变量为空

> ID：11136693
> 
> 赞同：1
> 
> 时间：2012-06-21T10:58:48.823
> 
> 标签：android, static-variables

我在扩展应用程序类的类中有一些静态变量。现在，在应用程序的某个地方，如果发生崩溃，那么这些变量将变为空，为什么会这样。

我可以说清楚吗，我在 Application 子类中声明这两个变量，并在发生崩溃时在其他 java 类中初始化这些变量为 null。我的应用程序要求在登录后只有这两个变量应该被初始化。

对于任何答案/建议在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:04:01.333

这种行为是正常的。在您的应用程序崩溃后，一切都被“重新初始化”并且您的`static`变量达到了它们的初始值，我想是`null`.

如果您想在应用程序停止/重新启动时保留变量（当 Android 决定停止您的应用程序时也会发生这种情况），您应该使用不同的存储，我建议您查看[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:05:59.457

静态变量与一个类相关联，只要该类在内存中，它们就会一直存在（一旦您的应用程序终止或一旦该类被卸载，它就不再存在，请阅读[此](https://stackoverflow.com/questions/148681/unloading-classes-in-java)内容以获取更多信息）。因此，当您的应用程序崩溃时，您的静态变量将不复存在，并再次将它们的值作为`null`.

对于这些变量的持久值存储，请选择`SharedPreferences`.

[在此处](http://developer.android.com/reference/android/content/SharedPreferences.html)阅读有关 SharedPreferences的更多信息。和一个可以使用的[例子](http://alchemiaandroid.altervista.org/sharedPreferencesTutorial.html)。

# html - 在 Firefox 中显示正常的页面在 IE8 上被裁剪

> ID：11136694
> 
> 赞同：-3
> 
> 时间：2012-06-21T10:58:49.513
> 
> 标签：html, css, internet-explorer, xhtml

由于某种原因，我的网站在 IE8 上被切断：http: [//testowa.portalo.pl/wiadomosci.php](http://testowa.portalo.pl/wiadomosci.php) - 我真的找不到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:13:15.877

`#Document`将 css 属性`overflow`设置为`hidden`.

如果您在第 14 行中指定了`overflow: visible;`for ，问题就会出现。`#Document``stylesheet.css`

```
#Document {
    Z-INDEX: 2; POSITION: relative; TEXT-ALIGN: left; WIDTH: 1003px; BACKGROUND: white; MARGIN-LEFT: auto; OVERFLOW: visible; MARGIN-RIGHT: auto; TOP: 0px; LEFT: -10px
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:09:07.610

在你的CSS中删除`overflow:hidden`你的`#Document`元素。

# perl - Perl 的 rand() 函数，以本地时间为种子

> ID：11136695
> 
> 赞同：0
> 
> 时间：2012-06-21T10:58:56.090
> 
> 标签：perl, random, random-seed

请看下面这段代码：

```
srand(localtime);

for (my $ik = 0; $ik < 3; $ik += 1)
{
    print int(rand(10)),"\n";
    sleep(1);
} 
```

我多次调用上面的代码，中间有足够的时间（5-10秒），但输出序列仍然相同。

由于我已经为`localtime`每次调用设置了种子，因此必须使用不同的种子，并且可能会生成不同的三个数字序列，因为时间间隔。为什么我一次又一次得到相同的序列。

注意：代码不在循环中，它在一个被多次执行的 Perl 文件中。

文档说，如果多个实例在相同的“秒”中运行导致相同的种子，则该种子会失败 - 但情况并非如此。

编辑:: @simbabque 的解决方案确实有帮助，但没有获得预期的随机性。看看我对下面上述解决方案的评论。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T11:05:35.700

尝试使用[`use strict`](http://perldoc.perl.org/strict.html)and运行它[`use warnings`](http://perldoc.perl.org/warnings.html)。它会给你：

`Argument "Thu Jun 21 13:04:41 2012" isn't numeric in srand at ...`

这就是你的问题。[`localtime`](http://perldoc.perl.org/functions/localtime.html)在标量上下文中返回一个字符串。尝试[`time`](http://perldoc.perl.org/functions/time.html)改用，它将 unix 时间戳作为整数返回。[`srand`](http://perldoc.perl.org/functions/srand.html)需要一个数值才能工作。

如果您向其中添加[Data::Dumper](http://search.cpan.org/~smueller/Data-Dumper-2.131/Dumper.pm)，您将看到代码的种子始终为`1`.

```
no strict; no warnings;
use Data::Dumper;
print Dumper srand(localtime);

for (my $ik = 0; $ik < 3; $ik += 1)
{
    print int(rand(10)),"\n";
    sleep(1);
} 
```

说：

```
$VAR1 = 1;
0
2
6 
```

你需要的是：

```
use strict; use warnings;
srand(time);
for (my $ik = 0; $ik < 3; $ik += 1)
{
    print int(rand(10)),"\n";
    sleep(1);
} 
```

* * *

**编辑：**

如果您想要良好的随机性，这仍然不是一个好主意。医生说：

> 在 5.004 之前的 Perl 版本中，默认种子就是当前时间。这不是一个特别好的种子，所以许多旧程序提供自己的种子值（通常是`time ^ $$`or `time ^ ($$ + ($$ << 15))`），但这不再是必需的了。

我建议您完全忽略对的调用，`srand`除非您确实想要可重现的结果（即用于测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:39:58.020

一般来说，没有理由通过重复播种[PRNG](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)来期望更好的随机性。

您可以使用以下脚本检查原始问题的情况：

```
#!/usr/bin/env perl

use strict; use warnings;
use 5.014;

for (1 .. 3) {
    my $seq = newseq(3, 5);
    printf "Seed = %s\n", $seq->{seed};
    my $it = $seq->{generator};
    while (defined(my $r = $it->())) {
        print "$r\n";
    }
    sleep 5;
}

sub newseq {
    my ($length, $limit) = @_;
    $length //= 10;
    $limit  //= 10;

    my $seed = srand(time);
    return {
        seed => $seed,
        generator => sub {
            return unless $length-- > 0;
            return rand($limit);
        },
    };
} 
```

但是，如果您确实需要统计独立的生成器，则可以使用[Math::Random::MT::Auto](http://search.cpan.org/perldoc/Math%3a%3aRandom%3a%3aMT%3a%3aAuto)并创建单独的 PRNG 对象：

```
#!/usr/bin/env perl

use strict; use warnings;
use 5.014;

use strict;
use warnings;
use Math::Random::MT::Auto qw(:!auto);

my $prng1 = Math::Random::MT::Auto->new(SOURCE => '/dev/random');
my $prng2 = Math::Random::MT::Auto->new(SOURCE => 'random_org');

say $prng1->rand();
say $prng2->irand(); 
```

# postgresql - 拒绝数据库连接导致编码错误

> ID：11136696
> 
> 赞同：0
> 
> 时间：2012-06-21T10:58:58.210
> 
> 标签：postgresql

我有一个带有一些数据库的 postgreSQL 服务器。每个用户只能连接到某些数据库。到现在为止还挺好。我想测试是否一切正常，所以我使用 pgAdmin III 以受限用户身份登录。当我尝试连接到用户没有连接权限的数据库时，日志文件似乎发生了一些事情！服务器状态窗口不再可以读取它。我得到的只是很多关于编码 utf8 的无效字节序列的消息。停止这些消息窗口的唯一方法是终止程序并强制 postgre 创建一个新的日志文件。

谁能向我解释为什么会发生这种情况以及我该如何阻止它？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:25:27.373

好的，我认为问题是“für”中的“ü”。错误消息似乎在抱怨字符代码 0xfc，它在[latin1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)（和类似的）中是带有变音符号的小写 u。

通过数据库连接发回的消息应转换为客户端编码。但是，日志文件包含来自各种来源的输出，[据此](http://postgresql.1045698.n5.nabble.com/main-log-encoding-problem-td5709590.html)最近（2012 年）存在问题：

> 恐怕这是一个已知问题。PostgreSQL postmaster 在系统语言环境中记录，而 PostgreSQL 后端则以任何编码记录他们的数据库。它们都写入同一个日志文件，产生一个充满混合编码数据的日志文件，这会让许多文本编辑器窒息。

所以 - 我猜你的系统语言环境是 8859-1（或者可能是 -15），而 pg-admin 期待 UTF-8。短期而言，您可以将系统编码设置为 UTF-8，长期将错误报告提交给 pgadmin 团队 - 一条错误消息很有帮助，之后它可能应该只是将十六进制代码放在文本中或类似的地方。

# javascript - 使用 Marionette.CompositeView 的模块的单元测试

> ID：11136697
> 
> 赞同：4
> 
> 时间：2012-06-21T10:59:02.160
> 
> 标签：javascript, backbone.js, jasmine, marionette

我想测试一个有效的模块（使用[Marionette](https://github.com/derickbailey/backbone.marionette)）的行为（1）。

奇怪的是，js-module (1) 有效，但使用[Jasmine](http://pivotal.github.com/jasmine/)的单元测试 (2)失败。

有任何想法吗？

* * *

(1)

```
/*global define*/
define([
    'marionette',
    'tasks/views/item',
    'text!tasks/templates/list.html',
    'collections/tasks'
], function (Marionette, itemView, listTemplate, TaskCollection) {
    "use strict";

    var ListView = Marionette.CompositeView.extend({

        initialize: function () {
            this.collection = new TaskCollection();
            this.collection.fetch();
        },

        template: listTemplate,

        itemView: itemView,

        appendHtml: function (collectionView, itemView) {
            collectionView.$el.find('ul.tasks').append(itemView.el);
        }

    });

    return ListView;
}); 
```

* * *

(2)

```
 // spec file
        it("should add a new element", function () {
            // TODO
            var itemView = new Backbone.View(),
                collectionView = new Backbone.View();
            this.view.appendHtml(collectionView, itemView);
            expect(this.view.$el.find('ul.tasks').length).toEqual(1); 
            // Expected 0 to equal 1.
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T15:46:03.017

```
var itemView = new Backbone.View(),
    collectionView = new Backbone.View();
    this.view.appendHtml(collectionView, itemView); 
```

抱歉，您想在这里完成什么？在我看来，你现在附加了一些东西`collectionView.$el.find('ul.tasks')`，什么时候`collectionView.$el`只是空的。所以`collectionView.$el.find('ul.tasks')`什么都不返回等等。

添加`console.log()`以检查：

```
appendHtml: function (collectionView, itemView) {
     console.log(collectionView.$el.html());
     collectionView.$el.find('ul.tasks').append(itemView.el);
} 
```

# javascript - 使用 Javascript 检测 404 图像

> ID：11136699
> 
> 赞同：5
> 
> 时间：2012-06-21T10:59:11.967
> 
> 标签：javascript, image

我的应用程序中有一些对 Twitter 照片的引用。

当 Twitter 端不再提供该照片时（请参阅此示例： http: [//p.twimg.com/AmL3hpaCEAd2wtN.jpg](http://p.twimg.com/AmL3hpaCEAd2wtN.jpg)），我收到一个 404 响应代码，其中包含一个图像作为主体（灰色 404 图像）

我在 Img 上使用`onload`和`onerror`javascript 方法，但由于 p.twimg.com 正在返回正文，因此`onload`触发了该方法。我发现无法区分 404 响应和 200 响应。

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:01:06.053

检查图像大小是否为 6.232 字节（Twitter 未找到图像大小）。

[查找图像文件大小](https://stackoverflow.com/questions/1310378/determining-image-file-size-dimensions-via-javascript)

# python - C字符串中的十六进制小数

> ID：11136702
> 
> 赞同：0
> 
> 时间：2012-06-21T10:59:31.437
> 
> 标签：python, c

我可以像这样在 Python-Strings 中嵌入十六进制值：`\xe5abcdefghijklmnoqrstuvqxy\xfdz!\x18\xfejk`

这可以用C吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:01:24.433

是的，使用相同的符号。

```
printf("\x41\x42\x43\n"); 
```

# magento - 由于权限无法安装 Magento，我做错了什么？

> ID：11136703
> 
> 赞同：0
> 
> 时间：2012-06-21T10:59:38.167
> 
> 标签：magento, permissions, installation, chmod

我在 Ubuntu Server 上的 Magento 目录上运行了以下命令。

```
chmod 0777 var/.htaccess
chmod 0777 var
chmod 0777 app/etc
chmod -R 0777 media 
```

但是，现在 Magento 安装程序仍在抱怨：

```
Path "/var/www/store/var/package" must be writable. 
```

我试过了：

```
chmod 0777 var/package 
```

没有运气。

我也尝试过[本指南来重置权限](http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions)，但仍然没有任何运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:13:18.067

您应该递归设置权限：

`chmod -R 0777 var`

# ruby-on-rails - 使用 Hadoop 的 Rails

> ID：11136705
> 
> 赞同：6
> 
> 时间：2012-06-21T10:59:46.553
> 
> 标签：ruby-on-rails, hadoop

我将拥有大量数据来存储简历的核心，并希望将 hadoop 视为后端。这是否可以将它与 ruby​​ on rails 一起使用，或者只需要考虑 redis 或 mongodb。

任何将 rails 与 hadoop 一起使用的指针都会很有用。或者让生活变得轻松的宝石。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-04T16:04:46.157

Phil Whelan 有一篇很棒的文章，介绍了使用 hadoop 使用 ruby​​ 的 map reduce：http: [//www.bigfastblog.com/map-reduce-with-ruby-using-hadoop](http://www.bigfastblog.com/map-reduce-with-ruby-using-hadoop)

那里有一个不错的小宝石（Rubydoop），它使在 ruby​​ 中编写 hadoop 作业变得又好又容易（使用 jRuby）： [https ://github.com/iconara/rubydoop](https://github.com/iconara/rubydoop)

如果您需要更多技术知识并进入实时流，我已经看到很多使用 Casandra + Hadoop + Storm： [http ://www.slideshare.net/boneill42/ruby-on-big-达格](http://www.slideshare.net/boneill42/ruby-on-big-dag)

# c# - 根据选择的配置更改代码行

> ID：11136708
> 
> 赞同：0
> 
> 时间：2012-06-21T10:59:50.670
> 
> 标签：c#, asp.net-mvc-3, web-config

在我的 ASP.NET MVC 3 应用程序中，我有 2 个配置设置；玩和生活。

现在，我必须在根据我当前选择的配置加载我的应用程序之前更改以下代码：

```
Mailer.SendMessageTo("playEmailAddress", "MailBody");
// Mailer.SendMessageTo("liveEmailAddress", "MailBody"); 
```

因此，如果我`Play`选择了配置，我将注释掉该`liveEmailAddress`行，反之亦然

我想做的也许是利用该`web.config`文件为我更改此代码，而无需每次通过将代码行放入配置文件中然后读取它来使用不同的配置加载我的应用程序时手动进行我班级中的配置文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:11:38.060

您应该在 Web 配置文件中添加“应用程序密钥”。给它任何名称，如“OptionalEmail”，并相应地设置值。

当您发送电子邮件时，请检查配置文件中的值，例如

> If(ConfigurationManager.AppSettings["OptionalEmail"]=="PlayEmail") 使用 PlayEmail 地址发送电子邮件，否则使用工作电子邮件地址发送电子邮件。

希望这有帮助。"ConfigurationManager.AppSettings[使用键或索引]

请记住，配置转换“xdt”**仅在您部署 Web 应用程序时有效**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:15:45.053

拥有一个名为“环境”（或类似名称）的配置参数通常是个好主意。此链接说明了如何从 web.config 中读取：http: [//msdn.microsoft.com/en-us/library/610xe886.aspx](http://msdn.microsoft.com/en-us/library/610xe886.aspx)。

实现这一点的一种方法是：

```
var env = "play";
if( ConfigurationManager.AppSettings["environment"]=="live" ) env="live";
var email = env + "EmailAddress";
Mailer.SendMessageTo(email, "MailBody"); 
```

作为附加说明，如果您有多个开发人员，每个人都想要自己的“播放”地址，那么您可以扩展设置以包含开发人员的机器名称：

```
<appSettings>
      <add key="environment" value="play"/>
      <add key="liveEmailAddress" value="a@b.com"/>
      <add key="myCoolPC-playEmailAddress" value="c@d.com"/>
      <add key="otherDevPC-playEmailAddress" value="bubba@test.com"/>
</appSettings> 
```

但是您必须在获取设置之前更改上面的实现以添加主机名前缀，但前提是当前处于播放模式。

# ruby-on-rails - Rails 中的动态表单验证

> ID：11136716
> 
> 赞同：1
> 
> 时间：2012-06-21T11:00:14.290
> 
> 标签：ruby-on-rails, validation, activerecord, activemodel

我有一个要验证的表格。验证基于几个其他模型对象的属性，但表单本身并不对应于 ActiveRecord 模型。

是否可以使用 ActiveModel 来实现这一点？

```
class Person < ActiveModel
  has_one :shoe
  validates :name, :length => { :maximum => self.shoe.size }
end 
```

我基本上想根据另一个模型对象的属性来验证表单。这有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:25:59.150

```
class Person 
  include ActiveModel::Validations

  # has_one :shoe # This won't work

  validates :validates_name_length

  private
  def validates_name_length
    errors.add :name, 'too long' if name && name.length > shoe.size 
  end
end 
```

# jquery - 抓取一个 div 的内容并插入另一个

> ID：11136720
> 
> 赞同：0
> 
> 时间：2012-06-21T11:00:25.200
> 
> 标签：jquery

大家好，我正在尝试为我的博客文章创建一个“zen view”模式，所以我只想获取#single div 的内容（只有文章内容，没有标题或侧边栏等......）并将其放入另一个名为 #zen-view 的 div，请注意我使用的是**WordPress。**

所以我现在尝试制作这段代码：

```
<button class="zen">Read in Zen mode</button>   // when clicked display #zen-view div
<div id="zen-view">  // initialy the css of that div is set to display:none
<p id="zen-content"></p>   // the tag where the contet of the #single div will be load
<button class="close" href="#">Close Zen mode</button>   // when clicked close zen-view div
</div> 
```

这是jquery

```
$(function() {

     $('.zen').click( function() {
            $('#zen-view').show();
            ... how can i grab the content of #single div and put into #zen-content div? ...
        });
     $('.close').click( function() {
            $('#zen-view').hide();

        });
    }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:04:34.703

**演示** [http://jsfiddle.net/QRv6d/11/](http://jsfiddle.net/QRv6d/11/)

好读：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

**代码**

```
$(function() {

     $('.zen').click( function() {
            $('#zen-view').show();
             $('#zen-content').html($('#single').html());
            //... how can i grab the content of #single div and put into #zen-content div? ...
        });
     $('.close').click( function() {
            $('#zen-view').hide();

        });
    });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:03:06.913

> 如何获取#single div 的内容并放入#zen-content div？

```
$('#zen-content').html($('#zen-content').html()); 
```

如果您不想覆盖`#zen-content`内容：

```
$('#zen-content').append($('#single').html()); 
```

或者使用普通的js：

```
document.getElementById('zen-content').innerHTML += $('#single').html(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:03:43.853

```
$('#zen-content').html($('#single').html()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T06:42:16.750

除了按照前面的答案将 HTML 代码作为字符串复制到另一个元素中之外，您还可以克隆实际的 DOM 树，例如：

```
$('#zen').append($('#single').children().clone()); 
```

针对以下 HTML：

```
<div id="single">
    <div class="innerContent">Some content over here <i>with markup</i></div>    
</div>
<div id="zen" /> 
```

但是，这将要求您将博客文章的内容包含在另一个 div 中，因为如果不调用`children()`您将克隆原始博客文章的 div 而不仅仅是内容。

另请参阅此处的运行示例：http: [//jsfiddle.net/N3wFH/](http://jsfiddle.net/N3wFH/)。

# nservicebus - 如何完全禁用 NServiceBus 重试

> ID：11136726
> 
> 赞同：5
> 
> 时间：2012-06-21T11:01:04.087
> 
> 标签：nservicebus

是否可以在 NServiceBus 版本 3.2.2 中禁用重试？

使用以下配置，可以禁用重试：

```
 <MsmqTransportConfig NumberOfWorkerThreads="1"
                       MaxRetries="0" />

  <SecondLevelRetriesConfig Enabled="false"
                            TimeIncrease="00:00:10"
                            NumberOfRetries="0" /> 
```

但不是当线程数设置为 20 时。在这种情况下，消息会重试两次：

```
 <MsmqTransportConfig NumberOfWorkerThreads="20"
                       MaxRetries="0" />

  <SecondLevelRetriesConfig Enabled="false"
                            TimeIncrease="00:00:10"
                            NumberOfRetries="0" /> 
```

这看起来很像一个错误。重试行为不应取决于线程数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T09:58:04.177

MaxRetries 的语义是“至少 X 次”。这样做的原因是性能，因为在同步我们的线程时我们不能放松一点。您还可以使您的传输非事务性，这将有效地为您尝试每条消息，但您也会丢失错误队列，因此失败的消息将永远消失。

# c# - 在使用 try、catch 和 finally 时，并非所有代码路径都返回值

> ID：11136727
> 
> 赞同：0
> 
> 时间：2012-06-21T11:01:05.693
> 
> 标签：c#, .net

当我执行以下函数时，出现错误：

> “错误‘Excel1.WebServiceFunctions.CreateMyTask()’：并非所有代码路径都返回值

我的代码：

```
public int CreateMyTask()
{
    try
    {
        Console.WriteLine("Invoking CreateTask method");
        Console.WriteLine("-----------------------------------");
        m_taskID = taskClient.CreateTask(m_tInstance);
        Console.WriteLine("Task create successfully:ID=" + m_taskID.ToString());
        Console.WriteLine("-----------------------------------");
        return m_taskID;
    }
    catch (Exception ex)
    {
        MessageBox.Show("An exception has occured. Please check the Excel sheet for more info" + ex);
    }
    finally
    {
        GC.Collect();
    }
} 
```

关于我如何支持这个的任何想法？我做了一些谷歌搜索，但我无法准确归零

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:02:23.060

**原因**

考虑这种情况。

try 块中返回行之前的代码行中发生错误。然后它会进入 catch show messagebox 然后进入 finally 然后返回什么？？？？？？它必须返回一些东西，因为方法返回类型是 int。

**解决方案**

做这个

```
 finally
    {
        GC.Collect();
    }
    return m_taskID;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T11:02:54.227

从 catch 块返回 0 或任何其他 int 值，它会解决这个问题。在您的调用方法中，您必须将该 int 值理解为异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:04:46.153

如果您的代码中有错误，它将跳转到 catch 块并且永远不会返回。您需要将 return 放在 try catch 块之外。

```
public int CreateMyTask()
{
    int value = -1;

    try
    {
        Console.WriteLine("Invoking CreateTask method");
        Console.WriteLine("-----------------------------------");
        m_taskID = taskClient.CreateTask(m_tInstance);
        Console.WriteLine("Task create successfully:ID=" + m_taskID.ToString());
        Console.WriteLine("-----------------------------------");
        value = m_taskID;
    }
    catch (Exception ex)
    {
        MessageBox.Show("An exception has occured. Please check the Excel sheet for more info" + ex);
    }
    finally
    {
        GC.Collect();
    }

    return value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T11:04:15.873

`return -1`在你可以从调用方法中捕获的捕获部分中写一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T11:04:42.697

这很容易通过使用返回值来解决。

```
public int CreateMyTask()
{

    int returnValue = -1;       

    try
    {
        Console.WriteLine("Invoking CreateTask method");
        Console.WriteLine("-----------------------------------");
        m_taskID = taskClient.CreateTask(m_tInstance);
        Console.WriteLine("Task create successfully:ID=" + m_taskID.ToString());
        Console.WriteLine("-----------------------------------");
        returnValue = m_taskID;
    }
    catch (Exception ex)
    {
        MessageBox.Show("An exception has occured. Please check the Excel sheet for more info" + ex);
        returnValue = -1;  // Shouldn't be necessary but the compiler likes it
    }
    finally
    {
        GC.Collect();
    }

    return returnValue;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-21T11:05:35.810

当出现问题时，您需要返回一个`int`。

您当前的实现不会返回并且`int`抛出异常时。

```
catch (Exception ex)
            {
                MessageBox.Show("An exception has occured. Please check the Excel sheet for more info" + ex);
                return someDefautOrErrorValue; // <- add return statement here
            }
            finally
            {
                GC.Collect();   
            }
            return someDefautOrErrorValue; // <- or alternately here.
        } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-21T11:44:50.963

“并非所有代码路径都返回值”的消息非常清楚：您声明了返回某些内容的方法，因此通过代码的每条可能路径都应`return`以适当值的 a 结尾。有一个例外（双关语）：代码路径也可以以异常结束。

一条通过代码的路径是没有任何例外的路径。然后代码到达`try`块中的最后一条语句，这`return`很好。

现在如果发生异常怎么办？控制权传递给`catch`块并且没有返回任何东西！这就是编译器所抱怨的。所以要么抛出异常，要么返回“某物”。请注意，“某事”应该告诉此方法的调用者“出了问题”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-21T11:05:50.987

问题很简单——并非所有代码路径都会导致返回。例如，如果在 try 子句中的 Console.WriteLine 中出现错误，则不会返回任何内容，因为一旦发现错误，try 子句就会结束，并在 catch 处继续。

为了解决这个问题，您可以在 catch{} 子句中添加一个 return，这样如果出现错误就会发送一个 return：

```
catch (Exception ex)
{
    MessageBox.Show("An exception has occured. Please check the Excel sheet for more info" + ex);
    return -1;
} 
```

您真的可以使用任何返回错误。约定使用-1，因为您通常不会将其作为主子句的返回值。

或者，您可以在 finally / 整个子句之外添加两者的返回值，因为所有对代码的调用都将返回一个值。

希望有所帮助！

# c# - LINQ to Entities 中的多对多选择

> ID：11136733
> 
> 赞同：5
> 
> 时间：2012-06-21T11:01:28.723
> 
> 标签：c#, .net, entity-framework, linq-to-entities, many-to-many

我有两张桌子`Service`和`Provider`. 它们之间是一个连接表`ServiceProvider`，它只有 2 个字段 - 两个 PK 中的每一个字段。当添加到 edmx 时，连接多对多表被抽象出来并且无法看到（如预期的那样）。

这一切都很好，除非我想获得基于给定服务的提供者。从这个[问题](https://stackoverflow.com/questions/793645/entity-framework-linq-to-entities-many-to-many-query-problems)：

看起来答案很简单：

```
var query = from p in entities.Providers
            from s in entities.Services
            where s.Id == 15
            select p; 
```

但这会返回所有提供者。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:04:09.313

```
var query = entities.Providers.FirstOrDefault(p => p.Id == 15).Services.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:06:48.457

试试这个：

```
var res = from s in entities.Services
          where s.Id == 15
          select s.Provider; 
```

**编辑**

更正并测试了对真实模型和数据的查询。现在可以了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T11:09:22.867

是不是很简单

```
var matchingProviders = entities.Services.Single(s=>s.Id==15).Providers; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T11:05:35.197

您可以尝试使用`join`，如下所示：

```
entity.Providers.Join(entity.Services, c => c.ID, p => p.ID,(c, p) => new { Providers= c, Services= p }) 
```

# maven - Maven项目中的额外jar

> ID：11136734
> 
> 赞同：0
> 
> 时间：2012-06-21T11:01:30.710
> 
> 标签：maven, jar, pom.xml

我们开发的一个商业罐子出现在战争中。但我在 pom.xml 中看不到....当我搜索整个 Eclipse 时，我发现它位于同一项目的 Eclipse 的 .setting 文件夹（.settings/org.eclipse.wst.common.component）中。

这是条目

```
<dependent-module archiveName="BankAccount-3.0.39.jar" deploy-path="/WEB-INF/lib" 
   handle="module:/classpath/var/M2_REPO/com/BankAccount/3.0.39/BankAccount-3.0.39.jar">
      <dependency-type>uses</dependency-type>
</dependent-module> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:41:11.987

如果您确定项目不需要该 jar，则运行`mvn dependency:tree`并查找特定 jar 的来源。然后你可以通过使用排除 jar

```
<exclusions>
   <exclusion>
     <groupId>Group Id</groupId>
     <artifactId>jar which you want to exclude</artifactId>
   </exclusion>                     
</exclusions> 
```

在捆绑它的特定罐子下。

您还可以使用`<exclusion>`特定项目的 assembly.xml 中的标记来删除 jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:08:54.197

做`mvn dependency:tree`，看看它是如何工作的。

# objective-c - 从谷歌 API 解码路由

> ID：11136737
> 
> 赞同：1
> 
> 时间：2012-06-21T11:01:36.263
> 
> 标签：objective-c, routes, google-api, decode

我拼命想找到一种方法来从谷歌 API 获取所有坐标（或折线）的数组，以便我可以在 MKMapView 上绘制我的路线。（顺便说一句，我不想​​使用 RegexKitLite）

正如我在其他地方发现的那样，这应该是调用 API 的正确方法。

```
NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.google.com/maps?output=dragdir&saddr=%@&daddr=%@", saddr, daddr];
NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

 encodedString = ..... ????   // here i need some code before i can call the following Method

[self polylineWithEncodedString:encodedString]; 
```

这是我找到的一种方法，用于获取折线。

```
+ (MKPolyline *)polylineWithEncodedString:(NSString *)encodedString {
const char *bytes = [encodedString UTF8String];
NSUInteger length = [encodedString lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
NSUInteger idx = 0;

NSUInteger count = length / 4;
CLLocationCoordinate2D *coords = calloc(count, sizeof(CLLocationCoordinate2D));
NSUInteger coordIdx = 0;

float latitude = 0;
float longitude = 0;
while (idx < length) {
    char byte = 0;
    int res = 0;
    char shift = 0;

    do {
        byte = bytes[idx++] - 63;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLat = ((res & 1) ? ~(res >> 1) : (res >> 1));
    latitude += deltaLat;

    shift = 0;
    res = 0;

    do {
        byte = bytes[idx++] - 0x3F;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLon = ((res & 1) ? ~(res >> 1) : (res >> 1));
    longitude += deltaLon;

    float finalLat = latitude * 1E-5;
    float finalLon = longitude * 1E-5;

    CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(finalLat, finalLon);
    coords[coordIdx++] = coord;

    if (coordIdx == count) {
        NSUInteger newCount = count + 10;
        coords = realloc(coords, newCount * sizeof(CLLocationCoordinate2D));
        count = newCount;
    }
}

MKPolyline *polyline = [MKPolyline polylineWithCoordinates:coords count:coordIdx];
free(coords);

return polyline; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T12:37:59.497

这里的代码运行良好： [https ://gist.github.com/Muximize/3770235](https://gist.github.com/Muximize/3770235)

```
+ (MKPolyline *)polylineWithGMEncodedString:(NSString *)encodedString {

const char *bytes = [encodedString UTF8String];
NSUInteger length = [encodedString lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
NSUInteger idx = 0;

NSUInteger count = length / 4;
CLLocationCoordinate2D *coords = calloc(count, sizeof(CLLocationCoordinate2D));
NSUInteger coordIdx = 0;

float latitude = 0;
float longitude = 0;
while (idx < length) {
    char byte = 0;
    int res = 0;
    char shift = 0;

    do {
        byte = bytes[idx++] - 63;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLat = ((res & 1) ? ~(res >> 1) : (res >> 1));
    latitude += deltaLat;

    shift = 0;
    res = 0;

    do {
        byte = bytes[idx++] - 0x3F;
        res |= (byte & 0x1F) << shift;
        shift += 5;
    } while (byte >= 0x20);

    float deltaLon = ((res & 1) ? ~(res >> 1) : (res >> 1));
    longitude += deltaLon;

    float finalLat = latitude * 1E-5;
    float finalLon = longitude * 1E-5;

    CLLocationCoordinate2D coord = CLLocationCoordinate2DMake(finalLat, finalLon);
    coords[coordIdx++] = coord;

    if (coordIdx == count) {
        NSUInteger newCount = count + 10;
        coords = realloc(coords, newCount * sizeof(CLLocationCoordinate2D));
        count = newCount;
    }
}

MKPolyline *polyline = [MKPolyline polylineWithCoordinates:coords count:coordIdx];
free(coords);

return polyline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:45:11.460

打电话...

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/directions/json?origin=%@,%@&destination=%f,%f&mode=driving&sensor=false",smAppDelegate.currPosition.latitude, smAppDelegate.currPosition.longitude, ((LocationItem*)selectedAnno).coordinate.latitude, ((LocationItem*)selectedAnno).coordinate.longitude]]];

[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

回复...

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
[self.responseDirectionData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
[self.responseDirectionData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
[connection release];
self.responseDirectionData =nil;
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{
NSLog(@"connection established");
[connection release];
NSError *error = nil;
NSString *responseString=[[NSString alloc]initWithData:responseDirectionData encoding:NSUTF8StringEncoding];
SBJsonParser *jsonParser = [[SBJsonParser alloc] init];

NSDictionary *jsonObjects = [jsonParser objectWithString:responseString error:&error];
NSLog(@"responce = %@",jsonObjects);

NSMutableArray *ad = [jsonObjects objectForKey:@"routes"];
NSMutableArray *data2 = [[ad objectAtIndex:0] objectForKey:@"legs"];
NSMutableArray *data3 = [[data2 objectAtIndex:0] objectForKey:@"steps"];
NSLog(@"Data3 %@", data3);

NSMutableArray *polyLinesArray = [[NSMutableArray alloc] init];

for (int i = 0; i < [data3 count]; i++)
{
    NSString* encodedPoints = [[[data3 objectAtIndex:i] objectForKey:@"polyline"] valueForKey:@"points"];
    MKPolyline *route = [self polylineWithEncodedString:encodedPoints];
    [polyLinesArray addObject:route];
}

[self.mapView addOverlays:polyLinesArray];
[polyLinesArray release];

} 
```

# iphone - 当应用程序进入后台时，用于 iphone 的 Omniture 应用程序测量出现问题

> ID：11136739
> 
> 赞同：0
> 
> 时间：2012-06-21T11:01:40.490
> 
> 标签：iphone, background, adobe-analytics, isnullorempty

为了在 iPhone 应用程序中实现 Omniture 跟踪，我从 SiteCatalyst (AppMeasurement.h,libAppMeasurement.a,libAppMeasurementNoThumb.a) 下载了 AppMeasurement 软件。

我正在使用 Omniture 的应用程序测量 iphone 库，链接了发布库和开发库。我使用单例方法 (getInstance) 实例化它们。实现如下

```
#import "OmnitureTracking.h"
#import "AppMeasurement.h"

AppMeasurement *s = nil;

@implementation OmnitureTracking

+ (void)beginTracking {
s  = [[AppMeasurement getInstance] retain];
s.account = @"";
s.debugTracking = YES;
} 
```

在 AppDelegate 中调用此“beginTracking”来启动跟踪，对于 pagetracking 实现了另一种方法，如下所示：

```
+ (void)trackViewForPage:(NSString *)pageName {
NSLog(@"trackViewForPage::s instance::%@::",s);
if (s == nil)
return;

[s clearVars];
[s track:[NSDictionary dictionaryWithObjectsAndKeys:pageName, @"pageName", nil]];
} 
```

实施工作正常并低于日志：

```
2012-06-21 01:53:20.953 MyApp[857:607] App Measurement Library compile time = Aug  4 2011 16:29:52
2012-06-21 01:53:21.418 MyApp[857:607] trackViewForPage::s instance::<AppMeasurement: 0x28c4b0>::
2012-06-21 01:53:21.795 MyApp[857:607] 
Omniture App Measurement Debug: http://MyApp.net/b/ss/MyAppiosappdev/0/OIP-2.1.2/s2253418?AQB=1&ndh=1&t=21/5/2012%205%3A53%3A20%204%20240&vid=01398194867219045&ce=UTF-8&pageName=MyApp%201.2%20%281.2%29%20Launch&ts=2362139876678&events=event7%2Cevent5&c1=D%3Dv2&c2=D%3Dv6&c3=D%3Dv11&v2=MyApp%201.2%20%281.2%29&v4=0&v5=0&v6=20&v7=5&v8=Thursday&v9=4.3.3&v12=D%3Dv3&v13=D%3Dv3&s=320x480&c=24&AQE=1 
```

但是当应用程序进入后台并进入前台时，应用程序由于跟踪和获取日志而崩溃，如下所示：

```
Jun 21 03:07:41 unknown MyApp[467] <Warning>: trackViewForPage::s instance::(
    ""
)::
Jun 21 03:07:41 unknown MyApp[467] <Error>: -[__NSCFArray clearVars]: unrecognized selector sent to instance 0x28c4b0
Jun 21 03:07:41 unknown MyApp[467] <Error>: *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFArray clearVars]: unrecognized selector sent to instance 0x28c4b0' 
```

当应用程序进入后台并进入前台时，“AppMeasurement”实例变为 nil 或为空，但我无法确定它是 Site Analyst iPhone 库问题还是编码问题。

为了处理崩溃，我做了零检查，但它没有落入零情况。

请帮助我弄清楚“AppMeasurement”实例空检查以及为什么当应用程序进入后台并进入前台时“AppMeasurement”实例变为空。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:39:10.340

最后，我弄清楚了事情。对不起所有的不幸。

我所做的只是使用 3rd 方库来实现 Site Catalyst 本身提供的 Omniture Tracking for iPhone 应用程序。

请参考以下库 URL： [Site Catalyst Omniture 库适用于为所有 iOS 设备（包括 iPhone、iPad 和 iPod Touch）开发的应用程序](https://developer.omniture.com/en_US/gallery/app-measurement-for-ios)

库本身存在问题，它有很多内存管理问题。

他们提供了带有内存泄漏修复程序的新库。

上传了新的库来解决这个问题。

在支持类 - 遇到问题`OmnitureTracking.m`，同时设置`AppMeasurement.h`属性：

```
//Use best practices plugin
s.useBestPractices = YES; 
```

由于这个属性，每当应用程序进入活动状态（即启动）时，都会调用omniture tracking。由于库有内存管理问题，当应用程序进入后台并进入前台时，应用程序会崩溃。

感谢您的回复。

但仍然困扰我的一件事是如何检查一个类的空实例

如果实例在那里，它会在 NSLog 上作为

```
2012-06-21 01:53:21.418 MyApp[857:607] trackViewForPage::s instance::<AppMeasurement: 0x28c4b0>:: 
```

但在错误情况下，将 NSLog 上的实例作为

```
Jun 21 03:07:41 unknown MyApp[467] <Warning>: trackViewForPage::s instance::(""):: 
```

看到这一点，我认为它是 EMPTY INSTANCE 案例。如何检查这种情况？它没有在零检查下检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T16:40:28.770

那个代码是一团糟；由于对您的问题的评论中提到的原因，很难说出了什么问题。

*   `get`除非是非常特殊的类型，否则任何方法都不应该加上前缀

*   `beginTracking`泄漏分配给的任何内容`s`

所以...`s`被分配给一个 NSArray 实例，要么是因为命名不佳`getInstance`的返回一个 NSArray 要么你过度释放该对象。

# opencv - cvMat 到 IplImage 的转换

> ID：11136740
> 
> 赞同：0
> 
> 时间：2012-06-21T11:01:43.827
> 
> 标签：opencv, contour, iplimage

我有两个程序，一个接受图像作为矩阵，并使用轮廓检测​​进行跟踪对象等处理。第二个程序将图像作为数组（IplImage）并计数。对象。但我想合并这些程序以计数和跟踪这些对象。如何合并它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:47:13.540

在下面的代码中，left 是 CvMat，left1 是 IplImage。这样你就可以手动将cvmat转换为IplImage。

```
for (int y=0;y<height1;y++)
          {
                   uchar* leftdata=(uchar*)(left->data.ptr+y*left->step);
                   uchar* left1data=(uchar* )(left->imageData+y*left1step);
               for (int x=0;x<width1;x++)
                   left1data[x]=leftdata[x];
          } 
```

或者这里是另一个链接 [How to convert a Mat variable type in an IplImage variable type in OpenCV 2.0?](https://stackoverflow.com/questions/2468307/how-to-convert-a-mat-variable-type-in-an-iplimage-variable-type-in-opencv-2-0?rq=1)

# html - HTML 电子邮件显示不正确 Outlook 2007/10，图像之间有额外的空间

> ID：11136744
> 
> 赞同：3
> 
> 时间：2012-06-21T11:02:06.107
> 
> 标签：html, email, html-email, outlook-2007, outlook-2010

我正在开发一个电子邮件活动，但发现自己遇到了一个特定于 Outlook 2007/10 的问题。我认为这是因为它使用了 Word 渲染引擎。此代码在使用 Litmus 测试的绝大多数其他客户端上运行良好。

表格的总宽度为 650px，每行包含 3 张图像，总宽度为 650px。

[Image2 http://www.hallwaystudios.com/screenshots/uploads/uMaf2YsD.png](http://www.hallwaystudios.com/screenshots/uploads/uMaf2YsD.png)

这是 Outlook 2010，请注意突出显示的图像与右侧图像之间存在小间隙。该图像位于它自己的表格单元格中，我已对其应用 display: block CSS。

我的整个代码库可以在下面找到。此电子邮件正在活动监视器中发送。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns:v="urn:schemas-microsoft-com:vml">
<head>
<title>We've Moooved...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
    HTML,BODY {
        margin: 0;
        padding: 0;
    }
    IMG {
        display: block;
        padding: 0;
        margin: 0;
        vertical-align:bottom;  
    }
    TABLE,TR,TD {
        border-collapse: collapse;  
    }
    P {
        margin: 5px 0px;    
    }
</style>
</head>
<body bgcolor="#ffffff">
<table width="100%" cellpadding="0" cellspacing="0" align="center" background="images/background.jpg" bgcolor="#282828" style="padding-bottom: 20px; background-color:#282828; width: 100%">
<tr>
<td style="color: #FFFFFF; text-align: center; padding: 10px;" align="center">
<font color="#FFFFFF" face="Arial,Helvetica,Verdana,Calibri,sans-serif" size="2" style="font-size: 12px; line-height: 20px;">
Having trouble viewing this email? <webversion style="color:#FFFFFF">Click here to view it in your browser</webversion>
</font>
</td>
</tr>
<tr><td>
<table border="0" cellpadding="0" cellspacing="0" width="650" align="center" style="margin: 0 auto; text-align: center; background-color: #000" bgcolor="#000">
  <tr>
   <td><img src="images/spacer.gif" width="26" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="3" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="84" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="41" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="75" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="9" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="40" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="83" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="42" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="13" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="53" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="18" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="40" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="6" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="68" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="19" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="29" height="1" border="0" alt="" /></td>
   <td><img src="images/spacer.gif" width="1" height="1" border="0" alt="" /></td>
  </tr>
  <tr>
   <td rowspan="3" colspan="10"><a href="http://www.hallwaystudios.com/"><span></span><img name="campaign_r1_c1" src="images/campaign_r1_c1.png" width="416" height="110" border="0" alt="" style="display: block" /></a></td>
   <td colspan="8" bgcolor="#000000"><span></span><img src="images/spacer.gif" width="1" height="39" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="8"><span></span><img name="campaign_r2_c11" src="images/campaign_r2_c11.jpg" width="234" height="34" border="0" alt="" style="display: block" /></td>
   <td><span></span><img src="images/spacer.gif" width="1" height="34" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="8"><span></span><img name="campaign_r3_c11" src="images/campaign_r3_c11.jpg" width="234" height="37" border="0" alt="" /></td>
  </tr>
  <tr>
   <td colspan="18"><span></span><img name="campaign_r4_c1" src="images/campaign_r4_c1.jpg" width="650" height="157" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td rowspan="3" align="right" width="26"><span></span><img name="campaign_r5_c1" src="images/campaign_r5_c1.jpg" width="26" height="408" border="0" alt="" style="display: block" /></td>
   <td rowspan="3" colspan="10" valign="top" background="images/campaign_r5_c2.jpg" bgcolor="CEF2EE" align="left" style="background:#CEF2EE url(images/campaign_r5_c2.jpg) top left no-repeat" height="408" width="443">
<!--[if gte mso 9]>
<v:rect style="width:443px;height:408px;" strokecolor="none">
  <v:fill type="tile" color="#CEF2EE" src="http://www.hallwaystudios.com/images/email/campaign_r5_c2.jpg" /></v:fill>
</v:rect>
<v:shape id="theText" style="position:absolute;width:443px;height:408px;">
<![endif]-->
<font color="#000000" face="Arial,Helvetica,Verdana,Calibri,sans-serif" size="2" style="font-size: 14px; line-height: 20px; text-align: left;"><multiline><p style="margin: 0px 0px 6px">Thanks to all of your support, our team has thrived and grown<br>We looked far and wide to find a space, that we can call our own</p>     <p style="margin:6px 0px">We love our new office; it’s so easy to reach<br>It’s down the road in Watford (sadly not the beach)<br>Near the station, M1 and M25, we’re very well connected<br>Of course we miss the countryside, but nothing else has been affected</p><p style="margin:6px 0px">We still do great <a href="http://www.hallwaystudios.com/services/" style="color: #000000"><strong><font color="#000000">design</font></strong></a>, be it web, literature, brand or logo,<br>And know how to <a href="http://www.hallwaystudios.com/services/" style="color:#c92234"><font color="#c92234"><strong>promote</strong></font></a> your business through social media, email and SEO.<br>We <a href="http://www.hallwaystudios.com/services/" style="color:#1f75b0"><font color="#1f75b0"><strong>develop</strong></font></a> the technology: e-commerce, web or bespoke software<br>And we make sure you’re involved at every stage to create results beyond compare.</p><p style="margin:6px 0px">So make sure you come and visit, for a coffee and some cake<br>We'd be delighted to show you round, and love an excuse to bake!</p><p style="margin: 6px 0px 0px">To get your free cake and coffee, call us or click on the button to the right<br>And arrange to see us and Betty the cow, (she heard we had moo-ved and appeared one night...)</p></multiline></font>
<!--[if gte mso 9]>
</v:shape>
<![endif]-->
</td>
   <td colspan="7" align="left"><img name="campaign_r5_c12" src="images/campaign_r5_c12.jpg" width="181" height="163" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="3" align="left"><img name="campaign_r6_c12" src="images/campaign_r6_c12.jpg" width="64" height="51" border="0" alt=""></td>
   <td align="left"><a href="http://www.hallwaystudios.com/contact/"><img name="campaign_r6_c15" src="images/campaign_r6_c15.jpg" width="68" height="51" border="0" alt="" style="display: block" /></a></td>
   <td colspan="3" align="left"><img name="campaign_r6_c16" src="images/campaign_r6_c16.jpg" width="49" height="51" border="0" alt="" style="display: block" /></td>
  <tr>
   <td colspan="7" align="left"><img name="campaign_r7_c12" src="images/campaign_r7_c12.jpg" width="181" height="194" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="18"><img name="campaign_r8_c1" src="images/campaign_r8_c1.jpg" width="650" height="98" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="18"><span></span><img name="campaign_r9_c1" src="images/campaign_r9_c1.jpg" width="650" height="178" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr width="650">
   <td align="right"><img name="campaign_r10_c1" src="images/campaign_r10_c1.jpg" width="26" height="96" border="0" alt="" style="display: block" /><span></span></td>
   <td colspan="4" align="right"><a href="http://www.hallwaystudios.com/contact/#map"><span></span><img name="campaign_r10_c2" src="images/campaign_r10_c2.jpg" width="203" height="96" border="0" alt="" style="display: block" /></a></td>
   <td colspan="13" align="left"><span></span><img name="campaign_r10_c6" src="images/campaign_r10_c6.jpg" width="421" height="96" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="18"><span></span><img name="campaign_r11_c1" src="images/campaign_r11_c1.jpg" width="650" height="145" border="0" alt="" style="display: block" /></td>
  </tr>
  <tr>
   <td colspan="18" bgcolor="#000000"><img src="images/social_footer.jpg" usemap="#Map" border="0" /></td>
   </tr>
  <tr>
   <td colspan="18" bgcolor="#000000" align="center">
    <font color="#FFFFFF" face="Arial,Helvetica,Verdana,Calibri,sans-serif" size="2">
    Censored</font></p>

    <p><small>
    Would you like to <preferences style="color:#FFFFFF">
    <font color="#FFFFFF">update your details</font></preferences>? Or <unsubscribe style="color:#FFFFFF"><font color="#FFFFFF">unsubscribe from our awesome email list</font></unsubscribe> (Betty will miss you)?
    </small></p>
    </font>
   </td>
  </tr>
</table>
</td></tr>
</table>

<map name="Map" id="Map">
  <area shape="rect" coords="31,2,112,67" href="http://www.facebook.com/hallwaystudios" target="_blank" alt="Facebook" />
  <area shape="rect" coords="279,1,362,70" href="http://www.linkedin.com/company/hallway-studios-limited" target="_blank" alt="LinkedIn" />
  <area shape="rect" coords="404,2,486,81" href="http://www.hallwaystudios.com/" target="_blank" alt="Hallway Studios" />
  <area shape="rect" coords="526,-9,622,77" href="[forwardtoafriend]" />
<area shape="rect" coords="155,-2,237,67" href="http://twitter.com/hallwaystudios" target="_blank" alt="Twitter" />
</map>
</body>
</html> 
```

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T20:19:55.443

我想我终于解决了困扰我几天的这个问题。它可能不适用于你，我不能很好地阅读代码，但对我来说问题是我有我要称之为偏移列的东西。如果您的表格列排列得很好，Outlook 会很好地处理它们，如下图所示： ![在此处输入图像描述](../Images/171dc012e50e0f0d0e70afa43e217d7d.png)

如果您有任何偏移列，它就会开始出现问题，并且您最终会在没有意义的地方出现那些幻影空间。这是一个不好的方法： ![在此处输入图像描述](../Images/6312b3f4a2d62b470cf9bff79e7c61ee.png)

据我所知，您最好创建比实际需要更多的列，因为如果您以合乎逻辑、经济的方式节约和创建表，您就会遇到问题。这解决了我的问题，希望能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T10:57:02.737

我永远不会使用 col 或 rowspan，我只是遇到了麻烦。并且 android 或 gmail 不支持 FYI 样式，因此您需要将其全部设为内联 css 样式

# python - 函数中的 Python 列表引用。

> ID：11136746
> 
> 赞同：3
> 
> 时间：2012-06-21T11:02:08.457
> 
> 标签：python

如果我传入一个列表，我将无法理解 python 函数中的奇怪行为。我做了以下功能：

```
def func(x):
    y = [4, 5, 6]
    x = y

def funcsecond(x):
    y = [4, 5, 6]
    x[1] = y[1]

x = [1, 2, 3] 
```

当我调用 func(x) 然后打印出 x 时，它会打印出 [1, 2, 3]，就像 x 之前的方式一样，它不会将列表 y 分配给 x。但是，如果我调用 funcsecond(x)，它会将 5 分配给 x 的第二个位置。为什么呢？当我分配整个列表时，它什么都不做，但是当我只分配一个元素时，它会更改我最初调用它的列表。非常感谢你，我希望你能理解我的意思，我很难用英语表达自己。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T11:03:34.557

前者重新**绑定****名称**，后者**改变****对象**。名称的更改仅存在于本地范围内，而变异对象在退出范围后仍保持变异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T11:06:40.690

这是因为 x 指向一个可变的对象。

```
def func(x): # here x is a local variable which refers to the object[1,2,3]
    y = [4, 5, 6]
    x = y  #now the local variable x refers to the object [4,5,6]

def funcsecond(x): # here x is a local variable which refers to the object[1,2,3]
    y = [4, 5, 6]
    x[1] = y[1]  # it means [1,2,3][1]=5 , means you changed the object x was pointing to

x = [1, 2, 3] 
```

# asp.net - ASP.NET Web API、Web 服务发现和客户端创建

> ID：11136749
> 
> 赞同：6
> 
> 时间：2012-06-21T11:02:15.327
> 
> 标签：asp.net, asp.net-mvc, web-services, rest, asp.net-web-api

我找不到任何关于 ASP.NET Web API 的服务发现实现的信息。对于一个新项目，我需要在 WCF 和 Web API 之间做出决定。服务元素将被各种客户端、移动端、客户端 JavaScript 以及 ASP.NET 网站使用。

对于网站而言，能够针对 WCF 服务生成客户端的便利性显然是一个加分项。我对 RESTful Web 服务不太熟悉，但我看到有 Web 应用程序描述语言 (WADL)。也许这是我的无知，但能够宣传使用您的服务的正确方式肯定是一件好事吗？

我的主要问题：是否有任何东西可以为 WEB API 生成 WADL 或类似内容？

第二个问题：[这个工具](http://wadl.codeplex.com/)看起来像是基于 WADL 生成客户端，还有什么其他方法可以让客户端使用 RESTful Web 服务保持最新状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:07:22.333

那里有大量的工作要做。它还没有完成，但要注意空间。

看看这里（和较新的姚帖子）：http: [//blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help -page-using-apiexplorer.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/05/21/asp-net-web-api-generating-a-web-api-help-page-using-apiexplorer.aspx)

还

[http://blogs.msdn.com/b/yaohuang1/archive/2012/06/15/using-apiexplorer-to-export-api-information-to-postman-a-chrome-extension-for-testing-web- api.aspx](http://blogs.msdn.com/b/yaohuang1/archive/2012/06/15/using-apiexplorer-to-export-api-information-to-postman-a-chrome-extension-for-testing-web-apis.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T11:47:02.487

我在这里写了一种使用 ASP.NET Web API 生成 WADL 的方法：http: [//blogs.msdn.com/b/stuartleeks/archive/2014/05/20/teaching-asp-net-web-api-to-wadl .aspx](http://blogs.msdn.com/b/stuartleeks/archive/2014/05/20/teaching-asp-net-web-api-to-wadl.aspx)

# backbone.js - 在 Backbone 中保持集合有序的方法？

> ID：11136757
> 
> 赞同：0
> 
> 时间：2012-06-21T11:02:26.193
> 
> 标签：backbone.js

我有一个使用比较器功能对其模型进行排序的集合。这些模型具有用于对其进行排序的等级属性。

在我的模型视图中，我有一个用于将等级属性升级和降级的按钮。通过收听集合更改事件，我可以在每次更改模型的排名属性时调用“排序”，从而重新排序列表。

问题是保持排名唯一 - 现在我只是更改单个模型的排名值，这不会影响其他模型。例如：

1.  项目 A，排名 1
2.  项目 B，等级 2
3.  项目 C，等级 3

至：

1.  项目 A，排名 1
2.  项目 B，排名 1
3.  项目 C，等级 3

是否有一种聪明的（骨干）方式来改变其他模型的排名？

如果需要手动完成，那么有什么好的策略呢？我目前正在从模型的视图中更改模型并听取集合视图中的更改，因此没有明显的方法来影响相邻模型的排名。

# linq - Linq 和三表分组

> ID：11136758
> 
> 赞同：0
> 
> 时间：2012-06-21T11:02:27.520
> 
> 标签：linq, join, linq-group

我想出了以下 LINQ，但我不禁想到我应该能够在一个查询而不是两个查询中做到这一点。任何人都可以帮忙吗？

这个想法是内部连接三个表并逐个分组。

```
var q1 = from er in ExportRules
    join per in PlaceExportRules on er.ExportRulesID equals per.ExportRulesID
    select new 
    {
        PlaceID = per.PlaceID, 
        Description = er.Description, 
        Tag = er.TagName,
        ExportName = per.ExportName,
        ExportAddress = per.ExportAddress
    };

var q2 = from p in Places 
    join rules in q1 on p.PlaceID equals rules.PlaceID into joined2
    where joined2.Any()
    orderby p.PlaceName
    select new {Place = new {p.PlaceID, p.PlaceName}, joined2}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:14:35.647

好吧，你可以把东西括起来：

```
var query = from p in Places
            join rules from 
                 (from er in ExportRules
                  join per in PlaceExportRules 
                    on er.ExportRulesID equals per.ExportRulesID
                  ...)
              on p.PlaceId equals rules.PlaceId into joined2
            where joined2.Any()
            orderby p.PlaceName
            select new {Place = new {p.PlaceID, p.PlaceName}, joined2}; 
```

但是，我个人可能会将其保留为两个查询。它更清晰，并且不会影响性能 - 它不像代码中的第一条语句实际上会*执行*查询。

# mysql - 选择朋友的朋友 sql 的性能（但不是我的朋友）

> ID：11136759
> 
> 赞同：1
> 
> 时间：2012-06-21T11:02:27.853
> 
> 标签：mysql, sql, performance

我想得到不是我朋友的朋友的朋友。我有一个这样的表： userFriends(idUser, idUserFriend)

我在想这样的事情：

```
select distinct idUserFriend from userFriends where idUser in
(select idUserFriend from userFriends where idUser = 1)
and idUserFriend not in (select idUserFriend from userFriends where idUser = 1) 
```

但我不确定它是否如此缓慢，或者它是否可以以另一种方式更快。

对此有何看法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:27:29.020

```
SELECT DISTINCT
    two.idUserFriend
FROM userFriends one
JOIN userFriends two ON one.idUserFriend = two.idUser
WHERE NOT EXISTS (
        SELECT * 
        FROM userFriends nx
        WHERE nx.idUser = one.idUser
        AND nx.idUserFriend = two.idUserFriend
        )
AND one.idUser = 1
        ; 
```

同样可以通过“NOT IN”构造来完成：

```
SELECT DISTINCT
    two.idUserFriend
FROM userFriends one
JOIN userFriends two ON one.idUserFriend = two.idUser
WHERE two.idUserFriend NOT IN (
        SELECT  nx.idUserFriend
        FROM userFriends nx
        WHERE nx.idUser = one.idUser
        )
AND one.idUser = 1
        ; 
```

还有“EXCEPT”版本：

```
SELECT DISTINCT
    two.idUserFriend
FROM userFriends one
JOIN userFriends two ON one.idUserFriend = two.idUser
WHERE one.idUser = 1
EXCEPT (
        SELECT  nx.idUserFriend
        FROM userFriends nx
        WHERE nx.idUser = 1
        )
        ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:11:45.227

使用连接进行比较：

```
SELECT
    b.idUserFriend
FROM 
    userFriends a
INNER JOIN
    userFriends b ON a.idUserFriend = b.idUser
LEFT JOIN
    userFriends c ON a.idUser = c.idUser AND b.idUserFriend = c.idUserFriend
WHERE
    a.idUser = 1
    AND c.idUser IS NULL
GROUP BY
    b.idUserFriend #eliminate duplicates 
```

通常，最好`JOIN`在子查询上使用 s，因为它们将利用相关字段上的索引进行比较。另一方面，子查询将针对返回的每一行执行，即使它是不相关的子查询 (MySQL)。

[有关JOIN 与子查询](https://stackoverflow.com/questions/2577174/join-vs-subquery)的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T11:12:02.840

```
select myFriend.idUserFriend from userFriend me inner join userFriends myFriend 
on me.idUserFriend = myFriend.idUser and myFriend.idUserFriend != me.idUserFriend 
where me.idUser='MyUserId'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T11:26:00.923

试试这个 -

```
SELECT UF2.idUser, UF2.idUserFriend 
FROM USERFIRENDS UF2 INNER JOIN 
(
    SELECT idUser, idUserFriend
    FROM USERFRIENDS UF1
    WHERE UF1.idUser =1 -- this query gives my friend
) MYFRIENDS ON 
      UF2.idUser=MYFRIENDS.idUserFriend -- get my freinds friends
      AND UF2.idUserFriend NOT IN 
           (
              SELECT idUserFriend
              FROM USERFRIENDS UF1
              WHERE UF1.idUser =1           
           ) 
```

此查询的优点是第一个子查询是连接的一部分，不会对每条记录都执行。

不幸的是，您需要为 NOT IN case 使用子查询。

# python - 将菜单添加到 GtkMenuToolButton (Python)

> ID：11136760
> 
> 赞同：1
> 
> 时间：2012-06-21T11:02:32.653
> 
> 标签：python, gtk, pygtk

在我的 Python 应用程序中，我有一些 GtkMenuItems（与主 GtkMenuBar 相关联），还有一些 GtkMenuToolButtons 在我的 GtkToolbar 中。

```
- gtkMenuBar1
   - gtkMenuItem1
      - gtkMenuItem2
      - gtkMenuItem3
- gtkToolbar1
   - gtkMenuToolButton1 
```

默认情况下，gtkMenuToolButton1 显然是空的。我想做类似的事情

```
self.ui.gtkMenuToolButton1.set_menu(self.ui.gtkMenuItem1) 
```

但如果我这样做（在`finish_initializing()`我的窗口内），什么都不会改变。我是 Python 和 Gtk3 的新手。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:03:57.287

查看[Python Gtk3 教程中的示例](http://python-gtk-3-tutorial.readthedocs.org/en/latest/menus.html#example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:40:39.637

您必须将`Gtk.Menu`对象添加到菜单工具按钮，而不是`Gtk.MenuItem`.

# java - 将 TextView 添加到 ListView 项

> ID：11136763
> 
> 赞同：0
> 
> 时间：2012-06-21T11:02:42.847
> 
> 标签：java, android, listview

我需要添加可以包含不同数量的 TextView 和 Imageview 对象的 ListView 项目。我该怎么做？以及如何确定和设置这些对象的 ID？当我尝试使用 ID R.id.chat_message 将 ImageView 或 TextView 添加到 LinearLayout 时，应用程序崩溃:(

```
package com.me.my_app;

import java.util.ArrayList;

import android.app.ListActivity;
import android.content.Context;
import android.graphics.BitmapFactory;

import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.ViewGroup.LayoutParams;
import android.widget.BaseAdapter;
import android.widget.ImageView;

import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class FriendSendMessageActivity extends ListActivity {

    ListView view;
    public ContactAdapter contactAdapter;

    LinearLayout LL;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chat_send_message);

        Bundle extras = getIntent().getExtras();
        if(extras != null)
        {
            int index = Integer.parseInt(extras.get(getPackageName() + ".IndexInList").toString());
            String sentFrom = extras.get(getPackageName() + ".SentFrom").toString();
            int id = Integer.parseInt(extras.get(getPackageName() + ".Id").toString()); //либо id друга либо id друга
            FriendItem.Friend item = TabFriendsActivity.getList().get(index);

            view = getListView();

            contactAdapter = new ContactAdapter();
            contactAdapter.addItem(new MessageItem.Message(1, true, true, true, "123","13:31",new ArrayList<MessageItem.Message.Attachment>()));

            ArrayList<MessageItem.Message.Attachment> list = new ArrayList<MessageItem.Message.Attachment>();
            list.add(new MessageItem.Message.Attachment(MessageAttachmentType.PHOTO, RoundedImage.createRoundedPhoto(BitmapFactory.decodeResource(MainActivity.res,R.drawable.temp_user_photo))));

            contactAdapter.addItem(new MessageItem.Message(1, true, true, true, "123","9:10",list));
            view.setAdapter(contactAdapter);  
        }
    }

    class ContactAdapter extends BaseAdapter {

        private ArrayList<MessageItem.Message> mData = new ArrayList<MessageItem.Message>();
        private LayoutInflater mInflater;

         private static final int IGNORE_ITEM_VIEW_TYPE = -1;
         private static final int TYPE_ITEM = 0;    //обычный item
         private static final int TYPE_MAX_COUNT = 2;   //макс. число layout'ов отображения item'ов

        public ContactAdapter()
        {
            mInflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        }

        public void addItem(final MessageItem.Message item) {
            mData.add(item);
            notifyDataSetChanged();
        }

        public int getItemViewType(int position) 
        {
            return TYPE_ITEM;
        }

        @Override
        public int getViewTypeCount() {
            return TYPE_MAX_COUNT;
        }

        public int getCount()
        {
            return mData.size();
        }

        public MessageItem.Message getItem(int position)
        {
            return mData.get(position);
        }

        public long getItemId(int position)
        {
            return position;
        }

        public boolean isEnabled(int pos)
        {
            return true;
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            MessageItem.ViewHolder holder = null;

            MessageItem.Message item = mData.get(position);

            LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

            if (convertView == null) 
            {
                holder = new MessageItem.ViewHolder();

                convertView = mInflater.inflate(item.in_out ? R.layout.chat_message_in_item : R.layout.chat_message_out_item,   null, false);

                if(item.listAttach.size() > 0)
                    holder.attachLL = (LinearLayout) findViewById(R.id.chat_message);

                for(MessageItem.Message.Attachment attach : item.listAttach)
                {   
                    switch(attach.type)
                    {
                    case PHOTO:
                        if(attach.photo != null)
                        {
                            ImageView iv = new ImageView(convertView.getContext());
                            //iv.setLayoutParams(params);
                            iv.setId(0x7f000000 - 1);
                            holder.listAttach.add(new MessageItem.Message.Attachment(attach.type,iv));
                            Log.v("","1" + iv.getId() + " " + holder.listAttach.size());
                        }
                        else
                            Log.v("", "Null!");
                        break;
                    }
                }

                convertView.setTag(holder);
            } else {
                holder = (MessageItem.ViewHolder) convertView.getTag();
            }

            for(int i = 0; i < holder.listAttach.size();i++)
            {
                if(holder.listAttach.get(i).type == MessageAttachmentType.PHOTO && item.listAttach.get(i).photo != null && holder.listAttach.get(i).image != null)
                {
                    holder.attachLL.addView(holder.listAttach.get(i).image);
                    holder.listAttach.get(i).image.setImageBitmap(item.listAttach.get(i).photo);
                }

                else
                    Log.v("", "Unable to add image!");
            }

            return convertView;
        }
    }

} 
```

和 MessageItem.java：

```
package com.me.my_app;

import java.util.ArrayList;
import java.util.Comparator;

import android.graphics.Bitmap;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class MessageItem
{
    public static class Message implements Comparator<Message> 
    {
        int id; 
        boolean in_out; 
        boolean is_read; 
        boolean is_delivered; 
        String message; 
        String time; 
        ArrayList<Attachment> listAttach; 
        public Message(int id, boolean in_out, boolean is_read, boolean is_delivered, String message, String time, ArrayList<Attachment> list)
        {
            this.id = id;
            this.in_out = in_out;
            this.is_read = is_read;
            this.is_delivered = is_delivered;
            this.message = message;
            this.time = time;
            listAttach = new ArrayList<Attachment>();
            if(list != null)
            {
                for(Attachment a : list)
                    listAttach.add(a);
            }
        }

        public int compare(Message object1, Message object2) {
            return object1.time.compareTo(object2.time);
        }
        public static class Attachment
        {
            ImageView image; 
            MessageAttachmentType type;
            Bitmap photo; 
            String Uri; 
            public Attachment(MessageAttachmentType type, Bitmap photo) 
            {
                this.type = type;
                this.photo = photo;
            }
            public Attachment(MessageAttachmentType type, ImageView image)
            {
                this.type = type;
                this.image = image;
            }
        }
    }

    public static class ViewHolder
    {   
        LinearLayout attachLL;
        TextView text, time;
        ArrayList<MessageItem.Message.Attachment> listAttach;
        public ViewHolder()
        {
            listAttach = new ArrayList<MessageItem.Message.Attachment>();
        }
    }
}
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:13:05.447

您很可能必须实现自己的列表视图适配器。然后，您可以为您的项目创建任何布局并进行设置。以下是它在我的代码中的完成方式：

```
public class ExpAdapter extends BaseExpandableListAdapter {

    /*SOME CODE HERE*/

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) myContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.child_row, null);
        }

        int groupId = ((ListTaskElement)this.getGroup(groupPosition)).id;       
        this.setupTaskView(convertView, this.childrenOfGroup(groupId, false).get(childPosition));

        convertView.setTag(this.getChildId(groupPosition, childPosition));
        return convertView;
    }

    /*SOME CODE HERE*/

} 
```

您可以在此处找到所有详细信息：http: [//jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx](http://jnastase.alner.net/archive/2010/12/19/custom-android-listadapter.aspx)

# oracle - 使用 Oracle Apex 中的 Jasper 报告创建的电子邮件 PDF 文件

> ID：11136764
> 
> 赞同：1
> 
> 时间：2012-06-21T11:02:51.607
> 
> 标签：oracle, email, oracle11g, oracle-apex

我正在使用 Jasper Report 在我的 apex 应用程序中生成 pdf 格式的报告。我想通过电子邮件发送这个生成的 pdf 文件。

想象有一个按钮为`Make Report`. 当用户单击此按钮时，pdf 文件应创建并通过电子邮件发送创建的 pdf 文件。

我知道使用 Jasper Report 创建 pdf 文件的过程。我可以在我的 oracle apex 应用程序中实现该部分。但是生成后如何通过电子邮件发送 pdf 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:00:22.693

我没有 jasper 报告，但如果你已经让它工作了：你能打电话给它并得到一份报告，比如 a`BLOB`吗？

如果是，那么 using`apex_mail`可以帮助您，因为它提供了[ADD_ATTACHMENT](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/apex_mail.htm#CHDHCEGF)过程，该过程将 blob 作为输入。

# iphone - 动画，例如当您从 iPhone 照片库中删除时

> ID：11136765
> 
> 赞同：5
> 
> 时间：2012-06-21T11:02:53.700
> 
> 标签：iphone, ios, core-animation, uiviewanimation, cgaffinetransform

我尝试实现动画：当你进入 iPhone Gallery 时，按下图像，你会看到全屏图像。您可以在下面看到带有垃圾按钮的工具栏。当您按下此按钮时，图像被动画删除。我尝试实现这个，但我不知道如何实现图像的变换，苹果使用。这是最好的，我可以这样做：

```
[UIView transitionWithView:self.view duration:0.1 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
        [self.view addSubview:scrollImageView];
    } completion:^(BOOL finished) {
        [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
            CGRect frame = scrollImageView.frame;
            frame.size = CGSizeMake(frame.size.width * 0.75, frame.size.height * 0.75);
            frame.origin = CGPointMake((size.width - frame.size.width) / 2, (size.height - frame.size.height) / 2);
            scrollImageView.frame = frame;
        } completion:^(BOOL finished) {
            [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
                CGRect frame = scrollImageView.frame;
                frame.size = CGSizeMake(frame.size.width * 0.05, frame.size.height * 0.05);
                frame.origin = CGPointMake(size.width, size.height);
                scrollImageView.frame = frame;
                CGAffineTransform transform = scrollImageView.transform;
                CGAffineTransform rotatedTransform = CGAffineTransformRotate(transform, 45 * 3.14 / 180);
                scrollImageView.transform = rotatedTransform;
            } completion:^(BOOL finished) {
                [scrollImageView removeFromSuperview];
            }];
        }];
    }]; 
```

先感谢您。

**更新** 据我所知，我无法使用 Core-Animation 制作此动画，但有人可以建议我制作与 iPhone Gallery 动画最相似的动画，但不使用 OpenGL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T12:41:35.897

您可以为此动画使用以下示例：

```
UIView *senderView = (UIView*)sender;

CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"transform"];
            anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
            anim.duration = 0.125;
            anim.repeatCount = 1;
            anim.autoreverses = YES;
            anim.removedOnCompletion = YES;
            anim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(1.2, 1.2, 1.0)];
            //[senderView.layer addAnimation:anim forKey:nil];

UIBezierPath *movePath = [UIBezierPath bezierPath];
            [movePath moveToPoint:icon.center];
            [movePath addQuadCurveToPoint:senderView.center
                             controlPoint:CGPointMake(senderView.center.x, icon.center.y)];

            CAKeyframeAnimation *moveAnim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
            moveAnim.path = movePath.CGPath;
            moveAnim.removedOnCompletion = YES;

            CABasicAnimation *scaleAnim = [CABasicAnimation animationWithKeyPath:@"transform"];
            scaleAnim.fromValue = [NSValue valueWithCATransform3D:CATransform3DIdentity];
            scaleAnim.toValue = [NSValue valueWithCATransform3D:CATransform3DMakeScale(0.1, 0.1, 1.0)];
            scaleAnim.removedOnCompletion = YES;

            CABasicAnimation *opacityAnim = [CABasicAnimation animationWithKeyPath:@"alpha"];
            opacityAnim.fromValue = [NSNumber numberWithFloat:1.0];
            opacityAnim.toValue = [NSNumber numberWithFloat:0.1];
            opacityAnim.removedOnCompletion = YES;

            CAAnimationGroup *animGroup = [CAAnimationGroup animation];
            animGroup.animations = [NSArray arrayWithObjects:moveAnim, scaleAnim, opacityAnim, nil];
            animGroup.duration = 0.5;
            [icon.layer addAnimation:animGroup forKey:nil]; 
```

我已经修改了代码，你必须在其中进行以下更改，将发送者视图设置为self.view，并根据您的要求更改动画的结束点（当前为senderView.center）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T22:07:56.270

我知道有点晚了。但是，您应该检查 Ciechan 的名为[BCGenieEffect](https://github.com/Ciechan/BCGenieEffect#bcgenieeffect)的解决方案。可以在[这里](https://github.com/Ciechan/BCGenieEffect#bcgenieeffect)找到。它的纯核心动画非常容易理解。我想这就是你要找的。

祝你好运

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T11:07:18.410

此时，您所谈论的确切动画无法使用 Core Animation 或 UIKit 完成。您需要使用 OpenGL 并将图像作为纹理应用并在其中制作动画。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T03:41:54.350

我认为您在谈论“吸”过渡动画。

可以触发它，但它是一个私人过渡，如果你使用它，Apple 可能会拒绝你的应用程序。

此代码应该使用 103 的转换代码来执行此操作：

[UIView beginAnimations:nil context:NULL]; [UIView setAnimationDuration:1.0]; [UIView setAnimationTransition:transtionIndex forView:containerView cache:NO]; [containerView addSubview: newView]; [oldView removeFromSuperview]; [UIView 提交动画];

或者在网上搜索一个名为“suckEffect”的核心图像过渡

# security - 安全存储密码（哈希）的最佳方法是什么

> ID：11136767
> 
> 赞同：0
> 
> 时间：2012-06-21T11:02:59.290
> 
> 标签：security, hash, saltedhash

现在很多网站都被黑了，密码哈希被盗了。即使是像 LinkedIn 这样的大网站也没有安全地存储他们的密码（只是 md5）。

现在是我的问题，什么是哈希密码的足够安全的方法？

目前我正在使用这个：

```
sha512(sha512(sha512(password) + salt)); 
```

这足够安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:42:44.133

```
hash_hmac('sha512', $data , $key); 
```

会很好。最好为 $key 使用至少 60 个字符作为盐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-28T20:35:12.063

很难说哪个是最好的，但安全的赌注是 BCrypt 算法。

> BCrypt 并不是最好的算法。但是，对于大多数用例来说，它已经足够了，而且它与基本的 hash-and-salt 方法相比，即使不是更容易，也同样容易实现。BCrypt 的不同之处在于，它不是更典型的 SHA-* 算法，而是利用 Blowfish 算法，该算法具有并行速度慢得多的优势。由于用户一次登录，这使得将测试大量密码的攻击者更难击败该算法。

更多信息：http: [//davisj.me/blog/bcrypt/](http://davismj.me/blog/bcrypt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:12:49.923

这取决于你的盐。您是否为每个用户生成了唯一的盐？盐不是一个常数，如果每个密码都使用相同的盐进行散列，那么你就是在浪费时间。

我建议使用 bcrypt 而不是 sha512/salt 方法，暴力破解要困难得多：http: [//krebsonsecurity.com/2012/06/how-companies-can-beef-up-password-security/](http://krebsonsecurity.com/2012/06/how-companies-can-beef-up-password-security/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:13:11.297

像您现在使用的那样使用盐对提高安全性非常有用，我强烈建议为每个用户使用随机盐。恕我直言，您对用户密码进行哈希处理的时间越多（您可以通过在每次哈希之前添加盐来提高安全性），它就越安全。我使用具有类似 256 次重复的 for 循环来散列密码，这可能被认为在接下来的几年中可以防止暴力破解。

有点离题，但我建议也要注意会话劫持（如重新生成 ssid 等...）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T11:10:03.010

是的，这已经足够安全了。我个人认为最后一次 sha512 调用是无用的，但我知道意见不同。

当然，只要无法使用蛮力策略猜出密码，这是安全的。如果用户选择 4 个字母的密码或他们妻子的名字，那么再多的哈希也无法保护您。

# php - CakePHP 日期修改，例如：old_date +1day

> ID：11136779
> 
> 赞同：0
> 
> 时间：2012-06-21T11:03:45.477
> 
> 标签：php, date, cakephp-2.1, cakephp-model

我正在使用 CakePHP2.1.3，我有两个日期。第一个是通过添加模型表单设置的开始日期，我想保留那个。第二个我想从基于先前选择的变量生成。我把变量拉出来了，这样就完成了。现在我需要找出如何根据开始日期和这个变量来计算结束日期。

例如，我希望一小时课程的结束时间为 $start_time +1 小时。这样我可以为每个事件设置这些，用户不必考虑这个类有多长。

我尝试使用 mktime，但它不起作用。所以我想知道 CakePHP 是否在某个地方有一个帮助器来修改日期，或者 CakeTime 是否可以做到这一点，尽管到目前为止这对我没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:49:32.210

You can create a virtual field in your model if you need it to use frequently. Or you can make a new field in the find query.

```
$this->Model->find('all', array('conditions' => array(....), 'fields' => array(...., 'DATE_ADD('YOUR FIELD', INTERVAL 1 HOUR) AS END_TIME'))); 
```

OR you can define it in your model like:

```
$virtualFields = array('END_TIME' => 'DATE_ADD(NOW(), INTERVAL 2 HOUR)'); 
```

# javascript - phonegap 读写json文件

> ID：11136780
> 
> 赞同：5
> 
> 时间：2012-06-21T11:03:48.240
> 
> 标签：javascript, json, cordova

我希望在 Phonegap(Cordova) 应用程序的 IOS/Android 上本地存储 JSON 文件。

基本上，我从服务器（$.GETJSON）检索一个 JSON 文件，我想先存储 JSON 文件，然后检索和修改它。

我看过 FileWriter 但我没有看到 mimetype ......唯一的例子给出了文本文件。

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T14:05:19.053

尼克，只需使用[FileWriter.write](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileWriter_write_quick_example)将您的 JSON 数据保存到磁盘。JSON 无论如何都是基于文本的文件，因此无需设置 mime 类型。当您准备好再次加载文件时，请使用[FileReader.readAsText](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileReader_read_as_text)。在 FileReader 的“onloadend”处理程序中，将使用事件调用该方法，并且 event.target.result 将是您的 JSON 数据。然后你会做一个

```
var myJson = JSON.parse(event.target.result); 
```

将文本转换为 JSON 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-03T20:19:55.687

（对于模板或默认设置）我只是将它们存储在单独的常量文件中，因此我不必使用任何特殊的文件实用程序插件或命令，超级简单：

```
(function(){
angular.module('app').constant('settings_json', 
{  
    "name":"settings",
    "data":[  
       {  
          "set":"globals",
          "share_diagnostics":true,
          "user_prefs_save_cloud": true         
       },
       {
          "set":"user",
          "fname":'',
          "lname": '',
          "telephone": '',
          "email": ''       
       }
    ]
}
)})(); 
```

然后在你的应用程序中：（注入'settings_json'之后）

```
var settings = angular.fromJson(settings_json); 
```

# c# - 从数据集中删除值

> ID：11136782
> 
> 赞同：0
> 
> 时间：2012-06-21T11:03:53.843
> 
> 标签：c#, dataset

我正在尝试使用以下代码删除数据集中存在的数据：

```
stateflowDataSet dsobject = new stateflowDataSet();
stateflowDataSetTableAdapters.dbo_statetableTableAdapter statetableadapter = new         stateflowDataSetTableAdapters.dbo_statetableTableAdapter();
statetableadapter.Fill(dsobject.dbo_statetable);
dsobject.dbo_statetable.Clear();
statetableadapter.Update(dsobject); 
```

但是在使用此行之后`statetableadapter.Fill(dsobject.dbo_statetable);`，数据仍然保留。

我清除数据的方式是否正确？

代码还有其他问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:09:28.457

`DataRows`从 a中删除`DataTable`并不意味着您将从 DBMS 中删除它们。反之亦然，实际上你正在阻止它们被删除，即使你`DataRow.Delete()`之前会打电话。

原因是：只有`DataRows`属于a的`DataTable`可以被删除

```
DataAdapter.Update(table) 
```

这将删除表中的每一行[`DataRowState=Deleted`](http://msdn.microsoft.com/en-us/library/system.data.datarowstate.aspx)。因此你需要使用[`Delete`方法](http://msdn.microsoft.com/en-us/library/system.data.datarow.delete.aspx)。

```
foreach(DataRow row in dsobject.dbo_statetable.Rows)
{
    row.Delete();
}
statetableadapter.Update(dsobject.dbo_statetable); 
```

您也可以在一批中执行此操作，这样效率会更高，因此您需要将 DataAdapter 设置[`UpdateBatchSize`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdataadapter.updatebatchsize.aspx)为 0（无限制）。

删除所有行的另一种方法是使用简单`SqlCommand`的 CommandText `DELETE FROM Table`：

```
using(var con = new SqlConnection(ConfigurationSettings.AppSettings["con"]))
using(var cmd = new SqlCommand())
{
    cmd.CommandText = "DELETE FROM Table";
    cmd.Connection = con;
    con.Open();
    int numberDeleted = cmd.ExecuteNonQuery();  // all rows deleted
} 
```

现在您需要手动删除（不是删除，您的问题的核心是什么）行，`DataTable`因为您还在数据库中*手动*删除了它们：

```
dsobject.dbo_statetable.Clear(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:16:14.603

让我试着重新措辞一下蒂姆斯的回答。`DataSet`当他们很受欢迎时，我经常使用s，并且对他们的“魔法”感到困惑......

`Dataset`包含来自数据库的数据副本 + 您对数据的更新，因为数据是从数据库中获取的。

`Update()`使用数据集的方法`DataAdapter`并不神奇，它会遍历数据集中的表，并在表中扫描行。它会：

*   `DeleteCommand`如果行被标记为删除，则使用
*   `UpdateCommand`如果行被标记为更新，则使用

前者是使用方法删除行`Delete()`的情况，后者是更新行中的某些单元格的情况。

如果您观察`RowState`数据集表中每一行的属性，您将了解更多有关该过程的信息。

# c# - 从 C# 以编程方式在 IIS7 中设置“启用父路径”

> ID：11136792
> 
> 赞同：3
> 
> 时间：2012-06-21T11:04:31.173
> 
> 标签：c#, iis-7, asp-classic, configure

我正在尝试从 ac# 应用程序设置一个网站，并且除了访问“ASP”设置之外，我已经成功地完成了所有操作。我希望能够为我的网站打开“启用父路径”。

到目前为止，我已经使用 Microsoft.Web.Administration 管理了所有内容，真的很感激任何帮助吗？

我到目前为止的代码是：

```
var site = sManager.Sites.Add(webSite.SiteName, webSite.PhysicalLocation, webSite.Port);
site.ApplicationDefaults.ApplicationPoolName = webSite.ApplicationPoolName;
site.Bindings.Clear();
site.Bindings.Add(string.Format("{0}:{1}:{2}", webSite.BindingIP, webSite.Port, webSite.HostHeader), "http");

site.ServerAutoStart = true;
sManager.CommitChanges(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:14:25.760

您应该阅读 MSDN 中的这个[AspSection](http://msdn.microsoft.com/en-us/library/aa347544%28v=vs.90%29)主题以及一些[基本的如何使用 web adminstrator](http://learn.iis.net/page.aspx/165/how-to-use-microsoftwebadministration/)。尽管“如何做”实际上并没有展示它，但您应该能够将一个部分投射到`AspSection`该类中：

```
 Configuration config = sManager.GetApplicationHostConfiguration();
        AspSection section = (AspSection)config.GetSection("system.webServer/asp",webSite.SiteName);
        section.EnableParentPaths = true; 
```

如果由于某种原因不允许强制转换，您可以使用基本属性方法：

```
 Configuration config = sManager.GetApplicationHostConfiguration();
        ConfigurationSection section = config.GetSection("system.webServer/asp",webSite.SiteName);
        ConfigurationAttribute enableParentPaths = section.GetAttribute("enableParentPaths");
        enableParentPaths.Value = true; 
```

# java - 在 OS X Mountain Lion 上带有自签名证书的 Java 小程序

> ID：11136805
> 
> 赞同：15
> 
> 时间：2012-06-21T11:05:09.030
> 
> 标签：java, macos, applet, code-signing, osx-mountain-lion

我们有一个需要完全信任运行的 Java 小程序。

在开发和预发布测试期间，我们使用自签名证书对其进行签名（生产版本使用真实的代码签名证书进行签名）。

但是当我们尝试在 OS X 10.8 的预版本上启动自签名小程序时，我们不能再选择允许它运行。“允许”按钮被禁用：

![已禁用](../Images/3bf4d4ce65334b688c5962bba784524a.png)

如果我按“显示详细信息...”，我可以选择“始终信任”证书，但这没有区别：

![在此处输入图像描述](../Images/40b9e02be193693bab574172b318c8a3.png)

它适用于 OS X Lion 10.7 上相同版本的 Java JRE，所以我怀疑这是操作系统而不是 JRE 的问题。

有什么解决方法吗？

我宁愿不使用真实的代码签名证书进行测试：使用真实的代码签名证书进行签名意味着我的公司断言该小程序是安全的并且应该被信任。在我们对其进行测试之前，我们几乎无法断言。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T13:55:32.183

这是 Mac OS X 中的新安全功能，默认情况下，只有来自 Mac Store 和受信任的开发人员的应用程序才能在其中运行。幸运的是，它很容易改变，你必须在 Mac OS X 偏好设置中允许它。

转到首选项 -> 安全和隐私，然后单击挂锁以允许更改。

然后在“允许从下载的应用程序”中选择“任何地方”。

之后，Java 对话框中的按钮将被启用。

![Mac OS X 安全和隐私首选项](../Images/4da03223c6317d7031b2e80c35545ac2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-21T16:59:42.470

如果您收到“ `Application Blocked by Security Settings`”消息，您需要进入`System Preferences: Java: Security`并将您的站点添加到例外列表或减少`security level`到`Medium`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:57:19.443

OS X Lion 您可以使用内置的*钥匙串访问*工具手动将证书添加为受信任的根证书。我还没有访问 OS X Mountain Lion 的权限，所以我不知道它是否可以在 Mountain Lion 中使用，但似乎值得一试。Lion中的步骤是：

*   打开钥匙串访问（位于*/Applications/Utilities*）
*   单击*文件*| *导入项目...*
*   将目标钥匙串更改为*系统*
*   找到您的证书文件并单击打开
*   它会说“您希望您的计算机从现在开始信任由 [...] 签名的证书吗？”。单击*始终信任*。

如果您直接在 Java 密钥库中生成证书，那么您可能没有独立的证书文件。您可以使用 Oracle 中的本指南轻松[导出一个](http://docs.oracle.com/javase/tutorial/security/toolsign/step5.html)。

我注意到您的屏幕截图显示“此证书被标记为此帐户受信任”，这很奇怪，因为我希望这是可以接受的。也许在 OS X Mountain Lion 中，用户添加的根证书在某种程度上比 Apple 分发的官方证书的地位更低？如果您发现上述步骤不起作用，您可以尝试将您的证书添加到官方根钥匙串中。*钥匙串访问*不会让你这样做，但我相信你可以使用内置工具`certtool`手动编辑位于的钥匙串`/System/Library/Keychains/SystemRootCertificates.keychain`来实现这一点。

# r - R 中的 while 循环函数中的 min() 错误 - R 爱好者的调试挑战

> ID：11136806
> 
> 赞同：0
> 
> 时间：2012-06-21T11:05:10.110
> 
> 标签：r, debugging, while-loop, min

我有一个函数（bobB）似乎陷入了一个while循环。当我点击转义并查看 warnings() 时，出现以下错误：

```
Warning message:
In min(xf, yf) : no non-missing arguments to min; returning Inf 
```

一些示例代码：

```
#I have the data: 

x<-"A03" 
y<-"A24"

sitex<-c("Sp1","Sp1","Sp3","Sp3")
sitey<-c("Sp2","Sp4","Sp2","Sp4")
gsim<-c(0.2,0.3,0.4,0.1)
gsim<-data.frame(sitex,sitey,gsim)

site<-c("A03","A03","A03","A03","A24","A24","A24","A24")
species<-c("Sp1","Sp1","Sp3","Sp4","Sp1","Sp1","Sp3","Sp4")
freq<-c(0.2,0.3,0.4,0.1,0.3,0.3,0,0.4)
ssf<-data.frame(site,species,freq,stringsAsFactors=FALSE)

#My function:  

bobB <- function (x, y, ssf, gsim) {

#*Step 1.* Create an empty matrix 'specfreq' to fill 

#Selects the species frequency data greater than 0 for the two sites being compared  

ssfx <- ssf[ssf$site == x & ssf$freq >0,]
ssfy <- ssf[ssf$site == y & ssf$freq >0,]

#pull out the species that are present at site x and/or site y using a merge,  
#this is    needed to create the initial empty matrix  

m<-(merge(ssfx,ssfy,all=TRUE))
species<-unique(m$species)

#Creates an empty matrix of the frequency of each species at site x and y  

 specfreq <- matrix(0, length(species), 2, dimnames=list(species,c(x,y)))

#*Step 2.* Fill empty matrix 'specfreq' with data from data.frame 'ssf'  

for(i in 1:nrow(ssf{specfreq[rownames(specfreq)==ssf[i,"species"],colnames(specfreq)==ssf[i,"site"]] <- ssf[i,"freq"]}

#*Step 3.* For species present at site x and y remove the minimum of the two from both  
#find minimum frequency for each species for site x and y  

a <- pmin(specfreq[,x], specfreq[,y])

#subtract 'a' from current 'specfreq'  

specfreq <- specfreq - a

#*Step 4.* Calulate variable B  

#Set answer to 0

answer <- 0

#while 'specfreq' contains data (i.e. is >0) keep doing the following  

while(sum(specfreq) > 1e-10) {

#Find species remaining at site x  

sx <- species[specfreq[,1] > 0]

#Find species remaining at site y  

sy <- species[specfreq[,2] > 0]     

#Pull out the gsim value for sx and sy

gsimre <-gsim[gsim$sitex %in% sx & gsim$sitey %in% sy,]

#determines the row containing the maximum value for remaining gsim and assigns it to i     

i <- which.max(gsimre$gsim)

#once the max gsim value has been found (i) we go back to the specfreq matrix and filter  
#out the frequency of the site x species associated with i   

xf <- specfreq[(gsimre$sitex[i]),x]

#and the frequency of the site y species associated with i  

yf <- specfreq[(gsimre$sitey[i]),y]

#The frequency of the species at site x associated with the greatest i is multiplied by i           

answer <- answer + xf * gsimre$gsim[i]

#Then take the minimum common frequency for the two species associated with i  

f <- min(xf,yf)

#Subtract theminimum  common frequency from both the site x and site y column  

specfreq[gsimre$sitex[i],x] <- specfreq[gsimre$sitex[i],x]-f
specfreq[gsimre$sitey[i],y] <- specfreq[gsimre$sitey[i],y]-f   
}
answer
}
bobB(x, y, ssf, gsim) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:42:48.533

好的，这是你的问题（我认为）：

```
xf <- specfreq[(gsimre$sitex[i]),x]
yf <- specfreq[(gsimre$sitey[i]),y] 
```

`(gsimre$sitex[i])`并且`(gsimre$sitey[i])`是因素，这意味着当您使用它们来索引某些东西时，它们会被解释为数字而不是字符。事实上：

```
gsimre$sitey
[1] Sp4
Levels: Sp2 Sp4 
```

Sp4 是第二个因子，其数值为 2，因此`specfreq[(gsimre$sitey[i]),y]`为`specfreq[2,2]`0。

因此，这应该可以解决问题：

```
xf <- specfreq[as.character(gsimre$sitex[i]),x]
yf <- specfreq[as.character(gsimre$sitey[i]),y] 
```

或者您在开始时将它们声明为字符串而不是因子，就像您为`ssf`但不是为`gsim`：

```
gsim<-data.frame(sitex,sitey,gsim, stringsAsFactors=FALSE) 
```

因为这个错误`yf`等于 0，因此`f=min(xf,yf)`总是等于 0，因此你的无限循环。

PS：如果您希望函数返回它，则`answer`应该退出循环，即。`while`e.

```
 }
answer
} 
```

代替

```
 answer
    }
} 
```

# asp.net-mvc - 如何从asp.net MVC4中的动态url获取参数？

> ID：11136821
> 
> 赞同：1
> 
> 时间：2012-06-21T11:06:07.990
> 
> 标签：asp.net-mvc, routes, asp.net-mvc-4

我有以下网址

`http://localhost/user/MyUserName`

如何从该网址获取“MyUserName”？所以我可以在服务器端使用它来检索我想要呈现给客户端的信息吗？

在 Django 中，归档它非常简单。但是我如何在 ASP.net MVC4 中做到这一点？

**编辑**

```
routes.MapRoute(
      name: "Default",
      url: "{controller}/{action}/{id}",
      defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
      ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:38:25.257

我不知道你给你的路由参数起什么名字

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}", 
     new {controller = "Home", action = "Index", id = UrlParameter.Optional}, 
     null,
     new[] {"Project.Web.Controllers"}); 
```

但我想`Id`无论如何都可以试试这个：

```
var value = RouteData.Values["Id"]; 
```

* * *

***更新 ：***

**在您的情况下，您应该在“默认路由之上”之前**定义一个特殊路由：

```
routes.MapRoute(
    "ForUser",
    "User/{id}", 
     new {controller = "User", action = "UserInfo", id = UrlParameter.Optional}, 
     null,
     new[] {"Project.Web.Controllers"}); 
```

# php - DomDocument 获取 h1 标签

> ID：11136824
> 
> 赞同：2
> 
> 时间：2012-06-21T11:06:19.457
> 
> 标签：php, regex, domdocument, scrape

我有非常非常大的 html 页面/数据。我需要在 h1 标签下获取数据。所以我在各种示例中看到的是 DOMDOCUMENT 基本上用于解析 xml。但是如果我有 html 数据，非常网格，并且我想在`<h1></h1>`标签下获取文本，那么将是什么代码。

如果有`<h1>`标签数量

```
$doc = new DOMDocument();

@$doc->loadHTML($this->siteHtmlData);

$aElements = $doc->getElementsByTagName("h1") 
```

请帮我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:19:35.793

您可以循环它以获取值：

```
foreach ($aElementsas as $node) {
    echo $node->nodeValue, PHP_EOL;
} 
```

# javascript - Angular.js 路由有问题

> ID：11136825
> 
> 赞同：3
> 
> 时间：2012-06-21T11:06:20.827
> 
> 标签：javascript, angularjs

下面是我的 app.js 和 controllers.js 文件的样子：

```
angular.module('RayAuth', ['RayAuth.filters', 'RayAuth.services', 'RayAuth.directives']).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.
      when('/', {
        templateUrl: 'partials/index.html',
        controller: IndexCtrl
      }).
      when('/users', {
        templateUrl: 'partials/users.html',
        controller: UserCtrl
      }).
      when('/controlpanel', {
        templateUrl: 'partials/controlpanel.html',
        controller: ControlCtrl
      }).
      when('/modules/', {
        templateUrl: 'partials/modules.html',
        controller: ModuleCtrl
      }).
      when('/resources/', {
        templateUrl: 'partials/resources.html',
        controller: ResourceCtrl
      }).
      when('/privileges/', {
        templateUrl: 'partials/privileges.html',
        controller: PrivilegeCtrl
      }).
      when('/roles/', {
        templateUrl: 'partials/roles.html',
        controller: RoleCtrl
      }).
      when('/userroles/', {
        templateUrl: 'partials/userroles.html',
        controller: UserRoleCtrl
      }).
      otherwise({
        redirectTo: '/'
      });
    $locationProvider.html5Mode(true);
  }]); 
```

这是我的controllers.js：

```
'use strict';

function IndexCtrl() {
    IndexCtrl.$inject = [];
}

function UserCtrl() {
    UserCtrl.$inject = [];
}

function ControlCtrl() {
    ControlCtrl.$inject = [];
}

function ModuleCtrl() {
    ModuleCtrl.$inject = [];
}

function ResourceCtrl() {
    ResourceCtrl.$inject = [];
}

function PrivilegeCtrl() {
    PrivilegeCtrl.$inject = [];
}

function RoleCtrl() {
    RoleCtrl.$inject = [];
}

function UserRoleCtrl() {
    UserRoleCtrl.$inject = [];
} 
```

我已将`ng-app`and添加`ng-view`到我的索引文件中，但是当我在浏览器中加载它时，它一直重定向到`http://localhost/`而不是`http://localhost/ray-auth/`我在这里做错了什么？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:23:28.920

尝试这个 ：

```
angular.module('RayAuth', ['RayAuth.filters', 'RayAuth.services', 'RayAuth.directives']).
  config(['$routeProvider', '$locationProvider', function($routeProvider, $locationProvider) {
    $routeProvider.
      when('/', {
        templateUrl: 'partials/index.html',
        controller: IndexCtrl
      }).
      when('/users', {
        templateUrl: 'partials/users.html',
        controller: UserCtrl
      }).
      when('/controlpanel', {
        templateUrl: 'partials/controlpanel.html',
        controller: ControlCtrl
      }).
      when('/modules/', {
        templateUrl: 'partials/modules.html',
        controller: ModuleCtrl
      }).
      when('/resources/', {
        templateUrl: 'partials/resources.html',
        controller: ResourceCtrl
      }).
      when('/privileges/', {
        templateUrl: 'partials/privileges.html',
        controller: PrivilegeCtrl
      }).
      when('/roles/', {
        templateUrl: 'partials/roles.html',
        controller: RoleCtrl
      }).
      when('/userroles/', {
        templateUrl: 'partials/userroles.html',
        controller: UserRoleCtrl
      });
    $locationProvider.html5Mode(true);
  }]); 
```

我已经删除了 else ，它实际上告诉它在所有其他情况下重定向到 '/' 。

另外，在旁注中，

```
function PrivilegeCtrl() {

}
PrivilegeCtrl.$inject = []; 
```

如上所示，注入应该在控制器外部完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:06:19.413

也许

```
<!doctype html>
<html lang="en" ng-app="RayAuth"> 
```

# javascript - 使用“赞”按钮在 Facebook 上传输自定义文本

> ID：11136830
> 
> 赞同：0
> 
> 时间：2012-06-21T11:06:35.067
> 
> 标签：javascript, facebook, facebook-opengraph

事情就是这样。
最近我尝试在我正在管理的某个网站上添加类似 FB 的按钮，这很容易，但现在我有一个不知道如何处理的请求。
问题是，当您喜欢某个网站时，您的 FB 墙上会发布一个指向该网站的链接（可能还有其他一些内容），默认情况下，我知道我可以更改它。

我需要的是，在我的页面上，我有一个（html）div，它以动态方式加载了一些重要数据，我需要在我的 FB 墙上发布该特定数据。

我尝试使用 javascript 并打开图形元标记，但在我看来，这些元标记无法动态更改。

如果有人知道如何做到这一点，我们非常欢迎提供反馈。

真诚的，米洛斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:23:56.633

不，您在技术上无法做到这一点。当您在 Facebook 上分享链接时，Facebook 服务器会访问分享时指定的 URL，收集 META 信息并显示这些信息。

但是，Javascript 在内容加载后在浏览器上运行，我认为 Facebook 服务器在获取 META 信息之前不会运行 javascript。

因此，即使您动态更改 Open graph 元标记，FB 仍然使用旧标记（在初始页面加载时设置）。

在将 HTML 发送到客户端之前，您应该想办法设置内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:15:29.110

我找到了解决这个问题的方法。这可以使用 iframe 集成 FB 按钮来完成。可以在[此处](http://developers.facebook.com/docs/guides/web/)找到您需要执行此操作的信息。它显示了类似 FB 的按钮，您可以添加您的网址，而不必弄乱元标记

# ruby-on-rails - ruby on rails 搜索困难

> ID：11136831
> 
> 赞同：0
> 
> 时间：2012-06-21T11:06:36.773
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我怎样才能在模型中首先搜索（我知道怎么做）。然后在这个数组中搜索更具体的？如你所见：

```
@articles = Article.find(:all, :conditions => { :ART_ID => @search.map(&:ARL_ART_ID)})
@a = @articles.find_all{|item| item.ART_ARTICLE_NR == search.upcase } 
```

首先我在模型中搜索，但由于我的数据库）它有很多错误的结果，所以我必须澄清我的数组。但是那里如何像 sql 一样搜索：

> 像 ％ ％

现在它的搜索非常强大：如果我搜索 AC451，它很好，但如果是 AC45 或 C451，它什么都没有。怎么说他这样前后

> 搜索

可能是一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:08:26.040

像这样，也许？

```
 item.ART_ARTICLE_NR.include?(search.upcase) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:18:01.107

您不遵循 Rails 命名约定和使用大写的列名是在自找麻烦。也就是说，rails3 的方法可能是：

```
@articles = Article.where(:ART_ID => @search.map(&:ARL_ART_ID)).where('ART_ARTICLE_NR LIKE', "%#{search.upcase}%") 
```

在不知道@search 是什么的情况下，很难确定。但是您应该阅读有关rails 3 查询格式的[活动记录指南。](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:13:48.797

这可能不是直截了当的答案，但是您是否考虑过使用[ransack](https://github.com/ernie/ransack) gem？

# java - 抽象或带注释的类改为接口为 MXBean

> ID：11136833
> 
> 赞同：0
> 
> 时间：2012-06-21T11:06:43.390
> 
> 标签：java, class, interface, jmx

有没有办法使用抽象类或带注释的类作为 MXBean 描述符？我有这样的界面：

```
@MXBean
public interface Peer {
    public String getName();
} 
```

并希望 MXBean 在类中与更多仅限本地的方法相结合，例如：

```
public class PeerCombinedMXBean {
    // Expose this as MXBean attribute
    public String getName() { ... }

    // This method is local-instance-oriented
    public boolean isValid() { ... }
} 
```

我需要像上面这样的模型来避免链式代理对象，而不是使用复杂的半代理实例，例如：

```
PeerCombinedMXBean peer = JMX.newMXBeanProxy(connection, name, PeerCombinedMXBean.class);
if (peer.isValid()) System.out.println(peer.getName()); 
```

* * *

## 编辑

这个问题与[java.net 文章](http://weblogs.java.net/blog/emcmanus/archive/2007/08/defining_mbeans.html)有关。他们有什么进展？我现在可以安全地使用带注释的 MBean 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:21:27.343

我最终为此做的是编写一个自定义注释，将其放置在方法或属性上。然后，我以这样一种方式实现了[DynamicMBean 接口](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html)：它解析出相关类的注释，然后将它们注册到 PlatformMBeanServer。据我所知，没有可用的公开实现，在我自己做之前，我也广泛搜索了这个主题。

例如，这是我希望从 JConsole 管理的类：

```
public class Foo
{
  // In JMX Console
  @Managed
  private boolean isBar;

  // Not in JMX Console
  private boolean isFoo;

  // In JMX Console
  @Managed
  public String getClassName()
  {
    return Foo.class.getName();
  }
} 
```

然后，当我的应用程序启动时，我使用我的[DynamicMBean](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/DynamicMBean.html)实现注册这个类的一个实例并解析出注释。

# jquery - Choppy fancybox 淡入内嵌内容

> ID：11136837
> 
> 赞同：0
> 
> 时间：2012-06-21T11:06:58.787
> 
> 标签：jquery, fancybox

我安装了一个 Fancybox 插件，我有一个 JS 部分

```
<script type="text/javascript">
    function openFancybox(name) {
      $.fancybox({
        'autoScale': true,
        'transitionIn': 'fade',
        'transitionOut': 'fade',
        'type': 'inline',
        'href': name,
        'scrolling'   : 'no',
        afterClose: function(){
            $('div.qtip:visible').qtip('hide');
      }
     });
    }

    function showDialog(dialogId, title, message) {
       $(dialogId + ' p').html(message);
       $(dialogId + ' h3').html(title);
       openFancybox(dialogId);
    }

    $(document).ready(function() {
        showDialog('#info-dialog', 'Logout.', 'You are now logged out.');
    });
</script> 
```

在 HTML 中我有

```
<div id="info-dialog" class="dialog-holder">
    <div class="dialog">
        <div class="dialog-content">
            <a href="#" class="close-button close">Close</a>
            <h3>Header.</h3>
            <p>Paragraph.</p>
            <a href="#" class="button large blue close">Close</a>
        </div>
    </div>
</div> 
```

问题是，当我加载页面时，弹出窗口正在工作，但它很不稳定：/ 当我关闭弹出窗口时淡出很流畅，但淡入很糟糕：/ 为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:38:51.557

Fancybox 目前不直接支持自动启动的方式。我能够开始工作的工作是创建一个隐藏的锚标记并触发它的 onclick 事件。确保在包含 jquery 和 fancybox js 文件之后包含触发 onclick 事件的调用。我使用的代码如下：

此示例脚本直接嵌入在 html 中，但也可以包含在 js 文件中。

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#hidden_link").fancybox().trigger('click');
    });
</script> 
```

来源：[如何在页面加载时启动 jQuery Fancybox？](https://stackoverflow.com/questions/807271/how-to-launch-jquery-fancybox-on-page-load).

试试这个，fancybox 会更流畅

# system - 记录特定进程每分钟的 CPU 使用率

> ID：11136838
> 
> 赞同：0
> 
> 时间：2012-06-21T11:07:08.337
> 
> 标签：system, cpu-usage, performance-testing

我想在记事本中记录任何特定进程的 CPU 使用情况、CPU 时间、VM 大小（不是全部）在特定时间之后，脚本需要更多时间，所以我有一段时间不方便阅读所有内容，请提出建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:19:42.120

如果您正在使用的系统是 Windows，请使用性能监视器。它有各种日志选项，并且会做你需要的。

性能监视器让您可以选择记录特定过程的性能数据。在“过程”下查看...

![在此处输入图像描述](../Images/5fcc866b4433e01b2c606e8a0f5a615a.png)

# c++ - 使用没有逻辑的删除

> ID：11136839
> 
> 赞同：0
> 
> 时间：2012-06-21T11:07:09.443
> 
> 标签：c++, linked-list, delete-operator

我有一个用于删除链表中元素的小代码片段。这是代码：

```
if (head->data ==  num) {
    delete head;
    head = head->next;
} 
```

您能否向我解释一下，为什么这段代码有效。它删除头部并将头部设置为下一个元素。

当我看到这个时，我认为这不起作用，但它有效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T11:07:42.353

这是未定义的行为，所以任何事情都可能发生，包括看起来有效。

当您调用 delete 时，您将内存释放回操作系统。无法保证任何内容都会被删除或清除。所以记忆*可以*和之前一样`delete`，但这只是偶然。访问它会导致未定义的行为。

一个适当的方法是：

```
if (head->data ==  num) {
    aux = head;
    head = head->next;
    delete aux;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:12:03.060

操作系统可以推迟内存段的失效。你看到删除微小的内存部分并不可靠，而且你可以只使用一个内存段，所以删除一次更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T07:10:36.353

从已删除或释放的内存中访问数据并非都是可取的。有时它可能会起作用，但行为是未定义的。

# php - 我可以在 PHP 中包含来自 zip 的文件吗？

> ID：11136840
> 
> 赞同：3
> 
> 时间：2012-06-21T11:07:11.407
> 
> 标签：php

我可以在 PHP 中包含来自 zip 文件的文件吗？例如，考虑我有一个 zip 文件 - test.zip 和 test.zip 包含一个名为 a.php 的文件。现在，我想做的是如下所示，

包括“test.zip/a.php”；

这可能吗？如果是，谁能给我一个代码片段？如果没有，是否还有其他替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:10:46.363

```
$zip = new ZipArchive('test.zip');

$tmp = tmpfile();
$metadata = stream_get_meta_data($tmp);

file_put_content($metadata['uri'], $zip->getFromName('a.php'));

include $metadata['uri']; 
```

更进一步，您可能对[PHAR](http://php.net/manual/en/book.phar.php)存档感兴趣，它基本上是一个 Zip 存档。

**编辑：**

使用缓存策略：

```
if (apc_exists('test_zip_a_php')) {
    $content = apc_fetch('test_zip_a_php');
} else {
    $zip = new ZipArchive('test.zip');
    $content = $zip->getFromName('a.php');
    apc_add('test_zip_a_php', $content);
}

$f = fopen('php://memory', 'w+');
fwrite($f, $content);
rewind($f);
// Note to use such include you need  `allow_url_include` directive sets to `On`
include('data://text/plain,'.stream_get_contents($f)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T11:18:06.427

大家确定吗？根据 phar 扩展，phar 是使用**流包装器**实现的，所以他们可以调用

```
include 'phar:///path/to/myphar.phar/file.php'; 
```

但也存在 zip 的流包装器，请参阅[此示例](http://php.net/manual/en/zip.examples.php#example-835)，它们在其中调用：

```
$reader->open('zip://' . dirname(__FILE__) . '/test.odt#meta.xml'); 
```

在 zip 文件中打开文件 meta.xml `test.odt`（odt 文件只是具有另一个扩展名的 zip 文件）。

同样在[另一个示例](http://de2.php.net/manual/en/ziparchive.getstream.php#example-854)中，他们通过流包装器直接打开一个 zip 文件：

```
$im = imagecreatefromgif('zip://' . dirname(__FILE__) . '/test_im.zip#pear_item.gif');
imagepng($im, 'a.png'); 
```

我不得不承认，我不知道它是如何直接工作的。

我会尝试打电话

```
include 'zip:///path/to/myarchive.zip#file.php'; 
```

与 phar 包装不同，拉链包装接缝需要锋利，但您也可以尝试使用斜线。但这也只是阅读文档的一个想法。

如果它不起作用，你当然可以使用 phars。

# printf - 如何实现函数作为 sprintf 使用 wchar 作为参数？

> ID：11136843
> 
> 赞同：0
> 
> 时间：2012-06-21T11:07:18.770
> 
> 标签：printf, wchar

我用过ANDROID NDK。所以我想格式化一些东西。只用sprintf，但我不能用它和wchar_t。对我有帮助吗？</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T03:11:54.900

In Android OS NDK versions before 5.0 ("Lollipop"), the sprintf() does not support the "%ls" (wchar_t pointer) format specifier. Thus, the following statement compiles but does not execute correctly under NDK (pre-5.0):

```
char buffer [1000];
wchar_t *wp = L"wide-char text";

sprintf (buffer, "My string is: %ls", wp); 
```

The workaround is to convert the wchar_t string to UTF-8 (which is a char *) using any one of the Open Source wide-to-utf8 implementations (e.g. [the UTF8-CPP project](http://utfcpp.sourceforge.net/)), passing its pointer to sprintf:

```
// WcharToUtf8: A cross-platform function I use for converting wchar_t string
//              to UTF-8, based on the UTF8-CPP Open Source project
bool WcharToUtf8 (std::string &dest, const wchar_t *src, size_t srcSize)
{
    bool ret = true;

    dest.clear ();

    size_t wideSize = sizeof (wchar_t);

    if (wideSize == 2)
    {
        utf8::utf16to8 (src, src + srcSize, back_inserter (dest));
    }
    else if (wideSize == 4)
    {
        utf8::utf32to8 (src, src + srcSize, back_inserter (dest));
    }
    else
    {
        // sizeof (wchar_t) is not 2 or 4 (does it equal one?)!  We didn't 
        // expect this and need to write code to handle the case.
        ret = false;
    }

    return ret;
}
...
char buffer [1000];
wchar_t wp = L"wide-char text";
std::string utf8;

WcharToUtf8 (utf8, wp, wcslen (wp));
sprintf (buffer, "My string is: %s", utf8.c_str ()); 
```

Starting with Android 5.0 ("Lollipop"), sprintf() supports the "%ls" format specifier, so the original sprintf() code above works correctly.

If your Android NDK code needs to run on all version of Android, you should wrap all your wchar_t pointers passed to sprintf with a macro like the following:

```
#define CONVERTFORANDROID(e) (GetSupportsSprintfWideChar () ? (void *) e : (void *) WcharToUtf8(e).c_str ())

char buffer [1000];
wchar_t *wp = L"wide-char text";

sprintf (buffer, "My string is: %ls", CONVERTFORANDROID(wp)); 
```

The GetSupportsSprintfWideChar() function should be a local function that returns true if the running Android OS is 5.0 or above, while returning false if the OS is pre-5.0.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:10:18.270

你可能想要[swprintf](http://linux.about.com/library/cmd/blcmdl3_wprintf.htm)和朋友，假设 Android 有它像 Posix 和 Linux 系统。

Glib（来自[GTK](http://gtk.org/)）具有[unicode 操作](http://developer.gnome.org/glib/stable/glib-Unicode-Manipulation.html)和[字符串实用程序](http://developer.gnome.org/glib/stable/glib-String-Utility-Functions.html)的功能。我相信您应该能够使其在Android上运行。

# c# - LINQ 中的 Context.SaveChanges()

> ID：11136854
> 
> 赞同：3
> 
> 时间：2012-06-21T11:08:14.383
> 
> 标签：c#, .net, linq

这是一个简单的问题，我想和各位专家确认一下！

我正在更改同一数据库中两个不同表中的一些值。可以只调用一次 SaveChanges 来更新所有内容吗？似乎有效，但我想知道它是否可以或需要在每次更新后调用 context.SaveChanges？

```
bool success = false;
TestSuiteDB context = new TestSuiteDB();

var workstyle1 = context.WorkStyle.Where(d => d.WorkStyleId==21 && d.MemberId==1).ToList();
foreach (var ws1 in workstyle1)
{
    ws1.ModuleId = flid1;
}

var workstyle2 = context.WorkStyle.Where(d => d.WorkStyleId == 22 && d.MemberId==1).ToList();
foreach (var ws2 in workstyle2)
{
    ws2.ModuleId = flid2;
}

var workstylemodules1 = context.WorkStyleModules.Where(d => d.WorkStyleModuleId == 2 && d.MemberId == 1).ToList();
foreach (var ws1 in workstylemodules1)
{
    ws1.ModuleId = flid1;
}

var workstylemodules2 = context.WorkStyleModules.Where(d => d.WorkStyleModuleId == 3 && d.MemberId == 1).ToList();
foreach (var ws2 in workstylemodules2)
{
    ws2.ModuleId = flid2;
}

if (context.SaveChanges() > 0)
{
    success = true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T11:09:39.703

您可以在所有更新后调用`Context.SaveChanges();` **一次**，它将保存之前所做的所有更改。

如果您希望更改/插入一个新对象，并希望根据数据库的实际值修改下一个对象，您可以调用`Context.SaveChanges()`以便更新数据库。

对实体的任何更改/插入都会在上下文中进行跟踪，一旦`SaveChanges`被调用，它也会将更改放入数据库中。

还要记住这一点：来自[MSDN](http://msdn.microsoft.com/en-us/library/bb336792.aspx)：

> SaveChanges 在事务中运行。如果任何脏 ObjectStateEntry 对象无法持久保存，SaveChanges 将回滚该事务并引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:19:29.900

我认为最好调用一次。如果你想获得一个块执行，你可能还需要一个[事务代码。](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:33:09.687

从技术上讲，无论哪种方式都是完全合法的。

**但是，**正如 Habib.OSU 已经说过的，可能还有更多的事情需要考虑，比如你要保存的实体之间的依赖关系。有几种策略来处理这个问题。

**而且，**如果您调用`SaveChanges()`每个循环迭代，这可能会导致**严重的性能问题**。

# java - 如何将我的应用程序与系统启动 (OS) 同步？

> ID：11136857
> 
> 赞同：1
> 
> 时间：2012-06-21T11:08:25.590
> 
> 标签：java, calendar

我的应用程序任务之一是获取当前系统日期并将其与我的数据库中存储的日期进行比较，我想创建一个在系统启动后运行的线程以获得当前日期，换句话说，我想要我的应用程序系统启动后在后台工作，如何做到这一点，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:20:07.143

看看[Apache Procrun](http://commons.apache.org/daemon/procrun.html)。它是一个 Windows 可执行文件，允许您将 java 程序作为 Windows 服务安装/卸载。

服务的安装如下（来自项目站点）：

```
prunsrv //IS//TestService --DisplayName="Test Service" \
    --Classpath=myAwesomeService.jar \
    --Install=prunsrv.exe --Jvm=auto --StartMode=jvm --StopMode=jvm \
    --StartClass=my.awesome.package.MyStartClass --StartParams=arg1;arg2;arg3 \
    --StopClass=my.awesome.package.MyStopClass --StopParams=arg1#arg2 
```

之后，您只需使用以下命令启动/停止服务：

```
net start TestService
net stop TestService 
```

或使用“我的电脑”中的“服务”视图。

您的启动/停止类应该`main(String[] args)`实现将处理启动/停止线程的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:16:05.197

创建一个 Windows 服务，在 Windows 服务中运行线程，并将服务的启动设置为自动将完成这项工作。

# android - Android google 搜索结果到 json ou xml

> ID：11136860
> 
> 赞同：0
> 
> 时间：2012-06-21T11:08:28.477
> 
> 标签：android, xml, json, search

我需要让谷歌搜索结果显示在我的 android 应用程序中。我怎样才能得到那个结果？

在这一刻，如果结果可以在 json 或 xml 中获得，对我来说很容易。

有人知道怎么做吗？谢谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:15:19.733

通过这个：

[http://code.google.com/p/gsearch-java-client/](http://code.google.com/p/gsearch-java-client/)

# css - Twitter 引导轮播

> ID：11136865
> 
> 赞同：3
> 
> 时间：2012-06-21T11:08:54.807
> 
> 标签：css, twitter-bootstrap

我在我的网页上实现了轮播如下

```
<div class="container-fluid">

            <div id="myCarousel" class="carousel slide">
                <!-- Carousel items -->
                <div class="carousel-inner">
                <div class="active item">
                    <img src="/public/images/Lighthouse.jpg">
                </div>
                <div class="item">
                    <img src="/public/images/Lighthouse.jpg">
                </div>
                <div class="item">
                    <img src="/public/images/Lighthouse.jpg">
                </div>
                </div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div><!--End of Carousel--> 
```

我希望它保持响应，目前是这样，图片会随着屏幕变小而调整。然而，轮播填充了整个页面（宽度），我想让它变小并让它位于页面的中心。我已经为 .carousel 指定了一个宽度，但这似乎会影响响应能力。

有谁知道如何定制这个插件或过去做过这个

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:54:07.883

媒体查询解决了这个问题，因为我给了轮播一个宽度

```
@media (max-width:600px) {
  .carousel {
  width: 100%;
  }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-10T14:02:48.860

在何处以及如何添加此`@media (max-width:600px) { .carousel { width: 100%; } }`指令

# iphone - 将图像保存在 ios 应用程序中

> ID：11136871
> 
> 赞同：2
> 
> 时间：2012-06-21T11:09:19.830
> 
> 标签：iphone

我正在创建一个贺卡应用程序。我有一些现有的模板，我还可以通过添加剪贴画、文本样式等来创建新的贺卡。我已将图像保存为 uiimage 对象。我坚持保存这些图像以备将来使用使用。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:19:34.913

要将 UIImage 保存到文件，请执行以下操作

```
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/img.jpg"];

//Save
NSData* imageData = UIImageJPEGRepresentation(img, 1.0);
[imageData writeToFile:path atomically:YES];

//Load
NSData* imageData = [NSData dataWithContentsOfFile:path];
UIImage *image = [UIImage imageWithData:imageData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:17:54.430

看看这个链接。 [如何将图片保存到 iPhone 照片库？](https://stackoverflow.com/questions/178915/how-to-save-picture-to-iphone-photo-library)

您还可以通过将图像转换为数据并将数据保存到文件来将图像保存在 iPhone 文件系统中。

```
NSData *data = UIImagePNGRepresentation(yourImage);
[data writeToFile:(NSString *)path atomically:(BOOL)useAuxiliaryFile] 
```

# button - Eclipse Rap 没有关注一个按钮

> ID：11136872
> 
> 赞同：0
> 
> 时间：2012-06-21T11:09:20.063
> 
> 标签：button, focus, swt, eclipse-rap

我对 Eclipse Rap 上的可聚焦按钮有疑问。我已经定义了一些带有一些 CSS 样式的 Toogle 按钮，当你的鼠标悬停在它上面时，它被选中，当它没有被选中时。问题是按钮的焦点使它看起来很奇怪。

我努力了

```
btnAnimals = new Button(panel, SWT.TOGGLE | SWT.NO_FOCUS); 
```

没有出口。最后我决定为按钮实现一个 FocusAdapter：

```
FocusListener focusListener = new FocusAdapter() {
        @Override
        public void focusGained(FocusEvent event) {
            txtStreet.setFocus();
        }
    };
    btnAnimals.addFocusListener(focusListener); 
```

这个监听器只被称为 ONCE 的奇怪问题。你知道我做错了什么吗？它是一个错误吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:42:20.127

在 Eclipse Rap 论坛中询问后，他们给了我正确的答案，那就是使用 RWT 主题：

```
Button-FocusIndicator {
   border: none;
} 
```

希望有帮助；）

# android - ExpandableList 中 GroupView 中的复选框

> ID：11136877
> 
> 赞同：0
> 
> 时间：2012-06-21T11:09:31.517
> 
> 标签：android, checkbox

**我的场景：**

我在可扩展列表的 groupView 和 childView 中有一个列表。GroupView 和 ChildView 有复选框。我设置复选框没有问题。当 GroupView 中的复选框被选中时，我想检查 ChilView 的所有复选框。

我经历了这两个解决方案：

[Android ExpandableListView CheckBox Select Only Clicked CheckBox](https://stackoverflow.com/questions/8420168/android-expandablelistview-checkbox-select-only-clicked-checkbox)

和

[选中 ExpandableListView (Android) 中的所有复选框](https://stackoverflow.com/questions/7215243/check-all-checkbox-in-expandablelistview-android)

我选中 groupPosition 2 中的复选框，然后自动选中 groupPosition 5 中的复选框。再次，当我选中 groupPosition 1 中的复选框时，say groupPosition 6 中的复选框会自动被选中。我已经在哈希图中保存了复选框的状态。任何人都可以解释为什么会这样。

我的 childrenView 代码如下

```
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    final ChildHolder holder;
    if (convertView == null) {
        convertView = layoutInflater.inflate(R.layout.group_item, null);
        holder = new ChildHolder();
        holder.cb = (CheckBox) convertView.findViewById(R.id.cb);
        holder.title = (TextView) convertView.findViewById(R.id.title);
        convertView.setTag(holder);
    } else {
        holder = (ChildHolder) convertView.getTag();
    }

    Item item = getChild(groupPosition, childPosition);
    holder.title.setText(item.name);
    if (DataHolder.selectedGroupMembers.containsKey(groupPosition) == true)
        holder.cb.setChecked(true);
    else {
        holder.cb.setChecked(false);
    }
    return convertView;
} 
```

我的 groupView 代码如下

```
public View getGroupView(final int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

    final GroupHolder holder;

    if (convertView == null) {
        convertView = layoutInflater.inflate(R.layout.group_list, null);
        holder = new GroupHolder();
        holder.cb = (CheckBox) convertView.findViewById(R.id.cb);
        holder.imageView = (ImageView) convertView
                .findViewById(R.id.label_indicator);
        holder.title = (TextView) convertView.findViewById(R.id.title);
        convertView.setTag(holder);
    } else {
        holder = (GroupHolder) convertView.getTag();
    }

    holder.imageView
            .setImageResource(groupStatus[groupPosition] == 0 ? R.drawable.group_down
                    : R.drawable.group_up);
    Item groupItem = getGroup(groupPosition);

    holder.title.setText(groupItem.name);

    if (DataHolder.selectedGroupMembers.containsKey(groupPosition) == true) {
        holder.cb.setChecked(true);

    } else {
        holder.cb.setChecked(false);

    }

    holder.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked == true) {
                DataHolder.selectedGroupMembers.put(groupPosition,
                        new Boolean(true));
                Log.i("Prativa Clicked", "group" + groupPosition);
                notifyDataSetChanged();

            } else if (DataHolder.selectedGroupMembers
                    .containsKey(groupPosition)) {
                DataHolder.selectedGroupMembers.remove(groupPosition);
                Log.i("Prativa Removed ", "group" + groupPosition);
                notifyDataSetChanged();
            }
        }

    });

    return convertView;
} 
```

我保存了哈希映射的状态如下

```
 public static HashMap<Integer,Boolean> selectedGroupMembers =     new HashMap<Integer, Boolean>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T06:05:04.950

因此，我找到了解决方案。完整的解决方案作为最终编辑集成在问题本身中

# scala - 没有特征的Scala JMX

> ID：11136885
> 
> 赞同：2
> 
> 时间：2012-06-21T11:10:09.237
> 
> 标签：scala, jmx

我在我们的 Scala 应用程序中添加了一些工具，并遇到了一个问题：当以标准的 OO 方式使用 JMX 时，将 MBean 声明为特征，并让我的类实现这个 bean，一切正常。但是，我的目标是尝试将我的类注释为 bean（MBean 或 MXBean），而不必编写接口。这样做的原因是我想说的话

```
val foo = new Counter with JMX... 
```

其中 JMX 是将 foo 注册为我的类的属性的特征。

这可能吗？JMX 验证器正在寻找一个具有接口的类并抱怨如果我不创建一个，有没有办法在运行时添加某种形式的它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T21:10:24.567

JMX 接口和类的并行层次结构是可能的。例如，如果您有几个具有公共方法的 JMX MBean，那么您可以有一个带有公共抽象方法的基本接口，然后是您可以混合到 MBean 中的部分实现。这会解决你的问题吗？我做过一次，只是有点棘手。您只需要严格遵守同一包规则中的匹配名称。

# mysql - 我可以在 MySQL 中进行可选的 LEFT JOIN 吗？

> ID：11136887
> 
> 赞同：3
> 
> 时间：2012-06-21T11:10:19.300
> 
> 标签：mysql, stored-procedures, left-join

我正在从数据库表中选择产品。目前查询是从 Coldfusion 启动的，我有一个“可选的 LEFT JOIN”，如下所示：

```
SELECT a.products
FROM artikelstammdaten a
  <cfif modul_aktiv("preorder", my_module) IS "true">
     LEFT JOIN...
  </cfif>
WHERE ... 
```

**问题：**
是否可以在 MySQL 中进行可选的 LEFT JOIN。我在想这样的事情：

```
SELECT a.products
FROM artikelstammdaten a
    AND ( 
        ((param_preorder = 'false') "(1=2)" )
          OR LEFT JOIN ...  
        )
WHERE ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:20:16.093

好吧，你可以这样做：

```
SELECT a.products
FROM artikelstammdaten a
LEFT JOIN [another_table] ON [your parameterized condition] AND [the real join condition]
(...) 
```

无论您的条件是什么，LEFT JOIN 都会完成，但如果它是假的，它不会带回任何记录。

但是你当然不能`cfif`在纯 SQL 中模拟 :)

# wpf - 在 Expression Blend 4 中编辑buttonspinner（扩展 WPF 工具包）的问题

> ID：11136891
> 
> 赞同：5
> 
> 时间：2012-06-21T11:10:25.533
> 
> 标签：wpf, expression-blend-4

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
x:Class="MPS.Window1"
x:Name="Window"
Title="Window1"
Width="640" Height="480">
<Window.Resources>
    <ControlTemplate x:Key="bs" TargetType="{x:Type xctk:ButtonSpinner}">
        <Grid SnapsToDevicePixels="True">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2"/>
            <ContentPresenter Content="{TemplateBinding Content}" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            <Grid Grid.Column="1" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.Visibility>
                    <TemplateBinding Property="ShowButtonSpinner">
                        <TemplateBinding.Converter>
                            <BooleanToVisibilityConverter/>
                        </TemplateBinding.Converter>
                    </TemplateBinding>
                </Grid.Visibility>
                <RepeatButton x:Name="PART_IncreaseButton" IsTabStop="{TemplateBinding IsTabStop}" Style="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}">
                    <RepeatButton.ContentTemplate>
                        <DataTemplate>
                            <Path Data="M0,3C0,3 0,4 0,4 0,4 3,4 3,4 3,4 3,3 3,3 3,3 4,3 4,3 4,3 4,4 4,4 4,4 7,4 7,4 7,4 7,3 7,3 7,3 6,3 6,3 6,3 6,2 6,2 6,2 5,2 5,2 5,2 5,1 5,1 5,1 4,1 4,1 4,1 4,0 4,0 4,0 3,0 3,0 3,0 3,1 3,1 3,1 2,1 2,1 2,1 2,2 2,2 2,2 1,2 1,2 1,2 1,3 1,3 1,3 0,3 0,3z" Focusable="False" Fill="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}" HorizontalAlignment="Center" Height="4" SnapsToDevicePixels="True" VerticalAlignment="Center" Width="7"/>
                        </DataTemplate>
                    </RepeatButton.ContentTemplate>
                </RepeatButton>
                <RepeatButton x:Name="PART_DecreaseButton" IsTabStop="{TemplateBinding IsTabStop}" Grid.Row="1" Style="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}">
                    <RepeatButton.ContentTemplate>
                        <DataTemplate>
                            <Path Data="M0,1C0,1 0,0 0,0 0,0 3,0 3,0 3,0 3,1 3,1 3,1 4,1 4,1 4,1 4,0 4,0 4,0 7,0 7,0 7,0 7,1 7,1 7,1 6,1 6,1 6,1 6,2 6,2 6,2 5,2 5,2 5,2 5,3 5,3 5,3 4,3 4,3 4,3 4,4 4,4 4,4 3,4 3,4 3,4 3,3 3,3 3,3 2,3 2,3 2,3 2,2 2,2 2,2 1,2 1,2 1,2 1,1 1,1 1,1 0,1 0,1z" Focusable="False" Fill="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}" HorizontalAlignment="Center" Height="4" SnapsToDevicePixels="True" VerticalAlignment="Center" Width="7"/>
                        </DataTemplate>
                    </RepeatButton.ContentTemplate>
                </RepeatButton>
            </Grid>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Background" Value="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}"/>
            </Trigger>
            <Trigger Property="IsEnabled" SourceName="PART_IncreaseButton" Value="False">
                <Setter Property="ContentTemplate" TargetName="PART_IncreaseButton">
                    <Setter.Value>
                        <DataTemplate>
                            <Path Data="M0,3C0,3 0,4 0,4 0,4 3,4 3,4 3,4 3,3 3,3 3,3 4,3 4,3 4,3 4,4 4,4 4,4 7,4 7,4 7,4 7,3 7,3 7,3 6,3 6,3 6,3 6,2 6,2 6,2 5,2 5,2 5,2 5,1 5,1 5,1 4,1 4,1 4,1 4,0 4,0 4,0 3,0 3,0 3,0 3,1 3,1 3,1 2,1 2,1 2,1 2,2 2,2 2,2 1,2 1,2 1,2 1,3 1,3 1,3 0,3 0,3z" Focusable="False" Fill="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}" HorizontalAlignment="Center" Height="4" SnapsToDevicePixels="True" VerticalAlignment="Center" Width="7"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="IsEnabled" SourceName="PART_DecreaseButton" Value="False">
                <Setter Property="ContentTemplate" TargetName="PART_DecreaseButton">
                    <Setter.Value>
                        <DataTemplate>
                            <Path Data="M0,1C0,1 0,0 0,0 0,0 3,0 3,0 3,0 3,1 3,1 3,1 4,1 4,1 4,1 4,0 4,0 4,0 7,0 7,0 7,0 7,1 7,1 7,1 6,1 6,1 6,1 6,2 6,2 6,2 5,2 5,2 5,2 5,3 5,3 5,3 4,3 4,3 4,3 4,4 4,4 4,4 3,4 3,4 3,4 3,3 3,3 3,3 2,3 2,3 2,3 2,2 2,2 2,2 1,2 1,2 1,2 1,1 1,1 1,1 0,1 0,1z" Focusable="False" Fill="{DynamicResource Xceed.Wpf.Toolkit.Themes.StaticResourceKey}" HorizontalAlignment="Center" Height="4" SnapsToDevicePixels="True" VerticalAlignment="Center" Width="7"/>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Window.Resources>

<Grid x:Name="LayoutRoot">
    <xctk:ButtonSpinner Height="65" Margin="164,54,268,0" VerticalAlignment="Top" Template="{DynamicResource bs}"/>
</Grid> 
```

当我尝试在表达式混合 4 中编辑按钮微调器时。它抛出了一个异常，例如“typeconverter cannot convert from system.string”。我只是搞砸了，我不知道如何解决这个问题。我该怎么做。

# android - 从另一个活动返回时，为什么我的主要活动黑屏/隐藏？

> ID：11136893
> 
> 赞同：3
> 
> 时间：2012-06-21T11:10:32.043
> 
> 标签：android, android-intent, custom-component, start-activity

我的应用程序使用 ES 文件资源管理器使用 com.estrongs.action.PICK_FILE 意图加载/保存文件。它进入浏览器可以完成它的工作并返回结果，但在返回主要活动时，主要活动不可见。它是专注的。当您按下编辑文本（隐藏）时，我可以使用投掷手势并打开键盘。OnActivityResult() 被调用并且处理得很好。我的 onResume、OnStop 等中没有任何代码。我在下面添加了 logcat，但您可以看到它并没有真正显示任何内容。

我不知道是否值得一提，但我也使用 SherlockActionBar。

最后，这是有趣的一点。我的活动有一个标签主机，基本上有 2 个主要视图。1 是 ListView，1 是使用 OnDraw() 的自定义视图。如果我加载一个必须在列表视图上显示的文件，一切正常。如果我为自定义视图加载文件，它将被隐藏。

请问我的致命缺陷在哪里？

意图是这样开始的

```
intent = new Intent("com.estrongs.action.PICK_FILE");
        intent.putExtra("com.estrongs.intent.extra.TITLE", "Open");
        goingtobrowser = true;
        startActivityForResult(intent, REQUEST_CODE_PICK_FILE_OR_DIRECTORY); 
```

OnActivityResult() 是这样的

```
if (resultCode == RESULT_OK && data != null) {
            // obtain the filename
            if (D)
                Log.e(TAG, "++ Coming back from Browser ++");
            Uri fileUri = data.getData();
            if (fileUri != null) {
                String filePath = fileUri.getPath();
                if (filePath != null) {
                    //do something with the path
                }
            }
        }

    06-21 11:16:15.421: E/BTUI(12000): ++ ON START ++
    06-21 11:16:15.421: D/BTUI(12000): ++ ON RESUME ++
    06-21 11:16:15.571: W/KeyCharacterMap(12000): No keyboard for id -1
    06-21 11:16:15.571: W/KeyCharacterMap(12000): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    06-21 11:16:15.801: D/dalvikvm(12000): GC_EXTERNAL_ALLOC freed 435K, 41% free 4138K/6983K, external 3976K/4039K, paused 29ms
    06-21 11:16:15.841: D/dalvikvm(12000): GC_EXTERNAL_ALLOC freed 33K, 42% free 4105K/6983K, external 4000K/4885K, paused 27ms
    06-21 11:16:19.121: E/BTUI(12000): ++ Going to Browser ++
    06-21 11:16:19.171: D/BTUI(12000): ++ ON onSaveInstanceState ++
    06-21 11:16:19.171: D/BTUI(12000): ++ ON PAUSE ++
    06-21 11:16:19.611: D/BTUI(12000): ++ ON STOP ++
    06-21 11:16:35.801: D/BTUI(12000): onActivityResult -1
    06-21 11:16:41.351: E/BTUI(12000): ++ Coming back from Browser ++
    06-21 11:16:42.481: E/BTUI(12000): ++ ON START ++
    06-21 11:16:42.481: D/BTUI(12000): ++ ON RESUME ++
    06-21 11:17:07.751: I/System.out(12000):  in onFling() :: 
```

**编辑在第一次查看更多内容后，调用自定义视图的 onDraw()，因此我在主要活动 onResume() 中放置了 customview.invalidate()。因此，当从第二个活动返回时，应该调用它并且视图无效并调用 onDraw()。它不是！我想这就是问题所在。请给点思路？？

**编辑我可以摆脱黑屏的唯一方法是使整个主屏幕无效

```
ViewGroup vg = (ViewGroup) findViewById (R.id.main);
    vg.invalidate(); 
```

在 onResume() 中。

但这对我来说不够合适，因为我需要从其他线程调用 view .invalidate() 或 view.postinvalidate() 并且这不会调用 customview.onDraw() 并且这些调用屏幕保持空白。任何人？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T07:54:35.047

我想我会回答我自己的问题，也许有人可以比我更好地解释它。该问题似乎与从另一个活动返回时的视图表面回调有关。我只设法通过使用 setContentView() 来修复它。我上面提到的 mainViewGroup.invalidate() 不起作用。然后我注意到 view.invalidate() 对我来说不够用，所以我把它切换到了表面视图。这暴露了回调问题。

如果我在surfaceDestroyed() 中删除了surfaceholder 的视图回调它工作正常，主返回正常。但是在 onResume() 中动态重新附加回调不起作用。表面视图未重新附加。所以我仍然必须做一个 setContentView() 来重置东西。这可行，但我想听听“更清洁”的解决方案。感谢您的关注。

# javascript - 用 jquery 处理图像替换 asp:imagebutton

> ID：11136894
> 
> 赞同：0
> 
> 时间：2012-06-21T11:10:41.513
> 
> 标签：javascript, jquery, asp.net, aspbutton

所以我有一个 asp:imagebutton 让我们说登录到一个网站。

OnClick 页面执行 xyz 然后重定向您，从单击按钮开始重定向之间有一个暂停时间。为了让等待对用户更加友好，我将按钮替换为处理图像和文本，执行此操作的 javascript 是：

```
$(document).ready(function () {
    $(".ShowProcessing").click(function () {
        $(this).replaceWith("<img src='/content/images/processing.gif' /> Processing");
    });
}); 
```

这是按钮：

```
<asp:ImageButton ID="Login" runat="server" OnClick="Login_Click" CssClass="ShowProcessing" /> 
```

问题是处理图像发生了变化，但是 asp OnClick 事件没有触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:21:46.527

而不是使用`.replace()`尝试并成功：

```
$(".ShowProcessing").click(function () { 
    $(this).hide(); 
    $(this).after("<img src='/content/images/processing.gif' /> Please wait..." ) 

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:15:27.973

而不是用其他东西完全替换整个元素，只需改变`src`当前元素的：

```
$(".ShowProcessing").click(function () {
    $(this).attr("src", "/content/images/processing.gif");
}); 
```

这是*如果* `ImageButton`被渲染为`img`适当的，某处，而不仅仅是一些时髦`input`的脚本（我不记得我的头顶，网络表单以奇怪的方式做一些事情）。然后根据需要继续在现有元素*之后插入文本。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T11:17:24.320

我想您可能会尝试删除第一个图像，然后添加新的处理图像。

而不是替换使用（删除然后添加）功能。

# iphone - 关闭两个模态（表格）视图控制器

> ID：11136903
> 
> 赞同：4
> 
> 时间：2012-06-21T11:11:25.790
> 
> 标签：iphone, ios, xcode, storyboard, modalviewcontroller

我知道这里有 3-5 个类似的问题，但没有一个答案能解决我的问题。

我有一个 ViewController 打开一个模态（表）视图控制器，它打开另一个。两个模态视图控制器实际上都是表视图控制器。我正试图从第二个中解雇他们两个。我尝试了类似问题的所有公认答案，但没有一个对我有用。

我试过

```
[self dismissModalViewControllerAnimated:true]

[self.parentViewController dismissModalViewControllerAnimated:true]
[self.parentViewController.parentViewController dismissModalViewControllerAnimated:true]

[self.presentingViewController dismissModalViewControllerAnimated:true]
[self.presentingViewController.presentingViewController dismissModalViewControllerAnimated:true] 
```

当我尝试选项 2、3 和 5 时，什么都没有发生。当我使用选项 1 和 4 时，我看到关闭模态视图动画和底层视图本身，然后一切都回到第二个模态视图（这次没有动画）。

我开始认为这与我将 tableViewControllers 用于模态视图这一事实有关。

顺便说一句，我正在取消 didSelectRowAtIndexPath 中的模态视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:29:06.867

试试这个：-

当您关闭您在应用程序委托文件中`SecondView`设置的`BOOL`标志变量并在您`FirstView`的`viewWillAppear`方法中检查该变量时 SecondView 是否打开和关闭。如果是这样，那么 `[self dismissModalViewControllerAnimated:true]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:52:09.490

典型的模型视图控制器行为会建议您从调用视图控制器而不是 self.dismiss 模式视图控制器。不是硬性规定，而是良好的做法。

为此，请创建一个协议：

```
 @protocol MyModalViewControllerDelegate
    - (void)modalViewControllerDidFinish;
    @end 
```

并使 parentViewController 和 FirstModalViewController 成为该协议的实现者。

```
 @interface FirstModalViewController <MyModalViewControllerDelegate> 
```

然后在 FirstModalViewController.h 和 SecondModalViewController.h 中，添加：

```
 @property id<MyModalViewControllerDelegate> modalViewControllerDelegate 
```

在 parentViewController 和 FirstModalViewController 中，在调用 presentModalViewController:... 之前，设置以下内容：

```
 modalViewControllerAboutToAppear.modalViewControllerDelegate = self;
    [self presentModalViewController:modalViewControllerAboutToAppear animated:YES]; 
```

接下来，在 SecondModalViewController 中，在您确定需要关闭项目的代码中，调用

```
 [self.modalViewControllerDelegate modalViewControllerDidFinish]; 
```

现在，在 FirstModalViewController 中，实现以下内容：

```
 - (void)modalViewControllerDidFinish:(MyModalViewController*)controller {
        [self dismissModalViewControllerAnimated:YES]
        [self.modalViewControllerDelegate modalViewControllerDidFinish];
    } 
```

最后，在父视图控制器中，您应该能够执行：

```
 - (void)modalViewControllerDidFinish:(MyModalViewController*)controller {
        [self dismissModalViewControllerAnimated:YES]
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T08:55:05.187

由于我不使用委托文件，因此我执行了以下操作：

添加`FirstView`字段

```
BOOL mClose; 
```

添加`FirstView`方法

```
- (void)close
{
    mClose = YES;
} 
```

`FirstView`方法`viewDidAppear`添加_

```
if (mClose)
{
    [self dismissModalViewControllerAnimated:YES];
} 
```

到`FirstView`打开`SecondView`添加的方法

```
[secondView closeWhenDone:self]; 
```

添加`SecondView`字段

```
FirstView *mParent; 
```

添加`SecondView`方法

```
- (void)closeWhenDone:(FirstView*)parent
{
    mParent = parent;
} 
```

关闭`SecondView`它的方法添加

```
[mParent close]; 
```

# logging - 从 Heroku Cedar Stack 获取详细的 SQL 日志

> ID：11136905
> 
> 赞同：1
> 
> 时间：2012-06-21T11:11:43.150
> 
> 标签：logging, heroku

为了从 heroku cedar 中获取详细的 SQL 日志，究竟需要做什么？

在我们的开发平台上，日志跟踪为我们提供了很多信息，包括在由 activerecord 执行的 SQL 中的现场信息。在生产中，信息的详细程度要低得多。

运行时我需要做什么才能获取此 SQL 信息

```
heroku logs --tail 
```

是否有我需要发送到 heroku 的设置或需要放入我的 rails 代码的设置？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T12:43:43.157

Heroku 的 Logplex 包含来自您的应用程序的所有日志记录语句 - 没有任何类型的过滤。

默认情况下，Rails 不会在生产环境中记录 SQL 语句，因此您需要将日志级别提高`production.rb`到更合适的级别。

[http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels](http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels)

# apache - 禁用 apache 上的目录列表；但应允许访问单个文件

> ID：11136913
> 
> 赞同：22
> 
> 时间：2012-06-21T11:12:11.997
> 
> 标签：apache, virtualhost, virtual-hosts

我不想使用 .htaccess。我应该如何更改我的目录属性？

```
<VirtualHost *:80>
   ServerName abc.com
   DocumentRoot /usr/share/uploads
   <Directory " /usr/share/uploads">
      Order allow,deny
      Allow from all
   </Directory>
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-06T22:49:52.390

如果您使用的是 Debian/Ubuntu，只需转到终端并输入

```
sudo a2dismod autoindex
sudo service apache2 restart 
```

如果您使用的是 Centos/Fedora，只需执行以下操作：

```
mv /etc/httpd/conf.d/autoindex.conf /etc/httpd/conf.d/autoindex.bkp
/etc/init.d/httpd restart 
```

同样在其他操作系统或发行版中......

这应该禁用使那些花哨（通常无用和安全问题）目录列表的 apache 模块。此外，作为奖励，您可以获得一些表现:-)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-22T04:22:56.810

我真的无法在互联网上找到直接答案；甚至在 apache 文档上。最后，可以通过几次迭代找到解决方案；我们需要使用选项，并且该值不应包含索引。

```
<Directory "/usr/share/uploads">
        Options Includes FollowSymLinks MultiViews
        AllowOverride None
         Order allow,deny
      Allow from all
   </Directory> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-14T12:09:43.237

@Deepak 解决方案对我不起作用。这个做了：

在主 apace 配置***/etc/apache2/httpd.conf***中添加：

```
<Directory />
        Options FollowSymLinks
        AllowOverride All
</Directory> 
```

它适用于所有域和子域。没有 .htaccess 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-06T05:46:46.073

以上都完成了，但是目录信息还在出现吗？如果您使用 index.php，而不是 index.html，请检查以下内容：

```
<IfModule dir_module>
    DirectoryIndex index.php
</IfModule> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-16T10:16:09.853

在我的 AWS ec2 上，我这样做了，它对我有用。

首先打开 /etc/httpd/conf/httpd.conf 文件。

修改/添加

```
<Directory /var/www/html>
   Options Indexes FollowSymLinks
   AllowOverride All
   Require all granted
</Directory> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-21T11:17:34.570

最简单的方法是在该目录中放置一个空的 index.html（或您的 apache 配置为默认提供的任何内容）。这不是一个真正的解决方案，而是一个非常简单的解决方法。浏览该目录的用户只会看到一个空白页。

此外，您可以使用模拟目录列表并仅显示一些特殊文件的脚本（如 index.php）。

# jquery - jquery链接不起作用

> ID：11136914
> 
> 赞同：0
> 
> 时间：2012-06-21T11:12:12.687
> 
> 标签：jquery

在提交主要报价单之前，我有以下代码来插入多个产品和价格。

```
$(document).ready(function(){

    var counter = 2;

    $("#addButton").click(function () {

    if(counter>10){
            alert("Only 10 textboxes allow");
            return false;
    }   

    var newTextBoxDiv = $(document.createElement('div'))
         .attr("id", 'TextBoxDiv' + counter);

    newTextBoxDiv.after().html('<br>' + '<label>Product '+ counter + '  </label>' +
          '<input type="text" name="product" id="product" value="" >' + 
          '<label>Price '+ counter + '  </label>' +
          '<input type="text" name="price" id="price"  value="" >'+ '<a href="#" id="save" >Save!</a>');

    newTextBoxDiv.appendTo("#TextBoxesGroup");

    counter++;
     });

     $("#removeButton").click(function () {
    if(counter==1){
          alert("No more textbox to remove");
          return false;
       }   
    counter--;
        $("#TextBoxDiv" + counter).remove();
     });

     $("#getButtonValue").click(function () {

    var msg = '';
    for(i=1; i<counter; i++){
      msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
    }
          alert(msg);
    });

    $("#save").click(function() {

        if(!$("#product").val() || !$("#price").val() ){
            apprise("You must define a product and price!");
            }else{
            var product = $("#product").val();
            var price = $("#price").val();
            var postdata = 'product='+product+'&price='+price;

            $.ajax({  
                type: "POST",  
                url: "inserter/add_quotation_product.php",  
                data: postdata, 
                success: function() {  
                    $('#TextBoxesGroup').html("<div id='message'></div>");  
                    $('#message').html(product+" Saved!");  
                }  
            });  
            return false;  

        } 
```

主要的html代码：

```
<div id='TextBoxesGroup'> 
    <div id="TextBoxDiv1"> 
        <label>Product 1 </label> 
        <input type=text 
                id="product" 
                name="product" 
                placeholder="product to quote" 
                required/> 
        <label>Price 1</label> 
        <input id="price" 
                name="price" 
                type=text 
                placeholder="price of product" 
                required> 
            <a href="#" id="save" >Save!</a> 
    </div> 
</div> 
```

问题是单击手动创建的保存按钮效果很好，但单击 jquery 创建的保存按钮似乎完全无效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:25:21.907

保存链接的点击事件已经绑定。添加新产品时，您会创建一个不附加事件的新保存链接。

您不能拥有具有相同 ID 的多个元素链接，因此我会为保存链接分配一个类。它必须在主 html 代码和创建链接的 javascript 代码中。

```
<a href="#" class="save">Save!</a> 
```

使用 jquery 对象的 live 方法也可以将事件绑定到“未来”事件。[http://api.jquery.com/live/](http://api.jquery.com/live/)

```
$(".save").live("click", function() {
}); 
```

取决于您必须使用的 jquery 版本：http: [//api.jquery.com/on](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:14:49.097

您应该使用`.on()`方法将点击处理程序委托给您的新按钮（而不是不推荐使用的`.live()`方法）。

[http://api.jquery.com/on](http://api.jquery.com/on)

喜欢：

```
$("#yourButtonParent").on('click', '#yourButton', function () {

    // code here

}); 
```

# java - XOM 和 getChildElements

> ID：11136916
> 
> 赞同：0
> 
> 时间：2012-06-21T11:12:21.593
> 
> 标签：java, xml, xom

我将这段 Java 与 XOM 库一起使用来解析站点地图。

```
Element root = doc.getRootElement();
Elements urls = root.getChildElements("url"); 
```

当我调试时，我可以看到它`root`有一大堆子元素，包括`url`元素和文本元素。但是，`root.getChildElements("url")`返回一个空列表。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T11:16:58.220

我刚刚意识到我正在解析的站点地图使用默认命名空间，即“http://www.sitemaps.org/schemas/sitemap/0.9”。

更改代码以`root.getChildElements("url", "http://www.sitemaps.org/schemas/sitemap/0.9")`给我正确的结果。

# garbage-collection - SpiderMonkey 垃圾收集器

> ID：11136919
> 
> 赞同：0
> 
> 时间：2012-06-21T11:12:39.767
> 
> 标签：garbage-collection, spidermonkey

如果 SM 的 GC 是一个保守的堆栈扫描器，为什么[示例 3](https://developer.mozilla.org/en/SpiderMonkey_Garbage_Collection_Tips) “不好”？为什么需要“root as you go”？GC 应该扫描堆栈并观察 str1、str2 是根，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:13:06.557

你需要弄清楚你的时间线。

*   [SpiderMonkey 1.8.5 中引入了](https://developer.mozilla.org/en-US/docs/SpiderMonkey/1.8.5#Garbage_Collection)保守的堆栈扫描器。
*   上面链接的文档还提到 2011 年 3 月 22 日是 SpiderMonkey 1.8.5 的发布日期。
*   您链接到的文档[自 2008 年 8 月以来未编辑](https://developer.mozilla.org/en-US/docs/SpiderMonkey_Garbage_Collection_Tips%24history)。

换句话说：您发现了一段非常过时的文档。确实，底部的标签说：`NeedsEditorialReview`, `NeedsTechnicalReview`。不是你应该依赖的东西。

# android - 仅向一项服务发送意图

> ID：11136922
> 
> 赞同：2
> 
> 时间：2012-06-21T11:12:53.737
> 
> 标签：android, service, android-intent, intentfilter

当这个服务正在运行时，是否可以只向一个服务发送一个意图？我知道这些功能`startService()`，`onStartCommand()`但我不想“启动”服务，在我的情况下它已经启动了。

所以我想知道是否可以只针对一个广播接收器，或者它是否退出其他东西只发送到一个服务/活动？

`intent.setClass()`我之前的尝试`sendBroadcast(intent)`没有结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:37:13.460

> 我知道函数 startService() 和 onStartCommand() 但我不想“启动”服务，在我的情况下它已经启动了。

`startService()`仅通过 将消息传递到服务的现有运行副本（`onStartCommand()`如果存在这样的副本）。`onCreate()`如果没有正在运行的服务副本，它将创建这样的副本（从而触发对 的调用）。

> 所以我想知道是否可以只针对一个广播接收器，或者它是否退出其他东西只发送到一个服务/活动？

请使用`startService()`。

# html - 2列浮动包装

> ID：11136923
> 
> 赞同：1
> 
> 时间：2012-06-21T11:13:05.163
> 
> 标签：html, css

我正在尝试将一组包装器浮动在 2 列中，以便它们彼此相邻。问题是，当包装器比其他包装器更大（或更小）时，我希望另一列重新平衡到 2 列是事件。

下面是我正在使用的代码和我想要实现的图像。任何人都可以提出任何可以帮助的建议吗？

```
 <div id="mainCategoryWrapper">
    <div class="CategoryWrapper" id="Wrapper_1"></div>
    <div class="CategoryWrapper" id="Wrapper_2"></div>
    <div class="CategoryWrapper" id="Wrapper_3"></div>
    <div class="CategoryWrapper" id="Wrapper_4"></div>
    <div class="CategoryWrapper" id="Wrapper_5"></div>
    <div class="CategoryWrapper" id="Wrapper_6"></div>
    <div class="CategoryWrapper" id="Wrapper_7"></div>
    <div class="CategoryWrapper" id="Wrapper_8"></div>
    <div class="CategoryWrapper" id="Wrapper_9"></div>
</div> 
```

![在此处输入图像描述](../Images/db8a1c82028ace275ea8482a64fc84c4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:16:15.717

对于这种类型的功能，您需要[http://masonry.desandro.com/](http://masonry.desandro.com/) JS。

# asp.net - DotLess 的“web”属性到底是做什么的？

> ID：11136925
> 
> 赞同：15
> 
> 时间：2012-06-21T11:13:10.150
> 
> 标签：asp.net, web-config, dotless

无[点文档](https://github.com/dotless/dotless/wiki)非常有限。我根本找不到关于 configsection 选项的太多信息——尤其是“web”属性的作用。

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T12:54:36.810

该代码通常是开源项目的非常好的文档；）

获取代码副本并查看 dotless.Core > configuration > DotlessConfiguration.cs 你会看到一些关于所有配置元素的方便注释 - 这是 Web 的

```
/// <summary>
///  Whether this is used in a web context or not
/// </summary>
public bool Web { get; set; } 
```

诚然，它并没有告诉您很多信息，但找到对该属性的引用，您在代码中只遇到一个使用它的地方 -

```
if (!configuration.Web)
    RegisterLocalServices(pandora); 
```

这开始让您更好地了解它的作用

```
 protected virtual void RegisterLocalServices(FluentRegistration pandora)
    {
        pandora.Service<ICache>().Implementor<InMemoryCache>();
        pandora.Service<IParameterSource>().Implementor<ConsoleArgumentParameterSource>();
        pandora.Service<ILogger>().Implementor<ConsoleLogger>().Parameters("level").Set("error-level");
        pandora.Service<IPathResolver>().Implementor<RelativePathResolver>();
    } 
```

所以它设置了内存缓存，记录到控制台等（即如果不在网络上下文中它使用的服务）

# build - 在heroku上安装二进制包

> ID：11136929
> 
> 赞同：2
> 
> 时间：2012-06-21T11:13:26.133
> 
> 标签：build, heroku, build-process

我想在 heroku 上部署一个二进制包以供我的应用程序使用

我正在使用新的 Cedar 堆栈，官方文档指出建议使用 vulcan 工具为 heroku 构建二进制文件

所以，我只是这样做了，结果是一个包含迷你 linux 文件系统的 tar.gz 文件

怎么办？如何将该二进制包部署到heroku？

所有可用的文档都是指使用 vulcan 和 buildpacks 来创建新应用程序

但是，我想将此二进制包部署到现有应用程序

问题是，我该怎么做？我应该把它放在我的 git repo 中并上传吗？如果是这样，我应该把它放在哪里？以及如何解压并在heroku上正确部署以使其可用并正确配置？

谢谢

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T22:52:42.967

您需要将该编译后的输出合并到 buildpack 中。请参阅[https://devcenter.heroku.com/articles/buildpack-binaries](https://devcenter.heroku.com/articles/buildpack-binaries)

从您正在使用的语言的 buildpack 开始——ruby / python / node。您可能只需将 tarball 解压缩到`vendor`buildpack 目录的 a 子目录中。将分叉的 buildpack 推送到 github，然后将 heroku 指向 buildpack。

# magento - Magento 数据安装脚本

> ID：11136931
> 
> 赞同：0
> 
> 时间：2012-06-21T11:13:46.633
> 
> 标签：magento

我正在尝试构建一个数据安装脚本，用于设置新的网上商店。此脚本为特定商店创建类别、页面和静态块以及默认设置（我们使用多商店设置来托管商店）。在我们的开发/登台设置中，这个脚本运行良好，所有类别都构建没有任何问题。但是在我们的实时系统上，这个脚本失败了。经过一些调试后，我发现区别在于实时系统上的平面目录使用情况。

在启用平面表的情况下创建类别的问题在于根据给定的 parentId 获取父路径信息：

```
$parentCategory = Mage::getModel('catalog/category')->load($parentId); 
```

如果不启用平面类别，这会给出正确的 parentCategory，但启用平面类别会给出一个空对象。

为什么启用平面类别的这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T15:36:36.007

也许这种行为是因为在您创建类别后未重建平面表。尝试在获取 $parentCategory 之前以编程方式刷新索引。

# ios5 - UIImageView 点击手势灵敏度

> ID：11136934
> 
> 赞同：0
> 
> 时间：2012-06-21T11:13:51.107
> 
> 标签：ios5, uiimageview, uitapgesturerecognizer

我的屏幕上有一个 ImageView 对象。当我点击它时，它会在气泡样式视图中显示信息。问题是图像视图非常薄而且很小，它不选择点击手势。关于如何提高灵敏度的任何建议？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:05:57.337

您需要增加响应点击的屏幕区域的大小。因此，您可以使图像视图更大（但将内容模式设置为居中，这样图像就不会被拉伸）。

# authentication - Java 中的必应搜索 API Azure 市场身份验证

> ID：11136936
> 
> 赞同：5
> 
> 时间：2012-06-21T11:13:55.647
> 
> 标签：authentication, search, azure, odata, bing-api

如何在 Java 中进行身份验证以使用 Azure Marketplace 中的新必应搜索 API？迁移指南未提供有关 Java 的信息

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T11:42:28.540

您需要将您的 accountKey 编码为 Base64 并使用 Authorization 标头将其传递给每个请求。

```
String bingUrl = "https://api.datamarket.azure.com/Bing/Search/................";

String accountKey = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=";
byte[] accountKeyBytes = Base64.encodeBase64((accountKey + ":" + accountKey).getBytes());
String accountKeyEnc = new String(accountKeyBytes);

URL url = new URL(bingUrl);
URLConnection urlConnection = url.openConnection();
urlConnection.setRequestProperty("Authorization", "Basic " + accountKeyEnc);

... 
```

此代码基于[迁移到 Windows Azure 市场中的必应搜索 API](http://www.bing.com/webmaster/content/developers/ADM_MIGRATION_GUIDE.docx)文档中的 PHP 示例。

**更新**：修改了encodeBase64调用，应该是这样的：accountKey + ":" + accountKey

# database - 从内核模式驱动程序查询数据库

> ID：11136937
> 
> 赞同：2
> 
> 时间：2012-06-21T11:13:56.040
> 
> 标签：database, database-connection, driver, device-driver

我想**从内核模式驱动程序中查询 SQL 数据库**。我发现这可以通过查询用户模式应用程序来完成任务并将结果返回给内核模式驱动程序来完成。

但是内核模式驱动程序本身有什么直接的方法吗？

# r - 在 ggplot2 中绘制直方图会导致内存错误（仅 418 个数据点）

> ID：11136942
> 
> 赞同：4
> 
> 时间：2012-06-21T11:14:22.993
> 
> 标签：r, memory, ggplot2, histogram

我正在尝试使用 ggplot2 绘制包含 2 组数据的直方图。我的数据集有 418 个值要绘制，有 2 组数据（所以我的直方图上会有 2 组彩色条）。令人讨厌的是，我无法重现`iris`数据集的问题：

```
library(ggplot2)
ggplot(iris, aes(x=iris[,1], fill=iris[,5])) + 
geom_histogram(binwidth=.5,alpha=.5) 
```

这会创建一个很好的直方图。当我对我的数据进行尝试时，我得到：

```
Error : cannot allocate vector of size 4.0 Gb
In addition: Warning messages:
1: In anyDuplicated.default(breaks) :
  Reached total allocation of 16366Mb: see help(memory.size)
2: In anyDuplicated.default(breaks) :
  Reached total allocation of 16366Mb: see help(memory.size)
3: In anyDuplicated.default(breaks) :
  Reached total allocation of 16366Mb: see help(memory.size)
4: In anyDuplicated.default(breaks) :
  Reached total allocation of 16366Mb: see help(memory.size)
Error in UseMethod("scale_dimension") : 
  no applicable method for 'scale_dimension' applied to an object of class "NULL" 
```

我有 16GB 的内存，所以生成一个包含 418 个数据点的图应该不是问题。

非常感谢任何帮助。

* * *

事实证明，即使引用列名，我的数据仍然不会绘制。我认为这是由于数据的范围。在对数据进行对数转换后，将绘制直方图。似乎 ggplot2 或 R 整体不喜欢 1-165476109 的范围，这是可以理解的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T11:21:24.020

您的代码应如下所示：

```
ggplot(iris, aes(x=Sepal.Length, fill=Species)) + 
  geom_histogram(binwidth=.5,alpha=.5) 
```

![在此处输入图像描述](../Images/efce48c1cf822b364dce5386e6d857d0.png)

原因是 中的参数`aes()`是在您的数据环境中评估的。这意味着您的映射应该指向数据中的列名，即`x=Sepal.Length`）。

当您以您`aes()`的方式编写调用时，您试图告诉`ggplot`将 150 个不同的变量映射到`x`，并且类似于将 150 个不同的变量映射到`fill`- 这显然不是您的想法。

# ocr - OCR算法——区分文本图像和物体图像

> ID：11136944
> 
> 赞同：4
> 
> 时间：2012-06-21T11:14:30.670
> 
> 标签：ocr

我正在编写一个从不同网站的徽标中提取内容的程序。我正在使用 OCR 从徽标中提取文本，但我想优化程序并希望仅在那些有文本但我不知道的徽标上应用 OCR如何确定徽标是否包含文字？？？有什么方法吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:41:04.520

在这种情况下，我们需要知道图像中是否包含文本。它与 OCR 不同。

迄今为止被认为是最好的算法是笔画宽度变换。它是由微软旗下的 Ephstein 于 2010 年设计的。它不使用任何机器学习目的。

您可以从本文中获得更多详细信息：[Detecting Text in Natural Scenes with Stroke Width Transform](http://www.math.tau.ac.il/~turkel/imagepapers/text_detection.pdf)

[或观看有关此的视频。](http://videolectures.net/cvpr2010_epshtein_dtns/)

[这里](https://sites.google.com/site/roboticssaurav/strokewidthnokia)有这个算法的实现。

# android - 如何在jquery中使用websocket for android

> ID：11136948
> 
> 赞同：-1
> 
> 时间：2012-06-21T11:14:35.787
> 
> 标签：android, jquery, websocket, alert, cordova

嗨，在我的 android 应用程序中，我在 jquery 中使用 websocket

我尝试使用此脚本连接连接 websocket

```
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery.mobile-1.0a2.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="cordova-1.8.0.js"></script> 
```

这是我用来连接 websocket 的代码

```
var ITOUCH_WEBSOCKET = {"remote_address":'ws://atwerervgt',"channel":'alert'};    
(function pulse(websocketDetails){
    if ("WebSocket" in window)
      {
        alert("Websocket is supported");

         // Let us open a web socket
         var ws = new WebSocket(websocketDetails.remote_address,websocketDetails.channel);

         ws.onmessage = function (evt) 
         { 

                }

                createAlert(received_msg,received_msg.actionType==='NEW');
            } else {
               // alert("Message Received : Action Type is " + received_msg.actionType);
            }

         };
         ws.onclose = function()
         { 
            // websocket is closed.
            //alert("Connection is closed...");
            // On close reconnect again
            pulse(websocketDetails);
         };
      }
      else
      {alert("Websocket is not supported");
      }
})(ITOUCH_WEBSOCKET);
    }); 
```

我收到的警报是不支持 Websocket

谁能帮我我的websocket编码有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:00:22.193

就像评论中提到的@Esailija 一样，Android 不支持 websockets。查看“我可以使用”页面“：

[http://caniuse.com/#feat=websockets](http://caniuse.com/#feat=websockets)

因此，尽管您想在 Android 上使用 Web 套接字，但您将无法做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T09:27:02.873

Websockets 适用于 Android v25+ 的 Chrome： [http ://caniuse.com/websockets](http://caniuse.com/websockets)

# html - 报表查看器中的重叠表

> ID：11136949
> 
> 赞同：2
> 
> 时间：2012-06-21T11:14:49.187
> 
> 标签：html, firefox, google-chrome, reporting-services, reportviewer

我有一个报告查看器控件，我向其提供 SSRS 报告。生成的报告相当大，以适合单个视图。因此，当我们在 Firefox 11+ 或 chrome 15+ 上的 reportviewer 中看到该报告时，呈现的表格是重叠的，但它在 IE 中运行良好。

有没有针对这些的通用解决方案。参考图片：![在此处输入图像描述](../Images/045f86dce75f1c2be708cee00806e995.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T14:57:28.200

恐怕我有个坏消息要告诉你。9.0.0.0 版（2008 版）中的 IE 之外的浏览器支持……太糟糕了。[正如微软在相应的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms156511%28v=sql.100%29.aspx)上所说的那样。

> 如果您想使用所有可用功能，建议使用 Internet Explorer。尽管您可以使用其他浏览器查看报告，但 Internet Explorer 是唯一保证支持用于处理报告的完整功能集的浏览器。

随着版本 10.0.0.0 的改进。根据我们的经验，他们改进*了很多*。[这篇 2009 年的 MS 博客文章](http://blogs.msdn.com/b/brianhartman/archive/2009/06/18/where-s-the-new-report-viewer.aspx)也提到了这一点：

> 显着提高了浏览器兼容性。我们付出了巨大的努力来改善我们对浏览器的支持。我们已经看到了大量关于在 Firefox、Safari 和标准模式下出现额外滚动条或其他有问题的渲染的报告。对这些变化的初步反馈是非常积极的。

ReportViewer 10.0上[相应的 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms251673%28v=vs.100%29.aspx)对于用户不得不求助于 IE 也没有那么“咄咄逼人”。还有一些特定于 IE 的东西（例如打印和缩放）。

我们也遇到过同样的问题，比如重叠的表格……还有一些。试图覆盖导致这种情况的样式很困难，如果不是不可能的话。然而，在我们升级到 10.0.0.0 之后，几乎所有这些布局问题都消失了。

所以，我从“我有一些坏消息”开始我的回答，所以这里是： AFAIK，如果不升级到更新的报告查看器，**你就无法合理地解决这些问题。**

# css - CSS - last-child 属性不起作用

> ID：11136950
> 
> 赞同：-4
> 
> 时间：2012-06-21T11:14:49.290
> 
> 标签：css

根据[http://www.w3schools.com/cssref/sel_last-child.asp](http://www.w3schools.com/cssref/sel_last-child.asp) 当我尝试为我的代码应用 :last-child 时，最后一个孩子颜色适用于所有孩子。最后一个孩子应该将蓝色其余孩子应用到灰色。

[http://jsfiddle.net/rARwn/](http://jsfiddle.net/rARwn/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T11:21:47.493

如果我理解正确`last-child`，`th`不要给他的孩子。像这样写：

```
th:last-child .inner{background-color:lightblue} 
```

检查这个[http://jsfiddle.net/rARwn/3/](http://jsfiddle.net/rARwn/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T11:24:10.147

***“:last-child 选择器匹配作为其父元素的最后一个子元素的每个元素。”***

仔细阅读，然后仔细查看您的代码。你的每个`DIV`s 都是唯一的孩子，`TH`因此他们都是“最后一个孩子”。这就是为什么所有都是蓝色的。

你最后的 CSS 行应该是：

```
th:last-child > div.inner{background-color:lightblue} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T11:23:14.897

:last-child 适用于您应用规则的父母的最后一个孩子。

您的`.inner`DIV 都是其父级 (th) 的最后一个子级。因此，该规则适用于该类的每个 div。

尝试类似：

```
tr :last-child div.inner { background-color:lightblue; } 
```

那应该做的工作。

# gwt - 使用 GUICE-Jersey 在 GWT 客户端和 Restful 后端进行会话管理

> ID：11136953
> 
> 赞同：0
> 
> 时间：2012-06-21T11:14:51.887
> 
> 标签：gwt, rest

我对 GWTP 中的会话管理有几个基本问​​题。

Client : GWTP, Server - 使用 Guice 和 Jersey 的 Restful WebServices。

当我拥有带有 RPC 机制的后端服务时，应用程序会话管理很简单。但是，由于 GWT 客户端在 Android 上运行，服务器端逻辑使用 Jersey 公开为 Restful Web 服务，我们如何维护会话，因为 Restful WS 是无状态的。现在我们如何在这种情况下实现用户会话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:02:38.377

关于会话管理，无论您使用`GWT's RPC`,`RequestFactory`还是`RequestBuilder`.

无论您使用何种通信协议，Web 中的通信基本上都是无状态的。
传统上，会话管理是通过服务器端会话完成的。
但是 RESTfull 服务不应该依赖服务器端会话，因为它违反了 RESTful 原则。所以基本上有两种方法可以做到：

1.  如果您不太在意违反 restful 原则，您可以部署服务器端会话（有关详细信息，请参阅[此处）。](https://stackoverflow.com/questions/909185/jersey-security-and-session-management)
2.  使用 OAuth ( [https://wikis.oracle.com/display/Jersey/OAuth](https://wikis.oracle.com/display/Jersey/OAuth) )
3.  以某种方式将每个请求的[凭据/securityToken传递给您的后端。](https://stackoverflow.com/questions/4973454/session-management-how-to-generate-authentication-token-for-rest-service-je)您可能可以通过使用 GWTP 的[ClientActionHandlers](http://code.google.com/p/gwt-platform/wiki/ClientActionHandlers)来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T06:18:34.840

在经历了来自不同人的大量评论之后，我想到了要做的事情。

我的应用程序也可以从基于浏览器的应用程序和移动设备访问。应用程序最初是为基于浏览器的应用程序编写服务器中的 http 会话管理。现在在获取移动客户端的同时，我们已经实现了 Rest web 服务，移动设备和浏览器客户端也具有相同的服务层。

当用户使用移动设备登录时，我们正在创建一个唯一的身份验证令牌，并将具有此令牌 ID 的 http 会话存储为应用程序中的键、值映射。稍后我们希望来自移动设备的每个用户请求都返回此令牌，并使用此令牌从地图获取会话并继续。

有人对这种方法有任何意见吗？

# c++ - C++ Builder XE，传递和处理用户定义的消息

> ID：11136957
> 
> 赞同：1
> 
> 时间：2012-06-21T11:15:00.173
> 
> 标签：c++, c++builder-xe, window-messages

我正在尝试学习如何在 VCL 表单应用程序中传递和处理消息。我已经在互联网上挖掘了一段时间，发现[了这个](http://bcbjournal.org/articles/vol1/9706/Incorporate_custom_message-handling_in_your_applications.htm?PHPSESSID=5a7b1eaeda695ce9443bf6f4383bb78c)

假设我有一个进度条，我想使用消息更新（顺便说一句，如果有任何其他更好的方法，我很想听到它）所以我做了一个简单的项目来测试这些东西，这就是我所拥有的（RECEIVER 是一个带进度条的表单，SENDER是用于发送消息的按钮，updBar是更新进度条的功能，123456是我要使用的消息ID）： Unit1.cpp：

```
#include <vcl.h>
#pragma hdrstop

#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TRECIEVER *RECIEVER;
//---------------------------------------------------------------------------
__fastcall TRECIEVER::TRECIEVER(TComponent* Owner)
    : TForm(Owner)
{
}
void __fastcall TRECIEVER::barUPD(TMessage& msg){
    BAR->StepIt();
}
//---------------------------------------------------------------------------
void __fastcall TRECIEVER::SENDERClick(TObject *Sender)
{
//BAR->StepIt();
PostMessage(FindWindow(0,(wchar_t*)"RECIEVER"),123456,0,0);
} 
```

单元1.h：

```
#ifndef Unit1H
#define Unit1H
//---------------------------------------------------------------------------
#include <System.Classes.hpp>
#include <Vcl.Controls.hpp>
#include <Vcl.StdCtrls.hpp>
#include <Vcl.Forms.hpp>
#include <Vcl.ComCtrls.hpp>
//---------------------------------------------------------------------------
class TRECIEVER : public TForm
{
__published:    // IDE-managed Components
    TButton *SENDER;
    TProgressBar *BAR;
    void __fastcall SENDERClick(TObject *Sender);
private:    // User declarations
public:     // User declarations
    void __fastcall barUPD(TMessage& msg);
    __fastcall TRECIEVER(TComponent* Owner);
    BEGIN_MESSAGE_MAP
    MESSAGE_HANDLER(123456,TMessage,barUPD);
    END_MESSAGE_MAP(TForm)
};
//---------------------------------------------------------------------------
extern PACKAGE TRECIEVER *RECIEVER;
//---------------------------------------------------------------------------
#endif 
```

如您所见，我已经为我的消息定义了处理函数和适当的消息处理程序。但是当我通过调试器查看它时（在使用按钮发送消息之后），执行点似乎既不去我的函数也不去处理程序行。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:18:57.327

您的代码有两个问题：

1) 123456 (0x1E240) 不是有效的用户级消息 ID。高于 0xFFFF 的值由操作系统保留。自定义消息必须在`WM_USER`(0x0400 - 0x7FFF)、`WM_APP`(0x8000 - 0xBFFF) 或`RegisterWindowMessage()`(0xC000 - 0xFFFF) 范围内。

2）您将错误的字符串指针传递给`FindWindow()`. 您正在将 a 类型转换`char[]`为 a `wchar_t*`，这是无效的类型转换。要指定字符串文字应该使用`wchar_t`而不是`char`，您必须在文字前面加上说明`L`符。或者更一般地说，当使用任何`TCHAR`-senstive API（如`FindWindow()`）时，请改用`TEXT()`宏。

此外，虽然严格来说不是错误，但您应该使用 ue`VCL_MESSAGE_HANDLER()`而不是`MESSAGE_HANDLER()`，只是因为`MESSAGE_HANDLER()`ATL 的定义不同。如果你的项目中没有使用 ATL，你不会遇到问题，但最好`VCL_MESSAGE_HANDLER()`只是为了确保绝对确定，并记录代码使用的是 VCL 的版本`MESSAGE_HANDLER()`而不是其他版本。

尝试这个：

单元1.h：

```
#ifndef Unit1H 
#define Unit1H 
//--------------------------------------------------------------------------- 
#include <System.Classes.hpp> 
#include <Vcl.Controls.hpp> 
#include <Vcl.StdCtrls.hpp> 
#include <Vcl.Forms.hpp> 
#include <Vcl.ComCtrls.hpp> 
//--------------------------------------------------------------------------- 
#define WM_BAR_STEP_IT  (WM_USER+1)
//--------------------------------------------------------------------------- 
class TRECIEVER : public TForm 
{ 
__published:    // IDE-managed Components 
    TButton *SENDER; 
    TProgressBar *BAR; 
    void __fastcall SENDERClick(TObject *Sender); 
private:    // User declarations 
    void __fastcall barUPD(TMessage&); 
public:     // User declarations 
    __fastcall TRECIEVER(TComponent* Owner); 
    BEGIN_MESSAGE_MAP 
      VCL_MESSAGE_HANDLER(WM_BAR_STEP_IT, TMessage, barUPD); 
    END_MESSAGE_MAP(TForm) 
}; 
//--------------------------------------------------------------------------- 
extern PACKAGE TRECIEVER *RECIEVER; 
//--------------------------------------------------------------------------- 
#endif 
```

单元1.cpp：

```
#include <vcl.h> 
#pragma hdrstop 

#include "Unit1.h" 
//--------------------------------------------------------------------------- 
#pragma package(smart_init) 
#pragma resource "*.dfm" 
TRECIEVER *RECIEVER; 
//--------------------------------------------------------------------------- 
__fastcall TRECIEVER::TRECIEVER(TComponent* Owner) 
    : TForm(Owner) 
{ 
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::barUPD(TMessage&)
{ 
    BAR->StepIt(); 
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::SENDERClick(TObject *Sender) 
{ 
    // this assumes the Form's Caption is set to "RECEIVER"
    // also specifying the class type for good measure...
    PostMessage(FindWindow(TEXT("TRECEIVER"), TEXT("RECIEVER")), WM_BAR_STEP_IT, 0, 0); 

    //Alternatively:
    //PostMessage(FindWindowW(ClassName().c_str(), Caption.c_str()), WM_BAR_STEP_IT, 0, 0); 
} 
//--------------------------------------------------------------------------- 
```

话虽如此，由于消息对应用程序是私有的，因此根本不需要使用，而是`FindWindow()`使用`TForm::Handle`属性。我什至会更进一步，`MESSAGE_HANDLER()`完全摆脱它。该消息对 的内部是私有的`TRECEIVER`，因此它应该保留在其中：

单元1.h：

```
#ifndef Unit1H 
#define Unit1H 
//--------------------------------------------------------------------------- 
#include <System.Classes.hpp> 
#include <Vcl.Controls.hpp> 
#include <Vcl.StdCtrls.hpp> 
#include <Vcl.Forms.hpp> 
#include <Vcl.ComCtrls.hpp> 
//--------------------------------------------------------------------------- 
class TRECIEVER : public TForm 
{ 
__published:    // IDE-managed Components 
    TButton *SENDER; 
    TProgressBar *BAR; 
    void __fastcall SENDERClick(TObject *Sender); 
private:    // User declarations 
protected:
    void __fastcall WndProc(TMessage& Message); 
public:     // User declarations 
    __fastcall TRECIEVER(TComponent* Owner); 
}; 
//--------------------------------------------------------------------------- 
extern PACKAGE TRECIEVER *RECIEVER; 
//--------------------------------------------------------------------------- 
#endif 
```

单元1.cpp：

```
#include <vcl.h> 
#pragma hdrstop 

#include "Unit1.h" 
//--------------------------------------------------------------------------- 
#pragma package(smart_init) 
#pragma resource "*.dfm" 
TRECIEVER *RECIEVER; 
#define WM_BAR_STEP_IT  (WM_USER+1)
//--------------------------------------------------------------------------- 
__fastcall TRECIEVER::TRECIEVER(TComponent* Owner) 
    : TForm(Owner) 
{ 
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::WndProc(TMessage& Message)
{ 
    if (Message.Msg == WM_BAR_STEP_IT)
        BAR->StepIt(); 
    else
        TForm::WndProc(Message);
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::SENDERClick(TObject *Sender) 
{ 
    PostMessage(Handle, WM_BAR_STEP_IT, 0, 0); 
} 
//--------------------------------------------------------------------------- 
```

如果您希望应用程序的其他部分向 Revceiver 发布消息，您可以为此公开一个公共方法：

单元1.h：

```
#ifndef Unit1H 
#define Unit1H 
//--------------------------------------------------------------------------- 
#include <System.Classes.hpp> 
#include <Vcl.Controls.hpp> 
#include <Vcl.StdCtrls.hpp> 
#include <Vcl.Forms.hpp> 
#include <Vcl.ComCtrls.hpp> 
//--------------------------------------------------------------------------- 
class TRECIEVER : public TForm 
{ 
__published:    // IDE-managed Components 
    TButton *SENDER; 
    TProgressBar *BAR; 
    void __fastcall SENDERClick(TObject *Sender); 
private:    // User declarations 
protected:
    void __fastcall WndProc(TMessage& Message); 
public:     // User declarations 
    __fastcall TRECIEVER(TComponent* Owner); 
    void __fastcall PostBarStepIt();
}; 
//--------------------------------------------------------------------------- 
extern PACKAGE TRECIEVER *RECIEVER; 
//--------------------------------------------------------------------------- 
#endif 
```

单元1.cpp：

```
#include <vcl.h> 
#pragma hdrstop 

#include "Unit1.h" 
//--------------------------------------------------------------------------- 
#pragma package(smart_init) 
#pragma resource "*.dfm" 
TRECIEVER *RECIEVER; 
#define WM_BAR_STEP_IT  (WM_USER+1)
//--------------------------------------------------------------------------- 
__fastcall TRECIEVER::TRECIEVER(TComponent* Owner) 
    : TForm(Owner) 
{ 
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::WndProc(TMessage& Message)
{ 
    if (Message.Msg == WM_BAR_STEP_IT)
        BAR->StepIt(); 
    else
        TForm::WndProc(Message);
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::SENDERClick(TObject *Sender) 
{ 
    PostBarStepIt(); 
} 
//--------------------------------------------------------------------------- 
void __fastcall TRECIEVER::PostBarStepIt() 
{ 
    PostMessage(Handle, WM_BAR_STEP_IT, 0, 0); 
} 
//--------------------------------------------------------------------------- 
```

SomeOtherFile.cpp：

```
#include "Unit1.h"

void __fastcall TSomeOtherClass::SomeMethod()
{
    RECIEVER->PostBarStepIt(); 
} 
```

# google-apps-script - 谷歌网站：对成人内容的 API 访问被阻止

> ID：11136958
> 
> 赞同：0
> 
> 时间：2012-06-21T11:15:07.270
> 
> 标签：google-apps-script, google-sites

> 服务错误：SitesApp：API 访问成人内容被阻止（第 21 行）

运行 Google 应用脚本后出现上述错误消息。有什么方法可以访问启用了成人内容的谷歌网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T00:22:31.130

这似乎是对 Google Sites API 的无证限制。我们应该将其包含在我们的文档中，并且我看到您已经提交[了一个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1430)来跟踪它。

# sql - 加入 2 个表，比较列并更新第三列

> ID：11136961
> 
> 赞同：0
> 
> 时间：2012-06-21T11:15:20.527
> 
> 标签：sql, sql-server, database

我正在编写一个 sql 语句（见下文），它比较 2 个不同表 table1 和 table2 上的 2 个序列号。如果序列号存在，那么我希望 table1 上的另一列更新为“是”，如果 table1 中的序列号在 table2 中不存在，我想更新为“否”

我当前的 sql 语句运行良好，并在必要时用“是”填充列。我的问题是，当序列号不存在时，不是放置“否”，而是更新为 NULL。我的 where 语句很重要，因为我只想比较两个表中日期和安装在两个表中匹配的序列号。我不想比较每一行。谢谢

```
UPDATE dbo.table1
    SET [Match] = CASE WHEN dbo.table2.[Serial Number] IS NOT NULL
    THEN 'yes' ELSE 'no' END
        FROM dbo.table1 LEFT OUTER JOIN dbo.table2
            ON dbo.table2.[Serial Number] = dbo.table1.[Serial Number]
        Where dbo.table1.[Date] = 'JAN11' AND 
              dbo.table1.[Install] = 'new' AND
              dbo.table2.[Date] = 'JAN11' AND 
              dbo.table2.[Install] = 'new' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T11:20:07.583

将 WHERE 条件放入 JOIN 的条件：

```
UPDATE dbo.table1
SET [Match] = CASE WHEN dbo.table2.[Serial Number] IS NOT NULL
THEN 'yes' ELSE 'no' END
    FROM dbo.table1 LEFT OUTER JOIN dbo.table2
        ON dbo.table2.[Serial Number] = dbo.table1.[Serial Number]
    AND dbo.table1.[Date] = 'JAN11' AND 
          dbo.table1.[Install] = 'new' AND
          dbo.table2.[Date] = 'JAN11' AND 
          dbo.table2.[Install] = 'new' 
```

* * *

@巴兹1nga：

WHERE 导致行被过滤掉，因此值的设置没有被分配回 table1。

试试这个：

```
create table tblA
(
x int, y varchar(10)
);

create table tblB
(
x int, some_date varchar(10), serial_number int
);

insert into tblA(x,y) values(1,'www');
insert into tblB(x,some_date,serial_number) values(1,'yyy',76);

print 'First update';
update tblA
set y = case when tblB.serial_number is not null then 'Yes' else 'No' end
from tblA 
left join tblB on tblB.x = tblA.x 
where tblB.some_date = 'JAN11';

select * from tblA;

print 'Second update';
update tblA
set y = case when tblB.serial_number is not null then 'Yes' else 'No' end
from tblA 
left join tblB on tblB.x = tblA.x 
and tblB.some_date = 'JAN11';

select * from tblA; 
```

输出：

```
(1 row(s) affected)

(1 row(s) affected)
First update

(0 row(s) affected)
x           y
----------- ----------
1           www

(1 row(s) affected)

Second update

(1 row(s) affected)
x           y
----------- ----------
1           No

(1 row(s) affected) 
```

# python - 我无法在 Fabric 中使用 virtualenvwrapper 切换 virtualenv

> ID：11136962
> 
> 赞同：4
> 
> 时间：2012-06-21T11:15:21.623
> 
> 标签：python, django, virtualenv, fabric, virtualenvwrapper

我`virtualenvwrapper`用于`virtualenv`我的 Django 部署。以下是我的 Fabric 任务：

```
proj_path = '/path/to/proj'

def setup_code():
    sudo('pip install virtualenvwrapper')
    run('export WORKON_HOME=$HOME/.virtualenvs')
    run('source /usr/local/bin/virtualenvwrapper.sh && mkvirtualenv myenv')
    run('source /usr/local/bin/virtualenvwrapper.sh && workon myenv')
    cd(proj_path)
    req_file = os.path.join(proj_path, 'requirements.txt')
    run('pip install -r %s' % req_file) 
```

我执行了上述`fab`任务，但它的行为很奇怪。`pip`开始检索所有包，然后开始为它们执行安装文件。在执行`setup`文件时它崩溃说`Permission denied`.

但为什么？它在内部`~`和`virtualenv`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T05:41:40.027

找出问题所在：

面料：

```
cd('dir') # doesn't works. 
```

以下作品：

```
with cd('dir'):
    print('pwd') # Directory change reflects here. 
```

同样，其他环境问题，例如：

```
run('export WORKON_HOME=$HOME/.virtualenvs')
run('source /usr/local/bin/virtualenvwrapper.sh && mkvirtualenv myenv')
run('source /usr/local/bin/virtualenvwrapper.sh && workon myenv') 
```

但改为：

```
with prefix('WORKON_HOME=$HOME/.virtualenvs'):
    with prefix('source /usr/local/bin/virtualenvwrapper.sh'):
        with prefix('workon myenv'): # Assuming there is a env called `myenv`
            run('pip install -r requirements.txt') # Works in virtualenv 
```

从官方文档中弄清楚：http: [//docs.fabfile.org/en/stable/api/core/context_managers.html](http://docs.fabfile.org/en/stable/api/core/context_managers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:01:38.140

我认为那是行不通的，因为那时您激活了 virtualenv，它对您现有的环境有一些魔力，但据我所知，fabric 没有自己的外壳和环境。你可以这样尝试：

```
 run('/home/your_folder/virtualenv/bin/pip install -r %s' % req_file) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-21T22:24:02.820

如果您不想使用您`.bashrc`的 .

```
with shell_env(WORKON_HOME=run('printf $HOME/.virtualenvs'),
        prefix('source /usr/share/virtualenvwrapper/virtualenvwrapper.sh'):

    run('mkvirtualenv foo')    
    with prefix('workon foo'):
        run('which python') 
```

# asp.net - 在中继器中一次编辑一行

> ID：11136963
> 
> 赞同：0
> 
> 时间：2012-06-21T11:15:22.200
> 
> 标签：asp.net

我已经编写了可编辑转发器的代码，现在我面临的问题是我可以一次编辑转发器中的多行。我想要实现的功能是，如果单击编辑一行，然后在同时单击另一行上的编辑，它应该会提示我保存第一行。

# python - TweepError：发送请求失败：[Errno 61] 连接被拒绝

> ID：11136964
> 
> 赞同：1
> 
> 时间：2012-06-21T11:15:25.707
> 
> 标签：python, twitter, tweepy

安装 OSX 10.7.4、Eclipse、Pydev、Python 2.7、Tweepy-1.9

嘿，我最初试图从 twitter API 中获取推文，但一直收到与下面相同的错误。该程序旨在打印 twitter API 速率限制，以确保我不会被超越。

我不断收到这个错误，但网上关于它的信息很少。

任何帮助表示赞赏。

编码

```
import tweepy
auth = tweepy.OAuthHandler(Consumer Key, Consumer Secret)
auth.set_access_token(Access token,Access token secret)
api = tweepy.API(auth)

print api.rate_limit_status()
#print tweepy.api.rate_limit_status() 
```

错误

```
Traceback (most recent call last):
  File "/Users/brendan/Documents/workspace/Euro2012/src/rate_limit.py", line 7, in <module>
    print api.rate_limit_status()
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 185, in _call
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 149, in execute
tweepy.error.TweepError: Failed to send request: [Errno 61] Connection refused 
```

编辑：我还没有对此进行确认，但我怀疑问题出在代理设置上

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T16:18:10.130

出于某种原因，tweepy 使用低级[httplib](http://docs.python.org/library/httplib.html)而不是高级[urllib2](http://docs.python.org/library/urllib2.html)。httplib 不使用 HTTP 代理；其他模块使用它来*实现*HTTP 代理支持。

要么获得允许直接连接而无需代理配置的互联网连接，要么修改 tweepy 以使用 urllib2，或者使用另一个库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:53:04.807

上面的 phihag 是正确的。Tweepy 的标准版本不支持 HTTP。但是有一个由 DUCU 创建的版本 (1.7.3) 可以在[GitHub 上](https://github.com/ducu/tweepy)下载，显然它确实支持 HTTP 并进行了一些修改。我不得不使用最新版本（1.9），因为我遇到了过时库的问题。

正如 phihag 所建议的，我的解决方案是使用替代的互联网连接。

看看 Tweepy 的未来版本是否支持 HTTP 会很有趣。

关键字（对于其他搜索者） Tweepy API http 代理支持。

# smalltalk - 类别和包中的类组织如何在不同版本的 Pharo 中工作？

> ID：11136968
> 
> 赞同：6
> 
> 时间：2012-06-21T11:15:40.937
> 
> 标签：smalltalk, pharo, monticello

有人能解释一下 Pharo 中的课程组织如何在不同版本的 Pharo 中工作吗？

*   所有类都是 Smalltalk 全球的一部分（一直是，似乎一直这样？）
*   类可以有一个类别，但那只是一种标签？（一直是，似乎一直这样？*但有时类别会以某种方式映射到包*？）
*   不同版本的Pharo有不同种类的包
    *   代表蒙蒂塞洛包的 MCPackages
    *   包信息
    *   RPackage（Pharo 1.4）？

此外还有 SystemNavigation 以某种方式帮助导航基于上述某些构造的类和方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T15:58:38.940

**课程**

类是全局中的键这一事实`Smalltalk`是一个实现细节。只要有一个用于类名的全局命名空间，实现很可能会保持不变。

**班级类别**

类类别很像一个标签*。*一个类一次只能属于一个类别。最初，类类别被用于`Browser`组织系统中的类。

创建`Monticello`时，类类别被重载以指示*Monticello 包*中的成员身份，`MCPackage`并且`PackageInfo`创建类来管理此映射。

`PackageInfo`完成所有繁重的工作：找到属于一个包的类和松散的方法。

`MCPackage`是一个特定于 Monticello 的包装器，`PackageInfo`它添加了一些不一定适合更通用的`PackageInfo`.

**套餐**

为包成员重载类类别是一种简化采用的巧妙技巧`Monticello`（不需要教授现有的开发工具`Monticello`），但是，它仍然是一个**技巧**。更不用说执行`PackageInfo`效率不高的事实。

`RPackage`创建是为了解决下一代开发工具的性能问题`PackageInfo`并用作下一代开发工具的一部分。

这两个包实现将继续存在，直到`PackageInfo`可以逐步淘汰。

**系统导航**

正如弗兰克所说，

> SystemNavigation 是一个类，顾名思义，它允许轻松查询许多不同的事物：图像中的类、sender-of、implementors-of、有关图像中加载的包的信息等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T12:12:58.420

至少目前，类是`Smalltalk`字典中的键。

`PackageInfo`包含有关一组类和对其他包的扩展的信息。

Monticello 包包含一个可部署的代码单元。通常其中之一将对应于一个`PackageInfo`实例。（例如，在 Monticello 浏览器中点击“+Package”按钮将创建其中之一。）Monticello 包可能包含预加载和后加载脚本，因此这两个类执行单独的（如果相关）功能。

`SystemNavigation`顾名思义，它是一个允许轻松查询许多不同事物的类：图像中的类、发送者、实现者、有关图像中加载的包的信息等等。

# image - 从服务器下载图像并在滚动视图中显示

> ID：11136971
> 
> 赞同：0
> 
> 时间：2012-06-21T11:15:58.387
> 
> 标签：image, memory, titanium, sliding

我有一组图像 url，我必须首先从中下载图像，然后以滑动方式显示。但我想异步下载图像。我一次使用 3 张图像，如下面的代码：

```
var imageViewArray = [];
var nextImageIndex;
var imageNameArray=[];

for (var i = 0; i < 3; i++) {
var imageView1 = Titanium.UI.createImageView({
});
imageViewArray[i] = imageView1;
}

var scrollingView = Titanium.UI.createScrollableView({
views : imageViewArray,
width : 310,
height : 450,
top : 5,
left : 5,
borderWidth : 2,
borderColor : '#000'
 });

scrollingView.addEventListener('scroll', function(e) {
Ti.API.info("C=" + e.currentPage);
Ti.API.info("N=" + nextImageIndex);
if (e.currentPage == 2 && nextImageIndex < imageNameArray.length - 2) {
    //Setting the current page to 1 will allow the smooth swipe functionality
    scrollingView.currentPage = 1;
    nextImageIndex += 1;
    var vw = scrollingView.views[0];
    imageViewArray[0] = scrollingView.views[1];
    imageViewArray[1] = scrollingView.views[2];
    scrollingView.removeView[vw];
    vw.image = imageNameArray[nextImageIndex + 1];
    imageViewArray[2] = vw;
    scrollingView.views = imageViewArray;
} else if (e.currentPage == 0 && nextImageIndex > 1) {
    nextImageIndex -= 1;
    scrollingView.currentPage = 1;
    var vw = scrollingView.views[2];
    imageViewArray[1] = scrollingView.views[0];
    imageViewArray[2] = scrollingView.views[1];

    scrollingView.removeView[vw];

    vw.image = imageNameArray[nextImageIndex - 1];
    imageViewArray[0] = vw;
    scrollingView.views = imageViewArray;
}

  });

 scrollingView.views[0].image = imageNameArray[0];
  scrollingView.views[1].image = imageNameArray[1];
   scrollingView.views[2].image = imageNameArray[2];
  nextImageIndex = 1; 
```

谁能告诉我我应该在哪里从网址下载图像。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T09:47:20.853

首先，在加载此视图时下载至少 3 张图像。然后在您的滚动事件中，您将下载更多图像。

问：为什么要从滚动视图中删除视图？

# apache - 将文件系统更改为 EXT4 后，Apache 服务器无法读取目录

> ID：11136978
> 
> 赞同：0
> 
> 时间：2012-06-21T11:16:28.793
> 
> 标签：apache, ubuntu, permissions, webserver, ext4

我正在使用 Apache 运行 Ubuntu 12.04。最近我连接了一个 NTFS 外部驱动器，该驱动器通过以下设置安装了 fstab：

```
/dev/sdc2  /media/cavalry       auto    rw,user,sync    0       0 
```

我在这个驱动器上有几个目录，由我的 Web 服务器通过 Apache 配置中的目录别名提供服务。一个这样的目录及其权限如下所示：

```
drwxrwxrwx 1 root root 4096 May 28 22:42 econ/ 
```

但是，我已切换到 EXT4 文件系统，并尝试在 fstab 中使用以下行进行挂载：

```
/dev/sdc2  /media/cavalry       ext4    defaults        0       0 
```

具有相同权限的目录：

```
drwxrwxrwx 11 josh josh 4096 May 28 22:42 econ/ 
```

这里的问题是，当安装 EXT4 文件系统时，我无法从 Web 访问此目录（收到“没有权限错误”）。我无法看到（明显的区别是 NTFS 目录由 root 拥有，而 EXT4 目录由 josh 拥有）可能导致此问题的原因。

该目录的 Apache 配置如下：

```
Alias /econ /media/cavalry/server_backup/econ
<Directory /media/cavalry/server_backup/econ>
       Order allow,deny
       Options Indexes FollowSymLinks MultiViews
       Allow from All
       AuthType Basic
       AuthName "Login"
       AuthUserFile /etc/apache2/passwords/users
       Require user research
</Directory> 
```

如果有人可以提供任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T13:46:01.103

解决了。显然挂载点本身的所有权和权限

```
/media/cavalry 
```

正在改变，我没有注意到。给任何点击这个线程的人的建议......检查整个路径......duh

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T12:23:22.700

这里有很多不相关的信息。重要的位是：

```
drwxrwxrwx 1 root root 4096 May 28 22:42 econ/ 
```

作品

```
drwxrwxrwx 11 josh josh 4096 May 28 22:42 econ/ 
```

不是因为：

```
receiving a 'do not have permissions error' 
```

Unix 权限中没有任何内容可以阻止网络服务器读取目录 - 所有人都可以读取。暗示您可能有一些 SELinux 限制或 ACL。

您能否以与网络服务器 uid 不同的用户身份访问该目录？当您以 josh 身份访问它时它是否有效？作为根？

# wpf - 动态 Telerik RadOutlookBar 标题与 ItemTemplate 出现错误

> ID：11136995
> 
> 赞同：1
> 
> 时间：2012-06-21T11:17:57.237
> 
> 标签：wpf, data-binding, telerik, rad-controls

我正在尝试以一种 MVVM 的方式使用 Telerik RadControls，但遇到了一些奇怪的问题。

RadOutlookBar 后面的 Viewmodel 有一个 ViewModel 集合，每个 ViewModel 都有一个 Title 字符串属性。我想将其定义为将它们包裹在 RadOutlookBarItem 中并将标题/标题属性绑定在一起。

XAML：

```
<telerik:RadOutlookBar x:Name="Items">
    <telerik:RadOutlookBar.TitleTemplate>
        <DataTemplate>
            <ContentControl Content="{Binding Path=Title}" />
        </DataTemplate>
    </telerik:RadOutlookBar.TitleTemplate>
    <telerik:RadOutlookBar.ItemTemplate>
        <DataTemplate>
            <telerik:RadOutlookBarItem Header="{Binding Path=Title}" >
                <ContentControl Content="{Binding}" />
            </telerik:RadOutlookBarItem>
        </DataTemplate>
    </telerik:RadOutlookBar.ItemTemplate>
</telerik:RadOutlookBar> 
```

这按预期工作，只是 Header 出来很奇怪。而不是像一个静态字符串项，它似乎被包裹在另一个对象中，该对象的行为类似于 RadOutlookBarItem （当鼠标悬停时它会改变颜色等）

即使我改用简单的字符串而不是绑定它仍然很奇怪。但是，如果我没有在 RadOutlookBar 中定义 ItemTemplate（也就是说，不是动态控件），它看起来没问题。

那里会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:09:57.617

一口气解决了这个问题和另一个问题。我一直绑定到错误的模板。这让我觉得我必须自己添加 OutLookBarItem。

最后，我应该将我试图绑定的内容绑定到 ContentTemplate。

```
<telerik:RadOutlookBar x:Name="Items">
    <telerik:RadOutlookBar.ContentTemplate>
        <DataTemplate >
            <ContentControl Content="{Binding}" />
        </DataTemplate>
    </telerik:RadOutlookBar.ContentTemplate>
    <telerik:RadOutlookBar.TitleTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding DisplayName}" />
        </DataTemplate>
    </telerik:RadOutlookBar.TitleTemplate>
    <telerik:RadOutlookBar.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding DisplayName}" />
        </DataTemplate>
    </telerik:RadOutlookBar.ItemTemplate>
</telerik:RadOutlookBar> 
```

我认为应该工作。

# javascript - 如何让 Knockout 生成具有绑定的新 HTML

> ID：11136997
> 
> 赞同：0
> 
> 时间：2012-06-21T11:18:03.650
> 
> 标签：javascript, knockout.js

我创建了一个带有剔除功能的表格，它可以赋予产品动态属性：（即尺寸-小、中、lg）。这是由输入字段和多选下拉菜单生成的。

填写完字段并生成作为属性值的选择列表后，我可以将它们添加到可观察的属性数组中。

我看不到的问题是我需要显示这些属性及其值数组，但我还需要它们是可编辑的。我不太热衷于将它们重新加载到创建它的主窗体中 - 但也许这是最好的方法。

也许只是将属性列为不可编辑的属性列表

例子：

```
Name: <span data-bind="text: attributeName"></span> <select height="5" data-bind="options: attributesValues"> <button data-bind="click: edit">Edit</button> 
```

如果他们单击编辑，它会将其加载到他们创建它的表单中，以便可以对其进行编辑。

但是，我想看看是否有办法进行内联编辑并绑定到添加的属性及其每个属性值数组。因此，当他们从列表中删除一个属性值时，它会将其从该特定属性的数组中删除。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:22:49.403

所以，我不太自信我完全理解你想要做什么，你发布的一行代码并没有真正澄清它。我将这个具有多选属性的小提琴放在一起，并允许您添加具有选择属性的新产品。添加后，新产品将具有`select`自己的那些属性，仍然可以对其进行编辑。如果这不是您所追求的，请尝试澄清，并可能发布更多代码。

这是[小提琴](http://jsfiddle.net/tyrsius/JCDMR/)

# c# - 多线程调用委托

> ID：11136999
> 
> 赞同：1
> 
> 时间：2012-06-21T11:18:08.387
> 
> 标签：c#, wpf, multithreading

引用 Marc Gravell 的话：

```
///...blah blah updating files
string newText = "abc"; // running on worker thread
this.Invoke((MethodInvoker)delegate {
    someLabel.Text = newText; // runs on UI thread
});
///...blah blah more updating files 
```

我正在寻找使用 WPF 执行此操作，因此无法使用该`invoke`方法。有什么想法吗？这个线程的东西正在我的脑海中：/

**更多详情**

我像这样开始了我的新主题

```
Thread t = new Thread (LoopThread);
t.Start();
t.Join(); 
```

但自始至终`LoopThread`，我都想写入 UI。

**更新**

感谢 Jon Skeet `Dispatcher.Invoke`。似乎`MethodInvoker`也是 WinForms。WPF等效？

**更新 2**

感谢阿德里亚诺建议而不是`System.Windows.Forms.MethodInvoker`使用`System.Action`.

（你们对`this`参数混淆是正确的，只需要构建以消除错误。）

自从添加了总线`SimpleInvoke`，现在我很喜欢

```
Extension method must be defined in a non-generic static class 
```

在线上

```
public partial class MainWindow : Window 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T11:19:20.527

在 WPF 中，您只需[`Dispatcher.Invoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)使用`Control.Invoke`.

该类`DispatcherObject`（WPF 类派生自该类）公开了一个[`Dispatcher`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherobject.dispatcher.aspx)属性，因此您只需要：

```
Dispatcher.Invoke((Action) delegate {
    someLabel.Text = newText; // runs on UI thread
}); 
```

如果您使用的是 C# 3 或更高版本（以及 .NET 3.5 或更高版本），您可能需要将扩展​​方法添加到`DispatcherObject`：

```
// Make this a new top-level class
public static class DispatcherObjectExtensions
{
    public static void SimpleInvoke(this DispatcherObject dispatcherObject,
                                    Action action)
    {
        dispatcherObject.Dispatcher.Invoke(action);
    }
} 
```

所以你可以使用：

```
// From within your UI code
this.SimpleInvoke(() => someLabel.Text = newText); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T22:35:14.870

作为使用 SynchronizationContext 的妥协：

```
 // gui thread

    var sc = SynchronizationContext.Current;

// work thread

    sc.Post(s => 
    {
    someLabel.Text = newText
    }, null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T11:47:34.523

继续 Jon Skeet 评论，您可以像下面这样调用您的分机

```
DispatcherObject.SimpleInvoke(() => someLabel.Text = newText); 
```