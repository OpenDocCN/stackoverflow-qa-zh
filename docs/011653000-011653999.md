# StackOverflow 问答 11653000-11653999

# android - 在框架布局中重叠多个相对布局

> ID：11653001
> 
> 赞同：1
> 
> 时间：2012-07-25T15:16:39.583
> 
> 标签：android, android-relativelayout, android-framelayout, overlapping

是否可以以编程方式在android的框架布局中重叠多个相对布局？

或者一个相对布局中的多个相对布局可以在android中重叠或不重叠？

# qt4 - qmake 变量，$$VAR 和 $${VAR} 的区别

> ID：11653005
> 
> 赞同：5
> 
> 时间：2012-07-25T15:17:13.510
> 
> 标签：qt4, qt-creator, qmake

对于 Qt qmake[变量](http://doc.qt.nokia.com/4.7-snapshot/qmake-variable-reference.html)，我有时会看到不同的符号。

例子

```
$$PWD
$${PWD} 
```

对我来说它似乎工作相同，有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T06:13:53.960

根据[文档](http://qt-project.org/doc/qt-4.8/qmake-advanced-usage.html#variables)，这两个符号几乎是等价的。唯一的区别是`the second notation allows you to append the contents of the variable to another value without separating the two with a space`。

# javascript - 使用 Prototype 将字符串转换为 JSON 数组？

> ID：11653007
> 
> 赞同：1
> 
> 时间：2012-07-25T15:17:20.363
> 
> 标签：javascript, prototypejs

我有这个 json 字符串：

```
{"17":{"31":{"price":5,"oldPrice":5,"priceValue":"5.0000","type":"fixed","excludeTax":5,"includeTax":5},"29":{"price":8,"oldPrice":8,"priceValue":"8.0000","type":"fixed","excludeTax":8,"includeTax":8},"30":{"price":10,"oldPrice":10,"priceValue":"10.0000","type":"fixed","excludeTax":10,"includeTax":10}},"12":{"price":0,"oldPrice":0,"priceValue":"0.0000","type":"fixed","excludeTax":0,"includeTax":0},"11":{"price":0,"oldPrice":0,"priceValue":"0.0000","type":"fixed","excludeTax":0,"includeTax":0}} 
```

如何使用 Prototype 将其转换为数组？我尝试了 evalJSON()，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:20:08.603

内置[JSON.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)应该可以做到，你不需要任何库：

```
var obj = JSON.parse(jsonString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:20:28.387

您的字符串不是有效的 JSON，因为它包含两个星号。删除它们并在此之后应用 evalJSON：

```
str.substring(1, -1).evalJSON(true); 
```

虽然我会说你应该使用[`JSON.parse`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)（或像 json2 这样的 polyfill）而不是[`"".evalJSON`](http://www.prototypejs.org/api/string/evalJSON).

请注意，您将返回一个对象，而不是数组！

# migration - RavenDB : 在文档转换期间访问数据库实例

> ID：11653008
> 
> 赞同：1
> 
> 时间：2012-07-25T15:17:20.387
> 
> 标签：migration, ravendb, data-conversion

我需要一些有关 Raven DB 及其 C# API 的帮助。我想使用 Linq 查询（使用 Linq to Raven 实现）进行“排序”。为此，我必须创建一个索引来实现此操作。我的架构当前已规范化，但我想对其进行非规范化以便在其中添加自定义属性。

所以我有 ：

实体 A：

*   一些财产
*   B实体的ID

事实上，我只是想通过 B 属性订购我的 As。所以我想将我的 A 非规范化以包含 B 属性。

因此，使用 RavenDB 可以进行方案演变，但是为了在 AI 中设置 B 属性，必须在转换 A 时加载 B。根据文档，这似乎是不可能的。

我不想构建一个令人毛骨悚然的程序，它会在每个 A 上迭代以加载 B，但我没有看到其他解决方案。

任何的想法 ？

感谢您的时间 ：）。朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:52:20.590

您不应该编写一个令人毛骨悚然的程序，而应该编写一个强大的迁移项目，其中包含一堆有用的迁移脚本。像下面这样的简单脚本将为您完成工作：

```
public void LoadAndSaveWithDenormalizedProperty()
{
    using (var session = store.OpenSession())
    {
        int skip = 0;
        const int take = 24;
        while (true)
        {
            var items = session.Query<ItemA>()
                .Customize(customization => customization.Include(x => x.ItemBId))
                .Skip(skip)
                .Take(take)
                .ToList();
            skip += items.Count;

            foreach (item in items)
            {
                item.DenormalizedProperty = 
                       session.Load<ItemB>(item.ItemBId).PropertyToDenormalize;
            }

            session.SaveChanges();

            if (items.Count == 0)
                break;
        }
    }
} 
```

# php - 如何将 cookie 从一个页面传递到两个页面不在同一目录中的另一个页面？

> ID：11653010
> 
> 赞同：0
> 
> 时间：2012-07-25T15:17:29.417
> 
> 标签：php, cookies

我有一台服务器，但有两个目录，例如：

> *   万维网
>     *   目录1
>         *   索引.php
>         *   page1.php
>         *   page2.php
>     *   目录2
>         *   索引.php
>         *   page3.php
>         *   page4.php

当我想从 的页面转移到 的页面`index.php`时，如何传递使用 PHP页面中设置的 cookie？`Directory1``index.php``Directory2``index.php``Directory1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:21:53.417

使用`path`参数：

```
setcookie("name", "value", time() + 3600, "/"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:22:58.073

根据 PHP 文档

> cookie 可用的服务器上的路径。如果设置为“/”，cookie 将在整个域中可用。如果设置为 '/foo/'，则 cookie 将仅在 /foo/ 目录和域的 /foo/bar/ 等所有子目录中可用。默认值是设置 cookie 的当前目录。

```
$time = time() + 3600;
setcookie('foo', 'bar', $time, "/"); 
```

当您设置第四个参数即`path`as`/`时，您可以在域级别访问它，我想这就是您所需要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:23:08.907

只是不要设置可选的 Path 参数，然后它对两个目录都可用。

# iphone - NSRepublicOfChinaCalendar 和 NSGregorianCalendar 有什么区别？

> ID：11653012
> 
> 赞同：0
> 
> 时间：2012-07-25T15:17:35.740
> 
> 标签：iphone, ios, nscalendar

我开发了一个应用程序，它可以处理很多日期，并使用这种方法将这些作为字符串存储在核心数据中：

```
- (NSDate*) stringToDate{
   NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
   [dateFormat setDateFormat:@"yy-MM-dd HH:mm"];
   NSDate *date = [dateFormat dateFromString:self];

   return date; 
```

}

使用日期/时间非常棘手 - 仅凭系统和语言环境时间之间的时间差 - 无论如何，上述方法应该解决这个问题。（所以我希望，因为将 NSDate 格式化为 NSString 会返回正确的本地时间，而不是在调试器中查看 NSDate 变量，这在我的情况下显示了 2 小时的差异）

还有很多这样的计算：

```
 NSCalendar *calendar = [NSCalendar currentCalendar];   <------

    NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit | NSYearCalendarUnit |NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:someDate];

    NSInteger now_hour = [components hour];
    NSInteger now_minute = [components minute];
    NSInteger yearx =  [components year];
    NSInteger monthx =  [components month];
    NSInteger dayx =  [components day]; 
```

我需要设置/更改/创建某些日期/时间，进行计算并将它们作为 NSStrings 再次检索/存储在核心数据中。

我的问题是关于使用适当的日历。

我应该总是写：

```
NSCalendar *calendar = [NSCalendar currentCalendar]; ? 
```

或者

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar]; 
```

和

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSRepublicOfChinaCalendar]; 
```

**尤其是 取决于该应用程序是在欧洲/美国还是中国使用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:34:12.813

您的方法`stringToDate`实际上并不完全有效，请参阅[QA1480](http://developer.apple.com/library/ios/#qa/qa1480/)。短版：`NSDateFormatter`不幸的是，它有两个稍微矛盾的角色——解码和编码特定的文本格式，以及转换日期以供显示。因为后者与语言环境相关，所以它是默认设置。为确保您获得前一种行为，您应该明确设置`en_US_POSIX`语言环境，以保证完全遵守您的日期字符串。

话虽如此，您似乎对 an 是什么感到有些困惑`NSDate`。它不是`NSString`日期的或任何其他书面表示。这是一个精确时刻的抽象记录。因此，它与当前日历完全无关。用户的日历和语言环境会影响日期的打印方式，但不会影响日期本身。现在仍然是现在，但是你写它。这就是为什么当您将格式化程序应用于日期时，您会得到正确的本地日期，但如果您只是将日期记录到控制台，那么您会得到一些抽象的东西，而不必在本地时区。`NSDate`没有时区或不同日历的概念。

Core Data 可以直接存储日期（即，与数值相比，您无需手动转换为 from 字符串），因此我不完全确定您在做什么。但正常行为是`currentCalendar`在您想为用户显示某些内容时使用。这将根据他们的时区和其他设置显示。

根据 QA，对于应用固定日期字符串，您应该使用具有明确设置区域设置的日期格式化程序，而根本不考虑日历。

# codeigniter-2 - Codeigniter 中的表单操作被添加到现有 URL

> ID：11653025
> 
> 赞同：0
> 
> 时间：2012-07-25T15:18:43.890
> 
> 标签：codeigniter-2

我是codeigniter的新手，我面临一个小问题。我有一个名为“test”的控制器，并想在该控制器中调用“edit_details”操作。这是我正在开发的测试应用程序。我想更新用户的信息，我通过（URL 段）URL 发送用户 ID：“http://localhost/codeigniter/index.php/test/edit/12”作为示例。编辑操作会使用可以输入用户详细信息的表单加载视图。这是使用视图中的锚点（每条记录旁边的编辑链接）完成的。锚点：“测试/编辑/$row->id”。到目前为止一切都很好。

问题是当我提交带有“test/update_details”操作的表单时，url 就会变成“http://localhost/codeigniter/index.php/test/edit/test/update_details”。edit_details 操作加载一个模型，然后该模型执行数据库内容。id 是使用视图中的隐藏字段发送的。

我不确定这里出了什么问题。当我调用控制器时，URL 似乎没有改变。它要么保持不变，要么附加到现有 URL。我曾尝试谷歌搜索解决方案，但找不到任何解决方案。

我仍然没有删除我的 index.php，因为这是一个测试应用程序。我在配置文件中的基本 url 是：“http://localhost/codeigniter/” 自动加载的帮助程序是：form 和 url 自动加载的库是：数据库

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T22:55:58.510

听起来您需要使用 base_url() 将表单传回。换句话说：

```
http://localhost/codeigniter/index.php/test/edit/test/update_details 
```

是错的。我相信您确实在尝试将编辑视图详细信息传递给：

```
http://localhost/codeigniter/index.php/test/update_details 
```

通过提交，您的网址被弄乱了。您的 form_open 应如下所示：

```
echo form_open(base_url()."test/update_details"); 
```

# workflow - JIRA 更改现有项目的工作流程

> ID：11653029
> 
> 赞同：8
> 
> 时间：2012-07-25T15:18:55.893
> 
> 标签：workflow, jira

我在 JIRA 中创建了一个新的工作流程，因为我的团队正在使用的当前工作流程不再适合我们的需求。我担心的是以前的票会怎样？它们是完全改变还是保持原样？将要创建的新工单是否是唯一包含新工作流程的工单？

出于历史和管理原因，我希望旧票保持原样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T05:54:14.697

应用新的工作流程后，系统会要求您告诉 Jira 如何移动问题。您将被要求为旧工作流状态中的每个状态选择新工作流中的新状态，然后将所有问题移至新工作流中的每个新状态。除此之外，所有共享字段都将被复制，非共享字段将丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T11:48:23.273

如果您更改*问题类型*的工作流程，那么该类型的**所有问题**都会更改，无论是旧问题还是新问题。

我理解您的问题，因为您想保留旧票的*状态*。一般来说，我只推荐这个用于*最终状态*的票。

### 这让你有两个选择

*   **在您的新工作流程中保留旧状态**- 然后它们实际上没有任何变化。如果您不为这些提供任何传入转换，则可以确定它们确实是*旧*状态。唯一的缺点是您的工作流程会有点混乱，具体取决于您需要保留多少状态。
*   **创建新的问题类型**，例如*Bug（存档）*，将旧的工作流程与此问题类型相关联，并将旧的旧票移动到此类型。我不推荐这个，因为它的开销很大并且看起来有点难看，但它是一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T18:23:09.677

您当前的问题仍然存在，您永远不会失去它们。如果您查看 Columns 中的板配置，您会发现新的工作流程状态。有些问题可能不会映射到可见状态——您也会看到它们。将它们移动到新工作流的列和/或状态中。

# asp.net-mvc-4 - 如何在我当前的 MVC 应用程序中集成 Nearforums

> ID：11653030
> 
> 赞同：3
> 
> 时间：2012-07-25T15:18:56.510
> 
> 标签：asp.net-mvc-4

我创建了一个 ASP.NET MVC 4.0 应用程序。现在我正在尝试找到一个可以将自身集成到我的 MVC 应用程序中的第 3 方论坛。我做了一些搜索，发现附近的论坛看起来不错。

我已经下载了 Web 和 Db 脚本，我已经阅读了文档并设法创建一个新数据库，运行 SQL 脚本，在 IIS 7.0 下创建一个新网站，更改连接字符串，它运行得很好！

我的问题如下：

虽然安装和什么效果不佳，但我现在正试图弄清楚如何将此论坛集成到我现有的 MVC 应用程序中。

我当前的 MVC 应用程序有自己的数据库和自己的用户表（所有凭据都存储在其中）。我的 MVC 应用程序有一个登录名，它对用户进行身份验证，然后在 Session 中存储一些值（供以后使用等）。

在查看下载的 nearforum 网站及其文件时，我没有找到 Controller 文件夹及其控制器。我想我已经预料到了，所以我可以看看 Controller 调用了什么 Views 以及这些 Views 是否是强类型等......</p>

一旦我弄清楚了这一点，我就可以轻松地将其集成到我现有的应用程序中。请记住，**我不**希望将论坛放在某个地方，`<iframe>…&lt;/iframe>`也不希望将此论坛托管在其他地方。

任何人都可以阐明我应该如何/在哪里解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T10:42:43.303

在现有的 Web 应用程序中集成 Nearforums 代码库（控制器）和输出文件（视图、css 和 js）并不是一个好主意。您必须清楚地了解您正在集成的代码。

[最好的方法是在IIS](http://learn.iis.net/page.aspx/150/understanding-sites-applications-and-virtual-directories-on-iis/)子应用程序上运行 nearforums ，`/forums/`这样您就可以从现有功能中受益，而无需关心代码。在子应用上设置站点后，您可以使用[Nearforums 文档](http://nearforums.codeplex.com/wikipage?title=Existing%20users%20authentication&referringTitle=Documentation)中详述的不同技术将现有的“主站点”用户验证到 Nearforums 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:35:45.110

正如我的评论所述，寻求 nearforum 的开发人员帮助会更容易。
不过，经过几次搜索，我找到了这个主题 [http://nearforums.codeplex.com/discussions/280879](http://nearforums.codeplex.com/discussions/280879)
我希望它能给你答案。

# android - ListView（多数据列）无法显示

> ID：11653031
> 
> 赞同：0
> 
> 时间：2012-07-25T15:18:58.133
> 
> 标签：android

我问了一些关于 stackoverflow 上的固定标题和多个数据列的问题，我终于想出了一些我认为有道理的东西，我觉得我非常接近我的目标。现在的问题是数据没有显示出来。我做了 log.i，发现我确实成功地从我的数据库中读取，所以我想我的适配器有问题？

活动：

公共类 HistoryActivity 扩展 Activity {

```
private static final String TAG = "HistoryActivity";
ListView lv;
SimpleAdapter sd;

RecordDAO dao = new RecordDAO(HistoryActivity.this);

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    Log.i(TAG, "onCreate");

    setContentView(R.layout.historyactivityheader);
    lv = (ListView) findViewById(R.id.list);
    ArrayList<Record> Records = new ArrayList<Record>();
    Records = (ArrayList<Record>) dao.findAll();

    ArrayList<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map;

    for (int x = Records.size()-1; x >=0; x--)
    {
        map = new HashMap<String, String>();
        map.put("ID", String.valueOf(Records.get(x).getId()));
        ...

        aList.add(map);
    }

    sd = new SimpleAdapter(this, aList, R.layout.historyactivityrow,
            new String[]
            { "col1", "col2", "col3",
                    "col4" }, new int[]             
            { R.id.col1, R.id.col2, R.id.col3,
                     R.id.col4});

    lv.setAdapter(sd);

} 
```

}

historyactivityheader.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:orientation="horizontal"
        android:paddingBottom="6dip"
        android:paddingTop="4dip" >

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="col1"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="col2"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="col3"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />

        <TextView
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="col4"
            android:textColor="#FFFFFF"
            android:textSize="16dp" />
    </LinearLayout>

    <ListView
    android:id="@+id/list"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
</ListView>

</LinearLayout> 
```

历史活动行.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TextView
        android:id="@+id/col1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/col2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dp"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/col3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

    <TextView
        android:id="@+id/col4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textColor="#FFFFFF" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:16:11.750

解决方案：

答案是 header 的高度使用了 fill_parent 所以它覆盖了 listview...真是个愚蠢的错误...因此，更改以下内容：header.xml 应该在 relativelayout 中，并将 listview 放在 headertextview 下方，然后也设置listview的宽度为fill_parent，最后将header的高度改为wrap_content

# visual-studio-2010 - 如何在 Windows 上轻松编译 CUDA 代码？

> ID：11653034
> 
> 赞同：2
> 
> 时间：2012-07-25T15:19:08.740
> 
> 标签：visual-studio-2010, cuda

在 Windows 中编译 CUDA 代码的好方法是什么？

我尝试了不同的方式，与 Visual Studio 链接并使用 nvcc 命令从命令行编译。

视觉工作室的问题。我按照大多数链接进行编译，在互联网上找到，但我仍然无法编译简单的程序。

nvcc 的问题。找不到路径 windows.h。我尝试在 nvcc.profile 中添加 Visual Studio 的包含路径，但它不起作用？

有没有人对此有很好的解决方案？

我正在使用 CUDA 4.2 和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:53:22.807

这是我的建议。您可以获取其他人使用 Visual Studio 设置 CUDA 的秘诀。但每次 nVidia 发布新工具包或您更新到下一个 Visual Studio 时，您都将重新经历一遍。几乎总是因为其中一个供应商不能很好地独自离开（或者他们确实有充分的理由；它可能会发生）决定改变路径。

所以我的建议是`nvcc`从命令行使用，直到你了解所有依赖项。然后你就可以毫无问题地设置你的 IDE。每次新的 CUDA 出现时，我都会返回命令行并确保我仍然可以构建、发现任何路径更改、工具更改等。一旦我理解了，我就会更新我的 IDE 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:04:10.043

我有同样的问题。这是简单的解决方案。

CUDA（GPU Computing SDK）的例子运行正常（你应该已经安装了Nvidia GPU Computing SDK）。打开**开始**菜单，在文本框中输入“Browse CUDA SDK”（希望你使用win vista 或7）。

示例位于**src**文件夹中。此文件夹中的示例在 VS 2005、VS 2008 和 VS 2010 中有解决方案。它们在此解决方案和项目中设置了所有初始设置，您可以复制其中一个示例并清理代码并运行您自己的代码。唯一的问题是它们的设置文件是在本地处理的（例如`../../common/lib/`）。所以你应该在那个**src**文件夹中运行你的项目。

CUDA 4.0 和 4.1 在 Visual Studio 的新建项目向导中也有一个 CUDA 运行时选项。那太好了，我不知道他们为什么在 4.2 上取消了这个选项。如果您无法运行 CUDA 4.2，那么 CUDA 4.1 是一个不错的选择。（您可以安装 Nvidia GPU SDK 4.1，然后将其卸载，Visual Studio optin 将保留并正常工作）

另一种选择是创建一个空白项目并使用此配置（它适用于 CUDA 4.0，您计算机中的地址可能不同）：

新建 -> 项目 -> Win32 控制台应用程序

名称：“HelloCuda” -> 确定 -> 下一步 -> 空项目 -> 完成

右键单击项目 HelloCuda -> 构建自定义项

单击查找现有并导航到 CUDA 4.0.targets

C:\ProgramFiles\MSBuild\Microsoft.Cpp\v4。0\BuildCustomizations\CUDA 4.0.targets

现在创建一个文本文件并将其保存为带有 .cu 扩展名的 HelloWorld

现在您将拥有一个文件 HelloWorld.cu

将此文件添加到项目 HelloCuda

右键单击 HelloWorld.cu -> 配置属性 -> 常规 -> 项目类型 -> CUDA C/C++

现在右键单击项目 HelloCuda -> 配置属性 -> CUDA C/C++ -> 通用 -> 附加包含目录

添加 C:\Users\All Users\Application Data\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.0\C\common\inc；

现在右键单击项目 HelloCuda -> 配置属性 -> 链接器 -> 常规 -> 附加库目录

添加 C:\Users\All Users\Application Data\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.0\C\common\lib；

链接器 -> 输入 -> 附加依赖项 -> cudart.lib

现在在 HelloWorld.cu 中编写一个示例 CUDA C 程序并编译。

# wix - WiX：在 Windows XP 上安装，自定义操作“成功”运行批处理脚本，但工作未完成

> ID：11653037
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:12.383
> 
> 标签：wix, windows-installer, windows-xp, wix3.5

我用 WiX 创建了一个 MSI 安装程序。我专门针对 Windows XP SP3+ 它在安装完成时运行自定义操作，以通过 NSSM.exe 将应用程序注册为服务 从命令行运行时批处理文件执行其编写的操作，但作为一部分运行时安装程序完成安装我看到命令提示符打开并且脚本运行，但应用程序未注册。

```
 <CustomAction Id="installLoft"
              Directory="ModulesFolder"
              ExeCommand="[ModulesFolder]winInstall.cmd"
              Execute="deferred"
              Return="check"
              HideTarget="no"
              Impersonate="no" />
<InstallExecuteSequence>
  <Custom Action="installLoft" Before="InstallFinalize"><![CDATA[ (NOT Installed) AND (NOT REMOVE) ]]></Custom>
</InstallExecuteSequence> 
```

批处理脚本内容为：

```
@ECHO OFF
SET PATH=%PATH%;%APPDATA%\app1\
IF "%ProgramFiles(x86)%"=="" (
    set PATH=%PATH%;%ProgramFiles%\app1\
) ELSE (
    set PATH=%PATH%;%ProgramFiles(x86)%\app1\
)
"app1\modules\bin\nssm.exe" install my_service_name_app1 app1.cmd -g 
```

因此，app1 是一个需要作为服务运行的脚本，因此需要将 NSSM.exe 所有组件/文件安装在正确的位置。

是否有一些我遗漏的 Win XP 警告？使用运行安装程序的同一用户手动运行批处理，服务已注册。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:45:15.777

这真的在运行吗？尝试添加暂停命令，以便您可以看到它。我的经验表明 Windows Installer 在启动自定义操作时使用 CreateProcess 而不是 ShellExecute。这可以防止 UAC 提示，但也意味着它无法处理文件关联，并且必须启动 exe 进程而不是 .cmd 文件等文档文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:15:27.540

我已经想通了。我发现在 Win XP 中注册服务时，它是在本地系统（或系统）用户下注册的。但是 SYSTEM 用户没有设置 APPDATA 环境变量。发生的事情是，我的脚本会尝试启动服务并且会因为未定义 APPDATA 而静默失败。

我声明/定义了一个自定义的 MYAPPDATA 系统级环境变量，现在当安装程序完成时 - 重新启动后 - 服务已启动并正在运行。

希望这可以帮助其他依赖标准环境变量的人。

# cassandra - cassandra 长期订单因负多头而关闭？还是我做错了？

> ID：11653038
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:14.040
> 
> 标签：cassandra

我在 cassandra 中看到了以下几个值（意识到，我故意放入各种东西以查看会发生什么）。注意：所有 8 字节值都是长整数，其他几个是一些字符串。排序顺序似乎适用于正长，甚至适用于 UTF8 字符串。然而，负多头在列表的最后！！！！

```
RowKey: 6d796f6e655f696e646578
=> (column=000000000000000a, value=, timestamp=1343228055671000)
=> (column=0000000000000014, value=, timestamp=1343228055671000)
=> (column=0000000000000028, value=, timestamp=1343228055671000)
=> (column=000000000000003c, value=, timestamp=1343228055671000)
=> (column=00000000000000c8, value=, timestamp=1343228055671000)
=> (column=0000000000000154, value=, timestamp=1343228055671000)
=> (column=00000000000001f4, value=, timestamp=1343228055671000)
=> (column=0000000000000226, value=, timestamp=1343228055671000)
=> (column=00000000000002bc, value=, timestamp=1343228055671000)
=> (column=000000746bb814ee, value=, timestamp=1343228055671000)
=> (column=30303030303030303030, value=, timestamp=1343228055671000)
=> (column=61, value=, timestamp=1343228055671000)
=> (column=617364667364, value=, timestamp=1343228055671000)
=> (column=6565656565, value=, timestamp=1343228055671000)
=> (column=657772776572657772657772, value=, timestamp=1343228055671000)
=> (column=fffffffffffffe0c, value=, timestamp=1343228055671000)
=> (column=ffffffffffffff38, value=, timestamp=1343228055671000)
=> (column=ffffffffffffffd8, value=, timestamp=1343228055671000) 
```

现在，如果我告诉 cassandra 假设输入 long 类型，同一行会像这样缺少一堆列（我真的不知道为什么 cassandra 删除了负列？？？？）...

```
RowKey: 6d796f6e655f696e646578
=> (column=10, value=, timestamp=1343228055671000)
=> (column=20, value=, timestamp=1343228055671000)
=> (column=40, value=, timestamp=1343228055671000)
=> (column=60, value=, timestamp=1343228055671000)
=> (column=200, value=, timestamp=1343228055671000)
=> (column=340, value=, timestamp=1343228055671000)
=> (column=500, value=, timestamp=1343228055671000)
=> (column=550, value=, timestamp=1343228055671000)
=> (column=700, value=, timestamp=1343228055671000)
=> (column=500023432430, value=, timestamp=1343228055671000) 
```

两个问题：

1.  为什么现在缺少负多头（我看到的所有其他多头都正确翻译回来）？

2.  我知道如果只有 8 个字节，你真的需要存储 2 的补码，所以排序顺序“会”出错，那么人们通常如何处理 -50 到 +50 的列切片呢？他们是在做两片，一片在开始，一片在结尾？

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:54:09.053

列的排序基于列族的比较器。当您告诉 cassandra-cli 采用某种类型时，它只会更改列的显示方式，而不是顺序。

尝试使用比较器 = LongType 创建一个新的列族。这将按照您期望的顺序（LONG_MIN..LONG_MAX）对您的列进行排序。

# python - 无法安装 python mysql 模块

> ID：11653040
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:16.553
> 
> 标签：python, mysql, django

我正在尝试在 django 中连接到 mysql。它要求我安装模块。模块先决条件是“MySQL 3.23.32 或更高版本”等。我真的需要安装 mysql，我不能只连接到远程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:27:00.607

您需要安装客户端库。Python 模块是客户端库的包装器。您不需要安装服务器。

# sql-server-2008 - 派生表中不接受选项（哈希组）

> ID：11653041
> 
> 赞同：1
> 
> 时间：2012-07-25T15:19:18.560
> 
> 标签：sql-server-2008, tsql

可以在第一个但不能在第二个中使用 OPTION (HASH GROUP)。如何在第二个中包含 OPTION (HASH GROUP)？

```
 SELECT 
  count(*) as 'match'  
  FROM [docSVenum1] with (nolock)   
  INNER LOOP JOIN  [FTSindexWordOnce] as w1 with (NOLOCK, FORCESEEK) 
    ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
  INNER HASH JOIN [FTSindexWordOnce] as w2 with (NOLOCK)
    ON  w1.wordID = w2.wordID and w2.[sID] = '2'      
  GROUP BY W1.[sID]
  OPTION (HASH GROUP)

select max(list.match) as 'max'
  from
  (
      SELECT 
       count(*) as 'match'  
      FROM [docSVenum1] with (nolock)   
      INNER LOOP JOIN  [FTSindexWordOnce] as w1 with (NOLOCK, FORCESEEK) 
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER HASH JOIN [FTSindexWordOnce] as w2 with (NOLOCK)
        ON  w1.wordID = w2.wordID and w2.[sID] = '2'      
      GROUP BY W1.[sID]
      -- OPTION (HASH GROUP)
  ) as list; 
```

在现实生活中，完整的查询将更像这样

```
 select max(list.match) as 'max'
  from
  (
      SELECT 200*count(*)/([d1].[textSize] + [d2].[textSize]) as 'match'  
      FROM [docSVenum1] with (nolock)   
      INNER LOOP JOIN  [FTSindexWordOnce] as w1 with (NOLOCK, FORCESEEK) 
        ON [docSVenum1].sID = w1.[sID] and [docSVenum1].[enumID] = '142'
      INNER HASH JOIN [FTSindexWordOnce] as w2 with (NOLOCK)
        ON  w1.wordID = w2.wordID and w2.[sID] = '2'
      JOIN docSVsys as d1 with (nolock)
        on d1.sID = w1.sID
      JOIN docSVsys as d2 with (nolock)
        on d2.sID = w1.sID    
      GROUP BY W1.[sID],  [d1].[textSize], [d2].[textSize]
      -- OPTION (HASH GROUP) 
  ) as list; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:23:34.420

我可以`as list`在 SQL Server 2005（没有 forceseek 提示，版本 = 9.0.5266）、2008（10.0.5785）和 2012（11.0.2316）上的子查询（之后）之外使用该选项。但在 2008 R2 (10.50.2811) 上，我收到的错误消息是：

> 消息 8622，级别 16，状态 1，第 1 行
> 查询处理器无法生成查询计划，因为此查询中定义了提示。在不指定任何提示且不使用 SET FORCEPLAN 的情况下重新提交查询。

```
SELECT MAX(x.match) FROM (
SELECT 
  count(*) as match  
  FROM sys.objects AS o with (nolock, forceseek)   
  INNER LOOP JOIN sys.columns as c with (NOLOCK) 
    ON o.object_id = c.object_id
  INNER HASH JOIN sys.columns as c2 with (NOLOCK)
    ON o.object_id = c2.object_id   
  GROUP BY o.object_id
) AS x
  OPTION (HASH GROUP); 
```

如果我不使用聚合，它可以工作：

```
SELECT x.match FROM (
SELECT 
  count(*) as match  
  FROM sys.objects AS o with (nolock, forceseek)   
  INNER LOOP JOIN sys.columns as c with (NOLOCK) 
    ON o.object_id = c.object_id
  INNER HASH JOIN sys.columns as c2 with (NOLOCK)
    ON o.object_id = c2.object_id   
  GROUP BY o.object_id
) AS x
  OPTION (HASH GROUP); 
```

如果我使用这种使用 TOP 而不是 MAX 的变体，它也可以：

```
SELECT TOP (1) x.match FROM (
SELECT 
  count(*) as match  
  FROM sys.objects AS o with (nolock, forceseek)   
  INNER LOOP JOIN sys.columns as c with (NOLOCK) 
    ON o.object_id = c.object_id
  INNER HASH JOIN sys.columns as c2 with (NOLOCK)
    ON o.object_id = c2.object_id   
  GROUP BY o.object_id
) AS x
  ORDER BY x.match DESC
  OPTION (HASH GROUP); 
```

甚至可以尝试消除子查询（假设仅用于隔离最大值 - 如果是这样，则没有必要）：

```
SELECT TOP (1) 
  count(*) as [max]  
  FROM sys.objects AS o with (nolock, forceseek)   
  INNER LOOP JOIN sys.columns as c with (NOLOCK) 
    ON o.object_id = c.object_id
  INNER HASH JOIN sys.columns as c2 with (NOLOCK)
    ON o.object_id = c2.object_id   
  GROUP BY o.object_id
  ORDER BY [max] DESC
  OPTION (HASH GROUP); 
```

我有一个问题，想看看这是否是我针对 SQL Server 2012 报告的类似问题。当我了解更多信息时，我会在这里更新。

# php - $_POST 值未设置时

> ID：11653042
> 
> 赞同：1
> 
> 时间：2012-07-25T15:19:18.607
> 
> 标签：php, javascript, post

基本问题：具体何时设置 $_POST 和 $_GET 变量？我问的原因在下面解释。

提前披露：我在这里分享的文件是为了测试/学习目的，并不旨在实现任何有用的东西。我写它是为了将这个问题与我正在从事的项目的其他细节隔离开来。

这是我正在尝试做的总结：我从表单调用一个javascript函数

```
<form action="javascript:jsTest()" ... /> 
```

然后从 jsTest() 中，我根据 php 函数 phpTest() 的返回分配一个 javascript 变量：

```
var jsVar = <?php echo json_encode(phpTest()); ?>; 
```

函数 phpTest() 只返回一个 $_POST 变量：

```
return $_POST['testName']; 
```

这是完整的代码：

```
<?php
session_start();
function phpTest() {
    return $_POST['testName'];
}
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>javascript/php test</title>
    <script type="text/javascript">
        function jsTest() {
            var jsVar = <?php echo json_encode(phpTest()); ?>;
            alert(jsVar);
        }
    </script>
</head>

<body>
    <form method="POST" name="testForm" action="javascript:jsTest()">
        <input type="text" name="testName" value="username" />
        <input type="submit" value="submit" />
    </form>
</body>

</html> 
```

问题：警报总是显示`null`。

我以两种方式对此进行了测试。1) 如果我将表单操作设置为单独的 .php 文件，则设置与表单输入字段关联的 $_POST 变量，并在浏览器中显示该文件中的这些 $_POST 值的回显。或者，2）如果我从 phpTest() 返回一个简单的字符串，

```
return 'hello kitty'; 
```

然后 javascript alert() 准确显示返回的字符串。因此，我认为可以安全地假设 $_POST 变量尚未设置。这让我想到了一个我无法找到答案的问题：

$_POST 变量究竟是什么时候设置的？我假设它是在页面重新加载之前（我的方法需要），并且我假设这是因为如果我在我的代码中使用 method="GET" ，我会看到 GET 变量附加到 URL 上而没有任何先前的页面重新加载。

提前致谢。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:45:25.967

正如 Marc B 在您当前的代码示例中所说，它永远不会按您的意愿工作。

`$_POST`将始终在您的脚本中可用，因为它是 PHP 的超全局数组之一，但它可能没有值。`$_POST`通过 HTTP POST 请求发送 POSTDATA 时有一个值。您可以以编程方式设置 的值，`$_POST`但这并不酷。曾经。

为了使您的脚本正常工作（ish），您需要发送一个包含一些 POSTDATA 的 HTTP POST 请求。您可以使用 cURL 或 Firefox 的海报插件来做到这一点。

```
POST /index.php HTTP/1.1
User-Agent: curl/7.21.4 (universal-apple-darwin11.0)
Host: example.org
Accept: */*
Content-Length: 16
Content-Type: application/x-www-form-urlencoded

testName=yeahboi 
```

如果您可以查看您的 HTTP 响应正文，则 JavaScript 变量`JsVar`现在应该填充为“yeahboi”。

我已经稍微更新了您的脚本，以通过 HTTP POST 将表单提交给它自己并填充一个 JavaScript 变量。

```
<?php

// Script name: index.php

// Define a default value...
$name = 'unknown';

// Make sure post item 'testName' is available...
if(isset($_POST['testName']) &&
    !empty($_POST['testName'])) {

    // POST is available update name...
    $name = $_POST['testName'];
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>javascript/php test</title>
    <script>
    // wait for the DOM to be ready then update the JS variable with PHP's $name variable
    document.addEventListener('DOMContentLoaded', function() {

        var elm = document.getElementById('post-response'),
            value = '<?php echo $name; ?>';

        elm.innerHTML = value;
    }, false);
    </script>
</head>
<body>
    <div id="post-response"></div>
    <form method="POST" name="testForm" action="index.php">
        <input type="text" name="testName" value="username" />
        <input type="submit" value="submit" />
    </form>
</body>
</html> 
```

希望这对您有所帮助。

# svn - 使用 SVN 的 SSL 握手失败

> ID：11653044
> 
> 赞同：9
> 
> 时间：2012-07-25T15:19:26.440
> 
> 标签：svn, centos, ssl

我正在尝试访问我已经使用了一段时间的 SVN 服务器，但现在我收到了这个错误：

> SSL 握手失败：SSL 错误：已收到 TLS 警告警报。

在其他机器上（所有这些都在 CentOS 上完成），我以前没有访问过服务器，系统提示我 (R)eject、临时接受 (t) 或永久接受 (p)？提供证书的选项，然后我就可以成功连接。我的结论是旧证书被缓存了，我需要获取一个新证书，但是，我无法找到清除它的方法，并且在运行 svn 时再次收到此提示。

我确实阅读了许多与此类似的问题，这导致我清除/删除了我的 .subversion 文件夹，但即使在那之后它仍然不会提示我有关证书的信息，并且它继续因上述错误而失败。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T20:16:54.803

您没有指定遇到此问题的 CentOS 版本。

EL 6 附带的颠覆与 GnuTLS 相关联，这是与与 OpenSSL 相关联的旧版本的变化。

您可以使用 ldd 进行测试：

```
$ ldd /usr/bin/svn | grep ssl
$ ldd /usr/bin/svn | grep tls
        libgnutls.so.26 => /usr/lib/libgnutls.so.26 (0x0030f000)
$ 
```

GnuTLS 库在某些情况下更为特殊。最常见的两种：

1.  远程站点使用像 DES 这样的弱密码。
2.  远程站点的证书名称与您指定的名称不匹配。

在名称不匹配的情况下，您可以通过使用 IP 地址而不是名称来回避问题。如果主机是 foo.com 并且 IP 地址为 1.2.3.4，您可以尝试以下方式：

```
svn switch --relocate https://foo.com/my-repo-name https://1.2.3.4/my-repo-name 
```

您还可以尝试从源代码构建 subversion 并在配置中使用 openssl 而不是 gnutls。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T20:19:25.063

这个问题可以通过编辑你的 Apache 配置来解决。该`ServerName`指令应设置在`VirtualHost`块内，例如：

```
<VirtualHost *:443>
  ServerName mywebsite.com
</VirtualHost> 
```

`ServerName`应该匹配 CN 或 SSL 证书上的替代名称之一。

# java - 从 java 程序打开浏览器并预填充 post 参数

> ID：11653045
> 
> 赞同：2
> 
> 时间：2012-07-25T15:19:27.773
> 
> 标签：java, web-applications, browser, post-parameter

我有一个 java 程序，我可以在其中打开 Internet Explorer 或任何浏览器。使用`Runtime.getRuntime().exec(cmd);`

但我想从我的 java 程序中打开一个浏览器，提到 url 和 post 参数。

首先，这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:27:07.223

您对此无能为力。除非您打开的浏览器有一些可用的命令行参数（您必须查找它们，并且它们将是特定于浏览器的），否则您将无法做到这一点。

我可以建议使用 Java 浏览器窗口吗：

[SWT Browser](http://www.eclipse.org/swt/)对象有一个相当大的API，并且将使用本机浏览器来呈现页面。

具体来说，这个片段将做你正在寻找的东西：

[http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet330.java](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet330.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:29:30.160

您可以将 URL 应用到命令行参数，例如在 IE 中：

```
C:\Windows\System32>"C:\Program Files (x86)\Internet Explorer\iexplore.exe" http://stackoverflow.com/ 
```

火狐：

```
C:\Windows\System32>"C:\Program Files (x86)\Mozilla Firefox\firefox.exe" stackov
erflow.com 
```

和铬：

```
C:\Windows\System32>"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe
" stackoverflow.com 
```

在 Windows 上工作，您需要替换`C:\Windows\System32>"C:\Program Files (x86)\Google\Chrome\Application`为您环境中应用程序的位置

# c# - 值与 ListItem 中的 Text 相同

> ID：11653047
> 
> 赞同：1
> 
> 时间：2012-07-25T15:19:31.820
> 
> 标签：c#, c#-4.0

我有这个代码

```
ListItem item=new ListItem();
item.Text="foo";
item.Value="1"; 
ListItem item2=new ListItem();
item2.Text="bar";
item2.Value="2";
List<ListItem> foobar=new List<ListItem>();
foobar.Add(item); foobar.Add(item2);
foreach(ListItem i in foobar)
{
  lblPrintInfo.Text+="Text:"+i.Text+" Value: "+i.Value;
} 
```

我希望得到`Text:foo Value:1 Text:bar Value:2`类似的结果，但实际上我得到了`Text:foo Value:foo Text:bar Value:bar`. 我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:21:49.853

```
foreach(ListItem i in foobar)
{
    lbl.PrintInfo+="Text:"+i.Text+" Value: "+item.Value;
} 
```

应该：

```
foreach(ListItem i in foobar)
{
    lbl.PrintInfo+="Text:"+i.Text+" Value: "+i.Value;
} 
```

（`i`而不是`item`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:12:33.200

您需要做的是设置`DataValueField`和属性：在调用`DataTextField`之前添加这些行：`listB.DataBind();`

```
listB.DataTextField = "Text";
listB.DataValueField = "Value"; 
```

# javascript - 在 不工作

> ID：11653049
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:39.277
> 
> 标签：javascript, xml, dynamics-crm-2011, ribbon

我在 CRM 2011 的功能区菜单栏中创建了一个自定义按钮，现在我想调用一个 webresource js。这就是我现在所拥有的：

```
<Actions>
    <JavaScriptFunction FunctionName="functionName"
       Library="$webresource:opportunity_ribbon.js" />
</Actions> 
```

但是当我点击按钮时，根本没有任何反应。知道有什么问题吗？

**更新：** 问题似乎是我正在调用的 js。线

locAddActTo(4207);

失败，它说 locAddActTo 的值为空。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:34:38.640

在我将 locAddActTo 更改为 locAddRelatedTo 后它可以工作，但我不知道为什么会这样。任何人？

# java - 使用 Jersey 发送长 HTTP 发布请求时出现错误请求

> ID：11653054
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:48.443
> 
> 标签：java, http, tomcat, jersey, tomcat7

我正在使用 Jersey 发送 HTTP POST 请求，如下所示：

```
MultivaluedMap<String, String> form = new MultivaluedMapImpl();
form.add("body", "Here there is my text");
ClientResponse response = resource.queryParams(form).type(MediaType.APPLICATION_FORM_URLENCODED).post(ClientResponse.class); 
```

当我放入 body 元素时，其长度为**7999**或更短的文本 - 对方的响应还可以

但是，如果我尝试使用超过**8000**的文本长度， 另一方的响应是：

> 返回响应状态 400 Bad Request

我试图在命令行中从 CURL 提交相同的调用，它通过了。

响应状态为 400

它可能是 Jersey/Tomcat 配置中的东西吗？

我试图添加到 tomcat 连接器`maxHttpHeaderSize="65536"`，但没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T19:54:08.707

还将 Jersey 命令更改为：

```
ClientResponse response = resource.type("application/x-www-form-urlencoded").post(ClientResponse.class, form); 
```

而不是您使用查询参数发送它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T09:58:16.463

Jersey 在请求标头中发送数据，因此一旦标头大小超过然后它发送 400 Bad request

您可以编辑 tomcat/conf/server.xml 的 HTTP/1.1 连接器条目，并添加一个 maxHttpHeaderSize="65536" 以从默认最大值 8K 左右增加到 64K。我想您可以根据需要将这个数字提高到最高，但 64K 足以满足我目前的需求及其工作。

**连接器端口="8080" maxHttpHeaderSize="65536" 协议="HTTP/1.1" ...**

# sql - 规范化具有不同结构的表

> ID：11653056
> 
> 赞同：0
> 
> 时间：2012-07-25T15:19:49.730
> 
> 标签：sql, sql-server, database, tsql, database-normalization

我有一个规范化表（表 a）和一个非规范化表（表 b），如下所示：

![在此处输入图像描述](../Images/35ea8fbbf476d4b49cdbe6746640767b.png)

我想为非规范化表中的每个父级在规范化表中插入一个新行。因此，如果表 B 中有一条记录，其中有两个父母的学生 ID，我想将两条记录插入表 A，每个记录都来自表 B。

我已经为此苦苦挣扎了好几个小时，对于如何进行此操作的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:29:06.010

假设`parentID`是一个自动增量列，你可以这样做：

```
INSERT INTO NormalizedFamily(studentID, parentName)
SELECT studentID, parentName1
FROM FlatFamily
UNION
SELECT studentID, parentName2
FROM FlatFamily
WHERE parentName2 IS NOT NULL
UNION
SELECT studentID, parentName3
FROM FlatFamily
WHERE parentName3 IS NOT NULL
UNION
SELECT studentID, parentName4
FROM FlatFamily
WHERE parentName4 IS NOT NULL 
```

无论如何，我真的不明白为什么该列`parentId`是规范化表的键。事实上，同一个父母不能有多个学生与他有关？，键不应该是`parentID`和的组合`studentID`吗？。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:31:57.747

这就是`unpivot`目的。不过对于初学者来说，这有点奇怪和难以理解。这是做同样事情的一种完全hacky的方法，应该很容易理解：

```
 insert into NormalizedFamily (parentId, studentId, parentName)
 select p.parentName,
        p.parentId,
        f.studentId
   from Parent p
            inner join
        (select studentId, parentName1 as parentName from FlatFamily
         union all
         select studentId, parentName2 as parentName from FlatFamily
         union all
         select studentId, parentName3 as parentName from FlatFamily
         union all
         select studentId, parentName4 as parentName from FlatFamily
         union all
         select studentId, parentName5 as parentName from FlatFamily
        ) t                on t.parentName = p.parentName 
```

这是如何`unpivot`工作的。它基本上将列变成行。所以试试这个 select 语句：

```
 SELECT studentId, parentColumnName, parentName
   FROM (SELECT studentId, parentName1, parentName2, parentName3, parentName4, parentName5
           FROM FlatFamily) f
UNPIVOT (parentName FOR parentColumnName IN (parentName1, parentName2, parentName3, parentName4, parentName5)) AS t 
```

# php - 何时使用 mysqli_real_escape_string？

> ID：11653059
> 
> 赞同：2
> 
> 时间：2012-07-25T15:20:04.910
> 
> 标签：php, mysqli

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我想知道 sql 注入并想知道何时使用 mysqli_real_escape_string。

每次我的查询中有 WHERE 子句时都需要使用它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:23:43.690

对于来自用户或不可信的任何数据，您应该使用 mysqli_real_escape_string。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:25:54.157

当您在查询中包含 $_REQUEST "vars" 时，您必须使用它，例如。

```
 $query = "UPDATE foo set bar = '{$_GET['var']}' ..."

 $query = "INSERT INTO foo ('{$_POST['var']}',) ..."

 $query = "SELECT bla from foo WHERE bar = '{$_COOKIE['var']}'" 
```

每个查询都必须是 mysqli_real_escape_string 才能提供注入...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:30:52.920

您使用`mysqli_real_escape_string`它或它的任何变体来确保来自任何用户输入字段的数据被正确转义。

例如，您有一个包含几个输入的表单。您单击提交，数据将作为请求发送到您的 PHP 脚本。在您的脚本中，您将用户发布的值插入数据库。

例如，如果用户在用户登录时在输入字段中键入以下内容：

```
' WHERE `username` = {x} AND password > 1; 
```

该人有可能拥有您正在使用的表中的所有数据。使用：

```
mysqli_real_escape_string($input) 
```

将产生上述内容：

```
\' WHERE `username` = {x} AND password > 1; 
```

' 上的转义字符串将阻止可能的 SQL 注入攻击。

也就是说，您没有理由使用`mysqli_real_escape_string()`PDO，并且绑定参数在转移许多不同的 SQL 攻击/注入方法方面要优越得多。学习并使用它！

**因评论而编辑**

`%`并且`_`还需要特殊处理`mysqli_real_escape_string()`

```
function escape_extra_chars ( $string )
{
    $string = preg_replace("/\%/", "\%", $string);
    $string = preg_replace("/\_/", "\_", $string);

    return $string;
} 
```

无论如何（该功能未经测试）

# facebook - 无法集成 facebook 身份验证

> ID：11653061
> 
> 赞同：0
> 
> 时间：2012-07-25T15:20:10.627
> 
> 标签：facebook

我正在关注：[https ://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

我的网站有自己的登录系统（用 Django/Python 编写）。在不使用 django-social-auth 类型的插件的情况下，我想将 facebook 身份验证集成到我的网络应用程序中。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '{{facebook_app_id}}', // App ID
      channelUrl : '//{{host_name}}/external/fb_channel', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
    // Additional initialization code here
  };
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

但是，我已按照说明操作（https://developers.facebook.com/docs/guides/web/），登录按钮按预期显示，单击时会显示弹出窗口以允许我的应用程序。（我在本地主机 127.0.0.1 运行我的服务器）

下一个是什么？当用户单击登录并允许它时，我希望进行一些服务器端验证以使用 fb 帐户登录我的用户。但我不确定现在该怎么做。

点击使用FB登录后，它闪烁并且没有访问我的服务器。需要一些指导。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:48:37.143

我无法引导您完成您需要的每一段代码，但是我可以解释我过去使用过的一般过程（包括一些 Django 站点），希望您能够使用它建立您的网站：

1.  集成[Facebook JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)
2.  [将调用FB.login](https://developers.facebook.com/docs/reference/javascript/FB.login/)的 JavaScript 函数绑定到“使用 Facebook 登录”按钮，请求该用户所需的所有权限
3.  在调用`function(response)`部分`FB.login`，处理返回的响应，然后对 Django 视图（我为此使用 jQuery）执行 Ajax POST，该视图获取响应，解析它以检索用户的访问令牌并将其存储在用户配置文件中该用户的对象。
4.  然后，您可以使用此 access_token代表该用户服务器端发出 Facebook [Graph API](http://en.wikipedia.org/wiki/Facebook_Platform#Graph_API)请求，或者如果您愿意，您实际上可以使用 JavaScript SDK 完全在客户端使用大量 Ajax 进行所有调用与 Django 后端交互。

# c++ - C++ 中的临界区和返回值

> ID：11653062
> 
> 赞同：7
> 
> 时间：2012-07-25T15:20:11.017
> 
> 标签：c++, multithreading, winapi, return-value, critical-section

在尝试从头开始创建线程安全的容器类时，我遇到了从访问方法返回值的问题。例如在 Windows 中：

```
myNode getSomeData( )
{
  EnterCriticalSection(& myCritSec);
  myNode retobj;
  // fill retobj with data from structure
  LeaveCriticalSection(& myCritSec);
  return retobj;
} 
```

现在我认为这种类型的方法根本不是线程安全的，因为在代码释放临界区之后，另一个线程能够出现并`retobj`在第一个线程返回之前立即覆盖。那么`retobj`以线程安全的方式返回调用者的优雅方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T15:24:57.350

不，它是线程安全的，因为每个线程都有自己的堆栈，这就是堆栈`retobj`。

但是，它肯定不是异常安全的。将关键部分包装在 RAII 样式的对象中会有所帮助。就像是...

```
class CriticalLock : boost::noncopyable {
  CriticalSection &section;

public:
  CriticalLock(CriticalSection &cs) : section(cs)
  {
    EnterCriticalSection(section);
  }

  ~CriticalLock()
  {
    LeaveCriticalSection(section);
  }
}; 
```

用法：

```
myNode getSomeData( )
{
  CriticalLock  lock(myCritSec);  // automatically released.
  ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:24:33.883

这是C++，并且`retobj`具有自动存储类型，所以它存储在堆栈上。

`retobj`每个线程都有自己的堆栈，因此另一个线程在返回它之前不能破坏它的值。

# javascript - 获取框内图像的坐标

> ID：11653064
> 
> 赞同：0
> 
> 时间：2012-07-25T15:20:14.113
> 
> 标签：javascript, jquery

我需要获取以下坐标 topX、topY、bottomX、bottomY，因为它们代表源图像周围的框。它们等于：

topX = 源图像左上角的 X 坐标 topY = 源图像
左上角的 Y 坐标 bottomX = 源图像
右下角的 X 坐标 bottomY = 源图像右下角的
Y 坐标

这是一个计算这些值的示例插件。源图像宽度 = 1024 像素，高度 = 750 像素：

[http://thindery.com/jsfiddle/crop_move.html](http://thindery.com/jsfiddle/crop_move.html)

但是，我有一个新插件，它比上面的插件功能更多，但我不知道如何获得我需要的这 4 个变量。

这是 jsfiddle [http://jsfiddle.net/thindery/cv96e/](http://jsfiddle.net/thindery/cv96e/)

`boxedCoords()`我尝试根据原始插件计算值的方式创建自己的。但是我还是 jQuery 的新手，我无法让它工作。

有人知道如何获得这四个变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:00:23.380

这被解决了。对于解决方案：[jsfiddle](http://jsfiddle.net/thindery/E2ahY/)

# google-analytics - Google Analytics（分析）自定义变量/值报告（如何？）

> ID：11653077
> 
> 赞同：1
> 
> 时间：2012-07-25T15:20:46.040
> 
> 标签：google-analytics

我能够设置 Google Analytics 以发送我可以跟踪的自定义变量。

我想生成一个带有 UserId / Value 的报告并显示用户查看的所有页面。（类似于我在一栏中看到的带有 IP 地址的报告，而在另一栏上查看了页面）

> 自定义变量 1：标签：'userId' 值：'17' 范围：'1'（来自 Chrome 分析工具）

谷歌分析报告相当复杂，所以我希望我能得到一些关于如何创建这样一个报告的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:50:46.657

我也在与谷歌分析作斗争，它确实很有用，但要得到你想要的东西可能需要一些时间。这不是一个答案，而是我在此过程中使用的一些链接的列表，希望它们有所帮助

[http://ga-dev-tools.appspot.com/explorer/](http://ga-dev-tools.appspot.com/explorer/)

如果你把 ga:source ga:referralPath ga:customVarName(n) 放在这里

这个堆栈溢出答案也可能有帮助

[通过使用自定义变量过滤来创建谷歌分析配置文件](https://stackoverflow.com/questions/3736526/create-google-analytics-profile-by-filtering-using-a-custom-variable)

当我使用自定义变量时，我必须自己研究一下，但看起来高级细分部分可能是要走的路。

你可能已经看过了，但它是一篇关于自定义变量的非常好的文章

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

让我们知道你怎么上...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T23:01:59.863

我认为您会想要创建一个包含自定义变量的高级细分。这应该将数据范围缩小到仅包含变量的数据。然后，您可以查看该段中所需的任何报告。

使用正则表达式应该可以让您更好地调整段的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T17:32:44.277

您可以在[Megalytic](http://megalytic.com)报告工具中轻松完成此操作。有一些小部件可让您创建按自定义变量细分数据的报告。例如，自定义变量的流量、自定义变量的转化。免责声明：我是 Megalytic 的创始人。

# hibernate - JPA插入值但插入null

> ID：11653078
> 
> 赞同：0
> 
> 时间：2012-07-25T15:20:49.097
> 
> 标签：hibernate, jpa, insert, null

我尝试使用 Hibernate 在带有 JPA 的 Postgres 中插入一些值。我有一个名为 Reserva 的带有注释的映射类，它有一个字段：

`@Column(nullable=false) @Temporal(javax.persistence.TemporalType.DATE) private Calendar dataFinal;`

我填充了这个类的所有字段，没有一个为空，但是当我调用 persist(reserva) 时，它会抛出一个错误，即 dataFinal 为空，但它不是！我设置了所有字段。有谁知道我发生了什么事？提前致谢！提示：当我使用（Cascade.Persist）保留另一个具有此类（Reserva）的类时，它会正常保留Reserva。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:05:36.050

我猜你要找的是：

```
@Column(nullable=false)
@Temporal(TemporalType.TIMESTAMP)
private Calendar dataFinal; 
```

# html - HTML5 Canvas，创建垂直轮播

> ID：11653084
> 
> 赞同：0
> 
> 时间：2012-07-25T15:21:02.280
> 
> 标签：html, canvas, kineticjs

使用 KineticJS 或纯 Canvas 可以创建这样的垂直轮播： [http ://sorgalla.com/projects/jcarousel/examples/static_vertical.html](http://sorgalla.com/projects/jcarousel/examples/static_vertical.html)

我想构建一个移动界面，用户可以在其中从垂直轮播中选择项目并将它们拖动到画布区域以绘制形状并填充空房间。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:14:50.013

如果您使用的是移动设备，您可能希望保持较低的技术堆栈并仅将其保留在画布上。混合画布元素 + 其他元素有时会导致问题。

我们最近做了一些非常相似的事情，我很想将您链接到但不能。它使用来自 jquery 的 DOM（不是画布）中的可拖动元素，并在发布时检测这些元素在页面上的位置。因为我们知道画布在哪里，所以可以确定下降发生的位置。

# php - 根据用户从此 jQuery UI 可选下拉框中选择的内容创建链接

> ID：11653085
> 
> 赞同：0
> 
> 时间：2012-07-25T15:21:02.287
> 
> 标签：php, javascript, jquery-ui

我正在使用这个：

[http://jqueryui.com/demos/selectable/#method-option](http://jqueryui.com/demos/selectable/#method-option)

这是我的代码：

```
<ol id="selectable">
    <?php foreach ($collection as $key=> $word): ?>
    <li class="ui-widget-content"> <?php echo $word ?> </li>
    <?php endforeach ?>
</ol> 
```

如何获得根据用户选择创建的超链接？每次用的词都不一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:44:16.717

使用[`selected`](http://jqueryui.com/demos/selectable/#event-selected)事件：

```
$(function() {
    $("#selectable").selectable({
        selected: function(event, ui) {
            alert(ui.selected.innerHTML);
        }
    });
});​ 
```

`ui.selected`是所选项目的 DOM 元素

[工作示例](http://jsfiddle.net/vf3W4/)

如果您将`data`属性添加到`li`具有更多详细信息的 ，`href`它会更容易：

```
<ol id="selectable">
    <?php foreach ($collection as $key=> $word): ?>
    <li class="ui-widget-content" data-href="<?php echo $href ?>"> <?php echo $word ?> </li>
    <?php endforeach ?>
</ol> 
```

然后

```
$(function() {
    $("#selectable").selectable({
        selected: function(event, ui) {
            alert($(ui.selected).data('href'));
        }
    });
});​ 
```

[这里的工作示例](http://jsfiddle.net/vf3W4/1/)

要使用所选项目创建链接（锚点），您可以执行以下操作：

```
$(function() {
    $("#selectable").selectable({
        selected: function(event, ui) {
            $item = $(ui.selected);
            $href = $item.data('href');
            $text = $item.text();

            $('<a />').attr({
                href: $href
            }).text($text).append('<br />').appendTo('#links');
        }
    });
});​ 
```

[这里的例子](http://jsfiddle.net/vf3W4/2/)

## 更新

你可以做这样的事情来存储选定的项目，直到它需要 - 即按下按钮：

```
// create temp variable to store the selected element
var selected;

$(function() {
    $("#selectable").selectable({
        selected: function(event, ui) {
           selected = ui.selected;
        }

    });

    $('#getSel').click(function() {
        // do what you want with the Element here
        alert(selected.innerHTML);
    });
}); 
```

[这里的工作示例](http://jsfiddle.net/vf3W4/4/)

# c - C 语言在指定时间调用函数

> ID：11653087
> 
> 赞同：3
> 
> 时间：2012-07-25T15:21:04.463
> 
> 标签：c, linux, timer

我正在使用以下 C 代码（linux ubuntu）每 5 分钟对代理服务器进行一次采样，并获取出价和要价：

```
int main(int argc, char *argv[])
{
struct stock myStock;
struct stock *myStock_ptr;
struct timeval t;
time_t timeNow;

strcpy(myStock.exchange,"MI");
strcpy(myStock.market,"EQCON");
strcpy(myStock.t3Id,"1");
strcpy(myStock.subscLabel,"");
strcpy(myStock.status,"0");
strcpy(myStock.ask,"");
strcpy(myStock.bid,"");

buildSubLabel(&myStock);

while (1) {
    t.tv_sec = 1;
    t.tv_usec = 0;

    select(0, NULL, NULL, NULL, &t);
    time(&timeNow);

    sample(&myStock);

    printf("DataLink on %s\n",myStock.subscLabel);
    printf("Time Now: --- %s",ctime(&timeNow));
    printf("DataLink Status---- %s\n",myStock.status);
    printf("Ask --- %s\n",myStock.ask);
    printf("Bid --- %s\n",myStock.bid);
    printf("###################\n");

}

return 0;
} 
```

我不能做的是在特定时间安排示例功能。我想在 9.01 第一次调用示例函数 9.05 第二次 9.10 第三次 9.15 ...... 9.20 ...... 依此类推，直到 17.30 在 17.30 之后进程应该终止。

最好的问候马西莫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:41:55.873

您应该使用线程在特定时间后调用您想要的函数。
做这样的事情：

```
#include <pthread.h>
#include <unistd.h> // for sleep() and usleep()

void *thread(void *arg) { // arguments not used in this case
    sleep(9); // wait 9 seconds
    usleep(10000) // wait 10000 microseconds (1000000s are 1 second)
    // thread has sleeped for 9.01 seconds
    function(); // call your function
    // add more here
    return NULL;
}

int main() {
    pthread_t pt;
    pthread_create(&pt, NULL, thread, NULL);
    // thread is running and will call function() after 9.01 seconds
} 
```

编写线程函数的另一种方法（通过检查程序运行的时间）：

```
void *thread(void *arg) {
    while ((clock() / (double)CLOCKS_PER_SEC) < 9.01) // check the running time while it's less than 9.01 seconds
        ;
    function();
    // etc...
    return NULL;
} 
```

请记住：您必须链接 pthread 库！如果您使用 gcc 这将是`-lpthread`.

有关 pthreads（POSIX 线程）的更多信息，您可以查看此网站：
[https](https://computing.llnl.gov/tutorials/pthreads/)
://computing.llnl.gov/tutorials/pthreads/ 关于时钟功能：
[http ://www.cplusplus.com/reference/clibrary/ ctime/时钟/](http://www.cplusplus.com/reference/clibrary/ctime/clock/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:46:50.840

完成处理后（即处理完之后`printf`），您需要计算延迟，因为处理需要时间。您也可以在到达 17:30 或更晚时结束循环。

如果您不减少延迟，那么您就不会在一天中的正确时间获得样品。

# c - 将 SHGetSpecialFolderPath+SubFolder 与 SHFileOperation 一起使用

> ID：11653089
> 
> 赞同：0
> 
> 时间：2012-07-25T15:21:09.557
> 
> 标签：c, winapi, directory, tchar

我想`C:\Users\username\AppData\Roaming\appname`在用户卸载应用程序时删除该文件夹`appname`。

首先，我使用以下代码获取路径`C:\Users\username\AppData\Roaming`：

```
TCHAR dir[MAX_PATH];
dir[0] = '\0';
BOOL ok = SHGetSpecialFolderPath(NULL, dir, CSIDL_APPDATA, TRUE); 
```

appname 定义为`_T("appname")`

第一个问题是：`How to append "appname" to "dir"?`

假设上述完成。然后我需要使用`SHFileOperation`删除非空文件夹`C:\Users\username\AppData\Roaming\appname`。所以我需要一个`SHFILEOPSTRUCT`结构中的双空终止字符串。所以

`How to get a double null-terminated string from the result of the first step? Just append _T("\0\0") to it?`

更新：我可以`TCHAR *dir2 = lstrcat(dir, appname);`用来获取路径。但是当我尝试使用时`TCHAR *dir3 = lstrcat(dir2, _T("\0\0"));`，该文件夹并没有被删除。任何数量`\0`都行不通。

* * *

ps：

如果我直接执行以下操作，我可以让它工作。问题是我希望它独立于用户。

```
TCHAR path[] = _T("C:\\Users\\username\\AppData\\Roaming\\appname");
memcpy(path + sizeof(path) / sizeof(TCHAR) - 1, _T("\0\0\0"), 3); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:42:42.370

有关附加路径，请参见[PathAppend](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773565%28v=vs.85%29.aspx)函数。

```
TCHAR dir[MAX_PATH] = {0};

BOOL ok = SHGetSpecialFolderPath(NULL, dir, CSIDL_APPDATA, TRUE);

PathAppend(dir, _T("appname")); 
```

如果要确保**dir**变量的双空终止：

```
dir[MAX_PATH - 1] = 0;
dir[MAX_PATH - 2] = 0; 
```

# mysql - ColdFusion 表格

> ID：11653095
> 
> 赞同：1
> 
> 时间：2012-07-25T15:21:23.613
> 
> 标签：mysql, forms, coldfusion

我正在尝试制作一个访问 MySQL 数据库的表单。但这一切对我来说都是新鲜的。我想我可能试图超越我对此的基本理解。这是我的问题。

我有一个表格。在这种形式中，我与数据库建立了连接，并且能够发布到数据库。我想做的是有一个带有“tile 1”、“tile 2”、“tile 3”的选项字段。对于每个“图块”，我希望将其余字段保存在该图块 ID 下。从选项字段中选择磁贴时，我还希望能够提取该磁贴信息。

这是我当前的代码。请记住，我对所有这些都是新手。谢谢。

**形式：**

```
<cfform method="post" name="TileAdAdmin" action="index.cfm">
          <cfoutput>
              <table width="500px">
              <tr>
                <td height="159"><label class="labelStyle">Tile Ads</label></td>
                <td>
                  Tile Number:<select name="TAID" id="TAID">
                    <option value="0">None</option>
                    <option value="1">Tile 1</option>
                    <option value="2">Tile 2</option>
                    <option value="3">Tile 3</option>
                  </select><br /><br />
                  Headline:
                   <input name="TAHL" type="text" id="TAHL" title="TAHL" value="#variables.ta.TAHL#" maxlength="30" />
                   <br />
                   Image Name: 
                   <input name="TAImage" type="text" id="TAImage" title="TAImage" value="#variables.ta.TAImage#" maxlength="30" />
                   <br />
                   Discription:                   
                   <textarea name="TADiscription" cols="30" rows="6" id="TADiscription" title="VimeoID">#variables.ta.TADiscription#</textarea>                   <br />
                  </td>
              </tr>
            </table><br />

            <input type="hidden" value="#variables.controller#" name="controller">
            <input type="hidden" value="#variables.action#" name="action">
            <input type="Submit" value="Submit" name="Submit" class="formInput">
          </cfoutput>
        </cfform> 
```

**道代码：**

```
 <cfcomponent name="TADAO" displayname="" hint="" output="false">

  <cffunction name="read" access="public" returntype="Void" output="false" hint="CRUD method">
    <cfargument name="ta" type="ta" required="yes" />

    <cfset var qRead = 0 />
    <cfquery name="qRead" datasource="#Application.dbsource#" >
      SELECT
        TAID,
        TAHL,
        TAIMAGE,
        TADISCRIPTION
      FROM
        T026_TILE_ADS
    </cfquery>

    <cfif qRead.RecordCount>
      <cfset arguments.ta.setTAID(qread.TAID) />
      <cfset arguments.ta.setTAHL(qread.TAHL) />
      <cfset arguments.ta.setTAImage(qread.TAIMAGE) />
      <cfset arguments.ta.setTADiscription(qread.TADISCRIPTION) />
      <cfelse>
      <cfthrow type="emptyRecordset" errorcode="TADAO.read.emptyRecordset" message="Unable to locate the TILE_AD data record." />
    </cfif>
  </cffunction>

  <cffunction name="update" access="public" returntype="Void" output="false" hint="CRUD method">
    <cfargument name="TA" type="TA" required="yes" />

    <cfquery name="qUpdate" datasource="#Application.dbsource#">
      UPDATE
        T026_TILE_ADS
      SET
        TAID = <cfqueryparam cfsqltype="cf_sql_numeric" value="#arguments.ta.getTAID()#" />,
        TAHL = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.ta.getTAHL()#" />,
        TAIMAGE = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.ta.getTAImage()#" />,
        TADISCRIPTION = <cfqueryparam cfsqltype="cf_sql_text" value="#arguments.ta.getTADiscription()#" />
     </cfquery>

  </cffunction>

</cfcomponent> 
```

**组件代码：**

```
<cfcomponent displayname="ta" hint="" output="false">

<cfproperty name="TAID" displayname="" type="numeric" />
<cfproperty name="TAHL" displayname="" type="string" />
<cfproperty name="TAImage" displayname="" type="string" />
<cfproperty name="TADiscription" displayname="" type="string" />

<cffunction name="init" access="public" returnType="TA" output="false" hint="">
  <cfset this.TAID = 0 />
  <cfset this.TAHL = "headline" />
  <cfset this.TAImage = "IMAGE" />
  <cfset this.TADiscription = "Discription" />

  <cfreturn this />
</cffunction>

<cffunction name="getTAID" access="public" output="false" returntype="numeric">
    <cfreturn this.TAID />
</cffunction>

<cffunction name="setTAID" access="public" output="false" returntype="void">
    <cfargument name="TAID" type="numeric" required="true" />
    <cfset this.TAID = arguments.TAID />
    <cfreturn />
</cffunction>

<cffunction name="getTAHL" access="public" output="false" returntype="string">
    <cfreturn this.TAHL />
</cffunction>

<cffunction name="setTAHL" access="public" output="false" returntype="void">
    <cfargument name="TAHL" type="string" required="true" />
    <cfset this.TAHL = arguments.TAHL />
    <cfreturn />
</cffunction>

<cffunction name="getTAImage" access="public" output="false" returntype="string">
    <cfreturn this.TAImage />
</cffunction>

<cffunction name="setTAImage" access="public" output="false" returntype="void">
    <cfargument name="TAImage" type="string" required="true" />
    <cfset this.TAImage = arguments.TAImage />
    <cfreturn />
</cffunction>

<cffunction name="getTADiscription" access="public" output="false" returntype="string">
    <cfreturn this.TADiscription />
</cffunction>

<cffunction name="setTADiscription" access="public" output="false" returntype="void">
    <cfargument name="TADiscription" type="string" required="true" />
    <cfset this.TADiscription = arguments.TADiscription />
    <cfreturn />
</cffunction>

 <cffunction name="dump" access="public" output="true" returntype="void">
  <cfoutput>
    Tile:         #this.TAID# <br />
    Headline:         #this.TAHL# <br />
    Image:         #this.TAImage# <br />
    Description:         #this.TADiscription# <br />
    </cfoutput>
</cffunction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:50:17.503

**TAID 作为主键**

`TAID`是每个图块的标识符，因此首先您需要将其添加到语句中的`WHERE`子句中`SQL`。

* * *

```
 UPDATE
    T026_TILE_ADS
  SET
    TAHL = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.ta.getTAHL()#" />,
    TAIMAGE = <cfqueryparam cfsqltype="cf_sql_varchar" value="#arguments.ta.getTAImage()#" />,
    TADISCRIPTION = <cfqueryparam cfsqltype="cf_sql_text" value="#arguments.ta.getTADiscription()#" />
  WHERE
    TAID = <cfqueryparam cfsqltype="cf_sql_numeric" value="#arguments.ta.getTAID()#" /> 
```

* * *

```
 SELECT
    TAID,
    TAHL,
    TAIMAGE,
    TADISCRIPTION
  FROM
    T026_TILE_ADS
  WHERE
    TAID = <cfqueryparam cfsqltype="cf_sql_numeric" value="#arguments.ta.getTAID()#" /> 
```

* * *

~~**在选择查询之前调用更新查询**~~

更新：分析您的数据库代码后，cfquery 的定义顺序并不重要，因为它们`CFFUNCTIONS`位于`CFCOMPONENT`.

* * *

**使用 Jquery 选择选项**

最后，您需要从提交的表单中选择磁贴，您可以使用[Jquery](http://jquery.com)为您的代码添加趣味（添加在里面，在末尾`CFOUTPUT`）

* * *

```
<!--- (beginning of CFOUTPUT ...) --->
<input type="Submit" value="Submit" name="Submit" class="formInput">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script>
$(document).ready(function(){
   $('SELECT##TAID').val(#variables.ta.TAID#);
});
</script>
</cfoutput> 
```

* * *

## 编辑 26/07

**`<CFSELECT>`改为使用**

在字段中是一个简单`CFOUTPUT`的`TAID`HTML `SELECT`。由于我们想从数据库中提取记录，试试这个：

放在`CFOUTPUT`标签之前：

```
<cfquery name="qryTiles" datasource="#Application.dbsource#">
  SELECT
    TAID,
    TAHL,
    TAIMAGE,
    TADISCRIPTION
  FROM
    T026_TILE_ADS
</cfquery> 
```

并替换：

```
<select name="TAID" id="TAID">
<option value="0">None</option>
<option value="1">Tile 1</option>
<option value="2">Tile 2</option>
<option value="3">Tile 3</option>
</select> 
```

和：

```
<cfselect name="TAID"
 size=1
 multiple="no"
 query="qryTiles"
 value="TAID"
 display="TAID"
 queryPosition="below">
  <option value="0">None</option>
</cfselect> 
```

# sql-server-2005 - 删除子查询

> ID：11653096
> 
> 赞同：1
> 
> 时间：2012-07-25T15:21:25.470
> 
> 标签：sql-server-2005, join, query-optimization, subquery

我有这个查询

```
select 
    T1.local,
    m.Nombre as Marca, 
    T1.NombreLinea as Linea , 
    case  when T1.IdComprobanteTipo in (21,23,26,28) then 0 else -sum(T1.Cantidad) end as Cantidad,
    case  when T1.IdComprobanteTipo in (21,23,26,28) 
    --toma en cuenta los descuentos de las facturas que fueron anuladas
    then T1.TotalNeto 
    else isnull(T1.ImporteNeto,0) - isnull((select sum(importe) as importe 
                                            from GrimPosCon..Fact_Descuento (nolock) DD
                                            where DD.IdComprobante = T1.idComprobante  and T1.IdDim_Producto = IdDim_Producto
                                             and T1.IdDim_Medida = IdDim_Medida and T1.IdDim_Calidad = IdDim_Calidad 
                                             and exists 
                                                (
                                                select 1 
                                                    from GrimPosCon..ComprobanteReferencias (nolock) AA
                                                    inner join GrimPosCon..Fact_Comprobante (nolock) BB on aa.IdComprobanteCredito = BB.IdComprobante
                                                    where AA.IdComprobanteDebito = DD.IdComprobante
                                                    and BB.IdDim_ComprobanteTipo in (4,13,16,19)
                                                )
                                            ),0) end as IMPORTE, 
    T1.NombreFamilia as Familia
from 
#Query T1
inner join GrimPosCon..Dim_Marca(nolock) m on m.IdDim_Marca = T1.IDDim_Marca
Group by  
    T1.local, m.Nombre,T1.NombreLinea,T1.NombreFamilia,T1.TotalNeto,T1.IdComprobante, T1.IdDim_producto,
    T1.idDim_Medida,T1.ImporteNeto,T1.IdComprobanteTipo,T1.IdDim_Calidad 
```

我想删除最大的子查询。我试着去做`Left Joins where is not null`，但它给了我不同的结果。我该如何修改？我想要相同的结果，但使用一些联接，或者比该子查询更快的东西。根据执行计划，该子查询占总查询的 %35，运行所有查询大约需要 50 秒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T18:16:07.383

你可以试试这个查询：

```
select 
  T1.local,
  m.Nombre as Marca, 
  T1.NombreLinea as Linea , 
  case  when T1.IdComprobanteTipo in (21,23,26,28) then 0 else -sum(T1.Cantidad) end as Cantidad,
  case  when T1.IdComprobanteTipo in (21,23,26,28) 
  --toma en cuenta los descuentos de las facturas que fueron anuladas
    then T1.TotalNeto 
    else isnull(T1.ImporteNeto,0) - isnull(DD.importe,0)
  end as IMPORTE,
  T1.NombreFamilia as Familia
from 
  #Query T1
  inner join
  GrimPosCon..Dim_Marca(nolock) m on m.IdDim_Marca = T1.IDDim_Marca
  left join
  (
    select
      CC.IdComprobante,
      CC.IdDim_Producto,
      CC.IdDim_Medida,
      CC.IdDim_Calidad,      
      sum(importe) as importe 
    from
      GrimPosCon..Fact_Descuento (nolock) CC
    where
      exists 
        (
          select 1
          from
            GrimPosCon..ComprobanteReferencias (nolock) AA
            inner join
            GrimPosCon..Fact_Comprobante (nolock) BB on aa.IdComprobanteCredito = BB.IdComprobante
          where
            AA.IdComprobanteDebito = CC.IdComprobante
            and
            BB.IdDim_ComprobanteTipo in (4,13,16,19)
        )
    group by
      DD.IdComprobante,
      DD.IdDim_Producto,
      DD.IdDim_Medida,
      DD.IdDim_Calidad
  ) as DD on
      DD.IdComprobante = T1.idComprobante
      and
      DD.IdDim_Producto = T1.IdDim_Producto
      and
      DD.IdDim_Medida = T1.IdDim_Medida
      and
      DD.IdDim_Calidad = T1.IdDim_Calidad 
  Group by  
    T1.local, m.Nombre,T1.NombreLinea,T1.NombreFamilia,T1.TotalNeto,T1.IdComprobante, T1.IdDim_producto,
    T1.idDim_Medida,T1.ImporteNeto,T1.IdComprobanteTipo,T1.IdDim_Calidad,DD.importe 
```

它可能运行得更快或更慢，具体取决于您的数据。

# android - 获取 TextViews 数组

> ID：11653098
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:21:29.980
> 
> 标签：android, android-view

我正在制作一个将结果存储在多个文本视图中的应用程序，首先，我需要获取视图，它们是名为结果 1 的 20 个视图，....结果 20。我怎样才能将它们放入文本视图数组。我找到了这个方法，但是太长了

```
TextView [] results = {(TextView)findViewById (R.id.result1),
            (TextView)findViewById (R.id.result2),(TextView)findViewById (R.id.result3),
            (TextView)findViewById (R.id.result4),(TextView)findViewById (R.id.result5),
            (TextView)findViewById (R.id.result6).....}; 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:31:42.420

如果你有一个句柄来父包含文本视图的布局，你可以用这样的函数递归地发现它们，

```
void getTextViews(View view, List<TextView> textViews) {
  if (view instanceof TextView) {
    textviews.add((TextView)view);
  else if (TextView instanceof ViewGroup) {
    getTextViews((ViewGroup)view, textViews);
  }
} 
```

现在这样称呼它，

```
ViewGroup topLayout = findViewById(...);
List<TextView> views = new ArrayList<TextView>();
getTextViews(topLayout, views);
TextView[] textViewArray = textViews.toArray(new TextView[0]); 
```

这有点长，但它的优点是如果您添加、删除或重命名文本视图，则无需更改代码。

恕我直言，不要专注于编写更少的代码，而是专注于编写清晰的代码。你打字的速度很少是你工作效率的限制因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:35:38.200

您的开始方式是正确的，现在考虑将重复的代码放入一个循环中。

例如，设计一个方法，将 TextView 资源的数组作为输入，并使用“for”循环通过相应的 id 查找该视图。

```
private TextView[] initTextViews(int[] ids){

        TextView[] collection = new TextView[ids.length];

        for(int i=0; i<ids.length; i++){
            TextView currentTextView = (TextView)findViewById(ids[i]);
            collection[i]=currentTextView;
        }

        return collection;
} 
```

然后你像这样使用它：

```
// Your TextViews ids
int[] ids={R.id.result1, R.id.result2, R.id.result3};

// The resulting array
TextView[] textViews=initTextViews(ids); 
```

# iphone - 填充 UITableView 单元格

> ID：11653099
> 
> 赞同：0
> 
> 时间：2012-07-25T15:21:37.147
> 
> 标签：iphone, uitableview, nsmutablearray

好的，所以我在这个函数中写了一些代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"tableviwcell is getting called");
    properties = [NSUserDefaults  standardUserDefaults];

    NSDictionary *events_dict = [properties objectForKey:@"events_dict"];
    NSDictionary *events = [events_dict objectForKey:@"event"];

    am_participants = [events objectForKey:@"amParticipants"];
    pm_participants = [events objectForKey:@"pmParticipants"];

    UITableViewCell *cell = nil;
    cell = [tableView dequeueReusableCellWithIdentifier:@"currentCell"];
    if(cell == nil){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"currentCell"];
    }
    int sizeofam = [am_participants count];
    int sizeofpm = [pm_participants count];
    NSMutableArray *participants  =[[NSMutableArray alloc] init];
    NSLog(@"size of am: %i", sizeofam);
if(sizeofam > 0 && sizeofpm > 0){
    for(int i = 0; i < sizeofam; i++){
        NSDictionary *ampart_dict = [am_participants objectAtIndex:i];
        NSString *ampart_email = [ampart_dict objectForKey:@"email"];
        NSString *ampart_email_extra = [@"am" stringByAppendingString:ampart_email];
        [participants addObject:ampart_dict];
    }

    for(int i = 0; i < sizeofpm; i++){
        NSDictionary *pmpart_dict = [pm_participants objectAtIndex:i];
        NSString *pmpart_email = [pmpart_dict objectForKey:@"email"];
        NSString *pmpart_email_extra = [@"pm" stringByAppendingString:pmpart_email];
        [participants addObject:pmpart_dict];
        NSLog(@"%@", participants);
    } 

    int sizeofparticipants = [participants count];

    for(int i = 0; i < sizeofparticipants; i++){
        NSString *participanti = [[participants objectAtIndex:i] objectForKey:@"email"];
        for(int j = 0; j < sizeofparticipants; j++){
            NSString *participantj = [[participants objectAtIndex:j] objectForKey:@"email"];

            if([participanti isEqualToString:participantj]){
                NSLog(@"Participant j:  %@", participantj);
                [participants removeObjectAtIndex:j];
                sizeofparticipants = [participants count];
            }
        }
    } 
```

基本上我需要将两个数组 am_participants 和 pm_participants 合并到一个参与者数组中。数组中的每个对象都是一个字典，其中包含各种值，例如姓名、电子邮件等。然后我必须从列表中删除任何重复的值（例如，如果有人在 am 列表和 pm 列表中。我通过删除来做到这一点如果他们的电子邮件地址在任一列表中相同，则值。

在此之后，我需要通过使用参与者列表填充单元格来在一个列表中显示名为“参与者”的新参与者数组。

我已将单元格数设置为 30。

然而，当向下滚动列表时，单元格会随机填充不同的名称，因为认为数组位置正在移动以及出现重复值。

有人可以解释我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:10:33.657

上面没有提到单元格分配代码，但我假设您`participants`按照说明从单元格的内容中分配值。问题是你在里面创建你的数组`cellForRowAtIndexPath:`。每次要显示新单元格时都会调用此方法，因此，您正在为每一行重新创建参与者。您需要将上面的代码移动到`viewDidLoad`或`viewDidAppear`。

# cuda - 在设备代码 CUDA 中使用 memcmp

> ID：11653100
> 
> 赞同：2
> 
> 时间：2012-07-25T15:21:37.463
> 
> 标签：cuda, memcmp

我在我的 CUDA C 程序中使用 uthash (http://uthash.sourceforge.net/) 实现哈希表。

我有一堆键说 allkeys[100]。我想做的是，使用哈希表上的这 100 个键执行并行哈希表查找，并返回一个名为 results[100] 的结果数组。基本上启动一个 xdimension 为 100 的网格，每个块执行一个哈希表查找并将其存储在结果数组中。

因此，到目前为止我尝试的是，cudMalloc 设备内存上的哈希表（哈希表中的条目数 X 一个结构的大小，定义一个带有句柄的哈希表条目）然后我 cudaMemcpy 主机哈希表到设备哈希表。

但是，在我的`__device__ searchhashtable(int key)`函数中，我收到一条错误消息

```
error calling host function memcmp __device__ __global__ function 
```

我经历了 uthash.h 的实现，可以看到它使用了 string.h 库，尤其是在 memcmp 函数上失败了。

处理这个的最好方法是什么？

# c++ - 什么是好的返回类型`boost::shared_ptr `?

> ID：11653109
> 
> 赞同：1
> 
> 时间：2012-07-25T15:22:03.793
> 
> 标签：c++, boost

该函数需要返回一个`shared_ptr`指向`StructA`.

```
struct StructA
{
    // complicated struct that also holds other sub-structure
    ....
};

const boost::shared_ptr<const StructA&>& GetStructA(...)
{...} #0.5

const boost::shared_ptr<const StructA>& GetStructA(...)
{...} #0

const boost::shared_ptr<StructA>& GetStructA(...)
{...} #1

const boost::shared_ptr<StructA> GetStructA(...)
{...} #2

boost::shared_ptr<const StructA> 
{...} #3

boost::shared_ptr<StructA> GetStructA(...)
{...} #4

boost::shared_ptr<StructA>& GetStructA(...)
{...} #5

boost::shared_ptr<StructA&> GetStructA(...)
{...} #6 
```

有很多选择，我相信其中一个是最好的（如果还有人请指出）。

就个人而言，我更喜欢使用**#0**

```
const boost::shared_ptr<const StructA&>& GetStructA(...)
{...} #0 
```

遗留系统使用**#2**

```
const boost::shared_ptr<StructA>  GetStructA(...)
{...} #2 
```

我更喜欢选择**#0**的原因如下：

1.  return const shared_ptr，因此该函数的调用者不应更改返回的 shared_ptr 可能指向内部数据结构

2.  通过引用返回，这样我就可以避免 +/- 的 shared_ptr 的引用计数

3.  shared_ptr 持有 const StructA&，因此调用者无法更改 const shared_ptr 的内容。如果我是对的，即使 shared_ptr 是 const，它也不能阻止调用者更改指向的数据，除非数据是 const。

请

1.  如果我犯了任何错误，请纠正我的理解
2.  为此函数提供最佳返回签名。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:43:48.423

这取决于函数的作用：

*   它是在创建 StructA 的新对象吗？如果是，那么您必须返回 shared_ptr 的副本。
*   它只是提供对您知道在返回的引用下不会过期的 StructA 对象的访问吗？然后你可以返回 const& （但不要 - 见下文）

正如您自己所怀疑的那样， shared_ptr 上的 const& 不会阻止对它指向的对象的非 const 访问 - 它只是意味着 shared_ptr 对象本身是常量并且不能被重置或指向其他对象。在这种情况下，shared_ptr 的语义与普通指针的语义相同。

在返回访问指针时，我曾经经常使用 const& 习惯用法。但最终它会导致非常微妙的错误，尤其是在多线程代码中（我很小心，但我还是被咬了）。所以上面 peachykeen 的评论是正确的，我对所有新代码都遵循这个成语。不仅要注意返回，还要注意函数参数是 shared_ptr 时。最后，您*真的*想知道，每当您有一个由 shared_ptr 指向的对象时-您*确实*拥有它，而不仅仅是对一个长期死对象的 shared_ptr 的引用。

# iphone - 寻找一种优雅的方法来检查字典中是否存在密钥

> ID：11653110
> 
> 赞同：17
> 
> 时间：2012-07-25T15:22:05.573
> 
> 标签：iphone, objective-c, ios, ipad

> **可能重复：**
> [如何检查 NSDictionary 或 NSMutableDictionary 是否包含密钥？](https://stackoverflow.com/questions/2784648/how-to-check-if-an-nsdictionary-or-nsmutabledictionary-contains-a-key)

我可以从字典中获取键（字符串）的数组，然后循环遍历它，与我要检查的键进行字符串比较，看看该字典是否包含我寻找的键。

但是是否有更优雅的方式来检查字典中是否存在密钥？

```
 NSArray * keys = [taglistDict allKeys];
        for (NSString *key in keys) 
        {
           // do string compare etc
        } 
```

-代码

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-25T15:24:35.530

An`NSDictionary`不能包含值，因此如果键不存在`nil`，您可以简单地使用`[NSDictionary objectForKey:]`which 将返回：`nil`

```
BOOL exists = [taglistDict objectForKey:key] != nil; 
```

编辑：正如@OMGPOP 所述，这也适用于使用以下语法的Objective-C文字：

```
NSDictionary *dict = @{ @"key1" : @"value1", @"key2" : @"value2" };

if (dict[@"key3"])
    NSLog(@"Exists");
else
    NSLog(@"Does not exist"); 
```

印刷：

```
Does not exist 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T15:26:24.333

Trojanfoe 可能更好，但您也可以这样做：

```
[[taglistDict allKeys]containsObject:key] 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T15:25:20.847

假设键是类型`NSString`并且`keys`是字典，那么你应该使用类似的东西：

```
if [keys containObject:key] {
 // do something
} 
```

# c++ - push_back 和 insert(end(),x) 之间的 std::vector 不一致崩溃

> ID：11653111
> 
> 赞同：21
> 
> 时间：2012-07-25T15:22:05.420
> 
> 标签：c++, visual-studio-2010, vector

将此代码放入 MS Visual C++ 2010，编译（调试或发布），insert() 循环会崩溃，但 push_back 循环不会：

```
#include <vector>
#include <string>

using std::vector;
using std::string;

int main()
{
   vector<string> vec1;
   vec1.push_back("hello");

   for (int i = 0; i != 10; ++i)
      vec1.push_back( vec1[0] );

   vector<string> vec2;
   vec2.push_back("hello");

   for (int i = 0; i != 10; ++i)
      vec2.insert( vec2.end(), vec2[0] );

   return 0;
} 
```

问题是 push_back() 和 insert() 都通过引用获取新项目，并且当向量被重新分配以获得更多空间时，新项目在插入之前变得无效。

GCC 应该也有这个问题。我没有检查 Clang，但这取决于它使用的是哪个 STD 库。

MSVC2010 在 push_back() 中有一些额外的代码，用于检测新项目是否实际上是向量中的项目。如果是这样，它会记录项目的索引并在分配内存后使用它来插入项目（而不是使用现在无效的引用）——使用 _Inside(_STD addressof(_Val))

MSVC 的额外代码是非标准的吗？

我担心的是我不确定我可能在什么代码中做了类似 vec.push_back(vec[1]); 或 vec.insert(it, vec[2]); 我必须查看数百行甚至数千行使用 push_back 和 insert 的代码，这只是我自己的代码...... 3rd 方库也可能受到影响。

我假设使用这种技术可以使 GCC 以可怕的方式死亡（我没有看到额外的代码来处理这种情况，但 valgrind 在我的简单示例中没有检测到它，因此更难测试），

如何最好地检测和避免犯这个错误？

MSVC2010 的额外 push_back() 代码是非标准的吗？当 MSVC 发现以这种方式使用的向量时，是否应该改为检测并断言？（即安全计算倡议）

我正在考虑破解 MSVC2010 和 GCC 的标头来检测这些情况。

还有其他想法吗？

谢谢，保罗

PS：另请注意，如果您可以保证向量不需要调整大小，则此用法非常好（且有效）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T06:33:21.217

好的，我在virtualbox上安装了Win8 + MSVC2012来试一试。Geez Windows 8 对鼠标来说很烦人，没有按钮可以推动只是悬停，这对于窗口中的屏幕来说很难做到。

结果很有趣，但恕我直言仍然不一致。

MSVC 2010：错误来自移动语义，正如 ecatmur 所建议的那样。

问题是 v.insert(v.end(),v[0]); 将选择 insert(it, T && val) 方法，这在两个方面是错误的：1) 它可能导致 v[0] 的破坏。似乎没有，这表明 const& 引用被保留，新版本是通过复制而不是移动创建的。和 2) 在调整向量大小之前，代码路径不会复制 val 。

请注意，由于 push_back(&&) 中的额外代码（黑客攻击？），该问题并未很快被注意到 - 请参阅底部有关 MSVC2012 的进一步评论。

（请注意， insert(it,const&) 将在调整向量大小之前首先正确复制新项目，因此如果选择了正确的方法，则根本没有问题）。

在 MSVC 2012 中，这是通过正确选择 insert(it, const T & val) 方法来解决的，但是您仍然可以看到 push_back() 有一些额外的代码来“修复”不正确的用法。

考虑这个测试：

```
#include <vector>
#include <string>

using std::vector;
using std::string;

int main()
{
   vector<string> vec1;
   vec1.push_back("hello");

   for (int i = 0; i != 1000; ++i)
   {
       string temp = vec1[0];
      vec1.push_back( std::move(vec1[0]) );
   }

   vector<string> vec2;
   vec2.push_back("hello");

   for (int i = 0; i != 1000; ++i)
   {
       string temp = vec2[0];
      vec2.insert( vec2.end(), std::move(vec2[0]) );
   }

   return 0;
} 
```

在这两种情况下，std::move() 都用于强制选择 && 移动方法。在这两种情况下，代码都应该导致灾难并希望崩溃。

但是，在 MSVC 2012 中，push_back() 循环工作正常，因为 push_back(&&) 中有一些额外的代码可以检测 _Val 是否与向量在同一地址空间中，如果是，则进行复制而不是移动。但是，如果新项目不是严格地在相同的内存空间中但仍然是原始向量的一部分（例如 pimpl 指针）怎么办？我可以想象让 push_back(&&) 像它应该那样死掉的方法。

当然这实际上不是必需的，如果程序员说 std::move() 那么这就是应该发生的，对吧？额外的检查肯定会使用一些不必要的 CPU 周期。

insert() 循环没有这种技巧，这也意味着错误地使用 std::move() 有时只会导致损坏。就我个人而言，我更喜欢快速故障而不是仅在您向客户演示时发生故障。

所以...解决方案...

1.  不要使用 v.insert(v.end(), v[0]) 或类似的。这是一个不合理的要求，因为第 3 方代码（例如 Boost、VTK、QT、tbb、xml 库等）可能会在其数百万行代码中的某个地方使用它。我使用的所有 3rd 方库，我都会重新编译，所以无论我的代码受到什么影响，它们也会受到影响。

2.  升级到 MSVC 2012 RC。我必须等到它变成金牌，然后它会按预期工作（在其他部分有新的和令人兴奋的错误）。

3.  破解标头以检测使用情况。我已经这样做了，但是检测工作的唯一时间是代码实际运行时。

4.  破解标题以修复插入（&&）。（并重新编译所有库/项目 - 叹息）。最简单的方法是简单地注释掉 insert(&&) 变体（然后我们回到 C++11 之前的性能）。另一种方法是使用相同的 push_back(&&) hack，尽管我不认为这是一种可靠的方法。也许 push_back(&&) 也应该被注释掉。

**进一步更新：** 我修复了标题。结果很简单...

MSVC2010 的 insert(&&) 声明如下所示：

```
template<class _Valty>
iterator insert(const_iterator _Where, _Valty&& _Val) 
```

MSVC2012 的 insert(&&) 删除了模板部分，现在看起来像这样：

```
iterator insert(const_iterator _Where, _Ty&& _Val) 
```

所以我只是从 MSVC2010 的 insert() 中删除了模板化的 _Valty，现在选择了正确的方法。它现在也匹配 push_back(&&) 的声明方式（即参数上没有模板）。emplace*(&&) 方法仍有模板化参数，但没有 const& 混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:39:22.937

编辑：最初我的印象是插入现有元素可能是未定义的行为；我不再相信它是，原因如下：

Per[如何将重复元素插入向量中？](https://stackoverflow.com/questions/10218223/how-to-insert-a-duplicate-element-into-a-vector)标准中没有任何语言禁止插入对现有元素的引用。指代迭代器和引用失效的语言只能被解读为指代操作完成后的行为（在没有其他指示的情况下）。

请注意，根据[重叠向量::插入的行为，](https://stackoverflow.com/questions/1329181/the-behavior-of-overlapped-vectorinsert?rq=1)指定迭代器参数`insert(it, first, last)`不应是序列中的迭代器；没有任何这样的语言`push_back`意味着特别允许对序列的引用（根据*inclusio unius est exclusio alterius*的法律原则）。

查看您链接的错误报告，我猜 MSVC 在这种情况下崩溃是由于他们的代码在存在 C++11 移动语义的情况下中断，并且不是故意的。g++ 通过（我认为）将插入的元素复制到新分配的内存中的适当位置来处理这种情况，*然后*将现有元素复制/移动到：

```
void insert(it, const T &t) {
    if (size() + 1 > capacity()) {
        T *new_data = (T *) malloc(sizeof(T) * capacity() * 2);
        new (&new_data[it - begin()]) T(t);
        // move [begin(), it) to [new_data, &new_data[it - begin()])
        // move [it, end()) to [&new_data[it - begin() + 1], &new_data[size() + 1])
    }
    ...
} 
```

`std::vector`您可以使用自己的类模板进行包装，而不是破解标题。如果您要修改标准实现，请注意不要破坏确保不会发生重新分配的代码：

```
v.reserve(v.size() + 1);
v.push_back(v[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:49:49.420

在这里回答我自己的问题，

我发现了一个与我的代码几乎相同的错误报告： [http ://connect.microsoft.com/VisualStudio/feedback/details/735732](http://connect.microsoft.com/VisualStudio/feedback/details/735732)

如上文评论所述，它显然已在 MSVC 2012 中修复。

我更深入地检查了 GCC 代码，它在这里提到可能相关：00326 // 这三个操作的顺序由 C++0x 00327 // 情况决定，其中移动可能会改变属于 00328 的新元素 //到现有向量。这仅适用于调用者 00329 // 通过 const lvalue ref 获取元素（参见 23.1/13）。

但是有太多的#ifdefs 让我无法弄清楚它到底在做什么。

所以我想答案是升级到 MSVC 2012，或者至少破解标题，这样我就知道我还需要注意哪些地方。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:27:26.843

查看 4.4 的实现，`push_back`当`insert`他们需要增加缓冲区调用`_M_insert_aux`来增加缓冲区时，首先复制新元素（这意味着别名不是问题，因为此时原始对象还没有被触及）和然后是所有先前存在的元素。所以执行很好。

作为标准的一部分，对别名没有限制，因此代码是合规的，不应该存在未定义的行为。

# php - Magento 在顶部菜单中显示非活动类别

> ID：11653113
> 
> 赞同：1
> 
> 时间：2012-07-25T15:22:07.537
> 
> 标签：php, magento, magento-1.7

在我的 CMS 中，我已经禁用了一堆类别出现在我的导航中（见下面的截图），但这些类别仍然出现在我的顶部菜单块中。

这是我的 page/html/topmenu.phtml 文件中的代码 - 我需要更改哪些内容才能阻止这些类别出现？

我正在使用 Magento CE 1.7

```
<?php $_menu = $this->getHtml('level-top');?>
<?php if($_menu): ?>
<div class="nav-container">
    <ul id="nav">
        <?php echo $_menu ?>
    </ul>
</div>
<?php endif ?> 
```

![](../Images/e58a9dd644cf758f3de618a83232af02.png)
[（来源：[i.imm.io](http://i.imm.io/xV8Y.png)）]

[编辑]

当我做

```
foreach(Mage::helper('catalog/category')->getStoreCategories() as $c)
{
  $cat = Mage::getModel('catalog/category')->load($c->getId());
  var_dump($cat->getIncludeInMenu());
} 
```

尽管在管理面板中将两个根类别设置为 no，但所有类别都返回 1。

我已关闭并清除缓存，并且多次重新索引我的类别和产品。

我知道该选项已保存到数据库中，因为当我浏览并再次返回时，该选项仍设置为“否”，这表明问题在于类别模型加载或报告选项错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:30:24.217

试试这条线：

```
<?php $_menu = $this->renderCategoriesMenuHtml(0,'level-top') ?> 
```

renderCategoriesMenuHtml 检查类别是否处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:10:39.723

我开了好几家店。每个商店的每个类别和产品字段都有自己的重复值集。我一直在做的是更改默认值，这些默认值在各个商店视图中被忽略。要解决这个问题，我必须更改商店视图（位于管理部分的顶部/左侧）然后设置字段值。

# jquery - 如何获取jquery mobile的旋转框输入的值属性

> ID：11653114
> 
> 赞同：1
> 
> 时间：2012-07-25T15:22:08.413
> 
> 标签：jquery, jquery-mobile, jquery-widgets

这是一个基本的 jQuery 问题 - 我在这里使用 spinbox 插件：

[http://dev.jtsage.com/jQM-Spinbox/](http://dev.jtsage.com/jQM-Spinbox/)

```
<div data-role="fieldcontain">
<label for="spin">Input spinner</label>
<input data-role="spinbox" name="spin" id="spin" value="50" min="0" max="100" />
</div> 
```

单击 + 或 - 时正确显示更新的值，

但使用这个电话......

```
$(this).replaceWith("<div>"+ $("#spin").val +"</div>" ); 
```

..返回垃圾（代码）和

```
$(this).replaceWith("<div>"+ $("#spin").value +"</div>" ); 
```

..返回“未定义”

我想用旋转框的值替换一些元素。我假设小部件应该使它变得如此简单。任何帮助将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:29:38.070

jQuery[`val()`](http://api.jquery.com/val/)是一种方法而不是属性，请尝试以下操作：

```
$(this).replaceWith("<div>"+ $("#spin").val() +"</div>" ); 
```

*如果你想使用`value`属性，你应该将 jQuery 对象转换为 DOM 元素：*

```
$("#spin")[0].value 
```

# ruby-on-rails - rails ：堆栈级别太深

> ID：11653117
> 
> 赞同：8
> 
> 时间：2012-07-25T15:22:12.850
> 
> 标签：ruby-on-rails, ruby, sqlite

实际上，我正在为模型多->多做一个项目。我需要找到当前用户的所有积分/设备/项目（我认为只有两列（id & score）的表积分是没用的，所以我将此表合并到连接表）。

我收到此错误：

```
SystemStackError in Users#show

Showing app/views/shared/_credit.html.erb where line # raised:

stack level too deep 
```

和两个模型：

```
class **Credit** < ActiveRecord::Base
  attr_accessible :created_at, :credit_id, :device_id, :project_id, :score, :user_id

belongs_to :device
belongs_to :user
belongs_to :project
belongs_to :score

end

class **User** < ActiveRecord::Base

has_many :credit
has_many :credit, :through => :credit, foreign_key: "user_id", dependent: :destroy
end 
```

谢谢 ！

最好的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T15:29:01.057

堆栈级别到深度指向不定式递归调用，我会说你明白了

```
has_many :credit, :through => :credit, 
```

这清楚地引入了某种循环。

# c# - 检查并删除字符串中的任何字符

> ID：11653119
> 
> 赞同：0
> 
> 时间：2012-07-25T15:22:22.200
> 
> 标签：c#

我想知道指定字符数组的最佳方法是什么，

```
{
}
[
] 
```

然后检查这些字符串，如果它们在那里，则完全删除它们。

```
 if (compiler.Parser.GetErrors().Count == 0)
        {
            AstNode root = compiler.Parse(phrase.ToLower());
            if (compiler.Parser.GetErrors().Count == 0)
            {
                try
                {
                    fTextSearch = SearchGrammar.ConvertQuery(root, SearchGrammar.TermType.Inflectional);
                }
                catch
                {
                    fTextSearch = phrase;
                }
            }
            else
            {
                fTextSearch = phrase;
            }
        }
        else
        {
            fTextSearch = phrase;
        }

        string[] brackets = brackets = new string[]
        {
            "{",
            "}",
            "[",
            "]"
        };

        string[] errorChars = errorChars = new string[]
        {
            "'",
            "&"
        };

        StringBuilder sb = new StringBuilder();

        string[] splitString = fTextSearch.Split(errorChars, StringSplitOptions.None);

        int numNewCharactersAdded = 0;
        foreach (string itm in splitString)
        {
            sb.Append(itm); //append string
            if (fTextSearch.Length > (sb.Length - numNewCharactersAdded))
            {
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded]); //append splitting character
                sb.Append(fTextSearch[sb.Length - numNewCharactersAdded - 1]); //append it again
                numNewCharactersAdded++;
            }
        }

        string newString = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T15:25:53.137

正则表达式可以更容易地做到这一点：

```
var result = Regex.Replace(input, @"[[\]()]", ""); 
```

使用字符集 ( `[...]`) 匹配其中的任何字符并替换为空。[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)将替换所有匹配项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T15:29:20.423

另一种简洁的方法是使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)来获取字符的设置差异（假设`brackets`是字符）：

```
String newString = new String(oldString.Except(brackets).ToArray()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T15:31:25.297

```
string str = "faslkjnro(fjrmn){ferqwe}{{";
char[] separators = new []{'[', ']','{','}' };
var sb = new StringBuilder();
foreach (var c in str)
{
    if (!separators.Contains(c))
    {
        sb.Append(c);
    }
}

return sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:25:45.957

这个怎么样：

```
string myString = "a12{drr[ferr]vgb}rtg";
myString = myString.Replace("[", "").Replace("{", "").Replace("]", "").Replace("}", ""); 
```

你最终得到：

> a12drrferrvgbrtg

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:27:05.920

我不知道我是否理解您的问题，但您可以通过以下方式解决您的问题：

```
string toRemove = "{}[]";
string result = your_string_to_be_searched;
foreach(char c in toRemove)
    result = result.Replace(c.ToString(), ""); 
```

或使用扩展方法

```
static class Extensions
{
    public static string RemoveAll(this string src, string chars)
    {
        foreach(char c in chars)
            src= src.Replace(c.ToString(), "");
        return src;
    }
} 
```

有了这个你可以使用`string result = your_string_to_be_searched.RemoveAll("{}[]");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T15:32:54.520

```
string charsToRemove = @"[]{}";
string pattern = string.Format("[{0}]", Regex.Escape(charsToRemove));
var result = Regex.Replace(input, pattern, ""); 
```

与其他一些类似答案相比，此方法的主要优点是您不必为确定哪些字符需要在 RegEx 中转义而烦恼。您可以让图书馆为您处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T15:39:22.500

您可以像这样以非常紧凑的方式执行此操作：

```
string s = "ab{c[d]}";
char[] ca = new char[] {'{', '}', '[', ']'};
Array.ForEach(ca, e => s = s.Replace(e.ToString(), "")); 
```

或这个：

```
StringBuilder s = new StringBuilder("ab{c[d]}");
char[] ca = new char[] {'{', '}', '[', ']'};
Array.ForEach(ca, e => s.Replace(e.ToString(), "")); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-15T08:01:36.290

取自这个答案：[https ://stackoverflow.com/a/12800424/1498669](https://stackoverflow.com/a/12800424/1498669)

只需将 .Split() 与所需可移除项的 char[] 一起使用，然后使用 .Join() 或 .Concat() 重新捕获它

```
char[] delChars = "[]{}<>()".ToCharArray();
string input = "some (crazy) string with brac[et]s in{si}de";

string output = string.Join(string.Empty, input.Split(delChars));
//or
string output = string.Concat(input.Split(delChars)); 
```

参考：

[https://docs.microsoft.com/en-us/dotnet/csharp/how-to/parse-strings-using-split](https://docs.microsoft.com/en-us/dotnet/csharp/how-to/parse-strings-using-split) [https://docs.microsoft.com/en-us/dotnet/csharp/how-to /连接多个字符串#code-try-4](https://docs.microsoft.com/en-us/dotnet/csharp/how-to/concatenate-multiple-strings#code-try-4)

# sharepoint - 将数据从 SharePoint 导入和审核到 Excel 电子表格

> ID：11653120
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:22:22.063
> 
> 标签：sharepoint, vba, excel

因此，我将 Sharepoint 日历中的数据导入 Excel 电子表格。有没有一种方法，每当我从 sharepoint 导入新数据时，它都会遍历 Sharepoint 提供的唯一 ID，并检查它是否已从传入的数据中删除？

那么根据系统中当前的数据检查新数据？

我想我必须做的是，在导入数据时，将数据存储在“临时”电子表格中，然后运行循环将临时表的 ID 与数据表进行比较，然后处理审计过程，然后更新临时到Data sheet，最后删除临时表。

我需要检查两个工作表的 ID 列。如果没有 ID，我需要从其余列中提取信息并将该记录导出到另一个电子表格

直到昨天才使用 VBA，我被分配了这个任务，谷歌上没有关于这个的资源。我知道需要做什么。只是不知道如何完成它。我需要比较C！在数据到 C！在临时。如果数据中有一个单元格，那不是临时的，我需要将整行导出到审计工作表。

有人知道什么命令/宏对此有用吗？

' 公共子 Find_ID()

```
Dim old_id As Integer, new_id As Integer, oldRow As Variant, newRow As Variant
Dim old_mod As String, new_mod As String

oldRow = 2

Do While Trim(Sheets("Old Data").Range("C" & oldRow)) <> ""
    newRow = 2
    old_id = Trim(Sheets("Old Data").Range("C" & oldRow))

    Do While Trim(Sheets("New Data").Range("c" & newRow)) <> ""
        new_id = Trim(Sheets("New Data").Range("c" & newRow))
        'is new id the same as old id
            'if yes - we have a match, but now we want to compare the modified
                'if modified is a match, then we don't need to do anythying

                'if modified is not a match, we need to figure out what was changed
            'if no - then lets just go to the next line

        newRow = newRow + 1
    Loop

    oldRow = oldRow + 1

Loop' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:47:03.690

@floppityflip

如果您想从另一个工作表中的一个工作表中搜索某些内容（因为我想它们的顺序不会完全相同），您可以使用 find 函数并将其放入一个循环中。

* * *

像这样：

```
Sub Find()
'
' Find Macro
'

'
    Dim i As Integer
    i = 1
    Dim comparingVariable As String

    Do

        Sheets("Sheet1").Select           'YOUR FIRST SHEET

        Range("A" & i).Select

        comparingVariable = ActiveCell    'SET VARIABLE EQUAL TO ACTIVE CELL

        Sheets("Sheet2").Select

        On Error Resume Next              'IN CASE YOU DON'T FIND WHAT YOU'RE LOOKING FOR

        Cells.Find(What:=comparingVariable, After:=ActiveCell, LookIn:=xlFormulas, LookAt _
        :=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:= _
        False, SearchFormat:=False).Activate                                        'PUT VARIABLE INTO FIND FUNCTION

        If Err.Number <> 0 Then                                                     'IF THERE WAS AN ERROR (WASN'T FOUND) HILIGHT CELL RED IN SHEET 1

            Sheets("Sheet1").Select
            ActiveCell.Interior.ColorIndex = 3

        End If

        i = i + 1               'ADDING TO ITERATOR

    Loop Until ActiveCell = ""

    Sheets("Sheet1").Select

End Sub 
```

将此数据添加到 excel 文档中，然后在 excel 宏中使用我上面发布的代码：

* * *

表 1： 1 2 3 4 450 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25

表 2：25 24 23 22 21 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1

* * *

- 工作表 1 有 1 - 25 按升序排列，工作表 2 有 1 - 25 按降序排列，只是我在其中添加了 450 以检查它是否捕获了它找不到的东西。

-根据代码，如果在 sheet2 中找不到 sheet1 上的数字，则该数字将突出显示为红色（我想我应该澄清一下）。

希望这可以帮助！

# c - 以下哪项是下面给出的程序的正确输出？

> ID：11653121
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:22:30.663
> 
> 标签：c, pointers

**如果机器是 32 位 little-endianess 并且 sizeof(int) 是 4 字节。**

给定以下程序：

```
 line1:  #include<stdio.h>
 line2:  {
 line3:      int arr[3]={2,3,4};
 line4:      char *p;
 line5:      p=(char*)arr;
 line6:      printf("%d",*p);
 line7:      p=p+1;
 line8:      printf("%d\n",*p);
 line9:      return 0;
         } 
```

什么是预期的输出？

`A`: 2 3

`B`: 2 0

`C`: 1 0

`D`: 垃圾值

困扰我将整数指针转换为字符指针的一件事。

1.  选角有多重要？

2.  编译器在第 5 行做了什么？( `p = (char *) arr;`)

3.  第 7 行发生了什么？( `p = p + 1`)

4.  如果输出是`20`那么如何`0`打印出来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:26:24.510

1.  `(D)`，或特定于编译器的，因为`sizeof(int)`（以及字节序）是平台相关的。

> 选角有多重要？

作为一个整体，铸造是 C 语言的一个组成部分（双关语无意）。

> 编译器在第 5 行会做什么？

它获取第一个元素的地址`arr`并将其放入`p`.

> 在第 5 行之后，第 7 行发生了什么？

它递增指针，使其指向`char`该内存地址的下一个。

> 如果输出是 2 0 那么编译器是如何打印 0 的？

这是 endanness 和`sizeof(int)`. 没有您机器的规格，我无法解释。

但是，假设小端和`sizeof(int) == 4`，我们可以看到以下内容：

```
// lets mark these memory regions: |A|B|C|D|
int i = 2; // represented as      0x02000000
char *ptr = (char *) &i; // now ptr points to 0x02 (A) 
printf("%d\n", *ptr); // prints '2', because ptr points to 0x02 (A) 
ptr++; // increment ptr, ptr now points to 0x00 (B)
printf("%d\n", *ptr); // prints '0', because ptr points to 0x00 (B) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:28:58.047

(E) 以上都不是

但是，假设 (a) 您使用的是 little-endian 机器（例如 x86），并且 (b)`sizeof(int) >= 2`应该打印“20”（两者之间不打印空格）。

a）强制转换是“必要的”一次读取一个字节的数组，而不是一系列`int`s

b）这只是将第一个地址强制`int`转换为指向的指针`char`

c）将存储的地址递增`p`（`sizeof(char)`即1）

d) 机器表示的第二个字节`int`由第 8 行打印

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T20:07:02.690

1\. 铸造的重要性：- char *p; 这一行声明了一个指向字符的指针。这意味着它的属性是它一次只能取消引用一个字节，并且位移也是一个字节。

p=(char*)arr; 2\. 类型转换为 char * 只是为了避免编译器发出警告。如果你不那么也同样的行为。

1.  作为指向一个字符的指针，因为我已经在 p=p+1 上面写了指向下一个字节

2.  printf("%d\n",*p); %d 将值格式化为十进制整数，因此此处显示的十进制格式 *p 使用，并且根据其属性，它只能取消引用一个字节。所以现在内存组织进入画面。那就是你的机器首先遵循小端/ LSB或大端/ MSB

    根据您的 ans，您的机器遵循 little endian。所以第一次您的 ans 为 0。然后下一个字节必须为零，因此输出为 0。二进制：2 表示为 00-00-00-02（按字节表示）但在内存中它像这样存储 02-00-00-00 四个字节

    在第一个内存字节 02 和第二个内存字节 00 中

# content-management-system - 处理复杂调查的 .NET CMS

> ID：11653123
> 
> 赞同：1
> 
> 时间：2012-07-25T15:22:47.443
> 
> 标签：content-management-system, dotnetnuke, umbraco, sitefinity, kentico

我们的客户希望从**DotNetNuke**迁移到另一个开源 .NET CMS。我正在寻找与**DNN+Dynamic Forms/Registrations**具有相同优势的东西——即。可以**创建带有事件的复杂调查**（根据另一个字段的响应显示一个字段，如果出现特定答案则自动提交，调查提交时的事件，如 SQL 查询执行、HTTP POST 或电子邮件发送）。现在有成千上万**（大约 50-100k）活跃用户**（每个用户登录并将她/他的个人数据存储在 DNN 调查中），所以这个 CMS 应该能够创建相当大的解决方案。

有什么选择？考虑迁移到更新版本，我们是否应该坚持使用 DNN？更新的 DNN 版本是否值得返工（我们目前在 4.9.5 上运行）。**是否有任何开源和免费的 .NET CMS-es 在调查创建方面可与 DNN 相媲美，并且在我们考虑可用性、性能、稳定性等方面是更好的选择**- 基本上是 DNN 或多或少失败的所有领域? 我们正在考虑试用**Umbraco** - 它有一个好的调查模块吗？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:55:37.457

就个人而言，由于您已经在 DNN 上构建了这样一个平台，我强烈建议您考虑升级当前系统并继续使用它的方法。很难找到最有可能符合要求的其他东西，而且迁移路径很可能不会一帆风顺。

DNN 升级可能有点乏味，但并非不可能，而且当前版本的性能和稳定性更好。6.x 系列也大大提高了可用性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T10:11:52.573

Umbraco 有一个非常好的表单生成器 (http://umbraco.com/products/more-add-ons/contour.aspx) 但你必须为此付出一点点——我相信它是 99 欧元。

我们将它用于非常简单的调查/联系我们页面等。

开箱即用它确实允许多页调查（尽管我从未尝试过），但它不允许有条件的问题。

也就是说，用户设置新表单和调查非常简单，所以我想这取决于你的调查有多复杂。

# c++ - 如何判断 va_list 是否为空

> ID：11653124
> 
> 赞同：7
> 
> 时间：2012-07-25T15:22:47.153
> 
> 标签：c++, visual-studio-2010, visual-c++, variadic-functions

我一直在阅读一些编译器支持带有宏的 va_list ，并且用户能够[使用其他宏重载该功能以计算 va_list](https://groups.google.com/forum/?fromgroups#!topic/comp.std.c/d-6Mj5Lko_s)。

使用 Visual Studio，有没有办法确定 va_list 是否为空（又名 count==0）？基本上我想知道这种情况：

```
extern void Foo(const char* psz, ...);
void Test()
{
  Foo("My String"); // No params were passed
} 
```

我最初的想法是做这样的事情：

```
va_list vaStart;
va_list vaEnd;
va_start(vaStart, psz);
va_end(vaEnd);
if (vaStart == vaEnd) ... 
```

问题是 va_end 仅将参数设置为空。

```
#define _crt_va_start(ap,v)  ( ap = (va_list)_ADDRESSOF(v) + _INTSIZEOF(v) )
#define _crt_va_arg(ap,t)    ( *(t *)((ap += _INTSIZEOF(t)) - _INTSIZEOF(t)) )
#define _crt_va_end(ap)      ( ap = (va_list)0 ) 
```

我正在考虑可能合并一个[终结器](https://stackoverflow.com/questions/4800641/how-to-loop-through-a-va-list-if-the-number-of-arguments-is-unknown)，但我希望它对调用者隐藏，以便不需要更改现有代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:42:52.940

没有办法知道传递了多少参数`...`，也不知道它们是什么类型。仅当您有其他方式（例如`printf`-style 格式字符串）来告诉函数期望什么时，才能使用可变函数参数；即便如此，也无法验证这些论点。

C++11 提供类型安全的可变参数模板。我不知道您的编译器是否支持这些，或者它们是否适合您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-10T01:12:03.877

我意识到这个问题已经相当老了，但我认为充实一下可能会有所帮助。正如 Mike Seymour 非常正确地回答的那样，没有绝对可靠的方法来确定 a 中的参数数量`va_list`。这就是为什么定义可变参数函数的常规方法是包含一个具有该信息的参数，例如：`void func(const char *str, int count, ...);`，它定义了调用者应该遵守的合同。

**编辑：**标准（7.16.1.1.3）实际上对`va_arg(vl, type)`变量参数列表末尾之后的任何调用返回的值保持沉默。大多数类型最常见的情况是类型为零。但是，CAVEAT EMPTOR - 它不一定是。

`va_arg(vl, type)`当没有更多参数时返回的值是一个类型为零的值。对于数字类型，它是 0。对于指针，它是一个 NULL 指针。对于结构，它是一个所有字段都归零的结构。如果您选择复制`va_list`并尝试计算副本，如下所示：

```
void func(const char *str, ...) {
    va_list vl;
    va_list vc;
    int x;
    int count;

    count = 0;
    va_start(vl, str);
    va_copy(vc, vl);
    do {
        x = va_arg(vc, int);
        if (x == 0) break;
        count++;
    } while (1)
    va_end(vc);
    .
    .
    . // do something, or something else,
    . // based on the number of args in the list
    .
    va_end(vl); 
```

您必须假设调用者将遵守合同而不在列表中传递 NULL 或零值。无论哪种方式，您都必须了解可变参数函数的调用者有责任遵守规定的合同。因此，编写您的函数，发布合约，然后轻松入睡。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-12-29T12:36:45.090

我知道我的答案不是“正统”答案，但是由于[va_list](http://www.cplusplus.com/reference/cstdarg/va_list/)宏的限制，我发现以下解决方案可行。我们可以将 va_list 视为一个字符数组，甚至更好的是一个以 null 结尾的字符，因此您可以尝试

```
va_list argptr;
if(strcmp(argptr,"")) 
{
   // not empty
}
else
{
   // empty
} 
```

我试过了，它对我有用。我使用了 Visual Studio 2013 Ultimate。项目类型为 Win32 控制台应用程序。没有编译错误。

# c# - 从 HttpWebRequest 读取响应时出错

> ID：11653125
> 
> 赞同：0
> 
> 时间：2012-07-25T15:22:49.353
> 
> 标签：c#, filestream, httpwebresponse

我正在尝试通过网络发送 1GB 文本文件的内容。我修改了基本身份验证的[建议代码](http://support.microsoft.com/kb/908573)并将其保留如下：

```
 WRequest = (HttpWebRequest)HttpWebRequest.Create(URL);

        WRequest.Credentials = Credentials;
        WRequest.PreAuthenticate = true;

        WRequest.ContentType = "text/plain"; 
        WRequest.Method = "POST";
        WRequest.AllowWriteStreamBuffering = false;
        WRequest.Timeout = 10000;

        FileStream ReadIn = new FileStream(filename, FileMode.Open, FileAccess.Read);
        ReadIn.Seek(0, SeekOrigin.Begin); 
        WRequest.ContentLength = ReadIn.Length; 
        Byte[] FileData = new Byte[ReadIn.Length]; 
        int DataRead = 0;
        Stream tempStream = WRequest.GetRequestStream();
        do
        {
            DataRead = ReadIn.Read(FileData, 0, 2048);
            if (DataRead > 0) 
            {
                tempStream.Write(FileData, 0, DataRead);
                Array.Clear(FileData, 0, 2048); 
            }
        } while (DataRead > 0);

        // The response
        WResponse = (HttpWebResponse)WRequest.GetResponse(); 
```

但是，现在它给了我 System.Net.ProtocolViolationException 错误：“您必须在调用 [Begin]GetResponse 之前将 ContentLength 字节写入请求流”。我检查了[HttpWebRequest.BeginGetRequestResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx) ...并通过调试发现 WRequest 的内容长度不是-1。还有什么问题？我应该如何得到回应？

**更新**：适用于小文件的代码如下：

```
 WebRequest request = WebRequest.Create(url);
        request.Method = "POST";
        request.Credentials = Credentials;

        using (StreamReader reader = new StreamReader(filename))
        {
                postData = reader.ReadToEnd();
        }

        byte[] byteArray = Encoding.UTF8.GetBytes(postData);
        request.ContentType = "text/plain";
        request.ContentLength = byteArray.Length;

        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();

        // The response
        WebResponse response = request.GetResponse();
        Console.WriteLine(((HttpWebResponse)response).StatusDescription);

        dataStream = response.GetResponseStream();

        using (StreamReader reader = new StreamReader(dataStream))
        {
             responseFromServer = reader.ReadToEnd();
        }

        dataStream.Close();
        response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:33:13.957

你引用的文章说

> 如果 Microsoft Internet 信息服务 (IIS) Web 服务器配置为使用基本身份验证，并且您必须将 HttpWebRequest.AllowWriteStreamBuffering 属性设置为 false，则必须在发送 POST 或 PUT 请求之前发送 HEAD 请求以对连接进行预身份验证.

编辑 - 现在有更多说明！

重述本文，如果您想将大文件发送到需要基本身份验证的目的地，您需要发出两个单独的请求。这里的关键是您正在设置`PreAuthenticate = true`. 从字面上阅读该语句——通过将属性设置为`true`，您是说您将*在实际尝试之前验证您提出的任何请求！*该框架不知道您希望如何完成此预身份验证，因此您需要自己执行该操作，方法是向`HEAD`目标发送请求。将`HEAD`HTTP 方法视为实际请求的序幕——它描述（或请求有关）特定资源的信息。

所以过程是这样的：

1.  发出 HEAD 请求以`http://someurl/aresource`包含您在将来从此客户端向该服务器发出针对所列资源的请求时要使用的凭据
2.  服务器将响应（理想情况下）“好的 - 你可以继续。你已通过身份验证”
3.  服务器立即后悔决定允许该操作，因为它发现自己保存了一个非常大的文件:-)

我没有看到您在您发布的代码中的任何地方发出该 HEAD 请求 - 如果它不存在，请在代码的开头添加它（摘自 OP 中的示例文章参考）：

```
//preAuth the request
// You can add logic so that you only pre-authenticate the very first request.
// You should not have to pre-authenticate each request.
WRequest = (HttpWebRequest)HttpWebRequest.Create(URL);
// Set the username and the password.
WRequest.Credentials = new NetworkCredential(user, password);
WRequest.PreAuthenticate = true;
WRequest.UserAgent = "Upload Test";
WRequest.Method = "HEAD";
WRequest.Timeout = 10000;
WResponse = (HttpWebResponse)WRequest.GetResponse(); 
WResponse.Close();
// Make the real request. 
```

# r - 函数 invisible() 有什么作用？

> ID：11653127
> 
> 赞同：58
> 
> 时间：2012-07-25T15:22:53.207
> 
> 标签：r

R帮助解释`invisible()`为“一个返回对象临时不可见副本的函数”。我很难理解`invisible()`它的用途。你能解释一下`invisible()`这个功能什么时候有用吗？

我已经看到它`invisible()`几乎总是用于`print()`. 这是一个例子：

```
### My Method function:
print.myPrint <- function(x, ...){
  print(unlist(x[1:2]))
  invisible(x)
}

x = list(v1 = c(1:5), v2 = c(-1:-5) )
class(x) = "myPrint"
print(x) 
```

我在想，如果没有`invisible(x)`，我将无法执行以下任务：

```
a = print(x) 
```

但实际上并非如此。所以，我想知道它有什么`invisible()`作用，它在哪里有用，最后它在上面的方法 print 函数中的作用是什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-25T15:26:29.440

来自`?invisible`：

> 细节：
> 
> ```
>  This function can be useful when it is desired to have functions
>  return values which can be assigned, but which do not print when
>  they are not assigned. 
> ```

所以你可以分配结果，但如果没有分配它就不会被打印出来。它经常用来代替`return`. 您的`print.myPrint`方法仅打印，因为您明确调用`print`. `invisible(x)`函数末尾的对 的调用仅返回`x`.

如果你没有使用`invisible`,`x`如果没有分配也会被打印。例如：

```
R> print.myPrint <- function(x, ...){
+   print(unlist(x[1:2]))
+   return(x)
+ }
R> print(x)
v11 v12 v13 v14 v15 v21 v22 v23 v24 v25 
  1   2   3   4   5  -1  -2  -3  -4  -5 
v11 v12 v13 v14 v15 v21 v22 v23 v24 v25 
  1   2   3   4   5  -1  -2  -3  -4  -5 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-11T20:15:25.923

虽然`invisible()`使它的内容暂时不可见，并且经常被用来代替`return()`它，但应该与其结合使用`return()`而不是作为它的替代品。

**虽然`return()`将停止函数执行并返回放入其中的值，但`invisible()`不会做这样的事情。它只会使其内容在一段时间内不可见。**

考虑以下两个示例：

```
f1 <- function(x){
  if( x > 0 ){
     invisible("bigger than 0")
  }else{
     return("negative number")
  }
  "something went wrong"
}

result <- f1(1)

result
## [1] "something went wrong"

f2 <- function(x){
  if( x > 0 ){
     return(invisible("bigger than 0"))
  }else{
     return("negative number")
  }
}

result <- f2(1)

result
## [1] "bigger than 0" 
```

绕过`invisible()`'s 的陷阱后，我们可以看看它的工作原理：

```
f2(1) 
```

**由于使用了 ，该函数不会打印其返回值`invisible()`。但是，它确实像往常一样传递值**：

```
res <- f2(1)
res 
## [1] "bigger than 0" 
```

`invisible()`的用例是例如防止函数返回值会产生一页又一页的输出，或者当一个函数因其副作用而被调用并且返回值仅用于提供更多信息时......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-13T05:16:35.333

Tidyverse 设计指南书中的这段摘录解释了为什么返回一个不可见的值可能很有用。

> 如果调用一个函数主要是为了它的副作用，它应该无形地返回一个有用的输出。如果没有明显的输出，则返回第一个参数。这使得在管道中使用该函数成为可能。

[https://design.tidyverse.org/out-invisible.html](https://design.tidyverse.org/out-invisible.html)

# elasticsearch - 让 ElasticSearch 对结果中的总嵌套命中数（idf？）得分高于单次命中的 tf？

> ID：11653139
> 
> 赞同：3
> 
> 时间：2012-07-25T15:23:24.873
> 
> 标签：elasticsearch, tire, tf-idf

如果我正在修改术语，请原谅我，但我在让 ES 以对我的应用程序有意义的方式对结果进行评分时遇到问题。

我正在用几个简单的字段索引数千个用户，以及嵌套在每个用户的索引中的可能数百个子对象（即**Book** --> **Pages**数据模型）。发送到索引的 JSON 如下所示：

```
user_id: 1
  full_name: First User
  username: firstymcfirsterton
  posts: 
   id: 2
    title: Puppies are Awesome
    tags:
     - dog house
     - dog supplies
     - dogs
     - doggies
     - hot dogs
     - dog lovers

user_id: 2
  full_name: Second User
  username: seconddude
  posts: 
   id: 3
    title: Dogs are the best
    tags:
     - dog supperiority
     - dog
   id: 4
    title: Why dogs eat?
    tags: 
     - dog diet
     - canines
   id: 5
    title: Who let the dogs out?
    tags:
     - dogs
     - terrible music 
```

标签是类型“标签”，使用“关键字”分析器，并提升了 10。标题没有提升。

当我搜索“狗”时，第一个用户的分数高于第二个用户。我认为这与第一个用户的 tf-idf 更高有关。然而，在我的应用程序中，理想情况下，用户发布的帖子越多，该术语就会排在第一位。

我尝试按帖子数量排序，但如果用户有很多帖子，这会产生垃圾结果。基本上我想按唯一帖子点击的数量进行排序，这样拥有更多点击帖子的用户将上升到顶部。

我将如何去做这件事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:39:46.113

首先，我同意@karmi 和@Zach 的观点，即通过匹配帖子弄清楚你的意思很重要。为简单起见，我假设匹配的帖子中某处有一个单词“dog”，我们没有使用关键字分析器来使标签匹配和提升更有趣。

如果我正确理解了您的问题，您希望根据相关帖子的数量对用户进行排序。这意味着您需要搜索帖子才能找到相关帖子，然后将此信息用于用户查询。只有单独索引帖子才有可能，这意味着帖子必须是子文档或嵌套字段。

假设帖子是子文档，我们可以像这样对您的数据进行原型制作：

```
curl -XPOST 'http://localhost:9200/test-idx' -d '{
    "settings" : {
        "number_of_shards" : 1,
        "number_of_replicas" : 0
    },
    "mappings" : {
      "user" : {
        "_source" : { "enabled" : true },
        "properties" : {
            "full_name": { "type": "string" },
            "username": { "type": "string" }
        }
      },
      "post" : {
        "_parent" : {
          "type" : "user"
        },
        "properties" : {
            "title": { "type": "string"},
            "tags": { "type": "string", "boost": 10}
        }
      }
    }
}' && echo

curl -XPUT 'http://localhost:9200/test-idx/user/1' -d '{
    "full_name": "First User",
    "username": "firstymcfirsterton"
}'  && echo
curl -XPUT 'http://localhost:9200/test-idx/user/2' -d '{
    "full_name": "Second User",
    "username": "seconddude"
}'  && echo

#Posts of the first user
curl -XPUT 'http://localhost:9200/test-idx/post/1?parent=1' -d '{
    "title": "Puppies are Awesome",
    "tags": ["dog house", "dog supplies", "dogs", "doggies", "hot dogs", "dog lovers", "dog"]
}'  && echo
curl -XPUT 'http://localhost:9200/test-idx/post/2?parent=1' -d '{
    "title": "Cats are Awesome too",
    "tags": ["cat", "cat supplies", "cats"]
}'  && echo
curl -XPUT 'http://localhost:9200/test-idx/post/3?parent=1' -d '{
    "title": "One fine day with a woof and a purr",
    "tags": ["catdog", "cartoons"]
}'  && echo

#Posts of the second user
curl -XPUT 'http://localhost:9200/test-idx/post/4?parent=2' -d '{
    "title": "Dogs are the best",
    "tags": ["dog supperiority", "dog"]
}'  && echo
curl -XPUT 'http://localhost:9200/test-idx/post/5?parent=2' -d '{
    "title": "Why dogs eat?",
    "tags": ["dog diet", "canines"]
}'  && echo
curl -XPUT 'http://localhost:9200/test-idx/post/6?parent=2' -d '{
    "title": "Who let the dogs out?",
    "tags": ["dogs", "terrible music"]
}'  && echo

curl -XPOST 'http://localhost:9200/test-idx/_refresh' && echo 
```

我们可以使用[Top Children Query](http://www.elasticsearch.org/guide/reference/query-dsl/top-children-query.html)查询这些数据。[（或者在嵌套字段的情况下，我们可以使用Nested Query](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)获得类似的结果）

```
curl 'http://localhost:9200/test-idx/user/_search?pretty=true' -d '{
  "query": {
    "top_children" : {
        "type": "post",
        "query" : {
            "bool" : {
                "should": [
                    { "text" : { "title" : "dog" } },
                    { "text" : { "tags" : "dog" } }
                ]
            }
        },
        "score" : "sum"
    }
  }
}' && echo 
```

此查询将首先返回第一个用户，因为来自匹配标签的巨大提升因子。因此，它可能看起来不像您想要的，但有几种简单的方法可以修复它。首先，我们可以降低标签字段的提升因子。10 确实是一个很大的因素，尤其是对于可以重复多次的领域。或者，我们可以修改查询以完全忽略子命中的分数，并使用最匹配的子文档的数量作为分数：

```
curl 'http://localhost:9200/test-idx/user/_search?pretty=true' -d '{
  "query": {
    "top_children" : {
        "type": "post",
        "query" : {
            "constant_score" : {
                "query" : {            
                    "bool" : {
                        "should": [
                            { "text" : { "title" : "dog" } },
                            { "text" : { "tags" : "dog" } }
                        ]
                    }
                }
            }
        },
        "score" : "sum"
    }
  }
}' && echo 
```

# cross-platform - Photon Server 和 Photon Cloud 有什么区别？

> ID：11653140
> 
> 赞同：6
> 
> 时间：2012-07-25T15:23:25.703
> 
> 标签：cross-platform, cloud, multiplayer, photon

Photon Server 和 Photon Cloud 产品有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T14:47:05.093

来自[http://doc.exitgames.com/photon-server/](http://doc.exitgames.com/photon-server/)

# 光子服务器与光子云

**Photon Server**是一个本地 (OnPrem) 服务器应用程序，您可以在您选择的机器上运行和托管它。完全可定制的权威控制让您可以自由地为支持多人游戏的应用程序配置和设置自己的基础架构。

**Photon Cloud**是一种软件即服务 (SaaS)，因此是一种完全托管的服务。您可以完全专注于您的应用程序客户端，同时托管、服务器操作和扩展都在 Photon Cloud 中得到处理。

* * *

## 服务器管理。

**光子云**

零服务器麻烦了。当我们的专家负责运行服务器时，您可以高枕无忧。

**光子服务器**

您获得为您的应用程序运行 Photon 的全部权限。您运行自己的服务器或租用合适的服务器，并确保它们可供您的用户使用。Photon 的日志和性能计数器提供有关低级性能和稳定性的所有必要信息。

* * *

## 可扩展性。

**光子云**

Photon Cloud 会自动扩展以适应您的所有用户。使用我们的 SDK，您的客户端应用程序专为高效的负载平衡工作流程而构建。

**光子服务器**

我们的负载平衡电源在源代码中可用。它是跨多个服务器扩展的坚实基础。为您的客户运行正确数量的服务器是您的责任。

* * *

## 许可。

**光子云**

从独立开发到企业解决方案的各种订阅模式之间进行选择，立即查看我们不同的定价模式。你为什么不试一试呢？Photon Cloud 附带一个免费计划，每个应用程序最多 20 个 CCU。

**光子服务器**

许可证通过商店购买并以下载形式提供。更便宜的许可证限制了每台服务器的并发用户数。或者，可根据要求为任意数量的服务器提供企业许可证。

* * *

## 游戏逻辑。

**光子云**

所有自定义逻辑都发生在应用程序客户端上，以实现零麻烦的体验。

**光子服务器**

服务器的逻辑可以在 C# 中完全自定义。几个预定义的应用程序可用作源，并为您的应用程序提供高性能框架。受益于我们的协议和低级功能的抽象，并添加您可能缺少的任何功能。

* * *

## 立即开始。

**光子云**

Photon Cloud 让您注册并立即运行您的应用程序。无需设置。不需要服务器。

**光子服务器**

下载后，不到 5 分钟即可启动。Photon 易于设置并在本地和远程运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:46:36.157

两者都使用 Photon Network Engine 来实现实时、跨平台的多人游戏应用。

Photon Cloud 是一种软件即服务 (SaaS)，因此是一种完全托管的服务。驻留在云中，您可以通过许多（可选：跨平台）客户端连接到它，并使用它来保持可靠的连接。

Photon Server 是一个本地 (OnPrem) 服务器应用程序，您可以在您选择的机器上运行和托管它。完全可定制的权威控制使您能够为支持多人游戏的应用程序设置自己的基础架构。

可以在[http://www.exitgames.com/](http://www.exitgames.com/)下载相应的 SDK 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-25T09:51:58.720

**Photon Server**是一个本地服务器应用程序，您可以在您选择的机器上运行和托管在**Photon Cloud**中您可以完全专注于您的应用程序客户端，同时托管、服务器操作和扩展都由 Exit Games 负责。

[https://doc.photonengine.com/en-us/realtime/current/getting-started/onpremises-or-saas](https://doc.photonengine.com/en-us/realtime/current/getting-started/onpremises-or-saas)

# python - 根据文件名在新创建的文件夹中运行 bash 脚本

> ID：11653144
> 
> 赞同：0
> 
> 时间：2012-07-25T15:23:42.873
> 
> 标签：python, bash

我什至不知道从哪里开始。

我有一个程序的输出文件列表，我们称它们为 foo。它们是编号输出，例如 foo_1.out

我想为每个文件创建一个目录，将文件移动到它的目录，在该目录中运行一个 bash 脚本，从每个脚本中获取输出，将其作为连接的单个文件复制到根目录。

我知道这不是“嘿，为我做我的工作”的论坛，我真的在努力学习。真诚感谢任何关于在哪里寻找的建议！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:33:04.263

您可能应该查找 python 模块的文档`os`- 特别`os.path`是和其他几个模块 -`subprocess`可以分别在[此处](http://docs.python.org/library/os.path.html)和[此处](http://docs.python.org/library/subprocess.html)找到。

不想像你所说的那样为你做这一切 - 你会想做类似的事情：

```
for f in filelist:
    [pth, ext] = os.path.splitext(f)
    os.mkdir(pth)
    out = subprocess.Popen(SCRIPTNAME, stdout=...)
    # and so on... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:37:29.493

要获取目录中所有文件的列表或创建文件夹，请查看[os 模块](http://docs.python.org/library/os.html)。具体来说，尝试`os.listdir`并`os.mkdir`

要复制文件，您可以手动打开每个文件，将内容复制到字符串，然后将其重写到不同的文件。或者，查看[shutil](http://docs.python.org/library/shutil.html)模块

要运行 bash 脚本，请使用[subprocess](http://docs.python.org/library/subprocess.html)库。

所有这三个都应该是 python 标准库的一部分。

# android - 如何确定sqlite中的锁来自哪里？

> ID：11653148
> 
> 赞同：0
> 
> 时间：2012-07-25T15:23:48.277
> 
> 标签：android, sqlite, concurrency, locking

我遇到了一些数据库问题。似乎，首先，我必须弄清楚锁是基于表的还是基于数据库的。谁能告诉我去哪里找？这是堆栈跟踪中的相关部分：

```
at java.util.concurrent.locks.ReentrantLock$FairSync.tryAcquire(ReentrantLock.java:208)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1171)
at java.util.concurrent.locks.ReentrantLock$FairSync.lock(ReentrantLock.java:200)
at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:261)
at android.database.sqlite.SQLiteDatabase.lock(SQLiteDatabase.java:378)
at android.database.sqlite.SQLiteDatabase.addSQLiteClosable(SQLiteDatabase.java:300)
at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:65)
at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1324)
at data.model.DeviceModel.getAll(DeviceModel.java:168)
at data.model.DeviceModel.desiredPositionOk(DeviceModel.java:368)
at unittest.classextensions.DeviceTestModel.desiredPositionOk(DeviceTestModel.java:18)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:347)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at data.model.DeviceModel.compressPositionsKeepingVoidFor(DeviceModel.java:432)
at unittest.classextensions.DeviceTestModel.compressPositionsKeepingVoidFor(DeviceTestModel.java:26)
at data.model.DeviceModel.getActualPositionFromDesiredPosition(DeviceModel.java:357)
at unittest.classextensions.DeviceTestModel.getActualPositionFromDesiredPosition(DeviceTestModel.java:30)
at data.model.DeviceModel.update(DeviceModel.java:257)
at unittest.DeviceModelTest.testUpdateDevice(DeviceModelTest.java:256)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T10:42:11.947

发现问题！事实上，它与数据库操作无关，只是一个简单的坏递归。无论如何感谢您的想法，根据您的评论，我将通过一些 SqliteOpenHelper-docu。

# delphi - 内部错误：Delphi 中的 DBG2439

> ID：11653151
> 
> 赞同：5
> 
> 时间：2012-07-25T15:23:56.667
> 
> 标签：delphi, testcomplete

我正在 Delphi 5 中构建一个项目。我已经成功地构建了该项目并生成了输出 exe。直到这种状态一切正常。现在我在生成的 exe 上使用测试自动化工具“TestComplete”。但是在 TestComplete 中只有 Published 属性是可见的。我看不到私人和公共财产。TestComplete 文档建议了一种在选中 Debug 选项的情况下构建 exe 的方法。为此，我修改了 Project--> Options --> Linker --> Exe and DLL options --> Include TD32 Debug Info 中的设置并尝试构建项目，但我收到“[Fatal Error]Internal error ：DBG2439”。我尝试关闭delphi并再次打开项目。我还尝试删除所有 DCU。但是每次都会出现同样的错误。任何人都可以帮我解决这个问题。谢谢您的帮助。

测试完成链接或参考：http: [//support.smartbear.com/viewarticle/29770/](http://support.smartbear.com/viewarticle/29770/)

谷歌搜索时得到一个链接，但不明白步骤。谁能帮我理解。它真的很受欢迎。 [https://groups.google.com/forum/?fromgroups#!msg/borland.public.delphi.ide/PDJUVyFbfQ8/huCmBa3eCVIJ](https://groups.google.com/forum/?fromgroups#!msg/borland.public.delphi.ide/PDJUVyFbfQ8/huCmBa3eCVIJ)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T20:43:19.177

终于可以解决错误了。:)

dbg3439 和 dbg 2499 错误是由于子过程之后的 ResourceString 声明。

请参阅链接以获取更多帮助： [https ://groups.google.com/forum/?fromgroups#!msg/borland.public.delphi.ide/PDJUVyFbfQ8/huCmBa3eCVIJ](https://groups.google.com/forum/?fromgroups#!msg/borland.public.delphi.ide/PDJUVyFbfQ8/huCmBa3eCVIJ)

谢谢大家..

# c# - MVC Razor - 将文本原位输出到屏幕

> ID：11653152
> 
> 赞同：12
> 
> 时间：2012-07-25T15:24:14.653
> 
> 标签：c#, asp.net-mvc, razor

我在视图中创建了`String`一个并希望将其输出到屏幕上。

最初我尝试过`Response.Write`，但由于本网站其他地方解释的原因，内容出现在页面顶部。然后我尝试使用`@`如下方式输出字符串：`@myString`。

这很有效，因为它在正确的位置输出文本，但它转义了我放在那里的 HTML 链接。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T15:30:15.043

您可以使用`Html.Raw()`：

```
@Html.Raw(MyStringVar) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-25T15:29:07.643

您将要使用的不是字符串：

```
@{
     var myString = new MvcHtmlString("<tags>Text</tags>");
} 
```

然后当你内联渲染它时：

```
@myString 
```

它将显示正确的值而不是转义文本。

**编辑：替代**

另一个选项是您可以只创建 MvcHtmlString 内联，以便正确呈现。

```
@(new MvcHtmlString(myString)) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T15:30:45.033

您可以为此使用 Html.Raw 函数

例如：

```
@Html.Raw(Model.YourString) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T15:33:30.473

@model 我的字符串

@Html.Raw（模型）

**试试@Html.Raw(myString)。**

我不建议这样做。由于各种原因，您不会将 html 输出发送到屏幕。如果要将文本放在屏幕的某个部分，请在视图中使用 html/css 样式并仅发送输出。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-25T15:31:08.400

你可以这样做：

```
@Html.Raw(myString) 
```

# c# - Linq：除了两种不同类型的字典

> ID：11653153
> 
> 赞同：10
> 
> 时间：2012-07-25T15:24:23.777
> 
> 标签：c#, .net, linq, linq-to-objects

我有 2 种不同类型的字典`Dictionary<int, Fooclass> oldDic`和`Dictionary<int, string> barList newDic`. 现在我需要比较两个字典中的值。例如键可以在

*   oldDic : 1,2,3
*   newDic : 1,2,3,4
*   预期输出：4

现在我需要根据它们的键比较两个字典，任何帮助将不胜感激。

编辑：输出应该像第二个字典（newDic），但这将包含第二个字典（oldDic）的一些值。例如

1,"fooString" 其中 fooString 是 Fooclass 的 someproperty 中的某个值...。为了更清楚，请参阅这对我不起作用

```
var addedList = from list1 in baseListDic
join list2 in trackerlist on list1.Key equals list2.Key
 select new { key = list1.Key, value = list1.Value._lead }; 
```

这里 baseListDic 是 oldDic 而 trackerlist 是 newDic .... 如果我还不清楚，请告诉我...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T16:16:34.057

只基于新字典创建一个新字典会更容易，而忽略旧字典中具有相同键的项目。

```
var result = newDic
    .Where(kvp => !oldDic.ContainsKey(kvp.Key))
    .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T15:30:14.013

注意：尽管您的问题是“我需要比较两个字典中的**值**”（强调我的），但您的示例似乎只是在演示键的比较，所以我已经同意了。如果它是您需要比较的值，您可能想举例说明您的意思以及它们是否易于转换或可比较......

如果您只是实际比较键，那么您可以只使用`.Keys`字典的属性，该属性返回一个`IEnumerable<TKey>`您可以在...上执行您的 linq...

例如：

```
var expectedOutput = newDic.Keys.Except(oldDic.Keys); 
```

这确实依赖于相同类型的密钥，但如果您正在比较，这不言而喻。当然，如果您使用不同的类型来执行此操作，则没有什么能阻止您首先转换它们的类型。

此外，如果您想在其中一个字典中获取值，您可以执行以下操作：

```
var newDicValues = expectedoutput.Select(x=>newDic[x]); 
```

或者，你知道，做任何其他你喜欢的事情。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-15T10:47:27.870

试试这个来获得两个不同列表之间的区别：如果它们有任何共同的属性。

```
 var differentItems = List<Type1>.Select(d => d.Name)
                        .Except(List<Type2>.Select(d => d.Name)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:07:43.983

如果理解正确，请尝试这样的事情

如果你有一个单独的字典像这样`Dictionary<int, Fooclass> FinalDict`

```
 IEnumerable<int> list = OldDic.Keys.Except(NewDic.Keys);
            foreach (var x in list)
            {
                var value =new MyClass();
                OldDic.TryGetValue(x,out value );
                FinalDict.Add(x,value);
            } 
```

所以在名为***FinalDict***的 Dictionary中会有键和相关的***Fooclass***

希望这可以帮助

# php - xpath和提取多个值

> ID：11653165
> 
> 赞同：0
> 
> 时间：2012-07-25T15:24:53.213
> 
> 标签：php, dom, xpath

在我持续的 xpath 和提取数据的传奇中，我继续挣扎。我只需要包含在表格单元格中的两个值。我可以单独访问每个，但在那里我无法访问另一个。我有这样的细胞

```
<TR>
<TD width="120" align="center" valign="top">
<A href="http://www..yadayada.com"> <!--the href I need to extract-->
<IMG src="http://images.com/items/yada.gif" width="80" height="80" border="1"></A>
<BR>
<B>Random number PT</B><!--the text I need to extract-->
</TD> 
```

我像这样遍历：

```
@$dom = new DOMDocument();
@$dom->loadHTML( $rawPage );
@$xpath = new DOMXPath( $dom );
@$queryResult = $xpath->query( "..../tr/td[contains( b, 'PT' ) ]/b" ); 
```

获得href链接和类似的，

```
@$queryResult = $xpath->query( "..../tr/td[contains( b, 'PT' ) ]/a" ); 
```

得到我需要的文字。然后我像这样提取

```
//for the text in b
foreach ( $queryResult as $result )
{
echo $result->textContent . " text content<br>";
} 
```

和链接

```
//for the text in href
foreach ( $queryResult as $result )
{
echo $result->getAttribute( 'href' ) . " href<br>";
} 
```

我不会拉出表格中的每个 TD，这就是为什么我匹配`/td[contains( b, 'PT' ) ]`那些在表格中包含 PT 的**. 我已经阅读了关于工会和使用`/td[contains( b, 'PT' ) ]/*[self::a or self::b`但我的每个错误`Invalid argument supplied for foreach()`**

 **我已经尝试过使用 nextSibling 以及所有这些，当我回显它时它只是空白。那么，我怎样才能从我的表中获取这两个值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:23:35.233

你可以试试

```
//td[contains( b, 'PT' ) ] 
```

和

```
//td[contains( b, 'PT' ) ]/a 
```

两个查询应该可以工作，
使用您现有的代码

```
queryResult = $xpath->query( "//td[contains( b, 'PT' ) ]" );
foreach ( $queryResult as $result )
{
  echo $result->textContent . " text content<br>";
}

$queryResult = $xpath->query( "//td[contains( b, 'PT' ) ]/a" );
foreach ( $queryResult as $result )
{
  echo $result->getAttribute( 'href' ) . " href<br>";
} 
```**

# linux - 如何仅 grep 每个地址中的一个。Linux

> ID：11653166
> 
> 赞同：2
> 
> 时间：2012-07-25T15:24:53.557
> 
> 标签：linux, bash, shell, grep

好的，假设我在这样的文本文件中有一个地址列表：

```
https://www.amazon.com
https://www.google.com
https://www.msn.com
https://www.google.com
https://www.netflix.com
https://www.amazon.com
... 
```

那里还有很多其他的东西，但基本上我遇到的问题是在运行这个之后：

`grep "https://" addresses.txt | cut -d"/" -f3`

我得到了 amazon.com 和 google.com 两次。我只想得到它们一次。我不知道如何使搜索仅对独特的事物进行 grep。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:27:38.040

管道输出到 sort 和 uniq：

```
grep "https://" addresses.txt | cut -d"/" -f3 | sort | uniq 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:27:56.883

您可以`sort`用于此目的。

只需在您的命令中添加另一个管道并使用排序的独特功能来删除重复项。

```
 grep 'https://' addresses.txt | cut -d"/" -f3 | sort -u 
```

编辑：您可以使用`sed`而不是，`grep`这`cut`会将您的命令减少到

```
 sed -n 's@https://\([^/]*\).*@\1@p' < addresses.txt | sort -u 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-28T13:55:07.873

使用 awk 您只能使用一个 unix 命令，而不是使用 3 个管道的四个命令：

`awk 'BEGIN {FS="://"}; { myfilter = match($1,/https/); if (myfilter) loggeddomains[$2]=0} END {for (mydomains in loggeddomains) {print mydomains}}' addresses.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T15:28:04.607

`grep "https://" addresses.txt | cut -d"/" -f3 | sort | uniq`是你想要的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T15:28:07.577

我会过滤结果*post-grep*。

例如，`sort -u`用于排序，然后生成一组唯一条目。

您也可以使用`uniq`此功能，但必须提前对输入进行排序。

这就是能够将这些实用程序连接在一起的美妙之处。您可以获得不同的可执行文件，而不是使用单个 grepping/sorting/uniq(ing) 工具，并且可以按照自己的意愿将它们链接在一起。

# html - Css 和 html 生产工具

> ID：11653174
> 
> 赞同：0
> 
> 时间：2012-07-25T15:25:05.497
> 
> 标签：html, css, developer-tools

我开始学习css和html编程，我目前正在使用记事本来做，哪些IDE工具提供了自动属性列表来帮助编写css并使css和html开发更有效率，谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:27:07.340

[Microsoft Visual Studio Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)包含[智能感知](http://en.wikipedia.org/wiki/IntelliSense)，这在开始学习 HTML/CSS 时非常有用。它也可以免费下载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:27:33.833

您可以使用[Aptana Studio 3](http://www.aptana.com/products/studio3)，它也是免费的。

核心特点：

*   HTML、CSS 和 JavaScript 代码辅助

*   部署向导

*   集成调试器

*   Git 集成

*   内置终端

*   IDE 定制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:38:36.103

我认为如果你刚刚开始，你不应该使用 IDE。您将过于依赖它并且不会真正学习......那么如果没有 IDE，您将永远无法做任何事情。

话虽如此，我使用[Notepad++](http://notepad-plus-plus.org/)。我依赖的唯一功能是单词完整，因为它会自动完成每个单词，我不会不小心打错任何变量名或任何东西。它还加快了打字速度，因为我通常只需要输入每个单词的前几个字符。

上次我和别人一起做一个大型项目时，我们使用了 Netbeans。它在 HTML、CSS 和 PHP 上运行良好。也内置了版本控制。

不过，我仍然默认使用 Notepad++，因为它既快速又简单。我的观点是，专注于学习，而不是你正在学习的工具。一旦你足够擅长它，你就可以获得加快开发速度的工具，但不要在开始时使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:57:31.547

我喜欢 html css 的 Dreamweaver。其他语言的文本伴侣是我的最爱。

# php - 将变量传递给扩展另一个类的类

> ID：11653175
> 
> 赞同：1
> 
> 时间：2012-07-25T15:25:07.467
> 
> 标签：php

我正在使用 tFPDF 类。

我正在使用此代码扩展此类以获取自定义页眉和页脚

```
class PDF extends tFPDF{
    function Header(){
        $this->Image('../../images/logo-admin.png',10,6,30);

        $this->SetFont('DejaVu','',13);
        $this->Cell(247,10,$produto,0,0,'C',false);

        $this->SetDrawColor(0,153,204);
        $this->SetFillColor(98,197,230);
        $this->SetTextColor(255);
        $this->Cell(30,10,date('d/m/Y'),1,0,'C',true);

        $this->Ln(20);
    }

    function Footer(){
        $this->SetY(-15);
        $this->SetFont('Arial','',8);
        $this->Cell(0,10,'P'.chr(225).'gina '.$this->PageNo().'/{nb}',0,0,'C');
    }
} 
```

我需要做的是以某种方式更改`$produto`不属于该类的变量。

我正在使用`$pdf = new PDF();`.

我如何将一个变量传递给这个类，以便我可以使用一个字符串，比如`$pdf = new PDF('SomeString');`在类中使用它，比如`$this->somestring = $somestringfromoutside`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:33:26.440

您可以使用`protected`var 并声明一个 setter。

```
class PDF extends tFPDF {

protected $_produto = NULL;

public function Header(){
    /* .. */
    $this->Cell(247,10,$this->_getProduto(),0,0,'C',false);
    /* .. */
}

public function Footer(){
    /* .. */
}

public function setProduto($produto) {
    $this->_produto = $produto;
}

protected function _getProduto() {
    return $this->_produto;
}

}

// Using example 
$pdf = new PDF();
$pdf->setProduto('Your Value');
$pdf->Header(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:31:20.570

最好的办法是使用带有 $myString 的默认参数的 __construct() 方法

```
class PDF extends tFPDF{
    public $somestring;

    function __construct($myString = '') {
        parent::__construct();
        $this->somestring = $myString;
    }

    function Header(){
        $this->Image('../../images/logo-admin.png',10,6,30);

        $this->SetFont('DejaVu','',13);
        $this->Cell(247,10,$produto,0,0,'C',false);

        $this->SetDrawColor(0,153,204);
        $this->SetFillColor(98,197,230);
        $this->SetTextColor(255);
        $this->Cell(30,10,date('d/m/Y'),1,0,'C',true);

        $this->Ln(20);
    }

    function Footer(){
        $this->SetY(-15);
        $this->SetFont('Arial','',8);
        $this->Cell(0,10,'P'.chr(225).'gina '.$this->PageNo().'/{nb}',0,0,'C');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:32:30.300

如果您只是专门尝试注入 $producto 变量。像这样对代码进行一次更改就很容易了：

```
function Header($producto){ 
```

这将允许您将参数传递给 Header 函数调用。

像这样：

```
$tfpdf = new tFPDF();
$tfpdf->Header($producto); 
```

如果您真的想在实例化时传递值，那么您需要定义一个构造函数，并且可能还有一个类属性来存储您的 $producto 值。然后，您将 $producto 值传递给构造函数并相应地设置属性。然后在您的标头函数中，您将引用 $this->producto 而不是 $producto。

# iphone - Cocos2d对CCDirector暂停方法的疑惑

> ID：11653183
> 
> 赞同：1
> 
> 时间：2012-07-25T15:25:20.440
> 
> 标签：iphone, ios, cocos2d-iphone, game-engine

我已经看过几篇关于这个的帖子（例如[这个](https://stackoverflow.com/questions/5852354/cocos2d-engine-pause-resume)），但我仍然不明白。

如果我调用 CCDirector 暂停方法，它会将动画间隔设置为 1/4，并将值 isPaused_ 设置为 YES（参见下面的代码）。在**CCDirector.m**类中，**isPaused_**变量似乎并没有在 pause 和 resume 方法中使用太多。

因此，我决定也调用 stopAnimation 方法，但在某些帖子中没有提及：

```
 [[CCDirector sharedDirector] stopAnimation] 
```

它显然不会停止将加速度计数据和输入数据发送到主场景。这对我来说确实有意义，因为游戏的开发者可能希望允许用户通过摇晃 iPhone 或点击恢复按钮来恢复。**这是这个选择背后的原因吗？**

另外，为什么动画间隔设置为 1/4 以及为什么即使有这个值的东西也不会移动（除了我的玩家实体使用加速度计输入移动）？

非常感谢！

```
-(void) pause
{
    if( isPaused_ )
        return;

    oldAnimationInterval_ = animationInterval_;

    // when paused, don't consume CPU
    [self setAnimationInterval:1/4.0];

    [self willChangeValueForKey:@"isPaused"];
    isPaused_ = YES;
    [self didChangeValueForKey:@"isPaused"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:06:05.593

暂停 CCDirector 会将帧速率降低到 4 fps，以节省电池和 CPU 周期。如果您使用 UIKit 视图，则后者是必要的，在某些情况下，需要暂停 director 以使 UIKit 动画流畅地动画。

暂停指挥器的作用还在于它停止更新所有节点。具体来说，CCScheduler 不会触发任何计划的选择器或更新方法。它还可以防止触摸被传递到节点，因为它们是通过 CCTouchDispatcher 中继的，当 Director 暂停时，CCTouchDispatcher 也会暂停。

但正如您所注意到的，加速度计并未暂停。这是因为 cocos2d 没有为 UIAccelerometer 提供包装器，因此您可以直接从 iOS 获得这些通知，而忽略了 director 的暂停状态。如果您随后更改 didAccelerate 方法或直接从该方法调用的其他方法中的节点位置，则该节点将更改其位置，尽管 Director 已暂停。

这只是导演的暂停不适合“暂停游戏”功能的原因之一。另一个问题是暂停会阻止任何使用 cocos2d 功能构建的暂停菜单也会被暂停，这违背了目的。

那么 startAnimation 和 stopAnimation 只是极端的措施，阻止 cocos2d 完全更新屏幕。这通常仅用于 cocos2d 视图从视图层次结构中临时移除、隐藏或某些 UIKit 视图进入全屏状态的情况。从这个意义上说，stopAnimation 就像一个暂停功能。

# c# - 避免添加空白的新行

> ID：11653184
> 
> 赞同：0
> 
> 时间：2012-07-25T15:25:21.473
> 
> 标签：c#, asp.net, database, webforms

我创建了一个网格视图应用程序，在我的模板之外我有一个添加新行按钮。当我添加一个新行时，它会被放置一个编辑和删除按钮。我想要做的是当我单击添加新行按钮时，我希望它在编辑模式下打开新行，因此不能添加带有空信息的空白行。所以基本上如果我添加一个新行并且不输入信息，它将不会被创建。

如果我需要更彻底地解释我的解释，请询问。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:16:36.023

我最终自己解决了问题。它现在完美无缺。我也更改了数据库，但我提供了我的代码。我相信有一种更简单的方法，但这是我能做的最好的：如果你们能以更简单的方式提供意见，我将不胜感激。

```
protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        if (e.CommandName == "Insert") //- this is needed to explain that the INSERT command will only work when INSERT is clicked
        {
            gv.DataBind();

            DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

            string transCode = "", fundCode = "", BSA_CD = "", DP_TYPE = "";

            if (d.Rows.Count > 0)
            {
                transCode = d.Rows[0]["TRANS_CD"].ToString();
                fundCode = d.Rows[0]["FUND_CD"].ToString();
                BSA_CD = d.Rows[0]["BSA_CD"].ToString();
                DP_TYPE = d.Rows[0]["DP_TYPE"].ToString();

                if (transCode.Trim().Length > 0)
                {
                    dbcon.Execute("INSERT INTO CIS.CIS_TRANS (TRANS_CD) VALUES('')", "ProjectCISConnectionString");

                    gv.DataBind();
                }
            }

            gv.EditIndex = gv.Rows.Count - 1;

        }
        else if (e.CommandName == "Cancel")
        {
            DataTable d = dbcon.GetDataTable("SELECT * FROM CIS.CIS_TRANS ORDER BY ID DESC", "ProjectCISConnectionString");

            string transCode = "";

            if (d.Rows.Count > 0)
            {
                transCode = d.Rows[0]["TRANS_CD"].ToString();

                if (transCode.Trim().Length == 0)
                {
                    dbcon.Execute(string.Format("DELETE CIS.CIS_TRANS WHERE ID = '{0}'", d.Rows[0]["ID"]), "ProjectCISConnectionString");

                    gv.DataBind();
                }
            }

        }
    } 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-25T15:55:09.247

这很简单，一旦添加了行：

您需要设置新添加行的编辑索引：

`gv.EditIndex = gv.Rows.Count-1;`

# 为 OP 编辑

这是肮脏的代码，我只是向您展示我的意思并很快将其搅打。假设您的页面上有一个名为 GridView1 的网格视图：

```
namespace HelpSO3
{
    public partial class _Default : System.Web.UI.Page
    {
        List<string> t = new List<string>();
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                string s = "hi";
                t.Add(s);
                GridView1.DataSource = t;
                GridView1.DataBind();
                Session["MyList"] = t;
            }
        }

        protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            t = (List<string>)Session["MyList"];
            t.Add("Another String");
            GridView1.DataSource = t;
            GridView1.DataBind();
            GridView1.EditIndex = GridView1.Rows.Count - 1;
            GridView1.DataBind();
            Session["MyList"] = t;
        }
    }
} 
```

因此 Button1_Click 事件添加了一个值为“Another String”的新行，然后我们绑定网格视图并将`EditIndex`值设置为最新行并重新绑定。就这么简单。

在您的情况下，您的代码将变为：

```
 protected void gv_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Insert") //- this is needed to explain that the INSERT command will only work when INSERT is clicked
        {
            dbcon.Execute("INSERT INTO PROJ_ASP (TRANS_CD) VALUES('')", "ProjectASPConnectionString");

            gv.DataBind();
            gv.EditIndex = gv.Rows.Count-1;
            gv.DataBind();
        }

    } 
```

# c++ - 在不进行强制转换的情况下存储和检索未知类型的对象

> ID：11653187
> 
> 赞同：0
> 
> 时间：2012-07-25T15:25:34.097
> 
> 标签：c++, oop, design-patterns

鉴于：

A 类的对象包含一个对象数组。

这些对象中的每一个都必须实现一些接口 IB，因为 A 使用 IB 的方法。

这些对象由客户端传递给 A 类的对象，它们属于 C 类型或其子类。A 必须将这些对象返回给客户端。

问题：A必须对C一无所知，只知道IB，但A必须返回C。

C++ 中是否有没有不安全强制转换<> 的标准解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:51:19.607

您可以使用模板实现一个完全安全的类。

```
template  <typename T>class A
{
    std::vector<IB*> myObj;

public:

    void add(IB* anObj)
    {
        myObj.push_back(anObj);
    }

    void get(int anIndex, T*& anObj)
    {
        T* t = dynamic_cast<T*>(myObj[anIndex]);
        anObj = t;
    }
}; 
```

然后像这样使用。

```
A<C> a; 
```

演示在[这里给出](http://codepad.org/2It3PLSN)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:44:49.320

*我*不认为这是`A`不可能的。然而，在 C++ 中足够了解使用正确的接口并不难。让所有类都派生自一个抽象基类，其中接口定义为纯虚函数。这实际上对应于正确的 C++ 设计——将接口与实现分离——如[Sutter & Alexandrescu](https://rads.stackoverflow.com/amzn/click/com/0321113586)中所述。*`C``A``IB`*

 *否则，如果上面确实不可能，您可以创建`A`一个模板类，并将数组元素存储为`void*`，使用 . 解析类类型（在编译时）`static_cast`。*

# asp.net - 具有可扩展组的分组 Gridview

> ID：11653190
> 
> 赞同：2
> 
> 时间：2012-07-25T15:25:38.990
> 
> 标签：asp.net, jquery, gridview, c#-3.0

关于嵌套网格视图或具有子网格视图的主题有许多问题。我已经考虑过这种方法，但它对我的目的来说太多了。我能找到的最接近的现有问题是：[Grouped Gridview](https://stackoverflow.com/questions/1804282/grouped-gridview)

不幸的是，尽管这对如何创建分组行有一些建议，但它并没有使它们可折叠。

我的要求是我希望用户看到带有分隔行的网格视图，例如

> **- 组 1**
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> **- 组 2**
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> **- 组 3**
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3

这样用户可以，如果他们希望这样查看：

> **+ 组 1**
> **- 组 2**
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> **- 组 3**
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3
> 数据 1 | 数据 2 | 数据 3

或这个：

> **+ 第 1**
> **组 + 第 2**
> **组 + 第 3 组**

基本上所有的分组行都是组的标题。它们甚至不是真正正确的 Gridview 行。实际的行是适当的网格视图，不需要任何进一步的向下钻取功能。

我希望我的解决方案在客户端是可行的，我有一些限制，即我可以使用 javascript 或 jQuery（包括 jQuery-ui 1.8.8），但不能任意扩展我正在使用的 AJAX 工具包的数量。我宁愿不必通过多个组扩展回发来不断地管理页面的状态。

这是可以实现的吗？谁能指出我可能会推动我的资源的方向？

编辑：哦，是的，我忘了提。基本 gridview 的行中偶尔会有控件，包括但可能不限于：按钮、文本框、复选框和下拉菜单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T19:39:30.077

由于您没有提供实际代码，因此我根据[其他问题](https://stackoverflow.com/questions/7725173/displaying-records-grouped-by-month-and-year-in-asp-net)整理了一个示例，说明如何完成您需要的工作。

另一个问题只是获取服务器驱动器 C 上的文件，并按创建时间在网格中按降序对它们进行分组。所以这里是转发器标记：

```
<asp:HiddenField ID="dataGroups" runat="server" />
<asp:Repeater ID="rpt" runat="server" OnItemDataBound="rpt_RowDataBound" >
    <ItemTemplate>          
        <!-- Bind to your specific properties i.e. Invoice #, file type, etc. -->
        <table id="tableItem"  runat="server">
            <tr>
                <td style="width: 200px;">
                    <asp:Label ID="lblName" runat="server" Text='<%#Eval("Name") %>'></asp:Label>
                </td>
                <td style="width: 200px;">
                    <asp:Label ID="lblDirName" runat="server" Text='<%#Eval("DirectoryName") %>'></asp:Label>
                </td>
                <td style="width: 200px;">
                    <asp:Label ID="lblCreationTime" runat="server" Text='<%#Eval("CreationTime") %>'></asp:Label>
                </td>
                <td style="50px">
                <asp:Button ID="btnAction" runat="server"  Text="Hit me" OnClick="btnAction_Click"/>
                </td>
            </tr>
        </table>
    </ItemTemplate>       
</asp:Repeater> 
```

这是事件背后的代码`OnRowDataBound`；用 C# 编写，因为这就是您使用的：

```
private int month = -1;
private int year = -1;
protected void rpt_RowDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
        //Binding to FileInfo objects. 
        //Since we are grouping by CreationTime we need to check if it's time to create a new "group"
        //Is current month and year different from the value previously stored on the month and year variables?
        if (month != (e.Item.DataItem as FileInfo).CreationTime.Month || year != (e.Item.DataItem as FileInfo).CreationTime.Year)
        {   
            month = (e.Item.DataItem as FileInfo).CreationTime.Month;
            year = (e.Item.DataItem as FileInfo).CreationTime.Year;

            //append the current group to the hidden variable "dataGroups" which will tell us quickly how many groups we have in total
            dataGroups.Value += (e.Item.DataItem as FileInfo).CreationTime.ToString("yyyMM") + ",";
        }
        //for every row; "stamp it" with this attribute since we'll use it on the client side with jQuery
        (e.Item.FindControl("tableItem") as HtmlTable).Attributes.Add("data-group", (e.Item.DataItem as FileInfo).CreationTime.ToString("yyyMM"));
    }
} 
```

现在在客户端；我们需要做一些 jQuery 魔术来构建可折叠面板。

```
<link href="css/flick/jquery-ui-1.8.22.custom.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>

 <script type="text/javascript">
     $(document).ready(function () {
         //asp hidden element containing the list of groups separated by commas.
         //Check code behind of RowDataBound to see where is this populated
         var dataGroups = $('#<%=dataGroups.ClientID%>').val().split(',');
         for (var i = 0; i < dataGroups.length; i++) {
             //split() doesn't have an option to ignore empty strings so we'll just ignore it
             if (dataGroups[i] != '') {
                 //select all table elements with the data-group value matching the 
                 //current group we are iterating over and enclose them all 
                 //inside a div; effectively creating a "group"
                 $('table').filter(function (inputs) {
                     return $(this).data('group') == dataGroups[i];
                 }).wrapAll("<div class='accordion'>");
             }
         }
         var accordions = $('.accordion');
         //now, for every div enclosing the groups, create a Handle that will work as the element that
         //collapses or expands the group
         $(accordions).wrapInner("<div>").prepend('<h3><a href="#">Handle</a></h3>');

         //Now replace the word "Handle" above for the actual group number/name or what have you
         for (var i = 0; i < accordions.length; i++) {
             $(accordions[i]).find('h3 a').text("Group " + $(accordions[i]).find('table:first').data('group'));
         }

         //finally call jQuery.accordion to create the accordions on every group
         $('.accordion').accordion({ collapsible: true, autoHeight: false });
     });
 </script> 
```

现在，这些代码行产生了这个：

![在此处输入图像描述](../Images/10922c3b2286cd323d0c931ccf6870a4.png)

# java - 通过 javascript 调用 java 小程序方法

> ID：11653191
> 
> 赞同：0
> 
> 时间：2012-07-25T15:25:40.550
> 
> 标签：java, javascript, jquery, applet

当我的 java Applet 中发生特定事件时，如何调用函数？

在我的 Javascript 中，我有以下代码，它总是返回一个空值。

```
$(function () {
    alert(document.applets[0].returnClientId());
}); 
```

我需要在执行特定方法时调用此警报。更具体地说，我的 java Applet 中存在名为 identify 的方法。

identify 方法存在于我的 Util.class 中，它不是从 JApplet 扩展而来的。我的 FormMain.class 从 JApplet 扩展而来，我从这个 Util.class 中调用了一些方法（包括识别方法）。

**更新**：我的 Java 代码

```
public String getClientid() {
    return clientid;
}

public void setClientid(String clientid) {
    this.clientid = clientid;
}

public String returnClientId() {
    return getClientid();
}

public void identify() {
    try {
        fingerprintSDK.prepareForIdentification(this.template);

        ResultSet rs = identifyStmt.executeQuery();

        while (rs.next()) {         
            byte[] templateBuffer = rs.getBytes("template");

            Template referenceTemplate = new Template(templateBuffer);

            boolean matched = fingerprintSDK.identify(referenceTemplate);

            if (matched) {
            // ui is my FormMain instance
                ui.showImage(GrFingerJava.getBiometricImage(template,
                        fingerprint, fingerprintSDK));

                ui.writeLog("Found. Client = "
                        + rs.getString("Name"));

                ui.setClienteid(rs.getString("Cliente_Id"));

                ui.disableTemplate();                   
                return;
            }
        }

        ui.writeLog("Not Found.");
        ui.enableTemplate();
    } catch (SQLException e) {

        ui.writeLog(e.getMessage());
    } catch (GrFingerJavaException e) {
        ui.writeLog(e.getMessage());
    }
} 
```

就在我的用户将手指放入生物识别设备时执行识别方法。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:39:57.197

假设你有以下 JS 函数

```
function foo(client) {
    alert(client);
} 
```

你将修改你`Utils.java`的如下

```
public void identify() {
    // the rest of your code
    String id = rs.getString("Cliente_Id");
    ui.setClienteid(id);
    // call the Javascript function
    JSObject.getWindow(ui).eval(String.format("foo(%s)", id));
} 
```

*   [从 Applet 调用 Javascript 代码](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)
*   [Java 到 Javascript 的通信（Oracle 官方文档）](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/java_js.html)

要使用包编译代码，`netscape.javascript.*`您需要`$JAVA_HOME/jre/lib/plugin.jar`. [看这里](http://jdk6.java.net/plugin2/liveconnect/#JAVA_TO_JS)

> 为了调用 JavaScript，Java 代码使用 netscape.javascript.JSObject 和 netscape.javascript.JSException 类。自 Java 2 标准版 1.4 版发布以来，这些类在 Java 开发工具包或 Java 运行时环境中的 jar 文件 jre/lib/plugin.jar 中提供。如果您引用这些 JavaScript 类，则需要将 plugin.jar 添加到您的编译类路径中。这可以通过您的 Java IDE（如果您使用一个）或通过将 -classpath 命令行参数传递给 Java 编译器 javac 来完成。
> 
> 在运行时，Java 插件自动使这些类可用于小程序，因此无需更改小程序或其设置方式。

# crystal-reports - Crystal Reports Web 查看器 - 交叉表中的格式问题

> ID：11653198
> 
> 赞同：0
> 
> 时间：2012-07-25T15:26:11.870
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi

我正在使用 Crystal Reports Web 查看器来显示 CR 报告。它在 CR Designer 预览中工作得非常好，但是当我在浏览器（任何）中查看它时，交叉表看起来不像预期的那样：

![交叉表格式错误](../Images/d76b57e061ff786f3d758d3c86f9e05f.png)

具体来说，列名和行名添加了额外的边距（值正确显示），这会导致问题。我试图更改我网站的 css 文件中的段落边距设置，但它没有任何区别。什么可能导致此问题，如何解决？

当我使用 Firebug 更改特定的 p 元素边距属性时，它会正确显示：

![交叉表固定](../Images/1a10af65be979cd36ed47619a5d3812b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:15:04.747

这实际上是影响 13.0.4 版本的 Crystal Reports 错误，当您使用 13.0.3（可能更早）版本运行相同的报告时，它可以正常工作。CR 团队知道此错误，但要到 10 月才能修复（3 个月来修复以前运行良好的问题...）：[http ://scn.sap.com/thread/3207181](http://scn.sap.com/thread/3207181)

就是喜欢水晶...

# c++ - C++ Builder 中的 T 线程

> ID：11653200
> 
> 赞同：2
> 
> 时间：2012-07-25T15:26:16.217
> 
> 标签：c++, c++builder

如果有人可以帮助我，我会很高兴。我自己是 C++ Builder 的新手，从未在 C++ 中使用过线程。

我在 c++ builder 中有一个表单，我想线程化，这样它就不会崩溃。目前，表单在完成应用程序的后台进程之前不会加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T01:25:45.833

在 C++ Builder 中，您应该添加一个线程对象（右键单击“project.exe”，添加新的，其他。它位于 C++ Builder 文件夹中）。然后您需要添加标题包含并实例化对象。

如果你太菜鸟不会处理对象，你可以简单地使用带有函数的 CreateThread 函数。也许这不是最好的，但如果你没有经验，这很容易。

```
TForm1 *Form1;
unsigned long __stdcall my_thread_func(void *args);

//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
    : TForm(Owner){
    CreateThread(NULL,0,&my_thread_func,NULL,0,NULL); //create thread in form constructor
}
//---------------------------------------------------------------------------
//  Write a function like this
unsigned long __stdcall my_thread_func(void *args){
Sleep(5000);
Form1->Caption = L"Done!!";
} 
```

# c# - 管理多个类似的应用程序设置

> ID：11653201
> 
> 赞同：0
> 
> 时间：2012-07-25T15:26:22.940
> 
> 标签：c#, winforms

我正在开发一个应用程序来绘制存储在文件中的基于时间的数据。每个文件最多可以有 5 个可以绘制图表的数据集。应用程序本身最多可以渲染 10 个这些文件（因此可以在屏幕上渲染 50 个图形）。

由于屏幕上可能有多个图表——顺便说一下，它们是折线图——我希望为用户提供一种方法来选择 50 个可能的折线图中每一个的颜色。

我已经有了一个用户界面，它将为用户提供一种简单的方式来做到这一点。问题是我无法想出一种优雅的方式来存储 50 个可能的折线图（顺便说一下，持久存储）中的每一个的颜色信息。

到目前为止，我所尝试的是将 50 行颜色选择中的每一个存储在应用程序设置文件（例如，`Properties.Settings.Default`命名空间）中。不幸的是，有 50 个设置，它们都是按顺序命名的，例如`File1DataSet1Color`, `File1DataSet2Color`, `File1DataSet3Color`, `File1DataSet4Color`, `File1DataSet5Color`, `File2DataSet1Color`, 等等。不幸的是，这导致了一些异常冗长和重复的图形渲染代码。

所以我的问题是：**对于 50 条线图的颜色设置的持久存储，什么是优雅的解决方案，它不会导致我的渲染代码中出现脆弱或重复的代码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:42:06.520

也许您可以将一个 s 数组序列化`int`到一个文件中。（二维。用于颜色的 3 个部分。）

```
BinaryFormatter formater = new BinaryFormatter();
string path = "path";
object data = "data";
using (Stream stream = File.Create(path))
    formater.Serialize(stream, data); 
```

或者： [如何在应用程序设置中存储 int[] 数组](https://stackoverflow.com/questions/1766610/how-to-store-int-array-in-application-settings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:54:10.573

看起来 XML 序列化是我要走的路。

# c# - 在 VS 中可视化二叉树

> ID：11653204
> 
> 赞同：2
> 
> 时间：2012-07-25T15:26:29.020
> 
> 标签：c#, visual-studio, debugging, tree

我正在实现一个有一些二叉树的 C# 程序。

是否有一些可用于调试的 Visual Studio 插件？

我需要它在运行时绘制树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:34:33.357

不是最好的方法，如果树很大，可能也不是很好，但是您可以创建一个递归函数，例如：

```
public String ToString()
{
    return id + "{" + a.ToString() + ";" + b.ToString() + "}";
} 
```

with ：`id`当前节点的id，`a`以及`b`两个孩子

**编辑**

您需要绝对确定这是一棵树并且它不包含任何循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:01:21.283

这是一个简单的二叉树，带有将其转换为字符串表示的方法。您可能有自己的二叉树类，但您可以使用相同的通用算​​法。

在这里，我使用单个选项卡来分隔每个节点。如果`ToString`每个节点的内容大于 8 (?) 个字符，您可能需要使用更多的空格、多个制表符，或者在每个节点的字符串开头添加一些字符以帮助您将其可视化。

```
public class Node<T>
{
    public T Data { get; set; }
    public Node<T> Left { get; set; }
    public Node<T> Right { get; set; }

    public string displayNode()
    {
        StringBuilder output = new StringBuilder();
        displayNode(output, 0);
        return output.ToString();
    }

    private void displayNode(StringBuilder output, int depth)
    {

        if (Right != null)
            Right.displayNode(output, depth+1);

        output.Append('\t', depth);
        output.AppendLine(Data.ToString());

        if (Left != null)
            Left.displayNode(output, depth+1);

    }
} 
```

然后实际使用它：

```
Node<string> root = new Node<string>() { Data = "root" };
root.Left = new Node<string>() { Data = "1" };
root.Right = new Node<string>() { Data = "2" };

root.Left.Left = new Node<string>() { Data = "3" };
root.Left.Right = new Node<string>() { Data = "4" };

Console.WriteLine(root.displayNode()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-19T23:16:22.547

我发现在调试时从放大镜中获取二叉树的 DOT 表示并将其粘贴到任何 Graphviz 在线站点（例如[dreampuf.github.io/GraphvizOnline](https://dreampuf.github.io/GraphvizOnline) ）非常有用。

```
[DebuggerDisplay("{DebuggerDisplay}")]
public class BinaryTree
{
    private string DebuggerDisplay => GetDotRepresentation();

    public string GetDotRepresentation() {
        var sb = new StringBuilder();

        sb.AppendLine("digraph BST {");
        GetDotRepresentation(this.Root, sb);
        sb.AppendLine("}");

        return sb.ToString();
    }

    private void GetDotRepresentation(Node root, StringBuilder sb)
    {
        if (root == null) return;

        if (root.Left != null) {
            sb.AppendLine($"{root.Value} -> {root.Left.Value}");
        }

        if (root.Right != null)
        {
            sb.AppendLine($"{root.Value} -> {root.Right.Value}");
        }

        GetDotRepresentation(root.Left, sb);
        GetDotRepresentation(root.Right, sb);
    }
 } 
```

# php - 使用 PHP 连接到 MYSQLi 的正确方法（性能）

> ID：11653206
> 
> 赞同：1
> 
> 时间：2012-07-25T15:26:31.410
> 
> 标签：php, performance, mysqli, prepared-statement

我熟悉 PHP 和 MYSQLi 连接，并阅读了 PHP 文档，包括[http://www.php.net/manual/en/mysqli.persistconns.php](http://www.php.net/manual/en/mysqli.persistconns.php)，但我想知道建立和关闭的正确方法（性能方面） MYSQLi 中使用 PHP 的连接。

***启动和关闭 mysqli 连接的最有效方法是什么？***

***如果 mysqli 连接在查询期间丢失，正确的处理方法是什么？***

这是我当前的设置：

```
 1\. Opening a connection at the beginning of the php page
  2\. Making all the necessary queries through other classes
  3\. Closing the connection at the end of page

/*
public exampleQuery ($conn, $p1, $p2) {
  $stmt = $conn->prepare("SELECT id FROM tbl_name WHERE c1=? AND c2=?");
  $stmt->bind_param("ss", $p1, $p2);
  $stmt->execute();
  // etc..
}
*/

$mysqli_connection = $connectionClass->connectToMYSQLi();
//Execute queries using prepared statements
$queryClass->exampleQuery($mysqli_connection,$param1, $param2);
$queryClass->exampleQueryTwo($mysqli_connection,$param1, $param2);
//etc...
$connectionClass_>closeMYSQLiConnection($mysqli_connection); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:44:33.310

*一旦新用户同时重新加载或访问页面，PHP 如何处理连接？*

PHP 还将确保您在脚本中使用的某些变量不会被碰巧访问同一页面的其他用户使用。数据库连接也是如此。

使用某些凭据（用户名/密码）访问数据库并不意味着它可以与使用相同凭据的其他人“冲突”。数据库可以同时运行多个连接，即使它们都使用**相同**的凭据。

但这不应该是您的问题/担心（作为功能的最终用户，作为开发人员），但它归结为 PHP 分叉进程或使用线程安全模块来服务每个请求。然后，与每个请求相关联的每个进程都会向数据库启动一个新会话（或回收一个会话）。

*准备好的陈述：*

准备好的陈述是好的。它们为数据库提供了使用存储在数据库中的执行计划的机会。当您使用复杂的查询时，这可以带来一些速度优势。它们还可以保护您免受 SQL 注入。

所以继续使用准备好的语句。

如何在代码中构建它们取决于您。如果您从某个类调用语句，数据库根本不在乎。如果您在 Java 应用程序中使用相同的预编译语句，它们仍然是预编译语句（如果数据库支持它们）。数据库仍然会为他们准备好执行计划。

所以按照你最喜欢的方式去做（=对你来说最清晰/简洁）。

关于这个主题还有很多话要说，我解释的一些概念只是部分正确，但我希望这能刷大图。

# windows - 无法远程桌面进入 Windows Azure VM

> ID：11653208
> 
> 赞同：19
> 
> 时间：2012-07-25T15:26:36.600
> 
> 标签：windows, azure, virtual-machine, remote-desktop

我正在运行 Windows Azure 的试用版并设置一个简单的 Windows 虚拟机。但是，我似乎无法使用 Windows 远程桌面连接来远程进入机器。我究竟做错了什么？乍一看，它似乎不喜欢我的用户名和密码。但是我也无法ping通VM地址。我不想通过VS或任何其他工具，我喜欢通过Windows RMD工具做一个简单的远程桌面连接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T03:52:09.967

你能检查一下你的虚拟机中的 3389 端口是否打开了吗？这个端口通常被远程桌面使用？您可以从新的 azure 预览门户中的虚拟机->端点部分进行检查。如果没有定义端口，则必须创建新端口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-29T11:07:44.113

可能是端口被阻止，Azure VM 默认为端口 52137，在您的端点设置中将其更改为常规端口 3389 - 这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:19:26.790

Freddy，请您先确认您的 Windows Azure 虚拟机是否正在运行，您可以通过查看预览门户来确认。我见过一些虚拟机第一次没有启动的情况，你需要第一次重新启动它。

因此，如果 VM 没有运行，请直接从门户启动它，或者即使它显示“正在运行”启动，请再次重新启动它。

下面描述了一些故障排除步骤，因此请遵循它们： [http ://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/9c88a364-c3eb-41aa-a6b0-3ceae00491c2](http://social.msdn.microsoft.com/Forums/en-US/WAVirtualMachinesforWindows/thread/9c88a364-c3eb-41aa-a6b0-3ceae00491c2)

如果上述步骤都不能解决您的问题，请继续将此问题报告到同一论坛，您将获得 Windows Azure 虚拟机团队的直接帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-01T11:57:44.237

出于安全原因，RDP 到具有 RDP“端点”设置的新 VM 默认情况下不起作用。

您需要从 azure 获取 RDP 证书或 .RDP 文件。

单击正在运行的虚拟机，然后单击底部控制面板中的“连接”，这将下载包含证书的 .RDP 文件，输入用户名和密码即可。

# semantic-markup - 向 XForms 添加自定义语义标记的最佳实践是什么？

> ID：11653210
> 
> 赞同：1
> 
> 时间：2012-07-25T15:26:44.630
> 
> 标签：semantic-markup, orbeon, xforms

问候所有 Orbeon 的人，

我想使用 Orbeon 将自定义 xml 语义标记添加到 XForms。例如，添加标签或属性“person”。

那么我是否必须创建新的标签或属性或两者兼而有之？最佳做法是什么？考虑标记结构和标记元素之间的差异？

我可以在哪里放置语义标记而不干扰 Orbeon 引擎的行为并且仍然能够访问它？我认为它应该在模型声明中？我错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:32:24.293

使用[标签或提示](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-other-extensions#TOC-Standalone-label-hint-help-and-alert-elements)元素添加隐藏或上下文相关的元数据。使用[占位符](http://blog.orbeon.com/2012/01/use-html5-placeholders-in-xforms.html)将数据显示为注释：

```
<xforms:label appearance="minimal">Your name</xforms:label> 
```

# java - SWT中的字体到图像

> ID：11653212
> 
> 赞同：0
> 
> 时间：2012-07-25T15:26:51.250
> 
> 标签：java, swt

我想将具有指定字体和**透明背景**的单个字符绘制到 SWT 图像，然后将其保存到文件中。我这样做：

```
FontData fontData; // info about the font
char ch = 'a'; // character to draw

Display display = Display.getDefault();
TextLayout textLayout = new TextLayout(display);
textLayout.setAlignment(SWT.CENTER);
textLayout.setFont(font);
textLayout.setText("" + ch);
Rectangle r = textLayout.getBounds();
Image img = new Image(display, r.width, r.height);
GC gc = new GC(img);
textLayout.draw(gc, 0, 0); 
```

角色已绘制，但背景为白色。我试图通过将 transparentPixel 设置为白色来解决它，这使背景透明但字符看起来很丑。我还尝试在图像上绘制任何内容之前将图像的 alphaData 设置为 0（完全透明），但 alphaData 在图像上绘制任何内容后不会更新，它始终保持透明。如何在图像上绘制具有透明背景的字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:43:53.887

你试过用 TYPE_INT_ARGB 绘制到 BufferedImage 吗？

```
Image fontImage= new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
Graphics2D g2d = fontImage.createGraphics();

//here u write ur code with g2d Graphics

g2d.drawImage(fontImage, 0, 0, null);
g2d.dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T08:31:27.360

您必须使用中间 ImageData 来启用透明度

```
TextLayout textLayout = new TextLayout(font.getDevice());
textLayout.setText(s);
textLayout.setFont(font);
Rectangle bounds = textLayout.getBounds();
PaletteData palette = new PaletteData(0xFF, 0xFF00, 0xFF0000);
ImageData imageData = new ImageData(bounds.width, bounds.height, 32, palette);
imageData.transparentPixel = palette.getPixel(font.getDevice().getSystemColor(SWT.COLOR_TRANSPARENT).getRGB());
for (int column = 0; column < imageData.width; column++) {
    for (int line = 0; line < imageData.height; line++) {
        imageData.setPixel(column, line, imageData.transparentPixel);
    }
}
Image image = new Image(font.getDevice(), imageData);
GC gc = new GC(image);
textLayout.draw(gc, 0, 0);
return image; 
```

# jquery - 如何在不调整整个结构的情况下调整箱体扩展上的砌体柱

> ID：11653213
> 
> 赞同：0
> 
> 时间：2012-07-25T15:26:56.133
> 
> 标签：jquery, jquery-masonry, jquery-isotope

我有一堵由使用 jquery masonry 的 wordpress 循环创建的框墙。每个框都包含一个拇指，我隐藏了有关每个图像的信息，并希望在悬停时使用 jquery 垂直扩展每个框。我的问题是我不想将内容覆盖在另一个盒子上，我只能弄清楚如何在悬停时调整整个砌体，这会在重新加载砌体导致悬停的框位于不同位置时导致问题。因此，如果有任何意义，我只需要使框在其列中悬停框下方的框向下移动，而无需更改砌体结构其余部分的格式。[您可以在这个jsfiddle](http://jsfiddle.net/YD7GU/)中看到我到目前为止所拥有的示例。

此外，我尝试使用 jquery 为悬停的框提供“固定”位置，以尝试将其锁定到位，但砌体重新加载将其更改回“绝对”，但我认为我正在那里做一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:52:21.550

我实际上使用 CSS3。

```
 .box{
transition: all 300 ease;
-moz-transition: all 300 ease; /* Firefox 4 */
-webkit-transition: all 300 ease; /* Safari and Chrome */
-o-transition: all 300 ease ; /* Opera */
}
.box:hover{
transform: scale(1.2,1.2);
-moz-transform: scale(1.2,1.2); /* Firefox 4 */
-webkit-transform: scale(1.2,1.2); /* Safari and Chrome */
-o-transform: scale(1.2,1.2); /* Opera */
} 
```

如果你不想在 .box:hover 中设置新的高度。这将起作用。我认为您可能必须设置一个 z-index，以便它在悬停时位于其他框上方。

如果您的盒子大小不同，您可以使用 Jquery .height() 返回高度。然后你可以用它来设置悬停的 css 说 height * 1.2 相对增加 20%。

然后得到增加的值

```
heightMoved = height * 0.2; 
```

然后将其他框向下移动。

```
boxesBelowTopPosition = $(".box").css("top")
movDown = boxesBelowTopPosition + heightMoved; 
```

然后在 Jquery 悬停事件中将 .css("top", moveDown) 添加到该 colomun 中的框。粗略的想法

# visual-studio-2010 - 如何让VS2010在编辑器中安静地重新加载文件

> ID：11653219
> 
> 赞同：3
> 
> 时间：2012-07-25T15:27:03.423
> 
> 标签：visual-studio-2010

我正在为一个项目使用 sass。我有时会打开 CSS 文件，但每次保存 .scss 文件时，VS 都会询问我是否要重新加载 CSS 文件，我会这样做。有没有办法告诉它总是在不提示的情况下重新加载文件类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:28:58.663

在工具/选项中，导航到文档并选中“自动加载更改，如果已保存”。

编辑：请注意，这将影响所有文件；据我所知，不可能有选择地启用它。我相信扩展可以改变这一点！

# xml - 如何通过 Foreach 绑定 XAttribute 值

> ID：11653227
> 
> 赞同：1
> 
> 时间：2012-07-25T15:27:27.600
> 
> 标签：xml, linq, c#-4.0, linq-to-xml

```
var xEle = new XElement("ContentDetails",
            from emp in _lstContents
            select new XElement("Contents",
                        new XAttribute("key", emp.Key),
                        new XAttribute("PublishedDate", emp.PublishedDate),
                        new XAttribute("FilePathURL", emp.FilePathURL),
                        new XAttribute("ID", emp.TitleID),
                        new XAttribute("ContentName", emp.Name)
                        )); 
```

_lstContents 包含整个记录。我需要通过 LinQ 操作来构建 XmlDocument 我知道它可以实现并且我做到了。这是我所做的示例 XML：

```
<ContentDetails>
  <Contents ContentName="Sample Project Plan SOW" ID="3"
        FilePathURL="http://192.168.30.59/contentraven/Uploads/Custom_View_LLC/EncryptedFile/zsg34g45tfblrkvzjh0cdlvs_17_7_2012_19_24_3.doc"
        PublishedDate="2012-07-10T14:37:02.073" key="310-072012-A5CDE"/>
</ContentDetails> 
```

但现在我需要的是

```
<ContentDetails>
  <Contents ContentName="Sample Project Plan SOW" ID="3"
        FilePathURL="http://192.168.30.59/contentraven/Uploads/Custom_View_LLC/EncryptedFile/zsg34g45tfblrkvzjh0cdlvs_17_7_2012_19_24_3.doc"
        PublishedDate="2012-07-10T14:37:02.073" key="310-072012-A5CDE"/>
   <categories>
      <category id="1" categoryname="Category-1" contentid="3"/>
      <category id="2" categoryname="Category-2" contentid="3"/>
      <category id="3" categoryname="Category-3" contentid="3"/>
  </categories>
</ContentDetails> 
```

我正在尝试这样的事情

```
var xEle = new XElement("ContentDetails",
            from emp in _lstContents
            select new XElement("Contents",
                        new XAttribute("key", emp.Key),
                        new XAttribute("PublishedDate", emp.PublishedDate),
                        new XAttribute("FilePathURL", emp.FilePathURL),
                        new XAttribute("ID", emp.TitleID),
                        new XAttribute("ContentName", emp.Name),
                            new XElement("Categories",
                                new XElement("Category",
                                    new XAttribute("ID", emp.Category.ForEach(_P => _P.CategoryID ),
                                    new XAttribute("CategoryName", emp.Category.ForEach(_P => _P.CategoryName))
                                )

                        )); 
```

我怎么能做到这一点？

emp.Category 是_lstContents List 中的一个Property List；

我需要创建与 emp.Category 中一样多的 CategoryName 属性。

请参阅随附的屏幕截图。谢谢

![在此处输入图像描述](../Images/0db30a66fbd6b54fdbc7b45f7cd59e36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:41:49.117

您快到了，您只需要将类别集合中的项目投影到`category`元素。这与您将项目投影`_lstContents`到`Contents`元素的方式没有太大区别。

```
var contentDetails =
    new XElement("ContentDetails",
        from contents in _lstContents
        select new XElement("Contents",
            new XAttribute("ContentName", contents.Name),
            new XAttribute("ID", contents.TitleID),
            new XAttribute("FilePathURL", contents.FilePathURL),
            new XAttribute("PublishedDate", contents.PublishedDate),
            new XAttribute("key", contents.Key),
            new XElement("categories",
                from category in contents.Category
                select new XElement("category",
                    new XAttribute("id", category.CategoryID),
                    new XAttribute("categoryname", category.CategoryName),
                    new XAttribute("contentid", category.ContentID)
                )
            )
        )
    ); 
```

# linux - 我忘记了我的 ssh 密码

> ID：11653228
> 
> 赞同：1
> 
> 时间：2012-07-25T15:27:29.503
> 
> 标签：linux, ssh

我正在迁移到 Apple Mac，并将 id_rsa 和 id_rsa.pub 文件复制到我的新机器上。当我尝试通过 ssh 连接到远程机器时，它要求我输入 ssh 密钥的密码，但我忘记了它是什么。

我使用 python 脚本尝试从我要迁移的旧机器上的 gnome 密钥环中获取它，但它似乎并不存在。

任何建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T15:32:10.753

如果您忘记了旧密码，您将不得不销毁现有的密钥对并使用 ssh-keygen 生成一个新的密钥对。

# java - 紧密封装的类

> ID：11653229
> 
> 赞同：5
> 
> 时间：2012-07-25T15:27:29.270
> 
> 标签：java

这是我的作业问题：以下哪些类不是紧密封装的？

```
class A
{
    private int x;
}
class B
{
    private int x;
    public void setX(int x)
    {
        this.x=x;
    }
    public int getX()
    {
        return x;
    }
}
class C
{
    private int x;
    private void setX(int x)
    {
        this.x=x;
    }
    private int getX()
    {
        return x;
    }
} 
```

我花了一些时间在 coderanch 上搜索，但无法获得所需的东西。谁能帮帮我吗？

我认为 C 类没有紧密封装；因为方法是私有的。关于 A 类，我觉得它不仅仅是封装的。因为封装的基本定义说“你必须隐藏你的成员并向类用户提供你想要的行为方式”。现在类 A 没有访问器修改器方法。所以 A 不应该被认为是封装的。我不确定，但是。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:40:39.830

您的课程中如何定义“紧密封装”？据我从谷歌搜索中得知，没有学术界或行业范围内的定义。

我可以争辩说每个类都封装得很好，或者每个类都封装得不好。为什么客户端暴露了私有变量 X 的名称？似乎很不幸。为什么 A 类不公开任何功能？C 只在应该使用它的域中公开一个 getter 是否“正确”？

这个问题只是歪曲了封装的概念。您不能通过“封装验证程序”例程运行代码。这是一个人类设计的决定，你说应该暴露的和不应该暴露的。从根本上说，这通常要求数据是私有的，但是一个方法应该是公共的还是私有的完全取决于它的实际含义和正在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:33:47.600

你完全正确。A 类和 C 类都没有紧密封装，因为紧密封装意味着私有字段与公共 getter 和 setter 配对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:36:33.283

您对封装的定义是正确的。但我认为你有点偏离了方向。

封装意味着您不允许其他人直接访问您的内部。您公开用户功能并管理自己的内部结构。

因此，如果我是银行账户 - 我有一个名为 total 的私有字段。我不让用户直接设置我的总数。相反，我公开了withdraw(double amt) 和deposit(double amt)，并根据需要管理total。

不要挂断 A 只有一个私人成员。考虑这些类片段 - 例如未显示用户功能并尝试再次回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-02T10:09:13.990

当且仅当该类的所有数据成员（变量）都声明为私有时，才称该类是紧密封装的。

如果类具有声明为私有的所有变量，并且如果它被其他也具有所有私有数据成员的类继承，那么后一个也被称为紧密封装的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-02T07:13:50.443

这里B类将被紧密封装，因为根据定义“如果使用私有变量和公共属性声明一个类，则称为紧密封装”

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T16:23:47.150

我认为在封装的定义中提到了公共访问器的必要性，因为它很有意义，没有其他原因。所以我会说紧密封装的类是一个隐藏其成员的类，防止其他类的对象直接访问它们。就这些。我会选择`None`，因为所有这些类都是封装的，即使其中两个没有多大意义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-28T11:40:58.153

“紧密封装”类只遵循一个规则，所有成员（变量）在一个类中都是“私有的”，你可以说是“紧密封装”类。因为“紧密封装”的概念不依赖于 [getter,setter 及其访问修饰符]。

**换句话说**

## 类的所有**成员**都应该是**私有**的，就是这样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-11T19:03:44.957

您上面的所有类都被紧密封装。

当且仅当所有数据成员都声明为私有时，才称一个类是紧密封装的。在这里，我们不应该担心是否存在公共访问器或修改器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-27T10:52:36.257

您描述的所有三个类都是紧密封装的。

如果一个类只有私有变量而没有其他公共变量，则称一个类是紧密封装的类。

它不依赖于 getter 或 setter 方法。

我们需要有 getter 和 Setter，因为我们需要创建变量，以便我们可以在其他类或函数中使用它们。

因此，无论公共 getter 和 setter 方法如何，这三个类都被紧密封装。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-10-08T04:10:10.863

这里的所有类都被紧密封装，因为每个变量都声明为私有，我们不需要检查相应的getter和setter方法是否声明为public。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-02-08T20:24:52.260

紧密封装的类意味着所有成员变量都声明为私有，因此所有类都被紧密封装注意如果父类包含一个定义为非私有的成员变量，您的子类将不会被紧密封装

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-03-19T00:22:40.950

当且仅当每个变量都声明为私有时，才称一个类是“紧密封装的”。（无论它们是否包含*getter*或*setter*方法。

在您的示例中，**所有**三个类都被紧密封装，因为每个类都将每个变量都设为私有。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2018-03-20T05:43:50.900

所有这些类都是紧密封装的类。在紧密封装的类中，所有实例变量都应该是私有的。它不关心方法是否有任何访问修饰符（默认、私有、受保护和公共）。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2020-03-08T07:06:56.373

默认情况下，每个 Java 类都只封装类，当我们说它是紧密封装的，当且仅当该类中存在的每个变量都是私有的，这种类型的类称为紧密封装类。

对于你的问题 Ans: 那里没有课。

注意：所有类都紧密封装。

# android - Android build.xml 渲染脚本不支持包含路径

> ID：11653234
> 
> 赞同：1
> 
> 时间：2012-07-25T15:27:39.113
> 
> 标签：android, ant, hudson

我正在使用 ant 运行我的 android 项目，以便使用 Hudson 持续运行它。我在我的 Mac 上创建了 build.xml，而不是导入生成的 android build.xml，我复制/粘贴了它，因为我必须自定义一些东西。

但是，当我在位于服务器上的 hudson 上运行它时，它在我的本地机器上运行良好。我遇到了 Renderscript 属性错误。

```
renderscript doesn't support the "includePath" attribute 
```

因此，我决定在转换此代码的 xml 中删除该行：

```
 <renderscript executable="${renderscript}"
                includePath="${android.renderscript.include.path}"
                genFolder="${gen.absolute.dir}"
                resFolder="${out.res.absolute.dir}/raw"
                targetApi="${project.minSdkVersion}"
                optLevel="${renderscript.opt.level}"
                buildType="${build.is.packaging.debug}"
                previousBuildType="${build.last.is.packaging.debug}">
            <source path="${source.absolute.dir}"/>
        </renderscript> 
```

对此：

```
 <renderscript executable="${renderscript}"
                genFolder="${gen.absolute.dir}"
                resFolder="${out.res.absolute.dir}/raw"
                targetApi="${project.minSdkVersion}"
                optLevel="${renderscript.opt.level}"
                buildType="${build.is.packaging.debug}"
                previousBuildType="${build.last.is.packaging.debug}">
            <source path="${source.absolute.dir}"/>
        </renderscript> 
```

然后可笑地得到这个错误：

```
RenderScriptTask's 'includePath' is required. 
```

我在两台机器上运行相同的 ant，在服务器上下载了特定于 linux 的 SDK，基于工具、平台工具和 android-7（我支持的操作系统）进行了更新。我对问题可能是什么想法已经用完了，任何帮助或指示都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:25:19.087

发生此错误是因为您将 android sdk 工具更新为 20.0.1。

renderscript 需要属性 includePathRefId 并且它的路径已更改。所以你的代码应该是：

```
<renderscript executable="${renderscript}"
            includePathRefId="android.renderscript.include.path"
            genFolder="${gen.absolute.dir}"
            resFolder="${out.res.absolute.dir}/raw"
            targetApi="${project.minSdkVersion}"
            optLevel="${renderscript.opt.level}"
            buildType="${build.is.packaging.debug}"
            previousBuildType="${build.last.is.packaging.debug}">
        <source path="${source.absolute.dir}"/>
    </renderscript> 
```

其中 includePathRefId 应该这样定义：

```
<path id="android.renderscript.include.path">
    <pathelement location="${android.platform.tools.dir}/renderscript/include" />
    <pathelement location="${android.platform.tools.dir}/renderscript/clang-include" />
</path> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:33:27.660

这最终发生了，因为我有一些文件要通过类路径被忽略。这是一个简单但被忽视的错误。

# firefox - 为什么 gl.readPixels 从 Firefox 中给出全 0？

> ID：11653235
> 
> 赞同：5
> 
> 时间：2012-07-25T15:27:42.140
> 
> 标签：firefox, opengl-es, webgl

我正在使用 WebGL 运行一些图像处理（类似于 Brad Larson 的[GPUImage](https://github.com/BradLarson/GPUImage)或教程[WebGL Fundamentals](http://www.html5rocks.com/en/tutorials/webgl/webgl_fundamentals/)），然后是消耗像素的 CPU 步骤。不幸的是，当我调用时`gl.readPixels`，Firefox 中的缓冲区全是黑色的。为什么？

这是一个独立的示例： http: [//jsfiddle.net/yonran/8C3n5/](http://jsfiddle.net/yonran/8C3n5/)在 Chrome 中，结果是“在帧缓冲区内，有 924 个黑色像素和 100 个蓝色像素”，而在 Firefox 中，结果是“在帧缓冲区内”帧缓冲区，有 1024 个黑色像素和 0 个蓝色像素。”</p>

这就是我设置帧缓冲区的方式：

```
function createTextureAndFramebuffer(gl, width, height) {
  var outputTexture = createAndSetupTexture(gl);
  // Make the texture the same size as the image.
  gl.bindTexture(gl.TEXTURE_2D, outputTexture);
  gl.texImage2D(
      gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0,
      gl.RGBA, gl.UNSIGNED_BYTE, null);
  gl.bindTexture(gl.TEXTURE_2D, null);

  // create a framebuffer
  var fbo = gl.createFramebuffer();
  gl.bindFramebuffer(gl.FRAMEBUFFER, fbo);
  // attach a texture to it.
  gl.framebufferTexture2D(
      gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, outputTexture, 0);
  return {texture: outputTexture, framebuffer: fbo};
}
function createAndSetupTexture(gl) {
  var texture = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, texture);

  // Set up texture so we can render any size image and so we are
  // working with pixels.
    // This is necessary for non-power-of-two textures
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

  return texture;
} 
```

这就是我绘制到帧缓冲区的方式：

```
ImageFilter.prototype = {
  ...,
  draw: function() {
    var gl = this.gl;
    // Use the texture
    gl.bindTexture(gl.TEXTURE_2D, this.texture);

    // make this the framebuffer we are rendering to.
    gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);

    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

    // Tell webgl the viewport setting needed for framebuffer.
    gl.viewport(0, 0, this.outputWidth, this.outputHeight);

    gl.useProgram(this.program);
    this.applyUniforms();

    // Draw the rectangle.
    gl.drawArrays(gl.TRIANGLES, 0, 6);
    gl.flush();
  },
  vertexShaderString:
      "attribute vec4 position;\n" +
      "attribute vec4 inputTextureCoordinate;\n" +
      "\n" +
      "varying vec2 textureCoordinate;\n" +
      "\n" +
      "void main()\n" +
      "{\n" +
      "     gl_Position = position;\n" +
      "     textureCoordinate = inputTextureCoordinate.xy;\n" +
      "}\n",
  fragmentShaderString:
      "varying highp vec2 textureCoordinate;\n" +
      "\n" +
      "uniform sampler2D inputImageTexture;\n" +
      "\n" +
      "void main()\n" +
      "{\n" +
      "  gl_FragColor = texture2D(inputImageTexture, textureCoordinate);\n" +
      "}\n"
}; 
```

然后我像这样从帧缓冲区中读取：

```
gl.bindFramebuffer(gl.FRAMEBUFFER, imageFilter.framebuffer);
var width = imageFilter.outputWidth, height = imageFilter.outputHeight;
var array = new Uint8ClampedArray(width * height * 4);
gl.finish();
gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, array);
var blackPixels = 0, bluePixels = 0;
var firstBlueX, firstBlueY;
for (var y = 0; y < height; y++) {
  for (var x = 0; x < width; x++) {
    var idx = 4*(x + y*width);
    var r = array[idx], g = array[idx+1], b = array[idx+2], a = array[idx+3];
    if (r === 0 && g === 0 && b === 0)
      blackPixels++;
    else if (b === 255) {
      bluePixels++;
      if (firstBlueX == null) {
        firstBlueX = x;
        firstBlueY = y;
      }
    }
  }
}
var el = document.createElement("div");
document.body.appendChild(el);
el.textContent = "The first canvas is drawn to a framebuffer and then drawn again on the second canvas. " +
  "Within the framebuffer, there are " + blackPixels + " black pixels and " +
  bluePixels + " blue pixels The first blue pixel is at (" + firstBlueX+ "," + firstBlueY + ") " +
  "(origin is at bottom left)."; 
```

我认为这可能是一个同步问题，但在阅读之前添加`gl.finish()`或`setTimeout`没有帮助。搜索时，我发现多重采样会导致帧缓冲区为0，但`antialias: false`在`canvas.getContext`调用中设置并没有帮助。

**编辑**：我之前只是尝试设置一个像素`readPixels`，而 Firefox 并没有取消设置像素。也许`readPixels`尚未实现，并且从 14.0.1 开始是无操作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:18:50.650

违规行在这里：

```
var array = new Uint8ClampedArray(width * height * 4);
gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, array); 
```

当您指定类型时，`GL_UNSIGNED_BYTE`您必须传入正确类型的数组，否则 FF 会失败。这里正确的类型是`Uint8Array`，不是`Uint8ClampedArray`。

如果您检查 FF 控制台日志，您将看到这是错误消息，通过交换这些数组类型来解决：

```
Error: WebGL: readPixels: Mismatched type/pixels types 
```

# django - 如何让用户选择需要更新的表 Django

> ID：11653236
> 
> 赞同：0
> 
> 时间：2012-07-25T15:27:41.593
> 
> 标签：django, django-models, django-forms, django-templates

我的网站上有一个表格，三个表格（家庭作业，班级，随机）都是一样的所以基本上我想在表格顶部制作一个ChoiceField，让用户选择上传文件的位置。

我在想，因为这些表有共同的抽象类，也许我可以从那里以某种方式选择它。但无法弄清楚如何。

或者可能有更好的解决方案。

以防万一这是我的代码：

```
#models.py
class FileDescription(models.Model):

    class Meta:
        abstract = True;
        ordering = ['file_creation_time']

    subject = models.ForeignKey('Subjects', null=True, blank=True, primary_key=True)
    subject_name = models.CharField(max_length=100)
    file_uploaded_by = models.CharField(max_length=100)
    file_name = models.CharField(max_length=100)
    file_description = models.TextField()
    file_creation_time = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return u'%s' % (self.file_name)

#template
<ul id="tabs">
        <li><a href="#homework">Homework</a></li>
        <li><a href="#class-papers">Class Papers</a></li>
        <li><a href="#random-papers">Random Papers</a></li>
    </ul>

    <div id="homework" class="tab-section">
        <h2>Homework</h2>
        <p>This section contains Homework</p>

            {% if homework_files %}
                <ul>
                    {% for file in homework_files %}
                        <li>{{ file.file_name }}
                    {% endfor %}
                </ul>
            {% endif %}
    </div>

#forms.py
class Homework_Content_Form(forms.ModelForm):
    class Meta:
        model=Homework_Content
        exclude=('subject', 
                 'subject_name',
                 'file_creation_time',
                 'file_uploaded_by',
                 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:54:52.987

**方法一：分开表格**

```
class GenericContentForm(forms.ModelForm):
     class Meta:
         exclude = ('subject', 'subject_name', 'file_creation_time', 'file_uploaded_by')

     TYPE_CHOICES = (
         ('homework', 'Homework'),
         ('class', 'Class Paper'),
         ('random', 'Random Paper'),
     )

     type = forms.ChoiceField(choices=TYPE_CHOICES)

class HomeworkForm(GenericContentForm):
     class Meta(GenericContentForm.Meta):
         model = Homework

class ClassPaperForm(GenericContentForm):
     class Meta(GenericContentForm.Meta):
         model = ClassPaper

class RandomPaperForm(GenericContentForm):
     class Meta(GenericContentForm.Meta):
         model = RandomPaper 
```

然后在您的视图中，您只需选择一个开始，当您拥有 POST 数据时，您可以实例化另一个：

```
def my_view(request):
    if request.method == 'POST':
        type = request.POST.get('type')
        if type == 'homework':
            form = HomeworkForm(request.POST)
        elif type == 'class':
            form = ClassPaperForm(request.POST)
        elif type == 'random':
            form = RandomPaperForm(request.POST)

    else:
        form = HomeworkForm()

    ... 
```

**方法 2：使用代理模型**

由于这三个模型都共享相同的数据，因此拥有三个单独的表是多余的。与其`FileDescription`抽象，不如把它变成一个普通的标准模型，并为其添加一个类型字段，可选择“作业”、“课堂论文”和“随机论文”。然后为每个创建代理模型：

```
class HomeworkManager(models.Manager):
    def get_query_set(self, *args, **kwargs):
        qs = super(HomeworkManager, self).get_query_set(*args, **kwargs)
        return qs.filter(type='homework')

class Homework(FileDescription):
    class Meta:
        proxy = True

    objects = HomeworkManager()

    def save(self, *args, **kwargs):
        self.type = 'homework'
        super(Homework, self).save(*args, **kwargs) 
```

然后，您只需要一个表单`FileDescription`来保存用户对“类型”的选择。然后，您可以使用标准访问任何设置为“家庭作业”类型的内容`Homework.objects.all()`。

# sockets - socket.io：加载资源失败

> ID：11653237
> 
> 赞同：20
> 
> 时间：2012-07-25T15:27:42.870
> 
> 标签：sockets, node.js, socket.io

我正在尝试开始使用 socket.io 和 node.js。

在 socket.io 网站上的第一个示例之后，我在浏览器的控制台中收到以下错误：

```
Failed to load resource: the server responded with a status of 404 (Not Found) http://localhost:3001/socket.io/socket.io.js
Uncaught ReferenceError: io is not defined 
```

这是我的 server.js

```
var app = require('express').createServer()
  , io = require('socket.io').listen(app);

app.listen(3001);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.sockets.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

这是我的 index.html

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script>
  </body>
</html> 
```

我已经安装了socket.io ..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-26T07:54:27.740

## **问题**

*   首先，您需要在`app.listen(3001);`客户端查看服务器绑定的服务器端口 ( )，以便完全访问服务器。

*   至于socket.io，`http://localhost:3001`在链接标签中的其余源代码之前添加解决了这个问题。这显然是由于网络将端口绑定到 localhost 的方式，但是我将尝试找到有关原因的更多信息；

## **要改变什么：**

* * *

**服务器的端口绑定：**

`var socket = io.connect('http://localhost');`

应该改为

`var socket = io.connect('http://localhost:3001');`

* * *

* * *

**使 socket.io 行为：**

`<script src="/socket.io/socket.io.js"></script>`

应该改为

`<script src="http://localhost:3001/socket.io/socket.io.js"></script>`

* * *

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T19:28:27.870

如果您使用的是`express`3.x 版，则存在[Socket.IO 兼容性问题，需要进行一些微调才能迁移](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)：

> Socket.IO 的`.listen()`方法将`http.Server`实例作为参数。
> **从 3.x 开始**， 的返回值`express()`不是`http.Server`实例。要让 Socket.IO 与 Express 3.x 一起使用，请确保您手动创建`http.Server`实例并将其传递给 Socket.IO 的`.listen()`方法。

这是一个简单的例子：

```
var app = express()
  , http = require('http')
  , server = http.createServer(app)
  , io = require('socket.io').listen(server);

server.listen(3000); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-23T23:52:50.010

首先，Socket.io“[如何使用](http://socket.io/docs/#how-to-use)”文档含糊不清（可能具有误导性）；尤其是在为 Socket.io 客户端编写代码时。

其次，您在 StackOverflow 上得到的答案太具体了。您不必手动硬编码 Socket.io 客户端的协议、主机名和端口号；这不是一个可扩展的解决方案。Javascript 可以使用位置对象为您处理这个 - `window.location.origin`.

## Socket.io 入门

### 安装

Socket.io 需要安装服务器和客户端。

安装服务器
`npm install socket.io`

要使用客户端，请将此脚本添加到您的文档 (index.html)
`<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>`

### 使用 Express 3/4 实现

创建以下文件：

服务器 (app.js)

```
var app = require('express')();
var server = require('http').Server(app);
var io = require('socket.io')(server);

server.listen(80);

app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
});

io.on('connection', function (socket) {
  socket.emit('news', { hello: 'world' });
  socket.on('my other event', function (data) {
    console.log(data);
  });
}); 
```

客户端 (index.html)

```
<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
  // origin = http(s)://(hostname):(port)
  // The Socket.io client needs an origin
  // with an http(s) protocol for the initial handshake.
  // Web sockets don't run over the http(s) protocol,
  // so you don't need to provide URL pathnames.
  var origin = window.location.origin;
  var socket = io.connect(origin);
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T13:00:25.697

尝试这个

```
var app = express()
,http = require('http');

var server = http.createServer(app);
server.listen(3001);
io = require('socket.io').listen(server);
io.set('log level', 1); 
```

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T12:46:29.183

如果您尝试在另一台计算机上运行它并且遇到此错误，您可能会发现这很有用。

```
var host = window.location.hostname; 
var socket = io.connect('http://' + host); 
```

如果您使用的是 https，那么显然您还需要更改协议。在我的情况下，我需要创建一个可以在多台本地计算机上运行的服务器，因此在这里放置一个固定地址是行不通的，因为套接字需要连接到不同的地址，具体取决于您从哪个服务器加载页面。在此处添加此内容，因为它也可能对其他人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-04T17:18:44.817

以下更改终于对我有用

`const app = express(); const http = require('http'); const server = http.createServer(app); const io = require('socket.io')(server)`

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-05-09T00:50:18.777

我知道这已经很晚了，但是我为那些以前可能已经设置过 node.js 的人找到了一个解决方案。我的机器需要更换硬件，当它回来时，我注意到很多设置都恢复了出厂默认设置。我也收到了上面讨论的错误。

跑步

须藤 apachectl 开始

从终端解决了我的问题。

# objective-c - 对象可以管理自己的销毁（使用 ARC）吗？

> ID：11653239
> 
> 赞同：3
> 
> 时间：2012-07-25T15:27:48.727
> 
> 标签：objective-c

我有一个需要执行多个操作的控制父类，这些操作的寿命通常很短。我正在使用 Factory 类来创建这些对象，并且对如何最好地管理它们的消亡以及是否可以安全地共存多个对象有一些疑问。这里有一些示例伪代码：

```
@interface parent
@property (strong, nonatomic) abstractChild*  action;
- (abstractChild*) makeConcreteChildOfType:(Type)type;
- (void) performActionA;
- (void) performActionB;
- (void) performActionC;

...
- (void) performActionA;
{
    self.action = [self makeConcreteChildOfType:A];
    [self.action doYourThing];
}

- (void) performActionB;
{
    self.action = [self makeConcreteChildOfType:B];
    [self.action doYourThing];
} 
```

我有很多不同类型的动作，每个子动作类都知道它必须做什么以及何时完成。我可以为每种不同类型的具体操作创建单独的属性，而不是拥有一个抽象属性，并让每个子对象在完成时通过委托通知父对象，但是这开始变得有点混乱，尤其是当多个操作的事实同一类型可能会立即处于活动状态（这将需要指向每种类型对象的指针数组）。因此，我想知道子对象是否/如何管理自己，特别是它们自己的破坏。

如果每个对象看起来像这样：

```
@implementation ChildObjectA

-(void) doYourThing
{
   [self retain];
   do something
}

- (void) OnCompletion
{
    [self release];
} 
```

那么这样做安全吗？- 父类是否可以创建多个相同类型的对象，并且只要每个对象都需要并且在完成时有效地删除自己并且它们可以并行存在并在没有问题的情况下删除自己，它们都可以存活吗？

大概不需要父类的 action 属性，但是如果保留它，那么我想确认内存管理没有出现问题？我认为不是每次将 self.action 分配给 ARC 时都会释放关联的子对象，但在子对象释放自身之前它不会被删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:10:43.223

这是一篇文章，可能是您尝试做的事情的解决方案......基本上是说使用弱限定符，如果它的引用为零，它会自动将对象设置为零...... [http://thinkvitamin.com/ code/ios/ios-5-automatic-reference-counting-arc/](http://thinkvitamin.com/code/ios/ios-5-automatic-reference-counting-arc/)（本文作者致谢）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:22:32.727

一个对象当然*有可能*拥有自己，但真正需要它的情况很少而且相差甚远。我不认为这是其中之一。

我认为您所说的“太混乱”的解决方案实际上是最好的解决方案。在我看来，它也非常*简单*和干净。工厂保存了一个动作对象的集合。* 当一个动作对象完成时，它会通知工厂，工厂将其清理干净。这类似于一个活动`NSOperationQueue`——队列获得操作的所有权。

```
@implementation Factory
{
    NSMutableArray * listOfAllActions;
}

- (void) performActionA;
{
    Action * newAction = [self makeConcreteChildOfType:A];
    [listOfAllActions addObject:newAction];
    [newAction setOwner:self];
    [newAction doYourThing];
}

// And similarly for other "performAction..." methods 
```

然后，每个动作都会发送一个简单的“全部完成！” 完成后向其所有者发送消息：

```
@interface AbstractChild

@property (weak) Factory * owner;

//...

@implementation AbstractChild

@synthesize owner;

- (void)cleanupAfterCompletion
{
    // Subclasses can override this to do more cleanup

    // Message the action's owner, passing self so it knows which action
    [[self owner] actionHasCompleted:self];
} 
```

然后，回到工厂，

```
- (void)actionHasCompleted: (AbstractAction *)action
{
    // Other cleanup if necessary

    // Delete action
    [listOfAllActions removeObjectIdenticalTo:action];
} 
```

如果由于某种原因您不喜欢直接指向工厂的操作，您可以使用[通知](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html)，但这些通常是两个对象之间的关系比这弱得多的时候。

* * *

*这就是现实情况——您正在创建多个对象。事实上，坦率地说，你对可能多个对象拥有一个属性的想法对*我来说*似乎很混乱。

# jbpm - WebMehods 是支持 BPMN 2.0 的流程引擎吗？

> ID：11653245
> 
> 赞同：1
> 
> 时间：2012-07-25T15:28:08.600
> 
> 标签：jbpm, webmethods, business-process-management, bpmn, activiti

正如标题所说的那样，如果答案是肯定的，那么我想要一个很好的教程/链接，用于将 WebMethods 用作 BPMN 2.0 流程引擎。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T11:04:36.727

是的，8.2 版本：[http ://documentation.softwareag.com/webmethods/wmsuites/wmsuite8-2_ga/readme/ProcessEngine_8-2-SP1_readme.pdf](http://documentation.softwareag.com/webmethods/wmsuites/wmsuite8-2_ga/readme/ProcessEngine_8-2-SP1_readme.pdf)

> Process Engine 现在支持 BPMN 2.0 语义，对应于 webMethods Process Development 以符号表示的 BPMN 2.0 构造。

如果你想要一个好的教程，你可以欣赏这个：[http ://techcommunity.softwareag.com/ecosystem/communities/public/Developer/webmethods/products/bpm_suite/tutorials/Subprocess/subprocesses_index.html](http://techcommunity.softwareag.com/ecosystem/communities/public/Developer/webmethods/products/bpm_suite/tutorials/Subprocess/subprocesses_index.html)

# java - 我可以检测 SWT 中文本字段的变化吗？

> ID：11653247
> 
> 赞同：15
> 
> 时间：2012-07-25T15:28:21.430
> 
> 标签：java, eclipse, swt

我有几个 SWT 小部件。如果存在的任何字段中有任何修改，我正在尝试创建一个操作。

示例：如果我从 更改名称，`Text`我应该能够识别它。我尝试在网上搜索解决方案，但找不到合适的解决方案。

有什么建议么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T15:31:53.133

使用[addModifyListener](http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FText.html)

```
ModifyListener listener = new ModifyListener() {
    /** {@inheritDoc} */
    public void modifyText(ModifyEvent e) {
        // Handle event
    }
});

text1.addModifyListener(listener);
text2.addModifyListener(listener); 
```

# java - 如何强制primefaces数据表中的文本填充整列

> ID：11653249
> 
> 赞同：0
> 
> 时间：2012-07-25T15:28:26.947
> 
> 标签：java, jsf, jsf-2, primefaces

我有几种情况，文本实际上适合固定大小的列，但在大约 70% 的列宽处被截断。这看起来真的很尴尬。不幸的是，我不知道如何影响这一点。

也许覆盖`.ui-dt-c`类中的设置（由动态生成的列使用）会有所帮助，但我不知道如何。

我已经尝试同时使用`style="width:50"`和`width="50"`来设置列宽 - 对裁剪没有影响。

谢谢你。

我正在使用 Primefaces 3.3.1 和 Mojarra 2.1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:36:33.590

`style="width:50"`是不正确的CSS。您需要像这样指定像素或百分比：

```
style="width:50px" 
```

或者

```
style="width:50%" 
```

# perl - 哈希如何用于查找唯一项目

> ID：11653254
> 
> 赞同：2
> 
> 时间：2012-07-25T15:28:54.670
> 
> 标签：perl

我看过一个简单的程序。好吧，除了一件事，我理解的洞程序就是哈希在这里的工作方式：

程序 -> 从列表中提取唯一元素

```
@list = (20,30,40,60,40,20,30,2);
@uniq = ();
%seen = ();
foreach $item (@list) {
    unless ($seen{$item}) 
    {
        # if we get here, we have not seen it before
        push(@uniq, $item);
        $seen{$item}++;

    }
    print %seen;
    print"\n";
} 
```

我的问题是哈希如何从其现有值与当前值进行比较，即它如何检查天气该值是否已经存在。如果我正在打印 %seen 我得到了一些值。这些值是如何来的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:58:45.890

如果它让您更清楚，请更改

```
if (!$seen{$item}) { $seen{$item}++; ... } 
```

到

```
if (!exists($seen{$item})) { $seen{$item} = 1; ... } 
```

第一次遇到特定项目时，它在哈希中不作为键存在，因此`if`输入了 。的主体`if`在哈希中创建一个与项目相等的键。

第二次（以及第三次和...）遇到特定项目时，它作为键存在于哈希中，因此`if`不输入。

* * *

顺便一提，

```
if (!$seen{$item}) { $seen{$item}++; ... } 
```

可以缩短为

```
if (!$seen{$item}++) { ... } 
```

和

```
my @uniq;
for my $item (@list) {
    push @uniq, $item if ...;
} 
```

可以缩短为

```
my @uniq = grep ..., @list; 
```

所以整个事情可以写成

```
my @list = (20,30,40,60,40,20,30,2);
my %seen;
my @uniq = grep !$seen{$_}++, @list; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:36:51.687

检查`unless ($seen{$item})`会探测哈希表中的 key `$item`。如果看到密钥，则测试将失败，因为`$seen{$item}`它将被定义且非零。

如果哈希表中没有条目：

```
push(@uniq, $item);   # store this item
$seen{$item}++;       # and increment the value for this key in the hash table 
```

未定义的值被认为是`0`，因此该语句`$seen{$item}++`将其值设为 1（您不妨将其写为`$seen{$item} = 1`.

如果在列表中再次遇到该项目，`unless ($seen{$item})`则不会成功，因此将被跳过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:36:41.767

`$seen{$item}`要么是未定义的，要么是一个数字。

`$seen{$item}++;`将使其成为一个数字。

# sql - SQL：合并日期范围

> ID：11653255
> 
> 赞同：9
> 
> 时间：2012-07-25T15:28:55.353
> 
> 标签：sql, date, intervals, range

我有一张表，它描述了业务工作日历的工作片：（日期格式为 24 小时格式）

```
PK  | STARTDATE          | ENDDATE
__________________________________________
1   | 2012/07/21 02:00   | 2012/07/21 04:00
2   | 2012/07/21 03:00   | 2012/07/21 10:00
3   | 2012/07/21 06:00   | 2012/07/21 17:00
4   | 2012/07/21 18:00   | 2012/07/21 19:00 
```

现在，我喜欢像这样合并日期范围（在给定的开始和结束日期内）：

```
PK  | STARTDATE          | ENDDATE
__________________________________________
1   | 2012/07/21 02:00   | 2012/07/21 17:00
2   | 2012/07/21 18:00   | 2012/07/21 19:00 
```

有没有办法用 SQL97 标准做到这一点？如果是这样，其他操作是什么（例如，如果我想进行反向合并，结果应该是

```
PK  | STARTDATE          | ENDDATE
__________________________________________
1   | 2012/07/21 00:00   | 2012/07/21 02:00
2   | 2012/07/21 19:00   | 2012/07/22 00:00 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:47:37.397

这是一个使用 SQL Server 语法的示例。首先，它确定“头”，或没有先前重叠行的行。要确定“头”的最后一个“子”，它会查找小于下一个“头”的最后一行。这是SQL：

```
; with  heads as
        (
        select  row_number() over (order by head.StartDate) as PK
        ,       *
        from    YourTable head
        where   not exists 
                (
                select  *
                from    YourTable prev
                where   prev.StartDate < head.StartDate
                        and head.StartDate < prev.EndDate
                )
        )
select  row_number() over (order by h.StartDate) as PK
,       h.StartDate
,       max(yt.EndDate) as EndDate
from    heads h
left join
        heads nh
on      nh.PK = h.PK + 1
left join
        YourTable yt
on      h.StartDate <= yt.StartDate
        and (yt.StartDate < nh.StartDate or nh.StartDate is null)
group by
        h.StartDate 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/e6278/4/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T07:46:15.980

这是我的解决方案。

```
IF OBJECT_ID('tempdb..#tblDates') IS NOT NULL
    DROP TABLE #tblDates

CREATE TABLE #tblDates (AutoId INT IDENTITY, StartDate DATE, EndDate DATE)

INSERT #tblDates (StartDate, EndDate) SELECT '2014-11-02', '2014-11-08'
INSERT #tblDates (StartDate, EndDate) SELECT '2014-11-07', '2014-11-10'
INSERT #tblDates (StartDate, EndDate) SELECT '2014-11-06', '2014-11-12'

INSERT #tblDates (StartDate, EndDate) SELECT '2014-11-02', '2014-11-15'

INSERT #tblDates (StartDate, EndDate) SELECT '2014-12-10', '2014-12-13'
INSERT #tblDates (StartDate, EndDate) SELECT '2014-12-12', '2014-12-15'
INSERT #tblDates (StartDate, EndDate) SELECT '2014-12-14', '2014-12-16'

-- Optional / Remove the duplicated records of same StartDate and EndDate
DELETE FROM #tblDates WHERE AutoId NOT IN (SELECT MAX(AutoId) FROM #tblDates GROUP BY StartDate, EndDate)

-- Optional / Get only the record with max EndDate grouped by StartDate, Remove Others
DELETE  d1
FROM    #tblDates d1
        JOIN (SELECT x.StartDate, MAX(x.EndDate) MAXEndDate FROM #tblDates x GROUP BY x.StartDate) d2 ON d2.StartDate = d1.StartDate AND d2.MAXEndDate != d1.EndDate

-- Optional / Get only the record with min StartDate grouped by EndDate, Remove Others
DELETE  d1
FROM    #tblDates d1
        JOIN (SELECT x.EndDate, MIN(x.StartDate) MINStartDate FROM #tblDates x GROUP BY x.EndDate) d2 ON d2.EndDate = d1.EndDate AND d2.MINStartDate != d1.StartDate

-- Optional / Remove the overlapping ranges of relevant StartDate and EndDate
DELETE  c
FROM    #tblDates p
        JOIN #tblDates c ON c.AutoId != p.AutoId AND c.StartDate BETWEEN p.StartDate AND p.EndDate AND c.EndDate BETWEEN p.StartDate AND p.EndDate

;WITH Ranges
AS
(
    SELECT  s.StartDate, s.EndDate
    FROM    #tblDates s
            LEFT JOIN #tblDates a ON a.AutoId != s.AutoId AND s.StartDate BETWEEN a.StartDate AND a.EndDate AND s.StartDate != a.StartDate
    WHERE   a.AutoId IS NULL
    UNION ALL
    SELECT  r.StartDate, d.EndDate
    FROM    Ranges r
            JOIN #tblDates d ON r.EndDate != d.EndDate AND r.EndDate BETWEEN d.StartDate AND d.EndDate
)

SELECT StartDate, MAX(EndDate) EndDate FROM Ranges GROUP BY StartDate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-07T14:36:19.340

基于 ErikE 的回应：

```
IF(object_id('dbo.Periods') is not null)
    drop table Periods

go
create table Periods (
    StartDate date not null,
    EndDate date not null
)
go
insert into Periods(StartDate,EndDate)
select '1980-01-01','1980-01-10' union all
select '1980-01-03','1980-01-07' union all

select '2000-01-01','2000-01-10' union all
select '2000-01-05','2000-01-30' union all
select '2000-01-12','2000-01-20' union all

select '2021-01-01','2021-01-01'
go

; with LeadLag AS (
   SELECT     
     rownum = row_number() OVER( ORDER BY StartDate),
     PrevEndDate = Coalesce(Lag(EndDate) OVER (ORDER BY StartDate), Convert(datetime2, '0001-01-01')), 
     p.*
   FROM Periods p
), Dates AS (
   SELECT
        StartDate = CASE WHEN PrevEndDate < StartDate THEN StartDate ELSE NULL END,
        EndDate,           
        rownum
   FROM   LeadLag
), startGrouping AS (
   SELECT
      StartDate =  max(StartDate) OVER (ORDER BY rownum rows UNBOUNDED PRECEDING),
      EndDate,
      rownum
   FROM Dates
),
 groups AS (
   SELECT
      StartDate,
      EndDate,
      rownum,
      ingroupRownum = row_number() OVER(PARTITION BY StartDate ORDER BY EndDate desc)
   FROM startGrouping e1
)
SELECT StartDate, EndDate
from groups
WHERE  ingroupRownum = 1 
```

# android - 使用 jQuery 访问被拒绝错误 [在本地主机上运行良好]

> ID：11653256
> 
> 赞同：4
> 
> 时间：2012-07-25T15:28:55.887
> 
> 标签：android, jquery, wcf, cordova, cross-domain

从 jQuery 调用 WCF 方法时遇到错误。当我在 localhost 上实现它时，调用返回得很好，但是当服务托管在单独的服务器上时会抛出拒绝访问错误。

以下是重现错误的步骤：-

1.  在本地运行项目并检查服务是否正在运行 eg：http://localhost:3369/AppsterWcfService.svc/DoWork

2.  在本地创建一个测试客户端（test.html）页面并运行这个项目。当点击登录按钮时，它工作正常。

3.  现在将服务托管在远程服务器上，并将 url 替换为新的 url，即托管服务的 url。

4.  现在运行 test.html 页面，点击按钮。在这里我得到拒绝访问错误。

我尝试了各种访问服务器的方法，例如：-

1.  通过使用 MVC
2.  处理程序
3.  简单的 .aspx 页面
4.  在 jquery ajax 调用和 web.config 文件中添加不同的参数。
5.  在 iis 中赋予不同的权限。如网络服务、iuser、匿名、访客等。

我想这是 jQuery 的某种跨域相关问题。任何帮助将不胜感激。

谢谢，-苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:31:14.607

听起来您违反了Web 请求的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

如果在您的浏览器中，您的协议 (http/https)、服务器和/或端口与您的远程服务不同，您将违反同源策略，您的浏览器将阻止该调用。

您需要从与您的页面绑定的服务器端代码调用服务（充当代理），或者查看[JSONP](http://remysharp.com/2007/10/08/what-is-jsonp/)请求之类的内容，以让您的服务将数据作为 JSON 格式的方法调用返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-27T13:23:47.617

为了让您使用 jQuery 使用跨域 WCF REST 服务，请在下面找到一个示例：

我的服务如下所示：

```
 [ServiceContract]
    public interface IJSONPService
    {
        [OperationContract]
        [WebGet]
        string GetDate();

        [OperationContract]
        [WebInvoke]
        string PostData(string name);
    } 
```

现在我的上述服务的配置条目如下所示：

```
<services>
    <service name="Service.JSONPService">
        <endpoint address="" binding="webHttpBinding" behaviorConfiguration="json" bindingConfiguration="defaultRestJsonp" contract="Service.IJSONPService">
        </endpoint>
    </service>
</services>
<behaviors>
      <endpointBehaviors>
         <behavior name="json">
             <enableWebScript />
         </behavior>
   </behaviors>
</endpointBehaviors>
<webHttpBinding>
        <binding name="defaultRestJsonp" crossDomainScriptAccessEnabled="true">
          <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxDepth="64" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
</webHttpBinding> 
```

您需要注意`crossDomainScriptAccessEnabled`绑定元素“defaultRestJsonp”中的属性，该属性负责确定针对 JSONP 的请求并适当地将响应转换为来自作为查询字符串的 URL 的回调方法

现在从您的页面执行以下调用上述 WCF REST 服务的 JavaScript，如下所示：

```
function TestingWCFRestWithJsonp() {
                $.ajax({
                    url: "http://domain.com/Service/JSONPService.svc/GetDate",
                    dataType: "jsonp",
                    type: "GET",
                    timeout: 10000,
                    jsonpCallback: "MyCallback",
                    success: function (data, textStatus, jqXHR) {
                        alert(data);
                    },
                    error: function (jqXHR, textStatus, errorThrown) {alert('error');

                    },
                    complete: function (jqXHR, textStatus) {alert('complete');
                    }
                });
            }
            function MyCallback(data) {
                alert(data);
            } 
```

查看 $.ajax 方法调用中的 jsonpCallback 属性。

对 Web 服务调用的原始请求如下所示：

```
GET http://localhost/Service/JSONPService.svc/GetDate?callback=MyCallback&_=1343391683779 HTTP/1.1
Host: localhost
Connection: keep-alive 
```

WCF REST 服务的原始响应如下所示：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: application/x-javascript
Date: Fri, 27 Jul 2012 12:21:23 GMT
Content-Length: 27

MyCallback("27\/07\/2012"); 
```

注意：当您执行 JSONP 请求时，您的 $.ajax 方法错误/完成/成功不会被调用。

# android - 强制开启 android 蓝牙发现

> ID：11653261
> 
> 赞同：1
> 
> 时间：2012-07-25T15:29:02.877
> 
> 标签：android, bluetooth

有没有办法强制蓝牙适配器被发现？像 BluetoothAdapter.Enable() 方法？

我知道 BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE 但它向用户显示了一个对话框。

我想这样做是为了让用户更容易使用该应用程序 - 这样他们就可以将自动连接设置设置为 true ......然后它就不会再问这些问题了。但我不知道如何绕过对话框？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:31:24.140

如果没有用户交互，您将无法做到这一点。您可以自动连接到以前配对的蓝牙设备，但我认为出于安全原因，如果没有用户交互，您就无法使设备被发现。

# c# - 在存储库线程中锁定单个会话是否安全？(NHibernate)

> ID：11653262
> 
> 赞同：1
> 
> 时间：2012-07-25T15:29:04.967
> 
> 标签：c#, .net, multithreading, nhibernate, session

我读过很多帖子说多线程应用程序必须为每个线程使用单独的会话。也许我不明白锁定是如何工作的，但是如果我在所有存储库方法中锁定会话，那不会使单个静态会话线程安全吗？

像：

```
public void SaveOrUpdate(T instance)
{
    if (instance == null) return;
    lock (_session)
        using (ITransaction transaction = _session.BeginTransaction())
        {
            lock (instance)
            {
                _session.SaveOrUpdate(instance);
                transaction.Commit();
            }
        }
} 
```

编辑：

请考虑我正在编写的应用程序的上下文/类型：

不是多用户，也不是典型的用户交互，而是一个自动运行的机器人，它可以对财务数据和订单更新等远程事件做出反应，并据此执行任务和保存。间歇性地，这可以创建每秒最多 10 次保存的集群。通常，每次都需要保存同一个对象图。此外，在启动时，程序确实将完整的数据库加载到实体对象图中。所以它基本上只读取一次，然后在运行时执行 SaveOrUpdates。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:49:47.080

鉴于应用程序通常正在编辑相同的对象图，也许有一个线程专门用于将这些编辑应用于对象图然后将它们保存到数据库中，或者可能是一个线程池服务于一个公共队列编辑，其中每个线程都有它自己的（专用）会话，它不需要锁定。查找生产者/消费者队列（开始，看[这里](http://blogs.msdn.com/b/csharpfaq/archive/2010/08/12/blocking-collection-and-the-producer-consumer-problem.aspx)）。

像这样的东西：

```
[Producer Threads]
Edit Event -\                [Database Servicer Thread]
Edit Event ------> Queue -> Dequeue and Apply to Session -> Database
Edit Event -/ 
```

我想 a`BlockingCollection<Action<Session>>`将是这种实现的一个很好的起点。

这是一个粗略的例子（注意这显然是未经测试的）：

```
// Assuming you have a work queue defined as 
public static BlockingCollection<Action<Session>> myWorkQueue = new BlockingCollection<Action<Session>>();

// and your eventargs looks something like this
public class MyObjectUpdatedEventArgs : EventArgs {
    public MyObject MyObject { get; set; }
}

// And one of your event handlers
public MyObjectWasChangedEventHandler(object sender, MyObjectUpdatedEventArgs e) {
    myWorkQueue.Add(s=>SaveOrUpdate(e.MyObject));
}

// Then a thread in a constant loop processing these items could work:
public void ProcessWorkQueue() {
    var mySession = mySessionFactory.CreateSession();
    while (true) {
        var nextWork = myWorkQueue.Take();
        nextWork(mySession);
    }
}

// And to run the above:
var dbUpdateThread = new Thread(ProcessWorkQueue);
dbUpdateThread.IsBackground = true;
dbUpdateThread.Start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:35:37.867

至少有两个缺点：

1.  您正在显着降低性能。在繁忙的网络服务器上使用它就像在电影院外面有一群人，但让人们通过一个全人的入口进入。

2.  会话具有其内部身份映射（缓存）。每个应用程序一个会话意味着内存消耗随着用户访问数据库中的不同数据而增长。最终，您甚至可以最终将整个数据库放在内存中，这当然是行不通的。这需要不时调用一个方法来删除一级缓存。但是，现在还不是删除缓存的好时机。您不能在请求开始时加入，因为其他并发会话可能会受到此影响。

我相信人们会增加其他的缺点。

# java - Java Arrays、Collections、Sets 和 Maps 是否适合 xx 对象的类别？

> ID：11653264
> 
> 赞同：1
> 
> 时间：2012-07-25T15:29:06.260
> 
> 标签：java

将以下内容分组是否公平：

```
Arrays, Collections, Sets, Maps 
```

到一个称为集合的组中，或者是否有另一个词或两个词（对象除外）最能描述数组、集合、集合和映射。

抱歉，如果这不是正确的类别或不适合的问题。我正在学习这些主题，需要找到一个最能描述所有这些主题的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:30:58.040

收藏听起来不错。数据结构听起来也同样不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:34:23.077

正如 Java 参考文档告诉你的那样，[数组](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)、[集合](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Set.html)和[映射](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)都是[Java 集合框架](http://docs.oracle.com/javase/6/docs/technotes/guides/collections/index.html)的一部分。因此，这不仅是这三种集合的一般变体，而且它们是由 Java 正式定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:34:34.153

查看收集的[java文档](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)。你会看到 map 不是扩展接口集合，所以数据结构更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:42:26.160

数组和集合是具有所有静态方法的类，以帮助操作基元数组、类以及实现 Map、List、Set 的类。

例如：集合 sort()（使用比较器对不同的类进行排序）、addAll、freq 或 Arrays asList、sort、binarysearch

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:31:50.253

我相信`Set`extends `Collection`，所以它本身并不是一个新类别。

如果您查看类层次结构，您只会看到两个类别：`Collection`和`Map`. 后者具有与值分开的键；前者没有。

# .net - 多按钮启用

> ID：11653265
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:29:07.130
> 
> 标签：.net, vb.net

我有 9 个禁用按钮。是否有任何方法可以立即启用它们而不是执行以下操作：

```
button1.Enabled=True
button2.Enabled=True
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:32:12.757

也许这会起作用：

```
foreach(Button b in Controls){
   b.Enabled = true;
} 
```

在这里，您选择所有按钮，由*b*表示，然后启用所有按钮

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:31:00.287

```
button1.enabled = button2.enabled = ... = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:31:18.667

假设你已经很好地分组了它们......

```
foreach(var button in parent.Controls.OfType<Button>())
   button.Enabled = true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:34:34.967

```
private void EnableButtons(bool enabled)
{
    var myButtons = new Button[] { button1, button2, button3 };

    foreach (var x in myButtons)
    {
        x.Enabled = enabled;
    }
} 
```

这允许您根据需要在按钮阵列中添加和删除按钮。如果您想启用/禁用表单上的每个按钮，nachogsiri 的解决方案非常棒，如果它只是某些相关的按钮，这会给您更多的控制权。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:08:29.157

Linq 做得非常漂亮：

```
Controls.OfType<Button>().ToList().ForEach(c => c.Enabled = true); 
```

# python - 合并来自两个不同数据库的表 - sqlite3/Python

> ID：11653267
> 
> 赞同：2
> 
> 时间：2012-07-25T15:29:09.793
> 
> 标签：python, api, sqlite, merge

我有两个不同的 SQLite 数据库 XXX 和 YYY。XXX 包含表 A，YYY 分别包含表 B。A 和 B 具有相同的结构（列）。如何在 Python - SQLite API 中附加 B 的行到 A 中。附加 A 后包含 A 的行和 B 的行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T15:47:54.850

您首先使用 获得与数据库的连接`sqlite3.connect`，然后创建一个游标以便您可以执行 sql。一旦有了游标，就可以执行任意 sql 命令。

例子：

```
import sqlite3

# Get connections to the databases
db_a = sqlite3.connect('database_a.db')
db_b = sqlite3.connect('database_b.db')

# Get the contents of a table
b_cursor = db_b.cursor()
b_cursor.execute('SELECT * FROM mytable')
output = b_cursor.fetchall()   # Returns the results as a list.

# Insert those contents into another table.
a_cursor = db_a.cursor()
for row in output:
    a_cursor.execute('INSERT INTO myothertable VALUES (?, ?, ...etc..., ?, ?)', row)

# Cleanup
db_a.commit()
a_cursor.close()
b_cursor.close() 
```

警告：我还没有实际测试过这个，所以它可能有一些错误，但我认为基本的想法是合理的。

# r - 向ggplot条形图添加标签

> ID：11653268
> 
> 赞同：32
> 
> 时间：2012-07-25T15:29:11.830
> 
> 标签：r, ggplot2

我想做一个用黑色勾勒出的条形图，条形内有百分比。这可能来自qplot吗？我得到了显示的百分比，但它们与特定的条不对齐。

包：ggplot2，重塑

![在 Illustrator 中创建](../Images/a92db040816b296b25d58a5347044220.png)

```
x <- data.frame(filename = c("file1", "file2", "file3", "file4"),
                    low = c(-.05,.06,.07,-.14),
                    hi = c(.87,.98,.56,.79))
x$tot <- x$hi + x$low

x <- melt(x, id = 'filename')

bar <- qplot(x = factor(filename), 
             y = value*100,
             fill = factor(variable),
             data = x,
             geom = 'bar',
             position = 'dodge') + coord_flip()
bar <- bar + scale_fill_manual(name = '',
                               labels = c('low',
                                          'Hi',
                                          "Tot"),
                               values = c('#40E0D0',
                                          '#FF6347',
                                          "#C7C7C7")) 
bar <- bar + geom_text(aes(label = value*100))+geom_bar(colour = 'black')
bar <- bar + opts(panel.background = theme_rect(colour = NA))
bar <- bar + opts(legend.justification = 'bottom')
print(bar) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-25T16:07:49.297

干得好：

```
library(scales)
ggplot(x, aes(x = filename, fill = variable)) +
  geom_bar(stat="identity", ymin=0, aes(y=value, ymax=value), position="dodge") +
  geom_text(aes(x=filename, y=value, ymax=value, label=value, 
                hjust=ifelse(sign(value)>0, 1, 0)), 
            position = position_dodge(width=1)) +
  scale_y_continuous(labels = percent_format()) +
  coord_flip() 
```

![在此处输入图像描述](../Images/55dedcf5731970d7c56104e92a6ce1e2.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T15:45:54.027

这将是一个很好的机会让你开始远离使用`qplot`，转而使用`ggplot`. 从长远来看，这会容易得多，相信我。

这是一个开始：

```
library(scales)
ggplot(data = x,aes(x = factor(filename),y = value)) + 
    geom_bar(aes(fill = factor(variable)),colour = "black",position = 'dodge') + 
    coord_flip() + 
    scale_fill_manual(name = '',
                      labels = c('low',
                                 'Hi',
                                 "Tot"),
                      values = c('#40E0D0',
                                 '#FF6347',
                                 "#C7C7C7")) + 
    scale_y_continuous(labels = percent_format()) 
```

出于哲学原因，我将把注释留给你......

# xna - 在 XNA 中需要调整纹理 2d 的大小吗？

> ID：11653274
> 
> 赞同：0
> 
> 时间：2012-07-25T15:29:24.550
> 
> 标签：xna, resize, texture2d

想象一下，我有一张名为 256x256 的图片（XNA 中的 Texture2D），但有时我想在应用程序中使用 64x64 大小的图片。

我在常规的 Windows 窗体或 WPF 应用程序中了解到，当我必须调整图像大小时，我应该将其存储在一个字段中，这样我只需调整一次大小。在游戏循环中一遍又一遍地调整大小时，它会大大降低性能。

我也必须在 XNA 中这样做吗？我没有找到任何关于它的东西。我可以在使用 spritebatch 绘制时调整纹理的大小，但这与刚才解释的相同。我会在每一帧都调整纹理的大小，而不仅仅是在现场调整一次。我什至不知道如何在 XNA 中调整没有 spritebatch 的 texture2d 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:34:47.103

没有理由创建原始纹理的调整大小副本。只需将其绘制成您想要的任何尺寸即可。在现代图形硬件上，以与原始图像不同的尺寸绘制纹理基本上是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:47:56.770

使用现代硬件，您很少需要手动调整纹理大小，硬件会自动完成所有这些工作。但是，您必须确保您使用的是 mipmapping，否则结果将非常混叠。

如果在当前纹理上启用了 mipmapping，它将在加载时调整大小。只需确保启用三线性过滤渲染状态并绘制您需要的任何尺寸，它就会自动使用最佳调整大小的纹理的混合。

# magento - 这个主题设置发生了什么？

> ID：11653275
> 
> 赞同：0
> 
> 时间：2012-07-25T15:29:28.633
> 
> 标签：magento

我正在尝试提出这个主题“abc”，但 magento 没有渲染它。相反，它会将我重定向到未找到的页面。它在企业包中，这个主题在我的其他企业和社区安装副本上运行良好。

我还尝试进入 CMS 主页并使用“abc”主题和布局更改其设计，但仍然在前端找不到此消息页面。我禁用了缓存。开发者模式打开并且日志文件中没有记录错误。

请提出一些建议。

![在此处输入图像描述](../Images/1cb779aaf987a4b91eccfdf08e900642.png)

![在此处输入图像描述](../Images/acdf3e6a108b3d054d3c9613d3fd332c.png)

![在此处输入图像描述](../Images/759627a7fa25043ab5bb41acb374093e.png)

编辑---如果我去 abc 中的 page.xml 并评论默认布局。我在前端得到一个黑白页面。所以magento实际上正在找到它，或者如果我破坏了一些xml标签并且可以看到错误。

# ruby - 为什么这个 case 语句只评估 else 子句？

> ID：11653276
> 
> 赞同：0
> 
> 时间：2012-07-25T15:29:29.337
> 
> 标签：ruby, switch-statement, if-statement

使用 Rails 3，但我想没关系。我把它放在模板助手中。

`badge-warning`当我为我提出任何价值时，它总是进入最后一种情况`rating`，例如`rating_badge(4)`：

```
 def rating_badge(rating)
    case rating
    when rating > 3
      'badge-success'
    when rating < 3
      'badge-important'
    else
      'badge-warning'
    end
  end 
```

什么地方出了错？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:59:40.160

您的案例陈述顶部有一个杂散*评级变量。*正确的语法是：

```
case
when rating > 3
  'badge-success'
when rating < 3
  'badge-important'
else
  'badge-warning'
end 
```

这对我在 REPL 使用 pry 和 irb 有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:53:34.190

我不知道的语法`case`，我想你必须包括这个词`then`...

```
when something then result1
when something_else then result2
... 
```

但是您可以使用以下方法获得相同的结果`if`：

```
def rating_badge(rating)
  if rating > 3
   'badge-success'
  elsif rating < 3
    'badge-important'
  else
    'badge-warning'
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:37:11.243

如果您向 提供变量`case`，它将尝试将变量的值与提供给`when`语句的每个值进行匹配。当您在每个之后放置一个条件`when`时，它将首先评估该条件，然后将其与`rating`. 但是，评估只会产生`true`or`false`并且显然您提供了一个数值给`case`，它总是会落入`else`大小写（因为`rating`从来没有`true`也不是`false`）。

@CodeGnome 已经发布了正确的语法，但我认为您应该知道失败的原因！

:)

# ruby-on-rails - Capybara 找不到日期选择器

> ID：11653279
> 
> 赞同：3
> 
> 时间：2012-07-25T15:29:33.047
> 
> 标签：ruby-on-rails, nokogiri, capybara

使用水豚，我正在尝试填写日期。表单上有一个 javascript 日期选择器。我尝试了以下方法来选择它：

```
find('input[type=date]').focus()
find(:xpath, ".//*[@id='Sdate']")
fill_in('Sdate', :with => '25/07/2555') 
```

但是，对于所有这些尝试，我得到了完全相同的错误消息：

```
Selenium::WebDriver::Error::UnknownError: '[JavaScript Error: "a is null" {file: "file:///var/folders/ky/r1ft86wd5x9cjq0f3f6tq0600000gn/T/webdriver-profile20120725-41019-m72bh5/extensions/fxdriver@googlecode.com/components/command_processor.js" line: 5813}]' when calling method: [nsICommandProcessor::execute] 
```

我要填写的html：

```
<input id="Sdate" type="text" readonly="" value="" size="10" name="Sdate">
<img align="absmiddle" onclick="return showCalendar('Sdate', 'dd/mm/yy');" style="cursor:pointer" src="../images/calendar_s.gif"> 
```

我在 Rails 3.2.6 任务中使用带有 Capybara 1.1.2 的 Firefox 上的 Selenium webdriver。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:24:11.313

我有相同的设置，我可以用这一行选择框：

```
select 'May', from: 'date_select_1' 
```

其中*“May”*是您要从列表中选择的值，*data_select_1* 是您要从中选择值的 HTML 标记的 ID。

# javascript - Javascript SyntaxError：意外的标识符

> ID：11653281
> 
> 赞同：0
> 
> 时间：2012-07-25T15:29:36.230
> 
> 标签：javascript, jquery

我写了一些小脚本，但因为我是在 Google 的帮助下完成的，所以我需要一些建议。将其放入 Chrome 控制台后，我收到此错误：

> SyntaxError：意外的标识符

这是我的代码：

```
jQuery(document).ready(function(){ 
    if jQuery("#colorbox").css("display", "none");) {
        jQuery("#close-news").css("display", "none");
    } 
    else {
        jQuery("#close-news").css("display", "visible");
    }
}); 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:31:13.140

改变：

```
if jQuery("#colorbox").css("display", "none");) 
```

到：

```
if (jQuery("#colorbox").css("display") == 'none') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:32:16.877

```
if (jQuery("#colorbox").css("display", "none")) {
    jQuery("#close-news").css("display", "none");
} 
else {
    jQuery("#close-news").css("display", "visible");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:46:15.567

修复语法错误的另一种编写方法：

```
jQuery(function () {
    if (jQuery("#colorbox").is(":visible")) {
        jQuery("#close-news").css("display", "none");
    } else {
        jQuery("#close-news").css("display", "visible");
    }
}); 
```

甚至更简单的切换

```
jQuery(function () {
    var isVisible = jQuery("#colorbox").is(":visible")) {
    jQuery("#close-news").toggle(!isVisible);        
}); 
```

# javascript - 加载ajax内容时如何更改根页面的页面标题？

> ID：11653288
> 
> 赞同：1
> 
> 时间：2012-07-25T15:29:56.287
> 
> 标签：javascript, jquery, ajax, title

我确定这很简单，但我不明白。

我正在使用以下 AJAX 脚本将外部页面的特定 div 中的内容加载到我的根页面上的同名 div 中。

```
 $(function() {

    var newHash      = "",
        $mainContent = $("#main-content"),
        $pageWrap    = $("#page-wrap"),
        $el;

    $(document).delegate(".dyn a", "click", function() {
        window.location.hash = $(this).attr("href");
        return false;
    }); 

    $(window).bind('hashchange', function(){

        newHash = window.location.hash.substring(1);

        if (newHash) {

            $mainContent
                .find("#guts")
                .fadeOut(200, function() {
                    $mainContent.hide().load(newHash + " #guts", function() {
                        $mainContent.fadeIn(200, function() {
                            $pageWrap.animate({

                            });

                        });
                        $(".dyn a").removeClass("current");
                        $(".dyn a[href="+newHash+"]").addClass("current");
                    });
                });
        };

    });
    $(window).trigger('hashchange');
}); 
```

有人可以帮我更改我正在加载的页面标题的根页面标题吗？

我试过使用：

```
var newTitle = $(responseHtml).filter('title').text();
document.title = newTitle; 
```

[正如它在这篇](https://stackoverflow.com/questions/7599365/get-the-title-of-a-requested-page-using-jquery-ajax)文章中提到的那样，它几乎可以正常工作，但会阻止 ajax 正常运行。我不确定，但我是否将其放置在正确的位置。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:41:43.527

你可能想要：`window.top.document.title = newTitle;`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T20:17:19.500

我设法通过将以下内容添加到 hashchange 函数来实现这一点：

```
 String.prototype.toTitleCase = function(n) {
   var s = this;
   if (1 !== n) s = s.toLowerCase();
   return s.replace(/\b[a-z]/g,function(f){return f.toUpperCase()});
   }

   newHash = window.location.hash.substring(1);         

   function changeTitle(title) { 

   document.title = window.location.hash.replace("#","").replace(/[_]/g,"").replace(".html","").replace("and","+").toTitleCase(); }
   changeTitle(""); 
```

这从页面文件名中获取标题，删除哈希和任何下划线，然后将每个单词的第一个字母大写。

我确信有一种更好、更简单的方法可以做到这一点。我现在要做的就是。

# mysql - MySQL 数据库结构、用户和日期

> ID：11653297
> 
> 赞同：0
> 
> 时间：2012-07-25T15:30:21.223
> 
> 标签：mysql

我有一个包含 3 列的表`USER, DATE, TEXT`，我想每天在每一列中插入更新的文本，并为每个用户指定一个日期。我将 USER 设置为我的主键，如何构建这样的东西？我是 mysql 新手。我最初的想法是这样的

```
USER1 日期文本
      日期文本
      日期文本
USER2 日期文本
      日期文本
      日期文本

```

但是我认为这不会起作用，看看 USER 是如何成为主键的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:34:05.933

我会在这个数据库中创建两个表。一张表将保存您用户的帐户信息。第二个将保存您要使用唯一 ID、用户 ID、日期和文本保存的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:34:55.340

或者，您需要两个带有`one to many relation`.

```
Table1: User
UserId, Name

Table2: Messages (or whatever)
MessageId, UserId, Date, Text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:32:37.663

主键应该是`(user, date)`.

```
USER1 DATE1 TEXT
USER1 DATE2 TEXT
USER1 DATE3 TEXT
USER2 DATE1 TEXT
USER2 DATE2 TEXT
USER2 DATE3 TEXT 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:34:10.237

一个简单的解决方案是使用 2 个表，其中一个只有“用户”作为主键，另一个使用“用户”“文本”“日期”，其中“用户”是外键

主
用户1用户
2

第二个
用户 1 文本 1 日期 1
用户 1文本 2 日期 2

# python - 在 Python 中解析 SOAP 响应

> ID：11653309
> 
> 赞同：1
> 
> 时间：2012-07-25T15:31:01.783
> 
> 标签：python, xml, soap

我正在尝试解析`SOAP`来自服务器的响应。我对`SOAP`使用`HTTP`/进行交流是 100% 的新手，而且非常陌生`HTTPS`。我在 Ubuntu 12.04 上使用 Python 2.7。

看起来`SOAP`很像`XML`。但是，我似乎无法解析它。我尝试使用`ElementTree`但不断出错。通过搜索，我可以得出结论，`SOAP`标签可能存在问题。（我可能会离开这里......如果我在，请告诉我。）

因此，这是我拥有的消息的示例`SOAP`以及我试图解析它的方法（如果相关，这是来自 Link Point Gateway 的实际服务器响应）。

```
import xml.etree.ElementTree as ET
soap_string = '<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><fdggwsapi:FDGGWSApiOrderResponse xmlns:fdggwsapi="http://secure.linkpt.net/fdggwsapi/schemas_us/fdggwsapi"><fdggwsapi:CommercialServiceProvider/><fdggwsapi:TransactionTime>Wed Jul 25 10:26:40 2012</fdggwsapi:TransactionTime><fdggwsapi:TransactionID/><fdggwsapi:ProcessorReferenceNumber/><fdggwsapi:ProcessorResponseMessage/><fdggwsapi:ErrorMessage>SGS-002303: Invalid credit card number.</fdggwsapi:ErrorMessage><fdggwsapi:OrderId>1</fdggwsapi:OrderId><fdggwsapi:ApprovalCode/><fdggwsapi:AVSResponse/><fdggwsapi:TDate/><fdggwsapi:TransactionResult>FAILED</fdggwsapi:TransactionResult><fdggwsapi:ProcessorResponseCode/><fdggwsapi:ProcessorApprovalCode/><fdggwsapi:CalculatedTax/><fdggwsapi:CalculatedShipping/><fdggwsapi:TransactionScore/><fdggwsapi:FraudAction/><fdggwsapi:AuthenticationResponseCode/></fdggwsapi:FDGGWSApiOrderResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>'
targetTree = ET.fromstring(soap_string) 
```

这会产生以下错误：

```
unbound prefix: line 1, column 0 
```

从另一个 stackoverflow[帖子](https://stackoverflow.com/questions/5434288/issue-parsing-a-xhtml-page-using-python?answertab=votes#tab-top)中，我得出结论，这`SOAP-ENV:Body`可能会导致命名空间问题。（我可能是错的。）

我已经进行了其他搜索以找到一个很好的解析解决方案，`SOAP`但其中大部分来自 3 年多以前。似乎强烈推荐[suds 。](https://fedorahosted.org/suds/)我想在我走得太远之前获得“更新”的建议。

任何人都可以推荐一种可靠（且简单）的方法来解析`SOAP`我上面收到的响应吗？如果您能提供一个简单的示例来帮助我入门，将不胜感激（正如我上面所说，我对 完全陌生`SOAP`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:34:29.097

我找不到使用 Python 的直接方法。我决定改用 PHP。

很像以下内容：

Python：

```
import subprocess
command = 'php /path/to/script.php "{1}"'.format(soap_string)
process = subprocess.Popen(command, shell = True, stderr = subprocess.PIPE, stdout = subprocess.PIPE)
process.wait()
output = process.communicate()[0]
(error, result, order_id) = output.split(',') 
```

PHP：

```
#!/usr/bin/php
<?php

$soap_response = $argv[1];

$doc = simplexml_load_string($soap_response);
$doc->registerXPathNamespace('fdggwsapi', 'http://secure.linkpt.net/fdggwsapi/schemas_us/fdggwsapi');
$nodes = $doc->xpath('//fdggwsapi:FDGGWSApiOrderResponse/fdggwsapi:ErrorMessage');
$error = strval($nodes[0]);

$nodes = $doc->xpath('//fdggwsapi:FDGGWSApiOrderResponse/fdggwsapi:TransactionResult');
$result = strval($nodes[0]);

$nodes = $doc->xpath('//fdggwsapi:FDGGWSApiOrderResponse/fdggwsapi:OrderId');
$order_id = strval($nodes[0]);

$array = array($error, $result, $order_id);
$response = implode(',', $array);

echo $response; 
```

此代码仅解析此特定`SOAP`响应的特定方面。这应该足以让你解决你的问题。

当谈到 PHP 时，我是一个完全的新手（我使用过一点 Perl，所以这很有帮助）。我必须[感谢@scoffey](https://stackoverflow.com/users/311254/scoffey)，因为[他以](https://stackoverflow.com/questions/5048685/php-parse-data-from-a-soap-response?answertab=votes#tab-top)**最终**对我有意义`SOAP`的方式进行解析的解决方案。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:54:33.313

编辑：在 Python 中使用 SOAP 真的很有趣——大多数工具都没有维护多年。如果我们谈论功能 - 也许[ZSI](http://pywebsvcs.sourceforge.net/zsi.html)是领导者。但是如果要支持一些更复杂的 XSD 模式，它就会有很多错误（仅举一个例子——它不支持基于扩展的联合和复杂类型，其中扩展类型不是基本类型）。 [Suds](https://fedorahosted.org/suds/)非常易于使用，但不如 ZSI 强大 - 它对一些复杂的 XSD 结构的支持比 ZSI 更差。有一个有趣的工具 - [generateDS](http://cutter.rexx.com/~dkuhlman/generateDS.html)，它与 XSD 一起工作，而不是直接与 WSDL 一起工作 - 你必须自己实现这些方法。但它实际上做得很好。**

# javascript - 在透明背景 PNG 周围获取“方形”框阴影。如何在图像周围弯曲 CSS 阴影？

> ID：11653313
> 
> 赞同：1
> 
> 时间：2012-07-25T15:31:09.763
> 
> 标签：javascript, html, css, photoshop

> **可能重复：**
> [您可以使用 CSS 向 PNG 内容添加非方形投影吗？](https://stackoverflow.com/questions/6441332/can-you-add-a-non-square-drop-shadow-to-png-content-with-css)

感谢您查看我的问题。

有一个问题，我在 css 中将图像的悬停设置为具有框阴影： ![例子](../Images/4f95bb6ff1486f60345da1e7462b5034.png)

但是阴影是图像周围的一个正方形，而不是沿着图片中那个人周围的路径。

该图像是具有透明背景的 PNG-24。我在某个地方犯了一个愚蠢的错误吗？这实际上可以完成还是我需要以某种方式从 Photoshop 中删除方形画布或通过 javascript 将图像换成带有阴影的相同图像？

非常感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T15:33:40.340

使用 CSS 是不可能的。使用图像精灵并在悬停时更改背景位置。

这是工作[小提琴](http://jsfiddle.net/surendraVsingh/2VkQN/)

# java - OpenGL淡出/不工作

> ID：11653314
> 
> 赞同：0
> 
> 时间：2012-07-25T15:31:11.143
> 
> 标签：java, opengl, jogl

我正在尝试使用 JOGL 淡入/淡出图像。我可以很好地渲染图像，但它总是以全强度渲染。下面是代码：

```
private void render(GLAutoDrawable glad) {
GL2 gl = glad.getGL().getGL2();

// Prepares the rendering, things such as disabling depth, clearing the buffer bit etc
setUpGL(gl);

BufferedImage background = main.getCurrentState().getImage();
// Render the background, adapted from here: http://bit.ly/QjeusP
renderImage(gl, background, background.getWidth(), background.getHeight());

gl.glEnable(GL2.GL_BLEND);
gl.glBlendFunc(GL2.GL_SRC_ALPHA, GL2.GL_ONE_MINUS_SRC_ALPHA);
gl.glColor4f(0, 0, 0, alpha);
gl.glBegin(GL2.GL_QUADS);
gl.glVertex2f(0, background.getHeight());
gl.glVertex2f(background.getWidth(), background.getHeight());
gl.glVertex2f(background.getWidth(), 0);
gl.glVertex2f(0, 0);
gl.glEnd();
gl.glDisable(GL2.GL_BLEND);
} 
```

变量 alpha 是一个浮点数，每次渲染递增 0.1，如果超过 1.0，则递减 0.1，直到小于 0，然后递增，依此类推。

编辑 1：这是更新 alpha 值的代码：

```
private void update() {
  if (isTransparent) {
    alpha += 0.1f;
    if (alpha >= 1.0f) {
      alpha = 1.0f;
      isTransparent = false;
    }
  }
  else {
    alpha -= 0.1f;
    if (alpha <= 0.0f) {
      alpha = 0.0f;
      isTransparent = true;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:37:40.737

这可能是一个深度测试问题。我不知道是做什么`renderImage`的，但如果它只是在 处渲染一个屏幕对齐的纹理四边形`z = 0`，那么当启用深度测试时，你渲染的四边形将不会被渲染，因为它与纹理四边形的深度相同。所以尝试`glDisable(GL_DEPTH_TEST)`在渲染你的半黑色四边形（以及`glEnable`之后）。

**编辑：**愚蠢的想法，但你是否正在快速改变 alpha 以便你最终只有一个恒定的灰色阴影？

# regex - Perl 正则表达式不匹配

> ID：11653318
> 
> 赞同：2
> 
> 时间：2012-07-25T15:31:15.917
> 
> 标签：regex, perl

我正在尝试匹配文件中的行并提取某个部分。我的正则表达式适用于我能找到的所有在线测试人员，但不适用于我的 perl。我使用的是 v5.10.0 版本，无法更新。

正则表达式如下所示：

```
sub parse_bl_line {
    if ($_[0] =~ m/^copy\s+.*?\s+(.*?\_.*)/) {
             return $1;
    } else {
             log_msg("Line discarded: $_[0]", 4);
     return "0";
    } 
```

}

几行应该匹配的测试数据（只有最后一个匹配）：

```
@bl_lines = (
"copy xxxxxx_/cpu     b_relCAP_R3.0-1_INT5_xxxxx_cpu_p1",
"copy xxxxxxxx_/va_xxx_parameters    b_relCAP_R3.0-1_INT5_xxxxx_va_xxx_parameters_p1",
"copy xxxxxxxx_/xxxxxxx_view.tcl      b_relCAP_R3.0-1_INT5_xxxxxx_view.tcl_p0",
"copy xxxxx_/xxxxxarchivetool.jar   b_relEARLY_DROP1_xxxxxarchivetool.jar_xx"); 
```

并调用函数：

```
foreach(@bl_lines) {
    $file=parse_bl_line($_);
    if ($file !~ "0") {
            log_msg("Line accepted: $_", 4);
            log_msg("File extracted: $file", 4);
    }else { 
            log_msg("Line rejected: $_", 2);
    } 
```

}

我正在尝试匹配最后一部分，例如

```
b_relEARLY_DROP1_xxxxxarchivetool.jar_xx 
```

输出如下所示：

```
20120726 13:15:34 - [XXX] ERROR: Line rejected: copy xxxxxx_/cpu     b_relCAP_R3.0-1_INT5_xxxxx_cpu_p1
20120726 13:15:34 - [XXX] ERROR: Line rejected: copy xxxxxxxx_/va_xxx_parameters    b_relCAP_R3.0-1_INT5_xxxxx_va_xxx_parameters_p1
20120726 13:15:34 - [XXX] ERROR: Line rejected: copy xxxxxxxx_/xxxxxxx_view.tcl      b_relCAP_R3.0-1_INT5_xxxxxx_view.tcl_p0
20120726 13:15:35 - [XXX] INFO: Line accepted: copy xxxxx_/xxxxxarchivetool.jar   b_relEARLY_DROP1_xxxxxarchivetool.jar_xx 
20120726 13:15:35 - [XXX] INFO: File extracted: b_relEARLY_DROP1_xxxxxarchivetool.jar_xx 
```

**提示** 我做了一些@BaL 提议的测试，发现模式匹配在没有选择括号的情况下工作。

```
if ($_[0] =~ m/^copy\s+.+?\s+.+?\_.+$/) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:24:04.783

测试 : 在任何位置都不包含 a`if ($file !~ "0") {`时为真，这仅是最后一个字符串的情况。`$file``0`

我猜你想使用：`if ($file ne '0') {`甚至更短：`if ($file) {`

`use strict;`除此之外， 您应该`use warnings`始终如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:39:37.927

你想匹配什么？最后一部分？不要使用 * 如果你知道你有匹配的东西，使用 + 代替：

```
if ($_[0] =~ m/^copy\s+.+?\s+(.\+?)$/) {
    return $1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:42:27.227

我猜你的测试文件的最后一行是唯一不以“\n”结尾的。有趣的小虫子总是挡道......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T11:49:33.620

在进行字符串比较时，将 if 语句中的比较运算符从 !~ 更改为 ne。当我进行此更改时，所有日志行都被接受。

我在 perl 5.14.2 而不是 5.10 上对此进行了测试，但我没有使用任何特殊功能。搏一搏！代码如下：

```
use 5.14.2;

sub log_msg{
    say shift;  
}

sub parse_bl_line {
    if ($_[0] =~ m/^copy\s+.*?\s+(.*?\_.*)/) {             
        return $1;     
    }
    else {              
        log_msg("Line discarded: $_[0]", 4);      
        return "0";     
    }
}

my @bl_lines = ( 
    "copy xxxxxx_/cpu                    b_relCAP_R3.0-1_INT5_xxxxx_cpu_p1",
    "copy xxxxxxxx_/va_xxx_parameters    b_relCAP_R3.0-1_INT5_xxxxx_va_xxx_parameters_p1", 
    "copy xxxxxxxx_/xxxxxxx_view.tcl     b_relCAP_R3.0-1_INT5_xxxxxx_view.tcl_p0", 
    "copy xxxxx_/xxxxxarchivetool.jar    b_relEARLY_DROP1_xxxxxarchivetool.jar_xx"
);  

foreach(@bl_lines) {     
    my $file = parse_bl_line($_);     
    if ($file ne "0") {    # Changed the comparison operator here         
        log_msg("Line accepted: $_", 4);             
        log_msg("File extracted: $file", 4);
    }
    else {              
        log_msg("Line rejected: $_", 2);     
    } 
} 
```

# php - foreach 期望 wordpress 模板中有一个数组

> ID：11653323
> 
> 赞同：0
> 
> 时间：2012-07-25T15:31:20.470
> 
> 标签：php, wordpress

好的，我在 wordpress 中安装了一个主题，它返回一些错误。

```
Warning: Invalid argument supplied for foreach() in /home/mvprop/public_html/wp-content/themes/yoo_vox_wp/warp/systems/wordpress.3.0/helpers/system.php on line 339 
```

这个问题在这些[论坛上得到解决](http://www.webdeveloper.com/forum/showthread.php?t=256386)

但我不明白最后一篇文章是关于什么的。这家伙发布了一堆解决问题的随机代码。他没有具体说明它来自哪里或放在哪里。只是粘贴似乎与任何事情无关的代码。

第 334 行到文件末尾

```
function getWidgets($position = null) {

    if (empty($this->widgets)) {
        foreach (wp_get_sidebars_widgets() as $pos => $ids) {
            $this->widgets[$pos] = array();
            foreach ($ids as $id) {
                $this->widgets[$pos][$id] = $this->getWidget($id);
            }
        }
    }

    if (!is_null($position)) {
        return isset($this->widgets[$position]) ? $this->widgets[$position] : array();
    }

    return $this->widgets;
}

/*
    Function: displayWidget
        Checks if a widget should be displayed

    Returns:
        Boolean
*/
function displayWidget($widget) {
    if (!isset($widget->options['display']) || in_array('*', $widget->options['display'])) return true;

    foreach ($this->getQuery() as $q) {
        if (in_array($q, $widget->options['display'])) {
            return true;
        }
    }

    return false;
}

/*
    Function: overrideConfig
        Overrides default config based on page

    Returns:
        Void
*/
function overrideConfig() {
    if (!count($this->config_overrides)) return;

    foreach ($this->getQuery() as $q) {
        if (isset($this->config_overrides[$q])) {
            $this->warp->config->parseString($this->config_overrides[$q]);
        }
    }
}

/*
    Function: isBlog

    Returns:
        Boolean
*/
function isBlog() {
    return true;
}

/*
    Function: isPreview
        Checks for default widgets in theme preview 

    Returns:
        Boolean
*/
function isPreview($position) {

    // preview postions
    $positions = array('logo', 'right');

    return is_preview() && in_array($position, $positions);
}

/*
    Function: ajaxSearch
        Ajax search callback

    Returns:
        String
*/
function ajaxSearch(){
    global $wp_query;

    $result = array('results' => array());
    $query  = isset($_REQUEST['s']) ? $_REQUEST['s']:"";

    if (strlen($query)>=3) {

        $wp_query->query_vars['s'] = $query;
        $wp_query->is_search = true;

        foreach ($wp_query->get_posts() as $post) {

            $content = !empty($post->post_excerpt) ? strip_tags(do_shortcode($post->post_excerpt)) : strip_tags(do_shortcode($post->post_content));

            if (strlen($content) > 255) {
                $content = substr($content, 0, 254).'...';
            }

            $result['results'][] = array(
                'title' => $post->post_title,
                'text'  => $content,
                'url'   => get_permalink($post->ID)
            );
        }
    }

    die(json_encode($result));
}

/*
    Function: _adminInit
        Admin init actions

    Returns:
        Void
*/
function _adminInit() {

    if ((defined('DOING_AJAX') && DOING_AJAX) && isset($_POST['warp-ajax-save'])) {

        // update option values
        foreach ($_POST as $option => $value) {
            if (preg_match('/^(warp_|'.preg_quote($this->prefix, '/').')/', $option)) {
                update_option($option, $value);
            }
        }

        die();
    }

    wp_enqueue_script('warp-admin', rtrim(get_bloginfo('template_url'),'/').'/warp/systems/wordpress.3.0/js/wp-admin.js', false, '1.0');
    add_action('wp_ajax_save_nav_settings', array($this,'_save_nav_settings'));
    add_action('wp_ajax_get_nav_settings', array($this,'_get_nav_settings'));
}

/*
    Function: _adminHead
        Admin head actions

    Returns:
        Void
*/
function _adminHead() {

    // init vars
    $path =& $this->getHelper('path'); 

    $head[] = '<link rel="stylesheet" href="'.$path->url('warp:systems/wordpress.3.0/css/admin.css').'" type="text/css" />';
    $head[] = '<script type="text/javascript" src="'.$path->url('warp:systems/wordpress.3.0/js/admin.js').'"></script>';

    echo implode("\n", $head);
}

/*
    Function: _adminMenu
        Admin menu actions

    Returns:
        Void
*/
function _adminMenu() {

    // init vars
    $path =& $this->getHelper('path');
    $name = $this->xml->document->getElement('name');
    $icon = $path->url('warp:systems/wordpress.3.0/images/yoo_icon_16.png');

    if (function_exists('add_object_page')) {
        add_object_page('', $name->data(), 8, 'warp', false, $icon);
    } else {
        add_menu_page('', $name->data(), 8, 'warp', false, $icon); 
    }

    add_submenu_page('warp', 'Theme Options', 'Theme Options', 8, 'warp', array($this, '_adminThemeOptions'));
    add_submenu_page('warp', 'Widget Options', 'Widget Options', 8, 'warp_widget', array($this, '_adminWidgetOptions'));
}

/*
    Function: _adminThemeOptions
        Render admin theme options layout

    Returns:
        Void
*/  
function _adminThemeOptions() {

    // init vars
    $path  =& $this->getHelper('path');
    $xml   =& $this->getHelper('xml');
    $http  =& $this->getHelper('http');
    $check =& $this->getHelper('checksum');

    // get warp xml
    $warp_xml = $xml->load($path->path('warp:warp.xml'), 'xml', true);

    // update check
    $update = null;
    if ($url = $warp_xml->document->getElement('updateUrl')) {

        // get template info
        $template = get_template();
        $version  = $this->xml->document->getElement('version');
        $url      = sprintf('%s?application=%s&version=%s&format=raw', $url->data(), $template, $version->data());

        // only check once a day 
        if (get_option($this->prefix.'update_check') != date('Y-m-d').' '.$version->data()) {
            if ($request = $http->get($url)) {
                update_option($this->prefix.'update_check', date('Y-m-d').' '.$version->data());
                update_option($this->prefix.'update_data', $request['body']);
            }
        }

        // decode update response
        $update = json_decode(get_option($this->prefix.'update_data'));
    }

    // verify theme files
    if (($checksums = $path->path('template:checksums')) && filesize($checksums)) {
        $check->verify($path->path('template:'), $log);
    } else {
        $log = false;
    }

    echo $this->warp->template->render('admin/theme_options', array('xml' => $this->xml, 'warp_xml' => $warp_xml, 'update' => $update, 'checklog' => $log));
}

/*
    Function: _adminWidgetOptions
        Render admin widget options layout

    Returns:
        Void
*/  
function _adminWidgetOptions() {

    // get position settings
    $position_settings = $this->warp->config->get('warp.positions');

    // get module settings
    $module_settings = array();
    $settings = $this->xml->document->getElement('modulesettings');

    foreach ($settings->children() as $setting) {
        $module_settings[$setting->attributes('name')] = $setting;
    }

    echo $this->warp->template->render('admin/widget_options', compact('position_settings', 'module_settings'));
}

/*
    Function: getMenuItemOptions
        Retrieve menu by id

    Parameters:
        $id - Menu Item ID

    Returns:
        Array
*/
function getMenuItemOptions($id) {

    $menu_settings = array(
        'columns'     => 1,
        'columnwidth' => -1,
        'image'       => ''
    );

    if (isset($this->menu_item_options[$id])) {
        $menu_settings = array_merge($menu_settings, $this->menu_item_options[$id]);
    }

    return $menu_settings;
}

/*
    Function: _save_nav_settings
        Saves menu item settings

    Returns:
        Void
*/  
function _save_nav_settings() {

    if (isset($_POST['menu-item'])) {

        $menu_item_settings = $this->menu_item_options;

        foreach ($_POST['menu-item'] as $itemId=>$settings){
            $menu_item_settings[$itemId] = $settings;
        }

        update_option($this->prefix.'menu-items', $menu_item_settings);
        $this->menu_item_options = $menu_item_settings;
    }

    die();
}

/*
    Function: _get_nav_settings
        Returns menu item settings as json

    Returns:
        Boolean
*/
function _get_nav_settings() {
    die(json_encode($this->menu_item_options));
    }

}

    /*
        Function: mb_strpos
            mb_strpos function for servers not using the multibyte string extension
    */
    if (!function_exists('mb_strpos')) {
        function mb_strpos($haystack, $needle, $offset = 0) {
            return strpos($haystack, $needle, $offset);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:42:41.607

基本上，这条警告消息告诉您的是，您传递给 foreach 的变量不是数组或对象。通过测试变量（ is_array($var) 或 is_object($var) ）或将此代码块放在 try-catch 中，确保您的变量有效。

如果 $var 应该是一个数组，你也应该初始化它以确定。

```
$var = Array();
.
. // code that may change the data type of $var
.
if (is_array($var)) {
    foreach($var as $v) {
        //code here
    }
} 
```

来自[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)的手册：

> foreach 构造提供了一种迭代数组的简单方法。foreach 仅适用于数组和对象，当您尝试在具有不同数据类型的变量或未初始化的变量上使用它时会发出错误。

# ajax - jQuery 返回 null - 选择的选项未正确发布？

> ID：11653332
> 
> 赞同：0
> 
> 时间：2012-07-25T15:31:35.717
> 
> 标签：ajax, jquery

此 jQuery 脚本返回 null。我已经尝试对选定的选项使用其他语法，但下面是我得到的：

该脚本运行正常，允许我下载 Excel 文件。但是 ID 未正确设置（通过选择的选项），因此解析为“0”。

```
<script>
//When Page Loads....
$(document).ready(function(){

  $('#dropdown').change(function(){
    // Call the function to handle the AJAX.
    // Pass the value of the text box to the function.
    sendValue($(this).val());   
  }); 
});

// Function to handle ajax.
function sendValue(str){
  // post(file, data, callback, type); (only "file" is required)
  $.post(
    "scripts/export_to_excel/index.php", //Ajax file
    { sendValue: str },  // create an object will all values
    //function that is called when server returns a value.
    function(data){
      $('#linkDiv').html(data.returnValue);
    }, 
    //How you want the data formatted when it is returned from the server.
    "json"
  );
}
</script> 
```

选择 HTML

```
<p>Select event for export to Excel:</p>
<p>
  <select name="eventIDExport" id="dropdown"> 
    <option value=0> 
    <?=$options?> 
  </select>
</p>
<?php var_dump($_POST['eventIDExport']); ?>
<div id="linkDiv"></div> 
```

渲染标记

```
<p>Select event for export to Excel:</p>
<p>
  <select name="eventIDExport" id="dropdown"> 
    <option value=0> 
    <option value="1">BIG event</option>
    <option value="54">2013 Network Conference</option>
  </select>
</p>
NULL
<div id="linkDiv"></div> 
```

index.php 中用于处理 Ajax 请求的一些代码 - 我认为这是触发 null 值？

```
if (isset($_POST['eventIDExport']))
{
$eventIDExport = $_POST['eventIDExport'];
}else{
$eventIDExport = "";    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:29:16.117

为什么要发布`sendValue`并检查是否`eventIDExport`已设置？

```
$.post("scripts/export_to_excel/index.php", {
    sendValue: str
    ^^^^^^^^^ 
```

和

```
if (isset($_POST['eventIDExport']))
                  ^^^^^^^^^^^^^ 
```

您的代码应该是：

```
if(isset($_POST['sendValue']))
{
    $eventIDExport = $_POST['sendValue'];
} else {
    $eventIDExport = "";
} 
```

或者

```
$.post("scripts/export_to_excel/index.php", {
    eventIDExport: str 
```

# cassandra - 在 Schema 中适当使用 Supercolum

> ID：11653337
> 
> 赞同：3
> 
> 时间：2012-07-25T15:31:52.353
> 
> 标签：cassandra

我需要跟踪 Cassandra 中的数据版本。我在想版本 # 将是一个超级列，实体 ID 将是行 ID，然后我需要跟踪的列将是列。因此，例如，实体的版本 1 将是：

*   超列：v1
*   行ID：UUID
*   列：时间戳、请求 ID、用户 ID、状态、数据等...

查询时，最常见的请求将是

*   给我版本 X 记录 y
*   给我版本 X - 1 和 X + 1 记录 y。

不太重要的查询是：

*   给我所有处于状态 1 的行。
*   给我用户 ID x 更改的所有记录。
*   给我时间戳在 x 和 y 之间的所有行。

上述带有超列的方法是最好的方法，还是有更好的模式来完成上述操作。使用/查询我需要注意的超列是否有注意事项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T01:40:23.673

首先，不要使用超列。它们已被有效地弃用并且有许多缺点。在您的模型中，您可以通过使用具有两个组件的组合键轻松地用组合替换您的超级列，第一个是您的 UUID，第二个是您的版本。此模型将支持您的所有查询。 [查看此](http://www.datastax.com/dev/blog/introduction-to-composite-columns-part-1)内容以获取有关复合材料的更多信息。

# php - PHP - fopen($url) 无法打开流：权限被拒绝

> ID：11653340
> 
> 赞同：2
> 
> 时间：2012-07-25T15:32:02.267
> 
> 标签：php, fopen

我必须使用非常相似的 php 配置（实际上在同一个主机帐户上）的网站，具有几乎相同的 php 代码和相同的文件结构。在某些时候，我调用*fopen(http://example.com/rssfedd.xml)*来检索 RSS 提要。

在[http://sfdmorin.com/accueil/index.php](http://sfdmorin.com/accueil/index.php)上一切正常，在[http://danielpoiriergda.ca/accueil/index.php](http://danielpoiriergda.ca/accueil/index.php)我得到：

> 警告：fopen（http://affaires.lapresse.ca/rss/2399.xml）[function.fopen]：无法打开流：/var/www/vhosts/danielpoiriergda.ca/httpdocs/snippet/lastRSS 中的权限被拒绝.php 在第 143 行

```
 $f = fopen("http://affaires.lapresse.ca/rss/2399.xml", 'r'); 
```

两个网站**都启用了 php 调试模式**，并且都具有**相同的文件和文件夹权限。** info.php 都为本地和主值**启用了 *allow_url_fopen***

以下是我在两个 phpinfo() 文件中发现的主要区别：

不工作的网站：服务器 API CGI/FastCGI

工作地点：Server API Apache 2.0 Handler

*并且在工作站点上，加载的配置文件*字段给出的路径中没有 php.ini 文件

编辑：我知道这个线程可能已经死了，但不是问题。我检查，使用 Netbeans 填充差异，所有 PHP 代码和 php.ini 在两个域上都完全相同。

我知道有人问过类似的问题，但它们对我没有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:18:40.417

最后，我联系了我的网络服务器技术支持，他们解决了这个问题。他们这样做了：

> 向 SELinux 添加例外

我不知道 SELinux 是什么或他们具体做了什么。

# perl - 如何将文件行结果输入到数组中？

> ID：11653344
> 
> 赞同：-3
> 
> 时间：2012-07-25T15:32:13.593
> 
> 标签：perl

到目前为止，我的代码只读取第 1 到第 4 行并打印它们。我想要做的而不是打印它们是将它们放入一个数组中。因此，任何帮助将不胜感激。希望只是代码，因为它应该很短。我可以更快地查看完整的代码，而不是打开另外 50 个标签来尝试将多个概念放在一起。希望我会在某个时候学到这一点，并且不需要帮助。

```
my $x = 1;
my $y = 4;

open FILE, "file.txt" or die "can not open file";
while (<FILE>) {
    print if $. == $x .. $. == $y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:35:02.267

你应该把每一行放在一个数组中`push`：

```
my $x = 1;
my $y = 4;
my @array;
open FILE, "file.txt" or die "can not open file";
while (<FILE>) {
    push (@array, $_) if ($. >= $x || $. <= $y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:39:17.537

最后的 foreach 只是证明它有效 - 请注意它不会忽略空白行 - 认为您可能想要保留它们。

```
#!/usr/bin/perl
use warnings;
use strict;
my $fi;
my $line;
my $i = 0;
my @array;
open($fi, "< file.txt");
while ($line = <$fi>) {
    $array[$i] = $line;
    if ($i == 3)
    {
        last;
    }
    $i++;
}
foreach(@array)
{
    print $_;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T08:23:59.757

你知道，一旦你获得了你需要的所有数据，你就不需要继续遍历文件了。

```
my $x = 1;
my $y = 4;
my @array;
my $file = 'file.txt';

# Lexical filehandle, three-argument open, meaningful error message
open my $file_h, '<', $file or die "cannot open $file: $!";

while (<$file_h>) {
  push @array $_ if $_ >= $x; # This condition is unnecessary when $x is 1
  last if $. == $y;
} 
```

# java - 在 java 中使用 getScaledInstance() 缩放图像

> ID：11653346
> 
> 赞同：0
> 
> 时间：2012-07-25T15:32:20.657
> 
> 标签：java, image, get

谁能解释一下，我有 3 种方法可以创建 Image 对象，但只有最后一个对象（k）可以使用 getscalledinstance（）成功缩放。

```
public class scalingTest extends JPanel {

    public static Image i;
    public static Image j;
    public static Image k;
    scalingTest() throws IOException
    {
        i = Toolkit.getDefaultToolkit().getImage("C:/Users/Prashant/Desktop/2.png");
        j = new ImageIcon("C:/Users/Prashant/Desktop/2.png").getImage();
        k = ImageIO.read(new File("C:/Users/Prashant/Desktop/2.png"));
    }
    public static void main(String s[]) throws IOException
    {
        JFrame jf = new JFrame("Scaling TEST");
        jf.add(new scalingTest());
        jf.setSize(500, 500);
        jf.setVisible(true);
    }
    @Override
    public void paintComponent(Graphics g)
    {
        g.drawImage(i.getScaledInstance(100, 100, Image.SCALE_DEFAULT), 0, 0, this);
        g.drawImage(j.getScaledInstance(100, 100, Image.SCALE_DEFAULT), 100, 100, this);
        g.drawImage(k.getScaledInstance(100, 100, Image.SCALE_DEFAULT), 200, 200, this);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:34:11.193

阅读 Image.getScaledInstance 的 Javadoc：

> 返回一个新`Image`对象，它将在指定的默认情况下呈现`width`图像 `height`。`Image`即使原始源图像已经完全加载，新对象也可以异步加载。

确保在您尝试绘制时缩放的图像确实*存在*（如果您需要如何操作的建议，请查找“确保图像已完全加载”）。它与通过 ImageIO 获得的图像一起工作的原因是 ImageIO 为您提供了一个 BufferedImage，并且始终加载。

另请注意：为了简单地将图像绘制到图像大小以外的大小，您不需要创建缩放实例 - Graphics 具有动态绘制不同大小的图像的方法。根据用例，使用它可能会更好。

# python - 将用户名添加到 url 的路径

> ID：11653347
> 
> 赞同：0
> 
> 时间：2012-07-25T15:32:28.727
> 
> 标签：python, google-app-engine, handler

我正在 Google App Engine 中使用 webapp2 构建应用程序。如何将用户名传递到 url，以便在单击配置文件按钮时，将用户带到“/profile/username”，其中“username”特定于用户？

我目前的处理程序：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/signup', Register),
                               ('/login', Login),
                               ('/logout', Logout),
                               ('/profile', Profile)
                               ],
                              debug=True) 
```

配置文件类：

```
class Profile(BlogHandler):
    def get(self):
        email = self.request.get('email')
        product = self.request.get('product')
        product_list = db.GqlQuery("SELECT * FROM Post ORDER BY created DESC LIMIT 10")
        self.render('profile.html', email = email, product = product, product_list = product_list) 
```

我正在尝试将每个用户发送到个人资料页面，该页面包含我的数据库中特定于他们的信息。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:46:49.700

一种可能的解决方案是简单地使用一个 URL，即`/profile`. 相应的处理程序将使用来自登录用户的数据呈现响应。

如果你真的想拥有这样的 URL `/profile/username`，你可以定义一个[路由](http://webapp-improved.appspot.com/guide/routing.html)：

```
app = webapp2.WSGIApplication([('/', MainPage),
                               ('/signup', Register),
                               ('/login', Login), 
                               ('/logout', Logout),
                               ('r/profile/(\w+)', Profile)
                              ],
                              debug=True) 
```

并访问您的处理程序中的用户名：

```
class Profile(BlogHandler):
    def get(self, username): 
```

但是根据您的应用程序，您可能希望通过在处理程序中的某处添加检查来确保只有登录用户可以访问它`/profile/username`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:40:00.967

请参阅[http://webapp-improved.appspot.com/guide/routing.html](http://webapp-improved.appspot.com/guide/routing.html)

你可以有类似的东西

```
class Profile(BlogHandler):
  def get(self, username):
    ...

app = webapp2.WSGIApplication([('/profile/(\w+)', Profile), ...]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:41:26.960

首先将捕获组添加到 /profile：

```
(r'/profile/(\w+)', Profile) 
```

字符串的`r`开头很重要，因为它将正确处理正则表达式字符。否则，您必须手动转义黑斜线。

`\w+`将匹配一个或多个字母数字字符和下划线。这应该足以满足您的用户名，是吗？

然后像这样设置你的 RequestHandler：

```
class Profile(webapp2.RequestHandler):
    def get(self, username):
        # The value captured in the (\w+) part of the URL will automatically
        # be passed in to the username parameter. 
        # Do the rest of my coding to get and render the data. 
```

# java - Java 中的 comm 实现（comm - 选择或拒绝两个文件共有的行）

> ID：11653351
> 
> 赞同：0
> 
> 时间：2012-07-25T15:32:40.747
> 
> 标签：java, transactions, comm

我有 2 个大文件。其中一个包含原始数据库，其中事务按字母顺序逐行排序，第二个包含增量数据库，事务也按字母顺序排序。我需要的是获取两个文件中的所有常见事务。在 Java 中是否有一种快速且优化的方式来执行此操作？谢谢。

# c# - NUnit FileAssert 在 MemoryStream 和 FileStream 之间失败

> ID：11653353
> 
> 赞同：0
> 
> 时间：2012-07-25T15:32:50.040
> 
> 标签：c#, xml, serialization, stream, nunit

我有一个测试类，它测试两个生成的 xml 文件与一个已经生成且已知良好的文件匹配。比较写入磁盘的文件时测试通过。将仍在内存中的文件与从磁盘读取的已知良好文件进行比较时失败，因为预期的流长了 17 个字节。

测试班

```
[TestFixture]
class XmlExporterTest
{
    private const string ExpectedXMLFile = @"..\..\Projects\EXPECTED FILE.xml";

    private XmlExporter xmlExporter;

    [SetUp]
    public void SetUp()
    {
        // clean up from before, since we might want the info after the tests (if they fail for example)
        string[] filePaths = Directory.GetFiles(@"..\..\tmp");
        foreach (string f in filePaths)
        {
            File.Delete(f);
        }
    }

    // this always fails because the stream length is 17 bytes short
    [Test]
    public void TestExportToXMLStream()
    {
        // test write to stream
        using (Stream actualStream = xmlExporter.ExportToXML(true))
        {
            using (Stream expectedStream = new FileStream(ExpectedXMLFile, FileMode.OpenOrCreate, FileAccess.Read, FileShare.None))
            {
                FileAssert.AreEqual(expectedStream, actualStream);
            }
        }
    }

    // this always passes
    [Test]
    public void TestExportToXMLFile()
    {
        const string actualXMLFile = @"..\..\tmp\project1.xml";
        xmlExporter.ExportToXML(actualXMLFile, true);
        FileAssert.AreEqual(ExpectedXMLFile, actualXMLFile);
    }
} 
```

XML 导出类

```
public class XmlExporter
{
    public void ExportToXML(string filename, bool normalizeZoom)
    {
        iexINSPECTIONXPERT arr = CreateSerializableObject(normalizeZoom);

        //serialize to an XML file
        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("xxx", "http://www.example.com");
        using (TextWriter tr2 = new StreamWriter(filename))
        {
            XmlSerializer sr2 = new XmlSerializer(typeof(Foo));
            sr2.Serialize(tr2, arr, ns);
        }
    }

    /// <summary>
    /// Exports to XML only returning a MemoryStream object.
    /// Note that the stream must be disposed of by the caller.
    /// </summary>
    /// <param name="normalizeZoom"></param>
    /// <returns></returns>
    public MemoryStream ExportToXML(bool normalizeZoom)
    {
        iexINSPECTIONXPERT arr = CreateSerializableObject(normalizeZoom);

        //serialize to an XML file
        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("xxx", "http://www.example.com");
        var stream = new MemoryStream();
        XmlSerializer sr2 = new XmlSerializer(typeof(Foo));
        sr2.Serialize(stream, arr, ns);
        return stream;
    }
} 
```

其他类

```
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://www.example.com", ElementName = "Foo")]
public class Foo
{
    [XmlElementAttribute(Namespace = "", ElementName = "BAR")]
    public BAR fi;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:49:04.237

在写入文件和写入内存流时，您需要使用相同的编码，例如`Encoding.Default`在这两种情况下都使用。

文件：

```
using (TextWriter tr2 = new StreamWriter(filename, false, Encoding.Default)) 
```

记忆：

```
var memory = new MemoryStream();
var writer = new StreamWriter(memory, Encoding.Default);
sr2.Serialize(writer, arr, ns); 
```

# c# - 读取格式奇特的 XML 文件 C#

> ID：11653357
> 
> 赞同：1
> 
> 时间：2012-07-25T15:33:03.780
> 
> 标签：c#, xml

我需要一些帮助来阅读格式奇特的 XML 文件。由于节点和属性的结构方式，我不断遇到 XMLException 错误（至少，这是输出窗口告诉我的；我的断点拒绝触发以便我可以检查它）。无论如何，这是 XML。以前有人经历过这样的事情吗？

```
<ApplicationMonitoring>
<MonitoredApps>
        <Application>
            <function1 listenPort="5000"/>
        </Application>
        <Application>
            <function2 listenPort="6000"/>
        </Application>
</MonitoredApps>
<MIBs>
    <site1 location="test.mib"/>
</MIBs> 
<Community value="public"/>
<proxyAgent listenPort="161" timeOut="2"/>
</ApplicationMonitoring> 
```

干杯

编辑：解析代码的当前版本（文件路径缩短 - 我实际上并没有使用这个）：

```
XmlDocument xml = new XmlDocument();
xml.LoadXml(@"..\..\..\ApplicationMonitoring.xml");

string port = xml.DocumentElement["proxyAgent"].InnerText; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:44:45.030

您在加载 XML 时遇到的问题是`xml.LoadXml`希望您将 xml 文档作为字符串而不是文件引用传递。

尝试使用：

```
xml.Load(@"..\..\..\ApplicationMonitoring.xml"); 
```

基本上在您的原始代码中，您告诉它您的 xml 文档是

```
..\..\..\ApplicationMonitoring.xml 
```

而且我相信您现在可以看到为什么会出现解析异常。:) 我已经用您的 xml 文档和修改后的负载对此进行了测试，它工作正常（除了 Only Bolivian Here 指出的问题，即您的内部 Text 不会返回任何内容。

为了完整起见，您可能想要：

```
XmlDocument xml = new XmlDocument();
xml.Load(@"..\..\..\ApplicationMonitoring.xml");
string port = xml.DocumentElement["proxyAgent"].Attributes["listenPort"].Value;
//And to get stuff more specifically in the tree something like this
string function1 = xml.SelectSingleNode("//function1").Attributes["listenPort"].Value; 
```

请注意在属性上使用 Value 属性，而不是 ToString 方法，它不会做你所期望的。

究竟如何从 xml 中提取数据可能取决于您正在使用它做什么。例如，您可能希望通过执行此操作获取应用程序节点列表以使用 foreach 进行枚举`xml.SelectNodes("//Application")`。

如果您在提取内容时遇到问题，但这可能是另一个问题的范围，因为这只是关于如何加载 XML 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:37:53.013

```
xml.DocumentElement["proxyAgent"].InnerText; 
```

proxyAgent 元素是自动关闭的。InnerText 将返回 XML 元素内部的字符串，在这种情况下，没有内部元素。

您需要访问元素的属性，而不是 InnerText。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:48:32.887

试试这个：

```
string port = xml.GetElementsByTagName("ProxyAgent")[0].Attributes["listenPort"].ToString(); 
```

或者使用 Linq to XML：

[http://msdn.microsoft.com/en-us/library/bb387098.aspx](http://msdn.microsoft.com/en-us/library/bb387098.aspx)

而且...您的 XML 没有格式错误...

# javascript - 如何通过 chrome api 设置下载位置

> ID：11653361
> 
> 赞同：3
> 
> 时间：2012-07-25T15:33:10.177
> 
> 标签：javascript, google-chrome-extension

我正在使用 chrome.experimental.downloads.download() 下载网址，但我无法设置下载位置。所有 url 下载到 chrome 的默认位置。

我已经厌倦了 {url: xxxxxxxxxx, filename"\file\pic.jpg"}，但这不起作用。我不知道如何使用 chrome.experimental.downloads.setDestination() 可能会起作用。

有什么提示吗？

谢谢~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:42:43.400

您目前无法设置目的地，它不是 API 中可用的功能。我能找到的唯一提及`setDestination`是在此扩展的旧 Chromium 票证中，但似乎此功能从未进入当前版本或仍在开发中。

你现在唯一能做的就是`saveAs`在选项对象中设置为 true 并让用户选择保存它的位置。

更新：我刚刚检查了 Chrome 源代码，并且在当前的主干版本`setDestination`中被标记为`NOTIMPLEMENTED`，所以对此并不满意。

# android - 有没有可用的无标记增强现实框架？

> ID：11653369
> 
> 赞同：2
> 
> 时间：2012-07-25T15:33:40.893
> 
> 标签：android, augmented-reality, marker

我正在尝试创建一个使用自定义图像作为 3d 图像叠加的触发器的 android 应用程序。由于我没有为此使用标准的黑白标记，因此它将被归类为无标记。我想知道是否有任何现有的框架或程序可以用来制作/集成到我的应用程序中。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T18:20:21.513

高通有它的开源增强现实框架。他们有一个很好的文档和代码示例来帮助你理解如何使用它。我亲自使用过它，并且像魅力一样工作。更多关于它[在这里](https://developer.qualcomm.com/mobile-development/mobile-technologies/augmented-reality.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:33:03.813

这是关于使用[metaio sdk跟踪配置的文档](https://dev.metaio.com/sdk/tracking-configuration/optical-tracking-technologies/markerless/)

示例代码可在本[教程](https://dev.metaio.com/sdk/tutorials/tracking-samples/)中找到（左侧为 sdk 的免费下载链接）：

本教程帮助了我很多。希望对你也有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:28:45.350

为什么不试试[ARtoolkit for android](http://www.artoolworks.com/products/mobile/artoolkit-for-android/)呢？

它有一个大[社区](http://www.artoolworks.com/community/forum/)。

# c# - 运行 WPF 应用程序框架示例时遇到问题

> ID：11653371
> 
> 赞同：1
> 
> 时间：2012-07-25T15:33:47.343
> 
> 标签：c#, wpf, mvvm, waf-framework-c#

在这里问这个我感到很尴尬，但我想知道是否有人可以快速帮助我，围绕这个的微软文档实际上很差。

Microsoft 在 codeplex 上托管了一个看起来非常简洁的框架，可帮助您构建 MVVM WPF 应用程序，并提供示例说明大部分 MVVM 原则和它们提供的支持代码库。它称为 WPF 应用程序框架，您可以[在此处](http://waf.codeplex.com/releases/view/91505)下载。

我下载了框架及其示例，以及我感兴趣的示例文档（WPF EmailClient），但我在运行示例时遇到了问题。

这是文档的图片：

![WPF 电子邮件客户端文档](../Images/0322948b4f5f1855000420b86bb5ef8c.png)

如您所见，它告诉您只需将 EmailClient.Presentation 项目设置为启动项目并运行。

***然而***

该项目实际上是一个类库，不能设置为启动项目。

我把它变成了一个 Windows 应用程序，但是它需要一个 App.xaml 文件，并且整个项目似乎使用 MEF 作为 IoC 容器，并且依赖项注入了所有视图和 ViewModels 依赖项。

所有这些对我来说意味着启动这个项目需要做很多工作，我只是想知道你们中是否有人知道你应该如何做到这一点。

哦，是的，我正在运行 Windows 8 和 VS2012，但我真的不认为这与它有任何关系。（无论如何，该项目的目标是.Net 4）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:28:32.423

有趣的框架。

总体“InformationManager”示例的应用程序是一个名为“Assembler”的项目

![在此处输入图像描述](../Images/dbdd1f37bbe292624ca1ab9fcbd5ebc4.png)

您需要将其设置为启动项目。确保在运行之前完成整个解决方案的完整构建，否则您将在 app.xaml 中获得 xaml 解析异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:41:00.267

通过更改项目类型，您破坏了解决方案。再次下载示例并在 Visual Studio 中打开解决方案。接下来右键单击您运行的项目并选择`Set as Startup Project.`

然后，当您按 F5 时，它将启动该应用程序，而不是类库。

# java - 序列化和简单地将对象存储在磁盘上有什么区别？

> ID：11653374
> 
> 赞同：5
> 
> 时间：2012-07-25T15:33:54.550
> 
> 标签：java, serialization, serializable, fileoutputstream, objectoutputstream

我对此感到困惑。因为在实现 Serializable 类时，我们需要使用类似的类`FileOutputStream`，`ObjectOutputStream`或者类似的东西。那么我们为什么不直接使用这些类来做一些事情，比如将对象输出到文件，从文件中输入对象来直接维护对象的状态呢？为什么我们要先实现 Serializable，然后再做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:17:39.487

这么理解...

Serializable 是标记接口，表示您的类的对象可以转换为字节流，并在需要时最终返回为 java 对象。最初您可能认为每个类都应该是可序列化的，但考虑到这是不正确的

*Input- 和 OutputStreams 有一些文件句柄可供读取。当流变得不可用时，该文件句柄将关闭。所以这种情况下的序列化没有意义；并且反序列化永远不会恢复该句柄。*

所以这应该回答为什么需要标记为可序列化？

现在实现定义对象应该如何写入或读取的方法；这应该由您定义，因此您需要所有这些流对象和 readObject、writeObject 方法。希望这能让你对这个概念有更多的理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:43:34.923

[Serializable](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)只是一个标记接口，这意味着它仅用于向实际执行序列化的代码发出信号，您（程序员）知道（或希望:-)）此类可以毫无问题地序列化。

序列化本身就是将对象转换为可以存储或传输的东西——即作为字节流。您可以将序列化与冷冻干燥进行比较，冷冻干燥是用于制造雀巢咖啡的技术——所有的水都被去除，只有咖啡精华被存储在一个罐子里——只有一个对象的状态（字段值）被转换为字节流，而不是它的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:19:01.983

正如 fvu 所述，序列化是将类的实例转换为字节数组的过程，反之亦然。并非 Java 中的每个类都可以转换为字节数组（想想`Thread`类，将线程转换为字节数组是没有意义的），这就是您（和我们）需要实现`Serializable`in那些**可以**转换的对象。

`Serializable`只是一个标记接口，它不需要实现任何方法。在大多数情况下，这已经足够好了：只需让您的可序列化对象实现接口，然后使用默认行为。

该默认序列化行为在`ObjectInputStream`和`ObjectOutputStream`类中实现。`FileInputStream`并且`FileOutputStream`是不同的类，用于从磁盘上的文件中读取和写入数据。

如果要将对象写入磁盘，则需要使用以下内容：

```
MyObject obj = ... // your object instance
ObjectOutputStream stream = new ObjectOutputStream(new FileOutputStream("/path/to/file"));
stream.writeObject(obj); 
```

要读取该对象，您需要以下内容：

```
ObjectInputStream stream = new ObjectInputStream(new FileInputStream("/path/to/file"));
MyObject obj = (MyObject) stream.readObject(); 
```

但有时你会想要将一个对象实例序列化/反序列化到内存中，而不是磁盘中，那么你会使用这样的东西：

```
MyObject obj = ... // your object instance
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(obj);
byte[] data = baos.toByteArray(); 
```

我将省略从字节数组中读回对象的部分，因为它非常简单，但考虑到您可能使用的巨大组合将是 JVM 提供的所有不同的输入/输出流。

* * *

上面的示例使用默认的序列化行为。但是，您可能会遇到要序列化的给定类包含对未实现`Serializable`接口的其他类实例的引用的情况，那么我们如何序列化它们呢？我们需要用`transient`修饰符标记这些引用，以便默认的序列化行为将忽略它们，我们需要覆盖默认行为，提供私有`readObject`和`writeObject`在尝试序列化/反序列化对象实例时将调用的方法。

此外，当序列化发生时，某些类可能会提供替换对象（不同可序列化类的对象实例）。该替换对象将包含原始类的状态，该原始类可以从该替换对象中恢复。此行为是通过提供`writeReplace`原始类中的方法和`readReplace`替换类中的方法来实现的。请注意，**原始类和替换类都必须实现`Serializable`接口，但只有替换对象中的数据会被序列化**。

最后但同样重要的是，可以选择完全覆盖实现[`Externalizable`](http://docs.oracle.com/javase/6/docs/api/java/io/Externalizable.html)接口的默认序列化协议。这不是一个标记接口`Serializable`，您必须实现将对象状态转换为数组的方法，反之亦然。您仍将使用`ObjectInputStream`/`ObjectOutputStream`对来序列化（*外部*化??）可*外部*化的对象实例，但现在将您的类转换为字节数组的逻辑不再是 JVM 提供的逻辑，而是您在类中编写的逻辑实现`Externalizable`类。

所有这些信息都在thinksteep 作为评论提供的[链接中。](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:35:25.013

序列化是获取一个对象并将其写入字节数组的过程（稍后从字节数组读取到对象）

ObjectOutputStream 内部使用序列化，它使用序列化将对象转换为 byte[] 并将其写入其输出

# android - Android FTP 下载异常（找不到文件）

> ID：11653388
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:34:21.487
> 
> 标签：android, ftp

我正在尝试通过 FTP 检索文件，但在 LogCat 中出现以下错误：java.io.FileNotFoundException :/config.txt（只读文件系统）

我已验证该文件存在于服务器上，我可以通过在 Web 浏览器中双击它来读取它。

有人可以帮忙吗？这是我正在使用的代码：

```
 FTPClient client = new FTPClient();
 FileOutputStream fos = null;

 try {
     client.connect("xxx.xxx.xxx.xxx");
     client.enterLocalPassiveMode();
     client.login("user", "pass");

     //
     // The remote file to be downloaded.
     //
     String filename = "config.txt";
     fos = new FileOutputStream(filename);

     //
     // Download file from FTP server
     //
     client.retrieveFile("/" + filename, fos);
 } catch (IOException e) {
     e.printStackTrace();
 } finally {
     try {
         if (fos != null) {
             fos.close();
         }
         client.disconnect();
     } catch (IOException e) {
         e.printStackTrace();
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:39:28.630

您无法将文件保存在手机的根目录中。用于`Environment.getExternalStorageDirectory()`获取 SD 卡目录的文件对象并将文件保存在那里。也许为它创建一个目录。为此，您需要许可`android.permission.WRITE_EXTERNAL_STORAGE`。

示例代码：

```
try {
    File external = Environment.getExternalStorageDirectory();
    String pathTofile = external.getAbsolutePath() + "/config.txt";
    FileOutputStream file = new FileOutputStream(pathTofile);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:51:47.813

您正在尝试读取文件，但您已经创建了一个`OutputStream`，您需要创建一个`inputStream`然后从该输入流中读取文件。

这是一篇很棒的文章，附带的代码非常有用。这应该让你朝着正确的方向前进。

[http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)

我希望这有帮助！

祝你好运

# sorting - 使用 GWT 构建无 EXT/GXT/Smart GWT/etc 的可排序表/网格

> ID：11653393
> 
> 赞同：0
> 
> 时间：2012-07-25T15:34:37.443
> 
> 标签：sorting, gwt

对于某些背景，我目前是一名实习生，被要求使用 GWT 创建某种可以按列排序的表/网格。理想情况下，我的老板（他告诉我在 Stack Overflow 上寻求帮助）也希望能够拥有多页数据，但我现在专注于排序部分。

在跳出建议各种 EXT 和 GXT 的东西之前，不幸的是 1）这将用于什么最终将成为他们产品的一部分，因此，商业用途和 2）这是一家非营利公司，所以他们真的不想为许可证付费。我一直在寻找一些我可以使用和理解的东西，感觉像是徒劳的几周。

我正在使用 Eclipse (indigo) 创建 GWT Web 应用程序，但在与 GWT 相关的任何事情上我还是个新手，我确信我的大部分问题是我并不真正了解如何获取和使用代码这在教程中作为示例提供。我已经阅读了我能找到的所有 GWT 文档以及许多教程和展示，但我仍然不真正了解如何做事......这是不幸和令人沮丧的。我也尝试在 Eclipse 中使用 GWT Designer，虽然很整洁，但我不能使用 CellTable 的东西（这当然正是我老板想要的）——我假设是因为我没有它的许可证？现在，我不需要从服务器获取数据（从字面上看，如果我可以将所有人员数据放入 ArrayList 并从那里填充列，我会非常高兴）。

谁能帮我解决这个问题？抱歉，这是一个双重问题（一个我是 GWT 的新手，两个我没有运气弄清楚如何制作可排序的表格/网格），但我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:51:41.960

CellTable 是 GWT 中比较复杂的概念之一。您找对地方了，文档在这里：[https](https://developers.google.com/web-toolkit/doc/2.4/DevGuideUiCellTable) ://developers.google.com/web-toolkit/doc/2.4/DevGuideUiCellTable 。

这应该包含您需要的所有内容，包括带有 EntryPoint 类的所有代码。我认为这只是让这段代码在你的机器上运行并逐行处理它来理解它在做什么的一个例子。

# java - Glassfish 3.1.2.2 两次启动我的 Web 应用程序

> ID：11653394
> 
> 赞同：4
> 
> 时间：2012-07-25T15:34:40.613
> 
> 标签：java, spring, glassfish, stripes

我使用 oracle jdk 1.7.0_5 在 OpenIndiana 151.a3 上运行 Glassfish 3.1.2.2（构建 5）有一个奇怪的行为。

当我部署具有 Spring Web 调度程序和 Stripes servlet 的 Web 应用程序时，我将它们连续初始化两次，例如

```
 PWC1412: WebModule[null] ServletContext.log():Initializing Spring root WebApplicationContext|#]

 INFO  StripesFilter                  - Stripes Initialization Complete. Version: 1.5.6, Build: 1.5.6

 PWC1412: WebModule[null] ServletContext.log():Initializing Spring root WebApplicationContext|#]

 INFO  StripesFilter                  - Stripes Initialization Complete. Version: 1.5.6, 
Build: 1.5.6

 WEB0671: Loading application [my-web] at [/my-web]|#] 
```

如果不是我从 spring 初始化的 blazeds servlet 在第二次初始化时完全失败，那将不是什么大问题。我尝试禁用 blazeds servlet 但这并不能解决双重初始化问题，因为我仍然在日志中收到两次初始化消息。如果没有 blazeds，我的应用程序将无法工作，所以我在这里处于紧要关头。

更新：我已经确认它只发生在 OpenIndiana 主机上，Linux 上的相同配置可以正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-08T12:44:11.530

我们遇到了类似的问题。我们还尝试部署到特定的虚拟服务器，但没有成功。为了解决这个问题，我最终不得不从 domain.xml 中手动删除额外的虚拟服务器：

```
<virtual-server id="admin-server" network-listeners="http-listener-2"></virtual-server> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T10:01:56.137

如果您有多个虚拟服务器：

“如果您部署 Web 应用程序并且未指定任何已分配的虚拟服务器，则该 Web 应用程序将分配给所有当前定义的虚拟服务器”

[http://docs.oracle.com/cd/E18930_01/html/821-2416/ggncs.html](http://docs.oracle.com/cd/E18930_01/html/821-2416/ggncs.html)

但这并没有解决我们的问题。

我们必须删除额外的虚拟服务器才能使其正常工作。这也发生在 3.1.2 上，它不仅仅是一个 Windows 问题。我们也在 Linux 上复制了这个问题。

# c - linux中的sleep命令使用

> ID：11653401
> 
> 赞同：1
> 
> 时间：2012-07-25T15:35:16.530
> 
> 标签：c, linux, performance, sleep, execution-time

作为我学术项目的一部分，我必须执行一个 C 程序。

我想获取程序的执行时间。为此，我必须让 Linux 中的所有其他进程休眠几秒钟。有什么方法可以做到吗？

（我曾尝试`time`在 Linux 中使用该命令，但它无法正常工作：当我执行同一程序时，它显示不同的执行时间。所以我通过查看开始时间和结束时间之间的差异来计算执行时间）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:52:05.953

在调度程序从一个进程通勤到另一个进程的系统中，不可能获得进程执行的*确切时间。*

英特尔处理器插入了一个计算时钟数的寄存器，但即便如此，也无法测量时间。

您可以在 google 上找到一本书的 PDF 格式，“计算机系统：程序员的视角”——在这本书中，有一整章专门用于时间测量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:47:15.673

关于我能想到的最好方法是进入单用户模式，你可以使用

```
# init 1 
```

在几乎任何发行版上。这也将停止 X，您将在原始控制台上。处理杂散鼠标移动造成的中断很可能是您看到的任何可变性的原因之一，所以这是一件好事。

当您想要恢复整个系统时，`init 3`可能是那个，那个或`init 5`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:48:53.380

执行此操作的通常方法是尝试尽可能地使机器停顿，然后进行几次测量并对它们进行平均。建议放弃第一次读取，因为这可能涉及缓存的填充。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:35:56.670

There will always be a difference in execution time for things no matter how many processes you shut down, polling, IO, background daemons all affect execution priority.

The academic approach would be to run a sizeable sample and take statistics, you might also want to take a look at sar to log the background. To invalidate any readings you might take

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:54:56.733

使用时间命令。总和 user + sys 将为您提供程序直接使用 CPU 的时间加上系统代表您的程序使用 CPU 的时间。我想这是你想知道的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T17:58:53.063

尝试使用`nice -n 20`. 它可能有助于使其他进程更安静。

[不错的手册页](http://www.manpagez.com/man/1/nice/)

# java - 如何使用elasticsearch搜索数组中的字段

> ID：11653403
> 
> 赞同：0
> 
> 时间：2012-07-25T15:35:17.070
> 
> 标签：java, elasticsearch

我正在使用索引数组字段 json 作为，

```
"productdetailsarray":
{
"properties":{
"producttone" : { "type" : "integer", "store" : "yes", "precision_step" : "8" },
"productsaleid" : { "type" : "integer", "store" : "yes", "precision_step" : "8" },
"productcoverage" : { "type" : "integer", "store" : "yes", "precision_step" : "8" },
"productdataid" : { "type" : "integer", "store" : "yes", "precision_step" : "8" },
"productid" : { "type" : "integer", "store" : "yes", "precision_step" : "8" }}
} 
```

如何搜索数组内的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:42:18.527

使用像 GSon 这样的库简单地解析 JSon：

```
MyClassToModelTheData data = new Gson().fromJson(theJsonString, MyClassToModelTheData.class); 
```

在对象形式中，您可以使用任何标准 Java 构造来搜索数据。

如果使用 Maven，可以使用以下方式导入 GSon：

```
<!-- For parsing JSon -->
<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>1.7.1</version>
</dependency> 
```

# c# - Oledb 和视觉 foxpro

> ID：11653407
> 
> 赞同：1
> 
> 时间：2012-07-25T15:35:25.527
> 
> 标签：c#, oledb, visual-foxpro

如何在 c#（使用 oledb）中为 visual fox pro(.dbf) 创建表时为字段设置索引。我想为一个表创建多个索引，其中一些索引是（field1+field2）之类的表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T17:59:23.113

这是一个例子：

```
using(var connection = new OleDbConnection(@"provider=vfpoledb;data source=c:\")) {
    using(var command = connection.CreateCommand()) {
        connection.Open();
        command.CommandText = "CREATE TABLE Table1(Column1 v(10), Column2 v(10))";
        command.ExecuteNonQuery();
        command.CommandText = "EXECSCRIPT([USE Table1 IN SELECT(0) EXCLUSIVE])";        
        command.ExecuteNonQuery();
        command.CommandText = "EXECSCRIPT([INDEX ON Column1 TAG Tag1])";
        command.ExecuteNonQuery();
        command.CommandText = "EXECSCRIPT([INDEX ON Column1 + Column2 TAG Tag2])";
        command.ExecuteNonQuery();          
        connection.Close();
    }
} 
```

# google-apps-script - 独立的 webapp 和浏览器滚动条

> ID：11653410
> 
> 赞同：5
> 
> 时间：2012-07-25T15:35:31.050
> 
> 标签：google-apps-script

**编辑（最后一个！:-)：**解决方法是将整个 UI 放在 absolutePanel 中（谢谢兆字节1024）。这并不完美，因为我不能在整个显示区域中使用背景颜色，但它至少更舒适。（此新版本更新了在线测试应用程序的链接）和最终版本的屏幕截图......好多了:-)

![在此处输入图像描述](../Images/bb2f079f84b11f09207853d43a52dc35.png)

* * *

我有一个用 GAS 编写的独立 web 应用程序，它有一个滚动面板，整个 UI 相当小，只占用浏览器窗口中显示区域的一部分（甚至很小）。

困扰我的是，我在浏览器窗口中总是同时有水平和垂直滚动条，当我使用鼠标或触控板在 UI 窗口中滚动滚动面板时，它会干扰 UI 内容......所以，我的问题是：有没有办法避免这种情况，告诉浏览器不需要添加滚动条或定义更小的“webapp 区域”？

请注意，只要最后一个小于浏览器窗口，这些滚动条的大小就完全独立于 UI 面板大小。

这是一个屏幕截图来说明我在说什么（我明白这是一个细节，但它使这个应用程序的使用有时只是不舒服;-) 这里也是一个[应用程序的公共版本的](https://script.google.com/macros/s/AKfycby1CQyMYZslTV4lRfjjLNWXiDIr2REiyV8PS3xfQ7ORFW5ONpti/exec)链接。 ![在此处输入图像描述](../Images/fa90d2aa7fc6396c49d5bf4c3d614c1a.png)

我想解决的另一个细节是这个 UI 上部的字体颜色：这些是我设置为“只读”的文本框，因为我不希望它们是可编辑的（它会给用户一种错觉可以修改不是这种情况的数据）并且这种只读状态的副作用是字体是“灰色的”......有没有办法避免这种情况，同时在这个“假表”上保持相同的方面（除了颜色） ?

**编辑：**找到关于文本颜色的第二个问题：`.setStyleAttribute('color','#000000')`就这么简单......我太愚蠢了，没有早点找到它;-)

**注意 2** *：有趣的是，使用 GUI 构建器设计的 UI 不会遇到同样的问题......*

**EDIT2**：这里是 doGet 部分的代码（修改为在没有功能的情况下运行但显示）：

```
var key='0AnqSFd3iikE3dFV3ZlF5enZIV0JQQ0c1a3dWX1dQbGc'
var ss = SpreadsheetApp.openById(key)
var sh = ss.getSheetByName('Sheet1')
var idx = 0
var data = ss.getDataRange().getValues();
var len = data.length;
var scrit = ['All fields','Name','Lastname','Postal Adress','ZIP code','City','Country','email','phone#']
 //public version

function doGet() {
   var app = UiApp.createApplication().setTitle("BrowseList Test")
       .setHeight(420).setWidth(800).setStyleAttribute("background-color","beige").setStyleAttribute('padding','20');
    var title = app.createHTML('<B>DATABASE User Interface</B>').setStyleAttribute('color','#888888');
    app.add(title);
    var scroll = app.createScrollPanel().setPixelSize(750,150)
    var vpanel = app.createVerticalPanel();
    var cell = new Array();
    var cellWidth = [45,135,150,250,50,100]
    var row = new Array();
    var cHandler = app.createServerHandler('showpicked').addCallbackElement(scroll);
    for(vv=0;vv<15;++vv){
      row[vv]=app.createHorizontalPanel();
      vpanel.add(row[vv]);
       for(hh=0;hh<cellWidth.length;++hh){
        cell[hh+(vv)*cellWidth.length]=app.createTextBox().setWidth(cellWidth[hh]+"").setTitle('Click to show below')
        .setReadOnly(true).setId((hh+vv*cellWidth.length)+'').addClickHandler(cHandler).setStyleAttribute('background','#eeeeff').setStyleAttribute('color','#000000');
        row[vv].add(cell[hh+(vv)*cellWidth.length])
        }
      }
app.add(scroll.add(vpanel))
// Initial populate
      var resindex = new Array()     
    for(vv=0;vv<15;++vv){
        resindex.push(vv+1)
       for(hh=0;hh<cellWidth.length;++hh){
         var rowpos=vv+1+idx
         var cellpos = hh+vv*cellWidth.length
        cell[cellpos].setValue(data[rowpos][hh]);
        }
      }
  var rHandler = app.createServerHandler('refresh');
//
  var slist = app.createListBox().setName('critere').setId('slist').addClickHandler(rHandler);
    for(nn=0;nn<scrit.length;++nn){
      slist.addItem(scrit[nn]);
      }
  var search = app.createTextBox().setName('search').setId('search').setTitle('becomes yellow if no match is found');
  var modeS = app.createRadioButton('chkmode','strict').setId('chkmodes').addClickHandler(rHandler);
  var modeG = app.createRadioButton('chkmode','global').setValue(true).setId('chkmodeg').addClickHandler(rHandler);
  var letter = app.createRadioButton('show','letter').setValue(true).setId('letter').addClickHandler(rHandler);
  var raw = app.createRadioButton('show','raw data').setId('raw').addClickHandler(rHandler);
  var index = app.createHTML('found/'+len).setId('index').setStyleAttribute('color','#aaaaaa');
  var grid = app.createGrid(2,10).setWidth('750');
  grid.setWidget(1, 0, app.createLabel('search'));
  grid.setWidget(1, 1, search);
  grid.setWidget(1, 2, modeS);
  grid.setWidget(1, 3, modeG);
  grid.setWidget(1, 5, slist);
  grid.setWidget(1, 6, app.createLabel('show mode'));
  grid.setWidget(1, 7, letter);
  grid.setWidget(1, 8, raw);
  grid.setWidget(1, 9, index);
  app.add(grid);

  var hidden = app.createHidden('hidden').setId('hidden').setValue(resindex.toString());
  cHandler.addCallbackElement(grid).addCallbackElement(scroll).addCallbackElement(hidden);
  var result = app.createRichTextArea().setPixelSize(745,160).setId('result')
  .setStyleAttribute('background','white').setStyleAttribute('font-family',"Arial, sans-serif")
  .setStyleAttribute('font-size','small');
  result.setHTML('test ui');
  app.add(result).add(hidden);
  var sHandler = app.createServerHandler('searchH').addCallbackElement(grid).addCallbackElement(scroll);
  search.addKeyUpHandler(sHandler);
  rHandler.addCallbackElement(grid).addCallbackElement(scroll);
  slist.addChangeHandler(rHandler);

return app
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:56:52.263

摆脱滚动条的一种可能解决方案是使用中间`Absolute`面板。以下代码具有滚动条。

```
function doGet() {
  var app = UiApp.createApplication();
  var panel = app.createScrollPanel().setSize('100%', '100%');
  var content = app.createButton('Scroll Bars').setSize('100%', '100%');
  panel.setWidget(content);
  app.add(panel);
  return app;
} 
```

而且下面的代码没有滚动条

```
function doGet() {
  var app = UiApp.createApplication();
  var panel = app.createScrollPanel().setSize('100%', '100%');
  var subPanel = app.createAbsolutePanel().setSize('100%', '100%');
  var content = app.createButton('No Scroll Bars').setSize('100%', '100%');
  subPanel.add(content);
  panel.setWidget(subPanel);
  app.add(panel);
  return app;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T05:43:47.077

当在 Google 站点中嵌入 HTMLService 网络应用程序时，看起来 iFrame 小工具必须比应用程序高度大 50 像素，垂直滚动条才会消失。假设同样的事情适用于 UiApp。

# android - Android RSS 解析太慢 - 做错了什么？

> ID：11653415
> 
> 赞同：0
> 
> 时间：2012-07-25T15:35:39.367
> 
> 标签：android, xml, performance, parsing

我遵循了有关如何在 Android 应用程序上解析 XML(RSS) 文件的教程。下面是我的代码，它正在运行，但需要很长时间。我是在做不正确的事情还是会减慢它的速度？加载 30-35 篇文章需要 7-10 秒……看起来太长了，而且用户每次切换部分时都等待太久（这会引入另一个提要）

我确实有办法每小时只提取新数据......等等......但第一次通常仍然需要 10 秒，这 - 到那时，用户认为他们的应用程序已经崩溃......等等。

*   我在 AsyncTask 中这样做
*   我现在不下载图像
*   这是代码的慢部分（不是互联网，或显示......等）

**TLDR：**
这段代码太慢了——为什么？：

```
package com.mysite.utilities;

import java.util.ArrayList;

import org.xml.sax.Attributes;
import org.xml.sax.helpers.DefaultHandler;

public class RSSHandler extends DefaultHandler
{

    // creats a news item class to hold data within loop
    public class NewsItem
    {
        public String title;
        public String subhead;
        public String link;
        public String byline;
        public String description;
        public String storytext;
        public String cmsstoryid;
        public String pubDate;
        public String keyword;
        public String category;
        public String subcategory;
        public String slotreference;
        public String lastModTime;
        public ArrayList<PhotoItem> photos = new ArrayList<PhotoItem>();

        @Override
        public String toString()
        {
            return title;
        }
    }

    //creates a photo item class to hold image data within loop
    public class PhotoItem
    {
        public String photoid; //tribs id
        public String caption;
        public String height;
        public String width;
        public String photo; //full path to photo
        public String thumbnail; //full path to thumbnail
        public int articleid;
        public String photolastmodified;

        @Override
        public String toString()
        {
            return photo;
        }
    }

    //creates instances of classes to be used in loop
    private StringBuffer buf; //to hold element characters with loop
    private ArrayList<NewsItem> feedItems;
    private NewsItem item;
    private PhotoItem photoitem;

    //initialize variables of whether or not it's within an item (or photo item)
    private boolean inItem = false;
    private boolean inPhotoItem = false;

    //
    public ArrayList<NewsItem> getParsedItems() {
        return feedItems;
    }

    //Called at the head of each new element
    @Override
    public void startElement(String uri, String name, String qName, Attributes atts)
    {
        //creates an array of news items
        if ("channel".equals(name))
        {
            feedItems = new ArrayList<NewsItem>();
        }
        //creates a news item and toggles "in news item" to on
        else if ("item".equals(name))
        {
            item = new NewsItem();
            inItem = true;
        }
        //creates a photo item and toggles "in photo item" to on
        else if ("image".equals(name))
        {
            photoitem = new PhotoItem();
            inPhotoItem = true;
        }
        //starts a new string buffer if matches an elemnt we want from news item
        else if (
            ("title".equals(name) ||
            "subhead".equals(name) ||
            "link".equals(name) ||
            "byline".equals(name) ||
            "description".equals(name) ||
            "storytext".equals(name) ||
            "keyword".equals(name) ||
            "cmsstoryid".equals(name) ||
            "pubDate".equals(name) ||
            "category".equals(name) ||
            "subcategory".equals(name) ||
            "lastModTime".equals(name) ||
            "slotreference".equals(name)
            )
            && inItem)
        {
            buf = new StringBuffer();
        }
        //starts an a new string buffer if it matches an element we want from image item
        else if(
            ("caption".equals(name) ||
            "photoid".equals(name) ||
            "height".equals(name) ||
            "width".equals(name) ||
            "photo".equals(name) ||
            "photolastmodified".equals(name) ||
            "thumbnail".equals(name)
            )
            && inPhotoItem)
        {
            buf = new StringBuffer();
        }
    }

    //Called at the tail of each element end
    @Override
    public void endElement(String uri, String name, String qName)
    {       
        if ("item".equals(name))
        {
            feedItems.add(item);
            inItem = false;
        }
        else if ("image".equals(name))
        {
            try {
                item.photos.add(photoitem);
            } catch (Exception e) {
                System.out.println(e);
            }
            inPhotoItem = false;
        }
        else if (inItem)
        {
            if (inPhotoItem)
            {
                if ("caption".equals(name)) { photoitem.caption = buf.toString(); }
                else if ("photoid".equals(name)) { photoitem.photoid = buf.toString(); }
                else if ("height".equals(name)) { photoitem.height = buf.toString(); }
                else if ("width".equals(name)) { photoitem.width = buf.toString(); }
                else if ("photo".equals(name)) { photoitem.photo = buf.toString(); }
                else if ("photolastmodified".equals(name)) { photoitem.photolastmodified = buf.toString(); }
                else if ("thumbnail".equals(name)) { photoitem.thumbnail = buf.toString(); }
            }
            else if ("title".equals(name)) { item.title = buf.toString(); }
            else if ("subhead".equals(name)) { item.subhead = buf.toString(); }
            else if ("link".equals(name)) { item.link = buf.toString(); }
            else if ("byline".equals(name)) { item.byline = buf.toString(); }
            else if ("description".equals(name)) { item.description = buf.toString(); }
            else if ("storytext".equals(name)) { item.storytext = buf.toString(); }
            else if ("keyword".equals(name)) { item.keyword = buf.toString(); }
            else if ("cmsstoryid".equals(name)) { item.cmsstoryid = buf.toString(); }
            else if ("pubDate".equals(name)) { item.pubDate = buf.toString(); }
            else if ("category".equals(name)) { item.category = buf.toString(); }
            else if ("subcategory".equals(name)) { item.subcategory = buf.toString(); }
            else if ("lastModTime".equals(name)) { item.lastModTime = buf.toString(); }
            else if ("slotreference".equals(name)) { item.slotreference = buf.toString(); }

        }
        else
        {
            buf = null;
        }

    }

    //Called with character data inside elements
    @Override
    public void characters(char ch[], int start, int length)
    {
        //Don't bother if buffer isn't initialized
        if(buf != null)
        {
            for (int i=start; i<start+length; i++)
            {
                buf.append(ch[i]);
            }
        }
    }
} 
```

* * *

**到目前为止我更新的代码（仍然没有速度增加）：**

```
package com.sltrib.utilities;

import java.util.ArrayList;

import org.xml.sax.Attributes;
import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;

public class RSSHandler extends DefaultHandler
{

    // creats a news item class to hold data within loop
    public class NewsItem
    {
        public String title;
        public String subhead;
        public String link;
        public String byline;
        public String description;
        public String storytext;
        public String cmsstoryid;
        public String pubDate;
        public String keyword;
        public String category;
        public String subcategory;
        public String slotreference;
        public String lastModTime;
        public ArrayList<PhotoItem> photos = new ArrayList<PhotoItem>();

        @Override
        public String toString()
        {
            return title;
        }
    }

    //creates a photo item class to hold image data within loop
    public class PhotoItem
    {
        public String photoid; //tribs id
        public String caption;
        public String height;
        public String width;
        public String photo; //full path to photo
        public String thumbnail; //full path to thumbnail
        public int articleid;
        public String photolastmodified;

        @Override
        public String toString()
        {
            return photo;
        }
    }

    //creates instances of classes to be used in loop
    private StringBuilder buf; //to hold element characters with loop
    private ArrayList<NewsItem> feedItems;
    private NewsItem item;
    private PhotoItem photoitem;

    //initialize variables of whether or not it's within an item (or photo item)
    private boolean inItem = false;

    private int currentTagId = 0;

    //
    public ArrayList<NewsItem> getParsedItems() {
        return feedItems;
    }

    @Override
    public void startDocument()
    {
        feedItems = new ArrayList<NewsItem>(); //creates an array to hold feed items
    }

    //Called at the head of each new element
    @Override
    public void startElement(String uri, String name, String qName, Attributes atts)
    {
        //gets the id of the current tag
        currentTagId = 0;
        String tmpId = atts.getValue("id");
        if(tmpId != null)
        {
            currentTagId = Integer.parseInt(tmpId);
        }

        //creates a news item
        if (currentTagId == 99) // <item>
        {
            item = new NewsItem();
            inItem = true;
        }

        //creates a photo item
        else if (currentTagId == 21) { // <image>
            photoitem = new PhotoItem();
        }

        //creates a string builder if it's a tag within an article or a photo
        else if (inItem && currentTagId > 0 && currentTagId < 29)
        {
            buf = new StringBuilder();
        }
    }

    //Called at the tail of each element end
    @Override
    public void endElement(String uri, String name, String qName)
    {

        // it's not getting the tag id - how?

        Log.d("XML", "endElement:" + Integer.toString(currentTagId));

        if (currentTagId == 99)  // </item>
        {
            Log.d("XML", "Should be adding item: " + item.title);
            feedItems.add(item);
            inItem=false;
        }

        else if (currentTagId == 21) // </image>
        {
            try {
                item.photos.add(photoitem);
            } catch (Exception e) {
                System.out.println(e);
            }
        }
        else
        {
            switch(currentTagId)
            {
                case 1: item.title = buf.toString(); break;
                case 2: item.subhead = buf.toString(); break;
                case 3: item.link = buf.toString(); break;
                case 4: item.byline = buf.toString(); break;
                case 5: item.description = buf.toString(); break;
                case 6: item.storytext = buf.toString(); break;
                case 11: item.cmsstoryid = buf.toString(); break;
                case 14: item.pubDate = buf.toString(); break;
                case 15: item.lastModTime = buf.toString(); break;
                case 16: item.keyword = buf.toString(); break;
                case 17: item.category = buf.toString(); break;
                case 18: item.subcategory = buf.toString(); break;
                case 19: item.slotreference = buf.toString(); break;
                case 22: photoitem.caption = buf.toString(); break;
                case 23: photoitem.photoid = buf.toString(); break;
                case 24: photoitem.photolastmodified = buf.toString(); break;
                case 25: photoitem.height = buf.toString(); break;
                case 26: photoitem.width = buf.toString(); break;
                case 27: photoitem.photo = buf.toString(); break;
                case 28: photoitem.thumbnail = buf.toString(); break;
                default: if(!inItem) buf = null;
            }
        }
    }

    //Called with character data inside elements
    @Override
    public void characters(char ch[], int start, int length)
    {
        if(buf != null)
        {
            String chars = new String(ch, start, length); // get all text value inside the element tag
            chars = chars.trim(); // remove all white-space characters
            buf.append(chars);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:44:59.177

也许你已经这样做了，但我只是想重申这应该在另一个线程上完成。如果您显示进度指示器（微调器）并保持 GUI 响应，用户不会认为应用程序已崩溃。

如果您不在后台线程上执行此操作，则可能会人为地使其变慢，因为系统正在努力保持用户界面正常运行。

至于为什么这很慢，有大量的分支。您拥有的 if 语句越多，拥有的 else （等）越多，分支预测器执行其工作的难度就越大。

另外，我不知道您是否在此处下载图像，但如果是，则应在检索到文本数据并将其显示给用户后异步完成（以使用户界面更具响应性）。

# php - 指定为字符串的汇总日期

> ID：11653417
> 
> 赞同：0
> 
> 时间：2012-07-25T15:35:43.420
> 
> 标签：php, date

```
$date = '2012-07-25 00:05';
$delay = '25'; 
```

有没有一种简单的方法可以将 $delay 添加到 $date 中？结果必须是“2012-07-25 00:30”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:37:33.173

这是一种方法：

```
 $new_date = date("Y-m-d H:i", strtotime($date . " +" . $delay . " minutes")); 
```

这是另一个：

```
$date = new DateTime($date);
$date->add(new DateInterval('P'.$delay.'i'));
$new_date = $date->format('Y-m-d H:i') 
```

# sql - 新手 - where 单词附近有不正确的语法错误

> ID：11653418
> 
> 赞同：1
> 
> 时间：2012-07-25T15:35:54.357
> 
> 标签：sql

```
SELECT
   o.id, o.Name, o.StageName, o.[Type], o.Account__c, o.SalesPerson__c,
   o2.AccountId__c,o2.Sales_Person__c, o2.InvoiceDate__c
FROM customers.dbo.sales as o 
INNER JOIN customers.dbo.account as a on a.Id = o.AccountId 
INNER JOIN
( 
    Select MAX(Id)Id, AccountId 
    FROM customers.dbo.order__c
    WHERE Sales_Person__c <> NULL
) as o1 
INNER JOIN Customers.dbo.Order__c as o2 on o2.Id = o1.Id
WHERE (o.SalesPerson__c = NULL) 
AND (o.[Type] = 'Renewal') 
AND (o.StageName NOT LIKE 'Closed%') 
```

不知道我做错了什么。我收到以下错误：关键字“Where”附近的语法不正确

我正在尝试获取每个帐户的最新订单。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:37:49.737

您的问题是`<> NULL` and `= NULL`，您需要使用`IS NULL`or `IS NOT NULL`。根据您的 RDBMS，您还需要`GROUP BY`在子查询中使用`MAX()`：

```
select o.id
    , o.Name
    , o.StageName
    , o.[Type]
    , o.Account__c
    ,o.SalesPerson__c
    , o2.AccountId__c
    , o2.Sales_Person__c
    , o2.InvoiceDate__c
from customers.dbo.sales as o 
Inner Join customers.dbo.account as a 
    on a.Id = o.AccountId 
INNER JOIN
(
    Select MAX(Id)Id, AccountId 
    from customers.dbo.order__c
    where Sales_Person__c IS NOT NULL
    GROUP BY AccountId -- depending on the RDBMS you need a GROUP BY
) o1 
INNER JOIN Customers.dbo.Order__c  o2 
    on o2.Id = o1.Id
Where (o.SalesPerson__c IS NULL) 
    and (o.[Type] = 'Renewal') 
    and (o.StageName NOT LIKE 'Closed%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:54:31.383

您称为 o1 的内部联接不会加入任何内容。我不确定你到底想做什么，但我认为如果你删除`inner join`for o1，而是`exists`在你的`where`子句中使用它，它可能会更好。您还必须更改您的 o2 join 以 join on `o2.AccountId = a.Id`，我认为这是您正在尝试做的。

```
select o.id
, o.Name
, o.StageName
, o.[Type]
, o.Account__c
, o.SalesPerson__c
, o2.AccountId__c
, o2.Sales_Person__c
, o2.InvoiceDate__c
from customers.dbo.sales as o 
Inner Join customers.dbo.account as a 
    on a.Id = o.AccountId 
INNER JOIN Customers.dbo.Order__c as o2 
    on o2.AccountId = a.Id
Where (o.SalesPerson__c is NULL) 
and (o.[Type] = 'Renewal') 
and (o.StageName NOT LIKE 'Closed%')
and exists(
    Select MAX(Id) as id 
    from customers.dbo.order__c c
    where c.Sales_Person__c is not NULL
    and id = o2.id) 
```

# scala - 试图理解 Scala In Depth Book 中的优先规则 4

> ID：11653421
> 
> 赞同：1
> 
> 时间：2012-07-25T15:36:06.807
> 
> 标签：scala, operator-precedence

我试图深入了解 Joshua Suareth 的书 Scala 中第 93 页上关于绑定优先级的第四条规则。

根据这个规则：

> 由不在定义出现的源文件中的包子句提供的定义具有最低优先级。

我打算测试的正是这条规则。

所以我开始尝试遵循 Josh 在第 94 页上的思路。他创建了一个名为 externalbindings.scala 的源文件，我也做了同样的事情，对其进行了一些更改，如下所示

```
package com.att.scala

class extbindings {
  def showX(x: Int): Int = {
    x
  }

  object x1 {
    override def toString = "Externally bound obj object in com.att.scala"
  }
} 
```

接下来，他要求我们创建另一个文件，以便我们测试上述规则。我创建了一个名为 priority.scala 的文件：

```
package com.att.scala

class PrecedenceTest { //Josh has an object here instead of a class

  def testPrecedence(): Unit = { //Josh has main method instead of this
    testSamePackage()
    //testWildCardImport()
    //testExplicitImport()
    //testInlineDefinition()
  }

  println("First statement of Constructor")
  testPrecedence
  println("Last statement of Constructor")

  def testSamePackage() {
    val ext1 = new extbindings()
    val x = ext1.showX(100)
    println("x is "+x)
    println(obj1) // Eclipse complains here
  }
} 
```

`<package-name>.<object-name>.testSamePackage`现在，Josh 只需在 REPL 上执行该方法即可打印出示例中对象的值。他的输出是：

> 包测试中的外部绑定 x 对象

在我的版本中，文件位于 Eclipse 中，并且我有嵌入式 Scala 解释器。

Eclipse 在这里抱怨：`println(obj)`，它说：`not found value obj1`

我在设置测试文件时做错了什么吗？我希望能够测试我上面提到的规则并获得输出：

> com.att.scala 包中的外部绑定 obj 对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:52:44.393

我没有读过这本书，因此我不确定你的代码是否显示了这本书想要告诉你的内容。

尽管如此，错误消息是正确的。`obj1`找不到，因为它不存在。在您的代码中，它被称为`x1`. 因为它是您的成员，所以`extbindings`您必须以此类成员的身份访问它：

```
println(ext1.x1) 
```

如果`x1`定义在 class 之外`extbinding`，在 package 范围内`com.att.scala`，你可以直接访问它：

```
println(x1) 
```

如果它是在另一个包中定义的，则必须将包名放在前面：

```
println(com.att.scala2.x1) 
```

为了简化一些你可以导入的东西`x1`：

```
import ext1.x1
println(x1) 
```

最后是改进代码的提示：名称类型在`UpperCamelCase`: `extbindings`-> `Extbindings`, `x1`->`X1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:56:26.607

如果用类替换单例对象，则需要创建该类的实例。

# php - PHP如何删除所有其他运算符，除了 -

> ID：11653423
> 
> 赞同：0
> 
> 时间：2012-07-25T15:36:17.943
> 
> 标签：php

我想删除除 - 之外的所有其他运算符。我从事以下工作，但被困在这里。

```
$s1 = "Hello@*&^%$#@!)({}[]?.,<> dis$ is. testing -";
$s2 = "- i love% the way. it, works";

for($ii=0;$ii<3;$ii++){

$from = array('/\(|\)/','/\d+ml|\d+g/','/\s+/'); 
$to = array('','','-'); 

$sample=${'s' . $ii}; 

$sample = strtolower(trim(preg_replace($from,$to,$sample),'-')); 
echo $sample."<br>";

} 
```

请在这方面帮助我。

**需要输出**

```
hello-dis-is-testing
i-love-the-way-it-works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:39:44.993

```
$sample = trim(preg_replace('/\\W+/i', '-', $s1), '-'); 
```

此正则表达式用破折号替换除字母和数字之外的所有内容，修剪删除尾随和前面的破折号

# java - 打开新终端，ssh 到远程主机并在远程主机上运行程序。所有输出都将在新打开的终端上查看

> ID：11653425
> 
> 赞同：0
> 
> 时间：2012-07-25T15:36:24.233
> 
> 标签：java, terminal, runtime.exec

更具体地说，我真正想做的是打开两个新终端。从 terminal_1 我想 ssh @host1 并将程序 1 运行到 host1。从 terminal_2 我想 ssh @host2 并将程序 2 运行到 host2。我需要在终端 1 上查看程序 1 的输出，在终端 2 上查看程序 2 的输出。

（我设法打开了 xterm 和 ssh @host。我试图传递第二个命令“&&java echo_1”，但它什么也没做）

这是代码：

```
import java.io.*;

public class multi1 implements Runnable {

    public void run() {

    try {
        String ss = null;
            Runtime obj = null;
        String[] newcmd = new String[]{"/usr/bin/xterm","-hold","-e","ssh andreas@192.168.0.0&&java echo_1"};

        Process p = Runtime.getRuntime().exec(newcmd);

            BufferedReader stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
            BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));

            while ((ss = stdInput.readLine()) != null) {
                    System.out.println(ss);
            }
        }catch (IOException e) {
            System.out.println("FROM CATCH" + e.toString());
        }
    }

    public static void main(String[] args) throws Exception {
        Thread th = new Thread(new multi1());
        th.start();
    //Thread th2 = new Thread(new multi1());
    //th2.start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:38:12.123

我宁愿使用[jsch](http://www.jcraft.com/jsch/)或其他 ssh 库，并且不使用终端和 exec。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:49:01.583

我立即担心的一个问题是您没有从生成的进程中处理标准输出/标准错误。如果你不这样做，你很可能会阻塞进程和进程本身的输出。有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec/882795#882795)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T10:02:37.527

```
BufferedReader stdError = .. 
```

.. Eclipse 会标记警告，因为它似乎不再被引用。这反过来表明错误流没有被消耗。这样做。

有关使用 的更多提示，请参阅[runtime.exec 信息](https://stackoverflow.com/tags/runtime.exec/info)`Process`中链接的文章。[页](https://stackoverflow.com/tags/runtime.exec/info)。此外，最好使用 a `ProcessBuilder`，它可以合并`System.out`and `System.err`，从而更容易通过一个循环来使用两者。

# php - 在php中的404页面之后继续引用URL

> ID：11653430
> 
> 赞同：0
> 
> 时间：2012-07-25T15:36:33.267
> 
> 标签：php, apache, .htaccess

我设置了一个 404 页面，它可以正常工作。我正在从 URL 中提取“错误页面”并使用它来创建会话，因为我需要将它作为变量传递。我的 404 有指向不同页面的链接，即使存在以下页面，我也希望始终保留引用 URL。例如：

1.  www.mysite.com/100
2.  100 不存在并转到我的 404。 url 显示为步骤 1。
3.  在我的 404 中，我有指向其他页面的链接，例如 www.mysite.com/link.php，但我希望它是 www.mysite.com/100/link.php

我怎样才能做到这一点？

这就是我传递我需要的变量的方式：

```
$page2 = $_SERVER['REDIRECT_URL'];
$str2 = substr($page2, 1);
session_start();
$_SESSION['DIST']=$str2; 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:52:03.407

您可以使用 $_GET 通过 URL 传递变量。然后重写

```
www.mysite.com/link.php?redirect_url=100 
```

到

```
www.mysite.com/100/link.php 
```

使用 .htaccess

```
RewriteEngine on
RewriteRule ^([0-9]*)/link.php$ link.php?redirect_url=$1 
```

# c# - 根据两个子节点值从 XML 文件中获取值

> ID：11653434
> 
> 赞同：0
> 
> 时间：2012-07-25T15:36:41.703
> 
> 标签：c#, xml, visual-studio-2008, xpath

我有一个 xml 文档，需要 XPath 表达式来根据两个子节点值选择节点值。XML 文件结构为：

```
<catalog>
<book id="123"> 
<title>Book123</title>
<author>Author123</author>
<genre>Genre123</genre>
</book>
.
.
.
</catalog> 
```

我想根据书名和作者选择书。我使用了这个表达式，但它显示了一个异常，表示这个表达式有一些无效的令牌。我没有弄清楚如何解决这个问题。表达式为：

```
"book[title='" + txtBookTitle.Text + "' AND author='" + txtBookAuthor.Text + "']" 
```

任何机构在这方面帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:02:40.147

你可以使用

```
//book[title[text()='Book123'] and author[text()='Author123']] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:41:56.193

尝试

```
//book[title='Book123' and author='Author123'] 
```

作为您的 XPath。可能值得检查您是否使用 .Trim() 修剪了输入中的空格，例如

```
TextBox1.Text.Trim() 
```

# scala - 如何从另一个 sbt 项目中引用外部 sbt 项目？

> ID：11653435
> 
> 赞同：52
> 
> 时间：2012-07-25T15:36:47.477
> 
> 标签：scala, sbt

我有一个 Scala 应用程序和一个公共核心库的以下设置：root

```
 -> /ApplicationA
   -> /project
     -> /build.sbt
 -> /CoreLibrary
   -> /project
     -> /build.sbt 
```

我想将 ApplicationA 的引用添加到 CoreLibrary à la Eclipse 项目引用，以便每次 CoreLibrary 更改 ApplicationA 时也会构建。我已经为 ApplicationA 尝试了 build.Scala 的以下内容：

```
 val core = Project(
      id = "platform-core",
      base = file("../CoreLibrary"))

  val main = Project(id = "application, base = file(".")).dependsOn(core) 
```

但是，在编译 ApplicationA SBT 时会抱怨依赖项只能是子目录！！：

```
java.lang.AssertionError: assertion failed: Directory C:\git\CoreLibrary is not contained in build root C:\git\ApplicationA 
```

这看起来很简单，拥有这个项目依赖的正确方法是什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-25T16:03:08.577

您可以像这样对您的项目进行源依赖：

```
 lazy val core = RootProject(file("../CoreLibrary"))

 val main = Project(id = "application", base = file(".")).dependsOn(core) 
```

我有一个多模块播放构建的工作示例：[https ://github.com/ahoy-jon/play2MultiModule/blob/master/playapp/project/Build.scala](https://github.com/ahoy-jon/play2MultiModule/blob/master/playapp/project/Build.scala)

但我认为正确的方法（这取决于你的上下文）是创建一个

```
 -> /project/
   -> Build.scala
 -> /ApplicationA
   -> /project
     -> /build.sbt
 -> /CoreLibrary
   -> /project
     -> /build.sbt 
```

引用这两个项目以及它们之间的依赖关系。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-03-05T16:39:09.937

使用 sbt 0.12.1 似乎可以获得对项目的简单引用：

我用`ProjectRef`而不是`RootProject`

[http://www.scala-sbt.org/0.12.1/api/sbt/ProjectRef.html](http://www.scala-sbt.org/0.12.1/api/sbt/ProjectRef.html)

```
ProjectRef(file("../util-library"), "util-library") 
```

sbt-eclipse 也可以。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-09-30T04:07:16.307

从**sbt 0.13 开始**，您可以直接在其中创建多项目定义，`.sbt`而无需`Build.scala`文件。

因此，将以下内容添加到 **ApplicationA/project/build.sbt**就足够了。

```
lazy val core = RootProject(file("../CoreLibrary"))

val main = Project(id = "application", base = file(".")).dependsOn(core) 
```

# blender - 将Ogre从Blender导出到jmonkeyengine的正确方法？

> ID：11653438
> 
> 赞同：0
> 
> 时间：2012-07-25T15:36:53.530
> 
> 标签：blender, ubuntu-12.04, ogre, jmonkeyengine

我正在学习 Jmonkeyengine 并且我仍然处于与我询问加载模型的问题相同的阶段

[在 jmonkeyengine 中为 OGre 3D 模型启用材质和纹理？](https://stackoverflow.com/questions/11430062/enabling-materials-and-textures-for-ogre-3d-model-in-jmonkeyengine)

现在我更多地研究了 Blender，现在至少我可以让基本用例工作，从 Blender 导出到 Ogre 3D，然后将其加载到 jmonkeyengine 中。但是对于更高级的带有纹理的模型，它就行不通了。

我正在尝试将 Ogre 3D 加载到 jmonkeyengine 中，但我认为无法转换为 Ogre 格式。我可以在 Blender 中打开模型，但是当我尝试导出它时，我只能得到一个 .scene 文件，没有 .mesh.xml

你能告诉我我做错了什么吗？

例如，在 Blender 中打开[此模式](http://opengameart.org/content/wizard)l 并将其导出到 Ogre 对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T21:46:25.020

对于它的价值：经过数小时试图弄清楚为什么 JME 无法找到这些材料，尤其是。使用子网格时，您需要将材质文件重命名为 .material。如果您使用超过 1 种材料，请将所有材料文件附加到该文件中。

# sqlalchemy - SQLAlchemy 和 adodbapi 数据库连接错误

> ID：11653439
> 
> 赞同：1
> 
> 时间：2012-07-25T15:36:55.060
> 
> 标签：sqlalchemy, ironpython, adodbapi

我正在尝试在 IronPython 2.7.3 上使用 sqlalchemy 0.7.8 和 adodapi 2.4.2.2 连接到 mssql SQLExpress 2012 数据库

我能够创建一个 sqlalchemy 引擎，但是当进行查询时，我得到：“TypeError: 'NoneType' object is unsubscriptable”

追溯：

```
Traceback (most recent call last):
  File "C:\Program Files (x86)\IronPython 2.7\Lib\site-packages\SQLAlchemy-0.7.8-py2.7.egg\sqlalchemy\engine\base.py", line 878, in __init__
  File "C:\Program Files (x86)\IronPython 2.7\Lib\site-packages\SQLAlchemy-0.7.8-py2.7.egg\sqlalchemy\engine\base.py", line 2558, in raw_connection
  File "C:\Program Files (x86)\IronPython 2.7\Lib\site-packages\SQLAlchemy-0.7.8-py2.7.egg\sqlalchemy\pool.py", line 183, in unique_connection
  File "<string>", line 9, in <module>
  File "C:\Program Files (x86)\IronPython 2.7\Lib\site-packages\SQLAlchemy-0.7.8-py2.7.egg\sqlalchemy\engine\base.py", line 2472, in connect
TypeError: 'NoneType' object is unsubscriptable 
```

正在使用的代码：

```
def conn():
    return adodbapi.connect('Provider=SQLOLEDB; Data Source=SERVER\SQLEXPRESS; 
                             Initial Catalog=db; User ID=user; Password=pass;')
engine = create_engine('mssql+adodbapi:///', creator=conn, 
                        echo = True, module=adodbapi) 
```

adodbapi 似乎可以自己正常工作，即。我可以创建一个连接，然后使用游标查询没有任何问题，这似乎是 sqlalchemy 中的东西。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T14:02:48.890

我们有一个解决方法：

```
import adodbapi
from sqlalchemy.engine import create_engine
from sqlalchemy.orm import sessionmaker
import sqlalchemy.pool as pool

def connect():
    return adodbapi.connect('Provider=SQLOLEDB.1;Data Source=mypcname\SQLEXPRESS;\
                         Initial Catalog=dbname;User ID=user; Password=pass;')

mypool = pool.QueuePool(connect)
conn = mypool.connect()
curs = conn.cursor()
curs.execute('select 1') #anything that forces open the connection

engine = create_engine('mssql+adodbapi://', module=adodbapi, pool = mypool)

Session = sessionmaker()
Session.configure(bind=engine)
sess = Session() 
```

有了这个我的会话对象正常工作。

我可能没有按照制作者的意图使用 adodbapi 方言，但我找不到任何文档，所以这就是我现在所使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:01:28.013

很确定 adodbapi 不适用于 SQLAlchemy。

[adodbapi 方言目前未针对 0.6 实现。](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mssql.html)

滚动到最底部，（这是 0.7x 文档），我还检查了 0.8 文档，它也说了同样的话。

听起来您必须更改正在使用的驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T09:42:12.047

我使用 sqlalcmy 使用 psycopg2 连接到 postgresql 数据库。我不确定，但是通过阅读文档，我认为您需要下载[pyodbc](http://pypi.python.org/pypi/pyodbc/)，它似乎比 adodbapi 得到更好的支持。安装完成后，尝试以下语句创建引擎

```
engine = create_engine(mssql+pyodbc://user:pass@host/db) 
```

[或者您可以在此处查看](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mssql.html)编写连接字符串的不同方式。

# c++ - 为什么我的部分代码没有执行？

> ID：11653441
> 
> 赞同：5
> 
> 时间：2012-07-25T15:36:58.037
> 
> 标签：c++, compiler-optimization, cinema-4d

我正在使用 Visual C++ 编译我的 Cinema 4D 插件。

```
 GeDebugOut("-->");
    subroot = NULL;
    head = NULL;
    tail = NULL;
    success = PolygonizeHierarchy(source, hh, head, tail, &subroot, malloc);
    if (!success) {
        /* .. */
    }
    String str("not set.");
    if (subroot) {
        GeDebugOut("yes");
        str = "yes!";
        GeDebugOut("Subroot name: " + subroot->GetName());
    }
    else {
        GeDebugOut("no");
        str = "no!";
    }
    GeDebugOut("Is there a subroot?   " + str);
    GeDebugOut("<--"); 
```

预期的输出如下：

```
-->
yes
Subroot name: Cube
Is there a subroot?  yes
<-- 
```

（或者用“no”代替。）但我明白了

```
-->
yes
<-- 
```

**为什么这里缺少两个打印件？**

* * *

这是 的声明`GeDebugOut`。

```
void GeDebugOut(const CHAR* s,  ...);
void GeDebugOut(const String& s); 
```

该类`String`是可连接的。它使`+`运算符重载。

```
String(void);
String(const String& cs);
String(const UWORD* s);
String(const CHAR* cstr, STRINGENCODING type = STRINGENCODING_XBIT);
String(LONG count, UWORD fillch);
friend const String operator +(const String& Str1, const String& Str2);
const String& operator +=(const String& Str); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:41:44.290

您需要像使用`GeDebugOut`一样使用`printf`：

```
GeDebugOut("Some message =  %s ", whatever); 
```

其中`whatever`是一个 c 字符串，即它的类型是`char*`.

由于还`GeDebugOut`接受`String`类型的重载，所以我认为您需要使用 unicode 作为：

```
GeDebugOut(L"Is there a subroot?   " + str);
        // ^ note this! 
```

因为*我的怀疑*是，如果启用了 unicode，则`CHAR`基本上是`wchar_t`，而不是`char`. 正因为如此，字符串连接不起作用，因为字符串文字不会隐式转换为`String`类型，以传递给`+`重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T15:44:13.533

您不能将字符串附加到字符串文字。

`"Is there a subroot"`是一个字符串文字，编译器会将其用作指向该文字的指针。

更好的方法是：

```
GeDebugOut("Is there a subroot? %s ", str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:59:37.980

正如您所提到的，有两个版本`GeDebugOut`的编译器可供选择：

```
void GeDebugOut(const CHAR* s,  ...);
void GeDebugOut(const String& s); 
```

当它遇到：

```
GeDebugOut("Is there a subroot?   " + str); 
```

`"Is there a subroot"`是一个字符串文字，它转换为 type `const char*`。我怀疑`String`有一些数字类型的转换运算符。所以编译器选择了第一个重载。

这会导致您不期望的行为，因为`+`for 的操作`const char*`是指针算术，而不是字符串连接，因此您调用`GeDebugOut`的是字符串文字的指针总和，以及该`const char*`转换的输出`str`是什么。

有几种方法可以纠正这个问题。正如另一个提到的，您可以将其更改为`printf`-like 语法。或者你可以像这样强制它使用`String`overlaod：

```
GeDebugOut(String("Is there a subroot?") + str); 
```

# android - Eclipse Juno 中没有默认建议

> ID：11653448
> 
> 赞同：23
> 
> 时间：2012-07-25T15:37:25.030
> 
> 标签：android, eclipse

我最近切换到 Eclipse Juno 进行 android 开发。当我按“ctrl+space”查看可用建议时。但它显示“无默认建议”。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-26T18:48:40.563

我也有同样的问题; 它发生在我升级到 Juno 之后。

我的修复： - Window->Preferences->Java->Editor->Content Assist->Advanced - 明确检查 Java Proposals - Apply

那为我修好了。（我不知道为什么恢复默认值没有设置这个，看起来应该但它对我不起作用）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-15T07:02:05.823

尝试恢复`Restore Default`选项

`Windows > Preferences > Java > Editor > Content Assist > Advanced > Restore Default`

在下面清楚地看到图像。

![日食图像](../Images/2a369a12a42661f0b7157469968ec417.png)

更多，请看

1.  [Eclipse/Java 代码完成不起作用](https://stackoverflow.com/questions/908489/eclipse-java-code-completion-not-working)。
2.  [内容辅助（Ctrl + Space）不起作用 - Eclipse](http://www.mkyong.com/java/content-assist-ctrl-space-is-not-working-eclipse/)

希望对你有帮助。！！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T16:01:07.980

只需执行 Project> Clean 然后重新启动 Eclipse。我遇到过同样的问题

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-26T04:05:53.537

更改工作区并立即尝试。这对我来说可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:45:40.920

确保您在 java Perspective 中，并且您的项目可能被重新整合为 Android 项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-26T05:37:16.547

我们可以根据需要更改设置。

假设我们要将**java 提案**作为最高优先级，我们需要进行如下更改。

`Windows`> `Preferences`> `Java`> `Editor`> `Content Assist`> `Advanced`

选择`java proposal`并点击`up`按钮 [![在此处输入图像描述](../Images/90629fe9f9a480cba8db06e0351c56f0.png)](https://i.stack.imgur.com/zKrzK.jpg)

# ios - iOS：UIImagePickerController Overlay 属性检测 CameraSource 更改

> ID：11653452
> 
> 赞同：2
> 
> 时间：2012-07-25T15:37:32.583
> 
> 标签：ios, ipad, camera, overlay, uiimagepickercontroller

**背景：**我正在实施一个面罩来帮助人们聚焦他们的相机并在每张照片上产生统一的结果。可悲的是，面罩需要在前后摄像头之间切换时调整其大小，以便为人们提供很好的指导。

**问题：**我一直在尝试检测相机之间的这种切换，以相应地调整我的面罩。我还没有找到如何检测它。

**附加信息：**我尝试研究委托和/或子类化pickerController。此检测没有可见的方法。我最后的手段是让一个线程继续检查相机源并在需要时进行调整。我欢迎更好的东西:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-25T16:00:38.003

我会看一下有关 cameraDevice 属性的 UIImagePickerController 文档。

[https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController_Class.pdf](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController_Class.pdf)

您可以创建一个观察者来在选择器更改时运行它：

[http://farwestab.wordpress.com/2010/09/09/using-observers-on-ios/](http://farwestab.wordpress.com/2010/09/09/using-observers-on-ios/)

# scroll - Sencha Touch 2 - 在 NestedList 中添加（表单）组件并作为一个滚动

> ID：11653456
> 
> 赞同：0
> 
> 时间：2012-07-25T15:37:39.367
> 
> 标签：scroll, sencha-touch-2, nested-lists

我有一个显示三个组件的面板：

1.  `Ext.field.Select`
2.  `Ext.field.Search`
3.  `Ext.data.NestedList`

最终用户使用组件 1 和 2 来过滤列表内容。

在初始化之后，组件 1 和 2 都被添加到`NestedList`项目集合中。`NestedList`这很完美。这里的问题是只有`NestedList`卷轴中的数据。其他组件保持在顶部。

我想要实现的是组件 1 和 2 都保持在顶部`NestedList`并与列表一起滚动。因此，如果您垂直向下滚动，它们将滚动到屏幕外。

使项目所在的面板`scrollable: true`不起作用，因为`NestedList`它本身正在向上/向下移动，而不是列表数据。

有没有人有一些伪代码我怎么能做到这一点？或者我必须看的方向？我玩过对接和几种布局，但似乎没有成功。也许这对于框架来说（很容易）是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:27:18.173

`scrollDock : 'top'`您可以通过在组件配置部分中进行设置来实现此目的。如果您随后将该组件添加到 NestedList（或普通列表）项集合中，该组件将保持在顶部 - 并与其他列表项一起滚动。

# javascript - 根据页面内容高度自动扩展侧边框

> ID：11653458
> 
> 赞同：1
> 
> 时间：2012-07-25T15:37:40.583
> 
> 标签：javascript, jquery, css, height

我正在制作一个网站，并且在我的主要内容周围有“边界”。我说“边框”是因为它不是 CSS 边框，而是带有背景图像的 div。

现在，我将左右 div 边框（#cont-border-left/right）高度明确设置为 675px，并且在我想要向下展开页面时，我还有另一个 div（#extend-l/r）主要内容超过 675px。

如果可能的话，我想只使用 CSS，但如果不是，JavaScript/JQuery 对我来说也是一个很好的解决方案。

我打算在这里粘贴一堆代码，但查看源代码可能会更容易，因为我认为如果你能一起看到它们会更有意义。

在一个类似的问题上看到了这个......但我对 jQuery 或 JavaScript 不是很好。

```
$(document).ready(function()
{
if($('#leftColumn').height() > $('#rightColumn').height())
{
$('#rightColumn').height($('#leftColumn').height());
}
else
{
$('#leftColumn').height($('#rightColumn').height());
}
}); 
```

并把它变成这样的东西：

```
$(document).ready(function()
{
if($('#content').height() > $('#cont-border-left').height())
{
$('#extend-l').height = $('#content' - 645px) 
```

^以上行需要帮助/更正

```
}
else
{
$('#extend-l').height = 0
}
}); 
```

关于我应该尝试什么的任何想法？

## **EDIT2：仍然想知道是否有人有纯 CSS 解决方案！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:04:59.413

您可能对[CSS3 边框图像](http://www.w3.org/TR/css3-background/#border-images)感兴趣。见各种：

*   [css3.info](http://www.css3.info/preview/border-image/) : *Border-image: 使用图像作为边框*
*   [css-tricks.com](http://css-tricks.com/understanding-border-image/) :*了解边框图像*
*   [边框图像生成器](http://border-image.com/)
*   [边框图像](/questions/tagged/border-image "显示标记为“边框图像”的问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:56:33.803

弄清楚了。我很接近我所做的编辑。

如果将来有人需要类似的东西，这里是工作代码。

```
$(document).ready(function()
{
if($('#content').height() > $('#cont-border-left').height())
    {
    $('#extend-l').height($('#content').height()-675)
    }

if($('#content').height() > $('#cont-border-right').height())
    {
    $('#extend-r').height($('#content').height()-675)
    }
}); 
```

# html - 在不同浏览器上提交html表单

> ID：11653459
> 
> 赞同：0
> 
> 时间：2012-07-25T15:37:40.737
> 
> 标签：html, forms, browser

我设置了这个表单来提交一些文本，下面的代码非常适用于 chrome，它允许通过按 enter 或单击按钮提交表单，但在 Firefox 中单击按钮或按 enter 什么都不做，

```
<form id="form1" name="form1" method="get" action="main_results.php">
    <input name="q" type="text" value="<?php echo $_GET['q']; ?>" size="67"/>
    <input class="submit" type="button" value="Search" onclick="chkChecks()" /> 
```

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:39:51.830

更改`type="button"`为`type="submit"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:50:22.650

您必须将 type="button" 更改为 type="submit" 我还将 php 代码 ( `<php echo ($ _GET ['q']);?>`) 添加 htmlspecialchars ( `<?php echo htmlspecialchars($_GET['q']); ?>`) 以使其更安全。

这是我的小提琴：

[http://jsfiddle.net/lukas2012/Nj8HK/](http://jsfiddle.net/lukas2012/Nj8HK/)

# apache - 使用 RewriteCond 重定向一系列 IP

> ID：11653461
> 
> 赞同：36
> 
> 时间：2012-07-25T15:37:43.033
> 
> 标签：apache, .htaccess, mod-rewrite

目前，我正在使用以下命令重定向除 IP 12.345.678.90 之外的所有用户：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/maintenance$
RewriteCond %{REMOTE_HOST} !^12\.345\.678\.90
RewriteRule $ /maintenance [R=302,L] 
```

我将使用什么语法来允许范围？在我的允许列表中，我有：

```
Allow from 123.45.678.90/28 
```

如果我只是将 REMOTE_HOST 行更新为：

```
RewriteCond %{REMOTE_HOST} !^12\.345\.678\.90/28 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-03-15T23:32:03.627

如果您使用的是 Apache HTTPD 2.4 或更高版本，则可以使用[表达式](https://httpd.apache.org/docs/trunk/expr.html)将 REMOTE_ADDR 与 CIDR 掩码匹配。

简短的形式如下所示：

```
RewriteCond expr "-R '192.168.1.0/24'" 
```

以下更长的形式也可用，但文档表明它的效率较低：

```
RewriteCond expr "%{REMOTE_ADDR} -ipmatch '192.168.1.0/24'" 
```

这使得您的示例的完整解决方案如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/maintenance$
RewriteCond expr "! -R '12.345.678.90/28'"
RewriteRule $ /maintenance [R=302,L] 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-25T16:53:52.087

您可能希望`%{REMOTE_ADDR}`匹配，但不能使用 CIDR 表示法，因为`%{REMOTE_ADDR}`它*实际上是远程地址*，您可以使用正则表达式尝试匹配它。所以对于 123.45.67.89/28, (123.45.67.80 - 123.45.67.95)，你必须这样做：

```
RewriteCond %{REMOTE_ADDR} !^123\.45\.67\.8[0-9]$
RewriteCond %{REMOTE_ADDR} !^123\.45\.67\.9[0-5]$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-23T16:05:52.940

尽管这是一个老问题，但我发现它仍然非常相关。允许 CIDR 表示法的替代方法如下（示例在虚拟主机 apache conf 文件中）：

```
<VirtualHost *:80>
    .
    .
    .
    <Files maintenance>
        Require all denied
        Require ip 12.345.678.90/28
    </Files>
    .
    .
    .
</VirtualHost> 
```

作为旁注，我*怀疑*，在没有进行任何测试或找到任何证据的情况下，这种方法比`RewriteCond expr "-R '192.168.1.0/24'"`提到的方法“更快”。

原因很简单，在这个高层次上似乎涉及的计算步骤较少。

注意来自被拒绝 IP 的请求者将看到“Permission denied”或“Forbidden”类型的响应。您可以通过添加以 200/OK 响应的自定义 404 页面来使其更漂亮（这样 Google 不会惩罚您的域）。200/OK 必须是自定义 404 页面的第一行。例如，在 PHP 中，第一行将显示为：

```
<?php header("Status: 200 OK"); ?> 
```

您希望对重定向到的合法页面执行此操作。实际的 404 应该以 404 响应，以防止我们在路上遇到大量无用的搜索引擎结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-18T05:17:45.967

在 .htaccess 中试试这个。它正在工作。

```
RewriteCond %{REMOTE_ADDR} !^123\.456\.789\.[0-255] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T17:13:17.147

我喜欢使用以下允许部分地址匹配的内容。在您的`virtualHost/htaccess`文件中

```
SetEnvIf HOST "siteYouAreworkingON.com" ACCESS_CONTROL<br>
SetEnvIf Remote_Addr "list of full or partia ipadresses separated by |"<br>
RewriteCond %{ENV:ACCESS_CONTROL} 1<br>
RewriteRule .* http://gohere.instead [L,R] 
```

希望能帮助到你。

# objective-c - 如何将 [数组计数] 粘贴到大小写：

> ID：11653465
> 
> 赞同：2
> 
> 时间：2012-07-25T15:37:50.803
> 
> 标签：objective-c, ios, arrays, switch-statement

我有开关。其中一种情况必须是数组计数：

```
 int count = [array count];
    switch (someValue) {
        case 0:
            [self foo];
            break;
        case count:
            [self bar];
            break;

        default:
            break;
    } 
```

但编译器告诉：

```
Expression is not an integer constant expression 
```

如何从 [array count] 生成 const int？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:45:39.937

正如错误所暗示的那样，案例必须都是常数。您需要一个`if`语句来检查动态案例：

```
 int count = [array count];
    switch (someValue) {
        case 0:
            [self foo];
            break;
        default:
            if (someValue == count)
                [self bar];
            break;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:44:59.853

```
if(some value == 0) {
    [self foo];
} else if (someValue == [array count]) {
    [self bar]
} 
```

# jquery - jQuery 功能在 ASP.NET MVC 部分视图中消失

> ID：11653468
> 
> 赞同：0
> 
> 时间：2012-07-25T15:37:59.050
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-partialview

我有一个 asp.net MVC 部分视图，其中 jQuery 用于为文本框弹出一个日期选择器。一个取消按钮，使用 Ajax 在单击时重新加载局部视图。在第一次加载时一切正常。但是在单击取消按钮后，所有 jQuery 功能都消失了，例如日期选择器停止显示文本框。知道它有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:50:51.697

如果您正在通过 ajax 对部分视图进行任何更新，则任何使用 jquery 绑定的事件都需要使用[jquery live](http://api.jquery.com/live/)或 jquery on 1.7+重新绑定或绑定它们

```
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:48:19.327

当您重新加载部分视图时，旧（现在已替换）部分中的元素上的任何处理程序都将丢失。您必须重新绑定它们才能恢复功能。

绑定处理程序的部分末尾的脚本块将起作用。或者，如果您愿意，处理 AJAX 成功或完整回调的代码可以重新绑定它们。

# django - Django 表单字段标签中的换行符

> ID：11653471
> 
> 赞同：11
> 
> 时间：2012-07-25T15:38:12.780
> 
> 标签：django, forms, field

有没有办法在 Django 的表单字段的标签中添加换行符？在 HTML 中添加一个`\n`just 会导致换行，并尝试`<br>`按原样显示字符。是否有`|safe`我可以在该字段上指定的等效操作？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T15:55:45.097

您可以使用`mark_safe`以便`<br />`标签不会被转义。

它等同`safe`于在模板中使用，因此在处理用户输入时要小心。如果它是硬编码的字符串，那么它可以安全使用。

```
from django import forms
from django.utils.safestring import mark_safe

class MyForm(forms.Form):
    my_field = forms.CharField(label=mark_safe('my label<br />next line')) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-20T05:11:36.107

您也可以直接在模板中执行此操作，如下所示：

```
 {{my_field.label|linebreaks}} 
```

`\n`将转换为`<br/>`这种方式

根据[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks)，

> 单个换行符成为 HTML 换行符 ( `<br />`)，而后跟一个空行的新行成为段落换行符 ( `</p>`)。

# c# - 禁用 Azure Blob 直接下载

> ID：11653472
> 
> 赞同：1
> 
> 时间：2012-07-25T15:38:13.673
> 
> 标签：c#, asp.net, azure, blob

是否可以限制/禁用 Azure Blob 直接下载（当您在浏览器中输入链接时）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:52:36.983

如果您通过公共或什至使用 SAS 提供对 blob 的访问权限，则您无法将它们放入 blob 以根据需要下载 blob。

如果您将提供一个包含来自公共容器的 blob 的链接，如下所示，那么任何人都可以下载该 blob，只要他们知道 URL：

```
http[s]://your_azure_storage_name.blob.core.windows.net/public_container/blob_name 
```

但是，如果您使用[SAS 签名](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx)API 提供指向您的博客的链接，则您可以限制对 Blob 的访问，但他们仍然可以在有权访问 URL 后下载 Blob。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:48:54.803

只是不要公开容器，人们将无法匿名下载 blob。如果您需要某种类型的 ACL，则需要创建一个服务来执行 ACL 检查，然后将 blob 的流返回给批准的用户。

# windows - 禁用 Windows 8 无响应应用程序的选项

> ID：11653474
> 
> 赞同：0
> 
> 时间：2012-07-25T15:38:19.800
> 
> 标签：windows

在[微软网站上我看到了这个](https://web.archive.org/web/20130618054947/http://windows.microsoft.com:80/en-us/windows7/what-does-it-mean-when-a-program-is-not-responding)：

> 程序没有响应是什么意思？
> 
> 如果某个程序没有响应，则意味着该程序与 Windows 的交互速度比平时慢，通常是因为程序中出现了问题。如果问题是暂时的，并且您选择等待，某些程序将再次开始响应。根据可用的选项，您还可以选择关闭或重新启动程序。

在 Windows 8 上，您如何禁用“选​​项”以使我的应用程序的用户看不到重新启动我的应用程序的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:01:33.793

我建议更改您的应用程序的设计，以免出现这种情况。“未响应”afaik 意味着具有主消息泵的线程未获取消息。允许这种情况发生并不是一件好事。

最好在单独的线程中做一些需要很长时间的事情，同时继续响应用户（即使这只是意味着要求他们等待并保持对话框响应鼠标事件等）。

# c# - 在 MVC3 Web 应用程序中集成 C# SQL CLR 数据库项目？

> ID：11653475
> 
> 赞同：1
> 
> 时间：2012-07-25T15:38:20.860
> 
> 标签：c#, clr

**背景：**我已经编写了一个 CLR 数据库项目，其中包含我正在创建的数据存储的所有业务逻辑。它部署在我的 SQL Server 上，由各种负责数据导入的 CLR StoredProcedures 引用。现在我正在开发 Web 前端，并为此目的开始编写一个 MVC3 项目。由于我已经拥有完整的业务逻辑（对象定义、质量检查），我想在我的 MVC 应用程序中使用代码。

我认为最好的方法是将 BusinessLogic CLR 项目添加到我的 MVC 解决方案中，并在 MVC 项目中引用它。效果很好，我可以使用代码。有了一些耐心，我克服了大多数困难。

**问题：**

1）当我想调试 MVC 解决方案时，Visual Studio 总是想部署 CLR 程序集。我通过在调试之前在 MVC 解决方案中卸载 CLR 项目来解决这个问题。

2) 从我的 SQLServer 获取[UserDefinedType 参考](https://stackoverflow.com/questions/11652799/load-userdefinedtype-into-referenced-clr-project-referenced-by-mvc-application)似乎也是一个问题：

3) 我在我的服务器上部署了两次相同的代码，一次使用 SQL 程序集，一次使用我的 MVC 前端。

**问题：**

*   是否有在 SQL Server 程序集和前端项目中使用相同代码的最佳实践？也许是一种引用 SQL Server 上部署的 BusinessLogic 程序集的方法？前端代码和 SQL Server 上的 DataImport 内容都应该可以访问业务逻辑中的任何更改。当前的解决方案感觉不对，因为我必须在我的服务器上部署相同的代码 2x，一次使用 SQL 程序集，一次使用我的 MVC 前端。

任何部分答案（即有意义的微光）将不胜感激。我几乎独自一人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:27:10.587

业务逻辑代码可以在它自己的类库和项目中。

然后 CLR 数据库解决方案包含了这个 BL 项目，MVC 解决方案也包含了 BL 项目。但是这两种解决方案是分开的。这似乎解决了眼前的问题——尽管如果你更改了 BL 代码，那么你必须进行 2 次部署......

可能只是这个 BL 层没有生活在正确的地方。如果这个 BL 存在于某处的服务中，并且 CLR procs 和 MVC 项目都在这个地方访问它，那就太好了。

# c# - 设计模式 c# 存储库

> ID：11653476
> 
> 赞同：2
> 
> 时间：2012-07-25T15:38:24.127
> 
> 标签：c#, design-patterns, repository

我最近做了一个[问题](https://stackoverflow.com/q/11651745/816721)，他的回答是一个名为[Attached Behavior](http://blogs.msdn.com/b/johngossman/archive/2008/05/07/the-attached-behavior-pattern.aspx)的模式，现在与其每次都问如何做某事，不如问我在哪里可以找到可用的设计模式列表？

“可用”是一个很大的术语。我寻找的是可用于 WPF、C# .NET3.5/4.0/4.5 技术中的应用程序开发的模式，如果可能的话，可以通过示例和更常见的示例进行解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:45:59.523

*   您可能对[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)感兴趣：

[http://www.codeproject.com/Articles/278901/MVVM-Pattern-Made-Simple](http://www.codeproject.com/Articles/278901/MVVM-Pattern-Made-Simple)

*   和[脚手架](http://en.wikipedia.org/wiki/Scaffold_%28programming%29)：

[http://www.codeproject.com/Articles/36975/WPF-CRUD-Generator-Scaffolding](http://www.codeproject.com/Articles/36975/WPF-CRUD-Generator-Scaffolding)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T15:40:12.997

成本 79 美元，但非常值得恕我直言：http: [//www.dofactory.com/Framework/Framework.aspx](http://www.dofactory.com/Framework/Framework.aspx)

它非常广泛，具有[GoF](http://en.wikipedia.org/wiki/Gang_of_Four_%28software%29)和[Head First](http://shop.oreilly.com/product/9780596007126.do)、[企业](http://martinfowler.com/books/eaa.html)模式等等，包含真实世界的示例和更多抽象示例，并包含“包”中包含的每个模式的源代码。当然，它针对.Net（根据您的问题），但适用于所有其他有能力的语言。

虽然质量不是很高，但恕我直言，它确实物有所值。

# ios - iOS 上地理编码的可扩展解决方案

> ID：11653479
> 
> 赞同：0
> 
> 时间：2012-07-25T15:38:45.680
> 
> 标签：ios, google-maps, geocoding, google-calendar-api

我正在开发一个 iOS 应用程序，该应用程序从 Google 日历中提取事件，然后在地图上为每个事件生成图钉（基于事件创建者为“位置”填写的内容）。用户可以选择一个日期范围（今天、本周、本月等）并查看在此期间发生在他们附近的所有事件。

**问题 1：**该应用程序适用于我当地的大学，因此大部分位置将是校园内的建筑物。这些建筑物的地址不一致，通常很难找到，所以如果“Foo Hall”的位置能在该建筑物上留下一个别针，那就太好了。谷歌地图能够做到这一点，但苹果地图不知道我学校校园里的建筑物。

**问题 2：**在理想情况下，成千上万的学生会使用这个应用程序。每次他们打开应用程序时，他们可能会查看数十个图钉。因此，我担心我可能会突破 Google 地理编码 API 施加的限制（绝对是 2500 个请求限制，甚至可能是 Business API 的 100,000 个请求限制）。

**所以我的问题是......**这两个问题的最佳解决方案是什么？我应该创建一个本地数据库来构建名称并将它们映射到坐标吗？或者有没有办法克服谷歌地理编码 API 的限制？有没有更好的解决方案我没有想到？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:14:05.460

我会为建筑物使用纬度和经度坐标，并允许人们在您尚未添加的某个地方会面时将位置添加到数据库中。这样，如果您愿意，图钉会掉到建筑物的中心，因为您不依赖地址或查找建筑物名称。您只知道“Foo Hall”位于 X latt。和 Y 长。如果有人选择“Foo Hall”或在“Foo Hall”看到一个事件，那么在地图的中间会有一个完美放置的图钉。如果您对建筑物使用硬编码的位置，我认为您不必担心地理编码 API，因为您不必轮询 Google 来获取建筑物的位置。

我还将使用某种服务器来存储建筑物位置，以便您或用户可以更新或添加它们。

我就是这样处理的，祝你好运！

# java - Java双向套接字连接（服务器/客户端）

> ID：11653481
> 
> 赞同：4
> 
> 时间：2012-07-25T15:38:48.630
> 
> 标签：java, sockets, client

我想要做的是将一些 JSON 从 Android 手机发送到 Java 服务器，它工作正常。Android/ 客户端如下所示：

```
 Socket s = new Socket("192.168.0.36", 12390);
                s.setSoTimeout(1500);

                JSONObject json = new JSONObject();
                json.put("emergency", false);
                json.put("imei", imei);
                json.put("lat", l.getLatitude());
                json.put("lon", l.getLongitude());
                json.put("acc", l.getAccuracy());
                json.put("time", l.getTime());

                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(
                        s.getOutputStream()));
                out.write(json.toString());
                out.flush();
                s.close(); 
```

服务器端是这样的：

```
 try {
        s = new ServerSocket(port);
    } 
    catch (IOException e) {
        System.out.println("Could not listen on port: " + port);
        System.exit(-1);
    }

    Socket c = null;
    while (true) {
        try {
            c = s.accept();
        } catch (IOException e) {
            System.out.println("Accept failed: " + port);
            System.exit(-1);
        }
        try {

            BufferedReader in = new BufferedReader(new InputStreamReader(c.getInputStream()));
                String inputLine = null;
            String result = "";
            while ((inputLine = in.readLine()) != null) {
                result = result.concat(inputLine);  
            }
            System.out.println(result); 
```

正如我所说，所有这些都有效。现在，我想在收到来自客户端的消息后，将消息从服​​务器发送回客户端。我扩展了这样的代码，Android/客户端：

```
 Socket s = new Socket("192.168.0.36", 12390);
                s.setSoTimeout(1500);

                JSONObject json = new JSONObject();
                json.put("emergency", false);
                json.put("imei", imei);
                json.put("lat", l.getLatitude());
                json.put("lon", l.getLongitude());
                json.put("acc", l.getAccuracy());
                json.put("time", l.getTime());

                BufferedWriter out = new BufferedWriter(new OutputStreamWriter(
                        s.getOutputStream()));
                out.write(json.toString());
                out.flush();

                String inputLine = null;
                String result = "";
                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));  
                while ((inputLine = in.readLine()) != null) {
                    Log.d(TAG, in.readLine());
                    result = result.concat(inputLine);
                } 
```

和服务器端：

```
 try {
    s = new ServerSocket(port);
} 
catch (IOException e) {
    System.out.println("Could not listen on port: " + port);
    System.exit(-1);
}

Socket c = null;
while (true) {
    try {
        c = s.accept();
    } catch (IOException e) {
        System.out.println("Accept failed: " + port);
        System.exit(-1);
    }
    try {

        BufferedReader in = new BufferedReader(new InputStreamReader(c.getInputStream()));
            String inputLine = null;
        String result = "";
        while ((inputLine = in.readLine()) != null) {
            result = result.concat(inputLine);  
        }
        System.out.println(result);

    PrintWriter out = new PrintWriter(c.getOutputStream());
    out.write("Hello phone");
    out.flush();
    out.close(); 
```

在客户端，什么都没有进来，它一直挂着

```
 while ((inputLine = in.readLine()) != null) {
                Log.d(TAG, in.readLine());
                result = result.concat(inputLine);
            } 
```

直到套接字超时（从不进入循环）。我认为这可能是一个时间问题，例如服务器太早发送它的回复，因此客户端从来没有收到任何东西，但我试图把 out.write("Hello phone"); 代码中的几乎任何地方，总是相同的结果。它与从 ServerSocket 获得的套接字并且无法发送数据有关吗？我在这里想念什么，这整天困扰着我...

编辑：尼古拉斯回答后，我尝试了这个（客户端）：

```
 out.write(json.toString());
                out.newLine();
                out.write("###");
                out.flush();

                String inputLine = null;
                String result = "";
                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));  
                while ((inputLine = in.readLine()) != null) {
                    if (inputLine.contains("###")) {
                        break;
                    }
                    Log.d(TAG, in.readLine());
                    result = result.concat(inputLine);

                }

                s.close(); 
```

和服务器：

```
 while ((inputLine = in.readLine()) != null) {

                result = result.concat(inputLine);  
                if (inputLine.contains("###")) {
                    System.out.println("received ###");
                    out.println("Hello phone");
                    out.println("###");
                    out.flush();
                    break;
                }

            } 
```

这个想法是在客户端关闭套接字之前从服务器发送消息。仍然不起作用...任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:48:45.437

在服务器端，您永远无法发送“Hello phone”。直到客户端关闭套接字，但那时它是无用的。这是因为`in.readLine()`阻塞直到数据可用或`EOF`，即套接字关闭。

您需要一种摆脱阅读循环的方法-发明（或采用）一些应用程序级协议，该协议会告诉您已收到整个消息。常用选项有固定长度消息、长度前缀、分隔等。

# ios - MobileCoreServices 中的崩溃 -[LSOpenOperation completeOperation]

> ID：11653483
> 
> 赞同：0
> 
> 时间：2012-07-25T15:38:56.227
> 
> 标签：ios, crash

我在一个线程中收到了一份崩溃报告（iPod4,1，iOS 5.1.1）：

```
Hardware Model:      iPod4,1
Process:         AAA [969]
Path:            /var/mobile/Applications/33B2C5DC-78CE-4A99-9D5D-279DDF417DFD/AAA.app/AAA
Identifier:      AAA
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-07-05 18:16:33.606 +0200
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0xd055a967
Crashed Thread:  11

Thread 11 Crashed:
0   libobjc.A.dylib                   0x346e5f78 objc_msgSend + 16
1   Foundation                        0x37f8a74c NSKVOPendingNotificationCreate + 216
2   Foundation                        0x37f8a652 NSKeyValuePushPendingNotificationPerThread + 62
3   Foundation                        0x37f7c744 NSKeyValueWillChange + 408
4   Foundation                        0x37f53848 -[NSObject(NSKeyValueObserverNotification) willChangeValueForKey:] + 176
5   MobileCoreServices                0x33ffa00c -[LSOpenOperation completeOperation] + 32
6   MobileCoreServices                0x33ffa48a -[LSOpenOperation main] + 1050
7   Foundation                        0x37f61a7a -[NSThread main] + 66
8   Foundation                        0x37ff558a __NSThread__main__ + 1042
9   libsystem_c.dylib                 0x30f3172e _pthread_start + 314
10  libsystem_c.dylib                 0x30f315e8 thread_start + 0 
```

你知道这次崩溃的原因是什么吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:57:00.213

我的疯狂猜测是，您正在编写共享某些文档的代码或从另一个应用程序接收文档（通过“打开方式”或 openURL），并且很可能您将一些错误的地址作为参数传递给某些 API。但是，如果不知道您在做什么以及在什么情况下它崩溃了，就很难说清楚。

# php - WordPress 定义（）问题

> ID：11653486
> 
> 赞同：1
> 
> 时间：2012-07-25T15:39:00.000
> 
> 标签：php, wordpress, constants

我从以前的开发人员那里继承的 php 脚本遇到了问题。这是一个房地产公司的 WordPress 网站。有一个 php 脚本可以从其他公司提取房地产列表，每小时自动运行两次。还有一个插件可以在上传照片时在照片上添加水印。水印需要放在代理上传的照片上，而不是放在从 php 脚本中提取的照片上。

在 php 脚本的顶部，他定义了一个常量：

```
define('MLSP_SKIP_WATERMARK', true); 
```

在水印插件中，他检查是否定义了常量：

```
if (!defined(MLSP_SKIP_WATERMARK)) {
    do watermarking stuff
} 
```

它不识别插件中的常量，并在运行 php 脚本时为所有上传的图片添加水印。

我试图移动定义常量的位置。它位于文件顶部附近，而不是在函数中。它与WordPress有关吗？我发现了类似的问题，但没有给我答案。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:57:40.640

正如 PHP 文档所述，`defined()`接受一个表示常量名称的字符串，而不是常量本身。

[http://php.net/manual/en/function.defined.php](http://php.net/manual/en/function.defined.php)

例如，您的代码应该是：

```
if (!defined("MLSP_SKIP_WATERMARK")) {
    do watermarking stuff
} 
```

因为您正在传递常量本身，所以该`defined()`函数返回 false，从而导致您的所有图像都被加水印。

# c++ - 将对象的属性传递给方法时的范围问题。（opencv相关）

> ID：11653487
> 
> 赞同：0
> 
> 时间：2012-07-25T15:39:00.843
> 
> 标签：c++, opencv, properties, scope

刚刚学习C++，遇到了一个问题，我不太清楚为什么会出现以下情况。

不工作

```
ChildObject in = myObject.getObjFromVector(0);
ChildObject out = myObject.getObjFromVector(1);
doSomething(in.property, out.property); // void doSomething(Thing &in, Thing &out)

where 
ChildObject& getObjFromVector(int index) 
```

作品

```
process(myObject.getObjFromVector(0).property, myObject.getObjFromVector(1).property); 
```

如果您想知道，尽管我认为这无关紧要，Thing 是来自 opencv 的 Mat。然而，这个问题是关于为什么上述方法以一种方式起作用而不是另一种。

有趣[的是，将方法传递给整个对象，还是传递该对象的属性，哪个性能更高？](https://stackoverflow.com/questions/10060050/which-is-more-performant-passing-a-method-the-entire-object-or-a-property-of-t)表明两者都应该起作用，或者至少是可以接受的。不过，我肯定做错了什么，这可能归因于我不知道的 openCV 中的某些内容。

编辑：我有效地对 .property 值进行了一些图像处理。喜欢

```
process (Mat &src, Mat &out){
...
pyrDown(src, result, Size(src.cols / 2, src.rows / 2));
... 
```

当它不工作时，我没有看到 pyrDown 生效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:47:33.533

这可能是由于[对象切片](http://en.wikipedia.org/wiki/Object_slicing)（我不熟悉 openCV）。在第一个示例中：

```
ChildObject in = myObject.getObjFromVector(0); 
```

`getObjFromVector()`由as `in`is 类型的返回值引用的对象制作副本`ChildObject`，not `ChildObject&`。

第二个示例将返回的引用直接传递给函数，因此不会发生对象切片。

# gzip - 直接提供 gzip 压缩的内容——坏事？

> ID：11653488
> 
> 赞同：23
> 
> 时间：2012-07-25T15:39:02.423
> 
> 标签：gzip, static-content

我将我的网站配置为使用 gzip 压缩来提供静态内容，如下所示：

```
<link rel='stylesheet' href='http://cdn-domain.com/css/style.css.gzip?ver=0.9' type='text/css' media='all' /> 
```

我没有看到任何网站做类似的事情。所以，问题是，这有什么问题？我可以期待缺点吗？

准确地说，据我了解，大多数网站都配置为仅在请求带有`Accept-Encoding: gzip`标头时才提供普通静态文件（.css、.js 等）和压缩内容（.css.gz、.js.gz 等）。当所有浏览器都支持相同时，他们为什么要这样做`gzip`？

**PS：**我根本没有看到任何性能问题，因为所有静态内容在上传到 CDN 之前都经过 gzip 压缩，然后 CDN 只是提供 gzip 压缩的文件。因此，我的服务器上没有压力/紧张。

* * *

以防万一，这是 gzip 压缩的 CSS 文件的 HTTP 响应标头信息：

[![截图 1](../Images/2d9e0b7e2f8dec5f953b029b9bad0306.png)](https://i.stack.imgur.com/CVd9F.png)

这适用于 gzip 压缩的 favicon.ico 文件：

[![截图 2](../Images/667af07dd6b645b8a453b50cd2ff599b.png)](https://i.stack.imgur.com/hOvZh.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-26T13:38:59.290

支持`Content-Encoding: gzip`不是任何当前 HTTP 规范的*要求*，这就是为什么以请求标头的形式存在触发器的原因。

在实践中？如果您的受众正在使用 Web 浏览器，而您只担心合法用户，那么只有经过预处理的 gzip 压缩版本可用，任何人实际上都会受到影响的可能性非常非常小。这是一个过去时代的残余。这些天的浏览器应该处理强制输入的 gzip 内容，即使他们不请求它，只要您还为他们提供正确的标题来提供给他们的内容。重要的是要意识到 HTTP 请求/响应是一个*对话*，并且请求中的大多数标头就是这样；一个**请求**. 在大多数情况下，另一端的服务器没有义务尊重任何特定的标头，只要它们返回有意义的有效响应，另一端的客户端就应该尽最大努力理解返回的内容. 这包括在服务器响应它已使用 gzip 时启用 gzip。

但是，如果您的目标是机器消耗，请小心。人们仍然认为有时编写自己的 HTTP/SMTP/etc 解析器是一个聪明的主意，尽管该主题已经在多个库中为几乎所有语言完成了死亡。所有的库都应该很好地支持 gzip，但手动解析器通常不会。

# wpf - WPF中图像的内存使用情况

> ID：11653489
> 
> 赞同：0
> 
> 时间：2012-07-25T15:39:05.087
> 
> 标签：wpf, memory, image, consumption

这是一个理解问题。

当我有一个 jpeg 图像（A4，96DPI，每像素 24 位）时，它在磁盘上以 90% 的质量级别占用 200KB，然后我将它加载到 WPF 中（例如使用 XAML）。

```
<Image Source="MyJpeg.jpg"></Image> 
```

WPF 对图像的内存消耗不是（仅）200KB，而是至少 8.27 x 11.69 X 96² X 24 / 8 / 1024 = 2610.26KB，对吧？

和：

```
Size of A4 =  8.27 inch  x 11.69 inch 
Pixels in the whole picture = [Size of A4] x 96²
Bits for the whole picture = [Pixels in the whole picture] x 24
Bytes for the whole picture = [Bits for the whole picture] / 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:48:15.880

只有当您想知道图像在物理显示器（屏幕、纸张）上的物理尺寸时，DPI 才有用。

您的 jpg 图像具有宽度和高度，以像素为单位。当用作图像源时，它将被转换为位图，其大小大致为，以位为单位：

> 宽度 * 高度 * 每像素位数

# sql - SQL - 将每个单词的首字母大写

> ID：11653491
> 
> 赞同：2
> 
> 时间：2012-07-25T15:39:07.540
> 
> 标签：sql

我知道这个线程无处不在，但是，情况略有不同。在我公司使用的套件中，我对 SQL 的访问权限有限，无法运行带有函数等的复杂代码。我有一个 SQL 查询，它将多列上的数据编译成一列，并使用 group by 子句来消除多重性。但是，这导致所有结果都以大写形式返回，因为存在变化。我现在必须把它改回它应该的样子，即每个单词的第一个字母大写。我需要一种非常简洁的方法来做到这一点。该套件使用 VBScript 和 XML，但这个特定问题更复杂，因为我无法在客户端编辑结果，套件只是要求显示列名（填充下拉菜单）。有什么建议么？谢谢！

询问：

```
Select Insurance 
From
(Select Ins1 as Insurance
From InsAuth2
WHERE Ins1 IS NOT NULL
Union All
Select Ins2 as Insurance
From InsAuth2
WHERE Ins2 IS NOT NULL
Union All
Select Ins3 as Insurance
From InsAuth2
WHERE Ins3 IS NOT NULL
Union All
Select Ins4 as Insurance
From InsAuth2
WHERE Ins4 IS NOT NULL
Union All
Select Ins5 as Insurance
From InsAuth2
WHERE Ins5 IS NOT NULL) as table
Group By Insurance 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T17:23:20.447

您没有说这是针对 SQL Server 的，但如果是的话，这里有一个解决方案。

这是一个工作示例。`@T`用您拥有的查询替换表变量。

```
declare @T table(Insurance varchar(max))

insert into @T values
('BENGT MIKAEL ERIKSSON'),
('XMLCHARTEST<>&''"')

select (
       select upper(T.N.value('.', 'char(1)'))+
                lower(stuff(T.N.value('.', 'varchar(max)'), 1, 1, ''))+' '
       from X.InsXML.nodes('/N') as T(N)
       for xml path(''), type
       ).value('.', 'varchar(max)') as Insurance
from 
  (
  select cast('<N>'+replace(
                    replace(
                    replace(Insurance,
                    '&', '&amp;'),
                    '<', '&lt;'),
                    ' ','</N><N>')+'</N>' as xml) as InsXML
  from @T
  ) as X 
```

结果：

```
Insurance
----------------------
Bengt Mikael Eriksson 
Xmlchartest<>&'" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T15:42:36.460

这将大写字符串的第一个字母。如果有多个单词，最好在应用层做。您可能需要编写一个 SQL 函数来执行此操作。

```
select upper(substring(MyColumn, 1, 1)) + substring(MyColumn, 2)
from MyTable 
```

或者

```
select upper(substring(MyColumn, 1, 1)) || substring(MyColumn, 2)
from MyTable 
```

# ruby-on-rails - Heroku 和 LiveReload

> ID：11653493
> 
> 赞同：0
> 
> 时间：2012-07-25T15:39:18.160
> 
> 标签：ruby-on-rails, heroku, guard

在开发中，我正在使用`liveReload`. 为了让它运行，我必须将此行添加到`config.ru`文件中：

```
require 'rack-livereload'
use Rack::LiveReload 
```

行前`run Habrablog::Application`。没有这些线`LiveReload`对我不起作用。

gems`guard-livereload`和`rack-livereload`Gemfile 的开发组。

但是当我推送到heroku服务器时，我收到了一条消息：

```
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-
 3.2.2/lib/active_support/dependencies.rb:251:in `require': 
  no such file to load -- rack-livereload (LoadError) 
```

显然是因为`livereload`，如何`livereload`从生产中消除配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:46:40.777

我认为您不需要在 config.ru 文件中添加任何内容（仅适用于 Sinatra）。

两个 gem 安装指南都没有提到 Rails，机架重载设置进入 config/environments/development.rb

[https://github.com/guard/guard-livereload/](https://github.com/guard/guard-livereload/)

[https://github.com/johnbintz/rack-livereload/](https://github.com/johnbintz/rack-livereload/)

# php - cURL XML 发布问题

> ID：11653494
> 
> 赞同：0
> 
> 时间：2012-07-25T15:39:21.753
> 
> 标签：php, xml, curl

我将一些 XML 发布到 web 服务，我编写的代码在所有其他情况下都有效，只是在这种情况下无效。

这是我的代码；

```
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_POSTFIELDS, $string);  
curl_setopt($ch, CURLOPT_ENCODING,'gzip');
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST,1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_TIMEOUT, 45); 
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_FRESH_CONNECT, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml")); 

$result = curl_exec($ch); 

curl_close($ch);

return $result; 
```

它不断返回 500 内部服务器错误，这与您直接访问 url 相同，因此就像未发送 POST 数据一样。但我没有检查内容长度，它似乎是..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:57:37.980

试试这个

```
 $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_string); // NOTE used $xml_string to indicate its just a text string of XML format
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_NOPROGRESS, 0);

    $result = curl_exec($ch);
    curl_close($ch); 
```

# hibernate - @GeneratedValue with strategy=GenerationType.AUTO 在重启后生成重复值

> ID：11653497
> 
> 赞同：11
> 
> 时间：2012-07-25T15:39:24.197
> 
> 标签：hibernate, annotations, id-generation

我有一个休眠实体，其 ID 配置为

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private Long id; 
```

新元素的创建在第一次运行时可以正常工作。但是，如果我重新启动我的应用程序并取回记录，下次我尝试持久化此实体时，hibernate 会尝试使用未重新启动应用程序时生成的相同 ID。

我收到以下错误，当使用跟踪选项运行时，我能够看到该 ID 正在被重用

> *Hibernate: 插入 org_myEntity (entitiyJID, entityName, id) 值 (?, ?, ?) org.hibernate.util.JDBCExceptionReporter
> SQL 错误: 20000, SQLState: 23505 org.hibernate.util.JDBCExceptionReporter 该语句被中止，因为它会在“TABLE_NAME”上定义的“SQL120725164357680”标识的唯一或主键约束或唯一索引中导致重复键值。org.hibernate.event.def.AbstractFlushingEventListener
> 无法将数据库状态与会话 org.hibernate.exception.ConstraintViolationException 同步：无法*

顺便说一句，我使用的是 hibernate 3.3.2.GA、javax.persistance 2.0.0 和 Derby 10.5.1 数据库

有人知道我这一代可能出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T17:04:06.583

如果您使用 AUTO，Hibernate 将选择其中一种策略来生成您的 id。从参考：

> AUTO - 标识列、序列或表，具体取决于底层数据库。

因此，您必须查看生成的 id 以了解 Derby 使用的是哪种策略。虽然看起来像，但每次重新启动应用程序时它都会重置生成器。尝试设置

```
<prop key="hibernate.hbm2ddl.auto">update</prop> 
```

不过，您可以使用序列生成器快速修复它。像：

```
@Id
@GeneratedValue(strategy=GenerationType.AUTO, generator="my_seq_gen")
@SequenceGenerator(name="my_seq_gen", sequenceName="ENTITY_SEQ")
private Long id; 
```

其中 ENTITY_SEQ 是数据库中序列的名称（您手动创建一个）。

# eclipse - 使用eclipse调试cortex m3

> ID：11653500
> 
> 赞同：0
> 
> 时间：2012-07-25T15:39:36.447
> 
> 标签：eclipse, debugging, embedded, cortex-m3

我正在使用 Eclipse 和 Keil uVision 在微控制器（LPC1766，Cortex M3）下进行编码。

我设法混合了 Eclipse 和 Keil uVision（通过 mdk-eclipse-plugin），现在我可以在 eclipse 中调试我的项目。我的问题是：有没有办法在调试时查看（和修改）外围寄存器？在“寄存器”窗口中，我只能看到核心寄存器。我听说可以通过某种方式使用“表达式”窗口，但我不知道要添加什么表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:14:17.503

您可以使用 Eclipse 插件，例如[http://embsysregview.sourceforge.net/](http://embsysregview.sourceforge.net/) 这个插件支持一些 Cortex M3 reg 映射，或者您可以定义自己的。或者，您可以拥有使用结构和指针来匹配您的 reg 布局的 BSP 代码。然后你使用普通的观察窗口来查看你的寄存器作为结构。

# ios - 如何计算 iPhone 上围绕 3 轴的方向变化？

> ID：11653506
> 
> 赞同：0
> 
> 时间：2012-07-25T15:40:01.390
> 
> 标签：ios, xcode, motion, motion-detection

在大多数使用安卓操作系统的手机中，都包含方向传感器，它构成了运动事件的一部分。这些传感器以用户设置的间隔速率输出设备方向的变化。但是 iphone 没有任何方向传感器，那么我怎样才能在 iphone 中建立这个任务呢？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:44:05.787

我想您可以使用陀螺仪来获取手机在空间中的方向并相应地更改您的应用程序，但我没有尝试过类似的事情，所以我不太了解性能方面的可能性。

这是 CMMotionManager 类参考：http: [//developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html)

希望有帮助！

# java - 我有文本到语音，说按钮文本，但所有按钮都说第一个按钮的文本

> ID：11653509
> 
> 赞同：0
> 
> 时间：2012-07-25T15:40:10.330
> 
> 标签：java, android, text-to-speech

我刚刚完成了编码，让文本到语音按钮读取用户按下的按钮上的文本。出于某种原因，每个按钮都说第一个按钮上的文本而不是它们自己的文本。显然这是一个问题，因为您不希望每个按钮都说同样的话。它在我的 LogCat 中没有记录任何错误，所以它工作正常，只是不是我想要的方式。我没有找到问题根源的java经验。

```
public class menu extends Activity implements TextToSpeech.OnInitListener,
        OnClickListener {

    TextToSpeech mTts;
    Button speakButton, infoButton, voiceButton;

    // TTS object
    public TextToSpeech myTTS;
    // status check code
    public int MY_DATA_CHECK_CODE = 0;

    @Override
    protected void onCreate(Bundle aboutmenu) {
        super.onCreate(aboutmenu);
        setContentView(R.layout.mainx);

        SpeakingAndroid speak = new SpeakingAndroid();

        VoiceRecognition voiceinput = new VoiceRecognition();

        // get a reference to the button element listed in the XML layout
        speakButton = (Button) findViewById(R.id.btn_speak);
        infoButton = (Button) findViewById(R.id.aboutbutton);
        voiceButton = (Button) findViewById(R.id.voicebutton);

        // listen for clicks
        infoButton.setOnClickListener(this);
        speakButton.setOnClickListener(this);

        // check for TTS data
        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE);

        voiceButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

            }
        });

    }
    public void onClick1(View about) {

        // get the text entered
        infoButton = (Button) findViewById(R.id.aboutbutton);
        String words = infoButton.getText().toString();
        speakWords(words);
        Intent infoIntent = new Intent("android.intent.action.INFOSCREEN");
        startActivity(infoIntent);

    }
    // respond to button clicks
    public void onClick(View v) {

        // get the text entered
        speakButton = (Button) findViewById(R.id.btn_speak);
        String words = speakButton.getText().toString();
        speakWords(words);
        Intent voiceIntent = new Intent("android.intent.action.RECOGNITIONMENU");
        startActivity(voiceIntent);

    }

    // speak the user text
    public void speakWords(String speech) {

        // speak straight away
        myTTS.speak(speech, TextToSpeech.QUEUE_FLUSH, null);
    }

    // act on result of TTS data check
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                // the user has the necessary data - create the TTS
                myTTS = new TextToSpeech(this, this);
            } else {
                // no data - install it now
                Intent installTTSIntent = new Intent();
                installTTSIntent
                        .setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
            }
        }
    }

    // setup TTS
    public void onInit(int initStatus) {

        // check for successful instantiation
        if (initStatus == TextToSpeech.SUCCESS) {
            if (myTTS.isLanguageAvailable(Locale.US) == TextToSpeech.LANG_AVAILABLE)
                myTTS.setLanguage(Locale.US);
        } else if (initStatus == TextToSpeech.ERROR) {
            Toast.makeText(this, "Sorry! Text To Speech failed...",
                    Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:55:44.197

在您的活动中声明文本到语音属性

```
private TextToSpeech    mTTS; 
```

在您的活动中实例化您的文本到语音对象

```
mTTS=new TextToSpeech(this,this); 
```

获取对 XML 布局中列出的按钮的引用

```
speakButton = (Button) findViewById(R.id.btn_speak);
infoButton = (Button) findViewById(R.id.btn_about);
voiceButton = (Button) findViewById(R.id.btn_voice); 
```

为您的 Button 监听 ClickEvents，您的活动必须实现`View.OnClickListener`接口

```
infoButton.setOnClickListener(this);
speakButton.setOnClickListener(this);
voiceButton.setOnClickListener(this); 
```

在重写的 onClick() 方法中处理点击事件：

```
@Override
public void onClick(View v) {
    switch(v.getId())
    {
        case R.id.btn_speak:
            mTTS.speak(speakButton.getText().toString(), TextToSpeech.QUEUE_ADD, null);
        break;
        case R.id.btn_about:
            mTTS.speak(infoButton.getText().toString(), TextToSpeech.QUEUE_ADD, null);
        break;
        case R.id.btn_voice:
            mTTS.speak(voiceButton.getText().toString(), TextToSpeech.QUEUE_ADD, null);
        break;
    }

} 
```

# ruby - Ruby 数组数组的所有可能排列（一个衬里？）

> ID：11653513
> 
> 赞同：15
> 
> 时间：2012-07-25T15:40:16.277
> 
> 标签：ruby

之前已经在 SO 上提出过类似的问题，但它们并不是我所需要的，而且我似乎无法通过更改/修改这些方法来找到我的解决方案。

无论如何，我有一个数组数组，如下所示：

```
b= [["1"],["2"],["3"],["4"],["5"],["6"]] 
```

（如果它更容易得出解决方案，`b`也可以是一维数组，如下所示：`["1","2","3","4","5","6"]`。任何一种类型的输入都可以满足我的需要。）

我想生成以下内容：

```
[["123456"],["213456"],["312456"],...] 
```

其中输出数组中的每个数组都是六个数字的唯一排列。我也会把它当作一个单一的数组（例如，`["123456", "213456",...]`）。只要每个条目都是唯一的并且字符串中没有数字重复（例如，不允许“112345”），输出的顺序就不是特别重要。每个条目中也必须使用所有 6 个数字，所以我对增量输出也不感兴趣`"123"`。

尽管这听起来很像，但这不是家庭作业问题。我可以为这件事疯狂并获得我需要的输出。我只是觉得必须有一个更好、更优雅的解决方案。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-25T15:56:34.510

使用[Array#permutation](http://ruby-doc.org/core/Array.html#method-i-permutation)：

```
permutations = (1..6).to_a.permutation.map(&:join)
# ["123456", "123465", "123546", ..., "654312", "654321"] 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-25T15:51:03.100

Ruby 本身就是这样做的 :) 来自 ruby​​ 文档：

```
a = [1, 2, 3]
a.permutation.to_a     #=> [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
a.permutation(1).to_a  #=> [[1],[2],[3]]
a.permutation(2).to_a  #=> [[1,2],[1,3],[2,1],[2,3],[3,1],[3,2]]
a.permutation(3).to_a  #=> [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
a.permutation(0).to_a  #=> [[]] # one permutation of length 0
a.permutation(4).to_a  #=> []   # no permutations of length 4 
```

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-permutation](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-permutation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:46:58.193

你绝对应该看看[Permutation Gem](https://github.com/flori/permutation)。文档中的示例

```
perm = Permutation.new(3)
# => #<Permutation:0x57dc94 @last=5, @rank=0, @size=3>
colors = [:r, :g, :b]
# => [:r, :g, :b]
perm.map { |p| p.project(colors) }
# => [[:r, :g, :b], [:r, :b, :g], [:g, :r, :b], [:g, :b, :r], [:b, :r, :g],
#  [:b, :g, :r]] 
```

**更新**

如果您使用的是 Ruby > 1.8.6，`Array.permutation`则内置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:12:56.490

这应该这样做：

```
b.permutation.to_a.collect! { |i| i = [i.flatten.join] } 
```

# java - GWT - RPC 传输休眠对象问题

> ID：11653517
> 
> 赞同：1
> 
> 时间：2012-07-25T15:40:44.000
> 
> 标签：java, database, hibernate, gwt, rpc

我在通过 GWT 中的 RPC 调用传输一个对象时遇到问题。我在这个项目中使用 Spring MVC 和 Hibernate。

这是**实体类：**

```
@Entity
public class Room implements Serializable{
    private static final long serialVersionUID = -5924198459524011627L;

    private Long id;
    private String name;
    private String description;

    private Set<Wall> walls = new HashSet<Wall>(0);

    public Room(){
    }

    public Room(String name, String description){
        this.name = name;
        this.description = description;
    }

    public Room(String name, String description, Set<Wall> walls){
        this.name = name;
        this.description = description;
        this.walls = walls;
    }

    @Id
    @Column(name = "ROOM_ID")
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }

    @ManyToMany(cascade = CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinTable(name = "ROOM_WALL", joinColumns = {@JoinColumn(name = "ROOM_ID")},
            inverseJoinColumns = {@JoinColumn(name = "WALL_ID")})
    public Set<Wall> getWalls(){
        return walls;
    }   

    public void setWalls(Set<Wall> walls){
        this.walls = walls;
    }
} 
```

这是我的**RoomDAO**：

```
@Repository
public class RoomDAO {

    @Autowired
    private HibernateTemplate hibernate;

    public Room get(Long id){
        return hibernate.get(Room.class, id);
    }

    public void delete(Room entity){
        hibernate.delete(entity);
    }

    public void save(Room entity){
        hibernate.saveOrUpdate(entity);
    }

    private Session getCurrentSession(){
        return hibernate.getSessionFactory().getCurrentSession();
    }   

    @SuppressWarnings("unchecked")
    public List<Room> list(){
        String queryStr = "from "+Room.class.getSimpleName()+" fetch all properties";
        Query query = getCurrentSession().createQuery(queryStr);
        System.out.println("Room list succesfull");
        return (List<Room>)query.list();
    }

    @SuppressWarnings("unchecked")
    public List<Wall> getWalls(Long id){
        String queryStr = "from "+Wall.class.getSimpleName()+" wl join wl.walls ls where ls.id=:"+id;
        Query query = getCurrentSession().createQuery(queryStr);
        System.out.println("Walls list succesfull");
        return (List<Wall>)query.list();
    }
} 
```

这是我获得的**错误消息**：

```
com.google.gwt.user.client.rpc.SerializationException: Type 'org.hibernate.collection.PersistentSet' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = []
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:619)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeClass(ServerSerializationStreamWriter.java:709)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:748)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.client.rpc.core.java.util.Collection_CustomFieldSerializerBase.serialize(Collection_CustomFieldSerializerBase.java:44)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serialize(ArrayList_CustomFieldSerializer.java:39)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:51)
    at com.google.gwt.user.client.rpc.core.java.util.ArrayList_CustomFieldSerializer.serializeInstance(ArrayList_CustomFieldSerializer.java:28)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:740)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:621)
    at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:126)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:153)
    at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:539)
    at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:616)
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForSuccess(RPC.java:474)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:571)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:551)
    at org.spring4gwt.server.SpringGwtRemoteServiceServlet.processCall(SpringGwtRemoteServiceServlet.java:37)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488) 
```

我想问一下这个问题是否是由ManyToMany关系和**Set**用于映射我的实体之间的关系引起的。因为当我在使用 Set 的地方传输一个没有任何关系（ManyToMany 或 OneToMany 等）的对象时，RPC 调用工作正常。

是否可以作为 List 替换 Set 的解决方案？我知道 List 对数据库无效，但我不想重建整个项目：D

我发现这些问题可以通过使用 Dozer for ex 来解决。

非常感谢您的回答:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T09:01:53.903

这是一个已知问题。请查看一章[使用 GWT 和 Hibernate](https://developers.google.com/web-toolkit/articles/using_gwt_with_hibernate)中的*为什么 Hibernate 对象在到达浏览器世界时无法被理解*一章。

# ios - XCode故事板中的自定义静态表格单元格？

> ID：11653518
> 
> 赞同：0
> 
> 时间：2012-07-25T15:40:56.257
> 
> 标签：ios, storyboard, tableviewcell

我们正在尝试教我们的设计师使用故事板创建简单的 iOS 应用程序。

我们无法弄清楚的一件事是拥有自定义静态表格单元格的简单方法。

静态的意思是他可以将静态信息添加到故事板中的单元格（不是从数据库或任何东西加载）。

我们遇到的问题是我们无法弄清楚如何使用自定义布局制作自定义单元格。

我们可以以编程方式创建自定义布局。但是，在情节提要中位不显示布局（它显示标准表格单元格的布局）。所以我们不能填写额外的标签和图像等。

我们可以制作一个自定义单元格，以便它显示在故事板中并让我们从中制作静态单元格吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:43:58.050

当您在情节提要中选择表格视图时，有一个属性，您必须将其从动态更改为静态，然后在此处添加额外的标签和图像。

# maven - 我怎么知道我应该在我的 POM 中包含的正确版本号是什么？

> ID：11653519
> 
> 赞同：0
> 
> 时间：2012-07-25T15:40:57.303
> 
> 标签：maven, jersey

我对 Java 中的一切都是全新的，有时它会让人感到困惑，例如，我想通过一些例子来了解 Jersey。所以我去了他们的网站，对于 Core-Server，他们说把它包含在你的 POM 中，它使用的是 1.2 版[http://jersey.java.net/nonav/documentation/latest/user-guide.html#chapter_deps](http://jersey.java.net/nonav/documentation/latest/user-guide.html#chapter_deps)

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.12</version>
</dependency> 
```

然后我在网上看了一些其他的例子，他们说包括这个，使用版本 1.8

```
<repositories>
        <repository>
            <id>maven2-repository.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <layout>default</layout>
        </repository>
    </repositories>

    <dependencies>

        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.8</version>
        </dependency>

    </dependencies> 
```

所以我想我的主要问题是找到这些 Maven 坐标的正确方法是什么，并且知道要使用的正确版本号是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:47:43.393

这似乎很明显，但版本越新，解决的错误和实现的功能就越多。

代码可能适用于任一版本，但一般来说，我会选择与您正在使用的其他库和您的环境兼容的更新版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:56:41.657

书籍通常反映写作时的版本。

通常，我会建议使用该库的最新稳定版本，但如果您按照书中的教程进行操作，那么使用书中的版本可能是有意义的。

在这种情况下，如果您尝试生成的代码不起作用，您可能知道这是由于代码中的错误，而不是因为版本与教程不匹配。

掌握本教程后，请切换到生产代码的最新版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T23:10:07.397

您应该使用您需要的版本。

你需要什么取决于你在做什么。如果您正在逐字学习教程，请使用教程中的版本。为了在之后立即进一步了解，请尝试升级到最新版本，利用新功能等。

一般来说，你会想要使用最新版本的库——*除非*这样做会破坏与不同依赖项的兼容性。[您可以通过依赖项 excludes](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)通过 Maven 管理所有这些。您可能还想[阅读此介绍](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)）。

如果您使用任何给定的库，您可能知道它的主页，它会吹嘘最新版本……通常。如果您知道组和工件，您还可以查看[mvnrepository.com](http://mvnrepository.com/)（例如）。

在这种情况下，有[2.x 里程碑](http://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-server)和[当前的 1.x 版本 1.13](http://mvnrepository.com/artifact/com.sun.jersey/jersey-server)。

# javascript - 正则表达式过滤具有最小字长的句子

> ID：11653523
> 
> 赞同：0
> 
> 时间：2012-07-25T15:41:01.797
> 
> 标签：javascript, regex

我似乎找不到一个正则表达式来过滤单词长度小于“n”个字符的句子。

示例：'n' = 3

“Hello World，Hello Again”不匹配

“Hello World, Javascript is Crazy” 是匹配的，因为 'is' 的字符数少于 3 个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:44:40.000

```
[11:42:43.562] /\b\w{1,2}\b/.test("Hello World, Hello Again")
[11:42:43.565] false
--
[11:43:09.002] /\b\w{1,2}\b/.test("Hello World, Javascript is Crazy")
[11:43:09.005] true 
```

如果您想要小于，请使用 {1,2}，如果您想要小于或等于，请使用 {1,3}。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:46:28.590

试试这个模式：

```
var pattern = '/\b.{1,3}\b/'; 
```

# jquery - 如何使用jquery代理手事件对象

> ID：11653524
> 
> 赞同：0
> 
> 时间：2012-07-25T15:41:04.790
> 
> 标签：jquery, proxy

我的代码[http://jsfiddle.net/4Ub95/](http://jsfiddle.net/4Ub95/)

```
<!DOCTYPE html>
  <html>
  <head>
      <title>example</title>
  </head>
  <body>
  <script src="libs/jquery-1.7.2.js"></script>
  <script>

  $(function(){

  var getid = function(){
      // 
      // I want this is $("#test") obj
      // jQuery.proxy used for?
      var id =  $(this).attr('data-id');
      alert(id);
   }

  $("#test").click(function(){
    //not worki
    //show undefined 
    $.proxy(this.funa,this)()
  })

  })
  </script>

  <button id="test" data-id="123">Click</button>
  </body>
  </html> 
```

我想要这是 $("#test") 想要获取 attr data-id 使用代理..但是代码不起作用如何使用代理方法进行事件...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:52:10.993

你输入了错误的函数名，

```
 $.proxy(getid,this)() 
```

[http://jsfiddle.net/4Ub95/1/](http://jsfiddle.net/4Ub95/1/)

# python - Django：空表单错误

> ID：11653526
> 
> 赞同：6
> 
> 时间：2012-07-25T15:41:18.443
> 
> 标签：python, django, forms

当我尝试从数据库更新一些记录时，我遇到了一个小问题。奇怪的是，`form.errors`如果表单无效（我不明白为什么），它就是空的。

这里有

## 形式

```
class PetitionUpdateForm(forms.ModelForm):
  owner = forms.ModelChoiceField(
    label=_('Petition creator'),
    queryset=User.objects.all(),
    widget=forms.HiddenInput()
  )

  class Meta:
    fields = ('title', 'petition_text', 'description',
              'category', 'num_signs', 'date_to', 'owner',)
    model = Petition 
```

## 模型

```
class Petition(models.Model):
  PETITION_STATUSES = (
    ('N', _('New petition')), # New one
    ('M', _('Moderation')),   # On moderation
    ('R', _('Rejected')),     # Failed petition
    ('S', _('Success'))       # Succeeded petition
  )

  title = models.CharField(max_length=512)
  slug = models.SlugField(max_length=512, editable=False, blank=True)
  description = models.TextField()
  petition_text = models.TextField(blank=True, null=True)
  petition_picture = models.ImageField(upload_to=get_upload_path, blank=True)
  petitioning = models.ManyToManyField(PetitionTarget, editable=False)
  signs = models.ManyToManyField(User, editable=False, related_name='petition_signs')
  num_signs = models.IntegerField(max_length=11, default=100, blank=True)
  category = models.ForeignKey(Category, blank=True, null=True, related_name='petition_category')
  date_to = models.DateTimeField(blank=True, null=True)

  videos = models.ManyToManyField(Video, editable=False)
  photos = models.ManyToManyField(Photo, editable=False)
  audios = models.ManyToManyField(Audio, editable=False)
  documents = models.ManyToManyField(Document, editable=False)

  created = models.DateTimeField(auto_now_add=True, editable=False)
  changed = models.DateTimeField(auto_now=True, editable=False)
  status = models.CharField(max_length=1, choices=PETITION_STATUSES, default='M', blank=True)
  owner = models.ForeignKey(User, related_name='petition_owner')

  def __unicode__(self):
    return u'{0}: {1}'.format(_('Petition'), self.title) 
```

## 更新视图

```
@login_required
@render_to('petition/edit-petition.html')
def update_petition(request, slug):
  p = get_object_or_404(Petition, slug=slug)
  form = PetitionUpdateForm(request.POST or None, instance=p)
  import pdb
  pdb.set_trace()
  if form.is_valid():
    form.save()
    messages.success(request, _('Petition saved'))
  else:
    print form.errors # errors are empty
    messages.success(request, _('Some error happened'))

  return {'form': form, 'petition': p} 
```

我的代码有什么问题？

我已经尝试`null`为大多数模型字段设置属性，从基于类的视图切换到标准视图，但我无法更新我的记录。

苏丹，

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T16:06:32.447

If there is no `POST` data, then `request.POST or None` is `None`, so the form is *unbound*.

Unbound forms are always invalid, but do not have any errors.

In your case, you may want to change the `else:` clause to `elif request.POST:`

See the docs on [bound and unbound forms](https://docs.djangoproject.com/en/dev/ref/forms/api/#bound-and-unbound-forms) for more details.

# java-me - 在 Lwuit J2ME 中使用 Html 组件时，在页面中找不到 BODY 标签

> ID：11653527
> 
> 赞同：0
> 
> 时间：2012-07-25T15:41:21.950
> 
> 标签：java-me, lwuit

我在我的（Lwuit）J2ME 应用程序中使用广告网络，但我遇到了一些问题，我试图将广告的 HTTP 调用放在一个 html 组件中，但我得到了`No body tag was found`.

因此，我尝试从 HTTP 调用中以字符串形式获取响应，然后将其放入 html 组件中，但是打开包含广告的屏幕需要很长时间，并且我必须处理点击事件。

如何将我的广告网络集成到 J2ME 应用程序中，或者是否有任何其他组件可以容纳广告？

```
 HttpRequestHandler handler=new HttpRequestHandler();
    HTMLComponent htmlC = new HTMLComponent(handler);
    htmlC.setPage("http://ads.mp.mydas.mobi/getAd?apid=357&auid=testingauid&uip=66.209.31.31&ua=testing&mode=test"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T08:22:23.170

该广告旨在展示在现有的 HTML 页面中。您需要下载广告内容并将其设置为 html 组件，同时将适当的标签添加到 HTML。

# javascript - jquery datepicker - 在选择时激活另一个日期选择器

> ID：11653528
> 
> 赞同：1
> 
> 时间：2012-07-25T15:41:25.383
> 
> 标签：javascript, jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有 2 个 jquery datepickers 来选择一个日期范围。

一旦我选择了一个起始日期（从第一个日期选择器开始），我想激活第二个（到）日期选择器。

下面的代码就是这样做的，但由于某种原因，它会立即关闭日期选择器。

有任何想法吗？- [http://jsfiddle.net/rN4zu/](http://jsfiddle.net/rN4zu/)

```
From <input type="text" id="dateFrom" />
To <input type="text" id="dateTo" /> 
```

jQuery

```
$( "#dateFrom" ).datepicker({
    minDate: 0,
    maxDate: "+2Y",
    showWeek: true,
    weekHeader: 'Wk',
    onSelect: function( selectedDate ) {
        $( "#dateTo" ).datepicker("option", "minDate", selectedDate ).focus();
    }
});

$( "#dateTo" ).datepicker({
    maxDate: "+2Y",
    showWeek: true,
    weekHeader: 'Wk'
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T15:51:36.933

[http://jsfiddle.net/8YTKR/](http://jsfiddle.net/8YTKR/)

问题与命令相互冲突有关。set min date 命令和`.focus`同时发生，这导致了问题。

好的，所以首先`.focus`不是触发日期选择器的首选方式。首选方法是使用如下所示的 datapicker show 方法`.datepicker('show');`。所以在这个例子中，我们将使用它。

接下来，我们需要确保`'show'`在 min date 命令之后发生。而且因为该命令没有回调，我将使用 setTimeout

```
$( "#dateFrom" ).datepicker({
    minDate: 0, 
    maxDate: "+2Y",
    showWeek: true,
    weekHeader: 'Wk',
    onSelect: function( selectedDate ) {
        $( "#dateTo" ).datepicker("option", "minDate", selectedDate );
        setTimeout(function(){
            $( "#dateTo" ).datepicker('show');
        }, 16);     
    }
});

$( "#dateTo" ).datepicker({
    maxDate: "+2Y",
    showWeek: true,
    weekHeader: 'Wk'
}); 
```

你为什么说16ms？因为它可能是最长的延迟而不显示在屏幕上。出于这个原因，16ms 是默认的 jquery 动画间隔。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:47:58.800

```
$( "#dateTo" ).datepicker("option", "minDate", selectedDate ).focus(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:47:23.723

我的建议是允许用户在任一日期选择器中选择他们想要的任何日期，然后在选择日期后对两个文本框进行验证。

从第一个 datepicker 中的值设置第二个 datepicker 中的日期范围的问题是，如果用户选择了 7 月 21 日，那么第二个 datepicker 将从 July 21 开始，但是当他们去更改第一个日期选择器到 7 月 1 日，第二个日期选择器将停留在 7 月 21 日之后的日期

# c# - 在 Windows 应用商店应用程序中使用较旧的 dll (.NET)？

> ID：11653529
> 
> 赞同：4
> 
> 时间：2012-07-25T15:41:25.590
> 
> 标签：c#, .net, windows-8, windows-store-apps

我开始着手移植我为在 Windows 8 应用商店中部署而编写的应用程序。这需要针对 .NET 框架的子集编写应用程序。我的应用程序遵循一个架构，其中核心功能在它自己的 dll 中，并且文件系统访问之类的事情是通过 IoC 完成的。基本上，这意味着核心 dll 的唯一依赖项是 System.dll。正因为如此，我认为移植将是一件轻而易举的事——设置我的 IoC 值并连接一个 GUI，然后我就可以开始了。只是，我什至无法从 Windows 商店应用程序（又名 Metro 应用程序）中引用我的核心 dll。

我错过了什么吗？实际上是否必须重写我的核心 dll 才能包含在 Windows 8 应用商店中？我们被告知，如果您使用良好的架构，那么移植将变得轻而易举，这就是我所做的。这只是一个很大的谎言吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:20:47.903

Windows 应用商店应用（以前称为 Metro 风格应用）仅限于使用 .NET Core Profile。[我在对这个问题的回答中添加](https://stackoverflow.com/questions/10644397/compiling-an-win8-app-from-a-win8-metro-app-and-possibly-run-it-sandboxed)了一些有关核心配置文件的详细信息。[有关详细信息，请参阅本文中](http://msdn.microsoft.com/en-us/library/windows/apps/br230302%28v=VS.85%29.aspx)的转换现有 .NET Framework 代码。这不是您的体系结构，而是可供 Windows 应用商店应用程序使用的 .NET Framework 子集。您可能不得不用 WinRT 类型来补充您在 .NET 中使用的某些类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:04:19.240

我没有广泛的知识，并且会尽量坚持我所理解的事实。Metro 框架增加了功能，也限制了功能。有严格的安全限制和完整的 .Net 框架的大部分不可用（例如，您不能使用 System.Data，一些 System.IO 和文件访问方法已发生巨大变化）。Metro 应用程序是隔离的，您将无法像在标准应用程序中那样递归硬盘驱动器上的所有文件（我认为，除了通过隔离实现安全性之外，还鼓励您进入云存储需求）。

除非事情发生了变化，否则 PInvoke 仅限于“批准”的 Win32 API 方法。

有关常见 Win32 API 需求的一些替代方案，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh464945.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464945.aspx)

有关已批准的 Win32/COM API，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/windows/apps/br205762.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br205762.aspx)

很难说一个“好的”架构是否会轻而易举地移植，而不知道该架构中的代码是什么。在我的实用程序框架中，我有一些非常容易移植的东西（或者至少很简单），以及需要大量重写的彻底清洗的东西（例如 System.Data 的丢失对我来说是一个痛处）。有些东西可以设计得很好，但是当你在框架或 API 中取出底层代码时，它是用它编写的，需要重写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T07:05:36.200

我遇到了同样的问题：Metro 应用程序的项目不加载使用 .4 框架创建的 dll。我将 dll 的框架从 4 更改为 3.5，现在 Metro 项目可以看到它们。

# parsing - ANTLR中简单算术语法的错误解析

> ID：11653532
> 
> 赞同：1
> 
> 时间：2012-07-25T15:41:33.603
> 
> 标签：parsing, antlr

我最近开始学习ANTLR。下面是算术表达式的语法。问题是，当我将（调用）表达式规则放入规则中时，`term`即使对于（9+8），它也解析不正确。它以某种方式忽略了正确的括号。

当我放置`add`规则而不是从规则术语中调用表达式规则时，它工作正常。

如：

```
term:
INTEGER
| '(' add ')'
; 
```

谁能告诉我为什么会这样，因为它们或多或少都是一样的。

给出错误结果的语法

```
term
  :
  INTEGER
  | '(' expression ')'
  ;

mult
  :
  term ('*' term)*
  ;

add
  :
  mult ('+' mult)*
  ;

expression
  :
  add
  ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:55:38.750

当我`"(8+9)"`使用从您的语法生成的解析器进行解析时，从`expression`规则开始，我得到以下解析树：

![在此处输入图像描述](../Images/a56d71a324b482f99dc946aea960039d.png)

换句话说：它工作得很好。

也许您正在使用 ANTLRWorks（或 ANTLR IDE）的解释器来测试您的语法？在这种情况下：不要使用解释器，它有问题。请改用 ANTLRWorks 的调试器（图像是从 ANTLRWorks 的调试器导出的）。

# php - 使用 php preg_match 在@something 之后获取文本

> ID：11653535
> 
> 赞同：0
> 
> 时间：2012-07-25T15:41:45.453
> 
> 标签：php, regex

我正在使用

```
if (preg_match('/@type\s+([^\s]+)/', $refProp->getDocComment(), $matches)) {
    return $matches[1];
} else {
     return false;
} 
```

读取数据类型，例如：

```
/**
*@type INT
*/ 
```

在这里，我将得到“INT”字符串。

现在，我想访问洞的东西。像：

```
/**
*@type INT NOT NULL DEFAUTL 1
*/ 
```

包括空格。我该怎么做？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:43:04.290

使用以下表达式：

```
/@type\s+(.+?)\s?$/m 
```

# algorithm - 热门内容算法/随时间衰减的评分

> ID：11653545
> 
> 赞同：33
> 
> 时间：2012-07-25T15:42:25.687
> 
> 标签：algorithm, sorting, ranking

我一直在阅读 + 研究算法和公式，以便为我的用户提交的内容计算分数，以显示当前热门/热门项目，但我承认我在这里有点过头了。

我将提供一些关于我所追求的背景......用户将音频上传到我的网站，音频有几个动作：

*   玩过
*   已下载
*   喜欢
*   收藏

理想情况下，我想要一种算法，每次记录新活动（播放、下载等）时，我都可以更新音频分数，下载操作也比播放更有价值，比如下载和收藏一样。

如果可能的话，我希望超过 1 周的音频从列表中大幅下降，以使更新的内容更有可能成为趋势。

我已经阅读了看起来不错的 reddits 算法，但我对如何调整它以利用我的多个变量以及在大约 7 天后放弃旧文章感到困惑。

我们感兴趣的一些文章：

*   [https://medium.com/hacking-and-gonzo/how-reddit-ranking-algorithms-work-ef111e33d0d9（reddits](https://medium.com/hacking-and-gonzo/how-reddit-ranking-algorithms-work-ef111e33d0d9)算法）
*   [http://www.evanmiller.org/rank-hotness-with-newtons-law-of-cooling.html](http://www.evanmiller.org/rank-hotness-with-newtons-law-of-cooling.html)

任何帮助表示赞赏！

保罗

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-25T16:39:13.543

# Reddits 旧公式和一点下降

基本上你可以使用 Reddit 的公式。由于您的系统仅支持投票，因此您可以对它们进行加权，结果如下：

```
def hotness(track)
    s = track.playedCount
    s = s + 2*track.downloadCount
    s = s + 3*track.likeCount
    s = s + 4*track.favCount
    baseScore = log(max(s,1))

    timeDiff = (now - track.uploaded).toWeeks

    if(timeDiff > 1)
        x = timeDiff - 1
        baseScore = baseScore * exp(-8*x*x)

    return baseScore 
```

该因素`exp(-8*x*x)`将为您提供所需的下车：

![指数下降](../Images/4dec0670f67515f14fdc3ed00bf33999.png)

# 背后的基础

您可以使用任何比您的分数上升更快的函数归零。由于我们`log`在分数上使用，即使是线性函数也可以成倍增加（只要您的分数没有呈指数增长）。

所以你所需要的只是一个函数，`1`只要你不想修改分数，它就会返回，然后就会下降。我们上面的例子形成了这个功能：

```
multiplier(x) = x > 1 ? exp(-8*x*x) : 1 
```

如果您想要不那么陡峭的曲线，您可以改变乘数。 [![可变乘数](../Images/a4b362391c9cf284ee18104adbcf6a54.png)](https://i.stack.imgur.com/j7aws.png)

# C++ 中的示例

假设在给定小时内播放给定曲目的概率是 50%，下载 10%，喜欢 1%，喜欢 0.1%。然后下面的 C++ 程序会给你一个分数行为的估计：

```
#include <iostream>
#include <fstream>
#include <random>
#include <ctime>
#include <cmath>

struct track{
    track() : uploadTime(0),playCount(0),downCount(0),likeCount(0),faveCount(0){}
    std::time_t uploadTime;    
    unsigned int playCount;
    unsigned int downCount;
    unsigned int likeCount;
    unsigned int faveCount;    
    void addPlay(unsigned int n = 1){ playCount += n;}
    void addDown(unsigned int n = 1){ downCount += n;}
    void addLike(unsigned int n = 1){ likeCount += n;}
    void addFave(unsigned int n = 1){ faveCount += n;}
    unsigned int baseScore(){
        return  playCount +
            2 * downCount +
            3 * likeCount +
            4 * faveCount;
    }
};

int main(){
    track test;
    const unsigned int dayLength = 24 * 3600;
    const unsigned int weekLength = dayLength * 7;    

    std::mt19937 gen(std::time(0));
    std::bernoulli_distribution playProb(0.5);
    std::bernoulli_distribution downProb(0.1);
    std::bernoulli_distribution likeProb(0.01);
    std::bernoulli_distribution faveProb(0.001);

    std::ofstream fakeRecord("fakeRecord.dat");
    std::ofstream fakeRecordDecay("fakeRecordDecay.dat");
    for(unsigned int i = 0; i < weekLength * 3; i += 3600){
        test.addPlay(playProb(gen));
        test.addDown(downProb(gen));
        test.addLike(likeProb(gen));
        test.addFave(faveProb(gen));    

        double baseScore = std::log(std::max<unsigned int>(1,test.baseScore()));
        double timePoint = static_cast<double>(i)/weekLength;        

        fakeRecord << timePoint << " " << baseScore << std::endl;
        if(timePoint > 1){
            double x = timePoint - 1;
            fakeRecordDecay << timePoint << " " << (baseScore * std::exp(-8*x*x)) << std::endl;
        }
        else
            fakeRecordDecay << timePoint << " " << baseScore << std::endl;
    }
    return 0;
} 
```

结果：

![衰变](../Images/998dcfac3ceeb2c82fe5cc4590751b5a.png)

这对你来说应该足够了。

# python - 将 Python 从 2.6 更新到 2.7 时，更新 Python 包的正确方法是什么？

> ID：11653548
> 
> 赞同：6
> 
> 时间：2012-07-25T15:42:30.623
> 
> 标签：python, package, egg

我已经为 Python 2.6 安装**了很多**python 包。现在我想将 Python 升级到 2.7。是否有适当或系统的方法来更新所有已安装的软件包？

在我的系统中，所有的包都安装在 /usr/lib64/python2.6/site-packages/ 和 /usr/lib/python2.6/site-packages/

一种明显的方法是安装Python 2.7，下载所有的包源或egg文件，然后一一重新安装。但是，一些有用的软件包，如 numpy 和 scipy，在安装方面是臭名昭著的，尤其是当需要从源代码安装时。我预计我需要花费几个小时来查找软件包并解决这里和那里的安装问题。

有人对系统更新已安装的软件包有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:04:53.670

首先，您**永远不应该**在任何操作系统上使用 sudo 使用 easy_install 在系统库文件夹中安装 Python 包。

[http://jamiecurle.co.uk/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/#comment-573429347](http://jamiecurle.co.uk/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/#comment-573429347)

正确的过程是使您的安装过程可重复。Python 世界中存在两种常用的解决方案。[这些解决方案会自动从http://pypi.python.org](http://pypi.python.org)下载正确版本的 Python 包

**画中画**

pip 和 requirements.txt [http://www.pip-installer.org/en/latest/requirements.html](http://www.pip-installer.org/en/latest/requirements.html)在 vi​​rtualenv [http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv)

**建设**

构建，来自 Plone CMS 的示例[https://github.com/plone/Installers-UnifiedInstaller/blob/master/base_skeleton/versions.cfg](https://github.com/plone/Installers-UnifiedInstaller/blob/master/base_skeleton/versions.cfg)

Buildout 还可以为需要本地库的包进行配置、制作、安装样式安装。例如存在 libxml2 + lxml 的解决方案

[http://pypi.python.org/pypi/z3c.recipe.staticlxml/](http://pypi.python.org/pypi/z3c.recipe.staticlxml/)

（注意：buildout 不需要 virtualenv，因为它自己与系统 Python 隔离）

# templates - Ember 模板显示两次

> ID：11653550
> 
> 赞同：0
> 
> 时间：2012-07-25T15:42:37.660
> 
> 标签：templates, ember.js, handlebars.js, ember-old-router

有一个简单的 ember.js 应用程序，其中一个视图显示在网页的特定位置。看看这个 jsfiddle：http: [//jsfiddle.net/jkkK3/9/](http://jsfiddle.net/jkkK3/9/)

```
App = Ember.Application.create({

  ready: function(){
      this._super();
      this.ApplicationView.create().appendTo(".content");
  },

  ApplicationController: Ember.Controller.extend({
  }),

  ApplicationView: Ember.View.extend({
    templateName: 'application'
  }),

  Router: Ember.Router.extend({
    root: Ember.Route.extend({  
    })
  })
}); 
```

我的问题是：为什么“这里的一些内容”元素会显示两次？当我删除路由器时它可以工作，但这正是我不能做的，因为我尝试将路由器添加到我的 Ember 应用程序中。你能帮我在红框内只显示一次应用程序视图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:00:24.337

使用路由器时，默认使用applicationController/view。在您准备好的方法中，您明确地附加它。所以“应用程序”模板被附加了两次。删除在 ready 方法中附加它，它只会被附加一次。

默认情况下，它附加到正文，但如果您想覆盖使用 Ember.Application 的 rootElement 属性

```
Ember.Application.create( {
    rootElement : '.content',
    ....
}) 
```

# c# - 当我在 C# 中添加到 BindingList 时，让列表框不选择项目

> ID：11653556
> 
> 赞同：1
> 
> 时间：2012-07-25T15:42:48.897
> 
> 标签：c#, listbox, bindinglist

所以，我有一个绑定到 BindingList 的列表框 GUI 元素。我遇到的问题是，每当我将一个项目添加到 BindingList 时，列表框中的相应项目就会被选中。这很重要，因为它会触发列表框中的 SelectedIndexChanged 事件，该事件被设置为资源密集型。

如何删除此默认行为？

编辑：这是我正在使用的代码

```
BindingList<KeyValuePair<int, string>> savedGLs;
public Form1()
{
    InitializeComponent();
    savedGLs = new BindingList<KeyValuePair<int, string>>();
    lstGLs.DataSource = savedGLs;//lstGLs is my listbox
    lstGLs.DisplayMember = "Value";
    lstGLs.ValueMember = "Key";
    populateMgmtCos();
    populateSavedGLs();//this is where the SelectedIndexChanged event is firing
}
private void populateSavedGLs()
{
    savedGLs.Clear();
    string errmsg = string.Empty;
    using (SqlConnection sqlConn = new SqlConnection(getConnString(true)))
    {
        string sCmd = " SELECT Name, Hmy FROM GLTable";
        DataTable dt = MySqlHelper.ExecuteForDataTable(sqlConn, sCmd, out errmsg);
        foreach (DataRow dr in dt.Rows)
            savedGLs.Add(new KeyValuePair<int,string>(int.Parse(dr["Hmy"].ToString()), dr["Name"].ToString().Trim()));
     }
} 
```

EDIT2：可能是因为我使用的是 3.5 框架吗？我刚刚创建了一个新项目，其中几乎没有任何内容，除了复制我的问题的代码。BindingList 的 Add() 方法似乎在我的列表框上调用 SelectedIndexChanged 方法，添加第一项时调用两次，之后每次调用一次。这是该新项目的完整代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        BindingList<KeyValuePair<int, string>> bl;
        public Form1()
        {
            InitializeComponent();
            bl = new BindingList<KeyValuePair<int, string>>();
            listBox1.DataSource = bl;
            bl.Add(new KeyValuePair<int, string>(1, "blah1"));
            bl.Add(new KeyValuePair<int, string>(2, "blah2"));
            bl.Add(new KeyValuePair<int, string>(3, "blah3"));
            bl.Add(new KeyValuePair<int, string>(4, "blah4"));
            bl.Add(new KeyValuePair<int, string>(5, "blah5"));
        }

        private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            Console.WriteLine("blah");
        }
    }
}
output:
blah
blah
blah
blah
blah
blah 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:38:50.880

最后，可重现。

不要在构造函数期间将这些项目添加到 BindingList。

快速修复是覆盖表单的 OnLoad 方法：

```
protected override void OnLoad(EventArgs e) {
  bl.Add(new KeyValuePair<int, string>(1, "blah1"));
  bl.Add(new KeyValuePair<int, string>(2, "blah2"));
  bl.Add(new KeyValuePair<int, string>(3, "blah3"));
  bl.Add(new KeyValuePair<int, string>(4, "blah4"));
  bl.Add(new KeyValuePair<int, string>(5, "blah5"));
  base.OnLoad(e);
} 
```

或从您的生产代码：

```
public Form1()
{
  InitializeComponent();
  savedGLs = new BindingList<KeyValuePair<int, string>>();
  lstGLs.DisplayMember = "Value";
  lstGLs.ValueMember = "Key";
  lstGLs.DataSource = savedGLs;
}

protected override void OnLoad(EventArgs e) {
  populateMgmtCos();
  populateSavedGLs();
} 
```

# python - Python：ftp 文件卡在缓冲区中？

> ID：11653561
> 
> 赞同：1
> 
> 时间：2012-07-25T15:42:54.210
> 
> 标签：python, ftp

当我使用此方法下载带有 ftplib 的文件时：

```
ftp = ftplib.FTP()
ftp.connect("host", "port")
ftp.login("user", "pwd")
size = ftp.size('locked')

def handleDownload(block):
    f.write(block)
    pbar.update(pbar.currval+len(block))

f = open("locked", "wb")
pbar=ProgressBar(widgets=[FileTransferSpeed(), Bar('>'), ' ', ETA(), ' ',    ReverseBar('<'), Percentage()],     maxval=size).start()
ftp.retrbinary("RETR locked",handleDownload, 1024)
pbar.finish() 
```

如果文件小于 1mb，则文件将被卡在缓冲区中，直到我下载另一个具有足够数据的文件才能将其推出。我试图通过将 ftp.size(filename) 除以 20 来制作动态缓冲区，但同样的事情仍然发生。那么我该如何做才能下载小于 1 mb 的单个文件并仍然使用回调函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:38:01.683

正如 Wooble 在评论中所说，我没有像白痴那样 f.close() 文件。它解决了这个问题。

# e-commerce - 在 WebSphere Commerce 的结账过程/流程中调用了哪些命令？

> ID：11653566
> 
> 赞同：2
> 
> 时间：2012-07-25T15:43:10.250
> 
> 标签：e-commerce, websphere, websphere-7, websphere-commerce, wcs

从 AddToCart -> ShoppingCart -> CheckoutSignIn -> ShippingInfo -> ShippingMethod -> PaymentMethod -> Order Summary（基本上是从 Shopping Cart 页面导航到 Order Summary 页面）调用的*所有控制器命令和任务命令是什么？*这可能是一个大问题......是否有任何链接可以提供这样的答案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:24:53.783

我认为该链接将回答您的问题。（在图表下向下滚动）

[http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp?topic=%2Fcom.ibm.commerce.developer.doc%2Frefs%2Frosordstattran.htm](http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp?topic=%2Fcom.ibm.commerce.developer.doc%2Frefs%2Frosordstattran.htm)

您还可以在该页面上获取战利品：http: [//publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp ?topic=%2Fcom.ibm.commerce.developer.doc%2Frefs%2Frosordtaskcmdscont.htm](http://publib.boulder.ibm.com/infocenter/wchelp/v7r0m0/index.jsp?topic=%2Fcom.ibm.commerce.developer.doc%2Frefs%2Frosordtaskcmdscont.htm)

希望你能找到你的答案。

问候，吉米。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T21:41:41.520

这里简单回答如下

(1) 能够将商品添加到购物车 - OderItemAdd
(2) 能够更新购物车中的商品 - OrderItemUpdate
(3) 删除购物车中的商品 - OrderItemDelete
(4) 关联送货地址到订单 - OrderItemUpdate
(5) 将账单地址关联到订单 - OrderItemUpdate
(6) 锁定商业订单 - OrderPrepare
(7) 提交订单以进行处理 - OrderProcess

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T04:12:31.587

以下是每个子系统的控制器命令 -

**目录**

属性CreateControllerCmd

ProductPricingControllerCmd

CategoryDisplayControllerCmd

ProductDisplayControllerCmd

GetContractUnitPriceCmd

**晋升**

PromotionCodeAddRemoveControllerCmd

AddOrderItemWithPromotionCodeOrCouponCmd

优惠券AddRemoveControllerCmd

**成员**

PostOrgEntityAddCmd

PostOrgEntityUpdateCmd

CheckUserInMemberGroupCmd

LogonCmdImpl

DBAuthenticationCmd

LDAPAuthenticationCmd

注销命令

**命令**

订单创建命令

OrderItemAddCmd

OrderItemDeleteCmd

OrderItemUpdateCmd

OrderProcessCmd

ProcessOrderCmd

准备订单命令

PreProcessOrderCmd

订单取消命令

订单显示命令

# php - 坏词过滤 if else 集成

> ID：11653567
> 
> 赞同：0
> 
> 时间：2012-07-25T15:43:13.900
> 
> 标签：php, if-statement

有没有办法在下面提到的坏词过滤器代码中实现 if else ，这样当用户输入任何坏词时，它会给出错误“您的输入包含不允许的词”而不是替换坏词

```
FUNCTION BadWordFilter(&$text, $replace){

$file_array = file('/path/to/badword.txt');

$bads = array();
foreach ($file_array as $word_combo) {
$bads[] = explode(',', $word_combo);
}

IF($replace==1) {                                        //we are replacing
  $remember = $text;

  FOR($i=0;$i<sizeof($bads);$i++) {               //go through each bad word
       $text = EREGI_REPLACE($bads[$i][0],$bads[$i][1],$text); //replace it
  }

  IF($remember!=$text) RETURN 1;                     //if there are any changes, return 1

} ELSE {                                                  //we are just checking

  FOR($i=0;$i<sizeof($bads);$i++) {               //go through each bad word
       IF(EREGI($bads[$i][0],$text)) RETURN 1; //if we find any, return 1
  }     
 }

}

$any = BadWordFilter($qtitle,1); 
$any = BadWordFilter($qtitle,0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:13:55.027

如果我理解正确，您只需要一种方法来判断函数的返回值是否表明“坏词”已被替换或找到。鉴于您目前拥有的内容，您已经知道是否要替换它们，您只需要在`return 0;`方法的末尾添加一个，这将表明没有进行替换或没有找到坏词。

我已经以应该处理此问题的方式重写了您的示例。在重写中，我还分别更改了您对[`eregi_replace()`](http://php.net/eregi_replace)and [`eregi()`](http://us2.php.net/eregi)with[`preg_replace()`](http://us2.php.net/preg_replace)和的用法[`preg_match()`](http://us2.php.net/preg_match)。前两种方法已弃用，不应使用。此外，我还没有测试以下内容，它仅作为概念验证：

```
function BadWordFilter(&$text, $replaceWords = false) {
    $file_array = file('/path/to/badword.txt');
    $bads = array();
    foreach ($file_array as $word_combo) $bads[] = explode(',', $word_combo);

    if ($replaceWords == true) {
        $original = $text;
        foreach ($bads as $bad) {
            // replace any bad word instance
            $text = str_replace($bad[0], $bad[1], $text);
        }
        // check if bad words have been replaced
        return ($text == $original) ? false : true;
    } else {
        foreach ($bads as $bad) {
            if (strpos($text, $bad[0]) !== false) {
                // found a bad word
                return true;
            }
        }
        // no bad words found
        return false;
    }
}

$error = '';
// replace words:
if (BadWordFilter($qtitle, true)) {
    $error = 'Your input contained bad words and they have been replaced.';
}
// don't replace words:
if (BadWordFilter($qtitle, false)) {
    $error = 'Your input contains words that are not allowed.';
} 
```

**更新：**在“坏词”文件中看到示例输入文本后，不需要正则表达式。我已经分别用和替换了`preg_replace()`和的原始替换。`preg_match()`[`str_replace()`](http://php.net/str_replace)[`strpos()`](http://php.net/strpos)

# php - 在 php 中传递不带 ?= 的变量（可能是 .htaccess）

> ID：11653572
> 
> 赞同：0
> 
> 时间：2012-07-25T15:43:45.847
> 
> 标签：php, mysql, html, .htaccess

我正在用 php/mysql 制作一个带有自定义 cms 的网站。

它的布局如下：

**MYSQL数据库** 表名id、标题、描述、关键字、内容

**CMs** 连接数据库，列出表的内容 获取 id 编辑标题、描述、关键字、内容 保存回数据库

**网站** 连接到数据库，其中 title=home

**php页面示例**

```
<?php //connect to database ?>
<html>
<title><?php echo $title;?></title>
<meta name="description" content="<?php echo $description; ?>" >
<meta name="keywords" content="<?php echo $keywords; ?>" >
<body>
<?php echo $content; ?>
</body>
<?php include_once("footer.php"); ?> 
```

所以想法是连接到页面并提供标题，然后连接到数据库，从表中检索适当的行并显示页面，例如：

[http://www.mysite.com/index.php?title=home](http://www.mysite.com/index.php?title=home)

将显示网站的主页。

有没有办法从 url 中删除**index.php?title=**并仍然传递变量，所以用户会访问[http://www.mysite.com/home](http://www.mysite.com/home)

我认为有通过编辑 .htaccess 文件，但我不确定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:59:43.510

您可以使用 mod_rewrite 来完成。把它放在你的 .htaccess 中：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^([A-Za-z0-9-]+)/?$ index.php?title=$1 [L] 
```

这些行会将[http://www.mysite.com/var](http://www.mysite.com/var)或[http://www.mysite.com/var/](http://www.mysite.com/var/)等每个 url 重定向到[http://www.mysite.cm/index.php?title=var](http://www.mysite.cm/index.php?title=var)

此重定向将是透明的。

我建议您查看一些有关 URL 重写和 mod_rewrite 的文档，以最好地理解这些行，并能够自己制作。

# r - knitr 中的自动 ggplot2 示例库

> ID：11653573
> 
> 赞同：12
> 
> 时间：2012-07-25T15:43:46.147
> 
> 标签：r, ggplot2, knitr

我正在尝试`ggplot2`使用`knitr`. 为了快速做到这一点，我想使用内置的`example`s 来填充内容。

经过一些试验和错误，我已经到了这一点：

```
\documentclass[a4paper,titlepage]{tufte-handout}
\usepackage{pdflscape}
\usepackage{graphicx}
\usepackage{alltt}

<<setup, include=FALSE, cache=FALSE>>=
options(replace.assign=TRUE,tidy=TRUE)
library(ggplot2)
library(plyr)
library(scales)
geoms <- setdiff(apropos("^geom_"),"geom_blank")
@

\title{ggplot2 Gallery}

\begin{document}
\maketitle

<<examples, echo=FALSE, comment=NA>>=
for(i in geoms){
    writeLines(paste0("\\section{",gsub("_","\\\\_",i),"}"))
    do.call("example",list(i))
}
@

\end{document} 
```

但是仍然有一些我无法解决的问题：

*   我似乎无法在块中混合`markup`和`asis`结果选项，以便生成部分标题。（这对于稍后的文档导航至关重要）。有没有其他方法可以在块中生成书写 LaTex？

*   有一些示例会引发错误（这就是`geom_blank`排除的原因）。knitr[文档](http://yihui.name/knitr/options)指出，如果出现错误，计算会继续进行，但似乎只是 knit 过程在继续；示例循环在此时停止。有没有办法避免示例中的错误部分？

*   代码输出的`example`语法未突出显示。（有用但不是必需的）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T19:24:48.480

完整代码参见[021-ggplot2-geoms.Rnw](https://github.com/yihui/knitr-examples/blob/master/021-ggplot2-geoms.Rnw)。基本思想是在编织之前构建代码块。代码很短，所以可能我不需要过多解释。

理论上你应该能够得到这样的东西（超过 200 页的`ggplot2`例子）：

![由 knitr 生成的 ggplot2 几何图形](../Images/11d8ae358c85a567d43dd9206bb26435.png)

# linux - 在 windows azure 中设置对 windows 虚拟机的 ssh 或命令行访问

> ID：11653575
> 
> 赞同：2
> 
> 时间：2012-07-25T15:43:54.970
> 
> 标签：linux, shell, azure

我在 Windows Azure 中有 linux 和 windows vm。我使用 ssh 连接到我的 linux vm，它在命令行上运行良好。对于 Windows vm，我必须先使用 RD 服务登录，然后才能完成我的工作，这很复杂，而且不是我想要的。我希望有一些类似于 linux vm 的命令行连接到我的 windows vm，所以当我连接到我的 linux 和 windows vm 时，我仍然使用桌面上的命令窗口。

如何在 windows azure 中配置 ssh 或任何命令行访问 windows vm？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:22:38.450

你可以安装[Cygwin](http://www.cygwin.com/)，它有一个 OpenSSH 服务器并且是免费的。

它还安装了许多您可能熟悉的命令行工具（来自 Linux），例如 bash、grep、less、sort、tar、gzip 等。

使用 OpenSSH 安装 Cygwin 后，在 cygwin 提示符下运行：

```
ssh-host-config
net start sshd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:49:45.083

除了 OpenSSH（这是一个不错的选择）之外，Windows 上还有其他 sshd 替代方案： [WinSSHD](http://www.bitvise.com/winsshd) - 免费供个人、非商业用途和[FreeSSHd](http://www.freesshd.com/)（例如开源）。

# windows - 我们能否在新的 Azure IAAS 上安装 MS CRM On Premise

> ID：11653581
> 
> 赞同：0
> 
> 时间：2012-07-25T15:44:14.383
> 
> 标签：windows, azure, cloud, crm, iaas

我们可以在 Windows Azure IAAS 平台上安装 Microsoft CRM。这是否可以导入 MS CRM 的 Windows VM。

有人试过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:31:59.323

根据我的个人知识，在 Windows Azure 虚拟机（IaaS 平台）上运行 Microsoft CRM 尚不受支持。出于技术测试/评估目的，您肯定可以安装在单个虚拟机上并对其进行测试。

以下链接显示了 Windows Azure 虚拟机上的 Microsoft 产品支持列表：http: [//support.microsoft.com/kb/2721672/de](http://support.microsoft.com/kb/2721672/de)

# c - 为什么char字符串中没有取消引用运算符？

> ID：11653583
> 
> 赞同：1
> 
> 时间：2012-07-25T15:44:17.320
> 
> 标签：c, dereference

假设我有两个功能：

```
void function1(int *ptr) {
     printf("%d", *ptr);
} 
```

和

```
void function2(char *str) {
     printf("%s", str);
} 
```

为什么 function2 工作，当之前没有尊重运算符时`str`？`str`那里只有它指向的**地址**，而不是我想的**值。**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T15:45:50.390

> 当 str 之前没有遵循运算符时，为什么 function2 起作用

因为`%s`，按照标准的定义，需要一个`char *`，即一个地址。

> 7.21.6.1
> 
> 如果不存在 l 长度修饰符，则参数**应为指向字符类型数组的初始元素的指针**。数组中的字符被写入（但不包括）终止空字符。如果指定了精度，则写入的字节数不会超过这个数。*如果未指定精度*或大于数组的大小，*则数组应包含空字符*。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T15:46:26.170

因为 a`pointer to a char`在使用时是特殊的`printf`。它不是将其视为指向单个字符的指针，而是将其视为指向`NUL`分隔字符数组中第一个元素的指针，打印一个字符串而不是一个指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:48:37.747

您在 C 中引用字符串的方式是通过其第一个字符的地址。读取字符串的函数将读取该地址处的字节，对其进行处理（例如打印它，在 的情况下`printf()`），然后移动到下一个字符。这一直持续到找到零字节，表示字符串的结尾。

这基本上是一种节省内存的方法。其他基本数据类型，如`int`，足够小，可以廉价地复制它们的值，因此无需引用对象的地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:04:56.660

因为当我们写

```
char *s="hello"; 
```

`s`默认情况下，采用第一个元素的第一个地址的地址，即 printf 中的“h”地址和 %s 打印整个字符串而不是元素@第一个位置。因此，它从不需要遵从运算符。是否打印第一个元素或所有元素可能会使 C 编译器感到困惑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T16:09:33.527

这样做的原因是因为该`printf()`函数已被编写为理解传递给它的不同类型的参数。字符串中的格式说明符告诉`printf()`每个参数应该是什么。然后文档会告诉您要传递给它的内容。

**IE。基本上它可以工作，因为`printf()`遵循定义的规范，并且您正在遵循它。**

因此，在您的第一个示例中，您使用 %d 格式。 `printf()`这意味着参数应该是一个整数值。不是指向整数的指针，而是整数。这就是为什么这有效：

```
void function1(int *ptr) {
     printf("%d", *ptr);
} 
```

这不会：

```
void function1(int *ptr) {
     printf("%d", ptr);
} 
```

**你的第二个例子是一个字符串，这里有一些混淆的可能性，因为 C 中的字符串并不是真正的直接数据类型（因此）。** 它们是指向一个字符的指针，该字符后跟其他字符，然后以 NULL \0 终止。

```
void function2(char *str) {
     printf("%s", str);
} 
```

现在，如果字符串是 C 中的一种数据类型，那么您可能会以与处理其他值相同的方式传递它们（这纯粹是假设）：

```
void function2(string str) {
     printf("%s", str);
} 
```

总而言之：

```
%d -> int
%s -> char * 
```

# ruby-on-rails-3 - Rails，Rake 中止了！未定义的方法'active_record'

> ID：11653584
> 
> 赞同：1
> 
> 时间：2012-07-25T15:44:17.537
> 
> 标签：ruby-on-rails-3, rake, rake-task

我确定我错过了一些基本的东西。

我在开发环境中有一个正常工作的应用程序。比我有一些我无法正确解释的修改（使用迁移并尝试插入seed_dump gem）。现在每个 rake 命令都会抛出一个错误：

```
C:\Programozas\Rails Apps\sorsveto>rake about
rake aborted!
undefined method `active_record' for #<Rails::Application::Configuration:0x3e482
98>

Tasks: TOP => about => environment
(See full trace by running task with --trace) 
```

或者

```
C:\Programozas\Rails Apps\sorsveto>rake db:migrate
rake aborted!
Don't know how to build task 'db:migrate'

(See full trace by running task with --trace) 
```

有我的gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.2'
gem 'bootstrap-sass', '2.0.0'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.5'

group :development do
  gem 'sqlite3', '1.3.5'
  gem 'annotate', '~> 2.4.1.beta'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test, :development do
  gem 'rspec-rails', '~> 2.8.rc'
  gem 'shoulda', '~> 3.0.1'
  gem 'shoulda-context'
  gem 'shoulda-matchers'
  gem 'eventmachine', '1.0.0.rc.4'
  gem 'listen', '0.4.7'
  gem 'guard-livereload', '1.0.0'
  gem 'guard-rspec', '0.5.5'
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.0'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
  gem 'cucumber-rails', '1.2.1'
  gem 'database_cleaner', '0.7.0'
end

# Test gems on Windows
group :test do
  gem 'rb-fchange', '0.0.5'
  gem 'rb-notifu', '0.0.4'
  gem 'win32console', '1.3.0'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

我不知道如何解决这个问题。我尝试重新安装或安装 0.8.7 并删除它（现在我有版本 0.9.2.2）。我什至尝试安装 0.9.2。许多组合（一次多个并运行 bundle exec rake XY）没有成功。我什至尝试将其插入到我的 gem 文件中：

```
require 'rake/dsl_definition'
require 'rake' 
```

都没有帮助。有任何想法吗？所有帮助mutch appriciated。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T07:54:21.570

它是如此基本和烦人，以至于我什至都感到羞耻。

不知何故在我的 application.rb 我的这一行：

```
require "active_record/railtie" 
```

注释掉了。删除 # 并正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T10:35:32.050

就我而言，我的 Gemfile 不知何故被删除了。可能是因为我在 CMD-C 中途中止了一个 rake 动作。

我用`git co Gemfile`

# javascript - 如何禁用对链接的单击也调用与其父容器挂钩的javascript事件？

> ID：11653586
> 
> 赞同：2
> 
> 时间：2012-07-25T15:44:19.313
> 
> 标签：javascript, jquery, javascript-events

我在 html 中的一个表中有一行，它连接到以下 javascript 函数：

```
<script type='text/javascript'>
        $(window).load(function () {
            $(".clickable").click(function () {

                $(this).next().toggle();

            });
        }); 
```

此函数在该行正下方展开一些内容。我在这一行还有一个链接，用于点击进入另一个页面。它看起来像这样：

![在此处输入图像描述](../Images/9a63ecbf24d53763805bc9bcb034b29e.png)

当我单击该链接时，它会在导航到它应该去的页面之前快速展开内容。

如何更改它，以便如果单击链接，它会转到该页面***而不***调用扩展额外内容的 javascript 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T15:47:09.560

在链接上，您要停止传播：

```
$('.myNavLink').click(function(e){
   e.stopPropagation();
}); 
```

文档链接：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

**编辑**由于您在实施此操作时遇到问题，这里是一个活生生的例子：

[http://jsfiddle.net/Vs5B8/](http://jsfiddle.net/Vs5B8/)

您会看到它有一个包含 1 行的表格，其中一个单元格中有一个链接：

```
<table>
    <tr class="clickable">
        <td> one </td>
        <td> two </td>
        <td> <a href='http://www.google.co.uk' class="myNavLink"> click me </a> </td>
    </tr>
</table> 
```

我已经在行上连接了一个点击事件：

```
$('.clickable').click(function(){
   alert("row click");
}); 
```

因此，单击行中的任意位置都会发出警报`row click`，甚至在您单击超链接时也会发出警报。但是，将单击事件添加`a`到停止传播将停止此行为（即，单击链接时不显示警报）：

```
$('.myNavLink').click(function(e){
   e.stopPropagation();
}); 
```

# matlab - 如何曲线同时拟合两条曲线？如何曲线拟合复数？

> ID：11653588
> 
> 赞同：1
> 
> 时间：2012-07-25T15:44:26.677
> 
> 标签：matlab, curve-fitting, complex-numbers

更具体地说，我正在处理一个问题，我收集了对应于形式复杂函数的实部和虚部的实验数据`y(x) = a + b/(x*i) + c/(x+i) + d/(x*i)` [注意：我使用`i`的是虚数单位。我稍微简化了这个功能，但不是很明显]。换句话说，我有（理论上）我知道的数据`y[x1 x2 ... xn] = [t1 t2 ... tn] + [s1 s2 ... sn]*i`。因此，对于任何给定的`x`值，我都独立收集了 的实部和虚部的实验数据`y`。
由于 的虚部和实部`y`都依赖于相同的参数（在上面的等式中给出`a,b,c,d`：），因此能够同时或作为一个单元曲线拟合这些数据将是非常有益的。

我考虑过：

1.  曲线拟合时：尝试将其视为一个函数，其中有某种标签或指示器指定“真实”或“虚构”，允许函数正确输出。

2.  将其曲线拟合为单个复杂函数。

3.  曲线拟合作为两个函数，同时或以迭代交替的方式朝向解决方案。

我一直未能成功实施这些想法。它们中的任何一个都可能吗？是否有另一种解决方案可以给我答案？关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:17:27.917

`nlinfit`对我来说，虚值似乎工作得很好：

```
beta = nlinfit(x, y, @(b, x) b(1) + b(2)/(x*i) + b(3)/(x+i) + b(4)/(x*i), randn(4,1)); 
```

这可能相当于同时最小化实部和虚部的平方误差之和。

# actionscript-3 - 在 as3 中调整重叠按钮的大小

> ID：11653590
> 
> 赞同：0
> 
> 时间：2012-07-25T15:44:34.343
> 
> 标签：actionscript-3

提前感谢大家的帮助。我做了一个 100% flash 背景拉伸...这是 main.as 的代码：

```
package {

import flash.display.MovieClip;
import flash.text.TextField;
import flash.events.Event;
import flash.net.navigateToURL;
    import flash.net.URLRequest;
import flash.events.MouseEvent;

public class Main extends MovieClip

{
    public function Main()
    {
        init();

        checkResize();

    clip_mc.addEventListener(MouseEvent.CLICK, siteNav1);

    clip_amministra.addEventListener(MouseEvent.CLICK, siteNav2);

    clip_chisiamo.addEventListener(MouseEvent.CLICK, siteNav4);

    }

    function siteNav1(e:MouseEvent):void {
    navigateToURL(new URLRequest("http://www.amicolibro.org/index.php"), "_self");

    }

    function siteNav2(e:MouseEvent):void {
    navigateToURL(new URLRequest("http://www.amicolibro.org/log-in-amministratore.php"), "_self");

    }

    function siteNav4(e:MouseEvent):void {
    navigateToURL(new URLRequest("http://www.amicolibro.org/chi-siamo.php"), "_self");

    }                           

    private function init():void
    {
        stage.frameRate=31;

        bg_mc.x=0;
        bg_mc.y=0;
        bg_mc.width=stage.stageWidth;
        bg_mc.height=stage.stageHeight;

        clip_mc.x=stage.stageWidth/6.3;
        clip_mc.y=stage.stageHeight/2.2;

        clip_amministra.x=stage.stageWidth/1.3;
        clip_amministra.y=stage.stageHeight/2;

              clip_chisiamo.x=stage.stageWidth/10;
        clip_chisiamo.y=stage.stageHeight/1.19; 

    }

    private function checkResize():void
    {
        stage.addEventListener(Event.RESIZE, resizeStage);
    }

    private function resizeStage(event:Event):void 
    {
        init();
    }

}
} 
```

是否可以按比例调整按钮 clip_mc、clip_amministra、clip_chisiamo 的大小？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T11:46:49.960

我以这种方式解决了：

包裹 {

```
import flash.display.MovieClip;
import flash.text.TextField;
import flash.events.Event;
import flash.net.navigateToURL;
    import flash.net.URLRequest;
import flash.events.MouseEvent;

public class Main extends MovieClip

{
    public function Main()
    {
        init();

        resizeHandler();

        checkResize();

    clip_mc.addEventListener(MouseEvent.CLICK, siteNav1); 

    clip_amministra.addEventListener(MouseEvent.CLICK, siteNav2);

    clip_chisiamo.addEventListener(MouseEvent.CLICK, siteNav4);

    }

    function siteNav1(e:MouseEvent):void {                                       
    navigateToURL(new URLRequest("http://www.amicolibro.org/index.php"), "_self");

    }

    function siteNav2(e:MouseEvent):void {
    navigateToURL(new URLRequest("http://www.amicolibro.org/log-in-amministratore.php"), "_self");

           }

    function siteNav4(e:MouseEvent):void {
    navigateToURL(new URLRequest("http://www.amicolibro.org/chi-siamo.php"), "_self");

    }

    private function init():void
    {
        stage.frameRate=31;

        bg_mc.x=0;                           
        bg_mc.y=0;
        bg_mc.width=stage.stageWidth;
        bg_mc.height=stage.stageHeight;

        clip_mc.x=stage.stageWidth/6.3;  
        clip_mc.y=stage.stageHeight/2.2;  

        clip_amministra.x=stage.stageWidth/2.7; 
        clip_amministra.y=stage.stageHeight/4.9; 

            clip_chisiamo.x=stage.stageWidth/10;
        clip_chisiamo.y=stage.stageHeight/1.19;

        }       

    private function resizeHandler(event:Event=null):void  //resize buttons

          {

           var sw:Number = stage.stageWidth;
           var sh:Number = stage.stageHeight;

          clip_mc.width = sw /8;         // clip_mc is 1/8 as wide as the stage..can change this number to be whatever works best
      clip_mc.height = sh /8;    // clip_mc is 1/8 as high as the stage..can change this number to be whatever works best

          clip_amministra.width = sw /10;     // clip_amministra is 1/10 as wide as the stage..can change this number to be whatever works best
      clip_amministra.height = sw /10;    // clip_amministra is 1/10 as high as the stage..can change this number to be whatever works best

      clip_chisiamo.width = sw /6;        //clip_chisiamo is 1/6 as wide as the stage..can change this number to be whatever works best
      clip_chisiamo.height = sh /6;     // clip_chisiamo is 1/6 as high as the stage..can change this number to be whatever works best

      clip_mc.scaleX <= clip_mc.scaleY ? (clip_mc.scaleX = clip_mc.scaleY) : (clip_mc.scaleY = clip_mc.scaleX); // keeps clip_mc proportional 

      clip_amministra.scaleX <= clip_amministra.scaleY ? (clip_amministra.scaleX = clip_amministra.scaleY) : (clip_amministra.scaleY = clip_amministra.scaleX); // keeps clip_amministra proportional

      clip_chisiamo.scaleX <= clip_chisiamo.scaleY ? (clip_chisiamo.scaleX = clip_chisiamo.scaleY) : (clip_chisiamo.scaleY = clip_chisiamo.scaleX); // keeps clip_chisiamo proportional

                 }

      private function checkResize():void
    {
        stage.addEventListener(Event.RESIZE, resizeStage);
    }

      private function resizeStage(event:Event):void 
    {
        init();
    }
    }
} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:13:01.063

如果对象靠得太近或重叠，听起来您想要一种调整对象大小的方法？

这是您可以解决此问题的一种可能方法。有更好的方法可以做更多的工作，但这是最简单的。

做一个简单的相对大小。这不会很精确，但会非常快并且可能会满足您的需求。假设 400x500（例如，调整这些值直到获得正确的数量）是舞台在它们开始重叠之前可以达到的本机按钮大小的最小值，然后将其用作您的 init() 方法（以及两个新的全球：

```
 private function init():void
    {
        var minWidth:Number = 400; //change this number to be whatever works best
        var minHeight:Number = 500; //change this number to be whatever works best

        stage.frameRate=31;

        bg_mc.x=0;
        bg_mc.y=0;
        bg_mc.width=stage.stageWidth;
        bg_mc.height=stage.stageHeight;

        clip_mc.x=stage.stageWidth/6.3;
        clip_mc.y=stage.stageHeight/2.2;

        clip_amministra.x=stage.stageWidth/1.3;
        clip_amministra.y=stage.stageHeight/2;

        clip_chisiamo.x=stage.stageWidth/10;
        clip_chisiamo.y = stage.stageHeight / 1.19; 

    //this is the new stuff
        var scaleAmount:Number = 1;
        if (stage.stageWidth < minWidth || stage.stageHeight < minHeight) {
            if (minWidth / stage.stageWidth < minHeight / stage.stageHeight) {
                scaleAmount = (minWidth / stage.stageWidth);
            }else{
                scaleAmount = minHeight / stage.stageHeight;
            }
        }

        //do this for all your buttons scaleX and scaleY properties, i'm assuming clip_mc, clip_amministra and clip_chisiamo are some of your button instances.
        clip_mc.scaleX = scaleAmount;
        clip_mc.scaleY = scaleAmount;

        clip_amministra.scaleX = scaleAmount;
        clip_amministra.scaleY = scaleAmount;

        clip_chisiamo.scaleX = scaleAmount;
        clip_chisiamo.scaleY = scaleAmount;
    } 
```

# java - 图像不会垂直平铺，但在 Android 中会水平平铺

> ID：11653591
> 
> 赞同：1
> 
> 时间：2012-07-25T15:44:34.273
> 
> 标签：java, android, drawable, tiles

我正在尝试让图像在 Android 中垂直平铺。这就是我正在使用的：

```
BitmapDrawable tiledImage = new BitmapDrawable(myBitmap);
tiledImage.setTileModeY(Shader.TileMode.REPEAT);
tiledImage.setTileModeX(Shader.TileMode.REPEAT);
ImageView Item = (ImageView)findViewById(R.id.ImageView01);
Item.setBackgroundDrawable(tiledImage); 
```

如果我重复 X 和 Y，它会起作用，但如果我尝试只重复 Y（垂直）它无法加载图像。如果我只加载 X（水平）它加载就好了！有人有什么想法吗？

我也试过用`tiledImage.setTileModeY(Shader.TileMode.CLAMP);`，还是不行。

# java - 奇怪的 Java 错误/错误：堆栈溢出、空指针和双重锁定

> ID：11653596
> 
> 赞同：5
> 
> 时间：2012-07-25T15:44:46.647
> 
> 标签：java, singleton

我真的不知道如何正确解释这个错误......

当我将此方法添加到我的控制器类时，它就开始了：

```
public void loadPlayerComboBox() {
    try{
        final PreparedStatement collectPlayerNames = 
                ConnectionManager.getConnection().prepareStatement("SELECT "+PLAYER_NAME+"  FROM PLAYERS");
        final ResultSet playerNameResults = collectPlayerNames.executeQuery();
        while(playerNameResults.next()){
            IViewManager.Util.getInstance().getMyContainerPane().getMyPlayerManagerPane().getPlayerNameList()
            .add(playerNameResults.getString(PLAYER_NAME));
        }
    }catch(final SQLException e){
        System.out.println("SQLException. Reason: " + e.getMessage());
    }
} 
```

而且我已经确认没有这个方法（由一个类调用，在程序启动时）我没有错误。

我的错误？当我从eclipse运行时，程序开始加载框架的顶部栏出现，但实际内容没有。

![在此处输入图像描述](../Images/d13e0971a356ee29d1b6ca60fa382f75.png)

除此之外，还有一个奇怪的空盒子，我相信这是由多个进程启动引起的。

我相信这是由堆栈溢出引起的，因为我的 getInstance() 方法递归地相互调用。由于某种原因，我无法取回堆栈跟踪，目前调试屏幕只是空白。我检查了我的 .log 并且没有与该时间戳对应的错误。我不知道他们怎么能互相打电话。这是 ViewManager 方法：

```
static class Util {
    static private IViewManager viewManager = null;
    static public synchronized IViewManager getInstance() {
            if (viewManager == null) {
                    viewManager = new ViewManager();
            }
            return viewManager;
    }
} 
```

和构造函数：

```
public ViewManager(){
    super("Tony Larp DB Manager");
    this.setVisible(true);
    this.setDefaultCloseOperation(3);
    myContainerPane = new ContainerPane();
    myContentMenu = new ContentMenu();
    IController.Util.getInstance();
    IPlayerCharacterManager.Util.getInstance();
    this.setJMenuBar(myContentMenu);
    this.getContentPane().add(myContainerPane);
    this.pack();        
} 
```

IController.Util.getInstance() 方法是相同的，只是它调用的类和对象的名称不同。双重检查锁定只会导致我的启动器中的第一个 IViewManager.getInstance() 实例返回一个空指针，这是同步块的开头。

澄清一下，程序`IViewManager.Util.getInstance()`第一次在启动器中调用，然后`IController.Util.getInstance()`在上面的构造函数中第一次调用。之后，对它的所有调用都应该只返回实例。

什么会导致这种错误？我怎么能开始修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:10:30.010

希望这听起来不难：您的代码结构非常糟糕：-/

我无法为你的问题提供解决方案。如果我能看到你的完整代码，也许我可以。但我想给你更一般的帮助。也许那时您可以自己解决问题。

您应该尝试简化和清理您的结构。这里有一些建议：

如果您的 UI 中需要一些单例，我认为这没问题。一般来说，单身人士可能是一种“难闻的气味”，但你总是要小心。在您的情况下，您可以去除延迟初始化、同步等。

简单地写

```
static class Util {
    public static final IViewManager viewManager = new ViewManager();
} 
```

如果你真的只想要一个 ViewManager 在你的 UI 中（听起来很合理）。

那你就不用再打电话`... .Util.getInstance()`了。简单地写`Util.viewManager`。

您应该尝试实现[关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)。让一个班级只做一件事。ViewManager 管理视图。没有其他的。视图类可能负责对话框的布局。但是视图类不应该知道如何查询数据库来填充组合框。您的视图类甚至必须知道 SQL。*而且您的视图类也知道MyPlayerManagerPane*的怪异方式， 这是其他类的所有任务。

当您需要游戏或玩家数据时，也许您想询问类似 GameRepository 的东西？你可以引入这样的课程。然后你可以给你的视图一个 GameRepository 类的实例，在你的视图中你可以说：

```
...
ComboBoxModel playersModel = createPlayersModel(gameRepository.getPlayers());
playersCombobox.setModel(playersModel);
... 
```

通过这种方式，您可以获得相对较小的课程。这样的类很容易自己测试。如果您在开发过程中的某个时刻出现奇怪的行为，您可以很快找到原因。

希望你明白了;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:16:40.110

这种行为表明你有某种无限循环。有些地方你已经跨越了你的线程（一个线程中的一个方法调用另一个方法中的一个方法，它调用第一个）。

两者都没有完成构建，因此您的单身人士没有要调用的实例。*相反，他们不断尝试无限*地实例化彼此。回过头来重新考虑一下你的单例代码线程是多么独立。

# php - 子域之间的 PHP 会话正在重置

> ID：11653603
> 
> 赞同：4
> 
> 时间：2012-07-25T15:45:11.560
> 
> 标签：php, session, session-cookies

我有一个运行两个子域的网站，这两个子域都需要登录（基于相同的数据库访问凭据）。为了使用户更容易，我想对其进行更改，以便他们可以导航两个子域而无需单独登录：本质上，他们登录其中一个子域，然后可以在一个和另一个子域之间自由导航。

我在[允许 php 会话转移到子域中](https://stackoverflow.com/questions/644920/allow-php-sessions-to-carry-over-to-subdomains)找到的一种解决方案涉及将 session.cookie_domain 变量更改为，以便所有子域共享会话变量，但似乎有问题。我仍然可以在 subdomain1 登录并导航它，但是一旦我从 subdomain2 加载页面，subdomain1 就会立即丢失其所有会话数据，并且我会返回登录页面。这也反过来发生（首先从 subdomain2 登录）。在更改之前，子域可以同时登录，但它们不会“看到”对方。

什么可能导致此问题发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T19:48:10.660

我怀疑是[suhoshin 项目](http://www.hardened-php.net/suhosin/)的[会话加密功能](http://www.hardened-php.net/suhosin/configuration.html#transparent_encryption_options)，这个补丁集包含在大多数基于 debian 的系统中。它可以配置为使用从各种来源生成的密钥对会话文件的内容进行编码，以保护会话内容免受在同一台机器上运行的其他 php 脚本（共享主机）或会话劫持。其中一个来源是[docroot](http://www.hardened-php.net/suhosin/configuration.html#suhosin.session.cryptdocroot)（默认启用），它通常在每个子域上都不同。

### 检查是否安装

一个简单`phpinfo()`的将报告扩展名和它的设置，在下面查找一个名为`suhosin`and 的块，看看它`suhosin.session.encrypt`是否`suhosin.session.cryptdocroot`打开

### 禁用加密

显然，如果您有权访问服务器，您可以编辑 php.ini 以禁用整个加密或仅禁用 docroot 部分。

如果您不这样做，并且服务器正在运行 apache，请尝试在`.htaccess`您的 php 应用程序的根文件中禁用它，如下所示：

```
php_flag "suhosin.session.cryptdocroot" 0 
```

如果它正常工作，您应该会看到 phpinfo() 输出的差异。（局部值列）

如果您的主机不允许`.htaccess`文件，您可以在 php 中设置相同的变量，但重要的是在`session_start()`. 希望你有某种前端控制器来放置它。

```
ini_set('suhosin.session.cryptdocroot', 0);
phpinfo(); 
```

phpinf 的输出应该与`.htaccess`方法中的 cryptdocroot 行中的相同，带有“Off”本地值。

# matlab - 识别矩阵中的值

> ID：11653605
> 
> 赞同：3
> 
> 时间：2012-07-25T15:45:30.497
> 
> 标签：matlab, matrix

我有一个问题，然后我需要你的帮助来解决它。

我有一个矩阵 A

```
A = [ 0 0 1 2 3 4 0;
      1 2 3 4 0 0 0;
      0 0 0 1 2 3 4;
      0 1 2 3 4 0 0] 
```

然后我想知道矩阵A中每一行的每个值“1”有多少个，它与矩阵A中每一行的每个值“> = 3”不在同一列中。

所以我希望我的回答

```
Ans = 2 
```

之前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:01:43.013

尝试这个：

```
>> num = sum( any(A(:,all(A<3))==1,2) )
num =
     2 
```

首先，我们找到不包含大于或等于 3 的值的列索引`idx = all(A<3)`。

接下来在这些列`A(:,idx)`中，我们找到包含任何 1: 的行`any(A(:,idx)==1,2)`。

最后我们计算找到了多少这样的行`sum(.)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:54:14.393

你可以使用类似的东西

```
 sum( (sum(A == 1 ,1) > 0) & ~(sum(A >= 3,1) > 0)) 
```

# java - TestNG - 如何通过 testng.xml 设置运行 @Test 方法的顺序？

> ID：11653611
> 
> 赞同：0
> 
> 时间：2012-07-25T15:45:55.320
> 
> 标签：java, ubuntu, intellij-idea, testng

我的班级中有 30 个`@Test`方法和 2 个*Java*方法。`@Test`我需要在具体方法之后运行这 2 个*Java*`@Test`方法，例如 `TestMethod5()`. 我怎样才能做到这一点 ？

例如：

```
@Test
public void TestMethod5() {

/* compiled code */

}

public void Method1(){/* compiled code */};
public void Method2{/* compiled code */}; 
```

需要2个方法：

> 1) 使用 testng.xml
> 2) 使用 Intellij IDEA
> 
> 注意：`@BeforeMethod`并且`@AfterMethod`仅适用于**extends classname**命令。这 2 个 Java 方法用方法检查按钮和标签的呈现，`assertTrue()`所以我不想把我的基类和它们弄乱。

* * *

是的，这些方法是测试的一部分（以及未来类似的测试），但我不能只是复制它们的内容并粘贴到我想要的每个方法中......然后@Test方法将被弄乱（大代码）。我只需要检查这些方法中标签和按钮的渲染：

```
 public void method1_ButtonsTest() {

  assertTrue1();
  assertTrue2();

 }

 public void method2_LabelsTest() {

  assertTrue3();
  assertTrue4();
 }

@Test
public void Test1();

@Test
public void Test2();

@Test
public void Test3();

@Test
public void Test4();

@Test
public void Test5();

@Test
public void Test6();

@Test
public void Test7();

@Test
public void Test8(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:03:34.047

为什么不能只调用这些方法？

```
@Test public void testMethod5() {
    ...
    method1();
    method2();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T18:23:03.427

如果您不想修改基类并且不想直接在测试中调用方法，那么您可以在测试类中添加另一个 @AfterMethod 并且只运行您调用的测试用例的方法，然后在基类中调用@AfterMethod，如下所示：

```
@AfterMethod(alwaysRun = true)
public void postTestCase(ITestResult _result) {
    if (_result.getMethod().getMethodName().equals("Test1")){
          System.out.println("Do something here...");
    }
    //Call the @AfterMethod in the base class
    super.postTestCase(_result);
} 
```

# c++ - 需要帮助尝试调试奇怪的分段错误

> ID：11653619
> 
> 赞同：6
> 
> 时间：2012-07-25T15:46:15.970
> 
> 标签：c++, solaris

## 背景

在迁移到更新版本的 CC 编译器时，一个段错误出现在一个可以正常工作的模块中。

## 迄今为止的观察

1.  从核心文件中，我可以了解段错误起源于什么功能。当我观察该功能时，我找不到任何可疑之处。

2.  第一个主要问题是段错误仅在“发布”（打开优化）编译时重现，而在“调试”时没有重现。此外，段错误不会在 g++ 上重现。

3.  现在我开始使用打印，并且出现了一个更大的问题 - 当添加`cout`/ `printf`（二进制搜索段错误行/打印指针的值）到代码中的某些行时，段错误没有重现。此外，我在维护段错误的代码的某一行中添加了一个 cout，这可能意味着段错误发生在该行之前。**该行之后**的注释行使段错误消失。

对我来说，这尖叫着内存损坏（特别是堆栈），但我不知道如何在不查看生成的程序集的情况下推进这一点。

有任何想法吗？提前致谢。

我正在研究 SunOS_5.10_Studio_12_5.12_64，CC 版本“Sun C++ 5.12 SunOS_sparc 2011/11/16”

## 回复评论的更多细节

1.  代码是单线程的。
2.  valgrind 在 Solaris 上不可用，因此不相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:49:20.510

您应该使用像[valgrind](http://valgrind.org/)这样的内存调试器/分析器。它会很快告诉你腐败的位置。在 Solaris 上，您可以尝试[libumem](http://developers.sun.com/solaris/articles/libumem_library.html)。

# ruby-on-rails - Rails 记住我功能只是继续记住

> ID：11653622
> 
> 赞同：0
> 
> 时间：2012-07-25T15:46:25.413
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

如果只是登录，我的记住功能仍然会创建一个永久 cookie。我遵循以下教程：http://railscasts.com/episodes/274-remember-me-reset-password

这是我所拥有的

会话控制器

```
class SessionsController < ApplicationController
  def new
    if current_customer
        redirect_to current_customer
    end
  end
  def create
    customer = Customer.find_by_email(params[:email])
        if customer && customer.authenticate(params[:password])
        if params[:remember_me]
        cookies.permanent[:auth_token] = customer.auth_token
        else
        cookies[:auth_token] = customer.auth_token
        end
            redirect_to customer, :notice => "Logged in!"
        else
            flash.now.alert = "Invalid email or password"
            render "new"
        end
  end

  def destroy
    cookies.delete(:auth_token)
    redirect_to root_url, :notice => "Logged out!"
  end
end 
```

应用控制器

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  force_ssl

  private

    def authorize
        redirect_to login_url, alert: "Not authorized" if current_customer.nil?
    end

    def current_customer
      @current_customer ||= Customer.find_by_auth_token(cookies[:auth_token]) if cookies[:auth_token]
    end
    helper_method :current_customer
end 
```

如果没有检查参数以确保不存在其他 cookie，我正在考虑添加删除。但这似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T08:47:21.340

也许您应该在班级顶部调用 helper_method 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:19:01.713

尝试添加

```
 reset_session 
```

到你的破坏行动。

# php - PHP 会话标头已发送

> ID：11653626
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:46:35.753
> 
> 标签：php, session

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试访问我网站的 SESSION 保护区内的 DOMPDF（将 HTML 转换为 PDF 的脚本）。

SESSION 包含用户信息，当您单击按钮时，页面会刷新并以 pdf 格式下载该页面。这在我笔记本电脑上的开发服务器上运行良好。但在网上它说标头已经发送。

我打印了下面的标题并将其追溯到我的会话。是不是一初始化就发送 SESSION 标头？

```
array(3) { 
  [0]=> string(38) "Expires: Thu, 19 Nov 1981 08:52:00 GMT"
  [1]=> string(77) "Cache-Control: no-store, no-cache, must-revalidate,post-check=0, pre-check=0" 
  [2]=> string(16) "Pragma: no-cache"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:50:31.197

在向用户发送任何内容**之前**，您必须启动会话。您可以使用输出缓冲区（`ob_*`函数，如[this](http://php.net/manual/en/function.ob-start.php)和[this](http://www.php.net/manual/en/function.ob-flush.php)）来防止在脚本不应该这样做时发送任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:49:28.807

有很多事情会导致这种情况，但最有可能发生的是，在发送标头之前，您在不知情的情况下将一些空白打印到屏幕上。

从脚本末尾删除任何不必要的 close-php 标记 (?>)。这应该会有所帮助（并且是最佳实践）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:50:49.667

启动会话不会发送标头，但它会尝试设置需要与标头一起发送的 cookie。您可能在向浏览器输出某些内容后调用 session_start() 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T15:52:17.997

答案可能在[session_start() 的 PHP 文档中](http://www.php.net/manual/en/function.session-start.php#108901)：

> 如果您收到如下错误：
> 
> 错误警告：session_start() [function.session-start]：“无法发送会话 cookie - 标头已由（输出开始于...”
> 
> ...或者...
> 
> “警告：session_start()；[function.session-start]：无法发送会话缓存限制器 - 标头已发送”。
> 
> ...**确保 session_start();** 甚至在任何 DOCTYPE 声明之前，**实际上都位于脚本的最顶部，例如：**
> 
> ...

# forms - 格式和引导兼容性

> ID：11653628
> 
> 赞同：1
> 
> 时间：2012-07-25T15:46:43.980
> 
> 标签：forms, twitter-bootstrap, formtastic

使用 gem 'formtastic-bootstrap' 时，所有的 formtastic 输入类型都应该工作吗？

就我而言：

```
 :as => :select 
```

工作正常

但

```
:as => :date_select 
```

给出 Formtastic::UnknownInputError

和

```
:as => :radio 
```

确实显示单选按钮，但混合了黑点（例如在没有 css 的网页中）！？

我的 gemfile 包含：

```
gem 'formtastic', " ~> 2.1.1"
gem 'formtastic-bootstrap'
gem 'twitter-bootstrap-rails' 
```

我的布局/application.html.erb

```
 <%= stylesheet_link_tag    "application", :media => "all" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:35:13.593

使用较新版本的 formtastic-bootstrap 可能会更好。

[最近添加了](https://github.com/kristianmandrup/formtastic-bootstrap/commit/45252a759b8d5ff4eb875dfcc74fe020c3d22cdf)对 :date_select 的支持，并且 formtastic -bootstrap 2.0.0 支持 :date_select。

# nuget - c# - 读取 NuGet 提要

> ID：11653633
> 
> 赞同：1
> 
> 时间：2012-07-25T15:46:55.663
> 
> 标签：nuget, nuget-package

我想浏览来自提要的一系列 nuGet 包，列出其中的所有 dll。我很难通过谷歌获得有用的信息。对入门有任何帮助吗？如果有一个已经这样做的开源工具让我知道，最好不要重新制造轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:28:42.550

我建议看看 [NuGet 包资源管理器](http://npe.codeplex.com/)，它是一个包查看器/编辑器，支持从提要打开包。

或者，您可以利用 nuget.exe 安装软件包列表（在这种情况下安装只是解压缩），然后列出文件夹中的 dll。

示例批处理文件：

```
@echo off
setlocal
nuget.exe list hashfoo -source https://nuget.org/api/v2/ > temp.txt
FOR /F "tokens=1,2" %%G IN (temp.txt) DO (nuget.exe install %%G -version %%H)
DIR *.dll /S
endlocal 
```

（它从源中列出所有带有搜索词“hashfoo”的包，安装它们并列出所有 dll）

# c# - Telerik MVC Grid Ajax 内联编辑带自动对焦

> ID：11653634
> 
> 赞同：0
> 
> 时间：2012-07-25T15:46:56.310
> 
> 标签：c#, asp.net-mvc, telerik-grid

在尝试了几个场景之后，我找不到如何将焦点自动设置到当前行中的第一个可编辑字段。

当您查看[Telerik 的这个示例时](http://demos.telerik.com/aspnet-mvc/razor/grid/editingajax)，当您单击编辑按钮时，您必须单击第一个文本框才能编辑内容。

![在此处输入图像描述](../Images/9371839b5d1e3332db493027d635625c.png)

有人知道如何将焦点自动设置到文本框吗？Telerik 是否有内置功能可以做到这一点？

注意：如果你去[这个样本](http://demos.kendoui.com/web/grid/editing-inline.html)；一个新的 KendoUI，这正是我想要的行为。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:14:31.237

您应该能够挂钩 OnEdit 客户端事件并提供您自己的函数来聚焦文本字段。您可能需要使用一些 jQuery 选择器来找到适合您要求的内容。

```
@(Html.Telerik().Grid(Model)
    .Name("Grid")
    .ClientEvents(events => events.OnEdit("Grid_onEdit")))

<script type="text/javascript">
    function Grid_onEdit(e)
    {   // focus the first grid element, or the first form element with a validation error
        $("#Grid").find(":input:enabled:visible:first:not(:input[type=submit])").focus();
        $("#Grid").find(".input-validation-error").first().focus();
    }
</script> 
```

更多关于客户活动的[信息在这里](http://demos.telerik.com/aspnet-mvc/razor/grid/clientsideevents)

# c# - Linq to Entity，选择没有价值的组

> ID：11653636
> 
> 赞同：0
> 
> 时间：2012-07-25T15:47:05.520
> 
> 标签：c#, .net, entity-framework, ef-code-first

即使某些月份不包含任何数据，我也希望能够按月份对所有数据进行分组。此时，我可以分组，但返回的数据只包含月份数据。

这是我的代码的样子：

```
var twelveMonthAgo = date.AddMonths(-12).Date;
var twelveMonthAgoFirstOfMonth = new DateTime(twelveMonthAgo.Year, twelveMonthAgo.Month, 1, 0, 0, 0, 0);

var data = (from i in Database.Users
            where i.RegisterDate >= twelveMonthAgoFirstOfMonth
            group i by new {y=i.RegisterDate.Year,m = i.RegisterDate.Month} into g
            select new UserStatistic{ Date = EntityFunctions.CreateDateTime(g.Key.y, g.Key.m, 1, 0, 0, 0)
                                       , UserCount = g.Count(o => o.Id)
                                     });

//The code below is what I would like to remove                                         
var toReturn = new List<UserStatistic>();
var allData = data.ToList();
DateTime datei = twelveMonthAgoFirstOfMonth;
while (datei.Year<= date.Year && datei.Month<=date.Month){
    var info = allData.SingleOrDefault(x => x.Date.HasValue && x.Date.Value.Year == datei.Year && x.Date.Value.Month == datei.Month);
    toReturn.Add(info ?? new UserStatistic { Date = datei, UserCount = 0, PaymentPaid = 0 });
    datei = datei.AddMonths(1);
}
return toReturn.AsQueryable(); 
```

如您所见，注释下的代码构建了一个最近 12 个月的集合，并检查是否有一些数据已从数据库中取出，如果存在则填充该集合，否则输入 0。

我怎样才能做到这一切而无需在评论下方执行代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:49:08.230

我还没有编译和调试这个，但它应该让我知道我认为你可以如何解决你的问题。我用来`Enumerable.Range`为您需要的月份生成一组占位符。然后我不得不在左加入和合并之间做出选择，`placeHolders`或者`data`只是连接遗漏。

我还重新修改了问题中的代码以帮助我理解它。

```
IQueryable<UserStatistic> GetPastMonths(int months)
{    
    var limitDay = date.AddMonths(-months).Date;
    var limit = new DateTime(limitDay.Year, limitDay.Month, 1, 0, 0, 0, 0);

    var placeHolders = Enumerable.Range(0, months + 1)
        .Select(m =>
            new UserStatistic
                {
                    Date = limit.AddMonths(-m),
                    UserCount = 0
                });

    var data = Database.Users
        .Where(i => i.RegisterDate >= limit)
        .GroupBy(i => new {y=i.RegisterDate.Year, m = i.RegisterDate.Month})
        .Select(g => 
            new UserStatistic
                { 
                    Date = EntityFunctions.CreateDateTime(
                            g.Key.y,
                            g.Key.m, 
                            1, 
                            0, 
                            0, 
                            0),
                    UserCount = g.Count(o => o.Id)
                });

    return data.Concat(placeHolders
        .Where(p => !data.Any(d => d.Date == p.Date)))
        .AsQueryable();
} 
```

连接遗漏的方法几乎可以保证以不合逻辑的顺序返回数据，但是，除非您使用 order by 子句，否则无论如何您都没有 garauntees。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:30:17.700

下面是一些使用组连接到子查询的代码，以获得您想要的结果：

```
DateTime date = DateTime.Today;
DateTime firstOfMonth = new DateTime(date.Year, date.Month, 1);
DateTime twelveMonthAgoFirstOfMonth = firstOfMonth.AddMonths(-12);

// Generate a collection of the months and years for the last 12 months
var monthYears = Enumerable.Range(-12, 12).Select(monthOffset => { DateTime monthDate = firstOfMonth.AddMonths(monthOffset); return new { y = monthDate.Year, m = monthDate.Month }; });

// Go through the list of months and years and join them to the users retrieved from the database in the subquery.
var data = from monthYear in monthYears
           join i in (from i in Database.Users
                      where i.RegisterDate >= twelveMonthAgoFirstOfMonth && i.RegisterDate < firstOfMonth
                      select i) on monthYear equals new { y = i.RegisterDate.Year, m = i.RegisterDate.Month } into gj
           select new UserStatistic() { Date = new DateTime(monthYear.y, monthYear.m, 1), UserCount = gj.Count() }); 
```

这也可以表示为具有左外连接的子查询中的组：

```
 DateTime date = DateTime.Today;
    DateTime firstOfMonth = new DateTime(date.Year, date.Month, 1);
    DateTime twelveMonthAgoFirstOfMonth = firstOfMonth.AddMonths(-12);
    var monthYears = Enumerable.Range(-12, 12).Select(monthOffset => { DateTime monthDate = firstOfMonth.AddMonths(monthOffset); return new { y = monthDate.Year, m = monthDate.Month }; });

    var data = (from monthYear in monthYears
                join i in (from i in Database.Users
                           where i.RegisterDate >= twelveMonthAgoFirstOfMonth && i.RegisterDate < firstOfMonth
                           group i by new {y = i.RegisterDate.Year, m = i.RegisterDate.Month} into g
                           select new { Key = g.Key, UserCount = g.Count() }) on monthYear equals i.Key into j
                 from k in j.DefaultIfEmpty()
                 select new UserStatistic() { Date = new DateTime(monthYear.y, monthYear.m, 1), UserCount = k != null ? k.UserCount : 0 }); 
```

由于我没有您的 EF 型号，您必须尝试一下，看看是否需要替换`new DateTime`为`EntityFunctions.CreateDateTime`.

# xcode - Xcode 停止自动缩进

> ID：11653637
> 
> 赞同：1
> 
> 时间：2012-07-25T15:47:06.740
> 
> 标签：xcode, xcode4

当我在 Xcode 4 中按下`Enter`时，光标会在下一行的开头结束，而不是像上一行一样缩进。我不记得做过任何可能导致这种情况的事情，例如修改任何编辑器偏好或类似的事情。

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:26:27.080

尝试将您的 Xcode 首选项移到一边，看看会发生什么。他们在

*   `~/Library/Preferences/com.apple.dt.Xcode.plist`
*   `~/Library/Preferences/com.apple.dt.Xcode.LSSharedFileList.plist`

您可以简单地退出 Xcode，将这些文件移动到桌面或类似的地方，然后重新启动 Xcode，看看它是否仍然发生。如果它不再发生，那么这可能意味着你的偏好以某种方式损坏了。如果它仍然发生，那么它与您的偏好无关，您可以将它们移回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:14:24.383

我发现了问题。发生这种情况是因为选中了以下选项：“自动修剪空白→包括仅空白行”。我正在使用最新的 Xcode 4.5 预览版。希望这将在最终版本中得到修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-23T04:54:46.063

对我来说，清除垃圾和派生数据后重新启动 Xcode 是有效的！

# c# - 调试在 Visual Studio 宏中引用的自定义 dll

> ID：11653639
> 
> 赞同：9
> 
> 时间：2012-07-25T15:47:09.313
> 
> 标签：c#, debugging, dll, step-into, visual-studio-macros

我之前问过： [添加对 Visual Studio 宏的 dll 引用](https://stackoverflow.com/questions/11640222/add-dll-reference-to-visual-studio-macros)

用我的语言 (C#) 创建宏的想法使创建宏变得更加容易。**问题是我无法调试 dll**

**为了解决我尝试过的问题：**

1.  我放在`myClassLibrary.pdb`旁边，`myClassLibrary.dll`希望我能够通过介入来调试 dll 中的方法。

2.  创建了 WCF 服务。因为我不知道如何从 vba 引用服务，所以我从类库中引用它。问题是我需要使用诸如`DTE.ActiveDocument`这些变量不可序列化的变量，这意味着我无法将它们传递给 wcf 服务。

在 C# 中工作的想法非常好，但无法调试并查看正在发生的事情使得它有些困难。我可能不得不去我的旧选项，在那里我在 C# 上创建我的代码，然后用反射器反编译成 vba。

* * *

## 编辑

我想我快要找到解决方案了。我想为什么不在控制台应用程序中创建宏？我能够获取活动文档文本，但无法更改它。

```
 EnvDTE80.DTE2 MyDte;
        MyDte = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject( "VisualStudio.DTE.10.0" );
        Console.WriteLine( "The Edition is " + MyDte.Edition );

        Console.ReadLine( );

        // write to the console the text that is selected. "sometimes it does not work don't know why"
        Console.WriteLine(
            MyDte.ActiveDocument.Selection.Text
        ); 
```

请注意，我添加了以下引用以及 vba 宏具有的一次：

![在此处输入图像描述](../Images/3b201ae00cb13757276aa179a6d0026a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T17:08:47.590

最后是解决方案：

在以下步骤中，我将描述如何调试将由宏执行的 dll。

## 如果您希望能够执行以下操作：

![在此处输入图像描述](../Images/728e71384b015513fac3a7c908d9185e.png) **（注意我在 Visual Studio 上调试 c# 上的宏！！！）**

1.  在 Visual Studio 中创建新的解决方案![在此处输入图像描述](../Images/9165d7c8328d30f5e301738d9c2cfc41.png)

2.  现在向该解决方案添加一个新的类库项目。（这是将执行宏的类）![在此处输入图像描述](../Images/642e4f71e191bf3fa6ebb3f0d4fba89a.png)

3.  添加参考 EnvDTE、EbvDTE100、EnvDTE80、EnvDTE90、EnvDTE90a。基本上与 Visual Studio 宏具有相同的引用：![在此处输入图像描述](../Images/645f3e0086dc3b00d4a17e83b1a91eae.png)

4.  创建一个方法来执行您计划在类库上使用的宏。

    ```
     namespace ClassLibrary1
       {
           public static class Class1
           {
               public static void Macro1(EnvDTE80.DTE2 DTE)
               {
                   // make sure an active text document is open before calling this method
                   DTE.ActiveDocument.Selection.Insert("Hello World!!!");
               }
           }
       } 
    ```

5.  添加另一个项目（Visual Studio 加载项）![在此处输入图像描述](../Images/a1cfceaf7804d72890a1a15673b00117.png)

6.  按照向导保留默认设置，除了第 4 页选择： ![在此处输入图像描述](../Images/0d3f0893d569060af5bd1ab98ad4aff6.png)

7.  继续选择向导上的默认选项，直到创建项目： ![在此处输入图像描述](../Images/5232bcf211026f5b0d5a5344aca410ac.png)

8.  将该项目设置为启动项目，以便当我们按 f5 时插件运行。

9.  添加从 MyAddin1 到类库的引用

10.  一旦我们有了那个引用，我们应该能够从插件执行宏。为了做到这一点，打开`Connect.cs`并导航到方法`Exec`添加`ClassLibrary1.Class1.Macro1(_applicationObject);`，它看起来像： ![在此处输入图像描述](../Images/06e11e20bde38bdc3ad9a509ce507de6.png)

11.  在 Exec 方法的开头添加一个断点，以便我们对其进行调试。

12.  按 执行 MyAddin1 `F5`。应该打开一个新的视觉工作室实例。

13.  在 Visual Studio 的新实例上打开任何解决方案。在这种情况下，我再次打开相同的解决方案>

14.  转到工具，然后单击 MyAddin1 但确保文档已打开： ![在此处输入图像描述](../Images/2d08d13a2faedad42b442149ed10365e.png)

15.  一旦你点击了我的插件，你应该点击断点！ ![在此处输入图像描述](../Images/f78eea0ea4ee539fd3b945abe01fd6c1.png)

## 15\. 注意！出于某种原因，我不得不评论这条线`ClassLibrary1.Class1.Macro1(_applicationObject);`

**所以我注释掉那一行并在那一行上我放置：**

```
 var textDoc = (TextDocument)(_applicationObject.ActiveDocument.Object(string.Empty));
 textDoc.Selection.Insert("Hello world"); 
```

**最后，当我单击位于工具上的 MyAddin1 时，Hello world 将被插入！**

* * *

**一旦我知道宏运行良好，我可以将类导出到类库并让宏调用 dll 上的方法而不是插件。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T21:23:22.280

**我还有另一个更好的答案！**

我创建插件的唯一原因是因为我需要 DTE 的引用。为什么不引用我需要的 dte。

算法如下：

1.  使用类`Ide`来获取任何 Visual Studio 实例的 DTE。

2.  拥有该 dte 后，请创建宏。

这是 Ide 类：

```
public class Ide
{        
    [DllImport("ole32.dll")]
    private static extern void CreateBindCtx(int reserved, out IBindCtx ppbc);

    [DllImport("ole32.dll")]
    private static extern void GetRunningObjectTable(int reserved, out IRunningObjectTable prot);

    public static DTE2 GetDte(string solutionName)
    {
        DTE2 dte = null;

        GetDte((displayName, x) =>
        {
            if (System.IO.Path.GetFileName(x.Solution.FullName).Contains(solutionName))
            {
                dte = x;
                return false; // we found it stop seraching
            }
            else
            {
                return true; // continue searching
            }

        });

        return dte;
    }

    public static DTE2 GetDte(int processId)
    {
        DTE2 dte = null;

        GetDte((displayName, x) =>
        {
            if (displayName.Contains(processId.ToString()))
            {
                dte = x;
                return false; // stop searching we found matching dte
            }
            else
            {
                return true; // continue searching
            }
        });

        return dte;
    }

    public static List<DTE2> GetAllDte()
    {
        List<DTE2> list = new List<DTE2>();
        GetDte((displayName, x) =>
        {
            list.Add(x);
            return true; // continue serching we want all dte's
        });
        return list;
    }

    private static void GetDte(Func<string, DTE2, bool> foo)
    {
        Dictionary<string, string> dtesProcessIds = new Dictionary<string, string>();

        //rot entry for visual studio running under current process.            
        IRunningObjectTable rot;
        GetRunningObjectTable(0, out rot);
        IEnumMoniker enumMoniker;
        rot.EnumRunning(out enumMoniker);
        enumMoniker.Reset();
        IntPtr fetched = IntPtr.Zero;
        IMoniker[] moniker = new IMoniker[1];
        while (enumMoniker.Next(1, moniker, fetched) == 0)
        {
            IBindCtx bindCtx;
            CreateBindCtx(0, out bindCtx);
            string displayName;
            moniker[0].GetDisplayName(bindCtx, null, out displayName);
            object comObject;
            rot.GetObject(moniker[0], out comObject);

            if (comObject != null)
            {
                DTE2 dteCurrent = null;
                try
                {
                    dteCurrent = (EnvDTE80.DTE2)comObject;

                    // if solution is not open continue
                    // this will cause an exception if it is not open
                    var temp = dteCurrent.Solution.IsOpen;

                    string solName = dteCurrent.Solution.FullName;

                    // if there is an instance of visual studio with no solution open continue                        
                    if (string.IsNullOrEmpty(solName))
                    {
                        continue;
                    }

                    // avoid adding duplicate ide's
                    if (dtesProcessIds.ContainsKey(displayName) == false)
                    {
                        dtesProcessIds.Add(displayName, displayName);
                    }
                    else
                    {
                        continue;
                    }

                }
                catch (System.Runtime.InteropServices.COMException e)
                {
                    continue;
                }
                catch (Exception e)
                {
                    continue;
                }
                if (dteCurrent != null)
                {
                    var cont = foo(displayName, dteCurrent);

                    if (cont == false)
                        return;
                }
            }

        }
    }
} 
```

然后，如果我有一个正在运行的 Visual Studio 实例，其中包含一个名称为解决方案的解决方案，`ConsoleApp1`那么我将能够执行以下操作：

```
 var dte = Ide.GetDte("ConsoleApp1");
 dte.ActiveDocument.Selection.Insert("My macro is working!"); 
```

并且文本`My macro is working!`将被插入到活动文档中。确保有一个活动文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T22:56:36.487

调试 Visual Studio 加载项的方法是打开另一个 Visual Studio 实例并附加到将激活您的加载项的实例。[此处](http://donovanbrown.com/post/How-to-debug-a-Visual-Studio-Extension.aspx)对其进行了描述。还要确保加载项是在本地计算机上构建的并且 pdb 可用，否则它不会击中您的断点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:11:54.690

使用来自其他发布者的 DLL 很容易。但是理解代码很重要。我使用 IlSpy。它是免费的并且可以使用。它反编译 dll 以查看所有方法、类和命名空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:20:50.523

远野，

您是否为 wcf 应用程序引用了您的 dll 并使其成为调试版本？

来自： http: [//msdn.microsoft.com/en-us/library/ms164704.aspx](http://msdn.microsoft.com/en-us/library/ms164704.aspx)：

> 无论您如何开始调试，请确保首先构建 DLL 的 Debug 版本，并确保 Debug 版本位于应用程序期望找到它的位置。这似乎很明显，但如果您忘记了这一步，应用程序可能会找到不同版本的 DLL 并加载它。然后程序将继续运行，而您想知道为什么您的断点从未被命中。在调试时，您可以通过打开调试器的“模块”窗口来验证您的程序加载了哪些 DLL。“模块”窗口列出了您正在调试的进程中加载​​的每个 DLL 或 EXE。有关更多信息，请参阅如何：使用模块窗口。

* * *

如果您尝试调试引用的 dll，这篇 SO 文章可能会在这里提供帮助：[如何调试引用的 dll（具有 pdb）](https://stackoverflow.com/questions/1130417/how-to-debug-a-referenced-dll)

~乔尔

# android - 存储位图的最佳方式

> ID：11653640
> 
> 赞同：0
> 
> 时间：2012-07-25T15:47:11.803
> 
> 标签：android, listview, bitmap

现在我有一些类负责保存内部内存位图，然后在 ListViews 中列出。

列出后，诉诸一种方法，告诉您要返回的图像名称并接收相应的位图。

当应用程序启动时，将您需要的所有图像加载到内存（HashMap）中，一旦将图像从内部存储器直接加载到列表视图，该过程需要很长时间。

我正在使用视图的回收，每个项目都有两个和两个图像视图文本视图。但是，滚动非常慢并且有很多滞后。

将图像保存在内存中（哈希图）是一个很好的解决方案吗？对于在列表时加载到内存中的速度更慢。图像有 100x100 像素。

我的问题是：我的延迟问题可能与图像都在内存中这一事实有关？什么是最好的解决方案？

**编辑：**

```
07-25 16:56:33.195: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.195: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.203: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.203: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.210: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.257: V/ADAPTER(8648): recicling view [16]
07-25 16:56:33.265: V/ADAPTER(8648): recicling view [15]
07-25 16:56:33.273: V/ADAPTER(8648): recicling view [14]
07-25 16:56:33.281: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.289: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.289: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.289: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.296: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.296: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.304: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.312: V/ADAPTER(8648): recicling view [7]
07-25 16:56:33.320: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.328: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.328: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.335: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.335: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.343: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.343: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.359: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.359: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.367: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.367: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.367: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.375: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.382: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.398: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.398: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.406: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.406: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.414: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.414: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.484: V/ADAPTER(8648): recicling view [13]
07-25 16:56:33.492: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.500: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.500: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.507: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.507: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.507: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.515: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.523: V/ADAPTER(8648): recicling view [7]
07-25 16:56:33.531: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.539: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.539: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.546: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.546: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.554: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.554: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.562: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.570: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.578: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.578: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.578: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.585: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.585: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.609: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.609: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.617: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.617: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.625: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.625: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.679: V/ADAPTER(8648): recicling view [12]
07-25 16:56:33.687: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.695: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.695: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.703: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.703: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.710: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.710: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.718: V/ADAPTER(8648): recicling view [7]
07-25 16:56:33.734: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.734: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.742: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.742: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.750: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.750: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.757: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.765: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.773: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.773: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.773: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.781: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.781: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.789: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.804: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.812: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.812: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.812: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.820: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.820: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.875: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.882: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.890: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.890: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.898: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.898: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.906: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.914: V/ADAPTER(8648): recicling view [7]
07-25 16:56:33.929: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.929: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.937: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.937: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.945: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.953: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.953: V/ADAPTER(8648): recicling view [6]
07-25 16:56:33.968: V/ADAPTER(8648): recicling view [0]
07-25 16:56:33.976: V/ADAPTER(8648): recicling view [1]
07-25 16:56:33.976: V/ADAPTER(8648): recicling view [2]
07-25 16:56:33.976: V/ADAPTER(8648): recicling view [3]
07-25 16:56:33.984: V/ADAPTER(8648): recicling view [4]
07-25 16:56:33.984: V/ADAPTER(8648): recicling view [5]
07-25 16:56:33.992: V/ADAPTER(8648): recicling view [6]
07-25 16:56:34.007: V/ADAPTER(8648): recicling view [0]
07-25 16:56:34.015: V/ADAPTER(8648): recicling view [1]
07-25 16:56:34.015: V/ADAPTER(8648): recicling view [2]
07-25 16:56:34.015: V/ADAPTER(8648): recicling view [3]
07-25 16:56:34.023: V/ADAPTER(8648): recicling view [4]
07-25 16:56:34.031: V/ADAPTER(8648): recicling view [5] 
```

每当我滚动（列表继续）时，我都会得到这个输出。其中 [] 内的内容对应位置。他不断地显示0-6的位置是不是很奇怪？

**编辑**

现在发现了一个可能的原因。

我目前是一个 tab_activity，其中有所有必要的视图。在 xml 中添加了一个 tab_activity top_bar，其中我有一个不断更改的图像。当图像处于自动模式（不断更改）时，选项卡内的 ListViews 被“重新绘制”，因此存在滞后。

我正在使用一项服务（音乐），它会在 x 时间内改变 x 的图像。

为什么我查看重绘图像时要重绘 ListView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:06:46.520

I'm not sure if the loading of the images is causing the lag, yet if it is, then I suggest you create some sort of UI that reports to the user that the images are loading. (To check wether the images are causing the lag, I suggest you have a look at DDMS are simply log with the LogCat)

I use the following code to save bitmaps to the memory:

The following will write to the memory:

```
public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;
        // Use the compress method on the Bitmap object to write image to the OutputStream
        try {
            fos = game.openFileOutput(filename, Context.MODE_PRIVATE);
            // Writing the bitmap to the output stream
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();
            // this.gameEngineLog.d(classTAG, "Bitmap successfully written: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            // this.gameEngineLog.d(classTAG, "Bitmap couldn't be written: " + filename);

        } 
        catch (IOException e) {
            e.printStackTrace();
            // this.gameEngineLog.d(classTAG, "Bitmap couldn't be written: " + filename);

        }

    } 
```

this will read from the memory:

```
public Bitmap readBitmapFromMemory(String filename) {
        Bitmap defautBitmap = null;
        File filePath = game.getFileStreamPath(filename);
        FileInputStream fi;
        try {
            fi = new FileInputStream(filePath);
            defautBitmap = BitmapFactory.decodeStream(fi);
            // this.gameEngineLog.d(classTAG, "Bitmap successfully read: " + filename);
        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();
            // this.gameEngineLog.d(classTAG, "Bitmap couldn't be opened: " + filename);
        }

        return defautBitmap;

    } 
```

# android - 带有 xml 的 ActionBar 选项卡背景

> ID：11653642
> 
> 赞同：2
> 
> 时间：2012-07-25T15:47:16.867
> 
> 标签：android, android-actionbar, actionbarsherlock, nine-patch

**是否可以仅**使用 xml drawables创建类似 Holo 的 ActionBar 选项卡背景？如果是，如何？如果没有，有什么限制？

![在此处输入图像描述](../Images/afa93b41df529c4db7ce6b8da63c40a6.png)

浏览 Android 源代码，我发现选项卡背景是使用[tab_indicator_holo.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable/tab_indicator_holo.xml)中的可绘制选择器定义的：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_holo" />
    <item android:state_focused="false" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected_holo" />

    <!-- Focused states -->
    <item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected_focused_holo" />
    <item android:state_focused="true" android:state_selected="true"  android:state_pressed="false" android:drawable="@drawable/tab_selected_focused_holo" />

    <!-- Pressed -->
    <!--    Non focused states -->
    <item android:state_focused="false" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed_holo" />
    <item android:state_focused="false" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed_holo" />

    <!--    Focused states -->
    <item android:state_focused="true" android:state_selected="false" android:state_pressed="true" android:drawable="@drawable/tab_unselected_pressed_holo" />
    <item android:state_focused="true" android:state_selected="true"  android:state_pressed="true" android:drawable="@drawable/tab_selected_pressed_holo" />
</selector> 
```

然后为每个状态使用 9 个补丁可绘制对象，例如[tab_selected_holo.9.png](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/tab_selected_holo.9.png)。

我想知道是否可以将这 9 个补丁可绘制对象替换为图层列表可绘制对象、形状可绘制对象或组合，从而节省创建各种 PNG 文件的需要（根据我的计算，每个密度 6 个）。

我注意到[ActionBarSherlock](http://actionbarsherlock.com/)还使用了 9 个补丁可绘制对象，因此很可能这是唯一的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:22:07.417

要完全自定义您的 ActionBar 选项卡，请尝试以下操作，创建一个名为“Home”的虚构选项卡。此布局包含图像和标签。

(1) 正常创建选项卡，但通过 ActionBar.Tab.setCustomView() 指定自定义布局

```
// Home tab
LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
HomeFragment homeFragment = new HomeFragment();
RelativeLayout layoutView = (RelativeLayout)inflater.inflate(R.layout.layout_tab_home, null);
TextView title = (TextView)layoutView.findViewById(R.id.title);
ImageView img = (ImageView)layoutView.findViewById(R.id.icon);
ActionBar.Tab tabHome = mActionBar.newTab();
tabHome.setTabListener(homeFragment);
title.setText(this.getString(R.string.tabTitleHome));
img.setImageResource(R.drawable.tab_home);
tabHome.setCustomView(layoutView);
mActionBar.addTab(tabHome); 
```

（2）为你的标签创建一个布局（layout_tab_home.xml）

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="wrap_content" android:layout_height="56dip" android:layout_weight="0" android:layout_marginLeft="0dip" android:layout_marginRight="0dip">
    <ImageView android:id="@+id/icon" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_centerHorizontal="true" android:paddingBottom="2dip" />
    <TextView android:id="@+id/title" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_below="@id/icon" android:paddingLeft="0dip" android:paddingRight="0dip" style="@style/tabText" />
</RelativeLayout> 
```

(3) 为你的图片设置一个drawable

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@drawable/home_sel" />
    <item android:state_selected="false" android:drawable="@drawable/home_unsel" />
</selector> 
```

在此示例中，我只有一个 PNG 图形，其中选定状态与未选定状态的颜色不同

您似乎对 Background drawable 最感兴趣，因此同样适用，但在您的 RelativeLayout 上设置一个背景可绘制对象，并使用与上述类似的选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:26:16.853

You can use inset drawables to create the line strip at the bottom. This xml will create a white rectangle with a blue line at the bottom like the one you posted. Then you can use state list drawables for its state.

```
<?xml version="1.0" encoding="utf-8"?>
<inset xmlns:android="http://schemas.android.com/apk/res/android"
android:insetBottom="0dp"
android:insetLeft="-5dp"
android:insetRight="-5dp"
android:insetTop="-5dp" >

<shape>
    <solid android:color="#FFF" />

    <stroke
        android:width="3dp"
        android:color="#00F" />
</shape>
</inset> 
```

For more info you can have a look at this post: [http://blog.stylingandroid.com/archives/1329](http://blog.stylingandroid.com/archives/1329)

# html - 边框上方的背景图片

> ID：11653645
> 
> 赞同：4
> 
> 时间：2012-07-25T15:47:25.883
> 
> 标签：html, css

我不明白。我想要一条带箭头的简单线，所以我使用一个带边框和背景图像的类：

```
hr {
    padding-top: 10px;
    border: none;
    border-top:dotted #000 1px;
    background: #fff url("img/arrow.gif") no-repeat 100px -1px;
 } 
```

不幸的是，背景低于边界：

![在此处输入图像描述](../Images/b4d47dbe5a2e2d0049d80423f05d7be7.png)

我试过`z-index`了，“id beats class”（用`<hr id="arrow">`）但没有任何效果。有解决办法吗？

顺便说一句，css-cracks如何用箭头做这样的虚线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:50:15.313

​<strong>编辑：我一直在考虑在没有 :after 的情况下这样做，只是因为我不喜欢被否决:)

我能想到的最好的是：

```
.box3 {
    z-index: 100;
    border: none;
    padding: 10px 0 30px 0;    
    background-image: url("http://test.mark-design.co.uk/4ik4e7ic.png"), url('http://test.mark-design.co.uk/line.png');
    background-position: 50% -1px, left top;
    background-repeat: no-repeat, repeat-x;
} 
```

它使用 CSS3 中的多个背景，因此它不会得到大规模支持，但可以工作并且是一种相当有趣的方式 - [http://jsfiddle.net/spacebeers/T8Yzj/39/](http://jsfiddle.net/spacebeers/T8Yzj/39/)

图像需要像填充一样进行调整，但结果是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T15:56:58.717

背景图像总是被容器边框包裹。

请参阅：[http ://reference.sitepoint.com/css/boxmodel](http://reference.sitepoint.com/css/boxmodel)

您将需要下面的附加元素来添加箭头。这可以通过`:after`在所需元素上使用来实现。

```
/* not tested */
hr {
    position: relative;
    margin-top: 10px;
    border-bottom: 1px dotted #000;
}

hr:after {
    content: "";
    position:absolute;
    right: 0px; top:0px;
    width: 16px; height: 16px;
    background: transparent url("img/arrow.gif") no-repeat right top;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:52:58.950

考虑使用 CSS 三角形而不是图像：

```
<hr class="arrow"> 
```

CSS：

```
.arrow {
    position:relative
}

.arrow:after {
    content: "";
    position:absolute;
    top:0px;
    left:100px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;    
    border-top: 10px solid #000;
} 
```

[小提琴](http://jsfiddle.net/Mh2x3/)

# c# - “是”-reference 或 gettype()

> ID：11653647
> 
> 赞同：2
> 
> 时间：2012-07-25T15:47:32.800
> 
> 标签：c#, .net, winforms, comparison

在语句`controls`的帮助下，我正在我的 WinForms 表单中搜索一些内容。`foreach`我正在比较通过“is”-reference ( `a is DataGridView`) 找到的对象。“a”是控件集合中的对象。到目前为止效果很好，因为我表单上的比较对象都彼此完全不同。

在我创建的一个新表单中，我使用了一个`DataGridView`被调用的派生版本`my_datagridview`。因此，当通过“is”引用`my_datagridview`将 a 与 a 进行比较时，`DataGridView`不会引发异常，这是“错误的”，因为我想分别处理这两个。

有没有办法比较`my_datagridview`和`DataGridView`正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T15:51:39.813

> 有没有办法正确比较 my_datagridview 和 DataGridView ？

一种选择是使用类似的东西：

```
if (a is MyDataGridView) // Type name changed to protect reader sanity
{
}
else if (a is DataGridView)
{
    // This will include any subclass of DataGridView *other than*
    // MyDataGridView
} 
```

当然，或者您*可以*使用`GetType()`精确匹配。重要的问题是您希望对任何*其他*派生`DataGridView`自`MyDataGridView`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:51:59.463

是的。首先从最具体的课程开始。所以：

```
if (a is my_datagridview)
{
    //....
}
else if (a is DataGridView)
{
    // ....
} 
```

[请参阅此处的 MDSN](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=VS.71%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:55:18.683

首先我更喜欢

所以

```
var dg = a as DataGrindView
var mygd = a as MyDataGridView

if(mygd != null) {...}
else
{
   if(dg != null) {...}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:13:21.327

**Upcast 总是成功，downcast 总是失败！**

**因此，当您将 my_datagridview 向上转换为 DataGridView 时，它总是会成功！**

这样做会导致**InvalidCastException**因为向下转换失败！

```
DataGridView dgv = new DataGridView();
myDataGrivView m_dgv = (myDataGridView)dgv; 
```

为避免抛出上述异常，可以使用**as**运算符！

如果向下转换失败，它不会抛出异常，而是返回 null！

```
DataGridView dgv = new DataGridView();
myDataGrivView m_dgv =dgv as myDataGridView;

if(m_dgv==null)
{
//its a datagridview
}
else
{
//its a mydatagridview
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T15:52:30.667

先比较派生较多的版本并执行其动作，再比较派生较少的类型（假设动作是互斥的）

或者，将两个比较放在一个条件语句中：

```
if ((a is my_datagridview) && (!a is DataGridView))
{
  // This will only match your derived version and not the Framework version
}
// The else is needed if you need to do something else for the framework version.
else if (a is DataGridView)
{
  // This will only match the framework DataGridView because you've already handled
  // your derived version.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T16:25:53.167

根据我们上面的评论，我认为不需要找到控件。例如，如果您在表单上有一个按钮，并且通过单击 grid1 应该发生的事情，您可以在按钮的单击事件处理程序中使用它：

```
private void ClickButtonOne(object sender, EventArgs e)
{
// Do something with datagridview here
} 
```

# c - glClear 和 glStencilMask 未按预期运行

> ID：11653652
> 
> 赞同：4
> 
> 时间：2012-07-25T15:47:54.143
> 
> 标签：c, opengl, glut

在 Khronos OpenGL 2.1 Specs 中，他们说 glStencilMask 应该会影响 glClear 的操作，但是，在我的机器上，这似乎不是真的。

我目前得到的输出是：

```
Stencil value: (0,0) 0xff 
```

我期望的输出是：

```
Stencil value: (0,0) 0xf0 
```

* * *

这是我的代码：

```
void renderScene(void) {
    unsigned char pix;
    int i [4];

    /* Clear the stencil buffer initially */
    glClearStencil(0x0);
    glClear(GL_STENCIL_BUFFER_BIT);

    /* Applies the following: 1111 0000 & 1111 1111 */
    glStencilMask(0xF0);
    glClearStencil(0xFF);

    glClear(GL_STENCIL_BUFFER_BIT);

    glFlush();

    glReadPixels(0,0,1,1,GL_STENCIL_INDEX, GL_UNSIGNED_BYTE, &pix);
    printf("Stencil value (0,0): %x\n",pix);
}   

int main(int argc, char **argv) {
    // init GLUT and create Window
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_STENCIL );
    glutInitWindowPosition(500,500);
    glutInitWindowSize(320, 320);
    glutCreateWindow("Trial");

    // register callbacks
    glutDisplayFunc(renderScene);

    // enter GLUT event processing cycle
    glutMainLoop();

    return 1;
} 
```

（显然我正在执行各种其他图纸等，但这说明了我所看到的问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:11:52.513

来自 glReadPixels() 上的文档

```
GL_STENCIL_INDEX 

Stencil values are read from the stencil buffer.
Each index is converted to fixed point, shifted left or right
depending on the value and sign of GL_INDEX_SHIFT,
and added to GL_INDEX_OFFSET. If GL_MAP_STENCIL is GL_TRUE,
indices are replaced by their mappings in the table GL_PIXEL_MAP_S_TO_S. 
```

您可能想通过调用来检查 GL_INDEX_SHIFT 和 GL_INDEX_OFFSET 是否都为零

```
glPixelTransferi(GL_INDEX_SHIFT,  0);
glPixelTransferi(GL_INDEX_OFFSET, 0); 
```

也许您正在正确写入值，但 glReadPixels 会扰乱输出。还可以尝试读取多个字节：

```
unsigned char pix4[4];
glReadPixels(0,0,1,1,GL_STENCIL_INDEX, GL_UNSIGNED_BYTE, pix4);

for(int i = 0 ; i < 4 ; i ++) printf("Stencil value (0,0,%d): %x\n", i, pix4[i]); 
```

# sql-server-2008 - 查找为 SQL Server 数据库中指定的最大日期指定的最大数量

> ID：11653655
> 
> 赞同：0
> 
> 时间：2012-07-25T15:47:54.990
> 
> 标签：sql-server-2008, stored-procedures

好的，所以我使用此程序的目标是找到与付款承诺的最大日期相匹配的最大付款承诺。我将包括从中提取的过程，因此您将在此处看到 2 个过程。

这第一个过程非常接近我想要它做的事情，但有两个问题。如果 PaymentPromise 表中有 2 个值具有相同的日期，并且该日期是最大值，则将返回两个值。如果 PaymentPromise 中没有值但余额仍然未清，则应在 PaymentPromise 下返回 null 值，但它不会这样做。

SQL Server 2008，如您所知。

```
ALTER PROCEDURE dbo.GetPaymentsDue
(
@Username varchar(20)
)
AS
DECLARE @BondAmounts TABLE
(
BondID bigint,
BondAmount money,
BondTotal money,
BondBalance money
)

INSERT INTO @BondAmounts EXEC dbo.GetBondAmounts @Username = @Username

SELECT bonds.BondID, Bond.Agency, Bond.Agent, Bond.Defendant, Promise.ExpectedDate,
Promise.ExpectedAmount, bonds.BondTotal, bonds.BondBalance
FROM @BondAmounts bonds
INNER JOIN Bond ON bonds.BondID = Bond.ID
LEFT OUTER JOIN
(
    SELECT ID, BondID, ExpectedAmount, ExpectedDate, MAX(ExpectedDate) OVER (PARTITION BY BondID) MaxDate
    FROM PaymentPromise
) Promise ON bonds.BondID = Promise.BondID
WHERE bonds.BondBalance > 0
AND (Promise.ExpectedDate = Promise.MaxDate OR Promise.ExpectedDate = NULL) 
```

因此，第一个过程调用第二个过程来获取要使用的初始数据集。

```
ALTER PROCEDURE dbo.GetBondAmounts
(
@Username varchar(20)
)
AS
SELECT Bond.ID BondID, (ISNULL(Powers.Amount,0) + ISNULL(Charges.Amount,0)) BondAmount,
(ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
+ ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax) BondTotal,
(ISNULL(BondFee.Amount,0) + ISNULL(Powers.Premium,0) + ISNULL(Charges.Premium,0)
+ ISNULL(Forfeiture.CostOfApprehension,0) + ISNULL(Forfeiture.AmountPaid,0) + Bond.StateTax
- ISNULL(BalanceForgiveness.Amount,0) - ISNULL(Payment.Amount,0)) BondBalance
FROM Bond
LEFT OUTER JOIN
(
    SELECT Agency, Username FROM UserAgency
    WHERE Username = @Username
) AS UserAgency ON Bond.Agency = UserAgency.Agency
LEFT OUTER JOIN
(
    SELECT BondID, SUM(AmountForgiven) Amount
    FROM BalanceForgiveness
    GROUP BY BondID
) AS BalanceForgiveness ON Bond.ID = BalanceForgiveness.BondID
LEFT OUTER JOIN
(
    SELECT Bond, SUM(Amount) Amount
    FROM BondFee
    GROUP BY Bond
) AS BondFee ON Bond.ID = BondFee.Bond
LEFT OUTER JOIN
(
    SELECT Powers.Bond, SUM(Charge.BondAmount) Amount,
    ISNULL(SUM(Charge.BondPremium), 0) Premium
    FROM Powers INNER JOIN Charge ON Powers.Surety = Charge.PowerSurety
    AND Powers.PowerPrefix = Charge.PowerPrefix AND Powers.PowerNumber = Charge.PowerNumber
    GROUP BY Bond
) AS Powers ON Bond.ID = Powers.Bond
LEFT OUTER JOIN
(
    SELECT BondID, SUM(BondAmount) Amount, SUM(BondPremium) Premium
    FROM ChargeWithoutPower
    GROUP BY BondID
) AS Charges ON Bond.ID = Charges.BondID
LEFT OUTER JOIN
(
    SELECT Bond, SUM(CostOfApprehension) CostOfApprehension, SUM(AmountPaid) AmountPaid
    FROM Forfeiture
    GROUP BY Bond
) AS Forfeiture ON Bond.ID = Forfeiture.Bond
LEFT OUTER JOIN
(
    SELECT Bond, SUM(Amount) Amount
    FROM Payment
    GROUP BY Bond
) AS Payment ON Bond.ID = Payment.Bond
WHERE UserAgency.Username = @Username
OR EXISTS (SELECT * FROM Users WHERE Username = @Username AND Admin = 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:30:21.733

您的查询很难理解。以下是当您想要最大值时获得一排的一般策略：

```
with t as (select t.*,
                  row_number() over (partition by <whatever> order by paymentpromisedate desc) as seqnum
           from t
          )
select t.*
from t
where seqnum = 1 
```

第二个可能是左外连接而不是连接的问题。

如果您可以缩小问题所在的范围——第一个或第二个查询——提供更详细的答案会更容易。

应用于您的查询。. .

```
SELECT bonds.BondID, Bond.Agency, Bond.Agent, Bond.Defendant, Promise.ExpectedDate,
       Promise.ExpectedAmount, bonds.BondTotal, bonds.BondBalance
FROM @BondAmounts bonds INNER JOIN
     Bond
     ON bonds.BondID = Bond.ID LEFT OUTER JOIN
     (SELECT ID, BondID, ExpectedAmount, ExpectedDate,
             row_number() over (partition by bondid order by expectedDate desc) as seqnum
      FROM PaymentPromise
     ) Promise
     ON bonds.BondID = Promise.BondID
WHERE bonds.BondBalance > 0 and
      (Promise.seqnum = 1 or Promise.seqnum is null) 
```

我不确定为什么左连接不起作用。我正在考虑。

# performance - WeblGL - 用小 CPU 绘制大量移动图像

> ID：11653657
> 
> 赞同：0
> 
> 时间：2012-07-25T15:47:58.033
> 
> 标签：performance, image, 2d, gpu, webgl

我使用 Canvas 元素制作了一款游戏，每帧绘制了 300 多张图像，我被迫让它以 <20 fps 的速度运行，并且需要 60+% 的 CPU：

所以我想我最好的选择是切换到 WebGL。我一直在网上搜索，寻找教程和示例。这有点复杂，但我设法破解了一个工作源。

```
<!-- Licensed under a BSD license. See license.html for license -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>WebGL - 2D Image</title>
<link type="text/css" href="http://games.greggman.com/downloads/examples/webgl/resources/webgl-tutorials.css" rel="stylesheet" />
<script type="text/javascript" src="http://games.greggman.com/downloads/examples/webgl/resources/webgl-utils.js"></script>
<script>
window.onload = main;

function main() {
  image = new Image();
  image.src = "http://games.greggman.com/downloads/examples/webgl/resources/leaves.jpg";  // MUST BE SAME DOMAIN!!!
  image.onload = function() {
    setUp();
    setInterval(function(){
        x1 += 1;
        y1 += 1
        for (i = 0; i < 30; i++) {
            for (e = 0; e < 10; e++) {
                //render(image, x1+i*5, y1+e*5);
                gl.bindTexture(gl.TEXTURE_2D, texture);

                 // Set a rectangle the same size as the image.
                setRectangle(gl, x1+i*5, y1+e*5, image.width, image.height);

                // Draw the rectangle.
                 gl.drawArrays(gl.TRIANGLES, 0, 6);
            }
        }
    },1000/60);
  }
}
var x1 = 0;
var y1 = 0;
var image;
var canvas;
var gl;
var texture;
function setUp() {
  canvas = document.getElementById("canvas");
  gl = getWebGLContext(canvas);
    // setup GLSL program
  vertexShader = createShaderFromScriptElement(gl, "2d-vertex-shader");
  fragmentShader = createShaderFromScriptElement(gl, "2d-fragment-shader");
  program = createProgram(gl, [vertexShader, fragmentShader]);
  gl.useProgram(program);

    // lookup uniforms
  var resolutionLocation = gl.getUniformLocation(program, "u_resolution");

  // set the resolution
  gl.uniform2f(resolutionLocation, canvas.width, canvas.height);

// Create a texture.
  texture = gl.createTexture();
  gl.bindTexture(gl.TEXTURE_2D, texture);

  // Set the parameters so we can render any size image.
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

  // Upload the image into the texture.
  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);

 // look up where the vertex data needs to go.
  var positionLocation = gl.getAttribLocation(program, "a_position");
  var texCoordLocation = gl.getAttribLocation(program, "a_texCoord");

  // provide texture coordinates for the rectangle.
  var texCoordBuffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
      0.0,  0.0,
      1.0,  0.0,
      0.0,  1.0,
      0.0,  1.0,
      1.0,  0.0,
      1.0,  1.0]), gl.STATIC_DRAW);
  gl.enableVertexAttribArray(texCoordLocation);
  gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

  // Create a buffer for the position of the rectangle corners.
  var buffer = gl.createBuffer();
  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
  gl.enableVertexAttribArray(positionLocation);
  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
}

function render(image, x, y) {

}

function randomInt(range) {
  return Math.floor(Math.random() * range);
}

function setRectangle(gl, x, y, width, height) {
  var x1 = x;
  var x2 = x + width;
  var y1 = y;
  var y2 = y + height;
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
     x1, y1,
     x2, y1,
     x1, y2,
     x1, y2,
     x2, y1,
     x2, y2]), gl.STATIC_DRAW);
}

</script>
<!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_resolution;

varying vec2 v_texCoord;

void main() {
   // convert the rectangle from pixels to 0.0 to 1.0
   vec2 zeroToOne = a_position / u_resolution;

   // convert from 0->1 to 0->2
   vec2 zeroToTwo = zeroToOne * 2.0;

   // convert from 0->2 to -1->+1 (clipspace)
   vec2 clipSpace = zeroToTwo - 1.0;

   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

   // pass the texCoord to the fragment shader
   // The GPU will interpolate this value between points.
   v_texCoord = a_texCoord;
}
</script></script>
<!-- fragment shader -->
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

// our texture
uniform sampler2D u_image;

// the texCoords passed in from the vertex shader.
varying vec2 v_texCoord;

void main() {
   gl_FragColor = texture2D(u_image, v_texCoord);
}
</script>
</head>
<body>
<canvas id="canvas" width="400" height="300"></canvas>
</body>
</html> 
```

它绘制了 300 张图像，但只占用了使用普通画布的 1/2 的 CPU。现在这还不算太糟糕，但仍然不够好。我做错了什么或不必要的事情吗？有没有办法通过在 GPU 中进行计算或缓存它们来减轻 CPU 的负担？我研究过着色器，是否可以使用着色器来存储纹理和坐标，只需向着色器输入一个数组来设置我需要绘制的每个图像的位置点？

谢谢，我希望有一个简单的解决方案来解决这种疯狂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:11:09.987

你真的需要画 300 个（不同的）图像吗？还是只有 300 个具有相同纹理的矩形？（这是你目前正在做的）

一般来说，由于多种原因，您的代码效率非常低：

*   您无需创建一次缓冲区并重用它，而是为每帧分配 300 个新的 Float32Array 数组（in `setRectangle()`）
*   您可以将所有顶点信息放在一个缓冲区中，而不是为 300 个对象创建 300 个小缓冲区，而不是一次绘制所有内容（这仅在您不想用不同的纹理绘制每个对象时才有效）
*   您正在切换每个对象 ( `glBindTexture`) 的纹理状态。最好设置一次纹理，而不是绘制一批具有相同纹理的对象

更优化的代码版本如下所示：

```
// called once
setup() {
  // load and setup texture
  // create vertex buffer object for your vertex data
  // setup shader
}

// called every frame
display() {
  gl.useProgram(..) // set shader
  gl.bindTexture(..) // set texture
  gl.bindBuffer(..) // set buffer
  gl.drawArrays(0, 1800) // draw all you object in one step
} 
```

对于您真的想用另一个纹理绘制每个对象的情况，它有点复杂。但同样你有多种选择来优化：

*   在文件中组合多个纹理。例如，您可以在单个 512x512 纹理文件中组合 16 个 128x128 纹理。在这种情况下，您必须更新对象的纹理坐标以匹配纹理
*   使用多个纹理单元并在着色器中决定应该使用哪个单元。
*   如果您有多个使用相同纹理的对象，您可以对对象进行排序，以便一步绘制这些对象。

# c# - 如何使用 SQL Metal 或在代码中设置自动生成值和自动同步

> ID：11653663
> 
> 赞同：1
> 
> 时间：2012-07-25T15:48:31.680
> 
> 标签：c#, linq-to-sql, sqlmetal

现在对我来说是凌晨 1:30，所以如果这里有任何令人困惑的地方，我很抱歉.. 这在我的脑海中似乎是有道理的.. :-)

我一直在使用 SQLMetal 为我的数据库表生成数据上下文......

我使用了命令：

```
sqlmetal.exe /server:dbsvr\sqlexpress /database:"TestDB" /user:sa /password:password /namespace:DB_Data /context:DBDataContext /code:DBDataContext.cs /map:DB.map 
```

这一切都很好，我可以在我的桌子上做所有的 CRUD 功能，等等......几乎......

我有一个“标题”表，其中有一个“唯一标识符”类型的字段......当我插入新记录时，我希望数据库将值分配给记录，并使用新的 guid 更新我的标题表记录从数据库。目前，我添加到表中的任何新记录的 id guid 字段都为零。所以当我尝试添加第二条记录时，它会因重复键而失败。

在寻找答案时，我遇到了这篇文章： [SQL Server 2008 GUID column is all 0's](https://stackoverflow.com/questions/4703115/sql-server-2008-guid-column-is-all-0s)

它提到在 dbml 中分别将“自动生成的值”和“自动同步”设置为“True”和“OnInsert”。

我的问题是，我没有 dbml 文件，因为它不是在我运行 SQLMetal 命令时创建的。我改用 .map 文件生成参数。我意识到有一个“/dbml”标志，但我不知道该使用哪一个。

我应该使用 dbml 文件而不是地图文件吗？

或者有没有办法在代码中，当我创建一个新的标头记录变量时，我可以说如下内容来告诉系统使用数据库生成的 ID 值并更新我的记录变量....：recHdr.Id .AutoGeneratedVales = True; recHdr.Id.AutoSync = OnInsert；

非常感谢...

# session - 会话放弃

> ID：11653671
> 
> 赞同：1
> 
> 时间：2012-07-25T15:49:02.150
> 
> 标签：session, session-state, session-variables

我的网站 Session["name"]、Session["lastname"] 和 Session["username"] 中有 3 个活动会话，Session.Abandon() 会放弃所有这些吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T15:50:55.083

实际上，您有*一个*活动会话（不是*三个*）。该会话具有与之关联的这三个键/值对。

是的，一旦当前页面的处理完成，Session.Abandon() 将在放弃会话的过程中删除所有这些变量。

> 一旦调用了 Abandon 方法，当前会话就不再有效，可以开始一个新的会话。

[http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.abandon.aspx)

> 调用 Abandon 方法时，当前 Session 对象排队等待删除，但直到当前页面上的所有脚本命令都处理完后才真正删除。这意味着您可以在调用 Abandon 方法的同一页面上访问存储在 Session 对象中的变量，但不能在任何后续网页中访问。

[http://msdn.microsoft.com/en-us/library/ms524310(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms524310(v=vs.90).aspx)

**更新**

如果您想在页面完成执行之前“摆脱”键/值对，您可以像这样清除它们：

```
Session.Contents.RemoveAll() 
```

[http://msdn.microsoft.com/en-us/library/ms524866(v=vs.90](http://msdn.microsoft.com/en-us/library/ms524866(v=vs.90) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:51:11.770

是的，对象将被销毁，但不会立即销毁（来自[msdn](http://msdn.microsoft.com/en-us/library/ms524310%28v=vs.90%29.aspx)）

> 调用 Abandon 方法时，当前 Session 对象排队等待删除，但直到当前页面上的所有脚本命令都处理完后才真正删除。这意味着您可以在调用 Abandon 方法的同一页面上访问存储在 Session 对象中的变量，但不能在任何后续网页中访问。

它是一个会话和 3 个变量。如果您需要尽快删除它们，请将它们指向*null*并且数据将立即成为 GC 的主题（这不是确定性的）。

```
Session["name"] = null;
Session["lastname"] = null;
Session["username"] = null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T06:33:55.153

是的，它会销毁存储在 Session 对象中的所有对象并释放它们的资源。

# php - php相对url到绝对url的转换，最终使用base href html标签

> ID：11653677
> 
> 赞同：3
> 
> 时间：2012-07-25T15:49:31.147
> 
> 标签：php, html, url

我有一个加载了 DOM 的页面，然后我想最终根据`<base href>`标签将锚的所有相对 URL 转换为绝对 URL

我正在寻找经过测试的东西，而不是在某些情况下失败的随机脚本

我有兴趣解析各种形式的 href="" 用法：

```
href="relative.php"
href="/absolute1.php"
href="./relative.php"
href="../relative.php"
href="//absolutedomain.org"
href="." relative
href=".." relative
href="../" relative
href="./" relative 
```

和更复杂的混合

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T15:16:21.760

```
<?php

//Converting relative urls into absolute urls | PHP Tutors

$base_url = 'http://www.xyz.com/ ';
$anchors[0] = '<a href="test1.php" >Testing Link1 </a >';
$anchors[1] = '<a href="test2.php" >Testing Link2 </a >';

foreach($anchors as $val) {
    if(strpos($val,$base_url) === false) {
        echo str_replace('href="','href="'.$base_url,$val)."<br/ >";
    } else {
        echo $val."<br/ >";
    }
}
?> 
```

[**参考**](http://phptutors.wordpress.com/2013/08/18/php-str_replace-function-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-03T20:02:02.477

**此函数将在没有 regex**的情况下将相对 URL 解析为*给定*的当前页面 url 。它成功解决了：`$pgurl`

 **`/home.php?example`类型，

相同目录`nextpage.php`类型，

`../...../.../parentdir`类型，

完整`http://example.net`的网址，

和速记`//example.net`网址

```
//Current base URL (you can dynamically retrieve from $_SERVER)
$pgurl = 'http://example.com/scripts/php/absurl.php';

function absurl($url) {
 global $pgurl;
 if(strpos($url,'://')) return $url; //already absolute
 if(substr($url,0,2)=='//') return 'http:'.$url; //shorthand scheme
 if($url[0]=='/') return parse_url($pgurl,PHP_URL_SCHEME).'://'.parse_url($pgurl,PHP_URL_HOST).$url; //just add domain
 if(strpos($pgurl,'/',9)===false) $pgurl .= '/'; //add slash to domain if needed
 return substr($pgurl,0,strrpos($pgurl,'/')+1).$url; //for relative links, gets current directory and appends new filename
}

function nodots($path) { //Resolve dot dot slashes, no regex!
 $arr1 = explode('/',$path);
 $arr2 = array();
 foreach($arr1 as $seg) {
  switch($seg) {
   case '.':
    break;
   case '..':
    array_pop($arr2);
    break;
   case '...':
    array_pop($arr2); array_pop($arr2);
    break;
   case '....':
    array_pop($arr2); array_pop($arr2); array_pop($arr2);
    break;
   case '.....':
    array_pop($arr2); array_pop($arr2); array_pop($arr2); array_pop($arr2);
    break;
   default:
    $arr2[] = $seg;
  }
 }
 return implode('/',$arr2);
} 
```

使用示例：

```
echo nodots(absurl('../index.html')); 
```

`nodots()`必须在 URL 转换为绝对 URL*后调用。*

点函数有点多余，但是可读、快速、不使用正则表达式，并且可以解析 99% 的典型 url（如果你想 100% 确定，只需扩展 switch 块以支持 6+ 点，尽管我从未在 URL 中看到过这么多点）。

希望这可以帮助，**

# solr - 从外部应用程序访问嵌入式 Solr 服务器

> ID：11653678
> 
> 赞同：1
> 
> 时间：2012-07-25T15:49:32.550
> 
> 标签：solr, lucene

有没有办法从当前 JVM 外部访问 EmbeddedSolrServer？例如，更新索引或查看索引统计信息（[Luke](http://code.google.com/p/luke/)是一个很好的工具，但我想使用基于 Web 的东西）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T10:06:43.593

[EmbeddedSolrServer](http://wiki.apache.org/solr/EmbeddedSolr)不适合那样使用。此外，不再推荐使用它：

> 使用 Solr 最简单、最安全的方式是通过 Solr 的标准 HTTP 接口。嵌入 Solr 不太灵活，更难支持，没有经过很好的测试，应该为特殊情况保留。

您可以`HttpSolrServer`对您的索引运行 a 并通过 http 访问它。否则，您可以使用特定的基于 lucene 的工具来分析您的索引，例如您已经提到的那个 (Luke)。

# php - 使用 ajax 向数据库发送喜欢/不喜欢

> ID：11653679
> 
> 赞同：1
> 
> 时间：2012-07-25T15:49:44.440
> 
> 标签：php, mysql, ajax, social-media-like

我有一个小问题，我需要向一个文件发送一个 ajax 请求。这是我的 HTML 文件 (index.html)

```
<a id="like" href="./?act=like&id=24" title="Nobody likes this post!">Like</a> &middot; <a id="dislike" href="./?act=dislike&id=24" title="Nobody dislikes this post!">Dislike</a> 
```

还有我的 like.php 文件：

```
<?php
if(!is_logged()) {
    header("Location: ./?act=Home");
die();
}
$uid = $user['id'];
$id = $_GET['id'];
if(isset($id)) {
    $query = mysql_query("INSERT INTO ld (auth_id,post_id,val) 
                          VALUES ('".$uid."','".$id."','1')");
    if($query) {
    header("Location: ".$_SERVER['HTTP_REFERER']);
    } else {
    echo "Contatta l'amministratore riportando l'errore 101";
    }
} else {
header("Location: ./?act=Home");
}
?> 
```

还有我的“ld”表：

```
== Struttura della tabella ld

|------
|Campo     |Tipo      |Null|Predefinito
|------
|//**id**//|int(5)    |No  |
|auth_id   |varchar(5)|No  |
|post_id   |varchar(5)|No  |
|val       |varchar(1)|No  |
== Dump dei dati per la tabella ld

|5|4|1|1
|6|4|1|1
|7|4|1|1
|8|4|1|1
|9|4|1|1
|10|4|1|1
|12|4|1|1
|13|4|1|1
|14|4|1|2
|20|4|15|1
|23|5|17|1
|29|4|17|1
|30|4|18|1
== Struttura della tabella ld

|------
|Campo     |Tipo      |Null|Predefinito
|------
|//**id**//|int(5)    |No  |
|auth_id   |varchar(5)|No  |
|post_id   |varchar(5)|No  |
|val       |varchar(1)|No  | 
```

我真的不知道怎么发送ajax请求，我也试过学习ajax但是没办法，看不懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:02:17.207

你应该使用jquery，它实际上非常简单。首先将其包含在您的 HTML 文件中：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

然后添加这个，它被称为“listner”，在这种情况下它会注意点击链接的时间：

```
// A # is used since we are using an id to get the element
// A . is used for a class, but we are using the id at the moment
$('#like').click(function(e) { // We assign a click listner with a handler (a function)
  e.preventDefault(); // run this to stop it from going to a new page automatically
  $.get('./', {'act' : 'like', 'id' : $(this).attr('data')}, function(e) {
    // Handle success here
  }, 'json'); // expecting a json object back by using echo json_encode(array(...)) in PHP
}); 
```

在我的示例中，您需要将 html 更改为：

```
<a id="like" href="" data="24" title="Nobody likes this post!">Like</a> 
```

然后你可以对不喜欢做同样的事情。我在 $.get 中做的第二个参数 {} 是一个 JavaScript 数组，仅供参考。这是我在 jquery 文档中使用的 $.get 方法：http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

有关 ajax 是什么以及它是如何工作的信息，请查看这篇文章：[http ://www.webdesignerdepot.com/2008/11/how-ajax-works/](http://www.webdesignerdepot.com/2008/11/how-ajax-works/)

随时要求任何澄清

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:01:41.480

我没有代表添加评论，所以我现在必须将我的评论作为答案。查看[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)和[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

解释 ajax 和 jquery 的答案太长了。

# c# - 如何从 EntityFramework 查询复杂的结果集并在 MVC 中显示结果集。

> ID：11653687
> 
> 赞同：2
> 
> 时间：2012-07-25T15:50:10.403
> 
> 标签：c#, asp.net-mvc-3, linq, razor, entity-framework-4.1

我正在使用 MVC3、C# 并使用 Razor。我没有始终如一地使用 MVC，所以我经常不得不重新学习东西......我想要一个显示学校列表（来自指定状态）和嵌套学生列表（来自那所学校）的视图中间名“鲍勃”。

看起来很简单，但到目前为止我还没有找到解决方案。

例如：查看

马里兰州的结果

我的第一所学校： - 比利鲍勃约翰逊 - 莎莉鲍勃辛普森 - 亚当鲍勃琼斯

另一所学校： - 阿诺德鲍勃史密斯 - 凯茜鲍勃鲍尔斯 - 珍妮鲍勃史密斯

另一所学校： - Barney Bob Edson - Sue Bob Purdee - Alan Bob Warfield

```
public class School
{ 
   public int SchoolId {get; set;} 
   public string Schoolname {get; set;} 
   public int StateId {get; set;} 
} 

public class Student
{ 
   public int StudentId {get; set;}
   public int SchoolId {get; set;} 
   public string Firstname {get; set;} 
   public string Middlename {get; set;} 
   public string Lastname {get; set;} 
} 

public class SchoolViewModel
{ 
   public int SchoolId {get; set;}
   public string Schoolname {get; set;}  
   public IEnumerable<Student> Bobs { get; set; }
} 
```

通过使用 JOINS 执行 SELECT 获取列表将为我提供一个需要额外工作才能在 VIEW 中显示的数据集，如上图所示。我在想有一种方法可以让数据集像多维数组一样来获取嵌套的学生列表。但我没有找到这种方法的例子 - 导致我认为那不是方式......？？如何以充分利用 LINQ/MVC/ViewModel 等的方式获取数据？:)

我正在尝试这样的事情 - 但不知道这是否是正确的方向 - 当我尝试设置 Bobs 时它给了我一个错误。:)

我收到如下错误：LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[stuff] GetBobs(stuff)' 方法，并且此方法无法转换为存储表达式。

```
 private IQueryable<SchoolViewModel> GetSchools(int StateId)
  {
        var query = from s in db.Schools
                    where s.State == StateId
                    orderby s.Schoolname
                    select new SchoolViewModel
                    {
            SchoolId = s.SchoolId,
                        Name = s.Name,
                        Bobs = GetBobs(s.SchoolId)
                    };
    var results = query;
        return results;
    }

    private IQueryable<Student> GetBobs(int id)
    {

        var query = from s in db.Students
                    where s.Middlename == 'Bob'
                    where s.SchoolId == id
                    select s;

        var results = query;
        return results;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:13:32.520

好吧，您总是可以对查询部分执行此操作，我猜这就是您被绊倒的地方：

```
var schools = db.Schools
     .Where(x => x.State == "<Whatever>")
     .Select(x => new {
          School = x,
          Bobs = x.Where(y => y.MiddleName == "Bob")
     }).ToList();

List<Schools> schoolsView = new List<Schools>();
foreach(var x in schools)
{
     schoolsView.Add(new SchoolsViewModel(){
          //Set Properties here
          SchooldID = x.School.ID,
          SchoolName = x.School.Name,
          Students = x.Bobs.ToList() //You can project here if needed.
     };
}

return schoolsView; 
```

然后对于您的视图，您可以通过多种方式执行此操作，但如果您有具有固定输出的具体 ViewModel，则它只是嵌套循环：

```
<ul>
@foreach(var m in Model)  //Assuming your model is a list of SchoolViewModels
{
     <li>@m.SchoolName
          <ul>
               @foreach(var s in m.Students)
               {
                    <li>@s.Name</li>
               }
          </ul>
     </li>
}
</ul> 
```

你也有一些可爱的选项来做一些事情，比如`String.Join(",", Model.Students)`输出列表，但这取决于你。

**编辑：附加说明**

您还需要稍微更改模型，我不确定您使用的是哪个 EF 版本，但在 EF4.1+ 中，您可以指定导航属性以消除对显式连接条件的需要（这是正确的方法结束）。

[http://msdn.microsoft.com/en-us/library/bb738520.aspx](http://msdn.microsoft.com/en-us/library/bb738520.aspx)

因此，您的 Schools 模型将变为：

```
public class School
{ 
   public int SchoolId {get; set;} 
   public string Schoolname {get; set;} 
   public int StateId {get; set;} 
   public virtual IList<Student> Students {get; set; }
} 
```

然后在您的数据库配置中（如果您使用流利的配置将是：

```
modelBuilder.Entity<School>()
     .HasMany(x => x.Students).WithRequired(); 
```

然后你获得了做事的力量

```
db.Schools
    .Where(x => x.Name.Contains("Some Value"))
    .Include(x => x.Schools.Where(x => x.MiddleName.Contains("SomeValue")))
    .ToList(); 
```

这甚至使我之前的查询更加简单，而无需使用模棱两可的类型定义。

希望这个澄清有助于进一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:19:59.780

您可以尝试这样的方法来显示数据。

顶层视图：

```
@model SchoolViewModel
@using (Html.BeginForm()) 
{
    <fieldset>
        @Html.EditorFor(x => x.Bobs)
        <input type="submit" value="Save" />
    </fieldset>
} 
```

然后，您可以使用编辑器模板进行显示。在以下 URL 创建它们：~/Views/Shared/EditorTemplates/Student.cshtml

```
@model Student
@Html.DisplayFor(x => x.StudentID)
@Html.DisplayFor(x => x.SchoolID)
@Html.DisplayFor(x => x.FirstName)
@Html.DisplayFor(x => x.MiddleName)
@Html.DisplayFor(x => x.LastName) 
```

然后，您可以在生成的子列表中放置您想要的任何格式。Bobs IEnumerable 中的每个 Student 都将根据您在编辑器模板中定义的规则进行渲染。

就实际查询数据库而言，我会按照这种模式创建某种存储库：

```
public interface IRepository<TEntity> where TEntity : class
{
    List<TEntity> FetchAll();
    IQueryable<TEntity> Query { get; }
    void Add(TEntity entity);
    void Delete(TEntity entity);
    void Save();
} 
```

具体实现如下：

```
public class SQLRepository<T> : IRepository<T> where T : class
{
    private DataContext db;
    public SQLRepository()
    {
        this.db = new TestDataContext();
    }
    public void Add(T entity)
    {
        db.GetTable(Of T)().InsertOnSubmit(entity)
    }
    public void Delete(T entity)
    {
        db.GetTable(Of T)().DeleteOnSubmit(entity)
    }
    public System.Collections.Generic.List<T> FetchAll()
    {
        return Query.ToList();
    }
    public System.Linq.IQueryable<T> Query {
        get { return db.GetTable<T>(); }
    }
    public void Save()
    {
        db.SubmitChanges()
    }
} 
```

# java - 绑定状态的套接字过多

> ID：11653688
> 
> 赞同：1
> 
> 时间：2012-07-25T15:50:12.153
> 
> 标签：java, sockets

在我们的一个客户系统中，我们面临打开文件过多错误，目前 FD 限制设置为最大值，并且每周发生一次。

在看到 lsof 和 netstat o/p 之后，我能够看到太多的 Sockets 处于 BOUND 状态（20K）。据我了解，这种状态是一种瞬态，我无法找到它实际泄漏的位置。当我在 heapDump 中看到有界套接字之一时，我看到以下 GC 引用

```
>java.net.InetSocketAddress
 >> sun.nio.ch.SocketChannelImpl
  >>>sun.nio.ch.SocketAdaptor
   >>>>java.net.SocksSocketImpl
    >>>>>java.lang.ref.Finalizer 
```

我不知道如何解决这个问题。我需要专家意见吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:55:11.850

为了确保套接字是 close()d，它从终结器线程中关闭。

Finalizer 线程是单线程的，如果它运行缓慢（例如，因为您没有正确关闭连接），您创建套接字的速度可能比清理它们的速度快。

首先要检查的是进行堆栈转储并查看终结器线程通常在等待什么。其次，检查完成后是否*始终*关闭套接字连接。套接字仍将被添加到终结器队列中，但它们不会花费任何时间来检查它们是否已经关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:11:04.573

您严重泄漏套接字。当您应该在某个地方关闭它们时，您不会在 finally 块中关闭它们。我会从 BOUND 状态猜测，你在某个地方调用 new Socket()，然后调用 connect()，如果它失败了，你并没有关闭一个套接字，但可能还有很多其他的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T06:08:21.690

感谢您的提示，我们能够找出问题所在。. 实际上 nio 抛出了一个 unresolvedAddress 异常，在这种情况下，soket 资源没有被清理，但是当 IOException 引发时，所有资源都被清理并释放，现在我们只处理 UnresolvedAddressException。. 修复很简单，但需要时间来解决问题:)

# java - 从文件中读取并存储

> ID：11653691
> 
> 赞同：0
> 
> 时间：2012-07-25T15:50:18.593
> 
> 标签：java

我正在尝试读取文件并使用哈希图存储它，但是出现此错误“java.lang.ArrayIndexOutOfBoundsException：0”。我的输入有两列，由空格分隔，例如名称 ID 等，具有不同的条目。帮助表示赞赏。谢谢。

**输入：**

```
Mary ID
Mary Lastname
Mary Place
Mary DOB
Mary Homepage
Mary Postcode
John ID
John Lastname
John Place
John DOB
John Homepage
John Postcode 
```

**代码：**

```
import java.util.*;

class ReadFileAndStoreHashmap {
    public static void main(String[] args)  {
        try{
            Scanner scanner = new Scanner(new FileReader(".txt"));

            HashMap<String, String> map = new LinkedHashMap<String, String>();

            while (scanner.hasNextLine()) {
                String[] columns = scanner.nextLine().split(" ");
                map.put(columns[0], columns[1]);
                System.out.println(map);
            }
        }
        catch (Exception e) {
            System.out.println(e.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:52:39.507

我会检查您尝试扫描的线路。我怀疑它是空白的，因此扫描仪无法根据需要拆分它。

我建议断言/检查返回数组的长度。如果它没有 2 个元素，那么您可以轻松地报告这一点并根据需要继续或中断，同时向用户报告什么是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:54:23.333

很可能你在某处有一个空行（你文件是否以换行符结尾？然后它后面可能有一个空行。）

添加一个像

```
if(columns.length == 2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:07:56.150

我个人更喜欢使用 BufferedReader。

这是我的建议：

```
try {
    String line;
    BufferedReader filestart = new BufferedReader(new FileReader(file));
    for (line = filestart.readLine(); line !=null; line = filestart.readLine()) {

          String[] columns = line.split(" ");
          map.put(columns[0], columns[1]);
          System.out.println(map);

    }
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

拥有 "line != null" 应该确保您在尝试之前绝对可以拆分行。

# javascript - 如何通过 javascript 访问 Telerik HtmlAttributes 值？

> ID：11653693
> 
> 赞同：0
> 
> 时间：2012-07-25T15:50:25.160
> 
> 标签：javascript, asp.net-mvc-3, jquery, telerik

为了在 Telerik DropDownList 上查询 HtmlAttributes 值，我需要做什么？我知道如何通过 jQuery 做到这一点，但是查询这些的正确方法是什么？

```
 @(Html.Telerik().DropDownListFor(model => model.BookingOfficeIdNew)
                             .Name("BookingOfficeIdNew")
                             .HtmlAttributes(new
                                 {
// How do I access these?
                                     @class = "PropertyProposedValueSelect",
                                     @delta = Model.BookingOfficeIdNew,
                                     @container = "BookingOfficeContainer",
                                     @updateFlag = "BookingOfficeIdChanged",
                                     @deltaValue = "BookingOfficeIdOld",
                                     @newValue = "BookingOfficeIdNew",
                                     @newText = "BookingOfficeNameNew"
                                 })
                             .ClientEvents(events => events
                               .OnChange("SelectListValueUpdated")
                                 .OnLoad("OnDropDownListLoad")
                                 .OnOpen("OnDropDownListOpen")
                               )
                             .BindTo(Model.BookingOfficeIdChanged ? @Html.ToSelectList(Model.BookingOfficeNameNew, Model.BookingOfficeIdNew, true) : ((SelectListItem)ViewData["DefaultSelectListPrompt"]).ToSelectList(true))
                             .SelectedIndex(0)
                             .DataBinding(binding => binding.Ajax().Select("RraOfficeSelectListWithPrompt", "Revision"))
                             ) 
```

**编辑/回答**：我选择使用正确的类名选择父容器；因为 Telerik DropDownList 扩展生成一个 id = "BookingOfficeIdNew" 的输入元素，其父 div 容器具有类 ".t-dropdown"。

$("#BookingOfficeIdNew").parent(".t-dropdown")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:58:09.807

这些值将在 DropDownList 扩展在 HTML 中创建的 HTML 元素上设置。查看由此生成的 HTML。我怀疑这可能有效（注意：我实际上并没有使用过这个特定的 Telerik 控件 - 我只是猜测我使用过的其他人）

```
var newTextValue = $('#BookingOfficeIdNew').attr('newText'); 
```

**更新**

据我所知，您可以通过 jQuery 或常规 javaScript 获取它。Telerik 控件只是将您定义的 HtmlAttributes 放入它用于控件的 HTML 元素中 - 之后您如何处理它们取决于您。它没有提供处理它的机制，因为您已经可以通过 jQuery 或常规 javaScript 来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:59:39.290

您可以通过 getAttribute() 方法访问元素的属性。

在这种情况下，代码将类似于：

```
document.getElementById('BookingOfficeIdNew').getAttribute('updateFlag'); 
```

# c# - 如何将图像处理程序与图像控件联系起来？

> ID：11653698
> 
> 赞同：0
> 
> 时间：2012-07-25T15:50:41.463
> 
> 标签：c#, asp.net

我一直在环顾四周并阅读有关处理程序的信息，但我并不完全了解如何针对我的情况实施它们。

我想显示来自用户剪贴板的屏幕截图。我已经有将剪贴板中的图像检索为位图格式的代码。这就是我所拥有的：

```
var dataobj = new DataObject();
dataobj = (DataObject)Clipboard.GetDataObject();

System.Drawing.Image img = dataobj.GetData(DataFormats.Bitmap) as System.Drawing.Image;
original = (System.Drawing.Image)img.Clone();

img = resizeImage(img, new Size(670, 500));
String s = "c:/Temp/temp.png";
img.Save(s, ImageFormat.Png);
Image1.ImageUrl = s;
Image1.DataBind(); 
```

我的问题是我无法将图像保存到硬盘。

我的第一个问题是图像处理程序会在这种情况下帮助我吗？

如果可以，我如何修改该代码并使用以下代码将其绑定到我的图像处理程序中：

```
public class getmyimage : IHttpHandler 
{
  public void ProcessRequest(HttpContext context)
  {
    HttpResponse r = context.Response;
    r.ContentType = "image/png";
    // Write the requested image
    r.WriteFile("temp.png");
  }

  public bool IsReusable
  {
    get { return false; }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:57:49.773

Hello handlers http 允许客户重定向或重写请求，出于安全原因格式化请求标题，或在某些论坛中显示横幅。但对于您的示例，我认为您不需要 http 处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:39:23.487

在 web.config 文件中配置处理程序并将 URL 分配给 ImageURL 属性或使用带有“ashx”扩展名的通用处理程序文件，如果使用 ASHX，则不需要在 web.config 文件中进行配置。将 ASHX 文件路径分配给 ImageURL 属性。如果要渲染动态图像，请确保清除缓存或在 subsequant 调用中使用不同的 URL，否则您将获得缓存的图像。这是博客条目。

[http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/](http://www.developerfusion.com/code/5223/using-ashx-files-to-retrieve-db-images/)

[http://www.eggheadcafe.com/community/asp-net/17/10093602/how-to-populate-image-form-sql-to-image-control.aspx](http://www.eggheadcafe.com/community/asp-net/17/10093602/how-to-populate-image-form-sql-to-image-control.aspx)

# linux - 用 glob 重命名 vim 中的 konsole 选项卡会使事情出错

> ID：11653700
> 
> 赞同：1
> 
> 时间：2012-07-25T15:50:49.353
> 
> 标签：linux, vim, dbus, kde, konsole

我在我的配置中有以下配置，`vimrc`可以`kde Konsole`根据在 `vim.xml 中编辑的当前文件的标题自动更改选项卡标题。

```
" rename konsole terminal tab with the current filename
" http://vim.wikia.com/wiki/KDE_Konsole_renameSession_to_edited_file_name
" http://cathay4t.blogspot.fr/2011/08/auto-login-via-ssh-and-change-konsole.html
autocmd BufReadPost * :silent !qdbus org.kde.konsole $KONSOLE_DBUS_SESSION org.kde.konsole.Session.setTitle 1 % &
autocmd VimLeavePre * :silent !qdbus org.kde.konsole $KONSOLE_DBUS_SESSION org.kde.konsole.Session.setTabTitleFormat 0 $'%d : %n\n' & 
```

`glob`我的问题是，当我打开一堆文件时

```
vim *.pl 
```

`Konsole`变得有问题：字符在屏幕上随机混合。只有一个文件没有问题，`Konsole tab`它应该被解决。

有什么提示可以杀死这个错误吗？我想到了计算在vim中打开的文件数，

# asp.net-mvc-3 - 当我提交表单时，值没有插入 razor engine mvc3？

> ID：11653704
> 
> 赞同：1
> 
> 时间：2012-07-25T15:50:53.210
> 
> 标签：asp.net-mvc-3

下面是我的查看页面。`<form>`当我插入值时没有标签，它完美地插入。但是当我用`<form>`标签插入未插入的值时，调试点指向`[HttpGet]`而不是`[HttpPost]`. 出于验证目的，我已插入`<form>`标签。但这似乎没有用..告诉我解决方案....

```
@model CustMaster.Models.MyAccount
@using CustMaster.Models

@{
    ViewBag.Title = "Customer Information";
}    

<html>
<head>
   <title>Customer Information</title>
   <link href="../../style.css" rel="stylesheet">     
</head>
<body>

<form action="" id="contact-form" class="form-horizontal">

   @using (Html.BeginForm())
   {        
      <table>
        <tr>
           <td><h3>User Information</h3></td>
        </tr>
      </table>
      <table>
         <tr>
            <td>
             <div class="control-group">

               @Html.LabelFor(model => model.CustomerFirstName, 
               new { @class = "control-label" })

                <div class="controls">
                   @Html.TextBoxFor(model => model.CustomerFirstName, 
                   new { @class = "input-xlarge" })

                </div> 
             </div>
           </td>

          <td>
             <div class="control-group"> 

               @Html.LabelFor(model => model.CustomerMiddleName, 
               new { @class = "control-label" })

                <div class="controls">
                     @Html.TextBoxFor(model => model.CustomerMiddleName, 
                     new { @class = "input-xlarge" })
                </div>
             </div>
         </td>
      </tr>     
 </table>
 <button type="submit">Register</button>
}
@*</form>*@

   <script type="text/javascript" src="../../assets/js/jquery-1.7.1.min.js"></script>   
   <script type="text/javascript" src="../../assets/js/jquery.validate.js"></script>   
   <script type="text/javascript" src="../../assets/js/jquery.validate.min.js"></script>   
   <script type="text/javascript" src="../../script.js"></script>   

</body>
</html> 
```

下面是我的控制器

```
[HttpGet]
public ActionResult Index()
{
   return View();
}

[HttpPost]
public ActionResult Index(MyAccount myacc)
{
   MyAccount ma = new MyAccount();
   var objview = ma.GetCustInfo(myacc);
   return View();            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:53:31.873

您不能嵌套 html 表单 => 它会导致无效标记和未定义行为。您将不得不删除外部`<form>`. `Html.BeginForm`已经生成了一个表单标签。您似乎已经评论了结束表单标签，但没有评论开头。

请稍微格式化您的代码。读起来完全一团糟：

```
@model CustMaster.Models.MyAccount
@using CustMaster.Models

@{
    ViewBag.Title = "Customer Information";
}

<html>
<head>
    <title>Customer Information</title>
    <link href="@Url.Content("~/style.css")" rel="stylesheet">
</head>
<body>
    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "contact-form" })) 
    {
        <table>
            <tr>
                <td><h3>User Information</h3></td>
            </tr>
        </table>
        <table>
            <tr>
                <td>
                    <div class="control-group">
                       @Html.LabelFor(model => model.CustomerFirstName, new { @class = "control-label" })
                       <div class="controls">
                           @Html.TextBoxFor(model => model.CustomerFirstName, new { @class = "input-xlarge" })
                       </div> 
                   </div>
               </td>
               <td>
                   <div class="control-group">
                       @Html.LabelFor(model => model.CustomerMiddleName, new { @class = "control-label" })
                       <div class="controls">
                           @Html.TextBoxFor(model => model.CustomerMiddleName, new { @class = "input-xlarge" })
                       </div>
                   </div>
               </td>
           </tr>
       </table>

       <button type="submit">Register</button>
    }

    <script type="text/javascript" src="@Url.Content("~/assets/js/jquery-1.7.1.min.js")"></script>   
    <script type="text/javascript" src="@Url.Content("~/assets/js/jquery.validate.js")"></script>   
    <script type="text/javascript" src="@Url.Content("~/assets/js/jquery.validate.min.js")"></script>   
    <script type="text/javascript" src="@Url.Content("~/script.js")"></script>
</body>
</html> 
```

Also please notice that I have fixed your script references by introducing url helpers instead of hardcoding the url to them.

# php - 如何在php中四舍五入？

> ID：11653710
> 
> 赞同：1
> 
> 时间：2012-07-25T15:51:11.753
> 
> 标签：php, numbers, rounding

> **可能重复：**
> [在 PHP 中四舍五入到最接近的五的倍数](https://stackoverflow.com/questions/4133859/round-up-to-nearest-multiple-of-five-in-php)

我必须四舍五入，但不是以传统方式。我想四舍五入到 5、10、15、20、25、30、35、40、45、50 等等。四舍五入后，四舍五入的数字应落在上面列出的数字之一。

可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:54:04.223

尝试这个：

```
$rounded_value = round($original_value/5) * 5; 
```

或者如果总是四舍五入：

```
$rounded_value = floor($original_value/5) * 5; 
```

或者如果总是四舍五入：

```
$rounded_value = ceil($original_value/5) * 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:56:16.400

查看[http://www.php.net/manual/en/function.round.php#32008](http://www.php.net/manual/en/function.round.php#32008)

```
<?php 
// Rounding to the nearest fifth 
// or any other increment you wish... 

$percent = "48"; 
  $num = round($percent/5)*5; 
    echo $num; 
    // returns 50 

$percentt = "47"; 
  $numm = round($percentt/5)*5; 
    echo $numm; 
    // returns 45 
?> 
```

# mysql - 有top5和inner join的sql语句

> ID：11653720
> 
> 赞同：1
> 
> 时间：2012-07-25T15:51:51.160
> 
> 标签：mysql, join

我如何编写一个有top5和inner join的sql语句？

目前，这就是我所拥有的：

```
$query = "SELECT OrderItem.ProductCode , Product.ProductName, 
                 count(OrderItem.OrderID) as total_orders 
          FROM `OrderItem` 
          GROUP BY ProductCode 
          ORDER BY total_orders DESC LIMIT 5 
          INNER JOIN Product ON Product.ProductCode = OrderItem.ProductCode"; 
```

但它不起作用。

表：产品表有列：

```
 ProductCode, ProductName, Cat, Qty, CostPr, RetailPr, VendorID 
```

OrderItem 表有列：

```
 OrderID, ProductCode, UnitPr, Qty,TotalPr 
```

我的目标是在提交的订单中显示前 5 名产品的产品代码和产品名称。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:55:10.103

[A`JOIN`是`FROM`子句的一部分，应该出现在你的`GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/join.html):

```
SELECT 
    OrderItem.ProductCode, 
    Product.ProductName, 
    count(OrderItem.OrderID) as total_orders 
FROM 
    OrderItem 
    INNER JOIN Product 
        ON Product.ProductCode = OrderItem.ProductCode
GROUP BY OrderItem.ProductCode, Product.ProductName 
ORDER BY total_orders DESC LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:56:05.000

```
select ol.ProductCode, ol.total_orders, p.ProductName
from (
    select ProductCode, count(OrderID) as total_orders
    from OrderItem
    group by ProductCode
    order by total_orders desc LIMIT 5
) ol
inner join Product p on p.ProductCode = ol.ProductCode 
```

# gwt - glassfish 2.1 上 Web 应用程序的响应时间在 2 年后突然变得很差，没有任何问题

> ID：11653722
> 
> 赞同：0
> 
> 时间：2012-07-25T15:51:55.840
> 
> 标签：gwt, glassfish, smartgwt, sap-ase

我们有一个运行了 2 年的 Web 应用程序，没有任何问题。一周前突然之间，响应时间变得非常糟糕。比正常速度慢大约 10-50 倍。

一次可能有 10-20 个用户使用该系统。90% 的用户请求导致数据库请求。当没有多少用户在线时，系统会在清晨和晚上正常响应。

1.  我们怎样才能发现问题。解决问题的分步文档？
2.  是否有专门的公司或专家可以帮助我们解决问题？

## 环境

Windows Server 2003
Quadcore Intel Xeon X3220, 2.4GHZ, 2 GB Ram
Sybase Anywhere 9 数据库 - 驱动程序：jconn3.jar
Glassfish 2.1
服务器的互联网带宽：100MB/s

## 应用

外部公司访问的带有 SmartGWT-Frontend (SmartGwt 2.4)
WebService 的 Web 应用程序

没有 EJB，只有 WebContainer

首先，硬件似乎并没有达到极限。
完成繁重的请求时，Java.exe 有时会占用 25% 的 CPU 使用率，使用 374 MB Ram
sybase-db 服务器：220MB ram
可用内存：始终在 1GB 左右

## 请求快照

我在 8 分钟内对所有请求进行了快照

210 秒客户端请求 (gwtservice) 45%
总共 967 个请求，每个请求 212 毫秒

100 秒网络服务 (BankOrderService) 20%
总共 86 个请求，每个请求 1170 毫秒

160 秒将前端元素加载到浏览器（.js、.png、jpg、.css 等） 35%
总共 623 个请求，每个请求 250 毫秒

## 最耗时的请求示例（以毫秒为单位）：

15427.302 25.07.2012 11:50 Erfolg user1 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/091FF14E7C1D1187C770833D67B13321.cache.html
13558.571 25.07.2012 1 REMOTEWEB 1 REMOTEWEB URI:/BankApp/org.Bank.Main/sc/modules/ISC_Core.js
12631.877 25.07.2012 11:50 Erfolg user1 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/sc/modules/ ISC_Grids.js
11238.439 25.07.2012 11:50 Erfolg user1 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/sc/modules/ISC_Forms.js
10535.141 25.07.2012 11:50 Erfolg user1 REMOTE_WEB xx。 yy.zz.228 URI:/BankApp/org.Bank.Main/sc/modules/ISC_DataBinding.js
10003.115 25.07.2012 11:55 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
9999.412 25.07.2012 11:49 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
9999.229 25.07.2012 11:55 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
9992.415 25\. 11:49 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
9990.473 25.07.2012 11:55 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
9132.848 25.07.2012 11:55 Erfolg user1 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/gwtservice
5933.174 25.07.2012 11:50 Erfolg user2 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/sc /modules/ISC_Grids.js
5864.426 25.07.2012 11:50 Erfolg user2 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/sc/modules/ISC_Core.js
5571.739 25.07.2012 11:50 Erfolg user2 REMOTE_WEB xx.yy.zz .162 URI:/BankApp/org.Bank.Main/sc/modules/ISC_DataBinding.js
5473.637 25.07.2012 11:50 Erfolg user2 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/sc/ modules/ISC_Forms.js
5158.104 25.07.2012 11:50 Erfolg user3 REMOTE_WEB xx.yy.zz.237 URI:/BankApp/org.Bank.Main/gwtservice
4488.047 25.07.2012 11:50 Erfolg user2 REMOTE_WEB xx.yy.zz。 162 URI:/BankApp/images/chf.jpg
4442.574 25.07.2012 11:56 Erfolg user2 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/sc/modules/ISC_Core.js
4072.268 25.07.2012 11:54 Erfolg 匿名 REMOTE_WEB xx.yy.zz.25 URI:/BankWebService/BankOrderService
3939.546 25.07.2012 11:56 Erfolg user2 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main /sc/modules/ISC_Grids.js
3876.443 25.07.2012 11:50 Erfolg user1 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/sc/modules/ISC_Foundation.js
3727.795 25.07.2012 11:50 Erfolg user4 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/gwtservice
3630.225 25.07.2012 11:48 Erfolg user4 REMOTE_WEB xx.yy.zz.162 URI:/BankApp/org.Bank.Main/ 091FF14E7C1D1187C770833D67B13321.cache.html
3552.007 25.07.2012 11:50 Erfolg user5 REMOTE_WEB xx.yy.zz.228 URI:/BankApp/org.Bank.Main/gwtservice

## 会话

18 个活动会话
客户端登录后（由 glassfish，https 提供），一旦用户通过 glassfish 身份验证，应用程序本身就会有第二次登录，用户必须定义​​他想要登录的分支。第二次登录后，会话中存储了 3 个属性（用户名、分支、IP 地址）。

总是有大约 40%-50% 的会话没有这 3 个属性，我这样解释，第一次登录成功但第二次没有。

示例：会话 id:e6df980ab67cf0456d78761eefa1
8 个没有 3 个属性的会话

会话 id:d72d16bdabb5500e73f721475440:{username=user1, branch=000x, ipadr=xx.xx.xx.xx}
具有 3 个属性的 10 个会话

我想也许这 8 个会话来自黑客？我跑了wireshark来看看是否有一些可疑的IP地址，但是我没有找到很多。有一天，有一个来自瑞典的 ip，我们在瑞典一无所有。然而，这并没有很多流量，在几秒钟内，wireshark 捕获日志中只有几行。

## 在 2012 年 7 月 17 日，其中一位用户的 msn 帐户已被黑客入侵。

在那一天左右，问题也开始了。可能会延迟 1-2 天。
巧合？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:19:35.880

这就是我要按顺序做的事情：

重新启动一切，包括操作系统。几周前出现了闰秒问题。由于 CPU 使用率高，我不得不重新启动我们的 glassfish 服务器。25% 可能是 CPU 内核的最大使用量。我的是基于linux的，我不知道它是否也发生在Windows上。

你能更新你的 glassfish 服务器吗？它已经很老了，并且有许多已知的拒绝服务漏洞。您没有提及您的 Java 版本，但它也可能使用更新。

打开 glassfish 服务器上的访问日志，这样您就可以查看是否收到了一些脚本请求。您可以在管理控制台上执行此操作。

最后看看数据库。有时随着表的变化，查询优化器开始做出糟糕的选择。我不熟悉 sybase 更具体。在 Oracle 中，您需要确保随着表的增长收集优化器统计信息。

# security - 登录验证机制 - 客户端发送用户名/密码的正确方式

> ID：11653724
> 
> 赞同：0
> 
> 时间：2012-07-25T15:51:58.290
> 
> 标签：security

我很好奇如何正确地将用户名和密码从网站登录表单发送到服务器。

如果我只是发送用户名和密码而不将它们散列到 https 服务器，我在**POST**请求中发送给嗅探包并找出密码的人的密码有多暴露？服务器已启用 https。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:05:23.063

如果服务器启用了 HTTPS，那么任何通过网络传输的数据都将被加密。对于纯网络攻击者来说，即使是通过 HTTPS 嗅探明文密码，也很难在任何一方注意到的情况下进行嗅探。

HTTPS 在传输层上使用 SSL/TLS，旨在提供加密和身份验证。作为其握手的一部分，SSL/TLS 协议协商一个对称加密密钥，该密钥对于每个会话都不同，并与强大的算法一起使用来保护线路上的数据。

为了减轻“中间人”攻击，客户端和服务器用于建立共享加密密钥的非对称密钥也由证书颁发机构进行加密签名，以提供信任保证并防止修改证书. 只要可以信任证书颁发机构，就很容易检查证书本身的签名和服务器名称。所有现代浏览器都会自动执行此操作，并在证书有任何问题时向用户发出警告。

只要您和您的用户了解有关正确使用 SSL 的问题（例如，确保您的私钥安全，并确保您的用户注意浏览器警告），就可以通过 SSL 连接发送明文密码。

如果您的应用程序要求您甚至无法做到这一点，您可能会考虑 X.509 身份验证（在客户端和服务器端使用证书）或 Kerberos 身份验证（不通过线路发送密码）。但是，对于一个基本的 Web 应用程序，这两种解决方案都是多余的。

# perl - 例程作为参数——泛型变量不起作用

> ID：11653726
> 
> 赞同：2
> 
> 时间：2012-07-25T15:52:00.573
> 
> 标签：perl

我正在编写一个游戏系统（战争游戏等），并正在创建用于创建和显示十六进制地图的系统。我很快意识到我在重复执行 x=(0..maxx) 和 y=(0..maxy) 的嵌套循环。所以我尝试修改我在某处找到的一些代码（高级 perl 书籍之一，我忘记了在哪里），以创建一种更简单的方法来执行这种循环操作。这就是我想出的：

```
sub fillmap (&@) {
    my $code = shift;
    no strict 'refs';
    use vars qw($x $y);
    my $caller = caller;
    local(*{$caller."::x"}) = \my $x;
    local(*{$caller."::y"}) = \my $y;
    foreach $x (0..5) {
        foreach $y (0..3) {
            warn "fillmap $x,$y\n";
            &{$code}($x,$y);
        }
    }
} 
```

它应该像 一样工作`sort`，但使用`$x`and`$y`而不是`$a`and `$b`。

注意：警告语句用于调试。我还简化了 x 和 y 范围（传入的数组确定了 maxx 和 maxy 值，但我不想用计算它们的例程混淆这个讨论......我只是将它们硬编码为 maxx=5 和最大值=3)

所以，这个例程的执行如下：

```
fillmap {warn "$x,$y\n";} @map; 
```

应该产生 x,y 对的列表。但相反，它给了我这个：

```
fillmap 0,0
,
fillmap 0,1
,
fillmap 0,2
,
fillmap 0,3
,
fillmap 1,0
,
... 
```

请注意，“fillmap”行来自用于调试的子程序。但不是每个 x,y 对，我只得到逗号（$x 和 $y 未定义）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:30:36.590

问题是`for $x`它自己的本地化。循环内部`$x`不是`$x`别名为`$caller::x`.

您需要执行以下操作之一：

*   复制`$x`到`$caller::x`循环内部。
*   循环内部的`$caller::x`别名。`$x`

以下是后者：

```
use strict;
use warnings;

sub fillmap(&@) {
    my $code = shift;

    my $caller = caller();
    my $xp = do { no strict 'refs'; \*{$caller.'::x'} };  local *$xp;
    my $yp = do { no strict 'refs'; \*{$caller.'::y'} };  local *$yp;

    for my $x (0..1) {
        *$xp = \$x;
        for my $y (0..2) {
            *$yp = \$y;
            $code->();
        }
    }
}

our ($x, $y);
fillmap { warn "$x,$y\n"; } '...'; 
```

`our ($x, $y);`您可以通过使用`$a`and`$b`而不是`$x`and来避免需要`$y`。您无法通过将其（或`use vars qw( $x $y );`）移入来解决问题，`fillmap`因为您显然打算`fillmap`在与调用者不同的包和词法范围中使用。

# matlab - 多列，选择最接近值的方法

> ID：11653743
> 
> 赞同：0
> 
> 时间：2012-07-25T15:53:14.800
> 
> 标签：matlab, variables, average

我正在尝试分析从 CSV 文件获得的数据集。将数据读入 matlab 后，我只剩下一个数据变量。每个文件之间的列数和行数会发生变化。有没有办法平均每一列，然后为具有最接近某个值的平均值创建一个变量？然后还直接选择该中间列之前和之后的列并为它们创建变量，以及为平均值最低的列创建变量？目前，我正在手动选择列并以这种方式为它们创建变量。

例如：

我有这张数字表。（在本例中，为了便于平均，我在每列中使用了相同的数字。

```
 1     2     3     4     5     

    1     2     3     4     5

    1     2     3     4     5

    1     2     3     4     5

    1     2     3     4     5 
```

假设我想要平均值最接近 3.2 的列

该列将是第 3 列，其平均值为 3。然后我希望代码选择之前的列（第 2 列）和之后的列（第 4 列）。以及平均值最低的列（第 1 列）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:03:20.030

首先得到平均值（我假设数据矩阵在变量 X 中）：

```
Xmns = mean(X); 
```

然后找到最小值，使用“min”：

```
[val,ind] = min(Xmns); 
```

“val”保存最小值，“ind”保存Xmns中对应的索引，也就是对应的列。

要找到最接近特定值的列均值，您可以再次使用 min：

```
[val,ind] = min(abs(Xmns-key_val)); 
```

现在“ind”保存列索引，其平均值最接近“key_val”。下一列只是“ind+1”，前一列是“ind-1”——只要确保检查您没有超出矩阵的末端（即 ind 可能已经是 1 或 size(X,2)）。

此外，给定列索引“ind”，要使用该列创建一个新变量，您只需使用：

```
sc= X(:,ind); 
```

如果您想从 X 中删除该列：

```
X(:,ind) = []; 
```

仅此而已。

# php - wordpress中不存在自定义帖子类型存档页面的第四页

> ID：11653747
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:53:31.070
> 
> 标签：php, wordpress

我最近为我公司的博客开发了一种自定义帖子类型，这样我们就可以有一个单独的新闻区。在 archive-presse.php 页面中，我进行了查询，因此：

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
//echo '<div style="display:hidden"> paged :'. $paged . "</div>";
$press_articles = new WP_Query(
    array(
        'post_type' => 'presse', // Tell WordPress which post type we want
        'paged' => $paged,
        'orderby'   => 'post_date',
        'posts_per_page' => '10'
        )
    ); 
```

在底部，我创建了导航链接：

```
<div class="navigation">
<div class="left"><?php previous_posts_link('&laquo; Zurück',$press_articles->max_num_pages) ?></div>
<div class="right"><?php next_posts_link('Weiter &raquo;',$press_articles->max_num_pages) ?></div>
</div> 
```

（奥地利网站，以防您想知道）

在第一页上，这很好用；帖子出现，导航链接也出现，指向第二页，依此类推。然而，在第三页上，当我点击“Weiter”时，我最终进入了 404 页面，尽管我确信仍有文章要显示。

我目前唯一的解决办法是确保每页的帖子等于帖子总数的三分之一。没有太大的修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:15:21.030

问题是，除了在管理界面中设置的内容之外，显然无法设置`'posts_per_page'`任何其他内容，即使对于自定义存档页面也是如此。

相同的代码，减去该`'posts_per_page' => 'x'`行，工作正常。

# python - Eclipse 和 Python 3：为什么 ctypes 中的 printf() 会在后续 print() 语句之后显示在控制台输出中

> ID：11653751
> 
> 赞同：5
> 
> 时间：2012-07-25T15:53:33.317
> 
> 标签：python, eclipse, printf, pydev, ctypes

我在 Windows Vista 上运行带有 PyDev 和 Python 3.2 的 Eclipse，并且正在学习有关 Python 和 ctypes 的教程。

但是，我发现当我调用 msvcrt.printf() 打印字符串时，在所有其他打印语句都显示之前，Eclipse 的控制台输出中不会显示该字符串。

这是我使用的确切代码：

```
from ctypes import *

msvcrt = cdll.msvcrt
message_string = "Hello Worlds!\n"

printf = msvcrt.printf
print(printf("Testing: %s".encode('ascii'),message_string.encode('ascii')))

print("foo")

print("why!?") 
```

这是输出：

```
23
foo
why!?
Testing: Hello Worlds! 
```

我在其他地方看到的唯一解释（对于一般的 C）提到 printf 如何被缓冲并且在显示之前需要换行符，但是字符串中有换行符，我还直接在 printf 语句中添加了一个（'printf("Testing : %s\n",...') 并没有什么区别。

我想在 Eclipse 中工作，我不想每次我想测试脚本时都打开命令提示符，那么有什么方法可以在控制台输出中修复这个顺序吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:59:26.720

如果 C 标准库认为`stdout`连接到文件或管道而不是控制台，它将对其输出进行块缓冲。`fflush`您可以通过发出after来解决此问题`printf`：

```
msvcrt.fflush(msvcrt.stdout) 
```

您也可以强制`stdout`进入非缓冲模式：

```
msvcrt.setvbuf(msvcrt.stdout, None, _IONBF, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:38:47.340

虽然这不能回答您的问题，但 printf 返回`23`的是打印字符的数量，您可以将其替换为`sprintf`and ，这将返回字符串并以正确的预期顺序显示在控制台中。

但是，当您可以对 python 执行相同操作时，我看不到使用 mscvcrt 的 printf 的理由。

# android - 使用 ActionBarSherlock 在 setShareIntent 上出现 NullPointerException

> ID：11653755
> 
> 赞同：2
> 
> 时间：2012-07-25T15:53:42.153
> 
> 标签：android, nullpointerexception, android-actionbar, actionbarsherlock, shareactionprovider

我正在尝试在 SherlockActivity 中使用 ActionBarSherlock + ShareActionProvider。我已经检查过这个（[NullPointerException 使用 ShareActionProvider + actionbarsherlock](https://stackoverflow.com/questions/10633140/nullpointerexception-using-shareactionprovider-actionbarsherlock)），但它并没有解决我的问题。我认为代码是正确的，但我不断收到 FC 和这个 logcat：

```
07-25 15:31:26.758: E/AndroidRuntime(911): FATAL EXCEPTION: main
07-25 15:31:26.758: E/AndroidRuntime(911): java.lang.NullPointerException
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.corsalini.david.calcolopesi.ActCalcolo.onCreateOptionsMenu(ActCalcolo.java:162)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.actionbarsherlock.app.SherlockActivity.onCreatePanelMenu(SherlockActivity.java:173)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.actionbarsherlock.ActionBarSherlock.callbackCreateOptionsMenu(ActionBarSherlock.java:556)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.preparePanel(ActionBarSherlockCompat.java:483)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.actionbarsherlock.internal.ActionBarSherlockCompat.dispatchInvalidateOptionsMenu(ActionBarSherlockCompat.java:273)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.actionbarsherlock.internal.ActionBarSherlockCompat$1.run(ActionBarSherlockCompat.java:988)
07-25 15:31:26.758: E/AndroidRuntime(911):  at android.os.Handler.handleCallback(Handler.java:587)
07-25 15:31:26.758: E/AndroidRuntime(911):  at android.os.Handler.dispatchMessage(Handler.java:92)
07-25 15:31:26.758: E/AndroidRuntime(911):  at android.os.Looper.loop(Looper.java:123)
07-25 15:31:26.758: E/AndroidRuntime(911):  at android.app.ActivityThread.main(ActivityThread.java:3683)
07-25 15:31:26.758: E/AndroidRuntime(911):  at java.lang.reflect.Method.invokeNative(Native Method)
07-25 15:31:26.758: E/AndroidRuntime(911):  at java.lang.reflect.Method.invoke(Method.java:507)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-25 15:31:26.758: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-25 15:31:26.758: E/AndroidRuntime(911):  at dalvik.system.NativeStart.main(Native Method) 
```

这是代码：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.menu_main, menu);
    MenuItem menuItem = menu.findItem(R.id.miShare);
    ShareActionProvider mShareActionProvider = (ShareActionProvider) menuItem.getActionProvider();
    // Set the default share intent
    Intent shareIntent = new Intent(Intent.ACTION_SEND);
    shareIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
    shareIntent.setType("text/plain");
    shareIntent.putExtra(Intent.EXTRA_TEXT, getString(R.string.share_text));
    shareIntent.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.share_subject));
    mShareActionProvider.setShareIntent(shareIntent);  //Line 162
    return true;
} 
```

这是菜单的xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/miPref"
        android:icon="@drawable/ic_action_settings"
        android:showAsAction="ifRoom"
        android:title="@string/settings"
        android:visible="true" />
    <item
        android:id="@+id/miReset"
        android:icon="@drawable/ic_action_reset"
        android:showAsAction="ifRoom"
        android:title="@string/reset"
        android:visible="true" />
    <item
        android:id="@+id/miShare"
        android:actionProviderClass="android.widget.ShareActionProvider"
        android:showAsAction="ifRoom"
        android:title="@string/share" />
</menu> 
```

编辑1：

我正在尝试添加这一行： mShareActionProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME);

现在 NullPointerException 就在这里。是否有可能没有这样的文件，所以我得到了例外？

编辑 2：不要照顾编辑 1 我发现问题出在 XML 中。你必须使用：

```
 android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" 
```

但我仍在使用原始的 android 小部件。我还包括：

```
 menuItem.setActionProvider(mShareActionProvider); 
```

在活动中，但我认为这是多余的。

现在我有两个问题：1.只有当“分享”按钮没有出现在操作栏中，应用程序才不会崩溃，如果我试图把它放在列表的顶部，应用程序就会崩溃并给出与此处发布的日志相同。2.当我点击“分享”时没有任何反应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T18:40:32.280

**笔记**

我试图复制你的错误，我唯一能`mShareActionProvider`做到的两种方法`null`是：

1.  完全忽略这个：`android:actionProviderClass=...`
2.  使用 Android 类：`android:actionProviderClass="android.widget.ShareActionProvider"`

正如您在 EDIT 2 中发现的那样，适当的 ActionBarSherlock 代码是：

```
android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider" 
```

* * *

**建议**

> 1) ...如果我尝试将（菜单项）放在列表​​顶部，应用程序崩溃并给出相同的 logcat

尝试创建一个新的菜单 XML 文件，将其保存为 res/menu/temp_menu.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/miShare"
        android:actionProviderClass="com.actionbarsherlock.widget.ShareActionProvider"
        android:showAsAction="always"
        android:title="Share" />
</menu> 
```

并加载它：

```
inflater.inflate(R.menu.temp_menu, menu); 
```

> 2）如果“共享”在溢出菜单中，当我选择它时没有任何反应。

这是此处详细介绍的 ActionBarSherlock 向后兼容性怪癖，[问题 #455](https://github.com/JakeWharton/ActionBarSherlock/issues/455)。

* * *

**空指针异常**

从您的一些评论中，我想澄清 NullPointerException 到底是什么。当您尝试添加此行时：

```
mShareActionProvider.setShareHistoryFileName(ShareActionProvider.DEFAULT_SHARE_HISTORY_FILE_NAME); 
```

你说：

> 现在 NullPointerException 就在这里。是否有可能没有这样的文件，所以我得到了例外？

NPE 移到这里的原因是因为`mSharedActionProvider`仍然为空。您不能引用`null.method()`或在您的情况下的概念`null.setShareHistoryFileName()`，这就是 NPE 的含义。换句话说，你不能要求什么都不做。文件是否存在在这里都没有关系，应用程序在此*之前*崩溃。

您可以在调试器中自己证明这一点，也可以添加如下一行：

```
ShareActionProvider mShareActionProvider = (ShareActionProvider) menuItem.getActionProvider();
Log.w("NullPointerException", "Is mShareActionProvider null: " + (mShareActionProvider == null)); 
```

希望有帮助！

# sql-server - 更新列很慢

> ID：11653757
> 
> 赞同：0
> 
> 时间：2012-07-25T15:53:45.377
> 
> 标签：sql-server, sql-server-2008

有人可以向我解释为什么更新表列只使用八个可能的处理器之一吗？我认为这样的过程可以很容易地细分为所有可用的处理器？

查询就像这样：

```
update
    My_Table
set
    column2 = 'Atlantic'
from
    My_Table
where
    column2 != 'Ocean' 
```

有问题的表大约是 6GB。查询期间的 IO Deltas 约为 7MB/s，非常低。

服务器是一台远程机器，我是唯一的用户。并行性已启用。

我没有使用我可能应该使用的索引。

## 更新

解决方案可能是不更新并使用 case 语句选择表的副本。复制完成后，可以删除旧表。当然，这只有在有足够的磁盘空间时才可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:17:49.397

我的第一个问题是你有 TRIGGER，因为这通常是最小的原因。既然你有这么多的数据，所以可能想检查以下几点：

索引更新
外键查找
外键级联
索引视图
计算列
检查约束
锁
快照隔离
文件增长

# c# - 确定哪个适配器导致 NetworkChange 事件触发

> ID：11653758
> 
> 赞同：0
> 
> 时间：2012-07-25T15:53:49.027
> 
> 标签：c#, ethernet

我正在尝试编写一个服务，该服务将在事件[`NetworkChange.NetworkAvailabilityChanged`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.networkavailabilitychanged.aspx)或[`NetworkChange.NetworkAddressChanged`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkchange.networkaddresschanged.aspx)触发时报告适配器更改的内容。到目前为止，我发现的每个示例都显示了如何枚举 nic，而不是如何确定哪个适配器发生了更改并随后触发了事件。

这甚至可能吗？到目前为止，我唯一想到的就是最初枚举适配器并将值存储在某种集合中。然后，当其中一个事件触发时，比较列表的差异。这可能有效，但对我来说似乎不自然地过度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:19:31.807

“最初枚举适配器并将值存储在某种集合中。然后当其中一个事件触发时，比较列表的差异”

是的，这样做。它还有一个优点，即使没有通知，您也可以定期检查更改，并且更易于测试。

# javascript - IE：无法获取属性“clientWidth”的值：对象为空或未定义

> ID：11653760
> 
> 赞同：0
> 
> 时间：2012-07-25T15:53:56.547
> 
> 标签：javascript, jquery, html, internet-explorer, dom

该错误消息仅显示在 IE 上，但似乎没有解决此问题的方法。

我已经设置`http-equiv="X-UA-Compatible"`为`IE8`，但仍然无法正常工作。

我想做的是使用 jQuery 重新加载表格的内容。但似乎 jQuery 的重新加载显然无法设置，`clientWidth`因为 jQuery 中没有该术语的对应项。

```
<table style="" id="actionMap" class="top-table"> 
```

id 属性`<table>`用于 DOM，class 用于 jQuery。

```
j(function() {
        j('#filter_workflows').change(function () {
            var workflow = j(this).val();
            var url = '<spring:url value="/actionMap" />' + '?filter_workflow=' + workflow;
            var savedWidth = document.getElementById("actionMap").clientWidth;
            j('table.top-table').load(url+' table.top-table > *');
            j('input[name=filter_workflow]').val(workflow);
            document.getElementById("actionMap").clientWidth = savedWidth;
        });
    }); 
```

原来该属性`clientWidth`是只读的。

```
 document.getElementById("actionMap").clientWidth = savedWidth; 
```

永远不会成功。

那么我们如何在jQuery重新加载表格后设置clientWidth属性呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:00:00.703

这有帮助吗？

[http://api.jquery.com/width/](http://api.jquery.com/width/)

clientWidth 可能是特定于客户端的（它可能是特定于客户端的，除了 IE 之外的所有东西都支持它......）

jQuery 为这些提供了包装函数，请参阅[http://api.jquery.com/category/dimensions/](http://api.jquery.com/category/dimensions/)和[http://api.jquery.com/category/offset/](http://api.jquery.com/category/offset/)

# perl - 使用通配符检查 Perl 中是否存在目录

> ID：11653762
> 
> 赞同：1
> 
> 时间：2012-07-25T15:53:58.067
> 
> 标签：perl

我需要检查 Perl 脚本中是否存在任何一组目录。目录以 XXXX*YYY 格式命名 - 我需要检查每个 XXXX 并输入 if 语句，如果为真。

在我的脚本中，我有两个变量 $monitor_location（包含被扫描的根目录的路径）和 $clientid（包含 XXXX）。

下面的代码片段已被扩展以显示更多我正在做的事情。我有一个返回每个客户端 ID 的查询，然后我循环返回每个记录并尝试计算该客户端 ID 使用的磁盘空间。

到目前为止，我有以下代码（不起作用）：

```
# loop for each client
while ( ($clientid, $email, $name, $max_record) = $query_handle1->fetchrow_array() )
{
  # add leading zeroes to client ID if needed
  $clientid=sprintf"%04s",$clientid;

  # scan file system to check how much recording space has been used
  if (-d "$monitor_location/$clientid\*") {
    # there are some call recordings for this client
    $str = `du -c $monitor_location/$clientid* | tail -n 1 2>/dev/null`;
    $str =~ /^(\d+)/;
    $client_recspace = $1;
    print "Client $clientid has used $client_recspace of $max_record\n";
  }
} 
```

明确一点，如果有任何以 XXXX 开头的文件夹，我想输入 if 语句。

希望这是有道理的！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:01:46.540

您可以使用[glob](http://p3rl.org/glob)来扩展通配符：

```
for my $dir (grep -d, glob "$monitor_location/$clientid*") {
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:21:10.640

我有一个反对 glob 的“东西”。（它似乎只工作一次（对我来说），这意味着你以后不能在同一个脚本中再次重新 glob 同一个目录。不过，它可能只是我。）

我更喜欢 readdir()。这肯定更长，但它是 WFM。

```
chdir("$monitor_location") or die;
open(DIR, ".") or die;
my @items = grep(-d, grep(/^$clientid/, readdir(DIR)));
close(DIR); 
```

@items 中的所有内容都符合您的要求。

# arrays - Mustache - 如何检测数组不为空？

> ID：11653764
> 
> 赞同：44
> 
> 时间：2012-07-25T15:54:01.317
> 
> 标签：arrays, logic, mustache

我想用 Mustache 实现以下逻辑：

```
{{#if users.length > 0}}
    <ul>
        {{#users}}
            <li>{{.}}</li>
        {{/users}}
    </ul>
{{/if}}

// eg. data = { users: ['Tom', 'Jerry'] } 
```

我应该修改`users`结构以满足需要吗？例如：

```
{{#hasUsers}}
    <ul>
        {{#users}}
            <li>{{.}}</li>
        {{/users}}
    </ul>
{{/hasUsers}}

// eg. data = { hasUsers: true, users: ['Tom', 'Jerry'] } 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-07-27T11:14:51.233

抱歉，这可能为时已晚。但我有类似的要求，并找到了更好的方法来做到这一点：

```
{{#users.length}}
    <ul>
        {{#users}}
            <li>{{.}}</li>
        {{/users}}
    </ul>
{{/users.length}}
{{^users.length}}
    <p>No Users</p>
{{/users.length}} 
```

此处的工作示例：http: [//jsfiddle.net/eSvdb/](http://jsfiddle.net/eSvdb/)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-04-02T17:04:38.697

如果您希望内部语句对数组的每个元素重复，则使用 {{#users.length}} 效果很好，但如果您只希望语句只运行**一次**，您可以使用：

```
{{#users.0}}
...
{{/users.0}}
{{^users.0}}
...
{{/users.0}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-25T08:29:40.127

我正在为 Python使用[雪佛龙。](https://github.com/noahmorrison/chevron)由于`{{#users.length}}`如先前答案中所述依赖于实现，并且在雪佛龙中对我不起作用，因此我在代码中返回一个对象，该对象仅在列表非空时包含列表。据推测，这种技术也适用于其他语言。

```
users = ["user1", "user2", "userN"]
user_obj = {"user_list": users} if len(users) > 0 else {}
template = """
{{#users}}
<ul>
    {{#user_list}}
    <li>{{.}}</li>
    {{/user_list}}
</ul>
{{/users}}
"""

chevron.render(template, {"users": user_obj}) 
```

# vb.net - 对象在 RSACryptoServiceProvider 中已经存在异常

> ID：11653768
> 
> 赞同：2
> 
> 时间：2012-07-25T15:54:08.870
> 
> 标签：vb.net, encryption, cryptography, rsacryptoserviceprovider

首先让我先说如果我把这个问题发错了地方，我很抱歉。我看到[Object 的条目已经存在于 RSACryptoServiceProvider 中](https://stackoverflow.com/questions/4763628/object-already-exists-in-rsacryptoserviceprovider)。我尝试了那里提供的解决方案。但是，他们没有解决我的问题。另外，我没有看到重新提问的选项。

我有几乎同样的问题。我有一个`RSACryptoServiceProvider`在同一台机器上和同一帐户下的两个项目中使用的类。两个项目都存在于同一个解决方案中，并共享相同的加密代码。一个项目，服务器，是一个 Windows 服务，另一个项目，客户端，是一个 Windows 应用程序。他们使用`RSACryptoServiceProvider`非对称加密通过命名管道相互交谈。我一开始只是让服务器在与客户端相同的应用程序中以另一个 Windows 窗体运行。一切运行良好。然后，我将服务器移至 Windows 服务。

Windows 服务启动正常。它似乎能够创建它的`RSACryptoServiceProvider`罚款实例。但是，当在 Windows 应用程序中运行的客户端启动时，它会在尝试创建它时遇到运行时错误。这是在两个项目中运行的代码。

```
rule = New CryptoKeyAccessRule("everyone", CryptoKeyRights.FullControl, AccessControlType.Allow)
csp = New CspParameters
csp.KeyContainerName = _KeyContainerName
csp.Flags = CspProviderFlags.UseMachineKeyStore
csp.CryptoKeySecurity = New CryptoKeySecurity()
csp.CryptoKeySecurity.SetAccessRule(rule)

//Object already exists exception happens here
rsa = New RSACryptoServiceProvider(_KeySize, csp) 
```

如您所见，我有设置访问规则的代码，如关于此主题的另一篇文章中所述。不幸的是，这并没有解决我的问题。还有什么需要改变的吗？

# rest - 任何示例异步 JAX-RS webhook 示例

> ID：11653769
> 
> 赞同：3
> 
> 时间：2012-07-25T15:54:10.057
> 
> 标签：rest, jax-rs, webhooks

我有一个 JAX-RS 网络服务。其中一项操作可能需要很长时间，因此我需要将其设为异步 REST 调用，然后在完成后回调客户端。

我阅读了有关“WebHooks”的信息，想知道是否有我可以遵循的示例实现？ [http://www.infoq.com/news/2009/07/AsynchronousRest](http://www.infoq.com/news/2009/07/AsynchronousRest)

# selenium - 如何在 Selenium 中设置对象存储库？

> ID：11653772
> 
> 赞同：-2
> 
> 时间：2012-07-25T15:54:16.120
> 
> 标签：selenium, frameworks, automation, webdriver, selenium-webdriver

我正在尝试在 Selenium Webdriver 中设置一个对象存储库，以确保将来对对象的更改不会影响我的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:30:50.130

从我的角度来看，[PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)是要走的路。

就这么简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T11:43:28.787

1.  有一个包含所有对象定位器的 CSV....
2.  CSV 解析器并将所有值存储在以列和行作为索引的多维数组中。
3.  在需要在代码中使用定位器的任何地方使用该数组...
4.  如果您不想拥有数组的硬编码索引值，那么您将需要一些增量机制......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T10:21:25.963

```
 try{
    while(loc_index<=loc_type.size()-1){
    //  System.out.println("1sy");
    while(loc_val_index<=loc_val.size()){
        while(obj_index<=obj_value.size()-1){   
          String loc_data = loc_type.get(loc_index);
          if(loc_data.equals("name")){           
     WebElement element = driver.findElement(By.name(loc_val.get(loc_val_index)));
    if (element!=null){
        try {
       element.sendKeys(obj_value.get(obj_index)); } catch (Exception e){}
       obj_index++;}}else if(loc_data.equals("xpath")){
      WebElement element = driver.findElement(By.xpath(loc_val.get(loc_val_index)));
      if (element!=null){                            
          element.sendKeys(obj_value.get(obj_index));  
           Log("Data Entered");
          obj_index++;}}
      else if(loc_data.equals("id")){ 
      try{
          WebElement element = driver.findElement(By.id(loc_val.get(loc_val_index))); 
          if (element!=null){
             element.sendKeys(obj_value.get(obj_index));                                
               obj_index++;}} catch (Exception e) {}}
             break;}
        loc_val_index++;
        break;}
    loc_index++;
    }
        }catch (Exception e){}
        finally{
            obj_index=0;
            loc_index=0;
            loc_val_index=0;
        } 
```

# php - cakephp 转义函数或 mysql_real_escape_string 不安全？

> ID：11653775
> 
> 赞同：0
> 
> 时间：2012-07-25T15:54:41.103
> 
> 标签：php, cakephp, sql-injection

今天在我们的服务器上出现了奇怪的问题。我们已经从 % 和 _ 登录 mysql 查询中获得了 DDOS，它们已成功通过 GET 请求。例如

```
domain.com/search/%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25v%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25%25a 
```

似乎 cakephp 没有过滤它们？在[官方 mysql 指南](http://dev.mysql.com/tech-resources/articles/guide-to-php-security-ch3.pdf)中，他们写了很多关于这个问题的文章。这就是他们展示解决这个问题的方式：

```
addcslashes(mysql_real_escape_string(“%something_”), “%_”); 
```

在 cakephp 框架中有`escape()`在模型中随处使用的函数。看看它包含什么：

```
/** 
 * Returns a quoted and escaped string of $data for use in an SQL statement.
 *
 * @param string $data String to be prepared for use in an SQL statement
 * @param string $column The column into which this data will be inserted
 * @param boolean $safe Whether or not numeric data should be handled automagically if no column data is provided
 * @return string Quoted and escaped data
 */ 
    function value($data, $column = null, $safe = false) {
        $parent = parent::value($data, $column, $safe);

        if ($parent != null) {
            return $parent;
        }   
        if ($data === null || (is_array($data) && empty($data))) {
            return 'NULL';
        }   
        if ($data === '' && $column !== 'integer' && $column !== 'float' && $column !== 'boolean') {
            return "''";
        }   
        if (empty($column)) {
            $column = $this->introspectType($data);
        }   

        switch ($column) {
            case 'boolean':
                return $this->boolean((bool)$data);
            break;
            case 'integer' :
            case 'float' :
            case null :
                if ($data === '') {
                    return 'NULL';
                }   
                if (is_float($data)) {                                                                                                               
                    return str_replace(',', '.', strval($data));
                }
                if ((is_int($data) || is_float($data) || $data === '0') || (
                    is_numeric($data) && strpos($data, ',') === false &&
                    $data[0] != '0' && strpos($data, 'e') === false)) {
                        return $data;
                    }
            default:
                $data = "'" . mysqli_real_escape_string($this->connection, $data) . "'";
            break;
        }   

        return $data;
    } 
```

只是对一些变量类型和类似这样的东西的基本保护.. 转义 mysql 特殊字符怎么样？大约一年前，我读到了如何在 mysql 查询中借助百分号来转义引号 =) 当时是盲目注入的炒作，而且这个技巧几乎无处不在，因为每个人都使用 mysqli_real_escape_string。

我必须在这里提出一个问题：如何在 cakephp 中转义变量 - 真的安全吗？

**更新：** IRC 中的一些人指出，必须对 REQUEST 字符串进行转义，而不是自行查询。他们可能是对的，那么我如何在不使用自定义函数的情况下在 GET 请求字符串中转义 % 和 _ 字符.. 任何清理方法都可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:10:38.020

这并不意味着 Cake 容易受到 SQL 注入的影响，因为它在底层使用了准备好的语句，这确实意味着您`LIKE`在 CakePHP 中使用了搜索查询并且它允许使用通配符。

我认为这不是理想的行为，因为我在开发时也发现了这一点，我只是在上面找到了`LIKE`现在使用的这一行。

```
$term = str_replace('%', ' ', $term); 
```

您无需亲自进行转义，框架会为您处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:08:11.500

您显示的代码示例是安全的。这一行：

```
$data = "'" . mysqli_real_escape_string($this->connection, $data) . "'"; 
```

转义特殊字符。该方法检查变量的类型 - 如果它不是字符串，则不需要转义。

很高兴看到所谓的“漏洞”的来源`mysql_real_escape_string()`。

# cuda - 是否有排序 atomicAdd 或等价物

> ID：11653776
> 
> 赞同：2
> 
> 时间：2012-07-25T15:54:46.063
> 
> 标签：cuda, gpu, gpgpu

我有一个有效的检测和跟踪过程（行和列中的像素图像），它不能给出完全可重复的结果，因为它使用 atomicAdd 意味着数据点可以以不同的顺序累积，从而导致在计算质心和其他方面时出现四舍五入错误跟踪统计。

atomicAdd 的主要冲突很少，因此大多数结果是相同的。但是，对于验证和验证，我需要能够使 atomicAdd 以一致的顺序添加这些冲突数据点，这样当两者都想使用 atomicAdd 在他们的行 N 上添加一个像素时，线程 3 将击败线程 10正在处理。

是否有一种机制允许 atomicAdd 在其线程顺序中具有确定性，或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-04T21:53:25.513

查看伯克利的“Fast Reproducible Atomic Summations”论文。

[http://www.eecs.berkeley.edu/~hdnguyen/public/papers/ARITH21_Fast_Sum.pdf](http://www.eecs.berkeley.edu/~hdnguyen/public/papers/ARITH21_Fast_Sum.pdf)

但基本上你可以尝试像找到一个 abs 值的总和以及你的原始总和，将它乘以 O(N^2)，然后减去并将它添加到/从你的原始总和 (sum = (sum - sumAbs * N^ 2) + sumAbs * N^2) 以抵消最低位（不确定的）。正如您所看到的，上限与 N^2 成正比...因此 N（总和中的元素数）越低，您的误差范围就越好。

您还可以尝试使用 Kahan 求和来结合上述方法来减少误差范围。

# c# - 刷新表单的问题

> ID：11653777
> 
> 赞同：0
> 
> 时间：2012-07-25T15:54:51.960
> 
> 标签：c#

我有一个带有标签 A、B 和 C 的表单。在*静态 void Main()*中，我说：

```
Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Form1 form1 = new Form1();
Application.Run(form1); 
```

Form1 构造函数调用

```
InitializeComponent();
updateForm(); 
```

其中 updateForm 从远程机器读取日志 ((FtpWebRequest)WebRequest) 并适当地更新标签。

我想不断更新表单，因为远程日志文件每隔几分钟就会更改一次。

我尝试在 main 方法的 while(true) 循环中调用 form1.updateLog()，但表单没有刷新。此外， form1.Refresh() 似乎不起作用。

有什么提示吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T15:56:51.350

当您在循环中执行此操作时，很可能是在 UI 线程上。这意味着您不断地告诉表单重新绘制，但不给它时间或机会这样做（请记住：您正在阻止它将执行此操作的线程）。

而是使用计时器并从那里刷新，例如每 100 毫秒左右。

# c# - 为什么我在 linq 中看到“if”和三元之间的不同行为？

> ID：11653779
> 
> 赞同：1
> 
> 时间：2012-07-25T15:54:53.980
> 
> 标签：c#, if-statement, ternary-operator

我有一种情况，我使用三元运算符来确定 IEnumerable 是否为空，并且它的行为与我预期的不同。

如果我这样做：

```
var children = clickedItem.Children != null ? clickedItem.Children.ToArray() : null; 
```

然后我收到一个参数空异常（“源不能为空”），这表明`.ToArray()`尽管进行了空检查，但还是发生了。

如果我将其更改为（看似）相同的逻辑：

```
var children = clickedItem.Children;
if (children != null) children = children.ToArray(); 
```

然后错误消失。三元运算符不会像我一直想象的那样短路吗？

**编辑**根据问题：

是的，我第一次设置孩子，但不是第二次：

```
public IEnumerable<AlbumOrTrack> Children
 {
    get
    {
        if (_children == null)
        {
            _children = _dataAccess.GetChildren(this);
        }
        return _children;
    }
 } 
```

异常发生在 .ToArray() 调用中。我得到了

```
// Exceptions:
//   System.ArgumentNullException:
//     source is null. 
```

（来自元数据）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T15:59:20.313

一个区别是，在第二种形式中，您只对表达式求值`clickedItem.Children` *一次*。

想象一下，如果该`Children`属性被实现为：

```
public IEnumerable<Child> Children
{
    get
    {
        var ret = children;
        // Mwahahaha! A getter with side-effects. They'll never expect that!
        children = null; 
        return ret;
    }
} 
```

（或者它可能只是一个竞争条件，当然。）

# javascript - 如何强制 Dojo TitlePane 与 CSS 重叠？

> ID：11653780
> 
> 赞同：1
> 
> 时间：2012-07-25T15:54:53.583
> 
> 标签：javascript, html, css, dojo

我有这个[jsfiddle](http://jsfiddle.net/fugKS/)，它在中心窗格的右上角有两个`TitlePane`小部件。现在，当单击右侧`TitlePane`（“切换底图”）时，会导致左侧`TitlePane`（“地图叠加层”）向左移动。相反，我希望 right`TitlePane`在打开时隐藏左侧`TitlePane`而不是移动它。

我试过玩`z-index`, `overflow`,`position`和`float`，但到目前为止还没有运气。我对 Dojo 还很陌生，所以我想我还没有找到正确的样式参数组合。

有没有人有任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:22:33.340

尝试给你的标题窗格一个 id，然后添加如下所示的 evenhooks。要给一个小部件一个 id，只需将*它*作为`id:'leftId'`. 在示例中，我将使用您的 classNames 作为 id。

```
dojo.addOnLoad(function() {
    var wLeft = dijit.byId('leftTitlePane');
    var wRight = dijit.byId('rightTitlePane');
    dojo.connect(wLeft, 'onShow', function() {
        wRight.domNode.style.display = 'none';
    });
    dojo.connect(wLeft, 'onHide', function() {
        // wait a few for collapse to finish
        setTimeout(function() {wRight.domNode.style.display = '';}, 120);
    });
    dojo.connect(wRight, 'onShow', function() {
        wLeft.domNode.style.display = 'none';
    });
    dojo.connect(wRight, 'onHide', function() {
        // wait a few for collapse to finish
        setTimeout(function() {wLeft.domNode.style.display = '';}, 120);
    });
}); 
```

# c++ - 循环有效的用户输入c ++

> ID：11653789
> 
> 赞同：-1
> 
> 时间：2012-07-25T15:55:27.573
> 
> 标签：c++, file-io, ifstream

C++ 新手，但我有一些编程经验...

我正在尝试一种非常基本的方法来从用户那里获取文件名，然后打开文件。我正在使用一些非标准库（斯坦福库），但我认为这不会影响事情。

```
 ifstream in;
while(true){
    string filename="";
    cout << "Enter the name of the file. ";
    getline(cin, filename);
    in.open(filename.c_str());
    if (in.fail()){
        cout << "ERROR opening file. Try again.";
    } else {
        break;
    }
}
     ... more code ... 
```

如果我第一次输入有效的文件名，它可以正常工作并继续前进。如果我输入了无效的文件名，我会收到错误消息并循环询问另一个文件名，但即使文件有效，它也会将所有后续条目视为无效。任何想法我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T15:57:16.467

`in.clear()`之后尝试调用`if (in.fail()){`。这将清除文件状态位，因此您的下一次调用`fail()`将看到最后一次`open`调用的结果（而不是查看最后一次失败的`open`状态）。[来自 c++ 文档](http://www.cplusplus.com/reference/iostream/ios/clear/)：

```
void clear ( iostate state = goodbit ); 
```

> 设置错误状态标志 为错误控制状态设置一个新值。
> 
> 控制状态中的所有位都被新的位替换；调用之前存在的值无效。
> 
> 如果使用 goodbit 作为参数（这是默认值）调用函数，则所有错误标志都将被清除。

# wcf - WCF 服务中的 Windows 集成安全性

> ID：11653794
> 
> 赞同：0
> 
> 时间：2012-07-25T15:56:02.840
> 
> 标签：wcf, security, windows-authentication

我在 Windows 服务中托管了一个 .Net 4.0 WCF 服务，该服务通过 net.tcp 绑定使用传输安全性。有很多很好的例子来说明如何设置它。我现在正在寻找的是在此方案中授权用户的示例。

我们假设此服务将成为一个系统的一部分，该系统全部位于一个具有 Active Directory 的域中。使用 ADFS 而不是 Windows 集成安全性进行基于声明的授权有什么优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:45:08.160

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb897402.aspx)：

> AD FS 是一种基于标准的服务，它允许在受信任的业务合作伙伴（称为联合）**之间通过外联网**安全共享身份信息。

您不需要 ADFS 都在一个域中。除非你真的需要，否则不要过度复杂的设计。继续使用 Windows 集成安全性。

# python - 获取请求不返回预期数据python

> ID：11653796
> 
> 赞同：0
> 
> 时间：2012-07-25T15:56:14.283
> 
> 标签：python, http, get, request

我正在尝试包含用户在我的程序中输入的单词的同义词列表。我想将这个词发送到返回数据的[Big Huge Thesaurus API 。](http://words.bighugelabs.com/api.php)我正在使用`requests`模块发送术语，但 API 仅返回 HTTP 响应代码。我期待的是一个 json 对象，我可以从中提取同义词。有人可以帮我吗？

```
>>import requests
>>term = 'Big'
>>Thesaurus=requests.get("http://words.bighugelabs.com/api/2/mykey/%s/json" % term, auth=('',''))
>>print Thesaurus

<Response [200]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:03:59.640

很确定您必须使用`Thesaurus.content`,`Thesaurus.text`或`Thesaurus.json`. `requests.get()`返回一个`requests.Response`对象，当您打印它时，它只是在执行隐式字符串转换，对于这种类型的对象，它只返回格式化为您在此处打印的字符串中的响应代码。

# ruby-on-rails - 路由错误没有路由匹配 {:action=>"show"

> ID：11653803
> 
> 赞同：3
> 
> 时间：2012-07-25T15:56:34.190
> 
> 标签：ruby-on-rails, routing, routes, actioncontroller

我只有 2 周的时间学习 ruby​​ on rails，在我的应用程序中，用户可以注册他们的汽车，从他们的个人资料（下面的代码）发送到注册汽车页面的应用程序，

```
<div class="container">
        <fieldset>
            <h1><%= @user.email %></h1>
             <br> 
             <h2>now you are able to...</h2>
             <br>
             <ul>
                <li>
                    <strong>new car registration: </strong>
                    <%= link_to "new car", new_user_car_path(current_user)%>
                </li>
            </ul>
        </fieldset>
    </div> 
```

它以前有效，但我不知道我做了什么，现在它显示了这一点：

```
Routing Error

No route matches {:action=>"show", :user_id=>#<User id: 27, email: "armando.santoya@hotmail.com", encrypted_password: "$2a$10$EZtvPWiXgMfUlAqvuvGAzODMaas/y4rGkJPKJtg4PnC6...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 1, current_sign_in_at: "2012-07-24 19:07:54", last_sign_in_at: "2012-07-24 19:07:54", current_sign_in_ip: "127.0.0.1", last_sign_in_ip: "127.0.0.1", name: nil, created_at: "2012-07-24 19:07:54", updated_at: "2012-07-24 19:07:54">, :controller=>"cars"}

Try running rake routes for more information on available routes. 
```

我也把我的汽车控制器

```
class CarsController < ApplicationController
  def new
    @car = Car.new
  end

  def create
    @car = current_user.Car.new(params[:car])
    if @car.save
      flash[:notice] = "new car created success"
      #redirect_to current_user, :flash => { :success => "car created!" }
    else
      #redirect_to new_user_car_path, 
      flash[:notice] = "sorry try again"
    end
  end

  def index
    @car=Car.all
  end

  def show
   @car = current_user.car.find(params[:id])
   #@car = Car.find(params[:id])
   #redirect_to @user
  end
end 
```

和我的 routes.rb

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :users do
resources :cars
end 
```

我的耙子路线：

```
root        /                                       static_pages#home
             contact        /contact(.:format)                      static_pages#contact
               about        /about(.:format)                        static_pages#about
    new_user_session GET    /users/sign_in(.:format)                devise/sessions#new
        user_session POST   /users/sign_in(.:format)                 devise/sessions#create
destroy_user_session DELETE /users/sign_out(.:format)               devise/sessions#destroy
       user_password POST   /users/password(.:format)               devise/passwords#create
   new_user_password GET    /users/password/new(.:format)           devise/passwords#new
  edit_user_password GET    /users/password/edit(.:format)          devise/passwords#edit
                     PUT    /users/password(.:format)               devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                 devise/registrations#cancel
   user_registration POST   /users(.:format)                        devise/registrations#create
 new_user_registration GET    /users/sign_up(.:format)                devise/registrations#new
edit_user_registration GET    /users/edit(.:format)                   devise/registrations#edit
                     PUT    /users(.:format)                        devise/registrations#update
                     DELETE /users(.:format)                        devise/registrations#destroy
           user_cars GET    /users/:user_id/cars(.:format)          cars#index
                     POST   /users/:user_id/cars(.:format)          cars#create
        new_user_car GET    /users/:user_id/cars/new(.:format)      cars#new
       edit_user_car GET    /users/:user_id/cars/:id/edit(.:format) cars#edit
            user_car GET    /users/:user_id/cars/:id(.:format)      cars#show
                     PUT    /users/:user_id/cars/:id(.:format)      cars#update
                     DELETE /users/:user_id/cars/:id(.:format)      cars#destroy
               users GET    /users(.:format)                        users#index
                     POST   /users(.:format)                        users#create
            new_user GET    /users/new(.:format)                    users#new
           edit_user GET    /users/:id/edit(.:format)               users#edit
                user GET    /users/:id(.:format)                    users#show
                     PUT    /users/:id(.:format)                    users#update
                     DELETE /users/:id(.:format)                    users#destroy 
```

这是新车的 new.html.erb

```
<div class="container">
<h2>new car registration</h2>

<%= form_for(:users, :url => user_car_path(current_user)) do |f| %>
  <div><%= f.label :brand %><br />
    <%= f.text_field :brand %></div>

    <div><%= f.label :color %><br />
    <%= f.text_field :color %></div>

    <div><%= f.label :model %><br />
    <%= f.text_field :model %></div>

  <div><%= f.label :year %><br />
  <%= f.text_field :year %></div>

    <div><%= f.submit "new car",:class => "btn btn-primary" %></div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:30:29.553

```
<%= link_to "new car", new_user_car_path(current_user)%> 
```

考虑到你的路线应该没问题

```
 new_user_car GET    /users/:user_id/cars/new(.:format)      cars#new 
```

但是错误表明缺少汽车#show（不是新的！），所以也许可以寻找。

什么时候准确抛出错误？

补充：既然您已经发布了表格，

我认为产生错误的行是

```
<%= form_for(:users, :url => user_car_path(current_user)) do |f| %> 
```

因为 user_car_path 需要用户和汽车 - 所以你需要

```
user_car_path(current_user,@car) 
```

我在我的表单中使用了这个：

```
<%= form_for ([@user,@car]) do |f| %> 
```

但最重要的是，每次引用汽车时，还需要包含用户引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:10:05.960

我不知道它是否产生了问题，但你为什么要在`current_user`这里传递：

```
<%= link_to "new car", new_user_car_path(current_user)%> 
```

在您的创建操作中，您已经获得了当前用户：

```
@car = current_user.Car.new(params[:car]) 
```

同样在你的表演动作中，你有`car`和没有`Car`

```
def show
  @car = current_user.car.find(params[:id]) 
```

**编辑**- 根据您的路线，我可以看到您有一个嵌套资源：

你的汽车控制器应该是：

```
class CarsController < ApplicationController
def new
  @user = User.find(params[:user_id])
  @car = @user.cars.build
end

def create
  @user = User.find(params[:user_id])
  @car = @user.cars.build(params[:car])
  if @car.save
    flash[:notice] = "new car created success"
    #redirect_to current_user, :flash => { :success => "car created!" }
  else
    #redirect_to new_user_car_path, 
    flash[:notice] = "sorry try again"
  end
end

def index
  @car=Car.all
end
... 
```

创建新车的链接是`new_user_car_path`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-01T19:25:01.713

对于它的价值，我遇到了一个与 OP 描述的问题非常相似的问题：我的控制器的“索引”操作有效，但“新”操作引发了相同的异常（“显示”路由丢失，情况并非如此）。事实证明，Rails 对我的模型名称的复数形式（以“y”结尾）存在一些问题。

我最终选择了另一个具有更简单复数的模型名称，而不是与惯例作斗争，一切都很好。

# javascript - webview中视频的边距

> ID：11653805
> 
> 赞同：0
> 
> 时间：2012-07-25T15:56:42.723
> 
> 标签：javascript, android, video, webview, android-webview

我正在尝试在 webview 中嵌入一个 youtube 视频，并且视频右侧似乎有一小块边距不会消失。

我看到了许多其他类似的问题，并尝试修复 javascript，但仍有余量。

这是我的代码：

```
 video = (WebView) v.findViewById(R.id.videoview);

    // video.getSettings().setLoadWithOverviewMode(true);
    // video.getSettings().setUseWideViewPort(true);

    String widthAndHeight = "width='null' height='null'";
    String videoURL = "http://www.youtube.com/v/DZi6DEJsOJ0";

    video.setHorizontalScrollBarEnabled(false);
    video.setVerticalScrollBarEnabled(false);

    video.getSettings().setJavaScriptEnabled(true);
    video.getSettings().setPluginsEnabled(true);

    String temp = "<object "
            + widthAndHeight
            + ">"
            + "<body style='margin:0;padding:0;rightmargin:0'>" 
            + "<param name='allowFullScreen' value='true'>"
            + "</param><param name='allowscriptaccess' value='always'>"
            + "</param><embed src='"
            + videoURL
            + "'"
            + " type='application/x-shockwave-flash' style='margin:0;padding:0;' allowscriptaccess='always' allowfullscreen='true'"
            + widthAndHeight + "></embed></object>";

    video.loadData(temp, "text/html", "utf-8"); 
```

我尝试在 javascript 中给出 style:body=0'margin=0 标签。我在手机上调试时不知道如何上传屏幕截图，但它是一个视频，视频右侧的边距约为 6 像素，而视频的左侧和顶部与屏幕对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:16:50.967

嗯，默认情况下 HTML 是左对齐的，所以，如果你在右手边有一个边距，这意味着 margin:0 有效。但是，将右侧边距设置为 0 将无济于事，因为这并不意味着对象会被填充。

试着说

```
 + " type='application/x-shockwave-flash' style='margin:0;width:100%;padding:0;' allowscriptaccess='always' allowfullscreen='true'" 
```

如果将嵌入的宽度设置为 100% 不起作用，也许尝试将宽度设置为设备屏幕的宽度，并且不要忘记更新方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:59:00.287

因此，经过大量研究并试图弄清楚它是如何工作的，我为将来可能需要它的人提供了这个工作代码：

```
 Display display = getActivity().getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int widthdp = (int) (width / getResources().getDisplayMetrics().density);
    int height = display.getHeight();
    int heightdp = (int) (height / getResources().getDisplayMetrics().density);

    String widthAndHeight = "width=" + widthdp + "height=" + heightdp;

    String temp = "<object "
            + widthAndHeight
            + ">"
            + "<body style='margin:0;padding:0;'>"
            + "<param name='allowFullScreen' value='true'>"
            + "</param><param name='allowscriptaccess' value='always'>"
            + "</param><embed src='"
            + videoPoP
            + "'"
            + " type='application/x-shockwave-flash' style='margin:0;padding:0;' allowscriptaccess='always' allowfullscreen='true'"
            + widthAndHeight + "></embed></object>";

    video.loadData(temp, "text/html", "utf-8"); 
```

问题是获取屏幕的宽度和高度会搞砸密度像素和正常的像素化问题。

# sql - 使用同一记录中的值进行 SQL 更新

> ID：11653806
> 
> 赞同：7
> 
> 时间：2012-07-25T15:56:43.897
> 
> 标签：sql, sql-server

在下面的语句中，`f1`总是会得到`f2`以前拥有的值吗？或者`f2`有时会先更新并`f1`结束`NULL`？我的印象是新值在语句中不可用，`f2`在处理记录时具有旧值，但我找不到一个权威的地方来说明这一点。

```
UPDATE x
SET
    x.f1 = x.f2,
    x.f2 = NULL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:05:19.863

从概念上讲，操作[“同时”](http://www.ndc2010.no/index.aspx?id=268800)发生，因此它将使用“之前”值

确实

```
UPDATE x
SET
 x.f1 = x.f2,
 x.f2 = x.f1 
```

也可以很好地交换两列值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T15:58:59.820

`f1`总是会`f2`在`UPDATE`.

从技术上讲，记录被删除，然后重新插入。所以 SQL 会计算出新记录应该是什么，然后删除当前记录，然后插入新记录。

这篇关于 SQL 触发器的文章可能有助于解释：

> 删除的表在 DELETE 和 UPDATE 语句期间存储受影响行的副本。在执行 DELETE 或 UPDATE 语句期间，行会从触发器表中删除并转移到已删除的表中。删除的表和触发器表通常没有共同的行。
> 
> 插入的表在 INSERT 和 UPDATE 语句期间存储受影响行的副本。在插入或更新事务期间，新行会同时添加到插入表和触发器表中。插入表中的行是触发器表中新行的副本。

[http://msdn.microsoft.com/en-us/library/ms191300.aspx](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

# objective-c - “this”是保留关键字吗？

> ID：11653807
> 
> 赞同：0
> 
> 时间：2012-07-25T15:56:45.203
> 
> 标签：objective-c

我已将此代码添加到我的项目中：

```
@property (strong, nonatomic)  id  this; 
```

并且 Xcode 已将“this”着色为与保留字相同的颜色，但在谷歌搜索时，我无法在关键字列表下的任何位置看到它。

（对象将在完成后自行删除，因此为此目的使用此属性）

# c++ - C ++：如何计算逗号分隔值中的列的总和？

> ID：11653809
> 
> 赞同：0
> 
> 时间：2012-07-25T15:56:53.523
> 
> 标签：c++, json, parsing, csv, sum

我正在处理一个稍微具体的问题。我有一个程序，它以 JSON 格式从网上抓取表格并将它们转换为 CSV。这些表格的大小是动态的，并且包括带有文本的标题行。一张表可能如下所示：

```
DataCode,AreaName,AreaID,Population
G1000,Billford,15,21000
G1001,Millville,18,21000 
```

假设我不知道数组会有多大，我希望能够仅获取人口统计数据的总和。（我将拥有我希望将数据存储在变量中的列的标题，在本例中为“人口”，但它也会动态变化。）

在合并多个表时，我还遇到了重复条目难以删除的问题。例如，组合表可能如下所示：

```
DataCode,AreaName,AreaID,Population
G1000,Billford,15,21000
G1001,Millville,18,21000
DataCode,AreaName,AreaID,Population
G1003,Brinton,21,26000
G1004,Nixon,24,12000 
```

我很困惑如何创建一个函数，该函数可以采用 CSV 或 JSON 格式的任何大小的表，并且只取给定列中数字的总和。

# asp.net - 如何从 VB.NET 中的字符串中检索属性作为子字符串

> ID：11653812
> 
> 赞同：1
> 
> 时间：2012-07-25T15:57:01.060
> 
> 标签：asp.net, vb.net

我`<input id="text1" value="Stop1" type="text">`在 VB.NET 中将值保存为字符串变量。我需要获取值“Stop1”并将其保存在字符串变量中。我应该应用什么逻辑/函数从字符串中提取“Stop1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:25:14.643

这将提取与关联的全部数据`value`：

它假定您有一个名为的字符串`s`，其中包含您的数据。

```
'define the string id to find   
Dim idToFind As String = "value="
'find it in the string
Dim valuePos As Integer = s.IndexOf(idToFind)
'extract the part we want
Dim valueString = s.Substring(valuePos + idToFind.Length, s.IndexOf(Chr(34), valuePos) - valuePos + 1)
Dim valueStringNoQuotes = s.Substring(valuePos + idToFind.Length + 1, s.IndexOf(Chr(34), valuePos) - valuePos - 1)
Debug.WriteLine(valueString) 'Output: "Stop1"
Debug.WriteLine(valueStringNoQuotes) 'Output Stop1 
```

如果您打算使用它，尽管您应该考虑添加一些错误检查以确保字符串实际上包含您期望的数据，检查大写/小写等

# windows - 将 set 用于数值（批量）

> ID：11653814
> 
> 赞同：0
> 
> 时间：2012-07-25T15:57:10.863
> 
> 标签：windows, batch-file, windows-xp

我正在尝试编写一个批处理程序，该程序将监视 cpu 使用情况并在 cpu 使用率高时停止病毒扫描。然后，当 CPU 使用率下降时，它将重新开始扫描。

```
ECHO Checks if the total CPU usage is greater than 10%

SET scanEnd=0

tasklist /FI "IMAGENAME eq scan32.exe" 2>NUL | find /I /N "scan32.exe">NUL
IF "%ERRORLEVEL%"=="0" (
ECHO Program is running

wmic cpu get loadpercentage /value
FOR /f "tokens=2-3 delims==" %%b in ('wmic cpu get loadpercentage /value') do (
echo %%b >> tempfile.txt
echo removed %%a)

SET /a load < tempfile.txt
DEL tempfile.txt
ECHO Load is "%load%"

IF load GEQ 10 (
ECHO High cpu usage
TSKILL scan32
SET scanEnd=1
))
PAUSE

IF "1" == "%scanEnd%" (
ECHO Scan not finished
IF load LSS 10 (
ECHO Restarting scan
"C:\Program Files\McAfee\VirusScan Enterprise\scan32.exe"
SET scanEnd=0))
ECHO End of program
PAUSE 
```

wmic 以 LoadPercentage=0（或其他数字）的形式返回 CPU 使用率。我用 for 循环过滤它并分配要加载的数字。由于我不明白的原因，作业有问题。我无法回显该值（显示“”），并且无论我如何定义高 CPU 使用率，负载都会通过 IF GEQ 语句。即使是 0% 的负载显然也大于 10。我知道问题出在 set 上，因为我检查了 tempfile.txt 并且它被正确过滤，但我仍然不知道为什么它是错误的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:33:12.067

you assumed that `SET` command can read from stdin which is not the case.

You might simply assign the `FOR` variable into a new variable.

Try this

```
for /f "tokens=2-3 delims==" %%a in ('wmic cpu get loadpercentage /value') do (
  set /a load=%%a
) 
```

and then

```
if %load% geq 10 (
  echo load greater than 10%
) 
```

* * *

but beware of the assignments inside `FOR` loops. You may need to *enable delayed expansion* for them to work correctly, in case there are more than one assignment in the loop. Eventhough this is not your case, you'd just need to adjust

```
setlocal enabledelayedexpansion 
```

and then refer to it using this optional syntax

```
if !load! geq 10 ( 
```

# jquery - jquery next() 元素

> ID：11653816
> 
> 赞同：0
> 
> 时间：2012-07-25T15:57:15.383
> 
> 标签：jquery, list, toggle, parent, next

我一直在浏览档案，但找不到有效的解决方案，我有一个菜单；

```
<ol>
    <li>
        <span><a class="doToggle"></a></span>
        <span class="toggleMe">stuff to hide and show</span>
    </li>
</ol> 
```

当单击第一个跨度中的锚点时，我尝试切换第二个跨度，我已经尝试过；

```
$(this).parent().next().toggle(); 
```

我认为这应该有效，但我没有得到任何回应。任何提示我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:00:54.013

:D

[http://jsfiddle.net/27xCe/](http://jsfiddle.net/27xCe/)

HTML：

```
<ol>
    <li>
        <span><a class="doToggle" href='#'>Click Me to Toggle</a></span>
        <span class="toggleMe">stuff to hide and show</span>
    </li>
</ol>​ 
```

jQuery：

```
$(function() {
    $('.doToggle').click(function(e) {
        $('.toggleMe').toggle();
        e.stopPropagation();
    });
}); 
```

或与`next()`：

```
$(function() {
    $('.doToggle').click(function(e) {
        $(this).parent().next().toggle();
        e.stopPropagation();
    });
}); 
```

[http://jsfiddle.net/27xCe/1/](http://jsfiddle.net/27xCe/1/)

你应该做一些教程。[http://docs.jquery.com/Tutorials](http://docs.jquery.com/Tutorials)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:01:06.240

您在 yr 选择器中的错误类应该是**toggleMe**而不是**doToggle**

[http://jsfiddle.net/pK2FV/](http://jsfiddle.net/pK2FV/)

或者只是删除类选择器并[执行下一步](http://jsfiddle.net/jDR2k/)

# android - 如何从 DatePickerDialog 获取日、月和年？

> ID：11653818
> 
> 赞同：1
> 
> 时间：2012-07-25T15:57:19.520
> 
> 标签：android, datepickerdialog

我想获取保存到数据库的日、月和年值。这些是我的代码：

声明：

```
private TextView tv_purchase_date;
private Button mPickDate;
private int mYear;
private int mMonth;
private int mDay;
OnClickListener listener_show_dlg = null;
OnDateSetListener listener_mdate_display = null; 
```

事件代码：

```
listener_show_dlg = new OnClickListener() {                 
        public void onClick(View v) {
            Calendar cal=Calendar.getInstance();

            DatePickerDialog datePickDlg = new DatePickerDialog(
                    ItemsAddActivity.this,
                    listener_mdate_display,
                    cal.get(Calendar.YEAR),
                    cal.get(Calendar.MONTH),
                    cal.get(Calendar.DAY_OF_MONTH)
            );
            datePickDlg.show(); 
        };
    };

listener_mdate_display = new OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            mMonth = month;
                            mYear = year;
                            mDay = dayofMonth;

            tv_purchase_date.setText(dayOfMonth + "/" + monthOfYear + "/" + year);  

        }
    };
} 
```

我尝试将 mMonth、mYear 和 mDay 值存储在 db 中。最好的商店类型是什么？作为整数还是作为字符串？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:54:10.920

我用这个 sql 字符串创建了 sqllite 表：

```
create table items (id INTEGER PRIMARY KEY AUTOINCREMENT, pdate DATE) 
```

我写了一些方法来转换日期：

```
public String date_to_str(Date date) {      
    String pattern = "dd.MM.yyyy";
    SimpleDateFormat dateFormat = new SimpleDateFormat(pattern);
    Log.d(_watcher_name, "date_to_str" + dateFormat.format(date));
    return dateFormat.format(date);     
}

public Date mdy_to_date (int day, int month, int year) {
    Calendar cal = new GregorianCalendar(year, month, day);
    return cal.getTime();       
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:01:04.920

我在这个问题上挣扎了一段时间。我不知道有什么比这更好的了。

我将日期作为单个 long int 存储在数据库中。将您的 Date 转换为自纪元（1970 年 1 月 1 日）以来的秒数非常容易，也很容易将秒数转换为 Date 对象。

您需要注意秒和毫秒。

日期 = 新日期（秒 * 1000）；// 将秒转换为日期

秒 = date.getTime() / 1000; // 这是自纪元开始以来的日期（以秒为单位）

// 使用 Greg 日历从日、月、年获取 Date 对象

日期 dateOfGames = new GregorianCalendar(year, month, day).getTime();

这些帮助有用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T17:45:18.543

我在数据库中存储一个代表日期的数字。它是自现代时代开始（1970 年 1 月 1 日）以来经过的秒数。从日期选择器中，您可以像这样获得 MDY 值：

```
 datePickerListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int yearOfYear,
                int monthOfYear, int dayOfMonth) {
            // the user has picked these values
            year = yearOfYear;
            month = monthOfYear;
            day = dayOfMonth; 
```

然后，我将它们变成像这样的单个 Date 对象。

```
 Calendar cal = new GregorianCalendar(year, month, day);
            Date dateOfGames = cal.getTime();
            DateFormat df = DateFormat.getDateInstance(DateFormat.LONG);
            String cs = df.format(dateOfGames);
            changeDateButton.setText(cs); // update the interface

        }
    }; 
```

在我把它放入数据库之前，我把它变成了这样的秒数：

长秒 = date.getTime() / 1000; // 这是自纪元开始以来的日期（以秒为单位）

……

当我从数据库中取出那几秒钟，并希望它再次成为 Date 对象时，我这样做：

日期 = 新日期（秒 * 1000）；// 将秒转换为 Date 对象

您可以使用 DateFormat 对象以您喜欢的方式显示日期对象。

我知道这很尴尬。由于 SQLite 不允许您存储日期，因此答案会很尴尬。也许有比这更干净的方法，其他人会推荐一些东西。:)

# c# - 我想在 C# 中调整表单大小，效果类似于淡入淡出？

> ID：11653819
> 
> 赞同：0
> 
> 时间：2012-07-25T15:57:30.920
> 
> 标签：c#, winforms, resize, effect

我创建了一个表单，我想用淡入淡出效果之类的动画或其他任何东西来调整它的大小？例如，我使用此代码调整表单大小并显示效果？

```
this.Size = new System.Drawing.Size(300, 300); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:03:45.430

WinForms 在构建时并未考虑到动画。

在 WPF 之前，我花了很多时间尝试平滑地为 WinForms 应用程序制作动画。这非常困难，而且结果几乎总是比您希望的要少。

以下教程展示了如何创建具有透明度的启动画面。您可以将该逻辑应用于您的表单：

[http://www.vcskicks.com/splash-screen.php](http://www.vcskicks.com/splash-screen.php)

如果可能，请考虑在需要此类效果的 WinForms 应用程序中嵌入 WPF 控件。

[http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms](http://www.switchonthecode.com/tutorials/wpf-tutorial-using-wpf-in-winforms)

# google-app-engine - sbt-appengine：BindException：地址已在使用中

> ID：11653821
> 
> 赞同：0
> 
> 时间：2012-07-25T15:57:31.127
> 
> 标签：google-app-engine, sbt

运行时我从 sbt 收到此错误

> 应用引擎开发服务器

我如何告诉 sbt-appengine 告诉 Jetty 监听不同的端口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:05:31.243

```
appengine-dev-server --port=8081 
```

# visual-studio-2010 - 如何在 VS2010 中将 .scss 文件与 CSS 智能感知相关联

> ID：11653825
> 
> 赞同：3
> 
> 时间：2012-07-25T15:57:58.183
> 
> 标签：visual-studio-2010

我希望能够在 .scss 文件中使用 IntelliSense 以提高速度，但我看不到关联文件类型的方法。

我曾尝试使用 Mindscape Web Workbench，但发现该功能无法满足我的需求。

经过一番研究，我发现您可以在工具>选项>文本编辑器>文件扩展名中建立文件扩展名关联，但编辑器 DDL 中的选项似乎都不适用于 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T20:07:39.117

在 Visual Studio 2012 中，您可以执行以下操作：

转到工具 > 选项 > 文本编辑器 > 文件扩展名

在扩展框中输入 scss。

从编辑器框中选择 CSS 源代码编辑器。

对于 Visual Studio 2010，CSS 源代码编辑器似乎不是一个选项。这个扩展似乎可以满足您的要求：[ScssInCss](http://andrewblogs.com/css-syntax-highlighting-for-scss/)。

# javascript - 使用 jQuery 删除表行但防止删除第一行

> ID：11653828
> 
> 赞同：1
> 
> 时间：2012-07-25T15:58:08.780
> 
> 标签：javascript, jquery, dom

我正在使用 jQuery 删除表格行 - 我的脚本工作正常，但我不希望按钮能够删除第一个表格行。谁能建议这是如何完成的？

```
 $("#remove").click(function(event) {
    event.preventDefault();        
    $("table tr:last").remove();
    i++;
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T16:00:42.417

尝试以下操作：

```
if ($("table tr").length != 1) {
     $("table tr:last").remove();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:03:00.200

怎么样

```
$("tr:last:not(:first)").remove(); 
```

您不需要`table`选择器，因为所有行都在表内，但指定要从中删除的表元素可能很有用（如果以后要添加其他表，可以避免副作用）。

示例：删除`$table`除第一行之外的所有行：

```
$("tr:not(:first)", $table).remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T16:11:24.813

您可以使用`gt()`和`not()`：

```
$('table').find('tr:gt(0):last').remove(); 
```

这将查找索引大于 0 的所有行，`gt(0)`并选择最后一行，`:last`然后删除该元素。

演示：http: [//jsfiddle.net/XhtC8/](http://jsfiddle.net/XhtC8/)

如果您想删除除第一行之外的所有行，则可以删除`:last`：

```
$('table').find('tr:gt(0)').remove(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:00:12.843

尝试：

```
$("#remove").click(function(event) {
    event.preventDefault();        
    $("table tr:not(':first')").remove();
    i++;
}); 
```

演示在这里：http: [//jsfiddle.net/aGukb/](http://jsfiddle.net/aGukb/)

# iphone - iOS使用冒泡排序但最后一行未排序

> ID：11653830
> 
> 赞同：1
> 
> 时间：2012-07-25T15:58:10.683
> 
> 标签：iphone, ios, sorting, ios4, loops

我已经用冒泡排序完成了日期排序。但是，在测试进行到一半时，我注意到它没有对最后一行进行排序。任何人都可以帮忙吗？:( 这对我来说非常重要，因为它是我需要为排序代码做的基础：

```
NSInteger count = [sortingArray count];
        for(int a = 0 ; a < count; a++) {
            for(int b = a+1 ; b < count; b++) {
            NSDictionary *dic = [items objectAtIndex:a];
            NSDictionary *dic2 = [items objectAtIndex:b];
            NSString *dateString = [dic valueForKey:@"date"];
            NSString *dateString2 = [dic2 valueForKey:@"date"];
            //NSLog(@"DATE: %@", dateString);   //date is the string representation.

            NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
            [dateFormatter setDateFormat:@"dd/MM/yyyy"];
            NSDate *endDate = [dateFormatter dateFromString:dateString];
            NSDate *endDate2 = [dateFormatter dateFromString:dateString2];

            NSDate *currDate = [NSDate date];
            NSString *startDateString = [dateFormatter stringFromDate:currDate];
            NSDate *startDate = [dateFormatter dateFromString:startDateString];
            [dateFormatter release];

            NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
            NSDateComponents *comp = [gregorianCalendar components: NSDayCalendarUnit 
                                                          fromDate:startDate 
                                                            toDate:endDate
                                                           options:0];

            NSDateComponents *comp2 = [gregorianCalendar components: NSDayCalendarUnit 
                                                           fromDate:startDate
                                                             toDate:endDate2
                                                            options:0];
            [gregorianCalendar release];

            NSInteger compareDay = [comp day];    
            NSInteger compareDay2 = [comp2 day];  
            NSString *dayString = [NSString stringWithFormat:@"%d", compareDay];
                NSString *dayString2 = [NSString stringWithFormat:@"%d", compareDay2];
            NSLog(@"string 1%@", dayString); 
                NSLog(@"string 2 ----%@", dayString2); 

            if (compareDay > compareDay2){
                [sortingArray exchangeObjectAtIndex:a withObjectAtIndex:b];
            } 
        }    //b loop
    }   //a loop
        NSInteger counterIndex = [sortingArray count];
        for(int c = 0; c < counterIndex ; c++) {
            [temp addObject:[sortingArray objectAtIndex:c]];
        } 
```

[现在看起来如何](https://995752eb-a-62cb3a1a-s-sites.googlegroups.com/site/1004606hmp/photo.jpeg?attachauth=ANoY7crIQ0EBA0sI3EiZmO-2qizMwsm8PGPJ9zEhcb094lJAn0-zSgRzXDNJfNE06wSo-bN-qw11_rd-xZbv7tKzXnRT_tmCjg2-o1gqEJKYO3e5n2R0wGIfYhFNF7JCP5TvIunYNzu5NEkexgOnVrL5L8TmO1ECzbt23zKTelJmKRlzARLgBz9I1_pI2_niHKIzj8GySbNrFabD4_pt0I5L-wM-Rs6VXg==&attredirects=0)请帮助很多很多很多谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:18:45.850

使用您的初始 for 循环，如下所示：

```
 for(int a = 0 ; a < count-1; a++) { // Allow uptil second last position in array
        for(int b = a+1 ; b < count; b++) {  // Allow uptil last position in array 
```

我想这就是错过的。试试这个。希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T14:42:44.887

最后我还是使用了 NSSortDescriptor 进行排序。最初我使用它，但在显示器上什么都没有出现，因此我创建了自己的大量代码来进行日期排序。无论如何我使用的方法：

```
NSLog(@"Before sorting: %@", temp);  // What I have is a NSMutableArray called temp
    NSSortDescriptor *dateSortDescriptor = [NSSortDescriptor sortDescriptorWithKey: @"date" ascending: YES];

    NSArray *sortedArray = [temp sortedArrayUsingDescriptors:[NSArray arrayWithObject: dateSortDescriptor]];
    NSLog(@"After Sorting: %@", sortedArray);        
    NSMutableArray *afterSorting = [[(NSArray*)sortedArray mutableCopy]autorelease]; 
```

我所做的只是将 NSArray 转换回 NSMutableArray，然后再将其插入我的表中 :) 希望这可能对其他人有所帮助，并感谢帮助我的人^^

# php - 来自本地服务器的缓慢 getimagesize

> ID：11653831
> 
> 赞同：0
> 
> 时间：2012-07-25T15:58:19.477
> 
> 标签：php, curl, getimagesize

我正在尝试从几个外部站点获取图像，因为我正在尝试为我的项目开发链接共享网站。我将带有 curl 的文件下载到本地服务器，但 getimagesize 仍然很慢（30 秒）。我是 php 的新手，任何帮助将不胜感激。这是代码：

```
function check_url($value)
{
$value = trim($value);
if (get_magic_quotes_gpc()) 
{
    $value = stripslashes($value);
}
$value = strtr($value, array_flip(get_html_translation_table(HTML_ENTITIES)));
$value = strip_tags($value);
$value = htmlspecialchars($value);
return $value;
}   

$curl = curl_init();

$temp_file = tempnam(sys_get_temp_dir(), 'link');
$fp = fopen($temp_file, "w");
curl_setopt ($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_FILE, $fp);

curl_exec ($curl);
curl_close($curl);

///
$html = file_get_contents($temp_file);
fclose ($fp);
unlink($temp_file);

if($html) {
//parsing begins here:
$doc = new DOMDocument();
@$doc->loadHTML($html);
$nodes = $doc->getElementsByTagName('title');

 //get and display what you need:
 $title = $nodes->item(0)->nodeValue;
 $metas = $doc->getElementsByTagName('meta');

 for ($i = 0; $i < $metas->length; $i++)
 {
 $meta = $metas->item($i);
 if($meta->getAttribute('name') == 'description')
 $description = $meta->getAttribute('content');
 }

 // fetch images
 $image_regex = '/<img[^>]*'.'src=[\"|\'](.*)[\"|\']/Ui';
 preg_match_all($image_regex, $html, $img, PREG_PATTERN_ORDER);
 $images_array = $img[1];

 ?>
 <div class="images">
<?php
 $k=1;
 for ($i=0;$i<=sizeof($images_array);$i++)
{
if(@$images_array[$i])
{
    if(@getimagesize(@$images_array[$i]))
    {
        list($width, $height, $type, $attr) =   getimagesize(@$images_array[$i]);
        if($width >= 80 && $height >= 80 ){

        echo "<img src='".@$images_array[$i]."' width='100' id='".$k."' >";

        $k++;
        }
    }
}
}

?>

<input type="hidden" name="total_images" id="total_images" value="<?php echo --$k?>" />
</div>
<div class="info">

    <label class="title">
        <?php  echo @$title; ?>
    </label>
    <br clear="all" />
    <label class="url">
        <?php  echo substr($url ,0,35); ?>
    </label>
    <br clear="all" /><br clear="all" />
    <label class="desc">
        <?php  echo @$description; ?>
    </label>
    <br clear="all" /><br clear="all" />

    <label style="float:left"><img src="prev.png" id="prev" alt="" /><img src="next.png" id="next" alt="" /></label>

    <label class="totalimg">
        Total <?php echo $k?> images
    </label>
    <br clear="all" />

</div>
<?php
} else {
echo "Please enter a valid url";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:01:32.340

这并不奇怪。您正在循环浏览所有这些图像。下载这些图像然后获取它们的大小可能需要大量时间。

充其量，您可以异步加载这些图像并缓存结果。

# python - python celery + amazon EC2 由于散列而失败

> ID：11653832
> 
> 赞同：2
> 
> 时间：2012-07-25T15:58:21.807
> 
> 标签：python, amazon-ec2, celery, pickle

我正在尝试在 Python 中使用 Amazon EC2。当我尝试从 celery 运行第一个示例时，它在本地使用 RabbitMQ 时工作正常，每当我依赖 EC2 时，我都会收到此消息：[2012-07-25 15:14:33,842: INFO/MainProcess ] 从经纪人那里得到任务：celery_test.add[2eed1b15-fda7-4036-be92-a7fd921f0f5d] [2012-07-25 15:14:33,881: WARNING/MainProcess] Task Handler ERROR: PicklingError("Can't pickle : attribute lookup _hashlib.HASH 失败”,)

我不太清楚它在哪个点/对象没有腌制。

代码来自他们的示例：

```
@celery.task
def add(x, y):
   return x + y 
```

我这样称呼它： add.delay(4, 4)

任何提示我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:33:24.527

你在使用定制的 Python 吗？`hashlib`由于缺少标头，模块可能没有正确构建`openssl-dev`。您可以检查它我`import hashlib`在您服务器上的 Python CLI 中手动运行的情况。

# gwt - 正确接收点击事件

> ID：11653835
> 
> 赞同：3
> 
> 时间：2012-07-25T15:58:38.260
> 
> 标签：gwt, dom

我正在尝试在 GWT 中创建一个可扩展和可选择的行元素。该行包含一个展开图标，我可以单击它来展开该行。我也可以点击每一行来选择它。

我的问题是，如果我单击展开图标，我总是也会触发行选择事件，我不希望这样。我怎样才能接收点击事件，以便如果我点击展开图标，只会发生展开，但不会发生选择？

绿行被选中：

![选择了一行](../Images/445ae1b2b6784a93082ee0d93c2283f5.png)

当我展开一行时，我还通过单击和我的选择移动（坏）触发选择：

![在此处输入图像描述](../Images/9133a3b53a4ee7a2476d3363d1ab7186.png)

这就是我想要的：我用加号图标展开，而不改变选择（耶！）：

![在此处输入图像描述](../Images/1ca9d2b963bce25fcbcf40f62c630ced.png)

我尝试使用`expandIcon.sinkEvent(Event.ONCLICK);`，但没有帮助。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:53:32.853

为了防止点击事件冒泡到父小部件，您需要[`stopPropagation()`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/dom/client/NativeEvent.html#stopPropagation%28%29)在`expandIcon`级别处理它时。

# c# - 获取 dll 的最后更新日期

> ID：11653837
> 
> 赞同：0
> 
> 时间：2012-07-25T15:58:47.417
> 
> 标签：c#, .net, date, dll

有没有办法获得我的解决方案的所有 dll 和我的 IIS 网站的所有 dll 的最后更新日期？

如果 iis dll 的最后更新日期晚于解决方案中的 dll，请确保我不会白白部署它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:14:22.870

```
FileInfo fi = new FileInfo(@"foo.dll");
DateTime result = fi.CreationTime; 
```

但是，您最好检索程序集的[版本信息](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.version.aspx)。

# php - XML 添加属性

> ID：11653838
> 
> 赞同：0
> 
> 时间：2012-07-25T15:58:52.763
> 
> 标签：php, xml

我想在一个看起来像这样的元素上添加两个属性：

```
$tutTag->appendChild(
    $xmlDoc->createElement("Port", $serv->STMPPort)
)->setAttribute("type","int")->appendChild->setAttribute("y","l"); 
```

在这种情况下，“type”和“int”被添加就好了，但是第二组“y”和“l”没有被添加。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:14:48.673

也许您应该先将其添加到变量中。

```
$childTag = $xmlDoc->createElement("Port", $serv->STMPPort);
$childTag->setAttribute("type","int");
$childTag->setAttribute("y","1");

$tutTag->appendChild($childTag); 
```

# mysql - mysql将计算结果添加到表列

> ID：11653843
> 
> 赞同：1
> 
> 时间：2012-07-25T15:59:02.130
> 
> 标签：mysql

我有一个 mysql 表，其中包含工资列。我能够使用以下方法计算列 18% 和 9% 的值：

SELECT SALARY, SALARY * .09 as 'PS', SALARY * .12 as 'GS' FROM database.table;

1.  如何根据 sql 语句的结果在该表上添加额外的列？我的意思是我想在我的表中添加列“PS”和“GS”。

2.  如果这在同一个表上是可能的，我将如何通过 sql 脚本/语句根据 sql 语句的结果（包含 PS 和 GS 的新表）创建另一个表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:09:11.093

1) 为了向表中添加额外的列，您必须使用 alter 命令。

```
ALTER TABLE database.table ADD PS varchar(10); ---- or whatever type of column
ALTER TABLE database.table ADD GS varchar(10); ---- or whatever type of column
UPDATE database.table SET PS = SALARY * .09, GS = SALARY * .12; 
```

2) 您必须先创建表，然后将之前的查询插入其中。

```
CREATE TABLE database.secondtable (PS varchar(10), GS varchar(10));
INSERT INTO database.secondtable (PS,GS) VALUES(SELECT SALARY, SALARY * .09 as 'PS', SALARY * .12 as 'GS' FROM database.table); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:02:28.567

如果您希望 GS 在同一个表中，您需要将您声明的 SQL 查询值带到一个变量中，并使用另一个 GS 查询更新表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:05:54.443

对于问题 1，您可以简单地将两个新字段添加到表中（我不会在这里讨论，因为有大量关于如何添加字段的文档）。然后运行以下查询

更新表 SET PS = SALARY * .09，GS = SALARY * .12；

对于第二个问题，您可以根据任何查询的结果创建一个表，如下所示：

CREATE TABLE table_name SELECT * FROM orig_table;

请注意，您可以在此处使用任何类型的 SELECT 语句。

这些东西真的是非常基本的 SQL。这很容易在 MySQL 文档中找到。

# http - 通过内置浏览器的 BlackBerry POST 请求

> ID：11653845
> 
> 赞同：0
> 
> 时间：2012-07-25T15:59:05.607
> 
> 标签：http, blackberry, browser

在我的 BlackBerry 应用程序中，我需要使用内置浏览器发出一些 HTTP 请求。

感谢[这个老问题](https://stackoverflow.com/q/614526/1485859)，我设法提出了一些 GET 请求。

现在，我的问题是：发出 POST 请求怎么样？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:10:01.730

探索课堂[`BrowserField`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html)。

您可以使用以下方法：

*   `void` [`requestContent`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html#requestContent%28java.lang.String,%20byte%5b%5d,%20java.util.Hashtable%29) `(String url, byte[] postData, Hashtable requestHeaders)`
*   `void` [`requestContent`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserField.html#requestContent%28net.rim.device.api.browser.field2.BrowserFieldRequest%29) `(`[`BrowserFieldRequest`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/browser/field2/BrowserFieldRequest.html) `request)`

# c# - 如何让 UI 的线程休眠以赋予它一些任务

> ID：11653847
> 
> 赞同：0
> 
> 时间：2012-07-25T15:59:07.653
> 
> 标签：c#, multithreading

我正在尝试在应用程序启动时启动一个线程并等待 UI 在不使用 BackgroundWorker 的情况下为其提供一些工作。这个线程在没有工作时休眠，当用户界面要求它做某事时唤醒。

更多细节：

简单的 WPF 应用程序：我有一个 StorageClass 可以将文件复制到长期存储。此类是 WPF 应用程序的一部分。当用户单击按钮将文件存储到长期存储（低速阵列）时，我想要一个线程将此文件从高速存储阵列复制到长期存储。这些是大文件，我不希望 UI 被阻止。我想使用一个等待指令传输的线程。希望这可以更清楚地说明我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:09:28.573

如果您使用的是 .NET 4.0 或更高版本，我建议直接使用 TPL 而不是线程，并且我建议使用 a`BlockingCollection<T>`作为 UI 可以通过集合“提供一些工作”供消费者执行的方式。

然后，消费者可以是一个长期运行的`Task`（同样来自 TPL），`BlockingCollection<T>`从`BlockingCollection<T>`.时间，然后在项目准备好使用时恢复。

因此，您可以将取消令牌源、阻塞集合和任务定义为：

```
 private BlockingCollection<Transaction> _bin = new BlockingCollection<Transaction>();
    private CancellationTokenSource _tokenSource = new CancellationTokenSource();
    private Task _consumer; 
```

您的消费者方法可以定义为：

```
 private void ConsumeTransactions()
    {
        // loop until consumer marked completed, or cancellation token set
        while (!_bin.IsCompleted && !_tokenSource.Token.IsCancelRequested)
        {
            Transaction item;

            // try to take item for 100 ms, or until cancelled 
            if (_bin.TryTake(out item, 100, _tokenSource.Token)
            {
                // consume the item
            }
        }
    } 
```

然后，当您的表单加载时，您将通过执行以下操作来启动任务：

```
// when you have a task running for life of your program, make sure you
// use TaskCreationOptions.LongRunning.  This typically sets up its own
// dedicated thread (not pooled) without having to deal with threads directly
_consumer = Task.Factory.StartNew(ConsumeTransactions, _tokenSource.Token, 
                                  TaskCreationOptions.LongRunning, TaskScheduler.Default); 
```

然后通过执行添加项目：

```
 _bin.TryAdd(someTransaction); 
```

`Transaction`无论您定义要执行的工作单元在哪里...

最后，当您的应用程序想要关闭时，它可以执行以下操作：

```
_bin.CompleteAdding(); 
```

这告诉消费者不会再将任何项目添加到队列中，这将使`TryTake()`return `false`，并退出循环，因为那时`_bin.IsCompleted`将是`true`。

然后，您的长时间运行的任务可以在阻塞获取上循环，直到设置取消令牌（也是 TPL）以告诉它关闭...

# jgroups - 成员不形成集群

> ID：11653851
> 
> 赞同：1
> 
> 时间：2012-07-25T15:59:33.390
> 
> 标签：jgroups

我必须在 WAN 上创建一个具有单个接收器和多个发送器的集群。问题是，在每个成员中使用相同的集群名称调用后`JChannel.connect()`，没有创建公共视图的公共集群，但每个组件都看到自己的。结果是，当向接收者发送消息时，无法确定后者的物理地址，并且所有消息都被掺杂。

发件人 ：

```
package mydemo;

import org.jgroups.Address;
import org.jgroups.JChannel;
import org.jgroups.ReceiverAdapter;

public class Sender {
JChannel channel;
Address receiver;
String group;
String props;
String name;

public Sender(Address rcv, String group, String props, String name) {
    receiver = rcv;
    this.group = group;
    this.props = props;
    this.name = name;
    try {
        channel = new JChannel(props);
        //channel.setName(group);
        channel.connect(group);
        System.out.println("View size(sender): " + channel.getView().getMembers().size());
        System.out.println("Sender address: " + channel.getView().getMembers().get(0));
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public void sendMessage() throws Exception {
    channel.send(receiver,"Hello, I am "+name);
}

public void setReceiverAdapter(ReceiverAdapter adapter) {
    channel.setReceiver(adapter);
}

} 
```

收件人：

```
package mydemo;

import java.util.LinkedList;
import java.util.List;

import org.jgroups.JChannel;
import org.jgroups.Message;
import org.jgroups.ReceiverAdapter;
import org.jgroups.View;

public class ClusterTest extends ReceiverAdapter {
JChannel channel;
List<Sender> senders;

public ClusterTest(int num, String props, String name)
        throws Exception {
    senders = new LinkedList<Sender>();
    channel = new JChannel(props);
    channel.setReceiver(this);
    //channel.setName(name);
    channel.connect(name);
    System.out.println("Rcv address: " + channel.getView().getMembers().get(0));
    for (int i = 0; i < num; i++) {
/*          senders.add(new Sender(channel.getView().getMembers().get(0), name,
                props, "Sender" + i));*/
        senders.add(new Sender(channel.getAddress(), name,
                props, "Sender" + i));
        senders.get(i).setReceiverAdapter(this);
        System.out.println("View size(rcv): " + channel.getView().getMembers().size());
    }
}

public void receive(Message msg) {
    System.out.println("received message " + msg);
}

public void viewAccepted(View view) {
    System.out.println("received view " + view.toString());
}

public void start() throws Exception {
    for (Sender sender : senders) {
        Thread.sleep(3000);
        sender.sendMessage();
    }
    channel.close();
}

public static void main(String[] args) throws Exception {
    new ClusterTest(3, "d:/sth/MyDemo/src/conf/tcp.xml", "TestGroup").start();
}
} 
```

jgroups 提供的 tcp.xml 用于 TCPPING 的小改动：

```
<TCPPING timeout="3000"
         initial_hosts="${jgroups.tcpping.initial_hosts:localhost[7800],localhost[7801],localhost[7802],
            localhost[7803],localhost[7804],localhost[7805],localhost[7806],localhost[7807],localhost[7808],
            localhost[7809],localhost[7810],localhost[7811],localhost[7812],localhost[7813],localhost[7814],
            localhost[7815],localhost[7816]}"
         port_range="10"
         num_initial_members="11"/> 
```

输出：

```
GMS: address=myhost-42336, cluster=TestGroup, physical address=192.168.3.1:7806

received view [myhost-42336|0] [myhost-42336]

Rcv address: myhost-42336

GMS: address=myhost-48774, cluster=TestGroup, physical address=192.168.3.1:7807

View size(sender): 1

Sender address: myhost-48774

View size(rcv): 1

GMS: address=myhost-38597, cluster=TestGroup, physical address=192.168.3.1:7808

View size(sender): 1

Sender address: myhost-38597

View size(rcv): 1

GMS: address=myhost-55548, cluster=TestGroup, physical address=192.168.3.1:7809

View size(sender): 1

Sender address: myhost-55548

View size(rcv): 1

WARNING: myhost-48774: no physical address for myhost-42336, dropping message

WARNING: myhost-48774: no physical address for myhost-42336, dropping message

WARNING: myhost-38597: no physical address for myhost-42336, dropping message

WARNING: myhost-38597: no physical address for myhost-42336, dropping message

WARNING: myhost-48774: no physical address for myhost-42336, dropping message

... 
```

请你帮助我好吗？也许这个概念是错误的，但由于目标是在 WAN 上工作，我必须使用单播和 TCP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T22:44:26.180

确保“localhost”不解析为 127.0.0.1，而是解析为您列出的地址之一。我建议使用 -Djgroups.bind_addr=1.2.3.4 启动一个实例，其中 1.2.3.4 列在“initial_hosts”中。

# css - 如何隐藏滚动条并更改选择标签的宽度

> ID：11653856
> 
> 赞同：0
> 
> 时间：2012-07-25T15:59:47.610
> 
> 标签：css

我有一个选择标签：如何隐藏滚动条？另一个问题是如何增加这个选择标签的宽度

```
<select id="navSelection" size="5"  style="overflow-y :hidden">
    <option value="temp">Temperature</option>
    <option value="flow">Flow</option>
    <option value="press">Pressure</option>
    <option value="cond">Conductivity</option>
</select> 
```

`style="overflow-y: hidden"`不管用

[jsFiddle](http://jsfiddle.net/minagabriel/QZJAG/)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:04:42.713

[在 <select> 元素中隐藏垂直滚动条](https://stackoverflow.com/questions/4531269/hide-vertical-scrollbar-in-select-element) 应该回答您关于滚动条的问题，并且：

```
#navSelection {
  width: xxxpx;
} 
```

应该改变宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:07:02.743

为了增加`select`元素的宽度，您可以编写内联样式或使用类或 ID 设置大小：

```
<select style="width: 150px;"></select> 
```

或者

```
select { width: 150px; } 
```

您不能覆盖显示`select`下拉菜单的默认浏览器行为。

# git - 在 EMR 上安装 GIT

> ID：11653858
> 
> 赞同：7
> 
> 时间：2012-07-25T15:59:53.423
> 
> 标签：git, elastic-map-reduce

1) 我被告知 git 已安装在 EMR 上。这是真的 ？我不相信，因为我可以确认在我的 elastic-mapreduce ssh 终端中找不到“git”。见：[https](https://raw.github.com/gist/3177009/6128554a2668367b72758be74885836e41898923/gistfile1.txt) ://raw.github.com/gist/3177009/6128554a2668367b72758be74885836e41898923/gistfile1.txt 。

2）我需要在 EMR 上安装 git，但是下面这行：

hadoop@ip-10-235-11-52:/mnt$ sudo apt-get install git --assume-yes

结果是 ：

hadoop@ip-10-235-11-52:/mnt$ sudo apt-get install git --assume-yes 读取包列表...完成 构建依赖树
读取状态信息...完成 git 已经是最新版本了。0 升级，0 新安装，0 删除，3 未升级。

然而不幸的是，即使在发出此命令之后，git 也不会在此 EMR 实例上运行：

hadoop@ip-10-235-11-52:/mnt$ git -bash: git: 找不到命令 hadoop@ip-10-235-11-52:/mnt$ sudo git sudo: git: 找不到命令

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-28T08:59:44.393

跟进@jayunit100 的回答：

yum install git-core 将适用于 AWS-EMR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T23:50:29.343

1) 较旧的 EMR 实例似乎**没有**安装 git，库存。

2)

apt-get install git 实际上应该是 apt-get install git-core

很简单。

# iphone - Storyboard 不包含标识符为“myWebView”的视图控制器

> ID：11653861
> 
> 赞同：2
> 
> 时间：2012-07-25T16:00:01.583
> 
> 标签：iphone, storyboard, identifier

我不断收到错误：

> Storyboard () 不包含标识符为“myWebView”的视图控制器。

我正在使用 UITableView，当用户单击单元格时，它将推送另一个视图并加载 UIWebView。但我确信我在情节提要中正确设置了标识符，请查看代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSArray *arrInfo = [[tableData objectAtIndex:indexPath.row] componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@";"]];

    favWebView *nextView = [self.storyboard instantiateViewControllerWithIdentifier:@"myWebView"];

    nextView.title = [arrInfo objectAtIndex:1];
    nextView.url1 = [arrInfo objectAtIndex:6];
    [self.navigationController pushViewController:nextView animated:YES];
} 
```

图片：

![故事板](../Images/3d1eb8a60f09717f3fd339827bf7d303.png)

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T12:21:17.397

这里的解决方案是从模拟器或设备中删除应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-11T08:29:12.760

构建应用程序后，故事板将被复制到`MyApp.app/MyStoryboard.storyboardc`. 然后，如果您本地化了情节提要，它们将被复制到`MyApp.app/(localization.lproj)/MyStoryboard.storyboardc`. 但是在 iOS Simulator 应用程序的文件夹中的原始故事板（可能是旧的，没有一些视图控制器，如果您在本地化后添加它）仍然存在于`MyApp.app/MyStoryboard.storyboardc`. 运行后，您的应用尝试`instantiateViewControllerWithIdentifier`从`MyApp.app/MyStoryboard.storyboardc`. 可以通过导航到 iOS Simulator 文件夹并为您的应用程序探索包来检查它。

所以，这就是它崩溃的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:24:52.553

可能与您的 sotryboard 有关，也许这会做一些不同的事情。以不同的方式初始化视图。

```
 favWebView *favWebView = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"favWebView"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-26T07:55:24.497

我通过在一个新项目中重新创建它来解决它。这可能是 Xcode 的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-18T18:02:45.867

您可能需要为视图控制器分配一个“故事板 ID”。这为我解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T15:51:44.190

如果您有多种语言，则应确保在所有本地化文件的所有故事板上设置故事板 ID。我发现当我选择故事板（但没有本地化）并设置 id 时，只会修改第一个本地化文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T01:51:29.483

我遇到了类似的问题。

凭直觉，我检查了故事板认为控制器是什么 - 在实际视图下方栏上的故事板窗口中。Storyboard 添加了空格“MyViewController”变成了“My View Controller”——无论如何，在将空格添加到 Storyboard ID 和 instantiateViewControllerWithIdentity 之后——它起作用了。

# c# - 使用 Linq 和 IComparer 订购 ObservableCollection

> ID：11653862
> 
> 赞同：2
> 
> 时间：2012-07-25T16:00:04.887
> 
> 标签：c#, linq, sql-order-by, icomparer

我想按字母顺序排列 ObservableCollection，因为我不想创建另一个绑定。我已经看到我们可以使用 Linq 和 OrderBy 方法。我还想使用个人 IComparer 因为我将不得不组织复杂的数据（列表到其他列表中），但是 VS 告诉我我不能使用我自己的比较器：

（给你错误的链接，因为我的VS是法语的）

[http://msdn.microsoft.com/en-gb/library/hxfhx4sy%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-gb/library/hxfhx4sy%28v=vs.90%29.aspx)

有任何想法吗 ？

```
private void SortGraphicObjectsAscending(object sender, RoutedEventArgs e)
    {
        GraphicObjects.OrderBy(graphicObject => graphicObject.Nom, new GraphicObjectComparer(true));

    } 
```

还有我自己的比较器（已经过测试）

```
public class GraphicObjectComparer : IComparer<GraphicObject>
{
    int order = 1;

    public GraphicObjectComparer(Boolean ascending)
    {
        if (!ascending)
        {
            order = -1;
        }
    }

    public GraphicObjectComparer()
    {

    }

    public int Compare(GraphicObject x, GraphicObject y)
    {
        return String.Compare(x.Nom, y.Nom, false) * order;
    }

} 
```

* * *

感谢您的回答。无论如何，我还有另一个问题。正如迈克尔所说，我使用了一个更复杂的比较器，但用于另一个实体。该实体以分层树的形式显示，并且一个对象可能包含相同类型的其他对象的列表。

我无法测试我的 GraphicObject，因为我无权访问数据库（目前没有对象）。通过对我的 VideoEntity 的测试，我的 ObservableCollection 似乎没有按照我想要的方式排序（我创建了另一个）。我想按字母顺序颠倒它，但它不起作用。

```
public class VideoEntityComparer : IComparer<VideoEntity>
{

    int order = 1;

    public VideoEntityComparer(Boolean ascending)
    {
        if (!ascending)
        {
            this.order = -1; // so descending
        }
    }

    public VideoEntityComparer()
    {

    }

    public int Compare(VideoEntity x, VideoEntity y)
    {
        if ((x is BaseDirectory && y is BaseDirectory) || (x is BaseSite && y is BaseSite) || (x is VideoEncoder && y is VideoEncoder))
        {
            return string.Compare(x.Nom, y.Nom, false) * order; // only objects of the same type are sorted alphabetically
        }
        else if ((x is BaseDirectory && y is BaseSite) || (x is BaseSite && y is VideoEncoder))
        {
            return -1;
        }else
        {
            return 1;
        }
    }
} 
```

* * *

```
private void SortDirectoriesDescending(object sender, RoutedEventArgs e)
    {
        ObservableCollection<BaseDirectory> tempDir  = new ObservableCollection<BaseDirectory>(
            Directories.OrderBy(directory => directory, new VideoEntityComparer(false)));
        Directories = tempDir;
    } 
```

PS：顺便说一句，我正在处理一个 DependancyProperty。这是正确的方法吗？（我是 WPF 的新手）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:21:07.547

该行的问题`OrderBy`在于您尝试使用的定义：

```
public static IOrderedEnumerable<TSource> OrderBy<TSource, TKey>(
    this IEnumerable<TSource> source,
    Func<TSource, TKey> keySelector,
    IComparer<TKey> comparer
) 
```

此方法有两个不同的通用参数：`TSource`和`TKey`. `TSource`很明显，它与`TSource`source相同`IEnumerable`。该`TKey`参数是编译器尝试并失败的参数，因为您尝试使用两种不同的类型。你的来电：

```
GraphicObjects.OrderBy(graphicObject => graphicObject.Nom, new GraphicObjectComparer(true)); 
```

您的第一个参数是 a`Func<GraphicObject, string>`但您的第二个参数是 a `IComparer<GraphicObject>`; 这意味着您`TKey = string`在一个地方和另一个地方使用`TKey = GraphicObject`。

第一个参数，`Func<>`委托，是“键选择器”；这就是您如何判断`OrderBy`要排序的值的方式。由于您`IComparer<>`是根据*整个`GraphicObject`实例*进行排序的，因此您应该选择它作为键：

```
GraphicObjects.OrderBy(go => go, new GraphicObjectComparer(true)); 
```

我假设您的自定义比较器对象实际上比您显示的更复杂，因为您的示例比较器非常多余：

```
var asc = GraphicObjects.OrderBy(go => go.Nom);
var desc = GraphicObjects.OrderByDescending(go => go.Nom); 
```

另外，请注意，您的示例代码实际上并没有对新排序的列表做任何事情，所以它只是被扔掉了。LINQ 操作*永远不会*更改源可枚举，它们总是返回一个新的、转换后的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:20:33.523

你的`comparer`比较`GraphicObject`。所以你`OrderBy`应该是

```
 GraphicObjects.OrderBy(graphicObject => graphicObject,
                                                 new GraphicObjectComparer(true)); 
```

或者只是使用

```
GraphicObjects.OrderBy(graphicObject => graphicObject.Nom); 
```

顺便说一句，`OrderBy`不会就地排序，您应该将返回的值分配`IEnumerable<GraphicsObject>`给变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:24:04.037

问题是您的比较器使用的是 GraphicObject，但您比较的是字符串。

如果您确实需要自己订购，可以使用此比较器：

```
public class GraphicObjectComparer : IComparer<string>
{
    int order = 1;

    public GraphicObjectComparer(Boolean ascending)
    {
        if (!ascending)
        {
            order = -1;
        }
    }

    public GraphicObjectComparer()
    {

    }

    public int Compare(string x, string y)
    {
        return String.Compare(x, y, false) * order;
    }
} 
```

或者，您向比较器提供 GraphicObject，而不是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-19T12:36:55.133

为了排序 ObservableCollection 反映源集合中的所有更改，您可以使用我的[ObservableComputations](https://github.com/IgorBuchelnikov/ObservableComputations)库。使用这个库，您可以像这样编写代码：

```
var sortedGraphicObjects = GraphicObjects.Ordering(
    graphicObject => graphicObject.Nom, new GraphicObjectComparer(true)); 
```

sortedGraphicObjects 是 ObservableCollection，反映了 GraphicObjects 集合和 Nom 属性的所有变化。确保 Nom 属性通过[INotifyPropertyChanged](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.inotifypropertychanged?view=netframework-4.8)接口通知更改。

# ios - 更改情节提要中的初始视图控制器

> ID：11653867
> 
> 赞同：1
> 
> 时间：2012-07-25T16:00:20.760
> 
> 标签：ios, objective-c, ios5

我试图找出是否可以通过代码更改初始情节提要视图控制器。

例如：

应用程序启动 --> Viewcontroller A 加载 --> 用户进行一些交互 --> 代码执行 --> Viewcontroller B 加载

下次应用启动时 --> Viewcontroller B 加载

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:03:25.513

您需要保存一些指示您想在启动时转到 B 的指示符，如果是这样，请转到“代码执行 --> Viewcontroller B 加载”部分。

# asp-classic - 我应该认为什么是无效密码？

> ID：11653868
> 
> 赞同：0
> 
> 时间：2012-07-25T16:00:22.640
> 
> 标签：asp-classic, passwords

当用户为我的应用程序选择密码时，我应该应用哪些限制（如果有），我应该将什么视为无效密码？

例如，我读过有关修剪空白、仅限于 ASCII 字符等的内容，但这些似乎取决于意见或应用程序。

我知道对密码的强制*要求*，例如至少两个符号、两个数字等，但我更感兴趣的是我应该应用哪些限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:08:22.010

安全：
大写字母
数字
字母

简单：
字母
数字

疯狂：
一切：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:04:27.657

只要您正确清理输入，我认为根本没有理由阻止任何字符。不过，尾随空格可能应该被切断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:04:40.750

我认为任何东西都不应该是无效密码。如果您可以对其进行哈希存储并稍后进行比较，您应该可以将其用作您的密码。限制密码的强度没有任何用处。

# matlab - 如何强制matlab在图X和Y上显示足够的数字？

> ID：11653870
> 
> 赞同：3
> 
> 时间：2012-07-25T16:00:23.647
> 
> 标签：matlab, plot, labels

问题是matlab“削减”了一些数字，我不承认实际价值。看截图，在 Y 上有很多“0.0156”，而我预计“0.01562”“0.01564”“0.01566”等。

![截屏](../Images/faa1bb8b89dbad19e9834a698de72763.png)

如何说 matlab 显示足够的数字以便我可以识别实际值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:44:09.640

一个技巧是调用：

```
set(gca, 'YTickLabel', get(gca,'YTick')) 
```

这是使用[其他问题](https://stackoverflow.com/questions/11599065/creating-graph-from-text-file-where-axis-x-is-date-with-millisecond-precision-an)的数据之前和之后：

![前](../Images/0a8de2be9ec2d70988726a2125dfdbaf.png) ![后](../Images/a09e65d00eba0cdf5f4dac35b91e60c8.png)

创建于：

```
y = [
    0.0155260005803643
    0.0155280030632315
    0.0155270018379389
    0.0155260006126463
    0.0155239981620611
    0.0155249993873537
];

plot(y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:26:08.890

我认为`tick2text`凯利·科尔尼（Kelly Kearney）可以做到。
[http://www.mathworks.com/matlabcentral/fileexchange/16003](http://www.mathworks.com/matlabcentral/fileexchange/16003)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-25T15:42:38.043

set(gca, 'YTickLabel', get(gca,'YTick')) 按照 Amro 的建议工作。就像我为一些 CFD 工作所做的那样，将它放在 plot 命令或 subplot 命令之后......

有时压力和速度差可能非常小，您需要在非常小的刻度上进行绘图。

# regex - fail2ban 不能使用正则表达式（ssh）

> ID：11653872
> 
> 赞同：0
> 
> 时间：2012-07-25T16:00:35.373
> 
> 标签：regex, ssh, freebsd

我的日志文件显示此消息：

```
Jul 24 06:09:36 myserver sshd[46098]: reverse mapping checking getaddrinfo for
95.58.255.62.static.telecom.kz [95.58.255.62] failed - POSSIBLE BREAK-IN ATTEMPT! 
```

ssh过滤器上的正则表达式：

```
^%(__prefix_line)sreverse mapping checking getaddrinfo for .* \[<HOST>\] failed - POSSIB
^%(__prefix_line)sAddress <HOST> .* POSSIBLE BREAK-IN ATTEMPT!\s*$ 
```

他们不工作，fail2ban 没有检测到任何动作。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:13:12.147

我怀疑它是在两行中，应该在一个中（至少在 ubuntu 中，所以我在 freebsd 中的猜测相同）。

我在我的 /etc/fail2ban/filter.d/sshd.conf 中使用它

```
^%(__prefix_line)sreverse mapping checking getaddrinfo for .* \[<HOST>\] failed - POSSIBLE BREAK-IN ATTEMPT!\s*$ 
```

使用工具检查后：fail2ban-regex

# android - startActivity(intent) 似乎有问题

> ID：11653874
> 
> 赞同：0
> 
> 时间：2012-07-25T16:00:40.070
> 
> 标签：android, android-intent, onkeydown

我正在尝试做一个安全应用程序，如果密码对话框错误（在 Theme.Dialog 中使用 Activity）将重新启动，则需要用户输入密码，但问题是 Activity 没有启动。对于后退按钮，如果我按两次后退，它将直接关闭对话框。

```
package nyp.android.project;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.RunningTaskInfo;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.preference.Preference;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class PasswordDialog extends Activity {

    private static final String TAG = "Logging Activity";
    private static boolean isMyServiceRunning;
    //Context context;   
    Button login;
    EditText inputPassword;
    String password;

    protected void onCreate(Bundle savedInstanceState) 
    {
        //this.context = context;
        super.onCreate(savedInstanceState);
        setContentView (R.layout.password_dialog);

        final SharedPreferences passwdfile = getSharedPreferences(    
                PhoneFinder.PASSWORD_PREF_KEY, 0); 

        final String correctSHA1 = passwdfile.getString(PhoneFinder.PASSWORD_PREF_KEY, null);

        login = (Button) findViewById(R.id.btnLogin);
        inputPassword = (EditText) findViewById(R.id.loginPassword);

        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                password = inputPassword.getText().toString();               
                final String SHA1hash = PhoneFinder.getSHA1(password); 

                if (correctSHA1.equals(SHA1hash)) {
                    Toast.makeText(PasswordDialog.this, "Correct", Toast.LENGTH_LONG).show();
                    finish();   
                    stopService(new Intent(getBaseContext(), MyService.class));
                    Log.v(TAG, "SHA1 Hash:" + SHA1hash);
                    Log.v(TAG, "Correct SHA1:" + correctSHA1);
                }
                else {
                    Toast.makeText(PasswordDialog.this, "Wrong", Toast.LENGTH_LONG).show();
                    Intent Act2Intent = new Intent(getBaseContext(), PasswordDialog.class);              
                    startActivity(Act2Intent);          
                    finish();
                    Log.v(TAG, "SHA1 Hash:" + SHA1hash);
                    Log.v(TAG, "Correct SHA1:" + correctSHA1);

                }

            }
        });
        }

    @Override
    public void onBackPressed()
    {
        Intent indent = new Intent(this, PasswordDialog.class);
        startActivity(indent);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:27:33.593

对于后退按钮的问题：

覆盖活动的方法“onBackPressed()”。请参阅[文档](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)。

```
@Override
public void onBackPressed()
{
    Intent indent = new Intent(this, MyActivityToStart.class);
    startActivity(intent);
} 
```

不要调用“super.onBackPressed()”，因为这会关闭活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:28:55.590

将其用于 Intent

```
Intent Act2Intent = new Intent(PresentActivity.this, PasswordDialog.class);              
startActivity(Act2Intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:53:25.833

找到了我只需要调用finish（）的问题的解决方案；在 startActivity() 之前

# multithreading - 在多处理器中，“mov eax,mem”能否与“lock inc mem”同时出现？

> ID：11653877
> 
> 赞同：2
> 
> 时间：2012-07-25T16:00:44.907
> 
> 标签：multithreading, assembly, x86, multiprocessing

在多处理器中，我们知道`lock inc mem`：锁可以确保没有其他操作可以访问该地址`mem`。

但是当一个处理器`mov eax,mem`首先执行，然后在它完成之前，第二个处理器执行`lock inc mem`。

结果会怎样？

1.  第二条指令 ( `lock inc mem`) 等到第一条指令 ( )`mov eax,mem`完成？（结果，首先会得到正确的值）

2.  两条指令同时执行。（因此，首先可能会得到一个无法预测的值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:17:26.567

如果 mem 是 32 位对齐的，则 mov 操作保证是原子的。引用软件开发者手册第 3A 卷：“一旦启动，处理器保证操作将在另一个处理器或总线代理被允许访问内存位置之前完成”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:18:02.870

它`mov EAX,[mem]`是原子的，因为它并行读取所有位。没有机会获得部分结果。它是在更新之前还是之后获得价值并不重要。

不同之`inc [mem]`处在于它既读取又写入内存位置。如果你有两个并行运行，结果将是不可预测的，因为一个可能会覆盖另一个的结果。使用 a`lock`通过在整个指令期间声明总线来解决这个问题。其他人将不得不等待。

# mysql - 查询中的 SQL 语法错误

> ID：11653889
> 
> 赞同：1
> 
> 时间：2012-07-25T16:01:47.880
> 
> 标签：mysql, sql

显示错误的 MySQL 查询有什么问题：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index WHERE id=1' at line 1 
```

相关代码：

```
$qu = mysql_query("SELECT * FROM index WHERE id= 1") or die("MySQL ERROR: ".mysql_error());

    WHILE($d = mysql_fetch_array($qu)):

    $con = $d['content'];

endwhile; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:02:58.813

`index`是一个[MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，所以你必须用这样的反引号引用它：

```
SELECT * 
FROM `index` 
WHERE id = 1 
```

# java - 如何对图形对象进行分组

> ID：11653890
> 
> 赞同：0
> 
> 时间：2012-07-25T16:01:51.143
> 
> 标签：java

如何将多个图形对象合二为一？（这部分代码应该生成俄罗斯方块图，其中generate()创建图）

```
public void paint(Graphics g){
        Figure f = generate();
        int length = f.getX()[0].length;
        for(int j =0; j<f.getX().length;j++){

            int xr=xs+10;
            ys = 0;                 
            for(int i=0;i<length;i++){                      

                if (f.getX()[j][i] == 1){
                    int yr = ys+10;
                    Rectangle p = new Rectangle(xs,ys,xr,yr);
                    g.setColor(f.getY());
                    g.drawRect(p.x, p.y, p.width, p.height);    
                    g.fillRect(p.x, p.y, p.width, p.height);    
                    //g.translate(xs+40, ys+40);
                }
                ys+=10;

            }
            xs+=10;
        }
        xs=0;
        ys=0;

       //g.setColor(Color.white);
       //g.drawRect(45, 95, 55, 105);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:21:18.717

好吧，我认为您是从 Java 2D 开始的，因为您的代码存在一些问题。首先，你总是需要调用超类的绘制版本。应该这样做，因为组件需要有机会正确呈现自己。看一看。

```
@Override
public void paint( Graphics g ) {

    // you MUST do this
    super.paint(g);

    // continue here... 

} 
```

如果您正在处理 JFrame，您将覆盖 paint 方法。如果您正在使用一些 JComponent 子组件，例如 JPanel，您需要重写paintComponent 方法，该方法具有相同的paint 签名，但它是受保护的，而不是公共的。您也可以覆盖paint，但在这些情况下（JComponent 及其子项），paint 是一种将绘制工作委托给三个方法（paintComponent、paintBorder 和paintChildren）的方法，因此最好的选择是覆盖paintComponent。

另一个细节。使用图形的最佳方法是基于当前图形上下文创建一个新的图形上下文，并在使用后将其丢弃。看一看：

```
@Override
public void paint( Graphics g ) {

    // you MUST do this
    super.paint(g);

    Graphics newG = g.create();
    // or Graphics2D newG2d = (Graphics2D) g.create();

    // do your work here...

    newG.dispose(); // disposes the graphics context

} 
```

使用 create 方法创建的图形上下文是当前图形上下文的副本（具有相同的状态），但更改它不会影响原始图形上下文，因此这样做不会弄乱原始图形的状态语境。

最后，我认为你需要在你的图中有一个 draw 方法来接收图形上下文。因此，Figure 实例将负责绘制自己。就像是：

```
public class Figure {

    // figure's members...

    public void drawMe( Graphics2D g2d ) {
        // do the draw work here...
    }

}

public class MyFrame extends JFrame {

    @Override
    public void paint( Graphics g ) {

        super.paint(g);

        Graphics2D g2d = (Graphics2D) g.create();

        // let's suppose that figureList is a List<Figure> or a Figure[]
        for ( Figure f : figureList ) {
            f.drawMe( g2d );
        }

        g2d.dispose();

    }

} 
```

当然，如果每个 Figure 的 draw 方法改变了图形上下文太“深”，你可以为每个图形创建一个新的图形上下文，比如做平移和旋转。您只需要在使用后处理新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:04:50.937

我假设您正在尝试将多个组件放在一个封闭组件内，以便您可以一起移动/操作它们。

一个建议是将您的每个对象添加到面板对象中，例如`JPanel`.

但是，您要确切实现的目标尚不清楚。

# ruby-on-rails - ruby on rails 在错误消息上添加 div 加入

> ID：11653891
> 
> 赞同：0
> 
> 时间：2012-07-25T16:01:51.847
> 
> 标签：ruby-on-rails, html, join

ajax 调用的当前代码：

```
@return = { :error => true, :response => @invitation.errors.full_messages.join("<br />") } 
```

错误现在显示为

```
Email can't be blank
Email is invalid 
```

如何在每行中添加`div`错误消息和`p`标签？

所以它会变成

```
<div>
    <p>Email can't be blank</p>
    <p>Email is invalid</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:11:58.427

像这样的东西可能对你有用：

```
error_message = content_tag :div, @invitation.errors.full_messages.map {|error| "<p>#{error}</p>"}.join
@return = { :error => true, :response => error_message } 
```

# auto-increment - 在H2数据库中，auto_increment字段增加了32？

> ID：11653892
> 
> 赞同：11
> 
> 时间：2012-07-25T16:01:57.913
> 
> 标签：auto-increment, h2

我有这个简单的表（仅供测试）：

```
create table table 
(
key int not null primary key auto_increment,
name varchar(30)
); 
```

然后我执行以下请求：

```
insert into table values ( null , 'one');// key=1
insert into table values ( null , 'two');// key=2 
```

在这个阶段一切顺利，然后我关闭 H2 控制台并重新打开它并重新执行此请求：

```
insert into table values ( null , 'three');// key=33 
```

最后，这是所有结果：

![在此处输入图像描述](../Images/f1d9a68bc703d89250bf48e4324aaba4.png)

我不知道如何解决这个问题，如果它是一个真正的问题......等待作者的回应......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-25T18:05:02.707

数据库[对序列使用 32 个条目的缓存](http://h2database.com/html/grammar.html#create_sequence)，并且自动增量是在内部实现的序列。如果系统在没有关闭数据库的情况下崩溃，最多会丢失这么多数字。这类似于序列在其他数据库中的工作方式。在这种情况下，不能保证生成没有间隙的序列值。

那么，你真的关闭了数据库吗？你应该 - 如果你不这样做，这在技术上不是问题，但关闭数据库将确保不会发生这种奇怪的事情。如果我正常关闭数据库（停止 H2 控制台工具），我无法重现该问题。关闭所有连接将关闭数据库，如果应用程序正常停止（使用关闭挂钩），则关闭数据库。

顺便问一下，您的确切数据库 URL 是什么？看来您正在使用`jdbc:h2:tcp://...`，但我看不到 URL 的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T13:41:42.990

不要关闭终端。终端是 h2-tcp-server 的父进程。他们不分离。当您关闭终端时，它的进程会关闭所有子进程，这意味着紧急服务器关闭

# excel - 在 Excel 中使用 VBA 检查变量类型是否是用户定义的类

> ID：11653894
> 
> 赞同：0
> 
> 时间：2012-07-25T16:02:03.110
> 
> 标签：excel, vba

> **可能重复：**
> [如何在 VB 6 中检查对象的类型 - 除了 'TypeName' 还有其他方法吗](https://stackoverflow.com/questions/3684693/how-to-check-type-of-object-in-vb-6-is-there-any-method-other-than-typename)

我有一个对象，我需要使用以下代码检查它是否是某个用户定义的类：

```
If Collection.Items(1).object = class1 then
 do something
end if 
```

我不确定执行用户定义类的评估的语法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:21:56.367

```
Sub tester()
    Dim o As New Class1
    Debug.Print TypeName(o)  ' "Class1"
End Sub 
```

# iphone - iOS5上的GLKit：设置纹理防止其他绘图

> ID：11653896
> 
> 赞同：1
> 
> 时间：2012-07-25T16:02:06.760
> 
> 标签：iphone, ios, opengl-es, textures

我正在尝试使用 GLKit 进行一些非常简单的 2D 绘图，包括使用纹理。但是，如果我加载纹理，但甚至不在绘图中使用它，它会以某种方式阻止绘图的发生！

这是我的设置代码：

```
-(void) setup {

  effect = [[GLKBaseEffect alloc] init];

  // comment this out - drawing takes place
  texture = [GLKTextureLoader textureWithCGImage:[UIImage imageNamed: @"arrow.png"].CGImage options:nil error: nil];
  if (texture) {
    effect.texture2d0.envMode = GLKTextureEnvModeReplace;
    effect.texture2d0.target = GLKTextureTarget2D;
    effect.texture2d0.name = texture.name;
  };
  // end of comment this out...

  effect.transform.projectionMatrix = GLKMatrix4MakeOrtho(0.0, self.bounds.size.width, self.bounds.size.height, 0.0, 1, -1);

} 
```

这是我的绘图代码：

```
- (void)drawRect:(CGRect)rect {

  GLKVector2 vertices[4];
  GLKVector4 colors[4];

  vertices[0] = GLKVector2Make(20.0, 30.0);
  vertices[1] = GLKVector2Make(120.0, 45.0);
  vertices[2] = GLKVector2Make(70.0, 88.0);
  vertices[3] = GLKVector2Make(20.0, 80.0);

  for(int i = 0; i < 4; i++) {

    colors[i] = GLKVector4Make(0.3, 0.8, 0.5, 1.0);
  };

  glClearColor(0.85, 0.05, 0.1, 1.0);
  glClear(GL_COLOR_BUFFER_BIT);

  [effect prepareToDraw];

  glEnable(GL_BLEND);
  glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

  glEnableVertexAttribArray(GLKVertexAttribPosition);
  glEnableVertexAttribArray(GLKVertexAttribColor);

  glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, 0, vertices);
  glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, 0, colors);

  glDrawArrays(GL_TRIANGLE_STRIP, 0, 3);

  glDisableVertexAttribArray(GLKVertexAttribPosition);
  glDisableVertexAttribArray(GLKVertexAttribColor);

  glDisable(GL_BLEND);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:58:22.503

要调试 OpenGL，请在调试模式下运行代码，然后暂停并从菜单栏中选择“捕获 OpenGL ES 帧”。这允许您单步执行您的绘图代码并在每次调用后查看 OpenGL 状态。因此，您可以比较执行设置代码和不执行设置代码时的状态，并确定错误。

对于问题本身：设置效果的texture2d属性已经足够使用纹理了。如果你把它放在那里，它会自动在图纸中使用。在`[effect prepareToDraw]`中，应用了效果的整个状态 - 包括指定的纹理。

# javascript - jQuery Datatable javascript上的链接不适用于多个页面

> ID：11653898
> 
> 赞同：1
> 
> 时间：2012-07-25T16:02:10.813
> 
> 标签：javascript, jquery, sorting, plugins, datatable

我在使用 jQuery 的 Datatable 插件时遇到问题......我已经填写了一个表格，并且特定列的单元格如下所示：

```
<a href="26" name="PO">12</a> 
```

我已经阻止了 onclick 事件，它触发了这段代码：

```
$( 'a[name="PO"]' ).click(function(){
            event.preventDefault();
            var POid = $( this ).attr('href');
            var element = $( this );
            $( '<div id="Dialog">\
                <p class="error"></p>\
                <p style="text-align:center;" class="main">Entrez le P.O. associé à la commande</p>\
                <input type="text" class="POprompt"/>\
                </div>').dialog({
                resizable: false,
                height: 'auto',
                width:'400',
                modal: true,
                title: 'Ajout d\'un PO',
                show: 'blind',
                hide: 'drop',
                buttons:{
                    "Sauvegarder":function() {
                        $('.error').css('color','FF0000');
                        var prompt = $('.POprompt').val();
                        if (!isNaN(parseInt(prompt)))
                        {
                            $.post('setPO.php',{'PO':prompt,'id':POid},function(data)
                            {
                                element.text( prompt );
                                $('.main').css('color','#0F0');
                                $('.POprompt').css('visible','false');
                                $('.main').text("L\'ajout a été effectué avec succès.")
                                $( this ).dialog( "close" );
                                $('.error').text("");
                                $('.error').css('color','#FFF');
                            });
                        }
                        else
                        {
                            var error = $('.error');

                            error.text("Veuillez entrer des chiffres seulement.");
                            error.addClass( "ui-state-highlight" );
                            setTimeout(function() {
                                error.removeClass( "ui-state-highlight", 1500 );
                            }, 1000 );
                        }
                        $('.error').css('color','FF0000');
                    },
                    "Annuler":function() 
                        {
                            $( this ).dialog( "close" );
                        }       
                }
            } );
        }); 
```

但是当我进入第 2 页或第 3 页时，或者当我对结果进行排序并单击该单元格链接但该行是在第一个页面之外的另一个页面中生成时，javascript 不会触发。

有人有想法吗？非常感谢你们，祝你们有美好的一天。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-23T13:51:40.973

我意识到这个问题已经得到解答，但是，它是不完整的，恕我直言可能是错误的。多页数据表的问题是初始选择器在用户单击默认第一页以外的任何页面时变得无用。这是因为 dataTable 为了渲染表格对 DOM 做了一些可怕的事情。这具有禁用点击处理程序的副作用。

好消息是除了列出所有元素之外，还有一种方法可以处理这个问题。

代替...

`$( 'a[name="PO"]' ).click(function(){`

尝试这个：

`$( "#dataTable tbody" ).on('click', 'a[name="PO"]', function(){`

阅读此 jquery 页面 ( [on()](http://api.jquery.com/on/) ) 并查找有关延迟选择器的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:08:26.790

因为当 javascript 插入元素到文档时它没有 onclick。jQuery 不会自动将 onclick 添加到它们。

**解决方案：**每次加载数据时调用此脚本（当用户更改页面或排序表时）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:30:17.720

通过添加以下内容，我终于让一切正常工作：

```
"bLengthChange": true, 
```

到我的数据表声明。

我还修改了`<select>`选项，添加了一个“显示全部”选项，该选项默认加载所有行，但自从我设置`"iDisplayLength": 5`. 以下是如何将“显示全部”值添加到长度选择输入（总和）：

```
$(document).ready(function(){
    $('table').dataTable({
        "bLengthChange":true,
        "bFilter":true,
        "iDisplayLength": 5,
        "sDom":'<"H"lfr>t<"F"ip>',
        "oLanguage":{
            "sUrl": "dataTables.txt"
        }
    });
}); 
```

文本文件包含您的所有翻译（如果需要）和您的自定义 SELECT：

```
{
    "sProcessing":     "Processing...",
    "sLengthMenu": "Show <select><option value=-1>INFINITE</option></select> results"
} 
```

注意：当然，我在 select AND 数据表声明中添加了其他选项，这样更容易阅读。这`value=-1`部分是如何让 javascript 加载到所有行/单元格上。

感谢那些试图帮助我的人，你的两个答案对我都很有用！

# html - 在 HTML 下拉列表中添加选项导致的奇怪错误

> ID：11653903
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:02:29.367
> 
> 标签：html

这个 HTML 代码块，它形成了一个带有下拉列表作为元素的表格，可以正常工作。

```
<table border="0" summary="Error Models">
<tr>
<th>Ambiguity Resolution Options</th>
</tr>
<tr>
<td>
Strategy: 
<select name="strategy">
   <option value="off">OFF</option>
   <option value="float">Float</option>
   <option value="instantaneous">Instantaneous</option>

</select>
</td>
</tr>
</table> 
```

当我尝试在此下拉列表中添加“Fix-and-Hold”选项时，如下所示：

```
<option value="fix-and-hold">Fix-and-Hold</option> 
```

我收到一条错误消息，即使我更改了“fix-and-hold”值，它仍然存在。

据我所知，可以在 value 参数中分配的可能值没有限制。那么，是什么导致了这个错误呢？

我使用[Tryit (W3schools)](http://www.w3schools.com)编辑器为测试目的编写 HTML 代码，因为我没有一个能够在不发布页面的情况下显示页面的 HTML 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:06:52.350

I suspect there's something dynamic going on, either via javascript, server-side, or in your IDE itself.

See the html snippet working on jsfiddle.net here: [http://jsfiddle.net/WUjhu/](http://jsfiddle.net/WUjhu/)

In general, though, just because one browser will run it doesn't mean much, because browsers are very tolerant of horribly malformed html, so what you want to do with your html when you encounter a problem is run in through the validator here: [http://validator.w3.org/#validate_by_input](http://validator.w3.org/#validate_by_input)

Of course, when putting that code through the validator, there are no errors, because it's perfectly valid html, as long as only that html is involved. To me, that implies that your editor/previewer is failing you. Check the doctype and surrounding code to see what it adds that could be breaking stuff, otherwise get a better editor.

# c# - 更严格的 XmlSerializer 不允许未使用的节点

> ID：11653904
> 
> 赞同：0
> 
> 时间：2012-07-25T16:02:35.723
> 
> 标签：c#, xml, strict, serialization

我使用 SDK 中的 xsd.exe 工具生成了基于 XSD 的 C# 类。然后我可以使用该类使用 XmlSerializer [反]序列化对象......但是序列化器似乎非常宽容。

如果缺少属性或“奇怪”的 XML 节点，我是否可以让序列化程序抛出异常？

我认为一种方法是修改属性的设置器并使其验证数据（或使用 XSD 验证）......但是对于这个问题还有其他替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:34:12.113

You can implement the [`IXmlSerializable` interface](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx) and in the [`ReadXml` method](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.readxml.aspx) implementation, check for the specific elements that you require, throwing exceptions when you don't find them (or setting whatever notification you need to).

If you want to use a schema for validation (to use the [`minOccurs` and `maxOccurs` schema attributes](http://www.w3.org/TR/xmlschema-0/#ref6), for example), then you can configure the [`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx) instance to validate against the schema by setting the [`Schemas` property](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.schemas.aspx) on the [`XmlReaderSettings` class](http://msdn.microsoft.com/en-us/library/tyt9ka3c) that you pass to the [`Create` method](http://msdn.microsoft.com/en-us/library/ms162473.aspx) (note there are overloads of `Create` which take a [`TextReader`](http://msdn.microsoft.com/en-us/library/system.io.textreader.aspx), etc.).

# java - Netty：当处理程序位于 OrderedMemoryAwareThreadPoolExecutor 之后时，是否总是需要 volatile 属性？

> ID：11653907
> 
> 赞同：0
> 
> 时间：2012-07-25T16:02:48.120
> 
> 标签：java, netty, volatile

我在我的 ChannelHandlers 中使用实例变量来跟踪通道状态。但我的管道配置使用的是 OrderedMemoryAwareThreadPoolExecutor。

这意味着每个上游事件总是按顺序处理，没有并发，我不需要担心线程安全问题。

但无论如何，处理程序将被 ExecutionHandler 的不同线程调用。那么我是否被迫将所有实例变量声明为 volatile 以使它们在线程之间可见，尽管它们从未被同时调用？

我读过的所有关于 volatile 变量的文档都说，如果你想保证修改在线程之间可见，则需要它，但如果你保证你的线程总是按顺序访问这些变量，它们没有指定这是否也是必要的。

我还看到当前的 netty 编解码器不使用 volatile 属性，那么我们可以在 OrderedMemoryAwareThreadPoolExecutor 之后使用 then 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:12:10.987

是的.. 即使使用 ExecutionHandler，也不需要 volatile 或同步。

# java - 如何使用 JMagick 获取 RGB 值？

> ID：11653914
> 
> 赞同：1
> 
> 时间：2012-07-25T16:03:10.647
> 
> 标签：java, image, imagemagick, rgb, jmagick

如何使用 JMagick（imagemagick 的包装器）获取 RGB 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T18:55:02.667

如果要在命令行上获取特定图像的“红色”值，可以使用以下语法。对于 JMagick API，只需查看如何将其转换为 API 调用：

```
 identify  -format "%[fx:s.p{111,111}.r]"  input.jpg
   0.427451 
```

*   `fx:`是 ImageMagick 的*特殊效果图像运算符*，它允许您从图像中查询各种属性，在数学表达式中使用它们并将它们应用到图像上；

*   `s.`告诉 ImageMagick 选择序列中的当前图像以应用 fx 操作；

*   `p{111,111}.`告诉 fx 使用第 111 列第 111 行的像素进行此操作（如果您跳过像素坐标，fx 默认为`p{0,0}`，即左上角的像素；

*   `r`查询选中像素的*红色*通道；

*   `0.427451`结果是：这意味着它是通道最大值的 42.7451%（8 位为 255，16 位为 65535）。

* * *

```
 identify  -format "%[fx:s.p{111,111}.z]"  input.jpg
   8 
```

*   `z`查询用于像素的通道深度。结果是 8。

您还可以在将图像转换为 HSL 颜色系统后查询像素的色相、饱和度和亮度值：

```
identify  -colorspace hsl  -format "%[fx:s.p{111,111}.hue]"  input.jpg 
   0.538012

identify  -colorspace hsl  -format "%[fx:s.p{111,111}.saturation]"  input.jpg 
   0.53271

identify  -colorspace hsl  -format "%[fx:s.p{111,111}.lightness]"  input.jpg 
   0.790196 
```

# c# - 调用具有私有构造函数和私有静态方法的类？

> ID：11653915
> 
> 赞同：0
> 
> 时间：2012-07-25T16:03:15.193
> 
> 标签：c#

我创建了一个包含 6 个私有静态方法和一个私有构造函数的类。私有构造函数运行所有静态方法。我想在另一个类中调用该类的私有构造函数，但我做不到。我只想在不创建任何实例的情况下运行这个类一次。该类填充了一个小型数据库，除了调用它一次外，我不需要它。

我可以将它放入一个方法中，但我不想将不相关的代码放入我的主类中。我希望一切都更加分离。我可以用一个公共构造函数来做它并创建一个类的实例，但我不明白为什么在不需要实例时我必须这样做。

有没有一种好方法可以完成我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:12:24.040

为什么不用公共静态方法替换您的私有构造函数？

您的原始代码：

```
public class DatabaseInitializer
{
    private DatabaseInitializer()
    {
        init1();
        init2();
        ...
    }

    private static void init1() { ... }
    private static void init2() { ... }
    ...
} 
```

您的新代码

```
public class DatabaseInitializer
{
    public static void Init() 
    { 
        init1();
        init2();
        ...
    }

    private static void init1() { ... }
    private static void init2() { ... }
    ...
} 
```

比你说的：

```
Main()
{
    DatabaseInitializer.Init();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:14:33.603

单例将准确地创建一个实例。如果您不想要实例，只需公开一个静态方法。如果您想确保仅调用一次，请在您的类中创建一个静态计数器或布尔值，以阻止该方法被第二次调用而没有实例调用构造函数是不可能的，即使它是公共的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:23:02.087

> 我想在另一个类中调用该类的私有构造函数

--

> 我想要的只是运行这个类一次而不创建任何实例

如果您不想创建类的实例，则不要使用构造函数。我想你只是想使用一个类来“分离”一些代码？为此使用静态方法。

或者如果这段代码应该运行一次并调用一些静态方法。您可以使用静态ctor

```
class B
{
  static B() {
    //this stuff called when you create this class or when a static member is referenced

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:09:11.997

1.  恕我直言，这不是主类的无关代码。这取决于这些方法。
2.  你可以在类中只有一个公共方法。然后依赖类可以调用该方法，该方法又调用所有私有方法进行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:38:21.470

如果要从另一个类调用它或其成员，则需要创建一个公共方法。

如果你不想要这个类的任何实例，那么你应该创建一个可以调用的公共静态方法。

公共静态方法应该有一个静态布尔值。调用时，它会检查该值，如果未设置，则切换静态布尔值（因此它知道之前已调用过），然后调用所有需要运行一次且仅一次的私有静态方法。

如果您只需要对数据库进行一次初始化，而不是每次都进行一次，那么您应该运行静态代码并检查数据库以查看它是否已经初始化。您可以通过一个包含可以测试的布尔值的单行表来使这变得特别容易。只需更新初始化代码以在数据库初始化时设置该值，并让您的启动代码测试该值以确定其值以及基于该值采取的操作。

# python - Python最简单的方法来求和元组列表的列表交集

> ID：11653917
> 
> 赞同：8
> 
> 时间：2012-07-25T16:03:19.833
> 
> 标签：python, list, set, intersection

假设我有以下两个元组列表

```
myList = [(1, 7), (3, 3), (5, 9)]
otherList = [(2, 4), (3, 5), (5, 2), (7, 8)]

returns => [(1, 7), (2, 4), (3, 8), (5, 11), (7, 8)] 
```

我想设计一个合并操作，通过检查元组的第一个元素上的任何交叉点来合并这两个列表，如果有交叉点，则添加每个有问题的元组的第二个元素（合并两者）。操作后我想根据第一个元素进行排序。

我也发布这个，因为我认为这是一个非常常见的问题，有一个明显的解决方案，但我觉得这个问题可能有非常pythonic的解决方案；）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T16:08:37.123

使用字典获取结果：

```
result = {}
for k, v in my_list + other_list:
    result[k] = result.get(k, 0) + v 
```

如果你想要一个元组列表，你可以通过`result.items()`. 结果列表将按任意顺序排列，但当然您可以根据需要对其进行排序。

（请注意，我重命名了您的列表以符合 Python 的样式约定。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T16:12:06.710

使用默认字典：

```
from collections import defaultdict
results_dict = defaultdict(int)
results_dict.update(my_list)
for a, b in other_list:
    results_dict[a] += b
results = sorted(results_dict.items()) 
```

注意：排序序列时，按序列中`sorted`的第一项排序。如果第一个元素相同，则比较第二个元素。您可以`sorted`使用`key`关键字参数提供一个函数进行排序：

```
results = sorted(results_dict.items(), key=lambda x: x[1]) #sort by the 2nd item 
```

或者

```
results = sorted(results_dict.items(), key=lambda x: abs(x[0])) #sort by absolute value 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T16:10:08.010

使用 itertools 的方法：

```
>>> myList = [(1, 7), (3, 3), (5, 9)]
>>> otherList = [(2, 4), (3, 5), (5, 2), (7, 8)]

>>> import itertools
>>> merged = []
>>> for k, g in itertools.groupby(sorted(myList + otherList), lambda e: e[0]):
...    merged.append((k, sum(e[1] for e in g)))
... 
>>> merged
[(1, 7), (2, 4), (3, 8), (5, 11), (7, 8)] 
```

这首先将两个列表连接在一起并对其进行排序。[itertools.groupby](http://docs.python.org/library/itertools.html#itertools.groupby)返回合并列表的元素，按元组的第一个元素分组，因此它只是将它们相加并将其放入合并列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T16:23:55.427

```
>>> [(k, sum(v for x,v in myList + otherList if k == x)) for k in dict(myList + otherList).keys()]
[(1, 7), (2, 4), (3, 8), (5, 11), (7, 8)]
>>> 
```

为 Python2.7 和 3.2 测试
`dict(myList + otherList).keys()`返回一个包含一组键的可迭代对象，用于连接列表
`sum(...)`需要 'k' 再次循环通过连接列表并添加元组项 'v' 其中 k == x

...但额外的循环增加了处理开销。使用 Sven Marnach 提出的显式字典可以避免这种情况。

# java - android 应用程序中关于 sharedpreferences 声明的 NullPointerException？

> ID：11653918
> 
> 赞同：0
> 
> 时间：2012-07-25T16:03:23.073
> 
> 标签：java, android

所以，制作一个应用程序。我添加了大量新代码，现在它的 FC 已打开 :(

这是日志猫：

```
07-25 16:59:12.490: D/AndroidRuntime(26121): Shutting down VM
07-25 16:59:12.495: W/dalvikvm(26121): threadid=1: thread exiting with uncaught exception (group=0x40a641f8)
07-25 16:59:12.495: E/AndroidRuntime(26121): FATAL EXCEPTION: main
07-25 16:59:12.495: E/AndroidRuntime(26121): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.liamwli.smsbusy/com.liamwli.smsbusy.Sms_busyActivity}: java.lang.NullPointerException
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1993)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.os.Looper.loop(Looper.java:137)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread.main(ActivityThread.java:4575)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at java.lang.reflect.Method.invokeNative(Native Method)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at java.lang.reflect.Method.invoke(Method.java:511)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at dalvik.system.NativeStart.main(Native Method)
07-25 16:59:12.495: E/AndroidRuntime(26121): Caused by: java.lang.NullPointerException
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.preference.PreferenceManager.getDefaultSharedPreferencesName(PreferenceManager.java:371)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.preference.PreferenceManager.getDefaultSharedPreferences(PreferenceManager.java:366)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at com.liamwli.smsbusy.Sms_busyActivity.<init>(Sms_busyActivity.java:23)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at java.lang.Class.newInstanceImpl(Native Method)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at java.lang.Class.newInstance(Class.java:1319)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
07-25 16:59:12.495: E/AndroidRuntime(26121):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1984)
07-25 16:59:12.495: E/AndroidRuntime(26121):    ... 11 more
07-25 16:59:12.940: I/dalvikvm(26121): threadid=3: reacting to signal 3
07-25 16:59:12.950: I/dalvikvm(26121): Wrote stack traces to '/data/anr/traces.txt'
07-25 16:59:13.040: I/dalvikvm(26121): threadid=3: reacting to signal 3
07-25 16:59:13.045: I/dalvikvm(26121): Wrote stack traces to '/data/anr/traces.txt' 
```

Sms_busyActivity.java 的第 23 行是：

```
SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

我不明白我收到了这个错误。

其余的活动如下（相当大）：

```
package com.liamwli.smsbusy;

import android.app.Activity;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.Toast;
import android.widget.ToggleButton;
import android.content.IntentFilter;
import android.content.SharedPreferences;

public class Sms_busyActivity extends Activity {
    IntentFilter intentFilter;
    ToggleButton endis;
    EditText message;
    Button smessage;
    SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
    SharedPreferences.Editor editor = getPrefs.edit();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Intent i = new Intent("com.liamwli.smsbusy.PREFS");
        // startActivity(i);
        setContentView(R.layout.main);

        endis = (ToggleButton) findViewById(R.id.enableddis);

        smessage = (Button) findViewById(R.id.savemess);

        message = (EditText) findViewById(R.id.message);

        // ---intent to filter for SMS messages received---
        intentFilter = new IntentFilter();
        intentFilter.addAction("SMS_RECEIVED_ACTION");

        endis.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub
                Toast.makeText(Sms_busyActivity.this, "App state changed",
                        Toast.LENGTH_LONG).show();
                if (endis.isChecked()){
                    editor.putBoolean("enabled", true);
                    editor.commit();
                }else {
                    editor.putBoolean("enabled", false);
                    editor.commit();
                }

                editor.putString("message", message.getText().toString());
                editor.commit();

            }
        });

        smessage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                editor.putString("message", message.getText().toString());
                editor.commit();

            }
        });

    }

    @SuppressWarnings("deprecation")
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (Integer.parseInt(android.os.Build.VERSION.SDK) < 5
                && keyCode == KeyEvent.KEYCODE_BACK
                && event.getRepeatCount() == 0) {
            Log.d("CDA", "onKeyDown Called");
            onBackPressed();
        }

        return super.onKeyDown(keyCode, event);
    }

    public void onBackPressed() {
        Log.d("CDA", "onBackPressed Called");

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        return super.onCreateOptionsMenu(menu);
    }

} 
```

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:06:42.247

Move the following code to within the `onCreate()` method.

```
getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

The reason being, in your existing code, you're using the context (`getBaseContext()`) before it could be fully created by a call to `super.onCreate()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:08:41.497

您需要拆分该声明，以便仅在 onCreate() 中或之后才能真正访问首选项，因为只有这样您才能获得有效的上下文。尝试从以下更改声明：

```
SharedPreferences getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

至

```
SharedPreferences getPrefs; 
```

并将以下内容添加到您的 onCreate()

```
getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:08:03.993

您不应尝试在实例变量声明中初始化 SharedPreferences。您应该在 onCreate 或其他方法中执行此操作。它正在尝试获取活动上下文的首选项，该首选项在调用 onCreate 之前尚不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:10:16.803

在 Activity 初始化之前不要`SharedPreferences.Editor editor;`初始化，所以我建议你将初始化语句`getPrefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());`移到 onCreate() 方法中。

# php - 重新格式化文件的内容

> ID：11653920
> 
> 赞同：0
> 
> 时间：2012-07-25T16:03:25.337
> 
> 标签：php, foreach, while-loop, fopen, explode

我有一个名为“data.txt”的文件。在这个文件中，有 30 行长度相同的字符串。它看起来像这样：

```
2QA4ZRDUT
IDVLTLZSC
4GYC3HCMV
1W6409JD5
70P7U66TE 
```

... 等等。

我现在要做的是重新格式化这些行。我想要一行 5 个字符串，用“;”分隔。之后，我想要一个新行和下一个 5。最后，它应该如下所示：

```
2QA4ZRDUT;IDVLTLZSC;4GYC3HCMV;1W6409JD5;70P7U66TE;
NGN1TGF6G;JWVI7LSIZ;U99TMVXXK;KLBDMRPQV;MEFKLUO3; 
```

...依此类推，直到文件的全部内容都像这样重新格式化。

在过去的几个小时里，我一直试图通过使用 for、foreach 和 while 循环来实现这一点，但我只设法得到一条线。我希望有人可以帮助我，因为我对 PHP 没有那么丰富的经验。

这是“data.txt”的内容：

```
2QA4ZRDUT
IDVLTLZSC
4GYC3HCMV
1W6409JD5
70P7U66TE
OG2JBBZF6
5391PHOVW
ZAJ3OZ4H2
GMOB9E9X7
Q8U4C8ZK1
0WDZLRWWJ
N487W3S24
PKXQFFEK3
NSMKC29IB
HOLI1T2ZB
DVPIVLLLS
FH7RSZWTM
9VSUWPZEX
NM6ZWV19I
NGN1TGF6G
JWVI7LSIZ
U99TMVXXK
KLBDMRPQV
MEFKLUO3L
LICFIK24W
ELGPLCK51
QQS4SOJV1
KJ2UVTU1B
FLQ6T7LG6
QJZLAPYN1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:08:36.460

类似的东西：

```
<?php

$oldf=fopen('data.txt','r');
$newf=fopen('data_new.txt','w');
$i=0;
while(!feof($oldf))
{
    $i++;
    $line=fgets($oldf);
    fwrite($newf,$line.';');
    if($i%5==0)
       fwrite($newf,"\n");
}
fclose($oldf);
fclose($newf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:10:22.217

尝试这个：

```
<?php
  $file_name = "test.txt"; // Change file name as needed
    $file_data = file_get_contents($file_name);
    $file_data_array = explode('\n', $file_data);
    $i = 0;
    $new_file_data = "";
    foreach ($file_data_array as $piece)
    {
        $new_file_data .= $piece . ';';
        $i++;
        if ($i % 5 == 0) // Change number of pieces you want on a line as needed
        {
            $new_file_data .= '\n';
        }
    }
    file_put_contents($file_name, $new_file_data);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:12:56.647

这应该这样做：

```
$str = '2QA4ZRDUT
IDVLTLZSC
4GYC3HCMV
1W6409JD5
70P7U66TE
OG2JBBZF6
5391PHOVW
ZAJ3OZ4H2
GMOB9E9X7
Q8U4C8ZK1
0WDZLRWWJ
N487W3S24
PKXQFFEK3
NSMKC29IB
HOLI1T2ZB
DVPIVLLLS
FH7RSZWTM
9VSUWPZEX
NM6ZWV19I
NGN1TGF6G
JWVI7LSIZ
U99TMVXXK
KLBDMRPQV
MEFKLUO3L
LICFIK24W
ELGPLCK51
QQS4SOJV1
KJ2UVTU1B
FLQ6T7LG6
QJZLAPYN1';

$arr = explode(PHP_EOL, $str);
$c = 1;
$str3 = '';
foreach ($arr as $item) {
    $str3.= $item.';';
    if ($c % 5 == 0) {
        $str3.= PHP_EOL;
    }
    ++$c;
}
echo "<p>$str3</p>"; 
```

请注意，您不会在浏览器中看到换行符，但是当您“查看源代码”时它们会很明显。

编辑：我在这里使用 PHP_EOL 而不是 "\n" 作为其他答案的建议。只要 PHP 设置[auto_detect_line_endings](http://ca2.php.net/manual/en/filesystem.configuration.php#ini.auto-detect-line-endings)设置为 true ，这可以确保脚本在任何平台（Win、MacOS 和 *nix）上都能正常工作

# java - 在 Java 中比较 2 个 csv 文件中的 2 列

> ID：11653921
> 
> 赞同：0
> 
> 时间：2012-07-25T16:03:33.617
> 
> 标签：java, csv, compare

我有两个带有主键的 csv，我试图将两个键合并，以便我可以将相关的 csv 与正确的键组合在一起，但是现在我只想比较一列中的内容。我的脑子有点空白，我希望通过代码你能弄清楚我前进的方向。我无法让我的数组真正接收字符串。Java.lang.arrayindexoutofboundsexception

`import java.io.*; import java.util.*;`

 `public class UDC { public void search(String [][] wat, String [][] ud){

```
}

public static void main (String [] args) throws IOException
{
    String [] [] cols = {};
    String [] [] cols1={};
    int row =0;
    int row1 =0;
    int j = 0;

/*Scanner s = new Scanner(new File("Watford Update File.csv"));
Scanner c = new Scanner(new File("udc.csv"));
while (s.hasNextLine()){
    String line = s.nextLine();
    cols =line.split(",");
    System.out.println(cols[0]);*/
    Scanner s = new Scanner(new File("file1.csv"));
    Scanner w = new Scanner (new File("file.csv"));
    while (w.hasNextLine())

    {
        String line1 = w.nextLine();    
        System.out.println(cols);
        //cols[row]=line1.split(",");
        row ++;
        if(!w.hasNextLine()){
        while (s.hasNextLine()){
        String line2 = s.nextLine();
         //cols1[row1]=line2.split(",");
        //put while loop in diffrent method but break

            if(cols[j].equals(cols1[row1]))
            {

                j++;
                row1++;
                System.out.print(cols[j]);
                System.out.print(" ");
                System.out.print(cols1[row1]);
                System.out.println();

            }else{
                row1++;

            }

        }

    }
    }

} 
```` 

`}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:20:16.010

而不是使用数组 for`cols`和`cols1`，您应该使用`List<String[]>`. 此外，您的代码非常混乱，因为比较循环与读取循环交织在一起。最好先简单地读取数据，然后进行比较。

```
public static void main(String [] args)
{
    List<String[]> cols;
    List<String[]> cols1;
    try {
        cols = readFile("udc.csv");
        cols1 = readFile("Watford Update File.csv");
    } catch (IOException e) {
        e.printStackTrace();
        return;
    }
    // loop through array lists to do your comparisons
    // For example, to compare the first column of rows i and j:
    //    cols.get(i)[0].equals(cols1.get(j)[0])
}

private static List<String[]> readFile(String fileName) throws IOException
{
    List<String[]> values = new ArrayList<String[]>();
    Scanner s = new Scanner(new File("udc.csv"));
    while (s.hasNextLine()) {
        String line = s.nextLine();
        values.add(line.split(","));
    }
    return values;
} 
```

# c++ - 显示html页面？

> ID：11653923
> 
> 赞同：0
> 
> 时间：2012-07-25T16:03:36.190
> 
> 标签：c++, windows, user-interface

我想从资源中加载静态网页并将其显示为对话框，不像它在 Internet Explorer 中加载的那样，但如果可能的话，就像没有任何菜单或边框的对话框。我想将此页面用作“GUI”，是的非常疯狂的想法。

有人可以解释我如何实现这一目标吗？（我不希望对我的可执行文件有任何依赖）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:06:56.007

您可以使用这样的网络浏览器：

[http://www.adp-gmbh.ch/win/misc/mshtml/index.html](http://www.adp-gmbh.ch/win/misc/mshtml/index.html)

[http://support.microsoft.com/kb/315617/es](http://support.microsoft.com/kb/315617/es)

# c# - 将对象转换为重载方法的适当类型

> ID：11653928
> 
> 赞同：0
> 
> 时间：2012-07-25T16:04:06.353
> 
> 标签：c#, casting, polymorphism

假设我有一个重载的方法，例如`void PrintInfo(Person)`and`void PrintInfo(Item)`等等。我尝试通过传入一个对象来调用这些方法。

我想知道为什么当我这样做时它会给我一个错误；不是所有的类都继承自 Object 吗？我想避免执行 if/switch 语句，在该语句中我在调用适当的方法之前检查 Object 的类型。

你们认为在这种情况下最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:06:24.443

All `Person`s are `object`s , but not all `object`s are `Person`s. Because of this you can pass a `Person` to a method that accepts an `object` but you can't pass an `object` to a method that requires a `Person`.

It sounds like you have some common bit of functionality between various objects that you want to use. Given this, it would be best to find either a common ancestor that has all of the functionality that you need, or an interface that they all implement (that again provides everything that you need).

In the case of printing, you may just need the `ToString` method. In that case, you can just have the method accept an `object` and call `ToString` on it. (That's what many print methods do, such as `Console.WriteLine`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:11:02.123

您需要了解，因为 C# 是一种静态类型语言（禁止`dynamic`），所以选择的特定重载（称为*重载解析*）是在编译时确定的，而不是在运行时确定的。这意味着编译器需要能够明确地确定您的参数是什么类型。考虑：

```
Object foo;
foo = "String";
foo = 5;
PrintInfo(foo); // Which overload of printinfo should be called?  The compiler doesn't know! 
```

有几种方法可以解决这个`foo`问题 - 类型的制作是一种`dynamic`- 这将导致在编译时选择正确的重载。这样做的问题是您失去了类型安全性——如果您没有为该类型提供适当的重载，您的应用程序仍将编译，但当您尝试打印不受支持的类型的信息时会崩溃。

可以说更好的方法是确保它`foo`始终是正确的类型，而不仅仅是`Object`.

正如@Servy 建议的那样，另一种方法是将行为附加到类型本身。例如，您可以创建一个接口`IHasPrintInfo`：

```
public interface IHasPrintInfo { String PrintInfo { get; } } 
```

并在您可能打印其信息的所有项目上实现该接口。然后你的 PrintInfo 函数可以只接受一个 IPrintInfo：

```
public void PrintInfo(IPrintInfo info) { 
    Console.WriteLine(info.PrintInfo);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:11:53.043

这里它对编译器有歧义；编译器无法确定您打算调用哪个版本的方法（Person/Item）。

# php - 在 PHP 中逐位解包

> ID：11653931
> 
> 赞同：1
> 
> 时间：2012-07-25T16:04:13.287
> 
> 标签：php, byte, bit, unpack

我想通过一个奇怪的 8-8-8-7 位序列将二进制字符串解压缩到一个数组中。

对于正常的 8-8-8-8 序列，我可以轻松地做这样的事情：

```
$b=unpack('C*',$data);
for ($i=0,$count=sizeof($b); $i < $count; $i+=4) {
$out[]=array($b[$i+1],$b[$i+2],$b[$i+3],$b[$i+4]);
} 
```

这会给我一个 2D 字节数组，按 4 分组。

但由于第四个是 7 位，我就是想不出任何合适的东西。

你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:57:20.753

不确定我是否完全理解，但如果您以未对齐/未填充的格式打包数据，您将需要使用某种比特流。

这是一个简单的类。理想情况下，它会是某种接受资源流的迭代器，但直接通过字符串显示如何做到这一点更简单：

```
class BitStream
{
  private $data, $byte, $byteCount, $bytePos, $bitPos;
  private $mask = [0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x80];

  public function __construct($data)
  {
    $this->data = $data;
    $this->byteCount = strlen($data);
    $this->bytePos = 0;
    $this->bitPos = 7;

    $this->byte = $this->byteCount ? ord($data[0]) : null;
  }

  // reads and returns 1 bit. null on no more bits
  public function readBit()
  {
    if ($this->byte === null) return null;

    // get current bit
    $bit = ($this->byte & $this->mask[$this->bitPos]) >> $this->bitPos;

    if (--$this->bitPos == -1)
    {
      // advance to next byte 
      $this->bitPos = 7;
      $this->bytePos++;
      $this->byte = $this->bytePos < $this->byteCount ? ord($this->data[$this->bytePos]) : null;
    }

    return $bit;
  }

  // reads up to $n bits, where 0 < $n < bit length of max int
  // returns null if not enough bits left
  public function readBits($n)
  {
    $val = 0;
    while ($n--)
    {
      $bit = $this->readBit();
      if ($bit === null) return null;      

      $val = ($val << 1) | $bit;
    }

    return $val;
  }
} 
```

然后使用它：

```
$bs = new BitStream($data);

$out = [];
while (true)
{
  $a = $bs->readBits(8);
  $b = $bs->readBits(8);
  $c = $bs->readBits(8);
  $d = $bs->readBits(7);

  if ($d === null) break; // ran out of data

  $out[] = [$a, $b, $c, $d];
} 
```

如果该函数被优化为一次读取最多 8 位，则该`readBits()`函数会更快，但按原样理解要简单得多。

# html - 在 CSS 中如何让三个容器根据内容自动调整高度

> ID：11653933
> 
> 赞同：3
> 
> 时间：2012-07-25T16:04:16.130
> 
> 标签：html, css

我拥有的是三个动态添加内容的容器。基本上我希望这三行只占据浏览器窗口的高度。但我希望他们根据内部内容自动调整大小。

因此，如果它们都具有相同数量的内容，则它们中的每一个都有大约 33% 的高度，然后是溢出：auto。或者，如果一个容器没有内容，而另外两个容器有很多内容，则没有内容的容器的高度应为 0，另外两个应为 50%。

此外，不需要支持 IE - 它是用于内部产品的，并且只使用 chrome 和 firefox 浏览器，所以如果有 css3 解决方案，那没关系。

所以这是我现在所拥有的示例，但**它无法**按我的意愿工作：

HTML：

```
<div class="container">

    <div class="one">
     <!-- dynamically added content -->
    </div>

    <div class="two">
     <!-- dynamically added content -->
    </div>

     <div class="three">
     <!-- dynamically added content -->
    </div>

</div> 
```

CSS：

```
.container {
  position: absolute;
  top: 0;
  bottom: 0;
}

.one,
.two,
.three {
  overflow: auto;
  max-height: 33%; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:46:31.057

高度是根据内容自动设置的。你有一个最大高度设置，所以你永远不会得到 50% 的高度。容器元素需要说一种尺寸还是可以随内容而变化？

# android - Android 版 WebView 中的滚动性能 - Jelly Bean 4.1.x

> ID：11653936
> 
> 赞同：2
> 
> 时间：2012-07-25T16:04:22.063
> 
> 标签：android, cordova, android-webview

我正在开发一个 PhoneGap 项目，我注意到在 Jelly Bean (4.1.x) 中，滚动缓慢且缓慢。我尝试将 transform3d 添加到可滚动元素中，但这没有帮助。我无法将 hardwareAccelerated 添加到清单中，因为我们需要支持 2.3.x。

有关如何使 WebView 在 Android 上更好地滚动的任何建议？我已经剥离了所有的 CSS 使其成为基本的。

这发生在 PhoneGap 的 2.0.0 上。

您可以在此处观看此视频：[https ://www.dropbox.com/s/j17do2gry8vxhzo/scrollvdeo.mov](https://www.dropbox.com/s/j17do2gry8vxhzo/scrollvdeo.mov)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:06:34.097

我想通了你的问题。您需要将应用程序的目标设置为 3.0，然后将我们清单文件中的 minSDK 属性设置为您最低支持的操作系统。然后将 android:hardwareAccelerated=true 添加到清单中。像魅力一样工作！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T09:27:42.833

对我来说导致此 BUG 的原因是我使用了 phonegap android 示例 (/phonegap/lib/android/example)，它在 AndroidManifest.xml 中的错误位置具有 hardwareAccerlerated=true。

它应该在应用程序元素而不是清单元素中

现在这就像一个魅力。

我正在使用 Phonegap 2.1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-07T22:05:45.310

下面的 android 开发者网站也引用了这一点。使用了该属性，效果非常好！

[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

# java - 如何知道 Unix 中正在运行什么类？

> ID：11653938
> 
> 赞同：0
> 
> 时间：2012-07-25T16:04:26.787
> 
> 标签：java, unix, solaris

我有一个通过 unix (Solaris 9) 中的脚本执行的类。在脚本内部，该类正在像这样运行：

```
java -cp $CLASSPATH myPackage.component.MyMainClass $PROPERTIES_PATH/myMainClassProperties.properties 
```

需要监视该 shell 以查看它是正常工作还是失败，并且它还将与不同的参数文件并行运行。所以，我的问题是：

*   *如果我使用top*，我怎么知道正在执行什么类。那可能吗？**
*   有没有办法唯一标识类，这样它在并行运行时就不会崩溃？
*   它会一直显示`myPackage.component.MyMainClass`在进程表中吗？

当我说并行时，我指的是：

```
java -cp $CLASSPATH myPackage.component.MyMainClass $PROPERTIES_PATH/myMainClassProperties.properties 
```

在另一个窗口/会话/作业中

```
java -cp $CLASSPATH myPackage.component.MyMainClass $PROPERTIES_PATH/mySomeOtherProperties.properties 
```

**当我这么说时，是因为 top 显示了这样的内容：

```
PID 用户名 THR PRI NICE SIZE RES 状态 时间 CPU 命令
8545 蝙蝠侠 47 4 10 190M 112M 睡眠 0:04:00 0.07% java
9022 小丑 91 4 10 286M 211M 睡眠 0:01:00 0.09% java

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:10:03.810

您可以`top`告诉您完整的命令，其中将包括您传递给`VM`.

还将`ps`为您提供完整的命令（带有匹配的参数）。

在我的 debian 中，我可以使用切换开关切换显示的命令`c`（从顶部开始并点击`c`直到它显示整个命令）

因为我单独`ps`使用参数`-ef`(but ) 应该适用于这种情况。`-f`

您可能想阅读和的`man ps`输出`man top`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:59:33.177

可以使用`ptree | grep java`或获取信息`ptree | grep MyMainClass`

它列出了正在执行的进程树以及正在其中运行的命令，例如：

```
13456 克什
    123476 java -cp java -cp /classpath/fullpath myPackage.component.MyMainClass /full/properties/path/myMainClassProperties.properties

```

第一行是一个 shell 脚本，在其中（下一行）调用 java jar。这适用于 Solaris 9。

感谢@Angelo-Neuschitzer 的提醒。

# iphone - 在不触发委托方法的情况下更改 NSManagedObject 属性？

> ID：11653939
> 
> 赞同：2
> 
> 时间：2012-07-25T16:04:29.830
> 
> 标签：iphone, objective-c, ios, core-data

有什么方法（或技巧）可以在不触发和委托方法的情况下修改`NSManagedObject`委托人当前持有的内容？`NSFetchedResultsController``didChangeObject:``controllerWillChangeContent:`

例如， current if I change `myObject.property = @"hello";`，委托方法被触发并对我的表视图进行更新，但我不希望这种情况发生，但仅适用于我明确指定的某些更改，而不是所有更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T18:28:47.907

from的`setPrimitiveValue:forKey:`方法`NSManagedObject`正是这样做的，例如

```
[myObject setPrimitiveValue:@"hello" forKey:@"property"] 
```

或者，使用动态生成的访问器方法：

```
[myObject setPrimitiveProperty:@"hello"] 
```

但是您应该阅读该方法的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/setPrimitiveValue%3aforKey%3a)，因为有一些“特殊注意事项”。

另一种方法可能是创建[“嵌套托管对象上下文”](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html#//apple_ref/doc/uid/TP40010637-CH1-SW1)并对该子上下文进行所有修改。只有在保存子上下文时，更改才会传播到父上下文。

# objective-c - iOS 应用程序 - 刷新 applicationDidBecomeActive 上的最后一个 webView

> ID：11653940
> 
> 赞同：0
> 
> 时间：2012-07-25T16:04:31.940
> 
> 标签：objective-c, ios, xcode, webview

我有一个单一视图的 iOS 应用程序，其中包含一个显示我的网站的 webView。当应用程序从多任务返回时（当它作为活动应用程序返回时）我希望 webView 获取它当前所在的 URL，并在 webView 中刷新（或重新加载）当前页面（我在想使用这种方法）：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    NSLog(@"applicationDidBecomeActive");
} 
```

我该怎么做？我需要订阅某种通知吗？请帮我指出正确的方向，并提供一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:15:37.440

有一些需要注意的地方是：

1.  应用程序应允许用户在后台模式下运行。您可以在***info.plist中定义它***

2.  在视图控制器中实现[**UIWebViewDelegate 。**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)有一种方法：***webViewDidStartLoad:*** 在该方法中获取当前 url

    NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"window.location"]; （有关更多详细信息，请参阅[此](https://stackoverflow.com/questions/2491410/get-current-url-of-uiwebview)。）

3.  将此 url 字符串保存到某个位置，并在重新启动您的应用程序时调用您在问题中提到的方法。在该方法中，使用此 url 字符串加载您的 Web 视图。

希望这是您所需要的。

享受编码:)

# c# - 如果实现对象不可序列化，如何序列化基础对象？

> ID：11653941
> 
> 赞同：4
> 
> 时间：2012-07-25T16:04:32.027
> 
> 标签：c#, .net, serialization

我正在尝试序列化如下类型：

```
 public UsersPanel(UsersVM userVm)
    {
        var serialized = Serialize(userVm);
    }

    public static string Serialize(ViewModelBase instance)
    {
        var formatter = new BinaryFormatter();
        using (var stream = new MemoryStream())
        {
            formatter.Serialize(stream, instance); // breaks here
            return Convert.ToBase64String(stream.ToArray());
        }
    } 
```

其中`UsersVM`定义为

```
public class UsersVm : ViewModelBase {} 
```

并`ViewModelBase`定义为

```
[Serializable]
public class ViewModelBase {} 
```

这给了我以下错误：

> 类型“UsersVM”未标记为可序列化。

如果我通过将对象`userVm`传递给`ViewModelBase`（标记为可序列化的）*对象*`Serialize(ViewModelBase instance)`，它为什么告诉我这个？

我会认为在将其传递给方法时，传递`UsersVM`将被基类型取代。`ViewModelBase``ViewModelBase`

如何序列化 ViewModelBase？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:09:32.617

**解决问题**

您也必须将派生类标记为可序列化

```
[Serializable]
public class UsersVm : ViewModelBase {} 
```

**为什么你必须这样做**

BinaryFormatter 在序列化时查看对象实例的*实际类型*。强制转换只是告诉编译器将实例*视为*不同的类型，但实际上并没有将实例更改为该类型。

**边注**

*我最初倒读了这个问题，发现反问题的答案很有趣，并且可能对其他人有用......*

请注意，如果情况相反（基类未标记为可序列化并且您无权访问源代码），您仍然可以实现您的目标。

> 子类可以实现ISerializable，使用反射读取和序列化基类的字段，反序列化时再次使用反射设置这些字段

[http://msdn.microsoft.com/en-us/magazine/cc163902.aspx#S14](http://msdn.microsoft.com/en-us/magazine/cc163902.aspx#S14)

本文提供了一个代码示例，其中包括一个实用程序来帮助实现此方法。

# ruby - 匹配不包含特定单词的字符串

> ID：11653942
> 
> 赞同：26
> 
> 时间：2012-07-25T16:04:34.530
> 
> 标签：ruby, regex, match

我正在使用该`match`方法使用 ruby​​，并且我想将不包含特定字符串的 URL 与正则表达式匹配：例如：

```
http://website1.com/url_with_some_words.html
http://website2.com/url_with_some_other_words.html
http://website3.com/url_with_the_word_dog.html 
```

我想匹配不包含 word 的 URL `dog`，所以应该匹配第一个和第二个

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-07-22T21:06:03.560

只需使用负前瞻`^(?!.*dog).*$`。

**解释**

*   `^`: 匹配行首
*   `(?!.*dog)`: 否定前瞻，检查单词 dog 是否不存在
*   `.*`：匹配所有内容（在这种情况下，换行符除外）
*   `$`: 匹配行尾

[在线演示](http://rubular.com/r/hGzndqgBeg)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T16:06:55.043

只需使用

```
string !~ /dog/ 
```

选择您需要的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-05T13:26:59.027

实际上有一种非常简单的方法可以做到这一点，使用 select。

```
array_of_urls.select { |url| !url.match(/dog/) } 
```

这将返回一个 url 的数组，其中不包含单词“dog”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-11T16:03:13.230

您可以使用的另一件事是：

```
!url['dog'] 
```

用你的例子：

```
array = []
array << 'http://website1.com/url_with_some_words.html'
array << 'http://website2.com/url_with_some_other_words.html'
array << 'http://website3.com/url_with_the_word_dog.html'

array.select { |url| !url['dog'] } 
```

您也可以拒绝*包含*以下内容的网址`'dog'`：

```
array.reject { |url| url['dog'] } 
```

# headless-browser - 具有良好 Javascript 支持的多线程无头浏览器

> ID：11653946
> 
> 赞同：3
> 
> 时间：2012-07-25T16:04:43.990
> 
> 标签：headless-browser

我知道许多无头浏览器，但我需要知道那些可以在多个线程中安全使用的浏览器（可以从多个线程创建新实例），因为我正在编写一个网络爬虫。

HtmlUnit 没有可靠的 javascript 支持。

QtWebKit QWebPage 不能从多个线程创建。

PhantomJS 是基于命令行的，必须启动我不想要的新进程。

Awesomium 也不能在多线程中运行。

您是否知道任何具有可靠 javascript 支持并且可以从多个线程毫无问题地运行的无头浏览器？

我不介意编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T20:57:45.310

你应该看看[zombie.js](http://zombie.labnotes.org/)。

# android - requestFeature() 必须在添加错误之前调用

> ID：11653947
> 
> 赞同：0
> 
> 时间：2012-07-25T16:04:49.547
> 
> 标签：android, android-dialog

这个我完全不明白，我正在尝试显示一个没有这样标题的自定义对话框

```
d.setContentView(R.layout.incident_dialog_layout);
d.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

这样做给了我一个错误

```
07-25 11:56:23.737: E/AndroidRuntime(15680): android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-25 11:56:23.737: E/AndroidRuntime(15680):    at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:215)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.app.Dialog.requestWindowFeature(Dialog.java:1031)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at ecm2.android.MainActivity.createNewDialog(MainActivity.java:1121)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at ecm2.android.MainActivity$ListViews.onListItemClick(MainActivity.java:614)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.widget.AbsListView$1.run(AbsListView.java:3529)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.os.Handler.handleCallback(Handler.java:615)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.os.Looper.loop(Looper.java:137)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at android.app.ActivityThread.main(ActivityThread.java:4745)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at java.lang.reflect.Method.invokeNative(Native Method)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at java.lang.reflect.Method.invoke(Method.java:511)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-25 11:56:23.737: E/AndroidRuntime(15680):    at dalvik.system.NativeStart.main(Native Method) 
```

好的，很简单，只需更改请求的位置即可。所以我然后把它改成这个

```
d.requestWindowFeature(Window.FEATURE_NO_TITLE);
d.setContentView(R.layout.incident_dialog_layout); 
```

对话框一直有效，直到我返回并单击创建对话框的项目时开始新活动时出现此错误

```
07-25 11:51:19.182: E/AndroidRuntime(15376): android.util.AndroidRuntimeException: requestFeature() must be called before adding content
07-25 11:51:19.182: E/AndroidRuntime(15376):    at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:215)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.app.Dialog.requestWindowFeature(Dialog.java:1031)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at ecm2.android.MainActivity.createNewDialog(MainActivity.java:1120)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at ecm2.android.MainActivity$ListViews.onListItemClick(MainActivity.java:614)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.support.v4.app.ListFragment$2.onItemClick(ListFragment.java:58)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.widget.AbsListView$1.run(AbsListView.java:3529)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.os.Handler.handleCallback(Handler.java:615)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.os.Handler.dispatchMessage(Handler.java:92)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.os.Looper.loop(Looper.java:137)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at android.app.ActivityThread.main(ActivityThread.java:4745)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at java.lang.reflect.Method.invokeNative(Native Method)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at java.lang.reflect.Method.invoke(Method.java:511)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-25 11:51:19.182: E/AndroidRuntime(15376):    at dalvik.system.NativeStart.main(Native Method) 
```

那么它想让我做什么，因为我在设置内容后无法拥有它，也不能在我发送内容之前拥有它？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:17:10.653

您收到该错误是因为您第二次设置对话框布局时（即当您从第二个活动返回时），您的屏幕中已经有了内容。

因此，第二次调用 requestWindowFeature 会导致错误。

您必须将该语句移至 onCreate() 方法，因此只调用一次 requestFeature，确保在调用之前不添加任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:20:17.660

根据对该问题的第二条评论，我猜您是在 onStart 或 onResume 方法中调用 requestFeature() 。

requestFeature 和 setContentView 应该在 onCreate() 中调用。如果您在其他任何地方执行此操作，它将再次被调用并导致您的应用程序抛出错误。

# jpa - JPQL 是否支持查询中相同字段的 SUM 和算术函数？

> ID：11653950
> 
> 赞同：0
> 
> 时间：2012-07-25T16:04:55.317
> 
> 标签：jpa, eclipselink, jpql

我的查询是这样的：

```
select sum(m.value * m.currency) from bill m 
```

它失败了，给了我这个例外：

> java.lang.IllegalArgumentException：在 EntityManager 中创建查询时发生异常：异常描述：语法错误解析查询语法错误 [*]。

我正在使用eclipselink。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:38:29.110

规范将 SUM 表达式定义如下：

```
aggregate_expression ::=
  { AVG | MAX | MIN | SUM } ([DISTINCT] state_field_path_expression) |
  COUNT ([DISTINCT] identification_variable | state_field_path_expression |
         single_valued_object_path_expression) 
```

所以不，您的查询不是有效的 JPQL。不过，HQL（Hibernate JPQL 变体）支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:43:54.730

最新的 EclipseLink 版本（或最有可能在 2.2 之后的任何版本）中应该支持此查询。你用的是什么版本？

# google-app-engine - Google App Engine 和 Python 2.7 上的 CouldNotFindModuleError

> ID：11653953
> 
> 赞同：0
> 
> 时间：2012-07-25T16:05:09.303
> 
> 标签：google-app-engine, python-2.7

还有另一个问题，但我没有发现它有用。

我已经在 Windows 7 上安装了带有 Python 2.7 的 Google App Engine SDK 1.7。

当我从 Google App Engine Launcher 启动应用程序时，日志中出现此错误

```
CouldNotFindModuleError 
```

整个日志在这里：

[http://pastebin.com/EwbpMcx2](http://pastebin.com/EwbpMcx2)

**好的，它找不到模块，但是什么模块？**我该如何解决这个问题？

我的应用很简单，一个hello world

**应用程序.yaml**

```
application: alleudacity
version: 1
runtime: python27
api_version: 1
threadsafe: no
handlers:
- url: /.*
  script: helloworld.py 
```

**helloword.py**

```
print 'Content-Type: text/plain'
print ''
print 'Hello, world!' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T13:23:09.873

我想我看错了踪迹。你缺少一些模块。查看 google 代码，它应该会打印出您缺少的模块的名称。但是由于我没有看到它，您可以在错误应该出现的位置之前强制一个断点，并查看缺少的模块的名称是什么。通过编辑代码 (C:\Program Files\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py) 并添加强制断点

```
import pdb
pdb.set_trace() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:09:53.733

看起来您正在使用库 elixir 和 paramiko，这在谷歌应用引擎上默认不可用。

您可以不使用它们（测试这是否真的是问题的好方法），或者如果它们是纯 python 库，请将它们安装在您的实际项目文件夹中。

当您部署到应用引擎时，只会上传项目文件夹中的文件 - 安装在系统其他位置的库将不可用。dev_appserver 修改您的环境，以便您在本地看到这些故障，而不是让事情在本地正常工作并在部署后中断。

# java - Apache Karaf OSGi 应用结构

> ID：11653954
> 
> 赞同：1
> 
> 时间：2012-07-25T16:05:17.457
> 
> 标签：java, osgi, cxf, apache-camel, apache-karaf

我需要创建一个应用程序并将其部署到 Karaf 中。但是我需要使用camel组件和java组件（简单的spring bean）。流程应如下所示：

```
WebService(not matter for me) -> camel-component -> spring-bean -> camel-component -> WebService(not matter for me). 
```

这只是一个简单的路由。但我需要的是 karaf 接受和部署的 OSGi 包的目录结构。

对于前我有：

```
su-camel
  -src
    -main
      -resources
        -META-INF
          xbean.xml (spring-bean)
    -test
      -java
      -resources

su-bean
  -src
    -main
      -java
      -resources
        -META-INF
          xbean.xml (spring-bean)
    -test
      -java
      -resources 
```

我正在使用 maven 打包所有内容，那么我应该在 OSGi 捆绑`.jar`文件中保留什么目录结构才能正确部署应用程序？如您所见，模块中有两个`src`目录`su-camel`，`su-bean`模块。

我知道 servicemix 接受`.zip`所有组件都添加了上述结构的文件。karaf 支持这样的结构吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:53:27.027

最简单的解决方案是只创建一个包含 bean 和骆驼路线的捆绑包。通常不需要从 bean 中拆分路由。如果您出于某种原因需要拆分它，那么只需使用两个捆绑包。

为了使部署更容易，您可以使用 karaf 功能文件，在其中列出两个捆绑包以及最终它们的进一步依赖项。Karaf 还支持可以包含许多包的 .kar 文件。如果您的 karaf 服务器无法访问 maven 存储库，则可以使用 kar 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:44:04.410

正确的 OSGi 解决方案是创建两个包，每个项目一个包并同时部署它们。如果您不想这样做，可以使用项目清单中的 Embed-Dependency 属性来包含依赖项（camel）包。这将只创建一个捆绑包供您部署

# cakephp - 您的服务器上未正确配置 URL 重写。1) 帮我配置 2) 我不/不能使用 URL 重写

> ID：11653959
> 
> 赞同：0
> 
> 时间：2012-07-25T16:05:33.297
> 
> 标签：cakephp

我得到了 cakePHP，但出现以下错误。

您的服务器上未正确配置 URL 重写。1) 帮我配置 2) 我不/不能使用 URL 重写

奇怪的是，它在我的笔记本电脑上运行良好，而在我的台式电脑上却无法运行。我从笔记本电脑复制整个内容并将其粘贴到桌面上，然后显示该错误。

有什么想法可以解决吗？我按照步骤解决，但这是同样的问题。我的 cakePHP 版本是 2.0 以上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T04:18:01.650

您可以先检查您的重写模式是否在`apache/conf/httpd.conf`文件中。检查`httpd.conf`文件中的以下代码：

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

在此行中删除哈希并重新启动 Apache 服务器：

```
#sudo service apache2 restart 
```

之后，您可以在 cakephp`.htaccess`文件中设置以下代码：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /YourPath/
    RewriteRule    ^$    app/webroot/      [L]
    RewriteRule    (.*)  app/webroot/$1    [L]       
 </IfModule> 
```

# java - 从小程序中检索悬停内的字符串值

> ID：11653963
> 
> 赞同：0
> 
> 时间：2012-07-25T16:05:52.433
> 
> 标签：java, html, hyperlink, applet

我在 IE 中运行一个从外部 VLX 文件生成的小程序。

VLX 文件正在从数据库中提取数据，当用户在运行小程序时将鼠标悬停在特定图标上时，会出现悬停在表格上，其中包含四个字符串，更具体地说，其中一个字符串是 URL。

查看源代码时无法看到这些字符串值，因为它们是由 VLX 生成然后由小程序使用的，因此您可以看到的唯一代码是小程序代码。

是否可以检索这些字符串？因为我希望能够使用 URL 打开一个新网页。

我有它，所以当用户双击特定图标时，会出现一个警报以显示我在页面上的位置，并且在此事件中我需要使用 URL 值。

这是不可能的，`document.getElementById`因为这些值在`html`.

# iphone - 重新加载 UITableView 在 IOS5 中不起作用

> ID：11653965
> 
> 赞同：0
> 
> 时间：2012-07-25T16:05:57.837
> 
> 标签：iphone, uitableview, reload

UITableview reloadData 函数没有调用 cellforRowAtIndexPath 方法。以下是我尝试过的事情：

1.  称呼`[self.myTableView reloadData];`
2.  也调用`reloadData`方法`ViewWillAppear`。
3.  `self.myTableView.delegate=self;`也写过`self.myTableView.datasource=self`。
4.  Also I have test using NSLog that number of rows are updating properly.
5.  Data source and delegate are connected in storyboard.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:34:56.570

你实现了这个方法吗？

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1; //Return the number of sections you want
} 
```

这很容易忘记，因为默认情况下它返回 0。

如果你不这样做，tableview 认为它没有部分并且不要求任何行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:13:10.920

你的观点符合`UITableViewDelegate`和`UITableViewDatasource`吗？

它是否至少实现了这些协议中所有必需的方法？另外，不用说`self.myTableView`，你可以说`myTableView`如果你在课堂上工作。

这听起来很傻，但你忘了保存你的故事板吗？我不止一次这样做过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:05:38.533

我猜你还没有在你的 .h 文件中声明委托。

例子。

```
@interface ClassName:UIViewController <UITableViewDelegate> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T14:44:17.333

确保设置表视图的委托：

```
tableView.delegate = _an_object_that_conforms_to_UITableViewDelegate_; 
```

这通常是您在其中声明表视图的视图控制器，因此您将拥有：

```
tableView.delegate = self; 
```

只需确保包含表视图并充当其委托的视图控制器将自己声明为 UITableViewDelegate：

```
@class MyViewController <UITableViewDelegate> {

  UITableView *tableView;
  ... 
```

# php - Opencart content_bottom function

> ID：11653973
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:06:35.403
> 
> 标签：php, str-replace, opencart

In OpenCart (1.5.x) the variable `<?php echo $content_bottom; ?>` spits out much content including this message:

```
Welcome to My Site
Welcome to MySite.com, a company dedicated in giving you the best service while offering you the finest products – from genuine laptop batteries, laptop ac adapters/chargers, to LCD monitors – that are 100% genuine and proven to be of high quality that ensure you nothing but the best performance needed in order to give you the greatest satisfaction possible. 
```

I want the variable only to remove that message only and continue to spit the rest of the information out (without removing whole contents)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:41:32.607

只需打开您的**search.tpl**（我认为这就是我在网上找到您的真实网站时所在的位置）

**/catalog/view/theme/default/template/product/search.tpl**

查找`<?php echo $content_bottom; ?>`并替换为：

```
<?
$my_message="<p>Welcome to My Site, Welcome to MySite.com, a company dedicated in giving you the best service while offering you the finest products – from genuine laptop batteries, laptop ac adapters/chargers, to LCD monitors – that are 100% genuine and proven to be of high quality that ensure you nothing but the best performance needed in order to give you the greatest satisfaction possible.</p>"
$spitFooter=str_replace($my_message, "", $content_bottom);
echo $spitFooter;
?> 
```

# html - 从 HTML 部署 JApplet

> ID：11653975
> 
> 赞同：0
> 
> 时间：2012-07-25T16:06:39.723
> 
> 标签：html, japplet

我试图一步一步地遵循 JavaTutorial 但我没有明白...帮我弄清楚这个例子：

我的 JApplet：

```
package test;

import javax.swing.JApplet;

public class Test extends JApplet {
    public void start() {
        System.out.println("Hello World");
    }
} 
```

和我的 HTML：

```
<applet archive="ofek.jar" class="test.Test" width="100" height="100">
</applet> 
```

我在与 HTML 文件相同的目录中有 ofek.jar 文件

还需要做什么？因为当我双击 HTML 文件时，我看到一个白色的空白屏幕（期待 Hello World 字符串......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:36:33.507

在尝试将其粘贴到网页之前，它是否按照您自己的方式运行？因为 System.out.println() 会打印到控制台，所以请检查是否有打印出来的东西。尝试使用

```
public void start(){
  try{
     SwingUtilities.invokeAndWait(new Runnable(){
       public void run(){
         JLabel lbl = new JLabel("Hello World");
         add(lbl);
       }
     });
  }
  catch(Exception e){
     System.out.println(e);
  }
} 
```

代替您当前的 start() 方法

# css - css sprite 活动状态仍显示在浏览器后退按钮上

> ID：11653986
> 
> 赞同：1
> 
> 时间：2012-07-25T16:06:58.737
> 
> 标签：css, css-sprites

我正在尝试将 CSS 精灵用于导航栏。经过大量的互联网研究，我想我已经确定了“最简单”的方法。除了单击浏览器的“后退”按钮外，一切似乎都可以正常工作。在 IE (8.0.6001.18701) 中，活动状态为“卡住”（看起来按钮被按下）。在 Firefox (14.0.1) 中，悬停状态为“卡住”。我可以忍受 Firefox 的问题，因为一旦鼠标从后退按钮移开，它就会消失，而不是 IE 的问题。我目前在头文件中有导航栏，我将其与 Includes 一起使用以保持简单和一致。这是模板html。我将它用于我的所有页面。（当我解决了这个问题时，我将实际进入其余的身体）

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<link rel="stylesheet" type="text/css" href="DS.css">
</head>
<body>
<div id="centerpage">
<table border="0" width="100%" cellspacing="0" cellpadding="0" id="table1">
<tr>
<td>
<!--webbot bot="Include" U-Include="Nav_Includes/Header.htm" TAG="BODY" --></td>
</tr>
<tr>
<td>Enter page data here.<br>
<hr width="770" size="1">
<span id="timestamp">Page last updated: 
<!--webbot bot="Timestamp" S-Type="EDITED" S-Format="%m/%d/%Y %I:%M %p" --></span></td>
</tr>
<tr>
<td>
<!--webbot bot="Include" U-Include="Nav_Includes/Footer.htm" TAG="BODY" --></td>
</tr>
</table>
</div>
</body>
</html> 
```

这是header.htm：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Dolphin Storage Header</title>
<link rel="stylesheet" type="text/css" href="../DS.css">
</head>
<body>
<img border="0" src="../images/header.jpg" width="760" height="101" align="center">
<p><a class="navHome" href="../index.htm"></a>
<a class="navUnits" href="../units.htm"></a>
<a class="navSpecials" href="../specials.htm"></a>
<a class="navAbout" href="../about.htm"></a>
<a class="navContact" href="../contact.htm"></a></p>
</body>
</html> 
```

该css文件：

```
body {
font-family: Arial, Helvetica, Sans-serif;
color: #000000;
text-align:center; /* Fix for IE not centering webpage */
background-color: #ffe670;
}
#centerpage {
width: 770px; 
margin: 0 auto;   /* Top & Bottom = 0, Right & Left = auto to center the page horizontally */
text-align:left;  /* 2nd part of IE fix for centering webpage */
}
/* Navagation bar, using 'sprite' images */ 
a.navHome {
display: block;
float: left;
width: 160px;
height: 30px;
background-image: url('Nav_Buttons/Home.jpg');
background-repeat: no-repeat;
background-position; 0 0;
}
a.navHome:hover {
background-position: 0 -30px;
}
a.navHome:active {
background-position: 0 -60px;
}

a.navUnits {
display: block;
float: left;
width: 150px;
height: 30px;
background-image: url('Nav_Buttons/Units.jpg');
background-repeat: no-repeat;
background-position; 0 0;
}
a.navUnits:hover {
background-position: 0 -30px;
}
a.navUnits:active {
background-position: 0 -60px;
}

a.navSpecials {
display: block;
float: left;
width: 150px;
height: 30px;
background-image: url('Nav_Buttons/Specials.jpg');
background-repeat: no-repeat;
background-position; 0 0;
}
a.navSpecials:hover {
background-position: 0 -30px;
}
a.navSpecials:active {
background-position: 0 -60px;
}

a.navAbout {
display: block;
float: left;
width: 150px;
height: 30px;
background-image: url('Nav_Buttons/About.jpg');
background-repeat: no-repeat;
background-position; 0 0;
}
a.navAbout:hover {
background-position: 0 -30px;
}
a.navAbout:active {
background-position: 0 -60px;
}

a.navContact {
display: block;
float: left;
width: 160px;
height: 30px;
background-image: url('Nav_Buttons/Contact.jpg');
background-repeat: no-repeat;
background-position; 0 0;
}
a.navContact:hover {
background-position: 0 -30px;
}
a.navContact:active {
background-position: 0 -60px;
}

#timestamp {
font-family: Arial, Helvetica, Sans-serif;
color: #000000;
font-size: xx-small;
}

H5 {
font-family: Georgia, "Times New Roman", Times, serif;
color: #035f8e;
} 
```

Sprites：（不会让新用户发布图片，抱歉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:30:01.473

在使用[lvha 原则](http://meyerweb.com/eric/css/link-specificity.html)定义个体和状态之前，使用`:link`和伪类来设置所有常见的默认状态：`:visited``:hover``:active`

```
a.navUnits:link, a.navUnits:visited, a.navSpecials:link, a.navSpecials:visited, a.navAbout:link, a.navAbout:active, a.navContact:link, a.navContact:visited, a.navHome:link, a.navHome:visited { background-position: 0 0; } 
```

# hadoop - 在 Hadoop 上处理大科学数据

> ID：11653987
> 
> 赞同：3
> 
> 时间：2012-07-25T16:06:59.787
> 
> 标签：hadoop, mapreduce, hdf5, netcdf

我目前正在启动一个名为“使用 Hadoop 进行时间序列挖掘算法的云计算”的项目。我拥有的数据是大小超过 TB 的 hdf 文件。在 hadoop 中，我知道我们应该将文本文件作为输入以进行进一步处理（map-reduce 任务）。所以我有一个选择，我将所有 .hdf 文件转换为文本文件，这将花费大量时间。

或者我找到了一种如何在 map reduce 程序中使用原始 hdf 文件的方法。到目前为止，我还没有成功找到任何读取 hdf 文件并从中提取数据的 java 代码。如果有人对如何使用 hdf 文件有更好的了解，我将非常感谢这样的帮助。

谢谢阿尤什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:01:28.293

以下是一些资源：

*   [SciHadoop](http://users.soe.ucsc.edu/~alkis/papers/sc11_scihadoop.pdf)（使用 netCDF，但可能已经扩展到 HDF5）。
*   您可以使用[JHDF5](https://wiki-bsse.ethz.ch/pages/viewpage.action;jsessionid=2DF2048AFA49926DA292581C0B4FF953?pageId=26609113)或较低级别的官方[Java HDF5 接口](http://www.hdfgroup.org/hdf-java-html/)从 map-reduce 任务中的任何 HDF5 文件中读取数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T16:59:52.737

对于您的第一个选项，您可以使用[HDF 转储](http://theory.asu.ru/~ivan/devel/hdfdump)之类的转换工具将 HDF 文件转储为文本格式。否则，您可以使用 Java 库编写程序来读取 HDF 文件并将其写入文本文件。

对于您的第二个选项，SciHadoop 是一个很好的例子，说明了如何从 Hadoop 中读取科学数据集。它使用 NetCDF-Java 库来读取 NetCDF 文件。Hadoop 不支持文件 IO 的 POSIX API。因此，它使用额外的软件层将 NetCDF-java 库的 POSIX 调用转换为 HDFS(Hadoop) API 调用。如果 SciHadoop 尚不支持 HDF 文件，您可能会走上更艰难的道路并自己开发类似的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:34:32.970

如果您没有找到任何 java 代码并且可以使用其他语言，那么您可以使用 hadoop 流。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-10T17:11:28.293

SciMATE [http://www.cse.ohio-state.edu/~wayi/papers/SciMATE.pdf](http://www.cse.ohio-state.edu/~wayi/papers/SciMATE.pdf)是一个不错的选择。它是基于 MapReduce 的一个变体开发的，它已被证明比 Hadoop 更有效地执行许多科学应用程序。

# javascript - 在 xsl 选择语句中，我如何测试 js 变量的值

> ID：11653990
> 
> 赞同：0
> 
> 时间：2012-07-25T16:07:24.867
> 
> 标签：javascript, html, sharepoint, xslt

我正在使用 xsl 文件在 SharePoint 中工作，并且有一个 xsl 选择语句，我希望帮助有条件地显示来自我的 xml 的记录。在下面的代码中，我测试`DAS_ID`等于`*someValue*`

如果我硬编码一个值，例如`<xsl:when test="DAS_ID = 5 ">`但希望比较 . 我想要做的是`*value*`用一个javascript变量替换......或者至少是那个js变量的当前值。这可能吗？有什么建议么？

```
 <xsl:choose>
  <xsl:when test="DAS_ID = *someValue* ">
   <td bgcolor="#ff00ff">
   <xsl:value-of select="HTML_ID"/>
   </td>
  </xsl:when>
<xsl:otherwise>
  <td>not matched</td>
  </xsl:otherwise>
</xsl:choose> 
```

非常感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T03:20:03.290

```
What I'm trying to do is replace *value* with a javascript variable...or at least the current value of that js variable. Is this possible? any suggestions? 
```

如果从 Javascript 代码调用 XSLT 转换时 Javascript 变量在范围内（否则问题没有任何意义），**只需将 Javascript 变量的值作为参数传递给转换并在转换内部作为外部访问它（全球）`xsl:param`。**

# zend-framework - 使用 Zend 框架的 PHPUnit 中的“连接太多”错误

> ID：11653992
> 
> 赞同：2
> 
> 时间：2012-07-25T16:07:30.347
> 
> 标签：zend-framework, phpunit

我正在使用 PHPUnit 对基于 Zend 框架的项目进行单元测试，似乎测试太多了。

**症状**：我正在编写另一个测试并对此特定功能启动此测试导致测试失败并出现错误

**堆栈跟踪**：

```
Zend_Db_Adapter_Exception: SQLSTATE[08004] [1040] Too many connections in /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Db/Adapter/Pdo/Abstract.php on line 144

Call Stack:
    0.0002     639184   1\. {main}() /Users/MyUser/pear/bin/phpunit:0
    0.0036    1243552   2\. PHPUnit_TextUI_Command::main() /Users/MyUser/pear/bin/phpunit:46
    0.0036    1244568   3\. PHPUnit_TextUI_Command->run() /Users/MyUser/pear/share/pear/PHPUnit/TextUI/Command.php:130
    0.0036    1244568   4\. PHPUnit_TextUI_Command->handleArguments() /Users/MyUser/pear/share/pear/PHPUnit/TextUI/Command.php:139
    0.0202    5745936   5\. PHPUnit_Util_Configuration->getTestSuiteConfiguration() /Users/MyUser/pear/share/pear/PHPUnit/TextUI/Command.php:671
    0.0202    5747448   6\. PHPUnit_Util_Configuration->getTestSuite() /Users/MyUser/pear/share/pear/PHPUnit/Util/Configuration.php:768
    0.0539    6143840   7\. PHPUnit_Framework_TestSuite->addTestFiles() /Users/MyUser/pear/share/pear/PHPUnit/Util/Configuration.php:848
    0.8321   26889016   8\. PHPUnit_Framework_TestSuite->addTestFile() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:419
    0.8329   27067008   9\. PHPUnit_Framework_TestSuite->addTestSuite() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:392
    0.8329   27068424  10\. PHPUnit_Framework_TestSuite->__construct() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:318
    0.8554   27706232  11\. PHPUnit_Framework_TestSuite->addTestMethod() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:214
    0.8555   27706384  12\. PHPUnit_Framework_TestSuite::createTest() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:831
    0.8556   27719664  13\. ControllerTestCaseAbstract->__construct() /Users/MyUser/pear/share/pear/PHPUnit/Framework/TestSuite.php:554
    0.8586   27775696  14\. Zend_Application_Bootstrap_BootstrapAbstract->bootstrap() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/tests/ControllerTestCaseAbstract.php:24
    0.8586   27775696  15\. Zend_Application_Bootstrap_BootstrapAbstract->_bootstrap() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Application/Bootstrap/BootstrapAbstract.php:586
    0.8586   27775696  16\. Zend_Application_Bootstrap_BootstrapAbstract->_executeResource() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Application/Bootstrap/BootstrapAbstract.php:629
    0.8586   27776040  17\. Bootstrap->_initDb() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Application/Bootstrap/BootstrapAbstract.php:669
    0.8590   27782440  18\. Zend_Db_Adapter_Abstract->getConnection() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/application/Bootstrap.php:97
    0.8590   27782440  19\. Zend_Db_Adapter_Pdo_Mysql->_connect() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Db/Adapter/Abstract.php:315
    0.8591   27782440  20\. Zend_Db_Adapter_Pdo_Abstract->_connect() /Users/MyUser/workspaces/gitrepo/myprojectcom/webapp/library/Zend/Db/Adapter/Pdo/Mysql.php:109 
```

为避免怀疑，这是我的数据库引导功能：

```
protected function _initDb() {
    $databaseConfig = $this->_getDbConfig(); //loaded from an .ini file
    $resource = Zend_Db::factory($databaseConfig);
    $resource->getConnection();
    Zend_Db_Table::setDefaultAdapter($resource);
    return $resource;
} 
```

**各种其他元素**：

*   评论一个类的测试方法让我可以毫无问题地添加这个新的测试用例，所以问题不是来自我特定的新案例，而是来自完成的测试量
*   如您所见，我有一个非常基本的 _initDb 引导函数
*   在不使用“--filter”启动整个测试套件时也会失败
*   我的环境是：Mac OS X 10.7.3 Lion，XAMPP 的 MySQL 服务器 5.1.44，通过 PEAR 安装的 PHPunit 3.6.11，PHP 5.3.8
*   我确实在拆除时关闭了我的连接[编辑]

**我在找什么**：任何解释，最重要的是一种解决方法

**已找到解决方法**：在 /Applications/XAMPP/etc/my.cnf 的 [mysqld] 中添加脏修复：

```
set-variable=max_connections=200 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:11:22.793

您应该使用[Zend_Db_Adapter](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.closing)的 closeConnection() 。

当您编写 Web 应用程序时，（通常）不需要显式关闭连接，因为您的脚本启动、执行少量查询并结束清除所有打开的连接。在你的测试中，你很可能有一些长时间运行的脚本，它打开了许多连接，但由于脚本没有结束，这些连接不会被清除，所以当你不需要它们时，你必须明确地关闭它们。