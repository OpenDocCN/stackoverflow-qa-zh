# StackOverflow 问答 000868000-000868999

# web-config - web.config 文件的轻量级编辑器

> ID：868006
> 
> 赞同：3
> 
> 时间：2009-05-15T10:49:07.350
> 
> 标签：web-config, text-editor

我正在为 web.config 文件寻找一个轻量级的文本编辑器，它具有颜色语法突出显示（如在 Visual Studio 中）。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T10:51:44.270

您可以使用[记事本++](http://notepad-plus.sourceforge.net/uk/site.htm)。当您使用 web.config 时，选择 XML 语言以获得颜色语法突出显示。看起来像[这样](http://notepad-plus.sourceforge.net/commun/screenshots/scrsh_lexerXML.gif)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-15T10:53:57.587

很明显，您可以使用任何编辑器（例如 EditPlus 或 Notepad++），但如果您正在寻找“知道”什么是 web.config 的轻量级编辑器客户端，请查看 ASphere

[http://blogs.msdn.com/publicsector/archive/2007/12/07/free-utility-web-config-editor-with-a-great-ui.aspx](http://blogs.msdn.com/publicsector/archive/2007/12/07/free-utility-web-config-editor-with-a-great-ui.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-25T22:55:15.560

我使用ASPhere。这很棒！

> 关于ASPhere ...
> 
> ASphere 是一个免费软件实用程序，主要用于创建和修改 ASP.NET 的配置文件。但它们不仅是 ASphere 可以使用的 web.config 文件，您还可以使用它来查看和编辑普通的 XML 文件和纯文本文件。

[http://www.asphere.cz/en/index.html](http://www.asphere.cz/en/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T10:58:56.607

我为此使用[Notepad2](http://www.flos-freeware.ch/notepad2.html)以及许多其他编辑目的。免费软件，完全可用，快速和轻便 - 满足您的所有要求。强烈推荐。

马克

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-09T13:25:13.587

在记事本++

设置 -> 样式配置 -> 在左侧列表框中选择 XML -> 在底部的“用户分机：”文本框设置“配置”。

完毕

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T11:22:28.393

[Scintilla](http://www.scintilla.org/) [SciTE](http://www.scintilla.org/SciTE.html)是超轻量级的，并且可以进行语法`XML`着色。

> SciTE 是一个基于 SCIntilla 的文本编辑器。最初是为了演示 Scintilla 而构建的，它已经发展成为一个普遍有用的编辑器，具有构建和运行程序的功能。

[下载页面](http://www.scintilla.org/SciTEDownload.html)说：

> 称为 Sc1 (530K) 的单个文件可执行文件不需要任何 DLL 或属性文件，因为它们链接到可执行文件中。

# css - 如何在 Firefox 中使用和 CSS 将填充应用于列？

> ID：868009
> 
> 赞同：5
> 
> 时间：2009-05-15T10:50:32.947
> 
> 标签：css, html-table, padding

例子：

```
<style type="text/css">
    table {
        border: 1px solid red;
        border-collapse: collapse;
        text-align: left;
    }
    #col-1 {
        padding-left: 20px;
        background-color: tan;
    }
    #specific-cell {
        padding-left: 20px;
    }
</style>
<table>
    <col id="col-1">
    <col id="col-2">
    <tr>
        <th>foo</th>
        <th>bar</th>
    </tr>
    <tr>
        <td>data1</th>
        <td>data2</th>
    </tr>
    <tr>
        <td id="specific-cell">data1</th>
        <td>data2</th>
    </tr>
    <tr>
        <td>data1</th>
        <td>data2</th>
    </tr>
</table> 
```

颜色应用于列，但不应用于填充。如果我直接在单元格上使用类/ID，它就可以工作。

我是被迫使用它们，还是有办法利用`<col>`标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T11:55:51.167

它不应该工作，至少在 CSS 2.1 中是这样。您可以查看[CSS 2.1 表格列规范](http://www.w3.org/TR/CSS21/tables.html#columns)。

您可以使用`:first-child`and来规避这种情况`+`：

```
/* first column */
td:first-child {
    padding-left: 20px;  
}

/* second column */ 
td:first-child + td {
    padding-left: 10px;  
}

/* third columns */ {
td:first-child + td + td {
    padding-left: 0;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T10:58:43.287

这适用于我在 IE 中使用以下 DOCTYPE

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
```

和风格

```
#col-1 {
    padding-left: 50px;
    background-color: tan;
}
#col-2 {
    padding-left: 100px;
    background-color: lightgreen;
} 
```

您使用的是什么文档类型...以及您使用的是什么浏览器...

嗯...刚刚检查似乎在 Firefox 中不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T20:17:26.040

亚历克斯的答案对我有用，除了它对于很多列的可扩展性不高，而且很快变得难以阅读。我最终`:nth-of-type(n)`改用了，但是这个选择器是在 CSS3 中引入的。

选择器： `:nth-of-type(n)`
示例： `p:nth-of-type(2)`
结果：选择作为其父元素`<p>`的第二个元素的每个元素`<p>`

例子：

```
/*column 1*/
#myTable td:nth-of-type(1)
{
    padding-left: 20px;
    background-color: tan;
}
/*column 2*/
#myTable td:nth-of-type(2)
{
    padding-left: 10px;
} 
```

# iphone - How can i find out the accelerometer direction?

> ID：868012
> 
> 赞同：1
> 
> 时间：2009-05-15T10:51:55.220
> 
> 标签：iphone, objective-c

I doing a sound application on accelerometer.Its play different sound for movement by calculating accelerometer value.But how can i find the accelerometer direction that the user move x-axis plus or minus and y-axis plus or minus.How can i find this value on accelerometer.

Please give some instruction or helping code or project.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-01T16:41:29.840

我认为你需要磁力计方向（至少给你一个你可以随时比较的方位），以及使用上面提到的向量数学。这篇文章在解释如何添加向量方面做得更好（第一篇文章通过说它“很难”来掩盖最可能的情况）......

[http://blog.dotphys.net/2008/09/basics-vectors-and-vector-addition/](http://blog.dotphys.net/2008/09/basics-vectors-and-vector-addition/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-01T17:24:52.717

您必须使用向量来表示它，下面有一个委托方法，详细说明了您需要做什么。

现在我还没有过多地看 API，但我相信你的方向向量是从加速度计返回给你的。

有一个**委托**方法可以返回您需要的值。以下代码可能对您应该[在此处查看](http://iphonesdkdev.blogspot.com/2008/06/uiaccelerometer-sample-code.html)的教程有所帮助：

```
- (void)acceleratedInX:(float)xx Y:(float)yy Z:(float)zz
{
    // Create Status feedback string
    NSString *xstring = [NSString stringWithFormat:
    @"X (roll, %4.1f%%): %f\nY (pitch %4.1f%%): %f\nZ (%4.1f%%) : %f",
    100.0 - (xx + 1.0) * 100.0, xx,
    100.0 - (yy + 1.0) * 100.0, yy,
    100.0 - (zz + 1.0) * 100.0, zz
    ];
    self.textView.text = xstring;

    // Revert Arrow and then rotate to new coords
    float angle = atan2(xx, yy);
    angle += M_PI / 2.0;

    CGAffineTransform affineTransform = CGAffineTransformIdentity;
    affineTransform = CGAffineTransformConcat( affineTransform,       CGAffineTransformMakeRotation(angle));
    self.xarrow.transform = affineTransform;
}

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    [self acceleratedInX:acceleration.x Y:acceleration.y Z:acceleration.z];
} 
```

还有一篇易于阅读的文章[在此处清楚地解释了它以及示例代码](http://www.tuaw.com/2007/09/10/iphone-coding-using-the-accelerometer/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T10:55:32.700

You need to perform a [vector addition](http://www.glenbrook.k12.il.us/GBSSCI/PHYS/Class/vectors/u3l1b.html) and calculate the Summation of 2 vectors to get the resultant vector. The above article explains all the common methods of calculating it. But doing it in Programmatically you just have to apply Pythagoras theorem and Tan theta = b/a

# php - 最好的 PHP 下载，以保持我所有的选择开放？

> ID：868026
> 
> 赞同：0
> 
> 时间：2009-05-15T10:54:25.543
> 
> 标签：php, windows-vista, installation, development-environment

过去，我在 windows 上使用 WAMPserver 为我解析 PHP。这是一个预配置的包，专注于使用 MySQL。

当我尝试运行 PostgreSQL 时，我收到错误消息，指出我的 PHP 版本未编译为与 PostgreSQL 一起使用。

所以，我最近卸载了 WAMP 以及与之相关的所有内容。我已经下载了带有openSSL的Apache 2.2.11，以管理员身份安装（你知道，以管理员身份运行命令提示符，cd到下载完成的目录并执行它，所以安装是以管理员身份完成的）。

就是这样。我现在安装了 Apache，“它可以工作”出现了，所以我就这么远了。

现在我想知道，我是下载 exe 并安装，还是 zip 或其他东西。确保我系统上的 PHP 可以处理我可以扔给它的所有东西的最佳做法是什么？

此外，首先是 PHP，或者首先是 MySQL/Postgre。最后，PEAR 呢？我需要安装 PEAR，这在 Windows 上不是标准的。我猜 PHP 下载中的 pear.bat 文件会为我做这件事吗？

编辑：我看到一票接近，但没有评论为什么。这让我想知道那些如此懒惰和粗鲁的人是如何获得这么多积分的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T11:00:12.300

我建议下载 zip 包，因为配置 php 并不是那么困难，它允许您根据需要添加功能。

至于是先安装 php 还是 MySQL/PostgreSQL，- 并不重要。您可以按任何顺序安装它们。

您对 PEAR 的猜测非常正确

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:04:31.960

我以前没有使用过 wamp，所以我不能对此发表评论

但是我确实使用听起来非常相似的xampp

在 xampp 中，如果我想启用 postgres 支持，我编辑 php.ini 文件并取消注释 ini 文件的 postgres 部分，与我需要的任何扩展名相同

如果您遇到困难，也许这可能是您可以尝试的替代方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T11:15:21.030

有很多方法可以设置 HTTP 服务器/PHP/数据库机器。有时您的开发设置的行为会与实时服务器的不同。

我建议找出您的网络主机正在使用的设置，然后获取一个尽可能接近的 vmware[设备映像，并使用它的包管理器获取任何其他软件（这比在 Windows 上安装东西更容易）。](http://www.vmware.com/appliances/)

Setup a file sharing link between the VM and the host, make sure you can view the VM's port 80 in a browser running in your host OS and you're set.

# svn - 检查 svn 存储库 url 是否不存在

> ID：868033
> 
> 赞同：50
> 
> 时间：2009-05-15T10:57:13.803
> 
> 标签：svn, command-line

我正在编写一个脚本，它将根据用户提供的名称在存储库中添加一个新项目。其中一部分涉及检查存储库中是否不存在同名的 url。

在存储库中，我们团队的所有项目都存储在

**[https://developernetwork.repo.net/svn/Projects/](https://developernetwork.repo.net/svn/Projects/)**

假设用户想要调用项目“计算器”并运行脚本。在这种情况下，我们需要确保存储库中不存在以下内容

**[https://developernetwork.repo.net/svn/Projects/Calculator/](https://developernetwork.repo.net/svn/Projects/Calculator/)**

有没有我可以用来完成的 svn 命令？不幸的是，我根本看不到可以在 svn 文档 ( [http://svnbook.red-bean.com/en/1.0/svn-book.html](http://svnbook.red-bean.com/en/1.0/svn-book.html) ) 中使用的适当命令。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2010-08-17T09:20:05.103

我不会检查返回字符串，而是检查返回码：

两个都

```
svn ls REPOSITORY/PATH 
```

和

```
svn info REPOSITORY/PATH 
```

如果一切正常则返回 0，如果出错则返回 1；您可以快速查看：

```
echo $? 
```

所以在 bash 脚本中只需执行以下操作：

```
error=$?
if [ $error -ne 0 ]; then
      YOUR ERROR HANDLING
fi 
```

就像一种享受！

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2009-05-15T11:07:16.167

你可以使用

```
svn ls https://developernetwork.repo.net/svn/Projects/Calculator/ 
```

它会告诉您存储库（目录）是否存在。

**更新**

对于包含许多文件的目录，请使用：

```
svn ls http://server/svn/foo --depth empty 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-15T11:37:01.913

要接收有关任何现有存储库的信息（例如，用于可能丰富错误消息），您还可以使用

```
svn info https://developernetwork.repo.net/svn/Projects/Calculator/ 
```

对于一个不存在的项目，它只会返回

```
svn: Could not open the requested SVN filesystem 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-28T04:17:31.597

我面临上述问题，我一路尝试。对我不起作用..如果我们使用不在 svn 中的路径访问 svn，它会因错误而失败，并且 shell 脚本会中断。

我没有访问未知路径，而是获取父文件夹的目录列表并检查匹配的是否包含。

从您的父目录中获取所有项目（如果您想找到特定的标签，那么您的父目录路径应该是`https://developernetwork.repo.net/svn/Projects/Calculator/tags`）

```
projects=$(svn ls https://developernetwork.repo.net/svn/Projects/) 
```

然后检查您的项目文件夹是否存在。请记住在您的项目名称之后**添加。`/`**

```
projectName="Calculator/"
for i in $projects; do 
    if [ "$i" == "$projectName/" ];
        then
        echo Project Exist
        else
        echo Project does not exist
    fi
done 
```

简单的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-17T12:20:10.017

我会对现有答案发表评论，但我没有足够的声誉。

我想查看文件是否已成功导入，所以我尝试了“svn info”和“svn ls”与“echo $?”。当我使用“svn ls”时，我只能得到一个零/非零返回码：“svn info”总是返回零。

这是 Redhat RHEL6 上的 subversion 1.5.5。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-21T09:38:37.503

就像@A Scott 所说，`echo $?`不能用来知道 URL 是否正确（我在 Mac OS 10.11 和 SVN 客户端 1.9.5 上）。

对于潜在的未来读者，我使用此解决方法：

```
content=$(svn info $SVN_TAG_URL)

if [[ -z $content ]]; then
    echo "The SVN URL doesn't exist"; exit
fi 
```

# iphone - iphone内存管理

> ID：868034
> 
> 赞同：0
> 
> 时间：2009-05-15T10:57:21.213
> 
> 标签：iphone

1.UIImageView *img1=[[UIImageView alloc]initwithImage:[UIImage imageNamed:@"1.png"]];

2.UIImageView *img2=[[UIImageView alloc]initwithImage:[UIImage imageNamed:@"2.png"]];

a) img1.image = [UIImage imageNamed:@"2.png"];

```
b) [img1 setImage:img2]; 
```

哪种方式在 a 和 b 中使用最少的内存？为什么？

如果我需要多次执行此操作，您建议采用哪种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T11:39:02.097

b）因为您正在创建对现有对象的引用，但它们都将指向“2.png” 在 a）您正在创建一个对象的新实例，该实例恰好指向同一个文件，但它已被分配作为单独的内存空间。

# web-services - 如何使用 JAXB2 和 Spring-WS 处理 rpc/literal webservice

> ID：868035
> 
> 赞同：2
> 
> 时间：2009-05-15T10:57:22.150
> 
> 标签：web-services, soap, wsdl, jaxb, spring-ws

我们需要访问一个使用 RPC/literal webservice 样式的遗留 webservice，并为其提供 webservice 端点。如果您使用带有 Spring WebserviceTemplates / WebserviceEndpoints 的文档/文字样式的 Web 服务，则可以使用 JAXB2 来生成 / 编组 / 解组 Web 服务请求。但是你如何用 RPC/literal 风格做到这一点？org.jvnet.jaxb2.maven2:maven-jaxb2-plugin 似乎无法为请求/响应生成 Java 类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-11-26T16:17:59.957

使用 rpc/literal，您将陷入 Axis 1.4 的黑暗时代

Spring-WS 或 Jax-WS 在这里对您没有帮助，因为您专注于 WS-I Basic Profile 兼容的文档/文字服务。

# asp.net - 如何使用 javascript 加载 js 文件

> ID：868038
> 
> 赞同：0
> 
> 时间：2009-05-15T10:58:21.447
> 
> 标签：asp.net, javascript, jquery

我想解决昨天在客户演示期间出现的一个讨厌的问题。我们正在使用 jquery，从 google api 加载它。但是昨天，我们的ISP开始出现问题，没有正确加载jq.js。

所以，我真正想要的是从服务器加载一个本地文件，如果 google api 有一个异常行为（不是它会经常发生，但至少做本地演示我们不会再次受到伤害）。

我知道`<script type="txt/javascript" src="googleapi"> somejs </script>`当 src 中的文件没有加载时执行 somejs，但不知道有什么方法可以在那里加载文件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T11:07:37.180

在里面你可以放以下几行：

```
var localScript = document.createElement("script");
localScript.type = "text/javascript";
localScript.src = "localJQ.js";
document.body.appendChild(localScript); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T11:06:37.447

编辑：我有点紧张。peirix给出的解决方案是正确的。我将只使用他的代码，以免错误的解决方案污染该区域。你可以做

```
var localScript = document.createElement("script");
localScript.type = "text/javascript";
localScript.src = "localJQ.js";
document.body.appendChild(localScript); 
```

动态加载javascript。

但是，如果您的页面中有依赖此脚本的脚本，即使这样也容易出现竞争条件。小心使用。

本演示文稿 - [Even Faster Websites](http://docs.google.com/Present?docid=ddfdgz6g_2056fq35k2fm) - 详细阐述了通过 javascript 加载外部文件的更多技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T11:10:59.700

可能教奶奶吸鸡蛋，但为什么不总是在演示机器上使用本地副本？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T11:17:28.543

这不是直接回答您的问题，但 JQuery 的创建者 John Resig 有一篇有趣的[博客文章](http://ejohn.org/blog/degrading-script-tags/)，介绍了当还有 src 属性时执行脚本标记内容。

# c# - 使用 ReSharper 和新的 XYZ() 智能感知自动完成

> ID：868048
> 
> 赞同：2
> 
> 时间：2009-05-15T11:00:46.197
> 
> 标签：c#, visual-studio-2008, resharper

我对新安装的 Visual Studio 2008（新电脑）和 ReSharper 4.5 有疑问。

**编辑**：问题打开于：http: [//youtrack.jetbrains.com/issue/RSRP-107956](http://youtrack.jetbrains.com/issue/RSRP-107956)。

* * *

我有以下代码：

```
public static TValue GetOrCreate<TKey, TValue>(this IDictionary<TKey, TValue> dictionary, TKey key)
    where TValue: new()
{
    #region Parameter Validation

    if (ReferenceEquals(null, key))
        throw new ArgumentNullException("key");

    #endregion

    TValue result;
    if (dictionary.TryGetValue(key, out result))
        return result;

    result = new <-- problem here
    dictionary.Add(key, result);
    return result;
} 
```

标记为问题的行是我遇到问题的地方。

当我输入这个（| 标记我的光标点）：

```
result = new | 
```

然后我得到一个带有 TValue 的智能感知下拉列表，它被选中。

无论我现在输入什么，这都是我最终的结果：

```
result = new _  (|); 
```

再次，| 标记光标位置。这里有几个问题：

1.  不管我输入什么，在下划线之后插入一个制表符，而不是我上面必须使用的两个空格。
2.  我在完成时关闭了括号和括号的添加，但仍然为这个特定的构造添加了它们
3.  似乎不可能让 ReSharper 插入所选类型，它只是添加了一个下划线（不，下划线不是我说“类型在这里”的方式，它扩展为我上面显示的内容，没有类型，但用下划线 + 制表符代替）

当智能感知启动时，我尝试按下的键：

*   空格（区别：括号看起来像这样：（|），即添加一个空格）
*   标签
*   进入
*   ( - 即左括号
*   T+上述任何一项（即输入 TValue 的第一个字母并希望有帮助，但它没有）

唯一“有帮助”的是，如果我按下切换到更完整智能感知下拉列表的键之一，比如默认的 Alt-Right，那么它只会添加更多我可以选择的东西，仍然选择了 TValue，但现在如果我按 Enter 或 Tab，代码已正确展开。

有谁知道我需要调整什么？

* * *

**编辑**：在我发布之前，我考虑了该方法并决定可能不需要那里的参数验证，所以我把它拿走了，你瞧，现在它自动完成正确。

这只是 ReSharper 中的一个（另一个）错误吗？

请注意，如果我在该行上正确编写代码，即。写 TValue 而不是下划线，项目构建。

* * *

**编辑**：请注意，ReSharper 中没有启用的实时模板，这是我禁用的第一件事，只是为了测试是否有一个奇怪的模板覆盖了我的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T11:33:32.843

自 1.5 版以来，我一直是 ReSharper 用户，并且我注意到了某种模式。首先他们支持 C# 的一个特性，然后他们很好地支持它，然后他们很好地支持它，除了边缘情况，最后他们很好地支持它，除了罕见的错误。

他们在第 2 步，或者可能是第 3 步，使用泛型。`GetOrCreate`他们已经到了他们知道里面是一个类型参数的地步，`TValue`他们甚至现在知道它有一个`new()`约束，所以应该被认为是一个具有构造函数的类型，只要在“new”之后完成。但他们似乎有一个小错误，实际上使该功能顺利运行。

请务必向*他们*报告，以便他们可以进入第 4 步，希望在 C# 4.0 发布之前，通过协变和逆变将他们送回第 2 步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T11:26:00.473

我可以确认这种行为。我得到完全相同的结果。

对我来说，输入两个字符“TV”会有所帮助，然后智能（Tab 或 Ctrl+Space）将扩展为 TValue(|)。但是，当我直接在“电视”上键入“新”并直接输入时，它不起作用。在“新”之后，我必须按 Esc ......确实是一种奇怪的行为......

更新：这是导致此问题的区域......删除该区域（只有两个#region 关键字 - 不是 if 子句）对我有帮助。

# iphone - CGContextRef 中的坐标系是什么样的？

> ID：868052
> 
> 赞同：4
> 
> 时间：2009-05-15T11:02:26.817
> 
> 标签：iphone, cocoa-touch, uikit, core-graphics

我假设原点在左下角，y轴从0开始向上扩展。x轴从0开始向右扩展。

我只是问，因为我从我的绘图代码中得到了非常奇怪的结果......想确保我没有弄错这部分。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-15T13:17:25.387

这取决于使用此上下文的位置。Mac 上用于视图、图层和图像绘制的标准核心图形绘制上下文的左下坐标为 (0,0)。

iPhone 上的标准坐标系是倒置的，UIView 的左上角坐标为 (0,0)。它的支持层也具有那些翻转的坐标，因此绘制到视图的上下文或其层从左上角的 (0,0) 开始。UIImage 上下文也以这种方式翻转，但 PDF 上下文不是。

所有这些都[记录](http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40007072-CH8-SW5)在Apple 的 iPhone 编程指南中的[不同位置](http://developer.apple.com/iphone/library/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/Layers.html#//apple_ref/doc/uid/TP40006082)，但整理起来可能有点混乱。

# c# - 如何使用 C# 解除阻止被阻止的网站？

> ID：868054
> 
> 赞同：1
> 
> 时间：2009-05-15T11:02:54.057
> 
> 标签：c#, file-io, hosts

这是一些从 listview 取消阻止任何网站的代码，但现在我想取消阻止以前被阻止的网站。我怎样才能做到这一点？

```
String path = @"C:\Windows\System32\drivers\etc\hosts";
StreamWriter sw = new StreamWriter(path, true);
String sitetoblock = "\n 127.0.0.1 http://"+listView1.SelectedItems[0].Text+"";
sw.Write(sitetoblock);
sw.Close();
MessageBox.Show(listView1.SelectedItems[0].Text " blocked"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T11:09:02.933

这不是阻止网站的正确方法，但这里是“解除阻止”被您的代码“阻止”的网站的方法很简单：

1.  读取主机文件
2.  通过正则表达式查找网站网址
3.  删除该行
4.  保存文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:12:02.177

您可以使用`System.IO.File`'s `ReadAllLines`&`WriteAllLines`功能，只需去掉要删除的行

```
 string path = @"C:\Windows\System32\drivers\etc\hosts";

        string [] lineArray = System.IO.File.ReadAllLines(path);

        List<string> lines = blah.ToList();

        string sitetoUNblock = string.Format("127.0.0.1 http://{0}", listView1.SelectedItems[0].Text);

        lines.Remove(sitetoUNblock);

        System.IO.File.WriteAllLines(path, lines.ToArray()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T12:34:54.787

代码高尔夫

```
string path = @"C:\Windows\System32\drivers\etc\hosts";
string itemText = listView1.SelectedItems[0].Text;
File.WriteAllLines(path, File.ReadAllLines(path).Where(site=>site!=string.Format("127.0.0.1 http://{0}", itemText))); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-17T02:51:54.687

只需将主机文件替换为原始文件。

如果您想要原始主机文件，那么我可以发送给您。

# visual-studio - .aspx 中的 Intellisense 用于添加到 web.config pages/controls 元素的新标签

> ID：868055
> 
> 赞同：0
> 
> 时间：2009-05-15T11:03:41.167
> 
> 标签：visual-studio, web-config, intellisense

当我在`controls`节点中添加一个元素时，`.aspx`它不会立即反映它。通常，在开发过程中，它会出现（当我以前可以使用它时）。

显然 Visual Studio 在某处使用了缓存。如何刷新该缓存，以便我可以在`.aspx`for 属性中获得智能感知，而不是什么？

```
 <pages>
    <controls>
        <add tagPrefix="asp" namespace="System.Web.DomainServices.WebControls" assembly="System.Web.DomainServices.WebControls"/>
    </controls>
  </pages> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T11:16:43.273

尝试[在 Web.config 中添加程序集](http://msdn.microsoft.com/en-us/library/bfyb45k1.aspx)（假设它与您的主要程序集不同）：

```
<add assembly="System.Web.DomainServices.WebControls, Version=...."/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-05T10:02:26.820

显然，您将在后面的代码中遇到错误。注释导致错误的代码。构建解决方案。然后取消注释代码。构建解决方案。看看它是否工作

# recursion - 限制实现 TCO 的语言中尾递归的递归深度？

> ID：868062
> 
> 赞同：0
> 
> 时间：2009-05-15T11:04:50.667
> 
> 标签：recursion, tail-recursion

在实现尾调用优化的语言中，递归深度的理论/实践限制是什么？（请假设循环函数被正确地尾调用）。

我的猜测是理论上的限制是 NONE，因为没有递归过程，即使它是递归过程。实际限制将是可用的主存储器允许使用的限制。如果我在某处错了，请澄清或更正。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T11:08:07.117

当尾递归函数被优化时，它本质上会变成一个迭代函数。编译器将原始调用的堆栈帧重用于后续调用，因此您不会用完堆栈空间。**如果您没有分配任何堆内存（或任何其他不在堆栈上的内存，就此而言）**，您可以拥有无​​限深（只要您有足够的耐心；））递归（将其视为无限循环；它具有相同的特性）。

总而言之，没有实际限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-11-24T14:43:26.597

除了@Mehrdad Afshari 写的内容之外，我只想指出，尾递归（或更一般地说，尾调用链）可能是无限的，因为否则您无法编写 Web 服务器，这实际上非常重要，操作系统、解释器、REPL 或函数式语言中的任何类型的事件处理循环。

毕竟，操作系统不过是一个无限循环，而用函数式语言编写循环的方法就是使用尾递归。如果尾递归不是无限的，那么循环就不会是无限的。因此，您不仅不能编写操作系统，而且该语言甚至都不是图灵完备的。

基本上，这就是您使用函数式语言编写 Web 服务器的方式：

```
def loop(queue) = {
  // handle first request in queue
  loop(queue)
} 
```

如果没有无限尾递归，这将很快耗尽内存。

# c# - 使用 LINQ to SQL 在数据库之间进行复制

> ID：868063
> 
> 赞同：9
> 
> 时间：2009-05-15T11:05:32.053
> 
> 标签：c#, linq-to-sql

给定两个具有相同模式的数据库，是否有任何简单的方法可以在两者之间传输记录？我正在使用 LINQ to SQL，因为我需要在此过程中执行一些额外的操作，并且让表示我正在传输的记录的对象使这变得更加容易。这是一个小规模的帮助应用程序，所以 SSIS 可能是矫枉过正，SQLBulkCopy 不允许我在途中轻松询问对象。

我想做的是：

```
public static void TransferCustomer
                     (DBDataContext DCSource, 
                      DBDataContext DCDest, 
                      int CustomerID)
{
  Customer customer;
  using (DCSource = new DBDataContext(SourceConnStr))
  {
    customer = DCSource.Customers
                       .Where(c => c.CustomerID == CustomerID)
                       .Single();
  }

  using (DCDest = new DBDataContext(DestConnStr))
  {
    DCDest.Customers.InsertOnSubmit(customer);
    DCDest.SubmitChanges();
  }
} 
```

但由于显而易见的原因，这会引发消息异常：

> 已尝试附加或添加一个不是新的实体，可能是从另一个 DataContext 加载的。这是不支持的。

我可以通过像这样对对象进行浅拷贝来解决这个问题：

```
public static Customer Clone(this Customer customer)
{
  return new Customer()
  {
    Name = customer.Name,
    Email = customer.Email
    etc...
  };
} 
```

然后插入克隆的项目。如果我只复制有问题的字段，而不是任何代表表关系的引用，这工作正常。然而，这有点冗长，我这样做的方式需要我手动分配 Clone 方法中的每个字段。任何人都可以提出任何使这更容易的方法吗？我想知道的两件事是：

1.  LINQ to SQL 能否以更简单的方式做到这一点，
2.  有没有一种很好的方法可以使用反射来制作一个将插入的浅拷贝？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T12:01:23.010

这是一种浅克隆 LINQ 对象（省略主键）的方法：[Copy Linq Objects](http://groups.google.co.uk/group/microsoft.public.dotnet.languages.csharp/msg/0edae91abc1c0f1a)。

如果您不使用属性，可以对其进行调整以使用元模型。那么您只需要 2 个数据上下文（一个源，一个目标）。

或者，您可以查看`SqlBulkCopy`- 请[参阅从一个数据库表复制到另一个 C#](https://stackoverflow.com/questions/565732/copy-from-one-database-table-to-another-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-10-05T02:02:44.270

尝试这个

```
using (DCDest = new DBDataContext(DestConnStr))
{
    DCDest.Customers.InsertOnSubmit(customer.ToList());  //note the use of .ToList()
    DCDest.SubmitChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:16:45.203

您可能想考虑改用 SQLBulkCopy 类。您可以在此处找到有关它的代码项目文章：http: [//www.codeproject.com/KB/database/SqlBulkCopy.aspx](http://www.codeproject.com/KB/database/SqlBulkCopy.aspx)。这将是一种更快的方法，但我想它需要您自己创建查询，而不是让 LINQ-to-SQL 来做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T11:46:42.063

这纯粹是学术活动吗？

如果不是，我会认真考虑使用 SSIS： http: [//msdn.microsoft.com/en-us/library/ms141026.aspx](http://msdn.microsoft.com/en-us/library/ms141026.aspx)，或者不使用 Rhino ETL：[http ://ayende.com/Blog/archive/2008 /01/16/Rhino-ETL-2.0.aspx](http://ayende.com/Blog/archive/2008/01/16/Rhino-ETL-2.0.aspxfor)用于在数据库之间传输数据。[链接文本][1]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T12:03:47.293

为什么要使用 LINQ 来做到这一点？当您可以使用 SQL Server 的 DTS 时，让一个框架妨碍您似乎有点浪费。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T12:06:37.740

我使用 DataContractCloner 分离 LINQ-to-SQL 实体：

```
/// <summary>
/// Serializes the entity to XML.
/// </summary>
/// <returns>String containing serialized entity.</returns>
public string Serialize()
{
    return DataContractCloner.Serialize<Organization>(this);
}

/// <summary>
/// Deserializes the entity from XML.
/// </summary>
/// <param name="xml">Serialized entity.</param>
/// <returns>Deserialized entity.</returns>
public static Organization Deserialize(string xml)
{
    return DataContractCloner.Deserialize<Organization>(xml);
} 
```

所有 LINQ-to-SQL 实体都已注释，因此这会创建一个可附加的克隆，您可以稍后重新附加一些警告。首先，外键关系将被解析，因此您必须按依赖顺序插入，如果您有循环关系，则必须从架构中删除外键并在传输后重新应用。其次，LINQ-to-SQL 不执行标识插入，因此如果您使用自动递增标识列，您将在提交时遇到问题。我没有成功强制 DataContext 启用身份插入，但是 YMMV。

# sql-server - SSRS：在每一行上重复 tablix 最左边的行组值

> ID：868064
> 
> 赞同：10
> 
> 时间：2009-05-15T11:05:59.913
> 
> 标签：sql-server, reporting-services, ssrs-2008

我在 SSRS 2008 报告中有一个 tablix。它有两级行分组，我希望最左侧分组的值继续显示在每一行上。例如，我明白了：

```
group1  subgroup1  500.00
        subgroup2  250.00 
```

……但我更喜欢……

```
group1  subgroup1  500.00
group1  subgroup2  500.00 
```

我似乎找不到这个选项。想要是不是很奇怪？

谢谢你，比尔

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2010-01-21T15:35:16.887

您可以简单地编辑上报告级别，同时对两个组进行分组，这将导致您想要的行为。

我不得不求助于这个解决方案一次，其中“隐藏重复项”似乎没有达到预期的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-24T21:26:38.773

目前，我发现确定组的重复值是否会显示在 SSRS 报告中的一种好方法是创建组并基于分组构建报告。其次，获取组字段并将列复制到报告的右侧。确保您已包含所有需要的列并且总数是正确的；删除分组的列。当您执行此操作时，您将收到一个弹出窗口，询问您是要删除组还是仅删除列，选择列 - 这将保留初始报告的格式并保留所有总行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-03T13:44:54.480

这很简单...您必须右键单击数据区域中的单元格（例如显示值 500 的位置），然后单击左侧的添加列。在使用标签字段 (subgorup1) 更改新单元格中的值之后，还要对要添加的其他列执行此操作，但请记住从 DATA 区域执行此操作。完成后，从数据区域中删除列，但保留行组。不错的尝试！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-12-02T12:47:53.210

我有同样的问题，我很容易解决。

似乎您有两个行组，按组和按子组。

您要做的是选择第一列并按组和按子组分组，然后按子组删除分组。

这应该够了吧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-09-08T20:54:25.027

如果您选择有问题的行，则会出现一个名为 Hide Duplicates 的字段。将此设置为空（null、空格等）应该返回您想要的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-05T07:26:04.383

将`ROW_NUMBER()`OVER`(ORDER BY name ASC) AS Row#`作为序列号放入每个查询中，并在 SSRS 报告中隐藏该行。

请参阅：[https ://docs.microsoft.com/en-us/sql/t-sql/functions/row-number-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/functions/row-number-transact-sql?view=sql-server-ver15)

# javascript - 在 VIsual Studio 中使用 javascript

> ID：868071
> 
> 赞同：3
> 
> 时间：2009-05-15T11:07:56.133
> 
> 标签：javascript, visual-studio, visual-studio-2008

为了在 Visual Studio 2008 中使用 JS 文件，我做了：

```
Tools -> Options -> Text Editor -> File Extensions 
```

*并添加了具有脚本编辑*经验的 js 扩展。

除了以下内容之外，这几乎可以按预期工作：

1.  当我打开 JS 文件时，语法高亮设置非常慢（大约 10 秒后）。编译警告的生成速度同样慢，修复后它们会慢慢消失。一般来说，没什么大不了的，但我想知道为什么。在文件被同步突出显示之前，您不能放置断点。

2.  Intelisense 有效，但并非总是如此。例如，如果我使用 getElementById 获取元素，则使用该元素的智能感知不起作用。我想这与上下文有关，因为编译器无法确定有问题的对象类型。它也不能在使用 script 标签的 html 页面中工作，但在这种情况下，同步突出显示是立即的。

如果有更好的方法？

我目前选择使用外部编辑器并通过在 js 文件上添加自定义“打开方式”操作来启动它。但是，我不喜欢这样做，因为我无法使用出色的 VS 调试功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T15:14:57.507

第三方插件[Visual Assist X](http://www.wholetomato.com)可以帮助处理 js。

# html - HTML 中的时事通讯是否应该具有“基于表格”的布局？

> ID：868073
> 
> 赞同：10
> 
> 时间：2009-05-15T11:08:52.183
> 
> 标签：html, css, w3c, newsletter

我在某处读到，在创建 HTML 电子邮件时，您应该使用基于表格的布局。您不应该关心创建基于 css 的无表布局。真的吗？我必须为我的公司创建一个时事通讯布局，但我觉得写 3​​ 个嵌套表并不舒服。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2009-05-15T11:12:38.620

如果您希望您的 HTML 电子邮件在大多数电子邮件客户端中看起来不错，那么您应该编写您的 HTML，因为它仍然是 1999 年 :)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-05-15T11:23:01.340

我强烈建议您访问[电子邮件标准项目](http://www.email-standards.org/ "电子邮件标准项目")网站。它列出了市场上几乎所有主要的电子邮件客户端（独立的和基于 Web 的），并概述了每个客户端内置了多少 HTML 支持。

还可以查看 Campaign Monitor 的[电子邮件设计指南](http://www.campaignmonitor.com/design-guidelines/)，了解一些正确构建 HTML 电子邮件的实用指南——包括，遗憾的是，“使用表格”。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-15T11:15:59.327

这可能更多地基于电子邮件客户端呈现的现实（这很糟糕），而不是其他任何事情。从技术上讲，这几乎肯定是错误的，但从实用上讲，这可能是最好的建议。特鲁波谈到了这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T11:10:40.603

当然没有标准要求它，事实上，最佳实践规定不应将表格用于布局（除非在布局表格数据的情况下）。

在演示文稿中使用表格是有争议的，因为不能保证过多的桌面和基于 Web 的电子邮件客户端将正确呈现基于 CSS 的演示文稿......但是，我不会说这是一个论点 - 和- 本身。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-15T11:45:42.627

我会喜欢这样一个世界，没有人期望在纯文本可以使用 HTML 的地方使用 HTML，但情况并非如此。如果您的工作是提出当您的订阅者尝试在他们最喜欢的电子邮件客户端（应用程序或基于 Web 的电子邮件）中查看它时不会让您感到尴尬的 HTML，那么很难坚持使用语义标记和 CSS。

对我所说的话持保留态度，因为我只是将其作为学习练习而不是专业的。根据我收藏的一篇文章和我在该文章中找到的更多链接，以下页面似乎很好地讨论了发送 HTML 电子邮件所涉及的实际问题。

[http://www.sitepoint.com/article/code-html-email-newsletters/](http://www.sitepoint.com/article/code-html-email-newsletters/)

[http://www.sitepoint.com/article/principles-beautiful-html-email/](http://www.sitepoint.com/article/principles-beautiful-html-email/)

[http://www.sitepoint.com/article/designers-guide-html-email/](http://www.sitepoint.com/article/designers-guide-html-email/)

鉴于所涉及的问题，使用表格进行布局具有实际意义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-15T11:13:59.303

我不建议你这样做，但你可能听说过，因为很多电子邮件阅读器只支持少数 html 和 css。他们通常不捆绑完整的 html/css 解析器，并且在过去的表格中经常用于进行布局..

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-15T11:16:37.283

您可能想看看这个，虽然这是专门关于描述的 Oulook html/css 子集支持：

[http://msdn.microsoft.com/en-us/library/aa338201.aspx](http://msdn.microsoft.com/en-us/library/aa338201.aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-15T11:18:45.233

使用表的原因有两个：

1.  HTML 电子邮件可以在具有广泛不同功能的大量客户端中呈现。这就像尝试为每个浏览器设计一个网站，然后将其乘以 10。
2.  相当多的网络电子邮件客户端对 CSS 布局进行了严重破坏。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-15T12:03:33.490

我发现基于 div 的布局有问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-15T12:33:24.197

我们一直在对客户进行一些关于时事通讯在其计算机上的显示方式的测试，发现大多数人在 Outlook 或 Mail 中使用的布局仅显示大约 45 个字符的宽度。他们不必费心双击以在新窗口中打开电子邮件或滚动。除了徽标和文本之外的一些内容看起来更好的电子邮件是只有一个大 GIF 的电子邮件......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-15T19:25:25.580

对 Campaign Monitor 的建议 +1。我还看到了很多来自[Emma](http://www.myemma.com/)的精彩内容。根据我的经验，制作电子邮件通讯模板越简单越好。在越来越多的用户在带有小屏幕的移动设备上阅读您的消息的世界中，这是双重事实。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2009-05-15T11:14:13.060

过去通常使用表格进行页面布局，许多创建页面的人仍然更愿意这样做。

正如 James 所说，最佳实践是使用 CSS 定位工具进行页面布局，除非它实际上是表格数据；但我个人经常发现很难用 CSS 获得我想要的效果。

# java - 加载密钥库而不检查其完整性

> ID：868078
> 
> 赞同：0
> 
> 时间：2009-05-15T11:10:54.567
> 
> 标签：java, security, cryptography

这个问题在 Java 类 java.security.KeyStore 及其 load(InputStream stream, char[] password) 方法的特定上下文中，该方法可以接受空值作为密码以绕过完整性检查。

在不检查其完整性的情况下加载和查询密钥库有哪些风险？将查询密钥库以获取用户的私钥，该私钥将用于签署文档以实现不可否认性。查询的证书将根据用户注册自己时存储在数据库中的副本和（假定完全相同的）证书进行进一步验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-18T22:29:39.460

那么主要风险是任何可以读取文件的人也可以修改它。因此，有人可以用不同的密钥库替换您读取的文件，该密钥库具有相同的密钥名称但包含不同的私钥，因此您最终使用错误的私钥签署文档并且它们都不会通过验证。

此外，任何有权访问文件的人都可以访问私钥，并可以签署文档，就好像它们来自您的应用程序一样。

# ruby-on-rails - validates_uniqueness_of 是否适用于生成随机令牌？

> ID：868081
> 
> 赞同：0
> 
> 时间：2009-05-15T11:11:13.787
> 
> 标签：ruby-on-rails

如果我想为 Rails 中的令牌生成随机字符串，我可以在上面使用 validates_uniqueness_of 吗？鉴于这不是用户将输入或返回错误的内容，因为它需要立即是唯一的。还是我只是愚蠢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:56:31.657

怎么样：

```
 class Token < ActiveRecord::Base
   validates_uniqueness_of :random_key

   before_validation_on_create :create_key_until_valid

   def create_key_until_valid
     self.random_key = rand.to_s.slice(2,10)                                      
     while Token.find_by_random_key(self.random_key)
       self.random_key = rand.to_s.slice(2,10)
     end
   end
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T11:21:31.623

validates_uniqueness_of 只会确保属性是唯一的 - 它不会生成值。

我会使用 before_validation 来创建唯一值。

# java - 为什么不能改变原始类型变量的值？

> ID：868087
> 
> 赞同：-1
> 
> 时间：2009-05-15T11:13:06.777
> 
> 标签：java

```
 public class testtype
{
  private   int a;
  private double b;

   testtype(int a,double b)
  {
    this.a=a;
    this.b=b;
  }

  public void maketoequal(testtype oo)
  {
    oo.a=this.a;
    oo.b=this.b;
  }

  void trytoequal(int c)
  {
    c=this.a;
  }

  public static void main(String[] args)
  {
    testtype t1,t2;
    t1=new testtype(10,15.0);
    t2=new testtype(5,100.0);
    t1.maketoequal(t2);
    System.out.println("after the method is called:"+"\n"+"the value of a for t2 is:"+t2.a
    +"\n"+"the value of b for t2 is :"+t2.b);
    int c=50;
    t1.trytoequal(c);
    System.out.println("the value of c after the method be called is:"+c);
  }
} 
```

为什么c没有改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T11:17:31.523

[Java 是***严格***按值传递的](http://javadude.com/articles/passbyvalue.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-15T11:21:56.710

Java 按值传递参数（因此在方法中创建并在本地使用值的副本）。

对于原始类型（在您的情况下为 c），该值是 c 的值，因此您使用 c 的值的副本并且您不更改 c

对于一个对象，值是引用的值，所以即使你通过值传递它（复制它）它仍然引用同一个对象，你可以使用你的引用副本更改对象...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T11:17:05.877

因为原始参数是[按值](http://java.sun.com/docs/books/tutorial/java/javaOO/arguments.html)传递给方法的，所以您更改的值*是方法的本地*值。

你可能想要

```
c = thistest.getA() 
```

其中`getA()`返回 a 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T11:17:27.360

在 java 中，参数是按值传递的，而不是按引用传递的，所以你在“trytoequal”中所做的事情是行不通的。

请参阅有关 java 变量值的这些解释：[http ://www.yoda.arachsys.com/java/passing.html](http://www.yoda.arachsys.com/java/passing.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T11:18:52.457

原始数据类型是通过值而不是通过引用传递的，这意味着您在“trytoequal”中获得的 c 是一个变量，其范围正好在方法内，它的值是方法参数的副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T19:41:55.493

方法中 c 的值被改变，然后被丢弃。

# regex - Apache FilesMatch - 匹配正则表达式中的文件夹

> ID：868088
> 
> 赞同：19
> 
> 时间：2009-05-15T11:13:21.237
> 
> 标签：regex, apache, .htaccess, mod-expires

我正在尝试使用 Apache2 的 .htaccess 文件缓存一些文件。我想缓存一个特定的文件夹比其他任何东西都长，所以我一直在尝试使用 FilesMatch 指令，如下所示：

`<FilesMatch "skins(.*)\.(jpg|png|gif)">
ExpiresDefault A2592000
</FilesMatch>`

我希望能够缓存 /skins/ 目录及其子目录中的所有图像文件。但是，我不能完全让正则表达式起作用——Apache 完全忽略了它。

您如何将文件夹与`<FilesMatch>`.htaccess 文件中的文件夹匹配？

干杯，
马特

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-05-16T13:16:33.210

FilesMatch 应该只匹配文件名。您可以将`.htaccess`文件放在`skins`目录中，它应该如下所示：

```
<FilesMatch "\.(jpg|png|gif)">
    ExpiresDefault A2592000
</FilesMatch> 
```

或者，在 中`httpd.conf`，您可以使用：

```
<Directory path_to_the_skins_dir>
    <FilesMatch "\.(jpg|png|gif)">
        ExpiresDefault A2592000
    </FilesMatch>
</Directory> 
```

祝你好运。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-12-20T14:57:53.793

`<Directory>`并且`<Location>`在 .htaccess 中是不允许的，但是……</p>

[您也可以在“上下文”](https://httpd.apache.org/docs/current/mod/core.html#if)（不仅仅是 httpd.conf）中使用`<If>`which [*is*`.htaccess`](https://httpd.apache.org/docs/current/mod/core.html#if) [allowed... 也请参见此处](https://httpd.apache.org/docs/current/expr.html)。它允许您匹配基本路径*和*扩展以及任何其他正则表达式可以掌握的内容......</p>

**测试和工作：**

```
<If "%{REQUEST_URI} =~ m#^/_stats/.*\.(jpg|png|css|js)#">
    Header unset ETag
    FileETag None

    ExpiresActive On
    ExpiresDefault "access plus 1 day"
</If> 
```

**注意：** `_stats`是我的重写 url，而不是传入的 URL（如果这对你有任何影响），不确定，为什么匹配对它起作用......</p>

`#`只是一个不同的外部“<em>gate”来表示正则表达式，而不是`/`用来将其标记为正则表达式。（由于我需要按`/`字面意义使用，这使我不必逃避`/`'s）。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-22T18:25:42.040

`Directory`并且`Location`命令不适**`.htaccess`**用于许多共享主机。解决方案可能是`.htaccess`在目标子文件夹中创建，并**`FilesMatch`**在那里使用命令。

# c# - 通过并行端口的串行输入

> ID：868090
> 
> 赞同：0
> 
> 时间：2009-05-15T11:13:50.770
> 
> 标签：c#

任何人都可以解释一下我们如何使用 c# 将串行数据作为并行端口的输入。或通过并口进行串行通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T12:20:19.173

我真的不会以这种方式传输您的数据，因为您正走向痛苦的世界。最好使用串行转USB IC，例如[FTDI](http://www.ftdichip.com/)制造的优秀IC 。简单来说，这些将您的 TTL 串行数据通过 USB 发送。多亏了 FTDI 驱动程序，数据显示为一个虚拟串行端口，您的程序可以以通常的方式从中读取。

希望这可以帮助。

伊恩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T11:43:14.240

从您的问题中不清楚您是在寻找软件还是硬件解决方案。一个外部串行到并行转换器（硬件）提供了最简单的解决方案。

如果您正在寻找仅软件的解决方案，那么您想做“一[点点敲打](http://en.wikipedia.org/wiki/Bit-banging)”。不幸的是，这需要精确的计时，这在托管代码中可能非常困难。这种程序通常用较低级别的语言来实现，例如汇编程序或 C 语言，其中可以直接访问硬件。这是另[一篇](http://www.ganssle.com/articles/auart.htm)专门讨论使用并行端口进行串行通信的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T11:48:15.693

听起来你做错了什么。如果需要串口输入，为什么不用串口呢？我相信[RS232](http://en.wikipedia.org/wiki/RS-232)标准得到了广泛的支持。并行端口用于并行数据传输。

# asp.net - css文件的问题

> ID：868094
> 
> 赞同：1
> 
> 时间：2009-05-15T11:14:48.690
> 
> 标签：asp.net, css, themes

我遇到了主题问题。我的应用程序中有 app_themes 文件夹，其中有一个 mytheme 文件夹。在该文件夹中，我放置了一个 css 文件。我已经通过应用程序使用了这个主题。使用网络配置文件....以下是代码。

```
<System.web>

<pages theme="mytheme"></pages>

</System.web> 
```

这很好..但问题是我不想在特定页面上使用 htis 主题。

为此我用过

`Enablingtheme ="false"`在 pagedirective.but 它仍然适用于页面。

请给我一些建议...

提前谢谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T11:19:15.640

那么`EnablingTheme`不是正确的属性名称。它是

```
EnableTheming="false" 
```

我会先检查你那里没有错字。

# math - 二进制数学

> ID：868096
> 
> 赞同：2
> 
> 时间：2009-05-15T11:15:20.670
> 
> 标签：math

如果我知道数字 y 并且知道 2^x=y，我如何计算 x？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-15T11:15:58.813

以 2 为底的对数函数：

```
log2(y) 
```

这相当于：

```
log(y) / log(2) 
```

对于任意基数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T11:21:35.867

如果您确定它是 2 的幂，那么您可以编写一个循环并将数字右移直到得到 1。循环运行的次数将是 x 的值。

示例代码：

```
int power(int num)
{
    if(0 == num)
    {
        return 0;
    }

    int count = 0;
    do
    {
        ++count;
        num = num >> 1;
    }while(! (num & 1) && num > 0);
    return count;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T11:22:17.317

如果你手边没有一个`log`函数，你总是可以看到在它变成 1 之前你必须将 y 除以 2 多少次。（这假设 x 是正数和整数。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-18T14:03:16.270

如果 x 是一个正整数，那么下面的代码会更有效率。

```
 unsigned int y; // You know the number y for which you require x..
   unsigned int x = 0; 

   while (y >>= 1) 
   {
         x++;
   } 
```

x就是答案！

# web-config - 通过层传递的 Web.config 值

> ID：868101
> 
> 赞同：1
> 
> 时间：2009-05-15T11:15:57.783
> 
> 标签：web-config

我有一个 .NET 2008 解决方案，其中包含一个充当 WCF 服务主机的项目。该项目有一个 web.config 文件，其中的设置将在项目完成时被安装程序替换。这些设置是构成连接字符串和其他一些的组件。

这个 WCF 项目引用了一个业务逻辑项目（实现服务代码的类库），该项目又引用了一个使用实体框架的 DAL 项目。

我想知道的是如何将 WCF 项目中 web.config 中的值获取到 DAL？不使用我在 OpenMappedExeConfiguration 中看到的任何相对路径。我需要根据 web.config 文件中的设置在 DAL 中建立连接字符串。

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T11:39:23.203

我将共享的东西（例如连接字符串）存储在 1 个文件夹中，该文件夹甚至不在源代码所在的文件夹下。在 DAL 层中，我只使用 ConfigurationManager 来获取它。

在启动应用程序的项目中（在您的情况下，它是 WCF 项目），我从外部“config”文件夹中添加“ConnectionStrings.config”文件**作为链接**（在 Visual Studio 中，按“添加现有项目”->选择项目 - >“添加”按钮旁边是此选项所在的箭头）。然后我只是通过该文件属性（单击解决方案资源管理器中的文件->按 F4）将其设置为项目的内容，如果修改为部署文件夹，则应再次复制它。然后我将一个新的 app.config 文件添加到项目中，其中包括“ConnectionString.config”。

connectionstrings.config 的来源：

```
<connectionStrings>
  <add name="MyConnectionString"
     connectionString="Data source=tralala"/>
</connectionStrings> 
```

WCF项目中app.config的来源：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings configSource="ConnectionStrings.config"></connectionStrings>
</configuration> 
```

我不确定这是最好的方法。但到目前为止一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T11:40:22.950

不幸的是，您的问题的答案是“复制和粘贴”。这一直是真的。

最接近此规则例外的是“新”.NET 2.0 设置文件。因为它们的结构和默认值是定义组件的程序集的一部分，所以组件可以在启动时导致将默认值写入应用程序配置。我想可以将其与一段代码与 installutil 结合使用，以导致在包含的应用程序启动之前写出默认值，在第一次使用应用程序之前将配置文件中的默认值进行编辑.

# c# - 多态还是泛型方法更好？C＃

> ID：868108
> 
> 赞同：4
> 
> 时间：2009-05-15T11:17:28.217
> 
> 标签：c#, c++, generics, templates

我有两个类和一个接口

```
interface IVehicle
{
    void Drive();
}

class Benz :IVehicle
{
    public void Drive()
    {
        Console.WriteLine("WOW! driving benz");
    }
}

class Ferrari : IVehicle
{
    public void Drive()
    {
        Console.WriteLine("WOW! driving ferrari");
    }
} 
```

我有一个使用它的驱动程序类。

```
class Driver
{
    public void StartDriving(IVehicle vehicle)
    {
        vehicle.Drive();
    }
} 
```

还有一个通用的驱动程序。

```
class GenericDriver
{
    public void StartDriving<T>() where T : IVehicle , new()
    {
        T vehicle = new T();
        vehicle.Drive();
    }
} 
```

**问题**

1.  与普通驱动程序相比，您认为通用实现有什么优势吗？如果是，它们是什么？
2.  你更倾向哪个？通用的还是普通的？
3.  有没有更好的方法来实现通用驱动程序？
4.  我感觉 C# 中的泛型与 C++ 模板相比非常有限。真的吗？

有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T11:21:40.843

1.  在这种情况下绝对没有任何优势。除非你真的想创建`T`in的实例`Drive()`，这可以在没有泛型的情况下完成`delegate IVehicle VehicleBuilder();`
2.  这取决于实际情况。但一般来说，我更喜欢先。
3.  再说一遍：这取决于你想做什么。
4.  是的，这是真的。但请记住，C++ 模板是编译时（JIT 时间）构造，而 C# 泛型是运行时构造。

现在谈谈为什么我想要一个通用的`Driver`. 考虑：

```
class Driver<TVehicle>
    where TVehicle : class, IVehicle, new()
{
    public TVehicle Vehicle { get; set }

    public Driver()
    {
        Vehicle = new TVehicle();
    }
} 
```

这样我就可以使用`Driver<>.Vehicle`一个特定类型的强类型属性，而不是更常见的`IVehicle`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T11:26:18.773

1.  在您的示例中，我真的没有看到任何优势，但是它们做不同的事情。普通的可以使用已经创建的车辆，而通用的只能创建新的。
2.  由于这些方法做不同的事情，这取决于。哪个更适合您的代码。我个人会使用普通的。
3.  我不太确定你为什么要使用泛型。在这种情况下，它对您没有多大帮助。
4.  是的，C++ 模板**更**强大。看看所有奇怪的 Boost 库。这主要是因为 C++ 模板是在编译时完成的，而不是像在 .NET 中那样的运行时/JIT 时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T11:36:13.493

第二种方法意味着每次调用时都需要构造一个新对象，而第一种方法允许您在调用之外构造并因此重用该对象，如果经常调用它可以节省大量资源。

# java - 你如何调试 Java 小程序？

> ID：868111
> 
> 赞同：57
> 
> 时间：2009-05-15T11:17:40.370
> 
> 标签：java, debugging, applet

目前，我拥有的唯一信息是浏览器状态栏中的单行错误消息。

例如，您知道我如何获得堆栈跟踪吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2010-04-01T02:58:46.867

除了明显使用 Java 控制台和小程序查看器，从 Java 6 update 7 开始，您可以使用JDK 附带的[VisualVM (JDK_HOME/bin/visualvm)。](http://java.sun.com/javase/6/docs/technotes/guides/visualvm/index.html)它允许您查看每个线程的堆栈跟踪，甚至查看所有对象实例。

AppletViewer 非常方便，你可以从 Eclipse 中做一个“Run as/Java Applet”来运行，或者“Debug As/Java Applet”来调试你的 applet 类。

然而，有时为了调试一些与安全相关的东西，浏览器插件环境与 appletviewer 太不同了。以下是在浏览器中有效调试小程序的方法：

**1) 获取二进制文件的调试信息**

从 JRE_HOME/lib 备份 .jar 文件

（下载并）安装与您的 JRE 相同版本的 JDK。

将 .jar 文件从 JDK_HOME/jre/lib 复制到 JRE_HOME/lib

JDK 中的文件编译时包含调试信息（源代码行号信息、变量名等），而 JRE 文件没有此信息。

如果没有这个，您将无法在调试器中有意义地进入核心类代码。

**2) 启用 Java 插件调试**

转到 Java 控制面板/Java/Java 运行时设置/查看/用户/运行时参数

并添加启用调试的选项。像这样的东西：

```
-Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=2502,server=y,suspend=n 
```

有趣的选项是端口（这里使用 2502，您几乎可以使用任何空闲端口，只需将其写下来以备后用）和挂起 - 如果您需要调试小程序启动、类加载等，请将其设置为“y” . 这样，当您访问小程序页面时，浏览器将显示为冻结，因为 JVM 立即挂起等待调试器连接。

**3) 使用您喜欢的 IDE 远程调试 Java 插件**

例如，在 Eclipse 中，选择 Run / Debug Configurations ... / Remote Java Application

单击“新建”按钮。

确保连接类型为“Socket Attach”，如果您的浏览器是本地的，则选择 localhost 作为主机，以及您之前选择的端口（示例中为 2502）。

您可能必须在源选项卡上的 JDK 中包含 src.zip 才能使 Java 核心类源可用。

保存配置，一旦您的浏览器正在运行插件（无论 JVM 是否暂停），运行远程调试器以连接到插件 JVM，并打开一个包含您的小程序源的项目。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-05-15T11:22:59.310

[这篇文章有点老了](http://java.sun.com/j2se/1.5.0/docs/guide/plugin/developer_guide/debugger.html)，但仍然相关（包括题为“如何在 Java 插件中调试小程序”的部分）。

编辑：也许获得堆栈跟踪的更好方法是使用[Java 插件控制台](http://java.sun.com/j2se/1.5.0/docs/guide/deployment/deployment-guide/console.html)。如果您在该窗口中点击“t”，您将看到以下内容：

> 打印出所有现有的线程组。显示的第一组是主组。ac 代表活动计数；它是线程组及其子线程组中活动线程的总数。agc 代表活动组数；它是线程组的活动子线程组的数量。pri 代表优先级；它是线程组的优先级。在 Group main 之后，其他线程组将显示为 Group ，其中 name 是与 applet 关联的 URL。单独的线程列表将显示线程名称、线程优先级、如果线程处于活动状态则处于活动状态，或者如果线程处于被销毁过程中则被销毁，如果线程是守护线程则显示守护进程。

我在该控制台中最常使用的另一个命令是 0-5 的跟踪级别：

> 这将设置跟踪级别选项，如下一节“[跟踪和日志记录”中所述。](http://java.sun.com/j2se/1.5.0/docs/guide/deployment/deployment-guide/tracing_logging.html#tracing)

在该页面中，您会看到关卡如下所示：

> *   0 — 关闭
> *   1 — 基本
> *   2 — 网络、缓存和基本
> *   3 — 安全、网络和基础
> *   4 — 扩展、安全、网络和基础
> *   5 - LiveConnect、扩展、安全、网络、临时和基本

这些工具都非常有用，因为您正试图解开世界上已经进入您的小程序的头脑。我知道他们为我工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T11:21:05.883

小[程序查看器](http://java.sun.com/j2se/1.3/docs/tooldocs/win32/appletviewer.html)支持调试选项。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-15T11:21:08.287

来自未捕获异常的堆栈跟踪将显示在控制台上。这可以从 Java 控制面板（高级 > Java 控制台 > 显示控制台）启用，或者某些浏览器具有启用它的各种选项或插件。

您可以将调试器附加到正在运行的插件进程。

也许最好的方法是根本不调试。编写测试。编写不与不必要的假设耦合的代码 - 例如，您作为小程序运行。不幸的是，大多数 GUI/applet 示例代码都写得很糟糕。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-24T18:51:20.787

我在进行远程小程序调试时遇到问题，每次尝试从 eclipse 连接时，它都会抛出 Connection denied 错误，我的 jre 版本是 64 位和 eclipse 32 位，当我用 32 位 jre 替换时，它对我有用。此外，如果我们同时安装了 32 位和 64 位 jre 版本，IE 默认使用 64 位 jre 用于 applet，chrome 和 FF 可能使用 32 位 jre 版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-10T12:03:52.547

For me the most important action to get applet debugging in eclipse, is to set in java control panel(tab java) the right binaries to use, that have debug symbols. Only JRE included in jdk have this symbols. So to debug applet in java control panel, tab java, press view button, after find the correct jre under jdk folder, for me for example "C:\Programmi\Java\jdk1.7.0_03\jre", and put check enabled only for this entry. This is for me the clean way to do what Sami Koivu say.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-15T11:28:07.193

未捕获的异常被发送到控制台。您还可以使用 System.out 将您自己的消息写入控制台。要查看结果，您需要通过右键单击系统托盘中的 Java 图标并打开控制台来打开控制台（注意这与 Microsoft 的 VM 不同）。

要正确调试小程序，您可以设置 Eclipse 来调试小程序。右键单击applet 源文件，然后单击Debug as Applet。（如果您有小程序的参数，则需要进行设置。）然后您可以单步调试小程序代码，就像调试任何其他 Java 代码一样。

# python - 将文件加载到变量中

> ID：868112
> 
> 赞同：2
> 
> 时间：2009-05-15T11:17:57.513
> 
> 标签：python, namespaces, pickle

我正在尝试编写一个获取变量名的小函数，检查它是否存在，如果不存在，则将其从文件（使用pickle）加载到全局命名空间。

我尝试在文件中使用它：

```
import cPickle

#
# Load if neccesary
#
def loadfile(variable, filename):
    if variable not in globals():
        cmd = "%s = cPickle.load(file('%s','r'))" % (variable, filename)
        print cmd
        exec(cmd) in globals() 
```

但它不起作用 - 变量没有被定义。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T11:37:16.953

你总是可以完全避免 exec ：

```
 import cPickle

#
# Load if neccesary
#
def loadfile(variable, filename):
    g=globals()
    if variable not in g:
        g[variable]=cPickle.load(file(filename,'r')) 

```

编辑：当然，这只会将全局变量加载到当前模块的全局变量中。

如果你想将这些东西加载到另一个模块的全局变量中，你最好将它们作为参数传入：

```
 import cPickle

#
# Load if neccesary
#
def loadfile(variable, filename, g=None):
    if g is None:
        g=globals()
    if variable not in g:
        g[variable]=cPickle.load(file(filename,'r'))

# then in another module do this
loadfile('myvar','myfilename',globals()) 

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:36:41.973

使用 'globals' 的问题是它只适用于当前模块。与其传递“全局变量”，更好的方法是直接在命名空间上使用“setattr”内置函数。这意味着您可以在实例和模块上重用该功能。

```
import cPickle

#
# Load if neccesary
#
def loadfile(variable, filename, namespace=None):
    if module is None:
        import __main__ as namespace
    setattr(namespace, variable, cPickle.load(file(filename,'r')))

# From the main script just do:
loadfile('myvar','myfilename')

# To set the variable in module 'mymodule':
import mymodule
...
loadfile('myvar', 'myfilename', mymodule) 
```

注意模块名称：主脚本始终是模块**main**。如果您正在运行 script.py 并执行“导入脚本”，您将获得代码的单独副本，这通常不是您想要的。

# iphone - 带有子视图的 UIView beginAnimations

> ID：868121
> 
> 赞同：9
> 
> 时间：2009-05-15T11:20:50.160
> 
> 标签：iphone, core-animation

我有一个漂亮而简单的“缩放”视图动画，它以一个点开始并动画到全屏大小：

```
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationBeginsFromCurrentState:YES];
        [UIView setAnimationDuration:1.0];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
        myView.frame = CGRectMake(0,0,320,480);
        myView.transform = CGAffineTransformIdentity;  
        [UIView 提交动画];

```

到目前为止，一切都很好 ：-）

问题是当我将子视图添加到 myView 时，令我惊讶的是，它们不遵循其父视图的动画方案！？！？

顺便提一句。子视图当前像往常一样添加到 MyView 的 initWithFrame 中。我试图将他们的转换属性设置为 CGAffineTransformIdentity 但它没有帮助。

那么，需要做些什么来让 myView 的子视图与它的父视图一起以漂亮的“缩放”方式进行动画处理？

提前致谢！
/约翰

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-08-24T12:33:26.147

我刚遇到同样的问题，解决方案非常简单。修改帧大小仅影响当前视图，而不影响子视图（如您所见），变换属性也适用于子视图。

我正在尝试做与您正在做的相反的事情（有一个子视图在显示时看起来“拖放”到现有视图的顶部，而不是从中心缩放）。这段代码对我有用：

```
self.transform = CGAffineTransformMakeScale(2,2);
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.25];
self.transform = CGAffineTransformMakeScale(1,1);
self.alpha = 1.0;
[UIView commitAnimations]; 
```

在开始动画之前尝试将 self.transform 设置为 CGAffineTransformMakeScale(0,0)，并在提交之前将其设置回 (1,1)。根本不要修改框架 - 在动画完成后将其保留为您希望视图具有的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T10:18:44.303

您始终可以在界面生成器中使用自动调整大小。通过这种方式，您可以指定您不想更改的左侧/边距以及您希望特定子视图调整大小的轴。

![自动调整大小功能](https://i.stack.imgur.com/OkJZU.png)

# php - 在 PHP CLI 脚本中使 shebang 动态化

> ID：868131
> 
> 赞同：1
> 
> 时间：2009-05-15T11:22:55.567
> 
> 标签：php

我想知道是否有任何方法可以使我的 PHP CLI 文件顶部的 shebang 值动态（在配置文件中设置为常量）？

有没有人有过这方面的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T19:38:28.980

不确定这是否回答了您的问题，但是：

```
#!/usr/bin/env php 
```

几乎可以在任何地方工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:26:39.537

使用符号链接。这通常是 unix 重新映射解释器位置的方式。（无论是 bash、perl、python、php...）

[http://www.linux.org/lessons/advanced/x1110.html](http://www.linux.org/lessons/advanced/x1110.html)

# html - Outlook 2007 Html 表格 td 元素

> ID：868132
> 
> 赞同：2
> 
> 时间：2009-05-15T11:22:58.390
> 
> 标签：html, outlook, html-table, rendering, outlook-2007

我尝试使时事通讯与 Outlook 2007 兼容，但 Outlook 呈现引擎不是很合乎逻辑。下面的代码不会像在 Firefox 和其他渲染引擎中那样将边框设置为 1 像素的宽度，但它在其中一些 td 元素之间添加了一些额外的空间。这个问题有解决方法吗？

```
<table>
<tr>

<td width="0" style="border-left: 1px solid #cdcdcd; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-left: 1px solid #c1c1c1; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-left: 1px solid #adadad; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-left: 1px solid #949494; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>

<td width="100%" bgcolor="white">
content here
</td>

<td width="0" style="border-right: 1px solid #949494; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-right: 1px solid #adadad; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-right: 1px solid #c1c1c1; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>
<td width="0" style="border-right: 1px solid #cdcdcd; border-bottom: 0px none; border-top: 0px none; margin: 0;" ></td>

</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T11:38:07.043

我刚刚在 Outlook 2007 中设置了border-collapse:"collapse", cellspacing="0", cellpadding = "0" 并且它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T11:28:48.050

`<table cellspacing = "0">`如果我理解正确，将解决您的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T11:31:11.133

你试过在桌子上设置“border-collapse：collapse”吗？

显示 Outlook 07/03 支持哪些 CSS 属性的非常有用的指南：http: [//www.campaignmonitor.com/blog/post/2533/a-guide-to-css-support-in-emai-2/#个人电脑](http://www.campaignmonitor.com/blog/post/2533/a-guide-to-css-support-in-emai-2/#pc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-06T14:44:09.383

您可以尝试使用 Word 2007 制作时事通讯，将其保存`HTML`为其他电子邮件客户端，然后对其进行调整（修剪不必要的内容）。

Outlook (<2007) 默认使用 Trident，即 IE 用于接收邮件的引擎，以及用于发送邮件的 Word HTML 渲染引擎……[直到 Office 2007，人们都讨厌它。](http://blogs.zdnet.com/microsoft/?p=229)

现在，[它使用Word 2007的渲染](http://www.campaignmonitor.com/blog/post/2393/microsoft-takes-email-design-b/)，这[是相当缺乏](http://msdn.microsoft.com/en-us/library/aa338201.aspx)的。[在 microsoft 的页面上](http://msdn.microsoft.com/en-us/library/aa338201.aspx)，您可以看到可以使用的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-12T00:09:10.617

我以前遇到过这个问题。要使其在 Outlook 中正确显示，您必须将其设置为：

```
<td style="border:solid windowtext 1.0pt;"> 
```

使边框显示出来。

这有点奇怪，但那是你的微软。

# visual-studio - 无法打开网站：http://..禁止访问

> ID：868144
> 
> 赞同：0
> 
> 时间：2009-05-15T11:29:25.427
> 
> 标签：visual-studio, visual-studio-2008, iis, iis-7, frontpage

也许有人已经遇到了下一个问题：

当我尝试使用位于 Windows Server 2008 SP2 Enterprise x64 (IIS 7.0) 上的 Visual Studio 2008 TS（文件 -> 打开 -> 网站 -> 远程）打开删除网站时，我收到下一个错误：

[替代文字 http://img193.imageshack.us/img193/7820/croppercapture1.png](http://img193.imageshack.us/img193/7820/croppercapture1.png)

我可以访问服务器。我为该网站根目录添加了具有完全权限的用户“每个人”，但这没有帮助。

我还为 IIS 7.0 安装了 FrontPage 服务器扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T11:33:09.693

作为它的 IIS7 它的复杂性；虽然有一个关于[learniis](http://learn.iis.net/page.aspx/387/using-visual-studio-2008-with-iis-70/)的页面。

# .net - 在 .NET Compact 框架中使用的自定义控件的属性

> ID：868149
> 
> 赞同：0
> 
> 时间：2009-05-15T11:31:02.473
> 
> 标签：.net, compact-framework, properties

我可以在属性窗口中显示我的自定义控件属性（使用 EditorBrowsable() 属性）。但是我有另一个属性，它的返回类型是类。因此，相同的属性以只读格式出现在窗口中。我需要属性，它应该在设计时采用类值，就像，

```
Font
    Name="Verdana"
    Size="12" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:18:36.987

而不是使用 EditorBrowsable() 使用：

```
System.ComponentModel.Browsable()
System.ComponentModel.DefaultValue()
System.ComponentModel.Category() 
```

DefaultValue 将告诉设计该属性具有默认值，除非更改，否则不会尝试设置它。类别将您的财产归入特定类别。这两个属性不是必需的，但很好用。

# c# - 跨应用程序池的 SharePoint 列表访问

> ID：868155
> 
> 赞同：1
> 
> 时间：2009-05-15T11:32:23.703
> 
> 标签：c#, sharepoint, web-applications, application-pool, elevated-privileges

我有一个要求，我需要能够从位于我的 Web 前端 (WFE) 上的应用程序页面访问位于管理中心的列表。我遇到的问题是我的 WFE 的应用程序池用户无权访问 SharePoint_AdminContent 数据库，因此我被拒绝访问，他们都有自己的应用程序池

在日志中，它显示以下内容：

> *   恢复为进程标识
> *   SqlConnection.Open 之前的当前用户：名称：SharePointDemo\SPContentPool SID：S-1-5-20 ImpersonationLevel：无
> *   SqlConnection.Open 之后的当前用户：名称：SharePointDemo\SPContentPool：S-1-5-20 ImpersonationLevel：无
> *   SQL Server 实例“SPNSQL”上的数据库“SharePoint_AdminContent_53169fb3-137c-44b2-b90e-961b656e4275”中的用户“SPContentPool”的 SQL 数据库权限不足。下面包括来自 SQL Server 的其他错误信息。对象“proc_EnumLists”、数据库“SharePoint_AdminContent_53169fb3-137c-44b2-b90e-961b656e4275”、架构“dbo”的执行权限被拒绝。

我曾尝试使用 SharePoint\System 用户令牌运行 Daniel Larsons 方法（[http://daniellarson.spaces.live.com/blog/cns!D3543C5837291E93!1919.entry](http://daniellarson.spaces.live.com/blog/cns!D3543C5837291E93!1919.entry)），但它似乎只提升为与应用程序池一样高。

我希望有一种简单的方法来模拟 Admin Web 应用程序的应用程序池，但一直无法找到这样做的方法......或者将进程身份更改为具有访问权限的身份

感谢您收到任何想法、想法或解决方案！

菲尔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T12:22:26.610

您应该尝试使用 List Web 服务来访问列表项。并在连接到 Web 服务之前设置凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T14:16:40.563

您是否尝试过常规[的 Windows 模拟](http://blogs.msdn.com/saurabhkv/archive/2008/05/29/windowsidentity-impersonation-using-c-code.aspx)？您应该能够模拟服务帐户并以这种方式访问​​列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-04T11:19:12.067

问题是 CA 应用程序池和 WFE 应用程序池很可能在不同的帐户下运行，这是最佳实践，尽管当您是开发人员时很烦人。使用 SPSecurity.RunWithElevatedPrivileges 可以解决任何提升权限的问题。

如果您的安全策略允许这样做，您可以为运行 WFE Web 应用程序的应用程序池提供与中央管理应用程序池相同的凭据。

这可以使用以下位置的服务帐户屏幕来完成：

http:///_admin/FarmCredentialManagement.aspx

如果您沿着 Web 服务路线走下去，您可能希望扮演自己的 Web 服务角色，以防止通过 HTTP 进行过多的“聊天”。

# php - str_replace

> ID：868163
> 
> 赞同：2
> 
> 时间：2009-05-15T11:34:33.667
> 
> 标签：php, regex, url, slug

当前代码仅将空格替换为破折号 (-)

```
$url = str_replace(' ','-',$url); 
```

我只想要 URL 上允许的字母、数字和破折号 (-)。

让我知道技巧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T11:43:46.390

你想要这个来生成[slug](http://www.google.com/search?q=url+slug)吗？

然后你可以做这样的事情：

```
$slugified = preg_replace('/[^-a-z0-9]+/i', '-', strtolower(trim($url))); 
```

它将首先去除前导和尾随空格，将字符串转换为小写，然后用单个替换所有非单词字符（不是 az、0-9 或 -）`-`

**美好的*#天**将变成`a-beautiful-day`

`strtolower()`如果您不介意 slug 中的大写字母，请删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-15T12:03:08.437

要从任何字符串（包括带有疯狂 UTF-8 字符的字符串）生成 slug，我使用以下内容（取自 WordPress 源代码）。我意识到它需要比此处发布的其他答案更多的代码，但这是迄今为止自动生成 slug 的最强大和最完整的解决方案。

首先，我们需要一个`remove_accents()`函数将所有重音字符转换为 ASCII 字符，例如`á`变成`a`.

```
/**
 * Converts all accent characters to ASCII characters.
 *
 * If there are no accent characters, then the string given is just returned.
 *
 * @param string $string Text that might have accent characters
 * @return string Filtered string with replaced "nice" characters.
 */
function remove_accents($string) {
 if (!preg_match('/[\x80-\xff]/', $string))
  return $string;
 if (seems_utf8($string)) {
  $chars = array(
  // Decompositions for Latin-1 Supplement
  chr(195).chr(128) => 'A', chr(195).chr(129) => 'A',
  chr(195).chr(130) => 'A', chr(195).chr(131) => 'A',
  chr(195).chr(132) => 'A', chr(195).chr(133) => 'A',
  chr(195).chr(135) => 'C', chr(195).chr(136) => 'E',
  chr(195).chr(137) => 'E', chr(195).chr(138) => 'E',
  chr(195).chr(139) => 'E', chr(195).chr(140) => 'I',
  chr(195).chr(141) => 'I', chr(195).chr(142) => 'I',
  chr(195).chr(143) => 'I', chr(195).chr(145) => 'N',
  chr(195).chr(146) => 'O', chr(195).chr(147) => 'O',
  chr(195).chr(148) => 'O', chr(195).chr(149) => 'O',
  chr(195).chr(150) => 'O', chr(195).chr(153) => 'U',
  chr(195).chr(154) => 'U', chr(195).chr(155) => 'U',
  chr(195).chr(156) => 'U', chr(195).chr(157) => 'Y',
  chr(195).chr(159) => 's', chr(195).chr(160) => 'a',
  chr(195).chr(161) => 'a', chr(195).chr(162) => 'a',
  chr(195).chr(163) => 'a', chr(195).chr(164) => 'a',
  chr(195).chr(165) => 'a', chr(195).chr(167) => 'c',
  chr(195).chr(168) => 'e', chr(195).chr(169) => 'e',
  chr(195).chr(170) => 'e', chr(195).chr(171) => 'e',
  chr(195).chr(172) => 'i', chr(195).chr(173) => 'i',
  chr(195).chr(174) => 'i', chr(195).chr(175) => 'i',
  chr(195).chr(177) => 'n', chr(195).chr(178) => 'o',
  chr(195).chr(179) => 'o', chr(195).chr(180) => 'o',
  chr(195).chr(181) => 'o', chr(195).chr(182) => 'o',
  chr(195).chr(182) => 'o', chr(195).chr(185) => 'u',
  chr(195).chr(186) => 'u', chr(195).chr(187) => 'u',
  chr(195).chr(188) => 'u', chr(195).chr(189) => 'y',
  chr(195).chr(191) => 'y',
  // Decompositions for Latin Extended-A
  chr(196).chr(128) => 'A', chr(196).chr(129) => 'a',
  chr(196).chr(130) => 'A', chr(196).chr(131) => 'a',
  chr(196).chr(132) => 'A', chr(196).chr(133) => 'a',
  chr(196).chr(134) => 'C', chr(196).chr(135) => 'c',
  chr(196).chr(136) => 'C', chr(196).chr(137) => 'c',
  chr(196).chr(138) => 'C', chr(196).chr(139) => 'c',
  chr(196).chr(140) => 'C', chr(196).chr(141) => 'c',
  chr(196).chr(142) => 'D', chr(196).chr(143) => 'd',
  chr(196).chr(144) => 'D', chr(196).chr(145) => 'd',
  chr(196).chr(146) => 'E', chr(196).chr(147) => 'e',
  chr(196).chr(148) => 'E', chr(196).chr(149) => 'e',
  chr(196).chr(150) => 'E', chr(196).chr(151) => 'e',
  chr(196).chr(152) => 'E', chr(196).chr(153) => 'e',
  chr(196).chr(154) => 'E', chr(196).chr(155) => 'e',
  chr(196).chr(156) => 'G', chr(196).chr(157) => 'g',
  chr(196).chr(158) => 'G', chr(196).chr(159) => 'g',
  chr(196).chr(160) => 'G', chr(196).chr(161) => 'g',
  chr(196).chr(162) => 'G', chr(196).chr(163) => 'g',
  chr(196).chr(164) => 'H', chr(196).chr(165) => 'h',
  chr(196).chr(166) => 'H', chr(196).chr(167) => 'h',
  chr(196).chr(168) => 'I', chr(196).chr(169) => 'i',
  chr(196).chr(170) => 'I', chr(196).chr(171) => 'i',
  chr(196).chr(172) => 'I', chr(196).chr(173) => 'i',
  chr(196).chr(174) => 'I', chr(196).chr(175) => 'i',
  chr(196).chr(176) => 'I', chr(196).chr(177) => 'i',
  chr(196).chr(178) => 'IJ',chr(196).chr(179) => 'ij',
  chr(196).chr(180) => 'J', chr(196).chr(181) => 'j',
  chr(196).chr(182) => 'K', chr(196).chr(183) => 'k',
  chr(196).chr(184) => 'k', chr(196).chr(185) => 'L',
  chr(196).chr(186) => 'l', chr(196).chr(187) => 'L',
  chr(196).chr(188) => 'l', chr(196).chr(189) => 'L',
  chr(196).chr(190) => 'l', chr(196).chr(191) => 'L',
  chr(197).chr(128) => 'l', chr(197).chr(129) => 'L',
  chr(197).chr(130) => 'l', chr(197).chr(131) => 'N',
  chr(197).chr(132) => 'n', chr(197).chr(133) => 'N',
  chr(197).chr(134) => 'n', chr(197).chr(135) => 'N',
  chr(197).chr(136) => 'n', chr(197).chr(137) => 'N',
  chr(197).chr(138) => 'n', chr(197).chr(139) => 'N',
  chr(197).chr(140) => 'O', chr(197).chr(141) => 'o',
  chr(197).chr(142) => 'O', chr(197).chr(143) => 'o',
  chr(197).chr(144) => 'O', chr(197).chr(145) => 'o',
  chr(197).chr(146) => 'OE',chr(197).chr(147) => 'oe',
  chr(197).chr(148) => 'R',chr(197).chr(149) => 'r',
  chr(197).chr(150) => 'R',chr(197).chr(151) => 'r',
  chr(197).chr(152) => 'R',chr(197).chr(153) => 'r',
  chr(197).chr(154) => 'S',chr(197).chr(155) => 's',
  chr(197).chr(156) => 'S',chr(197).chr(157) => 's',
  chr(197).chr(158) => 'S',chr(197).chr(159) => 's',
  chr(197).chr(160) => 'S', chr(197).chr(161) => 's',
  chr(197).chr(162) => 'T', chr(197).chr(163) => 't',
  chr(197).chr(164) => 'T', chr(197).chr(165) => 't',
  chr(197).chr(166) => 'T', chr(197).chr(167) => 't',
  chr(197).chr(168) => 'U', chr(197).chr(169) => 'u',
  chr(197).chr(170) => 'U', chr(197).chr(171) => 'u',
  chr(197).chr(172) => 'U', chr(197).chr(173) => 'u',
  chr(197).chr(174) => 'U', chr(197).chr(175) => 'u',
  chr(197).chr(176) => 'U', chr(197).chr(177) => 'u',
  chr(197).chr(178) => 'U', chr(197).chr(179) => 'u',
  chr(197).chr(180) => 'W', chr(197).chr(181) => 'w',
  chr(197).chr(182) => 'Y', chr(197).chr(183) => 'y',
  chr(197).chr(184) => 'Y', chr(197).chr(185) => 'Z',
  chr(197).chr(186) => 'z', chr(197).chr(187) => 'Z',
  chr(197).chr(188) => 'z', chr(197).chr(189) => 'Z',
  chr(197).chr(190) => 'z', chr(197).chr(191) => 's',
  // Euro Sign
  chr(226).chr(130).chr(172) => 'E',
  // GBP (Pound) Sign
  chr(194).chr(163) => '');
  $string = strtr($string, $chars);
 } else {
  // Assume ISO-8859-1 if not UTF-8
  $chars['in'] = chr(128).chr(131).chr(138).chr(142).chr(154).chr(158)
   .chr(159).chr(162).chr(165).chr(181).chr(192).chr(193).chr(194)
   .chr(195).chr(196).chr(197).chr(199).chr(200).chr(201).chr(202)
   .chr(203).chr(204).chr(205).chr(206).chr(207).chr(209).chr(210)
   .chr(211).chr(212).chr(213).chr(214).chr(216).chr(217).chr(218)
   .chr(219).chr(220).chr(221).chr(224).chr(225).chr(226).chr(227)
   .chr(228).chr(229).chr(231).chr(232).chr(233).chr(234).chr(235)
   .chr(236).chr(237).chr(238).chr(239).chr(241).chr(242).chr(243)
   .chr(244).chr(245).chr(246).chr(248).chr(249).chr(250).chr(251)
   .chr(252).chr(253).chr(255);
  $chars['out'] = "EfSZszYcYuAAAAAACEEEEIIIINOOOOOOUUUUYaaaaaaceeeeiiiinoooooouuuuyy";
  $string = strtr($string, $chars['in'], $chars['out']);
  $double_chars['in'] = array(chr(140), chr(156), chr(198), chr(208), chr(222), chr(223), chr(230), chr(240), chr(254));
  $double_chars['out'] = array('OE', 'oe', 'AE', 'DH', 'TH', 'ss', 'ae', 'dh', 'th');
  $string = str_replace($double_chars['in'], $double_chars['out'], $string);
 }
 return $string;
} 
```

以下函数`seems_utf8()`将检查字符串是否为 UTF-8 编码。

```
/**
 * Checks to see if a string is utf8 encoded.
 *
 * @author bmorel at ssi dot fr
 *
 * @param string $Str The string to be checked
 * @return bool True if $Str fits a UTF-8 model, false otherwise.
 */
function seems_utf8($Str) { # by bmorel at ssi dot fr
 $length = strlen($Str);
 for ($i = 0; $i < $length; $i++) {
  if (ord($Str[$i]) < 0x80) continue; # 0bbbbbbb
  elseif ((ord($Str[$i]) & 0xE0) == 0xC0) $n = 1; # 110bbbbb
  elseif ((ord($Str[$i]) & 0xF0) == 0xE0) $n = 2; # 1110bbbb
  elseif ((ord($Str[$i]) & 0xF8) == 0xF0) $n = 3; # 11110bbb
  elseif ((ord($Str[$i]) & 0xFC) == 0xF8) $n = 4; # 111110bb
  elseif ((ord($Str[$i]) & 0xFE) == 0xFC) $n = 5; # 1111110b
  else return false; # Does not match any model
  for ($j = 0; $j < $n; $j++) { # n bytes matching 10bbbbbb follow ?
   if ((++$i == $length) || ((ord($Str[$i]) & 0xC0) != 0x80))
   return false;
  }
 }
 return true;
} 
```

该`utf8_uri_encode()`函数对要在 slug 中使用的 Unicode 值进行编码。

```
/**
 * Encode the Unicode values to be used in the URI.
 *
 * @param string $utf8_string
 * @param int $length Max length of the string
 * @return string String with Unicode encoded for URI.
 */
function utf8_uri_encode($utf8_string, $length = 0) {
 $unicode = '';
 $values = array();
 $num_octets = 1;
 $unicode_length = 0;
 $string_length = strlen($utf8_string);
 for ($i = 0; $i < $string_length; $i++) {
  $value = ord($utf8_string[$i]);
  if ($value < 128) {
   if ($length && ($unicode_length >= $length))
    break;
   $unicode .= chr($value);
   $unicode_length++;
  } else {
   if (count($values) == 0) $num_octets = ($value < 224) ? 2 : 3;
   $values[] = $value;
   if ($length && ($unicode_length + ($num_octets * 3)) > $length)
    break;
   if (count( $values ) == $num_octets) {
    if ($num_octets == 3) {
     $unicode .= '%' . dechex($values[0]) . '%' . dechex($values[1]) . '%' . dechex($values[2]);
     $unicode_length += 9;
    } else {
     $unicode .= '%' . dechex($values[0]) . '%' . dechex($values[1]);
     $unicode_length += 6;
    }
    $values = array();
    $num_octets = 1;
   }
  }
 }
 return $unicode;
} 
```

最后，我们可以声明这个`slug()`函数，它将从任何 UTF-8 字符串生成一个 slug：

```
/**
 * Sanitizes title, replacing whitespace with dashes.
 *
 * Limits the output to alphanumeric characters, underscore (_) and dash (-).
 * Whitespace becomes a dash.
 *
 * @param string $title The title to be sanitized.
 * @return string The sanitized title.
 */
function slug($title) {
 $title = strip_tags($title);
 // Preserve escaped octets.
 $title = preg_replace('|%([a-fA-F0-9][a-fA-F0-9])|', '---$1---', $title);
 // Remove percent signs that are not part of an octet.
 $title = str_replace('%', '', $title);
 // Restore octets.
 $title = preg_replace('|---([a-fA-F0-9][a-fA-F0-9])---|', '%$1', $title);
 $title = remove_accents($title);
 if (seems_utf8($title)) {
  if (function_exists('mb_strtolower')) {
   $title = mb_strtolower($title, 'UTF-8');
  }
  $title = utf8_uri_encode($title, 200);
 }
 $title = strtolower($title);
 $title = preg_replace('/&.+?;/', '', $title); // kill entities
 $title = preg_replace('/[^%a-z0-9 _-]/', '', $title);
 $title = preg_replace('/\s+/', '-', $title);
 $title = preg_replace('|-+|', '-', $title);
 $title = trim($title, '-');
 return $title;
} 
```

在此之后，您可以简单地使用该`slug()`功能来*抑制*任何东西。

```
<?php
// The following line of code would echo 'internationalization-is-awesome'
echo slug('Iñtërnâtiônàlizætiøn is awesome');
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T11:37:48.167

您的代码正在用破折号替换所有空格，请查看[str_replace()](http://de.php.net/manual/en/function.str-replace.php)的文档。

我会为实际任务使用正则表达式：

```
preg_replace('/[^a-z0-9-]/i', '', $url); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T11:37:45.843

您是否有理由只想要 URL 中允许的内容的子集？

您是否考虑过只使用 urlencode()？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T11:44:23.580

听起来您想生成用于 url 的“slugs”？

例如：

```
lala.com/user/12/user-name 
```

您想从“Ben Lumley”之类的内容中生成用户名位吗？

我一直在使用这个：

```
static public function slugify($text)
{ 
// replace non letter or digits by -
$text = preg_replace('~[^\\pL\d]+~u', '-', $text);

// trim
$text = trim($text, '-');

// transliterate
$text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);

// lowercase
$text = strtolower($text);

// remove unwanted characters
$text = preg_replace('~[^-\w]+~', '', $text);

if (empty($text))
{
  return 'n-a';
}

return $text;

} 
```

它来自 symfony jobeet 教程 - 但它只是 php。

[http://www.symfony-project.org/jobeet/1_2/Propel/en/](http://www.symfony-project.org/jobeet/1_2/Propel/en/)

这是随之而来的单元测试，它们显示了它转换的内容：

```
$t->is(Jobeet::slugify('Sensio'), 'sensio', '::slugify() converts all characters to lower case');
$t->is(Jobeet::slugify('sensio labs'), 'sensio-labs', '::slugify() replaces a white space by a -');
$t->is(Jobeet::slugify('sensio   labs'), 'sensio-labs', '::slugify() replaces several white spaces by a single -');
$t->is(Jobeet::slugify('  sensio'), 'sensio', '::slugify() removes - at the beginning of a string');
$t->is(Jobeet::slugify('sensio  '), 'sensio', '::slugify() removes - at the end of a string');
$t->is(Jobeet::slugify('paris,france'), 'paris-france', '::slugify() replaces non-ASCII characters by a -'); 
```

# c# - C# - 取决于预期类型的 方法行为

> ID：868164
> 
> 赞同：1
> 
> 时间：2009-05-15T11:34:53.247
> 
> 标签：c#, types

是否可以在 C# 方法中以这样的方式编写，当我编写时

```
 String contestId = getParameter("contestId") 
```

我在字符串中得到了比赛ID，但是当我写的时候：

```
 int contestId = getParameter("contestId") 
```

我将竞赛 ID 解析为整数？

这只是一个简单的例子，展示了我试图实现的目标。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-15T11:36:27.080

不，不可能仅根据返回类型重载方法。但是，您可以引入一个通用参数：

```
T getParameter<T>(string input) {
    // ... do stuff based on T ...
} 
```

如果您使用的是 C# 3.0，则可以将此方法用作：

```
var str = getParameter<string>("contestid");
var integer = getParameter<int>("contestid"); 
```

因此只说一次实际类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:40:32.937

您*可以*做的一件事是返回一个单独的对象，该对象具有到 int 和 string 的隐式转换运算符。这将非常接近您要求的行为。

我不会在实践中这样做。隐式转换通常会带来比其价值更多的麻烦。

相反，添加一个通用参数，如 Mehrdad 所示：

```
var str = getParameter<string>("contestid");
var integer = getParameter<int>("contestid"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T11:42:50.747

我更喜欢这种方法，它读起来很好。

```
Public Class ResultProxy
{
  Private Object _Obj
  Public ResultProxy(Object O)
  { _Obj = O; }

  Public T As<T>()
  { return (T)_Obj; }
} 
```

...

```
Public ResultProxy getParameter("contestId")
{
// your method's code
   return new ResultProxy(YourPersonalFavorateReturnType);
} 
```

...

```
String s = getParameter("contestId").As<String>(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:01:50.340

首先，答案是否像许多人提到的那样。为什么？您是否必须将方法的结果分配给某物？例如你能有

```
int getValue()
{
  return 4;
}

getValue(); 
```

答案是肯定的，它可以，所以编译器无法通过返回类型知道你打算调用哪个方法。

这里的个人意见，但我会建议一些类似的东西

```
public string getContestIdAsString(string ConetestId);

public int getContestIdAsInt(string ContestId); 
```

很明显每个人都在做什么，你就可以解决你的问题。除非有什么我想念的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T11:40:06.557

```
public T GetParameter<T>(string parameterName)
{
   //Do work
   return value
}

string contestId = getParameter<string>("contestId")
int contestId = getParameter<int>("contestId") 
```

这是您最好的选择的一个例子。

# python - 在 python 中创建 UDP 套接字时使用什么主机？

> ID：868173
> 
> 赞同：4
> 
> 时间：2009-05-15T11:37:25.143
> 
> 标签：python, sockets, udp

我希望 ro 接收一些通过 VPN 作为 UDP 数据包发送的数据。所以用python写了（大部分是复制的）这个程序：

```
import socket
import sys

HOST = ??????? 
PORT = 80

# SOCK_DGRAM is the socket type to use for UDP sockets
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

sock.bind((HOST,PORT))
data,addr = sock.recv(1024)
print "Received: %s" % data
print "Addr: %s" % addr 
```

我应该使用什么作为主机？我知道发件人的 IP，但似乎任何不是本地的东西都会给我 socket.error: [Errno 10049]。VPN 给我的 IP（即发送方发送到的 IP）？还是只是本地主机？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-15T11:40:10.067

host 参数是您要绑定到的主机 IP。指定您的一个接口的 IP（例如，您的公共 IP，或 127.0.0.1 用于 localhost），或使用 0.0.0.0 绑定到所有接口。如果您绑定到特定接口，您的服务将仅在该接口上可用 - 例如，如果您想要运行只能通过 localhost 访问的东西，或者如果您有多个 IP 并且需要在每个 IP 上运行不同的服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:42:54.567

"0.0.0.0" 将监听所有传入的主机。例如，

```
sock.bind(("0.0.0.0", 999))
data,addr = sock.recv(1024) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T11:49:50.073

采用：

```
sock.bind(("", 999)) 
```

# java - 使用 grails + 工作流 + java 开发 web 应用程序，如何集成它们？

> ID：868183
> 
> 赞同：0
> 
> 时间：2009-05-15T11:38:15.047
> 
> 标签：java, grails, workflow

我必须使用 grails + 工作流 + java 开发一个 Web 应用程序，集成它们的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-17T02:14:19.083

最好的方法是首先评估现有的插件，看看是否有一些东西可以很容易地适应你的问题。我推荐[grailsflow](http://www.grailsflow.org/screenshots.html)和[Jbpm](http://www.grails.org/Jbpm+Plugin)插件。

# iphone - 使用 Applescript 递归地将资源添加到 Xcode 项目

> ID：868184
> 
> 赞同：4
> 
> 时间：2009-05-15T11:38:20.290
> 
> 标签：iphone, xcode, applescript

是否可以使用 Applescript 将文件夹作为一个组添加到 Xcode 项目中，递归地添加它下面的所有内容，就好像它被拖到 Groups & Files 列表中一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-23T01:33:36.930

I needed all files in subdirectories, apart from lproj directories, to be flat in the .app bundle. The assets were in this structure:

```
${assetsDir}/${targetCode}/
    Icon.png
    en.lproj
    ja.lproj
    ...
    *.lproj
    resources{$targetCode/
        Target.plist
        audio/Audio.plist
             *.mp3 
```

I added a Run Script build phase prior to "Copy Bundle Resources" with something similar to following:

```
COPY_COMMAND="$DEVELOPER_LIBRARY_DIR/PrivateFrameworks/DevToolsCore.framework/Resources/pbxcp"
copyPNGCommand="$PLATFORM_DEVELOPER_LIBRARY_DIR/Xcode/Plug-ins/iPhoneOS Build System Support.xcplugin/Contents/Resources/copypng"

lprojDirectories=$( find ${assetsDirectory}/${targetCode} -type d -name *lproj )

for lprojDirectory in $lprojDirectories; do
    "$COPY_COMMAND" -exclude .DS_Store -exclude .svn -resolve-src-symlinks "$lprojDirectory"  "$CONFIGURATION_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH"
done

MP3s=$( find ${assetsDirectory}/${targetCode}/resources${targetCode} -type f -name *.mp3 )

for MP3 in $MP3s; do
    filename=$( basename "$PNG" )
    "$COPY_COMMAND" -resolve-src-symlinks "$MP3"  "$CONFIGURATION_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH"
done

PNGs=$( find ${assetsDirectory}/${targetCode}/resources${targetCode} -type f -name *.png )

for PNG in $PNGs; do
    if [ -x "$copyPNGCommand" ]; then
        filename=$( basename "$PNG" )
        "$copyPNGCommand" -compress "" "$PNG" "$CONFIGURATION_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH/$filename"
    else
        "$COPY_COMMAND" -resolve-src-symlinks "$PNG" "$CONFIGURATION_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH"
    fi
done

Plists=$( find ${assetsDirectory}/${targetCode}/resources${targetCode} -type f -name '*.plist' )

for Plist in $Plists; do
    "$XCODE_APP_SUPPORT_DIR/Plug-ins/CoreBuildTasks.xcplugin/Contents/Resources/copyplist" --convert binary1 "$Plist" --outdir "$CONFIGURATION_BUILD_DIR/$UNLOCALIZED_RESOURCES_FOLDER_PATH"
done 
```

Note: copypng only works when building for the device, hence the test

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-21T03:21:29.077

我不完全那样做，但我做了一个非常相似的事情。我将以下 shell 命令作为构建后命令运行：（我已将其分成几行，以便于阅读）

```
/Developer/Library/PrivateFrameworks/DevToolsCore.framework/Resources/pbxcp
   -exclude .DS_Store -exclude CVS -exclude .svn -resolve-src-symlinks
   $FOLDER $APP_FOLDER 
```

此命令复制`$FOLDER`到您的应用程序，并且`$APP_FOLDER`是（构建）`.app`文件夹的位置，*而不是*Xcode 项目。例如，我的命令扩展到

```
/Developer/Library/PrivateFrameworks/DevToolsCore.framework/Resources/pbxcp
   -exclude .DS_Store -exclude CVS -exclude .svn -resolve-src-symlinks
   /Users/beder/src/myproj/data
   /Users/beder/src/myproj/build-iphone/Debug-iphonesimulator/Myproj.app 
```

（我的构建系统使用 CMake，这就是为什么该`.app`文件夹位于一个非常规位置的原因。）

最终结果是将数据文件夹复制到该`.app`文件夹​​中（如您所料 - `../Myproj.app/data/`）。这绕过了将其复制到 Xcode，但我发现我不需要该文件夹出现在 Xcode 中。每次构建后，它都会复制文件夹，因此我可以使用其中的文件，就好像我已将文件夹拖到 Xcode 中一样。

显然这不是applescript，但你可以在applescript中执行一个shell命令

```
do shell script "whatever" 
```

# subsonic - Subsonic CMS/入门站点发生了什么

> ID：868188
> 
> 赞同：0
> 
> 时间：2009-05-15T11:39:17.493
> 
> 标签：subsonic, content-management-system

我认为 SubSonic 曾经有 CMS（或 Start Site）Web 应用程序可用，但在我的一生中我找不到它。

一年前， Rob[在他的博客上提到了它，](http://blog.wekeroad.com/subsonic/subsonic-new-project-site-online/)当时他将该网站移至 Graffiti CMS，[Google Code 项目网站](http://code.google.com/p/subsonicproject/)对此有参考：

> 扩展的坚实基础。我们的入门网站预装了内置的 ASP.NET 成员资格、AJAX、完整的 3 列弹性 XHTML 主题和用户管理页面，您可以从中管理站点的成员资格。这至少是一周的工作量——已经完成了！

但我在任何地方都找不到。有谁知道它在哪里，或者发生了什么事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T11:48:58.313

似乎 Starter Site 项目已更名为 SubSonic CMS 并移至[此处](http://code.google.com/p/subsoniccms/)。旧的入门站点可通过[这里](http://code.google.com/p/subsonicproject/source/browse/?r=146#svn/trunk/StarterSite)的主要 SubSonic Google 代码存储库中的旧 svn 修订版获得。

# linux - 安装 RPM 依赖项

> ID：868197
> 
> 赞同：0
> 
> 时间：2009-05-15T11:40:37.867
> 
> 标签：linux, installation, rpm

我正在尝试安装 dbus-1.1.2-12.el5.i386 但出现错误

" dbus-1.1.2-12.el5.i386 需要 dbus-libs = 1.1.2-12.el5" :-(

所以我在同一个目录下下载了“dbus-libs-1.1.2-12.el5.i386.rpm”并再次运行命令rpm -ivh dbus-1.1.2-12.el5.i386，但我还是一样错误。在论坛上搜索时，我发现 RPM 会处理依赖项，如果它们存在于同一个目录中。但它不适用于 -ivh 选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:11:21.610

史蒂夫 B 是正确的：

```
yum install dbus-libs
yum install dbus 
```

yum 还允许你为一个包做“whatprovides”：

```
yum whatprovides dbus-libs 
```

这将显示您是否在您的系统上“安装”了另一个版本的 dbus-libs，它会列出提供包的 repos 以及本地提供（安装）的任何版本。

还有帮助的是：

```
rpm -q dbus 
```

这将显示本地安装的任何软件包：

```
rpm -q dbus-libs 
```

或者

```
rpm -qa | grep 'dbus' 
```

您可能会发现您已经安装了早期版本的 dbus，这种情况：

```
yum -y update dbus 
```

希望这可以帮助。
[http://www.of-networks.co.uk](http://www.of-networks.co.uk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T12:40:34.040

在安装 dbus 之前，您需要安装相关的 RPM。您还应该知道这是一个艰难的方法，如今基于 RPM 的发行版通常具有依赖关系管理系统，因此您无需手动执行此操作。例如，在 Redhat/Fedora/Centos 上，您只需键入“yum install mypackagename”。

# linux - Linux命令移动目录

> ID：868198
> 
> 赞同：25
> 
> 时间：2009-05-15T11:40:52.047
> 
> 标签：linux, command-line, mv

我的旧目录和新目录里面有相同的文件夹和文件。

我尝试：

```
mv -if old/* new/* 
```

并得到错误

> mv: 无法将 `./xxxxxx' 移动到其自身的子目录

我该如何移动它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-15T11:43:24.537

您应该使用`mv -if old/* new/`没有尾随的`*`.

这是因为它展开到

```
mv -if old/foo old/bar old/baz new/foo new/bar new/baz 
```

即把所有东西都移到 new/baz

这不是你想要的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-16T10:11:16.497

```
reef@localhost:/tmp/experiment$ ls a
11  22  33
reef@localhost:/tmp/experiment$ ls b
22  33
reef@localhost:/tmp/experiment$ ls
a  b
reef@localhost:/tmp/experiment$ mv a/* b
reef@localhost:/tmp/experiment$ ls a
reef@localhost:/tmp/experiment$ ls b
11  22  33 
```

有用。你想达到什么目的？你能否写一个简短的例子来说明输入数据应该是什么样子以及输出数据应该是什么样子？事实是我不知道你想做什么 :) 帮助我帮助你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T10:03:14.833

请注意， mv a/* b/ 不要将 a/ 中的文件 .*（文件名以 '.' 开头）移动到 b/

前任：

```
$ mkdir -p a/d b && touch a/f a/.f a/d/.f
$ mv a/* b/
$ ls -a a/
.  ..  .f 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-06-13T23:37:48.550

如果您正在从 ext2/3/4 文件系统复制到 FAT32 文件系统，并且文件名包含 FAT32 命名约定的无效字符，您会收到这个非常烦人且不正确的错误消息。我怎么知道？我与这个错误——是的，这是一个内核错误——搏斗了 6 个小时，然后才发现它。我认为这是一个 shell 解释器错误，我认为这是一个“mv”错误 - 我尝试了多个不同的 shell，一切。试试这个实验：在 ext 文件系统上，“touch 'a:b'”它们“mv”到 FAT32 文件系统。试试看，你会喜欢（讨厌）结果。'<' 和 '>' （\074 和 \076）也是如此。

感谢“man mv” - 这是一个真正的大帮助，不要辞掉你的日常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T06:05:24.670

可能是你得到了答案，但上面的答案对我不起作用......最后我得到了很多研究答案。（问题是由于文件所有权）
，只需将 sudo 放在命令及其工作之前...... :) cp 和 mv 命令也是如此。

```
sudo mv -if old/* new/ 
```

# java - 有什么方法可以确定 Java 中的对象是否可轻松访问？

> ID：868203
> 
> 赞同：2
> 
> 时间：2009-05-15T11:41:42.247
> 
> 标签：java, soft-references

为了执行一些测试，我想检查当我存储在 SoftReference 对象缓存中的部分或全部对象被处置时我的应用程序的行为。

为了做到这一点，我想手动清除存储在缓存的 SoftReference 对象中的引用 - 模拟 VM 处理这些对象 - 但前提是当前没有其他任何东西对该对象具有强引用（如果另一个进程最近从缓存中检索了引用的对象）。

我的应用程序是单线程的，所以我不需要担心缓存对象的软可达性会随着代码的执行而改变。这也意味着我目前没有任何锁定机制 - 如果我有，我可能已经使用这些来确定一个对象是否“正在使用”并因此可以强访问，但可惜我不需要这种锁定。

我尝试过的一种方法是为存储在缓存中的每个对象创建一个额外的 SoftReference，该缓存已注册到 ReferenceQueue。我希望这样做时，缓存中的所有软可访问对象都会将它们的附加 SoftReference 添加到队列中，所以我所要做的就是遍历队列，并从缓存中删除这些对象。但是，似乎 GC 在闲暇时会将可轻松访问的对象排入其各自的队列，因此一旦我完成对缓存中的对象的迭代，就不能保证任何东西都会添加到队列中。

我还看过的一件事是 -XX:SoftRefLRUPolicyMSPerMB JVM 选项，它的值非常小。通过明智的内存分配，这很可能会在软可访问的那一刻为我从缓存中清除软可访问的对象，但我真的希望应用程序正常运行，直到我收到从缓存中清除软可访问对象的请求. 作为 JVM 选项，我不相信我可以在我的应用程序运行时更改此值。

那么，是否有人对我如何确定一个对象是否只能轻触（因此可以清除）有任何想法？

**编辑：**可能还不清楚的一些额外点：

*   当我想清除这些软引用对象时，该应用程序可能会做有用​​的工作。所以我宁愿不要尝试让 GC 为我清除对象。
*   如果我可以选择清除哪些可轻松到达的对象，那将是更可取的。
*   我想让应用程序正常运行，即使用生产内存设置。更改代码中的设置，然后可以将其重置回其生产值，这很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T11:46:15.417

IIRC，保证（在某种意义上）在`OutOfMemoryError`抛出之前清除软引用。因此，如果您分配大量内存，如果对象没有被强引用，它们应该被清除。（未测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:13:01.087

混合一些答案：正如 Tom Hawtin 所说，分配内存直到你用完内存，例如使用以下代码：

```
private void doOutOfMemory() {
    try {
        List<byte[]> list = new ArrayList<byte[]>();
        while (true) {
            list.add(new byte[200 * 1024 * 1024]);
        }
    } catch (OutOfMemoryError ex) {
    }
} 
```

如果您不想控制清除哪些对象，请对要保留的对象进行强引用。

您也可以改用weakReferences，并且只调用 System.gc() 来清除，不能保证它们总是会被清除...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:03:56.560

在测试时用弱参考系统代替您当前的软参考系统。

一旦发生这种情况，弱引用系统将立即删除没有其他传入引用的对象，而不是等待 jvm 运行垃圾收集。

# c# - 以编程方式将列添加到 WPF 中的列表视图？

> ID：868204
> 
> 赞同：14
> 
> 时间：2009-05-15T11:42:20.590
> 
> 标签：c#, wpf, listview

如何以编程方式将列添加到列表视图？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-15T11:49:34.677

将 listView.View 设置为：

```
GridView myGridView = new GridView();
myGridView.AllowsColumnReorder = true; 
myGridView.ColumnHeaderToolTip = "Employee Information";

GridViewColumn gvc1 = new GridViewColumn();
gvc1.DisplayMemberBinding = new Binding("FirstName");
gvc1.Header = "FirstName";
gvc1.Width = 100;
myGridView.Columns.Add(gvc1);
GridViewColumn gvc2 = new GridViewColumn();
gvc2.DisplayMemberBinding = new Binding("LastName");
gvc2.Header = "Last Name";
gvc2.Width = 100;
myGridView.Columns.Add(gvc2);
GridViewColumn gvc3 = new GridViewColumn();
gvc3.DisplayMemberBinding = new Binding("EmployeeNumber");
gvc3.Header = "Employee No.";
gvc3.Width = 100;
myGridView.Columns.Add(gvc3);

listView.View = myGridView; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-06-18T07:27:51.137

你可以试试这个；

```
GridView _gridView = new GridView();
_gridView.Columns.Add(
    new GridViewColumn 
    {
        DisplayMemberBinding = new Binding("columnTitle"), 
        Header = "columnHeader", 
        Width = double.NaN 
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-28T11:36:36.657

尝试这个：

```
 for(int i=0; i < dt.Columns.Count; i++)
                {
                    GridViewColumn gvc = new GridViewColumn();
                    gvc.Header = "Column"+i;
                    gvc.DisplayMemberBinding = new Binding("column"+i);
                    lvgvc.Columns.Add(gvc);
                } 
```

# watin - 每次弹出窗口出现时如何处理 URL 中 ID 值发生变化的弹出窗口

> ID：868208
> 
> 赞同：0
> 
> 时间：2009-05-15T11:43:03.117
> 
> 标签：watin

我正在使用 WatiN 工具。我有一个场景，我需要选中一个复选框并在弹出窗口中单击一个确定按钮。我使用了 AttachtoIE 方法并使用 URL 属性附加到弹出窗口。现在的问题是 URL 包含一个 ID 属性，并且每次弹出窗口出现时它的值都会发生变化。我该如何处理这个问题，或者除了 AttachtoIE 之外还有其他方法吗？请给一些建议。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-18T08:01:40.973

您可以使用 Find.ByUrl(neww regex("some regexe expression")) 忽略 id 部分。或者，如果您确定在打开弹出窗口之前只打开了一个 IE 实例，请附加到与您打开弹出窗口的浏览器具有不同 URL 的 IE 实例。

HTH，杰伦

# asp.net - 如何从动态创建的 Treeview 中获取数据

> ID：868209
> 
> 赞同：0
> 
> 时间：2009-05-15T11:43:07.797
> 
> 标签：asp.net, dynamic, controls, componentart

我正在为 ASP.NET 2.0 使用 ComponentArt 第三方控件。这是我面临的问题。

我`ComponentArt.Web.UI.TreeView`在运行时创建了一些`Page_Load`. 现在在按钮的单击事件中，我想获取树视图中选定节点的值。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-07-15T13:50:19.170

首先，我假设您将 MultipleSelectEnabled 设置为 true 以允许在 TreeView 中选择多个节点。

如果有，您可以使用 TreeView 的 MultipleSelectedNodes 属性来获取 TreeViewNodes 数组。

从这里你只需要遍历数组并使用节点的 Value 属性来获得你需要的东西。

所以基本上这样的事情应该有效，

```
TreeViewNodes[] selectedNodes = treeViewID.MultipleSelectedNodes;
ArrayList values = new ArrayList(selectedNodes.Count);
foreach (TreeViewNode node in selectedNodes) {  
    values.Add(node.Value);
} 
```

现在，您在 ArrayList 中有您选择的节点值。

# sql - 建议在构建 API 时记录请求数？

> ID：868212
> 
> 赞同：2
> 
> 时间：2009-05-15T11:43:44.363
> 
> 标签：sql, wcf, api, logging

我们有一个相当大的网站，每月处理几百万访问者，我们目前正在为我们的一些合作伙伴开发一个 API。在不久的将来，我们希望将 API 公开给所有访问者。

由于我们试图限制请求的数量，例如 100.000 / 天和 1.000 / 分钟，我需要记录每个 API 密钥的请求总数，并验证 API 用户不超过这个总数。此时我们不会实时检查是否超过限制，而是在站点的控制面板中进行后续检查。我们还需要在控制面板中显示每个用户的时间线，因此如果需要，我们必须快速获得每天或每小时的概览。

我的第一个想法是构建以下应用程序：

API 用户 => 网络服务器 => 将带有 API 密钥的消息发布到消息队列 => 服务获取消息 => 发布到数据库，其中每个用户小时组合 (key|hour|count) 有 1 个项目。这会很快，但我们会删除一些有用的信息（查询、请求/分钟等）。将每个请求保存为数据库中的单独记录可能每天会生成数百万条记录，并且会（我猜想，我不是 DBA）在生成一些图表时会很慢。即使有正确的索引。

我们的平台由大约十个网络服务器、十个前端 SQL 服务器、statsserver 和一些其他用于处理大型任务的服务器组成。所有 Windows（我们的 EMC 除外）和 MS SQL。开发平台是 ASP.Net WCF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T11:47:54.820

我的建议是记录所有内容 - 一个简单的仅附加文本文件最简单 - 并让后台任务定期读取并将日志段汇总到数据库中。与更“复杂”的方法相比，这有几个优点：

*   它更简单。
*   调试起来真的很容易。
*   您可以保留各个日志段，直到您需要从磁盘中删除它们，这样您就可以获得有关各个请求的信息以用于调试和记帐目的。
*   您可以轻松扩展它以收集更多信息，或者改进和更改摘要器，因为这些组件是松散耦合的。
*   分片很容易 - 只需让每台服务器保留自己的日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T11:50:06.953

我会先从记录开始，然后停止执行。您的日志记录可能会显示您不需要强制执行，或者可能会显示您需要不同类型的强制执行。

我刚开始创建一个简单的日志记录 API `ApiLogger.Log(apiKey)`：. 我会让记录器从`HttpContext`. 我一开始只是将它转储到数据库表中，并且只有在性能需要时才会变得更好。

稍后的分析可以确定谁拨打了多少电话，您是否想要多层，每层收取不同的费用等。但目前，只需存储您的业务人员需要的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T11:53:25.010

> 由于我们试图限制请求的数量，例如 100.000 / 天和 1.000 / 分钟，我需要记录每个 api 密钥的请求总数，并验证 api 用户不超过这个总数。

在不久的将来，这样的功能将成为 WCF 的一部分（如果还没有的话）。我目前正在绞尽脑汁想在哪里听到它，这样我就可以直接指出正确的方向。

编辑：找到了！本周在名为“The Thirsty Developer”的播客中，出现了这个话题。[在此处](http://thirstydeveloper.com/2009/05/11/TheThirstyDeveloper62WebsiteScalability.aspx)下载播客，并在 39:40 进入播客的主题出现。对于那些不想听的人，有一个具有此功能的 REST 工具包。我认为工具包可以在[这里找到](http://www.codeplex.com/aspnet/Release/ProjectReleases.aspx?ReleaseId=18830)

# php - MySQL/PHP 查询

> ID：868216
> 
> 赞同：0
> 
> 时间：2009-05-15T11:45:03.220
> 
> 标签：php, mysql

我有 3 组字段（每组由 2 个字段组成），我必须检查某些条件。我不检查每个字段，而是检查一些组合，例如：

1.  团体价格EurBus, priceLocalBus
2.  团体价格EurAvio, priceLocalAvio
3.  团体 priceEurSelf, priceLocalSelf

我的例子（为易读而格式化）——如何改进？

```
$rest .="
WHERE 
  (
    ((priceEurBus+(priceLocalBus / ".$ObrKursQuery.")) <= 400) 
    OR 
    ((priceEurAvio+(priceLocalAvio / ".$ObrKursQuery.")) <= 400) 
    OR
    ((priceEurSelf+(priceLocalSelf / ".$ObrKursQuery.")) <= 400)
  )
"; 
```

`$ObrKursQuery`是我用来将当地货币转换为欧元的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T12:33:21.840

性能改进：您的查询是基于 OR 的，这意味着一旦发现其中一个条件为真，它将立即停止评估条件。尝试以这样的方式排序您的条件，例如，在您的情况下，第一次检查最有可能低于 400。

安全性改进：使用准备好的语句并在使用之前过滤掉变量。在 $ObrKursQuery 的情况下，如果它来自用户输入或不受信任的来源，这是一个未引用的数值，并且您会遇到各种各样的 sql 注入问题（包括算术 sql 注入：如果该值为 0 ，你会得到一个divideByZero错误，可以用作盲sql注入条件）。

可读性改进：确保在编写代码的方式上始终保持一致，如果可能，请遵循一些公认的事实标准，例如以小写开头的变量名：$ObrKursQuery -> $obrKursQuery。此外，为了自我记录代码，请为变量选择表示它们的含义的名称：$ObrKursQuery -> $conversionRatio。

可维护性/可扩展性改进：为 400 使用常量而不是固定值。当您将来更改该值时，您将只想在一个地方而不是整个代码中更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T11:52:05.793

永远不要使用连接来生成 SQL，您应该使用带参数的准备好的 SQL 语句。

在不了解问题域的情况下简化此语句的唯一方法是减少列数。看起来好像每个产品条目都有三个价格。您可以创建产品价格表而不是产品价格列，这将使其成为单一比较，并让您可以灵活地在未来创建更多产品价格。

因此，您需要在产品和价格之间创建一对多的关系。

# c# - 存储通用列表 使用 ApplicationSettingsBase

> ID：868217
> 
> 赞同：6
> 
> 时间：2009-05-15T11:45:10.507
> 
> 标签：c#, .net, serialization, applicationsettingsbase

我正在尝试使用 ApplicationSettingsBase 保存 List<Foo>，但是即使填充了列表，它也只会输出以下内容：

```
<setting name="Foobar" serializeAs="Xml">
    <value />
</setting> 
```

Foo 定义如下：

```
[Serializable()]
public class Foo
{
    public String Name;
    public Keys Key1;
    public Keys Key2;

    public String MashupString
    {
        get
        {
            return Key1 + " " + Key2;
        }
    }

    public override string ToString()
    {
        return Name;
    }
} 
```

如何启用 ApplicationSettingsBase 来存储 List<Foo>？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-15T12:48:00.043

同意 Thomas Levesque：

以下类已正确保存/读回：

```
public class Foo
{
    public string Name { get; set; }

    public string MashupString { get; set; }

    public override string ToString()
    {
        return Name;
    }
} 
```

注意：我不需要`SerializableAttribute`.

**编辑：**这是xml输出：

```
<WindowsFormsApplication1.MySettings>
    <setting name="Foos" serializeAs="Xml">
        <value>
            <ArrayOfFoo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                <Foo>
                    <Name>Hello</Name>
                    <MashupString>World</MashupString>
                </Foo>
                <Foo>
                    <Name>Bonjour</Name>
                    <MashupString>Monde</MashupString>
                </Foo>
            </ArrayOfFoo>
        </value>
    </setting>
</WindowsFormsApplication1.MySettings> 
```

我使用的设置类：

```
sealed class MySettings : ApplicationSettingsBase
{
    [UserScopedSetting]
    public List<Foo> Foos
    {
        get { return (List<Foo>)this["Foos"]; }
        set { this["Foos"] = value; }
    }
} 
```

最后我插入的项目：

```
private MySettings fooSettings = new MySettings();

var list = new List<Foo>()
{
    new Foo() { Name = "Hello", MashupString = "World" },
    new Foo() { Name = "Bonjour", MashupString = "Monde" }
};

fooSettings.Foos = list;
fooSettings.Save();
fooSettings.Reload(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:55:08.173

在 XML 序列化中：

*   字段没有序列化，只有属性
*   只有公共属性被序列化
*   只读属性也不序列化

所以在你的课堂上没有什么可以序列化的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-25T10:57:08.550

与克雷格描述的相同。我的 Wrapper-Class 确实有一个无参数构造函数，但它也有一个没有无参数构造函数的泛型`List<T>`，`T`因此 save() 也失败了。

像这样：

```
public class foo {
    public List<bar> barList;

    public foo() {
        this.barList = new List<bar>();
    }
}

public class bar {
    public string baz;

    public bar(string baz) {
        this.baz = baz;
    }
} 
```

为您将在设置中使用的每个自定义类添加一个无参数构造函数：

```
public bar() {
    this.baz = "";
} 
```

# c# - migratordotnet - 从应用程序内部运行迁移（无 nant 或构建）

> ID：868223
> 
> 赞同：12
> 
> 时间：2009-05-15T11:46:46.027
> 
> 标签：c#, .net, .net-3.5, .net-2.0, migrator.net

有没有办法从应用程序本身运行迁移？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-15T11:49:38.903

我实例化了一个 Migrator 类的实例，然后你可以调用成员方法，例如`MigrateToLastVersion()`或`MigrateTo(long versionnr)`

```
Migrator.Migrator m = new Migrator.Migrator ("SqlServer", connectionString, migrationsAssembly)

m.MigrateToLastVersion(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T11:51:35.873

我不明白为什么不。

看看 nant 任务[http://code.google.com/p/migratordotnet/source/browse/trunk/src/Migrator.NAnt/MigrateTask.cs](http://code.google.com/p/migratordotnet/source/browse/trunk/src/Migrator.NAnt/MigrateTask.cs)

相关位在这里：

```
 private void Execute(Assembly asm)
    {
        Migrator mig = new Migrator(Provider, ConnectionString, asm, Trace, new TaskLogger(this));
        mig.DryRun = DryRun;
        if (ScriptChanges)
        {
            using (StreamWriter writer = new StreamWriter(ScriptFile))
            {
                mig.Logger = new SqlScriptFileLogger(mig.Logger, writer);
                RunMigration(mig);
            }
        }
        else
        {
            RunMigration(mig);
        }
    }

    private void RunMigration(Migrator mig)
    {
        if (mig.DryRun)
            mig.Logger.Log("********** Dry run! Not actually applying changes. **********");

        if (_to == -1)
            mig.MigrateToLastVersion();
        else
            mig.MigrateTo(_to);
    } 
```

# c# - 列表框所选项目应以某种颜色突出显示

> ID：868240
> 
> 赞同：0
> 
> 时间：2009-05-15T11:53:11.423
> 
> 标签：c#, wpf, xaml, listbox, selecteditem

我有`ListBox`一些图像。我想用某种颜色突出显示选定的项目。我正在`WwrapPanel`使用`ScrollViewer`. 有什么办法可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T12:06:15.247

您应该在 IsSelected 属性上使用带有触发器的 ItemContainerStyle，并在 Trigger 中将 setter 放在 Background 属性上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T20:56:36.907

这应该可以解决问题：

```
<Window x:Class="StackOverflowTests.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" x:Name="window1" Height="300" Width="300">
    <Window.Resources>
        <!-- Specifies the Selection style of ListBoxItems. This changes the forced underlay colors from gray to transparent. -->
        <Style TargetType="ListBoxItem">
            <Style.Resources>
                <!-- This is the color used if the item is selected and the listbox has focus -->
                <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Red"/>
            </Style.Resources>
        </Style>
    </Window.Resources>
    <Grid>
        <StackPanel Orientation="Vertical">
            <ListBox>
                <ListBoxItem Content="Item 1" />
                <ListBoxItem Content="Item 2" />
                <ListBoxItem Content="Item 3" />
                <ListBoxItem Content="Item 4" />
                <ListBoxItem Content="Item 5" />
                <ListBoxItem Content="Item 6" />
                <ListBoxItem Content="Item 7" />
                <ListBoxItem Content="Item 8" />
                <ListBoxItem Content="Item 9" />
                <ListBoxItem Content="Item 10" />
            </ListBox>
        </StackPanel>       
    </Grid>
</Window> 
```

# asp.net - 如何获取xml节点的祖父和曾祖父

> ID：868243
> 
> 赞同：0
> 
> 时间：2009-05-15T11:53:35.277
> 
> 标签：asp.net, xml, vb.net

分层树中当前节点之上的任何节点例如父节点、祖父节点、曾祖父节点或 rot 节点都是 xml 中阳极的祖先

我如何获得当前节点 xml 的祖父母和曾祖父母。

我在 ASP.NET 应用程序中使用 VB.Net。

谢谢哇答案很漂亮

我可以有像 XmlNode greatGrandParent = myNode.ParentNode.ParentNode.ParentNode.lastchild.lastchild 这样的东西吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T11:57:16.903

使用 System.Xml XmlNode 具有 ParentNode 属性，因此您可以使用它来遍历树。

使用 System.Xml.XPath，XPathNavigator 有一个 MoveToParent 方法。

使用 System.Xml.Linq，XNode 类有一个 Ancestors 方法，可以更简洁一些：-

```
GrandParent = Node.Ancestors.Skip(1).Single()
GreatGrandParent = Node.Ancestors.Skip(2).Single() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T11:59:11.737

鉴于所提供的信息非常有限，我只建议您使用上下文`XmlNode`对象的 ParentNode 属性。

例如。获取祖父母：

```
XmlNode grandParent = myNode.ParentNode.ParentNode; 
```

例如。获取祖父母：

```
XmlNode greatGrandParent = myNode.ParentNode.ParentNode.ParentNode; 
```

请注意，这很容易出现异常。例如，如果当前节点没有 ParentNode（或者是类型 - Attribute、Document、DocumentFragment、Entity、Notation），那么代码将抛出异常，因为这些节点不能有 Parent。

请编辑您的问题以提供更多信息，以便答案可以“更好”。

# sql-server - 将 OLTP 关系数据库转换为数据仓库模型

> ID：868247
> 
> 赞同：5
> 
> 时间：2009-05-15T11:55:44.803
> 
> 标签：sql-server, data-warehouse, oltp

将典型实体关系 OLTP 数据库模型中的数据加载到 Kimball 星型模式数据仓库/集市模型中时采用了哪些常见设计方法？

*   您是否使用暂存区执行转换然后装入仓库？
*   如何在仓库和 OLTP 数据库之间链接数据？
*   您在哪里/如何管理转换过程 - 在数据库中作为 sprocs、dts/ssis 包或来自应用程序代码的 SQL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T12:09:08.327

就个人而言，我倾向于按以下方式工作：

1.  首先设计数据仓库。特别是，设计作为 DW 的一部分所需的表，忽略任何临时表。
2.  使用 SSIS 设计 ETL，但有时使用 SSIS 调用相关数据库中的存储过程。
3.  如果需要任何临时表作为 ETL 的一部分，那很好，但同时确保它们得到清理。仅用作单个 ETL 步骤系列的一部分的临时表应在这些步骤完成后截断，无论成功与否。
4.  我让 SSIS 包至少引用 OLTP 数据库以将数据提取到临时表中。根据情况，他们可以将 OLTP 表直接处理到数据仓库中。所有此类查询均使用 WITH(NOLOCK) 执行。
5.  文件，文件，文件。明确每个包使用的输入以及输出的去向。确保记录选择输入的标准（过去 24 小时？自上次成功以来？新的标识值？所有行？）

这对我来说效果很好，尽管我承认我没有做过很多这样的项目，也没有做过任何真正的大项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-08-02T16:09:43.547

我同意高度评价的答案，但我想我会添加以下内容：

> ```
> * Do you use a staging area to perform the transformation and then 
> ```
> 
> 装入仓库？

是否需要分期取决于转换的类型。暂存提供了将 ETL 分解为更易于管理的块的好处，但也提供了一个允许对数据进行操作而不影响仓库的工作区域。它可以帮助（至少）在暂存区域中进行一些维度查找，该区域存储来自 OLTP 系统的键和最新暗记录的键，以在加载事实记录时用作查找。转换发生在 ETL 过程本身中，但它可能需要也可能不需要一些分段来帮助它。

> ```
> * How do you link data between the warehouse and the OLTP database? 
> ```

将业务键（或实际主键，如果可用）加载到数据仓库中作为对 OLTP 系统的引用是很有用的。另外，DW 进程中的审计应该通过记录加载它的加载进程来记录每一位数据的沿袭。

> ```
> * Where/How do you manage the transformation process - in the 
> ```
> 
> 数据库作为 sprocs、dts/ssis 包或来自应用程序代码的 SQL？

这通常在 SSIS 包中，但在源查询中进行转换通常会更高效。不幸的是，这使得源查询非常难以理解和维护，因此如果性能不是问题，那么在 SSIS 代码中进行转换是最好的。当您这样做时，这是拥有暂存区域的另一个原因，因为您可以在不同表之间的源查询中进行更多连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T15:09:27.660

我目前正在开发一个中小型数据仓库。我们采用了 Kimball 提出的一些概念，即带有事实和维度表的星型方案。我们对其进行结构化，以便事实仅连接到维度（不是事实到事实或维度到维度 - 但这是我们的选择，并不是说它应该这样做），所以我们将所有维度连接展平到事实表。

我们使用 SSIS 将数据从生产数据库 -> 源数据库 -> 暂存数据库 -> 报告数据库（我们可能使用更少的数据库，但这就是它的方式）。

SSIS 非常好，因为它可以让您非常合乎逻辑地构建数据流。我们使用 SSIS 组件和存储过程的组合，其中 SSIS 的一个很好的特性是能够提供 SQL 命令作为源/目标数据流之间的转换。这意味着如果我们愿意，我们可以在每一行上调用存储的过程，这很有用（虽然有点慢）。

我们还使用了名为更改数据捕获 (CDC) 的新 SQL Server 2008 功能，它允许您审核表上的所有更改（您可以指定要查看这些表中的哪些列），因此我们在生产数据库告诉我们发生了什么变化，这样我们就可以将这些记录移动到源数据库进行处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T14:34:19.227

John Saunders 的过程解释很好。

[如果您正在寻找在 SQL Server 中实现数据仓库项目，您将在优秀的文本“ Microsoft 数据仓库工具包](http://www.amazon.co.uk/Microsoft-Data-Warehouse-Toolkit-Intelligence/dp/0471267155/ref=sr_1_1?ie=UTF8&s=books&qid=1242398010&sr=8-1)”中找到交付整个项目所需的所有信息。

有趣的是，其中一位作者是 Ralph Kimball :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-06-16T08:19:09.510

您可能想看看[Data Vault Modeling](http://en.wikipedia.org/wiki/Data_Vault_Modeling)。它声称解决了一些孤立的问题，例如更改属性。

# asp.net-mvc - ASP.Net MVC - 编辑集合 - 迭代 FormCollection 是最好的方法吗？

> ID：868253
> 
> 赞同：0
> 
> 时间：2009-05-15T11:57:11.867
> 
> 标签：asp.net-mvc

[在这里](https://stackoverflow.com/questions/289082/asp-net-mvc-editing-a-collection-best-practices-your-opinion)问了同样的问题，并给出了一个可行的答案，但是随着 ASP.Net MVC 框架的最终确定，我想知道是否有更好的解决方案。

如果我有以下类结构如何创建视图页面，更重要的是如何将数据返回给控制器。

```
public class Person {

public int Id {get;set;}
  public string Name {get;set;}
  public IList<TelNos> TelNos {get;set;}
}

public class TelNos{
  public string Type {get;set;}
  public string Number {get;set;}
} 
```

我的理解是，在页面中我可以包含以下内容（假设强类型视图）：

```
<% foreach (var telNo in Model.Product.TelNos)
               {%>
            <p><label for="telNo.Type">Type of Number</label>

                <%= Html.TextBox("telNo.Type")%>
                <%= Html.ValidationMessage("telNo.Type", "*")%>
            </p>
<p><label for="telNo.Number">Type of Number</label>

                <%= Html.TextBox("telNo.Number")%>
                <%= Html.ValidationMessage("telNo.Number", "*")%>
            </p>
            <%} %> 
```

假设我启动了 2 个 TelNos 对象，我会在视图中看到 2 组文本框。

当该表单被回发时，上一篇文章的建议是在 post 方法中迭代 FormCollection：

```
[AcceptVerbs( HttpVerb.POST )]
public ActionResult Whatever( FormCollection form )
{
 ....
} 
```

但是，这是现在最好的方法，还是对 MVC 的进一步更新提供了更好的解决方案？

谢谢，理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:15:07.987

没有任何更新或最佳实践（据我所知）来处理动态表单。仍然尝试过且真实的方法是对您的信息进行数据绑定，或者在 FormCollection 中对其进行迭代。如果您看一下[here](http://blog.codeville.net/2008/12/22/editing-a-variable-length-list-of-items-in-aspnet-mvc/)，它可能会帮助您进行数据绑定。或者在后一种情况下，您可以遍历表单集合，使用它们的字符串名称调用各种值。尽管这可能会产生一些冲突，因为它们都将具有相同的 id

```
 "telNo.Type"
 "telNo.Number" 
```

您可能需要进行一些操作才能使其类似于

```
 "telNo.Type[i]"
 "telNo.Number[i]" 
```

其中 i 是列表中该对象的序列号。您也可以将其设置为其他字符串组合，为该对象生成唯一 id，以便您可以获取类型和编号。

```
 "object[i].telNo.Type" 
 "object[i].telNo.Number" 
```

这实际上取决于您认为如何最好地实施它。有时让数据绑定为动态表单工作可能会很痛苦，而且更容易遍历集合，然后使用 LINQ 之类的东西来获取你想要的/分组它们/等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T09:46:02.810

感谢您的回答。您的回答确实给了我一个想法，我认为这与您的建议不同。

如果我在视图中包含对象的索引，则默认模型构建器会获取这些值并将它们分配给关联的对象。视图代码如下：

```
 <% int i=0;
foreach (var telNo in Model.Product.TelNos)
                   {%>
                <p><label for="telNo.Type">Type of Number</label>

                    <%= Html.TextBox("telNo"+i.ToString()+".Type")%>
                    <%= Html.ValidationMessage("telNo"+i.ToString()+".Type", "*")%>
                </p>
    <p><label for="telNo.Number">Type of Number</label>

                    <%= Html.TextBox("telNo"+i.ToString()+".Number")%>
                    <%= Html.ValidationMessage("telNo"+i.ToString()+".Number", "*")%>
                </p>
                <%i++;
} %> 
```

理查德

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-25T18:40:49.123

我喜欢[ASP.NET MVC Partial View with Form](https://stackoverflow.com/questions/1033635/asp-net-mvc-partial-view-with-form)的想法，它又链接到[Model Binding To A List](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

我认为它更好有两个原因：

1.  通过 FormCollection 违反了分离视图表单控制器的想法。控制器将对数据的显示方式了解太多。
2.  编写单元测试会很痛苦。您需要手动将所有值粘贴到表单控制器中

# php - php中奇怪的布尔表达式解决

> ID：868255
> 
> 赞同：2
> 
> 时间：2009-05-15T11:57:39.213
> 
> 标签：php, types, boolean

```
$foo = 0;

if($foo == 'on') $foo = 1;

echo $foo; 
```

应该预期上面的代码输出“0”。然而，它不会，以某​​种方式`$foo == 'on'`导致`TRUE`，尽管这显然是错误的。将表达式替换为`$foo === 'on'`给出正确答案，因此任何怀疑这可能是一些打字问题似乎都得到了证实。

然而，PHP 怎么能认为`$foo`是`'on'`如果`$foo`甚至`'on'`不是同一类型呢？这是一个错误还是一些奇怪的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T12:07:21.310

在 php 中是一个字符串的松散比较 (==) 并且 int 0 被评估为 True。虽然严格比较 (===) 也会比较相同的类型，这意味着如果展位变量是字符串或整数，则会进行比较。但这被评估为假，因为 $foo 是一个 int 而 'on' 是一个字符串。另请参阅 php.net 上的比较表：http: [//php.net/types.comparisons](http://php.net/types.comparisons)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T12:11:22.673

[这是记录在案的行为](http://docs.php.net/manual/en/language.operators.comparison.php)：

> 如果将整数与字符串进行比较，则字符串将转换为数字。如果比较两个数字字符串，它们将作为整数进行比较。这些规则也适用于 switch 语句。

# visual-studio - 将宏、片段或代码块插入 XAML 视图的最佳方法是什么？

> ID：868260
> 
> 赞同：1
> 
> 时间：2009-05-15T11:58:51.270
> 
> 标签：visual-studio, xaml, code-snippets

我想制作一个节省时间的**片段来**像这样弹出 XAML 块，然后只需更改值（就像您可以在代码中使用例如**"cw"-TAB 或 "foreach"-TAB**）：

```
<Style x:Key="FirstCellStyle" TargetType="{x:Type Border}">
    <Setter Property="BorderBrush" Value="Red"/>
    <Setter Property="MinWidth" Value="50"/>
</Style> 
```

但片段**似乎在 XAML**视图中不起作用。

我**目前正在使用[Texter](http://lifehacker.com/software//lifehacker-code-texter-windows-238306.php)**插入可以在 Windows 中的任何位置工作的块，但是当将文本插入 XAML 视图中时，Visual Studio 代码完成会妨碍。

**您使用哪些解决方案**来加快您的详细 XAML 编码，例如插入宏、片段、代码块等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-06-15T21:13:33.847

I'm getting snippets to work in XAML, but they work in the typical XML way, that is you have to type in the brackets around the snippet name.

Not as nice as the code-behind w/Intellisense, but it works OK. Never tried Texter, that may work better...

# java - 是否有用于在 Eclipse 中为 Java 枚举生成 switch 语句的模板或其他东西？

> ID：868261
> 
> 赞同：16
> 
> 时间：2009-05-15T11:58:51.377
> 
> 标签：java, eclipse, enums, code-generation, switch-statement

是否有用于在 Eclipse 中为 Java 枚举生成 switch 语句的模板或其他东西？

所以当我得到一个枚举并且我想要一个包含所有值的开关时，我不必自己写所有的东西？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-12-28T02:49:09.067

至少在 3.5 中肯定有。

从这样的事情开始：

```
switch(a.getType()){

} 
```

您需要做的就是单击 switch 关键字并按 CTRL+1。您应该得到一个下拉菜单，其中包括“添加缺少的案例陈述”选项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:15:05.893

Eclipse 3.4 中的内容辅助将帮助您编写代码。只需键入`case`并按 Ctrl+Space，您将获得未使用的枚举列表。

# windows - PowerShell中的杜？

> ID：868264
> 
> 赞同：35
> 
> 时间：2009-05-15T12:00:10.110
> 
> 标签：windows, powershell, diskspace

如何使用 PowerShell 进行[du](https://en.wikipedia.org/wiki/Du_%28Unix%29) -ish 分析？我想定期检查磁盘上目录的大小。

以下给出了当前目录中每个文件的大小：

```
foreach ($o in gci)
{
   Write-output $o.Length
} 
```

但我真正想要的是目录中所有文件的总大小，包括子目录。另外，我希望能够按大小对其进行排序，可选。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2009-05-15T12:06:17.100

“Exploring Beautiful Languages”博客中提供了一个实现：

[“'du -s *' 在 Powershell 中的实现”](http://langexplr.blogspot.com/2007/03/implementation-of-du-s-in-powershell.html)

```
function directory-summary($dir=".") { 
  get-childitem $dir | 
    % { $f = $_ ; 
        get-childitem -r $_.FullName | 
           measure-object -property length -sum | 
             select @{Name="Name";Expression={$f}},Sum}
} 
```

*（博客所有者的代码：Luis Diego Fallas）*

输出：

```
PS C:\Python25> 目录摘要

姓名总和
---- ---
DLL 4794012
文件 4160038
包括 382592
库 13752327
库 948600
tcl 3248808
工具 547784
许可证.txt 13817
新闻.txt 88573
python.exe 24064
pythonw.exe 24576
自述文件 56691
w9xpopen.exe 4608

```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-10-10T16:23:53.427

我稍微修改了答案中的命令以按大小降序排序并以 MB 为单位包含大小：

```
gci . | 
  %{$f=$_; gci -r $_.FullName | 
    measure-object -property length -sum |
    select  @{Name="Name"; Expression={$f}}, 
            @{Name="Sum (MB)"; 
            Expression={"{0:N3}" -f ($_.sum / 1MB) }}, Sum } |
  sort Sum -desc |
  format-table -Property Name,"Sum (MB)", Sum -autosize 
```

输出：

```
PS C:\scripts> du

Name                                 Sum (MB)       Sum
----                                 --------       ---
results                              101.297  106217913
SysinternalsSuite                    56.081    58805079
ALUC                                 25.473    26710018
dir                                  11.812    12385690
dir2                                 3.168      3322298 
```

也许这不是最有效的方法，但它确实有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-12T15:19:13.143

```
function Get-DiskUsage ([string]$path=".") {
    $groupedList = Get-ChildItem -Recurse -File $path | Group-Object directoryName | select name,@{name='length'; expression={($_.group | Measure-Object -sum length).sum } }
    foreach ($dn in $groupedList) {
        New-Object psobject -Property @{ directoryName=$dn.name; length=($groupedList | where { $_.name -like "$($dn.name)*" } | Measure-Object -Sum length).sum }
    }
} 
```

我的有点不同；我将目录名上的所有文件分组，然后遍历该列表，为每个目录构建总计（包括子目录）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-07-02T22:17:19.083

基于以前的答案，这将适用于那些想要以 KB、MB、GB 等显示大小并且仍然能够按大小排序的人。要更改单位，只需将“MB”更改为“Name=”和“Expression=”中的所需单位。您还可以通过更改“2”来更改要显示的小数位数（四舍五入）。

```
function du($path=".") {
    Get-ChildItem $path |
    ForEach-Object {
        $file = $_
        Get-ChildItem -File -Recurse $_.FullName | Measure-Object -Property length -Sum |
        Select-Object -Property @{Name="Name";Expression={$file}},
                                @{Name="Size(MB)";Expression={[math]::round(($_.Sum / 1MB),2)}} # round 2 decimal places
    }
} 
```

这将大小作为数字而不是字符串提供（如另一个答案所示），因此可以按大小排序。例如：

```
PS C:\Users\merce> du | Sort-Object -Property "Size(MB)" -Descending

Name      Size(MB)
----      --------
OneDrive  30944.04
Downloads    401.7
Desktop     335.07
.vscode     301.02
Intel         6.62
Pictures      6.36
Music         0.06
Favorites     0.02
.ssh          0.01
Searches         0
Links            0 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-21T04:28:42.940

如果您只需要该路径的总大小，可以使用一个简化版本，

```
Get-ChildItem -Recurse ${HERE_YOUR_PATH} | Measure-Object -Sum Length 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-07T12:24:20.420

我自己使用以前的答案：

```
function Format-FileSize([int64] $size) {
    if ($size -lt 1024)
    {
        return $size
    }
    if ($size -lt 1Mb)
    {
        return "{0:0.0} Kb" -f ($size/1Kb)
    }
    if ($size -lt 1Gb)
    {
        return "{0:0.0} Mb" -f ($size/1Mb)
    }
    return "{0:0.0} Gb" -f ($size/1Gb)
}

function du {
        param(
        [System.String]
        $Path=".",
        [switch]
        $SortBySize,
        [switch]
        $Summary
    )
    $path = (get-item ".").FullName
    $groupedList = Get-ChildItem -Recurse -File $Path | 
        Group-Object directoryName | 
            select name,@{name='length'; expression={($_.group | Measure-Object -sum length).sum } }
    $results = ($groupedList | % {
        $dn = $_
        if ($summary -and ($path -ne $dn.name)) {
            return
        }
        $size = ($groupedList | where { $_.name -like "$($dn.name)*" } | Measure-Object -Sum length).sum
        New-Object psobject -Property @{ 
            Directory=$dn.name; 
            Size=Format-FileSize($size);
            Bytes=$size` 
        }
    })
    if ($SortBySize)
        { $results = $results | sort-object -property Bytes }
    $results | more
} 
```

# html - 有一个“备份”css文件？

> ID：868268
> 
> 赞同：4
> 
> 时间：2009-05-15T12:01:31.700
> 
> 标签：html, css, stylesheet

有没有办法调用样式表，*只有*在它不可用的情况下，才从另一个位置调用样式表？

像这样的东西：

```
<link rel="Stylesheet" type="text/css" href="http://cdn.somewhere.com/css/style.css" />
<link rel="Stylesheet" type="text/css" href="local/style.css" /> 
```

但是如果第一个不可用，**只调用第二个？**如果没有必要，我不想打 2 个电话。谢谢你。

编辑：这是因为我在工作中注意到，我的 CDN 被阻止，所以没有样式显示，但网站显示。我假设很多地方可能有相同的块（防火墙阻止 Web 应用程序）。那么我想从本地副本中获取 css。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T12:03:12.537

这在纯 HTML 标记中是不可能的。但是，您可以使用简单的脚本在**服务器端执行此操作，例如（伪代码）：**

```
if first style does not exist:
    output <link> to second sheet
else
    output <link> to primary sheet 
```

但实际上，您的样式表很可能会被浏览器缓存，因此它几乎不会给最终用户带来负担。您可以简单地订购 s 以便首先加载“第二个”样式表，然后加载主表。这将导致主工作表覆盖辅助工作表中的任何内容......但如果主工作表不可用，辅助工作表仍将按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:11:03.313

强烈**不推荐**JavaScript/AJAX，因为它的行为非常不可预测（我不是在谈论跨浏览器兼容性，但有些用户将其关闭。）

如果我是你，我会检查第一个给定 CSS**服务器端**的存在并相应地插入 href。

还要记住，如果你真的必须使用这种机制来确保，那么你就是说你的服务器不可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T12:09:45.877

不，因为 LINK 元素本身是静态的（“哑”）。因此，您要么需要 JavaScript、GreaseMonkey（在 Firefox 上但那也是 JavaScript），要么您真的必须同时要求两者。

但是，顺序必须不同，IIRC：相同的 CSS 规则将覆盖较早的规则。因此，您需要先包含本地文件，然后再加载外部文件。如果外部副本不可用，将使用您的本地副本。

如果您将 CSS 文件放在本地硬盘上，这将非常便宜。

也就是说，浏览器不会总是下载文件。它将首先检查其缓存中的副本是否仍然是最新的，如果是，则不会再次下载该文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T12:07:47.800

默认情况下，您可以使用“local.css”并使用 javascript（使用 ajax）来加载新的。如果请求可以加载新的 css 文件就可以了，否则，您只需更改任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-20T23:11:55.223

嗯......你可以使用这个：

我不知道第一次失败时是否加载了备用样式表，但如果不确定，您可以尝试阅读以下内容：[A List Apart Tutorial for Change Stylesheets](http://www.alistapart.com/articles/alternate/)

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2009-05-15T12:04:53.937

这可以通过 JavaScript 来实现。代码应该是这样的：

```
if( loadcss(first.css) == false) loadcss(second.css); 
```

其中 loadcss 是函数检查是否加载了 css

# objective-c - Getting the visible rect of an UIScrollView's content

> ID：868288
> 
> 赞同：73
> 
> 时间：2009-05-15T12:05:38.867
> 
> 标签：objective-c, iphone, uiscrollview

How can I go about finding out the rect (CGRect) of the content of a displayed view that is actually visible on screen.

```
myScrollView.bounds 
```

The code above works when there's no zooming, but as soon as you allow zooming, it breaks at zoom scales other than 1.

To clarify, I want a CGRect that contains the visible area of the scroll view's content, relative to the content. (ie. if it's a zoom scale 2, the rect's size will be half of the scroll view's size, if it's at zoom scale 0.5, it'll be double.)

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-03T09:39:39.623

Or you could simply do

```
CGRect visibleRect = [scrollView convertRect:scrollView.bounds toView:zoomedSubview]; 
```

* * *

Swift

```
let visibleRect = scrollView.convert(scrollView.bounds, to: zoomedSubview) 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-05-16T09:41:58.237

Answering my own question, mostly thanks to Jim Dovey's answer, which didn't quite do the trick, but gave me the base for my answer:

```
CGRect visibleRect;
visibleRect.origin = scrollView.contentOffset;
visibleRect.size = scrollView.bounds.size;

float theScale = 1.0 / scale;
visibleRect.origin.x *= theScale;
visibleRect.origin.y *= theScale;
visibleRect.size.width *= theScale;
visibleRect.size.height *= theScale; 
```

The main difference is that the size of the visibleRect ought to be `scrollView.bounds.size`, rather than `scrollView.contentSize` which is the size of the content view. Also simplified the math a bit, and didn't quite see the use for the `isless()` which would break the code whenever it's greater.

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2009-05-15T14:07:06.797

You have to compute it using UIScrollView's contentOffset and contentSize properties, like so:

```
CGRect visibleRect;
visibleRect.origin = scrollView.contentOffset;
visibleRect.size = scrollView.contentSize; 
```

You can then log it for sanity-testing:

```
NSLog( @"Visible rect: %@", NSStringFromCGRect(visibleRect) ); 
```

To account for zooming (if this isn't already done by the contentSize property) you would need to divide each coordinate by the zoomScale, or for better performance you would multiply by 1.0 / zoomScale:

```
CGFloat scale = (CGFloat) 1.0 / scrollView.zoomScale;
if ( isless(scale, 1.0) )      // you need to #include <math.h> for isless()
{
    visibleRect.origin.x *= scale;
    visibleRect.origin.y *= scale;
    visibleRect.size.width *= scale;
    visibleRect.size.height *= scale;
} 
```

Aside: I use isless(), isgreater(), isequal() etc. from math.h because these will (presumably) do the right thing regarding 'unordered' floating-point comparison results and other weird & wonderful architecture-specific FP cases.

* * *

Edit: You need to use `bounds.size` instead of `contentSize` when calculating `visibleRect.size`.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-06T23:06:35.380

Shorter version:

```
CGRect visibleRect = CGRectApplyAffineTransform(scrollView.bounds, CGAffineTransformMakeScale(1.0 / scrollView.zoomScale, 1.0 / scrollView.zoomScale)); 
```

I'm not sure if this is defined behavior, but almost all UIView subclasses have the origin of their `bounds` set to (0,0). UIScrollViews, however, have the origin set to `contentOffset`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-12-12T12:54:01.197

a little more general solution would be:

```
 [scrollView convertRect:scrollView.bounds
                             toView:[scrollView.delegate viewForZoomingInScrollView:scrollView]]; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-01-30T16:18:18.093

```
CGRect visibleRect;
visibleRect.origin = scrollView.contentOffset;
visibleRect.size = scrollView.frame.size; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-23T00:49:38.097

**Swift 4.0:**

My answer adapts [Trenskow's answer](https://stackoverflow.com/a/11308234/1084528) to Swift 4.0:

```
let visible = scrollView.convert(scrollView.bounds, to: subView) 
```

where `scrollView` is the view of the scroll, and `subView` is the view inside `scrollView` which is zoomable and contains all the contents inside the scroll.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-15T13:04:20.580

I don't think that a UIScrollView gives you that rectangle directly, but I think you have all the necessary items to calculate it.

A combination of the bounds, the contentOffset and the zoomScale should be all you need to create the rectangle you are looking for.

# java - Java 中的参数检查或按合同设计 (GWT)。从哪儿开始？

> ID：868291
> 
> 赞同：1
> 
> 时间：2009-05-15T12:06:17.553
> 
> 标签：java, design-by-contract

我在玩GWT。我正在寻找基本的参数检查。我不需要不变量或结果确保。我对该主题的最佳实践感兴趣。

例如，在 c# 中，我使用以下选项之一：

1.  `if (arg1 != null) throw new ArgumentNulException....; // Official for public API;`
2.  `Args.NotNull(arg1); // Home grown.`
3.  `Contracts.Requires(arg1 != null); // Internal contract validation.`

什么是我最好的起点？

好的，我现在找到了什么。

1.  [验证方法参数](http://www.javapractices.com/topic/TopicAction.do?Id=5)
2.  [断言编程](http://java.sun.com/j2se/1.4.2/docs/guide/lang/assert.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:42:40.353

根据 Josh Bloch对[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)的建议，我通常自己做，所以：

```
if (arg == null) throw new NullPointerException("arg cannot be null"); 
```

或者

```
if (arg < 0) throw new IllegalArgumentException("arg must be positive"); 
```

如果您还没有一本[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)，我强烈建议您购买它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-09-19T21:39:53.257

如果您只是在寻找参数检查，那么简单的异常检查应该是最好的解决方案。

Exception 为您提供了比简单断言更好的捕获处理的解决方案。

在那种情况下，按合同设计的解决方案绝对是矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:11:54.467

根据[Design by Contract 的维基百科页面，](http://en.wikipedia.org/wiki/Design_by_contract)这种方法与 Java 的流行工具是：

iContract2、Contract4J、jContractor、Jcontract、C4J、CodePro Analytix、STclass、Jass 预处理器、带有 AspectJ 的 OVal、Java 建模语言 (JML)、Spring 框架的 SpringContracts 或 Modern Jass、使用 AspectJ 的 Custos、使用 AspectJ 的 JavaDbC、使用扩展的 JavaTESK爪哇。

阅读其中一个可能是一个好主意。

我对其中任何一个都没有亲身经历，但 Pragmatic Programmer 对原始 iContract 说了很多好话，因此这可能是一个不错的起点。

您总是可以尝试使用 Java 内置断言自己做：

`assert Expression1;`
或者
`assert Expression1 : Expression2 ;`

其中 Expression1 产生一个布尔值，而 Expression2 是您的测试值（可选）。试试看。

# php - 使用php发布表单时如何指定命令？

> ID：868292
> 
> 赞同：0
> 
> 时间：2009-05-15T12:06:26.337
> 
> 标签：php, forms

我正在尝试使用 php 发布表单，我希望根据 cmd 的值来处理表单。在文件名之后指定它不起作用..这样做的正确方法是什么？

```
echo "<form name=\"statusForm\" action=\"edit_status.php?cmd=submitinfo\" method=\"post\" enctype=\"multipart/form-data\"> 
```

我在哪里/如何指定 ?cmd=submitinfo

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T12:10:50.617

您的表单方法是 POST，因此您可以使用隐藏字段轻松地做您想做的事情：

```
<input type="hidden" name="cmd" value="submitinfo" /> 
```

然后只需`$_POST`在编辑状态页面上使用该变量，就像您的其他表单参数一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:10:05.720

```
echo "<form name=\"statusForm\" action=\"edit_status.php\" method=\"post\" enctype=\"multipart/form-data\"><input type=\"hidden\" name=\"cmd\" value=\"submitinfo\"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:10:26.937

我不确定你在这里得到什么。您应该能够非常轻松地访问查询字符串（?cmd= 之后的部分）。您正在尝试从 edit_status.php 文件访问它吗？

其次，您正在使用 ?_GET["cmd"]

# django - 1.1 中的 django-admin 操作

> ID：868295
> 
> 赞同：3
> 
> 时间：2009-05-15T12:07:01.687
> 
> 标签：django, django-admin

我正在 django 中编写一个操作。我现在想了解由操作更新的行或说行的 id 字段。我想记录所有操作。

我有一个具有 3 个值的字段状态：'activate'、'pending'、'reject'。我已采取措施将状态更改为激活。当我执行该操作时，我希望更新行日志，所以我需要一些可以存储在日志中的值，例如对应于该行的 id

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T18:05:49.360

据我所知，您希望使用自定义操作为您更新的对象创建一个管理日志条目。我实际上做了类似的事情，纯粹是 django 做的。作为您的自定义操作，您可以添加这段代码。

**编辑**：在您的操作完成后调用此函数，或者我应该说，在您更改状态并保存对象之后。

```
def log_it(request, object, change_message):
    """
    Log this activity
    """
    from django.contrib.admin.models import LogEntry
    from django.contrib.contenttypes.models import ContentType

    LogEntry.objects.log_action(
        user_id         = request.user.id, 
        content_type_id = ContentType.objects.get_for_model(object).pk, 
        object_id       = object.pk, 
        object_repr     = change_message, # Message you want to show in admin action list
        change_message  = change_message, # I used same
        action_flag     = 4
    )

# call it after you save your object
log_it(request, status_obj, "Status %s activated" % status_obj.pk) 
```

您始终可以通过获取 LogEntry 对象来获取您更新的对象

```
log_entry = LogEntry.objects.filter(action_flag=4)[:1]
log_entry[0].get_admin_url() 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T11:16:18.087

这很容易！

只需对您的查询集进行循环，然后您就可以访问该行的每个字段并将其存储在您想要的位置。

```
for e in queryset:          
   if (e.status != "pending"):
       flag = False 
```

# ruby-on-rails - 如何使用 ruby on rails 进行站点分析

> ID：868304
> 
> 赞同：3
> 
> 时间：2009-05-15T12:08:58.750
> 
> 标签：ruby-on-rails, ruby, web

我想知道使用 ruby​​ on rails 应用程序进行站点分析的选项有哪些？我还没有看到任何专门针对 Rails 的解决方案——更多的是针对 apache 类型的 Web 服务器。我不想使用谷歌分析，我想让日志记录/分析都是本地的。在快速查看 wiki 的网络分析软件列表[http://en.wikipedia.org/wiki/List_of_web_analytics_software](http://en.wikipedia.org/wiki/List_of_web_analytics_software)后，我看不到任何我可以看到如何将其合并到我的 rails/ruby 应用程序中的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:48:43.100

Apache 和 nginx 背后的 AFAIK Rails 部署都可以受益于多年来为解析 Web 日志而开发的大量工具。我喜欢AWStats :)

对于未在网络日志中明确显示的应用程序事件 - 例如登录、注册、购买 - 我建议使用Keen IO[的敬业宝石](https://github.com/keenlabs/keen-gem)（免责声明 - 我在那里工作）。这很容易 - 安装或捆绑 gem，然后添加如下行：

```
Keen.publish_async("sign_ups", { :username => "lloyd", :referred_by => "harry" }) 
```

在 Rails 应用程序中的任何位置记录事件。记录事件后，您可以使用敬业度的工作台[来](https://keen.io/)运行查询并查看可视化效果，或者您可以使用 REST API 将任何和所有数据拉回以进行自定义处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-16T01:51:07.930

大多数人在 Apache 或其他 Web 服务器之后部署 Rails 应用程序，因为可以设置 Rails 应用程序以允许这些 Web 服务器快速有效地为静态资产和缓存页面提供服务。这也意味着我们可以使用我们一直使用的相同日志分析工具，如 Analog、AWStats 等。

或者我们可以直接使用谷歌分析。不过我喜欢行日志:)

希望有帮助！

# c++ - What is the difference between static_cast and Implicit_cast?

> ID：868306
> 
> 赞同：14
> 
> 时间：2009-05-15T12:09:20.963
> 
> 标签：c++, boost, static-cast, boost-implicit-cast

What is implicit_cast? when should I prefer implicit_cast rather than static_cast?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-15T16:14:16.037

I'm copying over from a comment i made to [answer this comment](https://stackoverflow.com/questions/385556/how-does-c-pick-which-overloaded-function-to-call/394742#394742) at another place.

> You can down-cast with `static_cast`. Not so with `implicit_cast`. `static_cast` basically allows you to do any implicit conversion, and in addition the reverse of any implicit conversion (up to some limits. you can't downcast if there is a virtual base-class involved). But `implicit_cast` will *only* accept implicit conversions. no down-cast, no `void*->T*`, no `U->T` if T has only explicit constructors for U.

Note that it's important to note the difference between a cast and a conversion. In the following no cast is going on

```
int a = 3.4; 
```

But an implicit conversion happens from double to int. Things like an "implicit cast" don't exist, since a cast is always an explicit conversion request. The name construct for `boost::implicit_cast` is a lovely combination of "cast using implicit conversions". Now the whole implementation of `boost::implicit_cast` is this (explained [here](https://stackoverflow.com/questions/862858/what-other-useful-casts-can-be-used-in-c/863761#863761)):

```
template<typename T> struct identity { typedef T type; };
template<typename Dst> Dst implicit_cast(typename identity<Dst>::type t)
{ return t; } 
```

The idea is to use a non-deduced context for the parameter `t`. That will avoid pitfalls like the following:

```
call_const_version(implicit_cast(this)); // oops, wrong! 
```

What was desired is to write it out like this

```
call_const_version(implicit_cast<MyClass const*>(this)); // right! 
```

The compiler can't deduce what type the template parameter `Dst` should name, because it first must know what `identity<Dst>` is, since it is part of the parameter used for deduction. But it in turn depends on the parameter `Dst` (`identity` could be explicitly specialized for some types). Now, we got a circular dependency, for which the Standard just says such a parameter is a non-deduced context, and an explicit template-argument must be provided.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-15T14:38:21.683

Prefer implcit_cast if it is enough in your situation. implicit_cast is less powerful and safer than static_cast.

For example, downcasting from a base pointer to a derived pointer is possible with static_cast but not with implicit_cast. The other way around is possible with both casts. Then, when casting from a base to a derived class, use implicit_cast, because it keeps you safe if you confuse both classes.

Also keep in mind that implicit_cast is often not needed. Using no cast at all works most of the time when implicit_cast does, that's where 'implicit' comes from. implicit_cast is only needed in special circumstances in which the type of an expression must be exactly controlled, to avoid an overload, for example.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T12:34:24.443

**implicit_cast** transforms one type to another, and can be extended by writing implicit cast functions, to cast from one type to another.

e.g.

```
int i = 100;
long l = i; 
```

and

```
int i = 100;
long l = implicit_cast<long>(i); 
```

are exactly the same code

however you can provide your own implicit casts for your own types, by overloading **implicit_cast** like the following

```
template <typename T>
inline T implicit_cast (typename mpl::identity<T>::type x) 
{
    return x;
} 
```

See here [boost/implicit_cast.hpp](http://www.boost.org/doc/libs/1_39_0/boost/implicit_cast.hpp) for more

Hope this helps

**EDIT**

This page also talks about implicit_cast [New C++](http://www.freshsources.com/newcpp.html)

Also, the primary function of **static_cast** is to perform an non changing or semantic transformation from one type to another. The type changes but the values remain identical e.g.

```
void *voidPtr = . . .
int* intPtr = static_cast<int*>(voidPtr); 
```

I want to look at this void pointer, as if it was an int pointer, the pointer doesn't change, and under the covers voidPtr has exactly the same value as intPtr. An **implicit_cast**, the type changes but the values after the transformation can be differnet too.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:43:49.057

Implicit conversions, explicit conversions and static_cast are all different things. however, if you can convert implicitly, you can convert explicitly, and if you can convert explicitly, you can cast statically. The same in the other direction is not true, however. There is a perfectly reasonable relationship between implicit casts and static casts. The former is a subset of the the latter.

See section 5.2.9.3 of the C++ Standard for details

> Otherwise, an expression e can be explicitly converted to a type T using a static_cast of the form static_- cast(e) if the declaration T t(e); is well-formed, for some invented temporary variable t (8.5).

C++ encourages use of static_casts because it makes the conversion 'visible' in the program. Usage of casts itself indicates some programmer enforced rule which is worth a look so better use static_cast.

# xml - 在黑莓中创建 XML

> ID：868317
> 
> 赞同：2
> 
> 时间：2009-05-15T12:11:15.857
> 
> 标签：xml, blackberry, java-me

我想在黑莓中创建一个 XML，因为有像 Document 和 Element 这样的类，但我想要 String 格式的 xml 是不是这样。黑莓中是否有任何 API 可以做同样的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T12:44:59.817

在 BlackBerry API 中确实没有用于创建 XML 文档的 API。您可以通过使用 net.rim.device.api.xml.jaxp.XMLWriter 来伪造它，并像您的程序是 SAX 解析器一样手动调用方法，但这并不能真正为您带来太多收益。

编写结构化 XML 的最佳选择是使用[KXML](http://kxml.sourceforge.net/)，它很小且在 BlackBerry 上运行迅速。具体看 org.kxml2.kdom 包和 org.kxml2.io 包（用于 KXmlSerializer 类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T10:45:40.427

I would advise beginning with JSR-172. If it is not available on blackBerry, Sun's reference implementation is pure java and probably open source as part of PhoneME.

# windows - 如何从 CMD.exe 切换到 Powershell？

> ID：868318
> 
> 赞同：17
> 
> 时间：2009-05-15T12:11:16.077
> 
> 标签：windows, powershell, cmd

我有这个想法，我应该从 cmd.exe 切换到 powershell。它比久经考验的 cmd.exe 强大得多。它是 Windows 未来的外壳。

但是与 cmd.exe 相比，我在 powershell 中的功能非常有限。在每个拐角处，我发现另一个看似很小但无法克服的障碍。

今天，我尝试在 powershell 中按 ctrl-C 停止正在运行的程序，但没有任何效果。??
上次通过它是“如何在 powershell 中执行 'dir /o'？” 我知道如何在 .cmd 脚本中执行循环，如何在 powershell 中执行此操作？

我需要一些建议：首先，**尝试切换到 powershell 是个好主意吗？**

如果是这样，问题 2 是：您对如何打破 cmd.exe 习惯有何建议？

*   我应该将每个问题都发布到 Stackoverflow 吗？
*   我应该花一整天的时间来学习 powershell 吗？我可以参加培训课程吗？
*   有没有一本关于常见 Powershell 食谱的好食谱？我可以摄取的powershell wiki？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-05-15T12:15:16.270

*   也许这个[Powershell Cheat Sheat](http://blogs.msdn.com/powershell/archive/2007/01/24/powershell-cheat-sheet.aspx)可以帮助你。（如果向下滚动，会有 PDF）
*   Powershell 上还有[这个 Mini Wiki 条目](http://channel9.msdn.com/wiki/windowspowershellwiki/)[断开的链接]
*   [从 CMD 转换为 Powershell](http://web.archive.org/web/20101221073219/http://twwilliams.com/blog/2006/07/30/translating-from-cmdexe-to-powershell-dir/)
*   [Powershell 备忘单](http://blog.stevex.net/index.php/powershell-cheatsheet/)
*   [使用 Powershell 的 10 大技巧](http://www.windowsdevcenter.com/pub/a/windows/2006/11/07/top-10-tips-for-using-windows-powershell.html)（向下滚动一点）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-05-15T13:31:10.597

为了帮助简化过渡，请记住，您始终可以通过在任何命令前加上“cmd /c”来运行原始 DOS 命令。例如

```
cmd /c dir /s
cmd /c start . 
```

当然，还有 PowerShell 等价物，但这个技巧将帮助您在学习 PowerShell 时保持高效。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-16T00:48:15.257

我也遇到过同样的情况。我最后做的是关闭我通常整天打开的 CMD 窗口并保留 PowerShell 窗口并强迫自己只使用它。

我只在紧急情况下才使用 CMD，而且我觉得我不能花时间在 PS 中解决它。

I'm still not quite as proficient in PS yet, but I'm getting better everyday.

Below are a couple good books and some links to some good resources.

I liked these two books a lot:

*   [Windows PowerShell in Action](https://rads.stackoverflow.com/amzn/click/com/1932394907) by Bruce Payette
*   [Windows PowerShell Pocket Reference](https://rads.stackoverflow.com/amzn/click/com/0596521782) by Lee Holmes

Also, check out these sites:

*   [MS Script Center](http://www.microsoft.com/technet/scriptcenter/default.mspx)
*   [Scripting with Windows PowerShell](http://www.microsoft.com/technet/scriptcenter/hubs/msh.mspx)
*   [The PowerShell blog](http://blogs.msdn.com/powershell/)
*   [PowerGUI](http://powergui.org)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:27:17.597

当你开始坚持它时，它似乎是不可克服的。

在 Powershell 中，关键停止的关键组合是 Ctrl + Break

在排序方面，有一个 Sort-Object 命令行开关，因此您可以按任何属性进行排序。

所以你可以调用 Get-ListItems | 排序对象。值得尝试学习命令行开关名称而不是与其关联的别名。

如果所有其他方法都失败了，请在这里询问，总有很多知识可以解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-16T03:25:08.953

I second the recommendation to read Windows PowerShell in Action. If however, you don't want to part with that much $$ just yet, check out this free eBook I put together: [Effective PowerShell](http://tinyurl.com/efposh). Also, do give PowerShell some time. I think it will pay off in spades on the backend.

# python - Python 新手：在 Python 中返回多个 Int/String 结果

> ID：868325
> 
> 赞同：1
> 
> 时间：2009-05-15T12:12:31.703
> 
> 标签：python, parameters, reference

我有一个函数，它有几个输出，所有这些都是“本地的”，即整数和字符串。例如，假设我有一个分析字符串的函数，并找到单词的数量和单词的平均长度。

在 C/C++ 中，我会使用 @ 将 2 个参数传递给函数。在 Python 中，我不确定什么是正确的解决方案，因为整数和字符串不是通过引用传递，而是通过值传递（至少这是我从反复试验中理解的），所以下面的代码不起作用：

```
def analyze(string, number_of_words, average_length):

    ... do some analysis ...

    number_of_words = ...    
    average_length = ... 
```

如果我执行上述操作，则函数范围之外的值不会改变。我目前所做的是使用这样的字典：

```
def analyze(string, result):

    ... do some analysis ...

    result['number_of_words'] = ...    
    result['average_length'] = ... 
```

我使用这样的功能：

```
s = "hello goodbye"
result = {}
analyze(s, result) 
```

但是，这感觉不对。实现此目的的正确 Pythonian 方法是什么？请注意，我仅指函数返回 2-3 个结果的情况，而不是数十个结果。另外，我是 Python 的新手，所以我知道我可能在这里遗漏了一些微不足道的东西......

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-05-15T12:17:50.320

python 有一个`return`语句，它允许您执行以下操作：

```
def func(input):
    # do calculation on input
    return result

s = "hello goodbye"
res = func(s)       # res now a result dictionary 
```

但您根本不需要`result`，您可以返回一些值，如下所示：

```
def func(input):
    # do work
    return length, something_else         # one might be an integer another string, etc.

s = "hello goodbye"
length, something = func(s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T12:19:32.110

如果您像这样在函数中返回变量：

```
def analyze(s, num_words, avg_length):
    # do something
    return s, num_words, avg_length 
```

然后你可以这样调用它来更新传递的参数：

```
s, num_words, avg_length = analyze(s, num_words, avg_length) 
```

但是，对于您的示例函数，这会更好：

```
def analyze(s):
    # do something
    return num_words, avg_length 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T13:45:26.973

在 python 中，您不会以 C/C++ 方式修改参数（通过引用或通过指针传递它们并*在原地*进行修改）。有一些原因，例如字符串对象在 python 中是不可变的。正确的做法是在元组中返回修改后的参数（如 SilentGhost 建议的那样）并将变量重新绑定到新值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T12:17:44.000

如果需要双向使用方法参数，可以将参数封装到类中，将对象传递给方法，让方法使用其属性。

# dependency-injection - 使用 IoC 容器连接依赖项的首选方式是什么？

> ID：868329
> 
> 赞同：5
> 
> 时间：2009-05-15T12:13:24.400
> 
> 标签：dependency-injection, inversion-of-control

我相信大多数 IoC 容器都允许您使用 XML 配置文件连接依赖项。使用配置文件与在代码中注册依赖项有什么优缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T12:33:01.827

这些优点和缺点是基于我对 spring 的工作。其他容器可能略有不同。

XML

亲

*   灵活的
*   在某些领域比注解更强大
*   对类的依赖关系进行非常明确的建模

骗局

*   冗长的
*   重构困难
*   在多个文件之间切换

注释

亲

*   更少的文件切换
*   简单接线的自动配置
*   比 xml 更简洁

骗局

*   代码中的更多部署特定数据（通常您可以使用 xml 配置覆盖它）
*   xml 总是需要的（？），至少要设置基于 annonation 的配置
*   在搜索用作依赖的类时，注释魔术可能会导致混淆

代码

亲

*   可以利用强类型语言（例如 C#、Java）
*   一些编译时检查（虽然不能静态检查依赖项）
*   可以利用 DSL（例如 Binsor、Fluent 接口）
*   比 XML 更简洁（例如，您不需要总是指定整个程序集限定名称（在谈论 .net 时））

骗局

*   通过代码布线可能会导致复杂的布线
*   代码库中对 IOC 容器的硬依赖

我正在使用 XML+Annotation 的组合。一些特别是关于数据库访问的东西总是通过 xml 配置的，而控制器或服务之类的东西大多是通过代码中的注释来配置的。

[编辑：我借用了 Mauschs 代码 PROs]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:22:04.270

**XML 优点：**

*   无需重新编译即可更改接线和参数。有时这在切换环境时很不错（例如，您可以将开发中使用的虚假电子邮件发件人切换为生产中的真实电子邮件发件人）

**代码优点：**

*   可以利用强类型语言（例如 C#、Java）
*   一些编译时检查（虽然不能静态检查依赖项）
*   可使用常规重构工具进行重构。
*   可以利用 DSL（例如 Binsor、Fluent 接口）
*   比 XML 更简洁（例如，您不需要总是指定整个程序集限定名称（在谈论 .net 时））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-10-13T13:00:07.363

我同意。我发现 ioc 容器给我的东西很少，但是它们很容易让做某事变得更加困难。只需使用我选择的编程语言，我就可以解决我面临的大部分问题，这些语言总是更简单、更易于维护和更易于导航。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T12:21:11.560

我假设“在代码中注册依赖项”是指“使用新的”。

'new' 是一个非常强大的依赖注入框架。它允许您在创建对象时“注入”您的“依赖项”——这意味着没有忘记参数或半构建对象。

另一个主要的潜在好处是，当您使用重构工具（比如在 Resharper 或 IntelliJ 中）时，*也会调用新的更改*

否则，您可以使用一些 XML 废话并使用 XSL 进行重构。

# c - 如何在 C/Objective-C 中获取数组的大小？

> ID：868333
> 
> 赞同：0
> 
> 时间：2009-05-15T12:13:52.777
> 
> 标签：c, objective-c, arrays

我有这个数组：

```
unsigned char* data = CGBitmapContextGetData(cgctx); 
```

然后我尝试使用 sizeof(data) 获取大小，但这将返回一个无意义的值 4。数据包含大量信息。那不能只是 4 ;)

我什至在 data[8293] 处获得信息……所以……根本不是 4 个元素。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T12:17:27.637

`sizeof`返回 4，因为您的变量被声明为指针，而不是 C 数组 ( `char data[1024]`)。

要获得您需要使用的大小`CGBitmapContextGetHeight`和`CGBitmapContextGetWidth`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-15T12:19:04.870

尝试使用

```
CGBitmapContextGetBitsPerPixel
CGBitmapContextGetHeight
CGBitmapContextGetWidth 
```

或者

```
CGBitmapContextGetBytesPerRow
CGBitmapContextGetHeight 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-15T12:15:22.790

4的值不是废话，它是你要求的指针的大小。在 C 中没有办法找出指针指向的数组的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:17:51.817

您正在获取指针的大小，而不是数组的大小。仅当您确实有要测量的数组时，才对数组使用 sizeof() ;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T12:15:50.650

您混淆了指针及其指向的对象。

# oracle - 为什么我在使用 DBExpress 的 Oracle 10g 上收到 255 条记录插入限制？

> ID：868346
> 
> 赞同：1
> 
> 时间：2009-05-15T12:16:18.670
> 
> 标签：oracle, delphi, dbexpress, ora-03114

我在正常的 SQL 处理过程中碰壁了

从带有 DBEXPRESS 的远程客户端连接到 Oracle 10g 时， - 使用标准 dbxpora.dll + oci.dll

在事务中，恰好插入 255 条记录后，连接挂起 30 秒并返回错误：

> ORA-03114（好像它失去了连接......）

在事务中将 255 条记录插入任何表时会发生这种情况。（当在数据库盒上本地运行时，一切正常）

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T12:57:27.773

好吧，我不具体了解 Oracle 数据库，但我知道 255 是一个神奇的数字。这是您可以用单个字节表示的最大值。可能有一些东西被声明为字节，它正在计算你的记录，而你正在溢出它。尝试在打开范围检查和溢出检查的情况下重建整个项目，并查看在尝试执行此操作时是否在某处引发异常。如果它实际上在您正在编译的代码中，那应该有助于追踪它。如果它在其中一个库中，那将无济于事。

# asp.net - 可以将 ASP 页面与母版页一起使用吗？

> ID：868349
> 
> 赞同：0
> 
> 时间：2009-05-15T12:16:28.963
> 
> 标签：asp.net, asp-classic

是否可以在 ASP.NET 中使用带有母版页的 ASP 页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:21:03.807

不幸的是，不是以编程方式。您可以得到的最接近的方法是创建一个 .NET 母版页和 Web 表单，然后通过 iFrame 嵌入您的经典 asp 页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-22T05:07:09.533

你还有这个问题吗？有一个[非常古老的工具](http://www.asp.net/downloads/archived-v11/migration-assistants/asp-to-aspnet)可以帮助转换为 .ASP 的早期版本。不幸的是，我不认为这是转换到更高版本的 asp.net 的最佳做法。我正在开发一个项目来转换具有许多页面的经典 ASP 应用程序，并且它仍在使用带有旧 SQL 数据库的记录集。我发现获取每个页面的“查看源代码”结果并在我的 VS2010 Web 项目中创建一个新页面，使用母版页来帮助保持整个站点的结果一致效果很好。

唯一的问题是这非常繁琐，需要经常测试以确保页面与旧页面一致。

回到在新的 ASP.net 应用程序中使用 Classic ASP 的原始问题，我相信这个问题可以通过在 Web 服务器上拥有两个应用程序池和两个应用程序分开应用程序，并将旧页面作为链接引用来解决。框架。只是一个想法...

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:20:49.110

我不这么认为。你说的是经典的asp吗？我刚刚发现了这个[讨论](http://discuss.joelonsoftware.com/default.asp?dotnet.12.543445.2)。

[编辑]

也许你可以。看看[这个](http://forums.asp.net/t/1351986.aspx)。

[/编辑]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-09T14:27:00.267

我现在有这个问题。一些 ASP 页面非常复杂，以至于对站点功能的更改比移植一些更困难的页面更重要。

如果您暂时必须并排工作，请放慢移动它们的速度，请执行以下操作。

1.  在 .NET 程序集中获取您的业务逻辑，“tlbimp.exe”它以便它可以与 ASP 互操作，然后移动您的页面决策以与该组件进行通信。通过这种方式，您现在可以共享业务逻辑，因此只需移动 UI 数据。

2.  通过数据库而不是查询字符串传递 Session/QueryString 数据。这意味着您应该将 Session/QueryString 数据提交到 XML 或 Key/Value 对并将其存储在数据库中（具有到期时间）。然后使用 GUID 重定向到您的 ASP。有人可能会通过获取以前的 GUID 来劫持会话。因此，定期运行计划作业以清除超过 1 分钟的会话数据。

3.  在向/从 .NET 传输时，请尝试让页面在跨边界传输之前执行其操作。这样页面可以更容易移植。例如，假设 .NET 显示订单，而 ASP 搜索产品并将其添加到您的购物篮。确保操作是分开的，而不是通过查询字符串参数传递产品。这样，您就可以通过查询字符串参数重定向到订单页面 - [http://...../Order.aspx?id=](http://...../Order.aspx?id=)（只要您的用户有权查看订单）。

4.  确保您的 ASP 代码使用存储过程而不是内联 SQL，因为这意味着代码重用更容易。

5.  我发现创建一个专用的redirect.asp 和Redirect.aspx 页面很有用，因为您可以看到跨越边界的数据- 它更易于调试，但您会听到作为用户ASP -> ASP_REDIRECT -> ASP 的大量点击。 NET_REDIRECT -> ASP.NET。

6.  全球化是一个主要问题，给我们的用户带来了问题。在 ASP 中更改语言和重定向到/从站点*有时会*导致他们的语言默认为英语 - 英语到中文！

缓解过渡的方法并不多，主要是让您低头并更改这些页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T12:34:44.990

我建议创建一个新的 ASP.NET MVC（相对于 WebForms）项目，并在一次练习中将所有 ASP 页面转换为 ASP.NET。

执行分阶段转换并混合运行 ASP 和 ASP.NET 会令您有些头疼，尽管它可能被认为交付速度更快，但总成本可能高于一次性转换练习。

在大多数情况下，ASP.NET MVC 比 ASP.NET WebForms 更适合从 ASP 转换。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T13:01:07.767

您可以将 asp.net mvc 中的母版页用作共享资源。

# ssis - SSIS Web 服务任务，无法执行 Web 服务

> ID：868350
> 
> 赞同：1
> 
> 时间：2009-05-15T12:16:30.353
> 
> 标签：ssis

我有一个从我的 ssis 调用的 Web 服务。

曾经在测试模式下工作正常，当移动到实时环境时出现错误：

[Web 服务任务] 错误：发生错误并显示以下错误消息：“Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebserviceTaskException：无法执行 Web 方法。错误是：对象引用未设置为对象的实例..在 Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebMethodInvokerProxy.InvokeMethod(DTSWebMethodInfo methodInfo, String serviceName, Object connection) 在 Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebServiceTaskUtil.Invoke(DTSWebMethodInfo methodInfo, String serviceName, Object connection, VariableDispenser taskVariableDispenser) 在 Microsoft.SqlServer.Dts.Tasks.WebServiceTask.WebServiceTask.executeThread()"。

我们正在使用代理访问网络。这可能是代理问题。怎么解决 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:16:35.577

这是简单的代理问题。

不要忘记在 Http Connection Manager 中配置代理选项卡

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T12:19:27.117

为了帮助诊断这一点，您可以尝试使用脚本任务并将服务引用或 Web 引用添加到 Web 服务。如果遇到异常，请在 try/catch 块中调用服务并记录 ex.ToString()。这样一来，您一定会获得所有详细信息，并且可以在此处发布它们以对您的问题进行编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:01:39.397

还值得注意的是，SSIS 不能调用名称中带有空格的服务。有关详细信息，请参阅以下内容：

[http://connect.microsoft.com/SQLServer/feedback/details/368606/ssis-web-service-task-cannot-call-services-with-a-space-in-the-name](http://connect.microsoft.com/SQLServer/feedback/details/368606/ssis-web-service-task-cannot-call-services-with-a-space-in-the-name)

这个答案会节省我的时间，所以我添加它是希望它可以节省其他人一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T19:55:30.643

我遇到了同样的问题，除了我的原因是我试图将整数（Int32）作为 Web 服务参数传递。看起来 SSIS 中的 Web 服务参数应该始终是字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-29T07:21:37.363

我正在使用 SSIS 2017，但没有一个解决方案对我有用。但是，在更改项目使用的 SQL Server 后，从 2017 年到 2016 年（或安装了任何版本的 SQL），我能够成功运行 WebService 任务。

希望能帮助某人。

[![在此处输入图像描述](https://i.stack.imgur.com/mOORy.png)](https://i.stack.imgur.com/mOORy.png)

# asp.net-mvc - 带有破折号的 ASP.NET MVC 路由

> ID：868361
> 
> 赞同：4
> 
> 时间：2009-05-15T12:19:02.890
> 
> 标签：asp.net-mvc

我有 ASP.NET MVC 路由问题。

我准备了以下路由表来映射这样的 url

> mywebsite/mycontroller/myaction/14-longandprettyseoname

到参数：

> 14 => id（整数）
> 
> longandprettyseoname -> seo_name（字符串）

```
 routes.MapRoute(
        "myname",
        "mycontroller/myaction/{id}-{seo_name}", 
        new { controller = "mycontroller", action = "myaction", id = 0, seo_name = (string)null });

    routes.MapRoute(
        "Default",  
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = "" }); 
```

它适用于上面的 URL，但对于以下类型的 url 有问题

> mywebsite/mycontroller/myaction/14-long-and-pretty-seo-name

有可能让它工作吗？

* * *

**编辑：**

`"mycontroller/myaction/{seo_name}-{id}"`

似乎在工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2011-07-04T06:17:23.483

最明显的方法是使用约束。

由于您的 id 是一个整数，因此您可以添加一个查找整数值的约束：

```
new { id = @"\d+" } 
```

这是整个路线：

```
routes.MapRoute("myname","mycontroller/myaction/{id}-{seo_name}", 
        new { controller = "mycontroller", action = "myaction" }, 
        new { id = @"\d+"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-02-09T14:03:24.870

我的解决方案是将路线定义为：

```
routes.MapRoute("myname","mycontroller/myaction/{id}",  
        new { controller = "mycontroller", action = "myaction"}); 
```

并在 HTTP 处理程序中使用 Regex 手动解析 id 和 seoname：

```
 var routeData = RouteTable.Routes.GetRouteData(new HttpContextWrapper(context));
        var match = System.Text.RegularExpressions.Regex.Match((string)routeData.Values["id"], @"^(?<id>\d+)-(?<seoname>[\S\s]*)$");
        if (!match.Success)
        {
            context.Response.StatusCode = 400;
            context.Response.StatusDescription = "Bad Request";
            return;
        }

        int id = Int32.Parse(match.Groups["id"].Value);
        string seoname = match.Groups["seoname"].Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:24:05.983

我不认为路线是可区分的，因为它无法确定要拆分的“-”以指定`{id}`和`{seo-name}`。

如何为您的 SEO 名称使用*下划线？*或者您可以只使用 SEO 名称作为实际的`{id}`. 如果 SEO 名称是唯一的，这是一个非常可行的选项，您可以将其用作数据库中该条目的伪主键（假设它从数据库中提取某些内容）

此外，利用 Phil Haack 的[路由调试器](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)来查看哪些有效，哪些无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T20:05:05.837

定义一个特定的路线，例如：

```
 routes.MapRoute(
            "TandC", // Route controllerName
            "CommonPath/{controller}/Terms-and-Conditions", // URL with parameters
            new { controller = "Home", action = "Terms_and_Conditions" } // Parameter defaults
        ); 
```

但是这条路线必须在您的默认路线**之前注册。**

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-09-29T13:49:03.277

您可以做的是创建一个自定义控制器工厂。这样您就可以使用自定义代码来决定何时需要调用哪个控制器。

```
public class CustomControllerFactory : IControllerFactory
    {
        #region IControllerFactory Members

        public IController CreateController(RequestContext requestContext, string controllerName)
        {
            if (string.IsNullOrEmpty(controllerName))
                throw new ArgumentNullException("controllerName");

            //string language = requestContext.HttpContext.Request.Headers["Accept-Language"];
            //can be used to translate controller name and get correct controller even when url is in foreign language

            //format controller name
            controllerName = String.Format("MyNamespace.Controllers.{0}Controller",controllerName.Replace("-","_"));

            IController controller = Activator.CreateInstance(Type.GetType(controllerName)) as IController;
            controller.ActionInvoker = new CustomInvoker(); //only when using custominvoker for actionname rewriting
            return controller;
        }

        public void ReleaseController(IController controller)
        {
            if (controller is IDisposable)
                (controller as IDisposable).Dispose();
            else
                controller = null;
        }

        #endregion
    } 
```

要使用此自定义控制器工厂，您应该将其添加到 global.asax

```
protected void Application_Start()
        {
            RegisterRoutes(RouteTable.Routes);
            ControllerBuilder.Current.SetControllerFactory(typeof(CustomControllerFactory));
        } 
```

请注意，这仅适用于控制器，不适用于动作...要在动作执行之前对动作进行自定义重写，请使用以下代码：

```
public class CustomInvoker : ControllerActionInvoker
{
    #region IActionInvoker Members

    public override bool InvokeAction(ControllerContext controllerContext, string actionName)
    {
        return base.InvokeAction(controllerContext, actionName.Replace("-", "_"));
    }

    #endregion
} 
```

[我从这个博客](http://nayyeri.net/custom-controller-factory-in-asp-net-mvc)中获得了大部分代码，并根据我的需要对其进行了调整。就我而言，我希望用破折号分隔控制器名称中的单词，但您不能创建名称中带有破折号的操作。

希望这可以帮助！

# java - 我可以使用什么在 Java 中创建 REST 客户端？

> ID：868368
> 
> 赞同：6
> 
> 时间：2009-05-15T12:20:40.063
> 
> 标签：java, rest, cxf

> **可能重复：**
> [Java 的 Rest 客户端？](https://stackoverflow.com/questions/221442/rest-clients-for-java)

如果我想使用 Java 创建一个 REST 客户端，我应该使用什么？

我可以使用 CXF 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T12:33:36.317

有一个[Jersey 客户端 API](http://blogs.oracle.com/sandoz/entry/jersey_client_api)，可让您轻松地用 Java 实现客户端

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-15T12:49:27.060

我用过[Restlet](http://www.restlet.org/)。我真的很喜欢它，并写[了一篇](http://vincentfazio.blogspot.com/2007/10/restlet.html)关于我的经历的博客文章。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T12:31:09.430

我使用Jakarta Commons 的[HttpClient取得了成功。](http://hc.apache.org/httpclient-3.x/index.html)

Java 也带有[URLConnection](http://java.sun.com/j2se/1.5.0/docs/api/java/net/HttpURLConnection.html)，但您可能希望查看与[HttpClient的](http://hc.apache.org/httpclient-3.x/index.html)[比较](http://www.innovation.ch/java/HTTPClient/urlcon_vs_httpclient.html)。

[Apache CXF](http://cxf.apache.org/)确实支持 REST 客户端（请参阅[此处](http://cwiki.apache.org/CXF20DOC/jax-rs.html#JAX-RS-ClientAPI)），但似乎有点矫枉过正（CXF 是一个通用的“服务”框架，因此对 CORBA、SOAP 等的支持很复杂）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T21:12:31.080

imo 几乎不需要框架，只需使用 servlet API 并实现您需要的请求方法，即 POST / GET / PUT / DELETE / HEAD

一个例子：[http ://www.exampledepot.com/egs/javax.servlet/com_mycompany_MyServlet.html](http://www.exampledepot.com/egs/javax.servlet/com_mycompany_MyServlet.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T21:28:32.880

我认为这真的取决于应用程序和您的环境，但我发现[resteasy](http://www.jboss.org/resteasy/)真的很容易（因为它是如此声明性）和可配置的。有关客户端文档，请参阅[第 30 章。](http://www.jboss.org/file-access/default/members/resteasy/freezone/docs/1.1-RC2/userguide/html_single/index.html#RESTEasy_Client_Framework)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-03-27T07:19:21.800

使用Eclipse 的[HTTP4e REST 客户端](http://www.roussev.org/eclipse-rest-http-client-plugin-http4e/)插件。它使用简单，具有 Java/C#/Ruby/Flex/ActionScript/etc.. 一键代码生成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-27T13:07:15.013

[我尝试使用此 ling http://cxf.apache.org/docs/jax-rs-client-api.html](http://cxf.apache.org/docs/jax-rs-client-api.html)中给出的示例 我遇到了接口或 Impl 可能并不总是可用于客户端生成代理的问题. 我还尝试了 wadl2java 来查看是否生成了客户端。CXF 2.6 版本没有创建客户端类。

我对 HTTPclient 调用很满意，直到一些具体的实现改变了编写客户端的方式。

注意：我们仅在 Java 中使用 CXF，因此仅对 CXF 进行试验。其他实现可能会给出不同的结果

# vim - 在 vimdiff 中使用 diffget

> ID：868373
> 
> 赞同：8
> 
> 时间：2009-05-15T12:21:39.047
> 
> 标签：vim, vimdiff

我正在努力学习如何很好地使用 vimdiff。目前我想出了如何从一个缓冲区获取一个差异块到另一个（使用`do`），但我现在愿意做的是简单地在另一个缓冲区中获取一个（或一些）块行。

`vimdiff`文档说：

```
:[range]diffget 
```

但我不知道如何有一个正确的范围参数来简单地将我所在的行从缓冲区复制到另一个。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-15T12:28:00.107

您可以使用

```
:.,. 
```

作为从当前行到当前行的范围。

根据文档，您可以省略范围，然后将使用当前行或上面的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-11T13:39:11.617

`V`我发现使用和选择当前行`do`或更容易一些`dp`。这与选择愤怒的效果相同，`:.,.`但更容易输入！`j`此外，您可以使用或轻松添加相邻行`k`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T20:00:38.123

正如 Mykola 所说，:.,. 将指定“当前行”作为范围。

我有一个非常大的文件，需要检查每一行并可能进行更改，因此每次输入“:.,.diffput”太费力了。我录制了一个宏：

```
qq:.,.diffput[ENTER]q 
```

这创建了一个宏（保存在“q”键下）将左缓冲区中的一行“放入”右缓冲区。现在要重复这个动作，我所要做的就是输入“@q”

# jquery - 我如何在使用 jquery 时限制 LI 的数量

> ID：868375
> 
> 赞同：2
> 
> 时间：2009-05-15T12:21:51.260
> 
> 标签：jquery, jquery-ui

我正在使用 Jquery UI 开发拖放收藏夹 UI，我想限制在特定区域中放置的 LI 的数量（限制为 5 个），并在用户将一个放在另一个上时替换当前的数量。如何才能做到这一点？我目前在 jquery ui 站点上使用 photomanager 的修改版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T13:01:53.193

您可以检查该地区有多少个 LI，并从 5 个以上替换实际的 LI。让我们来看看：

```
On Drop event:
   if($("#region li").length<5){
      //do your normal drop handling
   }else{
      //replace one of the actual li's with the dragged one
   } 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T09:55:11.577

我最近以某种不同的方式做到了这一点。我不会阻止该区域是可丢弃的，而是会拾取任何多余的 LI，并将其添加回可能的池中，只需附加最后一个孩子

```
$('#pool').append($('#container li:last-child')); 
```

看看这种方法是否适合你..

# git - 使用 git-update-index --remove 删除文件模式

> ID：868379
> 
> 赞同：6
> 
> 时间：2009-05-15T12:22:17.623
> 
> 标签：git

如何在命令中提供文件模式而不是特定文件**`git-update-index --remove`**？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T17:58:41.310

就像是

```
git update-index --remove -- $(git ls-files '*.c') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T12:27:19.390

```
# for i in pattern; do git-update-index --remove $i; done 
```

那样的东西不符合你的目的吗？（不过，我从未使用过 git-update-index。）

# sharepoint - 使用基于表单的身份验证修改 SharePoint 应用程序 Web.config 文件

> ID：868393
> 
> 赞同：0
> 
> 时间：2009-05-15T12:25:41.797
> 
> 标签：sharepoint, web-config, forms-authentication

我们有一个 SharePoint 应用程序，我们希望用户能够通过激活一项功能来修改 web.config。该应用程序已扩展，因此我们有一个基于 AD 的 Web 应用程序和另一个使用基于表单的身份验证 (FBA) 的 Web 应用程序，其中 FBA 应用程序是“主要”用户应用程序。

我们使用 SPWebConfigModification 类 ( [http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebconfigmodification.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.administration.spwebconfigmodification.aspx) ) 将激活功能所需的设置写入 web.config。

这在基于广告的方面非常有效。但是，当我们尝试在基于 FBA 的 Web 应用程序上运行它时，我们会收到错误消息，因为 FBA 站点的网站集管理员无权修改服务器上的 web.config。鉴于他们是 FBA 用户，我们也不能授予他们在服务器上的权限。

有没有人遇到过这个？有没有人有任何解决方法。我假设我可以尝试让应用程序通过命令行运行更新 web.conifg，但我真的希望用户在激活该功能时完成它。我也可以尝试放松 web.config 上的安全权限，但这是一个糟糕的开始方式。

谢谢！约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T12:44:33.077

另一种方法是编写一个组件来完成它。这可以通过激活功能或更新 Web 部件来触发。

这意味着您不需要放松安全性，也不需要通过命令行来实现。

# javascript - 使用 Javascript 隐藏元素的下一个兄弟

> ID：868407
> 
> 赞同：15
> 
> 时间：2009-05-15T12:28:05.847
> 
> 标签：javascript, element, hide, siblings

我有一个从`document.getElementById('the_id')`. 我怎样才能得到它的下一个兄弟并隐藏它？我试过了，但没有用：

```
elem.nextSibling.style.display = 'none'; 
```

Firebug 错误是`elem.nextSibling.style is undefined`.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-05-15T12:31:43.483

这是因为 Firefox 将元素节点之间的空白视为文本节点（而 IE 没有），因此`.nextSibling`在元素上使用会在 Firefox 中获取该文本节点。

拥有一个用于获取下一个元素节点的函数很有用。像这样的东西

```
/* 
   Credit to John Resig for this function 
   taken from Pro JavaScript techniques 
*/
function next(elem) {
    do {
        elem = elem.nextSibling;
    } while (elem && elem.nodeType !== 1);
    return elem;        
} 
```

那么你可以做

```
var elem = document.getElementById('the_id');
var nextElem = next(elem); 

if (nextElem) 
    nextElem.style.display = 'none'; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-10T12:43:54.663

查看[Element Traversal API](http://www.w3.org/TR/ElementTraversal/#interface-elementTraversal%29:)，该 API 仅在 Element 节点之间移动。这允许以下操作：

```
elem.nextElementSibling.style.display = 'none'; 
```

从而避免了 nextSibling 中固有的潜在获取非元素节点的问题（例如 TextNode 持有空白）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T12:32:49.143

> Firebug 错误是 elem.nextSibling.style 未定义。

因为 nextSibling 可以是文本节点或其他节点类型

```
do {
   elem = elem.nextSibling;
} while(element && elem.nodeType !== 1); // 1 == Node.ELEMENT_NODE
if(elem) elem.style.display = 'none'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T12:35:58.560

尝试使用以下方法循环遍历此元素的子元素：

```
var i=0;
(foreach child in elem)
{
   if (i==0)
   {
     document.getElementByID(child.id).style.display='none';
    }
} 
```

请对语法进行适当的更正。

# html - 是否有一种自动化的方法可以将基于表格的 HTML 页面转换为纯基于 CSS 的页面？

> ID：868409
> 
> 赞同：2
> 
> 时间：2009-05-15T12:28:36.517
> 
> 标签：html, css, css-tables

我有一个使用传统标签设计的网站，但我需要转换为基于 CSS 的标签。有没有更好的方法（免费软件/工具）来做到这一点，而不是一次拿一个标签并转换它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-05-15T12:31:13.780

我会说不是。如果有，请避免它。摆脱基于表格的标记的部分目的是提高可访问性，这需要人眼。例如。内容优先级和搜索引擎优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:32:16.057

通常不会，因为从基于视觉的表格布局切换到基于语义的 CSS 布局不仅仅是代码的重新排列。

通常，您需要根据数据而不是网格重新考虑页面结构，而这只能是手动过程

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T13:03:50.160

由于 DIV 和表格具有不同的功能，因此无法自动使用 DIV+CSS 替换表格。您不能用一个替换另一个（否则，W3C 会放弃对其中一个的支持）。

很多人告诉你“桌子不好”，这是错误的。正确的说法是“数十个嵌套表都不好”。带有 CSS 的 DIV 可以做一些事情，但表格肯定有它们的位置。因此，目标是*减少*布局所需的表格数量，而不是完全摆脱它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T12:32:46.787

不，那是不可能的，甚至是一个好主意。通过基于 CSS 的标签，我假设您的意思是使用 div 进行布局而不是表格（因为 CSS 可以应用于表格）。

我建议您重新开始，这是正确执行此操作的唯一方法，但是您可以利用现有的 CSS 框架（例如[http://960.gs](http://960.gs)）来帮助您继续前进，也可以考虑使用 YUI 重置和字体样式表之类的东西一个良好的基础，让您在大多数现代浏览器的公平竞争环境中开始

# c# - 根据定义，值类型是不可变的吗？

> ID：868411
> 
> 赞同：44
> 
> 时间：2009-05-15T12:30:20.007
> 
> 标签：c#, .net, immutability, value-type

我经常读到`struct`s 应该是不可变的——它们不是根据定义吗？

你认为`int`是不可变的吗？

```
int i = 0;
i = i + 123; 
```

似乎没问题 - 我们得到一个新的`int`并将其分配回`i`. 那这个呢？

```
i++; 
```

好的，我们可以将其视为一条捷径。

```
i = i + 1; 
```

呢`struct` `Point`？

```
Point p = new Point(1, 2);
p.Offset(3, 4); 
```

这真的改变了观点`(1, 2)`吗？`Point.Offset()`我们不应该将其视为返回新点的以下快捷方式吗？

```
p = p.Offset(3, 4); 
```

这个想法的背景是这样的——一个没有身份的值类型怎么可能是可变的？您必须至少查看两次才能确定它是否发生了变化。但是，如果没有身份，你怎么能做到这一点呢？

我不想通过考虑`ref`参数和装箱来使推理复杂化。我也知道`p = p.Offset(3, 4);`表达不变性要好得多`p.Offset(3, 4);`。但问题仍然存在——值类型在定义上不是不可变的吗？

**更新**

我认为至少涉及两个概念——变量或字段的可变性和变量值的可变性。

```
public class Foo
{
    private Point point;
    private readonly Point readOnlyPoint;

    public Foo()
    {
        this.point = new Point(1, 2);
        this.readOnlyPoint = new Point(1, 2);
    }

    public void Bar()
    {
        this.point = new Point(1, 2);
        this.readOnlyPoint = new Point(1, 2); // Does not compile.

        this.point.Offset(3, 4); // Is now (4, 6).
        this.readOnlyPoint.Offset(3, 4); // Is still (1, 2).
    }
} 
```

在示例中，我们必须字段 - 一个可变字段和一个不可变字段。因为值类型字段包含整个值，所以存储在不可变字段中的值类型也必须是不可变的。我仍然对结果感到非常惊讶——我没有期望 readonly 字段保持不变。

变量（除了常量）总是可变的，因此它们对值类型的可变性没有限制。

* * *

答案似乎不是那么直截了当，所以我将重新表述这个问题。

鉴于以下。

```
public struct Foo
{
    public void DoStuff(whatEverArgumentsYouLike)
    {
        // Do what ever you like to do.
    }

    // Put in everything you like - fields, constants, methods, properties ...
} 
```

你能给出一个完整的版本`Foo`和一个使用例子 - 可能包括`ref`参数和装箱 - 这样就不可能重写所有出现的

```
foo.DoStuff(whatEverArgumentsYouLike); 
```

和

```
foo = foo.DoStuff(whatEverArgumentsYouLike); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-05-15T15:15:04.497

> 如果对象的状态在对象创建后不改变，则该对象是不可变的。

简短的回答：不，值类型根据定义不是不可变的。**结构和类都可以是可变的或不可变的。**所有四种组合都是可能的。如果结构或类具有非只读的公共字段、带有 setter 的公共属性或设置私有字段的方法，则它是可变的，因为您可以更改其状态而无需创建该类型的新实例。

* * *

长答案：首先，不变性问题仅适用于具有字段或属性的结构或类。最基本的类型（数字、字符串和 null）本质上是不可变的，因为它们没有任何东西（字段/属性）可以改变。A 5 is a 5 is a 5。对 5 的任何操作都只会返回另一个不可变值。

您可以创建可变结构，例如`System.Drawing.Point`. 两者都`X`具有`Y`修改结构字段的设置器：

```
Point p = new Point(0, 0);
p.X = 5;
// we modify the struct through property setter X
// still the same Point instance, but its state has changed
// it's property X is now 5 
```

有些人似乎将不可变性与值类型通过值（因此它们的名称）而不是通过引用传递的事实混淆了。

```
void Main()
{
    Point p1 = new Point(0, 0);
    SetX(p1, 5);
    Console.WriteLine(p1.ToString());
}

void SetX(Point p2, int value)
{
    p2.X = value;
} 
```

在这种情况下`Console.WriteLine()`写“ `{X=0,Y=0}`”。这里`p1`没有修改，*因为*`SetX()`修改的`p2`是. 发生这种情况是因为它是一个*值类型*，而不是因为它是*不可变*的（它不是）。*`p1``p1`*

 ***为什么值类型应该是不可变的*？*很多原因......看到[这个问题](https://stackoverflow.com/questions/441309/why-are-mutable-structs-evil)。主要是因为可变值类型会导致各种不那么明显的错误。在上面的例子中，程序员可能期望`p1`在`(5, 0)`调用`SetX()`. 或者想象一下按一个以后可以更改的值进行排序。然后您的排序集合将不再按预期排序。字典和哈希也是如此。神话般的[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert) ([博客](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/)) 写了一个[关于不变性的完整系列，](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/immutability-in-c-part-one-kinds-of-immutability)以及为什么他认为这是 C# 的未来。[这是他的一个示例](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/mutating-readonly-structs)，可让您“修改”只读变量。

* * *

更新：您的示例：

```
this.readOnlyPoint.Offset(3, 4); // Is still (1, 2). 
```

正是 Lippert 在他的帖子中提到的关于修改只读变量的内容。`Offset(3,4)`实际上修改了 a `Point`，但它是 的*副本*，`readOnlyPoint`并且从未分配给任何东西，所以它丢失了。

这*就是*为什么可变值类型是邪恶的：它们让你*认为*你正在修改某些东西，而有时你实际上是在修改一个副本，这会导致意想不到的错误。如果`Point`是不可变的，`Offset()`则必须返回一个新的`Point`，并且您将无法将其分配给`readOnlyPoint`. 然后你说*“哦，对，它是只读的是有原因的。我为什么要尝试更改它？幸好编译器现在阻止了我。”*

* * *

更新：关于你改写的请求......我想我知道你在说什么。在某种程度上，您可以“认为”结构是*内部*不可变的，修改结构与用修改后的副本替换它是一样的。据我所知，它甚至可能是 CLR 在内存中内部所做的事情。（这就是闪存的工作原理。你不能只编辑几个字节，你需要将整个千字节块读入内存，修改你想要的少数，然后将整个块写回。）然而，即使它们“内部不可变” "，这是一个实现细节，对于我们作为结构用户的开发人员（他们的接口或 API，如果你愿意的话）来说，它们是*可以*更改的。我们不能忽视这一事实并“认为它们是不可变的”。

在评论中你说“你不能引用字段或变量的值”。您假设每个结构变量都有不同的副本，这样修改一个副本不会影响其他副本。这并不完全正确。以下标记的行不可替换，如果...

```
interface IFoo { DoStuff(); }
struct Foo : IFoo { /* ... */ }

IFoo otherFoo = new Foo();
IFoo foo = otherFoo;
foo.DoStuff(whatEverArgumentsYouLike); // line #1
foo = foo.DoStuff(whatEverArgumentsYouLike); // line #2 
```

第 1 行和第 2 行的结果不同...为什么？因为`foo`和`otherFoo`引用 Foo 的*同一个盒装实例*。第 1 行中的任何更改都会`foo`反映在`otherFoo`. 第 2 行替换`foo`为一个新值并且什么都不做`otherFoo`（假设`DoStuff()`返回一个新`IFoo`实例并且不修改`foo`自身）。

```
Foo foo1 = new Foo(); // creates first instance
Foo foo2 = foo1; // create a copy (2nd instance)
IFoo foo3 = foo2; // no copy here! foo2 and foo3 refer to same instance 
```

修改`foo1`不会影响`foo2`or `foo3`。修改`foo2`将反映在 中`foo3`，但不会反映在 中`foo1`。修改`foo3`将反映在`foo2`但不会反映在`foo1`.

令人困惑？坚持不可变的值类型，你就消除了修改它们的冲动。

* * *

更新：修复了第一个代码示例中的错字

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-05-15T12:39:31.203

可变性和值类型是两个不同的东西。

将类型定义为值类型，表明运行时将复制值而不是对运行时的引用。另一方面，可变性取决于实现，每个类都可以根据需要实现它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-05-15T12:36:50.023

您可以编写可变结构，但最佳实践是使值类型不可变。

例如 DateTime 在执行任何操作时总是会创建新实例。点是可变的，可以更改。

回答您的问题：不，根据定义，它们不是不可变的，这取决于它们是否应该是可变的。例如，如果它们应该用作字典键，它们应该是不可变的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-05-15T12:47:47.487

如果你的逻辑足够远，那么*所有*类型都是不可变的。当您修改引用类型时，您可能会争辩说您实际上是在将新对象写入同一地址，而不是修改任何内容。

或者您可以争辩说，在任何语言中，一切都是可变的，因为有时以前用于一件事的记忆会被另一件事覆盖。

有了足够多的抽象，而忽略了足够多的语言特性，你就可以得出你喜欢的任何结论。

这没有抓住重点。根据 .NET 规范，值类型是可变的。你可以修改它。

```
int i = 0;
Console.WriteLine(i); // will print 0, so here, i is 0
++i;
Console.WriteLine(i); // will print 1, so here, i is 1 
```

但它仍然是一样的我。变量`i`只声明一次。在此声明之后发生的任何事情都是修改。

在具有不可变变量的函数式语言中，这是不合法的。++i 是不可能的。一旦声明了一个变量，它就有一个固定的值。

在 .NET 中，情况并非如此，没有什么可以阻止我`i`在声明后修改它。

在考虑了更多之后，这是另一个可能更好的示例：

```
struct S {
  public S(int i) { this.i = i == 43 ? 0 : i; }
  private int i;
  public void set(int i) { 
    Console.WriteLine("Hello World");
    this.i = i;
  }
}

void Foo {
  var s = new S(42); // Create an instance of S, internally storing the value 42
  s.set(43); // What happens here?
} 
```

在最后一行，根据您的逻辑，我们可以说我们实际上构造了一个新对象，并用该值覆盖旧对象。但那是不可能的！要构造一个新对象，编译器必须将`i`变量设置为 42。但它是私有的！它只能通过用户定义的构造函数访问，该构造函数明确禁止值 43（改为将其设置为 0），然后通过我们的`set`方法访问，该方法具有令人讨厌的副作用。编译器无法*仅*使用它喜欢的值创建一个新对象。`s.i`可以设置为 43的唯一方法是通过调用来*修改*当前对象`set()`。编译器不能这样做，因为它会改变程序的行为（它会打印到控制台）

因此，要使所有结构不可变，编译器就必须作弊并破坏语言规则。当然，如果我们愿意打破规则，我们可以证明任何事情。我可以证明所有整数也是相等的，或者定义一个新类会导致你的计算机着火。只要我们遵守语言规则，结构就是可变的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-05-15T12:39:32.607

> 我不想通过考虑`ref` 参数和装箱来使推理复杂化。我也知道`p = p.Offset(3, 4);`表达不变性要好得多 `p.Offset(3, 4);`。但问题仍然存在——值类型在定义上不是不可变的吗？

那么，你并没有真正在现实世界中运作，是吗？在实践中，值类型在函数之间移动时复制自身的倾向与不可变性很好地吻合，但除非您使它们不可变，否则它们实际上并不是不可变的，因为正如您所指出的，您可以使用对它们的引用像其他任何东西一样。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2009-05-15T12:40:45.567

> 根据定义，值类型不是不可变的吗？

不，它们不是：`System.Drawing.Point`例如，如果您查看 struct ，它的`X`属性上有一个 setter 和一个 getter。

但是，可以说所有值类型*都应该*使用不可变的 API 定义。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-15T13:34:48.073

我认为令人困惑的是，如果你有一个应该像值类型一样工作的引用类型，那么让它不可变是个好主意。值类型和引用类型之间的主要区别之一是通过引用类型上的一个名称所做的更改可以显示在另一个名称中。值类型不会发生这种情况：

```
public class foo
{
    public int x;
}

public struct bar
{
    public int x;
}

public class MyClass
{
    public static void Main()
    {
        foo a = new foo();
        bar b = new bar();

        a.x = 1;
        b.x = 1;

        foo a2 = a;
        bar b2 = b;

        a.x = 2;
        b.x = 2;

        Console.WriteLine( "a2.x == {0}", a2.x);
        Console.WriteLine( "b2.x == {0}", b2.x);
    }
} 
```

产生：

```
a2.x == 2
b2.x == 1 
```

现在，如果您有一个类型，您希望具有值语义，但又不想真正使其成为值类型 - 可能是因为它需要的存储太多或其他原因，您应该考虑不可变性是其中的一部分该设计。使用不可变的 ref 类型，对现有引用所做的任何更改都会生成一个新对象，而不是更改现有对象，因此您会获得值类型的行为，即您持有的任何值都不能通过其他名称进行更改。

当然 System.String 类是这种行为的一个典型例子。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-06-02T14:15:39.657

去年，我写了一篇博客文章，讨论了不让结构不可变可能遇到的问题。

[完整的帖子可以在这里阅读](http://www.blog.activa.be/2008/05/25/TheProblemsWithValueTypes.aspx)

这是事情如何变得可怕错误的一个例子：

```
//Struct declaration:

struct MyStruct
{
  public int Value = 0;

  public void Update(int i) { Value = i; }
} 
```

代码示例：

```
MyStruct[] list = new MyStruct[5];

for (int i=0;i<5;i++)
  Console.Write(list[i].Value + " ");
Console.WriteLine();

for (int i=0;i<5;i++)
  list[i].Update(i+1);

for (int i=0;i<5;i++)
  Console.Write(list[i].Value + " ");
Console.WriteLine(); 
```

这段代码的输出是：

```
0 0 0 0 0
1 2 3 4 5 
```

现在让我们做同样的事情，但将数组替换为泛型`List<>`：

```
List<MyStruct> list = new List<MyStruct>(new MyStruct[5]); 

for (int i=0;i<5;i++)
  Console.Write(list[i].Value + " ");
Console.WriteLine();

for (int i=0;i<5;i++)
  list[i].Update(i+1);

for (int i=0;i<5;i++)
  Console.Write(list[i].Value + " ");
Console.WriteLine(); 
```

输出是：

```
0 0 0 0 0
0 0 0 0 0 
```

解释很简单。不，这不是装箱/拆箱...

从数组中访问元素时，运行时将直接获取数组元素，因此 Update() 方法对数组项本身起作用。这意味着数组中的结构本身已更新。

在第二个示例中，我们使用了泛型`List<>`. 当我们访问特定元素时会发生什么？好吧，indexer 属性被调用，这是一个方法。值类型在方法返回时总是被复制，所以这正是发生的情况：列表的索引器方法从内部数组中检索结构并将其返回给调用者。因为它涉及到一个值类型，所以会做一个副本，并在副本上调用Update()方法，这当然对列表的原始项没有影响。

换句话说，始终确保您的结构是不可变的，因为您永远无法确定何时会制作副本。大多数时候这是显而易见的，但在某些情况下，它真的会让你大吃一惊……

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-15T12:55:07.530

不，他们不是。例子：

```
Point p = new Point (3,4);
Point p2 = p;
p.moveTo (5,7); 
```

在此示例`moveTo()`中是*就地*操作。它改变了隐藏在引用后面的结构`p`。您可以通过查看`p2`：它的位置也将发生变化。对于不可变结构，`moveTo()`必须返回一个新结构：

```
p = p.moveTo (5,7); 
```

现在，`Point`它是不可变的，当您在代码中的任何位置创建对它的引用时，您不会有任何意外。让我们看看`i`：

```
int i = 5;
int j = i;
i = 1; 
```

这是不同的。`i`不是一成不变的，`5`是。第二个赋值不会复制对包含结构的引用，`i`但会复制`i`. 因此，在幕后，发生了完全不同的事情：您获得了变量的完整副本，而不仅仅是内存中地址的副本（引用）。

与对象等效的是复制构造函数：

```
Point p = new Point (3,4);
Point p2 = new Point (p); 
```

在这里，内部结构`p`被复制到一个新的对象/结构中，`p2`并将包含对它的引用。但这是一个非常昂贵的操作（与上面的整数赋值不同），这就是大多数编程语言做出区分的原因。

随着计算机变得更强大并获得更多内存，这种区别将会消失，因为它会导致大量的错误和问题。在下一代中，将只有不可变对象，任何操作都将受到事务的保护，甚至`int`是一个成熟的对象。就像垃圾收集一样，它将在程序稳定性方面向前迈出一大步，在最初的几年里会引起很多悲伤，但它会让编写可靠的软件成为可能。今天，计算机的速度还不够快。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-17T21:47:44.140

不，值类型根据定义*不是*不可变的。

首先，我最好问一个问题“值类型的行为是否像不可变类型？” 而不是询问它们是否是不可变的——我认为这引起了很多混乱。

```
struct MutableStruct
{
    private int state;

    public MutableStruct(int state) { this.state = state; }

    public void ChangeState() { this.state++; }
}

struct ImmutableStruct
{
    private readonly int state;

    public MutableStruct(int state) { this.state = state; }

    public ImmutableStruct ChangeState()
    {
        return new ImmutableStruct(this.state + 1);
    }
} 
```

[待续...]

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-09T20:35:09.767

要定义一种类型是可变的还是不可变的，必须定义该“类型”所指的内容。当声明引用类型的存储位置时，声明仅分配空间来保存对存储在别处的对象的引用；该声明不会创建有问题的实际对象。尽管如此，在谈论特定引用类型的大多数上下文中，人们不会谈论*保存引用的存储位置*，而是谈论*由该引用标识的对象*。可以写入保存对象引用的存储位置这一事实绝不意味着对象本身是可变的。

相反，当声明值类型的存储位置时，系统将在该存储位置内为该值类型持有的每个公共或私有字段分配嵌套存储位置。有关值类型的所有内容都保存在该存储位置中。如果定义了一个`foo`类型的变量`Point`及其两个字段`X`和`Y`，则分别为 3 和 6。如果将`Point`in的“实例”定义`foo`为一对*fields*，则当且仅当它是可变的时，该实例`foo`才是可变的。如果将一个实例定义为这些字段中保存`Point`的*值*（例如“3,6”），那么根据定义，这种实例是不可变的，因为更改这些字段之一会导致`Point`持有不同的实例。

我认为将值类型“实例”视为字段而不是它们持有的值更有帮助。根据该定义，存储在可变存储位置的任何值类型，并且存在任何非默认值，将*始终*是可变的，无论它是如何声明的。一条语句用字段和`MyPoint = new Point(5,8)`构造 , 的新实例，然后通过将其字段中的值替换为新创建的值来进行变异。即使 struct 无法在其构造函数之外修改其任何字段，但 struct 类型也无法保护实例不被另一个实例的内容覆盖其所有字段。`Point``X=5``Y=8``MyPoint``Point`

顺便说一下，一个简单的例子，可变结构可以实现通过其他方式无法实现的语义：假设`myPoints[]`是一个可由多个线程访问的单元素数组，让 20 个线程同时执行代码：

```
Threading.Interlocked.Increment(myPoints[0].X); 
```

如果`myPoints[0].X`开始等于 0 并且有 20 个线程执行上述代码，无论是否同时执行，`myPoints[0].X`都将等于 20。如果有人试图模仿上面的代码：

```
myPoints[0] = new Point(myPoints[0].X + 1, myPoints[0].Y); 
```

然后，如果任何线程`myPoints[0].X`在另一个线程读取它并写回修改后的值之间进行读取，则增量的结果将丢失（其结果`myPoints[0].X`可能会任意以 1 到 20 之间的任何值结束。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-15T12:45:12.640

当对象/结构以数据无法更改的方式传递给函数时，它们是不可变的，并且返回的结构是`new`结构。经典的例子是

`String s = "abc";`

`s.toLower();`

如果`toLower`函数是这样编写的，所以返回一个替换“s”的新字符串，它是不可变的，但如果函数逐个字母替换“s”内的字母并且从不声明“新字符串”，它是可变的。

# eclipse - 从控制台“退出”（ctrl+c）进程-Eclipse vs Intellij

> ID：868412
> 
> 赞同：29
> 
> 时间：2009-05-15T12:30:41.083
> 
> 标签：eclipse, intellij-idea, kill-process

似乎在 Eclipse 中，如果您想将 ctrl+c 发送到您不能的进程。控制台上的终止按钮只是杀死正在运行的进程而不运行关闭挂钩。我知道java本身不允许向另一个进程发送信号。

然而，intellij idea 的“停止”按钮旁边似乎确实有一个“退出”按钮，它确实允许关闭挂钩运行。

有人可以告诉我intellij是如何做到的吗？

我也需要将 ctrl+c 从我的程序发送到另一个 java 进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:17:39.837

Intellij 使用原生库在 Windows 上发送信号，在 Unix 上使用 kill 命令。
[这是一个源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.jetbrains/intellij-idea/11.0/com/intellij/execution/process/UnixProcessManager.java#UnixProcessManager.CLib)

您是否说过您不能在 Java 中发送信号。所以你需要执行本机代码。
[看这里的问题](https://stackoverflow.com/questions/7835212/how-to-send-sigint-signal-from-java-to-an-external-process)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-04T16:31:18.253

据我了解，这只发生在带有 Eclipse 的 Windows 上。另见：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=38016](https://bugs.eclipse.org/bugs/show_bug.cgi?id=38016)

至于只是测试你的钩子，你可以通过调用 System.exit() 来做到这一点，然后我想你的用户不会使用 Eclipse 运行应用程序，所以可以指望它为他们工作。

# visual-sourcesafe - 如何强制注销 VSS 上的所有用户？

> ID：868420
> 
> 赞同：1
> 
> 时间：2009-05-15T12:32:02.110
> 
> 标签：visual-sourcesafe, logout, visual-sourcesafe-2005

VSS 再次恢复它对我的存储库的破坏。修复命令不会让我修复，锁定 VSS 似乎不会影响当前登录的用户——而且它不是用户，它声称唯一登录的人是管理员（通过 VSS 管理工具！）我已经关闭了 VSS 管理工具和客户端的所有实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:39:51.873

在计算机管理中，关闭所有会话并打开文件。这很激烈，但这是我找到解决它的唯一方法。您可能还想暂时关闭共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-25T14:58:33.133

我遇到了同样的问题，即使按照上面答案中的步骤进行操作，直到我**停止**SQLWriter （Sql Server VSS 编写器）和**SSService**（Visual SourceSafe LAN 服务）服务，它才**消失。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T12:36:30.180

给大家写一封邮件：

**主题**: VSS 紧急情况

**正文**：要求每个人立即断开与 VSS 的连接。这不是演习。我再说一遍：这不是演习。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:38:30.707

重新启动机器并重试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-16T21:34:16.010

关闭所有 Visual Studio 实例，因为它们也是（或可以是）Visual Source Safe 的客户端。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-10-22T05:57:35.830

停止 SSService（Visual SourceSafe LAN 服务）对我有用，谢谢。

它节省了很多时间和困惑......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-02-04T21:17:29.440

我每天凌晨 2:00 都在任务计划程序中运行这个批处理文件，当时无论如何都不应该登录，但确实如此。它似乎可以解决问题。

```
net stop sqlwriter
net stop ssservice
"D:\Program Files (x86)\Microsoft Visual SourceSafe\analyze.exe" -C -D -F -V4 "D:\vss\data"
net start ssservice
net start sqlwriter 
```

我遇到的唯一问题是备份文件夹中可能包含数据，这会使分析器停止运行。因此，如果我再次遇到该问题，我最终可能会添加一些命令将这些内容移出 data\backup 文件夹。（在这种情况下，您必须将 analyze.log 文件保存在备份文件夹中。不过，我对此还没有做足够的研究。）

我希望这有帮助！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-21T13:21:35.520

1.  打开“Microsoft Visual SourceSafe 管理”。
2.  从用户 > 更改密码中选择用户并更改密码（如果需要）。
3.  工具>选项>取消勾选“使用网络名称自动登录”>确定。
4.  打开“Microsoft Visual SourceSafe”并使用所需用户登录，然后对所需文件执行“撤消签出”或“签入”。

# firefox - Firefox 扩展——在菜单栏中加载页面？

> ID：868421
> 
> 赞同：2
> 
> 时间：2009-05-15T12:32:02.563
> 
> 标签：firefox, login, google-chrome, xul

我不确定这是否可能，部分原因是我不知道术语是什么......

我想创建一个扩展，除其他外，它将具有一个功能，当用户单击状态栏图标时，一个小窗口将滑出，该窗口内将是一个网站登录页面。当然，他们随后会照常登录，任何 cookie 或身份验证都会照常处理。

我不确定谷歌如何找到正确的覆盖/镀铬功能/命名空间。另外，我不想对页面的源进行 AJAX，我希望直接从服务器加载实际页面（出于安全原因）但是，我还想拦截用户在页面上看到的内容（类似于油脂猴风格，我猜）所以只有表单字段和头部出现，而不是任何“你忘记密码了吗”以及什么不是信息。ALSO（我确定如果上述任何一项都是可能的，这也应该是），我想拦截服务器的响应，以便在它完成它需要做的事情之后（我不想搞砸并且可能会遇到麻烦）用户会看到类似“你做到了！”的内容。在同一个滑出窗口中，而不是服务器通常的输出。

所以我想问题是：有没有办法：

1.  有一个非菜单窗口在点击时滑出，
2.  在该窗口中加载实时网页，然后
3.  修改实时页面的输出，同时仍然保留在网站上？

登录页面是加密的，登录/密码被认为是绝密的，所以我必须尽可能地尊重安全性，而不是尝试更简单的技术，如 ajax 或 cookie-moding。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:57:16.600

这是一个例子：

首先创建一个 xul 覆盖（login.xul），其中包含一个 iframe 元素，该元素将显示您的登录页面：

```
<?xml version="1.0"?>
<overlay id="login-window-vb" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

    <window id="main-window">
          <vbox>
            <iframe id="login-frame" src="http://yoursite.com/custom-login" style="display:none;">

           </iframe>
          </vbox>
    </window>

</overlay> 
```

请注意，我将显示样式设置为“无”，以便我们仅在用户单击状态栏中的登录图标时才能显示 iframe。

然后在你的清单文件中注册这个覆盖：

```
content     yourextension    chrome/content/
overlay chrome://browser/content/browser.xul chrome://yourextension/content/login.xul 
```

然后添加另一个覆盖层，它将在状态栏中显示登录图标：

```
 <?xml version="1.0"?>
    <overlay id="login-status" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<script type="application/x-javascript">
function ShowLogin() {
// get the login iframe and display it
var loginBox = document.getElementById('login-frame');
loginBox.style.display = "";
loginBox.height = "200px";
}
</script>

    <statusbar id="status-bar">
        <statusbarpanel id="login-icon" image="" label="Login" oncommand="ShowLoginBox()" />
    </statusbar>

    </overlay> 
```

并以与上一个相同的方式注册此覆盖。

现在 iframe 将从服务器显示您的登录页面，并将注册 cookie。而且我认为任何 Greasmonkey 脚本也会到达此 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T12:59:25.040

对于 #1，查找显示“Firefox 应该记住这个密码吗？”的代码。

我不确定#2，但由于 Firefox 中的主 HTML 窗口也是 XUL，我不明白为什么这不可能。

3号有点棘手。首先，网站一直在变化，那么您打算如何知道要过滤掉哪一部分呢？在页面加载时更改 DOM 没有问题（以 Greasemonkey 为例，它就是这样做的）。

# windows - Windows 上的 Qt DLL 部署

> ID：868423
> 
> 赞同：5
> 
> 时间：2009-05-15T12:32:41.063
> 
> 标签：windows, dll, manifest

我有另一个公司的应用程序插件。我的插件使用 Qt，所以它需要 Qt DLL。我的问题是所有版本的 4.x Qt Dll 都被称为相同的，例如：QtCore4.dll。很可能某些其他插件或其他将自身插入 PATH 环境变量的应用程序已将 Qt dll 放入应用程序文件夹中。在这种情况下，插件将不会启动，因为它需要不同版本的 DLL。

*   Q1。DLL 部署的建议常见做法是什么？
*   Q2。如果宿主应用程序使用不同版本的 Qt 会怎样。windows 会允许宿主应用程序和插件使用不同的版本 () 吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-11-20T12:05:53.130

只是为了帮助其他人解决这个问题：保证所有 4.X 版本的 QT DLL 都是相同的（或至少是二进制兼容的）。（对于所有 3.X 版本等都是一样的）所以不会有问题。这也是为什么 Qt dll 命名中没有第二个数字的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-09-30T12:09:27.673

A1：最佳实践：将 DLL 放在可执行文件的目录中。它将首先在此处查找以加载 DLL。这是常见的做法。

A2：如果应用程序以某种方式使用不同版本的 Qt 并且您所描述的模块需要更高版本或特定版本，则可能会导致问题（无法工作、崩溃等）。

使用静态链接，您还必须考虑 Qt 的许可证限制。只要库在运行时动态加载并且可以与应用程序分离，LGPL 就很高兴。这仅适用于您不发布源等情况。

此外，您的安装程序应设置对这些文件的访问权限，以防止它们被其他恶意应用程序覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-29T19:05:29.350

对于自 XP 以来的 Windows 版本（即 XP、2003、Vista、2008 和 Win7），您可以使用[并行程序集](http://msdn.microsoft.com/en-us/library/aa376307%28VS.85%29.aspx)或[DLL 重定向](http://msdn.microsoft.com/en-us/library/ms682600%28VS.85%29.aspx)。在任何一种情况下，本质上您所做的是包含一个小文本文件，该文件告诉操作系统您需要使用与可执行文件位于同一目录中的特定版本的 DLL。

这些是鲜为人知的功能，但它们确实可以将您的屁股从“DLL Hell”中拯救出来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T14:02:48.383

有没有办法选择与Qt静态链接？

我会将 DLL 部署在与我的应用程序/插件相同的目录中。

但是，这并不能回答您的其他问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T15:53:03.110

就像蒂姆说的那样，您应该将 DLL 部署在与您正在制作的应用程序/插件相同的目录中。我相信 PATH 变量不是您的程序查找 QT4 dll 的第一个位置，因此如果您将它部署在同一个文件夹中，您的应用程序将使用您的应用程序选择一个并忽略 PATH 上的任何内容。

Q1：过去似乎每个人都将他们的 DLL 放在 system32 文件夹中，因为他们知道它在 PATH 上，并且知道那里的程序可以找到它。从用户的角度来看，当我想卸载某些东西时，我发现很难清理。现在，由于存储价格低廉，我会说将您的 DLL 保留在您的应用程序中，特别是如果它们像这样，可能有多个版本。虽然我不是专家，但这就是我为 Java 应用程序处理 jar 文件的方式。

Q2：我会这么认为。这将取决于应用程序和插件的目录结构。您可以告诉您的插件使用哪个版本，我敢打赌，该应用程序的版本也已经在一个特殊的地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-02T21:55:24.650

为了安全起见，您必须确保您的应用程序使用您希望它使用的 dll 版本。Windows 保证首先查看应用程序文件夹。所以你应该把所有的二进制依赖项放在那里。

如果您在资源管理器中双击它时您的应用程序没有运行，Windows 会告诉您它需要什么 dll。将该 dll 复制到应用程序文件夹。如果您的应用程序运行，请转到下一步。

现在您应该暂时删除（或重命名）您放在应用程序文件夹中的dll，并且每次您应该双击您的应用程序。如果 Windows 没有抱怨，它会在其他地方找到 dll。将该 dll 从 PATH 环境中取出（可能是暂时的）。Rapid Environment Editor 是一个免费实用程序，可编辑立即生效的环境变量。

只有当您确定您的应用程序使用应用程序目录中的 dll 并且没有从其他地方拉入任何 dll 时，您才能再次开始编辑 PATH 变量以恢复旧情况。

# php - 混合表单和mysql数据库查询的问题

> ID：868440
> 
> 赞同：0
> 
> 时间：2009-05-15T12:36:02.850
> 
> 标签：php, javascript, mysql

我有以下表格，我已经尽可能地减少了，但不确定问题出在哪里。我正在尝试将表单值插入数据库。

但是，当尝试使用下面的表格时，它会吐出：

查询为空

两次。STATUS 表存在，删除和通知的字段也存在。该表当前没有内容。我不明白为什么查询会是空的？

```
<?php
if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"]; else
if (isset($_POST["cmd"]))
  $cmd = $_POST["cmd"]; else
die("Invalid URL");
if (isset($_GET["pk"])) {
    $pk = $_GET["pk"];
}
if (isset($_POST["deleted"])) {
    $deleted = $_POST["deleted"];
}
if (isset($_POST["notice"])) {
    $notice = $_POST["notice"];
}
$con = mysqli_connect("localhost","user","password", "db");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$con->set_charset("utf8");
$getformdata = $con->query("select * from STATUS where ARTICLE_NO = '$pk'");
$checkDeleted = "";
$checkNotice = "";
while ($row = mysqli_fetch_assoc($getformdata)) {
    $checkDeleted = $row['deleted'];
    $checkNotice = $row['notice'];
}
if($cmd=="submitinfo") {
    $statusQuery = "INSERT INTO STATUS VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
    if ($statusInfo = $con->prepare($userQuery)) {
        $statusInfo->bind_param("ss", $deleted, $notice);
        $statusInfo->execute();
        $statusInfo->close();
        echo "true";
    } else {
        echo "false";
    }
    print_r($con->error);
}
if($cmd=="EditStatusData") {
    echo "<form name=\"statusForm\" action=\"test.php\" method=\"post\" enctype=\"multipart/form-data\">
<h1>Editing information for auction: ".$pk."</h1>
Löschung Ebay:
<input type=\"checkbox\" name=\"deleted\" value=\"checked\" ".$checkDeleted." />
<br />
Abmahnung:
<input type=\"checkbox\" name=\"notice\"  value=\"checked\" ".$checkNotice."  />
<br />
<input type=\"hidden\" name=\"cmd\" value=\"submitinfo\" />
<input name=\"Submit\" type=\"submit\" value=\"submit\" />
</form>";
} else {
    print_r($con->error);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T12:47:04.210

这里有错别字吗：

```
$statusQuery = "INSERT INTO STATUS VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)";
if ($statusInfo = $con->prepare($userQuery)) { 
```

第二行不应该是 $statusQuery 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T12:47:05.957

尝试将一些内容放入表中......这是有道理的，如果没有什么可以返回，它会告诉你查询是空的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:47:14.570

你的任务是

> $statusQuery = "插入...

但是您引用了一个名为 $userQuery 的变量

> if ($statusInfo = $con->prepare( **$userQuery** )) {

# mysql - 来自客户端程序的 MySQL 连接仍然存在

> ID：868448
> 
> 赞同：0
> 
> 时间：2009-05-15T12:38:47.087
> 
> 标签：mysql, vb.net

在我工作的一所大学，我们目前正在测试（试运行）我开发的新招生系统。该应用程序在不同的办公室安装了几个模块（会计、出纳、课程安排、录取、建议、评分）。我们使用的是 MySQL Server 5.1，前端是使用 VB.Net 开发的。

系统有1台计算机服务器和25个客户端。

我注意到，使用 MySQL Administrator，尽管我对所有数据访问/操作代码都使用了**using语法，但客户端的连接仍然存在。**我认为在**end using**语句之后，连接会自动释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:45:13.327

我倾向于发现 using 并不总是关闭文件和连接，尤其是如果抛出异常，所以我只使用 try..finally 块来确保连接肯定关闭，无论应用程序中发生了什么。

因此，只需尝试不使用 using 并使用 finally 块关闭连接，看看是否能解决您的问题。

# visual-studio - 在 Visual Studio 解决方案中的多个项目中引用外部库的最佳方式

> ID：868451
> 
> 赞同：5
> 
> 时间：2009-05-15T12:39:31.623
> 
> 标签：visual-studio, version-control, reference

我们在 VSS 源代码控制下有一个 Visual Studio 2008 解决方案。该解决方案包含许多类库，其中许多需要对不属于该解决方案的程序集的引用。目前，我们在每个项目中保留该程序集的单独副本，但随着项目数量的增长，将更新复制到外部程序集变得越来越乏味。有没有更好的方法在解决方案和源代码管理中拥有一个程序集副本，然后可以在所有项目中引用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T12:45:02.623

在根文件夹中创建一个“外部库”/“lib”/“libraries”文件夹，从那里将其添加到项目中的源代码管理和引用库。在引用属性项目中使用“复制本地”会自动将其复制到它的 bin 文件夹中。

我们项目的结构：

```
workspace
  config
    partial app configs goes here
  lib
    external libraries goes here
  src
    Domain          
      domainProjects
    Infrastructure
      infrastructureProjects
        references 3rd party dll's from lib folder
    UI
    Tests        
  solutions
    primaryUIapplication
      references projects from "src" folder
    domainLogic
    etc. 
```

在解决方案中，它看起来像：

```
_misc
  config
  tests
Domain
Infrastructure
UI 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:44:34.780

在那里，这是 VSS 的全部“荣耀”以及整个“解决方案的一部分”。

回到主题：不是特别确定，但首先将`lib`文件夹添加到您的目录结构中，将其添加到源代码管理中，然后尝试将解决方案文件夹添加到您的解决方案中，您将为每个第三方程序集执行“添加现有项” .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T13:14:59.993

Arnis L. 有答案 - 但我想知道为什么你的这么多项目具有相同的依赖关系？如果你重组你的项目，使它们中只有一个具有这种依赖关系，那么管理起来会更容易。

# sql - 用于返回存储为时间戳的出生日期列表的数据库无关 SQL

> ID：868464
> 
> 赞同：1
> 
> 时间：2009-05-15T12:42:02.773
> 
> 标签：sql, date, timestamp, where-clause, database-agnostic

如果我需要搜索没有小时和分钟存储的出生日期，但我必须搜索的日期包括小时和分钟，那么返回所有日期仅在日、月和年匹配的行的最佳方法是什么

即
存储为 01-JAN-50 10.22.06.000000000
日期选择 01-JAN-50 10.22.06.010101120

如果我将日期与小时和分钟一起使用，SQL 将只返回具有确切时间戳的行，而不是仅返回日、月和年的行。

SQL 需要在 Oracle、SQLServer、MySQL 和 DB2 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:07:29.730

Oracle 的 DATE 类型早于 SQL 标准版本（Informix 的版本也是如此），这使得以 DBMS 中立的方式执行此操作非常困难（如果不是不可能的话）。当然，还有一个问题是“为什么选择的数据表示包括时间”。

在标准 SQL 中，显而易见的技术是将 TIMESTAMP 转换为 DATE。对于您必须搜索的数据，我们也没有明确的解释。

```
SELECT CAST(DateOfBirth AS DATE), ...other columns...
    FROM TheMysteryTable         -- Why do people hate giving tables names?
    WHERE CAST(DateOfBirth AS DATE) =
          CAST(TIMESTAMP '1950-01-01 10.22.06.010101120' AS DATE) 
```

但这假设您将“搜索日期”写为文字。如果是宿主变量，那么宿主变量的类型应该是 DATE，而不是 TIMESTAMP。DateOfBirth 列可能应该是 DATE，而不是 TIMESTAMP。除非时间部分相关，否则不应使用 TIMESTAMP - 它会浪费存储空间并浪费计算时间。

请注意，由于强制转换，DBMS 不太可能使用任何索引或任何东西。如果类型是健全的，那么查询将很简单：

```
SELECT DateOfBirth, ...other columns...
    FROM TheMysteryTable
    WHERE DateOfBirth = DATE '1950-01-01' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:57:21.253

由于任何解决方案都需要操作日期和日期时间对象，因此不会有与系统无关的解决方案——每个解决方案对于这些对象都有不同的功能。

除了数据库抽象之外，最好的解决方案是先对正在使用的日期时间对象进行四舍五入，然后只需要一个通用的 SQL 比较子句，该子句在所有列出的数据库中都可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:51:55.977

没有 ANSI 日期格式，也没有字符串操作。任何代码都只能在某些 RDBMS 中运行，如果不是只有一个的话。

但是，如果您在 RDBMS 之外获取所选日期（例如 PHP、Java 等），我建议在将其发送到查询之前对其进行清理；然后您可以将字符串与字符串进行比较，这几乎适用于所有系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T13:07:16.270

正如其他人所指出的，RDBMS 在处理日期时间方面非常不同。**如果**他们实际上遵循 ANSI-92 标准，那么以下应该有效：

```
SELECT
     <column list>
FROM
     <table name>
WHERE
     CAST(birth_date AS DATE) = CAST(search_date AS DATE) 
```

不过，这并不是最有效的方法，因为它会排除在大多数系统上使用日期索引。以下**可能**适用于完全符合 ANSI-92 的数据库：

```
SELECT
     <column list>
FROM
     <table name>
WHERE
     birth_date >= CAST(CAST(search_date AS DATE) AS DATETIME) AND
     birth_date < CAST(CAST(search_date AS DATE) + 1 AS DATETIME) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T13:29:28.353

使用 EXTRACT()

# nhibernate - 如何找出休眠对象的关键字段

> ID：868480
> 
> 赞同：0
> 
> 时间：2009-05-15T12:45:39.393
> 
> 标签：nhibernate, nhibernate-metadata

说我有以下查询

```
ICriteria query = session.CreateCriteria(typeof(T)); 
```

如何找出 T 的关键字段，以便我可以添加这样的表达式

```
query.Add(Expression.In(keyField, someListOfObjects.ToArray())); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T12:53:19.360

使用 NH 的元数据

```
var meta = factory.GetClassMetadata(typeof(T));

query.Add(Expression.In(meta.IdentifierPropertyName, someListOfObjects.ToArray())); 
```

# .net - 使用 .NET 或 MS SQL 模拟 MySql 的 password() 加密

> ID：868482
> 
> 赞同：6
> 
> 时间：2009-05-15T12:46:03.230
> 
> 标签：.net, sql, mysql, sql-server, encryption

我正在将旧的 ASP/MySql webapp 更新为 ASP.NET/MS SQL。

我们希望让旧网站的登录信息在新应用程序中运行。

不幸的是，密码是使用 MySql 的 password() 函数存储在 MySql DB 中的。

**是否可以在 .NET 或 MS SQL 中模拟 MySql 的 password() 函数？**

任何帮助/链接表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-15T14:34:06.870

根据 MySQL 文档，该算法是双 SHA1 哈希。在检查 MySQL 源代码时，您会在 libmysql/password.c 中找到一个名为 make_scrambled_pa​​ssword() 的函数。函数定义如下：

```
/*
    MySQL 4.1.1 password hashing: SHA conversion (see RFC 2289, 3174) twice
    applied to the password string, and then produced octet sequence is
    converted to hex string.
    The result of this function is used as return value from PASSWORD() and
    is stored in the database.
  SYNOPSIS
    make_scrambled_password()
    buf       OUT buffer of size 2*SHA1_HASH_SIZE + 2 to store hex string
    password  IN  NULL-terminated password string
*/

void
make_scrambled_password(char *to, const char *password)
{
  SHA1_CONTEXT sha1_context;
  uint8 hash_stage2[SHA1_HASH_SIZE];

  mysql_sha1_reset(&sha1_context);
  /* stage 1: hash password */
  mysql_sha1_input(&sha1_context, (uint8 *) password, (uint) strlen(password));
  mysql_sha1_result(&sha1_context, (uint8 *) to);
  /* stage 2: hash stage1 output */
  mysql_sha1_reset(&sha1_context);
  mysql_sha1_input(&sha1_context, (uint8 *) to, SHA1_HASH_SIZE);
  /* separate buffer is used to pass 'to' in octet2hex */
  mysql_sha1_result(&sha1_context, hash_stage2);
  /* convert hash_stage2 to hex string */
  *to++= PVERSION41_CHAR;
  octet2hex(to, (const char*) hash_stage2, SHA1_HASH_SIZE);
} 
```

使用这种方法，您可以创建一个基本上做同样事情的 .NET 对应物。这就是我想出的。当我运行 SELECT PASSWORD('test'); 针对我的本地 MySQL 副本，返回的值为：

`*94BDCEBE19083CE2A1F959FD02F964C7AF4CFC29`

根据源代码（同样在 password.c 中），开头的星号表示这是 MySQL 4.1 后加密密码的方法。例如，当我模拟 VB.Net 中的功能时，我想出的是：

```
Public Function GenerateMySQLHash(ByVal strKey As String) As String
    Dim keyArray As Byte() = Encoding.UTF8.GetBytes(strKey)
    Dim enc = New SHA1Managed()
    Dim encodedKey = enc.ComputeHash(enc.ComputeHash(keyArray))
    Dim myBuilder As New StringBuilder(encodedKey.Length)

    For Each b As Byte In encodedKey
        myBuilder.Append(b.ToString("X2"))
    Next

    Return "*" & myBuilder.ToString()
End Function 
```

请记住，SHA1Managed() 位于 System.Security.Cryptography 命名空间中。此方法返回与 MySQL 中的 PASSWORD() 调用相同的输出。我希望这对你有帮助。

编辑：这是 C# 中的相同代码

```
public string GenerateMySQLHash(string key)
{
    byte[] keyArray = Encoding.UTF8.GetBytes(key);
    SHA1Managed enc = new SHA1Managed();
    byte[] encodedKey = enc.ComputeHash(enc.ComputeHash(keyArray));
    StringBuilder myBuilder = new StringBuilder(encodedKey.Length);

    foreach (byte b in encodedKey)
        myBuilder.Append(b.ToString("X2"));

    return "*" + myBuilder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:51:08.570

您可以在 .Net 中使用 MD5 或 SHA1 加密字符串，但 MySQL 使用的实际算法可能与这两种方法不同。我怀疑它是基于服务器实例的某种“盐”，但我不知道。

从理论上讲，由于我相信 MySQL 是开源的，因此您可以调查源代码并确定这是如何完成的。

[http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html#function_password](http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html#function_password)

编辑 1：我相信使用的算法是带有其他“调整”的双 SHA1（根据[此](http://www.radialsoftware.co.uk/index.php?option=com_content&view=article&id=20:mysql-passwords&catid=11:understanding-mysql&Itemid=18)博客文章）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-14T11:21:20.047

> “他们不会透露他们使用的算法”

呃……有人应该醒来告诉你 MySQL 是**开源**的……他们不需要“披露”一些东西，因为每个人都可以阅读数据库的结构 - 只需下载源代码，搜索加密功能（我猜他们正在使用 C++）并开始调查...... SHA1 现在似乎很不安全 - 就在最近，一些科学家已经证明，可以不受限制地选择多达**20%的数据并****产生相同的哈希值**，因此可以建议使用 AES 或 SHA2（因此不是 MySQL - *PASSWORD* -func）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-10-29T10:59:04.570

修改 C# 版本以纠正填充问题。
[测试] public void GenerateMySQLHashX2() { string password = "20iva05";

```
 byte[] keyArray = Encoding.UTF8.GetBytes(password);
        SHA1Managed enc = new SHA1Managed();
        byte[] encodedKey = enc.ComputeHash(enc.ComputeHash(keyArray));
        StringBuilder myBuilder = new StringBuilder(encodedKey.Length);

        foreach (byte b in encodedKey)
        {
            log.Debug(b.ToString() + "    ->   " +  b.ToString("X2"));
            myBuilder.Append(b.ToString("X2"));
        }

        Assert.AreEqual("*8C2029A96507478FD1720F6B713ADD57C66EED49", "*" + myBuilder.ToString());
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-08-17T20:19:25.943

对于 VB 网络，此函数在左侧填充 0，以便当十六进制代码为 [例如] 'E' 时，此函数将正确地将 '0E' 附加到结果字符串中。所以最后，包括前置的'*'，结果字符串将是 41 个字符长，正如 MySQL 中所要求的那样

```
Public Function GenerateMySQLHash(ByVal strKey As String) As String

    Dim keyArray As Byte() = System.Text.UTF8Encoding.UTF8.GetBytes(strKey)
    Dim enc = New Security.Cryptography.SHA1Managed()
    Dim encodedKey = enc.ComputeHash(enc.ComputeHash(keyArray))
    Dim myBuilder As New System.Text.StringBuilder(encodedKey.ToString.Length)

    For Each b As Byte In encodedKey
        myBuilder.Append(Strings.Right("0" & b.ToString("X"), 2))
    Next

    Return "*" & myBuilder.ToString()
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-10-11T04:39:07.757

mysql 密码功能不是特别安全（例如，没有盐或其他防止查找匹配哈希的保护方法）我能看到想要复制算法的唯一原因是 1：您有一个具有 mysql 密码的用户列表/表()s 2：您想从用户表中的哈希值中破解 mysql 密码。

否则使用不同的东西，例如结合用户名（和/或其他行不变量）和密码的哈希。这样，如果两个用户选择相同的密码，它就不会很明显。并且如果表被暴露，安全性不会以相同的速度降低（例如 google 的 446a12100c856ce9 这是一个非常流行的密码的 password() 哈希）

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2009-05-15T13:06:19.063

您将无法模拟 MySql 密码（）函数。至少不是没有大量的工作和运气。由于 MySql 使用他们自己的算法来单向加密字符串，他们不会透露他们使用什么算法；这意味着您必须进行反复试验，比较结果字符串等。

要解决您的问题：

我会复制数据库但保持与 MySql 的连接。使用标志来识别首次登录。要求他们使用当前密码；使用 MySql 密码（）函数验证密码。如果密码有效；要求他们通过再次输入相同的密码或新密码来重置它；此时使用您最喜欢的加密算法并将结果存储在您的 MS Sql DB 中。

我知道这听起来很痛苦，但这是你能做的最好的事情，而不是试图破解你的方式来破译 MySql 加密算法。

祝你好运！

# windows - 什么是 Windows“用户对象”

> ID：868490
> 
> 赞同：15
> 
> 时间：2009-05-15T12:47:59.420
> 
> 标签：windows, winapi, mfc

我试图在我们的 MFC 代码中查找一个看起来像资源限制问题的问题。内存和CPU看起来不错。根据任务管理器上的进程选项卡，我们的 GDI 对象看起来与其他应用程序一致，但我们的 USER 对象似乎比其他应用程序大 10 倍。

什么是“用户对象”，限制是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-15T13:08:36.750

这是一篇“经典”的 MSDN 文章：[给我一个句柄，我会向你展示一个对象](http://msdn.microsoft.com/en-us/library/ms810501.aspx)

上次我跟踪 Windows 对象泄漏（我怀疑你有）[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)很方便（handley？）。下窗格可以显示一些已分配的系统对象，此外它还可以进行简单的 USER、GDI 等对象计数。

[桌面堆](http://blogs.msdn.com/ntdebugging/archive/2007/01/04/desktop-heap-overview.aspx)，它是一个内存池，句柄代表生命的真正“东西”（至少是一些句柄，至少不是内核句柄）。有时与其说分配了多少句柄，不如说是该句柄下的每个*对象*使用了多少内存。[您可以通过这种方式](http://www.microsoft.com/downloads/details.aspx?familyid=5cfc9b74-97aa-4510-b4b9-b2dc98c8ed8b&displaylang=en)调试堆。安装起来很[痛苦](http://support.microsoft.com/kb/914216)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-05-15T12:52:30.110

[在这里](http://msdn.microsoft.com/en-us/library/ms724515(VS.85).aspx)阅读所有相关信息：

> 对象类别
> 
> 系统提供三类对象：用户、图形设备接口（GDI）和内核。系统使用用户对象来支持窗口管理，使用 GDI 对象来支持图形，使用内核对象来支持内存管理、进程执行和进程间通信 (IPC)。有关创建和使用特定对象的信息，请参阅相关概述。

[在](https://docs.microsoft.com/de-de/windows/win32/sysinfo/user-objects)这里：

> 用户对象
> 
> 用户界面对象仅支持每个对象一个句柄。进程不能继承或复制用户对象的句柄。一个会话中的进程不能引用另一个会话中的用户句柄。
> 
> 每个会话的理论限制为 65,536 个用户句柄。但是，每个会话可以打开的用户句柄的最大数量通常较低，因为它受可用内存的影响。用户句柄还有一个默认的每个进程限制。要更改此限制，请设置以下注册表值：
> 
> ```
> HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Windows\USERProcessHandleQuota 
> ```
> 
> 该值可以设置为 200 到 18,000 之间的数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-05-27T13:38:52.170

Mark Russinovich 是这方面的专家。他着有《Windows Internals》一书。幸运的是，不仅有这本书，还有[一篇日期为 2019-06-27](https://techcommunity.microsoft.com/t5/windows-blog-archive/pushing-the-limits-of-windows-user-and-gdi-objects-8211-part-1/ba-p/723881)的文章。

首先他描述了 USER 对象：

> USER 对象之所以得名，是因为它们代表用户界面元素，如桌面、窗口、菜单、光标、图标和加速器表（菜单键盘快捷键）。

然后继续描述极限：

> 窗口管理器施加的一个基本限制是任何进程都不能创建超过 10,000 个 USER 对象。

和

> 对 USER 对象数量的一个基本限制来自这样一个事实，即它们的标识符在 Windows 的第一个版本中是 16 位值，即 16 位。在更高版本中添加 32 位支持时，用户标识符必须保持限制为 16 位值，以便 16 位进程可以与窗口和其他由 32 位进程创建的 USER 对象进行交互。因此，65,535 (2^16) 是可以在会话上创建的 USER 对象总数的限制

He also explains the number [mentioned by @Tobi](https://stackoverflow.com/a/868511/480982):

> for historical reasons, windows must have even-numbered identifiers, so there can be a maximum of 32,768 windows per session

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T12:52:46.850

我不知道它们是*什么*，但我知道它们*包括*窗把手。

对于窗口句柄，系统范围的最大值约为 32000，每个进程的最大值为 10000。（这可能只是 USER 对象限制，而不仅仅是窗口句柄。）

如果您以某种方式泄漏窗口句柄，或者如果您使用大量窗口，则窗口句柄的数量可能非常多。（请注意，即使是像文本标签这样的简单控件也会使用单个窗口句柄。）

# c - 如何在C中将char转换为整数？

> ID：868496
> 
> 赞同：95
> 
> 时间：2009-05-15T12:49:50.007
> 
> 标签：c, char, int

> **可能的重复：**
> [如何在 C 中将单个 char 转换为 int](https://stackoverflow.com/questions/439573/how-to-convert-a-single-char-into-an-int)
> [字符到整数](https://stackoverflow.com/questions/628761/character-to-integer-in-c)

任何人都可以告诉我如何将 a 转换`char`为`int`吗？

```
char c[]={'1',':','3'};

int i=int(c[0]);

printf("%d",i); 
```

当我尝试这个时，它给出了 49。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2009-05-15T12:52:15.103

在过去，当我们可以假设大多数计算机使用 ASCII 时，我们会这样做

```
int i = c[0] - '0'; 
```

~~但在 Unicode 时代，这不是一个好主意。如果您的代码必须在非 ASCII 计算机上运行，​​这绝不是一个好主意。~~

编辑：虽然它看起来很老套，但显然它*是*由标准保证的。谢谢@Earwicker。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2009-05-15T12:50:39.537

标准功能`atoi()`可能会做你想做的事。

一个使用“atoi”的简单示例：

```
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[])
{
    int useconds = atoi(argv[1]); 
    usleep(useconds);
} 
```

# tcp - 端口号

> ID：868501
> 
> 赞同：1
> 
> 时间：2009-05-15T12:50:59.647
> 
> 标签：tcp

这是一个小疑问，不应该真正想到。所以请原谅我

为了在局域网上的两个主机之间传输消息，发送和接收数据的端口号必须相同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T12:54:24.537

不，您将发送到一个已知的端口号，但您的客户端端口号基本上是随机的。这意味着多个客户端可以使用不同的客户端端口号向一台服务器发送数据，但只能使用一个已知的服务器端端口号。

例如，如果您在一台机器上有多个客户端与远程网络服务器通信，它看起来像：

```
localhost:31000 -> webserver:80
localhost:31001 -> webserver:80
localhost:31002 -> webserver:80 
```

你只需要指定 webserver:80 组合。客户端号码是短暂的（有关更多信息，请参见[此处）](http://www.ncftp.com/ncftpd/doc/misc/ephemeral_ports.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T12:54:10.433

不。

它的工作原理如下

1.  客户端机器想要与服务器机器通信 客户端机器需要知道服务器机器上的端口，例如端口 80 用于 http
2.  客户端计算机打开与服务器计算机的连接。它在客户端上的随机端口上打开，但在服务器上的已知端口号上打开
3.  服务器沿着这个管道发送回客户端告诉它的端口号，它打开的随机端口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T12:53:52.043

不，他们没有。您需要一个众所周知的端口来在主机上建立连接，但客户端将使用操作系统返回的随机端口号创建一个套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T13:10:11.207

加上我的 0.02 美元，服务器可以在同一个套接字上打开多个连接。因此，如果您有 3 个客户端都连接到端口 80，则它们可以同时连接；您不必担心一个客户端“占用”端口。

# python - 将 py2app 与 lxml 包一起使用时出现问题

> ID：868510
> 
> 赞同：6
> 
> 时间：2009-05-15T12:52:37.507
> 
> 标签：python, lxml, py2app

我正在尝试使用“py2app”从一些 Python 脚本生成一个独立的应用程序。Python 使用“lxml”包，我发现我必须在“py2app”使用的 setup.py 文件中明确指定这一点。但是，生成的应用程序仍然无法在没有安装“lxml”的机器上运行。

我的 Setup.py 看起来像这样：

```
from setuptools import setup

OPTIONS = {'argv_emulation': True, 'packages' : ['lxml']}

setup(app=[MyApp.py],
      data_files=[],
      options={'py2app' : OPTIONS},
      setup_requires=['py2app']) 
```

运行应用程序会产生以下输出：

```
MyApp Error
An unexpected error has occurred during execution of the main script
ImportError: dlopen(/Users/ake/XXXX/XXXX/MyApp.app/Contents/Resources/lib/python2.5/lxml/etree.so, 2): Symbol not found: _xmlSchematronParse
Referenced from: /Users/ake/XXXX/XXXX/MyApp.app/Contents/Resources/lib/python2.5/lxml/etree.so
Expected in: dynamic lookup 
```

符号“_xmlSchematronParse”来自一个名为“libxml2”的库，“lxml”依赖于该库。Mac OS X 预装的版本对于“lxml”来说不够最新，所以我必须安装版本 2.7.2（在 /usr/local 中）。py2app 出于某种原因，正在链接 /Developer/SDKs/MacOSX10.3.9.sdk/usr/lib 中的版本。但是，当我将应用程序作为 Python 脚本运行时，会找到正确的版本。（我刚才通过隐藏 2.7.2 版本检查了这一点。）

所以我现在的问题是，我怎样才能告诉 py2app 在哪里寻找库？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-05-20T15:15:54.853

找到了。py2app 有一个 'frameworks' 选项可以让你指定框架和 dylibs。我的 setup.py 文件现在看起来像这样：

```
from setuptools import setup

DATA_FILES = []
OPTIONS = {'argv_emulation': True,
           'packages' : ['lxml'],
           'frameworks' : ['/usr/local/libxml2-2.7.2/lib/libxml2.2.7.2.dylib']
          }

setup(app=MyApp.py,
      data_files=DATA_FILES,
      options={'py2app' : OPTIONS},
      setup_requires=['py2app']) 
```

这样就解决了。

感谢引导我来到这里的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:01:48.933

**------------- 编辑-------------**
`libxml2`是 Python 的 python.org 版本中的标准。它在 Apple 的 Python 版本中不是标准的。确保 py2app 使用的是正确版本的 Python，或者安装`libxml2`在`libxslt`你的 Mac 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-17T16:24:43.993

我没有专门结合 lxml 和 py2app 的经验，但是我遇到了 py2app 没有选择未明确导入的模块的问题。例如，我必须明确包含通过 导入的模块`__import__()`，如下所示：

```
OPTIONS['includes'] = [filename[:-3].replace('/', '.') for filename \
    in glob.glob('path/to/*.py')] 
```

`from lxml import etree`在您的情况下，在您的代码中的某处插入显式可能也有帮助？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T12:46:32.447

我刚刚在另一台没有安装开发库的 Mac 上尝试了我的应用程序（使用 py2app 和 lxml，具有类似的设置），它可以工作，所以你的系统一定有问题。我的猜测是 py2app 选择了错误的 libxml2 版本（例如，我看到它与 iPhone SDK 捆绑在一起，这可能不是您想要的版本）。

我的，作为整个 python 工具链，来自 MacPorts，最新的 libxml2.2.dylib（最终在我的 .app 中的那个）的 md5 总和在我的系统上是 863c7208b6c34f116a2925444933c22a。

# css - css 将文本链接定位到标题的右侧

> ID：868526
> 
> 赞同：3
> 
> 时间：2009-05-15T12:55:30.510
> 
> 标签：css

我想要做的是左侧有一个粗体标题，右侧有正常大小和字体文本链接。问题永远不能只得到它旁边的链接。我总是收到其他文本或下面的链接而不是旁边。

测试

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title></title>
<link rel="stylesheet" type="text/css" href="my.css">
</head>
<body>
<div class="main">
<div class="swtitle">
<h1 class="swTitle">Title</h1> <a class="downloadXYZ" href="download.zip">Download</a>
text i dont want. I cant figure out what to write here.
</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T13:20:40.543

您应该使用 style="display:inline" 这将帮助您获得必须环绕您正在做的事情的文本，例如图像。

```
<h1 class="swTitle" style="display:inline;">Title</h1> 
```

如果你也喜欢，你也可以使用浮动，但内联要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:04:27.743

我不是 CSS 专家，但您可以在标题标签上尝试以下操作（注意“display:inline”）。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <title></title>
        <link rel="stylesheet" type="text/css" href="my.css">
    </head>
    <body>
        <div class="main">
            <div class="swtitle">
                <h1 class="swTitle" style="display:inline;">Title</h1> 
                <a class="downloadXYZ" href="download.zip">Download</a>text i dont want. I cant figure out what to write here.
            </div>
        </div>
    </body>
</html> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:03:02.520

在不提供您正在使用的示例 CSS 的情况下，我会尝试以下方法来帮助您入门：

```
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="my.css">
</head>
<body>
    <div>
        <div style="float: left;">
            <h1>
                Title</h1>
        </div>
        <div style="float: right;">
            <a class="downloadXYZ" href="download.zip">Download</a>text i dont want. I cant
            figure out what to write here.
        </div>
    </div>
</body>
</html> 
```

# c++ - 读取结构定义的二进制文件

> ID：868530
> 
> 赞同：3
> 
> 时间：2009-05-15T12:56:26.810
> 
> 标签：c++, data-structures, binary

有人可以指出我如何读取由 C 结构定义的二进制文件的正确方向吗？它在结构内部有一些#define，这让我觉得它会使事情复杂化。
结构看起来像这样：（尽管它比这更大更复杂）

```
struct Format {
    unsigned long str_totalstrings;
    unsigned long str_name;
    #define STR_ORDERED 0x2
    #define STR_ROT13 0x4
    unsigned char stuff[4];
    #define str_delimiter stuff[0]
} 
```

如果有人能指出我如何做到这一点，我将不胜感激。或者是否有任何涵盖该主题的教程？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-02T04:24:03.917

有一些坏主意和好主意：

## 这是一个坏主意：

*   将原始缓冲区类型转换为结构
    *   解析大于 1 字节长的整数或浮点数时存在[字节顺序](https://en.wikipedia.org/wiki/Endianness)问题（小端与大端）
    *   结构中存在[字节对齐问题](http://www.catb.org/esr/structure-packing/)，这非常依赖于编译器。可以尝试禁用对齐（或强制执行一些手动对齐），但这通常也是一个坏主意。至少，您将通过使 CPU 访问未对齐的整数来破坏性能。内部 RISC 内核每次都必须执行 3-4 次操作而不是 1 次（即“在第一个单词中执行第 1 部分”、“在第二个单词中执行第 2 部分”、“合并结果”）才能访问它。或者更糟糕的是，用于控制对齐的编译器编译指示将被忽略，您的代码将中断。
    *   `int`对于 C/C++ 中的常规、`long`、`short`等类型，没有确切的大小保证。您可以使用类似的东西`int16_t`，但这些仅在现代编译器上可用。
    *   当然，这种方法在使用引用其他结构的结构时会完全失效：必须手动展开它们。
*   手动编写解析器：这比乍看之下要难得多。
    *   一个好的解析器需要在每个阶段进行大量的健全性检查。很容易错过一些东西。如果您不使用异常，则更容易错过某些内容。
    *   如果您的解析代码不是异常安全的（即以一种可以在某些时候中断并且不会泄漏内存/忘记完成某些对象的方式编写），使用异常会使您容易失败
    *   可能存在性能问题（即，执行大量无缓冲 IO，而不是执行一个操作系统`read`系统调用并随后解析缓冲区 - 反之亦然，一次读取整个内容，而不是在适用的情况下进行更精细、更懒惰的读取）。

## 这是个好主意

*   跨平台。几乎不言自明，近年来所有移动设备、路由器和物联网的东西都在蓬勃发展。
*   去声明性的。考虑使用任何声明性规范来描述您的结构，然后使用解析器生成器来生成解析器。

有几种工具可以做到这一点：

*   [Kaitai Struct——](http://kaitai.io)到目前为止我最喜欢的跨平台、跨语言——即你描述你的结构一次，然后你可以用 C++、C#、Java、Python、Ruby、PHP 等将它编译成解析器。
*   [binpac](https://www.bro.org/sphinx/components/binpac/README.html) - 相当过时，但仍然可用，仅限 C++ - 在意识形态上类似于 Kaitai，但自 2013 年以来不受支持
*   [Spicy](http://www.icir.org/hilti/manual.html) — 据说是 binpac 的“现代重写”，又名“binpac++”，但仍处于早期开发阶段；可用于较小的任务，也只能用于 C++。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-05-15T13:00:59.403

读取结构定义的二进制文件很容易。

```
Format myFormat;
fread(&myFormat, sizeof(Format), 1, fp); 
```

#defines 根本不影响结构。（不过，里面放它们的地方很奇怪）。

但是，这不是跨平台安全的。在您确信读者和作者使用相同平台的情况下，这是最简单的方法。

更好的方法是重新定义你的结构：

```
struct Format {
    Uint32 str_totalstrings;  //assuming unsigned long was 32 bits on the writer.
    Uint32 str_name;
    unsigned char stuff[4];
}; 
```

然后有一个“platform_types.h”，它为你的编译器正确地定义了 Uint32。现在你可以直接读入结构，但是对于字节序问题，你仍然需要做这样的事情：

```
myFormat.str_totalstrings = FileToNative32(myFormat.str_totalstrings);
myFormat.str_name =   FileToNative32(str_name); 
```

其中 FileToNative 是无操作或字节反向器，具体取决于平台。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T13:04:18.040

如果内存中已经有要解析的数据，也可以使用联合来执行此解析。

```
union A {
    char* buffer;
    Format format;
};

A a;
a.buffer = stuff_you_want_to_parse;

// You can now access the members of the struct through the union.
if (a.format.str_name == "...")
    // do stuff 
```

还要记住，long 在不同平台上的大小可能不同。如果您依赖 long 是某个大小，请考虑使用定义的类型 int stdint.h，例如 uint32_t。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T13:13:22.090

使用 C++ I/O 库：

```
#include <fstream>
using namespace std;

ifstream ifs("file.dat", ios::binary);
Format f;
ifs.get(&f, sizeof f); 
```

使用 CI/O 库：

```
#include <cstdio>
using namespace std;

FILE *fin = fopen("file.dat", "rb");
Format f;
fread(&f, sizeof f, 1, fin); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T13:12:28.923

您必须找出写入文件的机器的字节序，以便正确解释整数。注意 ILP32 与 LP64 不匹配。原始结构填充/对齐也可能很重要。

# language-agnostic - “丰富的用户界面”是什么意思？

> ID：868533
> 
> 赞同：10
> 
> 时间：2009-05-15T12:56:53.580
> 
> 标签：language-agnostic, user-interface, terminology

术语“丰富的用户界面”究竟是什么意思？

[当提到用户界面](http://msdn.microsoft.com/en-us/library/188ht7d8(VS.71).aspx)时，它的含义是否与提到[通信框架](http://msdn.microsoft.com/en-us/library/ms997611.aspx)时的含义相同？

这是否意味着用户界面可能“很差”？（与富人相反，而不是设计不佳）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-15T13:01:40.183

![替代文字](https://lurkmore.ru/images/thumb/1/13/Keepitsimplestupid.jpg/310px-Keepitsimplestupid.jpg)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-05-15T13:00:19.810

[来自维基词典。](http://en.wiktionary.org/wiki/rich)

> （计算）精巧，具有复杂的格式、多媒体或**交互深度。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T13:03:14.687

[丰富](http://search.live.com/images/results.aspx?q=stack+overflow&scope=images&filt=all)| [没那么有钱](http://images.google.se/images?q=stack+overflow)

注意：“富有”不一定等同于“更好”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-16T01:58:44.807

查看当前浏览器的 Netflix 用户界面（2016 年 5 月版），我认为这是一个丰富的用户界面，因为它有几个特点。 [![浏览器中 Netflix UI 的屏幕截图](https://i.stack.imgur.com/ewaIS.png)](https://i.stack.imgur.com/ewaIS.png)

对于有关电影和电视节目的详细信息数据库来说，它是一个非常好的前端。UI 允许用户选择特定资源、电影或电视节目，然后查看有关资源的信息。此屏幕截图显示了查找有关特定节目的附加信息的结果。剧组成员姓名和 Netflix 使用的类别的亮白色链接提供了按剧组成员或类似分类的其他资源查找其他资源的机会。

可以通过单击标准播放图标、由圆圈包围的右尖三角形来启动资源，或者您可以单击 EPISODES 链接来选择特定剧集。

至少在大多数情况下，Netflix 会记住您离开的地方（我已经看到它希望在添加新季节时再次从第 1 季开始），因此视频播放器将选择当前或下一集，如果是电视的话如果是电影，则在最后一个观看点放映或取景。

在观看接近影片结尾的资源时，Netflix 会自动将下一集排入队列或提供一些建议。

显示节目细节的机制在用户界面中的几个地方被重用，但在某些情况下，例如 MORE LIKE THIS 中的列表，它似乎没有被使用并单击电影/show image from the MORE LIKE THIS 列表启动资源。

我在这里看到的主要特征是包含各种视频资源的大型复杂数据库的呈现方式允许人们通过使用搜索或浏览来找到特定资源。一个人可以在数据库中环顾四周，并沿着资源之间的各种语义连接移动。因此，您可以查找相同演员或导演/制片人的其他资源，也可以查找与特定资源相关的类别中的其他资源。

似乎 Netflix UI 使用相当标准的网页功能提供了对资源库的访问。

我唯一不喜欢 Netflix 浏览器 UI 是它严重依赖鼠标。结果是手眼协调能力差的人（例如老年人）可能难以定位鼠标并进行点击。

我看到人们在使用 UI 时遇到困难，因为它需要将鼠标移到特定资源图像上并将其按住以激活放大效果，然后提供访问向下箭头功能以访问有关资源的信息。精确移动鼠标并保持稳定，然后在不移动鼠标光标的情况下单击鼠标，对于手颤抖和运动技能较差的人来说可能会很困难。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T13:00:06.363

在我的理解中，它通常意味着 UI 可以做“重”的事情。

与单击链接、等待并获得包含新信息的全屏刷新相比，单击链接并让新信息弹出，甚至可能以动画形式出现在视图中。

更多的功能、更快的响应和更多的“眼睛糖果”是我与这个术语相关的一些东西。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-15T13:02:24.423

“丰富的”用户界面是一个描述下一代 Web 界面的 Web 术语。在过去，HTML 网页是带有一些图像的静态文本体，没有很多交互性。

今天的 Web 完全不同……页面提供了不同级别的交互性。“丰富”的用户界面力求为用户提供高度交互、高度风格化、高度可用的界面，而传统的 Web 应用程序可能很笨重，需要多次刷新页面才能完成任务。

# c# - 用静态 C# 修改的 ThreadStatic

> ID：868537
> 
> 赞同：54
> 
> 时间：2009-05-15T12:57:32.563
> 
> 标签：c#, static, thread-static

我有一些代码在 C# 中使用线程静态对象。

```
[ThreadStatic]
private DataContext connection 
```

我想知道，在这种情况下，如果我将 static 修饰符放在线程静态上下文中，我会得到什么改变？

```
[ThreadStatic]
private static DataContext connection 
```

第一个是否每个线程每个实例都有一个上下文副本，而另一个每个线程只有一个副本？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2009-05-15T13:00:44.567

[正如文档指出的那样](https://docs.microsoft.com/en-us/dotnet/api/system.threadstaticattribute)，`ThreadStaticAttribute`它仅设计用于静态变量。如果你在实例变量上使用它，我怀疑它不会做任何事情。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-05-15T12:59:40.560

在第一种情况下，它可能会被忽略，而在第二种情况下，您是正确的，每个线程一个实例。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-15T13:04:59.957

在 Microsoft Docs 中，[它说](https://docs.microsoft.com/en-us/dotnet/api/system.threadstaticattribute)：

> 表示**静态**字段的值对于每个线程都是唯一的。

所以我猜你的第一个案例是不正确的。该属性可能会被忽略。

# c# - 执行某些 Web 请求/响应任务后返回 View() 时 ASP.NET MVC 挂起

> ID：868551
> 
> 赞同：2
> 
> 时间：2009-05-15T13:02:12.490
> 
> 标签：c#, .net, asp.net-mvc

我有一个名为 UpdateSite() 的控制器操作，浏览到此操作是我启动（通常是自动化的）数据收集过程的手动方式。

这是一个相当简单的过程，具有以下工作流程：

1.  使用 Web API 对数据执行几个 Web 请求
2.  解析这些数据以提取我可能需要的任何内容
3.  如果某些数据是新的且相关的，请将其存储在数据库中（使用 linq to sql）
4.  （可选）将一些数据发送回 API，让它知道我刚刚做了什么。

这是该方法的一个人为示例：

```
public ActionResult UpdateSite(string key)
        {
            if(key == KEY)
            {
                log4net.Config.XmlConfigurator.Configure();
                ILog log = LogManager.GetLogger("Default");
                string tUserName = ConfigurationManager.AppSettings["UName"];
                string tPassword = ConfigurationManager.AppSettings["UPassword"];

                ApiService apiSvc = new ApiService(tUserName, tPassword, new InterpreterFactory(),
                                                                    log);
                ControlPanel controller = new ControlPanel(Service, apiSvc, new DefaultAppStatusService(), log);

                CaptureResults results = controller.Capture();
                controller.EnrichData(results, new EnrichmentFactory(log));

                var newData = controller.PersistData(results);
                controller.ReplyWithNewData(newData);
            }
            return View();
        } 
```

所有这一切似乎都运行良好，它完成了它的工作，从外部 API 拉回所需的数据，并将其写入数据库等。

问题是在“返回 View()”时，页面没有完全加载到浏览器中，并且站点永久挂起，迫使我重新启动开发服务器。页面上的所有内容都是一些文字。

我完全不知道发生了什么。有没有其他人遇到过这样的事情？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-16T21:55:23.057

此过程是否会更改 bin 文件夹或其任何子文件夹中的某些文件？如果是这样，它将回收 AppPool 并且请求将“崩溃”而没有机会。

# java - 如何避免按 ALT 键将焦点从我的 GUI 中移开

> ID：868553
> 
> 赞同：9
> 
> 时间：2009-05-15T13:02:55.763
> 
> 标签：java, swing

我正在 Windows 中开发一个带有 swing 的 java 应用程序。

问题是：按下（并释放）`ALT`按键后，下一次按键无效（不会触发 keyPressed 事件）。只有释放下一个键才会被识别。按下和释放`CTRL`或`SHIFT`之后`ALT`根本没有效果。您首先必须按下另一个键或单击组件才能从`CTRL`或`SHIFT`再次接收键事件。

可能 Windows 将焦点从我的 GUI 组件转移到框架的标题/菜单上。我需要`ALT`+MouseWheel 在我的应用程序中移动图形，如果我之后想用`CTRL`+MouseWheel 缩放图形，这将不起作用。那么如何停止`ALT`带走焦点（但仍然可以使用 eg 访问 menuItem `ALT+F`）？

我已经尝试过 Component.requestFocus() - 但实际上我的组件并没有真正失去焦点。

一个显示行为的简单示例：

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JTextField;

class MyKeyListener implements KeyListener {
public void keyTyped(KeyEvent arg0) {}

public void keyPressed(KeyEvent arg0) {
    System.out.println("Key perssed: " + arg0.getKeyCode());
}   
public void keyReleased(KeyEvent arg0) {
    System.out.println("Key released: " + arg0.getKeyCode());
}
}

public class KeyListenerDemo {

public static void main(String[] a) {
    JFrame frame = new JFrame("Keytest");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setFocusTraversalKeysEnabled(true);
    JTextField textField = new JTextField();
    textField.addKeyListener(new MyKeyListener());
    frame.add(textField);
    frame.setSize(300, 200);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-20T05:30:14.190

在我的情况下，以下工作： KeyEvent.consume()

> 使用此事件，以便它不会由发起它的源以默认方式处理。

这可以阻止 Windows 窃取我的焦点，但我仍然可以使用带有 ALT 的键盘助记符访问我的菜单项。

感谢 Scott W 的评论！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:07:10.717

我不认为这是可能的，至少不是摇摆不定。我曾经使用过的每一个摇摆应用程序都有同样的问题。这是我放弃使用 Netbeans IDE 的主要原因之一，尽管 IDE 通常非常好。SWT 应用程序没有这个问题。

# asp.net - 如何在没有 Visual Studio 的情况下刷新 ASP.NET 应用程序中的引用？

> ID：868559
> 
> 赞同：5
> 
> 时间：2009-05-15T13:03:24.203
> 
> 标签：asp.net, deployment, .refresh

我有一个 ASP.NET 应用程序，它依赖于一个不在 GAC 中的外部程序集。该应用程序有一个 .refresh 文件，该文件在编译应用程序时将程序集复制到 bin 目录中。

当我在生产服务器上安装应用程序时（通过将应用程序文件复制到虚拟目录中），bin 目录不会像我想象的那样因为 .refresh 文件的存在而自动更新。我尝试使用 aspnet_compiler 工具，但这不起作用，因为它希望程序集已经在 bin 目录中。

如何在没有 Visual Studio 的情况下让 .NET 更新应用程序的 bin 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T20:39:23.157

.refresh 文件就在那里，以便 VS 知道它应该跟踪原始文件，如果它们已更改，请将新版本复制到 /bin 文件夹。它们只是带有原始路径的文本文件 - 修改日期用于比较。

当你说：

> 当我在生产服务器上安装应用程序（通过将应用程序文件复制到虚拟目录中）时，bin 目录不会自动更新。

你到底什么意思？你不是也将bin目录的内容复制到生产服务器吗？您将需要使用应用程序部署任何依赖程序集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:10:14.310

清除 asp.net 的缓存目录可能会有所帮助：

```
C:\WINDOWS\Microsoft.NET\Framework\
FRAMEWORK_VERSION\Temporary ASP.NET Files\YOUR_APP_NAME 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T21:08:28.810

删除那些 .refresh 文件。

制作一个简单的构建脚本（使用任何你想要的 cmd、NAnt、Rake、psake ...）：

*   将这些文件复制到您的 asp.net 应用程序文件夹
*   构建你的 asp.net 应用程序。

* * *

或者您可以编辑您的 .csproj 文件并添加如下内容：

```
<ProjectExtensions>
  <PropertyGroup>
    <PreBuildEvent>copy c:\path\to\dll\files $(ProjectDir)$(OutDir)</PreBuildEvent>
  </PropertyGroup>
</ProjectExtensions> 
```

这将添加一个预构建操作，将您的 dll 文件复制到您的 asp.net 应用程序的输出目录。您必须使用 MsBuild 构建它

# optimization - What do the terms "CPU bound" and "I/O bound" mean?

> ID：868568
> 
> 赞同：434
> 
> 时间：2009-05-15T13:04:45.540
> 
> 标签：optimization, terminology

What do the terms "CPU bound" and "I/O bound" mean?

* * *

## 回答 #1

> 赞同：575
> 
> 时间：2009-05-15T13:07:10.123

It's pretty intuitive:

A program is CPU bound if it would go faster if the CPU were faster, i.e. it spends the majority of its time simply using the CPU (doing calculations). A program that computes new digits of π will typically be CPU-bound, it's just crunching numbers.

A program is I/O bound if it would go faster if the I/O subsystem was faster. Which exact I/O system is meant can vary; I typically associate it with disk, but of course networking or communication in general is common too. A program that looks through a huge file for some data might become I/O bound, since the bottleneck is then the reading of the data from disk (actually, this example is perhaps kind of old-fashioned these days with hundreds of MB/s coming in from SSDs).

* * *

## 回答 #2

> 赞同：331
> 
> 时间：2009-05-15T13:26:26.050

**CPU Bound** means the rate at which process progresses is limited by the speed of the CPU. A task that performs calculations on a small set of numbers, for example multiplying small matrices, is likely to be CPU bound.

**I/O Bound** means the rate at which a process progresses is limited by the speed of the I/O subsystem. A task that processes data from disk, for example, counting the number of lines in a file is likely to be I/O bound.

**Memory bound** means the rate at which a process progresses is limited by the amount memory available and the speed of that memory access. A task that processes large amounts of in memory data, for example multiplying large matrices, is likely to be Memory Bound.

**Cache bound** means the rate at which a process progress is limited by the amount and speed of the cache available. A task that simply processes more data than fits in the cache will be cache bound.

I/O Bound would be slower than Memory Bound would be slower than Cache Bound would be slower than CPU Bound.

The solution to being I/O bound isn't necessarily to get more Memory. In some situations, the access algorithm could be designed around the I/O, Memory or Cache limitations. See [Cache Oblivious Algorithms](http://en.wikipedia.org/wiki/Cache-oblivious_algorithm).

* * *

## 回答 #3

> 赞同：150
> 
> 时间：2015-11-03T22:41:45.940

**Multi-threading is where it tends to matter the most**

In this answer, I will investigate one important use case of distinguishing between CPU vs IO bounded work: when writing multi-threaded code.

**RAM I/O bound example: Vector Sum**

Consider a program that sums all the values of a single vector:

```
#define SIZE 1000000000
unsigned int is[SIZE];
unsigned int sum = 0;
size_t i = 0;
for (i = 0; i < SIZE; i++)
    /* Each one of those requires a RAM access! */
    sum += is[i] 
```

Parallelizing that by splitting the array equally for each of your cores is of limited usefulness on common modern desktops.

For example, on my Ubuntu 19.04, Lenovo ThinkPad P51 laptop with CPU: Intel Core i7-7820HQ CPU (4 cores / 8 threads), RAM: 2x Samsung M471A2K43BB1-CRC (2x 16GiB) I get results like this:

[![enter image description here](https://i.stack.imgur.com/tSHev.png)](https://i.stack.imgur.com/tSHev.png)

[Plot data](https://gist.github.com/cirosantilli/f3403af4bd1d2dd1bed042ac89f55150#file-pthread_array_sum-dat).

Note that there is a lot of variance between run however. But I can't increase the array size much further since I'm already at 8GiB, and I'm not in the mood for statistics across multiple runs today. This seemed however like a typical run after doing many manual runs.

Benchmark code:

*   [POSIX C `pthread` source code](https://github.com/cirosantilli/cpp-cheat/blob/7253dd7fcd6f9923abbabafba4b7dd83b49b8af0/posix/interactive/pthread_array_sum.c) used in the graph.

    And here is a [C++ version](https://github.com/cirosantilli/algorithm-cheat/blob/7bf62a54f36544bd5a2967d29c495213c7d7eb1b/src/cpp/interactive/sum_array_parallel.cpp) that produces analogous results.

*   [plot script](https://github.com/cirosantilli/cpp-cheat/blob/7253dd7fcd6f9923abbabafba4b7dd83b49b8af0/posix/interactive/pthread_array_sum.sh)

I don't know enough computer architecture to fully explain the shape of the curve, but one thing is clear: the computation does not become 8x faster as naively expected due to me using all my 8 threads! For some reason, 2 and 3 threads was the optimum, and adding more just makes things much slower.

Compare this to CPU bound work, which actually does get 8 times faster: [What do 'real', 'user' and 'sys' mean in the output of time(1)?](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1/53937376#53937376)

The reason it is all processors share a single memory bus linking to RAM:

```
CPU 1   --\    Bus    +-----+
CPU 2   ---\__________| RAM |
...     ---/          +-----+
CPU N   --/ 
```

so the memory bus quickly becomes the bottleneck, not the CPU.

This happens because adding two numbers takes a single CPU cycle, memory reads take about [100 CPU cycles](http://www.eecs.berkeley.edu/%7Ercs/research/interactive_latency.html) in 2016 hardware.

So the CPU work done per byte of input data is too small, and we call this an IO-bound process.

The only way to speed up that computation further, would be to speed up individual memory accesses with new memory hardware, e.g. [Multi-channel memory](https://en.wikipedia.org/wiki/Multi-channel_memory_architecture).

Upgrading to a faster CPU clock for example would not be very useful.

**Other examples**

*   matrix multiplication is CPU-bound on RAM and GPUs. The input contains:

    ```
    2 * N**2 
    ```

    numbers, but:

    ```
    N ** 3 
    ```

    multiplications are done, and that is enough for parallelization to be worth it for practical large N.

    This is why parallel CPU matrix multiplication libraries like the following exist:

    *   [http://www.netlib.org/scalapack/pblas_qref.html](http://www.netlib.org/scalapack/pblas_qref.html)
    *   [http://icl.cs.utk.edu/magma/software/](http://icl.cs.utk.edu/magma/software/)

    Cache usage makes a big difference to the speed of implementations. See for example this [didactic GPU comparison example](https://github.com/HandsOnOpenCL/Exercises-Solutions/tree/master/Solutions/Exercise08).

    See also:

    *   [Why can GPU do matrix multiplication faster than CPU?](https://stackoverflow.com/questions/51344018/why-can-gpu-do-matrix-multiplication-faster-than-cpu/51345265)
    *   [BLAS equivalent of a LAPACK function for GPUs](https://stackoverflow.com/questions/9165299/blas-equivalent-of-a-lapack-function-for-gpus)
*   Networking is the prototypical IO-bound example.

    Even when we send a single byte of data, it still takes a large time to reach it's destination.

    Parallelizing small network requests like HTTP requests can offer a huge performance gains.

    If the network is already at full capacity (e.g. downloading a torrent), parallelization can still increase improve the latency (e.g. you can load a web page "at the same time").

*   A dummy C++ CPU bound operation that takes one number and crunches it a lot:

    *   [serial](https://github.com/cirosantilli/algorithm-cheat/blob/ea16f6bba12e7dcc32c0cbbbcdc74bcc2fd2d05b/src/cpp/interactive/cpu_bound.cpp)
    *   [parallel](https://github.com/cirosantilli/algorithm-cheat/blob/ea16f6bba12e7dcc32c0cbbbcdc74bcc2fd2d05b/src/cpp/interactive/cpu_bound_parallel.cpp)
*   Sorting appears to be CPU based on the following experiment: [Are C++17 Parallel Algorithms implemented already?](https://stackoverflow.com/questions/51031060/are-c17-parallel-algorithms-implemented-already/55989883#55989883) which showed a 4x performance improvement for parallel sort, but I would like to have a more theoretical confirmation as well

*   The well known [Coremark](https://github.com/eembc/coremark-pro) benchmark from [EEMBC](https://en.wikipedia.org/wiki/EEMBC) explicitly checks how well a suite of problems scale. Sample benchmark result clearing showing that:

    ```
    Workload Name                                     (iter/s)   (iter/s)    Scaling
    ----------------------------------------------- ---------- ---------- ----------
    cjpeg-rose7-preset                                  526.32     178.57       2.95
    core                                                  7.39       2.16       3.42
    linear_alg-mid-100x100-sp                           684.93     238.10       2.88
    loops-all-mid-10k-sp                                 27.65       7.80       3.54
    nnet_test                                            32.79      10.57       3.10
    parser-125k                                          71.43      25.00       2.86
    radix2-big-64k                                     2320.19     623.44       3.72
    sha-test                                            555.56     227.27       2.44
    zip-test                                            363.64     166.67       2.18

    MARK RESULTS TABLE

    Mark Name                                        MultiCore SingleCore    Scaling
    ----------------------------------------------- ---------- ---------- ----------
    CoreMark-PRO                                      18743.79    6306.76       2.97 
    ```

*   the [linking of a C++ program](https://stackoverflow.com/questions/3322911/what-do-linkers-do/33690144#33690144) can be parallelized to a certain degree: [Can gcc use multiple cores when linking?](https://stackoverflow.com/questions/5142753/can-gcc-use-multiple-cores-when-linking/64128746#64128746)

**How to find out if you are CPU or IO bound**

Non-RAM IO bound like disk, network: `ps aux`, then check if `CPU% / 100 < n threads`. If yes, you are IO bound, e.g. blocking `read`s are just waiting for data and the scheduler is skipping that process. Then use further tools like `sudo iotop` to decide which IO is the problem exactly.

Or, if execution is quick, and you parametrize the number of threads, you can see it easily from `time` that performance improves as the number of threads increases for CPU bound work: [What do 'real', 'user' and 'sys' mean in the output of time(1)?](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1/53937376#53937376)

RAM-IO bound: harder to tell, as RAM wait time it is included in `CPU%` measurements, see also:

*   [How to check if app is cpu-bound or memory-bound?](https://stackoverflow.com/questions/3156334/how-to-check-if-app-is-cpu-bound-or-memory-bound)
*   [https://askubuntu.com/questions/1540/how-can-i-find-out-if-a-process-is-cpu-memory-or-disk-bound](https://askubuntu.com/questions/1540/how-can-i-find-out-if-a-process-is-cpu-memory-or-disk-bound)

Some options:

*   Intel Advisor Roofline (non-free): [https://software.intel.com/en-us/articles/intel-advisor-roofline](https://software.intel.com/en-us/articles/intel-advisor-roofline) ([archive](https://web.archive.org/web/20190910150447/https://software.intel.com/en-us/advisor-user-guide-roofline-analysis)) "A Roofline chart is a visual representation of application performance in relation to hardware limitations, including memory bandwidth and computational peaks."

**GPUs**

GPUs have an IO bottleneck when you first transfer the input data from the regular CPU readable RAM to the GPU.

Therefore, GPUs can only be better than CPUs for CPU bound applications.

Once the data is transferred to the GPU however, it can operate on those bytes faster than the CPU can, because the GPU:

*   has more data localization than most CPU systems, and so data can be accessed faster for some cores than others

*   exploits data parallelism and sacrifices latency by just skipping over any data that is not ready to be operated on immediately.

    Since the GPU has to operate on large parallel input data, it is better to just skip to the next data that might be available instead of waiting for the current data to be come available and block all other operations like the CPU mostly does

Therefore the GPU can be faster then a CPU if your application:

*   can be highly parallelized: different chunks of data can be treated separately from one another at the same time
*   requires a large enough number of operations per input byte (unlike e.g. vector addition which does one addition per byte only)
*   there is a large number of input bytes

These designs choices originally targeted the application of 3D rendering, whose main steps are as shown at [What are shaders in OpenGL and what do we need them for?](https://stackoverflow.com/questions/17789575/what-are-shaders-in-opengl-and-what-do-we-need-them-for/36211337#36211337)

*   vertex shader: multiplying a bunch of 1x4 vectors by a 4x4 matrix
*   fragment shader: calculate the color of each pixel of a triangle based on its relative position withing the triangle

and so we conclude that those applications are CPU-bound.

With the advent of programmable GPGPU, we can observe several GPGPU applications that serve as examples of CPU bound operations:

*   [Image Processing with GLSL shaders?](https://stackoverflow.com/questions/13693946/image-processing-with-glsl-shaders/40641014#40641014)

    [![enter image description here](https://i.stack.imgur.com/gZ87k.gif)](https://i.stack.imgur.com/gZ87k.gif)

    Local image processing operations such as a blur filter are highly parallel in nature.

*   [Is it possible to build a heatmap from point data at 60 times per second?](https://stackoverflow.com/questions/30864752/is-it-possible-to-build-a-heatmap-from-point-data-at-60-times-per-second/39839788#39839788)

    Plotting of heatmap graphs if the plotted function is complex enough.

    [![enter image description here](https://i.stack.imgur.com/3Khj7.gif)](https://i.stack.imgur.com/3Khj7.gif)

*   [https://www.youtube.com/watch?v=fE0P6H8eK4I](https://www.youtube.com/watch?v=fE0P6H8eK4I) "Real-Time Fluid Dynamics: CPU vs GPU" by Jesús Martín Berlanga

    Solving partial differential equations such as the [Navier Stokes equation](https://en.wikipedia.org/wiki/Navier%E2%80%93Stokes_equations) of fluid dynamics:

    *   highly parallel in nature, because each point only interacts with their neighbour
    *   there tend to be enough operations per byte

See also:

*   [Why are we still using CPUs instead of GPUs?](https://superuser.com/questions/308771/why-are-we-still-using-cpus-instead-of-gpus)
*   [What are GPUs bad at?](https://cs.stackexchange.com/questions/121080/what-are-gpus-bad-at)
*   [https://www.youtube.com/watch?v=_cyVDoyI6NE](https://www.youtube.com/watch?v=_cyVDoyI6NE) "CPU vs GPU (What's the Difference?) - Computerphile"

**CPython Global Intepreter Lock (GIL)**

As a quick case study, I want to point out to the Python Global Interpreter Lock (GIL): [What is the global interpreter lock (GIL) in CPython?](https://stackoverflow.com/questions/1294382/what-is-the-global-interpreter-lock-gil-in-cpython/55309364#55309364)

This CPython implementation detail prevents multiple Python threads from efficiently using CPU-bound work. The [CPython docs](https://docs.python.org/3.7/library/threading.html) say:

> CPython implementation detail: In CPython, due to the Global Interpreter Lock, only one thread can execute Python code at once (even though certain performance-oriented libraries might overcome this limitation). If you want your application to make better use of the computational resources of multi-core machines, you are advised to use `multiprocessing` or `concurrent.futures.ProcessPoolExecutor`. However, threading is still an appropriate model if you want to run multiple I/O-bound tasks simultaneously.

Therefore, here we have an example where CPU-bound content is not suitable and I/O bound is.

**JavaScript `async` and Node.js `worker_threads`**

The situation is similar to Python's.

JavaScript is fundamentally single threaded. Not sure if this is part of the language standard or not (for Python it is not, there isn't even a language standard besides the reference CPython implementation AFAIK).

JavaScript has the `async` keyword which allows execution to stall, and it then it start executing something else. You can write stuff like:

```
async function myfunc(init) {
  ret = init
  for (let i = 0; i < 1000000; i++) {
    ret += i*i + 2*i + 3
  }
  return ret;
}

async function doNetworkRequest(init) {
  // Some native method that gets network data.
}

const [first, second, myfunc_ret1, myfunc_ret2] = await Promise.all([
  doNetworkRequest('example.com'),
  doNetworkRequest('example2.com'),
  myfunc(1),
  myfunc(2),
]) 
```

where `await` says "wait for all these async things to finish before moving on".

However, only one of the `async` methods can run at a time on your CPU, so the CPU intensive work of `myfunc` does not get sped up by this at all.

The prototypically IO bound operation of network access however can get sped up, as this would fire both network requests one after the other, and just wait for both to return while the servers/network do the work.

The fact that there is an actual keyword in the language dedicated for this, `async`, is telling: unsurprisingly, network requests are very important in the browser dominated context of JavaScript.

With the advent of Node.js however, people started to want to parallelize CPU workload as well more and more, and they reached a similar solution to CPython: create separate processes rather than threads. This is done with the [`worker_threads` library](https://nodejs.org/docs/latest-v17.x/api/worker_threads.html), which:

*   actually takes a JavaScript script path as input, and launches a new interpreter instance to run it
*   since the processes don't share memory space, you pass messages between instances with a messaging system

[https://medium.com/@Trott/using-worker-threads-in-node-js-80494136dbb6](https://medium.com/@Trott/using-worker-threads-in-node-js-80494136dbb6) contains a good example.

The documentation of `worker_threads` once more states the difference as mentioned elsewhere in this answer:

> Workers (threads) are useful for performing CPU-intensive JavaScript operations. They do not help much with I/O-intensive work. The Node.js built-in asynchronous I/O operations are more efficient than Workers can be.

On the browser there's also Web Workers, not sure how it compares to Node's implementation: [What's the difference between Web Workers and Worker Threads?](https://stackoverflow.com/questions/60268604/whats-the-difference-between-web-workers-and-worker-threads)

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2009-05-15T13:08:15.067

CPU bound means the program is bottlenecked by the CPU, or central processing unit, while [I/O](http://en.wikipedia.org/wiki/Input/output) bound means the program is bottlenecked by I/O, or input/output, such as reading or writing to disk, network, etc.

In general, when optimizing computer programs, one tries to seek out the bottleneck and eliminate it. Knowing that your program is CPU bound helps, so that one doesn't unnecessarily optimize something else.

[And by "bottleneck", I mean the thing that makes your program go slower than it otherwise would have.]

* * *

## 回答 #5

> 赞同：33
> 
> 时间：2009-05-15T13:26:11.310

Another way to phrase the same idea:

*   If speeding up the CPU doesn't speed up your program, it may be [I/O](http://en.wikipedia.org/wiki/Input/output) bound.

*   If speeding up the I/O (e.g. using a faster disk) doesn't help, your program may be CPU bound.

(I used "may be" because you need to take other resources into account. Memory is one example.)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2009-05-15T13:10:22.300

When your program is waiting for [I/O](http://en.wikipedia.org/wiki/Input/output) (ie. a disk read/write or network read/write etc), the CPU is free to do other tasks even if your program is stopped. The speed of your program will mostly depend on how fast that IO can happen, and if you want to speed it up you will need to speed up the I/O.

If your program is running lots of program instructions and not waiting for I/O, then it is said to be CPU bound. Speeding up the CPU will make the program run faster.

In either case, the key to speeding up the program might not be to speed up the hardware, but to optimize the program to reduce the amount of IO or CPU it needs, or to have it do I/O while it also does CPU intensive stuff.

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2014-05-02T06:09:11.850

IO bound processes: spend more time doing IO than computations, have many short CPU bursts. CPU bound processes: spend more time doing computations, few very long CPU bursts

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-02-20T09:34:09.313

I/O bound refers to a condition in which the time it takes to complete a computation is determined principally by the period spent waiting for input/output operations to be completed.

This is the opposite of a task being CPU bound. This circumstance arises when the rate at which data is requested is slower than the rate it is consumed or, in other words, more time is spent requesting data than processing it.

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2020-01-10T20:24:03.427

[See what Microsoft says.](https://docs.microsoft.com/en-us/dotnet/csharp/async)

> The core of async programming is the Task and Task objects, which model asynchronous operations. They are supported by the async and await keywords. The model is fairly simple in most cases:
> 
> *   For I/O-bound code, you await an operation which returns a Task or Task inside of an async method.
>     
>     
> *   For CPU-bound code, you await an operation which is started on a background thread with the Task.Run method.
>     
>     
> 
> The await keyword is where the magic happens. It yields control to the caller of the method that performed await, and it ultimately allows a UI to be responsive or a service to be elastic.

**[I/O-Bound Example: Downloading data from a web service](https://docs.microsoft.com/en-us/dotnet/csharp/async#io-bound-example-downloading-data-from-a-web-service)**

```
private readonly HttpClient _httpClient = new HttpClient();

downloadButton.Clicked += async (o, e) =>
{
    // This line will yield control to the UI as the request
    // from the web service is happening.
    //
    // The UI thread is now free to perform other work.
    var stringData = await _httpClient.GetStringAsync(URL);
    DoSomethingWithData(stringData);
}; 
```

**[CPU-bound Example: Performing a Calculation for a Game](https://docs.microsoft.com/en-us/dotnet/csharp/async#cpu-bound-example-performing-a-calculation-for-a-game)**

```
private DamageResult CalculateDamageDone()
{
    // Code omitted:
    //
    // Does an expensive calculation and returns
    // the result of that calculation.
}

calculateButton.Clicked += async (o, e) =>
{
    // This line will yield control to the UI while CalculateDamageDone()
    // performs its work.  The UI thread is free to perform other work.
    var damageResult = await Task.Run(() => CalculateDamageDone());
    DisplayDamage(damageResult);
}; 
```

> Examples above showed how you can use async and await for I/O-bound and CPU-bound work. It's key that you can identify when a job you need to do is I/O-bound or CPU-bound, because it can greatly affect the performance of your code and could potentially lead to misusing certain constructs.
> 
> Here are two questions you should ask before you write any code:
> 
> **Will your code be "waiting" for something, such as data from a database?**
> 
> *   If your answer is "yes", then your work is I/O-bound.
> 
> **Will your code be performing a very expensive computation?**
> 
> *   If you answered "yes", then your work is CPU-bound.
> 
> If the work you have is I/O-bound, use async and await **without** **Task.Run**. You should not use the Task Parallel Library. The reason for this is outlined in the [Async in Depth](https://docs.microsoft.com/en-us/dotnet/standard/async-in-depth) article.
> 
> If the work you have is CPU-bound and you care about responsiveness, use async and await but spawn the work off on another thread with Task.Run. If the work is appropriate for concurrency and parallelism, you should also consider using the [Task Parallel Library](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/task-parallel-library-tpl).

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-04-10T07:17:52.907

An application is CPU-bound when the arithmetic/logical/floating-point (A/L/FP) performance during the execution is mostly near the theoretical peak-performance of the processor (data provided by the manufacturer and determined by the characteristics of the processor: number of cores, frequency, registers, ALUs, FPUs, etc.).

The peek performance is very difficult to be achieved in real-world applications, for not saying impossible. Most of the applications access memory in different parts of the execution and the processor is not doing A/L/FP operations during several cycles. This is called *Von Neumann Limitation* due to the distance that exists between the memory and the processor.

If you want to be near the CPU peak-performance a strategy could be to try to reuse most of the data in the cache memory in order to avoid requiring data from the main memory. An algorithm that exploits this feature is the matrix-matrix multiplication (if both matrices can be stored in the cache memory). This happens because if the matrices are size `n x n` then you need to do about `2 n^3` operations using only `2 n^2` FP numbers of data. On the other hand matrix addition, for example, is a less CPU-bound or a more memory-bound application than the matrix multiplication since it requires only `n^2` FLOPs with the same data.

In the following figure the FLOPs obtained with a naive algorithms for the matrix addition and the matrix multiplication in an Intel i5-9300H, is shown:

[![FLOPs comparison between Matrix Addition and Matrix Multiplication](https://i.stack.imgur.com/UCZoP.png)](https://i.stack.imgur.com/UCZoP.png)

Note that as expected the performance of the matrix multiplication in bigger than the matrix addition. These results can be reproduced by running `test/gemm` and `test/matadd` available in this [repository](https://github.com/gagiuntoli/Basic-Linear-Algebra).

I suggest also to see the [video](https://www.youtube.com/watch?v=TPP5LavGEiI&t=1926s) given by J. Dongarra about this effect.

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-04-12T06:54:35.663

I/O Bound process:- If most part of the lifetime of a process is spent in i/o state, then the process is a i/o bound process.example:-calculator,internet explorer

CPU Bound process:- If most part of the process life is spent in cpu,then it is cpu bound process.

# jquery - 在 ajax 表单发布之前检查 mvc 中的 http 授权

> ID：868571
> 
> 赞同：4
> 
> 时间：2009-05-15T13:06:11.093
> 
> 标签：jquery, asp.net-mvc, ajax, authentication

在构建一个将 jquery ajax 合并到它的 GUI 中的内容管理系统时，我遇到了一个障碍。似乎有些客户花了太长时间思考他们将要写什么，因此服务器会话将他们注销，自然是他们不知道这一点的网络。当他们尝试提交更改时，我使用 ajax 调用服务器来保存数据。

我预计接下来会发生的是 MVC 服务器应用程序将返回“401 Unauthorized”状态。然后我可以让我的 jquery ajax 对象要求用户登录，然后在用户获得授权后重新发送更改。

但是，从 MVC 应用程序实际返回的是“302 Found”状态和指向我的登录表单页面的重定向 URL。登录表单页面返回“200 OK”状态代码，jquery ajax 对象调用成功事件，告诉用户一切都成功，因为这就是 MVC 应用程序所说的。

有没有办法让 MVC 应用程序按照我认为应该的方式播放，或者我是否必须修改我的 jquery ajax 事件来检测登录页面？

**更新：**

我使用反射器查看了 MVC 代码和授权属性，返回 NotAuthorizedResult 代码如下（0x191 = 401）

```
public override void ExecuteResult(ControllerContext context)  
{  
    if (context == null)  
    {  
        throw new ArgumentNullException("context");  
    }  
    context.HttpContext.Response.StatusCode = 0x191;  
} 
```

我在想也许表单授权 HttpModule 看到了 401 并强制重定向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T14:13:37.827

你可以尝试这样的事情：

```
 void context_EndRequest(object sender, EventArgs e)
    {
        var app = sender as HttpApplication;
        var response = app.Response;
        var request = app.Request;

        if ((response.StatusCode == 302) && IsAjaxRequest(request))
            response.StatusCode = 401;
    } 
```

在 HttpModule 中，它将依次位于 FormsAuth 模块之后，因此将更正状态代码。不漂亮但有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2011-07-14T21:03:51.607

我真的很喜欢这个解决方案。通过将 ajax 请求的 302 响应更改为 401，它允许您在客户端设置 ajax 以监视任何寻找 401 的 ajax 请求，如果找到一个重定向到登录页面。非常简单有效。

全球.asax：

```
protected void Application_EndRequest()
{
    if (Context.Response.StatusCode == 302 &&
        Context.Request.Headers["X-Requested-With"] == "XMLHttpRequest")
    {
        Context.Response.Clear();
        Context.Response.StatusCode = 401;
    }
} 
```

客户端代码：

```
 $(function () {
      $.ajaxSetup({
        statusCode: {
          401: function () {
            location.href = '/Logon.aspx?ReturnUrl=' + location.pathname;
          }
        }
      });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-17T11:01:41.350

我发现一种更轻量级的方法是简单地将自定义 HTTP 标头添加到登录页面，然后在 AJAX 成功回调中检查该标头的存在。

IE。在 LoginController 中（这是一个 MVC 项目，但同样的原则应该适用于其他 ASP.NET 解决方案）：

```
public ActionResult Login(string returnUrl = "")
{
    Response.AddHeader("X-Unauthorized", "true");
    ... 
```

然后在客户端 AJAX 处理程序中：

```
success: function(data, textStatus, jqXhr)
{
    if (jqXhr.getResponseHeader("X-Unauthorized"))
    {
        ... 
```

这至少对我有用。

# c# - 如何将 object[] 转换为 List 在 C# 3.0 的一行中？

> ID：868572
> 
> 赞同：16
> 
> 时间：2009-05-15T13:06:18.457
> 
> 标签：c#, generics, list, casting

好的，我放弃了，您如何在一行中做到这一点？

```
public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
{
    //List<string> fields = values.ToList<string>();
    //List<string> fields = values as List<string>;
    //List<string> fields = (List<string>)values;

    List<string> fields = new List<string>();
    foreach (object value in values)
    {
        fields.Add(value.ToString());
    }

    //process the fields here knowning they are strings
    ...
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2009-05-15T13:07:47.500

你在使用 C# 3.0 和 LINQ 吗？那么这很容易：

```
List<string> fields = values.Select(i => i.ToString()).ToList(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-05-15T13:07:35.677

如果您有可用的 LINQ（在 .NET 3.5 中）和 C# 3.0（用于扩展方法），那么有一个很好的衬线：

```
var list = values.Cast<string>().ToList(); 
```

您不会得到比您为 .NET 2.0/C# 2.0 发布的内容更短的内容。

**警告：**我刚刚意识到你`object[]`的不一定是 type `string`。如果确实如此，请使用马特汉密尔顿的方法，它做得很好。如果您的数组元素实际上是 type `string`，那么我的方法当然会起作用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-05-15T13:27:10.480

C# 2.0：

```
List<string> stringList = new List<string>(Array.ConvertAll<object,string>(values, new Converter<object,string>(Convert.ToString))); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-15T13:22:04.767

另一种可能是正确的变体：

```
List<string> list = values.OfType<string>().ToList(); 
```

这将过滤掉原始列表中不是`string`对象的任何对象，而不是抛出异常或尝试将它们全部转换为字符串。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-02-19T09:37:53.857

```
Array.ConvertAll(inputArray, p => p.ToString()) 
```

这会将`object`类型数组转换为`string`. 您可以通过更改 lambda 表达式转换为其他类型的数组。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-15T13:18:58.737

虽然就 List<> 声明而言不是单行，但无需 Linq 即可为您提供相同的效果。

```
List<string> list = new List<string>();
Array.ForEach(values, value => list.Add(value.ToString())); 
```

# java - UnsatisifiedLinkError with ojdbc14.jar

> ID：868575
> 
> 赞同：0
> 
> 时间：2009-05-15T13:06:52.353
> 
> 标签：java, oracle, junit, jdbc

我正在尝试运行一些连接到 Oracle 数据库的 JUnit 测试以及是否进行了连接尝试。抛出以下错误：

```
oracle/jdbc/driver/T2CConnection.t2cGetCharSet([CI[CI[CII[SLoracle/jdbc/driver/GetCharSetError;)S
在 oracle.jdbc.driver.T2CConnection.getCharSetIds(T2CConnection.java:2801)
在 oracle.jdbc.driver.T2CConnection.logon(T2CConnection.java:300)
在 oracle.jdbc.driver.PhysicalConnection.(PhysicalConnection.java:344)
在 oracle.jdbc.driver.T2CConnection.(T2CConnection.java:136)
在 oracle.jdbc.driver.T2CDriverExtension.getConnection(T2CDriverExtension.java:79)
在 oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:545)
在 oracle.jdbc.pool.OracleDataSource.getConnection(OracleDataSource.java:194)
在 oracle.jdbc.pool.OracleConnectionPoolDataSource.getPhysicalConnection(OracleConnectionPoolDataSource.java:109)
在 oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:77)
在 oracle.jdbc.pool.OracleConnectionPoolDataSource.getPooledConnection(OracleConnectionPoolDataSource.java:59)
在 oracle.jdbc.pool.OracleConnectionCacheImpl.getNewPoolOrXAConnection(OracleConnectionCacheImpl.java:414)
在 oracle.jdbc.pool.OracleConnectionCacheImpl.setMinLimit(OracleConnectionCacheImpl.java:739)

```

以前有人遇到过这个错误吗？

直到最近我才收到这个错误。但是，在同事的计算机上运行相同的 JUnit 并使用相同的 ojbdc14.jar 文件时不会发生此错误。所以某种环境问题应该是造成这种情况的原因。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-11T11:21:59.220

我在使用 oci dirver 时在 Webesphere 环境中遇到了同样的错误，这是由于 jar ojdbc14.jar 的版本不匹配，来自 ORACLE_HOME/jdbc/lib 的 jar 以及在管理控制台中定义的 JDBCProvider 的类路径中的 jar 不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:38:59.127

确保您有`-Djava.library.path=<your-oracle-home>\bin`作为运行时的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:43:52.717

在我看来，您打算使用需要在您的机器上安装 Oracle 客户端库的 JDBC Type 2 驱动程序（厚客户端）。或者，如果可能，只需更改 URL 即可切换到瘦驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T13:12:31.997

你有安装oracle客户端吗？我认为您使用的是“oci”而不是纯 Java 驱动程序，这需要客户端安装来获取本机共享库。

# c# - 我的 Gridview 中的 DataFormatString 在 SharePoint 中不起作用

> ID：868576
> 
> 赞同：1
> 
> 时间：2009-05-15T13:06:58.953
> 
> 标签：c#, asp.net, sharepoint, gridview, sharepoint-designer

我有一个通过 SharePoint Designer 2007 在页面上创建的 ASP.NET GridView。由于某种原因，它只是不想工作，为什么会这样，我该如何修复它？

有趣的是，它在另一个 SharePoint Server 上工作，但在我现在正在工作的那个上工作，所以我知道我的代码很好，它可能是 SharePoint Server 上的某些东西？

我的 Currency DataFormatStrings 也不想在我当前的 SharePoint Server 上工作。

我的日期字段的 DataFormatString

```
<asp:BoundField DataField="c505_remdate" HeaderText="Remit. Advice Date" 
 SortExpression="c505_remdate" DataFormatString="{0:d/MM/yyyy}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:37:55.337

当您尝试查看页面时，日志中是否会弹出任何内容？加载时你只是得到一个空白页面吗？只是缺少网格视图吗？更多细节可能有助于发现问题。

如果 HtmlEncode 设置为 true，数据格式字符串可能会变得不稳定。请参阅此处“备注”下的第一个注释：

[system.web.ui.webcontrols.boundfield.dataformatstring](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-23T02:48:37.040

在字段中设置 htmlencode="False" 属性并修复它。去搞清楚

# php - 当 php 设置为记录到 syslog 时记录 REQUEST_URI 变量

> ID：868584
> 
> 赞同：1
> 
> 时间：2009-05-15T13:07:51.010
> 
> 标签：php, c, module, php-extension, php-internals

这是 php_log_err 的源代码。我想修改它以便能够记录变量`_SERVER["REQUEST_URI"]`

```
/* {{{ php_log_err
 */
PHPAPI void php_log_err(char *log_message TSRMLS_DC)
{
        FILE *log_file;
        char error_time_str[128];
        struct tm tmbuf;
        time_t error_time;

        /* Try to use the specified logging location. */
        if (PG(error_log) != NULL) {
#ifdef HAVE_SYSLOG_H
                if (!strcmp(PG(error_log), "syslog")) {
                        php_syslog(LOG_NOTICE, "%.500s", log_message);
                        return;
                }
#endif
                log_file = VCWD_FOPEN(PG(error_log), "ab");
                if (log_file != NULL) {
                        time(&error_time);
                        strftime(error_time_str, sizeof(error_time_str), "%d-%b-%Y %H:%M:%S", php_localtime_r(&error_time, &tmbuf));
                        fprintf(log_file, "[%s] ", error_time_str);
                        fprintf(log_file, "%s", log_message);
                        fprintf(log_file, "%s", PHP_EOL);
                        fclose(log_file);
                        return;
                }
        }

        /* Otherwise fall back to the default logging location, if we have one */

        if (sapi_module.log_message) {
                sapi_module.log_message(log_message);
        }
}
/* }}} */ 
```

我有这个应该离解决方案不远，但我无法让它工作：

```
char key[] = "REQUEST_URI";
int key_size = sizeof(key);
zval **hsv;
zval **var;

if (SUCCESS != zend_hash_find(&EG(symbol_table), "_SERVER", sizeof("_SERVER"), (void **) &hsv)) {
    if (SUCCESS != zend_hash_find(Z_ARRVAL_PP(hsv), (char *) key, key_size, (void **) &var)) {
        if (!(Z_STRVAL_PP(var) && Z_STRLEN_PP(var))) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T14:58:10.793

没关系，我终于找到了答案……

```
char *ip_address;
char *uri;

ip_address = sapi_getenv("HTTP_X_FORWARDED_FOR", 20 TSRMLS_CC);
if (ip_address == NULL) {
  ip_address = sapi_getenv("REMOTE_ADDR", 11 TSRMLS_CC);
  if (ip_address == NULL) {
    ip_address = "no_ip_address";
  }
}

uri = sapi_getenv("REQUEST_URI", 11 TSRMLS_CC);
if (uri == NULL) {
  uri = "no_uri";
}

php_syslog(LOG_NOTICE, "%.500s [ip:%s][uri:%s]", log_message, ip_address, uri); 
```

# asp.net - 标签 ASP.ViewState 实现中的错误？

> ID：868587
> 
> 赞同：1
> 
> 时间：2009-05-15T13:08:02.727
> 
> 标签：asp.net, viewstate

编辑2：好吧，我去了代码。注意他们在这里做什么。他们说加载视图状态，然后转身将 Text 属性设置为视图状态中的内容。尽管视图状态跟踪已打开，但调用 LoadViewState 后，这会导致我看到的行为。我认为代码应该说的是：

if (s != Text) {Text = s;}。这将完全摆脱这个问题，并保持他们需要的任何不变量。

```
/// <internalonly/>
        /// <devdoc>
        ///    <para>Load previously saved state.
        ///       Overridden to synchronize Text property with LiteralContent.</para> 
        /// </devdoc>
        protected override void LoadViewState(object savedState) { 
            if (savedState != null) { 
                base.LoadViewState(savedState);
                string s = (string)ViewState["Text"]; 
                if (s != null)
                    Text = s;
            }
        } 
```

编辑：从我所有的测试来看，这似乎只影响标签控件。我仍然认为这是一个错误。

这是一个 ASP.NET 3.5 网站。

考虑以下 .aspx 页面：（html、head、body 等被剪断）

```
<form id="form1" runat="server">
        <asp:Label runat="server" ID="label1">
            This is a lot of text. 
            This is a lot of text. 
            This is a lot of text. 
            This is a lot of text. 
            This is a lot of text. 
            This is a lot of text. 
            This is a lot of text.             
        </asp:Label>
        <asp:Button runat="server" ID="button1" Text="Click" OnClick="button1_Click" />
        <script>
            document.write(document.getElementById("__VIEWSTATE").value.length);
        </script>
    </form> 
```

该页面背后有以下代码：

```
protected void button1_Click(object sender, EventArgs e) {
        //label1.AccessKey = "a";
    } 
```

是的，该行已被注释掉。说到这里。因此，当您单击按钮时，您将看到视图状态为 52 字节。即使标签有很多文本，当然视图状态的工作方式是它不需要在视图状态中保存大量文本，因为 Text 属性的初始值从未改变。好的。到现在为止还挺好。这都是预期的行为。事实上，即使标签包含 1 兆文本，视图状态大小仍然是 52 字节。好的。现在将方法更改为

```
protected void button1_Click(object sender, EventArgs e) {
        label1.AccessKey = "a";
    } 
```

我们改变什么属性并不重要。现在单击按钮。ViewState 大小最多为 92 个字节。好的 40 个字节来存储一个字符的访问密钥，如果你问我的话有点多，但无论如何 :) 现在，再次单击该按钮。现在的视图状态大小是多少？应该是92字节吧？不，是*480*。再点击，它保持在 480 字节大小。发生了什么？更改标签属性会导致标签开始将标签 TEXT 存储在视图状态中。什么？？？？在标签中粘贴 100K 的文本，您会看到视图状态上升到 ~100K。

这是一个错误吗？这*可能是*预期的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:11:47.257

它不仅存储一个字符，还需要存储它所应用的属性。

有关视图状态如何工作的更多信息，请参阅[http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/03/truly-understanding-viewstate.aspx)。

尽管视图状态的行为可能与您的预期不同，但由于视图状态是 ASP.NET 工作方式的核心，因此不太可能出现任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-25T04:38:52.713

这里是 ASP.NET 开发人员 :) 以及所提到的 viewstate 文章的作者。

以我自己而不是 MS 的身份说话，只是为了清楚起见。是的——这是一个错误。稍微说明一下为什么代码在看似不必要的情况下设置属性（因为该值已经存储在 ViewState 中——为什么设置它只会再次将其放回 ViewState 中？）。如果您查看 Text 的 setter，您会发现除了将值设置为 ViewState 之外，它还调用 Controls.Clear()。这是因为 Label 支持拥有子控件，因为它是“文本”以及文字字符串。如果它没有在 LoadViewState 中设置 Text 属性，那么它可能会错误地呈现控件而不是文本或其他内容。

它应该以更好的方式处理这个问题——我不确定你提到的建议修复是否适用于所有情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-16T14:13:41.747

是的。这是标签控件中的一个错误。

# javascript - 在javascript中等待文件下载时的进度/忙碌指示器？

> ID：868591
> 
> 赞同：15
> 
> 时间：2009-05-15T13:08:57.433
> 
> 标签：javascript, html

情况如下：在Web应用程序中，用户选择一些选项，提交表单，PDF文件在服务器端动态生成并提供下载。

问题：PDF 文件的生成需要很长时间（最多 1 分钟）。一些用户认为没有任何事情发生，并一次又一次地单击提交按钮，从而增加了服务器负载并进一步减慢了它的速度。

我想添加一些繁忙的指示器，它会显示动画图片和消息，例如“请稍候，正在生成您的文件”，这似乎很容易做到。

但是：当文件准备好并弹出“文件下载”对话框时，如何隐藏此指示器？否则，即使用户下载了文件，该消息仍会留在屏幕上！

似乎非常基本的要求，但我完全被卡住了。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T13:31:06.273

我不得不为花费更长的时间（转换视频格式）执行此操作。对你来说，这似乎有点过头了，但它确实奏效了。

1.  将您的 PDF 代码移出进程。
2.  启动作业时，创建唯一的作业 ID 并将其保存到会话。告诉 PDF 创建者这个 ID。
3.  让它向服务器写入一个状态文件（命名为作业 ID），以便它写入“0% 完成”并每隔几秒更新一次（这部分取决于您能否在流程中拥有进度指标......如果没有，那么这将不起作用）
4.  使用 JS 拉下该文件。您可以向用户显示进度。
5.  当进度等于“100% 完成”时，将它们推送到 PDF 的位置。如果您也将其命名为作业 ID，这可能会有所帮助。*

*我们有另一个下载脚本，它使用 content-disposition 标头将其重命名为一个好听的名称（基于原始视频文件名），但这完全取决于您！

编辑：我应该补充一点，等待页面是单击提交的结果。这是一个新的页面加载，但没有理由你不能 AJAX 整个过程，只要确保，正如其他人所说，在第一次点击时禁用提交按钮，以阻止用户继续使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:28:12.990

我同意其他受访者的观点，您最好的选择是禁用表单上的提交按钮并为用户提供忙碌指示；但是，对于需要很长时间才能生成的文件，向用户提供一个更现实的指示是有意义的，即事情不会只是挂起。

您可能能够实现状态栏或更新等待消息的一种方法是让客户端 JavaScript 对服务器进行初始调用，并让服务器在开始生成后立即响应。然后，您可以让客户端 JavaScript 每*n*秒轮询一次服务器以查看文件是否完整。如果您有确定文件生成状态的方法，那么您可以为进度条百分比返回数字响应，或者您可以只回复“仍在工作”类型的消息。

我相信[asp.net 上的这个博客](http://weblogs.asp.net/rchartier/archive/2005/08/15/422635.aspx)讨论了类似的设置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-01-04T13:00:37.527

我有一篇博客文章可能会解决这个问题：

[http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx](http://geekswithblogs.net/GruffCode/archive/2010/10/28/detecting-the-file-download-dialog-in-the-browser.aspx)

这种方法涉及客户端和服务器端代码之间的一些合作。它是这样工作的（包含代码的完整示例可以在我上面链接的博客文章中找到）：

*   用户单击“提交”按钮生成文件。*在*数据提交到服务器进行处理之前，客户端javascript做了三件事：
    1.  生成“令牌”值并设置为要提交的 HTML 表单中的隐藏字段。代币的价值并不重要；只需使用当前日期和时间戳就足够了。
    2.  就在设置令牌之后但仍然在允许提交表单之前，客户端代码会发出“系统繁忙”消息，让用户知道正在发生某些事情并阻止他们提交表单两次。[jQuery BlockUI 插件](http://jquery.malsup.com/block/)非常适合此目的。
    3.  最后，配置一个时间以定期轮询是否存在具有预定义名称的 cookie，该名称包含在步骤 1 中创建的令牌值。
*   现在您在客户端有一个很好的“封面”，它让用户知道正在发生某些事情，并防止他们在服务器端处理请求时单击按钮两次。在将完成的文件作为下载发送回客户端之前，在包含客户端提交的令牌值的 HTTP 响应中设置一个具有预定义名称的 cookie。
*   当客户端收到 HTTP 响应时，正在轮询包含令牌值的预定义 cookie 名称的计时器代码将找到它，然后可以执行以下操作：
    1.  解锁用户界面
    2.  停止计时器/轮询代码。

我通常以 1 秒的轮询间隔执行此操作，因此大多数用户必须在浏览器中显示文件下载对话框的时间和“系统繁忙”消息消失的时间之间等待 1 秒。

在我看来，这种方法非常快速且易于实施。也就是说，鉴于您的 PDF 生成大约需要 1 分钟，我认为您已经接近将处理“带外”并实施类似于已接受答案中解释的内容的地步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T13:15:11.960

您可以异步轮询服务器（例如使用 AJAX）以检查该特定 PDF 的生成是否已完成。根据该结果或超时重新启用该按钮和/或停止动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T13:15:53.410

我会把这个或类似的东西放在 onSubmit 事件中。Busy 块可以只是一个在后台带有[ajax 加载](http://www.ajaxload.info/)动画的 div。（我确实建议使用 gif 动画，而不是 Javascript 动画。）一旦返回输出，用户将在等待一分钟后看到 PDF。您甚至可以使用计时器来减少估计值（例如 60 秒），并让用户了解可能需要多长时间。

```
document.getElementById('busy').style.display = 'block';
document.getElementById('submit').disabled = 'disabled'; 
```

繁忙的街区：

```
<div id="busy">
  <p>Your PDF is being generated, please wait.</p>
</div> 
```

和通用的 CSS...

```
#busy { display: none; background: url(/images/spinner.gif) no-repeat top left; padding-left: 24px; } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-05-15T13:11:08.473

不是您问题的完整答案，但您可以在用户第一次单击时禁用提交按钮。

这将解决“用户不断点击从而进一步降低服务器速度”的问题。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-05-15T13:46:25.677

谢谢大家的建议。

与此同时，我尝试了另一种方法：

a) 在“onclick”中，禁用提交按钮并显示忙碌指示符。b) 在服务器端，文件生成时，不输出给用户，而是保存到文件系统。然后，将重定向发送到同一页面，但属性为“&downloadready=true” c) 在页面加载时，如果“downloadready”属性为真，则启动文件下载。

它可以工作，但有一个缺点：在 IE 中，它显示警告“为了保护您的安全，IE 阻止了文件下载 bla bla bla”，我想这对用户来说会很烦人。

那么，让我们尝试一下 AJAX 轮询方法。

# c# - 存储 WPF TreeView 的文件信息 (C#)

> ID：868592
> 
> 赞同：1
> 
> 时间：2009-05-15T13:09:40.677
> 
> 标签：c#, wpf, treeview, populate

嘿。我希望这个问题以前没有出现过 - 我在相关问题列表中找不到它。

无论如何，我是一个相当新手的程序员（计算机学位的第一年，所以我知道深蹲），我目前正在玩 C# 和 WPF。为了好玩，我正在尝试创建一个简单的音乐浏览器——首先，它会读取我的目录并列出文件，然后在双击或其他任何情况下启动一个。无论如何，我在如何存储 TreeViewItems 时遇到了麻烦。我需要将它存储为分层设计，这样我就可以循环遍历或在创建所有路径后填充 Treeview，但我不确定执行此操作的最佳方法。Atm，我正在使用 TreeViewItem[][][] - 一个包含数组的数组数组，实际上考虑它似乎是错误的......

现在考虑一下，也许我应该创建一个数据库，并从中填充树视图？唯一的问题是，我从来没有做过这样的事情。XD。

谢谢你的帮助！

- 食物

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T13:29:42.690

让我们退后一步，看看整体架构。在这种情况下，您通常会让 TreeView 显示数据、表示数据的类类型以及文件/数据库/等。作为数据的存储。

模式应该是您从文件/数据库/等加载数据。到表示实体的自定义类类型中。接下来，您将该源绑定到 TreeView（使用 WPF 绑定或手动绑定）。

假设您希望树中的每个节点都代表一个音乐专辑。您将创建一个 MusicAlbum 类，该类可能由艺术家、专辑名称、专辑日期、歌曲列表等组成。此数据在文件/数据库/等之间进行序列化。

接下来，将该数据绑定到 TreeView。WPF 支持直接绑定到自定义对象列表，或者您可以手动配置绑定。如果您是开发新手，您可能需要考虑手动绑定，因为它更容易配置，并且会给您很好的实践。

就存储而言，我建议使用数据库（如 SQLite）或 XML 文件。由于您正在学习开发，因此我建议您从 XML 文件开始。这是一种表示数据的好方法，并且不需要与数据库相同的复杂性开销。如果你把它带到生产级别，我肯定会推荐一个数据库。

**编辑：**这个问题本身有点模糊，所以你可能想更具体地了解你到底要什么。您想要 TreeView 绑定的代码示例还是想要指导或整体结构？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:30:08.570

如果您的意图是仅通过资源管理器风格的文件夹结构访问音乐，那么您不需要数据库，因为 Windows 文件系统已经为您提供了一个集中点来获取您的数据。您确实希望在启动时尝试填充整个树时要小心，因为您不希望用户等待应用程序在开始导航树之前爬取其硬盘驱动器的整个结构。仅在需要时加载树项的过程称为延迟加载，并且超出了此处的答案范围。幸运的是[，这篇 Code Project 文章](http://www.codeproject.com/KB/WPF/WPF_Explorer_Tree.aspx)展示了如何做到这一点。

另一方面，如果您希望模仿 Windows Media 播放器库样式，其中用户提供特定目录，并且您创建了一种按艺术家、专辑等导航 MP3 的方式，那么您可能*会*想要在后台使用某种数据库。在这些情况下，您需要从选定文件夹中的 mp3 读取标签信息，将信息添加到一个规范化的数据库中（以允许快速搜索和交叉引用）并提供一个允许用户以这种方式导航的 UI。再次，您将寻求延迟加载树 - 选择一个艺术家，然后在请求时使用数据库中的所有专辑/歌曲填充子节点 - 但在您到达那里之前还有很多工作需要完成（选择一种数据库类型，定义架构，学习如何解析 mp3 标签等）所以我假设您的意思是第一个选项。

# php - 以php形式传递变量的问题

> ID：868605
> 
> 赞同：0
> 
> 时间：2009-05-15T13:13:14.227
> 
> 标签：php, forms

我有以下 php 表单。

我正在尝试这样做，以便在加载表单时，将为这些值分配适当的检查变量。这个变量将包含“checked”或“”。如果它包含checked，它与html一起显示的方式应该会导致相关的复选框被选中。

事实上，变量似乎没有被传递。当我从 submitinfo 分支中回显 $deleted 或 $notice 时，它​​们是空白的。此外，没有任何内容被插入到数据库中，并且我没有收到任何数据库错误。我怎样才能检查这个？

```
<?php
if (isset($_GET["cmd"]))
  $cmd = $_GET["cmd"]; else
if (isset($_POST["cmd"]))
  $cmd = $_POST["cmd"]; else
die("Invalid URL");
if (isset($_GET["pk"])) {
    $pk = $_GET["pk"];
}
if (isset($_POST["deleted"])) {
    $deleted = $_POST["deleted"];
}
if (isset($_POST["notice"])) {
    $notice = $_POST["notice"];
}
$con = mysqli_connect("localhost","user","password", "db");
if (!$con) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$con->set_charset("utf8");
$getformdata = $con->query("select * from STATUS where ARTICLE_NO = '$pk'");
$checkDeleted = "";
$checkNotice = "";
while ($row = mysqli_fetch_assoc($getformdata)) {
    $checkDeleted = $row['deleted'];
    $checkNotice = $row['notice'];
}
if($cmd=="submitinfo") {
    $statusQuery = "INSERT INTO STATUS VALUES (?, ?)";
    if ($statusInfo = $con->prepare($statusQuery)) {
        $statusInfo->bind_param("ss", $deleted, $notice);
        $statusInfo->execute();
        $statusInfo->close();
        echo "true";
    } else {
        echo "false";
    }
    print_r($con->error);
}
if($cmd=="EditStatusData") {
    echo "<form name=\"statusForm\" action=\"test.php\" method=\"post\" enctype=\"multipart/form-data\">
<h1>Editing information for auction: ".$pk."</h1>
Löschung Ebay:
<input type=\"checkbox\" name=\"deleted\" value=\"checked\" ".$checkDeleted." />
<br />
Abmahnung:
<input type=\"checkbox\" name=\"notice\"  value=\"checked\" ".$checkNotice."  />
<br />
<input type=\"hidden\" name=\"cmd\" value=\"submitinfo\" />
<input name=\"Submit\" type=\"submit\" value=\"submit\" />
</form>";
} else {
    print_r($con->error);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T13:48:43.657

我不确定我是否遵循您的代码...

您的 HTML 有：

```
value="checked" 
```

这意味着如果用户选中该框并上传表单，它将为该字段赋予“选中”的值（而不是“男性”的值）。

由于您只有这些值作为值，因此永远不会将任何内容作为“未检查”插入表中，此外，您的输入字段具有未经检查和检查的 DB 输出只是坐在那里而没有分配任何属性...是故意的？是建立在数据库值中的吗，否则你会产生以下效果：

```
 <input type="checkbox" name="notice" value="checked" "Foo" /> 
```

哪个不会真正做很多事情，至少没有什么帮助？

最后，在你的结果获取中，如果我没看错，你有：

```
$checkedValue = $row['checked']; 
```

这意味着，如果您有多个结果，您只需为最后一行分配该值，因此如果您确实在底部有一个空白行，无论出于何种原因，这将为您提供空白变量并且没有错误。你的意思是把它分配给一个数组吗？或者至少检查结果计数，例如 mysql_num_rows()，以便您可以确认它只是第一行（或者甚至只有一行）。您甚至可以添加一个故障保护并让它在一次迭代后结束 while 循环，以防万一。

[哦，最后一件事，如果你使用Heredoc 语法](http://us.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc) ，也就是 EOD ，你的代码会更干净，更容易编写和阅读。有了这个，您不必注释掉所有的双引号，您仍然可以使用内联变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:19:40.450

关于检查错误检查 Web 服务器日志或确保 php 在您的 php.ini 中显示错误。

您要发布到网页吗？$deleted 和 $notice 只会在 POST 请求上设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:21:17.733

IIRC，如果输入类型“复选框”的值为空字符串，则不会被检查。如果是其他东西，它将被检查。看起来，该值将始终被“检查”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T17:30:05.437

表单提交方面的简单答案是在每个具有相同名称且值为“未选中”的复选框之前包含一个隐藏输入。该复选框仅在选中时才会覆盖隐藏输入的值。

```
<input type="hidden" name="notice" value="unchecked" />
<input type="checkbox" name="notice" value="checked" /> 
```

这样你总是有 $_POST['notice'] 的值。

对于上面提到的验证错误并设置复选框的选中状态。根据 xhtml 的 w3c 标准，属性“checked”需要有一个值，在这种情况下也是“checked.

```
<?php

while ($row = mysqli_fetch_assoc($getformdata)) {
    $checkDeleted = ($row['deleted'] == 'checked') 
        ? 'checked="' . $row['deleted'] . '"' 
        : '';
    $checkNotice = ($row['notice'] == 'checked') 
        ? 'checked="' . $row['notice'] . '"' 
        : '';
}
?> 
```

现在你的属性“checked”将符合标准

# html - TextMate 中的选择性带状标签

> ID：868609
> 
> 赞同：1
> 
> 时间：2009-05-15T13:14:18.840
> 
> 标签：html, css, editor, tags, textmate

有没有办法在**TextMate中选择性地去除 HTML 标签 - 您可以在****Dreamweaver**中轻松地做到这一点。TextMate 允许您删除所有 HTML 标签，但我只想删除，比如说所有的`<span>`'s 和`<font>`'s。

在类似的主题上，有没有办法摆脱所有内联 css 样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:44:51.093

不是我知道的，但总是可以选择为`<span>`（和`</span>`，显然）进行查找/替换并将“替换”字段留空。当然，如果您的 span 具有不同的类/id 属性或您拥有的东西，那么这会变得更加成问题，那么您就进入了 RegExp 领域。

不过，这至少应该给你一个开始。不过，我很想听听其他人提供什么。Textmate 是如此可定制，我确信有比我提供的更好的解决方案！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:48:32.473

为什么不使用正则表达式替换？例如，要摆脱您只需替换的所有内联 css 样式

```
 style=".*" 
```

什么都没有（空字符串）。注意前导空格。

# asp.net-mvc - ASP.NET MVC - 动态样式表

> ID：868616
> 
> 赞同：5
> 
> 时间：2009-05-15T13:16:12.847
> 
> 标签：asp.net-mvc, stylesheet

我想让用户选择网站的背景颜色并将所选颜色保存在数据库中。当此人登录背景时，将显示正确的颜色。

基于以下[网站](http://www.codeproject.com/KB/aspnet/CSSVariables.aspx)，我可以在`CssHandler.ashx`文件中设置颜色。但是，从数据库中获取信息的最佳方式是什么？

网站母版页，

```
<link href="../../Content/CSSHandler.ashx?file=Site.css" rel="stylesheet" type="text/css" /> 
```

网站.css,

```
header
{
    background-color:#BG_COLOR#;
} 
```

CssHandler.ashx,

```
public class CssHandler : IHttpHandler
{

    public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "text/css";

        // Get the file from the query stirng
        string File = context.Request.QueryString["file"];

        // Find the actual path
        string Path = context.Server.MapPath(File);

        // Limit to only css files
        if (System.IO.Path.GetExtension(Path) != ".css")
            context.Response.End();

        // Make sure file exists
        if (!System.IO.File.Exists(Path))
            context.Response.End();

        // Open the file, read the contents and replace the variables
        using (System.IO.StreamReader css = new System.IO.StreamReader(Path))
        {
            string CSS = css.ReadToEnd();
            CSS = CSS.Replace("#BG_COLOR#","Blue");
            context.Response.Write(CSS);
        }
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-23T08:46:31.267

在性能方面，创建多个 CSS 文件并替换 <link> 指令要好得多。

不利的一面是你需要维护几个 CSS 文件，它们都用不同的颜色做同样的事情。**所以我要做的是创建一个*通用*的css 文件。**然后为每个可能的配置（背景颜色，你有什么），创建自己的 CSS 文件。// 假设有合理数量的组合

这样，客户端将缓存，而网络服务器将提供静态文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:48:21.990

好吧，为了与您发布的实现保持一致，我想说您不需要将 CSS 文件名传递给处理程序。只需将用户的 ID 从会话中拉出并查询数据库的背景颜色，而不是从文件中读取。或者，如果您想允许匿名用户选择颜色，只需将其存储在处理程序检查的 cookie 中。

所以，换...

```
// Get the file from the query stirng
string File = context.Request.QueryString["file"]; 
```

和...

```
// Get user ID from session
int userId = Convert.ToInt32(Session["UserId"]));
// Now, pull background color from database 
```

或者...

```
// Get background color preference from cookie
HttpCookie cookie = Request.Cookies["Preferences"];
string bgColor = cookie["BackgroundColor"]; 
```

然后从那里去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:23:38.803

我认为更好的方法是拥有一个包含各种类的 CSS 文件，并将类名传递给你的 body 标签：

```
.black {background:#000}
.blue {background:#00f} 
```

或者找到一种方法来编写 body 标签以便它呈现`<body class="black>`，或者创建一个`WebControl`呈现为的新标签`<body>`（并给它一个呈现选项，它可以根据上下文来确定它应该做什么。

通过这些方式，您可以将所有 CSS 保存在一个位置，而无需编辑实际代码来更改特定类的颜色，您只需编辑 CSS。

# sql - SQL 脚本更改所有外键以添加 ON DELETE CASCADE

> ID：868620
> 
> 赞同：47
> 
> 时间：2009-05-15T13:16:46.200
> 
> 标签：sql, sql-server, sql-server-2005

我有一个包含大约 250 个表的 SQL 2005 数据库。

我想暂时为所有外键启用 ON DELETE CASCADE 以便我可以轻松地进行批量删除。

然后我想在所有外键上关闭 ON DELETE CASCADE。

我知道这样做的唯一方法是使用 Management Studio 生成一个完整的数据库创建脚本，进行某种搜索和替换以去除除外键之外的所有内容，保存脚本，然后进行更多搜索和替换以添加ON DELETE 级联。

然后我运行脚本，删除，然后运行另一个脚本。

有没有更简单的方法来制作这个脚本？这种方法似乎太容易出错了，我必须使脚本与我们对数据库所做的任何其他更改保持同步，或者每次我可能需要使用它时手动重新生成它。

是否可以在系统表上运行选择来为我“生成”脚本？甚至可以在启用和禁用 ON DELETE CASCADE 的系统表上运行更新吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2009-05-15T22:30:18.257

Here's a script I used for a similiar purpose. It does not support composite foreign keys (which use more than one field.) And it would probably need some tweaking before it will work for your situation. *EDIT: In particular it does not handle multi-column foreign keys correctly.*

```
select
  DropStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema + 
      '].[' + ForeignKeys.ForeignTableName + 
      '] DROP CONSTRAINT [' + ForeignKeys.ForeignKeyName + ']; '
,  CreateStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema + 
      '].[' + ForeignKeys.ForeignTableName + 
      '] WITH CHECK ADD CONSTRAINT [' +  ForeignKeys.ForeignKeyName + 
      '] FOREIGN KEY([' + ForeignKeys.ForeignTableColumn + 
      ']) REFERENCES [' + schema_name(sys.objects.schema_id) + '].[' +
  sys.objects.[name] + ']([' +
  sys.columns.[name] + ']) ON DELETE CASCADE; '
 from sys.objects
  inner join sys.columns
    on (sys.columns.[object_id] = sys.objects.[object_id])
  inner join (
    select sys.foreign_keys.[name] as ForeignKeyName
     ,schema_name(sys.objects.schema_id) as ForeignTableSchema
     ,sys.objects.[name] as ForeignTableName
     ,sys.columns.[name]  as ForeignTableColumn
     ,sys.foreign_keys.referenced_object_id as referenced_object_id
     ,sys.foreign_key_columns.referenced_column_id as referenced_column_id
     from sys.foreign_keys
      inner join sys.foreign_key_columns
        on (sys.foreign_key_columns.constraint_object_id
          = sys.foreign_keys.[object_id])
      inner join sys.objects
        on (sys.objects.[object_id]
          = sys.foreign_keys.parent_object_id)
        inner join sys.columns
          on (sys.columns.[object_id]
            = sys.objects.[object_id])
           and (sys.columns.column_id
            = sys.foreign_key_columns.parent_column_id)
    ) ForeignKeys
    on (ForeignKeys.referenced_object_id = sys.objects.[object_id])
     and (ForeignKeys.referenced_column_id = sys.columns.column_id)
 where (sys.objects.[type] = 'U')
  and (sys.objects.[name] not in ('sysdiagrams')) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-08T15:10:36.173

[Andomar's answer](https://stackoverflow.com/a/871124/1501497) above is good but works for single-column foreign key constraints only. I adapted it a little for multi-column constraints:

```
create function dbo.fk_columns (@constraint_object_id int)
returns varchar(255)
as begin
declare @r varchar(255)
select @r = coalesce(@r + ',', '') + c.name
from sys.foreign_key_columns fkc
join sys.columns c
  on  fkc.parent_object_id = c.object_id
  and fkc.parent_column_id = c.column_id
where fkc.constraint_object_id = @constraint_object_id
return @r
end

select distinct
  DropStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema +
      '].[' + ForeignKeys.ForeignTableName +
      '] DROP CONSTRAINT [' + ForeignKeys.ForeignKeyName + '] '
,  CreateStmt = 'ALTER TABLE [' + ForeignKeys.ForeignTableSchema +
  '].[' + ForeignKeys.ForeignTableName +
  '] WITH CHECK ADD CONSTRAINT [' +  ForeignKeys.ForeignKeyName +
  '] FOREIGN KEY(' + dbo.fk_columns(constraint_object_id) + ')' +
  'REFERENCES [' + schema_name(sys.objects.schema_id) + '].[' +
  sys.objects.[name] + '] '
  + ' ON DELETE CASCADE'
 from sys.objects
  inner join sys.columns
    on (sys.columns.[object_id] = sys.objects.[object_id])
  inner join (
select sys.foreign_keys.[name] as ForeignKeyName
 ,schema_name(sys.objects.schema_id) as ForeignTableSchema
 ,sys.objects.[name] as ForeignTableName
 ,sys.columns.[name]  as ForeignTableColumn
 ,sys.foreign_keys.referenced_object_id as referenced_object_id
 ,sys.foreign_key_columns.referenced_column_id as referenced_column_id
 ,sys.foreign_keys.object_id as constraint_object_id
 from sys.foreign_keys
  inner join sys.foreign_key_columns
    on (sys.foreign_key_columns.constraint_object_id
      = sys.foreign_keys.[object_id])
  inner join sys.objects
    on (sys.objects.[object_id]
      = sys.foreign_keys.parent_object_id)
    inner join sys.columns
      on (sys.columns.[object_id]
        = sys.objects.[object_id])
       and (sys.columns.column_id
        = sys.foreign_key_columns.parent_column_id)
-- Uncomment this if you want to include only FKs that already
-- have a cascade constraint.
--       where (delete_referential_action_desc = 'CASCADE' or update_referential_action_desc = 'CASCADE')
) ForeignKeys
on (ForeignKeys.referenced_object_id = sys.objects.[object_id])
 and (ForeignKeys.referenced_column_id = sys.columns.column_id)
 where (sys.objects.[type] = 'U')
  and (sys.objects.[name] not in ('sysdiagrams')) 
```

You can also use the query to help *remove* `ON DELETE CASCADE` from FKs that currently have it.

This still doesn't handle the case where the columns are named different things in the two tables - another user-defined function would need to be defined for that.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-03-26T15:40:21.020

More Standards compliant solution:

```
;WITH CTE AS 
(
    SELECT  
         KCU1.CONSTRAINT_NAME AS FK_CONSTRAINT_NAME 
        ,KCU1.TABLE_SCHEMA AS FK_SCHEMA_NAME 
        ,KCU1.TABLE_NAME AS FK_TABLE_NAME 
        ,KCU1.COLUMN_NAME AS FK_COLUMN_NAME 
        ,KCU1.ORDINAL_POSITION AS FK_ORDINAL_POSITION 
        ,KCU2.CONSTRAINT_NAME AS REFERENCED_CONSTRAINT_NAME 
        ,KCU2.TABLE_SCHEMA AS REFERENCED_SCHEMA_NAME 
        ,KCU2.TABLE_NAME AS REFERENCED_TABLE_NAME 
        ,KCU2.COLUMN_NAME AS REFERENCED_COLUMN_NAME 
        ,KCU2.ORDINAL_POSITION AS REFERENCED_ORDINAL_POSITION 
    FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS RC 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU1 
        ON KCU1.CONSTRAINT_CATALOG = RC.CONSTRAINT_CATALOG  
        AND KCU1.CONSTRAINT_SCHEMA = RC.CONSTRAINT_SCHEMA 
        AND KCU1.CONSTRAINT_NAME = RC.CONSTRAINT_NAME 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU2 
        ON KCU2.CONSTRAINT_CATALOG = RC.UNIQUE_CONSTRAINT_CATALOG  
        AND KCU2.CONSTRAINT_SCHEMA = RC.UNIQUE_CONSTRAINT_SCHEMA 
        AND KCU2.CONSTRAINT_NAME = RC.UNIQUE_CONSTRAINT_NAME 
        AND KCU2.ORDINAL_POSITION = KCU1.ORDINAL_POSITION 
)

SELECT 
     FK_CONSTRAINT_NAME
    --,FK_SCHEMA_NAME
    --,FK_TABLE_NAME
    --,FK_COLUMN_NAME
    --,FK_ORDINAL_POSITION
    --,REFERENCED_CONSTRAINT_NAME
    --,REFERENCED_SCHEMA_NAME
    --,REFERENCED_TABLE_NAME
    --,REFERENCED_COLUMN_NAME
    --,REFERENCED_ORDINAL_POSITION

    ,
        'ALTER TABLE [' + FK_SCHEMA_NAME + ']' 
        + '.[' + FK_TABLE_NAME + '] ' 
        + 'DROP CONSTRAINT [' + FK_CONSTRAINT_NAME + ']; ' 
    AS DropStmt 

    ,
    'ALTER TABLE [' + FK_SCHEMA_NAME + ']' 
        + '.[' + FK_TABLE_NAME + '] ' + 
        + 'WITH CHECK ADD CONSTRAINT [' +  FK_CONSTRAINT_NAME + '] ' 
        + 'FOREIGN KEY([' + FK_COLUMN_NAME + ']) ' 
        + 'REFERENCES [' + REFERENCED_SCHEMA_NAME + '].[' + REFERENCED_TABLE_NAME + ']([' + REFERENCED_COLUMN_NAME + ']) ON DELETE CASCADE; ' 
    AS CreateStmt 

FROM CTE 

WHERE (1=1) 
/*
AND FK_TABLE_NAME IN 
(
     'T_SYS_Geschossrechte'
    ,'T_SYS_Gebaeuderechte'
    ,'T_SYS_Standortrechte'
)

AND REFERENCED_TABLE_NAME NOT LIKE 'T_AP_Ref_Mandant'
*/

ORDER BY  
     FK_TABLE_NAME
    ,FK_CONSTRAINT_NAME
    ,FK_COLUMN_NAME
    ,FK_ORDINAL_POSITION
    ,REFERENCED_CONSTRAINT_NAME
    ,REFERENCED_TABLE_NAME
    ,REFERENCED_COLUMN_NAME
    ,REFERENCED_ORDINAL_POSITION 
```

**Edit:**
Extended for multi-column foreign-keys:

```
;WITH CTE AS 
( 
  SELECT  
         KCU1.CONSTRAINT_NAME AS FK_CONSTRAINT_NAME 
        ,KCU1.TABLE_SCHEMA AS FK_SCHEMA_NAME 
        ,KCU1.TABLE_NAME AS FK_TABLE_NAME 
        ,KCU1.COLUMN_NAME AS FK_COLUMN_NAME 
        ,KCU1.ORDINAL_POSITION AS FK_ORDINAL_POSITION 
        ,KCU2.CONSTRAINT_NAME AS REFERENCED_CONSTRAINT_NAME 
        ,KCU2.TABLE_SCHEMA AS REFERENCED_SCHEMA_NAME 
        ,KCU2.TABLE_NAME AS REFERENCED_TABLE_NAME 
        ,KCU2.COLUMN_NAME AS REFERENCED_COLUMN_NAME 
        ,KCU2.ORDINAL_POSITION AS REFERENCED_ORDINAL_POSITION 
    FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS RC 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU1 
        ON KCU1.CONSTRAINT_CATALOG = RC.CONSTRAINT_CATALOG  
        AND KCU1.CONSTRAINT_SCHEMA = RC.CONSTRAINT_SCHEMA 
        AND KCU1.CONSTRAINT_NAME = RC.CONSTRAINT_NAME 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU2 
        ON KCU2.CONSTRAINT_CATALOG = RC.UNIQUE_CONSTRAINT_CATALOG  
        AND KCU2.CONSTRAINT_SCHEMA = RC.UNIQUE_CONSTRAINT_SCHEMA 
        AND KCU2.CONSTRAINT_NAME = RC.UNIQUE_CONSTRAINT_NAME 
        AND KCU2.ORDINAL_POSITION = KCU1.ORDINAL_POSITION 
)
SELECT 
     FK_SCHEMA_NAME
    ,FK_TABLE_NAME
    ,FK_CONSTRAINT_NAME 
    --,FK_COLUMN_NAME
    --,REFERENCED_COLUMN_NAME

    ,
    'ALTER TABLE ' + QUOTENAME(FK_SCHEMA_NAME) + '.' + QUOTENAME(FK_TABLE_NAME) + ' ' 
      + 'DROP CONSTRAINT ' + QUOTENAME(FK_CONSTRAINT_NAME) + '; ' 
    AS DropStmt 

    ,
    'ALTER TABLE ' + QUOTENAME(FK_SCHEMA_NAME) + '.' + QUOTENAME(FK_TABLE_NAME) + ' 
    ADD CONSTRAINT ' + QUOTENAME(FK_CONSTRAINT_NAME) + ' 
    FOREIGN KEY('
    + 
        SUBSTRING 
        ( 
            (
                SELECT ', ' + QUOTENAME(FK.FK_COLUMN_NAME) AS [text()] 
                FROM CTE AS FK 
                WHERE FK.FK_CONSTRAINT_NAME = CTE.FK_CONSTRAINT_NAME
                AND FK.FK_SCHEMA_NAME = CTE.FK_SCHEMA_NAME
                AND FK.FK_TABLE_NAME = CTE.FK_TABLE_NAME 
                ORDER BY FK.FK_ORDINAL_POSITION
                FOR XML PATH, TYPE 
            ).value('.[1]', 'nvarchar(MAX)')
            ,3, 4000
        ) 
    + ') 
'
    + '    REFERENCES ' + QUOTENAME(REFERENCED_SCHEMA_NAME) + '.' + QUOTENAME(REFERENCED_TABLE_NAME) + '(' 
    + SUBSTRING 
      ( 
          (
              SELECT ', ' + QUOTENAME(Referenced.REFERENCED_COLUMN_NAME) AS [text()] 
              FROM CTE AS Referenced 
              WHERE Referenced.FK_CONSTRAINT_NAME = CTE.FK_CONSTRAINT_NAME
              AND Referenced.REFERENCED_SCHEMA_NAME = CTE.REFERENCED_SCHEMA_NAME
              AND Referenced.REFERENCED_TABLE_NAME = CTE.REFERENCED_TABLE_NAME
              ORDER BY Referenced.REFERENCED_ORDINAL_POSITION 
              FOR XML PATH, TYPE 
          ).value('.[1]', 'nvarchar(MAX)')
          , 3, 4000 
      )
    + ') 
    ON DELETE CASCADE 
; ' AS CreateStmt 

FROM CTE 

GROUP BY 
     FK_SCHEMA_NAME
    ,FK_TABLE_NAME
    ,FK_CONSTRAINT_NAME 

    ,REFERENCED_SCHEMA_NAME
    ,REFERENCED_TABLE_NAME 
```

And the far simpler version for PostGreSQL:

```
;WITH CTE AS 
( 
  SELECT  
         KCU1.CONSTRAINT_NAME AS FK_CONSTRAINT_NAME 
        ,KCU1.TABLE_SCHEMA AS FK_SCHEMA_NAME 
        ,KCU1.TABLE_NAME AS FK_TABLE_NAME 
        ,KCU1.COLUMN_NAME AS FK_COLUMN_NAME 
        ,KCU1.ORDINAL_POSITION AS FK_ORDINAL_POSITION 
        ,KCU2.CONSTRAINT_NAME AS REFERENCED_CONSTRAINT_NAME 
        ,KCU2.TABLE_SCHEMA AS REFERENCED_SCHEMA_NAME 
        ,KCU2.TABLE_NAME AS REFERENCED_TABLE_NAME 
        ,KCU2.COLUMN_NAME AS REFERENCED_COLUMN_NAME 
        ,KCU2.ORDINAL_POSITION AS REFERENCED_ORDINAL_POSITION 
    FROM INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS RC 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU1 
        ON KCU1.CONSTRAINT_CATALOG = RC.CONSTRAINT_CATALOG  
        AND KCU1.CONSTRAINT_SCHEMA = RC.CONSTRAINT_SCHEMA 
        AND KCU1.CONSTRAINT_NAME = RC.CONSTRAINT_NAME 

    INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE KCU2 
        ON KCU2.CONSTRAINT_CATALOG = RC.UNIQUE_CONSTRAINT_CATALOG  
        AND KCU2.CONSTRAINT_SCHEMA = RC.UNIQUE_CONSTRAINT_SCHEMA 
        AND KCU2.CONSTRAINT_NAME = RC.UNIQUE_CONSTRAINT_NAME 
        AND KCU2.ORDINAL_POSITION = KCU1.ORDINAL_POSITION 
)
SELECT 
     FK_SCHEMA_NAME
    ,FK_TABLE_NAME
    ,FK_CONSTRAINT_NAME 
    --,FK_COLUMN_NAME
    --,REFERENCED_COLUMN_NAME

    ,
    'ALTER TABLE ' || QUOTE_IDENT(FK_SCHEMA_NAME) || '.' || QUOTE_IDENT(FK_TABLE_NAME) || ' ' 
      || 'DROP CONSTRAINT ' || QUOTE_IDENT(FK_CONSTRAINT_NAME) || '; ' 
    AS DropStmt 

    ,
    'ALTER TABLE ' || QUOTE_IDENT(FK_SCHEMA_NAME) || '.' || QUOTE_IDENT(FK_TABLE_NAME) || ' 
    ADD CONSTRAINT ' || QUOTE_IDENT(FK_CONSTRAINT_NAME) || ' 
    FOREIGN KEY(' || string_agg(FK_COLUMN_NAME, ', ') || ') 
'
    || '    REFERENCES ' || QUOTE_IDENT(REFERENCED_SCHEMA_NAME) || '.' || QUOTE_IDENT(REFERENCED_TABLE_NAME) || '(' || string_agg(REFERENCED_COLUMN_NAME, ', ') || ') 
    ON DELETE CASCADE 
; ' AS CreateStmt 

FROM CTE 

GROUP BY 
     FK_SCHEMA_NAME
    ,FK_TABLE_NAME
    ,FK_CONSTRAINT_NAME 

    ,REFERENCED_SCHEMA_NAME
    ,REFERENCED_TABLE_NAME 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-15T13:26:14.023

您必须更改表，删除 FK 约束并重新创建它们：

这是 db2 语法。SQLServer 应该类似

```
ALTER TABLE emp DROP CONSTRAINT fk_dept;

ALTER TABLE emp ADD CONSTRAINT fk_dept
FOREIGN KEY(dept_no)
REFERENCES dept(deptno)
ON DELETE CASCADE; 
```

您可以编写自己的 sp 来查询系统表中的所有外键，删除它们并重新创建它们。您必须在 sp 中使用动态 sql 来执行此操作，您可以在其中循环 fk defn，将它们放入 varchar 并附加/编辑以包含 CASCADE，然后执行 stmt。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-25T22:16:16.163

The answer from [@Andomar](https://stackoverflow.com/a/871124/1501497) worked for me but it was a bit manual - you have to run it, then copy the results and run them. I needed to use this as part of my automated test setup so needed it to run in one query automatically.

I have come up with the following which gets all the SQL to run in order to modify the foreign key constraints, then actually runs it all in one go:

```
 IF Object_id('tempdb..#queriesForContraints') IS NOT NULL 
      BEGIN 
          DROP TABLE #queriesForContraints
      END 

    DECLARE @ignoreTablesCommaSeparated VARCHAR(1000)

    SELECT 'ALTER TABLE [' 
           + ForeignKeys.foreigntableschema + '].[' 
           + ForeignKeys.foreigntablename 
           + '] DROP CONSTRAINT [' 
           + ForeignKeys.foreignkeyname + ']; ' 
           + 'ALTER TABLE [' 
           + ForeignKeys.foreigntableschema + '].[' 
           + ForeignKeys.foreigntablename 
           + '] WITH CHECK ADD CONSTRAINT [' 
           + ForeignKeys.foreignkeyname 
           + '] FOREIGN KEY([' 
           + ForeignKeys.foreigntablecolumn 
           + ']) REFERENCES [' 
           + Schema_name(sys.objects.schema_id) + '].[' 
           + sys.objects.[name] + ']([' 
           + sys.columns.[name] 
           + ']) ON DELETE CASCADE; ' AS query
    INTO #queriesForContraints
    FROM   sys.objects 
           INNER JOIN sys.columns 
                   ON ( sys.columns.[object_id] = sys.objects.[object_id] ) 
           INNER JOIN (SELECT sys.foreign_keys.[name]                      AS 
                              ForeignKeyName, 
                              Schema_name(sys.objects.schema_id)           AS 
                  ForeignTableSchema, 
                              sys.objects.[name]                           AS 
                  ForeignTableName, 
                              sys.columns.[name]                           AS 
                  ForeignTableColumn, 
                              sys.foreign_keys.referenced_object_id        AS 
                  referenced_object_id, 
                              sys.foreign_key_columns.referenced_column_id AS 
                  referenced_column_id 
                       FROM   sys.foreign_keys 
                              INNER JOIN sys.foreign_key_columns 
                                      ON ( 
                              sys.foreign_key_columns.constraint_object_id = 
                              sys.foreign_keys.[object_id] ) 
                              INNER JOIN sys.objects 
                                      ON ( sys.objects.[object_id] = 
                                         sys.foreign_keys.parent_object_id ) 
                              INNER JOIN sys.columns 
                                      ON ( sys.columns.[object_id] = 
                                           sys.objects.[object_id] ) 
                                         AND ( sys.columns.column_id = 
    sys.foreign_key_columns.parent_column_id )) 
    ForeignKeys 
    ON ( ForeignKeys.referenced_object_id = sys.objects.[object_id] ) 
    AND ( ForeignKeys.referenced_column_id = sys.columns.column_id ) 
    WHERE  ( sys.objects.[type] = 'U' ) 
           AND ( sys.objects.[name] NOT IN ( 
                'sysdiagrams' --add more comma separated table names here if required
            ) ) 

    DECLARE @queryToRun NVARCHAR(MAX)

    SELECT  @queryToRun = STUFF(
            (SELECT query + ''
             FROM #queriesForContraints
             FOR XML PATH (''))
         , 1, 0, '')

    EXEC sp_executesql @statement = @queryToRun

    IF Object_id('tempdb..#queriesForContraints') IS NOT NULL 
      BEGIN 
          DROP TABLE #queriesForContraints
      END 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-22T18:21:52.473

A simple solution I found is to export the database to a single file, use the search function to replace all the NO ACTION to CASCADE, drop the database and import the edited file.

Information changed on the database between the export and import will be lost.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-15T13:33:46.110

make a new stored procedure, where the only parameter is the name of the table to process. In that procedure, you'll need to loop over sys.foreign_keys and sys.foreign_key_columns to build the proper drop and create syntax, just use a cursor and some prints (KISS).

call this procedure with the syntax:

```
EXEC sp_msforeachtable 'YourProcedureName ''?''' 
```

and it will run for each table. Take and run the output, and you are done.

# asp.net-mvc - asp.net mvc findpartialview 性能

> ID：868622
> 
> 赞同：0
> 
> 时间：2009-05-15T13:17:28.023
> 
> 标签：asp.net-mvc

我有一个 ASP.NET MVC 应用程序，它使用 Phil Haack[在这里](http://haacked.com/archive/2008/11/04/areas-in-aspnetmvc.aspx)提出的 AreaViewEngine 。它工作正常，但应用程序似乎有点迟钝，所以我正在使用 dotTrace 进行一些分析。我将应用程序推送到我们的开发服务器，在 web.config 中将调试标志更改为 false（编译调试 =“false”），启动分析器，并使用 jmeter 生成几千次点击。我发现的内容如下：

[![替代文字](https://i.stack.imgur.com/fcFGn.jpg)](https://i.stack.imgur.com/fcFGn.jpg)

请注意 VirtualPathProviderViewEngine.FindPartialView 如何花费了 320 秒。我无法进一步深入了解导致问题的底层代码，但我怀疑它与[此处](http://codeclimber.net.nz/archive/2009/04/22/how-to-improve-htmlhelper.renderpartial-performances-donrsquot-run-in-debug-mode.aspx)提到的问题有关。

该博客特别指出，在发布模式下运行会导致视图路径解析被缓存，但似乎并非如此（或者如果是这样，那么 FindPartialView 函数中的其他东西会花费大量时间。

有什么想法吗？

**编辑：**

我从来没有找到问题的原因，但我最终下载了 1.0 版的 MVC 源代码，它工作正常。必须是可安装二进制文件与 v1.0 的源代码之间存在差异。或者我的安装有些麻烦（尽管问题在多台机器上表现出来）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T16:51:58.913

当您使用 RenderPartial() 或 View() 时，您可以做的一件事来帮助提高性能，即以无需搜索的方式返回视图的路径。当您只提供文件名时，它必须确定它只是一个文件名，然后在文件夹列表中搜索视图。

# sql-server - SQL 视图数据未正确更新

> ID：868623
> 
> 赞同：1
> 
> 时间：2009-05-15T13:18:07.693
> 
> 标签：sql-server, linq-to-sql

我有两张桌子（Knicks 和 Knacks）和一个连接这两张桌子的视图（PaddyWhacks）。这些表具有以下字段：

```
Knicks.key, Knicks.data1

Knacks.fkey, Knacks.data2 
```

所以视图包含：

```
PaddyWhacks.key, PaddyWhacks.data1, PaddyWhacks.data2 
```

我正在使用 LINQ to SQL 以 IQueryable 形式检索完整视图，一切看起来都很好。在此之后，我从尼克斯抢了一行并更新了它：

```
Knick k = db.Knicks.Single(row => row.data1 == 5);
k.data1 = 6;
db.SubmitChanges(); 
```

我知道更新是正确的，因为如果我对数据 1 == 5 的尼克斯队执行 Count()，结果已经改变（我可以窥视数据库内部并看到变化）。但是，如果我再次使用以下方法检索 Paddywhacks：

```
IQueryable<PaddyWhack> rows = from row in db.PaddyWhacks select row; 
```

对应的data1值还是5。

该应用程序在托管的 Web 服务器上运行，如果我等待足够长的时间并回来重试，我将在 IQueryable 视图中看到更新后的值。我猜有些东西被缓存了，也许 LINQ 不会一直回到数据库来再次获取数据。是否有我需要注意的 LINQ 或 SQL Server 功能来解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T18:00:32.710

我不使用 linqtosql，但你是正确的，有些东西在缓存中。视图只是一个“宏”查询，数据是来自原始表的数据，因此它始终是最新的。我会尝试使用与 IQueryable() 不同的函数或创建新连接然后运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-19T08:28:15.260

您可以尝试像这样刷新 DataContext：

```
dc.Refresh(System.Data.Linq.RefreshMode.OverwriteCurrentValues, rows); 
```

# c# - 使用 C# .NET 访问 Oracle 多维数据集中的 OLAP 数据？

> ID：868629
> 
> 赞同：0
> 
> 时间：2009-05-15T13:18:40.953
> 
> 标签：c#, oracle, olap, cube

我是 ORACLE 的新手。我想使用 C# 访问 Oracle 中的 OLAP 多维数据集。您能否提出有效的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-07-20T10:05:30.257

可以使用 OLAP_TABLE 函数[OLAP_TABLE 语法](http://download.oracle.com/docs/cd/E11882_01/olap.112/e17122/dml_app_sqlfunc001.htm#i82152)通过 SQL 访问 Oracle OLAP 选项多维数据集 这需要详细了解多维数据集结构以及用于管理 OLAP 多维数据集的[OLAP DML语言。](http://download.oracle.com/docs/cd/E11882_01/olap.112/e17122/toc.htm#BEGIN)该系统基本上是 嵌入在 Oracle 数据库服务器中的旧[IRI / Oracle Express系统和语言。](http://www.orafaq.com/wiki/Express)

因为它是用于提取数据视图的标准 SQL，所以可以定义它来处理服务器上的 OLAP_TABLE 功能。

[dbms_aw](http://download.oracle.com/docs/cd/E11882_01/olap.112/e17122/dml_app_dbms_aw.htm#OLADM946) PLSQL 包提供了使用 OLAP 多维数据集执行语句和程序的函数和过程。它还提供了维护和构建多维数据集的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T16:05:20.787

好的，现在我找到了 Oracle 提供的一个库：[Oracle Data Provider for .NET](http://www.oracle.com/technology/tech/windows/odpnet/index.html)，它*可能*有助于从 Oracle Cubes 访问 OLAP 数据。

有什么提示吗？

# c# - 组合框上的受限自动完成

> ID：868632
> 
> 赞同：2
> 
> 时间：2009-05-15T13:19:19.953
> 
> 标签：c#, .net-3.5, user-interface, combobox

我有一个组合框，我不希望用户也添加新数据，但我也想让他们输入他们想要选择的对象的标题。

目前我正在使用这段代码：

```
 protected virtual void comboBoxAutoComplete_KeyPress(object sender, KeyPressEventArgs e) {
        if (Char.IsControl(e.KeyChar)) {
            //let it go if it's a control char such as escape, tab, backspace, enter...
            return;
        }
        ComboBox box = ((ComboBox)sender);

        //must get the selected portion only. Otherwise, we append the e.KeyChar to the AutoSuggested value (i.e. we'd never get anywhere)
        string nonSelected = box.Text.Substring(0, box.Text.Length - box.SelectionLength);

        string text = nonSelected + e.KeyChar;
        bool matched = false;
        for (int i = 0; i < box.Items.Count; i++) {
            if (((DataRowView)box.Items[i])[box.DisplayMember].ToString().StartsWith(text, true, null)) {
                //box.SelectedItem = box.Items[i];
                matched = true;
                break;
            }
        }

        //toggle the matched bool because if we set handled to true, it precent's input, and we don't want to prevent
        //input if it's matched.
        e.Handled = !matched;
    } 
```

它适用于任何使用绑定到数据库的数据的组合框，并且不区分大小写。但是，如果用户在错误的情况下输入了某些内容，然后从组合框中跳出选项卡，则组合框的选定值仍为 -1（或任何先前的值）。这不是我想要的行为，我希望它将值设置为当前对用户绑定的最佳猜测，即自动完成选项。

如果您在 for 循环中看到注释掉的行，我已经尝试过了。那是行不通的。
**它做了这样的事情：**
我有字段“租金”，值为 53
我输入 'r'
我得到结果 'rRent'组合框。SelectedValue
返回 -1

**它目前的作用：**
我有字段“租金”，值为 53
我输入“r”
自动完成建议“租金”
这是正确的值，所以我继续前进，组合框失去焦点组合框
显示“租金”
组合框。SelectedValue 返回 - 1

**我想要什么：**
我有值为 53 的字段“Rent”
我输入“r”
组合框失去焦点，它填充“租金”（即使它的大小写不正确[已经这样做]）
combobox.SelectedValue现在应该返回 53

我认为设置 box.SelectedValue 可能会更好，但我无法弄清楚如何做到这一点，至少以高级抽象的方式，如果我知道组合框是如何使用 ValueMemeber 和 Display 成员完成的，我会复制它，但我不知道不。

有人对如何解决此错误有任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T13:48:08.387

可能是错误的树，但是您是否尝试过在组合框上启用自动完成？

```
comboBox.AutoCompleteMode = AutoCompleteMode.SuggestAppend;
comboBox.AutoCompleteSource = AutoCompleteSource.ListItems;
comboBox.DropDownStyle = ComboBoxStyle.DropDownList; 
```

最后一行将限制输入到列表中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:56:32.767

看起来我别无选择，只能在 LeaveFocus 事件中这样做，这可以解决问题：

```
 protected void autocomplete_LeaveFocus(object sender, EventArgs e) {
        ComboBox box = ((ComboBox)sender);
        String selectedValueText = box.Text;

        //search and locate the selected value case insensitivly and set it as the selected value
        for (int i = 0; i < box.Items.Count; i++) {
            if (((DataRowView)box.Items[i])[box.DisplayMember].ToString().Equals(selectedValueText, StringComparison.InvariantCultureIgnoreCase)) {
                box.SelectedItem = box.Items[i];
                break;
            }
        }
    } 
```

# wxwidgets - wxToolBar 带有动态大小的按钮

> ID：868637
> 
> 赞同：2
> 
> 时间：2009-05-15T13:20:44.817
> 
> 标签：wxwidgets

我的应用程序（仅限 Microsoft Windows）正在使用带有`wxTB_HORIZONTAL|wxTB_TEXT|wxTB_HORZ_LAYOUT`标志的 wxToolBar。它的所有按钮/工具都具有相同的宽度，这是基于最长的文本。

我想要不同宽度的按钮，具体取决于工具标签的长度，就像 Windows 原生工具栏按钮（使用`BTNS_AUTOSIZE`样式创建）一样。

有没有办法让 wxToolBar 带有动态计算宽度的按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T18:45:29.060

我假设你想要这个用于 MS Windows，因为你提到了*BTNS_AUTOSIZE*风格。

*使用wxToolBar*样式或*AddTool()*的参数无法做到这一点。我尝试过使用 wxMSW，实现自动调整按钮大小的唯一方法（我能找到）是通过更改*src/msw/tbar95.cpp中的**wxToolBar::Realize()*方法（src */* msw/toolbar.cpp在wxWidgets trunk) 在添加按钮的地方添加*BTNS_AUTOSIZE样式。*这是一个虚拟方法，因此您始终可以创建自己的降序工具栏类，复制*Realize()*方法并对其进行更改。

 ***# .net - 如何将巨大（但简单）的分层 XML 文件加载到 SQL 表中

> ID：868647
> 
> 赞同：4
> 
> 时间：2009-05-15T13:23:46.183
> 
> 标签：.net, sql, sql-server, xml, sql-server-2008

我有一个非常大（2.5GB，5500 万节点）的 XML 文件，格式如下：

```
<TopNode>
    <Item id = "Something">
         <Link>A link</Link>
         <Link>Another link</Link>
         <Link>One More Link</Link>
    </Item>
    <Item id = "Something else">
         <Link>Some link</Link>
         <Link>You get the idea</Link>
    </Item>
  </TopNode> 
```

我想将其展平为以下 SQL 表：

```
 -----------------------------------------
 |  Item          |          Link        |
 -----------------------------------------
 | Something      |  A link              |
 | Something      |  Another link        |
 | Something      |  One More Link       |
 | Something Else |  Some Link           |
 | Something Else |  You get the idea    |
 |----------------|----------------------| 
```

我正在使用 SQL2008，如果这有所作为。

从 A 点到 B 点的最简单、最有效的方法（最好使用 SQL Server/.NET 堆栈）是什么，请记住所涉及文件的大小？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T13:31:12.107

我会使用[XML Bulk Load](http://msdn.microsoft.com/en-us/library/aa225763(SQL.80).aspx)。这是一个很好的方法，因为它不会一次读取整个文档，而是流式传输。它也非常快，并且可以满足您坚持使用基于 SQL Server 的工具的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:25:21.653

看看奥斯陆/米。

# objective-c - 如何制作一组常量，以提高我的方法的可用性？

> ID：868648
> 
> 赞同：1
> 
> 时间：2009-05-15T13:23:54.670
> 
> 标签：objective-c, cocoa, cocoa-touch

我写了一个方法来做一些图形计算。在那里，您可以指定一个起始方向，如“从左”、“从右”、“从底部”、“从顶部”。

现在我不希望我的方法的用户传递令人困惑的值，如 1、2、3 或 4 甚至字符串。没有那样的事。相反，我想创建如下常量：

kFromLeft、kFromRight、kFromTop、kFromBottom

我在 Apple 头文件中看到了这一点：

```
enum CGImageAlphaInfo {
    kCGImageAlphaNone,              
    kCGImageAlphaPremultipliedLast,  
    kCGImageAlphaPremultipliedFirst, 
    kCGImageAlphaLast,               
    kCGImageAlphaFirst,              
    kCGImageAlphaNoneSkipLast,       
    kCGImageAlphaNoneSkipFirst,     
    kCGImageAlphaOnly                
};
typedef enum CGImageAlphaInfo CGImageAlphaInfo; 
```

我在这里不明白/不清楚的五件事：

1) 为什么用分号将定义与 typedef 分开？

2）为什么他们像鹦鹉一样重复CGImageAlphaInfo？

3）如果我在我的头文件中放这样的东西，我会在我的方法中说参数的类型是CGImageAlphaInfo（当然我会有不同的名字），对吧？

4) 我通常会以这样的方式指定这些常量的值？（例子）：

```
#define kCGImageAlphaNone 100
#define kCGImageAlphaPremultipliedLast 300
#define kCGImageAlphaPremultipliedFirst 900 
```

5) 我是否需要将这些常量设置为如此愚蠢的值？或者我可以在我的方法中检查传入的常量，比如

```
if(paramConst == kCGImageAlphaNone) {...} 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T13:34:23.257

1) 分号总是终止`enum`语句。在这种情况下，有两个单独的语句：一个定义命名枚举，下一个定义一个新类型。

2) enum 语句创建了一个名为“ `enum CGImageAlphaInfo`”的新类型。但是到处输入这个很麻烦，所以使用了 typedef 语句。typedef 语句的工作方式如下：

`typedef <sometype> <newname>;`

`enum CGImageAlphaInfo`旧类型也是如此`CGImageAlphaInfo`，新名称也是如此。Apple 对两者使用相同的名称，这有点令人困惑，但确实是最好的方法。

3) 对。

4）您可以这样做，但是您必须手动分配常量值；枚举值是自动分配的。但是，主要的好处是您可以进行一些类型检查，因为您可以使用`CGImageAlphaInfo`类型而不是简单的 int，后者可以更容易地分配无效值。

5）我不确定你所说的“愚蠢的价值观”是什么意思。但是，是的，您应该始终以您描述的方式检查使用名称，并且永远不要使用诸如“300”或“1”之类的原始值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T13:33:33.040

1) 需要一个分号来结束`enum`定义。

2)`CGImageAlphaInfo`是枚举的名称和定义类型的名称。

3) 对。

4) 使用`#define`for 常量通常被认为是过时的 C 编程风格。在 an 中声明常量`enum`为静态分析器提供了比预处理器宏更多的信息。

5）您应该使用符号，而不是数字文字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T13:35:47.307

使用枚举而不是预处理器定义是处理此问题的最佳方法。例如，

```
typedef enum
{
    FromTop = 0,
    FromBottom = 1,
    FromLeft = 2,
    FromRight = 3
} GraphicsLocation; 
```

把它放在一个 Constants.h 文件中并在需要的地方导入它。您实际上不需要包含 =1、=2...，尽管如果您需要指定要在其他地方使用的实际数值（例如，如果您在 Interface 中设置菜单项的 tag 属性），这很有用建设者）。

我总是这样声明枚举，而不是您在上面发布的 Apple 示例。也许更熟悉 c 的人可以发表评论来解释差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T13:29:03.173

enum 代表[枚举类型](http://en.wikipedia.org/wiki/Enumerated_type)。

这是一个带有内联定义的普通类型声明，它的末尾有一个分号在语法上是正确的。

不知道重复，可能更熟悉Objective-C的这种选择的人可以回答这个问题。

类型确实应该是 CGImageAlphaInfo。

好吧，通常是相对的，在这种情况下，为此使用枚举是很正常的。

在 Java 中，您可以通过检查参数是否与枚举符号相等来执行此操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T13:35:25.857

你不清楚的地方：

1）因为枚举的声明与类型的声明是分开的。在示例代码中，程序员首先声明枚举，然后声明新类型以使用该枚举。

2）如果你用（语法不正确的）引号来查看它可能会更容易：`typedef "enum CGImageAlphaInfo" CGImageAlphaInfo`. 您将类型定义`CGImageAlphaInfo`为与枚举相同。

3) 正确。

4）你的`#define`方法可以正常工作。基本上，枚举只是进行这种常量定义的另一种方式，但它们是由您的编译套件完成的，而不是让您选择分配给每个名称的常量。枚举中的每个值都可以保证与其他值不同，而无需您进行确认。必要时还会对它们进行错误检查。

# http - 什么字节 [] 结束 HTTP 服务器响应？

> ID：868649
> 
> 赞同：2
> 
> 时间：2009-05-15T13:24:02.843
> 
> 标签：http, response, httpwebresponse

您发送什么字节/字节来结束 HTTP 服务器响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:26:29.420

没有标记——相反，在 HTTP 响应标头中有一个 Content-Length 字段描述响应主体的长度

如果您有兴趣检查和学习 HTTP 协议，我会在[http://www.fiddler2.com/fiddler2/下载工具 Fiddler](http://www.fiddler2.com/fiddler2/)

然后，您可以“在幕后”查看当您访问网页并查看请求和响应文本时发生的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T13:32:14.993

没有这样的字节。任何一方都可以终止连接。

有可选的 Content-Length 标头，但它是客户端了解响应大小的一种提示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T13:28:05.440

来自[RFC 2616](http://www.faqs.org/rfcs/rfc2616.html) (HTTP 1.1)

> HTTP/1.1 将序列 CR LF 定义为除实体主体之外的所有协议元素的行尾标记（有关宽容的应用程序，请参见附录 19.3）。实体主体内的行尾标记由其关联的媒体类型定义，如 3.7 节所述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T13:53:05.457

响应长度由关闭连接 (HTTP/1.0)、Content-Length 响应标头或使用 Chunked Encoding 确定。

请参阅[HTTPbis，第 1 部分，第 4.4 节](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-06.html#rfc.section.4.4)。

# sql-server - SQL 服务器

> ID：868650
> 
> 赞同：0
> 
> 时间：2009-05-15T13:24:15.103
> 
> 标签：sql-server

大家好，我拍摄了数据库快照。然后，如果我进行更改，那么这些更改将反映基本数据库还是快照数据库？

当我拍摄数据库快照时，它会创建另一个数据库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T13:30:21.113

我想你可能误解了这里发生的事情。拍摄快照的目的是您可以回滚对该快照的所有更改。

这类似于您在妻子年轻时为她拍摄快照。随着年龄的增长，她会出现皱纹、白发等，但快照不会改变。这里的主要例外是你不能让你的妻子回到她在快照中的样子。好吧，无论如何也不是没有很多钱。它总是代表她在你拍摄快照的那一刻。

因此，您可以随心所欲地更改数据库，并且不会影响该快照

它不会创建另一个数据库，而是在您拍摄快照的确切时刻表示该数据库的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:36:09.570

在拍摄快照后进行更改时，这些更改会反映在基本数据库中，但不会反映在快照数据库中。

拍摄数据库快照时，它不会创建新数据库。它只创建一个sparce 文件，该文件仅存储您在拍摄快照后更新的那些页面。可以从[这里获得有关数据库快照如何工作的更多信息](http://msdn.microsoft.com/en-us/library/ms187054.aspx)

# java - Java中的多行工具提示？

> ID：868651
> 
> 赞同：110
> 
> 时间：2009-05-15T13:24:50.593
> 
> 标签：java, swing, tooltip

我正在尝试在 Java 中显示可能是也可能不是段落长度的工具提示。如何自动换行长工具提示？

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2009-05-15T13:35:01.053

如果将工具提示包装在`<html>`和`</html>`标签中，则可以用`<br>`标签换行。有关示例和讨论，请参见[https://web.archive.org/web/20060625031340/http://www.jguru.com/faq/view.jsp?EID=10653](https://web.archive.org/web/20060625031340/http://www.jguru.com/faq/view.jsp?EID=10653)。该讨论的主要内容：`fButton.setToolTipText("<html><font face=\"sansserif\" color=\"green\">first line<br>second line</font></html>");`

或者您可以使用可以在网上很多地方找到的 JMultiLineToolTip 类，包括 [https://github.com/ls-cwi/yoshiko-app/blob/master/src/main/java/com/yoshiko/internal/查看/JMultiLineToolTip.java](https://github.com/ls-cwi/yoshiko-app/blob/master/src/main/java/com/yoshiko/internal/view/JMultiLineToolTip.java)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-05-15T13:38:25.867

以“”开头的工具提示文本`<html>`将被视为 HTML。当然，这可能是非常宽的 HTML。

您可以覆盖[JComponent.createTooltip](http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#createToolTip())以将工具提示替换为您自己的组件，该组件可以显示您喜欢的任何内容。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-06-09T10:19:05.263

我知道这个已经很老了，但我找到了一个使用 HTML 代码的非常简单的解决方案！

只需使用固定宽度的 HTML 段落：

```
setToolTipText("<html><p width=\"500\">" +value+"</p></html>"); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-20T14:14:42.103

例子：

```
jTextField1.setToolTipText("<html>"
                              + "Line One"
                              +"<br>"
                              + "Line 2"
                         + "</html>"); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2009-05-15T13:35:09.633

使用 HTML 工具提示并手动换行（应该使用具有固定行长度的简单单词标记器来完成）。只需确保您的工具提示文本以“<HTML>”开头。用“<BR/>”或“<P>”换行。我意识到这不是最干净的解决方案，Java 的 HTML 支持也很糟糕，但它应该可以完成任务。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-21T23:23:33.080

这可能会有所改进，但我的方法是在设置工具提示之前调用一个辅助函数，以提供的长度拆分工具提示文本，但在可能的情况下调整为在空间上打断单词。

```
import java.util.ArrayList;
import java.util.List;

/**
 *
 */
public class MultiLineTooltips
{
    private static int DIALOG_TOOLTIP_MAX_SIZE = 75;
    private static final int SPACE_BUFFER = 10;

    public static String splitToolTip(String tip)
    {
        return splitToolTip(tip,DIALOG_TOOLTIP_MAX_SIZE);
    }
    public static String splitToolTip(String tip,int length)
    {
        if(tip.length()<=length + SPACE_BUFFER )
        {
            return tip;
        }

        List<String>  parts = new ArrayList<>();

        int maxLength = 0;
        String overLong = tip.substring(0, length + SPACE_BUFFER);
        int lastSpace = overLong.lastIndexOf(' ');
        if(lastSpace >= length)
        {
            parts.add(tip.substring(0,lastSpace));
            maxLength = lastSpace;
        }
        else
        {
            parts.add(tip.substring(0,length));
            maxLength = length;
        }

        while(maxLength < tip.length())
        {
            if(maxLength + length < tip.length())
            {
                parts.add(tip.substring(maxLength, maxLength + length));
                maxLength+=maxLength+length;
            }
            else
            {
                parts.add(tip.substring(maxLength));
                break;
            }
        }

        StringBuilder  sb = new StringBuilder("<html>");
        for(int i=0;i<parts.size() - 1;i++)
        {
            sb.append(parts.get(i)+"<br>");
        }
        sb.append(parts.get(parts.size() - 1));
        sb.append(("</html>"));
        return sb.toString();
    }
} 
```

使用喜欢

```
jComponent.setToolTipText(MultiLineTooltips.splitToolTip(TOOLTIP)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-15T14:43:26.193

您可以继承作为组件的 JToolTip，并覆盖组件上的 createToolTip()。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-06T00:33:14.227

这是我以前使用过的版本，如果您从 ResourceBundles 加载工具提示，它会很好地工作：

```
import javax.swing.JComponent;
import javax.swing.JToolTip;
import javax.swing.LookAndFeel;
import javax.swing.UIManager;
import javax.swing.plaf.ComponentUI;
import javax.swing.plaf.ToolTipUI;
import java.awt.Dimension;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.util.regex.Pattern;

/**
 * A tooltip that wraps multi-line text.
 */
public final class MultiLineToolTipUI extends ToolTipUI {

    private static final int INSET = 2;

    private static final Pattern LINE_SPLITTER = Pattern.compile("$", Pattern.MULTILINE);

    private static final MultiLineToolTipUI SHARED_INSTANCE = new MultiLineToolTipUI();

    /**
     * Install the multi-line tooltip into the UI manager.
     */
    public static void installUI() {
        String toolTipUI = MultiLineToolTipUI.class.getName();
        UIManager.put("ToolTipUI", toolTipUI);
        UIManager.put(toolTipUI, MultiLineToolTipUI.class);
    }

    @SuppressWarnings("UnusedDeclaration")
    public static ComponentUI createUI(JComponent c) {
        return SHARED_INSTANCE;
    }

    private MultiLineToolTipUI() {}

    @Override
    public Dimension getMaximumSize(JComponent c) {
        return getPreferredSize(c);
    }

    @Override
    public Dimension getMinimumSize(JComponent c) {
        return getPreferredSize(c);
    }

    @Override
    public Dimension getPreferredSize(JComponent c) {
        String[] lines = LINE_SPLITTER.split(((JToolTip) c).getTipText());
        if (lines.length == 0) {
            return new Dimension(2 * INSET, 2 * INSET);
        }
        FontMetrics metrics = c.getFontMetrics(c.getFont());
        Graphics g = c.getGraphics();
        int w = 0;
        for (String line : lines) {
            w = Math.max(w, (int) metrics.getStringBounds(line, g).getWidth());
        }
        int h = lines.length * metrics.getHeight();
        return new Dimension(w + 2 * INSET, h + 2 * INSET);
    }

    @Override
    public void installUI(JComponent c) {
        LookAndFeel.installColorsAndFont(c, "ToolTip.background", "ToolTip.foreground", "ToolTip.font");
        LookAndFeel.installBorder(c, "ToolTip.border");
    }

    @Override
    public void paint(Graphics g, JComponent c) {
        int w = c.getWidth(), h = c.getHeight();
        g.setColor(c.getBackground());
        g.fillRect(0, 0, w, h);
        g.setColor(c.getForeground());
        g.drawRect(0, 0, w, h);
        String[] lines = LINE_SPLITTER.split(((JToolTip) c).getTipText());
        if (lines.length != 0) {
            FontMetrics metrics = c.getFontMetrics(c.getFont());
            int height = metrics.getHeight();
            int y = INSET + metrics.getAscent();
            for (String line : lines) {
                g.drawString(line, INSET, y);
                y += height;
            }
        }
    }

    @Override
    public void uninstallUI(JComponent c) {
        LookAndFeel.uninstallBorder(c);
    }

} 
```

在创建 UI 之前，您可以通过调用此方法来使用它：

```
MultiLineToolTipUI.installUI(); 
```

然后在您的属性文件中插入换行符以根据需要包装您的工具提示。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-17T01:28:48.947

如果您只是添加`<html>`到您的工具提示文本中，它似乎可以工作，直到您`/*...*/`的文本中有或 HTML。使用`<html><pre>`或转义您的文本。我还不得不使用`<font size=3>`它来让它看起来有点像样。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-29T06:34:44.087

`<br>`我创建了一个实用程序类，它使用标签自动将字符串格式化为特定长度。它基于 Paul Taylor 发布的 MultiLineToolTips 类，但其中有一个错误，它会跳过部分字符串，实际上并没有将字符串限制为特定长度。

要使用我的类，只需通过编写调用 splitToolTip 方法，`MultiLineToolTips.splitToolTip(yourString);`或者`MultiLineToolTips.splitToolTip(yourString, maxLength);`如果您想将其拆分为特定的最大长度。这将创建格式良好的工具提示字符串。

```
import java.util.ArrayList;
import java.util.List;

/** A helper class to split strings into a certain length,
 * formatted with html {@literal<br>} tags for multi-line tool tips.
 * Based on the MultiLineToolTips class posted by
 * <a href="https://stackoverflow.com/users/1480018/paul-taylor">Paul Taylor</a>
 * on <a href="https://stackoverflow.com/a/13503677/9567822">Stack Overflow</a>
 * @author <a href="https://stackoverflow.com/users/9567822/andrew-lemaitre?tab=profile">Andrew LeMaitre</a>
 */
public final class MultiLineToolTips {

    /** Private constructor for utility class. */
    private MultiLineToolTips() {
    }

    /** Default max length of the tool tip when split with {@link #splitToolTip(String)}. */
    private static final int DIALOG_TOOLTIP_MAX_SIZE = 75;

    /** A function that splits a string into sections of {@value #DIALOG_TOOLTIP_MAX_SIZE} characters or less.
     * If you want the lines to be shorter or longer call {@link #splitToolTip(String, int)}.
     * @param toolTip The tool tip string to be split
     * @return the tool tip string with HTML formatting to break it into sections of the correct length
     */
    public static String splitToolTip(final String toolTip) {
        return splitToolTip(toolTip, DIALOG_TOOLTIP_MAX_SIZE);
    }

    /**  An overloaded function that splits a tool tip string into sections of a specified length.
     * @param toolTip The tool tip string to be split
     * @param desiredLength The maximum length of the tool tip per line
     * @return The tool tip string with HTML formatting to break it into sections of the correct length
     */
    public static String splitToolTip(final String toolTip, final int desiredLength) {
        if (toolTip.length() <= desiredLength) {
            return toolTip;
        }

        List<String>  parts = new ArrayList<>();
        int stringPosition = 0;

        while (stringPosition < toolTip.length()) {
            if (stringPosition + desiredLength < toolTip.length()) {
                String tipSubstring = toolTip.substring(stringPosition, stringPosition + desiredLength);
                int lastSpace = tipSubstring.lastIndexOf(' ');
                if (lastSpace == -1 || lastSpace == 0) {
                    parts.add(toolTip.substring(stringPosition, stringPosition + desiredLength));
                    stringPosition += desiredLength;
                } else {
                    parts.add(toolTip.substring(stringPosition, stringPosition + lastSpace));
                    stringPosition += lastSpace;
                }
            } else {
                parts.add(toolTip.substring(stringPosition));
                break;
            }
        }

        StringBuilder  sb = new StringBuilder("<html>");
        for (int i = 0; i < parts.size() - 1; i++) {
            sb.append(parts.get(i) + "<br>");
        }
        sb.append(parts.get(parts.size() - 1));
        sb.append(("</html>"));
        return sb.toString();
    }
} 
```

# c# - user.config 损坏

> ID：868653
> 
> 赞同：0
> 
> 时间：2009-05-15T13:25:11.733
> 
> 标签：c#, winforms, profile, corruption, user-config

有人知道“随机” user.config 损坏的原因吗？我在客户的生产线上有一个受此问题影响的 WinForms 应用程序。在网上发现了同样的问题和[解决方法](http://www.codeproject.com/KB/dotnet/CorruptUserConfig.aspx)，但我无法弄清楚，因为它发生了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-07-09T07:23:44.020

你试过了`Properties.Setting.default.reset()`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T11:44:48.840

我不知道为什么会这样，但你并不孤单，伙计！我也尝试了不同的方法来解决这个问题。我用自定义序列化编写了自己的配置处理类。我只能告诉你，它更好，但现在仍然存在。

我最近所做的一项观察是，在我的应用程序运行时重新启动机器（例如由于 Windows 更新）时似乎会发生损坏。

接下来要尝试的是捕获那些关闭事件，并在这种情况下尽量不要写入配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-01T22:01:13.653

主要思想是在应用程序退出时防止保存设置。为此，您需要通过发出 my.setting.save 来保存所有设置。应用程序中有设置退出应用程序时自动保存设置。 [![自动保存设置](https://i.stack.imgur.com/xZcRw.png)](https://i.stack.imgur.com/xZcRw.png) 您也可以添加应用程序启动以检查设置是否已损坏然后删除文件并重新启动应用程序

```
 Try
            Dim a = My.Settings.Language
        Catch ex As System.Configuration.ConfigurationErrorsException
            Dim filename As String = TryCast(ex.InnerException, System.Configuration.ConfigurationErrorsException).Filename
            System.IO.File.Delete(filename)
            MySettings.Default.Reload()
            System.Windows.Forms.Application.Restart()
        End Try 
```

# c# - 如何将复选框作为 dataGridView 的 ColumnHeader

> ID：868654
> 
> 赞同：11
> 
> 时间：2009-05-15T13:25:16.723
> 
> 标签：c#, visual-studio

我正在用 C# VS2005 开发一个窗口应用程序。我有一个 dataGridView，其中第一列有复选框。现在我希望列标题也成为一个复选框，如果我选择列中的所有 Checkboxex 应该被选中。我怎样才能做到这一点。？我提到了[代码项目链接](http://www.codeproject.com/KB/grid/DataGridView_winforms.aspx)

但是，如果我使用它，如果我单击**FirstCell（而不是 Header）**，则下面的所有单元格都会被选中。但我想要列标题中的复选框。我怎样才能做到这一点。？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-07-02T19:54:09.607

我还需要`CheckBox`在列的列标题中有一个`DataGridView`。我是这样做的：

*   创建一个继承自的类`DataGridViewColumnHeaderCell`
*   在内部使用 a`System.Windows.Forms.CheckBox`来存储检查状态并提供 OS 风格的视觉`CheckBox`表示。
*   使用 a`Bitmap`作为缓冲区并`CheckBox`在其上绘制常规（使用`CheckBox.DrawToBitmap`）
*   覆盖`DataGridViewColumnHeaderCell.Paint`并在必要时更新缓冲区，然后再将缓冲区绘制到`Graphics`由`Paint`
*   提供派生的 Checked 属性`DataGridViewColumnHeaderCell`，以及 CheckedChanged 事件
*   填充时替换`DataGridViewColumnHeaderCell`列中的派生值。`HeaderCell``DataGridView`
*   选中和取消选中`CheckBox`当它是单击列标题时，仅当鼠标单击在范围内时`CheckBox`
*   通过监听`CheckedChanged`事件，更新底层数据对象，然后调用`ResetBindings`更新`DataGridView`

这是我写的类，它派生自`DataGridViewColumnHeaderCell`：

```
class DataGridViewCheckBoxColumnHeaderCell : DataGridViewColumnHeaderCell
{
    private Bitmap buffer;
    private CheckBox checkBox;
    private Rectangle checkBoxBounds;

    public DataGridViewCheckBoxColumnHeaderCell()
    {
        this.checkBox = new CheckBox();
    }

    public event EventHandler CheckedChanged;

    public bool Checked
    {
        get 
        { 
            return this.checkBox.Checked; 
        }

        set
        {
            if (!this.Checked == value)
            {
                this.checkBox.Checked = value;
                if (this.buffer != null)
                {
                    this.buffer.Dispose();
                    this.buffer = null;
                }

                this.OnCheckedChanged(EventArgs.Empty);

                if (this.DataGridView != null)
                {
                    this.DataGridView.Refresh();
                }
            }
        }
    }

    protected override void Paint(
        Graphics graphics, 
        Rectangle clipBounds, 
        Rectangle cellBounds, 
        int rowIndex, 
        DataGridViewElementStates dataGridViewElementState, 
        object value, 
        object formattedValue, 
        string errorText, 
        DataGridViewCellStyle cellStyle, 
        DataGridViewAdvancedBorderStyle advancedBorderStyle, 
        DataGridViewPaintParts paintParts)
    {
        // Passing String.Empty in place of 
        // value and formattedValue prevents 
        // this header cell from having text.

        base.Paint(
            graphics, 
            clipBounds, 
            cellBounds, 
            rowIndex, 
            dataGridViewElementState, 
            String.Empty, 
            String.Empty, 
            errorText, 
            cellStyle, 
            advancedBorderStyle, 
            paintParts);

        if (this.buffer == null 
            || cellBounds.Width != this.buffer.Width
            || cellBounds.Height != this.buffer.Height)
        {
            this.UpdateBuffer(cellBounds.Size);
        }

        graphics.DrawImage(this.buffer, cellBounds.Location);
    }

    protected override Size GetPreferredSize(
        Graphics graphics, 
        DataGridViewCellStyle cellStyle, 
        int rowIndex, 
        Size constraintSize)
    {
        return this.checkBox.GetPreferredSize(constraintSize);
    }

    protected override void OnMouseClick(DataGridViewCellMouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left 
            && this.checkBoxBounds.Contains(e.Location))
        {
            this.Checked = !this.Checked;
        }

        base.OnMouseClick(e);
    }

    private void UpdateBuffer(Size size)
    {
        Bitmap updatedBuffer = new Bitmap(size.Width, size.Height);

        this.checkBox.Size = size;

        if (this.checkBox.Size.Width > 0 && this.checkBox.Size.Height > 0)
        {
            Bitmap renderedCheckbox = new Bitmap(
                this.checkBox.Width, 
                this.checkBox.Height);

            this.checkBox.DrawToBitmap(
                renderedCheckbox, 
                new Rectangle(new Point(), this.checkBox.Size));

            MakeTransparent(renderedCheckbox, this.checkBox.BackColor);
            Bitmap croppedRenderedCheckbox = AutoCrop(
                renderedCheckbox, 
                Color.Transparent);

            // TODO implement alignment, right now it is always
            // MiddleCenter regardless of this.Style.Alignment

            this.checkBox.Location = new Point(
                (updatedBuffer.Width - croppedRenderedCheckbox.Width) / 2, 
                (updatedBuffer.Height - croppedRenderedCheckbox.Height) / 2);

            Graphics updatedBufferGraphics = Graphics.FromImage(updatedBuffer);
            updatedBufferGraphics.DrawImage(
                croppedRenderedCheckbox, 
                this.checkBox.Location);

            this.checkBoxBounds = new Rectangle(
                this.checkBox.Location, 
                croppedRenderedCheckbox.Size);

            renderedCheckbox.Dispose();
            croppedRenderedCheckbox.Dispose();
        }

        if (this.buffer != null)
        {
            this.buffer.Dispose();
        }

        this.buffer = updatedBuffer;
    }

    protected virtual void OnCheckedChanged(EventArgs e)
    {
        EventHandler handler = this.CheckedChanged;
        if (handler != null)
        {
            handler(this, e);
        }
    }

    // The methods below are helper methods for manipulating Bitmaps

    private static void MakeTransparent(Bitmap bitmap, Color transparencyMask)
    {
        int transparencyMaskArgb = transparencyMask.ToArgb();
        int transparentArgb = Color.Transparent.ToArgb();

        List deadColumns = new List();

        for (int x = 0; x = 0; x--)
        {
            if (deadColumns.Count == bitmap.Height)
            {
                break;
            }

            for (int y = bitmap.Height - 1; y >= 0; y--)
            {
                if (deadColumns.Contains(y))
                {
                    continue;
                }

                int pixel = bitmap.GetPixel(x, y).ToArgb();

                if (pixel == transparencyMaskArgb)
                {
                    bitmap.SetPixel(x, y, Color.Transparent);
                }
                else if (pixel != transparentArgb)
                {
                    deadColumns.Add(y);
                    break;
                }
            }
        }
    }

    public static Bitmap AutoCrop(Bitmap bitmap, Color backgroundColor)
    {
        Size croppedSize = bitmap.Size;
        Point cropOrigin = new Point();
        int backgroundColorToArgb = backgroundColor.ToArgb();

        for (int x = bitmap.Width - 1; x >= 0; x--)
        {
            bool allPixelsAreBackgroundColor = true;
            for (int y = bitmap.Height - 1; y >= 0; y--)
            {
                if (bitmap.GetPixel(x, y).ToArgb() != backgroundColorToArgb)
                {
                    allPixelsAreBackgroundColor = false;
                    break;
                }
            }

            if (allPixelsAreBackgroundColor)
            {
                croppedSize.Width--;
            }
            else
            {
                break;
            }
        }

        for (int y = bitmap.Height - 1; y >= 0; y--)
        {
            bool allPixelsAreBackgroundColor = true;
            for (int x = bitmap.Width - 1; x >= 0; x--)
            {
                if (bitmap.GetPixel(x, y).ToArgb() != backgroundColorToArgb)
                {
                    allPixelsAreBackgroundColor = false;
                    break;
                }
            }

            if (allPixelsAreBackgroundColor)
            {
                croppedSize.Height--;
            }
            else
            {
                break;
            }
        }

        for (int x = 0; x = 0 && xWhole = 0)
                {
                    bitmapSection.SetPixel(x, y, bitmap.GetPixel(xWhole, yWhole));
                }
                else
                {
                    bitmapSection.SetPixel(x, y, Color.Transparent);
                }
            }
        }

        return bitmapSection;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-01-12T09:15:24.603

上面的解决方案不错，但还有一种更简单的方法！只需添加这两种方法，然后你就会有你想要的！

首先`show_chkBox`在您的代码中添加一个方法并在`onload`表单的函数中或在创建您的之后调用它`DataGridView`：

```
 private void show_chkBox()
 {
     Rectangle rect = dataGridView1.GetCellDisplayRectangle(0, -1, true);
     // set checkbox header to center of header cell. +1 pixel to position 
     rect.Y = 3;
     rect.X = rect.Location.X + (rect.Width/4);
     CheckBox checkboxHeader = new CheckBox();
     checkboxHeader.Name = "checkboxHeader";
     //datagridview[0, 0].ToolTipText = "sdfsdf";
     checkboxHeader.Size = new Size(18, 18);
     checkboxHeader.Location = rect.Location;
     checkboxHeader.CheckedChanged += new EventHandler(checkboxHeader_CheckedChanged);
     dataGridView1.Controls.Add(checkboxHeader);
 } 
```

然后你会在标题中有复选框。

对于选择问题，只需添加以下代码：

```
private void checkboxHeader_CheckedChanged(object sender, EventArgs e)
{             
    CheckBox headerBox = ((CheckBox)dataGridView1.Controls.Find("checkboxHeader", true)[0]);
    int index = 0;
    for (int i = 0; i < dataGridView1.RowCount; i++)
    {
        dataGridView1.Rows[i].Cells[0].Value = headerBox.Checked;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-06T13:00:15.263

如果您选择@Ehsan 解决方案，您必须知道，如果选中复选框单元格，它将不会更新复选框 UI。之后您需要调用 RefreshEdit()。

它仅在控件是 datagridview 的子控件时发生。由于某种原因，当它是子控件时，选定的单元格复选框无法自行刷新 UI。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T13:40:36.060

感谢 Ehsan 提供的简单方法，对我来说很好用。对于问题只有一个CheckBox总是在左上角，我给每个CheckBox加上一个名字后缀就解决了。另外，我想通过直接转换对象发送者来稍微修改事件处理方法，因为它在创建时非常具体（除非此方法也用于处理其他类型的控件事件）。

```
private string[] _colLst = columNameArray;
private void AddCheckBoxGridViewHeader()
{
    for (int ndx = 0; ndx < _colLst.Length; ndx++)
    {
        var rect = dtgv1.GetCellDisplayRectangle(ndx, -1, true);
        var x = rect.X + (rect.Width * 4 / 5);
        var y = 3;
        Rectangle nrect = new Rectangle(x, y, rect.Width, rect.Height);
        CheckBox checkboxHeader = new CheckBox();
        checkboxHeader.BackColor = Color.Transparent;
        checkboxHeader.Name = "checkboxHeader" + ndx;
        checkboxHeader.Size = new Size(18, 18);
        checkboxHeader.Location = nrect.Location;
        checkboxHeader.CheckedChanged += new EventHandler(checkboxHeader_CheckedChanged);
        dtgv1.Controls.Add(checkboxHeader);
    }
}

private void checkboxHeader_CheckedChanged(object sender, EventArgs e)
{
    //CheckBox headerBox = ((CheckBox)dtgv1.Controls.Find("checkboxHeader", true)[0]);

    var headerBox = (CheckBox)sender;
    var b = headerBox.Checked;
    var c = int.Parse(headerBox.Name.Replace("checkboxHeader", ""));
    for (int i = 0; i < dtgv1.RowCount; i++)
    {
        dtgv1.Rows[i].Cells[c].Style = new DataGridViewCellStyle(); 
        dtgv1.Rows[i].Cells[c].Style.BackColor = (b)? Color.Salmon : Color.White;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-18T02:49:56.420

所以 - 为了解决最上面的复选框没有显示为选中（即使它是），我最终编辑了您的事件，如下所示：

private void checkboxHeader_CheckedChanged(object sender, EventArgs e) { //CheckBox headerBox = ((CheckBox)dtgv1.Controls.Find("checkboxHeader", true)[0]);

```
 var headerBox = (CheckBox)sender;
        var b = headerBox.Checked;
        var c = int.Parse(headerBox.Name.Replace("checkboxHeader", ""));
        for (int i = 0; i < dgvSources_fuzzyID.RowCount; i++)
        {
            dgvSources_fuzzyID.Rows[i].Cells[0].Value = headerBox.Checked;
            ***dgvSources_fuzzyID.RefreshEdit();***
        }
    } 
```

这就是最终为我解决的问题...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-26T05:29:09.087

以下是对我有用的解决方案，因为 Ehsaan 的解决方案没有检查`DataGridView`.

调用表单函数中的`AddChkBoxHeader_DataGridView()`方法。`OnLoad`

```
CheckBox checkboxHeader = null;
bool isHeaderCheckBoxClicked = false;
private void AddChkBoxHeader_DataGridView()
{
    Rectangle rect = dgvRecipeSelector.GetCellDisplayRectangle(0, -1, true);
    rect.Y = 10;
    rect.X = rect.Location.X + (rect.Width / 4);            
    checkboxHeader = new CheckBox();
    checkboxHeader.Size = new Size(15,15);
    checkboxHeader.Location = rect.Location;
    dgvRecipeSelector.Controls.Add(checkboxHeader);
    checkboxHeader.MouseClick += new MouseEventHandler(checkboxHeader_CheckedChanged);
}

private void checkboxHeader_CheckedChanged(object sender, EventArgs e)
{            
    HeaderCheckBoxClick((CheckBox)sender);
}

private void HeaderCheckBoxClick(CheckBox headerCheckbox)
{
    isHeaderCheckBoxClicked = true;
    foreach (DataGridViewRow r in dgvRecipeSelector.Rows)
    {
        ((DataGridViewCheckBoxCell)r.Cells[0]).Value = headerCheckbox.Checked;
    }
    dgvRecipeSelector.RefreshEdit();
    isHeaderCheckBoxClicked = false;
} 
```

# xml - xjc 绑定自定义在 jaxb 2.1.3 中不起作用。它适用于 jaxb 2.0

> ID：868658
> 
> 赞同：2
> 
> 时间：2009-05-15T13:25:39.297
> 
> 标签：xml, jaxb, xjc

我在 JDK 1.6.0 中的 jaxb 2.0 中开发了一个绑定自定义文件，它运行良好。

现在我在 JDK 1.6.0_13 中使用 jaxb 2.1.3，它给了我错误：

> 错误 xxx 出现在多个属性中

这就是绑定文件应该通过重命名来处理的内容。

我需要注意 2.0 和 2.1.3 之间发生的事情以及我需要更改的内容。我找遍了近处和远方，无法弄清楚。非常感谢你的帮助。

我正在使用绑定自定义文件，因为该架构有几个属性名称，它们将获得“包罗万象”的属性，因为字段名称由架构的两个不同部分使用。这两个字段称为表达式和断言

解析架构时出现以下错误：

```
[ERROR] Element "assertion" shows up in more than one properties.
line 649 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

[ERROR] The following location is relevant to the above error
line 647 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

[ERROR] Element "expression" shows up in more than one properties.
line 518 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

[ERROR] The following location is relevant to the above error
line 516 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

[ERROR] Element "expression" shows up in more than one properties.
line 522 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

[ERROR] The following location is relevant to the above error
line 516 of file:/D:/jaxb/extract-xjbfix/090403-0_901-Packet-Schema.xsd

Failed to parse a schema. 
```

我的 xjc 命令是：

```
xjc -extension 090403-0_901-Packet-Schema.xsd -b binding.xjb 
```

我的 xjb 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jxb:bindings version="2.0"
          xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
          xmlns:xs="http://www.w3.org/2001/XMLSchema"
          xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
          jxb:extensionBindingPrefixes="xjc" >

<jxb:bindings schemaLocation="090403-0_901-Packet-Schema.xsd" node="/xs:schema">

<jxb:globalBindings>
    <xjc:superClass name="com.pw.ietm.XMLExtract.IetmElement"/>
</jxb:globalBindings>

<jxb:schemaBindings>
     <jxb:package name="com.pw.ietm.XMLExtract"/>
</jxb:schemaBindings>

<!-- Modify Expression because expression is used in two different parts of a schema -->

<jxb:bindings node="//xs:complexType[@name='expression_comtype']/xs:choice/xs:sequence[position()=1]/xs:element[@name='expression'][position()=1]">
    <jxb:property name="expressionFirst"/>
</jxb:bindings>

<jxb:bindings node="//xs:complexType[@name='expression_comtype']/xs:choice/xs:sequence[position()=1]/xs:element[@name='expression'][position()=2]">
    <jxb:property name="expressionSecond"/>
</jxb:bindings>

<jxb:bindings node="//xs:complexType[@name='expression_comtype']/xs:choice/xs:sequence[position()=2]/xs:element[@name='expression']">
    <jxb:property name="expressionAlone"/>
</jxb:bindings>

<!-- Modify Loop-step because assertion is used in two different parts of a schema -->

<jxb:bindings node="//xs:complexType[@name='loop-step_comtype']/xs:sequence/xs:element[@name='assertion'][position()=1]">
    <jxb:property name="assertionInitial"/>
</jxb:bindings>

<jxb:bindings node="//xs:complexType[@name='loop-step_comtype']/xs:sequence/xs:element[@name='assertion'][position()=2]">
    <jxb:property name="assertionChanging"/>
</jxb:bindings>

</jxb:bindings> <!-- schemaLocation="090403-0_901-Packet-Schema.xsd" node="/xs:schema" --> 
```

架构非常大，但这里有 2 个断言和表达式 comtype（这是错误指向的位置）：

```
<xs:complexType name="loop-step_comtype">
<xs:sequence>
<xs:element name="assignment" type="assignment_comtype" minOccurs="0" maxOccurs="unbounded"/>
<xs:element name="assertion" type="**assertion_comtype**" minOccurs="0"/>
<xs:element name="expression" type="expression_comtype"/>
<xs:element name="assertion" type="**assertion_comtype**" minOccurs="0"/>
<xs:element name="step-seq" type="step-seq_comtype"/>
</xs:sequence>
<xs:attributeGroup ref="common_attrgroup"/>
</xs:complexType>

<xs:complexType name="expression_comtype">
<xs:choice>
<xs:sequence>
<xs:element name="expression" type="**expression_comtype**"/>
<xs:group ref="binop_elemgroup"/>
<xs:element name="expression" type="**expression_comtype**"/>
</xs:sequence>
<xs:sequence>
<xs:group ref="unop_elemgroup"/>
<xs:element name="expression" type="**expression_comtype**"/>
</xs:sequence>
<xs:element name="property-libref" type="property-libref_comtype"/>
<xs:group ref="value_elemgroup"/>
</xs:choice>
<xs:attributeGroup ref="common_attrgroup"/>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-31T19:39:02.310

问题实际上是 1.6.0 之后的 java 版本中的错误 请参阅[https://jaxb.dev.java.net/issues/show_bug.cgi?id=642](https://jaxb.dev.java.net/issues/show_bug.cgi?id=642)上的问题 642 问题已解决，但截至 2009 年 8 月 31 日没有将包含该修复程序的发布的目标日期。我会继续使用1.6.0

# c# - 我可以在 ASP.NET MVC 中安全地生成线程吗？

> ID：868666
> 
> 赞同：3
> 
> 时间：2009-05-15T13:26:37.860
> 
> 标签：c#, .net, asp.net-mvc

我有一个计划任务，我需要通过浏览页面来启动，我的虚拟主机不允许我使用 Windows 调度程序。

此任务执行的一项工作是从一堆其他网站获取一些数据，因为网络请求可能很慢，我已将任务设置为使用线程。

从 mvc 操作运行此任务似乎会导致整个网络服务器变得古怪，使其拒绝加载更多页面。

使用来自网络应用程序的线程是不是很糟糕？有没有办法让我安全地做到这一点？有哪些线程限制？我真的只需要知道更多信息吗？

**编辑：子问题**

如果我使用线程池中的线程（由 ASP.NET 运行时使用（**感谢 Anton**），我可以限制它可以使用多少个线程吗？ASP.NET 线程池大小限制是多少？

有一个单独的站点会更好吗？也许是一个包含单独 ASP.NET 应用程序的虚拟文件夹？那会阻止我限制线程池吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:34:41.477

如果它主动引起问题，我会感到惊讶，只要这些线程不尝试回复请求/响应（现在可能已经消失）。你看到什么症状？你能定义“古怪”吗？

我经常使用线程进行日志记录等，没有问题。

为了最大限度地减少影响，您可以使用生产者/消费者模式，因此您只有一个（或几个）工作线程，为许多 ASP.NET MVC 请求/响应线程提供服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T13:35:27.747

在处理传入请求时，ASP.NET 运行时从`ThreadPool`容量有限的 .NET 获取线程。因此，如果您使用该线程池中的线程，这可能会损害您的应用程序的可伸缩性。

解决这个问题的方法是生成一个通常的`Thread`，但是当你的 AppPool 被回收时这些可以被杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:33:42.307

我认为这取决于它是如何完成的。当谈到 ASP.NET 下的线程时，我不是很能胜任，但我认为您最终可能会使用线程，否则这些线程将用于为来自客户端的请求提供服务。

[这是一个关于 ASP.NET 中的多线程的教程](http://www.beansoftware.com/ASP.NET-Tutorials/Multithreading-Thread-Pool.aspx)，可能会对您有所帮助。

# c# - 我想知道可用于树视图的所有触发器是什么

> ID：868670
> 
> 赞同：0
> 
> 时间：2009-05-15T13:27:26.533
> 
> 标签：c#, wpf, xaml, triggers, treeview

我想知道可用于树视图的所有触发器是什么。我想更改树视图中所选项目的颜色。任何答案plzz..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T13:35:41.113

您可以在 MSDN 上查看所有 WPF 树视图成员的列表：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview_members.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeview_members.aspx)

# mysql - 在 Linux 上将 Microsoft SQL Server 数据库复制到 MySQL/PostgreSQL 的选项

> ID：868680
> 
> 赞同：1
> 
> 时间：2009-05-15T13:30:13.827
> 
> 标签：mysql, sql-server, postgresql, jdbc, odbc

我需要将数据从 Microsoft SQL Server 复制到 MySQL 或 PostgreSQL。数据包括存储在 BLOB 列中的图像。

您能否评论一下您对以下策略的体验，并建议我可能遗漏的其他策略？

1.  使用 JDBC 用 Ja​​va 编写的自定义脚本
2.  带有 perl 脚本的 linux odbc 驱动程序
3.  设置我自己的 windows 框并使用带有 Postgres ODBC 驱动程序的 SSIS 或 DTS
4.  在 Windows 机器上编写 .net 程序并安排执行
5.  免费TDS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:21:30.147

查看 SQL Server 复制技术，您可以使用非 SQL Server 订阅者，尽管目前官方仅支持 Oracle 和 DB2，但自定义解决方案已成功实施。

[http://msdn.microsoft.com/en-us/library/ms151835.aspx](http://msdn.microsoft.com/en-us/library/ms151835.aspx)

在我看来，使用 SQL Server Integration Services 将是一个好方法。如有必要，您可以轻松创建自定义组件以与非 SQL Server 订阅者交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-29T12:34:59.233

Python 对所有三个数据库都有很好的库，而 SQLAlchemy 使编写 db 的东西变得容易。我对 SQL Server 使用 freetds 和 unixodbc。

如果您确实想要相同的表结构，SQLAlchemy 使这变得特别容易，因为您可以以通用方式定义结构一次，并让它在三个数据库中的每一个中创建结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-11-27T01:49:51.833

您还可以按照 [http://blog.hagander.net/archives/103-Replicating-from-MS-SQL-Server-to-PostgreSQL.html中的说明进行操作](http://blog.hagander.net/archives/103-Replicating-from-MS-SQL-Server-to-PostgreSQL.html)

我不得不重新创建表 msrepl7 更改字段 indagent 和子类型以键入整数（Postgres 8.3 上的字符 = 整数查询存在一些问题）

祝你好运。

# c# - 由于缺少程序集，MEF 中的反序列化错误

> ID：868682
> 
> 赞同：4
> 
> 时间：2009-05-15T13:30:35.307
> 
> 标签：c#, .net, reflection, assemblies, mef

我正在使用 MEF。我序列化依赖于已加载程序集之一的对象之一。

现在，当我尝试反序列化此对象时，它会引发“无法找到程序集”异常。MEF 在此反序列化之前将程序集加载到另一个类中（*我假设它的范围是应用程序范围，它将它们加载到公共属性*中）。

既然 MEF 已经将这些程序集加载到应用程序域中，为什么`BinaryFormatter.Deserialize()`找不到它们？

我可以使用`System.Reflection.Assembly.Load`，但是使用 MEF 有什么意义呢？MEF 有没有为此得到特别的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:11:35.740

现在，[装配探测起到](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)了作用，尽管我仍然不确定这是否是最佳实践，因为我仍然在这里绕过 MEF，这不好。

*我仍在测试，看看是否有副作用或类似的东西。这些的明显缺点是我需要两次加载相同的 DLL*

# .net - 未处理的异常崩溃 VS 2008

> ID：868686
> 
> 赞同：0
> 
> 时间：2009-05-15T13:31:07.570
> 
> 标签：.net, visual-studio, visual-studio-2008

在过去的几周里，我遇到过两次调试过程（vshost.exe）由于未经处理的异常而崩溃的情况。第一个是尝试使用 Activator 类来实例化一个对象，我不记得细节了，今天试图加载一个自定义配置部分，我在指定该部分的类型时出错了。在这两种情况下，当我将调试器设置为在抛出异常时中断时，调试都会正确进行。

有人知道这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:20:04.317

为了诊断这个尝试以下

*   工具 -> 选项 -> 调试
*   取消选中“仅启用我的代码”

然后重新运行您的方案。启用“仅我的代码”后，在不属于您的代码中引发的异常不会立即显示在调试器中。

# asp.net - 2 个 IIS 站点共享 1 个 Web 应用程序？

> ID：868689
> 
> 赞同：2
> 
> 时间：2009-05-15T13:31:14.730
> 
> 标签：asp.net, iis, .net-3.5

这可能吗？基本上，我想将两个站点都指向 IIS 中的同一个文件夹。如果这是可能的，有什么危险。

丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:34:48.137

是的，只需在创建站点时将两个站点都指向 IIS 中的同一个文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:34:32.507

是的，我们做了很多。据我所知，我们这样做没有任何问题。如果两个站点都写入目录（如同一个文件），我可能会看到问题，但除此之外你应该很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:38:47.097

定义“站点”。

如果您在 IIS 中创建网站，您可以为该网站分配多个主机标头，例如，www.thissite.com 和 www.thatsite.com 的访问者都将到达相同的页面和代码集合 - 这是微不足道的并且，如果网站本身不包含对其页面的明确 URL 引用，它或多或少会“正常工作”。

鉴于这*一点*很容易正确回答问题，因此需要更多关于您要实现的目标的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-16T16:53:17.853

如果您正在运行多个站点并希望在其中共享站点的某些部分，则将这些部分放置在站点文件夹结构之外的“单独区域”中。

然后打开 IIS 管理控制台并在每个站点下添加一个“虚拟文件夹”。这个虚拟文件夹可以在你的网络服务器上的任何地方，包括他们都可以读写的文件夹。

虚拟文件夹的名称将被视为您网站内的普通“文件夹”。

假设您创建了一个“admin”或“library”文件夹并希望重用它。然后只需创建虚拟文件夹，将其命名为例如。“库”，然后将文件夹指向该库所在的位置。顺便提一句。您可以为虚拟文件夹设置单独的应用程序规则，例如。哑剧类型，对运行内容的限制等。

我们将这种方法用于我们的 CMS，我们将每个客户放在单独的文件夹中，但管理部分是相同的。所以我们只需要更新一次管理代码。

您需要通过 IIS 管理控制台或管理脚本访问 IIS 的元数据库。

# python - 在 Python 中使用 python-memcache (memcached) 的好例子？

> ID：868690
> 
> 赞同：93
> 
> 时间：2009-05-15T13:31:56.617
> 
> 标签：python, memcached

我正在使用 Python 和 web.py 框架编写一个 Web 应用程序，并且我需要始终使用 memcached。

我一直在互联网上搜索有关[python-memcached](http://www.tummy.com/Community/software/python-memcached/)模块的一些好的文档，但我能找到的只是[MySQL 网站上的这个示例](http://dev.mysql.com/doc/refman/5.1/en/ha-memcached-interfaces-python.html)，关于其方法的文档不是很好。

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2009-05-15T13:37:20.970

这很简单。您使用键和到期时间写入值。您使用键获取值。您可以使系统中的密钥过期。

大多数客户都遵循相同的规则。您可以阅读[memcached 主页](http://www.danga.com/memcached/)上的通用说明和最佳实践。

如果您真的想深入研究它，我会查看源代码。这是标题评论：

```
"""
client module for memcached (memory cache daemon)

Overview
========

See U{the MemCached homepage<http://www.danga.com/memcached>} for more about memcached.

Usage summary
=============

This should give you a feel for how this module operates::

    import memcache
    mc = memcache.Client(['127.0.0.1:11211'], debug=0)

    mc.set("some_key", "Some value")
    value = mc.get("some_key")

    mc.set("another_key", 3)
    mc.delete("another_key")

    mc.set("key", "1")   # note that the key used for incr/decr must be a string.
    mc.incr("key")
    mc.decr("key")

The standard way to use memcache with a database is like this::

    key = derive_key(obj)
    obj = mc.get(key)
    if not obj:
        obj = backend_api.get(...)
        mc.set(key, obj)

    # we now have obj, and future passes through this code
    # will use the object from the cache.

Detailed Documentation
======================

More detailed documentation is available in the L{Client} class.
""" 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-02-14T07:07:44.087

我建议你`pylibmc`改用。

它可以作为 python-memcache 的替代品，但速度更快（因为它是用 C 编写的）。[您可以在这里](http://sendapatch.se/projects/pylibmc/)找到方便的文档。

对于这个问题，由于 pylibmc 只是作为替代品，您仍然可以参考 pylibmc 的文档来进行 python-memcache 编程。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-09T23:31:29.390

一个好的经验法则：使用 Python 中的内置帮助系统。下面的例子...

```
jdoe@server:~$ python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import memcache
>>> dir()
['__builtins__', '__doc__', '__name__', '__package__', 'memcache']
>>> help(memcache)

------------------------------------------
NAME
    memcache - client module for memcached (memory cache daemon)

FILE
    /usr/lib/python2.7/dist-packages/memcache.py

MODULE DOCS
    http://docs.python.org/library/memcache

DESCRIPTION
    Overview
    ========

    See U{the MemCached homepage<http://www.danga.com/memcached>} for more about memcached.

    Usage summary
    =============
...
------------------------------------------ 
```

# c# - 如何检查文件是否在 SharpSvn 中的源代码控制下？

> ID：868701
> 
> 赞同：12
> 
> 时间：2009-05-15T13:33:37.780
> 
> 标签：c#, svn, sharpsvn

嗨，我使用 C# 和 SharpSvn 库。我想在使用 SvnClient.Add 添加文件之前检查文件是否受源代码控制。当我在已经在 SVN 下的文件上执行此操作时，我得到错误：“已经在版本控制之下”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-05-19T21:22:33.773

这很好地演示了如何使用状态来做到这一点

```
using(SvnClient client = new SvnClient())
{
    SvnStatusArgs sa = new SvnStatusArgs();
    sa.Depth = SvnDepth.Empty; // Adjust this to check direct files, or (recursive) directories etc

    Collection<SvnStatusEventArgs> statuses;
    client.GetStatus("c:\\somefile.txt", sa, out statuses); 

    Assert.That(statuses.Count, Is.EqualTo(1));
    Assert.That(SvnStatus.NotVersioned, Is.EqualTo(statuses[0].LocalContentStatus));
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-08-09T21:35:28.257

如果您只想知道文件是否受源代码控制，您可以使用`.Info()`/ `.GetInfo()`。该方法通常更快，因为它不必检查文件自检出后是否已更改。

# python - 在 GAE 上，如何根据正确的客户时区显示日期？

> ID：868708
> 
> 赞同：5
> 
> 时间：2009-05-15T13:34:23.800
> 
> 标签：python, django, google-app-engine, timezone

在我的 Google App Engine 应用程序中，我将自动更新的日期/时间存储在我的模型中，如下所示：

```
class MyModel(db.Model):
   date = db.DateTimeProperty(auto_now_add=True) 
```

但是，根据其时区，该日期/时间是服务器上的本地时间。

那么，当我想在我的网页上显示它时，我该如何根据**客户端**时区对其进行格式化？

另外，我怎么知道谷歌服务器在哪个时区？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T13:50:08.710

关于你问题的第二部分：

无论服务器位于哪个时区，Python time() 都会返回 UTC。 timezone() 和 tzname() 将分别为您提供服务器上本地时间的偏移量以及时区名称和 DST 时区作为元组. 截至本文发布时，GAE 使用 Python 2.5.x；[在此处](http://www.python.org/doc/2.3.5/lib/module-time.html)查看 Python 时间函数的文档。

对于问题的第一部分：

您可以使用服务器上的代码或客户端上的代码来格式化日期。

*   如果你在服务器上格式化，你可以

    *   使用请求者 IP 地址的时区
    *   要求用户注册并给你一个时区，存储它，并使用存储的值
    *   在 GET 或 POST 上使用（隐藏？）字段，以便客户端所需的时区是请求的一部分
*   如果在客户端格式化，则需要编写几行 JavaScript。该过程类似于“使用 Date(utctime) 从 UTC 创建一个日期，然后将其填充到文档中”。默认情况下，无论它们是如何初始化的，JavaScript 日期都显示为当地时间 - 太棒了！

我建议在客户端进行格式化，因为没有一点 JavaScript 的网页是什么样的？这是2009年！ [马塞洛](http://blogs.msdn.com/marcelolr/archive/2008/06/04/javascript-date-utc-and-local-times.aspx)有一些例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:07:55.467

好的，感谢 Thomas L Holaday，我必须将该 UTC 日期发送给客户端，例如使用 JSON：

```
json = '{"serverUTCDate":new Date("%s")}' % date.ctime() 
```

然后，在客户端，根据用户时区添加/删除秒数，如下所示：

```
var localDate = serverUTCDate.getTime() - (new Date()).getTimezoneOffset()*60000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T13:45:45.973

您可以通过询问本地时间和 UTC 时间来了解服务器的时区，并查看其中的区别。要找出客户端时区，您需要在模板中添加一点 Javascript，它会告诉您，例如在 AJAX 交换中。一旦你发现了我建议 pytz，pytz.sourceforge.net/ 的增量，就可以操纵时区。

# winforms - 如何获得 ESC 键以关闭 Winforms 中的对话框？

> ID：868714
> 
> 赞同：21
> 
> 时间：2009-05-15T13:34:54.127
> 
> 标签：winforms, binding, modal-dialog

这些天在使用软件时，ESC 键通常会关闭一个对话框，而不会保留我所做的任何更改。我特别喜欢这样，因为即使对话框上可能有一个取消按钮，我也不一定想将鼠标或选项卡移到取消按钮上。这是一种非常简洁的表达方式：“糟糕，不是故意的！” 到软件。事实上，我发现我对没有实现此功能的软件感到恼火，我不敢相信它还没有在 Winforms 的引擎盖下完成 - 对我来说似乎很直观......

我已经查看了连接到 Form KeyPress 事件，或尝试模拟“取消”DialogResult 等。似乎有很多方法可以解决这个问题......

所以问题是：绑定 ESC 键以关闭对话框而不保存任何更改的最简洁方法是什么？

非常感谢有这方面经验的人提供的任何帮助！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2009-05-15T13:42:56.947

设置`CancelButton`表单的属性以引用您的取消按钮。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2011-12-09T03:15:11.937

要在没有取消按钮时执行此操作，您可以覆盖 processcmdkey：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
  if (keyData == Keys.Escape)
  {
    this.Close();
    return true;
  }
  return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-05-15T13:43:28.427

您还可以将表单的 CancelButton 属性设置为取消按钮：

```
this.CancelButton = this.cancelButton; 
```

在 Visual Studio 中，您可以通过表单的属性进行设置，并将代码添加到 Form.Designer.cs 文件中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-04-30T07:45:34.617

你可以这样做：

```
button b = new button();
b.click = button_click;
this.cancelbutton = b;

protected void button_click(object sender,eventargs e)
{
    this.close();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T13:49:36.697

在某种程度上，它取决于您的开发环境 - 在 .NET 中内置（就像在 vb.old 中一样），表单具有“取消按钮”属性“如果设置了此属性，则每当用户按下‘ESC’键。”

“ENTER”键有一个相应的“AcceptButton”属性。

从内存中，标准消息和对话框将默认遵循上述逻辑-当然，可以为消息框指定默认按钮.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-11T11:24:11.443

```
 If e.KeyCode = Keys.Escape Then
        If MsgBox("Are you sure to exit system (Y/N) ?", MsgBoxStyle.YesNo + MsgBoxStyle.Question) = MsgBoxResult.No Then Exit Sub
        dashboard.Close()

    ElseIf e.KeyCode = Keys.F5 Then
        MessageBox.Show("F5")
    End If 
```

试试这个家伙。这是为了在关闭表单之前显示一个消息框以确认是或否。您可以将此代码添加到表单中名为 Keydown 的表单事件中。这里的“dashboard”是我们要关闭的表单的名称。此代码向您显示一个带有“是”或“否”按钮的消息框。如果您选择是意味着它将关闭您的表单。如果您选择否意味着操作将取消。形式保持不变

# php - 如何为 SWFUpload 设置上传的文件夹？

> ID：868722
> 
> 赞同：4
> 
> 时间：2009-05-15T13:35:44.267
> 
> 标签：php, upload, file-upload, swfupload

我在文档中没有看到如何使用 SWFUpload 设置上传的文件夹。

谁能指出我正确的方向？

如果有帮助，我正在使用 PHP 5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T13:39:33.943

您所做的是调用 PHP 脚本，该脚本处理文件上传。

您可以打开调试，这将为您提供一个非常好的调试视图，了解正在发生的事情以及相关 PHP 文件的输出。

闪存不处理上传，因为闪存实际上是在客户端计算机上运行。

这是我使用的配置示例。

```
 flash_url : "js/swfupload/flash/swfupload.swf",
    upload_url: "ajax/flash_upload.php",
    post_params: {"PHPSESSID" : "<?php echo session_id(); ?>", "folder_id" : "<?php echo $_SESSION["folder_id"]; ?>"},
    file_size_limit : "100 MB",
    file_types : "*.*",
    file_types_description : "All Files",
    file_upload_limit : 100,
    file_queue_limit : 0,
    custom_settings : {
        progressTarget : "fsUploadProgress",
        cancelButtonId : "btnCancel"
    },
    debug: true, 
```

然后 flash_upload.php 有这样的东西（只是一个例子）

```
$location = "/var/www/html/example.com/files/";
move_uploaded_file($_FILES["Filedata"]["tmp_name"], location .$_FILES["Filedata"]["name"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:41:01.320

SWFUpload 有一个 URL 来发送上传，例如[http://yourdomain.com/upload.php](http://yourdomain.com/upload.php) - 正是这个脚本决定了上传会发生什么。

有关更多信息，请参阅[处理文件上传](http://us3.php.net/manual/en/features.file-upload.php)的 PHP 手册部分。

# asp.net - 将 SubSonic 集合绑定到下拉列表时，数据源问题中不存在列

> ID：868739
> 
> 赞同：0
> 
> 时间：2009-05-15T13:38:54.257
> 
> 标签：asp.net, subsonic, data-access-layer

我有一个主键表，其名称中带有 _（下划线），例如：User_Id。当 SubSonic 生成 DAL 时，它会删除下划线。现在我将对象集合绑定到 DropDownList，如下所示：

```
private void LoadCbo()
{
    UserCollection users=(new UserCollection()).Load();
    User u=new User(){
        UserId=-1,
        Name="[Select]"};
   users.Insert(0,u);

   ddlUsers.DataSource=users;
   ddlUsers.DataValueField=User.Columns.UserId;
   ddlUsers.DataTextField=User.Columns.Name;
   ddUsers.DataBind();    
} 
```

运行时它告诉我对象不包含名为“User_Id”的列。

PS：- 使用“UserId”可以正常工作。我只想知道这是 SubSonic (2.1) 中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T13:46:58.933

Columns 集合由数据库中的列名组成，而不是对象的属性名。这不是错误，而是必不可少的功能，否则 SubSonic 将不知道如何查询实际数据库。

以下行指定填充下拉列表的值时要使用的属性：

```
ddlUsers.DataValueField=User.Columns.UserId; 
```

User.Columns.UserId 的值将是“User_Id”，它是数据库表中列的名称，而不是属性的名称。但是，当 ddlUsers 进行数据绑定时，它找不到名为 User_Id 的用户对象的属性，因为当 SubSonic 生成您的 DAL 时，它会从属性名称中删除下划线。最好的解决方法是（正如 ranomore 所指出的）：

```
ddlUsers.DataValueField = User.UserIdColumn.PropertyName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T17:47:44.317

在 SubSonic 2.2 中，您还可以这样做：

```
ddlUsers.DataValueField = User.UserIdColumn.PropertyName; 
```

这样您就可以避免在代码中对列名进行硬编码。

# delphi - 可以将 tdiQuestion 添加到 TaskDialog.MainIcon 吗？

> ID：868745
> 
> 赞同：0
> 
> 时间：2009-05-15T13:40:25.673
> 
> 标签：delphi, windows-vista, delphi-2009, taskdialog

可以将 tdiQuestion 添加到 TaskDialog.MainIcon 吗？“？”不可用 TaskDialog 中的图标使其几乎无用。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-21T15:04:40.720

MainIcon 属性没有*tdiQuestion*选项的原因是 TaskDialog 是Vista 引入的新*[TaskDialogIndirect()](http://msdn.microsoft.com/en-us/library/bb760544(VS.85).aspx)*函数的包装，并且此函数使用的*[TASKDIALOGCONFIG](http://msdn.microsoft.com/en-us/library/bb787473(VS.85).aspx)*结构在其*pszMainIcon*字段中没有提供*TD_ERROR_ICON 。*

 *如果您阅读**Windows 用户体验交互指南**，特别是[确认](http://msdn.microsoft.com/en-us/library/aa511273.aspx)部分，您会注意到问题图标已被弃用很长时间，因此任务对话框不再提供它只是合适的，即使它仍然是出于向后兼容性的原因，支持*[MessageBox()](http://msdn.microsoft.com/en-us/library/ms645505(VS.85).aspx)*。

您会注意到带有“您要保存对未命名的更改吗？”的任务对话框。上面链接的文档中的问题确实没有图标，所以这可能也是您应该做的事情。

# jira - Jira：多个版本的状态跟踪

> ID：868747
> 
> 赞同：6
> 
> 时间：2009-05-15T13:41:30.353
> 
> 标签：jira, bug-tracking

我们经常在 JIRA 中报告一个应用程序的多个版本的问题。但是，这些问题的修复不会针对报告问题的每个版本同时提交。这使得很难跟踪在哪个版本中提交了修复，并且开发人员有时会忘记为某个版本提交修复。

有没有办法跟踪单独报告但在同一个问题中的每个版本的问题状态？除了问题的单一状态（仅当所有版本都具有该状态时才更新为状态，即问题在所有修复版本中都已解决时设置为“已解决”），我希望看到一个每个修复版本的不同状态。

在查看 Atlassian 页面后，我[在他们的 JIRA 中发现了一个旧问题，](http://jira.atlassian.com/browse/JRA-1493)它要求使用此类功能。与此相关的是，论坛讨论建议为每个版本使用一个子任务。如果有一个插件可以在问题创建和修复版本更新时自动创建子任务，这将是一个很好的解决方案。有这样的插件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T23:15:01.317

你不需要插件。您可以使用标准 JIRA 功能轻松完成此操作。

只需创建一个记录错误的 JIRA 问题，然后为要修复错误的每个版本创建子任务。我通常使用父问题来跟踪在最新（未发布版本）中修复问题。

在您的 JIRA 配置中，创建一个名为“Backport”的自定义子任务问题类型可能有助于将这些问题与通用子任务区分开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:48:41.817

我不确定，但如果我没记错的话，JIRA 是 Atlassian 产品，因此您最好直接与他们联系并提出您的问题。我知道这家公司，他们非常好，非常愿意回答你的问题。

（我觉得这有资格作为某种答案，即使它实际上并没有帮助）

# c# - C# app.config 问题 - ConfigurationErrorsException: Unrecognized element 'setting'

> ID：868757
> 
> 赞同：4
> 
> 时间：2009-05-15T13:44:52.653
> 
> 标签：c#, .net, web-services, configuration, .net-2.0

**一些背景：** 我有一个带有 5 个 Web 引用的 Windows 服务，在开发、测试、QC 的几个环境中一切都很好。开发和测试正在运行 windows 2003、QC 和 PROD windows 2000。我们使用相同的程序集和配置文件集将服务推送到生产环境并收到此错误。异常通过同一代码块不一致。其他使用相同标准配置元素的 Web 参考正在工作。

**例外**：

```
 System.Xml.XmlDocumentSystem.Configuration.
ConfigurationErrorsException: Unrecognized  
element 'setting' 
```

**示例配置部分：**

```
<sectionGroup name="applicationSettings"
 type="System.Configuration.ApplicationSettingsGroup, 
 System, Version=2.0.0.0,
 Culture=neutral, PublicKeyToken=b77a5c561934e089" >
      <section name="Blah.AWD.SubSystem.AUE.Properties.Settings"
      type="System.Configuration.ClientSettingsSection, 
      System, Version=2.0.0.0,
       Culture=neutral, PublicKeyToken=b77a5c561934e089" 
      requirePermission="false" />
</sectionGroup>

<applicationSettings>
 <Blah.AWD.SubSystem.AUE.Properties.Settings>
  <setting name=
   "AWD_SubSystem_AUE_WebService_Validator_AppEntryValidator"
    serializeAs="String">
        <value>http://blah.asmx</value>
  </setting> 
 </Blah.AWD.SubSystem.AUE.Properties.Settings>      
</applicationSettings> 
```

* * *

我会接受约翰的回答是正确的，因为它最终成为一个部署问题并且特定于环境。配置实际上没有任何问题。

例外：

```
 System.Xml.XmlDocumentSystem.Configuration.
ConfigurationErrorsException 
```

如果您在配置中放置了一个无法识别且无法从自定义配置类序列化的元素，则会导致此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T14:51:57.407

您是否 100% 确定生产环境与其他人使用相同版本的 .NET？如果完全相同的代码（您确定所有程序集都已正确删除？）在 5 个环境中正确运行，并且在生产中呕吐，听起来可能是环境问题。

有没有可能——哎呀——你的产品环境只有 .NET 1.1 可用？或者有问题的 Web 服务被放入 IIS 上的 1.1 AppPool 中？（虽然听起来问题不在于 Web 服务，而在于 Windows 服务——这应该解决最后一个问题......）

# c - 在 Windows XP 下编写和编译 C 程序？

> ID：868759
> 
> 赞同：6
> 
> 时间：2009-05-15T13:45:19.703
> 
> 标签：c

这是一个绝对初学者的问题，但根据最新的播客，我知道没有任何问题是新手。

我有 0 的编程经验，我想学习 C，所以我开始写 K&R 书。我正在使用 Windows XP 笔记本电脑，我打算使用 Notepad++ 编写代码，并使用**Code::Blocks**进行编译。

这是我的问题：一旦我在 Notepad++ 中编写了“hello world”程序，我应该如何保存、编译和运行它？

编辑和新问题：当我从 Code::Blocks 构建和运行时，我会看到带有“hello world”消息的提示窗口。它保持打开状态，直到我手动关闭它。但是，当我双击.exe文件时，提示只是闪烁并消失，这是为什么？

非常感谢，

京东

编辑：根据此处的建议，我将使用 Code::Blocks 作为 IDE。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T13:48:32.923

将其保存为 .c 文件。您可以使用[MinGW 编译器](http://www.mingw.org/)将文件编译成 .exe 文件。但既然你有 Visual Studio，你应该使用那个编译器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-15T13:48:15.517

您应该能够在 Visual Studio 中编写 C。您当然可以在旧版本的 IDE 中使用。只需创建扩展名为 .c 的源文件。

您应该能够在 Visual Studio 中构建和运行代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-05-15T13:52:23.290

如果您只是学习编程，我不建议您从 C 开始。C 在今天仍然占有一席之地，但是有更简单的语言可以用来学习基本的语法和技术。据我了解，那里没有那么多受雇的初学者 C 程序员。然而，你可以成为一名受雇的初学者 java、c#、VB、ruby 或 python 程序员，人们会付钱给你学习。然后，一旦你在结构和技术上打下了坚实的基础，你就可以用 C 更接近金属。

只是我的两分钱，即使它不是你问题的真正答案。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-15T13:59:10.607

如果您不想使用visual-studio，您可能想尝试类似代码块的东西**，**它可以让您使用VS编译器......如果您刚刚开始，它会更简单+轻量级。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-05-15T14:18:00.887

正如其他海报所指出的那样，Visual Studio 对初学者来说可能有点压倒性 - 有很多选择，而且需要大量的绒毛才能获得一个简单的“Hello World”。

我个人向​​初学者推荐 Bloodshed 的 Dev-C++ IDE。它不再被开发了（所以获得稳定版，而不是 beta 版），但是从输入你的第一个程序到编译和运行它非常简单。如果您坚持使用 Windows，您最终会迁移到 Visual Studio，但 Dev 是一个不错的东方起点。

您可以在 Visual Studio 中编辑文件（它是一个 IDE，一个集成开发环境，并且应该包含编写程序所需的全部内容）但您会注意到大多数程序员使用 Notepad++ 等外部编辑器，因为他们提供一些您通常不会在内置 IDE 中获得的不错的功能。暂时不要担心，但是当您更熟悉该过程的其余部分时，请尝试使用像 n++ 这样的外部编辑器。

哦，C*无论如何都不*能被描述为“用一种小语言涵盖了关键原则”。它肯定涵盖了“关键原则”——它已被用于太阳下的所有事物，但绝对是巨大的。这些天是否适合初学者尚有争议。它肯定会给你一些很好的体验，但不会是最简单的开始方式。

编辑：CodeBlocks 更现代且仍在开发中，因此可能是比 DevC++ [http://en.wikipedia.org/wiki/Codeblocks更好的起点](http://en.wikipedia.org/wiki/Codeblocks)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-05-16T16:08:03.220

如果您从 K&R 中复制代码，则需要添加`system("pause")`; 在结束之前`main()`并确保将文件保存为`.c`

```
int main()
{
   printf("Hello, world\n");

   system("pause");
   return 0;   
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-15T13:50:57.287

刚开始我建议在 VC 中创建项目、编辑和编译。然后开始探索 VC 实际运行的命令（我相信那里的“输出”选项卡之类的东西。）尽管 Windows 不是对程序员最友好的环境，但您可以在命令行上完成所有这些操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-15T15:19:12.613

以防万一你还没有意识到，像visual studio一样，code::blocks也有一个内置的编辑器。你不需要用notepad++编写（除非你真的更喜欢npp作为编辑器）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-16T12:09:26.947

这是多年来在生物医学研究中使用 C 的人的意见：图像处理、数据处理。恕我直言，C 是一项重大的智力成就，可能是语法中意图的最佳升华。如果我刚开始，我现在会再次学习 C，即使只是为了学习思考。

也就是说，我什至从未尝试在 MS 上用 C 语言编程。（我所有的工作都在 Suns 和 SGI 上。）为了避免其他答案中提到的开销，我在 MS XP/cygwin 上切换到了 Python。但是，我经常怀念 C 的简洁、富有表现力的语法，并且怀念存储在内存中的位和值。请注意，即使使用 Python，后端也是 C，并且自定义扩展是用 C 编码的。因此，如果我想为 Python 重做我的图像处理代码，我可能最终还是会编写 C。

很抱歉，MS 对编写有史以来最精简的语言施加了如此大的负担。（顺便说一句，至于编辑，我个人的选择是 vim（作为 gvim），而不是 IDE。）（你有没有想过设置一个 Linux 机器？这些天有很多话要说：没有工作站成本的 UNIX。）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-15T13:47:18.373

尝试一些更简单的编译器，例如 *nix gcc。Visual Studio C++ 为代码文件添加了很多 MS 扩展。

# deployment - 如何在开发人员之间划分 NSIS 脚本？

> ID：868761
> 
> 赞同：3
> 
> 时间：2009-05-15T13:45:32.107
> 
> 标签：deployment, installation, nsis

我想将开发 NSIS 安装程序的任务分配给几个开发人员。如何物理组织代码？他们在签入 SVN 时是否必须编辑和合并单个 .nsi 脚本？是否可以将 NSIS 脚本划分为模块化的单独文件？这将是理想的。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T16:03:17.327

我使用构成实际安装程序生成和 MUI 代码的“主”nsi 文件，但它包括来自 nsi 文件的“额外”函数定义以及每个安装程序“部分”的单独文件。

例子：

```
 !include "LibraryFunction1.nsh"
!include "LibraryFunction2.nsh"
!include "LibraryFunction3.nsh"

; Basic Defines and MUI code Go HERE

; Output file information
Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"
OutFile "File-${BUILD_VER_ABRV}-${BUILD_VER_MIN}.exe"
InstallDir "$PROGRAMFILES\Location\"
InstallDirRegKey HKLM "${PRODUCT_DIR_REGKEY}" ""

; now include file sections
!include "FileSectionDefinition1.nsh"
!include "FileSectionDefinition2.nsh"
!include "FileSectionDefinition3.nsh"
!include "Uninstall.nsh" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T15:52:39.133

!include "uninstaller.nsh" 等（包含文件通常具有 .nsh 扩展名）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T15:56:31.947

您可以将一些代码分解为头文件 (.nsh)，并在您认为合适的时候将它们包含在您的脚本中。例如，我所有的安装程序都具有相同的基本 MUI 页面、文本、图像以及先决条件（.NET 框架）。所以我有一个包含文件，它使用所有！defines 和！insertmacro MUI_PAGE_x 设置 MUI。然后另一个文件包含用于确定必要的先决条件是否到位的函数。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2010-12-14T02:45:23.317

在某些情况下可能会起作用的一个不起眼的选项是生成 NSI。我有一半走了那条路。

# c# - WPF 依赖属性：为什么需要指定所有者类型？

> ID：868768
> 
> 赞同：8
> 
> 时间：2009-05-15T13:46:58.280
> 
> 标签：c#, wpf, dependency-properties

这就是我注册的方式`DependencyProperty`：

```
 public static readonly DependencyProperty UserProperty = 
        DependencyProperty.Register("User", typeof (User), 
             typeof (NewOnlineUserNotifier));                                                                                                                 

    public User User
    {
        get
        {
            return (User)GetValue(UserProperty);
        }
        set
        {
            SetValue(UserProperty, value);
        }
    } 
```

该`DependencyProperty.Register`方法的第三个参数要求您指定依赖属性所在的控件的类型（在这种情况下，我的用户控件称为`NewOnlineUserNotifier`）。

我的问题是，**您为什么要实际指定所有者的类型，如果您指定的类型与实际所有者的类型不同，会发生什么？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T14:43:07.990

您调用 Register 方法的类型不是该属性的实际所有者，因此您不能指定与实际所有者不同的类型，因为您指定的类型*是*实际所有者。

这可能有用的一个示例是当您创建包含其他控件的自定义控件时。以前使用 WinForms，如果您有一些仅对该容器有用但在语义上属于子级的额外信息，那么您能做的最好的事情就是将该信息放在保留所有“Tag”属性中。这两者都删除了类型安全性，并且您永远无法确定另一个类不会尝试在标签中存储其他内容。现在有了 WPF 依赖属性，您可以将值绑定到对象，而对象本身不需要保存该值。一个简单的例子：

```
public class ButtonContainer : Control
{
    public Button ChildButton { get; set; }

    public static readonly DependencyProperty FirstOwnerProperty =
    DependencyProperty.Register("FirstOwner", typeof(ButtonContainer),
         typeof(Button));

    public ButtonContainer()
    {
        ChildButton = new Button();
        ChildButton.SetValue(FirstOwnerProperty, this);
    }

} 
```

现在按钮有一个额外的属性，它只在 ButtonContainer 的上下文中才有意义，并且只能在 ButtonContainer 的上下文中访问 - 就像一个类型安全的封装标签。

使用新类如下：

```
ButtonContainer container1 = new ButtonContainer();

ButtonContainer container2 = new ButtonContainer();
container2.ChildButton = container1.ChildButton; 
```

当 ChildButton 从一个容器移动到另一个容器时，其 FirstOwnerProperty 的值也随之移动，就好像它是 Button 类的真实成员一样。Container2 可以调用 ChildButton.GetValue(FirstOwnerProperty) 并找出最初创建按钮的 ButtonContainer（为什么它可能要这样做，留给读者练习......）。所有这些都是可能的，而无需将按钮子类化为一个狭窄的专业。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T16:01:47.800

这是因为相同的 DependencyProperty 可以为多种类型定义不同的（使用不同的元数据）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T16:57:26.077

简而言之，当您注册 DP 时，您将对象 (DP) 添加到附加到类 (所有者) 的列表中。此操作仅“存在”在声明它的类中，并且通常与它无关。

# c++ - Central Clickable MSDN like Linux System/C/C++ 标准库文档

> ID：868773
> 
> 赞同：2
> 
> 时间：2009-05-15T13:47:30.323
> 
> 标签：c++, c, linux

如果您是 Windows 程序员，并且想要编写一些新的东西，您将使用一些您不熟悉的新 API，那么您可以在您的 Web 浏览器上键入 MSDN，然后您会立即得到您需要的东西。很好地分组的 API 函数，您可以在其中查看要包含的内容和链接的内容。

我正在 Linux 世界中寻找类似的东西。我想让我的函数休眠几毫秒，然后输入“man sleep”，然后我得到 shell 命令“sleep”的解释。但我不想那样。我正在编程，我只想看看该函数的编程用法。

所以问题是：**是否有 C、C++ 标准库和 linux 系统调用的中央、可点击和可浏览的文档，它们不是 C/C++ 标准的一部分，但在 linux 编程中经常使用？**

提前致谢，

G。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T14:20:02.693

男人被分成几个部分 如果你输入“男人男人”，你可以看到它们。

```
 1   Executable programs or shell commands
   2   System calls (functions provided by the kernel)
   3   Library calls (functions within program libraries)
   4   Special files (usually found in /dev)
   5   File formats and conventions eg /etc/passwd
   6   Games
   7   Miscellaneous (including macro  packages  and  conven‐
       tions), e.g. man(7), groff(7)
   8   System administration commands (usually only for root)
   9   Kernel routines [Non standard] 
```

因此，由于您拥有 sleep() 的库调用版本，因此您将编写“man 3 sleep”。“信息”也是访问相同信息的另一种方式。

您还可以使用“man -k sleep”进行搜索，它将列出所有与睡眠匹配的内容。

如果您想为它们添加书签，则互联网上散布着超链接的手册页。

对于 C++ API，有一些很好的网站，很多人都收藏了这些网站，并且大部分时间都在打开。

要记住的重要一点是，与 Windows 不同，没有人真正拥有或控制 Linux。您可以使用许多不同的内核选项构建您想要的任何类型的发行版。它在某些方面使事情变得不那么整洁，但在其他方面却更加灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:57:35.307

那么在你的情况下，你可以输入“man 3 sleep”......

Konqueror（KDE 网络/文件浏览器）允许您在栏中键入“#XXX”来查找 XXX 的手册页，以及“##XXX”来查找 XXX 的信息页面。与 man 不同，如果有多个手册页，它可以让您选择要选择的手册页。它们是相互关联的，因此查找“sleep”，您将在“SEE ALSO”部分看到信号，您可以单击它转到其手册页。

我不知道 C++ 有什么类似的东西，但是有几个很好的网站有文档： [http://www.cplusplus.com/reference/](http://www.cplusplus.com/reference/) [http://www.sgi.com/tech/stl/](http://www.sgi.com/tech/stl/)

（仅举几例我经常使用的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T14:13:40.040

默认情况下，手册页在 man 1 下，它被归类为“通用命令”。您需要 man 3，即“子程序”。

对于所有手册页及其主题的列表，我经常使用[http://www.linuxmanpages.com/](http://www.linuxmanpages.com/)，它只是所有在线手册页的副本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T15:29:47.207

男人 3 睡觉

您也可以在线浏览它们，[http://www.kernel.org/doc/man-pages/](http://www.kernel.org/doc/man-pages/)

手册页很适合参考，但它们不能替代有关 unix 编程的书。

但是，许多库维护可浏览和详细的文档。像[Qt](http://doc.qtsoftware.com/4.5/index.html)，[Boost](http://www.boost.org/doc/)等等。

有些工具是独立的项目，比如 Valgrind，你可以选择工具。选择工具的自由是有代价的：没有中心参考点。

但谷歌是搜索适当工具、手册和参考资料的终极场所。实际上，它非常适合查找和索引 unix 编程手册。`Ctrl`+`K`在 Firefox 中，**unix 睡眠功能**，然后就可以了。

# java - BadPaddingException：垫块损坏

> ID：868776
> 
> 赞同：7
> 
> 时间：2009-05-15T13:48:05.890
> 
> 标签：java, exception, encryption

我正在尝试解密使用 Rijndael/CBC/PKCS7 在 C# 中加密的 Java 文件。我不断收到以下异常：

> javax.crypto.BadPaddingException：在 AESFileDecrypter.decrypt(AESFileDecrypter.java:57)的 javax.crypto.Cipher.doFinal(DashoA13*..) 的 org.bouncycastle.jce.provider.JCEBlockCipher.engineDoFinal
> (Unknown Source)垫块损坏

当`doFinal(inpbytes)`Web 服务器为第一个字节 [] 调用该方法时。我猜这是密钥或IV的问题。我的文件系统上有加密文件用于测试。下面的代码有什么明显错误的地方吗？

***keyStr 是 base64 编码的

```
public AESFileDecrypter(String keyStr){
    try {
            Security.addProvider(new BouncyCastleProvider());   
            convertIvParameter();
            key = new sun.misc.BASE64Decoder().decodeBuffer(keyStr);

            //use the passed in Base64 decoded key to create a key object
            decryptKey = new SecretKeySpec(key, "AES");

            //specify the encryption algorithm
            decryptCipher = Cipher.getInstance("AES/CBC/PKCS7Padding", "BC");

            //make a parameter object for the initialization vector(IV)             
            IvParameterSpec ivs = new IvParameterSpec(_defaultIv);

            //initialize the decrypter to the correct mode, key used and IV
            decryptCipher.init(Cipher.DECRYPT_MODE, decryptKey, ivs);    
        } 
     catch (Exception e) {
             e.printStackTrace();
     } 
}

public void convertIvParameter() {

   int[] iv = new int[] {11, 190, 165, 33, 68, 88, 11, 200, 245, 35, 68, 23, 60, 24, 223, 67};

   _defaultIv = new byte[16];

   for(int x = 0; x < _defaultIv.length; x++) {
      _defaultIv[x] = (byte)iv[x];
   }
}

public void decryptUpdate(byte[] inpBytes) throws Exception {
   //decrypt the byte passed in from the web server
   decryptCipher.update(inpBytes);  
}

public byte[] decryptFinal() throws Exception {
   //decrypt the byte passed in from the web server
   return decryptCipher.doFinal();
}

//sends bytes to the client for diaply
private void sendBytes(FileInputStream fis, OutputStream os)throws Exception {
    //set the buffer size to send 4k segments of data
aesFileDecrypter = new AESFileDecrypter(<Insert Key string here>);

    byte[] buffer = new byte[4096];
    int bytes = 0, totalBytes = fis.available();

    //while there is still data to be sent keep looping and write the data
    //to the output stream as the buffer is filled
    try {
       while ((bytes = fis.read(buffer)) != -1) {   
          aesFileDecrypter.decryptUpdate(buffer);
          //os.write(buffer, 0, bytes);
       }

       os.write(aesFileDecrypter.decryptFinal(), 0, totalBytes);
   }
   catch(Exception e) {
      e.printStackTrace();
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T15:33:44.950

首先，为了清楚起见，从下面的评论中，您不应该在每个块上调用 doFinal()，因为 doFinal() 期望在末尾有任何填充，这显然不会出现在中间块中。要么 (a) 对中间数据调用 update()，然后在最后调用 doFinal()，或者 (b) 将所有数据放在一个缓冲区或字节数组中，然后在整个工作批次上调用一次 doFinal()。

从您发布的代码中不清楚这实际上就是您正在做的事情，但应该提及以防万一。

如果做不到这一点，那么作为调试的第一步，我建议这两者中的哪一个对你来说更容易：

*   在没有填充的情况下以 ECB 模式解密并查看您得到的结果。看看这带回来的第一个数据块。如果您可以将其与您的 IV 字节进行异或并获得预期的解密数据，您就知道您的密钥是好的。
*   在 base 64 编码之前从 C# 中转储出实际的密钥字节，在解码和检查之后从 Java 中转储它们是否相同。

我记得，C# 有无符号字节（而 Java 有符号），所以有一些地方存在字节符号微妙错误的空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2011-07-26T02:07:00.743

我以前遇到过这个问题。

当我写一些代码来做这样的加密和解密时：

```
 Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
    cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(sec, "AES"),new IvParameterSpec(new byte[cipher.getBlockSize()]));
    byte[] encode = cipher.doFinal(data);

    cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(sec, "AES"), new IvParameterSpec(new byte[cipher.getBlockSize()]));
    byte[] decode = cipher.doFinal(encode); 
```

我在加密数据时忘记了第一个`IvParameterSpec(new byte[cipher.getBlockSize()])`，然后我得到一个异常“pad block损坏”，所以也许你应该检查你的加密代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:53:38.760

As far as I know AES is based on Rijndael, but the specification is not exactly the same. I would suggest to check the key and block size you are using to cipher in C# and the sizes being use in Java. ([.Net differences between Rijndael and AES](http://blogs.msdn.com/shawnfa/archive/2006/10/09/The-Differences-Between-Rijndael-and-AES.aspx)).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T14:49:11.170

doFinal() 是上面代码的撤销，我最终只使用密码流而不是 update/doFinal 方法。这样，我可以使用 FileInputStream 和我的密码作为 CipherInputStream 的参数，然后通过 OutputStream 将输出传递给 Web 浏览器。将 update 和 doFinal 分解为它们自己的方法调用使任务变得更加困难，并且这两种方法都从解密器类中删除（留下一个读取数据块并将其输出到浏览器的 while 循环）。在这种情况下也不需要 Bouncy Castle Provider，而 PKCS5Padding 就足够了，这是由 SunJCE 提供的。

# asp.net-mvc - ASP.NET MVC 如何将自定义模型绑定到视图

> ID：868786
> 
> 赞同：3
> 
> 时间：2009-05-15T13:49:02.470
> 
> 标签：asp.net-mvc, gridview, model

我想绑定一个数组数据以在 ASP.NET MVC 中查看，我该怎么做？

抱歉不清楚我的问题。现在，我创建了一个自定义对象（不是数组），我试图将它传递给 View，但错误显示

“传递到字典中的模型项属于‘ContactView’类型，但此字典需要‘System.Collections.Generic.IEnumerable’类型的模型项”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T14:09:25.947

您可以使用 ViewData[]，但最好的方法是实际创建一个视图类并返回它。

因此，假设您要发送数据的视图称为联系人。创建一个新的 View 类并返回它。所以而不是这个：

```
public ActionResult Contacts(){
    ViewData["contacts"] = arrayOfContacts[];
    ...
    return View();
} 
```

您可以通过执行以下操作获得强类型视图：

```
public class ContactsView(){
     Object[] ContactsList {get;set;}
}

public ActionResult Contacts(){
    ...
    return View(new ContactsView(){
        ContactsList = arrayOfContacts[];
    });
} 
```

然后在实际视图中，您可以通过接受 ContactsView 类型的对象来对其进行强类型化。这样在实际视图中，让它像这样继承：

```
... Inherits="System.Web.Mvc.ViewPage<ContactsView>" ... 
```

这使您可以像...一样调用数组

```
Model.ContactsList 
```

与此相反：

```
 object[] arrayOfItems = (Object[])ViewData["theContactsList"]; 
```

在这种情况下，您可能想要检查它是否不为空等。这样做的好处是，如果您重构它会容易得多。更不用说使用强类型对象的易用性和类型安全性了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T13:54:01.930

把它放在 ViewData 中，并使用 for..each 循环遍历它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T13:59:28.327

看看这个链接： http: [//nerddinnerbook.s3.amazonaws.com/Part6.htm](http://nerddinnerbook.s3.amazonaws.com/Part6.htm)

基本上，您可以将数组加载到 viewdata 对象中，并根据需要使用它。

# visual-sourcesafe - 从 SourceSafe 迁移到 ClearCase 的最佳方式是什么？

> ID：868789
> 
> 赞同：3
> 
> 时间：2009-05-15T13:49:38.600
> 
> 标签：visual-sourcesafe, clearcase

我们目前有一个胖 SourceSafe 数据库，其中包含十年的代码。我们正在寻找一种简单且稳定的方式将所有这些导入到新的 Clearcase/Jazz 环境中。

这样做的最佳方法是什么，是否有任何工具可以自动执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T13:54:05.017

我知道这并不能直接回答您的问题，但是几年前我们从 VSS 迁移到 Perforce 时遇到了类似的问题。我们研究了迁移所有文件的历史记录的方法，但我们发现的任何解决方案都存在问题并且需要很长时间才能执行。

最后，我们只是决定将当前版本的代码导入 Perforce 作为基线，并将旧历史保留在 VSS 中。在早期，我们确实偶尔会参考 VSS，但几个月后我们就不需要了。

如果文件有问题，您只需要最后几个修订版就可以查看更改的内容和原因。因此，如果文件更改相当频繁，您很快就会在新存储库中建立有用的历史记录。如果文件没有改变，那么根据定义它是稳定的，你不需要历史记录。

如果您备份旧存储库，如果您真的需要挖掘保留历史记录，您可以随时返回它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T14:34:52.423

理论上，[**clearexport_ssafe**](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_admin.doc/topics/t_import_ssafe_export.htm)是正确的工具：

> 该`clearexport_ssafe`实用程序读取 Microsoft® Visual SourceSafe 当前项目中的文件和子项目，并生成一个数据文件，`clearimport`用于创建等效的 VOB 元素。
> 
> 默认情况下会`clearexport_ssafe`导出 Visual`SourceSafe`当前项目中的文件和子项目，但不会导出子项目中包含的任何文件。要导出所有子项目中的所有文件，请指定 –r 选项。

在实践中，我所做的迁移（虽然不是从 VSS）涉及将一些最近的标签，然后是 HEAD 导入 ClearCase。

这意味着我用于任何导入（来自任何其他 VCS）的主要工具是**[clearfsimport](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/clearfsimport.htm)**。
您可能会丢失一些元数据（例如版本的作者和标签），但至少它与源无关，并且由于您的大量导入仅涉及来自源的少数标签，因此您很快就会获得可操作的VOB。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T13:57:48.520

来自 IBM 的网站：

[http://www-01.ibm.com/support/docview.wss?ratlid=cctocbody&rs=984&uid=swg21222507](http://www-01.ibm.com/support/docview.wss?ratlid=cctocbody&rs=984&uid=swg21222507)

还有这个：

[http://www.cmcrossroads.com/component/option,com_fireboard/func,view/id,63051/catid,31/Itemid,593/](http://www.cmcrossroads.com/component/option,com_fireboard/func,view/id,63051/catid,31/Itemid,593/)

但是，ChrisF 的回答与我建议的相同。

考虑到迁移历史的“好处”，所涉及的努力通常是不值得的。

我只会对分支的当前“提示”进行快照，并将它们放在您的新版本控制系统下。

在我的职业生涯中，我至少经历了 3 次这个练习。一次转换为 Perforce，两次转换为 SVN。

我想我记得我们做了一些部分历史导入，但后来因为我们需要的信息是其他形式的，所以把它全部删除了。实际的存储库更改历史还不足以经历痛苦。我们确实将数据库保留了一年左右，以防有人想查看。我不记得有人抱怨它。

（我也很好奇为什么有人会选择 ClearCase 而不是其他的——我猜是为了与其他 Rational/IBM 东西集成）

编辑

我会问 ClearCase/IBM。他们将拥有最好的最新信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T14:35:40.613

我实际上经历了 VSS 到 Clear Case 的转换。Rational 有一个我们运行的转换工具。*在我们的 VSS 数据库上完成可能*需要 2 年（可能是 3 年，但不接近您的 10 年），这需要 FOREVER（2-3 天，但见下文）。但据我回忆，它起作用了。它保留了历史和标签。

缓慢的问题可能是由于我们新的源代码控制服务器中的 RAID 控制器不稳定。导入工作正常，但 Clear Case 会在工作几天后检测到数据中的损坏（通常是在标签之后）。在几次重新导入、固件更新和新服务器之后，一切都解决了。

我仍然打算给导入一个周末的时间来运行。试着找一个偶尔可以远程检查的人来检查它的进展。

附带说明一下，我还完成了到 Perforce 和 TFS 的 VSS 转换。一般来说，我建议尝试一下导入工具。如果他们工作，那就太好了。如果他们让您感到悲伤，请按照其他人的建议进行操作：只需将所有文件添加为新文件即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-31T15:42:06.310

我会采用最重要的标签并通过'clearfsimport'将它们导入ClearCase。

# build - 如何在 nant 构建脚本中进行错误处理？

> ID：868790
> 
> 赞同：2
> 
> 时间：2009-05-15T13:49:49.693
> 
> 标签：build, nant, scripting

我正在编写一个 NAnt 构建脚本，它负责将一些文件部署到 iss 服务器。作为其中的一部分，我想在我的脚本中添加错误处理——我以前没有使用过的东西。

引入错误处理不可避免地会导致对构建文件结构的思考。我认为结构是目标中逻辑的分组以及它们之间的依赖关系。

在 NAntContrib 中，我发现应该使工作比标准的“onfailure”属性更容易的任务。不幸的是，它唯一可能（至少对我而言）找到简短且相当简单的用法示例。我需要的是关于如何制作一个完整的文件结构来处理更复杂场景的错误的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-07-05T12:57:39.007

在任何脆弱的代码周围使用 try/catch 块怎么样？

[http://nantcontrib.sourceforge.net/release/0.85/help/tasks/trycatch.html](http://nantcontrib.sourceforge.net/release/0.85/help/tasks/trycatch.html)

# .net - 为什么强命名程序集不能使用未签名的程序集？

> ID：868799
> 
> 赞同：5
> 
> 时间：2009-05-15T13:51:09.767
> 
> 标签：.net, assemblies, code-signing

要对程序集 A 签名，您必须确保 A 使用的所有程序集 B、C、D 都已签名，然后是 B、C、D 等使用的所有程序集。我不明白这有什么安全好处。我认为它应该防止篡改，但是程序集A允许打开任何文件，并且这些文件可以被篡改。外部网络服务器也是如此。

此外，使用您公开的 .snk 文件对程序集进行签名太容易了，从而回避了要求。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-15T13:55:18.103

关键是，否则您可以将程序集 B/C/D 替换为不同的（被黑客入侵的）程序集，而 A 永远不会注意到；它会加载它们并执行代码。使用强命名，如果不使用相同的密钥重新签署被黑的 B/C/D，或者黑掉 A，就无法做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T13:54:12.803

强命名的另一个原因是版本控制。如果你引用一个强命名的程序集，你会得到那个特定的版本——它会在它所依赖的特定版本上加载它的依赖项。

**编辑**

示例场景：如果您将程序集放在 GAC 中，它必须是强命名的以允许并行版本控制。但是，您不能将它放在 GAC 中，除非它的依赖项也在那里（否则，它们将无法在运行时加载）。为了可靠地加载这些程序集，它们也需要在 GAC 中进行强命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T13:55:14.657

这是因为强命名程序集意味着它可以被信任，并且授予的安全级别基于代码来自合法来源的想法。这意味着它与之交互的所有其他项目也必须是可信的，因为它在相同的安全上下文下执行。

如果强命名对象不能以这种方式工作，一种攻击方法是用攻击者想要执行的恶意代码替换未签名的项目。恶意代码将在签名项目的可信安全上下文下执行。

# c# - c#到vb转换对象初始化

> ID：868800
> 
> 赞同：1
> 
> 时间：2009-05-15T13:51:42.013
> 
> 标签：c#, vb.net

我正在尝试学习 VB.net 并且已经用 c# 编程了一段时间。我已经掌握了 vb.net 的大部分内容，但是在对象初始化的转换中遇到了一些问题：

```
CustomerParameters customerParameters = new CustomerParameters
                                               {
                                                   FirstName = "C First Name",
                                                   LastName = "C Last Name"
                                               }; 
```

关于如何在 VB 中执行此操作的任何想法，或者是否有可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T13:55:32.533

```
Dim cp As New CustomerParameters() With { _
     .FirstName = "C First Name", _
     .LastName = "C Last Name" _
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T13:55:20.163

我这里不能查，因为语法需要VS2008，我只有VS2005。但在 VB.Net 中，您需要使用`With`关键字进行初始化。

```
Dim c As New CustomerParameters() With { _
    .FirstName = "C First Name", _
    .LastName = "C Last Name" _
} 
```

是的，这是正确的。VB中的花括号。

# java - SocketChannel如何知道读取文件何时完成？

> ID：868808
> 
> 赞同：1
> 
> 时间：2009-05-15T13:53:15.783
> 
> 标签：java, sockets, nio

我正在使用套接字通道和 NIO 概念从客户端读取数据。
Socket Channel 是如何知道文件读取完成的？

```
ByteBuffer byteBuffer = ByteBuffer.allocate(BUFSIZE);
int nbytes = socketChannel.getChannel().read(byteBuffer); 
```

如果数据很小，我会一次读取数据，但是如果数据很大，我会分片读取数据，最后得到相同的数据现在我想知道通道如何理解数据的结尾。
有什么方法可以让我知道文件读取何时完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T13:59:04.677

有三个基本选项：

*   协议可以指定文件的长度应该在数据之前。
*   协议可以指定一些“文件结束”标记（当然，这对于文件中的数据必须是无效的）
*   服务器可以在完成后关闭套接字：您的`read`调用将返回 -1 以通知您何时读取了所有数据

基本上数据流的方式，你不能依赖于特定数量的请求中的所有数据。

您使用的是什么协议，您可以适当地修改它吗？长度前缀通常是最简单的解决方案。

# sql - 我需要在 sql 中获取 alldata whereclause？

> ID：868809
> 
> 赞同：-1
> 
> 时间：2009-05-15T13:53:21.900
> 
> 标签：sql, sql-server, sql-server-2005

如果 Page!=@page，我需要获取所有数据，获取 AllDATA

从 scr_SecuristLog 中选择 count(page) 作为 TARIH，
(datepart(hour,Date)*60+datepart(minute,Date))/@countgap 作为 SIRA
，
其中 Date 在 @date1 和 @date2 之间，并且 Page=@page 或 Page = AllDATA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:17:10.967

尝试：

```
select
    count(page) as TARIH
        ,(datepart(hour,Date)*60+datepart(minute,Date))/@countgap as SIRA
    from scr_SecuristLog
    where Date between @date1 and @date2 and (Page=@page or Page = AllDATA) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:54:15.030

Solution: select count(page) as TARIH,
(datepart(hour,Date)*60+datepart(minute,Date))/@countgap as SIRA
from scr_SecuristLog
where Date between @date1 and @date2 and (Page=@page or @page='Tüm Kullanıcılar')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T14:58:25.800

```
select count(page) as TARIH,
(datepart(hour,Date)*60+datepart(minute,Date))/@countgap as SIRA
from scr_SecuristLog
where 
    Date between @date1 and @date2 
    and 
    (
        (@page is not null and Page=@page) 
        or (@page is null and @page=@page)
    ) 
```

will return all data between date1 and date2 and only data equal to the parameter, or if the parameter is null will return all data between date1 and date2

# vb.net - 在接口成员上使用多态性

> ID：868815
> 
> 赞同：0
> 
> 时间：2009-05-15T13:54:29.167
> 
> 标签：vb.net, inheritance, interface

好的，这是一个有点愚蠢的问题，但是我今天遇到了这个问题，这让我有些困惑，为什么会这样。

考虑以下结构

```
 Public Class Employee
    Implements IPerson

    Private _MyManager As Manager
    Public Property MyManager() As Manager Implements IPerson.TheirLeader
        Get
            Return _MyManager
        End Get
        Set(ByVal value As Manager)
            _MyManager = value
        End Set
    End Property

End Class

Public Class Manager
    Implements IPerson, IAuthorityFigure

    Private _MyBoss As Boss
    Public Property MyBoss() As Boss Implements IPerson.TheirLeader
        Get
            Return _MyBoss
        End Get
        Set(ByVal value As Boss)
            _MyBoss = value
        End Set
    End Property

End Class

Public Class Boss
    Implements IPerson, IAuthorityFigure

    'Implementation code here...

End Class

Public Interface IPerson

    Property TheirLeader() As IAuthorityFigure

End Interface

Public Interface IAuthorityFigure
    'Stuff here...
End Interface 
```

这是我的问题：我想让每个人都实现 IPerson 接口，无论他们是员工、老板还是经理。但是，他们每个人都有一个指向其领导的属性（员工有经理，经理有老板，等等）。除了他们实现了 IAuthorityFigure 接口之外，他们的领导者的每个实现都可能不同。我想让 IPerson 接口有一个 IAuthorityFigure 的属性，但是当我实现这个 b/c 时它会为我抛出一个编译器错误，IAuthorityFigure 与 Boss 或 Manager 的类型不同（即使它们实现了接口）。

所以，我做错了什么，或者这是使用接口与抽象类的限制。如果这是一个限制，谁能解释为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:17:14.527

你没有做错什么。在所有当前发布的 Visual Basic（和 C#）版本中，接口的方法、属性或字段的实现必须与接口上的签名完全匹配。没有办法覆盖它。

您可以做的最好的事情是拥有 2 个属性，一个用于实现接口，另一个用于返回实际实现。

```
Private _MyBoss As Boss
Public Property TheirLeader() As IAuthorityFigure Implements IPerson.TheirLeader
    Get
            Return MyBoss
    End Get
    Set(ByVal value As IAuthorityFigure)
            MyBoss = CType(value, IAuthorityFigure)
    End Set
End Property

Public Property MyBoss As Boos
    Get
            Return _MyBoss
    End Get
    Set(ByVal value As Boss)
            _MyBoss = value
    End Set
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:21:56.870

如果您列出定义 IPerson 接口的代码，将会有所帮助。但是，我猜您需要将 Manager 和 Boss 转换为 IAuthorityFigure 而不是他们的类。

# c# - 异步 UDP 套接字的问题

> ID：868826
> 
> 赞同：0
> 
> 时间：2009-05-15T13:56:50.190
> 
> 标签：c#, sockets, .net-2.0, udp

我在套接字编程方面有点挣扎（我一点也不熟悉），我找不到任何可以从谷歌或 MSDN 中得到帮助的东西（糟糕）。为这篇文章的长度道歉。

基本上我有一个现有的服务，它通过 UDP 接收和响应请求。我根本无法改变这一点。

我的 web 应用程序中还有一个客户端，它调度和侦听对该服务的响应。我得到的现有客户端是一个单例，它创建一个套接字和一个响应槽数组，然后使用无限循环方法创建一个后台线程，该方法进行“sock.Receive()”调用并将接收到的数据推送到槽阵列。关于这方面的各种事情对我来说似乎都是错误的，无限线程破坏了我的单元测试，所以我试图用一个让它异步发送/接收的服务替换这个服务。

第 1 点：这是正确的方法吗？我想要一个非阻塞、可扩展、线程安全的服务。

我的第一次尝试大致是这样的，这有点工作，但我得到的数据总是比预期的短（即缓冲区没有请求的字节数）并且在处理时似乎抛出异常。

```
private Socket MyPreConfiguredSocket;

public object Query()
{
    //build a request

    this.MyPreConfiguredSocket.SendTo(MYREQUEST, packet.Length, SocketFlags.Multicast, this._target);

    IAsyncResult h = this._sock.BeginReceiveFrom(response, 0, BUFFER_SIZE, SocketFlags.None, ref this._target, new AsyncCallback(ARecieve), this._sock);

    if (!h.AsyncWaitHandle.WaitOne(TIMEOUT)) { throw new Exception("Timed out"); }

    //process response data (always shortened)
}

private void ARecieve (IAsyncResult result) 
{
    int bytesreceived = (result as Socket).EndReceiveFrom(result, ref this._target);
} 
```

我的第二次尝试是基于更多的谷歌拖网和我经常看到的这种递归模式，但这个版本总是超时！它*永远不会*到达 ARecieve。

```
public object Query()
{
    //build a request

    this.MyPreConfiguredSocket.SendTo(MYREQUEST, packet.Length, SocketFlags.Multicast, this._target);

    State s = new State(this.MyPreConfiguredSocket);

    this.MyPreConfiguredSocket.BeginReceiveFrom(s.Buffer, 0, BUFFER_SIZE, SocketFlags.None, ref this._target, new AsyncCallback(ARecieve), s);

    if (!s.Flag.WaitOne(10000)) { throw new Exception("Timed out"); } //always thrown

    //process response data
}

private void ARecieve (IAsyncResult result) 
{
    //never gets here!
    State s = (result as State);
    int bytesreceived = s.Sock.EndReceiveFrom(result, ref this._target);

    if (bytesreceived > 0)
    {
        s.Received += bytesreceived;

        this._sock.BeginReceiveFrom(s.Buffer, s.Received, BUFFER_SIZE, SocketFlags.None, ref this._target, new AsyncCallback(ARecieve), s);
    }
    else
    {
        s.Flag.Set();
    }
}

private class State
{
    public State(Socket sock)
    {
        this._sock = sock;
        this._buffer = new byte[BUFFER_SIZE];
        this._buffer.Initialize();
    }

    public Socket Sock;    
    public byte[] Buffer;    
    public ManualResetEvent Flag = new ManualResetEvent(false);  
    public int Received = 0;
} 
```

第2点：很明显我弄错了。

第3点：我不确定我是否正确。来自远程服务的数据如何到达正确的监听线程？我需要为每个请求创建一个套接字吗？

走出我的舒适区。需要帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T14:23:00.313

不是你的解决方案，只是一个建议 - 提出最简单的代码，可以剥离所有线程/事件/等。从那里开始添加所需的，并且只需要的复杂性。我的经验一直是在这个过程中我会发现我做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T15:38:31.757

您确定您会收到对您发送的消息的回复吗？从套接字中删除异步行为，并尝试同步发送和接收（即使这可能暂时阻塞您的线程）。一旦您知道此行为有效，请编辑您的问题并发布该代码，我将帮助您处理线程模型。一旦网络部分，即发送/接收，工作，线程模型是相当简单的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T15:28:29.970

那么你的程序SUDO大纲如下吗？

```
Socket MySocket;
Socket ResponceSocket;

byte[] Request;
byte[] Responce;

public byte[] GetUDPResponce()
{
    this.MySocket.Send(Request).To(ResponceSocket);

    this.MySocket.Receive(Responce).From(ResponceSocket);

    return Responce;
} 
```

生病尝试帮助！第二个代码帖子是我们可以使用的代码和前进的方向。

但你是对的！文档不是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-04-07T23:37:07.810

一个可能的问题是，如果您的发送操作发送到服务器，并且它在 Windows 设置异步侦听器之前做出响应。如果您没有在监听数据，则您将不会接受数据（与 TCP 不同）尝试在发送操作之前调用 beginread。

# performance - 如何加快行进方块？

> ID：868831
> 
> 赞同：7
> 
> 时间：2009-05-15T13:57:27.613
> 
> 标签：performance, 3d, marching-cubes

我正在使用[这个行进立方体算法](http://local.wasp.uwa.edu.au/~pbourke/geometry/polygonise/)来绘制 3D 等值面（移植到 C#，输出`MeshGeomtry3D`s，但其他方面相同）。生成的曲面看起来很棒，但需要很长时间来计算。

有什么方法可以加快行进方块的速度吗？最明显的一种是简单地降低空间采样率，但这会降低生成的网格的质量。我想避免这种情况。

我正在考虑一个两遍系统，其中第一遍采样空间更粗糙，消除场强远低于我的等值的体积。这是明智的吗？有哪些陷阱？

**编辑：**代码已被分析，大部分 CPU 时间在行进立方体例程本身和每个网格单元角的场强计算之间分配。字段计算超出了我的控制范围，因此加快立方体例程是我唯一的选择......

我仍然对尝试消除死空间的想法很感兴趣，因为这会大大减少对两个系统的调用次数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T18:57:16.613

我知道这有点老了，但我最近基于相同的源实现了 Marching Cubes。这里有很多低效率的地方。至少如果你在做类似的事情

```
for (int x=0; x<densityArrayWidth; x++)
  for (int z=0; z<densityArrayLength; z++)
    for (int y=0; y<densityArrayHeight; y++)
      Polygonize(Gridcell, isolevel, Triangles) 
```

看看你会重新分配 edgeTable 和 Tritable 多少次！那些立即需要转移到整个班级。我也放弃了 gridCell 对象，直接从点/值到三角形。

简而言之，不仅仅是算法的复杂性，内存分配（并且在基础上做了很多）也需要时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-18T21:39:28.200

以防万一其他人在这里结束，通过更粗略的采样率消除死区*几乎没有任何区别*。任何远程安全（即：允许采样工件的边界）粗略采样最终都会在任何远程非平凡领域中抓取大部分网格。

加快基础领域评估（大量记忆）似乎*主要*解决了性能问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-04-25T05:45:05.380

尝试行进四面体 - 数学更简单，允许您考虑每个单元格更少的案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:29:07.947

每个立方体有 12 条边，如果您遍历每个立方体并找到 12 个交点，那么您对交点的计算量是 4 倍 - 您只需要在每个立方体的左下角使用 3 条边，并额外增加一行在区域的右上角，然后使用特殊升级来访问您找到的所有值。我将就此做一个主题，因为它需要讨论并且很复杂。

此外，通过使用八叉树评估 ISO 级别并跳过远离 ISO 级别的区域来测试需要多边形的空间区域。

我看过传播，但它不是那么可靠和有效。

# wpf - 是什么让 WPF 应用程序启动缓慢？

> ID：868841
> 
> 赞同：15
> 
> 时间：2009-05-15T13:58:42.790
> 
> 标签：wpf, startup

我注意到 WPF 应用程序启动有时很慢。有人知道原因是元素初始化还是 DLL 加载还是其他原因？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-05-15T14:02:36.307

下面的文字摘自[这篇关于改善 WPF 应用程序启动时间的 MSDN 文章](https://blogs.msdn.microsoft.com/jgoldb/2007/10/10/improving-wpf-applications-startup-time/)（编辑：现在合并到[WPF 应用程序启动时间](https://docs.microsoft.com/en-us/dotnet/framework/wpf/advanced/application-startup-time)）

# 应用程序启动时间

WPF 应用程序启动所需的时间量可能会有很大差异。本主题介绍了用于减少 Windows Presentation Foundation (WPF) 应用程序的感知和实际启动时间的各种技术。

**了解冷启动和热启动**

冷启动发生在您的应用程序在系统重新启动后第一次启动时，或者当您启动应用程序时，将其关闭，然后在很长一段时间后再次启动它。当应用程序启动时，如果 Windows 内存管理器的备用列表中不存在所需的页面（代码、静态数据、注册表等），则会发生页面错误。需要磁盘访问才能将页面放入内存。

当主要公共语言运行时 (CLR) 组件的大部分页面已经加载到内存中时，就会发生热启动，这样可以节省昂贵的磁盘访问时间。这就是托管应用程序在第二次运行时启动速度更快的原因。

**实现启动画面**

如果在启动应用程序和显示第一个 UI 之间存在明显的、不可避免的延迟，请使用*闪屏*优化感知的启动时间。这种方法几乎在用户启动应用程序后立即显示图像。当应用程序准备好显示它的第一个 UI 时，启动屏幕会消失。从 .NET Framework 3.5 SP1 开始，您可以使用[SplashScreen](https://msdn.microsoft.com/en-us/library/system.windows.splashscreen.aspx)类来实现启动画面。有关详细信息，请参阅[如何：将启动画面添加到 WPF 应用程序](https://msdn.microsoft.com/en-us/library/cc656886.aspx)。

您还可以使用本机 Win32 图形来实现自己的启动画面。[在调用Run](https://msdn.microsoft.com/en-us/library/system.windows.application.run.aspx)方法之前显示您的实现。

**分析启动代码**

确定冷启动缓慢的原因。磁盘 I/O 可能是原因，但情况并非总是如此。一般来说，您应该尽量减少对外部资源的使用，例如网络、Web 服务或磁盘。

在测试之前，请确认没有其他正在运行的应用程序或服务使用托管代码或 WPF 代码。

重新启动后立即启动 WPF 应用程序，并确定显示所需的时间。如果您的应用程序的所有后续启动（热启动）都快得多，那么您的冷启动问题很可能是由 I/O 引起的。

如果您的应用程序的冷启动问题与 I/O 无关，则可能是您的应用程序执行了一些冗长的初始化或计算，等待某个事件完成，或者在启动时需要大量 JIT 编译。以下部分更详细地描述了其中一些情况。

**优化模块加载**

使用 Process Explorer (Procexp.exe) 和 Tlist.exe 等工具来确定应用程序加载的模块。命令 Tlist <pid> 显示进程加载的所有模块。

例如，如果您没有连接到 Web 并且您看到 System.Web.dll 已加载，那么您的应用程序中有一个模块引用了此程序集。检查以确保引用是必要的。

如果您的应用程序有多个模块，请将它们合并到一个模块中。这种方法需要较少的 CLR 程序集加载开销。更少的程序集也意味着 CLR 维护的状态更少。

**延迟初始化操作**

考虑将初始化代码推迟到呈现主应用程序窗口之后。

请注意，初始化可能在类构造函数内部执行，如果初始化代码引用其他类，可能会导致执行许多类构造函数的级联效应。

**避免应用程序配置**

考虑避免应用程序配置。例如，如果应用程序具有简单的配置要求并且具有严格的启动时间目标，则注册表项或简单的 INI 文件可能是更快的启动替代方案。

**利用 GAC**

如果程序集未安装在全局程序集缓存 (GAC) 中，则强名称程序集的哈希验证和 Ngen 图像验证会导致延迟（如果计算机上有该程序集的本机映像）。GAC 中安装的所有程序集都会跳过强名称验证。有关详细信息，请参阅[Gacutil.exe（全局程序集缓存工具）](https://msdn.microsoft.com/en-us/library/ex0ss12c.aspx)。

**使用 Ngen.exe**

考虑在您的应用程序上使用本机图像生成器 (Ngen.exe)。使用 Ngen.exe 意味着用 CPU 消耗换取更多磁盘访问，因为 Ngen.exe 生成的本机映像可能比 MSIL 映像大。

为了缩短热启动时间，您应该始终在您的应用程序上使用 Ngen.exe，因为这避免了应用程序代码的 JIT 编译的 CPU 成本。

在某些冷启动情况下，使用 Ngen.exe 也很有帮助。这是因为不需要加载 JIT 编译器 (mscorjit.dll)。

同时拥有 Ngen 和 JIT 模块可能会产生最坏的影响。这是因为必须加载 mscorjit.dll，并且当 JIT 编译器处理您的代码时，当 JIT 编译器读取程序集的元数据时，必须访问 Ngen 图像中的许多页面。

**Ngen 和 ClickOnce**

您计划部署应用程序的方式也会影响加载时间。ClickOnce 应用程序部署不支持 Ngen。如果您决定将 Ngen.exe 用于您的应用程序，则必须使用另一种部署机制，例如 Windows Installer。

有关详细信息，请参阅[Ngen.exe（本机图像生成器）](https://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)。

**变基和 DLL 地址冲突**

如果您使用 Ngen.exe，请注意在内存中加载本机映像时可能会发生变基。如果由于该地址范围已分配而未在其首选基地址加载 DLL，则 Windows 加载程序将在另一个地址加载它，这可能是一项耗时的操作。

您可以使用虚拟地址转储 (Vadump.exe) 工具检查是否存在所有页面都是私有的模块。如果是这种情况，则模块可能已重新定位到不同的地址。因此，它的页面不能被共享。

有关如何设置基地址的详细信息，请参阅[Ngen.exe（本机图像生成器）](https://msdn.microsoft.com/en-us/library/6t9t5wcf.aspx)。

**优化验证码**

Authenticode 验证增加了启动时间。Authenticode 签名的程序集必须通过证书颁发机构 (CA) 进行验证。此验证可能很耗时，因为它可能需要多次连接到网络才能下载当前的证书吊销列表。它还确保在通往受信任根的路径上有完整的有效证书链。在加载程序集时，这可能会导致几秒钟的延迟。

考虑在客户端计算机上安装 CA 证书，或尽可能避免使用 Authenticode。如果您知道您的应用程序不需要发布者证据，则您无需支付签名验证的费用。

从 .NET Framework 3.5 开始，有一个配置选项允许绕过 Authenticode 验证。为此，请将以下设置添加到 app.exe.config 文件：

```
<configuration>
 <runtime>
    <generatePublisherEvidence enabled="false"/>
  </runtime>
</configuration> 
```

**在 Windows Vista 上比较性能**

Windows Vista 中的内存管理器有一项称为 SuperFetch 的技术。SuperFetch 分析一段时间内的内存使用模式，以确定特定用户的最佳内存内容。它不断工作以始终保持该内容。

这种方法与 Windows XP 中使用的预取技术不同，后者将数据预加载到内存中而不分析使用模式。随着时间的推移，如果用户在 Windows Vista 上频繁使用您的 WPF 应用程序，您的应用程序的冷启动时间可能会有所改善。

**高效使用 AppDomain**

如果可能，将程序集加载到与域无关的代码区域，以确保在应用程序中创建的所有 AppDomain 中使用本机映像（如果存在）。

为了获得最佳性能，请通过减少跨域调用来强制执行有效的跨域通信。如果可能，请使用不带参数或带有原始类型参数的调用。

**使用 NeutralResourcesLanguage 属性**

使用[NeutralResourcesLanguageAttribute](https://msdn.microsoft.com/en-us/library/system.resources.neutralresourceslanguageattribute.aspx)为[ResourceManager](https://msdn.microsoft.com/en-us/library/system.resources.resourcemanager.aspx)指定中性区域性。这种方法避免了不成功的程序集查找。

**使用 BinaryFormatter 类进行序列化**

如果必须使用序列化，请使用[BinaryFormatter](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)类而不是[XmlSerializer](https://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类。[BinaryFormatter](https://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)类在mscorlib.dll 程序集中的基类库 (BCL) 中实现。[XmlSerializer](https://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)在System.Xml.dll 程序集中实现，它可能是要加载的附加 DLL。

如果必须使用[XmlSerializer](https://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类，则通过预先生成序列化程序集可以获得更好的性能。

**配置 ClickOnce 以在启动后检查更新**

如果您的应用程序使用 ClickOnce，请通过将 ClickOnce 配置为在应用程序启动后检查部署站点的更新来避免启动时的网络访问。

如果您使用 XAML 浏览器应用程序 (XBAP) 模型，请记住即使 XBAP 已经在 ClickOnce 缓存中，ClickOnce 也会检查部署站点的更新。有关详细信息，请参阅[ClickOnce 安全性和部署](https://msdn.microsoft.com/en-us/library/t71a733d.aspx)。

**将 PresentationFontCache 服务配置为自动启动**

重新启动后运行的第一个 WPF 应用程序是 PresentationFontCache 服务。该服务缓存系统字体，改进字体访问，并提高整体性能。启动服务会产生开销，在某些受控环境中，可以考虑将服务配置为在系统重新启动时自动启动。

**以编程方式设置数据绑定**

不要使用 XAML 以声明方式为主窗口设置[DataContext ，而是考虑在](https://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)[OnActivated](https://msdn.microsoft.com/en-us/library/system.windows.application.onactivated.aspx)方法中以编程方式设置它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-13T10:58:46.117

我见过的关于修复 WPF 启动性能的最有用的建议是[在另一个问题](https://stackoverflow.com/questions/2947118/wpf-slow-to-start-on-x64-in-net-framework-4-0)中给出的：在每个框架文件夹中运行“ngen update”。

微软似乎无法让他们的 ngen 缓存保持最新，这导致您的应用程序几乎每次启动时都要重新编译一半的 .NET 框架。

很难相信，但似乎是真的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T14:07:39.307

如果使用 Framework 3.51 而不是 3.5 或 3.0，WPF 应用程序的启动时间会快得多。3.51确实是一个改进。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-27T02:10:34.707

这是一个旧线程，但我在尝试修复 Win10 系统上的 WPF 应用程序的启动性能问题时已经多次来到这里，所以我想我会陈述一个可能对其他人有帮助的答案 - 一个需要该系统上所有 WPF 应用程序的可怕启动时间为 5 秒，降至几毫秒。 **删除 nVidia“3d Vision”驱动程序**。我有一张 GeForce GTX 650 卡，“3d Vision”驱动程序似乎没有提供任何有用的东西，所以删除它对我来说没有问题。VisualStudio2015 性能分析工具最终帮助显示，在通过 nvapi64.dll（nVidia 驱动程序）调用后，几乎所有的 5 秒启动时间都花在了 IDLE 上。哇。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-23T15:22:16.337

Stuart 链接到的优秀文章对我帮助最大的是 XmlSerializer 技巧。这真的剃了好几秒钟。此外，不要低估对 HD 进行碎片整理 :-)

# c# - 通过 C# 登录到 HTTPS 页面

> ID：868844
> 
> 赞同：2
> 
> 时间：2009-05-15T13:59:22.320
> 
> 标签：c#, asp.net-mvc

我似乎真的无法在任何地方找到这个，所以我想知道你是否可以提供帮助。我正在尝试创建一个通过 C# 自动登录到 HTTPS 链接的脚本。

所以本质上 - 我有一个包含我需要每天运行的报告的 URL，但它在使用用户名/密码的 HTTPS 登录后面。

我正在尝试在 C# 中创建一个在 X 时间运行的脚本，使用用户名/密码登录？有任何想法吗？

会爱你很久！:)

编辑：--- 好的，如果我想将 *.txt 文件自动保存到数据库中怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T14:12:59.857

这是我编写的一些示例代码，用于登录网站以发送 SMS 消息：

```
private void sendMessage(SmsMessage message)
    {
        HttpWebRequest request;
        HttpWebResponse response;
        CookieContainer cookies;
        string url = "http://www.xyzwebsite.com/";

        try
        {
            request = (HttpWebRequest)WebRequest.Create(url);
            request.AllowAutoRedirect = true;
            request.CookieContainer = new CookieContainer();
            response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                cookies = request.CookieContainer;

                request = (HttpWebRequest)WebRequest.Create(url);
                request.Method = "POST";
                request.ContentType = "application/x-www-form-urlencoded";

                String postData = "emailfrom="+credentials.Username+"&npa="+message.DestinationPhoneNumber.Substring(0,3)+"&exchange="+message.DestinationPhoneNumber.Substring(3,3)+"&number="+message.DestinationPhoneNumber.Substring(6)+"&body="+HttpUtility.UrlEncode(message.MessageText)+"&submitted=1&submit=Send";
                byte[] data = System.Text.ASCIIEncoding.ASCII.GetBytes(postData);
                request.ContentLength = data.Length;
                Stream stream = request.GetRequestStream();
                stream.Write(data, 0, data.Length);

                request.CookieContainer = cookies;

                stream.Close();

                response = (HttpWebResponse)request.GetResponse();

                response.Close();
            }
            else
            {
                Console.WriteLine("Client was unable to connect!");
            }
        }
        catch (System.Exception e)
        {
            throw new SMSDeliveryException("Unable to deliver SMS message because " + e.Message, e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-05-15T14:04:04.667

WebClient 和 NetworkCredential 应该为您解决这个问题，例如：

[http://www.4guysfromrolla.com/articles/102605-1.aspx](http://www.4guysfromrolla.com/articles/102605-1.aspx)

# xml - 如何在 XML 中获取不区分大小写的元素

> ID：868850
> 
> 赞同：10
> 
> 时间：2009-05-15T14:00:46.297
> 
> 标签：xml, xsd, case-sensitive

据我所知，XML 元素类型名称和属性名称是区分大小写的。

有没有办法或任何技巧来获取不区分大小写的元素？

**澄清**：已通过 XSD 定义了一种语法，用于某些客户端上传数据。用户 - 内容生成器 - 正在使用不同的工具创建 XML 文件，但其中许多人使用纯文本编辑器或其他工具。有时，当这些人试图上传他们的文件时，他们会遇到不兼容错误。尽管标签区分大小写总是很清楚，但它们混合使用小写和大写标签是一个常见错误。

我可以访问定义此语法的 XSD 文件，并且可以更改它。问题是如何避免这种容易出错的小写/大写标签问题。

任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T14:38:20.840

如果我正确理解您的问题，则只能通过第 3 方解析工具在创建和上传之间纠正案例错误。

即 XML 文件 > 针对 XSD 解析并更正 > 上传批准

您可以在运行时通过为您的客户端开发一个容器应用程序来创建他们的 XML 文件来执行此操作。或者，您可以在服务器端编写一个应用程序来获取上传的文件并检查语法。无论哪种方式，您都必须做出决定，然后做一些工作！

很大程度上取决于问题的规模。如果您在 XSD 中的不同情况下有类似的标签，例如，但您正在接收，那么您将需要一个基于节点计数等的复杂解决方案。

如果您完全被客户端使用随机大小写来对抗仅包含小写标签的 XSD，那么您应该能够解析文件并将所有标签一次性转换为小写。这是假设标签之间的内容是多写的，您不能只转换整个文档。

你如何做到这一点取决于你的情况。显然，让客户对自己的提交进行错误检查会更容易。如果这不切实际，那么您需要在此过程中确定一个机会之窗，以便在遇到错误之前将文件转换为正确的格式。

有太多的方法可以在这里讨论。这主要取决于您可用的技能或资金。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-17T03:42:24.053

简单的解决方案是在您从用户加载 xml 时将所有标签/属性发送到小写，然后才通过为所有小写标签/属性设计的 xsd 检查它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:11:37.347

XPath/ Xslt 处理器区分大小写。如果您指定了错误的大小写，他们将无法选择节点/属性。

如果您想输出节点名称并希望它是大写的，您可以执行以下操作：

```
upper-case(local-name()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T17:00:52.243

正如@Melkisadek 所说，XSD 验证是有目的的。如果您允许用户上传带有无效 XML 的文件，那么当访问这些文件中的数据时，您的应用程序必然会失败。此外，让 XSD 验证输入 XML 模式的整个目的都被打破了。如果您愿意放弃整个模式验证功能，那么您需要使用 XSLT 将所有标签转换为您想要的大写或小写（请参阅@Rashmi 的答案）。

这类似于允许用户在社会安全号码输入字段中输入特殊字符，只是因为用户更愿意输入特殊字符（是的，这个例子很愚蠢，想不出更好的例子！）

因此，在我看来，解决方案在于保持模式验证原样，但为用户提供一种在上传之前验证模式的方法。例如，如果这是 Web 应用程序，您可以在页面上提供一个按钮，该按钮使用 Javascript 来根据您的架构验证文件。或者，仅在上传文件时在服务器上进行验证。在这两种情况下，提供适当的反馈，例如错误实体所在的行号、字符位置以及标记错误的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-15T13:12:56.900

理论上，您可以尝试破解 XML Schema 来验证不正确大写的元素名称。

这可以通过使用XML Schema 中的*替换组机制来完成。*例如，如果您的架构已定义：

```
 <xsd:element name="foobar" type="xsd:string"/> 
```

那么您可以将以下内容添加到 XML 模式中：

```
 <xsd:element name="Foobar" type="xsd:string" substitutionGroup="foobar"/>
  <xsd:element name="FooBar" type="xsd:string" substitutionGroup="foobar"/>
  <xsd:element name="fooBar" type="xsd:string" substitutionGroup="foobar"/>
  <xsd:element name="FOOBAR" type="xsd:string" substitutionGroup="foobar"/> 
```

等等

尝试并预测他们可能犯的错误。对于每个元素，可能有 2^n 种可能的情况组合，其中 n 是名称的长度（假设名称的每个字符都是一个字母）。

在实践中，这太麻烦了，只会拖延问题而不是解决问题，而且很可能行不通。如果用户没有意识到 XML 是区分大小写的，那么他们可能没有与开始标记的大小写匹配的结束标记，并且仍然无法验证。

正如其他人所说，要么预处理提交的输入以修复案例，要么让用户在提交之前生成正确的输入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T14:10:25.993

XML 通常是机器生成的。`<RANdOm />`因此，在这里宽度大小写应该没有真正的问题。

如果真正的问题是两个不同的系统正在生成两种不同类型的标签（`<Widget />`vs. `<widget />`），我想您可以简单地在 XSD 中定义这两种情况。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-20T17:07:31.850

上传后，遍历 XML 文件（通过 DOM 或 SAX）并在验证之前修复大小写？

# asp-classic - 如何以编程方式在 asp 页面中进行 301 重定向？

> ID：868851
> 
> 赞同：2
> 
> 时间：2009-05-15T14:01:18.620
> 
> 标签：asp-classic, redirect, http-status-code-301

我正在将一些经典的 asp 页面升级到 .net，但不是全部。而不是去修改这个向后系统中的所有链接，它会从 cms 数据存储中提取它的一些链接。我想利用 http 并删除该文件的代码，并执行程序化 301，以便可以逐步升级所有其他页面。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-05-15T14:04:44.367

```
Response.Buffer = true
Response.Status = "301 Redirect"
Response.AddHeader "Location", "redirection-url-goes-here"
Response.End 
```

# c++ - 将条形码扫描仪输入重定向到 linux 中的特定小部件

> ID：868853
> 
> 赞同：2
> 
> 时间：2009-05-15T14:02:10.707
> 
> 标签：c++, linux, qt, usb, barcode

我有一个 Symbol LS2208 条码扫描仪，在我的 linux 机器（Kubuntu 8.10 Intrepid Ibex）中工作正常。每当您扫描条形码时，扫描仪（连接到 USB 端口）会将读数发送到文本插入符号所在的任何位置。我想将扫描仪的所有读数重定向到我的应用程序中的特定小部件（即文本编辑控件）。我该怎么做？尽管我将 C++ 与 Qt GUI 库一起使用，但任何语言或 GUI 库都欢迎示例代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T18:44:18.940

这可能很棘手，因为大多数条形码扫描仪也被称为键盘楔。它们充当键盘并将按键推入事件流中，以便尽可能与键盘无法区分。这使得最大的兼容性。

许多 USB 条形码扫描仪将自己发布为 HID 端点，然后出于所有意图和目的，它们都是键盘。

您可以尝试做很多事情 - 许多扫描仪可配置为允许它们在条形码数据周围添加前缀和后缀。如果您可以对此进行测试，您只需将字符串发送到正确的位置。这是令人不快的，因为您必须对扫描仪进行元编程。通常这是通过一组特殊的条形码来完成的。 [这是](http://www.modul-bio.com/media/Symbol_LS2208_Manual.pdf)您的扫描仪手册的链接。在第 249 页，有用于元编程前缀和后缀的条形码。

您可能想弄清楚如何成为 HID 事件的客户端并将扫描仪事件重定向到您想要的位置。我从未尝试在 LINUX 上这样做。这对 Windows 和 OS 9 时代的 Mac 来说都是一种痛苦（我最后一次广泛使用 USB）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T17:33:06.630

我不知道答案，但这里有一些建议可以帮助您了解您的选择：

1.  在 QCoreApplication::instance() 上安装事件过滤器（或重新实现 QCoreApplication::notify()）
2.  在事件过滤器处理程序中，输出每个事件以寻找有用的信息：

    ```
    void eventFilter(QObject *obj, QEvent *evt) {
        qDebug() << obj << evt;
    } 
    ```

3.  检查调试输出以确定扫描程序触发了哪些事件。

qDebug() 几乎可以理解每一种类型，并且应该为您提供合理的输出，让您可以判断它是作为键盘事件还是以其他方式出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-19T22:47:33.400

接受的答案似乎有问题。输入将由任何被认为是活动的应用程序处理。因此，如果有人打开 Web 浏览器然后开始扫描条形码，则输入会转到 Web 浏览器而不是应用程序。所需的应用程序甚至不会看到这些事件。

如果应用程序处于活动状态，那么您可以捕获事件并最终确定哪些事件来自条形码扫描仪。然后可以激活适当的小部件以接收输入。

# sql-server - 可以在 SSIS 中编辑集合

> ID：868854
> 
> 赞同：1
> 
> 时间：2009-05-15T14:02:25.467
> 
> 标签：sql-server, ssis

我正在尝试更改 SSIS 中的维护计划，以根据某些条件将某些数据库动态备份到某些位置……但看起来维护任务使用了所选数据库列表的集合。据我所知，我似乎无法通过表达式操作集合，也无法加载变量以作为集合工作。

有谁知道解决这个问题的聪明方法，还是我只需要减少损失并全部投入到 t-sql 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:12:08.297

SSIS 一直是我的烦恼之源。就个人而言，我会在 TSQL 中编写作业，然后使用 SQL Server 代理安排它。如果我需要编辑作业，我需要做的就是打开 SQL Management Studio 并进行更改，这对我来说感觉更轻。只是我的2美分。

# php - 在php中组合和压缩多个JavaScript文件

> ID：868857
> 
> 赞同：12
> 
> 时间：2009-05-15T14:02:55.213
> 
> 标签：php, javascript, jquery, jscompress

我正在开发一个需要八个 javascript 文件（hello web2.0）的 PHP 应用程序。

我想知道动态组合和压缩所有文件的最佳方法是什么。我是否正确地表达了这个问题？

最终结果是我将在标题中包含一个 .js 文件，并且该 .js 文件将包含我的“includes/js”目录中的 .js 文件。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-05-15T14:17:00.767

你可以使用[jsmin-php](http://code.google.com/p/jsmin-php/)

他们的示例代码是：

```
require 'jsmin-1.1.1.php';

// Output a minified version of example.js.
echo JSMin::minify(file_get_contents('example.js')); 
```

您可以通过执行以下操作轻松加入多个 js 文件：

```
require 'jsmin-1.1.1.php';

// Output a minified version of example.js.
echo JSMin::minify(file_get_contents('example.js') . file_get_contents('example2.js')); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-05-15T14:16:49.550

我在我的 jQuery/PHP 项目中使用了[Minify ，并取得了很大的成功。](http://code.google.com/p/minify/)它也包括缓存，因此没有太多开销。

我最终改变了事情并使用 .htaccess 将所有请求路由到我的 javascript 文件夹到 minify 脚本，例如：

```
<script type="text/javascript" src="/js/jquery.js,js/jquery-levitip.js,js/jquery-facebox.js,js/datepicker.js,js/ga.js"></script> 
```

将我的前端 HTML 路由到我的缩小脚本中，它将所有这些脚本作为一个，压缩和缩小返回。这样我就可以正常定义包含，一切都发生在幕后。

但无论如何，请查看他们网站上的[用户指南](http://code.google.com/p/minify/wiki/UserGuide)，它有很好的文档记录，您也应该能够按照您想要的方式进行操作。哦，它也适用于 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T14:17:47.970

您也许可以使用[Yahoo JavaScript Compressor](http://developer.yahoo.com/yui/compressor/)，它是一个命令行工具，您可以从 PHP 脚本开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T05:45:12.063

您可以尝试[PHP Speedy](http://phpspeedy.com)这将为您组合并压缩您的 JS 文件为 1 个单个文件。它还将压缩您的 HTML 和 CSS，并且您的页面将加载得更快。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-21T17:55:48.393

```
 function compress($buffer) {
        /* remove comments */
        $buffer = preg_replace("/((?:\/\*(?:[^*]|(?:\*+[^*\/]))*\*+\/)|(?:\/\/.*))/", "", $buffer);
        /* remove tabs, spaces, newlines, etc. */
        $buffer = str_replace(array("\r\n","\r","\t","\n",'  ','    ','     '), '', $buffer);
        /* remove other spaces before/after ) */
        $buffer = preg_replace(array('(( )+\))','(\)( )+)'), ')', $buffer);
        return $buffer;
    } 
```

来源：[http ://castlesblog.com/2010/august/14/php-javascript-css-minification](http://castlesblog.com/2010/august/14/php-javascript-css-minification)

# c# - ListView 滚动条弄乱了我的布局

> ID：868860
> 
> 赞同：0
> 
> 时间：2009-05-15T14:03:17.850
> 
> 标签：c#, .net, wpf, xaml

我有一个 WPF 列表框，通常显示 4 或 5 个项目。对于我的应用程序，这意味着我几乎不必显示滚动条（有足够的空间）。

但是，如果列表中有更多项目，我需要显示垂直滚动条，但结果是我的内容空间更少，并且在我在列表框后面创建的“背景”上看起来不再好看。

我喜欢在我的布局中“保留”空间以显示滚动条。有没有办法做到这一点？（也许滚动条覆盖在内容上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T21:13:52.497

用 ScrollViewr 包装它怎么样？

```
<ScrollViewer VerticalScrollBarVisibility="Auto">
<!-- your ListBoxHere -->           
</ScrollViewer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-18T08:10:24.000

好的，找到了解决办法。

我按照[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms771748.aspx)为 ScrollViewer 创建了一个新的默认样式。然后我改变了放置滚动条的部分。

*原始行为*

```
<Grid>
  <Grid.ColumnDefinitions>
    <ColumnDefinition Width="Auto"/>
    <ColumnDefinition Width="*"/>
  </Grid.ColumnDefinitions>
  <Grid.RowDefinitions>
    <RowDefinition Height="*"/>
    <RowDefinition Height="Auto"/>
  </Grid.RowDefinitions>
  <Border Grid.Row="0" Grid.Column="1">
    <ScrollContentPresenter CanContentScroll="True" Content="{TemplateBinding ScrollViewer.Content}" />
  </Border>
  <ScrollBar Orientation="Vertical" Grid.Row="0" Grid.Column="0" Minimum="0" Maximum="{TemplateBinding ScrollViewer.ScrollableHeight}" Value="{TemplateBinding ScrollViewer.VerticalOffset}" ViewportSize="{TemplateBinding ScrollViewer.ViewportHeight}" Name="PART_VerticalScrollBar" Visibility="{TemplateBinding ScrollViewer.ComputedVerticalScrollBarVisibility}" />
  <ScrollBar Orientation="Horizontal" Grid.Row="1" Grid.Column="1" Minimum="0" Maximum="{TemplateBinding ScrollViewer.ScrollableWidth}" Value="{TemplateBinding ScrollViewer.HorizontalOffset}" ViewportSize="{TemplateBinding ScrollViewer.ViewportWidth}" Name="PART_HorizontalScrollBar" Visibility="{TemplateBinding ScrollViewer.ComputedHorizontalScrollBarVisibility}"/>
</Grid> 
```

*新行为*

```
<Grid>
  <!-- Presentation below is different from the default: the scrollbar is overlayed on the content. -->
  <ScrollContentPresenter CanContentScroll="True" Content="{TemplateBinding ScrollViewer.Content}" />
  <ScrollBar Orientation="Vertical" HorizontalAlignment="Right" Minimum="0" Maximum="{TemplateBinding ScrollViewer.ScrollableHeight}" Value="{TemplateBinding ScrollViewer.VerticalOffset}" ViewportSize="{TemplateBinding ScrollViewer.ViewportHeight}" Name="PART_VerticalScrollBar" Visibility="{TemplateBinding ScrollViewer.ComputedVerticalScrollBarVisibility}" />
  <ScrollBar Orientation="Horizontal" VerticalAlignment="Bottom" Minimum="0" Maximum="{TemplateBinding ScrollViewer.ScrollableWidth}" Value="{TemplateBinding ScrollViewer.HorizontalOffset}" ViewportSize="{TemplateBinding ScrollViewer.ViewportWidth}" Name="PART_HorizontalScrollBar" Visibility="{TemplateBinding ScrollViewer.ComputedHorizontalScrollBarVisibility}"/>
</Grid> 
```

现在滚动条覆盖在内容上，因此它们在可见时不会占用额外的空间。当然，内容现在应该为内容保留空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T12:00:23.003

正如您在问题中所说，您只需要保留垂直滚动条的宽度，下面的 XAML 代码会给您一些想法。

```
<ScrollViewer VerticalScrollBarVisibility="Auto">
    <Grid> 
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="30"/> <!-- reserved for the vertical scrollbar -->
        </Grid.ColumnDefinitions>

        <Listbox .../>
    </Grid>
</ScrollViewer> 
```

# opengl - 如何在opengl中将纹理应用于QUAD_STRIP？

> ID：868861
> 
> 赞同：1
> 
> 时间：2009-05-15T14:03:28.350
> 
> 标签：opengl

好吧，我正在尝试将纹理应用于 2 个正方形，但我只能应用于第一个。

我正在使用原始的 QUAD__STRIP 来绘制正方形。继承人代码：

```
glBegin(GL_QUAD_STRIP);
            glTexCoord2f(0.0,1.0);  glVertex3f(-1.0f * size, -1.0f* size, 0);    //1
            glTexCoord2f(0.0,0.0);  glVertex3f(-1.0f* size,  1.0f* size, 0);   //2
            glTexCoord2f(1.0,1.0);  glVertex3f(1.0f* size, -1.0f* size, 0);   //3
            glTexCoord2f(1.0,0.0);  glVertex3f(1.0f* size,  1.0f* size, 0);//4
                                    glVertex3f(3.0f* size,  -1.0f* size, 0);//5
                                    glVertex3f(3.0f* size,  1.0f* size, 0);//6

```
 glEnd(); 
``` 
```

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T18:25:28.093

当你看到这行代码时：

```
glTexCoord2f(0.0,1.0);  glVertex3f(-1.0f * size, -1.0f* size, 0);    //1 
```

第一个语句*glTexCoord2f()*指定纹理的哪个点连接到指定的顶点（*glVertex3f()*）。对于每个顶点，您必须告诉纹理的哪个点映射到它。

看这里可能对您有用：[GameDev.NET - OpenGL 纹理映射：介绍](http://www.gamedev.net/reference/articles/article947.asp) 尤其是“纹理坐标系”部分。

希望这可以帮助！

*编辑，也试试[http://nehe.gamedev.net/](http://nehe.gamedev.net/)！很多 OpenGL 教程/文章，教程第 6 课中有纹理映射。:) （虽然这不是良好编码实践的一个很好的例子）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:11:53.710

您没有为第二个四边形上的最后 2 个顶点（5 和 6）设置纹理坐标。

# html - iframe 中 CSS 类的样式

> ID：868862
> 
> 赞同：1
> 
> 时间：2009-05-15T14:03:35.900
> 
> 标签：html, css, iframe

受新的[User Flair](https://stackoverflow.com/users/flair)启发，但这个问题也适用于一般情况。

假设我想在一个不允许我指定外部样式或使用任何 JavaScript 代码的网站上包含类似的内容。我唯一能做的就是粘贴`object`,`embed`或`iframe`, 以及其他一些简单的 HTML。此外，空间的宽度仅为 160 像素，而不是天赋徽章默认所需的 200 像素。

为了解决这个问题，我想为`valuable-flair`iframe 中的类设置样式，即将宽度更改为`160px`而不是`200px`. 然后一切都会好起来的，只要用户名不重叠（即使那样，一旦我弄清楚这一点，我也可以使用相同的技术来玩它）。

如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T15:09:21.840

如果您无法控制 SRC 属性中的页面，则无法使用 CSS 更改 Iframe 的设计。

我建议您改为在服务器端读取 iframe 的 src（使用 PHP、Python 或您喜欢的），例如 fopen() 将 src 和 fread() 放入一个变量中，而不是对该变量执行一些 str_replace （以提取内容, 删除 <body>,</body>...) 使用设计并将结果放置在您的页面中。

这样您就可以控制设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T19:47:13.780

如果宽度和高度的 CSS 以百分比而不是绝对值表示，您可以通过调整 IFrame 来调整宽度。但是，如果您无法托管自定义实现，那么如果没有 JavaScript，您将不走运。

# css - 锚定到父 div 顶部和底部的 DIV

> ID：868867
> 
> 赞同：2
> 
> 时间：2009-05-15T14:04:13.747
> 
> 标签：css, layout, html

这可能是一个非常愚蠢的问题，不要把你的鞋子扔给我 :)

考虑使用这样的 HTML：

```
<div class="container">
    <div class="header">
    </div>
    <div class="body">
    </div>
    <div class="footer">
    </div>
</div> 
```

我希望“页眉”和“页脚”分别锚定到父级的顶部和底部，并且“主体”可以轻松增长以适应所有可用空间。实现这一目标的 CSS 会是什么样子？

编辑：也许我说错了（我不完全是网络开发人员:)），但我需要的是让 div 的某些部分始终连接到它的底部。因此，当 div 增长时，这部分（可能具有固定大小）会随着 div 的下端而降低。但这并不意味着将 div 附加到浏览器窗口的底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T14:13:33.940

如果我正确理解您的问题，您需要一些非常基本的 CSS。

```
body { background: black; }
.container { width: 960px; }
.header { height: 100px; background: #ddd; }
.content { padding: 10px; }
.footer { height: 100px; background: #ddd; } 
```

您的 div 不会浮动，因此会像煎饼一样堆叠在一起。

如果您希望页脚“粘性”，请参阅此处以获取解决方案... [http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-16T18:23:32.177

干得好：

[**示例页面 - 页脚粘在底部**](http://codepen.io/vsync/pen/FyluI)

这将
在页脚和页眉之间包含内容。
没有重叠。

## HTML

```
<header>HEADER</header>
<article>
  <p>some content here (might be very long)</p>
</article>
<footer>FOOTER</footer> 
```

## CSS

```
html{ height:100%; }
body{ min-height:100%; padding:0; margin:0; position:relative; }
body:after{ 
  content:''; 
  display:block; 
  height:100px; // compensate Footer's height
} 

header{ height:50px; }

footer{ 
  position:absolute; 
  bottom:0; 
  width:100%; 
  height:100px; // height of your Footer (unfortunately it must be defined)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:27:15.620

试试这个：`position: relative`在父 div 上设置。`position: absolute`在内部 div(s) 上设置并设置顶部*和*底部属性；不要设置高度。根据需要，内部 div(s) 应与父级垂直拉伸。（不幸的是，不适用于 IE6 及以下版本）。

# broadcasting - 发送和接收广播消息

> ID：868870
> 
> 赞同：0
> 
> 时间：2009-05-15T14:04:27.753
> 
> 标签：broadcasting

伙计们，我在这里需要一些帮助。我正在用 c# 做一个项目，其中数据需要作为数据报发送并接收广播的数据。

以下是代码：

```
 public void StartUdpListener(Object state)
    {

        receivedNotification = udpServer.Receive(ref remoteEndPoint);
        notificationReceived = Encoding.ASCII.GetString(receivedNotification);

        listBox = new StringBuilder(this.listBox1.Text);
        listBox.AppendLine(notificationReceived);

        if (listBox1.InvokeRequired)
        {
            this.Invoke((MethodInvoker)delegate { this.listBox1.Items.Add(listBox.ToString()); });
        }

    }

    public void StartNotification()
    {

        ThreadPool.QueueUserWorkItem(new WaitCallback(StartUdpListener));

        hostName = Dns.GetHostName();
        hostBuffer = Encoding.ASCII.GetBytes(hostName);

        UdpClient newUdpClient = new UdpClient();
        newUdpClient.Send(hostBuffer, hostBuffer.Length, notifyIP);

    } 
```

你们能否告诉我代码是否正常，因为周围没有人可以在局域网上测试代码，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-15T14:11:45.583

为什么不在单独的实例中设置自己的广播器和侦听器。

[这是一篇关于 c# 中套接字编程的好文章](http://www.codeproject.com/KB/IP/socketsincsharp.aspx)

# python - HTML新手问题：Django HttpResponse中字符的彩色背景

> ID：868871
> 
> 赞同：1
> 
> 时间：2009-05-15T14:04:30.140
> 
> 标签：python, html, django, colors

我想生成一个包含特定字符串的 HttpResponse。对于字符串中的每个字符，我都有一个要使用的背景颜色。

为简单起见，假设我只能在背景中使用绿色阴影，并且“背景颜色”数据表示绿色域中的“亮度级别”。

例如，响应可能是“abcd”，而我的“背景颜色”数据可能是：

```
[0.0, 1.0, 0.5, 1.0] 
```

这意味着第一个字符“a”需要有深绿色背景（例如 004000），第二个字符“b”需要有亮绿色背景（例如 00ff00），第三个字符“c”需要有“中等”亮度（例如 00A000），等等。

我不想使用模板，而只是返回“纯文本”响应。那可能吗？

如果不是 - 我可以使用的最简单的模板是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T14:28:52.640

它可能是这样的：

```
aString = 'abcd'
newString =''
colors= [0.0, 1.0, 0.5, 1.0]
for i in aString:
    newString = newString + '<span style="background-color: rgb(0,%s,0)">%s</span>'%(colors.pop(0)*255,i)

response = HttpResponse(newString) 
```

未经测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:30:08.613

您可以使用这样的东西在 django 视图本身中生成 html 并将其作为 text/html 返回

```
data = "abcd"
greenShades = [0.0, 1.0, 0.5, 1.0]

out = "<html>"
for d, clrG in zip(data,greenShades):
    out +=""" <div style="background-color:RGB(0,%s,0);color:white;">%s</div> """%(int(clrG*255), d)
out += "</html>" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:35:16.277

您最好的选择是使用该`span`元素以及样式表。如果您不想使用模板，则必须内联渲染此模板。一个例子：

```
string_data = 'asdf'
color_data = [0.0, 1.0, 0.5, 1.0]
response = []
for char, color in zip(string_data, color_data):
    response.append('<span style="background-color:rgb(0,%s,0);">%s</span>' % (color, char)
response = HttpResponse(''.join(response)) 
```

我想如果你愿意，这也可以在模板中完成。

# visual-studio - 在 Visual Studio 2008 中，工具箱中的所有项目都显示为灰色

> ID：868872
> 
> 赞同：1
> 
> 时间：2009-05-15T14:04:37.240
> 
> 标签：visual-studio, visual-studio-2008

当我打开 Winform 项目时，我的所有控件在工具箱中都是灰色的。我已经重新安装了 VS2008 并尝试了此处指示的所有步骤，但没有：

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/8db82810-bffd-4d07-8e50-029d2a26f7be/](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/8db82810-bffd-4d07-8e50-029d2a26f7be/)

如果在重新安装 VS2008 时可以关联我在安装 .net Framework 3.5 时遇到问题，它抱怨缺少 .NET 2.0SP1。我解决了安装 .net Framework 3.5 SP1 和 VS2008 的问题。目前我正在尝试安装 .NET Framework 2.0SP1，但它不起作用：设置停止并显示“设置错误”就是这样。我不知道这些问题是否相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:07:01.340

open a package in the BID. Then the control flow items will show up. all other items(eg data flow tak) will be greyed out Drag a control flow item. For eg, if you drag a data flow task, then edit it. Now the toolbox will show Data Flow destinations and transformations. This means, BID will show control flow items if the control flow tab is active. then you can drag a control flow items and edit it to add any task based on the control flow task you added

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T14:08:04.577

从头开始，然后重试（从 .NET 2.0 开始）

*   .NET 2.0（随后是 SP1）
*   .NET 3.0（不记得在 3.5 之前是否需要这样做）
*   .NET 3.5
*   视觉工作室 2008

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-12T16:16:50.143

我刚刚遇到了同样的问题，并通过删除`*.tbd`此文件夹中的文件来解决它：
`C:\Users\<username>\AppData\Local\Microsoft\VCSExpress\<version>`

# sql-server-2008 - SQL Server 2008：在 Compact 3.5 和 Express 之间共享数据

> ID：868878
> 
> 赞同：1
> 
> 时间：2009-05-15T14:06:04.100
> 
> 标签：sql-server-2008, replication, sql-server-2008-express

问题：我们如何将 SQL Server CE DB 连接到 SQL Server Express DB？我们不能使用合并复制，因为您只能是 SQL Server Express 中的订阅者，而不是发布者。

更多背景信息：

我们的应用程序结构如下： 1) 我们的总部，运行 SQL Server 2008 2) 分支机构，运行 SQL Server 2008 Express 3) 机器，运行 SQL Server Compact

每台机器都需要连接到它的分支来发送数据。然后分支机构需要连接到我们的总部发送数据。机器和分支机构之间的数据同步应该相当频繁（理想情况下是每分钟两次），因为分支机构操作员可能需要对紧急情况做出响应。分公司和总部之间的同步可以不那么频繁（我每天都在想）。但是，我们需要支持网络故障。

我们不希望解决冲突，因此我想避免使用 Microsoft 同步服务。查看此页面[SQL Server Express BOL](http://technet.microsoft.com/en-us/library/ms151330.aspx)，我看到 Merge Replication 可以满足我们的需求，并且我计划在我们的总部和分支机构之间使用它，但正如我上面所说，我们需要一种将紧凑型数据库连接到 Express 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-17T02:57:54.343

您可以设计一个应用程序来连接到您的 SQL Express 实例并执行手动同步 - 类似于本地复制。我会在您的 SQL CE 机器上部署应用程序，并从每台机器上“提取”同步所需的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-17T03:54:49.797

查看[Microsoft 同步框架](http://msdn.microsoft.com/en-us/sync/default.aspx)：

> 一个全面的同步平台，支持任何数据类型、任何数据存储、任何传输协议和网络拓扑的应用程序、服务和设备的协作和离线。

# asp.net - 不支持文化名称

> ID：868880
> 
> 赞同：23
> 
> 时间：2009-05-15T14:06:31.290
> 
> 标签：asp.net

当我的 ASP.NET 应用程序启动时，我收到“不支持文化名称‘上传’”。我必须在哪里查看/调试才能切换错误？

“上传”的全文搜索在我的项目中返回 0 个条目。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2010-03-26T14:52:37.237

我已删除此文件夹并解决了问题：C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\root\8dfb04ef\44bf70fb\uploads

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-06-23T13:59:02.907

别担心，这不是真正的错误。

当运行库尝试查找存在哪些资源程序集时，它会尝试枚举已编译的 DLL 文件所在的文件夹。它假定文件夹的名称是文化名称，因此它会尝试为其创建文化。不幸的是，uploads 是一个由 ASP.NET 自动创建的文件夹，它显然不是一种文化 :)。

运行时会忽略一些预定义的文件夹，例如“hash”，但不会忽略“uploads”。所以我们必须忍受它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-07-24T22:46:03.800

我得到了完全相同的错误。[“不支持文化名称'上传'”]。我不知道是什么原因造成的，但我可以通过**单击 [Debug|Exceptions (Ctrl-alt-E) 并取消选中“公共语言运行时异常”来解决它。** 我的项目中没有“上传”文件夹或文件，我的项目中没有与多语言支持有关的任何内容，并且当我运行我的项目时，错误立即触发......查看调用堆栈只是引导我完成了很多 mscorlib 调用。我不知道为什么它甚至被调用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2010-04-21T17:28:29.460

JumpingLethalRampage，而不是取消选中所有“ **Commong Language Runtime Exceptions** ”，您可以只取消选中“ **Common Language Runtime Exceptions > System > System.ArgumentException** ”。您不需要取消选中所有 CLR 项目。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-15T14:12:01.980

听起来您可能在某处有一些代码试图根据 URL 模式设置文化（如果可以获得堆栈跟踪，则可能会对其进行跟踪）。例如，有时我会使用这样的[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)设置多语言站点：

```
http://www.example.com/en-US/
http://www.example.com/es-MX/ 
```

然后，我将在我的基本页面中包含查看 URL 并尝试基于 URL 路径设置区域性的代码。但是，如果您尝试访问如下 URL：

```
http://www.example.com/uploads 
```

如果您只是盲目地采用第一个路径元素并尝试将其用作文化而不首先检查它，它将失败并出现您所看到的错误。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-15T14:11:01.670

如果应用程序是基于[DotNetNuke构建的（而不是简单的 ASP.NET 应用程序），由于](http://en.wikipedia.org/wiki/DotNetNuke)*[Culture name '__page' is not supported](http://www.datasprings.com/Products/ProductForums/tabid/727/forumid/3/tpage/1/view/topic/postid/3271/language/en-US/Default.aspx#3276)*中描述的问题，这种错误通常发生在 DotNetNuke 中。

如果您没有使用 DotNetNuke，请检查您的 Application_Start 代码（在`Global.asax`文件中）。它可能正在设置 CultureInfo。或者检查您的`web.config`文件是否有任何无效的文化值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-15T14:12:58.590

假设您对项目的搜索没有限制（在所有文件中进行最广泛的搜索），那么我的猜测是您的浏览器将用户语言设置为自定义字符串 - “上传”。

在 IE 中，您可以通过工具 -> 选项 -> 语言 -> 添加 -> 用户定义的语言进行检查。

# java - 使用Java解析时如何在文档元素之前保留空格？

> ID：868887
> 
> 赞同：8
> 
> 时间：2009-05-15T14:08:06.187
> 
> 标签：java, xml, dom, parsing, whitespace

在我的应用程序中，我更改了 XML 文件的某些部分，其开头如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: version control yadda-yadda $ -->

<myElement>
... 
```

注意前面的空行`<myElement>`。加载、更改和保存后，结果远非令人满意：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: version control yadda-yadda $ --><myElement>
... 
```

我发现注释和文档节点之间的空格（一个换行符）根本没有在 DOM 中表示。以下独立代码可靠地重现了该问题：

```
String source =
    "<?xml version=\"1.0\" encoding=\"UTF-16\"?>\n<!-- foo -->\n<empty/>";
byte[] sourceBytes = source.getBytes("UTF-16");

DocumentBuilder builder =
    DocumentBuilderFactory.newInstance().newDocumentBuilder();
Document doc =
    builder.parse(new ByteInputStream(sourceBytes, sourceBytes.length));

DOMImplementationLS domImplementation =
    (DOMImplementationLS) doc.getImplementation();
LSSerializer lsSerializer = domImplementation.createLSSerializer();
System.out.println(lsSerializer.writeToString(doc));

// output: <?xml version="1.0" encoding="UTF-16"?>\n<!-- foo --><empty/> 
```

有谁知道如何避免这种情况？本质上，我希望输出与输入相同。（我知道 xml 声明将被重新生成，因为它不是 DOM 的一部分，但这不是问题。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-15T14:33:05.330

我有同样的问题。我的解决方案是编写自己的 XML 解析器：[DecentXML](http://code.google.com/p/decentxml/)

主要特点：它可以 100% 保留原始输入，空白，实体，一切。它不会打扰您的细节，但如果您的代码需要像这样生成 XML：

```
 <element
     attr="some complex value"
     /> 
```

那么你就可以。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T14:15:15.060

为什么要避免这种情况？

标签/元素之外的空白被规范定义为无关紧要的。它根本不存在，就您的 DOM 表示的信息集而言。

因此，在再次序列化 DOM 时，它将不存在。

如果您正在开发依赖于这个空行的东西......不要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T15:43:44.800

根本原因是标准[DOM Level 3](http://www.w3.org/TR/2004/REC-DOM-Level-3-Core-20040407/core.html#ID-1590626202)不能在不违反规范的情况下将 Text 节点表示为 Document 的子节点。任何兼容的解析器都会删除空格。

```
Document -- 
    Element (maximum of one),
    ProcessingInstruction,
    Comment,
    DocumentType (maximum of one) 
```

如果您需要符合标准的解决方案，并且目标是可读性而不是 100% 复制，我会在您的输出机制中寻找它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T14:14:15.407

通常，空白在 XML 中被认为是不相关的，因此在解析 XML 文件时不会保留。大多数输出​​ XML 的库都可以选择以良好的格式和正确的缩进输出它，但它总是相当通用的。*没有“这里*有一个额外的行”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T14:33:49.273

我同意 Kris 和 Tomalak 的观点，从 XML 的角度来看，空行是不相关的。如果您的应用程序需要在输出中产生一个空行，我建议您查看该要求的需要。

无论如何，如果您仍然希望出现该空白行，我建议您下载您正在使用的 XML 解析器的源代码并修改该行为。但请记住，这不是标准 XML，它不会与其他应用程序兼容。

*   [Jdom 源](http://www.jdom.org/downloads/source.html)
*   [Dom4j 源代码](http://www.dom4j.org/dom4j-1.6.1/download.html)检查 org.dom4j.io.DOMWriter

# python - cx_oracle 和 oracle 7？

> ID：868888
> 
> 赞同：4
> 
> 时间：2009-05-15T14:09:08.943
> 
> 标签：python, cx-oracle

在工作中，我们有 Oracle 7。我想使用 python 来访问数据库。有没有人这样做或知道怎么做？我有 Windows XP、Python 2.6 和用于 python 2.6 的 cx_oracle 版本

但是，当我尝试导入 cx_oracle 时，出现以下错误：

```
ImportError: DLL load failed the module could not be found 
```

任何帮助表示赞赏！

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-22T04:58:09.300

cx_Oracle 目前仅提供与 9i、10g 和 11i 客户端的链接。安装其中一个客户端并将其配置为使用正确的 ORACLE_SID 连接到 Oracle 7 数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-07T13:34:34.097

确保您有 oracle .dll 的位置（o 文件在您的 PATH 环境变量中设置。包含 oci.dll 的位置应该足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-22T05:20:45.807

我在工作中遇到了同样的问题。我终于放弃了尝试使用 cx_Oracle 并使用[adodbapi](http://adodbapi.sourceforge.net/)。它适用于 Oracle 8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-25T12:39:19.720

如果您配置了 ODBC，那么您可以使用它。它可用于 ActivePython 或作为 win32 扩展。您将获得与：

```
connection = odbc.odbc('db_alias/user/passwd') 
```

您可以选择使用 Jython 和瘦 JDBC 客户端。不需要安装客户端。使用 Jython，您可以通过 db url 访问 db：

```
db = DriverManager.getConnection(db_url, usr, passwd) 
```

其中 db_url 看起来像：

```
jdbc:oracle:thin:user/passwd@machine_ip:port:dbname 
```

# javascript - 提交 jQuery UI 对话框

> ID：868889
> 
> 赞同：131
> 
> 时间：2009-05-15T14:09:09.257
> 
> 标签：javascript, jquery, jquery-ui

我有一个带有表单的 jQuery UI 对话框。我想模拟单击对话框的一个按钮，这样您就不必使用鼠标或标签。换句话说，我希望它像一个普通的 GUI 对话框一样模拟点击“确定”按钮。

[我认为这可能是对话框的一个简单选项，但我在jQuery UI 文档](http://jqueryui.com/demos/dialog/)中找不到它。我可以用 keyup() 绑定每个表单输入，但不知道是否有更简单/更清洁的方法。谢谢。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2009-05-15T14:23:58.393

我不知道***jQuery UI 小部件***中是否有选项，但您可以简单地将`keypress`事件绑定到包含您的对话框的 div ...

```
$('#DialogTag').keypress(function(e) {
    if (e.keyCode == $.ui.keyCode.ENTER) {
          //Close dialog and/or submit here...
    }
}); 
```

无论对话中的焦点是什么元素，它都会运行，这取决于您想要什么，这可能是也可能不是一件好事。

如果你想让它成为默认功能，你可以添加这段代码：

```
// jqueryui defaults
$.extend($.ui.dialog.prototype.options, { 
    create: function() {
        var $this = $(this);

        // focus first button and bind enter to it
        $this.parent().find('.ui-dialog-buttonpane button:first').focus();
        $this.keypress(function(e) {
            if( e.keyCode == $.ui.keyCode.ENTER ) {
                $this.parent().find('.ui-dialog-buttonpane button:first').click();
                return false;
            }
        });
    } 
}); 
```

这是它的外观的更详细视图：

```
$( "#dialog-form" ).dialog({
  buttons: { … },
  open: function() {
    $("#dialog-form").keypress(function(e) {
      if (e.keyCode == $.ui.keyCode.ENTER) {
        $(this).parent().find("button:eq(0)").trigger("click");
      }
    });
  };
}); 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2012-11-23T02:31:22.890

我总结了上面的答案并添加了重要的东西

```
$(document).delegate('.ui-dialog', 'keyup', function(e) {
        var target = e.target;
        var tagName = target.tagName.toLowerCase();

        tagName = (tagName === 'input' && target.type === 'button') 
          ? 'button' 
          : tagName;

        isClickableTag = tagName !== 'textarea' && 
          tagName !== 'select' && 
          tagName !== 'button';

        if (e.which === $.ui.keyCode.ENTER && isClickableTag) {
            $(this).find('.ui-dialog-buttonset button').eq(0).trigger('click');

            return false;
        }
    }); 
```

**优点：**

1.  不允许在不兼容的元素上输入键，例如,`textarea`或输入类型 button ，想象用户点击输入并提交表单而不是换行！`select``button``textarea`
2.  绑定一次完成，避免使用对话框'open'回调绑定回车键，以避免每次对话框'open'时一次又一次地绑定相同的函数
3.  避免更改现有代码，因为上面的一些答案建议
4.  使用 'delegate' 而不是已弃用的 'live' 并避免使用新的 'on' 方法以允许使用旧版本的 jquery
5.  因为我们使用了委托，这意味着上面的代码甚至可以在初始化对话框之前编写。即使没有，您也可以将其放入 head 标签中`$(document).ready`
6.  此外，委托将只绑定一个处理程序，`document`并且不会将处理程序绑定到每个对话框，如上面的某些代码中那样，以提高效率。
7.  甚至可以使用动态生成的对话框，例如`$('<div><input type="text"/></div>').dialog({buttons: .});`
8.  与 ie 7/8/9 一起工作！
9.  避免使用慢速选择器`:first`
10.  避免使用像[这里](https://stackoverflow.com/questions/477691/)的答案这样的技巧来制作隐藏的提交按钮

**缺点：**

1.  将第一个按钮作为默认按钮运行，您可以选择另一个按钮`eq()`或在 if 语句中调用函数
2.  所有对话框都将具有相同的行为，您可以通过使选择器更具体来过滤它，即“#dialog”而不是`'.ui-dialog'`

我知道这个问题很老，但我有同样的需求，所以，我分享了我使用的解决方案。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2010-05-14T14:09:42.400

```
$('#dialogBox').dialog('open');
$('.ui-dialog-buttonpane > button:last').focus(); 
```

它与最新版本的 JQuery UI (1.8.1) 完美配合。您也可以使用 :first 而不是 :last ，具体取决于您要将哪个按钮设置为默认按钮。

与上面选择的解决方案相比，此解决方案的优点是显示哪个按钮是用户的默认按钮。用户还可以在按钮之间按 TAB，按 ENTER 将单击当前处于焦点的按钮。

干杯。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-19T16:26:39.073

Ben Clayton 是最整洁和最短的，它可以在任何 jquery 对话框初始化之前放置在索引页面的顶部。但是，我想指出“.live”已被弃用。首选操作现在是“.on”。如果您希望“.on”像“.live”一样运行，则必须使用委托事件来附加事件处理程序。另外，还有一些其他的...

1.  我更喜欢使用 ui.keycode.ENTER 方法来测试回车键，因为您不必记住实际的键码。

2.  使用 "$('.ui-dialog-buttonpane button:first', $(this))" 作为点击选择器使整个方法通用。

3.  你想添加“return false;” 以防止默认并停止传播。

在这种情况下...

```
$('body').on('keypress', '.ui-dialog', function(event) { 
    if (event.keyCode === $.ui.keyCode.ENTER) { 
        $('.ui-dialog-buttonpane button:first', $(this)).click();
        return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2009-12-02T22:35:05.740

使这项工作更通用的一种粗略但有效的方法：

```
$.fn.dlg = function(options) {
    return this.each(function() {
             $(this).dialog(options);
             $(this).keyup(function(e){
                  if (e.keyCode == 13) {                
                       $('.ui-dialog').find('button:first').trigger('click');
                  }
             });
    });
} 
```

然后，当您创建一个新对话框时，您可以这样做：

```
$('#a-dialog').mydlg({...options...}) 
```

然后像普通的 jquery 对话框一样使用它：

```
$('#a-dialog').dialog('close') 
```

有一些方法可以改进它以使其在更特殊的情况下工作。使用上面的代码，它会自动选择对话框中的第一个按钮作为按下回车键时触发的按钮。它还假设在任何给定时间只有一个活动对话，但情况可能并非如此。但你明白了。

注意：如上所述，输入时按下的按钮取决于您的设置。因此，在某些情况下，您可能希望在 .find 方法中使用 :first 选择器，而在其他情况下，您可能希望使用 :last 选择器。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2011-05-13T17:53:30.563

您可以在对话框中绑定到表单的提交事件，而不是像在这个答案中那样监听关键代码（我无法开始工作），然后执行以下操作：

```
$("#my_form").parents('.ui-dialog').first().find('.ui-button').first().click(); 
```

所以，整个事情看起来像这样

```
$("#my_form").dialog({
  open: function(){
    //Clear out any old bindings
    $("#my_form").unbind('submit');
    $("#my_form").submit(function(){
      //simulate click on create button
      $("#my_form").parents('.ui-dialog').first().find('.ui-button').first().click();
      return false;
    });
  },
  buttons: {
    'Create': function() {
      //Do something
    },
    'Cancel': function() {
      $(this).dialog('close');
    }
  }
}); 
```

请注意，不同的浏览器处理回车键的方式不同，有些浏览器并不总是在回车时进行提交。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2009-05-15T14:18:05.193

我不知道更简单，但通常你会跟踪哪个按钮具有当前焦点。如果焦点更改为不同的控件，则“按钮焦点”将保留在最后获得焦点的按钮上。通常，“按钮焦点”将从您的默认按钮开始。切换到不同的按钮会改变“按钮焦点”。您必须决定导航到不同的表单元素是否会将“按钮焦点”再次重置为默认按钮。您可能还需要一些视觉指示器而不是浏览器默认值来指示焦点按钮，因为它失去了窗口中的真正焦点。

一旦您将按钮焦点逻辑关闭并实现，那么我可能会向对话框本身添加一个键处理程序，并让它调用与当前“焦点”按钮关联的操作。

**编辑**：我假设您希望能够在填写表单元素并让“当前”按钮操作优先时按回车键。如果您只在按钮实际聚焦时才想要这种行为，那么我的回答太复杂了。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-12-13T15:37:21.257

我找到了这个解决方案，它适用于 IE8、Chrome 23.0 和 Firefox 16.0

它基于罗伯特施密特的评论。

```
$("#id_dialog").dialog({
    buttons: [{
        text: "Accept",
        click: function() {
            // My function
        },
        id: 'dialog_accept_button'
    }]
}).keyup(function(e) {
    if (e.keyCode == $.ui.keyCode.ENTER)
        $('#dialog_accept_button').click();
}); 
```

我希望它可以帮助任何人。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-02-28T19:24:14.863

有时我们会忘记浏览器已经支持的基本原理：

```
<input type="submit" style="visibility:hidden" /> 
```

这将导致`ENTER`密钥提交表单。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2010-12-23T13:49:32.720

I did such way... ;) Hope it will helpful for somebody..

```
$(window).keypress(function(e) {
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
        $(".ui-dialog:visible").find('.ui-dialog-buttonpane').find('button:first').click();
        return false;
    }
}); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2011-02-14T20:37:56.440

这应该可以触发按钮的点击处理程序的点击。此示例假定您已经在对话框中设置了表单以使用 jquery.validate 插件。但可以很容易地适应。

```
open: function(e,ui) {
    $(this).keyup(function(e) {
        if (e.keyCode == 13) {
           $('.ui-dialog-buttonpane button:last').trigger('click');
        }
    });
},
buttons: {
    "Submit Form" : function() {
            var isValid = $('#yourFormsID').valid();
            // if valid do ajax call
            if(isValid){
               //do  your ajax call here. with serialize form or something...

            }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2011-10-09T16:04:14.613

我意识到已经有很多答案，但我自然认为我的解决方案是最简洁的，并且可能是最短的。它的优点是它适用于将来任何时间创建的任何对话框。

```
$(".ui-dialog").live("keyup", function(e) {
    if (e.keyCode === 13) {
        $('.ok-button', $(this) ).first().click();
    }
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-10-07T23:42:08.533

完成和完成

```
 $('#login input').keyup(function(e) {
      if (e.keyCode == 13) {
          $('#login form').submit();
      }
   } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2011-12-30T16:12:30.390

这是我所做的：

```
myForm.dialog({
  "ok": function(){
    ...blah...
  }
  Cancel: function(){
    ...blah...
  }
}).keyup(function(e){
  if( e.keyCode == 13 ){
   $(this).parent().find('button:nth-child(1)').trigger("click");
  }
}); 
```

在这种情况下，myForm 是一个包含表单 html 的 jQuery 对象（请注意，其中没有任何“表单”标签……如果您将它们放在整个屏幕中，当您按“输入”时会刷新）。

每当用户从表单中按下“输入”时，它就相当于单击“确定”按钮。

这也避免了在“确定”按钮已经突出显示的情况下打开表单的问题。虽然这对于没有字段的表单很有用，但如果您需要用户填写内容，那么您可能希望突出显示第一个字段。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-15T14:16:44.887

如果您知道按钮元素选择器：

```
$('#dialogBox').dialog('open');
$('#okButton').focus(); 
```

应该为您解决问题。正如您所期望的那样，这将聚焦 ok 按钮，并且 enter 将“单击”它。这与本机 UI 对话框中使用的技术相同。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2012-09-19T16:03:57.940

在 IE9 中，这些解决方案似乎都不适合我。我结束了这个..

```
$('#my-dialog').dialog({
    ...
    open: function () {
        $(this).parent()
               .find("button:eq(0)")
               .focus()
               .keyup(function (e) {
                   if (e.keyCode == $.ui.keyCode.ENTER) {
                       $(this).trigger("click");
                   };
               });
    }
}); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-01-28T11:47:32.893

```
 $("#LogOn").dialog({
       modal: true,
       autoOpen: false,
       title: 'Please Log On',
       width: 370,
       height: 260,
       buttons: { "Log On": function () { alert('Hello world'); } },
       open: function() { $(this).parents('.ui-dialog-buttonpane button:eq(0)').focus();}
   }); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-09-10T23:13:09.550

因为我没有足够的声誉来发表评论。

```
$(document).delegate('.ui-dialog', 'keyup', function(e) {
  var tagName = e.target.tagName.toLowerCase();

  tagName = (tagName === 'input' && e.target.type === 'button') ? 'button' : tagName;

  if (e.which === $.ui.keyCode.ENTER && tagName !== 'textarea' && tagName !== 'select' && tagName !== 'button') {
      $(this).find('.ui-dialog-buttonset button').eq(0).trigger('click');
    return false;
  } else if (e.which === $.ui.keyCode.ESCAPE) {
      $(this).close();
  }
}); 
```

Basemm #35 修改的答案也添加了 Escape 以关闭对话框。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-07-24T16:23:02.863

使用下面的主体是因为在主体上添加了对话框 DIV，所以主体现在侦听键盘事件。它在 IE8、9、10、Mojila、Chrome 上进行了测试。

```
open: function() {
$('body').keypress(function (e) { 
     if (e.keyCode == 13) {   
     $(this).parent().find(".ui-dialog-buttonpane button:eq(0)").trigger("click");
     return false; 
     }
  }); 
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2011-06-23T14:29:46.323

```
$('#DialogID').dialog("option", "buttons")["TheButton"].apply() 
```

这对我很有用..

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2011-04-04T14:42:58.280

我为这个问题找到了一个非常简单的解决方案：

```
var d = $('<div title="My dialog form"><input /></div>').dialog(
    buttons: [{
        text: "Ok",
        click: function(){
            // do something
            alert('it works');
        },
        className: 'dialog_default_button'
    }]
});

$(d).find('input').keypress(function(e){
    if ((e.which && e.which == 13) || (e.keyCode && e.keyCode == 13)) {
        e.preventDefault();
        $('.dialog_default_button').click();
    }
}); 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2013-09-17T11:52:19.287

很好用谢谢！！！

`open: function () { debugger; $("#dialogDiv").keypress(function (e) { if (e.keyCode == 13) { $(this).parent().find("#btnLoginSubmit").trigger("click"); } }); },`

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2018-03-01T05:27:35.650

给你的按钮[类](http://api.jqueryui.com/dialog/#option-classes)并以通常的方式选择它们：

```
$('#DialogTag').dialog({
  closeOnEscape: true,
  buttons: [
    {
      text: 'Cancel',
      class: 'myCancelButton',
      click: function() {
        // Close dialog fct
      }
    },
    {
      text: 'Ok',
      class: 'myOKButton',
      click: function() {
        // OK fct
      }
    }
  ],
  open: function() {

    $(document).keyup(function(event) {

      if (event.keyCode === 13) {
        $('.myOKButton').click();
      }

    });

  }
}); 
```

# jquery - Ajax - 如何刷新 提交后

> ID：868890
> 
> 赞同：7
> 
> 时间：2009-05-15T14:09:20.627
> 
> 标签：jquery, ajax, refresh, submit

在我的应用程序发布提交后，如何仅刷新页面的一部分（“DIV”）？我将 JQuery 与插件 ajaxForm 一起使用。我用“divResult”设置了我的目标，但是页面在“divResult”中重复了你的内容。资料来源：

```
 <script>      
       $(document).ready(function() {      
           $("#formSearch").submit(function() {      
                var options = {    
                  target:"#divResult",
                  url: "http://localhost:8081/sniper/estabelecimento/pesquisar.action"  
                }      
               $(this).ajaxSubmit(options);      
               return false;      
          });      
      })
   </script> 
```

页

```
 <s:form id="formSearch" theme="simple" class="formulario" method="POST">      
 ...      

 <input id="btTest" type="submit" value="test" >      

 ...      

                 <div id="divResult" class="quadro_conteudo" >      
                     <table id="tableResult" class="tablesorter">      
                         <thead>      
                             <tr>      
                                 <th style="text-align:center;">      
                                     <input id="checkTodos" type="checkbox" title="Marca/Desmarcar todos" />      
                                 </th>      
                                 <th scope="col">Name</th>      
                                 <th scope="col">Phone</th>      
                             </tr>      
                         </thead>      

                         <tbody>      
                             <s:iterator value="entityList">      
                                 <s:url id="urlEditar" action="editar"><s:param name="id" value="%{id}"/></s:url>      
                                <tr>      
                                    <td style="text-align:center;"><s:checkbox id="checkSelecionado" name="selecionados" theme="simple" fieldValue="%{id}"></s:checkbox></td>      
                                    <td> <s:a href="%{urlEditar}"><s:property value="name"/></s:a></td>      
                                    <td> <s:a href="%{urlEditar}"><s:property value="phone"/></s:a></td>      
                                </tr>      
                             </s:iterator>      
                         </tbody>      
                     </table>      

                     <div id="pager" class="pager">      
                         <form>      
                             <img src="<%=request.getContextPath()%>/plugins/jquery/tablesorter/addons/pager/icons/first.png" class="first"/>      
                             <img src="<%=request.getContextPath()%>/plugins/jquery/tablesorter/addons/pager/icons/prev.png" class="prev"/>      
                             <input type="text" class="pagedisplay"/>      
                             <img src="<%=request.getContextPath()%>/plugins/jquery/tablesorter/addons/pager/icons/next.png" class="next"/>      
                             <img src="<%=request.getContextPath()%>/plugins/jquery/tablesorter/addons/pager/icons/last.png" class="last"/>      
                             <select class="pagesize">      
                                 <option selected="selected" value="10">10</option>      
                                 <option value="20">20</option>      
                                 <option value="30">30</option>      
                                 <option value="40">40</option>      
                                 <option value="<s:property value="totalRegistros"/>">todos</option>      
                             </select>      
                             <s:label>Total de registros: <s:property value="totalRegistros"/></s:label>      
                         </form>      
                     </div>      
                     <br/>      
             </div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-15T14:32:37.530

要使用 jquery 解决这个问题，我会试试这个；

```
$(document).ready(function() {
    $("#formSearch").submit(function() {
        var options = {
            /* target:"#divResult", */

            success: function(html) {
                $("#divResult").replaceWith($('#divResult', $(html)));
            },

            url: "http://localhost:8081/sniper/estabelecimento/pesquisar.action"
        }

        $(this).ajaxSubmit(options);
        return false;
    });
}); 
```

或者，您可以让服务器只返回需要插入到 div 中的 html，而不是 html 文档的其余部分。

我不太了解 TableSorter 插件，但我知道每次重新加载元素时都需要重新初始化 TableSorter 插件。所以在你的成功函数中添加一行以你的表为目标，例如

```
success: function(html) {
    var resultDiv = $("#divResult").replaceWith($('#divResult',     $(html)));

    $('table.tablesorter', resultDiv).TableSorter();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T14:31:02.447

您的问题出在服务器端：您必须创建一个仅返回所需 div 的页面，然后更改“url”以匹配它。

目前，您正在使用 AJAX 调用加载整个页面，这就是它返回整个页面的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T14:11:04.587

您可以将大多数普通的 jquery ajax 函数参数与 ajaxSubmit 一起使用。只需传入一个成功函数。

```
$('#formSearch').ajaxSubmit({success: function(){ /* refresh div */ }); 
```

有关更详细的示例，请参见[此处。](http://malsup.com/jquery/form/#code-samples)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-04T23:54:27.987

[使用 jQuery，有时当我执行 .get ajax 调用来更新数据库时，我会在成功回调函数中使用简单的 jQuery .load](http://api.jquery.com/load/)语句重新加载/刷新页面的另一部分，以替换 div 的内容。

```
$("#div_to_refresh").load("url_of_current_page.html #div_to_refresh") 
```

我想指出，这不是重新加载一小部分数据的最有效方法，因此我只会在低流量的 Web 应用程序上使用它，但它很容易编码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-16T21:40:43.370

如果您只想`div`使用与您的帖子结果覆盖之前相同的静态内容刷新您的内容，您可以尝试以下操作：

```
$("#Container").html($("#Container").html()); 
```

当然要注意内部 HTML 没有改变，或者，您可以将内部 HTML 存储在`document.ready()`函数的变量中，然后在需要时加载它。不好意思，写的太仓促了。

# c++-cli - 将矩阵定义为数组数组并在 C++ 中计算其逆矩阵

> ID：868892
> 
> 赞同：3
> 
> 时间：2009-05-15T14:09:27.663
> 
> 标签：c++-cli

不幸的是，我在 C++ 方面没有太多经验，我正在尝试在 C++ 方面取得进步。

首先，我定义了数组数组，以便形成一个 3x3 矩阵：

```
array< array< double >^ >^ input = gcnew array< array< double >^ >(3);

for (j=0;j<input->Length;j++){
    input[j]=gcnew array<double>(3); 
```

然后我将矩阵元素分配给数组的输入数组：

```
 int value=1;
for(y=0;y<(3);y++){
  for(x=0;x<(3);x++)
 {input[y][x]=value;
  value=value+1;
  }
  } 
```

是否有一个 C++ 函数可以计算这个输入数组的逆矩阵？

请问你能帮帮我吗？

此致...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-19T13:03:59.723

查看[简单的 3x3 矩阵逆代码 (C++)](https://stackoverflow.com/questions/983999/simple-3x3-matrix-inverse-code-c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-11-19T13:10:00.987

没有内置 C++ 函数来进行矩阵求逆（或任何其他矩阵计算）。

这里提到**了很多矩阵求逆的方法**[。](http://www.mathwords.com/i/inverse_of_a_matrix.htm)

如果您想要**效率和易于实施，**那么[高斯消除](http://www.mathwords.com/i/inverse_of_a_matrix.htm)可能是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T16:30:25.873

C++ 中没有函数可以进行矩阵运算，您需要找到一些库来执行它或实现您自己的。

请注意，对于固定大小的数组，您可以使用常规的 C/C++ 数组，如下所示：

```
double arr[3][3]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-19T12:39:37.973

Wikipedia[列出了各种编程语言的数值库](http://en.wikipedia.org/wiki/List_of_numerical_libraries)。如果您正在寻找的函数不可用，您还可以考虑围绕可用的 Fortran 或 C 或 C++ 实现编写一个包装函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-17T13:50:27.167

在 C++ 中使用基本行变换的矩阵逆代码

```
#include<iostream>
#include<stdio.h>
#include<conio.h>
using
namespace std;

float a[4][4];float b[4][4]={{1,0,0,0},{0,1,0,0},{0,0,1,0},{0,0,0,1}};
int no = 4;

int check(int k) {
    float cont = 0, cont2 = 0;
    for (int i = k; i < no; i++) {
        if (a[i][k] == 1) {
            for (int j = 0; j < no; j++) {
                cont = a[i][j];
                cont2 = b[i][j];
                a[i][j] = a[k][j];
                b[i][j] = b[k][j];
                a[k][j] = cont;
                b[k][j] = cont2;
            }
        } else if (a[i][k] == 0) {
            for (int j = 0; j < no; j++) {
                cont = a[i][j];
                cont2 = b[i][j];
                a[i][j] = a[no - 1][j];
                b[i][j] = b[no - 1][j];
                a[no - 1][j] = cont;
                b[no - 1][j] = cont2;
            }
        }
    }
    return 0;
}

int divi(int k) {
    float particular = a[k][k];
    for (int i = 0; i < no; i++) {
        a[k][i] = a[k][i] / particular;
        b[k][i] = b[k][i] / particular;
        if (a[k][i] == (-0)) {
            a[k][i] = 0;
        }
        if (b[k][i] == (-0)) {
            b[k][i] = 0;
        }
    }
    return 0;
}

int sub1(int k) {
    float particular;
    for (int j = k + 1; j < no; j++) {
        particular = a[j][k];
        for (int i = 0; i < no; i++) {
            a[j][i] = a[j][i] - (particular * a[k][i]);
            b[j][i] = b[j][i] - (particular * b[k][i]);
            if (a[j][i] == (-0)) {
                a[j][i] = 0;
            }
            if (b[j][i] == (-0)) {
                b[j][i] = 0;
            }
        }
    }
    return 0;
}

int sub2(int k) {
    float particular;
    for (int j = k - 1; j >= 0; j--) {
        particular = a[j][k];
        for (int i = no - 1; i >= 0; i--) {
            a[j][i] = a[j][i] - (particular * a[k][i]);
            b[j][i] = b[j][i] - (particular * b[k][i]);
            if (a[j][i] == (-0)) {
                a[j][i] = 0;
            }
            if (b[j][i] == (-0)) {
                b[j][i] = 0;
            }
        }
    }
    return 0;
}

int disp(){
 cout<<endl;
             for(int x=0;x<no;x++){
             for(int y=0;y<no;y++){
                   if(a[x][y]==(-0)){a[x][y]=0;}
                   if(b[x][y]==(-0)){b[x][y]=0;}
                   printf("%0.1f|||%0.1f     ",a[x][y],b[x][y]);
             }
             cout<<endl;}
}

int main()
{
    for(int i=0;i<no;i++){
          for(int j=0;j<no;j++){cout<<"Enter a["<<i<<"]["<<j<<"]";cin>>a[i}[j];}
          }
    for(int i=0;i<no;i++){
            for(int j=0;j<no;j++){cout<<a[i][j]<<" ";}
    cout<<endl;
          }

    for(int i=0;i<no;i++){
        check(i);
            disp();
        divi(i);
            disp();
        sub1(i);
            disp();
    }
    for(int i=no-1;i>=0;i--){
     sub2(i);
     disp();
     cout<<endl;
     }
     getch();
     getch();
     getch();
 return 0;}

 } 
```

# c# - 将 WCF 服务从测试控制台应用程序移动到 IIS

> ID：868900
> 
> 赞同：1
> 
> 时间：2009-05-15T14:10:41.983
> 
> 标签：c#, .net, wcf, iis

我一直在 3 个项目（合同、实施、客户端）后面构建一个 WCF 应用程序我已经将我的服务托管为具有基本 HTTP 绑定的控制台应用程序。我现在准备将其移至 IIS。但是，创建 .svc 文件的教程显示它实际实现了合同 - 但我已经有了一个实现。如何重定向到该实现，或者我应该将 .svc 文件添加到我现有的实现项目中？

希望这足够清楚。

干杯，罗伯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T14:17:48.907

我通常会在其中添加 SVC 文件，并且 ServiceHost 将指向您从 Code 创建 ServiceHost 的新实例时所指向的同一个类。

所以你的命令行主机可能看起来像：

```
using (ServiceHost serviceHost = new ServiceHost(typeof(CoolService.CoooolEndpoint)))
{ 
```

你的 .svc 文件看起来像：

```
<%@ ServiceHost Language="C#" Debug="false" Service="CoolService.CoooolEndpoint" %> 
```

所以现在你的应用程序可以在 IIS 中托管，也可以从命令行托管。

当我准备好部署时，我通常只是敲开 svc 文件。

保罗。

# wpf - 为什么 WrapPanel 水平包装 TextBlocks 而垂直包装 UserControls？

> ID：868905
> 
> 赞同：4
> 
> 时间：2009-05-15T14:11:02.527
> 
> 标签：wpf, xaml, wrappanel

这**正确地包裹了 TextBlocks**水平：

```
<StackPanel DockPanel.Dock="Top" Margin="10" HorizontalAlignment="Left">
    <TextBlock Text="Simple WrapPanel:" Margin="0 0 0 5"/>
    <WrapPanel Orientation="Horizontal">
        <TextBlock Text="one"/>
        <TextBlock Text="two"/>
        <TextBlock Text="thee"/>
        <TextBlock Text="four"/>
    </WrapPanel>
</StackPanel> 
```

但这**错误地将我的 UserControls 垂直**堆叠在彼此之上（**我希望它们像上面的 TextBlocks 一样水平包装**）：

```
<StackPanel DockPanel.Dock="Top" Margin="10" HorizontalAlignment="Left">
    <TextBlock Text="Simple WrapPanel:" Margin="0 0 0 5"/>
    <WrapPanel Orientation="Horizontal">
        <ItemsControl ItemsSource="{Binding CustomerViewModels}" Width="Auto" BorderThickness="0">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <views:CustomerSimpleItemView />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </WrapPanel>
</StackPanel> 
```

CustomerSimpleItemView：

```
<UserControl x:Class="TestMvvmExample2341.Views.CustomerSimpleItemView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
        <TextBlock Text="{Binding LastName}" FontWeight="Bold" Width="100"/>
</UserControl> 
```

**我必须在我的 UserControl 中做什么才能使它们水平包装？**

**补充：**即使我将用户控件中的所有宽度和高度都更改为自动，它仍然垂直堆叠......：

```
<UserControl x:Class="TestMvvmExample2341.Views.CustomerSimpleItemView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Width="Auto" Height="Auto">
        <TextBlock Text="{Binding LastName}" FontWeight="Bold" Width="Auto" Height="Auto"/>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-15T14:57:59.777

In your second sample, try to use the WrapPanel inside a ItemsPanelTemplate for the ItemsControl, otherwise the ItemsControl uses a StackPanel by default and your WrapPanel doesn't do anything as there is nothing to wrap.

```
 <StackPanel DockPanel.Dock="Top" Margin="10" HorizontalAlignment="Left">
        <TextBlock Text="Simple WrapPanel:" Margin="0 0 0 5"/>
            <ItemsControl ItemsSource="{Binding CustomerViewModels}" Width="Auto" BorderThickness="0">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <views:CustomerSimpleItemView />
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T15:01:10.630

发生这种情况是因为 ItemsControl 默认使用垂直方向的 StackPanel 对其子对象进行布局。因此，换行面板实际上只布置了一个子项，即 ItemsControl。您不想做的是设置 ItemsControl 的 ItemsPanel 属性，以便使用 WrapPanel 进行布局。您的代码如下所示：

```
<StackPanel DockPanel.Dock="Top"
            Margin="10"
            HorizontalAlignment="Left">
    <TextBlock Text="Simple WrapPanel:"
               Margin="0 0 0 5" />          
    <!-- Note I am removing the WrapPanel that was surrounding the ItemsControl -->
    <ItemsControl ItemsSource="{Binding CustomerViewModels}"
                  Width="Auto"
                  BorderThickness="0">
        <!-- This is the important part.  Here we set the ItemsPanel template -->
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>

        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <views:CustomerSimpleItemView />
            </DataTemplate>
        </ItemsControl.ItemTemplate>

    </ItemsControl>            
</StackPanel> 
```

# jsf - 为什么 EL 给了我错误的对象作为括号之间的参数？

> ID：868916
> 
> 赞同：1
> 
> 时间：2009-05-15T14:12:18.733
> 
> 标签：jsf, seam, richfaces, el, ajax4jsf

情况如下：

在 a4j:form 中的 rich:dataTable 中，我创建了一个 a4j:commandLink 来选择值并使用 jboss el 操作语法将其传递给 bean

```
action="#{bean.myaction(myparameter)}" 
```

这没有问题。

但是，如果我重新渲染表单以使用 ajax 调用过滤数据表，当我选择值时，它会给我错误的结果：选择的索引，但过滤前的数据。

有任何想法吗？

感谢 Zack 在 5 分钟内为我提供了正确的解决方案。

我认为在括号之间的操作中传递参数更优雅，但是，嘿：这行得通。:)

十分感谢。

ps 我也在编辑标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T14:15:36.870

尝试使用：

```
<a4j:commandLink action="#{bean.myaction}">
    <f:param name="myparameter" value="paramValue" />
</a4j:commandLink> 
```

然后`requestParameter("myparameter")`通过`FacesContext`.

作为旁注，这不是 jboss EL，它是统一表达语言 (EL)。正如 Sun 所指定的，它通常只是 JSP/JSF 的一个特性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:27:14.767

除了 Zack 的回答，我想说如果您需要扩展 EL 表达式以便能够使用参数调用方法，您可以使用[EL Functors](http://el-functors.sourceforge.net/syntax.html)库：

```
action="#{bean.myaction$[myparameter].action}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T15:04:06.580

您的数据表是否使用带有 @DataModel 注释的 Collection 填充？如果是这样，请尝试在过滤时将其从上下文中删除，以便重新请求它。

例如。

```
//In filter method
Contexts.removeFromAllContexts("yourDataModelCollection"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-29T13:16:03.703

将数据表放入`<a4j:region>`对我有用的地方。这样，您仍然可以使用 JBoss EL 参数。

# workflow-foundation - 状态机工作流程 - 事件驱动 - 需要状态转换？

> ID：868929
> 
> 赞同：1
> 
> 时间：2009-05-15T14:14:13.363
> 
> 标签：workflow-foundation

在状态机中，如果在事件驱动的活动中处理事件，是否需要发生状态转换（即 SetStateActivity）？

我的目标是允许特定事件驱动的活动中的相同逻辑重复发生（通过多次发出信号），直到满足某个条件，此时状态应该转换并且该过程将针对下一个状态重复。

目前，在没有发生状态转换的情况下，看起来事件驱动的活动完成了，然后整个工作流也完成了（即所有活动都关闭了），但是在查看跟踪数据时，工作流实例表明它被终止了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T15:37:46.920

在这里找到了答案：

[http://social.msdn.microsoft.com/Forums/en-US/windowsworkflowfoundation/thread/cef8300a-fbf0-47e6-b4f9-e444343208e3/](http://social.msdn.microsoft.com/Forums/en-US/windowsworkflowfoundation/thread/cef8300a-fbf0-47e6-b4f9-e444343208e3/)

# web-applications - 全局异常处理程序应该如何在 Web 应用程序中工作？

> ID：868931
> 
> 赞同：0
> 
> 时间：2009-05-15T14:14:28.977
> 
> 标签：web-applications, error-handling

在全球企业内联网的 Web 应用程序中，它应该显示什么？多年来，你们中的一些人学到了哪些最佳实践或东西？

我正在考虑在错误页面上放置一个文本字段和提交按钮，允许用户在需要时自动提交帮助票......它肯定会记录错误......还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T14:20:09.760

如果您使用的是 .Net，请获取[Elmah](http://code.google.com/p/elmah/)。（错误记录模块和处理程序）。

它是开源的并且非常易于使用。

作为一般规则，任何异常类型的错误都应自动记录并提交到您的错误跟踪系统。潜在地，他们也应该通过电子邮件发送给待命人员。换句话说，不要依赖用户在打电话之前告诉你有问题并知道它。

如果您愿意，在您的每个网页上放置一个允许用户提交工单的按钮是个好主意。保持非常简单（一个字段很好）并允许他们以任何理由提交。该信息应该放在可以尽快做出决定的人面前，无论是通过电子邮件还是通过帮助单。

你可以得到很多关于你甚至没有想到的事情的好反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:17:23.887

看看[ELMAH](http://code.google.com/p/elmah/)。它可能会做所有你可能想要的开箱即用的东西:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:17:41.437

我们通常会记录所有异常。一个完美的应用程序不应该进入用户看到错误页面的状态，因此每个未处理的异常都需要被视为潜在的错误。

我在使用 hoptoad 进行异常记录方面取得了一些成功——它将相关异常分组，并为您提供每个组的计数（防止重复通知）。我们还会收到包含堆栈跟踪和引发的异常的每个异常的电子邮件。

您不能等待用户告诉您有问题 - 您需要比他们更了解您的系统，并在错误出现而不是当有人抱怨时处理错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-15T14:18:10.733

取决于站点，但许多站点只会记录错误并重定向到主页（如果您愿意，也可以重定向到错误页面）。

对于公共站点，重定向到错误页面 (IMO) 通常没有多大意义，因为大多数用户无论如何都不知道如何处理它。对于 Intranet 站点，尽管它可能更有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T14:17:47.923

设置记录器以自动通过电子邮件向您发送错误。

# usergroups - 我如何以及在哪里可以为学习开发项目设置服务器？

> ID：868937
> 
> 赞同：0
> 
> 时间：2009-05-15T14:15:29.473
> 
> 标签：usergroups

背景：我是[Fox Valley .Net 用户组](http://fvnug.org)的董事会成员。我们正在成立一个特别兴趣小组，从头到尾做一个软件项目。我们希望专注于让高级 .Net 成员帮助初级 .Net 成员学习工具和技术。我们想学习如何使用或更好地使用以下软件：

1.  Team Foundation Server 2008 - 学习非常重要
2.  MS Build - 学习非常重要
3.  Visual Studio Team Systems 2008 - 学习非常重要
4.  SQL Server 2008 - 学习有些重要

我的计划：为 TFS 2008、Build Server、SQL Server 2008 创建不同的虚拟机。

该项目旨在帮助所有参与的人学习保持在 .Net 开发世界领先所需的工具和实践。我们发现该用户组的许多成员在日常工作中仍在使用 VB 6、.Net 1.1、SQL 2000、非敏捷实践和其他遗留的东西。

我的问题：

1.  我可以在哪里托管这些虚拟机，以便每个人都可以访问并保持低成本或零成本？
2.  如果无法托管，CodePlex 是否提供 TFS 访问？它提供敏捷吗？工作项目？报告？
3.  有没有人有更好的想法？

感谢您的帮助和想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-24T10:50:02.117

您是否查看过 Microsoft 托管的可用虚拟实验室？
这将消除您托管任何东西的责任。您也不必担心安装在虚拟映像上的软件的任何许可问题。

Microsoft 站点上 有许多[Team System实验室。](http://msdn.microsoft.com/en-us/virtuallabs/aa740411.aspx)

您还可以访问根[虚拟实验室站点](http://www.microsoft.com/events/vlabs/default.mspx)，其中有可用实验室的完整列表。这样托管的责任就不是你的了，微软已经处理好了。

另外不要忘记查看[Microsoft Learning](http://learning.microsoft.com/Manager/Catalog.aspx)，经常有免费的新技术提供给某人一个基本的概述，你不会成为专家，但它会给你一个基本的理解。还有更深入的产品，但它们通常是付费访问。

祝你好运，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T10:29:18.867

现在这听起来像是一个有趣的项目。

1) 也许当地的托管公司之一将赞助一个盒子来托管 VM，或者向其中一个 ISV 请求 DMZ 中的主机。控制赞助商是一项艰巨的工作，但它也会给你带来很多业内人脉。

2) 我怀疑 Codeplex 将成为该项目的解决方案，因为它非常以 TFS 为中心。

3) 你问过当地的微软办公室吗？丹麦哥本哈根的办公室经常提供很多帮助，即使是他们一无所知的问题，但他们总能找到合适的人选。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-27T15:48:58.263

看起来最好的方法是使用 CodePlex。

# wcf - WCF：为什么这里没有记录 HttpResponse？

> ID：868940
> 
> 赞同：1
> 
> 时间：2009-05-15T14:15:50.627
> 
> 标签：wcf

我正在尝试学习 WCF 书中的示例并尝试检查 HTTP 请求/响应。我可以在 MS TraceViewer 中看到 HTTP 请求标头，但奇怪的是没有响应标头。（仅信封）。如果您发现有什么不对劲的地方，请告诉我好吗？

```
<configuration>
  <system.serviceModel>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true"
        logMessagesAtServiceLevel="true"/>
    </diagnostics>

<!--other stuff-->

    <system.diagnostics>
        <sources>
          <source name="System.ServiceModel" switchValue="Off, ActivityTracing">
            <listeners>
              <add type="System.Diagnostics.DefaultTraceListener" name="Default">
                <filter type="" />
              </add>
              <add initializeData="x.log" type="System.Diagnostics.XmlWriterTraceListener"
                name="sdt">
                <filter type="" />
              </add>
            </listeners>
          </source>
          <source name="System.ServiceModel.MessageLogging" switchValue="Verbose,ActivityTracing">
            <listeners>
              <add type="System.Diagnostics.DefaultTraceListener" name="Default">
                <filter type="" />
              </add>
              <add name="ServiceModelMessageLoggingListener">
                <filter type="" />
              </add>
            </listeners>
          </source>
        </sources>
        <sharedListeners>
          <add initializeData="D:\temp\messages.xml" type="System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
            name="ServiceModelMessageLoggingListener" traceOutputOptions="Timestamp">
            <filter type="" />
          </add>
        </sharedListeners>
        <trace autoflush="true" />
      </system.diagnostics>
</configuration> 
```

请求被正确记录：

```
<MessageLogTraceRecord>
<HttpRequest xmlns="http://schemas.microsoft.com/2004/06/ServiceModel/Management/MessageTrace">
<Method>POST</Method>
<QueryString></QueryString>
<WebHeaders>
<SOAPAction>"http://www.thatindigogirl.com/samples/2006/06/GigManagerServiceContract/SaveGig"</SOAPAction>
<Connection>Keep-Alive</Connection>
<Content-Length>485</Content-Length>
<Content-Type>text/xml; charset=utf-8</Content-Type>
<Expect>100-continue</Expect>
<Host>localhost:8000</Host>
</WebHeaders>
</HttpRequest>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<To s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://localhost:8000/GigManagerService</To>
<Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://www.thatindigogirl.com/samples/2006/06/GigManagerServiceContract/SaveGig</Action>
</s:Header>
<s:Body>
<SaveGig xmlns="http://www.thatindigogirl.com/samples/2006/06">
<item xmlns:a="wcf_expts" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:DateEnd>2009-11-01T05:30:00</a:DateEnd>
<a:DateStart>2009-10-31T22:30:00</a:DateStart>
<a:Description>some desc</a:Description>
<a:Id>0</a:Id>
<a:Place i:nil="true"></a:Place>
<a:Title>some boring event</a:Title>
<a:Url>http://askfdj.com</a:Url>
</item>
</SaveGig>
</s:Body>
</s:Envelope>
</MessageLogTraceRecord> 
```

以及我在 Trace Viewer 中看到的响应**（为什么没有标头，http 响应？）**

```
<MessageLogTraceRecord>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header>
<Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://www.thatindigogirl.com/samples/2006/06/GigManagerServiceContract/SaveGigResponse</Action>
</s:Header>
<s:Body>
<SaveGigResponse xmlns="http://www.thatindigogirl.com/samples/2006/06"></SaveGigResponse>
</s:Body>
</s:Envelope>
</MessageLogTraceRecord> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-15T15:44:52.520

您是否在响应端进行流式传输？这可以解释 - 当您使用流式传输时，只会记录标头（而不是流式传输数据）。

马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-18T09:48:35.720

如果消息是流式传输的，您会在跟踪的 Body 标记中看到“...stream...”（我写了一篇[关于](http://pvlerick.github.io/2009/03/messagetostring-returning-stream/).

除了用于响应 HttpRequest 的 SOAP 标头之外，还有其他标头吗？我的意思是您似乎要寻找的是 HttpRequest 标头，但响应不是 HttpRequest。我不确定，所以我可能错了:)

# javascript - 如何找出导致在 FireFox 中执行 javascript 函数的事件？

> ID：868942
> 
> 赞同：4
> 
> 时间：2009-05-15T14:16:28.723
> 
> 标签：javascript, firefox

我正在调试一个旧的 Infragistic 网格。其中一个 javascript 函数执行的次数超过了需要的次数。它被编码为在用户单击网格中的单元格时执行。但是，有时它会在鼠标悬停在单元格上时运行。我想知道是否有办法跟踪导致此功能运行的事件。

该函数的多次执行仅在 FireFox 中发生，IE 的行为与预期相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T14:21:24.623

Firebug 有一个非常有用的调试器：http: [//getfirebug.com/js.html](http://getfirebug.com/js.html)

[这里](http://thecodecentral.com/2007/08/01/debug-javascript-with-firebug)有一个很好的教程，它会告诉你所有你需要知道的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:20:12.757

最棒的 css、javascript、html、dom、其他一切扩展：[Firebug](http://getfirebug.com/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-15T14:19:39.667

这可能是事件冒泡的问题。检查是否有任何包含您的事件的元素也处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T16:19:05.323

跟踪事件的最简单方法是在事件处理程序 fe 中产生语法错误`alert(non_existing_object)`。遇到错误时，Firebug 会显示函数调用堆栈跟踪（必须在其设置之前设置）。

# subsonic - 主键组成

> ID：868950
> 
> 赞同：0
> 
> 时间：2009-05-15T14:17:34.307
> 
> 标签：subsonic

```
Customer customer = new Cliente(4); 
```

在代码中，通过 IdCliente = 4 创建了一个对象 customer

如何创建一个对象客户，该客户拥有由 idEmpresa 和 idCliente 组成的主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T18:07:22.380

我想您是在问是否可以加载具有复合键的亚音速对象。

```
Customer customer = new SubSonic.Select()
  .From(Customer.Schema)
  .Where(Customer.IdEmpresaColumn).IsEqualTo(idEmpresa)
  .And(Customer.IdClienteColumn).IsEqualTo(idCliente)
  .ExecuteSingle(); 
```

请阅读[http://subsonicproject.com/querying/select-queries/](http://subsonicproject.com/querying/select-queries/)。

# c++ - 快速 JPEG 编码库

> ID：868966
> 
> 赞同：11
> 
> 时间：2009-05-15T14:19:44.083
> 
> 标签：c++, c, encoding, jpeg

有人知道 C/C++ 的免费开源 jpeg 编码库吗？目前我正在使用 ImageMagick，它易于使用，但速度很慢。我将其与英特尔性能基元的评估进行了比较，IPP 的速度非常快。不幸的是，它也需要 200 美元，而且我不需要 99% 的 IPP）。它也只能在英特尔上快速运行。

有人做任何测试吗？还有其他比 ImageMagick 更快的好的库吗？

编辑：我使用的是 8 位版本的 ImageMagick，它应该更快。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2010-01-20T06:21:12.410

查看 TigerVNC ( [http://www.tigervnc.com](http://www.tigervnc.com) ) 主干中的 libjpeg/SIMD。我们优化了 64 位和 32 位版本，它们在压缩/解压缩基线 JPEG 时几乎与 IPP 一样快：

[http://www.mail-archive.com/tigervnc-devel@lists.sourceforge.net/msg00403.html](http://www.mail-archive.com/tigervnc-devel@lists.sourceforge.net/msg00403.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T14:35:34.153

我相信 GIL 是 Boost 中的一个库，它包含一种以 JPEG 格式保存图像数据的方法。不过我不知道它的速度。鉴于该库是由 Adob​​e 赞助的，我希望它做得很好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-05-15T15:41:43.137

AMD 提供[Framewave](http://developer.amd.com/cpu/libraries/framewave)，这是 IPP 的开源替代方案。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-06T04:44:29.827

ImageMagick 使用 libjpeg（又名独立 JPEG 组库）。如果提高 libjpeg 的速度，ImageMagick JPEG 的速度就会提高。

有几个选项：

1.  编译优化的 libjpeg。如果你有一个现代的 gcc 和至少一个 Pentium 4，你可以尝试`-O3 -msse2`看看它是否可以提高你的速度。然后你可以使用`LD_LIBRARY_PATH`或其他方式来加载你的 libjpeg 而不是系统的。
2.  试用 libjpeg-mmx。它是无人维护的，据说有问题并且存在安全漏洞，但它可能会在您的情况下提高速度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T14:24:38.610

如果您环顾四周，您可能会发现旧版本的英特尔 JPEG 库。它不是开源的，但速度很快。它的速度足以在 733MHz P-III 上获得 25fps。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-18T08:19:51.330

还有一个相当老的[独立JPEG组](http://www.ijg.org/)，我不能保证它的速度。但它应该是稳定的。

通过[此页面](http://www.stereopsis.com/jpg/)找到。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-06-08T15:00:19.663

我使用 100% 质量对 512x512 jpeg 进行了一些时序编码（我知道 100% 不是无损的）。基本上 ImageMagick 只比 libjpeg 慢一点。对于 100 张图像，差异约为 10 秒。然后我得到了带有 SIMD 扩展的 libjpeg（[http://cetus.sakura.ne.jp/softlab/jpeg-x86simd/jpegsimd.html#source](http://cetus.sakura.ne.jp/softlab/jpeg-x86simd/jpegsimd.html#source)），而且速度快了 6-10 倍。请注意，这实际上取决于图像的类型。有很多黑色的图像真的很快，到处都有细节的图像真的很慢——我相信这是编码算法。我可能不得不尝试一下 libjpeg-mmx，因为它看起来比我得到的日文版本维护得更好，我什至不知道许可证是什么。

我也试图让 Framewave 工作，但什至无法启动它。头文件缺少某些结构的定义，论坛完全不提供支持。我不敢相信它是“由 AMD 赞助的”。

# programming-languages - 什么编程概念/技术提高了您的生产力？

> ID：868968
> 
> 赞同：-3
> 
> 时间：2009-05-15T14:19:55.033
> 
> 标签：programming-languages, paradigms

我已经编程好几年了，从那时起，我学到了一些概念和技术，这些概念和技术使我成为了一个更好的程序员（即 OOP、MVC、正则表达式、散列等）。我也觉得通过学习几种语言（basic、pascal、C/C++、lisp、prolog、python），我以一种非常积极的方式拓宽了我的视野。但是从前一段时间我觉得我没有学习任何新的好“技巧”。你能推荐一些有趣的概念/技术/技巧，让我重新学习吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-15T16:59:37.303

YAGNI（你不需要它）和 DTSTTCPW（做最简单的可能工作）

很容易花很多时间思考边缘情况，然后发现你已经实现了一些完全没用的东西。我相信一个更好的方法是敲出一个简单的原型，然后戳它，直到你对领域足够了解以创建生产代码。

但是，要认识到，无论您喜欢与否，您的原型都将演变为生产代码。因此，请记住这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-15T14:23:21.220

一个好的范式转换总是能让你以不同的方式看待事物并成为一个更好的开发者。我建议您阅读[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)，并可能学习一门函数式语言，如[Haskell](http://en.wikipedia.org/wiki/Haskell_programming_language)或[Scheme](http://en.wikipedia.org/wiki/Scheme_programming_language)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T14:32:33.023

学习如何使用您的 IDE 和工具。对我来说，这大大提高了生产力。

举些例子：

*   学习如何使用源代码级调试器
*   使用 purify/boundschecker 等工具
*   外汇警察

等等。我意识到我在和自己约会，但这些都是很大的步骤。还有很多。

任何时候你可以改变你思考问题的方式或解决问题而不必撤销以前的工作是巨大的收获。流程、工具等都可以提供帮助。不要局限于寻找提高生产力的灵丹妙药。

观察富有成效的人工作并让他们告诉你他们在做什么以及为什么这样做也是非常宝贵的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T15:03:19.733

老实说，使用**和学习**像 .NET 这样的优秀框架确实提高了我的工作效率。

我经常对人们愿意重新发明的东西感到惊讶，因为他们不知道框架中*已经存在相同的功能。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-16T10:59:44.897

[VIM 快速参考卡](http://tnerual.eriogerg.free.fr/vim.html)。在我开始使用高级 vim（宏、插件）后，我已经停止在手动编码期间执行任何重复操作。

除此之外，Scrum 和晚上工作，没有人打断你给了我最大的好处。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-15T14:23:45.697

敏捷，尤其是测试驱动开发。自面向对象设计发明以来，软件开发发生的最好的事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-15T14:25:46.393

关于编码，我想说[设计模式](http://en.wikipedia.org/wiki/Design_pattern_(computer_science))和[架构模式](http://en.wikipedia.org/wiki/Design_pattern_(computer_science))总是很好看，可以帮助您编写更清洁/更好的代码。

对于方法论，我建议敏捷开发很棒。有许多技术和方法（我个人是[极限编程](http://en.wikipedia.org/wiki/Extreme_Programming)的粉丝）和阅读可以让你忙碌并改进你的一般方法。

最后我想说学习像Ruby这样的新语言

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-20T22:05:13.310

如果您想将您的经验扩展到 Web 编程，您应该尝试掌握 HTTP 请求/响应范式。这将使您更轻松地创建 Web 应用程序，因为您了解底层框架。

(http)://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-05-15T14:35:56.307

1.  设计模式
2.  [SCRUM](http://en.wikipedia.org/wiki/Scrum_(development))流程
3.  [DiSC 评估](http://en.wikipedia.org/wiki/DISC_assessment)（以及理解它如何应用于协作软件开发）
4.  StackOverflow.com（当然！）
5.  谷歌
6.  ...其他的东西，我敢肯定

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-05-15T16:55:51.633

试着学会从用户的角度看事情。例如：

*   学习如何编写有意义的错误信息
*   学习如何制作可用的应用程序
*   学习一些基本的速度优化技术

请记住，用户看到的是您的应用程序，而不是您的代码。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-05-15T15:17:12.960

1.  设计模式。学习如何打破对实现和继承的依赖，以及依赖接口（契约），反而改变了我对编程的看法。

2.  调试。一旦我弄清楚如何实际单步执行代码并逐行检查底层状态，它就彻底改变了我对代码进行故障排除的方式。

3.  练习，练习练习：直到相对较短的时间之前，我才意识到在工作之外继续练习我的技能是多么重要。我在家里犯的错误和解决方案使我在工作中成为更好的程序员，反之亦然。如果你想擅长某事，学习永远不要停止，编程也不例外。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-05-15T16:49:52.833

如果我只能选择一个，我会说测试驱动设计，也就是 TDD：在增量添加功能*之前*编写单元测试（并检查它们是否失败） 。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-05-15T14:22:35.027

我会看一些结合了面向对象和功能元素的新语言，比如 C# 或 Scala。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-16T11:43:13.950

从长远来看，高层次的理解、创建具有适当依赖关系的良好抽象是值得的。例如，[得墨忒耳法则](http://www.cmcrossroads.com/bradapp/docs/demeter-intro.html)是一个重要的指导方针。我还推荐阅读 Eric Evan 的[领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/0321125215)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-15T15:22:53.820

学习 Smalltalk 帮助我变得更有效率。它是一种易于学习的语言，并且可以非常快速地构建事物。要获得令人惊叹的生产力帮助，请查看[Seaside](http://www.seaside.st)，它是用于构建 Web 应用程序的框架。而且，如果你只习惯了花括号语言，Smalltalk 也会让你微笑！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-05-15T16:21:15.383

按此顺序，我得到了以下范例的帮助：

1）自底向上编程 2）自顶向下编程（C、Pascal） 3）面向对象编程（Smalltalk、Java） 4）函数式编程（lisp、Mathematica）

在（序言）中加入了一些逻辑编程。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-05-15T16:52:52.857

nHibernate 放下手。我不需要为我的业务对象编写数据库功能这一事实非常有用且节省时间。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-06-21T22:25:39.953

代码生成器。它们是软件工程中最好的东西。

你想用 asm 写你所有的项目吗？不，让我们从 C++ 生成它。或者来自位于 JVM 之上的东西，它努力生成必要的机器代码。

到处复制相同的源代码，但坚持使用一种坚持线路噪音的语言？使用宏。

想要在没有它们的语言中使用 lambda？弄清楚如何伪造所需的匿名名称和变量范围，然后生成样板。

没有一种现成的语言完全符合您的思维模式、所需的语法甚至语义？为新的编译器编写一个编译器。

更好的语言很好。更好的设计模式很好。Emacs 很棒。但是编译器是我们领域的全部力量所在。我怀疑在其他任何答案中都没有提到它们的唯一原因是我们无法想象没有任何东西的编程。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2009-05-15T14:25:07.673

复制/粘贴技术

# jquery - 使用 Jquery 将函数绑定到多个元素

> ID：868975
> 
> 赞同：9
> 
> 时间：2009-05-15T14:20:17.280
> 
> 标签：jquery, binding, click

我对 jquery 有这个小问题：我需要做这样的事情：

```
$(document).ready(function(){
    links = {};
    links.a = "Link a";
    links.b = "Link b";
    links.c = "Link c";

    for (x in links){
        $("#" + x).css("border","1px solid #000");
        $("#" + x).click(function(){
            alert(x);
        });
    }
});
</script>
<div id="a">a</div><br />
<div id="b">b</div><br />
<div id="c">c</div><br /> 
```

这样，当您单击 div#a 时，您将收到“Link a”警报，在 div#b 上获得“Link b”等等...问题是，如果您运行此代码，单击每个元素都会发出警报（ "Link c") 结果，似乎只有最后一个函数变体被分配给每个 div...

当然，我可以通过编辑函数以使用 div 的 id 并使用 $(this) 来破解它，但是出于好奇：有没有办法让这个循环工作？通过为函数中的每个元素创建和分配一个新函数？

提前谢谢...

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2010-01-12T15:00:00.053

jQuery 的好处是它允许链接和绑定多个元素，就像 css 一样。

```
$(document).ready(function(){

    $('#a,#b,#c')
        .css("border","1px solid #000")
        .bind('click',function(){
            // do something
         });

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-05-15T15:02:46.413

我相信这就是你所追求的：

```
$(document).ready(function(){
   links = {
      a:"Link a",
      b:"Link b",
      c:"Link c",
    };

    $.each(links, function(id,text){
      $("#"+id)
       .css("border","1px solid #000")
       .click(function(){ alert(text) })
    })
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-05-15T14:49:58.097

使用闭包：（“这个”解决方案更优雅，但我发布这个是因为现在删除的答案有一个不起作用的闭包解决方案）

```
$(document).ready(function(){
    links = {};
    links.a = "Link a";
    links.b = "Link b";
    links.c = "Link c";

    for (var x in links){
        $("#" + x).css("border","1px solid #000");
        $("#" + x).click(
            function(xx){ 
                return function() { alert(xx) };
            }(x)
        );
    };
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-20T07:22:25.670

工作演示[http://jsfiddle.net/FWcHv/](http://jsfiddle.net/FWcHv/)

在你的代码中你多次调用jQuery构造函数，而`$('#a')`不是你应该调用像`$('#b')``$('#c')``$('#a,#b,#c')`

在我的代码中，我使用 $.each 传递了所有 id 并将它们组合起来，在下一步中，我使用`$('#a,#b,#c')`存储在变量`x`中来优化和简化代码。

我还检查了如果`links{}`为空，它将不会使用变量进行处理`i`

```
$(document).ready(function () {
    links = {};
    links.a = "Link a";
    links.b = "Link b";
    links.c = "Link c";
    i = 0;
    x = '';
    $.each(links, function (id) {
        x += "#" + id + ',';
        i++;
    });
    if (i > 0) {
        $($(x.slice(0, -1))).css("border", "1px solid #000").click(function () {
            alert($(this).text());
        });
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T14:56:58.597

```
<script type="text/javascript">
$(document).ready(function(){
    $('.links').css("border","1px solid #000");
    $('.links').live('click', function() {
        alert("Link " + $(this).attr('id'));
    });
});
</script>
</head>
<body>
<div id="a" class="links">a</div><br />
<div id="b" class="links">b</div><br />
<div id="c" class="links">c</div><br /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T14:35:03.873

你需要使用“这个”。

```
$(document).ready(function(){
    links = {};
    links.a = "Link a";
    links.b = "Link b";
    links.c = "Link c";

    for (var x in links){
        $("#" + x).css("border","1px solid #000");
        $("#" + x).click(function(){
                alert("Link "+this.id+" Alert!");
        });
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-15T14:36:56.600

```
<script type="text/javascript">
$(document).ready(function(){
    links = {};
    links.a = "Link a";
    links.b = "Link b";
    links.c = "Link c";

    for (x in links){
        $("#" + x).css("border","1px solid #000").click(function(){
                alert($(this).attr('id'));
        });
    }
});
</script>

</head>

<body>

<div id="a">a</div><br />
<div id="b">b</div><br />
<div id="c">c</div><br /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-15T15:05:19.683

看到您无论如何都在硬编码要影响的元素，您不妨这样做，因为它可能更快而且更清洁，IMO：

```
$("#a,#b,#c").css("border","1px solid #000");
$("#a,#b,#c").click(function(){
    alert("Link "+this.id+" Alert!");
}); 
```

**编辑：**我没有看到你问题的最后一部分......对不起。你也可以这样做：

```
var links = {};
links.a = "Link a";
links.b = "Link b";
links.c = "Link c";

var ids = '';
$.each(function(key,val) {
    ids += "#"+key+","; // extra commas are ignored in jQuery
});

$(ids)
    .css("border","1px solid #000")
    .bind('click',function(){
        alert("Link "+this.id+" Alert!");
    }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-12-08T15:20:51.627

尝试使用：

```
$(window).load(function(){

}); 
```

:)

# c# - 同时从多个文本框中选择文本

> ID：868976
> 
> 赞同：2
> 
> 时间：2009-05-15T14:20:27.043
> 
> 标签：c#, textbox

我有 10 个文本框，我需要从每个文本框中选择文本。问题是我无法从多个文本框中选择文本。我的代码有没有解决这个问题的方法。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        createTextBoxes(10);

        ((TextBox)textBoxes[0]).Select(1, 4);
        ((TextBox)textBoxes[1]).Select(1, 4); // <- it will not select text 
        ((TextBox)textBoxes[2]).Select(1, 4); // same here
    }
    Control[] textBoxes;
    private void createTextBoxes(int cnt)
    {
        textBoxes = new Control[cnt];
        for (int i = 0; i < cnt; i++)
        {
            TextBox tb = new TextBox();
            tb.Name = i.ToString();
            tb.Location = new Point(5, 5 + 14 * i);
            tb.Size = new Size(600, 20);
            tb.BorderStyle = BorderStyle.None;
            tb.Text = "sample text" + i.ToString();
            textBoxes[i] = tb;
            this.Controls.Add(tb);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-05-15T14:33:31.583

将 texboxes 的 HideSelection 属性设置为 false。他们会在失去焦点后保持选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-15T14:27:28.977

一次只能有一个控件具有“焦点”...您不能选择（即：突出显示）多个控件的文本。

我还刚刚通过在表单中​​添加一个按钮进行了测试，并在那里发布了您的 3 个“选择”片段......没有显示突出显示。但是，当我通过每个控件执行 TAB 时，前 3 个都恭敬地显示了突出显示的部分。当我浏览其余部分时，其余文本框的整个字段都被完全选中。

或者你真的想完成别的事情......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-15T14:29:41.187

文本被选中，你只是看不到它的焦点。我运行了您的代码，然后通过控件进行了选项卡化。前 3 个按指定选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-05-15T14:22:44.997

这可能不起作用，因为即使您已将 TextBox 实例添加到表单，它们还没有显示。在它们被显示并最初呈现之前，可能无法对它们进行选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-15T14:30:26.740

实际上确实如此，问题是您的其他两个文本框（[1] 和 [2]）没有焦点。一次只能有一个控件具有焦点。如果您点击 tab 将焦点放在下一个 TextBox 上，您将看到选定的文本。

# c# - DotZlib - 膨胀错误处理代码 1 Z_STREAM_END

> ID：868977
> 
> 赞同：1
> 
> 时间：2009-05-15T14:21:11.240
> 
> 标签：c#, .net, mono, zlib

我正在使用稍微修改过的 DotZlib 版本，它是带有 zlib 源代码的 contrib 目录的一部分，用于扩充实时数据流。

我需要使用 InflateInit2 而不是常规的 inflateInit - 但这是与提供的库的唯一区别。

Netherlesse 经过几次读取后，我从 zlib 收到错误代码 1，并且在添加字节时无法恢复。

zlib contrib 目录中的原始代码是：

```
 public override void Add(byte[] data, int offset, int count)
        {
            if (data == null) throw new ArgumentNullException();
            if (offset < 0 || count < 0) throw new ArgumentOutOfRangeException()
;
            if ((offset+count) > data.Length) throw new ArgumentException();

            int total = count;
            int inputIndex = offset;
            int err = 0;

            while (err >= 0 && inputIndex < total)
            {
                copyInput(data, inputIndex, Math.Min(total - inputIndex, kBufferSize));
                err = inflate(ref _ztream, (int)FlushTypes.None);
                if (err == 0)
                    while (_ztream.avail_out == 0)
                    {
                        OnDataAvailable();
                        err = inflate(ref _ztream, (int)FlushTypes.None);
                    }

                inputIndex += (int)_ztream.total_in;
            }
            setChecksum( _ztream.adler );
        } 
```

顺便说一句，有谁知道如何贡献改进的代码？该实现设计得很好，但从我的角度来看是不完整的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-18T10:45:33.827

我觉得

```
 err = inflate(ref _ztream, (int)FlushTypes.None);
            if (err == 0)
                while (_ztream.avail_out == 0)
                {
                    OnDataAvailable();
                    err = inflate(ref _ztream, (int)FlushTypes.None);
                } 
```

应该

```
 while (_ztream.avail_in > 0)
            {
                err = inflate(ref _ztream, (int)FlushTypes.None);
                if (err!=0)
                    break;
                OnDataAvailable();
            } 
```

我看到代码的第一个版本存在两个问题：

1.  如果 inflate() 产生数据但没有产生足够的数据使avail_out 为 0，即使数据可用，您也不会调用 OnDataAvailable。
2.  即使avail_in 为0，您也可能会调用inflate()，我很容易想象这可能会产生流结束错误。

（注意：我怀疑你是以专业身份认识我的。这个答案是以私人身份给出的，与我为雇主的工作无关。）

# wpf - WPF 中的页面首选项对话框

> ID：868983
> 
> 赞同：1
> 
> 时间：2009-05-15T14:21:55.793
> 
> 标签：wpf, printing, printdialog, page-setup

我正在摆弄添加从我正在处理的程序输出到 PDF 和 XPS 的能力。最初两者都是通过打印机（pdf 打印机/xps 编写器）完成的，但我想更直接一点。

我遇到的问题是 WPF 似乎没有页面首选项对话框。有没有，我只是找不到它，还是必须在 WPF 中自定义构建这样的东西？

我可以显示打印对话框，然后实际上不调用 PrintDialog.Print，但这并不比让用户使用 PDF 打印机打印更好。我可以从打印对话框中检索所有页面设置，但用户实际上会为当前选择的任何打印机设置这些设置。

我只需要一个包含所有标准打印机首选项的对话框，例如页面大小、边距、副本等。创建并不难，但我很惊讶我找不到...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-13T02:43:17.753

我对**[这个问题](https://stackoverflow.com/questions/727328/how-can-i-invoke-the-dialog-to-set-printer-options-manually/1416679#1416679)**的回答应该对你有所帮助。有什么机会......我**刚刚**回答了它，我偶然发现了你的问题:)

希望这对你有帮助！！

# javascript - JavaScript 和 JSP

> ID：868985
> 
> 赞同：0
> 
> 时间：2009-05-15T14:22:07.757
> 
> 标签：javascript, jsp, request, dom-events

首先，我已经完成了我的研究，并且已经知道 JavaScript = 客户端 JSP = 服务器端。我不想浪费你的时间。

我的情况是我想从事件（而不是 HTML 表单）中执行 JSP 代码。

我有一个 HTML 链接 ( `<a href="...">XXX</a>`)，它不在`<form>`标签内；它只是一个普通的 HTML 链接。通过 Javascript，我将能够获取 href 值并将其存储在隐藏的输入字段中。紧接着，我想`request.getAttribute("...")`在 JSP 页面之间执行和传递参数。

我现在知道如何做后面的部分（即让`request.getAttribute`代码在 Javascript 代码执行后立即继续进行。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:28:31.987

你不能像这样运行 JSP 代码。

正如您所说，JSP 代码是在服务器端运行的，因此您无法真正从 Web 浏览器触发它。

如果您只是想在 JSP 页面之间传递参数，您可以在调用第二个 JSP 时将该参数添加到 URL 的 queryString 中，并在其中使用 request.getAttribute()。

请记住，JSP 代码在页面发送到浏览器之前执行。

我希望这有帮助。

# c# - 为什么 Gargabe Collector 不收集用户控件？

> ID：868987
> 
> 赞同：3
> 
> 时间：2009-05-15T14:22:32.827
> 
> 标签：c#, .net, memory, memory-leaks, garbage-collection

我有一个存在内存泄漏的大型 .NET C# 应用程序。使用 ant 内存分析器，我可以看到内存中有多个版本的相同用户控件，而垃圾收集器没有收集它们。Web 表单上有输出缓存，但实际用户控件上没有输出缓存。

用户控件没有被处理是有原因的吗？

我如何确定为什么以及是什么阻止它们被垃圾收集器处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-15T14:24:26.520

用户控件不被垃圾收集的原因有很多。查看代码本身，您是否正在实例化实现 IDisposable 的对象（例如记录集），而您实际上并没有处理这些对象？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T14:26:52.583

如果您在页面上启用了输出缓存，则所有子控件也将缓存。至于您的控件的多个实例在内存中徘徊，请使用一些使用部分页面缓存的策略来读取此页面，这将帮助您节省内存。

[http://msdn.microsoft.com/en-us/library/k4he1ds5(VS.71).aspx](http://msdn.microsoft.com/en-us/library/k4he1ds5(VS.71).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-16T11:58:43.367

基本上，如果有人持有至少一个对象的引用，则不会收集该对象。查看并找到谁持有参考。ANTS Profiler 或 .NET Memory Profiler (SciTech) 将提供很好的洞察力。

# c - 为什么这个 C 函数在 fclose 时崩溃？

> ID：868992
> 
> 赞同：2
> 
> 时间：2009-05-15T14:23:09.800
> 
> 标签：c, exception, function

请帮助我理解为什么这个函数在到达 fclose 时会抛出异常：

```
 void receive_file(int socket, char *save_to, int file_size) {
    FILE *handle = fopen(save_to,"wb");
    if(handle != NULL) {
        int SIZE = 1024;
        char buffer[SIZE];
        memset(buffer,0,SIZE);
        int read_so_far = 0;
        int read_now = 0;
        int reading_unit = (file_size < SIZE) ? file_size : SIZE;
        do {
            read_now = read(socket,buffer,reading_unit);
            fwrite(buffer,read_now,1,handle);
            read_so_far += read_now;
            if(read_so_far >= file_size) {
                break;
            }
            memset(buffer, 0, sizeof(buffer));
        } while (1);
        read_now = 0;
        fclose(handle);
    }
    else {
        extern int errno;
        printf("error creating file");
        printf(" error code : %d",errno);
        exit(-1);
    }
} 
```

Eclipse CDT 存在以下错误：

```
单步执行直到退出函数 __kernel_vsyscall，
没有行号信息。
```

此函数的目的是通过套接字接收文件。

编辑：我使用的是 CentOS 5.3。问题是，文件被创建和写入。甚至 MD5 也是正确的。我不明白为什么它在 fclose 失败。

EDIT2：这是我设法得到的堆栈跟踪：

```
*** 检测到 glibc *** /home/linuser/workspace/proj/Debug/proj: free(): 下一个大小无效（正常）：0x096a0068 ***
======= 回溯：=========
/lib/libc.so.6[0x4fb0f1]
/lib/libc.so.6(cfree+0x90)[0x4febc0]
/lib/libc.so.6(fclose+0x136)[0x4e9c56]
/home/linuser/workspace/proj/Debug/proj[0x8048cd8]
/home/linuser/workspace/proj/Debug/proj[0x80492d6]
/home/linuser/workspace/proj/Debug/proj[0x804963d]
/lib/libc.so.6(__libc_start_main+0xdc)[0x4a7e8c]
/home/linuser/workspace/proj/Debug/proj[0x8048901]
======= 内存映射：========
001ff000-00200000 r-xp 001ff000 00:00 0 [vdso]
0046f000-00489000 r-xp 00000000 08:06 1280361 /lib/ld-2.5.so
00489000-0048a000 r-xp 00019000 08:06 1280361 /lib/ld-2.5.so
0048a000-0048b000 rwxp 0001a000 08:06 1280361 /lib/ld-2.5.so
00492000-005d0000 r-xp 00000000 08:06 1280362 /lib/libc-2.5.so
005d0000-005d2000 r-xp 0013e000 08:06 1280362 /lib/libc-2.5.so
005d2000-005d3000 rwxp 00140000 08:06 1280362 /lib/libc-2.5.so
005d3000-005d6000 rwxp 005d3000 00:00 0
005d8000-005fd000 r-xp 00000000 08:06 1280369 /lib/libm-2.5.so
005fd000-005fe000 r-xp 00024000 08:06 1280369 /lib/libm-2.5.so
005fe000-005ff000 rwxp 00025000 08:06 1280369 /lib/libm-2.5.so
009b2000-009bd000 r-xp 00000000 08:06 1280372 /lib/libgcc_s-4.1.2-20080825.so.1
009bd000-009be000 rwxp 0000a000 08:06 1280372 /lib/libgcc_s-4.1.2-20080825.so.1
009c5000-00aa5000 r-xp 00000000 08:06 5465873 /usr/lib/libstdc++.so.6.0.8
00aa5000-00aa9000 r-xp 000df000 08:06 5465873 /usr/lib/libstdc++.so.6.0.8
00aa9000-00aaa000 rwxp 000e3000 08:06 5465873 /usr/lib/libstdc++.so.6.0.8
00aaa000-00ab0000 rwxp 00aaa000 00:00 0
08048000-0804a000 r-xp 00000000 08:06 4884214 /home/linuser/workspace/proj/Debug/proj
0804a000-0804b000 rw-p 00001000 08:06 4884214 /home/linuser/workspace/proj/Debug/proj
096a0000-096c1000 rw-p 096a0000 00:00 0 [堆]
b7e00000-b7e21000 rw-p b7e00000 00:00 0
b7e21000-b7f00000 ---p b7e21000 00:00 0
b7f99000-b7f9a000 rw-p b7f99000 00:00 0
b7faa000-b7fac000 rw-p b7faa000 00:00 0
bfa82000-bfa97000 rw-p bffea000 00:00 0 [堆栈]

```

这是该功能的“更新”版本：

```
 void rec_file(int socket,char *path,int size)
{
    FILE *handle = fopen(path,"wb");
    char buffer[4096];
    int total_read = 0;
    if(handle != NULL)
    {
        while(1)
        {
            int bytes_read = recv(socket,buffer,4096,0);
            total_read    += bytes_read;
            if(bytes_read != -1)
            {
                fwrite(buffer,bytes_read,1,handle);
            }
            else
            {
                printf("read error ");
                exit(-1);
            }
            if(total_read >= size)
            {
                break;
            }
        }
        fclose(handle);
    }
    else
    {
        printf("error receiving file");
        exit(-1);
    }
} 
```

也许这更干净？但是，我仍然收到相同的 fclose 异常。

EDIT3：我注释掉了所有内容，只留下了以下代码，遗憾的是，它仍然在 fclose 抛出异常：

```
 void nrec(int sock,char* path,int size)
{
    FILE *handle = fopen(path,"wb");
    if(handle == NULL)
    {
        printf ("error opening file");
        return;
    }
    fclose(handle);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-15T14:37:14.290

*   fclose() 返回一个值：如果文件关闭成功，则返回 0，否则返回 EOF。考虑将您的代码修改为...

    if (fclose(handle)) { printf("错误关闭文件"); 退出（-1）；}

*   正如其他人指出的那样，检查 read() 是否有错误。

*   如果在fclose 返回 0（成功）*之后*发生崩溃，并且所有 read() 都成功，那么问题可能出在其他地方。也许是VLA。考虑将缓冲区代码更改为静态文件或 malloc/free。

*   如果调用者弄错了文件大小，比如说，声称文件是 500 字节，而实际上它只有 480 字节，你的代码会一直读取套接字吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-15T14:33:09.713

这段代码似乎很……不确定。很多不必要的分配、`memset()`调用、复杂的逻辑。

限制您尝试阅读的数量是没有意义的。始终阅读尽可能多的缓冲区空间；如果可用的数据较少，您将获得较少的数据。

它也不能正确处理错误。如果`read()`失败，它可以返回 -1，在这种情况下，Bad Things(TM) 将到处发生。

我的建议是清理它，考虑 I/O 函数的返回值并更好地检查它们，然后再试一次。

做不到这一点，如果你在 Linux 中，通过[Valgrind](http://valgrind.org/)运行它以获得帮助追踪崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-05-15T14:34:10.087

不确定，但你知道[read()](http://linux.die.net/man/2/read)可以在错误时返回负数，对吧？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-15T14:34:33.173

您没有检查是否从`read()`呼叫中收到错误指示。如果您从 获得 -1 `read()`，然后将其未经检查地传递给`fwrite()`，它将 a`size_t`作为其参数。当您的`int`值转换为`size_t`（或视为`size_t`）时，它会变成一个相当大的数字（4 GB - 在 32 位系统上为 1）。因此，`fwrite()`按照您的命令执行 - 尝试从不应该写入的地方写入大量数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-15T14:34:47.243

您需要测试 read() 的返回值 - 它可能会返回错误代码，例如 -1，以及读取的字节数。

**编辑：**在您的新代码中，您应该测试 recv() 的返回值是否 >= 0，而不是它不是 -1。如果它返回零，您也应该中断。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-15T15:30:23.943

edit3 中的代码看起来很合理。我怀疑您可能已经在其他地方踩到了一些内存，并且在您的应用程序的这一点上遇到了问题。

您是否有边界检查器、净化器等可以运行以检查缓冲区溢出、使用释放的内存块等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-05-15T15:36:39.793

您确定在使用此功能之前没有在其他地方损坏堆吗？尝试在 valgrind 下运行您的程序。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-05-19T21:35:33.030

如果您的“EDIT3”版本的代码仍然崩溃，那么问题出在代码的其他地方。如果您在程序的另一部分中犯了错误（例如，两次释放某些内容，取消引用未指向您认为的位置的指针），那么导致的损坏可能直到以后才被发现（例如当您到达关闭（））。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-05-15T14:38:04.333

可能是因为您在文件中写入的字节多于 file_size 吗？如果您的 file_size 为 1025，则使用当前逻辑，那么您最终将向文件写入 2048 个字节。我相信，您应该在 while 循环中重新计算 reading_unit 。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-05-15T14:50:32.790

我不确定编译器将如何解释这两行

```
int SIZE = 1024;
char buffer[SIZE]; 
```

您正在使用变量来调整缓冲区大小而不是常量。我不确定这是否会像您预期的那样运行。您可以尝试以下方法。

```
#define SIZE (1024)
char buffer[SIZE]; 
```

# math - 矩形内未知数的最大正方形大小

> ID：868997
> 
> 赞同：14
> 
> 时间：2009-05-15T14:23:45.710
> 
> 标签：math, tiles, max-size

如果我有一组可以是任意数字的图块（正方形）并且它们要填充未知大小的容器（矩形），我如何计算出图块的最大尺寸而不使它们重叠。

因此，如果我有 2 个图块且矩形为 100 * 100，则最大图块大小为 50 * 50。如果这种大小的矩形有 3 或 4 个图块，这也将是图块的最大尺寸，恰好如此在这个例子中是一个正方形。

如果矩形是 100 * 30 并且我有 2 个图块，则正方形的最大尺寸为 30 * 30，如果我有 4 个图块，则最大尺寸为 25 * 25。

我怎样才能以编程方式做到这一点，而不会通过所有可能的组合来占用处理器。

* * *

我尝试更好地总结一下，我有一个：

矩形/边界框，我需要尽可能多地填充而不使瓷砖重叠。

我知道矩形的高度和宽度（但这可以在运行时改变）。

我有 X 个图块（这可以在运行时更改），这些是正方形。

任何瓦片都不应重叠，每个瓦片的最大尺寸是多少。它们都应具有相同的尺寸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-15T15:34:52.793

这是一个包装问题。很难找到最佳解决方案。参见例如[Packing N 个 squares in a square](http://en.wikipedia.org/wiki/Square_packing_in_a_square)。

您可以通过将总表面除以平方数来计算（乐观）上限：`sqrt(width*height/n)`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-05-15T21:35:59.027

从概念上讲：

*   从 1 个方格开始
*   对于每个额外的方格，如果到目前为止您的网格框中没有空间，请将现有的框缩小到足以为额外的行或列腾出空间。

伪代码：给定 M x N 个矩形以填充 K 个正方形

```
// initial candidate grid within the rectangle
h=1
w=1
maxsquares=1
size=min(M,N) //size of the squares
while K > maxsquares
  if M/(h+1) >= N/(w+1)
    h=h+1
  else
    w=w+1
  endif
  maxsquares=h*w
  size=min(M/h,N/w)
done
print size 
```

可能有更快的方法可以跳到非常大的 K 的答案，但我想不出它们。如果您知道 M 和 N 是整数，那么可能会有更快的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-11-01T08:04:07.907

这是一个没有循环的 O(1) 解决方案。

使用矩形的纵横比（高度/宽度），您可以初步猜测 x 和 y 方向上的瓦片数量。这给出了瓷砖总数的上限和下限：在 xy 和 (x+1)(y+1) 之间。

基于这些界限，存在三种可能性：

1.  下限是正确的。计算将产生 xy 切片的最大 tileSize。
2.  上限是正确的。计算将产生 (x+1)(y+1) 个图块的最大 tileSize
3.  正确答案位于上限和下限之间。求解方程以确定 x 和 y 的正确值，然后计算最大的 tileSize 将导致正确数量的图块

```
int GetTileSize(int width, int height, int tileCount)
{
    // quick bailout for invalid input
    if (width*height < tileCount) { return 0; }

    // come up with an initial guess
    double aspect = (double)height/width;
    double xf = sqrtf(tileCount/aspect);
    double yf = xf*aspect;
    int x = max(1.0, floor(xf));
    int y = max(1.0, floor(yf));
    int x_size = floor((double)width/x);
    int y_size = floor((double)height/y);
    int tileSize = min(x_size, y_size);

    // test our guess:
    x = floor((double)width/tileSize);
    y = floor((double)height/tileSize);
    if (x*y < tileCount) // we guessed too high
    {
        if (((x+1)*y < tileCount) && (x*(y+1) < tileCount))
        {
            // case 2: the upper bound is correct
            //         compute the tileSize that will
            //         result in (x+1)*(y+1) tiles
            x_size = floor((double)width/(x+1));
            y_size = floor((double)height/(y+1));
            tileSize = min(x_size, y_size);
        }
        else
        {
            // case 3: solve an equation to determine
            //         the final x and y dimensions
            //         and then compute the tileSize
            //         that results in those dimensions
            int test_x = ceil((double)tileCount/y);
            int test_y = ceil((double)tileCount/x);
            x_size = min(floor((double)width/test_x), floor((double)height/y));
            y_size = min(floor((double)width/x), floor((double)height/test_y));
            tileSize = max(x_size, y_size);
        }
    }

    return tileSize;
} 
```

我已经使用以下代码针对 1 到 1000 之间的所有整数宽度、高度和 tileCounts 测试了此函数：

```
for (width = 1 to 1000)
{
    for (height = 1 to 1000)
    {
        for (tileCount = 1 to 1000)
        {
            tileSize = GetTileSize(width, height, tileCount);

            // verify that increasing the tileSize by one
            // will result in too few tiles
            x = floor((double)width/(tileSize+1));
            y = floor((double)height/(tileSize+1));
            assert(x*y < tileCount);

            // verify that the computed tileSize actually
            // results in the correct tileCount
            if (tileSize > 0)
            {
                x = floor((double)width/tileSize);
                y = floor((double)height/tileSize);
                assert(x*y >= tileCount);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-05-18T12:42:09.287

我设法想出了一个“相对”的最佳解决方案。部分基于 Zac 的伪代码答案。

```
 //total number of tiles
        var tile_count : Number = numberOfSlides;
        //height of rectangle
        var b : Number = unscaledHeight;
        //width of rectanlge
        var a : Number = unscaledWidth;

        //divide the area but the number of tiles to get the max area a tile could cover
        //this optimal size for a tile will more often than not make the tiles overlap, but
        //a tile can never be bigger than this size
        var maxSize : Number = Math.sqrt((b * a) / tile_count);
        //find the number of whole tiles that can fit into the height
        var numberOfPossibleWholeTilesH : Number = Math.floor(b / maxSize);
        //find the number of whole tiles that can fit into the width
        var numberOfPossibleWholeTilesW : Number = Math.floor(a / maxSize);
        //works out how many whole tiles this configuration can hold
        var total : Number = numberOfPossibleWholeTilesH * numberOfPossibleWholeTilesW;

        //if the number of number of whole tiles that the max size tile ends up with is less than the require number of 
        //tiles, make the maxSize smaller and recaluate
        while(total < tile_count){
            maxSize--;
            numberOfPossibleWholeTilesH = Math.floor(b / maxSize);
            numberOfPossibleWholeTilesW = Math.floor(a / maxSize);
            total = numberOfPossibleWholeTilesH * numberOfPossibleWholeTilesW;
        }

        return maxSize; 
```

这样做是计算矩形的总面积，然后将其除以所需的瓷砖数量。由于每个图块都是一个正方形，我可以对它进行 SQRT，以便获得最佳图块的最大尺寸。

有了这个最佳尺寸，我然后检查我可以在宽度和高度中容纳多少个完整的瓷砖。将这些相乘，如果它小于所需的瓷砖数量，那么我会减小最佳尺寸并再次执行检查，直到所有瓷砖都适合矩形。

我可以通过做一些事情来进一步优化这一点，比如每次将最佳尺寸减少 -2 或 -1，然后如果所有瓷砖都适合增加 1，以确保我没有错过有效尺寸。或者我可以跳回超过-2，比如说-10，然后如果它们所有的瓷砖都适合增加5，那么如果不适合减少-2等等，直到我得到最佳配合。

查看[http://kennethsutherland.com/flex/stackover/SlideSorterOK.html](http://kennethsutherland.com/flex/stackover/SlideSorterOK.html)以获取我的示例。感谢所有各种信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-05-16T11:08:17.777

以下函数计算给定信息的最大尺寸图块。

如果它是用 Python 编写的这一事实让您难以理解，请在评论中告诉我，我会尝试用其他语言来完成。

```
import math
from __future__ import division

def max_tile_size(tile_count, rect_size):
    """
    Determine the maximum sized tile possible.

    Keyword arguments:
    tile_count -- Number of tiles to fit
    rect_size -- 2-tuple of rectangle size as (width, height)
    """

    # If the rectangle is taller than it is wide, reverse its dimensions
    if rect_size[0] < rect_size[1]:
        rect_size = rect_size[1], rect_size[0]

    # Rectangle aspect ratio
    rect_ar = rect_size[0] / rect_size[1]

    # tiles_max_height is the square root of tile_count, rounded up
    tiles_max_height = math.ceil(math.sqrt(tile_count))

    best_tile_size = 0

    # i in the range [1, tile_max_height], inclusive
    for i in range(1, tiles_max_height + 1):

        # tiles_used is the arrangement of tiles (width, height)
        tiles_used = math.ceil(tile_count / i), i

        # tiles_ar is the aspect ratio of this arrangement
        tiles_ar = tiles_used[0] / tiles_used[1]

        # Calculate the size of each tile
        # Tile pattern is flatter than rectangle
        if tile_ar > rect_ar:
            tile_size = rect_size[0] / tiles_used[0]
        # Tile pattern is skinnier than rectangle
        else:
            tile_size = rect_size[1] / tiles_used[1]

        # Check if this is the best answer so far
        if tile_size > best_tile_size:
            best_tile_size = tile_size

    return best_tile_size

print max_tile_size(4, (100, 100)) 
```

该算法可以大致描述如下

*   如果矩形比它的宽度高，翻转它，使它比它的高更宽。
*   计算*s*，即瓷砖数量的平方根，四舍五入。`tiles_max_height`（在代码中命名。）
*   循环*i*从 1 到*s（*含）：
    *   构建一个正方形网格，其*数量为瓦片数* */* *i*方格宽和*i*方格高。（将所有内容四舍五入。这会“填充”缺失的图块，例如当您的图块总数为 3 时使用 2 个图块乘 2 个图块。）
    *   使这个网格尽可能大。（使用纵横比计算。）确定一个图块的大小。
    *   使用该尺寸，确定瓷砖覆盖的总面积。
    *   检查这是否是迄今为止最好的总面积；如果是，存储正方形大小
*   返回那个正方形大小

这可能是这里列出的更快的算法之一，因为它计算*n 个*图块的 O(sqrt( *n* )) 中的最佳平方大小。

 ** * *

**更新**

进一步考虑，这个问题有一个基于上述解决方案的更简单的解决方案。假设你有 30 个瓷砖。您可能的瓷砖排列很容易计算：

*   30 x 1（纵横比 30.0000）
*   15 x 2（纵横比 7.5000）
*   10 x 3（纵横比 3.3333）
*   8 x 4（纵横比 2.0000）
*   6 x 5（纵横比 1.2000）
*   6 x 6（纵横比 1.0000）

假设你的矩形是 100 x 60。你的矩形的纵横比是 1.6667。这介于 1.2 和 2 之间。现在，您只需计算 8 x 4 和 6 x 5 排列的图块大小。

第一步在技术上仍然需要 O(sqrt( *n* ))，所以这个更新的方法并不比第一次尝试快。

* * *

**来自评论线程的一些更新**

```
/*
Changes made:

tiles_used -> tiles_used_columns, tiles_used_rows
    (it was originally a 2-tuple in the form (colums, rows))
*/

/* Determine the maximum sized tile possible. */
private function wesleyGetTileSize() : Number {
    var tile_count : Number = slideCount.value;
    var b : Number = heightOfBox.value;
    var a : Number = widthOfBox.value;
    var ratio : Number;    

    // // If the rectangle is taller than it is wide, reverse its dimensions    

    if (a < b) {
        b = widthOfBox.value;
        a = heightOfBox.value;
    } 

    // Rectangle aspect ratio   
    ratio = a / b;    

    // tiles_max_height is the square root of tile_count, rounded up    
    var tiles_max_height : Number = Math.ceil(Math.sqrt(tile_count))    
    var tiles_used_columns : Number;
    var tiles_used_rows : Number;
    var tiles_ar : Number;
    var tile_size : Number;

    var best_tile_size : Number = 0;    

    // i in the range [1, tile_max_height], inclusive   
    for(var i: Number = 1; i <= tiles_max_height + 1; i++) {       
        // tiles_used is the arrangement of tiles (width, height)        
        tiles_used_columns = Math.ceil(tile_count / i);   
        tiles_used_rows = i;

        // tiles_ar is the aspect ratio of this arrangement        
        tiles_ar = tiles_used_columns / tiles_used_rows;        

        // Calculate the size of each tile        
        // Tile pattern is flatter than rectangle       
        if (tiles_ar > ratio){           
            tile_size = a / tiles_used[0]   ;
        }    
        // Tile pattern is skinnier than rectangle        
        else {            
            tile_size = b / tiles_used[1];
        }        
        // Check if this is the best answer so far        
        if (tile_size > best_tile_size){           
            best_tile_size = tile_size;
        }   
    }

    returnedSize.text = String(best_tile_size);
    return best_tile_size;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-15T14:31:04.477

您能否详细说明您如何定义填充？如果我按照您的描述（大如果），您描述的许多情况似乎实际上并没有填充矩形。例如，您说 100*100 矩形中的 2 个正方形将是 50*50。如果我正确理解您的配置，它们将被放置在该矩形的“对角线”上。但是在那个矩形中也会有两个大小为 50*50 的“间隙”。这不是我认为的“填充”矩形。相反，我会将问题描述为边界框为 100*100 的 2 个（相等大小的正方形）的最大可能大小（假设每个正方形必须与至少一个其他正方形接触？）。

这里的关键点是您的矩形似乎是一个边界框并且没有填充。

另外，你能为这个计算写一个功能接口吗？给定边界框的尺寸，您是否需要对 n 个可能的正方形进行此操作？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-15T14:39:46.500

给定值：

```
N - number of tiles
a, b - sides of the rectangle 
```

可以使用此函数计算瓷砖的一侧：

```
def maxSize(n: Int, a: Int, b: Int) = {
  var l = 0
  for (i <- 1 until a.min(b)) { // 
    val newL = (a.min(b) / i).min( (a.max(b) * i)/n )
    if (l < newL && ((a.min(b)/newL) * (a.max(b)/newL) >= n )  )
      l = newL
  }
  return l
} 
```

我假设你不会制作小于 1x1 的瓷砖，无论 1 的度量是多少

首先你从 0 号开始：

```
l = 0 
```

然后你从 1 到 K 列的瓷砖迭代

```
K = min(a, b) 
```

对于每次迭代，使用此公式计算图块的新最大边

```
val newL = ( a.min(b) / i ).min( (a.max(b) * i)/n ) 
```

此公式采用以下两个值中的较小值：

```
1\. min(a, b)/i -- maximum length of a tile if there are i columns in the smaller side of the rectangle
2\. (i * max(a, b))/n -- maximum length of a tile if there are i columns and n tiles in the bigger side of the rectangle 
```

如果候选 newL 大于初始值 l 并且可以放置在正方形中而不重叠的最大可能瓷砖数大于或等于瓷砖数 n 则

```
l = newL 
```

最后返回 l

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-05-17T10:33:50.303

我假设正方形不能旋转。我很确定如果允许旋转它们，问题就会非常困难。

所以我们从左上角开始用正方形填充矩形。然后我们把正方形放在那个正方形的右边，直到我们到达矩形的右边，然后我们对下一行做同样的事情，直到我们到达底部。这就像在纸上写文字一样。

请注意，永远不会出现右侧和底部留有空间的情况。如果两个方向都有空间，那么我们仍然可以增加正方形的大小。

假设我们已经知道应该在第一行放置 10 个方格，并且这完全符合宽度。那么边长为`width/10`。所以我们可以`m = height/sidelength`在第一列中放置正方形。这个公式可以说我们可以在第一列中放置 2.33 个正方形。不可能放置 0.33 个正方形，我们只能放置 2 个正方形。真正的公式是`m = floor(height/sidelength)`。

一种不是很快（但比尝试每种组合要快很多）的算法是先尝试在第一行/列上放置 1 个正方形，然后看看我们是否可以在矩形中放置足够多的正方形。如果它不起作用，我们会在第一行/列上尝试 2 个方块，等等，直到我们可以满足您想要的瓷砖数量。

如果允许您在 O(1) 中进行算术运算，我认为存在 O(1) 算法，但到目前为止我还没有弄清楚。

这是该算法的 Ruby 版本。如果矩形不是很薄，这个算法是 O(sqrt(# of tiles))。

```
def squareside(height, width, tiles)
  n = 0
  while true
    n += 1
    # case 1: the squares fill the height of the rectangle perfectly with n squares
    side = height/n
    m = (width/side).floor # the number of squares that fill the width
    # we're done if we can place enough squares this way
    return side if n*m >= tiles
    # case 2: the squares fill the width of the rectangle perfectly with n squares
    side = width/n
    m = (height/side).floor
    return side if n*m >= tiles
  end
end 
```

您也可以对这个算法使用二分搜索。在这种情况下，它是 O(log(# of tiles))。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-05-15T21:57:45.323

```
x = max(rectHeight/numberOfSquares, rectangleLength/numberOfSquares)

if x <= retangleHeight && x <= rectangleLength then
  squareSideLength = x
else
  squareSideLength = min(rectangleHeight, rectangleLength) 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-05-15T14:31:23.710

将较长的一侧除以瓷砖的数量。使用较短的一侧作为瓷砖尺寸。快！#瓷砖。

```
Rectagle = 200 x 10
Each tile is 10 x 10 (length of shorter side)
200/10 = 20 (number of tiles needed) 
```*`*********