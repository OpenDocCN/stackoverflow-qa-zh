# StackOverflow 问答 10636000-10636999

# jquery - 服务器端（grails 控制器）上的 json 数据为空

> ID：10636001
> 
> 赞同：0
> 
> 时间：2012-05-17T12:45:57.883
> 
> 标签：jquery, json, grails

我将 JSON 中的数据发送到服务器，如下所示：

```
 var username = $("#usernameField").val();
        var email = $("#emailField").val();
        var password = $("#passwordField").val();
        var parameters = {
            'username':username,
            'email':email,
            'password':password
        };
        $.ajax({  
            type: "POST",  
            dataType:"JSON",
            url: doRegistrationUrl,  
            data: parameters,  
            success: function(answer) {  
                console.log(answer);
            }  
        }); 
```

这是获取数据的函数（grails 控制器）

```
def doRegistration() {
    def userdata = request.JSON;
    printf("DataInController: "+userdata);
    render userdata.username;
} 
```

网址

```
var doRegistrationUrl = '${createLink(action:"doRegistration", controller:"registration")}'; 
```

但是，用户数据始终为空，数据不会到达服务器。我不明白为什么。有人可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:59:35.893

您的数据参数只是通过 POST 发送的普通 HTTP 请求参数。你处理它就像所有其他控制器动作一样。尝试：

```
def doRegistration() {
    def userdata = params
    printf("DataInController: "+userdata);
    render userdata.username;
} 
```

# c++ - 直接写入顶点缓冲区

> ID：10636002
> 
> 赞同：3
> 
> 时间：2012-05-17T12:46:02.213
> 
> 标签：c++, directx, buffer, vertex

我继承的 DirectX 9 应用程序/游戏使用动态顶点缓冲区。每一帧，它：

1.  锁定顶点缓冲区
2.  循环遍历网格并将顶点数据写入临时缓冲区（在程序启动时动态分配），直到它已满
3.  将临时缓冲区的内容复制到顶点缓冲区
4.  重复步骤 2 和 3，直到复制所有数据
5.  解锁顶点缓冲区

我的问题是，需要临时缓冲区的部分吗？我不应该将顶点数据直接写入顶点缓冲区有什么原因吗？
我在官方文档中没有找到任何这种做法的证据，我对之前的程序员也不够信任。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:05:20.387

免责声明：我不知道 DirectX 顶点缓冲区是如何工作的，我可能在这里错了。

它可能会更慢：分配一个顶点缓冲区以优化*来自 GPU 的访问*，即最好在 GPU 自己的内存中的某个地方。这意味着直接从 CPU 访问它比访问普通 RAM 慢得多。另一方面，复制整个数组可以相对较快地完成，因此最好在主内存中准备这样的数组并一次性将其复制到顶点缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T20:50:30.370

临时缓冲区不是必需的，但需要注意的是。

DirectX 动态顶点缓冲区针对GPU的*读取访问和 CPU 的**写入*访问进行了优化。写访问优化称为**写组合**，它涉及与普通内存缓存不同的机制。假设您以 4/8/16 字节块并按顺序写入内存，CPU 将一起批量写入。

请注意，由驱动程序决定从动态缓冲区上的锁定中返回的内存类型，它可能不是写组合的，但这样处理是最好的选择。

写入组合内存*没有*缓存，因此从它读取是性能灾难。

它可以解释为什么您继承的游戏在读取和写入临时缓冲区时使用临时缓冲区，或者不努力按顺序写入组件 - 例如，首先是位置，然后是纹理坐标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T21:17:59.743

不需要临时缓冲区。`Lock`从本质上讲，您返回的指针实际上已经是一个临时缓冲区。解锁缓冲区后，驱动程序才能真正开始对其进行任何有意义的操作。

如果您使用`D3DLOCK_DISCARD`，则驱动程序没有义务使用任何敏感数据来尊重读取。所以执行完全可以返回`malloc(size)`。

如果您*不*使用`D3DLOCK_DISCARD`，那么，这确实是一个单独的问题。

# java - 为什么必须不断清洁/刷新 Eclipse？

> ID：10636004
> 
> 赞同：2
> 
> 时间：2012-05-17T12:46:14.093
> 
> 标签：java, eclipse

我正在使用带有 MercurialEclipse 插件 (1.9.1.v201111302231) 的 Eclipse Indigo。工作区包含约 25 个 java 项目。

问题是每次我进行新的更改时，我都必须：

1.  取消选中“项目|自动构建”
2.  从“项目|清洁...”中清除所有内容
3.  从项目资源管理器中刷新所有项目。
4.  回来查看“项目|自动构建”

有时在调试项目时会弹出奇怪的错误，然后我必须重复相同的步骤。整体体验很糟糕。我的问题 - 这是 Eclipse 应该如何工作的？会不会是 MercurialEclipse 插件导致了这一切？我该如何解决？

我意识到我的问题可能缺少一些信息，请告诉我缺少什么，我会添加它。

谢谢。

**编辑**

1.  该项目有时会出现错误，但这仅仅是因为 Eclipse 没有自动刷新/构建依赖项目。当我手动刷新依赖项时 - 错误消失了。
2.  第 1 步和第 4 步是出于绝望而完成的，因为有时仅第 2 步和第 3 步是不够的。
3.  所有项目都是普通的Java项目。

除了附上他们的 .classpath 和 .project 文件外，我不确定要提供有关项目的哪些信息。例如，这里它们仅来自一个项目：

.类路径：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" path="src"/>
    <classpathentry kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
    <classpathentry combineaccessrules="false" kind="src" path="/Common"/>
    <classpathentry kind="lib" path="../3rdParty/log4j/1.2.16/log4j-1.2.16.jar"/>
    <classpathentry combineaccessrules="false" kind="src" path="/WebApi"/>
    <classpathentry combineaccessrules="false" kind="src" path="/Core"/>
    <classpathentry kind="lib" path="../3rdParty/restlet-jse/2.0.10/lib/org.restlet.jar" sourcepath="C:/Program Files (x86)/Restlet Framework/Edition Java SE/2.0.10/src"/>
    <classpathentry kind="lib" path="../3rdParty/guice/3.0/aopalliance.jar"/>
    <classpathentry kind="lib" path="../3rdParty/guice/3.0/guice-3.0.jar"/>
    <classpathentry kind="lib" path="../3rdParty/restlet-jse/2.0.10/lib/javax.ws.rs_1.0/javax.ws.rs.jar"/>
    <classpathentry combineaccessrules="false" kind="src" path="/DTOs"/>
    <classpathentry combineaccessrules="false" kind="src" path="/NetworkEditor"/>
    <classpathentry kind="lib" path="../3rdParty/guice/3.0/guice-multibindings-3.0.jar"/>
    <classpathentry combineaccessrules="false" kind="src" path="/Bootstrapper"/>
    <classpathentry kind="lib" path="../3rdParty/guice/3.0/javax.inject.jar"/>
    <classpathentry combineaccessrules="false" kind="src" path="/ShunraLicense"/>
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

。项目：

```
<?xml version="1.0" encoding="UTF-8"?>
<projectDescription>
    <name>VCat</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
        <buildCommand>
            <name>org.eclipse.jdt.core.javabuilder</name>
            <arguments>
            </arguments>
        </buildCommand>
    </buildSpec>
    <natures>
        <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
</projectDescription> 
```

我很乐意提供更多信息 - 只是说什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:52:13.290

可能您需要手动清理和构建，因为您的项目没有自动构建，因为您的项目可能存在错误，导致无法编译。

检查问题选项卡。

# javascript - 在 Javascript 中更改 document.getElementById

> ID：10636008
> 
> 赞同：-2
> 
> 时间：2012-05-17T12:46:47.680
> 
> 标签：javascript

有谁知道如何将 document.getElementById 更改为其他内容，例如 $？

它会像这样工作：

```
$("theid") 
```

而不是这个：

```
document.getElementById("theid") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:48:48.997

```
var $ = function(id){ 
     return document.getElementById(id);
} 
```

虽然我不会建议它，但它`document.querySelector(All)`更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T12:47:56.057

```
function $(id){
  return document.getElementById(id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T12:48:59.200

```
function $(id) {
   return document.getElementById(id);
} 
```

美元符号是用作标识符的有效字符，因此只需声明一个以它为名称的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T12:51:12.153

```
<html>
    <head>
        <script type="text/javascript">
            function $(_i) {
                return document.getElementById(_i);
            }
        </script>
    </head>
    <body>
        <div id="myDiv">Hello</div>
        <a href="javascript: alert($('myDiv').innerHTML)">Get InnerHTML</a>
    </body>
</html> 
```

# asp.net - 子字符串的多个长度？

> ID：10636016
> 
> 赞同：2
> 
> 时间：2012-05-17T12:47:41.910
> 
> 标签：asp.net, vb.net, substring

子字符串可以有多个参数吗？我正在从下拉列表中将一个子字符串拉到我的数据库中以供记录，该字符串介于 6 到 8 个数字之间，是否可以传递多个参数来完成这项工作？

样本数据：

下拉列表

```
123456 | Name 
1234567 | Name 
12345678 | Name 

dt = ExecuteStoredProcedure(SqlConnection, "InsertData", "@name", ddlE_VN.SelectedValue.Substring(0, 6)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:59:25.807

根据您显示的数据，这应该有效：

```
ddlE_VN.SelectedValue.Substring(0, ddlE_VN.SelectedValue.IndexOf(' ')) 
```

我们从索引 0 开始我们的子字符串，这是第一个字符。如果空格是第六个字符，它的索引为 5，所以我们将返回前 5 个字符。如果空格是第 8 个字符，则索引为 7，因此我们将返回前 7 个字符，以此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:52:23.750

子字符串只能带一个开始参数并返回子字符串直到字符串的结尾。

如果您的子字符串用空格或其他字符分隔，您可以计算分隔符的索引并在子字符串中使用它。

像这样的东西：

```
string myString = "part1 part2 part3";

int firstSpace = myString.IndexOf(' ');
int secondSpace = myString.LastIndexOf(' ');

string part1 = myString.Substring(0, firstSpace).Trim();
string part2 = myString.Substring(firstSpace, secondSpace - firstSpace).Trim();
string part3 = myString.Substring(secondSpace).Trim(); 
```

当然，您也可以为此使用正则表达式，但由于您的示例数据并不复杂，我个人更喜欢这段代码。

# git - 使用 Git 进行协作

> ID：10636017
> 
> 赞同：1
> 
> 时间：2012-05-17T12:47:46.837
> 
> 标签：git, github

这是我第一次尝试使用 Github`shared collaboration model`和朋友一起做一个项目。我已经开始了一个项目并将他添加为合作者。提交更改后，他如何更新计算机上的存储库，同样，我如何保持存储库更新？如果发生冲突怎么办？如何解决。如果有人能突出一些最佳实践或指出一些资源，我将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:55:37.210

您可能想阅读[http://help.github.com/remotes/](http://help.github.com/remotes/)

回答您的一些问题：要更新他的 repo，您​​的朋友将运行 git fetch，然后运行 ​​git merge。然后，如果没有冲突，git 将直接合并文件，或者如果无法解决冲突，请他手动解决冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:51:20.403

git知识的最佳来源是[http://git-scm.com/book](http://git-scm.com/book)

**编辑：**
对您来说最重要的部分：

*   2.1 获取 Git 仓库
*   2.2 记录对存储库的更改
*   2.5 使用遥控器
*   3.1 什么是分支
*   3.2 基本的分支和合并
*   3.5 远程分支

# android - 为 Android C2DM 自动注册多个“发件人”帐户？

> ID：10636018
> 
> 赞同：0
> 
> 时间：2012-05-17T12:47:49.220
> 
> 标签：android, push-notification, android-c2dm

我想知道是否可以开发一个脚本来提交多个应用程序 - 一次全部或一个 BYE 一个 - 到 Android Cloud 到设备消息传递 ( [https://developers.google.com/android/c2dm/signup](https://developers.google.com/android/c2dm/signup) )。

我们有多个应用程序要定期注册，每次都手动注册太费时间。

我们*知道*这在技术上是可行的，但 Google 政策是否允许这样做？

**注意：**
我知道没有 API。
我已经使用脚本进行了测试以发布到该表单并且它有效。
我不介意评论的到来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:01:09.537

我们必须使用 GSM，现在无法通过脚本进行操作！

我们必须手动注册！

# iphone - ios中的物理内存管理

> ID：10636020
> 
> 赞同：0
> 
> 时间：2012-05-17T12:47:54.497
> 
> 标签：iphone, objective-c, ios

我在研究应用程序中工作，我从 webservice 获取所有问题，解析后我正在创建 MyQuestion 的对象，它的超类是 NSObject 并将所有问题对象存储在 NSMutableArray 中也释放每个问题 obj。，但数组内容有时超过 10,000 。

1.  我的疑问是，当数组接触巨大的物体时，它是否会产生内存问题。
2.  有没有更好的方法来实现相同的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:52:20.670

不，它不会。仅当您拥有一个对象而不释放它时，您的内存泄漏才会发生。n另一件事是某个时间问题是1000，将它们存储到数据库中，然后获取所需的jst

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:14:25.847

1.  这可能只是因为您的应用程序可能会耗尽内存而成为问题。但是正如**CodaFi 所**提到的，您应该使用 Instruments 来检查是否确实如此。

2.  您可以将数据直接存储在数据库中，例如*Core Data*，这样您就可以随时将数据的子集保存在内存中。使用*Core Data*时，您可以使用 an`NSFetchedResultsController`或 an `NSFetchRequest`with a`fetchLimit`仅将数据子集或不是“问题”的所有属性提取到内存中。

# iphone - 单击作为子视图添加到 UILabel 的 UIButton 会打开远离按钮的弹出窗口。？

> ID：10636023
> 
> 赞同：0
> 
> 时间：2012-05-17T12:47:57.607
> 
> 标签：iphone, objective-c, ios, popup

**你好，伙计们，我已经使用 UIButton 作为 UILabel 的子视图，我在单击该按钮时打开了一些弹出窗口，我发现弹出窗口正在远离该按钮打开它背后的原因是什么，请帮助.. 谢谢！我的代码如下：**

```
 sortBtn = [UIButton buttonWithType:UIButtonTypeCustom];
 [sortBtn setTitle:@"Sort" forState:UIControlStateNormal];
 [sortBtn setBackgroundColor:[UIColor colorWithRed:0.137 green:0.384 blue:0.871 alpha:1.0]];
 [sortBtn.titleLabel setFont:[UIFont boldSystemFontOfSize:16.0f]];
 [sortBtn addTarget:self action:@selector(sortTheData:) forControlEvents:UIControlEventTouchUpInside];

  sortBtn.frame=CGRectMake(195,5, 53, 28);

 [categoryLabel setUserInteractionEnabled:YES];
 [categoryLabel addSubview:sortBtn]; 
```

**排序数据方法如下：**

```
SortByController *sortController = [[SortByController alloc] initWithNibName:@"SortByController" bundle:nil];
sortController.dataArray = self.dataAllPerformances;
sortController.sortString =self.sortString;
sortController.genreId = [NSString stringWithFormat:@"%d",self.genreId];
sortController._delegate = self;
self.popController = [[UIPopoverController alloc] initWithContentViewController:sortController];
//popController.delegate = self;
popController.popoverContentSize = CGSizeMake(230, 260);
[popController presentPopoverFromRect:sender.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
[sortController release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:56:31.600

The reason for this is you are adding your button in categoryLabel not in view while presenting the popover in self.view.

try following:

```
CGRect rect = [self.view convertRect:[sortBtn frame] fromView:self.view];
[popController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

this will get your button's frame in respect to self.view storing in rect type of CGRect (frame is also type of CGRect). Than while presenting popover pass this new rect in place of sender.frame as sender.frame has its x,y according to the categoryLabel.

hope this helps :)

# python - Python / Pandas - 用于查看 DataFrame 或 Matrix 的 GUI

> ID：10636024
> 
> 赞同：68
> 
> 时间：2012-05-17T12:48:00.407
> 
> 标签：python, user-interface, pandas, dataframe

我正在使用 Pandas 包，它创建了一个 DataFrame 对象，它基本上是一个带标签的矩阵。通常我的列有很长的字符串字段，或者有很多列的数据框，所以简单的打印命令不能很好地工作。我写了一些文本输出函数，但它们不是很好。

我真正喜欢的是一个简单的 GUI，它可以让我与数据框/矩阵/表格进行交互。就像您在 SQL 工具中找到的一样。基本上是一个具有只读电子表格的窗口，例如查看数据。我可以通过长表扩展列、上下翻页等。

我怀疑存在这样的事情，但我必须用错误的术语进行谷歌搜索。如果它是熊猫专用的，那就太好了，但我想我可以使用任何矩阵接受工具。（顺便说一句 - 我在 Windows 上。）

任何指针？

或者，相反，如果有人很了解这个空间并且知道这可能不存在，关于是否有一个简单的 GUI 框架/小部件我可以用来推出我自己的任何建议？（但由于我的需求有限，我不愿意学习一个大的 GUI 框架并为此做一堆编码。）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2016-05-25T21:01:08.440

**2019 年更新：**我目前正在开发一个继任者[tabloo](https://github.com/bluenote10/tabloo)。

* * *

我对其他一些 GUI 并不完全满意，所以我创建了自己的 GUI，现在我[在 Github 上进行](https://github.com/bluenote10/PandasDataFrameGUI)维护。例子：

[![在此处输入图像描述](../Images/20b9d4c0c4b647913931364c8f7efd6c.png)](https://i.stack.imgur.com/rtB25.png)

除了基本的表格+绘图功能外，我还想有一种特定的方式来过滤数据：

*   从组合框中选择要过滤的列
*   使用任意 Python 代码编写一个“下划线表达式”来过滤该列。例如：`_ > 0`仅过滤正值，或更复杂的表达式，`(_ >= date(2016, 1, 1)) & (_ <= date(2016, 1, 31))`例如日期时间列。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-20T11:30:18.340

我使用`QTableWidget`from PyQt 来显示一个`DataFrame`. 我创建一个`QTableWidgetObject`，然后用`QTableWidgetItems`创建的`DataFrame`值填充。以下是读取 CSV 文件、创建 CSV 文件`DataFrame`，然后在 GUI 中显示的代码片段：

```
df  = read_csv(filename, index_col = 0,header = 0)
self.datatable = QtGui.QTableWidget(parent=self)
self.datatable.setColumnCount(len(df.columns))
self.datatable.setRowCount(len(df.index))
for i in range(len(df.index)):
    for j in range(len(df.columns)):
        self.datatable.setItem(i,j,QtGui.QTableWidgetItem(str(df.iget_value(i, j)))) 
```

**更新：**

由于这个答案很旧，因此值得更新。现在有许多选项可用于在 GUI 中查看数据框。

1.  正如其他人指出的那样，Spyder 等 Python IDE 带有数据框查看器。
2.  [qgrid](https://github.com/quantopian/qgrid)是 jupyter notebook 小部件的另一个选项，它在 notebook 中呈现数据框。

如果有人仍然想编写一个简单的 GUI 来查看 Jupyter 中的数据帧，以下是使用 Pyqt5 的完整的最小示例。

```
%gui qt5 
from PyQt5.QtWidgets import QWidget,QScrollArea, QTableWidget, QVBoxLayout,QTableWidgetItem
import pandas as pd

win = QWidget()
scroll = QScrollArea()
layout = QVBoxLayout()
table = QTableWidget()
scroll.setWidget(table)
layout.addWidget(table)
win.setLayout(layout)    

df = pd.DataFrame({"a" : [4 ,5, 6],"b" : [7, 8, 9],"c" : [10, 11, 12]},index = [1, 2, 3])
table.setColumnCount(len(df.columns))
table.setRowCount(len(df.index))
for i in range(len(df.index)):
    for j in range(len(df.columns)):
        table.setItem(i,j,QTableWidgetItem(str(df.iloc[i, j])))

win.show() 
```

[![在此处输入图像描述](../Images/13cb54035a9b96890d048db827405da7.png)](https://i.stack.imgur.com/edZpV.png)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-11-04T02:10:50.380

该问题于 2012 年发布，其他答案可能太旧而无法应用。

2016 年的答案是，我们应该使用 Pycharm，它是随`DataFrame`查看器一起提供的。

![在此处输入图像描述](../Images/f3209e913d20ce6933a5f5a4623de40b.png)

[![在此处输入图像描述](../Images/8f189e0f288445bca5b369225947fe24.png)](https://i.stack.imgur.com/OvYIm.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-04T08:07:48.387

Pandas 0.13 提供了一个实验性功能：

PySide 支持 qtpandas`DataFrameModel`和`DataFrameWidget`

见[https://github.com/pydata/pandas/blob/master/doc/source/faq.rst](https://github.com/pydata/pandas/blob/master/doc/source/faq.rst)

您可以使用添加此功能

```
from pandas.sandbox.qtpandas import DataFrameModel, DataFrameWidget 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-06-02T16:27:16.000

您可以使用 to_html() 数据框方法将数据框转换为 html 并在浏览器中显示。这是一个假设您有一个名为 df 的数据框的示例。您应该查看文档以查看 to_html() 方法中还有哪些其他可用选项。

```
# Format floating point numbers with 2 decimal places.
data_table = df.to_html(float_format=lambda x: '%6.2f' % x,
    classes="table display")
# The to_html() method forces a html table border of 1 pixel.
# I use 0  in my table so I  change the html, since there is no 
# border argument in the to_html() method.
data_table = data_table.replace('border="1"','border="0"')
# I alson like to display blanks instead on nan.
data_table = data_table.replace('nan', '') 
```

如果你想让表格的格式很好并且可以滚动，那么你可以使用 jQuery [www.datatables.net](http://www.datatables.net/)的 datatables 插件。这是我用来显示在 x 和 y 方向上滚动的表格的 javascript。

```
$('.table').dataTable({
    "bPaginate": true,
    "bLengthChange": true,
    "bSort": false,
    "bStateSave": true,
    "sScrollY": 900,
    "sScrollX": 1000,
    "aLengthMenu": [[50, 100, 250, 500, 1000, -1], [50, 100, 250, 500, 1000, "All"]],
    "iDisplayLength": 100,
}); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2018-04-04T19:11:11.880

数据框的 to_clipboard() 方法可用于快速复制，然后将数据框粘贴到电子表格中：

```
df.to_clipboard() 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-08-14T02:02:14.650

除了所有有价值的答案之外，我想提一下 Spyder IDE ( [https://github.com/spyder-ide](https://github.com/spyder-ide) ) 具有此功能，您可以在下面的打印屏幕中看到：

[![在此处输入图像描述](../Images/bb9de487997793b585813fd0863e69fe.png)](https://i.stack.imgur.com/J4WP7.png)

这只是一个客观事实，并不是任何 IDE 的广告 :) 我不想引发关于这个问题的任何辩论。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-11-06T21:49:29.473

python2.7有[tkintertable](https://code.google.com/p/tkintertable/)，python3有[pandastable 。](https://code.google.com/p/pandastable/wiki/Usage)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-07-06T01:16:37.087

我发现的最好的解决方案是使用`qgrid`（请参阅[此处，并且在](https://github.com/quantopian/qgrid)[pandas 文档](http://pandas-docs.github.io/pandas-docs-travis/ecosystem.html)中也提到过）。您可以通过安装

```
pip install qgrid 
```

然后您需要在`IPython`笔记本中进行进一步安装（只需一次）

```
qgrid.nbinstall() 
```

之后，就像带着你`pandas` `df`跑步一样简单

```
qgrid.show_grid(df) 
```

另一个好处是它也可以渲染`nbviewer`。[在此处](http://nbviewer.ipython.org/github/quantopian/qgrid/blob/master/qgrid_demo.ipynb)查看实际操作

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-05-24T22:29:32.383

似乎没有简单的解决方案。因此，下面是一个在 Excel 中打开数据框的小功能。它可能不是生产质量代码，但它对我有用！

```
def open_in_excel(df, index=True, excel_path="excel.exe", tmp_path='.'):
    """Open dataframe df in excel.

    excel_path - path to your copy of excel
    index=True - export the index of the dataframe as the first columns
    tmp_path    - directory to save the file in

    This creates a temporary file name, exports the dataframe to a csv of that file name,
    and then tells excel to open the file (in read only mode). (It uses df.to_csv instead
    of to_excel because if you don't have excel, you still get the csv.)

    Note - this does NOT delete the file when you exit. 
    """

    f=tempfile.NamedTemporaryFile(delete=False, dir=tmp_path, suffix='.csv', prefix='tmp_')
    tmp_name=f.name
    f.close()

    df.to_csv(tmp_name, index=index)
    cmd=[excel_path, '/r', '/e', tmp_name]
    try:
        ret_val=subprocess.Popen(cmd).pid
    except:
        print "open_in_excel(): failed to open excel"
        print "filename = ", tmp_name
        print "command line = ", cmd
        print "Unexpected error:", sys.exc_info()[0]

    return 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-10-14T17:12:24.840

我在这里测试了许多建议，但它们似乎都不能轻松运行或安装，尤其是对于 Python 3，但现在我编写了一个基本上可以完成我想要的功能的函数。需要让这些数据帧全屏显示，并且有时可以滚动。

因此，在使用 Libreoffice Calc 的 Linux 环境中，受 Unix 和 Linux StackExchange 的[这个答案](https://unix.stackexchange.com/a/220829/188451)的启发，您可以在 Python 3 中执行以下操作：

```
import pandas as pd
import os

def viewDF(*dfs):
    filelist = ""
    for c, df in enumerate(dfs):    
        filename = 'tmp_df' + str(c) + '.csv'
        odsfile = 'tmp_df' + str(c) + '.ods'
        df.to_csv(filename)
        os.system("soffice --headless --convert-to ods  {}".format(filename))     
        filelist += odsfile + " "
    os.system("soffice --view {}".format(filelist)) 
    os.system("rm {}".format('tmp_df*')) 
```

像这样使用它：

```
viewDF(df1, df2, df3) 
```

我在那里学到了一些东西，即 Python 3 替换语法`{}".format`打开的文件是只读的，无论如何它们都是后来被删除的文件，因此它实际上是数据帧的 GUI。它会为您提供的每个数据框生成多个 Libreoffice Calc 实例，您可以在单独的屏幕上全屏查看，然后关闭 Calc 后，它会自行清理。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-06-01T17:18:04.183

我使用 ipython notebooks 来驱动 pandas——notebooks 提供了一种很好的方式来增量构建和与 pandas 数据结构交互，包括数据帧的 HTML 化显示：http: [//ipython.org/notebook.html](http://ipython.org/notebook.html)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-01-11T14:41:28.637

我一直在为 pandas DataFrame 开发一个 PyQt GUI，您可能会发现它很有用。它包括复制、过滤和排序。

[https://gist.github.com/jsexauer/f2bb0cc876828b54f2ed](https://gist.github.com/jsexauer/f2bb0cc876828b54f2ed)

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-07-23T07:49:49.370

我强烈建议您使用**QTableView**而不是**QTableWidget**。**QTableView**基于模型视图编程。

> 这些小部件可以通过两种不同的方式访问其数据。传统方式涉及包含用于存储数据的内部容器的小部件。这种方法非常直观，但是，在许多重要的应用程序中，它会导致数据同步问题。第二种方法是模型/视图编程，其中小部件不维护内部数据容器

**我为pandas dataframe**编写了一个模型。

```
# -*- coding: utf-8 -*-
from PyQt5 import QtCore
from PyQt5 import QtWidgets
from PyQt5 import QtGui
import matplotlib.pyplot as plt

class PandasModel(QtCore.QAbstractTableModel):
    """
    Class to populate a table view with a pandas dataframe
    """

    def __init__(self, data, parent=None):
        QtCore.QAbstractTableModel.__init__(self, parent)
        self._data = data

    def rowCount(self, parent=None):
        return len(self._data.values)

    def columnCount(self, parent=None):
        return self._data.columns.size

    def data(self, index, role=QtCore.Qt.DisplayRole):
        if index.isValid():
            if role == QtCore.Qt.DisplayRole:
                if(index.column() != 0):
                    return str('%.2f'%self._data.values[index.row()][index.column()])
                else:
                    return str(self._data.values[index.row()][index.column()])
        return None

    def headerData(self, section, orientation, role):
        if orientation == QtCore.Qt.Horizontal and role == QtCore.Qt.DisplayRole:
            return self._data.columns[section]
        elif orientation == QtCore.Qt.Vertical and role == QtCore.Qt.DisplayRole:
            return str(self._data.index[section])
        return None

    def flags(self, index):
        flags = super(self.__class__,self).flags(index)
        flags |= QtCore.Qt.ItemIsSelectable
        flags |= QtCore.Qt.ItemIsEnabled
        return flags

if __name__=='__main__':
    import pandas as pd
    import numpy as np
    df = pd.DataFrame()
    df['Field1']=np.arange(0,10,.5)
    df['Field2']=np.arange(0,10,.5)
    app = QtWidgets.QApplication([])
    table = QtWidgets.QTableView()
    mymodel = PandasModel(df)
    table.setModel(mymodel)
    table.show()
    app.exec_() 
```

您可以轻松更改模型以根据需要很好地编辑或显示元素。有关更多信息，请参阅 [模型视图](http://doc.qt.io/qt-5/modelview.html)

[![在此处输入图像描述](../Images/3b9f5228fc6a1ac007fccd03d499d570.png)](https://i.stack.imgur.com/TqQkT.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-02-13T00:57:35.607

我也一直在寻找非常简单的gui。我很惊讶没有人提到`gtabview`。

它易于安装（只需`pip3 install gtabview`），而且加载数据的速度非常快。如果您不使用 spyder 或 Pycharm，我建议使用 gtabview。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-11-29T16:16:20.547

一种非常简单的方法是使用[xlwings](https://www.xlwings.org/)在 Excel 中查看数据框。它对 Pandas 数据帧有很好的处理。像往常一样使用

```
pip install xlwings 
```

然后在您工作时打开 Excel，然后

```
import xlwings as xw
xw.sheets.active.range("A1").value = df         # put df in currently active sheet 
```

您可以使用更复杂`app = xw.App()`的方法打开 Excel 和/或`xw.Book()`从 Excel 创建新工作簿。要在工作表之间创建/切换，我通常使用一个小的自定义函数

```
def addActivate(wb, sheet, after=None, before=None):
    try:
        wb.sheets.add(sheet, after=after, before=before)
    except ValueError:
        wb.sheets(sheet).activate()

addActivate(xw.books.active, "newSheet")
xw.sheets.active.range("A1").value = df 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2012-05-17T12:55:30.223

I'm not a Pandas user myself, but a quick search for "pandas gui" turns up the Pandas project's [GSOC 2012 proposal](http://pandas.pydata.org/summerofcode2012.html):

> Currently the only way to interact with these objects is through the API. This project proposes to add a simple Qt or Tk GUI with which to view and manipulate these objects.

So, there's no GUI, but if you'd write one using Qt or Tk, the project might be interested in your code.

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-02-23T10:14:42.783

您可以将 GitHub Atom 与 Hydrogen 插件一起使用。在 Mac 中，您可以使用 Cmd+Shift 键逐行执行。即使您只能选择变量并查看内部。数据帧很好地显示，你甚至可以复制。我写了一篇博客来展示配置这些的方法。 [http://ojitha.blogspot.com.au/2016/08/atom-as-spark-editor.html](http://ojitha.blogspot.com.au/2016/08/atom-as-spark-editor.html)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-01T19:00:19.197

你也可以使用 pandastable 库

[https://github.com/dmnfarrell/pandastable](https://github.com/dmnfarrell/pandastable)

我发现它对我的应用程序非常有用

你可以简单地使用“pip install pandastable”安装pandastable

我的应用程序适用于 pandas==0.23.4 并且此版本的熊猫适用于 pandastable

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-11-26T09:03:12.433

我可以提议`pivotablejs`吗？

它在 Jupyter 笔记本中仅几行就提供了水平和垂直旋转、过滤、绘图、排序和许多不同的聚合（提示：右键单击 [弹出] 链接并在新选项卡中打开以提高灵活性）

```
!pip install pivottablejs
from pivottablejs import pivot_ui

pivot_ui(df, outfile_path='pivottablejs.html') 
```

[![图形旋转示例](../Images/ae0bbb033aa5a2d87660400a598eacdb.png)](https://i.stack.imgur.com/sxyJU.png)

[https://towardsdatascience.com/two-essential-pandas-add-ons-499c1c9b65de](https://towardsdatascience.com/two-essential-pandas-add-ons-499c1c9b65de)

# asp.net - 模板内 UpdatePanel 内的控件

> ID：10636025
> 
> 赞同：1
> 
> 时间：2012-05-17T12:48:01.867
> 
> 标签：asp.net, templates, updatepanel, formview

我有一个带有 InsertItemTemplate 和 EditItemTemplate 的 asp:FormView。除了代码隐藏函数行为之外，两者几乎相同。相同是指两个模板都有具有相同 ID 的控件。一切似乎都很好，直到我在这些模板中添加了 UpdatePanels。现在它说：“类型'ASP.quotation_quote_aspx'已经包含'MeasurmentUnits'的定义”。

这是一个示例：

```
<asp:FormView ID="QuoteMaterialForm" runat="server" DataSourceID="QuoteMaterialDS" DataKeyNames="ID" DefaultMode="Edit" OnLoad="QuoteMaterialForm_Load" >
                            <InsertItemTemplate>
                                <asp:UpdatePanel ID="MaterialUpdatePanel1" runat="server">
                                    <ContentTemplate>
                                    <table class="form">
                                        <tr>
                                            <td>
                                                Measurment units
                                                </td>
                                            <td>
                                                <asp:RadioButtonList ID="MeasurmentUnits" runat="server" AutoPostBack="true" 
                                                    onclick="needToConfirm = true;" RepeatDirection="Horizontal" 
                                                    RepeatLayout="Flow" SelectedValue='<%# Bind("MeasurementUnits") %>'>
                                                    <asp:ListItem Selected="True" Value="0">Imperial</asp:ListItem>
                                                    <asp:ListItem Value="1">Metric</asp:ListItem>
                                                </asp:RadioButtonList>
                                            </td>
                                        </tr>
                                     </ContentTemplate>
                                </asp:UpdatePanel>
                            </InsertItemTemplate>
                            <EditItemTemplate>
                                <asp:UpdatePanel ID="MaterialUpdatePanel1" runat="server">
                                    <ContentTemplate>
                                    <table class="form">
                                        <tr>
                                            <td>
                                                Measurment units
                                                </td>
                                            <td>
                                                <asp:RadioButtonList ID="MeasurmentUnits" runat="server" AutoPostBack="true" 
                                                    onclick="needToConfirm = true;" RepeatDirection="Horizontal" 
                                                    RepeatLayout="Flow" SelectedValue='<%# Bind("MeasurementUnits") %>'>
                                                    <asp:ListItem Selected="True" Value="0">Imperial</asp:ListItem>
                                                    <asp:ListItem Value="1">Metric</asp:ListItem>
                                                </asp:RadioButtonList>
                                            </td>
                                        </tr>
                                     </ContentTemplate>
                                </asp:UpdatePanel>
                            </EditItemTemplate>
                        </asp:FormView> 
```

如果我从模板中删除 UpdatePanels - 不会发生此类错误。

请问有什么可能的建议吗？=(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:53:28.430

这是一个错误[UpdatePanel 打破了 Robert Haken MVP 的命名容器（编译时错误）](http://connect.microsoft.com/VisualStudio/feedback/details/417230/updatepanel-breaks-naming-containers-compile-time-bug)

# java - 简单 XML 框架解析器问题 - Android 中的 XML 解析

> ID：10636027
> 
> 赞同：2
> 
> 时间：2012-05-17T12:48:04.950
> 
> 标签：java, android, xml, simple-framework

我在 Android 应用程序中解析 XML 时遇到问题，[这里](https://stackoverflow.com/a/6171906/1328476)的一个问题暗示建议有 4 种类型的 XML 解析机制：- SAX - DOM - XmlPullParser - 简单 XML 框架

虽然 Simple Framework 很棒，而且我已经在使用它，但当我发现它不能在同一个类中支持 @Text 和 @Element 时，我走到了死胡同，这很糟糕，因为我无法更改我的 XML 方案。

所以想法受到赞赏，任何建议都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T14:52:03.217

[SJXP](http://www.thebuzzmedia.com/software/simple-java-xml-parser-sjxp/)是一个高性能库，在 STAX 拉解析规范之上构建为一个非常薄的层（在 Android 上工作，没有依赖项）。

它不是像 Simple 或 JAXB 那样的 ORM 库，而是专注于 pull 解析规范为我们提供的最大解析性能，但使用 XPath 提供易于定义的解析规则，而不是管理 pull 解析器的陈述自己。

例如，您可以使用规则定位 XML 中的某些元素，如下所示（这是我用它构建的 RSS 解析器示例）：

```
IRule linkRule = new DefaultRule(Type.CHARACTER, "/rss/channel/item/link") {
    @Override
    public void handleParsedCharacters(XMLParser parser, String text, Object userObject) {
        // 'text' is the link; store it, print it, whatever you need...
    }
} 
```

您定义任意数量的规则并将它们提供给 XMLParser 的一个实例（可重用），然后只需将其交给 InputStreams for XML 以根据这些规则为您解析。

在 pull 解析器之上的 SJXP 解析开销接近于零（内存和 CPU 开销）——它实际上相当于 1 次哈希码计算，然后只是整数比较，以查看是否存在与当前位置匹配的规则XML 解析器同时运行内容。

它支持属性和字符数据——这个库甚至有一个很好的优雅的方式来支持命名空间，通过使用 []-notation... 例如：

```
IRule channelSubjectRule = new DefaultRule(Type.CHARACTER, "/rss/channel/[http://purl.org/dc/elements/1.1/]subject") {
    @Override
    public void handleParsedCharacters(XMLParser parser, String text, Object userObject) {
        // Got the Channel's dc:subject value! I win!
    }
} 
```

图书馆并不是要成为另一个对你隐藏一切的神奇抽象；它意味着比这低一点，但仍然高于直接解析 STAX，而不会在嵌入式或高性能系统的解析过程中引入内存或 CPU 膨胀（它是为用于长时间运行的爬虫进程的提要解析器编写的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T07:21:56.340

经过长时间的研究，我发现最适合我需要的 XML 解析器是 JAXB 解析器。

*   支持复杂类型。
*   面向注释。
*   适用于 Android。
*   很容易理解。
*   Java 1.6+ 中已经存在生成 JAXB 注释类的工具

一个例子来展示它是多么容易使用：

```
@XmlRootElement(name = "a")
 public class A {

@XmlElementRefs({
    @XmlElementRef(name = "lang", namespace = "http://www.w3.org/namespace/", type = Lang.class, required = false),
    @XmlElementRef(name = "subst", namespace = "http://www.w3.org/namespace/", type = Subst.class, required = false),
    @XmlElementRef(name = "include", namespace = "http://www.w3.org/namespace/", type = Include.class, required = false),
    @XmlElementRef(name = "br", namespace = "http://www.w3.org/namespace/", type = Br.class, required = false),
    @XmlElementRef(name = "kw", namespace = "http://www.w3.org/namespace/", type = Kw.class, required = false),
    @XmlElementRef(name = "help", namespace = "http://www.w3.org/namespace/", type = Help.class, required = false)
})
@XmlMixed
protected List<Object> content;
@XmlAttribute(name = "cost")
protected String cost;
@XmlAttribute(name = "href", required = true)
protected String href;
@XmlAttribute(name = "key")
protected String key; 
```

所以这是我想出的最好的。

* * *

欢迎任何补充：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T12:51:03.520

[如果您想将您的 xml 映射到/从对象http://code.google.com/p/xstream-for-android/，xstream](http://code.google.com/p/xstream-for-android/)非常容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-12T17:24:54.230

您可以使用[Konsume-XML](https://gitlab.com/mvysny/konsume-xml)：它基于 Stax/pull，但它更高级别且更易于使用。默认情况下，它不会将内容映射到对象，但可以很容易地使用它。请在 Konsume-XML 页面查看更多示例。

# jqgrid - 编辑完成后更改 JqGrid 行的背景颜色

> ID：10636029
> 
> 赞同：0
> 
> 时间：2012-05-17T12:48:25.230
> 
> 标签：jqgrid

```
 I have a problem in defining background color for edited row. 
```

1) 一旦编辑完成，我们需要为 JQgrid 行显示不同的背景颜色。2）编辑的行颜色也应该保留在分页中。

我已经使用了下面的代码，一旦我们点击编辑图标，我就可以更改行的背景颜色，但是颜色正在改变，尽管数据没有被编辑并且颜色没有保留在分页中。

```
var orgEditGridRow = grid.jqGrid.editGridRow; // save original function
$.jgrid.extend ({editGridRow : function(rowid, p){
$.extend(p,
{ // modify some parameters of editGridRow
beforeShowForm:function(rowid,p){
  grid.jqGrid('setRowData',rowid, false, 'state_active');
}});
 orgEditGridRow.call (this,rowid, p);
 }});

please provide some suggestions to solve this issue. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:42:37.600

我看到您使用[reloadAfterSubmit: false](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#properties)。因此将使用默认`false`值，并在将更改提交到服务器后重新加载网格。如果您需要保留`"state_active"`分配给修改行的类，则必须将修改行的 id 保存在一些附加变量（例如数组）中，并在`loadComplete`回调内部或更好的`rowattr`回调内部重置行上的类（参见[答案](https://stackoverflow.com/a/10531680/315935)）。

为确保只有修改后的行将获得交替背景颜色，您可以使用`afterSubmit`（或`afterComplete`在某些情况下）回调而不是`beforeShowForm`.

# .net - 在 Castle ActiveRecord 中直接设置 BelongsTo 关联列

> ID：10636030
> 
> 赞同：0
> 
> 时间：2012-05-17T12:48:26.153
> 
> 标签：.net, castle-activerecord

假设我有以下 AR 对象：

```
namespace Models
{
    [ActiveRecord(Lazy = true, Table = "Answer"), Serializable]
    public class Answer : ActiveRecordLinqBase<Answer>
    {
        public Answer() {}

        [PrimaryKey]
        public virtual int ID { get; set; }

        [BelongsTo("QuestionID")]
        public virtual Question Question { get; set; }
    }
} 
```

我有什么办法可以直接设置 QuestionID 吗？为此，我尝试创建一个名为 QuestionID 的附加 AR [Property]，但遇到了此处描述的 NH 错误：

[http://devlicio.us/blogs/derik_whittaker/archive/2009/03/19/nhibernate-and-invalid-index-n-for-this-sqlparametercollection-with-count-n-error.aspx](http://devlicio.us/blogs/derik_whittaker/archive/2009/03/19/nhibernate-and-invalid-index-n-for-this-sqlparametercollection-with-count-n-error.aspx)

我正在尝试对这个类进行单元测试，我*真的*不想建立一个数据库（在内存中或其他地方）来进行这个单元测试。对于当前正在测试的功能，我只需要设置 QuestionID 即可。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:31:37.277

我发现了一个 hack 可以完成我所需要的，但会对 NH 缓存产生负面影响（我认为）：我只是分配给一个“新”问题，用*现有*问题的 ID 实例化。它看起来很可怕，而且，就像我说的那样，它本质上是用这些（非常）部分填充的问题对象（未验证，但行为似乎表明同样多）加载缓存。

# java - 弹出窗口和 AnimationSet vs AnimationStyle

> ID：10636038
> 
> 赞同：2
> 
> 时间：2012-05-17T12:48:56.433
> 
> 标签：java, android

在通过以编程方式创建 AnimationSet 成功尝试让 Layouts 进行动画处理后，我想尝试使用弹出窗口进行相同的操作。不幸的是，弹出窗口似乎只能通过设置 AnimationStyles 来控制它们的动画（我知道可以在 xml 中定义），但是有没有办法以编程方式为弹出窗口安排动画？是否有某种 AnimationSet 到 AnimationStyle 的转换？

对 AnimationSet 和 AnimationStyle 之间差异的解释将是一个奖励。

# objective-c - 键盘遮挡了输入字段

> ID：10636046
> 
> 赞同：1
> 
> 时间：2012-05-17T12:49:18.377
> 
> 标签：objective-c, ios, three20

当我想将文本放入我的 UITextField 时，键盘会显示在它的顶部，并覆盖该字段。如何防止这种情况？我刚刚读过：[这个解决方案](https://stackoverflow.com/questions/2034367/another-take-on-the-keyboard-obscures-uitextfield-problem)，但我不知道在哪里调整大小？是个好办法吗？

我的代码是：

```
UITextField * passwordTextField = [[[UITextField alloc] init] autorelease];
passwordTextField.keyboardType = UIKeyboardTypeDefault;
passwordTextField.delegate = self;   
passwordTextField.placeholder = NSLocalizedString(@"somestr", @"");   
passwordTextField.secureTextEntry = YES;
[_controls setObject:passwordTextField forKey:keyPassword]; 
```

然后我通过以下方式在 Three20 中展示它：

```
...@"",
 [NSArray arrayWithObjects:
  [TTTableControlItem itemWithCaption:nil control:passwordTextField],          
  nil],... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:03:32.630

您只需要实现 UITextField textFieldDidBeginEditing 和 textFieldDidEndEditing 的委托。当调用 textFieldDidBeginEditing 时，将 parentview 的框架向上移动某个值，并在调用委托方法 textFieldDidEndEditing 时将其恢复为相同的值。

另一种方法是为 UIKeyboardDidShowNotification 添加观察者，并在 UIKeyboardDidHideNotification 触发时向上移动框架并向下移动框架。

样本 ：-

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:)name:UIKeyboardDidShowNotification object:nil];   

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasHidden:) name:UIKeyboardDidHideNotification object:nil]; 
```

并更改选择器中的框架：-

```
- (void)keyboardDidShow:(NSNotification *)aNotification 
{     
if ( keyBDidShow)         
return;    
 NSTimeInterval animationDuration = 0.300000011920929;         
CGRect frame = self.view.frame;         
frame.origin.y -= 60;                
[UIView beginAnimations:@"Rollback" context:nil];         
[UIView setAnimationDuration:animationDuration];         
self.view.frame = frame;         
[UIView commitAnimations];  
viewUp= YES;             
}      
keyBDidShow= YES; 
}  
- (void)keyboardWasHidden:(NSNotification *)aNotification 
{     
if ( viewUp) 
{                  
NSTimeInterval animationDuration = 0.300000011920929;         
CGRect frame = self.view.frame;         
frame.origin.y += 60;                 
[UIView beginAnimations:@"Rollback" context:nil];         
[UIView setAnimationDuration:animationDuration];         
self.view.frame = frame;        
[UIView commitAnimations];          
viewUp = NO;     
}      
keyBDidShow= NO; 
} 
```

文本字段代表也可以这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:14:15.200

调整大小应该应用于根视图：想法是设置视图框架以匹配键盘减少的可见区域，同时第一响应者仍然可见。检查`TTBaseViewController`属性`autoresizesForKeyboard`和对应的方法

```
///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)keyboardWillAppear:(BOOL)animated withBounds:(CGRect)bounds {
  // Empty default implementation.
}

///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)keyboardWillDisappear:(BOOL)animated withBounds:(CGRect)bounds {
  // Empty default implementation.
}

///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)keyboardDidAppear:(BOOL)animated withBounds:(CGRect)bounds {
  // Empty default implementation.
}

///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)keyboardDidDisappear:(BOOL)animated withBounds:(CGRect)bounds {
  // Empty default implementation.
} 
```

对于不需要更改大小的表格视图，请参阅`keyboardDidAppear`实现`TTTableViewController`

```
///////////////////////////////////////////////////////////////////////////////////////////////////
- (void)keyboardDidAppear:(BOOL)animated withBounds:(CGRect)bounds {
  [super keyboardDidAppear:animated withBounds:bounds];
  self.tableView.frame = TTRectContract(self.tableView.frame, 0, bounds.size.height);
  [self.tableView scrollFirstResponderIntoView];
  [self layoutOverlayView];
  [self layoutBannerView];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T13:11:10.667

你应该实现以下方法

```
 - (BOOL) textFieldShouldBeginEditing:(UITextField *)textField{
        [self adjustFramesWhenKeyoradIsShown];
    } 
```

在实现中，您应该重新调整文本字段框架。如果您还希望显示其他视图并且不被键盘隐藏，您也应该移动它们。有两种方法可以为 2 个位置重新调整框架（一种在显示键盘时，另一种在隐藏时，因此一旦文本字段完成编辑，您将在以下文本字段委托方法中调用另一种方法：

```
 - (BOOL)textFieldShouldReturn:(UITextField *)textField {
        [self adjustFramesWhenKeyoradIsHidden];
    } 
```

在这两种帮助方法中，您可以更改框架位置并更改是否隐藏视图，如果您为它们设置动画效果会更好，如下所示：

```
 - (void) adjustFramesWhenKeyoradIsShown{
          [UIView animateWithDuration:0.3
                      delay:0.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                     logoArea.hidden = YES;
                     loginFieldsArea.frame = CGRectMake(0, 0, 320, 250);
                 } 
                 completion:^(BOOL finished){
                 }];
     } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-17T13:18:18.433

我个人强烈推荐使用Michael Tyson 的[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)。

它非常易于使用...（引自自述文件）：

> 要与**UITableViewController**类一起使用，请将 TPKeyboardAvoidingTableView.m 和 TPKeyboardAvoidingTableView.h 放入您的项目中，并使您的 UITableView 在 xib 中成为 TPKeyboardAvoidingTableView。如果您没有在控制器中使用 xib，我知道没有简单的方法使其 UITableView 成为自定义类：阻力最小的路径是为其创建 xib。
> 
> 对于非**UITableViewControllers**，将 TPKeyboardAvoidingScrollView.m 和 TPKeyboardAvoidingScrollView.h 源文件拖放到项目中，将 UIScrollView 弹出到视图控制器的 xib 中，将滚动视图的类设置为 TPKeyboardAvoidingScrollView，然后将所有控件放在该滚动视图中。您也可以通过编程方式创建它，而无需使用 xib - 只需使用 TPKeyboardAvoidingScrollView 作为您的顶级视图。

# css - 输入标签值以在悬停时更改颜色

> ID：10636047
> 
> 赞同：1
> 
> 时间：2012-05-17T12:49:19.143
> 
> 标签：css

我有一个嵌套在列表标签​​内的输入标签。这是代码：

```
<li class="button"><input name="submit_details" type="submit" value="Next" /></li> 
```

现在，当我使用以下样式时：

```
 .button:hover{color:#ffffff}, 
```

当我将鼠标悬停在文本值“Next”上时，它不会改变颜色（变为白色）。

关于如何使其工作的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T12:51:02.113

您需要针对`input`自身而不是`li`：

```
.button input:hover { color:#fff } 
```

或者，如果您希望文本颜色在悬停`input`时变为白色：`li`

```
.button:hover input { color:#fff } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T09:50:21.833

使用以下，在 Firefox 中有效：

```
input[type='text']:hover{color:red} 
```

# c# - 这两个 LINQ 语句有什么区别？

> ID：10636050
> 
> 赞同：2
> 
> 时间：2012-05-17T12:49:34.110
> 
> 标签：c#, .net, linq

首先（有效）：

```
IEnumerable<PacchettoOfferta> PacchettiTemp = from PacchettoOfferta a in SottoPagina.PacchettiOfferte
                                              select a;
Pacchetti = Pacchetti.Union(PacchettiTemp); 
```

第二（不起作用，`Unable to cast object of type`）：

```
Pacchetti = Pacchetti.Union((IEnumerable<PacchettoOfferta>)SottoPagina.PacchettiOfferte); 
```

为什么？我想使用第二个陈述......有什么区别？我需要做什么才能修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T12:52:19.540

如果`SottoPagina.PacchettiOfferte`不是`IEnumerable<PacchettoOfferta>`，则不能将其强制转换为这种类型。

尝试使用[Enumerable.Cast 扩展方法](http://msdn.microsoft.com/en-us/library/bb341406.aspx)：

```
Pacchetti = Pacchetti.Union(SottoPagina.PacchettiOfferte.Cast<PacchettoOfferta>()); 
```

# android - 如何在 Android 中创建一个简单的屏幕保护程序？

> ID：10636051
> 
> 赞同：0
> 
> 时间：2012-05-17T12:49:50.633
> 
> 标签：android, service, screensaver

我想在 android 中创建一个简单的屏幕保护程序：我有一个简单的问题：

如何检测用户最后一次触摸屏幕的时间。为了在用户定义的时间长度后显示屏幕保护程序。请帮助我是新手？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:05:26.377

从这里开始一个计时器： [onUserInteraction](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction%28%29)

# button - 用于将值保存到变量的 Coldfusion 按钮

> ID：10636054
> 
> 赞同：1
> 
> 时间：2012-05-17T12:49:56.780
> 
> 标签：button, coldfusion

我在 Coldfusion 中有一个按钮：

```
<cfinput name="Accept" type="button" value="Acknowledge"
    onclick="ColdFusion.Window.hide('my_alert')"> 
```

目前，该按钮在单击时会隐藏警报窗口。我还想要将变量 var1 设置为 YES 的按钮。无论如何我可以将它添加到onclick吗？我该怎么做呢？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:40:40.023

我假设你想设置一个 javascript 变量？如果是这样，请使用 ColdFusion.Window.onHide() 函数，如下所示：

```
<script>
function onHideWindow(name) {
   var1 = "yes";
}

function hideWindow() {
   ColdFusion.Window.onHide('my_alert', onHideWindow);
   ColdFusion.Window.hide('my_alert');
}
</script>
...
<cfinput name="Accept" type="button" value="Acknowledge" onclick="hideWindow()"> 
```

# windows-phone-7 - 在 WP7 中构建长寿命后台代理（超过 2 周）

> ID：10636056
> 
> 赞同：0
> 
> 时间：2012-05-17T12:49:57.853
> 
> 标签：windows-phone-7, push-notification, mpns, background-agents

我需要在 wp7 中长期工作的后台代理。我知道此类代理的默认和最长生命周期为 2 周。我也遇到了情况，当电池电量严重不足时，所有后台代理都将关闭。

所以现在我看到这种情况只有两种解决方法：

*   每次启动我的应用程序时，我都可以重新启动后台代理（但我没有保证，该用户将至少每两周启动一次此应用程序）
*   或者我可以使用推送通知来打开后台代理。

我对吗？还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:56:10.497

您将无法使用推送通知来打开后台代理。如果您的应用在收到通知时没有运行，您唯一的选择是显示 Toast 或更改“开始”菜单磁贴。

重新启动后台代理的第一个想法是您需要执行哪些操作来刷新。您可能要考虑的一件事是，在您的后台代理中，跟踪上次打开应用程序的人刷新它的时间。然后，如果您即将结束该生命周期，您可以更改平铺图像或文本以反映用户需要刷新。我见过几个应用程序可以做到这一点。

您必须记住，您的后台代理不能保证处于活动状态。它可以因电池电量不足或用户请求而关闭，而无需告诉您或您的应用程序。

# wpf - 数据触发器使用

> ID：10636061
> 
> 赞同：1
> 
> 时间：2012-05-17T12:50:10.163
> 
> 标签：wpf, xaml, data-binding, datatrigger

这是我想在 xaml 中实现的伪代码

```
IF vm.AvatarFilePath IS NOT NULL THEN
    Image.Source = {Binding AvatarPath}
ELSE
    If vm.Gender == {x:Static vm:Gender.Female} THEN
        Image.Source = {StaticResource Img_Female}
    ELSE
        Image.Source = {StaticResource Img_Male}
    ENDIF
ENDIF 
```

以下是至少存在以下问题的实施尝试：

1.  它如何知道 AvatarPath 为空并且我们关心 Gender？
2.  有没有办法做 ELSE，所以我可以只指定一次 Gender.Male 资源，而不是每次指定一次

我怎样才能正确实施呢？

干杯，
贝里尔

# XAML 尝试 1

```
<DataTemplate x:Key="AvatarPathTemplate">
    <Image x:Name="avatarImage" Source="{Binding AvatarPath}"/>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Gender}" Value="{x:Static vm:Gender.Female}">
            <Setter Property="Sourrce" Value="{resx:Resx Img_Female}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Gender}" Value="{x:Static vm:Gender.Male}">
            <Setter Property="Sourrce" Value="{resx:Resx Img_Male}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Gender}" Value="{x:Static vm:Gender.Unknown}">
            <Setter Property="Sourrce" Value="{resx:Resx Img_Male}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Gender}" Value="{x:Static vm:Gender.Unspecified}">
            <Setter Property="Sourrce" Value="{resx:Resx Img_Male}"/>
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

# 更新

正如 trimeyko 指出的那样，这*可以*通过多转换器或在视图模型内部完成。

根据我的回答：“我实际上首先尝试了多转换器方法，并取得了一定的成功，并且几乎将其发布以帮助清理它。然后我决定最好让转换器实际转换类型。同意视图模型方法可能是最简单的但这似乎更像是视图的工作，我想看看我是否可以先让它这样工作。”

我尝试[通过在此处发布 mutliConveter 解决此问题]（[MultiConverter 用法](https://stackoverflow.com/questions/10638201/multiconverter-usage)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:06:25.520

你应该可以用几个 [`MultiDataTrigger`](http://msdn.microsoft.com/en-us/library/system.windows.multidatatrigger.aspx)s 来做到这一点：

```
<DataTemplate x:Key="AvatarPathTemplate">
    <Image x:Name="avatarImage" Source="{Binding AvatarPath}"/>
    <DataTemplate.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding AvatarPath}" Value="{x:Null}" />
                <Condition Binding="{Binding Gender}" Value="{x:Static vm:Gender.Female}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Source" Value="{resx:Resx Img_Female}"/>
        </MultiDataTrigger>

        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding AvatarPath}" Value="{x:Null}" />
                <Condition Binding="{Binding Gender}" Value="{x:Static vm:Gender.Male}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Source" Value="{resx:Resx Img_Male}"/>
        </MultiDataTrigger>
        <!-- etc... -->
    </DataTemplate.Triggers>
</DataTemplate> 
```

这些说明“何时`AvatarPath`为空`Gender`且为女性……”

**进一步改进**

由于`DataTrigger`s 是按照它们在 XAML 中出现的顺序应用的，因此我们可以在示例中消除重复“男性”设置的需要，如下所示：

```
<DataTemplate x:Key="AvatarPathTemplate">
    <Image x:Name="avatarImage" Source="{Binding AvatarPath}"/>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding AvatarPath}" Value="{x:Null}">
            <Setter Property="Source" Value="{resx:Resx Img_Male}"/>
        </DataTrigger>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding AvatarPath}" Value="{x:Null}" />
                <Condition Binding="{Binding Gender}" Value="{x:Static vm:Gender.Female}"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Source" Value="{resx:Resx Img_Female}"/>
        </MultiDataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

我们在这里说：

1.  将源设置为`AvatarPath`
2.  如果`AvatarPath`为 null，则将源设置为“Img_Male”
3.  如果`AvatarPath`为空且`Gender`为女性，则将源设置为“Img_Female”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:05:05.237

作为一个选项，您可以使用自定义转换器类并将视图模型转换为位图源。如果您想使用触发器，那么您可以使用一些多数据触发器和/或多转换器，例如当您想要显示 Img_Male 的情况。

但是我认为这些解决方案并不是很好，最好引入属性/逻辑并将图像源简单地绑定到它并在视图模型中处理这些视图逻辑。使用这种方法，您也可以为此逻辑编写单元测试。

# android - 相同的图像在网格视图中出现多次

> ID：10636066
> 
> 赞同：0
> 
> 时间：2012-05-17T12:50:44.670
> 
> 标签：android, gridview

我开发了一个相册应用程序，我在其中使用了网格视图。该应用程序正在运行，但每次当我按下返回按钮并返回我的应用程序时，网格视图中都会出现一个图像副本。例如，我在网格视图中有 7 张图像，当我按下后退按钮然后返回应用程序时，它变为 14。下次总图像将是 21 等等。我正在从 SD 卡读取图像。我的应用程序具有全屏功能，所以同样的事情也会发生。我不明白为什么会这样。下面，我发布我的代码：

**专辑活动**

```
public class Album3Activity extends Activity {
static File [] mediaFiles;
static File imageDir;
static GridView gridView;
ImageAdapter adapter;
Intent in;
static String name = null;
static ArrayList<Bitmap> bmpArray = new ArrayList<Bitmap>();
static ArrayList<String> fileName = new ArrayList<String>();
public static final String TAG = "Album3Activity";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    mediaFiles = imageDir.listFiles();
    //Log.d("Lenght of images",""+mediaFiles.length);
    for(File file : mediaFiles)
    {
        bmpArray.add(convertToBitmap(file));
        fileName.add(readFileName(file));
        Log.d(TAG + "bmpArray Size", ""+bmpArray.size());
        Log.d(TAG, "call to convertToBitmap");
    }//for

    adapter = new ImageAdapter(this, bmpArray, fileName);
    gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(adapter);
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int      position,
                long arg3) {
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", position);
            startActivity(in);
        }
    });
}//onCreate

public static Bitmap convertToBitmap(File file) 
{
    URL url = null;
    try 
    {
        url = file.toURL();
    } catch (MalformedURLException e1) 
    {
        Log.d(TAG, e1.toString());
    }//catch

    Bitmap bmp = null;
    try
    {
       bmp = BitmapFactory.decodeStream(url.openStream());
       //bmp.recycle();
    }catch(Exception e)
    {
        Log.d(TAG, "Exception: "+e.toString());
    }//catch
    return bmp;
}//convertToBitmap

public String readFileName(File file){
    String name = file.getName();
    return name;
}//readFileName
}//class 
```

**图像适配器**

```
public class ImageAdapter extends BaseAdapter {
Activity act;
ArrayList<Bitmap> mFiles;
static ArrayList<String> mName;
public static final String TAG = "ImageAdapter";
static String name = null;
public ImageAdapter(Activity act, ArrayList<Bitmap> mFiles, ArrayList<String>     mName) {
    super();
    this.act = act;
    this.mFiles = mFiles;
    ImageAdapter.mName = mName;
    Log.d("mfiles", "" + this.mFiles.size());
}// ImageAdapter

public int getCount() {
    return mFiles.size();
}// getCount

public Object getItem(int postion) {
    return mFiles.get(postion);
}// getItem

public long getItemId(int position) {
    return 0;
}// getItemId

public static class ViewHolder {
    ImageView iv;
    TextView tv;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder view;
    LayoutInflater li = act.getLayoutInflater();
    if (convertView == null) {
        Log.d("tag", "null");
        view = new ViewHolder();
        convertView = li.inflate(R.layout.gridview_row, null);
        view.iv = (ImageView) convertView.findViewById(R.id.imageView1);
        view.tv = (TextView) convertView.findViewById(R.id.textView1);
        convertView.setTag(view);
    }// if
    else {
        view = (ViewHolder) convertView.getTag();
    }// else
    view.iv.setImageBitmap(mFiles.get(position));
    view.tv.setText(readName(position));
    Log.d(TAG, "getView method called");
    return convertView;
}// getView

public static String  readName(int position) {
    String name = mName.get(position);
    return name;
}//readName

    }// ImageAdapter 
```

**全屏.java**

```
public class FullScreen extends Activity implements OnClickListener, OnGestureListener{
ImageView imageView1;
ViewSwitcher viewSwitcher;
ImageAdapter adapter = new ImageAdapter(getParent(), Album3Activity.bmpArray, Album3Activity.fileName);
Button avbryt, camera, trash, opendialog, slett, 
    avbryt1, epost, mms, avbryt2, facebook;
TextView textView;
ImageButton btnNext, btnPrevious;
GestureDetector gesturedetector = null;
Intent in; 
int touches; 
    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.fullscreen);
    viewSwitcher = (ViewSwitcher)findViewById(R.id.viewSwitcher);
    imageView1 = (ImageView)findViewById(R.id.imageView1);
    textView = (TextView)findViewById(R.id.textView1);

    in = getIntent();
    touches = in.getExtras().getInt("id");
    imageView1.setImageBitmap((Bitmap)adapter.getItem(touches)); 
    textView.setText(ImageAdapter.readName(touches));

    btnNext = (ImageButton)findViewById(R.id.btnNext);
    btnNext.setOnClickListener(this);

    btnPrevious = (ImageButton)findViewById(R.id.btnPrevious);
    btnPrevious.setOnClickListener(this);

    trash = (Button)findViewById(R.id.trash);
    trash.setOnClickListener(this);

    opendialog = (Button)findViewById(R.id.opendialog);
    opendialog.setOnClickListener(this);

    avbryt = (Button)findViewById(R.id.avbryt);
    avbryt.setOnClickListener(this);

    camera = (Button)findViewById(R.id.camera_albumbutton);
    camera.setOnClickListener(this);

    gesturedetector=new GestureDetector(this, this);
}//onCreate

    public void onClick(View v) {

    switch (v.getId()) {
    case R.id.btnNext:
        Animation animationNext = AnimationUtils.loadAnimation(this, R.anim.btn_style_next);
        btnNext.startAnimation(animationNext);
        nextView();
        break;

    case R.id.btnPrevious:
        Animation animationPrevious = AnimationUtils.loadAnimation(this, R.anim.btn_style_previous);
        btnPrevious.startAnimation(animationPrevious);
        previousView();
        break;

    case R.id.trash:
        final Dialog dialog  = new Dialog(FullScreen.this);
        dialog.setContentView(R.layout.trashdialog);
        slett = (Button)dialog.findViewById(R.id.slett);
        avbryt1 = (Button)dialog.findViewById(R.id.avbryt);

        slett.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                File file = new File(Environment.getExternalStorageDirectory()+
                            "/diplomat/"+ ImageAdapter.readName(touches));
                Log.d("FullScreen Path", file.getAbsolutePath());
                Log.d("Hi1 touches value", ""+touches);
                try
                {

                    if(touches == (Album3Activity.bmpArray.size() - 1))
                    {
                        file.delete();
                        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
                                , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));
                        Album3Activity.bmpArray.remove(touches);
                        Log.d("Hi2 new bmpArray size", ""+Album3Activity.bmpArray.size());

                        Album3Activity.fileName.remove(touches);
                        Log.d("Hi2 new fileName size", ""+Album3Activity.fileName.size());

                        Album3Activity.gridView.invalidateViews();
                        adapter.notifyDataSetChanged();

                        touches = Album3Activity.bmpArray.size() - touches;
                        Log.d("FullScreen delete:if block", "Updated touches value:"+touches);

                        do
                        {
                            Log.d("FullScreen:delete if", "in while loop");
                            imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
                            textView.setText(ImageAdapter.readName(touches));
                            break;
                        }//do
                        while(Album3Activity.bmpArray.isEmpty() == false);
                    }//if
                    else
                    {
                        Log.d("fullscreen:delete else", "else block executed");
                        file.delete();
                        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
                                , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));

                        Album3Activity.bmpArray.remove(touches);
                        Log.d("Hi2 new bmpArray size", ""+Album3Activity.bmpArray.size());

                        Album3Activity.fileName.remove(touches);
                        Log.d("Hi2 new fileName size", ""+Album3Activity.fileName.size());

                        Album3Activity.gridView.invalidateViews();
                        adapter.notifyDataSetChanged();

                        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
                        textView.setText(ImageAdapter.readName(touches));

                    }//else
                }//try
                catch(IndexOutOfBoundsException e)
                {
                    Log.d("Fullscreen delete method", e.toString());
                    Toast.makeText(FullScreen.this, "No more image left to diaplay"
                            , Toast.LENGTH_SHORT).show();
                }//catch
                finally
                {
                    dialog.dismiss();
                }//finally
            }//onClick
        });

        avbryt1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }//onClick
        });
        dialog.show();
        break;

    case R.id.opendialog:
        final Dialog dialog1 = new Dialog(FullScreen.this);
        dialog1.setContentView(R.layout.openbuttondialog);
        epost = (Button)dialog1.findViewById(R.id.epost);
        mms = (Button)dialog1.findViewById(R.id.mms);
        facebook = (Button)dialog1.findViewById(R.id.facebook);
        avbryt2 =(Button)dialog1.findViewById(R.id.openavbryt);

        epost.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        mms.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        facebook.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        avbryt2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog1.cancel();
            }//onClick
        });
        dialog1.show();
        break;

    case R.id.avbryt:
        break;

    case R.id.camera_albumbutton:
        break;

    default:
        break;
    }//switch

}//onClick

private void previousView() {
    if(touches > 0){
        touches = touches - 1;
        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
        textView.setText(ImageAdapter.readName(touches));
        viewSwitcher.setInAnimation(this, R.anim.in_animation1);
        viewSwitcher.setOutAnimation(this, R.anim.out_animation1);
        viewSwitcher.showPrevious();
    }//if
    else{
        Toast.makeText(this, "No image left", Toast.LENGTH_SHORT).show();
    }//else
    Log.d("Switcher", "previousView");
}//previousView

private void nextView() {
    if(touches < Album3Activity.bmpArray.size() - 1){
        touches = touches + 1;
        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
        textView.setText(ImageAdapter.readName(touches));
        viewSwitcher.setInAnimation(this, R.anim.in_animation);
        viewSwitcher.setOutAnimation(this, R.anim.out_animation);
        viewSwitcher.showNext();
    }//if
    else{
        Toast.makeText(this, "No image left", Toast.LENGTH_SHORT).show();
    }//else
    Log.d("Switcher", "nextView");
}//nextView

public boolean onDown(MotionEvent e) {
    // TODO Auto-generated method stub
    return true;
}

int SWIPE_MIN_VELOCITY = 50;
int SWIPE_MIN_DISTANCE = 50;

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    float ev1X = e1.getX();
    float ev2X = e2.getX();
    Log.d("On", "Onfling");
    //Get distance of X (e1) to X (e2)
    final float xdistance = Math.abs(ev1X - ev2X);
    //Get veclocity of cusor
    //Váº­n tá»‘c = sá»‘ Ä‘iá»ƒm áº£nh (px) / giÃ¢y
    final float xvelocity = Math.abs(velocityX);

    //Váº­n tá»‘c chuyá»ƒn Ä‘á»•i X > 100 vÃ  khoáº£ng cÃ¡ch tá»« Ä‘iá»ƒm kÃ©o Ä‘áº§u Ä‘áº¿n Ä‘iá»ƒm kÃ©o cuá»‘i > 100
    if( (xvelocity > SWIPE_MIN_VELOCITY) && (xdistance > SWIPE_MIN_DISTANCE) )
    {
        if(ev1X > ev2X)//Switch Left
        {
            previousView();
        }
        else//Switch Right
        {
            nextView();
        }
    }

    return false;
}

public void onLongPress(MotionEvent e) {
    // TODO Auto-generated method stub

}

public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    // TODO Auto-generated method stub
    return false;
}

public void onShowPress(MotionEvent e) {
    // TODO Auto-generated method stub

}

public boolean onSingleTapUp(MotionEvent e) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d("on touch","touch");
    // TODO Auto-generated method stub
    //return gesturedetector.onTouchEvent(event);

    this.gesturedetector.onTouchEvent(event);
      return super.onTouchEvent(event);
}

    }//FullScreen 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:03:18.963

您将所有变量声明为`static`? `static`变量在应用程序中只维护一份副本。它将文件名添加到同一个副本。如果您不想重复值，最好使用`HashSet`而不是`ArrayList`.

```
static HashSet<Bitmap> bmpArray = new HashSet<Bitmap>();
static HashSet<String> fileName = new HashSet<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:24:47.503

**专辑活动**

```
public class Album3Activity extends Activity {
File [] mediaFiles;
File imageDir;
static GridView gridView;
ImageAdapter adapter;
Intent in;
String name = null;
ArrayList<Bitmap> bmpArray = new ArrayList<Bitmap>();
ArrayList<String> fileName = new ArrayList<String>();
public static final String TAG = "Album3Activity";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.grid);
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    mediaFiles = imageDir.listFiles();
    //Log.d("Length of images",""+mediaFiles.length);
    try
    {
        for(File file : mediaFiles)
        {
            bmpArray.add(convertToBitmap(file));
            fileName.add(readFileName(file));
            Log.d(TAG + "bmpArray Size", ""+bmpArray.size());
            Log.d(TAG, "call to convertToBitmap");
        }//for
    }//try
    catch(Exception e)
    {
        Log.d(TAG, e.toString());
        Toast.makeText(Album3Activity.this, "No files available", Toast.LENGTH_SHORT).show();
    }//catch
    adapter = new ImageAdapter(this, bmpArray, fileName);
    gridView = (GridView)findViewById(R.id.gridview);
    gridView.setAdapter(adapter);
    gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", position);
            startActivity(in);
        }
    });
}//onCreate

public static Bitmap convertToBitmap(File file) 
{
    URL url = null;
    try 
    {
        url = file.toURL();
    } catch (MalformedURLException e1) 
    {
        Log.d(TAG, e1.toString());
    }//catch

    Bitmap bmp = null;
    try
    {
       bmp = BitmapFactory.decodeStream(url.openStream());
       //bmp.recycle();
    }catch(Exception e)
    {
        Log.d(TAG, "Exception: "+e.toString());
    }//catch
    return bmp;
}//convertToBitmap

public String readFileName(File file){
    String name = file.getName();
    return name;
}//readFileName
}//class 
```

**图像适配器**

```
public class ImageAdapter extends BaseAdapter {
Activity act;
static ArrayList<Bitmap> mFiles;
static ArrayList<String> mName;
public static final String TAG = "ImageAdapter";
String name = null;
public ImageAdapter(Activity act, ArrayList<Bitmap> mFiles, ArrayList<String> mName) {
    super();
    this.act = act;
    ImageAdapter.mFiles = mFiles;
    ImageAdapter.mName = mName;
    Log.d("mfiles", "" + ImageAdapter.mFiles.size());
}// ImageAdapter

public int getCount() {
    return mFiles.size();
}// getCount

public Object getItem(int postion) {
    return mFiles.get(postion);
}// getItem

public long getItemId(int position) {
    return 0;
}// getItemId

public static class ViewHolder {
    ImageView iv;
    TextView tv;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder view;
    LayoutInflater li = act.getLayoutInflater();
    if (convertView == null) {
        Log.d("tag", "null");
        view = new ViewHolder();
        convertView = li.inflate(R.layout.gridview_row, null);
        view.iv = (ImageView) convertView.findViewById(R.id.imageView1);
        view.tv = (TextView) convertView.findViewById(R.id.textView1);
        convertView.setTag(view);
    }// if
    else {
        view = (ViewHolder) convertView.getTag();
    }// else
    view.iv.setImageBitmap(mFiles.get(position));
    view.tv.setText(readName(position));
    Log.d(TAG, "getView method called");
    return convertView;
}// getView

public String readName(int position) {
    String name = mName.get(position);
    return name;
}//readName

}// ImageAdapter 
```

**全屏**

```
public class FullScreen extends Activity implements OnClickListener, OnGestureListener{
ImageView imageView1;
ViewSwitcher viewSwitcher;
ImageAdapter adapter = new ImageAdapter(getParent(), ImageAdapter.mFiles, ImageAdapter.mName);
Button avbryt, camera, trash, opendialog, slett, 
    avbryt1, epost, mms, avbryt2, facebook;
TextView textView;
ImageButton btnNext, btnPrevious;
GestureDetector gesturedetector = null;
Intent in; 
int touches; 

    protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.fullscreen);
    viewSwitcher = (ViewSwitcher)findViewById(R.id.viewSwitcher);
    imageView1 = (ImageView)findViewById(R.id.imageView1);
    textView = (TextView)findViewById(R.id.textView1);

    in = getIntent();
    touches = in.getExtras().getInt("id");
    imageView1.setImageBitmap((Bitmap)adapter.getItem(touches)); 
    textView.setText(adapter.readName(touches));
    sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
            , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));

    btnNext = (ImageButton)findViewById(R.id.btnNext);
    btnNext.setOnClickListener(this);

    btnPrevious = (ImageButton)findViewById(R.id.btnPrevious);
    btnPrevious.setOnClickListener(this);

    trash = (Button)findViewById(R.id.trash);
    trash.setOnClickListener(this);

    opendialog = (Button)findViewById(R.id.opendialog);
    opendialog.setOnClickListener(this);

    avbryt = (Button)findViewById(R.id.avbryt);
    avbryt.setOnClickListener(this);

    camera = (Button)findViewById(R.id.camera_albumbutton);
    camera.setOnClickListener(this);

    gesturedetector=new GestureDetector(this, this);
}//onCreate 
```

公共无效 onClick（查看 v）{

```
 switch (v.getId()) {
    case R.id.btnNext:
        Animation animationNext = AnimationUtils.loadAnimation(this, R.anim.btn_style_next);
        btnNext.startAnimation(animationNext);
        nextView();
        break;

    case R.id.btnPrevious:
        Animation animationPrevious = AnimationUtils.loadAnimation(this, R.anim.btn_style_previous);
        btnPrevious.startAnimation(animationPrevious);
        previousView();
        break;

    case R.id.trash:
        final Dialog dialog  = new Dialog(FullScreen.this);
        dialog.setContentView(R.layout.trashdialog);
        slett = (Button)dialog.findViewById(R.id.slett);
        avbryt1 = (Button)dialog.findViewById(R.id.avbryt);

        slett.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                File file = new File(Environment.getExternalStorageDirectory()+
                            "/diplomat/"+ adapter.readName(touches));
                Log.d("FullScreen Path", file.getAbsolutePath());
                Log.d("Hi1 touches value", ""+touches);
                try
                {

                    if(touches == (ImageAdapter.mFiles.size() - 1))
                    {
                        file.delete();
                        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
                                , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));
                        ImageAdapter.mFiles.remove(touches);
                        Log.d("Hi2 new bmpArray size", ""+ImageAdapter.mFiles.size());

                        ImageAdapter.mName.remove(touches);
                        Log.d("Hi2 new fileName size", ""+ImageAdapter.mName.size());

                        Album3Activity.gridView.invalidateViews();
                        adapter.notifyDataSetChanged();

                        touches = ImageAdapter.mFiles.size() - touches;
                        Log.d("FullScreen delete:if block", "Updated touches value:"+touches);

                        do
                        {
                            Log.d("FullScreen:delete if", "in while loop");
                            imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
                            textView.setText(adapter.readName(touches));
                            break;
                        }//do
                        while(ImageAdapter.mFiles.isEmpty() == false);
                    }//if
                    else
                    {
                        Log.d("fullscreen:delete else", "else block executed");
                        file.delete();
                        sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED
                                , Uri.parse(Environment.getExternalStorageDirectory().toString()+"/diplomat")));

                        ImageAdapter.mFiles.remove(touches);
                        Log.d("Hi2 new bmpArray size", ""+ImageAdapter.mFiles.size());

                        ImageAdapter.mName.remove(touches);
                        Log.d("Hi2 new fileName size", ""+ImageAdapter.mName.size());

                        Album3Activity.gridView.invalidateViews();
                        adapter.notifyDataSetChanged();

                        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
                        textView.setText(adapter.readName(touches));

                    }//else
                }//try
                catch(IndexOutOfBoundsException e)
                {
                    Log.d("Fullscreen delete method", e.toString());
                    Toast.makeText(FullScreen.this, "No more image left to diaplay"
                            , Toast.LENGTH_SHORT).show();
                }//catch
                finally
                {
                    dialog.dismiss();
                }//finally
            }//onClick
        });

        avbryt1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog.cancel();
            }//onClick
        });
        dialog.show();
        break;

    case R.id.opendialog:
        final Dialog dialog1 = new Dialog(FullScreen.this);
        dialog1.setContentView(R.layout.openbuttondialog);
        epost = (Button)dialog1.findViewById(R.id.epost);
        mms = (Button)dialog1.findViewById(R.id.mms);
        facebook = (Button)dialog1.findViewById(R.id.facebook);
        avbryt2 =(Button)dialog1.findViewById(R.id.openavbryt);

        epost.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        mms.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        facebook.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }//onClick
        });

        avbryt2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                dialog1.cancel();
            }//onClick
        });
        dialog1.show();
        break;

    case R.id.avbryt:
        break;

    case R.id.camera_albumbutton:
        break;

    default:
        break;
    }//switch

}//onClick

private void previousView() {
    if(touches > 0){
        touches = touches - 1;
        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
        textView.setText(adapter.readName(touches));
        viewSwitcher.setInAnimation(this, R.anim.in_animation1);
        viewSwitcher.setOutAnimation(this, R.anim.out_animation1);
        viewSwitcher.showPrevious();
    }//if
    else{
        Toast.makeText(this, "No image left", Toast.LENGTH_SHORT).show();
    }//else
    Log.d("Switcher", "previousView");
}//previousView

private void nextView() {
    if(touches < ImageAdapter.mFiles.size() - 1){
        touches = touches + 1;
        imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
        textView.setText(adapter.readName(touches));
        viewSwitcher.setInAnimation(this, R.anim.in_animation);
        viewSwitcher.setOutAnimation(this, R.anim.out_animation);
        viewSwitcher.showNext();
    //}//if
    //else{
        //Toast.makeText(this, "No image left", Toast.LENGTH_SHORT).show();
        while(touches == (ImageAdapter.mFiles.size() - 1))
        {
            touches = 0;
            imageView1.setImageBitmap((Bitmap)adapter.getItem(touches));
            touches = touches + 1;
            break;
        }//while
    }//else
    Log.d("Switcher", "nextView");
}//nextView

public boolean onDown(MotionEvent e) {
    // TODO Auto-generated method stub
    return true;
}

int SWIPE_MIN_VELOCITY = 50;
int SWIPE_MIN_DISTANCE = 50;

public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    float ev1X = e1.getX();
    float ev2X = e2.getX();
    Log.d("On", "Onfling");
    //Get distance of X (e1) to X (e2)
    final float xdistance = Math.abs(ev1X - ev2X);
    //Get veclocity of cusor
    //Váº­n tá»‘c = sá»‘ Ä‘iá»ƒm áº£nh (px) / giÃ¢y
    final float xvelocity = Math.abs(velocityX);

    //Váº­n tá»‘c chuyá»ƒn Ä‘á»•i X > 100 vÃ  khoáº£ng cÃ¡ch tá»« Ä‘iá»ƒm kÃ©o Ä‘áº§u Ä‘áº¿n Ä‘iá»ƒm kÃ©o cuá»‘i > 100
    if( (xvelocity > SWIPE_MIN_VELOCITY) && (xdistance > SWIPE_MIN_DISTANCE) )
    {
        if(ev1X > ev2X)//Switch Left
        {
            previousView();
        }
        else//Switch Right
        {
            nextView();
        }
    }

    return false;
}

public void onLongPress(MotionEvent e) {
    // TODO Auto-generated method stub

}

public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
        float distanceY) {
    // TODO Auto-generated method stub
    return false;
}

public void onShowPress(MotionEvent e) {
    // TODO Auto-generated method stub

}

public boolean onSingleTapUp(MotionEvent e) {
    // TODO Auto-generated method stub
    return false;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d("on touch","touch");
    // TODO Auto-generated method stub
    //return gesturedetector.onTouchEvent(event);

    this.gesturedetector.onTouchEvent(event);
      return super.onTouchEvent(event);
}

}//FullScreen 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:08:03.160

现在，当您离开应用程序时，正在创建一个捆绑包，当您返回时，系统会使用它来将您恢复到原来的位置（给您原来的七个），然后您再次添加它们，因为`onCreate`再次运行。

你需要检查一个 savedInstanceState，如果它存在，不要做任何事情。你应该在你的所有`onCreate`方法中都有这个。

```
@Override 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main); 

    if (savedInstanceState == null) { 
         // Do your oncreate stuff because there is no bundle    
    } 
// Do stuff that needs to be done even if there is a saved instance, or do nothing 
} 
```

# javascript - 如何在jquery插件中覆盖js函数并访问私有成员

> ID：10636070
> 
> 赞同：1
> 
> 时间：2012-05-17T12:50:58.300
> 
> 标签：javascript, jquery-plugins, overriding

我想知道是否有人可以提供帮助

我有一个带有以下代码的 jQuery 插件：

```
....

$.Autocompleter.Select = function (options, input, select, config) {
    var list;

    ....

    return {
        emptyList: function (){
            list && list.empty();
        }
    }
} 
```

我想覆盖 emptyList 函数；并编写了以下代码：

```
originalAutoCompleteSelectFunction = $.Autocompleter.Select;
$.Autocompleter.Select = function (options, input, select, config) {
    var ret = originalAutoCompleteSelectFunction.apply(this, arguments);

    ret.emptyList = function() {
        console.log ("hello");
        console.log ("The list=" + list);
    };

    return ret;
}; 
```

它有点工作，但是：

1.  我的 emptyList 实现运行 - 我在控制台上看到“你好” - 但 emptyList 的原始实现也运行。所以它不是一个真正被覆盖的函数是吗？它更像是一种增强？
2.  我似乎无法访问变量“列表”

所以，2个问题。我是否正确编写了代码以真正覆盖现有功能？而且，是否可以访问变量“列表”？我知道它是闭包的私有成员，但是如果您不能以这种方式访问​​私有成员，大概它会使覆盖函数（使用这些私有成员）的能力变得毫无意义？

还是我错过了什么？

我已经看过[扩展现有的 jQuery 函数](https://stackoverflow.com/questions/5007279/extending-an-existing-jquery-function)，它指导我如何以这种方式覆盖函数；还有这个[jQuery 插件的访问私有成员，](https://stackoverflow.com/questions/4087234/access-private-members-of-jquery-plugin)它表明访问闭包的私有成员是不可能的。

干杯

弥敦道

# php - assert() 在 php 5.3.1 中显示警告

> ID：10636072
> 
> 赞同：2
> 
> 时间：2012-05-17T12:51:01.200
> 
> 标签：php, warnings, sphinx, assert

我正在使用狮身人面像 0.9.8 版本。我的 php 版本是 5.3.1。在集成 sphinx api 后，我收到了一些关于 assert() 的警告。我该如何解决这个问题？任何机构可以帮助我？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:48:48.010

好吧..如果作为参数它需要一个整数，那么将您的代码编写为：

```
$sphinx->method((int) $param1); 
```

编辑：真实示例：

```
$src = new SphinxClient();
$src->SetServer('127.0.0.1', 9393);
$src->SetLimits((int) $offset, (int) $per_page); 
```

现在看到了吗？

# database - 如何指定引用其他两个弱实体的弱实体，它们都共享第四个实体？

> ID：10636076
> 
> 赞同：1
> 
> 时间：2012-05-17T12:51:06.587
> 
> 标签：database, database-design, many-to-many

问题标题可能有点神秘，但我想不出一个有意义的简短版本。

所以我有一个表，它是和`Booking`之间的多对多关系。我还有一个表，它是和之间的多对多关系。`Customer``Event``event_activity``Event``Activity`

我现在希望预订能够指定它想要参加的活动中的哪个事件。所以我有，它是和`booking_event_activity`之间的多对多。`Booking``event_activity`

显然`booking_event_activity`将需要外键`Customer`和`Activity`（这也将是它自己的复合主键的一部分），但是我如何指定最终的外键，它将是一个事件的主键？我做到了吗：

1.  预订活动外键的外键？
2.  event_activity 的事件外键的外键？
3.  两个外键，分别对应 1\. 和 2.？
4.  一个外键直接指向事件表的主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:40:53.837

您可以让表`booking_event_activity`引用*customerId*、*eventId*和*activityId*列。您的*eventId*列（至少使用 SQL Server）可以是对`event_activities`和的外键引用`booking`，但请注意！使用此方法，级联关系可能无法按预期工作。

# android - 在 Mac 应用程序中使用 adb 命令

> ID：10636080
> 
> 赞同：2
> 
> 时间：2012-05-17T12:51:24.743
> 
> 标签：android, macos, terminal

我想`adb`在 MAC 应用程序中使用命令

我**可以**在**终端**中使用 adb 命令，也可以在我的**Shell 脚本**中使用。我**可以在使用 Automator 创建的****服务**中使用相同的功能，即使在**Applescripts**中也是如此。

我无法**仅**在使用 Automator 创建的任何 APP 中使用 adb 命令。我的应用程序有一个**运行 shell script 的工作流**。我无法在脚本中使用`adb devices`或`adb`就此而言；说*意外错误*

是关于添加对`adb`in的永久引用吗`$PATH`？我只在一个`bash_rc`文件中执行此操作，这解释了为什么 shell 脚本（或打开终端的东西）成功运行 - 因为它们总是`bash_rc`首先调用

如果是这样，这样做的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T05:20:31.253

我做了以下事情，它解决了这个问题：

```
export adb=path/to/adb

for f in "$@"
do
    $adb devices
    $adb do-something "$f"
done

# using adb devices; doesn't work as adb was not recognized, 
# so I exported it from full path

# $@ are my files that I wont to run my script upon 
```

# tcp - 隐形端口扫描保护如何工作？

> ID：10636086
> 
> 赞同：0
> 
> 时间：2012-05-17T12:51:44.890
> 
> 标签：tcp, port, option, iptables

```
 #Port-scanner protection
iptables -A pfc -p tcp --tcp-flags SYN,ACK,FIN,RST RST -m limit --limit 2/s --limit-burst  4 -j RETURN
iptables -A pfc -p tcp --tcp-flags SYN,ACK,FIN,RST RST -j DROP 
```

我无法理解 tcp flag 选项的作用。Manuel 说第一个列表是掩码，第二个是必须设置标志。它是否检查包括 RST 在内的数据包？

我知道*-m 限制*的含义，但是 tcp-flags 如何防止端口扫描？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T19:03:54.703

第一个标志字符串是掩码：您要检查的标志列表。第二个标志字符串指示应该设置哪些标志。

在您的情况下，您正在检查 syn、ack、fin 和 rst 标志并寻找要设置的 rst。

'tcp flags' 开关通过强制 iptables 检查 TCP 段中的 tcp 标志来防止端口扫描，从而防止异常或非法的标志组合（例如 Nmap Xmas 扫描）。

# c# - 当它在更新面板中时如何在javascript中获取下拉列表的值

> ID：10636090
> 
> 赞同：0
> 
> 时间：2012-05-17T12:52:15.327
> 
> 标签：c#, javascript, asp.net, updatepanel

我只`ddlstate`对`selectedindechanged`事件有约束力`ddlCountry`。`ddlState`如果它是“-1”，则在 javascript 中检查下拉值，然后生成警报。当我检查 javascript 中的值时，它会显示一个空白值“”。当我使用`Postbacktrigger`for`ddlState`时，我可以使用 javascript 获取值，但是使用 async 的页面的流畅度要优于 Postbacktrigger。这就是我使用异步触发器的原因。我的主要问题是`ddlState`，当我使用异步触发器时，它的值没有进入 javascript，而我可以使用回发触发器来获取它。

JavaScript 验证：

```
function validateForm()
{
    var ddlCountry = document.getElementById('<%=ddlCountry.ClientID%>');
    var ddlState = document.getElementById('<%=ddlState.ClientID%>');
    if (ddlCountry .value == "-1")
    {
        alert("Country  should not be blank.");
        ddlCountry .focus();
        return false;
    }
    if (ddlState .value == "-1")
    {
        alert("State should not be blank.");
        ddlState .focus();
        return false;
    }

    return true;
} 
```

ASP 代码：

```
<asp:DropDownList ID="ddlAcqModalityList" runat="server" CssClass="csstextbox" Width="207px" AutoPostBack="true" OnSelectedIndexChanged="ddlAcqModalityList_SelectedIndexChanged">
</asp:DropDownList>
<asp:UpdatePanel ID="updatePanelState" runat="server">
    <ContentTemplate>
        <asp:DropDownList ID="ddlState " runat="server" CssClass="csstextbox" Width="177px">
        </asp:DropDownList>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ddlCountry" EventName="SelectedIndexChanged" />
    </Triggers>
</asp:UpdatePanel>
<asp:Button ID="btnSave" runat="server" Width="80px" OnClientClick="return validateForm();" Text="Save" CssClass="cssbutton" OnClick="btnSave_Click" /> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        BindCountry()
        {
            strSQL = @"SELECT Country_ID,Country_Desc
                       FROM Country_Master";

            DataTable dataTableState = null;
            dataTableState = objSqlDbComm.ExecuteDatasetQuery(strSQL).Tables[0];

            var dictioneryCountry = new Dictionary<int, string>();
            foreach(DataRow dr in dataTableStudy.Rows)
            {
                dictioneryCountry .Add(Convert.ToInt32(dr["Country_ID"]), dr["Country_Desc"].ToString());
            }

            ddlCountry.DataTextField = "Value";
            ddlCountry.DataValueField = "Key";
            ddlCountry.DataSource = dictioneryCountry;
            ddlCountry.DataBind();
            ddlCountry.Items.Insert(0, new ListItem("[Select]", "-1"));
            ddlCountry.Items[0].Selected = true;
        }
    }
}

protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
{
    int countryID = Convert.ToInt32(ddlCountry.SelectedItem.Value);

    ifcountryID == -1)
    {
        return;
    }

    strSQL = @"SELECT State_ID,State_Desc
               FROM State_Master
               WHERE countryID = '" + countryID + @"';

    DataTable dataTableState = null;
    dataTableState = objSqlDbComm.ExecuteDatasetQuery(strSQL).Tables[0];

    var dictioneryState = new Dictionary<int, string>();
    foreach(DataRow dr in dataTableStudy.Rows)
    {
        dictioneryState .Add(Convert.ToInt32(dr["State_ID"]), dr["State_Desc"].ToString());
    }

    ddlState.DataTextField = "Value";
    ddlState.DataValueField = "Key";
    ddlState.DataSource = dictioneryState;
    ddlState.DataBind();
    ddlState.Items.Insert(0, new ListItem("[Select]", "-1"));
    ddlState.Items[0].Selected = true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:05:59.747

首先，我认为您不能直接调用“ddlCountry.value”，该 ID 用于服务器控制！您需要使用，来获取客户端 ID。

```
document.getElementById('ddlCountry').value; 
```

另一件事，如果您想在更改下拉列表时在 javascript 上触发事件，您可以像这样添加 onchange 客户端事件，这将调用 javascript 函数而不发布页面（刷新）：

```
<asp:DropDownList ID="ddlState " runat="server" 
CssClass="csstextbox" Width="177px" onchange="validateForm()"> 
```

然后，您可以根据需要删除事件触发器和更新面板。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T07:13:53.937

```
 //javascript code
var hidStateValue=document.getElementByID('<%=hidStateValue.ClientID%>');
        if (hidStateValue.value == "-1")
                    {
                        alert("State should not be blank.");                
                        return false;
                    }

        //aspx code
        <asp:DropDownList ID="ddlState" AutoPostBack="true"  runat="server" CssClass="csstextbox" Width="177px" onselectedindexchanged="ddlState_SelectedIndexChanged">                                                                </asp:DropDownList>
            <asp:HiddenField ID="hidStateValue" runat="server" />

        //Code behind

          protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
         {
            //code
            hidStateValue.Value = ddlState.SelectedItem.Value;
         }
        protected void ddlState_SelectedIndexChanged(object sender, EventArgs e)
            {       
                hidStateValue.Value="";
                hidStateValue.Value = ddlState.SelectedItem.Value;      
            } 
```

# reporting-services - SSRS 2008 过滤器缺少“不在”？

> ID：10636093
> 
> 赞同：3
> 
> 时间：2012-05-17T12:52:19.750
> 
> 标签：reporting-services, ssrs-2008

我想在 SSRS 2008 中设置一个过滤器，我需要让用户从报告中选择要排除的值。所以我期望能够将过滤器设置为“不在”参数中，但我没有看到。我错过了什么吗？你能想出一个解决方法吗？

例如，如果我有按州划分的销售额，并且我知道我的用户可能希望从报告中排除 3-4 个州。我不希望他必须通过 50 个州的列表来取消选中这 3 或 4 个，而只是在列表中显示这 3-4 个以询问他是否要排除它们。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:48:54.697

Stacia Misner 有一篇很棒的博客文章，介绍了这种情况的解决方法... [http://blog.datainspirations.com/2011/01/20/working-with-reporting-services-filters-part-4-creating-a-不在过滤器中/](http://blog.datainspirations.com/2011/01/20/working-with-reporting-services-filters-part-4-creating-a-not-in-filter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T11:10:04.377

另一种解决方法是创建一个数据集并在该数据集中硬编码这 3-4 个值。例如

```
SELECT 'Arizona'
UNION 
SELECT 'California'
UNION 
SELECT 'Great Washington Area'
UNION
SELECT 'Nevada'. 
```

现在设置您的参数以从该数据集中选择数据，并且用户可以检查他想要排除的所有状态，并且这些值可以在从主表中获取数据时在主数据集中处于“不处于”状态。

# javascript - 从 SOAP 信封中获取数据

> ID：10636101
> 
> 赞同：0
> 
> 时间：2012-05-17T12:52:32.090
> 
> 标签：javascript, sharepoint, soap, sharepoint-2007, windows-desktop-gadgets

我正在尝试使用共享点列表填充小工具，但我在谷歌上找不到任何方法或教程来帮助我解决这个问题，但是我发现这个教程正在获取新闻网站的 XML 反馈，并将它们显示在一个列表。

[制作从新闻站点获取 XML 反馈的小工具的教程](http://vishsharepoint.blogspot.co.uk/2012/05/get-sharepoint-list-data-using.html)

现在，我希望本教程显示 XML 文档项，而不是从那个新闻网站获取 XML 反馈，我将通过这段代码，

```
$(document).ready(function() 
{
    var soapEnv =
        "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> 
            <soapenv:Body> 
                 <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> 
                    <listName>ListName</listName> 
                    <viewFields> 
                        <ViewFields> 
                           <FieldRef Name='Title' /> 
                       </ViewFields> 
                    </viewFields> 
                </GetListItems> 
            </soapenv:Body> 
        </soapenv:Envelope>";

    $.ajax({
        url: "http://my_site/_vti_bin/lists.asmx",
        type: "POST",
        dataType: "xml",
        data: soapEnv,
        complete: processResult,
        contentType: "text/xml; charset="utf-8""
    });
});

function processResult(xData, status) {
    $(xData.responseXML).find("z\:row").each(function() {
        alert($(this).attr("ows_Title"));
    });
} 
```

我不知道我该怎么做这个技巧，但请你至少指导我，我怎样才能完成这项任务，+我应该研究或学习什么东西，因为谷歌根本没有帮助我解决我的问题： /。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:32:41.560

[使用SPServices](http://spservices.codeplex.com/)库而不是使用soap 请求和查询是一个`/_vti_bin/lists.asmx`不错的选择，这是一种无需深入研究soap 请求即可获取数据的最简单方法。有很多简单的例子，试试吧！

但是，如果必须坚持使用 soap 实施，有两个工具可以帮助您`soapUI`，并且`fiddler`.

在soapUI 的帮助下，您将能够轻松地从您拥有的url 创建一个soap 请求。您可以使用提琴手检查请求和响应。

如果您有更多问题，请告诉我

# jquery - 根据下拉列表选择显示表单元素

> ID：10636102
> 
> 赞同：2
> 
> 时间：2012-05-17T12:52:34.203
> 
> 标签：jquery, asp.net, .net, asp.net-mvc-3, razor

我正在构建一个注册表单，其中有一个安全问题的下拉列表。用户可以选择各种问题，但是，我在列表中有一个项目，上面写着“[输入您自己的问题]”。

我有一个 css 隐藏文本框，当用户选择“[输入您自己的问题]”时，我想显示该文本框。

这是我的 Register.cshtml 剃刀表单中的代码：

```
<div class="editor-field">
                    @{
            List<SelectListItem> items = new List<SelectListItem>();
            items.Add(new SelectListItem { Text = "What was the name of your first pet?", Value = "SQ1" });
            items.Add(new SelectListItem { Text = "What is your mother's maiden name?", Value = "SQ2" });
            items.Add(new SelectListItem { Text = "What was the first foreign country you visited?", Value = "SQ3" });
            items.Add(new SelectListItem { Text = "What is your favorite sports team?", Value = "SQ4" });
            items.Add(new SelectListItem { Text = "Who is your favorite athlete?", Value = "SQ5" });
            items.Add(new SelectListItem { Text = "[Type in your own question]", Value = "SQ6" });
                    }
                    @Html.DropDownListFor(model => model.SecurityQuestion1, items, new { @Id = "ddlSq1" })
                    @Html.ValidationMessageFor(model => model.AnswerSecurityQuestion1)
                </div>
                <div id="customSecurity" style="visibility:hidden">
                    <div class="editor-label">
                        @Html.LabelFor(model => model.CustomSecurityQuestion1)
                    </div>
                    <div class="editor-field">
                        @Html.TextBoxFor(model => model.CustomSecurityQuestion1, new { @Id="txtCustomSq1"})
                        @Html.ValidationMessageFor(model => model.CustomSecurityQuestion1)
                    </div> 
```

这是我的 jquery/javascript：

```
 <script type="text/javascript">
        $("#ddlSq1").change(function () {
            if ($(this).attr('selectedIndex') == 5)
                $("#customSecurity").css("visibility", "visible");
        });
    </script> 
```

.change 事件根本没有触发。我不知道它可能是什么。我尝试在 html 帮助程序和其他各种东西中将 @ 符号从我的 ID 命名中取出，但仍然没有运气。这里有人看到我的代码有问题吗？

非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T12:56:43.943

首先，您需要在 DOM 准备好时运行您的代码，为此，请将您的代码包装在一个就绪处理程序中：`$(function() { ... }`. 其次，最好检查`value`select 而不是`selectedIndex`，以防将来选项的顺序发生变化。

```
<script type="text/javascript">
    $(function() {
        $("#ddlSq1").change(function () {
            if ($(this).val() == "SQ6")
                $("#customSecurity").css("visibility", "visible");
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:57:28.893

将此代码移动到 $(document).ready()

```
<script type="text/javascript">      
$(document).ready(function(){   
$("#ddlSq1").change(function () {             
if ($(this).attr('selectedIndex') == 5)                
$("#customSecurity").css("visibility", "visible");         
});     
});
</script> 
```

# python - 为什么我不能将 datetime.timedelta 除以浮点数？

> ID：10636104
> 
> 赞同：7
> 
> 时间：2012-05-17T12:52:39.850
> 
> 标签：python, datetime, timedelta

```
>>> import datetime
>>> now1 = datetime.datetime.now()
>>> now2 = datetime.datetime.now()
>>> timedelta = now2-now1
>>> halfdt = timedelta/2  #This works just fine
>>> halfdt = timedelta/2\. #TypeError: unsupported operand type(s) for /: 'datetime.timedelta' and 'float' 
```

有人知道只允许 timedeltas 被整数整除的合理性吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:16:18.037

它实际上很简单——它是一个缺失的功能。

这样做的好处是它已作为一个特性添加到 Python 3.x 中。

[请注意2.x](http://docs.python.org/library/datetime.html#timedelta-objects)和[3.x](http://docs.python.org/py3k/library/datetime.html)中支持的操作表之间的区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:49:48.993

非常有趣——我本来希望这也能奏效。我刚刚用 Python 2.x 中的一些示例/文档测试编写了一个函数。还发布为[ActiveState 配方](http://code.activestate.com/recipes/578136-function-that-supports-dividing-timedelta-by-float/)：

```
import datetime

def divide_timedelta(td, divisor):
    """Python 2.x timedelta doesn't support division by float, this function does.

    >>> td = datetime.timedelta(10, 100, 1000)
    >>> divide_timedelta(td, 2) == td / 2
    True
    >>> divide_timedelta(td, 100) == td / 100
    True
    >>> divide_timedelta(td, 0.5)
    datetime.timedelta(20, 200, 2000)
    >>> divide_timedelta(td, 0.3)
    datetime.timedelta(33, 29133, 336667)
    >>> divide_timedelta(td, 2.5)
    datetime.timedelta(4, 40, 400)
    >>> td / 0.5
    Traceback (most recent call last):
      ...
    TypeError: unsupported operand type(s) for /: 'datetime.timedelta' and 'float'

    """
    # timedelta.total_seconds() is new in Python version 2.7, so don't use it
    total_seconds = (td.microseconds + (td.seconds + td.days * 24 * 3600) * 1e6) / 1e6
    divided_seconds = total_seconds / float(divisor)
    return datetime.timedelta(seconds=divided_seconds)

if __name__ == '__main__':
    import doctest
    doctest.testmod() 
```

# alfresco - 使用 java 实现在 Alfresco 中上传文件

> ID：10636108
> 
> 赞同：2
> 
> 时间：2012-05-17T12:53:04.203
> 
> 标签：alfresco

建议我使用 java 将文件上传到 Alfresco 的任何基本示例。我是 Alfresco 的新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:34:45.333

这是一个使用 Python 和[cmislib](http://chemistry.apache.org/python/cmislib.html)的示例：

```
>>> from cmislib import CmisClient
>>> client = CmisClient('http://cmis.alfresco.com/cmisatom', 'admin', 'admin')
>>> repo = client.defaultRepository
>>> root = repo.rootFolder
>>> someFolder = root.createFolder('someFolder')
>>> someFile = open('test.txt', 'r')
>>> someDoc = someFolder.createDocument('Test Document', contentFile=someFile) 
```

这是一个使用 Java 和[OpenCMIS](http://chemistry.apache.org/java/opencmis.html)的示例：

```
// default factory implementation
SessionFactory factory = SessionFactoryImpl.newInstance();
Map<String, String> parameter = new HashMap<String, String>();

// user credentials
parameter.put(SessionParameter.USER, "Otto");
parameter.put(SessionParameter.PASSWORD, "****");

// connection settings
parameter.put(SessionParameter.ATOMPUB_URL, "http://<host>:<port>/cmis/atom");
parameter.put(SessionParameter.BINDING_TYPE, BindingType.ATOMPUB.value());
parameter.put(SessionParameter.REPOSITORY_ID, "myRepository");

// create session
Session session = factory.createSession(parameter);
Folder root = session.getRootFolder();

// properties
// (minimal set: name and object type id)
Map<String, Object> properties = new HashMap<String, Object>();
properties.put(PropertyIds.OBJECT_TYPE_ID, "cmis:folder");
properties.put(PropertyIds.NAME, "a new folder");

// create the folder
Folder parent = root.createFolder(properties);

String name = "myNewDocument.txt";

// properties 
// (minimal set: name and object type id)
Map<String, Object> properties = new HashMap<String, Object>();
properties.put(PropertyIds.OBJECT_TYPE_ID, "cmis:document");
properties.put(PropertyIds.NAME, name);

// content
byte[] content = "Hello World!".getBytes();
InputStream stream = new ByteArrayInputStream(content);
ContentStream contentStream = new ContentStreamImpl(name, BigInteger.valueOf(content.length), "text/plain", stream);

// create a major version
Document newDoc = parent.createDocument(properties, contentStream, VersioningState.MAJOR); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-03T10:24:15.017

在露天使用 Java 和 OpenCMIS 的示例： [下载 OpenCMIS jars（版本 1.1.0 -> Commodity Packages -> Package -> OpenCMIS Client with dependencies）](http://chemistry.apache.org/java/download.html)

参考[链接](http://34codefactory.blogspot.in/2017/08/upload-file-in-alfresco-using-java-code.html)

```
package com.alfresco;

import java.io.ByteArrayInputStream;
import java.io.InputStream;
import java.math.BigInteger;
import java.util.HashMap;
import java.util.Map;

import org.apache.chemistry.opencmis.client.api.Document;
import org.apache.chemistry.opencmis.client.api.Folder;
import org.apache.chemistry.opencmis.client.api.Session;
import org.apache.chemistry.opencmis.client.api.SessionFactory;
import org.apache.chemistry.opencmis.client.runtime.SessionFactoryImpl;
import org.apache.chemistry.opencmis.commons.PropertyIds;
import org.apache.chemistry.opencmis.commons.SessionParameter;
import org.apache.chemistry.opencmis.commons.data.ContentStream;
import org.apache.chemistry.opencmis.commons.enums.BindingType;
import org.apache.chemistry.opencmis.commons.enums.VersioningState;
import org.apache.chemistry.opencmis.commons.impl.dataobjects.ContentStreamImpl;

public class AlfrescoFileUpload {

  public static void main(String[] args) {

    // default factory implementation
    SessionFactory factory = SessionFactoryImpl.newInstance();
    Map<String, String> parameter = new HashMap<String, String>();

    // user credentials
    parameter.put(SessionParameter.USER, <username>);
    parameter.put(SessionParameter.PASSWORD, <password>);

    // connection settings
    parameter.put(SessionParameter.ATOMPUB_URL, "http://127.0.0.1:8080/alfresco/api/-default-/public/cmis/versions/1.1/atom");
    parameter.put(SessionParameter.BINDING_TYPE, BindingType.ATOMPUB.value());

    // create session
    Session session = factory.getRepositories(parameter).get(0).createSession();
    Folder root = session.getRootFolder();

    // properties
    Map<String, Object> properties = new HashMap<String, Object>();
    properties.put(PropertyIds.OBJECT_TYPE_ID, "cmis:folder");
    properties.put(PropertyIds.NAME, "MyAlfrescoFolder");

    // create the folder
    Folder parent = root.createFolder(properties);

    String name = "NewTextFile.txt";

    // properties
    Map<String, Object> properties2 = new HashMap<String, Object>();
    properties2.put(PropertyIds.OBJECT_TYPE_ID, "cmis:document");
    properties2.put(PropertyIds.NAME, name);

    // content
    byte[] content = "Hello Parth Patel!".getBytes();
    InputStream stream = new ByteArrayInputStream(content);
    ContentStream contentStream = new ContentStreamImpl(name, BigInteger.valueOf(content.length), "text/plain", stream);

    // create a major version
    Document newDoc = parent.createDocument(properties2, contentStream, VersioningState.MAJOR);

    System.out.println("DONE.");

  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T08:42:50.053

在 Web 服务库的帮助下，我们可以使用 java 连接到 alfresco。您可以在下面找到示例代码

```
WebServiceFactory.setEndpointAddress("url");
WebSererviceFactory.setEndpointAddress("url");
        AuthenticationUtils.startSession(prop.getProperty("user"),prop.getProperty("password"));
        System.out.println(AuthenticationUtils.getTicket());
        ContentServiceSoapBindingStub contService =      WebServiceFactory.getContentService(); 
```

创建父引用：

```
 String path = "/app:company_home/cm:dir" + </pre>

        ParentReference parRef = new ParentReference(STORE, null,path,ASSOC_CONTAINS, "{"+ Constants.NAMESPACE_CONTENT_MODEL + "}"+ fileName); </pre>

       parRef.setPath("/app:company_home/cm:vasanpmsrole");
        String name = fileName;
        ContentFormat contentFormat =
                new ContentFormat(mimeType, "UTF-8");
        NamedValue[] properties = new NamedValue[ {Utils.createNamedValue(Constants.PROP_NAME, fileName)};

        CMLCreate create = new CMLCreate("1",parRef, null, null, null,Constants.TYPE_CONTENT, properties);
        CML cml = new CML();
        cml.setCreate(new CMLCreate[]{create});
        UpdateResult[] result =    WebServiceFactory.getRepositoryService().update(cml) ;
        Reference newContentNode =
                result[0].getDestination();
        Content content = contService.write(
                newContentNode, Constants.PROP_CONTENT,
                b, contentFormat);

         strUuid = newContentNode.getUuid(); 
```

在此我使用了以下目录：

*   轴1.4.jar
*   AlfrescoWebService.jar

# php - php上传/下载移动上传的文件

> ID：10636111
> 
> 赞同：0
> 
> 时间：2012-05-17T12:53:14.937
> 
> 标签：php, mysql, upload, download

我的上传/下载过程有一些问题。我的文件作为 BLOB 插入到 mysql 中，但是下载时它会抓取调用 php 页面的 html 标记。在插入数据库之前，我是否需要将上传的文件移动到临时目录？

编辑：当前的 upload.php 文件。仍然获得 html 内容而不是实际文件本身，它仍然被正确命名。

```
 <?php
                    // Make sure an ID was passed DOWNLOAD HANDLER *******
if(isset($_GET['id'])) {
// Get the ID
    $id = intval($_GET['id']); var_dump($id);

    require_once ('../mysqli_connect.php'); //Connect to the db

        // Fetch the file information
        $downloadq = "
            SELECT `file_type`, `size`, `title`, 'content', 'upload_id'
            FROM `upload`
            WHERE `upload_id` =".$id;
        $result = mysqli_query ($dbc, $downloadq); // Run the query

        if($result) {
            // Make sure the result is valid
            if (mysqli_num_rows($result) > 0) {
            // Get the row
                $row = mysqli_fetch_assoc($result);
                //var_dump($row);

                // Print headers
                header("Content-Type: application/msword");
                header("Content-Length: ". $row['size']);
               header("Content-Disposition: attachment; filename=". $row['title']);
               header("Content-Transfer-Encoding: binary");

                // Print data
                echo (stripslashes($row['content']));

            }
            else {
                echo 'Error! No such ID.';
            }

            // Free the mysqli resources
            mysqli_free_result($result);
        }
        else {
            echo "Error! Query failed: <pre>{$dbc->error}</pre>";
        }
        mysqli_close($dbc);
}
                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:30:27.910

```
CREATE TABLE `file` (
    `id`        Int Unsigned Not Null Auto_Increment,
    `name`      VarChar(255) Not Null Default 'Untitled.txt',
    `mime`      VarChar(50) Not Null Default 'text/plain',
    `size`      BigInt Unsigned Not Null Default 0,
    `data`      MediumBlob Not Null,
    `created`   DateTime Not Null,
    PRIMARY KEY (`id`)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:41:33.660

你可以试试这个。在以下行之后

```
echo (stripslashes($row['content'])); 
```

再写一行

```
exit; 
```

也许这会对你有所帮助。

# java - 我无法理解 ORA-01722 背后的原因：无效号码

> ID：10636114
> 
> 赞同：6
> 
> 时间：2012-05-17T12:53:30.967
> 
> 标签：java, oracle, jdbc, prepared-statement, ora-01722

我有一个随机生成的问题（千分之一调用之间的一次）。错误**ORA-01722:**在准备好的语句 Oracle 数据库中执行 sql update 时以随机方式生成无效数字。案件详情如下：

```
try {
        connection = getConnection();
        statement = connection.prepareStatement(sql);
        for (int i = 0; i < params.length; i++) {
            if (params[i] instanceof Date) {
                statement.setTimestamp(i + 1, new Timestamp(((Date) params[i]).getTime()));
            } else if (params[i] instanceof java.util.Date) {
                statement.setTimestamp(i + 1, new Timestamp(((java.util.Date) params[i]).getTime()));
            } else {
                statement.setObject(i + 1, params[i]);
            }
            paramsBuilder.append(": " + params[i]);
        }
        if (logger.isInfoEnabled()) {
            logger.info("Query String  [" + sql + "] [" + paramsBuilder + "]");
            logger.info("Query Parameters [" + paramsBuilder + "]");
        }
        result = statement.executeUpdate();
        if (logger.isInfoEnabled()) {
            logger.info(result + " rows affected");
        }
    } catch (SQLException e) {
        if (logger.isInfoEnabled()) {
            String message = "Failed to execute SQL statment [" + sql + "] with parameters [" + paramsBuilder + "]";
            logger.error(message, e);
        }
        throw new DAOException(e);
    } 
```

日志中的值是这样的：

```
Failed to execute SQL statment [update CUSTOMER_CASE set no_of_ptp=?, no_of_unreached=?,collector_name=? , last_case_status_history_id=?, current_handler=?, handling_start_time=?,due_total_open_amount=?, payment_due_invoice_id =?  where id=?] with parameters [: 0: 0: auto: 5470508: null: null: 0.0: 23410984: 2476739] java.sql.SQLException: ORA-01722: invalid number 
```

通过在 DB 上跟踪查询参数，所有参数都通过 JDBC 驱动程序正确传输，除了参数**23410984**它被替换为值`"<C4>^X* U"`（注意这个值在 char 'u' 之前包含回车！）。我不知道为什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:11:45.190

关键原因是关于`java.sql.SQLException: ORA-01722: invalid number`。
可能字段`last_case_status_history_id`类型为数字，但您的参数为空

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T08:57:08.183

我们有一个类似的问题。我们基于 hibernate 的 java 代码发布了一个准备好的语句来使用 aspectJ 为所有保存操作填写用户信息和“更改原因”。

在 3 个独立的数据库环境 (Oracle 10G) 中，这可以正常工作，但在生产数据库中，有时会失败并出现 ORA-01722 错误。这只发生在数据库服务器上的 cpu 负载接近 100% 时。

在另一个论坛上，我发现了一个关于不传递 Long 对象而是明确对 long 原语进行拆箱的建议。在高负载下进行拆箱时，jdbc 驱动程序或数据库本身似乎存在问题（即使这听起来很疯狂）。测试了各种 jdbc 驱动程序，例如 1.4 和 1.6 版本。

有时失败的代码是：

```
private void execute(final Long userId, final String rfc) {
    Object[] args = new Object[]{ userId, rfc };
    getJdbcTemplate().update("call schema.package.setUserAndRFC(?,?)", args);
} 
```

现在我们更改代码以创建一个显式的preparedStatement，如下所示：

```
private void execute(final Long userId, final String rfc) {
    getJdbcTemplate().update(prepareStatement(userId.longValue(), rfc));
}

private PreparedStatementCreator prepareStatement(final long userId, final String rfc) {
    return new PreparedStatementCreator() {
        @Override
        public PreparedStatement createPreparedStatement(Connection con) throws SQLException {
            PreparedStatement statement = con.prepareStatement("call schema.package.setUserAndRFC(?,?) ");
            statement.setLong(1, userId);
            statement.setString(2, rfc);
            return statement;
        }
    };
} 
```

从那以后，这个问题就没有发生过，即使环境保持不变，使用相同的软件和数据库的高负载也是如此。

我从一位同事那里听说，其中一位 DBA 可以在日志中看到准备好的语句已被数据库接受，但没有为其分配 cpu。（这是有道理的，因为所有 cpu 都会在如此高的负载下忙碌。）可能只是抛出了错误的错误，应该抛出某种“数据库过载”错误或其他东西。更好的是无论如何都不要产生这样的错误。

我想这主要是数据库负载，让 cpu 负载一直达到 100% 一点也不聪明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T14:14:21.277

我试过这个：

```
SELECT DUMP(23410984, 17)
FROM   dual; 
```

得到了这个：

```
Typ=2 Len=5: c4,^X,*,^J,U 
```

这实际上和你得到的一样。类型 2 是`NUMBER`数据类型。

Oracle 文档说明了`DUMP()`函数的第二个参数：

*当且仅当它可以在编译器的字符集中（通常是 ASCII 或 EBCDIC）被解释为可打印字符时，17 将每个字节打印为一个字符。一些 ASCII 控制字符也可以以 ^X 的形式打印。否则，字符将以十六进制表示法打印。所有 NLS 参数都被忽略。*

因此，有时该值似乎不是作为 NUMBER 的内部字节格式而是作为字符串传输的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T05:27:40.547

`java.sql.SQLException: ORA-01722: invalid number`.

我在需要一个数字的列顶部使用 UDF，我得到一个不同的值，它不是一个数字。所以操作失败，抛出无效数字异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T10:03:28.637

有时，当我们使用 IN 子句并将值作为 IN ('1, 2, 3, 4') 传递而不是按照以下方式传递时 IN ('1','2','3','4 ')

# jquery - 自定义样式 jQuery UI 的 Datepicker？

> ID：10636115
> 
> 赞同：0
> 
> 时间：2012-05-17T12:53:31.907
> 
> 标签：jquery, css, datepicker

是否可以使用自定义样式设置 jQuery UI 的 Datepicker 样式但保持相同的功能？例如：

![在此处输入图像描述](../Images/24e691d851da16996453928dd767c545.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T13:20:33.050

你可以用一点 CSS 覆盖。例如，我更改了以下内容：

```
.ui-datepicker td {
    边框：1px 实心#CCC；
    填充：0；
}

.ui-state-default,
.ui-widget-content .ui-state-default,
.ui-widget-header .ui-state-default {
    边框：实心#FFF；
    边框宽度：1px 0 0 1px；
}

```

并立即得到与您想要的更相似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T03:30:54.203

您可以使用以下代码，该代码与您的图像非常相似。 `!important`需要包含以覆盖 JavaScript。感谢上面的亚历克斯，我已经包含了他的答案。

```
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {border: solid #FFF!important;border-width: 1px 0 0 1px!important;}
.ui-datepicker td {border: 1px solid #CCC!important;padding: 0!important}
.ui-datepicker-calendar thead tr th span {font-size: 12px!important;text-transform: uppercase!important;}
.ui-widget-header {background: #2d2d2d!important;border: 0!important}
.ui-datepicker .ui-datepicker-title select {background: #2d2d2d!important; color: #fff!important;font-size: 15px!important;}
.ui-widget-header .ui-icon {background-image: none!important;}
.ui-datepicker .ui-datepicker-title {margin-top: 4px!important;}
#ui-datepicker-div {padding: 0;width: 325px!important;}
.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default, .ui-button, html .ui-button.ui-state-disabled:hover, html .ui-button.ui-state-disabled:active {
    background: linear-gradient(20deg,#e2e2e2,#eeeeee)!important;}
.ui-state-default {font-size: 13px;font-weight: bold!important;}
.ui-datepicker td span, .ui-datepicker td a {padding: 0!important;text-align: center!important;}
.ui-datepicker select.ui-datepicker-month, .ui-datepicker select.ui-datepicker-year {width: 33%!important;padding-left: 22px!important;}
.ui-datepicker th {padding: 0em .3em 0.2em!important;}
.ui-state-hover, .ui-widget-content .ui-state-hover, .ui-widget-header .ui-state-hover, .ui-state-focus, .ui-widget-content .ui-state-focus, .ui-widget-header .ui-state-focus, .ui-button:hover, .ui-button:focus {
    background: #3fadb6!important;
    box-shadow: inset 0px 0px 10px #4ea3ab, inset 0px 0px 20px #2a97a0!important;
    color: #ffffff!important;}
.ui-datepicker table {margin: 0!important;}
.ui-datepicker-next, .ui-datepicker-prev {border: 0!important;}
/*Right Arrow*/
.ui-datepicker .ui-datepicker-next span {width: 0!important;height: 0!important;border-left: 10px solid white!important;
    border-right: 8px solid transparent!important;
    border-bottom: 8px solid transparent!important;
    border-top: 8px solid transparent!important;
}

/*Left Arrow*/
.ui-datepicker .ui-datepicker-prev span {width: 0!important;height: 0!important;border-right: 10px solid white!important;
    border-left: 8px solid transparent!important;
    border-bottom: 8px solid transparent!important;
    border-top: 8px solid transparent!important;
} 
```

# c# - How to upload huge files in DataBase?

> ID：10636117
> 
> 赞同：0
> 
> 时间：2012-05-17T12:53:49.390
> 
> 标签：c#, asp.net, sql-server-2008

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            //Uploading file from Computer to Database(server)
            String filename = "", filetype = "", filesize = "";
            if (FileUpload1.HasFile)
            {
                UploadLogic bl=new UploadLogic();
                filename = FileUpload1.PostedFile.FileName;
                filesize = FileUpload1.PostedFile.ContentLength.ToString();
                filetype = FileUpload1.PostedFile.ContentType;
                byte[] filepath = new byte[FileUpload1.PostedFile.ContentLength];
                FileUpload1.PostedFile.InputStream.Read(filepath, 0, FileUpload1.PostedFile.ContentLength);
                int i = bl.upload_file(filename, filesize, filetype, filepath);
                DataSet ds = new DataSet();
                ds = bl.uploaded_Content();
                ListBox1.DataSource = ds;
                ListBox1.DataTextField = "File_Name";
                ListBox1.DataValueField = "File_Name";
                //Bind your Data
                ListBox1.DataBind();
            }

        } 
```

This code uploads only file which is less than 1MB. If i want to upload huge files its not happening. Can any one tell me Why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:55:33.593

Have a look at [httpRuntime](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)

You need to edit your `web.config`

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="SIZE" />
  </system.web>
</configuration> 
```

By default it will be set to `4096kb`

Anyway, if the file size is reasonably high it will be be a good solution to upload the file into database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T12:57:15.963

编辑您的 web.config

```
<httpRuntime useFullyQualifiedRedirectUrl="true|false"
             maxRequestLength="size in kbytes"
             executionTimeout="seconds"
             minFreeThreads="number of threads"
             minFreeLocalRequestFreeThreads="number of threads"
             appRequestQueueLimit="number of requests"
             versionHeader="version string"/> 
```

源[元素](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)

# android - How to close application shortcut in android?

> ID：10636119
> 
> 赞同：0
> 
> 时间：2012-05-17T12:54:14.630
> 
> 标签：android

Hi i am creating application shortcut to my application. My application shortcut is in the front of home screen. When i close the application at that time how to close/delete application shortcut. I need source code. Please any one help me. Thanks.

Code is here. Help me.

```
Intent shortcutintent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");
shortcutintent.putExtra("duplicate", false);
shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
Parcelable icon = Intent.ShortcutIconResource.fromContext(
    getApplicationContext(), R.drawable.icon);
shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, icon);
shortcutintent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, 
    new Intent(getApplicationContext() , FirstScreenActivity.class));
sendBroadcast(shortcutintent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:09:33.163

要卸载快捷方式，您可以使用 Intent 和`"com.android.launcher.action.UNINSTALL_SHORTCUT"`操作。您还应该`"com.android.launcher.permission.UNINSTALL_SHORTCUT"`在清单中获得许可。

```
Intent uninstallShortcutIntent = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");
uninstallShortcutIntent.putExtra("duplicate", false);
uninstallShortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
uninstallShortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, 
    new Intent(getApplicationContext() , FirstScreenActivity.class));
sendBroadcast(uninstallShortcutIntent); 
```

我没有测试它。从启动器源获取它：[AndroidManifest.xml](https://github.com/android/platform_packages_apps_launcher/blob/master/AndroidManifest.xml)和[UninstallShortcutReceiver](https://github.com/android/platform_packages_apps_launcher/blob/master/src/com/android/launcher/UninstallShortcutReceiver.java) 注意：AFAIK，它可能在某些第三方启动器中不起作用，它不是 Android SDK 的一部分。

# c++ - 检查 bool 是否在混合 C/C++ 中定义

> ID：10636120
> 
> 赞同：12
> 
> 时间：2012-05-17T12:54:14.610
> 
> 标签：c++, c

所以我对我继承的一些代码有疑问。此代码在纯 C 环境中构建良好，但现在我需要使用 C++ 来调用此代码。标题`problem.h`包含：

```
#ifndef _BOOL
typedef unsigned char bool;
static const bool False = 0;
static const bool True = 1;
#endif

struct astruct
{
  bool myvar;
  /* and a bunch more */
} 
```

当我将它编译为 C++ 代码时，我得到`error C2632: 'char' followed by 'bool' is illegal`

如果我将`#include "problem.h"`in包装起来，我会得到同样的错误（我不明白，因为编译为 C 时`extern "C" { ... }`应该没有关键字？）`bool`

我尝试从`#ifndef _BOOL`to删除块`#endif`，并编译为 C++，但出现错误：

`error C2061: C requires that a struct or union has at least one member`
`error C2061: syntax error: identifier 'bool'`

我只是不明白 C++ 编译器如何抱怨重新定义`bool`，但是当我删除重新定义并尝试仅用于`bool`定义变量时，它什么也找不到。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T12:56:05.153

因为`bool`是 C++（但不是 C）中的基本类型，不能重新定义。

你可以用

```
#ifndef __cplusplus
typedef unsigned char bool;
static const bool False = 0;
static const bool True = 1;
#endif 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T12:56:53.143

您可以使用 C99 的`bool`：

```
#ifndef __cplusplus
#include <stdbool.h>
#endif

bool myBoolean; // bool is declared as either C99's _Bool, or C++'s bool data type. 
```

为什么要使用这个？

为了与其他 C99 代码兼容。`_Bool`在 C99 代码中常用，非常有用。它还使您能够拥有布尔数据类型，而无需 typedef 很多东西，因为在幕后，`_Bool`是编译器定义的数据类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:01:10.857

您应该使用`__cplusplus`宏：

```
#ifndef __cplusplus
#ifndef _BOOL
typedef unsigned char bool;
static const bool False = 0;
static const bool True = 1;
#endif
#endif 
```

查看[C++ 常见问题解答的此链接以](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)获取更多详细信息。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-10-09T07:46:58.620

我在VS中也遇到了这个“'char'后跟'bool'是非法的”问题。对我来说，问题是我没有用分号结束我的类声明——我没想到这是问题，因为这是在头文件中，而问题出现在 cpp 文件中！例如：

```
class myClass
{

}; // <-- put the semi colon !! 
```

# arduino - Using Arduino GSM library to switch on IComSat GSM board

> ID：10636122
> 
> 赞同：2
> 
> 时间：2012-05-17T12:54:20.333
> 
> 标签：arduino, gsm, gprs

I program my IComSat board attached to an Arduino Uno. It works, but the Icomsat module needs to be switched on by hand and I want to do that in software.

I using GSM_GPRS_IDE100_v309.zip

I using:

```
digitalWrite(GSM_ON, HIGH);
delay(300); /* spec says 200 should suffice */
digitalWrite(GSM_ON, LOW); 
```

which is supposed to work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:06:59.450

您想查看 GSM.h 文件。默认情况下，GSM_ON 定义为引脚 8，GSM_RESET 定义为引脚 9，但对于 IComSat，情况不同：

```
#define GSM_ON       9 
#define GSM_RESET    8 
```

您可以在原理图（[http://www.komputer.de/wordpress/wp-content/uploads/2012/02/sch-icomsat-v1.1.pdf](http://www.komputer.de/wordpress/wp-content/uploads/2012/02/sch-icomsat-v1.1.pdf)）第 2 页上看到：PERKEY 和 D9 已连接，RESET和 D8

# php - 使用正确的命名约定访问 Zend 中的自定义库

> ID：10636126
> 
> 赞同：0
> 
> 时间：2012-05-17T12:54:37.337
> 
> 标签：php, zend-framework, zend-loader

他谁能告诉我如何访问 ZEND 框架中的库以及 ZEND 中库的正确命名约定是什么。我有以下结构

* * *

```
--application
--docs
--library
    --myLibrary.php (class name is also same)
--public 
```

如何在我的模型中访问这个库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:27:35.090

最好的方法是创建自己的库目录：

```
library
    My
        Library.php
    Zend 
```

将此添加到 ypur index.php：

```
Zend_Loader_Autoloader::getInstance()->registerNamespace('My_'); 
```

并使用这个类：

```
$obj = new My_Library(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:23:07.320

如果您的库实际上是一个名为`myLibrary`stored in的类`library/myLibrary.php`，那么您应该能够将以下内容添加到您的`application/configs/applicatiom.ini`文件中：

```
autoloadernamespaces[] = "myLibrary" 
```

然后你应该能够`myLibrary`使用以下方法实例化一个对象：

```
$lib = new myLibrary(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:21:15.723

好吧，如果您的`library`文件夹在包含路径上，那么您可以`myLibrary`直接使用。

# backup - xcopy /d copy all files every time, even unchanged files

> ID：10636127
> 
> 赞同：1
> 
> 时间：2012-05-17T12:54:38.317
> 
> 标签：backup, xcopy

i try this command line

```
xcopy e:\myfolder /EXCLUDE:excludeList.txt \\192.168.158.15\public\comp\myfolder /E/I/D/R/H/Y 
```

the command copy all files every time even unchanged files i use /d that suppose to copy just newer files.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:04:25.423

一个小测试表明它确实有效。你一定有其他问题...

![在此处输入图像描述](../Images/711e9bc19cc446dc07963e1d9bc42d82.png)

## 编辑

在`netwoek`环境中 - 你应该添加`/z`

![在此处输入图像描述](../Images/baa077162d40dcdc16bf43b69c62c47e.png)

# iphone - iPhone User-Agent

> ID：10636128
> 
> 赞同：1
> 
> 时间：2012-05-17T12:54:39.450
> 
> 标签：iphone, ios, xcode, cocoa

I'm getching content in a universal iOS app using:

```
NSString stringWithContentsOfURL: [ NSURL URLWithString: link ] 
```

... does that send iPhone/iPad user's IP and User-Agent to the server from which its fetching content from?

I *need* it to send at least user-agent so I can detect whether its an iPhone or iPad and optimize the content accordingly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:01:25.043

您可以使用下面的代码通过手动指定要使用的用户代理来确保设备正在发送用户代理。

修改后的报价来自：[https ://stackoverflow.com/a/1533032/716216](https://stackoverflow.com/a/1533032/716216)

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
{
    NSString* userAgent = @"Mozilla/5.0 (iPad; U; CPU OS 3_2 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Version/4.0.4 Mobile/7B334b Safari/531.21.10";
    NSURL* url = [NSURL URLWithString:@"http://www.myWebSite.com/"];
    NSMutableURLRequest* request = [[[NSMutableURLRequest alloc] initWithURL:url]
                                    autorelease];
    [request setValue:userAgent forHTTPHeaderField:@"User-Agent"];

    NSURLResponse* response = nil;
    NSError* error = nil;
    NSData* data = [NSURLConnection sendSynchronousRequest:request
                                         returningResponse:&response
                                                     error:&error];
} 
```

**注意：**我列出的示例用户代理可能已经过时，您可能需要找到更新的用户代理。

# ios - iOS FFT Accerelate.framework draw spectrum during playback

> ID：10636134
> 
> 赞同：14
> 
> 时间：2012-05-17T12:55:11.100
> 
> 标签：ios, fft, frequency, spectrum

UPDATE 2016-03-15

## Please take a look at this project: [https://github.com/ooper-shlab/aurioTouch2.0-Swift](https://github.com/ooper-shlab/aurioTouch2.0-Swift). It has been ported to Swift and contains every answer you're looking for, if you cam here.

* * *

I did a lot of research and learned a lot about FFT and the Accelerate Framework. But after days of experiments I'm kind of frustrated.

I want to display the frequency spectrum of an audio file during playback in a diagram. For every time interval it should show the magnitude in db on the Y-axis (displayed by a red bar) for every frequency (in my case 512 values) calculated by a FFT on the X-Axis.

The output should look like this: ![enter image description here](../Images/56788f4b4470f0580a793f716375f60f.png)

I fill a buffer with 1024 samples extracting only the left channel for the beginning. Then I do all this FFT stuff.

Here is my code so far:

Setting up some variables

```
- (void)setupVars  
{  
    maxSamples = 1024;

    log2n = log2f(maxSamples);  
    n = 1 << log2n;  

    stride = 1;  
    nOver2 = maxSamples/2;  

    A.realp = (float *) malloc(nOver2 * sizeof(float));  
    A.imagp = (float *) malloc(nOver2 * sizeof(float));  
    memset(A.imagp, 0, nOver2 * sizeof(float));

    obtainedReal = (float *) malloc(n * sizeof(float));  
    originalReal = (float *) malloc(n * sizeof(float));

    setupReal = vDSP_create_fftsetup(log2n, FFT_RADIX2);  
} 
```

Doing the FFT. FrequencyArray is just a data structure that holds 512 float values.

```
- (FrequencyArry)performFastFourierTransformForSampleData:(SInt16*)sampleData andSampleRate:(UInt16)sampleRate   
{  
    NSLog(@"log2n %i n %i,  nOver2 %i", log2n, n, nOver2);

    // n = 1024
    // log2n 10
    // nOver2 = 512

    for (int i = 0; i < n; i++) {
        originalReal[i] = (float) sampleData[i];
    }

    vDSP_ctoz((COMPLEX *) originalReal, 2, &A, 1, nOver2);

    vDSP_fft_zrip(setupReal, &A, stride, log2n, FFT_FORWARD);

    float scale = (float) 1.0 / (2 * n);

    vDSP_vsmul(A.realp, 1, &scale, A.realp, 1, nOver2);
    vDSP_vsmul(A.imagp, 1, &scale, A.imagp, 1, nOver2);

    vDSP_ztoc(&A, 1, (COMPLEX *) obtainedReal, 2, nOver2);

    FrequencyArry frequencyArray;

    for (int i = 0; i < nOver2; i++) {
        frequencyArray.frequency[i] = log10f(obtainedReal[i]); // Magnitude in db???
    }

    return frequencyArray;  
} 
```

The output looks always kind of weird although it some how seems to move according to the music.

I'm happy that I came so far thanks to some very good posts here like this: [Using the apple FFT and accelerate Framework](https://stackoverflow.com/questions/3398753/using-the-apple-fft-and-accelerate-framework)

But now I don't know what to do. What am I missing?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T13:29:04.007

首先，您没有在 FFT 之前应用[窗口函数](http://en.wikipedia.org/wiki/Window_function)- 这将导致由于[频谱泄漏](http://en.wikipedia.org/wiki/Spectral_leakage)而导致频谱拖尾。

其次，您只是使用 FFT 输出箱的实部来计算 dB 幅度 - 您需要使用复数幅度：

```
magnitude_dB = 10 * log10(re * re + im * im); 
```

# svn - 最有效地获取批量 SVN 日志信息

> ID：10636146
> 
> 赞同：0
> 
> 时间：2012-05-17T12:55:37.970
> 
> 标签：svn, scripting, code-analysis

我正在寻找一种方法来估计哪个开发人员为 SVN 存储库中的每个文件贡献了最多的代码。到目前为止，我能想到的唯一方法是获取每个文件的 svn 日志，解析第一行，然后写入所有这些条目。问题是为每个文件单独获取完整日志效率非常低并且需要大量时间。

1.  有没有办法获取一个文件夹的所有日志条目，还有文件名？如果您要求文件夹日志，默认的 svn 操作似乎没有指定哪个日志条目属于哪个文件。
2.  或者，有没有办法在存储库上执行这种批量查询？

欢迎使用 svn 命令行工具或编程语言绑定回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:13:00.503

如果您只想知道哪个用户更改了每个修订版的哪些文件（不关心更改量），您可以使用`-v`带有`svn log`. 这也适用于完整的工作目录 - 以及远程存储库。

您可能还想使用命令行选项`--xml`。这简化了大多数编程环境的解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:27:47.303

哦，男孩，这将是一个有趣的统计数据。

如果您使用这种方法对开发人员进行排名，您将鼓励您的开发人员进行大量更改和代码。这会用于奖金吗？Dilbert 的牛工 Wally 会喜欢这个。他会在下午 4 点之前给自己写一辆法拉利。但是，如果你坚持...

无需解析每个文件，您只需从您感兴趣的项目的根目录中获取日志，并传递您想要的修订范围。

这将为您提供提交每个修订的开发人员的姓名。这是一个例子：

```
$ svn log -r1:HEAD http://server/svn/project 
------------------------------------------------------------------------
r1 | david | 2011-07-12 15:18:33 -0400 (Tue, 12 Jul 2011) | 1 line

Adding directories
------------------------------------------------------------------------
r2 | bob | 2011-07-12 15:19:20 -0400 (Tue, 12 Jul 2011) | 1 line

Adding property
------------------------------------------------------------------------
r3 | mark | 2011-08-21 10:33:51 -0400 (Sun, 21 Aug 2011) | 1 line 
```

如果你也想要文件名，你可以使用`--verbose`参数：

```
$ svn log -r1:HEAD --verbose http://server/svn/project
------------------------------------------------------------------------
r1 | david | 2011-07-12 15:18:33 -0400 (Tue, 12 Jul 2011) | 1 line
Changed paths:
   A /branches
   A /tags
   A /trunk

Adding directories
------------------------------------------------------------------------
r2 | bob | 2011-07-12 15:19:20 -0400 (Tue, 12 Jul 2011) | 1 line
Changed paths:
   M /trunk

Adding property
------------------------------------------------------------------------
r3 | mark | 2011-08-21 10:33:51 -0400 (Sun, 21 Aug 2011) | 1 line
Changed paths:
   A /trunk/subversion
   A /trunk/subversion/control.ini
   A /trunk/subversion/pre-commit-kitchen-sink-hook.html
   A /trunk/subversion/pre-commit-kitchen-sink-hook.pl
   A /trunk/subversion/svn-watch.html
   A /trunk/subversion/svn-watch.pl

Adding files
------------------------------------------------------------------------ 
```

* * *

但是，如果您***真的***想知道谁是最有生产力的程序员，请不要看代码。与效率低下的同事相比，高效的开发人员编写的代码更少。优秀的开发人员将以有效的方式组织代码流，因此几乎没有需要注意的异常，而糟糕的开发人员可能会采取错误的策略，然后必须处理其基本规则的所有异常。

高效的开发人员会修复包含错误的一个文件，而不是更改数十个文件来试图追踪错误。事实上，一个真正优秀的开发人员甚至可能会认识到可以通过修改环境设置而不是代码来解决问题。

You want to figure out who's pulling their weight in the development arena, look at your issue tracking system. Who is working on the biggest issues and turning them around the quickest? Who adds a feature without causing a cascade of bugs?

A programmers job is to solve problems, not to sling code.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:16:02.937

您可以尝试相反的方法：`svn log --xml -v`在存储库根目录运行将输出 XML 格式的完整日志，包括更改路径。然后你解析它并收集你的统计数据。

# javascript - Recolorable SVG icons in a web page?

> ID：10636147
> 
> 赞同：1
> 
> 时间：2012-05-17T12:55:39.403
> 
> 标签：javascript, html, svg, jquery-svg

I'm writing a quite complicated, big and long living (it might display for many days) web page that will also need icons. These icons are supposed to be SVG graphics. Depending on the place on the page the SVG should be recolored by JavaScript calls (jQuery or even jQuery-SVG is fine).

So my questions are:

*   What's the best way to include the SVG in the web page?
    *   `<img>`
    *   `<object>`
    *   `jQuery(...).svg({loadUrl:...})`
    *   ...
*   How to "multiply" them?
    *   Pre-load in a hidden `<div>` and clone()?
    *   Just load on demand?
*   What's the best way to setup the SVG? (All icons in one file on different layers? All icons in one file separated by place? One file per icon?)
*   What's the best way to recolor the icons then? (Think of quite abstract icons consisting out of a line graphic where that line should get a different color)

Required browsers are the usual compliant modern ones (Firefox, Chrome, Opera, Safari) for normal PC as well as mobile (Android, iOS). Internet Explorer compatability is not required.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:48:58.087

如果你想重新着色，那么马上就`<img>`出来了，因为你不能在外部或内部使用 javascript 更改图像。

如果您放置克隆数据，那么您需要确保任何 id 属性在单个文档中保持唯一，因此可能拥有`<object>`对您来说最简单的东西。

您可以使用直接的 DOM 调用来更改 SVG 图形中事物的颜色，也可以根据需要使用 jquery。

剩下的你可能不得不尝试一些事情，看看它们是如何为你工作的。

# mysql - MySQL - 如何在 INSERT 语句中将字符串值解析为 DATETIME 格式？

> ID：10636152
> 
> 赞同：47
> 
> 时间：2012-05-17T12:56:02.417
> 
> 标签：mysql, datetime, insert

我有一个`MySQL database`, 列是日期类型`DATETIME`。

我从外部应用程序获取日期/时间的字符串值。该字符串值如下所示：

```
'5/15/2012 8:06:26 AM' 
```

MySQL 在 INSERT: 上抛出错误`"Error. Incorrect datetime value"`。我的解决方法是将列类型更改为`VARCHAR`，这可行，但我确实需要将数据作为适当的日期和时间以供将来使用。

我研究了可接受的`MySQL DATETIME`值格式，发现`MySQL`希望`DATETIME`格式为`'YYYY-MM-DD HH:MM:SS'`.

我无法更改外部应用程序以重新格式化日期/时间字符串的格式，所以我唯一的机会就是处理它。

我认为，我需要做的是`MySQL syntax`在我的`INSERT`语句中使用 , 解析现有字符串，但我不知道该怎么做。我有一些想法，我需要使用一个`SELECT`子句，也许`STR_TO_DATE`，以某种方式与我的 INSERT 语句结合使用。

这是我当前的 INSERT 语句。我删除了其他不会导致问题的字段，只是为了使示例干净。

```
INSERT INTO tblInquiry (fldInquiryReceivedDateTime) VALUES ('5/15/2012 8:06:26') 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-17T13:04:32.133

使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数来解析您尝试插入的字符串：

```
INSERT INTO tblInquiry (fldInquiryReceivedDateTime) VALUES
  (STR_TO_DATE('5/15/2012 8:06:26 AM', '%c/%e/%Y %r')) 
```

# php - How can I know whch web site loads my image?

> ID：10636153
> 
> 赞同：1
> 
> 时间：2012-05-17T12:56:04.313
> 
> 标签：php

I have created some free HTML Templates, to share them for free, but I would like to know where my templates are installed.

What I have in my mind, in order to track the template installation, is to create a php script that will generate a single pixel image. I would like to use that image to collect information about the web site that loads my picture.

So, how can I know which server is requesting my image? Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:03:12.323

尝试使用`$_SERVER['HTTP_HOST']`. 或者如果你需要别的东西，试试这里：[http ://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:04:28.143

当您生成单像素图像时，请包含您感兴趣的信息，例如此类。然后检查您的服务器日志。

```
echo '<img src="onepixel.png?servedby='.$_SERVER['HTTP_HOST'].">'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T13:05:06.623

显然，您所做的任何事情都可能被删除，因为一旦获得您的模板代码，用户就可以删除引用以追溯您的脚本。

从服务器加载像素会起作用，您可以访问 $_SERVER 中的数据以查找有关请求的一些信息并寻找引荐来源网址。

一个更好的主意，IMO，是编写一些存在于您的服务器上的 JavaScript 代码，并通过`<script src="..."></script>`您的模板上的标签包含在内。这将允许您通过动态创建图像源标签来“打电话回家”，以将此像素发送到您的服务器，并提供有关源的更多信息。

例如，您可以像这样简单：

```
(function()
{
    var img = document.createElement('img'),
    src = "//www.yourserver.com/path/to/pixel.php?domain=" + document.domain;

    img.src = src;
})(); 
```

这将向您的服务器触发一个像素，并包含加载您的模板的域。您可以添加更多代码来识别浏览器，唯一地跟踪用户 - 看看网站正在获得什么样的流量，无论如何。

确保您不使用任何 3rd 方 JS 库，因为您不想在站点上注入依赖项/增加加载时间。

# user-interface - 适用于 iPhone/Android 的 Windows GUI 构建器？

> ID：10636174
> 
> 赞同：0
> 
> 时间：2012-05-17T12:57:02.047
> 
> 标签：user-interface, build

我没有智能手机，需要为应用程序构建模型来解释我的想法。

是否有适用于 Windows 的良好 GUI 构建器，以便我可以构建看起来像在 iPhone 或 Androphone 上运行的应用程序的屏幕截图的逼真模型？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T17:16:08.917

你没有说你是否希望你的模拟是现场的，但你说的是“截图”而不是“演示”，所以我认为不是。在那种情况下，Visio 呢？您可以拿起一组 iPhone 模板（例如[本文中的](http://willhacker.net/2011/09/17/iphone-stencils-for-visio/)模板）然后离开。

# iphone - 具有透明背景的 OpenGL ES 2.0 GLKit

> ID：10636176
> 
> 赞同：13
> 
> 时间：2012-05-17T12:57:20.950
> 
> 标签：iphone, ios, opengl-es, glkit

有没有办法使 GLKView 的背景透明？我在[这里](https://stackoverflow.com/questions/3193607/is-it-possible-to-make-an-opengl-es-layer-transparent)尝试了解决方案，但这对我不起作用。

*编辑：我需要帮助使其完全透明。背景大多是白色和灰色，但我只是用更鲜艳的颜色测试了它，果然你可以隐约看到背景。任何想法为什么它会部分透明但不完全使用以下代码？

这是我的视图控制器中的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.context = [[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2] autorelease];
    CAEAGLLayer *eaglLayer = (CAEAGLLayer *)self.view.layer;
    eaglLayer.opaque = NO;

    if (!self.context) {
       NSLog(@"Failed to create ES context");
    }

    GLKView *view = (GLKView *)self.view;
    view.context = self.context;

    view.backgroundColor = [UIColor clearColor];

    view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

    [self setupGL];
}

- (void)setupGL
{
    [EAGLContext setCurrentContext:self.context];

    self.effect = [[[GLKBaseEffect alloc] init] autorelease];
    self.effect.light0.enabled = GL_FALSE;
    self.effect.light0.diffuseColor = GLKVector4Make(1.0f, 0.4f, 0.4f, 0.0f);
    self.effect.light0.ambientColor = GLKVector4Make(1.0f, 0.4f, 0.4f, 0.0f);

    glDisable(GL_DEPTH_TEST);

    glGenVertexArraysOES(1, &_vertexArray);
    glBindVertexArrayOES(_vertexArray);

    glGenBuffers(1, &_vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexData), vertexData, GL_DYNAMIC_DRAW);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, VERTEX_POS_DATA_SIZE, GL_FLOAT, GL_FALSE, VERTEX_DATA_SIZE * sizeof(GLfloat), BUFFER_OFFSET(0));

    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, VERTEX_COLOR_DATA_SIZE, GL_FLOAT, GL_FLOAT, VERTEX_DATA_SIZE * sizeof(GLfloat), BUFFER_OFFSET(VERTEX_POS_DATA_SIZE * sizeof(GLfloat)));    

    glLineWidth(10.0);
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    if (!needsRedraw) return;
    needsRedraw = NO;

    glClearColor(0.65f, 0.65f, 0.65f, 0.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    [self.effect prepareToDraw];

    glDrawArrays(GL_LINE_STRIP, 0, vertexCount);    
} 
```

我尝试将 backgroundColor 设置为 [UIColor clearColor] 并将 eaglLayer 设置为不透明。哎呀，我什至尝试将 eaglLayer 的 backgroundColor 设置为不透明度为 0 的 CGColorRef。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T17:48:15.763

好吧，我认为这无关紧要，因为 alpha 已经是 0.0f，但是当我改变时

```
glClearColor(0.65f, 0.65f, 0.65f, 0.0f); 
```

至

```
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); 
```

它使背景完全透明。

感谢大家的建议和帮助！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-08T12:29:05.557

对我来说，它有助于使视图不透明：

```
view.opaque = NO 
```

除了具有透明度的 glClearColor 调用之外。

0.5f 的透明度将背景完美地融合到另一个具有一半不透明度的 UIImageview 上。

# linq - 如何在 LINQ 查询中仅显示日期时间字段的日期部分？

> ID：10636177
> 
> 赞同：0
> 
> 时间：2012-05-17T12:57:25.303
> 
> 标签：linq, linq-to-sql, datetime

我在数据库中有一个日期时间字段，检索时应该只显示没有时间的日期。你能告诉我怎么做吗？这是我写的查询：

```
 var queryProductEventCustomers = (from r in DbContext.ProductEventCustomers
                                      from s in DbContext.CustomerProducts
                                      where r.Customers_Id == customerID && r.Customers_Id 
                                      == s.Customers_Id && s.Products_Id == productID
                                      select new
                                            {
                                               r.Id,
                                               r.Customers_Id,
                                               r.StartTime 
```

开始时间是一个日期时间字段。那么，你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:14:33.943

使用[`ToShortDateString()`](http://msdn.microsoft.com/en-us/library/system.datetime.toshortdatestring.aspx)DateTime 上的方法。

```
select new
{
     Id = r.Id,
     Customers_Id = r.Customers_Id,
     Date = r.StartTime.ToShortDateString()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:03:38.093

只需选择日期部分：

```
select new
{
     Id = r.Id,
     Cust_id = r.Customers_Id,
     Date = r.StartTime.Date
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:06:48.747

尝试这个

```
select new
{
     ID = r.Id,
     CustomerID = r.Customers_Id,
     StartDate = r.StartTime.ToString("dd/MM/yyyy")
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:09:05.470

使用短日期格式：

```
r.StartTime.ToString("d", DateTimeFormatInfo.InvariantInfo) 
```

[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

该链接向您展示了如何使用所有标准日期和时间格式。

# php - PHP撇号/单引号模式匹配

> ID：10636183
> 
> 赞同：2
> 
> 时间：2012-05-17T12:57:48.150
> 
> 标签：php, parsing

在某些 php 中存在单引号/撇号问题，我正在编写以解析表情符号。

单引号是我生命中的祸根，但在这里。

首先这里是一些代码...

首先我的数组包含笑脸和笑脸的文件名。

这是一个单独的文件 (smiley-map.php)。

```
<?php 
$smilies = array (
array('code' => ':)', 'filename' => 'smiley.gif'),
array('code' => ':(', 'filename' => 'sad.gif'),
array('code' => ';)', 'filename' => 'wink.gif'),
array('code' => ':D', 'filename' => 'grin.gif'),
array('code' => ';D', 'filename' => 'cheesy.gif'),
array('code' => '>:-(', 'filename' => 'angry.gif'),
array('code' => ':O', 'filename' => 'shocked.gif'),
array('code' => '8)', 'filename' => 'cool.gif'),
array('code' => '???', 'filename' => 'huh.gif'),
array('code' => '::-)', 'filename' => 'rolleyes.gif'),
array('code' => ':P', 'filename' => 'tongue.gif'),
array('code' => ':-[', 'filename' => 'embarrassed.gif'),
array('code' => ':*', 'filename' => 'lipsrsealed.gif'),
array('code' => ':-/', 'filename' => 'undecided.gif'),
array('code' => ':x', 'filename' => 'kiss.gif'),
array('code' => ':\'(', 'filename' => 'cry.gif'),
array('code' => '>:-D', 'filename' => 'evil.gif'),
array('code' => '^-^', 'filename' => 'azn.gif'),
array('code' => 'O0', 'filename' => 'afro.gif'),
array('code' => 'LOL', 'filename' => '2funny.gif'),
array('code' => ':bash:', 'filename' => 'knuppel2.gif'),
array('code' => '>_<', 'filename' => 'tickedoff.gif'),
array('code' => ':?', 'filename' => 'idiot.gif'),
array('code' => ':!', 'filename' => 'uglystupid.gif'),
);
?> 
```

然后我以这样的简单方式解析它们：

```
 <?php
 function parseSmilies($string)
 {
require_once("smilies/smiley-map.php");

for ($i = 0; $i < count($smilies); $i++)
{
    $filename = '<img src="smilies/' . $smilies[$i]['filename'] . '" alt="smiley" title="' . $smilies[$i]['code'] . '" />';
    $string = str_replace($smilies[$i]['code'], $filename, $string);
}
return $string;
 }
 ?> 
```

所以它去了......包括微笑地图......现在可用的数组......搜索代码的字符串......交换图像标签的代码。

这一切在我的本地机器（XAMPP）上运行良好。但是当我上传并在我的服务器中运行它时，它错过了哭泣：'(

我想这是引起问题的单引号，尽管我已经在数组中对其进行了转义..

大概有一些 PHP 设置会影响这个？

有人可以建议吗？

非常感谢。

**编辑： $string 来自 $_POST**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:30:11.827

这可能与[魔术行情](http://php.net/manual/en/security.magicquotes.php "PHP：魔术行情")有关。
在您的 PHP 服务器中打开*Magic Quotes*`'`时，所有超全局变量（`$_GET`等`$_POST`）中的 都会`\'`被`"`替换为`\"`. 自 PHP 5.3.0 起，该机制已被弃用，自 PHP 5.4.0 起已被移除。

然而，大多数网络托管服务器甚至还没有 PHP 5.3.0，而像 XAMPP 这样的私有服务器可能有更新版本的 PHP。因此，您的本地主机可能不会打开*Magic Quotes ，而您的网络服务器会。*

*当将超全局值直接包含到查询中时， Magic Quotes*使得无法执行 SQL 注入。例如：

```
<?php

$query = 'SELECT id FROM users WHERE name = "' . $_POST['name'] . '" AND password = "' . $_POST['password'] . "'";

?> 
```

`1" OR "1" = "1`在字段中输入 a 的人`password`可以轻松地将查询更改为`SELECT id FROM users WHERE name = "admin" AND password = "1" OR "1" = "1"`在不知道密码的情况下有效地登录管理员帐户。

* * *

也就是说，我认为*Magic Quotes*只是人们不保护他们的输入的一种后备机制，你应该始终将其关闭。更好的做法是保护您自己的应用程序，而不是让 PHP 来做。

## 禁用魔术行情

这可以使用来完成，`php.ini`但我想您无权访问托管服务器上的该文件。以下代码段模拟禁用*Magic Quotes*：

```
<?php

if( get_magic_quotes_gcp( ) )
{
    function stripslashes_deep( $val )
    {
        return is_array( $val ) ? array_map( 'stripslashes_deep', $val )
                                : stripslashes( $val );
    }

    $_GET     = stripslashes_deep( $_GET );
    $_POST    = stripslashes_deep( $_POST );
    $_COOKIE  = stripslashes_deep( $_COOKIE );
    $_REQUEST = stripslashes_deep( $_REQUEST );
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:07:38.527

> 我想这是引起问题的单引号，尽管我已经在数组中对其进行了转义..

不，不是的。事实并非如此。

> 大概有一些 PHP 设置会影响这个？

不，没有影响它的 PHP 设置。

> 有人可以建议吗？

您应该在发布之前开始编写单元测试并测试您的代码。例如，您会发现您的函数只工作一次。下次调用时，替换对不再定义（`require_once`触发）。

在这个问题旁边，我可以想象你的实时系统上的数据与你的本地系统不同。如果您对本地系统上的相同数据执行该功能，您应该会发现它不能正常工作。

提示：

1.  给予什么`var_dump($string)`？
2.  [`strtr`](http://php.net/strtr).

# sql - 为 SQL Server 中的特定记录生成脚本

> ID：10636186
> 
> 赞同：8
> 
> 时间：2012-05-17T12:58:04.937
> 
> 标签：sql, sql-server-2008

这可能是一个有限但有价值的场景。我有一个带有数百万条记录的表的 SQL Server 2008 数据库。一些记录似乎存在间歇性问题。我正在尝试重现问题。为了做到这一点，我终于得到了违规记录的 ID。我想在我的 PROD 数据库中生成与这条记录相关联的 INSERT 语句。然后我可以轻松地将它迁移到我的 TESTING 数据库中，以便重现和解决问题。

基本上，我需要从我知道记录的主键值的单个表中为单个记录生成单个 INSERT 语句。

有人对我如何做到这一点有任何想法吗？本质上，我想根据条件生成插入语句。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:13:12.970

`SELECT`首先尝试使用语句重新创建要插入的内容。

之后，您可以像这样插入表中`INSERT INTO`：

```
INSERT INTO tablename
SELECT .... 
```

* * *

如果它们在不同的服务器上，您可以像这样使用 INSERT：

```
INSERT INTO tablename VALUES (...) 
```

使用`SELECT`其他服务器中给出的值填充插入中的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T14:19:33.170

在您的具体情况下，我认为您可以这样做：

```
CREATE PROCEDURE dbo.GenerateSingleInsert
    @table     NVARCHAR(511), -- expects schema.table notation
    @pk_column SYSNAME,       -- column that is primary key
    @pk_value  INT            -- change data type accordingly
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @cols   NVARCHAR(MAX), @vals   NVARCHAR(MAX),
            @valOut NVARCHAR(MAX), @valSQL NVARCHAR(MAX);

    SELECT @cols = N'', @vals = N'';

    SELECT @cols = @cols + ',' + QUOTENAME(name),
           @vals = @vals + ' + ' + REPLICATE(CHAR(39),3) + ',' 
            + REPLICATE(CHAR(39),3) + ' + ' + REPLICATE(CHAR(39),2) + '+'
            + 'RTRIM(' + CASE WHEN system_type_id IN (40,41,42,43,58,61) THEN
             'CONVERT(CHAR(8), '  + QUOTENAME(name) + ', 112) + '' '' 
            + CONVERT(CHAR(14), ' + QUOTENAME(name) + ', 14)'
            ELSE 'REPLACE(' + QUOTENAME(name) + ','''''''','''''''''''')' END + ') 
            + ' + REPLICATE(CHAR(39),2)
      FROM sys.columns WHERE [object_id] = OBJECT_ID(@table)
      AND system_type_id <> 189 -- can't insert rowversion
      AND is_computed = 0;      -- can't insert computed columns

    SELECT @cols = STUFF(@cols, 1, 1, ''),
           @vals = REPLICATE(CHAR(39), 4) + ' + ' + STUFF(@vals, 1, 13, '') 
            + REPLICATE(CHAR(39), 2);

    SELECT @valSQL = N'SELECT @valOut = ' + @vals + ' FROM ' + @table + ' WHERE '
        + QUOTENAME(@pk_column) + ' = ''' + RTRIM(@pk_value) + ''';';

    EXEC sp_executesql @valSQL, N'@valOut NVARCHAR(MAX) OUTPUT', @valOut OUTPUT;

    SELECT SQL = 'INSERT ' + @table + '(' + @cols + ') SELECT ' + @valOut;
END
GO 
```

所以让我们尝试一下：

```
CREATE TABLE dbo.splunge
(
    ID INT, dt DATETIME, rv ROWVERSION, t NVARCHAR(MAX)
);

INSERT dbo.splunge(ID, dt, t)
          SELECT 1, GETDATE(), 'foo'
    UNION ALL SELECT 2, GETDATE(), 'bar'
    UNION ALL SELECT 3, GETDATE(), 'O''Brien';

EXEC dbo.GenerateSingleInsert N'dbo.splunge', N'ID', 1;

SQL
-------------
INSERT dbo.splunge([ID],[dt],[t]) SELECT '1','20120517 10:07:07:330','foo'

EXEC dbo.GenerateSingleInsert N'dbo.splunge', N'ID', 2;

SQL
-------------
INSERT dbo.splunge([ID],[dt],[t]) SELECT '2','20120517 10:07:07:330','bar'

EXEC dbo.GenerateSingleInsert N'dbo.splunge', N'ID', 3;

SQL
-------------
INSERT dbo.splunge([ID],[dt],[t]) SELECT '3','20120517 10:07:07:330','O''Brien' 
```

如果有 IDENTITY 列，您可能需要为 TEST 表设置 SET IDENTITY_INSERT ON，并验证没有冲突。我应该提到大约 500 个警告，我还没有测试所有数据类型等。

然而，在更一般的情况下*，*它的作用远不止于此。Vyas K 有一个非常健壮的存储过程，应该可以证明它可以变得多么复杂：

[http://vyaskn.tripod.com/code/generate_inserts_2005.txt](http://vyaskn.tripod.com/code/generate_inserts_2005.txt)

[使用Red-Gate 的 SQL 数据比较之](http://www.red-gate.com/products/sql-development/sql-data-compare/)类的工具来选择特定行并为您生成插入可能会好得多。[正如我在博客中提到](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)的那样，为工具付费不仅仅是为了钱，还在于其他人已经为您完成的故障排除和错误修复的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-16T22:58:03.717

Aaron，我喜欢你的代码，它为我解决了一个问题。我在使用 null 和 text 类型时遇到了一些问题（就像你说的那样），所以我做了一些更改来解决这些问题。

```
ALTER PROCEDURE dbo.GenerateSingleInsert
@table     NVARCHAR(511), -- expects schema.table notation
@pk_column SYSNAME,       -- column that is primary key
@pk_value  INT            -- change data type accordingly
AS
BEGIN
SET NOCOUNT ON;

DECLARE @cols   NVARCHAR(MAX), @vals   NVARCHAR(MAX),
        @valOut NVARCHAR(MAX), @valSQL NVARCHAR(MAX);

SELECT @cols = N'', @vals = N'';

SELECT @cols = @cols + ',' + QUOTENAME(name),
       @vals = @vals + ' + '','' + ' + 'ISNULL('+REPLICATE(CHAR(39),4)+'+RTRIM(' + 
                                        CASE WHEN system_type_id IN (40,41,42,43,58,61) -- datetime types
                                        THEN
                                            'CONVERT(CHAR(8), '  + QUOTENAME(name) + ', 112) + '' ''+ CONVERT(CHAR(14), ' + QUOTENAME(name) + ', 14)'
                                        WHEN system_type_id IN (35) -- text type NOTE: can overflow
                                        THEN
                                            'REPLACE(CAST(' + QUOTENAME(name) + 'as nvarchar(MAX)),'+REPLICATE(CHAR(39),4)+','+REPLICATE(CHAR(39),6)+')' 
                                        ELSE 
                                            'REPLACE(' + QUOTENAME(name) + ','+REPLICATE(CHAR(39),4)+','+REPLICATE(CHAR(39),6)+')' 
                                        END 
                                + ')+' + REPLICATE(CHAR(39),4) + ',''null'') + '

  FROM sys.columns WHERE [object_id] = OBJECT_ID(@table)
  AND system_type_id <> 189 -- can't insert rowversion
  AND is_computed = 0;      -- can't insert computed columns

SELECT @cols = STUFF(@cols, 1, 1, ''),
       @vals = REPLICATE(CHAR(39),2) + STUFF(@vals, 1, 6, '') + REPLICATE(CHAR(39),2) ;

SELECT @valSQL = N'SELECT @valOut = ' + @vals + ' FROM ' + @table + ' WHERE '
    + QUOTENAME(@pk_column) + ' = ''' + RTRIM(@pk_value) + ''';';

EXEC sp_executesql @valSQL, N'@valOut NVARCHAR(MAX) OUTPUT', @valOut OUTPUT;

SELECT SQL = 'INSERT ' + @table + '(' + @cols + ') SELECT ' + @valOut;
END 
```

# java - 从列表中删除一个值 在 java 中抛出 java.lang.UnsupportedOperationException

> ID：10636187
> 
> 赞同：8
> 
> 时间：2012-05-17T12:58:10.350
> 
> 标签：java, list

我想从我的列表中删除特定元素。我不想在遍历列表时这样做。我想指定必须删除的值。在 javadocs 中，我找到了函数`List.remove(Object 0)`这是我的代码：

```
 String str="1,2,3,4,5,6,7,8,9,10";
         String[] stra=str.split(",");
         List<String> a=Arrays.asList(stra);
         a.remove("2");
         a.remove("3"); 
```

但我得到一个例外：`java.lang.UnsupportedOperationException`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T12:59:55.540

问题是`Arrays.asList()`返回一个不支持插入/删除的列表（它只是一个*视图*`stra`）。

要修复，请更改：

```
List<String> a = Arrays.asList(stra); 
```

到：

```
List<String> a = new ArrayList<String>(Arrays.asList(stra)); 
```

这会生成列表的副本，允许您对其进行修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:05:13.630

[http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)

看到这个。Arrays.asList 返回一个固定列表。这是一个不可变的。根据它的定义，一旦创建该对象，您就无法修改它。这就是它抛出不受支持的异常的原因。

# vbscript - 你能告诉我这个错误是什么意思吗？

> ID：10636193
> 
> 赞同：1
> 
> 时间：2012-05-17T12:58:34.737
> 
> 标签：vbscript

你能告诉我为什么我收到以下错误吗？

VBScript 运行时错误：此数组已修复或临时锁定：'temp'

这是生成错误的代码。我不确定如何解决它。

我只是想解压缩 DRY 文件夹中的文件并将其移动到 ACS 文件夹。非常感谢你

```
Set FSO = CreateObject("Scripting.FileSystemObject")
Set fldr = FSO.GetFolder("C:\Ebooks\DRY\")
For Each fil In fldr.Files
    If LCase( Right( fil.Name, 4 ) ) = ".zip" Then
        zipFilePath = fil.Path
        temp = file.Name
        temp = Left( temp, LEN(temp) - 4 ) ' remove the .zip
        temp = Split( temp, "_" ) ' split base name away from month-day-year
        temp = temp( UBOUND(temp) ) ' get just month-day-year
        temp = Split( temp, "-" ) ' get month day and year separately
        mn = CINT(temp(0)) ' get the month number
        dirName = MonthName(mn,True) & temp(2) ' True means get 3 letter abbrev for month
        Response.Write "Unpacking " & fil.Name & " to directory " & dirName & "<br/>" & vbNewLine
        objZip.UnPack zipFilePath, "D:\ACS\" & dirName & "\"
    End If
Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:13:33.957

这是由以下原因引起的：

```
temp = temp(ubound(temp)) 
```

并且可以通过以下方式修复：

```
temp = (temp(ubound(temp))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:28:23.470

虽然您可以使用任意值分配/覆盖数组变量：

```
>> a = Array(1)
>> b = Array(2)
>> a = b
>> b = 4711
>> WScript.Echo Join(a), b
>>
2 4711 
```

您不能将数组元素分配给保存数组本身的变量：

```
>> a = a(0)
>>
Error Number:       10
Error Description:  This array is fixed or temporarily locked
>> a = Array(Array(1), Array(2))
>> a = a(1)
>>
Error Number:       10
Error Description:  This array is fixed or temporarily locked 
```

因此，重新/误用 temp 变量是导致问题的原因之一。“fil”和“file”之间的区别接下来会咬你。

**阅读 Alex K 的回答后**，我意识到您可以避免该错误 10。我**认为**外部 () 是“按值传递我”括号，它在无害分配之前创建原始数组的副本。但我仍然相信使用正确的变量名而不是重复使用变量是更好的方法。

# alert - Java FX 2 警报声

> ID：10636194
> 
> 赞同：8
> 
> 时间：2012-05-17T12:58:41.763
> 
> 标签：alert, javafx-2, audio

如何在 Java FX 2 中播放警报声音？有没有办法使用操作系统默认通知声音？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T09:39:22.170

**使用纯 JavaFX 播放声音**

只需使用`AudioClip`. 这个非常适合只播放单个短音。

**播放默认通知声音**

关于 Windows 操作系统，有一种方法可以通过`java.awt.Toolkit`. 返回的声音属性很简单`Runnable`，可以直接触发，无需担心声源等。

使用下面的示例来查看这两个选项是如何工作的（您必须将“alert.wav”添加到您的 src 文件夹中）。

```
package audioplayer;

import java.awt.Toolkit;
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.VBox;
import javafx.scene.media.AudioClip;
import javafx.stage.Stage;

public class AudioPlayer extends Application {

    private static final AudioClip ALERT_AUDIOCLIP = new AudioClip(AudioPlayer.class.getResource("/alert.wav").toString());

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        VBox root = new VBox();
        Scene scene = new Scene(root, 300, 250);

        Button btn = new Button();
        btn.setText("Play (My Sound)");
        btn.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                AudioPlayer.ALERT_AUDIOCLIP.play();
            }
        });

        Button btn2 = new Button();
        btn2.setText("Play (Windows Default)");
        btn2.setOnAction(new EventHandler<ActionEvent>() {

            @Override
            public void handle(ActionEvent event) {
                final Runnable runnable = (Runnable) Toolkit.getDefaultToolkit().getDesktopProperty("win.sound.default");

                if (runnable != null) {
                    runnable.run();
                }
            }
        });

        root.getChildren().add(btn);
        root.getChildren().add(btn2);

        primaryStage.setScene(scene);
        primaryStage.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-18T18:13:36.277

JavaFX 本身目前没有任何东西可以访问操作系统默认的警报声音（您可以使用 JavaFX 触发事件以播放火并忘记音频剪辑以及跟踪的媒体音频，如 mp3）。

有一个开放的功能请求：[RT-21634](http://javafx-jira.kenai.com/browse/RT-21634)（任何人都可以注册查看 jira）。

您可以通过 awt 发出哔声：

```
Toolkit.getDefaultToolkit().beep(); 
```

根据谷歌搜索，打印一个很好地命名为 007 的哔声字符应该可以工作，但在我的机器上没有 - 我猜它访问机器中的蜂鸣器而不是扬声器系统，并且我的机器不能连接或启用蜂鸣器。

```
System.out.print("\007");
System.out.flush(); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T23:18:38.457

这就是我演奏声音的方式，

```
private void playMedia(Media m){
    if (m != null){
        MediaPlayer mp = new MediaPlayer(m);
        mp.play();
    }
}

public void playSomeSound(){
    try{
        Media someSound = new Media(getClass().getResource("some-sound.mp3").toString());
        playMedia(someSound);
    }catch(Exception ex){
        GeeLogger.error(getClass(), ex.getLocalizedMessage(), ex);
    }

} 
```

虽然不知道 SO 细节。希望能帮助到你。

# visual-studio-2010 - VS2010 中用于“空 C++”项目的附加包含目录

> ID：10636195
> 
> 赞同：3
> 
> 时间：2012-05-17T12:58:51.227
> 
> 标签：visual-studio-2010

我正在使用[libevent](http://libevent.org/)创建一个示例项目（Hello, World！） 。

*（请注意：这个问题与 libevent 无关，但与 Visual Studio 无关。:-)）*

我在外部但在 Visual Studio 环境下单独编译了库。

想用示例代码进行测试，我开始在 VS2010 中创建一个新项目。我选择了`Visual C++ --> General --> Empty Project`。

当我选择项目属性以添加“其他包含目录”时，我找不到 `C/C++`通常添加它的节点。这是它的外观： ![VS2010 中用于空 C++ 项目的附加包含目录](../Images/9f9db1f9b57dc166f545c06edb8219c0.png)

但是，当我选择时，`Visual C++ --> Win32 --> Win32 Console Application`我将能够看到`C/C++`节点并添加其他包含目录。

我阅读[了这篇文章](https://stackoverflow.com/questions/6883276/what-is-the-difference-between-include-directories-and-additional-include-dir)并了解我可以在`VC++ Directories --> Include Directories`. 但是，更改默认设置并不是非常可取的。

有没有其他方法可以在不选择`C++ --> Win32 --> Win32 Console Application`项目的情况下添加其他包含目录？只是想知道。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:00:47.607

您需要至少将一个 .cpp 文件添加到项目中才能看到 C/C++ 设置。否则，作为一个空项目，VS 不知道您使用的是什么语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:01:29.113

你必须有一个 C++ 项目。它不需要是控制台应用程序；您还可以创建静态库 (.lib) 或动态库 (.dll)。

# java - 以动态方式提供的 Java 注释值

> ID：10636201
> 
> 赞同：28
> 
> 时间：2012-05-17T12:59:35.057
> 
> 标签：java, annotations

我想为一些方法生成的一些值提供注释。

到目前为止我试过这个：

```
public @interface MyInterface {
    String aString();
} 
```

* * *

```
@MyInterface(aString = MyClass.GENERIC_GENERATED_NAME)
public class MyClass {

    static final String GENERIC_GENERATED_NAME = MyClass.generateName(MyClass.class);

    public static final String generateName(final Class<?> c) {
        return c.getClass().getName();
    }
} 
```

想法`GENERIC_GENERATED_NAME`是`static final`，它抱怨说

> 注释属性的值`MyInterface.aString`必须是常量表达式

那么如何实现呢？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-17T13:06:49.460

无法动态生成注释中使用的字符串。编译器在编译时评估注解的注解元数据`RetentionPolicy.RUNTIME`，但`GENERIC_GENERATED_NAME`直到运行时才知道。并且您不能将生成的值用于注释，`RetentionPolicy.SOURCE`因为它们在编译时被丢弃，因此这些生成的值*永远不会*被知道。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-12T00:20:31.053

解决方案是改用带注释的方法。调用该方法（使用反射）以获取动态值。

从用户的角度来看，我们有：

```
@MyInterface
public class MyClass {
    @MyName
    public String generateName() {
        return MyClass.class.getName();
    }
} 
```

注释本身将被定义为

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface @MyName {
} 
```

实现对这两个注释的查找非常简单。

```
// as looked up by @MyInterface
Class<?> clazz;

Method[] methods = clazz.getDeclaredMethods();
if (methods.length != 1) {
    // error
}
Method method = methods[0];
if (!method.isAnnotationPresent(MyName.class)) {
    // error as well
}
// This works if the class has a public empty constructor
// (otherwise, get constructor & use setAccessible(true))
Object instance = clazz.newInstance();
// the dynamic value is here:
String name = (String) method.invoke(instance); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-21T15:21:28.660

没有办法像其他人所说的那样动态地修改注释的属性。不过，如果您想实现这一目标，有两种方法可以做到这一点。

1.  将表达式分配给注释中的属性，并在检索注释时处理该表达式。在您的情况下，您的注释可以是

    @MyInterface(aString = "objectA.doSomething(args1, args2)")

当您阅读时，您可以处理字符串并进行方法调用并检索值。Spring 通过 SPEL（Spring 表达式语言）来做到这一点。这是资源密集型的，每次我们想要处理表达式时都会浪费 cpu 周期。如果您使用的是 spring，您可以挂接一个 beanPostProcessor 并处理一次表达式并将结果存储在某处。（可以是全局属性对象，也可以是可以在任何地方检索的地图）。

2.  这是做我们想做的事的一种骇人听闻的方式。Java 存储了一个私有变量，该变量维护类/字段/方法上的注释映射。您可以使用反射并获取该地图。因此，在第一次处理注释时，我们解析表达式并找到实际值。然后我们创建所需类型的注释对象。我们可以将新创建​​的带有实际值（常量）的注解放在注解的属性上，并覆盖检索到的地图中的实际注解。

jdk 存储注解映射的方式取决于 java 版本并且不可靠，因为它没有公开使用（它是私有的）。

您可以在此处找到参考实现。

[https://rationaleemotions.wordpress.com/2016/05/27/changeing-annotation-values-at-runtime/](https://rationaleemotions.wordpress.com/2016/05/27/changing-annotation-values-at-runtime/)

PS：我还没有尝试和测试过第二种方法。

# python - etree对象的所有元素的简单循环？

> ID：10636203
> 
> 赞同：1
> 
> 时间：2012-05-17T12:59:36.970
> 
> 标签：python, lxml

我有一个从 etree 元素返回列表的函数，但它不查看嵌套元素。

```
<elem>
    <variable id="getthis">
        <!-- / -->
    </variable>
    <if>
        <variable id="alsoGetThis">
            <!-- Keep looping through all elements -->
        </variable>
    </if>
</elem> 
```

（我正在使用[Valid XML](http://pastebin.com/vRRxfWiA)）

所以目前里面的变量`<if>`被忽略了，那么你怎么能循环遍历树的所有级别呢？我假设这是一个简单的任务，但也许我错了。（我是 Python 新手，并不总是像程序员一样思考）

Python func 获取变量：

```
def collect_vars(self, elem):
    elemVars = []
    if elem.tag == 'variable':
        elemVars.append(elem.attrib['id'])
    elif e in elem == 'variable': # don't want to be doing these
        elemVars.append(e.attrib['id'])
    return elemVars 
```

所以我想要结束的是`elemVars`包含给定中所有变量ID的列表`<elem>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:05:26.527

考虑学习[XPath](http://www.w3.org/TR/xpath/)并使用`xpath`LXML 的成员。假设您的 XML 树被调用`t`，就好像您已发出

```
>>> s = """<elem>
    <variable id="getthis">
        <!-- / -->
    </variable>
    <if>
        <variable id="alsoGetThis">
            <!-- Keep looping through all elements -->
        </variable>
    </if>
</elem>
"""
>>> t = etree.fromstring(s) 
```

然后你可以找到树中的所有元素

```
>>> t.xpath("//*")
[<Element elem at 0x2809b40>, <Element variable at 0x2809be0>, <Element if at 0x2809af0>, <Element variable at 0x2809c80>] 
```

和所有`variable`元素

```
>>> t.xpath("//variable")
[<Element variable at 0x2809be0>, <Element variable at 0x2809c80>] 
```

`xpath`返回满足您指定的 XPath 条件的元素列表，表示为元素树：

```
>>> [x.attrib["id"] for x in t.xpath("//variable")]
['getthis', 'alsoGetThis'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:30:42.323

您面临的问题是您没有访问文件中的所有节点。您只是在访问元素的子`elem`元素，而不是访问这些元素的子元素。为了说明这一点，运行以下命令（我已将您的 XML 编辑为有效）：

```
from xml.etree.ElementTree as etree

xml_string = """<elem>
    <variable id="getthis" />
    <if>
        <variable id="alsoGetThis" />
    </if>
    </elem>"""

e = etree.fromstring(xml_string)

for node in e:
    print node 
```

结果是

```
<Element variable at 7f53fbdf1cb0>
<Element if at 7f53fbdf1cf8> 
```

所以你没有访问`variable`节点的孩子`if`。您将需要*递归*访问 XML 文件中的每个节点，即您的函数`collect_vars`需要调用自身。我将稍后发布一些代码来说明这一点。

**编辑：**正如所承诺的，一些代码可以从元素树中获取所有`id`属性。我没有像 Niek de Klein 那样使用蓄电池，而是使用了发电机。这有许多优点。例如，这一次返回一个`id`s，因此您可以在任何时候停止处理，例如，如果遇到某个`id`问题，这样可以节省读取整个 XML 文件的时间。

```
def get_attrs(element, tag, attr):
    """Return attribute `attr` of `tag` child elements of `element`."""

    # If an element has any cildren (nested elements) loop through them:
    if len(element):
         for node in element:
            # Recursively call this function, yielding each result:
            for attribute in get_attrs(node, tag, attr):
                yield attribute

    # Otherwise, check if element is of type `tag` with attribute `attr`, if so
    # yield the value of that attribute.
    if element.tag == 'variable':
        if attr in element.attrib:
            yield element.attrib[attr]

ids = [id for id in get_attrs(e, 'variable', 'id')]

print ids 
```

这*产生*了结果

```
 ['getthis', 'alsoGetThis'] 
```

# android - 在我的应用中显示马拉雅拉姆语文本

> ID：10636212
> 
> 赞同：5
> 
> 时间：2012-05-17T13:00:11.453
> 
> 标签：android

> **可能重复：**
> [android中的马拉雅拉姆字体？](https://stackoverflow.com/questions/4930896/malayalam-font-in-android)

我想在我的应用程序中显示马拉雅拉姆语文本，可以吗？我尝试使用来自马拉雅拉姆语的 gont 文件的字体。但它不起作用。有没有其他方法可以做到这一点。请给我一些建议，

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-18T05:19:09.720

将所需的马拉雅拉姆字体放入`assets`应用程序的文件夹中。并且，请按照以下步骤操作 -

*   只需使用以下代码即可使用`TextView`此`Typeface`字体

`Typeface typeFace = Typeface.createFromAsset(getAssets(),"malyalam.fnt");`

*   然后将其添加到您的文本视图中，如下所示

`textView.setTypeFace(typeFace);`

在这里获取您的马拉雅拉姆语字体 -

[马拉雅拉姆字体](http://www.prokerala.com/downloads/fonts.php)和[马拉雅拉姆字体](http://www.wazu.jp/gallery/Fonts_Malayalam.html)

希望这对您有所帮助。

**更新**

我刚刚用一种马拉雅拉姆字体测试了下面的代码。它工作正常。试试那个 -

```
TextView t = (TextView)findViewById(R.id.textView1);

t.setText("മലയാളം");

Typeface typeFace = Typeface.createFromAsset(getAssets(),"AnjaliOldLipi.ttf");

t.setTypeface(typeFace); 
```

# linux - Linux 中生成的零字节 .lis 文件

> ID：10636214
> 
> 赞同：0
> 
> 时间：2012-05-17T13:00:27.660
> 
> 标签：linux, gcc

我在 Linux 中使用 gcc 4.1.2 来编译 C/Pro*C 代码。在 makefile 运行结束时，我发现对于每个编译的源代码，都会生成一个相应的扩展名为 .lis 的零字节文件。（但编译完成时没有任何错误/警告）但是当在 solaris 上运行相同的 makefile 时，不会生成 .lis 文件。可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T22:18:31.093

这是新版本 Pro*C 的一个功能。

`LTYPE=NONE` [您可以通过设置预处理器选项](http://docs.oracle.com/cd/B10501_01/appdev.920/a97269/pc_10opt.htm)来抑制它。

# ios - 捆绑标识符的限制

> ID：10636216
> 
> 赞同：0
> 
> 时间：2012-05-17T13:00:38.793
> 
> 标签：ios, xcode4

我正在构建一个名称以数字而不是字母字符开头的应用程序。Xcode4 坚持将产品名称第一个位置的数字转换为包标识符中的连字符。我知道我可以覆盖 info.plist 文件中的包名称并将 ${PRODUCT_NAME:rfc1034identifier} 替换为诸如 22catch 之类的文字。

如果我这样做，当我将项目上传到应用商店以供批准时，会不会给我带来任何问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:11:30.450

不，它不会产生任何问题。您还可以更改捆绑标识符。不必在 Bundle 标识符中使用 Exact an me of project。你可以使用不同的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:18:02.097

据我所知，当你在 Appstore 中上传时，你会在那里给一个应用程序名称。所以我认为它不会在未来产生任何问题。

# android - Android 与蓝牙打印机的无线连接

> ID：10636217
> 
> 赞同：1
> 
> 时间：2012-05-17T13:00:41.633
> 
> 标签：android, bluetooth

有没有人向我提供一些关于如何从安卓平台（安卓平板电脑）连接蓝牙打印机的信息。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T07:58:41.520

您是要打印到大型桌面打印机还是收据打印机？

如果您正在寻找收据打印机，Star Micronics 有一个 Android SDK，您可以在此处免费下载：http: [//www.starmicronics.com/support/SDKDocumentation.aspx](http://www.starmicronics.com/support/SDKDocumentation.aspx)。

它涵盖了 USB、蓝牙和 wifi/以太网打印。

这个 SDK 有一个非常好的示例应用程序，可让您测试和自定义许多打印机功能以查看它们的运行情况。每个函数都记录在源代码中。命令及其参数也可在应用程序本身中作为快速屏幕参考，这很方便。最重要的是，它有据可查。

如果您使用他们的 SDK，您可以将纯文本与命令一起发送到打印机。API 处理将数据转换为打印机可以理解的内容。

# c# - 使用 Mutex 在特定队列中同步流

> ID：10636219
> 
> 赞同：0
> 
> 时间：2012-05-17T13:00:48.963
> 
> 标签：c#, multithreading, synchronization, mutex

线程有点问题，请告诉我如何解决它或者至少在哪个方向寻找，找了很长时间，但到目前为止没有成功......问题是：有3个线程，他们可以以任意顺序运行 (321;213;123...)。在我们不会运行的任何顺序流程中，它们都需要按照 1、2、3 的顺序运行。为此，请使用带有 ONE 互斥锁的线程同步。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:13:43.880

您应该将变量设置为`0`. 当第一个线程运行时，它将变量设置为`1`. 第二个线程在变量设置为 之前等待`1`，将其设置为`2`并开始工作。第三个也是一样。使用互斥锁同步检查/设置变量。此外，最好使用超时或事件来检查变量。

# jquery - 创建自己的 jQuery 内容滑块/淡入淡出

> ID：10636223
> 
> 赞同：0
> 
> 时间：2012-05-17T13:00:55.740
> 
> 标签：jquery, slider

我不想使用插件，但对 jQuery 很陌生——我有以下 HTML：

```
<div class="slide">
    <a href="http://www.mysite.co.uk"><img src="images/img.jpg" width="920" height="360" /></a>
    </div>

<div class="slide">
    <a href="http://www.mysite.co.uk"><img src="images/img.jpg" width="920" height="360" /></a>
    </div>

<div class="slide">
    <a href="http://www.mysite.co.uk"><img src="images/img.jpg" width="920" height="360" /></a>
    </div> 
```

我已经使用 jQuery 隐藏了除第一个“幻灯片”之外的所有内容：

```
$('.slide:first').siblings().css('display', 'none'); 
```

我现在要做的是通过幻灯片 div 自动前进，所以隐藏第一个 div.slide 并显示第二个然后隐藏它以显示第三个并重复。我看过淡入淡出切换功能，但有点迷茫？

谢谢，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:32:01.470

这应该对您有所帮助。它的基本作用是：

1.  隐藏除第一个幻灯片元素之外的所有元素。
2.  在被调用的函数中，您想要隐藏当前显示的元素并显示下一个元素。这很简单：

这是一个jsfiddle：http: [//jsfiddle.net/lucuma/CXsdP/4/](http://jsfiddle.net/lucuma/CXsdP/4/)

```
function doSlides() {

        var imgIndex = $('#slideshow div:visible').index();

        var imgNext = (imgIndex + 1) % $('#slideshow div').length;

        $('#slideshow div:visible').fadeOut(500);

        $('#slideshow div').eq(imgNext).fadeIn(500);
    }
    $('#slideshow div:gt(0)').hide();

    setInterval(doSlides, 1000); 
```

这是另一种方法：

```
function doSlides() {
    var $imgIndex = $('#slideshow div:visible');

    var $next = $imgIndex.next();

    if ($next.length==0) {
        $next = $('#slideshow >:first-child');   // loop back to first 
    }
    $imgIndex.fadeOut(500);  
    $next.fadeIn(500);
}

$('#slideshow div:gt(0)').hide();

setInterval(doSlides, 1000); 
```

​ ​</p>

# c++ - 动态对象创建

> ID：10636225
> 
> 赞同：0
> 
> 时间：2012-05-17T13:01:10.237
> 
> 标签：c++

我是 C++ 编程新手，我有一个基本问题，我想创建 N 个对象，N 实际上是用户输入。

我特别关注对象名称，比如*beam1*、beam2、...、beamX。

2 快速的事情

1.  是否可以在 C++ 中像这样创建动态对象？
2.  如果是这样，我们该怎么做？我正在粘贴代码供您参考。

    ```
     #include "iostream"
        # include <conio.h>
        using namespace std;

        // Static member variable is defined outside the class..
        class beam {
        public:
        int length;
        };

        int main () 
        {
           int i=0, no_of_spans, j;
           cout<< "Design Of a Continous Beam \n1) No Of Spans : ";
           cin >> no_of_spans;
           for (i =0; i < no_of_spans; i++) {
             j = i;
             beam;
             cout << "Length of Beam" << j+1 << " is : ";
             cin >> beami.length;
           }

           cout << "\nPress any key to continue..\n";
           getch ();
        } 
    ```

这显然是一个有错误的代码，它作为一个例子来理解这个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:13:52.417

正如其他人（Luchian、John、Component 和 Ed）已经说过的那样，您可以使用 a[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)并且它会根据需要动态增长以存储所需的`beam`对象数量。

如果您希望稍后通过名称引用这些对象，您可以将它们存储在 a[`std::map`](http://en.cppreference.com/w/cpp/container/map)中，地图的键是对象名称（例如，beam1、beam2、beam3、...、beamX）：

```
std::map<std::string, beam> beams;
for (int i = 0; i < no_of_spans; i++)
{
    j = i;
    beam beam;
    std::string beam_name("beam" + boost::lexical_cast<std::string>(i + 1));
    cout << "Length of " << beam_name << " is : ";
    cin >> beam.length;
    beams.insert(std::make_pair(beam_name, beam));
} 
```

--

`boost::lexical_cast<>`是一种将（在这种情况下）转换为 a 的`int`机制`std::string`。还有其他方法可以实现这一点（`std::ostringstream`例如使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:03:40.703

您可以使用 a`std::vector`来存储对象。

您用于`push_back`将元素添加到`vector`.

类似于以下内容：

```
std::vector<beams> beamCollection;
for (i =0; i < no_of_spans; i++) {
    j = i;
    beam beami;
    cout << "Length of Beam" << j+1 << " is : ";
    cin >> beami.length;
    beamCollection.push_back(beami);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:06:46.203

是的，当然有可能。有几种方法。

一种方法，如果可能/实用的话，我更喜欢的方法是使用`std::vector`and `push_back`，`transform`或者`generate_n`你需要多少个对象。

另一种方法是使用`new`一个数组来分配你想要的对象。但是，这比使用 a 不太可取`vector`，因为通过使用，`new`您承担了管理内存的责任——需要有一个`delete`对应于每个`new`. 这可以通过使用诸如 的智能指针来缓解`std::unique_ptr`，但通常最好完全避免使用仙人掌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:04:06.550

是的，有可能。您最好的选择是使用适当的 STL 集合并在运行时通过添加/删除对象来动态增长它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:04:48.077

简短回答否 - 编译器需要在编译时知道变量的名称。

您需要使用数组（或向量）。

# python - 无法在 Python 信号处理程序中设置实例属性

> ID：10636228
> 
> 赞同：2
> 
> 时间：2012-05-17T13:01:20.077
> 
> 标签：python, attributes, signals, instance-variables

我有以下代码

```
def signal_handler(self,signum,frame):
            self.kill_received = True
            print "signal received",signum
            self.condition.set()

def mainFunc(self):
     while not self.kill_received:
          * do something * 
```

已经观察到，当实际信号出现时，signal_handler 打印符号，但循环继续。我什至尝试在循环内打印 self.kill_received 值。即使在信号处理程序执行之后，它也显示为假。

此外，如果我在信号处理程序中打印 self.kill_received，我可以看到它已变为 True。但它并没有反映在外面。即使我从信号处理程序调用一个函数，它也反映了 kill_received 的修改值。就好像主进程和信号处理程序有两个并行地址空间或其他东西（不确定，因为我是 Python 新手，它的内部工作原理未知）

有人可以解释 Python 中实例变量的这种行为吗？我尝试使用'global kill_received'，但它给出了“未定义”错误..

这是应要求提供的完整代码

```
 class CreateData(multiprocessing.Process):

     def __init__(self, recv_queue, reportName, reportDirectory, condition, chunkSize = 100, maxReportSize = 350, isChunked = True):
            multiprocessing.Process.__init__(self)
            self.reportName = reportName
            self.reportDirectory = reportDirectory
            self.recv_queue = recv_queue

            self.chunkSize = chunkSize * 1024 * 1024
            self.maxReportSize = maxReportSize * 1024 * 1024
            self.current_chunk_size = 0
            self.isChunked = isChunked
            self.chunk_suffix = 0

            # Flow control attributes
            signal.signal(signal.SIGTERM,self.signal_handler)
            signal.signal(signal.SIGUSR1,self.signal_handler)
            self.kill_received = False
            self.condition = condition

    def signal_handler(self,signum,frame):
            self.kill_received = True
            print "signal received",signum
            self.condition.set()

    def run(self):
            self.makeReport(True)

    def makeReport(self,isChunked):
             swing=20*(self.chunkSize/100)
             up_swing=(self.chunkSize+swing)  #upper swing size
             low_swing=(self.chunkSize-swing) #lower swing size

             while(not self.kill_received):
             #{
                 self.funcTest()     
             #} 
```

**编辑** 仅当从此类中的函数启动信号时才会出现此问题。如果我从主进程执行 os.kill(child_pid,signal) ，它将按预期处理。

但是当我从此类中的函数执行 os.kill(os.ppid(),signal) 时，只会发生信号处理程序中的打印。未设置变量。

# c# - StreamWriter 在写入流时不会覆盖

> ID：10636230
> 
> 赞同：1
> 
> 时间：2012-05-17T13:01:24.977
> 
> 标签：c#

我有这样的代码

```
IsolatedStorageFileStream ostream = new IsolatedStorageFileStream("Conditions.txt", FileMode.Create, FileAccess.Write, store);

try
{
  StreamWriter swi = new StreamWriter(ostream);                        
  swi.WriteLine(System.DateTime.Now.Date.ToString());
  swi.Close();   
} 
```

这是一个循环，在第二次迭代中，当这段代码运行时，streamwriter 将时间附加到文件中，我希望它覆盖。

通过将 false 作为第二个参数，我可以做到这一点，但这仅在我们将文件的路径作为第一个参数传递给 stringwriter 时才有效。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:08:40.553

使用`FileMode.CreateNew`代替`FileMode.Create`。所以总是会创建一个新文件。

写下`ostream.Close()`或`ostream.Dispose()`之后`swi.Close();`

它关闭当前流并释放与当前流相关的所有资源（例如套接字和文件句柄）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:09:05.543

您可以尝试使用隔离存储构造函数中的`CreateNew`或`Truncate`枚举值。`FileMode`

[http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)

# iphone - 如何我自己的 textField 并在其中添加重定向方法

> ID：10636236
> 
> 赞同：0
> 
> 时间：2012-05-17T13:01:49.263
> 
> 标签：iphone, objective-c, uitextfield, uitextfielddelegate

我有一种情况，我必须创建一个 textField 的子类，以便当在任何视图控制器中使用该子类的对象并且用户单击它来编写某些内容时，用户将自动重定向到其他类。

让我用一个例子来解释一下：假设 MyTextField 是一个子类，如果 UITextField 何时何地在任何 ViewController1 中创建 MyTextField 的对象并且用户将尝试单击该（MyTextField 的对象），应用程序将自动重定向到新视图控制器。

请注意，我不想在 ViewController1 中使用 UITextField 的 Delegate 方法。

可能吗 ？

如有替代请回复

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:06:47.077

由于 UITextField 是从 UIResponder 继承的，因此您可以在继承的类中使用 –canBecomeFirstResponder 和 -becomeFirstResponder 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:45:25.907

根据我的理解，您可能需要在文本字段中显示一些文本/占位符。当用户单击文本字段时，您正在导航到其他类。如果我是正确的，那么您为什么不使用按钮而不是 UITextfield，因为您对调用 TextField 的委托方法不感兴趣。您可以设置一些代表来简单地处理您的操作。

# c# - 如何捕获表单的一部分

> ID：10636237
> 
> 赞同：0
> 
> 时间：2012-05-17T13:01:54.180
> 
> 标签：c#, windows, winforms, screenshot

我想捕获我的表单的一部分并将其绘制在位图变量中......
当我使用 drawToBitmap() 函数并设置`rectangle(12,40,...)`时，该函数只是从表单的 0,0 点捕获。
那我该怎么做才能解决这个问题？
坦克为您提供帮助

```
Bitmap bmp = new Bitmap(((int)maxWidth)+2, ((int)maxHeight)+2);
this.DrawToBitmap(bmp,new Rectangle(0,40,((int)maxWidth)+2, ((int)maxHeight)+2)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:31:24.603

好的，我在这里所做的是创建了一个新表单并添加了一个按钮和一个图片框。当您单击按钮时，它会从窗体中切出一个矩形并将其绘制到图片框。

我使用 -100,0 将图像向左移动 100 像素。

```
 private void button1_Click(object sender, EventArgs e)
    {
        //The image we will be drawing on then passing to picturebox
        Bitmap bmp=new Bitmap(pictureBox1.Width,pictureBox1.Height);

        using (Graphics g=Graphics.FromImage(bmp))
        {
            using (Bitmap b = new Bitmap(this.Width, this.Height))
            {
                //captures the Form screenschot, and saves it into Bitmap b
                this.DrawToBitmap(b, new Rectangle(0, 0, this.Width, this.Height));

                //this draws the image from Bitmap b starting at the specified location to Bitmap bmp 
                g.DrawImageUnscaled(b, -100, 0);
            }
        }
        //this assigns pictureBox1 the bmp Bitmap.
        pictureBox1.Image = bmp;
    } 
```

# java - 在 JTable/SWT 表中设置滚动条位置

> ID：10636239
> 
> 赞同：0
> 
> 时间：2012-05-17T13:01:56.990
> 
> 标签：java, swing, swt, scrollbar

我想问一个与任何技术没有直接关系的问题，但这是一个逻辑级别的问题。如果我错了，请原谅我。

我正在尝试在 Java 端解决这个问题。

我们有一个列表视图（可能是 JTable 或 SWT Table）。我们正在将表中的记录显示到该列表中。该表可能有数百万条记录。并且桌子的大小不断增加。由于表很大并且不断增加，我们保留了 3000 条记录的缓存并在表中显示缓存。所以在一个点上，视图中只有 3000 条记录。此时，视图（JTable 或 SWT Table）的滚动条应仅基于缓存设置（本例中为 3000 条记录）。

根据用户事件，如 PgUP、PgDwn、DownKey、UpKey、鼠标滚动等，我们正在刷新缓存，以便刷新视图。

但是我们需要给用户一个实际的感觉，滚动位置基于表中的记录。我认为这是不可能的，因为滚动位置是由操作系统根据显示中的数字记录设置的。有人可以用另一种方法帮助我。如果我没有正确解释我的问题，我会详细解释。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:04:14.120

通常滚动条设置在列表的顶部或底部，具体取决于属性“AutoScroll”设置为 true 还是 false。

我相信有一种方法可以在特定点设置滚动条，但上次我尝试使用它时，它有点笨拙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:21:52.697

听起来您正试图让滚动条同时做两件事，这可能会令人困惑。您可以使用单独的控件来进行分页。a中的一排按钮`JToolBar`看起来不错，但a`JComboBox`会占用更少的空间。[这里](https://stackoverflow.com/q/8389350/261156)有一些很好的答案。

# templates - 网站生成系统

> ID：10636241
> 
> 赞同：0
> 
> 时间：2012-05-17T13:02:00.653
> 
> 标签：templates, generator

我搜索了...找不到任何好的参考。我有一个我认为非常简单的问题：允许客户从样式模板的选择中指定和生成网站的系统背后的基本概念是什么？

例如，我创建了一个由四个静态 HTML 页面组成的简单网站。通过使用不同的 CSS 模板，我可以使这些页面看起来像我想要的任何东西......很好。

但是如果我想给我的客户一个界面，上面写着“点击这个按钮，你的网站就会被生成”——我不知道实现这个想法的基础是什么。仅仅是创建目录和复制文件的问题吗？

在我走上一条愚蠢的道路之前，我只需要一些关于通常如何完成这类事情的一般指导。有一些著名的服务可以让人们注册一个帐户，并在“三个简单的步骤”中生成一个简单的网站。我想了解如何做到这一点的理论和基础知识。

谢谢...

**编辑：**

我知道如何使用 CSS 更改现有的一组静态 HTML 页面。我想做的是建立一个真正的网站生成器。您登录我的系统，选择一个主题，点击一个按钮，您的网站（例如 www.foo.com 或 foo.parentsite.com）就可以使用了。我可以弄清楚如何允许客户更改内容——例如通过集成 tinyMCE。我只需要“点击按钮...生成新网站”理念背后的基本概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:18:22.620

您可以使用 javascript 更改使用的 css。这将改变当前页面的外观。但是您需要制作具有独特外观的多个 css。
我建议您制作一个通用 css 并将您网站的主题添加到一个小 css 中。
小的应该只包含这个主题的独特之处。

generic.css => 放置内容、菜单、页脚等...
theme1.css => 将背景颜色更改为红色，将文本颜色更改为蓝色等
theme2.css => 将背景颜色更改为蓝色，将文本颜色更改为蓝色等
theme3.css => 将背景颜色更改为蓝色，将文本颜色更改为红色等

JQuery Ui 允许轻松更改他的界面。
[选中此项并更改左侧选定的画廊](http://jqueryui.com/themeroller/#ffDefault=Trebuchet+MS,+Tahoma,+Verdana,+Arial,+sans-serif&fwDefault=bold&fsDefault=1.1em&cornerRadius=4px&bgColorHeader=f6a828&bgTextureHeader=12_gloss_wave.png&bgImgOpacityHeader=35&borderColorHeader=e78f08&fcHeader=ffffff&iconColorHeader=ffffff&bgColorContent=eeeeee&bgTextureContent=03_highlight_soft.png&bgImgOpacityContent=100&borderColorContent=dddddd&fcContent=333333&iconColorContent=222222&bgColorDefault=f6f6f6&bgTextureDefault=02_glass.png&bgImgOpacityDefault=100&borderColorDefault=cccccc&fcDefault=1c94c4&iconColorDefault=ef8c08&bgColorHover=fdf5ce&bgTextureHover=02_glass.png&bgImgOpacityHover=100&borderColorHover=fbcb09&fcHover=c77405&iconColorHover=ef8c08&bgColorActive=ffffff&bgTextureActive=02_glass.png&bgImgOpacityActive=65&borderColorActive=fbd850&fcActive=eb8f00&iconColorActive=ef8c08&bgColorHighlight=ffe45c&bgTextureHighlight=03_highlight_soft.png&bgImgOpacityHighlight=75&borderColorHighlight=fed22f&fcHighlight=363636&iconColorHighlight=228ef1&bgColorError=b81900&bgTextureError=08_diagonals_thick.png&bgImgOpacityError=18&borderColorError=cd0a0a&fcError=ffffff&iconColorError=ffd27a&bgColorOverlay=666666&bgTextureOverlay=08_diagonals_thick.png&bgImgOpacityOverlay=20&opacityOverlay=50&bgColorShadow=000000&bgTextureShadow=01_flat.png&bgImgOpacityShadow=10&opacityShadow=20&thicknessShadow=5px&offsetTopShadow=-5px&offsetLeftShadow=-5px&cornerRadiusShadow=5px)

我不认为您可以生成一个让客户非常满意的网站。
总有一些东西比客户想要改变的。

编辑：
您需要在服务器上创建文件夹。
将所有必要的文件连同他选择的主题放入文件夹
为他的域配置 apache。然后为新配置重新加载它。

我建议你使用 PHP 或 cgi。

我不知道如何注册域（如果可用）以及如何轻松自动地将他的域重定向到您的 ip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T01:23:21.150

今晚发现了其他东西：有一整套 API 可用于访问 cPanel 功能。因此，几乎从字面上看，使用他们的 PHP 包装器看起来只需要几行代码来实例化子域、设置电子邮件帐户、域指针等。

看起来很有希望......但作为一个菜鸟，我有很多阅读要做......

# c# - 我不明白为什么这段代码不起作用。（C＃）

> ID：10636242
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:02:12.883
> 
> 标签：c#, mouse, voice, speech

我是 C# 新手，要学习，我正在观看并尝试网络上的示例。

我看到了这个例子：

```
using System;
using System.Drawing;
using System.Text.RegularExpressions;
using System.Windows.Forms;

using System.Speech.Recognition;

namespace MouseController
{
    public partial class Form1 : Form
    {
        SpeechRecognitionEngine recognitionEngine; 

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        Initialize();
    }

    private void Form1_FormClosing(object sender, FormClosingEventArgs e)
    {
        recognitionEngine.RecognizeAsyncStop();
    }

    private void Initialize()
    {
        recognitionEngine = new SpeechRecognitionEngine();
        recognitionEngine.SetInputToDefaultAudioDevice();
        recognitionEngine.SpeechRecognized += (s, args) =>
        {
            string line = "";
            foreach (RecognizedWordUnit word in args.Result.Words)
            {
                if (word.Confidence > 0.5f)
                    line += word.Text + " ";
            }

            string command = line.Trim();

            switch (command)
            {
                case "left":
                    MoveMouse(Cursor.Position.X - 50, Cursor.Position.Y);
                    break;
                case "right":
                    MoveMouse(Cursor.Position.X + 50, Cursor.Position.Y);
                    break;
                case "up":
                    MoveMouse(Cursor.Position.X, Cursor.Position.Y - 50);
                    break;
                case "down":
                    MoveMouse(Cursor.Position.X, Cursor.Position.Y + 50);
                    break;
            }

            txtOutput.Text += line;
            txtOutput.Text += Environment.NewLine;
        };

        recognitionEngine.UnloadAllGrammars();
        recognitionEngine.LoadGrammar(CreateGrammars());
        recognitionEngine.RecognizeAsync(RecognizeMode.Multiple);
    }

    private Grammar CreateGrammars()
    {
        Choices commandChoices = new Choices("left", "right", "up", "down");
        GrammarBuilder grammarBuilder = new GrammarBuilder();
        grammarBuilder.Append(commandChoices);
        return new Grammar(grammarBuilder);
    }

    private void MoveMouse(int x, int y)
    {
        this.Cursor = new Cursor(Cursor.Current.Handle);
        Cursor.Position = new Point(x, y);
        Cursor.Clip = new Rectangle(this.Location, this.Size);
    }
}
} 
```

但是当我说“上”、“下”、“左”或“右”时，什么也没有发生……

我也试过这个：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Speech.Recognition;

namespace SpeechRecognitionExample
{
    public partial class Form1 : Form
    {
        private SpeechRecognitionEngine recognitionEngine;

        public Form1()
        {
            InitializeComponent();

            recognitionEngine = new SpeechRecognitionEngine();
            recognitionEngine.SetInputToDefaultAudioDevice();
            recognitionEngine.SpeechRecognized += (s, args) =>
            {
                foreach (RecognizedWordUnit word in args.Result.Words)
                {
                    if (word.Confidence > 0.8f)
                        txtOutput.Text += word.Text + " ";
                }
                txtOutput.Text += Environment.NewLine;
            };
            recognitionEngine.LoadGrammar(new DictationGrammar());
        }

        private void btnStart_Click(object sender, EventArgs e)
        {
            recognitionEngine.RecognizeAsync(RecognizeMode.Multiple);
        }

        private void btnStop_Click(object sender, EventArgs e)
        {
            recognitionEngine.RecognizeAsyncStop();
        }
    }
} 
```

而且它不起作用...

在这两个代码中，我都没有从 Visual Studio 中得到任何错误。

为什么它不起作用？

我检查了我的麦克风，它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:21:36.660

在 lambda 语句的开头`Initialize()`和它所说的地方设置一个断点`string line = "";`。遍历每一行并观察变量的值。如果你没有在这些断点上得到任何命中，那么引擎设置或输入设备有问题，我猜。

此外，您注意到您正在连接多个单词，然后在语句中`line`查找单个单词。`switch`如果你得到多个像“up up”这样的词，它不会符合你的任何`case`条件。

让我们知道您的发现，我们或许能够更好地帮助您。

# silverlight - 在 Silverlight 5 中调用 Windows-Auth 安全 OData 服务跨域

> ID：10636243
> 
> 赞同：0
> 
> 时间：2012-05-17T13:02:13.197
> 
> 标签：silverlight, cross-domain, odata

我正在尝试从 Silverlight 5 应用程序调用受 Windows 身份验证保护的 OData 服务（SharePoint 2010 中包含的 OOTB 服务）。在我的研究（[特别是这篇文章](http://blogs.msdn.com/b/astoriateam/archive/2010/05/10/odata-and-authentication-part-2-windows-authentication.aspx)）中，我在某处看到它说：

> 警告：虽然在 Silverlight 中可以进行 x 域调用，但只要其他域具有正确配置的 ClientAccessPolicy.xml 文件，如果其他域需要您登录，则无法提供您的凭据。

所以我的问题是，真的没有办法调用受 Windows Auth 保护的 OData 服务跨域吗？这似乎是上面的帖子所说的，但我很难相信这是不可能的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:11:15.097

回答我自己的帖子以跟进我发现的研究......因为 NTLM 是对每个请求的协商，所以你不能很容易地做到这一点。我可以覆盖生成的 DataContext 代理，但它会变得非常混乱。这是谈判的样子：innovation.ch/personal/ronald/ntlm.html

# php - 将文本文件的每一行读入一个新的数组元素

> ID：10636245
> 
> 赞同：2
> 
> 时间：2012-05-17T13:02:38.703
> 
> 标签：php, arrays, text-files, explode, fread

我想将此文本文件的每一行输入到一个新的数组元素中，并且我需要数组以这样的方式结束：数组（[testuser] => 'testpassword'）通过在文本文件中使用此文本：'testuser ' => '测试通过'

我现在拥有的代码：

```
$filename = "logininfo.txt";
$fp = @fopen($filename, 'r'); 
if ($fp) { $LOGIN_INFORMATION = explode("\n", fread($fp, filesize($filename))); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:04:51.447

~~使用 PHP 的[`file`](http://php.net/file)函数：~~

 ~~```
$array = file('logininfo.txt'); 
```~~ 

要忽略换行符和空行，请提供适当的标志：

```
$array = file('logininfo.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES ); 
```

 ~~解决这个问题的一个好方法是 PHP 的[`parse_ini_file`](http://php.net/parse_ini_file)函数。虽然您的文件看起来会略有不同，但我认为这不是问题：

```
; file contents:
testuser = testpass 
```

在你的 PHP 文件中：

```
$array = parse_ini_file('logininfo.txt', FALSE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:08:40.697

假设你的文件是这样的：

用户：blah 密码：somthing

你可以这样做

```
$arr = array();
$filename = "test.txt";
$fp = fopen( $filename, "r" );
while ( ! feof( $fp ) ) {
   $line = fgets( $fp, 1024 );
   $temp = explode(":", $line);
   $arr[trim($temp[0])] = trim($temp[1]);
} 
```~~

# java - Java泛型，使用子类而不是父类

> ID：10636247
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:02:45.177
> 
> 标签：java, generics

我有界面

```
interface IAdaptor<T, K>  
{ 
   // ...   
} 
```

我已经意识到

```
class AdaptorImpl imlements IAdaptor<SomeClass1, SomeClass1>  
{  
// ...
} 
```

我可以使用儿童 insted of`SomeClass1`吗？
就像是`class AdaptorImpl imlements IAdaptor<T extends SomeClass1, SomeClass1>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:06:15.877

我假设，你的意思是

```
class AdaptorImpl implements IAdapter<SomeClass1, SomeClass1>  
{  
    // ...
} 
```

不过，我不确定您所说的“孩子”是什么意思。当然，你可以这样做：

```
class AdaptorImpl<T extends SomeClass1> implements IAdapter<T, SomeClass1>  
{  
    // ...
} 
```

# android - 有没有办法从 JSON 输出中检索相应的数据以在微调器中显示该数据？

> ID：10636263
> 
> 赞同：0
> 
> 时间：2012-05-17T13:03:47.470
> 
> 标签：android, json

```
{
  "Platforms": [
    {
      "PlatformNo": "1",
      "SerialNumbers": [
        {
          "Aplilevel": "1",
          "Version": "1.0"
        },
        {
          "Aplilevel": "2",
          "Version": "1.1"
        },
        {
          "Aplilevel": "3",
          "Version": "1.5"
        },
        {
          "Aplilevel": "4",
          "Version": "1.6"
        }
      ]
    },
    {
      "PlatformNo": "2",
      "SerialNumbers": [
        {
          "Aplilevel": "5",
          "Version": "2.0"
        },
        {
          "Aplilevel": "6",
          "Version": "2.0.1"
        },
        {
          "Aplilevel": "7",
          "Version": "2.1.x"
        },
        {
          "Aplilevel": "8",
          "Version": "2.2.x"
        },
        {
          "Aplilevel": "9",
          "Version": "2.3"
        },
        {
          "Aplilevel": "10",
          "Version": "2.3.3"
        }
      ]
    },
    {
      "PlatformNo": "3",
      "SerialNumbers": [
        {
          "Aplilevel": "11",
          "Version": "3.0.x"
        },
        {
          "Aplilevel": "12",
          "Version": "3.1.x"
        },
        {
          "Aplilevel": "13",
          "Version": "3.2"
        }
      ]
    },
    {
      "PlatformNo": "4",
      "SerialNumbers": [
        {
          "Aplilevel": "14",
          "Version": "4.0"
        },
        {
          "Aplilevel": "15",
          "Version": "4.0.3"
        }
      ]
    }
  ]
} 
```

上面显示的 JSON 是我需要在 PlatformNo 的微调器中显示的输出。当我选择一个项目时，我是否需要在另一个微调器中获取相应的 API 级别？谁能帮我解决这个问题？我试图在下面得到它，但我无法正确地得到它。我只在下一个微调器中获得最后一个值。有没有办法检查这个？请帮我。

```
String[] platfromno,apilevel;
Spinner splatform,sapilevel;  
JSONObject obj = json.getJSONObject("Result");
JSONArray platformObject = customerObject.getJSONArray("Platforms");
String parray = customerObject.getString("Platforms");
System.out.println("String of Platforms array is " + parray);

for (int i = 0; i < productNameObject.length(); i++) {
    JSONObject e = productNameObject.getJSONObject(i);
    platformno[i] = e.getString("PlatformNo");
    ArrayAdapter<String> spinnerPlatfromNo =
        new ArrayAdapter<String>( this,
                android.R.layout.simple_spinner_dropdown_item,
                platformno);

    splatform.setAdapter(spinnerPlatfromNo);
    JSONArray serialNumberObject = e.getJSONArray("SerialNumbers");
    apilevel= new String[serialNumberObject.length()];
    splatform.setOnItemSelectedListener(
        new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0,
                            View arg1, int arg2, long arg3) {
                System.out.println("selected Item position is  " +
                    splatform.getSelectedItemPosition());
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }
    });

    // if (splatform.getSelectedItemPosition()) {

    for (int j = 0; j < serialNumberObject.length(); j++) {
        JSONObject e1 = serialNumberObject.getJSONObject(j);
        apilevel[j] = e1.getString("Aplilevel");
    // }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:28:04.047

> 在尝试了很多之后，我解决了捻线机。

```
String[] platfromno,apilevel;
Spinner splatform,sapilevel;

    JSONObject obj = json.getJSONObject("Result");
    JSONArray platformObject = customerObject
                        .getJSONArray("Platforms");

                for (int i = 0; i < platformObject.length(); i++) {

                    JSONObject e = platformObject.getJSONObject(i);

                    platformno[i] = e.getString("PlatformNo");

                    ArrayAdapter<String> spinnerPlatfromNo = new ArrayAdapter<String>(
                            this,
                            android.R.layout.simple_spinner_dropdown_item,
                            platformno);

                    splatform.setAdapter(spinnerPlatfromNo);

                    JSONArray serialNumberObject = e
                            .getJSONArray("SerialNumbers");

                    apilevel= new String[serialNumberObject.length()];

                    splatform.setOnItemSelectedListener(new OnItemSelectedListener() {

                        public void onItemSelected(AdapterView<?> arg0,
                                View arg1, int arg2, long arg3) {
                            System.out.println("selected Item position is  "
                                    + splatform.getSelectedItemPosition());

                fillApiLevel();

                        }

                        public void onNothingSelected(AdapterView<?> arg0) {
                            // TODO Auto-generated method stub

                        }
                    });

        public void fillApiLevel(){

                JSONArray serialNumberObject = null;
        try {
            serialNumberObject =platformObject .getJSONObject(
                    splatform.getSelectedItemPosition()).getJSONArray(
                    "SerialNumbers");
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        platfromno = new String[serialNumberObject.length()];
        apilevel = new String[serialNumberObject.length()];

        for (int j = 0; j < serialNumberObject.length(); j++) {

            JSONObject e1 = null;
            try {
                e1 = serialNumberObject.getJSONObject(j);

                platfromno[j] = e1.getString("Aplilevel");
                apilevel [j] = e1.getString("Version");

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            ArrayAdapter<String> spinnerSerialNumer = new ArrayAdapter<String>(
                    this, android.R.layout.simple_spinner_dropdown_item,
                    platformno);

            sSerialNo.setAdapter(spinnerSerialNumer);
                    } 
```

# javascript - jQuery Mobile“mobileinit”事件触发两次？

> ID：10636266
> 
> 赞同：2
> 
> 时间：2012-05-17T13:03:56.987
> 
> 标签：javascript, jquery-mobile

我的 index.html 看起来像这样：

```
<!DOCTYPE html>
<html class="ui-mobile-rendering">
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/jquery.mobile-1.1.0.min.css" />
    <list rel="stylesheet" href="css/app.css" />
    <script src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/underscore.js"></script>
    <script type="text/javascript" src="js/backbone.js"></script>
    <script type="text/javascript" src="js/views/attachmentlist.js"></script>
    <script type="text/javascript" src="js/models/attachmentmodel.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script src="js/jquery.mobile-1.1.0.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/cordova-1.7.0rc1.js"></script>
    </head>

    <body></body>

</html> 
```

绝对没有这些文件有对 jQuery Mobile 的引用，只有索引有。

我的 app.js 文件如下所示：

```
$(document).live("mobileinit", function () {
    console.log('in Mobile Init');
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;

    // Remove page from DOM when it's being replaced
    $('div[data-role="page"]').live('pagehide', function (event, ui) {
        $(event.currentTarget).remove();
    });
}); 
```

某些东西导致“移动初始化”触发两次。我不确定它是什么，或者即使它真的是一个问题，但感觉就像是不应该发生的事情。
有什么办法可以解决这个问题吗？

**编辑**
我实际上只是注意到，如果我将一个简单的“脚本”标签直接放入正文并在那里执行 console.log，它会运行两次....sooo....这段代码中的某些内容导致我的整个页面初始化两次。
事实上，它实际上看起来好像我的整个设置加载了两次。我将 console.logs 放置在应用程序首次加载时发生的事情的整个链中，并且一切都发生了两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:32:25.007

我曾经遇到过类似的事情。对于它的价值，这就是*我*解决它的方法：

```
$(document).bind("mobileinit", function() {
  $.extend(  $.mobile , {
    autoInitializePage: false,
    loadingMessage: false
  });
}); 
```

如果我必须使其适应*您的*代码，请尝试以下操作：

```
$(document).live("mobileinit", function () {
    console.log('in Mobile Init');

    $.extend(  $.mobile , {
        autoInitializePage: false,
        loadingMessage: false
    });

    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;

    // Remove page from DOM when it's being replaced
    $('div[data-role="page"]').live('pagehide', function (event, ui) {
        $(event.currentTarget).remove();
    });
}); 
```

* * *

附带说明一下，您不应该使用 jQuery 的`.live()`函数。根据他们自己的[文档](http://api.jquery.com/live/)：

> 从 jQuery 1.7 开始，该`.live()`方法已被弃用。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该[`.delegate()`](http://api.jquery.com/delegate/)优先使用[`.live()`](http://api.jquery.com/live/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T18:40:42.540

这可能不是你想听到的答案，但我相信这确实是我能给你的最有用的建议。

如果可能的话，我强烈建议您摆脱 Jquery mobile。我最近在一个团队工作，该团队在使用 Jquery mobile 执行此类操作时遇到问题。如果您在加载页面时发生了任何异步代码，那么让 Jquery mobile 的事件与您自己的事件同步几乎是不可能的。

如果您需要为您的移动网站提供无缝、原生的感觉，我强烈建议您尝试 Spine 和 RequireJS。根据您的设计限制，Spine Mobile 也可用，并且会为您完成一些工作。

Jquery mobile 本质上是在欺骗浏览器，让浏览器认为您的网站是一个单页应用程序，因此最终会让人感觉非常笨拙。如果您有时间备份并正确执行，并实际构建一个真正的单页应用程序，您最终将获得更干净、更可靠的代码和更可用的应用程序。

抛弃 Jquery 手机。您的开发团队和您的用户会感谢您。

* * *

编辑：现在是 2015 年，所以也许不要再使用 Spine 和 Require 了。试试 Webpack 和 React！但绝对不要使用 Jquery mobile，除非你想要更多这样的问题。

# ios - 使用 iOS，如何检查 URL 是否为空

> ID：10636281
> 
> 赞同：8
> 
> 时间：2012-05-17T13:05:01.350
> 
> 标签：ios, cocoa-touch, url

我正在加载 JSON，但我想检查`"URL": "",`json 中的是否为空，有时 ID 为空我该如何检查？

```
if(URL == HOW TO CHECK IF EMPTY?)
{

}
else
{

} 
```

错误：

```
*** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:26:30.343

嗯，试试

```
if ([URL isEqualToString:@"The URL?"]) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T13:08:45.550

```
if (URL ==  [NSNull null]) {
    //...
} else {
    //...
} 
```

或者

```
if (URL == nil) {
    //...
} else {
    //...
} 
```

或检查 URL 的长度

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T13:10:08.187

如果 URL 对象是一个字符串，您可以使用其中一个，

```
if([string length] == 0) { //empty } 
```

或者

```
if([string isEqualToString:@""]) { // empty } 
```

如果 URL 对象是一个 NSURL，你可以使用：

```
if([[url absoluteString] isEqualToString:@""]) { //empty } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T14:26:40.210

在处理 JSON 数据时，我往往会非常小心。假设我有一个反序列化为 NSDictionary 的 JSON。有了这个，我需要从字典中提取一个与键“URL”关联的字符串并将其转换为 NSURL。此外，我对 JSON 或字符串值不是 100% 有信心。

我会做这样的事情：

```
NSURL *URL = nil;
id URLObject = [JSON valueForKey:@"URL"];
if ([URLObject isKindOfClass:[NSString class]] && [URLObject length] > 0) {
    URLObject = [URLObject stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    URLObject = [URLObject stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    URL = [NSURL URLWithString:URLObject];
} 
```

在此之后，URL 将有一个 nil 或一个有效的 URL。-isKindOfClass：清除 NSDictionary、NSArray、NSNumber 或 NSNull 的值。-length > 0 过滤掉空字符串（如您所知，这可能会弄乱 NSURL）。解码然后重新编码 URL 转义的额外偏执会处理部分编码的 URL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-11T10:21:18.537

```
if (url.absoluteString.length==0)
{
    UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"Error" message:@"Please enter a url" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
    [alert show];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T13:10:26.220

根据它的存储方式，您可能需要验证它是否为 null ( `URL == nil`) 或字符串是否为空。假设您的 URL 存储在 NSString 中，您将使用以下内容：

```
BOOL empty = URL == nil || [URL length] == 0; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-18T10:32:02.113

试试这个。它对我有用。

```
NSURL *url;
if ([url path])
{
    // url is not empty
}
else
{
    // url is empty
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-02T14:07:16.110

对于 swift 3 和 swift 4 使用这个

```
var UrlUploadVideo = NSURL()

if UrlUploadVideo.absoluteString == "" {
     // your code
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-06T02:43:29.867

```
guard let url = URL(string: urlStr) else { return } 
```

# c# - 根据格式验证字符串

> ID：10636284
> 
> 赞同：9
> 
> 时间：2012-05-17T13:05:10.530
> 
> 标签：c#, string

我有一个必须采用以下格式的字符串：

XXXX-XX-XXX-XXXX-XXXXXXXXXX-X

其中 X 是一个整数。整数的数量无关紧要。我只需要确保字符串：

*   以整数开头和结尾
*   仅包含用破折号分隔的整数

验证这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T13:08:54.500

这个正则表达式应该可以解决问题。它使用否定的[lookbehind](http://www.regular-expressions.info/lookaround.html)来避免连续匹配多个破折号。

```
^\d(\d|(?<!-)-)*\d$|^\d$

 ^        ^       ^    ^
 |        |       |    -- is a single digit, or
 |        |       ------- ends with a digit
 |        ----------------consists on digits or dashes not preceded by dashes
 ---------------------starts with a digit 
```

这是一个说明其用法的 C# 代码（也在[ideone](http://ideone.com/H2qKs)上）：

```
var r = new Regex("^\\d(\\d|(?<!-)-)*\\d$|^\\d$");
Console.WriteLine(r.IsMatch("1-2-3"));
Console.WriteLine(r.IsMatch("1-222-3333"));
Console.WriteLine(r.IsMatch("123"));
Console.WriteLine(r.IsMatch("1-2-3-"));
Console.WriteLine(r.IsMatch("1"));
Console.WriteLine(r.IsMatch("-11-2-3-")); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T13:09:25.840

使用正则表达式。

```
^\d[-0-9]+\d$ 
```

这假定字符串至少有三个字符长。

分解：

```
^    - match start of string
\d   - match a digit
[    - start of character class containing:
-      - a dash
0-9    - 0 to 9
]    - end of character class
+    - match one or more of the previous
\d   - match a digit
$    - match end of string 
```

您可以将 更改`+`为`*`使 2 位字符串有效，并添加一个替代项以使 1 位字符串也有效：

```
^(\d|\d[-0-9]*\d)$ 
```

注意：在 .NET 中，`\d`将匹配*任何*Unicode 数字（例如，阿拉伯数字将匹配） - 如果您不希望这样，请在每个地方替换`\d`为。`[0-9]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T13:07:51.363

您可以编写一个正则表达式来解决问题。

比您可以使用该正则表达式来验证您的字符串

```
^ ---->Start of a string. 
$ ---->End of a string. 
. ----> Any character (except \n newline) 
{...}----> Explicit quantifier notation. 
[...] ---->Explicit set of characters to match. 
(...) ---->Logical grouping of part of an expression. 
* ---->0 or more of previous expression. 
+ ---->1 or more of previous expression. 
? ---->0 or 1 of previous expression; also forces minimal matching when an expression might match several strings within a search string. 
\ ---->Preceding one of the above, it makes it a literal instead of a special character. Preceding a special matching character, see below. 
\w ----> matches any word character, equivalent to [a-zA-Z0-9] 
\W ----> matches any non word character, equivalent to [^a-zA-Z0-9]. 
\s ----> matches any white space character, equivalent to [\f\n\r\v] 
\S----> matches any non-white space characters, equivalent to [^\f\n\r\v] 
\d ----> matches any decimal digits, equivalent to [0-9] 
\D----> matches any non-digit characters, equivalent to [^0-9] 

\a ----> Matches a bell (alarm) \u0007\. 
\b ----> Matches a backspace \u0008 if in a [] character class; otherwise, see the note following this table. 
\t ---->Matches a tab \u0009\. 
\r ---->Matches a carriage return \u000D. 
\v ---->Matches a vertical tab \u000B. 
\f ---->Matches a form feed \u000C. 
\n ---->Matches a new line \u000A. 
\e ---->Matches an escape \u001B 

$number ----> Substitutes the last substring matched by group number number (decimal). 
${name} ----> Substitutes the last substring matched by a (? ) group. 
$$ ----> Substitutes a single "$" literal. 
$& ----> Substitutes a copy of the entire match itself. 
$` ----> Substitutes all the text of the input string before the match. 
$' ----> Substitutes all the text of the input string after the match. 
$+ ----> Substitutes the last group captured. 
$_ ----> Substitutes the entire input string. 

(?(expression)yes|no) ----> Matches yes part if expression matches and no part will be ommited. 
```

更多信息在

[http://geekswithblogs.net/brcraju/archive/2003/10/23/235.aspx](http://geekswithblogs.net/brcraju/archive/2003/10/23/235.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T13:08:52.783

正则表达式可能是可行的方法，这可能会有所帮助：

[http://www.regular-expressions.info/creditcard.html](http://www.regular-expressions.info/creditcard.html)

# jquery - 从 flash 到 jquery 的通信 - jquery 滚动路径与 flash 按钮

> ID：10636288
> 
> 赞同：0
> 
> 时间：2012-05-17T13:05:19.430
> 
> 标签：jquery, actionscript

我在下面的链接中使用了 jquery 滚动路径。

[jquery滚动路径](http://joelb.me/scrollpath/)

屏幕下方的几个按钮可以控制滚动。而不是那些按钮，我想使用一些在 Flash 中开发的按钮。但是点击事件不起作用，并且无法从 flash 到 jquery 进行通信。

对此的任何帮助都非常有帮助。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T21:43:26.510

这可以使用 ActionScript 3 中的[ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html "ActionScript 3.0 参考")类来完成。
实际上非常简单，使用以下代码；

### 动作脚本 3

```
// Import
import flash.external.ExternalInterface;

// Call the javascript function
ExternalInterface.call( "myFunction", "Hello there!" ); 
```

### JavaScript

```
function myFunction( message )
{
    window.alert( message );
} 
```

Flash 对象调用 javascript 函数，并在您的浏览器中显示`myFunction`带有消息的警报。`Hello there!`

* * *

不推荐简单地触发`javascript:myFunction( "Hello there!" )`调用（至少在 AS3 中），因为一些浏览器可能认为它不安全并且使事情变得困难。使用`ExternalInterface`是首选方法。您还可以使用它在 JavaScript 中调用 ActionScript 函数，但这不在您的问题范围之内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:23:06.553

您可以像往常一样定义要调用的 js 函数，并从 actionscript 中调用它。

如果您使用的是 as2，那么您可以执行以下操作：

```
getURL('javascript:doTheScrollingForMe();'); 
```

我一般都是这么用的。否则，关于这个主题的 SO 上有类似的问题，比如[this one](https://stackoverflow.com/questions/8129016/calling-a-javascript-function-from-flash-movie-controls)和[that one](https://stackoverflow.com/questions/9426069/as2-best-crossbrowser-way-of-calling-javascript-functions)。还有[这个](http://www.slideshare.net/BeautifulInterfaces/connecting-flash-and-javascript-using-externalinterface-2452543)。

您与按钮一起使用的 javascript 代码不应更改（很可能）。

# html - 使用和不使用滚动条的 div 内的表格填充

> ID：10636291
> 
> 赞同：0
> 
> 时间：2012-05-17T13:05:30.230
> 
> 标签：html, css, padding

我有一个包含表格的 div。Div 的内边距为 20px。如果表格大小大于 div，则应在 div 上显示滚动条。

问题：当滚动条不存在时，填充工作正常。但是当存在滚动条时，滚动条完全占据右侧填充。但是一些底部填充仍然是使用滚动条应用的事件。

问题：如何为 div 提供 20px 填充并确保其内容从滚动条进行填充计算（如果存在其他来自 div 的边框）？注意：表格元素不能指定样式。由于此表不知道 div 包装器。

附上示例代码和输出图像。

```
<html>
<head>
<style type="text/css">
.parentDiv {
    border: 1px solid red; 
    height: 50px; 
    width: 200px; 
    overflow: auto; 
    padding: 20px;
}

.childDiv {
    border: 1px solid blue;
}
</style>
</head>
<body>
    <div class="parentDiv">
        <table class="childDiv" width="100%" height="100%">
         <tr>
           <td></td>
         </tr>
        </table>
    </div>
    <br/>
    <div class="parentDiv">
        <table class="childDiv" width="100%" height="100%">
         <tr>
           <td><pre>Sample text <input type="textbox"/></pre><br/>Sample second line</td>
         </tr>
        </table>
    </div>
</body>
</html> 
```

**输出：** ![在此处输入图像描述](../Images/9ff22d7639b31c3bbeb1efdacc2205e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:11:47.283

从 parentDiv 类中取出填充，将表格包装在一个新的 div 中 - 您仍然会在 parentDiv 中获得滚动条，但您的容器 div 应该压缩表格以容纳它们。

尝试这个：

```
<div class="parentDiv">         
    <div class="childDiv">                
        <table>            
            <tr>              
                <td></td>            
            </tr>           
        </table>       
    </div>
</div> 

<style type="text/css">         
     .parentDiv {             
        border: 1px solid red;
        width: 200px;
        overflow:auto;
}     

    .childDiv {             
         border: 1px solid blue; 
         padding: 20px; 
         width:100%;
         height:100%;        
    }         
</style> 
```

您会注意到，随着表格高度的增加，下边框会从 div 的底部下降——您可以向下滚动查看它。

您可以将滚动移动到新的 div 中：

```
<style type="text/css">         
    .parentDiv {             
        border: 1px solid red;
        width: 200px;
        padding: 20px;         
    }     

    .childDiv {             
        border: 1px solid blue; 
        width:100%;
        overflow-y:auto;
        height:50px;        
    }         
</style> 
```

# javascript - jQuery Toggle 随机刷新屏幕

> ID：10636300
> 
> 赞同：0
> 
> 时间：2012-05-17T13:05:56.083
> 
> 标签：javascript, jquery, html

Coolio，我正在努力创建一个简单的树，作为文章的存档。我正在使用切换来打开关闭月份以显示里面写的内容。为代码做好准备，它一点也不漂亮，但我不能使用树插件，因为我必须将它安装到 jquery 1.3.2 中。但是，如果您有更好的编写代码的方法，我也会全力以赴：D

这是我的html：

```
div id="side_archive">
  <h4>Archives</h4>
  <ul>
    <li><a id="may12" href="#">May</a></li>
    <ul class="child" id="may">
      <li>Article 1</li>
      <li>Article 2</li>
      <li>Article 3</li>
    </ul>
    <li><a id="june12" href="#">June</a></li>
    <ul class="child" id="jun">
      <li>Article 4</li>
      <li>Article 5</li>
      <li>Article 6</li>
    </ul>
    <li><a id="july12" href="#">July</a></li>
    <li><a id="august12" href="#">August</a></li>
    <ul class="child" id="aug">
      <li>Article 7</li>
      <li>Article 8</li>
      <li>Article 9</li>
    </ul>
    <li><a id="september12" href="#">September</a></li>
    <ul class="child" id="sep">
      <li>Article 10</li>
      <li>Article 11</li>
      <li>Article 12</li>
    </ul>
    <li><a id="october12" href="#">October</a></li>
    <ul class="child" id="oct">
      <li>Article 13</li>
      <li>Article 14</li>
      <li>Article 15</li>
    </ul>
    <li><a id="november12" href="#">November</a></li>
    <ul class="child" id="nov">
      <li>Article 16</li>
      <li>Article 17</li>
      <li>Article 18</li>
    </ul>
    <li><a id="december12" href="#">December</a></li>
  </ul>
</div> 
```

和javascript：

```
 $(document).ready(function() {
 // basic tree function
 $('.child').hide();

 $('#january12').click(function() { $('#jan').toggle("slow")});
 $('#february12').click(function() { $('#feb').toggle("slow")});
 $('#march12').click(function() { $('#mar').toggle("slow")});
 $('#april12').click(function() { $('#apr').toggle("slow")});
 $('#may12').click(function() { $('#may').toggle("slow") });
 $('#june12').click(function() { $('#jun').toggle("slow")});
 $('#july12').click(function() { $('#jul').toggle("slow")});
 $('#august12').click(function() { $('#aug').toggle("slow")});
 $('#september12').click(function() { $('#sept').toggle("slow")});
 $('#october12').click(function() { $('#oct').toggle("slow")});
 $('#november12').click(function() { $('#nov').toggle("slow")});
 $('#december12').click(function() { $('#dec').toggle("slow")});

}); 
```

现在这是列表位于页面中间位置的奇怪之处，每当您单击月份以刷新屏幕时，您最终会出现在页面顶部。有没有办法获得这个功能，这样它就不会让你到处乱跑..

提前感谢您的帮助：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:08:54.983

在我看来，您需要阻止每个项目的 href="#" 的默认操作。

要使用 jQuery 执行此操作，您可以编写：

```
$("#example").click(function(e) {

  e.preventDefault(); 

  //Add your code here

}); 
```

我已经像这样布置了我的代码以显示基本思想，也许可以替代您布置代码的方式：

```
$(a).click(function(e) {
  e.preventDefault(); 

 switch ($(this).attr("id")) {
   case "january12":
     $('#jan').toggle("slow");
     break;
   case "february12":
     $('#feb').toggle("slow");
     break;
 }

}); 
```

您可以继续使用 switch 语句来显示和隐藏不同的 div

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:09:08.183

```
'#january12').click(function(e) { $('#jan').toggle("slow"); e.preventDefault(); return false; }); 
```

# lan - 使用交叉电缆连接两台笔记本电脑时出现问题？

> ID：10636305
> 
> 赞同：0
> 
> 时间：2012-05-17T13:06:09.247
> 
> 标签：lan

我使用交叉电缆连接了两台笔记本电脑。我的 IP 地址是 192.168.1.1，另一个 IP 地址是 192.168.1.16。我们都能够互相ping通，并且回复是完美的。没有数据包丢失。

问题是我共享了一个文件，而其他系统无法使用运行命令打开我的 IP 地址。即使我无法通过运行 ( `\\192.168.1.1`) 来打开我的共享文件夹。`\\192.168.1.1, The Network Path was not found`每次我们尝试此操作时，都会打开一个带有消息的对话框。

但我可以通过输入运行命令 ( `\\192.168.1.16`) 打开他的共享文件夹。我关闭了系统中的所有防火墙服务。但是我的系统仍然无法响应。我们也无法使用远程桌面连接。

谁能帮我解决这个问题？

附加细节：我使用的是 Windows XP，另一台机器使用的是 Windows 7。我们都在同一个工作组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:16:31.377

需要明确启用远程桌面。右键单击“我的电脑”，转到属性并查看远程设置选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:26:19.647

以下是解决您的问题的一些步骤：

1.  你是自己设置的静态IP还是自动设置的？
2.  如果是，请去手动设置IP
3.  然后共享文件并将该文件的权限设置为Maximum（如果您相信您的合作伙伴）
4.  然后关闭防火墙或杀毒软件一段时间（比如 10 分钟）
5.  现在尝试使用运行窗口中的 \192.xxx.xxx.xxx 方法进行连接
6.  如果第 5 步不起作用，请尝试禁用并重新启用 LAN 卡，然后再次尝试第 5 步。

希望能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T05:59:57.223

我建议您使用无线接入点来连接 windows 7 和 windowsXP。我认为这是[解决 jaringan 问题](http://antiasap.blogspot.com/2013/04/troubleshooting-wlan-bag-1.html)的最佳选择。为什么？因为我已经做了任何事情来连接两个[操作系统](http://antiasap.blogspot.com/2012/11/sistem-operasi-jaringan-dan-layanannya.html)但无法解决这个问题。

# css - 为什么此图像不以自动边距居中？

> ID：10636307
> 
> 赞同：0
> 
> 时间：2012-05-17T13:06:18.950
> 
> 标签：css, margin

此页面顶部的徽标图像`http://54.251.57.136/`应居中：

```
.logo-img {
    margin: 0px auto;
    display: block;
} 
```

...但它没有，我不知道为什么。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:12:36.017

去掉 float: left from logo-img 并添加 text-align: center

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:09:22.953

您的 div 有一个 .logo-img 类，它设置为 float:left。（并且它需要一个固定的宽度才能使居中工作）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:15:18.070

您正在浮动图像包装器，如果您调整 CSS，您可以将其居中：

**将此添加到您^(的 .logo-img)**

```
text-align: center; 
```

**从您^(的 .logo-img 中删除它)**

```
float:left; 
```

### 你需要了解什么：

*   浮动元素脱离了正常的文档流，因此`margin:0 auto;`不适用。您需要将其删除。
*   `margin:0 auto;`上`.logo-img`标签是不够的，您需要添加 `text-align:center;`以使图像居中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T13:12:02.133

1.  你的 logo-img 类有一个浮点数：left
2.  如果你想让它自动居中，你必须在 div 上声明宽度：自动。在这种情况下宽度：572px

# c++ - 我们可以在 MS Windows 中以编程方式访问过程控制块吗？

> ID：10636308
> 
> 赞同：0
> 
> 时间：2012-05-17T13:06:18.890
> 
> 标签：c++

我们可以在 MS Windows 中以编程方式访问过程控制块吗？如果是，那么如何（c/c++/jave 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:47:24.817

是的当然。查看一些像 procxp 这样的软件来了解如何在 MS windows 中访问这些块。当然，您应该访问和调用一些 Windows 系统调用和基本 API 以访问提升模式（我的意思是超级用户模式或内核模式）修改这些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T09:39:59.797

是的，通过`NtQueryInformationProcess`. 但请注意，它的内容大多没有记录。

# java - 如何在 for 循环中显示多个图像

> ID：10636312
> 
> 赞同：0
> 
> 时间：2012-05-17T13:06:31.870
> 
> 标签：java, image, for-loop

对于学校，我需要制作一个游戏来处理 [X] 张随机卡片。我使用此代码来构建和显示我的图像。只有一件事出错了。显示项目时，仅显示最后一张卡片。

有什么办法可以让这些图像并排显示？

```
public static void main(String[] args) throws FileNotFoundException, IOException {
    Cards cards = new Cards();
    int dealSize = 6;
    deal = cards.getShuffledCards(dealSize);
    System.out.println("Deal of 4 randomly picked cards " + deal);
    f = new JFrame();
    for(int i=0; i < dealSize; i++) {
        card = deal.get(i).toString();
        f.getContentPane().add(setLabel(card));
    }
    f.pack();
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setLocation(200,200);
    f.setVisible(true);

}

public static JLabel setLabel(String fileLocation) throws FileNotFoundException, IOException {
    InputStream file = new BufferedInputStream(
        new FileInputStream([DIRECTORY TO IMAGES]" + fileLocation));
        BufferedImage image = ImageIO.read(file);
        label = new JLabel(new ImageIcon(image));
        return label;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:07:24.180

您可能必须制作一个任意网格，其中一张卡可以占据每个部分。像 GridLayout 或 GridBagLayout。

从我通过浏览您的代码可以看出，对于每次迭代，您基本上都会覆盖您放置的最后一个元素。

# php - PHP int 和 integer 的区别

> ID：10636321
> 
> 赞同：20
> 
> 时间：2012-05-17T13:06:59.030
> 
> 标签：php

`int`PHP和`integer`PHP之间有什么区别吗？

哪个是更新的或更推荐的用途？

```
$a = (int)"3 euros";
echo $a;  // $a==3

$a = (integer)"3 euros";
echo $a; // $a==3 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2017-06-01T07:42:47.730

当我们使用 php 7.0+ 的类型提示时，就会出现差异

这是有效的

```
function getId(): int 
{
 return $id;
} 
```

这不是

```
function getId(): integer
{
 return $id;
} 
```

第二个会期望你返回一个“类整数”的对象，这会导致一个奇怪的句子：

```
Uncaught TypeError: Return value of getId() must be an instance of integer, integer returned in ... 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T13:08:16.890

不。

它们是相同的，它们都将值转换为整数，一个只是四个字符的更简洁。

[来源](http://php.net/manual/en/language.types.integer.php#language.types.integer.casting)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-17T13:09:22.597

引用[手册](http://php.net/manual/en/language.types.integer.php)：

> 转换为整数
> 
> 要将值显式转换为整数，请使用 (int) 或 (integer) 强制转换。...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-14T09:43:32.263

这并不完全正确，int 和 integer 之间实际上是有区别的。这里有一个简单的例子：

```
//print_r('PHP version: '.phpversion().'<br />');
//PHP version: 5.5.23

$i = '1';

function testme(int $j){
  print_r ($j);
}
testme(intval($i)); 
```

这一小部分代码将打印一个“E_RECOVERABLE_ERROR”，因为 testme 函数需要 'int' 而得到 'integer'。

# java - 如何仅更新primefaces dataTable中的特定单元格

> ID：10636324
> 
> 赞同：9
> 
> 时间：2012-05-17T13:07:10.770
> 
> 标签：java, jsf-2, primefaces

我正在创建一个充满输入字段的动态数据表。有时，当用户在某些输入中插入值时，应更新特定单元格，并且仅更新此单元格。我认为这可能很简单，但并没有使它起作用。我要更新的单元格是“总价值”，当其他两个单元格的值发生变化时，应该更新这个单元格：

![要更新的单元格](../Images/23bc444cc256618122d450d3b6a47ae3.png)

**已编辑**

![js 铬](../Images/974453cecc3edce76fb29c2e0b6fb03e.png)

我用完整的 id 尝试了 f:ajax 并得到了“id 的组件：lancamentoNF:popupLancamentoNF:tabelaItensNF:0:valorTotalItem 未找到”。更改为 p:ajax 并没有发生错误，但它没有更新！

```
<h:panelGroup id="painelItensNF" layout="block" styleClass="hrgi-div-form aba-lancamento-nf clearfix" style="overflow:auto;">
    <h:panelGroup layout="block" style="width: 1700px;">
        <p:dataTable id="tabelaItensNF" value="#{modeloTabelaDinamicaItemNF.itens}" var="itemEmbrulhado" styleClass="tabelaDinamica" height="174" style="width: 100%;" rowIndexVar="indice">
            ... (some columns)
            <p:column style="width: 5%"
                      headerText="quantidade">
                <hrgi:spinner id="quantidadeItem"
                              value="#{itemEmbrulhado.item.produto.detalheTributavel.quantidade}"
                              dinheiro="false"
                              fator="#{itemEmbrulhado.item.produto.detalheTributavel.unidadeFracionada?0.01:1}"
                              local="pt-BR" min="0.00" width="70">
                    <p:ajax event="change"
                            update="lancamentoNF:popupLancamentoNF:tabelaItensNF:#{indice}:valorTotalItem"
                            listener="#{controladorPopupLancamentoNF.calcularValorTotalItem(itemEmbrulhado)}" global="false" />
                    <f:convertNumber
                            maxFractionDigits="#{itemEmbrulhado.item.produto.detalheTributavel.unidadeFracionada?2:0}"
                            minFractionDigits="#{itemEmbrulhado.item.produto.detalheTributavel.unidadeFracionada?2:0}"
                            locale="pt-BR"
                            for="quantidadeItem"/>
                </hrgi:spinner>
            </p:column>
            <p:column style="width: 5%"
                      headerText="valor unitario">
                <hrgi:spinner id="valorUnitarioItem"
                              value="#{itemEmbrulhado.item.produto.detalheTributavel.valorUnitario}"
                              dinheiro="true" fator="0.01" local="pt-BR" min="0.00" width="70">
                    <p:ajax event="change" 
                            update="lancamentoNF:popupLancamentoNF:tabelaItensNF:#{indice}:valorTotalItem"
                            listener="#{controladorPopupLancamentoNF.calcularValorTotalItem(itemEmbrulhado)}" global="false"/>
                    <f:convertNumber type="currency" currencyCode="BRL" currencySymbol="R$ "
                                     maxFractionDigits="10" minFractionDigits="2" locale="#{cc.attrs.local}"
                                     for="valorUnitarioItem"/>
                </hrgi:spinner>
            </p:column>
            <p:column style="width: 3%"
                      headerText="valor total">
                <h:outputText id="valorTotalItem" value="#{itemEmbrulhado.item.produto.valorTotal}">
                    <f:convertNumber type="currency" currencyCode="BRL" currencySymbol="R$ "
                                     maxFractionDigits="2" minFractionDigits="2" locale="pt-BR"
                                     for="valorUnitarioItem"/>
                </h:outputText>
            </p:column>
            ... (more columns)
        </p:dataTable>
    </h:panelGroup>
</h:panelGroup> 
```

当我用完整的 id 更新 panelGroup“painelItensNF”时它可以工作，但是焦点丢失了，用户应该找到他正在努力继续的输入......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T17:18:58.600

只需使用`update="valorTotalItem"`. 它已经相对于当前行了。

所以，更换

```
<p:ajax ... update="lancamentoNF:popupLancamentoNF:tabelaItensNF:#{indice}:valorTotalItem" /> 
```

经过

```
<p:ajax ... update="valorTotalItem" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:07:11.680

我认为不可能更新单个单元格。它的 id 是自动生成的，所以你不能通过 id 更新这个组件。
您可以尝试切换到 primefaces 3.3（还不是最终版本，但您可以开始使用快照），并尝试使用 primefaces 选择器做您想做的事情：http: [//www.primefaces.org/showcase-labs/ ui/selectors.jsf](http://www.primefaces.org/showcase-labs/ui/selectors.jsf)
你会有更多的改变，但我不确定你是否能够做到。

或者，您可以更新面板并添加一些 javascript 以将焦点设置到适当的组件。在 p:ajax 组件的“oncomplete”方法中执行 javascript。

编辑：从更新中删除索引，所以它看起来像这样： ":lancamentoNF:popupLancamentoNF:tabelaItensNF:valorTotalItem" 当然 BalusC 是对的，你也可以只使用 "valorTotalItem"

# c# - 使用两个图像为精灵设置动画

> ID：10636328
> 
> 赞同：0
> 
> 时间：2012-05-17T13:07:39.980
> 
> 标签：c#, wpf

我会认为这是一个共同的愿望，但如果我能找到这个，我会被诅咒的。

我只是想通过来回交换两个图像来为图像设置动画。我尝试了 StoryBoard，但显然您无法更改情节提要中的来源。我能想出的唯一答案是计时器，我认为这不是最好的方法。

**编辑：** [如何在 WPF 中为图像内容设置动画？](https://stackoverflow.com/questions/2783619/how-do-i-animate-image-content-in-wpf)出现在“类似问题”窗口中。虽然这会做我想要的，但正如它的 OP 所说，它是“hackish”，它只交换两个图像，如果我想要一个 10 或 20 或 100 的整个序列怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:43:43.453

我在 SO 上找到了另一篇文章，其答案听起来可以解决您的问题：[使用情节提要在动画期间更改图像](https://stackoverflow.com/questions/1799565/change-a-wpf-image-during-a-stroryboard)

这种方法的问题在于它也不能满足您支持任意数量图像的要求。

我打算提出一种不同的方法，该方法涉及将数据绑定`Image` `Source`到图像路径，然后在后面的代码中简单地更改路径，但我还没有让它工作。

这是一篇似乎有一种优雅的方式来处理您的要求的文章：http: [//www.codeproject.com/Articles/364529/Animation-using-Storyboards-in-WPF](http://www.codeproject.com/Articles/364529/Animation-using-Storyboards-in-WPF)

希望这对你有用。

# jquery - 通过 ajax 动态加载 Jquery 内容会破坏 jquery ui 滑块

> ID：10636329
> 
> 赞同：0
> 
> 时间：2012-05-17T13:07:45.393
> 
> 标签：jquery, jquery-ui, slider

在一个页面上，我有多个 Jquery UI 滑块，它们淡出/在图像中不同图层的不透明度中。它用于投资组合，因此我在加载到页面中的不同 .html 页面中有相同的 div，它将 div 中的内容替换为与新拇指相关的内容。滑块工作正常，然后当我加载新内容时它们不显示。

这是页面链接，拇指在顶部，如果您向下滚动到“分层”部分，然后在其下方“简化层模型演示”，如果您单击开始演示，它将动画滑块进入看法。因此，当页面第一次加载并向下滚动时，滑块就会显示出来。如果您然后向上滚动并选择不同的缩略图并向下滚动并执行相同的操作并提示演示动画，它们不会出现，我不知道为什么会发生这种情况。

[http://www.klossal.com/portfolio/index_current.html](http://www.klossal.com/portfolio/index_current.html)

这是我正在使用的代码：

JS

```
<script type="text/javascript">
$(document).ready(function() {
    //Step 1: set up the slider with some options. The valid values for opacity are 0 
to 1
    //Step 2: Bind an event so when you slide the slider and stop, the following     
function gets called
    $('#slider4').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
                 $('#planet').css('opacity', ui.value)

         }                
    });
$('#slider3').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
                 $('#nebula').css('opacity', ui.value)

         }                
    });
$('#slider2').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
                 $('#light').css('opacity', ui.value)

         }                
    });
$('#slider1').slider({ 
    min: 0, 
    max: 1, 
    step: 0.01, 
    value: 1,
    orientation: "horizontal",
    slide: function(e,ui){
                 $('#starsimg').css('opacity', ui.value)

         }                
    });

});
</script> 
```

CSS

```
#slider4 { width: 280px;}

#slider4 .ui-slider-handle { background: #bbbbbb;border:0px;height:24px;width:24px; }

#slider3 { width: 280px; }
#slider3 .ui-slider-handle { background: #bbbbbb;border:0px;height:24px;width:24px; }

#slider2 { width: 280px; }
#slider2 .ui-slider-handle { background: #bbbbbb;border:0px;height:24px;width:24px; }

#slider1 { width: 280px; }
#slider1 .ui-slider-handle { background: #bbbbbb;border:0px;height:24px;width:24px; }

.ui-widget-content { background: #373737;height:18px;border:0px solid #181818;border-    
color:#-webkit-box-shadow: inset 0px 0px 13px 2px #000000;
box-shadow: inset 0px 0px 13px 2px #000000; } 
```

HTML

```
<DIV id="sliders_all" class="sliders_container" style="float:left;-webkit- 
transform:translate(308px, -5px);">
<img src="/media/divider.png" width="100%" height="20px" border="0"   
style="opacity:0.0;filter:alpha(opacity=0)">

<div id="slider4" data-wjs-element="box"></div>

<img src="/media/divider.png" width="100%" height="20px" border="0"    
style="opacity:0.0;filter:alpha(opacity=0)">

<div id="slider3" data-wjs-element="box"></div>

<img src="/media/divider.png" width="100%" height="20px" border="0" 
style="opacity:0.0;filter:alpha(opacity=0)">

<div id="slider2" data-wjs-element="box"></div>

<img src="/media/divider.png" width="100%" height="20px" border="0"  
style="opacity:0.0;filter:alpha(opacity=0)">

<div id="slider1" data-wjs-element="box"></div>
<img src="/media/divider.png" width="100%" height="20px" border="0"   
style="opacity:0.0;filter:alpha(opacity=0)">
</DIV id="sliders_container"> 
```

当您单击新缩略图时，HTML 部分的代码保持不变，我认为是因为之前的代码已被替换，因此无需担心名称相互冲突。当我确实回去更改周围的一些 ID 名称时，似乎并没有什么不同。

非常感谢我能在这里得到的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T18:17:08.173

我做错了什么是我需要将滑块的 javascript 添加到外部页面中。我确实觉得这有点令人困惑，因为 javascript 已经在加载 html 的页面上，但不知何故它无法引用它，还需要写入外部页面。

# scheme - Guile 方案和标准方案之间的区别（在 Racket IDE 中）？

> ID：10636331
> 
> 赞同：15
> 
> 时间：2012-05-17T13:07:50.743
> 
> 标签：scheme, racket, guile, r6rs, r5rs

我有一堆想要在 Racket Scheme IDE 中运行的“遗留”Guile Scheme 代码。似乎有足够的差异使这成为一项重要的练习。（我的 Scheme 知识水平是完成 The Little Schemer 的水平）。

我的问题是：

1.  Guile 方案和标准方案（在 Racket IDE 中）有什么区别？
2.  鉴于这些差异，一般来说，我需要采取哪些步骤将一些 Guile 方案代码转换为标准方案？

* * *

**附加：（**对 Racket Scheme 和 R5RS/R6RS 之间的分歧感到高兴）-我想要的是在 Racket IDE 中运行“某些东西”-而不是在 Racket 语言中运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T13:29:27.470

如果通过“标准方案（在 Racket IDE 中）”，您的意思是 Racket 语言，即，当您在代码前加上前缀时会得到什么，`#lang racket,`那么要注意的前四个差异是：

*   不同的模块系统
*   不同的宏系统（取决于您的代码的年龄）
*   不可变的 cons-cells（除非你导入可变的）
*   Racket 中没有单臂 ifs（使用`when`）

要将代码从 Guile 移植到 Racket，请找出哪些文件位于您的依赖项的“底部”，即找到不依赖于其他文件的文件。在 Racket 中打开这样的文件，在顶部添加 #lang racket 行，然后尝试运行它。

您很可能会遇到一些“未绑定标识符”错误。如果幸运的话，该功能存在于 Racket 中，但不包含在“racket”语言中。在 Racket 文档中搜索名称，如果找到，则使用 (require ...) 将名称导入程序。

然后再次运行程序，发现下一个错误。

某些函数在 Guile 和 Racket 中的命名不同，因此请在 Guile 文档中查找名称并查看它的作用。然后打开关于同一主题的 Racket 文档，并查看它在 Racket 中的名称。

在某些情况下，您可能需要进行更大的更改。如果您在 Racket 文档中找不到某些功能，请尝试询问邮件列表。可能是它只是有一个不同的名称，或者有人实现了它并将它放在[PLaneT](http://planet.racket-lang.org/)上（因此在你安装包之前它不会出现在文档中）。

* * *

将 srfi/1 导入 R5RS 语言的示例。

```
#lang r5rs
(#%require srfi/1)
(xcons 1 2) 
```

* * *

R4RS 代码与现代 Scheme 的区别？

需要注意的一件事是，在 R4RS 中，空列表 '() 算作假，而不是被解释为真。

有关更多需要注意的事项，请参阅此问题：

[运行基于 SICP 模式匹配规则的替换代码](https://stackoverflow.com/questions/6970006/running-sicp-pattern-matching-rule-based-substitution-code/6976297#6976297)

另请参阅 R5RS 标准 [的更改列表：从 R4RS 到 R5RS 的更改列表](http://www.schemers.org/Documents/Standards/R5RS/HTML/)

# excel - 我可以将 excel 加载项中的函数分配给工作簿中的按钮吗？

> ID：10636336
> 
> 赞同：2
> 
> 时间：2012-05-17T13:07:57.107
> 
> 标签：excel, vba

我想在工作表中有一个按钮，您可以按下该按钮将运行部分加载项。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:28:14.127

> 好的，我会调查的。但是有没有办法用工作表中的按钮来做到这一点？– Jacxel 7 分钟前

是的你可以。

我假设您调用了一个加载项，`MyAddIn.xlam`并且在加载项的模块中有一个名为“Sample()”的过程。我还假设已安装加载项。

将文件替换`MyAddIn.xlam`为相关的加载项名称，并将过程替换`Sample`为相关的过程名称。

```
Option Explicit

Private Sub CommandButton1_Click()
    Application.Run "MyAddIn.xlam!Sample()"
End Sub 
```

# c# - 如果用户已经登录，重定向到不同的页面

> ID：10636337
> 
> 赞同：0
> 
> 时间：2012-05-17T13:07:57.170
> 
> 标签：c#, asp.net, login, response.redirect

我试图让我的网站以 Twitter.com 的方式运行。如果您没有登录，www.twitter.com，打开的第一页是允许访客登录/注册的主页。但是，如果这不是您第一次访问该网站，您将保持登录状态，并且下次访问 www.twitter.com 时，加载的第一个页面是时间线。

从主页页面加载我尝试了以下代码，但我很确定它不正确

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Login1.LoggedIn == true)
    {
        Response.Redirect("abc.aspx");
    }    
} 
```

LoggedIn 下面有一条红色错误线，上面写着“要评估的表达式”

我该如何纠正这个问题，所以如果用户已经登录，加载的第一页是 abc.aspx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:19:20.290

尝试检查 HttpContext 。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        Response.Redirect("abc.aspx");
    }    
} 
```

您可以使用上面的代码添加它，以确保它们在实际登录发生时转到 abc.aspx。

```
protected void Login1_LoggedIn(object sender, EventArgs e)
{
     Response.Redirect("abc.aspx");
} 
```

有关登录控件的更多信息[http://forums.asp.net/t/1403132.aspx/1](http://forums.asp.net/t/1403132.aspx/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:12:32.507

如果您正在使用，请`Forms Authentication`使用`defaultUrl="abc.aspx"`.

**web.config 示例**

```
<authentication mode="Forms">
    <forms loginUrl="Login.aspx" defaultUrl="abc.aspx" />
</authentication> 
```

有关详细信息，请参阅[用于身份验证的表单元素（ASP.NET 设置架构）](http://msdn.microsoft.com/en-us/library/1d3t3c61)。

# php - 根据选择器特异性排序 CSS

> ID：10636340
> 
> 赞同：6
> 
> 时间：2012-05-17T13:08:14.893
> 
> 标签：php, javascript, css, css-selectors, css-specificity

我已将给定的 CSS 文件/字符串解析为 JSON 对象，如下所示：

```
{
    "#header": {
        "color": "#000000"
    },
    "#header h1": {
        "color": "#000"
    },
    "h1": {
        "color": "#4fb6e5"
    }
} 
```

我现在要做的是根据具体性重新排序它们。在这种情况下，`#header h1`应该`h1`在 JSON 对象中的 之后，因为这是在浏览器中应用它们的方式。

我怎样才能做到这一点？是否有任何现有的图书馆？或者任何有用的库来帮助解决这个问题？

我可以同时使用 Javascript/jQuery 或 PHP 来执行此操作。我正在寻找实施建议，希望这已经完成！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:21:53.507

简短的答案：

> 是否有任何现有的图书馆？

不，据我所知，没有人会为您做到这一点“开箱即用”。

> 或者任何有用的库来帮助解决这个问题？

是的，有[`json_decode`](http://php.net/json_decode)和[`uksort`](http://php.net/uksort)：

```
$specificity = function($selector) {

    /*
     * @link http://www.w3.org/TR/selectors/#specificity
     *
     * 9\. Calculating a selector's specificity
     *
     * A selector's specificity is calculated as follows:
     * 
     *  * count the number of ID selectors in the selector (= a)
     *  * count the number of class selectors, attributes selectors, and 
     *    pseudo-classes in the selector (= b)
     *  * count the number of type selectors and pseudo-elements in the 
     *    selector (= c)
     *  * ignore the universal selector
     *
     * Selectors inside the negation pseudo-class are counted like any other, 
     * but the negation itself does not count as a pseudo-class.
     *
     * Concatenating the three numbers a-b-c (in a number system with a large 
     * base) gives the specificity.
     */
    ...
    return (int) $result;
}

$compare = function($a, $b) use ($specificity) {
    return $specificity($a) - $specificity($b)
};

$array = json_decode('{"yours" : "json"}', true);

uksort($array, $compare);

echo json_encode((object) $array); 
```

正如这个代码示例所示，它只解释了如何计算注释中的特异性，它不包含代码。那只是因为我手头没有该代码，但我已经在规范中放入了这是如何完成的（至少对于 CSS 3）。

如果您正在寻找 CSS 选择器解析器，我知道 XDOM（因为我编写了它）。它在 github 上可用：[https](https://github.com/hakre/XDOM) ://github.com/hakre/XDOM - 这是一个 100% CSS 3 兼容的 CSS 选择器解析器。

据我所知，就现成的解决方案而言，这就是您今天所获得的大部分内容。我所知道的所有其他 CSS 选择器解析器都与 CSS 3 标准不完全兼容，因为它们不遵循 W3C 规范。这可能对您有好处：如果您不需要严格的 CSS3 兼容性，您可能会发现一些其他代码块已经满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:18:30.420

实际上有一个按特异性排序的标准算法，我想你可能想看看。

[CSS 特异性](http://swik.net/CSS/CSS+Specificity)

某种启发式公式也很有用，例如检查是否有前导 # 或计算空格和点的数量。

# ruby - 正则表达式匹配文本中的数字

> ID：10636347
> 
> 赞同：0
> 
> 时间：2012-05-17T13:08:47.967
> 
> 标签：ruby, regex

我有一个文本文件，其中包含这样的数字`+12345678912`（以 + 开头，长度为 11 位），在文本中与其他数据之间由制表符空格（看起来像）分隔。

我怎样才能只匹配那些`+`在文本之前有 a 并匹配前 11 个字符（如果它们存在并且它们都是数字）？

更新：

这是输入

```
+12345678912    http://google.com   2012-05-07 11:30:06
+12345678913    http://google.com   2012-05-07 19:26:21 
```

并且输出应该是一个匹配结果的数组

```
[12345678912, 12345678913] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:11:05.453

用这个...

```
matches = str.scan(/^\+(\d{11})/m).flatten!; 
```

[键盘](http://codepad.org/EIFNFIUz)。

# sql - 由于我的 SQL 导致字段重复

> ID：10636359
> 
> 赞同：1
> 
> 时间：2012-05-17T13:09:18.790
> 
> 标签：sql, crystal-reports

```
IF ({PICT_Picture.Job_Print} = TRUE) THEN 
    IF({PICT_Picture.Process_Name}=["SMALL MOULDING","LARGE MOULDING"]) THEN 
         "YES" 
    ELSE
         "NO"
ELSE 
    "NO" 
```

`PICT_Picture.Job_Print`- 是一个复选框，允许我在生产路线卡上打印图片。

`PICT_Picture.Process_Name`- 是一个下拉框，允许我选择图片的处理。

我遇到的问题是，如果我在生成的报告中附加了多个图像，则将为我附加的每张图片创建重复的行，无论是否位于`LARGE MOULDING`、`SMALL MOULDING`、`INSPECTION`等之下。

我对水晶报表和SQL知之甚少，我正在寻找一行代码，无论附加多少图片，每个产品只会生成一行。

如果您需要任何其他信息，请说，我会尽快附上。

谢谢

~编辑

> {ORDE_Goods.Job_Number}=上一个（{ORDE_Goods.Job_Number}）

我把它放在抑制没有向下钻取的地方，它马上就起作用了。

它摆脱了所有重复的工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:21:32.867

在 Crystal 报表中实现此目的的最佳方法是创建一个组。对您的“主键”进行分组，然后将所有字段从报表画布的详细信息部分移动到组页脚部分并禁止详细信息部分。进一步说明：

复制记录前：

![在此处输入图像描述](../Images/caaec6960ce70a799741bffde7801069.png)

之后（抑制了详细信息部分，在订单号上添加了组-我们希望每个订单号有 1 条记录）：

![在此处输入图像描述](../Images/1148cd00e4bf039cb0114c774cb8edcc.png)

大号

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T13:13:41.893

如果您正在执行`SELECT`查询，您是否可以不添加`DISTINCT`以选择每个产品的一行。

例如，

```
SELECT DISTINCT Product, ... FROM YourTable 
```

# javascript - Dojo dijit.layout.TabContainer - 如何将类添加到选项卡？

> ID：10636360
> 
> 赞同：1
> 
> 时间：2012-05-17T13:09:19.357
> 
> 标签：javascript, dojo, dijit.layout, digit

如何将类添加到 TabContainer 中的选项卡？

我发现的唯一东西是设置 iconClass。但是我需要将类添加到选项卡中的父 div。不是它里面的一些嵌套的div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:50:09.490

这不是一个简单的方法，但我可以访问 tabcontainer 对象中的选项卡按钮。

```
var tabContainer = ...; 
dojo.addClass(tabContainer.tablist.pane2button["123"].domNode, "myTabClass"); 
```

[http://jsfiddle.net/cswing/N2hsG/](http://jsfiddle.net/cswing/N2hsG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T07:59:29.037

基于克雷格的建议，这是现代的做法：

```
// assuming there is only one tabContainer on the page it will have an id of 'tab_container'
require( [ 'dijit/registry', 'dojo/dom-class' ], 
    function( registry, domClass )
{
    domClass.add( registry.byId( 'tab_container' ).tablist.pane2button['my_pane_id'].domNode, 'my_css_class' );
} ); 
```

# php - php导出文件很好用写字板而不是记事本查看

> ID：10636365
> 
> 赞同：0
> 
> 时间：2012-05-17T13:09:26.310
> 
> 标签：php, text-files, line-breaks

我们已经设法将 mysql 表中的数据导出到 .txt 文件中。现在用写字板查看的问题很好。但是使用记事本甚至 microsoft word 看起来很糟糕，\n 无法正常工作，因为在记事本中，同一行上的所有内容都不尊重 \n。我应该添加什么？下面是我们的代码。

```
<?php
require_once('config.php');     
// If the checkbox values are meant to all be integers, you might want to perform some validation/sanitisation/filtering here     
// Up to you to do that      // Collapse the IDs from the checkboxes into a comma-delimited string     
$link = mysql_connect(dbHost, dbUser, dbPassword);
if(!$link)
    {
            die('Failed to connect to server: ' . mysql_error());
    }

    //Select database
    $db = mysql_select_db(dbDatabase);
    if(!$db) 
    {
            die("Unable to select database");
    }     
// Template the SQL Query     
$sqlStr = 'SELECT stringData,dataInsertDateTime  FROM tblData  WHERE aID=1965';     
// Compile the SQL Query String     
//$sqlStr = sprintf( $sqlTpl , $export_ids );      
// Execute the SQL Query     
if( !( $sqlRes = mysql_query( $sqlStr ) ) )
{      
 // SQL Error - Log it, Handle it     
}
elseif( mysql_num_rows( $sqlRes )==0) 
{       // No Rows Returned - Log it, Handle it     
}
else
{       // We have results - process them       
$text = array();       
while( $r = mysql_fetch_assoc( $sqlRes ) )
{         // Looping through the returned rows, adding them to the $text array         
$text[] = $r['stringData']."  ".$r['dataInsertDateTime'];       
}       
// Collapse the $text array down into a normal string, with one element per line       
$output = implode( "\n" , $text );        
// Output Handling from @narcisradu's answer       
header("Pragma: public");       
header("Expires: 0");       
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");       
header("Cache-Control: private",false);       
header("Content-Transfer-Encoding: binary;\n");       
header("Content-Disposition: attachment;filename=\"filename.txt\";\n");       
header("Content-Type: application/force-download");       
header("Content-Type: application/octet-stream");       
header("Content-Type: application/download");       
header("Content-Description: File Transfer");       
header("Content-Length: ".strlen($output).";\n");       
echo $output;        die; // Prevent any further output     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:11:46.810

记事本只读取 DOS 换行符`\r\n`（回车 + 换行）。如果不包含`\r`，则所有文本都将显示在一行上，可能会显示不正确的块字符。

我的建议是使用更好的文本编辑器来阅读它们，能够处理不同类型的换行符，而不是修改你的代码。对于 Windows [，我会推荐 Notepad++](http://notepad-plus-plus.org/)。软件世界中相当多的文件将使用`\n`Unix 风格的换行符进行编码，而记事本无法正确读取其中的任何一个（除了无法可靠地打开大文件之外，还有其他问题）。最好切换编辑器。

# sql - 从 B_NBR 中删除最后一位

> ID：10636368
> 
> 赞同：0
> 
> 时间：2012-05-17T13:09:36.667
> 
> 标签：sql

从 B_NBR 中删除最后一个数字。这些数字都是不同的。有人知道一些具体的技巧吗？B_NBR 是 9 位数字，所以我想删除所有第 9 位数字并显示为 8 位数字。例如：- 123456789,987654321，我想要 = 12345678，98765432，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:12:56.590

只需在返回数据时将其转换为 varchar，这样的事情应该可以工作

```
SELECT CAST(B_NBR AS NVARCHAR(8)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:18:02.640

如果您使用的是 TSQL，

```
declare @B_NBR varchar(100)
set @B_NBR = '123456789,987654321'
select  SUBSTRING(@B_NBR, 0, CHARINDEX(',', @B_NBR) - 1),
        SUBSTRING(@B_NBR, CHARINDEX(',', @B_NBR) + 1, 8) 
```

# sql - SQL - OleDbCommand 不更改 Sql 参数

> ID：10636371
> 
> 赞同：3
> 
> 时间：2012-05-17T13:10:01.307
> 
> 标签：sql, parameterized-query

下面是我的 Select * Function 的代码 - 它运行良好并且一切正常，直到我将 SQL 字符串从*Select `*`From Company*更改为

```
 query = "Select * From @1"; 
```

然后执行以下操作

```
 query = "Select * From @1";
        OleDbCommand Command = new OleDbCommand(query, sqlConnStr);

        DataTable Table = new DataTable();
        DataSet dataSet = new DataSet();
        Table = null;

        //Add Parameters
        Command.Parameters.AddWithValue("@1", SQLTables.Company);

        try
        {
            Command.ExecuteNonQuery();
            adapter.SelectCommand = Command;
            adapter.Fill(dataSet);
            Table = dataSet.Tables[0];
        }
        catch (Exception e)
        {
            MessageBox.Show("A Error occured whilst trying to execute the command.\n" + e.Message);
        }

        return Table; 
```

DBMS 不断发回“查询不完整” - 我假设`Command`变量正在发送字符串`query`而不将参数从更改`@1`为`Company`

* * *

这是一段代码（我的），它确实有效。这是一个插入语句，而不是一个选择 - 如果我错了，请纠正我，但它也不能与 SELECT 一起使用

```
private void MainActionsInsert(string Action, bool Checked)
{
    OleDbCommand Command = new OleDbCommand("INSERT INTO MainActions Values (ID, Action, BoolValue)", DataBaseConnection);
    //Add Parameters
    Command.Parameters.AddWithValue("ID", GenerateID());
    Command.Parameters.AddWithValue("Action", Action);
    Command.Parameters.AddWithValue("BoolValue",Checked);
    //Add Command
    MainActionsAdapter.InsertCommand = Command;
    //Execute Agains DataBase
    Command.ExecuteNonQuery();
    //Accept Changes
} 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:15:02.763

OLEDb 无法识别命名参数。您必须`?`在查询文本中使用。

但是，您也不能在参数化查询中使用动态表名，因此即使使用 a`?`也无济于事。

您需要使用完整的[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，尽管这可能会使您面临 SQL 注入。确保您阅读了我链接的完整文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:33:26.763

OleDbCommand 不接受参数化 SQL，只是不在 From 子句中 - 它必须在`WHERE`子句或类似的东西中。就像您说的那样，它与插入功能一起使用，因为它需要那里的*“参数”*。例如，这将起作用

```
 query = "Select * From Company Where @param = 1";
    OleDbCommand Command = new OleDbCommand(query, sqlConnStr);

    DataTable Table = new DataTable();
    DataSet dataSet = new DataSet();
    Table = null;

    //Add Parameters
    Command.Parameters.AddWithValue("param", "ID");

    try
    {
        Command.ExecuteNonQuery();
        adapter.SelectCommand = Command;
        adapter.Fill(dataSet);
        Table = dataSet.Tables[0];
    }
    catch (Exception e)
    {
        MessageBox.Show("A Error occured whilst trying to execute the command.\n" + e.Message);
    }

    return Table; 
```

有趣的是，尽管它不适用于该`Select`部分

# eclipse - 从 SpringSource Tool Suite (STS) 运行集中的 Groovy 单元测试

> ID：10636375
> 
> 赞同：1
> 
> 时间：2012-05-17T13:10:10.293
> 
> 标签：eclipse, unit-testing, grails, sts-springsourcetoolsuite

我有一个包含许多单元测试的 Groovy 单元测试类。在 JUnit 方式中，我通常会在选择测试功能的情况下运行，但这不起作用。

您如何从 STS 运行重点单元测试？我知道在命令行上是可能的，但我想从 IDE 中完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:52:22.907

运行整个套件一次：右键单击文件 -> 运行方式 -> JUnit 测试。

在所有测试出现后，您可以终止该过程。然后选择要运行的单元测试，右键->运行。

或者，打开您的启动配置对话框，创建一个 JUnit 测试启动配置。选择您的项目、包和测试类。您还可以选择单元测试。

# templates - 如何在 NetBeans 中编辑 getter 和 setter 模板？

> ID：10636376
> 
> 赞同：9
> 
> 时间：2012-05-17T13:10:18.897
> 
> 标签：templates, netbeans, getter-setter

默认情况下，NetBeans 生成 3 行 getter 和 setter，如下所示：

```
public int getFoo() {
    return foo;
} 
```

有没有办法让它像这样在一行中生成它：

```
public int getFoo() {return foo;} 
```

*我在工具 -> 选项 -> 编辑器 -> 代码模板*中没有找到任何获取或设置模板

 *是否有其他方法可以编辑它们或插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:33:44.573

看起来你真的不能，但我在[这篇博客文章](http://www.fordfrog.com/2010/07/19/modifying-netbeans-generated-getters-and-setters/)中找到了一个修改 Netbeans 源代码的补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T01:50:25.157

在 NB 7.2+ 上，您可以创建自己的生成器：
尽管在 NB 模块中使用 Javac API（很难做比 getter/setter 更好的事情）

[https://platform.netbeans.org/tutorials/nbm-code-generator.html](https://platform.netbeans.org/tutorials/nbm-code-generator.html)*

# android - android libgdx 并按顺序旋转动作

> ID：10636378
> 
> 赞同：0
> 
> 时间：2012-05-17T13:10:27.357
> 
> 标签：android, rotation, libgdx

我想转动一个轮子某个角度。然后旋转一些小角度。旋转应该有一个缓慢的惯性。为此，我创建了一些具有不同时间的旋转动作以旋转特定角度，然后将其按顺序排列。

但是在从一个动作传递到另一个动作时，我可以注意到停顿。有什么建议我应该怎么做才能在旋转之间顺利通过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:10:51.760

如果只使用一个旋转动作和插值器不是更好吗？插值器应及时减少旋转量。

您可以编写自己的插值器，或者只使用现有的插值器：

*   加速减速插值器
*   加速插值器
*   预期插值器
*   减速插值器
*   线性插值器
*   过冲内插器

# java - Java "new String[-1]" 通过编译。怎么会？

> ID：10636389
> 
> 赞同：26
> 
> 时间：2012-05-17T13:11:05.500
> 
> 标签：java, arrays, compilation

在 Java 中摆弄时，我初始化了一个负长度的新字符串数组。IE -

```
String[] arr = new String[-1]; 
```

令我惊讶的是，编译器并没有抱怨它。谷歌搜索没有提出任何相关的答案。任何人都可以对这个问题有所了解吗？

非常感谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-17T13:14:20.993

原因是 JLS 允许这样做，而将其标记为编译错误的编译器将拒绝有效的 Java 代码。

它在[JLS 15.10.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.10.1)中指定。这是相关的片段：

> *“...如果任何 DimExpr 表达式的值小于零，则抛出 NegativeArraySizeException。”*

现在，如果 Java 编译器将代码标记为错误，那么指定的行为就不会发生……在那个特定的代码中。

此外，在涉及编译时常量表达式（如`-1`. （谁能说这真的是一个错误？）

* * *

> 下一个问题当然是“为什么 JLS 允许这样做？”

您需要询问 Java 设计人员。但是我可以想到一些（大部分）合理的原因：

*   这最初被忽略了，并且没有强有力的理由来修复它。（注意修复它会破坏源代码的兼容性。）

*   它被认为太不寻常/边缘情况不值得处理。

*   它可能会给编写源代码生成器的人带来问题。（想象一下，为了不生成不可编译的代码，必须编写代码来评估编译时常量表达式。使用当前的 JLS 规范，您可以简单地生成“坏”大小的代码，并处理如果代码被执行，则异常（或不异常）。）

*   也许有人计划在 Java 中添加“unarrays” :-)

* * *

其他答案表明编译器可以/应该“标记”这种情况。如果“标记”意味着输出警告消息，那肯定是 JLS*允许的。*但是，编译器是否*应该*这样做是有争议的。一方面，如果上面的代码是错误编写的，那么标记该错误会很有用。另一方面，如果它不是错误（或“错误”不相关），那么警告将是噪音，或者更糟。无论哪种方式，这都是您需要与相应编译器的维护者讨论的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:18:20.507

我看不出为什么不能在编译时标记它（至少作为警告），因为它[在执行时](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.6)[无条件地抛出`NegativeArraySizeException`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.6)。

我用我的编译器做了一些快速的实验，对这种事情似乎出奇的放松。它不会发出关于常量表达式中整数除以零、使用常量索引的越界数组访问等的警告。

由此我得出结论，这里的一般模式是信任程序员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:26:28.590

编译器只负责检查语言的**语法**，而不是你代码的**语义**。因此，编译器没有抱怨错误是合理的，因为您的代码中根本没有语法错误。

在 Java 中，数组是在**运行时**分配的，这绝对没问题。如果是在编译时分配，那么编译器如何检查以下代码？

```
// runtime pass the length, with any value
void t(int length) {
   String[] stirngs = new String[length];
} 
```

当将负值作为长度传递给构造数组时，将抛出运行时异常。

```
public class Main {

    public static void main(String[] args) {
        String[] v = new String[-1];
    }
} 
```

有错误：

```
Exception in thread "main" java.lang.NegativeArraySizeException
    at Main.main(Main.java:5) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:18:15.340

Java 编译器将整数作为数组的长度。它可以是变量或编译时常量。数组的长度是在创建数组时确定的。创建后，它的长度是固定的。

编译器应该将一个负的编译时常量标记为数组的长度。它只是不这样做。如果长度为负数，您将在运行时收到 NegativeArraySizeException。

# java - Servlet 方法没有被调用？

> ID：10636399
> 
> 赞同：0
> 
> 时间：2012-05-17T13:11:32.407
> 
> 标签：java, servlets

我正在尝试将文件上传到 Web 服务器并读取相同的内容。文件上传正在工作并且文件已上传，但是当我调用一些方法来操作保存的文件时，该方法没有被调用。

在以下文件中，我从 post 方法调用 readFile 方法。

我正在使用tomcat 7.0。请救我脱离这一切。代码是：

```
package org.slingemp.fileupload;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.slingemp.bean.setNotification;
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Iterator;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils;

import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFCell;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Iterator;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.ArrayList;
import java.util.Map;

/**
 * Servlet implementation class Fileupload
 */
@WebServlet("/Fileupload")
public class Fileupload extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public Fileupload() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doPost(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
          System.out.println("file upload started....Antony");
        // TODO Auto-generated method stub
        List fileItemsList = null;
        float filesize = 0;
        String _fileLink;
        String _fileName = null;
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        // Change upload with your directory
        HttpSession session = request.getSession(true);
        try {
            if (ServletFileUpload.isMultipartContent(request)) {
                ServletFileUpload servletFileUpload = new ServletFileUpload(
                        new DiskFileItemFactory());
                try {
                    fileItemsList = servletFileUpload.parseRequest(request);
                } catch (FileUploadException ex) {
                    Logger.getLogger(Fileupload.class.getName()).log(
                            Level.SEVERE, null, ex);
                    // Change above line replace FileUploadExample with your
                    // file name
                }
                String optionalFileName = "";
                FileItem fileItem = null;

                Iterator it = fileItemsList.iterator();
                while (it.hasNext()) {
                    FileItem fileItemTemp = (FileItem) it.next();
                    if (fileItemTemp.isFormField()) {
                        if (fileItemTemp.getFieldName().equals("filename")) {
                            optionalFileName = fileItemTemp.getString();
                        }
                        /*
                         * If you want to pass some other data from JSP page.
                         * You can access then in this way. For each field you
                         * have do create if like below. if
                         * (fileItemTemp.getFieldName
                         * ().equals("Name of other field like:Firstname")) {
                         * String Firstname = fileItemTemp.getString(); }
                         */
                    } else {
                        fileItem = fileItemTemp;
                    }
                }
                if (fileItem != null) {
                    long size_long = fileItem.getSize();
                    filesize = size_long / 1024;
                    filesize = filesize / 1000;
                    // If you want to limit the file size. Here 30MB file size
                    // is allowed you can change it
                    //if (filesize > 30.0) {
                        // Pass error message in session.
                        //setNotification _sN = new setNotification();
                        //_sN.setError("File size can't be more than 30MB");
                        //session.setAttribute("error", _sN);
                    //} else {
                        _fileName = fileItem.getName();
                        if (fileItem.getSize() > 0) {
                            if (optionalFileName.trim().equals("")) {
                                _fileName = FilenameUtils.getName(_fileName);
                            } else {
                                _fileName = optionalFileName;
                            }
                                _fileLink = "../accesscarddata/" + _fileName;
                            try {
                                File file = new File(new File(_uploadDir + "/"),fileItem.getName());
                                fileItem.write(file);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            setNotification _sN = new setNotification();
                            _sN.setError("File Uploaded to : " + _fileLink + "");
                            session.setAttribute("accesscardDatafileNname", _fileName);
                            session.setAttribute("error", _sN);

                        }
                    //}
                }
                //SELECT * FROM leave_application WHERE from_date >= '2004-01-01' AND to_date <'2004-01-30' and emp_id=128
            }
        } catch (Exception e) {
            e.printStackTrace();
        } 
        System.out.println("before calling readFile");
        readFile(request,response);
        System.out.println("after calling readFile");

        response.sendRedirect("index.jsp");

    }
    protected void readFile(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {
        System.out.println("readFile is called..");
        Map employeeMap = null;

        String fileName = "",employeeAttendanceFilePath="";
        String _uploadDir = getServletContext().getRealPath("/accesscarddata/");
        HttpSession session = request.getSession(true);
        if(session.getAttribute("accesscardDatafileNname") != null)
            fileName = (String) session.getAttribute("accesscardDatafileNname");

        employeeAttendanceFilePath = _uploadDir+fileName;
        System.out.println("File Path : "+employeeAttendanceFilePath);
        List sheetData = new ArrayList();
        FileInputStream fis = null;
        try {
            fis = new FileInputStream(employeeAttendanceFilePath);
            // Create an excel workbook from the file system.
            HSSFWorkbook workbook = new HSSFWorkbook(fis);
            HSSFSheet sheet = workbook.getSheetAt(0);// gets the first sheet on workbook
            Iterator rows = sheet.rowIterator();
            while (rows.hasNext()) {
                HSSFRow row = (HSSFRow) rows.next();
                Iterator cells = row.cellIterator();
                //count=count+1;
                List data = new ArrayList();
                while (cells.hasNext()) {
                    HSSFCell cell = (HSSFCell) cells.next();
                    data.add(cell);
                }
                sheetData.add(data);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (fis != null) {
                fis.close();
            }
        }
        session.setAttribute("sheetData", sheetData);
        processEmployeeAttendance(request,response);
        System.out.println("employeeMap : "+employeeMap);

        if(session.getAttribute("employeeMap")!=null)
            employeeMap = (LinkedHashMap) session.getAttribute("sheetData");

        Iterator<Map.Entry> entries = employeeMap.entrySet().iterator();
        while (entries.hasNext()) {
            Map.Entry entry = entries.next();
            System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
        }
    }
    protected void processEmployeeAttendance(HttpServletRequest request,HttpServletResponse response) throws ServletException, IOException {

        System.out.println("processEmployeeAttendance is called...");
        String tempEmpid="",strdepartment="";
        int j=1;
        List sheetData =null;
        HttpSession session = request.getSession(true);
        if(session.getAttribute("sheetData")!=null)
            sheetData = (ArrayList) session.getAttribute("sheetData");

        Map employeeMap = new LinkedHashMap();
        Map tempEmployeeMap = new LinkedHashMap();

        for (int i = 0; i < sheetData.size(); i++) {
            List list = (List) sheetData.get(i);
                HSSFCell employeeid = (HSSFCell) list.get(0);
                HSSFCell department = (HSSFCell) list.get(3);
                HSSFCell date = (HSSFCell) list.get(5);

                strdepartment = department.getRichStringCellValue().getString();
               if(!tempEmpid.equals("")){
                       if(tempEmpid.equals(employeeid.getRichStringCellValue().getString()) && !(employeeid.getRichStringCellValue().getString().equals("EmpID") || date.getRichStringCellValue().getString().equals("Date") || department.getRichStringCellValue().getString().equals("Department"))){
                           if(!(strdepartment.equals("Temporary Card") || strdepartment.equals("Contractor"))){
                               employeeMap.put(employeeid.getRichStringCellValue().getString()+"_"+j,date.getRichStringCellValue().getString());
                            //      System.out.println("j value : "+j+":"+employeeid.getRichStringCellValue().getString()+"_"+j+","+date.getRichStringCellValue().getString());
                                    j++;
                            }
                       }else{
                            tempEmpid =  employeeid.getRichStringCellValue().getString();
                            j=0;
                       }
               }else{
                   tempEmpid =  employeeid.getRichStringCellValue().getString();
               }
              // System.out.println("");
        }
        session.setAttribute("employeeMap", employeeMap);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:52:41.507

我想把它作为评论，但不知何故我无法评论。我的建议是使用您的 IDE 调试代码。在相关位置放置断点，看看它的去向。

# html - 使用 iframe 进行垂直滚动

> ID：10636406
> 
> 赞同：0
> 
> 时间：2012-05-17T13:11:54.363
> 
> 标签：html, css, iframe

代码 ：

```
<iframe id="mainiframe" name="mainiframe"  src="path" style="width: 100% !important;height:700px;"
 scrolling="yes" frameborder="0">
</iframe> 
```

当 iframe 的内容超过它的高度时，它将在 iframe 内显示滚动但我想在浏览器上进行相同的滚动。

浏览器滚动条怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:23:46.210

另一个解决方案是添加一个 100% 的 CSS 高度属性加上一个额外的底部边距像素来强制滚动条，例如。

```
html, body {
height: 100%;
margin: 0 0 1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:13:37.063

我不确定我是否完全理解 - 浏览器自动具有该功能。您可能正在寻找`overflow-y: scroll`始终强制滚动条的 CSS。

你会想这样说：

```
html {
  overflow-y: scroll;
} 
```

# python - Python psycopg2 + mod_wsgi：连接很慢并自动关闭

> ID：10636409
> 
> 赞同：0
> 
> 时间：2012-05-17T13:12:04.270
> 
> 标签：python, web-services, apache2, mod-wsgi, psycopg2

我制作了一个 python ladon webservice，我在 Ubuntu 上运行 Apache2 和 mod_wsgi。（我使用 Python 2.6）。Web 服务使用 psycopg2 python 模块连接到 postgreSQL 数据库。我的问题是 psycopg2.connection 会在一段时间后（大约 1 或 2 分钟后）自动关闭（或销毁）。另一方面，如果我使用
ladon2.6ctl testserve 命令 (http://ladonize.org/index.php/Python_Configuration) 运行服务器，则服务器正在工作并且连接不会自动关闭。我不明白为什么用 apache+mod_wsgi 关闭了连接，在这种情况下，网络服务器非常慢。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T01:38:39.233

如果您在嵌入式 moe 中使用 mod_wsgi，尤其是用于 Apache 的 preform MPM，那么 Apache 很可能正在杀死空闲进程。尝试使用 mod_wsgi 守护进程模式，它可以保持进程持久化，看看它是否有所作为。

# themes - 为 JS 修改 Sublime Text 2

> ID：10636410
> 
> 赞同：6
> 
> 时间：2012-05-17T13:12:05.247
> 
> 标签：themes, sublimetext2

我几乎是“Mathematica”之外编程的初学者。

我使用 Sublime Text 2 并且主要需要在 JS 中编写代码，并且我想使用与首选项中已经存在的颜色主题不同的颜色主题。

例如，我想使用[这个主题](http://www.eclipsecolorthemes.org/?view=theme&id=66)

我安装 Eclipse 的尝试尚未失败，我正在使用带有最新版本 Lion 的 mac。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-05T18:08:38.410

大多数主题都支持 JavaScript 语法高亮。如果它没有自动出现，可能是因为 SublimeText 没有将文件识别为包含 JavaScript。您可以通过转到视图 > 语法 > JavaScript > JavaScript 来强制它。

如果您需要定义特定语法，则必须[构建自己的语法定义](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html "语法定义")。该指南有一个[循序渐进的过程](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html#your-first-syntax-definition)。

如果您需要添加或更改一些定义，我建议您复制现有的 JavaScript 语法定义并进一步完善它。语法定义由正则表达式定义，并保存在 XML 文件中。如果您的变量可以通过特定的正则表达式来区分，您将能够使用单独的规则对它们进行颜色编码。

[Sublime Text 2: diff syntax highlighting with a light background color scheme](http://asqueella.blogspot.com/2011/09/sublime-text-2-diff-syntax-highlighting.html)给出了更新主题以显示新语法的不同颜色的简洁示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:06:53.590

Sublime Text 2 有 22 个不同的主题，您可以使用菜单（首选项 > 颜色方案）更改它们。我认为其中一些与您想要的相似。:)

另一个已知的主题是苏打水：[https ://github.com/buymeasoda/soda-theme](https://github.com/buymeasoda/soda-theme)

如果您想创建自己的主题，您可以复制其中一个并进行修改。主题位于数据目录中的“颜色方案 - 默认”，复制其中一个，修改并在菜单中选择它（首选项 > 颜色方案）。

数据目录取决于您的 SO：

*   OS X：~/Library/Application Support/Sublime Text 2
*   Windows：%APPDATA%\Sublime Text 2
*   Linux：~/.config/sublime-text-2

问候， 阿曼多

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T15:06:06.473

正如 ms4py 所指出的，您需要的是配色方案。Sublime Text（和 ST2）使用 TextMate 提供的旧格式 .tmTheme。基本上它是一个带有特定标记的 xml 文档。

检查应用程序菜单“Preferences”>“Browse Packages”，一个 Finder 窗口将弹出到 Sublime 的包文件夹。在那里你会找到文件夹“Color Scheme - Default”，其中包含你安装的默认主题，包括 iPlastic.tmTheme。

只需在文本编辑器中打开文件（ST 就可以了；））并更改您想要调整的部分，例如更改您的“关键字”样式查找：

```
<dict>
  <key>name</key>
  <string>Keyword</string>
  <key>scope</key>
  <string>keyword</string>
  <key>settings</key>
  <dict>
    <key>foreground</key>
    <string>#0000FF</string>
  </dict>
</dict> 
```

并根据自己的喜好调整前景色（在这种情况下为#0000FF）。您可以在整个文件中找到其他受支持的属性，例如*foreground*、*background*或*fontStyle*。

# php - 将变量保存到数据库时出错

> ID：10636415
> 
> 赞同：0
> 
> 时间：2012-05-17T13:12:56.683
> 
> 标签：php, database, mysqli

我正在尝试将文章和标题保存到我的数据库中。我在 mysqli 中使用 OOP 编程语言（getter、setter）。在这里，您可以从课堂上看到我的代码。

```
<?php
class Article {
    private $m_sTitle;
    private $m_sArticle;

public function __set($p_sProperty, $p_vValue) 
{
        switch($p_sProperty) 
        {
            case "Title" :
                $this -> m_sTitle = $p_vValue;
                break;
            case "Article" :
                $this -> m_sArticle = $p_vValue;
                break;
        }
}   

public function __get($p_sProperty) 
{
        $vResult = null;
        switch($p_sProperty) 
        {
            case "Title" :
                $vResult = $this -> m_sTitle;
                break;
            case "Article" :
                $vResult = $this -> m_sArticle;
                break;
        }
}

public function saveArticle() 
    {
        include("connection.php");
            $sSql = "INSERT INTO tblArticles
                (titel, 
                article, 
                ) 
                VALUES 
                ('".mysqli_real_escape_string($mysqli, $this -> m_sTitle) . "', 
                '" .mysqli_real_escape_string($mysqli, $this -> m_sArticle) . "', 
                );";

        if (!$mysqli -> query($sSql))
        {
            throw new Exception("Something went wrong");
        }

    }
}

?> 
```

在这里您可以看到 php 文件中的代码。

```
if(isset($_GET['title'])=="")
{
 //do nothing   
}
else {
    $titel = $_GET['title'];
 $artikel = $_GET['content'];

include("assets/connection.php");
include("assets/article.class.php");

$article1 = new Article;
$article1 -> Title = $titel;
$article1 -> Article = $artikel;
$article1 -> saveArticle() ;
} 
```

我收到此错误：致命错误：在 ../assets/article.class.php:48 中未捕获异常 'Exception' 并带有消息 'Something wrong' 堆栈跟踪：#0 ../index.php(52): Article- >saveArticle() #1 {main} 在第 48 行的 ..assets/article.class.php 中抛出（此行 $article1 = new Article;）

感谢您的回复！

**通过替换查询（类型错误）解决了问题，您可以在这句话下方看到工作部分（查询）。**

```
 $sSql = "INSERT INTO tblArticles
                (titel, 
                article 
                ) 
                VALUES 
                ('".mysqli_real_escape_string($mysqli, $this -> m_sTitle) . "', 
                '" .mysqli_real_escape_string($mysqli, $this -> m_sArticle) . "');"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:17:53.160

`article`您的查询后面有一个不需要的逗号：

```
INSERT INTO tblArticles
            (titel, 
            article,) VALUES ... 
```

# objective-c - 使用 NSOutlineView 作为文件浏览器，从给定目录开始

> ID：10636416
> 
> 赞同：1
> 
> 时间：2012-05-17T13:12:59.670
> 
> 标签：objective-c, cocoa, nsfilemanager, nsoutlineview

我一直在按照本教程使用 NSOutlineView 作为分层文件浏览器：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OutlineView/Articles/UsingOutlineDataSource.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/OutlineView/Articles/UsingOutlineDataSource.html)

我使用了教程中的所有代码并且它工作正常。但是，然后我尝试`initWithPath:`使用除此之外的路径进行调用，`/`但它不起作用：`fullPath`顶部项目（即在 中指定的文件夹`initWithPath`）只是文件夹的名称，并且该`children`方法`FileSystemItem`返回一个空数组，我假设是因为文件管理器正在查找`/FolderName/`而不是绝对路径，它似乎永远不会被保存。

我如何修改此代码以允许它执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T21:54:53.827

上面的代码几乎可以工作。一旦您尝试打开文件夹，它就会崩溃。试试这个修改。它非常适合我：

```
- (id)initWithPath:(NSString *)path parent:(FileSystemItem *)parentItem {
  if (self = [super init]) {
    relativePath = [path copy];
    parent = parentItem;
  }
 return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-22T00:07:24.240

修改以下方法：

```
- (id)initWithPath:(NSString *)path parent:(FileSystemItem *)parentItem {
    self = [super init];
    if (self) {
        relativePath = path; //[[path lastPathComponent] copy];
        NSLog(@"%@",relativePath);
        parent = parentItem;
    }
    return self;
} 
```

原始逻辑假定您将从根目录开始。这应该使它可以在任何路径上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T07:47:27.483

试试这个代码 - [https://github.com/johndpope/TreeTest](https://github.com/johndpope/TreeTest)

```
//
//  ViewController.m
//  TreeTest
//
//  Created by Zakk Hoyt on 7/9/14.
//  Copyright (c) 2014 Zakk Hoyt. All rights reserved.
//

#import "ViewController.h"
#import "VWWContentItem.h"
#import "FileSystemItem.h"

typedef void (^VWWEmptyBlock)(void);
typedef void (^VWWCLLocationCoordinate2DBlock)(CLLocationCoordinate2D coordinate);
typedef void (^VWWBoolDictionaryBlock)(BOOL success, NSDictionary *dictionary);

@interface ViewController ()
@property (weak) IBOutlet NSOutlineView *outlineView;
@property (weak) IBOutlet NSPathControl *pathControl;
//@property (strong) NSMutableArray *contents;
@property (strong) VWWContentItem *item;
@property (strong) NSIndexSet *selectedIndexes;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    NSString *picturesPath = [NSString stringWithFormat:@"%@/%@", NSHomeDirectory(), @"Pictures"];
    self.pathControl.URL = [NSURL fileURLWithPath:picturesPath];
//    [FileSystemItem rootItemWithPath:self.pathControl.URL.path];
//    [self seachForFilesInDirectory:picturesPath];

}

- (void)setRepresentedObject:(id)representedObject {
    [super setRepresentedObject:representedObject];

    // Update the view, if already loaded.

}
- (IBAction)pathControlAction:(NSPathControl *)sender {

}

// Data Source methods

- (NSInteger)outlineView:(NSOutlineView *)outlineView numberOfChildrenOfItem:(FileSystemItem*)item {
    return (item == nil) ? 1 : [item numberOfChildren];
}

- (BOOL)outlineView:(NSOutlineView *)outlineView isItemExpandable:(FileSystemItem*)item {
    return (item == nil) ? YES : ([item numberOfChildren] != -1);
}

- (id)outlineView:(NSOutlineView *)outlineView child:(NSInteger)index ofItem:(FileSystemItem*)item {
//    return (item == nil) ? [FileSystemItem rootItem] : [(FileSystemItem *)item childAtIndex:index];
    return (item == nil) ? [FileSystemItem rootItemWithPath:self.pathControl.URL.path] : [(FileSystemItem *)item childAtIndex:index];
}

- (id)outlineView:(NSOutlineView *)outlineView objectValueForTableColumn:(NSTableColumn *)tableColumn byItem:(FileSystemItem*)item {
    if([tableColumn.identifier isEqualToString:@"tree"]){
        return (item == nil) ? @"/" : (id)[item relativePath];
//        return (item == nil) ? @"Pictures" : (id)[item relativePath];
    } else if([tableColumn.identifier isEqualToString:@"coordinate"]){
        return @"coordinate";
    }

    return nil;
//    return (item == nil) ? self.pathControl.URL.path : (id)[item relativePath];
}

// Delegate methods

- (BOOL)outlineView:(NSOutlineView *)outlineView shouldEditTableColumn:(NSTableColumn *)tableColumn item:(FileSystemItem*)item {
    return NO;
}

@end 
```

# jquery - 如何在 jQM 图像按钮上换行？

> ID：10636420
> 
> 赞同：2
> 
> 时间：2012-05-17T13:13:06.167
> 
> 标签：jquery, css, jquery-ui, jquery-mobile

我正在尝试在图像按钮上包装文本：

![在此处输入图像描述](../Images/3aa1e9050b82cdbbd373d1064dcbf5c0.png)

我得到了新文件，但我想成为

新的

文档

```
#menuoptions .ui-block-a.ui-btn.ui-btn-inline.ui-btn-corner-all.ui-shadow.ui-btn-up-c {
    height: 150px;
    width: 150px;
}

#imglogo {
    display: block;
} 
```

HTML

```
<a href="newdocument.html" rel="external" class="ui-block-a ui-btn ui-btn-inline ui-btn-corner-all ui-shadow ui-btn-up-c">
        <span class="ui-btn-inner ui-btn-corner-all">
        <span class="ui-btn-text">
            <img src="img/calendar.png" id="imglogo" width="75" height="75">New Document</span></span></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:21:52.750

尝试：

```
.ui-btn-text {width: 75px; display: block;} 
```

[小提琴](http://jsfiddle.net/adeneo/Ls9dN/1/)

# emacs - 为什么没有启用模式？

> ID：10636424
> 
> 赞同：1
> 
> 时间：2012-05-17T13:13:18.163
> 
> 标签：emacs, dot-emacs

我有一个 emacs 配置文件`whatever.el`：

```
(abbrev-mode +1)
(provide 'whatever) 
```

在我的`init.el`：

```
(require 'whatever) 
```

但是当我启动 emacs 时，`abbrev-mode`没有启用。为什么 ？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:28:12.497

引用[http://emacswiki.org/emacs/AbbrevMode](http://emacswiki.org/emacs/AbbrevMode)：

> 如果您希望它始终打开，您还可以将以下内容放入您的 ~/.emacs 文件中：
> 
> ```
> (setq default-abbrev-mode t) 
> ```
> 
> 如果您只想在文本和派生模式下启用它，您可以执行以下操作：
> 
> ```
> (add-hook 'text-mode-hook (lambda () (abbrev-mode 1))) 
> ```
> 
> 对于多种模式，请使用以下内容：
> 
> ```
> (dolist (hook '(erc-mode-hook
>                 emacs-lisp-mode-hook
>                 text-mode-hook))
>   (add-hook hook (lambda () (abbrev-mode 1)))) 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:24:18.423

每个缓冲区启用缩写模式。

一种方法是创建一个挂钩函数，您可以将其添加到您想要使用它的主要模式挂钩中。

例如：

```
(defun my-enable-abbrev-mode ()
  (abbrev-mode 1))
(add-hook 'c-mode-hook 'my-enable-abbrev-hook)
(add-hook 'java-mode-hook 'my-enable-abbrev-hook) 
```

另一种方法是使用`change-major-mode-hook`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-18T19:27:07.477

虽然其他人解释了如何获得您可能想要的东西，但我只是针对您的实际问题（“为什么？”）指出这一点，原因很简单：abbrev-mode 是一种缓冲区本地次要模式，所以当您在启动时运行 (abbrev-mode +1) 它只会在缓冲区中启用 abbrev-mode，该缓冲区在评估`~/.emacs`（通常是*scratch*）期间恰好是当前的，但不会在后续缓冲区中。

# c# - 使用带有异步的 Tcp 接收消息问题

> ID：10636427
> 
> 赞同：0
> 
> 时间：2012-05-17T13:13:36.810
> 
> 标签：c#, asynchronous, tcp, buffer

我有一个代码（假设是一个简单的聊天应用程序），我使用了同步的 Tcp。但是由于异步方式更好，虽然它更难设置，所以我决定将方式从同步更改为异步。但现在我在使用异步时遇到了一些问题。

1.  缓冲区大小：我知道我们需要考虑有限大小的字节才能从对等方获取字节。我读了很多文章，但我的问题没有解决，我有一个非常简单但毫无价值的方法来解决这个问题，在每条消息的末尾加上一个字符；然后接收者可以理解何时完全接收到消息。但我有另一个问题阻止我进一步执行这种方法来解决它对我的另一个问题。

让我通过以下代码解释我的问题：

```
public void Send(byte[] message, Socket connection)
{
    connection.BeginSend(message, 
                         0, 
                         message.Length, 
                         SocketFlags.None, 
                         new AsyncCallback(OnSend), 
                         connection);
} 
```

在 OnSend 方法上，我只使用**connection.EndSend(result)**，其中结果是 IAsyncResult。但是当我像下面的代码那样调用 Send 方法两次时， OnReceive 回调将把它们作为一条消息接收。

```
Send(Encoding.Unicode.GetBytes("Hello"));
Send(Encoding.Unicode.GetBytes("Bye")); 
```

我的 OnReceiveMethod 将使用**Console.WriteLine(message);** 其中 message 是从对等方接收到的字符串。并且使用同步方式的输出必须是

*你好*

*再见*

但是以异步方式，我将其作为一条消息而不是两条消息接收，因此将其打印

*你好再见*

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T12:38:28.817

我必须说我真的不同意简单地切换到同步套接字来克服这个问题。更好的方法是使用`Queue<string>`（例如）在发送呼叫时将消息放入的位置。

然后你有你的异步套接字从这个队列中取出数据包，并在当前一个完成发送时发送下一个，直到队列为空。

然后您可以选择在队列中再次出现消息之前不再调用 BeginSend。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:55:04.610

使用同步调用，您可以保证在发送第二条消息之前完全发送第一条消息。但是，使用异步方法，您只是将两条消息添加到传出队列中，等待发送。如果您碰巧在正确的时间点击它，它可能会将它们作为两条单独的消息发送，但由于您将它们都添加得如此之快，它很可能会同时发送它们。如果您将 TCP/IP 套接字通信视为单个持续的数据流，那么您的情况会好得多。您需要以一种可以确定它们的开始和结束位置的方式来格式化您的消息。当您通过套接字接收数据时，您应该继续将接收到的消息添加到缓冲区，直到您确定（基于数据的格式）您已收到完整的消息。您不应该依赖从套接字读取的每次消息都是一条完整的消息。您应该期望它可能只是部分消息，甚至是多条消息。

# sql-server-2008 - 更新表中的列

> ID：10636429
> 
> 赞同：1
> 
> 时间：2012-05-17T13:13:38.693
> 
> 标签：sql-server-2008, sql-server-2005

我需要更新 int 数据类型的表中的列，但我用于更新的其他表中的值是 nvarchar。如果可以的话，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:16:38.443

它可能是这样的：

```
update tablename
set t.column = convert(int, t2.column)
from tablename t
inner join secondtablename t2 on t.column = t2.column
where ISNUMERIC(t2.column) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:17:54.603

如果您在 nvarchar 列中的所有数据都是数字，那么您应该能够：

```
update ATable
set intColumn = cast(o.chardata as int)
from ATable a
join OtherTable o on a.tableid=o.tableid 
```

现在，您还可以使用 ISNUMERIC() 约束输入逻辑来处理非数字数据。

我看到 aF 打败了我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T18:35:59.613

```
CREATE TABLE #t
(
    ID int IDENTITY(1,1),
    Column1 int
)

CREATE TABLE #t1
(
    ID int IDENTITY(1,1),
    Column2 Varchar(50)
)

INSERT INTO #t(Column1)VALUES(1)
INSERT INTO #t(Column1)VALUES(2)

INSERT into #t1(Column2)values('Alpha Numeric')
INSERT into #t1(Column2)values('12')

UPDATE t
SET t.Column1 = t1.Column2
FROM #t t
INNER join #t1 t1 on t.ID = t1.ID
Where ISNUMERIC(t1.Column2) = 1

select * FROM #t

DROP TABLE #t
DROP TABLE #t1 
```

# android - 如何在我的 PC 上运行 Apache Tomcat Webserver 并从真正的 Android 设备访问？

> ID：10636430
> 
> 赞同：1
> 
> 时间：2012-05-17T13:13:40.550
> 
> 标签：android, ip, tomcat7

我的 PC 上运行着 Tomcat 7.0 服务器，我通过 Url 通过 Emulator 访问 servlet

```
http://10.0.2.2:8084/MyServer 
```

我现在为此苦苦挣扎了几个小时。我已经了解了以下步骤来实现这一目标

1.  我需要一个静态 IP 地址吗？因此，我使用`No-IP Free`将动态 IP（我有拨号连接）转换为静态 IP。

2.  我需要更改 Windows 7 中的防火墙规则。我尝试更改`Inbound Rules`for `'port 8084'`，但没有成功。

*我的问题是如何通过具有 GPRS 连接的真实 Android 设备访问我的 PC 上的同一服务器？*

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:23:47.193

wifi是最好的答案。让您的机器和手机在同一个网络上。如果这不是一个选项，我建议本地隧道： http: [//progrium.com/localtunnel/](http://progrium.com/localtunnel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:43:45.563

只要您的服务器有公共 IP 地址，就可以了。您应该首先尝试使用*已知*IP 地址从您的设备访问它，然后进行名称解析，其中 DynDNS 或 No-IP Free 将是有效选项。

假设您在任何给定时间的公共 IP 是`1.2.3.4`，试试

```
http://1.2.3.4:8084/MyServer 
```

它应该可以工作。然后配置任何提到的服务并尝试使用主机和域名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T20:14:57.290

Windows PC 和有线/无线路由器上的防火墙规则都需要允许到端口 8084 的传入连接。

在路由器上，设置到 8084 的传入连接以重定向到您的 Windows PC 的本地 IP 地址 ( `127.0.0.1`)。这称为“端口转发”——查看路由器手册以了解如何操作。

一旦您的路由器将传入端口 8084 请求转发到您的 Windows 机器，您就可以从外部访问它：

```
http://your-dynamic-address.com:8084/MyServer 
```

# c# - 额外的文本被写入文件 c#

> ID：10636434
> 
> 赞同：0
> 
> 时间：2012-05-17T13:13:52.400
> 
> 标签：c#, file, stream, buffer

我目前正在尝试找到读取文本并将其重新写入文本文件的最有效方法。当我这样做时（使用 223 KB 的文件），我得到一个 224 KB 文件的结果，在原始文件中附加了一些额外的句子。（这几个额外的句子似乎是从文件中间抓取的）。我似乎无法找到问题所在。以下是我正在使用的代码：

```
 while(...)
        {
            writeStream.Write(array, 0, array.Length);

            if (read == 0)
                break;
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T13:15:11.533

它应该是：

```
writeStream.Write(array, 0, read ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:22:07.783

'write' 方法的第三个参数不正确。用 read 替换它，它应该可以工作

# facebook - 带有 rails3 的 Facebook 画布应用程序

> ID：10636440
> 
> 赞同：2
> 
> 时间：2012-05-17T13:14:13.737
> 
> 标签：facebook, ruby-on-rails-3, omniauth, facebook-canvas

我正在使用omniauth-facebook gem 用Rails3 编写facebook 画布应用程序。有几点不清楚：

1.  唱歌后的Rdirect（在'/auth/facebook/callback' => 'session#create'）：
    成功sing_in后，如果用户被重定向到root_url，它*有时会*到达我的画布页面URL（http://localhost:3000）外面的框架。另一方面，当将他重定向到我的应用程序 url (http://apps.facebook.com/my_app) 时，它*有时会*堆叠在框架内的空白页面上。那么**如何正确处理这个重定向呢？**

2.  **在我的应用程序内的页面之间链接的正确方法是什么？**目前我使用相对链接，并且 top.location url 始终保留我的应用程序 url (http://apps.facebook.com/my_app)。但我看到许多 facebook 应用程序重定向客户端 top.location (http://apps.facebook.com/my_app/internal_link)...它又提出了一个问题：

3.  现在 facebook 总是使用 POST 方法将我的应用程序获取到 iframe 中。**如何在 RESTful rails 应用程序中处理这种行为？**

我非常感谢任何建议...

# perl - 响应代码 Net::Twitter:Stream

> ID：10636448
> 
> 赞同：1
> 
> 时间：2012-05-17T13:14:56.197
> 
> 标签：perl, streaming, twitter, perl-module

我是这个论坛的新手，我在使用 perl 库 Net::Twitter:Stream 时遇到了一些问题。我正在关注此链接[Net::Twitter:Stream](http://cpan.uwinnipeg.ca/htdocs/Net-Twitter-Stream/Net/Twitter/Stream.html)中的示例。

但是当我得到一个错误的响应代码（不是 200）并且我必须停止我的算法时，它就丢失了。那么，在这种情况下我能做些什么呢？怕是用了这么多，进了推特黑名单……

我基于以下代码：

```
use Net::Twitter::Stream;
Net::Twitter::Stream->new ( user => $username, pass => $password,
                          callback => \&got_tweet,
                          track => 'perl,tinychat,emacs',
                          follow => '27712481,14252288,972651' );
sub got_tweet {
     my ( $tweet, $json ) = @_;   # a hash containing the tweet
                                  # and the original json
     print "By: $tweet->{user}{screen_name}\n";
     print "Message: $tweet->{text}\n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T18:41:17.587

我想您会想要添加`connection_closed_cb=>\&bad_response`，请参阅此[stackoverflow](https://stackoverflow.com/questions/7975036/how-to-use-nettwitterstream-to-read-stream-from-api)问题的最后一个答案。我不确定为什么没有记录该功能，但如果您检查源代码，它是可用的。我也无法在[CPAN](http://search.cpan.org)中找到该模块。

# ruby-on-rails - 在新的嵌套属性表单中选择带有单选按钮的默认图片

> ID：10636452
> 
> 赞同：1
> 
> 时间：2012-05-17T13:15:03.967
> 
> 标签：ruby-on-rails

我有一个 Rails 项目，它有一个汽车模型，并且有多张图片。我创建了一个嵌套表单，因此我可以同时输入汽车的详细信息和图片。我想要一个单选按钮来选择要在图库中显示的图片。

```
 %table
    = simple_form_for [@car] :html => {:multipart => true} do |f|
        = f.error_messages 
        = f.input :make
        = f.input :model
        = f.input :engine
        = f.input :price

        = f.simple_fields_for :car_pictures do |builder|
            .picture
                = builder.input :caption
                = builder.input :picture
                .thumb= image_tag builder.object.picture(:thumb)

        = f.button :submit 
```

是否可以使用“fields_for”部分中的单选按钮来选择默认/主图片？或者，还有更好的方法？

**更新**

通过将以下内容放在 fields_for 所有单选按钮独立工作，这不是我想要的。

```
= builder.radio_button(:favourite, "test") 
```

每个单选按钮都有一个唯一的名称。

**更新**

如果我使用 object_id 作为值，我将如何在 create 方法中链接它？

```
= f.radio_button(:favourite_pic, builder.object_id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:47:07.750

是的，你最后的猜测是正确的。我做了一个测试应用程序，客户可以在其中选择一张最喜欢的照片：[https](https://github.com/eicca/attrs_test) ://github.com/eicca/attrs_test （请参阅标记为“添加最喜欢的示例”的提交更改）。

主要有两点（根据你的情况）：

```
= f.radio_button(:favorite_pic_id, builder.object.id) 
```

和

```
#models/car
has_one :favorite_pic, :class_name => "CarPicture" 
```

您需要在表格中添加`favorite_pic_id`字段。`cars`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:27:16.340

为什么不？:) 只有选中的单选按钮才会发送到服务器。所以，你唯一要做的就是给它正确的名称/值，并确保你有一个访问器来支持批量分配。

# java - Java Arrays.sort 将结果重置为全零

> ID：10636458
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:20.410
> 
> 标签：java, arrays, sorting

我正在使用 Java Arrays.sort 对二维数组的元素进行排序：

```
int[][] RAM = new int[4][10000]; 
```

我用整数填充 RAM 数组，然后调用：

```
for (i=0;i<4;i++){
    Arrays.sort(RAM[i]);
System.out.println(i);
} 
```

这导致 RAM[][] 的所有元素都被零填充。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:17:03.113

你真的先用数字填充数组吗？如果你这样做了，你只会打印出二维数组的第一部分。您需要打印出所有 40,000 个条目。数组中的每个数组 10,000 个。所以 [0][0...9999]、[1][0...9999] 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:46:09.287

```
public static void show (int [][] list)
{
    System.out.println ("- show: -");
    for (int [] ia : list) {
        for (int i : ia)
            System.out.print (i + ", ");
        System.out.println ();
    }
    System.out.println ("---");
}

static Random random = new Random ();

public static void main (String [] args)
{
    int[][] RAM = new int[4][2];
    for (int i = 0; i < 4; ++i)
    {
        for (int j = 0; j < 2; ++j)
        {
            RAM[i][j] = random.nextInt (20);
            System.out.print (i*2 +j);
        }
    }
    show (RAM);
    for (int i=0; i<4; i++) {
        Arrays.sort (RAM[i]);
    }
    show (RAM);
    System.out.println ();
} 
```

结果：

```
- show: -
8, 13, 
12, 10, 
16, 3, 
7, 1, 
---
- show: -
8, 13, 
10, 12, 
3, 16, 
1, 7, 
--- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T21:15:09.163

我认为原因是您没有为数组的所有元素设置值。对于您未初始化的项目，默认值为 0。因此，当您对数组中的所有项目进行排序时，0 将交换到数组的第一部分。如果你输出数组的第一部分，你看到的都是零。大概吧。

# c# - 使用 WMI C# 读/写远程文件

> ID：10636459
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:26.893
> 
> 标签：c#, file, wmi

我需要读取和写入（更新）一些远程机器文件。我能够使用 WMI（System.Management）找到远程文件，但无法对其进行读取或更新。

任何帮助，将不胜感激。

谢谢

喜满洲

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:06:15.177

WMI 没有任何类（或方法）来读取或写入文件的内容。您只能使用 检索文件的元数据（文件名、日期、大小）[`CIM_DataFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387236%28v=vs.85%29.aspx)，或执行[复制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389332%28v=vs.85%29.aspx)、[重命名](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393051%28v=vs.85%29.aspx)、[删除](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389875%28v=vs.85%29.aspx)或[压缩](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389255%28v=vs.85%29.aspx)文件等任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:22:52.403

首先检查您的文件访问权限并将用户“每个人”设置为完全控制，然后再试一次。![完全访问](../Images/ef1a8cb50d4fc0d4353f16cd270c3ed3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T01:26:30.783

RRUZ 是正确的：WMI*无法*通过网络复制或创建文件。这是因为它需要凭证“跳跃”：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa389288%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa389288%28v=vs.85%29.aspx)

但是，最近 Stackoverflow.com 用户 Frank White 在 C# 中创建了一种解决方法，并将 WMI 逻辑直接移植到 VBS。这是他的解决方案： [WMI remote process to copy file](https://stackoverflow.com/questions/8884728/wmi-remote-process-to-copy-file)

我将它移植到一个完全正常工作的 VBScript： [https ://stackoverflow.com/a/11948096/1569434](https://stackoverflow.com/a/11948096/1569434)

# android - 在 oncreate 方法中请求位置更新

> ID：10636463
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:35.923
> 
> 标签：android, locationmanager, oncreate

我正在尝试实现一种位置警报类型的应用程序。但是每当我的应用程序打开时。我当前的位置显示为空。

下面是我的代码。

```
package com.hrupin;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class HelloAndroidGpsActivity extends Activity implements OnClickListener, android.content.DialogInterface.OnClickListener, LocationListener {

    private TextView setLat, setLong, destLat, destLong, currLat, currLong, tjd, fromhome, toward;
    private Button setmyLoc, setDest;

    private EditText editLat, editLong;

    private LocationManager orgManager;
    //private LocationListener orgListener;
    // private LocationListener destListener = new destListener();

    private boolean gps_enabled = false;
    private boolean network_enabled = false;

    private String bestProvider;

    double orginLongitude, orginLatitude, destLongtitude, destLatitude, currLatitude, currLongtitude;
    float firstLat, firstLang, secLat, secLang;
    Location destinationLocation = new Location("gps");
    Location originLocation = new Location("gps");
    Location currLocation = new Location("gps");

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setLat = (TextView) findViewById(R.id.setLat);
        setLong = (TextView) findViewById(R.id.setLong);
        destLat = (TextView) findViewById(R.id.destLat);
        destLong = (TextView) findViewById(R.id.destLong);
        currLat = (TextView) findViewById(R.id.currLat);
        currLong = (TextView)findViewById(R.id.currLong);
        tjd = (TextView)findViewById(R.id.setmeter);
        fromhome = (TextView)findViewById(R.id.destmeter);
        toward = (TextView)findViewById(R.id.currmeter);

        setDest = (Button)findViewById(R.id.SetLocation);

        editLat = (EditText)findViewById(R.id.editLat);
        editLong = (EditText)findViewById(R.id.editLong);

        orgManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);

        try {
            gps_enabled = orgManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);
        } catch (Exception ex) {
            Log.i("gps_enabled", ex.toString());
        }
        try {
            network_enabled = orgManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        } catch (Exception ex) {
            Log.i("network_enabled", ex.toString());
        }

        // don't start listeners if no provider is enabled
        if (!gps_enabled && !network_enabled) {
            AlertDialog.Builder builder = new Builder(
                    HelloAndroidGpsActivity.this);
            builder.setTitle("Attention!");
            builder.setMessage("Sorry, location is not determined. Please enable location providers");
            builder.setPositiveButton("OK",
                    HelloAndroidGpsActivity.this);
            builder.setNeutralButton("Cancel",
                    HelloAndroidGpsActivity.this);
            builder.create().show();
        }

        Criteria criteria = new Criteria();
        bestProvider = orgManager.getBestProvider(criteria, false);
        orgManager.requestLocationUpdates(bestProvider, 0, 0, this);
        Location location = orgManager.getLastKnownLocation(bestProvider);

        if (location!=null){
            setLat.setText("Latitude:" + currLatitude);
            setLong.setText("Longitude:" + currLongtitude);
            originLocation.setLatitude(currLatitude);
            originLocation.setLongitude(currLongtitude);
        }
        //else Toast.makeText(getBaseContext(), "Error in GPS", Toast.LENGTH_SHORT).show();

        setDest.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                destLat.setText("Lat:"+editLat.getText().toString().trim());
                destLong.setText("Long"+editLong.getText().toString().trim());

                destLatitude = Double.parseDouble(String.valueOf(editLat.getText().toString().trim()));
                destLongtitude = Double.parseDouble(String.valueOf(editLong.getText().toString().trim()));

                destinationLocation.setLatitude(destLatitude);
                destinationLocation.setLongitude(destLongtitude);

                float distance = originLocation.distanceTo(destinationLocation);
                tjd.setText(String.valueOf(distance/1000)+ " Kms ");

            }
        });
    }

    /** Register for the updates when Activity is in foreground */
    @Override
    protected void onResume() {
        super.onResume();
        orgManager.requestLocationUpdates(bestProvider, 60000, 1, this);
    }

    /** Stop the updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        orgManager.removeUpdates(this);
    }

    public void onClick(DialogInterface dialog, int which) {
        if (which == DialogInterface.BUTTON_NEUTRAL) {
            setLat.setText("Sorry, location is not determined. To fix this please enable location providers");
        } else if (which == DialogInterface.BUTTON_POSITIVE) {
            startActivity(new Intent(
                    android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));
        }
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if (location != null) {
            // This needs to stop getting the location data and save the
            // battery power.
            //orgManager.removeUpdates(orgListener);

            currLatitude = location.getLatitude();
            currLongtitude = location.getLongitude();

            currLocation.setLatitude(currLatitude);
            currLocation.setLongitude(currLongtitude);

            currLat.setText(String.valueOf(currLatitude));
            currLong.setText(String.valueOf(currLongtitude));

            float fromhome = originLocation.distanceTo(currLocation);

            float toward = currLocation.distanceTo(destinationLocation);

            HelloAndroidGpsActivity.this.fromhome.setText(String.valueOf(fromhome/1000)+ " Kms ");
            HelloAndroidGpsActivity.this.toward.setText(String.valueOf(toward/1000) + " Kms ");

            if (toward/1000 <= 14 ){

                Toast.makeText(getBaseContext(), "You are "+ toward/1000 + " Kms towards Destination ", Toast.LENGTH_SHORT).show();
            }
        }
    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

我知道这种问题已经被问过百万次了。我已经尝试了答案中指定的所有方法。但我没有得到任何输出。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:36:21.177

您不应在 onCreate 上调用 requestLocationUpdates，因为它是多余的，因为您的代码将在 onResume 上调用它。流程是 onCreate --> onStart --> onResume。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:38:22.343

要获得当前位置，这对我来说工作得很好，看看这个。

我们的Activity是这样的

* * *

```
public class MainActivity extends Activity implements OnClickListener, android.content.DialogInterface.OnClickListener {
/** Called when the activity is first created. */

private EditText showLocation;
private Button btnGetLocation;
private ProgressBar progress;

private LocationManager locManager;
private LocationListener locListener = new myLocationListener();

private boolean gps_enabled = false;
private boolean network_enabled = false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    showLocation = (EditText) findViewById(R.id.txtShowLoc);
    showLocation.setEnabled(false);

    progress = (ProgressBar) findViewById(R.id.progressBar);
    progress.setVisibility(View.GONE);

    btnGetLocation = (Button) findViewById(R.id.btnGetLoc);
    btnGetLocation.setOnClickListener(this);

    locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

    progress.setVisibility(View.VISIBLE);

    try{
        gps_enabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    }
    catch(Exception ex){            
    }
    try{
        network_enabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);           
    }
    catch(Exception ex){

    }       

    if (!gps_enabled && !network_enabled) {
        AlertDialog.Builder builder = new Builder(this);
        builder.setTitle("Attention!");
        builder.setMessage("Sorry, location is not determined. Please enable location providers");
        builder.setPositiveButton("OK", this);
        builder.setNeutralButton("Cancel", this);
        builder.create().show();
        progress.setVisibility(View.GONE);
    }

    if (gps_enabled) {
        locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locListener);
    }
    if (network_enabled) {
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
    }       
}

private class myLocationListener implements LocationListener{

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if(location!=null){

            locManager.removeUpdates(locListener);

            String Speed = "Device Speed: " +location.getSpeed();
            String longitude = "Longitude: " +location.getLongitude();
            String latitude = "Latitude: " +location.getLatitude();
            String altitiude = "Altitiude: " + location.getAltitude();
            String accuracy = "Accuracy: " + location.getAccuracy();
            String time = "Time: " + location.getTime();

            String cityName=null;

            Geocoder gcd = new Geocoder(getBaseContext(), Locale.getDefault());
            //public List<Address> addresses= gcd.getFromLocation (double latitude1, double longitude1, int maxResults)

            List<Address> addresses;
            try {
                addresses = gcd.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
                if (addresses.size() > 0)
                    System.out.println(addresses.get(0).getLocality());
                cityName=addresses.get(0).getLocality();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            showLocation.setText("City Name: "+cityName+"\n"+Speed + "\n"+longitude + "\n" + latitude + "\n" + altitiude + "\n" + accuracy + "\n" + time);
            progress.setVisibility(View.GONE);
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

}

@Override
public void onClick(DialogInterface dialog, int which) {
    // TODO Auto-generated method stub
    if(which == DialogInterface.BUTTON_NEUTRAL){
        showLocation.setText("location is not getting due to location provider");

    }
    else if (which == DialogInterface.BUTTON_POSITIVE){
        startActivity(new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS));

    }
}} 
```

* * *

和 main.xml 是

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:weightSum="1">
<TextView android:id="@+id/textView1" android:layout_width="match_parent" android:text="My Location is:" android:textSize="25sp" android:layout_height="wrap_content"></TextView>
<EditText android:layout_height="wrap_content" android:layout_width="match_parent" android:layout_weight="0.24" android:lines="5" android:id="@+id/txtShowLoc">
    <requestFocus></requestFocus>
</EditText>
<LinearLayout android:id="@+id/linearLayout2" android:layout_height="wrap_content" android:layout_width="match_parent" android:gravity="center">
    <ProgressBar android:layout_height="wrap_content" android:layout_width="wrap_content" android:id="@+id/progressBar"></ProgressBar>
</LinearLayout>
<LinearLayout android:id="@+id/linearLayout1" android:layout_width="match_parent" android:layout_height="wrap_content" android:gravity="center">
    <Button android:layout_height="wrap_content" android:layout_width="wrap_content" android:text="Get Current Location" android:id="@+id/btnGetLoc"></Button>
</LinearLayout> 
```

* * *

我的清单文件是

* * *

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="rdc.getCurrentLocaion"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<application android:icon="@drawable/icon" android:label="@string/app_name" android:debuggable="true">
    <activity android:name=".MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

* * *

如果您遇到任何麻烦，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T06:24:21.700

@Ramdhan 感谢您的代码。但我纠正了我的代码中的一个错误。

```
 Criteria criteria = new Criteria();
        bestProvider = orgManager.getBestProvider(criteria, false);
        orgManager.requestLocationUpdates(bestProvider, 0, 0, this);
        Location location = orgManager.getLastKnownLocation(bestProvider);

    if (location!=null){
        setLat.setText("Latitude:" + currLatitude);
        setLong.setText("Longitude:" + currLongtitude);
        originLocation.setLatitude(currLatitude);
        originLocation.setLongitude(currLongtitude);
    } 
```

修改后的代码：

```
if (location != null) {
        setLat.setText("Latitude:" + location.getLatitude());
        setLong.setText("Longitude:" + location.getLongitude());
        originLocation.setLatitude(location.getLatitude());
        originLocation.setLongitude(location.getLongitude());
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T04:29:20.160

用于从 OnCreate Methode 请求位置更新

```
LocationManager locationManager=(LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
    LocationListener locationListener=new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {

        }

        @Override
        public void onProviderEnabled(String provider) {

        }

        @Override
        public void onProviderDisabled(String provider) {

        }
    } if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION)!= PackageManager.PERMISSION_GRANTED){
        ActivityCompat.requestPermissions(this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},1);
    } 
```

# python - 如何在 django 的模板自定义标签中访问 request.META？

> ID：10636465
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:39.533
> 
> 标签：python, django, django-templates

我构建了一个自定义模板标签，我想知道是否有一种方法可以访问`request.META`我的模板标签功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:25:32.217

编写您的标签以接受`context`，然后`request`通过访问`context`。例如对于[简单标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#simple-tags)：

```
@register.simple_tag(takes_context=True)
def foo(context):
    request = context['request']
    request.META
    ... 
```

并确保`request`在模板内`context`，通过传递`request`给`Context()`; 或添加`'django.core.context_processors.request'`到`TEMPLATE_CONTEXT_PROCESSORS`设置并`RequestContext`用于渲染。

此外，您可以简单地传递`request.META`给`Context()`

# javascript - XMLHttpRequest 无法加载“url”。Access-Control-Allow-Origin 不允许 Origin null

> ID：10636466
> 
> 赞同：2
> 
> 时间：2012-05-17T13:15:42.427
> 
> 标签：javascript, html, xmlhttprequest

我正在尝试从 javascript 调用 Web 服务。在 Internet Explorer 9 中正常工作，而 chrome 不工作。错误如下：

“OPTIONS [http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl](http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl) 400（错误请求）XMLHttpRequest 无法加载[http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl](http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl)。不允许使用 Origin null通过访问控制允许来源。”

我留下代码来帮助我。谢谢。` 函数 SOAPClient() { this.wsdl = ''; this.async = true; this.action = ''; this.xml = '';

```
 SOAPClient.prototype.invoke = function(){
                var xhr;
                if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xhr = new XMLHttpRequest();
                } else {// code for IE6, IE5
                    xhr=new ActiveXObject("Microsoft.XMLHTTP");
                }

                xhr.onreadystatechange=function() {
                    if (xhr.readyState >= 3){
                        alert ('ReadyState '+xhr.readyState+' - - Status '+xhr.status);
                        if(xhr.status == 200)
                            document.getElementById("txtResult").innerHTML=xhr.responseText;
                        else
                            document.getElementById("txtResult").innerHTML='Error';
                    }
                }
                xhr.open("POST", this.wsdl,this.async);
                xhr.setRequestHeader("SOAPAction", this.action);
                xhr.setRequestHeader("Content-Type", "text/xml");
                xhr.setRequestHeader("Connection", "close");
                xhr.send(this.xml);
                return false;
            }
        }
    </script> 
    <script type="text/javascript"> 
        var wsdl = 'http://www.restfulwebservices.net/wcf/CurrencyService.svc?wsdl';
        var action = 'GetConversionRate';           
        var xml = '';
        var async = true;
        var response = '';

        function prueba(){              
            var client = new SOAPClient();
            client.wsdl = wsdl;
            client.action = action;
            client.xml = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="http://www.restfulwebservices.net/ServiceContracts/2008/01"><soapenv:Header/><soapenv:Body><ns:GetConversionRate><ns:FromCurrency>EUR</ns:FromCurrency><ns:ToCurrency>GBP</ns:ToCurrency></ns:GetConversionRate></soapenv:Body></soapenv:Envelope>';
            client.invoke();
            return false;
        }   
    </script>
</head>
<body>
    <p>Versión 2.5</p>
    <form name="form" action="#">
        Term: <input type="text" name="inputValue" method="post"/>
        <button onclick="prueba()">Search</button>
        <p id="txtResult"></p>
    </form>
</body> 
```

`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:21:26.810

首先，您的请求必须：

1.  遵守[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)（即请求域 == 接收域），或

2.  允许通过标头访问服务页面，该[`Access-Control-Allow-Origin`](https://developer.mozilla.org/en/http_access_control)标头将您的域列为允许以跨域方式访问该服务器的域。

此外，您正在从`file://`文档发出请求，Chrome*可能*不允许它执行任何跨域 XHR，即使服务器返回一个 all-permissive `Access-Control-Allow-Origin: *`. 您应该运行本地服务器以通过 HTTP 访问您的文件，或者只是在不同的浏览器中进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:47:16.280

如果您在不同的域中，则必须如上所述设置 Access-Control-Allow-Origin 标头。听起来您根本没有处理应用程序发出的 OPTIONS 请求。这只是当请求类型不是 GET 或 POST 时浏览器发出的附加请求。您将要做的就是返回具有正确 Access-Control-Allow-Origin 权限的标头，以让浏览器知道允许进行跨域请求。我不确定您在后台使用的是什么，但请参阅这篇文章以了解它是如何在 Rails 中完成的。 [如何在不同的子域上从 Backbone 应用程序到 Rails 应用程序进行 POST、PUT 和 DELETE？](https://stackoverflow.com/questions/10250233/how-to-be-aple-to-post-put-and-delete-from-backbone-app-to-rails-app-on-differe/10250607#10250607)

# jquery - 表格中的 jQuery UI 滑块和滚动元素

> ID：10636469
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:52.210
> 
> 标签：jquery, css, jquery-ui

我正在尝试创建一个简单的解决方案来滚动表格中的元素而不移动标题和第一列。

我知道有像 jQuery 数据表这样的插件，但在我的情况下，它不适用于大表（100colsx1200rows）

我所做的可以在这里找到：http: [//jsbin.com/ifoxim/7/edit#source](http://jsbin.com/ifoxim/7/edit#source)

**较新版本：http: [//jsbin.com/ifoxim/9/edit](http://jsbin.com/ifoxim/9/edit)**

 `基本上是它的一组 div 和表格。

在右侧和底部，我添加了两个 jQuery UI 滑块。

我不是 css 大师（也不是 jQuery 大师），我无法将它们放在一起。

我想要达到的效果类似于：[http](http://datatables.net/extras/fixedcolumns/) ://datatables.net/extras/fixedcolumns/但使用滑块。

我将非常感谢 CSS 的帮助。

我的最终目标是使这个解决方案尽可能灵活。`

# c++ - 在 windows 下构建（并运行）RInside 示例

> ID：10636471
> 
> 赞同：0
> 
> 时间：2012-05-17T13:15:59.210
> 
> 标签：c++, windows, r, g++, rcpp

我对 RInside + Rcpp + R + C++ + windows 的故事很陌生。我试图通过成功编译和运行 RInside 示例来让事情顺利进行。我设法克服了许多最初的问题（比如[这个](https://stackoverflow.com/questions/5650063/problem-with-compiling-rinside-examples-under-windows)），最后设法构建了 64 位 RInside 示例可执行文件。

我正在运行最新版本的 R 和最新版本的 RTools。我通过运行从源代码构建了 RInside 和 RCPP

```
install.packages(c("Rcpp","RInside"),type="source") 
```

否则我只能构建 x86 二进制文件（我无法在我的 64 位 Windows 服务器操作系统上运行）。从 R 控制台一切正常。以下示例通过，没有任何错误：

```
body <- '
+ NumericVector xx(x);
+ return wrap( std::accumulate( xx.begin(), xx.end(), 0.0));'
> 
> add <- cxxfunction(signature(x = "numeric"), body, plugin = "Rcpp")
cygwin warning:
  MS-DOS style path detected: C:/R-215~1.0/etc/x64/Makeconf
  Preferred POSIX equivalent is: /cygdrive/c/R-215~1.0/etc/x64/Makeconf
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
> 
> x <- 1
> y <- 2
> res <- add(c(x, y))
> res
[1] 3
> #[1] 3 
```

但是当我尝试运行 RInside 示例时，我收到以下错误：

```
Error in paste0("(^|[^%])(%%)*%", spec) : not a BUILTIN function
Error in paste0("^", pkg, "$") : not a BUILTIN function
Execution halted 
```

有谁知道发生了什么？

提前非常感谢。

编辑：更详细的 R 2.15.0 问题重现。

我将 CRAN 的最新版本安装到 C:\R-2.15.0 Ran 64bit RGUI.exe 并执行`install.packages(c("Rcpp","RInside"),type="source")` Changed Makefile.win 以强制 x64 架构并指向正确的安装目录。

```
## -*- mode: makefile; tab-width: 8; -*-
##
## Simple Makefile for Windows

## This version is fairly directly derived from the Unix versions
## You may have to set R_HOME manually if this does not work
## It requires Rtools in the path -- as does all R package building
#R_HOME :=      $(shell R RHOME | sed -e "s|\\\\|\/|g")
R_HOME := "C:\R-2.15.0"
#R_HOME := "C:\R-2.14.1"
#R_HOME := "C:\R-2.14.2"

## You may have to set this to one of the two values to enforce a particular architecture
#R_ARCH :=      --arch i386
R_ARCH :=       --arch x64

sources :=      $(wildcard *.cpp)
programs :=         $(sources:.cpp=)

## include headers and libraries for R
RCPPFLAGS :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config --cppflags)
RLDFLAGS :=         $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config --ldflags)
RBLAS :=        $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config BLAS_LIBS)
RLAPACK :=      $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config LAPACK_LIBS)

## include headers and libraries for Rcpp interface classes
RCPPINCL :=         $(shell echo 'Rcpp:::CxxFlags()' | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)
RCPPLIBS :=         $(shell echo 'Rcpp:::LdFlags()'  | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)

## include headers and libraries for RInside embedding classes
RINSIDEINCL :=      $(shell echo 'RInside:::CxxFlags()' | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)
RINSIDELIBS :=      $(shell echo 'RInside:::LdFlags()'  | $(R_HOME)/bin/R $(R_ARCH) --vanilla --slave)

## compiler etc settings used in default make rules
CXX :=          $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXX)
CPPFLAGS :=         -Wall $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CPPFLAGS)
CXXFLAGS :=         $(RCPPFLAGS) $(RCPPINCL) $(RINSIDEINCL) $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXXFLAGS)
LDFLAGS =       -s
LDLIBS :=       $(RLDFLAGS) $(RBLAS) $(RLAPACK) $(RINSIDELIBS) $(RCPPLIBS)
CC :=           $(shell $(R_HOME)/bin/R $(R_ARCH) CMD config CXX)

all :           $(programs)

clean:
            rm -vf $(programs)

checkR:
            echo "R is at $(R_HOME)" 
```

跑 make -f Makefile.win

```
cygwin warning:
  MS-DOS style path detected: C:\R-2.15.0/bin/R
  Preferred POSIX equivalent is: /cygdrive/c/R-2.15.0/bin/R
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  atomic.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas -LC:/R-2
.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside.a" C:/R-
2.15.0/library/Rcpp/lib/x64/libRcpp.a -o atomic
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_callbacks0.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRb
las -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRIns
ide.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_callbacks0
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_module_sample0.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64
-lRblas -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/lib
RInside.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_module_sample0
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample0.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample0
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample1.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample1
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample10.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRbla
s -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInsid
e.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample10
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample11.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRbla
s -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInsid
e.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample11
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample2.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample2
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample3.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample3
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample4.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample4
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample5.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample5
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample6.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample6
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample7.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample7
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample8.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample8
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_sample9.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas
 -LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside
.a" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_sample9
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_test0.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas -
LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside.a
" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_test0
g++ -m64 -IC:/R-2.15.0/include -IC:/R-2.15.0/include/x64 -IC:/R-2.15.0/library/R
cpp/include -IC:/R-2.15.0/library/RInside/include -O2 -Wall -mtune=core2 -Wall
-s  rinside_test1.cpp  -LC:/R-2.15.0/bin/x64 -lR -LC:/R-2.15.0/bin/x64 -lRblas -
LC:/R-2.15.0/bin/x64 -lRlapack "C:/R-2.15.0/library/RInside/lib/x64/libRInside.a
" C:/R-2.15.0/library/Rcpp/lib/x64/libRcpp.a -o rinside_test1 
```

我得到了可执行文件，但是当我尝试运行其中任何一个时，都会出现以下错误。

```
Error in paste0("(^|[^%])(%%)*%", spec) : not a BUILTIN function
Error in paste0("^", pkg, "$") : not a BUILTIN function
Execution halted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:43:36.077

请将*完整且可重现的示例*发布到[rcpp-devel 邮件列表](http://lists.r-forge.r-project.org/mailman/listinfo/rcpp-devel)。请注意，您需要订阅列表中的帖子；否则使用[Gmane 订阅之](http://thread.gmane.org/gmane.comp.lang.r.rcpp)类的东西。

RInside 绝对可以在 Windows 下运行，因为我们修复了初始化问题。您必须输入`make -f Makefile.win`，而不仅仅是`make`. 发布具有可重现来源的完整命令和完整的错误日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T11:05:03.870

抱歉，我花了这么长时间才重新审视这个问题。

最后，我只是回到了以前版本的 R (2.14.2)，它开箱即用。所以我猜想 2.15.1.0 和 RInside 的协作存在一些问题。如果我有时间，我会尝试进一步调查。

# email - 交易电子邮件发件人地址

> ID：10636472
> 
> 赞同：0
> 
> 时间：2012-05-17T13:16:00.153
> 
> 标签：email, smtp, transactional-email

我正在我的应用程序中发送交易电子邮件，并且正在阅读最佳实践（显然是出于垃圾邮件的原因），以下内容让我觉得很奇怪。

我期待来自 Google、Facebook 等的通知电子邮件具有简单的发件人地址，例如 update@facebook.com/no-reply@plus.google.com 等。

但实际地址似乎是 update+zj4o9ocoaz66@facebookmail.com、noreply-daa26fef@plus.google.com 等

在向所有用户发送交易电子邮件时，是否有任何技术或其他原因没有单一/简单的发件人地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:00:15.800

虽然我不能专门与 Facebook 和 Google 交谈，但主要原因是跟踪和解析退回通知。

如果您查看标题，您会看到“返回路径”是相同的 - no-reply+hash@example.org - 此地址是邮件服务器应该为 NDR（未投递）发送自动退回的地址，例如“收件箱已满”或“不存在的地址”，尽管某些系统也会使用“发件人”，因此您会看到什么。

“散列”部分通常是结构化数据，可以帮助引导特定集群、确定电子邮件类型或识别收件人。您经常会发现票务系统使用相同的方法来确保您的消息在您回复时被定向到同一个支持代理。

虽然您可以在技术上为此使用 Message-ID 标头，但该标头往往是非冲突的“随机”哈希，而不是专门的结构化数据来辅助路由，而无需完全依赖查找表。

# css - @font-face 在 IE6 中不起作用

> ID：10636473
> 
> 赞同：0
> 
> 时间：2012-05-17T13:16:00.793
> 
> 标签：css, font-face

我有一个可以在除 IE6 之外的所有目标浏览器中使用的字体

```
@font-face {
    font-family: 'AFC-Bold';
    src: url('metaactionforchildren-bold.eot');
    src: url('metaactionforchildren-bold.eot?#iefix') format('embedded-opentype'),
         url('metaactionforchildren-bold.woff') format('woff'),
         url('metaactionforchildren-bold.ttf') format('truetype'),
         url('metaactionforchildren-bold.svg#metaactionforchildren-bold') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:34:33.897

它没有得到适当的支持。

见：[http ://caniuse.com/#feat=fontface](http://caniuse.com/#feat=fontface)

# javascript - 按节点 ID 的 innerHTML

> ID：10636476
> 
> 赞同：0
> 
> 时间：2012-05-17T13:16:20.783
> 
> 标签：javascript

`id="demo"`在javascript中，当我使用替换节点的内容时， `getElementById("demo").innerHTML="SOME TEXT";` 我遇到了一个奇怪的问题，它的效果只持续了几秒钟。当我与上述内容一起添加警报框时，可以在背景屏幕上看到效果，直到通过单击“确定”关闭警报框。有人可以提出一个解决方案来解决我如何让它保持在那里而不被改变，直到我刷新页面..）

大家好，我的代码是一个简单的排序程序，如下所示：

```
 <script type="text/javascript">
var num=new Array(12,5,8,23,1);
var len;
function sort(){
len= num.length;
for(i=0; i<len-1; i++){
  for(j=0; j<len-i; j++){
    if(num[j]>num[j+1]){
     var tem=num[j];
     num[j]= num[j+1];
     num[j+1]= tem;
    }    
}
}
var x=document.getElementById("demo");
x.innerHTML=num;
alert(num);
}
</script>                                                                                           <form>
        <p id="demo">Click the button</p>
        <input type="submit" onclick="sort();" value="Click"></input>
     </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:31:23.030

检查这个链接花花公子 [http://jsfiddle.net/QXe7K/1/](http://jsfiddle.net/QXe7K/1/)

代码是

```
<script type="text/javascript">
function changeText2(){
    var userInput = document.getElementById('userInput').value;
    document.getElementById('boldStuff2').innerHTML = userInput;
}
</script>
<p>Welcome to the site <b id='boldStuff2'>dude</b> </p> 
<input type='text' id='userInput' value='Enter Text Here' />
<input type='button' onclick='changeText2()' value='Change Text'/>​ 
```

# java - Java 正则表达式分组

> ID：10636477
> 
> 赞同：0
> 
> 时间：2012-05-17T13:16:22.030
> 
> 标签：java, regex

我在属性文件中有以下条目：

```
some.key = \n
  [1:Some value] \n
  [14:Some other value] \n
  [834:Yet another value] \n 
```

我正在尝试使用正则表达式对其进行解析，但我似乎无法正确分组。我正在尝试为每个条目打印一个键/值。示例：Key="834", Value="Yet another value"

```
private static final String REGEX_PATTERN = "[(\\d+)\\:(\\w+(\\s)*)]+";

private void foo(String propValue){
    final Pattern p = Pattern.compile(REGEX_PATTERN);
    final Matcher m = p.matcher(propValue);
    while (m.find()) {
        final String key = m.group(0).trim();
        final String value = m.group(1).trim();
        System.out.println(String.format("Key[%s] Value[%s]", key, value));            
    }
} 
```

我得到的错误是：

```
Exception: java.lang.IndexOutOfBoundsException: No group 1 
```

我以为我在正则表达式中正确分组，但我想不是。任何帮助，将不胜感激！

谢谢

更新：转义括号有效。改成下面的样式谢谢反馈！

```
 private static final String REGEX_PATTERN = "\\[(\\d+)\\:(\\w+(\\w|\\s)*)\\]+"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:20:28.410

`[`应该被转义（以及`]`）。

```
"\\[(\\d+)....\\]+" 
```

`[]`用于字符类：`[0-9]`==`(0|1|2|...|9)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:31:13.683

试试这个：

```
private static final String REGEX_PATTERN = "\\[(\\d+):([\\w\\s]+)\\]";

final Pattern p = Pattern.compile(REGEX_PATTERN);
final Matcher m = p.matcher(propValue);
while (m.find()) {
    final String key = m.group(1).trim();
    final String value = m.group(2).trim();
    System.out.println(String.format("Key[%s] Value[%s]", key, value));
} 
```

1.  和需要转义，因为它们代表字符类的开始和`[`结束`]`
2.  `group(0)`总是完全匹配，所以你的组应该从 1 开始
3.  注意我是如何写第二组的`[\\w\\s]+`。这意味着单词或空白字符的字符类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:20:31.653

这是您的正则表达式，`[]`是特殊字符，如果您想从字面上解释它们，则需要对其进行转义。

尝试

```
"\\[(\\d+)\\:(\\w+(\\s)*)\\]" 
```

注意 - 我删除了“+”。匹配器将继续查找与模式匹配的子字符串，因此`+`不需要。（你可能需要输入一个 GLOBAL 开关——我不记得了）。

我不禁觉得如果没有正则表达式，这可能会更简单，也许是通过拆分`\n`或`[`然后拆分`:`其中的每一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:20:03.603

由于您使用的是由多行组成的字符串，因此您应该告诉它`Pattern`：

```
final Pattern p = Pattern.compile(REGEX_PATTERN, Pattern.MULTILINE); 
```

尽管它与您直接无关，但我建议您也添加`DOTALL`：

```
final Pattern p = Pattern.compile(REGEX_PATTERN, Pattern.MULTILINE | Pattern.DOTALL); 
```

# java - 如何让 IntelliJ IDEA 理解我的空值检查方法？

> ID：10636483
> 
> 赞同：11
> 
> 时间：2012-05-17T13:16:44.110
> 
> 标签：java, intellij-idea, nullable

我有一个方法，其中一个参数用`@Nonnull`注释标记。调用该方法的代码必须检查该值是否为空。它不仅仅是直接`x != null`检查，而是调用另一个类的实用方法。（在实际代码中，实用程序方法还会检查它是否为空字符串）。

我的问题是 Intellij Idea 在 Nonnull 方法调用上显示检查警告，说我的变量“可能为空”。由于实用程序方法检查，我知道它不能为空 - 我如何告诉检查员？

因为这有点抽象，所以这里有一个最小的例子来说明我的意思：

```
package org.ethelred.ideatest;

import javax.annotation.CheckForNull;
import javax.annotation.Nonnull;

/**
 * tests annotations
 */
public class AnnotationChecker
{
    public static void main(String[] args)
    {
        String x = null;
        if(args.length > 0)
        {
            x = args[0];
        }

        if(!isNull(x))
        {
            useObject(x);
        }

        if(x != null)
        {
            useObject(x);
        }
    }

    public static boolean isNull(@CheckForNull Object o)
    {
        return o == null;
    }

    public static void useObject(@Nonnull Object o)
    {
        System.out.println(o);
    }
} 
```

这使用 JSR 305 注释。

在此示例中，在对Intellij的*第一次*调用中，会在参数上显示“Argument 'x' might be null”的警告。在*第二次*调用中，没有警告。`useObject``x`

 ** * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-07-29T16:14:09.910

在 IDEA 13 中添加了非常奇特的功能，称为[Method Contracts](http://blog.jetbrains.com/idea/2013/10/better-control-flow-analysis-with-contract-annotations-and-intellij-idea-13/)。例如，您可以有一个方法，如果遇到 null 则抛出验证异常：

```
@Contract("null -> fail")
public static void validateNull(@Nullable final Object object) {
    if (object == null) {
        throw new ValidationException();
    }
} 
```

如果您在可能的 NPE 之前调用它，IDEA 将分析注释并且不会显示警告：

```
validateNull(user);
user.setSomething("something"); // no warning 
```

您在 IDEA 的设置中有完整的文档（只需搜索 Method Contract）。为此，您需要额外依赖 jetbrain 的注释 jar：

```
<dependency>
    <groupId>org.jetbrains</groupId>
    <artifactId>annotations</artifactId>
    <version>13.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-14T06:24:22.273

使用 IDEA 12，您可以配置 NotNull-check 方法：http: [//youtrack.jetbrains.com/issue/IDEA-35808#tab=Comments](http://youtrack.jetbrains.com/issue/IDEA-35808#tab=Comments)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T13:51:51.880

我不相信有任何方法可以使用按原样编写的代码来解决警告。我希望发现 IntelliJ 支持`@SuppressWarnings`您可以在`useObject(x)`语句中使用的值，但根据[此来源](http://jazzy.id.au/default/2008/10/30/list_of_suppresswarnings_arguments.html)，它不支持。您可能只需要硬着头皮将代码更改为以下内容：

```
if (x != null && !isBlank(x)) {
    useObject(x);
} 
```

请注意，我将该方法重命名为`isNull`，`isBlank`因为我的理解是，您调用的实际方法也会`null`检查其他条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T21:37:50.413

我已经通过使用静态方法将对象调用列入白名单来处理此问题：

```
/** Wrapper to mask NullPointerException warnings. */
private static <T> T _(T obj) {

    return obj;
} 
```

方法名称旨在不干扰可读性。因此，

```
mObject.method(); 
```

变成

```
_(mObject).method(); 
```

此外，如果 NullPointerException 确实发生，它仍将引用相同的行号。*

# asp.net - “NewPageIndex”不是“System.Event.Args”的成员

> ID：10636485
> 
> 赞同：1
> 
> 时间：2012-05-17T13:16:46.023
> 
> 标签：asp.net, visual-studio-2010, asp.net-controls, page-index-changed

下午所有，

我有一个简单的网格视图，其中包含已上传到文件的列表项。我在 gridview 上分页时遇到问题。当我选择第二页时，网页会失败。

在互联网上环顾四周后，我似乎需要在我的网格视图中添加一个 PageIndexChanging' 事件。我试图通过以下代码完成此操作，但遇到问题`e.NewPageIndex`，这有一个错误指出...“NewPageIndex”不是“System.Event.Args”的成员。

这是 PageIndexChanging 事件的 vb...

```
Protected Sub UploadedFiles_PageIndexChanging(ByVal sender As Object, ByVal e As System.EventArgs) Handles UploadedFiles_PageIndexChanging
    UploadedFiles.PageIndex = e.NewPageIndex
    UploadedFiles.DataBind()
End Sub 
```

这是我的gridview代码...

```
 <asp:GridView  ID="UploadedFiles" 
           DataSource="<%# GetUploadList() %>" 
           runat="server" 
           CssClass="mGrid" 
           Width="300px"   
           PagerStyle-CssClass="pgr" 
           AlternatingRowStyle-CssClass="alt"  
           CellPadding="4" 
           ForeColor="#333333" 
           AllowPaging="True" 
           PageSize="2" 
           AllowSorting="True" > 
        <AlternatingRowStyle CssClass="alt" />
        <PagerStyle CssClass="pgr" />
       </asp:GridView> 
```

非常感谢您的帮助。

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:20:16.867

错误的签名 - 试试这个：

```
Protected Sub UploadedFiles_PageIndexChanging(ByVal sender As Object, ByVal e As GridViewPageEventArgs) Handles UploadedFiles_PageIndexChanging 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:21:23.760

看一下[`PageIndexChanging`MSDN 上的事件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.pageindexchanging.aspx)，注意它不需要`EventArgs`，它需要[`GridViewPageEventArgs`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewpageeventargs.aspx). `GridViewPageEventArgs`确实[`NewPageIndex`有财产](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridviewpageeventargs.aspx)。

# mysql - MySQL - 如何在 INSERT 中解析字符串值以查找子字符串

> ID：10636489
> 
> 赞同：0
> 
> 时间：2012-05-17T13:17:00.380
> 
> 标签：mysql, parsing, email, insert, substring

我从应该提供电子邮件地址的外部应用程序返回字符串值。但是，此字符串值有时会提供与电子邮件地址一起出现的显示名称。我只需要电子邮件地址，它位于 <brackets> 内，所以我认为我需要在我的语句中添加某种子字符串或`SELECT`子句`INSERT`。

这是我的`INSERT`陈述以及测试数据的样子：

```
INSERT INTO tblInquiry
(fldInquiryFromEmail)
VALUES ('"\'Tim Lastname\'" <timm@testCCaddcompany.com>') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:31:50.817

我同意@eggyal 的评论。但如果你必须这样做，方法如下：

```
INSERT INTO tblInquiry (fldInquiryFromEmail)
VALUES (substring_index(substring_index('"\'Tim Lastname\'" <timm@testCCaddcompany.com>', '<', -1), '>', 1)) 
```

请注意，即使您传入真实的电子邮件（不带尖括号），这仍然有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:24:05.663

您需要在实际插入数据库之前从字符串中提取电子邮件，因为它更容易。如果您不确定以空格分隔的字符串的哪一部分是电子邮件地址，您可以用空格分割字符串并`filter_var()`在每个子字符串上使用 PHP 函数。

```
 //first, sanitize user input
    $str = filter_var($_POST['some_input'], FILTER_SANITIZE_STRING);

    //second, convert the string into array
    $str = explode(' ',$str);

    //third, check for valid email inside the array
    foreach ($str as $key=>$value) {         
      if (filter_var($value, FILTER_VALIDATE_EMAIL))
      echo $value;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:28:18.737

据我了解你的问题，你想提取之间的电子邮件地址，`<>`这样你就可以使用 mysql 函数

```
SELECT SUBSTRING('<test@gmail.com>',2,LENGTH('<test@gmail.com>')-1)
//return test@gmail.com 
```

参考：

[`SUBSTRING`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring)

[`LENGTH`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_length)

# java - 从参数生成 Hibernate Criteria 查询

> ID：10636492
> 
> 赞同：0
> 
> 时间：2012-05-17T13:17:17.467
> 
> 标签：java, hibernate, criteria, factory

我必须使用从客户端获得的参数在我们的后端应用程序中创建一个查询。考虑这个图表：

![在此处输入图像描述](../Images/512745e541dc4c94824199aa4543c5f6.png)

我有实体（类型字段）、这些实体的字段（参数）、关系、值和操作数。因此，用 sql 术语来说，上表转换为：

```
... WHERE Item.reach_complience = ”&lt;1%”
  and  Item.technical.type = ”RES”
  and  Item.technical.value <=  ”1k”
  and  Item.technical.value >= ”4K7”
  and  (Item.technical.footprint = ”RC0603” or Item.technical.footprint = ”RC0805”)
  and  Item.classification.incurrent_handling = ”prefered-to-use” 
```

我真的不想在这里重新发明轮子，所以我的问题是：是否有使用 JPA 或更具体地使用 Hibernate 的标准工厂库，或者是否有一些可用于创建标准查询的第 3 方库？我们在前端使用 Eclipse RCP，数据通过 Apache Cxf 服务到达后端（Spring）。我希望使用 JPA 的查询语法编写可维护的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:23:26.007

是的。我认为`ISearch`是最好的：[http ://code.google.com/p/hibernate-generic-dao/wiki/Search](http://code.google.com/p/hibernate-generic-dao/wiki/Search)

# php - 如何根据关键字和最后一次找到结果的时间从四个表中查找结果

> ID：10636501
> 
> 赞同：0
> 
> 时间：2012-05-17T13:17:58.093
> 
> 标签：php, mysql, keyword

好的，所以我有这四个表：`links`、`submissions`、`links_keywords`和`submissions_keywords`。

它们的结构有点像这样：

```
链接：
链接 ID 链接 URL

提交：
提交_id 提交_url 提交_last_used

链接关键字：
id link_id 关键字

提交关键字：
id submit_id 关键字

```

我想做的是从提交中提取结果，其中链接的关键字与提交的关键字最匹配，如果有多个结果，则按最后使用的结果对其进行过滤。我不确定如何构造这个查询。另外我不想用一个关键字匹配它，我想看看有多少关键字匹配，然后我可以确定最好的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:30:07.197

我刚刚在 Oracle 中处理了一个类似的查询。在 MySQL 中这 100% 容易，因为 Oracle 没有 LIMIT 子句。这可能不是最有效的，但会为您提供所需的答案。要获取链接值，只需添加另一个联接。您可以通过删除其中一个关键字子句来搜索单个术语。

```
select  
    t1.submission_id, t1.submission_url, t1.submission_last_used , t3.keyword
from 
    submissions t1
join submission_keywords t2 on 
    t2.submission_id = t1.submission_id
join link_keywords t3 on 
    t3.keyword = t2.keyword 
where 
    (t3.keyword = 'search' OR
    t3.keyword = 'email')
    AND t1.submission_id = (
        SELECT submission_id from submissions where submission_id IN (
            SELECT submission_id from submission_keywords WHERE keyword = t2.keyword) 
        order by submission_last_used DESC LIMIT 1); 
```

# wpf - 为 Grid 应用不透明度并且不为其子控件应用

> ID：10636502
> 
> 赞同：5
> 
> 时间：2012-05-17T13:18:01.177
> 
> 标签：wpf, silverlight, xaml

我将**opacity** 0.75 应用于所有也具有**opacity**`Grid`的孩子。`Grid`

 **是否可以**排除子控件并且不对它们应用不透明度？**

谢谢！

**XAML**

```
<Grid  x:Name="RootGrid" Opacity="0.75" Visibility="Visible" ClipToBounds="False"
       VerticalAlignment="Stretch" HorizontalAlignment="Stretch" >
    <local:MarqueeVer x:Name="marquee1" Duration="30" ClipToBounds="True"
                      RenderTransformOrigin="0.5,0.5" Margin="0,0,0,0"
                      VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
                      Background="Transparent" Opacity="1">
        <StackPanel Name="lstItems" FlowDirection="LeftToRight" Orientation="Vertical"
                    VirtualizingStackPanel.IsVirtualizing="True"
                    VirtualizingStackPanel.VirtualizationMode="Recycling">
        </StackPanel>
    </local:MarqueeVer>
</Grid> 
```

**更新：**

我在[这里](http://forums.silverlight.net/p/252301/630133.aspx/1?Opacity%20effect%20on%20child%20control)找到了一些解决方案，但有更简单的解决方案吗？

> 您只需要计算每种颜色的正确 Alpha 通道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T13:56:37.223

如果只想改变网格背景的不透明度，那么只需要在背景图片中设置 opacity=0.75。

> 但是我在网格上应用了一些画笔？在这种情况下我能做什么？

在这种情况下，在画笔中设置不透明度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:49:51.390

为了达到这种效果，您可以添加 a`Rectangle`作为 的子`Grid`元素（但作为其他元素的兄弟）并将`Background`and`Opacity`应用于`Rectangle`. 这样，不透明度的变化不会影响`Grid`.

```
<Grid Name="Root">
<Rectangle Name="Background" Opacity="0.75">
<Rectangle.Fill>

</Rectangle.Fill>
</Rectangle>
<Label>Hello World</Label>
</Grid> 
```

我知道这可能是一个肮脏的解决方案，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:41:39.367

你不能让孩子比父母更不透明，但你可以使用不同不透明度的画笔来实现一些叠加效果。

像这样：

```
<Window x:Class="stackoverflowviewbox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <SolidColorBrush Color="White" Opacity=".5" x:Key="WhiteHalfOpacityBrush"/>
</Window.Resources>
<Grid Background="Green">
    <Border BorderThickness="1" BorderBrush="Black" HorizontalAlignment="Center" VerticalAlignment="Center">
        <Grid Background="{StaticResource WhiteHalfOpacityBrush}">
            <Label>
                Hello world.Hello world.Hello world.Hello world.Hello world.Hello world.
            </Label>
        </Grid>
    </Border>
</Grid> 
```**

# c# - 我如何使用skip and take in linq来做到这一点

> ID：10636505
> 
> 赞同：0
> 
> 时间：2012-05-17T13:18:03.573
> 
> 标签：c#, linq

我有一个包含超过 50k 行的数据集。我决定取前 50 个值的平均值，然后取后 50 个值的平均值，依此类推（这样我将获得数据集的一半，平均值为 50 个值组）。

这是我的代码：

```
var Rate = (from dr in ds.Tables[0].AsEnumerable()
                                    select new
                                    {
                                        rate = dr.Field<double>(columnName)
                                    }.rate).ToList();
                            if (Rate.Count > 50)
                            {
                                var avg = Rate.CheckRateValue();
                            } 
```

这是我的扩展方法的代码：

```
public static IEnumerable<double> CheckRateValue(this IEnumerable<double> values)
{
    int i = 1;
    int j = 0;
    for (; i < values.Count(); )
    {
        yield return values.Skip(j * 2).Take(2).Average();
        i = i + 2;
        j++;
    }
} 
```

**问题：** 它工作正常，但速度很慢。有人对如何加快速度有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:30:28.677

使用[DataTable.Compute](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)可能会更快，因为您跳过了创建的迭代`List<dobule>`。

```
double average = (double)ds.Tables[0].Compute("avg(columnName)", ""); 
```

第二个参数是一个 fitler 表达式，因此如果表中的数据允许，您可以使用它来进行跳过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:20:47.973

```
var yourList=yourList.Take(50).Aggregate((acc, cur) => acc + cur) / list.Count 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:29:19.113

如果你想取 50 个项目并取平均值（比如取前 50 个，取平均值，取接下来的 50 个，取平均值，等等），并获取平均值列表，你可以使用[MoreLinq](http://code.google.com/p/morelinq/)。[批](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/Batch.cs)

您可以使用

```
 var result = list.Batch(50).Select(x=> x.Average()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:25:33.697

为什么这会比简单的更快：

```
var average = dat.AsEnumerable().Average(dr => (double)dr["ColumnName"]); 
```

事实上 - 这应该比一次取 50 个的额外复杂性更快......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T14:38:09.373

for { 产生返回值.Skip(j * 2).Take(2).Average(); }

在每次循环迭代中从开始移动到当前页面：这将是 n^2。另见[画家施莱米尔](http://www.joelonsoftware.com/articles/fog0000000319.html)。

你应该枚举`values`一次！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T09:45:06.140

通过使用 row_number() 我解决了它。

```
declare @Skip int = 20
declare @Take int = 10

select SomeColumn
from (
   select SomeColumn,
          row_number() over(order by SomeColumnToOrderBy) as rn
   from YourTable
 ) T
where rn > @Skip and 
  rn <= @Skip + @Take 
```

# android - 正在为地图中的每个项目调用叠加项目 OnTap 方法

> ID：10636506
> 
> 赞同：0
> 
> 时间：2012-05-17T13:18:08.823
> 
> 标签：android

我有这个 ontap 方法来显示我点击的 Item 的 toast：

```
@Override
        protected boolean onTap(int index) {
            // TODO Auto-generated method stub
        String name= ballon.get(index).getTitle();

        Toast.makeText(c, name, Toast.LENGTH_LONG).show();

            return false;
        } 
```

但是，当有多个项目时，即使我只点击一个项目，它也会为该地图上的每个项目敬酒。我只想为我点击的一项显示吐司。有什么技巧或做了我想念的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:02:20.533

让 onTap 返回 true 而不是 false。阻止事件冒泡的真实信号。

# android - android：使用 webview 仅显示部分页面

> ID：10636507
> 
> 赞同：0
> 
> 时间：2012-05-17T13:18:09.597
> 
> 标签：android, webview

我试图在 WebView 中仅显示部分页面，例如。从第 400 行到第 600 行 html 代码。（该部分包含我要显示的网页上的数据框）

可能吗？如何？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:46:39.213

我认为您不能使用 WebView 部分加载页面。相反，您可以做的是加载网络，然后只提取您想要的部分。您可以使用 URLConnection 获取远程 url 的内容。 [http://developer.android.com/reference/java/net/URLConnection.html](http://developer.android.com/reference/java/net/URLConnection.html)

之后，只需将获取的数据转换为字符串，进行预处理。完成此操作后，您可以将预处理字符串（您想要的 html 块）传递给 WebView 进行显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T06:45:32.673

# 使用 jsoup

首先，您应该知道安卓市场服务条款禁止未经授权使用网络服务（包括“网页”）。

[现在您知道了，您可以使用jsoup](http://jsoup.org/)抓取网页中的数据。

将 JAR 放入您的项目中，创建一个名为“libs”的文件夹。右键单击它并添加到构建路径。

然后试试这个，他们主页上的例子：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

（注意：不要刮维基百科......他们禁止快速）

您只需要检查要从中获取数据的页面的 DOM 并确定什么是好的选择器。那里是一个 CSS 选择器。另一种方法是使用 xpath：[https ://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/](https://norrisshelton.wordpress.com/2011/01/27/jsoup-java-html-parser/)

# android - 如何在android中读取post curl请求并读取响应

> ID：10636508
> 
> 赞同：1
> 
> 时间：2012-05-17T13:18:09.607
> 
> 标签：android, curl

我正在实现一个休息 API，现在我必须执行以下请求，然后从服务器读取响应。任何人都可以指导我或提供一段代码来在 Android 中实现它

```
$ curl `http://xyz.com:84545/api/locks/` 
 -X POST \
 -H "Date: Thu, 01 Mar 2012 01:23:45 GMT" 
 -H "Authorization: SABH ZW1haWxAaG9zdC5jb20Mohoehglsdofsdofjsdfjsdfjsdj DUzMjNhOTg=" \
 -H "Content-Type: application/json" \
 -d '{"i":0,"u":1,"h":1,"m":"2312312312","n":"Lock"}' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:34:30.580

使用[`HttpClient`](http://developer.android.com/reference/org/apache/http/client/HttpClient.html). 代码片段可以在[这里](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)找到。

# asp.net-mvc-3 - 如何在 Mvc3 中获取当前登录的用户

> ID：10636509
> 
> 赞同：0
> 
> 时间：2012-05-17T13:18:10.307
> 
> 标签：asp.net-mvc-3, httpcontext

嗨，我需要获取实时用户的 id，我能够做到。但是当我从一个端口切换到另一个端口时，它不会在另一个端口上获取用户

我已经这样做了：

```
public static Nullable<int> GetLiveUser()
    {
        if (HttpContext.Current.Session[ConstantHelper.LoginAccountID] != null)
        {
            return ((int)HttpContext.Current.Session[ConstantHelper.LoginAccountID]);
        }
        else
        {
            return null;
        }

    } 
```

ConstantHelper 是一个以 LoginAccountID 作为属性的类。
请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:20:21.100

`HttpContext.Current.User.Identity.Name`或在`Controller`, `User.Identity.Name`.

见[`IIdentity`](http://msdn.microsoft.com/en-us/library/system.security.principal.iidentity.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:05:10.923

如果您使用剃须刀，只需`@User.Identity.Name`在您的视图中使用。您可能还需要禁用匿名身份验证并启用 Windows 身份验证。

# scripting - 我可以使用 Applescript 控制程序而不将该程序置于前台吗？

> ID：10636511
> 
> 赞同：3
> 
> 时间：2012-05-17T13:18:12.670
> 
> 标签：scripting, background, popup, window, applescript

我将 Applescript 与[Alfred](http://www.alfredapp.com/)结合使用来提供键盘快捷键，用于在[Billings](http://www.marketcircle.com/billings/)中启动和停止计时器。这对于我跟踪我的自由职业者工作非常有用。

这是我正在使用的代码：

```
tell application "Billings" to activate
tell application "System Events"
    tell process "Billings"
        tell menu bar 1
            tell menu bar item "Slips"
                tell menu "Slips"
                    if menu item "Start Timer" exists then
                        click menu item "Start Timer"
                    else
                        click menu item "Stop Timer"
                    end if
                end tell
            end tell
        end tell
        keystroke "h" using {command down}
    end tell
end tell 
```

我将它弹出到一个 Alfred 扩展集以使用 CTRL+ALT+CMD+T 激活。

不幸的是，它有点笨拙。昨天之前我从来没有接触过Applescript，所以我担心我的排骨有点差。比林斯窗口暂时弹出到前台，然后再次隐藏。如果碰巧在键盘上按下除 H 以外的任何修饰键，它也不会隐藏。

因此：

*   有没有更好的方法来调用比林斯，这样它就不会弹出？
*   如果没有，是否有更好的方法来隐藏它并返回到先前具有焦点的应用程序。

**为清楚起见进行编辑：** Billings 是一个 OSX 自由时间跟踪和发票包。我使用计时器来跟踪我在每项任务上花费了多少时间，这样我就可以准确地向客户收费。我个人觉得非常有用。计时器（针对我正在处理的当前项目）显示在菜单栏中，可以通过单击鼠标进行切换。理想情况下，当比林斯不在前台时，我可以使用键盘快捷键轻松启动和停止它，但是没有内置功能可以这样做。它看起来像这样：![计时器的图片](../Images/cfecd3a43a66b69c26dd84e7e1cc13fc.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T19:41:50.810

这是将应用程序保持在后台的解决方案。

```
-- no activate
tell application "System Events"
    tell group 1 of group 2 of window "Billings" of process "Billings"
        perform action "AXPress" of (get first button whose its name ends with " Timer")
    end tell
end tell 
```

--

如果它不起作用，这里是隐藏应用程序而不使用快捷方式的解决方案

```
activate application "Billings"
tell application "System Events"
    tell process "Billings"
        tell menu "Slips" of menu bar item "Slips" of menu bar 1
            click (get first menu item whose its name ends with " Timer")
        end tell
        set visible to false
    end tell
end tell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T15:55:48.233

这是另一种方法：

```
tell application "System Events" to set xxx to (1st process whose frontmost is true)
activate application "Billings"
tell application "System Events"
    tell process "Billings"
        click menu item 7 of menu 1 of menu bar item 7 of menu bar 1
        if visible then
            set visible to false
        end if
    end tell
end tell
set frontmost of xxx to true 
```

# apache - drupal 6 崩溃运行 xampp 的 apache

> ID：10636516
> 
> 赞同：1
> 
> 时间：2012-05-17T13:18:20.990
> 
> 标签：apache, drupal, crash

我在 xampp 1.7.1 上运行 drupal 6。PHP 版本 5.2.9 问题是当我加载一个 drupal 6 站点时 Apache 崩溃了。

问题签名：问题事件名称：APPCRASH 应用程序名称：httpd.exe 应用程序版本：2.2.11.0 应用程序时间戳：493f5d44 故障模块名称：php5ts.dll 故障模块版本：5.2.9.9 故障模块时间戳：49a56925 异常代码：c00000fd 异常偏移量： 00151f11 操作系统版本：6.1.7600.2.0.0.256.48 区域设置 ID：1033

我可以毫无问题地运行 cron.php。这是我的 index.php 代码。

```
 require_once './includes/bootstrap.inc';
drupal_bootstrap(DRUPAL_BOOTSTRAP_FULL);

$return = menu_execute_active_handler();

// Menu status constants are integers; page content is a string.

if (is_int($return)) {
  switch ($return) {
    case MENU_NOT_FOUND:

      drupal_not_found();
      break;
    case MENU_ACCESS_DENIED:
      drupal_access_denied();
      break;
    case MENU_SITE_OFFLINE:

      drupal_site_offline();
      break;

  }
}

/*
elseif (isset($return)) {
    echo $return;
  // Print any value (including an empty string) except NULL or undefined:
 print theme('page', $return);
}

drupal_page_footer();
*/ 
```

如果我评论最后一点，elseif 和页脚部分我会得到一个白屏。如果我取消注释它 Apache 崩溃。我不知道发生了什么。我将实时站点下载到我的本地主机，从设置中更改了 db_url，我得到了这个。你有什么想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T07:56:40.287

我有一个类似的问题。然后我升级了我的 Apache 安装（我使用的是 xampp）并解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T18:02:14.490

你能列出网站中使用的模块吗？
还可以尝试将 exit 放入所有模块的 init 钩子中。

你能正确运行 update.php 吗？

# regex - Powershell 并通过 select-string -Allmatches (2.0) 传递元字符

> ID：10636521
> 
> 赞同：1
> 
> 时间：2012-05-17T13:18:36.100
> 
> 标签：regex, powershell

我正在尝试编写/修改一个函数来清除 Windows 文件系统上的非法文件名（由我们网络的 OS X 客户端放置在那里）。该脚本工作得很好，但是当尝试在正则表达式中传递某些元字符时，在 -AllMatches 中执行的检查对于正匹配返回 false（使用故意非法命名的文件夹进行测试）。如果字符是单独完成的（不使用提供的循环），它们返回 true。我已经尝试了所有转义方法（以及两者的组合，\ 和`），但没有运气。其他特殊字符也可以正常工作（例如 &）。

有人对它为什么会这样有任何想法吗？（注意：下面注释掉的两个非法字符声明被分解为不起作用的字符和起作用的字符。

```
function Check-IllegalCharacters ($Path, [switch]$Fix, [switch]$Verbose)
{
Write-Host Checking files in $Path, please wait...
#Get all files and folders under the path specified
$items = Get-ChildItem -Path $Path -Recurse
foreach ($item in $items)
{
    #Check if the item is a file or a folder
    if ($item.PSIsContainer) { $type = "Folder" }
    else { $type = "File" }

    #Report item has been found if verbose mode is selected
    if ($Verbose) { Write-Host Found a $type called $item.FullName }

    #Check if item name is 128 characters or more in length
    if ($item.Name.Length -gt 127)
    {
        Write-Host $type $item.Name is 128 characters or over and will need to be truncated -ForegroundColor Red
    }
    else
    {
    #$illegalChars = '[<>?*|/\:"]'    $illegalChars = '[&{}~#%]'
        #Got this from http://powershell.com/cs/blogs/tips/archive/2011/05/20/finding-multiple-regex-matches.aspx
        $illegalChars = '[&{}~#%]'
        filter Matches($illegalChars)
        {
            $item.Name | Select-String -AllMatches $illegalChars |
            Select-Object -ExpandProperty Matches
            Select-Object -ExpandProperty Values

        }

        #Replace illegal characters with legal characters where found
        $newFileName = $item.Name
        Matches $illegalChars | ForEach-Object {
            Write-Host $type $item.FullName has the illegal character $_.Value -ForegroundColor Red
            #These characters may be used on the file system but not SharePoint
            if ($_.Value -match "&") { $newFileName = ($newFileName -replace "&", "and") }
            if ($_.Value -match "{") { $newFileName = ($newFileName -replace "{", "(") }
            if ($_.Value -match "}") { $newFileName = ($newFileName -replace "}", ")") }
            if ($_.Value -match "~") { $newFileName = ($newFileName -replace "~", "-") }
            if ($_.Value -match "#") { $newFileName = ($newFileName -replace "#", "") }
            if ($_.Value -match "%") { $newFileName = ($newFileName -replace "%", "") }
        }

        #Check for start, end and double periods
        if ($newFileName.StartsWith(".")) { Write-Host $type $item.FullName starts with a period -ForegroundColor red }
        while ($newFileName.StartsWith(".")) { $newFileName = $newFileName.TrimStart(".") }
        if ($newFileName.EndsWith(".")) { Write-Host $type $item.FullName ends with a period -ForegroundColor Red }
        while ($newFileName.EndsWith("."))   { $newFileName = $newFileName.TrimEnd(".") }
        if ($newFileName.Contains("..")) { Write-Host $type $item.FullName contains double periods -ForegroundColor red }
        while ($newFileName.Contains(".."))  { $newFileName = $newFileName.Replace("..", ".") }

        #Fix file and folder names if found and the Fix switch is specified
        if (($newFileName -ne $item.Name) -and ($Fix))
        {
            Rename-Item $item.FullName -NewName ($newFileName)
            Write-Host $type $item.Name has been changed to $newFileName -ForegroundColor Blue
        }
    }
}
} 
```

如果有人能够提供帮助，非常感谢！

编辑：为了进一步澄清，这里的函数按原样工作正常，只有在将正则表达式（并在必要时转义）更改为另一个变体 $illegalChars = '[<>?*|/\:"]' 时，它不再正常运行。它会运行得很好，没有错误，但是它不会捕获任何包含这些字符的文件或文件夹。

该函数可以被加载，然后通过执行'Check-IllegalCharacters -Path $path -Verbose'来运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T07:29:22.243

正如您在下面的示例中看到的那样，当字符是正则表达式元字符时，您必须在替换运算符的左侧使用“\”。开关`-regex`选项可以帮助您。

```
clear-host
$stringTotest = "coucou & Bonjour {vous} [<>?*|/\:`"]"

switch -regex ($stringTotest)
{
    "&"
  {
        $stringTotest = $stringTotest -replace '&', 'et'
    }
    "{"
  {
        $stringTotest = $stringTotest -replace '{', '('
    }
    "{"
  {
        $stringTotest = $stringTotest -replace '}', ')'
    }
    "\["
  {
        $stringTotest = $stringTotest -replace '\[', '1'
    }
    "<"
  {
        $stringTotest = $stringTotest -replace '<', '2'
    }
    ">"
  {
        $stringTotest = $stringTotest -replace '>', '3'
    }
    "\?"
  {
        $stringTotest = $stringTotest -replace '\?', '4'
    } 
    "\*"
  {
        $stringTotest = $stringTotest -replace '\*', '5'
    }
    "\|"
  {
        $stringTotest = $stringTotest -replace '\|', '6'
    }
    "/"
  {
        $stringTotest = $stringTotest -replace '/', '7'
    }  
    "\\"
  {
        $stringTotest = $stringTotest -replace '\\', '8'
    }    
    ":"
  {
        $stringTotest = $stringTotest -replace ':', '9'
    }      
    "`""
  {
        $stringTotest = $stringTotest -replace '"', '0'
    }    
    "\]"
  {
        $stringTotest = $stringTotest -replace '\]', '1'
    }    
    default
  {
        break
    }
}

$stringTotest 
```

# asp.net - 如何从 EF ExectureStoreQuery() 返回键值对？

> ID：10636522
> 
> 赞同：1
> 
> 时间：2012-05-17T13:18:37.867
> 
> 标签：asp.net, collections, entity-framework-4.1

我有一个复杂的查询，它从对 ExecuteStoreQuery 的调用中返回许多 int 对（mykey 和 mykeytype）：

```
 public class myPair {
      public int mykey {get;set;}
      public int mykeytype {get;set;}
  }

  IEnumerable<myPair> list;
  list = _context.ExecuteStoreQuery(sql, param);

  foreach (myPair pair in list) {
     ...do stuff with pair.mykey and pair.mykeytype
  } 
```

有没有办法避免必须创建一个具有映射到我的查询返回的值的属性的类？

# list - 返回普通lisp中没有最后一个元素的列表

> ID：10636523
> 
> 赞同：6
> 
> 时间：2012-05-17T13:18:46.597
> 
> 标签：list, common-lisp

我编写了我的愚蠢函数，它返回一个没有通用 lisp 中最后一个元素的列表。这个问题有没有更优雅的解决方案？

这是我的代码：

```
(defun list-without-last (l)
  (if (> (length (rest l)) 0)
      (append (list (first l)) (list-without-last (rest l)))
      nil)) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-04-09T21:58:18.717

简短而简单，就像 Lisp 一样。这是神奇的东西：

`(defun without-last(l) (reverse (cdr (reverse l))) )`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T13:26:03.597

您的函数有两个问题：

*   您正在使用长度。LENGTH 必须扫描整个列表。

*   您正在使用附加。尝试使用缺点。缺点更简单。

Common Lisp 也已经提供了这个功能。它被称为BUTLAST。

在实际代码中，我们也不会使用递归。堆栈大小会限制我们可以处理的列表的长度。

使用`LOOP`宏的迭代版本：

```
CL-USER> (defun my-butlast (list)
           (loop for l on list
                 while (rest l)
                 collect (first l)))
MY-BUTLAST                                                                                                                                      
CL-USER> (compile 'my-butlast)
MY-BUTLAST                                                                                                                                      
NIL                                                                                                                                             
NIL                                                                                                                                             
CL-USER> (my-butlast '(1 2 3 4 5))
(1 2 3 4)                                                                                                                                       
CL-USER> (my-butlast '(1))
NIL                                                                                                                                             
CL-USER> (my-butlast '(1 2))
(1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-18T20:19:39.157

有时您可能会发现自己需要修改列表而不是制作副本，在这种情况下，这可能会很方便：

```
(defun butlast! (x)
  (do ((y x (cdr y)))
      ((null (cddr y))
       (and (rplacd y nil) (return x))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T00:06:46.730

正如上面提到的 Rainer Joswig，您应该使用 common lisp 内置函数`butlast`。

但是，如果你仍然想看看一个高效的递归版本会是什么样子：

```
(defun butlast2 (list)
  (labels ((butlast2-worker (list result)
             (if (null list)
                 (nreverse result)
                 (let ((element (first list))
                       (rest (rest list)))
                   (if (null rest)
                       (nreverse result)
                       (butlast2-worker rest (cons element result)))))))
    (butlast2-worker list ()))) 
```

只要您的 lisp 实现支持尾调用优化，这将被转换为循环。诀窍是，无论何时`butlast2-worker`调用，其结果都将直接返回，这意味着您不需要跟踪函数先前调用的参数/内部变量。这最后意味着您不需要像通常为递归函数所做的那样不断填充调用堆栈。

查看 Rainer Joswig 的定义，您可以看到大小的巨大差异。看看 的力量`loop`，并尽可能地学习明智地使用它（或者更好的是：使用`iterate` [http://common-lisp.net/project/iterate/](http://common-lisp.net/project/iterate/)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-05T18:58:39.113

关于什么：

```
(defun butlast2 (L)
  (if (null (rest L))
    nil
    (cons (first L) (butlast2 (rest L)))
  )
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-09T08:46:08.933

```
(defun remove-last (lst)
  (do ((l lst (rest l))
       (res '()))
      ((null (rest l)) (nreverse res))
    (push (first l) res))) 
```

# linux - syslogd 在 5 秒内将一条远程消息写入日志文件

> ID：10636525
> 
> 赞同：1
> 
> 时间：2012-05-17T13:18:56.757
> 
> 标签：linux, ubuntu, udp, syslog

我在 Ubuntu VBox vm 上使用 syslogd（包 sysklogd）来记录来自远程主机的消息：VBox vm Windows xp java application with log4j syslog appender。我发送了 10 条超时 100 毫秒的消息，一切正常，但是 syslogd 将它们写入日志文件的速度非常慢，5 秒内有 1 条记录。我在两个虚拟机上都使用了wireshark，所有的udp包都没有超时，所以系统日志有问题。

```
May 17 17:05:09 192.168.130.198 16:57:48,055 ...| Test message ¹0 
May 17 17:05:14 192.168.130.198 16:57:48,155 ...| Test message ¹1 
May 17 17:05:19 192.168.130.198 16:57:48,255 ...| Test message ¹2 
```

所有其他消息似乎都由 syslog 缓存。

问题：

我怎样才能消除这种延迟？我打算将来自应用服务器集群的日志消息写入一个日志文件。syslog 是否能够在一秒钟内处理 500-1000 条 udp 日志消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-23T17:31:47.503

刚遇到同样的问题，偶然发现了这个问题，后来发现是由于日志服务器反向DNS查找延迟和失败造成的。

对于`sysklogd`，对我有用的快速修复（不为内部网络设置 DNS 服务器）是添加一个条目，例如

`192.168.130.198 any-hostname`

在`/etc/hosts`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:42:39.873

我建议使用`syslog-ng`而不是`sysklogd`.

另一方面，问题也可能来自时间同步的问题。对两个主机都使用 ntp。

# java - 什么是 Java 中的支持集合？

> ID：10636528
> 
> 赞同：3
> 
> 时间：2012-05-17T13:19:17.323
> 
> 标签：java, collections

这些方法返回支持的集合，因为一个集合中的更改会影响另一个集合。[一种直写过程]

> ```
> headSet(e, b)     Returns a subset ending at element e and exclusive of e
> 
> headMap(k, b)     Returns a submap ending at key k and exclusive of key k
> 
> tailSet(e, b)     Returns a subset starting at and inclusive of element e
> 
> tailMap(k, b)     Returns a submap starting at and inclusive of key k
> 
> subSet(s, b, e, b)    Returns a subset starting at element s and ending just before element e
> 
> subMap(s, b, e, b)    Returns a submap starting at key s and ending just before key e 
> ```

那么和`Arrays.asList()`方法有什么区别呢？该方法将一个数组复制到一个列表中。API 说“将返回列表的更改‘写入’到数组，反之亦然”。

那么，它是否也是一个支持集合？如果是，那么 List 接口中有 toArray() 方法——这也是支持集合吗？

有没有其他方法`Arrays.asList()`可以允许写入？如何仅通过查看方法签名来确定该方法是否允许写入？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T13:22:14.593

是的，`Arrays.asList`返回一个由数组支持的列表，因为它不复制，而是`Collection.toArray`复制，所以它不受集合支持。

您无法判断方法是否仅从签名返回由其输入支持的集合 - 仅从文档中返回。通常，它使用“支持者”、“视图”等词来记录。有很多示例——`List.subList`例如，`Collections.newSetFromMap`等等——以及第三方库中的无数示例。

# python - 仅运行特定文件的测试

> ID：10636531
> 
> 赞同：1
> 
> 时间：2012-05-17T13:19:35.537
> 
> 标签：python, unit-testing, pycharm

我有两个带有单元测试的文件，第二个文件上的测试扩展并覆盖了第一个文件上的一些测试。

用一个非常简化的例子来说明。有`tests1.py`：

```
import unittest

class A(unittest.TestCase):
    def setUp(self):
        print "setup stuff A"

    def test_stuff(self):
        print "test stuff A"

if __name__ == "__main__":
    unittest.main() 
```

并且`tests2.py`：

```
import unittest
from tests1 import A

class B(A):
    def setUp(self):
        print "setup stuff B"

    def test_stuff(self):
        print "test stuff B"

if __name__ == "__main__":
    unittest.main() 
```

我希望能够单独运行每个文件，或者一次运行整个文件集。而且我不想手动创建不同的套件，我必须手动指定要运行的测试集......

但是...对于上面的示例，当我运行 时，也会运行`python tests2.py`的测试！`tests1.py`当我批量运行它们时，它们运行了两次。我知道发生这种情况是因为我`A`从`tests2.py`. 我怎样才能避免这种情况？是否有我应该遵循的最佳实践？

我实际上是从 PyCharm 运行测试，但我想这可能不相关，因为我可以重现从命令行运行测试的相同问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:28:14.433

将公共代码拆分为另一个不继承自的类`unittest.TestCase`：

```
class Parent(object):
    pass # common stuff goes here

class A(Parent, unittest.TestCase):
    pass # A stuff here

class B(Parent, unittest.TestCase):
    pass # B stuff here 
```

# c++ - 链接 Thrift 服务器 C++ 时出错

> ID：10636536
> 
> 赞同：1
> 
> 时间：2012-05-17T13:19:59.503
> 
> 标签：c++, thrift

我正在尝试用 C++ 构建一个节俭服务器，但我似乎在链接阶段遇到了问题。任何人都可以解释一下吗？

这就是我正在运行的。（请原谅我是 C++ n00b）：

```
g++ -Wall -L/usr/local/lib  user_constants.o user_types.o UserService_server.o -lthrift 
```

这是输出

```
user_types.o: In function `UserCollection::read(apache::thrift::protocol::TProtocol*)':
user_types.cpp:(.text+0xaba): undefined reference to `CollectionInformation::read(apache::thrift::protocol::TProtocol*)'
user_types.o: In function `UserCollection::write(apache::thrift::protocol::TProtocol*) const':
user_types.cpp:(.text+0xca7): undefined reference to `CollectionInformation::write(apache::thrift::protocol::TProtocol*) const'
UserService_server.o: In function `UserServiceProcessor::UserServiceProcessor(boost::shared_ptr<UserServiceIf>)':
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x33): undefined reference to `vtable for UserServiceProcessor'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0xaf): undefined reference to `UserServiceProcessor::process_getById(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x136): undefined reference to `UserServiceProcessor::process_save(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x1bd): undefined reference to `UserServiceProcessor::process_destroy(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x23e): undefined reference to `UserServiceProcessor::process_search(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x2bc): undefined reference to `UserServiceProcessor::process_searchByName(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x33a): undefined reference to `UserServiceProcessor::process_searchByEmailAddress(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x3b8): undefined reference to `UserServiceProcessor::process_checkUsernameExists(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x436): undefined reference to `UserServiceProcessor::process_registerUser(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.cpp:(.text._ZN20UserServiceProcessorC2EN5boost10shared_ptrI13UserServiceIfEE[_ZN20UserServiceProcessorC5EN5boost10shared_ptrI13UserServiceIfEE]+0x4b4): undefined reference to `UserServiceProcessor::process_verifyUser(int, apache::thrift::protocol::TProtocol*, apache::thrift::protocol::TProtocol*, void*)'
UserService_server.o: In function `apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::writeMessageBegin(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, apache::thrift::protocol::TMessageType, int)':
UserService_server.cpp:(.text._ZN6apache6thrift8protocol16TBinaryProtocolTINS0_9transport10TTransportEE17writeMessageBeginERKSsNS1_12TMessageTypeEi[apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::writeMessageBegin(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, apache::thrift::protocol::TMessageType, int)]+0x27): undefined reference to `apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::VERSION_1'
UserService_server.o: In function `apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::readMessageBegin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, apache::thrift::protocol::TMessageType&, int&)':
UserService_server.cpp:(.text._ZN6apache6thrift8protocol16TBinaryProtocolTINS0_9transport10TTransportEE16readMessageBeginERSsRNS1_12TMessageTypeERi[apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::readMessageBegin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, apache::thrift::protocol::TMessageType&, int&)]+0x48): undefined reference to `apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::VERSION_MASK'
UserService_server.cpp:(.text._ZN6apache6thrift8protocol16TBinaryProtocolTINS0_9transport10TTransportEE16readMessageBeginERSsRNS1_12TMessageTypeERi[apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::readMessageBegin(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, apache::thrift::protocol::TMessageType&, int&)]+0x53): undefined reference to `apache::thrift::protocol::TBinaryProtocolT<apache::thrift::transport::TTransport>::VERSION_1'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:26:19.643

您的构建线看起来有点“细”。您确定您正在获取库 using`-L`和库本身 using的所有位置`-l`吗？

综上所述，我想说 Boost 和 Apache 是罪魁祸首。你必须单独链接它们吗？此外，请记住，与某些架构相比，库路径变量（通常`LD_LIBRARY_PATH`）需要*在链接时*和运行时设置为构建命令行上的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T15:44:01.360

Usual thrift generates three .cpp file for each interface (*.thrift) you should add all of them ( UserService.cpp and UserService_constants.cpp, UserService_types.cpp ) to g++ arguments.

# android - 带有光标适配器滚动问题的android列表视图

> ID：10636541
> 
> 赞同：1
> 
> 时间：2012-05-17T13:20:12.980
> 
> 标签：android, listview, scroll, android-listview, android-contacts

在我的应用程序中，我将联系人加载到列表视图中。我有带有图像、文本和复选框的列表视图，并由光标适配器实现。我的问题是当我向上/向下滚动列表视图时，它的位置发生了变化。也就是说，如果选择（勾选复选框）位置 1、3、4、2 并向下和向上滚动，勾选的位置会随机更改。我花了更多时间来找出解决方案，但我无法得到它。请帮我。

我的适配器代码前：

```
 public class ContactsListAdapter extends CursorAdapter {

    ContentResolver cr;
    private final LayoutInflater mInflater;
    private Context mContext;

    @SuppressWarnings("unchecked")
    public ContactsListAdapter(Context context, Cursor c,ArrayList<ContactPhoneInfo> selected) {
        super(context, c, true);
        this.checkedContacts = (ArrayList<ContactPhoneInfo>) selected.clone();
        mInflater = LayoutInflater.from(context);
        this.mContext = context;
    }

    public void bindView(View view,Context context_bind, Cursor cursor)
    {   
        final LinearLayout linear = (LinearLayout) view.findViewById(R.id.contacts_linearLayout1);
        final TextView contactEntryText = (TextView) view.findViewById(R.id.contacts_txtViewContactName);
        final CheckBox chkContact = (CheckBox) view.findViewById(R.id.contacts_chkContact);
        final TextView textCaption = (TextView) view.findViewById(R.id.contacts_layoutCaption);
        final ImageView photoView = (ImageView)view.findViewById(R.id.contacts_imgViewcontact);

        ContentResolver cr = context_bind.getContentResolver();
            .......

        int id = Integer.parseInt(cursor.getString(0));
        final String name = cursor.getString(1);

        contactEntryText.setText(name);
            .......
        view.setClickable(true);
        view.setFocusable(true);

        view.setOnClickListener(new OnClickListener() {
            public void onClick(View v) 
            {
                chkContact.setChecked(!chkContact.isChecked());
            }
        });

        chkContact.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                .buttonView.........
            }
        });
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view = mInflater.inflate(R.layout.contacts_listitem, parent,
                false);
        return view;
    }
} 
```

调用类编码：

```
 contactsListAdapter = new ContactsListAdapter(this,app.loadContactCursor(""),checkedContacts);
    setListAdapter(contactsListAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T05:21:50.453

**在调用setChecked**之前，我通过调用**setOnCheckedChangeListener**方法解决了我的问题

 **```
 chkContact.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            .buttonView.........
        }
    }); 
```

之后

```
chkContact.setChecked(!chkContact.isChecked()); 
```

我参考以下堆栈溢出问题：

[带有复选框问题的Android列表视图](https://stackoverflow.com/questions/5444355/android-listview-with-checkbox-problem)**

# ios4 - 如何在目标C中将一个日期字符串转换为另一种格式

> ID：10636554
> 
> 赞同：0
> 
> 时间：2012-05-17T13:21:01.360
> 
> 标签：ios4

我正在将数据库中的日期字段作为字符串类型读取，现在我想将该日期字符串转换为另一种格式，但是在使用 NSDateFormatter dateFromString 方法时返回 nil。

请帮助我在从数据库读取时识别日期格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:25:15.463

没有看到你的代码，很难说，但这里是日期格式化程序的一个非常简单的用法，我用它来读取像 2012-05-17 11:30:00 这样的日期。只需根据您的日期格式更改字符串，它应该可以工作。

```
NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
[inputFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *date = [inputFormatter dateFromString:string];
[inputFormatter release]; 
```

# xml - 在 XML 中查找字符串的编码

> ID：10636556
> 
> 赞同：0
> 
> 时间：2012-05-17T13:21:06.037
> 
> 标签：xml, character-encoding

我正在尝试查找以下 xml 片段的编码：

```
<?xml version="1.0" charset="UTF-8">
<name>Lo-Ve[]lo</name> 
```

在哪里`[]`显示为一个框。正确的标签内容是`Lo-Vélo`. 关键是名称标签的内容不是 UTF-8 编码的。

`hexdump -C`节目

```
00000000  3c 3f 78 6d 6c 20 76 65  72 73 69 6f 6e 3d 22 31  |<?xml version="1|
00000010  2e 30 22 20 63 68 61 72  73 65 74 3d 22 55 54 46  |.0" charset="UTF|
00000020  2d 38 22 3e 0a 3c 6e 61  6d 65 3e 4c 6f 2d 56 65  |-8">.<name>Lo-Ve|
00000030  01 6c 6f 3c 2f 6e 61 6d  65 3e 0a                 |.lo</name>.|
0000003b 
```

所以原始编码`Lo-Velo`应该显示为`0x65 0x01`as `é`。

我试图找出[这个 URL](http://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&artist=Evenings&api_key=b25b959554ed76058ac220b7b2e0a026)上损坏的 XML 的第 299 行中艺术家姓名的编码是什么 ，因此可以采取一些对策。

# visual-studio-2010 - Visual Studio 2010 专业版和 CPU 使用率

> ID：10636557
> 
> 赞同：0
> 
> 时间：2012-05-17T13:21:09.297
> 
> 标签：visual-studio-2010

我正在开发 Web 应用程序，当尝试调试应用程序时，CPU 使用率突然达到 100%，持续 15-20 分钟，有时甚至需要 30 分钟。这非常令人沮丧。

系统规格
Windows 7 32 位
3GB RAM

我已经用谷歌搜索了它，但没有找到任何合适的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T15:09:09.700

您是否尝试过清洁解决方案？

就我而言，高 CPU 使用率突然出现（WPF 项目）。重新启动 Visual Studio 没有帮助，也没有禁用/卸载插件。但是清洁解决方案确实有帮助！

# java - “@annotations 必须在单独的行上”的检查样式规则

> ID：10636563
> 
> 赞同：11
> 
> 时间：2012-05-17T13:21:36.960
> 
> 标签：java, annotations, checkstyle

我正在尝试为 checkstyle 创建一个规则，这将阻止编写内联注释用法，如下所示：

```
@Entity MyClass someEntity;
@Foo(a="B") public void bar(Baz baz) {
} 
```

但不会阻止这样的想法：

```
public void bar(@Param Baz baz) {
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-27T22:51:40.060

这个答案的大部分灵感来自[Checkstyle 的“Writing Checks”文章](http://checkstyle.sourceforge.net/writingchecks.html)。大部分工作都是在`AnnotationSameLineCheck`.

**AnnotationSameLineCheck.java**

这个 Java 文件的灵感来自于“Writing Checks”一文的[“Visitor In Action”部分](http://checkstyle.sourceforge.net/writingchecks.html)。

`getDefaultTokens`定义我们感兴趣的 Java 文件的哪些部分（又名标记）。第一个可能会认为我们会感兴趣`TokenTypes.ANNOTATION`，但事实并非如此。我们不感兴趣，`TokenTypes.ANNOTATION`因为我们不想检查所有注释；我们其实想无视`TokenTypes.PARAMETER_DEF`。

那我们对什么感兴趣？我们实际上对 Java 文件中可以注释的那些部分（即类定义`TokenTypes.CLASS_DEF`、方法定义`TokenTypes.METHOD_DEF`等）感兴趣。方便的是，Checkstyle 的 API 有一个方法可以告诉我们标记是否被注释。那个方法就是`AnnotationUtility.containsAnnotation`，用在`visitToken`。

用于确定注解是否与 Java 文件的其他部分位于同一行的算法如下：

1.  确定特定标记是否包含注释。如果没有，什么也不做。
2.  找到注释标记。
3.  在注释标记之前找到标记。
4.  在注解标记之后找到标记。
5.  如果注释标记与前一个标记在同一行，则记录错误。
6.  如果注释标记与下一个标记在同一行，则记录错误。

该算法可在 中找到`visitToken`。

```
package example;

import com.puppycrawl.tools.checkstyle.api.AnnotationUtility;
import com.puppycrawl.tools.checkstyle.api.Check;
import com.puppycrawl.tools.checkstyle.api.DetailAST;
import com.puppycrawl.tools.checkstyle.api.TokenTypes;

public class AnnotationSameLineCheck extends Check {
    @Override
    public int[] getDefaultTokens() {
        // PACKAGE_DEF and PARAMETER_DEF were left out of the list
        return new int[] { TokenTypes.ANNOTATION_DEF, //
                TokenTypes.ANNOTATION_FIELD_DEF, //
                TokenTypes.CLASS_DEF, //
                TokenTypes.CTOR_DEF, //
                TokenTypes.ENUM_DEF, //
                TokenTypes.ENUM_CONSTANT_DEF, //
                TokenTypes.INTERFACE_DEF, //
                TokenTypes.METHOD_DEF, //
                TokenTypes.VARIABLE_DEF };
    }

    @Override
    public void visitToken(DetailAST ast) {
        if (AnnotationUtility.containsAnnotation(ast)) {
            final DetailAST holder = AnnotationUtility.getAnnotationHolder(ast);
            final DetailAST annotation = getAnnotationAst(holder);
            final DetailAST prev = getPreviousSibling(annotation, holder, ast);
            final DetailAST next = getNextSibling(annotation, holder, ast);
            if (isPreviousSiblingOnSameLine(prev, annotation) || //
                    isNextSiblingOnSameLine(annotation, next)) {
                log(annotation.getLineNo(), //
                        annotation.getColumnNo(), //
                        "Annotations must exist on their own line");
            }
        }
    }

    private static boolean isPreviousSiblingOnSameLine(DetailAST prev, DetailAST annotation) {
        if (prev == null) {
            return false;
        } else if (prev.getLastChild() == null) {
            return prev.getLineNo() == annotation.getLineNo();
        }
        return prev.getLastChild().getLineNo() == annotation.getLineNo();
    }

    private static boolean isNextSiblingOnSameLine(DetailAST annotation, DetailAST next) {
        if (next == null) {
            return false;
        }
        return annotation.getLineNo() == next.getLineNo();
    }

    private static DetailAST getAnnotationAst(DetailAST aHolderAst) {
        if (aHolderAst.getType() == TokenTypes.ANNOTATIONS) {
            return aHolderAst;
        } else if (aHolderAst.getType() == TokenTypes.MODIFIERS) {
            return aHolderAst.findFirstToken(TokenTypes.ANNOTATION);
        }
        throw new AssertionError("aHolder must be one of TokenTypes.ANNOTATIONS or TokenTypes.MODIFIERS but was " + aHolderAst);
    }

    private static DetailAST getPreviousSibling(DetailAST annotation, DetailAST holder, DetailAST ast) {
        if (annotation.getPreviousSibling() != null) {
            return annotation.getPreviousSibling();
        } else if (holder.getPreviousSibling() != null) {
            return holder.getPreviousSibling();
        }
        return ast.getPreviousSibling();
    }

    private static DetailAST getNextSibling(DetailAST annotation, DetailAST holder, DetailAST ast) {
        if (annotation.getNextSibling() != null) {
            return annotation.getNextSibling();
        } else if (holder.getNextSibling() != null) {
            return holder.getNextSibling();
        }
        return ast.getNextSibling();
    }
} 
```

**检查.xml**

此 XML 文件的灵感来自“Writing Checks”一文的[“Integrate Your Check”部分](http://checkstyle.sourceforge.net/writingchecks.html)。Checkstyle 使用它来指定对一组 Java 文件执行哪些检查。注意`AnnotationSameLineCheck`是完全限定的（即，它的包是在名称中指定的）。`checks.xml`文件中提到`build.xml`。

```
<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
          "-//Puppy Crawl//DTD Check Configuration 1.3//EN"
          "http://www.puppycrawl.com/dtds/configuration_1_3.dtd">
<module name="Checker">
    <module name="TreeWalker">
        <module name="example.AnnotationSameLineCheck"/>
    </module>
</module> 
```

**构建.xml**

这个 Ant 构建文件的灵感来自[Checkstyle 的“Ant Task”文章](http://checkstyle.sourceforge.net/anttask.html)。使用 Ant 只是执行 Checkstyle 的一种方式。使用命令行是另一种选择。

```
<project default="example">
    <taskdef resource="checkstyletask.properties" classpath="target/classes:lib/checkstyle-5.5-all.jar" />
    <target name="example">
        <checkstyle config="checks.xml">
            <fileset dir="src/main/java" includes="**/AnnotatedClass.java" />
            <formatter type="plain" />
        </checkstyle>
    </target>
</project> 
```

**AnnotationClass.java**

可以使用下面的类来测试`AnnotationSameLineCheck`。文件中提到了`build.xml`。注意接口、类、枚举、成员变量、方法、参数和局部变量声明的测试。

```
package example;
    @Deprecated
class CorrectClassDefA {}

@Deprecated class IncorrectClassDefA {}

abstract
@Deprecated
class CorrectClassDefB {}

abstract @SuppressWarnings(value = "unused") class IncorrectClassDefB0 {}

abstract
    @Deprecated class IncorrectClassDefB1 {}

abstract@Deprecated
class IncorrectClassDefB2 {}

@Deprecated abstract class IncorrectClassDefB3 {}

@Deprecated
abstract class CorrectClassDefB4 {}

@SuppressWarnings(value = "unused")
interface CorrectInterfaceDefA {}

@Deprecated interface IncorrectInterfaceDefA {}

abstract
@Deprecated
interface CorrectInterfaceDefB {}

abstract @Deprecated interface IncorrectInterfaceDefB0 {}

abstract
@Deprecated interface IncorrectInterfaceDefB1 {}

abstract @SuppressWarnings(value = "unused")
interface IncorrectInterfaceDefB2 {}

@SuppressWarnings(value = "unused") abstract interface IncorrectInterfaceDefB3 {}

@SuppressWarnings(value = "unused")
abstract 
interface CorrectInterfaceDefB4 {}

@Deprecated
enum CorrectEnumA {
    @SuppressWarnings(value = "unused")
    CORRECT,
    @Deprecated INCORRECT }

@Deprecated enum 
IncorrectEnumA {
@Deprecated
    CORRECT,
    @SuppressWarnings(value = "unused") INCORRECT }

public class AnnotatedClass { @Deprecated // incorrect
    public AnnotatedClass() {}

    @Deprecated
    AnnotatedClass(int correct) {}

    public
    @SuppressWarnings(value = "unused")
    AnnotatedClass(boolean correct, boolean correct0) {}

    @SuppressWarnings(value = "unused")
    AnnotatedClass(int correct, int correct0, int correct1) {}

    public @SuppressWarnings(value = "unused")
    AnnotatedClass(@Deprecated int bad, int bad0, int bad1, int bad2) {}

    @SuppressWarnings(value = "unused") AnnotatedClass(@Deprecated int bad, int bad0, int bad1, int bad2, int bad3) {}

    @Deprecated private int incorrectB;

    transient @Deprecated 
    private int incorrectC;

    transient
    @Deprecated 
    private 
    int correctD;

    private
    @SuppressWarnings(value = "unused")
    Object correctA; @SuppressWarnings(value = "dog")
     public void incorrectA(final Object baz) {
    }

    public void correctB(@SuppressWarnings(value = "dog") final Object good) {
        @Deprecated
        int correctA;

        final @Deprecated int incorrectB;

        final
        @Deprecated
        Object
        correctC;
    }

    @SuppressWarnings(value = "dog") public 
    void incorrectC(final Object bad) {
    }

    public
    @SuppressWarnings(value = "dog") void incorrectD(final Object bad) {
    }
} 
```

# spring - 使用 spring-test-mvc 对 REST 控制器进行单元测试

> ID：10636569
> 
> 赞同：9
> 
> 时间：2012-05-17T13:22:00.303
> 
> 标签：spring, unit-testing, spring-mvc, spring-test

我已将我的 Spring 依赖项升级到 Spring 3.1.1.RELEASE，并且我正在尝试使用[spring-test-mvc](https://github.com/SpringSource/spring-test-mvc)对一个简单的控制器进行单元测试。我一直在关注[Spring REST Controller Test with spring-test-mvc framework](https://stackoverflow.com/questions/9155527/spring-rest-controller-test-with-spring-test-mvc-framework)中使用的技术，因为它似乎对那个人有用，但到目前为止我还没有成功。我认为我的测试上下文文件中缺少一些关键配置。

我没有错误。我知道它不起作用的原因是因为`Hello World`永远不会被打印（请参阅控制器）。我在这里想念什么？

**控制器：**

```
@Controller
@RequestMapping("/debug")
public class DebugOutputController {

    @RequestMapping(method = RequestMethod.POST)
    public void saveDebugOutput(@RequestBody DebugOutput debugOutput, HttpServletResponse response) {
        System.out.println("Hello World");
    }
} 
```

**测试类：**

```
@RunWith(SpringJUnit4ClassRunner.class) //this lets tests access Spring beans defined in the context config file
@ContextConfiguration(locations={"file:src/test/resources/itest/restAPITestContext.xml"}) //tells the test where to get configuration and beans to be used by the test.
@TestExecutionListeners({DependencyInjectionTestExecutionListener.class,  TransactionalTestExecutionListener.class}) //overrides the default stack of listeners
public class ITRestAPI{

@Autowired
private DebugOutputController debugOutputController;

private MockMvc mockMvc;

@Before
public void setUp() throws Exception {
    mockMvc = MockMvcBuilders.standaloneSetup(debugOutputController).build();
}

@After
public void tearDown() throws Exception {
}

@Test
public void shouldPerformPost() throws Exception {
    this.mockMvc.perform(post("/debug"));
}
} 
```

**休息APITestContext.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
    http://www.springframework.org/schema/mvc 
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <mvc:annotation-driven />
    <mvc:default-servlet-handler />
    <context:component-scan resource-pattern="*DebugOutputController*" base-package="com.company.project.servlet" />    

</beans> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-18T14:26:52.030

结果发现`HttpMessageNotReadable`发生了异常，我只是看不到它，因为我没有在任何地方记录或打印它。我通过使用该类在我的测试类中构建 HTTP 请求`DefaultRequestBuilder`并添加一个`andDo(print())`：

```
DefaultRequestBuilder requestBuilder = MockMvcRequestBuilders.post("/debug").contentType(MediaType.APPLICATION_JSON).body(new String("{\"T1\":109.1, \"T2\":99.3}").getBytes());
this.mockMvc.perform(requestBuilder).andDo(print()); 
```

所以在那之后，使用 的输出`andDo(print())`，我可以看到`HttpMessageNotReadable`异常被抛出，但不知道异常的细节或导致它的原因。要查看详细信息，我必须将其添加到控制器类中以将异常详细信息写入响应正文：

```
@ExceptionHandler(HttpMessageNotReadableException.class)
@ResponseBody
public String handleException1(HttpMessageNotReadableException ex)
{
    return ex.getMessage();
} 
```

这揭示了以下异常：

```
Could not read JSON: Unrecognized field "T1" (Class com.company.project.model.device.DebugOutput), not marked as ignorable 
```

我通过将`@JsonProperty`注释添加到模型类中的设置器来修复：

```
@JsonProperty("T1")
public void setT1(Float t1) {
    T1 = t1;
} 
```

# javascript - 在莲花脚本中执行 22 位数字的除法

> ID：10636570
> 
> 赞同：1
> 
> 时间：2012-05-17T13:22:00.437
> 
> 标签：javascript, lotus-notes, lotusscript, lotus-formula

我想对 22 位数字进行除法。在莲花脚本中。

谁能告诉我该怎么做？我没有得到正确的结果。

例如；

暗数字为双;

将 num1 调暗为 Double；

数量=123456789989898976765；

num1 = 数字 / 97；

但我在 num1 中没有得到正确的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:34:08.693

为了满足我心中的数学家，我必须告诉你，你永远不会得到“正确”的答案，除法产生一个无限小数的数字，但我想我得到了你想要的。你*要*的号码是：

```
1 272 750 412 266 999 760.463 917 525 ... 
```

但你*得到*的数字是：

```
1 272 750 412 266 999 800 
```

这是由于该语言使用的数字格式缺乏精确性。进行除法时不会发生精度损失，只要将常量分配给变量，它就会发生得比这快得多。您*要*存储的号码是：

```
123 456 789 989 898 976 765 
```

但您*实际*存储的数字是：

```
123 456 789 989 898 980 000 
```

这就是导致错误答案的原因。

由于我不了解 Lotus Script 环境，我将做两件事；首先，给你一些可以解决这个特定问题的代码，如下所示：

```
var num = [12345678998, 9898976765];
var num1 = num[0] / 97;
var num2 = Math.floor(num1);
num2 = num1 - num2;
num2 *= 97;
num2 = Math.round(num2)
num2 *= Math.pow(10, num[1].toString().length);
num2 = (num2 + num[1]) / 97;
alert(Math.floor(num1).toString() + num2.toString()); 
```

然后您可以进行概括以满足您的需求。此代码将除法拆分为数字存储格式 CAN 处理的两个较小的除法，并将第一个除法的其余部分与第二个除法相加，产生以下结果：

```
1 272 750 412 266 999 760.463 917 7 
```

这不准确，但可能足够接近，对吧？如何在不丢失精度的情况下将较大的数字拆分为碎片，剩下两个。（提示：使用字符串）

其次，我将向您[介绍 BigInt.js](http://www.leemon.com/crypto/BigInt.html)，这是一个用于在 JavaScript 中使用任意大整数进行数学运算的库。如果您可以将此库包含到您的代码中，那绝对是更经济的方式。

我希望其中之一有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:36:30.810

问题是您使用浮点数进行除法，这不会产生准确的结果。Lotusscript 不支持浮点数以外的大数，因此您可能应该找到另一种方法来进行计算。例如，如果您可以用 Java 编写代码，您将对大数字有更好的支持。或者，正如另一个示例所示，您显然也可以在 javascript 中处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T13:46:04.867

我用 java 编写了一个脚本库来解决这个问题，并从我的 Lotus 脚本代理中调用它：

下面是代码：

```
 //importing the required libraries
               import lotus.domino.*;
               import java.math.BigInteger;

              public class CalcProofNo
              {
              BigInteger BD_97 = new BigInteger("97");
              BigInteger BD_98 = new BigInteger("98");

              public  int calBBAN(String strBBAN) {
    //Gets the Basic Bank Account Number into BigInteger
    BigInteger BBAN = new BigInteger(strBBAN);

    //Calaculating Mod by dividing the Basic Bank Account Number by 97
    BBAN= BBAN.divideAndRemainder(BD_97)[1];

    //Subtracting 98 from the modulus
    BBAN = BD_98.subtract(BBAN);

    //Returning proof number in integer
    return BBAN.intValue();

              }    
         } 
```

**Lotus 脚本代理代码：**

```
 Option Public
     Use "CalcProofNo"
     Uselsx "*javacon"

Dim javaSession As JAVASESSION
Dim javaUtil As Variant
Dim javaUtilClass As Variant

      Set javaSession = New JAVASESSION

'Getting defined Class in ScriptLibrary 
Set javaUtilClass = javaSession.GetClass("CalcProofNo")

'Creating object for it 
Set javaUtil =javaUtilClass.CreateObject() 

' passing parameters to method, calling the method using object.
strProofNumber =   Cstr(javaUtil.calBBAN(strBBAN)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T13:53:37.480

见这里：http: [//jsfromhell.com/classes/bignumber](http://jsfromhell.com/classes/bignumber)

# sql-server-2008 - 使用局部变量 SQL Server 2008 将 CAST 作为浮点数

> ID：10636572
> 
> 赞同：0
> 
> 时间：2012-05-17T13:22:05.030
> 
> 标签：sql-server-2008

```
`declare @totalItems int,
@totalPeople int,
@averageThings float;

select @totalItems = count(*) from table1
select @totalpeople = count(*) from tblvisits
select @averageThings = cast(@totalItems/@totalPeople as float)

select @averageThings, @totaPeople, @totalItems 
```

这将返回一个整数而不是一个浮点数，我尝试了使用和不使用`cast as float`并得到了相同的结果，如何让它返回一个浮点数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:24:49.830

问题是您正在以整数进行除法，*然后*将结果转换为`float`. 也许：

```
declare @totalItems int,
@totalPeople int,
@averageThings float;

select @totalItems = count(*) from table1
select @totalpeople = count(*) from tblvisits
select @averageThings = @totalItems/cast(@totalPeople as float)

select @averageThings, @totaPeople, @totalItems 
```

在除法发生之前强制其中一个参数为 a `float`，这将迫使除法`float`改为执行。

* * *

而且，作为一个小问题：

> 这将返回一个整数而不是浮点数

不，它返回一个`float`. 但是总是碰巧有一个整数值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:25:45.217

不，它返回一个浮点数。浮点数的值可能是整数，但类型是浮点数。这也回答了您真正的问题：您必须使用浮点操作数执行除法，而不是将 int 除法的结果转换为浮点数：

```
declare @totalItems float,
   @totalPeople float,
   @averageThings float;

select @totalItems = count(*) from table1
select @totalpeople = count(*) from tblvisits
select @averagecomorbids = @totalItems/@totalPeople;

select @averageThings, @totaPeople, @totalItems; 
```

`tblvisits`如果为空，您的代码将与 divide_by_zero 中断...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:28:55.350

你需要铸造每个部分

```
 cast(@totalItems as float)/cast(@totalPeople as float) 
```

现在它正在用整数进行除法并在强制转换之前获得整数结果。

# validation - Symfony 2 中的默认验证器

> ID：10636573
> 
> 赞同：0
> 
> 时间：2012-05-17T13:22:07.347
> 
> 标签：validation, symfony

有没有办法在 Symfony 中采用默认的安全方法来进行表单和实体验证？也就是说，如果您不手动定义某些验证器，应用一组限制性默认值？（例如，如果您有一个文本字段，并且您没有指定最大长度，则自动应用最大长度 32。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:29:34.420

```
there is no defalut validation in symfony while you can do with annonation 
like 
 * @ORM\Column(name="height", type="decimal", nullable=true) 
```

# uitableview - 在黑莓的 5.0 OS 中创建表格视图？

> ID：10636578
> 
> 赞同：0
> 
> 时间：2012-05-17T13:22:15.550
> 
> 标签：uitableview, blackberry

我正在开发一个基于 UI 的应用程序，我需要在 2x2 表中以表格格式显示数据，这意味着 2 行和 2 列。

我已经看到使用 Blackberry OS 6.0 的表格视图类，但我的应用程序也将在 5.0 操作系统上运行。请指导我在黑莓中生成自定义表格视图。

提前谢谢...！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:02:38.247

使用此代码作为指南。

```
 GridFieldManager grid = new GridFieldManager(2,2,0); //First parameter for row,second for column

    grid.add(new LabelField("Column 1")//Give a heading to your grid field
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.RED);
         super.paint(graphics);
       }
     });
    grid.add(new LabelField("Column 2")
    {
       public void paint(Graphics graphics)
       {
         graphics.setColor(Color.RED);
         super.paint(graphics);
       }
     });

    grid.setColumnPadding(30);
    grid.setRowPadding(30);
    add(grid); 
```

您也可以参考 BB 文档中的示例。

# ruby - 为什么 str.scan 在运行文件时不起作用？

> ID：10636580
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:22:29.970
> 
> 标签：ruby

当我尝试运行我的文件时

`$ ruby file.rb`

我明白了

```
file.rb:5:in `<main>': undefined local variable or method `str' for main:Object (NameError) 
```

该文件似乎无法识别`str.scan`. 我的线是

```
@file_split = str.scan(/ \+\d{11} /) 
```

我错过了我应该需要的东西？

修正：我错过了变量名！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:26:13.650

`str`变量应该在`file.rb`. 例如像这样：

```
str = ' +45754646467 ' 
```

然后做你的事

```
@file_split = str.scan(/ \+\d{11} /) 
```

# jquery - jQuery：如何触发悬停？

> ID：10636581
> 
> 赞同：5
> 
> 时间：2012-05-17T13:22:32.153
> 
> 标签：jquery

如何触发第二个悬停功能？

```
$('#adm1n-toolbar').hover(
    function() {
        ...
    },
    function() {
        ...
    }
);

$('#adm1n-toolbar-content select').change(function(e) {
    ...
    $('#adm1n-toolbar').trigger('mouseout');
}); 
```

mouseout 或 mouseleave 不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T13:33:17.193

`mouseleave`如果您使用which 是`hover`幕后使用的，它就可以正常工作

**演示：**

```
$('#adm1n-toolbar').hover(
  function() {
    console.log('in');
  },
  function(e) {
    $(this).fadeOut('fast').fadeIn('fast');
  }
);

$('#adm1n-toolbar-content select').change(function(e) {
  $('#adm1n-toolbar').trigger('mouseleave');
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="adm1n-toolbar">toolbar</div>

<div id="adm1n-toolbar-content">
  <select multiple>
    <option>option 1</option>
    <option>option 2</option>
    <option>option 3</option>
    <option>option 4</option>
  </select>
</div>
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T13:26:25.567

您不能从外部定位`hover()`. 然而，`hover()`这只是一个快捷方式`mouseenter()`，`mouseleave()`您可以单独分配它们，让您根据需要触发它们。试试这个：

```
$('#adm1n-toolbar')
    .mouseenter(function() {
        // ...
    })
    .mouseleave(function() {
        // ...
    });

$('#adm1n-toolbar-content select').change(function(e) {
    $('#adm1n-toolbar').trigger('mouseleave');
}); 
```

# java - 如何在 java web 项目中配置自定义日志文件

> ID：10636584
> 
> 赞同：0
> 
> 时间：2012-05-17T13:22:42.160
> 
> 标签：java, log4j, jboss5.x

我正在使用 eclipse IDE 和 jboss 服务器（版本 5）开发一个 java web 应用程序。我正在尝试使用以下代码为我的应用程序实现自定义日志文件：

```
FileAppender fileAppender=new FileAppender(newPatternLayout(),Constant.LOGGER_PATH);
logger.addAppender(fileAppender);
BasicConfigurator.configure();
logger.setLevel(Level.ERROR);
logger.error(cause); 
```

当我尝试将我的应用程序部署到 jboss 服务器时，它会给出以下异常：

```
    18:35:16,346 错误 [STDERR] log4j:ERROR A "org.jboss.logging.util.OnlyOnceError
    andler”对象不可分配给“org.apache.log4j.spi.ErrorHandler”变量
    乐。
    18:35:16,346 错误 [STDERR] log4j:ERROR 类“org.apache.log4j.spi.ErrorHa
    dler" 由
    18:35:16,346 错误 [STDERR] log4j：错误 [WebappClassLoader
      委托人：假
      存储库：
        /WEB-INF/类/
    ----------> 父类加载器：
    java.net.FactoryURLClassLoader@893918
    ] 而对象类型
    18:35:16,346 错误 [STDERR] log4j:ERROR "org.jboss.logging.util.OnlyOnceErrorHa
    dler" 由 [org.jboss.system.server.NoAnnotationURLClassLoader@a32b] 加载。
    18:35:16,377 错误 [STDERR] log4j:ERROR 无法创建 Appender。报告
    错误如下。
    18:35:16,377 错误 [STDERR] java.lang.ClassCastException: org.jboss.logging.app
    nder.DailyRollingFileAppender 不能转换为 org.apache.log4j.Appender

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:24:37.097

看起来您的应用程序在其`lib`目录中拥有自己的 log4j.jar 包副本。这将与 JBoss 自己的副本发生冲突。

从`lib`目录中删除该 JAR 并重试，您的应用程序将使用 JBoss 副本。

# javascript - 自定义类 - 这与原型？

> ID：10636590
> 
> 赞同：1
> 
> 时间：2012-05-17T13:22:58.847
> 
> 标签：javascript, oop, prototype

> **可能重复：**
> [使用原型与直接在构造函数中定义方法的优势？](https://stackoverflow.com/questions/4508313/advantages-of-using-prototype-vs-defining-methods-straight-in-the-constructor)

在 JavaScript 中创建自定义类和公共方法时的最佳实践是什么，更重要的是……为什么？

使用“this”创建公共方法？

```
var myClass = function() {

    this.myVar = "this is my value";

    this.myFunc = function() {
        alert( this.myVar );
    };

    this.myFunc();
}; 
```

-或者- 使用“原型”创建公共方法？

```
var myClass = function() {

    this.myFunc();
};

myClass.prototype = {

    myVar: "this is my value",

    myFunc: function() {
        alert( this.myVar );
    }

}; 
```

非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:25:14.897

使用原型声明方法意味着该方法在任何时候都可用于该原型的实例，只要该实例是在声明方法之后创建的。

在构造函数中声明它`this.foo = function(){ ... }`意味着该方法仅在构造函数中声明它的点之后可用。

作为一个简单的例子，让我们看看命名函数和匿名函数。

下面，我们声明一个命名函数并调用它两次。请注意，即使第一次调用是在函数声明之前，该函数从第一次调用开始就可以正常执行：

```
foo();

function foo()
{
    alert("foo");
}

foo(); 
```

现在，我们将使用存储在变量中的匿名函数来代替命名函数：现在请注意，第一次调用会导致错误，因为`foo`此时未定义。

```
foo();

var foo = function()
{
    alert("foo");
}

foo(); 
```

原型以（概念上）类似的方式工作，当我们更改函数的原型时，我们会在创建该函数的实例之前影响它。所以以下工作正常：

```
function f ()
{
    this.bar();
}

f.prototype.bar = function()
{
    alert("bar");
};

var f1 = new f(); 
```

请注意，它`f.prototype.bar`是在我们调用它的行之后物理声明的。现在将其与`this. ...`方法进行比较。以下按预期工作

```
function g()
{
    this.h = function(){
        alert("h");
    };

    this.h();
}

var g1 = new g(); 
```

虽然这不是因为我们在`this.h`为它赋值之前试图调用它：

```
function g()
{
    this.h();

    this.h = function(){
        alert("h");
    };
}

var g2 = new g(); 
```

请注意，虽然影响函数原型仍然使用将匿名函数分配给原型属性的机制。这意味着即使使用原型方法，如果我们在向原型添加函数之前实例化原型的实例，我们也会得到错误。例如，以下工作正常：

```
function f ()
{
    this.bar();
}

f.prototype.bar = function()
{
    alert("bar");
};

var f1 = new f(); 
```

但是如果我们将`var f1 = new f();`上面的赋值移动到`f.prototype.bar`我们会得到一个错误：

```
function f ()
{
    this.bar();
}

var f1 = new f();

f.prototype.bar = function()
{
    alert("bar");
}; 
```

# filesystems - squashfs 文件系统索引到磁盘块的映射

> ID：10636596
> 
> 赞同：0
> 
> 时间：2012-05-17T13:23:07.520
> 
> 标签：filesystems, kernel, squashfs

谁能告诉squashfs如何将磁盘块号映射到文件系统块。基本上我说的是 squashfs 中的 read_blocklist()。

谢谢，卡皮尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T02:32:19.080

常规文件的 squashfs 元数据大致如下所示：

```
===== 标题
start_block：文件中第一个块的位置
file_size：文件的大小（以字节为单位）
...
===== 阻止列表
size0：第一个块的 32 位标头
尺寸1
尺寸2
...
=====

```

块头包含块的压缩大小。因此，我们可以通过将 start_block 和所有前面块的大小相加来计算任何给定块的位置。

使用我的纯红宝石 squashfs 解析器可能会有所帮助：[https ://github.com/vasi/squash.rb](https://github.com/vasi/squash.rb)

# node.js - nodejs在哪里使用require声明变量

> ID：10636599
> 
> 赞同：0
> 
> 时间：2012-05-17T13:23:10.593
> 
> 标签：node.js

我想知道这两个代码之间的最佳方式是什么：

```
module.exports = function(){

    require('fs').readFile..
       crequire('./sockets.js').clients..
       ...

}; 
```

第二：

```
var fs = require('fs');
var clients = require('./sockets.js').clients;

module.exports = function(){

    fs.readFile...
       clients...

} 
```

我搜索优化的最佳方式。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:03:53.897

从性能的角度来看没有区别，因为`require`在第一次调用后被缓存。但是我仍然认为在脚本开头声明导入时代码更具可读性。因此，第二个版本是首选，恕我直言。

# django - urllib2.urlopen 在 Django 中失败

> ID：10636608
> 
> 赞同：2
> 
> 时间：2012-05-17T13:23:47.020
> 
> 标签：django, urllib2

我`urllib2.urlopen(url)`用来获取 HTML 内容。网址是`http://127.0.0.1:8000/m.html/`。此方法成功获取 HTML 内容。

但是在 Django 中，如果我尝试获取 HTML 内容，它会在函数中停止：

```
urllib2.urlopen('http://127.0.0.1:8000/m.html/'). 
```

它只是停止。它不报告错误，服务器也停止。

我不知道为什么它在单个文件中工作，但在 Django 中有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:33:01.003

Django 开发服务器是单线程的。它不能同时为请求单独页面的视图和单独页面本身提供服务。

但是，我不知道你为什么要这样做——如果你想从你的应用程序中获取一些内容，只需调用视图代码本身。

# javascript - Access-Control-Allow-Origin 标头如何工作？

> ID：10636611
> 
> 赞同：1401
> 
> 时间：2012-05-17T13:23:54.107
> 
> 标签：javascript, cross-domain, cors

显然，我完全误解了它的语义。我想到了这样的事情：

1.  `http://siteA`客户端从**源**下载 javascript 代码 MyCode.js 。
2.  MyCode.js 的响应头包含**Access-Control-Allow-Origin:`http://siteB`**，我认为这意味着 MyCode.js 被允许对站点 B 进行跨域引用。
3.  客户端触发了 MyCode.js 的一些功能，这些功能反过来向 .js 发出请求`http://siteB`，这应该没问题，尽管是跨域请求。

好吧，我错了。它根本不像这样工作。所以，我已经阅读了[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)并尝试阅读[w3c 推荐中的跨域资源共享](http://www.w3.org/TR/cors/.)

有一件事是肯定的——我仍然不明白我应该如何使用这个标题。

我可以完全控制站点 A 和站点 B。如何启用从站点 A 下载的 javascript 代码以使用此标头访问站点 B 上的资源？

附言

我不想使用 JSONP。

* * *

## 回答 #1

> 赞同：1704
> 
> 时间：2012-05-17T13:33:26.440

`Access-Control-Allow-Origin`是一个[CORS（跨域资源共享）标头](http://www.html5rocks.com/en/tutorials/cors/)。

当站点 A 尝试从站点 B 获取内容时，站点 B 可以发送一个`Access-Control-Allow-Origin`响应标头来告诉浏览器该页面的内容可以从某些来源访问。（*源*是一个[域，加上一个方案和端口号](https://stackoverflow.com/a/19542686/710446)。）默认情况下，[任何其他源都无法访问](https://en.wikipedia.org/wiki/Same-origin_policy)站点 B 的页面；使用`Access-Control-Allow-Origin`标头为特定请求来源的跨域访问打开了一扇门。

对于站点 B 希望站点 A 可以访问的每个资源/页面，站点 B 应为其页面提供响应标头：

```
Access-Control-Allow-Origin: http://siteA.com 
```

现代浏览器不会直接阻止跨域请求。如果站点 A 从站点 B 请求页面，浏览器实际上将*在网络级别*获取请求的页面，并检查响应标头是否将站点 A 列为允许的请求者域。如果站点 B 没有表明允许站点 A 访问该页面，浏览器将触发`XMLHttpRequest`'`error`事件并拒绝对请求 JavaScript 代码的响应数据。

# 非简单请求

网络级别发生的事情可能*比*上面解释的要复杂一些。如果请求是[“非简单”请求](http://www.html5rocks.com/en/tutorials/cors/#toc-handling-a-not-so-simple-request)，浏览器首先发送一个无数据的“预检”OPTIONS 请求，以验证服务器是否会接受该请求。当任一（或两者）时，请求是非简单的：

*   使用 GET 或 POST 以外的 HTTP 动词（例如 PUT、DELETE）
*   使用非简单的请求头；唯一简单的请求标头是：
    *   `Accept`
    *   `Accept-Language`
    *   `Content-Language`
    *   `Content-Type`（仅当它的值为 、 或 时才`application/x-www-form-urlencoded`很`multipart/form-data`简单`text/plain`）

如果服务器使用与非简单动词和/或非简单标头匹配的适当响应标头（`Access-Control-Allow-Headers`对于非简单标头，对于非简单动词）响应 OPTIONS 预检，则浏览器发送实际请求。`Access-Control-Allow-Methods`

假设站点 A 想要发送一个 PUT 请求`/somePage`，其非简单`Content-Type`值为`application/json`，浏览器将首先发送一个预检请求：

```
OPTIONS /somePage HTTP/1.1
Origin: http://siteA.com
Access-Control-Request-Method: PUT
Access-Control-Request-Headers: Content-Type 
```

注意`Access-Control-Request-Method`和`Access-Control-Request-Headers`是由浏览器自动添加的；您不需要添加它们。此 OPTIONS 预检获取成功的响应标头：

```
Access-Control-Allow-Origin: http://siteA.com
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: Content-Type 
```

发送实际请求时（预检完成后），其行为与处理简单请求的方式相同。换句话说，预检成功的非简单请求被视为与简单请求相同（即，服务器仍必须`Access-Control-Allow-Origin`再次发送实际响应）。

浏览器发送实际请求：

```
PUT /somePage HTTP/1.1
Origin: http://siteA.com
Content-Type: application/json

{ "myRequestContent": "JSON is so great" } 
```

并且服务器发回一个`Access-Control-Allow-Origin`，就像它对一个简单的请求一样：

```
Access-Control-Allow-Origin: http://siteA.com 
```

有关非简单请求的更多信息，请参阅[了解 CORS 上的 XMLHttpRequest 。](https://stackoverflow.com/a/13400954/710446)

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2014-01-23T13:54:54.860

跨域资源共享 - `CORS`（AKA 跨域 AJAX 请求）是大多数 Web 开发人员可能遇到的问题，根据 Same-Origin-Policy，浏览器将客户端 JavaScript 限制在安全沙箱中，通常 JS 无法直接与远程服务器通信来自不同的域。过去开发人员创造了许多棘手的方法来实现跨域资源请求，最常用的方法有：

1.  使用 Flash/Silverlight 或服务器端作为“代理”与远程通信。
2.  带填充的 JSON ( [JSONP](http://en.wikipedia.org/wiki/JSONP) )。
3.  将远程服务器嵌入 iframe 并通过片段或 window.name 进行通信，请参阅[此处](http://www.ibm.com/developerworks/library/wa-crossdomaincomm/#N10120)。

这些棘手的方法或多或少都有一些问题，例如如果开发人员简单地“评估”它，JSONP 可能会导致安全漏洞，以及上面的#3，虽然它有效，但两个域应该在彼此之间建立严格的契约，它既不灵活也不优雅恕我直言：）

W3C 引入了跨域资源共享 (CORS) 作为标准解决方案，以提供安全、灵活和推荐的标准方法来解决此问题。

**机制**

从高层次上，我们可以简单地认为 CORS 是来自域 A 的客户端 AJAX 调用与域 B 上托管的页面之间的合约，典型的跨域请求/响应将是：

**DomainA AJAX 请求标头**

```
Host DomainB.com
User-Agent Mozilla/5.0 (Windows NT 6.1; WOW64; rv:2.0) Gecko/20100101 Firefox/4.0
Accept text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8,application/json
Accept-Language en-us;
Accept-Encoding gzip, deflate
Keep-Alive 115
Origin http://DomainA.com 
```

**DomainB 响应标头**

```
Cache-Control private
Content-Type application/json; charset=utf-8
Access-Control-Allow-Origin DomainA.com
Content-Length 87
Proxy-Connection Keep-Alive
Connection Keep-Alive 
```

我上面标记的蓝色部分是核心事实，“Origin”请求标头“指示跨域请求或预检请求的来源”，“Access-Control-Allow-Origin”响应标头指示此页面允许远程请求来自DomainA（如果值为 * 表示允许来自任何域的远程请求）。

正如我上面提到的，W3 建议浏览器在提交实际的跨域 HTTP 请求之前实现“**预检请求**`OPTIONS`”，简而言之就是一个 HTTP请求：

```
OPTIONS DomainB.com/foo.aspx HTTP/1.1 
```

如果 foo.aspx 支持 OPTIONS HTTP 动词，它可能会返回如下响应：

```
HTTP/1.1 200 OK
Date: Wed, 01 Mar 2011 15:38:19 GMT
Access-Control-Allow-Origin: http://DomainA.com
Access-Control-Allow-Methods: POST, GET, OPTIONS, HEAD
Access-Control-Allow-Headers: X-Requested-With
Access-Control-Max-Age: 1728000
Connection: Keep-Alive
Content-Type: application/json 
```

只有当响应包含“Access-Control-Allow-Origin”且值为“*”或包含提交CORS请求的域时，满足此强制条件，浏览器才会提交实际的跨域请求，并缓存结果在“**预检结果缓存**”中。

三年前我写过关于 CORS 的博客：[AJAX Cross-Origin HTTP request](http://wayneye.com/Blog/Ajax-Cross-Origin-HTTP-request)

* * *

## 回答 #3

> 赞同：85
> 
> 时间：2017-03-05T06:39:53.727

问题有点太老了，无法回答，但我发布这个以供将来参考这个问题。

根据[这篇](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS)Mozilla 开发者网络文章，

> 当资源从与第一个资源本身服务的域或端口不同的域或端口请求资源时，它会发出**跨域 HTTP 请求。**

[![在此处输入图像描述](../Images/2a56a58f65c5e30339731aaa0760cd5a.png)](https://i.stack.imgur.com/zn3sT.png)

从提供的**HTML 页面**`http://domain-a.com`发出`<img>`src 请求`http://domain-b.com/image.jpg`。
今天网络上的许多页面从不同的域加载资源，如**CSS 样式表**、**图像**和**脚本**（因此它应该很酷）。

# 同源策略

出于安全原因，浏览器限制**从脚本中发起的****跨域 HTTP**请求。 例如，并遵循**同源策略**。 因此，使用或只能向其自己的域发出HTTP**请求****的**Web 应用程序。 **`XMLHttpRequest``Fetch` **`XMLHttpRequest``Fetch`****

 ******# 跨域资源共享 (CORS)

为了改进 Web 应用程序，开发人员要求浏览器供应商允许跨域请求。

**跨域资源共享 (CORS)**机制为 Web 服务器**提供跨域访问控制**，从而实现安全的跨域数据传输。
现代浏览器在**API 容器中使用****CORS** - 例如或- 来降低跨域 HTTP 请求的风险。**`XMLHttpRequest``Fetch`**

 **## CORS 的工作原理（`Access-Control-Allow-Origin`标题）

[维基百科](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)：

> CORS 标准描述了新的 HTTP 标头，它为浏览器和服务器提供了一种仅在获得许可时才请求远程 URL 的方法。
> 
> 尽管服务器可以执行一些验证和授权，**但通常浏览器有责任**支持这些标头并遵守它们施加的限制。

# 例子

1.  浏览器发送`OPTIONS`带有`Origin HTTP`标头的请求。

    此标头的值是为父页面提供服务的域。当一个页面`http://www.example.com`尝试访问 中的用户数据时`service.example.com`，以下请求标头将被发送到`service.example.com`：

    来源：[http ://www.example.com](http://www.example.com)

2.  服务器`service.example.com`可能会响应：

    *   响应中的`Access-Control-Allow-Origin`(ACAO) 标头指示允许哪些源站点。
        例如：

        `Access-Control-Allow-Origin: http://www.example.com`

    *   如果服务器不允许跨域请求，则会出现错误页面

    *   `Access-Control-Allow-Origin`带有通配符的(ACAO) 标头，允许所有域：

        `Access-Control-Allow-Origin: *`

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2018-01-28T18:47:01.637

每当我开始考虑 CORS 时，我对哪个站点托管标头的直觉是不正确的，正如您在问题中所描述的那样。对我来说，考虑同源政策的目的是有帮助的。

同源策略的目的是保护您免受 siteA.com 上的恶意 JavaScript 访问您选择仅与 siteB.com 共享的私人信息。如果没有同源策略，siteA.com 的作者编写的 JavaScript 可能会使用您对 siteB.com 的身份验证 cookie 使您的浏览器向 siteB.com 发出请求。这样，siteA.com 就可以窃取您与 siteB.com 共享的秘密信息。

有时您需要跨域工作，这就是 CORS 的用武之地。CORS 放宽了 siteB.com 的同源策略，使用`Access-Control-Allow-Origin`标头列出受信任运行可与 siteB 交互的 JavaScript 的其他域 (siteA.com)。 com。

要了解哪个域应该为 CORS 标头提供服务，请考虑这一点。您访问了恶意网站，其中包含一些试图向 mybank.com 发出跨域请求的 JavaScript。应该由 mybank.com 而不是恶意网站来决定它是否设置 CORS 标头以放宽相同的来源策略，从而允许来自恶意网站的 JavaScript 与之交互。如果 malicous.com 可以设置自己的 CORS 标头，允许其自己的 JavaScript 访问 mybank.com，这将完全取消同源策略。

我认为我直觉不好的原因是我在开发网站时的观点。这是**我**的网站，包含**我**所有的JavaScript，因此它没有做任何恶意行为，应该由**我**来指定**我的**JavaScript 可以与哪些其他网站交互。事实上，我应该考虑哪些**其他**网站 JavaScript 正在尝试与我的网站交互，我应该使用 CORS 来允许它们吗？

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2019-11-18T19:40:42.480

根据我自己的经验，很难找到一个简单的解释，为什么 CORS 甚至是一个问题。

一旦你理解了它为什么存在，标题和讨论就会变得更加清晰。我会在几行中试一试。

* * *

这都是关于饼干的。Cookies 按其域存储在客户端上。

> 一个示例故事：在您的计算机上，有一个用于`yourbank.com`. 也许你的会话在那里。

**关键点：**当客户端向服务器发出请求时，它将为该请求发送存储在域下的 cookie。

> 您已在浏览器上登录到`yourbank.com`. 您请求查看您的所有帐户，并为`yourbank.com`. `yourbank.com`接收一堆 cookie 并发送回其响应（您的帐户）。

如果另一个客户端向服务器发出*跨源*请求，这些 cookie 会像以前一样被发送。鲁罗。

> 您浏览到`malicious.com`. 恶意向不同的银行发出大量请求，包括`yourbank.com`.

由于 cookie 按预期进行验证，服务器将授权响应。

> 这些 cookie 被收集起来并一起发送 - 现在，`malicious.com`有来自`yourbank`.

哎呀。

* * *

所以现在，一些问题和答案变得显而易见：

*   “我们为什么不直接阻止浏览器这样做呢？” 是的。CORS。
*   “我们如何绕过它？” 让服务器告诉请求 CORS 正常。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2016-02-27T01:37:43.353

*[1\. 客户端从http://siteA](http://siteA) - 来源下载 javascript 代码 MyCode.js 。*

进行下载的代码——你的 html 脚本标签或来自 javascript 的 xhr 或其他任何东西——来自[http://siteZ](http://siteZ)。而且，当浏览器请求 MyCode.js 时，它会发送一个 Origin: 标头说“Origin: [http://siteZ](http://siteZ) ”，因为它可以看到您正在向 siteA 和 siteZ 请求！= siteA。（您不能停止或干预。）

*2\. MyCode.js 的响应头包含 Access-Control-Allow-Origin: [http://siteB](http://siteB)，我认为这意味着 MyCode.js 被允许对站点 B 进行跨域引用。*

不。这意味着，仅允许 siteB 执行此请求。因此，您从 siteZ 对 MyCode.js 的请求反而会收到错误，而浏览器通常不会给您任何信息。但是如果你让你的服务器返回 ACAO: siteZ ，你会得到 MyCode.js 。或者如果它发送'*'，那会起作用，这会让每个人都进入。或者如果服务器总是从 Origin: 标头发送字符串......但是......为了安全，如果你害怕黑客，您的服务器应该只允许入围名单上的来源，允许发出这些请求。

然后，MyCode.js 来自 siteA。当它向siteB发出请求时，它们都是跨域的，浏览器发送Origin：siteA，并且siteB必须获取siteA，识别它在允许的请求者的短名单上，然后发回ACAO：siteA。只有这样，浏览器才会让您的脚本获得这些请求的结果。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2017-10-16T15:53:24.213

使用**React**和**Axios**，将代理链接加入 URL 并添加标题，如下所示

`https://cors-anywhere.herokuapp.com/`+`Your API URL`

只需添加代理链接即可，但它也可能再次引发 No Access 错误。因此最好添加标题，如下所示。

```
axios.get(`https://cors-anywhere.herokuapp.com/[YOUR_API_URL]`,{headers: {'Access-Control-Allow-Origin': '*'}})
      .then(response => console.log(response:data);
  } 
```

* * *

# 警告：不得用于生产

> 这只是一个快速修复，如果您在为无法获得响应而苦苦挣扎，您可以使用它。但这又**不是生产的最佳答案。**
> 
> 得到了几次反对票，这完全有道理，我早就应该添加警告。

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2017-01-18T15:30:06.290

如果您使用的是 PHP，请尝试在 php 文件的开头添加以下代码：

如果您使用的是本地主机，请尝试以下操作：

```
header("Access-Control-Allow-Origin: *"); 
```

如果您使用的是外部域，例如服务器，请尝试以下操作：

```
header("Access-Control-Allow-Origin: http://www.website.com"); 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2017-02-22T16:32:30.393

如果您只想测试浏览器阻止您的请求的跨域应用程序，那么您可以在不安全模式下打开浏览器并测试您的应用程序，而无需更改代码，也不会使您的代码不安全。在 MAC OS 中，您可以从终端行执行此操作：

```
open -a Google\ Chrome --args --disable-web-security --user-data-dir 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2017-02-06T08:19:11.937

我使用 express 4 和 node 7.4 和 angular，我遇到了同样的问题，我可以帮助解决这个问题：
a）服务器端：在 app.js 文件中，我为所有响应提供标题，例如：

```
app.use(function(req, res, next) {  
      res.header('Access-Control-Allow-Origin', req.headers.origin);
      res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
      next();
 }); 
```

**这在所有路由器之前必须有**。
我看到很多添加了这个标题：

```
res.header("Access-Control-Allow-Headers","*");
res.header('Access-Control-Allow-Credentials', true);
res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE'); 
```

但我不需要那个，
b）客户端：在发送ajax中你需要添加：“withCredentials：true”，比如：

```
$http({
     method: 'POST',
     url: 'url, 
     withCredentials: true,
     data : {}
   }).then(function(response){
        // code  
   }, function (response) {
         // code 
   }); 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2018-01-25T11:10:18.760

在 Python 中，我一直在使用该[`Flask-CORS`库](https://flask-cors.readthedocs.io/en/latest/)并取得了巨大的成功。它使处理 CORS 变得超级简单和轻松。我从下面的库文档中添加了一些代码。

安装：

```
$ pip install -U flask-cors 
```

允许对所有路由上的所有域进行 CORS 的简单示例：

```
from flask import Flask
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

@app.route("/")
def helloWorld():
  return "Hello, cross-origin-world!" 
```

有关更具体的示例，请参阅文档。我已经使用上面的简单示例来解决我正在构建的必须访问单独的烧瓶服务器的离子应用程序中的 CORS 问题。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-11-28T02:39:37.513

对于跨域共享，设置标题：`'Access-Control-Allow-Origin':'*';`

php：`header('Access-Control-Allow-Origin':'*');`

节点：`app.use('Access-Control-Allow-Origin':'*');`

这将允许共享不同域的内容。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-01-20T04:35:59.967

只需将以下代码粘贴到您的 web.config 文件中。

请注意，您必须在标签下粘贴以下`<system.webServer>`代码

```
 <httpProtocol>  
    <customHeaders>  
     <add name="Access-Control-Allow-Origin" value="*" />  
     <add name="Access-Control-Allow-Headers" value="Content-Type" />  
     <add name="Access-Control-Allow-Methods" value="GET, POST, PUT, DELETE, OPTIONS" />  
    </customHeaders>  
  </httpProtocol> 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-03-10T09:49:10.907

我无法在后端服务器中配置它，但浏览器中的这些扩展对我有用：

**对于 Firefox：** [Cors 无处不在](https://addons.mozilla.org/en-US/firefox/addon/cors-everywhere/)

**对于 Google Chrome：** [允许 CORS：Access-Control-Allow-Origin](https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf?hl=en-US)

注意：CORS 使用此配置为我工作：

[![允许 CORS 选项](../Images/2f1e2cb927f79b673f0307a963ffc77a.png)](https://i.stack.imgur.com/eDD7P.jpg)

[![CORS 无处不在的选项](../Images/871cb2a335b5d64e0d40d4e069d18c93.png)](https://i.stack.imgur.com/27QWb.jpg)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2020-05-15T09:33:09.143

# Nginx 和阿帕奇

作为[apsillers 回答](https://stackoverflow.com/a/10636765/860099)的补充，我想添加[wiki 图表](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing#How_CORS_works)，显示请求何时简单（以及 OPTIONS 飞行前请求是否发送）

[![在此处输入图像描述](../Images/65381a4b3e581285ffa07b4cd942a9d3.png)](https://i.stack.imgur.com/BTFel.png)

对于简单的请求（例如[热链接图像](https://en.wikipedia.org/wiki/Inline_linking)），您不需要更改服务器配置文件，但您可以在应用程序中添加标头（托管在服务器上，例如在 php 中），如 Melvin Guerrero 在他的[回答](https://stackoverflow.com/a/41723271/860099)中提到的- 但[请记住](https://stackoverflow.com/a/46917668/860099)：如果您添加完整您的服务器（配置）中的 cors 标头，同时您允许在应用程序（例如 php）上使用简单的 cors，这根本不起作用。

这是两个流行服务器的配置

*   在 Nginx上开启**CORS**（`nginx.conf`文件）

    ```
    location ~ ^/index\.php(/|$) {
       ...
        add_header 'Access-Control-Allow-Origin' "$http_origin" always; # if you change "$http_origin" to "*" you shoud get same result - allow all domain to CORS (but better change it to your particular domain)
        add_header 'Access-Control-Allow-Credentials' 'true' always;
        if ($request_method = OPTIONS) {
            add_header 'Access-Control-Allow-Origin' "$http_origin"; # DO NOT remove THIS LINES (doubled with outside 'if' above)
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Max-Age' 1728000; # cache preflight value for 20 days
            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';  # arbitrary methods
            add_header 'Access-Control-Allow-Headers' 'My-First-Header,My-Second-Header,Authorization,Content-Type,Accept,Origin'; # arbitrary headers
            add_header 'Content-Length' 0;
            add_header 'Content-Type' 'text/plain charset=UTF-8';
            return 204;
        }
    }
    ```

*   在 Appache上开启**CORS**（`.htaccess`文件）

    ```
    # ------------------------------------------------------------------------------
    # | Cross-domain Ajax requests                                                 |
    # ------------------------------------------------------------------------------

    # Enable cross-origin Ajax requests.
    # http://code.google.com/p/html5security/wiki/CrossOriginRequestSecurity
    # http://enable-cors.org/

    # change * (allow any domain) below to your domain
    Header set Access-Control-Allow-Origin "*"
    Header always set Access-Control-Allow-Methods "POST, GET, OPTIONS, DELETE, PUT"
    Header always set Access-Control-Allow-Headers "My-First-Header,My-Second-Header,Authorization, content-type, csrf-token"
    Header always set Access-Control-Allow-Credentials "true"
    ```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-01-31T11:49:26.977

> Access-Control-Allow-Origin 响应标头指示响应是否可以与来自给定源的请求代码共享。

```
Header type Response       header
Forbidden header name      no 
```

> 告诉浏览器允许来自任何来源的代码访问资源的响应将包括以下内容：

```
Access-Control-Allow-Origin: * 
```

欲了解更多信息，请访问[这里](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin)....

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-06-18T11:30:32.590

**仅用于测试的临时解决方案：**

谁不能控制后端`Options 405 Method Not Allowed`。
Chrome 浏览器的解决方法。
在命令行中执行：
`"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-web-security --user-data-dir="path_to_profile"`
示例：
`"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --disable-web-security --user-data-dir="C:\Users\vital\AppData\Local\Google\Chrome\User Data\Profile 2"`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-10-25T17:01:47.100

***对于带有 Angular 的 .NET Core 3.1 API***

**Startup.cs** : 添加 CORS

```
 //SERVICES
    public void ConfigureServices(IServiceCollection services){

        //CORS (Cross Origin Resource Sharing)
        //=====================================
        services.AddCors();
    }

    //MIDDLEWARES
    public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
    {
        app.UseRouting();

        //ORDER: CORS -> Authentication -> Authorization)
        //CORS (Cross Origin Resource Sharing)
        //=====================================  
        app.UseCors(x=>x.AllowAnyHeader().AllowAnyMethod().WithOrigins("http://localhost:4200"));

        app.UseHttpsRedirection();
    }
} 
```

**控制器**：为授权控制器启用 CORS

```
 //Authorize all methods inside this controller
 [Authorize]
 [EnableCors()]
 public class UsersController : ControllerBase
 {
    //ActionMethods
 } 
```********

# xml - XProc: multiple XSLT transformation with intermediate files

> ID：10636613
> 
> 赞同：2
> 
> 时间：2012-05-17T13:24:15.790
> 
> 标签：xml, xproc

I need to do several XSLT transformations with intermediate XML files. (I need the files, the real case is a bit more tricky as a later step loads intermediate files)

```
first.xml ------------>   intermediate.xml ------------> final.xml
          first.xsl                         final.xsl 
```

I'd like to create an XProc pipleline. I have tried to write the following code, but this gives me an error:

```
SCHWERWIEGEND: runxslt.xpl:26:44:err:XD0011:Could not read: intermediate.xml 
17.05.2012 15:15:35 com.xmlcalabash.drivers.Main error
SCHWERWIEGEND: It is a dynamic error if the resource referenced by a p:document element does not exist, cannot be accessed, or is not a well-formed XML document.
17.05.2012 15:15:35 com.xmlcalabash.drivers.Main error
SCHWERWIEGEND: Underlying exception: net.sf.saxon.s9api.SaxonApiException: I/O error reported by XML parser processing file:/<somepath>/intermediate.xml:
/<somepath>/intermediate.xml (No such file or directory) 
```

(where SCHWERWIEGEND means something like FATAL) So obviously the file `intermediate.xml` has not been written.

This is the `xpl`-document that I have used:

```
<?xml version="1.0" encoding="UTF-8"?>
<p:declare-step xmlns:p="http://www.w3.org/ns/xproc"
  xmlns:c="http://www.w3.org/ns/xproc-step" version="1.0">

  <p:input port="source">
    <p:document href="first.xml"/>
  </p:input>

  <p:output port="result" sequence="true">
    <p:empty/>
  </p:output>

  <p:xslt name="first-to-intermediate">
    <p:input port="stylesheet">
      <p:document href="first.xsl"/>
    </p:input>
    <p:input port="parameters">
      <p:empty/>
    </p:input>
  </p:xslt>

  <p:store href="intermediate.xml" />

  <p:xslt>
    <p:input port="source">
      <p:document href="intermediate.xml"/>
    </p:input>
    <p:input port="stylesheet">
      <p:document href="final.xsl"/>
    </p:input>
    <p:input port="parameters">
      <p:empty/>
    </p:input>
  </p:xslt>

  <p:store href="final.xml"/>

</p:declare-step> 
```

Just for the sake of completeness: these are the transformation files:

source.xml:

```
<root>
  <element name="A" />
</root> 
```

first.xsl:

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">
  <xsl:output indent="yes"/>

  <xsl:template match="root">
    <root>
      <xsl:apply-templates/>
    </root>
  </xsl:template>
  <xsl:template match="element">
    <intermediate name="A" />
  </xsl:template>

</xsl:stylesheet> 
```

final.xsl:

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">
  <xsl:output indent="yes"/>

  <xsl:template match="root">
    <root>
      <xsl:apply-templates/>
    </root>
  </xsl:template>
  <xsl:template match="intermediate">
    <final name="A" />
  </xsl:template>

</xsl:stylesheet> 
```

Here is a note on the real application (the above is a simplification, of course).

1.  First step: convert the source into something more suitable for my processing. Output: `companies.xml`
2.  Take the output from step 1 and create an index file (`index.xml`) from that. The index file must be editable manually.
3.  The third step is to merge the files created by step 1 and 2 and create a final xml (`final.xml`)

The index file must be written to disk and I must be able to run the last step by itself (that's a different problem - I'd write a different pipeline for that)

The output of `companies.xml` (step 1) is optional, it could be saved in memory (but it might get large).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T18:13:14.410

I'm not really sure why XMLCalabash doesn't work here. I thought the logic should in principle work, but apparently XMLCalabash is holding off on writing the file to disk till later, perhaps even till the end. Not sure why.

But there is an elegant solution, because you don't need to store intermediate results before continuing processing. In fact, it is best to not use hard-coded loads and stores at all. Instead, use something like the following:

```
<?xml version="1.0" encoding="UTF-8"?> 
<p:declare-step xmlns:p="http://www.w3.org/ns/xproc" 
  xmlns:c="http://www.w3.org/ns/xproc-step" version="1.0"> 

  <p:input port="source" sequence="true"/> 
  <p:input port="parameters" kind="parameter"/>
  <p:output port="result" sequence="true"/> 

  <p:xslt name="first-to-intermediate"> 
    <p:input port="stylesheet"> 
      <p:document href="first.xsl"/> 
    </p:input> 
  </p:xslt> 

  <p:xslt> 
    <p:input port="stylesheet"> 
      <p:document href="final.xsl"/> 
    </p:input> 
  </p:xslt> 

</p:declare-step> 
```

It requires a slightly different call to XMLCalabash. Call it like this:

```
java -jar Calabash.jar -i source=first.xml -o result=final.xml runxslt.xpl 
```

With -i you tie an input source to an input file, but from outside the script so no hard-coding required. Similarly with -o you redirect output to a target file.

I also added a 'parameters' input to your code, which get automatically connected to those of p:xslt. That way you don't need to specify those with a p:empty. It also allows passing parameter values from the command-line into those xslt's.

And because I removed the p:store, the 'source' input of the second p:xslt is not necessary either. The results of the first p:xslt goes directly into the (primary) source input of the following step by default.

-- edit --

To elaborate on my own comments that you can do a p:store *and* reuse the output of the first p:xslt twice without loading the intermediate doc from disk. You can do it like this:

```
<?xml version="1.0" encoding="UTF-8"?> 
<p:declare-step xmlns:p="http://www.w3.org/ns/xproc" 
  xmlns:c="http://www.w3.org/ns/xproc-step" version="1.0"> 

  <p:input port="source" sequence="false"/> 
  <p:input port="parameters" kind="parameter"/>
  <p:output port="result" sequence="false"/> 

  <p:xslt name="first-to-intermediate"> 
    <p:input port="stylesheet"> 
      <p:document href="first.xsl"/> 
    </p:input> 
  </p:xslt> 

  <p:store href="intermediate.xml"/>

  <p:xslt> 
    <p:input port="source"> 
      <p:pipe step="first-to-intermediate" port="result"/> 
    </p:input> 
    <p:input port="stylesheet"> 
      <p:document href="final.xsl"/> 
    </p:input> 
  </p:xslt> 

</p:declare-step> 
```

Note that I changed sequence=true to false on both input and output of the declare-step. Storing sequences of intermediate results requires extra care. This should prevent mistakes.

HTH!

# google-closure-compiler - 谷歌关闭编译器报告：JSC_TRAILING_COMMA

> ID：10636615
> 
> 赞同：1
> 
> 时间：2012-05-17T13:24:17.583
> 
> 标签：google-closure-compiler, google-closure

我使用 google Closure Compiler 压缩我的 js，无论如何我收到以下错误消息：

JSC_TRAILING_COMMA：解析错误。Internet Explorer 对尾随逗号有非标准的解释。数组将具有错误的长度，并且对象根本不会解析。在 post-login.js 中的第 8698 行字符 5 ]；

错误在此代码的第一行，但我无法弄清楚它有什么问题......

```
var plot = $.jqplot('usst_points_last_10_days', [data], {
    title: '<h3 class="startGrafHeadline">' + global_language['discriptive']['usst']['visits_in_detail'] + '</h3>',
    seriesColors: ["#00FF00"], 
    series: [{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
        tickOptions: {
            angle: -30,
            fontSize: '10pt'
        }
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:59:02.053

尝试查看编译器抱怨的行之前的行。这可能是最后一行是其他文件。

如果您检查命令行或构建脚本，那将引导您找到答案。您似乎正在编译多个文件或在编译之前预连接许多文件。闭包编译器告诉你的是看第 8698 行。

如果您对为什么认为此代码中包含错误有一些合乎逻辑的解释，请告诉我们您的推理。

如果您发布更多信息，我可能会改进此答案。

有一个方便的工具可以通过 Web UI 使用闭包编译器，它可以帮助你说服自己你没有找到有问题的行：

[http://closure-compiler.appspot.com](http://closure-compiler.appspot.com)

# c# - 在 C# 中生成巨大的图像

> ID：10636620
> 
> 赞同：7
> 
> 时间：2012-05-17T13:24:34.150
> 
> 标签：c#, image-processing

我需要使用 PixelFormat.Format24bppRgb 编码创建一个巨大的图像（大约 24000 x 22000）。我知道几乎不可能打开它...

我想要做的是：

```
Bitmap final = new Bitmap(width, height, PixelFormat.Format24bppRgb); 
```

正如预期的那样，由于我无法以这种方式轻松处理内存中的 11GB 文件，因此引发了异常。

但我有一个想法：我可以在生成文件时编写文件吗？所以，我不会在 RAM 上工作，而是在 HD 上工作。

只是为了更好地解释一下：我有大约 13K 个图块，我计划将它们拼接到这个愚蠢的巨大文件中。因为我可以按给定的顺序迭代它们，所以我可以使用不安全的代码将它直接写到内存中。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:29:44.217

ImageMagick 的[大图像支持](http://www.imagemagick.org/script/architecture.php#tera-pixel)（万亿像素）可以帮助您在拥有组成图像的图块后将图像放在一起。您可以使用命令行并使用[此](http://sourceforge.net/projects/imagemagickapp/)包装器向其发出命令，也可以将此[ImageMagick.NET](http://imagemagick.codeplex.com/)用作 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:43:03.490

您可以将其以非压缩格式（如 BMP）编写。BMP 将原始颜色字节保存在行中。因此，您将加载第一行图块，读取它们单独的像素行并将其作为复合单行写入输出图像。这样，您可以只打开几个图块并立即写下输出图像。

但我不知道如何将其写为压缩图像，如 JPG 或 PNG。但我确信存在一些专门的软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:46:18.557

根据您在完成后打算如何处理此图像，我建议将其分成 4 份并以这种方式处理。我使用了 10,000 x 10,000 像素而没有抛出 OOM 异常。

# c# - 实体框架代码优先：不加载引用的对象

> ID：10636628
> 
> 赞同：2
> 
> 时间：2012-05-17T13:25:05.960
> 
> 标签：c#, entity-framework, code-first

我有一个简单的类的问题。我的类的一个属性是对另一个类的引用，但是当我阅读时，它始终为空。

```
public class Product
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    public String Description { get; set; }

    public virtual Trademark Trademark { get; set; }
}

public class Trademark
{
    public int TrademarkId { get; set; }

    public String Description { get; set; }
} 
```

这些是我的课，很简单。然后当我得到第一个元素时：

```
Product p = context.Products.First(); 
```

并且`p`包含正确的产品，但商标为空。

即使我想使用 linq 进行查询，例如：

```
var prods = context.Products.Where(p => p.Trademark.TrademarkId == 1).ToList(); 
```

数据库生成好了。

使用 EF 4.3.1，带有 SqlServer 精简版 4.0

感谢您的任何建议。

添加：这是我的上下文类：

```
public class HPContext : DbContext
{
    public HPContext()
        : base()
    {
        this.Configuration.LazyLoadingEnabled = false; //Just for test

    }

    public DbSet<Product> Products { get; set; }
    public DbSet<Trademark> Trademarks { get; set; }  

} 
```

添加：数据库架构：

```
Table: 
  Products

Fields: 
  Id int primaryKey
  Description nvarchar(4000)
  Trademark_TrademarkId int

Table:
  Trademarks

Fields:
  TrademarkId int PrimaryKey
  Description nvarchar(4000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:28:05.320

`Include`如果未启用延迟加载，则应使用包含导航属性；

```
Product p = context.Products.Include("TradeMark").First(); 
```

# java - 在 cassandra 中存储小文件

> ID：10636631
> 
> 赞同：1
> 
> 时间：2012-05-17T13:25:15.883
> 
> 标签：java, nosql, cassandra, thrift, hector

cassandra-cli 中是否有 API（Thrift 或 Hector）或某些命令的示例来解释如何在 Cassandra 中存储小（几百 KB）文件。

我试过谷歌搜索，但找不到任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:40:15.440

将该大小的值放在单个列中是合理的；单个列值的大小最大为 2 GiB。保持列较小的主要原因是整个值在使用时会被读入内存，因此通常最好将它们保持在几 MB 以下。

# android - 在 EditText 上禁用键盘

> ID：10636635
> 
> 赞同：76
> 
> 时间：2012-05-17T13:25:18.673
> 
> 标签：android, keyboard, android-edittext, android-4.0-ice-cream-sandwich

我在做一个计算器。所以我`Buttons`用数字和函数自己做了。必须计算的表达式在 中`EditText`，因为我希望用户也可以在表达式中间添加数字或函数，所以`EditText`我有`cursor`. 但我想禁用`Keyboard`当用户点击`EditText`. 我发现这个例子是可以的`Android 2.3`，但是`ICS`禁用`Keyboard`了光标。

```
public class NoImeEditText extends EditText {

   public NoImeEditText(Context context, AttributeSet attrs) { 
      super(context, attrs);     
   }   

   @Override      
   public boolean onCheckIsTextEditor() {   
       return false;     
   }         
} 
```

然后我`NoImeEditText`在我的`XML`文件中使用它

```
<com.my.package.NoImeEditText
      android:id="@+id/etMy"
 ....  
/> 
```

我怎样才能使这个 EditText 与 ICS 兼容？？？谢谢。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-06-19T19:51:49.930

下面的代码适用于 API >= 11 和 API < 11。光标仍然可用。

```
/**
 * Disable soft keyboard from appearing, use in conjunction with android:windowSoftInputMode="stateAlwaysHidden|adjustNothing"
 * @param editText
 */
public static void disableSoftInputFromAppearing(EditText editText) {
    if (Build.VERSION.SDK_INT >= 11) {
        editText.setRawInputType(InputType.TYPE_CLASS_TEXT);
        editText.setTextIsSelectable(true);
    } else {
        editText.setRawInputType(InputType.TYPE_NULL);
        editText.setFocusable(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-17T13:28:11.253

[这](https://groups.google.com/group/android-developers/browse_thread/thread/180530f680374493?pli=1)是一个可以为您提供所需内容的网站

作为总结，它提供了`InputMethodManager`与`View`Android 开发者之间的链接。它将引用`getWindowToken`内部`View`和`hideSoftInputFromWindow()`for`InputMethodManager`

链接中给出了更好的答案，希望这会有所帮助。

这是使用 onTouch 事件的示例：

```
editText_input_field.setOnTouchListener(otl);

private OnTouchListener otl = new OnTouchListener() {
  public boolean onTouch (View v, MotionEvent event) {
        return true; // the listener has consumed the event
  }
}; 
```

这是来自同一网站的另一个示例。这声称有效，但似乎是个坏主意，因为您的 EditBox 为 NULL 它将不再是编辑器：

```
MyEditor.setOnTouchListener(new OnTouchListener(){

  @Override
  public boolean onTouch(View v, MotionEvent event) {
    int inType = MyEditor.getInputType(); // backup the input type
    MyEditor.setInputType(InputType.TYPE_NULL); // disable soft input
    MyEditor.onTouchEvent(event); // call native handler
    MyEditor.setInputType(inType); // restore input type
    return true; // consume touch even
  }
}); 
```

希望这会为您指明正确的方向

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2014-10-30T08:38:42.740

您还可以直接在 API 21+ 上或通过 API 14+ 上的反射使用[setShowSoftInputOnFocus(boolean) ：](http://developer.android.com/reference/android/widget/TextView.html#setShowSoftInputOnFocus(boolean))

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
    editText.setShowSoftInputOnFocus(false);
} else {
    try {
        final Method method = EditText.class.getMethod(
                "setShowSoftInputOnFocus"
                , new Class[]{boolean.class});
        method.setAccessible(true);
        method.invoke(editText, false);
    } catch (Exception e) {
        // ignore
    }
} 
```

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-06-27T08:09:01.223

将以下属性添加到布局文件中的 Edittext 控制器

```
<Edittext
   android:focusableInTouchMode="true"
   android:cursorVisible="false"
   android:focusable="false"  /> 
```

我一直在使用这个解决方案，它对我来说很好。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2019-07-17T17:05:14.040

```
editText.setShowSoftInputOnFocus(false); 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2012-05-17T14:40:14.670

尝试：`android:editable="false"`或`android:inputType="none"`

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2017-07-21T05:14:35.273

## 禁用键盘（API 11 到当前）

这是迄今为止我找到的禁用键盘的最佳答案（我见过很多）。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) { // API 21
    editText.setShowSoftInputOnFocus(false);
} else { // API 11-20
    editText.setTextIsSelectable(true);
} 
```

无需使用反射或将其设置`InputType`为 null。

## 重新启用键盘

如果需要，这是您重新启用键盘的方法。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) { // API 21
    editText.setShowSoftInputOnFocus(true);
} else { // API 11-20
    editText.setTextIsSelectable(false);
    editText.setFocusable(true);
    editText.setFocusableInTouchMode(true);
    editText.setClickable(true);
    editText.setLongClickable(true);
    editText.setMovementMethod(ArrowKeyMovementMethod.getInstance());
    editText.setText(editText.getText(), TextView.BufferType.SPANNABLE);
} 
```

请参阅此问答，了解为何需要撤消复杂的 pre API 21 版本`setTextIsSelectable(true)`：

*   [如何在使用 setTextIsSelectable 禁用键盘后启用触摸键盘](https://stackoverflow.com/questions/45228531/how-to-enable-keyboard-on-touch-after-disabling-it-with-settextisselectable)

# 这个答案需要更彻底的测试。

我已经`setShowSoftInputOnFocus`在更高的 API 设备上进行了测试，但是在下面@androiddeveloper 的评论之后，我发现这需要进行更彻底的测试。

这里有一些剪切和粘贴代码来帮助测试这个答案。如果您可以确认它是否适用于 API 11 到 20，请发表评论。我没有任何 API 11-20 设备，我的模拟器有问题。

*activity_main.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/activity_main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    android:orientation="vertical"
    android:background="@android:color/white">

    <EditText
        android:id="@+id/editText"
        android:textColor="@android:color/black"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"/>

    <Button
        android:text="enable keyboard"
        android:onClick="enableButtonClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

    <Button
        android:text="disable keyboard"
        android:onClick="disableButtonClick"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

*MainActivity.java*

```
public class MainActivity extends AppCompatActivity {

    EditText editText;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        editText = (EditText) findViewById(R.id.editText);
    }

    // when keyboard is hidden it should appear when editText is clicked
    public void enableButtonClick(View view) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) { // API 21
            editText.setShowSoftInputOnFocus(true);
        } else { // API 11-20
            editText.setTextIsSelectable(false);
            editText.setFocusable(true);
            editText.setFocusableInTouchMode(true);
            editText.setClickable(true);
            editText.setLongClickable(true);
            editText.setMovementMethod(ArrowKeyMovementMethod.getInstance());
            editText.setText(editText.getText(), TextView.BufferType.SPANNABLE);
        }
    }

    // when keyboard is hidden it shouldn't respond when editText is clicked
    public void disableButtonClick(View view) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) { // API 21
            editText.setShowSoftInputOnFocus(false);
        } else { // API 11-20
            editText.setTextIsSelectable(true);
        }
    }
} 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2017-07-24T06:52:05.633

在 StackOverflow 上从多个地方收集解决方案，我认为下一个总结一下：

如果您不需要在活动的任何位置显示键盘，您可以简单地使用用于对话框的下一个标志（从[**这里**](https://stackoverflow.com/a/10439581/878126)获取）：

```
 getWindow().setFlags(WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM, WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM); 
```

如果您不希望它仅用于特定的 EditText，您可以使用它（从[这里](https://stackoverflow.com/a/26648367/878126)获取）：

```
public static boolean disableKeyboardForEditText(@NonNull EditText editText) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        editText.setShowSoftInputOnFocus(false);
        return true;
    }
    if (Build.VERSION.SDK_INT > Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1)
        try {
            final Method method = EditText.class.getMethod("setShowSoftInputOnFocus", new Class[]{boolean.class});
            method.setAccessible(true);
            method.invoke(editText, false);
            return true;
        } catch (Exception ignored) {
        }
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2)
        try {
            Method method = TextView.class.getMethod("setSoftInputShownOnFocus", boolean.class);
            method.setAccessible(true);
            method.invoke(editText, false);
            return true;
        } catch (Exception ignored) {
        }
    return false;
} 
```

或者这个（取自[**这里**](https://stackoverflow.com/a/45229457/878126)）：

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP)
           editText.setShowSoftInputOnFocus(false);
       else
           editText.setTextIsSelectable(true); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2013-06-08T14:00:57.737

添加到 Alex Kucherenko 解决方案：调用后光标消失的问题`setInputType(0)`是由于 ICS（和 JB）上的框架错误。

该错误记录在此处：[https](https://code.google.com/p/android/issues/detail?id=27609) ://code.google.com/p/android/issues/detail?id=27609 。

要解决此问题，请在通话`setRawInputType(InputType.TYPE_CLASS_TEXT)`后`setInputType`立即致电。

要阻止键盘出现，只需覆盖`OnTouchListener`EditText 并返回 true（吞下触摸事件）：

```
ed.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                return true;
            }
        }); 
```

光标出现在 GB 设备上而不是 ICS+ 上的原因让我把头发扯了几个小时，所以我希望这可以节省一些人的时间。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-05-19T16:21:33.313

我发现这个解决方案对我有用。当在正确位置单击 EditText 时，它还会放置光标。

```
EditText editText = (EditText)findViewById(R.id.edit_mine);
// set OnTouchListener to consume the touch event
editText.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            v.onTouchEvent(event);   // handle the event first
            InputMethodManager imm = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
            if (imm != null) {
                imm.hideSoftInputFromWindow(v.getWindowToken(), 0);  // hide the soft keyboard 
            }                
            return true;
        }
    }); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2013-03-12T12:52:10.653

```
// only if you completely want to disable keyboard for 
// that particular edit text
your_edit_text = (EditText) findViewById(R.id.editText_1);
your_edit_text.setInputType(InputType.TYPE_NULL); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-05-17T13:35:17.270

只需设置：

```
 NoImeEditText.setInputType(0); 
```

或在构造函数中：

```
 public NoImeEditText(Context context, AttributeSet attrs) { 
          super(context, attrs);   
          setInputType(0);
       } 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-04-24T15:37:34.167

这对我有用。首先将其添加`android:windowSoftInputMode="stateHidden"`到您的 android 清单文件中，在您的活动下。如下所示：

```
<activity ... android:windowSoftInputMode="stateHidden"> 
```

然后在您的活动的 onCreate 方法上，添加以下代码：

```
EditText editText = (EditText)findViewById(R.id.edit_text);
edit_text.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.onTouchEvent(event);
        InputMethodManager inputMethod = (InputMethodManager)v.getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
        if (inputMethod!= null) {
            inputMethod.hideSoftInputFromWindow(v.getWindowToken(), 0);
        }                
        return true;
    }
}); 
```

然后，如果您希望指针可见，请将其添加到您的 xml `android:textIsSelectable="true"`中。

这将使指针可见。这样，当您的活动开始时键盘不会弹出，并且当您单击编辑文本时也会隐藏。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-07-03T11:07:48.097

只需将此行放在清单 android:windowSoftInputMode="stateHidden" 中的活动标记内

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2020-04-08T13:15:22.400

我不知道这个答案是否更好，但我找到了一个可能更快的解决方案。在 XML 上，只需在 EditText 上添加此属性：

```
android:focusable="true"
android:focusableInTouchMode="false" 
```

然后用 onClickListener 做你需要的事情。

# jenkins - 在 Jenkins 中使用高级安装程序

> ID：10636640
> 
> 赞同：4
> 
> 时间：2012-05-17T13:25:32.137
> 
> 标签：jenkins, advanced-installer

好的，我有一个新问题。我正在尝试通过 Windows Batch 命令使用高级安装程序

```
 "C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /edit "C:\jenkins\workspace\myProject\Platforms\Win32\Install\myProject.aip" /SetVersion %previousVersion%
 "C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /edit "C:\jenkins\workspace\myProject\Platforms\Win32\Install\myProject.aip" /SetProductCode -langid 1033
 "C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /rebuild "C:\jenkins\workspace\myProject\Platforms\Win32\Install\myProject.aip" 
```

项目在调用重建命令时挂起并且永远不会完成。

我认为这可能是我在项目中的一个文件的路径问题，所以我查看了所有路径并确保它们是正确的。我还进入了安装程序并将所有路径设置为绝对路径。

不幸的是，Advance Installer 不会在命令提示符上显示错误，并且除非该过程完成，否则日志将不起作用。

当我在我们的构建机器上运行高级安装程序时，它可以毫无问题地构建项目。

有什么建议么？

更新：这是我的输出日志和 AI 位置。我将 AIP 文件移动到根目录。

```
Started by user Admin
[EnvInject] - Preparing an environment for the build.
Building remotely on Build 3 in workspace c:\jenkins\workspace\myProject
[EnvInject] - Executing scripts and injecting environment variables after the SCM step.
[EnvInject] - Injecting as environment variables the properties content 
FILE_INSTALLER="C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe"
DIR_INSTALL="C:\jenkins\workspace\myProject\myProject"
FILE_INSTALL="myProject.aip"

[EnvInject] - Variables injected successfully.
[testdev] $ cmd /c call C:\DOCUME~1\SOFTWA~1.NAF\LOCALS~1\Temp\hudson47906.bat

c:\jenkins\workspace\testdev>cd "C:\jenkins\workspace\myProject\myProject" 

C:\jenkins\workspace\myProject\myProject>dir
Volume in drive C has no label.
Volume Serial Number is 341D-83B7

Directory of C:\jenkins\workspace\myProject\myProject

05/21/2012  09:52 AM    <DIR>          .
05/21/2012  09:52 AM    <DIR>          ..
05/14/2012  01:03 PM    <DIR>          .hg
05/14/2012  09:20 AM               146 .hgignore
05/14/2012  09:20 AM             6,158 .hgtags
05/14/2012  09:20 AM               278 delete compiled files.bat
05/14/2012  09:20 AM               293 file changes.bat
05/15/2012  03:13 PM    <DIR>          myProjectDocs
05/14/2012  09:20 AM    <DIR>          Platforms
05/14/2012  09:20 AM    <DIR>          Universal
05/21/2012  09:52 AM           494,538 myProject.aip
           5 File(s)        501,413 bytes
           6 Dir(s)  26,546,180,096 bytes free

 C:\jenkins\workspace\myProject\myProject>"C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /edit "myProject.aip" /SetVersion 2.6.4.17 

 C:\jenkins\workspace\myProject\myProject>"C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /edit "myProject.aip" /SetProductCode -langid 1033 

 C:\jenkins\workspace\myProject\myProject>"C:\Program Files\Caphyon\Advanced Installer 8.0.1\bin\x86\advinst.exe" /rebuild "myProject.aip" 
 Build was aborted
 Aborted by Admin
 [PostBuildScript] - Execution post build scripts.
 [PostBuildScript] Build is not success : do not execute script
 Build step '[PostBuildScript] - Execute a set of scripts' marked build as failure
 Finished: ABORTED 
```

构建机器上的 AI 位置。 ![人工智能](../Images/a11726629f51628c13126b38c27a2a62.png)

而且我确实在服务器环境变量中列出了高级安装程序路径。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-18T06:17:18.987

您在命令提示符中看不到输出，因为您正在调用“advinst.exe”。Advanced Installer的[CLI 界面](http://www.advancedinstaller.com/user-guide/command-line.html)设计为通过“AdvancedInstaller.com”调用。

另外，我想机器上的可用空间不是问题？

**更新**：现在有一个[用于 Advanced Installer 的官方 Jenkins 插件](https://wiki.jenkins-ci.org/display/JENKINS/Advanced+Installer+Msi+Builder+Plugin)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T19:37:26.353

1) 检查机器并确保没有消息弹出。
2）检查AI的版本和用于创建安装文件的AI版本。
3) 检查指定的版本，确保它符合 xxxx 格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:43:04.547

首先要检查：使用（例如`java -jar hudson.war`）在前台运行 Jenkins，而不是作为服务。

# coffeescript - 为什么 spin.js Module.init 是这样实现的？

> ID：10636644
> 
> 赞同：0
> 
> 时间：2012-05-17T13:25:34.787
> 
> 标签：coffeescript, spine.js

[如此处](https://github.com/maccman/spine/blob/master/src/spine.coffee#L538)定义：

Module.init 的实现如下：

```
Module.init = Controller.init = Model.init = (a1, a2, a3, a4, a5) ->
  new this(a1, a2, a3, a4, a5) 
```

为什么会这样？为什么定义5个属性而不使用`attrs...`所以属性不固定为5个......

```
new this(attrs...) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:28:39.677

可能是因为编译后的 JS 要小得多（Spine.js 非常强调低占用空间）。

```
Module.init = Controller.init = Model.init = (a1, a2, a3, a4, a5) ->
  new this(a1, a2, a3, a4, a5) 
```

编译为：

```
Module.init = Controller.init = Model.init = function(a1, a2, a3, a4, a5) {
  return new this(a1, a2, a3, a4, a5);
}; 
```

尽管：

```
Module.init = Controller.init = Model.init = (args...) ->
  new this args... 
```

编译成更复杂的：

```
var __slice = [].slice;

Module.init = Controller.init = Model.init = function() {
  var args;
  args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
  return (function(func, args, ctor) {
    ctor.prototype = func.prototype;
    var child = new ctor, result = func.apply(child, args), t = typeof result;
    return t == "object" || t == "function" ? result || child : child;
  })(this, args, function(){});
}; 
```

这是因为在 JavaScript 中，`new`运算符和`apply`不能一起使用 :(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:11:17.530

要么有人不知道 splats，要么他们觉得这样做更干净，或者他们认为不使用一堆额外的逻辑来处理 arguments 对象会更高效。

# shell - 通过 SED awk 在文件中的特定位置插入字符串

> ID：10636652
> 
> 赞同：0
> 
> 时间：2012-05-17T13:26:16.237
> 
> 标签：shell, sed, awk, tr

我有一个字符串，我需要在文件中的特定位置插入：

该文件包含多个分号（；）我需要在最后一个“;”之前插入字符串

这可能与 SED 吗？

请务必使用命令发布解释，因为我是 shell 脚本的新手

前 ：

```
adad;sfs;sdfsf;fsdfs 
```

字符串 = jjjjj

后

```
adad;sfs;sdfsf jjjjj;fsdfs 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:49:35.330

这可能对您有用：

```
echo 'adad;sfs;sdfsf;fsdfs'| sed 's/\(.*\);/\1 jjjjj;/'
adad;sfs;sdfsf jjjjj;fsdfs 
```

贪婪并吞下整`\(.*\)`行，`;`使正则表达式回溯到最后一个`;`。`\(.*\)`make sa 反向`\1`引用。将所有命令放在 RHS 中`s`意味着`jjjjj`在最后一个之前插入`;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:39:25.067

```
sed 's/\([^;]*\)\(;[^;]*;$\)/\1jjjjj\2/' filename 
```

（替换`jjjjj`为您需要插入的内容）。

例子：

```
$ echo 'adad;sfs;sdfsf;fsdfs;' | sed 's/\([^;]*\)\(;[^;]*;$\)/\1jjjjj\2/'
adad;sfs;sdfsfjjjjj;fsdfs; 
```

解释：

`sed`找到以下模式：`\([^;]*\)\(;[^;]*;$\)`. 转义的圆括号 ( `\(`, `\)`) 形成编号组，因此我们稍后可以将它们称为`\1`and `\2`。

`[^;]*`是“除了 之外的一切`;`，重复任意次数。

`$`表示行尾。

然后将其更改为`\1jjjjj\2`.

`\1`并且`\2`是在第一和第二圆括号中匹配的组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:40:51.257

`sed`目前，使用: =)的较短解决方案

```
sed -r 's@;([^;]+);$@; jjjjj;\1@' <<< 'adad;sfs;sdfsf;fsdfs;' 
```

*   -r 选项代表扩展的*正则表达式*
*   @ 是分隔符，已知的`/`分隔符可以替换为任何其他字符
*   `;`我们用任何不是`;`最后的东西来匹配正在完成的东西，`$`意思是行尾
*   我解释的最后一部分是用`()`
*   最后，我们通过添加“; jjjj”来替换匹配部分，并将其与捕获的部分连接起来

**编辑**：POSIX 版本（更便携）：

```
echo 'adad;sfs;sdfsf;fsdfs;' | sed 's@;\([^;]\+\);$@; jjjjj;\1@' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:32:23.030

这样的事情可能对你有用：

```
echo "adad;sfs;sdfsf;fsdfs"| awk 'BEGIN{FS=OFS=";"} {$(NF-1)=$(NF-1) " jjjjj"; print}' 
```

### 输出：

```
adad;sfs;sdfsf jjjjj;fsdfs 
```

**说明：** awk 以将 FS（字段分隔符）和 OFS（输出字段分隔符）设置为分号开头`;`。`NF`在 awk 中代表`number of fields`. `$(NF-1)`因此意味着 last-1 字段。在这个 awk 命令中`{$(NF-1)=$(NF-1) " jjjjj"`，我只是附加`jjjjj`到 last-1 字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:51:11.313

```
sed -e 's/\(;[^;]*\)$/ jjjj\1/' 
```

在分号后跟任意数量的非分号 ( `[^;]*`)的部分之前插入 jjjj `$`。`\1`称为**反向引用**`\(`，包含在和之间匹配的字符`\)`。

**更新：**由于示例输入不再具有“；” 在末尾。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T13:52:34.633

```
echo 'adad;sfs;sdfsf;fsdfs;' | sed -r 's/(.*);(.*);/\1 jjjj;\2;/' 
```

你不需要否定 ; 因为 sed 默认情况下是贪婪的，并且会选择尽可能多的字符。

# php - 如何在来自php的响应中回调一个http请求？

> ID：10636654
> 
> 赞同：1
> 
> 时间：2012-05-17T13:26:20.927
> 
> 标签：php, curl, callback, xmlhttprequest, phantomjs

我需要编写一个 php 脚本，它将向我的 PhantomJs 服务器发出 POST 请求，并在收到响应后调用一些回调函数。

假设这是我的 phantomjs 服务器：

```
var server, service;

server = require('webserver').create();

service = server.listen(8080, function (request, response) {

    //do_something_heavy_with_request_data_here

    response.statusCode = 200;
    response.write("{status: success, data: data}");
    response.close();
}); 
```

因此，从我的 php 脚本中，我需要向 phantomjs 发出请求`http://localhost:8080`，当 phantomjs 完成计算并发送响应时，触发回调函数。我找到了这个主题：[如何在 PHP 中发出异步 GET 请求？](https://stackoverflow.com/questions/962915/how-do-i-make-an-asynchronous-get-request-in-php/962920). 这里有什么用处吗？我正在考虑这种 curl 方法，但不确定如何让所有这些一起运行，因为我是一个完全的 php 初学者：[如何在 PHP 中发出异步 GET 请求？](https://stackoverflow.com/questions/962915/how-do-i-make-an-asynchronous-get-request-in-php/962920#10247022).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:37:28.460

您可以使用`cURL`. [http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)这是手册。没有什么复杂的。

```
<?php 

/** 
 * Send a POST requst using cURL 
 * @param string $url to request 
 * @param array $post values to send 
 * @param array $options for cURL 
 * @return string 
 */ 
function curl_post($url, array $post = NULL, array $options = array()) 
{ 
    $defaults = array( 
        CURLOPT_POST => 1, 
        CURLOPT_HEADER => 0, 
        CURLOPT_URL => $url, 
        CURLOPT_FRESH_CONNECT => 1, 
        CURLOPT_RETURNTRANSFER => 1, 
        CURLOPT_FORBID_REUSE => 1, 
        CURLOPT_TIMEOUT => 4, 
        CURLOPT_POSTFIELDS => http_build_query($post) 
    ); 

    $ch = curl_init(); 
    curl_setopt_array($ch, ($options + $defaults)); 
    if( ! $result = curl_exec($ch)) 
    { 
        trigger_error(curl_error($ch)); 
    } 
    curl_close($ch); 
    return $result; 
    } 
?> 
```

这是示例中的代码，适合您的需求。

# actionscript-3 - Foursquare API 请求在部署后无法正常工作，跨域问题？

> ID：10636657
> 
> 赞同：0
> 
> 时间：2012-05-17T13:26:27.227
> 
> 标签：actionscript-3, security, api, foursquare

我在 flash ide / as3 中拼凑了一个简单的应用程序，该应用程序可以从四方位置提取照片。它在本地工作，但一旦部署在网络上，它就不起作用了。我猜这是一个跨域问题，但到目前为止我在网上找到的（下面的链接）并没有回答我的问题。 [http://groups.google.com/group/foursquare-api/browse_thread/thread/ab963f74fde8ae9f/3e68559966acf7c9](http://groups.google.com/group/foursquare-api/browse_thread/thread/ab963f74fde8ae9f/3e68559966acf7c9)

我检查了本地与网络设置。我读过我的服务器上不需要跨域文件。而且我相信我已经读过，我不应该像我在 twitter 上需要的那样需要一个用于foursquare 的php 代理......不知道它还能是什么。

它说测试应该跟踪响应但它永远不会填充的框，就像调用在foursquare上击中跨域文件后停止在其轨道上一样，我什至没有得到错误响应。 [http://physicalgraffitea.com/wp-content/swf/Foursquare-e.swf](http://physicalgraffitea.com/wp-content/swf/Foursquare-e.swf)

在这里将 AS3 蒸馏到最精简，没有 ID 和秘密。

有什么帮助吗？谢谢

```
 Security.allowDomain("http://www.foursquare.com"); 
    Security.loadPolicyFile("http://api.foursquare.com/crossdomain.xml"); 

        import flash.net.URLRequest;
        import flash.net.URLLoader;
        import com.adobe.serialization.json.JSON;

        var resource = "https://api.foursquare.com/v2/venues/4b7071c8f964a520d51a2de3/photos?group=venue&limit=6&client_id="+myId+"&client_secret="+mySecret+"&v=20120517";

        var loader:URLLoader = new URLLoader();
        var request:URLRequest = new URLRequest(resource);
        request.method = URLRequestMethod.GET; 
        loader.addEventListener(Event.COMPLETE, onComplete);
        loader.addEventListener(IOErrorEvent.IO_ERROR,onIOError);
        loader.load(request);           

    function onComplete(e:Event):void {
                    var loader:URLLoader = URLLoader(e.target);
                    outputtxt.text = loader.data;
                    trace(loader.data);
                    var jsonData:Object = JSON.decode(loader.data)
        }
    function onIOError(e:Event):void {
            var loader:URLLoader = URLLoader(e.target);
            outputtxt.text = "error " + loader.data;            
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T23:48:06.767

经过一番大惊小怪，我可以让它工作的唯一方法是，是的，使用带有foursquare api的跨域代理php文件。

但仅此一项并不能解决我的问题，需要使用完整的 http 路径引用 swf，但路径中没有“www”。“http://mydomain.com/swf/file.swf” 不知道为什么，但如果您有类似的跨域问题，请尝试删除 www

# node.js - 远程 node.js http 服务器无法启动或无法侦听

> ID：10636660
> 
> 赞同：0
> 
> 时间：2012-05-17T13:26:30.300
> 
> 标签：node.js, debian

我在我的 Windows 机器上运行了一些 node.js 测试，一切运行良好。现在我在我的 debian 远程机器上安装了节点，并尝试运行一个简单的 http 服务器：

```
var http = require("http");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write("Hello World");
  response.end();
}).listen(8888); 
```

我使用 SSH 执行：`node server.js`现在，当我访问我的服务器 ip [http://xxx.xxx.22.127:8888](http://xxx.xxx.22.127:8888)时，服务器超时。

我究竟做错了什么？我用一些更简单的脚本进行了测试，node.js 似乎安装正确。可能是防火墙问题，还是我应该添加主机 IP 或 sommit？

附带问题：当我`node server.js`在 putty 中运行时，我无法再输入，如何返回命令行？:)

编辑：我的 iptables 信息

```
Chain INPUT (policy ACCEPT)
target        prot opt source               destination
fail2ban-ssh  tcp  --  anywhere             anywhere            multiport dports ssh
ACCEPT        tcp  --  anywhere             anywhere            tcp dpt:5900
ACCEPT        tcp  --  anywhere             anywhere            tcp dpt:8888

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

Chain fail2ban-ssh (1 references)
target     prot opt source               destination
RETURN     all  --  anywhere             anywhere 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:30:13.947

可能有软件防火墙（`iptables`例如）或硬件防火墙阻止`8888`接收请求。解决此问题的唯一方法是深入研究您的服务器配置/网络架构以追踪问题。例如，您可以使用`iptables -L`iptables 查看当前执行的规则。

也可能有另一个应用程序已经在监听`8888`，但我相信这会引发错误而不是像这样失败，所以我怀疑这是问题所在。检查这一点的一种方法是通过`netstat -a`.

*不用说，我是说您拥有的代码应该可以正常工作，这是您的服务器设置问题导致的。*

**侧面回答：**使用[`nohup`](http://ss64.com/bash/nohup.html)和`&`喜欢这样；`nohup node server.js &`，尽管您应该考虑安装一个模块，例如[`forever`](https://github.com/nodejitsu/forever/)，然后使用`forever start server.js`；`forever`如果它崩溃了，它还有一个额外的好处是自动重启你的节点进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:32:02.523

> 我究竟做错了什么？我用一些更简单的脚本进行了测试，node.js 似乎安装正确。可能是防火墙问题，还是我应该添加主机 IP 或 sommit？

我认为脚本本身没有任何问题。尝试使用`telnet`.

> 附带问题：当我在 putty 中运行 node server.js 时，我无法再输入，如何返回命令行？:)

`node server.js &`

（另见`man nohup`）

# javascript - Bootstrap 模态出现在背景下

> ID：10636667
> 
> 赞同：648
> 
> 时间：2012-05-17T13:27:00.093
> 
> 标签：javascript, css, twitter-bootstrap, modal-dialog

我直接从 Bootstrap 示例中使用了我的模态代码，并且只包含了 bootstrap.js（而不是 bootstrap-modal.js）。但是，我的模态出现在灰色渐变（背景）下方并且不可编辑。

这是它的样子：

![模态隐藏在背景后面](../Images/6c34e2c7d315b21e6668d710f08bcbbc.png)

有关重现此问题的*一种方法，请参*[见此小提琴。](http://jsfiddle.net/hq4fzvh9/1/)该代码的基本结构如下：

 *```
<body>
    <p>Lorem ipsum dolor sit amet.</p>    

    <div class="my-module">
        This container contains the modal code.
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-body">Modal</div>
                </div>
            </div>
        </div>
    </div>
</body> 
```

```
body {
    padding-top: 50px;
}

.my-module {
    position: fixed;
    top: 0;
    left: 0;
} 
```

任何想法为什么会这样或我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：718
> 
> 时间：2012-08-03T03:09:40.303

如果模态容器具有固定或相对位置，或者位于具有固定或相对位置的元素内，则会发生此行为。

**确保模态容器及其所有父元素都以解决问题的默认方式定位。**

这里有几种方法可以做到这一点：

1.  最简单的方法是移动模态 div，使其位于任何具有特殊定位的元素之外。一个好地方可能就在结束 body 标记之前`</body>`。
2.  或者，您可以`position:`从模式及其祖先中删除 CSS 属性，直到问题消失。但是，这可能会改变页面的外观和功能。

* * *

## 回答 #2

> 赞同：454
> 
> 时间：2013-04-03T07:00:32.967

问题与父容器的定位有关。在显示之前，您可以轻松地将模态从这些容器中“移出”。如果您正在`show`使用 js 编写模态框，请执行以下操作：

```
$('#myModal').appendTo("body").modal('show'); 
```

或者，如果您使用按钮启动模式，请删除`.modal('show');`并执行以下操作：

```
$('#myModal').appendTo("body") 
```

这将保留所有正常功能，允许您使用按钮显示模式。

* * *

## 回答 #3

> 赞同：185
> 
> 时间：2014-11-14T01:07:16.707

我尝试了上面提供的所有选项，但没有使用这些选项。

**起作用的是：**将 .modal-backdrop 的 z-index 设置为 -1。

```
.modal-backdrop {
  z-index: -1;
} 
```

* * *

## 回答 #4

> 赞同：153
> 
> 时间：2014-11-14T10:18:26.830

另外，请确保 BootStrap css 和 js 的版本相同。不同的版本也可以让modal出现在背景下：

例如：

坏的：

```
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script> 
```

好的：

```
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：125
> 
> 时间：2014-10-30T11:07:22.667

我也遇到了这个问题，在我发现我实际上不需要背景之前，没有一个解决方案对我有用。您可以使用以下代码轻松删除背景。

```
<div class="modal fade" id="createModal" data-backdrop="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Create Project</h4>
            </div>
            <div class="modal-body">Not yet made</div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div> 
```

**注意**：该`data-backdrop`属性需要设置为`false`（[其他选项](https://getbootstrap.com/docs/3.3/javascript/#modals-options)：`static`或`true`）。

* * *

## 回答 #6

> 赞同：66
> 
> 时间：2012-12-12T07:24:39.283

我通过在打开模式窗口**后**为模式窗口提供高 z-index 值来使其工作。例如：

```
$("#myModal").modal("show");
$("#myModal").css("z-index", "1500"); 
```

* * *

## 回答 #7

> 赞同：41
> 
> 时间：2015-08-28T07:45:09.043

@Muhd 提供的解决方案是最好的方法。但是，如果您遇到无法更改页面结构的情况，请使用以下技巧：

```
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5);">
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title" id="myModalLabel">Modal title</h4>
        </div>
        <div class="modal-body">...</div>
        <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
        </div>
    </div>
</div> 
```

这里的技巧是**`data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5);"`** 删除默认背景并通过设置对话框本身的背景颜色和一些 alpha 创建一个虚拟背景。

**更新 1：** 正如@Gustyn 指出的那样，单击背景不会按预期关闭对话框。因此，要实现这一点，您必须添加一些 java 脚本代码。这是一些如何实现这一目标的示例。

```
$('.modal').click(function(event){
    $(event.target).modal('hide');
}); 
```

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2017-08-05T04:22:05.383

这将涵盖所有模式，而不会弄乱任何动画或预期的行为..

```
$(document).on('show.bs.modal', '.modal', function () {
  $(this).appendTo('body');
}); 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2014-01-15T01:15:37.807

一个但晚了，但这是一个通用的解决方案 -

```
 var checkeventcount = 1,prevTarget;
    $('.modal').on('show.bs.modal', function (e) {
        if(typeof prevTarget == 'undefined' || (checkeventcount==1 && e.target!=prevTarget))
        {  
          prevTarget = e.target;
          checkeventcount++;
          e.preventDefault();
          $(e.target).appendTo('body').modal('show');
        }
        else if(e.target==prevTarget && checkeventcount==2)
        {
          checkeventcount--;
        }
     }); 
```

访问此链接 - [Bootstrap 3 - 模式在使用固定侧边栏时消失在背景下方以](https://stackoverflow.com/questions/21126617/bootstrap-3-modal-disappearing-below-backdrop-when-using-a-fixed-sidebar/21127348#21127348)获取详细信息。

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2020-07-10T16:44:05.267

我找到的最简单的解决方案，适用于*我*的所有案例，是[类似帖子](https://stackoverflow.com/questions/21126617/bootstrap-3-modal-disappearing-below-backdrop-when-using-a-fixed-sidebar/21127348#21127348)中的答案：

这里是：

```
.modal {
  background: rgba(0, 0, 0, 0.5); 
}
.modal-backdrop {
  display: none;
} 
```

基本上不使用原始背景。相反，您使用模态作为背景。结果是它的外观和行为与原来的完全一样。它避免了 z-indexes 的所有问题（对我来说，将 z-index 更改为 0 解决了这个问题，但是我的导航菜单在模态和背景之间产生了一个新问题）并且很简单。

感谢@Jevin O. Sewaruth 发布原始答案。

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2014-11-26T01:41:21.823

解决此问题的另一种方法是从`.modal-backdrop`bootstrap.css 中删除 z-index。这将导致背景与您身体的其他部分处于同一水平（它仍然会褪色）并且您的模态位于顶部。

`.modal-backdrop`看起来像这样

```
.modal-backdrop {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-color: #000000;
} 
```

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2016-05-28T21:51:34.773

只需添加两行 CSS：

```
.modal-backdrop{z-index: 1050;}
.modal{z-index: 1060;} 
```

.modal-backdrop 应该有 1050 值以将其设置在导航栏上。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2015-02-12T16:02:29.260

我只是设置：

```
#myModal {
    z-index: 1500;
} 
```

它有效....

对于原始问题：

```
.my-module {
    z-index: 1500;
} 
```

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2015-05-14T10:14:23.180

在您的模态中使用它：

```
data-backdrop="false" 
```

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2015-09-10T04:10:39.627

当在 CSS 中使用渐变之类的东西来处理背景甚至手风琴标题时，经常会遇到这个问题。

不幸的是，修改或覆盖核心 Bootstrap CSS 是不可取的，并且可能导致不必要的副作用。侵入性最小的方法是添加`data-backdrop="false"`，但您可能会注意到淡入淡出效果不再按预期工作。

在遵循 Bootstrap 的最新版本之后，版本 3.3.5 似乎解决了这个问题，没有不必要的副作用。

下载：[https ://github.com/twbs/bootstrap/releases/download/v3.3.5/bootstrap-3.3.5-dist.zip](https://github.com/twbs/bootstrap/releases/download/v3.3.5/bootstrap-3.3.5-dist.zip)

请务必包含 3.3.5 中的 CSS 文件和 JavaScript 文件。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2017-03-19T13:39:02.503

我有一个更轻更好的解决方案..

**它可以通过一些额外的 CSS 样式轻松解决..**

1.  隐藏类`.modal-backdrop`（从 Bootstrap.js 自动生成）

    ```
    .modal-backdrop
    {
    display:none;
    visibility:hidden; 
    position:relative
    } 
    ```

2.  将背景设置`.modal`为半透明的黑色背景图像。

    ```
    .modal
    {
    background:url("http://bin.smwcentral.net/u/11361/BlackTransparentBackground.png")
    // translucent image from google images 
    z-index:1100; 
    } 
    ```

如果您的要求需要模态框位于元素内部而不是`</body>`标签附近，这将最有效。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2014-02-12T08:22:27.720

嗨，我遇到了同样的问题，然后我意识到当您使用 bootsrap 3.1 时，与旧版本的 bootsrap (2.3.2) 不同，模态的 html 结构发生了变化！

**你必须用 modal-dialog 和 modal-content 包裹你的模态页眉正文和页脚**

```
<div class="modal hide fade">

  <div class="modal-dialog">
    <div class="modal-content">

    **here goes the modal header body and footer**

    </div>
  </div>

 </div> 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2015-09-05T11:40:36.210

上面建议的解决方案都不适合我，但这种技术解决了这个问题：

```
$('#myModal').on('shown.bs.modal', function() {
   //To relate the z-index make sure backdrop and modal are siblings
   $(this).before($('.modal-backdrop'));
   //Now set z-index of modal greater than backdrop
   $(this).css("z-index", parseInt($('.modal-backdrop').css('z-index')) + 1);
}); 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2016-02-08T16:58:08.183

我遇到了这个问题，最简单的解决方法是在模态对话框 div 上添加大于 1040 的 z-index：

```
<div class="modal-dialog" style="z-index: 1100;"> 
```

我相信 bootstrap 创建一个 div modal-backdrop 淡入淡出，在我的例子中，z-index 为 1040，所以如果你把 modal-dialog 放在上面，它不应该再变灰了。

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2020-05-21T04:55:43.377

我通过添加`data-backdrop="false"`到 div 解决了我的问题：

```
<div class="modal fade" id="exampleModalCenter" data-backdrop="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">

..... 
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2016-03-03T06:42:38.860

将 z-index .modal 设置为最高值

例如，.sidebarwrapper 的 z-index 为 1100，因此将 .modal 的 z-index 设置为 1101

```
.modal {
    z-index: 1101;
} 
```

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2017-07-11T21:53:15.813

在我的情况下解决它，在我的样式表中添加它：

```
.modal-backdrop{
  z-index:0;
}
```

使用 google 调试器，可以检查元素 BACKDROP 并修改属性。祝你好运。

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2013-11-08T10:57:29.920

在您的导航栏`navbar-fixed-top`需要`z-index = 1041` 以及如果您使用`bootstarp-combined.min.css`也更改 `.navbar-fixed-top, .navbar-fixed-bottom` `z-index to 1041`

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2017-10-01T07:57:35.313

这对我有用：

```
sass: 
  .modal-backdrop
    display: none
  #yourModal.modal.fade.in
    background: rgba(0, 0, 0, 0.5) 
```

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2015-04-04T06:37:37.327

我删除了模态背景。

```
.modal-backdrop {
    display:none;
} 
```

这不是更好的解决方案，但对我有用。

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2015-05-05T20:38:23.320

您还可以从 .modal-backdrop 中删除 z-index。生成的 css 看起来像这样。

```
.modal-backdrop {
}
  .modal-backdrop.in {
    opacity: .35;
    filter: alpha(opacity=35); } 
```

* * *

## 回答 #27

> 赞同：3
> 
> 时间：2015-11-23T09:54:06.043

我发现的是：

在 bootstrap 3.3.0 中是不对的，但是在 bootstrap 3.3.5 中是对的。让我们看看代码。3.3.0：

```
this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
    .prependTo(this.$element) 
```

3.3.5

```
 this.$backdrop = $(document.createElement('div'))
        .addClass('modal-backdrop ' + animate)
        .appendTo(this.$body) 
```

* * *

## 回答 #28

> 赞同：3
> 
> 时间：2016-01-03T23:43:12.913

```
$('.modal').insertAfter($('body')); 
```

* * *

## 回答 #29

> 赞同：3
> 
> 时间：2016-07-23T12:50:24.720

将此添加到您的页面。它对我有用。

```
<script type="text/javascript">
    $('.modal').parent().on('show.bs.modal', function (e) { $(e.relatedTarget.attributes['data-target'].value).appendTo('body'); })
</script> 
```

* * *

## 回答 #30

> 赞同：3
> 
> 时间：2016-10-05T03:48:53.513

我通过将下面的样式添加到 DIV 标签来解决这个问题

```
style="background-color: rgba(0, 0, 0, 0.5);" 
```

并添加自定义 css

```
.modal-backdrop {position: relative;} 
```

* * *

## 回答 #31

> 赞同：3
> 
> 时间：2018-12-20T09:53:23.277

对我来说，最简单的解决方案是将我的模态放入一个绝对位置和 z-index 高于 .modal-backdrop 的包装器中。由于模态背景（至少在我的情况下）具有 z-index 1050：

```
.my-modal-wrapper {
  position: absolute;
  z-index: 1060;
}
```

```
<div class="my-modal-wrapper"></div>
```

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2021-07-28T09:27:18.257

我浏览了我的 HTML，发现我有一个未闭合的`<div>`标签。关闭`<div>`解决了我的问题。PS：`<div>`标签既不是模式的祖先也不是子模式。

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2014-03-21T07:04:01.777

就我而言，我有一个包含以下内容的包装器：

```
.wrapper { margin: 0 auto; position:relative; z-index:1;overflow:hidden;} 
```

只删除了 z-index:1 并且不知道为什么解决了这个问题。也肯定会删除相对位置，但我需要它。

* * *

## 回答 #34

> 赞同：2
> 
> 时间：2014-12-23T14:21:37.030

就我而言，原因是 boostrap.min.css。一旦我将它作为参考从我的 HTML 文件中排除，对话框就会显示在模态阴影的前面。

* * *

## 回答 #35

> 赞同：2
> 
> 时间：2015-03-19T02:38:57.130

将绝对位置更改为相对位置。

```
.modal-backdrop {
    position: relative;
    /* ... */
} 
```

* * *

## 回答 #36

> 赞同：2
> 
> 时间：2015-05-06T01:45:51.967

像 Davide Lorigliola 一样，我通过提高 z-index 来修复它：

```
.modal-backdrop { z-index: -999999; } 
```

* * *

## 回答 #37

> 赞同：2
> 
> 时间：2021-09-25T19:37:03.163

最简单的解决方案是将模态对话框移到任何容器之外，并在`<body>`元素下声明它：

```
<body>    
    <div>
        ...
    <div>

    <div class="modal">
        ... modal dialog here
    </div>
</body> 
```

我已经尝试过这个解决方案，它对我有用。

来源：[https ://weblog.west-wind.com/posts/2016/sep/14/bootstrap-modal-dialog-showing-under-modal-background](https://weblog.west-wind.com/posts/2016/sep/14/bootstrap-modal-dialog-showing-under-modal-background)

* * *

## 回答 #38

> 赞同：1
> 
> 时间：2014-12-05T19:18:02.630

当有一个未关闭的标签，尤其是一个未关闭的标签时，有时会发生这种行为`</div>`。您可以查看您的模态框所在的位置，并确保所有标签都正确关闭或更好地将 div 模态框移到更靠近页面底部的位置，紧接在`</body>`标签外壳之前

* * *

## 回答 #39

> 赞同：1
> 
> 时间：2016-03-03T10:40:28.690

我有同样的问题，也检查了 Muhd 的答案。

但是，我的模态需要 left, top 属性，所以只需将固定位置更改为绝对位置即可。

```
.modal {
    position: absolute;
} 
```

* * *

## 回答 #40

> 赞同：1
> 
> 时间：2016-10-05T16:24:31.513

附着在身体上时要小心！

这肯定会从背景后面得到那个模态：

```
$('#myModal').appendTo("body").modal('show'); 
```

但是，这会在您每次打开正文时向正文添加另一个模态，当在更新面板中添加带有编辑和更新的网格视图等控件到模态时，这可能会导致头痛。因此，您可以考虑在模态关闭时将其删除：

例如：

```
$(document).on('hidden.bs.modal', function () {
        $('.modal').remove();
    }); 
```

将删除添加的模态。（当然这是一个示例，您可能希望使用添加到模式中的另一个类名）。

正如其他人已经说过的那样；你可以简单地关闭模态的背景（data-backdrop="false"），或者如果你不能在没有屏幕变暗的情况下生活，你可以调整 .modal-backdrop css 类（或者增加 z-index ）。

* * *

## 回答 #41

> 赞同：1
> 
> 时间：2018-03-29T16:22:53.857

我只是从 _modal.scss 文件中删除了 position: fixed 样式，它似乎对我来说很好用。我仍然有背景，它按预期工作。

```
// Modal background
.modal-backdrop {
  /* commented out position: fixed - bug fix */
  //position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: $zindex-modal-backdrop;
  background-color: $modal-backdrop-bg;
  // Fade for backdrop
  &.fade {
    opacity: 0;
  } 
```

感谢 Rick Strahl 在“[在模式背景下显示的引导模式对话框](https://weblog.west-wind.com/posts/2016/Sep/14/Bootstrap-Modal-Dialog-showing-under-Modal-Background)”中的指导。

* * *

## 回答 #42

> 赞同：1
> 
> 时间：2019-04-12T09:52:13.367

我只对 iOS 设备有类似的问题。

解决方案是`-webkit-overflow-scrolling: touch`从父**元素中删除**

* * *

## 回答 #43

> 赞同：1
> 
> 时间：2020-08-13T14:13:26.020

检查你的 CSS，看看你是否有任何模糊和过滤器。我从我的 css 中删除了这段代码，并且模态再次正常工作

```
.modal-open .main-wrapper {
    -webkit-filter: blur(1px);
    -moz-filter: blur(1px);
    -o-filter: blur(1px);
    -ms-filter: blur(1px);
    filter: blur(1px);
} 
```

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2013-08-09T23:19:53.480

尝试从to覆盖类`.modal-open`溢出值：`hidden``visible`

```
.modal-open {
    overflow: visible;
} 
```

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2014-06-19T07:07:51.897

您可以制定一种解决方法，但这将消除所有页面的淡入淡出。该模式将像 Facebook 弹出窗口一样弹出。打开模态后尝试：

```
 $('.modal-backdrop').removeClass('modal-backdrop'); 
```

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2017-06-08T13:20:36.830

我在使用 Sharepoint 2013 Modal bootstrap 的 Iphone 和 Ipad 上遇到了这样的问题，让 z-index 问题与背景保持一致。

我只是在 JS 上使用它：

```
$('#myModal').on('shown.bs.modal', function() {
   //To relate the z-index make sure backdrop and modal are siblings
   $(this).before($('.modal-backdrop'));
   //Now set z-index of modal greater than backdrop
   $(this).css("z-index", parseInt($('.modal-backdrop').css('z-index')) + 1);
}); 
```

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2017-08-29T09:28:33.493

```
function addclassName(){
    setTimeout(function(){
        var c = document.querySelectorAll(".modal-backdrop");
        for (var i = 0; i < c.length; i++) {
            c[i].style.zIndex =  1040 + i * 20  ;
        }
        var d = document.querySelectorAll(".modal.fade");
        for(var i = 0; i<d.length; i++){
            d[i].style.zIndex = 1050 + i * 20;
        }
    }, 10);
} 
```

* * *

## 回答 #48

> 赞同：0
> 
> 时间：2017-08-29T17:21:12.950

根据之前的答案，这可能有几个原因。对我来说，问题是在不知情的情况下引用了两个不同的引导链接，因此删除一个可以解决问题。

就我而言，我包括了这个：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css"
      integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous"> 
```

和另一个我已经在我的笔记本电脑中的离线。

* * *

## 回答 #49

> 赞同：0
> 
> 时间：2019-09-16T05:29:17.583

解决方案是将模态直接放在`body`标签下。如果由于某种原因无法做到这一点，那么只需将`overflow: visible`属性添加到包含模式的标签中，或使用以下代码：

```
<script>
    $(document).on('show.bs.modal', '.modal', function () {
        $('.div-wrapper-for-modal').css('overflow', 'visible');
    });

    $(document).on('hide.bs.modal', '.modal', function () {
        $('.div-wrapper-for-modal').css('overflow', 'auto');
    });
</script>
<div class="div-wrapper-for-modal">
    <div class="modal hide fade">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>Modal header</h3>
        </div>
        <div class="modal-body">
            <p>One fine body…&lt;/p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn">Close</a>
            <a href="#" class="btn btn-primary">Save changes</a>
        </div>
    </div>
</div> 
```

* * *

## 回答 #50

> 赞同：0
> 
> 时间：2020-06-05T00:48:12.183

对于像我这样在不使用插件或主题的情况下将**Bootstrap**添加到**Wordpress的人：**

我在文件中添加了引导**CSS**和**JS 。**`function.php`然后，在 wordpress 页面中调用模态。不管我做什么，`.modal-backdrop`总是在前面`#mymodal`。我发现这是一个**z-index**问题，但是正如`#mymodal`在`content div`和`.modal-backdrop`末尾生成的那样`<body>`，z-index 无法工作。我所做`#mymodal`的就是在它生成之后移动到最后：

```
$(document).ready(function () {
   $('#mymodal').on('shown.bs.modal', function () {
       $('#mymodal').appendTo(document.body);
     })
}); 
```

顺便说一句，我必须在`shown.bs.modal`里面添加，`$(document).ready`因为当我按下按钮时它没有被调用。

* * *

## 回答 #51

> 赞同：0
> 
> 时间：2020-06-07T19:23:14.680

```
.modal-backdrop {
/* bug fix - no overlay */    
display: none;} 
```

* * *

## 回答 #52

> 赞同：0
> 
> 时间：2021-02-05T12:41:43.693

有

```
transform:translate3d(0, 0, 0); 
```

在任何祖先元素上也可能导致这种情况。在引导程序 4.6.0 上测试。

* * *

## 回答 #53

> 赞同：-1
> 
> 时间：2019-12-02T12:38:35.527

将不透明度设为 1

```
.modal{
opacity:1;    
} 
```

* * *

## 回答 #54

> 赞同：-2
> 
> 时间：2013-09-30T16:52:46.657

我发现通过添加一个内联样式标签来设置“ `display: none`”可以防止这个问题。代码的位置没有任何影响。

* * *

## 回答 #55

> 赞同：-2
> 
> 时间：2019-03-14T08:50:27.213

试试这个代码到 CSS。

```
.modal-open { overflow: hidden !important; }
.modal-open *{ position:unset; z-index: 0; }
.modal-open .modal-backdrop { position: fixed; z-index: 99998 !important; }
.modal-open .modal { position: fixed; z-index: 99999 !important; } 
```

前任：

```
 $(window).on('load', function() {

/* Latest compiled and minified JavaScript included as External Resource */
$(document).ready(function() { $('.modal').modal("show"); });

    });
```

```
/* Optional theme */
@import url('//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css');

body {
    margin: 10px;
    padding-top: 50px;
}

.my-module {
    position: fixed;
    top: 0;
    left: 0;
    border: 1px solid red;
}

.modal-open { overflow: hidden !important; }
.modal-open *{ position:unset; z-index: 0; }
.modal-open .modal-backdrop { position: fixed; z-index: 99998 !important; }
.modal-open .modal { position: fixed; z-index: 99999 !important; }
```

```
<html><head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Bootstrap 3 Template</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="//code.jquery.com/jquery-compat-git.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">

    <link rel="stylesheet" type="text/css" href="/css/result-light.css">

      <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
      <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">

</head>
<body class="modal-open">
    <div class="container">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus et augue sed lorem laoreet vehicula sit amet eget tortor. Donec in turpis gravida, commodo mauris ac, gravida neque. Proin eget tristique lorem. Integer tincidunt sem sit amet metus ultricies, vitae placerat dui gravida. Pellentesque viverra, nunc imperdiet egestas imperdiet, magna massa varius arcu, vitae iaculis tortor quam vitae arcu. Fusce posuere non lectus vel cursus. In rutrum sed dui non sollicitudin. Proin ante magna, imperdiet ac nisl ut, rhoncus pellentesque tortor.</p>

    <p>Cras ac velit vitae elit tempus tempus. Nullam eu posuere leo. In posuere, tortor et cursus ultrices, lorem lacus efficitur dolor, a aliquet elit urna sed tortor. Donec dignissim ante ex, non congue ex efficitur sit amet. Suspendisse lacinia tristique odio, vel sagittis dui tempor tempus. Quisque gravida mauris metus, sed aliquam lacus sollicitudin sit amet. Pellentesque laoreet facilisis scelerisque. Nunc a pulvinar magna. Maecenas at mollis tortor.</p>

    <p>Vivamus ultricies, odio sed ornare maximus, libero justo dignissim nulla, nec pharetra neque nulla vel leo. Donec imperdiet sem sem, eu interdum justo tincidunt finibus. Vestibulum lacinia diam gravida risus luctus, elementum blandit dui porttitor. Quisque varius lacus et tempor faucibus. Nam eros nunc, gravida eu tellus eget, placerat porta leo. Duis tempus ultricies felis sit amet cursus. Nunc egestas ex non lacus laoreet tincidunt. Sed malesuada placerat elementum. Mauris eu rutrum nulla. Nunc consequat lacus eget libero tincidunt, in semper eros accumsan. Interdum et malesuada fames ac ante ipsum primis in faucibus. Suspendisse eu tincidunt quam, ut tincidunt eros. Donec luctus velit ac nulla lacinia malesuada.</p>

    <p>Vestibulum id mi in urna lacinia mollis. Pellentesque sit amet mauris ullamcorper, suscipit dolor in, lacinia leo. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In hac habitasse platea dictumst. Vivamus sollicitudin tempus massa sed molestie. Nullam quis neque vel nunc convallis porta a laoreet ex. Aliquam tempus hendrerit turpis eleifend convallis. Cras enim eros, fermentum sed velit eget, dignissim malesuada augue. Fusce ut fermentum nisl, vel imperdiet libero. Etiam luctus arcu volutpat turpis finibus pulvinar eget in augue. Integer sapien nisi, scelerisque ultrices quam sit amet, aliquam placerat neque. Morbi consequat porttitor lacus, quis pulvinar dolor aliquam ut. Ut et dolor id est iaculis lobortis nec aliquet nisl.</p>

    <p>Nunc et tortor cursus, ullamcorper justo vitae, ullamcorper sapien. In fringilla urna quam, et finibus ipsum finibus eu. In fermentum turpis ut eros semper, non gravida purus ornare. Praesent vehicula lobortis lacinia. Vivamus nec elit libero. Suspendisse porta neque ut erat tempor rhoncus. Nunc quis massa in ante rhoncus bibendum. Nam maximus ex vitae orci luctus scelerisque. Sed id mauris iaculis, scelerisque mauris feugiat, vehicula ipsum. Duis semper erat ac nulla sodales gravida. Suspendisse nec sapien pharetra, scelerisque odio in, dignissim erat. Aenean feugiat sagittis eros, in mattis orci tristique lacinia. Phasellus posuere id neque sed mattis. Morbi accumsan faucibus ullamcorper.</p>    

<div class="my-module">
    This is a container for "my-module" with some fixed position. The module contains the modal code.
<div class="modal fade in" aria-hidden="false" style="display: block;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      <div class="modal-body">
        <p>One fine body…&lt;/p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

</div>
</div>
</body></html>
```

* * *

## 回答 #56

> 赞同：-2
> 
> 时间：2021-05-06T13:22:26.367

对于角：

```
($('.modal-backdrop') as any).remove(); 
```

* * *

## 回答 #57

> 赞同：-3
> 
> 时间：2014-07-03T22:19:12.397

删除引导 CSS 中设置为黑色的模态背景背景

见我的：

```
.modal-backdrop {
    position: fixed; /*---- commented and it shows */
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 1030;
    /*background-color: #000000; */
} 
```

然后添加这个背景颜色和o.5的不透明度。见我的：

```
.modal-backdrop {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 1030; 
  background-color: rgba(0, 0, 0, 0.5);
  opacity: 0.5; 
```

}

注意：虽然这些更改是在 boostrap css 中进行的，但我使用了 angular-strap 并且我没有下载或使用 ng-animate css

* * *

## 回答 #58

> 赞同：-4
> 
> 时间：2014-11-25T10:40:05.720

将此添加到您的样式表中：

```
.modal-backdrop {
    background-color: #000;
    bottom: 0;
    left: 0;
    position: fixed;
    right: 0;
    top: 0;
    z-index: 0 !important;
} 
```*

# javascript - 将内容加载到 div 后，jQuery 停止工作

> ID：10636669
> 
> 赞同：0
> 
> 时间：2012-05-17T13:27:12.430
> 
> 标签：javascript, jquery

例如，我有以下名为的 HTML `index.html`：

```
<html>
<head>
    <style>
        #content { float:left; }
        #sub { float:right; }
    </style>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="action.js"></script>    
</head>
<body>
    <h2>Test de</h2>
    <div id="content">
        Content
        <button class="loadSub">Load</button>
    </div>
    <div id="sub">
        Sub content
    </div>
</body>
</html> 
```

还有一个简单的 JS 文件，名为`action.js`：

```
$(document).ready(function(){
    $('button.loadSub').click(function(){
        $('#sub').load('test.html');
    });

    $('button.hide').click(function(){
        $('#sub').fadeOut('slow');
    });
}); 
```

如您所见，当我单击按钮时`.loadSub`，div`#sub`将加载来自以下位置的新内容`test.html`：

```
<h2>This is the sub content</h2>
<button class="hide">Hide</button> 
```

我在这里遇到了两个问题：

首先，`.loadSub`按钮确实成功加载了 id 的 div `subcontent`，但是`.hide`按钮不起作用。

其次，在我尝试插入之后

> 脚本类型="文本/javascript" src="action.js"

在里面`test.html`，隐藏按钮起作用并淡出它的内容。但反过来，我发现按钮`loadSub`不再起作用。我无法`subcontent`再次加载。

有没有其他方法可以只声明一次 js 文件的源并`button.loadSub`在我单击它时进行工作？任何人都可以解释这个问题并给我一个解决它的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:31:08.427

您正在将动态 HTML 加载到您的页面中。这意味着在您调用时，页面中尚不存在`$('button.hide').click()`该元素，因此无法附加处理程序。`button.hide``click`

您可能想尝试做一个`delegate`附件。

```
$('#sub').on('click', 'button.hide', function () {
    $('#sub').fadeOut('slow');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:31:41.823

当您尝试绑定事件时，隐藏按钮不在页面上，因此它永远不会被注册。

将其更改为`on`像这样使用（假设版本 1.7+）

```
$(document).on('click', 'button.hide', function(){
    $('#sub').fadeOut('slow');
}); 
```

如果是旧版本，则委托：

```
$(document).delegate('button.hide', 'click', function(){
    $('#sub').fadeOut('slow');
}); 
```

这会在文档级别附加事件处理程序，因此适用于添加到页面的任何新内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:39:51.683

在第一页，把这个。您可以将我的 JQQuery 代码插入到您的 action.js 文件中。在第二页上，您正在加载到您的 div 中，放置我添加的第二个 Jquery 代码。

在第一页：

```
<html>
<head>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<style>
#content{float:left;}
#sub{float:right;}
</style>

<script type="text/javascript">
$(document).ready(function(){
$(function(){
$('.loadSub').click(function(){
$('#sub').show();
$('#sub').load('test.html');
});
});
});
</script>

</head>

<body>

<h2>Test de</h2>

<div id="content">
Content
<button class="loadSub">Load</button>
</div>

<div id="sub">Sub content</div>

</body>

</html> 
```

在第二页（加载到 div 中的页面，添加以下内容：

```
<script type="text/javascript">
$(document).ready(function(){
$(function(){
$('.hide').unbind("click").click(function(){
$('#sub').fadeOut('slow');
});
});
});
</script>

<h2>This is the sub content</h2>
<button class="hide">Hide</button> 
```

# sql - NHibernate 3.3 部分 sql 日志

> ID：10636670
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:27:18.527
> 
> 标签：sql, nhibernate, logging

我在我的一个项目中使用 NHibernate 3.3，并且我正在开发一系列测试。我在主配置中有日志记录设置，因此当我运行测试时，生成的查询会记录到 STD 等。

一切都工作得很好，除了 NH 似乎只记录 SELECT 语句这一事实。我有很多已知更新和删除操作的情况，但只有 SELECT 实际出现在日志中。

重申一下，在我的配置中，我设置了：

```
 db.LogSqlInConsole = true;
  db.LogFormattedSql = true; 
```

但是只有 SELECT 语句出现在日志中？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:26:00.820

DML 语句不会记录到控制台。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T23:27:09.490

上次我尝试时，批处理时没有将 DML 语句记录到控制台（默认情况下，支持的方言是打开的）

# spring-integration - 将一个消息流连接到另一个消息流

> ID：10636671
> 
> 赞同：0
> 
> 时间：2012-05-17T13:27:20.840
> 
> 标签：spring-integration

我有两个流程，都有网关。其中一个流具有到 Web 服务的出站网关。第二个流应该连接到第一个流。问题是我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:01:16.653

一旦您的提供者启动并运行，在消费者端，您需要的是一个 Web 服务入站网关

最简单的示例（假设您已导入 ws 命名空间）：

```
<ws:inbound-gateway id="myInbound" request-channel="myRequestChannel"/> 
```

您还需要配置 web.xml 文件，以便 MessageDispatcherServlet 处理传入的 SI 特定请求。

对于应用层抽象，我还将添加一个通用网关来监听同一通道。

# java - 克隆对象也会克隆新数据，如何防止呢？

> ID：10636673
> 
> 赞同：0
> 
> 时间：2012-05-17T13:27:25.817
> 
> 标签：java

编辑：

**谢谢各位，明白了！似乎从旧对象调用了 explode() 函数，而不是新的克隆！:)**

* * *

我有一个此类对象的哈希表

```
class BodyDataObj implements Cloneable {

  World world;
  Body body;

  protected BodyDataObj clone() throws CloneNotSupportedException {
    return (BodyDataObj) super.clone();
  }

} 
```

需要时，我从哈希表中克隆所需对象

```
BodyDataObj bodyDataMaster = bdoTable.get(name);
BodyDataObj bodyData = null;

try {
  bodyData = (BodyDataObj) bodyDataMaster.clone();
} catch (CloneNotSupportedException e) { 
  // Handle error
}

bodyData.world = world;
bodyData.body = body; 
```

并将`world`and`body`对象传递给我已经克隆的`bodyData`对象。

然而，当我尝试从对象内部访问这个世界和身体对象时`BodyDataObj`，我得到一个`NullPointException`，就好像它们是克隆的空白一样。

任何想法如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:58:04.697

从评论的答案来看，答案似乎是这样的：

b.getWorldCenter() 返回空值。

# c++ - 如何在 mouseMove 期间获取 QGraphicsRectItem 的位置？

> ID：10636674
> 
> 赞同：0
> 
> 时间：2012-05-17T13:27:30.670
> 
> 标签：c++, qt

我有一个 QGraphicsRectItem 的子类。mouseMoveEvent 处理程序如下所示：

```
void BTNodeGraphicsItem::mouseMoveEvent(QGraphicsSceneMouseEvent* event)
{
    QGraphicsRectItem::mouseMoveEvent(event);
    qDebug() << rect().x() << " " << rect().y();
} 
```

该项目像我预期的那样拖动。但是 qDebug 语句输出与我拖动它时相同的坐标。矩形不应该在拖动时发生变化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:33:49.293

您正在获取相对于图形项的坐标位置。要从另一个角度获取坐标，请使用类似`mapToScene(rect())`

# iphone - 如何维护xml解析的巨大结果

> ID：10636675
> 
> 赞同：0
> 
> 时间：2012-05-17T13:27:33.653
> 
> 标签：iphone

我正在开发一个应用程序。在其中，我从 xml 解析中得到 1000 个结果。每个结果都有不同的属性。所以我为属性创建一个类，并为每个结果创建一个对象。我将结果保存在一个数组中。我的怀疑是因为这是很多结果，我可能会面临记忆问题。如果这是一个问题，我该如何处理？请告诉我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:38:05.493

在下面的讨论中很好地解释了 Objective-C 中的内存管理。

[http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7295-getters-setters-properties-newbie.html](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7295-getters-setters-properties-newbie.html)

希望这能回答你的问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:51:56.203

如果您正在解析一个非常大的文档，请使用`NSXMLParser`和委托对象来解析该文档。解析器不会创建一个巨大的对象树来表示 XML，而是在每次遇到新属性、元素等时调用您的委托。这样您可以直接构建数据对象，而不会在中间 XML 解析上浪费内存树表示。

完成此操作后，您可以在创建对象时或批量保存对象。

如果您非常注重内存，您实际上可以使用 NSXMLParser 来解析正在下载的输入流，因此您甚至不需要将完整的 XML 文本保存在内存中。（为避免中断，您还可以下载到磁盘文件，然后从文件中解析。）

# java - Spring 2.5 中的拦截器

> ID：10636683
> 
> 赞同：0
> 
> 时间：2012-05-17T13:28:02.950
> 
> 标签：java, spring-mvc

我正在尝试在 Spring 中使用拦截器，我需要在所有控制器上实现一个拦截器，以便在调用它们时处理特定的逻辑。

网页.xml：

```
<servlet>
    <servlet-name>MyApp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>MyApp</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping> 
```

应用程序上下文.xml：

```
<bean id="handlerMapping"
      class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="interceptors">
        <list>
            <ref bean="warningInterceptor"/>
        </list>
    </property>
    <property name="mappings">
        <value>*.do</value>
    </property>
</bean>

<bean id="warningInterceptor" class="security.WarningInterceptor">
    <property name="activeApp" value="${myWarning}"/>
</bean> 
```

Java 类：WarningInterceptor

```
public class WarningInterceptor extends HandlerInterceptorAdapter {

private int activeApp;
public int getActiveApp() { return activeApp; }
public void setActiveApp(int activeApp) {this.activeApp = activeApp;}

public boolean preHandle(
        HttpServletRequest request,
        HttpServletResponse response,
        Object handler) throws Exception {

    if (getActiveApp() == 0) {
        return true;
    } else {
        response.sendRedirect("/myWarning.do");
        return false;
    }
} 
```

当我启动 MyApp 时，我总是收到此错误：

> org.springframework.beans.factory.BeanCreationException：在 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中创建名称为“handlerMapping”的 bean 时出错：bean 初始化失败；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named '' is defined

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:38:03.483

SimpleUrlHandlerMapping 的 mappings 属性应该将 URL 映射到处理程序，并且您只列出了一个 URL 模式。它应该是这样的：

```
 <property name="mappings">
    <props>
       <prop key="*.do">myAppController</prop>
     </props>
   </property> 
```

编辑：这是一个更好的例子。这个使用值标签而不是道具（任何一种方式都有效）。

```
<bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
   <property name="mappings">
    <value>
       *.do=myAppController
    </value>
   </property>
</bean>

<bean id="myAppController" 
    class="com.example.MyAppController" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:56:22.260

您是否尝试过在拦截器中为 activeApp 变量添加 getter/setter 方法。（警告拦截器）

# objective-c - 如何使用不同的主键属性更新 RestKit 中的已发布对象？

> ID：10636685
> 
> 赞同：1
> 
> 时间：2012-05-17T13:28:11.013
> 
> 标签：objective-c, ios, core-data, restkit

我将对象作为 JSON 发布在服务器上，该 JSON 由一些属性和一个作为主键属性的 ID 组成。我还使用 Core Data 将所有对象保存在本地。

问题是，当我第一次创建 POST 对象时，我知道除了唯一 ID 之外的所有属性。ID 是在服务器端设置的，当我从服务器获得响应时，我的数据库中有两个对象：一个 ID 为 0，一个为真实 ID。

有没有办法让 restkit/coredata 将这两个对象视为相同，或者不将第一个对象保存在数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:01:47.923

您可以`postObject: usingBlock`像这样使用该方法并为对象加载器分配一个目标对象。

```
[[RKObjectManager sharedManager] postObject:myObject usingBlock:^(RKObjectLoader *loader) {
                loader.targetObject = myObject;
                loader.delegate = self;
                loader.objectMapping = [[RKObjectManager sharedManager].mappingProvider objectMappingForClass:[myObject class]];
} 
```

请注意，每次运行该方法时，您还必须在代码块中手动设置委托。

# sql-server - 支持 mssql_connect 和存储过程的 PHP 框架

> ID：10636691
> 
> 赞同：1
> 
> 时间：2012-05-17T13:28:16.567
> 
> 标签：sql-server, zend-framework, codeigniter, php

我目前正在网上搜索以找到一个好的 PHP 框架：

*   **SQL Server 2000**
*   可以管理一次返回超过 1 个记录集的存储过程调用（例如**mssql_connect**）
*   可以同时使用多个数据库（**例如：**主数据库和客户端数据库）

现在，我有一个简短的候选人名单：

*   代码点火器
*   小花
*   Zend 框架
*   燃料PHP
*   CakePHP
*   **其他 ？？？**

我们的目标是能够连接到主数据库以进行登录，然后连接到客户端数据库以获取特定数据。

据我所知，似乎只有 CodeIgniter 能够实现这些目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:30:55.400

我的建议是使用 Codeigniter。在 irc 聊天频道、论坛中都有一个很棒的社区，而且它拥有最好的文档，没有之一。

你完成了你的项目，当你完成时，你会寻找任何其他替代方案来做任何你想做的更好的事情。因为有些事情其他框架可以比 Codeigniter 做得更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T15:58:14.450

Kohana 是一个积极开发的优秀框架。我会推荐它，以及一个名为[Leap](https://github.com/spadefoot/kohana-orm-leap)的 ORM 模块，它支持多种不同类型的数据库（包括 MSSQL）。

# css - 使用 CSS 我怎样才能达到这个结果？

> ID：10636694
> 
> 赞同：1
> 
> 时间：2012-05-17T13:28:31.950
> 
> 标签：css

如何创建一个标题如下图所示的内容块？我曾经`5px solid #444751`做过一些测试，但是我无法将名称与行的右侧和中间对齐。在它们下面，我将放置一个图像。

![在此处输入图像描述](../Images/b4b1b3ebd4842a56c4267fe3604974f7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:43:01.727

您可以使用渐变来实现效果。HTML 是最小的：

```
<h1>BATTERIES</h1> 
```

而且你也不需要太多的 CSS：

```
h1 {
    font-family: sans-serif;
    line-height: 25px;
}
h1:before {
    width: 200px;
    height: 25px;
    display:inline-block;
    background: linear-gradient(transparent 40%, #000 40%, 
        #000 60%, transparent 60%);
    content:'';
} 
```

[这就是全部，您可以在http://dabblet.com/gist/2719686](http://dabblet.com/gist/2719686)上看到它

请记住渐变在 IE9 或更早版本中不起作用的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:33:00.480

尝试这个：

```
<div class="line"></div>Batteries

.line {
    border-top:5px solid #444751;
    float:left;
    width:200px;
    margin-top:7px;
    margin-right:5px;   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:34:45.853

将文本与条形中心对齐所需的是`vertical-align`. 看看这个[JSFiddle](http://jsfiddle.net/uxTgf/1/)。

这是我使用的 CSS

```
#bar {
    width: 150px;
    height: 5px;
    background: black;
    display:inline-block;
}
#text{
    text-transform: uppercase;
    display:inline-block;
    vertical-align: -2px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:43:43.673

尝试这个

```
<html>
        <head>
            <style>
                .Bat{
                float: left;}
                .Line{
                float: left;
                width:150px;}
                hr{
                height:5px;
                background-color:#444751;}
            </style>
        </head>
            <body>
               <div class="Line">
                  <hr>
               </div>
               <div class="Bat">
                  <b>BATTERIES</b>
               </div>
        </body>
    </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:36:49.280

A[`<fieldset>`](https://developer.mozilla.org/en/HTML/Element/fieldset)在这里可以很好地工作，特别是如果文本的宽度是动态的：

```
<fieldset class="BlackLine">
    <legend>Hello World</legend>
    <div>
        Content
    </div>
</fieldset> 
```

CSS：

```
fieldset.BlackLine {border-style:none; border-top:solid 5px black;direction:rtl;}
fieldset.BlackLine > legend, fieldset.BlackLine > div {direction:ltr;} 
```

示例：http: [//jsfiddle.net/XY24Q/](http://jsfiddle.net/XY24Q/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T13:34:34.807

将它分成两个 div，如下所示：http: [//jsfiddle.net/DigitalBiscuits/hUaht/](http://jsfiddle.net/DigitalBiscuits/hUaht/)

# dhcp - 为什么广播 DHCP Offer 和 Ack？

> ID：10636699
> 
> 赞同：14
> 
> 时间：2012-05-17T13:29:05.560
> 
> 标签：dhcp

为什么服务器不能像 DHCP Discover and Request 的源 IP 一样使用目的 IP 地址 0.0.0.0？它可以使用从 DHCP 发现和请求中获知的客户端 MAC 地址将帧定向到适当的客户端计算机。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-25T16:08:10.287

单播或广播选项在**DHCP [RFC 2131](http://www.ietf.org/rfc/rfc2131.txt)**中指定：

> 如果来自客户端的 DHCP 消息中的“giaddr”字段不为零，则服务器将任何返回消息发送到地址出现在“giaddr”中的 BOOTP 中继代理上的“DHCP 服务器”端口。如果“giaddr”字段为零且“ciaddr”字段不为零，则服务器将 DHCPOFFER 和 DHCPACK 消息单播到“ciaddr”中的地址。如果 'giaddr' 为 0 且 'ciaddr' 为 0，并且设置了广播位，则服务器将 DHCPOFFER 和 DHCPACK 消息广播到 0xffffffff。如果广播位未设置且“giaddr”为零且“ciaddr”为零，则服务器将 DHCPOFFER 和 DHCPACK 消息单播到客户端的硬件地址和“yiaddr”地址。在所有情况下，当 'giaddr' 为零时，

**ciaddr**和**giaddr**为：

> ```
> ciaddr        4  Client IP address; only filled in if client is in BOUND, RENEW or REBINDING state and can respond to ARP requests.
> giaddr        4  Relay agent IP address, used in booting via a relay agent. 
> ```

因此，DHCP 服务器根据客户端的当前状态（主要是是否已经有 IP 地址）以及消息的发送者（如果它是中继代理或只是客户端）选择广播或不广播。

![单播 DHCPOFFER](../Images/9e747c5ef47c32b93d7ee2f7429882c8.png)

在这种情况下，我的 DCHP 服务器选择单播 DHCPOFFER，因为我的机器已经有一个 IP 地址并且我的 LAN 中没有中继代理。

编辑：

并且没有人可以使用 IP 地址 0.0.0.0 作为目标地址。如[IPv4 RFC 5735](https://www.rfc-editor.org/rfc/rfc5735)中所述：

> **0.0.0.0/8** - 此块中的地址是**指**“此”网络上的源主机。 **地址 0.0.0.0/32 可用作此网络上此主机的源地址**；0.0.0.0/8 内的其他地址可用于引用此网络上的指定主机（[RFC1122]，第 3.2.1.3 节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-28T07:22:36.643

来自[RFC 2131](http://www.ietf.org/rfc/rfc2131.txt)，第 24 页：

> 通常，DHCP 服务器和 BOOTP 中继代理会尝试使用 uicast 传递将 DHCPOFFER、DHCPACK 和 DHCPNAK 消息直接传递给客户端。IP 目标地址（在 IP 报头中）设置为 DHCP 'yiaddr' 地址，链路层目标地址设置为 DHCP 'chaddr' 地址。不幸的是，某些客户端实现在配置了有效的 IP 地址之前无法接收此类单播 IP 数据报（导致死锁，在客户端配置了 IP 地址之前无法传递客户端的 IP 地址）。
> 
> 在客户端发送的任何 DHCPDISCOVER 或 DHCPREQUEST 消息中，在其协议软件配置 IP 地址之前无法接收单播 IP 数据报的客户端应该将“flags”字段中的 BROADCAST 位设置为 1。BROADCAST 位将向 DHCP 服务器和 BOOTP 中继代理提供提示，以将任何消息广播到客户端子网上的客户端。
> 
> 可以在其协议软件配置之前接收单播 IP 数据报的客户端应该将 BROADCAST 位清除为 0。BOOTP 澄清文档讨论了使用 BROADCAST 位的后果。

# android - 如何通过 Android 的 facebook api 将用户导航到 facebook 页面？

> ID：10636700
> 
> 赞同：2
> 
> 时间：2012-05-17T13:29:09.517
> 
> 标签：android, facebook, facebook-graph-api

> **可能重复：**
> [从其他应用程序启动 facebook 应用程序](https://stackoverflow.com/questions/4191492/launch-facebook-app-from-other-app)

我是 facebook api 的初学者，我必须说文档非常糟糕。现在我可以从我的应用程序发布到我的墙上并添加一些内容，但我无法在互联网上的任何地方找到如何使用我想要的页面打开 facebook。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T13:42:24.253

如果您想通过在 android 的官方 facebook 应用程序中提供 FB 页面 id 来打开特定页面，请执行以下操作：

```
try {
      //try to open page in facebook native app.
      String uri = "fb://page/" + yourFBpageId;    //Cutsom URL
      Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
      startActivity(intent);   
}catch (ActivityNotFoundException ex){
      //facebook native app isn't available, use browser.
      String uri = "http://touch.facebook.com/pages/x/" + yourFBpageId;  //Normal URL  
      Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));    
      startActivity(i); 
} 
```

[可以在此处找到](https://stackoverflow.com/a/5707825/593709)fb app 支持的完整 URL 方案。

# c++ - 单词词汇族

> ID：10636704
> 
> 赞同：1
> 
> 时间：2012-05-17T13:29:35.287
> 
> 标签：c++, algorithm

给我一组 N 个单词和一个整数 K。如果前 k 个字母和后 k 个字母完全相同，则 2 个单词属于同一组。如果它们有超过 k 个相同的字母或少于 k 个相同的字母，则这些单词不在同一组中。例如：对于 k=3。

“abcdefg”和“abczefg”在同一个组
“abcddefg”和“abcdzefg”不在同一个组（前k+1个字母相同）
“abc”和“abc”在同一个组

一个词可以在多个组中。例如（k=3）：
“abczefg”和“abcefg”组成一个组
“abczaefg”和“abcefg”组成一个组
“abczaefg”和“abczefg”不在同一个组（前k+1个字母相同)

问题要求我找到包含最大单词数的组数。

我考虑过使用 Trie（或前缀树），我认为这是解决这个问题的正确数据结构，但我不知道如何调整它们来解决这个问题，因为如果 2 个单词有超过 k 个字母的部分相同的不在同一组中使我感到困惑。我的想法的复杂度为 O(N*N*K)，考虑到 N<=10,000 和 K<=100，我认为这个想法不够快。我想向您解释我的想法，但即使对我来说也不清楚，我什至不知道它是否正确，所以我将跳过这一部分。

我的问题是，是否有一种方法可以使用更快的算法来解决这个问题，如果有这样的算法，我请你稍微解释一下。提前谢谢你，如果我没有清楚地解释问题，我很抱歉出现语法错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:42:18.510

首先将共享前 k 个字母和后 k 个字母的所有单词分组。您最大的组必须位于其中一个组中，因为开头和结尾不同的两个单词不可能出现在同一个解决方案中。

因此，在这些组中的每一个中（在它们的开头和结尾共享相同 k 个字母的单词），您需要找到一个最大的单词集，使得没有两个共享第 k+1 个字母，也不共享第 k+1 个'从最后的第一个字母。

构建一个图，其中顶点是从这些组中的一个单词的每一端（重复数据删除）到 (k+1) 的字母对，如果 a，边出现在 (a, b) 和 (c, d) 之间=c 或 b=d。

您需要找到其中没有边的子图。这个简化的问题是“最大独立子图”问题的一个实例，它是 NP 难的，因此您需要通过使用搜索来解决它，并希望给您的单词集不会太讨厌。也许这里的图表可以提供更快的解决方案，但我没有看到。

整个问题的解决方案是上述简化问题之一的最大解决方案。

希望这可以帮助！

# ruby-on-rails - 来自pdftk unicode转换结果的ruby 1.8.7中的字符转换

> ID：10636716
> 
> 赞同：1
> 
> 时间：2012-05-17T13:30:30.937
> 
> 标签：ruby-on-rails, ruby, unicode, iconv, pdftk

我正在使用 pdftk 从 pdf 文件中解析标题，其中包含各种特定于语言的字符。

我需要在其中执行此操作的这个 ruby​​ on rails 应用程序正在使用 ruby​​ 1.8.7 和 rails 2.3.14，因此任何内置于 ruby​​ 1.9 的编码解决方案现在都不是我的选择。

我需要做的例子：

如果标题包含 ü，当我使用 pdftk（命令行或使用 ruby​​ pdf-toolkit gem）阅读 pdf 内容时，“ü”将转换为`&#252;`

在我的应用程序中，我真的希望在 ü 中使用它，因为这似乎可以很好地满足我在网页和 XML 文件中的需求。

我可以使用 ruby​​ 显式转换字符

```
>> string = "&#252;"
=> "&#252;"
>> string.gsub("&#252;","ü")
=> "ü" 
```

但显然我不想一一做这件事。

我尝试过使用 Iconv 来执行此操作，但我觉得我不知道要指定什么才能将其转换为渲染字符。我想也许这只是一个 utf-8 但它似乎并没有转换为渲染字符

```
>> Iconv.iconv("latin1", "utf-8","&#252;").join
=> "&#252;" 
```

我对在这里使用什么格式来获得渲染字符的最终结果有点困惑。

那么如何使用 Iconv 或其他工具对从 pdftk 转换为这个 HTML 代码的所有字符进行这种转换呢？

或者当我首先阅读 pdf 文件时如何告诉 pdftk 这样做！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:28:33.857

好的 - 我认为这里的问题是 pdftk 返回的代码是 HTML，所以首先取消转义 HTML 是有效的路径

```
>> Iconv.iconv("utf8", "latin1", CGI.unescapeHTML(string) ).join
=> "ü" 
```

**更新：**

使用以下

```
 pdf = PDF::Toolkit.open(file)
  pdf.title = Iconv.iconv("utf8", "latin1", CGI.unescapeHTML(pdf.title)).join 
```

这似乎适用于大多数语言，但是当我将其应用于日语和中文时，它会破坏事物并且不会产生 PDF 中出现的原始内容。

**更新：**

越来越近 - 如果我只是取消转义它们并且不尝试任何 Iconv 转换，那么 pdftk 放入日文和中文标题的 html 代码似乎已经正确呈现。

```
CGI.unescapeHTML(pdf.title) 
```

这可以正确渲染。

那么......在我尝试应用其他语言所需的转换之前，如何测试 pdf.title 以提前查看这是中文还是日文（双字节？）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:46:37.867

也许是这样的：

```
string.gsub(/&#\d+;/){|x| x[/\d+/].to_i.chr} 
```

# maven - 无法从现有的 Maven 项目创建原型

> ID：10636719
> 
> 赞同：2
> 
> 时间：2012-05-17T13:30:34.900
> 
> 标签：maven, maven-3, maven-archetype

我正在尝试从现有的多模块 Maven 项目中创建一个原型。为此，我将目录更改为根目录（根 pom.xml 所在的位置）并发出“mvn archetype:create-from-project”。构建没有完成，我收到以下错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:create-from-project (default-cli) on project siaci-d: charsetName -> [Help 1] 
```

使用 -e 和 -X 标志再次运行，我可以看到以下堆栈跟踪：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:create-from-project (default-cli) on project siaci-d: charsetName
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoFailureException: charsetName
at org.apache.maven.archetype.mojos.CreateArchetypeFromProjectMojo.execute(CreateArchetypeFromProjectMojo.java:285)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 19 more 
```

我检查了 maven-archetype-plugin 文档，没有找到对 charsetName 属性的任何引用。所以，我对如何解决这个问题有点迷茫。我在 Ubuntu 机器上使用 maven 3.0.4 和 java 1.6.0_25。有什么建议吗？

知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:01:03.983

You posted this question some time ago, however this answer may help others.

I had the same problem in a project. This error happens when you have a file in your project that contains characters in a different encondig. A solution to this problem is replacing this characters — if it's not many, generate the archetype, revert the characters to the original and at last, change to the right enconding at the archetype metadata file.

Another option is to change the default enconding UTF-8 in the archetype generation, like this:

```
mvn archetype:create-from-project -Darchetype.properties=../archetype.properties 
```

For more information, follow this guides:

*   [http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html#defaultEncoding](http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html#defaultEncoding)
*   [http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-with-property-file.html](http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-with-property-file.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T17:12:48.917

我正在处理同样的错误，然后我发现是什么弄乱了原型创建...首先，我通过在 pom.xml 上插入以下属性来选择编码 ISO-8859-1：

```
<properties>
    <project.build.sourceEncoding>ISO-8859-1</project.build.sourceEncoding>
    <project.reporting.outputEncoding>${project.build.sourceEncoding}</project.reporting.outputEncoding>
    <project.resources.sourceEncoding>${project.build.sourceEncoding}</project.resources.sourceEncoding>
</properties> 
```

之后，我在 pom.xml 的构建部分插入了带有以下所有配置的原型插件：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-archetype-plugin</artifactId>
    <version>2.2</version>
    <configuration>
        <defaultEncoding>${project.build.sourceEncoding}</defaultEncoding>
        <encoding>${project.build.sourceEncoding}</encoding>
        <archetypeArtifactId>archetype-wsjpa</archetypeArtifactId>
        <archetypeGroupId>br.com.example</archetypeGroupId>
        <archetypeVersion>1.0</archetypeVersion>
        <archetypeFilteredExtentions>java,xml</archetypeFilteredExtentions>
    </configuration>
</plugin> 
```

通过这样做，您应该在自己的 pom.xml 中提供所有原型生成配置，而不是编写属性文件 (archetype.properties) 来声明此配置。

最后，我用`mvn clean install`then运行 maven`mvn archetype:create-from-project -e -X`

即便如此，您仍然可能会注意到一些编码错误，例如本文中报告的错误，即使您已更新 pom.xml，如上所示...如果您在为项目设置正确编码后仍然遇到相同的错误，尝试找出哪个项目文件仍然包含无效字符。要找到麻烦制造者文件，您应该观察 Maven 在控制台上显示的调试行，如下所示：`"[DEBUG] InputFileName:src\main\resources\META-INF\persistence.xml"`并检查哪些项目文件已写入文件夹`${basedir}\target\generated-sources\archetype\src\main\resources\archetype-resources`。在原型创建过程中发生编码错误时，上述文件夹与原始项目内容不匹配，这是因为 Maven 无法复制某些资源，因为属性指定的字符集中不包含无效或不兼容的字符。

# ruby-on-rails - 如何最好地构建可以创建或更新单个模型实例的页面

> ID：10636733
> 
> 赞同：0
> 
> 时间：2012-05-17T13:31:35.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我正在寻找有关构建以下内容的一些建议。

我想显示一个页面。可以创建或更新 3 个事件。每个事件都有一个特定的名称（打开、关闭、开始）

我希望用户能够创建 1 个或所有 3 个事件。

返回到相同的 url 后，我希望显示创建的事件以供用户更新，并且未创建的事件可用于创建。

例如。

用户访问事件/新

创建事件 - （称为打开）

关闭和启动无操作。

返回事件/新

显示事件（打开）值。要被更新。

可以新建事件关闭和开始。

你会如何构建这个？我玩弄了实现 find_or_create 方法的想法。是否应该将其放置在控制器的创建操作中，以替换 .create(params[:eg])？

非常感谢

罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:36:04.887

您可以在任何动作中执行此操作，看起来您正在尝试将`show`和`new`动作组合为单个动作。我会在一些自定义操作中处理它，然后操纵视图以显示带有指向 eidt 的链接的对象的详细信息，以防有人试图编辑对象，如果对象不存在，那么只显示创建对象的表单而不是显示详细信息和编辑链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T06:21:23.290

在您的控制器中 - EventsController：

```
class EventsController < ApplicationController

  def new
    @event = Event.new
    @events_created = Event.all # to show the events created 
```

在您看来 - events/new.html.haml：

```
- @events_created.each do |created_event|
  %p= "Event: " created_event.title

= form_for @event do |f|
  =.... # new event creation form 
```

# sql - SSRS 转换日期和分组方式

> ID：10636737
> 
> 赞同：3
> 
> 时间：2012-05-17T13:31:44.183
> 
> 标签：sql, ssrs-2008

我`CreatedDate`在我的 SQL 表中调用了一个 DateTime 类型列，并且我使用 SSRS 2008 创建了一个报告。

我在我的报告中将我的表格与这个分组`CreatedDate`。

我需要`CreatedDate`以`dd/MM/yyyy`.

如果我将此列值转换为`Convert(varchar(10),CreateDate,101)`获取格式的值`MM/dd/yyyy`并正确排序数据，

```
03/03/2012
03/05/2012
05/03/2012 
```

同样的方式如果我将列转换为`Convert(varchar(10),CreatedDate,103)`获取格式的值`dd/MM/yyyy`及其排序

```
03/03/2012
04/05/2012
05/03/2012 
```

但我需要像这样对表格进行分组

```
03/03/2012
05/03/2012
04/05/2012 
```

像这样，为此我尝试在 tablix 中手动提供排序功能，例如

```
=Format(Fields!CreatedDate.value,"dd/MM/yyyy") 
```

但它不起作用，我该如何解决这个问题....任何人都可以在这里帮助我...

我在这里使用的查询是

```
SELECT ItemName
       , COUNT(ItemName) AS Quantity
       , SUM(LineTotal) AS Amount
       , CONVERT(varchar(10), CreatedDate, 103) AS CreatedDate
FROM StudentFeesItems
WHERE (CONVERT(varchar(10), CreatedDate, 101) BETWEEN @StartDate AND @EndDate)
GROUP BY ItemName, CreatedDate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:09:21.717

如何`ROW_NUMBER() over (order by CreatedDate) as myOrder` 在你的 sql 查询中添加一个并按 myOrder 排序？

编辑：

```
=Format(Fields!date.Value,"dd/MM/yyyy") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:43:38.433

您可以在数据集上添加这两种格式的日期，然后按其中一种进行排序：

```
SELECT [YourColumns], Convert(varchar(8),CreateDate,112) SortDate,
       Convert(varchar(10),CreatedDate,103) Displaydate
FROM YourTable 
```

这样，您可以`DisplayDate`在 tablix 上使用并按`SortDate`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T14:05:28.100

不要将日期转换为字符串。将它们保留为日期并将它们排序为日期。

正如您已经体验过的那样，除非您将字符串格式化，否则您`YYYY-MM-DD`将无法获得所需的订单。如果您将日期保留为 DATETIME 数据类型，则可以按它排序、按它分组、格式化它并做你喜欢的事情。

```
DATEADD(DAY, DATEDIFF(DAY, 0, CreateDate), 0) AS roundedDate 
```

**重新编辑**

这是我在您的查询中的建议...

```
WITH
  main_query
AS
(
  SELECT
    ItemName,
    DATEADD(DAY, DATEDIFF(DAY, 0, CreatedDate), 0) AS CreatedDate,
    COUNT(ItemName) AS Quantity,
    SUM(LineTotal) AS Amount
  FROM
    StudentFeesItems
  WHERE
        CreatedDate >= @StartDate
    AND CreatedDate <  DATEADD(DAY, 1, @EndDate)
  GROUP BY
    ItemName,
    DATEADD(DAY, DATEDIFF(DAY, 0, CreatedDate), 0)
)
SELECT
  ItemName,
  Convert(varchar(10), CreatedDate, 103)    AS formattedDate,
  Quantity,
  Amount
FROM
  main_query
ORDER BY
  ItemName,
  CreatedDate 
```

注意：
- 不要在字段上调用函数然后过滤它
- 不要使用字符串操作将日期时间四舍五入到日期
- 不要按日期的字符串表示形式排序

# iphone - 在运行时对同一个按钮单击执行不同的操作（类似于 twitter 关注/取消关注）？

> ID：10636745
> 
> 赞同：0
> 
> 时间：2012-05-17T13:32:01.387
> 
> 标签：iphone, objective-c, ios, xcode

我有以下程序结构：

```
-(UITableViewCell *)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

       ...

       ...

       if(cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier] autorelease];

            ...

            ...

            if(condition)
                {   
                    do something;
                }

            else
                {

                    if(condition)
                         {  
                            unFollowButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
                            unFollowButton.frame = CGRectMake(180, 10, 120, 30);

                            unFollowButton.titleLabel.font = [UIFont systemFontOfSize:12];
                            unFollowButton.tag = indexPath.row;
                            unFollowButton.titleLabel.textColor = [UIColor blackColor];
                            [unFollowButton addTarget:self action:@selector(buttonClicked2:) forControlEvents:UIControlEventTouchUpInside];
                            NSLog(@"fCheckRowCheck Value in if Condition %@",fCheckRowCheck);
                            [unFollowButton setTitle:@"UnFollow" forState:UIControlStateNormal];
                            [cell.contentView addSubview:unFollowButton];
                            buttonValue = 0;
                            NSLog(@"buttonValue %d", buttonValue);
                        }

                    else 
                        {

                            followButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
                            followButton.frame = CGRectMake(180, 10, 120, 30);
                            followButton.titleLabel.font = [UIFont systemFontOfSize:12];
                            followButton.tag = indexPath.row;
                            followButton.titleLabel.textColor = [UIColor blackColor];
                            [followButton setTitle:@"Follow" forState:UIControlStateNormal];
                            [followButton addTarget:self action:@selector(buttonClicked1:) forControlEvents:UIControlEventTouchUpInside];
                            [cell.contentView addSubview:followButton];
                            buttonValue = 1;
                            NSLog(@"buttonValue %d", buttonValue);
                        }   
                }
        }

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [self.infos objectAtIndex:row];
    return cell;

}

- (IBAction)buttonClicked2:(UIButton *)sender
    {
       NSLog(@"BUTTON_CLICKED");

       NSIndexPath *indexPath = [folksFolksTable indexPathForCell:(UITableViewCell*)  [[sender superview]superview]];
       NSLog(@"[sender tag] is %d", [sender tag]);

       ....

       ....

       ....

       //Set up URLConnection tp send information on button click
       NSMutableString *postString = [NSMutableString stringWithString:kUnFollowURL];
    [postString appendString: [NSString stringWithFormat:@"?%@=%@", kId, [user objectForKey:@"id"] ]];
    [postString appendString: [NSString stringWithFormat:@"&%@=%@", kfId, [fId objectForKey:@"fID"] ]];

    [postString setString: [postString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
    NSLog(@"post string = %@", postString);

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:postString]];

    [request setHTTPMethod:@"POST"];

    followConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];
    NSLog(@"postconnection: %@", followConnection);

    //Get Response from server

    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: postString ]];    
    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

    NSLog(@"serverOutput = %@", serverOutput);

    //Change the button lable from unfollow to follow

    [sender setTitle:@"Follow" forState:UIControlStateNormal]; 

     if([sender tag]==indexPath.row)
        {
            textField = (UITextField*)[cell viewWithTag:[sender tag]];
            NSLog(@"txtF is %@",textField);        
            textField.hidden=NO;
        }

}

- (IBAction)buttonClicked1:(UIButton *)sender
      {

          similar to buttonClicked 2

      } 
```

我需要的是，在运行时标签更改后，按钮也应该执行相应的操作。

例如，我正在关注某人 [按钮标签取消关注]，如果我点击按钮 [按钮标签在那一刻变为关注（这完全可以发生）。现在，当我再次单击带有“关注”标签的相同按钮时，它会引发异常。

如何去做。请帮我弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T18:43:11.327

我是 iOS 新手，但是：

1.  设置一个有按钮状态的属性，或者扩展按钮（有些人不推荐）
2.  当它改变状态时，改变颜色和标签。

那不就行了。可能其他用户有更好的解决方案。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:58:50.743

编辑：解决了。我之前添加了以下代码行

[发件人 setTitle:@"Follow" forState:UIControlStateNormal];

```
 [sender addTarget:self action:@selector(buttonClicked2:) forControlEvents:UIControlEventTouchUpInside];

cause of exception was i added colon (:) twice after @selector(buttonClicked2) whereas i need only one colon. 
```

我希望这个问题也可以作为其他用户的参考。

# css - Border-Radius & Box-Shadow 渲染不正确

> ID：10636748
> 
> 赞同：2
> 
> 时间：2012-05-17T13:32:17.960
> 
> 标签：css

我正在尝试在网页上同时使用 box-shadow 和 border-radius，它显示了一个白色图像，填充了半径所在的空间。可以将其想象为当您在 Photoshop 中将带有阴影的“透明”图像保存到 jpg 或 png-8 文件时。

这是一张图片，向您展示我的意思。

（我还不能发布图片，但这里是链接） [http://i.imgur.com/jDpIH.png](http://i.imgur.com/jDpIH.png)

我用这个作为我的 CSS

```
.whole
{
width: 1000px;
margin: 0 auto;
-webkit-box-shadow: 0px 3px 5px 2px #000000;
-mox-box-shadow: 0px 3px 5px 2px #000000;
box-shadow: 0px 3px 5px 2px #000000; 
}

.top
{
height: 120px;
background-color: #1F1209;
margin-top: 50px;
-webkit-border-top-left-radius: 10px;
-webkit-border-top-right-radius: 10px;
-moz-border-radius-topleft: 10px;
-moz-border-radius-topright: 10px;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
}

.footer
{
height: 250px;
background-color: #834C24;
-webkit-border-bottom-right-radius: 10px;
-webkit-border-bottom-left-radius: 10px;
-moz-border-radius-bottomright: 10px;
-moz-border-radius-bottomleft: 10px;
border-bottom-right-radius: 10px;
border-bottom-left-radius: 10px;
} 
```

那么有谁知道我是否有办法解决这个问题？顺便说一下，这发生在 Firefox 和 IE 中。我还没有能够在其他浏览器中查看它。

我真的不想使用 Photoshopped 图像...因为 CSS3 绝对应该使用。

对此有什么想法吗？我将不胜感激任何帮助！:)

谢谢你们的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:44:11.910

给你一个小窍门

将此 css3 用作快捷方式，而不是添加 -left -right-top

```
border-radius:0px 0px 0px 0px;

<!-- [top left] [top right] [bottom right] [bottom left] --> 
```

如果你这样做会更容易。

至于盒子阴影......我不知道为什么会这样，但我使用了这段代码，它工作得很好。

```
box-shadow:0px 0px 10px black;

<!-- in case you don't know ...  [x coordinate] [y coordinate] [size of shadow] [color] --> 
```

好吧，我不知道这些代码是否可以在 IE 上运行，因为我不使用 IE 浏览器，我的电脑会突然挂起一段时间，但是......无论如何。

我重写了你的一个类 css 代码，我希望它能工作。

```
.footer
{
    height: 250px;
    background-color: #834C24;
    border-radius:10px 10px 10px 10px;
    box-shadow:0px 0px 50px black;
} 
```

而且我认为即使您不输入 -webkit- 和 -moz-，Mozilla 和 Chrome 也会读取它。我希望它也适用于 IE。

总之……就是这样。希望这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:59:26.437

您可能有与容器关联的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:51:41.203

IE9+、Firefox 4+、Chrome、Safari 5+ 和 Opera 支持border-radius 属性，因为它是CSS3 属性。语法是：

```
border-radius: 1-4 length|% / 1-4 length|%; 
```

**示例 1**

```
border-radius:2em; 
```

相当于：

```
border-top-left-radius:2em;
 border-top-right-radius:2em;
 border-bottom-right-radius:2em;
 border-bottom-left-radius:2em; 
```

**示例 2**

```
border-radius: 2em 1em 4em / 0.5em 3em; 
```

相当于：

```
border-top-left-radius: 2em 0.5em;
 border-top-right-radius: 1em 3em;
 border-bottom-right-radius: 4em 0.5em;
 border-bottom-left-radius: 1em 3em; 
```

# android - 开发一个简单的记忆游戏

> ID：10636750
> 
> 赞同：1
> 
> 时间：2012-05-17T13:32:24.677
> 
> 标签：android, logic

我对Android有点陌生，现在我正在开发一个非常简单的游戏，逻辑描述如下：用户在按下“Ready”后看到一个10位数的值`Button`。5 秒后，该值变为 ，
`* * * * * * *`用户必须在下面的文本字段（键入“数字”）中输入它。在该文本字段下有 2 个`Button`：“检查”和“给出提示”。检查`Button`将用户值与原始值进行比较，并`TextView`根据结果（“正确”/“不正确”）更改 a。提示`Button`应在原始值中显示 3 个随机数字。

我对那个小应用程序有一些疑问：

1.  我不确定我必须使用哪种类型向用户显示原始值： a `TextView`、文本字段或其他内容？
2.  在用户按下提示的情况下，如何强制应用显示原始值的 3 个随机数字`Button`？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:13:52.317

> 1）。我不确定必须使用哪种类型来向用户显示原始值：TextView、文本字段还是其他？

对于这个 TextView 就可以了。

> 2）。在用户按下提示按钮的情况下，如何强制应用显示原始值的 3 个随机数字？

希望您使用**int**存储 10 位值（原始值）

制作一个大小为 10 的 int 数组

```
int[] digits = new int[10]; 
```

使用 for 循环将所有 10 位数字与 10 位数字分开。

```
int number = 1234567891
for(int i = 0; i < 10; i++){
  digits[i] = number % 2;
  number = number / 10;
} 
```

这将为您提供 10 个 int 值的数组

创建 java.util.Random 类的对象并从 0-9 中获取随机值

```
Random r = new Random();
int pos1 = r.nextInt(9); 
```

> **nextInt(int n)**返回半开范围 [0, n) 中均匀分布的伪随机 int。

这些值是您将从数组中检索数字的位置所以这将为您提供 0 到 9 之间的随机位置

只需确保每次从 Random 生成随机值时，它不应等于先前生成的值，例如，如果您为第二个数字生成随机位置，则应检查它是否应等于第一个

您可以在 TextView 中显示所有 3 位数字（从 3 个随机生成的位置获取）作为**提示** 希望这能解决您的问题

**编辑了 Textview 的 Part** Set 可见性到 View.GONE 类似于这个私有 TextView tv 的东西；

```
tv = (TextView)findViewById(R.id.textView01);
tv.setVisibility(View.GONE);

Button btn = (Button)findViewById(R.id.button01);
btn.setOnClickListener(new OnClickListener(){
   public void onClick(View view){
      tv.setVisibility(View.VISIBLE);
   }
}); 
```

# java - android app db.execSQL - 创建两个数据库 sqlite

> ID：10636752
> 
> 赞同：0
> 
> 时间：2012-05-17T13:32:47.250
> 
> 标签：java, android, database, sqlite

我正在尝试设置两个数据库。午餐后模拟器，并尝试输入数据，我试图找到这个错误的确切原因，但没有成功。

我收到一个错误：

> 05-17 16:23:06.410：E/AndroidRuntime(311)：android.database.sqlite.SQLiteException：靠近“NULLbaby_age_month”：语法错误：创建表设置（_id INTEGER PRIMARY KEY AUTOINCREMENT，uri_baby TEXT NOT NULL，baby_name TEXT NOT NULL, baby_gender TEXT NOT NULL, baby_age_year TEXT NOT NULLbaby_age_month TEXT NOT NULLbaby_age_day TEXT NOT NULL);

数据库代码是：

```
package com.tamar.efrat;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DatBas {

public static final String KEY_ROWID = "_id";
public static final String KEY_SHOURS = "start_hour";
public static final String KEY_SMINUTE = "start_minute";
public static final String KEY_SDATE = "start_date";
public static final String KEY_AMOUNT = "amount";
public static final String KEY_SIDE = "side";
public static final String KEY_KIND = "kind";

public static final String KEY_ROW_BABY_ID = "_id";
public static final String KEY_BABY_IMAGE_PATH = "uri_baby";
public static final String KEY_BABY_NAME = "baby_name";
public static final String KEY_BABY_GENDER = "baby_gender";
public static final String KEY_BABY_BORN_DATE_YEAR = "baby_age_year";
public static final String KEY_BABY_BORN_DATE_MONTH = "baby_age_month";
public static final String KEY_BABY_BORN_DATE_DAY = "baby_age_day";

private static final String DATABASE_NAME = "TamatDB";
private static final String DATABASE_TABLE = "stop_watch_records";
private static final String DATABASE_TABLE_SETTINGS = "settings";

private static final int DATABASE_VERSION = 20;

private TamarDatabase thdb;
private static Context tcontext;
private SQLiteDatabase tdb;

private static class TamarDatabase extends SQLiteOpenHelper {

    public TamarDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String ctData = "CREATE TABLE  " + DATABASE_TABLE + " ( "
                + KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_SHOURS + " TEXT NOT NULL, " + KEY_SMINUTE
                + " TEXT NOT NULL, " + KEY_SDATE + " TEXT NOT NULL, "
                + KEY_AMOUNT + " TEXT NOT NULL, " + KEY_SIDE
                + " TEXT NOT NULL, " + KEY_KIND + " TEXT NOT NULL );";
        db.execSQL(ctData);

        String ctSettings = "CREATE TABLE " + DATABASE_TABLE_SETTINGS
                + " ( " + KEY_ROW_BABY_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_BABY_IMAGE_PATH + " TEXT NOT NULL, " + KEY_BABY_NAME
                + " TEXT NOT NULL, " + KEY_BABY_GENDER + " TEXT NOT NULL, "
                + KEY_BABY_BORN_DATE_YEAR + " TEXT NOT NULL"
                + KEY_BABY_BORN_DATE_MONTH + " TEXT NOT NULL"
                + KEY_BABY_BORN_DATE_DAY + " TEXT NOT NULL);";
        db.execSQL(ctSettings);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
        onCreate(db);
    }
}

public DatBas(Context c) {
    tcontext = c;
}

public DatBas open() throws SQLiteException {
    thdb = new TamarDatabase(tcontext);
    tdb = thdb.getWritableDatabase();
    return this;
}

public void close() {
    thdb.close();
}

public long createEntry(String sh, String sm, String sd, String at,
        String tside, String tkind) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_SHOURS, sh);
    cv.put(KEY_SMINUTE, sm);
    cv.put(KEY_SDATE, sd);
    cv.put(KEY_AMOUNT, at);
    cv.put(KEY_SIDE, tside);

    return tdb.insert(DATABASE_TABLE, null, cv);
}

public long createEntrySettings(String bbdy, String bbdm, String bbdd,
        String pt, String bg, String bfName) {
    ContentValues cv2 = new ContentValues();
    cv2.put(KEY_BABY_IMAGE_PATH, pt);
    cv2.put(KEY_BABY_NAME, bfName);
    cv2.put(KEY_BABY_GENDER, bg);
    cv2.put(KEY_BABY_BORN_DATE_YEAR, bbdy);
    cv2.put(KEY_BABY_BORN_DATE_MONTH, bbdm);
    cv2.put(KEY_BABY_BORN_DATE_DAY, bbdd);

    return tdb.insert(DATABASE_TABLE_SETTINGS, null, cv2);
}

public String getData() {
    String[] columns = new String[] { KEY_ROWID, KEY_SHOURS, KEY_SMINUTE,
            KEY_SDATE, KEY_AMOUNT, KEY_SIDE, KEY_KIND };
    Cursor c = tdb.query(DATABASE_TABLE, columns, null, null, null, null,
            null);
    String results = "";

    int iRaw = c.getColumnIndex(KEY_ROWID);
    int iShours = c.getColumnIndex(KEY_SHOURS);
    int iSminute = c.getColumnIndex(KEY_SMINUTE);
    int iDate = c.getColumnIndex(KEY_SDATE);
    int iAmount = c.getColumnIndex(KEY_AMOUNT);
    int iSide = c.getColumnIndex(KEY_SIDE);
    int iKind = c.getColumnIndex(KEY_KIND);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        results = results + "the id is " + c.getString(iRaw)
                + " the sart hour is " + " " + c.getString(iShours)
                + " the start minute is " + " " + c.getString(iSminute)
                + " the start date is " + " " + c.getString(iDate)
                + " the amount is " + " " + c.getString(iAmount)
                + " the side is " + " " + c.getString(iSide)
                + " the kind is " + " " + c.getString(iKind) + "\n";
    }
    return results;
}

public String getDataSettings() {
    String[] columns = new String[] { KEY_ROW_BABY_ID, KEY_BABY_IMAGE_PATH,
            KEY_BABY_NAME, KEY_BABY_GENDER, KEY_BABY_BORN_DATE_YEAR,
            KEY_BABY_BORN_DATE_MONTH, KEY_BABY_BORN_DATE_DAY };
    Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
            null, null, null);
    String results = "";

    int iRawBabyId = c.getColumnIndex(KEY_ROW_BABY_ID);
    int iBIPath = c.getColumnIndex(KEY_BABY_IMAGE_PATH);
    int iBName = c.getColumnIndex(KEY_BABY_NAME);
    int iGender = c.getColumnIndex(KEY_BABY_GENDER);
    int iBBDateYear = c.getColumnIndex(KEY_BABY_BORN_DATE_YEAR);
    int iBBDateMonth = c.getColumnIndex(KEY_BABY_BORN_DATE_MONTH);
    int iBBDateDay = c.getColumnIndex(KEY_BABY_BORN_DATE_DAY);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        results = results + " the kind is " + " " + c.getString(iRawBabyId)
                + " the kind is " + " " + c.getString(iBIPath)
                + " the kind is " + " " + c.getString(iBName)
                + " the kind is " + " " + c.getString(iGender)
                + " the kind is " + " " + c.getString(iBBDateYear)
                + " the kind is " + " " + c.getString(iBBDateMonth)
                + " the kind is " + " " + c.getString(iBBDateDay) + "\n";
    }
    return results;
}

public DatBas delete() {
    tdb.delete(DATABASE_TABLE, null, null);
    tdb.delete(DATABASE_TABLE_SETTINGS, null, null);
    return null;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:34:35.150

忘记添加`,`查询...

`TEXT NOT NULL,baby_age_month`

**和**

`TEXT NOT NULL,baby_age_day`

```
CREATE TABLE settings ( _id INTEGER PRIMARY KEY AUTOINCREMENT, uri_baby TEXT NOT NULL, baby_name TEXT NOT NULL, baby_gender TEXT NOT NULL, baby_age_year TEXT NOT NULL,baby_age_month TEXT NOT NULL,baby_age_day TEXT NOT NULL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:37:03.647

有小错误：忘记（**，**）分隔符

```
CREATE TABLE settings ( _id INTEGER PRIMARY KEY AUTOINCREMENT, uri_baby TEXT NOT NULL, 
baby_name TEXT NOT NULL, baby_gender TEXT NOT NULL, baby_age_year TEXT NOT 
NULL, baby_age_month TEXT NOT NULL,baby_age_day TEXT NOT NULL); 
```

# c - sqlite3 库未定义引用错误

> ID：10636753
> 
> 赞同：0
> 
> 时间：2012-05-17T13:32:49.317
> 
> 标签：c, string, gcc, sqlite

我正在使用 sqlite3 为我的程序在 C 中创建一个单词列表搜索器，但我遇到了[这些错误](http://paste.kde.org/480818/)。
我尝试了我所知道的一切，但没有解决。我想问题出在我的加入功能中，但我不确定。

代码 ：

```
bool *gb_wordlist_add_to_list (gbwordlist *word_list,char *str)
{
int sql_error;
char *error_massage;
if (gb_wordlist_in_list (word_list,str))
    {
    sql_error = sqlite3_execute(word_list->database, gb_wordlist_join(ADD_TO_TABLE_COMMAND"\'",str,"\';"),
                                NULL ,NULL, &error_massage);    
    if( sql_error!=SQLITE_OK )
    {
        fprintf(stderr, "SQL error: %s\n", error_massage);
        sqlite3_free(error_massage);
        return 0;
    }

    }
else
    return 0;

}

char *gb_wordlist_join (char *s1,char *s2,char *s3){
char *s;
s = malloc(strlen(s1) + strlen(s2) + strlen(s3) + 1);
if(s)
{
    strcpy(s,s1);
    strcat(s,s2);
    strcat(s,s3);
}
return s;
} 
```

错误：

```
gb-sql.o: In function `gb_wordlist_remove_from_list':
/home/reza/Project/GB/Search algorithm/Source/gb-search/src/gb-sql.c:104: undefined reference to `sqlite3_execute' 
```

我的完整代码也在[这里](http://paste.kde.org/480824/)。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:58:24.293

您获得未定义引用的原因是`sqlite3_execute`库中没有这样的功能。您可能打算使用`sqlite3_exec`（在代码的某些部分中使用了哪些使用）。
旁注：

1.  该函数`gb_wordlist_callback`正在返回`int`，但已声明为 return `int*`。您应该将返回类型更改为`int`以匹配要传递给的预期参数`sqlite3_exec`（修改 from 之后`sqlite3_execute`）
2.  传递给`sqlite3_exec`（修改 from 之后`sqlite3_execute`）的第四个参数预计应该是`void*`这样`existance``&existance`
3.  您有很多函数声明的返回类型与函数返回的实际返回类型不匹配。
4.  使用编译器选项编译代码并`-Wall -Wextra`修复所有警告。这是一个很好的做法。

希望这可以帮助！

# java - 如何确保小数点分隔符始终为“。”

> ID：10636754
> 
> 赞同：4
> 
> 时间：2012-05-17T13:32:52.477
> 
> 标签：java, bigdecimal, numberformatexception

在波兰地区设置小数分隔符是`,`. 在英语中是`.`。也许在其他语言中还有其他分隔符。（在那儿？）。

我想`BigDecimal`在读取输入文件时使用 's String 构造函数。在我的文件中，我想`.`用作小数分隔符。

`NumberFormatException`如果环境的小数分隔符不是，我如何确保我不会得到`.`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T13:34:26.083

构造`BigDecimal`函数 - 像`Double.parseDouble`etc -*总是*使用 '.' 作为小数分隔符。它根本不使用当前的文化，也没有任何方法可以指定数字格式。

（诚​​然，如果有明确的记录，那就太好了……）

# google-app-engine - Google App Engine - Datastore 管理员的链接给出错误：未找到

> ID：10636756
> 
> 赞同：5
> 
> 时间：2012-05-17T13:33:00.823
> 
> 标签：google-app-engine

在 Google App Engine 中，当我单击`Datastore Admin`某个应用程序时，会出现这样的错误（其中 APPID 是我的应用程序 ID）：

> 错误：未找到
> 
> 在此服务器上找不到请求的 URL /_ah/login_required?continue=https://ah-builtin-python-bundle-dot-latest-dot-APPID.appspot.com/_ah/datastore_admin/?app_id=s~APPID .

谷歌搜索没有发现任何有用的东西。有没有其他人遇到过这个问题或知道潜在的解决方案？

# ruby - 在类级别存储 eventmachine websocket 连接是否安全？

> ID：10636767
> 
> 赞同：1
> 
> 时间：2012-05-17T13:33:27.033
> 
> 标签：ruby, websocket, eventmachine, em-websocket

我正在编写一个聊天服务器应用程序，用户可以在其中与他的一位朋友交换消息。当用户连接时，我将他的连接存储在类变量哈希中：

`@@connections[:user_id] = conn`

当有人向用户发送消息时，我会在哈希上查找他的连接并通过它发送消息。有时，客户端的连接会直接断开，并且不会调用 onclose 回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:05:04.797

这很好用，这也是我开始编写 Web IRC 客户端时所做的，但问题是您将连接的用户耦合到单个 ruby​​ 进程。如果您想启动第二个 em 反应器，则该第二个进程将不会共享相同的类变量。您可以通过使用 haproxy 在不同进程之间拆分用户来解决此问题，但需要注意这一点。

# c++ - getenv 是否缓存结果？

> ID：10636768
> 
> 赞同：3
> 
> 时间：2012-05-17T13:33:27.223
> 
> 标签：c++, optimization, environment-variables

我的代码中有几个调用`getenv`（调用了很多次），所以我看到了优化的潜力。我的问题是，是否`getenv`以某种方式在内部缓存结果，还是在每次调用时查询环境变量？

我已经分析了代码，`getenv`不是瓶颈，但如果它更有效，我仍然想更改它。

作为一个附带问题，可以在程序运行时更改环境变量吗？我没有这样做，所以在我的情况下缓存结果是安全的，这只是好奇。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T13:38:42.760

环境变量通常存在于给定进程的内存中，因此没有什么可以缓存在那里，它们随时可用。

至于更新，正在运行的进程的任何组件都可以调用`putenv`来更新环境，如果您希望发生这种情况，则不应长时间缓存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:44:21.567

我怀疑它会缓存结果，环境变量可能会因调用而异。您可以自己实现该缓存：

```
#include <map>
#include <iostream>
#include <string>
#include <stdexcept>
#include <cstdlib>

class EnvCache {
public:
    const std::string &get_env(const std::string &key) {
        auto it = cache_entries.find(key);
        if(it == cache_entries.end()) {
            const char *ptr = getenv(key.c_str());
            if(!ptr)
                throw std::runtime_error("Env var not found");
            it = cache_entries.insert({key, ptr}).first;
        }
        return it->second;
    }

    void clear() {
        cache_entries.clear();
    }
private:
    std::map<std::string, std::string> cache_entries;
};

int main() {
    EnvCache cache;
    std::cout << cache.get_env("PATH") << std::endl;
} 
```

如果您修改环境变量，您可以使缓存条目无效。您也可以直接映射到`const char*`，但这取决于您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:49:02.063

进程从创建新进程的进程继承环境。这是保存在内存中的。

实际上，在 C 和 C++ 中，您可以定义`main`一个包含环境的额外参数 - 请参阅[http://www.gnu.org/software/libc/manual/html_node/Program-Arguments.html#Program-Arguments](http://www.gnu.org/software/libc/manual/html_node/Program-Arguments.html#Program-Arguments)

此外，您可以使用`extern char **environ;`来访问包含环境的数组。（这是空终止的）

因此，您不需要缓存。环境变量作为数组保存在内存中。

# iphone - NSValueTransformer，将 NULL 插入核心数据

> ID：10636771
> 
> 赞同：1
> 
> 时间：2012-05-17T13:33:41.073
> 
> 标签：iphone, ios, cocoa-touch, ipad, core-data

我遇到了 NSValueTransformer 的问题，而不是转换值（NSString），而是将 NULL 放入属性可转换的数据库中。我正在使用苹果的例子，这和其他人的例子一样，我只是不能让它在一个简单的层面上工作。我还在transformValue 和reverseTransformedValue 处设置了断点，但它们永远不会被击中。

我的自定义课程

```
 + (void)registerValueTransformer {
      [NSValueTransformer setValueTransformer:[[[self alloc] init] autorelease] forName:@"myTransformerTest"];
  }

  #pragma mark -
  #pragma mark NSValueTransformer implementation

  + (BOOL)allowsReverseTransformation {
      return YES;
  }

  + (Class)transformedValueClass {
      return [NSString class];
  }

  - (id)transformedValue:(id)value {
      return @"Test in";
  }

  - (id)reverseTransformedValue:(id)value {
      return @"Test Out";
  } 
```

这在我的应用程序委托中

```
 +(void) initialize 
  {
      [super initialize];

      [transformerTest registerValueTransformer];
  } 
```

然后在核心数据中，我使用名称“myTransformerTest”使我的属性可转换。根据苹果文档，应该是这样。

# ios - 在屏幕被点击的地方画一条垂直线

> ID：10636773
> 
> 赞同：4
> 
> 时间：2012-05-17T13:33:51.903
> 
> 标签：ios, uiview, tap

我想在点击屏幕的地方画一条垂直线。因为平均手指宽于 1 像素宽，所以我想“分步”执行此操作。所以基本上，这条线只能每25px绘制一次。我想找出我可以画一条线的最近位置。

例如，如果手指从我的上视图左侧轻敲 30 像素，我想从视图左侧画一条 25 像素的垂直线。如果从左侧点击屏幕 40 像素，我希望从左侧绘制 50 像素的线。（所以每 25 个像素只能有一条线，我想画最近的一条。

知道我该怎么做吗？

画线很简单：

```
UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(100.0, 0.0, 1, 320.0)];
lineView.backgroundColor = [UIColor whiteColor];
[parentView addSubview:lineView]; 
```

但我不知道如何找到用户点击屏幕的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T20:36:14.093

要选择与 25 点边界对齐的最近垂直线，请使用它来计算正确的 x 值：

```
CGFloat   spacing = 25.0f;
NSInteger lineNumber = (NSInteger)((touchPoint.x + (spacing / 2.0f)) / spacing);
CGFloat   snapX = spacing * lineNumber; 
```

以下是上面代码中发生的情况：

1.  将一半的间距值添加到触摸点上 - 这是因为下一步中的“捕捉”过程将始终找到*前*一行，因此通过添加一半的间距值，我们确保它将“捕捉”到*最近的*行。
2.  通过除以间距并将值转换为整数来计算行号。这会截断结果的小数部分，因此我们现在有了整数行号（0、1、2、3 等）。
3.  乘以原始间距，得到您要绘制的线的实际 x 值（0、25、50、75 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T16:16:10.217

您可以使用 ssteinberg 代码：

```
 UITouch *touch = [touches anyObject];
  CGPoint touchPoint = [touch locationInView:self]; 
```

或将 UITapGestureRecognizer 添加到您的视图中，这可能更容易：

```
UITapGestureRecognizer* tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[yourParentView addGestureRecognizer:tapRecognizer];
[tapRecognizer release]; 
```

...

```
- (IBAction)handleTap:(UITapGestureRecognizer *)recognizer {
    CGPoint touchPoint = [recognizer locationInView:self.view]; 
```

...

此外，每隔 25px 画一条线，添加如下内容：

```
 CGFloat padding = 25.0;
  NSInteger xPosition = round(touchPoint.x / padding) * padding;
  [self drawLineAt:xPosition]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T14:08:49.280

创建一个覆盖整个屏幕（状态栏除外）的透明自定义 UIView 并覆盖其`(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event`.
您可以通过以下方式获得接触点：

```
 UITouch *touch = [touches anyObject];
  CGPoint touchPoint = [touch locationInView:self]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:06:39.730

如果您觉得合适，请参考此：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

{

```
if (lineView) {
    [lineView removeFromSuperview];

    NSSet *allTouchesSet = [event allTouches]; 
    NSArray *allTouches = [NSArray arrayWithArray:[allTouchesSet allObjects]];   
    int count = [allTouches count];

    if (count  == 1) {

        UITouch *touch = [[event allTouches] anyObject];
        tapPoint = [touch locationInView:self];
        NSLog(@"tapPoint: %@",NSStringFromCGPoint(tapPoint));

        UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(tapPoint.x, 0.0, 1, 320.0)];
        lineView.backgroundColor = [UIColor whiteColor];
        [parentView addSubview:lineView];

    }
} 
```

}

# java - 如何在休眠状态下从数据库中的字符串 FQN 实例化一个类？

> ID：10636774
> 
> 赞同：1
> 
> 时间：2012-05-17T13:33:54.917
> 
> 标签：java, hibernate, jpa

我正在尝试将旧版应用程序转换为休眠状态。

我有一个具有字段的实体，应根据数据库中的完全限定名称字符串将其实例化为对象实例。

考虑下面的示例 - 如果我`somePackageName.FirstClass`在数据库中有该`someObject`字段应该是`FirstClass`.

我想我可以使用属性访问并持久化/检索一个字符串，但这对我来说看起来不是很优雅。

我不能使用`@PostLoad`等-我正在使用纯休眠和spring（不是JPA）-这些注释被忽略了。

例如，我知道在 MyBatis 中可以为字段注册一个自定义处理程序。在 Hibernate 中会有类似的东西吗？

我是hibernate的新手，所以我不太确定选项是什么。

```
@Entity
class SomePersistentClass{
   private SomeInterface someObject; 

} 
```

* * *

```
class FirstClass implements SomeInterface{
} 
```

* * *

```
class SecondClass implements SomeInterface{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:49:08.637

只需启用适当的 Hibernate 事件侦听器，您就可以使用 JPA 功能，例如 @PostLoad 等回调。有关详细信息，请查看 Hibernate EntityManager 指南。

但这一个更容易。这就是 Hibernate 中 Type 的作用。首先，您必须编写 org.hibernate.type.Type 或 org.hibernate.usertype.UserType 的实现，并在处理转换的 @Type( type=... ) 中指定它（大量关于编写的网络资源自定义休眠类型）。然后用 @Type( type="your.custom.TypeImpl" ) 注释你的 'someObject' 属性

# javascript - jQuery日期排序

> ID：10636779
> 
> 赞同：10
> 
> 时间：2012-05-17T13:34:05.363
> 
> 标签：javascript, jquery, datetime, sorting

> **可能重复：**
> [通过将字符串转换为日期格式的 Javascript 日期排序](https://stackoverflow.com/questions/4365116/javascript-date-sorting-by-convert-the-string-in-to-date-format)

我不擅长 jquery，所以我想知道是否有一种方法或插件可以用来对日期 div 进行排序。我有 YYYY:MM:DD HH:MM:SS 格式的日期。我在 div 中显示日期，如下所示。Divs 是无序的格式，我想先按最新日期对它们进行排序。

```
<div id="dateDiv">2012-04-15 10:25:45</div>
<div id="dateDiv">2012-04-10 19:41:08</div>
<div id="dateDiv">2012-04-20 07:00:10</div>
<div id="dateDiv">2012-04-12 16:45:50</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T13:51:45.710

我对插件不太了解......虽然如果你想要一个没有插件的轻量级方法，你可以试试这个：

html:

```
<div id="D">
    <div class="dateDiv">2012-04-15 10:25:45</div>
    <div class="dateDiv">2012-04-10 19:41:08</div>
    <div class="dateDiv">2012-04-20 07:00:10</div>
    <div class="dateDiv">2012-04-12 16:45:50</div>
</div> 
```

对于 js：

```
var elems = $.makeArray($(".dateDiv"));
elems.sort(function(a, b) {
    return new Date( $(a).text() ) < new Date( $(b).text() );
});
$("#D").html(elems); 
```

**更新**：
感谢 CMS 回答有关解析日期的问题：[为什么 Date.parse 给出不正确的结果？](https://stackoverflow.com/questions/2587345/javascript-date-parse)

```
function parseDate(input) {
  var parts = input.match(/(\d+)/g);
  // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
  return new Date(parts[0], parts[1]-1, parts[2], parts[3], parts[4], parts[5]); //     months are 0-based
}

var elems = $.makeArray($(".dateDiv"));
elems.sort(function(a, b) {
    console.log( parseDate( $(a).text() ) );
    return parseDate( $(a).text() ) < parseDate( $(b).text() );
});
$("#D").html(elems);​ 
```

现在，不要告诉我这不起作用......呵呵

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T13:39:41.033

您可以将[date.js](http://datejs.com)库与[此](http://james.padolsey.com/javascript/sorting-elements-with-jquery/)排序器功能结合使用来执行此操作：

```
$('#dateDiv').sortElements(function(a, b){
    return Date.parse($(a).text()) > Date.parse($(b).text()) ? 1 : -1;
}); 
```

[原始 repo 尚未维护，但它的](http://github.com/datejs/Datejs)更新分支似乎正在进行中。

# .net - 导航缓存模式。页面被缓存一瞬间，然后更新

> ID：10636788
> 
> 赞同：1
> 
> 时间：2012-05-17T13:34:42.103
> 
> 标签：.net, silverlight, windows-8

当设置 NavigationCacheMode="Required" 我得到一个缓存页面，但只有很短的时间（0,5 秒），然后页面被更新。

在我后面的代码中，我收集数据并填充网格，但我假设当页面被缓存时，后面的代码不会被执行。

我需要设置一个标志吗？就像如果（缓存）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T20:56:47.033

无论您的页面是否来自缓存，都会调用 OnNavigatedTo 方法。您需要检测数据是否已填充并采取相应措施。

我知道有点令人沮丧，但是无论是否缓存，都有有效的用例需要运行。

# php - jQuery验证？

> ID：10636792
> 
> 赞同：0
> 
> 时间：2012-05-17T13:35:12.497
> 
> 标签：php, jquery, jquery-plugins

该插件适用于所有浏览器的所有其他页面。在此页面插件中仅在 IE9 中有效，而在 FF、Chrome 中无效。在 FF 中，Chrome 表单提交时出现错误。

我应该发送我的 html...我包含我的 jquery 验证但仍然无法正常工作？

```
<script src="../inc/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>
<script src="../inc/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script> 
```

如果页面被加载警报正常工作......那么我应该点击按钮那里也没有工作验证..但是文件应该退出......

```
 <script type="text/javascript">
$(document).ready(function(){
alert("test");
    // binds form submission and fields to the validation engine
    $("#form_page").validationEngine(); 
});
</script> 
```

我也发送html

```
<form name="form_page" id="form_page" enctype="multipart/form-data" method="post" action="/1MP1/ap/manufacturer_edit.php">
    <td>
                                                <div class="error_box">
                                                <div class="error_msg"> 
                                                    <img src="images/remove.png" alt=""/>                                                   
                                                </div>
                                            </div>  

      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr height="50px">
          <td width="29%" style="border-bottom:1px solid #e9eaeb; border-top:1px solid #e9eaeb;" align="right"><span class="addedittitles">Manufacturer Name</span></td>
          <td width="71%" style="border-bottom:1px solid #e9eaeb; border-top:1px solid #e9eaeb;"><span style="border-bottom:1px solid #e9eaeb;"><span class="faq_colomn_right">
            <input name="mfgName" type="text" id="mfgName" class="validate[required,maxSize[250]]" value="" maxlength="250" style="width:85%; border:1px solid #cdcdcf; height:22px;"/>
          </span>         
          </span></td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e9eaeb; margin-top:10px; margin-bottom:10px;" align="right"><span class="addedittitles" style="margin-top:10px;">Description</span></td>
          <td style="border-bottom:1px solid #e9eaeb; "><span class="faq_colomn_right">
            <textarea name="mfgDesc" id="mfgDesc" class="validate[required]" cols="35" style="width:572px; order:1px solid #cdcdcf; height: 200px;">                                    </textarea>
          </span></td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e9eaeb; margin-top:10px; margin-bottom:10px;" align="right"><span class="addedittitles">Website Url</span></td>
          <td style="border-bottom:1px solid #e9eaeb; "><span class="faq_colomn_right">
            <input class="validate[required,maxSize[250]]" name="mfgWebsiteURL" id="mfgWebsiteURL" type="text" value="" maxlength="250" style="width:85%; border:1px solid #cdcdcf; height:22px;"/>
          </span></td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e9eaeb; margin-top:10px; margin-bottom:10px;" align="right"><span class="addedittitles">Contact Name</span></td>
          <td style="border-bottom:1px solid #e9eaeb; "><span class="faq_colomn_right">
            <input class="validate[required,maxSize[250]]" name="mfgContactName" id="mfgContactName" type="text" value="" maxlength="250" style="width:85%; border:1px solid #cdcdcf; height:22px;"/>
          </span></td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e9eaeb; margin-top:10px; margin-bottom:10px;" align="right"><span class="addedittitles">Phone No</span></td>
          <td style="border-bottom:1px solid #e9eaeb; "><span class="faq_colomn_right">
            <input class="validate[required,maxSize[250],custom[phone]]" name="mfgContactPhone"  id="mfgContactPhone" type="text" value="" maxlength="100" style="width:85%; border:1px solid #cdcdcf; height:22px;"/>
          </span></td>
        </tr>
        <tr>
          <td style="border-bottom:1px solid #e9eaeb; margin-top:10px; margin-bottom:10px;" align="right"><div class="addedittitles">Email</div></td>
          <td style="border-bottom:1px solid #e9eaeb; "><span class="faq_colomn_right">
            <input class="validate[required,maxSize[250],custom[email]]" name="mfgContactEmail"  id="mfgContactEmail" type="text" value="" maxlength="250" style="width:85%; border:1px solid #cdcdcf; height:22px;"/>
          </span></td>
        </tr>
<tr align="right">
    <td height="40px;" align="right" colspan="4"><input name="save" type="submit" id="save" value="Save" class="button1" />                                                     
<input name="id" type="hidden" id="id" value="new">
</td>
</tr>  </table>
       </td>
       </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:40:13.643

有一个很棒的验证插件，称为 jquery 验证，请参见[此处](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。

请记住，您应该在包含其他插件之前包含 jQuery。

# cordova - PhoneGap：如果警报首先触发，Email Composer 会失败 (iOS)

> ID：10636795
> 
> 赞同：1
> 
> 时间：2012-05-17T13:35:23.933
> 
> 标签：cordova

我发现如果我通过帮助按钮或自动检查触发警报，我的电子邮件编写器功能将无法启动。但是，如果我在不启动任何警报的情况下浏览该应用程序，则电子邮件将正常工作。在我看来，这更像是一个 JS 问题，而不是插件的具体问题，但我对此很陌生。关于我的问题可能是什么的任何想法？我的意思是电子邮件问题，而不是我可能在下面遇到的十几个其他问题：）谢谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:56:42.587

答案最终是我覆盖了所有内容，需要使用 jquery 并将其集中在 body 标记内。

```
$('body').html("");
$('body').append("foo"); ... 
```

# .net - 在现有数据库中使用数据创建新表的最佳方法是什么？

> ID：10636798
> 
> 赞同：1
> 
> 时间：2012-05-17T13:35:41.780
> 
> 标签：.net, entity-framework, ef-code-first, ef-database-first, ef-model-first

我即将开始一个新项目，该项目将以现有数据库为目标，其中包含一些现有的数据表。作为我项目的一部分，我将创建一些新表并与现有表建立关系？在这种情况下哪种方法更好。我相信代码优先将是一个问题，因为我不想每次更改表结构（对于我的新表）时都丢失我的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:41:55.287

模型优先将是更简单的解决方案。您只需从数据库创建一个模型，然后在添加新实体后从模型更新数据库。

您也可以通过代码优先获得相同的结果，但需要做一些额外的工作。您将需要使用 EF 迁移将新表添加到数据库中。[您可以在此处](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)和[此处](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)阅读有关 EF 迁移的更多信息。

# asp.net - ASP.NET 更改 SOAP 主体

> ID：10636799
> 
> 赞同：1
> 
> 时间：2012-05-17T13:35:42.777
> 
> 标签：asp.net, web-services, asmx

我在 .NET 中有一个 Web 服务，它以数组作为输入。服务的请求被视为

```
<soap:Body>
<DisplayNames xmlns="http://tempuri.org/">
  <Names>
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
  </Names>
</DisplayNames> 
```

是否可以删除父标签（NAMES）并提出如下请求？

```
<soap:Body>
<DisplayNames xmlns="http://tempuri.org/">
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
</DisplayNames> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:59:33.473

如果您的意思是改变 Web 服务的工作方式，以便客户端不必以这种方式发送它，而不是使用现有工具。它与如何将 XML 映射回代码函数有关。

我不确切知道您的函数在代码隐藏中的样子，但从 XML 我可以假设它看起来像这样（猜测返回值）

```
[WebMethod]
private bool DisplayNames(Name[] Names)
{
   ...
} 
```

这个特定的服务只需要一个名称数组。`<Names>`标签指定了一个输入参数。运行时将此识别为预期的名称参数，并能够将其解析出来。如果所有 Web 服务仅采用一个数组参数，您的想法可能会奏效。

我不知道这是否有意义，但为了举例说明，此 Web 服务还采用名为“IgnoreErrors”的布尔值。

```
[WebMethod]
private bool DisplayNames(Name[] Names, bool IgnoreErrors)
{
   ...
} 
```

XML 将如下所示：

```
<soap:Body>
<DisplayNames xmlns="http://tempuri.org/">
  <Names>
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
    <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
    </Name>
  </Names>
  <ShowErrors>
    <value>false</value>
  </ShowErrors>
</DisplayNames> 
```

现在，如果你按照你的要求做，删除标签，它看起来像这样：

```
<soap:Body>
<DisplayNames xmlns="http://tempuri.org/">
  <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
  </Name>
  <Name>
      <FirstName>string</FirstName>
      <LastName>string</LastName>
  </Name>
  </Names>
  <ShowErrors>
    <value>false</value>
  </ShowErrors>
</soap:Body> 
```

当你看到它时，试着想象一下函数签名在代码隐藏中的样子。现在看起来像两个字典和一个布尔值，而不是一个数组和一个布尔值。

所以，所有这一切都再次说明，`<Name>`标签标识代码隐藏函数中的 Name 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T10:52:09.680

改变了我的方法

从

> [WebMethod] 公共字符串 DisplayNames(Name[] NameCollection) {

到

> [WebMethod] 公共字符串 DisplayNames([XmlElement("Names")] Name[] NameCollection) {

# xslt - 获取当前节点 xpath

> ID：10636805
> 
> 赞同：3
> 
> 时间：2012-05-17T13:36:22.820
> 
> 标签：xslt, reflection, xpath, xslt-1.0, xalan

我需要获取我为其编写了 xsl 函数的当前节点的 xpath

```
<func:function name="fn:getXpath">
    <xsl:variable name="xpath">
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:value-of select="concat($xpath, name())" />
            <xsl:if test="not(position()=last())">
                <xsl:value-of select="concat('/', $xpath)" />
            </xsl:if>
        </xsl:for-each>
    </xsl:variable>
    <func:result select="$xpath" />
</func:function> 
```

但是当我运行它时，我收到以下错误

```
file:///D:/test.xsl; Line #165; Column #63; Variable accessed before it is bound!
file:///D:/test.xsl; Line #165; Column #63; java.lang.NullPointerException 
```

我正在使用 xalan 2.7.0。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T14:11:52.580

在您的示例中，您试图在定义本身中使用该变量，这是无效的。

看起来您的意图是尝试修改现有值的值。然而 XSLT 是一种函数式语言，因此变量是不可变的。这意味着一旦定义，您就无法更改该值。

在这种情况下，您不需要那么复杂。您可以只删除对变量本身的引用，您将获得所需的结果

```
<func:function name="fn:getXpath">
   <xsl:variable name="xpath">
      <xsl:for-each select="ancestor-or-self::*">
         <xsl:value-of select="name()"/>
         <xsl:if test="not(position()=last())">
            <xsl:value-of select="'/'"/>
         </xsl:if>
      </xsl:for-each>
   </xsl:variable>
   <func:result select="$xpath" />
</func:function> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:39:56.377

您正在`$xpath`变量本身的定义中使用该变量：

```
<func:function name="fn:getXpath">
    <xsl:variable name="xpath">  
        <xsl:for-each select="ancestor-or-self::*">
            <xsl:value-of select="concat($xpath, name())" />   <-------
            <xsl:if test="not(position()=last())">
                <xsl:value-of select="concat('/', $xpath)" />  <-------
            </xsl:if>
        </xsl:for-each>
    </xsl:variable>
    <func:result select="$xpath" />
</func:function> 
```

那个时候这个变量是未知的。

# javascript - 从javascript进行http调用时失败

> ID：10636816
> 
> 赞同：0
> 
> 时间：2012-05-17T13:37:32.983
> 
> 标签：javascript, web-services, httpwebrequest, sencha-touch

我正在使用 GET 请求通过 http 访问 url。我正在使用下面的代码。

```
onReady: function() {

        var makeAjaxRequest = function() {

        var myUrl = encodeURI('http://domainname/VW-MAPP/fgnwasxuyu/10548168/2012-04-11 12:42:36/5555');
    Ext.Ajax.request({

        method: 'get',
    url:  myUrl,

    success: function(response)      {     
    alert(''+response.responseText);     
    console.log("response:-"+response.responseText);      },     
    failure: function (response)      {     
    console.log("Failure");    
    console.log("response status:-"+response.status);
    alert("Failure");
}
            });
        };

        new Ext.Panel({
            fullscreen: true,
            id: 'content',
            scroll: 'vertical',
            dockedItems: [{
                xtype: 'toolbar',
                dock: 'top',
                items: [{
                    text: 'XMLHTTP',
                    handler: makeAjaxRequest
                }]
            },{
                id: 'status',
                xtype: 'toolbar',
                dock: 'bottom',
                title: "Tap a button above."
            }]
        });
    }
}); 
```

我尝试了很多但低于错误

XMLHttpRequest 无法加载 //URLNAME//。Access-Control-Allow-Origin 不允许 Origin null。

如果有人有任何想法，请提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:39:58.887

同源**策略**内置于浏览器中，可防止您对提供当前页面的域以外的任何其他域进行 AJAX 调用。

如果响应是 JSON，则可以使用 JSON-P 方法，否则需要服务器端代理来进行此调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:28:23.450

我尝试了两种方法

（1）将response.xml转储到本地域并访问，我们就成功了。

(2) 通过命令 chrome.exe --allow-file-access-from-files --disable-web-security 禁用 google chrome 安全性，并且能够通过 GET 方法访问 url 并获得成功。

# android - android新屏幕无法正确加载

> ID：10636818
> 
> 赞同：0
> 
> 时间：2012-05-17T13:37:52.090
> 
> 标签：android, android-intent, load, screen

> **可能重复：**
> [Android 从左到右的幻灯片动画](https://stackoverflow.com/questions/5151591/android-left-to-right-slide-animation)

我可以让加载的屏幕来自左侧而不是右侧吗？

```
Button bLeft = (Button) findViewById(R.id.buttonLeft);
bRight.setOnClickListener(new View.OnClickListener() 
{
    public void onClick(View v) 
    {
        startActivity(new Intent("Intent));
        finish();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:57:14.837

试试这个 -

[Android 简单 Activity 动画](http://technotzz.wordpress.com/2012/05/04/android-simple-activity-animation/)

[Android 简单 Activity 动画示例 2](http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/)

# java - 节点和关系不持久

> ID：10636820
> 
> 赞同：0
> 
> 时间：2012-05-17T13:38:21.243
> 
> 标签：java, neo4j

我正在尝试在我的 Neo4j 数据库中创建节点和关系。创建了节点，因为我可以打印出节点 ID，但它们不会持续存在。我的程序的下一个阶段是计算索引中的节点数，这会产生 NullPointerExpection 错误。我正在使用 Gephi 来可视化图形，它既不显示节点也不显示关系。如何让节点持久存在？这可能是因为我有另一个方法（由于长度未显示）包装在事务中，它调用这些节点创建方法？谢谢

以下是部分代码：

```
public class Neo4JGraphDbClass {

private String graphLocation = "D:\\testdb"  ;

private GraphDatabaseService graphDb ;
private IndexManager graphIndex ;

private Index<Node> property1;
private Index<Node> special_nodes ;

public Neo4JGraphDbClass() {}
public void createGraphDb() {
    graphDb = new EmbeddedGraphDatabase(graphLocation) ;
    graphIndex  =  graphDb.index();
    property1  = graphIndex.forNodes("PROPERTY1");
    special_nodes = graphIndex.forNodes("SPECIAL_NODES");
}

public Node createAndIndex(Integer[] property1) {
    Transaction transaction0 = graphDb.beginTx();
    try {
        Node node =    graphDb.createNode();
        node.setProperty("PROPERTY1",property1) ;
        property1.putIfAbsent(node, "PROPERTY1", property1);
        System.out.println(node.getId());
        transaction0.success();
        return node;
    } finally {
        transaction0.finish();
    }
}

public Node createSpecialNodes(Integer name) {
    Transaction transaction1 = graphDb.beginTx();
    try {
        Node node = graphDb.createNode();
        node.setProperty("SPECIAL_NODE", name);
        special_nodes.add(node, "SPECIAL_NODE", name);
        transaction1.success();
        return node;
    }
    finally {
        transaction1.finish();
    }
}
public void addNodesToGraph(Integer preName, ArrayList<Integer[]> preProperty1) {
    //stuff to change preName into name and preProperty into property
Transaction transaction = graphDb.beginTx();
    try {
        Node specialNode = createSpecialNodes(name) ;
        Node previousNode = graphDb.getReferenceNode();
        for (int i = 0; i < property1.size(); i++) {
            Node currentNode =  createAndIndex(property1.get(i));
            previousNode.createRelationshipTo(currentNode, RelTypes.NEXT_MEASURE);
            currentNode.createRelationshipTo(specialNode,RelTypes.SAMPLE);
            previousNode = currentNode; }
        transaction.success();
    }
    finally {
        transaction.finish();
    }
}

public Integer countIndex() {
    Integer hitSize;
    Transaction tx = graphDb.beginTx();
    try {
        IndexHits<Node> hits = graphIndex.forNodes("PROPERTY1").get("PROPERTY1", "*");
        hitSize = hits.size();
        tx.success();
    }
    finally {
        tx.finish();
    }
    return hitSize;
}

public Integer indexSize(Integer lookup) throws NullPointerException{
    Integer hitSize;

    Transaction tx2 = graphDb.beginTx();
    try {

        IndexHits<Node> hits =  graphIndex.forNodes("PROPERTY1").query(lookup);
        hitSize = hits.size();
        tx2.success();
    }
    finally {
        tx2.finish();
    }
    return hitSize;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T10:29:28.400

代码看起来没问题。您的查询是什么样的，即您如何得出数据未持久化的结论？

# php - 如何在 zf2 中设置没有 di/instance/alias 的路由？

> ID：10636823
> 
> 赞同：1
> 
> 时间：2012-05-17T13:38:27.313
> 
> 标签：php, zend-framework2

我无法解决的问题是 zend 框架 2 中的路由。

我使用[zend 骨架应用程序](https://github.com/zendframework/ZendSkeletonApplication)。我创建了控制器和适当的视图文件，如 zf1\. 如果我尝试从浏览器应用程序打开创建控制返回 404 返回代码，直到我添加别名：

```
<?php
return array(
    'di' => array(
        'instance' => array(
            'alias' => array (
                'login' => 'Application\Controller\LoginController',
                'logout' => 'Application\Controller\LogoutController',
                'user' => 'Application\Controller\UserController',
            ), 
```

我应该在别名数组中添加所有控制器文件。

如何在不添加别名的情况下制作默认路由？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:59:05.470

实例别名不打算在路由中使用，而是对 DI 有用的“快捷方式”。例如，假设您在模块事件上调用的方法中：

```
// get the di locator
$di = $e->getTarget()->getLocator();
// get instance by alias
$loginController = $di->get('login'); 
```

相反，要设置路由规则，您可以在配置文件中执行此操作：

```
// Setup for router and routes
return array(
    'di' => array(
        'instance' => array(

        ....

            // Setup for router and routes
        'Zend\Mvc\Router\RouteStack' => array(
            'parameters' => array(
                'routes' => array(
                    'default' => array(
                        'type'    => 'Zend\Mvc\Router\Http\Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                                'controller' => 'Application\Controller\IndexController',
                                'action'     => 'index',
                            ),
                        ),
                    ),
                    'home' => array(
                        'type' => 'Zend\Mvc\Router\Http\Literal',
                        'options' => array(
                            'route'    => '/',
                            'defaults' => array(
                                'controller' => 'Application\Controller\IndexController',
                                'action'     => 'index',
                            ),
                        ),
                    ),
                ),
            ),
        ), 
```

我建议你[阅读 Akrabat 的入门教程](http://akrabat.com/zend-framework-2-tutorial/)

# mysql - Mysql Count 几个字段

> ID：10636825
> 
> 赞同：2
> 
> 时间：2012-05-17T13:38:37.377
> 
> 标签：mysql, join, count

我有一张桌子

```
id|user_id|开始|停止
 1| 1| 1| 1
 2| 2| 1| 1
 3| 2| 1| 0
 4| 3| 0| 0

```

我想得到下一个结果

```
user_id|总计|开始|停止
      1| 1| 1| 1
      2| 2| 2| 1
      3| 1| 0| 0

```

所以我想计数 3 并按 user_id ang get 分组。是否可以使用联接而不使用派生表来准备查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:43:42.970

```
SELECT user_id, 
       Sum (start) AS start, 
       Sum (stop)  AS stop, 
       Count(*)    AS total 
FROM   tablename 
GROUP  BY user_id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T13:44:33.050

```
SELECT   user_id, COUNT(*) total, SUM(start=1) start, SUM(stop=1) stop
FROM     my_table
GROUP BY user_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T13:49:25.747

总行数为 1 in`start`和 1 in`stop` *两次*。

```
SELECT user_id, 
   count(case start WHEN 1 then 1 else null end) AS start, 
   count(case stop WHEN 1 then 1 else null end)  AS stop, 
   count (*) AS total 
FROM   tablename 
GROUP  BY user_id 
```

# javascript - 选择输入不会在表格内对齐

> ID：10636827
> 
> 赞同：0
> 
> 时间：2012-05-17T13:38:44.617
> 
> 标签：javascript, html

我想与彼此相邻的输入对齐，这些选择输入位于表格行内。相反，它们一直堆叠在一起，知道为什么吗？（​​牢房内有足够的空间）

```
 <div class="spantoolbar">
                        <div class="styled-select">
                            <select style=" font-size: 12px;">
                                <option>option 1</option>
                                <option>option 2</option>
                            </select>
                        </div>
                        <div class="styled-select">
                            <select style="font-size: 12px;" >
                                <option>option 1</option>
                                <option>option 2</option>
                            </select>
                        </div>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:43:29.383

放在`float:left;`两个班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:45:45.223

默认情况下，一个 div 是 of `display:block`，这意味着后续项目将被放置在它下面。正如 srijan 在评论中所说，您需要添加`display:inline;`到 CSS 中的“样式选择”类或使用`span`而不是`div`.

# android - 通过usb android使用zebra sdk打印

> ID：10636828
> 
> 赞同：3
> 
> 时间：2012-05-17T13:38:53.783
> 
> 标签：android

zebra sdk 是否支持通过 android 设备 USB 电缆打印数据？（没有 wifi 和蓝牙）

请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-13T17:45:46.950

是的，可以使用 Android SDK 通过 USB 打印到 Zebra 证卡打印机。但是，我无法让清漆层出现，这对您的应用程序来说可能不是问题。

# html - html dom 事件对象的文档？

> ID：10636834
> 
> 赞同：0
> 
> 时间：2012-05-17T13:39:18.053
> 
> 标签：html, events, dom

谁能指出我的 html`Event`对象的文档？

* * *

## 奖金阅读

我知道全局`Event`对象存在的唯一原因是因为它在[Stackoverflow 答案](https://stackoverflow.com/questions/5971601/javascript-event-bubbling)中被提及：

```
onclick="SomeEvent(this, event)"

function SomeEvent( el, event ) {
    var target = event.srcElement || event.target;

    if( el === target ) {
        // run your code
    }
} 
```

它似乎具有以下属性：

*   `srcElement`
*   `target`

[谷歌搜索我在HTML DOM 事件对象](http://www.w3schools.com/jsref/dom_obj_event.asp)上找到了 W3 School 的页面，其中列出了以下**属性**：

*   `bubbles`: 返回事件是否为冒泡事件
*   `cancelable`: 返回事件是否可以阻止其默认操作
*   `currentTarget`: 返回事件监听器触发事件​​的元素
*   `eventPhase`：返回当前正在评估事件流的哪个阶段
*   `target`返回触发事件的元素
*   `timeStamp`返回创建事件的时间（相对于纪元的毫秒数） -`type`返回事件的名称

和**方法**：

*   `initEvent()`: 指定事件类型，事件是否可以冒泡，是否可以阻止事件的默认动作
*   `preventDefault()`：如果事件是可取消的，则取消该事件，这意味着不会发生任何通常由实现作为事件结果而采取的默认操作
*   `stopPropagation()`：在事件流期间防止事件的进一步传播

它不见了`srcElement`，所以可以肯定地说它不是完整的文档。

* * *

[然后是对象](http://msdn.microsoft.com/en-us/library/ie/ms535863%28v=vs.85%29.aspx)上的微软[页面`event`](http://msdn.microsoft.com/en-us/library/ie/ms535863%28v=vs.85%29.aspx)。它没有任何文档；只提到对象。但它确实提到：

> 在某些事件期间，某些属性可能没有有意义的值。例如，`fromElement`和`toElement`属性

W3Schools 页面没有提及`fromElement`或`toElement`属性；所以它不完整。

MSDN 页面引用了 W3C 的链接：

> ## 标准信息
> 
> [文档对象模型 (DOM) 2 级 HTML 规范](http://go.microsoft.com/fwlink/p/?linkid=196991)，第 1.6.5 节

*对该*页面的搜索没有提及`fromElement`or `toElement`。

那么任何人都可以指出我的 html`Event`对象的文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:51:47.700

MDN 站点提供了非常可靠的信息：[https](https://developer.mozilla.org/en/DOM/event) ://developer.mozilla.org/en/DOM/event 。您的`event.toElement`属性是非标准的 Microsoft 事物，`undefined`在 Firefox 中对属性进行了快速测试：

```
<body onclick="alert(event.srcElement)">Click 
```

要使用的正确属性是`target`. 另请注意，`event`它*不是*全局的，它只是一个局部变量。建议您使用`addEventListener`MDN 页面中描述的添加 DOM 事件。

[quirksmode.org](http://quirksmode.org/dom/w3c_events.html#targets)有很好的跨浏览器兼容性表格。

W3schools...嗯[http://w3fools.com](http://w3fools.com)

由于您想了解更多有关 IE 特定`srcElement`属性的信息，请参阅 Microsoft 的文档。从[srcElement 属性](http://msdn.microsoft.com/en-us/library/ie/ff974945%28v=vs.85%29.aspx)：

> 获取最初将事件分派到的元素。[与目标](http://msdn.microsoft.com/en-us/library/ie/ff974946%28v=vs.85%29.aspx)比较。
> 
> ### 评论
> 
> 注意 提供 srcElement 属性是为了向后兼容。请改用目标属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:58:46.930

Javascript 本身只是一个概念。它融合了不同的方言，如 Jscript 和 Gecko Javascript。现在不同的浏览器对 Javascript 的处理方式不同，因此互联网上有大量不同的文档。

现在谈论事件：

*   IE 有两种事件模型
*   Mozilla 和 Safari 两个不同的
*   Opera 有三个

然后兼容性：

*   IE DOM0 事件模型的工作方式与其他所有浏览器的 DOM0 事件模型不同
*   IE 专有的 attachEvent 事件模型（Opera 也支持）不同于 W3C DOM2 事件模型
*   Mozilla、Safari 和 Opera 支持 W3C DOM2 事件
*   与其他三个相比，事件对象在 IE 中具有非常不同的一组属性，与您正在谈论的事件模型无关。

事实上，不管你说的是哪种事件模型，你都会发现四大浏览器在各个方面的差异。这就是为什么您没有找到事件对象的特定全局文档的原因。

# scala - Scala foldLeft 添加了一个元素？

> ID：10636839
> 
> 赞同：1
> 
> 时间：2012-05-17T13:39:40.840
> 
> 标签：scala

我正在尝试在 scala 中创建一个按座位飞行的稀疏向量库，我遇到了 foldLeft 的问题，它似乎在长度为 1 的序列上创建或添加了一个额外的元素。

这是我的稀疏加法功能：

```
 def addTwoMaps(m1: Map[Int,Double], m2: Map[Int,Double]) =
  m1 ++ m2.map{ case (k,v) => k -> (v + m2.getOrElse(k, 0.)) } 
```

这是我的“添加映射/稀疏向量序列并归一化”功能：

```
def addNMaps(ms : Map[Int, Double]*) = {
val denom = if (ms.length > 0) ms.length.toDouble else 1
ms.foldLeft(Map.empty[Int, Double])((a,b) => addTwoMaps(a,b)).mapValues(_ / denom)
} 
```

（对于我的特殊情况，每个输入映射的值总和为 1，所以我所要做的就是除以参数序列的长度，以确保生成的映射总和为其值加一）

作为一个测试用例，如果我添加两个总和为 1 的地图，则效果很好：

```
scala> Common.addNMaps(Map(1->1), Map(1->1))
res34: scala.collection.immutable.Map[Int,Double] = Map(1 -> 1.0) 
```

但如果我只有一个论点：

```
scala> Common.addNMaps(Map(1->1))
res33: scala.collection.immutable.Map[Int,Double] = Map(1 -> 2.0) 
```

这些值突然加起来为两个！我的猜测是单曲`Map(1->1)`以某种方式被添加了两次，`foldLeft`但这只是一个猜测。

我究竟做错了什么？我怎样才能`Common.addNMaps(Map(1->1))`返回`Map(1->1.0)`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:55:22.880

你的 有一个错字`addTwoMaps`，应该是：

```
def addTwoMaps(m1: Map[Int,Double], m2: Map[Int,Double]) =
  m1 ++ m2.map{ case (k,v) => k -> (v + m1.getOrElse(k, 0.)) } 
```

你需要打电话`getOrElse`，`m1`而不是`m2`。

* * *

请注意，在这种情况下，您可以使用 an [`IntMap`](http://www.scala-lang.org/api/current/scala/collection/immutable/IntMap.html)，它有一个方便的`unionWith`方法（可能是受到[Haskell 的`Data.Map.unionWith`](http://hackage.haskell.org/packages/archive/containers/0.5.0.0/doc/html/Data-Map-Strict.html#v%3aunionWith)启发）：

```
import scala.collection.immutable.IntMap

def addNMaps(ms : IntMap[Double]*) = {
  val denom = if (ms.length > 0) ms.length else 1
   ms.foldLeft(IntMap.empty[Double]) {
     (a, b) => a.unionWith(b, (_, x, y) => x + y)
   }.mapValues(_ / denom)
 } 
```

我不确定为什么`unionWith`它不是标准 Scala `Map`API 的一部分。

# c++ - cpp gdb 崩溃，没有核心 & gdb 附加到工作进程

> ID：10636841
> 
> 赞同：1
> 
> 时间：2012-05-17T13:39:45.253
> 
> 标签：c++, process, crash, gdb, freebsd

1）我的守护进程有问题。它不时崩溃，没有核心愚蠢的一代。系统是FreeBSD。之前总是`.core`生成。似乎这是某种其他类型的错误或其他发生的事情，并且它没有核心退出。无论如何，我想知道这一点并修复！

2) 如何在 freebsd 上检查必须 100% 确定生成内核？此处：[当进程出现分段错误时，如何在 Linux 中生成核心转储？](https://stackoverflow.com/questions/17965/generate-a-core-dump-in-linux) 说`ulimit -c unlimited`但是`Command not found`

3) 似乎捕获了我需要使用 GDB 附加到进程的错误/崩溃？怎么做？还在 stackoverflow 上搜索并创建： [gdb attach to a process without stop](https://stackoverflow.com/questions/9746018/gdb-attach-to-a-process-without-stop)但我确信我做得很好：

a）我将文件命名`attach`为授予他执行的权限并添加以下行：

```
 echo "cont" > attach.gdb
 gdb server $1 -x attach.gdb
 rm attach.gdb 
```

b) run like`./attach` 和它的开始，但我什么也做不了。这是正确的？我需要在守护进程崩溃之前等待而不是写入`generate-core-file`以获得核心？

`generate-core-file`4)如果守护进程在没有 SEGFAIL 或其他异常的情况下退出，核心是否会由命令生成？

谢谢和对不起我的英语。很难用非母语写一些重要的信息。你必须明白...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:50:45.627

3b）您需要运行`./attach 1234`其中 1234 是正在运行的进程的 PID（该 PID 将是`$1`脚本的参数，将传递给 gdb）

或者只是不要打扰那个附加脚本（它非常没有意义）并运行`gdb server 1234`然后键入命令`cont`并等待它崩溃。

如果它在连接 gdb 时崩溃，为什么需要核心文件？核心文件的好处是使用调试器来检查它，但如果它在调试器内部崩溃然后直接调试它，你不需要核心文件！所以忘记 generate-core-file ，当它崩溃时直接检查进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:40:23.267

如果您的进程由于 ulimit 问题而没有核心，请编写一个小型 shell 脚本，在运行您的进程之前设置 ulimit：

```
#! /bin/sh
ulimit -c unlimited
/path/to/my/program > program.out 2>&1
echo $? >> program.out 
```

这使您可以从程序中捕获标准输出和标准错误，并将程序返回状态捕获到 program.out。您必须注意这个文件的大小，如果它填满了它所在的文件系统，可能会导致其他问题。

不过，这并不是你没有得到核心的原因。如果您的程序是为调试而编译的并遇到了 assert()，它将退出而不进行核芯。您的程序在退出之前是否打印任何内容或记录任何内容？

# java - Informix：在 Java 中使用存储过程

> ID：10636842
> 
> 赞同：2
> 
> 时间：2012-05-17T13:39:46.167
> 
> 标签：java, stored-procedures, informix

如何在 Informix 中找到存储过程的参数（函数声明）？是“{ call sp_csq_activity }”还是“{ call sp_csq_activity(?,? ..) }”及其类型？还有这个存储函数的定义列表吗？如何使用这些函数来检索 db 中表的任何列？

```
public void callSP() throws SQLException {

        CallableStatement proc = null;

        proc = conn.prepareCall("{ call sp_csq_activity }");
        proc.execute();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:51:18.520

用这个 ：`select * from sysprocedures`

正如这篇文章中所解释的：[如何列出 Informix 中的所有存储过程？](https://stackoverflow.com/questions/6958886/how-do-i-list-all-stored-procedures-in-informix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-06T10:38:20.837

您还可以使用[DatabaseMetaData](https://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html "数据库元数据")来获取您想要的信息。

一个获取所有存储过程及其参数的简单程序是这样的：

```
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

public class Main {

    public static void main(String[] args) {

        try {
            Class.forName ("com.informix.jdbc.IfxDriver");
        } catch (ClassNotFoundException e) {
            System.out.println(e);
            return;
        }

        try {
            Connection conn = DriverManager.getConnection("jdbc:informix-sqli://.........");

            ResultSet rsProcs;

            DatabaseMetaData dbMeta = conn.getMetaData();

            rsProcs = dbMeta.getProcedures(null, null, null);

            while (rsProcs.next()) {
                String procName = rsProcs.getString("PROCEDURE_NAME");
                System.out.println(procName);

                ResultSet rsParams = dbMeta.getProcedureColumns(null, null, procName, null);

                while (rsParams.next()) {
                    System.out.println("Param " + rsParams.getString("ORDINAL_POSITION") + " :" +
                            " Name: " + rsParams.getString("COLUMN_NAME") +
                            " Type: " + rsParams.getString("COLUMN_TYPE") + 
                            " Data Type: " + rsParams.getString("DATA_TYPE"));
                }
                System.out.println("");

                rsParams.close();
            }
            rsProcs.close();
            conn.close();

        } catch (SQLException e) {
            System.out.println(e);
        }

    }

} 
```

检查SQL 数据类型值的[常量字段值](https://docs.oracle.com/javase/8/docs/api/constant-values.html#java.sql)的 java.sql.Types 部分。

# php - Kohana 2 删除页面警告

> ID：10636843
> 
> 赞同：1
> 
> 时间：2012-05-17T13:39:49.117
> 
> 标签：php, database, kohana, kohana-2

我在我的管理面板上使用 Kohana 2。但是当点击 Add New 按钮时，得到 Page Not Found 警告。

它的警告：

```
The requested page was not found. It may have moved, been deleted, or archived.

panel/system/core/Kohana.php [842]:

The page you requested, admin/corporate/addnew, could not be found. 
```

那是 842\. 行：

```
throw new Kohana_404_Exception($page, $template); 
```

该警告页面图片：

![在此处输入图像描述](../Images/b789b8e4dc407a3edefc1399bf1c86fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:45:44.307

除非您有路由设置来处理此特定 URL，否则默认路由不会处理此问题。url“admin/corporate/addnew”正在尝试使用管理控制器、公司操作和一个名为“addnew”的 id。我不确定你的应用程序是如何构建的，但也许你需要在 bootstrap.php 中编写一个看起来像这样的路由：

```
Route::set('admin_corporate', 'admin/corporate(/<action>(/<id>))')
    ->defaults(array(
        'controller' => 'corporate',
        'action'     => 'index'
    )); 
```

这需要在您的默认路线之前进行。

# google-maps - 黑莓地图，用户定义的图像作为 pin 和 click 事件

> ID：10636855
> 
> 赞同：4
> 
> 时间：2012-05-17T13:40:21.707
> 
> 标签：google-maps, blackberry

我想在我的应用程序中显示地图（谷歌地图或黑莓地图），并将用户个人资料图片作为标记。我也想点击别针，然后它会显示一个警告框。它是如何完成的？提前致谢。

我想要这样-

![在此处输入图像描述](../Images/9d3bedf01f9a53ef49c9bc0a13600f8a.png)

我试过这段代码 -

```
import net.rim.blackberry.api.browser.Browser;
import net.rim.blackberry.api.browser.BrowserSession;
import net.rim.device.api.browser.field2.*;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.container.*;

public class App extends UiApplication
{
public static void main(String[] args)
{
    App app = new App();
    app.enterEventDispatcher();
}
public App()
{
    pushScreen(new MultiplePoints());
}
}
     class MultiplePoints extends MainScreen{
        String initial = "<!DOCTYPE html>\r\n" +
                "<html> \r\n" +
                "<head> \r\n" +
                "  <meta http-equiv=\"content-type\" content=\"text/html; charset=UTF-8\" /> \r\n" +
                "  <title>Google Maps Multiple Markers</title> \r\n" +
                "  <script src=\"http://maps.google.com/maps/api/js?sensor=false\" \r\n" +
                "          type=\"text/javascript\"></script>\r\n" +
                "</head> \r\n" +
                "<body>\r\n" +
                "  <div id=\"map\" style=\"width: 500px; height: 400px;\"></div>\r\n" +
                "\r\n" +
                "  <script type=\"text/javascript\">\r\n" +
                "    var locations = [";
        String second= " ];\r\n" +
                "\r\n" +
                "    var map = new google.maps.Map(document.getElementById('map'), {\r\n" +
                "      zoom: 8,";
        String centerPoint ="";
        String finalpart = " mapTypeId: google.maps.MapTypeId.ROADMAP\r\n" +
                "    });\r\n" +
                "\r\n" +
                "    var infowindow = new google.maps.InfoWindow();\r\n" +
                "\r\n" +
                "    var marker, i;\r\n" +
                "\r\n" +
                "    for (i = 0; i < locations.length; i++) {  \r\n" +
                "      marker = new google.maps.Marker({\r\n" +
                "        position: new google.maps.LatLng(locations[i][2], locations[i][2]),\r\n" +
                "        map: map\r\n" +
                "      });\r\n" +
                "\r\n" +
                "      google.maps.event.addListener(marker, 'click', (function(marker, i) {\r\n" +
                "        return function() {\r\n" +
                "          infowindow.setContent(locations[i][0]);\r\n" +
                "          infowindow.open(map, marker);\r\n" +
                "        }\r\n" +
                "      })(marker, i));\r\n" +
                "    }\r\n" +
                "  </script>\r\n" +
                "</body>\r\n" +
                "</html>";
        String[] lt={"12.966085","12.944337","12.925599"};
      String[] lon={"77.533264","77.549400","77.594719"};
      String[] name={"vijyanagar","Banashankari","jaynagar"};

      MultiplePoints(){//StringBuffer html,Vector waypoints,LocationObj center){
            StringBuffer html=new StringBuffer();
            html.append(initial);        
            for(int i=0 ; i<lt.length; i++){
                //LocationObj source = (LocationObj)waypoints.elementAt(i);
                //String point = "['"+source.getLabel()+"',"+source.getLatitude()+","+ source.getLongitude()+","+i+"],";
                String point = "['"+name[i]+"',"+lt[i]+","+ lon[i]+","+i+"],";
                //System.out.println("Point is"+point);
                html.append(point);
            }
            html.append(second);
            centerPoint = "  center: new google.maps.LatLng("+lt[0]+","+lon[0]+"),";    
            html.append(centerPoint);
            html.append(finalpart);
            //System.out.println("Plot is"+html.toString());
            BrowserFieldConfig _bfConfig = new BrowserFieldConfig();        
          _bfConfig.setProperty(BrowserFieldConfig.NAVIGATION_MODE,BrowserFieldConfig.NAVIGATION_MODE_POINTER);
          _bfConfig.setProperty( BrowserFieldConfig.JAVASCRIPT_ENABLED, Boolean.TRUE );
         _bfConfig.setProperty(BrowserFieldConfig.USER_AGENT, "MyApplication 1.0");

          BrowserField myBrowserField = new BrowserField(_bfConfig);

          myBrowserField.displayContent(html.toString(), "http://localhost");
          HorizontalFieldManager horf=new HorizontalFieldManager(HORIZONTAL_SCROLL);
          horf.add(myBrowserField);
          add(horf);
        }
    } 
```

然后我得到这样 -

![在此处输入图像描述](../Images/ab034660dced20ec4a2dba1927ea025b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:21:51.227

## 自定义地图标记

如果您想使用 BlackBerry 的`MapField`，您可以[从阅读本文开始](https://stackoverflow.com/a/1529932/119114)，了解如何在`MapField`.

该解决方案基本上覆盖了`paint()`子类内置类的类中的方法`MapField`。在内部`paint()`，它将您想要标记（又名图钉或图标）的点的纬度和经度坐标**转换**为`MapField`. 然后，它用 手动绘制标记`Graphics.drawBitmap()`。

现在，为了绘制您在上面显示的特定标记......听起来您的自定义图像应该由两部分组成：

1.  您为每个用户重复使用的背景标记。这是您在问题中显示的底部有一个点的蓝色圆圈。在绘图程序中自己绘制该标记，将其保存为 .png 文件，并将其作为位图资源添加到您的项目中。

2.  第二部分是每个用户的动态图像。您必须自己下载这些图像（您并没有真正指定这些图像的来源）。但是，我相信您可以找到有关从 Web 服务器下载图像的 stackoverflow 示例。

要制作完整的标记，您将使用[我提供的第一个链接中显示](https://stackoverflow.com/a/1529932/119114)的技术。但是，您不会为地图上的每个位置绘制**一个图像，而是绘制****两个**. 首先，为每个用户绘制相同的蓝色背景标记。然后，最重要的是，您将绘制用户个人资料图像。如果您在绘制蓝色标记背景**后**`drawBitmap()`简单地调用用户图像，则用户图像将*位于顶部*。

 ***完成这项工作所需的最后一个技巧是获取用户个人资料图像，几乎可以肯定这些图像是作为方形图像提供给您的，并将它们裁剪成圆形。为此，您可以使用[其他 stackoverflow question 中的解决方案](https://stackoverflow.com/a/8764689/119114)。在该解决方案中，Rupak 定义了一种`cropImage()`方法来满足您的需要。他围成一个圆圈。在那个方法里面，注意他对变量做了什么`myImage`。 `myImage`在您的情况下，将从方形用户个人资料照片开始。裁剪后，`myImage`现在是一个`Bitmap`具有裁剪边缘的对象，您应该能够将其传递到`Graphics.drawBitmap()`您为地图上的每个位置进行的第二次调用中。

## 处理用户触摸/点击

您的另一个问题是关于用户选择标记时的处理。由于这些“标记”只是直接绘制在 顶部`MapField`，为了处理它们的触摸/点击，您可能必须在`MapField`子类中覆盖这些方法：

```
protected boolean touchEvent(TouchEvent message);

protected boolean navigationClick(int status, int time);
protected boolean navigationMovement(int dx, int dy, int status, int time); 
```

在这些方法中，您确定用户触摸/单击的字段**(x,y)**位置，然后循环浏览您的位置以确定触摸是否在标记的某个**(x,y)**距离内。您可以在字段坐标 (x,y) 或地图/世界坐标（纬度、经度）中执行此操作。 `MapField`有转换方法：

```
void convertFieldToWorld(XYPoint fieldIn, Coordinates worldOut);
void convertWorldToField(Coordinates worldIn, XYPoint fieldOut); 
```

帮助解决这个问题。

您还应该查看JDE 安装中[**示例**](http://supportforums.blackberry.com/t5/Java-Development/MapFieldDemo-location/td-p/170852)[目录](http://supportforums.blackberry.com/t5/Java-Development/MapFieldDemo-location/td-p/170852)[下的](http://supportforums.blackberry.com/t5/Java-Development/MapFieldDemo-location/td-p/170852)**MapFieldDemo 。** 它有一个类可以帮助获取点击的位置（如果您不在触摸屏设备上）：[](http://supportforums.blackberry.com/t5/Java-Development/MapFieldDemo-location/td-p/170852)**`DemoMapField`**

 **```
protected boolean navigationMovement(int dx, int dy, int status, int time) 
{
    // The map is shifted in relation to the current zoom level.
    int zoom = getZoom();
    int latitude = getLatitude() - ((dy << 3) << zoom);     // << 3 is equivalent to multiplication by 8.
    int longitude = getLongitude() + ((dx << 3) << zoom);                  

    moveTo(latitude, longitude);       

    return true;        
} 
```

祝你好运！*****

# sql - SQL - 如何创建一个以列为列和新格式的表？

> ID：10636857
> 
> 赞同：6
> 
> 时间：2012-05-17T13:40:31.853
> 
> 标签：sql, sql-server-2008

我有一张桌子，目前看起来有点像这样-

```
CASEID  ¦  FORMNAME  ¦  NAME  ¦  VALUE

601554  ¦  CASEFORM  ¦  Mond  ¦  AAAA
601554  ¦  CASEFORM  ¦  Tues  ¦  BBBB
601554  ¦  CASEFORM  ¦  Wedn  ¦  CCCC
601554  ¦  CASEFORM  ¦  Thur  ¦  DDDD 
```

我现在想在 SQL 中创建一个新表，它将复制数据并完全更改其格式，如下所示 -

```
CASEID  ¦  FORMNAME  ¦  Mond  ¦  Tues  ¦  Wedn  ¦  Thur

601554  ¦  CASEFORM  ¦  AAAA  ¦  BBBB  ¦  CCCC  ¦  DDDD 
```

原始表大约有 400 行，因此新表将需要 400 列。

我的 SQL 知识当然是有限的，但是当我需要一个解决方案时，我总是会犯错误。但是在这种情况下，我什至不知道从哪里开始。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:42:32.417

您正在定义一个元模型。

您需要做的是循环您的 METAMODEL 表并为找到的每一行构建一个自定义 ALTER 语句，这些行与您对 MODEL 列的定义相对应。

我也看到你也想改变价值观。如果是这样，请在同一循环中动态构建 DML 语句，然后执行它们，以便完成目标模型的构建。

**链接：**

更改表 mysql：[http ://dev.mysql.com/doc/refman/5.0/en/alter-table.html](http://dev.mysql.com/doc/refman/5.0/en/alter-table.html)

游标mysql：[http ://dev.mysql.com/doc/refman/5.0/en/cursors.html](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)

* * *

另一方面，这个查询：

```
SELECT CONCAT('ALTER TABLE mytable ADD COLUMN ', t.name, ' VARCHAR(256);') FROM mytable t 
```

将返回手动添加这些列所需的 alter table 语句。您可以将其用作模型来构建下一个查询，以便稍后将值添加到您的表中。

Rgds。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:57:45.507

对于 Sql Server 可能要查看数据透视功能。这是一个与您的场景匹配并输出您想要的结果的示例......

```
declare @data table (CASEID int, FORMNAME varchar(20), NAME varchar(20), VALUE varchar(20))
insert into @data values
(601554, 'CASEFORM', 'Mond', 'AAA'),
(601554, 'CASEFORM', 'Tues', 'BBB'),
(601554, 'CASEFORM', 'Wedn', 'CCC'),
(601554, 'CASEFORM', 'Thur', 'DDD')

SELECT *
FROM @data
PIVOT
(
  MAX(VALUE)
  FOR [NAME] IN ([Mond],[Tues],[Wedn],[Thur])
)
AS data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T14:06:01.463

从这个查询开始：

```
create table NewTable(CASEID int,  FORMNAME varchar(255))
go

insert into NewTable select distinct caseid,formname from OldTable
go

select  distinct 'alter table NewTable add ' +[name]+ ' varchar(255)'  from oldtable 
```

然后复制结果并运行它们。

然后运行这个查询：

```
select distinct 'update NewTable set ' +Name+ ' = ''' + Value +''' where caseid = ' +cast(caseid as varchar(20))+
' and FORMNAME = '''+Formname+''''
from oldtable 
```

然后复制结果并运行它们。

编辑：添加了自动化版本：

```
create table NewTable(CASEID int,  FORMNAME varchar(255)) 
go 
insert into NewTable select distinct caseid,formname from OldTable 
go
DECLARE @query VARCHAR(max)
set @query = ''
select  @query = @query + 'alter table NewTable add ' +[name]+ ' varchar(255);'  from (select distinct name from oldtable )c
exec (@query)
set @query = ''
select @query = @query+ 'update NewTable set ' +Name+ ' = ''' + Value +''' where caseid = ' +cast(caseid as varchar(20))+ ' and FORMNAME = '''+Formname+'''' 
from  (select distinct  Name, Value, Caseid, FormName from OldTable)c
exec (@query) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T14:08:16.213

如果您不知道确切的列数，可以使用：

```
DECLARE @columns varchar(max)
DECLARE @query VARCHAR(max)
SELECT @columns = COALESCE(@columns + ',[' + cast([Name] as varchar(100)) + ']', 
                 '[' + cast([Name] as varchar(100))+ ']')           
    FROM   @data1 

SET @query = 'SELECT * FROM @data1 '
SET @query = @query  + '            
            PIVOT
            (
                MAX(VALUE) FOR [NAME] IN (' + @columns + ')
            )
             AS p'                                  

EXEC @query 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T14:03:46.157

恕我直言，这是一个非常奇怪的要求！话虽如此，您需要的是一个数据透视查询。详情可在[Ask Tom - Pivot 查询中找到](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:766825833740)

# javascript - async.log 和 async.dir 有什么区别？

> ID：10636866
> 
> 赞同：0
> 
> 时间：2012-05-17T13:41:05.700
> 
> 标签：javascript, node.js, asynchronous

我发现[async](https://github.com/caolan/async)有两个实用功能：`log`和`dir`.

但我没有发现它们之间有很多区别。见代码：

```
var async = require('async');

var x = function() {
    this.name = 'Freewind';
}
var hello = function(name, callback) {
    setTimeout(function() {
        callback(null, 'hello ' + name, 'nice to see you ' + name, x, {a:'123'});
    }, 200);
};

async.log(hello, 'world');
async.dir(hello, 'world'); 
```

它打印：

```
hello world
nice to see you world
[Function]
{ a: '123' }
'hello world'
'nice to see you world'
[Function]
{ a: '123' } 
```

您可以看到唯一的区别是后者`'`的结果更多。

有什么例子可以说明什么`dir`可以做但`log`不能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:28:11.490

在文档中说：

**[异步日志](https://github.com/caolan/async#log)**

将异步函数的结果记录到控制台。通常它使用[console.log](http://getfirebug.com/wiki/index.php/Console_API#console.dir.28object.29)

**[异步目录](https://github.com/caolan/async#dir)**

使用 console.dir 将异步函数的结果记录到控制台以*显示结果对象的属性*。一般来说，它使用[console.dir](http://getfirebug.com/wiki/index.php/Console_API#console.dir.28object.29)。如果您使用 FIrebug，它就像 DOM 选项卡中的视图。

# sql-server - WinForms 应用程序设计 - 将文档从 SQL Server 移动到文件存储

> ID：10636867
> 
> 赞同：3
> 
> 时间：2012-05-17T13:41:07.337
> 
> 标签：sql-server, winforms

我有一个连接到 SQL Server 的标准 WinForms 应用程序。该应用程序允许用户将当前存储在数据库中的文档上传到使用图像列的表中。

我需要更改这种方法，以便将文档存储为文件，并将文件的链接存储在数据库表中。

使用当前的方法——当用户上传一个文档时，他们被屏蔽了它的存储方式，因为他们与数据库有连接，他们不需要知道文件存储在哪里，也不需要特殊的目录权限等。如果我为文档设置网络共享，我想避免任何 IT 问题，例如用户必须有权访问此目录才能上传或访问现有文档。

有哪些可用的选项来执行此操作？我想有一个临时数据库，以与当前方法相同的方式将文档上传到其中，然后在服务器上运行一个进程以将这些文件保存到文件存储中。然后可以删除并重新创建该数据库以回收任何空间。有没有更好的方法？

**附加信息：** 我的应用程序没有 Web 服务器元素，所以我认为 WCF 服务是不可能的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:50:06.560

您是否有理由首先要从数据库中取出文件？

如何仍然将它们保存在 SQL Server 中，但使用[`FILESTREAM`列](http://msdn.microsoft.com/en-us/library/gg471497.aspx)而不是`IMAGE`？

引用链接：

> FILESTREAM 使基于 SQL Server 的应用程序能够在文件系统上存储非结构化数据，例如文档和图像。应用程序可以利用文件系统的丰富流 API 和性能，同时保持非结构化数据和相应结构化数据之间的事务一致性。
> 
> FILESTREAM 通过将 varbinary(max) 二进制大对象 (BLOB) 数据存储为文件系统上的文件，将 SQL Server 数据库引擎与 NTFS 文件系统集成。Transact-SQL 语句可以插入、更新、查询、搜索和备份 FILESTREAM 数据。Win32 文件系统接口提供对数据的流式访问。
> 
> FILESTREAM 使用 NT 系统缓存来缓存文件数据。这有助于减少 FILESTREAM 数据可能对数据库引擎性能产生的任何影响。未使用 SQL Server 缓冲池；因此，该内存可用于查询处理。

因此，您将获得两全其美：
文件将作为文件存储在硬盘上（与将它们存储在数据库中相比可能更快），但您不必关心文件共享、权限等。

请注意，您至少需要 SQL Server 2008 才能使用`FILESTREAM`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:47:05.160

我可以告诉你我是如何实现这个任务的。我编写了一个 WCF 服务，用于发送存档文件。所以，如果我是你，我会创建这样一个服务，它应该能够保存文件并将它们发回。这很容易，您还必须确保 WCF 服务工作的用户具有读写文件的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:48:30.960

您可以让您的应用程序将对象传递给数据库中的一个过程（可能是 CLR），然后将数据写入您选择的位置，而不存储文件内容。这样你在文件存储和应用程序之间仍然有一个抽象层，但你不需要有一个在你之后清理的过程。

或者，可以创建应用程序连接到的 WCF/Web 服务。可以使用 Web 方法来接受文件内容并将它们写入正确的位置，它可以返回文件的路径或某些文件标识符。

# list - 获取所有已注册 .net 和 .com 域名的列表

> ID：10636868
> 
> 赞同：12
> 
> 时间：2012-05-17T13:41:09.943
> 
> 标签：list, search, dns, tld

我想开发一个用于即时域可用性搜索的站点（仅限 .com 和 .net）。为此，我需要所有注册域的列表。我在谷歌上搜索并了解了**VegiSign 的 TLD 区域文件访问计划**（[http://www.verisigninc.com/en_US/products-and-services/domain-name-services/grow-your-domain-name-business/ tld-zone-access/index.xhtml?loc=en_US](http://www.verisigninc.com/en_US/products-and-services/domain-name-services/grow-your-domain-name-business/tld-zone-access/index.xhtml?loc=en_US)）。

但这需要我填写一些表格，整个过程最多需要 4-8 周。

有没有其他方法可以访问所有注册的域（包括商业服务）。

# javascript - JavaScript中的序数字符串比较？

> ID：10636871
> 
> 赞同：4
> 
> 时间：2012-05-17T13:41:14.220
> 
> 标签：javascript

在 JavaScript 中：

```
"Id".localeCompare("id") 
```

将报告“id”更大。我想做序数（不是语言环境）比较，以使“Id”更大。这类似于 C# 中的 String.CompareOrdinal。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T14:49:12.180

我支持Raymond Chen和pst给出的答案。我将使用我最喜欢的站点（Mozilla 开发者网络）中的文档来支持它们，以获得 JavaScript 问题的答案。顺便说一句，我强烈推荐这个网站来解决您将来可能遇到的任何 JavaScript 问题。

现在，如果您转到 MDN 标题为[String](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String#Comparing_strings)的部分，在“比较字符串”部分下，您会发现以下描述：

> C 开发人员拥有用于比较字符串的 strcmp() 函数。在 JavaScript 中，您只需使用小于和大于运算符：

```
var a = "a";  
var b = "b";  
if (a < b) // true  
  print(a + " is less than " + b);  
else if (a > b)  
  print(a + " is greater than " + b);  
else  
  print(a + " and " + b + " are equal."); 
```

> 使用 String 实例继承的 localeCompare 方法可以获得类似的结果。

如果我们使用字符串“Id”`a`和“id”，`b`那么我们将得到以下结果：

```
"Id is less than id" 
```

这与 Yaron 之前使用该`localeCompare`方法时得到的结果相同。如 MDN 中所述，使用小于和大于运算符会产生与使用`localeCompare`.

**因此，Yaron 问题的答案是使用小于 (<) 和大于 (>) 运算符对 JavaScript 中的字符串进行序数比较。**

由于 Yaron 提到了 C# 方法`String.CompareOrdinal`，我想指出，这种方法产生的结果与上面的 JavaScript 完全相同。根据[MSDN C# 文档](http://msdn.microsoft.com/en-us/library/af26w0wa.aspx)，该`String.CompareOrdinal(String, String)`方法“通过评估每个字符串中相应 Char 对象的数值来比较两个指定的 String 对象。” 因此，使用各个字符的数字 (ASCII) 值比较两个字符串参数。

如果我们使用 Yaron Naveh 在 C# 中的原始示例，我们有：

```
int result = String.CompareOrdinal("Id", "id"); 
```

`result`的值`int`小于零，可能是`-32`因为“I”（0x49）和“i”（0x69）之间的差异是`-0x20 = -32`。所以，词法上“Id”小于“id”，这与我们之前得到的结果相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:49:58.290

只是一个猜测：通过反转所有字母的大小写？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:52:45.807

正如 Raymond 在评论中指出（并解释）的那样，“序数”非语言环境感知比较就像在字符串上使用各种相等运算符一样简单（只需确保*两个*操作数都是字符串）：

```
"a" > "b" // false 
"b" > "a" // true 
```

有点花哨（或者不要乱用[[prototype]]，功能是一样的）：

```
String.prototype.compare = function (a, b) {
    return ((a == b ? 0)
        ? (a > b : 1)
        : -1)
} 
```

然后：

```
"a".compare("b") // -1 
```

快乐编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T14:07:27.450

```
function compareOrdinal(ori,des){
    for(var index=0;index<ori.length&&index<des.length;index++){
        if(des[index].charCodeAt(0)<ori[index].charCodeAt(0)){
            return -1;
            break;
        }
    }
    if(parseInt(index)===des.length-1){
        return 0;
    }
    return 1;
}

compareOrdinal("idd","id");//output 1 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-01T13:40:08.797

如果您需要比较并找出两个字符串之间的差异，请检查：

```
function findMissingString() {
    var str1 = arguments[0];
    var str2 = arguments[1];
    var i = 0 ;
    var j = 0 ;
    var text = '' ;
    while(i != (str1.length >= str2.length ? str1.length : str2.length )) {
        if(str1.charAt(i) == str2.charAt(j)) {
            i+=1 ;
            j+=1;
        } else {
            var indexing =  (str1.length >= str2.length ? str1.charAt(i) : str2.charAt(j));
            text = text + indexing ;
            i+=1;
            j+=1;
        }
    }
    console.log("From Text = " + text);
}
findMissingString("Hello","Hello world");
```

# silverlight - Silverlight - 如何在导航框架中关闭页面

> ID：10636874
> 
> 赞同：0
> 
> 时间：2012-05-17T13:41:39.100
> 
> 标签：silverlight, silverlight-4.0, silverlight-toolkit, silverlight-5.0

使用导航框架时如何关闭框架上的页面？在 Frame 上，我只能找到 GoBack 和 GoFoward 方法，但没有 Close 或类似的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T08:45:40.197

我认为你不能直接做到这一点，但你可以通过使用空白页面并折叠框架来近似它。

换句话说：创建一个空的`Page`，使用最少的 XAML。当您想“关闭”当前页面时，请导航到您的空页面（以卸载当前页面）并将`Visibility`您的设置`Frame`为`Collapsed`。这应该做你想要的。

# c# - C#版、VS版、.NET框架版等如何配合？

> ID：10636878
> 
> 赞同：5
> 
> 时间：2012-05-17T13:42:01.923
> 
> 标签：c#, asp.net, .net

我对 MS 堆栈的所有部分如何组合在一起感到非常困惑。C# 版本、Visual Studio 版本、.NET 框架版本和 ASP.NET 版本（这与 .net 版本相同吗？）如何适合给定项目？

例如，如果我将 Visual Studio 2010 用于面向 .NET 框架 2 的项目，我如何知道我可以使用哪些 C# 或 ASP.NET 功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T13:45:59.973

C# 版本控制您可以使用的*语言功能；*它独立于其他一切。（因为它只是编译器）
即使针对较旧的框架，您也可以使用（大多数）较新的语言功能。

但是，其中一些功能（例如，`dynamic`NoPIA）依赖于特定 .Net Framework 版本中的功能。

.Net Framework 版本控制您可以使用 .Net 的哪些部分；在较新的版本（分别为 3.5 和 4.0）中引入了一些 .Net 功能（例如，LINQ 或 TPL）

更复杂的是，ASP.Net 在运行时调用 C# 编译器来编译 ASPX 或 Razor 视图（以及网站项目中的独立文件），因此在这种情况下，您不能使用比框架版本更新的语言功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:46:33.017

C#版本是调用编译源代码的编译器版本，VS版本是Visual Studio IDE的版本，可能支持多个框架版本。框架的版本会影响可用的 .NET BCL（基类库）的版本。

因此，如果您以 2.0 框架为目标，如您的示例所示，则只能使用 2.0 框架中可用的 BCL 库。因此，您不能使用`System.Linq`.

**但是**，由于 VS2010 使用 C# 4 编译器，您*可以*使用 C# 4 编译器功能，例如*默认参数*，并且仍然针对较旧的框架。

因此，当从 VS2010 构建时，它将在 2.0 框架下编译和运行，因为 C# 4 编译器在编译时处理默认参数：

```
class Program
{
    public static void HelloWorld(string x = "Hi")
    {
        Console.WriteLine(x);
    }
    static void Main(string[] args)
    {
        HelloWorld();
        HelloWorld("Buyah");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:50:53.577

查看[C# 的 Wikipedia 条目中的表格，](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29#Versions)它可以很好地概述不同版本的 C# 语言（和编译器），以及它们所依赖的 .NET 和 Visual Studio 版本。

请记住，Visual Studio 通常是向后兼容的，因此即使在 Visual Studio 2010 中，您也可以针对 .NET Framework 2.0 编写 C# 2.0 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T13:51:51.720

Visual Studio 版本控制您可以使用哪些 C# / .NET 版本；您不能使用 Visual Studio 2005 中的 .NET 4.0 功能编写 C#，因为 IDE 在 C# 版本之前发布。但是，您可以倒退，即从 VS 2010 开始以 .NET 2.0 为目标。

C# 相对于框架版本和 IDE 的版本如下，从 .NET / C# 2.0 和 VS 2005 开始：

对比 2005 | .NET 2.0 及更早版本 | C# 2.0 及更早版本

对比 2008 | .NET 3.5 及更早版本 | C# 3.0 及更早版本

对比 2010 | .NET 4.0 及更早版本 | C# 4.0 及更早版本

VS 11（测试版）| .NET 4.5 及更早版本 | C# 5.0 及更早版本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:50:06.680

Visual Studio 是 IDE。它支持多个版本的 .Net，具体取决于您拥有的 VS 版本。VS2010 支持 .Net 2 和 .Net 4（不包括当前的 beta）

.Net 根据库的特性有自己的版本

C# 和 VB 独立于彼此和 .Net，有自己的版本号。VB 接替了经典的 VB，最后我检查了 11。C# 与 .Net 号码接近。当语言本身获得独立于库的新功能时，这些会发生变化。

ASP.Net 也有自己的版本，同样，基于不同的功能。

它们都是相互关联的，但并不相互依赖。通常，它们都会在 .net 上更新一个版本，但有时它们会在更新语言或框架之前向 ASP.Net 发布新功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T13:53:50.400

一张桌子更适合这里，但这是我的答案：

> 语言：C# 1、.NET Frameworks 1.0、1.1、VS 2003
> 
> 语言：C# 2、.NET Frameworks 2.0、VS 2005（添加的主要功能：泛型）
> 
> 语言：C# 3、.NET Framework 3.0、3.5（实际上是基于2.0版本）、VS 2008（主要新增功能：LINQ（语言）、WCF、WPF、WF（技术）
> 
> 语言：C# 4、.NET Framework 4.0、VS 2010（主要特性添加：动态类型）

*顺便说一句：VS 2008、2010 可以从 2.0 版本开始针对 .NET Frameworks*

# php - PHP - 嵌套输出缓冲

> ID：10636879
> 
> 赞同：20
> 
> 时间：2012-05-17T13:42:04.267
> 
> 标签：php, nested, buffering, ob-start

我的功能有：

```
ob_start();
//Include of some files
$content = ob_get_contents();
ob_end_clean(); 
```

现在在这些包含中是另一个使用相同代码的函数，它们似乎有冲突。可以像这样使用它们吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T13:57:31.827

尝试使用这样的输出缓冲区：

```
ob_start();
// your includes
echo ob_get_clean(); 
```

在所有包含中使用它，您不会收到任何错误

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T13:46:50.020

输出缓冲应该是可堆叠的，你只需要匹配 ob_start 和 ob_end_clean。见[http://php.net/ob_start](http://php.net/ob_start)

# iphone - 在 UITextView 中隐藏 UIMenuController

> ID：10636880
> 
> 赞同：1
> 
> 时间：2012-05-17T13:42:16.623
> 
> 标签：iphone, uitextview, subclass, uigesturerecognizer, uimenucontroller

子类化 UITextView

这是h文件

```
@interface CTextView : UITextView {
}
@end 
```

这是m文件代码

```
#import "CTextView.h"
@implementation CTextView

- (BOOL)canBecameFirstResponder {
return NO;
}
@end 
```

这是子类 UITextview 正在使用的第一个 UIViewController 文件

```
#import "First.h"
#import "CTextView.h"

textView = [[[CTextView alloc] initWithFrame:CGRectMake(0, 0, 320, 410)]autorelease];
[self.view addSubview:textView]; 
```

但仍然无法阻止从 UITextView 复制全选。如果我仍然遗漏任何东西或做错了，请告诉我。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:38:13.417

使用它来禁用复制：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:44:12.400

知道了。现在它正在工作

这是供任何需要它的人参考的代码

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender

{    
[UIMenuController sharedMenuController].menuVisible = NO; //do not display the menu
if (action == @selector(copy:))
{

    return NO;  

}

else  if (action == @selector(selectAll:))
{
    return NO; 

}

[self resignFirstResponder];                      //do not allow the user to selected anything
return NO;

return [super canPerformAction:action withSender:sender];
} 
```

现在唯一的问题是缩放。现在我必须努力从 UITextView 禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:49:06.540

您是否将启用的用户交互设置为“是”？

# c++ - 在视频游戏排行榜中使用 OpenID 进行简单的排行榜身份验证

> ID：10636885
> 
> 赞同：2
> 
> 时间：2012-05-17T13:42:34.700
> 
> 标签：c++, login, oauth, openid

我阅读了这个问题（[Secure Online Highscore Lists for Non-Web Games](https://stackoverflow.com/questions/25999/secure-online-highscore-lists-for-non-web-games)）并得出结论，我不会尝试加密或保护分数本身。

但是，我想在我的视频游戏中添加某种联合登录（如 OpenID）以发送分数，但这似乎只适用于网站。也许是 OpenID + OAuth，但它似乎真的是安全访问公共 API 的最佳选择。如果我在其中任何一点上错了，请纠正。

考虑到这一点，最好的解决方案是什么：

*   我不想在我的 C++ 游戏中嵌入浏览器（没有 WebKit 等），例如 Unity3D 设置会等到您从他们的网站获得许可证
*   我不希望用户有另一个帐户来管理（他们可以使用他们的 Google、Twitter 等帐户）
*   这主要是将玩家和他们的分数联系起来的一种手段，并可能将他们的“显示名称”存储在排行榜中

谢谢。

# jquery - jQuery 在可拖动图像上动态定位可链接图像图标

> ID：10636888
> 
> 赞同：1
> 
> 时间：2012-05-17T13:42:36.440
> 
> 标签：jquery, jquery-ui

有人可以告诉我如何在图像的右上角动态叠加图像（在我的例子中是一个图标），无论该图像的大小是多少。它需要能够使用可拖动的 ui，以便在移动图像时，覆盖的图标保持在其位置。

我对 jQuery 相当陌生，我尝试了很多东西，但无法一起获得一个有效的示例。最后，该图标需要可链接，以便我可以为其分配 onClick 功能。

谁能给我一些例子或指出正确的方向？

我正在使用最新版本的 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:47:23.280

由于您希望图标最终可点击，因此我会避免使用`:after`包含元素来显示图标的直觉。相反，我会使用一个简单的`div`包装器，其中包含可拖动的图像和里面的图标：

```
<div class="draggable-image">
  <img src="http://placekitten.com/100/100" />
  <img src="help.png" class="icon" />
</div> 
```

然后我将容器的样式设置为`inline-block`，以便它匹配其 child 的宽度（和高度，在大多数情况下）`img`。这也是在容器中放置图标的好时机：

```
.draggable-image {
  position: relative;
  display: inline-block;
}
.draggable-image img.icon {
  position: absolute;
  top: 10px;
  right: 10px;
} 
```

`ui.helper`现在我们可以绑定可拖动事件，从提供给我们各种可拖动方法的对象中引用可拖动图像：

```
$(".draggable-image").draggable({
  stop: function( event, ui ) {
    alert( $("img:first", ui.helper).attr("src") );
  }
}); 
```

注意我正在访问`:first`图像，避免我们的`.icon`图像。最后，我们可以将一些点击逻辑绑定到我们的`.icon`，以便我们可以对人们点击它做出反应：

```
$(".draggable-image .icon").on("click", function(){
  alert( "You've clicked the icon" );
}); 
```

演示：http: [//jsbin.com/ihugas/3/edit](http://jsbin.com/ihugas/3/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:46:20.753

将图标定位在包含 div 的绝对左上角（它包含原始的“背景”图像）。使用 draggable 拖动 div：http: [//jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:51:13.013

您不能将它们都包装在“位置：相对”的 div 中并使 div 可拖动吗？然后将图像的 z-index 设置为 1 并将图标设置为 2 以便它始终位于顶部？然后，您可以在图标上使用“位置：绝对；右：0px；顶部：0px”。

如此相似

[http://jsfiddle.net/qJHuf/1/](http://jsfiddle.net/qJHuf/1/)

但是 .image div 将是一个图像，而 .holder 将是可拖动的

# mysql - 快速将数据加载到文件中，并按 id 连接到表中

> ID：10636894
> 
> 赞同：0
> 
> 时间：2012-05-17T13:43:05.953
> 
> 标签：mysql, file, load

拥有一个使用 InnoDB 和外键的 MySQL 数据库...

我需要从一个巨大的 CSV 文件中导入 100MiB 的数据并将其拆分为两个表，并且记录必须如下所示

```
表格1
id|数据|数据2

表2
id|table1_id|data3

```

`Table2.table1_id`外键引用在哪里`Table1.id`。

一个实例的 MySQL 序列如下所示

1.  将文件加载到临时表中
2.  之后从临时表插入到所需的
3.  获取最后一个插入 ID
4.  使用此参考 ID 执行最后一个插入组...

那真是太慢了……

如何使用文件加载到...中来做到这一点？任何具有高速结果的真实想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:59:29.873

您可以临时添加列`data3`（`Table1`我还添加了一个`done`列来区分源自 CSV 的记录与那些已经存在/源自其他地方的记录）：

```
ALTER TABLE Table1
  ADD COLUMN data3 TEXT,
  ADD COLUMN done BOOLEAN DEFAULT TRUE;

LOAD DATA
  INFILE '/path/to/csv'
  INTO TABLE Table1 (data, data2, data3)
  SET done = FALSE;

INSERT
  INTO Table2 (table1_id, data3)
  SELECT (id, data3) FROM Table1 WHERE NOT done;

ALTER TABLE Table1
  DROP COLUMN data3,
  DROP COLUMN done; 
```

# php - __FRONTEND__ 常量无法正常工作

> ID：10636903
> 
> 赞同：0
> 
> 时间：2012-05-17T13:43:40.570
> 
> 标签：php, constants

我有以下目录结构：

```
/webroot
    /static
        /img
        /css
          - style.css
        /js
        /pdf
        /mp3
        /mp4
    - index.php 
```

在我的`'index.php'`我有以下代码：

```
// define the frontend path constant
$frontend = realpath(dirname(__FILE__));
define('__FRONTEND__', $frontend); 
```

我在后端（在 webroot 之外）有我的模板，当我编写这样的代码时：

```
<link type="text/css" 
      rel="stylesheet" 
      href="<?php echo __FRONTEND__; ?>/static/css/style.css"
/> 
```

CSS 代码未显示。我也没有收到警告。当我查看源代码时，我看到：

```
<link type="text/css" 
      rel="stylesheet" 
      href="C:\xampp\htdocs\projectx\webroot/static/css/style.css"
/> 
```

在这里你可以看到不同的斜线：`'\'`vs `'/'`。奇怪的是，使用相同类型的结构不会在我的后端常量上失败，我在我的后端常量`'__BACKEND__'`中也有`'index.php'`：

```
// define the frontend path constant
$backend = realpath(dirname(__FILE__) . '/../backend');
define('__BACKEND__', $backend); 
```

为什么我的`'__FRONTEND__'`常量失败了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:51:56.773

你不应该`realpath(dirname(__FILE__))`在你的模板中使用。这是系统的路径，而不是您的用户可以访问的路径。

如果您的网络根目录是*webroot/*如您所说，那么`href="/static/css/style.css"`就可以了。

此外，您的问题与斜杠和反斜杠无关，两者都适用于 Windows。

# wcf - 找不到端点元素

> ID：10636915
> 
> 赞同：0
> 
> 时间：2012-05-17T13:44:03.890
> 
> 标签：wcf, web-services, service-reference

错误信息是：

> 在 ServiceModel 客户端配置部分中找不到名为“NetbiterServiceReference.nbws”和合同“NetbiterServiceReference.nbws”的端点元素。

我的`app.config`文件如下所示：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="nbws.cfcSoapBinding">
                <security mode="Transport" />
            </binding>
            <binding name="nbws.cfcSoapBinding1" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://../nbws.cfc"
            binding="basicHttpBinding" bindingConfiguration="nbws.cfcSoapBinding"
            contract="NetbiterServiceReference.nbws" name="nbws.cfc" />
    </client>
</system.serviceModel> 
```

在我的代码中，我确实喜欢这样，并且给出了上面的错误消息。

```
 nbwsClient proxy = new nbwsClient(); 
```

然后我做了所有这些组合，但结果相同：

```
nbwsClient proxy = new nbwsClient("NetbiterServiceReference.nbws", "https://../nbws.cfc");
nbwsClient proxy = new nbwsClient("nbws", "https://../nbws.cfc");
nbwsClient proxy = new nbwsClient("nbws.cfc", "https://../nbws.cfc"); 
```

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:02:43.463

错误消息是：在 ServiceModel 客户端配置部分中找不到名为“NetbiterServiceReference.nbws”和合同“NetbiterServiceReference.nbws”的端点元素。我的 app.config 文件如下所示：

* * *

如果您按如下方式更改端点部分，您将丢失此错误。

```
<endpoint address="https://../nbws.cfc" 
            binding="basicHttpBinding" bindingConfiguration="nbws.cfcSoapBinding" 
            contract="NetbiterServiceReference.nbws" name="NetbiterServiceReference.nbws" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:26:16.190

自己解决了。问题是测试项目，使用代码和 app.config 运行项目在 app.config 中没有正确的信息。

# c# - 如何在 C# 中将 ToList 与 SQL 视图一起使用？无效的对象名称 dbo.*

> ID：10636917
> 
> 赞同：0
> 
> 时间：2012-05-17T13:44:13.313
> 
> 标签：c#, asp.net-mvc-3, views

我需要从涉及视图的查询中获取列表。这是代码：

```
IEnumerable<Link> links = _db.Links.Include("User").Include("ModUser");
return View(links.ToList()); 
```

我的人员视图在用户和 ModUser 中与上述链接表有两个一对多的关系。ToList 调用引发 EntityCommandExecutionException，并带有“无效的对象名称 'dbo.Person'”。如何将这些数据放入列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:58:39.917

我是这样的一个小鬼，这很尴尬。我试图访问一个名为 Persons 的视图。早在制作它时，他们就将其命名为“人”。我的 DBA 改变了它，我最终让它工作了。

# c# - 如何通过 WPF 中的 DataGrid SelectedItems 进行 Linq？

> ID：10636918
> 
> 赞同：2
> 
> 时间：2012-05-17T13:44:19.460
> 
> 标签：c#, wpf, linq

我正在尝试做：

```
bool hasXItems = (grid.SelectedItems as IEnumerable<Y>).Any(i => ((Y) i).IsX); 
```

这似乎不起作用（铸造的结果是`null`）。如何`DataGrid.SelectedItems`使用 Linq 查询？

这是我要查询的属性：http: [//msdn.microsoft.com/en-us/library/system.windows.controls.primitives.multiselector.selecteditems (v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.multiselector.selecteditems(v=vs.90).aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T13:51:42.940

我无法从您的评论中弄清楚您想要做什么，但您可以通过这种方式使用 LINQ。

```
DataGridRow[] results = datagrid.SelectedItems
                                .OfType<DataGridRow>()
                                .Where(x => ((bool)x.IsFocused))
                                .ToArray(); 
```

它将遍历所有选定的行并返回聚焦的行。

此查询有 4 个部分

1.  `datagrid.SelectedItems`. 此行会将所有选定的行作为列表提供，因为 SelectedItems 返回一个 IList 对象。

2.  `.OfType<DataGridRow>()`. 此行将从第 1 行返回的所有选定行作为 DataGridRow 返回。

3.  `.Where(x => ((bool)x.IsFocused))`. 此行将遍历从第 2 行返回的所有 DataGridRows 以查找聚焦的行。

4.  `.ToArray()`. 此行会将第 3 行返回的所有聚焦的 DatagridRows 转换为 Array 并将其放入 results 变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:57:47.187

如果您的 .IsX() 表示“是 X”，

```
grid.SelectedItems.OfType<X>().Any(); 
```

否则，

```
grid.SelectedItems.OfType<Y>().Any(item => item.IsX()); 
```

# javascript - 响应式网络：SVG 可视化？

> ID：10636920
> 
> 赞同：2
> 
> 时间：2012-05-17T13:44:28.357
> 
> 标签：javascript, svg, media-queries, responsive-design, modernizr

我正在构建一个交互式 SVG 可视化（见图）并希望提供：

**1）适应更小的屏幕尺寸（媒体查询？）**

**2) 禁用 JavaScript 时的一个不错的回退 (Modernizr?)**

***关于1：***

您认为使用固定/离散像素宽度更好还是应该让 SVG 块适应可用宽度？

我是否需要一个窗口调整大小侦听器来动态更新布局，或者在使用媒体查询时是否过大？

***关于2：***

保持设计响应，用静态图像替换 SVG 可视化的好方法是什么？

![在此处输入图像描述](../Images/12c2d99c158ee076612f6c08ef0a04b0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T22:03:36.297

> 您认为使用固定/离散像素宽度更好还是应该让 SVG 块适应可用宽度？

缩放是矢量图形的主要优势，为什么不呢？

> 我是否需要一个窗口调整大小侦听器来动态更新布局，或者在使用媒体查询时是否过大？

不

> 保持设计响应，用静态图像替换 SVG 可视化的好方法是什么？

将[JSON 数据源转换为 XML ，在服务器上](http://developer.yahoo.com/yql/guide/response.html)[使用 XSLT](https://www.xml.com/pub/a/2004/09/08/tree.html)生成SVG ，然后将静态 SVG 发送到客户端

# performance - 休眠选择批量大小

> ID：10636921
> 
> 赞同：1
> 
> 时间：2012-05-17T13:44:31.940
> 
> 标签：performance, hibernate, batch-file, mapping, size

## *你好，*

我有一个简单的 J2EE 应用程序，它使用 Hibernate（版本 3）显示来自 db（Oracle DB）的前 100 条员工记录。所有的表都有大约 10000 条记录。有 Country(id, name), City(id, name, country_id), Address(id, address, city_id), Company(id, name), Office(id, company_id, address_id), Employee(id, name, address_id ), Position(id, name) 和 Employee_Position_Office(employee_id, position_id, office_id) 在数据库中。我对批量大小有一些问题。我需要在 4 个 sql-request（由 Hibernate 生成）中完成。让我们告诉你我有什么：

在我的类映射中，我设置了 batch-size=100，Hibernate 为 Employee、OfficePosition 和 Address 加载创建了 3 个 sql-request，看：

```
select * from ( select employee0_.ID as ID6_, employee0_.NAME as NAME6_,     employee0_.ADDRESS as ADDRESS6_ from EMPLOYEE employee0_ ) where rownum <= ?

select officeposi0_.EMPLOYEE_ID as EMPLOYEE1_6_1_, officeposi0_.POSITION_ID as POSITION2_1_, officeposi0_.OFFICE_ID as OFFICE3_1_, position1_.ID as ID5_0_, position1_.NAME as NAME5_0_ from EMPLOYEE_POSITION_OFFICE officeposi0_ inner join POSITION position1_ on officeposi0_.POSITION_ID=position1_.ID where officeposi0_.EMPLOYEE_ID in (100x ?)

select address0_.ID as ID2_2_, address0_.ADDRESS as ADDRESS2_2_, address0_.CITY_ID as CITY3_2_2_, city1_.ID as ID1_0_, city1_.NAME as NAME1_0_, city1_.COUNTRY_ID as COUNTRY3_1_0_, country2_.ID as ID0_1_, country2_.NAME as NAME0_1_ from ADDRESS address0_ left outer join CITY city1_ on address0_.CITY_ID=city1_.ID left outer join COUNTRY country2_ on city1_.COUNTRY_ID=country2_.ID where address0_.ID in (100x ?) 
```

如果我将批量大小更改为超过 100 的数量，则没有任何变化 - 这很好。

但随后（在这些请求之后）Hibernate 生成 Office 加载请求，我遇到了一些问题，让我们向您展示：我的 100 名第一批员工在 397 个办公室工作（随机生成），Hibernate 应该在批量大小超过 397，当我将批量大小设置为 397 时它工作正常（在 1 个 sql 请求中），

```
select office0_.ID as ID4_4_, office0_.COMPANY_ID as COMPANY2_4_4_, office0_.ADDRESS_ID as ADDRESS3_4_4_,  (SELECT COUNT(*) FROM EMPLOYEE_POSITION_OFFICE
            E WHERE
            E.OFFICE_ID=office0_.ID)
         as formula0_4_, company1_.ID as ID3_0_, company1_.NAME as NAME3_0_, address2_.ID as ID2_1_, address2_.ADDRESS as ADDRESS2_1_, address2_.CITY_ID as CITY3_2_1_, city3_.ID as ID1_2_, city3_.NAME as NAME1_2_, city3_.COUNTRY_ID as COUNTRY3_1_2_, country4_.ID as ID0_3_, country4_.NAME as NAME0_3_ from OFFICE office0_ left outer join COMPANY company1_ on office0_.COMPANY_ID=company1_.ID left outer join ADDRESS address2_ on office0_.ADDRESS_ID=address2_.ID left outer join CITY city3_ on address2_.CITY_ID=city3_.ID left outer join COUNTRY country4_ on city3_.COUNTRY_ID=country4_.ID where office0_.ID in (397x ?) 
```

但是当我设置任何其他数字（小于或大于 397）时，Hibernate 会生成几个具有相同“body”但其他“tails”的 sql 请求。例如，当 batch-size = 400 时有结果。

```
...in (200x ?)
...in (100x ?)
...in (50x ?)
...in (25x ?)
...in (12x ?)
...in (10x ?) 
```

请告诉我我做错了什么，可以解决吗？谢谢。

我的映射：

```
 <class name="---.Address" table="ADDRESS"
    batch-size="100">
        <id name="id" type="long">
            <column name="ID" />
            <generator class="increment" />
    </id>
    <property name="address" type="java.lang.String">
        <column name="ADDRESS" />
    </property>
    <many-to-one name="city" class="---.City"
        fetch="join">
        <column name="CITY_ID" />
    </many-to-one>
</class>

<class name="---.City" table="CITY">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="NAME" />
    </property>
    <many-to-one name="country" class="---.Country"
        fetch="join">
        <column name="COUNTRY_ID" />
    </many-to-one>
</class>

<class name="---.Company" table="COMPANY">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="NAME" />
    </property>
</class>

<class name="---.Country" table="COUNTRY">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="NAME" />
    </property>
</class>

<class name="---.Employee" table="EMPLOYEE"
    batch-size="100">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="NAME" />
    </property>
    <many-to-one name="address" class="---.Address"
        fetch="join">
        <column name="ADDRESS" unique="true" />
    </many-to-one>
    <map name="officePositions" table="EMPLOYEE_POSITION_OFFICE" lazy="false"
        fetch="join" batch-size="100">
        <key>
            <column name="EMPLOYEE_ID"></column>
        </key>
        <map-key-many-to-many class="---.Office">
            <column name="OFFICE_ID">
            </column>
        </map-key-many-to-many>
        <many-to-many column="POSITION_ID"
            class="---.Position" />
    </map>
</class>

<class name="---.Office" table="OFFICE"
    batch-size="400">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <many-to-one name="company" class=---.Company"
        fetch="join">
        <column name="COMPANY_ID" />
    </many-to-one>
    <many-to-one name="address" class="---.Address"
        fetch="join">
        <column name="ADDRESS_ID" />
    </many-to-one>
    <property name="collegues">
            <formula> 
SELECT COUNT(*) FROM EMPLOYEE_POSITION_OFFICE
            E WHERE
            E.OFFICE_ID=ID
        </formula>
    </property>
</class>

<class name="---.Position" table="POSITION">
    <id name="id" type="long">
        <column name="ID" />
        <generator class="increment" />
    </id>
    <property name="name" type="java.lang.String">
        <column name="NAME" />
    </property>
</class> 
```

休眠配置：

```
<hibernate-configuration>
<session-factory>
    <property name="connection.url">jdbc:oracle:thin:@localhost:1521:xe</property>
    <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
    <property name="connection.username">---</property>
    <property name="connection.password">----</property>
    <property name="connection.pool_size">10</property>
    <property name="current_session_context_class">thread</property>
    <property name="dialect">org.hibernate.dialect.Oracle10gDialect</property>
    <property name="hibernate.use_sql_comments">false</property>
    <property name="hibernate.format_sql">false</property>
    <property name="hibernate.show_sql">true</property>

    <mapping resource="---/Country.hbm.xml" />
    <mapping resource="---/City.hbm.xml" />
    <mapping resource="---/Address.hbm.xml" />
    <mapping resource="---/Company.hbm.xml" />
    <mapping resource="---/Office.hbm.xml" />
    <mapping resource="---/Position.hbm.xml" />
    <mapping resource="---/Employee.hbm.xml" />
</session-factory> 
```

# html - 悬停时显示的背景图像

> ID：10636922
> 
> 赞同：3
> 
> 时间：2012-05-17T13:44:32.267
> 
> 标签：html, css

我有一个按钮，当悬停在上面时，我希望背景图像也显示出来。（这是一个箭头按钮的解释）。有很多类似的问题，但我无法完全调整答案以适合我。

HTML看起来像

```
<div id="header_feedback">
    <a href="#contactForm">
        <img title="Add an Event" src="./img/header_feedback.png" alt="Give us your Feedback"/>
    </a>
</div> 
```

CSS然后是

```
#header_feedback
{margin-left:730px;
margin-top:-135px;
position:absolute;}

#header_feedback:hover
{
background: url ('./img/addevent_tip.png');
} 
```

任何想法都非常欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:12:54.350

这里的主要问题不在于您的 CSS。[Itagi 的回答](https://stackoverflow.com/a/10636964/259014)`url`正确地确定了您在括号/地址之间不能有空格的小问题。

但还有两个更大的问题：

1.  **无效的图片 url**：应用时，`background: url('./img/addevent_tip.png');`找不到有效的图片。要解决此问题，您需要两个句点或零个句点。所以要么`background: url('/img/addevent_tip.png');`或`background: url('../img/addevent_tip.png');`
2.  **应用于不透明图像的背景不可见**：由于 div 的全部内容是图像并且该图像没有透明度，因此即使它正确发生，您也无法看到悬停变化。您可以通过使图像的一部分透明（并且可能为非悬停状态设置背景，使其看起来像通常的方式）或放弃图像以支持 CSS spriting 来对此进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:46:56.230

您只需要通过以下方式更改它：

```
#header_feedback:hover
{
background: url('./img/addevent_tip.png');
} 
```

'url' 和实际 url 之间没有空格

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T13:48:41.347

```
#header_feedback a img{ display:none;}
#header_feedback a:hover img{display:block} 
```

# hover - 悬停和旧/新浏览器

> ID：10636923
> 
> 赞同：0
> 
> 时间：2012-05-17T13:44:32.610
> 
> 标签：hover

我用类似精灵的技术制作了翻转效果

```
<a href="#">
<img width="240" height="160" src="240x160.jpg" class="…wp-post-image" alt="287" title="287" />
</a>

a{
  display:block;
  overflow: hidden;
  width:120px;
  height: 160px;
}

a:hover img{
  margin-left: -120px;
} 
```

它可以工作，但这样更好吗（在 xhtml 1 stric 或 html5 中）？

```
 a img:hover{
    margin-left: -120px;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:50:56.123

最好使用 background-image 属性而不是实际图像以避免浏览器问题。

```
a{
    display:block;
    overflow:hidden;
    width:120px;
    height:160px;
    background:url(240x160.jpg) no-repeat 0 0;
}
a:hover{
    background-position:-120px 0;
} 
```

# opengl - glfwLoadTexture2D 不加载纹理，而是显示黄色填充四边形

> ID：10636926
> 
> 赞同：0
> 
> 时间：2012-05-17T13:44:38.350
> 
> 标签：opengl, textures, glfw

我正在尝试使用 glfwLoadTexture2D 加载纹理以将一些 tga 文件加载到我的程序中，但它们不是出现在四边形上的纹理而是黄色填充

我通过

```
char path[] = "\Textures\coblestone.tga"; 
```

至

```
texture = loadTexture(path); 
```

内部渲染和

这就是我加载纹理的方式

```
GLuint loadTexture(char *imagepath){

GLuint Texture;
glGenTextures(1,&Texture);
glBindTexture(GL_TEXTURE_2D,Texture);

if(glfwLoadTexture2D(imagepath, GLFW_BUILD_MIPMAPS_BIT)){
  glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
  return Texture;
}

else
     printf("texture did not load: %d\n",errorCheck());
} 
```

感谢有关 glGetError 的提示，它确实有助于缩小原因。但是，如果您发现我尝试抓取图像的方式有什么问题，您能告诉我吗？Textures 文件夹在我的项目目录中，我确保所有内容都拼写正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T21:46:00.667

确保您首先初始化 glfw。

另外，我相信你的路径应该是“Textures/coblestone.tga”

请注意，“cobblestone”有两个 b，不确定您的拼写是否一致。

# android - Facebook图像共享在模拟器中工作但在设备中不工作

> ID：10636927
> 
> 赞同：1
> 
> 时间：2012-05-17T13:44:56.560
> 
> 标签：android

现在我正在开发一个 Android 应用程序。在我的应用程序中，我必须将图片从我的画廊提交到 facebook。我使用了以下代码。

```
if (item == 1) {
        Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

startActivityForResult(Intent.createChooser(intent, "Complete      action using"), PICK_FROM_FILE);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data)
 {
        if (resultCode != RESULT_OK) return;

        Bitmap bitmap   = null;

        if (requestCode == PICK_FROM_FILE) {

            mImageCaptureUri = data.getData(); 

            mPath = getRealPathFromURI(mImageCaptureUri); //from Gallery 

            if (mPath == null){
                    mPath = mImageCaptureUri.getPath(); //from File Manager
            }

            if (mPath != null) {
                System.out.println("mpath is not null"+mPath);
                bitmap  = BitmapFactory.decodeFile(mPath);
            }

        }
}
private void postToFacebook(String desc){   

    AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);

    Bundle params = new Bundle();

     try {

        params.putByteArray("photo",
        Utility.scaleImage(getApplicationContext(),mImageCaptureUri));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
     params.putString("caption", desc);
     mAsyncFbRunner.request("me/photos", params, "POST",
             new PhotoUploadListener());
} 
```

它在模拟器中对我来说工作正常，但在真实设备图像中没有发布。但没有崩溃。请帮助我的朋友

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:27:07.743

首先检查您的清单，这可能会对您有所帮助。

```
android.permission.MANAGE_ACCOUNTS 
```

# javascript-events - jQuery - 将 .live() 转换为 .on()

> ID：10636932
> 
> 赞同：6
> 
> 时间：2012-05-17T13:45:12.987
> 
> 标签：javascript-events, event-handling, jquery

如何将这个旧的 jQuery 代码合并到 v1.7 中`.on()`？

v1.3 `.live()`：

```
 $('#results tbody tr').live({
    mouseenter:
       function () { $(this).find('.popup').show(); },
    mouseleave:
       function () { $(this).find('.popup').hide(); }
    }); 
```

v1.7 `.on()`：

```
$('#results tbody').on('mouseenter', 'tr', function () {
    $(this).find('.popup').show();
});
$('#results tbody').on('mouseleave', 'tr', function () {
    $(this).find('.popup').hide();
}); 
```

我想将两个事件处理程序都传递给一个`.on()`调用，但保持出色的事件委托`.on()`允许我这样做。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T13:51:32.597

您可以将事件映射作为第一个参数传递：

```
$('#results tbody').on({
    'mouseenter' : function () {
        $(this).find('.popup').show();
     },
    'mouseleave' : function () {
        $(this).find('.popup').hide();
    }
}, 'tr'); 
```

[jQuery 文档](http://api.jquery.com/on/)：

> **.on( events-map [, selector] [, data] )** ,
> **events-map**一个映射，其中字符串键表示一个或多个空格分隔的事件类型和可选的命名空间，值表示要调用的处理函数事件）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T13:51:15.040

> 我只想在一个对象中传递两个事件处理程序，就像我在第一个示例中所做的那样。

在这种情况下，您可以将两个事件附加在一起，然后在处理程序本身中区分它们，如下所示：

```
$('#results tbody').on('mouseenter mouseleave', 'tr', function (e) {
    if (e.type == "mouseenter") {
        $(this).find('.popup').show();
    }
    else {
        $(this).find('.popup').hide();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:49:03.393

使用的格式在[live文档中指定](http://api.jquery.com/live/)

```
$(document).on({...events...}, selector, data); 
```

-或者-

```
$(document).on(event, selector, data, callback); 
```

1.7+中的函数代码`live`现在只是一个传递函数：

```
live: function( types, data, fn ) {
    jQuery( this.context ).on( types, this.selector, data, fn );
    return this;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:52:02.443

以您的第一个示例并更改`live`为`on`应该是您所需要的

```
 $('#results tbody tr').on({
mouseenter:
   function () { $(this).find('.popup').show(); },
mouseleave:
   function () { $(this).find('.popup').hide(); }
}) 
```

请参阅：[http ://api.jquery.com/on/#example-6](http://api.jquery.com/on/#example-6)

# jquery - jPlayer 多视频演示代码？

> ID：10636933
> 
> 赞同：1
> 
> 时间：2012-05-17T13:45:12.930
> 
> 标签：jquery, html, video, html5-video, jplayer

我只是在学习jPlayer。喜欢它的多功能性，为它运行的每个系统选择合适的格式。是否有任何我应该注意的来自 HappyWorm 或第三方的多视频演示代码？

我想为这样的多个视频创建一个播放器：

![在此处输入图像描述](../Images/db4d1f2a94ff54627d692820a5757aec.png)

PS如果你想在一个最大化的问题上帮助我`iframe`，请在这里这样做：[jPlayer fullscreen while inside IFRAME？](https://stackoverflow.com/questions/10626813/jplayer-fullscreen-while-inside-iframe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:57:38.870

```
listItem += "<a href='javascript:;' class='" + this.options.playlistOptions.itemClass + "' tabindex='1'><img src='" + media.thumb + " ' />" + media.title +  (media.artist ? " <br /><span class='jp-artist'>by " + media.artist + "</span>" : "") + "</a>"; 
```

added a new parameter 'thumb' in de html file ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T01:28:10.983

首先，到 jplayer.org 下载页面，获取 2.1 的源文件。从源包中获取未压缩的 jplayer.playlist.js 文件。您将需要查看第 243 行以查找吐出播放列表 HTML 的位。您可以使用 poster 参数将缩略图添加到播放列表 HTML 中。像这样的东西（未经测试的代码）：

```
// add the image
listItem += "<a href='javascript:;' class='" + this.options.playlistOptions.itemClass + "-thumb' tabindex='1'><img src='" + media.poster + "' /></a>";
// existing code to make the title
listItem += "<a href='javascript:;' class='" + this.options.playlistOptions.itemClass + "' tabindex='1'>" + media.title + (media.artist ? " <span class='jp-artist'>by " + media.artist + "</span>" : "") + "</a>"; 
```

接下来，您需要从一个主题 CSS 文件开始，作为与视频相关的一些基本要素的参考，然后从头开始重做其余部分，以构建与您的设计相匹配的播放器。

还可以查看 setPlaylist 演示以及您现在可以使用播放列表执行的所有其他很酷的事情：

[http://jplayer.org/latest/demo-02-jPlayerPlaylist/](http://jplayer.org/latest/demo-02-jPlayerPlaylist/)

我发现这种加载/更改播放列表的方法非常棒。

# javascript - 替换文件名 (SRC) 的结尾

> ID：10636935
> 
> 赞同：2
> 
> 时间：2012-05-17T13:45:27.810
> 
> 标签：javascript, replace, filenames, src

我这里有点问题。我在网上找到了这个脚本，并根据我的需要对其进行了一些修改。此脚本显示鼠标悬停后的图像预览。

最初，只有一种方法可以做到这一点。但是我的网站上有 2 个不同的部分，我想在其中显示具有不同属性（高度、宽度）的图像。我能够做到这一点，问题是在第二部分，src（文件名）是我要显示的实际图片的缩略图，所以当它下降时，它只会炸毁一张非常小的图片，看起来很坏。但希望这会让事情变得更容易：所有缩略图都被命名为 whaterver_small.jpg 和原件，whaterver_small.jpg 现在，如果我可以删除 _small 或 _small.jpg 并从该文件的末尾替换为 .jpg，那将显示对我来说是原始图片，这将是很棒的。这是在 html 上调用函数的方式：

原尺寸，无需更改：

```
<a href=http://www.whatever.net/1.html');">
<img alt="Copper" border="1" height="64" src="http://www.whatever.net/whatever_small.jpg" width="85" onmouseover="showImage1(this.src,this,'Whatever')" /></a> 
```

显示image2，我遇到问题的那个。

```
<a href=http://www.whatever.net/1.html');">
<img alt="Copper" border="1" height="64" src="http://www.whatever.net/whatever_small.jpg" width="85" onmouseover="showImage2(this.src,this,'Whatever')" /></a> 
```

这是脚本

```
 var floatWidth = 150;  // set the width of the floating image
    var floatHeight = 100;  // set its height
    var floatWidth2 = 320;  // set the width of the floating image
    var floatHeight2 = 240;  // set its height

    var midWindow = 0;
    var nContainer = "";
    var IE = false;

    if (navigator.appName == 'Microsoft Internet Explorer'){IE = true}

    function stayHome(m){        

            if (IE)
                    {
                    var currX = event.clientX;
                    var currY = event.clientY;
                    }
            else        {
                    var currX = m.pageX;
                    var currY = m.pageY;
                    }
            if (document.documentElement && document.documentElement.scrollLeft || document.documentElement && document.documentElement.scrollTop)
                    {
                    var iL = document.documentElement.scrollLeft;        
                    var iV = document.documentElement.scrollTop;
                    }
            else        {
                    var iL = document.body.scrollLeft;        
                    var iV = document.body.scrollTop;        
                    }
            if (currX > midWindow+80)
                    {
                    var msgWidth = nContainer.clientWidth;
                    if (IE){nContainer.style.left = (currX-msgWidth-10+iL)+'px'}
                    else {nContainer.style.left = (currX-msgWidth-10)+'px'}
                    }
            else        {
                    if (IE){nContainer.style.left = (currX+15+iL)+'px'}
                    else {nContainer.style.left = (currX+15)+'px'}
                    }
            if (IE){nContainer.style.top = (currY+iV-(floatHeight/2)+70)+'px'}
            else {nContainer.style.top = (currY-(floatHeight/2)+70)+'px'}
    }        

    function hideImage(){

            while (nContainer.lastChild)
                    {nContainer.removeChild(nContainer.lastChild)}
            document.getElementById('isFloat').style.display = 'none';
    }

    function showImage(isImg,currItem,currCaption){

            document.getElementById('isFloat').style.display = 'inline';
            nIMG  = document.createElement('img');
            nContainer.appendChild(nIMG);
            nIMG.setAttribute('src',isImg);
            nIMG.setAttribute('width',floatWidth);
            nIMG.setAttribute('height',floatHeight);
            nCaption = document.createElement('div');
            nCaption.style.textAlign = "center";
            nCaption.style.backgroundColor = '#EAE3C6';
            nCaption.style.padding = '5px';
            nCaption.style.color = '#000000';
            nCaption.style.fontFamily = 'Sans-serif';
            nCaption.style.fontSize = '10pt';
            nCaption.style.borderTop = "1px solid black";
            nContainer.appendChild(nCaption);
            nCaption.innerHTML = currCaption;
            currItem.onmouseout=hideImage;
    }

    function showImage2(isImg,currItem,currCaption){

            document.getElementById('isFloat').style.display = 'inline';
            nIMG  = document.createElement('img');
            nContainer.appendChild(nIMG);
            nIMG.setAttribute('src',isImg);
            nIMG.setAttribute('width',floatWidth2);
            nIMG.setAttribute('height',floatHeight2);
            nCaption = document.createElement('div');
            nCaption.style.textAlign = "center";
            nCaption.style.backgroundColor = '#EAE3C6';
            nCaption.style.padding = '5px';
            nCaption.style.color = '#000000';
            nCaption.style.fontFamily = 'Sans-serif';
            nCaption.style.fontSize = '10pt';
            nCaption.style.borderTop = "1px solid black";
            nContainer.appendChild(nCaption);
            nCaption.innerHTML = currCaption;
            currItem.onmouseout=hideImage;
    }

    function getMidWindow(){

            if (document.documentElement && document.documentElement.scrollLeft || document.documentElement && document.documentElement.scrollTop)
                    {
                    midWindow = document.documentElement.clientWidth/2;
                    }
            else        {
                    midWindow = document.body.clientWidth/2;
                    }
    }

    function initFloatImg(){

            var nBody = document.getElementsByTagName('body')[0];
            var nDiv = document.createElement('div');
            nDiv.id = "isFloat";
            nDiv.style.position = "absolute";
            nDiv.style.top = "0px";
            nDiv.style.left = "0px";
            nDiv.style.border = "1px solid black";
            nDiv.style.padding = "5px";
            nDiv.style.backgroundColor = "#ffffff"
            nBody.appendChild(nDiv);
            nContainer = document.getElementById('isFloat');
            document.onmousemove = stayHome;
            hideImage();
            if (!IE){document.captureEvents(Event.mousemove)}
            getMidWindow();
    }

    onload=initFloatImg;
    onresize=getMidWindow; 
```

更新：

好的，所以我更新了此页面中的脚本，现在它可以正常工作了。我遇到了另一个问题，当鼠标悬停的图片接近页面末尾时，预览被截断。我希望能够向上移动预览，所以没有滚动条。这是一个功能性的活生生的例子：[http](http://www.soccer.com/Navigation.process?Ne=178&N=4294960224+346) ://www.soccer.com/Navigation.process?Ne=178& N=4294960224+346 图片永远不会被截断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:50:41.550

`_small`如果我正确理解您想要的内容，这将从您的所有图像源中删除所有匹配项：

```
$("img").each(function() {
    $(this).attr("src", $(this).attr("src").replace("/_small(?=\.)/", ""));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:56:13.467

替换`showImage2`函数中的以下行

```
nIMG.setAttribute('src',isImg); 
```

和

```
nIMG.setAttribute('src',isImg.replace(/_small\./, '.')); 
```

# git - Git忽略和未版本化的本地文件

> ID：10636938
> 
> 赞同：1
> 
> 时间：2012-05-17T13:45:41.007
> 
> 标签：git, git-branch, gitignore

有很多问题涉及忽略 git 中的内容，但似乎没有一个适用于我的特定情况。我有一个看起来像这样的项目：

```
proj
|-foo/
|--project-file.txt
|-bar/
|--project-file2.txt
|-temp/
|--machine-specific-file.txt
|--machine-specific-file2.txt 
```

（编辑：为清楚起见添加）我的 .gitignore 文件：

```
temp/ 
```

我的项目有几个分支，所有分支中都有不同的特定于机器的文件。我的问题是：因为我没有跟踪特定于机器的文件（没有理由签入它们，因为它们只在这里有用），每次我切换分支并尝试打开我的项目时，机器特定的文件被覆盖。这是一个问题，因为我的软件需要大约 10 分钟来生成它们——当我每天切换分支 5 或 6 次时很烦人。有没有办法以某种方式跟踪每个分支的机器特定文件，而不必将它们存储在服务器上？

我尝试过的事情：

*   为我需要工作的每个分支创建一个新的本地分支，将特定于机器的文件保存在那里，当我需要合并我的工作时，首先将其与原始分支合并（简单，因为它是快进），并且然后去与其他一切合并。问题：它可以工作，但是很混乱，由于 .gitignore 的差异，有时需要一段时间才能进行第一次合并。也许这是正确的方法？似乎应该有更好的解决方案。

*   制作子模块 - 我不认为我理解这个过程，因为我一直无法让它以我想要的方式工作。由于文件必须命名相同，因此在每个文件夹中，我认为我没有正确指定我想要的存储库的位置。

如果您有任何指示，请告诉我！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:25:18.647

签入符号链接，指向完全被忽略的机器特定目录中的文件怎么样？每个分支都有同名的符号链接，指向不同的目标。每台机器将负责用必要的内容填充特定于机器的目录。

```
分支a：
temp/machine-specific-1 => ../local-files/machine-specific-1-branch-a

b支线：
temp/machine-specific-1 => ../local-files/machine-specific-1-branch-b

```

可以选择签入包含模板文件的目录，从不直接引用，并在本地文件中添加引导脚本，该脚本在新签出时手动复制模板目录中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:51:18.537

添加`temp/`到您的`.gitignore`文件中。

这将忽略此目录中的所有文件。当您克隆到另一台计算机时，此目录中不会放置任何内容（执行`git add .`or时也不会存储`git commit`）

* * *

做一个`submodule`跟随[这个链接](http://git-scm.com/book/en/Git-Tools-Submodules)。做子模块的诀窍是你必须将所有“想要的”文件移动到一个单独的 git 存储库中。如果您在当前的 git 存储库中已经有了子目录但并非不可能，这可能会很棘手（将当前的树克隆到临时树，执行 a [`git filter-branch --subdirectory-filter`](http://palleas.com/2011/02/02/how-i-turned-a-folder-into-a-git-submodule/)，将其推送到公共存储库......这样你就不会失去历史！）。设置单独的遥控器后，您将能够做一个`git add submodule <path to repo> <localpath>`并且一切都会好起来的。

# eclipse - Zend Studio 9 (eclipse) 的 Git 插件不向上游推送

> ID：10636941
> 
> 赞同：2
> 
> 时间：2012-05-17T13:45:52.813
> 
> 标签：eclipse, git, zend-studio, egit, jgit

当我尝试将添加和提交的更改推送到上游时，我会看到一个带有“消息详细信息字段”的对话框，该对话框指示：

```
Repository git@git.somehostedplace.com:somerepo.git

Not Implemented! TODO 
```

在命令行上，我可以推送到 repo，所以我很确定这是 Zend/Eclipse 问题。任何人以前见过这个并且知道发生了什么吗？

我的 JGit 和 EGit 版本是 1.3.0.20120215

附加信息：当我在命令行上浏览到项目工作区和代码时，我可以推送它并得到相同的 TODO 消息。这个问题似乎仅限于 IDE 创建的副本，因为如果我在命令行上执行常规 git clone 一切正常......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T15:59:01.690

因此，经过一番挖掘后，我发现如果您右键单击 Git 项目并选择 Team->Remote->'Configure Push To Upstream'，则会打开一个对话框。

对话框底部有一个标有“Ref Mapping”的框，里面有一些奇怪的东西。我删除了框中的条目，现在我可以毫无问题地推送。

# javascript - 将值从一个域传递到另一个域

> ID：10636948
> 
> 赞同：0
> 
> 时间：2012-05-17T13:46:18.743
> 
> 标签：javascript, vbscript

想将值从一个域传递到另一个域，我试图通过查询字符串传递它，但该值包含大量字符，所以没有通过使用查询字符串获得所有值，你能告诉我我该怎么做.

以下是将值传递给另一个域的代码

```
var iframe='<iframe src="'+url_to_download+'" style="display:none;" frameborder="0" scrolling="no" width="0px" height="0px"></iframe>'; 
```

以下是从查询字符串中读取传递值的代码

```
<%

orders=request.QueryString("ordered_products")
orders=replace(orders,"-aspx",".aspx")
orders=replace(orders,"_","&")
'urlredirect=request.QueryString("url")
cooki=request.Cookies("products_ordered")
orderid=request.QueryString("orderid")
response.Write("<script>alert('"&orders&"')</script>")

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:33:44.420

您可以将数据组装成 JSON 并使用 jQuery 的 JSONP 功能从 domain2 上的 domain1 请求数据。[http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

# android - 如何在应用程序启动时初始化已添加的应用程序小部件？

> ID：10636955
> 
> 赞同：0
> 
> 时间：2012-05-17T13:46:36.607
> 
> 标签：android, android-appwidget

`Observer`我需要使用应用内小部件订阅数据库更改。文档说这种设置的正确位置是`onEnabled()`在`AppWidgetProvider`. 但是，`onEnabled()`仅在添加新小部件时调用。如果应用程序已启动并且小部件已经存在，则不会调用它并且小部件中的数据不会更新。我应该`ACTION_APPWIDGET_ENABLED`在应用程序启动时发送广播还是有另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:04:35.570

> 我需要使用应用程序小部件中的观察者订阅数据库更改。

这是不可能的，除非你要运行一个永久的服务，这不是一个好的设计模式。

`AppWidgetManager`如果这是您自己的数据库，只需在更改数据库内容时将更新推送到您的应用小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T13:58:11.757

尽管 CommonsWare 在上面的回答中是正确的，即为应用小部件保留静态观察者的方法存在缺陷，但为了解决我已经意识到的问题，我在应用启动时发送 ACTION_APPWIDGET_ENABLED 广播。不是一个非常干净的方式，但它的工作原理。

# opengl - 为什么在 OpenGL 的 LookAt 中，如果我们的脸几乎朝上，我们仍然可以看到我们面前的东西？

> ID：10636957
> 
> 赞同：-3
> 
> 时间：2012-05-17T13:46:39.273
> 
> 标签：opengl, opengl-es, glulookat

> **可能重复：**
> [OpenGL 的 LookAt 函数中的 UP 向量到底是什么？](https://stackoverflow.com/questions/10635947/what-exactly-is-the-up-vector-in-opengls-lookat-function)

这与：[OpenGL 的 LookAt 函数中的 UP 向量到底是什么有关？](https://stackoverflow.com/questions/10635947/what-exactly-is-the-up-vector-in-opengls-lookat-function)

如果来电是：

```
 gluLookAt(512, 384, 2000,
                512, 384, 0,
                0.0f, 1.0f, 0.0f); 
```

如果我坐在椅子上直视前方，将 iPad 放在眼前，那么我的头顶就指向天空。因此`(0, 1, 0)`对于 UP 向量，如第 3 行所示。如果我把它改成`(0, 0.00001, 1)`怎么办？这意味着我几乎要躺下，现在我的脸和眼睛都朝向天空。那么为什么结果和我使用的时候完全一样`(0, 1, 0)`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:52:19.767

你可能期望会发生什么？

您传递了 3 组值：一个摄像头位置、一个摄像头要查看的位置以及向上的方向。在你的类比中，如果你在仰望天空，你就*不是*在看你的 iPad。因此，您的观看位置*必须*随着您的向上方向而改变。如果你没有改变你的观察位置，那么当你改变向上的方向时，你期望会发生什么？

向上方向*仅*影响向上相对于您正在寻找的位置。如果你想改变你正在看的东西，你必须真正改变*观察*点。这就是它在那里的原因。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-17T16:09:05.117

经过更多的试验和错误，正如我刚开始学习 OpenGL 一天一样，向上向量必须在平面中具有一些分量，这些分量与相机到目标向量“正常”（或垂直）。

也就是说，例子中是从(512,384,2000)到(512,384,0)，所以向量只有Z方向。上向量必须在 XY 平面上有一些分量（XY 平面是垂直于只有 Z 方向的向量的那个）。

如果没有 x 和 y 分量，也就是说，如果它们都是 0，那么在我的 iPad 2 上，图像根本不显示。因此，在这种情况下，向上向量处理 XY 平面中的旋转，而不是关于 Z 方向的情况。

# android - Android在长按时选择半径内的最近点

> ID：10636960
> 
> 赞同：2
> 
> 时间：2012-05-17T13:46:49.573
> 
> 标签：android, maps, points

我正在使用 Mapsforge，并且我有一个 MapView，我已经添加了一些点。有些点太近了，用户无法单击它们并获得正确的弹出窗口，甚至一直放大。

我想要做的是让他们可以长按地图的一个区域，然后会出现一个可滚动的对话框，列出他们长按或类似的x像素内的点。我可以弄清楚对话框和长按的东西，但我很好奇是否有人知道如何捕获“我点击的 x 像素内的点”而不通过我的应用程序的数据库并对我保存在那里的每个点进行计算？应该有一些我可以调用或使用的mapsforge方法吗？

**编辑：**我最近又回来了，并添加了以下代码来捕捉长按事件，我现在正试图找出一种方法来获取周围的点。我认为它需要基于屏幕上点的位置，因为如果我根据数据库中的纬度和经度来做，我必须为每个缩放级别设置不同的距离值，等等。

```
boolean ACTION_MOVED = false;
long beginTime;
@Override
public boolean onTouch(View view, MotionEvent motionEvent) {
    switch (motionEvent.getAction()) {
        case MotionEvent.ACTION_DOWN: {
            beginTime = System.currentTimeMillis();
            ACTION_MOVED = false;
            break;
        }
        case MotionEvent.ACTION_MOVE: {
            ACTION_MOVED = true;
            break;
        }
        case MotionEvent.ACTION_UP: {
            if (System.currentTimeMillis() - beginTime >= ViewConfiguration.getLongPressTimeout())
                if (!ACTION_MOVED) {
                    Toast.makeText(mapActivity, "long Press", Toast.LENGTH_SHORT).show();
                    ACTION_MOVED = false;
                    return true;
                }
            break;
        }
    }

    return view.onTouchEvent(motionEvent);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:08:33.980

由于这已经被查看了几次，我想我应该发布我是如何最终得到这个工作的。我基本上浏览了数据库，看看每个点是否都在我根据测试选择的某个选择区域内：

```
public static boolean withinSelectionArea(GeoPoint myPointG, GeoPoint dbPointG, Context context) {
    Point myPoint = projection.toPixels(myPointG, null);
    Point dbPoint = projection.toPixels(dbPointG, null);
    float a = dbPoint.x - myPoint.x;
    float b = dbPoint.y - myPoint.y;
    double distance = Math.sqrt(a * a + b * b);
    return distance < context.getResources().getDisplayMetrics().densityDpi / 4;
} 
```

我还覆盖了 onLongPress 处理程序并在其中调用了上述方法。

# android - Android SDK layout_width 和 layout_height xml 属性继承？

> ID：10636962
> 
> 赞同：2
> 
> 时间：2012-05-17T13:46:50.913
> 
> 标签：android, xml, android-layout, inheritance

我一直在尝试使用 Android 操作系统开始编程。使用网站上的教程，我看到 LinearLayout、GridLayout 等视图使用 layout_width 和 layout_height xml 属性，但文档从未显示这些布局的这些属性的继承。我已经阅读了他们需要的地方，但看不到他们如何使用他们从未继承的东西。

希望一个简单的问题一直困扰着我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:54:19.143

检查[http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)和[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

> 名为 layout_something 的 XML 布局属性为视图定义了适合其所在的 ViewGroup 的布局参数。
> 
> 每个 ViewGroup 类都实现了一个扩展 ViewGroup.LayoutParams 的嵌套类。此子类包含定义每个子视图的大小和位置的属性类型，适用于视图组。如图 1 所示，父视图组为每个子视图（包括子视图组）定义了布局参数。请注意，每个 LayoutParams 子类都有自己的用于设置值的语法。每个子元素必须定义适合其父元素的 LayoutParams，尽管它也可以为其自己的子元素定义不同的 LayoutParams。
> 
> 所有视图组都包含一个宽度和高度（layout_width 和 layout_height），并且每个视图都需要定义它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T13:54:32.100

这些属性由 LayoutParams 从[ViewGroup.LayoutParams](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)继承：[LinearLayout.LayoutParams](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)、[GridLayout.LayoutParams](http://developer.android.com/reference/android/widget/GridLayout.LayoutParams.html)等。

# emacs - 是否有语法完成模式或在 emacs 中执行此操作的方法？

> ID：10636963
> 
> 赞同：1
> 
> 时间：2012-05-17T13:46:54.937
> 
> 标签：emacs, syntax, autocomplete

在editplus中，我们可以定义自动完成关键字来自动插入代码片段或代码块。例如。如果我定义了类似下面的内容

```
 #T=ecp
    echo '<p>' . ^! . '</p>' . "\n";
    # 
```

现在，每当我输入 ecp 时，我都会自动插入上面的代码，并将光标放在 ^! 的位置。

我正在寻找类似的设置/功能或做同样的方法。

请问有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T14:28:38.287

Emacs 有[Abbrev Mode](http://emacswiki.org/emacs/AbbrevMode)，也有[yasnippets](http://emacswiki.org/emacs/Yasnippet)等多种模板系统。其中之一可能是您正在寻找的。

# gwt - RF JsonRpcProxy “既不是 getter 也不是 setter”

> ID：10636966
> 
> 赞同：0
> 
> 时间：2012-05-17T13:47:05.947
> 
> 标签：gwt, requestfactory, json-rpc

`is neither a getter nor a setter`当 gwt 编译我的`@JsonRpcProxy`带注释的`ValueProxy`接口时，我得到了。

我用 Autobean 实现了这些方法，`Category`但似乎`RquestFactoryGenerator`无法处理它们：

> [错误] [模块] 方法 public abstract client.beans.ExpenseFreeBase findExpenseFreeBaseAssignedForThisDate(java.util.Date date) 既不是getter也不是setter

一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:02:23.377

是的，根本不支持：[http ://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/web/bindery/requestfactory/ gwt/rebind/model/RequestFactoryModel.java#329](http://code.google.com/p/google-web-toolkit/source/browse/tags/2.4.0/user/src/com/google/web/bindery/requestfactory/gwt/rebind/model/RequestFactoryModel.java#329)

[随时在http://code.google.com/p/google-web-toolkit/issues/list](http://code.google.com/p/google-web-toolkit/issues/list)打开请求增强功能（因为我找不到现有的），看看 GWT 团队对此有何感受.

# html - ie7 - 将链接显示为图像不起作用

> ID：10636967
> 
> 赞同：0
> 
> 时间：2012-05-17T13:47:09.747
> 
> 标签：html, internet-explorer-7, image

我有标签，里面有图片。创意 ID，当您单击图像时，它会将您链接到标签包含的链接

```
<a href="gallery/">
    <div class="gal_thumb">
        <div class="img_thumb">
            <img src="image/small.jpg" alt="link_image"/>
        </div>

        <div class="gal_title">To gallery</div>
    </div>
</a> 
```

在所有浏览器上都可以正常工作，但在 IE7 上却不行 IE7：当我将图像放在左下角时，它会在链接的左下角显示链接，当我点击它时，机器人在我点击外部或标题之前没有响应。

更新：这是我的 CSS

```
.gal_thumb {
    float: left;
    width: 156px;
}

.img_thumb {
    float: left;
    height: 122px;
    margin-bottom: 5px;
    margin-left: 9px;
    position: relative;
    width: 147px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 3px;
    line-height: 120px;
    text-align: center;
}

.img_thumb:hover{
    background: #6E6E6E;
}

.gal_title {
    margin-left: 9px;
    text-align: center;
    width: 147px;
    padding-bottom: 10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:52:38.930

你最好使用这种模式：

```
<a href="gallery/">
   <img width="20" height="20" border="1" src="image/small.jpg" alt="link_image"/>
   <div class="gal_title">To gallery</div>
</a> 
```

然后使用`display:block`,并为-tag`float:left`定义一个宽度。`A`

# php - SQL 错误 mysql_fetch_array(): 无效？

> ID：10636974
> 
> 赞同：1
> 
> 时间：2012-05-17T13:48:02.863
> 
> 标签：php, mysql

我只是不知道为什么我收到错误消息，我尝试删除''和（）

我在 phpmyadmin 中运行了脚本，它说我的语法问题出在 $result = ("SELECT * FROM 'test_prefixCatagory' ORDER by 'Cat'");

```
$result = ("SELECT * FROM 'test_prefixCatagory' ORDER by 'Cat'");

while($row = mysql_fetch_array($result))

$sCat = ($row['Cat']);
$sCatID = ($row['CatID']);
{
echo "<table>";
 echo "<tr valign='top'><td><b><a href='#".$sCat."'>".$sCat."</a></b><br>";
 // column 1 categories
 $result2 = ("SELECT * FROM `test_prefixSubCat` WHERE `CatID`=$sCatID");
 // sub-cats
 while($row2 = mysql_fetch_array($result2)) 
    {
  $sSub = ($row2['CatID']);
  $sSubID = ($row2['SubID']);
  echo "<dd><a href='#'>".$sSub."</a><br>";

 }

 echo "<br></td></tr>";
echo "</table>";
 } 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:48:42.737

试试这个 ：

```
<?php
$result = mysql_query("SELECT * FROM `test_prefixCatagory ORDER by `Cat`");

while ($row = mysql_fetch_array($result)) {
$sCat = $row['Cat'];
$sCatID = $row['CatID'];
echo "<table>";
echo "<tr valign='top'><td><b><a href='#" . $sCat . "'>" . $sCat . "</a></b><br>";
// column 1 categories
$result2 = mysql_query("SELECT * FROM `test_prefixSubCat` WHERE `CatID`='".$sCatID. "'");
// sub-cats
while ($row2 = mysql_fetch_array($result2)) {
    $sSub = $row2['CatID'];
    $sSubID = $row2['SubID'];
    echo "<dd><a href='#'>" . $sSub . "</a><br>";

    }

        echo "<br></td></tr>";
        echo "</table>";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T13:49:26.887

```
$result = ("SELECT * FROM `test_prefixCatagory` ORDER by `Cat`");

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:07:35.123

您不仅需要添加`mysql_query`，还需要从表名和字段名中删除单引号。如果您愿意，可以使用反引号，但**不能在表名周围使用单引号**。

```
$result = mysql_query("SELECT * FROM `test_prefixCatagory` ORDER by `Cat`");

// other query:
 $result2 = mysql_query("SELECT * FROM `test_prefixSubCat` WHERE `CatID`=$sCatID"); 
```

调试 MySQL 问题时，使用`mysql_error()`来查看问题描述。

# java - 在多个 bean 中重用 facelet

> ID：10636975
> 
> 赞同：3
> 
> 时间：2012-05-17T13:48:05.510
> 
> 标签：java, jsf, el, managed-bean

当 bean 名称已知但尚未构造时，如何调用/访问托管 bean 的属性？

例如：

```
<p:selectOneMenu value="#{eval.evaluateAsBean(bean).text}" >
    <f:selectItems value="#{eval.evaluateAsBean(bean).values}" var="val"
        itemLabel="#{val}" itemValue="#{val}" />
</p:selectOneMenu> 
```

如果有一个名为 testBean 的托管 bean，并且在我看来*bean*具有`"testBean"`值，我希望调用 testBean 的*text*或*values*属性。

**编辑1**

**上下文**

一个对象由一系列属性（值）组成。一个属性使用自定义 JSF 编辑器进行修改，具体取决于其类型。

编辑器列表由对象类型确定，并使用`custom:include`标签以表格形式显示。此自定义标记用于动态包含编辑器`<custom:include src="#{editor.component}">`。*组件*属性指向 JSF 编辑器的位置。

在我的示例中，一些编辑器（呈现为选择框）将使用相同的 facelet（dynamicDropdown.xhtml）。每个编辑器都有一个会话范围的托管 bean。我想用多个 bean 重用同一个 facelet，并使用*bean*参数将 bean 的名称传递给 dynamicDropdown.xhtml 。

`genericAccount.xhtml`

```
<p:dataTable value="#{group.editors}" var="editor">
    <p:column headerText="Key">
        <h:outputText value="#{editor.name}" />
    </p:column>
    <p:column headerText="Value">
        <h:panelGroup rendered="#{not editor.href}">
            <h:outputText value="#{editor.component}" escape="false" />
        </h:panelGroup>
        <h:panelGroup rendered="#{editor.href}">
            <custom:include src="#{editor.component}">
                <ui:param name="bean" value="#{editor.bean}"/>  
            <custom:include>
       </h:panelGroup>
    </p:column>
</p:dataTable> 
```

`#{editor.component}`指的是一个dynamicDropdown.xhtml 文件。

`dynamicDropdown.xhtml`

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">
    <p:selectOneMenu value="#{eval.evaluateAsBean(bean).text}" >
    <f:selectItems value="#{eval.evaluateAsBean(bean).values}" var="val"
        itemLabel="#{val}" itemValue="#{val}" />
    </p:selectOneMenu>  
</ui:composition> 
```

`eval`是一个托管 bean：

```
@ManagedBean(name = "eval")
@ApplicationScoped
public class ELEvaluator {
    ...

    public Object evaluateAsBean(String el) {
        FacesContext context = FacesContext.getCurrentInstance();
        Object bean = context.getELContext()
            .getELResolver().getValue(context.getELContext(), null, el);
        return bean;
    }

    ...

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:04:33.193

如果您通过 JSF 传递了 bean，例如通过将 bean="#{testBean}" 传递给您的视图，您将使用 value="#{cc.attrs.bean.test}" 访问该属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:41:28.667

据我了解，您的问题`<h:outputText value="#{bean.text}"/>`将在您的屏幕上打印属性的文本，当然您的托管 bean 应该使用@ManagedBean 进行注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T12:49:06.177

> *我正在使用 servlet-api 2.5*

Servlet 2.5 意味着 EL 2.1。EL 2.1 不支持使用参数调用方法。它是在 EL 2.2 中引入的，这意味着 Servlet 3.0。

如果您无法升级到与 Servlet 3.0 兼容的容器（Tomcat 7、Glassfish 3、JBoss AS 6 等），那么您需要升级 EL 2.1 实现。JBoss EL 是与 EL 2.1 兼容的实现，它支持与 EL 2.2 中相同的新特性。要安装它，只需将[jboss-el.jar](https://maven.atlassian.com/content/repositories/jboss-releases/org/jboss/seam/jboss-el/2.0.0.GA/jboss-el-2.0.0.GA.jar)放到 webapp 中`/WEB-INF/lib`，并将以下上下文参数添加到`web.xml`，假设您使用的是 Mojarra：

```
<context-param>     
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>   
</context-param> 
```

# iphone - 比较两个标记对象？

> ID：10636977
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:48:09.223
> 
> 标签：iphone, objective-c, ios, xcode, if-statement

我有 2 个按钮，每个按钮都有标签。我如何在它们之间进行比较，每个都有自己的标签和图像。例如：

```
// sender is (UIButton *)sender.

if ((sender.tag == 1)theImageOnTheButton == (sender.tag == 2)theImageOnTheButton
{
    // egual
}
else
    // not egual 
```

所以，如果发件人比标记为 1，他的图像等于标记为 2 的发件人，他的图像是相等的，说相等，否则，说它们不相等。我怎样才能做到这一点？

原始代码是：

```
-(void)flipView:(UIButton*)sender
{    
    x = x + 1;
    if (x == 1)
    {
        //  When flipping the first card
        NSLog(@"X == 1");
        [sender setTag:1];
    }
    else if (x == 2)
    {
        //  When flipping the second card
        NSLog(@"X == 2");
        x = 0;
        [sender setTag:2];

        if ((sender.tag == 2) == (sender.tag == 1))
        {
            NSLog(@"IGUAL");
        }
        else
        {
            NSLog(@"NOT EGUAL");
        }
    }
} 
```

谢谢分配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:05:22.557

如果我有两个以上的按钮，那么如何比较图像？

假设你有两个带有标签的按钮

```
IBOutlet UIButton *btn1, *btn2;

btn1.tag = 1;
btn2.tag = 2; 
```

将这两个 IBOutlet 按钮连接到 xid 文件中的按钮，并为两者添加一个通用 IBAction。

```
 -(IBAction)checkingBtns:(id)sender
  {

  if([sender tag] == 1){
      //Do what ever with your btn1 change color, change text, change image
    }

   if([sender tag] == 2){
      //Do what ever with your btn2 change color, change text, change image
    }

   } 
```

希望对你有帮助 ！！正确连接出口和动作以实现正常功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T14:05:33.867

```
[sender setTag:2]; 
```

接着 -

```
if ((sender.tag == 2) == (sender.tag == 1)) 
```

当标签已经设置为2时，它怎么会等于1呢？错误的逻辑。

# php - php代码变成乱码？

> ID：10636979
> 
> 赞同：2
> 
> 时间：2012-05-17T13:48:21.287
> 
> 标签：php, html

我去编辑这个 PHP 文件——它应该在联系表单上生成那些验证码安全图像——这些图像不起作用，所以我要看看是否有损坏的路径或者我可以简单地修复的东西。

但是当我打开文件时，它看起来像这样： http: [//mydomainsample.com/explosion/screenshots/Screen%20Shot%202012-05-17%20at%209.34.14%20AM.png](http://mydomainsample.com/explosion/screenshots/Screen%20Shot%202012-05-17%20at%209.34.14%20AM.png)

完全胡言乱语。

从服务器下载文件时是否可能发生这种情况？我最初没有对该站点的 ftp 访问权限——我们控制了域并将其从一台主机转移到另一台主机。

我在传输之前使用站点吸盘来备份站点，但它会将 php 文件下载为 html 文件。你最终得到 filename.php.html。

在过去，这从来没有把 php 变成难以理解的胡言乱语，所以我不明白为什么现在会这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:50:55.587

那是一个 PNG 图像，而不是 PHP 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:06:00.183

问题是，您不能使用诸如“站点吸盘”之类的程序来获取 PHP 文件。这是因为当您从 URL 获取 PHP 文件时，该文件将被*执行*，并且您将获得脚本的输出。这就是为什么你得到`.php.html`.

它不会“将 php 变成难以理解的胡言乱语”，服务器运行脚本并且您正在获得输出。大多数情况下，输出是 HTML，您可以将其作为文本打开。在这种情况下，脚本的输出是一个 PNG 文件，因此您会看到“乱码”。将文件重命名为`.png`，然后您将看到图像。

您*需要*获取 FTP 访问权限才能获取 PHP 源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T13:51:09.767

该文件实际上看起来像一个 PNG 图像，也许您刚刚下载了 PHP 脚本生成的输出？

# iphone - KVO 意外崩溃

> ID：10636982
> 
> 赞同：3
> 
> 时间：2012-05-17T13:48:27.150
> 
> 标签：iphone, objective-c, ios

我有一个 UITableView，它的**高度**在运行时会发生变化：应用程序加载图像，然后在 TableView 中显示它们。我已经为我的 tableview的**页脚**实现了一个类似于刷新的拉动功能。

由于行的高度不是恒定的，我在 UITableView 上添加了一个观察者：

```
[self.tableView addObserver:_refreshFooter
                 forKeyPath:@"contentSize"
                    options:NSKeyValueObservingOptionNew
                    context:NULL]; 
```

在我的**_refreshFooter**中，只要 contentSize 发生变化，就会调用以下方法：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
  UITableView *tbV = object;

  float realBottom = MAX(tbV.frame.size.height, tbV.contentSize.height);
  self.frame = CGRectMake(self.frame.origin.x,
                          realBottom,
                          self.frame.size.width,
                          self.frame.size.height);
} 
```

该应用程序基本上是一个选项卡应用程序，其中每个选项卡都是 TableViewController 的一个实例。在我们的 iPhone 4 和 4S 的 5.0.1 和 5.1 中，我们从未经历过由于 KVO 导致的任何崩溃，但我们的用户告诉我们意外的行为，例如页脚没有移动或崩溃。

经历的崩溃如下：

```
0   libobjc.A.dylib 0x3671bf78 objc_msgSend + 15
1   Foundation 0x31145659 NSKeyValuePushPendingNotificationPerThread + 68
2   Foundation 0x3113774b NSKeyValueWillChange + 414
3   Foundation 0x3110e84f -[NSObject(NSKeyValueObserverNotification) willChangeValueForKey:] + 182
4   Foundation 0x31190b23 _NSSetSizeValueAndNotify + 82
5   UIKit 0x32368f8d -[UITableView(_UITableViewPrivate) _updateContentSize] + 572
6   UIKit 0x3249cd51 -[UITableView setTableFooterView:] + 432 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:22:55.757

释放`NSKeyValueObservingOptionNew`并`viewWillDisapper`添加这是`viewWillAppear`.

# php - 如何在选择选项中赋予价值

> ID：10636983
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:48:30.723
> 
> 标签：php, html

我在我的页面或下拉列表中有选择选项，我的问题是如何在我的选择选项中设置值，这个值来自数据库，

这是我的代码。

```
 <select name="status" value="<?php echo $status; ?>" >

    <option value=""></option>
    <option value="public">public</option>
    <option value="private">private</option>
  </select> 
```

在我的 html 标签之上

```
 if(isset($_GET['status']))
    {
         $status = $_GET['status'];
     $sstatus="select .......";

   foreach($db->query($sstatus) as $rows)
    {
      $status= $rows['status'];
      ......
              ......
              ......
         }
   } 
```

我尝试修改我的代码，它似乎可以工作，但我的问题是它在下拉列表中有 2 个相同的值。

```
 <select name="status" >

    <option selected="selected"><?php echo $status; ?></option>
    <option value="public">public</option>
    <option value="private">private</option>
  </select> 
```

它会在我的下拉列表中显示，我的问题是这是显示来自数据库的值的正确方法。

公共
公共
私人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:51:04.230

```
<select name="status" >
    <option value=""></option>
    <option value="public"<?php if (isset($status) && $status === 'public') echo 'selected'; ?>>public</option>
    <option value="private"<?php if (isset($status) && $status === 'private') echo 'selected'; ?>>private</option>
 </select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T13:54:17.620

```
<?php $options = array('', 'public', 'private') ?>

<select name="status">
<?php foreach ($options as $option): ?>
   <option value="<?php echo $option ?>" <?php echo isset($status) && $status == $option ? 'selected="selected"' : '' ?>><?php echo $option ?></option>
<?php endforeach ?>

</select> 
```

# html - 将 wordpress 合并到网站中

> ID：10636985
> 
> 赞同：0
> 
> 时间：2012-05-17T13:48:36.827
> 
> 标签：html, wordpress, web, blogs

您能否介绍一下将 word press 合并到网站中的问题。

我的要求是……我的网站上有一个名为“我的博客”的标签。

当用户单击该按钮时，他可以看到我的博客的名称

还有我的帖子和档案，还有标签……我想要的这些信息。

我不想在我的网站上使用完整的 word press。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:26:36.587

这真的很简单。按照我的指示。

1.  登录到您的 cpanel。
2.  创建一个以`blog`根目录命名的文件夹。
3.  [上传您从WordPress.org](http://wordpress.org/)下载的最新版本的 wordpress 。
4.  解压到博客文件夹。（确保将所有文件移到文件夹外`wordpress`）
5.  创建一个 MySQL 数据库并向其中添加一个用户。确保保留数据库名称、用户名和密码。对于大多数服务器，主机名将是 localhost。
6.  现在转到 www.example.com/blog 并按照那里的说明运行安装程序。
7.  现在您可以登录到您的 WordPress 仪表板。
8.  在 Google 上搜索一些免费的 wordpress 主题，并在仪表板的主题部分安装其中一个主题。
9.  现在你的 wordpress 博客已经准备好了。在您的`blog`选项卡站点中，将链接作为 www.example.com/blog 提供。

**参考链接：**

[著名的 5 分钟安装 - WordPress](http://codex.wordpress.org/Installing_WordPress)

干杯！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T16:29:19.133

假设您是自托管的，并且可以访问您的控件；

您将需要创建一个新的 MySQL 数据库，并安全地存储您的数据库名称、用户名、主机名和密码以供以后使用。

您必须下载 wordpress [http://wordpress.org/](http://wordpress.org/)，并按照 http://wordpress.org/ 上的安装说明进行[操作](http://wordpress.org/)。

为了做我认为你想做的事，你需要通过在 Content > Themes 文件夹中创建一个新文件夹来创建一个新主题，并将所有站点文件移动到这个新目录中。

添加到您的 CSS 文件以使其成为可应用的“主题”：

```
/*
Theme Name: 
Theme URI: 
Author: 
Author URI: 
Description: 
Version: 
License: 
License URI: 
*/ 
```

然后，您必须将这个新主题分配给 Wordpress，并创建至少两个模板文件，

```
category.php
single.php 
```

在这两个模板中，您将循环浏览您的帖子，并分别显示您的完整帖子。

这不是一个优雅的解决方案，但是，它会以一种基本的方式做你想做的事情。最好为您的网站开发一个合适的主题，并充分利用 Wordpress 作为 CMS，而不仅仅是一个博客平台。有很多关于如何做到这一点的资源，它可能看起来势不可挡，但从小处着手，这就是你学习的方式。

# android - 从 android 内容提供商到我的远程服务器的数据同步

> ID：10636989
> 
> 赞同：0
> 
> 时间：2012-05-17T13:48:49.113
> 
> 标签：android, mysql, sqlite, synchronization

我正在开发一个应用程序（Android 4.0），它依赖于后台服务将特定数据从可能的 sqlite 同步到远程 mysql 数据库。

我对 Android 开发（但不是编程）非常陌生，因此仍在努力从哪里开始以及如何构建系统。我计划利用：

[Virgil Dobjanschi 的“开发 Android REST 客户端应用程序”（2010 年）](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

作为起点。他所展示的是一种开发这种优秀系统的高级方法。

我的问题是，在两年左右的时间里发生了什么变化，或者这仍然被认为是一种可行的方法吗？在了解了我的情况后，您可以提供的任何其他帮助都会对我有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:57:34.023

[这](https://stackoverflow.com/questions/10331388/android-do-application-login-in-background-on-boot-up/10476810#10476810)是我发现非常有用的更新方法

使用 Intent Service 为您的请求离开主线程。如果您想了解有关服务的更多信息，请参阅[此](https://stackoverflow.com/questions/10331388/android-do-application-login-in-background-on-boot-up/10476810#10476810)。

希望这可以帮助！

# jquery - Jquery倒计时日期格式

> ID：10636991
> 
> 赞同：0
> 
> 时间：2012-05-17T13:48:55.713
> 
> 标签：jquery, date, countdown

大家好，我正在使用 jquery 倒计时，我想将其设置为 16 小时，但我一生都无法弄清楚回调中的日期格式设置；谁能帮忙？

```
$(function () {
   var austDay = new Date();
   austDay = new Date(austDay.getFullYear() + 1, 0 - 1, 15);
   $('.time').countdown({until: austDay, 
   layout: '{dn} {dl}, {hn} {hl}, {mn} {ml}, and {sn} {sl}'});
   $('#year').text(austDay.getFullYear());  
}); 
```

它在上面代码的第 3 行中配置，这里是插件网站的[链接。](http://keith-wood.name/countdown.html)

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:04:24.773

您可以使用以下代码将其设置为从现在起 16 小时

```
$(function () {
   var austDay = new Date();
   austDay.setHours(austDay.getHours() + 16);
   $('.time').countdown({until: austDay,                          
   layout: '{hn} {hl}, {mn} {ml}, and {sn} {sl}'});
   $('#year').text(austDay.getFullYear());  
});​ 
```

或者更好的是，您可以使用`until`如下选项

```
 $('.time').countdown({
     until: "16 hours",
     layout: '{hn} {hl}, {mn} {ml}, and {sn}    {sl}'
   }); 
```

但正如您所见，它为当前日期对象增加了 16 个小时，每次重新加载页面时都会重置它。如果您希望它持续存在，则必须使用日期字符串手动构建对象。

这是一个工作小提琴[http://jsfiddle.net/joycse06/SDFLn/](http://jsfiddle.net/joycse06/SDFLn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T14:04:23.770

如果您只是想要一个 16 小时的倒数计时器，请使用 build0in 功能

```
$('.time').countdown({until: +57600, layout: '{dn} {dl}, {hn} {hl}, {mn} {ml}, and {sn} {sl}'}); 
```

其中 57600 秒 = 16 小时

# jsf - JSF中的4种标准对象类型

> ID：10636995
> 
> 赞同：-1
> 
> 时间：2012-05-17T13:49:05.840
> 
> 标签：jsf, jsf-2

这是我在某次采访中看到的一个问题。

JSF 中的 4 种标准对象类型是什么？

三种在 JSF 程序员的直接控制下，一种在 JSF 的控制下——但在 JSF 程序员的间接控制下。

知道它们是什么吗？

谢谢JK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:14:41.417

JSF 2 中有 4 个作用域

*   请求：在每个请求-响应操作上创建 bean。
*   视图：当您在导航器中保持相同视图时，bean 是活动的。
*   会话：bean 自创建以来一直处于活动状态，直到浏览器会话到期（HTTP 会话）。
*   应用程序：从部署应用程序到取消部署应用程序，bean 一直处于活动状态。

更多信息：

*   [如何选择合适的bean范围？](https://stackoverflow.com/q/7031885/1065197)