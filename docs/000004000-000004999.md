# StackOverflow 问答 4000-4999

# .net - 如何将 SSL 添加到使用 httplistener 的 .net 应用程序 - 它*不会*在 IIS 上运行

> ID：4004
> 
> 赞同：43
> 
> 时间：2008-08-06T21:18:47.357
> 
> 标签：.net, authentication, encryption, ssl

**最近的粗体编辑** 我正在使用 .net`HttpListener`类，但我不会在 IIS 上运行此应用程序，也不会使用 ASP.net。这个[网站](http://www.leastprivilege.com/CommentView.aspx?guid=0c34094a-bdd4-4041-be6e-919f10fe1d31)描述了实际使用什么代码来实现与 asp.net 的 SSL，并且[这个网站](http://blogs.msdn.com/adarshk/archive/2004/11/10/255467.aspx)描述了如何设置证书（虽然我不确定它是否只适用于 IIS）。

类文档描述了各种类型的身份验证（基本、摘要、Windows 等）——它们都没有提到 SSL。它确实说如果[使用 HTTPS，则需要设置服务器证书](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)。这将是一个单行属性设置并`HttpListener`计算其余部分吗？

简而言之，我需要知道如何设置证书以及如何修改代码以实现 SSL。

虽然在我尝试访问 HTTPS 时没有发生这种情况，但我确实注意到我的系统事件日志中有一个错误 - 源是“Schannel”，消息的内容是：

> 尝试访问 SSL 服务器凭证私钥时发生致命错误。从加密模块返回的错误代码是 0x80090016。

编辑：
**到目前为止采取的步骤**

*   在 C# 中创建了一个适用于 HTTP 连接的有效 HTTPListener（例如“ [http://localhost:8089/foldername/](http://localhost:8089/foldername/) ”
*   使用 makecert.exe 创建证书
*   使用 certmgr.exe 添加了要信任的证书
*   使用 Httpcfg.exe 监听测试端口（例如 8090）上的 SSL 连接
*   [通过 listener.Prefixes.Add( https://localhost:8090/foldername/](https://localhost:8090/foldername/) ")将端口 8080 添加到 HTTPListener ；
*   在浏览器中测试 HTTP 客户端连接，例如 ( [http://localhost:8089/foldername/](http://localhost:8089/foldername/) ") 并收到正确的返回
*   在浏览器中测试了一个 HTTPS 客户端连接，例如（[http://localhost:8090/foldername/](http://localhost:8090/foldername/)）并收到“数据传输中断”（在 Firefox 中）
*   Visual Studio 中的调试表明，当 HTTPS 连接启动时，接收请求的侦听器回调永远不会被命中 - 我看不到任何可以设置断点以更早捕获其他内容的地方。
*   netstat 显示监听端口对 HTTPS 和 HTTP 都是开放的。尝试连接后，HTTPS 端口确实会进入 TIME_WAIT。
*   **[Fiddler](http://www.fiddlertool.com/fiddler/)和[HTTPAnalyzer](http://www.ieinspector.com/httpanalyzer/)没有捕捉到任何流量，我猜它在这个过程中还远远不够显示在那些 HTTP 分析工具中**

**问题**

*   问题可能是什么？
*   是否有一段.Net 代码我丢失了（这意味着我必须在 C# 中做更多事情，而不是简单地向指向 HTTPS 的侦听器添加一个前缀，这就是我所做的）
*   在某处错过了配置步骤？
*   我还能做些什么来分析问题？
*   系统事件日志中的错误消息是否表明存在问题？如果是这样，它将如何修复？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-07T21:15:40.927

我有类似的问题，似乎证书本身可能存在问题。

这是对我有用的路径：

```
makecert.exe -r -a sha1 -n CN=localhost -sky exchange -pe -b 01/01/2000 -e 01/01/2050 -ss my -sr localmachine 
```

然后查找证书[指纹](http://vvcap.net/db/ci3n4iTr8wYFDF1pJCIO.htp)，将其复制到剪贴板并删除空格。这将是下一个命令中 -h 之后的参数：

```
HttpCfg.exe set ssl -i 0.0.0.0:801 -h 35c65fd4853f49552471d2226e03dd10b7a11755 
```

[然后在https://localhost:801/](https://localhost:801/)上运行服务主机，它运行良好。

我不能做的是让 https 在自行生成的证书上运行。这是我运行生成的代码（为清楚起见，删除了错误处理）：

```
LPCTSTR pszX500 = subject;
DWORD cbEncoded = 0;
CertStrToName(X509_ASN_ENCODING, pszX500, CERT_X500_NAME_STR, NULL, pbEncoded, &cbEncoded, NULL);
pbEncoded = (BYTE *)malloc(cbEncoded);
CertStrToName(X509_ASN_ENCODING, pszX500, CERT_X500_NAME_STR, NULL, pbEncoded, &cbEncoded, NULL);

// Prepare certificate Subject for self-signed certificate
CERT_NAME_BLOB SubjectIssuerBlob;
memset(&SubjectIssuerBlob, 0, sizeof(SubjectIssuerBlob));
SubjectIssuerBlob.cbData = cbEncoded;
SubjectIssuerBlob.pbData = pbEncoded;

// Prepare key provider structure for self-signed certificate
CRYPT_KEY_PROV_INFO KeyProvInfo;
memset(&KeyProvInfo, 0, sizeof(KeyProvInfo));
KeyProvInfo.pwszContainerName = _T("my-container");
KeyProvInfo.pwszProvName = NULL;
KeyProvInfo.dwProvType = PROV_RSA_FULL;
KeyProvInfo.dwFlags = CRYPT_MACHINE_KEYSET;
KeyProvInfo.cProvParam = 0;
KeyProvInfo.rgProvParam = NULL;
KeyProvInfo.dwKeySpec = AT_SIGNATURE;

// Prepare algorithm structure for self-signed certificate
CRYPT_ALGORITHM_IDENTIFIER SignatureAlgorithm;
memset(&SignatureAlgorithm, 0, sizeof(SignatureAlgorithm));
SignatureAlgorithm.pszObjId = szOID_RSA_SHA1RSA;

// Prepare Expiration date for self-signed certificate
SYSTEMTIME EndTime;
GetSystemTime(&EndTime);
EndTime.wYear += 5;

// Create self-signed certificate
pCertContext = CertCreateSelfSignCertificate(NULL, &SubjectIssuerBlob, 0, &KeyProvInfo, &SignatureAlgorithm, 0, &EndTime, 0);
hStore = CertOpenStore(CERT_STORE_PROV_SYSTEM, 0, 0, CERT_SYSTEM_STORE_LOCAL_MACHINE, L"MY");
CertAddCertificateContextToStore(hStore, pCertContext, CERT_STORE_ADD_REPLACE_EXISTING, 0); 
```

证书显示正常，并且它有一个有效的私钥，但 https 将超时，就好像从未注册过指纹一样。如果有人知道为什么 - 请评论

**EDIT1**：经过一番玩耍，我找到了 CertCreateSelfSignCertificate 的初始化，它生成了正确的证书：

```
CRYPT_KEY_PROV_INFO KeyProvInfo;
memset(&KeyProvInfo, 0, sizeof(KeyProvInfo));
KeyProvInfo.pwszContainerName = _T("my-container");
KeyProvInfo.pwszProvName = _T("Microsoft RSA SChannel Cryptographic Provider");
KeyProvInfo.dwProvType = PROV_RSA_SCHANNEL;
KeyProvInfo.dwFlags = CRYPT_MACHINE_KEYSET;
KeyProvInfo.cProvParam = 0;
KeyProvInfo.rgProvParam = NULL;
KeyProvInfo.dwKeySpec = AT_KEYEXCHANGE; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-29T03:55:20.257

您只需要将证书绑定到 ip:port，然后使用 https:// 前缀打开您的侦听器。0.0.0.0 适用于所有 ip。appid 是任何随机 GUID，而 certhash 是证书的哈希值（有时称为指纹）。

使用管理员权限使用 cmd.exe 运行以下命令。

```
netsh http add sslcert ipport=0.0.0.0:1234 certhash=613bb67c4acaab06def391680505bae2ced4053b  appid={86476d42-f4f3-48f5-9367-ff60f2ed2cdc} 
```

如果你想创建一个自签名证书来测试这个，

1.  打开 IIS

2.  单击您的计算机名称

3.  单击服务器证书图标

4.  点击生成自签名证书

5.  双击并转到详细信息

6.  您将在那里看到指纹，只需删除空格即可。

    ```
     HttpListener listener = new HttpListener();
     listener.Prefixes.Add("https://+:1234/");
     listener.Start();
     Console.WriteLine("Listening...");
     HttpListenerContext context = listener.GetContext();

     using (Stream stream = context.Response.OutputStream)
     using (StreamWriter writer = new StreamWriter(stream))
         writer.Write("hello, https world");

     Console.ReadLine(); 
    ```

运行此程序后，我只是导航到`https://localhost:1234`查看打印的文本。由于证书 CN 与 url 不匹配并且它不在受信任的证书存储中，您将收到证书警告。然而，文本是加密的，因为您可以使用 Wire Shark 等工具进行验证。

如果您想更好地控制创建自签名 x509 证书，openssl 是一个很棒的工具，并且有一个适用于 windows 的端口。与 makecert 工具相比，我在它方面取得了更大的成功。

* * *

如果您从带有 ssl 警告的代码与 https 服务进行通信，您必须在服务点管理器上设置证书验证器以绕过它以进行测试，这一点也非常重要。

```
ServicePointManager.ServerCertificateValidationCallback += (sender, cert, chain, errors) => true; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-06T22:29:57.073

我还没有完全实现它，但是这个网站似乎提供了一个很好的设置证书和代码的[演练。](http://developers.de/blogs/damir_dobric/archive/2006/08/01/897.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-02T05:14:45.000

`httpcfg.exe`这是不使用(XP) 或`netsh.exe`(Vista+)将 SSL 证书绑定到 IP/PORT 组合的另一种方法。

[http://dotnetcodebox.blogspot.com.au/2012/01/how-to-work-with-ssl-certificate.html](http://dotnetcodebox.blogspot.com.au/2012/01/how-to-work-with-ssl-certificate.html)

它的要点是您可以使用Windows 中内置的 C++ [HttpSetServiceConfiguration API 以编程方式而不是通过命令行来执行此操作，从而消除对操作系统的依赖并安装 httpcfg。](https://msdn.microsoft.com/en-us/library/windows/desktop/aa364503(v=vs.85).aspx)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-08T16:37:29.820

类[文档](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)

有这个注释：

> 如果使用 https 创建 HttpListener，则必须为该侦听器选择服务器证书。否则，此 HttpListener 的 HttpWebRequest 查询将因连接意外关闭而失败。

和这个：

> 您可以使用 HttpCfg.exe 配置服务器证书和其他侦听器选项。 有关详细信息，请参阅 [http://msdn.microsoft.com/library/default.asp?url=/library/en-us/http/http/httpcfg_exe.asp 。](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/http/http/httpcfg_exe.asp)该可执行文件随 Windows Server 2003 一起提供，或者可以从 Platform SDK 中可用的源代码构建。

第一个注释是否由第二个注释解释？如问题中所述，我使用 httpcfg.exe 将证书绑定到特定端口。如果他们打算除此之外的其他内容，则说明是模棱两可的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-01-28T10:22:57.570

我遇到了和你一样的问题。[幸运的是，在此页面](http://answers.google.com/answers/threadview?id=735306)上搜索了艰难的步骤后，SSL 可以与我的 HttpListener 一起使用。

# asp.net-mvc - ASP.NET MVC 应用程序中的多种语言？

> ID：4034
> 
> 赞同：70
> 
> 时间：2008-08-06T21:43:33.923
> 
> 标签：asp.net-mvc, internationalization, multilingual

为 ASP.NET MVC 应用程序中的界面支持多种语言的最佳方式是什么？我见过人们将资源文件用于其他应用程序。这仍然是最好的方法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-08-07T03:04:04.320

如果您使用默认视图引擎，则本地资源在视图中工作。但是，如果您需要在控制器操作中获取资源字符串，则无法获取本地资源，而必须使用全局资源。

当您考虑它时，这是有道理的，因为本地资源是 aspx 页面的本地资源，并且在控制器中，您甚至还没有选择您的视图。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-09-16T00:00:12.580

我发现[这个资源](https://www.eworldui.net/blog/post/2008/05/16/ASPNET-MVC-Localization.aspx)很有帮助

**它是HttpContext.Current.GetGlobalResourceString**和**HttpContext.Current.GetLocalResourceString**的包装器，允许您像这样调用资源......

```
// default global resource
Html.Resource("GlobalResource, ResourceName")

// global resource with optional arguments for formatting
Html.Resource("GlobalResource, ResourceName", "foo", "bar")

// default local resource
Html.Resource("ResourceName")

// local resource with optional arguments for formatting
Html.Resource("ResourceName", "foo", "bar") 
```

我发现的唯一问题是控制器无法访问本地资源字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-06T21:48:20.997

是的，资源仍然是在 .NET 环境中支持多种语言的最佳方式。因为它们易于参考，甚至更容易添加新语言。

```
Site.resx
Site.en.resx
Site.en-US.resx
Site.fr.resx
etc... 
```

所以你是对的，仍然使用资源文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-04-13T18:44:31.770

Orchard 项目使用一种称为“T”的快捷方式来完成所有页内字符串翻译。所以你会看到带有@T("A String to Translate") 的标签。

我打算看看这是如何在幕后实现的，并可能在未来的项目中使用它。短名称使代码更简洁，因为它会被*大量*使用。

我喜欢这种方法的是原始字符串（在这种情况下为英语）在代码中仍然很容易看到，并且不需要在资源工具或其他位置中查找来解码实际字符串应该是什么。

有关更多信息，请参见[http://orchardproject.net](http://orchardproject.net)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-10-09T14:24:50.117

作为答案提到的其他一些解决方案不适用于已发布的 MVC 版本（它们与以前版本的 alpha/beta 版本一起使用）。

这是一篇很好的文章，描述了一种实现强类型本地化的方法，并且不会破坏控制器和视图的单元测试：[MVC v1 的本地化指南](http://odetocode.com/blogs/scott/archive/2009/07/15/resource-files-and-asp-net-mvc-projects.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-13T22:09:42.117

这是另一种选择，您将可以访问控制器中的 CurrentUICulture：

检查[MVC3-多语言](http://subvert.ca/Blog/MVC3-multi-language)

# jakarta-ee - 在 WebSphere 6 中部署的 EAR 的 build.xml 示例

> ID：4046
> 
> 赞同：22
> 
> 时间：2008-08-06T21:55:24.257
> 
> 标签：jakarta-ee, deployment, ant, websphere, ear

我试图说服我的供应商使用 ANT 而不是 Rational Application Development，这样任何人都可以随时随地重新编译、重新检查、重新部署解决方案。:P

我为一个生成 JAR 文件但停在那里的项目启动了 build.xml，我需要真实的示例来比较笔记。我的好朋友们！我身边没有人可以聊这个！

到目前为止，这是我的[build.xml 。](http://pastebin.ca/1094382)

*(*) 我根据使用 pastebin.ca的[建议编辑了我的问题](https://stackoverflow.com/questions/4046/can-someone-give-me-a-working-example-of-a-buildxml-for-an-ear-that-deploys-in-#4298)*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-07T16:16:00.010

我的环境：Fedora 8；WAS 6.1（与 Rational Application Developer 7 一起安装）

该领域的文档非常差，并且缺乏实际示例。

**使用 WebSphere Application Server (WAS) Ant 任务**

要按照此处所述运行，您需要使用**ws_ant.sh**或**ws_ant.bat**命令从服务器**配置文件**bin 目录运行它们。

 ****```
<?xml version="1.0"?>
<project name="project" default="wasListApps" basedir=".">
    <description>
        Script for listing installed apps.
        Example run from:
        /opt/IBM/SDP70/runtimes/base_v61/profiles/AppSrv01/bin
    </description>

    <property name="was_home"
        value="/opt/IBM/SDP70/runtimes/base_v61/">
    </property>
    <path id="was.runtime">
        <fileset dir="${was_home}/lib">
            <include name="**/*.jar" />
        </fileset>
        <fileset dir="${was_home}/plugins">
            <include name="**/*.jar" />
        </fileset>
    </path>
    <property name="was_cp" value="${toString:was.runtime}"></property>
    <property environment="env"></property>

    <target name="wasListApps">
        <taskdef name="wsListApp"
            classname="com.ibm.websphere.ant.tasks.ListApplications"
            classpath="${was_cp}">
        </taskdef>
        <wsListApp wasHome="${was_home}" />
    </target>

</project> 
```

命令：

```
./ws_ant.sh -buildfile ~/IBM/rationalsdp7.0/workspace/mywebappDeploy/applist.xml 
```

**部署脚本**

```
<?xml version="1.0"?>
<project name="project" default="default" basedir=".">
<description>
Build/Deploy an EAR to WebSphere Application Server 6.1
</description>

    <property name="was_home" value="/opt/IBM/SDP70/runtimes/base_v61/" />
    <path id="was.runtime">
        <fileset dir="${was_home}/lib">
            <include name="**/*.jar" />
        </fileset>
        <fileset dir="${was_home}/plugins">
            <include name="**/*.jar" />
        </fileset>
    </path>
    <property name="was_cp" value="${toString:was.runtime}" />
    <property environment="env" />
    <property name="ear" value="${env.HOME}/IBM/rationalsdp7.0/workspace/mywebappDeploy/mywebappEAR.ear" />

    <target name="default" depends="deployEar">
    </target>

    <target name="generateWar" depends="compileWarClasses">
        <jar destfile="mywebapp.war">
            <fileset dir="../mywebapp/WebContent">
            </fileset>
        </jar>
    </target>

    <target name="compileWarClasses">
        <echo message="was_cp=${was_cp}" />
        <javac srcdir="../mywebapp/src" destdir="../mywebapp/WebContent/WEB-INF/classes" classpath="${was_cp}">
        </javac>
    </target>

    <target name="generateEar" depends="generateWar">
        <mkdir dir="./earbin/META-INF"/>
        <move file="mywebapp.war" todir="./earbin" />
        <copy file="../mywebappEAR/META-INF/application.xml" todir="./earbin/META-INF" />
        <jar destfile="${ear}">
            <fileset dir="./earbin" />
        </jar>
    </target>

    <!-- http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.javadoc.doc/public_html/api/com/ibm/websphere/ant/tasks/package-summary.html -->
    <target name="deployEar" depends="generateEar">
        <taskdef name="wsInstallApp" classname="com.ibm.websphere.ant.tasks.InstallApplication" classpath="${was_cp}"/>
        <wsInstallApp ear="${ear}" 
            failonerror="true" 
            debug="true" 
            taskname=""
            washome="${was_home}" />
    </target>

</project> 
```

笔记：

*   您只能运行一次！如果应用名称正在使用中，则无法安装 - 请参阅**wsUninstallApp等其他任务**
*   它可能也不会启动应用程序
*   您需要在服务器上运行它，并且脚本非常脆弱

**备择方案**

我可能会使用 Java 管理扩展 (JMX)。您可以编写一个接受 EAR 并使用部署 MBean 在服务器上部署 EAR 的文件上传 servlet。您只需通过 HTTP 发布文件。这将避免您的开发/构建机器上的任何 WAS API 依赖项，并且可以独立于任何一个项目。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-26T19:31:42.253

如果您没有可用的 WAS ant 任务或不想运行 was_ant.bat，这里有一些相同的功能。这依赖于路径中存在的 wsadmin.bat。

```
<property name="websphere.home.dir" value="${env.WS6_HOME}" />
<property name="was.server.name" value="server1" />
<property name="wsadmin.base.command" value="wsadmin.bat" />

<property name="ws.list.command" value="$AdminApp list" />
<property name="ws.install.command" value="$AdminApp install" />
<property name="ws.uninstall.command" value="$AdminApp uninstall" />
<property name="ws.save.command" value="$AdminConfig save" />
<property name="ws.setManager.command" value="set appManager [$AdminControl queryNames cell=${env.COMPUTERNAME}Node01Cell,node=${env.COMPUTERNAME}Node01,type=ApplicationManager,process=${was.server.name},*]" />
<property name="ws.startapp.command" value="$AdminControl invoke $appManager startApplication" />
<property name="ws.stopapp.command" value="$AdminControl invoke $appManager stopApplication" />

<property name="ws.conn.type" value="SOAP" />
<property name="ws.host.name" value="localhost" />
<property name="ws.port.name" value="8880" />
<property name="ws.user.name" value="username" />
<property name="ws.password.name" value="password" />

<property name="app.deployed.name" value="${artifact.filename}" />
<property name="app.contextroot.name" value="/${artifact.filename}" />

<target name="websphere-list-applications">
    <exec dir="${websphere.home.dir}/bin" executable="${wsadmin.base.command}" output="waslist.txt" logError="true">
        <arg line="-conntype ${ws.conn.type}" />
        <arg line="-host ${ws.host.name}" />
        <arg line="-port ${ws.port.name}" />
        <arg line="-username ${ws.user.name}" />
        <arg line="-password ${ws.password.name}" />
        <arg line="-c" />
        <arg value="${ws.list.command}" />
    </exec>
</target>

<target name="websphere-install-application" depends="websphere-uninstall-application">
    <exec executable="${websphere.home.dir}/bin/${wsadmin.base.command}" logError="true" outputproperty="websphere.install.output" failonerror="true">
        <arg line="-conntype ${ws.conn.type}" />
        <arg line="-host ${ws.host.name}" />
        <arg line="-port ${ws.port.name}" />
        <arg line="-username ${ws.user.name}" />
        <arg line="-password ${ws.password.name}" />
        <arg line="-c" />
        <arg value="${ws.install.command} ${dist.dir}/${artifact.filename}.war {-appname ${app.deployed.name} -server ${was.server.name} -contextroot ${app.contextroot.name}}" />
        <arg line="-c" />
        <arg value="${ws.save.command}" />
        <arg line="-c" />
        <arg value="${ws.setManager.command}" />
        <arg line="-c" />
        <arg value="${ws.startapp.command} ${app.deployed.name}" />
        <arg line="-c" />
        <arg value="${ws.save.command}" />
    </exec>
    <echo message="${websphere.install.output}" />
</target>

<target name="websphere-uninstall-application">
    <exec executable="${websphere.home.dir}/bin/${wsadmin.base.command}" logError="true" outputproperty="websphere.uninstall.output" failonerror="false">
        <arg line="-conntype ${ws.conn.type}" />
        <arg line="-host ${ws.host.name}" />
        <arg line="-port ${ws.port.name}" />
        <arg line="-username ${ws.user.name}" />
        <arg line="-password ${ws.password.name}" />
        <arg line="-c" />
        <arg value="${ws.setManager.command}" />
        <arg line="-c" />
        <arg value="${ws.stopapp.command} ${app.deployed.name}" />
        <arg line="-c" />
        <arg value="${ws.save.command}" />
        <arg line="-c" />
        <arg value="${ws.uninstall.command} ${app.deployed.name}" />
        <arg line="-c" />
        <arg value="${ws.save.command}" />
    </exec>
    <echo message="${websphere.uninstall.output}" />
</target> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T15:28:40.953

一个好的起点，可能是这个[maven 插件](http://jira.codehaus.org/browse/MOJO-392)，不是为了使用它，或者可能是的，但是这个 maven 是建立在 ant 任务之上的。如果您看到 WAS5+Plugin+Mojo.zip\src\main\scripts\was5.build.xml

或者如“McDowell”所说，您可以使用“WebSphere Application Server (WAS) Ant 任务”但直接作为 ANT 任务。

```
<path id="classpath">
    <fileset file="com.ibm.websphere.v61_6.1.100.ws_runtime.jar"/>
</path>

<taskdef name="wsStartApp" classname="com.ibm.websphere.ant.tasks.StartApplication" classpathref="classpath" />
<taskdef name="wsStopApp" classname="com.ibm.websphere.ant.tasks.StopApplication" classpathref="classpath" />
<taskdef name="wsInstallApp" classname="com.ibm.websphere.ant.tasks.InstallApplication" classpathref="classpath" />
<taskdef name="wsUninstallApp" classname="com.ibm.websphere.ant.tasks.UninstallApplication" classpathref="classpath" />

<target name="startWebApp1" depends="installEar">
    <wsStartApp wasHome="${wasHome.dir}" 
                application="${remoteAppName}" 
                server="${clusterServerName}" 
                conntype="${remoteProdConnType}" 
                host="${remoteProdHostName}" 
                port="${remoteProdPort}" 
                user="${remoteProdUserId}" 
                password="${remoteProdPassword}" />
</target>

<target name="stopWebApp1" depends="prepare">
    <wsStopApp wasHome="${wasHome.dir}"
                application="${remoteAppName}"
                server="${clusterServerName}"
                conntype="${remoteConnType}"
                host="${remoteHostName}"
                port="${remotePort}"
                user="${remoteUserId}"
                password="${remotePassword}"/>
</target>

<target name="uninstallEar" depends="stopWebApp1">
    <wsUninstallApp wasHome="${wasHome.dir}"
                    application="${remoteAppName}"
                    options="-cell uatNetwork -cluster DOL"
                    conntype="${remoteConnType}"
                    host="${remoteHostName}"
                    port="${remoteDmgrPort}"
                    user="${remoteUserId}"
                    password="${remotePassword}"/>
</target>

<target name="installEar" depends="prepare">
    <wsInstallApp ear="${existingEar.dir}/${existingEar}" 
                  wasHome="${wasHome.dir}" 
                  options="${install_app_options}"
                  conntype="${remoteConnType}" 
                  host="${remoteHostName}" 
                  port="${remoteDmgrPort}" 
                  user="${remoteUserId}" 
                  password="${remotePassword}" />
</target> 
```

另一个有用的链接可能是[这个](http://www.theserverside.com/news/thread.tss?thread_id=32285)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-22T07:51:19.750

如果您只是想玩玩，为什么不使用 netbeans IDE 来生成您的 ear 文件。如果您创建企业项目，它将自动为您生成 ant 文件。适合原型设计和刚刚开始:-)

甚至还有一个允许自动部署的插件，但这看起来很不稳定！****

# c - 在 C 中将多维数组作为函数参数传递

> ID：4051
> 
> 赞同：55
> 
> 时间：2008-08-06T22:01:25.463
> 
> 标签：c, function, multidimensional-array

当我不知道数组的维度将是什么时，我`C`可以**将多维数组****作为单个参数**传递给函数吗？

此外，我的多维数组可能包含字符串以外的类型。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-12-16T17:18:33.383

将指向第一个元素的显式指针传递给数组维度作为单独的参数。例如，要处理任意大小的 int 二维数组：

```
void func_2d(int *p, size_t M, size_t N)
{
  size_t i, j;
  ...
  p[i*N+j] = ...;
} 
```

这将被称为

```
...
int arr1[10][20];
int arr2[5][80];
...
func_2d(&arr1[0][0], 10, 20);
func_2d(&arr2[0][0], 5, 80); 
```

同样的原则也适用于高维数组：

```
func_3d(int *p, size_t X, size_t Y, size_t Z)
{
  size_t i, j, k;
  ...
  p[i*Y*Z+j*Z+k] = ...;
  ...
}
...
arr2[10][20][30];
...
func_3d(&arr[0][0][0], 10, 20, 30); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-07-08T04:33:04.697

您可以将函数声明为：

```
f(int size, int data[][size]) {...} 
```

然后编译器将为您执行所有指针运算。

请注意，尺寸大小必须出现**在**数组本身之前。

GNU C 允许参数声明转发（如果你真的需要在数组之后传递维度）：

```
f(int size; int data[][size], int size) {...} 
```

第一个维度，虽然您也可以作为参数传递，但对于 C 编译器来说是无用的（即使对于 sizeof 运算符，当应用于作为参数传递的数组时，总是将 is 作为指向第一个元素的指针）。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-08-07T00:34:21.097

您可以对任何数据类型执行此操作。只需使其成为一个指针到指针：

```
typedef struct {
  int myint;
  char* mystring;
} data;

data** array; 
```

但不要忘记你仍然需要 malloc 变量，它确实有点复杂：

```
//initialize
int x,y,w,h;
w = 10; //width of array
h = 20; //height of array

//malloc the 'y' dimension
array = malloc(sizeof(data*) * h);

//iterate over 'y' dimension
for(y=0;y<h;y++){
  //malloc the 'x' dimension
  array[y] = malloc(sizeof(data) * w);

  //iterate over the 'x' dimension
  for(x=0;x<w;x++){
    //malloc the string in the data structure
    array[y][x].mystring = malloc(50); //50 chars

    //initialize
    array[y][x].myint = 6;
    strcpy(array[y][x].mystring, "w00t");
  }
} 
```

释放结构的代码看起来很相似——不要忘记对你分配的所有东西调用 free() ！（此外，在健壮的应用程序中，您应该[检查 malloc() 的返回](http://www.google.com/search?q=check+malloc+return)。）

现在假设你想把它传递给一个函数。您仍然可以使用双指针，因为您可能想要对数据结构进行操作，而不是指向数据结构指针的指针：

```
int whatsMyInt(data** arrayPtr, int x, int y){
  return arrayPtr[y][x].myint;
} 
```

调用此函数：

```
printf("My int is %d.\n", whatsMyInt(array, 2, 4)); 
```

输出：

```
My int is 6. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-13T11:22:39.827

> 在 C 中，当我不知道数组的维度将是什么时，我可以将多维数组作为单个参数传递给函数吗？

**不**

如果通过“单个参数”你的意思是只传递数组而不传递数组维度，不，你不能。至少对于真正的多维数组来说不是。

您可以将维度 [s] 与数组一起放入一个结构中，并声称您正在传递一个“单个参数”，但这实际上只是将多个值打包到一个容器中并将该容器称为“一个参数”。

您可以通过传递维度本身和数组来传递已知类型和维度数量但大小未知的数组，如下所示：

```
void print2dIntArray( size_t x, size_t y, int array[ x ][ y ] )
{
    for ( size_t ii = 0, ii < x; ii++ )
    {
        char *sep = "";
        for ( size_t jj = 0; jj < y; jj++ )
        {
            printf( "%s%d", sep, array[ ii ][ jj ] );
            sep = ", ";
        }
        printf( "\n" );
    }
} 
```

您可以这样调用该函数：

```
int a[ 4 ][ 5 ];
int b[ 255 ][ 16 ];

...

print2dIntArray( 4, 5, a );

....

printt2dIntArray( 255, 16, b ); 
```

类似地，一个 3 维数组，例如 a `struct pixel`：

```
void print3dPixelArray( size_t x, size_t y, size_t z, struct pixel pixelArray[ x ][ y ][ z ] )
{
    ...
} 
```

或一维`double`数组：

```
void print1dDoubleArray( size_t x, double doubleArray[ x ] )
{
    ...
} 
```

**但...**

但是，只要基本类型具有标记值，就可以将“指向数组的指针数组”传递给`X`通常被错误标记为“多维数组”的构造作为单个参数`X`可用于指示类型为 的最终、最低级别的一维数组的结束`X`。

例如，`char **argv`传递给的值`main()`是指向指针数组的指针`char`。初始`char *`指针数组以一个标记`NULL`值结束，而指针数组引用的每个`char`数组都`char *`以一个`NUL`字符值结束`'\0'`。

例如，如果您可以`NAN`用作哨兵值，因为实际数据永远不会**是**a `NAN`，您可以像这样打印 a `double **`：

```
void printDoubles( double **notAnArray )
{
    while ( *notAnArray )
    {
        char *sep = "";
        for ( size_t ii = 0;  ( *notAnArray )[ ii ] != NAN; ii++ )
        {
            printf( "%s%f", sep, ( *notAnArray )[ ii ] );
            sep = ", ";
        }

        notAnArray++;
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-01-03T12:51:47.267

```
int matmax(int **p, int dim) // p- matrix , dim- dimension of the matrix 
{
    return p[0][0];  
}

int main()
{
   int *u[5]; // will be a 5x5 matrix

   for(int i = 0; i < 5; i++)
       u[i] = new int[5];

   u[0][0] = 1; // initialize u[0][0] - not mandatory

   // put data in u[][]

   printf("%d", matmax(u, 0)); //call to function
   getche(); // just to see the result
} 
```

# sql-server - 如何在 SQL Server 2005 Express 中启用全文索引？

> ID：4052
> 
> 赞同：18
> 
> 时间：2008-08-06T22:02:33.993
> 
> 标签：sql-server, sql-server-2005, full-text-search

我正在尝试在 SQL Server 2005 Express 中启用全文索引。我在装有 Vista Ultimate 的笔记本电脑上运行它。

我了解 SQL Server Express 的标准版本没有全文索引。我已经下载并安装了“Microsoft SQL Server 2005 Express Edition with Advanced Services Service Pack 2”（[下载](http://www.microsoft.com/downloads/details.aspx?FamilyID=5B5528B9-13E1-4DB9-A3FC-82116D598C3D&displaylang=en)）。

我还确保“SQL Server（实例）”和“SQL Server 全文搜索（实例）”服务都在“网络服务”的同一帐户上运行。

我还在“数据库属性”>“文件”区域中选择了“使用全文索引”选项。

我可以运行 sql 查询“SELECT fulltextserviceproperty('IsFulltextInstalled');” 并返回 1。

我遇到的问题是，当我在设计视图中打开表格并选择“管理全文索引”时；全文索引窗口显示消息...

> “无法创建全文索引。请检查您是否拥有正确的权限或是否定义了全文目录。”

关于检查什么或下一步去哪里的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-06T23:46:30.210

```
sp_fulltext_database 'enable'

CREATE FULLTEXT CATALOG [myFullText]
WITH ACCENT_SENSITIVITY = ON

CREATE FULLTEXT INDEX ON [dbo].[tblName] KEY INDEX [PK_something] ON [myFullText] WITH CHANGE_TRACKING AUTO
ALTER FULLTEXT INDEX ON [dbo].[otherTable] ADD ([Text])
ALTER FULLTEXT INDEX ON [dbo].[teyOtherTable] ENABLE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T13:40:21.307

我需要让全文索引工作是......

> 创建全文目录 [myFullText] WITH ACCENT_SENSITIVITY = ON

之后，我可以运行 CREATE FULLTEXT INDEX 查询或使用 MSSQL Management Studio 中的管理全文索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:49:54.007

使用 sql server 管理工作室。

以管理员身份登录到您的 Windows 帐户。

然后在sql server management studio中选择database并右键单击database并选择Define Full Text Index，整个过程由management studio指导。

# language-agnostic - 除了文件或数据库，还有哪些缓存方法可用？

> ID：4062
> 
> 赞同：13
> 
> 时间：2008-08-06T22:21:55.373
> 
> 标签：language-agnostic, caching

目前我只知道两种缓存数据的方法（我使用 PHP，但我认为这同样适用于大多数语言）。

1.  将缓存保存到文件
2.  将缓存保存到大型数据库字段

有没有其他（也许更好）的缓存方式，还是真的就这么简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T00:46:58.467

也许您想更准确地明确您想要缓存的内容。您有所有这些机会进行缓存：

*   **访问**缓存数据的数据库，首先正确调整 RDBMS，然后使用层来委派决定检测相同数据的多个查询（例如使用[AdoDB](http://adodb.sourceforge.net/)。）
*   **从代码中的循环中提取计算，**这样您就不会多次计算相同的值。*这是您的第三种方式：将结果存储在用户的会话中。*
*   **[使用APC Cache](http://pecl.php.net/package/APC)之类的扩展**预编译 PHP 代码**。这样您就不必为每个请求编译相同的 PHP 代码。**
***   **发送给用户的页面，**确保您设置了正确的 META 标签（为世界做一件好事，至少绝对必要不要使用 ETL）；或者可能使动态页面完全静态（具有生成 .html 页面的批处理）；或使用像[Squid](http://www.squid-cache.org/)这样的代理缓存。*   **预取**，通过这种方式，我指的是你必须通过在用户不看你的方式时做事来改善用户体验的所有机会。例如，在 HTML 文件中预加载 IMG 标记、调整 RDBMS 以进行预校、预计算结果将复杂计算存储在数据库中等。**

 **根据我的经验，我敢打赌，在我们开始讨论缓存之前，您的代码可以改进很多。例如，考虑一下您网站的导航结构有多好以及您对用户体验的控制有多好。[然后使用XDebug 之](http://xdebug.org/)类的工具检查您的代码。

还要验证您进行 SQL 查询的情况以及索引表的情况。然后再次检查您的代码以寻找机会应用规则“多次阅读但只写一次”

使用像[YSlow](http://developer.yahoo.com/yslow/)这样的简单工具来提示其他需要改进的简单事情。再次检查您的代码，寻找将逻辑放入浏览器的机会（通过 JavaScript）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-06T22:23:13.203

您还可以缓存在内存中，效率更高。试试[memcached](http://www.danga.com/memcached/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-07T00:48:53.300

借调 memcached，把简单的东西做得很好，如果你也需要它，可以去分发和所有爵士乐

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T21:28:30.150

如果您使用的是 Apache，则可以使用 mod_rewrite 静态缓存您的网页。假设您正在使用 PHP，并且您有一个对“/somepage.php”的请求。在您的 .htaccess 文件中，您输入以下内容：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^$ # let's not cache urls with queries
RewriteCond %{REQUEST_METHOD} ^GET$ # or POST/PUT/DELETE requests
RewriteCond static_cache/%{REQUEST_URI} -s # Check that this file exists and is > 0 bytes
RewriteRule (^.*$) static_cache$1 [L] # If all the conditions are met, we rewrite this request to hit the static cache instead 
```

如果您的缓存变为空，则该请求将照常由您的 php 脚本处理，因此现在只需让您的 php 脚本将生成的 html 存储在缓存中即可。最简单的方法是使用另一个 htaccess 规则在所有 php 请求前添加几个 php 文件（这可能是一个好主意，也可能不是一个好主意，具体取决于您的应用程序）：

```
php_value auto_prepend_file "pre_cache.php"
php_value auto_append_file "post_cache.php" 
```

然后你会做这样的事情：

pre_cache.php：

```
ob_start(); 
```

post_cache.php：

```
$result = ob_get_flush();
if(!$_SERVER['QUERY_STRING']) { # Again, we're not caching query string requests
  file_put_contents("static_cache/" + __FILE__, $result);
} 
```

使用 .htaccess 文件中的一些额外的正则表达式，我们可能也可以开始缓存查询字符串请求，但我将把它作为练习留给读者:)**

# svn - SVN合并合并额外的东西

> ID：4072
> 
> 赞同：13
> 
> 时间：2008-08-06T22:30:26.387
> 
> 标签：svn, merge

我刚刚使用以下方法进行了合并：

```
svn merge -r 67212:67213 https://my.svn.repository/trunk . 
```

我只有 2 个文件，其中一个是简单的`ChangeLog`. 它不仅合并了我的`ChangeLog`更改，实际上还提取了我的更改以及一些以前不在目标中的更改`ChangeLog`。我注意到执行 --dry-run 时发生了冲突，所以我更新`ChangeLog`了，但仍然存在冲突（我在进行实际合并时看到了冲突）。

然后，我后来对要合并的文件进行了比较：

```
svn diff -r 67212:67213 ChangeLog 
```

而且我只看到了我所做的更改，所以我知道额外的更改并没有以某种方式进入那里。

这让我担心合并实际上并不仅仅是采用我所做的更改，这是我所期望的。谁能解释发生了什么？

更新：响应 NilObject：

因此，我更改了 2 个文件，只有 ChangeLog 是相关的，其他合并正常。当我去我的常规中继结账时，我执行上面的 diff 命令并查看：

```
Index: ChangeLog
===================================================================
--- ChangeLog   (revision 67212)
+++ ChangeLog   (revision 67213)
@@ -1,3 +1,7 @@
+2008-08-06  Mike Stone  <myemail>
+
+   * changed_file: Details.
+
 2008-08-06  Someone Else  <their_email>

    * theirChanges: Details. 
```

在我合并之前的更改后，ChangeLog 的差异如下所示：

```
Index: ChangeLog
===================================================================
--- ChangeLog   (revision 67215)
+++ ChangeLog   (working copy)
@@ -1,3 +1,14 @@
+<<<<<<< .working
+=======
+2008-08-06  Mike Stone  <myemail>
+
+   * changed_file: Details.
+
+2008-08-06  Someone Else  <their_email>
+
+   * theirChanges: Details.
+
+>>>>>>> .merge-right.r67213
 2008-08-05  Someone Else2  <their2_email>

    * olderChange: Details. 
```

请注意，错误拉入的条目不在我将其合并到的文件中，但它不是我的更改之一，无论如何都不应该被合并。它很容易修复（删除不属于我的更改的额外行），但它仍然让我担心自动合并到`SVN`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-17T17:17:46.193

这只发生在冲突中 - 基本上 svn 试图合并更改，但（粗略地说）将更改视为：

添加

```
2008-08-06  Mike Stone  <myemail>

* changed_file: Details. 
```

前

```
2008-08-06  Someone Else  <their_email> 
```

并且在进行合并时找不到“其他人”行，因此在放入冲突时将其放入上下文中。如果是非冲突合并，则只会应用您预期的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-06T23:12:35.083

这里没有足够的信息继续下去。

```
svn merge -r 67212:67213 https://my.svn.repository/trunk . 
```

将合并在版本 67212 中更改的任何文件在存储库上的文件夹 /trunk 中，并将它们合并到您当前的工作目录中。如果你这样做：

```
svn log -r 67212 
```

它显示哪些文件已更改？Merge 只会从第一个参数中提取更改，并将它们应用于第二个参数。它不会在第一个参数中上传回服务器。

如果这不能回答您的问题，您能否发布更多关于到底发生了什么的详细信息？

# java - 您在 Java 项目中使用哪些代码分析工具？

> ID：4080
> 
> 赞同：118
> 
> 时间：2008-08-06T22:45:27.543
> 
> 标签：java, code-coverage, static-analysis

您在 Java 项目中使用哪些代码分析工具？

我对各种感兴趣

*   静态代码分析工具（FindBugs、PMD 和任何其他工具）
*   代码覆盖工具（Cobertura、Emma 等）
*   任何其他基于仪器的工具
*   还有什么，如果我错过了什么

如果适用，还要说明您使用的构建工具以及这些工具与您的 IDE 和构建工具的集成程度。

如果工具仅以特定方式可用（作为 IDE 插件，或者说，构建工具插件），那么该信息也值得注意。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2008-09-17T04:02:23.067

对于静态分析工具，我经常使用 CPD、[PMD](http://pmd.sourceforge.net)、[FindBugs](http://findbugs.sourceforge.net)和[Checkstyle](http://checkstyle.sourceforge.net)。

CPD 是 PMD“复制/粘贴检测器”工具。[在我注意到PMD 网页](http://pmd.sourceforge.net)上的[“查找重复代码”链接](http://pmd.sourceforge.net/cpd.html)之前，我使用 PMD 有一段时间了。

我想指出，这些工具有时可以扩展到它们“开箱即用”的规则集之外。不仅仅是因为它们是开源的，因此您可以重写它们。其中一些工具带有允许它们扩展的应用程序或“钩子”。例如，PMD 带有允许您创建新规则的[“设计器”工具。](http://pmd.sourceforge.net/howtowritearule.html)此外，Checkstyle 具有[DescendantToken](http://checkstyle.sourceforge.net/config_misc.html#DescendantToken)检查，该检查具有允许大量自定义的属性。

我将这些工具与[基于 Ant 的构建](http://virtualteamtls.svn.sourceforge.net/viewvc/virtualteamtls/trunk/scm/common.xml?view=markup)集成在一起。您可以点击链接查看我评论的配置。

除了与构建的简单集成之外，我发现将工具配置为以其他几种方式进行某种“集成”很有帮助。即报告生成和警告抑制的一致性。我想在这个讨论中添加这些方面（可能也应该有“静态分析”标签）：人们如何配置这些工具来创建一个“统一”的解决方案？（我在[这里](https://stackoverflow.com/questions/79918/configuring-static-analysis-tools-for-uniformity)单独问过这个问题）

首先，对于警告报告，我转换了输出，使每个警告都具有简单的格式：

```
/absolute-path/filename:line-number:column-number: warning(tool-name): message
```

这通常被称为“Emacs 格式”，但即使您不使用 Emacs，它也是一种用于同质化报告的合理格式。例如：

```
/project/src/com/example/Foo.java:425:9: warning(Checkstyle):Missing a Javadoc comment.
```

我的警告格式转换是由我的 Ant 脚本和 Ant [filterchains 完成](http://ant.apache.org/manual/Types/filterchain.html)的。

我做的第二个“整合”是为了警告抑制。默认情况下，每个工具都支持注释或注释（或两者），您可以将它们放在代码中以使您想忽略的警告静音。但是这些各种警告抑制请求并没有一致的外观，这似乎有些愚蠢。当你抑制警告时，你正在抑制警告，所以为什么不总是写“ `SuppressWarning`？”

例如，PMD 的默认配置禁止`NOPMD`在注释中带有字符串“”的代码行上生成警告。此外，PMD 支持 Java 的`@SuppressWarnings`注解。我将 PMD 配置为使用包含“”的注释，`SuppressWarning(PMD.`而不是`NOPMD`使 PMD 抑制看起来相似。我填写了使用注释样式抑制时违反的特定规则：

```
// SuppressWarnings(PMD.PreserveStackTrace) justification: (false positive) exceptions are chained
```

只有 " `SuppressWarnings(PMD.`" 部分对注释很重要，但它与 PMD 对`@SuppressWarning`通过名称识别个别规则违规的注释的支持一致：

```
@SuppressWarnings("PMD.CompareObjectsWithEquals") // justification: identity comparision intended
```

类似地，Checkstyle 抑制注释对之间的警告生成（不提供注释支持）。默认情况下，关闭和打开 Checkstyle 的注释分别包含字符串`CHECKSTYLE:OFF`和`CHECKSTYLE:ON`。更改此配置（使用 Checkstyle 的“SuppressionCommentFilter”）以使用字符串“ `BEGIN SuppressWarnings(CheckStyle.`”和“ `END SuppressWarnings(CheckStyle.`”使控件看起来更像 PMD：

```
// BEGIN SuppressWarnings(Checkstyle.HiddenField) justification: "Effective Java," 2nd ed., Bloch, Item 2
// END SuppressWarnings(Checkstyle.HiddenField)

```

对于 Checkstyle 注释，特定的检查违规 ( `HiddenField`)*很*重要，因为每个检查都有自己的 " `BEGIN/END`" 注释对。

FindBugs 还支持带有`@SuppressWarnings`注释的警告生成抑制，因此无需进一步配置即可实现与其他工具的某种程度的一致性。不幸的是，Findbugs 必须支持自定义`@SuppressWarnings`注解，因为内置 Java`@SuppressWarnings`注解的`SOURCE`保留策略不够强大，无法将注解保留在 FindBugs 需要的类文件中。我完全限定了 FindBugs 警告抑制以避免与 Java 的`@SuppressWarnings`注释冲突：

```
@edu.umd.cs.findbugs.annotations.SuppressWarnings("UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR")
```

这些技术使不同工具的事情看起来相当一致。请注意，让每个警告抑制都包含字符串“ `SuppressWarnings`”可以轻松运行简单搜索以查找整个代码库中所有工具的所有实例。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-10-29T18:55:44.697

我使用 Cobertura、Checkstyle、(Ecl)Emma 和 Findbugs 的组合。

[EclEmma](http://www.eclemma.org/)是一个*很棒*的Eclipse 插件，它通过在编辑器中着色 java 源代码来显示代码覆盖率（[截图](http://www.eclemma.org/images/screen.png)）——覆盖率是通过运行 JUnit 测试生成的。当您试图找出特定类中涵盖了哪些行，或者如果您想查看单个测试涵盖了哪些行时，这非常有用。这比生成报告然后查看报告以查看哪些类的覆盖率低得多的用户友好和有用得多。

Checkstyle 和 Findbugs Eclipse 插件也很有用，它们会在您键入时在编辑器中生成警告。

Maven2 具有报告插件，可与上述工具一起在构建时生成报告。我们使用它来获取整体项目报告，这在您需要汇总数字时更有用。这些是由我们使用[Continuum](http://continuum.apache.org/)运行的 CI 构建生成的。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-08-16T18:48:43.267

我们在 Maven 2.x 构建和 Eclipse/RAD 7 中使用和集成以下所有内容：

*   测试 - JUnit/TestNG
*   代码分析 - FindBugs, PMD
*   代码覆盖率 - Clover

此外，在我们的 Maven 构建中，我们有：

*   依赖
*   标签检查器（TODO、FIXME 等）

此外，如果您使用的是 Maven 2.x，CodeHaus 在他们的[Mojo 项目](http://mojo.codehaus.org/plugins.html)中有一系列方便的 Maven 插件。

注意：Clover 与 Bamboo CI 服务器开箱即用集成（因为它们都是 Atlassian 产品）。FindBugs、PMD 和 CheckStyle 也有 Bamboo 插件，但如前所述，免费的 Hudson CI 服务器也有这些插件。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-17T14:40:53.610

我使用 IntelliJ IDEA 内置的静态分析。完美融合。

我使用 Intellij IDEA 内置的代码覆盖率（基于 EMMA）。再次，完美融合。

与拼凑来自不同供应商的工具相比，这种集成解决方案可靠、强大且易于使用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-07T07:18:26.710

[Checkstyle](http://checkstyle.sourceforge.net/)是我在以前的公司用过的另一个……它主要用于样式检查，但它也可以做一些静态分析。此外，[Clover](http://www.atlassian.com/software/clover/)用于代码覆盖，但请注意它不是免费工具。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-08-07T07:21:49.230

我们使用 FindBugs 和 Checkstyle 以及 Clover 进行代码覆盖。

我认为进行某种静态分析以支持您的开发很重要。不幸的是，这些工具的重要性仍未得到广泛传播。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T00:20:41.750

我们使用与 Ant 集成的 FindBugs 和 JDepend。我们使用 JUnit，但我们没有使用任何覆盖工具。

我没有将它集成到 Rational Application Developer（我用来开发 J2EE 应用程序的 IDE）中，因为我喜欢在 Windows 控制台中运行 javac 时它看起来多么整洁。:P

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-17T04:31:07.223

我在 Cobertura 上运气不错。它是一个代码覆盖工具，可以作为正常构建的一部分通过您的 ant 脚本执行，并且可以集成到 Hudson 中。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T14:46:25.623

我们的团队使用 PMD 和 Cobertura，实际上我们的项目是 maven 项目，包含用于代码分析的插件非常简单。真正的问题是您需要使用哪个分析的特定项目，我认为您不能为每个项目使用相同的插件。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2010-08-29T09:56:05.497

在我们的项目中，我们在 checkstyle、pmd.... 前面使用 Sonar 以及 CI（Bamboo、Hudson），我们还获得了关于我们的源质量和指导的很好的历史。我确实喜欢 Sonar，因为您是 CI Stack 中的一个中心工具，可以为您完成这项工作，并且您可以轻松自定义每个项目的规则。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2011-09-17T06:59:00.177

[结构 101](http://www.headwaysoftware.com/)擅长代码分析和查找循环包依赖关系。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-08T14:53:12.293

我正在寻找许多答案来了解新工具并将这些知识整合到一个问题/线程中，所以我怀疑这个问题会有 1 个真正的答案。

我对自己的问题的回答是我们使用：

*   Findbugs 查找常见错误错误/编码 - 从 maven 运行，并且还可以轻松集成到 Eclipse 中
*   Cobertura 用于我们的报道报告 - 从 maven 运行

Hudson 还有一个任务扫描器插件，可以显示你的 TODO 和 FIXME 的数量，以及它们在源文件中的位置。

在我们的案例中，所有这些都与 Maven 1.x 集成并与 Hudson 绑定，后者在签到时运行我们的构建以及每晚和每周的额外内容。Hudson 趋势图绘制了我们的 JUnit 测试、覆盖率、查找错误以及打开的任务。还有一个 Hudson 插件可以报告和绘制我们的编译警告。我们还使用 Hudson plots 插件进行了几项性能测试，它们有自己的性能和内存使用图表。

# sql - What program can I use to generate diagrams of SQL view/table structure?

> ID：4110
> 
> 赞同：15
> 
> 时间：2008-08-06T23:19:50.500
> 
> 标签：sql, sql-server, database, diagram

I've been tasked with redesigning part of a ms-sql database structure which currently involves a lot of views, some of which contain joins to other views.

Anyway, I wonder if anyone here could recommend a utility to automatically generate diagrams to help me visualise the whole structure.

What's the best program you've used for such problems?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-06T23:36:58.547

I am a big fan of Embarcadero's [ER/Studio](http://www.embarcadero.com/products/er-studio). It is very powerful and produces excellent on-screen as well as printed results. They have a free trial as well, so you should be able to get in and give it a shot without too much strife.

Good luck!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-06T23:40:47.977

Toad Data Modeller from Quest does a nice job on this and is reasonably priced. Embarcadero E/R studio is good too, as Bruce mentioned.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T00:08:31.383

OP asked about diagramming views and view dependencies, SQL Management Studio and Enterprise Manager doesn't allow you to diagram views. I can't vouch for the other tools.

The LINQ to SQL designer for Visual Studio does allow you to drop views on the design surface but there isn't a easy way to model the dependencies between the views. I'm not sure which tool has this type of diagramming functionality. You could take a look at Red Gate's SQLDoc tool but it just provides text based output.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-06T23:29:21.103

If you are talking about MS SQL Server tables, I like the diagram support in SQL Server Management Studio. You just drag the tables from the explorer onto the canvas, and they are laid out for you along with lines for relationships. You'll have to do some adjusting by hand for the best looking diagrams, but it is a decent way to get diagrams.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-18T16:33:01.820

I upmodded Mark's post about Toad Data Modeler and wanted to point out that they have a beta version that is fully functional and free. The only downsides are the occasional bug and built in expiration (typically around the time a new beta is available), but for this poor bloke it does wonders until I can get my boss to chip in for a license.

# vb.net - 用于 VB.NET 解决方案的 SVN 客户端忽略模式

> ID：4138
> 
> 赞同：17
> 
> 时间：2008-08-06T23:46:24.673
> 
> 标签：vb.net, svn, tortoisesvn

TortoiseSVN 应该为 VB.NET 解决方案提供什么最佳 SVN 忽略模式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-08-06T23:48:46.353

这是我用于 C# w/resharper 的，应该与 vb.net 一样工作：

```
build deploy */bin  */bin/* obj *.dll *.pdb *.user *.suo _ReSharper*  *.resharper* bin 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-26T10:26:37.193

我也总是添加 Thumbs.db，因为我讨厌对这些文件进行版本控制。对于 Web 开发人员来说可能更多的是一个问题

# java - 如何使用 Java 读取正在写入的文件？

> ID：4149
> 
> 赞同：106
> 
> 时间：2008-08-06T23:57:10.173
> 
> 标签：java, file, file-io

我有一个将信息写入文件的应用程序。此信息在执行后用于确定应用程序的通过/失败/正确性。我希望能够在文件被写入时读取它，以便我可以实时进行这些通过/失败/正确性检查。

我认为可以做到这一点，但是在使用 Java 时涉及到什么问题？如果读取赶上写入，它会等待更多写入直到文件关闭，还是读取会在此时抛出异常？如果是后者，那我该怎么办？

我的直觉目前正在推动我走向 BufferedStreams。这是要走的路吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-30T19:32:24.637

无法使用该示例，`FileChannel.read(ByteBuffer)`因为它不是阻塞读取。但是，是否使以下代码起作用：

```
boolean running = true;
BufferedInputStream reader = new BufferedInputStream(new FileInputStream( "out.txt" ) );

public void run() {
    while( running ) {
        if( reader.available() > 0 ) {
            System.out.print( (char)reader.read() );
        }
        else {
            try {
                sleep( 500 );
            }
            catch( InterruptedException ex ) {
                running = false;
            }
        }
    }
} 
```

当然，同样的事情可以作为计时器而不是线程工作，但我把它留给程序员。我仍在寻找更好的方法，但这对我现在有用。

哦，我会警告这一点：我使用的是 1.4.2。是的，我知道我还处于石器时代。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-29T19:08:15.170

如果您想在写入文件时读取文件并且只读取新内容，那么以下内容将帮助您实现相同的目的。

要运行此程序，您将从命令提示符/终端窗口启动它并传递要读取的文件名。除非您终止程序，否则它将读取文件。

java FileReader c:\myfile.txt

当您键入一行文本时，将其从记事本中保存，您将在控制台中看到打印的文本。

```
public class FileReader {

    public static void main(String args[]) throws Exception {
        if(args.length>0){
            File file = new File(args[0]);
            System.out.println(file.getAbsolutePath());
            if(file.exists() && file.canRead()){
                long fileLength = file.length();
                readFile(file,0L);
                while(true){

                    if(fileLength<file.length()){
                        readFile(file,fileLength);
                        fileLength=file.length();
                    }
                }
            }
        }else{
            System.out.println("no file to read");
        }
    }

    public static void readFile(File file,Long fileLength) throws IOException {
        String line = null;

        BufferedReader in = new BufferedReader(new java.io.FileReader(file));
        in.skip(fileLength);
        while((line = in.readLine()) != null)
        {
            System.out.println(line);
        }
        in.close();
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-01T16:31:53.870

您还可以查看用于锁定文件一部分的 java 通道。

[http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html](http://java.sun.com/javase/6/docs/api/java/nio/channels/FileChannel.html)

的这个功能`FileChannel`可能是一个开始

```
lock(long position, long size, boolean shared) 
```

调用此方法将阻塞，直到可以锁定该区域

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-09-25T13:45:22.043

我完全同意[Joshua 的回答](https://stackoverflow.com/a/10803105/2003986)，[Tailer](https://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/input/Tailer.html)很适合这种情况。这是一个例子：

它每 150 毫秒在文件中写入一行，同时每 2500 毫秒读取同一个文件

```
public class TailerTest
{
    public static void main(String[] args)
    {
        File f = new File("/tmp/test.txt");
        MyListener listener = new MyListener();
        Tailer.create(f, listener, 2500);

        try
        {
            FileOutputStream fos = new FileOutputStream(f);
            int i = 0;
            while (i < 200)
            {
                fos.write(("test" + ++i + "\n").getBytes());
                Thread.sleep(150);
            }
            fos.close();
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    private static class MyListener extends TailerListenerAdapter
    {
        @Override
        public void handle(String line)
        {
            System.out.println(line);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T07:25:02.580

答案似乎是“不”……和“是”。似乎没有真正的方法可以知道文件是否已打开以供另一个应用程序写入。因此，从这样的文件中读取将一直进行，直到内容用尽。我接受了 Mike 的建议并编写了一些测试代码：

Writer.java 将一个字符串写入文件，然后等待用户敲击回车，然后再将另一行写入文件。想法是可以启动它，然后可以启动阅读器以查看它如何处理“部分”文件。我写的阅读器在Reader.java中。

**Writer.java**

```
public class Writer extends Object
{
    Writer () {

    }

    public static String[] strings = 
        {
            "Hello World", 
            "Goodbye World"
        };

    public static void main(String[] args) 
        throws java.io.IOException {

        java.io.PrintWriter pw =
            new java.io.PrintWriter(new java.io.FileOutputStream("out.txt"), true);

        for(String s : strings) {
            pw.println(s);
            System.in.read();
        }

        pw.close();
    }
} 
```

**阅读器.java**

```
public class Reader extends Object
{
    Reader () {

    }

    public static void main(String[] args) 
        throws Exception {

        java.io.FileInputStream in = new java.io.FileInputStream("out.txt");

        java.nio.channels.FileChannel fc = in.getChannel();
        java.nio.ByteBuffer bb = java.nio.ByteBuffer.allocate(10);

        while(fc.read(bb) >= 0) {
            bb.flip();
            while(bb.hasRemaining()) {
                System.out.println((char)bb.get());
            }
            bb.clear();
        }

        System.exit(0);
    }
} 
```

不保证此代码是最佳实践。

这留下了 Mike 建议的选项，即定期检查是否有新数据要从文件中读取。这随后需要用户干预以在确定读取完成时关闭文件读取器。或者，需要让读者知道文件的内容并能够确定和结束写入条件。如果内容是 XML，则可以使用文档结尾来表示这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-02T20:04:34.257

有一个开源 Java Graphic Tail 可以做到这一点。

[https://stackoverflow.com/a/559146/1255493](https://stackoverflow.com/a/559146/1255493)

```
public void run() {
    try {
        while (_running) {
            Thread.sleep(_updateInterval);
            long len = _file.length();
            if (len < _filePointer) {
                // Log must have been jibbled or deleted.
                this.appendMessage("Log file was reset. Restarting logging from start of file.");
                _filePointer = len;
            }
            else if (len > _filePointer) {
                // File must have had something added to it!
                RandomAccessFile raf = new RandomAccessFile(_file, "r");
                raf.seek(_filePointer);
                String line = null;
                while ((line = raf.readLine()) != null) {
                    this.appendLine(line);
                }
                _filePointer = raf.getFilePointer();
                raf.close();
            }
        }
    }
    catch (Exception e) {
        this.appendMessage("Fatal error reading log file, log tailing has stopped.");
    }
    // dispose();
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-01-03T12:09:17.433

您无法读取使用 FileInputStream、FileReader 或 RandomAccessFile 从另一个进程打开的文件。

但是直接使用 FileChannel 会起作用：

```
private static byte[] readSharedFile(File file) throws IOException {
    byte buffer[] = new byte[(int) file.length()];
    final FileChannel fc = FileChannel.open(file.toPath(), EnumSet.of(StandardOpenOption.READ));
    final ByteBuffer dst = ByteBuffer.wrap(buffer);
    fc.read(dst);
    fc.close();
    return buffer;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T00:31:47.203

不是 Java 本身，但您可能会遇到问题，您已将某些内容写入文件，但尚未实际写入 - 它可能在某处的缓存中，从同一个文件中读取可能实际上不会给您新信息。

短版本 - 使用 flush() 或任何相关的系统调用来确保您的数据实际写入文件。

注意我不是在谈论操作系统级别的磁盘缓存——如果你的数据进入这里，它应该出现在 read() 之后。可能是语言本身缓存写入，等待缓冲区填满或文件被刷新/关闭。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-07T00:37:44.880

我从未尝试过，但是您应该编写一个测试用例，以查看在结束后从流中读取是否有效，无论是否有更多数据写入文件。

您是否有理由不能使用管道输入/输出流？数据是从同一个应用程序写入和读取的（如果是，你有数据，为什么需要从文件中读取）？

否则，可能会读到文件末尾，然后监视更改并寻找您离开的地方并继续……尽管要注意竞争条件。

# .net - 缓存数据的最佳方式

> ID：4151
> 
> 赞同：14
> 
> 时间：2008-08-06T23:58:47.580
> 
> 标签：.net, caching

我正在为我们当前的设置找出缓存策略，目前有多个 Web 服务器，并且想知道在这种环境中缓存数据的最佳方式是什么。我已经对 MemCache 和本机 asp.net 缓存进行了研究，但想先获得一些反馈。如果我使用 MemCache 或 MemCache 的 win32 端口，我应该使用 Linux 机器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-07T00:03:13.017

检查[Microsoft Velocity](http://code.msdn.microsoft.com/velocity)怎么样？如果您不想开始使用 Microsoft CTP-ware，另一个选择是查看[Nache](http://www.alachisoft.com/ncache/)，它允许分布式缓存/会话状态管理

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T00:35:36.447

Dare Obasanjo 有一篇关于这个主题的[非常好的博客文章。](http://www.25hoursaday.com/weblog/2007/07/05/ASPNETCachingVsMemcachedSeekingEfficientDataPartitioningLookupAndRetrieval.aspx)在决定缓存策略之前，您确实需要评估缓存的内容、缓存的原因以及您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T00:25:12.973

[http://www.danga.com/memcached/](http://www.danga.com/memcached/)

对我来说很棒，除了善良之外什么也没听到

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-09T03:55:02.310

除了 memcached，另一个值得研究的开源选择是共享缓存。我没玩过。但它说有 c# 本机实现。

# c# - ConfigurationManager.AppSettings 性能问题

> ID：4157
> 
> 赞同：27
> 
> 时间：2008-08-07T00:12:55.663
> 
> 标签：c#, .net, performance, configuration, properties

我计划将我所有的配置设置存储在我的应用程序的 app.config 部分（使用`ConfigurationManager.AppSettings`类）。当用户使用应用程序的 UI 更改设置时（单击复选框、选择单选按钮等），我计划将这些更改写入`AppSettings`. 同时，当程序运行时，我计划`AppSettings`从一个不断处理数据的进程中不断访问。通过 UI 更改设置需要实时影响数据处理，这就是为什么进程会`AppSettings`不断访问的原因。

就性能而言，这是一个好主意吗？在编写 .Net 应用程序时，使用`AppSettings`应该是存储和访问配置设置的“正确方法”，但我担心这种方法不适合持续加载（至少在不断读取的设置方面）。

如果有人有这方面的经验，我将不胜感激。

**更新：**我可能应该澄清几点。

这不是一个 Web 应用程序，因此将数据库连接到应用程序可能只是为了存储配置设置而过度使用。这是一个 Windows 窗体应用程序。

根据 MSDN 文档，`ConfigurationManager`它不仅用于存储应用程序级别设置，还用于存储用户设置。（例如，如果应用程序作为部分信任应用程序安装，则尤其重要。）

**更新 2：**我接受了 lomaxx 的回答，因为`Properties`它确实看起来是一个不错的解决方案，而无需向我的应用程序（例如数据库）添加任何额外的层。使用属性时，它已经完成了其他人建议的所有缓存。这意味着任何更改和后续读取都在内存中完成，因此速度非常快。属性仅在您明确告知时才将更改写入磁盘。这意味着我可以在运行时即时更改配置设置，然后仅在程序退出时才最终保存到磁盘。

为了验证它确实能够处理我需要的负载，我在笔记本电脑上进行了一些测试，并且能够使用 Properties 每秒进行 750,000 次读取和 7,500 次写入。这远远超出了我的应用程序甚至接近需要的东西，我觉得在不影响性能的情况下使用属性非常安全*。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-07T00:45:37.393

由于您使用的是 winforms 应用程序，如果它在 .net 2.0 中，则实际上有一个为此目的而设计的用户设置系统（称为属性）。[MSDN上的这篇文章](http://msdn.microsoft.com/en-us/library/aa730869(VS.80).aspx)对此有很好的介绍

如果您仍然担心性能，那么请查看类似于 SQLite 的[SQL Compact Edition](http://www.microsoft.com/sql/editions/compact/default.mspx)，但它是 Microsoft 的产品，我发现它可以很好地与 winforms 配合使用，甚至可以[使其与 Linq 配合使用](http://geekswithblogs.net/steveclements/archive/2007/11/13/LINQ-to-SQL.compact.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T00:41:38.977

查看 SQLite，对于这种特殊情况，它似乎是一个不错的选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T00:56:26.933

迪伦，

不要为此使用应用程序配置文件，请使用 SQL DB（SQLite、MySQL、MSSQL 等），因为您不必担心读取和写入配置文件期间的并发问题。

您还可以更灵活地选择要存储的数据类型。appSettings 部分只是一个键/值列表，随着时间的推移和应用程序的成熟，您可能会超出它。您可以使用自定义配置部分，但是当涉及到设计时，您会进入一个新的问题区域。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T01:10:36.720

appSettings 并不真正适用于您正在尝试做的事情。

当您的 .NET 应用程序启动时，它会读取 app.config 文件，并将其内容缓存在内存中。出于这个原因，在您写入 app.config 文件后，您必须以某种方式强制运行时重新解析 app.config 文件，以便它可以再次缓存设置。这是不必要的

**最好**的方法是使用数据库来存储您的配置设置。

除非使用数据库，否则您可以轻松设置外部 XML 配置文件。当您的应用程序启动时，您可以将其内容缓存在 NameValueCollection 对象或 HashTable 对象中。当您更改/添加设置时，您将对缓存副本执行此操作。当您的应用程序关闭时，或在适当的时间间隔内，您可以将缓存内容写回文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T00:26:39.770

如果我错了，有人纠正我，但我不认为 AppSettings 通常用于这些类型的配置设置。通常，您只会放入保持相当静态的设置（数据库连接字符串、文件路径等）。如果您想存储可自定义的用户设置，最好创建一个单独的首选项文件，或者最好将这些设置存储在数据库中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T00:43:11.297

我不会使用配置文件来存储用户数据。使用分贝。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T00:27:36.807

请问您为什么不将用户的设置保存在数据库中？

通常，我会在 appSettings 部分保存很少更改的应用程序设置（默认电子邮件地址错误日志发送到的位置、您自动注销的分钟数等）。这实际上是在应用程序中，不在用户处，一般用于部署设置。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-07T00:28:58.877

我要做的一件事是在读取时缓存 appsettings，然后在写入时从缓存中刷新设置，这应该最大限度地减少服务器为处理 appSettings 而必须处理的实际负载量。

此外，如果可能，请考虑将 appSettings 分解为[configSections](http://www.copernic.com/en/products/desktop-search/whats-new-15.html)，以便您可以读取写入和缓存相关设置。

说了这么多，我会认真考虑将这些值存储在数据库中，因为您似乎实际上是在存储**用户首选项**，而不是应用程序设置。

# frameworks - 什么是好的准系统 CMS 或框架？

> ID：4164
> 
> 赞同：16
> 
> 时间：2008-08-07T00:20:03.607
> 
> 标签：frameworks, content-management-system

我即将为需要类似 CMS 功能的客户启动一个项目。他们希望用户能够登录、修改个人资料和基本论坛。他们还希望能够将内容提交到首页。

是否有框架或准系统 CMS 可以扩展或定制以满足我的需求？我不需要像 Drupal 或 Joomla 那样功能丰富或花哨的东西。我实际上更喜欢框架而不是预打包的 CMS。

我相信我可以从头开始编写所有这些代码，但我不希望这样做，因为框架之类的东西会大大减少我花在编码上的时间，以及更多的设计和布局时间。

编辑：我应该更具体。我正在寻找将在 Debian 服务器上运行的内容管理系统。所以最好不要.net。

* * *

我想我最终可能会选择 Drupal，并且只添加我需要的模块。Turbogears 看起来有点吓人，在 20 分钟的介绍视频之后，我仍然不太确定它会做什么......

TinyCMS 看起来好像从...... 2000 年开始就没有被触动过？！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T09:07:03.093

我认为最好的是 CMS Made Simple。似乎drupal需要一段时间来定制。

[http://www.cmsmadesimple.org/](http://www.cmsmadesimple.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T00:32:29.120

[tinyCMS 几乎](http://tinycms.sourceforge.net/)是你能得到的准系统。（**编辑**：固定链接，我有点高兴并链接到错误的东西）

@modesty，我绝对不会使用 SharePoint，因为它不是**准系统**。这是一个相当昂贵的产品（特别是与许多免费的替代品相比），并且它有相当长的学习曲线来做任何有趣的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T01:09:51.883

哇，又一个 Debian 疯子！

我认为您需要在这里更具体一点，论坛！= CMS。这是供公司内部还是外部客户使用？你知道/喜欢什么语言？如果您选择的语言是 Ruby，那么推荐 Perl 或 PHP 框架是没有意义的。您需要规划可扩展性吗？

Joomla 或 Drupal 有什么问题？我认为它们可以在小型站点上成功使用。也许框架不是您要寻找的，也许您只需要一两个库（例如[PEAR](http://pear.php.net/)？）。如果你需要更小的东西，也许编写你自己的后端库，你可以在未来的项目中重用它会是一个更好的解决方案。

对于一刀切的框架，请查看[Turbogears](http://www.turbogears.org)。（“这是一把大锤子，让每一个问题都像钉子一样”）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T03:01:01.910

我最近一直沉迷于[TikiWiki](http://www.tikiwiki.org/)。虽然名字里有“wiki”，但它的全名是“TikiWiki CMS/Groupware”，是一个有趣的软件。它拥有真实的一切**和**厨房水槽的感觉。它包括对 wiki、博客、文章、论坛和开箱即用文件的支持（以及大量其他内容）。我认为真正吸引我的是大多数东西都可以集成在一起，wiki 页面可以包含其他 wiki 页面和文章（这比你想象的更有用）。它处于 2.0 版的 RC 阶段，仍然缺少大量功能，但我想我可能会继续使用它并贡献一些缺少的功能，它现在是一个非常有趣的基础。

[Mozilla 支持站点](http://support.mozilla.com/)是使用 TikiWiki 实现的，这是一个非常漂亮的实现示例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T21:32:58.750

Drupal 的包含系统应该保持一切相对轻量，只要您只包含您需要的内容。尽管它带有少量模块，但您选择启用的是运行时将包含的所有内容。如果您必须深入了解并进行修改，我也坚信 Drupal 是一个比 Joomla 更友好和优雅的系统。我们在我的工作中使用 Drupal——就像 CMS 一样作为框架使用——事实证明，它在保持高水平的开发实践方面非常可靠。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-06-21T21:34:49.330

我意识到我迟到了几年，但我自己也在寻找这样的东西，并在谷歌搜索“准系统 cms”时遇到了这篇文章。随着这篇文章，这出现了：

[http://barebonescms.com/](http://barebonescms.com/)

该网站上还有一个论坛。

类似的组合可能会满足或超过您的所有标准。尽管正如其他人指出的那样，您并没有特别详细地说明细节。

虽然原作者可能早已不复存在，但希望其他人会发现这很有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-31T14:47:46.467

我建议[PmWiki](http://pmwiki.org/)，它介于框架/wiki 之间。默认情况下，甚至没有用户，只有不同的密码，用于不同的任务，但使用[PmWiki Cookbook 'recipes'](http://www.pmwiki.org/wiki/Cookbook/Cookbook/)你可以添加额外的功能。您可以查看他们的[哲学](http://pmwiki.org/wiki/PmWiki/PmWikiPhilosophy)以了解其主要内容。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-04T12:02:20.823

如果您想要 Rails 解决方案，**[Radiant CMS](http://radiantcms.org/)**是一个不错的选择。它简单、优雅、可扩展，当然还具有基于 Ruby on Rails 的所有优点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-07T00:39:23.070

如果你正在寻找.net，你可以看看 umbraco，它并没有做太多事情（我工作的公司想要更多的功能，所以用了其他东西），但它看起来很轻巧。

编辑：如果客户想要一个带有论坛的小型 CMS，我可能仍然会使用 phpBB 或[简单的机器论坛](http://www.simplemachines.org/)去 Drupal ，几乎肯定他们可以共享登录名。再加上明天客户会想要更多，Drupal 可能会为您节省一些工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-07T00:55:48.323

可能想看看[Drupal](http://drupal.org/)。

以下是它使用 的[技术堆栈的详细信息。](http://drupal.org/node/176052)

我从未使用过它，所以我不能保证质量等，但绝对值得一看。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-07T01:40:25.100

[表达式引擎](http://expressionengine.com/)很棒。它可以免费下载和试用，但如果您要从中获利，则必须购买许可证。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-04T12:09:13.147

您如何使用drupal，但根据您的需要缩小规模并对其进行编码。

肯定会比 code-from-scratch-with-framework 更快

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-05T12:02:45.180

我已经与 Joomla 合作了一段时间，我相信它是启动网站的最佳 CMS 之一。我已经尝试过很多其他人，但 Joomla 更好，因为它有许多扩展（组件、模块）并且非常易于定制。您还可以查看 joomla 的 Community Builder Extension。其他要求，例如 Chnage Fronpage Articles 等是微风......

joomla.org

出于某种原因，Joomla 不适合您尝试 Drupal。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-16T21:43:03.307

**WordPress**实际上有一个论坛插件 - 它没有什么花哨的，但它就在那里。它处理用户管理等，并拥有一个大型插件和主题社区。我认为它可能是最容易安装和运行的 CMS（我在这里做了一些跑腿工作）。有些插件会自动更新核心和插件（以 Drupal 为例）。我已经测试了这些，它们看起来很可靠。像往常一样 - 事先备份。

对于 .NET ， **MojoPortal**看起来相当不错，并且比 DNN 更轻。我看到了编辑，但我想我还是会把它包括在内，因为它看起来值得一试。

**Drupal**是一种独立的语言——除非你有规律地这样做，否则我不会处理它，否则它只是另一个不同的学习框架。进入我大脑的上行链路已经满负荷，所以我轻轻地将它推到一边。主题也往往看起来相同。

Joomla 可能适合您的用户的可用性。

我自己会选择一个预制框架，因为它具有社区和扩展能力。你的客户今天想要的东西明天就会变得微不足道。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-18T03:41:17.413

[**Wordpress**](http://www.wordpress.org)是一个非常强大但简单的 CMS。

[**bbPress**](http://bbpress.org/)是一个非常简单但集成的论坛（简单，Wordpress 用户帐户与 cookie 和所有集成）。

由于您有编程经验，您可能会发现 Wordpress 是完美的搭配（PHP、MySQL），它有大量的插件和钩子来帮助您实现您的需求。例如，有一个[特色帖子插件](http://impnerd.com/downloads/featured-posts)，可以将选定的内容放在首页。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-18T14:07:45.787

我需要在这里加入 Umbraco 的潮流。就开发人员的易用性而言，没有什么比 umbraco 和 v. 4 更容易的了，它具有完整的母版页支持和其他内容……而且它是免费的。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-24T19:16:10.977

对于 windows 看看 DotNetNuke 是基于 asp.net 的，免费和开源，易于皮肤和修改，在附加模块中也有一个蓬勃发展的市场。此外，大多数托管公司将其作为预安装的应用程序提供

# algorithm - 图序列化

> ID：4168
> 
> 赞同：46
> 
> 时间：2008-08-07T00:22:54.007
> 
> 标签：algorithm, sorting, graph-algorithm, directed-graph

我正在寻找一种简单的算法来“序列化”有向图。特别是我有一组文件，它们的执行顺序相互依赖，我想在编译时找到正确的顺序。我知道这一定是一件相当普遍的事情——编译器一直都在这样做——但我的 google-fu 今天一直很弱。什么是“首选”算法？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-08-07T10:53:31.237

[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)（来自维基百科）：

> 在图论中，有向无环图 (DAG) 的拓扑排序或拓扑排序是其节点的线性排序，其中每个节点都位于其具有出站边的所有节点之前。每个 DAG 都有一个或多个拓扑排序。

伪代码：

```
L ← Empty list where we put the sorted elements
Q ← Set of all nodes with no incoming edges
while Q is non-empty do
    remove a node n from Q
    insert n into L
    for each node m with an edge e from n to m do
        remove edge e from the graph
        if m has no other incoming edges then
            insert m into Q
if graph has edges then
    output error message (graph has a cycle)
else 
    output message (proposed topologically sorted order: L) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T00:27:19.270

我希望需要这个的工具只需以深度优先的方式遍历树，当它们碰到叶子时，只需处理它（例如编译）并将其从图中删除（或将其标记为已处理，并处理所有叶子的节点加工成叶子）。

只要它是一个 DAG，这个简单的基于堆栈的遍历应该是微不足道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T00:30:52.180

我想出了一个相当幼稚的递归算法（伪代码）：

```
Map<Object, List<Object>> source; // map of each object to its dependency list
List<Object> dest; // destination list

function resolve(a):
    if (dest.contains(a)) return;
    foreach (b in source[a]):
        resolve(b);
    dest.add(a);

foreach (a in source):
    resolve(a); 
```

最大的问题是它没有检测循环依赖的能力——它可以进入无限递归（即堆栈溢出；-p）。我能看到的唯一解决方法是将递归算法翻转为带有手动堆栈的交互式算法，并手动检查堆栈中是否存在重复元素。

有人有更好的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-23T15:09:27.690

如果图表包含循环，您的文件如何存在允许的执行顺序？在我看来，如果图形包含循环，那么您就没有解决方案，并且上述算法正确报告了这一点。

# ado.net - 如何学习 ADO.NET

> ID：4170
> 
> 赞同：17
> 
> 时间：2008-08-07T00:25:03.457
> 
> 标签：ado.net

我需要学习 ADO.NET 来构建基于 MS Office 的应用程序。我在 MSDN Library 中阅读了很多关于 ADO.NET 的文章，但对我来说，一切似乎都很混乱。

使用 ADO.NET 时必须了解哪些基础知识？我想几个关键词就足以让我组织我的学习。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-07T00:37:04.727

有三个关键组件（假设您使用 SQL 服务器）：

*   `SQLConnection`
*   `SqlCommand`
*   `SqlDataReader`

（如果您使用其他东西，请替换`Sql`为“某物”，例如`MySqlConnection`, `OracleCommand`）

其他一切都建立在此之上。

**示例 1：**

```
using (SqlConnection connection = new SqlConnection("CONNECTION STRING"))
using (SqlCommand command = new SqlCommand())
{
  command.commandText = "SELECT Name FROM Users WHERE Status = @OnlineStatus";
  command.Connection = connection;
  command.Parameters.Add("@OnlineStatus", SqlDbType.Int).Value = 1; //replace with enum
  connection.Open();

  using (SqlDataReader dr = command.ExecuteReader))
  {
      List<string> onlineUsers = new List<string>();

      while (dr.Read())
      {
         onlineUsers.Add(dr.GetString(0));
      }
  }
} 
```

**示例 2：**

```
using (SqlConnection connection = new SqlConnection("CONNECTION STRING"))
using (SqlCommand command = new SqlCommand())
{
  command.commandText = "DELETE FROM Users where Email = @Email";
  command.Connection = connection;
  command.Parameters.Add("@Email", SqlDbType.VarChar, 100).Value = "user@host.com";
  connection.Open();
  command.ExecuteNonQuery();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-18T05:35:21.227

获取命令对象的另一种方法是调用`connection.CreateCommand()`.

这样您就不必`Connection`在命令对象上设置属性。

# windows - Windows 相当于“nice”

> ID：4208
> 
> 赞同：78
> 
> 时间：2008-08-07T00:39:17.453
> 
> 标签：windows, unix, process-management

有没有相当于 Unix 命令的 Windows 版本，*很好*？

我专门寻找可以在命令行中使用的东西，而**不是**任务管理器中的“设置优先级”菜单。

我在谷歌上找到这个的尝试被那些想不出更好形容词的人所阻挠。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2008-08-07T02:49:21.107

如果要在启动进程时设置优先级，可以使用内置的[START](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/start)命令：

```
START ["title"] [/Dpath] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
      [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
      [/WAIT] [/B] [command/program] [parameters] 
```

使用从低到低的选项来设置启动的命令/程序的优先级。似乎是最直接的解决方案。无需下载或编写脚本。不过，其他解决方案可能适用于已经运行的 procs。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-07T02:24:34.980

如果您使用[PowerShell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx)，您可以编写一个脚本来更改进程的优先级。[我在Monad 博客](http://monadblog.blogspot.com/2006/03/msh-how-to-change-processs-priority.html)上找到了以下 PowerShell 函数：

```
function set-ProcessPriority { 
    param($processName = $(throw "Enter process name"), $priority = "Normal")

    get-process -processname $processname | foreach { $_.PriorityClass = $priority }
    write-host "`"$($processName)`"'s priority is set to `"$($priority)`""
} 
```

在 PowerShell 提示符下，您将执行以下操作：

```
set-ProcessPriority SomeProcessName "High" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-07T01:21:06.837

也许您想考虑使用[ProcessTamer](http://www.donationcoder.com/Software/Mouser/proctamer/index.html)根据您的设置“自动化”降级或升级进程优先级的过程。

我已经用了两年了。它非常简单但非常有效！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-03-23T20:17:47.513

来自[http://techtasks.com/code/viewbookcode/567](http://techtasks.com/code/viewbookcode/567)

```
# This code sets the priority of a process

# ---------------------------------------------------------------
# Adapted from VBScript code contained in the book:
#      "Windows Server Cookbook" by Robbie Allen
# ISBN: 0-596-00633-0
# ---------------------------------------------------------------

use Win32::OLE;
$Win32::OLE::Warn = 3;

use constant NORMAL => 32;
use constant IDLE => 64;
use constant HIGH_PRIORITY => 128;
use constant REALTIME => 256;
use constant BELOW_NORMAL => 16384;
use constant ABOVE_NORMAL => 32768;

# ------ SCRIPT CONFIGURATION ------
$strComputer = '.';
$intPID = 2880; # set this to the PID of the target process
$intPriority = ABOVE_NORMAL; # Set this to one of the constants above
# ------ END CONFIGURATION ---------

print "Process PID: $intPID\n";

$objWMIProcess = Win32::OLE->GetObject('winmgmts:\\\\' . $strComputer . '\\root\\cimv2:Win32_Process.Handle=\'' . $intPID . '\'');

print 'Process name: ' . $objWMIProcess->Name, "\n";

$intRC = $objWMIProcess->SetPriority($intPriority);

if ($intRC == 0) {
    print "Successfully set priority.\n";
}
else {
    print 'Could not set priority. Error code: ' . $intRC, "\n";
} 
```

# svn - SVN 与 Team Foundation Server

> ID：4219
> 
> 赞同：77
> 
> 时间：2008-08-07T00:43:33.700
> 
> 标签：svn, tfs

几个月前，我的团队将我们的源代码控制从[Visual SourceSafe切换到了](http://msdn.microsoft.com/en-us/vs2005/aa718670.aspx)[Apache Subversion](http://subversion.apache.org/)，我们并没有更开心。

最近我一直在研究[Team Foundation Server](http://tfspreview.com/)，至少从表面上看，它似乎非常令人印象深刻。与 Visual Studio 有一些很好的集成，并且为 DBA、测试人员、项目经理等提供了许多很棒的工具。

这两种产品最明显的区别是价格。很难击败 Apache Subversion（免费）。Team Foundation Server 相当昂贵，因此额外的功能真的不得不让 Subversion 望而却步。

*   有没有人有这两者的实际经验？
*   他们如何比较？
*   Team Foundation Server 真的物有所值吗？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2008-10-25T14:33:37.160

对我来说，这是两者之间最大的区别，我都使用过：

1) **TFS 与进行开发的“Visual Studio 方式”紧密耦合。** 这并不是说 TFS 与 VS IDE 紧密耦合，这意味着 TFS 努力保持熟悉的 Visual SourceSafe 的“签入”/“签出”范式，即使它真的不再是一个合适的模型。Subversion 的“提交”/“更新”概念在您的开发人员可能会花时间与网络断开连接时更加现实。TFS 期望开发人员始终连接到服务器。这是一个很大的减号。我个人发现 TFS 对文件在服务器和本地磁盘上的组织方式不够透明，因为与 Visual Studio 的紧密集成。即使是 TFS 的更大支持者也承认，它的连接签入/签出模型对于离线工作的开发人员来说并不是一个令人信服的选择。

2)**成本。** 那些说 TFS 不贵的人可能是很小的商店，或者不符合 TFS 的许可条款。您需要一个客户端访问许可证才能完成您所做的一切。您是只管理错误的经理吗？您需要约 250 美元的 CAL（零售 TFS 许可证中包含 5 个）。只想报告他们的问题的业务用户？250 美元的卡。开发商？250 美元（除非他们有 MSDN，在这种情况下它包括在内）。服务器？500 美元（如果您有 MSDN，则包括在内）。当然，向您出售 TFS 副本的人会告诉您，工作项跟踪对其他用户是免费的，但这些额外的用户只能看到他们自己创建的工作项，而不是整个团队的工作项，这不是在面向团队的敏捷环境中太有用了。当您拥有一个中型组织时，所有这些都加起来，当如此多的同类最佳产品（如 SVN 和 CruiseControl.net）的增量成本为 0 美元时，就很难证明其合理性。（不过，为了公平起见，我仍在等待*非常*好的 OSS 问题跟踪器）

3）**项目结构。** 在项目数量较少的大型团队中，TFS 可能会运行良好。如果您是内部的许多小型、未连接或松散连接的业务线应用程序，则 TFS 的结构可能会开始变得霸道。一方面，不可能定义项目本身的分类——您可以在项目中设置“区域”，但所有问题和文档都在“项目”的基本上下文中一起跟踪。创建新的“项目”通常很耗时，而且对于小努力来说是多余的。当然，SVN 没有这种功能，因为它只关注源代码控制，但如果您需要良好的小项目灵活性，SVN 和其他问题跟踪工具可能是更好的选择。

我的意见，对于它的价值：

*   对于拥有大型、预算良好的项目的大型团队，在开发人员几乎完全在 IDE 中工作的 Microsoft 商店中，TFS 是赢家。当您需要对项目集中执行策略时，TFS 也会胜出。

*   对于许多小型团队，有许多不同的小型项目，或者成本是一个问题的商店，或者开发人员的工作与源代码控制脱节的团队，请使用 SVN。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2008-08-29T20:19:31.413

我很惊讶过去使用过 Subversion 的人甚至会想要/需要 TFS 源代码控制。

我对 TFS (2005) 的体验非常糟糕。我已经阅读了各种白皮书和指南，以了解如何正确构建源代码以满足各种开发需求。

我们的简单情况是，我们有一个用于主线开发的主干，以及我们从中集成更改和部署的集成分支，以及一个用于跟踪过去版本的发布分支，这是非常常见和直接的，但我们不断遇到问题。

我对 TFS 的主要问题：

*   与颠覆相比，合并是一种痛苦。
*   有未修复的错误。我遇到了一个关于重命名/合并的问题，它已经知道了 2 年，并且永远不会在 2005 年发布修复程序。我们最终将我们的分支移动到一个“损坏的”文件夹，我们现在忽略它。
*   在文件上设置只读锁是摩擦。谁说我需要在 TFS 中编辑批处理文件并构建脚本以便它为我“检查”？Subversion*知道*哪些文件改变了。那里没有只读锁。
*   速度。TFS 在 WAN 上的速度非常慢，而且它真的只有在我用 VPN 连接到我的工作计算机时才可用，这使得我的开发体验总体上非常慢。
*   缺乏良好的命令行和资源管理器集成。IDE 集成非常适合日常获取最新、添加文件和签入，但是当您需要跨多个项目执行操作时，最好有好工具供您使用。在有人跳下我的喉咙声称 tf.exe 运行良好之前......它并不是一个真正的命令行工具。例如，签入代码不应弹出模式对话框。

......名单还在继续。我认为即使进行了所有集成，也有更好的免费替代方案。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2008-08-07T00:52:27.130

我最近在 CodePlex 加入了一个开源项目。他们使用 TFS 进行源代码控制，我不得不说它绝对很棒。到目前为止，我对它印象深刻。我非常喜欢 IDE 集成以及分支和标记代码是多么容易。如果您已经正确配置了所有内容，那么向源代码管理添加解决方案就像单击两次。

现在。是否值得付出高昂的代价？我不这么认为。在 CodePlex 从事项目的好处是它让我获得了我需要的 TFS 经验，以防我以后必须在某个地方使用它。如果您想为您的源代码管理提供良好的 IDE 集成，请获取[VisualSVN](http://www.visualsvn.com/visualsvn/)集成包。获得许多相同的功能（顺便说一句，在非域计算机上免费）是一项非常便宜的投资。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2009-08-14T21:11:30.240

我们是一家 VS.NET 商店，我们实现了：

1.  用于问题跟踪的[Bugzilla](http://www.bugzilla.org/)
2.  [Apache Subversion](http://subversion.apache.org/)作为源代码存储库后端
3.  [VisualSVN Server](https://www.visualsvn.com/server/)用于管理服务器上的 SVN
4.  [客户端上的TortoiseSVN](http://tortoisesvn.net/)（在 Windows 资源管理器中）和[AhnkSVN](http://ankhsvn.open.collab.net/)或[VisualSVN](https://www.visualsvn.com/visualsvn/)（在 Visual Studio 中）
5.  [CruiseControl.NET](http://www.cruisecontrolnet.org/)用于自动化构建

成本：0 美元 好处：无价

如果您是一个小团队，或者还没有准备好接受 WHO TFS 流程，那么 SVN 和开源工具是您的最佳选择。

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2008-09-07T14:00:04.070

正如其他人指出的那样，TFS 为您提供了比 SVN 以项目管理等形式提供的更多功能。两者都使用过，并与非常大的公司合作实施 TFS，这是我的两分钱。

1) 如果您使用的是 TFS 2005，请升级到 TFS 2008。您会感谢我的。TFS 2008 中有大量改进使其变得可行。

2) 如果您使用 Visual Studio 并且想要集成 IDE，请使用 TFS。我使用了 SVN 集成并且几乎总是退回到使用 TortoiseSVN。

3) 如果您喜欢将帐户与 Windows 身份验证集成的想法，请使用 TFS。从那一端开始的可管理性很好。SVN 可能有钩子——我不肯定，但如果你喜欢 GUI 驱动的管理，TFS 很难被击败。

4) 如果您需要跟踪指标或有更简单的方法来实施诸如签入策略之类的事情，请使用 TFS。

5）如果你的人如果不是 MSFT 就不会实施它，那就选择 TFS。

6) 如果你做的不仅仅是 .NET（Java 工作、Eclipse 等），请使用 SVN。是的，有非常好的产品（比如 Teamprise）可以很好地与 TFS 配合使用。但除非其他语言只是您商店的一小部分，否则请坚持使用 SVN。

除此之外，两者的 SCM 功能大致相同。它们都进行分支和合并，都进行原子签入，它们都支持重命名和移动。我认为对于刚开始使用分支和合并概念的人来说，让分支在源代码管理资源管理器中可见是很好的。

TFS 真的没那么贵（也许是 1200 美元？）。与 SVN 相比，它也许是。与报告服务和 SharePoint 的集成很好，但同样，如果您不使用它，那也没关系。

我想说的是下载 TFS 的 180 天试用版并试一试。并排运行试验。我想无论你走哪条路，你都会很开心。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2008-09-07T13:31:52.500

正如 Ubiguchi 指出的那样，TFS 不是版本控制产品。购买 TFS 并仅将其用于版本控制显然是浪费金钱。TFS 是一套集成的工具，用于自动化应用程序生命周期管理的所有方面（并且非常适合“企业”。

同样根据 Ben S 的帖子 - 我不明白你对锁的评论。TFS 中根本不需要锁。管理员可以将 TFS 配置为像 VSS（一些“不明智的”客户要求的功能）到“Get-Latest on Checkout”，我相信这也可以进行签出锁定。

但通过“正常”使用 TFS，“签出”会提示用户输入锁定类型 - 默认值应为“无”。用户可以选择签出（或签入锁）——但这不是必需的。如果您不想要锁，请不要使用它们。

TFS 确实会出于各种性能原因（使获取最新版本更快）和项目管理（我喜欢查看开发人员签出哪些文件以及他们的签出时间）来跟踪哪些用户在服务器上签出。

我对 SVN 不是很熟悉（我从未使用过它）——所以我不能评论“TFS 的合并更糟”——并且没有遇到 Ben S 报告的合并错误——但我已经很棒了使用 TFS 进行分支和合并的成功。

我知道 TFS 仍然很弱的一个用例是针对经常“离线”的用户。TFS 是一种“服务器产品”，它假定用户大部分时间都处于连接状态。离线体验在 2008 年版本中有所改善（2005 年很惨淡），但仍有很长的路要走。如果您的开发人员需要（或希望）经常长时间与网络断开连接 - 您可能会更好地使用 SVN。

使用 TFS 的 SVN 粉丝要考虑的另一个功能是[SVN 桥](http://www.codeplex.com/SvnBridge)，它允许用户使用 TortiseSVN 连接到 TFS。我的好朋友和我的同事广泛使用它并喜欢它。

关于缺少命令行的评论也让我感到惊讶 - 命令行工具非常广泛（尽管许多需要单独下载[TFS Power Tools](http://msdn.microsoft.com/en-us/tfs2008/bb980963.aspx)

我怀疑 Ben 的评论是基于对 2005 版本的评估，该版本显然是“Microsoft V1.0”产品。该产品目前处于 2.1 版本，不久的将来会推出版本 3。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-08-14T21:02:05.313

TFS 是令人发指的。此时我使用 SVN（带 Live Mesh 进行备份）在本地进行版本控制，因为 TFS 存在许多问题。主要问题是 TFS 使用时间戳来记录您是否拥有最新版本，并将这些时间戳存储在服务器上。您可以删除本地副本，从 TFS 获取最新版本，它会说所有文件都是最新的。这是一个愚蠢的系统，无法保证您拥有正确版本的文件。这导致了许多烦恼：

*   编辑任何文件时都需要通知 TFS，因此您需要始终连接到服务器。
*   如果您在 IDE 之外编辑文件，TFS 会感到困惑。此外，它在 NTFS 中将所有文件设置为只读。

虽然 TFS 支持合并，但它实际上是一个签入/签出系统。如果您编辑一个文件，您经常会发现它被其他开发人员锁定。有很多方法可以解决它，但是系统如此复杂，您总是会遇到问题。例如，我们的开发人员发现他们可以通过检查整个解决方案来绕过在 NTFS 中将所有文件设置为只读的问题，该解决方案对所有文件设置了排他锁。我这样做了几次，因为 subversion 具有相同的结帐语法，它不会获取锁。

最后，Team Explorer（客户端）高达 400 MB，TFS 服务器需要 SharePoint 和两天的安装时间。subversion 一键安装程序大约为 30 MB，它将在一分钟内为您安装服务器。TFS 有很多特性，但它的基础如此不稳固，你永远不会使用或关心它们。TFS 在许可证方面很昂贵，并且开发人员将浪费时间在 stackoverflow 上咆哮而不是编写代码：P

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2008-08-17T02:30:47.060

我的建议，Team System 不值钱。我都使用过，在使用 Team System 之后，我试图找到一个类似的替代品。基本上，您所支付的是集成，您可能会争论自定义支持，但我已经能够创建一个团队系统替代品，只需一点时间并将工具集成在一起。

我最近[问了一个问题](https://stackoverflow.com/questions/11857/what-do-you-use-as-a-good-alternative-to-team-system)，关于其他人为提出团队系统替代方案做了什么。我还列出了我用来创建替代品的开发工具。希望通过这个答案和我提出的问题，您可以找到适合您的方法。

我不是团队系统的仇恨者，我只是认为这不值钱。这是一个非常好的工具，如果您不介意为此付出代价，那么请务必使用它。这就是我创建我想出的替代品的全部原因。我想要 Team System 提供的功能。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2008-08-29T20:51:50.540

[这是一个名为Ankhsvn](http://ankhsvn.open.collab.net/)的 VisualSVN 开源版本。现在 collabnet 接管了它好多了。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-09-08T18:35:31.920

如果您只需要源代码控制，那么 TFS 就太过分了。我以前的一位雇主在他们的企业中有 TFS、VSS 和 Subversion。我们的企业中没有 Active Directory 或 Exchange Server 2003，因此我们最终在 TFS 服务器上创建了单独的用户，以便开发人员可以使用它。我们遇到了与 Ben Schierman 提到的相同类型的合并问题，以及其他将我们推向 Subversion 的错误行为。

TFS 是否适合您，部分取决于您的预算、开发团队的规模以及可用于配置/维护解决方案的时间和人员数量。如果您想要 TFS 提供的其他问题跟踪、工作项和项目统计功能，那么可能值得您花时间查看其他替代方案。JIRA（来自 Atlassian Systems）或 Trac 等产品与 Subversion 很好地集成，并以较低的价格提供项目或项目经理可能的监督。

在具有 Active Directory、Exchange Server 2003 或更高版本以及存储库的专职人员的理想环境中，TFS 更有可能是一个不错的选择。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-09-08T18:46:37.900

我在工作和家里都用过。他们都非常酷。我唯一推荐使用 TFS 的情况是，如果您将使用更多功能，而不仅仅是源代码控制。如果您只需要源代码控制，那么 SVN 就不会出错，这就是原因。

1.  [VisualSVN 服务器](http://www.visualsvn.com/server/)这是一个完整的 SVN 服务器，带有一个很好的插件来管理它。它允许您直接通过 UI 使用 Windows 身份验证。简单的。

2.  [乌龟](http://tortoisesvn.tigris.org/)它的乌龟，说得够多了。

3.  [ankhsvn](http://ankhsvn.open.collab.net/)这是一个很棒的 SCC 插件。对于那些想要完整 VS IDE 集成的人来说，最新版本是完整的 SCC 插件。因此，您现在可以免费获得完全集成。

上述设置是 100% 免费的，可以帮助您完成源代码控制所需的一切。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-08-29T21:27:14.323

TFS 不仅仅是关于源代码控制。如果您使用 TFS 提供的整个包、错误跟踪、构建、报告等，那么 TFS 是一个非常可靠的选择（肯定比 Rational 更好）。TFS 还与 Active Directory 很好地集成。

虽然如果你只是在谈论 SCM，那么我更喜欢 SubVersion。我不太喜欢 IDE 集成。我也喜欢 SVN 的 Trunk/Tags/Branches 结构约定，以及在分支之间切换的相对容易性。不过，在 TFS 中合并似乎更容易。Tortoise 的 UI 击败了 TFS，尤其是在将文件添加到 repo 方面。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2008-08-07T05:28:18.743

我会说这真的取决于你的需求。TFS 非常好，我已经广泛使用它，但它非常针对企业级，如果您不需要所有这些功能，则可能没有必要。如果您确实需要这些功能（尤其是分支、可伸缩性、工作项跟踪等），那么每一分钱都值得。请记住，TFS 包括错误跟踪、工作项跟踪和源代码控制之外的其他功能。如果您有多个分支，或者如果您发现自己在 Subversion 中遇到一些缺乏功能或其他功能的问题，那么切换可能是个好主意。但除非有充分的理由切换，否则您应该避免切换源代码控制系统的成本和生产力损失。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-08-29T10:08:08.273

在广泛使用这两者之后，我认为 Wedge 是在指出“TFS 包括错误跟踪、工作项跟踪和其他源代码控制之外的功能”。

但是，老实说，SVN 和 TFS 在可扩展性方面似乎相当平等，如果有的话，SVN 的源代码控制由于其固有的简单性而在 TFS 上具有优势。

如果您希望在源代码控制的同时进行工作项和错误跟踪，那么您要么选择 TFS，要么选择 SVN 和其他一些可能免费的工具，例如 bugzilla。虽然 TFS 确实将源代码控制和工作项跟踪集成在一起，但老实说，我认为 MS 应该免费提供它，作为多年来滥用 VSS 开发人员的道歉。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2008-09-16T16:06:08.827

我用过 SVN 和 TFS。使用 TFS 的主要优点是它与 Visual Studio 的紧密集成。错误跟踪、任务跟踪都将集中在一个地方。为这些项目生成的报告将帮助利益相关者随时了解项目状态。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-11-05T01:52:16.160

我正在做一个有 5 个人的项目，我们最近从 SVN 切换到了 TFS。整个过程就像一场噩梦。我们有从 XMLSpy 自动生成的代码，并且 TFS 不能识别在 VS2008 之外修改的文件。TFS 电动工具可以扫描您的结帐并解决此问题，但必须记住使用这些工具是一件很痛苦的事情。我们经常遇到的另一个问题是 TFS 中的默认合并工具。这是迄今为止我用过的最糟糕的合并工具。有人会认为 TFS 将能够处理基本的解决方案合并，但到目前为止情况并非如此。

内置的用户界面非常有用，但也有缺陷。如果我从我的解决方案资源管理器中签出，有时未签出已添加的文件。如果我从 Team Source Control 窗口执行此操作，它会完美运行。这是为什么？我期待 VS2010 中的 TFS，因为我听说过关于它的好消息，而 SVN 远非完美，但我希望其中一些功能能够更直观地发挥作用。

亚当

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2010-12-21T12:36:21.260

TFS 非常适合项目管理和跟踪，但是我觉得源代码控制不如 SVN。这是我对 TFS 的不满：

**签入/签出模型**

这对于 TFS 源代码控制来说是一个巨大的骗局。不幸的是，即使您不想，VS 也会自动为您签出项目。我曾经遇到过有人检查了一些文件然后去度假的情况。我负责重组目录结构，但由于一堆文件被签出给那个人，所以我没能做到。GUI 中无法撤消结帐，这意味着必须在命令行中一一完成。或者我必须弄清楚如何为此编写一个强大的 shell 脚本。

**VS 需要做所有事情**

有时我想编辑一个文本文件并签入。这需要我启动 VS 2010，这是一个巨大的野兽，只是为了编辑一个文件并签入。SVN 需要几秒钟的事情现在需要我一分钟.

正如其他一些人指出的那样，文件仅在未签出时才被标记为只读。如果你让它可写并在 VS 之外编辑它，TFS 将无法识别这一点。这使得编辑 VS 之外的东西很烦人。这意味着，启动 VS，签出文件，编辑另一个编辑器，签入 VS。

**一些在 SVN 中很容易的操作现在变得很痛苦**

*   也许我还没有弄清楚，但我发现回滚变更集对于 TFS 来说非常乏味。

*   将文件添加到不属于解决方案的源代码控制中是一件非常痛苦的事情。TFS 源代码管理资源管理器仅显示哪些文件在源代码管理中，而不是哪些文件不在（也许在某处有一个设置，我不知道）。使用 Tortoise SVN，我只需在文件夹上按 Commit 并选择要添加的文件。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-22T02:48:39.650

我目前正在领导我公司针对我们目前使用的 Rational Suite 评估 TFS。到目前为止，TFS 2008 正在开发 clearcase + clearquest。开发环境集成是它真正闪耀的地方。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2010-05-03T19:10:16.357

我的 10 美分：

TFS2005 是个笑话 - 难以安装，甚至更难维护 TFS2008 是稳定的 - 更易于安装、更简单的维护和有效的自动化构建。TFS2010 是史诗级的！- 安装是狗 eassssyyy。管理非常容易；这都是一个布局精美的 UI。将它与 VS2008 集成并不是那么容易，因为您无法在 vs2008 中创建项目，您必须使用 vs2010（这很愚蠢）。TFS2010 还允许您更改共享点项目位置，而不是拥有 TFS2008 的那些糟糕的子文件夹。TFS2010 也有像燃尽图这样的工具，对项目管理非常有用。就像 TFS2010 是为包括客户在内的整个制作团队服务的！虽然它仍然花费太多:(

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2011-04-20T18:01:32.240

还要记住，TFS 需要服务器硬件提供更多的功能。当然，至少有一个 Windows 服务器许可证。

正如我们公司所遵循的，最佳实践是使用 2 台服务器：前端（带有集成共享点）和后端专用的 sql 服务器（我们使用企业集群）。TFS 可以安装在 1 台机器上，但不应该。

相比之下，我们的 svn 服务器安装在具有 256mb 内存和 1 个 cpu 的虚拟 linux 服务器上，在执行 checkout-all 等常见任务时仍然快几个数量级。虚拟硬件是 vshpere 可以分配的最低硬件！磁盘虽然很快（SAN）。

我建议 TFS 需要至少 5000 美元的专用硬件，而 svn 服务器（在 linux 上）可以与当前基于 Windows 的操作系统过时的任何硬件一起运行。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2009-08-14T21:17:30.337

在我看来，这取决于项目完成的情况和环境。如果您只有一个简单的小型项目，那么 SVN 非常棒。正如一些人已经写的那样，VisualSVN 很好地集成到 Visual Studio 中，您不必在本机文件系统上进行签入/签出。

TFS 非常适合版本控制，但如果您真正使用它的所有功能，效果会更好。在我看来，如果您使用工作项作为集成存储库来处理客户错误报告、新功能请求以及通过管理任务和相应的估计时间、使用时间和剩余时间指示。
真正有趣的是使用将工作项与源代码签入相关联的功能。有关详细信息，请参见[此处。](http://blog.js-development.com/2009/01/best-practices-tracking-information-on.html)

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2010-03-23T14:00:33.107

我们是一个正在从 SVN 迁移到 TFS2010 的小团队。我们这样做的最大原因是集成了 Visual Studio 和用于错误跟踪的 WebAccess，这现在是 TFS 的一部分。

@Adam：希望我们会有更好的体验。还不能说...

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2012-04-04T13:49:52.850

我在过去 3 年中使用过 SVN（之前来自 VSS），最近不得不切换到 TFS2010。总体感觉是它比 SVN 更错误，除了与任务/错误的良好集成之外，我认为它对 SVN 没有优势。速度似乎也比 SVN 慢一些。

如果我现在要选择源控制，我仍然会选择 SVN。

关于工具： - AnkhSVN Visual Studio 插件与 TFS 源代码控制一样好 - Tortoise 比 TFS 对应好很多

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-08T18:49:55.333

TFS 很棒，如果您不需要非开发人员来获取 pm 东西。

我们的帮助台需要参与到这个过程中，而它只是没有削减它。

至少在 tfs 2005 中的构建管理也很糟糕，它甚至无法构建与 2008 slns 相比。我真的不喜欢我的源代码控制选择，这会影响我的部署选择，这就是为什么我的团队不是 svn 商店。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2011-02-07T18:36:06.143

如果它***只是***基于源代码控制，我会选择 SVN。Visual Studio 的 AnkhSVN 免费插件在其新版本中得到了极大的改进。此外，您还获得了 SVN 的源代码，并且文档很棒！他们在 TFS 2010 源代码控制中更改[了一些神秘的东西](http://blogs.msdn.com/b/mitrik/archive/2009/05/28/changing-to-slot-mode-in-tfs-2010-version-control.aspx)，如果没有源代码，排除故障可能会非常艰巨。另外，您依赖于 MSDN 团队来抽出文档，他们按照自己的时间表和自己的深度进行。

话虽如此，*TFS 显然提供的不仅仅是源代码控制*。它是一个[ALM](http://en.wikipedia.org/wiki/Application_lifecycle_management)工具。将它与工作项、报告、自动化构建、[门控签入](http://blogs.msdn.com/b/patcarna/archive/2009/06/29/an-introduction-to-gated-check-in.aspx)、自动化测试等相结合，可以提供一些非常丰富的价值，这些价值只有通过将不同的工具与 SVN 连接才能获得。当然，拥有 SVN 的源代码并不是万无一失的。我已经进入了 SVN 的场景，仍然需要数周时间才能完全弄清楚发生了什么。

因此，我建议您从 ALM 的角度来看待它，看看您的公司是否会使用[所有 TFS 功能](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/ultimate)，或者是否会使用同类最佳的策略（例如 JIRA）。

* * *

## 回答 #26

> 赞同：-3
> 
> 时间：2010-12-08T03:42:46.853

TFS 一英里。

我无意中使用基于 SVN 文件的方法给自己造成了太多问题。我经历过的源代码控制问题：TFS – 2 年内 0 个问题 SVN – 数不清...

是的，我知道 TFS 的价格对于大多数公司来说都是如此的耻辱。如果 MS 有一个合理的定价模式，他们可能会拥有更多的市场份额（和利润）。

# c# - LinqDataSource - 你能限制返回的记录数量吗？

> ID：4221
> 
> 赞同：35
> 
> 时间：2008-08-07T00:45:51.980
> 
> 标签：c#, asp.net, database, linq, linq-to-sql

我想`LinqDataSource`在页面上使用控件并限制返回的记录数量。我知道如果我使用后面的代码，我可以做这样的事情：

```
IEnumerable<int> values = Enumerable.Range(0, 10);
IEnumerable<int> take3 = values.Take(3); 
```

有谁知道这样的事情是否可以通过`LinqDataSource`控制来实现？

**[更新]**

我将使用`LinqDataSource`控件`ListView`，*而不是*GridView 或 Repeater。该`LinqDataSource`向导不提供限制返回记录数的功能。高级选项仅允许您启用删除、插入和更新。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2008-09-15T11:02:11.640

我有同样的问题。我解决这个问题的方法是使用 LinqDataSource 上的 Selecting 事件并手动返回结果。

例如

```
protected void lnqRecentOrder_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    DataClassesDataContext dx = new DataClassesDataContext();
    e.Result = (from o in dx.Orders
                where o.CustomerID == Int32.Parse(Request.QueryString["CustomerID"])
                select o).Take(5);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-26T03:08:30.663

**是**和**否**。

**不**，您不能将结果限制在 LinqDataSource 控件中。因为 Linq 使用延迟执行，所以预期是表示控件将执行记录集限制。

**是**的，您可以使用 ListView 控件执行此操作。诀窍是在[LayoutTemplate中使用](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.listview.layouttemplate)[DataPager](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.webcontrols.datapager)控件，如下所示：

```
<LayoutTemplate>
  <div id="itemPlaceholder" runat="server" />
  <asp:DataPager ID="DataPager1" runat="server" PageSize="3">
  </asp:DataPager>            
</LayoutTemplate> 
```

通常，您会在 DataPager 中包含控件，例如 first、last、next 和 previous。但如果你只是让它空着，那么你只会看到你想要的三个结果。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-24T11:35:42.477

```
protected void DocsData_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    e.Arguments.MaximumRows = 5;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-15T11:21:34.353

您可以将 Linq 查询基于使用 TOP 语句仅返回 x 行的存储过程。请记住，仅仅因为您可以在 Linq 中完成所有数据库代码并不意味着您应该这样做。另外，您可以告诉 Linq 对存储过程使用与普通表相同的返回类型，因此您的所有绑定仍然有效，并且返回结果将是相同的类型

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-03-16T19:46:03.983

你可以把 LinqDataSource 的事件选择：

```
protected void ldsLastEntries_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
    e.Arguments.MaximumRows = 10;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-07T00:55:20.867

我知道，如果您将分页转发器或 gridview 与 linqdatasource 一起使用，它将自动优化返回的结果数量，但我也很确定在数据源向导中您可以转到高级选项并将其限制为

```
SELECT TOP 3 FROM 
```

这应该可以让你做你需要的

# language-agnostic - 领土地图生成

> ID：4225
> 
> 赞同：17
> 
> 时间：2008-08-07T00:48:04.953
> 
> 标签：language-agnostic, maps, voronoi

是否有一种微不足道的或至少适度直接的方式来生成领土地图（例如风险）？

我过去看过，我能找到的最好的是对 Voronoi 图的模糊参考。Voronoi 图的示例如下：

![这里](../Images/2f7b592c5a4514f513834f8925adf1dd.png).

这些有希望，但我想我还没有看到任何直接的渲染方式，更不用说将它们保存在某种形式的数据结构中以将每个区域视为一个对象。

另一种有希望的方法是洪水填充，但我再次不确定从这种方法开始的最佳方法。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-07T01:47:54.133

我在它们上看到的最好的参考资料是[Computational Geometry: Algorithms and Applications](https://rads.stackoverflow.com/amzn/click/com/3540779736)，它涵盖了 Voronoi 图、Delaunay 三角剖分（类似于 Voronoi 图，每个都可以转换成另一个）和其他类似的数据结构。

他们谈论您需要的所有数据结构，但没有为您提供实现它所需的代码（这可能是一个很好的练习）。在代码方面，亚马逊搜索显示了[C 中的 Computational Geometry](https://rads.stackoverflow.com/amzn/click/com/0521649765)一书，该书可能随代码一起提供（尽管由于您被困在 C 中，您最好还是获取另一个并以您想要的任何语言实现它）。我对这本书也没有任何经验，只有第一本书。

抱歉，只有书可以推荐！我在它们上看到的唯一不错的在线资源是两篇[Wikipedia](http://en.wikipedia.org/wiki/Voronoi_diagram) [文章](http://en.wikipedia.org/wiki/Delaunay_triangulation)，它们并没有真正告诉您实现细节。[不过，此链接](http://www.cgal.org/Manual/3.3/doc_html/cgal_manual/packages.html#Part:VoronoiDiagrams)可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T01:40:05.740

为什么不使用基元地图（三角形、正方形），分配国家（“首都”）的起点，然后通过向国家添加随机相邻的基元来随机扩展国家。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-27T04:43:58.633

**[CGAL](http://cgal.org/)**是一个 C++ 库，具有计算几何中使用的数据结构和算法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T17:07:40.013

我实际上正在为我公司的视频游戏处理这类东西。我发现的最有用的信息在这两个链接中：

[Paul Bourke](http://local.wasp.uwa.edu.au/~pbourke/papers/triangulate/)在西澳大学的页面，以及他 1989 年关于 Delaunay 的论文和一系列实施链接。

在[codeGuru.com 上对伪代码和](http://www.codeguru.com/cpp/data/mfc_database/misc/article.php/c8901/)Delaunay 进行了很好的解释。

在渲染这些方面 - 我发现的大多数实现都需要按摩以获得你想要的东西，但是由于将它用于游戏地图会导致它们之间有许多点加线，这可能是一个非常做简单的事情把它画到屏幕上。

# c# - 通过数字索引访问 Dictionary.Keys 键

> ID：4227
> 
> 赞同：166
> 
> 时间：2008-08-07T00:51:21.720
> 
> 标签：c#, .net, dictionary

我正在使用一个键`Dictionary<string, int>`的`int`计数。

现在，我需要访问字典中最后插入的键，但我不知道它的名称。明显的尝试：

```
int LastCount = mydict[mydict.keys[mydict.keys.Count]]; 
```

不起作用，因为`Dictionary.Keys`没有实现 []-indexer。

我只是想知道有没有类似的课程？我考虑过使用堆栈，但它只存储一个字符串。我现在可以创建自己的结构，然后使用 a `Stack<MyStruct>`，但我想知道是否还有另一种选择，本质上是在键上实现 []-indexer 的 Dictionary ？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2011-01-19T13:21:27.887

正如@Falanwe 在评论中指出的那样，做这样的事情是***不正确***的：

```
int LastCount = mydict.Keys.ElementAt(mydict.Count -1); 
```

您**不应该**依赖字典中键的顺序。如果您需要订购，您应该使用[OrderedDictionary](https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.ordereddictionary)，如this [answer](https://stackoverflow.com/a/5540/1724702)中所建议的那样。此页面上的其他答案也很有趣。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2008-08-08T01:23:22.887

您可以使用[OrderedDictionary](https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.ordereddictionary)。

> 表示可由键或索引访问的键/值对的集合。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2009-04-16T14:09:29.563

字典是一个哈希表，所以你不知道插入的顺序！

如果您想知道最后插入的键，我建议您扩展 Dictionary 以包含 LastKeyInserted 值。

例如：

```
public MyDictionary<K, T> : IDictionary<K, T>
{
    private IDictionary<K, T> _InnerDictionary;

    public K LastInsertedKey { get; set; }

    public MyDictionary()
    {
        _InnerDictionary = new Dictionary<K, T>();
    }

    #region Implementation of IDictionary

    public void Add(KeyValuePair<K, T> item)
    {
        _InnerDictionary.Add(item);
        LastInsertedKey = item.Key;

    }

    public void Add(K key, T value)
    {
        _InnerDictionary.Add(key, value);
        LastInsertedKey = key;
    }

    .... rest of IDictionary methods

    #endregion

} 
```

您会遇到问题，但是当您使用`.Remove()`so 来克服这个问题时，您必须保留插入的键的有序列表。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-08-07T11:15:35.093

为什么不扩展字典类以添加最后一个键插入属性。也许像下面这样的东西？

```
public class ExtendedDictionary : Dictionary<string, int>
{
    private int lastKeyInserted = -1;

    public int LastKeyInserted
    {
        get { return lastKeyInserted; }
        set { lastKeyInserted = value; }
    }

    public void AddNew(string s, int i)
    {
        lastKeyInserted = i;

        base.Add(s, i);
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-07T01:13:22.377

你总是可以这样做：

```
string[] temp = new string[mydict.count];
mydict.Keys.CopyTo(temp, 0)
int LastCount = mydict[temp[mydict.count - 1]] 
```

但我不会推荐它。不能保证最后插入的键将位于数组的末尾。[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2.keys)上的 Keys 的顺序是未指定的，并且可能会发生变化。在我非常简短的测试中，它似乎是按插入顺序排列的，但你最好像堆栈一样建立适当的簿记 - 正如你所建议的那样（尽管我认为不需要基于你的结构其他语句） - 或单变量缓存，如果您只需要知道最新的密钥。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-07T01:18:25.657

我想你可以这样做，语法可能是错误的，有一段时间没有使用 C# 来获取最后一项

```
Dictionary<string, int>.KeyCollection keys = mydict.keys;
string lastKey = keys.Last(); 
```

或使用 Max 而不是 Last 来获得最大值，我不知道哪一个更适合您的代码。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-08-07T02:38:29.163

我同意帕特里克回答的第二部分。即使在某些测试中它似乎保持插入顺序，文档（以及字典和散列的正常行为）明确指出顺序是未指定的。

您只是根据键的顺序自找麻烦。添加您自己的簿记（正如帕特里克所说，最后添加的键只有一个变量）以确保。此外，不要被字典上的所有方法（如 Last 和 Max）所诱惑，因为这些方法可能与键比较器有关（我不确定）。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2010-04-12T04:44:58.903

如果您决定使用易受破坏的危险代码，此扩展函数将根据其内部索引从 a 中获取一个键（对于 Mono 和 .NET，当前似乎与您通过枚举属性`Dictionary<K,V>`获得的顺序相同`Keys`）。

最好使用 Linq: `dict.Keys.ElementAt(i)`，但该函数将迭代 O(N); 以下是 O(1)，但有反射性能损失。

```
using System;
using System.Collections.Generic;
using System.Reflection;

public static class Extensions
{
    public static TKey KeyByIndex<TKey,TValue>(this Dictionary<TKey, TValue> dict, int idx)
    {
        Type type = typeof(Dictionary<TKey, TValue>);
        FieldInfo info = type.GetField("entries", BindingFlags.NonPublic | BindingFlags.Instance);
        if (info != null)
        {
            // .NET
            Object element = ((Array)info.GetValue(dict)).GetValue(idx);
            return (TKey)element.GetType().GetField("key", BindingFlags.Public | BindingFlags.Instance).GetValue(element);
        }
        // Mono:
        info = type.GetField("keySlots", BindingFlags.NonPublic | BindingFlags.Instance);
        return (TKey)((Array)info.GetValue(dict)).GetValue(idx);
    }
}; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2011-07-20T00:45:48.053

如果键嵌入在值中，另一种选择是[KeyedCollection 。](https://docs.microsoft.com/en-us/dotnet/api/system.collections.objectmodel.keyedcollection-2)

只需在密封类中创建一个基本实现即可使用。

所以要替换`Dictionary<string, int>`（这不是一个很好的例子，因为 int 没有明确的键）。

```
private sealed class IntDictionary : KeyedCollection<string, int>
{
    protected override string GetKeyForItem(int item)
    {
        // The example works better when the value contains the key. It falls down a bit for a dictionary of ints.
        return item.ToString();
    }
}

KeyedCollection<string, int> intCollection = new ClassThatContainsSealedImplementation.IntDictionary();

intCollection.Add(7);

int valueByIndex = intCollection[0]; 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-08-07T02:40:52.747

您提出问题的方式使我相信字典中的 int 包含该项目在字典中的“位置”。从键未按添加顺序存储的断言来看，如果这是正确的，那将意味着 keys.Count （或 .Count - 1，如果您使用从零开始）应该仍然总是最后输入的键的编号？

如果这是正确的，是否有任何理由不能改为使用 Dictionary<int, string> 以便可以使用 mydict[ mydict.Keys.Count ]？

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-08-07T01:15:55.350

我不知道这是否可行，因为我很确定键没有按添加顺序存储，但是您可以将 KeysCollection 强制转换为列表，然后获取列表中的最后一个键...但值得一看。

我能想到的唯一另一件事是将键存储在查找列表中，并在将键添加到字典之前将它们添加到列表中......这并不漂亮。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-07-20T09:21:45.130

要扩展 Daniels 的帖子和他对密钥的评论，因为密钥无论如何都嵌入在值中，您可以求助于使用 a`KeyValuePair<TKey, TValue>`作为值。这样做的主要原因是，一般来说，密钥不一定可以直接从值导出。

然后它看起来像这样：

```
public sealed class CustomDictionary<TKey, TValue>
  : KeyedCollection<TKey, KeyValuePair<TKey, TValue>>
{
  protected override TKey GetKeyForItem(KeyValuePair<TKey, TValue> item)
  {
    return item.Key;
  }
} 
```

要像前面的示例一样使用它，您需要执行以下操作：

```
CustomDictionary<string, int> custDict = new CustomDictionary<string, int>();

custDict.Add(new KeyValuePair<string, int>("key", 7));

int valueByIndex = custDict[0].Value;
int valueByKey = custDict["key"].Value;
string keyByIndex = custDict[0].Key; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-25T18:13:00.467

您还可以使用 SortedList 及其通用对应项。这两个类以及在 Andrew Peters 的回答中提到的 OrderedDictionary 是字典类，其中项目可以通过索引（位置）以及键访问。如何使用这些类你可以找到：[SortedList Class](https://docs.microsoft.com/en-us/dotnet/api/system.collections.sortedlist)、[SortedList Generic Class](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.sortedlist-2)。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-04-06T21:15:54.217

**字典对于使用索引作为参考可能不是很直观，但是您可以对KeyValuePair**数组进行类似的操作：

前任。 `KeyValuePair<string, string>[] filters;`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-11-03T08:42:21.953

Visual Studio 的[UserVoice](https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/16494583-generic-ordereddictionary)提供了dotmore的[通用 OrderedDictionary 实现的链接。](https://github.com/mattmc3/dotmore/blob/master/dotmore/Collections/Generic/OrderedDictionary.cs)

但是如果你只需要通过索引获取键/值对而不需要通过键获取值，你可以使用一个简单的技巧。声明一些泛型类（我称之为 ListArray），如下所示：

```
class ListArray<T> : List<T[]> { } 
```

您也可以使用构造函数声明它：

```
class ListArray<T> : List<T[]>
{
    public ListArray() : base() { }
    public ListArray(int capacity) : base(capacity) { }
} 
```

例如，您从文件中读取了一些键/值对，并且只想按照读取顺序存储它们，以便稍后通过索引获取它们：

```
ListArray<string> settingsRead = new ListArray<string>();
using (var sr = new StreamReader(myFile))
{
    string line;
    while ((line = sr.ReadLine()) != null)
    {
        string[] keyValueStrings = line.Split(separator);
        for (int i = 0; i < keyValueStrings.Length; i++)
            keyValueStrings[i] = keyValueStrings[i].Trim();
        settingsRead.Add(keyValueStrings);
    }
}
// Later you get your key/value strings simply by index
string[] myKeyValueStrings = settingsRead[index]; 
```

您可能已经注意到，您的 ListArray 中不一定只有一对键/值。项目数组可以是任意长度，例如锯齿状数组。

# asp.net - ASP.NET 中 DataGrid 和 GridView 的区别？

> ID：4230
> 
> 赞同：51
> 
> 时间：2008-08-07T00:54:31.883
> 
> 标签：asp.net

我从事 ASP.NET 开发已经有一段时间了，以前我在各种事情上都使用过 GridView 和 DataGrid 控件，但我从来没有找到使用其中一个或另一个的真正好理由。我想知道：

这 2 个 ASP.NET 控件有什么区别？两者的优点或缺点是什么？有更快的吗？较新？更容易维护？

控件的智能感知摘要似乎没有描述两者之间的任何区别。它们都可以查看、编辑和排序数据，并在运行时自动生成列。

**编辑：** Visual Studio 2008 不再将 DataGrid 列为工具箱中的可用控件。如果您手动输入它，它仍然可用（我假设为遗留支持）。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-08-07T01:06:22.687

DataGrid 是一个 ASP.NET 1.1 控件，仍然受支持。GridView 到了 2.0，使某些任务变得更简单，添加了不同的数据绑定功能：

此链接比较了 DataGrid 和 GridView 功能 -

[https://msdn.microsoft.com/en-us/library/05yye6k9(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/05yye6k9(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-20T07:47:19.477

`GridView`控件是控件的继承者`DataGrid`。与`DataGrid`控件一样，该`GridView`控件旨在在 HTML 表格中显示数据。当绑定到数据源时，`DataGrid`和`GridView`控件每个都将 a`DataSource`中的一行显示为输出表中的一行。

`DataGrid`和控件都`GridView`派生自`WebControl`该类。尽管它具有与控件相似的对象模型`DataGrid`，但 GridView 控件也具有许多优于`DataGrid`控件的新功能和优势，包括：

*   更丰富的设计时功能。
*   改进的数据源绑定功能。
*   自动处理排序、分页、更新和删除。
*   其他列类型和设计时列操作。
*   具有 PagerTemplate 属性的自定义寻呼机用户界面 (UI)。

`GridView`控制与控制的区别`DataGrid`包括：

*   不同的自定义分页支持。
*   不同的事件模型。

`DataGrid`使用控件时，对数据进行排序、分页和就地编辑需要额外的编码。该`GridView`控件使您无需编写任何代码即可添加排序、分页和编辑功能。相反，您可以通过在控件上设置属性来自动执行这些任务以及其他常见任务，例如将数据绑定到数据源。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-08-07T01:05:56.620

DataGrid 最初是在 .NET 1.0 中。GridView 在 .NET 2.0 中被引入（并取代了 DataGrid）。它们提供几乎相同的功能。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-18T15:52:36.943

如果您在 Visual Studio 2008 / .NET 3.5 中工作，您可能不应该使用任何一种。使用 ListView - 它为您提供了 GridView 的功能以及中继器的样式灵活性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-18T15:42:29.660

关键区别在于 ViewState 管理 IIRC。DataGrid 需要打开 ViewState 才能具有编辑和排序功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T22:20:11.087

安全方面的一个关键区别是 DataGrid 使用不 HtmlEncode 绑定数据的 BoundColumn。也没有打开或关闭 HtmlEncoding 的属性，因此您需要以某种方式在代码中执行此操作。

GridView 使用 BoundField，默认情况下对绑定数据执行 HtmlEncode，如果您需要将其关闭，它具有 HtmlEncode 属性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-06T07:08:52.627

**数据网格**

1.  `DataGrid`与`Asp.Net 1.0`.
2.  对于排序，我们需要处理`SortCommand event`和重新绑定所需的网格，对于分页，我们需要处理`PageIndexChanged event` 和重新绑定所需的网格。
3.  需要编写代码来实现更新和删除操作。
4.  不支持自动格式或样式功能。
5.  性能比`GridView`.

**网格视图**

1.  GridView 是随`Asp.Net 2.0`.
2.  内置支持`Paging and Sorting`.
3.  内置支持`Update and Delete operations`.
4.  支持自动格式或样式功能。
5.  与 相比，性能较慢`DataGrid`。

和like已更改`events`为。`properties``Item``Row`

例如，

*   `ItemCommand - RowCommand`

*   `ItemDataBound - RowDataBound`

*   `e.Item.ItemType - e.Row.RowType`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-21T07:28:09.790

网格视图和详细信息视图之间的一些基本区别

与 DataGrid 控件相比，GridView 控件还具有许多新功能和优势，其中包括：

· 更丰富的设计时功能。· 改进的数据源绑定能力。· 自动处理排序、分页、更新和删除。· 附加列类型和设计时列操作。· 具有 PagerTemplate 属性的自定义寻呼机用户界面 (UI)。

GridView 控件和DataGrid 控件之间的区别包括： · 不同的自定义分页支持。·不同的事件模型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-05T14:47:40.097

区别之一是 HTML 输出。数据网格将输出标题的 TD，而网格视图将输出 TH。这可能会导致显示出现不直观的变化。

# c# - 使用 C# 进行消息传递的用途

> ID：4234
> 
> 赞同：15
> 
> 时间：2008-08-07T00:56:41.880
> 
> 标签：c#, messaging, activemq

因此，我的公司将大量数据存储在 foxpro 数据库中，并试图绕过直接接触它的性能损失，我正在考虑发送任何可以异步完成的消息，以获得更快速的用户体验。我开始研究[ActiveMQ](http://activemq.apache.org/)，但不知道 C# 能很好地与它挂钩。想听听大家的想法。

编辑：它将是一个 Web 应用程序。任何接触这个 foxpro 的东西都有点慢（可能是因为 10 年前设置它的人把它搞砸了，一些表格文件非常大）。我们每晚将 foxpro 复制到 sql，并且我们的大部分数据读取都可以在一天前完成，因此我们专注于写入。加上写入会影响用户体验（购买）的关键部分，我们将其存储在 sql 中，然后在可以时将其放入 foxpro 中。我希望我们可以摆脱 foxpro，不幸的是，该公司不想摆脱他们购买的依赖它的非常旧的软件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-07T01:20:13.890

ActiveMQ 与使用 Spring.NET 集成和 NMS 的 C# 配合得很好。带有一些链接的帖子可以帮助您开始朝这个方向[发展](http://thefreakparade.com/2008/04/15/two-message-exchange-patterns-using-activemq-and-nms-via-springnet/)。还可以考虑使用 MSMQ（System.Messaging 命名空间）或基于 .NET 的异步消息传递解决方案，[这里有一些选项](http://thefreakparade.com/2008/06/03/esbs-for-the-microsoft-net-platform/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-19T07:03:04.037

MSMQ（Microsoft 消息队列）可能是一个不错的选择。它是操作系统的一部分并作为可选组件出现（可以通过添加/删除程序/Windows 组件安装），这意味着它是免费的（当然，只要您已经为 Windows 付费）。MSMQ 提供 Win32/COM 和[System.Messaging](https://docs.microsoft.com/en-us/dotnet/api/system.messaging) API。更现代的 Windows Communication Foundation（又名 Indigo）[排队通道](https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/queuing-in-wcf)也使用 MSMQ。请注意，Windows 的家庭 SKU（XP 家庭和 Vista 家庭）不支持 MSMQ

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T14:12:53.747

值得一提的是，[ActiveMQ 开源项目](http://activemq.apache.org/)定义了一个[名为 NMS 的用于消息传递的 C# API，](http://activemq.apache.org/nms/)它允许您针对单个 C#/.Net API 进行开发，然后可以使用各种消息传递后端，例如

*   [活动MQ](http://activemq.apache.org/)
*   MSMQ
*   TibCo 的 EMS
*   任何 STOMP 提供商
*   [通过StompConnect](http://stomp.codehaus.org/StompConnect)的任何 JMS 提供程序

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-14T14:23:37.363

你可能想看看 MSMQ。.NET 和 VFP 可以使用它，但您需要重写才能使用它们。这是一篇文章，告诉您如何从 VFP 使用 MSMQ。[https://docs.microsoft.com/en-us/previous-versions/visualstudio/foxpro/ms917361(v=msdn.10)](https://docs.microsoft.com/en-us/previous-versions/visualstudio/foxpro/ms917361(v=msdn.10))

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T02:17:35.523

抱歉，如果这不是您所要求的...您是否考虑过某种在后台使用 Winsock 在 c/c++ 中使用异步套接字时有点像“桶系统”的缓存？基本上，它的工作原理是接受请求，并立即将响应发送回 Web 应用程序，当它最终找到您的记录时，它会通过 AJAX 或您选择的任何其他技术在应用程序上更新它。由于我不是 C# 程序员，我无法提供任何具体示例。希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-22T17:30:58.737

Fox 应用程序是否使用 .CDX 索引？如果是这样，您可以通过添加索引来提高性能，而无需更改任何程序代码。但是，如果它使用 .IDX 索引，则必须在实际应用程序中进行更改。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-17T23:40:26.043

由于问题在于写入，我会更倾向于>删除<表上任何不需要的索引。在 RDBMS 中很常见，FoxPro 表上的每个索引都会减慢写入操作，因为索引需要更新，并且由于您不直接从（或可能直接查询）表中读取，因此您不需要很多索引. 您可能还想查看表上的任何触发器或字段规则，因为它们可能会减慢写入操作的速度。不过，请确保您的参照完整性仍然保留。

# java - 为什么 Java 自动装箱不扩展到自动装箱类型的方法的方法调用？

> ID：4242
> 
> 赞同：53
> 
> 时间：2008-08-07T01:05:15.420
> 
> 标签：java, autoboxing

我想将原语转换为字符串，我尝试过：

```
myInt.toString(); 
```

这失败并出现错误：

```
int cannot be dereferenced 
```

现在，我知道原语不是引用类型（即不是对象），因此不能有方法。然而，Java 5 引入了自动装箱和拆箱（就像 C# 一样……我在 C# 中从来不喜欢它，但这无关紧要）。因此，通过自动装箱，我希望上面将 myInt 转换为 Integer ，然后对其调用 toString() 。

此外，我相信 C# 允许这样的调用，除非我记错了。这只是 Java 自动装箱/拆箱规范的一个不幸缺点，还是有充分的理由？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-08-07T01:09:17.547

Java 自动装箱/拆箱并没有达到允许您取消引用原语的程度，因此您的编译器会阻止它。您的编译器仍然知道`myInt`原语。[jcp.org](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)上有一篇关于这个问题的论文。

自动装箱主要在赋值或参数传递期间有用——允许您将原语作为对象传递（反之亦然），或将原语分配给对象（反之亦然）。

所以不幸的是，你必须这样做：（感谢帕特里克，我改用你的方式）

```
Integer.toString(myInt); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-08-07T01:16:21.263

贾斯汀所说的同上，但你应该这样做：

```
Integer.toString(myInt); 
```

它节省了一个或两个分配，并且更具可读性。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-08-10T07:32:41.587

另一种方法是使用：

```
String.valueOf(myInt); 
```

此方法对每个基本类型和`Object`. 这样，您甚至不必考虑您正在使用的类型。该方法的实现将为您调用给定类型的适当方法，例如`Integer.toString(myInt)`.

请参阅[http://java.sun.com/javase/6/docs/api/java/lang/String.html](http://java.sun.com/javase/6/docs/api/java/lang/String.html)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-08-07T04:16:20.480

> 对我来说似乎是规范的一个缺点

还有更多的缺点，这是一个微妙的话题。看看[这个](http://kiranthakkar.blogspot.com/2007/05/method-overloading-with-new-features-of.html)：

```
public class methodOverloading{
   public static void hello(Integer x){
      System.out.println("Integer");
   }

   public static void hello(long x){
      System.out.println("long");
   }

   public static void main(String[] args){
      int i = 5;
      hello(i);
   }
} 
```

这里将打印“long”（我自己没有检查过），因为编译器选择扩大而不是自动装箱。使用自动装箱时要小心，或者根本不要使用它！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-24T16:18:30.543

最接近您的示例的有效语法是

```
((Integer) myInt).toString(); 
```

当编译器完成时，这相当于

```
Integer.valueOf(myInt).toString(); 
```

但是，它的性能不如常规用法，`String.valueOf(myInt)`因为，除非在特殊情况下，它会创建一个新的 Integer 实例，然后立即将其丢弃，从而导致更多不必要的垃圾。（一小部分整数被缓存，并通过数组访问进行访问。）也许语言设计者出于性能原因不鼓励这种用法。

编辑：如果downvoter（s）评论为什么这没有帮助，我将不胜感激。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-01-23T14:16:42.277

正如每个人都指出的那样，自动装箱可以让您简化一些代码，但您不能假装原语是复杂类型。

同样有趣的是： Java 中[的“自动装箱是一种编译器级别的 hack”](http://gafter.blogspot.com/2008/01/is-java-dying.html)。自动装箱基本上是添加到 Java 中的一个奇怪的组合。查看[这篇文章](http://bexhuff.com/2006/11/java-1-5-autoboxing-wackyness)以了解有关它有多奇怪的更多详细信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-30T23:26:36.633

如果 Java 定义了某些静态方法来对原始类型进行操作并在编译器中内置一些语法糖，这将是有帮助的

```
5.asInteger 
```

相当于

```
some.magic.stuff.Integer.asInteger(5); 
```

我不认为这样的功能会导致与根据当前规则编译的任何代码不兼容，并且在许多情况下它有助于减少语法混乱。如果 Java 要对被取消引用的原语进行自动装箱，人们可能会认为它正在将取消引用语法映射到静态方法调用（这实际上是在 .NET 中发生的情况），因此以这种形式编写的操作不会比实际成本高等效的静态方法调用。添加一个新的语言特性会鼓励人们编写错误的代码（例如，自动装箱取消引用的原语）似乎不是一个好主意，尽管允许取消引用样式的方法可能是一个好主意。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-10T21:20:19.120

在 C# 中，整数既不是引用类型，也不必为调用*ToString()而装箱。*但是，它们**被**视为框架中的对象（作为 ValueType，因此它们具有值语义）。在 CLR 中，基元上的方法通过“间接”加载到堆栈（ldind）来调用。

# sql-server - SQL Server 2005 存储过程中的 FTP 最佳实践是什么？

> ID：4246
> 
> 赞同：15
> 
> 时间：2008-08-07T01:09:04.820
> 
> 标签：sql-server, ftp

从 SQL Server 存储过程执行 FTP 命令的最佳方法是什么？我们目前使用这样的东西：

```
EXEC master..xp_cmdshell 'ftp -n -s:d:\ftp\ftpscript.xmt 172.1.1.1' 
```

问题是即使 FTP 以错误结束，该命令似乎也成功了。此外，使用`xp_cmdshell`需要特殊权限，可能会为安全问题留下空间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T01:29:43.200

如果您正在运行 SQL 2005，您可以在 CLR 集成程序集中执行此操作，并使用 System.Net 命名空间中的 FTP 类来构建一个简单的 FTP 客户端。

您将受益于能够捕获和处理异常并降低必须使用 xp_cmdshell 的安全风险。

只是一些想法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-11T08:17:19.750

另一种可能性是使用 DTS 或集成服务（DTS 用于 SQL Server 7 或 2000，SSIS 用于 2005 或更高版本）。两者都来自 Microsoft，包含在 Sql Server 安装中（至少在标准版中）并且具有 FTP 任务，并且专为从 Sql Server 导入/导出作业而设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T02:16:46.680

如果您需要从数据库中执行 FTP，那么我会按照 Kevin 的建议使用 .NET 程序集。这将提供对过程的最大控制，而且您可以将有意义的错误消息记录到表中以进行报告。

另一种选择是编写一个命令行应用程序来读取数据库以运行命令。然后，您可以定义一个计划任务，以每分钟或任何需要的轮询周期调用该命令行应用程序。这比在数据库服务器中启用 CLR 支持更安全。

# mobile - 程序化短信

> ID：4269
> 
> 赞同：76
> 
> 时间：2008-08-07T01:28:03.190
> 
> 标签：mobile, sms

以编程方式发送 SMS 文本消息的最佳方式是什么？

是否有任何免费的基于 Web 服务的 SMS 网关？

我知道，如果我碰巧知道用户的运营商（Sprint、AT&T 等），我可以通过基于电话号码 + 运营商[的地址通过电子邮件发送 SMS 。](http://en.wikipedia.org/wiki/SMS_gateways)我想要一个不需要我知道承运人的好解决方案。除此之外，是否有一种简单的方法可以在给定手机号码的情况下查找运营商？

据我了解，有一些独立于主要移动运营商的服务通过 API 提供按消息收费的服务。我想知道的是这些组织如何利用 SMS 网络。他们是否与移动运营商签订了转售服务的合同？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2011-01-21T20:37:54.397

使用[http://www.twilio.com/](http://www.twilio.com/)

他们有一个 REST 接口来发送 SMS，甚至可以建立电话或接听电话。

您甚至可以获得 30 美元的积分来试用。

定义。您会找到最便宜的解决方案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-07T01:52:47.243

在我工作的地方，我们一直在使用[http://www.clickatell.com](http://www.clickatell.com)来发送 SMS - 看起来每条消息大约 6 或 7 美分。他们只是接受 http POST 请求来发送消息。我不知道你是否能找到任何好的免费网关。我们曾经发送过电子邮件，但发现它们不可靠。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-22T12:33:12.057

我过去使用过clickatell，发现它们也非常好。

但是，您可以自己构建以非常便宜地获取消息。您所需要的只是：一份提供大量（或无限）消息的合约；窗户手机；和一些套接字编程。

编写一个 Web 服务（传递号码和消息），它会调用发送消息的移动设备上的程序。

我知道至少有 FTSE100 公司走这条路。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-06-18T18:43:25.157

我们厌倦了使用“免费”短信网关，非常不可靠。

现在我们使用来自 Felltech Ltd. 的名为 OutboxSMS 的短信网关设备。它位于我们的网络上，并使用来自其内置发射器的无线链接直接连接到移动电话提供商。我们需要购买一张 SIM 卡（我们有一张带有大量信息的 PAYG），它安装在 OutboxSMS 装置上。我们在我们的邮件服务器（MS Exchange）上为其配置了一个电子邮件帐户，并在盒子上配置了 SMTP/POP3 帐户。

我们使用 OPManager，它通过电子邮件发送警报，我们将其定向到发件箱，它解析消息并在出现问题时向我们的操作人员手机发送短信。

我们还有一些 shell 脚本，它们使用 sendmail 将电子邮件发送到 outboxsms，然后再转换为文本消息。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-23T03:24:37.060

我认为这个值得一个新的答案。镇上有一个新玩家，它被称为 Nexmo，具有极具竞争力的价格，即使与 Twilio 相比也是如此。

[https://www.nexmo.com/](https://www.nexmo.com/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-01-09T20:22:56.657

您还可以获得一个 GSM 发射器并发出发送短信的 AT 命令。不知道您为什么要这样做，但这是另一种选择。这样你就不会依赖别人的服务

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-22T12:38:57.940

我一直在使用连接到 linux 机器的诺基亚手机来执行此操作。我有一个 cron 作业和一个脚本，可以检查数据库表中的新消息并使用[gnokii](http://www.gnokii.org/)发送消息。如果您要发送的短信数量不大，则效果很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T01:51:55.573

我不知道有什么免费的短信服务，你通常会购买批量短信并使用 API 发送出去。

[Whitepages.com](http://developer.whitepages.com/docs/)有一个 API，允许开发人员反向查找电话号码。它报告手机号码上的运营商，但很多时候它是一些不存在的运营商，如 Powertel 或其他东西。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-07T01:55:17.050

支持[Angus](https://stackoverflow.com/questions/4269/programmatic-sms#4285)，我可以担保[http://www.clickatell.com](http://www.clickatell.com)。它被用于我曾经工作过的公司。这是一个非常容易设置和使用的解决方案，效果很好。您只需要预测您打算发送多少条消息和批量订购消息。总的来说，它们很便宜。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2011-08-26T08:44:44.527

我用过[TextMagic](http://www.textmagic.com/)。他们有合理的费率和出色的 API 和帐户管理。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2009-01-09T20:20:42.823

抱歉，在重新阅读您的问题后，我意识到这不是您要寻找的答案。然而，这就是我为我的命令行程序所做的。有一个网站，如果你输入电话号码，它会给你运营商。因此，当我输入我的号码时，屏幕会抓取网站，找到运营商，如果运营商在我的列表中，我会检索该运营商的电子邮件

大多数公司都提供短信到电子邮件的服务。例如`myphonenumber@verizon.com`或其他东西（维基百科上有一个完整的列表）。

我用它在 C# 中创建了我自己的一个发送文本消息的小命令行应用程序。但是，您并没有真正得到“回复”，而且该号码是公司预先分配的号码。

我想如果你想走免费路线，这是你最好的选择。

这是维基百科链接： [短信网关](http://en.wikipedia.org/wiki/SMS_gateways)

# erlang - 如何确定进程父进程的 PID

> ID：4287
> 
> 赞同：16
> 
> 时间：2008-08-07T01:54:12.107
> 
> 标签：erlang

我在 erlang 中有一个进程，它应该在生成后立即执行某些操作，然后在完成后将结果发送回父级。如何找出产生它的进程的PID？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-08-07T02:27:32.740

您应该将 self() 作为入口函数的参数之一传递给孩子。

```
spawn_link(?MODULE, child, [self()]). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-16T14:35:32.210

@Eridius 的回答是首选的方法。要求进程注册名称可能会产生意想不到的副作用，例如增加进程的可见性，更不用说当您有很多进程时想出唯一名称的麻烦。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-08-11T16:19:38.740

最好的方法肯定是将它作为参数传递给调用的函数以启动子进程。如果您正在产生乐趣，这通常是一件好事，请小心执行以下操作：

```
spawn_link(fun () -> child(self()) end) 
```

这不会按照您的预期进行。（提示：何时调用 self()）

一般来说，您应该避免注册一个进程，即给它一个全局名称，除非您真的希望它是全局已知的。Spawning a fun 意味着您不必导出生成的函数，因为您通常应该避免导出不打算从其他模块调用的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-07T03:57:04.993

您可以使用 BIF 寄存器为生成/父进程命名（一个原子），然后从其他进程中引用已注册的名称。

> 函数（）->
> 
> > %% 做点什么
> > %% 然后发送消息给父母
> > 父母！信息。
> 
> ...
> 
> 注册（父母，自我（）），
> 产卵（模块，功能，[ARGS]）。

请参阅[Erlang 入门](http://www.erlang.org/doc/getting_started/conc_prog.html#3.3)第 3.3 节和[Erlang 参考手册第 10.3 节](http://www.erlang.org/doc/reference_manual/processes.html#10.3)。

# testing - 为什么我应该练习测试驱动开发，我应该如何开始？

> ID：4303
> 
> 赞同：62
> 
> 时间：2008-08-07T02:27:03.397
> 
> 标签：testing, tdd

很多人在开始编写代码之前谈论为他们的代码编写测试。这种做法通常被称为测试驱动开发或简称 TDD。以这种方式编写软件对我有什么好处？我如何开始这种做法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-08-07T02:33:10.437

有很多好处：

*   您可以立即获得有关您的代码是否正常工作的反馈，这样您就可以更快地发现错误
*   通过看到测试从红色变为绿色，您知道您有一个有效的回归测试和有效的代码
*   您获得重构现有代码的信心，这意味着您可以清理代码而不必担心它可能会破坏什么
*   最后，您拥有一套可以在自动构建期间运行的回归测试，让您更加确信自己的代码库是可靠的

最好的开始方式就是开始。[Kent Beck](https://rads.stackoverflow.com/amzn/click/com/0321146530)有一本关于测试驱动开发的好书。只需从新代码开始，不要担心旧代码……每当您觉得需要重构某些代码时，为现有功能编写测试，然后重构它并确保测试保持绿色。另外，请阅读[这篇很棒的文章](http://devver.wordpress.com/2008/07/07/tips-for-unit-testing/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T02:30:19.133

[最近已经涵盖了](https://stackoverflow.com/questions/2260/what-is-tdd)好处部分，至于从哪里开始......在一个没有太多未知数的小型企业系统上，因此风险很低。如果您还不了解测试框架（如 NUnit），请先学习它。否则从编写你的第一个测试开始:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T02:34:05.660

**好处**

1.  你弄清楚如何划分你的代码
2.  你弄清楚你想要你的代码做什么
3.  你知道它应该如何运作，并且在未来，如果重构会破坏任何东西
4.  让您养成确保您的代码始终知道它应该做什么的习惯

**入门**

去做就对了。为你想做的事情编写一个测试用例，然后编写应该通过测试的代码。如果你通过了测试，很好，你可以继续编写代码总是失败的案例（例如，2+2 不应该等于 5）。

一旦你的所有测试都通过了，编写你的实际业务逻辑来做你想做的任何事情。

如果您从头开始，请确保您找到了一个易于使用的良好测试套件。我喜欢 PHP，所以 PHPUnit 或 SimpleTest 运行良好。几乎所有流行的语言都有一些 xUnit 测试套件可用于帮助构建和自动化测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-07T02:32:38.380

在我看来，最棒的一点是它清楚地允许您查看您的代码是否按预期执行。这可能看起来很明显，但正如我过去发现的那样，很容易误入你最初的目标：p

# .net - 适用于 Windows 的网格托管

> ID：4305
> 
> 赞同：13
> 
> 时间：2008-08-07T02:27:58.560
> 
> 标签：.net, hosting

有没有提供 .NET 堆栈的**优秀网格托管公司？**像 MediaTemple 这样的东西 - 它不会托管世界上最快的网站，但价格比“共享托管”要好得多。我用过 Rackspace 的 Mosso，但它很糟糕——它从来不像一个普通的 .NET 堆栈（缓存很奇怪，站点重新编译很奇怪）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T02:30:02.190

试试[gogrid.com](http://www.gogrid.com)，他们似乎在云计算圈子里有很好的追随者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-08T04:16:14.487

我听说过关于莫索的好消息。

[http://www.mosso.com/](http://www.mosso.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-15T17:16:20.307

可以多谈谈不太正常的 .net 体验吗？我想去Mosso...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-29T05:23:59.737

Grid Hosting 一价，一整套云托管服务器 [链接文](http://www.ix-one.com/webhosting/Grid_Hosting.htm)

# c++ - 在 C++ 中创建稀疏数组的最佳方法是什么？

> ID：4306
> 
> 赞同：56
> 
> 时间：2008-08-07T02:29:58.180
> 
> 标签：c++, oop, data-structures, hash, maps

我正在研究一个需要处理巨大矩阵的项目，特别是用于 copula 计算的金字塔求和。

简而言之，我需要在矩阵（多维数组）中的大量零中跟踪相对少量的值（通常为 1，在极少数情况下超过 1）。

稀疏数组允许用户存储少量值，并将所有未定义的记录假定为预设值。由于物理上不可能将所有值存储在内存中，因此我只需要存储少数非零元素。这可能是几百万个条目。

速度是重中之重，我还想在运行时动态选择类中变量的数量。

我目前在一个使用二叉搜索树（b-tree）来存储条目的系统上工作。有人知道更好的系统吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-08-07T02:33:16.973

对于 C++，映射效果很好。几百万个对象不会是一个问题。1000 万个项目在我的计算机上花费了大约 4.4 秒和大约 57 兆。

我的测试应用程序如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <map>

class triple {
public:
    int x;
    int y;
    int z;
    bool operator<(const triple &other) const {
        if (x < other.x) return true;
        if (other.x < x) return false;
        if (y < other.y) return true;
        if (other.y < y) return false;
        return z < other.z;
    }
};

int main(int, char**)
{
    std::map<triple,int> data;
    triple point;
    int i;

    for (i = 0; i < 10000000; ++i) {
        point.x = rand();
        point.y = rand();
        point.z = rand();
        //printf("%d %d %d %d\n", i, point.x, point.y, point.z);
        data[point] = i;
    }
    return 0;
} 
```

现在要动态选择变量的数量，最简单的解决方案是将**index 表示为 string**，然后使用 string 作为 map 的键。例如，位于 [23][55] 的项目可以通过“23,55”字符串表示。我们还可以将此解决方案扩展到更高的维度；例如对于三个维度，任意索引看起来像“34,45,56”。该技术的简单实现如下：

```
std::map data<string,int> data;
char ix[100];

sprintf(ix, "%d,%d", x, y); // 2 vars
data[ix] = i;

sprintf(ix, "%d,%d,%d", x, y, z); // 3 vars
data[ix] = i; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-09-02T08:53:39.763

接受的答案建议使用字符串来表示多维索引。

但是，为此构造字符串是不必要的浪费。如果在编译时不知道大小（因此`std::tuple`不起作用），则`std::vector`可以很好地用作索引，无论是哈希映射还是有序树。对于`std::map`，这几乎是微不足道的：

```
#include <vector>
#include <map>

using index_type = std::vector<int>;

template <typename T>
using sparse_array = std::map<index_type, T>; 
```

对于`std::unordered_map`（或类似的基于哈希表的字典），它的工作量稍大一些，因为`std::vector`不专门`std::hash`：

```
#include <vector>
#include <unordered_map>
#include <numeric>

using index_type = std::vector<int>;

struct index_hash {
    std::size_t operator()(index_type const& i) const noexcept {
        // Like boost::hash_combine; there might be some caveats, see
        // <https://stackoverflow.com/a/50978188/1968>
        auto const hash_combine = [](auto seed, auto x) {
            return std::hash<int>()(x) + 0x9e3779b9 + (seed << 6) + (seed >> 2);
        };
        return std::accumulate(i.begin() + 1, i.end(), i[0], hash_combine);
    }
};

template <typename T>
using sparse_array = std::unordered_map<index_type, T, index_hash>; 
```

无论哪种方式，用法都是相同的：

```
int main() {
    using i = index_type;

    auto x = sparse_array<int>();
    x[i{1, 2, 3}] = 42;
    x[i{4, 3, 2}] = 23;

    std::cout << x[i{1, 2, 3}] + x[i{4, 3, 2}] << '\n'; // 65
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-21T23:45:29.017

Boost 有一个名为 uBLAS 的 BLAS 模板化实现，其中包含一个稀疏矩阵。

[https://www.boost.org/doc/libs/release/libs/numeric/ublas/doc/index.htm](https://www.boost.org/doc/libs/release/libs/numeric/ublas/doc/index.htm)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-12-29T21:23:06.607

[Eigen](http://eigen.tuxfamily.org/)是一个 C++ 线性代数库，具有稀疏矩阵的[实现](http://eigen.tuxfamily.org/dox/group__SparseQuickRefPage.html)。它甚至支持针对稀疏矩阵进行优化的矩阵运算和求解器（LU 分解等）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-19T21:59:23.207

指数比较中的小细节。您需要进行字典比较，否则：

```
a= (1, 2, 1); b= (2, 1, 2);
(a<b) == (b<a) is true, but b!=a 
```

编辑：所以比较应该是：

```
return lhs.x<rhs.x
    ? true 
    : lhs.x==rhs.x 
        ? lhs.y<rhs.y 
            ? true 
            : lhs.y==rhs.y
                ? lhs.z<rhs.z
                : false
        : false 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-07T18:06:23.420

完整的解决方案列表可以在维基百科中找到。为方便起见，我将相关部分引述如下。

[https://en.wikipedia.org/wiki/Sparse_matrix#Dictionary_of_keys_.28DOK.29](https://en.wikipedia.org/wiki/Sparse_matrix#Dictionary_of_keys_.28DOK.29)

**密钥字典 (DOK)**

> DOK 包含一个将（行、列）对映射到元素值的字典。字典中缺少的元素被视为零。该格式适用于以随机顺序增量构造稀疏矩阵，但不适用于按字典顺序迭代非零值。通常以这种格式构造一个矩阵，然后转换为另一种更有效的格式进行处理。 [1]

**列表列表 (LIL)**

> LIL 每行存储一个列表，每个条目包含列索引和值。通常，这些条目按列索引排序，以便更快地查找。这是另一种适用于增量矩阵构造的格式。 [2]

**坐标列表（COO）**

> COO 存储（行、列、值）元组的列表。理想情况下，对条目进行排序（按行索引，然后按列索引）以缩短随机访问时间。这是另一种有利于增量矩阵构造的格式。 [3]

**压缩稀疏行（CSR、CRS 或耶鲁格式）**

> 压缩稀疏行 (CSR) 或压缩行存储 (CRS) 格式表示由三个（一维）数组组成的矩阵 M，它们分别包含非零值、行的范围和列索引。它类似于 COO，但压缩了行索引，因此得名。这种格式允许快速行访问和矩阵向量乘法 (Mx)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-07T03:13:15.457

哈希表具有快速插入和查找功能。您可以编写一个简单的散列函数，因为您知道您将只处理整数对作为键。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-08T06:11:20.107

实现稀疏矩阵的最好方法是不要实现它们——至少不是你自己。我建议 BLAS（我认为它是 LAPACK 的一部分）可以处理非常大的矩阵。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-27T17:52:45.867

因为只有带有 [a][b][c]...[w][x][y][z] 的值是重要的，所以我们只存储索引本身，而不是几乎无处不在的值 1 - 总是相同+无法对其进行哈希处理。注意到存在维度的诅咒，建议使用一些已建立的工具 NIST 或 Boost，至少阅读源代码以避免不必要的错误。

如果工作需要捕获未知数据集的时间依赖性分布和参数趋势，那么具有单值根的 Map 或 B-Tree 可能不实用。对于所有 1 值，我们只能存储索引本身，如果排序（表示的敏感性）可以从属于运行时时域的缩减，则进行散列处理。由于除 1 之外的非零值很少，因此显而易见的候选者是您可以轻松找到并理解的任何数据结构。如果数据集真的是巨大的宇宙大小，我建议使用某种滑动窗口来自己管理文件/磁盘/持久性io，根据需要将部分数据移动到范围内。（编写您可以理解的代码）如果您承诺为工作组提供实际解决方案，

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-23T15:59:50.463

这是一个相对简单的实现，它应该提供合理的快速查找（使用哈希表）以及对行/列中非零元素的快速迭代。

```
// Copyright 2014 Leo Osvald
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

#ifndef UTIL_IMMUTABLE_SPARSE_MATRIX_HPP_
#define UTIL_IMMUTABLE_SPARSE_MATRIX_HPP_

#include <algorithm>
#include <limits>
#include <map>
#include <type_traits>
#include <unordered_map>
#include <utility>
#include <vector>

// A simple time-efficient implementation of an immutable sparse matrix
// Provides efficient iteration of non-zero elements by rows/cols,
// e.g. to iterate over a range [row_from, row_to) x [col_from, col_to):
//   for (int row = row_from; row < row_to; ++row) {
//     for (auto col_range = sm.nonzero_col_range(row, col_from, col_to);
//          col_range.first != col_range.second; ++col_range.first) {
//       int col = *col_range.first;
//       // use sm(row, col)
//       ...
//     }
template<typename T = double, class Coord = int>
class SparseMatrix {
  struct PointHasher;
  typedef std::map< Coord, std::vector<Coord> > NonZeroList;
  typedef std::pair<Coord, Coord> Point;

 public:
  typedef T ValueType;
  typedef Coord CoordType;
  typedef typename NonZeroList::mapped_type::const_iterator CoordIter;
  typedef std::pair<CoordIter, CoordIter> CoordIterRange;

  SparseMatrix() = default;

  // Reads a matrix stored in MatrixMarket-like format, i.e.:
  // <num_rows> <num_cols> <num_entries>
  // <row_1> <col_1> <val_1>
  // ...
  // Note: the header (lines starting with '%' are ignored).
  template<class InputStream, size_t max_line_length = 1024>
  void Init(InputStream& is) {
    rows_.clear(), cols_.clear();
    values_.clear();

    // skip the header (lines beginning with '%', if any)
    decltype(is.tellg()) offset = 0;
    for (char buf[max_line_length + 1];
         is.getline(buf, sizeof(buf)) && buf[0] == '%'; )
      offset = is.tellg();
    is.seekg(offset);

    size_t n;
    is >> row_count_ >> col_count_ >> n;
    values_.reserve(n);
    while (n--) {
      Coord row, col;
      typename std::remove_cv<T>::type val;
      is >> row >> col >> val;
      values_[Point(--row, --col)] = val;
      rows_[col].push_back(row);
      cols_[row].push_back(col);
    }
    SortAndShrink(rows_);
    SortAndShrink(cols_);
  }

  const T& operator()(const Coord& row, const Coord& col) const {
    static const T kZero = T();
    auto it = values_.find(Point(row, col));
    if (it != values_.end())
      return it->second;
    return kZero;
  }

  CoordIterRange
  nonzero_col_range(Coord row, Coord col_from, Coord col_to) const {
    CoordIterRange r;
    GetRange(cols_, row, col_from, col_to, &r);
    return r;
  }

  CoordIterRange
  nonzero_row_range(Coord col, Coord row_from, Coord row_to) const {
    CoordIterRange r;
    GetRange(rows_, col, row_from, row_to, &r);
    return r;
  }

  Coord row_count() const { return row_count_; }
  Coord col_count() const { return col_count_; }
  size_t nonzero_count() const { return values_.size(); }
  size_t element_count() const { return size_t(row_count_) * col_count_; }

 private:
  typedef std::unordered_map<Point,
                             typename std::remove_cv<T>::type,
                             PointHasher> ValueMap;

  struct PointHasher {
    size_t operator()(const Point& p) const {
      return p.first << (std::numeric_limits<Coord>::digits >> 1) ^ p.second;
    }
  };

  static void SortAndShrink(NonZeroList& list) {
    for (auto& it : list) {
      auto& indices = it.second;
      indices.shrink_to_fit();
      std::sort(indices.begin(), indices.end());
    }

    // insert a sentinel vector to handle the case of all zeroes
    if (list.empty())
      list.emplace(Coord(), std::vector<Coord>(Coord()));
  }

  static void GetRange(const NonZeroList& list, Coord i, Coord from, Coord to,
                       CoordIterRange* r) {
    auto lr = list.equal_range(i);
    if (lr.first == lr.second) {
      r->first = r->second = list.begin()->second.end();
      return;
    }

    auto begin = lr.first->second.begin(), end = lr.first->second.end();
    r->first = lower_bound(begin, end, from);
    r->second = lower_bound(r->first, end, to);
  }

  ValueMap values_;
  NonZeroList rows_, cols_;
  Coord row_count_, col_count_;
};

#endif  /* UTIL_IMMUTABLE_SPARSE_MATRIX_HPP_ */ 
```

为简单起见，它是`immutable`，但您可以使其可变；如果您想要合理有效的“插入”（将零更改为非零），请务必更改`std::vector`为。`std::set`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-12T01:31:17.357

我建议做类似的事情：

```
typedef std::tuple<int, int, int> coord_t;
typedef boost::hash<coord_t> coord_hash_t;
typedef std::unordered_map<coord_hash_t, int, c_hash_t> sparse_array_t;

sparse_array_t the_data;
the_data[ { x, y, z } ] = 1; /* list-initialization is cool */

for( const auto& element : the_data ) {
    int xx, yy, zz, val;
    std::tie( std::tie( xx, yy, zz ), val ) = element;
    /* ... */
} 
```

为了帮助保持数据稀疏，您可能需要编写 的子类`unorderd_map`，其迭代器会自动跳过（并删除）任何值为 0 的项目。

# testing - 什么是对象模拟，我什么时候需要它？

> ID：4314
> 
> 赞同：43
> 
> 时间：2008-08-07T02:37:07.807
> 
> 标签：testing, mocking

许多人在编写单元测试时使用 Mock Objects。什么是**模拟对象**？为什么我永远需要一个？我需要一个模拟对象框架吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-08-07T02:43:59.340

对象模拟用于将依赖项排除在单元测试之外。有时你会有一个像“SelectPerson”这样的测试，它会从数据库中选择一个人并返回一个 Person 对象。

为此，您通常需要对数据库的依赖，但是通过对象模拟，您可以使用模拟框架模拟与数据库的交互，因此它可能会返回一个看起来像从数据库返回的数据集，然后您可以测试您的代码以确保它处理将数据集转换为人员对象，而不是使用它来测试与数据库的连接是否存在。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-08-07T02:47:58.207

有几个人已经回答了“什么”，但这里有几个我能想到的快速“为什么”：

1.  **表现**

    因为单元测试应该很快，所以如果使用模拟对象来测试与网络、数据库或其他时间密集型资源交互的组件，则无需付出代价。节省的钱很快就会增加。

2.  **合作**

    如果您正在编写一段需要与其他人的代码交互的封装良好的代码（尚未编写，或者正在并行开发 - 一个常见的场景），您可以使用模拟对象来练习您的代码一次接口已约定。否则，在其他组件完成之前，您的代码可能不会开始测试。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-08-07T02:40:26.023

模拟对象可以让您测试您正在编写的内容，以及访问资源（磁盘、网络服务等）等抽象细节。然后模拟让你假装是那个外部资源，或类或其他什么。

您实际上并不需要一个模拟对象框架，只需扩展您不想在测试中担心的功能的类，并确保您正在测试的类可以使用您的模拟而不是真实的东西（将其传入通过构造函数或设置器或其他东西。

练习将显示模拟何时有用，何时无用。

编辑：模拟资源特别重要，因此您不必在测试期间依赖它们存在，并且您可以模拟它们如何存在以及它们响应的细节（例如模拟 FileNotFoundException 或缺少的 web 服务，或网络服务的各种可能的返回值）......所有这些都没有涉及缓慢的访问时间（模拟将证明比在测试中访问此类资源要快得多）。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-08-07T04:14:57.207

> 我需要一个模拟对象框架吗？

当然不是。有时，手动编写模拟可能非常乏味。但对于简单的事情，它一点也不差。将[Last Responsible Moment](http://www.codinghorror.com/blog/archives/000705.html)的原则应用于 mocking 框架，只有当你向自己证明手写 mock 麻烦多于其价值时，你才应该从手写 mock 切换到框架。

如果您刚开始使用模拟，直接跳入框架将使您的学习曲线至少翻倍（您可以翻倍曲线吗？）。当您在几个项目中手动编写模拟时，模拟框架会**更有意义。**

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-07T02:40:06.117

对象模拟是一种从接口、抽象类或具有虚拟方法的类创建“虚拟”或模拟对象的方法。它允许您将其中之一包装在您自己的定义中以进行测试。它对于创建一个依赖于您正在测试的某个代码块的对象很有用。

我喜欢使用的一个流行的叫做[Moq](http://code.google.com/p/moq/)，但还有很多其他的，比如 RhinoMock 和许多我不知道的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-07T02:38:57.117

它允许您测试项目的一个部分如何与其他部分交互，而无需构建整个项目并可能遗漏重要部分。

编辑：来自维基百科的好例子：它允许您预先测试代码，就像汽车设计师使用碰撞测试假人来测试汽车在事故中的行为一样。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-08-07T02:45:32.423

另一个用途是它可以让您针对尚未构建的系统的其他部分进行测试。例如，如果您的类依赖于某个其他类，而该类是其他人正在开发的功能的一部分，您可以只要求一个基本完整的接口，对接口进行编程，然后按照您期望它们工作的方式模拟细节。然后，确保您对接口的假设是正确的（无论是在开发过程中，还是在功能完成后）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T04:32:44.360

模拟框架是否有用部分取决于您编写的代码的语言。使用静态语言，您需要付出额外的努力才能诱使编译器接受您的模拟对象作为真实对象的替代品。在 Python、Ruby 或 Javascript 等动态类型语言中，您通常可以将方法附加到任意对象或类上并将其作为参数传递——因此框架增加的价值要少得多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-10-15T14:41:16.940

.net 单元测试的 2 个推荐模拟框架是 Typemock Isolator 和 Rhino Mock。

在下面的链接中，您可以看到 Typemock 关于为什么需要一个模拟[框架](http://www.typemock.com/Docs/writing_unit_tests_with_isolator.html)进行单元测试的解释。

# asp.net - 没有业务逻辑层的 ASP.Net 2.0 应用程序？

> ID：4320
> 
> 赞同：6
> 
> 时间：2008-08-07T02:41:24.290
> 
> 标签：asp.net, business-logic-layer, objectdatasource

没有如下 BLL（业务逻辑层）的**ASP.Net 2.0**应用程序是否“可以接受” ？

1.  SQL Server 数据存储和存储过程
2.  连接到存储过程的数据链路层（强类型表适配器）
3.  带有代码的表示层 ASPX 页面和用于直接连接到 DLL 的 ObjectDataSource

即使业务逻辑在演示文稿的代码中完全可验证，BLL 是否总是更可取？不使用 BLL 的潜在缺点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-07T02:48:48.690

只要你明白后果是可以接受的。您拥有 BLL 的主要原因是在整个应用程序的其他地方重用该逻辑。

如果您在演示代码中拥有所有这些验证逻辑，那么您确实很难在应用程序的其他地方重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T02:46:16.090

像其他一切一样，它是环境的，取决于系统的使用。你需要问自己的问题是：

1.  会不会积极开发
2.  这是否将在多年的过程中使用并扩展
3.  应用程序的扩展是未知的，因此是无限的

真的归结为懒惰。您想花多少时间从 UI 重新设计系统？因为没有业务层意味着您的 UI 中的规则可能会在许多页面上重复。

如果这是一个概念证明或简短的演示或课程项目，那么再说一次。采取简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T02:49:53.850

可以接受吗？取决于你问谁和你的要求是什么。这个应用程序是您和其他一些人使用的一次性内部应用程序吗？也许这已经足够好了。如果它的目的是成为一个生产就绪的企业应用程序，并且会随着时间的推移不断增长和维护，那么您可能希望在前期投入更多的精力来构建一个可维护的应用程序。

关注点分离是构建可维护应用程序的关键设计技术。通过将表示、业务和数据访问逻辑混合在一起，您最终可能会得到一个非常脆弱且难以更改的应用程序架构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-31T07:28:39.003

这取决于。如果您的业务逻辑在您的点击事件和页面加载中，这是不可接受的。

您的业​​务逻辑似乎在 DAL 中的某个地方（例如，存储过程等），只要您保持一致，就可以了。只要您非常非常确定您的客户端将*始终*使用 SQL Server，那么这种方法就不是问题。

我认识一个同事，他的*所有*业务逻辑都在存储过程中，他的观点主要是瘦客户端到数据库后端：他销售的产品非常成功。但这只是因为他非常符合这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-10-23T07:59:29.147

如果应用程序是一个通用应用程序，那么业务逻辑层也可以用于完整的其他应用程序。就像，我通常在其他应用程序中使用与 CMS 相关的 BLL 类。

# c# - 高可用性

> ID：4335
> 
> 赞同：19
> 
> 时间：2008-08-07T02:50:13.320
> 
> 标签：c#, .net, wcf, soa

如果主端点死亡，是否有配置带有故障转移端点的 WCF 服务？有点像能够在 SQL 集群中指定故障转移服务器。

具体来说，我使用 TCP/IP 绑定来提高速度，但在机器不可用的罕见情况下，我想将流量重定向到故障转移服务器。不太担心丢失消息。我只是不想编写代码来处理重新路由。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-16T11:38:55.397

您需要在两个端点前使用第 4 层[负载均衡器。](http://en.wikipedia.org/wiki/Load_balancing_%28computing%29#Relationship_with_failover)最好坚持使用专用硬件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T02:59:33.380

不要试图听起来太模糊，但我认为 Windows 网络负载平衡 (NLB) 应该为您处理这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T17:43:37.147

尚未使用 WCF 完成此操作，但计划有一个本地 DNS 条目指向我们的网络负载平衡 (NLB) 虚拟 IP 地址，该地址会将所有流量定向到我们在 IIS 中托管服务的服务器之一。过去，我曾将 NLB 用于网站的这种确切场景，并且看不出它不能与 WCF 很好地配合使用的原因。

它的美妙之处在于您可以随意将服务器移入和移出虚拟集群，而 NLB 负责所有丑陋的重定向到可用节点。它还附带一个很好的价格标签：您的 Windows Server 许可证免费提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T14:12:01.183

我们很幸运将 BigIP 作为一种解决方案，尽管它并不便宜或易于设置。

一个不错的功能是它允许您在负载均衡器的公共端点设置 SSL 证书（以及 CA 的后门）。然后，您可以使用协议将请求传输回 WCF 服务器，从而对整个传输进行加密。

# winapi - 哪里是开始为 Windows 编程 GUI 的好地方？

> ID：4347
> 
> 赞同：25
> 
> 时间：2008-08-07T03:06:19.870
> 
> 标签：winapi, qt, mfc

我有使用 C 和 C++ 编写控制台和网络客户端/服务器应用程序的经验，但我对使用 win32 可视化 API、MFC、Qt、wxWidgets 等几乎一无所知。从哪里开始，我应该用什么方法专攻，以便为未来做好准备和稳健？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2008-08-07T11:24:54.997

这是一个相当广泛的问题，因为可以通过多种方式在 Windows 中编写 GUI 应用程序。

开发任何 GUI 应用程序有两个主要部分：**语言**和**API/框架**。考虑到您有兴趣学习构建 Windows GUI 应用程序，该语言并不是您真正关注的重点。因此，您应该选择一种您已经知道的语言，并使用您选择的语言可以利用的框架或 API。

如果您想使用 C，您几乎只能自己处理 Win32 API，在这种情况下，阅读[Petzold](https://rads.stackoverflow.com/amzn/click/com/157231995X)或[Richter](https://rads.stackoverflow.com/amzn/click/com/0735624240)将是很好的起点。Win32 API 可能非常令人生畏，但值得努力学习（恕我直言）。网上有很多关于 Win32 的教程，而且总是有[MSDN](http://msdn.microsoft.com/)，有完整的 Win32 API 参考/指南。确保您不仅涵盖 API，还涵盖其他领域，例如资源/对话框，因为它们是您的 Win32 应用程序的构建块。

如果您想使用 C++，那么您拥有使用 C 时拥有的所有选项以及其他一些选项。我建议直接使用 Win32 API，然后转向已知框架，例如 MFC、Qt、wxWindows 或 GTK，这样您就可以花更少的时间处理样板代码，而专注于编写应用程序逻辑。我刚刚列出的最后 3 个选项具有跨平台的额外好处，因此您不必过多担心特定于平台的问题。鉴于你说你想使用 Windows，我假设你热衷于专注于它而不是跨平台——所以使用 MFC，但首先花一些时间使用 Win32 API 来熟悉一些的概念。

在处理 MFC 和 Win32 API 时，最好在编写代码之前尝试深入了解术语。例如，您需要了解什么是[消息泵](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)，以及它是如何工作的。您需要了解“[所有者绘制的](http://www.codeproject.com/KB/buttons/nativewin32xpthemes.aspx)控件”和[子类](http://msdn.microsoft.com/en-us/library/ms997565.aspx)化等概念。当您了解这些（以及更多）内容后，您会发现使用 MFC 会更容易，因为它在其类接口中使用了类似的术语（例如，您需要先了解“翻译消息”的含义，然后才能了解如何以及何时使用[PreTranslateMessage](http://msdn.microsoft.com/en-us/library/kkbhxcs2(VS.80).aspx)）。

您也可以使用托管 C++ 编写 .NET GUI 应用程序，但我在一些地方读到托管 C++ 并不是真正打算以这种方式使用的。相反，它应该用作本机/非托管代码和托管代码之间的网关。如果您使用 .NET，最好使用 .NET 语言（例如 VB.NET 或 C#）来构建您的 GUI。

因此，如果您*打算*使用 .NET，您目前可以选择[WinForms](http://msdn.microsoft.com/en-us/netframework/aa497342.aspx)库或[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation)。鉴于 WPF 旨在替代它，我个人认为你会浪费时间学习构建 WinForms 应用程序。随着时间的推移，WPF 将变得更加流行，Winforms 很可能会消亡。WPF 具有更丰富的 API 集，并且不受 Winforms 的许多限制。但是，如果您确实选择了这条路线，那么您无疑必须学习[XAML](http://msdn.microsoft.com/en-us/library/ms752059.aspx)，它是一种驱动 WPF 应用程序的标记语言。这项技术正在成熟，有很多很棒的地方可以了解它。首先，有[LearnWPF](http://learnwpf.com/)和[DrWPF等网站](http://www.drwpf.com/)其中有一些非常棒的文章。其次，有[很多](https://rads.stackoverflow.com/amzn/click/com/0321374479)关于这个[主题](https://rads.stackoverflow.com/amzn/click/com/1590599551)的[优质](https://rads.stackoverflow.com/amzn/click/com/0596510373) [书籍](https://rads.stackoverflow.com/amzn/click/com/0672328917)。

所以，总而言之，一旦你选择了你的语言和技术，这条路实际上很容易。只需拿起一两本书，阅读一些博客，阅读一些代码示例……最重要的是……编写代码。不断写作，不断犯错，并不断从中学习。

作为最后一点...

> 换句话说，银光。如果你不想走 MS 路线，你可以看看 Adob​​e 的 Flash/Flex。Silverlight 和 Flash/Flex 都构建 RIA。我认为这是我们前进的方向。Office 之类的应用程序的日子屈指可数

我完全不同意。Silverlight 与 WPF 不同。Silverlight 是特定于 Web 的，并且仅具有 WPF 功能的一个子集。鉴于问题要求 Windows GUI 应用程序，Flash/Flex Rich Internet Apps 并不是一个合适的建议。我也不同意富客户端应用程序（例如办公室）的日子已经屈指可数了。

我希望这会有所帮助。祝你好运 ：）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-07T03:08:35.920

我不知道我是否称它为一个好的起点，但如果您想为未来做好准备，请查看完全为 Windows 的 GUI 编程而构建的[windows 演示基础](http://windowsclient.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T03:47:41.987

我第一次为 Windows 编写简单的 GUI 应用程序是使用 C# 和 Visual Studio。GUI 构建界面是一个简单的拖放交易，它根据潜在的用户操作生成框架方法。我只用它进行了相当基本的编程，但我想这将是一个很好的地方，可以开始学习基础知识并随着你的发展而扩展到更高级的功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-10-27T23:20:25.973

网上有很多Win32教程：

[http://www.zeusedit.com/forum/viewtopic.php?t=1218](http://www.zeusedit.com/forum/viewtopic.php?t=1218)

有很多编译器可供选择：

[http://www.zeusedit.com/forum/viewtopic.php?t=238](http://www.zeusedit.com/forum/viewtopic.php?t=238)

我还建议以 WinHelp 文件格式获取**Borland Win32 SDK文档：**

[http://www.zeusedit.com/forum/viewtopic.php?t=7](http://www.zeusedit.com/forum/viewtopic.php?t=7)

它只涵盖了 Win32 的基本知识，但在开始时，这会很有帮助，因为它比 MSDN 不那么令人生畏和臃肿。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-18T10:13:59.933

我永远不会走 Silverlight、Flash/Flex 或任何类似的路线。它看起来确实不错，但主要问题是运行它的引擎代码是完全封闭的，并由一家公司控制。以这两者的 64 位版本为例。如果出现一些新平台，您将无法将现有代码迁移到该平台。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-12T12:23:30.143

对于商业应用，Windows Forms 非常成熟。它提供了一条从为您自动生成大量内容到允许细粒度控制和滚动您自己的温和路径。那里有大量高质量的第三方控件和大量示例、文档等。很难遇到别人没有解决的问题。我强烈建议您获取一些 Win32 的背景知识（例如[Petzold](http://www.charlespetzold.com/pw5/index.html)），因为 WinForms 框架就在它之上。

我没有 WPF 经验，但从我看到的示例应用程序来看，对于那些界面将受益于更多图形隐喻的应用程序来说，它看起来是一个不错的选择。所以如果你在做一个银行应用程序，可能不值得额外的设计开销。但是，如果你正在做一个仓库管理应用程序，可以通过将漂亮的盒子放入漂亮的垃圾箱来改进它。

@StephenCox：对错误问题的错误答案。OP 正在询问桌面客户端应用程序，此外，WPF ！= Silverlight。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-12T13:26:07.160

作为一个简单的起点来了解“事件驱动”性质，基本上所有框架都是围绕[FLTK](http://www.fltk.org)创建的。

这里有一些快速入门视频[链接](http://seriss.com/people/erco/fltk-videos/)

对于专业用途，我推荐 Qt，价格昂贵但在商业环境中通常值得。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-12T13:59:12.820

由于您已经熟悉 C 和 C++，我建议您学习如何使用 Charles Petzold 的书编写简单的 Windows GUI 应用程序。它将让您基本了解 Windows 的工作原理。很高兴了解您看到的大多数东西都是一个窗口（例如，按钮就是一个窗口）并且这些窗口响应消息。不过，我不会花很多时间在这上面，如果你要选择 WPF，你不一定需要先做这件事。我只是觉得对这个有一个基本的了解是很好的。

最近在 .Net Rocks 上有一个不错的播客，名为[“Kate Gregory Develops in C++ for Vista！”](http://www.dotnetrocks.com/default.aspx?showNum=363) 在那里，她建议从现在开始的人不应该使用/学习 MFC（即使它最近已更新）。

至于为未来做准备，您需要学习 WPF，但它还没有完成，因此根据您要创建的客户端应用程序的种类，您可能需要学习 WinForms。大多数人还没有使用 WPF，所以现在是开始学习的好时机。我认为您会发现使用 C# 来学习它比使用 C++ 编写托管代码更容易。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2011-10-29T08:56:23.700

先把基础搞好。我发现的最好的教程是：[http ://winprog.org/tutorial/start.html](http://winprog.org/tutorial/start.html)

在那之后，虽然主页令人讨厌，但教程页面在内容和美学上都不错：[http ://www.tenouk.com/cplusmfcdotnet.html](http://www.tenouk.com/cplusmfcdotnet.html)

当然还有[MSDN](http://msdn.microsoft.com/en-us/library/aa751972%28v=vs.85%29.aspx)。

# c# - 对 ASP.NET 2.0 网页进行单元测试的最佳方法是什么？

> ID：4363
> 
> 赞同：39
> 
> 时间：2008-08-07T03:23:45.983
> 
> 标签：c#, asp.net, visual-studio, unit-testing

有什么建议么？在 C# 中使用 Visual Studio。

是否有任何特定的工具可以使用或方法来解决这个问题？

### 更新：

对不起，我应该更具体一点。我正在使用 ASP.Net 2.0，并且正在寻找更多类似 jUnit for Java 的工具。我看了一下 NUnit 和 NUnitAsp，看起来很有希望。而且我什至不知道 Visual Studio Pro 有一个测试套件，所以我将查看所有这些选项（我今年夏天刚刚开始使用 Visual Studio/Asp.net/C#）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-08-07T04:23:38.000

男孩，这是一个很笼统的问题。我会尽力而为，但要准备好看到我错过一英里。

假设

1.  您使用的是 ASP.NET，而不是普通的 ASP
2.  你并不是真的想测试你的网页，而是它们背后的**逻辑。**对实际的 .ASPX 页面进行单元测试是相当痛苦的，但是有框架可以做到这一点。 [NUnitAsp](http://nunitasp.sourceforge.net/)就是其中之一。

首先要做的是组织（或计划）您的代码，以便对其进行测试。当时最流行的两种设计模式似乎是 MVP 和 MVC。两者都将应用程序的**逻辑与****视图**分开，以便您可以在视图（网页）不妨碍您的情况下测试逻辑。

MVP 或 MVC 都会有效。MVC 的优势在于[几乎可以](http://www.asp.net/mvc/)使用 Microsoft 框架。

一旦您选择了鼓励可测试性的框架模式，您就需要使用单元测试工具。 [NUnit](http://www.nunit.org/)是一个很好的起点。Visual Studio Professional 有一个[内置的测试套件](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2008/bb385902(v=vs.90))，但 NUnit + [TestDrive.NET](http://www.testdriven.net/)也可以在 IDE 中运行。

这有点像霰弹枪的信息爆炸。我希望一些如果它击中。Pragmatic Bookshelf 有一[本涵盖该主题的好书](https://rads.stackoverflow.com/amzn/click/com/0974514020)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-10-21T20:35:51.353

这些框架对*集成*测试很有用，但它们不能提供单元测试，即测试与持久性、业务逻辑等隔离的视图。

对于Asp.Net Webforms 以及 MVC的*单元测试，您可以使用*[Ivonna](http://sm-art.biz/Ivonna.aspx)。例如，您可以模拟您的数据库访问并验证模拟的记录是否显示在数据网格中。或者，您可以模拟成员资格提供程序并测试登录场景，而无需导航到登录页面并输入您的凭据，就像集成测试一样。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-07T04:50:54.060

大约一年前有一个关于 Polymorphic Podcast 的截屏视频系列，它对 ASP.NET 中的 MVP 实现做了很好的介绍性演练。以这种方式实现，单元测试会更自然地到位。

[http://polymorphicpodcast.com/shows/mv-patterns/](http://polymorphicpodcast.com/shows/mv-patterns/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-23T01:10:22.030

[WatiN](http://watin.sourceforge.net/)是我发现的最好的。它集成到 Visual Studio 单元测试或 nunit 中，您可以在浏览器中执行几乎所有您需要的操作（单击链接、提交表单、查找文本/图像等），而且它是用 .net 编写的，因此您不需要安装 ruby​​（就像你为 watir 所做的那样，这是一个很棒的工具）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-28T02:20:33.743

[NUnit](https://nunit.org/)是适合您的方式。你可以在这里找到一些链接：

1.  [http://nunitasp.sourceforge.net/tutorial/](http://nunitasp.sourceforge.net/tutorial/)
2.  [Scott Hanselman 使用 Cassini 对 ASP.NET 页面、基类、控件和其他小部件进行 NUnit 单元测试](https://www.hanselman.com/blog/NUnitUnitTestingOfASPNETPagesBaseClassesControlsAndOtherWidgetryUsingCassiniASPNETWebMatrixVisualStudioWebDeveloper.aspx)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-28T02:26:00.750

看看[http://selenium.openqa.org/](http://selenium.openqa.org/)它提供了一种很好的自动化方式来构建挂钩到浏览器的单元测试。有一个不错的 Firefox 插件用于记录测试，并且可以使用几乎任何单元测试框架。上个月，我们在本地用户组会议上进行了演示/演示，看起来很棒。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-06-30T05:05:30.327

您最好的选择是将模型逻辑与表示分离，并使用 NUnit 或类似工具对模型进行彻底的单元测试。测试用户与网页的交互可能很繁琐。

如果您确实想对用户与网页的交互进行单元测试，那么一些上述工具（例如 waitn）似乎不错，除了我听说过的工具之外，还有[Selenium](http://seleniumhq.org/)

# php - 如何包含需要绝对路径的 PHP 文件？

> ID：4369
> 
> 赞同：97
> 
> 时间：2008-08-07T03:46:47.713
> 
> 标签：php

我有一个如下的目录结构；

> 脚本.php
> 
> inc/include1.php
> inc/include2.php
> 
> 对象
> /object1.php 对象/object2.php
> 
> 肥皂/soap.php

现在，我在`script.php`和中都使用了这些对象`/soap/soap.php`，我可以移动它们，但出于特定原因，我想要这样的目录结构。执行`script.php`包含路径`inc/include.php`时和执行`/soap/soap.php`时`../inc`，绝对路径有效，`/mnt/webdev/[project name]/inc/include1.php...`但如果我想将目录移动到其他位置，这是一个丑陋的解决方案。

那么有没有办法使用相对路径，或者以编程方式生成`"/mnt/webdev/[project name]/"`？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2008-08-07T04:20:47.647

这应该工作

```
$root = realpath($_SERVER["DOCUMENT_ROOT"]);

include "$root/inc/include1.php"; 
```

* * *

**编辑：**通过[aussieviking增加改进](https://stackoverflow.com/questions/4369/include-files-requiring-an-absolute-path#4388)

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-08-07T05:05:34.093

您可以使用相对路径。试试`__FILE__`。这是一个 PHP 常量，它总是返回它所在脚本的路径/文件名。所以，在 中`soap.php`，你可以这样做：

```
include dirname(__FILE__).'/../inc/include.php'; 
```

> 文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起，`__FILE__`始终包含一个绝对路径，符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。 [（来源）](http://us2.php.net/constants.predefined)

另一种解决方案是在 httpd.conf 或 .htaccess 文件中设置**包含路径。**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-07T04:25:22.473

看看[http://au.php.net/reserved.variables](http://au.php.net/reserved.variables)

我认为您正在寻找的变量是：`$_SERVER["DOCUMENT_ROOT"]`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-18T14:28:50.463

另一种完全不需要包含的处理方法是使用[自动加载](http://www.php.net/manual/en/language.oop5.autoload.php)功能。包括脚本所需的一切“以防万一”可能会妨碍性能。如果您的 include 都是类或接口定义，并且您希望仅在需要时加载它们，则可以`__autoload()`使用自己的代码重载该函数以找到适当的类文件并仅在调用时加载它。这是手册中的示例：

```
function __autoload($class_name) {
    require_once $class_name . '.php';
}

$obj  = new MyClass1();
$obj2 = new MyClass2(); 
```

只要您相应地设置了您的 include_path 变量，您就不需要再次包含类文件。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-08-07T04:04:55.103

您可以使用项目根目录的路径定义一个常量，然后将其放在路径的开头。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-09T22:49:56.777

另一个与 Kevin 相关的选项是 use `__FILE__`，而是从其中替换 php 文件名：

```
<?php

$docRoot = str_replace($_SERVER['SCRIPT_NAME'], '', __FILE__);
require_once($docRoot . '/lib/include.php');

?> 
```

我已经用了一段时间了。唯一的问题是有时你没有`$_SERVER['SCRIPT_NAME']`，但有时还有另一个类似的变量。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-02-10T19:00:40.330

我发现这很好用！

```
function findRoot() { 
    return(substr($_SERVER["SCRIPT_FILENAME"], 0, (stripos($_SERVER["SCRIPT_FILENAME"], $_SERVER["SCRIPT_NAME"])+1)));
} 
```

采用：

```
<?php

function findRoot() {
    return(substr($_SERVER["SCRIPT_FILENAME"], 0, (stripos($_SERVER["SCRIPT_FILENAME"], $_SERVER["SCRIPT_NAME"])+1)));
}

include(findRoot() . 'Post.php');
$posts = getPosts(findRoot() . 'posts_content');

include(findRoot() . 'includes/head.php');

for ($i=(sizeof($posts)-1); 0 <= $i; $i--) {
    $posts[$i]->displayArticle();
}

include(findRoot() . 'includes/footer.php');

?> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T19:20:00.933

我认为最好的方法是将您的包含放在您的 PHP 包含路径中。根据您的设置，有多种方法可以做到这一点。

然后你可以简单地参考

```
require_once 'inc1.php'; 
```

从任何文件内部，无论它是在您的包含文件中还是在您的 Web 可访问文件中，或任何级别的嵌套子目录中。

这允许您将包含文件放在 Web 服务器根目录之外，这是最佳实践。

例如

```
site directory
    html (web root)
        your web-accessible files
    includes
        your include files 
```

另外，查看 __autoload 以延迟加载类文件

[http://www.google.com/search?q=setting+php+include+path](http://www.google.com/search?q=setting+php+include+path)

[http://www.google.com/search?q=__autoload](http://www.google.com/search?q=__autoload)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-13T14:33:59.720

```
require(str_repeat('../',(substr_count(getenv('SCRIPT_URL'),'/')-1))."/path/to/file.php"); 
```

我使用这行代码。它回到站点树的“顶部”，然后转到所需的文件。

例如，假设我有这个文件树：

> domain.com/aaa/index.php
> domain.com/bbb/ccc/ddd/index.php
> domain.com/_resources/functions.php

我可以从任何地方包含functions.php文件，只需复制粘贴

```
require(str_repeat('../',(substr_count(getenv('SCRIPT_URL'),'/')-1))."/_resources/functions.php"); 
```

如果您需要多次使用此代码，您可以创建一个返回该`str_repeat('../',(substr_count(getenv('SCRIPT_URL'),'/')-1))`部分的函数。然后只需将此函数插入​​到您包含的第一个文件中。我有一个“initialize.php”文件，我包含在每个 php 页面的最顶部，其中包含此函数。下次我必须包含文件时，实际上我只是使用函数（命名`path_back`）：

```
require(path_back()."/_resources/another_php_file.php"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-08T23:17:12.273

> > @Flubba，这是否允许我在包含目录中有文件夹？平面包含目录让我做噩梦。因为整个对象目录应该在 inc 目录中。

哦，是的，绝对的。所以例如我们使用单层子文件夹，一般是：

```
require_once('library/string.class.php') 
```

在真正高流量的站点中，您需要小心依赖包含路径，因为 php 必须搜索当前目录，然后是包含路径上的所有目录，以查看您的文件是否存在，这可能会减慢如果你受到重创，事情就会发生。

因此，例如，如果您正在执行 MVC，则将应用程序目录的路径放在包含路径中，然后在表单中指定引用事物

```
'model/user.class'
'controllers/front.php' 
```

管他呢。

但一般来说，它只是让您在 PHP 中使用非常短的路径，可以在任何地方工作，而且它比所有 realpath 文档根目录更容易阅读。

其他人建议的那些基于脚本的替代方案的好处是它们可以在任何地方工作，即使是在共享的盒子上；设置包含路径需要更多的思考和努力，但正如我所提到的，您可以开始使用最酷的 __autoload。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-09T10:10:21.403

如果您要在应用程序的大多数文件中包含特定路径，请在根文件夹中创建一个全局变量。

```
define("APPLICATION_PATH", realpath(dirname(__FILE__) . '/../app'));
or 
define("APPLICATION_PATH", realpath(DIR(__FILE__) . '/../app')); 
```

现在，这个全局变量“ *APPLICATION_PATH* ”可用于包含所有文件，而不是每次包含新文件时调用 realpath()。

前任：

```
include(APPLICATION_PATH ."/config/config.ini"; 
```

希望能帮助到你 ;-）

# mysql - 如何找回我的 MySQL 用户名和密码？

> ID：4371
> 
> 赞同：176
> 
> 时间：2008-08-07T03:54:14.593
> 
> 标签：mysql

我丢失了我的 MySQL 用户名和密码。我该如何找回它？

* * *

## 回答 #1

> 赞同：196
> 
> 时间：2008-08-07T04:02:17.090

> 停止 MySQL 进程。
> 
> 使用 --skip-grant-tables 选项启动 MySQL 进程。
> 
> 使用 -u root 选项启动 MySQL 控制台客户端。

列出所有用户；

```
SELECT * FROM mysql.user; 
```

重设密码;

```
UPDATE mysql.user SET Password=PASSWORD('[password]') WHERE User='[username]'; 
```

* * *

但**不要**忘记

> 停止 MySQL 进程
> 
> 正常启动 MySQL 进程（即没有 --skip-grant-tables 选项）

当你完成时。否则，您的数据库的安全性可能会受到损害。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-08-07T04:54:27.937

不幸的是，您的用户密码无法找回。它已使用单向哈希进行哈希处理，如果您不知道该哈希是不可逆的。我建议使用上面的 Xenph Yan 并创建一个新的。

您还可以使用[手册](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)中的以下过程来重置 Windows 上任何 MySQL *root*帐户的密码：

1.  以管理员身份登录您的系统。
2.  如果 MySQL 服务器正在运行，请停止它。对于作为 Windows 服务运行的服务器，请转到服务管理器：

> 开始菜单 -> 控制面板 -> 管理工具 -> 服务

然后在列表中找到 MySQL 服务，并停止它。如果您的服务器没有作为服务运行，您可能需要使用任务管理器强制它停止。

3.  创建一个文本文件并将以下语句放入其中。将密码替换为您要使用的密码。

    ```
    UPDATE mysql.user SET Password=PASSWORD('MyNewPass') WHERE User='root';
    FLUSH PRIVILEGES; 
    ```

    *UPDATE*和*FLUSH*语句都必须写在一行上。*UPDATE*语句重置所有现有 root 帐户的密码，FLUSH*语句*告诉服务器将授权表重新加载到内存中。

4.  保存文件。对于此示例，该文件将命名为*C:\mysql-init.txt。*
5.  打开控制台窗口以进入命令提示符：

    > 开始菜单 -> 运行 -> cmd

6.  *使用特殊的--init-file*选项启动 MySQL 服务器：

    ```
    C:\> C:\mysql\bin\mysqld-nt --init-file = C:\mysql-init.txt 
    ```

    *如果您将 MySQL 安装到C:\mysql*以外的位置，请相应地调整命令。

    服务器在启动时执行由*--init-file*选项命名的文件的内容，更改每个*root*帐户密码。

    如果您希望服务器输出显示在控制台窗口而不是日志文件中，您还可以将*--console选项添加到命令中。*

    如果您使用 MySQL 安装向导安装 MySQL，您可能需要指定*--defaults-file*选项：

    ```
    C:\> "C:\Program Files\MySQL\MySQL Server 5.0\bin\mysqld-nt.exe" --defaults-file="C:\Program Files\MySQL\MySQL Server 5.0\my.ini" --init-file=C:\mysql-init.txt 
    ```

    可以使用服务管理器找到适当的*--defaults-file设置：*

    > 开始菜单 -> 控制面板 -> 管理工具 -> 服务

    在列表中找到 MySQL 服务，右键单击它，然后选择 Properties 选项。Path to executable 字段包含*--defaults-file*设置。

7.  服务器启动成功后，删除*C:\mysql-init.txt*。
8.  停止 MySQL 服务器，然后再次以正常模式重新启动它。如果您将服务器作为服务运行，请从 Windows 服务窗口启动它。如果您手动启动服务器，请使用您通常使用的任何命令。

您现在应该能够使用新密码以 root 身份连接到 MySQL。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2011-11-10T10:47:23.700

对此处最有用的答案的改进：

> 1] 无需重启 mysql 服务器
> 2] 连接到网络的 MySQL 服务器的安全问题

无需重新启动 MySQL 服务器。

`FLUSH PRIVILEGES;`在更新 mysql.user 语句后使用密码更改。

> FLUSH 语句告诉服务器将授权表重新加载到内存中，以便它注意到密码更改。

这`--skip-grant-options`使任何人都可以在没有密码和所有特权的情况下进行连接。因为这是不安全的，你可能想要

> 将*--skip-grant-tables*与*--skip-networking*结合使用以防止远程客户端连接。

来自：参考：[resetting-permissions-generic](http://dev.mysql.com/doc/refman/5.6/en/resetting-permissions.html#resetting-permissions-generic)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-03-10T10:00:15.990

## 无需停机即可完成

在终端中运行以下命令以连接到 DBMS（您需要 root 访问权限）：

```
sudo mysql -u root -p; 
```

运行目标用户的更新密码（对于我的示例用户名是`mousavi`，它的密码必须是`123456`）：

```
UPDATE mysql.user SET authentication_string=PASSWORD('123456') WHERE user='mousavi'; 
```

此时您需要执行刷新以应用更改：

```
FLUSH PRIVILEGES; 
```

完毕！您在没有任何停止或重新启动 mysql 服务的情况下完成了它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-11-03T18:47:10.167

虽然您无法在不使用暴力破解的情况下直接恢复 MySQL 密码，但可能还有另一种方法 - 如果您使用 MySQL Workbench 连接到数据库，并将凭据保存到“保险库”，那么您就是黄金。

在 Windows 上，凭据存储在**%APPDATA%\MySQL\Workbench\workbench_user_data.dat - 使用**[CryptProtectData](https://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)加密（没有任何额外的熵）。解密很容易：

```
std::vector<unsigned char> decrypt(BYTE *input, size_t length) {
    DATA_BLOB inblob { length, input };
    DATA_BLOB outblob;

    if (!CryptUnprotectData(&inblob, NULL, NULL, NULL, NULL, CRYPTPROTECT_UI_FORBIDDEN, &outblob)) {
            throw std::runtime_error("Couldn't decrypt");
    }

    std::vector<unsigned char> output(length);
    memcpy(&output[0], outblob.pbData, outblob.cbData);

    return output;
} 
```

或者，您可以查看此[DonationCoder 线程](https://www.donationcoder.com/forum/index.php?topic=41860.msg391762#msg391762)以获取快速而肮脏的实现的源代码 + 可执行文件。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-01-22T11:36:35.247

如果您对运行 mysql 的服务器具有 root 访问权限，则应使用此命令停止 mysql 服务器

```
sudo service mysql stop 
```

现在使用这个命令启动 mysql

```
sudo /usr/sbin/mysqld --skip-grant-tables  --skip-networking & 
```

现在您可以使用登录到 mysql

```
sudo mysql
FLUSH PRIVILEGES;
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('MyNewPass'); 
```

完整的说明可以在这里找到[http://www.techmatterz.com/recover-mysql-root-password/](http://www.techmatterz.com/recover-mysql-root-password/)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-12-02T08:25:57.393

使用现有用户从 windows cmd 登录 MySql：

> > mysql -u 用户名 -p
> > 输入密码：****

然后运行以下命令：

```
mysql> SELECT * FROM mysql.user; 
```

之后为相应用户复制加密的 md5 密码，并且在网络上有几个在线密码解密应用程序可用。使用此解密密码并在下次登录时使用此密码。或使用流动命令更新用户密码：

```
mysql> UPDATE mysql.user SET Password=PASSWORD('[password]') WHERE User='[username]'; 
```

然后使用新密码和用户登录。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-30T15:04:51.237

如果您碰巧设置了 ODBC，则可以从 ODBC 配置文件中获取密码。这在 Linux 的 /etc/odbc.ini 和 Windows 注册表中的 Software/ODBC 文件夹中（有几个 - 可能需要一些搜索）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-23T05:19:31.553

保存文件。对于此示例，该文件将命名为 C:\mysql-init.txt。它要求保存文件的管理权限

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-06-04T22:49:04.340

尽管对操作问题的严格、合乎逻辑、计算机科学的解释是要求**“**我如何检索我的 MySQL 用户名”**和“密码”——我认为解决****OR**解释可能对某人有用。换句话说 ...

1) 如何检索我的 MySQL 用户名？

**或者**

2) 密码

后一种情况似乎已经得到充分解决，所以我不会打扰它。以下是单独解决“我如何检索我的 MySQL 用户名”案例的解决方案。嗨。

要查找您的 mysql 用户名，请从 mysql shell 运行以下命令...

从 mysql.user 中选择用户；

它将打印所有 mysql 用户的表。

# sql - 删除名称以某个字符串开头的所有表

> ID：4393
> 
> 赞同：168
> 
> 时间：2008-08-07T04:41:37.713
> 
> 标签：sql, sql-server, dynamic-sql

如何删除名称以给定字符串开头的所有表？

我认为这可以通过一些动态 SQL 和`INFORMATION_SCHEMA`表来完成。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2008-08-07T04:53:29.857

如果数据库中有多个所有者，您可能需要修改查询以包含所有者。

```
DECLARE @cmd varchar(4000)
DECLARE cmds CURSOR FOR
SELECT 'drop table [' + Table_Name + ']'
FROM INFORMATION_SCHEMA.TABLES
WHERE Table_Name LIKE 'prefix%'

OPEN cmds
WHILE 1 = 1
BEGIN
    FETCH cmds INTO @cmd
    IF @@fetch_status != 0 BREAK
    EXEC(@cmd)
END
CLOSE cmds;
DEALLOCATE cmds 
```

这比使用生成脚本加运行的两步方法更干净。但是脚本生成的一个优点是它使您有机会在实际运行之前查看将要运行的全部内容。

我知道如果我要针对生产数据库执行此操作，我会尽可能小心。

**编辑**代码示例已修复。

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2008-08-07T04:44:48.283

```
SELECT 'DROP TABLE "' + TABLE_NAME + '"' 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE '[prefix]%' 
```

这将生成一个脚本。

添加子句以在删除之前检查表的存在：

```
SELECT 'IF OBJECT_ID(''' +TABLE_NAME + ''') IS NOT NULL BEGIN DROP TABLE [' + TABLE_NAME + '] END;' 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE '[prefix]%' 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-02-10T08:04:44.137

这将使您按外键顺序获取表，并避免删除一些由 SQL Server 创建的表。该`t.Ordinal`值会将表分割成依赖层。

```
WITH TablesCTE(SchemaName, TableName, TableID, Ordinal) AS
(
    SELECT OBJECT_SCHEMA_NAME(so.object_id) AS SchemaName,
        OBJECT_NAME(so.object_id) AS TableName,
        so.object_id AS TableID,
        0 AS Ordinal
    FROM sys.objects AS so
    WHERE so.type = 'U'
        AND so.is_ms_Shipped = 0
        AND OBJECT_NAME(so.object_id)
        LIKE 'MyPrefix%'

    UNION ALL
    SELECT OBJECT_SCHEMA_NAME(so.object_id) AS SchemaName,
        OBJECT_NAME(so.object_id) AS TableName,
        so.object_id AS TableID,
        tt.Ordinal + 1 AS Ordinal
    FROM sys.objects AS so
        INNER JOIN sys.foreign_keys AS f
            ON f.parent_object_id = so.object_id
                AND f.parent_object_id != f.referenced_object_id
        INNER JOIN TablesCTE AS tt
            ON f.referenced_object_id = tt.TableID
    WHERE so.type = 'U'
        AND so.is_ms_Shipped = 0
        AND OBJECT_NAME(so.object_id)
        LIKE 'MyPrefix%'
)
SELECT DISTINCT t.Ordinal, t.SchemaName, t.TableName, t.TableID
FROM TablesCTE AS t
    INNER JOIN
    (
        SELECT
            itt.SchemaName AS SchemaName,
            itt.TableName AS TableName,
            itt.TableID AS TableID,
            Max(itt.Ordinal) AS Ordinal
        FROM TablesCTE AS itt
        GROUP BY itt.SchemaName, itt.TableName, itt.TableID
    ) AS tt
        ON t.TableID = tt.TableID
            AND t.Ordinal = tt.Ordinal
ORDER BY t.Ordinal DESC, t.TableName ASC 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-21T11:31:56.173

在 Oracle XE 上这有效：

```
SELECT 'DROP TABLE "' || TABLE_NAME || '";'
FROM USER_TABLES
WHERE TABLE_NAME LIKE 'YOURTABLEPREFIX%' 
```

或者，如果您想**删除约束并释放空间**，请使用以下命令：

```
SELECT 'DROP TABLE "' || TABLE_NAME || '" cascade constraints PURGE;'
FROM USER_TABLES
WHERE TABLE_NAME LIKE 'YOURTABLEPREFIX%' 
```

这将产生一堆`DROP TABLE cascade constraints PURGE`语句......

为了`VIEWS`使用这个：

```
SELECT 'DROP VIEW "' || VIEW_NAME || '";'
FROM USER_VIEWS
WHERE VIEW_NAME LIKE 'YOURVIEWPREFIX%' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-24T12:19:15.197

这是我的解决方案：

```
SELECT CONCAT('DROP TABLE `', TABLE_NAME,'`;') 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE 'TABLE_PREFIX_GOES_HERE%'; 
```

当然，您需要`TABLE_PREFIX_GOES_HERE`用您的前缀替换。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-06-08T16:33:49.187

```
EXEC sp_MSforeachtable 'if PARSENAME("?",1) like ''%CertainString%'' DROP TABLE ?' 
```

**编辑：**

sp_MSforeachtable 未记录，因此不适合生产，因为它的行为可能因 MS_SQL 版本而异。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-07-28T06:14:25.763

当我在寻找 mysql 语句以删除所有基于 @Xenph Yan 的 WordPress 表时，我看到了这篇文章，这就是我最终所做的：

```
SELECT CONCAT(  'DROP TABLE `', TABLE_NAME,  '`;' ) AS query
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_NAME LIKE  'wp_%' 
```

这将为您提供所有以 wp_ 开头的表的删除查询集

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-10-10T02:31:42.060

```
CREATE PROCEDURE usp_GenerateDROP
    @Pattern AS varchar(255)
    ,@PrintQuery AS bit
    ,@ExecQuery AS bit
AS
BEGIN
    DECLARE @sql AS varchar(max)

    SELECT @sql = COALESCE(@sql, '') + 'DROP TABLE [' + TABLE_NAME + ']' + CHAR(13) + CHAR(10)
    FROM INFORMATION_SCHEMA.TABLES
    WHERE TABLE_NAME LIKE @Pattern

    IF @PrintQuery = 1 PRINT @sql
    IF @ExecQuery = 1 EXEC (@sql)
END 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-08-07T04:53:09.483

[Xenph Yan](https://stackoverflow.com/users/264/xenph-yan)的回答比我的要干净得多，但这里还是我的。

```
DECLARE @startStr AS Varchar (20)
SET @startStr = 'tableName'

DECLARE @startStrLen AS int
SELECT @startStrLen = LEN(@startStr)

SELECT 'DROP TABLE ' + name FROM sysobjects
WHERE type = 'U' AND LEFT(name, @startStrLen) = @startStr 
```

只需更改`tableName`为您要搜索的字符。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-08-15T14:47:04.680

这对我有用。

```
DECLARE @sql NVARCHAR(MAX) = N'';

SELECT @sql += '
DROP TABLE ' 
    + QUOTENAME(s.name)
    + '.' + QUOTENAME(t.name) + ';'
    FROM sys.tables AS t
    INNER JOIN sys.schemas AS s
    ON t.[schema_id] = s.[schema_id] 
    WHERE t.name LIKE 'something%';

PRINT @sql;
-- EXEC sp_executesql @sql; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-06-24T17:42:23.367

```
select 'DROP TABLE ' + name from sysobjects
where type = 'U' and sysobjects.name like '%test%' 
```

-- test 是表名

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-01T14:16:29.303

```
SELECT 'if object_id(''' + TABLE_NAME + ''') is not null begin drop table "' + TABLE_NAME + '" end;' 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE '[prefix]%' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-16T01:05:02.273

我不得不对 Xenph Yan 的回答做一点推导，我怀疑是因为我的表不在默认模式中。

```
SELECT 'DROP TABLE Databasename.schema.' + TABLE_NAME 
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_NAME LIKE 'strmatch%' 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-06T11:21:10.363

如果是临时表，您可能想尝试

```
SELECT 'DROP TABLE "' + t.name + '"' 
FROM tempdb.sys.tables t
WHERE t.name LIKE '[prefix]%' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-01-14T12:00:05.730

我想发布我的解决方案建议，该解决方案基于通配符（例如“table_20210114”）删除（不仅仅是生成和选择删除命令）超过特定天数的所有表。

```
DECLARE 
    @drop_command NVARCHAR(MAX) = '',
    @system_time date,
    @table_date nvarchar(8),
    @older_than int = 7

Set @system_time = (select getdate() - @older_than)
Set @table_date = (SELECT CONVERT(char(8), @system_time, 112))

SELECT @drop_command += N'DROP TABLE ' + QUOTENAME(SCHEMA_NAME(schema_id)) + '.' + QUOTENAME([Name]) + ';'
FROM <your_database_name>.sys.tables
WHERE [Name] LIKE 'table_%' AND RIGHT([Name],8) < @table_date

SELECT @drop_command

EXEC sp_executesql @drop_command 
```

# .net-3.5 - Where can I get the Windows Workflow "wca.exe" application?

> ID：4416
> 
> 赞同：4
> 
> 时间：2008-08-07T05:13:31.020
> 
> 标签：.net-3.5

I am walking through the MS Press Windows Workflow Step-by-Step book and in chapter 8 it mentions a tool with the filename "wca.exe". This is supposed to be able to generate workflow communication helper classes based on an interface you provide it. I can't find that file. I thought it would be in the latest .NET 3.5 SDK, but I just downloaded and fully installed, and it's not there. Also, some MSDN forum posts had links posted that just go to 404s. So, where can I find wca.exe?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-07T05:40:18.733

Should be part of the .NET 3 SDK (and later version as well). If you've already installed this, the path might look something like

C:\Program Files\Microsoft SDKs\Windows\v6.0\Bin\wca.exe

More info on [Guy Burstein's blog](http://blogs.microsoft.co.il/blogs/bursteg/archive/2006/12/24/wca.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T05:42:30.930

On my machine, with Visual Studio 2008 installed, it's in C:\Program Files\Microsoft SDKs\Windows\v6.0A\bin

# ruby - 如何从代理 (ISA-NTLM) 后面更新 Ruby Gems

> ID：4418
> 
> 赞同：236
> 
> 时间：2008-08-07T05:21:16.807
> 
> 标签：ruby, proxy, rubygems, ironruby

我后面的防火墙以仅 NTLM 模式运行 Microsoft ISA 服务器。哈希是否有人成功通过 Ruby SSPI gem 或其他方法安装/更新他们的 Ruby gem？

...还是我只是懒惰？

注意：rubysspi-1.2.4 不起作用。

这也适用于 IronRuby 项目的一部分“igem”

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2010-11-15T17:45:16.983

对于 Windows 操作系统，我使用 Fiddler 来解决这个问题。

1.  从 www.fiddler2.com 安装/运行 Fiddler
2.  运行宝石：

    ```
    $ gem install --http-proxy http://localhost:8888 $gem_name 
    ```

* * *

## 回答 #2

> 赞同：217
> 
> 时间：2008-08-07T05:49:00.557

我无法从命令行开关让我的工作，但我已经能够通过设置我的`HTTP_PROXY`环境变量来做到这一点。（请注意，案例似乎很重要）。我有一个批处理文件，其中有这样一行：

```
SET HTTP_PROXY=http://%USER%:%PASSWORD%@%SERVER%:%PORT% 
```

在我到达这条线之前，我设置了四个引用变量。例如，如果我的用户名是“wolfbyte”，我的密码是“secret”，而我的代理名为“pigsy”并在端口 8080 上运行：

```
SET HTTP_PROXY=http://wolfbyte:secret@pigsy:8080 
```

您可能需要小心管理它，因为它会将您的密码以纯文本形式存储在机器的会话中，但我认为这应该不是什么大问题。

* * *

## 回答 #3

> 赞同：130
> 
> 时间：2012-03-26T03:35:24.760

这完全有效：

```
gem install --http-proxy http://COMPANY.PROXY.ADDRESS $gem_name 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-08-31T21:59:45.087

我在工作中一直在使用 cntlm ( [http://cntlm.sourceforge.net/](http://cntlm.sourceforge.net/) )。配置与ntlmaps 非常相似。

*   gem install --http-proxy [http://localhost:3128](http://localhost:3128) _name_of_gem_

效果很好，还允许我将我的 Ubuntu 机器连接到 ISA 代理。

查看[http://cntlm.wiki.sourceforge.net/](http://cntlm.wiki.sourceforge.net/)了解更多信息

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2012-08-01T23:32:44.667

我尝试了其中一些解决方案，但都没有奏效。我终于找到了一个适合我的解决方案：

```
gem install -p http://proxy_ip:proxy_port rails 
```

使用`-p`参数传递代理。我正在使用 Gem 版本 1.9.1。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2015-12-22T09:14:35.283

创建一个 .gemrc 文件（在 /etc/gemrc 或 ~/.gemrc 中，或者例如在 /opt/chef/embedded/etc/gemrc 中使用 chef gem），其中包含：

```
http_proxy: http://proxy:3128 
```

然后你可以`gem install`像往常一样。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2014-04-09T08:48:40.020

这完美地解决了我的问题：

```
gem install -p http://proxy_ip:proxy_port compass 
```

您可能需要向其中添加您的用户名和密码：

```
gem install -p http://[username]:[password]@proxy_ip:proxy_port compass 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2012-02-21T17:26:31.790

如果您在通过代理进行身份验证时遇到问题，请务必按照以下格式设置环境变量：

```
set HTTP_PROXY=some.proxy.com
set HTTP_PROXY_USER=user
set HTTP_PROXY_PASS=password 
```

该`user:password@`语法似乎不起作用，并且在 Stack Overflow 和各种论坛帖子上也有一些命名错误的环境变量。

另请注意，您的 gem 可能需要一段时间才能开始下载。起初我认为它不起作用，但有了一点耐心，他们开始按预期下载。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2019-06-17T18:50:23.833

快速回答：为安装/更新添加带有参数的代理配置

```
gem install --http-proxy http://host:port/ package_name

gem update --http-proxy http://host:port/ package_name 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2011-09-06T05:04:51.830

我尝试了上述所有解决方案，但都没有奏效。如果您使用的是 linux/macOS，我强烈建议您在 ssh 隧道上使用 tsocks。为了使此设置正常工作，您需要一台可以通过 ssh 登录的机器，此外还安装了一个名为 tsocks 的程序。

这里的想法是通过 SSH（socks5 代理）创建一个动态隧道。然后我们将 tsocks 配置为使用此隧道并启动我们的应用程序，在本例中：

```
tsocks gem install ... 
```

或考虑到 rails 3.0：

```
tsocks bundle install 
```

可以在以下位置找到更详细的指南：

[http://blog.byscripts.info/2011/04/bypass-a-proxy-with-ssh-tunnel-and-tsocks-under-ubuntu/](http://blog.byscripts.info/2011/04/bypass-a-proxy-with-ssh-tunnel-and-tsocks-under-ubuntu/)

尽管是为 Ubuntu 编写的，但该过程应该适用于所有基于 Unix 的机器。用于 Windows 的 tsocks 的替代品是 FreeCap ( [http://www.freecap.ru/eng/](http://www.freecap.ru/eng/) )。Windows 上可行的 SSH 客户端称为 putty。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2009-03-10T10:33:12.350

关于这个主题的帖子比比皆是，为了帮助其他人节省尝试不同解决方案的时间，这是我数小时修补的最终结果。

目前互联网上的三个解决方案是：rubysspi apserver cntlm

rubysspi 仅适用于 Windows 机器 AFAIK，因为它依赖于 Win32Api 库。因此，如果您在尝试通过代理运行的 Windows 机器上，这就是您的解决方案。如果您使用的是 Linux 发行版，那么您就不走运了。

apserver 似乎是一个死项目。我看到的帖子中列出的链接指向 sourceforge 上的 404 页面。我在 sourceforge 上搜索“apserver”什么也没返回。

我看到的 cntlm 的 sourceforge 链接重定向到[http://cntlm.awk.cz/](http://cntlm.awk.cz/)，但是超时了。在 sourceforge 上搜索会出现这个链接，它确实有效：http: [//sourceforge.net/projects/cntlm/](http://sourceforge.net/projects/cntlm/)

下载并配置 cntlm 后，我设法通过代理安装了一个 gem，所以这似乎是 Linux 发行版的最佳解决方案。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-08-07T05:25:54.050

一种解决方法是在本地计算机上安装[http://web.archive.org/web/20060913093359/http://apserver.sourceforge.net:80/](http://web.archive.org/web/20060913093359/http://apserver.sourceforge.net:80/)，对其进行配置并通过此代理运行 gems。

*   安装：只需下载 apserver 097（而不是实验性的 098！）并解压。
*   配置：编辑 server.cfg 文件并将 MS 代理的值放入`PARENT_PROXY`和`PARENT_PROXY_PORT`. 输入 DOMAIN 和 USER 的值。将 PASSWORD 留空（冒号后没有任何内容）- 启动它时会提示您。
*   运行 apserver：`cd aps097; python main.py`
*   运行宝石：`gem install—http-proxy http://localhost:5865/ library`

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2012-11-26T11:23:00.037

我在代理后面工作，只是通过直接从[http://rubygems.org](http://rubygems.org)下载安装了 SASS 。

然后我跑了`sudo gem install [path/to/downloaded/gem/file]`。我不能说这适用于所有宝石，但它可能对某些人有所帮助。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-10-25T17:50:45.547

如果您在 *nix 系统上，请使用以下命令：

```
export http_proxy=http://${proxy.host}:${port}
export https_proxy=http://${proxy.host}:${port} 
```

然后尝试：

```
gem install ${gem_name} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2015-01-13T11:35:47.453

这在 Windows 框中对我有用：

```
set HTTP_PROXY=http://server:port
set HTTP_PROXY_USER=username
set HTTP_PROXY_PASS=userparssword
set HTTPS_PROXY=http://server:port
set HTTPS_PROXY_USER=username
set HTTPS_PROXY_PASS=userpassword 
```

我有一个包含这些行的批处理文件，可在需要时用于设置环境值。

就我而言，诀窍是`HTTPS_PROXY`套路。没有它们，我总是会收到 407 代理身份验证错误。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2011-11-04T07:46:25.447

rubysspi-1.3.1 使用此页面中的说明在 Windows 7 上为我工作：

[http://www.stuartellis.eu/articles/installing-ruby/](http://www.stuartellis.eu/articles/installing-ruby/)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-05-16T06:27:13.953

与其编辑批处理文件（对于其他 Ruby gem，例如 Bundler，您可能必须这样做），最好只执行一次，然后正确执行。

在 Windows 上，在我的公司代理后面，我所要做的就是将`HTTP_PROXY`环境变量添加到我的系统中。

1.  开始 -> 右键单击​​计算机 -> 属性
2.  选择“高级系统设置”
3.  单击高级 -> 环境变量
4.  创建一个名为“ `HTTP_PROXY`”的新系统变量，并将值设置为您的代理服务器
5.  重新启动或注销并重新登录

根据您的身份验证要求，该`HTTP_PROXY`值可以很简单：

```
http://proxy-server-name 
```

或者像其他人指出的那样更复杂

```
http://username:password@proxy-server-name:port-number 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2014-06-06T16:52:33.527

如果你想使用 SOCKS5 代理，你可以试试 ruby​​gems-socksproxy [https://github.com/gussan/rubygems-socksproxy](https://github.com/gussan/rubygems-socksproxy)。

它适用于我在 OSX 10.9.3 上。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2014-08-11T13:27:13.350

如果在代理之后，您可以导航到[Ruby 下载](http://rubygems.org/gems/rubygems-update)，单击下载，这会将指定的更新（或 Gem）下载到所需的位置。

接下来，通过 Ruby 命令行，使用以下命令导航到下载的位置：`pushd [directory]`

例如：`pushd D:\Setups`

然后运行以下命令：`gem install [update name] --local`

例如：`gem install rubygems-update --local`。

在 Windows 7 上使用 Ruby 更新版本 2.4.1 进行测试。

要检查使用以下命令：`ruby -v`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-04-03T14:10:52.447

对于任何使用 SSH 隧道的人；您可以创建`gem`使用 SOCKS 代理的命令版本：

1.  安装`socksify`（`gem install socksify`您需要能够在没有代理的情况下执行此步骤，至少）
2.  复制现有的 gem exe

    ```
    cp $(command which gem) /usr/local/bin/proxy_gem 
    ```

3.  在您最喜欢的编辑器中打开它并将其添加到顶部（在 shebang 之后）

    ```
    require 'socksify'

    if ENV['SOCKS_PROXY']
      require 'socksify'
      host, port = ENV['SOCKS_PROXY'].split(':')
      TCPSocket.socks_server = host || 'localhost'
      TCPSocket.socks_port = port.to_i || 1080
    end 
    ```

4.  设置你的隧道

    ```
    ssh -D 8123 -f -C -q -N user@proxy 
    ```

5.  使用 proxy_gem 运行 gem 命令

    ```
    SOCKS_PROXY=localhost:8123 proxy_gem push mygem 
    ```

# php - 如何从 PHP 轻松使用 Web 服务

> ID：4430
> 
> 赞同：61
> 
> 时间：2008-08-07T05:48:33.570
> 
> 标签：php, web-services, visual-studio, wsdl

是否有任何 PHP 工具可用于生成代码以使用基于其[WSDL的](http://en.wikipedia.org/wiki/Web_Services_Description_Language)[Web 服务](http://en.wikipedia.org/wiki/Web_service)？类似于在 Visual Studio 中单击“添加 Web 引用”或对 Java 执行相同操作的 Eclipse 插件。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2008-08-23T18:54:21.680

在 PHP 5 中，您可以使用WSDL 上的[SoapClient](http://www.php.net/manual/en/ref.soap.php)来调用 Web 服务函数。[例如](http://www.php.net/manual/en/soapclient.construct.php)：

```
$client = new SoapClient("some.wsdl"); 
```

$client 现在是一个对象，它具有 some.wsdl 中定义的类方法。因此，如果 WSDL 中有一个名为 getTime 的方法，那么您只需调用：

```
$result = $client->getTime(); 
```

结果将（显然）在 $result 变量中。您可以使用 __getFunctions 方法返回所有可用方法的列表。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-08-15T18:36:14.227

我在[wsdl2php](https://github.com/jbarciauskas/wsdl2php)方面取得了巨大的成功。它将自动为您的 Web 服务中使用的所有对象和方法创建包装类。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-08-13T13:54:10.897

我过去使用过[NuSOAP](https://sourceforge.net/projects/nusoap/)。我喜欢它，因为它只是一组您可以包含的 PHP 文件。无需在 Web 服务器上安装任何内容，也无需更改配置选项。它也有 WSDL 支持，这是一个额外的好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-07-26T09:17:30.267

本文[介绍](http://4rapiddev.com/php/call-web-service-wsdl-example/)如何使用 PHP SoapClient 调用 api Web 服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T07:17:55.340

好吧，这些功能特定于您用于以这些语言进行开发的工具。

如果（例如）您使用记事本编写代码，您将不会拥有这些工具。所以，也许你应该问你正在使用的工具的问题。

对于 PHP：[http ://webservices.xml.com/pub/a/ws/2004/03/24/phpws.html](http://webservices.xml.com/pub/a/ws/2004/03/24/phpws.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-09T09:08:35.363

嗨我从这个网站得到这个：[http ://forums.asp.net/t/887892.aspx?Consume+an+ASP+NET+Web+Service+with+PHP](http://forums.asp.net/t/887892.aspx?Consume+an+ASP+NET+Web+Service+with+PHP)

Web 服务具有`Add`采用两个参数的方法：

```
<?php
    $client = new SoapClient("http://localhost/csharp/web_service.asmx?wsdl");

     print_r( $client->Add(array("a" => "5", "b" =>"2")));
?> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-06T09:10:03.407

假设您获得了以下内容：

```
<x:Envelope xmlns:x="http://schemas.xmlsoap.org/soap/envelope/" xmlns:int="http://thesite.com/">
    <x:Header/>
    <x:Body>
        <int:authenticateLogin>
            <int:LoginId>12345</int:LoginId>
        </int:authenticateLogin>
    </x:Body>
</x:Envelope> 
```

和

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <authenticateLoginResponse xmlns="http://thesite.com/">
            <authenticateLoginResult>
                <RequestStatus>true</RequestStatus>
                <UserName>003p0000006XKX3AAO</UserName>
                <BearerToken>Abcdef1234567890</BearerToken>
            </authenticateLoginResult>
        </authenticateLoginResponse>
    </s:Body>
</s:Envelope> 
```

假设访问[http://thesite.com/](http://thesite.com/)表示 WSDL 地址为： [http ://thesite.com/PortalIntegratorService.svc?wsdl](http://thesite.com/PortalIntegratorService.svc?wsdl)

```
$client = new SoapClient('http://thesite.com/PortalIntegratorService.svc?wsdl');
$result = $client->authenticateLogin(array('LoginId' => 12345));
if (!empty($result->authenticateLoginResult->RequestStatus)
    && !empty($result->authenticateLoginResult->UserName)) {
    echo 'The username is: '.$result->authenticateLoginResult->UserName;
} 
```

如您所见，虽然 LoginId 值可以更改，但在 PHP 代码中使用了 XML 中指定的项目。

# c# - CSV 字符串处理

> ID：4432
> 
> 赞同：20
> 
> 时间：2008-08-07T05:49:04.253
> 
> 标签：c#, csv

创建[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)字符串的典型方法（伪代码）：

1.  创建一个 CSV 容器对象（如 C# 中的 StringBuilder）。
2.  循环遍历要添加的字符串，并在每个字符串后附加一个逗号。
3.  在循环之后，删除最后一个多余的逗号。

代码示例：

```
public string ReturnAsCSV(ContactList contactList)
{
    StringBuilder sb = new StringBuilder();
    foreach (Contact c in contactList)
    {
        sb.Append(c.Name + ",");
    }

    sb.Remove(sb.Length - 1, 1);
    //sb.Replace(",", "", sb.Length - 1, 1)

    return sb.ToString();
} 
```

我喜欢通过检查容器是否为空来添加逗号的想法，但这是否意味着需要更多处理，因为它需要在每次出现时检查字符串的长度？

我觉得应该有一种更简单/更清洁/更有效的方法来删除最后一个逗号。有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-08-07T05:56:15.957

您可以使用[LINQ to Objects](http://en.wikipedia.org/wiki/Language_Integrated_Query#LINQ_to_Objects)：

```
string [] strings = contactList.Select(c => c.Name).ToArray();
string csv = string.Join(",", strings); 
```

显然，这一切都可以在一条线上完成，但两条线就更清楚了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-09T10:47:26.860

您的代码并不真正符合[完整的 CSV 格式](http://www.creativyst.com/Doc/Articles/CSV/CSV01.htm)。如果您只是从没有逗号、前导/尾随空格、制表符、换行符或引号的数据生成 CSV，那应该没问题。但是，在大多数现实世界的数据交换场景中，您确实需要完整的实现。

要生成正确的 CSV，您可以使用以下命令：

```
public static String EncodeCsvLine(params String[] fields)
{
    StringBuilder line = new StringBuilder();

    for (int i = 0; i < fields.Length; i++)
    {
        if (i > 0)
        {
            line.Append(DelimiterChar);
        }

        String csvField = EncodeCsvField(fields[i]);
        line.Append(csvField);
    }

    return line.ToString();
}

static String EncodeCsvField(String field)
{
    StringBuilder sb = new StringBuilder();
    sb.Append(field);

    // Some fields with special characters must be embedded in double quotes
    bool embedInQuotes = false;

    // Embed in quotes to preserve leading/tralining whitespace
    if (sb.Length > 0 && 
        (sb[0] == ' ' || 
         sb[0] == '\t' ||
         sb[sb.Length-1] == ' ' || 
         sb[sb.Length-1] == '\t' ))
    {
        embedInQuotes = true;
    }

    for (int i = 0; i < sb.Length; i++)
    {
        // Embed in quotes to preserve: commas, line-breaks etc.
        if (sb[i] == DelimiterChar || 
            sb[i]=='\r' || 
            sb[i]=='\n' || 
            sb[i] == '"') 
        { 
            embedInQuotes = true;
            break;
        }
    }

    // If the field itself has quotes, they must each be represented 
    // by a pair of consecutive quotes.
    sb.Replace("\"", "\"\"");

    String rv = sb.ToString();

    if (embedInQuotes)
    {
        rv = "\"" + rv + "\"";
    }

    return rv;
} 
```

可能不是世界上最高效的代码，但它已经过测试。与快速示例代码相比，现实世界很糟糕:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-07T12:00:51.553

别忘了我们的老朋友“for”。它不像 foreach 那样好看，但它具有能够从第二个元素开始的优势。

```
public string ReturnAsCSV(ContactList contactList)
{
    if (contactList == null || contactList.Count == 0)
        return string.Empty;

    StringBuilder sb = new StringBuilder(contactList[0].Name);

    for (int i = 1; i < contactList.Count; i++)
    {
        sb.Append(",");
        sb.Append(contactList[i].Name);
    }

    return sb.ToString();
} 
```

您还可以将第二个 Append 包装在一个“if”中，以测试 Name 属性是否包含双引号或逗号，如果是，则适当地转义它们。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-08-20T02:14:42.013

**为什么不使用其中一个开源 CSV 库呢？**

我知道对于看起来如此简单的事情来说这听起来有点矫枉过正，但正如你可以从评论和代码片段中看出的那样，这不仅仅是看起来那么简单。除了处理完整的 CSV 合规性之外，您最终还需要处理读取和写入 CSV ......并且您可能需要文件操作。

我之前在我的一个项目中使用过[Open CSV](http://opencsv.sourceforge.net/)（但还有很多其他项目可供选择）。这当然让我的生活更轻松。;)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T05:54:00.157

您可以改为在 foreach 中添加逗号作为第一件事。

`if (sb.Length > 0) sb.Append(",");`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-08-07T07:37:57.543

您还可以创建一个**c.Name**数据数组并使用**String.Join**方法来创建您的行。

```
public string ReturnAsCSV(ContactList contactList)
{
    List<String> tmpList = new List<string>();

    foreach (Contact c in contactList)
    {
        tmpList.Add(c.Name);
    }

    return String.Join(",", tmpList.ToArray());
} 
```

这可能不如**StringBuilder**方法那么高效，但它看起来确实更干净。

此外，您可能需要考虑使用**.CurrentCulture.TextInfo.ListSeparator**而不是硬编码的逗号——如果您的输出要导入其他应用程序，您可能会遇到问题。ListSeparator 在不同的文化中可能会有所不同，至少 MS Excel 尊重此设置。所以：

```
return String.Join(
    System.Globalization.CultureInfo.CurrentCulture.TextInfo.ListSeparator,
    tmpList.ToArray()); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T06:25:57.503

> 我喜欢通过检查容器是否为空来添加逗号的想法，但这是否意味着需要更多处理，因为它需要在每次出现时检查字符串的长度？

你过早地优化，性能影响可以忽略不计。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T11:18:09.143

只是一个想法，但请记住在字段值中处理逗号和引号 (")，否则您的 CSV 文件可能会破坏消费者阅读器。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-20T01:47:02.920

我以前用过这种方法。StringBuilder 的 Length 属性不是只读的，因此将其减去一个意味着截断最后一个字符。但是你必须确保你的长度不为零开始（如果你的列表为空，就会发生这种情况），因为将长度设置为小于零是错误的。

```
public string ReturnAsCSV(ContactList contactList)
{
    StringBuilder sb = new StringBuilder();

    foreach (Contact c in contactList)       
    { 
        sb.Append(c.Name + ",");       
    }

    if (sb.Length > 0)  
        sb.Length -= 1;

    return sb.ToString();  
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-26T19:34:54.020

我为此写了一个小班，以防其他人发现它有用...

```
public class clsCSVBuilder
{
    protected int _CurrentIndex = -1;
    protected List<string> _Headers = new List<string>();
    protected List<List<string>> _Records = new List<List<string>>();
    protected const string SEPERATOR = ",";

    public clsCSVBuilder() { }

    public void CreateRow()
    {
        _Records.Add(new List<string>());
        _CurrentIndex++;
    }

    protected string _EscapeString(string str)
    {
        return string.Format("\"{0}\"", str.Replace("\"", "\"\"")
                                            .Replace("\r\n", " ")
                                            .Replace("\n", " ")
                                            .Replace("\r", " "));
    }

    protected void _AddRawString(string item)
    {
        _Records[_CurrentIndex].Add(item);
    }

    public void AddHeader(string name)
    {
        _Headers.Add(_EscapeString(name));
    }

    public void AddRowItem(string item)
    {
        _AddRawString(_EscapeString(item));
    }

    public void AddRowItem(int item)
    {
        _AddRawString(item.ToString());
    }

    public void AddRowItem(double item)
    {
        _AddRawString(item.ToString());
    }

    public void AddRowItem(DateTime date)
    {
        AddRowItem(date.ToShortDateString());
    }

    public static string GenerateTempCSVPath()
    {
        return Path.Combine(Path.GetTempPath(), Guid.NewGuid().ToString().ToLower().Replace("-", "") + ".csv");
    }

    protected string _GenerateCSV()
    {
        StringBuilder sb = new StringBuilder();

        if (_Headers.Count > 0)
        {
            sb.AppendLine(string.Join(SEPERATOR, _Headers.ToArray()));
        }

        foreach (List<string> row in _Records)
        {
            sb.AppendLine(string.Join(SEPERATOR, row.ToArray()));
        }

        return sb.ToString();
    }

    public void SaveAs(string path)
    {
        using (StreamWriter sw = new StreamWriter(path))
        {
            sw.Write(_GenerateCSV());
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-07T05:54:57.813

如何跟踪您是否在第一个项目上，如果不是第一个项目，则仅*在该项目前添加逗号。*

```
public string ReturnAsCSV(ContactList contactList)
{
    StringBuilder sb = new StringBuilder();
    bool isFirst = true;

    foreach (Contact c in contactList) {
        if (!isFirst) { 
          // Only add comma before item if it is not the first item
          sb.Append(","); 
        } else {
          isFirst = false;
        }

        sb.Append(c.Name);
    }

    return sb.ToString();
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-08-07T08:19:56.040

修剪一下怎么样？

```
public string ReturnAsCSV(ContactList contactList)
{
    StringBuilder sb = new StringBuilder();

    foreach (Contact c in contactList)
    {
        sb.Append(c.Name + ",");
    }

    return sb.ToString().Trim(',');
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-06-26T20:06:39.263

我使用[CSVHelper](https://github.com/JoshClose/CsvHelper) - 它是一个很棒的开源库，可让您一次生成一个兼容的 CSV 流或自定义映射您的类：

```
public string ReturnAsCSV(ContactList contactList)
{
    StringBuilder sb = new StringBuilder();
    using (StringWriter stringWriter = new StringWriter(sb))
    {
        using (var csvWriter = new CsvHelper.CsvWriter(stringWriter))
        {
            csvWriter.Configuration.HasHeaderRecord = false;
            foreach (Contact c in contactList)
            {
                csvWriter.WriteField(c.Name);
            }
        }
    }
    return sb.ToString();
} 
```

或者如果你映射然后是这样的：`csvWriter.WriteRecords<ContactList>(contactList);`

# operating-system - 适用于开发机器的 Vista 或 XP

> ID：4433
> 
> 赞同：16
> 
> 时间：2008-08-07T05:49:46.017
> 
> 标签：operating-system, windows-xp, windows-vista

我即将从工作中获得一台新 PC，它将包括将 Vista Business 作为操作系统或降级到 XP Pro 的选项。除了一点点测试之外，我从未使用过 Vista，但总的来说，我听到的关于 Vista 的坏报告多于好报告。我认为硬件在性能方面不会成为问题（Intel Core Duo T9300、4GB RAM、256MB NVIDIA）。考虑到它的历史，当我有机会继续使用 XP 时，我对在我的主要开发系统中使用 Vista 感到不安。

那么这里有没有人在你的开发机器上使用过 Vista 和 XP 作为操作系统？如果你可以选择一个而不是另一个，你会选择哪一个？我需要使用 Visual Studio 2003/2005/2008、SQL Server 2005、虚拟机、Office，以及大量的多任务和多标签网页浏览。

（注意：我对抨击微软不感兴趣。如果您没有使用过 Vista，但只是听说过有关它的坏消息，那么您的经验水平与我相同，您可能不应该回答这个问题）。

编辑：当我从工作中得到这台计算机时，我更喜欢使用提供的操作系统之一：32 位 XP PRO 或 32 位 Vista。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-08-07T05:55:52.320

我在我的主要开发机器上使用 Vista x64。它可以毫无问题地运行从 Visual Studio 6.0 到 2008 的所有内容。

这不是一个巨大的飞跃，但我更喜欢它而不是 XP。

如果您需要 XP 来处理任何事情，Virtual PC 是免费的并且运行良好。我保留了一个 XP VPC 映像，以便在 XP、IIS6 和 IE6 中进行测试。两全其美的。

当然，您总是可以[使用 Windows Mojave](http://www.mojaveexperiment.com)来代替！

*回答问题编辑：*在切换到 x64 之前，我使用 Vista x86 大约 6 个月。同意见。

请记住，使用 x86 会浪费 0.5-1.0gb 的 RAM。您应该可以[在这里](http://www.microsoft.com/windowsvista/1033/ordermedia/default.mspx)获得几乎免费的 x64 媒体。您的许可证适用于两个版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-07T06:04:31.493

我已经运行 Vista（笔记本电脑上的 x86 和台式机上的 x64）一年多了，我永远不会回到 XP。我没有任何兼容性、可靠性或性能问题。

正如大卫所说，为 IE6 和 IIS6 测试保留一个 XP 虚拟机很好，但我很少需要使用我拥有的那个。

编辑：如果你有超过 2gb 的内存，请获取 Vista x64！如果你不这样做，你只是在浪费它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-20T09:25:42.587

Vista x64，就在我的脑海中：

使用 WDM 将视觉渲染卸载到显卡的更好的上下文切换。

内置搜索不仅适用于文档，还可以为服务管理器的事件日志服务键入事件等。对于查找您很少使用的 xyz 实用程序很有用。

对服务启动进行更精细的控制，即延迟启动，将服务延迟几分钟，以免拖慢启动时间。非常适合 sql server 和其他。

UAC 允许您为所需工具授予管理员权限，同时允许您以较低权限测试代码。

Shift+右键单击文件选择“复制为路径”非常棒。

ReadyBoost，插入一个 4 gig USB 驱动器，然后忘记它。将用于超取和随机访问 io 分页的缓存，这是非常明显的低内存系统，即笔记本电脑。

IPv6 - 你会在一三年内需要它

四周更安全。

我的个人经验：我的工作机是运行 xp x64 的四核 2.6 ghz，而我的 Vista 家用机（双核 2.0 ghz）感觉迟钝和缓慢。与我的工作箱相比，Visual Studio 不到一秒就启动，项目加载只需几秒钟，而我的工作箱可能需要 30 秒。

“鉴于 Vista 的历史，我只是对在我的主要开发系统中使用 Vista 感到不安”

它的历史是它自发布以来就比 xp 更好。人们喜欢说脏话。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-07T06:01:33.137

vista x64 w/8 gigs ram 和大量虚拟机，您的生活将变得如此美好。无论您做什么，都不要使用 32 位，32 位与 64 位相比没有任何优势。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-08-15T02:53:40.503

这真的取决于你在做什么类型的开发。如果您正在做一些需要大量内存和资源（庞大的数据集和大量数学运算）的事情，那么 XP 是您的最佳选择。即使您因不运行 x64 而丢失了一些内存，您仍然会获得大约 750mb 的内存，否则这些内存会被许多 Vista 后台服务占用。

如果您正在进行 Web 开发，则取决于您的测试环境。如果您在本地使用 IIS 和 VS.NET 进行所有操作，这并不重要。VS 有它自己的内置网络服务器。如果您必须在 IIS 上进行测试，保留一个虚拟机以将其放到 2003 服务器上会很方便。请记住，Vista 会占用一些可用于虚拟机的内存。

鉴于您的要求列表，我不得不推荐使用 XP Pro。如果您是一个多任务处理者，您需要将所有资源摆在您面前，而不是被 Aero 和背景搜索所吞噬。我使用 Vista 进行了大约 8 个月的开发，然后我找到了一份拥有 XP 的新工作。起初它很烦人，但 XP 的响应能力胜过 Vista 的功能，尤其是当有大量的窗口打开并且我所有的 RAM 都没了的时候。

还有一个兼容性问题：很多 VS.NET（尤其是旧版本）在 Vista 下相当……困难。例如，网站的发布功能可以在 Vista 下被破坏。您还必须小心如何处理 UAC，因为某些 VS.NET 内容要求您以管理员身份*显式运行。*我还记得在使用 Microsoft 虚拟机时遇到了一些困难，但那是在 2007 年。我相信现在已经修复了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-26T17:53:47.030

关于 Vista-64 和 Visual Studio 6.0 的说明：虽然 IDE 在 Vista-64 下运行没有问题，但编译器不兼容。如果您打算使用 Visual Studio 6.0，您将需要一个 XP VM 并在那里使用它。（我根据经验发言，因为我们有一些我工作的项目仍在使用 Visual Studio 6.0。我们已将这些项目的新版本移至 VS 2005 并将很快将它们移至 VS 2008。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T06:26:39.077

需要注意的重要一点是，Vista 不支持 Visual Studio 2003，请查看[Visual Studio 和 Windows Vista](http://msdn.microsoft.com/en-us/vs2005/aa948854.aspx)

> 请记住，使用 x86 会浪费 0.5-1.0gb 的 RAM。您应该可以在这里获得几乎免费的 x64 媒体。您的许可证适用于两个版本。

使用 Vista SP 1，您不再浪费 0.5-1GB RAM，它现在可以看到完整的 4GB。虽然已经说过，但[这个](http://windowshelp.microsoft.com/Windows/en-US/help/ea7577b8-813f-47a5-ba05-2f5b2e436b281033.mspx)微软网站并没有说它可以**使用**所有的 4GB RAM。它说它可以报告所有这些。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T07:40:24.653

尽管 Vista 不“支持”Visual Studio 2003，但它确实可以正常工作——我花了一年时间在 VS2003 中使用 .net 1.1 处理 web-forms、win-forms 和 windows 服务项目，没有任何问题。MS 在[http://msdn.microsoft.com/en-us/vs2005/bb188244.aspx有一个问题列表](http://msdn.microsoft.com/en-us/vs2005/bb188244.aspx)

Vista64 肯定是我的选择。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-15T02:41:03.290

我可以肯定地告诉你避开任何低端的 vista 安装，因为你会失去：

*   能够对未物理连接到计算机的磁盘进行简单备份；
*   Term serv 从任何其他人访问您的机器；
*   就像弗莱说的，你会失去内存。我有 4 个，vista 只能“看到”3 个。

至少我说的是开箱即​​用。我想去 x64 但真的很害怕必须重新安装所有东西。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-08-15T02:47:12.390

还有另一种选择：Windows 2008：

[http://tech.slashdot.org/article.pl?sid=08/07/15/2325215](http://tech.slashdot.org/article.pl?sid=08/07/15/2325215)

我觉得这很有趣。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-15T04:57:25.620

我会说去 vista.. IIS7 很棒，而且内存分配更智能（Vista 不会浪费 RAM，它会用它认为您将在不久的将来使用的东西填充它）。至于后台服务……您可以像在 XP 中一样关闭它们。

但是……如果公司的其他人都在使用 XP，我强烈建议您安装 XP 虚拟机，以便您可以在与其他人相同的平台上测试您的应用程序。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-26T17:59:28.450

我在我的家用设备上使用 Vista Business，并在那里进行了大量开发，我很喜欢它。

我的工作平台是 XP，它也很好。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-12T03:13:31.790

两个都。我想您将需要在 XP 和 Vista 中测试您的应用程序..

您实际使用哪个开发是个人喜好，仅此而已.. 使用任何一个都有一些技术优势（对于 XP，操作系统的内存开销会少一点。在 Vista 上，有很多新的功能，其中一些可能有用），但 Visual Studio 在两者上的工作方式几乎相同。

至于 64 与 32 位 .. 我会说使用 64 位 - 如果没有理由但可以轻松使用 > 3GB RAM，并且您可以在 64 位上虚拟化 32 位操作系统，反之亦然

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-08-15T04:24:57.917

如果你做网络，iis 7 震撼了房子，能够在一个盒子上拥有多个主机对我来说是一个救命稻草，我不知道如何再回到 xp 了。

如果我不得不回去，服务器 2003 是我最不愿意接受的，没有真正的功能 Web 服务器是不可行的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-08-25T18:39:45.707

对于那些说 Vista 绰绰有余的人，我会表示赞同。我混合使用了几个操作系统，而 Vista Ultimate 是我目前最喜欢的。四核 2.5 4GB。还没有升级到x64。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-08-25T18:42:58.647

如果您在使用 Vista 和 Visual Studio 2003 或 2005 时遇到问题，请尝试以管理员身份运行它（右键单击，以管理员身份运行）。这解决了绝大多数问题，尤其是在使用 IIS、BizTalk 等时。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-10-12T02:41:35.677

我刚刚购买了一个新的“准系统”盒子，它与 Vista 一起作为操作系统。我很担心，随着时间的推移听到了很多关于 Vista 的坏消息，但它在这里运行得很好。

在此基础上，我会说节省您（可能）为“降级”收取的额外费用，并购买更多的 RAM。

# .net - 是否可以将 Visual Studio 配置为每次从其中一个项目打开文件时不更改启动项目？

> ID：4434
> 
> 赞同：22
> 
> 时间：2008-08-07T05:50:57.013
> 
> 标签：.net, visual-studio, ide

假设有一个解决方案包含两个项目（Project1 和 Project2）。

Project1 设置为启动项目（其名称以粗体显示）。我双击 Project2 中的某个文件将其打开。该文件打开，但也发生了其他事情 - Project2 被设置为启动项目。

我试图在配置中找到一个选项来更改它，但我没有找到。

可以禁用此功能（尽管它对我来说更像是一个错误）吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-07T05:58:25.810

[Sara Ford 的博客“Visual Studio Tip of the Day](http://blogs.msdn.com/saraford/default.aspx) ”（强烈推荐）中描述了选择启动项目的方法。她在那里有一篇关于[设置 StartUp 项目](http://blogs.msdn.com/saraford/archive/2008/07/29/did-you-know-how-to-select-the-startup-project-269.aspx)的帖子。基本上有两种方法，最简单的一种是右键单击所需的项目，然后选择“设置为启动项目”。这可以防止其他项目成为 StartUp 项目，即使您单击其中一个文件也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-12T14:30:11.337

检查以下复选框的 Visual Studio 选项：
项目和解决方案 - 构建和运行 - 对于新解决方案，使用当前选定的项目作为启动项目。

取消选中它，看看行为是否改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-03-07T23:29:32.640

我遇到了一个错误，尽管它在解决方案属性中被选为“单一启动项目”，但粗体项目不会是启动项目。

解决此错误的一种方法是从配置管理器中取消检查部署，以检查被错误地用作启动项目的非粗体项目。通过右键单击解决方案资源管理器中的解决方案可以找到配置管理器。

# t4 - 领域特定语言资源

> ID：4458
> 
> 赞同：11
> 
> 时间：2008-08-07T06:24:33.870
> 
> 标签：t4, dsl, vsx

我只是在听一些较老的 .Net Rocks！剧集，我[发现 DSL 上的 #329](http://www.microsoft.com/downloads/details.aspx?FamilyID=D91887EA-5128-4BB1-B861-1DC1F9564941&displaylang=en)很有趣。我的问题是我无法为尝试学习这项技术的人们找到任何好的在线资源。我了解了创建新设计师的基础知识，但是缺少有关 DSL 工具使用的 T4 引擎的 MS 文档，以及如何将模板与 DSL 模型集成。

有谁知道 MS DSL 工具的一些好的介绍性资源？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-10T06:59:42.607

DSL 工具团队的架构师写了一本书，[使用 Visual Studio DSL 工具进行领域特定开发。](https://rads.stackoverflow.com/amzn/click/com/0321398203)这本书的[网站](http://www.domainspecificdevelopment.com/)有一些其他的链接和资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-10T07:25:13.787

如果你对 DSL 感兴趣，[Jeff Moser](http://www.moserware.com/)在他的博客上在[这里、](http://www.moserware.com/2008/04/towards-moores-law-software-part-3-of-3.html) [这里](http://www.moserware.com/2008/06/ometa-who-what-when-where-why.html)和[这里](http://www.moserware.com/2008/07/building-object-oriented-parasitic.html)写了一些关于它们的很棒的文章（以及你需要的“元”思维框架） 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-31T05:12:00.127

[Martin Fowler](http://www.martinfowler.com/dslwip/)目前正在写一本关于 DSL 的书。这是他就该主题发表的[演讲。](http://www.infoq.com/presentations/domain-specific-languages)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T18:04:29.943

对我来说，T4 示例的最佳来源是[这个](http://www.olegsych.com/)博客。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T06:53:27.807

由于您正在寻找 MS 世界，因此您可能需要查看[F#](http://research.microsoft.com/fsharp/fsharp.aspx)。它提供了扩展其语法以编写特定领域语言的能力（请参阅[此链接](http://tomasp.net/articles/fsharp-i-introduction/article.pdf)，第 16 页的示例代码）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-16T12:46:04.097

我发现以下包含许多网络广播的页面非常有用：

[http://msdn.microsoft.com/en-us/vsx/cc677256.aspx](http://msdn.microsoft.com/en-us/vsx/cc677256.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T10:15:40.953

[Boo](http://boo.codehaus.org/)是 DSL 的绝佳选择。我一直在使用它来设置我的 IoC 容器、定义路由、验证规则。 [Ayende Rahien](http://www.ayende.com/Blog/)正在为 Manning 写一本很棒的书，名为[Building Domain Specific Languages in Boo](http://www.manning.com/rahien/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T10:40:17.417

*   [PODCAST：SE-Radio 中的 DSL 相关讨论](http://www.se-radio.net/tags/dsls)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T10:44:26.453

Martin Fowler 正在写一本关于 DSL 的书。到目前为止，您可以[在这里阅读他的作品](http://www.martinfowler.com/dslwip/) [http://www.martinfowler.com/dslwip/](http://www.martinfowler.com/dslwip/)

我还参加了[Jay Fields](http://blog.jayfields.com/)的精彩演讲（他的幻灯片在[这里](http://manchestergeeknights.wetpaint.com/page/The+5Ws+of+DSLs)）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-17T01:29:36.507

我会推荐[http://msdn.microsoft.com/en-us/vsx/cc677256.aspx](http://msdn.microsoft.com/en-us/vsx/cc677256.aspx)作为 DSL 工具的入门者。

另外，请查看 MDSD（模型驱动开发）的概念。该主题（和 DSL）的专家是 Markus Voelter：[http ://www.voelter.de/](http://www.voelter.de/)

我相信 MDSD、软件生产线和 DSL 之间有很多相似之处，以至于这种“新”的做事方式需要清理它的概念。这就是为什么很难找到有关该主题的良好信息的原因之一。

另一方面，acm.org 有一个广泛的研究文章数字图书馆，来自各种会议（如 OOPSLA）的文章，您可以在其中找到有关 DSL、语言设计、SPL、MDSD 等的大量信息。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-10T07:05:19.433

这里还有一些我觉得有用的网站：

*   [高级代码生成模式](http://channel9.msdn.com/posts/AnthonyC/Advanced-code-generation-patterns-with-T4--DSL-Tools/)
*   [DslFactoryUtilities](http://www.codeplex.com/DslFactoryUtilities)
*   [Dsl工具](http://code.msdn.microsoft.com/DslTools)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-08-15T23:49:02.893

对于 Visual Studio DSL 工具（将图形 DSL 添加到 Visual Studio 的工具），这里有一个介绍性动手实验室：http: [//code.msdn.microsoft.com/Visualization-and-Modeling-313535db](http://code.msdn.microsoft.com/Visualization-and-Modeling-313535db)

该工具的主页与其他示例的链接在这里：http: [//archive.msdn.microsoft.com/vsvmsdk](http://archive.msdn.microsoft.com/vsvmsdk)

# language-agnostic - 如何知道何时发送 304 Not Modified 响应

> ID：4506
> 
> 赞同：11
> 
> 时间：2008-08-07T07:54:37.013
> 
> 标签：language-agnostic, http

我正在编写一种资源处理方法，在其中控制对各种文件的访问，并且我希望能够利用浏览器的缓存。我的问题有两个：

1.  为了确定是否应该发送 304 响应，我需要检查哪些明确的 HTTP 标头，以及在检查它们时我在寻找什么？

2.  此外，当我最初将文件（如“Last-Modified”）作为 200 响应发送时，是否需要发送任何标题？

一些伪代码可能是最有用的答案。

* * *

缓存控制头呢？它的各种可能值是否会影响您发送给客户端的内容（即 max-age），还是应该只遵守 if-modified-since ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-07T08:30:16.113

这是我实现它的方式。该代码已经运行了一年多，并且适用于多个浏览器，所以我认为它非常可靠。这是基于[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)并通过观察各种浏览器发送的内容和时间。

这是伪代码：

```
server_etag = gen_etag_for_this_file(myfile)
etag_from_browser = get_header("Etag")

如果 etag_from_browser 不存在：
    etag_from_browser = get_header("If-None-Match")
如果浏览器引用了 etag：
    去掉引号（例如 "foo" --> foo）

将 server_etag 设置为 http 标头

如果 etag_from_browser 匹配 server_etag
    向浏览器发送304返回码

```

这是我处理此问题的服务器逻辑的片段。

```
/* 客户端应该设置 Etag 或 If-None-Match */
/* 一些客户引用参数，如果是这样，去掉引号 */
mketag(etag, &sb);

etagin = apr_table_get(r->headers_in, "Etag");
如果（etagin == NULL）
    etagin = apr_table_get(r->headers_in, "如果-无匹配");
if (etag != NULL && etag[0] == '"') {
    诠释 sl;
    sl = strlen(etag);
    memmove（etag，etag+1，sl+1）；
    etag[sl-2] = 0;
    logit(2,"etag=:%s:",etag);
}   
...
apr_table_add(r->headers_out, "ETag", etag);
...
if (etagin != NULL && strcmp(etagin, etag) == 0) {
    /* 如果 etag 匹配，我们返回 304 */
    rc = HTTP_NOT_MODIFIED；
}   

```

如果您在 etag 生成方面需要一些帮助，请发布另一个问题，我会挖掘出一些同样可以做到这一点的代码。！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-09T13:27:59.343

带有 If-Modified-Since ("IMS") 或 If-Not-Match ("INM") 标头的 GET 或 HEAD 请求可能会导致 304 Not Modified 响应。

为了决定在收到这些标头时要做什么，假设您正在处理没有这些条件标头的 GET 请求。确定响应中的 ETag 和 Last-Modified 标头的值，并使用它们来做出决定。希望您已经构建了系统，以便确定这一点比构建完整响应的成本更低。

如果存在 INM，并且该标头的值与您将放置在 ETag 中的值相同，则以 304 响应。

如果存在 IMS，并且该标头中的日期值晚于您在 Last-Modified 中放置的日期值，则使用 304 响应。

否则，就好像请求不包含这些标头一样继续。

对于问题第 2 部分的最省力方法，请找出您可以在 Web 应用程序中轻松正确地生成哪些（Expires、ETag 和 Last-Modified）标头。

推荐阅读材料：

[http://www.w3.org/Protocols/rfc2616/rfc2616.html](http://www.w3.org/Protocols/rfc2616/rfc2616.html)

[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T08:01:54.203

如果客户端明确声明它可能已经在其缓存中拥有该页面，您应该发送 304。这称为条件 GET，它应该在请求中包含**if-modified-since标头。**

基本上，此请求标头包含客户端声称拥有缓存副本的日期。您应该检查在此日期之后内容是否发生了变化，如果没有，则发送 304。

有关 RFC 中的相关部分，请参见[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-10-13T14:05:05.560

我们还在处理缓存但安全的资源。如果您发送/生成一个 ETAg 标头（RFC 2616 第 13.3 节建议您应该），那么客户端必须在条件请求中使用它（通常在 If-None-Match - HTTP_IF_NONE_MATCH - 标头中）。如果您发送 Last-Modified 标头（同样您应该），那么您应该检查 If-Modified-Since - HTTP_IF_MODIFIED_SINCE - 标头。如果你发送两个，那么客户端应该发送两个，但它必须发送 ETag。另请注意，验证只是定义为检查条件标头是否与您要发送的标头严格相等。此外，只有强验证器（例如 ETag）将用于范围请求（仅请求部分资源）。

在实践中，由于我们保护的资源是相当静态的，并且一秒钟的延迟时间是可以接受的，我们正在执行以下操作：

1.  检查用户是否有权访问请求的资源

         如果不是，请根据需要重定向它们或发送 4xx 响应。我们将对看起来像黑客攻击或公然尝试执行安全最终运行的请求生成 404 响应。

2.  将 If-Modified-Since 标头与我们将发送（见下文）的 Last-Modified 标头进行比较，以实现严格相等

         如果它们匹配，则发送 304 Not Modified 响应并退出页面处理

3.  使用请求资源的修改时间创建 Last-Modified 标头

        在 RFC 2616 中查找 HTTP 日期格式

4.  发送标头和资源内容以及适当的 Content-Type

我们决定避开 ETag 标头，因为它对我们的目的来说太过分了。我想我们也可以只使用日期时间戳作为 ETag。如果我们转向真正的 ETag 系统，我们可能会存储资源的计算哈希值并将其用作 ETags。

如果您的资源是从数据库内容动态生成的，那么 ETags 可能更适合您的需求，因为它们只是您认为合适的填充文本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T08:47:09.700

关于缓存控制：

在提供服务时，您不必担心缓存控制，除了将其设置为合理的值。它基本上告诉浏览器和其他下游实体（例如代理）在缓存超时之前应该经过的最长时间。

# .net - MAPI 和托管代码体验？

> ID：4508
> 
> 赞同：12
> 
> 时间：2008-08-07T07:56:24.327
> 
> 标签：.net, email, pinvoke, mapi

官方不支持在托管代码中使用 MAPI 函数。显然，MAPI 使用自己的内存管理，它在托管代码中崩溃和烧毁（请参阅[此处](http://blogs.msdn.com/pcreehan/archive/2007/05/04/what-does-unsupported-mean.aspx)和[此处](http://blogs.msdn.com/mstehle/archive/2007/10/03/fyi-why-are-mapi-and-cdo-1-21-not-supported-in-managed-net-code.aspx)）

**我要做的就是启动**带有主题、正文**和一个或多个附件**的默认电子邮件客户端。

所以我一直在研究[MAPISendDocuments](http://pinvoke.net/default.aspx/mapi32.MAPISendDocuments)，它似乎有效。但是我一直无法鼓起勇气在生产代码中实际使用该功能。

有没有人经常使用这个功能？你有什么恐怖故事吗？

*PS。不，我不会使用附件的命令行参数 shellExecute Outlook.exe。*

*聚苯乙烯。附件支持是一项*要求*，因此 Mailto: 解决方案不适合我。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-01T20:26:46.720

有一个单独的帮助程序 EXE，它采用命令行参数（或管道到它的 StandardInput）来执行所需的操作并从您的主应用程序中调用它。这会将 MAPI 内容保留在主应用程序的进程空间之外。好的，您仍在混合 MAPI 和 .NET，但过程非常短暂。假设是 MAPI 和 CLR 开始导致运行时间较长的进程出现问题。

我们使用 Dmitry Streblechenko 出色的[Redemption Data Objects](http://www.dimastr.com/redemption/)库，它允许我们在 JScript 中编写这样的“shim”代码并调用它，这将 CLR 和 MAPI 世界保持在单独的进程中，但以受支持的方式。

@Chris Fournier 回复。编写非托管 DLL。这不起作用，因为问题是*在同一进程中*混合 MAPI 和托管代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T11:16:11.987

[在Mailto: 协议](http://msdn.microsoft.com/en-us/library/aa767737(VS.85).aspx)上调用 process.Start （如下所示）将为您提供基本功能，但不提供附件。

```
Process.Start("mailto:name@domain.com?subject=TestCode&Body=Test Text"); 
```

您可以使用附件路径执行此方法，但此选项仅适用于某些旧版本的 Outlook，例如 98。我认为这是由于潜在的安全风险。

如果有人确实使用了 Outlook.exe，它将在 Outlook 2003（和 2007 取决于设置）下发出安全警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-12T14:51:58.337

MAPISendDocuments 已弃用，可能会被删除。您应该改用 MAPISendMail。请参阅[简单 MAPI](http://msdn.microsoft.com/nl-nl/library/dd296734(en-us,VS.85).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-20T20:01:35.723

您应该能够创建一个非托管 DLL 来使用 MAPI 执行您想要的操作，然后从您的托管代码中调用该 DLL。我不会编写一个直接的 MAPI 包装器，而是执行您需要的所有 MAPI 功能的东西，该 MAPI 包含在该非托管 DLL 中。这可能是从托管代码中使用 MAPI 的最安全方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-27T15:26:23.767

您还可以使用托管代码支持的[Outlook Redemption](http://www.dimastr.com/redemption/)；我不确定它是否有一个简单的 MAPISendDocuments 替换，但如果您有问题，Dmitry 会很有帮助。

至于“崩溃和烧伤”，这是 MS 支持人员的另一句话，[这里](http://groups.google.com/group/microsoft.public.win32.programmer.messaging/msg/20149ae3de2f4920?hl=en&)

> 这是最有效的事情。它会在你写它的时候工作。然后它会在你测试它时工作。它会在您的客户评估它时起作用。然后一旦客户部署它 - BAM！那时它会决定开始遇到问题。微软不会帮助你，因为我们一开始就告诉你不要这样做。:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-31T00:43:06.763

我已经使用 MAPISendMail 函数和几个内部类来包装一些其他 MAPI 相关结构。只要这是唯一的用途，虽然不是微不足道的安全操作，但它是可能的，因为它需要非常密切关注各种非托管数据类型和内存分配/释放和 GC。虽然它仍然不受支持，但我在生产代码中使用它（虽然它还没有发布）。

当我向 Matt Stehle 询问此事时，我收到的回复是：

> 我真的不知道有什么更好的方法来做到这一点，您在这里遇到的任何问题都可能在受支持的场景（即 VB6 或非托管 C++）中重现。只要知道，如果您曾经遇到过一个问题是由从 .NET 调用的此函数特别引起的，那么我们不会为您提供任何其他建议，然后不要使用 .NET。

使用它并不完全是一件好事，但也没有说有任何其他选项可以从托管代码中实际执行此操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-12-10T11:58:19.327

以下代码不使用 MAPI，但它确实打开了带有任意附件的“撰写邮件”窗口。

（实际上，它完全未经测试，但我在我认为有效的应用程序中挖掘了它）

```
using Microsoft.Office;
using Microsoft.Office.Core;

...

Outlook.Application outlook = new Outlook.Application();
Outlook.MailItem mail = (Outlook.MailItem) outlook.CreateItem(Outlook.OlItemType.olMailItem);

mail.BodyFormat = Outlook.OlBodyFormat.olFormatRichText;
mail.HTMLBody = "stuff";
mail.Subject = "more stuff";
string file = File.ReadAllBytes(...);
mail.Attachments.Add(file, Outlook.OlAttachmentType.olByValue, 1, file)

mail.Display(false); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-04-04T05:46:25.163

对于有 MAPI 经验的人来说，与输入这篇文章并阅读响应（无意冒犯）相比，他们花费更少的时间来编写代码以从非托管代码（阅读：纯 C++）中完全按照您的意愿行事。

你很幸运，你需要的功能是有限的。您只需要一个简单的 C++ 实用程序即可在命令行上获取所需的参数并发出正确的 MAPI 调用。然后，您可以从托管代码中获取所有这些实用程序，就像执行任何其他进程一样。

高温高压

# sql - 是否有任何技巧可以将 Management Studio（2008 版）的 IntelliSense 功能与早期版本的 SQL Server 一起使用？

> ID：4511
> 
> 赞同：16
> 
> 时间：2008-08-07T08:04:30.923
> 
> 标签：sql, sql-server, database, sql-server-2008, intellisense

新版本的 Management Studio（即 SQL Server 2008 附带的版本）终于有了 Transact-SQL IntelliSense 功能。但是，开箱即用的它仅适用于 SQL Server 2008 实例。

有一些解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-07T10:52:30.757

除了使用 SQL Server 2008 的 CTP-6（支持 RTM）之外，没有已知的“野外”技巧可以解决这个问题。

[microsoft connect 的相关反馈中](https://connect.microsoft.com/SQLServer/feedback/ViewFeedback.aspx?FeedbackID=341872)提供了删除向后兼容性的原因（以及更多的讨论）。

编辑：对不起，我不知道这个 ctp 在哪里可用，如果有的话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-18T11:53:18.703

有没有人尝试修补 SSMS 不检查版本（也许尝试查看 CTP 6 和 RTM 之间的二进制差异？），或修补 SS 2005 以假装是 2008？

不干净，我知道，但我没有看到任何其他方式。

# unix - 通过 VPN 使用 Xming X Window Server

> ID：4519
> 
> 赞同：5
> 
> 时间：2008-08-07T08:20:47.100
> 
> 标签：unix, vpn, xming

我在运行 Windows XP 的笔记本电脑上安装了 Xming X Window Server 以连接到一些 UNIX 开发服务器。

当我直接连接到办公室的公司网络时，它工作正常。但是，当我通过 VPN 远程连接到网络时，它不起作用。

当我在远程连接时启动 Xming 时，我的终端窗口都没有显示。

我认为这可能与连接时未将 DISPLAY 环境变量正确设置为笔记本电脑的 IP 地址有关。

我注意到，当我在远程连接时执行 ipconfig 时，我的笔记本电脑有两个 IP 地址，一个是从公司网络分配给它的，另一个是我在我的“本地网络”上为它设置的本地 IP 地址。调制解调器/路由器。

我需要在 Xming 中进行一些配置更改以支持通过 VPN 使用它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T13:11:03.067

可能是 X 身份验证、X 服务器绑定到接口或您的 DISPLAY 变量。我自己不使用 Xming，但有一些一般现象需要检查。您可以手动验证 DISPLAY 变量是否正确的一项测试是：

1.  启动您的 VPN。运行 ipconfig 以确保您拥有您提到的两个 IP 地址（您的本地 IP 和您的 VPN IP）。
2.  开始小明。运行“netstat -n”以查看它是如何绑定到接口的。您应该会看到显示 localIP:6000 或 VPNIP:6000 的内容。它可能不是 6000，但很可能会是这样。如果没有 VPNIP:6000，它可能只绑定到您的本地 IP 甚至 127.0.0.1。这可能不适用于 VPN。检查是否有一些 Xming 设置使其绑定到其他或所有接口。
3.  如果您看到 VPNIP:6000 或类似的东西，请记下它所说的内容并远程 shell 进入您的 UNIX 主机（希望类似于 ssh，如果不是您必须获得文本终端的话）。
4.  在 UNIX 终端上输入“echo $DISPLAY”。如果没有显示任何内容，请尝试“export DISPLAY=VPNIP:0.0”，其中 VPNIP 是您的 VPN IP 地址，0.0 是您在步骤 3 中看到的端口减去 6000，末尾为 .0（即 6000 = 0.0, 6010 = 10.0）。
5.  在 UNIX 主机上运行类似 'xclock' 或 'xterm' 来查看它是否运行。错误消息应该提供信息。它会告诉您它无法连接到主机（连接问题）或身份验证失败（您需要协调主机和本地机器上的 Xauth 或本地机器上的 Xhosts）。

如果您有一个本地受保护的网络并且您要通过 VPN，那么打开 Xhosts（对所有主机使用 + 或类似的东西）并不算太糟糕。希望这将使您开始追踪问题。由于它通过 VPN 或简单的 ssh 连接工作，因此通常有用的另一个选项是 ssh 隧道或通过 ssh 的 X11 转发。这通过将 UNIX 主机上的端口重定向到 X 服务器机器上的本地端口来模拟与本地机器上的 X 服务器的连接。对于本地 6010 端口，您的显示通常类似于 localhost:10.0。

X 的设置可能很麻烦，但一旦你掌握了它，它通常会很好用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-20T11:53:57.940

感谢@Stephen 和@Greg Castle 的帮助，使用它我设法解决了我的问题。

为他人提供基本指南（从头开始）：

**在 Windows PC 上使用 Xwindows 通过 VPN 连接到 UNIX 服务器**

你需要从什么开始：

*   Putty Telnet/SSH 客户端，从以下位置下载 putty.exe（免费）：

    [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

*   Xming X 服务器，从以下位置下载 Xming（免费）：

    [http://sourceforge.net/project/showfiles.php?group_id=156984](http://sourceforge.net/project/showfiles.php?group_id=156984)

该怎么办：

1.  在您的 Windows PC 上安装上述两个

2.  从 Windows 开始菜单中选择：程序 -> Xming -> Xming

3.  在您下载到的位置运行 Putty.exe 程序

4.  在 PuTTY 配置屏幕中，执行以下操作：

    *   将 IP 地址设置为 UNIX 服务器的 IP 地址

    *   选择 SSH 协议单选按钮

    *   单击配置屏幕左侧窗格中的 SSH : Tunnels 类别

    *   单击启用 X11 转发复选框

    *   单击打开按钮

    *   像往常一样登录到您的 UNIX 服务器

    *   检查包含 X windows 实用程序的目录是否在您的路径中，例如 Solaris 上的 /usr/X/bin

    *   在您的 putty 窗口中运行您的 X Windows 命令，它们将在您的桌面上生成新窗口

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-09T01:16:43.000

`Connection > SSH > X11 > X display location`通过将,中的 PuTTY 配置替换`localhost:0.0`为`VPNIP:0.0`. `VPNIP`可以`VPN statistics client` `address information`通过左键单击`VPN client`锁定图标并选择来看到`Statistics...`。

我没有搞砸远程主机上的 DISPLAY 环境变量。但是，和其他人一样，我修改了远程主机上的 sshd_config，添加了以下几行：

```
X11Forwarding yes
X11DisplayOffset 10
X11UseLocalhost yes
AddressFamily inet 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T13:05:26.993

除了 Xming 的问题，我什么都没有。当我可以让它工作时它非常慢（这是通过VPN）。IMO X 并非旨在通过慢速连接运行，因为它太健谈了。我所说的慢速连接是指任何低于 LAN 连接的东西。

我的解决方案是使用 x11vnc。它允许您通过 VNC 访问现有的 X11 会话。我只是通过 VPN SSH 进入我的盒子并启动：

```
$ x11vnc -display :0 
```

这样我就可以访问白天打开的所有内容。然后，当我不这样做时，我只是在终端中退出（`Ctrl`- `C`）以关闭 x11vnc。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-31T10:20:18.557

我在 Windows 10 机器上遇到了与 Xming 和 Putty 相同的问题，并在[此处](http://blog.markusbordihn.de/2009/04/ssh-forwarding-with-putty-and-xming.html)找到了解决方案。我已经克服了将**隧道**添加到 PuTTY 中的会话的问题。但首先你需要检查；

*   **/etc/ssh 下的sshd_config**（在 rhel7 中）。
*   **在左侧导航窗格中**启用 X11 转发**`Connections > SSH > X11`**
***   **/etc/sysconfig/ 下的**iptables （在 rhel7 中）。**如果端口被阻止并且您有权限，请打开 6000 的端口。我在第一个拒绝行之前添加了以下行，以打开从 6000 到 6003 的端口。在您的情况下可能更具体。**

     **`-A INPUT -m state --state NEW -m tcp -p tcp -m multiport --dports 5901:5903,6000:6003 -j ACCEPT`**** 

 ****然后;

*   进入`Connections > SSH > Tunnels`PuTTY 并添加一个带有 的隧道`Source Port=6000`，`Destination=127.0.0.1:6000`然后选中`Remote`单选按钮。然后单击`Add`按钮。
*   建立 SSH 连接后，使用以下命令手动设置 DISPLAY 变量：
    `export DISPLAY=127.0.0.1:0.0`

**更多信息;**
如果将`DISPLAY`变量设置为`127.0.0.1:1.0`，它将通过 6001 端口进行通信。在这种情况下，您需要为端口号 6001 添加另一个隧道。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-07T10:45:04.517

没有确切的问题，但我认为您需要查看 xhost 并确保允许 vpn 远程向 x 服务器发送数据。

此链接可能会有所帮助： http: [//www.straightrunning.com/XmingNotes/trouble.php](http://www.straightrunning.com/XmingNotes/trouble.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T14:31:09.207

[通过 SSH 进行X11 转发](http://tldp.org/HOWTO/XDMCP-HOWTO/ssh.html)而不是直接摆弄 DISPLAY 变量可能会更好。使用 SSH 进行 X11 转发是安全的，并且使用现有的 SSH 连接来建立隧道，因此通过 VPN 工作应该没问题。

幸运的是，这对 Xming 来说相当简单。如果您从 Xming 中打开您的连接（例如 plink 选项），我相信它会默认设置 X11 转发。如果您使用另一个 SSH 客户端（例如 PuTTY）进行连接，那么您只需启用 X11 转发（例如 'ssh -X user@host'）。在 PuTTY 中，选项位于 Connection -> SSH -> X11 -> 单击“Enable X11 Forwarding”。

确保 Xming 在您的笔记本电脑的后台运行并执行标准 X 测试“xclock”。如果您收到类似“与 localhost:19.0 的 X 连接断开（显式终止或服务器关闭）”之类的消息。那么Xming很可能没有运行。

另外，请确保您没有在任何启动脚本中明确设置 DISPLAY 变量；SSH 将为 X11 隧道设置一个别名（类似于 localhost:10 或在上面的示例中为 localhost:19），并自动将 DISPLAY 设置为该值。覆盖 DISPLAY 显然意味着您将不再指向正确的 X11 隧道。另一方面，其他没有设置 SSH X11 Forwarding 的终端可以使用相同的 DISPLAY 值并利用隧道。

我更喜欢 PuTTY 选项，但我的几个同事在 Xming 中使用 plink。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-15T20:57:10.417

putty + XMing - 我必须手动设置 DISPLAY 环境变量才能运行（同时在 putty - Connection/SSH/X11 中检查“启用 X11 转发”）

导出显示=0:10.0

（它被设置为“localhost:10.0”，这不起作用）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-16T01:55:06.553

您必须将 Linux 机器的 DNS 名称和 IP 地址添加到 C:\Program Files\xming\X0.hosts 文件中。文件应包含：

```
LinuxBox.mydomain.com
LinuxBox
192.168.1.25 
```

这是正确的答案：[https ://www.slackwiki.com/X_Windows:_Remote_X_to_Windows_with_Xming](https://www.slackwiki.com/X_Windows:_Remote_X_to_Windows_with_Xming)****

# sql-server-2005 - SQL Server 2005 和 2008 在同一台开发人员机器上？

> ID：4529
> 
> 赞同：20
> 
> 时间：2008-08-07T08:35:30.753
> 
> 标签：sql-server-2005, sql-server-2008, installation

有没有人尝试在已经安装了 2005 Developer 的机器上安装 SQL Server 2008 Developer？

我不确定是否应该这样做，并且在可预见的将来我需要在这台机器上保留 2005 以便轻松测试我们的应用程序。因为我有时需要备份数据库文件并提供给公司中的其他人，所以我不能只用 2008 替换 2005，因为我怀疑（但不知道）数据库不是 100% 向后兼容的。

会出现什么样的问题？我是否需要使用实例名称安装新版本，这样可以吗？我可以使用不同的端口号来区分它们吗？

我在 technet 上找到了这个条目：[http ://forums.microsoft.com/TechNet/ShowPost.aspx?PostID=3496209&SiteID=17](http://forums.microsoft.com/TechNet/ShowPost.aspx?PostID=3496209&SiteID=17)

它不仅仅说是的*，你可以做到这一点*，我有点怀疑这无论如何都是可行的，但我需要知道在开始安装之前是否有什么我需要知道的。

任何人？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-08-07T09:30:58.253

是的，这是可能的。您将必须根据先前的答案和安装的 .Net 3.5 版创建一个未被其他版本的 SQL Server 使用的命名实例。效果很好！！

这里是先决条件列表：

*   .NET 框架 3.5 SP1
*   视窗安装程序 4.5
*   Windows PowerShell 1.0

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-08T13:23:40.523

如果您安装了 Visual Studio 2008，则会收到验证错误，并且在安装 Visual Studio 2008 SP1 之前无法安装 SQL Server 2008。如果您没有安装 Visual Studio 2008，它应该不是问题。因此，如果您确实有 Visual Studio 2008，请等到 8 月 11 日，因为那是 Visual Studio 2008 SP1 发布的日子

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-08-07T08:57:34.140

我相信这是完全可能的。我目前在我的开发服务器上同时运行 SQL Server 2000 和 SQL Server 2005，同时将应用程序转移过来。

您唯一需要做的就是创建一个尚未被 SQL Server 2005 使用的新实例。

与任何新事物一样，可能会有一些错误，但是，它通常应该“正常工作”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-13T08:42:26.300

我的经验是在同一台机器上安装 sql sever 2005 和 2008 之后 SSIS 2005 无法正常工作......特别是脚本任务、数据流和序列容器

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-13T19:07:12.690

您可以仅将 SQL 2008 作为单个实例运行，然后附加/创建兼容级别为 2005 的数据库吗？问题在于它是一个理论。我不是 100% 肯定，如果您在 2008 上创建数据库，兼容性级别为 2005，然后将其分离，那么 SQL 2005 实例能够附加它。

我认为这是一个足够好的机会尝试。但我同意前面的答案，多实例选项可以正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-08T12:57:03.633

不幸的是，SQL Server 2008 客户端工具似乎需要 Visual Studio 2008 SP1，我不愿意在我的主要开发机器上安装它的测试版。

在我继续之前，我会等到 SP1 是 RTM。

**编辑**：是的，我在这台机器上确实有 Visual Studio 2008，但我想避免调试器应用程序的 beta 安装。他们倾向于把自己挖得太深，不合我的口味。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-03T10:59:29.907

我已经尝试了否定结果。2k8 安装中断，出现一条神秘的错误消息。安装协议看起来不错，但它不起作用。此后，2k5 的安装也出现了问题。2k8 安装完成了一半，所以它已经在控制面板/软件中，但无法卸载。

所以我的结果 - 不要在高效的服务器/工作站上执行此操作。如果您需要这两个版本，请改用虚拟机。

# language-agnostic - HTTP：生成 ETag 标头

> ID：4533
> 
> 赞同：27
> 
> 时间：2008-08-07T08:45:07.300
> 
> 标签：language-agnostic, http, webserver, header, etag

如何为资源文件生成 ETag HTTP 标头？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-08-09T13:50:17.863

只要它在资源表示发生变化时发生变化，您如何生成它完全取决于您。

您应该尝试以另外一种方式生产它：

1.  不需要您在每个条件 GET 上重新计算它，并且
2.  如果资源内容未更改，则不会更改

如果您不将计算的哈希值与文件一起存储，则使用内容的哈希值可能会导致您在#1 失败。

如果您重新排列文件系统或从多个服务器提供内容，使用 inode 编号可能会导致您在 #2 失败。

一种可行的机制是使用完全依赖于内容的东西，例如 SHA-1 哈希或版本字符串，只要资源内容发生更改，就会计算和存储一次。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-08-07T08:57:37.993

etag 是服务器发送给客户端的任意字符串，客户端将在下次请求文件时将其发送回服务器。

etag 应该可以基于文件在服务器上计算。有点像校验和，但您可能不想对每个发送它的文件进行校验和。

```
 server                client

        <------------- request file foo

 file foo etag: "xyz"  -------->

        <------------- request file foo
                       etag: "xyz" (what the server just sent)

 (the etag is the same, so the server can send a 304) 
```

我建立了一个格式为“dateamp-file size-file inode number”的字符串。因此，如果在将文件提供给客户端后在服务器上更改了文件，则如果客户端重新请求，新生成的 etag 将不匹配。

```
char *mketag(char *s, struct stat *sb)
{
    sprintf(s, "%d-%d-%d", sb->st_mtime, sb->st_size, sb->st_ino);
    return s;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-07T10:13:20.477

来自[http://developer.yahoo.com/performance/rules.html#etags](http://developer.yahoo.com/performance/rules.html#etags)：

> 默认情况下，Apache 和 IIS 都在 ETag 中嵌入数据，这大大降低了有效性测试在具有多个服务器的网站上成功的几率。
> 
> ...
> 
> 如果您没有利用 ETag 提供的灵活验证模型，最好完全删除 ETag。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-09-05T12:38:09.460

如何在 bash 中生成默认的 apache etag

```
for file in *; do printf "%x-%x-%x\t$file\n" `stat -c%i $file` `stat -c%s $file` $((`stat -c%Y $file`*1000000)) ; done 
```

即使我正在寻找与 etag 完全相同的东西（浏览器仅在服务器上发生更改时才要求文件），它也从未起作用，我最终使用了 GET 技巧（添加时间戳作为 js 文件的 get 参数）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T15:58:39.510

我一直在使用 Adler-32 作为 html 链接缩短器。我不确定这是否是一个好主意，但到目前为止，我还没有注意到任何重复。它可以用作 etag 生成器。并且它应该比尝试使用像 sha 这样的加密方案进行散列更快，但我还没有验证这一点。我使用的代码是：

```
 shortlink = str(hex(zlib.adler32(link)+(2**32-1)/2))[2:-1] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-19T22:31:32.220

我建议不要使用它们，而是使用最后修改的标题。

Askapache 对此有一篇有用的文章。（因为他们几乎做了所有看起来的事情！）

[http://www.askapache.com/htaccess/apache-speed-etags.html](http://www.askapache.com/htaccess/apache-speed-etags.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-26T19:17:37.877

Mark Harrison 的代码示例类似于 Apache 2.2 中使用的代码示例。但是，当您有两台服务器具有相同的文件但文件不同时，这种算法会导致负载平衡问题`inode`。这就是为什么在 Apache 2.4 中开发人员简化了 ETag 模式并删除了该`inode`部分。为了使 ETag 更短，它们通常以十六进制编码：

```
 <inttypes.h>

char *mketag(char *s, struct stat *sb)
{
    sprintf(s, "\"%" PRIx64 "-%" PRIx64 "\"", sb->st_mtime, sb->st_size);
    return s;
} 
```

或者对于 Java

```
 etag = '"' + Long.toHexString(lastModified) + '-' +
                                Long.toHexString(contentLength) + '"'; 
```

对于 C#

```
// Generate ETag from file's size and last modification time as unix timestamp in seconds from 1970
public static string MakeEtag(long lastMod, long size)
{
    string etag = '"' + lastMod.ToString("x") + '-' + size.ToString("x") + '"';
    return etag;
}

public static void Main(string[] args)
{
    long lastMod = 1578315296;
    long size = 1047;
    string etag = MakeEtag(lastMod, size);
    Console.WriteLine("ETag: " + etag);
    //=> ETag: "5e132e20-417"
} 
```

该函数返回与 Nginx 兼容的 ETag。查看[来自不同服务器的 ETag 的比较](https://stackoverflow.com/questions/47512043/how-etags-are-generated-and-configured/62996104#62996104)

# database - 简单的 MOLAP 解决方案

> ID：4541
> 
> 赞同：4
> 
> 时间：2008-08-07T08:58:18.460
> 
> 标签：database, logging, text-files, olap

为了分析大量文本日志，我做了一些看起来像这样的黑客操作：

1.  将日志本地导入 Access
2.  重新处理 Cube 链接到 Analisis Service 2000 中以前的 mdb（是的，它是 2k）
3.  使用 Excel 可视化 Cube（它并不大 - 多达数百万个原始条目）

我的黑客是成功的，越来越多的人要求访问我的工具。如您所见，我看到了更多的自动化和更容易的部署。

您现在是否有一些工具/库可以给我同样的但更容易部署？一种**嵌入式 OLAP**服务？

**编辑：**我听说过蒙德里安，但我们对 Java 做的不多。你见过为 .Net/Win32 做过类似的事情吗？商业也行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-19T22:16:28.277

您还可以尝试其他免费的开源 OLAP 服务器，来自 Jedox (www.palo.net) 的 PALO

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T11:10:44.963

我并不完全熟悉上述方法中第 2 步的含义，但如果您正在寻找更强大的 OLAP 解决方案，不妨看看[Mondrian，开源 OLAP/分析服务](http://mondrian.pentaho.org/)模块彭塔霍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-07T11:18:21.657

我不认为 Mondrian 比 SSAS 更好，但我知道它是免费的，并且您可以独立分发它。它使用 XMLA，其多维数据集定义 XML 文件与 SSAS 几乎相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-14T12:46:13.600

SQL 2K 没问题。将立方体粘贴在每个人都可以在网络上看到的服务器上，并告诉他们使用 Excel 连接到它。

# javascript - Firefox 3 小书签中的 Http Auth

> ID：4544
> 
> 赞同：17
> 
> 时间：2008-08-07T09:08:52.260
> 
> 标签：javascript, firefox, delicious-api

我正在尝试创建一个小书签，用于将 del.icio.us 书签发布到单独的帐户。

我从命令行对其进行了测试，例如：

```
wget -O - --no-check-certificate \
"https://seconduser:thepassword@api.del.icio.us/v1/posts/add?url=http://seet.dk&description=test" 
```

这很好用。

然后我想在我的 Firefox 中创建一个书签。我用谷歌搜索并找到了一些零碎的东西，最后得到了：

```
javascript:void(
    open('https://seconduser:password@api.del.icio.us/v1/posts/add?url='
          +encodeURIComponent(location.href)
          +'&description='+encodeURIComponent(document.title),
          'delicious','toolbar=no,width=500,height=250'
        )
    ); 
```

但所发生的一切都是我从 del.icio.us 得到的：

```
<?xml version="1.0" standalone="yes"?>
<result code="access denied" />
<!-- fe04.api.del.ac4.yahoo.net uncompressed/chunked Thu Aug  7 02:02:54 PDT 2008 --> 
```

如果我然后转到地址栏并按回车，它会变为：

```
<?xml version='1.0' standalone='yes'?>
<result code="done" />
<!-- fe02.api.del.ac4.yahoo.net uncompressed/chunked Thu Aug  7 02:07:45 PDT 2008 --> 
```

任何想法如何让它直接从书签中工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-10T02:04:32.530

你能嗅探流量以找到实际发送的内容吗？它是否发送了任何身份验证数据并且它不正确或以服务器不喜欢的形式呈现，或者它根本没有被Firefox发送？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T11:09:03.753

@travis 看起来很不错！我一定会调查一下。我能想到几个可以使用的地方

我从来没有去嗅探流量，但发现我自己的服务器上的一个带有 http-auth 的 php 站点运行良好，所以我认为它很美味。然后我创建了一个 php 页面，它对美味的 api 进行了 wget，一切正常：)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T09:23:44.163

调用该方法两次是否有效？

在我看来，您的身份验证在内容到达后得到批准，所以现在第二次尝试有效，因为您拥有正确的 cookie。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-15T16:35:35.297

我建议查看[Firefox 的 iMacros 插件](http://www.iopus.com/imacros/firefox/)。我用它登录到本地网络服务器，登录后直接导航到某个页面。我的代码看起来像这样，但它允许您记录自己的宏：

```
VERSION BUILD=6000814 RECORDER=FX
TAB T=1
URL GOTO=http://10.20.2.4/login
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:introduce ATTR=NAME:initials CONTENT=username-goes-here
SET !ENCRYPTION NO
TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:introduce ATTR=NAME:password CONTENT=password-goes-here
TAG POS=1 TYPE=INPUT:SUBMIT FORM=NAME:introduce ATTR=NAME:Submit&&VALUE:Go
URL GOTO=http://10.20.2.4/timecard 
```

我中间单击它，它会打开一个新选项卡并运行宏，将我直接带到我想要的页面，并使用我指定的帐户登录。

# html - 什么是 标签用于？

有人记得 `XMP` 标签吗？

什么是它用于以及为什么被弃用？

* * *

 <data id="4549">在

> ID：4545
> 
> 赞同：78
> 
> 时间：2008-08-07T09:21:41.563
> 
> 标签：html, tags

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-28T17:20:48.617

`XMP`和`PRE`不同。标签内的内容`PRE`格式如下：

*   内容以固定字体显示，
*   保留所有空格，并且
*   每个换行符开始一个新行。

如果您想在标签中包含和等特殊字符`<`，则必须对它们进行转义，以免浏览器对其进行特殊解释。`>``&``PRE`

相反，`XMP`标签内的内容*不需要*转义。

唯一不能包含在`XMP`标签中的字符序列是`XMP`结束标签 ( `</XMP>`)。

`XMP`我测试过的浏览器仍然支持。你可以试试[xmp.html](http://dadinck.x10.mx/xmp.html)。查看源代码以查看标签。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-08-07T09:43:28.353

在 W3C 上的 Google 快速搜索显示，它是为在 HTML 3.2 及更早版本中`XMP`显示**预格式化文本而引入的。**当 W3C 弃用该`XMP`标签时，它建议使用该`PRE`标签作为首选替代品。

更新：[http](http://www.w3.org/TR/REC-html32#xmp) ://www.w3.org/TR/REC-html32#xmp，http : [//www.w3.org/MarkUp/html-spec/html-spec_5.html#SEC5.5.2.1](http://www.w3.org/MarkUp/html-spec/html-spec_5.html#SEC5.5.2.1)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-13T08:02:30.377

XMP does some things that PRE does not support. I still depend on XMP, there is *no* substitute.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-27T06:04:56.950

`<xmp>`与[strapdown.js](http://strapdownjs.com/)一起用于格式化markdown 表示法。结合术语*bootstrap*和*markdown*的名称*捷联*。

 **```
<!DOCTYPE html>
<html>
  <title>Example</title>
  <xmp theme="united">
## Example

 - note one
 - note two
 - note three
  </xmp>
  <script src="http://strapdownjs.com/v/0.2/strapdown.js"></script>
</html> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-01-24T01:44:59.300

I still use the `xmp` tag for debugging `var_dump();` in PHP. I just can't remember to use the `pre` tag for some reason.

I think it doesn't really matter because if you really want to output text, you should use `textarea` with the `readonly` attribute.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-29T15:30:39.097

见[http://www.w3.org/Bugs/Public/show_bug.cgi?id=12235](http://www.w3.org/Bugs/Public/show_bug.cgi?id=12235)

对于 HTML5。根据 HTML5 编辑器（评论 11 和 12），无论哪种方式，它都是非常接近的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-06-02T13:52:57.383

我使用`<textarea>`了 ，它将 html 代码放入一个整洁的框中，并将代码明确定义为与之前或之后的文本不同。

`<textarea><b>boldtext</b><textarea>`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-03-09T21:01:52.153

仍然可以显示原始 html - 如果您在脚本中使用它，请打破开始标记。

```
var stuff='<xmp'+'>this is shown as is<br/>hello</xmp>';
document.getElementById("x").innerHTML=stuff;
```

```
<div id="x"></div>
```**</data>

# c# - DataTable 循环性能比较

> ID：4556
> 
> 赞同：13
> 
> 时间：2008-08-07T10:01:04.823
> 
> 标签：c#, performance, loops

以下哪项表现最好？

我已经看到在 JavaScript 中实现的方法 2 具有巨大的性能提升，但是，我无法衡量 C# 中的任何收益，并且想知道编译器是否已经执行方法 2，即使像方法 1 那样编写也是如此。

方法 2 背后的理论是代码不必在每次迭代时访问 DataTable.Rows.Count，它可以简单地访问 int c。

**方法一**

```
for (int i = 0; i < DataTable.Rows.Count; i++) {
    // Do Something
} 
```

**方法二**

```
for (int i = 0, c = DataTable.Rows.Count; i < c; i++) {
    // Do Something
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-08-07T10:09:58.703

不，它不能这样做，因为没有办法表示一个值*随时间的常数*。

如果编译器应该能够做到这一点，那么返回值的代码必须保证该值是常量，并且在循环期间不会改变。

但是，在这种情况下，作为循环的一部分，您可以自由地将新行添加到数据表中，因此您可以按照自己的方式做出保证。

所以简而言之，如果结束索引不是变量，编译器将不会进行优化。

在变量的情况下，编译器可以只查看循环代码并看到这个特定的变量没有改变，它可能会这样做并在开始循环之前将值加载到寄存器中，但是由此带来的任何性能提升除非您的循环体为空，否则很可能可以忽略不计。

结论：如果您知道或愿意接受，结束循环索引在循环期间是恒定的，请将其放入变量中。

* * *

**编辑：**重新阅读您的帖子，是的，您可能会看到两种情况下的性能提升也可以忽略不计，因为 JITter 优化了代码。JITter 可能会将您的最终索引读取优化为直接访问包含行数的数据表中的变量，并且内存读取无论如何也不是那么昂贵。另一方面，如果读取该属性是一项非常昂贵的操作，您会看到更显着的差异。

# networking - 如何设置服务质量？

> ID：4565
> 
> 赞同：8
> 
> 时间：2008-08-07T10:20:16.687
> 
> 标签：networking, modem, qos, adsl

我说的是[http://en.wikipedia.org/wiki/Quality_of_service](http://en.wikipedia.org/wiki/Quality_of_service)。通过流式传输 stackoverflow 播客并将最新更新下载到 ubuntu，我希望 QoS 正常工作，这样我就可以使用 stackoverflow，而不会导致我的 http 连接超时或永久占用。

我正在使用内置 QoS 的 iConnect 624 ADSL 调制解调器，但我似乎无法让它工作。甚至可以控制下游（即从 ISP 到您的调制解调器）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-07T10:25:37.520

我不知道这是否会对您有所帮助，但我从来都不喜欢直接使用 ISP 提供的盒子。我个人使用[Linksys wrt54gl](http://www.newegg.com/Product/ProductList.aspx?Submit=ENE&DEPA=0&Description=wrt54gl&x=0&y=0)和[DD-wrt](http://www.dd-wrt.com) ​​，在我的 ISP 提供的盒子后面（DMZ）。

DD-wrt ​​具有出色的 QoS 管理。

抱歉，我无法为您现有的硬件提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-25T08:00:30.470

您只需要[tc 命令](http://www.arvanta.net/~mps/linux-tc.html)来处理 Linux boxen 上的 QoS。[但是，由于我在此处获得并详细说明](https://stackoverflow.com/questions/583532/software-router-traffic-monitoring/583987#583987)了结果，因此我不会对此抱有太多期望。

# video - 视频压缩：什么是离散余弦变换？

> ID：4582
> 
> 赞同：16
> 
> 时间：2008-08-07T11:04:37.423
> 
> 标签：video, compression, dct

我已经实现了一种称为离散余弦变换的图像/视频变换技术。该技术用于 MPEG 视频编码。我的算法基于以下 URL 中提出的想法：

[http://vsr.informatik.tu-chemnitz.de/~jan/MPEG/HTML/mpeg_tech.html](http://vsr.informatik.tu-chemnitz.de/~jan/MPEG/HTML/mpeg_tech.html)

现在我可以转换黑白图像的 8x8 部分，例如：

```
0140 0124 0124 0132 0130 0139 0102 0088  
0140 0123 0126 0132 0134 0134 0088 0117  
0143 0126 0126 0133 0134 0138 0081 0082  
0148 0126 0128 0136 0137 0134 0079 0130  
0147 0128 0126 0137 0138 0145 0132 0144  
0147 0131 0123 0138 0137 0140 0145 0137  
0142 0135 0122 0137 0140 0138 0143 0112  
0140 0138 0125 0137 0140 0140 0148 0143

```

进入这张图片，右上角有所有重要信息。转换后的块如下所示：

```
1041 0039 -023 0044 0027 0000 0021 -019  
-050 ​​0044 -029 0000 0009 -014 0032 -010  
0000 0000 0000 0000 -018 0010 -017 0000  
0014 -019 0010 0000 0000 0016 -012 0000  
0010 -010 0000 0000 0000 0000 0000 0000  
-016 0021 -014 0010 0000 0000 0000 0000  
0000 0000 0000 0000 0000 0000 0000 0000  
0000 0000 -010 0013 -014 0010 0000 0000  

```

现在，我需要知道如何利用这种转变？我想检测同一图像（或另一个图像）中代表良好匹配的其他 8x8 块。

另外，这种转变给了我什么？为什么存储在转换图像右上角的信息很重要？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-08-09T01:03:18.317

DCT 的结果是将原始源转换为频域。左上角的条目存储“幅度”，“基本”频率和频率沿水平轴和垂直轴增加。DCT 的结果通常是更常见的较低频率（左上象限）的幅度集合和较高频率的较少条目。正如 lassevk 所提到的，通常只是将这些较高的频率归零，因为它们通常构成源的非常小的部分。但是，这确实会导致信息丢失。为了完成压缩，通常在 DCT 源上使用无损压缩。这就是压缩出现的地方，因为所有这些零运行都被压缩到几乎没有。

使用 DCT 查找相似区域的一个可能优势是您可以对低频值（左上角）进行第一次匹配。这减少了您需要匹配的值的数量。如果您找到低频值的匹配项，您可以增加对较高频率的比较。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-12T08:28:06.513

我从[The Data Compression Book](https://rads.stackoverflow.com/amzn/click/com/1558514341)中了解了有关 DCT 的所有信息。除了是对数据压缩领域的一个很好的介绍之外，它还有一章接近结尾的有损图像压缩，介绍了 JPEG 和 DCT。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-31T23:41:29.260

通过首先查看一维案例，可以更容易地了解这些转换背后的概念。[这里](http://mathworld.wolfram.com/images/eps-gif/FourierSeriesSquareWave_800.gif)的图像显示了一个方波以及一个无限级数的前几项。观察它，请注意，如果将这些项的函数相加，它们开始近似于方波的形状。添加的项越多，近似值就越好。但是，要从近似到精确信号，您必须对无数项求和。原因是方波是不连续的。如果您将方波视为时间的函数，它会在零时间内从 -1 变为 1。代表这样的事情需要一个无限的系列。再看一下系列项的情节。第一个是红色，第二个是黄色。连续的术语有更多的“上下”转换。这些来自每个术语的增加频率。坚持方波作为时间的函数，

在现实世界中，没有方波。零时间什么都没有发生。例如，音频信号占据 20Hz 到 20KHz 的范围，其中 Hz 为 1/次。这样的事情可以用有限级数来表示。

对于图像，数学是相同的，但有两件事是不同的。首先，它是二维的。其次，时间的概念毫无意义。在一维意义上，方波只是一个函数，它为我们所说的时间参数提供一些数值。（静态）图像是一个函数，它为每对行、列的倒数提供一个数值。换句话说，图像是二维空间的函数，它是一个矩形区域。像这样的函数可以用它的空间频率来表示。要了解什么是空间频率，请考虑一个 8 位灰度图像和一对相邻像素。图像中可能发生的最突然的转变是在 1 个像素的距离上从 0（比如黑色）到 255（比如白色）。

图像的二维傅里叶（或余弦）变换会产生与图像大小相同的值数组，表示相同的信息不是空间的函数，而是 1/空间的函数。信息从原始最高行和列的倒数沿对角线从最低频率到最高频率排序。一个例子是[here](http://www.cs.cf.ac.uk/Dave/Multimedia/DCT.jpg)。

对于图像压缩，您可以变换图像，丢弃一些高频项并将剩余的项逆变换回图像，该图像的细节比原始图像少。尽管它转换回相同大小的图像（删除的项被零替换），但在频域中，它占用的空间更少。

另一种看待它的方法是将图像缩小到更小的尺寸。例如，如果您尝试通过丢弃一行中每四个像素中的三个和每四行中的三个来减小图像的大小，那么您将拥有一个大小为 1/4 的数组，但图像看起来会很糟糕。在大多数情况下，这是通过 2D 插值器完成的，该插值器通过对较大图像像素的矩形组进行平均来生成新像素。这样做，插值具有类似丢弃频域中的序列项的效果，只是计算速度要快得多。

为了做更多的事情，我将以傅立叶变换为例。对该主题的任何好的讨论都将说明傅里叶和余弦变换是如何相关的。图像的傅里叶变换不能直接这样看待，因为它是由复数组成的。它已经分为两种信息，数字的实部和虚部。通常，您会看到这些图像或图表。但是（通常）将复数分成它们的幅度和相位角更有意义。这只是在复平面上取一个复数并切换到极坐标。

对于音频信号，考​​虑组合的正弦和余弦函数在其参数中采用一个态度量来来回移动函数（作为信号表示的一部分）。对于图像，相位信息描述了序列中的每个项如何相对于频率空间中的其他项移动。在图像中，边缘（希望）如此明显，以至于它们可以通过频域中的最低频率项很好地表征。发生这种情况不是因为它们是突然的过渡，而是因为它们有很多黑色区域与很多较亮的区域相邻。考虑边缘的一维切片。灰度级为零，然后向上过渡并保持在那里。可视化正弦波，它是第一个近似项，它在 sin(0) 处穿过信号转换的中点。该项的相位角对应于图像空间中的位移。有一个很好的例子[在这里](http://en.wikipedia.org/wiki/Phase_correlation)。如果您正在尝试查找形状并可以制作参考形状，这是识别它们的一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-10T01:39:42.127

我建议拿起一份[Digital Video Compression](http://isbn.nu/9780071424875/price) - 它是图像和视频压缩算法的一个非常好的概述。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-27T11:33:54.560

Anthony Cramp 的回答对我来说看起来不错。正如他提到的，DCT 将数据转换为频域。DCT 大量用于视频压缩，因为人类视觉系统必须对高频变化不太敏感，因此将较高频率值归零会导致文件更小，对人类对视频质量的感知几乎没有影响。

就使用 DCT 比较图像而言，我想唯一真正的好处是如果你去掉了较高频率的数据，因此有一组更小的数据要搜索/匹配。像 Harr 小波这样的东西可能会提供更好的图像匹配结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T11:08:21.020

如果我没记错的话，这个矩阵允许您将数据保存到压缩文件中。

如果您进一步阅读，您会发现要从最终矩阵中读取的锯齿形数据模式。最重要的数据在左上角，最不重要的在右下角。因此，如果您在某个时候停止写入并将其余部分视为 0，即使它们不是，您也会得到图像的有损近似值。

您丢弃的值的数量会以图像保真度为代价增加压缩。

但我相信其他人可以给你一个更好的解释。

# c# - 如何在 C#.Net 中创建原型方法（如 JavaScript）？

> ID：4610
> 
> 赞同：19
> 
> 时间：2008-08-07T12:00:50.540
> 
> 标签：c#, .net

如何在 C#.Net 中制作原型方法？

在 JavaScript 中，我可以执行以下操作来为字符串对象创建一个 trim 方法：

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
} 
```

我该如何在 C#.Net 中执行此操作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-07T12:04:11.907

您不能动态地将方法添加到 .NET 中的现有对象或类，除非更改该类的源。

但是，您可以在 C# 3.0 中使用扩展方法，这些方法*看起来*像新方法，但却是编译时的魔法。

要为您的代码执行此操作：

```
public static class StringExtensions
{
    public static String trim(this String s)
    {
        return s.Trim();
    }
} 
```

要使用它：

```
String s = "  Test  ";
s = s.trim(); 
```

这看起来像一个新方法，但编译方式与此代码完全相同：

```
String s = "  Test  ";
s = StringExtensions.trim(s); 
```

你到底想完成什么？也许有更好的方法来做你想做的事？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-07T12:09:02.007

听起来您在谈论 C# 的扩展方法。您可以通过在第一个参数之前插入“this”关键字来向现有类添加功能。该方法必须是静态类中的静态方法。.NET 中的字符串已经有一个“Trim”方法，所以我将使用另一个示例。

```
public static class MyStringEtensions
{
    public static bool ContainsMabster(this string s)
    {
        return s.Contains("Mabster");
    }
} 
```

所以现在每个字符串都有一个非常有用的 ContainsMabster 方法，我可以像这样使用它：

```
if ("Why hello there, Mabster!".ContainsMabster()) { /* ... */ } 
```

请注意，您还可以向接口添加扩展方法（例如 IList），这意味着实现该接口的任何类也将采用该新方法。

您在扩展方法中声明的任何额外参数（在第一个“this”参数之后）都被视为普通参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-07T12:03:42.563

您需要创建一个需要 .NET 3.5 的扩展方法。该方法需要是静态的，在静态类中。该方法的第一个参数需要在签名中以“this”为前缀。

```
public static string MyMethod(this string input)
{
    // do things
} 
```

然后你可以这样称呼它

```
"asdfas".MyMethod(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-08-07T12:04:14.560

使用 3.5 编译器，您可以使用扩展方法：

```
public static void Trim(this string s)
{
  // implementation
} 
```

您可以通过包含以下 hack 在 CLR 2.0 目标项目（3.5 编译器）上使用它：

```
namespace System.Runtime.CompilerServices
{
  [AttributeUsage(AttributeTargets.Method | AttributeTargets.Class | AttributeTargets.Assembly)]
  public sealed class ExtensionAttribute : Attribute
  {
  }
} 
```

# c# - CSharpCodeProvider 编译性能

> ID：4612
> 
> 赞同：20
> 
> 时间：2008-08-07T12:01:14.503
> 
> 标签：c#, performance, compiler-construction

CompileAssemblyFromDom比*CompileAssemblyFromSource快**吗*？

它*应该*是因为它可能绕过了编译器前端。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-27T01:03:17.197

CompileAssemblyFromDom 编译为 .cs 文件，然后通过普通的 C# 编译器运行该文件。

例子：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.CSharp;
using System.CodeDom;
using System.IO;
using System.CodeDom.Compiler;
using System.Reflection;

namespace CodeDomQuestion
{
    class Program
    {

        private static void Main(string[] args)
        {
            Program p = new Program();
            p.dotest("C:\\fs.exe");
        }

        public void dotest(string outputname)
        {
            CSharpCodeProvider cscProvider = new CSharpCodeProvider();
            CompilerParameters cp = new CompilerParameters();
            cp.MainClass = null;
            cp.GenerateExecutable = true;
            cp.OutputAssembly = outputname;

            CodeNamespace ns = new CodeNamespace("StackOverflowd");

            CodeTypeDeclaration type = new CodeTypeDeclaration();
            type.IsClass = true;
            type.Name = "MainClass";
            type.TypeAttributes = TypeAttributes.Public;

            ns.Types.Add(type);

            CodeMemberMethod cmm = new CodeMemberMethod();
            cmm.Attributes = MemberAttributes.Static;
            cmm.Name = "Main";
            cmm.Statements.Add(new CodeSnippetExpression("System.Console.WriteLine('f'zxcvv)"));
            type.Members.Add(cmm);

            CodeCompileUnit ccu = new CodeCompileUnit();
            ccu.Namespaces.Add(ns);

            CompilerResults results = cscProvider.CompileAssemblyFromDom(cp, ccu);

            foreach (CompilerError err in results.Errors)
                Console.WriteLine(err.ErrorText + " - " + err.FileName + ":" + err.Line);

            Console.WriteLine();
        }
    }
} 
```

它在（现在不存在的）临时文件中显示错误：

> ) 预期 - c:\Documents and Settings\jacob\Local Settings\Temp\x59n9yb-.0.cs:17
> 
> ; 预期 - c:\Documents and Settings\jacob\Local Settings\Temp\x59n9yb-.0.cs:17
> 
> 无效的表达式术语 ')' - c:\Documents and Settings\jacob\Local Settings\Temp\x59n9yb-.0.cs:17

所以我想答案是“不”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T12:48:29.557

我之前尝试过找到最终的编译器调用，但我放弃了。对于我的耐心，有很多层的接口和虚拟类。

我不认为编译器的源代码阅读器部分以 DOM 树结尾，但直觉上我会同意你的看法。将 DOM 转换为 IL 所需的工作应该比阅读 C# 源代码要少得多。

# version-control - 对于此设置，什么是好的 Mercurial 使用模式？

> ID：4617
> 
> 赞同：14
> 
> 时间：2008-08-07T12:05:48.410
> 
> 标签：version-control, mercurial, dvcs

我们在同一个封闭（呃，愚蠢的政府）网络上有两个开发人员，另一个开发人员在路上开车几分钟，第四个开发人员在全国中途。电子邮件、ftp 和删除媒体对于不在同一网络上的人来说都是可能的传输方法。

我是两个封闭的网络开发人员之一，将我们视为“大师”位置。

团队的最佳 Mercurial 设置/模式是什么？向/从远程开发人员传输更改的最佳方式是什么？由于我负责，我认为我必须至少保留一个主存储库和另一个我可以开发的本地存储库。其他人应该只需要主人的克隆。这是正确的吗？我想这也让我负责合并？

正如你所看到的，我仍在尝试围绕分布式版本控制。我认为在连接情况下没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-05-22T21:57:29.010

补丁是一种简单而通用的解决方案。

为了移动更大的更改组（尤其是二进制更改和合并），Mercurial 提供了二进制包。捆绑包基本上是当你这样做时在网络上发送的二进制文件`hg push`，但在这里它被捕获在一个文件中。

假设我以某种方式获得了克隆（通过闪存驱动器、DVD 等）。调用它`upstream`。然后我制作了第二个克隆，调用它`devel`。我进行所有的开发`devel`并进行大量的提交、合并等。由于 Mercurial 是分布式的，所以我可以离线完成所有这些工作。

`upstream`要查看我缺少哪些变更集

```
% hg outgoing ../upstream 
```

当我有东西要发送时，我可以使用

```
% hg bundle changes.hg ../upstream 
```

获取包含变更集的二进制压缩文件，包括所有元数据。然后我可以将此文件刻录到 CD 上并通过邮件发送...

捆绑包的接收者可以做

```
% hg incoming changes.hg 
```

查看变更集列表和

```
% hg pull changes.hg 
```

解压缩并将变更集添加到他的存储库。然后他很可能不得不合并——这就像他通过 HTTP 或 SSH 直接从您的存储库中提取一样。

请注意，`upstream`存储库仅用作记住上游存储库中已找到哪些变更集的便捷方式。您也可以只记下变更集 ID，并`hg bundle --base`在捆绑时使用以指定基本（通用）变更集。查看`hg help bundle`或[查看 wiki](http://www.selenic.com/mercurial/wiki/Bundle)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T13:37:30.300

网络外的用户可以制作[补丁](http://hgbook.red-bean.com/hgbookch12.html#x16-26800012.1)，和/或使用[电子邮件](http://hgbook.red-bean.com/hgbookch14.html#x18-32100014.4)将更新发送到主仓库或某人，比如你自己来合并它们。其他内部人员可以拥有本地副本，例如您自己并进行合并——但如果您拥有这些来自网络之外的补丁，最好由一个人处理它们，这样没人会感到困惑，但这是您必须要做的事情考虑自己。

以另一种方式同步，您将创建一个补丁，然后他们通过电子邮件或将闪存驱动器发送给远程开发人员以修补他们的系统。你需要在团队中进行一些良好的沟通，我很庆幸我没有站在你的立场上。

这些是我唯一的建议——嗯，很明显，给他们一个 VPN 连接！我很想听听进展如何，什么计划稳定到每周的最佳状态，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-07T12:53:17.597

正确的。任何东西进入封闭网络的唯一方法是通过闪存驱动器。

# sql - SQL 案例表达式语法？

> ID：4622
> 
> 赞同：61
> 
> 时间：2008-08-07T12:13:01.390
> 
> 标签：sql

SQL Case 表达式的**完整且正确的语法是什么？**

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-08-07T12:20:22.827

**完整**的语法取决于您使用的数据库引擎：

对于 SQL Server：

```
CASE case-expression
    WHEN when-expression-1 THEN value-1
  [ WHEN when-expression-n THEN value-n ... ]
  [ ELSE else-value ]
END 
```

或者：

```
CASE
    WHEN boolean-when-expression-1 THEN value-1
  [ WHEN boolean-when-expression-n THEN value-n ... ]
  [ ELSE else-value ]
END 
```

表达式等：

```
case-expression    - something that produces a value
when-expression-x  - something that is compared against the case-expression
value-1            - the result of the CASE statement if:
                         the when-expression == case-expression
                      OR the boolean-when-expression == TRUE
boolean-when-exp.. - something that produces a TRUE/FALSE answer 
```

链接：[案例（Transact-SQL）](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

另请注意，WHEN 语句的顺序很重要。您可以轻松编写多个重叠的 WHEN 子句，并**使用第一个匹配的**WHEN 子句。

**注意**：如果没有指定 ELSE 子句，并且没有找到匹配的 WHEN 条件，则 CASE 表达式的值为*NULL*。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-10-22T07:41:41.133

考虑到您标记了多个产品，我想说*完全*正确的语法是 ISO/ANSI SQL-92 标准中的语法：

```
<case expression> ::=
       <case abbreviation>
     | <case specification>

<case abbreviation> ::=
       NULLIF <left paren> <value expression> <comma>
              <value expression> <right paren>
     | COALESCE <left paren> <value expression>
                { <comma> <value expression> }... <right paren>

<case specification> ::=
       <simple case>
     | <searched case>

<simple case> ::=
     CASE <case operand>
          <simple when clause>...
        [ <else clause> ]
     END

<searched case> ::=
     CASE
       <searched when clause>...
     [ <else clause> ]
     END

<simple when clause> ::= WHEN <when operand> THEN <result>

<searched when clause> ::= WHEN <search condition> THEN <result>

<else clause> ::= ELSE <result>

<case operand> ::= <value expression>

<when operand> ::= <value expression>

<result> ::= <result expression> | NULL

<result expression> ::= <value expression> 
```

语法规则

```
1) NULLIF (V1, V2) is equivalent to the following <case specification>:

     CASE WHEN V1=V2 THEN NULL ELSE V1 END

2) COALESCE (V1, V2) is equivalent to the following <case specification>:

     CASE WHEN V1 IS NOT NULL THEN V1 ELSE V2 END

3) COALESCE (V1, V2, . . . ,n ), for n >= 3, is equivalent to the
   following <case specification>:

     CASE WHEN V1 IS NOT NULL THEN V1 ELSE COALESCE (V2, . . . ,n )
     END

4) If a <case specification> specifies a <simple case>, then let CO
   be the <case operand>:

   a) The data type of each <when operand> WO shall be comparable
      with the data type of the <case operand>.

   b) The <case specification> is equivalent to a <searched case>
      in which each <searched when clause> specifies a <search
      condition> of the form "CO=WO".

5) At least one <result> in a <case specification> shall specify a
   <result expression>.

6) If an <else clause> is not specified, then ELSE NULL is im-
   plicit.

7) The data type of a <case specification> is determined by ap-
   plying Subclause 9.3, "Set operation result data types", to the
   data types of all <result expression>s in the <case specifica-
   tion>.

Access Rules

   None.

General Rules

1) Case:

   a) If a <result> specifies NULL, then its value is the null
      value.

   b) If a <result> specifies a <value expression>, then its value
      is the value of that <value expression>.

2) Case:

   a) If the <search condition> of some <searched when clause> in
      a <case specification> is true, then the value of the <case
      specification> is the value of the <result> of the first
      (leftmost) <searched when clause> whose <search condition> is
      true, cast as the data type of the <case specification>.

   b) If no <search condition> in a <case specification> is true,
      then the value of the <case expression> is the value of the
      <result> of the explicit or implicit <else clause>, cast as
      the data type of the <case specification>. 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-08-07T12:30:18.390

以下是[`CASE`PostgreSQL 文档中的语句示例](http://www.postgresql.org/docs/current/static/functions-conditional.html "条件表达式")（此处 Postgres 遵循 SQL 标准）：

```
SELECT a,
   CASE WHEN a=1 THEN 'one'
        WHEN a=2 THEN 'two'
        ELSE 'other'
   END
FROM test; 
```

或者

```
SELECT a,
   CASE a WHEN 1 THEN 'one'
          WHEN 2 THEN 'two'
          ELSE 'other'
   END
FROM test; 
```

显然，当您仅根据可能值列表检查一个字段时，第二种形式更清晰。第一种形式允许更复杂的表达式。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2009-03-26T19:05:29.707

Sybase 的[大小写语法](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks115.htm)与 SQL Server 相同：

## 描述

支持条件SQL表达式；可以在任何可以使用值表达式的地方使用。

### 句法

```
case 
     when search_condition then expression 
    [when search_condition then expression]...
    [else expression]
end 
```

### 大小写和值语法

```
case expression
     when expression then expression 
    [when expression then expression]...
    [else expression]
end 
```

## 参数

### 案子

开始 case 表达式。

### 什么时候

在要比较的搜索条件或表达式之前。

### 搜索条件

用于设置所选结果的条件。case 表达式的搜索条件类似于 where 子句中的搜索条件。Transact-SQL 用户指南中详细介绍了搜索条件。

### 然后

在指定 case 结果值的表达式之前。

### 表达

是列名、常量、函数、子查询，或通过算术或位运算符连接的列名、常量和函数的任意组合。有关表达式的更多信息，请参阅中的“表达式”。

## 例子

```
select disaster, 
       case
            when disaster = "earthquake" 
                then "stand in doorway"
            when disaster = "nuclear apocalypse" 
                then "hide in basement"
            when monster = "zombie apocalypse" 
                then "hide with Chuck Norris"
            else
                then "ask mom"
       end 
  from endoftheworld 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-08-07T12:27:02.610

我挖出了相同的 Oracle 页面，看起来这是相同的语法，只是描述略有不同。

链接：[Oracle/PLSQL：案例陈述](http://www.techonthenet.com/oracle/functions/case.php)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-10-21T19:31:21.343

11g 文档中的Oracle[语法](http://download.oracle.com/docs/cd/B28359_01/server.111/b28286/expressions004.htm#SQLRF20037)：

```
CASE { simple_case_expression | searched_case_expression }
     [ else_clause ]
     END 
```

*simple_case_expression*

```
expr { WHEN comparison_expr THEN return_expr }... 
```

*searched_case_expression*

```
{ WHEN condition THEN return_expr }... 
```

*else_clause*

```
ELSE else_expr 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-07T16:54:11.760

[在这里，您可以找到SQL 中 MySQL 案例语句](https://geekposting.com/case-statements-in-sql-complete-guide/)的完整指南。

```
CASE
     WHEN some_condition THEN return_some_value
     ELSE return_some_other_value
END 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-01-28T09:18:31.790

SQL SERVER 中的 case 语句语法：

```
CASE column
   WHEN value1 THEN 1
   WHEN value3 THEN 2
   WHEN value3 THEN 3
   WHEN value1 THEN 4
   ELSE ''
END 
```

我们也可以像下面这样使用：

```
CASE 
   WHEN column=value1 THEN 1
   WHEN column=value3 THEN 2
   WHEN column=value3 THEN 3
   WHEN column=value1 THEN 4
   ELSE ''
END 
```

# asp.net - 升级到 ASP.NET 3.x

> ID：4627
> 
> 赞同：12
> 
> 时间：2008-08-07T12:21:25.070
> 
> 标签：asp.net, .net-3.5

我目前知道 ASP.NET 2.0 即将推出，并且有 .Net Framework 的 3.x 版本。

是否可以将我的 ASP.NET Web 服务器升级到 .Net Framework 3.x 版？

* * *

但是，我已经尝试过，选择在IIS中使用哪个版本的.NET Framwork（ASP.NET选项卡），仅版本1.1和2.0显示。

有解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-08-07T12:41:49.897

> 如果我安装 3.5 并设置 IIS 以使用 2.0。我将能够使用 3.5 的功能？

对，那是正确的。您将 2.0 和 3.5 站点的 IIS 设置为 2.0，因为它们都在同一个 CLR 上运行。3.5 使用与 2.0 不同的编译方法。这是在网站的 web.config 中声明的。有关这方面的更多详细信息，请参阅[这篇文章](http://blogs.msdn.com/vijaysk/archive/2008/03/20/running-asp-net-3-5-on-iis.aspx)。但是 IIS 中 3.5 和 2.0 ASP.net 站点的设置是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T12:39:04.363

不幸的是，*.NET 版本可以并排安装，因此不会破坏任何“遗留”应用程序*的说法并不完全正确。如果安装 3.5，则需要 2.0 SP1，这*可能*会破坏使用 2.0 并连接到 Oracle 数据库服务器的旧应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T12:32:22.023

当然，下载 3.5 可再发行组件，将其安装在服务器上，一切顺利。.NET 版本可以并排安装，因此不会破坏任何“旧版”应用程序。

[http://www.microsoft.com/downloads/details.aspx?FamilyId=333325FD-AE52-4E35-B531-508D977D32A6&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyId=333325FD-AE52-4E35-B531-508D977D32A6&displaylang=en)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-16T16:22:39.737

门杀手，

.NET 3.0 和 .NET 3.5 并没有改变 CLR 的版本，所以“使用 ASP.NET 3.5”是一个更复杂的事情，听起来应该是一开始。本质上，您仍然在 2.0 CLR 上运行，但您使用的是 C# 3.0 编译器并链接到 3.5 库。这意味着将一堆东西添加到您的 Web.config 文件中以成为 ASP.NET 3.5 项目。

Scott Hanselman 有一篇很棒的博客文章，涵盖了详细信息：

[http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx](http://www.hanselman.com/blog/HowToSetAnIISApplicationOrAppPoolToUseASPNET35RatherThan20.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T12:35:04.670

您在 IIS 中选择的版本是要使用的 CLR 版本。CLR 只有两个版本。.NET Framework 3.5 在 CLR 2.0 上运行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-16T16:20:43.673

新框架是 .Net 3.5，如果您使用 Linq 等功能，您将拥有一个新的程序集 System.Core，+ 更多

.Net 3.5 带有新的 C#3.0 编译器

ASP.Net 仍然是 2.0 版

可爱又令人困惑不是吗 ;-)

您应该将服务器上的 .Net 框架升级到 .Net 3.5 SP1，但您仍将运行 ASP.Net 2.0

# c# - 如何动态评估 C# 代码？

> ID：4629
> 
> 赞同：100
> 
> 时间：2008-08-07T12:26:46.917
> 
> 标签：c#, reflection, properties, c#-2.0

我可以`eval("something()");`在 JavaScript 中动态执行代码。有没有办法让我在 C# 中做同样的事情？

我正在尝试做的一个例子是：我有一个整数变量（比如`i`），并且我有多个属性名称：“Property1”、“Property2”、“Property3”等。现在，我想执行一些操作关于“Property *i* ”属性的值`i`。

这对于 Javascript 来说非常简单。有没有办法用 C# 做到这一点？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-06-23T06:33:32.730

使用 Roslyn 脚本 API（[此处有更多示例](https://github.com/dotnet/roslyn/wiki/Scripting-API-Samples)）：

```
// add NuGet package 'Microsoft.CodeAnalysis.Scripting'
using Microsoft.CodeAnalysis.CSharp.Scripting;

await CSharpScript.EvaluateAsync("System.Math.Pow(2, 4)") // returns 16 
```

您还可以运行任何一段代码：

```
var script = await CSharpScript.RunAsync(@"
                class MyClass
                { 
                    public void Print() => System.Console.WriteLine(1);
                }") 
```

并参考之前运行中生成的代码：

```
await script.ContinueWithAsync("new MyClass().Print();"); 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2008-08-07T12:31:18.530

**免责声明：**这个答案写于 2008 年。从那时起，情况发生了翻天覆地的变化。

查看此页面上的其他答案，尤其是详细信息`Microsoft.CodeAnalysis.CSharp.Scripting`。

其余答案将与最初发布的相同，但不再准确。

* * *

不幸的是，C# 不是这样的动态语言。

但是，您可以做的是创建一个包含类和所有内容的 C# 源代码文件，并通过 C# 的 CodeDom 提供程序运行它并将其编译成程序集，然后执行它。

MSDN 上的这个论坛帖子在页面下方包含一些示例代码的答案：
[从字符串创建匿名方法？](https://social.msdn.microsoft.com/Forums/vstudio/en-US/6a783cc4-bb54-4fec-b504-f9b1ed786b54/create-a-anonymous-method-from-a-string)

我很难说这是一个很好的解决方案，但无论如何都是可能的。

你会在那个字符串中期待什么样的代码？如果它是有效代码的一小部分，例如只是数学表达式，则可能存在其他替代方案。

* * *

**编辑**：嗯，这教会我先彻底阅读问题。是的，反射可以在这里给你一些帮助。

如果你用 ; 分割字符串 首先，要获取单个属性，您可以使用以下代码为类的特定属性获取 PropertyInfo 对象，然后使用该对象来操作特定对象。

```
String propName = "Text";
PropertyInfo pi = someObject.GetType().GetProperty(propName);
pi.SetValue(someObject, "New Value", new Object[0]); 
```

链接：[PropertyInfo.SetValue 方法](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.propertyinfo.setvalue)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-07T12:31:07.563

并不真地。您可以使用反射来实现您想要的，但它不会像在 Javascript 中那么简单。例如，如果你想将一个对象的私有字段设置为某个东西，你可以使用这个函数：

```
protected static void SetField(object o, string fieldName, object value)
{
   FieldInfo field = o.GetType().GetField(fieldName, BindingFlags.Instance | BindingFlags.NonPublic);
   field.SetValue(o, value);
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2011-06-23T16:25:10.450

这是c#下的eval函数。我用它从字符串转换匿名函数（Lambda 表达式）。来源： http: [//www.codeproject.com/KB/cs/evalcscode.aspx](http://www.codeproject.com/KB/cs/evalcscode.aspx)

```
public static object Eval(string sCSCode) {

  CSharpCodeProvider c = new CSharpCodeProvider();
  ICodeCompiler icc = c.CreateCompiler();
  CompilerParameters cp = new CompilerParameters();

  cp.ReferencedAssemblies.Add("system.dll");
  cp.ReferencedAssemblies.Add("system.xml.dll");
  cp.ReferencedAssemblies.Add("system.data.dll");
  cp.ReferencedAssemblies.Add("system.windows.forms.dll");
  cp.ReferencedAssemblies.Add("system.drawing.dll");

  cp.CompilerOptions = "/t:library";
  cp.GenerateInMemory = true;

  StringBuilder sb = new StringBuilder("");
  sb.Append("using System;\n" );
  sb.Append("using System.Xml;\n");
  sb.Append("using System.Data;\n");
  sb.Append("using System.Data.SqlClient;\n");
  sb.Append("using System.Windows.Forms;\n");
  sb.Append("using System.Drawing;\n");

  sb.Append("namespace CSCodeEvaler{ \n");
  sb.Append("public class CSCodeEvaler{ \n");
  sb.Append("public object EvalCode(){\n");
  sb.Append("return "+sCSCode+"; \n");
  sb.Append("} \n");
  sb.Append("} \n");
  sb.Append("}\n");

  CompilerResults cr = icc.CompileAssemblyFromSource(cp, sb.ToString());
  if( cr.Errors.Count > 0 ){
      MessageBox.Show("ERROR: " + cr.Errors[0].ErrorText, 
         "Error evaluating cs code", MessageBoxButtons.OK, 
         MessageBoxIcon.Error );
      return null;
  }

  System.Reflection.Assembly a = cr.CompiledAssembly;
  object o = a.CreateInstance("CSCodeEvaler.CSCodeEvaler");

  Type t = o.GetType();
  MethodInfo mi = t.GetMethod("EvalCode");

  object s = mi.Invoke(o, null);
  return s;

} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-02-03T09:29:02.080

我编写了一个开源项目[Dynamic Expresso](https://github.com/davideicardi/DynamicExpresso/)，它可以将使用 C# 语法编写的文本表达式转换为委托（或表达式树）。表达式在不使用编译或反射的情况下被解析并转换为[表达式树。](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

您可以编写如下内容：

```
var interpreter = new Interpreter();
var result = interpreter.Eval("8 / 2 + 2"); 
```

或者

```
var interpreter = new Interpreter()
                      .SetVariable("service", new ServiceExample());

string expression = "x > 4 ? service.SomeMethod() : service.AnotherMethod()";

Lambda parsedExpression = interpreter.Parse(expression, 
                          new Parameter("x", typeof(int)));

parsedExpression.Invoke(5); 
```

我的工作基于 Scott Gu 的文章[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-08-07T12:47:19.887

所有这些肯定会奏效。就个人而言，对于那个特定的问题，我可能会采取一些不同的方法。也许是这样的：

```
class MyClass {
  public Point point1, point2, point3;

  private Point[] points;

  public MyClass() {
    //...
    this.points = new Point[] {point1, point2, point3};
  }

  public void DoSomethingWith(int i) {
    Point target = this.points[i+1];
    // do stuff to target
  }
} 
```

当使用这样的模式时，你必须小心你的数据是通过引用而不是值来存储的。换句话说，不要对原语执行此操作。你必须使用他们臃肿的类对应物。

我意识到这不完全是问题，但这个问题已经得到了很好的回答，我认为也许另一种方法可能会有所帮助。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-10-14T08:06:54.007

如果您绝对要执行 C# 语句，我现在不这样做，但是您已经可以在 C# 2.0 中执行 Javascript 语句。开源库[Jint](http://jint.codeplex.com)能够做到这一点。它是 .NET 的 Javascript 解释器。传递一个 Javascript 程序，它将在您的应用程序中运行。您甚至可以将 C# 对象作为参数传递并对其进行自动化处理。

此外，如果您只想评估属性的表达式，请尝试[NCalc](http://ncalc.codeplex.com)。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-08-07T12:29:50.530

您可以使用反射来获取属性并调用它。像这样的东西：

```
object result = theObject.GetType().GetProperty("Property" + i).GetValue(theObject, null); 
```

也就是说，假设具有该属性的对象称为“theObject”:)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-10-01T17:03:43.097

您还可以实现一个 Web 浏览器，然后加载一个包含 javascript 的 html 文件。

然后你去`document.InvokeScript`这个浏览器上的方法。eval 函数的返回值可以被捕获并转换成你需要的一切。

我在几个项目中做到了这一点，并且效果很好。

希望能帮助到你

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2011-11-05T14:40:26.940

使用反射在运行时针对对象解析和评估数据绑定表达式。

[DataBinder.Eval 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.databinder.eval%28v=vs.71%29.aspx)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-07T12:30:59.763

您可以使用原型函数来做到这一点：

```
void something(int i, string P1) {
    something(i, P1, String.Empty);
}

void something(int i, string P1, string P2) {
    something(i, P1, P2, String.Empty);
}

void something(int i, string P1, string P2, string P3) {
    something(i, P1, P2, P3, String.Empty);
} 
```

等等...

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-14T11:28:41.933

我编写了一个包[SharpByte.Dynamic](https://bitbucket.org/jeff_varszegi/sharpbyte-net-public/src/f6bc1e2fc59993ae76e3afc248bee364ba189809/SharpByte.Core/Dynamic/?at=master)来简化动态编译和执行代码的任务。可以使用扩展方法在任何上下文对象上调用代码，详见[此处](https://digitalrumpus.wordpress.com/2017/08/14/easily-execute-dynamic-c-using-extension-methods/)。

例如，

```
someObject.Evaluate<int>("6 / {{{0}}}", 3)) 
```

返回 3；

```
someObject.Evaluate("this.ToString()")) 
```

返回上下文对象的字符串表示；

```
someObject.Execute(@
"Console.WriteLine(""Hello, world!"");
Console.WriteLine(""This demonstrates running a simple script"");
"); 
```

将这些语句作为脚本等运行。

可以使用工厂方法轻松获取可执行文件，如示例中所示 -[您](https://bitbucket.org/jeff_varszegi/sharpbyte-net-public/src/f6bc1e2fc59993ae76e3afc248bee364ba189809/SharpByte.Core/Dynamic/ObjectExtensions.cs?at=master&fileviewer=file-view-default#ObjectExtensions.cs-396)只需要源代码和任何预期命名参数的列表（使用三括号表示法嵌入标记，例如 {{{0}} }，以避免与 string.Format() 以及类似 Handlebars 的语法发生冲突）：

```
IExecutable executable = ExecutableFactory.Default.GetExecutable(executableType, sourceCode, parameterNames, addedNamespaces); 
```

每个可执行对象（脚本或表达式）都是线程安全的，可以存储和重用，支持从脚本中记录日志，存储时间信息和遇到的最后一个异常等。还有一个 Copy() 方法在每个上编译以允许创建廉价副本，即使用从脚本或表达式编译的可执行对象作为创建其他对象的模板。

执行已编译的脚本或语句的开销相对较低，在适中的硬件上不到一微秒，并且已编译的脚本和表达式被缓存以供重用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-05-02T13:56:17.327

我试图通过名称获取结构（类）成员的值。该结构不是动态的。在我最终得到它之前，所有答案都没有奏效：

```
public static object GetPropertyValue(object instance, string memberName)
{
    return instance.GetType().GetField(memberName).GetValue(instance);
} 
```

此方法将按成员的名称返回成员的值。它适用于常规结构（类）。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-13T10:04:41.067

您可以查看[Heleonix.Reflection](https://github.com/Heleonix/Heleonix.Reflection)库。它提供了动态获取/设置/调用成员的方法，包括嵌套成员，或者如果明确定义了成员，您可以创建比反射更快的 getter/setter（lambda 编译成委托）：

```
var success = Reflector.Set(instance, null, $"Property{i}", value); 
```

或者，如果属性的数量不是无穷无尽的，您可以生成 setter 并对其进行 chache（setter 更快，因为它们是编译的委托）：

```
var setter = Reflector.CreateSetter<object, object>($"Property{i}", typeof(type which contains "Property"+i));
setter(instance, value); 
```

Setter 可以是类型`Action<object, object>`，但实例在运行时可以不同，因此您可以创建 setter 列表。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2011-06-10T02:24:37.590

不幸的是，C# 没有任何本机工具可以完全按照您的要求进行操作。

但是，我的 C# eval 程序确实允许评估 C# 代码。它提供了在运行时评估 C# 代码并支持许多 C# 语句。事实上，此代码可用于任何 .NET 项目，但仅限于使用 C# 语法。查看我的网站[http://csharp-eval.com](http://csharp-eval.com)了解更多详细信息。

* * *

## 回答 #16

> 赞同：-9
> 
> 时间：2011-08-26T12:37:30.587

正确的答案是您需要缓存所有结果以保持低内存使用率。

一个例子看起来像这样

```
TypeOf(Evaluate)
{
"1+1":2;
"1+2":3;
"1+3":5;
....
"2-5":-3;
"0+0":1
} 
```

并将其添加到列表

```
List<string> results = new List<string>();
for() results.Add(result); 
```

保存id并在代码中使用

希望这可以帮助

# java - 我如何 Java webstart 多个依赖的本机库？

> ID：4630
> 
> 赞同：17
> 
> 时间：2008-08-07T12:26:50.707
> 
> 标签：java, java-native-interface, java-web-start

示例：我有两个共享对象（同样适用于 .dll）。第一个共享对象来自第三方库，我们称之为 libA.so。我已经用 JNI 封装了其中的一些，并创建了我自己的库 libB.so。现在 libB 依赖于 libA。

当 webstart 时，这两个库都位于一些 webstart 工作区中。我的 java 代码尝试加载 libB。此时系统加载器将尝试加载不在系统库路径中的 libA（java.library.path 对此无济于事）。最终结果是 libB 有一个不满意的链接，无法使用。

我曾尝试在 libB 之前加载 libA，但这仍然不起作用。似乎操作系统想为我做那个加载。除了静态编译之外，我还有什么方法可以完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-08-07T17:53:38.113

我不确定这是否会以与 webstart 完全相同的方式处理，但在处理一组本机库（在我们的例子中为 dll）时，我们在桌面应用程序中遇到了这种情况。

在 libB 之前加载 libA 应该可以工作，除非其中一个库具有未说明且不在路径中的依赖项。我的理解是，一旦它到达系统 loadLibrary 调用（即 Java 已在其 java.library.path 中找到该库，现在告诉操作系统加载它） - 它完全依赖于操作系统来查找任何依赖库，因为此时正在为进程加载库的是操作系统，而操作系统只知道如何查看系统路径。在 Webstart 应用程序的情况下，这似乎很难设置，但有一种不涉及静态编译的方法。您也许可以调整您的图书馆所在的位置 - 我不确定

如果您使用自定义类加载器，则可以覆盖 loadLibrary 和 findLibrary 以便它可以从类路径中的 jar 中找到您的库，并且如果您还让它知道您的本机库依赖项（即 libB 依赖于 libA 依赖于 libX，然后在加载 libB 时，您可以抓住自己并确保首先加载 libA，并检查该通知并首先加载 libX。然后操作系统不会尝试找到不在您路径中的库。这很笨拙而且有点痛苦，但确保 Java 可以找到它们并以正确的顺序加载它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-26T01:47:13.227

静态编译被证明是 web 启动多个依赖本机库的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T06:32:00.773

两个本机库是否都打包到一个*签名*的jar 中，该 jar 被列为

```
<nativelib ...> 
```

在 JNLP 文件中？

# windows - 您如何在 Windows 系统上创建自己的名字对象（URL 协议）？

> ID：4638
> 
> 赞同：12
> 
> 时间：2008-08-07T12:31:42.413
> 
> 标签：windows, winapi, moniker

如何在 Windows 系统上创建自己的自定义名字对象（或 URL 协议）？

例子：

*   网址：
*   邮寄：
*   服务：

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-07T12:42:06.683

查看来自 MSDN的[创建和使用 URL Monikers](http://msdn.microsoft.com/en-us/library/aa741006(VS.85).aspx)、[关于异步可插入协议](http://msdn.microsoft.com/en-us/library/aa767916(VS.85).aspx)和[将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T12:52:04.087

这是一些旧的 Delphi 代码，我们用它来获取 Web 应用程序中的快捷方式，以便在本地为用户启动 Windows 程序。

```
procedure InstallIntoRegistry;
var
  Reg: TRegistry;
begin
  Reg := TRegistry.Create;
  try
    Reg.RootKey := HKEY_CLASSES_ROOT;
    if Reg.OpenKey('moniker', True) then
    begin
      Reg.WriteString('', 'URL:Name of moniker');
      Reg.WriteString('URL Protocol', '');
      Reg.WriteString('Source Filter', '{E436EBB6-524F-11CE-9F53-0020AF0BA770}');
      Reg.WriteInteger('EditFlags', 2);

      if Reg.OpenKey('shell\open\command', True) then
      begin
        Reg.WriteString('', '"' + ParamStr(0) + '" "%1"');
      end;
    end else begin
      MessageBox(0, 'You do not have the necessary access rights to complete this installation!' + Chr(13) +
        'Please make sure you are logged in with a user account with administrative rights!', 'Access denied', 0);
      Exit;
    end;
  finally
    FreeAndNil(Reg);
  end;

  MessageBox(0, 'Application WebStart has been installed successfully!', 'Installed', 0);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-02T06:18:47.423

*Craig Brockschmidt 的内部 OLE*可能对绰号有最好的报道。如果你想更深入地研究这个话题，我建议你买这本书。它也包含在随 VS 6.0 一起提供的 MSDN 磁盘中，以防您仍然拥有它。

# openid - 如何使用多个 OpenID？

> ID：4661
> 
> 赞同：15
> 
> 时间：2008-08-07T12:51:38.910
> 
> 标签：openid

我有不止一个 OpenID，因为我已经尝试了很多。随着人们使用 OpenID，不同的供应商将会出现，我可能想更换供应商。由于所有 ID 都是我，并且所有 ID 都是针对同一个电子邮件地址进行身份验证的，我不应该能够使用其中任何一个登录到堆栈溢出并能够访问同一个帐户吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-08-07T14:36:06.890

我认为每个实现 OpenID 的站点都必须构建他们的软件以允许您的 OpenID 凭据的多个条目。然而，仅仅因为一个站点不允许您创建多个条目并不意味着您不能交换 OpenID 供应商。

## 如何将您的博客变成 OpenID

第 1 步：获取 OpenID。您可以使用许多服务器和服务。我使用[http://www.myopenid.com](http://www.myopenid.com)

第 2 步：将这两行添加到您博客的主模板中，位于`<HEAD></HEAD>`模板顶部的标签之间。大多数博客引擎都支持编辑您的模板，因此这应该是一件容易且非常可能的事情。

例子：

```
<link rel="openid.server" href="http://www.myopenid.com/server" />  
<link rel="openid.delegate" href=http://YOURUSERNAME.myopenid.com/ />

```

这将允许您使用您的域/博客作为您的 OpenID。

感谢[Scott Hanselman](http://www.hanselman.com/blog/TheWeeklySourceCode25OpenIDEdition.aspx)和[Simon Willison](http://simonwillison.net/2006/Dec/19/openid/)的这些简单说明。

## 更换您的供应商

现在您的 OpenID 指向您的博客，您可以更新链接 rel href 以指向新的供应商，并且您绑定博客 OpenID 的所有地方都将使用新的供应商。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-22T00:31:30.790

除了 Otto 的元标记示例之外，您还应该知道您的提供程序是否支持 OpenID 2.0（有许多改进）。如果它确实使用元标记，如下所示：

```
<link rel="openid2.provider" href="http://www.loginbuzz.com/provider.axd" />
<link rel="openid2.local_id" href="http://example.loginbuzz.com/" />
<link rel="openid.server" href="http://www.loginbuzz.com/provider.axd" />
<link rel="openid.delegate" href="http://example.loginbuzz.com/" /> 
```

使用安全链接也是一个好主意，但这可能会限制一些依赖方登录。但是，这可以通过提供[XRDS 文档](http://en.wikipedia.org/wiki/XRDS "维基百科上的 XRDS")来解决。

XRDS 的真正妙处在于您可以在本文档中指定多个提供程序。假设您有一堆不同的帐户，它们都有不同的提供商支持不同的扩展。然后，依赖方能够自行选择最佳匹配。在 XRDS 文档中，您还可以为每个服务指定多个 URL，以便在适当的时候使用 https。

我还建议购买[i-name](http://www.inames.net/personal.html "更多关于个人 i-name 的信息")，因为它在设计上更安全（即使 i-name 过期，与 i-name 相关联的规范 ID - i-number 也属于您）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T15:27:55.177

> @prakesh
> 
> 只要您将所有这些都关联到同一个电子邮件地址，我认为它会引导您访问同一个帐户。
> 
> 但你的经验是什么？

当我尝试它时，我得到了一个全新的帐户，0 代表，没有 steenkin 徽章。所以目前 SO 不允许多个 OpenID 与一个帐户相关联

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-29T20:56:04.913

> 使用多个开放 ID 提供者不会破坏开放 ID 的意义吗？

没有。假设您使用的是 Yahoo OpenID，但您决定改用 Google。每个帐户的多个 OpenID 允许您将您的帐户与 Google OpenID 关联，然后取消对 Yahoo OpenID 的授权。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-29T17:57:14.873

使用多个开放 ID 提供者不会破坏开放 ID 的意义吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-22T23:13:03.967

这里的关键是永远不要改变身份。更改提供者，但不更改身份。（这就像现实生活一样）

所以 OpenID 的新用户应该首先考虑他们的身份*可能*是什么。

已经拥有某种网站的用户应选择此 URL，而没有网站的用户有以下选项：

*   获取类似博客的内容以获取 URL
*   购买 i-name（或域名）
*   或使用身份提供商提供的 URL

在身份提供者提供 URL 的情况下，用户需要注意，如果将来他们选择以某种方式委派或更改身份，那么它本质上是一个新身份，并且对 RP（和 OP）的多重身份支持是有限的（通常需要将 RP 站点上的本地帐户重新关联到不同的 OpenID 身份）。

# c# - 解决方案中的文件夹是否应该与命名空间匹配？

> ID：4664
> 
> 赞同：148
> 
> 时间：2008-08-07T12:53:19.217
> 
> 标签：c#, .net, namespaces

解决方案中的文件夹是否应该与命名空间匹配？

在我的一个团队项目中，我们有一个类库，该类库在项目中有许多子文件夹。

项目名称和命名空间：`MyCompany.Project.Section`.

在这个项目中，有几个与命名空间部分匹配的文件夹：

*   文件夹在命名空间`Vehicles`中有类`MyCompany.Project.Section.Vehicles`
*   文件夹在命名空间`Clothing`中有类`MyCompany.Project.Section.Clothing`
*   等等

在同一个项目中，是另一个流氓文件夹

*   文件夹在命名空间`BusinessObjects`中有类`MyCompany.Project.Section`

有一些这样的情况是为了“组织方便”而制作文件夹。

我的问题是：标准是什么？在类库中，文件夹通常与命名空间结构匹配还是混合包？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2008-08-07T12:58:21.267

另外，请注意，如果您使用内置模板将类添加到文件夹，默认情况下它将被放置在反映文件夹层次结构的命名空间中。

这些课程将更容易找到，仅此一项就足够了。

我们遵循的规则是：

*   项目/程序集名称与根命名空间相同，除了 .dll 结尾
*   上述规则的唯一例外是带有 .Core 结尾的项目，.Core 被剥离
*   文件夹等于命名空间
*   每个文件一种类型（类、结构、枚举、委托等）可以轻松找到正确的文件

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2015-03-25T12:22:56.320

不。

我已经在小型和大型项目中尝试了这两种方法，无论是与单个（我）还是一个开发人员团队。

我发现最简单和最有效的方法是每个项目有一个命名空间，所有类都进入该命名空间。然后，您可以自由地将类文件放入您想要的任何项目文件夹中。由于只有一个命名空间，因此始终在文件顶部添加 using 语句并不麻烦。

将源文件组织到文件夹中很重要，我认为应该使用所有文件夹。要求这些文件夹也映射到命名空间是不必要的，会产生更多的工作，而且我发现实际上对组织有害，因为增加的负担会导致混乱。

以这个 FxCop 警告为例：

> **CA1020：避免使用类型很少**
> 的名称空间原因：全局名称空间以外的名称空间包含的类型少于五种 [https://msdn.microsoft.com/en-gb/library/ms182130.aspx](https://msdn.microsoft.com/en-gb/library/ms182130.aspx)

此警告鼓励将新文件转储到通用 Project.General 文件夹，甚至是项目根目录，直到您有四个类似的类来证明创建新文件夹的合理性。那会发生吗？

**查找文件**

接受的答案是“这些课程会更容易找到，仅此一项就足够了。”

我怀疑答案是指在一个项目中有多个名称空间，这些名称空间不映射到文件夹结构，而不是我建议的是一个具有单个名称空间的项目。

在任何情况下，虽然您无法从命名空间中确定类文件位于哪个文件夹中，但您可以使用转到定义或 Visual Studio 中的搜索解决方案资源管理器框找到它。在我看来，这也不是一个大问题。我甚至不会将 0.1% 的开发时间花在寻找文件以证明优化它的问题上。

**名称冲突**

当然，创建多个命名空间允许项目有两个具有相同名称的类。但这真的是一件好事吗？仅仅禁止这种可能性可能更容易吗？允许两个具有相同名称的类会产生更复杂的情况，其中 90% 的时间事情以某种方式工作，然后突然你发现你有一个特殊情况。假设您在不同的命名空间中定义了两个 Rectangle 类：

*   类 Project1.Image.Rectangle
*   类 Project1.Window.Rectangle

可能会遇到源文件需要包含两个命名空间的问题。现在您必须在该文件中的所有位置写出完整的命名空间：

```
var rectangle = new Project1.Window.Rectangle(); 
```

或者弄乱一些讨厌的 using 语句：

```
using Rectangle = Project1.Window.Rectangle; 
```

在您的项目中使用单个命名空间时，您将不得不提出不同的，而且我认为更具描述性的名称，如下所示：

*   类 Project1.ImageRectangle
*   类 Project1.WindowRectangle

并且使用在任何地方都是相同的，当文件同时使用两种类型时，您不必处理特殊情况。

**使用语句**

```
using Project1.General;  
using Project1.Image;  
using Project1.Window;  
using Project1.Window.Controls;  
using Project1.Shapes;  
using Project1.Input;  
using Project1.Data; 
```

对比

```
using Project1; 
```

在编写代码时不必一直添加命名空间的便利性。这不是真正需要的时间，而是不得不这样做的流程中断，只是用大量的 using 语句填充文件——为了什么？这值得么？

**更改项目文件夹结构**

如果文件夹映射到命名空间，则项目文件夹路径有效地硬编码到每个源文件中。这意味着项目中文件或文件夹的任何重命名或移动都需要更改实际文件内容。该文件夹中文件的命名空间声明和引用该文件夹中类的一大堆其他文件中的 using 语句。虽然更改本身对于工具来说是微不足道的，但它通常会导致包含许多类甚至没有更改的文件的大型提交。

使用项目中的单个命名空间，您可以根据需要更改项目文件夹结构，而无需修改任何源文件本身。

**Visual Studio 自动将新文件的命名空间映射到创建它的项目文件夹**

不幸的是，但我发现更正命名空间的麻烦比处理它们的麻烦要少。我也养成了复制粘贴现有文件而不是使用 Add->New 的习惯。

**智能感知和对象浏览器**

在我看来，在大型项目中使用多个命名空间的最大好处是在查看任何在命名空间层次结构中显示类的工具中的类时有额外的组织。甚至文档。显然，项目中只有一个命名空间会导致所有类都显示在一个列表中，而不是分成类别。然而，就个人而言，我从来没有因为缺乏这个而被难住或延迟，所以我发现它没有足够大的好处来证明多个命名空间的合理性。

虽然如果我正在编写一个大型公共类库，那么我*可能*会在项目中使用多个命名空间，以便程序集在工具和文档中看起来很整洁。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2008-08-07T12:58:13.997

我认为.NET 中的标准是在可能的情况下尝试这样做，而不是创建不必要的深度结构只是为了将其作为硬性规则来坚持。我的项目都没有 100% 地遵循命名空间 == 结构规则，有时它只是更清洁/更好地摆脱这些规则。

在 Java 中，您别无选择。我将其称为理论有效与实践有效的经典案例。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2008-09-11T03:45:56.137

@lassevk：我同意这些规则，还有一个要补充。

当我有嵌套类时，我仍然将它们拆分出来，每个文件一个。像这样：

```
// ----- Foo.cs
partial class Foo
{
    // Foo implementation here
} 
```

和

```
// ----- Foo.Bar.cs
partial class Foo
{
    class Bar
    {
        // Foo.Bar implementation here
    }
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-08-07T12:57:13.390

我会说是的。

首先，通过跟踪名称空间（例如，当有人通过电子邮件向您发送一个裸异常调用堆栈时）将更容易找到实际的代码文件。如果您让文件夹与命名空间不同步，那么在大型代码库中查找文件会变得很累。

其次，VS 将生成您在与其父文件夹结构具有相同命名空间的文件夹中创建的新类。如果您决定反对这一点，那么在添加新文件时，每天要做的只是一项额外的管道工作。

当然，这不言而喻，人们应该对 xis 文件夹/命名空间层次结构的深度持保守态度。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-08-07T12:55:17.653

是的，他们应该这样做，否则只会导致混乱。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-07-15T07:00:30.890

> 标准是什么？

没有官方标准，但通常使用最广泛的是文件夹到命名空间的映射模式。

> 在类库中，文件夹通常与命名空间结构匹配还是混合包？

是的，在大多数类库中，为了便于组织，文件夹与命名空间相匹配。

# windows - 验证文件以进行测试

> ID：4665
> 
> 赞同：6
> 
> 时间：2008-08-07T12:54:51.057
> 
> 标签：windows, testing

我昨天在做一些正式的测试。在他们的过程中，他们正在验证测试机器上的所有文件都是从版本中提取的。他们验证这些文件是否相同的方法是在 Windows 资源管理器中检查它们的大小和日期/时间戳窗口。这些碰巧因为另一个原因而关闭，我能够找出原因。

这是验证文件是否相同的有效方法吗？我不这么认为并开始争论，但我在这里更年轻，所以我认为我不应该把它推得太远。我想争辩说他们应该对文件进行二进制比较以验证其内容是否准确。根据我的经验，时间/日期戳和大小属性并不总是按预期运行。有什么想法吗？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T13:07:12.747

确定两个文件是否相等的唯一 100% 方法是对两者进行二进制比较。

如果您可以忍受误报的风险（即两个文件不是 100% 相同，但您的代码说它们是相同的），那么可以使用摘要和校验和算法来减少工作量，特别是如果文件存在的话两台不同的机器的带宽低于最佳带宽，因此二进制比较是不可行的。

摘要和校验和算法都有误报的机会，但确切的机会因算法而异。一般规则是，加密越多，输出的比特越多，误报的可能性就越小。

甚至 CRC-32 算法也很好用，应该很容易在互联网上找到实现它的代码示例。

如果您只进行大小/时间戳比较，那么我很遗憾地说这很容易规避，并且实际上不会给您太多确定文件相同或不同的确定性。

但是，这取决于，如果您知道在您的世界中，时间戳被保留，并且仅在文件被修改时更改，那么您可以使用它，否则它无法保证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T13:17:45.673

哈希非常好。但另一个技术稍低的替代方法是运行 WinMerge 或 TextWrangler 之类的差异工具，并比较每个文件的两个版本。无聊，还有人为错误的余地。

最重要的是，使用版本控制来确保您正在测试的文件是您编辑的文件以及您将要启动的文件。我们将 repo 中的结帐文件夹作为暂存站点和实时站点，因此一旦您提交了工作副本中的更改，您就可以 100% 确定您测试、推送到暂存然后运行的文件是相同的，因为你只需在每个盒子上运行“svn update”并检查修订号。

哦，如果你需要快速回滚（它总是会发生在我们身上），你只需使用 -r 开关再次运行 svn update 并几乎立即返回到以前的版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T12:59:49.033

我会对文件执行 md5sum 散列之类的操作，并将其与发行版中的已知散列进行比较。它们将比日期/时间比较更准确，并且应该能够更加自动化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-08-07T13:00:17.940

正常的方法是计算两个文件的[哈希值](http://en.wikipedia.org/wiki/Hash_function)并进行比较。MD5 和 SHA1 是典型的哈希算法。md5sum 应该默认安装在大多数 unix 类型的机器上，维基百科的[md5sum](http://en.wikipedia.org/wiki/Md5sum)文章有一些 windows 实现的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T12:57:07.540

您应该对每个文件进行 CRC 检查...来自 wiki：

[循环冗余校验](http://en.wikipedia.org/wiki/Cyclic_redundancy_check)，一种用于产生校验和的散列函数，以检测传输或存储中的错误。

它根据文件的内容产生一个几乎唯一的值。

# version-control - DVCS 选择 - 什么对 Windows 有好处？

> ID：4670
> 
> 赞同：20
> 
> 时间：2008-08-07T12:57:32.377
> 
> 标签：version-control, dvcs

所以我想弄一个分布式版本控制系统上的项目，比如mercurial，git，或者bazaar。问题是我需要良好的 Windows 支持，即没有以“安装 cygwin ...”开头的说明。现在我*听说*这些天对 git 的 Windows 支持很不错，但没有任何第一手经验。此外，听起来 Bazaar 团队有一个明确的目标，即使其尽可能多平台化。我可以得到任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-09T06:14:12.917

[这篇 InfoQ 文章](http://www.infoq.com/articles/dvcs-guide)中对 git、hg 和 bzr 进行了很好的比较。他们都有自己的长处和短处。您必须考虑您的项目和工作流程并选择最合适的。好消息是它们都相当不错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-08-07T13:13:37.367

我每天都在 Windows 上使用[msys-git 。](http://code.google.com/p/msysgit/)工作快速而完美。

尽管较新的版本在 git-svn 上有一些问题，[但这个版本 (Git-1.5.5-preview20080413.exe)](http://msysgit.googlecode.com/files/Git-1.5.5-preview20080413.exe)有一个工作的 git-svn。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-03-13T10:18:24.097

最后我检查了一下，Mercurial 唯一需要的就是 Python 和[获取二进制包](http://www.selenic.com/mercurial/wiki/index.cgi/BinaryPackages)。如果您发现自己有更多时间并想自己动手/构建它，[请看这里](http://www.selenic.com/mercurial/wiki/index.cgi/WindowsInstall)。

HG 唯一真正的缺点是它的分支理念……但对于某些人来说，这是一个主要优点。

我喜欢它，因为它直观、易于安装并且适用于 Python 所做的任何事情。我不认为所有可用的插件都适合你，但大多数都应该。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-29T21:08:16.040

我在 Bazaar 的运气最好，其次是 Mercurial。永远无法让 Git 正常工作。快速搜索显示，Git 仍然需要像 Cygwin/MSYS 这样笨重的仿真层，而且我找不到像 TortoiseBzr 这样的 Git 集成工具。

在 Windows 中使用 Mercurial，我遇到了几个小问题（不敏感的路径、符号链接、）。它们通常最终会得到修复，但我觉得在 Windows 上运行的测试质量与在其他平台上不同。Bazaar 也有更好的文档来与 Visual C 等原生应用程序集成。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-03-13T10:04:28.107

如果您担心易于使用的界面：

集市上的人们现在在他们的 Windows 二进制包中包含了 TortoiseBzr。这必须是一个非常强烈的指标，表明他们认为这取决于鼻烟。我不知道 TortoiseHg 的成熟度/稳定性是什么，但 git 肯定还没有一个像样的 GUI 界面，而且 MSYS git 构建仍然需要一些工作 IMO。

如果您的团队对命令行感到满意或更喜欢命令行，那么 bazaar 或 mercurial 都可能适合您，并且两者在学习曲线方面可能大致相同。Git 的学习曲线要​​高得多。它就像一把瑞士军刀，几乎宽而不是长，所有的小玩意儿和老爸老妈都在里面，挂在上面，弹簧很紧，以至于你偶尔会切开手指试图撬开刀片出去。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-12T19:05:03.343

我同意basszero。我在 Windows 下使用 mercurial，它尽可能简单可靠。我的开发团队遍布欧洲（都柏林和维也纳:-)。我们使用 VPN 提交或有时使用内置的网络服务器 (hgserve)。两者都可以正常工作，开箱即用。

diff3 开源工具也可以与 mercurial 和 TortoiseHG 完美配合，开箱即用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-08-07T13:05:01.783

编辑：也许添加一个“dvcs”、“distrubutedversioncontrol”、“distrubuted”

我在 Windows 上使用 Mercurial 没有任何问题。您可以使用 TortoiseHG 或只使用命令行。Mercurial 确实需要 Python，但在 Windows 中也很容易安装。

[Mercurial 二进制包](http://www.selenic.com/mercurial/wiki/index.cgi/BinaryPackages#head-adac70dc1664bb9eac334d5c8b57483d300254f3)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-13T09:22:00.457

根据我在 Windows 上使用 GIT 的经验，这是一个很大的痛苦。但是我使用 Fossil SCM 已经有一段时间了，我认为它实际上完全符合您的需求。

它还有一个内置的票务系统和一个维基。整个程序包含在 1 个文件中，开箱即用。

我完全推荐它。

这是该网站的链接[http://www.fossil-scm.org/](http://www.fossil-scm.org/)

请记住，这个网站是自托管的，这意味着您正在查看自己的化石网络界面，当您查看票证、wiki 和文档时，您实际上正在使用化石。

但是如果你的项目有数百万行代码并且大小只有几GB，你必须使用GIT，这个问题没有办法解决。

享受。

# ruby - 如何使用 Ruby 中的单例设计模式创建类？

> ID：4677
> 
> 赞同：11
> 
> 时间：2008-08-07T13:00:07.690
> 
> 标签：ruby, design-patterns, singleton

单例模式是一种设计模式，用于将类的实例化限制为一个对象实例。虽然我知道如何在 C++ 和 Java 中编写单例模式，但我想知道是否有人知道如何在 Ruby 中实现它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-08-07T22:52:25.653

实际上，上面的答案并不完全正确。

```
require 'singleton'

class Example
  include Singleton
end 
```

您还需要包括 require 'singleton' 语句。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-07T13:06:34.777

使用单例模块：

```
class Clazz
  include Singleton
end 
```

有关更多信息，请参见[http://www.ruby-doc.org/stdlib/libdoc/singleton/rdoc/index.html](http://www.ruby-doc.org/stdlib/libdoc/singleton/rdoc/index.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-08T02:36:54.843

我相信您可以使用模块达到相同的效果，尽管它不是“单例模式”，但您可以以这种方式拥有全局状态（这就是单例！顽皮的全局状态！）。

# vmware - 自动化 VMWare 或 VirtualPC

> ID：4684
> 
> 赞同：20
> 
> 时间：2008-08-07T13:05:38.040
> 
> 标签：vmware, virtualization

我目前正在尝试构建脚本，并且由于我有一个受源代码控制的 ASP.net Web 部件，因此我的构建脚本应该在最后执行此操作：

1.  从网络中获取“裸”Windows 2003 IIS VMWare 或 Virtual PC 映像
2.  启动它
3.  将构建文件夹中的文件复制到服务器
4.  安装它
5.  做任何其他需要的事情

我从未尝试过自动化虚拟机，但我看到 VMWare 和 Virtual Server 都提供自动化工具。虽然我不能使用虚拟服务器（Windows XP Home :-()，但 Virtual PC 可以工作。

这里有没有人在自动化方面有使用 VMWare Server 或 Virtual PC 2007 SP1 的经验？

哪一个更适合（我运行 Windows，因此 VMWare 的平台无关性不算在内）并且更易于自动化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-07T13:31:29.733

有了 VMWare，就有了[虚拟机自动化 API (VIX API)](http://www.vmware.com/support/developer/vix-api/)。[您可以在此处](http://pubs.vmware.com/vix-api/ReferenceGuide/)找到参考指南。它适用于 VMWare Server 和 WorkStation，但 AFAIK 不适用于 ESX Server。

从 VIX 的主页：

> VIX API 允许您编写自动化虚拟机操作的脚本和程序。该 API 是高级别的、易于使用的，并且对于脚本编写者和应用程序程序员来说都很实用。它在 Windows 和 Linux 的 VMware Server 和 Workstation 产品上运行。为 C、Perl 和 COM（Visual Basic、VBscript、C#）提供了绑定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-30T17:59:59.820

如果要在 C# 中执行此操作，请使用[https://github.com/dblock/vmwaretasks而不是原始 VixCOM API。](https://github.com/dblock/vmwaretasks)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-06-09T15:59:11.233

我同意克里斯。虚拟机自动化 API 是实现虚拟机操作自动化的一个很好的可能性。VIX API 版本 1.6.2 也可用于 ESX 来宾操作的自动化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-08T01:29:26.803

VirtualBox 还具有用于自动化其 VM 的 API。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-22T16:43:32.280

为了跟进@Chris，ESX 非常可编写脚本。我最近一直在使用的一个客户端构建了一个 Web 服务，它启动一个 VMware 脚本来创建他们需要的 VM，然后使用自定义引导 ISO 启动 VM。该 ISO 包含了构建完全独立的操作系统所需的所有 kickstart 或 unattend.txt 信息。

# fonts - 推荐的编程字体？

> ID：4689
> 
> 赞同：182
> 
> 时间：2008-08-07T13:08:44.070
> 
> 标签：fonts, development-environment

你用什么字体来编程，用什么语言/IDE？我将[Consolas](http://www.microsoft.com/downloads/details.aspx?familyid=22e69ae4-7e40-4807-8a86-b3d36fab68d3&displaylang=en "康索拉斯")用于我所有的 Visual Studio 工作，还有其他建议吗？

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2008-08-07T13:28:17.040

Consolas [（下载）](http://www.microsoft.com/downloads/details.aspx?familyid=22e69ae4-7e40-4807-8a86-b3d36fab68d3&displaylang=en)或 Andale Mono [（下载）](http://prdownloads.sourceforge.net/corefonts/andale32.exe?download)。我主要使用 Andale Mono。[我很久以前](http://www.deadprogrammer.com/the-programmers-font)写过一篇关于编程字体的文章，我认为 Consolas 还没有出来。

[http://www.deadprogrammer.com/photos/fonts.gif](http://www.deadprogrammer.com/photos/fonts.gif)

我发现打字`Illegal1 = O0`是对适用性的一个很好的测试。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2008-08-13T16:05:59.850

我真的爱上了[Droid Sans Mono](http://damieng.com/blog/2007/11/14/droid-sans-mono-great-coding-font)。

![替代文字](../Images/9ae19876b66e104203a31a1cc460368b.png)

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2008-08-09T04:49:02.557

我真的很喜欢[*DejaVu Sans Mono*](http://dejavu.sourceforge.net/wiki/index.php/Main_Page)。它非常干净，对眼睛很容易。

![在此处输入图像描述](../Images/1f679970d648202bef548a8731eb9d69.png)

* * *

## 回答 #4

> 赞同：61
> 
> 时间：2008-09-08T19:56:47.123

+1 摩纳哥

[替代文字 http://img.skitch.com/20080908-nmjji28uerreqpprs1h86gxna9.png](http://img.skitch.com/20080908-nmjji28uerreqpprs1h86gxna9.png)

很漂亮，我发现我可以连续读几个小时。

* * *

## 回答 #5

> 赞同：51
> 
> 时间：2008-08-07T13:12:46.527

我对所有东西都使用 Consolas，包括 Notepad++、SQL Studio、Eclipse 等。我希望有一个 Mac 版本。此外，如果您注意到，Stack Overflow 上的文本区域字段使用 Consolas，因此我们还有其他一些粉丝：p

* * *

## 回答 #6

> 赞同：41
> 
> 时间：2008-08-07T19:26:21.187

我喜欢[Envy Code R](http://damieng.com/blog/2008/05/26/envy-code-r-preview-7-coding-font-released)。

![替代文字](../Images/207dffeadf7d87b7af13e05dd81ccfea.png) ![替代文字](../Images/1077d4b4b5f2f50c9ad6d17f79a33792.png)

* * *

## 回答 #7

> 赞同：28
> 
> 时间：2008-08-07T13:40:17.703

为摩纳哥 +1，虽然[这篇博](http://thinkingdigitally.com/archive/ditching-monaco/)文让我考虑切换到[Inconsolata](http://www.levien.com/type/myfonts/inconsolata.html)。

我很好奇你们都使用什么点大小，我使用[TextMate](http://macromates.com/)默认大小 12pt。

* * *

## 回答 #8

> 赞同：28
> 
> 时间：2008-09-11T08:18:36.073

我使用[Bitstream Vera Sans Mono](http://www.bitstream.com/font_rendering/products/dev_fonts/vera.html)，但您需要激活 ClearType 以使其可读。

我喜欢这个线程前面提到的“Illegal1 = O0”可读性测试，谢谢。

* * *

## 回答 #9

> 赞同：24
> 
> 时间：2008-10-19T02:32:22.100

Anarch，32分，当然。有风格的代码！

[无政府主义 http://img525.imageshack.us/img525/1584/ss42po1.jpg](http://img525.imageshack.us/img525/1584/ss42po1.jpg)

* * *

## 回答 #10

> 赞同：23
> 
> 时间：2008-08-07T13:14:06.697

对于 UltraEdit 和任何与此相关的东西，我使用旧的**Courier New。**

[替代文字 http://www.identifont.com/samples/microsoft/CourierNew.gif](http://www.identifont.com/samples/microsoft/CourierNew.gif)

我发现 Consolas 具有过度抗锯齿功能，难以阅读。

* * *

## 回答 #11

> 赞同：21
> 
> 时间：2008-08-16T10:07:36.623

我使用[Lucida Console](http://en.wikipedia.org/wiki/Lucida_Sans "露西达控制台")多年，从未找到更好的东西。

但是我尝试了几次[Consolas 字体](http://en.wikipedia.org/wiki/Consolas "康索拉斯字体")，而且很简单——我更喜欢 Lucida Console。

* * *

## 回答 #12

> 赞同：20
> 
> 时间：2008-09-08T19:35:37.250

对于一些命令行的东西，我喜欢[Terminus](http://www.is-vn.bg/hamster/)，至少滚动日志文件和 irssi/irc（[可用 TTF 版本](http://misc.nybergh.net/pub/fonts/terminus/)）。下面是运行中的 terminus.ttf 的屏幕截图（Windows XP 上启用了 ClearType 的 PuTTY）。

[下面是运行中的 terminus.ttf 的屏幕截图（Windows XP 上启用了 ClearType 的 PuTTY）。http://misc.nybergh.net/pub/fonts/terminus/2008-09-08_terminus_ttf_in_gnu_nano_putty_windows_xp_cleartype_screenshot.png](http://misc.nybergh.net/pub/fonts/terminus/2008-09-08_terminus_ttf_in_gnu_nano_putty_windows_xp_cleartype_screenshot.png)

* * *

## 回答 #13

> 赞同：18
> 
> 时间：2008-08-07T14:22:34.453

我在我的 Mac 上使用 Consolas，顺便说一句；如果你想安装这个（Mac/Win/Linux），[这里有一个下载 consolas TTF 文件的链接。](http://pastrana.co.uk/consolas/)

/mp

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2008-08-07T13:12:58.057

我不使用 Consolas，虽然它在 LCD 上看起来不错，但有时我不在 LCD 上，比如当我在做演示时，它看起来很糟糕。

我目前选择的编程字体是[Liberation Mono](http://www.press.redhat.com/2007/05/09/liberation-fonts/)字体。

哦，伙计，刚刚发现为什么 Stack Overflow 上的文本看起来像垃圾，它强制 Consolas 是一种 cleartype 字体，而在我当前没有启用 cleartype 的设置中，它看起来很糟糕。

将在 uservoice 上进行错误报告。

* * *

## 回答 #15

> 赞同：15
> 
> 时间：2008-08-13T15:17:24.987

我一直在使用 Dina - [http://www.donationcoder.com/Software/Jibz/Dina/index.html](http://www.donationcoder.com/Software/Jibz/Dina/index.html) - 字体进行文本编辑有一段时间了，它似乎做得很好。

* * *

## 回答 #16

> 赞同：14
> 
> 时间：2008-08-14T17:10:59.370

[专业字体](http://www.tobias-jung.de/seekingprofont/)。只有我还在用吗？

* * *

## 回答 #17

> 赞同：12
> 
> 时间：2008-08-07T14:01:32.200

我喜欢Visual Studio 中的[Fixedsys](http://en.wikipedia.org/wiki/Fixedsys)。这是一个经典。没有抗锯齿模糊。

![固定系统字体](../Images/604438cc2aa527b67b00365884e3e16a.png)

* * *

## 回答 #18

> 赞同：12
> 
> 时间：2008-09-18T17:02:27.970

我很惊讶没有人提到[Pragmata](http://www.fsd.it/fonts/pragma.htm)。这是编程字体的宝马。简洁、易读、简约优雅的巅峰之作。

[替代文字 http://www.fsd.it/fonts/imm/pr_abc.gif](http://www.fsd.it/fonts/imm/pr_abc.gif)

现在[有一个针对 PragmataPro 的筹款项目](http://www.indiegogo.com/PragmataPro-the-ideal-programming-typeface-becomes-open-source)（它涵盖了比 Pragmata 更大的 Unicode 部分），以便在知识共享许可下免费使用它！

* * *

## 回答 #19

> 赞同：12
> 
> 时间：2008-10-22T14:11:23.143

一篇优秀的 CodeProject 文章，列出了 33 种编程字体（每个都有示例）

[http://www.codeproject.com/KB/work/FontSurvey.aspx](http://www.codeproject.com/KB/work/FontSurvey.aspx)

* * *

## 回答 #20

> 赞同：10
> 
> 时间：2008-08-07T13:32:14.897

我在 Windows 上使用[Inconsolata](http://www.levien.com/type/myfonts/inconsolata.html)和 UltraEdit。使用 TextMate（在 Mac 上）我更喜欢 Monaco（它是默认字体）。

* * *

## 回答 #21

> 赞同：9
> 
> 时间：2008-08-07T19:20:34.180

TextMate 中的 Inconsolata 14pt

* * *

## 回答 #22

> 赞同：9
> 
> 时间：2008-09-18T00:27:31.467

我喜欢[Profont ，当](http://www.tobias-jung.de/seekingprofont/)[Jeff 写关于编程字体的博客](http://www.codinghorror.com/blog/archives/000157.html)时，我第一次看到它

* * *

## 回答 #23

> 赞同：8
> 
> 时间：2008-08-13T15:08:41.277

我也喜欢 Consolas，但我也喜欢 Anonymous： [http ://www.ms-studio.com/FontSales/anonymous.html](http://www.ms-studio.com/FontSales/anonymous.html)

* * *

## 回答 #24

> 赞同：7
> 
> 时间：2008-08-07T13:14:34.293

添加对康索拉斯的投票。我的眼睛感觉很轻松。

* * *

## 回答 #25

> 赞同：7
> 
> 时间：2008-08-07T13:15:48.517

我从来没有找到离开 Courier New 的理由。只要是无衬线字体，我认为我对任何字体都没有问题。等距字体也很适合编码。

* * *

## 回答 #26

> 赞同：7
> 
> 时间：2008-08-31T21:48:57.670

我也使用比例字体。它们看起来不错，原因与它们在书籍和杂志中工作的原因相同：字符之间的差异越多，大脑就越容易区分它们；你可以在屏幕上放更多东西。缩进仍然可以正常工作：6 个前导空格仍然是 3 个前导空格的两倍宽。

我使用了一个我破解的 Georgia 版本，使小写“l”看起来不像数字“1”，并在零上加上一个斜线。

* * *

## 回答 #27

> 赞同：6
> 
> 时间：2008-08-14T02:36:18.517

我认为 Consolas 上的抗锯齿模糊是由未启用 ClearType 的监视器引起的。Consolas 是为 ClearType 设计的。

[Jeff A：确实，你可以在[我写的关于这个主题的帖子](http://www.codinghorror.com/blog/archives/000356.html)中看到这个截图。]

* * *

## 回答 #28

> 赞同：6
> 
> 时间：2008-08-23T20:34:59.050

[keithdevens.com](http://keithdevens.com/wiki/ProgrammerFonts)和[lowing.org](http://www.lowing.org/fonts/)上的两个页面有很**长**的编程字体列表（死链接，但它[在互联网档案中](http://web.archive.org/web/20080317195427rn_1/lowing.org/fonts/)）

可能有更多建议的其他一些关于编程字体的讨论是[对这个关于印刷术的博客文章](http://typographica.org/000744.php)和[文本编辑器论坛上的这个主题](http://www.ultraedit.com/forums/viewtopic.php?f=3&t=246)的评论。

我个人喜欢[Triskweline](http://www.netalive.org/tinkering/triskweline/)：

[替代文字 http://www.netalive.org/tinkering/triskweline/shot.gif](http://www.netalive.org/tinkering/triskweline/shot.gif)

* * *

## 回答 #29

> 赞同：6
> 
> 时间：2008-09-15T18:06:22.290

我建议您阅读这些编程字体的比较，而不是仅仅对特定字体进行另一次投票，您可以在其中了解更多信息：

Jeff Atwood 的优秀“综述”： http:
[//www.codinghorror.com/blog/archives/000157.html](http://www.codinghorror.com/blog/archives/000157.html)

对 5 种字体的另一个评论，带有漂亮的屏幕截图：
[http ://blog.hamstu.com/2008/02/03/the-typography-of-code/](http://blog.hamstu.com/2008/02/03/the-typography-of-code/)

* * *

## 回答 #30

> 赞同：5
> 
> 时间：2008-08-22T19:26:55.150

[DejaVu](https://dejavu-fonts.github.io/) Sans Mono（有时称为 Panic Sans），尺寸 11，反alised。以前我只使用没有抗锯齿的字体，但它似乎只适用于这种字体。

![Sublime Text 中 Panic Sans 的截图](../Images/2151b0cabe981fc317d3953fb0b5265e.png)

* * *

## 回答 #31

> 赞同：4
> 
> 时间：2008-08-13T15:05:22.217

[Verdana](http://en.wikipedia.org/wiki/Verdana) - 可变宽度且易于在小尺寸屏幕上阅读。

* * *

## 回答 #32

> 赞同：4
> 
> 时间：2008-08-25T21:29:44.363

回到我的 Mac LC 时代，我发誓 Monaco 9pt，主要是因为它被削减了 0。不过，我从来没有完全习惯于默认的 line-height。

[摩纳哥样本 http://www.k8zt.com/ham_fonts/monaco.jpg](http://www.k8zt.com/ham_fonts/monaco.jpg)

在原始的非 OS-X 版本中[追踪](http://www.gringod.com/wp-upload/misc/MONACO.TTF)有点困难。

* * *

## 回答 #33

> 赞同：3
> 
> 时间：2008-08-07T13:15:42.247

为 Consolas +1，以及适当的[配色方案](http://www.codinghorror.com/blog/archives/000682.html)（我在第一个屏幕截图中使用白色）

* * *

## 回答 #34

> 赞同：3
> 
> 时间：2008-08-07T17:33:20.213

> 我从来没有找到离开 Courier New 的理由。只要是无衬线字体，我认为我对任何字体都没有问题。等距字体也很适合编码。

Courier New 有衬线。

* * *

## 回答 #35

> 赞同：3
> 
> 时间：2008-08-09T05:11:00.360

Lucida Sans 打字机

* * *

## 回答 #36

> 赞同：3
> 
> 时间：2008-08-13T15:27:19.770

再次投票给康索拉斯。目前我最喜欢的 IDE 字体。

* * *

## 回答 #37

> 赞同：3
> 
> 时间：2008-11-05T01:11:07.943

[提高字体](http://www.raize.com/DevTools/FreeTools.asp)

> Raize 字体是一种干净、明快、固定间距的无衬线屏幕字体，比 Windows 附带的固定间距字体更易于阅读。Raize 字体非常适合编程、脚本、html 编写等，可在任何 IDE 或文本编辑器中使用。

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2009-06-01T04:46:06.407

Monaco，11pt，抗锯齿，在 Mac OS X 上。看起来更好，在深色背景上更清晰。

[替代文字 http://www.fabernitor.net/ayaz/monaco11pt.png](http://www.fabernitor.net/ayaz/monaco11pt.png)

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2009-08-20T02:53:41.863

[康索拉斯](http://www.wezm.net/2009/03/install-consolas-mac-osx/)。斜体表示评论。唯一办法。开个玩笑，最好的编程字体就是这个！这是您的第一个 C 程序：

```
图片链接一定不起作用，请在评论中告诉我 http://img40.imageshack.us/img40/8008/picture1iqv.png

```

推荐用于高可读性。

* * *

## 回答 #40

> 赞同：2
> 
> 时间：2008-08-19T14:03:17.770

我打算用这个来树敌，但我实际上使用*--gasp--*一种非等宽字体！我偶尔会切换回等宽字体来消除歧义，但大多数情况下，我发现一个好的干净的无衬线字体最容易阅读并且不会浪费屏幕空间。

具有良好语法着色的 IDE 会有所帮助。

* * *

## 回答 #41

> 赞同：2
> 
> 时间：2008-08-31T10:47:37.510

我第二个是 Consolas、Inconsolata、DejaVu Sans Mono 和 Droid Sans Mono，我更喜欢 Droid 那个。

* * *

## 回答 #42

> 赞同：2
> 
> 时间：2008-09-02T22:17:31.797

Neep Alt 13/17 非常好。

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2008-09-23T16:54:27.177

我最喜欢的是11px 的[ProggyClean](http://www.proggyfonts.com/download/download_bridge.php?get=ProggyClean.ttf.zip)。我已经使用它 2-3 年了，它非常适合在屏幕上显示很多内容，而且阅读起来很痛苦。它比迄今为止的几次提及更值得关注：

[Proggy 清洁 http://www.proggyfonts.com/download/example_proggy_clean.gif](http://www.proggyfonts.com/download/example_proggy_clean.gif "Proggy 清洁")

该网站有许多[变体](http://www.proggyfonts.com/index.php?menu=download)，包括斜线零，功能标记的粗体等：

[Proggy 广场 http://www.proggyfonts.com/download/example_proggy_square_bp.gif](http://www.proggyfonts.com/download/example_proggy_square_bp.gif "普吉广场")

（顺便说一句，我最喜欢的文本编辑器[TextPad](http://www.textpad.com/)允许您为不同的文件类型使用不同的字体和字体大小，这是一个非常棒的功能。）

* * *

## 回答 #44

> 赞同：2
> 
> 时间：2008-09-28T14:54:25.600

在我找到[ProggyTiny 之前，我总是使用](http://www.proggyfonts.com/)[Softy](http://users.breathe.com/l-emmett/)制作自己的字体。它非常简单，如果您对当前字体的某些功能感到恼火（例如“Q 与 0 太相似”），它可能会提高您的工作效率。

* * *

## 回答 #45

> 赞同：2
> 
> 时间：2008-11-09T19:05:31.440

Bitstream vera sans，一种 Gnome 字体。我发现它比 Consolas 清晰得多，这也很好。

![替代文字](../Images/4c8f5b45555c12a671bfe3f6332f11f5.png)

* * *

## 回答 #46

> 赞同：2
> 
> 时间：2009-02-03T12:45:54.620

我在几乎所有东西（Eclipse、putty 和其他终端）中都使用 Terminuse：http: [//fractal.csie.org/~eric/wiki/Terminus_font](http://fractal.csie.org/~eric/wiki/Terminus_font)

我必须说我不明白为什么大多数人使用像 9pt 这样的小字体，你有 14" 显示器还是什么？

对我来说最好的方法是使用使我的显示器最多显示一个 30-40 行的字体大小，这样我需要创建更小的方法:)

* * *

## 回答 #47

> 赞同：2
> 
> 时间：2009-05-22T06:57:02.990

我使用[MonteCarlo](http://bok.net/MonteCarlo/)，它基于 ProFont 但也有**粗体**。这样，在语法高亮中使用粗体的 IDE/编辑器可以让您的文本仍然正确地固定宽度。

[java 示例 http://bok.net.nyud.net/MonteCarlo/images/java-example.png](http://bok.net.nyud.net/MonteCarlo/images/java-example.png) [快速棕色狐狸示例 http://bok.net.nyud.net/MonteCarlo/images/screenshot-small.gif](http://bok.net.nyud.net/MonteCarlo/images/screenshot-small.gif)

像 ProFont、Proggy 和其他人一样，它非常小（基于位图，显然不能缩放），但我喜欢一种用于编码的小字体，而且它仍然非常清晰易读。

* * *

## 回答 #48

> 赞同：1
> 
> 时间：2008-08-07T15:43:02.027

我不得不同意 Kevin Kenny，Proggy 字体，尽管我更喜欢 Proggy Clean。但无论哪种方式，您都必须使用清楚显示数字 0 和字母 O 之间差异的字体。这里的预览字体并没有真正显示出来。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2008-08-07T17:50:09.697

我在[TextMate上使用](http://macromates.com/)[PanicSans](http://vnoel.wordpress.com/2007/04/25/coda-coding-font-panic-sans/) 12pt w/AA ，但在 Terminal/vim 上喜欢[Inconsolata](http://www.levien.com/type/myfonts/inconsolata.html) ...（正在讨论将我的 TM 字体更改为这个...但点大小为 14pt）:)

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2008-08-07T19:15:35.967

对我来说也有安慰

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2008-08-09T05:33:15.027

我刚刚尝试了 Consolas 和 Envy - Envy 对我来说似乎“太窄了”，但 Consolas 看起来很棒（我在 Mac 上）。感谢您的提示！

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2008-08-09T07:53:27.367

Courier New 对我来说也是如此，它的间距很好。

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2008-08-09T18:43:59.393

Consolas 用于代码编辑，[Dina](http://www.donationcoder.com/Software/Jibz/Dina/index.html)用于控制台输出。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2008-08-13T15:11:02.817

Lucida 控制台每次。

我从来没有找到一种字体可以在屏幕上以相同的点大小将尽可能多的代码行打包，而不会显得局促。

它看起来也不错。

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2008-08-13T16:03:24.363

我最近刚从 Bitstream Vera Sans Mono 切换到 Inconsolata，但在这里阅读答案，我打算给 Consolas 一个机会。到目前为止看起来真的很好。

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2008-08-14T04:22:59.033

我喜欢 consolas，尤其是用斜体表示评论。小斜体花饰太可爱了：P

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2008-08-22T18:03:10.673

@谦虚：

> 我希望有一个Mac版本。

您可以在 Mac 上安装字体。我一直使用它，无处不在，没有任何问题。唯一需要注意的是`nomacatsui`在使用 GVIM 时进行设置，或者更好的是，切换到[MacVim](http://code.google.com/p/macvim/)。

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2008-08-31T10:44:35.443

再次为[Dina](http://www.donationcoder.com/Software/Jibz/Dina/)投票。只要您以最佳尺寸（9 pt）使用它，它看起来就很棒。

![替代文字](../Images/e8ef08dc60252fb7786ad27512dfc5b2.png)

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2008-09-02T06:34:34.857

很长一段时间以来，我一直在使用[ProFont](http://www.tobias-jung.de/seekingprofont/)，主要是因为它允许很多线条适合给定的高度（比 Consolas 或其他人说的要多得多）。康索拉斯也不错，不过……

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2008-09-10T11:00:23.633

我从来没有考虑过改变我的字体，我一直对 Courier 很满意。这个帖子真的让我大开眼界，如果我能投票就好了！

与 Droid Sans Mono 一起去。

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2008-09-17T03:07:34.087

我自己也喜欢 Consolas，但是对于等宽字体，还有很多[其他选项](http://www.zeusedit.com/forum/viewtopic.php?t=301)可供选择：

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2008-09-18T20:14:46.777

不要忘记颜色！

出于某种原因，Twilight 中的 Delphi 7 不能很好地渲染 Droid Sans Mono，但在带有橙色黑色主题的 Visual Studio 中它非常出色。Deja Vu Sans Mono 是最好的多面手。我几乎在所有地方都使用它。除了丑陋的 Q 字形之外，Consolas 将非常出色。

自从我进入职场以来，我发现的另一件事是，即使我的视力很好，我也喜欢将代码字体保持在 12 或 13 磅左右，以减少眼睛疲劳并确保我不能放太多文字在屏幕上。保持代码块垂直较短是一种激励。

我注意到这个编辑框不尊重我的浏览器的默认等宽字体。它给了我摩纳哥（我在 OSX 上）。摩纳哥太可怕了。它的字形具有不良的角度元素，并且它的大写字母比例不佳。

哦，这在 Windows 上几乎没关系，因为你的字体无论如何看起来都不正确。/我穿上阻燃服

* * *

## 回答 #63

> 赞同：1
> 
> 时间：2008-10-14T19:39:18.587

Tahoma 非常易读。

如果您需要更大的空间，请使用 Verdana。

* * *

## 回答 #64

> 赞同：1
> 
> 时间：2008-10-19T02:52:02.590

ProFont 是一款出色的代码字体，Consolas 获得第二名。你总是可以用一点终端字体来复古，有点怀旧（将背景颜色自定义为黑色，将前景字体自定义为绿色以获得完整效果！）。

* * *

## 回答 #65

> 赞同：1
> 
> 时间：2008-10-20T06:56:21.960

在 bash 和 vim 中，我使用 Lucida Typewriter，但在 Kate、Scintilla、Eclipse 和 Netbeans 中，我（目前）使用 Lucida Casual，即比例字体。十年前，我开始在 Visual Studio (MS Comic Sans) 中使用比例字体，它对我来说效果很好。上述 IDE 中的彩色语法突出显示提供了出色的可读性，对于 HTML 和 LaTeX 等文本密集型语言，比例字体是一种自然选择。

* * *

## 回答 #66

> 赞同：1
> 
> 时间：2009-01-29T03:46:35.107

我也喜欢consolas。

* * *

## 回答 #67

> 赞同：1
> 
> 时间：2009-03-26T21:06:46.000

Consolas，适用于各种字体大小，我找不到更好的了。

* * *

## 回答 #68

> 赞同：1
> 
> 时间：2009-05-07T19:44:55.267

Consolas - 最近改用它，它很可爱。

* * *

## 回答 #69

> 赞同：1
> 
> 时间：2009-05-22T07:09:27.383

Windows 下的 Consolas 和 Courier New，*nix 下的 Inconsola。不过，我真的很怀念旧的 IBM 终端字体。来自绿色/橙色终端的那个。

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2008-08-23T06:10:58.707

我还必须为 Android 的“Droid Sans Mono”添加另一票。这是一种非常清晰、清晰的编码字体。

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2008-08-23T21:09:43.353

我尝试了 Myriad，直到我意识到使用可变宽度字体是个傻瓜游戏。

Courier New在这里，虽然我在这里看到它后会尝试Envy。

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2008-08-27T08:00:46.320

用于 Visual Studio 的控制台。这是我在获得新的安装设置时更改的第一件事。第二个是反转主要颜色，在我看来，黑色背景上的白色文本更容易盯着几个小时。

[白色背景上的黑色文本 http://college-code.com/stackoverflow/black_on_white.PNG](http://college-code.com/stackoverflow/black_on_white.PNG)

相对

[黑色背景上的白色文本 http://college-code.com/stackoverflow/white_on_black.PNG](http://college-code.com/stackoverflow/white_on_black.PNG)

在长时间的编码会议之后，第二个往往会让我的眼睛少流血。但是可能是我的代码。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2008-08-27T13:06:25.790

康索拉斯一路走来。

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2008-08-29T00:10:07.730

Lucida Console 或 Lucida Sans Typewriter，尽可能小，以便我可以最大限度地增加屏幕上的代码量。偶尔使用 Courier 或 Monaco（例如 TextMate 中的 Monaco）。

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2008-08-29T02:03:07.690

我是 Mac 上最初可用的[ProFont](http://www.tobias-jung.de/seekingprofont/)的快乐用户，现在可供所有人使用。

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2008-09-01T14:17:51.443

如果您像我一样只对衬线发誓，请尝试使用带有 K 的 Kourier，这是一种更紧凑的 Courier。

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2008-09-01T15:23:55.357

必须注意的是，您使用的文本编辑器/IDE 决定了字体的外观。我喜欢 UltraEdit，但它唯一能正确渲染的字体是 Courier New。它模糊了所有其他有用的等宽字体。但是，Visual Studio 可以很好地准确呈现任何字体。

目前，我将投票给康索拉斯。不过，我会尝试回复中列出的其他一些内容。谢谢你。顺便说一句，*请发布下载链接！*

* * *

## 回答 #78

> 赞同：0
> 
> 时间：2008-09-01T16:28:18.743

我正在我的 Mac 上挖掘 DejaVu Sans Mono（它应该与 Panic Sans 相同）。

* * *

## 回答 #79

> 赞同：0
> 
> 时间：2008-09-01T16:46:44.847

+1 Verdana -- 同意 pauldoo

用于编码的可变宽度字体可能不符合每个人的口味，但我真的很喜欢 Verdana 与 ClearType 的易读性。

* * *

## 回答 #80

> 赞同：0
> 
> 时间：2008-09-01T19:25:06.370

几年来，我一直在使用带有 Visual Studio 的 Proggy Clean TT。我喜欢选择零斜线字体的能力，因此当管理层决定编程而不是管理时，他们不会将 0101 与 0101（零）混淆。

[http://www.proggyfonts.com/](http://www.proggyfonts.com/)

* * *

## 回答 #81

> 赞同：0
> 
> 时间：2008-09-03T19:44:19.583

Consolas 除非我在关闭字体平滑的情况下运行缓慢的 RDP 连接，然后是 Lucida Console。

* * *

## 回答 #82

> 赞同：0
> 
> 时间：2008-09-08T00:49:51.140

它已经说过几次了，但[http://www.proggyfonts.com/](http://www.proggyfonts.com/)真是太棒了。我是 Proggy Clean Slashed 零粗体标点符号的忠实粉丝。我的大部分工作都是在 c# 中完成的，所以粗体标点符号非常适合它。

* * *

## 回答 #83

> 赞同：0
> 
> 时间：2008-09-08T19:23:04.053

我喜欢[ProFont TT >tweaked<](http://www.tobias-jung.de/seekingprofont/)它很干净，1、l 和 I 以及 0 和 O 之间有明显的区别。它在 9pt 时效果最好。它不能很好地扩展。

![ProFont Windows 9pt](../Images/cd8ac3d6c4df6f34bdc2f05da34cf46f.png)

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2008-09-10T09:45:10.400

维达纳。
易于阅读，并且非常重要，易于区分类似的字符，例如 O 和 0、( 和 {、1 和 I 和 l 等。

* * *

## 回答 #85

> 赞同：0
> 
> 时间：2008-09-11T08:31:54.217

给我安慰。这些是专门为 LCD + MS 提示引擎开发的。此外，您可能会发现[ClearType 调谐器](http://www.microsoft.com/typography/cleartype/tuner/step1.aspx)(MS PowerToy) 是一个很好的补充，因为它可以让您更好地控制字体的外观。

* * *

## 回答 #86

> 赞同：0
> 
> 时间：2008-09-15T17:56:14.810

对于 VS，没有什么比 Fixedsys 更好。

* * *

## 回答 #87

> 赞同：0
> 
> 时间：2008-09-15T18:15:11.457

我更喜欢Profont。

* * *

## 回答 #88

> 赞同：0
> 
> 时间：2008-09-16T14:25:23.780

我实际上买了 The Sans Mono Condensed，它（曾经）是 O'Reilly 标题中的 goto 代码字体。它与微软的 Consolas 出自同一人之手（但我购买时没有 Consolas）。

这是一张非常漂亮、紧致、清晰的脸——如果你也在做那种事情，它在幻灯片上效果很好。

* * *

## 回答 #89

> 赞同：0
> 
> 时间：2008-09-18T15:47:56.560

我以前从未听说过 Droid Sans Mono，但我安装并试用了 9 点，我必须说它是迄今为止我在 Linux 上看到的最高质量的单声道字体。

在我的 Mac 上，它一直是 Panic Sans，在 11 点或 12 点使用它可以实现真正适用于等宽的抗锯齿，这是我以前从未见过的。

* * *

## 回答 #90

> 赞同：0
> 
> 时间：2008-09-20T03:26:13.117

摩纳哥 10pt 给我。

* * *

## 回答 #91

> 赞同：0
> 
> 时间：2008-09-20T13:55:56.007

我在这个链接上挂了一年多，这是一篇题为“五种伟大的编程字体”的文章。这五种字体很好，但这篇文章包含了十几个有趣答案的评论。

[http://forums.programming-designs.com/viewtopic.php?pid=3338](http://forums.programming-designs.com/viewtopic.php?pid=3338)

* * *

## 回答 #92

> 赞同：0
> 
> 时间：2008-09-23T16:59:37.473

我为 Windows 用户推荐***Lucida Console ，为 Linux/Unix 推荐******Adob​​e Courier***，这些字体的大小为 10pt，看起来很棒！并且非常清晰

编辑：

我一直在说使用 Lucida Console 是一个不错的选择，好吧，现在我知道了***Consolas*** :)

* * *

## 回答 #93

> 赞同：0
> 
> 时间：2008-09-23T17:03:49.913

我在 Linux 和 Mac OS X 中都使用 Inconsolata。

* * *

## 回答 #94

> 赞同：0
> 
> 时间：2008-09-23T17:14:58.123

[6x13。](http://en.wikipedia.org/wiki/Fixed_(typeface)) 您可以在 1024x768 上获得两个终端或编辑器窗口，在 1600x1200 屏幕上获得三个。可以在[此处](http://www.hassings.dk/lars/fonts.html)找到此字体的 Windows 版本。

* * *

## 回答 #95

> 赞同：0
> 
> 时间：2008-09-25T21:36:05.453

我也更喜欢 Consolas，显然 cleartype 在使用其他字体时会有所帮助。

* * *

## 回答 #96

> 赞同：0
> 
> 时间：2008-10-07T16:44:13.680

Lucida Console 不太好，因为粗体文本比非粗体文本占用更多空间。康索拉斯克服了这一点。

* * *

## 回答 #97

> 赞同：0
> 
> 时间：2008-10-19T02:54:24.723

摩纳哥12pt，还有其他方法吗？

* * *

## 回答 #98

> 赞同：0
> 
> 时间：2008-10-20T07:08:42.950

我将 Bitstream Vera [http://www.gnome.org/fonts/](http://www.gnome.org/fonts/)用于 Visual Studio 2008 并搭配 Darkness Theme，因为我的眼睛无法处理白色背景。

* * *

## 回答 #99

> 赞同：0
> 
> 时间：2008-10-22T14:19:26.650

Verdana - 一旦我意识到我不必使用等距字体;-)

* * *

## 回答 #100

> 赞同：0
> 
> 时间：2008-10-22T15:31:22.670

**Consolas** 我在任何地方都使用它，我将它用于所有事情。建议：坚持下去。

* * *

## 回答 #101

> 赞同：0
> 
> 时间：2008-10-22T15:32:10.077

我一直在使用 Anonymous，但我需要查看其中一些其他字体。

* * *

## 回答 #102

> 赞同：0
> 
> 时间：2008-10-27T23:07:36.343

我只是使用 Courier New 或任何可用的等宽字体。

但是，我有时喜欢在 Notepad++ 中使用 sans-serif（目前是 Comic Sans MS）来进行评论。（但是，我现在更倾向于将所有内容切换到等宽，只是为了间距等的一致性。）

* * *

## 回答 #103

> 赞同：0
> 
> 时间：2008-11-03T09:48:04.810

还没有人提到它，所以我只提一下[DejaVu Sans Mono](http://dejavu.sourceforge.net/wiki/index.php/Main_Page)，它是 Vera Sans Mono 的一个分支，并且包含在大多数 Linux 发行版中。它支持大多数Unicode。

* * *

## 回答 #104

> 赞同：0
> 
> 时间：2008-11-03T10:13:21.857

我又为康索拉斯投了一票。我使用它是因为我从 Jeff 的博客文章中了解到它。谢谢你的建议。它让我改善了我日常编程生活的一个方面，这是我之前没有考虑太多的。

* * *

## 回答 #105

> 赞同：0
> 
> 时间：2008-11-04T12:04:15.970

比特流 Vera Sans Mono。[ [http://www.dafont.com/bitstream-vera-mono.font]](http://www.dafont.com/bitstream-vera-mono.font])

* * *

## 回答 #106

> 赞同：0
> 
> 时间：2008-11-09T18:51:14.010

比特流 vera sans mono

* * *

## 回答 #107

> 赞同：0
> 
> 时间：2008-12-17T16:01:06.953

任何等宽字体，真的。老实说，我觉得过去的事情并不重要。

* * *

## 回答 #108

> 赞同：0
> 
> 时间：2009-06-24T23:45:04.743

arial 是最好的

* * *

## 回答 #109

> 赞同：0
> 
> 时间：2009-08-20T03:08:19.517

我使用[`ForMateKonaVe`](http://hetima.com/textmate/index.html)，它是 Bitstream Vera Sans Mono 和半角 Konatsu 的合并。我在这里和那里使用了很多日语，这是在 TextMate 中显示它的最佳方式。

![科纳维](../Images/6c43a9243136ec54ea9aa50ed4e3a1d2.png)

* * *

## 回答 #110

> 赞同：0
> 
> 时间：2009-08-20T03:13:39.617

Fixedsys Excelsior 2.00、Raize 和惯例。

[http://kaishaku.org/codefonts/](http://kaishaku.org/codefonts/)

* * *

## 回答 #111

> 赞同：0
> 
> 时间：2009-11-25T11:01:50.880

试试 Lucida Grande.. 太棒了！！

* * *

## 回答 #112

> 赞同：0
> 
> 时间：2009-12-04T07:22:38.967

-2 for Bitstream Vera Sans Mono——它有一个点零——在修改后将此字体作为免费下载发布。
Prima Sans Mono 的 +2 - 缺少点零 - 需要免费下载 RapidShare 以将字体扩展到终端。

* * *

## 回答 #113

> 赞同：0
> 
> 时间：2010-01-03T00:40:56.120

我发誓 DejaVu Sans Mono

* * *

## 回答 #114

> 赞同：-2
> 
> 时间：2009-04-23T13:24:55.280

任何无衬线字体。

# functional-programming - 我为什么要学习 Lisp？

> ID：4724
> 
> 赞同：129
> 
> 时间：2008-08-07T13:54:03.137
> 
> 标签：functional-programming, lisp

我真的觉得我应该学习[Lisp](http://en.wikipedia.org/wiki/Lisp_(programming_language))并且有很多好的资源可以帮助我做到这一点。

我并没有被复杂的语法吓到，但是在“传统商业编程”中，我会在哪里找到使用它而不是程序语言的地方。

有没有用 Lisp 编写的商业杀手级应用程序？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2008-09-15T15:02:27.940

Lisp 是一种庞大而复杂的语言，具有庞大而复杂的运行时来支持它。因此，Lisp 最适合处理大而复杂的问题。

现在，一个*复杂*的问题与一个*复杂*的问题不同。一个*复杂*的问题是一个有很多小细节的问题，但这并不难。编写航空公司预订系统是一项复杂的业务，但如果有足够的资金和程序员，这并不难。得到区别？

一个复杂的问题是一个令人费解的问题，一个传统的分而治之的问题是行不通的。控制机器人，或使用非表格数据（例如语言）或高度动态的情况。

Lisp 非常适合解决方案必须可扩展的问题。经典的例子是 emacs 文本编辑器。它是完全可编程的，因此它本身就是一个编程环境。

Norvig在他的名著[PAIP](http://norvig.com/paip.html)中说 Lisp 是探索性编程的理想选择。也就是说，为尚未完全理解的问题编写解决方案（与在线预订系统相反）。换句话说：复杂的问题。

此外，学习 Lisp 会让你想起一些被遗忘的基本知识：冯诺依曼和图灵之间的区别。众所周知，图灵的计算模型是一个有趣的理论模型，但作为设计计算机的模型却毫无用处。另一方面，冯诺依曼设计了一个关于计算机和计算如何执行的模型：冯诺依曼模型。冯诺依曼模型的核心是你只有一个内存，并且在那里存储你的代码和数据。请注意，Java 程序（或 C#，或任何你喜欢的东西）是图灵模型的体现。你一劳永逸地设置你的程序。然后你希望你能处理所有扔在上面的数据。

Lisp 维护了冯诺依曼模型；代码和数据之间没有明确的、预先确定的边界。用 Lisp 编程让您对冯诺依曼模型的力量敞开心扉。用 Lisp 编程让你以新的眼光看待旧概念。

最后，由于是交互式的，您将在开发程序时学会与程序进行交互（而不是编译和运行）。这也改变了您编程的方式，以及您查看编程的方式。

有了这个介绍，我终于可以回答你的问题了：你会发现它比“传统”语言更胜一筹的地方吗？

如果您是高级程序员，则需要高级工具。没有比 Lisp 更先进的工具了。或者，换句话说：如果你的问题很难，答案是肯定的。否则没有。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2008-08-07T14:22:36.603

Lisp 的主要用途之一是人工智能。我的一个朋友在大学学习了研究生 AI 课程，在他的主要项目中，他用 Lisp 编写了一个“ [Lights Out](http://en.wikipedia.org/wiki/Lights_Out_(video_game)) ”求解器。他的程序的多个版本使用了略有不同的 AI 例程，并且在 40 台左右的计算机上进行了测试，产生了一些非常简洁的结果（我希望它可以在线某个地方供我链接，但我不认为它是）。

两个学期前，我使用 Scheme（一种基于 Lisp 的语言）编写了一个交互式程序，模拟了 Abbott 和 Costello 的“Who's on First”例程。来自用户的输入与一些相当复杂的数据结构（类似于其他语言的地图，但更灵活）进行匹配，以选择合适的响应。我还编写了一个例程来解决 3x3[幻灯片拼图](http://en.wikipedia.org/wiki/Sliding_puzzle)（一种可以轻松扩展到更大的幻灯片拼图的算法）。

总而言之，学习 Lisp（或 Scheme）可能不会产生除 AI 之外的许多实际应用，但正如许多其他人所说的那样，它是一种非常有价值的学习经验。使用像 Lisp 这样的函数式语言进行编程也将帮助您进行递归思考（如果您在其他语言中遇到递归问题，这可能会很有帮助）。

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2008-09-16T06:44:04.730

作为对[@lassevk](https://stackoverflow.com/questions/4724/learning-lisp-why#4737)的回应：

[![替代文字](../Images/5e00b9505e966199f01c958f94cb282f.png)](http://xkcd.com/297/)

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2008-08-07T13:56:51.430

*复杂的语法*？？

lisp 的语法**非常简单**。

用 lisp 编写的杀手级应用程序：[emacs](http://www.gnu.org/software/emacs/)。Lisp 将允许你随意扩展 emacs 来做几乎任何你能想到的编辑器可能做的事情。

*但是*，如果你*愿意*，你应该只学习 lisp ，而且你可能永远无法在工作中使用它，但它仍然很棒。

另外，我想补充一点：即使你找到了 lisp 有意义的地方，你也可能无法说服其他人它应该用于 java、c++、c#、python、ruby 等。

* * *

## 回答 #5

> 赞同：26
> 
> 时间：2008-08-07T14:00:39.473

我无法从第一手经验中回答，但你应该阅读[Paul Graham](http://en.wikipedia.org/wiki/Paul_Graham)[在 Lisp 上](http://www.paulgraham.com/lisp.html)写的内容。至于“杀手级应用”部分，请阅读[Beating the averages](http://www.paulgraham.com/avg.html)。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2008-08-12T13:10:30.033

我在 Lisp 专业编程了大约一年，绝对值得学习。通过在可能的情况下用函数替换所有样板代码，在不使用宏的情况下替换所有样板代码，您将有空前的机会从代码中删除冗余。您还可以在运行时获得无与伦比的灵活性，在代码和数据之间自由转换。因此，用户操作可以触发需要动态构建复杂结构的情况是 Lisp 真正的亮点。流行的航空公司航班调度程序都是用 Lisp 编写的，Lisp 中也有很多 CAD/CAM。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2008-08-26T10:48:14.380

Lisp 对于创建小的 DSL 非常有用。我有一份 Lisp in a Box 在工作中运行，并且我编写了一些 DSL 来询问 SQL 服务器数据库并在 C# 中生成数据层等。我所有的样板代码现在都用输出到 C# 的 lisp 宏编写。我用它生成 HTML、XML 和各种东西。虽然我希望我可以将 Lisp 用于日常编码，但 Lisp 可以带来实际的好处。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-08-26T09:51:45.983

如果你喜欢编程，你应该学习 Lisp 以获得纯粹的乐趣。[XKCD](http://xkcd.com/224/)完美地表达了随之而来的思想启蒙。学习 Lisp 对程序员来说就像冥想对和尚一样（我的意思是没有任何亵渎的含义）。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-08-12T13:03:58.283

当不使用一种语言的通用缩进约定时，任何语言看起来都会变得更加困难。当你关注 Lisp 时，你会很容易地看到它是如何表达语法树结构的（注意，这不太正确，因为预览有点小；r 应该与递归快速排序参数中的 fns 对齐）：

```
(defun quicksort (lis) 
  (if (null lis) 
      nil
      (let* ((x (car lis)) 
             (r (cdr lis)) 
             (fn (lambda (a) 
                   (< a x))))
         (append (quicksort (remove-if-not fn 
                                           r)) 
                 (list x)
                 (quicksort (remove-if fn 
                                       r)))))) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-08-12T14:51:46.863

我发现学习一门新语言总是会影响你使用你已经知道的语言的编程风格。对我来说，它总是让我以不同的方式思考用我的主要语言 Java 来解决问题。我认为总的来说，它只是在编程方面拓宽了你的视野。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-08-30T22:47:55.930

八十年代，我在大学里上过“口齿不清课”。尽管深入了解了课堂上提出的所有概念，但我*对*lisp 的伟大之处一无所知。恐怕很多人将 lisp 视为另一种编程语言，这正是多年前大学里的那门课程为我所做的。如果您看到有人抱怨 lisp 语法（或缺乏语法），那么他们很有可能是那些未能掌握 lisp 伟大之处的人之一。很长一段时间以来，我都是那些人中的一员。

直到二十年后，当我重新燃起对 lisp 的兴趣时，我才开始“了解”lisp 的有趣之处——无论如何对我来说。如果你在学习 lisp 时不会被闭包和 lisp 宏吓到，那么你可能已经错过了重点。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-11-27T05:34:02.063

学习 LISP/Scheme 可能不会给你任何增加的应用程序空间，但它会帮助你更好地了解函数式编程、它的规则和它的异常。

仅仅为了学习六个嵌套纯函数之美的不同之处，以及六个带有副作用的嵌套函数的噩梦，就值得花时间投资。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2010-04-02T03:40:33.010

来自[http://www.gigamonkeys.com/book/introduction-why-lisp.html](http://www.gigamonkeys.com/book/introduction-why-lisp.html)

> 关于 Lisp 最常重复的神话之一是它“死了”。虽然 Common Lisp 确实没有像 Visual Basic 或 Java 那样广泛使用，但将一种继续用于新开发并继续吸引新用户的语言描述为“已死”似乎很奇怪。最近的一些 Lisp 成功案例包括 Paul Graham 的 Viaweb，当雅虎收购了他的公司后，它成为了雅虎商店；ITA Software 的机票定价和购物系统 QPX，由在线售票商 Orbitz 和其他人使用；Naughty Dog 为 PlayStation 2、Jak 和 Daxter 开发的游戏，主要是用 Naughty Dog 发明的一种特定领域的 Lisp 方言编写的，称为 GOAL，其编译器本身是用 Common Lisp 编写的；和 Roomba，自主机器人真空吸尘器，其软件是用 L 编写的，L 是 Common Lisp 的向下兼容子集。或许更能说明问题的是托管开源 Common Lisp 项目的 Common-Lisp.net 网站的增长，以及过去几年如雨后春笋般涌现的本地 Lisp 用户组的数量。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-08-12T15:21:52.763

如果你不得不问自己是否应该学习 lisp，你可能不需要。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2008-08-20T09:58:38.310

学习 lisp 将使 Javascript 焕然一新！Lisp 确实迫使您同时掌握递归和整个“作为一流对象的功能”-范式。[请参阅 Crockfords 关于Scheme 与 Javascript](http://javascript.crockford.com/little.html)的优秀文章。Javascript 可能是当今最重要的语言，因此更好地理解它非常有用！

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2011-08-06T22:06:35.993

“Lisp 值得学习，因为当你最终获得它时，你将获得深刻的启蒙体验；这种体验将使你在余下的日子里成为一个更好的程序员，即使你从未真正经常使用 Lisp 本身。”

——埃里克·S·雷蒙德，《如何成为一名黑客》

[http://www.paulgraham.com/avg.html](http://www.paulgraham.com/avg.html)

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2008-08-07T14:01:22.623

我同意 Lisp 是您可能永远不会在商业环境中使用的语言之一。但即使你没有达到，学习它肯定会扩展你对整个编程的理解。例如，我在大学学习了 Prolog，虽然之后我从未使用过它，但我对许多编程概念有了更深入的了解，并且（有时）对我使用的语言有了更大​​的欣赏。

但是，如果您要学习它...无论如何，请阅读[On Lisp](http://paulgraham.com/onlisptext.html)

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2008-08-07T14:01:59.687

复杂的语法？lisp 的美妙之处在于它的语法非常简单。它只是一个列表，其中列表的每个元素可以是另一个列表或基本数据类型。

值得学习，因为它增强了您将函数视为另一种数据类型并将其使用的编码能力。这将改进您使用命令式和/或面向对象的语言进行编码的方式，因为它可以让您在代码结构方面更加灵活。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2008-08-07T14:12:15.563

好吧，我可能很奇怪，但我真的不太喜欢 Paul Graham 的文章，如果你还没有掌握 Common Lisp，那么关于 Lisp 的文章会是一本非常粗糙的书。相反，我会说选择 Siebel 的[Practical Common Lisp](http://www.gigamonkeys.com/book/)。至于“杀手级应用”，Common Lisp 似乎在[ITA](http://web.archive.org/web/20100606004926/http://www.itasoftware.com:80/about_us/)等小众商店中找到了自己的位置，所以虽然没有像 Rails 那样与 CL 同义的应用程序，但如果你这样做的话，工业上有些地方会使用它一点点挖掘。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2008-10-02T15:56:17.370

Gimp 的 Script-Fu 是唇语。那是一个Photoshop杀手应用程序。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-08-26T09:53:07.057

要添加到其他答案：

因为[SICP](http://mitpress.mit.edu/sicp/)课程（视频可[在此处](http://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/)获得）非常棒：教你 Lisp*等等*！

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-08-26T10:03:05.940

杀手级应用？[Franz Inc.](http://www.franz.com/)有很多[成功案例](http://www.franz.com/success/)，但此列表仅包括 AllegroCL 的用户……可能还有其他人。我最喜欢的是[关于顽皮狗的故事](http://www.franz.com/success/customer_apps/animation_graphics/naughtydog.lhtml)，因为我是 Crash Bandicoot 游戏的忠实粉丝。

对于学习 Common Lisp，我推荐[Practical Common Lisp](http://gigamonkeys.com/book)。它有一个动手的方法，至少对我来说比我看过的其他书更容易。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2008-09-15T15:16:51.730

您现在可以使用[Clojure](http://clojure.org/)在 Java VM 之上编写测试和脚本。虽然在 JVM 上实现了其他 Lisp 语言，但我认为 Clojure 在与 Java 集成方面做得最好。

有时，Java 语言本身会妨碍为 Java 代码编写测试（包括“传统商业编程”）。（我并不是说作为对 Java 的控诉——其他语言也有同样的问题——但这是事实。既然是主题，而不是 Java，我不会详细说明。如果有的话，请随时开始一个新主题有人想讨论它。） Clojure 消除了许多这些障碍。

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2008-11-26T14:41:44.593

Lisp 可以在任何使用传统编程的地方使用。没有什么不同，只是更强大。编写网络应用程序？你可以在 Lisp 上写一个桌面应用程序吗？你可以在 Lisp 上做，无论如何，你可以在 Lisp、Python 或任何其他通用编程上做（有几种语言只适合一项任务）。

最大的障碍可能是接受你的老板、同事或客户。这是您必须与他们合作的事情。选择一个实用的解决方案，如[Clojure](http://clojure.org)，它可以利用 Java 基础设施的当前安装基础，从 JVM 到库，可能会对您有所帮助。此外，如果你有一个 Java 程序，你可能会做一个插件架构并为它编写 Clojure 插件，最终用 Clojure 编写一半的代码。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-08-20T11:21:05.380

这是我自己思考了一段时间的话题，但我还没有真正做出决定，因为通常时间是主要问题...... ;)

由于到目前为止我在这篇文章中找不到这些链接，我将它们添加为公共利益：

成功与失败的故事： [JPL 的 Lisping](http://www.flownet.com/gat/jpl-lisp.html "喷气推进实验室的 Lisping")

真正令人印象深刻的成功故事： [Orbitz 公司正在使用 Lisp](http://www.paulgraham.com/carl.html "Orbitz 公司使用 Lisp")

是否用Lisp代替Java比较分析： [Lisp作为Java的替代方案](http://www.flownet.com/gat/papers/lisp-java.pdf "Lisp 作为 Java 的替代品")

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-09-24T23:26:31.217

不是原因，而是（微不足道的）AutoCAD 具有 LISP 和 DCL 运行时支持。如果您不想使用 VBA 或它们的 C++ 或 .NET SDK，或者如果 DIESEL 表达式不适合它，这是编写复杂宏（包括 ActiveX 自动化）的便捷方法。

AutoCAD 的很多功能实际上都是 LISP 例程。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-08-12T11:59:37.350

语法无关紧要，可读性无关！

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-11-29T04:04:49.123

并不是说这是一个杀手级应用，但它看起来可能很酷 [http://code.google.com/p/plop/](http://code.google.com/p/plop/)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-12-09T10:42:27.910

杀手级应用？ITA Software 的航班搜索引擎就是其中之一。

至于“为什么”，它很可能会让你成为一个更好的开发者，并且极不可能让你成为一个更差的开发者。然而，它可能会让你更喜欢 lisp 方言而不是其他语言。

# regex - 学习正则表达式

> ID：4736
> 
> 赞同：166
> 
> 时间：2008-08-07T14:05:23.677
> 
> 标签：regex

我真的不明白正则表达式。你能以易于理解的方式向我解释吗？如果有任何在线工具或书籍，您能否也链接到它们？

* * *

## 回答 #1

> 赞同：824
> 
> 时间：2010-05-03T16:09:21.150

最重要的部分是概念。一旦您了解了构建块的工作原理，语法上的差异只不过是温和的方言而已。正则表达式引擎语法之上的一层是您正在使用的编程语言的语法。诸如 Perl 之类的语言消除了大部分这种复杂性，但如果您在 C 程序中使用正则表达式，则必须牢记其他注意事项。

如果您将正则表达式视为可以随意混合和匹配的构建块，它可以帮助您学习如何编写和调试自己的模式，以及如何理解其他人编写的模式。

## 开始简单

从概念上讲，最简单的正则表达式是文字字符。该模式`N`与字符“N”匹配。

彼此相邻的正则表达式匹配序列。例如，该模式`Nick`匹配序列“N”后跟“i”后跟“c”后跟“k”。

如果你曾经`grep`在 Unix 上使用过——即使只是为了搜索普通字符串——你已经在使用正则表达式了！（`re`in`grep`指的是正则表达式。）

## 从菜单中订购

只需增加一点复杂性，您就可以将 'Nick' 或 'nick' 与 pattern 匹配`[Nn]ick`。方括号中的部分是一个*字符类*，这意味着它与一个封闭的字符完全匹配。您还可以在字符类中使用范围，因此`[a-c]`匹配“a”或“b”或“c”。

该模式`.`很特殊：它不仅匹配文字点，还匹配*任何*字符^(†</sup>。它在概念上与真正的大字符类相同`[-.?+%$A-Za-z0-9...]`。)

将字符类视为菜单：只选择一个。

## 有用的快捷方式

使用`.`可以为您节省大量输入，并且还有其他常用模式的快捷方式。假设你想匹配一个数字：一种写法是`[0-9]`. 数字是一个常见的匹配目标，因此您可以改用快捷方式`\d`。其他是`\s`（空白）和`\w`（单词字符：字母数字或下划线）。

大写的变体是它们的补码，因此`\S`匹配任何*非*空白字符，例如。

## 一次是不够的

*从那里，您可以使用quantifiers*重复部分模式。例如，模式`ab?c`匹配“abc”或“ac”，因为`?`量词使其修改的子模式成为可选。其他量词是

*   `*`（零次或多次）
*   `+`（一次或多次）
*   `{n}`（正好*n*次）
*   `{n,}`（至少*n*次）
*   `{n,m}`（至少*n*次但不超过*m*次）

将其中一些块放在一起，模式`[Nn]*ick`匹配所有

*   ick
*   缺口
*   缺口
*   尼克
*   尼克
*   尼克
*   *（等等）*

第一场比赛展示了一个重要的教训：*`*`总是成功！*任何模式都可以匹配零次。

其他一些有用的例子：

*   `[0-9]+`（及其等价物`\d+`）匹配任​​何非负整数
*   `\d{4}-\d{2}-\d{2}`匹配格式为 2019-01-01 的日期

## 分组

量词将模式修改到其紧邻的左侧。您可能希望`0abc+0`匹配 '0abc0'、'0abcabc0' 等，但*紧靠*加号量词左侧的模式是`c`. 这意味着`0abc+0`匹配“0abc0”、“0abcc0”、“0abccc0”等。

要匹配一个或多个末端为零的“abc”序列，请使用`0(abc)+0`. 括号表示可以量化为一个单元的子模式。正则表达式引擎保存或“捕获”与括号组匹配的输入文本部分也很常见。以这种方式提取位比计算索引和`substr`.

## 交替

早些时候，我们看到了一种匹配“Nick”或“nick”的方法。另一种是交替，如`Nick|nick`。请记住，交替包括左侧的所有内容和右侧的所有内容。使用分组括号来限制的范围`|`，*例如*.`(Nick|nick)`

再举一个例子，您可以等效地写`[a-c]`为`a|b|c`，但这可能不是最理想的，因为许多实现都假设替代方案的长度大于 1。

## 逃跑

虽然有些字符匹配自己，但其他字符具有特殊含义。该模式`\d+`不匹配反斜杠后跟小写 D 后跟加号：要得到它，我们将使用`\\d\+`. 反斜杠从后面的字符中删除特殊含义。

## 贪婪

正则表达式量词是贪婪的。这意味着它们匹配尽可能多的文本，同时允许整个模式成功匹配。

例如，假设输入是

> “你好，”她说，“你好吗？”

您可能希望`".+"`只匹配“Hello”，然后当您看到它从“Hello”一直匹配到“you?”时会感到惊讶。

要从贪婪切换到您可能认为的谨慎，`?`请在量词中添加额外的内容。现在您了解了`\((.+?)\)`问题中的示例是如何工作的。它匹配文字左括号的序列，后跟一个或多个字符，并以右括号终止。

如果您的输入是“（123）（456）”，那么第一个捕获将是“123”。非贪婪量词希望让模式的其余部分尽快开始匹配。

（至于您的困惑，我不知道任何正则表达式方言`((.+?))`会在哪里做同样的事情。我怀疑在传输过程中某处丢失了某些东西。）

## 锚点

使用特殊模式`^`仅在输入的开头`$`匹配并仅在结尾匹配。用你的模式制作“书挡”，你说，“我知道前面和后面是什么，但把中间的一切都给我”是一种有用的技术。

假设您要匹配表单的注释

> `-- This is a comment --`

你会写`^--\s+(.+)\s+--$`。

## 建立你自己的

正则表达式是递归的，所以现在您了解了这些基本规则，您可以随意组合它们。

## 编写和调试正则表达式的工具：

*   [正则表达式](https://regexr.com/)（用于 JavaScript）
*   Perl：[YAPE：正则表达式解释](https://metacpan.org/release/YAPE-Regex-Explain)
*   [Regex Coach](http://weitz.de/regex-coach/)（由[CL-PPCRE](https://edicl.github.io/cl-ppcre/)支持的引擎）
*   [正则表达式](https://www.regexpal.com/)（用于 JavaScript）
*   [正则表达式在线测试器](https://www.regular-expressions.info/)
*   [正则表达式好友](https://www.regexbuddy.com/)
*   [正则表达式 101](https://regex101.com/)（用于 PCRE、JavaScript、Python、Golang、Java 8）
*   [我讨厌正则表达式](https://ihateregex.io/)
*   [视觉正则表达式](http://laurent.riesterer.free.fr/regexp/)
*   [Expresso](http://www.ultrapico.com/Expresso.htm)（用于 .NET）
*   [Rubular](https://rubular.com/)（用于 Ruby）
*   [正则表达式库](http://regexlib.com/Default.aspx)（常见场景的预定义正则表达式）
*   [文本2RE](http://www.txt2re.com/)
*   [正则表达式测试](https://www.regextester.com/)器（用于 JavaScript）
*   [正则表达式风暴](http://regexstorm.net/)（用于 .NET）
*   [Debuggex](https://www.debuggex.com/)（可视化正则表达式测试器和助手）

## 图书

*   [掌握正则表达式](http://oreilly.com/catalog/9780596528126/)，第[2 版](http://oreilly.com/catalog/9780596002893)和第[3 版](http://shop.oreilly.com/product/9780596528126.do)。
*   [正则表达式备忘单](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/)
*   [正则表达式食谱](https://rads.stackoverflow.com/amzn/click/1449319432)
*   [自学正则表达式](https://rads.stackoverflow.com/amzn/click/0672325667)

## 免费资源

*   [RegexOne - 通过简单的交互式练习来学习。](https://regexone.com/)
*   [正则表达式 - 你应该知道的一切](http://neverfear.org/blog/view/Regex_tutorial_for_people_who_should_know_Regex__but_do_not___Part_1)（PDF 系列）
*   [正则表达式语法摘要](http://www.greenend.org.uk/rjk/2002/06/regexp.html)
*   [正则表达式如何工作](http://perl.plover.com/Regex/)

## 脚注

**†：**以上匹配任何字符的陈述`.`是出于教学目的的简化，并非严格正确。点匹配除换行符之外的任何字符`"\n"`，但实际上您很少期望诸如`.+`跨越换行符边界的模式。Perl 正则表达式有一个[`/s`switch](https://perldoc.perl.org/perlre.html#s)和 Java [`Pattern.DOTALL`](https://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Pattern.html#DOTALL)，例如，可以`.`匹配任何字符。对于不具有此类功能的语言，您可以使用诸如`[\s\S]`匹配“任何空白或任何非空白”之类的东西，换句话说就是任何东西。

# asp.net - 使用 ConfigurationManager 从任意位置加载配置

> ID：4738
> 
> 赞同：129
> 
> 时间：2008-08-07T14:07:21.033
> 
> 标签：asp.net, configuration, asp-classic

我正在开发一个数据访问组件，该组件将在包含经典 ASP 和 ASP.NET 页面的网站中使用，并且需要一种管理其配置设置的好方法。

我想使用一个自定义`ConfigurationSection`的，对于 ASP.NET 页面，这很好用。但是，当组件通过 COM 互操作从经典 ASP 页面调用时，组件不在 ASP.NET 请求的上下文中运行，因此不知道 web.config。

有没有办法告诉`ConfigurationManager`只从任意路径加载配置（例如`..\web.config`，如果我的程序集在`/bin`文件夹中）？如果有，那么我认为如果我的自定义部分默认`ConfigurationManager.GetSection`返回，我的组件可以回退到那个状态。`null`

任何其他方法都将受到欢迎！

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2008-08-07T14:14:44.187

试试这个：

```
System.Configuration.ConfigurationFileMap fileMap = new ConfigurationFileMap(strConfigPath); //Path to your config file
System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedMachineConfiguration(fileMap); 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-01-09T20:52:41.130

另一种解决方案是覆盖默认的环境配置文件路径。

我发现它是非平凡路径配置文件加载的最佳解决方案，特别是将配置文件附加到 dll 的最佳方法。

```
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", <Full_Path_To_The_Configuration_File>); 
```

例子：

```
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", @"C:\Shared\app.config"); 
```

更多细节可以在[这个博客](http://testautohub.blogspot.co.il/2013/01/override-default-application-config.html)中找到。

此外，[这个另一个答案](https://stackoverflow.com/a/6151688/503826)有一个很好的解决方案，包括刷新应用程序配置的代码和一个`IDisposable`将其重置回原始状态的对象。使用此解决方案，您可以将临时应用配置保持在范围内：

```
using(AppConfig.Change(tempFileName))
{
    // tempFileName is used for the app config during this context
} 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2010-09-29T02:52:01.277

Ishmaeel 的答案通常确实有效，但是我发现了一个问题，那就是 using`OpenMappedMachineConfiguration`似乎会丢失您从 machine.config 继承的节组。这意味着您可以访问自己的自定义部分（这是所有 OP 想要的），但不能访问正常的系统部分。例如，此代码将不起作用：

```
ConfigurationFileMap fileMap = new ConfigurationFileMap(strConfigPath);
Configuration configuration = ConfigurationManager.OpenMappedMachineConfiguration(fileMap);
MailSettingsSectionGroup thisMail = configuration.GetSectionGroup("system.net/mailSettings") as MailSettingsSectionGroup;  // returns null 
```

基本上，如果您将手表放在 上`configuration.SectionGroups`，您会看到 system.net 没有注册为 SectionGroup，因此通过正常渠道几乎无法访问。

我发现有两种方法可以解决这个问题。第一个，我不喜欢，是通过将它们从 machine.config 复制到您自己的 web.config 来重新实现系统部分组，例如

```
<sectionGroup name="system.net" type="System.Net.Configuration.NetSectionGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
  <sectionGroup name="mailSettings" type="System.Net.Configuration.MailSettingsSectionGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
    <section name="smtp" type="System.Net.Configuration.SmtpSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
  </sectionGroup>
</sectionGroup> 
```

我不确定 Web 应用程序本身之后是否会正确运行，但您可以正确访问 sectionGroups。

第二种解决方案是将您的 web.config 作为 EXE 配置打开，这可能更接近其预期功能：

```
ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap() { ExeConfigFilename = strConfigPath };
Configuration configuration = ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None);
MailSettingsSectionGroup thisMail = configuration.GetSectionGroup("system.net/mailSettings") as MailSettingsSectionGroup;  // returns valid object! 
```

我敢说这里提供的答案，无论是我的还是 Ishmaeel 的，都没有完全按照 .NET 设计者的意图使用这些功能。但是，这似乎对我有用。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-03-19T13:12:05.547

**接受的答案是错误的！**

它在访问 AppSettings 属性时引发以下异常：

> 无法将“System.Configuration.DefaultSection”类型的对象转换为“System.Configuration.AppSettingsSection”类型。

**这是正确的解决方案：**

```
System.Configuration.ExeConfigurationFileMap fileMap = new ExeConfigurationFileMap();
fileMap.ExeConfigFilename = "YourFilePath";
System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedExeConfiguration(fileMap, ConfigurationUserLevel.None); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2008-08-08T14:04:32.857

除了 Ishmaeel 的回答之外，该方法`OpenMappedMachineConfiguration()`将始终返回一个`Configuration`对象。因此，要检查它是否已加载，您应该检查`HasFile`true 表示它来自文件的属性。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-11-11T18:38:54.967

我向 word 托管的 .nET Compoent 提供了配置值，如下所示。

在 MS Word 中调用/托管的 .NET 类库组件。为了向我的组件提供配置值，我在 C:\Program Files\Microsoft Office\OFFICE11 文件夹中创建了 winword.exe.config。您应该能够像在传统 .NET 中那样读取配置值。

```
string sMsg = System.Configuration.ConfigurationManager.AppSettings["WSURL"]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-14T20:43:22.873

对于 ASP.NET，使用 WebConfigurationManager：

```
var config = WebConfigurationManager.OpenWebConfiguration("~/Sites/" + requestDomain + "/");
(..)
config.AppSettings.Settings["xxxx"].Value; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-09T10:53:32.317

这应该可以解决问题：

```
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", "newAppConfig.config); 
```

来源：[https ://www.codeproject.com/Articles/616065/Why-Where-and-How-of-NET-Configuration-Files](https://www.codeproject.com/Articles/616065/Why-Where-and-How-of-NET-Configuration-Files)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-08T22:18:57.280

使用 XML 处理：

```
var appPath = AppDomain.CurrentDomain.BaseDirectory;
var configPath = Path.Combine(appPath, baseFileName);;
var root = XElement.Load(configPath);

// can call root.Elements(...) 
```

# sql-server - MOSS SSP 问题 - 从已删除的 SSP 登录数据库失败

> ID：4752
> 
> 赞同：16
> 
> 时间：2008-08-07T14:21:10.087
> 
> 标签：sql-server, database, sharepoint, search, ssp

我们在测试环境中遇到了 SharePoint 实例的一些问题。谢天谢地，这不是生产；）当带有 SQL Server 数据库和搜索索引的磁盘空间不足时，问题就开始了。在此之后，搜索服务将不会运行，并且 SSP 中的搜索设置无法访问。回收磁盘空间并没有解决问题。因此，我们决定尝试解决这个问题，而不是恢复虚拟机。

我们创建了一个新的 SSP，并将所有服务的关联更改为新的 SSP。旧的 SSP 及其数据库随后被删除。PDF 文件的搜索结果不再出现，但搜索工作正常。MySites 也可以正常工作。

实施此更改后，会出现以下问题：

> 1) 审核失败消息开始出现在应用程序事件日志中，用于“DOMAIN\SPMOSSSvc”，这是 MOSS 场帐户。

```
Event Type: Failure Audit
Event Source: MSSQLSERVER
Event Category: (4)
Event ID: 18456
Date: 8/5/2008
Time: 3:55:19 PM
User: DOMAIN\SPMOSSSvc
Computer: dastest01
Description:
Login failed for user 'DOMAIN\SPMOSSSvc'. [CLIENT: <local machine>] 
```

> 2) SQL Server 探查器显示来自 SharePoint 的引用旧（已删除）SSP 数据库的查询。

所以...

*   这些对 DOMAIN\SPMOSSSvc 和旧 SSP 数据库的引用存在于哪里？
*   有没有办法从服务器中“完全”删除 SSP，然后重新创建？当单个 SSP 就位时，删除选项不可用（灰显）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-18T21:37:19.153

正如 Daniel McPherson 所说，这是在 SSP 被删除但相关作业未被删除并尝试与已删除的数据库通信时引起的。

如果 SSP 数据库已被删除或在删除 SSP 时出现问题，则作业可能不会被删除。当作业尝试运行时，它将失败，因为数据库不再存在。

按照 Daniel 提到的步骤进行操作：
1\. 转到 SQL Server Management Studio
2\. 禁用名为 SSPNAME_JobDeleteExpiredSessions 的作业，右键单击并选择禁用作业。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-10T08:48:47.223

我怀疑这些与试图登录不再存在的数据库的 SQL Server 代理有关。

要清除它，您需要： 1\. 转到 SQL Server Management Studio 2\. 禁用名为`<database name>_job_deleteExpiredSessions`

如果这有效，那么您应该清楚地删除它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T23:26:19.597

您是否尝试过使用命令行删除 SSP？当我们的 SSP 损坏并且只想摆脱它时，我发现这曾经有效。

命令是：

```
stsadm.exe -o deletessp -title <sspname> [-deletedatabases] 
```

`deletedatbases`开关是可选的。

* * *

此外，检查中央管理下的作业定义和作业计划，以确保没有与 SSP 相关的作业仍在运行

# sql-server - 使用 LINQ 时有多少数据库性能开销？

> ID：4782
> 
> 赞同：21
> 
> 时间：2008-08-07T14:38:59.723
> 
> 标签：sql-server, linq, performance, linq-to-sql

与使用大多数低级 C 加载的自定义优化查询相比，使用 C# 和 LINQ 涉及多少数据库性能开销，两者都具有 SQL Server 2008 后端？

我在这里特别考虑了这样一种情况，即您有一个相当数据密集型程序，并且每个屏幕将至少进行一次数据刷新或更新，并且将同时拥有 50-100 个用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T15:02:49.707

谢谢斯图。底线似乎是，如果您能够使用已编译的选择，则 LINQ to SQL 可能不会对较新版本的数据库性能开销产生重大影响，并且较慢的更新功能可能会更快，除非您有一个非常敏锐的做大部分编码的专家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T07:14:18.153

以我的经验，只要编写查询的人知道他/她在做什么，并采取通常的预防措施以确保生成的查询是最佳的，必要的索引就位等，开销是最小的。换句话说，数据库影响应该是相同的；应用程序端的开销很小但通常可以忽略不计。

也就是说……有一个例外；如果单个查询生成多个聚合，L2S 提供程序会将其转换为一个大型查询，每个聚合有一个子查询。对于大型表，这可能会产生显着的 I/O 影响，因为查询的 db I/O 成本会随着查询中每个新聚合的数量级增长。

解决方法当然是将聚合移动到存储过程或视图。Matt Warren 为替代查询提供程序提供了一些示例代码，以更有效的方式翻译这种查询。

资源：

[https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=334211](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=334211)

[http://blogs.msdn.com/mattwar/archive/2008/07/08/linq-building-an-iqueryable-provider-part-x.aspx](http://blogs.msdn.com/mattwar/archive/2008/07/08/linq-building-an-iqueryable-provider-part-x.aspx)

# deployment - WebSpere 网络部署中所谓的节点

> ID：4785
> 
> 赞同：14
> 
> 时间：2008-08-07T14:39:25.243
> 
> 标签：deployment, websphere, cluster-computing

在使用 Network Deployment 安装 WebSphere Application Server 时，节点是：

1.  物理机
2.  操作系统实例
3.  一组独立于物理机或操作系统实例的逻辑 WAS 实例

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-18T15:42:19.567

Basically,

A **server** is a runtime environment, a process of execution.
A **node** is a grouping of servers that share common configuration. It is a physical machine.
A **cell** is a grouping of nodes into a sigle administrative domain. For websphere, it mean that if you group several servers within a cell, then you can administer them with one Websphere admin console

Hope this helps!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-12T18:54:00.260

@ggasp 这是我从 IBM 信息中心得到的信息

> 节点是托管服务器的逻辑分组。
> 
> 节点通常对应于具有不同 IP 主机地址的逻辑或物理计算机系统。节点不能跨越多台计算机。

[http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/cagt_node.html](http://publib.boulder.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/cagt_node.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-17T02:16:25.973

请记住，通常 <> 总是。

从 WAS 6.0 及更高版本开始，您通常希望在每台物理计算机中设置多个节点，考虑到服务器的通常功能，您可以使用节点来分隔逻辑业务实体。

例如，有 6 个节点，2 台机器中的每台 3 个节点，并且有 1 对节点，您可以为每个阶段（dev、qa、staging）定义 3 个不同的集群，并使每个集群对另一个集群不可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-26T14:13:14.913

单元是由部署管理器和一个或多个节点构建的虚拟单元。节点是由节点代理和一个或多个服务器实例构建的另一个虚拟单元。

[在这里](http://itdevworld.wordpress.com/2009/05/03/websphere-concepts-cell-node-cluster-server/)您可以找到更多详细信息，包括图表。

# apache-flex - Flex / 空气混淆

> ID：4794
> 
> 赞同：21
> 
> 时间：2008-08-07T14:41:42.883
> 
> 标签：apache-flex, actionscript-3, air, obfuscation

我已经（大部分）用 Flex 编写了一个应用程序，并且我关心保护源代码。我启动了[Trillix swf 反编译器](http://www.flash-decompiler.com/)的演示，并打开了安装到我的 Program Files 目录中的 swf 文件。我看到我写的所有动作脚本包都在那里。即使有大量代码，我也不太关心包，因为如果没有 mxml 文件，它似乎仍然无法使用。我认为它们已转换为动作脚本，或者至少我希望如此。但是，我仍然想探索混淆。

有人对 Flash / Actionscript 3 / Flex 混淆器有任何经验吗？你能推荐一个好的产品吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-25T11:03:36.783

maclema 建议的程序不会真正阻止任何攻击者获取源 - “包装应用程序”需要不加密，以便攻击者能够发现您使用 AES（或任何其他算法）并且他将获得以类似的方式解密密钥（因为它需要在某处以明文形式存在）。一旦他有了这个，他将能够轻松地解密您的 SWF 文件。

唯一可靠的解决方案（嗯......）是某种混淆器 - 我们使用适用于最新版本的 Flex 的 Amayeta - 请参阅[http://www.amayeta.com/software/swfencrypt/](http://www.amayeta.com/software/swfencrypt/)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-08-07T16:28:34.337

这就是我要做的。

*   将您的应用程序编译为 SWF 文件。然后使用 AES 加密 SWF。

*   制作一个“包装”应用程序，使用 URLLoader 将加密的 SWF 加载到 ByteArray 中

*   使用[as3crypto](http://code.google.com/p/as3crypto/)库在运行时解密 swf。

*   解密后，使用 Loader.loadBytes 将解密的 swf 加载到包装应用程序中。

这将使获取代码变得更加困难。不是不可能，而是更难。

对于 AIR 应用程序，您可以在将应用程序交付给最终用户时对 SWF 进行加密。然后，您可以提供一个注册密钥，其中包含用于解密 SWF 的密钥。

此外，这里是一个 AS3 混淆器的链接。我不确定它的效果如何。 [http://www.ambiera.com/irrfuscator/index.html](http://www.ambiera.com/irrfuscator/index.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-04-29T16:33:33.710

好吧，在我看来，最简单和最安全的解决方案是混合 maclema 和 Borek 答案：

如果您从一开始就没有将其包含在您的流程中并且您的应用程序非常大，那么混淆代码可能会让人头疼：如果您使用远程包（并且没有向混淆器声明），混淆可能会使您的应用程序损坏如果您习惯于 Objects 或动态类中的许多 unTyped 变量......

所以：如果你在你的大应用程序上使用 maclema 的解决方案并在你的包装器上使用混淆（这是一个很容易混淆的小应用程序），那么你的代码将是最安全的，而且麻烦最少。只有非常愤怒的盗版者才会花时间对混淆进行逆向工程，然后解密包......好吧，如果有人想要你的应用程序代码太糟糕，它要么与 CIA 相关，要么你已经非常富有（或两者兼而有之）

谢谢大家的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-12T17:31:28.873

我最近发布了一个使用 Flash 的 iOS 和 Android 游戏。我在互联网上寻找一个很好的免费程序来保护我的 SWF 中的源代码，但找不到任何东西，所以我写了一个。它仍在开发中，并且“使用风险自负”，但它对我有用。

它在 github 上发布。检查一下，让我知道你的想法。

[https://github.com/Teesquared/flasturbate](https://github.com/Teesquared/flasturbate)

我上传了一个 Windows 二进制文件，但如果你想尝试一下，我建议你按照说明自行构建它。

此混淆器直接作用于 SWF 文件。它目前只重命名符号，但它建立在一个可以支持将来更改字节码的框架上。

# c# - 如何使用 .NET/C# 将域名解析为 IP 地址？

> ID：4816
> 
> 赞同：30
> 
> 时间：2008-08-07T14:56:59.797
> 
> 标签：c#, .net, dns, reverse-dns

如何使用 .NET/C# 将域名解析为 IP 地址？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-08-07T14:59:15.517

```
using System.Net;

foreach (IPAddress address in Dns.GetHostAddresses("www.google.com"))
{
   Console.WriteLine(address.ToString());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T15:00:08.027

尝试使用[System.Net.Dns](https://docs.microsoft.com/en-us/dotnet/api/system.net.dns)类

# c - C中的String.indexOf函数

> ID：4824
> 
> 赞同：45
> 
> 时间：2008-08-07T15:00:34.530
> 
> 标签：c, string

是否有一个 C 库函数可以返回字符串中字符的索引？

到目前为止，我发现的只是 strstr 之类的函数，它们将返回找到的 char *，而不是它在原始字符串中的位置。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2008-08-07T15:04:47.440

`strstr`返回一个指向找到的字符的指针，因此您可以使用指针算术：（注意：此代码未测试其编译能力，它距离伪代码仅一步之遥。）

```
char * source = "test string";         /* assume source address is */
                                       /* 0x10 for example */
char * found = strstr( source, "in" ); /* should return 0x18 */
if (found != NULL)                     /* strstr returns NULL if item not found */
{
  int index = found - source;          /* index is 8 */
                                       /* source[8] gets you "i" */
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-08-07T15:09:30.973

我觉得

> size_t strcspn ( const char * str1, const char * str2 );

是你想要的。这是从[此处](http://www.cplusplus.com/reference/clibrary/cstring/strcspn.html)提取的示例：

```
/* strcspn example */
#include <stdio.h>
#include <string.h>

int main ()
{
  char str[] = "fcba73";
  char keys[] = "1234567890";
  int i;
  i = strcspn (str,keys);
  printf ("The first number in str is at position %d.\n",i+1);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-08-07T15:05:07.877

编辑： strchr 仅适用于一个字符。指针算法说“Hellow！”：

```
char *pos = strchr (myString, '#');
int pos = pos ? pos - myString : -1; 
```

**重要提示：**如果没有找到字符串，strchr() 返回 NULL

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-08-07T15:07:47.730

你可以使用 strstr 来完成你想要的。例子：

```
char *a = "Hello World!";
char *b = strstr(a, "World");

int position = b - a;

printf("the offset is %i\n", position); 
```

这会产生结果：

```
the offset is 6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T15:04:16.100

如果你不完全依赖纯 C 并且可以使用 string.h 有 strchr() [See here](http://www.cplusplus.com/reference/clibrary/cstring/strchr.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-18T23:49:39.397

写你自己的:)

来自 BSD 许可的 C 字符串处理库的代码，称为[zString](https://github.com/fnoyanisi/zString)

[https://github.com/fnoyanisi/zString](https://github.com/fnoyanisi/zString)

```
int zstring_search_chr(char *token,char s){
    if (!token || s=='\0')
        return 0;

    for (;*token; token++)
        if (*token == s)
            return 1;

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-15T14:18:35.880

你可以写

```
s="bvbrburbhlkvp";
int index=strstr(&s,"h")-&s; 
```

`'h'`在给定的乱码中找到索引。

# zend-studio - 如何配置 eclipse (zend studio 6) 以提示和编码完成多种语言？

> ID：4839
> 
> 赞同：8
> 
> 时间：2008-08-07T15:12:10.530
> 
> 标签：zend-studio, code-completion

我梦想中的 IDE 提供完整的代码提示、解释和完善 PHP、Javascript、HTML 和 CSS。我知道它存在！

到目前为止， Eclipse IDE 下的[Zend studio 6](http://www.zend.com/en/products/studio/features)在提示 PHP、一些 Javascript 和 HTML 方面做得很好，我可以用什么方法来扩展它？

编辑：更多信息：现在，在eclipse下使用zend-6，我输入

```
<?php
p //(a single letter "p") 
```

我得到一个提示工具提示，其中包含所有以“p”开头的可用 php 函数（phpinfo()、parse_ini_file()、parse_str() 等），每个函数都有自己的解释：phpinfo()->“输出大量的 PHP 信息”，这同样适用于常规 HTML（但没有解释）。

但是，当我这样做时，我什么也得不到：

```
<style>
b /* (a single letter "b") */ 
```

如果我能从“边框”、“底部”等的“b”建议中得到，我会很高兴。这同样适用于 Javascript。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-08-07T15:47:35.420

我认为 JavaScript 和 CSS 需要位于单独的文件中才能正常工作。

Eclipse 中的 CSS 自动完成示例：

开始打字`border`

> ![eclipse中的css示例](../Images/e0faecf8f936918f4c249131d1fb902c.png)

然后设置厚度

> ![自动完成边框粗细](../Images/59caafb724f604807774935e2c9563ae.png)

然后选择颜色

> ![自动完成边框颜色](../Images/9e0e52c247ee3d3f5aba0170c7ac2008.png)

选择红色，并添加了 ; 为了我

> ![替代文字](../Images/9e0e52c247ee3d3f5aba0170c7ac2008.png)

恕我直言，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-07T15:24:12.847

Eclipse 的默认 CSS 和 HTML 编辑器非常好。默认的 javascript 编辑器做得不错，但需要做一些工作。

我刚刚在 Eclipse 3.3.2 中测试了这个

```
function test(){

}

te<CTRL+SPACE> 
```

它为我完成了这个方法：

```
var test = function(){

};

te<CTRL+SPACE> 
```

你能扩展你想让它做什么吗？

# c# - 拖放到托管的浏览器控件

> ID：4849
> 
> 赞同：18
> 
> 时间：2008-08-07T15:22:40.167
> 
> 标签：c#, browser

我有一个在 .NET 2 上编写的 WinForms 程序，它托管一个 webbrowser 控件并从已知服务器呈现 asp.net 页面。

我希望能够将我的 winforms 应用程序中的树视图中的树节点拖到托管网页中的特定位置，并让它在那里触发一个 javascript 事件。目前，我可以`IDocHostUIHandler`在浏览器控件上实现接口并获取拖放事件，然后`Navigate("javascript:fire_event(...)")`在控件上调用以在页面上执行脚本。但是，我希望这仅在我将数据放在页面的*特定*部分时才起作用。

我想，一种解决方案是咬紧牙关，以 activex 控件的形式编写自定义浏览器插件，将其嵌入到我想要拖放到的位置，并让它实现所需的拖放接口。

那行得通吗？有更清洁的方法吗？我可以利用浏览器控件托管在我的应用程序中这一事实并提供更深层次的交互吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T20:39:07.797

Take a look at the [BrowserPlus](http://browserplus.yahoo.com/) project at Yahoo.

It looks like they have built a toolkit so that you don't have to do the gritty work of writing the browser plugin yourself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-27T04:52:30.250

If you can find out the on screen position of the part of the page you are interested in, you could compare this with the position of the mouse when you receive the drop event. I'm not sure how practical this is if you can get the info out of the DOM or whatnot.

As an alternative could you implement the mouse events on the bit of the page using javascript?

# c# - C# 和箭头键

> ID：4850
> 
> 赞同：25
> 
> 时间：2008-08-07T15:23:28.883
> 
> 标签：c#, user-interface, directx

我是 C# 新手，正在现有应用程序中做一些工作。我有一个 DirectX 视口，其中包含我希望能够使用箭头键定位的组件。

目前我正在覆盖 ProcessCmdKey 并捕获箭头输入并发送 OnKeyPress 事件。这可行，但我希望能够使用修饰符（**`ALT`++ `CTRL`）`SHIFT`**。只要我拿着一个修改器并按下一个箭头，就不会触发我正在听的任何事件。

有没有人对我应该去哪里有任何想法或建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-08-07T17:38:05.510

在您覆盖的 ProcessCmdKey 中，您如何确定按下了哪个键？

keyData（第二个参数）的值将根据按下的键和任何修饰键而改变，因此，例如，按下左箭头将返回代码 37，shift-left 将返回 65573，ctrl-left 将返回 131109 和 alt-left 262181。

您可以使用适当的枚举值提取修饰符和 ANDing 按下的键：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    bool shiftPressed = (keyData & Keys.Shift) != 0;
    Keys unmodifiedKey = (keyData & Keys.KeyCode);

    // rest of code goes here
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2010-01-09T15:18:43.577

我赞成[Tokabi 的回答](https://stackoverflow.com/questions/4850/c-and-arrow-keys/5026#5026)，但为了比较密钥，这里有一些关于[StackOverflow.com](https://stackoverflow.com/questions/1369312/c-keys-enumeration-confused-keys-alt-or-keys-rbutton-keys-shiftkey-keys-alt/2033796#2033796)的额外建议。以下是我用来帮助简化一切的一些功能。

```
 public Keys UnmodifiedKey(Keys key)
    {
        return key & Keys.KeyCode;
    }

    public bool KeyPressed(Keys key, Keys test)
    {
        return UnmodifiedKey(key) == test;
    }

    public bool ModifierKeyPressed(Keys key, Keys test)
    {
        return (key & test) == test;
    }

    public bool ControlPressed(Keys key)
    {
        return ModifierKeyPressed(key, Keys.Control);
    }

    public bool AltPressed(Keys key)
    {
        return ModifierKeyPressed(key, Keys.Alt);
    }

    public bool ShiftPressed(Keys key)
    {
        return ModifierKeyPressed(key, Keys.Shift);
    }

    protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if (KeyPressed(keyData, Keys.Left) && AltPressed(keyData))
        {
            int n = code.Text.IndexOfPrev('<', code.SelectionStart);
            if (n < 0) return false;
            if (ShiftPressed(keyData))
            {
                code.ExpandSelectionLeftTo(n);
            }
            else
            {
                code.SelectionStart = n;
                code.SelectionLength = 0;
            }
            return true;
        }
        else if (KeyPressed(keyData, Keys.Right) && AltPressed(keyData))
        {
            if (ShiftPressed(keyData))
            {
                int n = code.Text.IndexOf('>', code.SelectionEnd() + 1);
                if (n < 0) return false;
                code.ExpandSelectionRightTo(n + 1);
            }
            else
            {
                int n = code.Text.IndexOf('<', code.SelectionStart + 1);
                if (n < 0) return false;
                code.SelectionStart = n;
                code.SelectionLength = 0;
            }
            return true;
        }
        return base.ProcessCmdKey(ref msg, keyData);
    } 
```

# xml - XML-sig 的权威来源

> ID：4860
> 
> 赞同：12
> 
> 时间：2008-08-07T15:33:59.223
> 
> 标签：xml, xml-signature

我们有一个关于 XML-sig 的问题，需要有关可选元素以及一些规范化和转换内容的详细信息。我们正在为一个非常小的 XML 语法有效负载编写规范，该有效负载将进入媒体文件的元数据，并且需要通过加密签名。与其重新发明轮子，我们认为我们应该使用 XML-sig 规范，但我认为其中大部分对于我们需要的东西来说都是多余的，因此我们希望与了解细节的人有更多的信息/对话。

具体来说，如果 XML 非常基本，没有用于格式化的选项卡并且特定于我们的需求，我们是否需要关心转换或规范化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-08-13T07:52:51.123

您能否告诉我们您正在使用的技术，因为这些东西周围有一些有趣的部分和一些捷径......即 WSE2 是复杂的野兽，我不喜欢出错！

我不喜欢开发人员这样做，并且有像 SSL Accelorates 这样的 WSE2 加速器，因为加密处理的成本很高，最好将其从正常代码和开发领域中移除。

如果这是您的选择 -[试试看这个 - ForumSystems](http://forumsys.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-08-19T21:37:21.100

如果存在**不**执行 XML 签名而只是将 XML 视为字节流并对其进行签名的选项，请执行此操作。它将更容易实现、更容易理解、更稳定（没有规范化、转换、策略......）并且速度更快。

如果您绝对必须拥有 XML DSIG（遗憾的是，我们中的一些人必须拥有），那么这些天当然是可能的，但有很多很多警告。您需要良好的库支持，Java 是 JDK 1.6 开箱即用的，我不熟悉其他平台。您必须测试与已签名 XML 的接收端的互操作性，尤其是当它们可能在不同的平台上时。

请务必阅读[Why XML Security Is Broken](http://www.cs.auckland.ac.nz/~pgut001/pubs/xmlsec.txt)，它基本上涵盖了有关 XML 规范化的恐怖的所有基础，并提供了一些替代方案的指示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-20T10:39:39.157

如果您需要在代码中签署 XML，请检查[XMLBlackbox](http://www.eldos.com/sbbdev/desc-xml.php)，它为您提供规范化和所有其他转换。XMLBlackbox 还支持 XAdES。

# regex - 为什么这个正则表达式更快？

> ID：4870
> 
> 赞同：16
> 
> 时间：2008-08-07T15:43:11.467
> 
> 标签：regex, ansi

我正在用 C# 编写各种 Telnet 客户端，我必须解析的部分内容是 ANSI/VT100 转义序列，特别是那些用于颜色和格式的转义序列（详见[此处](http://www.termsys.demon.co.uk/vtansi.htm#colors)）。

我拥有的一种方法是找到所有代码并将其删除，因此如果需要，我可以在没有任何格式的情况下呈现文本：

```
 public static string StripStringFormating(string formattedString)
{
    if (rTest.IsMatch(formattedString))
        return rTest.Replace(formattedString, string.Empty);
    else
        return formattedString;
} 
```

我是正则表达式的新手，有人建议我使用它：

```
static Regex rText = new Regex(@"\e\[[\d;]+m", RegexOptions.Compiled);
```

但是，如果由于服务器上的错误而导致转义码不完整，则此操作会失败。所以有人建议这样做，但我的朋友警告说它可能会更慢（这也符合我以后可能遇到的另一个条件（z））：

```
static Regex rTest = 
              new Regex(@"(\e(\[([\d;]*[mz]?))?)?", RegexOptions.Compiled);
```

这不仅有效，而且实际上更快并减少了对我的文本渲染的影响。有人可以向正则表达式新手解释，为什么？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-09T21:36:28.560

你真的想运行两次正则表达式吗？如果没有检查（坏我），我会认为这会很好：

```
public static string StripStringFormating(string formattedString)
{    
    return rTest.Replace(formattedString, string.Empty);
} 
```

如果是这样，您应该会看到它的运行速度提高了〜两倍……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-08-07T16:24:02.570

#1 较慢的原因是 [\d;]+ 是一个贪婪的量词。使用 +? 或者 *？将进行惰性量化。有关详细信息，请参阅[MSDN - 量词](http://msdn.microsoft.com/en-us/library/3206d374(VS.80).aspx)。

您可能想尝试：

```
"(\e\[(\d{1,2};)*?[mz]?)?" 
```

这对你来说可能更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-08-07T15:57:16.133

如果不做详细分析，我猜它会因为问号而更快。这些允许正则表达式是“惰性的”，并在它们足够匹配时立即停止，而不是检查其余输入是否匹配。

不过，我对这个答案并不完全满意，因为这主要适用于 * 或 + 之后的问号。如果我更熟悉输入，它可能对我更有意义。

（此外，对于代码格式，您可以选择所有代码并按`Ctrl`+`K`使其添加所需的四个空格。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-17T15:31:46.340

我不确定这是否会对您的工作有所帮助，但很久以前我写了一个正则表达式来解析 ANSI 图形文件。

```
(?s)(?:\e\[(?:(\d+);?)*([A-Za-z])(.*?))(?=\e\[|\z) 
```

它将返回每个代码和与之关联的文本。

输入字符串：

```
<ESC>[1;32mThis is bright green.<ESC>[0m This is the default color. 
```

结果：

```
[ [1, 32], m, This is bright green.]
[0, m, This is the default color.] 
```

# html - 当用户更改电子邮件地址时，“确认电子邮件”输入是一种好习惯吗？

> ID：4880
> 
> 赞同：27
> 
> 时间：2008-08-07T15:54:22.537
> 
> 标签：html, email, forms, confirm

我的组织有一个表格，允许用户向我们更新他们的电子邮件地址。建议我们有两个电子邮件输入框：第二个作为电子邮件确认。

面对确认时，我总是复制/粘贴我的电子邮件地址。我假设我们的大多数用户都不那么精明。

无论如何，这是否被认为是一种好习惯？我个人无法忍受，但我也意识到它可能不适合我。如果有人搞砸了他们的电子邮件，他们就无法登录，他们必须打电话来解决问题。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-08-07T16:36:19.953

我见过很多人输入错误的电子邮件地址，我还查看了充满无效电子邮件地址的用户数据库。

在我看来，你有两个选择。使用第二个框确认输入，或发送验证/激活电子邮件。

两者都是烦恼，因此您可以选择您认为不会让用户烦恼的内容。

大多数人会争辩说，必须查找电子邮件并单击链接更烦人，但它避免了复制/粘贴错误地址的问题，并且它允许您执行诸如删除或回滚用户之类的操作，如果他们没有激活之后说48小时。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-08-07T16:00:04.847

我只会使用一个输入框。“确认”输入是“确认密码”方法的残余。

对于密码，这很有用，因为它们通常以小圆圈的形式输入。所以，你不能只看它来确保你输入正确。

使用常规文本框，您可以直观地检查您的输入。因此，不需要确认输入框。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-08-07T15:58:31.717

我同意你的观点，这对我来说很烦人（我也将我的地址复制并粘贴到第二个输入中）。

话虽如此，对于不太懂行的用户来说，这可能是一个好主意。看着我妈妈打字是对许多用户在打字时不看屏幕的肯定（当她使用笔记本电脑时，她就像 Peanuts 中的 Linus 弹钢琴时一样）。如果拥有用户正确的电子邮件地址对您很重要，那么我会说输入确认是一个非常好的主意（这些天我可能会在第一个框中输入错误的电子邮件地址并将其错误地粘贴到第二个框中盒子然后觉得自己像个白痴）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-25T14:42:34.950

虽然更精通技术的人倾向于复制和粘贴，但不是技术人员发现必须输入两次同样烦人。在我失败的许多用户测试中，他们对技术的了解越少——他们对这样的事情就越恼火......他们很难按原样打字，当他们看到他们必须再次输入他们的电子邮件时，通常是迎接了一个强烈的迹象。

我会建议一些事情。

1.  在输入框旁边写下您要查找的信息的样式，例如*(ie user@domain.com)*。这很重要的原因是，您会惊讶于有多少技术不那么精通的人并不真正了解网站和电子邮件地址之间的区别，因此请让他们直观地了解您想要的格式。

2.  实时运行强格式测试，直观地向用户展示格式的好坏。如果一切正常，就会出现一个绿色复选框。

3.  最后，根据您的系统架构，我经常使用库在后台实际错误地处理域。我不一定要尝试在服务器上运行 VRFY - 我经常使用库来检查以确保他们输入的域的 DNS 记录中有 MX 记录。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T16:02:00.663

我同意贾斯汀的观点，虽然大多数技术人员会使用复制、粘贴方法，但对于不太懂行的用户来说，这是一个很好的做法。

我要补充的另一件事是第二个字段应该禁用自动完成功能。这可确保在至少一个字段上存在来自任一方法的人工输入。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-12-25T18:36:23.950

键入两次内容令人沮丧，并且无法防止复制和粘贴错误甚至是一些拼写错误。

如果在 48 小时内未完成激活或电子邮件退回，我将使用身份验证/激活模式并回滚到旧地址。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-08-07T16:34:49.350

只要字段是可见的，您就不需要确认框。只要您进行一些表单验证以确保它至少是电子邮件地址的有效格式，就可以让用户管理其余的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-08-07T16:16:37.607

我会说这没关系，但应该只保留用于电子邮件必不可少的表单。如果您在预订航班时输入了错误的电子邮件，那么您已经切断了自己和对方之间的双向链接，并且有可能无法获得确认号，在 StackOverflow 上，这只会意味着您的 Gravatar 不会被加载......

我认为自己相当技术人员，但如果我认为它足够重要，我总是填写这两个字段/wo cut-paste。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-05-21T08:27:07.290

我倾向于让它向指定的电子邮件地址发送验证码（并且只要求一次），并且在用户输入我发送给他们的代码之前不要更改电子邮件地址。

这样做的好处是，如果他们尝试快速连续地将其设置为十几个不同的地址，您将知道哪些地址通过他们输入的验证码起作用。

另外，如果我看到一个“确认电子邮件地址”框，我只是从前一个框中复制并粘贴，如果我对此感到内疚，我相信其他不太细心的用户也会这样做。

# javascript - 如何在下拉“选项”之间向下或向上键盘？

> ID：4884
> 
> 赞同：20
> 
> 时间：2008-08-07T15:58:10.313
> 
> 标签：javascript, events, dom, keyboard

我有一个自定义构建的基于 ajax [div] 的动态下拉列表。

我有一个 [输入] 框；`onkeyup`, 运行 Ajax 搜索，该搜索在`div`s 中返回结果并在使用`innerHTML`. 这些`div`s 都有亮点`onmouseover`，因此，典型的成功搜索会产生以下结构（请原谅半码）：

```
[input]
 [div id=results] //this gets overwritten contantly by my AJAX function
  [div id=result1 onmouseover=highlight onclick=input.value=result1]
  [div id=result2 onmouseover=highlight onclick=input.value=result2]
  [div id=result2 onmouseover=highlight onclick=input.value=result2]
 [/div] 
```

有用。

但是，我错过了常规 HTML 元素背后的重要功能。我无法在“选项”之间向下或向上键盘。

我知道 javascript 处理键盘事件，但是；我一直没能找到一个好的向导。（当然，后续问题最终会是：我可以`<ENTER>`用来触发那个`onclick`事件吗？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-08-17T20:48:41.760

您需要做的是将事件侦听器附加到`div`with `id="results"`。您可以通过在创建时添加`onkeyup`,`onkeydown`等属性来完成此操作`div`，也可以使用 JavaScript 附加这些属性。

我的建议是您使用 AJAX 库，如[YUI](http://developer.yahoo.com/yui/)、[jQuery](http://jquery.com/)、[Prototype](http://www.prototypejs.org/)等，原因有两个：

1.  听起来您正在尝试创建一个[自动完成](http://developer.yahoo.com/ypatterns/pattern.php?pattern=autocomplete)控件，这是大多数 AJAX 库应该提供的。如果您可以使用现有组件，您将节省大量时间。
2.  即使你不想使用某个库提供的控件，所有的库都提供了有助于隐藏不同浏览器提供的事件 API 之间的差异的事件库。

[忘记 addEvent，使用 Yahoo! 的 Event Utility](http://www.dustindiaz.com/yahoo-event-utility/)很好地总结了事件库应该为您提供的内容。我很确定 jQuery、Prototype 等提供的事件库。人。提供类似的功能。

如果该文章超出您的想象，请先查看[此文档](http://developer.yahoo.com/yui/event/index.html)，然后重新阅读原始文章（在使用事件库后，我发现该文章更有意义）。

其他几件事：

*   `onkeyup`与在 HTML 中写入等属性相比，使用 JavaScript 为您提供了更多的控制权。除非你想做一些*非常简单*的事情，否则我会使用 JavaScript。
*   如果您编写自己的代码来处理键盘事件，那么[好的键代码参考](http://www.cambiaresearch.com/c4/702b8cd1-e5b0-42e6-83ac-25f0306e3e25/Javascript-Char-Codes-Key-Codes.aspx)真的很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T16:11:58.413

在我的脑海中，我认为您需要在 JavaScript 中维护某种形式的数据结构，以反映当前下拉列表中的项目。您还需要对当前活动/选定项目的引用。

每次触发`keyup`or时`keydown`，更新对数据结构中活动/选定项的引用。要在 UI 上提供突出显示信息，请添加或删除通过 CSS 设置样式的类名称，具体取决于项目是否处于活动/选择状态。

此外，这不是什么大问题，但`innerHTML`也不是真正的标准（查看`createTextNode()`、`createElement()`和`appendChild()`创建数据的标准方法）。您可能还想了解如何在 JavaScript 中附加事件处理程序，而不是在 HTML 属性中这样做。

# sql - 什么时候应该有人决定切换数据库系统

> ID：4891
> 
> 赞同：11
> 
> 时间：2008-08-07T16:06:33.947
> 
> 标签：sql, database

在开发 Web 或桌面时，开发人员应该从 SQLite、MySQL、MS SQL 等切换

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-08-07T16:19:10.753

这取决于你在做什么。如果出现以下情况，您可能会切换：

*   您需要更高的可扩展性或更好的性能——比如从 SQLite 到 SQL Server 或 Oracle。
*   您需要访问更具体的数据类型。
*   您需要支持只运行特定数据库的客户。
*   您需要更好的 DBA 工具。
*   您的应用程序正在使用不同的平台，您的数据库不再运行，或者它的库不再运行。
*   你有能力/时间/预算来实际做出改变。根据具体情况，迁移可能是一个比项目中的所有内容更大的项目。像这样的迁移是引入不一致或丢失数据的好地方，因此需要非常小心。

切换的原因还有很多，这完全取决于您的要求和数据库的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-07T17:42:47.760

您应该在里程碑 2.3433 切换数据库，在树突 8,151,215 的左分支之前 3ps。

当你有理由这样做时，你应该切换数据库，这是我的建议。如果您现有的数据库性能符合您的预期，支持您的生产系统对其施加的负载，具有您的应用程序所需的功能并且您不厌倦它，为什么要更改？但是，如果您发现您的应用程序无法扩展，或者您正在设计具有高负载或可扩展性要求的应用程序，并且您的研究表明您当前的数据库平台在该领域很弱，或者如前所述，您需要一些特定数据库具有的空间分析或功能，你去吧。

另一个考虑因素可能是使用与数据库无关的 ORM 工具，该工具可以让您通过简单的配置设置自由地试验不同的数据库平台。那是我们考虑在数据库部门尝试新事物的触发因素。如果我们的应用程序可以处理 ORM 可以处理的任何数据库，那么当开源数据库在我们需要的性能水平上也能正常工作时，为什么还要为商业数据库支付许可费呢？

不过，最重要的是，对于数据库或任何其他技术，我认为没有“业务规则”会告诉您何时该切换 - 您的场景会告诉您该切换了，因为您的解决方案中有一些东西不会完全正确，如果你不在那个时候，就不需要改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-08-07T17:15:01.593

BrianLy 一针见血，但我还要补充一点，您最终可能会在不同的开发级别使用不同的数据库。开发人员在针对他们的个人开发服务器进行编码时，在他们的工作站上使用 SQLite，然后使用不同的数据库工具在登台和/或生产站点上使用 SQLite 并不少见。

当然，如果您使用特定于某个数据库工具（例如 PostGreSQL 中的 PostGIS）的扩展或功能，那么显然这不起作用。

# asp.net - 我应该使用用户名还是用户 ID 来引用 ASP.NET 中经过身份验证的用户

> ID：4911
> 
> 赞同：33
> 
> 时间：2008-08-07T16:19:40.487
> 
> 标签：asp.net, authentication

所以在我的简单学习网站中，我使用了内置的 ASP.NET 身份验证系统。

我现在添加一个用户表来保存他的 zip、DOB 等内容。我的问题是：

1.  在新表中，键应该是用户名（字符串）还是用户 ID，即他们在`asp_ tables`.
2.  如果最佳做法是使用那个丑陋的指南，有谁知道如何获得它？`System.Web.HttpContext.Current.User.Identity.Name`它似乎不像名称（ ）那样容易访问
3.  如果您建议我既不使用（不是由 ASP.NET 身份验证提供的 guid 和 userName 字段），那么我该如何使用 ASP.NET 身份验证呢？我喜欢的一种选择是使用用户的电子邮件地址作为登录名，但是如何让 ASP.NET 身份验证系统使用电子邮件地址而不是用户名？（或者那里无事可做，只是我决定我“知道” userName 实际上是一个电子邮件地址？

请注意：

*   我不是在问如何在 .NET 中获取 GUID，我只是指`asp_ tables`作为 guid 中的 userID 列。
*   用户名在 ASP.NET 身份验证中是唯一的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-08-07T16:26:40.910

您应该使用一些唯一的 ID，无论是您提到的 GUID 还是其他一些自动生成的密钥。但是，用户永远不应该看到这个数字。

这样做的一个巨大好处是您的所有代码都可以在用户 ID 上运行，但用户名并没有真正与它绑定。然后，用户可以更改他们的名字（我发现这在网站上很有用）。如果您使用电子邮件地址作为用户的登录名，这尤其有用……这对用户来说非常方便（这样他们就不必记住 20 个 ID，以防他们的常用用户 ID 很受欢迎）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-08-07T17:55:51.387

您应该使用用户 ID。它是 MembershipUser 的 ProviderUserKey 属性。

```
Guid UserID = new Guid(Membership.GetUser(User.Identity.Name).ProviderUserKey.ToString()); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-07T17:56:36.657

如果用户名是唯一的，我建议使用用户名作为表中的主键，这样做有几个很好的理由：

1.  主键将是一个聚集索引，因此通过用户名搜索用户详细信息将非常快速。
2.  它将阻止重复的用户名出现
3.  您不必担心使用两种不同的信息（用户名或 guid）
4.  由于不必查找两位信息，它将使编写代码变得更加容易。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-08-07T18:25:47.660

我会使用用户标识。如果您想使用用户名，您将使“更改用户名”功能变得非常昂贵。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-05-06T07:58:57.877

我同意 Palmsey 的观点，尽管他的代码似乎有一点错误：

```
Guid UserID = new Guid(Membership.GetUser(User.Identity.Name)).ProviderUserKey.ToString()); 
```

应该

```
Guid UserID = new Guid(Membership.GetUser(User.Identity.Name).ProviderUserKey.ToString()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-06T08:04:12.183

我会说使用用户 ID，这样用户名仍然可以在不影响主键的情况下更改。我还将用户名列设置为唯一以停止重复的用户名。

如果您主要搜索用户名而不是 UserID，则将 Username 设为聚集索引并将主键设置为非聚集索引。这将在搜索用户名时为您提供最快的访问，但是如果您主要搜索 UserId，则将其保留为聚集索引。

编辑：这也将更适合当前的 ASP.Net 成员表，因为它们也使用 UserID 作为主键。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-02-02T12:01:42.437

这是旧的，但我只想让发现这个的人注意一些事情：

1.  aspnet 会员数据库在访问用户记录时进行了优化。当使用 loweredusername 和 applicationid 搜索记录时，使用 sql server 中的聚集索引搜索（最佳）。这很有意义，因为当用户第一次发送他们的凭据时，我们只有提供的用户名才能继续。

2.  guid userid 将提供比 int 更大的索引大小，但这并不重要，因为我们通常一次只检索 1 条记录（用户），并且就碎片而言，读取次数通常大大超过写入和编辑的次数到用户表 - 人们根本不会经常更新该信息。

3.  可以编辑创建 aspnet 成员资格表的 regsql 脚本，这样它就可以使用 NEWSEQUENTIALID() 来提供更好的性能（我已经对此进行了分析），而不是使用 NEWID 作为用户 ID 的默认值。

4.  轮廓。创建“新学习网站”的人不应该尝试重新发明轮子。我工作过的一个网站使用了开箱即用的 aspnet 成员表（不包括可怕的配置文件系统），用户表包含近 200 万条用户记录。即使有这么多的记录，选择仍然很快，因为正如我开始所说，数据库索引专注于降低用户名+应用程序ID来对这些记录执行聚集索引搜索，一般来说，如果 sql 正在执行聚集索引搜索要找到 1 条记录，即使有大量记录，只要您不向表中添加列并开始拉回太多数据，您也不会遇到任何问题。

5.  担心这个系统中的引导，对我来说，基于系统的实际性能和经验，是过早的优化。如果您的用户 ID 有一个 int，但由于您的自定义索引设计等原因，系统执行次优查询，则系统将无法很好地扩展。微软的人在 aspnet 会员数据库方面做得很好，除了将 userId 更改为 int 之外，还有许多更高效的事情需要关注。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-08-27T08:16:04.503

我会使用一个自动递增的数字，通常是一个 int。

您希望使密钥的大小尽可能小。这使您的索引保持较小，并且也有利于任何外键。此外，您没有将数据设计与外部用户数据紧密耦合（这也适用于 aspnet GUID）。

通常，GUID 不能作为良好的主键，因为它们很大，并且插入可能发生在表中的任何数据页而不是最后一个数据页。主要的例外是如果您正在运行多个复制数据库。在这种情况下，GUID 对于键非常有用，但我猜您只有一个数据库，所以这不是问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-08-08T00:50:04.933

如果您打算使用 LinqToSql 进行开发，我建议您使用 Int 作为主键。当我建立非 Int 字段的关系时，我遇到了很多问题，即使 nvarchar(x) 字段具有使其成为唯一字段的约束。

我不确定这是 LinqToSql 中的一个已知错误还是什么，但我在当前项目中遇到了问题，我不得不在几个表上换掉 PK 和 FK。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-07T16:38:08.827

我同意迈克·斯通的观点。如果您要跟踪大量数据，我还建议仅使用 GUID。否则，一个简单的自动递增整数 (Id) 列就足够了。

如果您确实需要 GUID，.NET 非常可爱，您可以通过一个简单的...

```
Dim guidProduct As Guid = Guid.NewGuid() 
```

或者

```
Guid guidProduct = Guid.NewGuid(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-08T01:56:00.137

我也同意迈克·斯通的观点。我的公司最近为外部客户端（而不是通过 LDAP 进行身份验证的内部用户）实施了一个新的用户表。对于外部用户，我们选择将 GUID 存储为主键，并将用户名存储为 varchar，并对用户名字段进行唯一约束。

此外，如果您要存储密码字段，我强烈建议您将密码作为加盐的哈希二进制文件存储在数据库中。这样，如果有人要破解您的数据库，他们将无法访问您客户的密码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-05-06T08:48:33.077

我会在我的代码中使用 guid，并且如前所述，将电子邮件地址用作用户名。毕竟，对于用户来说，它已经是独一无二且令人难忘的。甚至可能放弃 guid (v. 有争议的)。

有人提到在您的代码中使用 GUID 上的聚集索引。我会避免这种情况，尤其是在 INSERT 很高的情况下；每次插入记录时都会重建索引。聚集索引在自动增量 ID 上运行良好，因为仅附加新记录。

# c# - 如何使按钮看起来好像被按下？

> ID：4913
> 
> 赞同：46
> 
> 时间：2008-08-07T16:21:59.280
> 
> 标签：c#, .net, winforms, user-interface, button

使用 VS2008、C#、.Net 2 和 Winforms 如何使常规按钮看起来“按下”？想象一下这个按钮是一个开/关开关。 `ToolStripButton`具有 Checked 属性，但常规 Button 没有。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2008-08-07T16:30:46.953

获得此选项的一种方法是放置一个“CheckBox”对象并将其“外观”从“Normal”更改为“Button”，这将为您提供我相信您正在寻找的相同功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-08-17T22:25:53.047

您可能也可以为此使用 ControlPaint 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-13T13:23:04.430

我想你可能需要一个`ToggleButton`. 您可以查看提供此类控制的 WinForms 组件的第三方供应商，例如 Telerik、DevExpress、ComponentFactory、ViBlend。它们都提供切换按钮。

# java - 这真的是扩大与自动装箱吗？

> ID：4922
> 
> 赞同：31
> 
> 时间：2008-08-07T16:30:32.180
> 
> 标签：java, primitive, autoboxing

我在[另一个问题的回答中](https://stackoverflow.com/a/4384/697449)看到了这一点，参考了 Java 规范的缺点：

> 还有更多的缺点，这是一个微妙的话题。看看[这个](http://kiranthakkar.blogspot.com/2007/05/method-overloading-with-new-features-of.html)：
> 
> ```
> public class methodOverloading{
>      public static void hello(Integer x){
>           System.out.println("Integer");
>      }
> 
>      public static void hello(long x){
>           System.out.println("long");
>      }
> 
>      public static void main(String[] args){
>          int i = 5;
>          hello(i);
>      }
> } 
> ```
> 
> 这里将打印“long”（我自己没有检查过），因为编译器选择加宽而不是自动装箱。使用自动装箱时要小心，或者根本不要使用它！

*我们确定这实际上是扩大而不是自动装箱的一个例子，还是完全是别的东西？*

在我最初的扫描中，我同意这样一种说法，即输出将是“长”的，`i`因为它被声明为一个原语而不是一个对象。但是，如果你改变了

```
hello(long x) 
```

到

```
hello(Long x) 
```

输出将打印“整数”

这里到底发生了什么？我对java的编译器/字节码解释器一无所知......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-08-07T18:18:34.897

在第一种情况下，您的转换正在扩大。在编译的类上运行“javap”实用程序（包括 JDK）时可以看到这一点：

```
public static void main(java.lang.String[]);
  Code:
   0:   iconst_ 5
   1:   istore_ 1
   2:   iload_ 1
   3:   i2l
   4:   invokestatic    #6; //Method hello:(J)V
   7:   return

} 
```

很明显，您会看到 I2L，它是扩展 Integer-To-Long 字节码指令的助记符。请参阅[此处](http://java.sun.com/docs/books/jvms/second_edition/html/Instructions2.doc6.html)的参考。

在另一种情况下，将“long x”替换为对象“Long x”签名，您将在 main 方法中拥有以下代码：

```
public static void main(java.lang.String[]);
  Code:
   0:   iconst_ 5
   1:   istore_ 1
   2:   iload_ 1
   3:   invokestatic    #6; //Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
   6:   invokestatic    #7; //Method hello:(Ljava/lang/Integer;)V
   9:   return

} 
```

所以你会看到编译器创建了指令 Integer.valueOf(int)，将原语装箱到包装器中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-07T16:36:25.447

是的，在测试中尝试一下。您将看到打印出“长”字样。它正在扩大，因为 Java 在选择将其自动装箱为 Integer 之前会选择将 int 扩大为 long，因此选择调用 hello(long) 方法。

编辑：[被引用的原始帖子](https://stackoverflow.com/questions/4242/why-cant-i-call-tostring-on-a-java-primitive#4384)。

进一步编辑：第二个选项会打印 Integer 的原因是因为没有“扩大”到更大的基元作为选项，所以它必须将它装箱，因此 Integer 是唯一的选择。此外，java 只会自动装箱到原始类型，因此如果您离开 hello(Long) 并删除 hello(Integer)，它会给出编译器错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-07T19:02:29.630

这个例子的另一个有趣的事情是方法重载。类型扩展和方法重载的组合仅起作用，因为编译器必须决定选择哪种方法。考虑以下示例：

```
public static void hello(Collection x){
   System.out.println("Collection");
}

public static void hello(List x){
   System.out.println("List");
}

public static void main(String[] args){
   Collection col = new ArrayList();
   hello(col);
} 
```

它不使用 List 的运行时类型，它使用 Collection 的编译时类型，因此打印“Collection”。

我鼓励您阅读[Effective Java](http://books.google.com/books?id=ZZOiqZQIbRMC)，它让我看到了 JLS 的一些极端案例。

# javascript - 将列表包装成列

> ID：4923
> 
> 赞同：68
> 
> 时间：2008-08-07T16:30:45.613
> 
> 标签：javascript, jquery, html, css, cfml

我`ColdFusion`用来填充一个包含 HTML 无序列表 ( `<ul>`s) 的模板。

其中大多数都没有那么长，但有一些长度非常长，并且真的可以放在 2-3 列中。

是否有 HTML、ColdFusion 或 JavaScript（我正在接受 jQuery 解决方案）方式来轻松做到这一点？为了节省一些滚动，一些过于复杂的重量级解决方案是不值得的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-08-07T18:59:58.167

所以我从 A List Apart [CSS Swag: Multi-Column Lists](http://www.alistapart.com/articles/multicolumnlists)中找到了这篇文章。我最终使用了第一个解决方案，它不是最好的，但其他解决方案需要使用无法动态生成的复杂 HTML，或者创建许多自定义类，这可以完成但需要大量的内联样式和可能是一个巨大的页面。

不过，仍然欢迎其他解决方案。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-08-08T19:25:00.183

如果 Safari 和 Firefox 支持对您来说足够好，那么有一个 CSS 解决方案：

```
ul {
  -webkit-column-count: 3;
     -moz-column-count: 3;
          column-count: 3;
  -webkit-column-gap: 2em;
     -moz-column-gap: 2em;
          column-gap: 2em;
} 
```

我不确定Opera。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-08-07T16:51:54.697

据我所知，没有纯 CSS/HTML 方法可以实现这一点。您最好的选择是在预处理 ( `if list length > 150, split into 3 columns, else if > 70, split into 2 columns, else 1`) 中进行。

另一种选择，使用 JavaScript（我不熟悉[jQuery](https://jquery.com/)库）将遍历列表，可能基于它们是某个类，计算子元素的数量，如果它是一个足够高的数字，动态在第一个列表之后创建一个新列表，将一些列表项转移到新列表中。至于实现列，您可能会将它们向左浮动，然后是具有样式的元素`clear: left`或`clear: both`.

```
.column {
  float: left;
  width: 50%;
}
.clear {
  clear: both;
}
```

```
<ul class="column">
  <li>Item 1</li>
  <li>Item 2</li>
  <!-- ... -->
  <li>Item 49</li>
  <li>Item 50</li>
</ul>
<ul class="column">
  <li>Item 51</li>
  <li>Item 52</li>
  <!-- ... -->
  <li>Item 99</li>
  <li>Item 100</li>
</ul>
<div class="clear">
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-16T20:37:04.947

我已经用 jQuery 完成了这项工作——它是跨平台的，而且代码最少。

选择 UL，将其克隆，并将其插入到前一个 UL 之后。就像是：

```
$("ul#listname").clone().attr("id","listname2").after() 
```

这将在前一个列表之后插入您的列表副本。如果原始列表的样式是 float:left，它们应该并排出现。

然后，您可以从左侧列表中删除偶数项，从右侧列表中删除奇数项。

```
$("ul#listname li:even").remove();
$("ul#listname2 li:odd").remove(); 
```

现在你有一个从左到右的两列列表。

要执行更多列，您需要使用`.slice(begin,end)`和/或`:nth-child`选择器。即，对于 21 个 LI，您可以`.slice(8,14)`创建一个插入原始 UL 之后的新 UL，然后选择原始 UL 并删除用 选择的 li `ul :gt(8)`。

试试 Bibeault/Katz 关于 jQuery 的书，这是一个很好的资源。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2008-09-15T18:31:55.583

下面的 JavaScript 代码只在 Spidermonkey 和 Rhino 中工作，并且在 E4X 节点上运行——也就是说，这仅对服务器端 JavaScript 有用，但它可能会给某人一个开始做 jQuery 版本的起点。（它在服务器端对我来说非常有用，但我在客户端并没有严重到需要它来实际构建它。）

```
function columns(x,num) {
    num || (num = 2);
    x.normalize();

    var cols, i, j, col, used, left, len, islist;
    used = left = 0;
    cols = <div class={'columns cols'+num}></div>;

    if((left = x.length())==1)
        left = x.children().length();
    else
        islist = true;

    for(i=0; i<num; i++) {
        len = Math.ceil(left/(num-i));
        col = islist ? new XMLList
                     : <{x.name()}></{x.name()}>;

        if(!islist && x['@class'].toString())
            col['@class'] = x['@class'];

        for(j=used; j<len+used; j++)
            islist ? (col += x[j].copy()) 
                   : (col.appendChild(x.child(j).copy()));

        used += len;
        left -= len;
        cols.appendChild(<div class={'column'+(i==(num-1) ? 'collast' : '')}>{col}</div>);
    }
    return cols;
} 
```

你把它叫做`columns(listNode,2)`两列，它变成：

```
<ul class="foo">
  <li>a</li>
  <li>b</li>
  <li>c</li>
</ul> 
```

进入：

```
<div class="columns cols2">
  <div class="column">
    <ul class="foo">
      <li>a</li>
      <li>b</li>
    </ul>
  </div>
  <div class="column collast">
    <ul class="foo">
      <li>c</li>
    </ul>
  </div>
</div> 
```

它应该与这样的 CSS 一起使用：

```
div.columns {
    overflow: hidden;
    _zoom: 1;
}

div.columns div.column {
    float: left;
}

div.cols2 div.column {
    width: 47.2%;
    padding: 0 5% 0 0;
}

div.cols3 div.column {
    width: 29.8%;
    padding: 0 5% 0 0;
}

div.cols4 div.column {
    width: 21.1%;
    padding: 0 5% 0 0;
}

div.cols5 div.column {
    width: 15.9%;
    padding: 0 5% 0 0;
}

div.columns div.collast {
    padding: 0;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-16T20:40:32.193

大多数人忘记的事情是，当浮动`<li/>`项目时，所有项目都必须具有相同的高度，否则列开始失控。

由于您使用的是服务器端语言，我的建议是使用 CF 将列表拆分为 3 个数组。然后你可以使用一个外部`ul`来包裹 3 个内部`ul`，如下所示：

```
<cfset thelist = "1,2,3,4,5,6,7,8,9,10,11,12,13">  
<cfset container = []>  
<cfset container[1] = []>  
<cfset container[2] = []>  
<cfset container[3] = []>  

<cfloop list="#thelist#" index="i">  
    <cfif i mod 3 eq 0>  
        <cfset arrayappend(container[3], i)>  
    <cfelseif i mod 2 eq 0>  
        <cfset arrayappend(container[2], i)>  
    <cfelse>  
        <cfset arrayappend(container[1], i)>  
    </cfif>  
</cfloop>  

<style type="text/css"> 
    ul li { float: left; }  
    ul li ul li { clear: left; }  
</style>  

<cfoutput>  
<ul>  
    <cfloop from="1" to="3" index="a">  
    <li>  
        <ul>  
            <cfloop array="#container[a]#" index="i">  
            <li>#i#</li>  
            </cfloop>  
        </ul>  
    </li>  
    </cfloop>  
</ul>  
</cfoutput> 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2009-12-21T18:49:11.150

这是[Thumbkin](https://stackoverflow.com/questions/4923/wrapping-lists-into-columns/76747#76747)示例的变体（使用 Jquery）：

```
var $cat_list = $('ul#catList'); // UL with all list items.
var $cat_flow = $('div#catFlow'); // Target div.
var $cat_list_clone = $cat_list.clone(); // Clone the list.
$('li:odd', $cat_list).remove(); // Remove odd list items.
$('li:even', $cat_list_clone).remove(); // Remove even list items.
$cat_flow.append($cat_list_clone); // Append the duplicate to the target div. 
```

谢谢拇指琴！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-21T05:56:31.860

`</ul><ul>`使用模运算，您可以通过在循环期间插入 a 来快速将列表拆分为多个列表。

```
<cfset numberOfColumns = 3 />
<cfset numberOfEntries = 34 />
<ul style="float:left;">
    <cfloop from="1" to="#numberOfEntries#" index="i">
        <li>#i#</li>
            <cfif NOT i MOD ceiling(numberOfEntries / numberOfColumns)>
                </ul>
                <ul style="float:left;">
            </cfif>
    </cfloop>
</ul> 
```

使用`ceiling()`而不是`round()`确保列表末尾没有多余的值并且最后一列最短。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-08-30T11:09:29.483

Flexbox 可用于在行和列方向上包装项目。

主要思想是将`flex-direction`容器上的设置为`row`或`column`。

NB：现在[浏览器支持](http://caniuse.com/#feat=flexbox)非常好。

## [小提琴](http://jsfiddle.net/danield770/xp2y2sp1/)

（从[这篇旧的“列表分开”文章中](http://alistapart.com/article/multicolumnlists)提取的示例标记）

```
ol {
  display: flex;
  flex-flow: column wrap; /* flex-direction: column */
  height: 100px; /* need to specify height :-( */
}
ol ~ ol {
  flex-flow: row wrap; /* flex-direction: row */
  max-height: auto; /* override max-height of the column direction */
}
li {
  width: 150px;
}
a {
  display: inline-block;
  padding-right: 35px;
}
```

```
<p>items in column direction</p>
<ol>
  <li><a href="#">Aloe</a>
  </li>
  <li><a href="#">Bergamot</a>
  </li>
  <li><a href="#">Calendula</a>
  </li>
  <li><a href="#">Damiana</a>
  </li>
  <li><a href="#">Elderflower</a>
  </li>
  <li><a href="#">Feverfew</a>
  </li>
  <li><a href="#">Ginger</a>
  </li>
  <li><a href="#">Hops</a>
  </li>
  <li><a href="#">Iris</a>
  </li>
  <li><a href="#">Juniper</a>
  </li>
  <li><a href="#">Kava kava</a>
  </li>
  <li><a href="#">Lavender</a>
  </li>
  <li><a href="#">Marjoram</a>
  </li>
  <li><a href="#">Nutmeg</a>
  </li>
  <li><a href="#">Oregano</a>
  </li>
  <li><a href="#">Pennyroyal</a>
  </li>
</ol>
<hr/>
<p>items in row direction</p>
<ol>
  <li><a href="#">Aloe</a>
  </li>
  <li><a href="#">Bergamot</a>
  </li>
  <li><a href="#">Calendula</a>
  </li>
  <li><a href="#">Damiana</a>
  </li>
  <li><a href="#">Elderflower</a>
  </li>
  <li><a href="#">Feverfew</a>
  </li>
  <li><a href="#">Ginger</a>
  </li>
  <li><a href="#">Hops</a>
  </li>
  <li><a href="#">Iris</a>
  </li>
  <li><a href="#">Juniper</a>
  </li>
  <li><a href="#">Kava kava</a>
  </li>
  <li><a href="#">Lavender</a>
  </li>
  <li><a href="#">Marjoram</a>
  </li>
  <li><a href="#">Nutmeg</a>
  </li>
  <li><a href="#">Oregano</a>
  </li>
  <li><a href="#">Pennyroyal</a>
  </li>
</ol>
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-15T15:45:15.047

要将列表输出到多个分组标签中，您可以以这种方式循环。

```
<cfset list="1,2,3,4,5,6,7,8,9,10,11,12,13,14">
<cfset numberOfColumns = "3">

<cfoutput>
<cfloop from="1" to="#numberOfColumns#" index="col">
  <ul>
  <cfloop from="#col#" to="#listLen(list)#" index="i" step="#numberOfColumns#">
    <li>#listGetAt(list,i)#</li>
  </cfloop>
  </ul>
</cfloop>
</cfoutput> 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-01-29T22:26:12.680

这是另一个允许采用以下样式的列列表的解决方案：

```
1\.      4\.      7\.       10.
2\.      5\.      8\.       11.
3\.      6\.      9\.       12. 
```

（但它是纯 javascript，需要 jQuery，没有后备）

下面包含一些修改 Array 原型的代码，以提供一个名为“chunk”的新函数，它将任何给定的 Array 分解为给定大小的块。接下来是一个名为“buildColumns”的函数，它接受一个 UL 选择器字符串和一个用于指定列可能包含多少行的数字。（[这是一个有效的 JSFiddle](http://jsfiddle.net/bradleygriffith/Nj4LW/)）

```
$(document).ready(function(){
    Array.prototype.chunk = function(chunk_size){
        var array = this,
            new_array = [],
            chunk_size = chunk_size,
            i,
            length;

        for(i = 0, length = array.length; i < length; i += chunk_size){
            new_array.push(array.slice(i, i + chunk_size));
        }
        return new_array;
    }

    function buildColumns(list, row_limit) {
        var list_items = $(list).find('li').map(function(){return this;}).get(),
        row_limit = row_limit,
        columnized_list_items = list_items.chunk(row_limit);

        $(columnized_list_items).each(function(i){
            if (i != 0){
                var item_width = $(this).outerWidth(),
                    item_height = $(this).outerHeight(),
                    top_margin = -((item_height * row_limit) + (parseInt($(this).css('margin-top')) * row_limit)),
                    left_margin = (item_width * i) + (parseInt($(this).css('margin-left')) * (i + 1));

                $(this[0]).css('margin-top', top_margin);
                $(this).css('margin-left', left_margin);
            }
        });
    }

    buildColumns('ul#some_list', 5);
}); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-07-01T18:03:17.063

由于我遇到了同样的问题并且找不到任何“干净”的东西，我以为我已经发布了我的解决方案。在这个例子中，我使用了一个反向`while`循环，所以我可以使用`splice`而不是`slice`. 现在的优势是 splice() 只需要一个索引和一个范围，其中 slice() 需要一个索引和总数。后者在循环时往往会变得困难。

缺点是我需要在追加时反转堆栈。

**例子：**

列 = 4; liCount = 35

切片 = [0, 9] 的 for 循环；[9, 18]；[18, 27]；[27, 35]

使用 splice = [27, 8] 时反转；[18, 9]；[9, 9]; [0, 9]

**代码：**

```
// @param (list): a jquery ul object
// @param (cols): amount of requested columns
function multiColumn (list, cols) {
    var children = list.children(),
        target = list.parent(),
        liCount = children.length,
        newUl = $("<ul />").addClass(list.prop("class")),
        newItems,
        avg = Math.floor(liCount / cols),
        rest = liCount % cols,
        take,
        stack = [];

    while (cols--) {
        take = rest > cols ? (avg + 1) : avg;
        liCount -= take;

        newItems = children.splice(liCount, take);
        stack.push(newUl.clone().append(newItems));
    }

    target.append(stack.reverse());
    list.remove();
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-08-27T12:29:12.600

你可以试试这个以cols转换。

CSS：

```
ul.col {
    width:50%;
    float:left;
}

div.clr {
    clear:both;
} 
```

html部分：

```
<ul class="col">
    <li>Number 1</li>
    <li>Number 2</li>

    <li>Number 19</li>
    <li>Number 20</li>
</ul>
<ul class="col">
    <li>Number 21</li>
    <li>Number 22</li>

    <li>Number 39</li>
    <li>Number 40</li>
</ul> 
```

# c# - 如何引用多版本程序集

> ID：4930
> 
> 赞同：20
> 
> 时间：2008-08-07T16:35:33.060
> 
> 标签：c#, .net, sharepoint, assemblies

我正在开发一个 Sharepoint 应用程序并使用 .NET AjaxControlToolkit 库，我们正在向 Sharepoint 添加一个自定义 aspx 页面。Sharepoint 2007 在 quirks 模式下运行，因此我对 AJAX 库进行了一些修改，使其表现得像往常一样。问题是，另一个团队已经使用了 AJAX 库，而且它与我的版本不同。这导致了冲突，因为 bin 文件夹中可能只有一个同名的 dll。

据我所知，.NET 应该能够轻松处理这种情况。我尝试使用强名称和 GAC 来解决它，但它仍然引用 bin 文件夹中的 dll。如果 bin 文件夹中没有 AjaxControlToolkit.dll，应用程序将无法加载程序集。

如果我像这样使用完整的组装信息

```
<%@ 
    Register 
    tagprefix="AjaxControlToolkit"
    namespace="AjaxControlToolkit"
    assembly="AjaxControlToolkit, Version=1.0.299.18064, 
    PublicKeyToken=12345678abcdefgh, 
    Culture=neutral"
%> 
```

它给了我编译器错误 CS0433

有人可以帮助我如何在应用程序中使用多个版本的程序集吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T14:33:33.430

[Compiler Error CS0433](http://msdn.microsoft.com/en-us/library/64wh5743%28v=vs.100%29.aspx)的链接清楚地表明，核心问题不在于引用的程序集的多个版本 - 而是名称空间 + 类型名冲突。

当您加载/引用一个类型时 - 编译器无法解析从哪个 DLL 加载该类型。如果 Sharepoint 将加载您的两个 DLL 版本（正如您所说的那样） - 这个错误总是会出现。

最简单的解决方法是更改​​新 DLL 中的命名空间，因为它确实有您的自定义调整，并且您可以控制代码 - 也清楚地标记它。

# linq-to-sql - LINQ to SQL 字符串到枚举

> ID：4939
> 
> 赞同：18
> 
> 时间：2008-08-07T16:38:51.820
> 
> 标签：linq-to-sql

LINQ to SQL 允许表映射通过指定列的类型来自动来回转换为枚举 - 这适用于字符串或整数。

有没有办法使转换不区分大小写或添加自定义映射类或扩展方法，以便我可以更详细地指定字符串的外观。

这样做的原因可能是为了在已经设置数据架构（并且被一些遗留应用程序依赖）的系统中的一些新的时髦 C# 代码中提供更好的命名约定，以便数据库中的实际文本可以'不能改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-08-07T18:23:10.923

你总是可以添加一个与你的 LinqToSql 类同名的部分类，然后定义你自己的参数和函数。然后，这些将作为对象参数和该对象的方法可以访问，就像可以访问自动生成的 LinqToSql 方法一样。

示例：您有一个名为 LinqToSql 的类`Car`，它映射到数据库中的 Car 表。然后，您可以向 App_Code 添加一个文件，其中包含以下代码：

```
public partial class Car {
  // Add properties and methods to extend the functionality of Car
} 
```

我不确定这是否完全满足您更改枚举映射到列的方式的要求。但是，您可以添加一个参数，其中 get/set 属性将用于映射您需要的枚举，同时保持不区分大小写。

# php - 如何将 Python 推销给客户/老板/个人

> ID：4942
> 
> 赞同：14
> 
> 时间：2008-08-07T16:43:21.937
> 
> 标签：php, python, ruby-on-rails, ruby

当被要求创建系统 XYZ 并且您要求使用 Python 而不是 PHP 或 Ruby 时，当它们需要您解释时，您可以提及哪些主要功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-08-07T17:04:25.810

这是真正归结为个人喜好或情境细节的案例之一。如果你对 Python 更熟悉和更有经验，那就这么说吧。他们是否因为他们更适应其他环境之一而要求您证明这一点？完成后，系统会转交给别人长期维护吗？

如果他们要求您使用您不熟悉的技术或语言，请确保他们事先知道这将花费您更长的时间。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-08-21T21:24:10.807

我见过的最畅销的 Python 是我们团队的一位经理，他有一个年幼的女儿。他引用了爱因斯坦的一句话：

> 如果你不能向一个六岁的孩子解释什么，你自己真的不明白。

接下来的几张幻灯片展示了他如何能够在不到 30 分钟的时间内教他年幼的女儿一些基本的 Python，并附有她编写的代码示例并解释了它的作用。

他以他女儿的照片和她的名言“编程很有趣！”结束了演讲。

我将专注于 Python 的用户友好性以及丰富的库和框架。还有很多其他语言可能无法获得的小库，并且必须自己编写（即[C++ 开发人员如何编写 Python](http://blog.programmerslog.com/?p=124)）。

祝你好运！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-08-18T22:10:13.077

它是 Google 的首选语言之一——就“成熟度”而言，它比 Ruby 领先几年（这意味着什么——但经理们喜欢这样）。由于它是 Google 的首选，您也可以在 Google App Engine 上运行它。

Mircosoft 也在拥抱 Python，不久将推出 IronPython v2.0。他们也在开发 Ruby 实现，但 Python 版本遥遥领先，实际上已经“准备好迎接黄金时段”。这使您可以轻松地与 .NET 代码集成，并且能够在 Silverlight 2 发布时用 Python 编写客户端 RIA。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-08-07T16:50:43.997

专注于开发/原型所需的更短时间和可能更容易维护（这些都不适用于 Ruby）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T17:30:10.453

我认为在新项目中使用 python 完全取决于你试图用 python 解决什么问题。如果您希望有人同意您应该使用 python，那么请向他们展示 python 的功能如何专门应用于该问题。

在使用 python 进行 Web 开发的情况下，讨论 WSGI 和其他你可以使用的 Web 库和框架，它们会让你的生活更轻松。python 的一个注意事项是，大多数用于 python web 开发的框架都可以直接插入到任何当前项目中。使用 ruby​​ on rails，您实际上是在使用您的项目的任何人都必须学习的 DSL 中工作。如果他们知道 python，那么他们可以在一天内弄清楚你在用 django 做什么等。

我只是在谈论 Web 开发，因为看起来这就是您将要在同一个列表中看到 ruby​​、python 和 PHP 的工作。真正重要的信息是将你喜欢的任何关于 python 的东西*直接*应用到你试图解决的问题上。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-23T19:59:12.390

在每个（不超过一个页面）中为他们提供一段代码，以执行他们喜欢的一些很酷的功能。（例如显示数据集中的异常值）。

向他们展示每一页。PHP、Ruby 和 Python 中的一种。

询问他们认为最容易理解/阅读的内容。

告诉他们这就是你想使用 Python 的原因。如果您没有编写它，它会更容易阅读，更易于管理，错误更少并且构建功能更快，因为它是最优雅的（pythonic）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T22:06:02.693

我同意mreggen。告诉他们使用 Python 工作可以更快地完成工作。更快地完成工作可能意味着客户节省了金钱。至少这意味着您正在使用一种您更熟悉的语言，这意味着更快的开发、调试和重构时间。查找关于使用什么函数来查找字符串长度等的文档将花费更少的时间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-29T15:18:37.607

尽管*所有 3 种语言都是通用的，并且被程序员在全球范围内使用*，但 Python 仍然比其他两种语言具有一些优势。就像根据我的个人经验：-

> 1.  非程序员喜欢它（他们中的大多数人选择 Python 作为他们的第一种计算机语言，在这里查看这个信息图[php vs python vs ruby](https://blog.udemy.com/wp-content/uploads/2012/01/PROGRAMMING-LANGUAGE-3.png) ​​）
> 2.  多个框架（您可以自动执行系统任务，可以为 web 和 windows/mac/android 操作系统开发应用程序）
> 3.  制作 OpenCV 应用程序比 MATLAB 更容易
> 4.  轻松完成测试（您可以使用 Selenium 进行各种 Web 测试）

现在大多数语言都遵循 OOPS 概念，那 Python 怎么能落后！Python 也紧随其后的是继承、抽象和封装。

到目前为止，Python 流行地分为两个版本，它们在性能和功能方面差别不大。**Python2.x 和 Python 3.x**都具有相同的语法，除了一些语句，如：-

1.  **Python2.x 中的**print "..."**和Python3.x 中的**print()****
***   **Python2.x 中的**raw_input()和 Python3.x 中的****input()**（*用于获取用户输入*）****

 ****归根结底，客户只关心钱，Python 比 PHP 和 Ruby 帮你省了很多钱，因为你不用雇佣有经验的程序员，你可以让新手熟练地学习和使用 Python。****

# php - 版本控制 PHP Web 项目

> ID：4949
> 
> 赞同：36
> 
> 时间：2008-08-07T16:46:32.507
> 
> 标签：php, svn, version-control, cvs

我们有一个想要进行版本控制的 PHP 项目。现在，我们三个人正在开发该项目的开发版本，该版本位于一个外部文件夹中，我们所有的 Eclipse IDE 都链接到该文件夹​​中，因此没有版本控制。

对此进行版本控制的正确方法和最佳方法是什么？

我们设置了一个 SVN，但我们只需要找到一种很好的签入和签出方法，以便我们在开发服务器上进行测试。有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-08-07T16:56:03.330

我们处于类似的情况，这就是我们最终做的事情：

*   设置两个分支——发布和开发分支。
*   对于开发分支，包括一个将存储库部署到开发服务器的提交后挂钩，以便您进行测试。
*   准备好后，将更改合并到发布分支中。我还建议在那里部署一个提交后挂钩。

您还可以在他们的工作站上为每个团队成员设置单独的开发服务器。我发现它加快了速度，尽管您确实有更多的设置时间。

我们不得不使用单一的开发服务器，因为我们使用的是专有的 CMS 并且遇到了许可问题。所以我们的提交后挂钩是一个简单的 FTP 机器人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-08-07T21:15:48.067

这是我们所做的：

*   每个开发人员都有一个配置为像我们的集成服务器一样的虚拟机
*   集成服务器为 Trunk、每个用户提供空间，并为分支提供一些插槽
*   生产服务器
*   提交提交时，挂钩位于电子邮件的 Subversion 中

在项目开始时，用户创建一个分支并在他们的个人 VM 上检查它，并获取数据库的干净副本。他们做他们的工作，边做边做。

一旦他们在自己的个人空间中完成了所有工作，他们就会登录到集成服务器并检查他们的分支，运行他们的测试等。当所有通过他们的分支时，他们就会合并到 Trunk 中。

重建主干，运行全套测试，如果一切顺利，它会获得大的批准印章，在 SVN 中标记，并在晚上结束时提升到生产。

如果在任何时候其他人进行了提交，我们会收到一封电子邮件，并且可以将这些更改合并到我们的各个分支中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-08-08T18:17:23.550

[Beanstalk](http://beanstalkapp.com)具有内置的提交后挂钩，用于部署到开发、登台和生产服务器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-07T17:04:14.220

使用 subversion 进行 PHP 开发的一种方法是为一个或所有三个开发人员设置一个存储库，并使用这个存储库，更多地作为同步工具，而不是真正的版本控制。

你可以，

*   做一个回购

*   添加项目的整个 PHP 文档结构

*   将此 repo 的副本签出到开发服务器上的正确位置

*   使用 svn 钩子，在提交时激活

每当团队中的任何人签入任何代码时，此挂钩都会自动更新开发服务器的内容。

挂钩位于：

> svn_dir/repo_name/hooks/post-commit

可能看起来像：

> /usr/bin/svn up /path_to/webroot --username svn_user --password svn_pass

这会将您在开发服务器上的工作副本更新为最新的签入。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2010-03-17T21:09:37.787

分发的东西呢？例如，您可以从 Mercurial 开始，尝试不同的工作流程，看看哪一个最适合您。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-07T16:49:36.870

你们每个人都可以在本地运行它，也可以在自己的开发服务器上运行它（甚至是同一个具有不同端口的服务器......）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-07T16:57:58.960

一种可能的方法（可能有更好的方法）：

你们每个人都应该有自己的签出版本的项目。

在您的计算机上拥有服务器的本地副本，并全天在那里对其进行测试。然后在每天（或任何时候）结束时，将准备测试的任何内容合并在一起，然后将其签出到开发服务器并进行测试。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-19T09:18:51.807

另一个可用于构建的工具是[TeamCity](http://www.jetbrains.com/teamcity/)，它可免费用于 20 种构建配置（对于大多数小型公司/项目来说足够了）。这样您就可以运行测试以及安排构建。

# regex - 什么是好的正则表达式？

> ID：4954
> 
> 赞同：11
> 
> 时间：2008-08-07T16:48:42.270
> 
> 标签：regex

我主要在访问 Oracle 数据库的 Java 桌面应用程序方面工作了 5 年，我从未使用过正则表达式。现在我进入 Stack Overflow，我看到了很多关于它们的问题；我觉得我错过了什么。

你用正则表达式做什么？

PS对不起我的英语不好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-08-07T16:51:38.847

正则表达式（或正则表达式）用于在字符串中进行模式匹配。因此，您可以从一段文本中提取所有电子邮件地址，因为它遵循特定的模式。

在某些情况下，正则表达式包含在正斜杠中，并且在第二个斜杠之后放置诸如不区分大小写之类的选项。这是一个很好的:)

```
/(bb|[^b]{2})/i 
```

口语可以读作“2 be or not 2 be”。

第一部分是（括号），它们被管道分割 | 等同于 or 语句的字符，因此 (a|b) 匹配“a”或“b”。管道区域的前半部分与“bb”匹配。后半部分的名字我不知道，但它是方括号，它们匹配任何**不是**“b”的东西，这就是为什么那里有一个屋顶符号 thingie（技术术语）。波浪形的括号匹配它们之前的事物的计数，在这种情况下，两个字符不是“b”。

在第二个 / 之后是一个“i”，这使得它不区分大小写。开始和结束斜线的使用是特定于环境的，有时你会这样做，有时你不会。

我认为您会发现这两个链接很方便

1.  [正则表达式.info](http://www.regular-expressions.info/)
2.  [维基百科 - 正则表达式](http://en.wikipedia.org/wiki/Regular_expression)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-08-07T17:02:10.353

考虑 Ruby 中的一个示例：

```
puts "Matched!" unless /\d{3}-\d{4}/.match("555-1234").nil?
puts "Didn't match!" if /\d{3}-\d{4}/.match("Not phone number").nil? 
```

"/\d{3}-\d{4}/" 是正则表达式，如您所见，它是在字符串中查找匹配项的一种非常简洁的方法。

此外，使用组可以提取信息，例如：

```
match = /([^@]*)@(.*)/.match("myaddress@domain.com")
name = match[1]
domain = match[2] 
```

在这里，正则表达式中的括号标记了一个捕获组，因此您可以准确看到您匹配的数据是什么，以便您进行进一步处理。

这只是冰山一角......您可以在正则表达式中执行许多不同的操作，从而非常轻松地处理文本。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-08-25T10:48:25.577

*有史以来*最酷的正则表达式：

```
/^1?$|^(11+?)\1+$/ 
```

它测试一个数字是否是素数。它有效！

注意：要使其工作，需要进行一些设置；我们要测试的数字必须首先转换为“<code>1”的字符串，*然后*我们可以应用该表达式来测试该字符串是否*包含*“<code>1”的素数：

```
def is_prime(n)
  str = "1" * n
  return str !~ /^1?$|^(11+?)\1+$/ 
end 
```

在[Avinash Meetoo 的博客上](http://www.noulakaz.net/weblog/2007/03/18/a-regular-expression-to-check-for-prime-numbers/)有一个详细且非常平易近人的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-08-19T00:00:48.580

如果你想学习正则表达式，我推荐[Mastering Regular Expressions](https://rads.stackoverflow.com/amzn/click/com/0596528124)。它从非常基本的概念一直到讨论不同的引擎如何在下面工作。最后 4 章还为 PHP、.Net、Perl 和 Java 提供了专门的章节。我从中学到了很多，至今仍将其作为参考。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-08-07T16:50:51.487

> 正则表达式（简称 regex 或 regexp）是用于描述搜索模式的特殊文本字符串。您可以将正则表达式视为类固醇上的通配符。您可能熟悉通配符符号，例如`*.txt`在文件管理器中查找所有文本文件。正则表达式等效项是`.*\.txt$`.

一个很好的正则表达式资源：[http ://www.regular-expressions.info](http://www.regular-expressions.info)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-08-07T17:10:14.083

如果您刚开始使用正则表达式，我衷心推荐像 The Regex Coach 这样的工具：

[http://www.weitz.de/regex-coach/](http://www.weitz.de/regex-coach/)

还听说过关于 RegexBuddy 的好消息：

[http://www.regexbuddy.com/](http://www.regexbuddy.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-18T23:54:10.340

您可能知道，Oracle 现在有正则表达式：[http](http://www.oracle.com/technology/oramag/webcolumns/2003/techarticles/rischert_regexp_pt1.html) ://www.oracle.com/technology/oramag/webcolumns/2003/techarticles/rischert_regexp_pt1.html 。我在一些查询中使用了新功能，但它并没有在其他情况下有用。我相信，原因是正则表达式最适合查找隐藏在非结构化数据中的结构化数据。

例如，我可能会使用正则表达式来查找填充在日志文件中的 Oracle 消息。不可能知道消息在哪里——只能知道它们的样子。因此，正则表达式是该问题的最佳解决方案。当您使用关系数据库时，数据通常是预先结构化的，因此正则表达式在这种情况下不会大放异彩。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-25T11:37:16.177

这些 RE 特定于 Visual Studio 和 C++，但我发现它们有时很有帮助：

查找所有出现的带有非默认参数的“routineName”：

*例程名称\(:a+\)*

相反，要查找所有出现的“routineName”，只有默认值： *routineName\(\)*

要在调试版本中查找启用（或禁用）的代码：

*\＃如果。*_调试*

请注意，这将捕获所有变体：ifdef, if defined, ifndef, if !defined

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-09-17T09:00:25.187

**验证强密码**：

这将验证长度为 5 到 10 个字母数字字符的密码，其中至少有一个大写字母、一个小写字母和一个数字：

```
^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[a-zA-Z0-9]{5,10}$ 
```

# html - 使用 CSS 在 HTML 中设置 div 的高度

> ID：4973
> 
> 赞同：39
> 
> 时间：2008-08-07T17:02:23.413
> 
> 标签：html, css

我正在尝试用两列布局一个类似表格的页面。我希望最右边的列停靠在页面的右侧，并且该列应该具有不同的背景颜色。右侧的内容几乎总是会小于左侧的内容。我希望右侧的 div 始终足够高，以达到其下方行的分隔符。我怎样才能让我的背景颜色填充那个空间？

```
.rightfloat {
  color: red;
  background-color: #BBBBBB;
  float: right;
  width: 200px;
}

.left {
  font-size: 20pt;
}

.separator {
  clear: both;
  width: 100%;
  border-top: 1px solid black;
}
```

```
<div class="separator">
  <div class="rightfloat">
    Some really short content.
  </div>
  <div class="left"> 
    Some really really really really really really
    really really really really big content
  </div>
</div>
<div class="separator">
  <div class="rightfloat">
    Some more short content.
  </div>
  <div class="left"> 
    Some really really really really really really
    really really really really big content
  </div>
</div>
```

* * *

编辑：我同意这个例子非常像表格，实际的表格将是一个不错的选择。但我的“真实”页面最终会变得不像表格，我只想先掌握这个任务！

此外，由于某种原因，当我在 IE7 中创建/编辑我的帖子时，代码会在预览视图中正确显示，但是当我实际发布消息时，格式会被删除。FWIW，在 Firefox 2 中编辑我的帖子似乎奏效了。

* * *

另一个编辑：是的，我不接受 GateKiller 的回答。它确实在我的简单页面上工作得很好，但在我实际较重的页面上却不行。我会调查一些你们都指向我的链接。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-08-07T18:24:16.803

咳咳……

> 对您的问题的简短回答是，您必须将 100% 的高度设置为 body 和 html 标记，然后在要使页面高度为 100% 的每个 div 元素上将高度设置为 100%。

实际上，在大多数设计情况下，100% 的高度是行不通的——这可能很短，但这不是一个好的答案。谷歌“任何一列最长”的布局。最好的方法是将左右列放在包装器`div`中，浮动左右列然后浮动包装器 - 这使其拉伸到内部容器的高度 - 然后在外包装上设置背景图像。但请注意浮动元素上的任何水平边距，以防出现 IE“双边距浮动错误”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-08-07T17:33:14.270

试试这个：

```
html, body,
#left, #right {
  height: 100%
}

#left {
  float: left;
  width: 25%;
}
#right {
  width: 75%;
}
```

```
<html>
  <body>
    <div id="left">
      Content
    </div>
    <div id="right">
      Content
    </div>
  </body>
</html>
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-06-23T00:09:29.417

`display: table-*`一些浏览器支持 CSS 表格，因此您可以使用各种 CSS值创建这种布局。Rachel Andrew 撰写的这篇文章（以及同名书籍）中提供了有关 CSS 表的更多信息：[关于 CSS 的所有知识都是错误的](http://www.digital-web.com/articles/everything_you_know_about_CSS_Is_wrong/)

如果您需要在不支持 CSS 表格的旧浏览器中保持一致的布局，您需要做两件事：

1.  *让您的“表格行”元素清除其内部浮动元素。*

    执行此操作的最简单方法是设置`overflow: hidden`哪个会照顾大多数浏览器，并在旧版本的 IE 中`zoom: 1`触发该属性。`hasLayout`

    还有许多其他清除浮动的方法，如果这种方法导致不良副作用，您应该检查[“clearfix”哪种方法最好](https://stackoverflow.com/a/1633170/5168)的问题以及有关其他方法[布局](http://www.satzansatz.de/cssd/onhavinglayout.html)的文章。

2.  *平衡两个“表格单元格”元素的高度。*

    有两种方法可以解决这个问题。[您可以通过在“表格行”元素（假列技术](http://www.alistapart.com/articles/fauxcolumns/)）上设置背景图像来创建等高的外观，或者您可以通过为每个列提供大的填充和同样大的负边距来使列的高度匹配。

    假列是一种更简单的方法，当一列或两列的宽度固定时效果很好。另一种技术可以更好地处理可变宽度列（基于百分比或 em 单位），但如果您直接链接到列中的内容（例如，如果包含列`<div id="foo"></div>`并且您链接到`#foo`） ，则可能会在某些浏览器中导致问题

这是一个使用填充/边距技术来平衡列高度的示例。

```
html, body {
  height: 100%;
}

.row {
  zoom: 1;          /* Clear internal floats in IE */
  overflow: hidden; /* Clear internal floats */
}

.right-column,
.left-column {
  padding-bottom: 1000em;  /* Balance the heights of the columns */
  margin-bottom: -1000em;  /*                                    */
}

.right-column {
  width: 20%;
  float: right;
}

.left-column {
  width: 79%;
  float: left;
}
```

```
<div class="row">
  <div class="right-column">Right column content</div>
  <div class="left-column">Left column content</div>
</div>
<div class="row">
  <div class="right-column">Right column content</div>
  <div class="left-column">Left column content</div>
</div>
```

Natalie Downe 的这个 Barcamp 演示在弄清楚如何添加额外的列以及良好的间距和填充时也可能很有用：[等高列和其他技巧](http://natbat.net/code/clientside/css/equalColumnsDemo/11.html)（这也是我第一次了解平衡列高度的边距/填充技巧的地方）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-06-22T23:18:16.650

我放弃了严格的 CSS 并使用了一点 jquery：

```
var leftcol = $("#leftcolumn");
var rightcol = $("#rightcolumn");
var leftcol_height = leftcol.height();
var rightcol_height = rightcol.height();

if (leftcol_height > rightcol_height)
    rightcol.height(leftcol_height);
else
    leftcol.height(rightcol_height); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-08-07T17:39:22.713

这是等高列的示例 -[等高列 - 重新访问](http://positioniseverything.net/articles/onetruelayout/equalheight)

您还可以查看“Faux Columns”的想法 - [Faux Columns](http://www.alistapart.com/articles/fauxcolumns/)

不要走餐桌路线。如果它不是表格数据，请不要这样对待它。这对可访问性和灵活性不利。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-08-07T17:07:05.413

我在我的网站上遇到了同样的问题（[无耻插件](http://woarl.com)）。

我有导航部分“浮动：右”，页面的主体有一个大约 250 像素的背景图像，向右对齐和“重复-y”。然后我添加了一些带有“clear：both”的东西。这是 W3Schools 和[CSS clear 属性](http://www.w3schools.com/Css/pr_class_clear.asp)。

我将清除放置在“页面”分类 div 的底部。我的页面源看起来像这样。

```
body
 -> header (big blue banner)
 -> headerNav (green bar at the top)
 -> breadcrumbs (invisible at the moment)
 -> page
     -> navigation (floats to the right)
     -> content (main content)
         -> clear (the quote at the bottom)
         -> footerNav (the green bar at the bottom)
     -> clear (empty but still does something)
 -> footer (blue thing at the bottom) 
```

我希望这会有所帮助:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-23T10:01:07.400

不用自己写css，有一个叫“Bootstrap css”的库，在你的HTML head部分调用它，我们可以实现多种样式，这里有一个例子：如果你想连续提供两列，你可以简单请执行下列操作：

```
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<div class="row">
  <div class="col-md-6">Content</div>
  <div class="col-md-6">Content</div>
</div>
```

这里 md 代表中型设备，您可以将 col-sm-6 用于小型设备，将 col-xs-6 用于超小型设备

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-08-07T17:13:35.260

只是想在这里提供帮助，以便代码更具可读性。
请记住，您可以通过单击顶部带有“101010”的按钮来插入代码片段。只需输入您的代码，然后突出显示它并单击按钮。

这是一个例子：

```
<html>
    <body>
    <style type="text/css">
        .rightfloat {
            color: red;
            background-color: #BBBBBB;
            float: right;
            width: 200px;
        }

        .left {
            font-size: 20pt;
        }

        .separator {
            clear: both;
            width: 100%;
            border-top: 1px solid black;
        }
    </style> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-08-07T17:47:58.810

对您的问题的简短回答是，您必须将 100% 的高度设置为 body 和 html 标记，然后在要使页面高度为 100% 的每个 div 元素上将高度设置为 100%。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-08-07T18:21:51.207

在 CSS 中使用 2 列布局有点困难（至少在 CSS3 实用之前）。

左右浮动将起作用，但它不允许您扩展背景。为了使背景保持实心，您必须实施一种称为“仿列”的技术，这基本上意味着您的列本身不会有背景图像。您的 2 列将包含在父标记内。这个父标签有一个背景图像，其中包含您想要的 2 列颜色。将此背景设置为您需要的大小（如果它是纯色，则只设置 1 个像素高）并让它重复-y。AListApart 对使其工作所需的内容进行了很好的演练。

[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-08-08T03:35:30.997

我能想到2个选项

1.  使用 javascript 在页面加载时调整较小列的大小。
2.  `background-color`通过在容器上设置列`<div/>`而不是（`<div class="separator"/>`）来伪造相等的高度`repeat-y`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-24T14:48:12.930

只需使用 css 属性`width`就足够了。

这是一个例子：

```
<style type="text/css">;
    td {
        width:25%;
        height:100%;
        float:left;
    }
</style> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-08-29T07:55:46.537

`html`这应该对你有用：在你的 CSS 中为and`body`元素设置高度为 100% 。然后，您可以在`div`.

```
html {
    height: 100%;
}

body {
    height: 100%;
}
div {
    height: 100%; /* Set Div Height */
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-06-02T14:46:57.467

```
.rightfloat {
  color: red;
  background-color: #BBBBBB;
  float: right;
  width: 200px;
}

.left {
  font-size: 20pt;
}

.separator {
  clear: both;
  width: 100%;
  border-top: 1px solid black;
}
```

```
<div class="separator">
  <div class="rightfloat">
    Some really short content.
  </div>
  <div class="left"> 
    Some really really really really really really
    really really really really big content
  </div>
</div>
<div class="separator">
  <div class="rightfloat">
    Some more short content.
  </div>
  <div class="left"> 
    Some really really really really really really
    really really really really big content
  </div>
</div>
```

# sql - 我应该如何组织我的主 ddl 脚本

> ID：4994
> 
> 赞同：14
> 
> 时间：2008-08-07T17:18:37.170
> 
> 标签：sql, sql-server, schema, ddl

我目前正在为我们的数据库创建一个主 ddl。从历史上看，我们使用备份/恢复来对我们的数据库进行版本控制，并且没有维护任何 ddl 脚本。架构非常大。

我目前的想法：

*   将脚本分成几部分（可能在单独的脚本中）：

    1.  表创建
    2.  添加索引
    3.  添加触发器
    4.  添加约束
*   每个脚本都会被主脚本调用。

*   我可能需要一个脚本来临时删除约束以进行测试
*   架构中可能存在孤立表，我计划识别可疑表。

还有什么建议吗？

编辑：另外，如果有人知道自动化部分过程的好工具，我们正在使用 MS SQL 2000（旧的，我知道）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-11T17:13:21.030

我认为基本的想法是好的。

首先构建所有表然后构建所有约束的好处是可以按任何顺序创建表。完成此操作后，每个表都有一个文件，我将其放入名为“Tables”的目录中，然后是执行该目录中所有文件的脚本。同样，我有一个用于约束脚本的文件夹（其中也包含外键和索引），这些脚本在构建表后执行。

我会将触发器和存储过程的构建分开，然后最后运行它们。关于这些的要点是它们可以在数据库上运行和重新运行而不会影响数据。这意味着您可以像对待普通代码一样对待它们。您应该在每个触发器和过程脚本的开头包含“if exists...drop”语句，以使它们可重新运行。

所以顺序是

1.  表创建
2.  添加索引
3.  添加约束

然后

4.  添加触发器
5.  添加存储过程

在我当前的项目中，我们使用 MSBuild 来运行脚本。您可以获得一些[扩展目标，允许您调用 sql 脚本。](http://www.codeplex.com/sdctasks)过去我使用过 perl，这也很好（还有批处理文件……我不推荐 - 太有限了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-08-07T17:24:49.280

你那里的东西似乎很不错。对于足够大的数据库，我的公司有时会将其进一步细分，可能会细分到单个对象级别。这样每个表/索引/...都有自己的文件。可能有用，也可能矫枉过正。真的取决于你如何使用它。

@贾斯汀

按领域通常就足够了。我同意这样做有一些复杂性需要处理，但这应该很容易处理。

我认为这种方法提供了更多的分离（在大型数据库中你会喜欢它），同时仍然使自己非常易于管理。我们还编写了对这些 DDL 文件进行大量处理的 Perl 脚本，因此这可能是一种很好的处理方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-08-29T06:50:55.410

there is a neat tools that will iterate through the entire sql server and extract all the table, view, stored proceedures and UDF defintions to the local file system as SQL scripts (Text Files). I have used this with 2005 and 2008, not sure how it wil work with 2000 though. Check out [http://www.antipodeansoftware.com/Home/Products](http://www.antipodeansoftware.com/Home/Products)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T19:48:30.367

如果您正在寻找自动化工具，我经常使用 EMS SQLManager，它允许您从数据库自动生成 ddl 脚本。

在将数据库上线之前，可能必须在引用表中插入数据。这甚至可以被视为 ddl 脚本的一部分。EMS 还可以为现有数据库中的数据插入生成脚本。

在 ddl 阶段可能无法正确估计对索引的需求。您只需要为主键/外键声明它们。定义视图和查询后，应稍后创建其他索引

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-08-07T17:25:28.590

花时间编写一个通用的“删除所有约束”脚本，这样您就不必维护它。

将光标悬停在以下语句上就可以了。

```
Select * From Information_Schema.Table_Constraints 

Select * From Information_Schema.Referential_Constraints 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-08-07T17:31:00.953

@亚当

或者仅按域如何——在同一个文件中对相关表进行有用的分组，但与其他表分开？

唯一的问题是某些域（在这个有些遗留系统中）是否紧密耦合。另外，您必须维护不同子脚本之间的依赖关系。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-08-19T06:19:37.910

我之前将我的 DDL 代码组织为每个实体一个文件，并制作了一个将其组合成单个 DDL 脚本的工具。

我的前雇主使用了一种方案，其中所有表 DDL 都在一个文件中（以 oracle 语法存储），索引在另一个文件中，约束在第三个文件中，静态数据在第四个文件中。更改脚本与此并行保存（同样在 Oracle 中）。到 SQL 的转换是手动的。这是一团糟。实际上，我编写了一个方便的工具，可以将 Oracle DDL 转换为 SQL Server（它在 99.9% 的时间里都能正常工作）。

我最近转而使用[Visual Studio Team System for Database Professional](http://msdn.microsoft.com/en-us/vsts2008/db/default.aspx)。到目前为止它工作正常，但是如果您在数据库中使用 CLR 函数，则会出现一些故障。

# websphere - 此错误是什么意思 WebSphere Application Server 5.1 中的 SECJ0222E

> ID：4995
> 
> 赞同：5
> 
> 时间：2008-08-07T17:18:56.983
> 
> 标签：websphere, jaas

我在[IBM 支持网站](http://www-1.ibm.com/support/docview.wss?rs=404&uid=swg1PK06349)上找到了这个：

> **问题**由于意外异常，无法创建 JAAS LoginContext。
> **用户响应**问题可能是由于配置错误。

但我没有其他迹象，也无法确定此错误的最终原因。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-08-07T17:21:03.903

您是否从 [http://www-1.ibm.com/support/docview.wss?rs=404&uid=swg1PK17150](http://www-1.ibm.com/support/docview.wss?rs=404&uid=swg1PK17150)获得了修复？