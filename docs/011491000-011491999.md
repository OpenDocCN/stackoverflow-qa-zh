# StackOverflow 问答 11491000-11491999

# c# - 如何在 curl 中调用 wcf 服务？

> ID：11491000
> 
> 赞同：1
> 
> 时间：2012-07-15T09:56:02.693
> 
> 标签：c#, linux, wcf, curl

如何使用命令行工具 curl 调用 wcf 服务/服务器处于活动状态？我的绑定服务 wshttpBinding。我在 IIS 7 中的服务主机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:56:47.617

这取决于您对“服务器还活着”的定义。如果您只想知道服务是否在响应*任何*请求，您可以向服务基地址 ( `curl http://your.host.com/app/service.svc`) 发送请求，然后您应该会返回服务帮助页面（只需浏览到它，您就会看到您的内容）会回来的）。

如果要检查服务的某个操作是否正常工作，则取决于您的绑定配置：

如果您的 wsHttpBinding 配置不使用消息安全或可靠会话，那么您可以使用诸如 Fiddler 之类的东西来捕获“普通”客户端（例如 WCF 测试客户端）的请求，然后使用 curl 发送相同的要求。

如果绑定使用这样的功能，那么 curl 不是最好的方法，因为客户端需要在发送操作的实际请求之前发送一些请求（用于安全性或 RM 协议的握手）。

# apache - 额外的尾部斜杠 mod-rewrite

> ID：11491006
> 
> 赞同：0
> 
> 时间：2012-07-15T09:57:21.240
> 
> 标签：apache, mod-rewrite

我遇到了一个额外的斜杠问题，该斜杠将我的网站从

[http://www.example.com/index](http://www.example.com/index)到[http://www.example.com//index](http://www.example.com//index)

这是我的 .htaccess 内容

```
DirectoryIndex index.php

    重写引擎开启
    RewriteBase /
    # 将规则应用于所有网页，例如 html、php、htm
    # RewriteRule !\.(swf|zip|tar|tar|pdf|doc|txt|js|ico|gif|jpg|png|css|php)$ index.php [NC,L]
    RewriteRule captcha.jpg com/actions/image.php
    RewriteRule !(\.) index.php [NC,L]

#拒绝访问 .ht* 文件

  命令允许，拒绝
  否认一切

#拒绝访问任何 *.ini 文件

  命令允许，拒绝
  否认一切

#拒绝访问任何 *.log 文件

  命令允许，拒绝
  否认一切

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:31:42.127

摆脱

```
RewriteBase / 
```

默认情况下，目录中的 .htaccess 文件的基本路径为 / ，因此通过添加另一个正斜杠，您的整体重写基础将是 //

# c# - WPF 和屏幕分辨率

> ID：11491010
> 
> 赞同：1
> 
> 时间：2012-07-15T09:57:52.600
> 
> 标签：c#, wpf

我正在 C#.net 中开发 WPF 应用程序。我有一个关于窗口调整的问题。在某些屏幕分辨率中，我的主窗口还可以，但在宽屏显示器和其他一些屏幕分辨率窗口中，其中的控件很杂乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:19:34.103

嗨，最简单的方法之一是不设置窗口的宽度和高度，并将属性 SizeToContent=WidthAndHeight 设置为

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" SizeToContent="WidthAndHeight">
<Grid Height="226">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>            
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions> 
```

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:24:31.807

如果您硬编码`Height`和`Width`或，仅使用对齐元素，`margins`您将遇到不同分辨率的缩放问题。您需要一个巧妙的网格布局，您只需将 Row 和 Columns 分配给控件并设置它们的`Horizontal`和`Vertical Alignments`. 因此，即使网格调整大小，元素的相对排列也不会改变，布局将保持一致。如果您没有在应用程序中利用更高的分辨率（例如显示更多项目），您可以考虑`Canvas`在一个`ViewBox`基本上可以缩放以适合所有内容的内部使用。

# python - 流水线化两个 python 程序

> ID：11491016
> 
> 赞同：-1
> 
> 时间：2012-07-15T09:58:39.430
> 
> 标签：python, subprocess, pipe

我知道在这里发布了类似的问题，但我的代码无法正常工作。我想将一个 python 程序输出通过管道传输到其他程序的输入。等待输入的是 raw_input('>')

我试图运行的代码是：

```
import subprocess
gen = subprocess.Popen(['python', 'first.py'], stdout=subprocess.PIPE, stderr=subprocess.PIPE)
start = subprocess.Popen(['python','second.py'], stdin=gen.stdout, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
start.communicate() 
```

第一.py：

```
try:
    while(1):
        print gen()
        time.sleep(1)
except KeyboardInterrupt:
    sys.exit(1) 
```

输出不产生任何东西

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:17:53.533

你完整的 second.py 是什么样的？即使它应该与 raw_input() 一起使用，您是否尝试过从 sys.stdin 读取？您显示的代码片段看起来不错，因为它对我有用。

另一个可能的问题是，随着程序继续执行，您的 first.py 永远不会完成。除非第一个子进程命令完成，否则不会执行第二个子进程命令。所以试试你的 first.py 没有无限循环。让它停下来，然后尝试，也许你的管道会起作用。

# node.js - 外来翡翠

> ID：11491017
> 
> 赞同：0
> 
> 时间：2012-07-15T09:58:39.633
> 
> 标签：node.js, pug

我想解析来自数据库的 Jade。就像博客文章中的那样，身体在翡翠中。现在我可以使用 Jade 解析 HTML：

```
!= post.body 
```

它适用于 HTML，但不适用于 Jade。有没有办法从外部来源解析 Jade？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:11:36.157

如果您尝试将文本字符串编译为 Jade 模板（从数据库发布正文）：

```
// node.js
// https://github.com/visionmedia/jade/#a5
var jade = require('jade');
var template = 'h1 Hi';
var options = {};

var htmlFunc = jade.compile(template, options);
var locals = {};
var html = htmlFunc(locals);

// now you can pass `html` to your blog post layout. 
```

* * *

您可以在模板中编译 Jade 字符串。这很奇怪，但无论如何：

```
h1!= require('jade').compile('span Hi')(); 
```

# scala - 在 Squeryl 的 where "clause" 中出现错误 "java.util.Date does not take parameters"

> ID：11491018
> 
> 赞同：2
> 
> 时间：2012-07-15T09:58:45.063
> 
> 标签：scala, squeryl

我对 Scala 相当陌生，目前对我们的 MySQL 数据库使用一个名为 Squeryl 的 ORM。

我要做的是查找属于某个时间范围的复数记录。例如，在纯 SQL 中，我认为它会是这样的：

```
 SELECT * FROM records WHERE updated_at >= ? AND updated_at < ? 
```

但是，我的 Scala 代码实现了如下类似的行为，在“from(records)”中的左括号处给了我一个错误，说“java.util.Date 不接受参数”

```
 def getRecordsBetween(from:java.util.Date, til:java.util.Date):List[Record]
      transaction {
        from(records)(record =>
          where(
            record.updatedAt gte from and
            record.updatedAt lt til
          )
          select(record)
        ).toList
      }
    } 
```

（其中 val 记录 = tableRecord

我在这里做错了什么？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:39:05.803

方法参数和方法在 Scala 中位于同一个命名空间中，因此您的`from`方法参数正在“隐藏”您带入作用域的（或）对象`from`上的方法，如下所示：[`PrimitiveTypeMode`](http://squeryl.org/api/org/squeryl/PrimitiveTypeMode%24.html)`CustomTypeMode`

```
import org.squeryl.PrimitiveTypeMode._ 
```

只需将参数名称更改为`fromDate`or`start`或其他任何内容，就可以了。

# web - 带有静态检查的 Web 框架

> ID：11491019
> 
> 赞同：2
> 
> 时间：2012-07-15T09:58:50.333
> 
> 标签：web, type-systems

市场上可用的大多数 Web 框架都允许许多动态功能：

*   您可以使用无类型的（通常是字符串键）访问会话元素和请求参数
*   您使用字符串文字引用其他页面，即“post.html?id=%s”
*   您在字符串文字内创建数据库查询
*   大多数 Web 框架严重依赖反射来查找控制器操作等内容

是否有任何 Web 框架支持对这些东西进行静态检查？为什么这还没有在任何框架中实现？

PS IMO，这应该是可能的。我们以静态可检查（按语言类型系统）的方式创建桌面 GUI 应用程序，为什么我们不能对 Web 应用程序做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:38:23.437

唯一具有此类功能的现有框架是 Yesod：[http](http://www.yesodweb.com/) ://www.yesodweb.com/ 它几乎可以静态检查所有内容。

# android - Eclipse Juno 上没有 Android 项目选项

> ID：11491027
> 
> 赞同：0
> 
> 时间：2012-07-15T10:00:17.830
> 
> 标签：android, eclipse, adt

好的，与此处相同的问题：[我的“Eclipse Juno 4.1”首选项中缺少“Android”](https://stackoverflow.com/questions/7928769/android-missing-in-my-eclipse-juno-4-1-preferences)

但就我而言，我已经安装了 ADT（我想？）![已安装 ADT](../Images/84dc2f6a327be9240700ec12eb52ff28.png)

但是，当我去偏好或开始一个新项目时，没有与 android 相关的选项，我可能做错了什么？

![喜好](../Images/79d37f21e7cd2494245c3b1cda7237a1.png)

![新建项目窗口](../Images/e2b0ea75fa52488354ef2aa37df7f567.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:48:15.643

只需在 Eclipse 中卸载 Android 软件包，然后重新安装它们，这可能是因为 Eclipse 软件包在`Android SDK`下载和安装的同时或之前安装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:35:13.627

你在Eclipse中安装插件之前安装了android sdk吗？

是我昨天做的，它有效。先安装de sdk，然后在eclipse中安装插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:58:04.050

谢谢，非常有帮助:-)。我尝试了很多东西……我使用 Classic 版本而不是 JavaEE，尝试 Indigo 而不是 Juno……设置不同的 JDK……但在我的情况下，最终下载 64 位版本的 Eclipse 完成了诡计！所以也许JDK和Eclipse必须以某种方式兼容......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:16:54.897

经过一番苦恼后，我在菜单栏中的*File* -> *New* -> *Other* -> *Android*下找到了它。现在要弄清楚如何直接在“*新建”*菜单下获取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T11:38:28.927

好吧，我让它工作了，尽管我不太确定是哪一个成功了，但我所做的就是将所有内容都更改为 32 位版本（我使用的是 64 位版本）。这包括卸载 JDK 和 eclipse 并重新安装它们的 32 位版本（当然，重新启动计算机，即使我之前这样做过）。它现在可以工作，但我不确定是重新安装 JDK 还是切换到 32 位版本才能解决问题。

# ruby-on-rails - 在 rvm 环境中监视 rails 脚本

> ID：11491030
> 
> 赞同：2
> 
> 时间：2012-07-15T10:00:46.490
> 
> 标签：ruby-on-rails, rvm, monit

我在 Rails 中使用了一些需要作为守护进程（crom，apn_sender）启动的 gem，并在用户模式下使用 RVM 用于 ruby​​ 环境。

启动和监视 Thin 似乎很容易，因为可以为 Thin 创建 rvm 包装器。

但是如何启动脚本呢？

用手，我会点以下：

1.  su 到 ruby​​user
2.  切换宝石组
3.  通过 /railsdir/script/crom start 启动脚本

但我不知道如何用 monit 做到这一点。

有没有办法为脚本或其他东西创建包装器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T22:51:06.180

对 ruby​​ 使用包装器，当脚本在没有 ruby​​ 的情况下执行时，它会找到一个 ruby​​ 来运行它，当以 ruby​​ 为前缀时 - 无论其中的 shebang 行如何，它都会使用该 ruby​​：

```
/path/to/rvm/bin/ruby-1.9.3-p194 /railsdir/script/crom start 
```

# python - 截断 SciPy 随机分布

> ID：11491032
> 
> 赞同：5
> 
> 时间：2012-07-15T10:01:04.743
> 
> 标签：python, random, statistics, scipy

有没有人有关于有效截断 SciPy 随机分布的建议。例如，如果我像这样生成随机值：

```
import scipy.stats as stats
print stats.logistic.rvs(loc=0, scale=1, size=1000) 
```

我将如何在不改变分布的原始参数和不改变样本大小的情况下将输出值限制在 0 和 1 之间，同时最大限度地减少机器必须做的工作量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T14:04:33.633

您的问题更像是一个统计问题，而不是一个 scipy 问题。通常，您需要能够对您感兴趣的区间进行归一化，并通过分析计算该区间的 CDF 以创建有效的采样方法。**编辑：**事实证明这是可能的（不需要拒绝采样）：

```
import scipy.stats as stats

import matplotlib.pyplot as plt
import numpy as np
import numpy.random as rnd

#plot the original distribution
xrng=np.arange(-10,10,.1)
yrng=stats.logistic.pdf(xrng)
plt.plot(xrng,yrng)

#plot the truncated distribution
nrm=stats.logistic.cdf(1)-stats.logistic.cdf(0)
xrng=np.arange(0,1,.01)
yrng=stats.logistic.pdf(xrng)/nrm
plt.plot(xrng,yrng)

#sample using the inverse cdf
yr=rnd.rand(100000)*(nrm)+stats.logistic.cdf(0)
xr=stats.logistic.ppf(yr)
plt.hist(xr,density=True)

plt.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:29:29.200

你想达到什么目的？[根据定义，逻辑分布](http://en.wikipedia.org/wiki/Logistic_distribution)具有无限范围。如果您以任何方式截断结果，它们的分布将会改变。如果你只想在范围内随机数，有[`random.random()`](http://docs.python.org/library/random.html?highlight=random#random.random).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T10:56:33.863

您可以将结果标准化为最大返回值：

```
>>> dist = stats.logistic.rvs(loc=0, scale=1, size=1000)
>>> norm_dist = dist / np.max(dist) 
```

这将保持“形状”相同，以及 和 之间的`0`值`1`。但是，如果您要从分布中重复抽取，请确保将所有抽取标准化为相同的值（所有抽取的最大值）。

但是，如果你在你想要达到的目标的范围内做这种有意义的事情，你要非常小心（我没有足够的信息来评论......）

# android - 带有位图的列表视图中的内存问题

> ID：11491033
> 
> 赞同：0
> 
> 时间：2012-07-15T10:01:33.503
> 
> 标签：android, memory

在低内存设备中处理带有位图的非常长的列表视图的最佳方法是什么？滚动一点后我崩溃了...我不想降低图像质量...我正在考虑仅加载可用内存可能的项目数量，但这显然是一个糟糕的解决方案. 我是否必须根据位置在 getView() 中手动回收位图...？这是处理这个问题的方法吗？

我的目标是 API 7。

提前致谢。

PS 位图是使用 HTTP 从远程服务器加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:36:51.157

你有没有在`getView()`方法中回收你的观点？如果没有，请执行以下操作：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

    if(mInflater == null){
    mInflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    View viewItem = convertView;
    if(viewItem == null)
        viewItem = mInflater.inflate("YOUR_LAYOUT", null);

//Continue with your code but use viewItem as the view of the list view line, that way you don't always create new instance of it. This is what helped me in the same problem. 
```

**编辑**：检查下一篇文章，也许它可以帮助你。

[如何在 ListView 中延迟加载图像](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)

[多线程性能](http://android-developers.blogspot.co.il/2010/07/multithreading-for-performance.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:06:10.083

直接`Bitmap`从`SD Card`. 不要将其保存`memory`在某种`bitmap cache`.

# context-free-grammar - 如何给出这个上下文语法

> ID：11491039
> 
> 赞同：-2
> 
> 时间：2012-07-15T10:02:15.760
> 
> 标签：context-free-grammar

如何为 L={w∈{a,b,c}*|w has more as than bs} 创建上下文无关文法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:10:13.690

首先，您可以通过以下推自动机形式思考它来说服自己这是可能的。非正式地：读取磁带时，将任何“a”推入堆栈，但在读取“b”时弹出堆栈。磁带读取完成后，如果堆栈有“a”，则接受。否则拒绝。

CFG：基本上，你需要限制你的语法，这样每当一个“b”被创建时，至少有一个“a”也在混合中。

提示：

1.  暂时忽略“c”
2.  写下有效语言可以开始和结束的方式（基本上是两个字符组合）并尝试从那里进行概括。

# html - 弹出选项时选择元素和滚动条

> ID：11491040
> 
> 赞同：-1
> 
> 时间：2012-07-15T10:02:51.313
> 
> 标签：html, css

我有一个`select`超过 50`option`秒的。现在，当我单击时`select`，选项将弹出并离开页面而没有任何滚动条。

所以我无法选择和查看超过 20 个选项。如果s 超过 15 或 20 个项目 ，
如何强制`select`元素具有垂直滚动条？`option`

我不想使用`size=?`，因为它垂直扩展了我的选择框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:28:40.667

检查选择框是否正确创建`<select></select>`并且每个选项的构造都像

```
<option value="value">option name</option> 
```

在选择框中。

# actionscript-3 - 键盘监听器正在杀死我的帧率

> ID：11491042
> 
> 赞同：1
> 
> 时间：2012-07-15T10:02:56.057
> 
> 标签：actionscript-3, flash-builder

我正在开发一个使用四个同时按键的游戏。一切都很好，除了当快速按下键时，我的帧速率会显着减慢（如果我只敲击一个键，我可以将帧速率减半）。

我最初只是假设按键触发的方法中发生了太多事情，但是如果我将代码完全从方法中取出，仍然会出现减速。

有没有人遇到过这个？按键是您按住键的地方，因此它每帧都会重复触发一个方法调用，但这对于许多用途来说是相当标准的，我以前从未遇到过这种情况。

**编辑**：澄清。从结构上讲，舞台上附加了一个 KEY_DOWN 和 KEY_UP 侦听器：

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, menuKeyDown);
stage.addEventListener(KeyboardEvent.KEY_UP, menuKeyUp); 
```

然后调用一个带有单个 switch 语句的方法，其中包含如下五行：

```
case ONE: pressing1 = true; break; 
```

有一个 ENTER_FRAME 事件检查是否有任何布尔标志为真，并处理角色移动。无论按键如何，都会发生此计算（即，如果您松开按键，重力仍然会产生影响）。这很容易保持60fps。

问题实际上是在按下或释放键的那一刻，几乎无法察觉的丢帧。反复按键会导致丢帧越来越严重。按住一个键不会杀死帧速率，除了按下该键时的单个瞬间丢帧。之后比赛照常进行。放开键会导致另一个小故障，然后帧率恢复正常。

**编辑 2** - 我添加了一个帧率检查器，这样我就可以准确地看到帧率发生了什么。有趣的是，即使我非常快速地按键，我也不能让它低于 30fps。Flash Player 是否有某种限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:26:28.603

事实证明，代码一直都是正确的。在调试播放器或独立播放器中播放 60FPS 内容会导致任何事件（鼠标和键盘）影响帧率。在浏览器中查看相同的内容，或导出到 AIR，可以完全解决问题。内容现在以 60fps 的速度完美运行，没有任何减速。

希望这对某人有帮助，我把头发扯掉了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:54:35.760

您是否有多个不同的侦听器，或者一个侦听器可以适当地路由按键？我会怀疑前者。解决方案是切换到后者。

我通常做的是有一个对象负责监听按键并将键盘事件转换为其他更有意义的事件。

例如：

```
protected function handleKeyboardEvent(e:KeyboardEvent):void {
   if (e.ctrlKey) {
      switch (e.keyCode) {
         case Keyboard.A:
            eventBus.dispatchEvent(new Event(ViewEventKind.SELECT_ALL));
            return;
         case Keyboard.Y:
            eventBus.dispatchEvent(new Event(ModelEventKind.REDO));
            return;
         case Keyboard.Z:
            eventBus.dispatchEvent(new Event(ModelEventKind.UNDO));
            return;
      }
   }
} 
```

# blackberry - eclipse的黑莓插件？

> ID：11491049
> 
> 赞同：1
> 
> 时间：2012-07-15T10:04:41.537
> 
> 标签：blackberry, blackberry-eclipse-plugin

当我正在开发一个需要在其中集成 BBM 的应用程序时。按照以下 [集成 BBM](http://us.blackberry.com/sites/developers/blackberry-messenger.html)的说明，我按照步骤下载[BB Plugin for Eclipse](https://developer.blackberry.com/java/download/eclipse)。默认情况下，我下载了带有 Eclipse 的 BB 7.1 SDK。现在我想为那个 Eclipse 安装 BB 5.0 和 BB 6.0。

根据我从互联网上获得的详细信息，我按照以下步骤安装这些 SDK 在 Eclipse
帮助中 --> 安装新软件 --> 在添加存储库中，我将名称和位置指定为

```
 Name --> Blackberry plugin
  Location --> http://www.blackberry.com/go/eclipseUpdate/3.6/java 
```

但在这里我得到**“找不到[http://www.blackberry.com/go/eclipseUpdate/3.6/java](http://www.blackberry.com/go/eclipseUpdate/3.6/java) ”**。

那么，任何人都可以帮助我解决如何将 5.0 和 6.0 安装到 Eclipse，因为我从上面的 BB Plugin for Eclipse url 下载了......

提前致谢......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T10:12:24.067

请改用此位置。我正在使用 Eclipse 3.6.1，它对我有用。

`http://www.blackberry.com/developers/jar/win/java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T16:11:25.213

> **使用 Eclipse 安装 BlackBerry Java Plug-in。**

1.  选择`Help`> `Install New Software`。
2.  单击`Add`。
3.  对于`Name`，键入**BlackBerry Java Plug-in Update Site**。
4.  对于`Location`，键入**[http://www.blackberry.com/go/eclipseUpdate/mac/java](http://www.blackberry.com/go/eclipseUpdate/mac/java)**。

> Mac： http: **[//www.blackberry.com/go/eclipseUpdate/mac/java](http://www.blackberry.com/go/eclipseUpdate/mac/java)**
> 
> 视窗： http: **[//www.blackberry.com/developers/jar/win/java](http://www.blackberry.com/developers/jar/win/java)**

1.  单击`OK`。
2.  选择`BlackBerry Java Plug-in`至少一个 BlackBerry SDK。选择与您的目标市场兼容的 BlackBerry SDK 版本。
3.  单击`Next`。
4.  查看正在安装的项目，然后单击`Next`。
5.  查看许可协议，然后检查`I accept the terms of the license agreement`您是否同意。
6.  点击`Finish`开始安装。
7.  插件更新后，系统会提示您重新启动 Eclipse。

# android - 创建新 AVD 时，新 ADT 中的设备选择器在哪里？

> ID：11491053
> 
> 赞同：0
> 
> 时间：2012-07-15T10:05:12.670
> 
> 标签：android, adt, googleio

我刚刚观看了[Google I/O 2012 - What's New in Android Developers' Tools](http://www.youtube.com/watch?v=Erd2k6EKxCQ&feature=player_detailpage#t=347s)视频（链接应该指向我正在谈论的内容，大约在第 6 分钟），我想知道为什么我找不到设备选择器在*AVD Manager*中创建一个新的*Android 虚拟设备*......它还没有实现吗？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T16:34:20.253

不，从 ADT 20.0.1 开始，这还没有发布。

在这个问题的另一个答案中，目标和设备被混淆了。您可以安装其他目标，但在创建新模拟器时仍需要手动配置设备特定属性。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-15T10:29:03.783

是的，它已实现： ![Android SDK 管理器](../Images/9d879dd4e19907a5650d83809274c5d4.png)

您可以安装设备模板，例如 Droid4（模板很多，您也可以在供应商的网站上找到一些）*

# android - 更新了 Jelly Bean Android 堆栈？

> ID：11491055
> 
> 赞同：0
> 
> 时间：2012-07-15T10:05:23.607
> 
> 标签：android, linux, api

Android Stack 是否在 Jelly Bean 4.1 中看到了任何显着的更新？我指的是组件和库的堆栈，如下图所示： ![在此处输入图像描述](../Images/92d10121019a51899b6e35f38d88a9fd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:51:26.750

我参加了 Google I/O，至少在我参加的会议上，他们没有展示任何新东西。核心技术是一样的——他们只是在内核和系统中引入了一些新特性，比如三重缓冲。

您在帖子中放置的可视化是抽象和通用的，足以正确；）

# java - 如何减去两次写为 hh:mm 并在文本视图中显示结果

> ID：11491058
> 
> 赞同：1
> 
> 时间：2012-07-15T10:05:26.710
> 
> 标签：java, android, datetime, format

我是 java/android 的初学者，但我正在尝试制作一个应用程序。用户必须输入像 13:45 这样的时间，然后应用程序应该 substrat ex。从那时起 00:30 分钟。结果是 13:15。我尝试了很多不同的东西，但它不会工作。

我有这样的东西。（在这个阶段我已经硬编码了两次）

```
 String time1 = "00:30";
    String time2 = "13:45";

SimpleDateFormat format = new SimpleDateFormat("HH:mm");
Date date1 = format.parse(time1);
Date date2 = format.parse(time2);
long result= date2.getTime() - date1.getTime(); 

String strLong = Long.toString(result);

textView4.setText(strLong); 
```

我在 format.parse(time1) 和 format.parse(time2) 中遇到错误。这是正确的方法吗？有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:31:03.133

使用`Calendar`类型。

```
SimpleDateFormat format = new SimpleDateFormat("HH:mm");
Date date2 = format.parse(time2);

Calendar cal=Calendar.getInstance();
cal.setTime(date2);
cal.add(Calendar.MINUTE, -30); //Subtract 30 Min

String strLong= format.format(cal.getTime());
textView4.setText(strLong); 
```

# css - 将 DIV 定位到居中容器的侧面

> ID：11491060
> 
> 赞同：0
> 
> 时间：2012-07-15T10:05:55.667
> 
> 标签：css, positioning, css-position

我的页面内容有一个主容器 DIV，它是水平居中的：

HTML：

```
<div id="master_container">
  .. my content here ...
</div> 
```

CSS：

```
#master_container {width: 960px; margin: 0 auto;} 
```

客户希望在 master_container 之外的页面两侧都有广告。我尝试了各种 CSS 来尝试定位这些 div，但是当调整窗口大小时，它们与 master_container 重叠。另外，我被要求在页面滚动时让它们浮动。

谁能指导我找到正确的解决方案？提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:19:42.373

那个怎么样：

演示：http: [//jsfiddle.net/insertusernamehere/Ct5BM/](http://jsfiddle.net/insertusernamehere/Ct5BM/)

### HTML

```
<div id="master_container">
    <div class="ad left">Advertising</div>
    <div class="ad right">Advertising</div>
    The real content …
</div> 
```

### CSS

```
<style>

    body {
        width:      100%;

    }

    #master_container {
        position:   relative;
        width:      960px;
        height:     500px;
        margin:     0 auto;
        border:     1px solid red;
    }

    div.ad {
        position:   absolute;
        top:        0px;
        width:      200px;
        height:     400px;
        margin:     0px 0px 0px 0px;
        border:     1px solid blue;
    }

    div.ad.left {
        left:       -220px;
    }

    div.ad.right {
        right:      -220px;
    }

</style> 
```

### 编辑：它是如何工作的

当您相对定位主元素时，它不会从其内容中的流中取出，但会为定位、z-indexes 等打开一个新空间。因此，此容器中具有绝对位置的子元素与其位置相关父母。所以在这个例子中，“ad”元素的宽度为 200px，左边为 -220px，它被移动到左侧容器的外部，并添加了一点“边距”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:49:42.990

**>>[演示](http://jsfiddle.net/BramVanroy/qbKzx/)<<**

[请注意，我使用了 700px 的宽度`#master_container`]

## 一、定位

最重要的 CSS 是广告的样式和定位，我在课堂上给出了这些`.advertis`：

```
.advertis {
    position: fixed; /*creates floating effect */
    top: 20px; /* divs will always stay 20px from top */
    width: 220px;
    padding: 10px;
    background: white;
    border: #ccc 1px solid;
    border-radius: 4px;
}

#left {
    margin-left: -613px; left: 50%; /* positioning of left ads */
} 

#right {
    margin-right: -613px; right: 50%; /* positioning of right ads */
} 
```

我可以听到你想知道：我如何计算我需要的保证金？简单的：

获取宽度`#master_container`（*包括填充*）= `720px`。除以`2`= `360px`。添加广告的宽度（*包括内边距和边框*）= `242px`。`240px + 360px = 600px`. 在容器和广告之间添加您想要的空间 = `11px`（在我的情况下）。

`242px (full width of ad) + 360px (half of container) + 11px (space between ad and container) = 613px (margin needed)`

## 2.窗口太小隐藏

现在您想在广告不再适合窗口时隐藏它们。您可以选择：

*   媒体查询
*   jQuery（或 JavaScript 或它的其他库）

在第一个 jsFiddle 中，我使用了媒体查询（**并非**所有浏览器都支持）。在[这个](http://jsfiddle.net/BramVanroy/qbKzx/3/)Fiddle 中，我使用 jQuery 来获得相同的效果。

```
function widthCheck() {
    var ads = $(".advertis");

    if ($(window).width() < 1225) {
        ads.hide();
    }
    else {
        ads.show();
    }
}

widthCheck(); // Execute onLoad

$(window).resize(function(){
    widthCheck();  // Execute whenever a user resizes the window
}); 
```

​</p>

您可以选择要使用哪一个。我会列出一些优点和缺点，所以你可以自己选择。

**专业媒体查询：**

*   现代的，进步的
*   工作，即使 JS 被禁用

**缺点：**

*   并非所有浏览器都支持

**优点 jQuery：**

*   所有浏览器都支持（和）一样好

**缺点：**

*   禁用 JS 时不起作用
*   不像媒体查询那样进步

# python - 将字符串写入另一个文件

> ID：11491062
> 
> 赞同：3
> 
> 时间：2012-07-15T10:06:00.220
> 
> 标签：python, file

**问题 - 更新：**

我可以让脚本打印出来，但很难找到一种方法将标准输出放入文件而不是屏幕上。下面的脚本用于将结果打印到屏幕上。我在此代码之后立即发布了解决方案，滚动到底部的 [解决方案]。

**第一篇文章：**

我正在使用 Python 2.7.3。我正在尝试提取冒号 ( `:`) 之后的文本文件的最后一个单词并将它们写入另一个 txt 文件。到目前为止，我能够在屏幕上打印结果并且效果很好，但是当我尝试将结果写入新文件时，它给了我`str has no attribute write/writeline`. 这是代码片段：

```
# the txt file I'm trying to extract last words from and write strings into a file
#Hello:there:buddy
#How:areyou:doing
#I:amFine:thanks
#thats:good:I:guess

x = raw_input("Enter the full path + file name + file extension you wish to use: ")
def ripple(x):
  with open(x) as file:
    for line in file:
      for word in line.split():
        if ':' in word:
          try:
            print word.split(':')[-1]
          except (IndexError):
            pass 

ripple(x) 
```

上面的代码在打印到屏幕时完美运行。但是，我花了几个小时阅读 Python 的文档，但似乎找不到将结果写入文件的方法。我知道如何打开文件并使用 writeline、readline 等对其进行写入，但它似乎不适用于字符串。

关于如何实现这一目标的任何建议？

PS：我没有添加导致写入错误的代码，因为我认为这会更容易查看。

**第一篇文章结束**

**解决方案 - 更新：**

设法让python提取并使用下面的代码将其保存到另一个文件中。

**编码：**

```
inputFile = open ('c:/folder/Thefile.txt', 'r')
outputFile = open ('c:/folder/ExtractedFile.txt', 'w')
tempStore = outputFile
for line in inputFile:
    for word in line.split():
        if ':' in word:
            splitting = word.split(':')[-1]
            tempStore.writelines(splitting +'\n')
            print splitting

inputFile.close()
outputFile.close() 
```

**更新：**

通过我的结帐 droogans 代码，它更有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:10:33.540

试试这个：

```
with open('workfile', 'w') as f:
    f.write(word.split(':')[-1] + '\n') 
```

如果你真的想使用该`print`方法，你可以：

```
from __future__ import print_function
print("hi there", file=f) 
```

根据[在 Python 中将行写入文件的正确方法](https://stackoverflow.com/questions/6159900/correct-way-to-write-line-to-file-in-python)。如果您使用的是 python 2，则应该添加`__future__`导入，如果您使用的是 python 3，则它已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:10:42.230

您正在尝试调用`.write()`字符串对象。

您要么混淆了参数（您需要调用`fileobject.write(yourdata)`，*而不是* `yourdata.write(fileobject)`），要么您不小心将相同的变量重新用于打开的目标文件对象和存储字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:02:41.200

我认为您的问题很好，完成后，您应该前往[代码审查](https://codereview.stackexchange.com/)并查看您的代码以了解我注意到的其他内容：

```
# the txt file I'm trying to extract last words from and write strings into a file
#Hello:there:buddy
#How:areyou:doing
#I:amFine:thanks
#thats:good:I:guess 
```

首先，感谢您将示例文件内容放在问题的顶部。

```
x = raw_input("Enter the full path + file name + file extension you wish to use: ") 
```

我不认为这部分是必要的。您可以为`ripple`than创建一个更好的参数`x`。我认为`file_loc`是一个很标准的。

```
def ripple(x):
  with open(x) as file: 
```

使用`open`，您可以标记对文件进行的操作。我也喜欢根据文件对象的工作来命名我的文件对象。换句话说，`with open(file_loc, 'r') as r:`提醒我这`r.foo`将是我正在读取的文件。

```
 for line in file:
      for word in line.split():
        if ':' in word: 
```

首先，您的`for word in line.split()`语句只将 "Hello:there:buddy" 字符串放入列表中：`["Hello:there:buddy"]`。一个更好的主意是传递`split`一个参数，它或多或少地完成了你在这里尝试做的事情。例如，`"Hello:there:buddy".split(":")`将输出`['Hello', 'there', 'buddy']`，使您对冒号的搜索成为一项已完成的任务。

```
 try:
            print word.split(':')[-1]
          except (IndexError):
            pass 
```

另一个优点是您不需要检查 a `IndexError`，因为您至少会有一个空字符串，当拆分时，它会以空字符串的形式返回。换句话说，它不会为该行写任何内容。

```
ripple(x) 
```

因为`ripple(x)`，你会改为调用`ripple('/home/user/sometext.txt')`.

所以，试着看看这个，并探索代码审查。有一个叫[Winston](https://codereview.stackexchange.com/users/1659/winston-ewert)的人在 Python 方面做得非常出色，并且自称是新手。我总是从那个家伙那里学到新花样。

这是我的看法，重新写出来：

```
import os #for renaming the output file

def ripple(file_loc='/typical/location/while/developing.txt'):
    outfile = "output.".join(os.path.basename(file_loc).split('.'))

    with open(outfile, 'w') as w:
        lines = open(file_loc, 'r').readlines() #everything is one giant list
        w.write('\n'.join([line.split(':')[-1] for line in lines]))

ripple() 
```

尝试逐行分解它并改变周围的东西。它非常简洁，但是一旦您掌握了推导并使用列表，以这种方式阅读代码会更自然。

# android - 与 Android NDK 中的版本化共享库链接

> ID：11491065
> 
> 赞同：6
> 
> 时间：2012-07-15T10:06:35.290
> 
> 标签：android, android-ndk, shared-libraries

我正在尝试通过`loadLibrary`调用在我的 Android 应用程序中加载两个共享库：

```
System.loadLibrary("mywrapper");
System.loadLibrary("crypto"); 
```

我一直在追赶`UnsatisfiedLinkError。这是错误的更详细版本。

```
Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: link_image[1969]:
  130 could not load needed library 'libcrypto.so.1.0.0' for 
  'libmywrapper.so' (load_library[1111]: Library 'libcrypto.so.1.0.0' not found) 
```

有任何想法吗？

花了一些时间后，我发现 Android 不支持版本库。有没有人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-19T06:02:20.297

我在为 Android 构建 libwebsockets 时遇到了同样的问题，它需要与 OpenSSL 链接。我以 libssl.so 为例。您应该对相关的 .so 文件执行相同的操作。

```
Before:
huiying@huiying-PORTEGE-R835:~$ objdump -p libssl.so | grep so
libssl.so:     file format elf32-little
  NEEDED               libcrypto.so.1.0.0
  NEEDED               libdl.so
  NEEDED               libc.so
  SONAME               libssl.so.1.0.0

After 
huiying@huiying-PORTEGE-R835:~$ rpl -R -e .so.1.0.0 "_1_0_0.so" libssl.so 
Replacing ".so.1.0.0" with "_1_0_0.so" (case sensitive) (partial words matched)
.
A Total of 2 matches replaced in 1 file searched.
huiying@huiying-PORTEGE-R835:~$ objdump -p libssl.so | grep so
libssl.so:     file format elf32-little
  NEEDED               libcrypto_1_0_0.so
  NEEDED               libdl.so
  NEEDED               libc.so
  SONAME               libssl_1_0_0.so

And don't forget to change file name "libssl.so" to "libssl_1_0_0.so".
```

黑客工作。我已经运行 Android 应用程序来证明这一点。[请参阅我在http://computervisionandjava.blogspot.com/2015/05/trouble-with-versioned-shared-libraries.html](http://computervisionandjava.blogspot.com/2015/05/trouble-with-versioned-shared-libraries.html)上的咆哮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T17:04:40.280

似乎android在加载版本化库方面存在问题。手头的问题是因为库名称在我的情况下为libcrypto.so.1.0.0。即使您重命名库并尝试将其作为预构建的共享库加载到 android make 文件中，它也会失败。（这一定是因为库名称以某种方式嵌入在文件中。任何与它链接的库都希望是与同名的库链接）

我希望在处理 android 中具有版本名称的库时还有其他方法。

现在我正在通过使用 openssl 的静态库并将它们与我自己的共享库链接在一起来避免这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-23T19:15:33.623

2014 年，仍然不支持版本化共享库。所以我做了一个脚本来修补 SONAME。只需将脚本指向所有版本化库放置的输入目录。然后检查输出目录“unver”。

```
#!/bin/bash

DIR="$1"

if [ "$DIR" == "" ]; then
    echo "Usage: fix-soname.sh <target dir>"
    exit
fi

if [ ! -d $DIR ]; then
    echo "Not found: $DIR"
    exit
fi

OUT="$DIR/unver"
echo "Input=$DIR"
echo "Output=$OUT"

CWD=$(pwd)
cd $DIR

# prep dirs
mkdir -p $OUT
rm -f -R $OUT/*

# rename libs and copy to out dir
find "$DIR" -type f -name '*.so*' | while read FILE; do

    NAME=$(basename "$FILE")
    SONAME=$NAME

    while read SYMLINK; do
        X=$(basename "$SYMLINK")
        #echo "$X (${#X}) -> $NAME (${#NAME})"
        if [ "${#X}" -lt "${#SONAME}" ]; then
            SONAME=$X
        fi
done<<EOT
`find -L $DIR -samefile $FILE`
EOT

    #echo $SONAME
    cp -f $SONAME $OUT/
done

# patch libs in out dir
find "$OUT" -type f -name '*.so*' | while read FILE; do

    # get file name without path
    NAME=$(basename "$FILE")

    # extract SONAME from shared lib
    SONAME=`readelf -d $FILE | grep '(SONAME)' | grep -P '(?<=\[)(lib.*?)(?=\])' -o`

    #echo "$NAME [$SONAME]"

    # patch SONAME if required
    if [ "$NAME" != "$SONAME" ]; then
        L1=${#NAME}
        L2=${#SONAME}
        LDIFF=$((L2-L1))
        #echo "$NAME [$SONAME] ($LDIFF)"

        if [ "$LDIFF" -gt "0" ]; then
            SONEW=$NAME
            for (( c=1; c<=$LDIFF; c++ )); do
                SONEW+="\x00"
            done
            echo "$NAME [$SONAME] -> $SONEW ($LDIFF)"
            rpl -R -e "$SONAME" "$SONEW" $OUT
        fi
    fi
done

cd $CWD 
```

# web-services - 是否有可以测试 POST 方法的公共网站？

> ID：11491071
> 
> 赞同：10
> 
> 时间：2012-07-15T10:07:56.183
> 
> 标签：web-services, http, rest

我想知道是否有一个公共网站可以用来测试 POST http 方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T10:11:05.070

据我所知：[http ://www.posttestserver.com/](http://www.posttestserver.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-14T21:45:37.217

你想要[https://httpbin.org/](https://httpbin.org/)

我不记得网址，发现此页面是最佳结果。该链接隐藏在@Jefrey 的评论中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-07T07:12:12.210

不幸的是，接受的答案中提到的网站不再存在。

我使用了Chrome 的[Rest Web Service Client](https://chrome.google.com/webstore/detail/rest-web-service-client/ecjfcmddigpdlehfhdnnnhfgihkmejin?hl=en)扩展。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-05-08T07:34:48.867

你可以试试[https://postman-echo.com](https://postman-echo.com)。如何使用它的文档位于[https://docs.postman-echo.com/?version=latest ，例如，您可以在](https://docs.postman-echo.com/?version=latest)[https://postman-echo.com/post](https://postman-echo.com/post)测试 POST 请求。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-15T10:19:17.053

我不确定您是要使用 Android 还是 Java。[但是您可以按照此处](http://roderickbarnes.com/blog/droid-chronicles-web-services-part-1)所述轻松设置 Web 服务和客户端，并使用[Wireshark](http://www.wireshark.org)之类的嗅探器检查包。

# css - 使用 css 放置命名空间

> ID：11491073
> 
> 赞同：-2
> 
> 时间：2012-07-15T10:08:29.390
> 
> 标签：css, namespaces

我正在尝试添加以防止 twitterbootstrap 与以前的其他一些 css 文件冲突，非常感谢您的帮助。谢谢

我希望一切都用 .tbwrap 类包装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:13:49.620

你需要使用的是LESS。

[LESS主页](http://lesscss.org/#-client-side-usage)的一个例子

```
 #header {
      h1 {
        font-size: 26px;
        font-weight: bold;
      }
      p { font-size: 12px;
        a { text-decoration: none;
          &:hover { border-width: 1px }
        }
      }
    } 
```

/* 编译好的 CSS */

```
#header h1 {
  font-size: 26px;
  font-weight: bold;
}
#header p {
  font-size: 12px;
}
#header p a {
  text-decoration: none;
}
#header p a:hover {
  border-width: 1px;
} 
```

1.  将所有 css 包装在 .tbwrap 中 - 这将是您的 LESS 文件。
2.  使用[Winless](http://winless.org/online-less-compiler)等在线编译器将 LESS 转换为 CSS

# c++ - C++：使用 typeinfo 测试类继承

> ID：11491076
> 
> 赞同：4
> 
> 时间：2012-07-15T10:09:31.793
> 
> 标签：c++, rtti

我有一个指向多态类型的指针，`p`. 我在同一层次结构中的某个地方也有`type_info`一个类，`ti`.

如果我只是比较`typeid(*p) == ti`，那么我可以在运行时测试指针是否指向该类的直接实例。

是否有类似的方法可以使用 C++ 的 RTTI 来测试是否`*p` *继承*自该类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:50:24.367

仅在标准 C++ 中无法做到这一点。如果您使用的是具有[Itanium C++ ABI](http://sourcery.mentor.com/public/cxx-abi/abi.html) ¹的实现， 您可以这样做，例如：

```
#include <iostream>
#include <typeinfo>
#include <cxxabi.h>
#include <memory>

class base {
protected:
  base() {
  }
public:
  static bool check(const std::type_info& p) {
    // Find the real type_info for single inheritance non virtual 
    const __cxxabiv1::__si_class_type_info* test = dynamic_cast<const __cxxabiv1::__si_class_type_info*>(&p);
    return test ? typeid(base) == *test->__base_type : false;
  }

  virtual ~base() {}
};

class der : public base {
};

class foo {};

int main() {
  der d;
  foo f;

  std::cout << base::check(typeid(d)) << "\n";
  std::cout << base::check(typeid(f)) << "\n";
} 
```

在这里这是有效的，因为该类型有一个单一的、非虚拟继承的基础。你可以支持更多的案例，但要小心和类似`dynamic_casts`。

虽然在这些特定情况下这是可能的，但我认为您正在解决错误的问题 - 基于 a 的解决方案`std::map`更具可移植性，并且避免依赖这样的实现细节。

¹令人困惑的名称，它是一个惊人的大编译器/架构列表，而不仅仅是安腾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:51:28.350

是的，您可以`dynamic_cast<>`用于此目的。如果您尝试强制转换为`Base*`，它会执行运行时检查以查看您的类是否真的派生自`Base`（或直接是 Base）。在失败的情况下，`dynamic_cast<>`返回`nullptr`。例子 ：

```
struct Base {
     virtual ~Base() {}
};

struct AnotherBase {
     virtual ~Base() {}
};

struct Derived : Base {};

Base * basePtr = new Base();
Base * derivedPtr = new Derived();
AnotherBase * anotherBasePtr = new Base();

// is derivedPtr a pointer to a class derived from AnotherBase ?
AnotherBase* test2 = dynamic_cast<AnotherBase*>(derivedPtr);    // test2 == nullptr

// is basePtr a pointer to a class derived from Derived ?
Derived * test3 = dynamic_cast<Derived*>(basePtr);    // test3 == nullptr 
```

侧节点：

*   if`dynamic_cast<>`用于转换**指针**，它返回或`nullptr`或转换后的指针。

*   **但是**当`dynamic_cast<>`用于转换**引用**时，它会在失败的情况下引发**异常**。

*   的运行时检查`dynamic_cast<>`仅适用于多态类型。如果您的 Base 不包含任何虚函数（= 非多态），则无法安全地将 a 转换`Base*`为 a `Derived*`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T19:54:24.317

非常感谢柔印。我研究 C++ ABI 已经有一段时间了。经过一个小时的工作，我得到了这个演示： http: [//pastebin.com/j7DYY5ej](http://pastebin.com/j7DYY5ej)。这是在某些情况下检查继承的代码。我已经为这些类型实现了运算符 ==、!=、<、>、<=、>=。我计划改进这种类型方程并在我的项目中使用它。请注意，我在 Linux 下使用了 G++ 4.8。

# java - 使用（ICS）在Android手机上抓取屏幕

> ID：11491080
> 
> 赞同：2
> 
> 时间：2012-07-15T10:10:14.530
> 
> 标签：java, android, screen-scraping, watin, watir

我正在寻找实现简单的自动化，这需要对安卓（ICS）手机进行屏幕抓取。

有哪些可用的选项、框架、库？

我一直在 .NET 上使用 WATIN，发现它非常强大且易于使用，WATIN 的 Java 版本，WATIR - 它是 Android 平台的网页屏幕抓取/自动化的好选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:00:19.403

您可以使用[watir-webdriver](https://github.com/watir/watir-webdriver)或[selenium-webdriver](http://code.google.com/p/selenium/wiki/RubyBindings) Ruby gem 来驱动 Android 模拟器或真实 Android 设备中的真实浏览器。当然，如果你不是 Ruby 人，你可以用另一种语言做同样的事情。更多信息：[http ://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:27:09.313

使用 RESTful API 使您能够以最少的编码工作量提取数据。以下是您可能感兴趣的一些链接。

[从 Android http://timewasted.net/?p=127](http://timewasted.net/?p=127)调用 REST Web 服务

合成网站 [http://www.syntheticsweb.com/](http://www.syntheticsweb.com/)

# javascript - JSF bean 属性未在外部 JavaScript 文件中评估

> ID：11491085
> 
> 赞同：1
> 
> 时间：2012-07-15T10:11:05.257
> 
> 标签：javascript, jsf, jakarta-ee, el

如果我想从 JavaScript 中评估 JSF bean 属性，我发现如果 JavaScript 片段位于 xhtml 文件中，它可以工作，但当 JavaScript 片段位于单独的 js 文件中时它不起作用。

所以，这有效：

**索引.xhtml**

```
...
<h:body>
    <script type="text/javascript" src="resources/Javascript/jquery/jquery-1.7.2.js" />
    <script type="text/javascript" >
        $(document).ready(function() {
            alert('#{myBean.myProperty}');
        });
    </script>        
</h:body> 
```

但这不会评估 ManagedBean 的属性：

**索引.xhtml**

```
...
<h:body>
    <script type="text/javascript" src="resources/Javascript/jquery/jquery-1.7.2.js" />
    <script type="text/javascript" src="resources/Javascript/MyJS.js" />
</h:body> 
```

**MyJS.js**

```
$(document).ready(function() {
    alert('#{myBean.myProperty}');
}); 
```

在第二种情况下，警报框包含未评估的字符串`#{myBean.myProperty}`

我怎样才能使它从外部 js 文件工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T00:00:31.007

另一种解决方案是将您的 *.js 文件更改为 *.xhtml 并将其包含在“<ui:include ... />”中。为避免解析器抱怨在您的 *.xhtml 文件中使用了 &、< 和 >，请在其周围加上 CDATA 标记。这样做的缺点是如果 *.js 文件正在其他页面中使用，浏览器将无法缓存它。

**MyJS.xhtml（从 MyJS.js 更改）**

```
<xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>
<ui:composition>

<script type="text/javascript">
//<![CDATA[
  ...your JavaScript code here...
//]]>
</script>

</ui:composition>
</h:body>
</html> 
```

在您的**index.xhtml**文件中，执行以下操作：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
  ...
<ui:include src="MyJS.xhtml" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T10:46:55.813

我个人更喜欢以下方法

```
<h:inputText id="myHiddenData" value="#{myBean.myProperty}" style="display:none">

$(document).ready(function() {
    alert($("#myHiddenData").val()); // or alert($("#myFormID\\:myHiddenData").val());
}); 
```

我只是不喜欢将 js 代码与 JSF 混合......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T10:25:30.667

我只是想在回答之前检查一些东西，就像我在评论中所说的那样：

我认为你不能从外部 JS，作为一种解决方法，你需要通过调用它来将该值从 JSF 页面传递给 JS 函数，`functionName(#{value});`并像普通的 JS 值一样在 JS 文件中执行你想要的操作。

就像在您的**index.xhtml 中**一样：

```
<script type="text/javascript" >
        $(document).ready(function() {
            functionName('#{myBean.myProperty}');
        });
</script> 
```

或喜欢：

```
<h:commandLink action="..." value="..." onclick="functionName('#{myBean.myProperty}')"/> 
```

在你的 js 文件中：

```
function functionName(var1) {
// DO what you want to do with var1 or varN like normal JS value
} 
```

当然，您不仅可以传递单个参数，还可以传递多参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T11:01:35.220

感谢@Al-Mothafar 的建议，我终于通过以下方式解决了我的问题：

**索引.xhtml**

```
...
<h:body>
    <script type="text/javascript" src="resources/Javascript/jquery/jquery-1.7.2.js" />
    <script type="text/javascript" src="resources/Javascript/MyJS.js" />
    <script type="text/javascript" >
        var myBeanProperty = '#{myBean.myProperty}';
    </script>        
</h:body> 
```

**MyJS.js**

```
$(document).ready(function() {
    alert(myBeanProperty);
}); 
```

# python - 使用 Satchmo 订阅商店本身

> ID：11491089
> 
> 赞同：0
> 
> 时间：2012-07-15T10:11:33.717
> 
> 标签：python, django, e-commerce, satchmo

我正在尝试设置 Satchmo，我发现了这个很酷的订阅产品，但我想要的是在网站（一个多商店网站）本身上创建一个仅限会员的部分。换句话说，我希望用户进行订阅以便能够使用某些功能。这在 Satchmo 中可能吗？

我想如果我的网站叫做 xyz.com 那么我可以在系统上创建 xyz 商店并让它有一个订阅产品，但是我可以将它与 Django 登录系统集成吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:24:30.430

您可以收听`satchmo_store.shop.signals.order_success`并在您的收听者中包含自我订阅所需的所有步骤（用​​户到组、对象创建等，..）。

# javascript - Ember.js 对象的把手模板，按两个分组

> ID：11491092
> 
> 赞同：1
> 
> 时间：2012-07-15T10:12:12.417
> 
> 标签：javascript, templates, ember.js, handlebars.js

我在集合中有我的数据，我需要将它们呈现到模板中。当数据按两个分组时，我怎样才能达到结果？我需要像这样对它们进行排序：

```
._______________________
| 1 | 3 | 5
|___|___|_______________
| 2 | 4 | and so on...
|___|___|_______________ 
```

我为每个 1+2、3+4、... 对创建了垂直 div 元素，以设置这样的项目样式。如何使用把手将数据呈现到这样的网格中？我能做的就是：

```
{{#each App.myController}}
 ... render item ...
{{/each}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:58:01.527

首先，如果可能在您的布局中，我会尝试在 CSS 中执行此操作。

如果没有，最好的办法是向控制器添加一个计算属性，将它们组合成对并这样做。像这样的东西：

```
{{#each App.myController.pairedContent}}
  <!-- view for content.firstObject -->
  <!-- view for content.lastObject -->
{{/each}}

App.MyController = Ember.ArrayController.extend({
  pairedContent: ( function(){
    return this.get('content').reduce( function(array, object, index){
      if(index % 2){
        array.get('lastObject').pushObject(object)
      }
      else{
        array.pushObject(Ember.A([object]))
      }
      return array
    }, Ember.A())
  }).property('content')
}) 
```

# asp.net - 无法从程序集“System.Net.Http.Formatting”加载类型“System.Net.Http.HttpClientExtensions”

> ID：11491094
> 
> 赞同：0
> 
> 时间：2012-07-15T10:12:54.017
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

怎样才能摆脱这个问题？我的机器上安装了 asp.net MVC 4.0 beta，正如我在一些论坛上读到的那样，它正在造成冲突，如果你卸载它应该可以正常工作。但是，我担心我是否必须重新安装 MVC 4.0 beta 才能使使用 MVC 4.0 beta 构建的 Web 应用程序正常工作。真的不知道。

您的回答将不胜感激。

> 无法从程序集“System.Net.Http.Formatting，Version=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”加载类型“System.Net.Http.HttpClientExtensions”。

```
class Program
{
    static void Main(string[] args)
    {

        using (var httpClient = new HttpClient())
        {
            try
            {
                var responseStartSchecdule = httpClient.PostAsJsonAsync(
                "http://dev02.xav.com/api/Track/StartScheduleRumble",
                CancellationToken.None
            ).IsCompleted;

                var responseFinishSchecdule = httpClient.PostAsJsonAsync(
                "http://dev02.xav.com/api/Track/FinishRumble",
                CancellationToken.None
            ).IsCompleted;

            }
            catch (Exception)
            {
                // add tracing implementation here to trace if there is some error      
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:14:51.657

Beta 版和 RC 版之间发生了一些重大变化。不建议同时安装两者。因此，我建议您卸载测试版，安装 RC，然后针对 RC 重新编译您的应用程序。或者，如果出于某种原因您想坚持使用 Beta，则必须确保您没有下载依赖于 RC 的某些程序集（或通过 NuGet 安装）。

# java - BufferedInputStream 没有接受大量输入

> ID：11491101
> 
> 赞同：1
> 
> 时间：2012-07-15T10:14:06.493
> 
> 标签：java, bufferedinputstream

我在java中相对较新，我试图将二进制矩阵作为输入，其中行和列的总数将在2和1000之间。我正在使用BufferedInputStream，对于小矩阵，我的代码正在工作（给出正确的输出）例如 4x4 矩阵。但是对于 6x9 输入，它不起作用。实际上我正在尝试解决 12367 号 UVA 问题。

我的代码

```
 import java.io.BufferedInputStream;
 import java.util.Scanner;

 class Main {
    static int totalOne=0;

    public static int swapCount(int array[]) {
        int L = array.length, s=0;
        for (int n=0;n<L;n++) {                     
            int avg = totalOne / L;
            if (array[n]>avg) {
                int x=1;    
                while (array[n]>avg) {
                    int t = n+x;
                    int u = n-x;

                    if (t>L-1) {
                        if (array[t-L]<avg) {                           
                                array[n]--;
                                array[t-L]++;
                                s++;                            
                        }
                    }   
                    else {
                        if (array[t]<avg) {                         
                            array[n]--;
                            array[t]++;
                            s++;                            
                        } 
                    }

                    if (array[n]>avg) { 
                        if (u<0) {
                            if (array[u+L]<avg) {                           
                                        array[n]--;
                                        array[u+L]++;
                                        s++;                            
                                }
                        }
                        else {
                                if (array[u]<avg) {                         
                                    array[n]--;
                                    array[u]++;
                                    s++;                            
                                } 
                        }
                    }
                }
                x++;
            }       
        }
        return s;
    }

    public static void main(String args[]) {
        Scanner stdin = new Scanner(new BufferedInputStream(System.in));

            int t = stdin.nextInt();
            int a,b,i=0,flag=0,swap=0;
            String result = new String();
            if (t<=10) {
                while (i<t) {
                    i++;
                    totalOne = 0;
                    int R = stdin.nextInt();
                    int C = stdin.nextInt();
                    int [][] arr = new int [R][C];
                    int [] rowOne= new int [R];
                    int [] colOne= new int [C];
                    if (2<=R&&2<=C&&R<=1000&&C<=1000)  {
                        for (a=0;a<R;a++) {
                            for (b=0;b<C;b++) {
                                arr[a][b]=stdin.nextInt();
                                if (arr[a][b]!=0 && arr[a][b]!=1)
                                    flag=1;
                                if (arr[a][b]==1){
                                    rowOne[a]++;
                                    colOne[b]++;
                                }
                            }
                        }

                        if (flag==0) {
                            for (a=0;a<R;a++)
                            totalOne=totalOne+rowOne[a];
                            if (totalOne%R==0) {
                                result = "row";
                                swap = swapCount(rowOne);
                                if (totalOne%C==0) {
                                    result = "both";
                                    swap = swap + swapCount(colOne);
                                }
                            }
                            else {
                                if (totalOne%C==0) {
                                    result = "column";
                                    swap = swapCount(colOne);
                                }
                                else {
                                    result = "impossible";
                                }
                            }               

                            if (result.equals("impossible")) 
                                System.out.println("Case "+i+": "+result);  
                            else {  
                                System.out.println("Case "+i+": "+result+" "+swap);
                            }                       

                        }   
                    }
            }
        }
       System.exit(0);
    }
 } 
```

对于这样的输入：

```
1
4 4
0 0 0 0
1 1 1 1
0 0 0 0
1 1 1 1 
```

（其中 1 是测试用例的数量，4 4 是矩阵维度，其余是矩阵元素）

输出是“Case 1: both 4”，这是预期的，但输入如下 -

```
1
6 9
1 0 1 0 1 1 1 0 1
0 0 0 1 0 1 0 0 1
1 1 0 1 0 0 0 0 1
0 0 0 0 1 0 0 1 0
1 0 0 1 0 0 0 0 0
0 0 0 0 1 0 0 0 0 
```

它没有给出任何输出&在调试时我发现在读取所有矩阵元素之前，它是从主线程单步执行的，因此程序没有执行。

谁能告诉我问题出在哪里:(它与缓冲区大小有关吗？

# c# - Azure 上的 Signalr：调用单个客户端所需的服务总线？

> ID：11491104
> 
> 赞同：2
> 
> 时间：2012-07-15T10:14:33.767
> 
> 标签：c#, .net, azure, cloud, signalr

我读到 Azure 上的 Signalr 需要一个服务总线实现（例如[https://github.com/SignalR/SignalR/wiki/Azure-service-bus](https://github.com/SignalR/SignalR/wiki/Azure-service-bus)）以实现可扩展性目的。

但是，我的服务器只对单个客户端（调用者）进行回调：

```
// Invoke a method on the calling client
Caller.addMessage(data); 
```

如果不需要 Signalr 的广播功能，是否还需要底层服务总线？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T17:22:08.537

服务总线依赖项不是 Azure 特有的。每当您有多个服务器在运行时，您的一些 signalR 客户端将创建与特定服务器的连接。如果您想保持多个服务器同步，则需要处理服务器到服务器的实时通信。服务总线的 pub-sub 模型很好地满足了这一要求。

> dfowleR 在评论中列出了一个具体案例。确保你读了那么远！

如果您在单个服务器上运行（Azure 上没有 sla），signalR 将在云服务 Web 角色以及新的 Azure 网站上正常工作。我对这个简单的场景进行了[截屏](http://developusing.net/2012/06/08/DevelopingSinglePageRealTimeWebsitesOnWindowsAzure.aspx)，该场景不依赖于服务总线，但只在单个服务器上运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T03:14:55.090

为了支持负载平衡方案，是否可以在多个实例之间（即在 Azure 上）建立“服务器到服务器”SignalR PersistConnection？如果是这样，我们可以使用所有实例在启动时注册的 SQL Azure 表，以便最新的可以连接到以前的。

# xslt - 使用 for-each-group 实现高性能 XSLT

> ID：11491108
> 
> 赞同：3
> 
> 时间：2012-07-15T10:15:34.943
> 
> 标签：xslt, xpath, xslt-2.0

我有一个 XSLT (1.0) 样式表。它没有问题。我想升级到 2.0。我想使用`xsl:for-each-group`（并使其具有高性能）。有可能的？如何？请解释。

我有很多地方喜欢

```
 <xsl:if test="test condition">
     <xsl:for-each select="wo:tent">
     <width aidwidth='{/wo:document/styles [@wo:name=current()/@wo:style-name]/@wo:width}'
</xsl:for-each>
    </xsl:if> 
```

**添加**

```
<xsl:template match="wo:country">
            <xsl:for-each select="@*">
                <xsl:copy/>
            </xsl:for-each>
            <xsl:variable name="states" select="wo:pages[@xil:style = &quot;topstates&quot; or @xil:style = &quot;toppage-title&quot;]"/>
            <xsl:variable name="provinces" select="wo:pages[@xil:style = &quot;topprovinces&quot;]"/>
            <xsl:choose>
                <xsl:when test="$states">
                    <xsl:apply-templates select="$states[2]/preceding-sibling::*"/>
                    <xsl:apply-templates select="$states[2]" mode="states">
                        <xsl:with-param name="states" select="$states[position() != 0]"/>
                    </xsl:apply-templates>
                </xsl:when>
                <xsl:when test="$provinces">
                    <xsl:apply-templates select="$provinces[2]/preceding-sibling::*"/>
                    <xsl:apply-templates select="$provinces[2]" mode="provinces">
                        <xsl:with-param name="provinces" select="$provinces[position() != 2]"/>
                    </xsl:apply-templates>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates/>
                </xsl:otherwise>
            </xsl:choose>
    </xsl:template> 
```

**来源**

```
<?xml version="1.0" encoding="UTF-8"?>
<wo:country>
   some stuff
</wo:country> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T11:53:30.573

我假设您想要深入描述 xsl:for-each-group 以及如何使用它。如果这不是您要的，请告诉我。

XSLT 2.0 中的新指令采用一组项目并将它们分组。这组项目称为“人口”，而组仅称为组。该指令依次处理每个组。

xsl:for-each-group 指令的可能属性包括：

1.  选择
2.  通过...分组
3.  组相邻
4.  组开始
5.  组结尾与
6.  整理

@select 是强制性的。其他是可选的。它可以采用任意数量的 xsl:sort 子级（但它们必须先出现），然后是一个序列构造函数。“序列构造函数”是指所有在模板等内部发出序列的类型指令的术语。

## @选择

select 属性指定一个 XPATH 表达式，它计算要分组的总体。

## @通过...分组

group-by 属性指定一个 XPATH 表达式，当分组类型是按公共值时，您可以使用该表达式。总体中评估为与另一个相同的分组值的每个项目都与另一个在同一组中。

XSLT 1.0 Muenchian 分组在分组类型是按共同值分组时并不太难。有两种更常见的分组形式：按相似值对相邻项进行分组；并将相邻的一组项目分组，这些项目的组要么在末尾划界，要么在开始时通过某些测试划定。虽然这两种形式的分组在 Muenchian 中仍然是可能的，但它变得相对复杂。由于使用了同级轴（不管你怎么拼写！），这些类型的 Muenchian 在规模上的效率也会降低。

我想到的 XSLT 2.0 的另一个优点是 Muenchian 仅适用于节点集，而 xsl:for-each-group 的应用范围更广，因为它适用于一系列**项目**，而不仅仅是节点。

@group-by 表达式的结果将是一系列项目。这个序列被原子化和重复数据删除。被测试的总体项目将是每个值的一个组的成员。这是一个奇怪的结果，使用@group-by，并且 item 可能是多个组的成员，甚至可能没有。虽然我怀疑您可以在 XSLT 2.0 中做的任何事情，但通过一些曲折的路径，您可以在 XSLT 1.0 中做，将一个项目分成两组的能力在 XSLT 1.0 Muenchian 中会很安静。

## @group-相邻

属性 group-by、group-adjacent、group-starting-with 和 group-ending-with 是互斥的，因为它们指定了不同类型的分组。具有公共值且在总体中相邻的项目被分组在一起。与@group-by 不同，@group-adjacent 在原子化之后必须评估为单个原子值。

## 组开始

与 select、group-adjacent 和 group-by 不同，此属性不指定 XPATH 选择表达式，而是指定模式，就像 xsl:template/@match 指定模式**而不是**选择一样。如果总体中的一个项目通过了模式测试**或者是总体中的第一个项目，**那么它将开始一个新的组。否则，该项目从前一个项目继续该组。

Martin 提到了规范示例 (w3.org/TR/xslt20/#grouping-example)。从该参考资料中，我将复制题为“通过初始元素识别组”的示例，但稍微改变它以强调关于总体初始项的要点。

所以这是我们的输入文档（从 w3 规范复制。包含孤立行是我的）...

```
<body>
  <p>This is an orphaned paragraph.</p>
  <h2>Introduction</h2>
  <p>XSLT is used to write stylesheets.</p>
  <p>XQuery is used to query XML databases.</p>
  <h2>What is a stylesheet?</h2>
  <p>A stylesheet is an XML document used to define a transformation.</p>
  <p>Stylesheets may be written in XSLT.</p>
  <p>XSLT 2.0 introduces new grouping constructs.</p>
</body> 
```

...我们想要做的是将组定义为以 h2 开头的节点，并包括所有后续 p 直到下一个 h2。w3给出的示例解决方案是使用@group-starting-with ...

```
<xsl:template match="body">
  <chapter>
        <xsl:for-each-group select="*" group-starting-with="h2"      >
          <section title="{self::h2}">
            <xsl:for-each select="current-group()[self::p]">
              <para><xsl:value-of select="."/></para>
            </xsl:for-each> 
          </section>
        </xsl:for-each-group>
  </chapter>
</xsl:template> 
```

在规范示例中，当输入不包含孤立行时，这会产生所需的结果......

```
<chapter>
  <section title="Introduction">
    <para>XSLT is used to write stylesheets.</para>
    <para>XQuery is used to query XML databases.</para>
  </section> 
  <section title="What is a stylesheet?">
    <para>A stylesheet is an XML document used to define a transformation.</para>
    <para>Stylesheets may be written in XSLT.</para>
    <para>XSLT 2.0 introduces new grouping constructs.</para>
  </section>
</chapter> 
```

虽然在我们的特殊情况下，我们得到了......

```
<chapter>
   <section title="">
      <para>This is an orphaned paragraph.</para>
   </section>
   <section title="Introduction">
      <para>XSLT is used to write stylesheets.</para>
      <para>XQuery is used to query XML databases.</para>
   </section>
   <section title="What is a stylesheet?">
      <para>A stylesheet is an XML document used to define a transformation.</para>
      <para>Stylesheets may be written in XSLT.</para>
      <para>XSLT 2.0 introduces new grouping constructs.</para>
   </section>
</chapter> 
```

如果不希望孤立行的初始部分，则有简单的解决方案。我现在不会进入他们。我的观点只是要强调一个事实，即@group-starting-with 产生的第一组可以是“孤儿”组。“孤儿”是指头节点不符合指定模式的组。

## @collat​​ion

collat​​ion 属性指定一个排序规则 URI 并标识用于比较字符串是否相等的排序规则。

## 当前组（）

在 xsl:for-each-group 中，current-group() 函数将当前组作为项目序列进行处理。

## 当前分组键（）

在 xsl:for-each-group 中，current-group() 函数返回当前组键。我不确定，但我相信这只能是原子类型。也不确定，但我相信这个功能只适用于@group-by 和@group-adjacent 类型的分组。

## @group-by 与 @group-adjacent

在某些情况下，您可以在具有相同功能结果的这两种排序类型之间进行选择。在这种情况下，@group-adjacent 优先于 @group-by，因为它的处理效率可能更高。

## 模式与选择

一些 XSLT 2.0 指令属性包含选择表达式。Michael Kay 将这些称为“XPath 表达式”。就个人而言，当与模式并列时，我觉得更好的描述是“选择表达”。其他属性包含模式或“匹配表达式”。虽然这两者都包含相同的语法，但它们是非常不同的野兽。两者的相似性常常使 XSLT 初学者认为 xsl:template/@match 不是一种模式，而是一种选择表达式。结果是初学者对模板序列构造函数中的 position() 函数的值产生了很多困惑。如前所述，在 xsl:for-each-group 中，@select、@group-by 和 @group-adjacent 是选择表达式，但 @group-starting-with 和 @group-ending-with 是模式。所以这里有区别：

1.  选择表达式就像一个函数。输入是上下文文档、上下文序列、上下文项、上下文位置，当然还有实际表达式。输出是一系列项目。根据实际使用的位置，这可能成为下一个上下文序列。默认轴是 child:: 。
2.  与 select 表达式不同，模式的默认轴是 self:: 。模式也像一个函数。它的输入和以前一样，它的输出不是一个序列，而是一个布尔值。正在测试某些项目以查看它是否与模式匹配。被测试的项目成为上下文项目。匹配表达式被临时评估，因为它是一个选择表达式。然后测试返回的序列以查看上下文项是否为成员。然后丢弃返回的序列。如果它是成员，则结果为真或“匹配”，否则为假。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:08:16.937

Sean 提供了 xsl:for-each-group 的精彩概述，非常慷慨，但它似乎并不能真正回答您的问题。

您已经展示了一段 XSLT 代码，并且您说过您想要更快的性能。但是您显示的片段不是在进行分组，而是在进行连接。有两种方法可以加快加入速度。要么使用 XSLT 处理器（例如 Saxon-EE）来进行自动连接优化，要么使用键手动优化它。例如，给定这个表达式：

```
/wo:document/styles [@wo:name=current()/@wo:style-name]/@wo:width 
```

你可以定义一个键

```
<xsl:key name="style-name-key" match="styles" use="@wo:name"/> 
```

然后将表达式替换为

```
key('style-name-key', @wo:style-name)/@wo:width 
```

# javascript - 如何创建一个可以与嵌入代码一起使用的按钮？

> ID：11491110
> 
> 赞同：3
> 
> 时间：2012-07-15T10:16:39.477
> 
> 标签：javascript, html, css, asp.net-mvc-3, razor

我正在开发一个需要创建可嵌入按钮的项目。我只是想给客户一些代码，并要求他们把它放在他们希望按钮出现在他们网站上的地方。最好的方法是什么？作为示例，请参见下图：

![来自 OpenCal](../Images/d2f7651a1ebf5233a37b9fcec5c4ce28.png)

如果有人可以提供一些示例代码，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:32:41.720

最简单的形式是提供超链接：

```
<a href="http://mysite.com/dosomething" title="DoSomething">Do Something</a> 
```

或者您可以使用图像按钮：

```
<a href="http://mysite.com/dosomething" title="DoSomething">
    <img src="http://mysite.com/images/a.jpg" alt="DoSomething" />
</a> 
```

这些都消除了对 CSS 和 JS 的依赖。

或者您可以按照问题中的建议进行操作：

```
<script src="http://mysite.com/scripts/embedbutton.js">
    document.write('<link rel="stylesheet" href="http://mysite.com/css/embedbutton.css" />');
    document.write('<div id="mybutton" onclick="DoSomething(event);">DoSomething</div>');

    function DoSomething()
    {
        /* action code here */
    }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-18T12:01:01.937

我认为 javascript 解决方案是您需要的解决方案。创建一个 javascript 来编写按钮的 HTML。例如，将代码放在 public/js/mybutton.js 中。

```
var link = 'http://yoursite.com';
var text = '<div><a href="' + link + '"><img src="' 
    + link 
    + '/public/images/image.png" alt="Some alt text for the image" /></a></div>';
document.write(text); 
```

然后在您的页面中提供一个脚本标签，供用户嵌入您的按钮。

```
<script src="http://yoursite.com/public/js/mybutton.js"></script> 
```

结果将是一个带有指向您网站的链接的图像，在脚本之后立即呈现。您也可以使用内联样式。我相信当您想要阻止您的按钮样式修改时，这是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T10:30:31.900

您可以使用一个简单的链接：

```
<a href="http://yoursite.com">Blah</a> 
```

然后要求您的客户将此代码嵌入到他们的网站中。显然，根据您需要在客户端站点和您的站点之间交换的信息，可能会有其他参数、javascript 代码、...

# android-intent - Android 找不到电子邮件客户端（没有应用程序可以执行此操作）

> ID：11491111
> 
> 赞同：2
> 
> 时间：2012-07-15T10:16:44.553
> 
> 标签：android-intent, email-client

我已经阅读了有关上述错误消息的其他帖子，但是由于我描述我仍然存在的问题的帖子已经在很久以前被标记为答案，但我最好在单独的线程中询问 - 因为没有解决问题的技巧对我有用。在手机上运行应用程序时出现问题。K9 Mail 和 Google Mail 均已安装和设置。

这是我的代码片段：

```
 final Intent imail = new Intent(Intent.ACTION_SENDTO);
    imail.setType("message/rfc822"); // or: text/plain
    imail.putExtra(Intent.EXTRA_EMAIL  , new String[]{"contact@mydomain.com"});
    imail.putExtra(Intent.EXTRA_SUBJECT, "Feedback");
    imail.putExtra(Intent.EXTRA_TEXT   , emailText);
    try {
        startActivity(Intent.createChooser(imail, "Send mail..."));
    } catch (android.content.ActivityNotFoundException ex) {
        Toast.makeText(Feedback.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
    } 
```

该应用程序在手机上显示“没有应用程序可以执行此操作”错误。

我还尝试了另一种变体但没有成功：

```
 String mailId = (String) "contact@mydomain.com"; 
    final Intent imail = new Intent(Intent.ACTION_SENDTO, Uri.fromParts( 
    "mailto",mailId, null)); 
    imail.setType("message/rfc822"); // text/plain
    imail.putExtra(Intent.EXTRA_SUBJECT, "Feedback");
    imail.putExtra(Intent.EXTRA_TEXT, emailText);

    // Check if Intent available
    List<ResolveInfo> list = getPackageManager().queryIntentActivities(
            imail, PackageManager.MATCH_DEFAULT_ONLY); 
```

在这种情况下，List 返回 Null 的大小，尽管如上所述安装了 K9 Mail 和 Google Mail。我的系统是 HTC One V (Android 4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T10:00:28.817

尝试这个

```
 private void enviar(String[] to, String[] cc, String asunto, String mensaje)
{ 
        Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.setData(Uri.parse("mailto:"));
        emailIntent.putExtra(Intent.EXTRA_EMAIL, to);
        emailIntent.putExtra(Intent.EXTRA_CC, cc);
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, asunto);
        emailIntent.putExtra(Intent.EXTRA_TEXT, mensaje);
        emailIntent.setType("message/rfc822");

         startActivity(Intent.createChooser(emailIntent, "Email ")); 
```

}

这适用于 Gmail

# lisp - Common Lisp：制定有关输入值的规则

> ID：11491112
> 
> 赞同：4
> 
> 时间：2012-07-15T10:17:14.313
> 
> 标签：lisp, common-lisp, predicate

在编写一个谓词来测试一个数字是否可以被某个范围内的所有整数整除时，我想知道是否可以通过“声明”符号来制定关于输入的规则？

代码：

```
(defun integer-divisiblep (n m i)   
  (declare (integer n m i))
  (do ((x m (- x 1)))           
      ((< x n) (return t))
    (when (not (integerp (/ i x)))
      (return nil)))) 
```

在这种情况下，我可能想指定输入值“n”必须小于“m”。反正有没有用内置函数来做到这一点？我似乎无法通过 Hyperspec 上的声明标识符找到我想要的东西。

另外，我正在使用 SBCL，如果这有影响的话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T13:40:28.610

Common Lisp 不提供参数类型的静态类型检查。一些 Common Lisp 编译器将其作为扩展，最值得注意的是 CMUCL 和 SBCL。这些静态类型检查使用由`DECLARE`. 您需要查看各种类型的语法以查看可以声明的内容。

运行时的动态检查最好使用`CHECK-TYPE`和来完成`ASSERT`。

> 在这种情况下，我可能想指定输入值“n”必须小于“m”

这类似于：

```
(assert (and (numberp m) (numberp n) (< n m)) (m n)) 
```

最后的列表`(m n)`是一个变量列表，如果违反了断言，则可以由用户交互式设置。输入不同的值后，将再次检查断言，直到满足断言为止。

# java - 将 zip 文件复制到另一个 zip 文件中

> ID：11491117
> 
> 赞同：4
> 
> 时间：2012-07-15T10:19:01.833
> 
> 标签：java

目前我正在使用下面的代码将 zip 复制到另一个 zip 中。但是当 zip 文件大小增加时，例如：2GB，程序抛出内存不足错误。我已将 xmx 增加到 1024，仍然 prfoblem 是相同的。是否有任何替代方法处理大文件？

```
public static void zipFile(File srcFile, File zipFile)
            throws FileNotFoundException, IOException {
        BufferedInputStream origin = null;
        FileOutputStream dest = new FileOutputStream(zipFile);
        ZipOutputStream out = new ZipOutputStream(
                new BufferedOutputStream(dest));
        // out.setMethod(ZipOutputStream.DEFLATED);
        byte data[] = new byte[BUFFER];
        FileInputStream fi = new FileInputStream(srcFile);
        origin = new BufferedInputStream(fi, BUFFER);
        ZipEntry entry = new ZipEntry(srcFile.getName());
        out.putNextEntry(entry);
        int count;
        while ((count = origin.read(data, 0, BUFFER)) != -1) {
            out.write(data, 0, count);
        }
        origin.close();
        out.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:52:29.697

当您开始使用它时，您只是在复制字节。您不需要将任一文件作为 Zip 文件处理。只需复制字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:28:46.827

可以试试`FileChannel.transferTo`方法吗？它更有效率。由于这是在操作系统级别完成的，我假设它不应该依赖于 Java 堆大小。

如果那也失败了，请看一下这个[**问题**](https://stackoverflow.com/questions/4666616/problem-with-nio-whily-trying-to-copy-large-file)。

# google-maps - Geocomplete jQuery 插件：将页面初始化到浏览器位置

> ID：11491118
> 
> 赞同：1
> 
> 时间：2012-07-15T10:19:03.107
> 
> 标签：google-maps, jquery-plugins, google-maps-api-3

我一直在尝试让“example/form.html”页面在浏览器中使用浏览器的当前位置进行初始化。无济于事。有了这个，我试图使用 jQuery 传递浏览器当前位置的变量。我还尝试使用数组手动设置 jquery.geocomplete.js 中的位置变量，但也无济于事。我正在尝试这个：

var defaults = { bounds: true, country: null, map: false, details: false, detailsAttribute: "name", location: ['-27.470933,153.023502'],

我也试过了`location: ['-27.470933','153.023502']`。

我的理解是“边界”应该设置为米半径，所以如果初始加载，我可能还会用 5000 填充它。我也尝试过使用：

```
position.coords.latitude
position.coords.longitude; 
```

任何关于我应该寻找的方向将不胜感激。尽管我遇到了同样的问题，但另一种选择可能只是使用 Google AutoComplete。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:57:45.820

我不太确定你想用 JQuery Geocomplete 实现什么。但是要访问您的 HTML5 纬度和经度位置，这里有一些脚本：

```
function init() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(browser_geolocation_success, browser_geolocation_error);
  }
}

function browser_geolocation_success(geolocation) {
  // now here you access your html5 latitude and longitude
  // by requesting -> geolocation.coords.latitude ;and -> geolocation.coords.longitude
} 
```

在上面的最后一个函数中，你可以对你的位置做一些事情，比如在已经加载到你的 HTML 中的谷歌地图上创建一个标记。

# extjs - 如何在 extjs 4.1 中取消突出显示

> ID：11491123
> 
> 赞同：0
> 
> 时间：2012-07-15T10:19:35.477
> 
> 标签：extjs, highlight

如何取消 extjs 4.1 中的高亮显示？

我在 extjs 4.1 中的 dom 元素上调用 highlight()。当 highlight 正在运行时，我关闭（销毁）面板，没有错误消息，但是在它引发一些异常之后的 dom 操作，例如“dom is undefine”等等。

如何在销毁之前强制取消突出显示过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T07:30:02.427

我找到了。

```
Ext.fx.Manager.stopAnimation(elId); // elId is the id of element which highlight 
```

`Ext.fx.Manager`是私人的，但似乎工作正常。

当目标元素被破坏时，动画引擎似乎并不健壮，并且它之后的所有效果都没有机会运行。

或者，有什么方法可以在 DOM 元素被销毁时自动删除所有动画？

# python - 这两个“x”在这个 Python 代码中是什么意思：self.x = x？

> ID：11491131
> 
> 赞同：1
> 
> 时间：2012-07-15T10:22:07.140
> 
> 标签：python, self

我对下面的代码感到困惑：

```
class Point():
    def __init__(self, x=0, y=0):
        self.x = x
        self.y = y 
```

我不明白`x`代码中的这两个是什么`self.x = x`意思。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T10:27:25.880

`self.x`是 Point 类的一个属性。因此，如果 p 是 Point 类的实例，那么`p.x`就是`self.x`您在上面看到的（self 是对您正在定义的类的引用）。第二个`x`是在初始化时传递的参数`def __init__(self, x=0, y=0):`。请注意，如果您不传递任何内容，它默认为零。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-15T10:26:43.167

第一个`x`是 的属性`self`，而第二个作为第二个参数进入方法。

你可以把它写成：

```
class Point():
    def __init__(self, new_x=0, new_y=0):
        self.x = new_x
        self.y = new_y 
```

看看哪个属于哪个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T10:28:48.237

首先阅读这个问答：[自我的目的是什么？](https://stackoverflow.com/questions/2709821/python-self-explained). 对于您的问题，第一个`self.x`是的属性，`self`第二个`x`是您在构造函数中获得的参数`Point`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-17T22:17:14.443

```
class Employee:
   def __init__(self, name, salary):
       self.name = name
       self.salary = salary    # self ? ? ?

   def displayEmployee(self):
       salary  =  -69 
       print self.name, self.salary,salary    # self ? ? ? 
```

跑：

```
emp1 = Employee("nick", 2000)

emp1.displayEmployee()      # self ! ! ! 
```

输出：

尼克 2000 -69

“自我”解释！: self.salary = 2000 , 工资 = -69

# c# - 如何显示基本的 HTML Windows8 Metro 风格 TextBlock？

> ID：11491134
> 
> 赞同：6
> 
> 时间：2012-07-15T10:23:07.983
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我有一个仅包含`<p>`、`<strong>`和标签`<br />`的html 页面。`<a>`我想`TextBlock`在 Windows 8 的 XAML 中显示此内容。有没有办法在`TextBlock`不丢失结构（例如段落）的情况下显示该内容？我不想使用`WebView`，因为`WebView`不能透明。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T10:54:17.257

我正在开发一个开源的 Windows 8 Metro RSS Reader 应用程序，我使用[了 HtmlUtilities.ConvertToText](http://msdn.microsoft.com/en-us/library/windows/apps/windows.data.html.htmlutilities.converttotext)

您可以在此处查看源代码实现[http://metrorssreader.codeplex.com/SourceControl/changeset/view/17913#265003](http://metrorssreader.codeplex.com/SourceControl/changeset/view/17913#265003)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T18:19:57.700

如果您想在 XAMl 中执行此操作，只需添加一个转换器。

```
 public sealed class TextToHtmlConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        if (value is string)
        {
            return HtmlUtilities.ConvertToText(value.ToString());
        }
        else
        {
            return value;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        throw new NotImplementedException();
    }
} 
```

然后在您的 XAML 中添加资源引用。

然后用转换器绑定：

Text="{绑定titleFull,Converter={StaticResource TextToHtmlConverter}}"

# java - 仅将 java 类实例转换为原始类型

> ID：11491139
> 
> 赞同：3
> 
> 时间：2012-07-15T10:24:38.417
> 
> 标签：java, transform, converter, primitive-types, flatten

我想将一个实例从给定的 Java 类“展平”/转换为另一个仅包含原始类型的实例。

对象中还不是基本类型的每个字段也必须递归展平，以便生成的对象包含原始对象的展平视图，仅具有基本类型。

例如，给定以下类：

```
class Element {
  int id_;
  Position position_;
}

class Position {
  int x_;
  int y_;
} 
```

生成的实例将是以下类型：

```
class FlattenedElement {
  int id_;

  int x_;
  int y_;
} 
```

我会期待这样的行为：

```
Element e = new Person ( 42, new Position(0, 0) );
FlattenedElement fe = e.flatten(); 
```

**是否有任何工具/库能够做到这一点？**

还是我需要使用我采用的反射 API 编写自己的扁平化器？

*-- 编辑以下大多数评论 --*

我更改了示例以避免与`String`and混淆`byte`（我不必处理字符串）。

我需要在结果转换中保留数据的语义。输出原始类型数据将直接参与使用 OpenCL 的并行计算，OpenCL 只理解原始数据类型。

换句话说，我需要打破封装，直接操作嵌入在类层次结构中的原始数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:40:19.080

您可以这样做，但您需要第三方库来创建新类，例如 Javaassist。要内省要展平的类，您将使用反射，正如一些用户已经说过的那样。这是我为你写的另一个例子：

```
public static Class flatten( Class classToFlatten ) {

    for ( Field f : classToFlatten.getDeclaredFields() ) {

        Class type = f.getType();
        String name = f.getName();
        int modifiersConfig = f.getModifiers();

        // extract all modifiers here (using the isXXX methods of the Modifier class)
        System.out.print( Modifier.isPrivate( modifiersConfig ) ? "private" : "" );
        System.out.print( " " + type );
        System.out.print( " " + name );
        System.out.println();

        if ( type.isPrimitive() ) {
            // primitive type.
            // does not need to be converted.
            // insert in the new class as it is (using Javaassist).
        } else {

            // no primitive type.
            // needs to be converted and tested.
            // insert in the new class after the conversion (using Javaassist).

            // convert rules...
            switch ( type.getSimpleName() ) {

                case "String":
                    // insert in the new class a array of chars.
                    break;

                // cases to test if the field is a wrapper (Integer, Long, etc.).

                // other rules tha you need here...

            }

            // here you need to use recursion...
            // you can use this method, but you will need to create
            // a new parameter, passing the class that is been built
            // to insert new fields in it (relative to the type that is been
            // reflected)

        }
    }

    // return the new class here and outside the method, use the newInstance
    // method to create new instances of this class
    return null;

} 
```

有了这个，我认为你将能够做你需要的，但我想你为什么需要这个。当你有某种类型的数组会被递归地进行扁平化时，你会遇到一些问题，因为你可能需要“回溯”来解析它们的类型或运行扁平化算法。对于泛型、内部类、方法和各种类成员，您将遇到同样的问题。我并不是说这是不可能的，但它会消耗你很多时间，也许你可以像一些用户已经说过的那样以更简单的方式解决你的问题。好吧，我希望你能做你需要的，如果可能的话我想知道结果！也许您的解决方案可以成为新图书馆的种子！好的，足够的头脑风暴 :D 这里有一些链接。

[Javaassist 库可以在这里下载。](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)

[在这里你可以看到一个简单的教程。](http://www.javaranch.com/journal/200711/Journal200711.jsp#a4)我建议您仅在开始时使用它，因为 Javaassist API 自创建教程以来可能已经改进，因此，在阅读本文后，重构您的代码（如果可能），阅读库文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:37:11.100

好吧，从我的 POV 来看，一种方法是：

```
public class Person {
    String name;
    Atring address;

    public FlattenedPerson flatten() {
        FlattenedPerson fp = new FlattenedPerson(this.name.getBytes(), this.houseNumber, this.address.getStreet.getBytes(), this.address.getTown.getBytes());
        return fp;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T15:14:19.893

你必须使用反射

看看[小样本](https://stackoverflow.com/questions/11468011/investigate-a-data-structure-in-java-with-eclipse/11468385#11468385)，返回字段的名称。

因此，要获取此字段的值，您必须返回`f[i].get(Object)`

# c# - 如何使用 WCF 在同一个项目中从 MSMQ 发送和接收？

> ID：11491143
> 
> 赞同：0
> 
> 时间：2012-07-15T10:25:00.353
> 
> 标签：c#, .net, wcf, msmq

我想使用 WCF 从/向 MSMQ 获取和发送。`FeedWorker`方法将从 MQ（来自 queue1）获取消息并提供给将处理消息的线程，然后将结果保存到`queue2`. `FeedWorker`并且`ProcessCustomer`在同一个项目中。

```
public void FeedWorker()
{
    while(true)
    {
        var msg = GetFromMQ();
        ThreadPool.QueueUserWorkItem(ProcessCustomer, msg);
    }
}
public void ProcessCustomer(object o)
{
    // Do some work
    // ...
    SentToMQ(result);
} 
```

为了实现这一点，我想使用`netMsmqBinding`.

```
namespace Test 
{
    public class WcfService : IWcfService
    {
        public void Get(Customer customer)
        {
            ThreadPool.QueueUserWorkItem(ProcessCustomer, customer);
        }
        public void SaveResult(string result)
        { }
    }

    public void FeedWorker()
    {
        using (var serviceHost = new ServiceHost(typeof(WcfService)))
        {
            serviceHost.Open();
        }
    }

    public void ProcessCustomer(object o)
    {
        // Do some work
        // ...
        WcfServiceClient.SaveResult(result);
    }
} 
```

我觉得我做错了什么。当我这样做时，我无法接收和发送到不同的队列。如何实施？

# assembly - D 内联汇编器：访问静态变量

> ID：11491144
> 
> 赞同：5
> 
> 时间：2012-07-15T10:25:06.593
> 
> 标签：assembly, d, inline-assembly

我在 D 编程语言中使用内联汇编程序访问静态变量时遇到了一些麻烦。文档说我必须访问局部变量

```
mov EAX, var[EBP]; //or mov EAX, var; 
```

和类变量

```
mov EBX, this;
mov EAX, var[EBX]; 
```

但它没有记录如何访问静态变量。这是我的引发错误的代码：

```
module test;

static int A = 1234;

static void SetA()
{
    asm
    {
        mov A, 5432; //compiles, but throws an error
        //tried it with "mov dword ptr [A], 5432; too
    }
} 
```

我真的需要一种可以从汇编程序和 D 访问的整数的“全局存储”方式，我会很高兴有任何帮助（或替代方式）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T10:27:34.767

默认情况下，全局变量放在 D2 中的线程本地存储中。用于`__gshared`声明“经典”静态变量。

这有效：

```
module test;

__gshared int A = 1234;

void SetA()
{
    asm
    {
        mov A, 5432;
    }
}

unittest
{
    SetA();
    assert(A == 5432);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T10:31:15.223

注意：`static`on`A`是多余的，因为它是一个模块级变量。模块级函数也是如此。

在 D 中，模块级变量进入线程本地存储。您必须标记一个变量，就`__gshared`好像您*真的*希望它是全局的一样。在内联汇编中访问 TLS 变量基本上不可能以可移植的方式进行。

做你想做的一种方法：

```
module test;

/*static*/ int A = 1234;

/*static*/ void SetA()
{
    int a;

    asm
    {
        mov a, 5432;
    }

    A = a;
} 
```

编辑：如果您打算`__gshared`，请参阅 Cyber​​Shadow 的答案。:)

# c++ - 发送后立即进行非阻塞 TCP 套接字和刷新？

> ID：11491147
> 
> 赞同：2
> 
> 时间：2012-07-15T10:25:46.173
> 
> 标签：c++, sockets, tcp, nonblocking, flush

我正在为我的应用程序使用 Windows 套接字（winsock2.h）。由于阻塞套接字不允许我控制连接超时，因此我使用的是非阻塞套接字。在发送命令之后，我正在使用关闭命令进行刷新（我必须）。我的超时时间是 50 毫秒，我想知道的是，如果要发送的数据这么大，是否存在只发送一部分数据或什么都不发送的风险？提前致谢...

```
 hSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    u_long iMode=1;
    ioctlsocket(hSocket,FIONBIO,&iMode);
    connect(hSocket, (sockaddr*)(&sockAddr),sockAddrSize);
    send(hSocket, sendbuf, sendlen, 0);
    shutdown(hSocket, SD_BOTH);
    Sleep(50);
    closesocket(hSocket); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T20:44:14.893

> 发送后立即进行非阻塞 TCP 套接字和刷新？

没有刷新 TCP 套接字这样的事情。

> 由于阻塞套接字不允许我控制连接超时

错误的。您可以`select()`在阻塞套接字上使用。

> 我正在使用非阻塞的。

*不合逻辑的推论。*

> 在发送命令之后，我正在使用关闭命令进行刷新（我必须）。

你不必，`shutdown()`也不会冲洗任何东西。

> 我的超时时间是 50 毫秒

为什么？发送数据的时间取决于数据的大小。明显地。使用固定超时进行发送没有任何意义。

> 我想知道的是，如果要发送的数据如此之大，是否存在只发送一部分数据或什么都不发送的风险？

在阻塞模式下，`send()`如果可能，您提供给的所有数据都将被发送。在非阻塞模式下`send()`，如果可能，将发送由返回值表示的数据量。无论哪种情况，如果发送失败，连接将被重置。无论您叠加什么超时机制，都不可能改变其中的任何一个：具体来说，在超时后异步关闭套接字只会导致关闭附加到正在发送的数据中。它*不会*导致发送中止。

您的代码不会通过任何人类已知的代码审查。零错误检查；睡眠完全没有意义；关闭之前关闭是多余的。如果睡眠旨在实现超时，则不会。

> 我想尽可能快地发送数据。

你不能。TCP 实现流量控制。您对此无能为力。您受到接收器的速率限制。

> 另外两种可能的情况是：服务器等待太长时间以接受连接

没有这种情况。客户端可以在服务器调用之前完成连接`accept().`如果您尝试实现比默认值短一分钟的连接超时，请使用`select().`

> 或接收。

您对此无能为力：见上文。

> 所以连接和写入都应该在最多 50 毫秒内完成，因为在我的情况下时间非常重要。

往上看。为需要可变时间的操作实现固定超时是没有意义的。而且 50 毫秒对于连接超时来说太短了。如果这是一个真正的问题，您应该保持连接打开，以便连接延迟只发生一次：事实上，您应该尽可能长时间地保持 TCP 连接打开。

> 我必须刷新写入和读取流

你不能。TCP 中没有任何操作会刷新读取流或写入流。

> 因为服务器不断向我发送不必要的大数据，而且我的互联网连接有限。

另一个*不合逻辑的。*如果服务器向您发送数据，您必须读取它，否则您将停止服务器，这与刷新您自己的写入流没有任何关系。

> 实际上我什至不想要来自服务器的单个字节

厄运。你必须阅读它。[如果你在 BSD Unix 上，你可以关闭用于输入的套接字，这会导致来自服务器的数据被丢弃，但这在 Windows 上不起作用：它会导致服务器重置连接。]

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-15T11:56:57.030

感谢 EJP 和 Martin，现在我创建了第二个线程来检查。同样在我在问题中发布的代码中，我添加了“counter=0;” “发送”行之后的行并删除了关机。它就像我现在想要的那样工作。它永远不会等待超过 50 毫秒 :) 非常感谢

```
unsigned __stdcall SecondThreadFunc( void* pArguments ) 
```

{

```
while(1)
{
    counter++;
    if (counter > 49)
    {
        closesocket(hSocket);
        counter = 0;
        printf("\rtimeout");
    }

    Sleep(1);
}
return 0; 
```

}

# php - 如何将上传的照片发布到墙上？

> ID：11491149
> 
> 赞同：0
> 
> 时间：2012-07-15T10:25:59.517
> 
> 标签：php, facebook, facebook-graph-api

如何将上传的照片发布到用户的墙/提要？

我的应用程序会生成一个包含用户名和一些信息的图像。它看起来像一个证书。我将此图像上传到用户的个人资料，但它没有出现在提要中。所以朋友们看不到。我试图用 -

```
$post = $facebook->api('/me/feed', 'POST', array(...)); 
```

但我意识到，我不能发布 Facebook 托管的照片。但是 Facebook 上有许多应用程序可以生成图像、上传它们并将它们发布到墙上。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:51:46.017

您可以将 facebook 托管的图片发布到用户的墙上。您需要做一个简单的墙贴，并包含`object_attachment`参数，其中包含图片的 id。它记录[在这里](https://developers.facebook.com/docs/reference/api/user/#posts)，靠近表格的底部。

[您可以在这篇](http://developers.facebook.com/blog/post/526/)博文中找到更多详细信息。它还包含以下示例：

```
<?php
  $app_id = "APP_ID";
  $app_secret = "APP_SECRET";
  $post_login_url = "POST_AUTH_REDIRECT_URL";
  $photo_id = "PHOTO_ID";
  $wall_message = "MESSAGE_FOR_POST";
  $wall_link = "LINK_TO_POST";
  $user_id = "USER_ID";

  $code = $_REQUEST["code"];

  // Obtain the access_token with publish_stream permission 
  if (!$code) {
    $dialog_url= "http://www.facebook.com/dialog/oauth?"
      . "client_id=" .  $app_id
      . "&redirect_uri=" . urlencode( $post_login_url)
      .  "&scope=publish_stream";
    echo("<script>top.location.href='" . $dialog_url
      . "'</script>");
  } else {
    $token_url="https://graph.facebook.com/oauth/access_token?"
      . "client_id=" . $app_id
      . "&redirect_uri=" . urlencode( $post_login_url)
      . "&client_secret=" . $app_secret
      . "&code=" . $code;
    $response = file_get_contents($token_url);
    $params = null;
    parse_str($response, $params);
    $access_token = $params['access_token'];

    // POST to Graph API feed endpoint, which is the user's Wall
    $graph_url= "https://graph.facebook.com/" . $user_id . "/feed?"
      . "message=" . urlencode($wall_message)
      . "&link=" . urlencode($wall_link)
      . "&object_attachment=" . $photo_id
      . "&method=POST"
      . "&access_token=" .$access_token;

    echo '<html><body>';
    echo file_get_contents($graph_url);
    echo '</body></html>';
  }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:36:37.483

正如您所说，您不能将 Facebook 托管的图像发布回 Facebook。在我看来，你有两个选择。

1.  将图像下载到*您的*服务器并再次将其上传到用户提要。

2.  只需在用户供稿上发布指向该 photo_object 的链接。Facebook 的爬虫将成功地从该链接中提取相关数据，您仍然可以预览帖子中的图像。

当您使用 photo_id 查询 Graph API -
示例 - [https://graph.facebook.com/10151812415573306 （可口可乐](https://graph.facebook.com/10151812415573306)[页面](https://www.facebook.com/cocacola)上的公开照片）时，您会获得有关该图像的一些信息。数据看起来像这样 -

```
    {
      "id": "10151812415573306",
      “从”： {
        “名称”：“可口可乐”，
        “类别”：“食品/饮料”，
        “id”：“40796308305”
      },
      "图片": "https://fbcdn-photos-a.akamaihd.net/hphotos-ak-ash3/521913_10151812415573306_523748375_s.jpg",
      “来源”：“https://fbcdn-sphotos-a.akamaihd.net/hphotos-ak-ash3/521913_10151812415573306_523748375_n.jpg”，
      “身高”：332，
      “宽度”：500，
       ...
      "链接": "https://www.facebook.com/photo.php?fbid=10151812415573306&set=a.99394368305.88399.40796308305&type=1",
      "图标": "https://s-static.ak.facebook.com/rsrc.php/v2/yz/r/StEh3RhPvjk.gif",
      "created_time": "2012-07-09T12:00:41+0000",
      ...

```

您需要在用户提要上发布的参数是`link`参数 -
`https://www.facebook.com/photo.php?fbid=10151812415573306&set=a.99394368305.88399.40796308305&type=1`

当您在用户提要/墙上发布该 URL 时 - 该帖子将包含图像预览和照片本身的链接（在 Facebook 内）。

# mysql - MYSQL 循环查询

> ID：11491158
> 
> 赞同：0
> 
> 时间：2012-07-15T10:28:02.730
> 
> 标签：mysql

我正在尝试编写一个查询，但它为整个循环提供了相同的值。我每次都必须为 $ckxf[usercookie] 获得不同的值，我做错了什么。

```
$queryxyzzy12=("SELECT * FROM visitorcookiesbrowsing ORDER by id ASC");
    $resultxyzzy23=mysql_query($queryxyzzy12) or die(mysql_error());

    //var_dump($ckxf);
    while($ckxf = mysql_fetch_assoc($resultxyzzy23)){
    $querycrtx=("SELECT * FROM cart WHERE userkey='$ckxf[usercookie]' ORDER by datebegan  DESC");
    $resultcrtx=mysql_query($querycrtx) or die(mysql_error());
    $numcrtx=mysql_numrows($resultcrtx);
    $ixxy=0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:31:31.190

您知道您只能在一个查询中执行此操作：

```
SELECT * FROM visitorcookiebrowsing v 
LEFT JOIN cart c on c.userkey=v.usercookie 
ORDER by v.id ASC, c.datebegan  DESC 
```

了解 SQL 的强大功能：）

# html - TH 不覆盖表格边框 (CSS+HTML)

> ID：11491160
> 
> 赞同：0
> 
> 时间：2012-07-15T10:28:19.233
> 
> 标签：html, css, html-table, border

我希望表格的标题有一个红色的实线边框，而表格的其余部分有一个黑色的虚线边框。

使用下面的代码，一切都是正确的，但 TH 的左侧和右侧是黑色点。有没有办法覆盖`<table>`TH 样式声明中的边界？

这就是我想要实现的目标：

![http://s13.postimage.org/5bboz4vef/target.png](../Images/9d765b4392fe8e762d49a6c4a702d0a0.png)

```
<style type="text/css">
table {
    border-style:none dotted dotted dotted;
    border-collapse: collapse;
}
table th {
    border: 2px solid red;
}
</style>

<table >
  <thead>
   <tr>
    <th>title 1</th>
    <th>title 2</th>
    <th>title 3</th>
   </tr>
  </thead>
  <tbody>
   <tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
   </tr>
   <tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
   </tr>
   <tr>
    <td>text</td>
    <td>text</td>
    <td>text</td>
   </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:50:40.617

如果可以接受，一个简单的解决方案是将`th`边框宽度设置为等于或大于`table`边框宽度。例如，添加

```
table { border-width: 2px; } 
```

使他们平等。在您的示例中，宽度是初始值，`medium`通常在浏览器中映射为 3px 或 4px。

`table`否则，需要不同的策略（请参阅 Zolthan Toth 的回答），即元素上没有设置左右边框的策略。

原因是根据 [边框冲突解决][1] 规则，较宽的边框获胜（对于等宽边框，`solid`节拍`dotted`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:37:55.590

试试这个 - [http://jsfiddle.net/eaTLp/](http://jsfiddle.net/eaTLp/)

```
table {
    border-style:none none dotted;
    border-collapse: collapse;
}

table th {
    border: 2px solid red;
}

table td:first-child {
    border-left: dotted;
}

table td:last-child {
    border-right: dotted;
}
​ 
```

你只给表格底部的虚线边框。在左侧和右侧，您通过and选择`<td>`每行中的第一个和最后一个，并分别为它们分配左右边框。`:first-child``:last-child`

# python - 限制 tk 小部件上的条目

> ID：11491161
> 
> 赞同：2
> 
> 时间：2012-07-15T10:28:32.973
> 
> 标签：python, regex, tkinter, python-2.7

我很难找到一种方法来限制条目小部件的条目长度，我想将其限制为 20 个字符，即当我单击一个序列或另一个时，我希望能够对其进行编辑但保持在 20 个字符内限制。为了保持代码简洁，我应该使用正则表达式、循环还是使用事件检查条目？

这是我的代码：

```
import Tkinter
from Tkinter import *
import tkFileDialog

root = Tkinter.Tk()

edit1    =StringVar()
edit2    =StringVar()
s = StringVar()

s = "GATACACGCGCGCGTATATATTACGCGCGCGATACA"

lb01=Label(root,text="sequence1")
lb01v=Entry(root,textvariable=edit1,width=20)
lb01v.delete(0, END)
lb01v.insert(0, s[6:20])

lb01.grid(sticky=W,row=1,column=1)
lb01v.grid(row=1,column=2)

lb02=Label(root,text="sequence2")
lb02v=Entry(root,textvariable=edit2,width=20)
lb02v.delete(0, END)
lb02v.insert(0, s[0:6])

lb02.grid(sticky=W,row=2,column=1)
lb02v.grid(row=2,column=2)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:32:42.220

好的，我确实在一小段测试代码上尝试了跟踪变量，这正是我正在寻找的！我喜欢你可以在 Python 中如此轻松地进行原型制作的事实；）

```
def main():
    pass

if __name__ == '__main__':
    main()

from Tkinter import *

def callback(sv):
    c = sv.get()[0:9]
    print "c=" , c
    sv.set(c)

root = Tk()
sv = StringVar()
sv.trace("w", lambda name, index, mode, sv=sv: callback(sv))
e = Entry(root, textvariable=sv)
e.pack()
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-15T07:27:59.533

我知道现在添加任何答案为时已晚，只是找到了一种更简单的方法来表示 Wabara 的回答。如果您需要多个条目限制并且每个条目限制为用户定义的长度限制，这将有所帮助。这是在 Python 3.6.5 上运行的代码：

```
def main():
    pass

if __name__ == '__main__':
    main()

from tkinter import *

def limit_entry(str_var,length):
    def callback(str_var):
        c = str_var.get()[0:length]
        str_var.set(c)
    str_var.trace("w", lambda name, index, mode, str_var=str_var: callback(str_var))

root = Tk()

abc = StringVar()
xyz = StringVar()

limit_entry(abc,3)
limit_entry(xyz,5)

e1 = Entry(root, textvariable=abc)
e2 = Entry(root, textvariable=xyz)

e1.pack()
e2.pack()
root.mainloop() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T11:57:33.143

最简单的解决方案是对变量进行跟踪。当跟踪触发时，检查值的长度，然后删除任何超过限制的字符。

如果您不喜欢该解决方案，Tkinter 还具有内置工具来对条目小部件进行输入验证。这是 Tkinter 的一个记录不足的功能。例如，请参阅[我](https://stackoverflow.com/a/4140988/7432)对 Python/Tkinter问题的回答[：交互式验证条目小部件内容](https://stackoverflow.com/q/4140437/7432)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-06-30T20:09:04.653

我将从制作一个字母开始测量。字母表是一个字符串，有 26 个字母，这意味着它对我们来说太长了。我们只需要 20 个字母，所以我们的输出应该是“A”到“T”。我会定义一个函数来实现它，并通过它转储每个我希望减少到 20 个字符或更少的字符串。我正在以这样的方式制作下面的代码，它将任何被称为的字符串作为输入，它将输入并将其处理为长度仅为 20 个字符...

```
def twenty(z):
    a = z[0:20]
    return a

alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" 
```

## 因此，要执行我们新制作的代码，我们只需要调用 print 20 命令，并在括号中使用我们想要剪切为 20 个字符的变量。

```
print twenty(alphabet)

-----------------------------------------------------------------
OUTPUT:
ABCDEFGHIJKLMNOPQRST 
```

所以你看，它奏效了，我们将整个字母输入到程序中，它把字符串减少到只有 20 个字母。现在每次在你的代码中你想将文本减少到 20 个字母，只需运行命令 20（变量），它会确保你没有更多的字母。

解释：def 20 是定义一个具有一个输入的函数，您可以通过键入二十（变量）来一遍又一遍地调用它，下一行是 a = z[0:20] 意思是调用变量“a”等于来自的输入位置 0 到位置 20，不要担心任何过去的事情。return 命令是您从 def 函数获取输出的方式。任何时候你创建一个 def 函数，你都应该用一行结束它。

# php - 通过正则表达式匹配数字字符串

> ID：11491166
> 
> 赞同：-3
> 
> 时间：2012-07-15T10:28:56.750
> 
> 标签：php, regex, preg-match

我不太擅长正则表达式。有人可以帮我吗？

```
$string = '1,2,3,4,7,8,10,11,14,17,18,19,22,23,26,29,30';

preg_match('/(\d*,*)(2,)(\d*,*)(4,)(\d*,*)(8)/', $string); 
```

一直以来，这个字符串必须是字符串，不能是数组或其他任何东西。假设我正在寻找数字 2、4、8（但不是 18）。我正在使用 PHP 和`preg_match`函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:13:56.413

这是数组的解决方案：

```
// explode a string to array of numbers
$haystack = explode(',', $string);
// define numbers to search
$needle = array(2,4,48);
// define found elements
$found = array_intersect($needle, $haystack);
// print found elements
if ($found) {
    print 'Found: ' . implode(',', $found);
} 
```

和 preg_match 的解决方案：

```
// add "," to the beginning and string end
$string = ",$string,";
// define pattern to search (search for 14, 19 or 20)
$pattern = '/,14|19|20,/';
// if pattern is found then display Hello
if (preg_match($pattern, $string)) {
    print 'Hello';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:40:57.820

简单的：

```
<?php
    $string = '1,2,3,4,7,8,10,11,14,17,18,19,22,23,26,29,30';
    $search = array(2, 4, 8);
    $parts = explode(",", $string);
    array_flip($parts);
    foreach($search as $n){
        if(isset($parts[$n])){
            echo ("found ".$n."<br/>");
        }
    }
?> 
```

编辑：通过简单的“hack”，您现在可以使用“easy” preg_match()：

```
<?php
    $string = '1,2,3,4,7,8,10,11,14,17,18,19,22,23,26,29,30';
    $string = ','.$string.',';
    $search = array("2", "4", "8");
    foreach($search as $n){
        if(preg_match("#,$n,#", $string)){
            echo "found $n <br/>";
        }
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T10:47:43.653

```
$string = '1,2,3,4,7,8,10,11,14,17,18,19,22,23,26,29,30';
$search = array('2', '4', '8'); # or $search = explode(',', '2,4,8');

foreach($search as $number)
    if (strpos($string, $number) === false)
        echo $number, ' not found!'; 
```

> 如果您只想检查一个字符串是否包含在另一个字符串中，请不要使用 preg_match()。请改用 strpos() 或 strstr() ，因为它们会更快。

# .net - wpf：根据选中的单选按钮更改 Listview 的样式

> ID：11491167
> 
> 赞同：0
> 
> 时间：2012-07-15T10:29:00.667
> 
> 标签：.net, wpf, wpf-controls

我有一个 Listview 和一组单选按钮（两个单选按钮）。我想根据我检查的单选按钮更改 ListView 的样式和 ListViewItem 的样式。如果可能的话，我会避免代码隐藏。

Radiobutton 1 -> ListView 显示 ListStyle1 和 ListViewItem 显示 ItemStyle1 Radiobutton 2 -> ListView 显示 ListStyle2 和 ListViewItem 显示 ItemStyle2

我发现了一个使用组合框而不是单选按钮的类似示例，但在我的情况下我无法使用它，因为我无法引用“选定项目”。（[我可以在 WPF 中的样式之间动态切换吗？](https://stackoverflow.com/questions/1138339/can-i-dynamically-switch-between-styles-in-wpf)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:40:42.167

这可能看起来很糟糕，但我推荐一个列表（重新定义它们的样式和模板）来模拟样式的选择。

您可以使用（或类似的东西）定义元素的组织：

```
 <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel  Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <RadioButton IsChecked="{Binding Mode=TwoWay, Path=IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem, Mode=FindAncestor}}">
                    <TextBlock Text="{Binding StyleName}"/>
                </RadioButton>
            </DataTemplate>
        </ListBox.ItemTemplate> 
```

因此，您只需为 ItemsSource 创建一个自定义类。除了自定义绑定 SelectedValue 或 SelectedItem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:33:27.663

为什么不使用 a`DataTrigger`来设置基于`RadioButton`选中的样式？

```
<Style x:Key="MyListViewStyle" TargetType="{x:Type ListView}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding ElementName=RadioButton1, Path=IsChecked}" Value="True">
            <!-- Your Style Setters here -->
            <Setter PropertyName="ItemTemplate" Value="{StaticResource ItemTemplate1}" />
        </DataTrigger>
        <DataTrigger Binding="{Binding ElementName=RadioButton2, Path=IsChecked}" Value="True">
            <!-- Your Style Setters here -->
            <Setter PropertyName="ItemTemplate" Value="{StaticResource ItemTemplate2}" />
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

也就是说，将 a`ListBox`设置为显示为`RadioButtons`. 当我想用 显示项目列表`RadioButtons`但仍想保持`ListBox`选择行为时，我经常这样做。

```
<Style x:Key="RadioButtonListBoxStyle" TargetType="{x:Type ListBox}">
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="KeyboardNavigation.DirectionalNavigation" Value="Cycle" />
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ListBoxItem}" >
                <Setter Property="Margin" Value="2, 2, 2, 0" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Border Background="Transparent">
                                <RadioButton
                                    Content="{TemplateBinding ContentPresenter.Content}" VerticalAlignment="Center"
                                    IsChecked="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent},Mode=TwoWay}"/>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

示例使用：

```
<ListBox ItemsSource="{Binding MyOptions}"
         SelectedItem="{Binding SelectedOption}"
         Style="{StaticResource RadioButtonListBoxStyle}" /> 
```

# c# - 正负数 int 值的正则表达式，以空格分隔

> ID：11491169
> 
> 赞同：1
> 
> 时间：2012-07-15T10:29:03.350
> 
> 标签：c#, asp.net, .net, regex

为了

```
positive number RegExp is ^[0-9]+$
negative number is ^-[0-9]+$ 
```

但是如何在数字之间添加空格并首先接受任何数字，无论它是正数还是负数

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T11:47:10.003

我可以给你一个适用于 Ruby 的模式（抱歉，我已经有一段时间没有使用 C#了）。如果与`scan`函数一起使用，此模式将捕获数字。我确信您可以在 C# 中对捕获和组进行一些类似的操作：

```
pattern = /^\s*(
   [\-\+]?
   [0-9]+
 )
 (
   (\s+
     [\-\+]?
     [0-9]+
   )
 )*$/x

xs = ["9", "+9", "-9", "87", "+87", "-87", "9  87", "9 +87", "9  -87", "+9 87", 
"-9 87", "+9 +87", "-9 +87", "-9 87", "9 +9 -9", "9 +9  87", "9 +9  +87", 
"9 +9  -87", "9 +9 654", "9 +9 +654", "9 +9 -654", "9 -9  87", "9 -9  +87", 
"9 -9  -87", "9 -9 654", "9 -9 +654", "9 -9 -654", "9  87  +87", "9  87  -87", 
"9  87 654", "9  87 +654", "9  87 -654", "9  +87  -87", "9  +87 654", 
"9  +87 +654", "9  +87 -654", "9  -87 654", "9  -87 +654", "9  -87 -654", 
"9 654 +654", "9 654 -654", "9 +654 -654", "+9 -9  87", "+9 -9  +87", 
"+9 -9  -87", "+9 -9 654", "+9 -9 +654", "+9 -9 -654", "+9  87  +87", 
"+9  87  -87", "+9  87 654", "+9  87 +654", "+9  87 -654", "+9  +87  -87", 
"+9  +87 654", "+9  +87 +654", "+9  +87 -654", "+9  -87 654", "+9  -87 +654", 
"+9  -87 -654", "+9 654 +654", "+9 654 -654", "+9 +654 -654", "-9  87  +87", 
"-9  87  -87", "-9  87 654", "-9  87 +654", "-9  87 -654", "-9  +87  -87", 
"-9  +87 654", "-9  +87 +654", "-9  +87 -654", "-9  -87 654", "-9  -87 +654", 
"-9  -87 -654", "-9 654 +654", "-9 654 -654", "-9 +654 -654", " 87  +87  -87", 
" 87  +87 654", " 87  +87 +654", " 87  +87 -654", " 87  -87 654", 
" 87  -87 +654", " 87  -87 -654", " 87 654 +654", " 87 654 -654", 
" 87 +654 -654", " +87  -87 654", " +87  -87 +654", " +87  -87 -654", 
" +87 654 +654", " +87 654 -654", " +87 +654 -654", " -87 654 +654", 
" -87 654 -654", " -87 +654 -654", "654 +654 -654"]

xs.each{|x| printf("%15s: %s\n", x, x.scan(pattern).inspect) } 
```

结果是：

```
 9: ["9"]
                 +9: ["+9"]
                 -9: ["-9"]
                 87: ["87"]
                +87: ["+87"]
                -87: ["-87"]
              9  87: ["9", "87"]
              9 +87: ["9", "+87"]
             9  -87: ["9", "-87"]
              +9 87: ["+9", "87"]
              -9 87: ["-9", "87"]
             +9 +87: ["+9", "+87"]
             -9 +87: ["-9", "+87"]
              -9 87: ["-9", "87"]
            9 +9 -9: ["9", "+9", "-9"]
           9 +9  87: ["9", "+9", "87"]
          9 +9  +87: ["9", "+9", "+87"]
          9 +9  -87: ["9", "+9", "-87"]
           9 +9 654: ["9", "+9", "654"]
          9 +9 +654: ["9", "+9", "+654"]
          9 +9 -654: ["9", "+9", "-654"]
           9 -9  87: ["9", "-9", "87"]
          9 -9  +87: ["9", "-9", "+87"]
          9 -9  -87: ["9", "-9", "-87"]
           9 -9 654: ["9", "-9", "654"]
          9 -9 +654: ["9", "-9", "+654"]
          9 -9 -654: ["9", "-9", "-654"]
         9  87  +87: ["9", "87", "+87"]
         9  87  -87: ["9", "87", "-87"]
          9  87 654: ["9", "87", "654"]
         9  87 +654: ["9", "87", "+654"]
         9  87 -654: ["9", "87", "-654"]
        9  +87  -87: ["9", "+87", "-87"]
         9  +87 654: ["9", "+87", "654"]
        9  +87 +654: ["9", "+87", "+654"]
        9  +87 -654: ["9", "+87", "-654"]
         9  -87 654: ["9", "-87", "654"]
        9  -87 +654: ["9", "-87", "+654"]
        9  -87 -654: ["9", "-87", "-654"]
         9 654 +654: ["9", "654", "+654"]
         9 654 -654: ["9", "654", "-654"]
        9 +654 -654: ["9", "+654", "-654"]
          +9 -9  87: ["+9", "-9", "87"]
         +9 -9  +87: ["+9", "-9", "+87"]
         +9 -9  -87: ["+9", "-9", "-87"]
          +9 -9 654: ["+9", "-9", "654"]
         +9 -9 +654: ["+9", "-9", "+654"]
         +9 -9 -654: ["+9", "-9", "-654"]
        +9  87  +87: ["+9", "87", "+87"]
        +9  87  -87: ["+9", "87", "-87"]
         +9  87 654: ["+9", "87", "654"]
        +9  87 +654: ["+9", "87", "+654"]
        +9  87 -654: ["+9", "87", "-654"]
       +9  +87  -87: ["+9", "+87", "-87"]
        +9  +87 654: ["+9", "+87", "654"]
       +9  +87 +654: ["+9", "+87", "+654"]
       +9  +87 -654: ["+9", "+87", "-654"]
        +9  -87 654: ["+9", "-87", "654"]
       +9  -87 +654: ["+9", "-87", "+654"]
       +9  -87 -654: ["+9", "-87", "-654"]
        +9 654 +654: ["+9", "654", "+654"]
        +9 654 -654: ["+9", "654", "-654"]
       +9 +654 -654: ["+9", "+654", "-654"]
        -9  87  +87: ["-9", "87", "+87"]
        -9  87  -87: ["-9", "87", "-87"]
         -9  87 654: ["-9", "87", "654"]
        -9  87 +654: ["-9", "87", "+654"]
        -9  87 -654: ["-9", "87", "-654"]
       -9  +87  -87: ["-9", "+87", "-87"]
        -9  +87 654: ["-9", "+87", "654"]
       -9  +87 +654: ["-9", "+87", "+654"]
       -9  +87 -654: ["-9", "+87", "-654"]
        -9  -87 654: ["-9", "-87", "654"]
       -9  -87 +654: ["-9", "-87", "+654"]
       -9  -87 -654: ["-9", "-87", "-654"]
        -9 654 +654: ["-9", "654", "+654"]
        -9 654 -654: ["-9", "654", "-654"]
       -9 +654 -654: ["-9", "+654", "-654"]
       87  +87  -87: ["87", "+87", "-87"]
        87  +87 654: ["87", "+87", "654"]
       87  +87 +654: ["87", "+87", "+654"]
       87  +87 -654: ["87", "+87", "-654"]
        87  -87 654: ["87", "-87", "654"]
       87  -87 +654: ["87", "-87", "+654"]
       87  -87 -654: ["87", "-87", "-654"]
        87 654 +654: ["87", "654", "+654"]
        87 654 -654: ["87", "654", "-654"]
       87 +654 -654: ["87", "+654", "-654"]
       +87  -87 654: ["+87", "-87", "654"]
      +87  -87 +654: ["+87", "-87", "+654"]
      +87  -87 -654: ["+87", "-87", "-654"]
       +87 654 +654: ["+87", "654", "+654"]
       +87 654 -654: ["+87", "654", "-654"]
      +87 +654 -654: ["+87", "+654", "-654"]
       -87 654 +654: ["-87", "654", "+654"]
       -87 654 -654: ["-87", "654", "-654"]
      -87 +654 -654: ["-87", "+654", "-654"]
      654 +654 -654: ["654", "+654", "-654"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:32:52.770

这可以工作：

```
^[\-\+\s]*[0-9\s]+$ 
```

# vb.net - 在表单上使用 Httpwebrequest 获取用于抓取的表时出现意外行为

> ID：11491170
> 
> 赞同：0
> 
> 时间：2012-07-15T10:29:11.567
> 
> 标签：vb.net, httpwebrequest, html-agility-pack

我正在尝试抓取一个用 php 编写的网站，以从特定表中提取一些信息。这是场景。

在登录页面上，有一个表单可以从用户那里获取查询并基于该搜索结果。如果我忽略这些字段并单击“提交”，它将产生整个结果（这是我感兴趣的）。在我不知道 HTTPWebRequest 类之前，我只是将 URL 传递给 HtmlAgilityPack 库中的 Htmlweb.load(URL) 方法，显然不是要走的路。

然后我搜索了 HTTPWebRequest 并找到了一个类似这样的示例

```
 Dim cookies As New CookieContainer
    Dim postData As String = "postData obtained using live httpheaders pluging in firefox"
    Dim encoding As New UTF8Encoding
    Dim byteData As Byte() = encoding.GetBytes(postData)

    Dim postRequest As HttpWebRequest = DirectCast(WebRequest.Create("URL"), HttpWebRequest)
    postRequest.Method = "POST"
    postRequest.KeepAlive = True
    postRequest.CookieContainer = cookies
    postRequest.ContentType = "application/x-www-form-urlencoded"
    postRequest.ContentLength = byteData.Length
    postRequest.Referer = "Referer Page"
    postRequest.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; ru; rv:1.9.2.3) Gecko/20100401 Firefox/4.0 (.NET CLR 3.5.30729)"

    Dim postreqstream As Stream = postRequest.GetRequestStream()
    postreqstream.Write(byteData, 0, byteData.Length)
    postreqstream.Close()
    Dim postresponse As HttpWebResponse

    postresponse = DirectCast(postRequest.GetResponse(), HttpWebResponse)
    cookies.Add(postresponse.Cookies)
    Dim postreqreader As New StreamReader(postresponse.GetResponseStream())

    Dim thepage As String = postreqreader.ReadToEnd 
```

现在，当我以 vb 形式将 page 变量输出到浏览器时，我可以看到我想要的页面（包含表格）。此时我只是像这样将该页面的 URL 传递给 htmlagilitypack

```
 Dim web As New HtmlAgilityPack.HtmlWeb()
    Dim htmlDoc As HtmlAgilityPack.HtmlDocument = web.Load("URL")
    Dim tabletag As HtmlNodeCollection = htmlDoc.DocumentNode.SelectNodes("//table")
    Dim tablenode As HtmlNode = htmlDoc.DocumentNode.SelectSingleNode("//table[@summary='List of services']")

    If Not tabletag Is Nothing Then

        Console.WriteLine("YES")

    End If 
```

但是 tabletag 变量什么都不是。我想知道我哪里出错了？还有是否可以直接从 httpwebrespone 获取 URL，以便我可以传递给 web.load 方法？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T19:36:02.123

如果您想要的内容是通过 JavaScript 构建的，那么您无法通过 HtmlAgilityPack Load 方法或任何简单的 URL 加载器客户端（如 WebRequest）运行 JavaScript。他们不处理，也不像浏览器那样与网页交互。否则，您可以像这样直接从流中加载：

```
Dim htmlDoc As New HtmlAgilityPack.HtmlDocument
htmlDoc.Load(postresponse.GetResponseStream()) 
```

第一个建议：您可以在 WebBrowser 中加载表单页面 URL，然后设法填写表单并单击提交按钮，以编程方式通过 DOM 访问 HTMLDocument。更多信息在这样的[帖子](https://stackoverflow.com/questions/580052/set-value-of-a-textarea-inside-a-webbrowser-control-c-net)和[这个](https://stackoverflow.com/questions/1161207/how-do-i-simulate-a-click-event-in-a-webbrowser-control-net)。

第二个建议：当您不想在屏幕上使用视觉事件驱动控件时，或者在最坏的情况下，当您想在后台线程中操作网页时，WebBrowser 处理起来会有些棘手。在这种情况下，您可以在此处和[此处使用](https://stackoverflow.com/questions/4269800/webbrowser-control-in-a-new-thread)[STAThread 解决方案](https://stackoverflow.com/questions/1251491/multithreading-webbrowser-control-c-sharp-sta)，或者使用称为无头浏览器（如 Selenium 或 HtmlUnit、WatiN）之一，并使用其 DOM 访问权限执行相同操作。

# c# - 如何为作为 ListView DataTemplate 一部分的数据网格设置 CellEditEnding 事件？

> ID：11491173
> 
> 赞同：2
> 
> 时间：2012-07-15T10:29:43.843
> 
> 标签：c#, wpf, events, listview, datagrid

我在设置 datagrid 事件时遇到问题。
我想使用以下事件在 ListView 中注册数据网格：
**CellEditEnding="dataGridInstallationProperties_CellEditEnding"**
但是，由于我动态设置了此数据网格的 DataContext，因此应用程序会抛出**NulleferenceException**

有没有办法在列表视图中获取这个数据网格集合，并在 C# 中为每个数据网格以编程方式设置这个事件？

下面是我的 xaml ：

```
<ListView x:Name="listViewInstallProperties"
        Height="Auto"
        Width="Auto"
        ItemsSource="{Binding InstallPackage.Features.FeaturesList}"
        BorderBrush="{x:Null}" Foreground="{x:Null}"
        Background="{x:Null}">
<ListView.Resources>
    <DataTemplate x:Key="ExpanderInstallPropsItemTemplate">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Expander x:Name="expanderInstallationProperties" Header="{Binding DisplayName}"
            Visibility="{Binding Path=IsSelected, Converter={StaticResource boolToVis}, Mode=TwoWay}"
            Grid.Column="0" HorizontalAlignment="Left"
                  Margin="0,0,0,-0.001"
                  d:LayoutOverrides="Height, GridBox" Width="600">
            <DataGrid x:Name="dataGridInstallationProperties"  
                     CellEditEnding="dataGridInstallationProperties_CellEditEnding"
                CanUserAddRows="False" AutoGenerateColumns="False"
                ItemsSource="{Binding Path=Properties}"
                Margin="0" RenderTransformOrigin="-1.6,-1.231" Background="White"
                VerticalAlignment="Stretch"
                HorizontalAlignment="Stretch" VerticalContentAlignment="Top"
                d:LayoutOverrides="GridBox" BorderBrush="{x:Null}" RowBackground="{x:Null}">
                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding Description}"
                                        Header="Property"  IsReadOnly="True"/>
                    <DataGridTextColumn Binding="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                                        Header="Value" />
                    <DataGridTemplateColumn Header="Restore"
                                        CellTemplate="{StaticResource RestoreDefaultPropertyButtonTemplate}" />
                </DataGrid.Columns>
            </DataGrid>
        </Expander>
        </ScrollViewer>
    </DataTemplate>
</ListView.Resources>
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Style.Triggers>
            <Trigger Property="IsSelected"
                Value="True">
                <Setter Property="Background"
                    Value="{x:Null}" />
                <Setter Property="BorderBrush"
                    Value="{x:Null}" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ListView.ItemContainerStyle>
<ListView.View>
    <GridView>
        <GridViewColumn Header="Extend The Feature To Get Its Related Properties" CellTemplate="{StaticResource ExpanderInstallPropsItemTemplate}" />
    </GridView>
</ListView.View> 
```

谢谢 ！

# javascript - Code is taking effect when it shouldn't be

> ID：11491177
> 
> 赞同：1
> 
> 时间：2012-07-15T10:30:53.257
> 
> 标签：javascript, jquery

I have a function where if the user clicks on a button, it will display a value in the textbox and it will perform a trigger to another function after a '#btn' button is clicked:

```
function addwindow(numberAnswer, gridValues, btn) { 
    $('#mainNumberAnswerTxt').val(numberAnswer).data('data-ignore',true);
    $('#btn'+gridValues).trigger('click');       
 } 
```

Now what I want to do is that:

1.  if the user clicked on the "Add" button, then display the number from the "Number of Answers" column into the textbox or in other words perform this from the `addwindow()` function:

    `$('#mainNumberAnswerTxt').val(numberAnswer).data('data-ignore',true);`

2.  If the user has clicked on a `#btn+gridValues` button, then display the number in the textbox of the number of buttons which are currently turned on or in other words perform this code:

    `if ($('#mainNumberAnswerTxt').data('data-ignore') != true) { $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : 0); }`

The problem is that step 1 works fine, it does display the number from the "Number of Answers" column in the textbox after the user has clicked on the "Add" button.

The problem is step 2, it is not displaying the correct number on how many buttons are currently turned on after the user has clicked on the `#btn+gridValues` button.It just doesn't change the number in the textbox.

Does anyone know why this is happening and how thi can be fixed?

DEMO:

Here is a [demo](http://helios.hud.ac.uk/u0867587/Mobile_app/Text14.php) of the application. Please follow the steps below:

Step 1: On left hand side you will see a green plus button, click on it and it opens up a modal window. Step 2: In modal window there is a search bar, type in "AAA" and submit search, you will see a bunch of rows appear. Step 3: In the last row, you see under "Number of Answer" colum that it contains the number 4, click on the "Add" button within this row, the modal window will close.

You will see that the textbox displays the number 4 in the textbox which is fine as that was the number within the row under the "Number of Answers" column when you added the row.

But below is the problem:

Step 4: If you click on the "Open Grid" link and select button 3, you will see the letter buttons below change to A-C with only letter "B" turned on.

In the textbox it should display number 1 as only 1 button is turned on, but it doesn't display this number and that is the problem I am having.

How can this problem be fixed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:57:26.047

The problem comes from the fact taht you're setting the data-attribute to false on the `$('#mainNumberAnswerTxt')` but you're checking against the inputs (`this` in the click).

One solution would be to do the following test `if ($('#mainNumberAnswerTxt').attr('data-ignore') != true)`

**EDIT**

To ensure that the ignore process execute only once (when the grid is reloaded after the modal), you'll have to change what's inside the block after the test:

```
if ($('#mainNumberAnswerTxt').data('ignore') != true) {
    $('.answertxt', context).val(context.find('.answerBtnsOn').length > 0 ? context.find('.answerBtnsOn').length : 0);
} else {
    /*reset the ignore flag*/
    $('#mainNumberAnswerTxt').data('ignore',false);
} 
```

**EDIT2**

The main problem is that your reaffecting the `$('#mainNumberAnswerTxt').val(numberAnswer)` after setting it. Your trying to ignore it through the `ignore`attribute.

What i would adivse, would be to remove every occurence to that attribute and to change the following function

```
function addwindow(questionText,textWeight,numberAnswer,gridValues,reply,btn) {
    var answers = $.map(btn.split(''),function(chr){ return "#answer"+chr; }).join(', ');
    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') {
        var myNumbers = {};
        myNumbers["A-C"] = "3";
        myNumbers["A-D"] = "4";
        myNumbers["A-E"] = "5";
        myNumbers["A-F"] = "6";
        myNumbers["A-G"] = "7";
        gridValues = myNumbers[gridValues];
        $('#mainNumberAnswerTxt').show();
        $('#mainNumberAnswerTxt').val(numberAnswer).data('ignore',true);
        $('#mainGridTxt').val(gridValues).parent().append($('.optionTypeTbl'));
        $('#btn'+gridValues).trigger('click');
        $('.answers.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff');
        $(answers).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff');
    }
    $.modal.close();
    return false;
} 
```

to :

```
function addwindow(questionText,textWeight,numberAnswer,gridValues,reply,btn) {
    var answers = $.map(btn.split(''),function(chr){ return "#answer"+chr; }).join(', ');
    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') {
        var myNumbers = {};
        myNumbers["A-C"] = "3";
        myNumbers["A-D"] = "4";
        myNumbers["A-E"] = "5";
        myNumbers["A-F"] = "6";
        myNumbers["A-G"] = "7";
        gridValues = myNumbers[gridValues];
        $('#mainNumberAnswerTxt').show();
        $('#mainGridTxt').val(gridValues).parent().append($('.optionTypeTbl'));
        $('#btn'+gridValues).trigger('click');
        /* moved the following line below the click simulation, 
           hence its value will be changed regardless of what happened during the click simulation*/
        $('#mainNumberAnswerTxt').val(numberAnswer);
        $('.answers.answerBtnsOn').removeClass('answerBtnsOn').addClass('answerBtnsOff');
        $(answers).addClass("answerBtnsOn").siblings().addClass('answerBtnsOff');
    }
    $.modal.close();
    return false;
} 
```

In order to modify the value after the visual changes took place.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:11:12.347

Use [`data`](http://api.jquery.com/data/) instead of `attr` - `attr` takes a string, `data` takes JavaScript objects.

# php - 在我的 PHP 网站旁边实现 node.js 和 socket.io

> ID：11491182
> 
> 赞同：0
> 
> 时间：2012-07-15T10:31:33.130
> 
> 标签：php, mysql, node.js, websocket, socket.io

我一直在学习 node.js 和 socket.io，但是如果不将所有内容都转移到 node 上，我就看不到如何使用它，我并不热衷于这样做。所以我的问题是，是否可以将 node.js 与 PHP 一起使用？

例如，假设我希望 99.9% 的网站使用 PHP 完成，但我想使用 node 在页面顶部显示当前在线用户数。这完全有可能吗，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:01:44.830

在某种程度上，我有类似的任务。在一个域上运行多个 Node 应用程序和其他东西，无论是静态的、PHP、Python 还是其他东西。我认为最好的方法是使用 Nginx 作为具有适当配置的 Web 服务器。以下是一些细节和我的配置示例：[http ://skovalyov.blogspot.com/2012/07/deploy-multiple-node-applications-on.html](http://skovalyov.blogspot.com/2012/07/deploy-multiple-node-applications-on.html)

# javascript - 如何仅在 IE 中显示特定代码

> ID：11491183
> 
> 赞同：1
> 
> 时间：2012-07-15T10:31:36.080
> 
> 标签：javascript, jquery, internet-explorer

示例网站：[http ://www.oneupme.com/](http://www.oneupme.com/)

如果您从 IE 访问该站点，您将看到一个红色框，表示您使用的是旧浏览器！有趣的是，没有 IE if 条件。也许你好用javascript来检查它是否是IE，然后用jquery添加代码。但是在js文件中没有这样的代码。任何想法你如何完成它。

// 更新：或者也许他使用 php 来检测浏览器，然后设置和变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:35:50.370

最简单的方法是使用 IE 条件注释。该网站可能使用了[CSS hacks](http://paulirish.com/2009/browser-specific-css-hacks/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T10:35:55.780

您可以[使用 javascript](https://stackoverflow.com/q/2599002/29407)`User-Agent`在客户端执行此操作，也可以使用HTTP 标头在服务器端执行此操作。

# php - 计算 column1 LIKE %something% 的列

> ID：11491184
> 
> 赞同：0
> 
> 时间：2012-07-15T10:31:37.167
> 
> 标签：php, mysql

我有一个数据集，它没有列出最好的方法，请参阅下面的示例。

```
col1|col2|col3
john smith|10|3
tom smith|8|3
sean smith|12|3
sean smith|5|33
john smith|3|32
john smith|6|13 
```

如您所见， col1 有多个相同的记录。

我希望能够将 col1 中具有相同值的所有条目分组，然后输出到一行中，我还想显示另一列，它是 col2*col3 的总和，以便我的输出如下所示。

```
col1|col2|col3
john smith|19|48|912
sean smith|17|36|612
tom smith|8|3|24 
```

最好在这里使用 mySQL Sum 吗？当我不知道 'WHERE' 将是什么但我只是希望它为每个名称输出结果时，如何编写此选择语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:36:32.000

你也可以这样做::

```
Select 
col1, SUM(col2), SUM(col3), SUM(col3)*SUM(col2) 
from table group by col1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:35:03.233

尝试这个：：

```
Select 
col1, SUM(col2) as b, SUM(col3) as c, SUM(col2)*SUM(col3) as d
from table group by col1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T10:36:53.783

尝试这个：

```
SELECT col1,SUM(col2),SUM(col3),SUM(col2)*SUM(col3) FROM table
GROUP BY col1 
```

# java - 是否可以使用 Java 代码在 jquery 函数中创建图像？

> ID：11491186
> 
> 赞同：0
> 
> 时间：2012-07-15T10:31:53.740
> 
> 标签：java, jquery, jsf

我想使用 jQuery 函数创建一个图像文件（.jpg、.png）。在应用程序中，我们使用 JSF 作为视图页面。从Java方法调用函数时如何使用jQuery创建图像？

# python - python中的Socket.receive

> ID：11491187
> 
> 赞同：0
> 
> 时间：2012-07-15T10:32:25.300
> 
> 标签：python, sockets, fuzzing

我用 Python 做了一个简单的 TCP fuzzer。我需要它能够接收到一些响应，如果我没有得到响应，请打破循环。我的代码是这样的：

```
import socket
from time import sleep
import sys

ip = raw_input ("please insert host ip: ")
port = input ("please insert port to fuzz: ")
packet = raw_input ("what string would you like to fuzz with? :  ")
multi = input ("in what jumps would you liike to multiply the string ? (10 = A*10) : ")
host = ip, port
s = socket.socket()
char = packet * multi
a = 1

try:
    while a > 0:
        s.connect((host))
        s.send(packet)
        sleep(1) 
        print 'fuzzing param %s' % (packet)
        packet = char + packet 
        s.close()
except (Exception):
    print "Connection lost for some reason"' 
```

但是当我运行程序时，我得到了这个错误：

```
please insert host ip: 10.0.0.138
please insert port to fuzz: 80
what string would you like to fuzz with? :  A
in what jumps would you liike to multiply the string ? (10 = A*10) : 2
fuzzing param A
Connection lost 
```

这很奇怪，因为它只是假设在无限循环中重新连接，（我知道服务器没有崩溃）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:41:55.087

远程端点只是挂断了，可能是因为您发送的数据与它期望的格式不匹配。

您可以在每次远端挂断时创建一个新连接，或者以远端期望的格式发送数据。例如，如果远程端是 HTTP 服务器，您可能希望先发送请求行，然后再发送模糊部分，如下所示：

```
GET / HTTP/1.0
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:16:21.017

当您进行模糊测试时（通常情况下），处理错误非常重要。当您将 Gibberish 发送到您的服务器时，您应该预料到会出现问题。所以我建议你用`try`... `except`...`finally: s.close()`子句包装电话。并打印调试消息以查看您何时发送失败并开始查看原因 - 您不知道服务器对您发送的内容有何反应，并且您可能在第一次调用后就杀死了服务器......

# c++ - 在 C/C++ 的编译期间是否解决了地址偏移？

> ID：11491191
> 
> 赞同：-1
> 
> 时间：2012-07-15T10:33:16.283
> 
> 标签：c++, c, memory, offset, resolve

```
void *p = malloc(1000);
*((int*)p) = 666;
*((int*)p+sizeof(int)) = 777;
int i;
for (i = 0; i<10; ++i)
    printf("%d ", *((int*)p+sizeof(int)*i)); 
```

手动偏移是在编译时解决的，还是在运行时增加了执行算术运算的开销？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:01:42.727

即使您有一个常量而不是`sizeof(int)`，编译器也无法提前知道 中的地址`p`，因此它必须进行加法。如果你有类似的东西，`i = sizeof(int)+4`那么它应该优化编译时间并直接设置`i`为`8`.

另外，我认为当你这样做时：

```
*((int*)p+sizeof(int)) = 777; 
```

你的意思是：

```
*((int*)p + 1) = 777; /* or ((int*)p)[1] = 777; */ 
```

同样`printf("%d ", *((int*)p+sizeof(int)*i));`应该是：

```
printf("%d ", *((int*)p + i)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T10:39:55.490

`sizeof(int)`在编译时肯定是已知的，并且有效地利用这些信息是很有意义的。但是，不能保证给定的编译器会生成如下内容：

```
mov dword [ebx+16], 777 
```

而不是这样的：

```
mov ecx, 16
mov dword [ebx+ecx], 777 
```

或者

```
lea ebx, [ebx+16]
mov dword [ebx], 777 
```

甚至

```
add ebx, 16
mov dword [ebx], 777 
```

# open-source - 在 pentaho 水壶勺中等待

> ID：11491193
> 
> 赞同：0
> 
> 时间：2012-07-15T10:33:30.003
> 
> 标签：open-source, pentaho, kettle

我是 Pentaho Kettle 的新手，我想在一次转换中进行多项操作。首先我是

1.  将文本文件中的数据插入主表。
2.  根据某些条件将一些列从主表加载到第二个表。

但问题是只有在完成第一步后我才必须做第二步。因为对于第二步，我需要完成第一步。

我可以说我的第一步需要将近 20 分钟..

同样在同一个转换中，我也必须从不同的表中加载其他数据..

我不知道水壶提供了一个专门的选项来执行任何开关或类似的东西。我在网上搜索了很多，但我没有任何...

所以任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T01:40:07.210

或者将您的转换拆分为多个转换并在一个作业中编排它们。如果您的转换很简单，我会倾向于使用阻塞步骤。但是我发现过多地使用它们会使转换变得混乱和复杂。在 Jobs 中包装 Transforms 通常会给你更多的控制权。

布赖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:12:13.933

这正是“阻塞步骤”所做的，试一试。

[http://www.nicholasgoodman.com/bt/blog/2008/06/25/ordered-rows-in-kettle/](http://www.nicholasgoodman.com/bt/blog/2008/06/25/ordered-rows-in-kettle/)

# php - URL 映射 [代码点火器]

> ID：11491194
> 
> 赞同：-1
> 
> 时间：2012-07-15T10:33:33.677
> 
> 标签：php, codeigniter

我正在制作一个测试壁纸应用程序来学习 CodeIgniter 框架。

如何实现这一点：

“当我输入 wallpapers.example.com 时，而不是重定向到完整链接，主页应该在 wallpapers.example.com 打开，想要从 url 中排除“/earthplanet/index.php/”的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:37:36.273

您将其写入您的 .htaccess 文件以重定向到 subdomain/index.php/whatever_your_url_is

```
RewriteEngine on
RewriteRule ^(.*)$ /earthplanet/index.php/$1 [L] 
```

仅供参考，您应该使用漂亮的 URL 的 Codeigniter 为您提供：

```
http://wallpapers.studentbro.com/earthplanet/index.php/freewallpapers?wallis=Nature%20Wallpapers 
```

应该：

```
http://wallpapers.studentbro.com/earthplanet/index.php/freewallpapers/Nature/Wallpapers 
```

# asp.net - 如何在 web asp.net 上查看浮点图像？

> ID：11491197
> 
> 赞同：0
> 
> 时间：2012-07-15T10:35:20.013
> 
> 标签：asp.net, floating-point

有没有办法在网页表单上显示浮点图像？

或者，我想搜索一种将浮点图像转换为 PNG 或 JPEG 格式的算法。

我正在寻找一个开源项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:28:29.590

这在很大程度上取决于浮点图像的格式。

如果您有直接未压缩的 RGBA 浮点数，则可以使用不安全的方法简单地对其进行迭代，以将浮点值钳制为字节值并填充已使用该`lockbits`方法锁定的 dotnet 位图的像素。

有关更多信息，`lockbits`请参阅[Bob Powell 的这篇文章](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)。

如果浮点数据未解压缩或不是已知或可访问的格式，您可以尝试使用[FreeImage.NET](https://freeimage.sourceforge.io/)等开源库来打开图像。

# php - 选项参数的值：FALSE 或 NULL

> ID：11491203
> 
> 赞同：2
> 
> 时间：2012-07-15T10:36:32.007
> 
> 标签：php, null

当您有可以具有不同类型的可选参数时，哪个值最适合指出不应考虑该参数？假还是空？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T10:41:16.600

`null`是用于表示“无价值”的值，而`false`表示“不”、“坏”、“不成功”、“不”等。

因此：`null`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T10:39:07.017

对于可选参数使用`null`（通常）。

如果您需要区分布尔值 ( `true`/ `false`) 和空值 ( )，请使用 null `null`。另一方面，如果您不需要检查未设置的参数并且您使用的是布尔变量，那么我会选择`false`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-15T10:42:02.983

对我来说，这取决于我将如何处理所述论点的价值......

我正在编写一个数据库函数，我可以将默认值设置为 NULL

```
function somedbfunc($id = NULL, $column1 = NULL) 
```

如果这些值为空，我的函数可能会插入一条空白记录。

如果我需要因为非参数而停止我的函数，我可以使用 FALSE

```
function blah($this = FALSE, $that = FALSE)
{
    if ( ! $this || ! $that)
    {
        return FALSE;
    .... 
```

所以我说两者都是完全有效的，但这取决于你发现自己所处的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T11:00:32.180

正如您所说，您想告诉“不考虑”“可选参数”，我会选择`null`. `False`明确地对收件人说“不”。这是一个有效的输入。

# jquery - Phonegap jQuery Ajax

> ID：11491210
> 
> 赞同：0
> 
> 时间：2012-07-15T10:37:30.757
> 
> 标签：jquery, ajax, cordova

我正在制作一个Phonegap 应用程序，我希望它从我的servlet 中获取XML 格式的数据。该应用程序的索引页面似乎没有问题。但是每个其他页面似乎确实有这样做的问题。即使我们将代码从索引复制到另一个页面。

这对我来说似乎没有意义。有什么我错过的吗？

干杯。

目前电话是这样的，但由于它在索引页面中有效，我觉得这不是问题。

```
$.ajax({
  url: "full url",
  data: {paramaters},
  dataType: "xml",
  success: function(data) {
    // DO STUFF
  }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T04:43:31.510

在 phonegap-jquery 移动应用程序中，基本上您正在执行***跨域 ajax 请求***。据我所知，您不能在这里发出 ajax xml 请求。

对于我的 phonegap-jquery 移动应用程序，我使用带有回调的***jsonp ajax 请求。***[您可以在$.ajax() on phonegap](https://stackoverflow.com/questions/11054319/ajax-on-phonegap/11062464#11062464)使用此示例。它会帮助你

# java - 编码名称是 UTF8 还是 UTF-8？

> ID：11491217
> 
> 赞同：36
> 
> 时间：2012-07-15T10:39:52.043
> 
> 标签：java, httpclient

一些 httpclient 要求我提供一个字符串 charsetµ。

我想知道是否给它 UTF8 或 utf8 或 UTF-8？

特别是在调用 Charset.forName(enc) 时

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-10-12T16:27:57.100

更容易使用[StandardCharsets.UTF_8](https://docs.oracle.com/javase/8/docs/api/java/nio/charset/StandardCharsets.html#UTF_8)，因为它省去了处理 UnsupportedEncodingExceptions 的麻烦

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-15T10:40:43.403

`UTF-8`是标准的，大多数人都使用它。

以下是 Java 中使用的字符集列表：

[http://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html](http://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html)

注意
如果 charset factory/singleton 类可以`Enum`作为参数，以及`String`，`Enum`is，IMO，总是一个更安全和更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-28T07:01:18.767

```
Charset charset = Charset.forName("cp1254"); 
```

这对我来说是 utf-8 解决方案。你可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T13:12:15.097

仅供参考，对于 Java 7/tomcat 8.5，我正在使用：-Dfile.encoding=UTF-8 -Dclient.encoding.override=UTF-8

但是对于 Java 8/tomcat 8.5，我得到了： java.nio.charset.IllegalCharsetNameException: UTF-8

所以我改成了UTF8

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-16T07:23:50.123

标准名称是“UTF-8”。源代码（我使用 jdk1.8.0_20）显示更多细节：

```
UTF_8 extends Unicode {
    public UTF_8() {
        super("UTF-8", StandardCharsets.aliases_UTF_8); // show other aliases
        // static final String[] aliases_UTF_8 = new String[]{"UTF8", "unicode-1-1-utf-8"};
    }

    public String historicalName() {
        // return old name of UTF-8
        return "UTF8";
    } 
```

# c++ - 如何使用 fprintf 打印头文件中定义的结构成员值？

> ID：11491234
> 
> 赞同：3
> 
> 时间：2012-07-15T10:43:12.293
> 
> 标签：c++, c, struct

我目前正在学习“结构化编程方法”课程。该课程不是基于语言的，但我们通常使用 C 或 C++。有时我需要用其中一种语言编写，有时我必须最初用 C 编写并将代码转换为 C++，有时我可以用我喜欢的语言编写。很可能很奇怪，我更喜欢使用 C 的 (f/p)rintf。所以，这是我的问题：

这是我的头文件`struct`：

```
 #include <string>
 using namespace std;

 typedef string FNAME;
 typedef string LNAME;
 typedef string FULLNAME;
 typedef struct EmpRecord
 {
    FNAME firstname;
    LNAME lastname;
    FULLNAME fullname;
    float  hours, rate, deferred, gross, netpay,
           fedtax,  statetax,  ssitax;
  } EmpRecord; 
```

这是“主要”.cpp：

```
 #define STRADD ", "
        #include <stdio.h>
        #include <iostream>
        #include <fstream>
        #include <iomanip>
        #include <string>
        #include "Struct.h"
        #include "Rates.h"
        #include "calcTaxesPlus.cpp"
        using namespace std;

        /*......*/
        void printEmpData(FILE *fp, struct EmpRecord *, float reghrs, float othrs);//3.8
        /*......*/
        int main()
        {
            float totRegHrs, totOtHrs, totRates, totGross, totDeferd,
                  totFed, totState, totSSI, totNet;
            float reghrs, othrs;
            float avgRate, avgRegHrs, avgGross, avgFed, avgSSI, avgNet,
                  avgOtHrs, avgState, avgDeferd;
            int   numEmp;

            EmpRecord emp;
            EmpRecord *Eptr;
            Eptr = &emp;

            FILE * fp;
            fp = fopen("3AReport.txt", "w");
            if (fopen == NULL)
            {
                printf("Couldn't open output file...!");
                fflush(stdin);
                getchar();
                exit(-1000);
            }
            /*....*/
            printEmpData(fp, Eptr, reghrs, othrs);//3.8
            return 0;
        }
        /*....*/
        void printEmpData(FILE *fp, struct EmpRecord *e, float reghrs, float othrs) 
        {
            fprintf(fp, "\n%-17.16s   %5.2f       %5.2f     %7.2f     %6.2f     %6.2f %7.2f", e->fullname, e->rate, reghrs, e->gross, e->fedtax, e->ssitax, e->netpay);
            fprintf(fp, "\n                                %5.2f                 %6.2f     %6.2f       \n", othrs, e->statetax, e->deferred);
        return;
    } 
```

我尝试了其他问题/答案建议的大量组合，但似乎没有一个是在处理跨语言情况。

我基本上是在寻找一种解决方案，允许我继续使用 fprintf，同时保留大部分代码 C++。

我不是在找人为我编写解决方案，而是解释这个问题是什么以及如何从逻辑上绕过它们。

此外， typedef 是一项要求。谢谢-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T10:55:06.477

`std::string`有一种[`c_str() const`](http://en.cppreference.com/w/cpp/string/basic_string/c_str)方法可用于“准备”`std::string`用于格式化的`%s`：

```
fprintf(fp, "%s", e->fullname.c_str()); 
```

当 printf 风格的函数`%s`在格式字符串中看到时，它正在寻找以 NUL 结尾的 C 字符串（类型：）`const char *`。该`std::string::c_str() const`方法只返回`std::string`对象的那个。

# php - 连接 CSV 文件的每第 n 行

> ID：11491236
> 
> 赞同：5
> 
> 时间：2012-07-15T10:43:22.637
> 
> 标签：php

考虑 data.csv：

```
"1","2","3","4"
"5","6","7","8"
"9","10","11","12"
"13","14","15","16"
"17","18","19","20"
"21","22","23","24"
"25","26","27","28"
"29","30","31","32"
"33","34","35","36" 
```

我需要阅读这个 CSV 并每隔 n 次连接一次，比如每隔 3 行连接一次。所以想要的输出是：

```
array (
  [0] => 1,2,3,4,13,14,15,16,25,26,27,28    // row 1, 4 and 7
  [1] => 5,6,7,8,17,18,19,20,29,30,31,32    // row 2, 5 and 8
  [2] => 9,10,11,12,21,22,23,24,33,34,35,36 // row 3, 6 and 9
) 
```

我需要 n 是可变的，所以它应该很容易，例如，连接每 4 行：

```
array (
  [0] => 1,2,3,4,17,18,19,20,33,34,35,36    // row 1, 5 and 9
  [1] => 5,6,7,8,21,22,23,24                // row 2, 6
  [2] => 9,10,11,12,25,26,27,28             // row 3, 7
) 
```

我现在有这个：

```
$path = "data.csv";
$row = 1;
if (($handle = fopen($path, "r")) !== FALSE) {
  while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    for ($i = 1; $i <= 3; $i++) { // concatenate every 3rd row
      if ($row % $i == 0) $newrows[$i] .= implode(",", $data);
    }
    $row++;
  }
}

print_r($newrows); 
```

但它没有按预期工作，因为它输出

```
Array (
  [1] => 1,2,3,45,6,7,89,10,11,1213,14,15,1617,18,19,2021,22,23,2425,26,27,2829,30,31,3233,34,35,36
  [2] => 5,6,7,813,14,15,1621,22,23,2429,30,31,32
  [3] => 9,10,11,1221,22,23,2433,34,35,36
) 
```

你有更好的主意吗？这个数理逻辑一直让我不解！:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T10:54:02.793

我现在无法访问我的服务器，所以我无法对其进行测试，但我认为你所拥有的这个简化版本应该可以工作。

```
$path = "data.csv";
$row = 1;

$groupings = 4; // group every n rows

if(($handle = fopen($path, "r")) !== FALSE)
{
    while(($data = fgetcsv($handle, 1000, ",")) !== FALSE)
    {
        $where = $row % $groupings; // which grouping is this?
        $newrows[$where] .= implode(",", $data).",";

        $row++;
    }
}

for($i = 0; $i < count($newrows); $i++)
{
    $newrows[$i] = substr($newrows[$i], 0, -1);
} 
```

您需要在初始 while 循环之后运行第二个循环，因为没有办法（我能想到）检测要添加的数据是否是要添加到该分组中的最后一个数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T11:31:40.403

您可以遍历所有行，计算从零开始的行号的余数（就像 的情况一样`SplFileObject`）作为新索引，然后`array`用该值填充 an 。

在以下示例中，`$perEach`将填充数组：

```
$each = 3; # must be greater than 0
$path = '../data/numbers.csv'; # path to the csv file

$file = new SplFileObject($path);
$file->setFlags(SplFileObject::DROP_NEW_LINE);

$perEach = array();
foreach ($file as $lineNumber => $line)
{
    $index = $lineNumber % $each;
    $isNew = empty($perEach[$index]);
    if ($isNew) {
        $perEach[$index] = $line;
    } else {
        $perEach[$index] .= ',' . $line;
    }
} 
```

您提供的数据的结果：

```
array(3) {
  [0] => string(55) ""1","2","3","4","13","14","15","16","25","26","27","28""
  [1] => string(55) ""5","6","7","8","17","18","19","20","29","30","31","32""
  [2] => string(58) ""9","10","11","12","21","22","23","24","33","34","35","36""
} 
```

如果数据格式不是那么一致并且您需要真正的 CSV 解析，`SplFileObject`也可以这样做。它可能更好，因为它允许首先初始化数组：

```
$file = new SplFileObject($path);
$file->setFlags(SplFileObject::READ_CSV);

$perEach = array_fill(0, $each, array());
foreach ($file as $lineNumber => $line)
{
    $index = $lineNumber % $each;
    $perEach[$index] = array_merge($perEach[$index], $line);
} 
```

结果自然是作为数组来保持每行的值分开：

```
array(3) {
  [0]=>
  array(12) {
    [0]=>
    string(1) "1"
    [1]=>
    string(1) "2"
    [2]=>
    string(1) "3"
    [3]=>
    string(1) "4"
    [4]=>
    string(2) "13"
    [5]=>
    string(2) "14"
    [6]=>
    string(2) "15"
    [7]=>
    string(2) "16"
    [8]=>
    string(2) "25"
    [9]=>
    string(2) "26"
    [10]=>
    string(2) "27"
    [11]=>
    string(2) "28"
  }
  [1]=>
  array(12) {
    [0]=>
    string(1) "5"
    [1]=>
    string(1) "6"
    [2]=>
    string(1) "7"
    [3]=>
    string(1) "8"
    [4]=>
    string(2) "17"
    [5]=>
    string(2) "18"
    [6]=>
    string(2) "19"
    [7]=>
    string(2) "20"
    [8]=>
    string(2) "29"
    [9]=>
    string(2) "30"
    [10]=>
    string(2) "31"
    [11]=>
    string(2) "32"
  }
  [2]=>
  array(12) {
    [0]=>
    string(1) "9"
    [1]=>
    string(2) "10"
    [2]=>
    string(2) "11"
    [3]=>
    string(2) "12"
    [4]=>
    string(2) "21"
    [5]=>
    string(2) "22"
    [6]=>
    string(2) "23"
    [7]=>
    string(2) "24"
    [8]=>
    string(2) "33"
    [9]=>
    string(2) "34"
    [10]=>
    string(2) "35"
    [11]=>
    string(2) "36"
  }
} 
```

# sql - 如何使用 SELECT * INTO tempTable FROM CTE 查询创建临时表

> ID：11491240
> 
> 赞同：215
> 
> 时间：2012-07-15T10:45:41.060
> 
> 标签：sql, sql-server, common-table-expression

我有一个 MS SQL CTE 查询，我想从中创建一个临时表。我不知道该怎么做，因为它给出了一个`Invalid Object name`错误。

以下是整个查询以供参考

```
SELECT * INTO TEMPBLOCKEDDATES FROM 
;with Calendar as (
    select EventID, EventTitle, EventStartDate, EventEndDate, EventEnumDays,EventStartTime,EventEndTime, EventRecurring, EventStartDate as PlannedDate
    ,EventType from EventCalender
    where EventActive = 1 AND LanguageID =1 AND EventBlockDate = 1
    union all
    select EventID, EventTitle, EventStartDate, EventEndDate, EventEnumDays,EventStartTime,EventEndTime, EventRecurring, dateadd(dd, 1, PlannedDate)
    ,EventType from Calendar
    where EventRecurring = 1
        and dateadd(dd, 1, PlannedDate) <= EventEndDate 
)
select EventID, EventStartDate, EventEndDate, PlannedDate as [EventDates], Cast(PlannedDate As datetime) AS DT, Cast(EventStartTime As time) AS ST,Cast(EventEndTime As time) AS ET, EventTitle
,EventType from Calendar
where (PlannedDate >= GETDATE()) AND ',' + EventEnumDays + ',' like '%,' + cast(datepart(dw, PlannedDate) as char(1)) + ',%'
    or EventEnumDays is null
order by EventID, PlannedDate
option (maxrecursion 0) 
```

如果我能从这个 CTE 查询中创建一个临时表，我将不胜感激

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2012-07-15T11:07:36.403

## 示例 DDL

```
create table #Temp
(
    EventID int, 
    EventTitle Varchar(50), 
    EventStartDate DateTime, 
    EventEndDate DatetIme, 
    EventEnumDays int,
    EventStartTime Datetime,
    EventEndTime DateTime, 
    EventRecurring Bit, 
    EventType int
) 
```

* * *

```
;WITH Calendar
AS (SELECT /*...*/)

Insert Into #Temp
Select EventID, EventStartDate, EventEndDate, PlannedDate as [EventDates], Cast(PlannedDate As datetime) AS DT, Cast(EventStartTime As time) AS ST,Cast(EventEndTime As time) AS ET, EventTitle
,EventType from Calendar
where (PlannedDate >= GETDATE()) AND ',' + EventEnumDays + ',' like '%,' + cast(datepart(dw, PlannedDate) as char(1)) + ',%'
    or EventEnumDays is null 
```

* * *

确保表在使用后被删除

```
If(OBJECT_ID('tempdb..#temp') Is Not Null)
Begin
    Drop Table #Temp
End 
```

* * *

## 回答 #2

> 赞同：218
> 
> 时间：2014-01-06T01:50:38.090

实际上，格式可以非常简单——有时不需要预定义临时表——它将根据选择的结果创建。

```
Select FieldA...FieldN 
into #MyTempTable 
from MyTable 
```

因此，除非您想要不同的类型或对定义非常严格，否则请保持简单。另请注意，在存储过程中创建的任何临时表都会在存储过程完成执行时自动删除。如果存储过程 A 创建一个临时表并调用存储过程 B，那么 B 将能够使用 A 创建的临时表。

但是，无论如何，显式删除您创建的每个临时表通常被认为是良好的编码习惯。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2017-11-06T20:13:06.903

如何在存储过程中使用 TempTable？

以下是步骤：

创建临时表

```
-- CREATE TEMP TABLE 
Create Table #MyTempTable (
    EmployeeID int
); 
```

将温度选择数据插入到温度表中

```
-- INSERT COMMON DATA
Insert Into #MyTempTable
Select EmployeeID from [EmployeeMaster] Where EmployeeID between 1 and 100 
```

SELECT TEMP TABLE（您现在可以使用此选择查询）

```
Select EmployeeID from #MyTempTable 
```

最后一步放下桌子

```
Drop Table #MyTempTable 
```

我希望这将有所帮助。简单明了:)

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2012-07-15T10:54:45.307

`SELECT ... INTO`需要从 CTE 中选择。

```
;WITH Calendar
     AS (SELECT /*... Rest of CTE definition removed for clarity*/)
SELECT EventID,
       EventStartDate,
       EventEndDate,
       PlannedDate                   AS [EventDates],
       Cast(PlannedDate AS DATETIME) AS DT,
       Cast(EventStartTime AS TIME)  AS ST,
       Cast(EventEndTime AS TIME)    AS ET,
       EventTitle,
       EventType
INTO TEMPBLOCKEDDATES /* <---- INTO goes here*/        
FROM   Calendar
WHERE  ( PlannedDate >= Getdate() )
       AND ',' + EventEnumDays + ',' LIKE '%,' + Cast(Datepart(dw, PlannedDate) AS CHAR(1)) + ',%'
        OR EventEnumDays IS NULL
ORDER  BY EventID,
          PlannedDate
OPTION (maxrecursion 0) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-04-20T22:16:32.907

这是对在执行时创建表的查询的答案的一个小改动（即您不必先创建表）：

```
SELECT * INTO #Temp
FROM (
select OptionNo, OptionName from Options where OptionActive = 1
) as X 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-05-10T09:46:23.437

```
Select      Eventname, 
            count(Eventname) as 'Counts'
INTO        #TEMPTABLE                                                                                
FROM        tblevent
where       Eventname like 'A%'
Group by    Eventname
order by    count(Eventname) 
```

这里通过使用 into 子句直接创建表

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-04T12:30:04.193

您还可以使用 View 创建临时/虚拟表 CREATE VIEW view_name AS SELECT column1, column2, ... FROM table_name WHERE 条件；

# python - ImportError：环境变量 DJANGO_SETTINGS_MODULE 未定义

> ID：11491243
> 
> 赞同：14
> 
> 时间：2012-07-15T10:46:22.643
> 
> 标签：python, django, django-admin

我正在学习基本的 django 教程，并且正在使用 python manage.py runserver 运行服务器。我得到这个错误，我不太了解如何解决：

```
Traceback (most recent call last):
  File "manage.py", line 1, in <module>
    from polls.models import Poll
  File "/Users/davidhaddad/Desktop/mysite/polls/models.py", line 2, in <module>
    from django.db import models
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/conf/__init__.py", line 40, in _setup
    raise ImportError("Settings cannot be imported, because environment variable %s is undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined. 
```

settings.py 之前是可见的，在我添加一些代码向管理员注册一些应用程序模型后，我开始收到此消息。

提供更多信息：当我从项目目录中导出 DJANGO_SETTINGS_MODULE=settings 然后我执行 python django-admin.py runserver 时，服务器没有运行（没有显示）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T11:22:10.637

您需要能够导入`DJANGO_SETTINGS_MODULE`不在项目根目录中的位置时的值。一种简单的方法是（1）将项目文件夹的父级添加到`PYTHONPATH`，（2）更改`DJANGO_SETTINGS_MODULE`为`projectfoldername.settings`.

# artificial-intelligence - 我们不应该在最便宜的第一图搜索算法中考虑重复路径吗？

> ID：11491244
> 
> 赞同：0
> 
> 时间：2012-07-15T10:46:26.523
> 
> 标签：artificial-intelligence, a-star

请观看这个 16 秒的视频演示，演示在最便宜的首次搜索期间做出的决定。 [http://www.youtube.com/watch?v=LVCMMPXaQlE&feature=bf_prev&list=PL7D40B622BF0A97BC](http://www.youtube.com/watch?v=LVCMMPXaQlE&feature=bf_prev&list=PL7D40B622BF0A97BC) 00:08，演讲者选择不扩展从奥拉迪亚到锡比乌的路径，因为已经探索了锡比乌。我觉得这是一个错误的选择，因为我们正在寻找成本最低的路径。尽管已经探索了锡比乌，但我们仍然需要检查这条新路径，因为它可能会提供一条通往锡比乌的道路，其成本低于之前探索的通往锡比乌的道路。请解释我是否在这里或告诉我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T20:40:29.107

如果您做出重复的决定，您将陷入循环并且永远不会出来。这就是为什么您保留访问过的节点并且永远不会返回它们的原因。

# c# - 如何从不存在的用户拥有的文件夹中删除 ACL

> ID：11491245
> 
> 赞同：3
> 
> 时间：2012-07-15T10:46:44.137
> 
> 标签：c#, .net, windows, acl

我正在开发一个 C# 应用程序。

我需要更改文件夹上的 ACL，为此我以提升的管理员身份运行我的程序，并且一切正常。

问题是，如果拥有该文件夹的用户已从系统中删除，那么当我尝试获取该文件夹的所有权时，我会遇到未经授权的异常。

这是失败的代码：

```
 using (new PrivilegeEnabler(Process.GetCurrentProcess(), Privilege.TakeOwnership))
            {
                var directorySecurity = directoryInfo.GetAccessControl();
                directorySecurity.SetOwner(WindowsIdentity.GetCurrent().User);
                Directory.SetAccessControl(directoryInfo.FullName, directorySecurity);
            } 
```

异常发生在一行：**directoryInfo.GetAccessControl();**

PrivilegeEnabler 是[Process Privileges](http://processprivileges.codeplex.com/)中定义的一个类，它用于获取文件的所有权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:32:05.800

我找到了解决方案。

您需要通过创建新的访问控制（无需调用 GetAccessControl）并将所有者设置为当前进程来设置所有者。然后你可以对文件做任何你想做的事情。

```
using (new PrivilegeEnabler(Process.GetCurrentProcess(), Privilege.TakeOwnership))
            {
                //create empty directory security
                var directorySecurity = new DirectorySecurity();
                //set the directory owner to current user
                directorySecurity.SetOwner(WindowsIdentity.GetCurrent().User);
                //set the access control
                Directory.SetAccessControl(directoryInfo.FullName, directorySecurity);
            } 
```

# iis-7 - 代码忽略了帖子

> ID：11491246
> 
> 赞同：0
> 
> 时间：2012-07-15T10:46:53.583
> 
> 标签：iis-7, asp-classic

服务器是 IIS，代码是经典 ASP，当用户在文本编辑器中输入大量文本时，网络控制台中有表单数据字段，但从代码中我无法找到它们。

我尝试将内容长度限制增加到 30000000，但没有任何效果 [http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)

任何人都可以对调试类似的东西有想法吗？

我不能给出整个系统的代码，所以我需要类似的想法

# php - Zend 框架 $db->更新结果

> ID：11491249
> 
> 赞同：3
> 
> 时间：2012-07-15T10:47:40.110
> 
> 标签：php, zend-framework, zend-db

`Zend_Db_Adapter::update()`返回受更新操作影响的行数。确定查询是否成功的最佳方法是什么？

```
$data = array(
    'updated_on'      => '2007-03-23',
    'bug_status'      => 'FIXED'
); 

$n = $db->update('bugs', $data, 'bug_id = 2'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T21:33:20.527

```
$data = array(
    'updated_on' => '2007-03-23',
    'bug_status' => 'FIXED',
);
$n = 0;
try {
    $n = $db->update('bugs', $data, 'bug_id = 2');
} catch (Zend_Exception $e) {
    die('Something went wrong: ' . $e->getMessage());
}
if (empty($n)) {
    die('Zero rows affected');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-08T03:50:39.967

如果您只是在寻找布尔返回值，则此解决方案是处理模型中成功的最佳解决方案：

类 Default_Model_Test 扩展 Zend_Db_Table {

```
public function updateTest($testId, $testData){

    try {

        $this->_db->update('test', $testData, array(
            'id = ?'        => $testId
        ));

        return true;

    }
    catch (Exception $exception){

        return false;

    }

} 
```

}

但是，更好的解决方案是从控制器级别处理成功，因为它正在发出请求：

```
class Default_Model_Test extends Zend_Db_Table {

    public function updateTest($testId, $testData){

        $this->_db->update('test', $testData, array(
            'id = ?'        => $testId
        ));

    }

}

class Default_TestController extends Zend_Controller_Action {

    public function updateAction(){

        try {

            $testId = $this->_request->getParam('testId');
            if (empty($testId)) throw new Zend_Argument_Exception('testId is empty');

            $testData = $this->_request->getPost();
            if (empty($testId)) throw new Zend_Argument_Exception('testData is empty');

            $testModel->updateTest($testId, $testData);

        }
        catch (Exception $exception){

            switch (get_class($exception)){

                case 'Zend_Argument_Exception': $message = 'Argument error.'; break;
                case 'Zend_Db_Statement_Exception': $message = 'Database error.'; break;
                case default: $message = 'Unknown error.'; break;

            }

        }

    }

} 
```

在处理多种资源类型、使用异常类型的开关以及根据程序的需要做适当的事情时，这是一个极好的解决方案。没有什么能逃脱这个真空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:32:38.577

也许：

```
$data = array(
    'updated_on'      => '2007-03-23',

    'bug_status'      => 'FIXED'
);
$result = $db->update('bugs', $data, 'bug_id = 2');
if ($result < $numRows) {//pass in numRows as method arg or hardcode integer.
    //handle error
} else {
    return TRUE;
} 
```

尝试这样的事情，你想验证你想要更新的记录数量是否得到了更新。

# python - 数组大小上的 Scipy odeint ODE 错误

> ID：11491251
> 
> 赞同：1
> 
> 时间：2012-07-15T10:48:15.440
> 
> 标签：python, numpy, scipy, ode

我正在尝试解决由物理学场论中的 N 体问题引起的 ODE。为此，我想到了使用 scipy.integrate.odeint 函数，并编写了一些代码，可以在以下位置找到：

[http://pastebin.com/yuBbEjwg](http://pastebin.com/yuBbEjwg)（**自首次提出问题以来已更新**）

但是，当我尝试执行它时，出现以下错误：

```
Traceback (most recent call last):
  File "./main.py", line 87, in <module>
    solution = odeint(ODE,XV0,t,args=(M,))
  File "/usr/lib/python2.7/site-packages/scipy/integrate/odepack.py", line 143, in odeint
    ixpr, mxstep, mxhnil, mxordn, mxords)
ValueError: object too deep for desired array 
```

有人可以指出我做错了什么吗？为什么我的代码不起作用？另外，我想问一下在我的情况下使用 ode 和 odeint 函数有什么区别吗？

谢谢。

**编辑**：纠正愚蠢的错误（shape（）-> shape），感谢Talonmies指出这一点。上面的链接现在应该指向正确的脚本。

**编辑 2**：我不知何故怀疑 odeint 函数不喜欢 ODE 函数返回的元组。如果需要解决耦合向量 ODE，有人可以帮助如何格式化元组吗？我发现人们正在解决耦合 ODE 或向量 ODE 的情况，但不是两者都...

**编辑 3**：我已经修改了示例，以便为 odeinit 函数提供一个初始条件矩阵，并且从名为 ODE 的函数返回的矩阵是相同维度的矩阵......但是，我得到了同样的错误。

# eclipse - 为 PHP 开发人员更新 Eclipse 上出现未知主机错误的错误

> ID：11491253
> 
> 赞同：0
> 
> 时间：2012-07-15T10:48:23.453
> 
> 标签：eclipse, ubuntu-12.04

我的操作系统是“Ubuntu 12.04 LTS”并且一直使用**Eclipse for PHP Developers**。我的对话框显示错误

```
A problem occured while accessing the update site.
See 'Details' for more information. 
```

错误描述

```
A problem occurred while accessing the update site.
RemoteBundleDiscoveryStrategy failed with an error
Unknown Host: http://il-studiosrv1/studio-eclipse/updates-extra/9_0//pdt_directory.xml
il-studiosrv1 
```

网络上没有任何东西可以帮助我。

可能是主机的地址格式不正确，这就是显示错误的原因。如果该消息被忽略，它会消失，但每次加载“Eclipse for PHP Developers”时，对话框都会重新出现。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:46:56.120

您在哪里下载了“供 PHP 开发人员使用的 Eclipse”？
OpenDNS让我知道这里是一个类似的问题。
[http://forums.zend.com/viewtopic.php?f=59&t=74803](http://forums.zend.com/viewtopic.php?f=59&t=74803)
我可以用 eclipse-php-3.0.2.v20120611144-Win32.zip 重现这个问题。这是 Zend 的失败。
如果您正在使用“Zend Eclipse PDT”并且必须使用这种折叠产品，请转到首选项 > 安装/更新 > 可用软件站点，找到 h ttp://il-studiosrv1/... 并暂时将其删除。（或将“il-studiosrv1”替换为“downloads.z​​end.com”进行试用）

# python - 如何在金字塔中设置消息/通知服务？

> ID：11491255
> 
> 赞同：4
> 
> 时间：2012-07-15T10:48:45.887
> 
> 标签：python, pyramid

我是网络开发的新手，正在设法完成一个金字塔网站，但我想要某种消息服务，但不知道从哪里开始。

我想要类似 Quora 或 stackoverflow 的东西，其中来自站点的警报被发送给用户（也许他们可以互相发送消息）。我需要做什么？是否有库或教程可以帮助我理解所涉及的所有内容，还是我只是为消息创建一个数据模型并为此查询数据库？我想要一种允许用户跟踪其他用户的活动并相互交流的方法，我不想重新创建电子邮件。

有没有一种适当的简单方法可以与金字塔一起使用？

更新：我找到了一些资源，我想我明白了。了解是否有更普遍接受的方法会很棒，但我想我可以创建这个结构并每隔 x 秒查询一次新消息：

```
CREATE TABLE `messages` (
`message_id` int(11) NOT NULL auto_increment,
`from_user` varchar(65) character set latin1 collate latin1_general_ci NOT NULL,
`to_user` varchar(65) character set latin1 collate latin1_general_ci NOT NULL,
`message_title` varchar(65) NOT NULL,
`message_contents` longtext NOT NULL,
`message_read` int(11) NOT NULL default '0',
PRIMARY KEY (`message_id`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=21; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:09:32.490

你得到了基本的想法：你只需要一个表来存储消息。只要您不处理广播消息，一个表就足够了。

关于您提出的结构的一些评论：

*   如果你还不知道，你应该看看[sqlalchemy](http://www.sqlalchemy.org/)。它是处理数据库的好工具，通常与金字塔一起使用。
*   您应该使用用户表中的键`from_user`而`to_user`不是存储名称，以避免浪费空间。
*   如果您的应用程序应该处理多个请求，您应该考虑在某些列上建立索引，具体取决于您执行的查询。如果您经常查询某个用户的所有消息，请在`from_user`. 如果您查询某个用户的所有未读消息，请使用复合索引`from_user`和`message_read`（[如何在 sqlalchemy 中执行此操作](https://stackoverflow.com/questions/6626810/multiple-columns-index-when-using-the-declarative-orm-extension-of-sqlalchemy)）。这应该会大大加快您的请求。

# java - 在Android中连续运行一段代码

> ID：11491261
> 
> 赞同：-4
> 
> 时间：2012-07-15T10:49:37.010
> 
> 标签：java, android

我正在制作一款 Android 游戏，基本上所有内容都需要一个持续运行的线程。然而，现在我正在制作主菜单（我总是从简单开始，我是编码新手），并且我想要一个图像漂浮在主屏幕上。我知道如何编码（确定起始位置，更改它），但我不知道如何连续运行这样一段代码（在 UI 线程之外）。

PS：请对我放轻松。我知道我可能遗漏了一些明显的东西，但我几乎没有 Java 经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T10:53:39.707

**1.**创建一个**非 UI 线程，使用 Handler**。并使用布尔变量在**受控循环**中运行它。Handler 将有助于将非 Ui 线程的输出放在 Ui 线程上。

**2.**您可以使用android中引入的**AsyncTask**将UI与非UI线程同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:56:30.673

```
while(check){//your code} 
```

在运行方法中，您可以放置​​一个全局布尔变量来检查条件。

# winapi - VB4 AddressOf 等效项（向系统菜单添加项目）

> ID：11491262
> 
> 赞同：2
> 
> 时间：2012-07-15T10:49:38.193
> 
> 标签：winapi, vb6

Visual Basic 4 中是否有与 AddressOf 等效的方法？

我正在尝试获取一些 Visual Basic 5/6 代码，将菜单项添加到在 VB4 中工作的表单系统菜单中。以下是无法编译的代码片段：

```
'Add Custom Menu To System Menu
Call AppendMenu(GetSystemMenu(Me.hWnd, 0&), MF_SEPARATOR, 0&, vbNullString)
Call AppendMenu(GetSystemMenu(Me.hWnd, 0&), MF_STRING, IDM_SYSTEMTRAY, "Minimize To &System Tray")
Call AppendMenu(GetSystemMenu(Me.hWnd, 0&), MF_STRING, IDM_ABOUT, "&About...")
procOld = SetWindowLong(hWnd, GWL_WNDPROC, AddressOf WindowProc) 
```

以下是模块中的 API 声明：

```
' Win32 API
Public Const MF_SEPARATOR = &H800&
Public Const MF_STRING = &H0&
Public Const GWL_WNDPROC = (-4)
Public Declare Function GetSystemMenu Lib "user32" (ByVal hWnd As Long, ByVal bRevert As Long) As Long
Public Declare Function AppendMenu Lib "user32" Alias "AppendMenuA" (ByVal hMenu As Long, ByVal wFlags As Long, ByVal wIDNewItem As Long, ByVal lpNewItem As Any) As Long
Public Declare Function SetWindowLong Lib "user32" Alias "SetWindowLongA" (ByVal hWnd As Long, ByVal nIndex As Long, ByVal dwNewLong As Long) As Long
Public Declare Function CallWindowProc Lib "user32" Alias "CallWindowProcA" (ByVal lpPrevWndFunc As Long, ByVal hWnd As Long, ByVal msg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long
Public Const WM_SYSCOMMAND = &H112

' User Created
Public procOld As Long
Public Const IDM_ABOUT As Long = 1010
Public Const IDM_SYSTEMTRAY As Long = 1011 
```

最后，WindowProc 的代码：

```
Public Function WindowProc(ByVal hWnd As Long, ByVal iMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long
    Select Case iMsg
        Case WM_SYSCOMMAND
            Select Case wParam
                Case IDM_ABOUT
                   MsgBox "About goes here..."
                   Exit Function
               Case IDM_SYSTEMTRAY
                   MsgBox "Send to system tray code goes here..."
                   Exit Function
            End Select
    End Select
    ' Pass all messages on to VB and then return the value to windows
    WindowProc = CallWindowProc(procOld, hWnd, iMsg, wParam, lParam)
End Function 
```

将项目添加到我的表单系统菜单的任何其他指针或替代方法也将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:00:15.863

来自：[Xtreme VB Talk：针对 vb4 的 AddressOf 工作](http://www.xtremevbtalk.com/showthread.php?t=86297)

> [Banjo] 如果不求助于用 C 编写的某种外部 DLL，我认为您无法做到。
> 
> [OnErr0r] Matt Curland 就写了这样一个 dll。允许您获取类函数的地址，甚至适用于 vb5/6。

`callback.zip`注册后即可从以上页面下载。~~作为后备，您可以在此处获取文件：callback.zip~~

编辑：直接下载链接已被删除，因为该源代码似乎是[Matt Curland](http://www.amazon.com/s/ref=ntt_athr_dp_sr_1?_encoding=UTF8&field-author=Matthew%20Curland&ie=UTF8&search-alias=books&sort=relevancerank "马特·柯兰")的一本书的一部分并受版权保护。

# c# - TransactionScope错误保存了很多信息

> ID：11491266
> 
> 赞同：2
> 
> 时间：2012-07-15T10:50:59.140
> 
> 标签：c#, .net, sql-server, transactionscope

我正在开发一个使用 C# 和 SQL Server 作为数据库的 .NET Web 应用程序，这两种技术都是新手。当我尝试同时保存大量信息时遇到问题。

我的代码很简单：

```
 SqlConnection cn = null;
  try
  {
    using (TransactionScope scope = new TransactionScope())
    {
      using (cn = Util.getConnection())
      {
        cn.Open();

        BusinessObject.saveObject1(param1, cn);
        BusinessObject.saveObject2(param2, cn);
        BusinessObject.saveObject3(param3, cn);
        BusinessObject.saveObject4(param4, cn);

        ...

        scope.Complete();

      }
    } 
```

我总是使用相同的连接对象，因为如果发生错误，我必须撤销对数据的任何更改，并且如果过程正常，则需要相同的行为。

我不介意保存过程需要很多时间，在我的应用程序中是完全正常的，因为我必须保存很多信息。

这里的奇怪之处在于：

*   当我在数据库的同一局域网中执行此功能时，它可以完美运行。
*   但是，如果我从外部执行它，例如通过 VPN 连接，因此延迟较高，我会收到一条错误消息：*“与当前连接关联的事务已完成但尚未处理。事务必须是在连接之前配置好，可以用来执行 SQL 语句。”*

我试图通过 web.config 中的连接字符串更改数据库的超时，但它没有解决任何问题。此外，如果在每个 executeNonQuery() 语句之后执行 cn.Dispose()，则在下次尝试使用连接对象时会出错。

我是否必须更改 TransactionScope 对象的参数？还有另一种更好的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:30:35.990

这是由于超时错误。在`TransactionScope`超时的情况下，可能会决定回滚事务。

您需要在`TransactionScope`构造函数中增加超时值。默认最大值。超时为 10 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:33:10.643

移出街区（`scope.Complete();`MSDN[文章](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.complete.aspx)）。`connection`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T12:04:56.200

您是否尝试`Timeout = 0`在您的`Util.getConnection()`功能中设置？值 0 表示没有限制。这肯定会完成这项工作。通过设置`Timeout = 0`将完成每一个长时间的操作作业。

# git - 克隆 repo 时出现 Gitlab/Gitolite 问题

> ID：11491267
> 
> 赞同：4
> 
> 时间：2012-07-15T10:50:59.277
> 
> 标签：git, ssh, gitolite, gitlab

我严格按照[gitlab wiki 的手册](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/installation.md)设置了一个 Gitlab 。有用。我有网络访问权限，我也可以创建一个项目（并且在它之后创建了 git repo）。一切正常。

但是当我尝试克隆新创建的项目仓库时

```
git clone git@git.myserver.com:myproject.git 
```

从我的开发机器服务器说我需要输入**git**用户的密码（这个用户没有密码）。我认为它应该使用我提供的密钥对我进行身份验证。

我的环境：我已经在我的开发机器上成功创建了 ssh 密钥，将**HOME**环境变量设置为 C:\Users\。SSH 正确地授权用户使用其他服务器（以及该服务器）的密钥。我还为我的**git**用户添加了生成的密钥。

本地服务器用户的下一个命令也可以正常工作（这也是根据手册）：

```
sudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin 
```

我的 git 用户的**authorized_keys**文件如下：

```
# gitolite start
command="/home/git/bin/gl-auth-command gitlab",no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa <LONG_KEY_HERE> gitlab@odiszapc
# gitolite end 
```

从 gitlab Web 控制台添加 ssh 密钥后， **authorized_keys**文件中是否应该有我的用户密钥？伙计们，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:29:57.080

这意味着：

*   `~/.ssh`在本地（在您的目录中）找不到您的公共/私有 ssh 密钥
*   或者 gitlab 尚未在服务器中注册`~/.ssh/authorized_keys`公钥（这里似乎就是这种情况：添加您的 ssh 密钥应该触发 gitlab 的发布）。
    这类似于**[GitLab 问题 900](https://github.com/gitlabhq/gitlabhq/issues/900)**。
    您可以复制粘贴带有换行符的密钥。

> **在持久化之前从 key 中删除换行符**。

您将通过以下方式了解更多信息：

```
ssh -vvv git@git.myserver.com 
```

请注意，服务器上的所有操作都是作为用户“git”完成的，这就是它回退询问`git`密码的原因。[这就是 gitolite 与 ssh 一起工作的方式](http://sitaramc.github.com/gitolite/glssh.html)。

* * *

正如 OP 所提到的，问题在于 gitolite 没有正确安装。
这是 GitLab 的“验证步骤”应该检测到的问题：

```
sudo -u gitlab bundle exec rake gitlab:app:status RAILS_ENV=production 
```

它应该产生，关于 gitolite （我添加了 ' `vvv`' 和 ' `^^^`' 强调）：

```
# OUTPUT EXAMPLE
Starting diagnostic
config/database.yml............exists
config/gitlab.yml............exists
/home/git/repositories/............exists
/home/git/repositories/ is writable?............YES

vvvvvvvvvvvvvvvvvvv

remote: Counting objects: 603, done.
remote: Compressing objects: 100% (466/466), done.
remote: Total 603 (delta 174), reused 0 (delta 0)
Receiving objects: 100% (603/603), 53.29 KiB, done.
Resolving deltas: 100% (174/174), done.
Can clone gitolite-admin?............YES

^^^^^^^^^^^^^^^^^^

UMASK for .gitolite.rc is 0007? ............YES 
```

如果没有，则需要重新安装 Gitolite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T00:31:41.297

好吧，我想我明白了。

When I add key for the user from web interface, it hasn't been added to **authorized_keys** file. What I do is make full delete of the gitolite installation and then reinstall it according to native manual from the [gitolite wiki](https://github.com/sitaramc/gitolite/). Now when i've add a key to user, this key is added to **authorized_keys** and all works fine now.

# python - 在 virtualenv 中安装 pycairo

> ID：11491268
> 
> 赞同：32
> 
> 时间：2012-07-15T10:51:17.933
> 
> 标签：python, installation, virtualenv, pycairo

我尝试安装`pycairo`在 virtualenv 中以在 Django 项目中使用。我已经运行了`pip install pycairo==1.10.0`找到包并下载它的命令，这与其他命令（如`pip install pycairo`等）不同，但是在开始安装包时会引发错误。

这是日志：

```
Downloading/unpacking pycairo==1.10.0
  Running setup.py egg_info for package pycairo
    Traceback (most recent call last):
      File "<string>", line 14, in <module>
    IOError: [Errno 2] No such file or directory:
'/home/radu/Desktop/djangos/workout/venv/build/pycairo/setup.py'
Complete output from command python setup.py egg_info:
Traceback (most recent call last):

File "<string>", line 14, in <module>

IOError: [Errno 2] No such file or directory:
'/home/radu/Desktop/djangos/workout/venv/build/pycairo/setup.py'

----------------------------------------
Command python setup.py egg_info failed with error code 1 in 
/home/radu/Desktop/djangos/workout/venv/build/pycairo
Storing complete log in /home/radu/.pip/pip.log 
```

你能给我一些关于该怎么做的提示吗？我应该尝试为包编写一个 setup.py 文件，然后尝试安装它吗？（我不确定它甚至是一个解决方案，我仍在试图弄清楚我能做什么）。

提前致谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-07T23:14:46.830

好消息，大家！

我刚刚发布了 cairocffi： [http ://packages.python.org/cairocffi/](http://packages.python.org/cairocffi/)

它是 pycairo 的替代品，在 virtualenv 中使用 pip 安装，在 Python 2 和 3 以及 PyPy 上运行。

```
pip install cairocffi 
```

在您的代码中：

```
import cairocffi as cairo
# Enjoy the same API as Pycairo. 
```

欢迎反馈。（尽管[问题跟踪器](https://github.com/SimonSapin/cairocffi/issues)可能是比这里更好的渠道。）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-07T22:59:18.643

尽管 py2cairo 不能使用 pip 很好地安装，但您仍然可以使用分发版中 INSTALL 文件中的构建说明将 py2cairo 安装到虚拟环境中。

您需要为您安装操作系统的 cairo-dev/cairo-devel 软件包才能构建该软件包。

执行以下操作以安装到您的虚拟环境中：

1.  下载、解压并cd到py2cairo目录
2.  激活您的虚拟环境
3.  遵循标准构建程序

`./waf configure --prefix=$VIRTUAL_ENV`

`./waf build`

`./waf install`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-27T10:32:01.450

pycairo 目前不支持通过 pip/distutils 安装。该项目的[安装文档](http://cgit.freedesktop.org/py2cairo/tree/INSTALL)指示使用 waf 或 autotools。

要在 virtualenv 中使用 pycairo，您需要：

*   在整个系统范围内安装 pycairo，最好是通过您的发行版的软件包
*   然后，要么：
    1.  使用该选项创建一个 virtualenv或在事后`--system-site-packages`删除该文件。`lib/pythonX.Y/no-global-site-packages.txt`
    2.  或者添加一个符号链接到`cairo`包（包含 的目录`_cairo.so`）。像这样的东西：

        ```
        ln -s /usr/lib/python2.7/site-packages/cairo ./venv/lib/python2.7/site-packages

        ```

当然 1\. 有一个缺点，即您不会从 virtualenv 与系统范围内安装的其他软件包的隔离中受益。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-10T14:33:32.887

对于任何尝试将 pycairo（用于 Python 2.7）与 Homebrew 和 virtualenv 结合使用的人`--no-site-packages`......这对我有用：

1.  `brew install py2cairo`

2.  然后，找到 Homebrew 的安装路径，如下所示：

    ```
    ls -l /usr/local/lib/python2.7/site-packages/cairo/
    total 24
    lrwxr-xr-x  1 anentropic  admin   80 10 Jun 14:26 __init__.py -> ../../../../Cellar/py2cairo/1.10.0/lib/python2.7/site-packages/cairo/__init__.py
    lrwxr-xr-x  1 anentropic  admin   78 10 Jun 14:26 _cairo.so -> ../../../../Cellar/py2cairo/1.10.0/lib/python2.7/site-packages/cairo/_cairo.so 
    ```

3.  您想在这些符号链接的基础上找到路径，例如：
    `/usr/local/Cellar/py2cairo/1.10.0/lib/python2.7/site-packages`

4.  然后在您的 virtualenv 站点包中创建一个 .pth 文件：
    `echo "/usr/local/Cellar/py2cairo/1.10.0/lib/python2.7/site-packages" > venv/lib/python2.7/site-packages/cairo.pth`

（可能想要停用并重新激活您的 virtualenv 以求好运，不确定）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-27T18:48:36.430

如果`cairocffi`安装`virtualenv`不起作用并且`python-dev libffi-dev`不可用（ArchLinux）设置环境变量`PKG_CONFIG_PATH=/usr/lib/libffi-3.2.1/include`有效。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-06-03T21:25:30.383

如果您使用 Homebrew，您可以安装`pycairo`(Python 3+) 和`py2cairo`(Python 2.6-2.7) 配方：

`brew install pycairo`

# c# - 使用 Unity 引导程序时应用程序资源不可用

> ID：11491274
> 
> 赞同：0
> 
> 时间：2012-07-15T10:52:11.320
> 
> 标签：c#, wpf, prism, unity-container

我在应用程序资源中定义了以下资源

```
<Application.Resources>
    <Style x:Key="gridTextBox">
        <Setter Property="TextBox.Margin" Value="0,5,5,5"/>
    </Style>
</Application.Resources> 
```

并且资源照常应用于主窗口的文本框

```
<TextBox Name="textBox1" Style="{StaticResource gridTextBox}"/> 
```

我遇到的问题是，如果我通过 Unity 引导程序启动应用程序，应用程序会在文本框资源上引发 XamlParseException。但是，如果我在 app.xaml 上使用 startupUri，则应用程序会按预期加载。我的引导程序看起来像这样

```
public class Bootstrapper : UnityBootstrapper
{
    protected override void InitializeShell()
    {
        base.InitializeShell();
        App.Current.MainWindow = (Window)Shell;
        App.Current.MainWindow.Show();
    }

    protected override DependencyObject CreateShell()
    {
        var shell = new MainWindow();
        return shell;
    }
} 
```

而我的应用启动如下

```
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);
        new Bootstrapper().Run();
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:19:20.887

将您的 App.xaml 更改为此：

```
<Application x:Class="UnityBootstrapperTest.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             >
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary>
                    <Style x:Key="gridTextBox">
                        <Setter Property="TextBox.Margin" Value="0,5,5,5"/>
                    </Style>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

# html - 如何制作形状奇特的 html/css 菜单？

> ID：11491280
> 
> 赞同：2
> 
> 时间：2012-07-15T10:53:10.300
> 
> 标签：html, css, css-shapes

使用什么方法在网站上制作奇怪形状的菜单，如附件？圆圈的每一部分都应该是一个单独的链接。鼠标悬停应该相当精确，尤其是在中间附近。（绝对 20px 中间可能根本没有链接，如果不能 100% 精确的话）

![在此处输入图像描述](../Images/70ce49b057220829eb12c3a48d31021b.png)

我见过使用重叠矩形制作的不规则菜单，如下所示：[http](http://www.vanityclaire.com/) : //www.vanityclaire.com/ 形状是重叠的，但菜单是由矩形制成的，会发生一些作弊行为。但是，在我的情况下，重叠量太大而无法使用任何此类技术。除了使用闪存之外，是否有机会以浏览器/设备兼容的方式进行操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:30:44.710

实际上，您可以使用 CSS3 来实现 - 请参阅我的演示：[http](http://dabblet.com/gist/3116939) ://dabblet.com/gist/3116939 //

**编辑**：**也适用于 IE9** [http://dabblet.com/gist/3117278的版本](http://dabblet.com/gist/3117278)

这个想法是有一个`.pie`带有“切片”的div

```
<ul class="pie">
    <li class="slice" id="s1">
        <a class="slice-contents" href="#slice1"></a>
    </li>
    <li class="slice" id="s2">
        <a class="slice-contents" href="#slice2"></a>
    </li>
<!-- and so on -->
</div> 
```

你把馅饼做成圆盘，使用`border-radius: 50%;`

您倾斜和旋转每个切片。您将切片的内容恢复为非倾斜的矩形（如果您想在切片上添加文本，这也很有用），然后设置背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T10:58:54.483

SVG 可以做到。但在旧浏览器中不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:00:15.033

您可以尝试[图像映射](https://developer.mozilla.org/en/HTML/Element/map)或 SVG（带有后备/polyfill）。

# c - C 错误分割中的 strcat

> ID：11491281
> 
> 赞同：0
> 
> 时间：2012-07-15T10:53:11.103
> 
> 标签：c

```
#include <stdio.h>
#include <string.h>

int main() {
  char tab[2]={"12"};
  FILE *outfile;
  char *outname = "/home/dir/";
  printf("%s", strcat(outname,tab));
  outfile = fopen(strcat(outname,btab), "w");
  if (!outfile) {
    printf("There was a problem opening %s for writing\n", outname);
  }
} 
```

我有这个错误：分段错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T10:54:36.420

`outname`是字符串文字，字符串文字不可修改。修改字符串文字是未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T10:57:56.003

至少有两个错误：

```
char tab[2] = {"12"}; 
```

你最好使用`tab[3]`甚至更好`tab[]`——你需要一个额外的字符作为终止 NUL 字符。

还，

```
char *outname = "etc..."; 
```

在可执行文件的数据段中创建一个常量字符串——它不能被覆盖，因为`strcat`它使用它的第一个参数来连接两个字符串。因此，当`strcat()`尝试这样做时，它会出现段错误。采用

```
char outname[50]; // something big enough
strcpy(outname, "/home/dir"); 
```

反而。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T10:58:06.103

**outname**是**常量指针**，所以一旦你在里面输入了一些东西，你**就不能修改**它。

However if you want to copy things in it, make a char array of the size equal to tab[] array because here the size of string to be copied is known. Most of the time char pointers like OUTNAME are used when you are taking input from a user once and you don't know how long that input will be.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-13T15:47:53.763

In your code,

```
char *outname = "/home/dir/"; 
```

outname is a string literal and hence when used with strcat, it does not have enough length to hold the concatenated string.This results in segmentation fault.

Same is the case had you declared it as below,

```
char outname[] = "/home/dir/"; 
```

The solution for this to declare the size of the outname big enough to hold the concatenated string.

```
char outname[80] = "/home/dir/"; 
```

# c# - 如何使用c#中的存储过程从网格中的两个表中获取数据

> ID：11491286
> 
> 赞同：0
> 
> 时间：2012-07-15T10:54:00.597
> 
> 标签：c#, stored-procedures

我创建了一个名为 getCusnmae1 的存储过程

```
set ANSI_NULLS ON
set QUOTED_IDENTIFIER ON
go

ALTER PROCEDURE [dbo].[getCusnmae1]
AS
BEGIN
    SELECT ALL * FROM dbo.Customers;
    SELECT ALL * FROM dbo.Order1;
END 
```

现在我到目前为止所做的是创建一个属性类 Customer 并希望在网格上显示数据

我为此编写的代码是：

```
conn1.ConnectionString = " server=.\\ms2k5;database=Inventory;Trusted_Connection=true";
            conn1.Open();
            SqlCommand testCMD = new SqlCommand ("getCusnmae1", conn1);
            testCMD.CommandType = CommandType.StoredProcedure;
            SqlDataReader myReader = testCMD.ExecuteReader();
            List<Customer> list = new List<Customer>();
            while (myReader.Read())
            { 
                Customer md = new Customer();
                md.CustName = myReader.;
                md.custname = myReader.GetValue(1).ToString();
                md.contact = myReader.GetValue(2).ToString();
                list.Add(md);
            } 
```

通过它我只从客户表中获取列值我必须做什么才能从子表 Order1 中获取数据

当我写

```
 md.contact = myReader.GetValue(3).ToString(); 
```

访问订单表它不起作用..

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T10:58:29.987

使用[SqlDataReader.NextResult()](http://support.microsoft.com/kb/311274)方法来处理多个结果。

```
SqlDataReader myReader = testCMD.ExecuteReader();
while (myReader.Read())
 { 
  //
 } 
myReader.NextResult();
while (myReader.Read())
 { 
  //
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:08:24.050

默认情况下，数据读取器位于第一个结果上。对于从其他结果中获取数据，请使用

```
while (myReader .NextResult())
{} 
```

# c# - 获取系统本地化字符串

> ID：11491292
> 
> 赞同：1
> 
> 时间：2012-07-15T10:54:34.180
> 
> 标签：c#, winapi, locale

我已经为我的应用程序完成了自定义消息框，但我希望像消息框一样本地化我的确定/取消、重试/忽略按钮。这可能吗？

# ruby-on-rails - 如何使用 config.ru 在 Rails 应用程序（Puppet）中强制使用 activerecord 版本

> ID：11491300
> 
> 赞同：0
> 
> 时间：2012-07-15T10:56:19.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, puppet

我在使用 Puppet 和存储配置时遇到了一个错误，可以通过将 activerecord 降级到 3.0.11 来解决该错误。由于我在同一台服务器上运行了一些其他 Rails 站点，因此我安装了 3.0.11 版本，现在安装了 3 个版本。

```
actionmailer (3.2.1, 2.3.14)
actionpack (3.2.1, 2.3.14)
activemodel (3.2.1, 3.0.11)
activerecord (3.2.1, 3.0.11, 2.3.14)
activeresource (3.2.1, 2.3.14)
activesupport (3.2.1, 3.0.11, 2.3.14)
acts-as-taggable-on (2.1.0)
arel (3.0.0, 2.0.10)
builder (3.0.0, 2.1.2)
bundler (1.0.21)
coderay (1.0.6, 0.9.8)
daemon_controller (0.2.6)
erubis (2.7.0)
facter (1.6.5)
fastercsv (1.5.4)
fastthread (1.0.7)
hiera (0.3.0)
hiera-puppet (0.3.0)
hike (1.2.1)
i18n (0.6.0, 0.5.0, 0.4.2)
journey (1.0.1)
json (1.6.5, 1.4.3)
liquid (2.3.0)
mail (2.4.1)
mime-types (1.16)
multi_json (1.0.4)
mysql (2.8.1)
mysql2 (0.2.18)
net-ldap (0.2.2)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.3.0)
passenger (3.0.11)
pg (0.9.0)
polyglot (0.3.3)
puppet (2.7.6)
puppet-lint (0.1.13)
rack (1.4.1, 1.1.3)
rack-cache (1.1)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.1, 2.3.14)
railties (3.2.1)
rake (0.9.2.2, 0.8.7)
rdoc (3.12)
rest-client (1.6.1)
rmagick (2.13.1)
ruby-openid (2.1.8)
rubytree (0.5.3)
sprockets (2.1.2)
sqlite3-ruby (1.2.5, 1.2.4)
thor (0.14.6)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33, 0.3.31) 
```

根据[错误报告](https://groups.google.com/d/msg/puppet-bugs/QL1wb-tnZqs/BJQvGUwMVbIJ)，我需要做的就是添加`gem 'activerecord', '=2.2.2' require 'activerecord'`到我的 config.ru 文件以强制 puppet 使用这个版本的 activerecord。

我不确定要将这一行添加到哪个 config.ru 文件，所以我在路径中尝试了三个带有 puppet 和 rails 的文件，但没有一个起作用，即我继续收到相同的错误（“堆栈级别太深”）

```
$ locate config.ru
/usr/lib/ruby/gems/1.8/gems/passenger-3.0.11/test/stub/rack/config.ru
/usr/lib/ruby/gems/1.8/gems/passenger-3.0.11/test/stub/rails_apps/3.0/empty/config.ru
/usr/lib/ruby/gems/1.8/gems/puppet-2.7.6/ext/rack/files/config.ru
/usr/lib/ruby/gems/1.8/gems/rack-1.4.1/test/rackup/config.ru
/usr/lib/ruby/gems/1.8/gems/rack-test-0.6.1/spec/fixtures/config.ru
/usr/lib/ruby/gems/1.8/gems/rails-2.3.14/dispatches/config.ru
/usr/lib/ruby/gems/1.8/gems/railties-3.2.1/guides/code/getting_started/config.ru
/usr/lib/ruby/gems/1.8/gems/railties-3.2.1/lib/rails/generators/rails/app/templates/config.ru
/usr/share/puppet/ext/rack/files/config.ru 
```

关于我现在可以做些什么来强制 puppet 使用 activerecord v.3.0.11 而不必卸载任何其他版本的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:34:43.340

`usr/lib/ruby/site_ruby/1.8/puppet/feature/rails.rb`答案是修改

```
Puppet.features.add(:rails) do
   begin
   +    # http://projects.puppetlabs.com/issues/9290
   +    gem 'activerecord', '=3.0.11'
   require 'active_record'
   require 'active_record/version' 
```

# php - 是否将 preg_replace() 输入列入白名单？

> ID：11491303
> 
> 赞同：0
> 
> 时间：2012-07-15T10:56:49.800
> 
> 标签：php, html, input, xss, whitelist

白名单涉及哪些输入以防止 html 和 xss 注入？

从我收集到的带有正则表达式的 preg_replace 是一个好的开始。还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:13:03.953

清理输出比清理输入更容易。每次数据从一个上下文传递到下一个上下文时应用正确的转义。例如，在将数据传递到数据库时应用[mysqli_real_escape_string](http://php.net/mysqli_real_escape_string)（如果您使用的是 MySQLi 扩展），在将数据输出为 HTML 时应用[htmlspecialchars](http://php.net/htmlspecialchars)等等。

# java - Amazon Web Services (AWS) S3 Java 创建子目录（对象）

> ID：11491304
> 
> 赞同：29
> 
> 时间：2012-07-15T10:56:52.623
> 
> 标签：java, amazon-s3, amazon-web-services

我对[AWS Java SDK](http://aws.amazon.com/sdkforjava/)比较熟悉，也尝试过浏览对应的[Javadoc](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/)，但是不知道如何创建子目录，即bucket内的目录对象，以及如何上传文件。

假设`bucketName`并`dirName`对应已经存在的bucket（具有公共权限）和一个需要在bucket中创建的新（对象）目录（即bucketName/dirName/）

我尝试了以下方法：

```
AmazonS3Client s3 = new AmazonS3Client(
    new BasicAWSCredentials(ACCESS_KEY, SECRET_KEY));
s3.createBucket(bucketName + "/" + dirName); //throws exception 
```

在第二行引发异常。

一个创建子目录并将文件上传到它的简短片段将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-15T11:19:47.390

S3 中没有“子目录”。有桶，桶内有键。

您可以使用前缀搜索来模拟传统目录。例如，您可以将以下密钥存储在存储桶中：

```
foo/bar1
foo/bar2
foo/bar3
blah/baz1
blah/baz2 
```

然后做一个前缀搜索`foo/`，你会得到：

```
foo/bar1
foo/bar2
foo/bar3 
```

有关[`AmazonS3.listObjects`](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#listObjects%28com.amazonaws.services.s3.model.ListObjectsRequest%29)更多详细信息，请参阅。

* * *

**更新：**假设您已经有一个现有的存储桶，该存储桶下的键将包含`/`：

```
s3.putObject("someBucket", "foo/bar1", file1);
s3.putObject("someBucket", "foo/bar2", file2);
... 
```

然后您可以列出所有以 开头的键`foo/`：

```
ObjectListing listing = s3.listObjects("someBucket", "foo/"); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-10-17T09:33:55.883

S3 看不到我们在操作系统上执行此操作的传统方式的目录。以下是创建目录的方法：

```
public static void createFolder(String bucketName, String folderName, AmazonS3 client) {
    // create meta-data for your folder and set content-length to 0
    ObjectMetadata metadata = new ObjectMetadata();
    metadata.setContentLength(0);

    // create empty content
    InputStream emptyContent = new ByteArrayInputStream(new byte[0]);

    // create a PutObjectRequest passing the folder name suffixed by /
    PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName,
                folderName + SUFFIX, emptyContent, metadata);

    // send request to S3 to create folder
    client.putObject(putObjectRequest);
} 
```

正如 casablanca 已经说过的，您可以将文件上传到这样的目录：

```
s3.putObject("someBucket", "foo/bar1", file1); 
```

[在此处](http://javatutorial.net/java-s3-example)阅读整个教程以获取详细信息，最重要的是您将找到如何删除目录的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-26T14:51:58.310

在较新版本的 SDK 中，您可以执行以下操作（无需创建空 InputStream）来创建一个空文件夹：

```
String key = parentKey + newFolderName;
if (!StringUtils.endsWith(key, "/")) {
    key += "/";
}

PutObjectRequest putRequest = PutObjectRequest.builder()
        .bucket(parent.getBucket())
        .key(key)
        .acl("public-read")
        .build();
s3Client.putObject(putRequest, RequestBody.empty()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-23T00:21:09.087

在这里留下这个答案，以防有人偶然发现。我一直在使用*aws sdk 版本 - 1.11.875*，以下在尝试将文件上传到 S3 存储桶时成功为我创建了一个文件夹。我不必像前面的答案中提到的那样显式创建文件夹。

```
private void uploadFileToS3Bucket(final String bucketName, final File file) {
    final String fileName = "parent/child/" + file.getName();
    final PutObjectRequest putObjectRequest = new PutObjectRequest(bucketName, fileName, file);
    amazonS3.putObject(putObjectRequest);
} 
```

这将在指定的 S3 存储桶中创建父文件夹和父/子文件夹，并将文件上传到子文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-17T11:18:38.233

这对我有用。我使用了spring boot和根据Multipart机制上传的文件。我想将我的图像保存在我的 aws s3 存储桶中的*照片文件夹中。*我需要像这样保存照片/mypic.jpg

----控制器类方法----

```
@PostMapping("/uploadFile")
    public String uploadFile(@RequestPart(value = "file") MultipartFile file) throws IOException {
        return this.amazonClient.uploadFile(file);
} 
```

----服务类（控制器的实现）----

```
 public String uploadFile(MultipartFile multipartFile) throws IOException {

            try {
                File file = convertMultiPartToFile(multipartFile);
                String fileName = "photoes/"+generateFileName(multipartFile);  //here give any folder name you want
                uploadFileTos3bucket(fileName, file);
            } catch (AmazonServiceException ase) {
                logger.info("Caught an AmazonServiceException from GET requests, rejected reasons:");
            }
            return fileName;
        } 
```

*重点是将您想要的文件夹名称连接为文件名的前缀*

另外，我将向您展示如何删除文件夹。关键是将文件夹名称作为keyName（键名称是s3存储桶中上传的对象名称。）。我也会展示代码片段。

----控制器类方法----

```
@DeleteMapping("/deleteFile")
    public String deleteFile(@RequestPart(value = "keyName") String keyName) {
        return this.amazonClient.deleteFile(keyName);
    } 
```

----服务类（控制器的实现）----

```
 public String deleteFile(String keyName){
        try {
            s3client.deleteObject(new DeleteObjectRequest(bucketName, keyName));
        } catch (SdkClientException e) {
            e.printStackTrace();
        }
        return "deleted file successfully!";
    } 
```

要删除我们创建的照片文件夹，请像这样调用方法。`deleteFile("photos/")` *重要：- / 是强制性的*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-05-26T11:22:47.360

如果要创建文件夹，则需要使用 put 命令使用以下键在*其中*创建文件夹 1 ：

在存储桶的根目录 -> folder1/folder1_$folder$

在路径 folder2/folder3/ -> folder2/folder3/folder1/folder1_$folder$

它始终是 all_previous_folders/folderName/folderName_$folder$

# arrays - 内部数组的访问元素

> ID：11491308
> 
> 赞同：3
> 
> 时间：2012-07-15T10:58:02.993
> 
> 标签：arrays, delphi

给定这样的类：

```
TIntClass = class
private
    myInts : TList<Integer>;
...
end; 
```

如何使用 [] 运算符访问内部列表的元素，例如

```
myIntList = TIntClass.Create();
myIntList[5]; 
```

?

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:46:37.497

如果我理解正确，您需要定义一个私有函数，它将充当默认属性的“getter”：

**注意：代码未经测试**

```
type
  TIntClass = class
  private
      // returns a value from myInts based on Index parameter
      function getItem(Index: Integer): Integer;
  private
      myInts : TList<Integer>;
  ...
  public
      property Items[Index: Integer]: Integer read getItem; default;
  end;

...
implementation

function TIntClass.getItem(Index: Integer): Integer;
begin
  Result := myInts[Index];
end; 
```

所以现在你可以这样做：

```
procedure test;
var
  LMyIntClass: TIntClass;
  L5thElemValue: Integer;
begin
  L5thElemValue := LMyIntClass[4]; // first element is accessed using LMyIntClass[0]
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:17:04.070

它应该是 myIntList.myInts[5]，假设您在同一个单元内，以便您可以访问 TIntClass 的私有成员。

# android - java.lang.RuntimeException：release() 之后的方法调用

> ID：11491319
> 
> 赞同：-1
> 
> 时间：2012-07-15T11:00:35.977
> 
> 标签：android, thread-safety, android-camera, runtimeexception

我有一个 android 应用程序，它有两个相机活动。他们不时地在他们之间切换。切换几次后，第一个活动会引发此异常..知道为什么会发生这种情况吗？如何解决？请帮助我。感谢您阅读我的问题，祝您有愉快的一天！

![在此处输入图像描述](../Images/c163a72148fc975588cdf198092e6c33.png)

```
 public abstract class SampleViewBase extends SurfaceView implements SurfaceHolder.Callback, Runnable {
private static final String TAG = "LogcatActivity";

private Camera              mCamera;
private SurfaceHolder       mHolder;
private int                 mFrameWidth;
private int                 mFrameHeight;
private byte[]              mFrame;
private boolean             mThreadRun;
private int                 frameNumber=1;//my

public SampleViewBase(Context context) {///
    super(context);
    mHolder = getHolder();
    mHolder.addCallback(this);
    Log.i(TAG, "Instantiated new " + this.getClass());

}

public int getFrameWidth() {
    return mFrameWidth;
}

public int getFrameHeight() {
    return mFrameHeight;
}

public void surfaceChanged(SurfaceHolder _holder, int format, int width, int height) {
    Log.i(TAG, "surfaceCreated");
    if (mCamera != null) {
        Camera.Parameters params = mCamera.getParameters();
        List<Camera.Size> sizes = params.getSupportedPreviewSizes();
        //--
        List<String> flashing_methords=params.getSupportedFlashModes();
        params.setFlashMode(flashing_methords.get(3));

       // List<String> color_effects=params.getSupportedColorEffects();
       // params.setColorEffect(color_effects.get(2));
        //--
        mFrameWidth = width;
        mFrameHeight = height;

        // selecting optimal camera preview size
        {
            double minDiff = Double.MAX_VALUE;
            for (Camera.Size size : sizes) {
                if (Math.abs(size.height - height) < minDiff) {
                    mFrameWidth = size.width;
                    mFrameHeight = size.height;
                    minDiff = Math.abs(size.height - height);
                }
            }
        }

        params.setPreviewSize(getFrameWidth(), getFrameHeight());
        mCamera.setParameters(params);
        mCamera.startPreview();
    }
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.i(TAG, "surfaceCreated");
    try{
    mCamera.reconnect();
    mCamera = Camera.open();
    mCamera.setPreviewCallback(new PreviewCallback() {
        public void onPreviewFrame(byte[] data, Camera camera) {
            synchronized (SampleViewBase.this) {
                mFrame = data;
                SampleViewBase.this.notify();
            }
            /*  if((frameNumber%120)==0){

                    synchronized (SampleViewBase.this) {
                        mFrame = data;
                        SampleViewBase.this.notify();
                        frameNumber=1;
                }

            }else{
                frameNumber++;
            }*/
        }
    });
    (new Thread(this)).start();
    }catch (Exception e) {
        Log.v(TAG, "reconnect error" + e);
    }

}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.i(TAG, "surfaceDestroyed");
    mThreadRun = false;
    if (mCamera != null) {
        synchronized (this) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);

            mCamera.release();
            mCamera = null;
        }
    }
}

protected abstract Bitmap processFrame(byte[] data);

public void run() {
    mThreadRun = true;
    Log.i(TAG, "Starting processing thread");
    while (mThreadRun) {
        Bitmap bmp = null;

        synchronized (this) {
            try {
                this.wait();
                bmp = processFrame(mFrame);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

        if (bmp != null) {
            Canvas canvas = mHolder.lockCanvas();
            if (canvas != null) {
                canvas.drawBitmap(bmp, (canvas.getWidth() - getFrameWidth()) / 2, (canvas.getHeight() - getFrameHeight()) / 2, null);
                mHolder.unlockCanvasAndPost(canvas);
            }
            bmp.recycle();
        }
    }
}

public void releaseAll() {
    Log.i(TAG, "hardweare released");
    mThreadRun = false;
    if (mCamera != null) {
        synchronized (this) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);

            mCamera.release();
            mCamera = null;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T20:18:49.120

覆盖后退键后，尝试从活动中释放相机资源。

```
@Override
public void onBackPressed()
{
    releaseCamera();
    super.onBackPressed();
}

private void releaseCamera()
{
    synchronized (this)
    {
        if(mCamera!=null)
        {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }
    }
} 
```

将方法 releaseCamera() 添加到您的 SurfaceView 并在用户单击后退按钮时从您的活动中进行调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:06:46.207

该[`mCamera.release()`](http://developer.android.com/reference/android/hardware/Camera.html#release%28%29)函数表示断开并释放Camera对象资源。它执行的工作与您的下一条`mCamera = null;` 语句相同。为什么要这么做？

# android - AppEngine Connected Android 项目在更新后无法正常工作

> ID：11491320
> 
> 赞同：0
> 
> 时间：2012-07-15T11:00:37.150
> 
> 标签：android, google-app-engine, android-c2dm

我将我的 SDK 工具和 SDK 平台工具更新到最新版本，令我惊恐的是，如果我执行**Debug as > Local AppEngine connected Android Project** ，AppEngine Connected Android 项目的模拟器不会启动。

我正在做一个项目，并且使用这个插件选项也做了很多工作。有没有办法我仍然可以发展。也许以某种方式我可以分别启动 AppEngine 和 Android 项目，但它们仍然可以工作（作为远程 AppEngine 调试不是问题）。

据我所读，我认为他们这样做是因为他们不赞成 C2DM 消息传递。相反，他们带来了 Make AppEngine Backends 的选项。但不幸的是，他们仍然没有处理文档或支持。

在他们发布文档之前，我有什么办法可以继续工作，或者我如何自己进行过渡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T08:43:08.163

以下是自 sdk 更新以来我调试本地化的方式：

*   将应用引擎项目调试为 Web 应用程序
*   与管理器一起运行 AVD
*   将 android 项目调试为 Android 应用程序

远程：

*   与管理器一起运行 AVD
*   将 android 项目作为 Android 应用程序运行

希望这可以帮助。

编辑：

远程调试后，即使您清除数据并要求“调试 android 项目”，AVD 似乎仍会与远程服务器通信。在这种情况下，请执行“作为本地应用引擎连接的 android 应用程序的调试”。这将启动本地服务器，但不会启动 Android 应用程序。然后将 android 项目调试为 Android 应用程序，它将与本地服务器通信。

# java - 如何以编程方式处理/清理 MessageListener bean

> ID：11491321
> 
> 赞同：0
> 
> 时间：2012-07-15T11:01:07.370
> 
> 标签：java, spring, spring-integration, imdb

我正在使用 Spring3.1（独立环境）

我通过实现通过模板连接到主题的 MessageListener 创建了 MDB。

这个 bean 范围是单例的。

有时我想处理那个 Listener Bean。当我说 dispose 时，我的意思是我希望 ioc 释放该资源并从容器中清除该 bean。（这最终将使该 bean 停止侦听消息并释放未使用的内存。）

1.  我需要使用 getBean(..) 方法通过它的 id 检索这个 bean 来执行它的处理。我听说使用 getBean(..) 会导致内存泄漏。否则我该怎么做？

2.  我应该为此目的使用单例范围还是原型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:18:23.213

我不确定您所说的 getBean() 和内存泄漏是什么意思，但是...

如果您想完全删除它，而不仅仅是停止它，您可以在它自己的“子”应用程序上下文中声明它。使主上下文成为父上下文，以便它可以引用主上下文中的 bean（如果需要）。

```
/**
 * Create a new ClassPathXmlApplicationContext with the given parent,
 * loading the definitions from the given XML files and automatically
 * refreshing the context.
 * @param configLocations array of resource locations
 * @param parent the parent context
 * @throws BeansException if context creation failed
 */
public ClassPathXmlApplicationContext(String[] configLocations, ApplicationContext parent) throws BeansException {
    this(configLocations, true, parent);
} 
```

当您想删除它时；调用 context.destroy()。

# sql-server - 备份失败，“数据库正在使用中”

> ID：11491324
> 
> 赞同：0
> 
> 时间：2012-07-15T11:01:35.653
> 
> 标签：sql-server

备份：

```
private void Button1_Click(object sender, EventArgs e)
{
   SqlCommand cmd = new SqlCommand("backup database emp to disk ='C:\\emp.bak'", con);
    con.Open();
    cmd.ExecuteNonQuery();
    // ExecutenonQuery();
    con.Close();
} 
```

但是当我恢复时：

```
private void Button2_Click(object sender, EventArgs e)
{
    SqlCommand cmd = new SqlCommand("restore database emp from  disk ='C:\\emp.bak'", con);
    con.Open();
    cmd.ExecuteNonQuery();
    // ExecutenonQuery();
    con.Close();
} 
```

我得到错误：

> RESTORE 无法处理数据库“emp”，因为该会话正在使用它。建议在执行此操作时使用 master 数据库。RESTORE DATABASE 异常终止。

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:25:22.500

可能您应该按照它的建议使用主数据库。

为什么不使用 SMO 库？down 是如何使用 SMO 备份和恢复数据库的示例。

如何进行备份

```
Server server = new Server(sqlServer);

var bdi = new BackupDeviceItem(String.Format(@"C:\Opticien\Data\Sauvegardes\{0}", backupName), DeviceType.File);
var backup = new Backup() { Database = databaseName, Initialize = true };
backup.Devices.Add(bdi);

backup.SqlBackup(server); 
```

如何恢复：

```
var server = new Server(sqlServer);
var restore = new Restore()
{
     Database = database,
     Action = RestoreActionType.Database,
     ReplaceDatabase = true,
};
restore.Devices.AddDevice(backupPath, DeviceType.File);
var dt = restore.ReadFileList(server);
var dLogicalName = dt.Rows[0]["LogicalName"].ToString();

restore.RelocateFiles.Add(new RelocateFile(dLogicalName, String.Format(@"C:\Opticien\Data\{0}.mdf", database)));
restore.RelocateFiles.Add(new RelocateFile(dLogicalName + "_Log", String.Format(@"C:\Opticien\Data\{0}.ldf", database)));

restore.SqlRestore(server); 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:09:14.750

通常，当您发出恢复命令时，您确实希望您的 SQL 数据库处于单用户模式，这样您就可以保证在发生这种情况时其他进程没有使用同一个数据库。如果当时其他人正在使用数据库，您将收到与您当前看到的一样的错误。

查看[单用户](http://msdn.microsoft.com/en-us/library/ms345598.aspx)文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:12:28.723

您可能需要考虑在恢复之前终止当前会话：

```
use master
ALTER DATABASE YourDatabase SET SINGLE_USER WITH ROLLBACK IMMEDIATE 

--do you stuff here 

ALTER DATABASE YourDatabase SET MULTI_USER 
```

更多细节：

[如何终止与 SQL Server 2005 数据库的所有当前连接？](https://stackoverflow.com/q/11620/1268570)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T11:14:26.417

当您想要恢复 SQL 数据库时，请确保任何进程都没有使用此数据库。它最好使用另一个名称来恢复Databse。我编辑我的答案：

```
DECLARE @SPId int
DECLARE @SQL nvarchar(100)

--SET @DatabaseName = N'AdventureWorks2008'
SET @DatabaseName = DB_NAME()
DECLARE my_cursor CURSOR FAST_FORWARD FOR
SELECT SPId FROM MASTER..SysProcesses
WHERE DBId = DB_ID(@DatabaseName) AND SPId <> @@SPId

OPEN my_cursor

FETCH NEXT FROM my_cursor INTO @SPId

WHILE @@FETCH_STATUS = 0
BEGIN
SET @SQL = 'KILL ' + CAST(@SPId as nvarchar(10))
print @SQL
EXEC sp_executeSQL @SQL
--KILL @SPId -- Causing Incorrect syntax near '@spid'.

FETCH NEXT FROM my_cursor INTO @SPId
END

CLOSE my_cursor
DEALLOCATE my_cursor 
```

# mysql - 如何两次加入同一张桌子？

> ID：11491327
> 
> 赞同：-2
> 
> 时间：2012-07-15T11:01:51.270
> 
> 标签：mysql, sql

我坚持创建 SQL 查询。我有以下两个表：

```
member
(
 memberid    int,
 membername  varchar(50)
)

message
(
 messageid   int, 
 message     varchar(100), 
 sender      int, 
 receiver    int
) 
```

`sender`并且`receiver`是带有 table`member`和 column的外键`memberid`。我想显示带有`name`和`id`的消息列表`sender`和`receiver`。

我怎样才能在这里建立正确的连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:05:07.103

你可以尝试类似的东西

```
SELECT  *
FROM    message m INNER JOIN
        member snd ON   m.sender = snd.memberid INNER JOIN
        member rcv ON   m.receiver = rcv.memberid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:16:25.657

我会`LEFT OUTER JOIN`在这种情况下使用，因为您的`message.sender`和`message.receiver`允许`NULL`值。如果以下任一列是，您可能不想跳过消息`NULL`：

```
select msg.messageid as messageid,
       msg.message as message,
       mem1.memberid as sender_id,
       mem1.membername as sender_name,
       mem2.memberid as receiver_id,
       mem2.membername as receiver_name
from message as msg
left outer join member as mem1 on msg.sender = mem1.memberid
left outer join member as mem2 on msg.receiver = mem2.memberid; 
```

[http://sqlfiddle.com/#!3/ac80e/2/0](http://sqlfiddle.com/#!3/ac80e/2/0)

# iphone - Xcode > 产品 > 存档，协同设计问题

> ID：11491329
> 
> 赞同：2
> 
> 时间：2012-07-15T11:01:57.147
> 
> 标签：iphone, ios, xcode

当我在 xcode 中选择 Product > Archive 时，我收到以下消息：

“codesign 想要使用钥匙串中的钥匙“<key>”进行签名。”

![在此处输入图像描述](../Images/115f0016655474f8da6620a97e130165.png)

我认为有问题，它不应该显示 "< key >" ，对吧？？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T19:05:58.300

只需选择始终允许。使用它没有问题。它实际上为 XCode 应用程序提供了开发人员证书。这样使用它 Xcode 就可以对您的应用程序进行签名。一旦您选择始终允许。以后它不应该再问你了。

# javascript - 在不与页面的 JavaScript 库冲突的情况下包含特定版本的 JQuery 和插件？

> ID：11491332
> 
> 赞同：2
> 
> 时间：2012-07-15T11:02:32.647
> 
> 标签：javascript, jquery-plugins, bookmarklet, jquery

**TL;DR**：我想包含一个特定版本的 JQuery 和一个特定的 JQuery 插件，该插件与我在多个不同站点上包含 jQuery 相关联，我对它们使用的 JavaScript 库/插件一无所知，没有冲突。可能的？如何？

**整个故事**：假设我想构建一个 Reddit 平台，在该平台上，多个站点可以通过在页面上包含`http://myredditplatform.com/reddit.js`和`<a href="" data-reddit-thread-id="1234"></a>`散布元素来链接到 Reddit 线程。一旦用户点击了这样的链接，我就会在一个漂亮的模式窗口中打开 reddit。

现在，因为我希望 Reddit 平台体验在所有使用我的脚本的网站上保持一致，所以我希望所有网站都使用我的特定模式插件，并且我想以我的特定方式设置链接的样式。

但我永远无法确定其他网站正在使用什么 Javascript 库或插件，所以我必须确保在`reddit.js`加载 JQuery 时，它不能与页面上的其他库冲突，并且在`reddit.js`加载时，例如，`prettyPhoto`插件应该只关联使用我包含的 jQuery 库。

但我也希望我的平台得到广泛采用，所以我不想对必须有 jQuery 或必须加载 prettyPhoto 的网站施加更多限制。我只希望他们包含这个 JS 文件，`reddit.js`它为他们做所有事情。

有可能完成这项工作吗？你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:46:08.083

下面是我的小部件加载器的精简版本，它基本上可以满足您的需求。

代码的关键行是`jquery1_8_2 = jQuery.noConflict(true);`

更多信息在这里：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

```
var myWidgetLoader = function() {

   this.start = function() {
      this.getScript('https://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js', function(){

         jquery1_8_2 = jQuery.noConflict(true);  // true = unconflict all jQuery vars, including "jQuery"
         (function(jQuery) {
            var $ = jQuery;
            // do stuff that uses jQuery
         })(jquery1_8_2);

      });
   }

   this.getScript = function(url, success) {
      var script = document.createElement('script');
      script.src = url;
      var head = document.getElementsByTagName('head')[0], done=false;
      script.onload = script.onreadystatechange = function(){
         if ( !done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete') ) {
            done = true;
            success();
         }
      };
      head.appendChild(script);
   }

}

myWidgetLoader.start(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T11:30:27.410

您可以制作一个不会破坏全局变量的 jQuery 自定义构建。看看源代码：[https](https://github.com/jquery/jquery/blob/master/src/exports.js) ://github.com/jquery/jquery/blob/master/src/exports.js 。您可以修改这一行：

```
window.jQuery = window.$ = jQuery; 
```

变成这样：

```
window.myRedditPluginJquery = jQuery; 
```

然后当你运行你的代码时，你需要使用`myRedditPluginJquery`as `$`。像这样的 IIFE：

```
(function($){
    //your code goes here
    //you also probably have to paste the source code for that plugin here too
})(myRedditPluginJquery); 
```

# android - 以编程方式从当前应用程序调用另一个 .apk 文件？

> ID：11491333
> 
> 赞同：2
> 
> 时间：2012-07-15T11:03:00.107
> 
> 标签：android, apk

是否可以从我当前在 Android 中的应用程序中以编程方式调用另一个 .apk 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:06:24.567

尝试：

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new 
        File(Environment.getExternalStorageDirectory() + "/path/" 
        + "app_apk.apk")), "application/vnd.android.package-archive");
        CurrentActivity.this.startActivity(intent); 
```

# javascript - 以什么顺序声明变量和函数？

> ID：11491334
> 
> 赞同：1
> 
> 时间：2012-07-15T11:03:03.603
> 
> 标签：javascript进行编码。, javascript, performance, coding-style, readability, maintainability

# 语境

我正在学习如何以一致、可读和可维护的方式使用**[javascript进行编码。](/questions/tagged/javascript "显示标记为“javascript”的问题")**

我对变量和函数的声明顺序一无所知。

# 例子：

```
var example = {

    A: function() {
        var a, b, c;
    },

    B: function() {
        var a, b, c;
    },

    C: function() {
        var a, b, c;
    }

} 
```

# 问题

*   按字母顺序是最好的吗？
*   那命令可以提高代码执行的速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:27:20.633

我使用[jslint](http://www.jslint.com/)来检查代码质量。它可以与 Visual Studio 和许多其他非常好的东西集成。

JSLint 建议使用类似的东西：

```
var example = {
    A: function () {
        var a, b, c;
    },

    B: function () {
        var a, b, c;
    },

    C: function () {
        var a, b, c;
    }
}; 
```

关于变量，它建议始终在封闭范围的开头声明它们，因为这实际上是代码的解释方式（这是 JavaScript 语义）。

关于性能，您无法通过更改顺序来提高或降低性能。

关于顺序...您应该按照对您（和您的团队）更有意义的顺序进行操作。我个人喜欢自上而下或自下而上（这意味着将最重要的函数放在第一位，然后将依赖函数放在那个之后，等等......或者反过来......把更简单的函数放在第一位，然后然后是建立在这些之上的功能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:18:06.523

我认为这是伪代码而不是实际代码。然而，它更多的是代码指南的问题——可读性、可维护性……——而不是其他问题。

另外，我会考虑使用[多个 var 语句](http://benalman.com/news/2012/05/multiple-var-statements-javascript/)来声明变量。`var`只有当它只是声明并且变量在逻辑上彼此相关时，我才使用一个语句。

此外，由于[提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)，对于 JavaScript 来说，您在作用域的哪个点声明变量也无关紧要：JS 总是将声明移到顶部，因此您可以自由地将代码塑造成有助于帮助的逻辑块您可以更好地维护和阅读自己的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:19:42.670

我不确定你的问题是什么，但在你的问题中`declaring variables and functions, in what order?`你提到了这个词`order`，所以当你声明变量和函数时，这很重要

```
test();
function test()
{
    alert(1);
} 
```

在声明之前调用的函数，但它会运行并且不会出现任何错误，但跟随会导致错误

```
a();
a = function()
{
    alert(1);
}; 
```

应在将函数表达式分配给变量后调用函数调用。你可以在这里找到更多[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Statements/var)和[Decent Programming Advice](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)和[JavaScript Hoisting Explained](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/)。

# entity-framework - 具有多个外键的代码优先关系

> ID：11491337
> 
> 赞同：0
> 
> 时间：2012-07-15T11:03:54.540
> 
> 标签：entity-framework, ef-code-first, code-first

我有一个场景，我对首先使用 EF 代码感到有些困惑。我创建的类如下：

```
public class Company
{
    public int Id { get; set; }
    public List<Contact> Contacts { get; set; }
    public List<Job> Jobs { get; set; }
}

public class Contact
{
    public int Id { get; set; }
    [ForeignKey("CompanyId")]
    public virtual Company Company { get; set; }
    public int CompanyId { get; set; }       
    public List<Job> Jobs { get; set; }
}

public class Job
{
    public int Id { get; set; }
    [ForeignKey("CompanyContactId")]
    public virtual CompanyContact CompanyContact { get; set; }
    public int CompanyContactId { get; set; }
    [ForeignKey("CompanyId")]
    public virtual Company Company { get; set; }
    public int CompanyId { get; set; } 
} 
```

但是，当我构建数据库时，出现以下错误：

在表 'Contacts' 上引入 FOREIGN KEY 约束 'FK_Contacts_Company_CompanyId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

因此，一些研究表明答案是使用 Fluent API 根据需要定义映射，但我无法理解如何执行此操作或找到类似场景的示例。

我意识到我可以从 Job 中删除 Company 类并通过 Contact 导航，但如果可能的话，我不希望这样做。

感激地收到任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:55:24.950

您想使用 EF 模型构建器来设置这些关系。

您将如何为您的一个属性执行此操作的示例如下：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Contact>().HasOptional(e => e.Company).WithMany(c=>c.Contacts);
    } 
```

有关如何使用模型构建器的更多说明，请查看我关于[EF 导航属性的文章](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)

# google-app-engine - 未加载嵌入式实体

> ID：11491343
> 
> 赞同：0
> 
> 时间：2012-07-15T11:05:23.157
> 
> 标签：google-app-engine, datanucleus

我正在尝试将`Job`具有嵌入式实体的实体存储`Range`在 Google App Engine 数据存储（本地测试系统）中。当我持久化一个新实体时，我可以看到嵌入实体的属性被持久化了。但是，如果我通过 Id 或查询加载实体，则范围属性为空。

```
@PersistenceCapable
public class Job {

    // embedded entity
    @PersistenceCapable
    @EmbeddedOnly
    public static class Range {

        @Persistent
        private long start;

        @Persistent
        private long length;

        public long getLength() {
            return this.length;
        }

        public void setStart(long start) {
            this.start = start;
        }

        public long getStart() {
            return start;
        }
    }

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Key key;

    @Persistent
    @Embedded
    private Range range;

    // getters and setters ... 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:04:46.390

再一次，答案是：这不是一个错误，而是一个特性。事实证明，嵌入式实体是延迟加载的，只要我不调用 getter，就不会填充属性

# android - Android WebView 应该OverrideUrlLoading

> ID：11491349
> 
> 赞同：2
> 
> 时间：2012-07-15T11:06:45.093
> 
> 标签：android, android-webview, webviewclient

我正在尝试制作一个可以在其中查看 youtube 视频的应用程序，在我的布局中，我有一个文本框、一个图像按钮和一个 webview。

现在我希望android在webview中的url发生变化时显示一个toast，如果可能的话，只有“watch？”的url。在里面。

直到现在我用“shouldOverrideUrlLoading”尝试了这个东西，这样做的目的是让用户留在 youtube 网站上并在用户点击视频时显示敬酒，这里是代码：

```
 @SuppressLint("SetJavaScriptEnabled")
        public void search() {
        surl = MainAct.ytresurl + MainAct.query;
        WebSettings ws = wv.getSettings();
        ws.setJavaScriptEnabled(true);
        ws.setPluginsEnabled(true);
        MainAct.wv.loadUrl(MainAct.surl);
        WebViewClient wvc = new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view,String url) {
                if (!url.startsWith("http://m.youtube.com/")) {
                    MainAct.wv.loadUrl(surl);
                    return true;
                } else if (url.startsWith("http://m.youtube.com/watch?")) {
                    MainAct.vidurl = url;
                    Toast.makeText(getApplicationContext(), "URL:" + url, Toast.LENGTH_SHORT).show();
                    MainAct.wv.loadUrl(surl);
                    return true;
                }
                return false;
            }
        };
        MainAct.wv.setWebViewClient(wvc/*new Callback()*/);
    } 
```

surl 是带有查询的 url（尚未实现 %20 转换的空间） MainAct.vidurl 是用户将要观看的视频的 url。

但是当我测试我的代码时，看视频的吐司没有出现，有什么建议吗？

谢谢你，沃特

# ruby-on-rails - 无法验证（检查）贝宝帐户

> ID：11491352
> 
> 赞同：2
> 
> 时间：2012-07-15T11:07:03.580
> 
> 标签：ruby-on-rails, paypal, verify

当用户注册时，我需要验证 PayPal 帐户。

我有功能（来源 - [http://curry.byteally.com/finding-verification-status-of-a-paypal-account-ruby-on-rails-paypal-adaptive-accounts-getverifiedstatus/](http://curry.byteally.com/finding-verification-status-of-a-paypal-account-ruby-on-rails-paypal-adaptive-accounts-getverifiedstatus/)）

我输入了我的凭据并进行了更改。

我把它放在我的 static_pages_controller 中（现在）。

```
 def verify_paypal
     ...
//change:
if res.status == 200
 @xml = XmlSimple.xml_in(res.content)
 #check if the status node exists in the xml
if @xml['accountType']!=nil
account_type = @xml['accountType'][0]
if account_type.to_s() == "Business"
    render :text => "Business account!"
elseif account_type.to_s() == "Premier"
    render :text => "Premier Account!"
elseif account_type.to_s() == "Personal"
    render :text => "Personal account!"
else
    render :text => "Account type not null but not a valid PayPal account type."
end
   end 
```

在我的 routes.rb 中添加了一行

```
 post "static_pages/verify_paypal" 
```

在我看来：

```
 <%= link_to "verify", static_pages_verify_paypal_path, :method => :post %> 
```

但它不断给我文字：

```
 "Gee! sorry! something went seriously wrong" 
```

什么意思，我的用户没有在 PayPal 中注册（但它是！）。

**来自 Heroku 日志**的 EDTED ：****

 **```
←[33m2012-07-15T17:22:56+00:00 app[web.1]:←[0m Started POST "/static_pages/verify_paypal" for 46.119.153.97 at 2012-07-15 17:22:56 +0000
←[33m2012-07-15T17:22:56+00:00 app[web.1]:←[0m Processing by StaticPagesController#verify_paypal as HTML
←[33m2012-07-15T17:22:56+00:00 app[web.1]:←[0m   Parameters: {"authenticity_token"=>"xnW29ekJqp7qBNrvIZJjPSh05AMdiHWNQMvLZhevCig="}
←[36m2012-07-15T17:22:57+00:00 heroku[router]:←[0m POST sharp-cloud-3895.herokuapp.com/static_pages/verify_paypal dyno=web.1 queue=0 wait=0ms service=1058ms status=200 bytes=42
←[33m2012-07-15T17:22:57+00:00 app[web.1]:←[0m   Rendered text template (0.0ms)
←[33m2012-07-15T17:22:57+00:00 app[web.1]:←[0m Completed 200 OK in 1046ms (Views: 6.7ms | ActiveRecord: 2.7ms) 
```

此行的第一个问题：

```
 "emailAddress" => params[:paypal] 
```

我可以把它改成

```
 current_user.email 
```

第二个问题 - 问题在哪里，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:15:54.840

API调用结构合理。

但是，当您说您输入了您的凭据时，您是否确保您在正确的环境中使用了正确的凭据？沙盒中不存在实时凭据和实时帐户，反之亦然。您无法对照复选框检查真实账户的状态，因为它根本不存在于沙盒“宇宙”中。

那将是首先要看的东西。如果您觉得您的环境是正确的，您可以发布 的内容`res.content`以查看从 HTTP 调用返回的内容吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T15:06:46.603

查看[adaptiveaccounts-sdk-ruby gem](https://github.com/paypal/adaptiveaccounts-sdk-ruby)**

# gnuradio - 我可以使用我的 USRP 1 干扰 UMTS（基于 WCDMA）吗？

> ID：11491358
> 
> 赞同：0
> 
> 时间：2012-07-15T11:08:09.353
> 
> 标签：gnuradio, usrp, umts

我们想使用我们的 USRP 1 和 GNU 无线电干扰 3G，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T03:51:39.943

有两种方法可以做到这一点。简单的方法是简单地干扰正在使用的无线电频段。但是，如果您这样做并且州政府对此表示反对，那么您很容易找到您。如果您不想进行高功率射频传输，那么您需要获得一本关于 UMTS 的好书，并了解当手机从一个小区传递到另一个小区时小区间切换的工作原理。您可以广播切换信号，导致用户设备尝试更改小区。由于新小区实际上并不期待用户设备，因此转换将失败并且电话将有效地相互干扰。

如果我是你，我不会在没有官方书面许可的情况下这样做，因为更难找到并不等于无法找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:39:43.247

干扰信号的方法有很多种，其中最简单的显然就是通过你想要干扰的信号进行传输。由于 USRP 可以传输，这基本上回答了您的问题。

但是请注意，在世界上几乎每个国家/地区，在您无权使用的频谱中传输（并因此干扰）信号都是非法的。如果不提供有关您正在做什么的详细信息，您可能不会得到有关如何做这些事情的回应 - 没有人愿意启用非法活动。

# java - 我必须如何将自己的连接设置为休眠？

> ID：11491363
> 
> 赞同：1
> 
> 时间：2012-07-15T11:08:54.250
> 
> 标签：java, hibernate, jdbc

我有我自己的数据库处理程序和我的连接池，我只想将“我自己之前创建的”连接设置为休眠。

如果我必须使用 ConnectionProvider，但我遇到了一些问题，我是否还必须在 hibernate.cfg.xml 中配置“hibernate.connection.driver_class”或“hibernate.connection.username”等属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:36:43.037

第 3 版

```
Connection conn = ...;
Session session = sessionFactory.openSession(conn); 
```

# c# - 如何将图像添加到 DataTable？

> ID：11491365
> 
> 赞同：1
> 
> 时间：2012-07-15T11:09:36.810
> 
> 标签：c#, image, datagrid, datatable

我想做的是将包含图像的列添加到 DataTable。创建列/行后，DataTable 将作为 DataGrid 的源。

我尝试了 resolveUrl 方法，但没有用。

你能帮我在我的数据表中添加一个图像列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:16:39.803

取自[这个问题](https://stackoverflow.com/questions/905419/image-in-datatable)

```
 DataTable table = new DataTable("ImageTable"); //Create a new DataTable instance.

 DataColumn column = new DataColumn("MyImage"); //Create the column.
column.DataType = System.Type.GetType("System.Byte[]"); //Type byte[] to store image bytes.
 column.AllowDBNull = true;
 column.Caption = "My Image";

 table.Columns.Add(column); //Add the column to the table. 
```

然后您可以这样设置 MyImage 列

```
DataRow row = table.NewRow();
row["MyImage"] = <Image byte array>;
tables.Rows.Add(row); 
```

# arrays - 使用 gson 反序列化一个类中的多个 ArrayList

> ID：11491366
> 
> 赞同：0
> 
> 时间：2012-07-15T11:09:50.597
> 
> 标签：arrays, gson

我有一个包含多个列表的类。类设计是否适合 gson 工作？

我的课：

```
Class Data
{
    List<String> actor;
    List<Integer> text_relevance;
    List<String> title;
} 
```

json字符串如下……这个json的类设计正确吗？

```
{
    "data":
    {
        "actor":["Abercrombie, Ian","Baker, Dee Bradley","Burton, Corey",
                 "Eckstein, Ashley","Futterman, Nika","Kane, Tom",
                 "Lanter, Matt","Taber, Catherine","Taylor, James Arnold",
                 "Wood, Matthew"],
        "text_relevance":["308"],
        "title":["Star Wars: The Clone Wars"]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T20:54:36.163

是的，您的代码是正确的。我用这段代码反序列化了它：

```
 Gson gson = new Gson();
    Type type = new TypeToken<Map<String, Data>>() {}.getType();
    Map<String, Data> map = gson.fromJson(json, type);
    Data data = map.get("data"); 
```

请注意，Gson 会将诸如“308”之类的字符串转换为相应的整数。这通常用于允许[非常大](http://blog.publicobject.com/2010/04/json-javascript-and-numeric-types.html)的值丢失精度。但它也适用于您的情况。

# regex - htaccess - 多次重写和捕获组

> ID：11491367
> 
> 赞同：0
> 
> 时间：2012-07-15T11:09:57.147
> 
> 标签：regex, .htaccess

我正在尝试处理应用程序的多个区域，但 URL 没有按预期重写。

这是 .htaccess 文件：

```
RewriteEngine On

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

RewriteRule ^division/(.*)/section/(.*)$ ./index.php?division=$1&section=$2
RewriteRule ^division/(.*)$ ./index.php?division=$1
RewriteRule ^area/(.*)$ ./index.php?area=$1 
```

**预期：**

1.  **如果 URI 匹配** `division/some_division/section/some_section`重写为`index.php?division=some_division&section=some_section`

2.  如果**没有**定义部分 ( `section/some_section`)，请转到第二条规则 -

    **如果 URI 匹配** `division/some_division`仅重写为`index.php?division=some_division`

3.  如果**没有**定义划分，并且**URI 匹配** `area/some_area`重写为`index.php?area=some_area`

我几乎可以肯定我可以结合前两个规则，我试过这个正则表达式，但它没有用：

`^division/(.*)( /section/(.*) )?$`

它应该是`/section/some_section`一个**可选**值。

不幸的是，没有任何效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:56:10.600

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^division/(.*)/section/(.*)$ ./index.php?division=$1&section=$2 [QSA,L]
RewriteRule ^division/(.*)$              ./index.php?division=$1            [QSA,L]
RewriteRule ^area/(.*)$                  ./index.php?area=$1                [QSA,L] 
```

# javascript - jQuery 是否有，或者是否有一个 jQuery 插件，具有用于监听 CSS3 动画事件的内置函数（例如 animationEnd）？

> ID：11491368
> 
> 赞同：1
> 
> 时间：2012-07-15T11:10:00.787
> 
> 标签：javascript, jquery, css, cross-browser

我环顾四周，找不到任何东西。在我的应用程序中，为了触发元素上的动画，我向元素添加了一个具有所需动画的类。然后我想听动画结束事件并在它被触发时运行一些代码。

据我所知，jQuery 还没有以*跨浏览器的*方式实现这个特性（例如`$(document).on('animationEnd', 'selector', callback)`）。

虽然手动实现这一点很容易，但我想知道是否有可用的第三方库可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:29:13.487

尝试：

```
transitionend
webkitTransitionEnd
oTransitionEnd
MSTransitionEnd 
```

你可以使用类似的东西：

```
$('#yourelement').addClass('animatedClass').on('transitionend', function(e) {
 // ... do stuff.
); 
```

还有

```
 :animated 
```

您可以对其进行测试，

```
 if ( $('#yourelement:not(:animated)') ) { ...
 if ( $('#yourelement').is(':animated') ) { ... 
```

希望这能让你走上正确的道路=）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-15T11:13:15.327

也听所有的前缀事件。

# jquery - 如何使用 jQuery 将 div 向中心折叠？

> ID：11491380
> 
> 赞同：0
> 
> 时间：2012-07-15T11:12:01.547
> 
> 标签：jquery

有人可以建议 jQuery 中的插件或方法将元素折叠到中心。我在网站上看到过它，但没有运气搜索谷歌，我希望元素在中心点快速折叠。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:17:44.113

最好的插件是使用 jQuery UI Clip 效果。点击绿色框查看效果：

[http://docs.jquery.com/UI/Effects/Clip](http://docs.jquery.com/UI/Effects/Clip)

# c# - EF 中的开始交易

> ID：11491381
> 
> 赞同：-3
> 
> 时间：2012-07-15T11:12:08.383
> 
> 标签：c#, winforms, sql-server-2008, entity-framework-4

我想在 EF 中使用事务。但我对此一无所知。

请将此 ADO 代码转换为 EF：

```
using System.Data.SqlClient;
private void button4_Click(object sender, EventArgs e)
    {
        string strConnection = @"Data Source = ARASH-PC\ARASH; Initial Catalog = SampleDB; User Id = sa; Password = 1;";
        SqlConnection con = new SqlConnection(strConnection);
        con.Open();
        SqlCommand command1 = new SqlCommand("INSERT " + " INTO Acc_Group (SalMali,Code_Group,Name_Group)" + " VALUES(84,60,N'aaaa')", con);
        SqlCommand command2 = new SqlCommand("INSERT " + " INTO Acc_Group (SalMali,Code_Group,Name_Group)" + " VALUES(84,80,N'ssss')", con);

        SqlTransaction Transaction = con.BeginTransaction();
        command1.Transaction = Transaction;
        command2.Transaction = Transaction;
        command1.ExecuteNonQuery();
        command2.ExecuteNonQuery();
        Transaction.Save("This Point");
        Transaction.Rollback("This Point");
        Transaction.Commit();
        command1.Dispose();
        command2.Dispose();
        con.Close();

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:19:57.240

您可以使用 TransactionScope 类在 EntityFramework 中使用事务：

```
 using (TransactionScope transaction = new TransactionScope())
            {
            } 
```

我编辑了我的答案：

```
 ExamoleEntities context= new ExamoleEntities ();
 bool success = false;
 using (TransactionScope transaction = new TransactionScope())
   {
     try
     {
        //your Code Here
        //
        context.SaveChanges(...);
        transaction.Complete();
        success = true;
     }
     catch (Exception ex)
     {
       // Handle errors and rollback here and retry if needed.
       // retry, otherwise stop the execution.
       Console.WriteLine("An error occured. "
                            + "The operation cannot be retried."
                            + ex.Message);                                
      }
 if (success)
        {

            context.AcceptAllChanges();
        }
        else
        {
            Console.WriteLine("Error");
        }
        context.Dispose();
    }
} 
```

# xml - 将不同源位置的 xml 文档图像复制到单个输出目录中

> ID：11491387
> 
> 赞同：2
> 
> 时间：2012-07-15T11:13:06.593
> 
> 标签：xml, xslt, xinclude

我有一个使用 xinclude 访问其他几个 xml 文件的 xml 文档。

```
<chapter xml:id="chapter1">
<title>Chapter in Main Doc</title>
<section xml:id="section">
    <title>Section in Main Doc 1</title>
            <mediaobject>
                <imageobject>
                    <imagedata fileref="images/car.jpg"/>
                </imageobject>
            </mediaobject>
</section>
<xi:include href="../some-doc/section1.xml"/>
<xi:include href="../some-doc/section2.xml"/> 
```

这些其他 section1 和 section2 xml 文件在不同的源位置使用不同的图像。我需要将所有图像复制到单个输出目录。因此，首先，我打算使用 XSLT 来解析整个 xml 文档并生成要复制的图像列表。如何使用 XSLT 生成 xml 文件的图像列表？你的想法真的很感激。

提前致谢..！！

**添加：**

我尝试使用以下已回答的 XSLT 1.0 代码。当我使用它生成 html 输出时，它只显示章节和章节 ID，如“chapter1, section ...”。它不显示图像数据节点内的图像路径值。

但是当我改变它时`<xsl:template match="@*|node()">`，`<xsl:template match="*">`它也会显示 xincluded xml 文件的所有图像路径值。但是还有其他节点的值，如上所示。我需要过滤除图像路径以外的所有值。

在这里，我只需要复制所有 xml 文档的图像路径，并将所有路径保存在一个数组或类似的东西中。然后我可以使用 java 类将这些保存的图像路径用于图像处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T00:05:11.453

这不是一个完整的解决方案，但它可能足以满足您的需求。下面的 XSLT 2.0 样式表复制了一个文档，扩展了 XIncludes（注意事项如下）。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  exclude-result-prefixes='xsl xi fn'>
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xi:include[@href][@parse='xml' or not(@parse)][fn:unparsed-text-available(@href)]">
 <xsl:apply-templates select="fn:document(@href)" />
</xsl:template>

<xsl:template match="xi:include[@href][@parse='text'][fn:unparsed-text-available(@href)]">
 <xsl:apply-templates select="fn:unparsed-text(@href,@encoding)" />
</xsl:template>

<xsl:template match="xi:include[@href][@parse=('text','xml') or not(@parse)][not(fn:unparsed-text-available(@href))][xi:fallback]">
 <xsl:apply-templates select="xi:fallback/text()" />
</xsl:template>

<xsl:template match="xi:include" />

</xsl:stylesheet> 
```

## 注意事项

此解决方案未实现以下属性：xpointer、accept 和 accept-language。

## 残缺的 XSLT 1.0 变体

```
<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  exclude-result-prefixes='xsl xi'>
<xsl:output method="xml" indent="yes"/>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
 </xsl:copy>
</xsl:template>

<xsl:template match="xi:include[@href][@parse='xml' or not(@parse)]">
 <xsl:apply-templates select="document(@href)" />
</xsl:template>

<xsl:template match="xi:include" />

</xsl:stylesheet> 
```

# mysql - 将数据插入数据库时 出现重复输入错误

> ID：11491394
> 
> 赞同：0
> 
> 时间：2012-07-15T11:14:24.860
> 
> 标签：mysql, mysql-error-1064, duplicates

我收到以下错误。

有什么解决办法吗？我已经将数据库分成 7 个部分。这是我上传时遇到问题的最后一部分：

SQL查询：

```
INSERT INTO `smf_themes` (`id_member`, `id_theme`, `variable`, `value`)
VALUES (17376, 1, 'cust_fbc_pro', ''),
       (17377, 1, 'display_quick_reply', '1'),
       (17377, 1, 'cust_twitter', 'aocsujbujp'),
       (17377, 1, 'cust_fbc_pro', 'http://snapbird.org/'),
       (17378, 1, 'display_quick_reply', '1'),
       (17378, 1, 'cust_twitter', ''),
       (17378, 1, 'cust_fbc_pro', ''),
       (17379, 1, 'display_quick_reply', '1'),
       (17380, 1, 'display_quick_reply', '1'),
       (17380, 1, 'cust_twitter', ''),
       (17380, 1, 'cust_fbc_pro', ''),
       (17381, 1, 'display_quick_reply', '1'),
       (17381, 1, 'cust_twitter', ''),
       (17381, 1, 'cust_fbc_pro', ''),
       (17382, 1, 'display_quick_reply', '1'),
       (17382, 1, 'cust_twitter', ''),
       (17382, 1, 'cust_fbc_pro', ''),
       (17383, 1, 'display_quick_reply', '1'),
       (17383, 1, 'cust_twitter', 'cymjemqpmo'),
       (17383, 1, 'cust_fbc_pro', 'http://www.viddyou.com/'),
       (17384, 1, 'display_quick_reply', '1'),
       (17384, 1, 'cust_twitter', 'izehcnqmsj'),
       (17384, 1, 'cust_fbc_pro', 'http://www.yourkindatv.com/
       [...] 
```

MySQL给了我错误：

> #1062 - 键 'PRIMARY' 的重复条目 '1-17403-cust_twitter'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:26:31.243

```
#1062 - Duplicate entry '1-17403-cust_twitter' for key 'PRIMARY' 
```

这简单意味着您尝试插入重复数据。主索引位于 3 列上：

```
`id_member`, `id_theme`, `variable` 
```

因此，要解决这个问题，请检查您的输入 SQL 并删除重复数据或修改主键规范。

# php - ZF：nginx 提供图像/css/js/files 和 apache 提供 .php

> ID：11491396
> 
> 赞同：0
> 
> 时间：2012-07-15T11:14:29.740
> 
> 标签：php, apache, zend-framework, nginx

您好我需要配置运行基于 Zend 框架的应用程序的网络服务器：

我的想法是使用：nginx 来提供图像、文件（zip/doc/xls/...）、js、html、... apache 来提供对 zf 操作的请求

我该如何设置？

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:27:55.540

假设您的 Apache 在 8080 端口上运行，而 Nginx 在 80 端口上运行。

您的静态文件位于 /var/www/static/ 并且那里的文件夹结构完全反映了预期的 HTTP 请求。

然后（有一些你的上下文特定的变化）它可能是这样的：

```
upstream zend {
    server localhost:8080;
}

server {
    listen       80;
    server_name  frontend;

    location / {
        alias /var/www/static/;
        try_files $uri $uri/ @zend;
    }

    location @zend {
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $proxy_host;
        proxy_set_header X-NginX-Proxy true;

        proxy_pass http://zend;
    }
} 
```

# regex - Bash - 使用可变 URL 将 CD 放入 Untared 目录

> ID：11491397
> 
> 赞同：5
> 
> 时间：2012-07-15T11:14:41.530
> 
> 标签：regex, bash, shell, unix

这是这种情况。我有一个需要提取和设置的 URL 列表。它都是变量驱动的，但是在我提取之后，我不知道我的文件夹将被调用。如果我不知道它叫什么，我就不能 CD 进去。

```
$DL_DIR = /opt/
$URL = http://nginx.org/download/nginx-1.3.3.tar.gz
$FILE=${URL##*/}
$CONFIG = "-- core"

cd "$DL_DIR"
wget $URL
tar xzf $FILE
cd <HOW DO I GO INTO IT?>
./configure "$CONFIG"
make
make install
rm $FILE 
```

如果这不能解释它，请说。我真的很想解决这个问题，但我很难解释它。

因为我希望它适用于任何一组 URL，这些 URL 可能有两种格式，如“.tar.gz”或一种格式“.zip”，并且文件名中可能有 .'，如“Python2.3.4”或可能没有“Nginx” “，这让它有点棘手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T12:42:48.213

```
#! /bin/bash
   #
   # Problem: 
   #  find the path of the "root" folder in an archive
   #
   # Strategy: 
   #  list all folders in the archive.
   #  sort the list to make sure the shortest path is at the top.
   #  print the first line
   # 
   # Weak point:
   #  assumes that tar tf and unzip -l will list files in a certain way
   #  that is: paths ending with / and that the file-list of unzip -l 
   #  is in the fourth column.
   # 

   LIST_FILES=
   FILE=$1
   case ${FILE##*.} in
       gz)
       LIST_FILES="tar tf $FILE"
       ;;
       tgz)
       LIST_FILES="tar tf $FILE"
       ;;
       zip)
       LIST_FILES='unzip -l '$FILE' | awk "{print \$4}"'
       ;;
   esac
   ARCHIVE_ROOT=$(
   echo $LIST_FILES | sh |\
       grep '/$'|\
       sort |\
       head -n1
   )

   # we should have what we need by now, go ahead and extract the files.
   if [ -d "$ARCHIVE_ROOT" ]; then
       cd "$ARCHIVE_ROOT"
   else
       # there is no path (whoever made the archive is a jerk)
       # ...or the script failed (see weak points)
       exit 1
   fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:27:23.433

```
extract_dir=$(tar -tf $FILE | cut -d/ -f1 | uniq)
cd $extract_dir 
```

或者

```
extract_dir=$(tar -tf $FILE | head -1 | cut -d/ -f1)
cd $extract_dir 
```

或者

```
ls > .dir_list_1    # save current directory listing as hidden file
tar xzf $FILE       # extract the $FILE
ls > .dir_list_2    # save the directory listing after extraction...
                    # ...as another hidden file
# diff two lists saved in hidden files, this will help you get the created dir
# grep '>' symbol, to get the inserted line
# use head to get the dir in case there are multiple lines (not necessary)
# use cut to remove the '>' and get the actual dir name, store in extract_dir
extract_dir=$(diff .dir_list_1 .dir_list_2 | grep '>' | head -1 | cut -d' ' -f2)
# remove temporary files 
rm .dir_list_*
cd $extract_dir 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:29:26.770

如果您知道 $DL_DIR 中只有一个目录，那么您可以使用：

```
cd`ls -m1`

```

另一种方法是遍历目录的文件：

```
“$DL_DIR”中的文件名/*
做
    回声$文件名
完毕;

```

您可以根据需要执行文件测试和其他检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T09:30:24.933

我会说，用 ${FILE##*.} 去掉文件的扩展名，然后用 ${FILE%.ext*} 对目录名做相反的处理：

```
案例 ${FILE##*.} 在
    gz)
    焦油 xf $文件
    cd ${FILE%.tar.gz*}
    ;;
    tgz)
    焦油 xf $文件
    cd ${FILE%.tgz*}
    ;;
    压缩）
    解压 $FILE
    cd ${FILE%.zip*}
    ;;
经社理事会
```

只是一个小问题：你怎么知道档案中的目录是否与档案本身同名？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-15T11:57:14.857

这个怎么样：

```
rm -rf tmpdir
mkdir tmpdir && cd tmpdir || exit
wget "$URL" || exit 1
case "$(ls)" in
  *.tar.gz|*.tgz)
  tar xzf $(ls)
  ;;
  *.zip)
  unzip $(ls)
  ;;
esac
for d in $(ls -d)
do
  ( cd "$d" 2>/dev/null && ./configure && make && make install; )
done 
```

# java - 使用 eclipse 和 tomcat 7 运行和部署 servlet

> ID：11491398
> 
> 赞同：1
> 
> 时间：2012-07-15T11:14:45.060
> 
> 标签：java, eclipse, tomcat, deployment, webserver

1.  我用 Eclipse 创建了一个基于[Tomcat HelloWorld Servlet的测试项目](http://www.idimmu.net/2009/03/11/tomcat-helloworld-servlet-with-eclipse/)
2.  并尝试从 Eclipse 运行它，就像使用 Tomcat 7 一样，我已将其配置为在 127.0.0.1 上运行 - 但我`Page cannot be found`在 127.0.0.1/helloworld/HelloWorld
3.  我还尝试导出为war文件并将其部署到作为Windows服务运行的（否则工作）Tomcat服务器 - 并使用Tomcat应用程序管理器部署 - manifest.mf 并且这些类很好地复制到tomcat / webapps / helloworld，但尝试导航到 127.0.0.1/helloworld/HelloWorld 再次失败，显示`HTTP Status 404`

### 从默认的@WebServlet 到 web.xml 配置

接下来，在 HelloWorld.java 中，我尝试注释掉

```
//@WebServlet("/HelloWorld") 
```

然后添加特定于 web 应用程序的 web.xml 配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <servlet>
        <servlet-name>HelloWorld</servlet-name>
        <servlet-class>HelloWorld</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HelloWorld</servlet-name>
        <url-pattern>/HelloWorld</url-pattern>
    </servlet-mapping>
</web-app> 
```

但结果还是一样——没有反应！

### 解决方案？

*   鉴于链接教程提供了 Tomcat 6 的说明，我是否应该更改一些内容以使其与 Tomcat 7 一起使用？
*   具体来说，Eclipse添加的默认`@WebServlet("/HelloWorld")`就够了吗？Servlet 3.0 的基于注释的配置需要什么才能工作（没有 web.xml）？
*   还是有什么东西阻止了全局 tomcat 服务器级别的任何 Web 应用程序部署？我已经稍微更改了服务器配置，不幸的是我不记得具体是什么，除了让它服务于 127.0.0.1 而不是 127.0.0.1:8080

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:16:39.823

打开动态 Web 项目的属性页面，单击“Web 项目设置”并使用上下文根参数作为 URL 的根路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T20:07:36.803

尝试在 WebContent 中放置一个默认的 Index.html 页面，并查看欢迎页面是否指向它。如果是，则尝试手动输入 servlet 名称并查看是否有效。我得到了同样的错误，但这样做可以解决它。

```
http://localhost:8080/<Project_Name>/index.html

http://localhost:8080/<Project_Name>/servlet_name 
```

# php - 使用 PHP 在服务器上下载多个文件的内容

> ID：11491399
> 
> 赞同：0
> 
> 时间：2012-07-15T11:14:51.793
> 
> 标签：php

我有 2 个文件 - *1.csv*和*2.csv*。我可以通过已知方法使用 PHP下载*1.csv ：*

```
$file = '1.csv';
header('Content-Description: File Transfer');
header('Content-Type: application/jpeg');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: public');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

但我的目的是拥有两个文件的下载文件内容 - *1.csv*和*2.csv*。有人对如何实现这一点有一些想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:33:27.947

如果我理解正确，应该这样做。

```
$file1 = '1.csv';
$file2 = '2.csv';
header('Content-Description: File Transfer');
header('Content-Type: text/comma-separated-values');
header('Content-Disposition: attachment; filename='.basename($file1, '.csv') . '-'  . basename($file2, '.csv') . '.csv');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: public');
header('Pragma: public');
header('Content-Length: ' . (filesize($file1) + filesize($file2)));
ob_clean();
flush();
readfile($file1);
readfile($file2); 
```

考虑对多个文件使用循环，并注意 CSV 文件的 Content-Type 标头的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:28:11.820

```
$file1 = '1.csv';
$file2 = '2.csv';
header('Content-Description: File Transfer');
header('Content-Type: application/jpeg');
header('Content-Disposition: attachment; filename="1-2.csv"');
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: public');
header('Pragma: public');
header('Content-Length: ' . (filesize($file1)+filesize($file2)));
ob_clean();
flush();
echo file_get_contents($file1).file_get_contents($file2); 
```

下载 2 个文件内容的串联

# php - Memcached 中的服务器到底是什么？

> ID：11491400
> 
> 赞同：1
> 
> 时间：2012-07-15T11:15:17.650
> 
> 标签：php, memcached

当我们要连接到 memcached 时，有一个参数指定服务器地址。该服务器部分是否可以仅用于集群服务器，还是可以用于我们想要的各种形式？有人可以对这个问题有所了解。我真的不知道如何使用这部分。我总是把`localhost`或`127.0.0.1`放在这部分。如果我以后想添加一些服务器怎么办？

在项目 wiki 中，我看到了以下部分：

```
//in your configuration file: 

$MEMCACHE_SERVERS = array(
    "10.1.1.1", //web1
    "10.1.1.2", //web2
    "10.1.1.3", //web3
);

//at the 'bootstrapping' phase of your app somewhere:

$memcache = new Memcache();
foreach($MEMCACHE_SERVERS as $server){
    $memcache->addServer ( $server );
} 
```

我在这里遗漏了一些东西！听起来它们是聚集在一起的吗？
如果您想将服务器添加到 memcache，我们说所有服务器都应该在一个网络上是什么意思？

# java - 不适用于括号的数学表达式

> ID：11491401
> 
> 赞同：2
> 
> 时间：2012-07-15T11:15:28.960
> 
> 标签：java

我正在尝试将华氏温度转换为相应的摄氏度，所以我写道：

```
double f = 90.0;
double c = (90.0-32)*(5/9); // 0.0 
```

但这不起作用，如果我不使用第二组括号会更好：

```
double c = (90.0-32)*5/9; // 32.2222 
```

为什么这种（​​至少对我而言）奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:17:01.733

不要在除法中使用整数，因为`2/5 = 0`但是`2.0/5.0 = 0.4`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T11:18:10.643

你的问题在这里

```
double c = (90.0-32)*(5/9); 
```

5 和 9 的整数除法将导致值为零。将 5 或 9 之一更改为 double 值：

```
double c = (90.0-32)*(5.0/9); 
```

当你除以整数时，结果将是一个整数，当然整数不能存储结果的真实小数值，只能存储它的整数部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T11:20:21.297

`(90.0-32)*5/9`被评估为`((90.0-32)*5)/9`，请注意除法发生在 double 和 int 之间（然后隐式转换为 double）。

`(90.0-32)*(5/9)`那里有，`5/9`它是零。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-15T11:20:46.487

(5/9) 将给出 0 所以做类似 (5.0/9.0)

第二个：

```
double c = (90.0-32)*5/9; 
```

有效，因为括号中的表达式是一个浮点数，然后您再次乘以和除以一个数字，因此最终结果保持为浮点数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-15T11:21:02.943

试试这个方法......

此示例显示，当**x 和 y 是整数时，返回的值为 0，但如果 x 和 y 为双倍，则其为 0.5555555555555556**

```
public class Test{
    public static void main(String[] args){

        double x = 5.0;
        double y = 9.0;

        System.out.println((90.0-32.0)*(x/y));
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-15T11:23:43.913

您可以在初始化变量时尝试以下操作。

```
double f = 90D ;
float fl = 50F ; 
```

因此，您不必每次都处理`.0`for 值。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-15T13:47:02.630

在使用不同数据类型的数值表达式中，除非指定，否则默认选择是`int`and `double`。

阅读有关[*原始数据类型*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的更多详细信息。

> 1.  ***除非有原因，否则**int*******数据类型通常是默认选择。**
>     
>     
> ***   *对于十进制值，**双精度**数据类型通常是默认选择。***

 **在你的表达中：

```
double c = (90.0-32)*(5/9); // 0.0 
```

1.  `5`和`9`in 表达式`(5/9)`被视为`int`数据类型，因此除法的结果是`0`, `int`。
2.  表达式`(90.0-32)`将产生一个`double`，因为`32`是一个`int`。
    你可能知道
    2.1\. `double */+/- int/long/float/double`会导致一个`double`.
    2.2\. `double divided_by_any int/long/float/double`会导致一个`double`.

牢记以上几点，表达式 for`c`可以解释为

```
double c = (double)*(int);
double c = (90.0-32)*(0);
double c = 0.0; // double 
```

因此 for 的结果`c`将是 a `double` `0.0`。

表达方式

```
double c = (90.0-32)*5/9; // 32.2222 
```

根据[*运算符优先级*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)被解释为

```
double c = ( (90.0-32)*5 ) / 9; // ( (double - int) * int ) / int
//c = ( (58.0)*5 ) / 9; // ( (double) * int ) / int
//c = ( 290.0 ) / 9; // ( double ) / int
c = 32.22222222222222; // double 
```

* * *

`5`或者`9`，对`(5/9)`a的显式强制转换`double`将导致`32.22222222222222`.`c`

```
//double c = (90.0-32)*(5/9);
double c = (90.0-32)*( (double)5/9 ); // (double - int) * ( (double)int / int )
// or
//double c = (90.0-32)*( 5/(double)9 ); // (double - int) * ( int / (double)int )

//c = (58.0)*(5.0/9); // ( (double) * ( double / int )
//c = (58.0)*(0.5555555555555556); // ( double )*( double )
c = 32.22222222222222; // double 
```

要了解有关明确表达式和语句的更多信息，另请参阅：
[*表达式、语句和块*](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html)**

# jquery - JS jQuery - 检查值是否在数组中

> ID：11491405
> 
> 赞同：21
> 
> 时间：2012-07-15T11:15:44.930
> 
> 标签：jquery, arrays, validation

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-07-15T11:18:48.177

You are comparing a jQuery object (`jQuery('input:first')`) to strings (the elements of the array).
Change the code in order to compare the input's value (wich is a string) to the array elements:

```
if (jQuery.inArray(jQuery("input:first").val(), ar) != -1) 
```

The `inArray` method returns `-1` if the element wasn't found in the array, so as your *bonus* answer to how to determine if an element is **not** in an array, use this :

```
if(jQuery.inArray(el,arr) == -1){
    // the element is not in the array
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:20:34.907

As to your bonus question, try `if (jQuery.inArray(jQuery("input:first").val(), ar) < 0)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-29T20:27:50.850

Alternate solution of the values check

```
//Duplicate Title Entry 
    $.each(ar , function (i, val) {
        if ( jQuery("input:first").val()== val) alert('VALUE FOUND'+Valuecheck);
  }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-09T20:36:05.267

The `Array.prototype` property represents the prototype for the `Array` constructor and allows you to add new `properties` and `methods` to all `Array` objects. we can create a prototype for this purpose

```
Array.prototype.has_element = function(element) {
    return $.inArray( element, this) !== -1;
}; 
```

And then use it like this

```
var numbers= [1, 2, 3, 4];
numbers.has_element(3) => true
numbers.has_element(10) => false 
```

See the Demo below

```
Array.prototype.has_element = function(element) {
  return $.inArray(element, this) !== -1;
};

var numbers = [1, 2, 3, 4];
console.log(numbers.has_element(3));
console.log(numbers.has_element(10));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

# java - 二维数组（行和列）

> ID：11491413
> 
> 赞同：0
> 
> 时间：2012-07-15T11:16:35.803
> 
> 标签：java, arrays, multidimensional-array

下面的程序（感谢日晷）计算矩形的面积

公共类 ComputeTheArea {

```
public static int areaOfTheRectangle (char[][] table, char ch) {
    int[] first = new int[2];
    int[] last = new int[2];

    for (int i=0; i<3; i++) { 
        for (int j=0; j<4; j++) {
               if(grid[i][j]==ch) {
                  first[0] = i;
                  first[1] = j;
               }
        }
    }

    for (int i=2; i>=0; i--) { 
        for (int j=3; j>=0; j--) { 
               if(grid[i][j]==ch) {
                  last[0] = i;
                  last[1] = j;
               }                    
        }
    }

    int answer = ((Math.max(first[0]+1,last[0]+1) - Math.min(first[0]+1,last[0]+1)) *
                  (Math.max(first[1]+1,last[1]+1) - Math.min(first[1]+1,last[1]+1)));

    return answer;
} 
```

但是，当它运行时，它会输出错误的答案。我知道 for 循环有问题。我是 Java 新手，我需要您的帮助来修复该方法。请非常感谢！

**编辑**：我编辑了代码以符合迈克尔的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:38:36.010

首先，您不会在第一个循环中搜索矩阵中的所有元素。
其次，当你找到匹配时，你不会休息。
此外，这种方法有点缺陷。例如，看这个矩阵：

```
a b c b 
a _ c d 
x z b a 
```

在这里，您将不知道`b`在第一排停在哪个位置才能获得整个`b`广场。

如果您只是循环遍历整个矩阵一次并保存最大和最小 (`first`和`last`) x 和 y 坐标，则可以非常轻松地计算面积。请参阅此代码：

```
public static int charArea (char[][] grid, char ch) {
    int[] first = new int[] {100, 100};
    int[] last = new int[] {-1, -1};

    for (int i=0; i<3; i++) { 
        for (int j=0; j<4; j++) {
               if(grid[i][j]==ch) {
                  first[0] = Math.min(i, first[0]);
                  first[1] = Math.min(j, first[1]);
                  last[0] = Math.max(i, last[0]);
                  last[1] = Math.max(j, last[1]);
               }
        }
    }

    int answer = (last[0] - first[0] + 1) * (last[1] - first[1] + 1);

    return answer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:33:02.620

一旦找到字符，for 循环应该可能会中断。

第一个 for 循环设置 j=i。那可能应该是 j=0 。

我认为长度计算不正确。两个术语都应加 1。即first=0 和last=3 的长度应该是last+1-first=4，而不是现在的3。

# objective-c - iOS 5：UIBarButtonSystemItemAdd 的文本颜色

> ID：11491415
> 
> 赞同：3
> 
> 时间：2012-07-15T11:16:44.153
> 
> 标签：objective-c

我可以使用此代码片段（iOS 5+）更改*UIBarButtonItem的文本颜色：*

```
NSMutableDictionary *attributes = [NSMutableDictionary dictionary];
[attributes setValue:[UIColor blackColor] forKey:UITextAttributeTextColor];   
[[UIBarButtonItem appearance] setTitleTextAttributes:attributes forState:UIControlStateNormal]; 
```

不幸的是，这不会影响*UIBarButtonSystemItemAdd*。

有没有办法改变*UIBarButtonSystemItemAdd*的文本颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-13T14:10:59.813

使用 setTintColor。例如：

```
[downloadButtonItem setTintColor:[UIColor colorWithRed:247.0/255.0 green:247.0/255.0 blue:247.0/255.0 alpha:1.0]]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T12:10:14.670

我知道没有办法实现这一点——系统 UIBarButtonItem 实例使用图像而不是文本，因此无法通过更改其标题文本颜色来更改它们的颜色。您很可能必须创建自己的条形按钮项。

# c# - 重定向和平衡 Java 输出流量

> ID：11491416
> 
> 赞同：0
> 
> 时间：2012-07-15T11:16:48.540
> 
> 标签：c#, java, networking, redirect, balance

我有一个向不同服务器发出请求的客户端。有时这个服务器会拒绝来自我 IP 的请求，所以我需要更改它（我有几个公共 IP）。我还需要更改我的 IP 以提出地理定位请求。我正在尝试制作一个平衡服务器来通过不同的服务器重定向客户端流量并保留被拒绝的 IP 日志。这就是我的想法：

![平衡服务器](../Images/9bd5bd3068caaa4cb638e6b65a24ab0f.png)

不同网络中的客户端将具有不同的客户端实例。此实例向平衡器请求输出服务器，然后客户端的所有流量都通过此服务器重定向。输出服务器可以通过套接字与平衡器建立连接，以说出类似“嘿，我在这里。你可以使用我！”之类的话。在这里，我有一个愚蠢的活动图（可能充满错误）： ![活动图](../Images/5c18f8cada7f48f21adbef3393657288.png)

有没有最简单的方法来做到这一点？也许我正在重新发明轮子。如果是一个很好的解决方案，是否可以使用 Java/C# 来做到这一点？我怎样才能重定向流量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:21:07.227

我认为您正在重新发明轮子，您所描述的只是粘性会话/粘性 IP 模式下的负载均衡器。

有一些[开源](http://www.linux-ha.org/)[项目](http://www.apsis.ch/pound/) [可以满足](http://www.linux-vs.org/)[您](https://github.com/brunodecarvalho/malabarista) 的需求。（每个单词都是一个链接）

我个人建议[LVS 项目](http://www.linux-vs.org/)

# php - 在 MAMP 上运行 mysql 的问题

> ID：11491419
> 
> 赞同：1
> 
> 时间：2012-07-15T11:17:27.487
> 
> 标签：php, mysql, ruby-on-rails, gem, mamp

我试图让 MAMP 上的 MySQL 服务器运行，但无济于事。

它工作正常，但是当我开始使用 Ruby on Rails 时，我停止使用 MAMP。现在我想处理一些旧的 PHP 项目，这些项目存在于我的 MAMP 安装中，但我无法启动它们。最令人沮丧。

我怀疑它与使用 RoR 安装的 MySQL gem 有关，但我不确定如何检查或如何解决冲突。

我的问题本质上是“如何启动我的 mySql 服务器？”

操作系统：10.7.4 MAMP V：1.8.4

我检查了日志：

输出`tail mysql_error_log.err -n 100`：

```
==> mysql_error_log.err <==
120715 12:11:41 [ERROR] Can't start server: Bind on TCP/IP port: Address already in use
120715 12:11:41 [ERROR] Do you already have another mysqld server running on port: 3306 ?
120715 12:11:41 [ERROR] Aborting

120715 12:11:41  InnoDB: Starting shutdown...
120715 12:11:42  InnoDB: Shutdown completed; log sequence number 0 44233
120715 12:11:42 [Warning] Forcing shutdown of 2 plugins
120715 12:11:42 [Note] /Applications/MAMP/Library/libexec/mysqld: Shutdown complete

120715 12:11:42 mysqld_safe mysqld from pid file /Applications/MAMP/tmp/mysql/mysql.pid ended 
```

**更新**

我已尝试按照建议编辑正在运行的实例的 my.cnf。我这样做是`locate my.cnf`为了找到文件。

这返回了两个结果，一个在 MAMP PRO（我没有使用）中，另一个（基于 Macports）。我选择编辑[Macports 文件的第 15 和 34 行。](http://pastebin.com/dNSCrnS6). 然后我重新启动了机器。

看来我遇到了同样的错误：

```
==> mysql_error_log.err <==
120715 13:37:26 [ERROR] Can't start server: Bind on TCP/IP port: Address already in use
120715 13:37:26 [ERROR] Do you already have another mysqld server running on port: 3306 ?
120715 13:37:26 [ERROR] Aborting

120715 13:37:26  InnoDB: Starting shutdown...
120715 13:37:27  InnoDB: Shutdown completed; log sequence number 0 44233
120715 13:37:27 [Warning] Forcing shutdown of 2 plugins
120715 13:37:27 [Note] /Applications/MAMP/Library/libexec/mysqld: Shutdown complete

120715 13:37:27 mysqld_safe mysqld from pid file /Applications/MAMP/tmp/mysql/mysql.pid ended 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:42:22.707

> 120715 12:11:41 [错误] 无法启动服务器：绑定 TCP/IP 端口：地址已在使用中
> 
> 120715 12:11:41 [错误] 您是否已经在端口：3306 上运行了另一个 mysqld 服务器？

您已经有 MySQL 或其他使用端口 3306 的程序。您可以终止现有程序或使用不同的端口。

端口可以​​在 MySQL 配置文件中更改`my.cnf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T23:37:35.827

我在 Mac 上，在某些时候我安装了 MAMP 之外的 MySql。这个版本的 MySql 阻塞了 MAMP 的 MySql 服务器。

打开系统偏好设置，如果您在底行看到 MySQL 图标，请将其打开。在这里它告诉我我有一个 MySQL 服务器实例正在运行。停止服务器并取消选中“启动时自动启动 MySQL 服务器”

希望这对某人有帮助！

# parsing - 移位/减少与表达式调用的冲突

> ID：11491421
> 
> 赞同：0
> 
> 时间：2012-07-15T11:17:41.433
> 
> 标签：parsing, grammar, shift-reduce-conflict, lemon

当我尝试使用 Lemon 编译这个简单的解析器时，我遇到了冲突，但我看不出哪个规则是错误的。如果我删除二进制表达式或调用表达式，冲突就会消失。

```
%left Add.

program ::= expression.

expression ::= binaryexpression.
expression ::= callexpression.

binaryexpression ::= expression Add expression.

callexpression ::= expression arguments.

arguments ::= LParenthesis argumentlist RParenthesis.
arguments ::= LParenthesis RParenthesis.

argumentlist ::= expression argumentlist.
argumentlist ::= expression. 
```

**[编辑]**向 LParenthesis 添加左侧关联性解决了冲突。但是，我很想知道这样做是否正确：我已经看到一些语法（fe C++）对于构造运算符'（）'和调用运算符'（）'具有不同的优先级。所以我不确定做正确的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:46:22.483

问题是语法不明确。不可能在减少`binaryexpression`或`callexpression`不查看所有输入序列之间做出决定。歧义是因为左递归`expression`，因为`expression`不能导出终端，所以不能结束。

# php - jQuery自动完成服务URL更改

> ID：11491423
> 
> 赞同：1
> 
> 时间：2012-07-15T11:17:50.587
> 
> 标签：php, jquery, ajax

我的自动完成功能是：

```
$(document).ready(function(){
  var a = $('#issued_to').autocomplete(
  {
    serviceUrl: 'http://myhost.com/ecard_emp_suggestion/',
    minChars: 1,
    delimiter: /(,|;)\s*/, // regex or character
    maxHeight: 400,
    width: 300,
    zIndex: 9999,
    deferRequestBy: 0, //miliseconds
    //params: { country:'Yes' }, //aditional parameters
    noCache: false, //default is false, set to true to disable caching
    // callback function:
    onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); },
    // local autosugest options:
    //lookup: ['January', 'February', 'March', 'April', 'May'] //local lookup values
  });
}); 
```

现在的问题是，它将请求发送到： [http ://myhost.com/ecard_emp_suggestion?query=input_text](http://myhost.com/ecard_emp_suggestion?query=input_text)

但我需要[http://myhost.com/ecard_emp_suggestion/input_text](http://myhost.com/ecard_emp_suggestion/input_text)

我应该在哪里改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:18:20.933

简而言之，您不应该这样做，主要是因为逃避问题。大多数后端无法使用 URL 段中的随机字符串，例如`http://myhost/com/card_emp_suggestion/space included`. 您应该查看[jquery ui 项目的自动完成功能](http://jqueryui.com/demos/autocomplete/#option-source)，它允许对源进行回调，并且您可以以任何您想要的方式实现后端调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:16:42.573

您必须使用自定义函数覆盖函数 getSuggestions，因此在准备好函数中初始化自动完成后，添加以下代码：

```
a.getSuggestions = function(q) {
  var cr, me;
  cr = this.isLocal ? this.getSuggestionsLocal(q) : this.cachedResponse[q];
  if (cr && $.isArray(cr.suggestions)) {
    this.suggestions = cr.suggestions;
    this.data = cr.data;
    this.suggest();
  } else if (!this.isBadQuery(q)) {
    me = this;
    //me.options.params.query = q;
    //$.get(this.serviceUrl, me.options.params, function(txt) { me.processResponse(txt); }, 'text');
    $.get(this.serviceUrl + '/' + q, null, function(txt) { me.processResponse(txt); }, 'text');
  }
} 
```

# android - 警报对话框内的单选按钮和文本视图

> ID：11491430
> 
> 赞同：-1
> 
> 时间：2012-07-15T11:18:58.923
> 
> 标签：android

我正在尝试使用 3 个单选按钮和一个 textview 制作一个对话框警报框。但是当我尝试使用 3 个单选按钮运行它时，它运行良好，当我添加 textview 时，应用程序显示异常。

```
private void Dialog(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
    //  tv1=new TextView(this);
    //  rb1.setText("these are the time limit options for you");
        rb1=new RadioButton(this);
        rb1.setText("10 minutes");
        rb2=new RadioButton(this);
        rb2.setText("20 minutes");
        rb3=new RadioButton(this);
        rb3.setText("30 minutes");
        rb1.setOnClickListener(RadioOptionOnClickListener);
        rb2.setOnClickListener(RadioOptionOnClickListener);
        rb3.setOnClickListener(RadioOptionOnClickListener);
        LinearLayout linearLayout = new LinearLayout(this);
        linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.FILL_PARENT));
        linearLayout.setOrientation(1); 
private void Dialog(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
    //  tv1=new TextView(this);
    //  rb1.setText("these are the time limit options for you");
        rb1=new RadioButton(this);
        rb1.setText("10 minutes");
        rb2=new RadioButton(this);
        rb2.setText("20 minutes");
        rb3=new RadioButton(this);
        rb3.setText("30 minutes");
        rb1.setOnClickListener(RadioOptionOnClickListener);
        rb2.setOnClickListener(RadioOptionOnClickListener);
        rb3.setOnClickListener(RadioOptionOnClickListener);
        LinearLayout linearLayout = new LinearLayout(this);
        linearLayout.setLayoutParams( new  LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
        LinearLayout.LayoutParams.FILL_PARENT));
        linearLayout.setOrientation(1);  
    //  linearLayout.addView(tv1);
        linearLayout.addView(rb1);
        linearLayout.addView(rb2);
        linearLayout.addView(rb3);
        alertDialog.setView(linearLayout);
        alertDialog.show();
    } 
```

这是例外，先生

```
07-15 16:23:30.081: W/dalvikvm(1129): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-15 16:23:30.248: E/AndroidRuntime(1129): FATAL EXCEPTION: main
07-15 16:23:30.248: E/AndroidRuntime(1129): java.lang.NullPointerException
07-15 16:23:30.248: E/AndroidRuntime(1129):     at test.test.AlertdialogActivity.Dialog(AlertdialogActivity.java:32)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at test.test.AlertdialogActivity.access$0(AlertdialogActivity.java:29)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at test.test.AlertdialogActivity$1.onClick(AlertdialogActivity.java:59)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.view.View.performClick(View.java:2485)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.view.View$PerformClick.run(View.java:9080)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.os.Handler.handleCallback(Handler.java:587)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.os.Looper.loop(Looper.java:123)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at java.lang.reflect.Method.invokeNative(Native Method)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at java.lang.reflect.Method.invoke(Method.java:507)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-15 16:23:30.248: E/AndroidRuntime(1129):     at dalvik.system.NativeStart.main(Native Method) 
```

请告诉我如何解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:32:07.690

我认为这是一个错字，您写道：

```
 tv1=new TextView(this);
  rb1.setText("these are the time limit options for you"); 
```

虽然它应该是

```
 tv1=new TextView(this);
 tv1.setText("these are the time limit options for you"); 
```

你所做的给出了一个 Null 异常，因为 rb1 将在下一行创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:37:23.453

```
//tv1=new TextView(this); 
//rb1.setText("these are the time limit options for you"); 
```

在这里，您正在初始化`tv1`但设置 的值`rb1`。

尝试

```
tv1=new TextView(this); 
tv1.setText("these are the time limit options for you"); 
```

# c# - C# - 加载 dll 并创建实例

> ID：11491431
> 
> 赞同：2
> 
> 时间：2012-07-15T11:19:08.157
> 
> 标签：c#, dll, interface

我有一种情况，我需要知道如何以最好的方式处理它。

我有一个应用程序（MVC3），我有几个集成。我有一个接口“IntegrationInterface”，每个集成都实现了它。我想加载集成的 dll，创建它们的列表，然后运行一个循环，为列表中的每个集成运行一个方法。

例如 - 假设我集成了 facebook、myspace 和 twitter（用于我的应用程序），每次用户在我的应用程序中发布消息时，我都想在他的 facebook、myspace 和 twitter 上发布消息。

我不希望代码知道我有哪些集成，所以如果明天我要为 google+ 创建一个新的集成，我只需要添加一个新的 DLL 而不更改我的应用程序的代码。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T11:30:07.730

首先，您必须找到所有相关的 dll 和类：

```
loadedIntegrations.Clear();
if (!Directory.Exists(path))
    return;
DirectoryInfo di = new DirectoryInfo(path);
FileInfo[] files = di.GetFiles("*.dll");
foreach (var file in files)
{
    Assembly newAssembly = Assembly.LoadFile(file.FullName);
    Type[] types = newAssembly.GetExportedTypes();
    foreach (var type in types)
    {
        //If Type is a class and implements the IntegrationInterface interface
        if (type.IsClass && (type.GetInterface(typeof(IntegrationInterface).FullName) != null))
            loadedIntegrations.Add(type);
    }
} 
```

`loadedIntegrations`是类型`List<Type>`。然后您可以实例化每个集成并调用其方法：

```
foreach(var integrationType in loadedIntegrations)
{
    var ctor = integrationType.GetConstructor(new Type[] { });
    var integration = ctor.Invoke(new object[] { }) as IntegrationInterface;
    //call methods on integration
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:50:04.327

我正在做类似于您在编写的导入实用程序中描述的事情。我的问题是我不想加载所有程序集。我只想加载包含所请求类型的程序集。

为此，我使用了[AppDomain.CurrentDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件处理程序。

此事件处理程序在 AppDomain 引发异常通知未找到程序集之前引发。我执行与 Nico 在该处理程序中建议的代码类似的代码并返回请求的程序集。

注意：我有一个名为“Tasks”的子目录（想想 Import Tasks），我在其中存储了我想在运行时加载的所有程序集。

这是代码：

```
 var tasks = GetTasks();
        var basedir = AppDomain.CurrentDomain.BaseDirectory; // Get AppDomain Path
        var tasksPath = Path.Combine(basedir, "Tasks"); // append 'Tasks' subdir

        // NOTE: Cannot be factored, relies on 'tasksPath' variable (above).
        AppDomain.CurrentDomain.AssemblyResolve += (s, e) => // defined 'AssemblyResolve' handler
        {
            var assemblyname = e.Name + ".dll"; // append DLL to assembly prefix
            // *expected* assembly path
            var assemblyPath = Path.Combine(tasksPath, assemblyname); // create full path to assembly
            if (File.Exists(assemblyPath)) return Assembly.LoadFile(assemblyPath); // Load Assembly as file.
            return null; // return Null if assembly was not found. (throws Exception)
        };

        foreach (var task in tasks.OrderBy(q => q.ExecutionOrder)) // enumerate Tasks by ExecutionOrder
        {
            Type importTaskType = Type.GetType(task.TaskType); // load task Type (may cause AssemblyResolve event to fire)
            if (importTaskType == null)
            {
                log.Warning("Task Assembly not found");
                continue;
            }
            ConstructorInfo ctorInfo = importTaskType.GetConstructor(Type.EmptyTypes); // get constructor info
            IImportTask taskInstance = (IImportTask)ctorInfo.Invoke(new object[0]); // invoke constructor and cast as IImportTask
            taskInstances.Add(taskInstance);
        }
        // rest of import logic omitted... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-15T12:01:39.180

如果您知道 MEF（托管可扩展性框架），这可能会对您有帮助

[http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)

# python - 在python中将单值字典转换为多值字典

> ID：11491432
> 
> 赞同：2
> 
> 时间：2012-07-15T11:19:16.673
> 
> 标签：python, dictionary

我有这本词典

```
total_values = {'a':1, 'b':2, 'c':3} 
```

现在我想把这本字典转换成多值字典。像

```
total_values = {'a':(1,False), 'b':(2, True), 'c':(3, True)} 
```

请告诉我最pythonic的方式来做到这一点......

如何确定 True 和 False 值并不重要，假设它是我可以用于此的布尔变量的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:21:27.297

在 2.6 中：

```
dict( (k, (v, <boolean expression>)) for (k, v) in total_values.iteritems() ) 
```

在 2.7 中：

```
{ k:(v, <boolean expression>) for (k, v) in total_values.iteritems() } 
```

在 3.0 中，（感谢@C2H5OH）：

```
{ k:(v, <boolean expression>) for (k, v) in total_values.items() } 
```

请注意，这些解决方案创建了一个全新的字典。如果您想修改现有字典，@MartijnPieters 的[答案](https://stackoverflow.com/a/11491451/9990)是正确的方向。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T11:22:05.443

也可以让它随机：

```
from random import choice
for key in total_values:
    total_values[key] = (total_values[key], choice((True, False))) 
```

# assembly - D 内联汇编程序：函数调用出错

> ID：11491433
> 
> 赞同：1
> 
> 时间：2012-07-15T11:19:39.760
> 
> 标签：assembly, call, d, inline-assembly

我遇到了一个非常特殊的问题。对于虚拟机，我需要将指令函数中的代码复制到一个 ubyte 数组中，然后执行这个数组（技术类似于 gcc 中的内联宏 vm），基本上它的工作原理是这样的：

```
__gshared void * sp = null, sb = null; //stack pointer and stack base

__gshared void add() //the function is just there to access the instruction code
{
    asm{db "INSTRUCTIONCODESTART";} //this is a key to know where the instruction code starts

    //instruction code here (sample instruction add, pops 2 values from the stack and pushes its result)
    sp += 4;
    *cast(uint*)sp += *cast(uint*)(sp - 4);

    asm{db "INSTRUCTIONCODEEND";} //this is a key to know where instruction code ends
} 
```

在 Init 方法中，每个指令代码都有自己的缓冲区，缓冲区中包含 INSTRUCTIONCODESTART 和 INSTRUCTIONCODEEND 键之间的每个字节。我通过 windows VirtualProtect 调用使这个数组可执行。

到目前为止，一切都按预期工作，但是当我尝试将函数调用作为指令进行时，我会收到错误消息。

```
__gshared void testcall(){}

__gshared void call()
{
    asm{db "INSTRUCTIONCODESTART";} //this is a key to know where the instruction code starts

    //instruction code here (just calls a D function)
    testcall(); //this somehow throws an error

    asm{db "INSTRUCTIONCODEEND";} //this is a key to know where instruction code ends
} 
```

顺便说一句，我使用以下代码测试了说明

```
void instructiontest()
{
    uint dummy;
    ubyte[] buf = getFunctionCode(&add) ~ 0xC3; //gets code of instruction, appends 0xC3 at it ("ret" instruction, for test purposes only to see if it returns to the D code without errors)
    VirtualProtect(cast(void*)buf, buf.length, PAGE_EXECUTE_READWRITE, &dummy); //makes it executeable
    dummy = cast(uint)&buf[0];
    asm
    {
        call dummy[EBP];
    }
    print("instruction worked without errors!");
} 
```

到目前为止，每条简单指令（add、mul、sub、push0、push1、...）都有效，但如果我尝试通过函数调用获取指令的代码，则会引发错误

我会很高兴并且非常感谢任何帮助。（顺便说一句，我需要在指令中调用函数，以便让脚本语言与 D 通信）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:12:31.227

您应该真正反汇编代码，以便清楚地了解它在做什么以及为什么您的代码会被破坏。您的功能的反汇编`call`是：

```
0000000000414db8 <_D4test4callFZv>:
  414db8:   55                      push   rbp
  414db9:   48 8b ec                mov    rbp,rsp
  414dbc:   48 83 ec 08             sub    rsp,0x8
  414dc0:   53                      push   rbx
  414dc1:   41 54                   push   r12
  414dc3:   41 55                   push   r13
  414dc5:   41 56                   push   r14
  414dc7:   41 57                   push   r15
  414dc9:   49                      rex.WB
  414dca:   4e 53                   rex.WRX push rbx
  414dcc:   54                      push   rsp
  414dcd:   52                      push   rdx
  414dce:   55                      push   rbp
  414dcf:   43 54                   rex.XB push r12
  414dd1:   49                      rex.WB
  414dd2:   4f                      rex.WRXB
  414dd3:   4e                      rex.WRX
  414dd4:   43                      rex.XB
  414dd5:   4f                      rex.WRXB
  414dd6:   44                      rex.R
  414dd7:   45 53                   rex.RB push r11
  414dd9:   54                      push   rsp
  414dda:   41 52                   push   r10
  414ddc:   54                      push   rsp
  414ddd:   e8 ce ff ff ff          call   414db0 <_D4test8testcallFZv>
  414de2:   49                      rex.WB
  414de3:   4e 53                   rex.WRX push rbx
  414de5:   54                      push   rsp
  414de6:   52                      push   rdx
  414de7:   55                      push   rbp
  414de8:   43 54                   rex.XB push r12
  414dea:   49                      rex.WB
  414deb:   4f                      rex.WRXB
  414dec:   4e                      rex.WRX
  414ded:   43                      rex.XB
  414dee:   4f                      rex.WRXB
  414def:   44                      rex.R
  414df0:   45                      rex.RB
  414df1:   45                      rex.RB
  414df2:   4e                      rex.WRX
  414df3:   44                      rex.R
  414df4:   41 5f                   pop    r15
  414df6:   41 5e                   pop    r14
  414df8:   41 5d                   pop    r13
  414dfa:   41 5c                   pop    r12
  414dfc:   5b                      pop    rbx
  414dfd:   c9                      leave  
  414dfe:   c3                      ret    
  414dff:   90                      nop 
```

`414dc9`是开始标记开始`414ddc`的地方，是结束的地方（包括）。`414de2`是你的结束标记开始`414df3`的地方，是结束的地方（包括）。所以，撕掉它，我们有：

```
0000000000414db8 <_D4test4callFZv>:
  414db8:   55                      push   rbp
  414db9:   48 8b ec                mov    rbp,rsp
  414dbc:   48 83 ec 08             sub    rsp,0x8
  414dc0:   53                      push   rbx
  414dc1:   41 54                   push   r12
  414dc3:   41 55                   push   r13
  414dc5:   41 56                   push   r14
  414dc7:   41 57                   push   r15
  ; code start marker here
  414ddd:   e8 ce ff ff ff          call   414db0 <_D4test8testcallFZv>
  ; code end marker here
  414df4:   41 5f                   pop    r15
  414df6:   41 5e                   pop    r14
  414df8:   41 5d                   pop    r13
  414dfa:   41 5c                   pop    r12
  414dfc:   5b                      pop    rbx
  414dfd:   c9                      leave  
  414dfe:   c3                      ret    
  414dff:   90                      nop 
```

您显然不是在这里复制一些序言和尾声代码。但是，就其本身而言，这不应该是非常有问题的。

我试过这个程序：

```
void main()
{
    foo();
}

void foo()
{
    auto addr = &bar;

    asm { call addr; }
}

void bar()
{
    asm { naked; call baz; ret; }
}

void baz()
{
} 
```

这个对我有用。坦率地说，我不知道你的问题出在哪里。您粘贴的大多数代码不能只是复制到源文件中并进行编译，因此很难判断出了什么问题。我希望这里的一些信息可以帮助到你。您很可能必须附加调试器并找出问题所在；不要指望在不弄脏手的情况下弄乱这样的低级东西。;)

顺便说一句，我在 Linux 的 64 位 x86 上进行了测试。

无论哪种方式，您所做的都是高度不可移植、未定义等。请注意。它可能会奏效，但您正在使用零保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:27:29.263

如果没有看到所有相关代码的完整反汇编，很难说出所有错误是什么，但是......

1.  x86 代码通常不是与位置无关的，这意味着将其复制到不同的位置并在那里执行它可能而且通常会失败。

2.  您最有可能复制破坏寄存器（包括`ebp`and `esp`）和堆栈内容的代码。

# javascript - oAuth 失败：不允许... Access-Control-Allow-Origin

> ID：11491441
> 
> 赞同：1
> 
> 时间：2012-07-15T11:20:23.850
> 
> 标签：javascript, oauth

这里有什么问题？

> 选项[https://twitter.com/oauth/request_token](https://twitter.com/oauth/request_token) 401（未经授权） jsOAuth-1.3.4.js:483 XMLHttpRequest 无法加载 [https://twitter.com/oauth/request_token](https://twitter.com/oauth/request_token)。Access-Control-Allow-Origin.Object 不允许来源“http://localhost:8080”

```
<!DOCTYPE html>
<html>
<head>
<!--

A simple example of PIN-based oauth flow with Twitter and jsOAuth.

This is mostly based on/copied from <http://log.coffeesounds.com/oauth-and-pin-based-authorization-in-javascri>.

Get jsOAuth at <https://github.com/bytespider/jsOAuth/downloads>

-->

    <meta charset="utf-8">
    <title>jsOauth test</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

    <script type="text/javascript" src="jsOAuth-1.3.4.js"></script>

    <style type="text/css" media="screen">

    </style>

    <script>

    $(document).ready(function() {
        var options = {
            consumerKey: 'YOUR_CONSUMER_KEY',
            consumerSecret: 'YOUR_CONSUMER_SECRET'
        };
        var requestParams;
        var accessParams;

        var oauth = OAuth(options);

        oauth.get('https://twitter.com/oauth/request_token',

            function(data) {
                console.dir(data);
                window.open('https://twitter.com/oauth/authorize?'+data.text);
                requestParams = data.text
            },

            function(data) { alert('darn'); console.dir(data) }
        );

        $('#pinbutton').click(function() {
            if ($('#pin').val()) {
                oauth.get('https://twitter.com/oauth/access_token?oauth_verifier='+$('#pin').val()+'&'+requestParams,

                    function(data) {
                        console.dir(data);

                        // split the query string as needed                     
                        var accessParams = {};
                        var qvars_tmp = data.text.split('&');
                        for (var i = 0; i < qvars_tmp.length; i++) {;
                            var y = qvars_tmp[i].split('=');
                            accessParams[y[0]] = decodeURIComponent(y[1]);
                        };

                        oauth.setAccessToken([accessParams.oauth_token, accessParams.oauth_token_secret]);
                        getHomeTimeline();
                    },

                    function(data) { alert('poop'); console.dir(data); }
                );              
            }
        });

        function getHomeTimeline() {
            oauth.get('https://api.twitter.com/1/statuses/home_timeline.json',

                function(data) {
                    entries = JSON.parse(data.text);
                    var html = [];
                    for (var i = 0; i < entries.length; i++) {
                        html.push(JSON.stringify(entries[i]));
                    };
                    $('#timeline').html(html.join('<hr>'));
                },

                function(data) { alert('lame'); console.dir(data); }
            );          
        }

    });
    </script>
</head>
<body>
    <h1>jsOauth test</h1>

    When you get a PIN, enter it here.

    <input id="pin" type="text" value=""><button id='pinbutton'>Save</button>

    <div id="timeline">

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:23:55.867

我可以给你答案，但你所做的违反了 Twitter API 服务条款。JavaScript 中的 OAuthing 会将秘密凭据公开给访问该站点的任何人，这是一件坏事。请在您的后端执行此操作。

# objective-c - Objective-C – 检查重复日期是否会与另一个日期冲突

> ID：11491449
> 
> 赞同：0
> 
> 时间：2012-07-15T11:21:29.780
> 
> 标签：objective-c, compare, nsdate, future

我有两个`NSDate`对象。一个（称之为`date1`）在未来有时间戳，即`2012-07-16 12:00`这个日期每天都在重复。另一个 ( `date2`) 在未来也有一个时间戳，即`2012-07-17 12:00`。

现在我想检查是否可能`date1`会与`date2`. 显然它不会发生冲突，`2012-07-16 12:00`但后天（因为它每天都在重复）它会与`date2`.

我该如何实施这项检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:25:08.930

首先检查事件是否会在任何日期重叠，即仅使用事件的开始时间和长度。如果确实如此，则检查日期是否相同，或者日期中较早的日期是否用于重复足够多次以在第二个事件发生日期发生的事件。

要比较时间，您可以使用类似这样的方法从 NSDate 中提取小时和分钟：[如何从 NSDate 中获取小时和分钟？](https://stackoverflow.com/questions/2927028/how-to-get-hour-and-minute-from-nsdate)

对于第二次检查，您可以首先使用 NSDate's `compare`，然后使用`timeIntervalSinceDate`您输入的内容如下：[如何在 iPhone 上将 NSTimeInterval 分解为年、月、日、小时、分钟和秒？](https://stackoverflow.com/questions/1237778/how-do-i-break-down-an-nstimeinterval-into-year-months-days-hours-minutes-an) 获取两个日期之间的天数，然后您可以将其与事件的重复计数进行比较。

# linux - 如何在 linux 中直接从 /dev/input/* 读取输入事件

> ID：11491450
> 
> 赞同：0
> 
> 时间：2012-07-15T11:21:48.283
> 
> 标签：linux, events

我想在 C++ 中开发一个没有 GUI 的简单应用程序，它检测 linux 中的鼠标向上和鼠标向下事件。我不知道如何直接从 linux 中的 /dev/input/* 读取输入事件，任何关于如何继续的指针会很棒。

* * *

**此外，任何教程/文章的链接将不胜感激。**

# asp.net - 如何将所有请求重新映射到特定域到 ASP.NET 中的子目录

> ID：11491454
> 
> 赞同：0
> 
> 时间：2012-07-15T11:22:47.797
> 
> 标签：asp.net, url-rewriting, asp.net-4.0, remap

我在一个托管帐户中使用具有多个域的 ASP.NET 4.0（集成管道）。我已经设置了主域，但我想使用文件夹层次结构清楚地分隔域。（我有根 FTP 访问权限，可以将除主域之外的所有域映射到子文件夹）我也需要将主域映射到文件夹。我确信 ASP.NET 确实提供了这样的功能，可能在 web.config 设置中，但我不知道该怎么做。我所有的搜索都导致了 PHP/Apache 设置，但我找不到关于 ASP.NET 无缝重新映射的设置。

例如，我的 FTP 根目录中有这些站点：/sites/abc.com

/站点/另一个站点

/sites/xyz.com

/sites/mymastersite.com

我需要将需要将所有请求映射到 mymastersite.com 到 /sites/mymastersite.com 文件夹（包括所有子域）无缝地放入我的根目录 / 一个 web.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:52:42.977

我认为正确的解决方案是 IIS 的每个请求都直接转到正确的站点，而不是您所说的根目录。

我能想到的一种方式来满足您的要求是使用到`Global.asax`最终目的地并且仍然具有没有路径的链接。`Application_BeginRequest``RewritePath``/site/`

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{   
    if(HttpContext.Current.Request.Host.EndsWith("xyz.com"))
       RewritePath("/sites/xyz.com" + HttpContext.Current.Request.Path, false);  
} 
```

# java - Java 从 servlet 调用 EJB

> ID：11491457
> 
> 赞同：1
> 
> 时间：2012-07-15T11:22:56.113
> 
> 标签：java, reflection, ejb

我有一个 servlet，我想根据 servlet 获取的参数从它动态调用 EJB 对象。

调用 EJB 对象和方法的最佳方式是什么？

**更新**：例如，我得到的参数是 sessionBean 的名称，所以我想调用它（通过它的名称），然后在其中调用一些方法，因此它将被动态创建。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:46:28.670

您可以通过[JNDI](http://en.wikipedia.org/wiki/Java_Naming_and_Directory_Interface)查找来执行此操作。

```
InitialContext ic = new InitialContext();
MyEJB ejb = (MyEJB) ic.lookup("java:comp/env/MyEJB"); 
```

这将检索 MyEJB 的远程接口，只需根据 servlet 参数创建查找字符串。如果你对方法一无所知，你应该使用反射来找出答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:49:08.333

在不进行一系列`@EJB`注入的情况下获得此结果的最简单方法是使用查找。假设您已经确定需要一个 EJB1 实例，查找代码将如下所示：

```
private EJB1 ejb1 = null;
try {
    InitialContext ic = new InitialContext();
    ejb1 = (EJB1)
            ic.lookup(ejb1.class.getName());
    ejb1.method1();
} catch (Exception ex) {
    logger.log(Level.SEVERE,"Couldn’t create converter bean.",ex);
} 
```

检查我们服务器的示例，了解在创建 InitialContext 和查找调用时使用的确切语法。

# c++ - 如何生成具有指数分布（均值）的随机数？

> ID：11491458
> 
> 赞同：11
> 
> 时间：2012-07-15T11:23:15.140
> 
> 标签：c++, exponential-distribution

我正在尝试生成均值等于 1 的指数分布的随机数。我知道如何获取具有均值和标准差的正态分布的随机数。我们可以得到它`normal(mean, standard_deviation)`，但我不知道如何获得指数分布的随机数。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T11:33:47.107

对于*C++11*，该标准实际上保证了*RNG*遵循STL 中可用的*指数分布的要求，并且**对象类型*有一个非常具有描述性的名称。

指数分布的随机发生器中的*平均值*由公式`E[X] = 1 / lambda`¹计算。

`std::exponential_distribution`有一个以*lambda*作为参数的构造函数，因此我们可以通过计算*lambda*的值并将其传递给我们的生成器，轻松地按照您的规则创建一个对象。

```
std::exponential_distribution rng (1/1); // lambda = 1 / E[X] 
```

* * *

^(**脚注**)
^(^(1.)根据**[en.wikipedia.org - 指数分布 > 均值、方差、矩和中位数](http://en.wikipedia.org/wiki/Exponential_distribution#Mean.2C_variance.2C_moments_and_median)**)

* * *

### 分布为可读的 ascii 图表

```
#include <iomanip>
#include <random>
#include <map>
#include <iostream>

int
main (int argc, char *argv[])
{
  double const exp_dist_mean   = 1;
  double const exp_dist_lambda = 1 / exp_dist_mean;

  std::random_device rd; 

  std::exponential_distribution<> rng (exp_dist_lambda);
  std::mt19937 rnd_gen (rd ());

  /* ... */

  std::map<int, int> result_set;

  for (int i =0; i < 100000; ++i)
    ++result_set[rng (rnd_gen) * 4]; 

  for (auto& v : result_set) {
    std::cout << std::setprecision (2) << std::fixed;

    std::cout << v.first/4.f << " - " << (v.first+1)/4.f << " -> ";
    std::cout << std::string (v.second/400, '.') << std::endl;

    if (v.second/400 == 0)
      break;
  }
} 
```

```
0.00 - 0.25 -> ........................................................
0.25 - 0.50 -> ...........................................
0.50 - 0.75 -> .................................
0.75 - 1.00 -> .........................
1.00 - 1.25 -> ....................
1.25 - 1.50 -> ...............
1.50 - 1.75 -> ............
1.75 - 2.00 -> .........
2.00 - 2.25 -> .......
2.25 - 2.50 -> .....
2.50 - 2.75 -> ....
2.75 - 3.00 -> ...
3.00 - 3.25 -> ..
3.25 - 3.50 -> ..
3.50 - 3.75 -> .
3.75 - 4.00 -> .
4.00 - 4.25 -> .
4.25 - 4.50 -> 
```

* * *

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-15T11:33:39.383

可以通过以下方式生成指数分布随机变量：

```
-ln(U)/lambda (where U~Uniform(0,1)). 
```

更多信息可以在[这篇维基百科文章中找到](http://en.wikipedia.org/wiki/Exponential_distribution#Generating_exponential_variates)

在指数分布中：`lamda = 1/mean`，所以它让你：

```
myVar = -ln(U) * mean (where U~Uniform(0,1)). 
```

# asp.net-mvc-3 - jQGrid asp.net mvc 3 从头实现

> ID：11491459
> 
> 赞同：2
> 
> 时间：2012-07-15T11:23:20.917
> 
> 标签：asp.net-mvc-3, jqgrid, jqgrid-asp.net

我正在尝试`jQGrid`在我的应用程序中实现一些基本功能，包括过滤和子网格。我看了很多文章，但其中许多似乎已经过时了。我想我正在努力实现它的基础知识。如果您可以提供基本的控制器视图结构或从头开始参考任何类型的教程，我将非常感激`asp. net mvc 3.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:26:44.570

这是视图中的代码（首先是标记，然后是 JS）：

```
@model SampleApp.SampleModel

@{
    ViewBag.Title = "Stackoverflow Title";
    Layout = "~/Views/Shared/_defaultLayout.cshtml";

}

<link href="@Url.Content("~/Content/themes/cupertino/jquery-ui-1.8.13.custom.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/grid/ui.jqgrid.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/ui/jquery-ui-1.8.12.custom.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/grid/grid.locale-en.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/grid/jquery.jqGrid.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/myJSHelper.js")" type="text/javascript"></script>

<script type="text/javascript" id="loadGridResultsScript1">
    // This code LOADs the grid by calling the MVC Action to get Data
    $(document).ready(function () { helper.loadSearchResults('@Model.JobCode'); });
</script>

<!-- these are the jQuery Grid controls -->
<table id="list" class="scroll" cellpadding="0" cellspacing="0"></table>
<div id="pager" class="scroll" style="text-align:center;"></div> 
```

这是 myHelper JS 文件中的 JS 函数：

```
loadSearchResults: function (id) {

        $("#list").jqGrid({
            url: vpath + '/Sample/GetTargets/' + id,
            datatype: 'json', mtype: 'POST', colNames: cols,
            colModel: colModel, pager: $('#pager'),
            rowNum: 15, rowList: [5, 10, 15, 25, 50, 100], sortname: cols[1],
            sortorder: "asc", viewrecords: true,
            imgpath: '', caption: ' '
        });
        $("#list").setGridWidth(1000, true);
        $("#list").setGridHeight(350, true);

    } 
```

这是 jQuery 调用的动作：

```
 public ActionResult GetTargets(string id, string sidx, string sord, int page, int rows)
    {

        var repo = IOCContainer.Resolve<DataRepository>();
        ////////////////////////////////////////////////////////////////////
        var job = svc.GetJobByCode(id);
        // job is my 'Model', it is a System.Data.DataSet

        int pageIndex = Convert.ToInt32(page) - 1;
        int pageSize = rows;

        int totalRecords = (job.Targets == null) ? 0 : job.Tables[0].Rows.Count; 
        int totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);
        List<DataRow> pageSet = Enumerable.Empty<DataRow>().ToList();

        if (totalRecords > 0)
        {
            // Get rows for current page!!!
            if (sord == "asc")
            {
                if (sidx == "   ") sidx = job.Tables[0].Columns[0].ColumnName;

                pageSet = job.Tables[0].Rows.Cast<DataRow>()
                        .OrderBy(q => q[sidx])
                        .Skip(pageIndex * pageSize)
                        .Take(pageSize)
                        .ToList();
            }
            else
                pageSet = job.Targets.Tables[0].Rows.Cast<DataRow>()
                        .OrderBy(q => q[sidx])
                        .Reverse()
                        .Skip(pageIndex * pageSize)
                        .Take(pageSize)
                        .ToList();
        }

        var cols = GetColumnNames(job.Tables[0]);
        // Func to get Cells, called later on in code...
        Func<DataRow, string[], string[]> getCells = (pkg, columns) =>
        {
            var cellList = new List<string>();
            cellList.Add(pkg[0].ToString());
            foreach (var col in columns)
            {
                if (col.StartsWith("_")) continue;
                object cellContent = pkg[col];
                string cellText = string.Empty;
                if (cellContent is DateTime)
                {
                    cellText = ((DateTime)cellContent).ToString("MM/dd/yyyy");
                }
                else if (cellContent is decimal || cellContent is double)
                {
                    cellText = string.Format("{0:c}", cellContent);
                }
                else
                {
                    cellText = String.Format("{0}", cellContent);
                }
                cellList.Add(cellText);
            }

            return cellList.ToArray();
        };
        var jsonData = new
        {
            total = totalPages,
            page,
            records = totalRecords,
            rows = (
                from item in pageSet
                select new
                {
                    i = item[0].ToString(),
                    cell = getCells(item, cols)
                }).ToArray()
        };
        return Json(jsonData);
    } 
```

我希望你觉得这有帮助。让我知道是否有任何问题

# c# - vs2010中格式化逗号分隔的参数

> ID：11491463
> 
> 赞同：2
> 
> 时间：2012-07-15T11:24:22.803
> 
> 标签：c#, visual-studio-2010

我有这样的代码

```
void method1(param1
             ,param2
             ,param3){...} 
```

但是当我按 ctrl+k ， ctrl+d 重新格式化类时，它将被格式化为流

```
void method1(param1
             ,
              param2
             ,
              param3){...} 
```

我知道如果我将逗号放在参数名称之后会解决，但我真的希望它在参数名称之前。我如何通知 vs2010 的自动格式化未来来格式化我的方法如下：

```
void method1(param1
             ,param2
             ,param3){...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:27:08.423

看看[ReSharper](http://www.jetbrains.com/resharper/)，您可以配置您希望如何运行应用程序整理（以及提供一些其他有用的功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:27:51.540

```
Tools > Options > Text Editor > C# > Formatting 
```

如果你在[这里使用 resharper loot](http://www.jetbrains.com/resharper/features/code_formatting.html#Code_Formatting)

# windows-phone-7 - WMAppManifest.xml 不会被覆盖吗？

> ID：11491466
> 
> 赞同：1
> 
> 时间：2012-07-15T11:25:23.733
> 
> 标签：windows-phone-7

我的 WP7 应用程序的更新刚刚发布。当我在本地开发时，我将应用程序的标题设置为缩写，以便在从应用程序菜单启动时知道哪个是哪个（本地开发或已发布的副本）。

我忘记在发布时将缩写改回全名，但我认为 WMAppManifest.xml 中的所有内容都被您在应用程序中心输入的元数据覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:03:19.293

您在提交时输入的信息是针对市场的。要在手机中显示的标题是从您的 .xap 中提取的。因此，您可能会在市场上看到正确的标题，但在设备上看不到。我也发生过一次:)。

# jquery - 使用 jQuery 生成元素的左偏移量

> ID：11491467
> 
> 赞同：0
> 
> 时间：2012-07-15T11:25:23.863
> 
> 标签：jquery, loops, each

```
$("#footer div ul li").each(function(a) {
    $("#footer div ul li:nth-child(" + a + ")").css({
        left : 275*a - 275 + "px"
    });
}); 
```

我想用 jQuery 生成所有 li 的左偏移量。第一个元素应该有：0px，第二个 275px，第三个 550px 等。我发现有类似 .each() 循环的东西，但它只适用于第一个元素。
有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:28:03.477

只需使用`this`

```
 $("#footer div ul li").each(function(a) {
         $(this).css({
            left : 275*a - 275 + "px"
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:29:06.407

怎么样：

```
$("#footer div ul li").each(function(index, element) {
    $(this).css({
        left : 275*index + "px"
    });
}); 
```

?

index 应该从 0 开始，所以我不知道你为什么要减去 275（这应该是 -275px，0px，275px，...）

您也可以只操作 jQuery 传入的 domElement，如下所示：

```
$("#footer div ul li").each(function(index, element) {
    element.style.left = 275*index + "px";
}); 
```

# javascript - 我基于相同的数组在另一个循环中迭代一个循环，忽略重复项的最佳方法是什么？

> ID：11491472
> 
> 赞同：0
> 
> 时间：2012-07-15T11:26:52.333
> 
> 标签：javascript, jquery

我想保存数组的所有组合。所以对于 [a, b, c] 我想保存 [ab, ac, ba, bc, ca, cb]

我目前使用这种方法：

```
for (coordinate in coordinates){
    for (coordinate2 in coordinates){
        if (coordinate != coordinate2){
            newposts.push([fbposts[fbpost].id, coordinates[coordinate], coordinates[coordinate2]]);
        }
    }
} 
```

但它会产生一堆重复。解决这个问题最顺利的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:50:01.490

您可以利用您只能定义一次属性并具有以下内容的事实：

```
$(function() {
    var arr = ["a","b","c"];
    var permutations ={};
    $.each(arr, function(index1, val1) 
    {
        $.each(arr, function(index2, val2) 
        {
            permutations[val1+val2] = 0;
        });      

    });
    for(var prop in permutations)
    {
        //in prop you will have your elements: aa,ab...

    }        

});​ 
```

*在这种情况下，排列*将扮演字典的*角色*

生成组合的逻辑是次优的，因为运行时间是 n 平方 -有关从 n 元素数组中生成 k 元素组合的算法，请参阅[此问题](https://stackoverflow.com/questions/127704/algorithm-to-return-all-combinations-of-k-elements-from-n)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:33:22.277

在通过自定义函数或可能添加到新数组之前添加检查

```
array.indexOf(...) 
```

类似于 jQuery 的自定义函数：

```
function inArray(needle, haystack) {
    var length = haystack.length;
    for(var i = 0; i < length; i++) {
        if(haystack[i] == needle) return true;
    }
    return false;
} 
```

因此，当您正在构建新的排列/组合数组时（自我上一次统计课以来已经 13 年以上），请执行快速检查，如果为真则不要添加，否则添加。我相信如果您执行数组合并，它会执行类似的相同性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T11:39:32.507

您可以使用修改后的[冒泡排序](http://www.personal.kent.edu/~rmuhamma/Algorithms/MyAlgorithms/Sorting/bubbleSort.htm)算法：

```
var result = [],
arr = 'abc'.split('');

// begin the bubble sort loop
for(var i=0,l=arr.length;i<l-1;i++)
    for(var j=i+1;j<l;j++)
        {
            result.push(arr[i]+arr[j]);
            result.push(arr[j]+arr[i]);
        }
console.log(result); //["ab", "ba", "ac", "ca", "bc", "cb"] 
```

通过以这种方式循环数组，您甚至不需要检查结果是否重复，因为它不会生成任何结果。顺便说一句，不要使用`for..in`合成器循环数组，因为它可能会产生意想不到的结果。

# unix - 无法打开锁定文件 /var/lib/dpkg/lock

> ID：11491475
> 
> 赞同：2
> 
> 时间：2012-07-15T11:27:15.707
> 
> 标签：unix

尝试在 VM 中的 ubuntu 上安装软件时出现如下错误。如果我是 root 用户，我可以下载任何软件。但我现在忘记了我的密码。有没有什么办法不用卸载就可以更新root的密码。请帮忙。

无法打开锁定文件 /var/lib/dpkg/lock -open (13:permission denied) 无法锁定管理目录 (/var/lib/dpkg)，你是 root 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:38:37.273

我假设您的引导加载程序是 Grub（很可能，因为您使用的是 Ubuntu），所以请尝试`Ctrl`在启动过程中按空格键（任何键都应该有效，甚至 ）。然后，按`e`编辑当前引导条目，将光标移动到其中包含的行的末尾`kernel`，然后添加`init=/bin/bash`. 按`Ctrl-X`并等待直到 shell 提示。比，做一个`mount -o remount,rw /`. 现在您在可写根分区上有一个根帐户。执行`passwd`，设置密码，执行`mount -o remount,ro /`并重新启动。而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:29:50.577

看看[这个链接](http://www.psychocats.net/ubuntu/resetpassword/)，但你需要启动到单用户模式（这是可能的，但如果这是一个虚拟的，那么你需要访问主机。如果你无权访问主机那我恐怕你不走运：|

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-01T05:30:15.723

有时一个简单的重启就可以了。在使用任何其他选项之前尝试一下。

# c# - 在 C# 中查找控件的 ExactCenterX 或 Y

> ID：11491481
> 
> 赞同：0
> 
> 时间：2012-07-15T11:28:01.183
> 
> 标签：c#, drawing, controls, picturebox, bounds

如果我没记错的话，在 Android 的视图类中有一种方法`Bounds.ExactCenterX`可以返回视图的确切中心。

我想在 a 中具有相同的确切中心`PictureBox`。`Bounds`我在其他地方找不到 ExactCenterX 或 Y 属性`PictureBox`吗？

如果没有，是否会`Bounds.Width / 2F`返回图片框控件的确切中心像素？如果宽度是奇数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:34:18.007

一些基本几何：
如果你想获得相对于表格的中心像素：
`Control.Location.X + Control.Width / 2`对于`X`值。
`Control.Location.Y + Control. Height / 2`为`Y`价值。
因为你划分`Integers`了`.5`应该附加的，以防`Width`or`Height`是奇数将被丢弃。`double`您可以通过强制转换为或来更改此行为`float`。

# gcc - arm 内联汇编代码和编译器优化的选项

> ID：11491486
> 
> 赞同：0
> 
> 时间：2012-07-15T11:28:37.980
> 
> 标签：gcc, assembly

我正在尝试一些内联汇编代码。

我的功能是

```
void pixemcpy(unsigned char *im_src, unsigned char *im_dest, int npix)
{
    int i;
    for(i=0;i<npix;i++) *im_dest++=*im_src++;
} 
```

我的汇编内联函数是

```
void inline_pixelcpy(unsigned char *im_src, unsigned char *im_dest, int npix){
    __asm__ volatile(
    "0: \n"
    "ldrb r3, [%[src]], #1 \n"
    "strb r3, [%[dst]], #1 \n"
    "subs %[iter], %[iter], #1\n"
    "bgt 0b\n"
    :
    : [src] "r" (im_src), [dst] "r" (im_dest), [iter] "r" (npix)
    : "cc", "r3"
    );
} 
```

两个函数都在同一个c文件中！当我编译我的 c 文件时，这就是工作！两个功能做同样的事情没有问题。

如果我使用 -O2 或 -O3 gcc 选项，则在返回（不调用）我的汇编函数时会出现分段错误！

如果我的 2 个函数位于单独的文件中，则不会出现此问题！

我的内联代码有问题吗！我如何告诉 gcc 不要尝试优化我的内联代码！

谢谢艾蒂安

# eclipse - 使用 tycho 在 linux 中为 macosx 导出 RCP 产品

> ID：11491487
> 
> 赞同：-1
> 
> 时间：2012-07-15T11:28:38.860
> 
> 标签：eclipse, macos, product, tycho

我是 tycho 的新手，我正在尝试使用 tycho 为 macosx 导出产品，但我遇到了这个错误：

[错误] 无法在项目 tychodemo.repository 上执行目标 org.eclipse.tycho:tycho-p2-director-plugin:0.14.1:materialize-products (materialize-products)：P2 director 返回代码为 13 -> [Help 1 ]

我成功导出了适用于 linux 和 windows 的产品，但我无法导出适用于 macosx 的产品，请帮帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:03:59.830

尝试第谷 0.15.0。p2 产品发布器中存在各种错误，这些错误已在 tycho 0.15.0 中修复。

您粘贴的堆栈跟踪太短，无法进行任何详细分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:44:26.907

我以前没有使用过 tycho，但是由于这个错误，我在从 linux 导出 mac 产品时遇到了问题：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=305143](https://bugs.eclipse.org/bugs/show_bug.cgi?id=305143)

# javascript - 遍历Javascript中的正则表达式数组

> ID：11491489
> 
> 赞同：2
> 
> 时间：2012-07-15T11:28:45.093
> 
> 标签：javascript, regex, arrays

如何使用正则表达式数组并使用“exec”操作迭代该数组。我确实用各种正则表达式初始化了一个数组，如下所示：

```
var arrRegex = new Array(/(http:\/\/(?:.*)\/)/g, /(http:\/\/(?:.*)\/)/g); 
```

现在我创建了一个执行此操作的 for 循环：

```
 for(i=0;i<arrRegex.length;i++){
     arrRegex[i].exec(somestring);
 } 
```

问题是这似乎不起作用。我不想像这样硬编码使用它：

```
 (/(http:\/\/(?:.*)\/)/g).exec(somestring); 
```

**使用数组选项时，'.exec' 函数返回 null**。当我使用硬编码选项时，它会根据需要返回匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:46:31.670

返回匹配项，`exec()`因此您应该能够捕获它。

```
somestring = 'http://stackoverflow.com/questions/11491489/iterate-through-regular-expression-array-in-javascript';
var arrRegex = new Array(/(http:\/\/(?:.*)\/)/g, /(http:\/\/(?:.*)\/)/g);
for (i = 0; i < arrRegex.length; i++) {
    match = arrRegex[i].exec(somestring);
} 
```

`match`是一个数组，结构如下：

```
{
    [0] = 'string matched by the regex'
    [1] = 'match from the first capturing group'
    [2] = 'match from the second capturing group'
    ... and so on
} 
```

看看这个 jsFiddle [http://jsfiddle.net/HHKs2/1/](http://jsfiddle.net/HHKs2/1/)

您也可以使用`test()`而不是`exec()`作为`exec() != null`. `test()`将根据正则表达式是否匹配字符串的一部分返回一个布尔变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:54:26.143

您可能想要做的是捕获第一组：

```
for(i=0;i<arrRegex.length;i++){
  var someotherstring = arrRegex[i].exec(somestring)[1];
  // do something with it ...
} 
```

顺便说一句：这是我的猜测，不确定您要做什么。但是，如果您尝试获取 URL 的主机名，您应该使用`/(http:\/\/(?:.?)\/)/g`. 后面的问号`.*`使前面的量词 ( `*`) 变得不贪婪。

# c# - C# 从文本文件中获取参数并在运行时声明

> ID：11491490
> 
> 赞同：1
> 
> 时间：2012-07-15T11:28:50.803
> 
> 标签：c#

我有一个包含以下内容的文本文件：

```
int A = 5 ;
string str = "tempstring" ;
str DosomeMethod 15 16 20 22 ; 
```

通过我的程序读取文本文件时，我想在运行时声明`int A = 5`& `string str = "tempstring"`。

它可以像

```
string[] st = freader.readline().split(' ');
if (st[0]=="int")
    {
      str[0] str[1] = str[4];
    } 
```

我知道上面的语法是错误的，但我想通过一些参考来做这样的事情。

任何人都可以在不使用讽刺 .net 的情况下提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:46:19.947

这是比较先进的材料。
你真的不能像你说的那样做。C# 是一种`strongly-typed`语言。
虽然，您可能会寻求以下解决方案之一：

*   [IronPython](http://ironpython.net/) - 一种使用 .NET 的脚本语言。

*   C# 的[动态](http://msdn.microsoft.com/en-us/library/dd264736.aspx)关键字。

*   [反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)
*   [在应用程序中动态编译 C# 代码](http://www.codeproject.com/Articles/6492/A-tool-for-dynamic-compile-and-run-of-C-or-VB-NET)
*   或者，如果您寻求快速解决方案，您可以`string temp`在代码中设置这些变量（等等），然后根据字符串将值放入其中。

# ios - NSFetchedResultsController 在它应该返回的时候不返回任何数据

> ID：11491491
> 
> 赞同：1
> 
> 时间：2012-07-15T11:28:54.290
> 
> 标签：ios, core-data

我有一个**房间**实体与许多**消息**实体的关系。
我使用这个 FRC 来获取一个房间中的所有消息：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(rid == %@) AND (status >= 0)", _room];
_fetchControllerForHistory = [Message MR_fetchAllSortedBy:@"serverDatetime,index" ascending:YES withPredicate:predicate groupBy:nil delegate:self]; 
```

过去几个月它运行良好，但在我更新应用程序以使用新版本的 MagicalRecord 后，问题出现了。

我猜我从服务器代码中获取的新数据有问题，现在看起来像这样：

```
dispatch_async(retrieve_queue(), ^{
    ASIHTTPRequest *roomRequest = //code to genrate the request;
    [roomRequest startSynchronous];
    if (!roomRequest.error)
    {
        [MagicalRecord saveWithBlock:^(NSManagedObjectContext *localContext) {
            // code to parse the data
        }];
    }
}); 
```

提取完成后，每个房间都会有至少一条消息。但 FRC 不会返回任何结果，即使该房间中有一条消息并且状态为 > 0。

```
NSLog(@"%i,%i",_room.mids.count, self.fetchControllerForHistory.fetchedObjects.count);
1,0 
```

谢谢。

# jboss - JBoss 7.1 中的错误消息是什么意思，Seam Web 项目

> ID：11491503
> 
> 赞同：1
> 
> 时间：2012-07-15T11:30:45.017
> 
> 标签：jboss

我尝试部署 Seam Web Project，但出现两个错误：

> 135 错误 [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015010：部署扫描程序发现一个名为 META-INF 的目录不在名称以 .ear、.jar、 .rar、.sar 或 .war。这可能是直接在 D:\Karolina\programy\jboss-as-7.1.1.Final\standalone\deployments 目录中解压存档的结果，这是用户错误。不会扫描 META-INF 目录以进行部署，但扫描程序可能会从解压缩的存档中找到其他文件并尝试部署它们，从而导致错误。

> 135 错误 [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015010：部署扫描程序发现一个名为 WEB-INF 的目录不在名称以 .ear、.jar、 .rar、.sar 或 .war。这可能是直接在 D:\Karolina\programy\jboss-as-7.1.1.Final\standalone\deployments 目录中解压存档的结果，这是用户错误。不会扫描 WEB-INF 目录以进行部署，但扫描程序可能会从解压缩的存档中找到其他文件并尝试部署它们，从而导致错误。

Enyone 知道这意味着什么，我应该怎么做才能解决它？我会很高兴得到任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:34:05.223

错误消息表明您很可能正在尝试部署所谓的*分解*存档，但 JBossAS7 中对分解存档的支持已更改。

Java EE 6 使许多 xml 部署描述符成为可选的，这对开发人员来说是一个巨大的胜利，但是像 JBoss 这样的应用服务器必须改变他们识别归档类型的方式，因为现在他们不能依赖检查文件/目录是否存在xml 描述符。

[您可以在docs](https://docs.jboss.org/author/display/AS71/Application+deployment)中找到更多详细信息。

# c++ - Python with C++ 中的语句

> ID：11491505
> 
> 赞同：12
> 
> 时间：2012-07-15T11:31:01.697
> 
> 标签：c++, python, with-statement, state-management

我正在尝试在 C++中实现类似于[python with 语句的东西。](http://docs.python.org/reference/compound_stmts.html#the-with-statement)因为我计划主要将它与 Qt-OpenGL 一起使用，所以方法被调用`bind`和`release`（在 python`__enter__`中`__exit__`）。

我想出的代码：

标题：

```
#include <iostream>
#include <vector>

class With
{
public:
    class A
    {
    public:
        virtual ~A() { }
    };

    template <typename T>
    class B : public A
    {
    public:
        B(T& _t) : t(_t)
        {
            t.bind();
        }

        virtual ~B()
        {
            t.release();
        }

        T& t;
    };

    template <typename... Args>
    With(Args&... args)
    {
        set(args...);
    }

    ~With();

    template <typename T, typename... Args>
    void set(T& t, Args&... args)
    {
        set(t);
        set(args...);
    }

    template <typename T>
    void set(T& t)
    {
        a.push_back(dynamic_cast<A*>(new B<T>(t)));
    }

    std::vector<A*> a;
}; 
```

cp:

```
With::~With()
{
    for (auto it = a.begin(); it != a.end(); ++it)
    {
        delete *it;
    }
} 
```

用法：

```
class X
{
public:
    void bind() { std::cout << "bind x" << std::endl; }
    void release() { std::cout << "release x" << std::endl; }
};

class Y
{
public:
    void bind() { std::cout << "bind y" << std::endl; }
    void release() { std::cout << "release y" << std::endl; }
};

int main()
{
    X y;
    Y y;

    std::cout << "start" << std::endl;
    {
        With w(x, y);
        std::cout << "with" << std::endl;
    }

    std::cout << "done" << std::endl;

    return 0;
} 
```

问题：

1.  需要`class A`，`class B`感觉有点笨拙。有更好的选择吗？
2.  `&&`使用而不是有什么缺点`&`吗？这将使临时对象的使用成为可能（例如`With w(X(), y);`）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T16:59:32.860

with 语句是在 python 中执行 C++ 中已经很正常的事情的一种方式。它被称为 RAII：资源获取是初始化。

在python中，当创建一个类对象时，`__init__`会调用该方法（但这不是一个严格的保证）。该`__del__`方法在对象不再使用后的某个时间点由垃圾收集器调用，但它不是确定性的。

在 C++ 中，析构函数在定义明确的点被调用，因此不需要`with`.

我建议您只*使用*B 类之类的东西（不需要 A 类或 With）。

```
template <typename T>
class B {
public:
    B(T& t) : m_t(t){
        m_t.bind();
    }
    ~B() {
        m_t.release();
    }
    T& m_t;
} 
```

像这样使用它：

```
{
    B<X> bound_x(x);  // x.bind is called
    B<Y> bound_y(y);  // y.bind is called
    // use x and y here
} // bound_x and bound_y is destroyed here 
  // so x.release and y.release is called 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:16:52.683

它随语言一起提供，称为 RAII。

```
struct X {
    X() { std::cout << "bind\n"; }
    ~X() { std::cout << "release\n"; }
};
int main() {
    X x;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-11T13:55:48.887

一种可能的解决方案：

```
template <typename T>
void with(T *t, std::function<void ()> fn) {
    t->bind();
    fn();
    t->unbind();
} 
```

用法：

```
with(object, []() {
    // object bound
}); 
```

# apache-flex - 皮肤下拉框

> ID：11491507
> 
> 赞同：0
> 
> 时间：2012-07-15T11:32:02.417
> 
> 标签：apache-flex, drop-down-menu

我想知道是否有一种方法可以对整个下拉框进行蒙皮，在搜索 Google 之后，我只能找到诸如添加图标大小调整之类的东西，但没有对框进行完整蒙皮。

这完全有可能吗？如果可以，怎么办？我非常希望我的整个程序被皮肤而不是除了下拉框之外的所有内容。

就代码而言，我更像是一名设计师而不是编码员做。

在弹性...对不起

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:27:01.467

> 我想知道是否有办法对整个下拉框进行蒙皮，

[是的，为DropDownList](http://help.adobe.com/en_US/flex/using/WSc2368ca491e3ff92-59bf082612135c9e688-7fff.html)创建一个自定义外观类，就像您为任何其他 Spark 类创建的一样。您可以使用[DropDownListSkin](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/skins/spark/DropDownListSkin.html)的代码作为创建自己的参考点。在 Flash Builder 中，如果您创建一个新的 MXML 皮肤；并将 hostComponent 指定为 DropDownList，然后您将获得 DropDownListSkin 代码作为自定义的起点。

有关更多信息，请阅读这些有关皮肤[Spark 组件](http://help.adobe.com/en_US/flex/using/WSA95C9644-B650-4783-B5C0-D2C7F95A23E3.html)的文档。

本质上，我们正是这样做来创建我们的[Mobile DropDownList](https://www.flextras.com/index.cfm?event=ProductHome&productID=21)。

# php - 计算数组的第 3 级

> ID：11491508
> 
> 赞同：0
> 
> 时间：2012-07-15T11:32:02.900
> 
> 标签：php, arrays

是否可以不迭代数组？

```
$arr = array(
         'section1' => array(
                         5  => array(1, 2, 3),
                         25 => array(4, 5),
                         34 => array(10, 12),

                       ),

         'section2' => array(
                         45 => array(1, 42, 3),                             
                         64 => array(10, 2, 5, 95),
                       ),

         'section3' => array(
                         5 =>  array(1, 2, 3, 5, 2),
                         25 => array(4, 5, 14),
                         34 => array(17),
                       ),

       );

$count = 0;

foreach($arr as $section)
  foreach($section as $subsection)
    foreach($subsection as $entries)      
      $count++;

echo $count; // 23 
```

它有效，但我不想遍历整个数组只是为了计算一些元素......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T11:35:36.883

您可以使用[`count()`](http://php.net/count).

如果您需要所有级别的所有元素：

```
count($arr, COUNT_RECURSIVE); 
```

如果您只需要计算第三级的那些：

```
foreach($arr as $section)
  foreach($section as $subsection)
    $count += count($subsection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:40:31.523

一切皆有可能对吗？;-)

我会看到两种无需迭代就可以做到这一点的方法，一种是评估 print_r($main_array) 值，也许计算“(”以达到所需的深度。

--

另一种方法是将数据存储为 JSON，因此您可以“遍历”树，而且它在 javascript 中是原生的，因此使用点表示法非常有效。

```
"somefield":["anotherfield":["yetanother":value], "woohoo":["yahoo":value]]]  (excuse me if not well-formed just on the fly) 
```

然后你解析 JSON 并引用如下： myval = somefield.anotherfield.yetanother; // myval = 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T11:37:27.490

这是我解决这个难题的方法！

```
<?php
$arr = array(
     'section1' => array(
                     5  => array(1, 2, 3),
                     25 => array(4, 5),
                     34 => array(10, 12),

                   ),

     'section2' => array(
                     45 => array(1, 42, 3),                             
                     64 => array(10, 2, 5, 95),
                   ),

     'section3' => array(
                     5 =>  array(1, 2, 3, 5, 2),
                     25 => array(4, 5, 14),
                     34 => array(17),
                   ),

   );

function count_all($array)
{
    $count = 0;
    foreach ($array as $k => $v)
    {
        if (is_array($v))
        {
            $count += count_all($v);
        }
        else {
            $count++;
        }
    }
    return $count;
}

echo count_all($arr); 
```

# c++ - boost::signal and std::bind confusion, should I try something else?

> ID：11491512
> 
> 赞同：0
> 
> 时间：2012-07-15T11:32:33.780
> 
> 标签：c++, boost

I'm trying to figure out a way that I can send messages to other objects in C++. For example when an object collides with another object, it will send out a message that there was a collision that occured. I'm trying to use boost:signal's, but they don't seem to be exactly what I want, unless I'm just using them in the wrong manner.

Here's the main reason:

I don't really understand is why this code still works even known that the object I allocated on the stack has been destroyed...

```
class SomeClass
{
public:

   void doSomething()
   {
      std::cout << "Testing\n";
   }
};

int main(int argc, char** argv)
{
     boost::signal<void ()> sig;

     {
           SomeClass obj;
           sig.connect(std::bind(&SomeClass::doSomething, &obj));
     }

     sig();
} 
```

Okay so that code outputs:

```
Testing 
```

Why does it still work? Shouldn't I get some sort of run-time error or it not call the method at all? I don't really want that to actually happen, I want the connection to be lost as soon as the object is destroyed.

I was thinking of sending messages another way, perhaps Objective-C style using their type of delegates, where you would inherit from a class to have a message sent to you. But then again, it seems to lead to me for some confusion, such as if I want multiple delegates I would have an array of delegate pointers, and if a delegate gets destroyed I would have to remove it from that array... Which could cause some confusion.

e.g.

```
class ColliderDelegate
{
public:

    virtual ~ColliderDelegate() {}

    virtual void onCollisionEnter(Collider* sender, Collider* withWho) = 0;
    virtual void onCollisionExit(Collider* sender, Collider* withWho) = 0;
    virtual void onCollisionStay(Collider* sender, Collider* withWho) = 0;

private:

    // I would have to have an array of Collider's that this object is connected to,
    // so it can detatch itself when it's destroyed...
 };

 class Collider
 {
 public:
    void add(ColliderDelegate* delegate);
    void remove(ColliderDelegate* delegate);

    void checkForCollisionWith(Collider*);

 private:

     // I would have to have an array of ColliderDelegate's that this object
     // needs to send information to.
 }; 
```

Can anyone suggest how I could implement what I want to do? I'm really confused on what I should do...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:04:50.907

The signal slot in your example is a non-virtual member function, which doesn't access any object members. Non-virtual function address is resolved in compile-time, `this` pointer is not needed here -- so there's no reason for crash.

On the other hand, you could use singal "tracking" feature to disconnect the slot automatically. See the following: tracking in [Boost.Signals](http://www.boost.org/doc/libs/1_50_0/doc/html/signals/tutorial.html#id3162121); tracking in [Boost.Signal2](http://www.boost.org/doc/libs/1_50_0/doc/html/signals2/tutorial.html#signals2.tutorial.connection-management).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:04:31.787

> Why does it still work?

It's actually Undefined Behavior because `doSomething()` is being called on a destructed object. (To see this, add a print statement to the destructor.) When you ran the program, "Testing" was printed to the screen, but the program could have crashed.

What you might consider is adding a [`connection`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/signals/connection.html) member to `SomeClass`. This way, in the `SomeClass` destructor you could disconnect the signal–slot connection.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:04:18.757

To answer at least some of your questions:

> Why does it still work? Shouldn't I get some sort of run-time error or it not call the method at all?

I guess you are just lucky. You object gets destroyed nevertheless you can still call methods on it. It is undefined behaviour but in your case it does not crash.

You are not very specific on what problem you want to solve. So it is difficult to tell what is the best solution.
For your delegate approach take a look at `std::shared_ptr` and `std::weak_ptr`. You can hold arrays of `std::weak_ptr` and call your delegates through those.

Or maybe `boost::signal` is the right choice. Have a look at [scoped connections](http://www.boost.org/doc/libs/1_50_0/doc/html/signals2/tutorial.html#id3174728).

# android - 将 AutoCompleteTextView 改为 ActionBar 中的 SearchView

> ID：11491515
> 
> 赞同：27
> 
> 时间：2012-07-15T11:32:53.937
> 
> 标签：android, google-places-api, autocompletetextview, searchview

我有一个**AutoCompleteTextView ，它为用户提供来自****Google Places API**的自动完成搜索结果。完成后，我发现了**SearchView**以及如何将其放置在**ActionBar**中。我查看了 google 提供的 SearchView 示例，并将其作为起点添加到我的应用程序中（它列出了已安装的应用程序），但我不知道如何从这里开始。我想拥有与 AutoCompleteTextView 相同的功能，但改用 SearchView。有什么建议吗？下面提供了整个课程。

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.net.URLEncoder;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.SearchManager;
import android.app.SearchableInfo;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.OnSharedPreferenceChangeListener;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.Window;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.SearchView;
import android.widget.TextView;
import android.widget.Toast;

/**
 * 
 * @author 
 *
 */
public class PlacesListSearchActivity extends Activity implements SearchView.OnQueryTextListener{

    private static final String TAG = "PlacesListActivity";

    private ResultReceiver mReceiver;

    private OnSharedPreferenceChangeListener sharedPreferencesListener;
    private SharedPreferences sharedPreferences;

    /** Called when the activity is first created. */
    public ArrayAdapter<String> adapter;
    public AutoCompleteTextView textView;

    private SearchView mSearchView;
    private TextView mStatusView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
        setContentView(R.layout.places_search);
        mStatusView = (TextView) findViewById(R.id.status_text);

        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.item_list);
        textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
        adapter.setNotifyOnChange(true);
        textView.setHint("type store name");
        textView.setAdapter(adapter);
        textView.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (count%3 == 1) {
                adapter.clear();
                    GetPlaces task = new GetPlaces();
                    //now pass the argument in the textview to the task
                    task.execute(textView.getText().toString());
            }
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
        // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable s) {

        }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.searchview_in_menu, menu);
        MenuItem searchItem = menu.findItem(R.id.action_search);
        mSearchView = (SearchView) searchItem.getActionView();
        setupSearchView(searchItem);

        return true;
    }

    private void setupSearchView(MenuItem searchItem) {

        if (isAlwaysExpanded()) {
            mSearchView.setIconifiedByDefault(false);
        } else {
            searchItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_IF_ROOM
                    | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);
        }

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        if (searchManager != null) {
            List<SearchableInfo> searchables = searchManager.getSearchablesInGlobalSearch();

            // Try to use the "applications" global search provider
            SearchableInfo info = searchManager.getSearchableInfo(getComponentName());
            for (SearchableInfo inf : searchables) {
                if (inf.getSuggestAuthority() != null
                        && inf.getSuggestAuthority().startsWith("applications")) {
                    info = inf;
                }
            }
            mSearchView.setSearchableInfo(info);
        }

        mSearchView.setOnQueryTextListener(this);
    }

    public boolean onQueryTextChange(String newText) {
        mStatusView.setText("Query = " + newText);
        return false;
    }

    public boolean onQueryTextSubmit(String query) {
        mStatusView.setText("Query = " + query + " : submitted");
        return false;
    }

    public boolean onClose() {
        mStatusView.setText("Closed!");
        return false;
    }

    protected boolean isAlwaysExpanded() {
        return false;
    }

    class GetPlaces extends AsyncTask<String, Void, ArrayList<String>> {
        @Override
        // three dots is java for an array of strings
        protected ArrayList<String> doInBackground(String... args)
        {
            Log.d("PlacesListActivity", "doInBackground");
            ArrayList<String> predictionsArr = new ArrayList<String>();
            try
            {
                URL googlePlaces = new URL(
                        "https://maps.googleapis.com/maps/api/place/autocomplete/json?input=" +
                        URLEncoder.encode(args[0], "UTF-8") +
//                      "&types=geocode&language=en&sensor=true&key=" + SEARCHES FOR GEO CODES
                        "&types=establishment&language=en&sensor=true&key=" +
                        getResources().getString(R.string.googleAPIKey));

                Log.d("PlacesListActivity", googlePlaces.toString());

                URLConnection tc = googlePlaces.openConnection();
                BufferedReader in = new BufferedReader(new InputStreamReader(
                        tc.getInputStream()));

                String line;
                StringBuffer sb = new StringBuffer();
                //take Google's legible JSON and turn it into one big string.
                while ((line = in.readLine()) != null) {
                    sb.append(line);
                }
                //turn that string into a JSON object
                JSONObject predictions = new JSONObject(sb.toString()); 
                //now get the JSON array that's inside that object            
                JSONArray ja = new JSONArray(predictions.getString("predictions"));

                for (int i = 0; i < ja.length(); i++) {
                    JSONObject jo = (JSONObject) ja.get(i);
                    //add each entry to our array
                    predictionsArr.add(jo.getString("description"));
                }
            } catch (IOException e)
            {
            Log.e("PlacesListActivity", "GetPlaces : doInBackground", e);
            } catch (JSONException e)
            {
            Log.e("PlacesListActivity", "GetPlaces : doInBackground", e);
            }

            return predictionsArr;
        }

        @Override
        protected void onPostExecute(ArrayList<String> result){
            Log.d("PlacesListActivity", "onPostExecute : " + result.size());
            //update the adapter
            adapter = new ArrayAdapter<String>(getBaseContext(), R.layout.item_list);
            adapter.setNotifyOnChange(true);
            //attach the adapter to textview
            textView.setAdapter(adapter);

            for (String string : result) {
                Log.d("PlacesListActivity", "onPostExecute : result = " + string);
                adapter.add(string);
                adapter.notifyDataSetChanged();
            }

            Log.d("PlacesListActivity", "onPostExecute : autoCompleteAdapter" + adapter.getCount());
        }

    }

} 
```

**更新 saxman 建议的代码后，我可以看到提供程序中的查询方法从未被调用：**

我的清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.rathinavelu.rea"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity
            android:name=".MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".PlacesListActivity" >
        </activity>

        <activity android:name=".PlacesListSearchActivity" >
            <action android:name="android.intent.action.SEARCH" />
            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <activity android:name=".TestMapActivity" >
        </activity>

        <activity android:name=".SettingsPreferencesActivity" >
        </activity>

        <activity android:name="com.rathinavelu.util.ConnectionChecker" >
        </activity>

        <uses-library android:name="com.google.android.maps" />

        <service
            android:name=".places.PlacesRESTService"
            android:enabled="true"
            android:exported="false" >
            <intent-filter>
                <action android:name="android.intent.action.ACTION_SYNC" />
            </intent-filter>
        </service>

        <provider
            android:name=".places.PlacesSuggestionProvider"
            android:authorities="com.rathinavelu.rea.places.search_suggestion_provider"
            android:syncable="false" />

    </application>

</manifest> 
```

我在清单、内容提供者和清单文件中使用相同的权限。我在菜单中看到了 searchView 并且我没有修改查询方法，所以它应该只返回一行光标。但查询方法永远不会被调用。请帮忙。我刚刚发现的另一个问题是 searchView 没有显示指定的 search_hint！

**提供更多代码** * *PlacesListSearchActivity.java* *

```
public class PlacesListSearchActivity extends Activity {

        private static final String TAG = "PlacesListSearchActivity";

        private ResultReceiver mReceiver;

        private OnSharedPreferenceChangeListener sharedPreferencesListener;
        private SharedPreferences sharedPreferences;

    /** Called when the activity is first created. */
        public ArrayAdapter<String> adapter;
        public AutoCompleteTextView textView;

        private SearchView mSearchView;
        private TextView mStatusView;

        @Override
    public void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
                setContentView(R.layout.places_search);
                mStatusView = (TextView) findViewById(R.id.status_text);

                final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.item_list);
                textView = (AutoCompleteTextView)findViewById(R.id.autoCompleteTextView1);
                adapter.setNotifyOnChange(true);
                textView.setHint("type store name");
                textView.setAdapter(adapter);
                textView.addTextChangedListener(new TextWatcher() {

                public void onTextChanged(CharSequence s, int start, int before, int count) {
                        if (count%3 == 1) {
                                adapter.clear();
                                        GetPlaces task = new GetPlaces();
                                        //now pass the argument in the textview to the task
                                        task.execute(textView.getText().toString());
                        }
                }

                public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
                // TODO Auto-generated method stub

                }

                public void afterTextChanged(Editable s) {

                }

                });
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
//        super.onCreateOptionsMenu(menu);
        // Inflate the options menu from XML
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.places_list_search_options_menu, menu);

        SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
        SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
        // Tells your app's SearchView to use this activity's searchable configuration
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
        searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default

//        setupSearchView(searchItem);

        return true;
    } 
```

**地点搜索.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#dddddd">

<AutoCompleteTextView android:id="@+id/autoCompleteTextView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" >
        <requestFocus></requestFocus>
        </AutoCompleteTextView>

    <TextView
            android:id="@+id/status_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal"/>
</RelativeLayout> 
```

**places_list_search_options_menu.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/menu_search"
          android:title="@string/menu_search"
          android:icon="@android:drawable/ic_menu_search"
          android:showAsAction="collapseActionView|ifRoom"
          android:actionViewClass="android.widget.SearchView" />
</menu> 
```

**可搜索的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:searchSuggestAuthority="com.rathinavelu.rea.places.search_suggestion_provider">
</searchable> 
```

**PlacesSuggestionProvider.java**

```
public class PlacesSuggestionProvider extends ContentProvider {
    private static final String LOG_TAG = "PlacesSuggestionProvider";

    public static final String AUTHORITY = "com.rathinavelu.rea.places.search_suggestion_provider";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/search");

    // UriMatcher constant for search suggestions
    private static final int SEARCH_SUGGEST = 1;

    private static final UriMatcher uriMatcher;

    private static final String[] SEARCH_SUGGEST_COLUMNS = {
            BaseColumns._ID,
            SearchManager.SUGGEST_COLUMN_TEXT_1,
            SearchManager.SUGGEST_COLUMN_TEXT_2,
            SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID
    };

    static {
        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        uriMatcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SEARCH_SUGGEST);
        uriMatcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY + "/*", SEARCH_SUGGEST);
    }

    @Override
    public int delete(Uri uri, String arg1, String[] arg2) {
        throw new UnsupportedOperationException();
    }

    @Override
    public String getType(Uri uri) {
        switch (uriMatcher.match(uri)) {
            case SEARCH_SUGGEST:
                return SearchManager.SUGGEST_MIME_TYPE;
            default:
                throw new IllegalArgumentException("Unknown URL " + uri);
        }
    }

    @Override
    public Uri insert(Uri uri, ContentValues arg1) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean onCreate() {
        return true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
            String sortOrder) {
        Log.d(LOG_TAG, "query = " + uri);

        // Use the UriMatcher to see what kind of query we have
        switch (uriMatcher.match(uri)) {
            case SEARCH_SUGGEST:
                Log.d(LOG_TAG, "Search suggestions requested.");
                MatrixCursor cursor = new MatrixCursor(SEARCH_SUGGEST_COLUMNS, 1);
                cursor.addRow(new String[] {
                        "1", "Search Result", "Search Result Description", "content_id"
                });
                return cursor;
            default:
                throw new IllegalArgumentException("Unknown Uri: " + uri);
        }
    }

    @Override
    public int update(Uri uri, ContentValues arg1, String arg2, String[] arg3) {
        throw new UnsupportedOperationException();
    }
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-18T23:58:03.043

要在 SearchView 中获取 Places Autocomplete API 结果，您首先需要 API 的 ContentProvider。

```
import android.app.SearchManager;
import android.content.ContentProvider;
import android.content.ContentValues;
import android.content.UriMatcher;
import android.database.Cursor;
import android.database.MatrixCursor;
import android.net.Uri;
import android.provider.BaseColumns;
import android.util.Log;

public class PlacesSuggestionProvider extends ContentProvider {
    private static final String LOG_TAG = "ExampleApp";

    public static final String AUTHORITY = "com.example.google.places.search_suggestion_provider";
    public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY + "/search");

    // UriMatcher constant for search suggestions
    private static final int SEARCH_SUGGEST = 1;

    private static final UriMatcher uriMatcher;

    private static final String[] SEARCH_SUGGEST_COLUMNS = {
            BaseColumns._ID,
            SearchManager.SUGGEST_COLUMN_TEXT_1,
            SearchManager.SUGGEST_COLUMN_TEXT_2,
            SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID
    };

    static {
        uriMatcher = new UriMatcher(UriMatcher.NO_MATCH);
        uriMatcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY, SEARCH_SUGGEST);
        uriMatcher.addURI(AUTHORITY, SearchManager.SUGGEST_URI_PATH_QUERY + "/*", SEARCH_SUGGEST);
    }

    @Override
    public int delete(Uri uri, String arg1, String[] arg2) {
        throw new UnsupportedOperationException();
    }

    @Override
    public String getType(Uri uri) {
        switch (uriMatcher.match(uri)) {
            case SEARCH_SUGGEST:
                return SearchManager.SUGGEST_MIME_TYPE;
            default:
                throw new IllegalArgumentException("Unknown URL " + uri);
        }
    }

    @Override
    public Uri insert(Uri uri, ContentValues arg1) {
        throw new UnsupportedOperationException();
    }

    @Override
    public boolean onCreate() {
        return true;
    }

    @Override
    public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs,
            String sortOrder) {
        Log.d(LOG_TAG, "query = " + uri);

        // Use the UriMatcher to see what kind of query we have
        switch (uriMatcher.match(uri)) {
            case SEARCH_SUGGEST:
                Log.d(LOG_TAG, "Search suggestions requested.");
                MatrixCursor cursor = new MatrixCursor(SEARCH_SUGGEST_COLUMNS, 1);
                cursor.addRow(new String[] {
                        "1", "Search Result", "Search Result Description", "content_id"
                });
                return cursor;
            default:
                throw new IllegalArgumentException("Unknown Uri: " + uri);
        }
    }

    @Override
    public int update(Uri uri, ContentValues arg1, String arg2, String[] arg3) {
        throw new UnsupportedOperationException();
    }
} 
```

然后将您的 Places Autocomplete API 客户端代码添加到内容提供程序的*查询方法中。*您提取用户输入如下：

```
String query = uri.getLastPathSegment().toLowerCase(); 
```

将 PlacesSuggestionProvider 添加到您的 AndroidManifest，并确保您的活动具有可搜索的配置。

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity android:name=".PlacesSearchViewActivity" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <provider
            android:name="com.example.google.places.PlacesSuggestionProvider"
            android:authorities="com.example.google.places.search_suggestion_provider"
            android:syncable="false" />
    </application>

</manifest> 
```

并确保您的可搜索配置 (res/xml/searchable.xml) 具有搜索建议权限。

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint"
    android:searchSuggestAuthority="com.example.google.places.search_suggestion_provider">
</searchable> 
```

AndroidManifest.xml、searchable.xml 和您的内容提供者中的权限应该相同。

为包含 SearchView (/res/menu/options_menu.xml) 的 ActionBar 创建一个选项菜单。

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/menu_search"
          android:title="@string/menu_search"
          android:icon="@drawable/ic_menu_search"
          android:showAsAction="collapseActionView|ifRoom"
          android:actionViewClass="android.widget.SearchView" />
</menu> 
```

使用与您的可搜索配置关联的 SearchView 配置您的活动/

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the options menu from XML
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    // Tells your app's SearchView to use this activity's searchable configuration
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default

    return true;
} 
```

一些关键文档是：

添加自定义建议：http: [//developer.android.com/guide/topics/search/adding-custom-suggestions.html](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)

创建内容提供者：http: [//developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

使用搜索小部件：http: [//developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget](http://developer.android.com/guide/topics/search/search-dialog.html#UsingSearchWidget)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-11T05:36:56.473

AutoCompleteTextView with google search Api

[![enter image description here](../Images/b85f5e12976febd842b4565f1b82d67e.png)](https://i.stack.imgur.com/VD4HM.jpg)

your xml

```
 <AutoCompleteTextView
    android:id="@+id/main_omnibox_input"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:background="@null" 
    android:hint="Search"  
    android:focusable="true"
    android:focusableInTouchMode="true"                                  
    android:selectAllOnFocus="true"
    android:singleLine="true" 
    android:textSize="@dimen/_14sdp" /> 
```

your java code

```
 this.inputBox = (AutoCompleteTextView) findViewById(R.id.main_omnibox_input);
  inputBox.setAdapter(new SearchAutocompleteAdapter(SearchActivity.this, new SearchAutocompleteAdapter.OnSearchCommitListener() {
        @Override
        public void onSearchCommit(String text) {
            inputBox.setText(text);
            inputBox.setSelection(text.length());
        }
    }));

    this.inputBox.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> adapterView, View view, int i, long j) {
            String charSequence = ((TextView) view.findViewById(android.R.id.text1)).getText().toString();
            inputBox.setText(Html.fromHtml(BrowserUnit.urlWrapper(charSequence)), BufferType.SPANNABLE);
            inputBox.setSelection(charSequence.length());
           // your code
           // updateAlbum(charSequence);
           // hideSoftInput(SearchActivity.this.inputBox);
        }
    }); 
```

SearchAutocompleteAdapter

```
public class SearchAutocompleteAdapter extends BaseAdapter implements Filterable {

interface OnSearchCommitListener {
    void onSearchCommit(String text);
}

private final Context mContext;
private final OnSearchCommitListener commitListener;
private List<String> completions = new ArrayList<>();
static final String searchCompleteUrl = "https://www.google.com/complete/search?client=firefox&q=%s";

SearchAutocompleteAdapter(Context context, OnSearchCommitListener commitListener) {
    mContext = context;
    this.commitListener = commitListener;
}

@Override
public int getCount() {
    return completions.size();
}

@Override
public Object getItem(int position) {
    return completions.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@SuppressLint("ClickableViewAccessibility")
@Override
@SuppressWarnings("ConstantConditions")
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(android.R.layout.simple_dropdown_item_1line, parent, false);
    }
    TextView textview = convertView.findViewById(android.R.id.text1);
    textview.setText(completions.get(position));
    Drawable d = ContextCompat.getDrawable(mContext, R.drawable.icon_goarrowsmall);
    final int size = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 32, mContext.getResources().getDisplayMetrics());
    d.setBounds(0, 0, size, size);
    textview.setCompoundDrawables(null, null, d, null);

    textview.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            if (event.getAction() != MotionEvent.ACTION_DOWN) {
                return false;
            }
            TextView t = (TextView) view;
            if (event.getX() > t.getWidth() - t.getCompoundPaddingRight()) {
                commitListener.onSearchCommit(getItem(position).toString());
                return true;
            }
            return false;
        }
    });
    parent.setOnTouchListener(new View.OnTouchListener() {
        @Override
        public boolean onTouch(View view, MotionEvent event) {
            if (event.getX() > view.getWidth() - size * 2) {
                return true;
            }
            return false;
        }
    });
    return convertView;
}

@Override
public Filter getFilter() {
    return new Filter() {
        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            // Invoked on a worker thread
            FilterResults filterResults = new FilterResults();
            if (constraint != null) {
                List<String> results = getCompletions(constraint.toString());
                filterResults.values = results;
                filterResults.count = results.size();
            }
            return filterResults;
        }

        @Override
        @SuppressWarnings("unchecked")
        protected void publishResults(CharSequence constraint, FilterResults results) {
            if (results != null && results.count > 0) {
                completions = (List<String>) results.values;
                notifyDataSetChanged();
            } else {
                notifyDataSetInvalidated();
            }
        }
    };
}

private List<String> getCompletions(String text) {
    int total = 0;
    byte[] data = new byte[16384];
    try {
        URL url = new URL(URLUtil.composeSearchUrl(text, searchCompleteUrl, "%s"));
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        try {
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            while (total <= data.length) {
                int count = in.read(data, total, data.length - total);
                if (count == -1) {
                    break;
                }
                total += count;
            }
            if (total == data.length) {
                // overflow
                return new ArrayList<>();
            }
        } finally {
            urlConnection.disconnect();
        }
    } catch (IOException e) {
        return new ArrayList<>();
    }

    JSONArray jsonArray;
    try {
        jsonArray = new JSONArray(new String(data, StandardCharsets.UTF_8));
    } catch (JSONException e) {
        return new ArrayList<>();
    }
    jsonArray = jsonArray.optJSONArray(1);
    if (jsonArray == null) {
        return new ArrayList<>();
    }
    final int MAX_RESULTS = 10;
    List<String> result = new ArrayList<>(Math.min(jsonArray.length(), MAX_RESULTS));
    for (int i = 0; i < jsonArray.length() && result.size() < MAX_RESULTS; i++) {
        String s = jsonArray.optString(i);
        if (s != null && !s.isEmpty()) {
            result.add(s);
        }
    }
    return result;
} 
```

}

# wpf - ReleaseHandleFailed 与 SQLite + 实体框架

> ID：11491518
> 
> 赞同：0
> 
> 时间：2012-07-15T11:33:05.683
> 
> 标签：wpf, entity-framework, sqlite

在执行以下代码以通过自动生成的 ADO.Net 实体数据模型从 SQLite 数据库获取值后，我在 VS2010 中收到一条错误消息。

```
using (Data.DbEntities ent = new Data.DbEntities())
{
  var r = from tt in ent.Template_DB select tt;
  r.First();//Required to cause error
} 
```

正在访问的 SQLite 数据库表称为“模板”（该模型已重命名为 Template_DB），其中有几列包含字符串、长整数和位。我尝试过的所有查询都返回了预期的结果。

我收到的消息是：

> 检测到 ReleaseHandleFailed
> 
> “Microsoft.Win32.SafeHandles.SafeCapiHashHandle”类型的 SafeHandle 或 CriticalHandle 未能正确释放值为 0x0D0DDCF0 的句柄。这通常表明句柄通过其他方式被错误地释放（例如使用 DangerousGetHandle 提取句柄并直接关闭它或围绕它构建另一个 SafeHandle。）

此消息可能出现 60% 的时间，在代码完成后最多 8 秒。据我所知，数据库没有加密，也没有密码。直到最近，我一直在将类似的 MS-SQL 数据库与实体框架模型一起使用，并且从未见过这样的错误。

帮助！

编辑：我从[这里](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)下载/安装了“sqlite-netFx40-setup-bundle-x86-2010-1.0.81.0.exe”来安装 SQLite 。这包括 System.Data.SQLite 1.0.81.0 (3.7.12.1) 包（*不是*下面评论中所述的 3.7.13）

# r - 如何从差异向量轻松创建相异矩阵？

> ID：11491528
> 
> 赞同：0
> 
> 时间：2012-07-15T11:33:57.710
> 
> 标签：r

在我的研究中，每个受试者都被问到 n*(n-1)/2 个问题，关于他对 n=5 个对象之间的差异的主观看法（以后用于 3 向多维缩放）。

我想从 10 项向量 v 创建一个相异矩阵，例如按以下方式排列（对于 n = 5）：

```
 1
  2 5
  3 6 8
  4 7 9 10 
```

这是一个代码示例代码，用于为这个特定的 n 实现它：

```
dissim<-rep(0,n*n)
dim(dissim)<-c(5,5)
dissim[2,1]<-v[1]
dissim[3,1]<-v[2]
dissim[4,1]<-v[3]
dissim[5,1]<-v[4]
dissim[3,2]<-v[5]
dissim[4,2]<-v[6]
dissim[5,2]<-v[7]
dissim[4,3]<-v[8]
dissim[5,3]<-v[9]
dissim[5,4]<-v[10] 
```

是否有任何实用函数可以帮助对任何 n 执行此操作？我知道我可以使用两个嵌套循环来做到这一点，但如果我使用专用函数，代码会更清晰。

也许我会在这个过程中了解另一个有用的库的存在？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:43:07.860

```
n <- 5
mat <- matrix(0, ncol = n, nrow = n)
mat[lower.tri(mat)] <- 1:10
mat
     [,1] [,2] [,3] [,4] [,5]
[1,]    0    0    0    0    0
[2,]    1    0    0    0    0
[3,]    2    5    0    0    0
[4,]    3    6    8    0    0
[5,]    4    7    9   10    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:45:14.167

呃......偶然我自己找到了解决方案。碰巧， dist 对象的内部结构就是*向量 v*。所以有效的是：

```
dissim<-v
class(dissim)='dist'
attr(dissim,"Size")<-5
dissim<-as.dist(dissim) 
```

它现在有效，但我不确定这是否是一种记录方式并且将始终有效。

# python - 当我这样做时没有任何反应：python manage.py 命令

> ID：11491529
> 
> 赞同：5
> 
> 时间：2012-07-15T11:34:32.807
> 
> 标签：python, django, django-admin

我是 django 新手，目前正在阅读主要教程。即使它早些时候工作，当我执行 python manage.py runserver 或 python manage.py -h 或与任何其他命令时，shell 不会输出任何内容。想知道我做错了什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-12-01T11:06:47.697

问题是第一行`manage.py`打破了windows上的文件。第一行应如下所示：

```
#!/usr/bin/env python 
```

删除它将解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T11:41:49.243

首先，通过在 shell 中键入“python”来检查 python 是否已完全安装。

然后你应该`python manage.py runserver`在你的 django 项目中尝试。如果您没有任何 django 项目，请尝试通过键入`django-admin.py startproject mysite`. 如果您的 shell 中没有显示任何内容，那么您一定是安装了错误的 Django。

请参阅[https://docs.djangoproject.com/en/1.4/intro/install/上的 Django 文档](https://docs.djangoproject.com/en/1.4/intro/install/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-08T00:54:23.873

请试试这个。

1.  卸载 Python。
2.  进入 C 盘并搜索 Django。您将获得许多与 Django 相关的文件。
3.  删除每个 Django 文件。不要删除你的 Django 文件。
4.  安装 Python。

它对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-16T11:02:56.407

如果您的服务器一直运行到某个时间点并且某个操作/更改破坏了它，请尝试返回之前的状态。

在我的例子中，有一个电子邮件触发器，如果​​电子邮件没有通过，它会使系统处于无效状态。然后`git stash`有选择地弹出存储并尝试`runserver`有助于将问题缩小到项目中的特定文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-28T13:11:06.440

如果您创建了一个虚拟环境，请激活它。如果您使用的是 Windows 操作系统，则可以尝试此命令（在虚拟环境目录中）：

```
.\Scripts\activate 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-10T02:46:18.073

`manage.py`在 Ubuntu 上通过作为脚本运行为我工作：

```
./manage.py runserver 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-10T09:19:27.370

只是遇到了同样的问题。找到了一个可行但乏味的解决方案。

您需要知道 python.exe 文件在您的计算机中的位置。通常是 C:/Users/USERNAME/AppData/Local/Programs/Python//python.exe

根据需要修改并在CMD中运行以下命令，

```
C:/Users/USER1/AppData/Local/Programs/Python/Python38-32/python.exe
F:/mysite/manage.py runserver 
```

希望这有效:)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-29T06:30:40.910

如果您在 Windows 上使用 Redis Server，请检查 Redis Server 是否正在运行，我遇到了同样的问题并意识到我的 Redis Server 没有运行，我运行了它，现在我的 manage.py 命令工作正常。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-12T20:08:33.163

我也发生了同样的情况，但是这个问题是一个小问题，因为如果您的系统上有多个 Python 版本，您可以通过运行 python3 或您想要的任何版本来选择特定的 Python 版本。所以你应该从头开始，然后先卸载 Django，创建一个虚拟环境，决定你要放置它的目录，然后将 venv 模块作为具有目录路径的脚本运行：

例如：python3 -m venv tutorial-env

//如果tutorial-env目录不存在，这将创建它，并在其中创建目录一旦你创建了一个虚拟环境，你可以激活它。

在 Windows 上，运行：

tutorial-env\Scripts\activate.bat 在 Unix 或 MacOS 上，运行：

源教程-env/bin/activate

现在，在命令提示符下，确保您的虚拟环境处于活动状态，然后执行以下命令：

...> py -m pip 安装 Django

注意：如果 django-admin 无论给出什么参数都只显示帮助文本，那么 Windows 中的文件关联可能存在问题。检查是否在 PATH 中设置了多个用于运行 Python 脚本的环境变量。这通常发生在安装了多个 Python 版本时。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-08T19:46:54.340

如果可以的话，另一个解决方案是升级 Django

```
pip install django --upgrade 
```

通常，人们会遇到与升级相关的其他不相关问题需要解决，但一旦所有问题都修复完毕，服务器应该可以正常运行。

如果您无法升级 Django，当代码是使用 Python 2.x 构建并且您在本地使用 Python 3.x 时也会发生此问题。

在这种情况下，更快的解决方法是从您的机器上卸载 Python 3.x 并确保将 Python 2.x 添加到路径中。我见过一些开发人员在 PowerShell 中设置别名，以便在环境中拥有多个版本。

# c# - 更改 DataGrid 的列宽

> ID：11491531
> 
> 赞同：1
> 
> 时间：2012-07-15T11:34:49.543
> 
> 标签：c#, wpf, datagrid, datatable

我想更改 DataGrid 的列宽，但一直收到错误消息。

这就是我填写 DataGrid 的方式：

```
tabel.ItemsSource = Item.getItemByCategory(category).DefaultView; 
```

`getItemByCategory``Item`是返回 a 的类的静态方法`DataTable`。

这就是我尝试调整列大小的方式：

```
tabel.Columns[1].Width = 100; 
```

这是我收到的错误：

> 指数超出范围。必须是非负数且小于集合的大小。参数名称：索引

出于某种原因，`tabel.Columns.Count == 0`. 尽管在显示后立即显示了 4 列。

我可以在调整列大小方面获得一些帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:54:33.483

尝试这样的事情：

XAML 文件：

```
<Window x:Class="DataGridView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid Name="table" Loaded="table_Loaded" />
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Data;

namespace DataGridView
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            table.ItemsSource = getItemByCategory().DefaultView;
        }

        public static DataTable getItemByCategory(int category = 0)
        {
            //ServiceReference.ServiceSoapClient instance = Database.getClient();
            DataTable tabel = new DataTable();
            DataRow linie;
            tabel.Columns.Add(new DataColumn("id", typeof(int)));
            tabel.Columns.Add(new DataColumn("name", typeof(string)));

            //tabel.Columns.Add(new DataColumn("price", typeof(int)));
            //tabel.Columns.Add(new DataColumn("inCart", typeof(bool)));
            //ServiceReference.ArrayOfString[] values = instance.getItemsByCategory(category);

            List<Foo> values = new List<Foo>();
            for (int i = 0; i < 10; i++)
            {
                values.Add(new Foo { ID = i, Name = "name " + i });
            }

            foreach (var v in values)
            {
                linie = tabel.NewRow();
                linie["id"] = v.ID;
                linie["name"] = v.Name;
                //linie["price"] = Convert.ToInt32(v[3]);
                //linie["inCart"] = false;
                tabel.Rows.Add(linie);
            }
            return tabel;
        }

        private void table_Loaded(object sender, RoutedEventArgs e)
        {
            table.Columns[0].Width = 100;
            table.Columns[1].Width = 200;
        }
    }

    public class Foo
    {
        public int ID { get; set; }
        public string Name { get; set; }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T11:50:23.837

如果列是自动生成的，您应该推迟访问直到[`AutoGeneratedColumns`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.autogeneratedcolumns)触发。

# php - Lithium 和 MongoDB：按日期范围查找文档

> ID：11491532
> 
> 赞同：0
> 
> 时间：2012-07-15T11:34:50.653
> 
> 标签：php, mongodb, timestamp, conditional-statements, lithium

我有很多文档，其中包含一个名为“date”的字段，它只是一个 unix 时间戳。whithin锂，我想找到给定日期范围内的所有文件。我目前正在尝试以下操作：

```
//$_stats contains two \DateTime objects which are properly initialized

$transactions = Transactions::all(
  array('conditions' => array(
                'tags' => array('$all' => array((string)$tag->_id)),
                'date' => array('$gte' => array((int)$_stats['date_start']->getTimestamp()), '$lte' => array((int)$_stats['date_end']->getTimestamp()))
  ))
); 
```

但这会返回零个文档。当我删除“日期”条件时，它工作正常并且我得到所有文件。

我错过了什么？

谢谢，艾诺健

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:19:53.087

似乎不需要给出日期数组，所以也许试试：

```
$transactions = Transactions::all(
  array('conditions' => array(
            'tags' => array('$all' => array((string)$tag->_id)),
            'date' => array('$gte' => (int)$_stats['date_start']->getTimestamp(), '$lte' => (int)$_stats['date_end']->getTimestamp())
  ))
); 
```

请记住，MongoDate 将日期存储为毫秒，而时间戳使用秒。换句话说，MongoDate 具有更高的精度。

# java - 两个线程进入runnable的同步方法

> ID：11491533
> 
> 赞同：1
> 
> 时间：2012-07-15T11:34:56.223
> 
> 标签：java, multithreading, concurrency, synchronization

这是我遇到问题的代码-

```
public class WaitTest {
    public static void main(String[] args) {
        Runner rr = new Runner();
        Thread t1 = new Thread(rr,"T1");
        Thread t2 = new Thread(rr,"T2");
        t1.start();
        t2.start();
    }
}

class Runner implements Runnable{
    int i=0;
    public void run(){
        try{
            if(Thread.currentThread().getName().equals("T1")){
                bMethod();
                aMethod();
            }
            else{
                aMethod();
                bMethod();
            }
        }catch(Exception e){}
    }

    public synchronized void aMethod() throws Exception{
        System.out.println("i="+i+",Now going to Wait in aMethod "+Thread.currentThread().getName());
        Thread.currentThread().wait();
        System.out.println("Exiting aMethod "+Thread.currentThread().getName());
    }

    public synchronized void bMethod() throws Exception{
        System.out.println("i="+i+",Now going to Wait bMethod "+Thread.currentThread().getName());
        i=5;
        notifyAll();
        System.out.println("Exiting bMethod "+Thread.currentThread().getName());
    }
} 
```

输出是：

```
i=0,Now going to Wait bMethod T1
Exiting bMethod T1
i=5,Now going to Wait in aMethod T1
i=5,Now going to Wait in aMethod T2 
```

我的问题是：

> 为什么T2在`aMethod`里面`T1`等待时进入？以及为什么要`T2`打印 `i=5``aMethod.`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T11:40:02.670

当你执行时`wait`，你的线程释放锁并进入等待状态。此时允许其他线程进入该方法。您正在使用单个实例，`Runnable`因此当一个线程将其设置为 5 时，这就是另一个线程读取的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T11:43:33.190

**1.** `wait`会**立即释放锁**，并将锁交给其他线程。

**2.** 只有在到达同步块**的右括号时**`notify`才会释放锁。

 ****3.**由于这里**只有一个Runnable实例**，它在i = 5之后，当同步块结束时......然后释放锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T08:02:01.213

这段代码没有做`wait-notify`模式。该`Thread.currentThread().wait()`调用会抛出一个`IllegalMonitorStateException`，该`run`方法会捕获并忽略它。两者都`T1`抛出`T2`此异常，因此您看不到`Exiting aMethod`打印的行。

`notify`调用`bMethod`被浪费了，因为没有`wait`线程在`rr Runnable`.**

# vba - 用于列出宏的组合框

> ID：11491539
> 
> 赞同：0
> 
> 时间：2012-07-15T11:36:06.943
> 
> 标签：vba, outlook

我希望当您点击“发送”时，您会看到一个表格。这是我在 Outlook 2010 中开发的。

有没有办法用宏列表填充组合框？

```
Public Sub Confidential()
    Application.ActiveInspector.CurrentItem.Sensitivity = olConfidential
    Application.ActiveInspector.CurrentItem.Save
    Set MsgSub = Outlook.Application.ActiveInspector.CurrentItem
    Set objMail = Outlook.Application.ActiveInspector.CurrentItem
    Subject = MsgSub.Subject
    MsgSub.Subject = Subject + " - [CONFIDENTIAL]"
    Email = objMail.HTMLBody
    info = " <html> <body> <FONT color=#666666> <font-size: 11px> <p></p> AUTO TEXT: This message has been marked as 'CONFIDENTIAL' please treat it as such </body> </font> </html>"
    objMail.HTMLBody = Email + info
End Sub

Private Sub Sens_DropButtonClick()
    Sens.AddItem "Confidential()"
    Sens.AddItem "Normal()"
End Sub

Public Sub Send_Click()
    Set objMail = Outlook.Application.ActiveInspector.CurrentItem
    objMail.Send
End Sub 
```

我认为这是一个公共潜艇是对的吗？

我的目标是，当您点击“发送”按钮时，会出现一个带有下拉框的表单，其中有 4 个选项是您可以对电子邮件使用的敏感度选项，除了我已将它们创建为宏并在其上添加代码（到添加到消息的主题和页脚）但我不会这样做，因此用户被迫进行选择，因此我创建此表单而不是使用 4 个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T14:30:18.240

> 我的目标是，当您点击“发送”按钮时，会出现一个带有下拉框的表单，其中有 4 个选项是您可以在电子邮件中使用的敏感度选项，除了我已将它们创建为宏并在它们上添加代码（到添加到消息的主题和页脚）但我不会这样做，因此用户被迫进行选择，因此我创建此表单而不是使用 4 个按钮。– Rsmithy 36 分钟前

如果我理解正确，是的，可以做你想做的事。请参阅此示例

假设您有一个带有 4 个选项 A、B、C 和 D 的用户表单，用户表单代码是

```
Private Sub UserForm_Initialize()
    ComboBox1.AddItem "A"
    ComboBox1.AddItem "B"
    ComboBox1.AddItem "C"
    ComboBox1.AddItem "D"
End Sub

Private Sub CommandButton1_Click()
    lstNo = ComboBox1.ListIndex
    Unload Me
End Sub 
```

下一步将其粘贴到模块中

```
Public lstNo As Long 
```

而这在`ThisOutlookSession`

```
Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
    UserForm1.Show

    MsgBox "user chose " & lstNo & "from combo"

    Select Case lstNo
    Case -1
        'User didn't select anything in the combo
    Case 0
        'User selected option 1 in the combo
    Case 1
        'User selected option 2 in the combo
    Case 2
        'User selected option 3 in the combo
    Case 3
        'User selected option 4 in the combo
    End Select
End Sub 
```

将 Statement`中的上述注释替换为`Select`您希望根据用户选择执行的宏名称。

**快照在行动**

![在此处输入图像描述](../Images/26a6196dd878f0615a6900a588fd53ed.png)

这就是您选择`Option D (ListIndex 3)`

![在此处输入图像描述](../Images/263fe9ba0154cf54ec9d2bc9b9299449.png)

**跟进**

```
Dim email As String, info As String

Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
    UserForm1.Show

    Select Case lstNo
        Case -1
            'User didn't select anything, default will be used
        Case 0
            With Item
                .Sensitivity = olNormal
                .Save
            End With
        Case 1
            With Item
                .Sensitivity = olPersonal
                .Save
            End With
        Case 2
            With Item
                .Sensitivity = olPrivate
                .Save
            End With
        Case 3
            With Item
                .Sensitivity = olConfidential
                .Subject = .Subject & " - [CONFIDENTIAL]"
                Email = .HTMLBody
                info = " <html> <body> <FONT color=#666666> <font-size: 11px> <p></p> AUTO TEXT: " & _
                "This message has been marked as 'CONFIDENTIAL' please treat it as such </body> </font> </html>"
                .HTMLBody = Email & info
                .Save
            End With
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:03:53.760

> Is there a way to populate a combo-box with a list of Macros?

Not in Outlook, I'm afraid. Programmatic access to the VBA IDE isn't supported in Outlook due to the possibility of spreading viruses or conducting malicious activity via email.

See [VBA Extensibility in Outlook](https://stackoverflow.com/q/11355245/190829) for reference.

The closest you can come is by programmatically displaying the "Run Macro" dialog, like this:

`ActiveExplorer.CommandBars.FindControl(,186).Execute`

However I'm not sure if this is available in Outlook 2010.

But showing a dialog box can't possibly be your goal. Maybe if you explain what your goal is, someone can suggest a better way of reaching it that doesn't require populating a combo box with a list of macro names.

# sql - 删除没有主键的重复项

> ID：11491540
> 
> 赞同：5
> 
> 时间：2012-07-15T11:36:39.757
> 
> 标签：sql, sql-server, tsql, sql-server-ce

这里要删除具有重复列值 ( `Product`) 的行，然后将其用**作主键**。

该列是类型`nvarchar`，我们不希望一个产品有 2 行。该数据库很大，我们需要删除大约**数千行。**

在查询所有重复项期间，我们希望保留第一项并删除第二项作为重复项。

目前还没有主键，我们希望在删除重复项之后创建它。那么该`Product`列可能是我们的主键。

数据库是 SQL Server CE。

我尝试了几种方法，并且大多得到类似于以下的错误：

> 解析查询时出错。[令牌行号= 2，令牌行偏移量= 1，错误令牌= FROM]

我尝试过的一种方法：

```
DELETE FROM TblProducts
FROM TblProducts w
    INNER JOIN (
            SELECT Product
            FROM TblProducts
            GROUP BY Product
            HAVING COUNT(*) > 1
            )Dup ON w.Product = Dup.Product 
```

**尝试用类似的东西学习和调整我的代码的首选方法**（它还不正确）：

```
SELECT Product, COUNT(*) TotalCount
FROM TblProducts
GROUP BY Product
HAVING COUNT(*) > 1
ORDER BY COUNT(*) DESC

--
;WITH cte   -- These 3 lines are the lines I have more doubt on them
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY Product
                                       ORDER BY ( SELECT 0)) RN
         FROM   Word)
DELETE FROM cte
WHERE  RN > 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T11:59:01.897

如果您有两个具有相同产品列的不同记录，那么您可以使用某些标准选择不需要的记录，例如

```
 CREATE TABLE victims AS
     SELECT MAX(entryDate) AS date, Product, COUNT(*) AS dups FROM ProductsTable WHERE ...
     GROUP BY Product HAVING dups > 1; 
```

然后您可以在 ProductTable 和 Victims 之间执行 DELETE JOIN。

或者您也可以仅选择 Product，然后对其他一些 JOIN 条件执行 DELETE，例如具有无效的 CustomerId、EntryDate NULL 或其他任何内容。如果您*知道*产品只有一个有效副本，并且所有其他副本都可以通过无效数据识别，则此方法有效。

假设您有 IDENTICAL 记录（或者您有相同和不同的记录，或者您可能对某些产品有多个重复项，而您不知道是哪个）。您运行完全相同的查询。然后，您在 ProductsTable 上运行 SELECT 查询并 SELECT DISTINCT 所有与要删除的产品代码匹配的产品，按产品分组，并为所有字段选择合适的聚合函数（如果相同，任何聚合都应该这样做。否则我通常尝试使用 MAX或最小值）。这将为每个产品“保存”一行。

此时您运行 DELETE JOIN 并杀死所有重复的产品。然后，只需将保存和重复数据删除的子集重新导入主表。

当然，在 DELETE JOIN 和 INSERT SELECT 之间，您的数据库将处于不稳定状态，所有具有至少一个重复项的产品都会消失。

另一种应该在 MySQL 中工作的方法：

```
-- Create an empty table
CREATE TABLE deduped AS SELECT * FROM ProductsTable WHERE false;

CREATE UNIQUE INDEX deduped_ndx ON deduped(Product);

-- DROP duplicate rows, Joe the Butcher's way
INSERT IGNORE INTO deduped SELECT * FROM ProductsTable;

ALTER TABLE ProductsTable RENAME TO ProductsBackup;

ALTER TABLE deduped RENAME TO ProductsTable;
-- TODO: Copy all indexes from ProductsTable on deduped. 
```

**注意**：如果您想区分“好记录”和“无效重复”，上述方法**不起作用。**仅当您有多余的**DUPLICATE**记录，或者您不在乎保留*哪一*行以及丢弃哪一行时，它才有效！

**编辑**：你说“重复”有无效的字段。在这种情况下，您可以使用排序技巧修改上述内容：

```
 SELECT * FROM ProductsTable ORDER BY Product, FieldWhichShouldNotBeNULL IS NULL; 
```

然后，如果您只有一排产品，一切都很好，它将被选中。如果您有更多，将首先选择并插入 (FieldWhichShouldNeverBeNull IS NULL) 为 FALSE 的那个（即 FieldWhichShouldNeverBeNull 实际上不为 null 的那个）。由于 IGNORE 条款，所有其他人都将无声地反弹，反对产品的唯一性。不是一个非常漂亮的方法（并检查我没有在我的子句中混合 true 和 false ！），但它应该工作。

**编辑**
*实际上更多的是一个新的答案*

这是一个简单的表格来说明问题

```
CREATE TABLE ProductTable ( Product varchar(10), Description varchar(10) );
INSERT INTO ProductTable VALUES ( 'CBPD10', 'C-Beam Prj' );
INSERT INTO ProductTable VALUES ( 'CBPD11', 'C Proj Mk2' );
INSERT INTO ProductTable VALUES ( 'CBPD12', 'C Proj Mk3' ); 
```

还没有索引，也没有主键。我们仍然可以将 Product 声明为主键。

但是坏事发生了。两条新记录进入，并且都有 NULL 描述。

然而，第二个是一个有效的产品，因为我们之前对 CBPD14 一无所知，因此我们不想完全失去这个记录。不过，我们*确实*希望摆脱虚假的 CBPD10。

```
INSERT INTO ProductTable VALUES ( 'CBPD10', NULL );
INSERT INTO ProductTable VALUES ( 'CBPD14', NULL ); 
```

粗鲁的 DELETE FROM ProductTable WHERE Description IS NULL 是不可能的，它会杀死不是重复的 CBPD14。

所以我们这样做。首先获取重复列表：

```
SELECT Product, COUNT(*) AS Dups FROM ProductTable GROUP BY Product HAVING Dups > 1; 
```

我们假设：“每组不良记录至少有一个良好记录”。

我们通过提出相反的假设并查询它来检查这个假设。如果一切都是 copacci，我们希望此查询不返回任何内容。

```
SELECT Dups.Product FROM ProductTable
RIGHT JOIN ( SELECT Product, COUNT(*) AS Dups FROM ProductTable GROUP BY Product HAVING Dups > 1 ) AS Dups
ON (ProductTable.Product = Dups.Product
        AND ProductTable.Description IS NOT NULL)
WHERE ProductTable.Description IS NULL; 
```

为了进一步验证，我插入了两条代表这种故障模式的记录；现在我确实希望上面的查询返回新代码。

```
INSERT INTO ProductTable VALUES ( "AC5", NULL ), ( "AC5", NULL ); 
```

现在“检查”查询确实返回了，

```
AC5 
```

所以，Dups一代看起来不错。

我现在继续删除所有无效的重复**记录**。如果有重复的有效记录，它们将保持重复，除非可以找到某些条件，在它们之间区分一个“好”记录并声明所有其他记录“无效”（可能使用与描述不同的字段重复该过程）。

但是，是的，有一个摩擦。*目前，您不能从表中删除并在子查询中从同一个表中选择*( [http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html) )。所以需要一些解决方法：

```
CREATE TEMPORARY TABLE Dups AS
     SELECT Product, COUNT(*) AS Duplicates
         FROM ProductTable GROUP BY Product HAVING Duplicates > 1;

DELETE ProductTable FROM ProductTable JOIN Dups USING (Product)
    WHERE Description IS NULL; 
```

现在这将删除所有无效记录，前提是它们出现在 Dups 表中。

因此我们的 CBPD14 记录将保持不变，因为它不会出现在那里。CBPD10 的“好”记录将保持不变，因为它的 Description 为 NULL 是不正确的。所有其他人 - 噗。

让我再次声明，如果一个记录**没有**有效记录*但* **它是**重复的，那么该记录的**所有副本**都将被杀死——*将没有幸存者*。

为了避免这种情况，可以先选择（使用上面的查询，检查“应该什么都不返回”）代表这种失败模式的行到另一个临时表中，然后在删除后将它们插入回主表中（使用事务可能是为了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T17:00:29.137

通过编写旧表的脚本并重命名它来创建一个新表。还将所有对象（索引等）从旧表写入新表。将守门员插入新表中。如果您的数据库处于批量记录或简单恢复模式，则此操作将被最低限度地记录。删除旧表，然后将新表重命名为旧名称。

与删除相比，这样做的优点是可以最少地记录插入。删除会做双重工作，因为不仅数据会被删除，而且删除必须写入事务日志。对于大表，最少记录的插入将比删除快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T17:01:46.773

如果它不是那么大并且您有一些停机时间，并且您有 Sql Server Management Studio，您可以使用 GUI 在表上放置一个标识字段。现在你有了像你的 CTE 这样的情况，除了行本身是真正不同的。所以现在您可以执行以下操作

```
SELECT MIN(table_a.MyTempIDField)
FROM
table_a lhs
join table_1 rhs
 on lhs.field1 = rhs.field1
 and lhs.field2 = rhs.field2 [etc]
WHERE
 table_a.MyTempIDField <> table_b.MyTempIDField
GROUP BY
 lhs.field1, rhs.field2 etc 
```

这为您提供了所有“好”的副本。现在您可以使用 DELETE FROM 查询来包装此查询。

```
DELETE FROM lhs
FROM table_a lhs
join table_b rhs
 on lhs.field1 = rhs.field1
 and lhs.field2 = rhs.field2 [etc]
WHERE
 lhs.MyTempIDField <> rhs.MyTempIDField
 and lhs.MyTempIDField not in (

SELECT MIN(lhs.MyTempIDField)
FROM
table_a lhs
join table_a rhs
 on lhs.field1 = rhs.field1
 and lhs.field2 = rhs.field2 [etc]
WHERE
 lhs.MyTempIDField <> rhs.MyTempIDField
GROUP BY
  lhs.field1, lhs.field2 etc
) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-15T11:57:04.470

尝试这个：

```
DELETE FROM TblProducts     
WHERE Product IN
      (
     SELECT Product
     FROM TblProducts
     GROUP BY Product
     HAVING COUNT(*) > 1) 
```

这样做的缺陷是它删除了具有重复产品的所有记录。您可能想要做的是删除给定产品的每组记录中的所有记录。首先将所有重复项复制到单独的表中，然后以某种方式从该表中删除重复项，然后应用上述内容，然后将剩余的产品复制回原始表，这可能是值得的。

# hadoop - 如何从 Hadoop 中的 HDFS 中的文件中读取序列化对象

> ID：11491542
> 
> 赞同：0
> 
> 时间：2012-07-15T11:37:10.100
> 
> 标签：hadoop, mapreduce, hdfs

我已将 LibSVM 类型的对象序列化为名为 j48.model 的文件。该文件已被传输到 HDFS 文件系统中。

现在，在 hadoop mapreduce 代码中，如何反序列化该对象并将其读回 LibSVM 类的实例？我已经将与 LIBSVM 相关的 .jar 文件作为外部 jar 文件包含到了 ma reduce 项目中。

哪些 JAVA 方法可以帮助我将文件 j48.model 的内容读入 LibSVM 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T11:45:49.410

当您打开 HDFS URL 时，它会返回一个 InputStream。

```
FileSystem fs = FileSystem.get(new Configuration());
InputStream in = fs.open(new Path("your uri")); 
```

您可以将此输入流包装在 ObjectInputStream 中：

```
ObjectInputStream objReader = new ObjectInputStream(in); 
```

并从中读取您的对象：

```
LibSVM lib = (LibSVM)objReader.readObject(); 
```

# php - 带有 Firefox 和不允许的关键字符的 CodeIgniter

> ID：11491546
> 
> 赞同：2
> 
> 时间：2012-07-15T11:37:41.650
> 
> 标签：php, codeigniter, frameworks, browser

最近我下载了codeIgniter 2.1.1。我在 Windows 7 上的 wamp 上删除了 CI 文件，然后我打开了 firefox 并键入 localhost，我看到了这条消息**“不允许使用的键字符”** 但是，Chrome 和 Opera 没有这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-15T11:58:08.720

`system/core/Input.php`第 728 行有此代码：

```
<?php 
/**
    * Clean Keys
    *
    * This is a helper function. To prevent malicious users
    * from trying to exploit keys we make sure that keys are
    * only named with alpha-numeric text and a few other items.
    *
    * @access   private
    * @param    string
    * @return   string
    */
function _clean_input_keys($str)
{
    if ( ! preg_match("/^[a-z0-9:_\/-]+$/i", $str))
    {
        exit('Disallowed Key Characters.');
    }

    // Clean UTF-8 if supported
    if (UTF8_ENABLED === TRUE)
    {
        $str = $this->uni->clean_string($str);
    }

    return $str;
}
?> 
```

它检查 key=>value 对中的键，例如：example.com?key=value 如果您的键不在它的范围内，`a-z0-9:_/-`它将引发该错误。

改变`exit('Disallowed Key Characters.');`

让`exit('Disallowed Key Characters.'.$str);`您了解哪个键有问题。请记住，这可能是通过检查 cookie，`$_REQUEST/$_COOKIE`因此清除 cookie 也是一个好主意，可能来自同一路径上的旧脚本或版本。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-27T04:04:02.273

答案在于您的浏览器 cookie。我在我的找到了这个条目

```
'instance0|ab' 
```

也许它在您的浏览器中。删除所有 cookie 并确保它们已消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-10T10:32:43.727

我有类似的问题，我清除了所有的cookie然后重新启动。网站工作正常。这可能是由于 cookie 形状不佳而发生的。希望它可以帮助某人..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-03T09:43:29.267

我有同样的错误！

在第 729 行的 system/core/Input.php 中有代码。

只需添加一个“。” 和'|' 将允许通过：

```
if ( ! preg_match("/^[a-z0-9:_\/\-\.|]+$/i", $str)) 
```

这在我的 Windows localhost 上对我有用，有一个子目录设置:)

# c# - 无法将“System.Byte []”类型的对象转换为“System.IConvertible”类型

> ID：11491547
> 
> 赞同：7
> 
> 时间：2012-07-15T11:37:59.303
> 
> 标签：c#

```
FMT fmt=new FMT();    

public void ReadFmtHeader()
{
    fmt.s_Sub_Chunk_ID_1 = reader.ReadBytes(4);
    fmt.ui_Sub_Chunk_Size_ID_1 = reader.ReadBytes(4);
    fmt.us_Audio_Format = reader.ReadBytes(2);
    fmt.us_Num_Channels = reader.ReadBytes(2);
    fmt.ui_Sample_Rate = reader.ReadBytes(4);
    fmt.ui_Byte_Rate = reader.ReadBytes(4);
    fmt.us_Block_Align = reader.ReadBytes(2);
    fmt.us_Bits_Per_Sample = reader.ReadBytes(2);

    if (Convert.ToInt32(fmt.ui_Sub_Chunk_Size_ID_1) == 18)// Exception thrown on this line
    {
        // Read any extra values
        int fmtExtraSize = reader.ReadInt16();
        reader.ReadBytes(fmtExtraSize);
    }
} 
```

我正在尝试读取波形文件，然后使用标题信息重新创建它并保存到文件。我不知道是什么问题。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T11:40:25.293

您不能将 a 转换`byte[]`为`int`using `Convert.ToInt32`; 你需要[使用一个`BitConverter`](http://msdn.microsoft.com/en-us/library/bb384066.aspx).

# javascript - 如何使用新函数扩展 jQuery 类型？

> ID：11491553
> 
> 赞同：0
> 
> 时间：2012-07-15T11:38:53.253
> 
> 标签：javascript, jquery-plugins, javascript-objects, jquery

我有一个特殊类型的对象，它实际上是 QTip2。我想为我的 qtip 类型添加一个额外的函数，这样我就可以对我的实例执行以下操作：

```
myQtip1.doSomething(); 
```

如何在我的 jQuery 对象上扩展函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:40:13.157

尝试添加东西`jQuery.fn`-

```
jQuery.fn.myMethod = function () {
  //...
}; 
```

为了将它与其他库区分开来`myMethod`，您可以调用它`customPrefix_myMethod`（替换`customPrefix`为您自己的自定义前缀）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:49:15.080

试试这个：

```
jQuery.fn.extend({
    my_function: function () {
        // do stuff
    }
}); 
```

然后你可以像这样使用它

```
$('#element').my_function(); 
```

您也可以在链中使用它：

```
$('#element').parent().my_function().show(); 
```

# asp.net-mvc-3 - 如何使用 Windows 身份验证允许匿名访问我的 mvc3 应用程序

> ID：11491557
> 
> 赞同：6
> 
> 时间：2012-07-15T11:39:38.550
> 
> 标签：asp.net-mvc-3, iis, windows-authentication, anonymous-access

我有一个使用 Windows 身份验证的 MVC3 **Intranet 应用程序。**我现在正在使用第三方服务，它将向我的应用程序发出通知调用。我已经为这些 API 调用创建了一个侦听器，但不确定如何允许匿名访问我的应用程序中的单个视图。

我的 IIS7 设置如下：

```
Anonymous - Enabled <---------- Use Domain User
ASP.NET Impersonation - Disabled
Basic Authentication - Disabled
Digest Authentication - Disabled
Forms Authentication - Disabled
Windows Authentication - Enabled - HTTP 401 Challange 
```

此外，在我的 web.config 文件中，身份验证模式设置为 Windows。

话虽如此，有没有办法允许匿名访问我的 MVC 应用程序中的单个视图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:46:50.657

path 是您的最终 url，将其添加到您的 web.config。

```
<location path="MyController/MyAction">
    <system.web>
        <authorization>
            <allow users="?" />
        </authorization>
    </system.web>
</location> 
```

[或者使用 AllowAnonymousAttibute http://msdn.microsoft.com/en-us/library/system.web.http.allowanonymousattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.http.allowanonymousattribute(v=vs.108).aspx)来装饰动作。

# android - 关于android broadcastReceiver && context.startActivity()的一些问题

> ID：11491559
> 
> 赞同：0
> 
> 时间：2012-07-15T11:39:56.913
> 
> 标签：android, android-activity, broadcastreceiver, android-context

```
@Override
public void onReceive(Context context, Intent intent) {
    Log.i("TEST", "user is present");
    Intent i = new Intent(context, MainActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
} 
```

我想在收到意图后立即启动我的应用程序的 MainActivity ，但是 MainActivity 在我看到日志“用户存在”后大约 3 秒后启动，而不是立即启动。我需要它立即启动以获得更好的用户体验。

我想知道是否有一种方法可以让 MainActivity 启动得更快？

> PS：当我在另一个活动中使用按钮启动MainActivity时，它立即启动，是不是BroadcastReceiver中的“context.startActivity(i)”方法比较慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:44:11.047

您可以向 Intent 对象添加一些标志，以帮助您实现目标。此外，当用户在场时，这仅是在设备解锁后**（提示）**。

**更新**

显然，意图标志不再在 API 中，真烦。然而; 使用 KeyguardManager，您可以将其作为解决问题的一部分来实现。

# android - 无法使用 Java Mail 发送附件

> ID：11491564
> 
> 赞同：0
> 
> 时间：2012-07-15T11:40:39.663
> 
> 标签：android, jakarta-mail

发生了什么？以前工作正常，但现在报错。

```
 public Send(String user, String password) 
    {   
        this.user = user;   
        this.password = password;   
        Properties props = new Properties();   
        props.setProperty("mail.transport.protocol", "smtp");   
        props.setProperty("mail.host", mailhost);   
        props.put("mail.smtp.auth", "true");   
        props.put("mail.smtp.port", "465");   
        props.put("mail.smtp.socketFactory.port", "465");   
        props.put("mail.smtp.so cketFactory.class","javax.net.ssl.SSLSocketFactory");   
        props.put("mail.smtp.socketFactory.fallback", "false");   
        props.setProperty("mail.smtp.quitwait", "false"); 
        session = Session.getDefaultInstance(props, this);
    }

    protected PasswordAuthentication getPasswordAuthentication() 
    {   
        return new PasswordAuthentication(user, password);
    }   

public void sendMail (final String recipients, final String FileName) 
    {
        Thread SendThread = new Thread() 
        { 
            public void run() 
            {                   
                try
                {               
                    //String SSS = FileName.replace("+", "");                   
                    //String Fname = new File (SSS).getName();

                    String Fname = new File (FileName).getName();
                    String subject = Fname.substring(0, 9);     
                    Log.e("!!!!!!!!!!!!!!!!!!!!!! ", Fname);

                    String RusFname = new String (Fname.getBytes());
                    String sender = "_X_X_X_";
                    MimeMessage message = new MimeMessage(session);   
                    message.setSender(new InternetAddress(sender));
                    message.setSubject(subject);            
                    MimeBodyPart attachmentPart = new MimeBodyPart();                       
                    FileDataSource fileDataSource = new FileDataSource(FileName) 
                    {
                        @Override
                        public String getContentType() 
                        {
                            return "application/octet-stream";
                        }
                    };
                    attachmentPart.setDataHandler(new DataHandler(fileDataSource));                             
                    attachmentPart.setFileName(MimeUtility.encodeText(RusFname));               
                    Multipart multipart = new MimeMultipart();
                    multipart.addBodyPart(attachmentPart);            
                    message.setContent(multipart);           
                    if (recipients.indexOf(',') > 0) 
                        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(recipients));   
                    else  
                        message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipients));   
                    Transport.send(message);
                    File f = new File(FileName);
                    Log.e("!!!!!!!!!!!!!!!!!!!!!! ", "Sended");
                    f.delete();                 
                }
                catch (MessagingException ex)   
                {  
                    ex.printStackTrace();  
                } catch (UnsupportedEncodingException e)
                {
                    e.printStackTrace();
                }
            }
        };
        SendThread.start();
    }
07-15 15:32:31.849: WARN/System.err(10287): javax.mail.MessagingException: Could not connect to SMTP host: smtp.gmail.com, port: 465, response: -1
07-15 15:32:31.849: WARN/System.err(10287):     at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1379)
07-15 15:32:31.849: WARN/System.err(10287):     at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412)
07-15 15:32:31.849: WARN/System.err(10287):     at javax.mail.Service.connect(Service.java:310)
07-15 15:32:31.854: WARN/System.err(10287):     at javax.mail.Service.connect(Service.java:169) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:46:31.607

看起来像是连接错误...请检查您的网络状态、防火墙等。

# javascript - “点击”事件调用外部函数而不是作用域函数。这本质上就像将内联 javascript 附加到 dom 吗？

> ID：11491567
> 
> 赞同：2
> 
> 时间：2012-07-15T11:41:01.923
> 
> 标签：javascript, jquery, benchmarking, scope

我的一个朋友（他比我更擅长 javascript）最近帮我优化了一些代码，他提到的其中一件事可能会有所帮助，那就是调用外部函数而不是使用作用域函数。但是，看起来这实际上似乎对性能没有太大影响。任何更熟悉javascript内部工作原理的人会解释为什么会这样吗？有任何理由使用一种方法而不是另一种方法吗？

我的意思是，这个：

```
function showI(e) {
    var iVal = $(e).attr('iteration');
    var iValx99 = iVal * 99;
    var iValx999 = iVal * 999;
    alert(iVal + ' // ' + iValx99 + ' // ' + iValx999);
}
var element;
for (var i = 0; i < 50; i++) {
    element = $('<div />', {
        'class': 'iteration',
        'iteration': i
    });
    element.on('click', function() {
        showI(element);
    });
    element.appendTo('body');
} 
```

相对：

```
var element;
for (var i = 0; i < 50; i++) {
    (function() {
        var j = i;
        element = $('<div />', {
            'class': 'iteration'
        });
        element.on('click', function() {
            var iVal = j;
            var iValx99 = iVal * 99;
            var iValx999 = iVal * 999;
            alert(iVal + ' // ' + iValx99 + ' // ' + iValx999);
        });
        element.appendTo('body');
    })();
} 
```

jsperf 基准测试示例：

[http://jsperf.com/function-click-on-every-element-vs-calling-a-function/2](http://jsperf.com/function-click-on-every-element-vs-calling-a-function/2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T11:47:25.727

好吧，无论如何，您每次都定义一个新函数，从而放弃了使用静态函数所带来的性能收益。

他可能的意思是使用这个：

```
element.on('click', showI ); //Just passing an already created function is cheaper than creating a new function object everytime 
```

你甚至不需要绑定它 50 次：

```
$("body").on("click", ".iteration", showI ); 
```

并修改`showI`：

```
function showI(e) {
    var iVal = $(this).attr('iteration');
    var iValx99 = iVal * 99;
    var iValx999 = iVal * 999;
    alert(iVal + ' // ' + iValx99 + ' // ' + iValx999);
} 
```

这在修改后的 jsperf [http://jsperf.com/function-click-on-every-element-vs-calling-a-function/3中要快得多](http://jsperf.com/function-click-on-every-element-vs-calling-a-function/3)

jsfiddle：http: [//jsfiddle.net/RgU5z/](http://jsfiddle.net/RgU5z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:50:21.950

如果在循环外声明函数，则只需声明一次。理论上这样会更有效。但是现在在循环中，您在每次迭代中声明一个匿名函数。这不是必需的，您可以使用对函数的[引用](http://devlicio.us/blogs/sergio_pereira/archive/2009/02/09/javascript-5-ways-to-call-a-function.aspx)`element.on('click', showI)`：并将元素引用`showI`为`this`（或`$(this)`，所以`var iVal = $(this).attr('iteration');`）。

# qooxdoo - Qooxdoo TreeVirtual ContextMenu

> ID：11491571
> 
> 赞同：1
> 
> 时间：2012-07-15T11:41:38.307
> 
> 标签：qooxdoo

如何在 Qooxdoo 的 TreeeVirtual 的列上实现 ContextMenu？我找到了一个表的例子：table.setContextMenuHandler(2, this._contextMenuHandlerNull); 但它在 treevirtual 情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:14:42.063

您应该确保在表类中包含上下文菜单混合：

```
qx.Class.include(qx.ui.table.Table, qx.ui.table.MTableContextMenu); 
```

由于树虚拟扩展了表格，在您包含 mixin 后，上下文菜单将可用。查看以下示例以查看它的运行情况：

[http://tinyurl.com/7nxm3uc](http://tinyurl.com/7nxm3uc)

# ant - ant 复制标签不会保留文件类型

> ID：11491574
> 
> 赞同：0
> 
> 时间：2012-07-15T11:41:59.490
> 
> 标签：ant, tags, copy

我正在尝试自动构建 Mac OS X 捆绑应用程序。当使用复制标签复制“Unix Executable File”类型的文件“/System/Library/Frameworks/JavaVM.framework/Versions/A/Resources/MacOS/JavaApplicationStub”时： `<copy file="${stub.file}" todir="${dist.dir}/${ant.project.name}.app/Contents/MacOS"/>`并获取“Document”类型的文件和包不执行。如果我从 Finder 复制它，它工作正常。

有没有办法复制它并保持它对蚂蚁的友善？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:55:06.217

该文件被正确复制，但执行权限丢失，如[ant手册](http://ant.apache.org/manual/Tasks/copy.html)中所述：

> **Unix 注意：**复制文件时不保留文件权限；他们最终获得了默认的 UMASK 权限。这是由于在当前 Java 运行时中缺乏任何查询或设置文件权限的方法造成的。

您必须`cp`稍后使用该命令或更改权限`chmod`：

```
<apply executable="chmod">
  <arg value="a+rx"/>
  <file file="${stub.file}" basedir="${dist.dir}/${ant.project.name}.app/Contents/MacOS"/>
</apply> 
```

# php - 访问 SimpleXML 元素的父元素会导致“数组”

> ID：11491575
> 
> 赞同：0
> 
> 时间：2012-07-15T11:42:00.237
> 
> 标签：php, xpath, simplexml

您好，我有一个这样的 XML 代码：

```
<article>
  <title><![CDATA[IEEE Transactions on]]></title>
  <articleinfo>
    <articleseqnum>13</articleseqnum>
    <idamsid>0b0000648011bcfb</idamsid>
............. 
```

我尝试使用 SimpleXML 访问元素的父元素，如下所示：

```
$xmlUrl = "example.xml"; // XML feed file/URL

$xmlStr = file_get_contents($xmlUrl);

$xmlObj = simplexml_load_string($xmlStr);

$titles = $xmlObj->xpath("//title");

foreach ($titles as $title)
{
   $parent_title = $title->xpath("parent::*");

   echo "Parent element of title: ". $parent_title."</br>";

} 
```

但我接受这个结果：

```
Parent element of title: Array 
```

代替

```
Parent element of title: article 
```

可能是什么问题？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:43:43.007

从 ->xpath() 结果数组中取出第一个元素，并在其上调用 getName()。（循环内）

```
$parent_title = $title->xpath("parent::*");
if ($parent_title) {
    echo "Parent element of title: ", $parent_title[0]->getName(), "</br>\n";
} 
```

# git - SVN -> Git 迁移后如何彻底清理？

> ID：11491579
> 
> 赞同：10
> 
> 时间：2012-07-15T11:43:13.123
> 
> 标签：git, git-svn

我已经将一个 repo 从 SVN 迁移到了 Git `svn2git`，除了一件事之外，我对一切都很满意。如何删除`remotes/svn/trunk`显示在中的分支`git branch -a`：

```
$ git branch -a
* master
  remotes/origin/master
  remotes/svn/trunk 
```

`svn2git`我通过执行以下操作进行了清理：

```
git config --remove-section svn-remote.svn
git config --remove-section svn
rm -rf .git/svn 
```

但我还是`remotes/svn/trunk`坐在那里！如果我 grep`.git`目录，我会得到这个`svn`：

```
$ grep -R svn .git
.git/info/refs:e6dd7a08d86d9b0944891755602b25ce12d30bb0 refs/remotes/svn/trunk
Binary file .git/objects/pack/pack-10cdd522d8f0fcc9b30efeddbdad3d0281c1e6da.pack matches
.git/packed-refs:e6dd7a08d86d9b0944891755602b25ce12d30bb0 refs/remotes/svn/trunk 
```

我是否可以安全地进入这些文件并删除引用，或者是否有更清洁的方法来摆脱旧的垃圾？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-15T11:50:54.653

删除远程跟踪分支将是一个好的开始：

```
git branch -d -r svn/trunk 
```

其他建议可在“[如何停止在 git 中跟踪远程分支？](https://stackoverflow.com/questions/3046436/how-do-you-stop-tracking-a-remote-branch-in-git) ”。
但要真正清理，您可能必须执行“[如何从我的 git repo 中删除未引用的 blob](https://stackoverflow.com/questions/1904860/how-to-remove-unreferenced-blobs-from-my-git-repo)`git gc` ”中提到的其他操作（例如基于）。

# iphone - 如何设置登录密码，然后在正确时转到另一个 ViewController？

> ID：11491589
> 
> 赞同：0
> 
> 时间：2012-07-15T11:44:32.223
> 
> 标签：iphone, objective-c, ios5, segue

这是我的代码：

```
- (IBAction)login:(id)sender {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Login"
                                                      message:@"Enter your username & password"
                                                     delegate:self 
                                            cancelButtonTitle:@"Cancel" 
                                            otherButtonTitles:@"Login", nil];

    [message setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];

    [message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Login"])
    {
        UITextField *username = [alertView textFieldAtIndex:0];
        UITextField *password = [alertView textFieldAtIndex:1]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T22:18:05.090

当您验证了用户名和密码后——

```
[self performSegueWithIdentifier:@"LoginSegue" sender:self]; 
```

在您的故事板中创建“LoginSegue”，从控制器获取登录信息到您要在登录后显示的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T04:42:32.960

创建一个具有两个属性（用户名和密码）的 Objective c 类。然后修改你的代码

```
 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex { 

           NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

           if([title isEqualToString:@"Login"]) { 

                UITextField *username = [alertView textFieldAtIndex:0]; 
                UITextField *password = [alertView textFieldAtIndex:1];

Validate your password and user name using **username.text and password.text**

if its valid then

                //create an Object the for the class which holds UserName and Password and set the values.
                newObj.userName = username.text;
                newObj.password = password.text;

               pass the object from here where you want'
               release the newObj
        } 
    } 
```

# nhibernate - Nhibernate 在带有连接的 QueryOver 中返回特定类型的联合子类

> ID：11491592
> 
> 赞同：0
> 
> 时间：2012-07-15T11:44:57.787
> 
> 标签：nhibernate, inheritance, join, queryover

这是我当前的 nhibenate 查询

```
 MappedHSPItemDto itemDtoAlias = null;
        TItem            itemAlias    = default(TItem);

        return
            Session.QueryOver<TMapItem>()
                .JoinAlias(x => x.Item, () => itemAlias, JoinType.InnerJoin)
                .Where(x => x.HealthServiceProvider == hsp)
                .SelectList(list => list
                                        .Select(x => x.Id).WithAlias(() => itemDtoAlias.Id)
                                        .Select(x => x.Version).WithAlias(() => itemDtoAlias.Version)
                                        .Select(x => x.HSPItemCode).WithAlias(() => itemDtoAlias.HSPItemCode)
                                        .Select(x => x.HSPItemName).WithAlias(() => itemDtoAlias.HSPItemName)
                                        .Select(x => itemAlias.Code).WithAlias(() => itemDtoAlias.CirrusItemCode)
                                        .Select(x => itemAlias.Name).WithAlias(() => itemDtoAlias.CirrusItemName)
                )
                .TransformUsing(Transformers.AliasToBean<MappedHSPItemDto>()).List<MappedHSPItemDto>(); 
```

返回此 sql 查询

```
SELECT
        this_.Id as y0_,
        this_.Version as y1_,
        this_.HSPItemCode as y2_,
        this_.HSPItemName as y3_,
        itemalias1_.Code as y4_,
        itemalias1_.Name as y5_      
    FROM
        HSPMedicineMapping this_      
    inner join
        (
            select
                Id,
                Version,
                Code,
                Name,
                GenericName,
                1 as clazz_              
            from
                Medicine              
            union
            all select
                Id,
                Version,
                Code,
                Name,
                null as GenericName,
                2 as clazz_              
            from
                AssetEquipment              
            union
            all select
                Id,
                Version,
                Code,
                Name,
                null as GenericName,
                3 as clazz_              
            from
                [Procedure]              
            union
            all select
                Id,
                Version,
                Code,
                Name,
                null as GenericName,
                4 as clazz_              
            from
                Supply              
            union
            all select
                Id,
                Version,
                Code,
                Name,
                null as GenericName,
                5 as clazz_              
            from
                Examination              
            union
            all select
                Id,
                Version,
                Code,
                Name,
                null as GenericName,
                6 as clazz_              
            from
                OtherItem          
        ) itemalias1_              
            on this_.ItemId=itemalias1_.Id      
    WHERE
        this_.HealthServiceProviderId = @p0;

@p0 = 12 [Type: Int64 (0)] 
```

基本上这里发生的事情是我加入了一个 unionsubclass 并且在查询中它包括 Item 类型的所有子类。

有没有办法在查询中只包含特定类型的子类？

我使用代码映射，下面是其中一个子类的映射

```
public class MedicineMap : UnionSubclassMapping<Medicine>
{
    public MedicineMap()
    {
        Property(p => p.Code, Rules.CodeRule);
        Property(p => p.Name, Rules.StrLength255AndNotNull);
        Property(p => p.GenericName, Rules.StrLength400AndNullable);

        Bag(x => x.HMOMedicineMappings, bag =>
        {
            bag.Inverse(true); 
            bag.Key(k => k.Column(col => col.Name("ItemId"))); 

        }, a => a.OneToMany());

        Bag(x => x.HSPMedicineMappings, bag =>
        {
            bag.Inverse(true); 
            bag.Key(k => k.Column(col => col.Name("ItemId"))); 

        }, a => a.OneToMany());
    }
} 
```

这是我的实体

```
public abstract class Item : EntityBase
{
    public virtual string Code { get; set; }
    public virtual string Name { get; set; }

}

public class Medicine : Item
{
    public Medicine()
    {
        HSPMedicineMappings = new List<HSPMedicineMapping>();
        HMOMedicineMappings = new List<HMOMedicineMapping>();
    }
    public virtual string GenericName { get; set; }
    public virtual IList<HSPMedicineMapping> HSPMedicineMappings { get; set; }
    public virtual IList<HMOMedicineMapping> HMOMedicineMappings { get; set; }

}

public class AssetEquipment : Item
{
    public AssetEquipment()
    {
        HSPAssetEquipmentMappings = new List<HSPAssetEquipmentMapping>();
        HMOAssetEquipmentMappings = new List<HMOAssetEquipmentMapping>();
    }
    public virtual IList<HSPAssetEquipmentMapping> HSPAssetEquipmentMappings { get; set; }
    public virtual IList<HMOAssetEquipmentMapping> HMOAssetEquipmentMappings { get; set; }
}

public abstract class HSPItemMapping : EntityBase
{
    public virtual HealthServiceProvider HealthServiceProvider { get; set; }
    public virtual string HSPItemCode { get; set; }
    public virtual string HSPItemName { get; set; }
    public virtual Item Item { get; set; }

}

public class HSPMedicineMapping : HSPItemMapping
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T16:39:56.600

如果 TMapItem 是特定类型 NH 将只查询 TMapItem 的表。但是，正如您在加入类型时在评论中所说的那样未知，因此所有表都已合并。为避免这种情况，您必须在包含该类型的外键旁边引入一列。我不确定，但 NH 应该优化查询。

```
// mapping using FluentNhibernate
ReferencesAny(x => x.Property)
    .KeyType()
    .MetaValue<Subclass1>("foo")
    .MetaValue<Subclass2>("bar"); 
```

# delphi - TProc 到 TNotifyEvent

> ID：11491593
> 
> 赞同：19
> 
> 时间：2012-07-15T11:44:59.920
> 
> 标签：delphi, delphi-xe, anonymous

除了这篇[文章](https://stackoverflow.com/questions/360254/can-i-use-a-closure-on-an-event-handler-ie-tbutton-onclick)，其接受的答案仍然非常神秘：

```
@Button1.OnClick := pPointer(Cardinal(pPointer( procedure (sender: tObject) begin ((sender as TButton).Owner as TForm).Caption := 'Freedom to anonymous methods!' end )^ ) + $0C)^; 
```

我想知道是否有可能设计一种简单而优雅的方式，类似于：

```
Button.OnClick :=
                    AnonProc2NotifyEvent (
                    procedure (Sender: TObject)
                    begin
                      ((Sender as TButton).Owner as TForm).Caption := 'Freedom to anonymous methods!'
                    end
                      ); 
```

为了达到相同的目的，并且 AnonProc2NotifyEvent 是具有以下签名的 Button 所有者的方法：

```
TOwnerOfButton = class(TForm)
  Button: TButton;
  ...
private
  ...
protected
  function AnonProc2NotifyEvent(aProc: TProc<TObject>): TNotifyEvent;
public
  ...
end; 
```

这是否可行，如果可行，如何实施？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-15T12:11:19.013

这将很容易完成这项工作：

```
type
  TNotifyEventWrapper = class(TComponent)
  private
    FProc: TProc<TObject>;
  public
    constructor Create(Owner: TComponent; Proc: TProc<TObject>);
  published
    procedure Event(Sender: TObject);
  end;

constructor TNotifyEventWrapper.Create(Owner: TComponent; Proc: TProc<TObject>);
begin
  inherited Create(Owner);
  FProc := Proc;
end;

procedure TNotifyEventWrapper.Event(Sender: TObject);
begin
  FProc(Sender);
end;

function AnonProc2NotifyEvent(Owner: TComponent; Proc: TProc<TObject>): TNotifyEvent;
begin
  Result := TNotifyEventWrapper.Create(Owner, Proc).Event;
end; 
```

`Owner`参数 in`AnonProc2NotifyEvent`是为了管理包装对象的生命周期。如果没有类似的东西，您将泄漏`TNotifyEventWrapper`.

传递 as `Owner`，您要将事件连接到的组件。例如：

```
Button1.OnClick := AnonProc2NotifyEvent(
  Button1,
  procedure(Sender: TObject)
  begin
    (Sender as TButton).Caption := 'Clicked';
  end
); 
```

所以，当按钮被销毁时，`TNotifyEventWrapper`也会被销毁。包装对象必须至少与它关联的事件的对象一样长。因此，`Button1`作为所有者的选择是自然而然的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T14:00:10.547

作为参考，我研究了上面提到的之前 SO 帖子中引用的[Barry Kelly](https://stackoverflow.com/users/3712/barry-kelly)的博客[文章](http://blog.barrkel.com/2010/01/using-anonymous-methods-in-method.html)，并提出了这个解决方案：

```
function TMainForm.Proc2NotifyEvent(const aProc: TNotifyReference): TNotifyEvent;
type
  TVtable = array[0..3] of Pointer;
  PVtable = ^TVtable;
  PPVtable = ^PVtable;
begin
  TMethod(Result).Code := PPVtable((@aProc)^)^^[3];
  TMethod(Result).Data := Pointer((@aProc)^);
end; 
```

仍然神秘但被封装，因此与初始方法相比，简化了编码器的任务。

我试图整理**MethRefToMethPtr**和**MakeNotify**并将它们全部放在一个方法中。

请注意，方法的签名有（轻微的）变化，参数**aProc**变为*const*。

# asp.net - LINQ to DataTable 轻松快速

> ID：11491594
> 
> 赞同：3
> 
> 时间：2012-07-15T11:45:05.963
> 
> 标签：asp.net, linq, datatable

我是 LINQ 新手，我想将 LINQ 查询转换为 DataTable

```
 DataClassesDataContext db = new DataClassesDataContext(MyConncectionString);
    IEnumerable<DataRow> qry = (IEnumerable<DataRow>)(from tbl in db.Table1.AsEnumerable()
                                                     select tbl);
    DataTable dt=new DataTable();
    qry.CopyToDataTable(dt, LoadOption.OverwriteChanges);
    GridView1.DataSource = dt; 
```

但我得到了错误

> 无法将“WhereSelectEnumerableIterator”类型的对象转换为“System.Collections.Generic.IEnumerable`1[System.Data.DataRow]”类型。

谁能帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:08:57.680

我认为这里没有必要转换成 linq？因为您已经获得了数据表，并且您正在 linq-ing 并再次将其转换回 linq。因此，除非您有正当理由在这里进行 linq，否则您应该坚持使用数据表。

```
 DataClassesDataContext db = new DataClassesDataContext(MyConncectionString);
     IEnumerable<DataRow> qry = (IEnumerable<DataRow>)(from tbl in db.Table1.AsEnumerable()
                                                 select tbl);
    DataTable dt=new DataTable();
    qry.CopyToDataTable(dt, LoadOption.OverwriteChanges);
    GridView1.DataSource = dt; 
```

应该，

```
 GridView1.DataSource = db.Table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:14:21.603

这些是基本概念：

.Net 框架附带了几个 LINQ 提供程序

*   LINQ 到对象。系统.Linq。它是 LINQ 核心，旨在与内存中的集合一起使用

*   LINQ 到 XML。System.Xml.Linq 处理 XML 文档

*   LINQ 到数据集。使用 DataTable 和 DataSet 对象

*   LINQ 到 SQL。System.Data.Linq 用于处理 SQL Server 数据库

*   LINQ 到实体。（实体框架）用于处理多个数据库。它提供了更丰富的 API

我认为您正在尝试做的是：

*从 LINQ to SQL 上下文返回的查询中，您希望返回`DataRow`对象集合。*

**LINQ to SQL 对象和 DataRow 之间没有简单的转换，因此如果您坚持需要使用反射来获得所需的输出**，[使用 DataContext 从 LINQ 查询填充 DataTable 的最快方法](https://stackoverflow.com/q/4953209/1268570)

现在，如果您真的想使用 DataTable 对象，那么我的建议是使用强类型 DataSet。要创建一个，只需将一个新的 DataSet 对象添加到您的项目中，然后从服务器资源管理器中拖动表，就像您对 LINQ to SQL 对象所做的那样

如果可能，评估使用决定`DataRow`并改为返回 LINQ To SQL 生成的对象，或者更好地创建自定义 DTO 对象

关于您的代码，我认为没有任何理由尝试使用`Datatable`对象（除非您不发布该额外代码来证明此决定的合理性）。如果您只想设置`DataSource`控件的属性，只需执行以下操作：

```
var q = from tbl in db.Table1
        select tbl;

this.myControl.DataSource = q;
this.myControl.DataBind(); 
```

如果需要，可以将结果转换为匿名对象并将其用作`DataSource`：

```
var q = from tbl in db.Table1
        select new
        {
           MyNewProperty = tbl.ExistingProperty,
           AnotherProperty = tbl.MyCoolerProperty
        };

this.myControl.DataSource = q;
this.myControl.DataBind(); 
```

# java - Java：泛型只接受枚举类型

> ID：11491597
> 
> 赞同：8
> 
> 时间：2012-07-15T11:45:25.563
> 
> 标签：java, generics, enums

假设我有一个基本的枚举，例如：

```
public enum Color { Red, Green, Blue} 
```

如何编写一个只接受“枚举类”的泛型类，以便该泛型类的具体实例化可能看起来像`MyClass<Color>`？

**编辑：**

真正想要做的是编写一个通用抽象类，其中包含一个将所有枚举“条目”作为列表返回的函数：

```
public abstract class EnumListBean<E extends Enum<E>> {

    public List<E> getEnumList() {
        return Arrays.asList(E.values());
    }

} 
```

虽然`Day.values()`可用`E.values()`不是。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T11:51:36.053

```
public class EnumAcceptor<E extends Enum<E>> {
    ...
} 
```

使用 E 作为类中的类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-15T12:53:20.183

有关原始问题的答案，请参见 Istvan Devai。

对于后续操作，诸如`values()`静态方法之类的方法，因此尝试从泛型参数中获取它是不走运的。作为一个糟糕的解决方案，您可以将枚举的`Class`对象传递给构造函数。并使用`Class.getEnumConstants`. 但是你最好传入`MyEnum.values()`构造函数而不是类，因此完全避免反射。没有一个合理的枚举元类真是太可惜了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T11:50:19.687

An`enum`真正声明了一个派生自 的类`Enum`。因此，您可以使用：

```
public class MyClass<T extends Enum> { } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T14:45:38.780

请注意，@Istvan 的解决方案只能接受的**元素**`enum`，如果这就是你想要的，那很好。

虽然您不能将`enum`自身作为参数传递（因为它实际上没有等效的对象），但您可以指定您必须在构造函数中接收 的 并从中派生`class`的详细信息：`enum``enum`

```
public class EnumAcceptor<E extends Enum<E>> {
  public EnumAcceptor(Class<E> c) {
    // Can get at the enum constants through the class.
    E[] es = c.getEnumConstants();
  }

  enum ABC {
    A, B, C;
  }

  public static void main(String args[]) {
    EnumAcceptor<ABC> abcAcceptor = new EnumAcceptor<ABC>(ABC.class);
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T14:58:49.117

`E.values()`由于类型擦除，您无法使用- 的类型`E`在运行时不可用。

对于您问题中的特定情况，您最好使用[Guava](https://code.google.com/p/guava-libraries/)的[`Lists.newArrayList`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/Lists.html)：

```
List<Color> days = Lists.newArrayList(Color.values()); 
```

# perl - install_driver(ODBC) 失败：无法为模块 DBD::ODBC: libodbc.so.1 加载“/usr/local/lib64/perl5/auto/DBD/ODBC/ODBC.so”

> ID：11491598
> 
> 赞同：2
> 
> 时间：2012-07-15T11:45:46.727
> 
> 标签：perl, unixodbc

我正在使用 perl 5.10.1 我当前的服务器（centos 6.3）。每当我执行 Perl 程序时，都会出现以下错误：

```
install_driver(ODBC) failed: Can't load '/usr/local/lib64/perl5/auto/DBD/ODBC/ODBC.so'
for module DBD::ODBC: libodbc.so.1: cannot open shared object file: No such file or 
directory at /usr/lib64/perl5/DynaLoader.pm line 200. 
```

当我执行以下命令时：

```
[root@test]# ldd /usr/local/lib64/perl5/auto/DBD/ODBC/ODBC.so
linux-vdso.so.1 => (0x00007fffde569000)
libodbc.so.1 => not found
libc.so.6 => /lib64/libc.so.6 (0x00007f591e49a000)
/lib64/ld-linux-x86-64.so.2 (0x0000003d25e00000) 
```

我明白了`libodbc.so.1 is not found`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:36:54.700

您需要安装 unixODBC 和 unixODBC-dev 软件包的 64 位版本（或自己构建）。我很惊讶您在没有安装 DBD::ODBC 的情况下安装了它们，因为构建过程需要它们。那么，问题是您是如何安装 DBD::ODBC 的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:17:20.057

您可能需要安装 C++ ODBC 库。当我尝试使用 XML::LibXML 库时，我遇到了类似的问题。我的情况是我必须在 ubuntu 上安装以下 C++ 库。libxml2-开发 libxml2

这是 Ubuntu 的 libodbc 软件包存储库的链接。 [http://packages.ubuntu.com/hardy/libodbc++4](http://packages.ubuntu.com/hardy/libodbc++4)

希望有帮助。

# c++ - 在 ubuntu 上使用 libboost_python 编译的命令

> ID：11491599
> 
> 赞同：1
> 
> 时间：2012-07-15T11:45:46.633
> 
> 标签：c++, ubuntu, boost-python

我正在尝试使用 libboost 库编译我的代码，方法是放入`#include <boost/python.hpp>`我的 C++ 代码。有人可以帮我正确的命令来运行它，尤其是包含和链接库。我在这方面很基础。

使用的命令（但不工作）：

`g++ try.cpp -L /usr/lib/libboost_python.so -o try`

编辑：

测试代码：

```
#include <boost/python.hpp>
#include <iostream>

int main() 
{

    std::cout << "Yes, it works :-)" << std::endl;

    return 0;
} 
```

错误信息：

```
from try.cpp:1:
/usr/include/boost/python/enum.hpp:31: error: expected ‘;’ before ‘*’ token
/usr/include/boost/python/enum.hpp:32: error: expected ‘;’ before ‘(’ token
/usr/include/boost/python/enum.hpp:33: error: ‘PyObject’ has not been declared
/usr/include/boost/python/enum.hpp:52: error: expected constructor, destructor, or     type conversion before ‘*’ token
/usr/include/boost/python/enum.hpp:67: error: ‘void*       boost::python::enum_<T>::convertible_from_python’ is not a static member of ‘struct     boost::python::enum_<T>’
/usr/include/boost/python/enum.hpp:67: error: template definition of non-template ‘    void* boost::python::enum_<T>::convertible_from_python’
/usr/include/boost/python/enum.hpp:67: error: ‘PyObject’ was not declared in this     scope
/usr/include/boost/python/enum.hpp:67: error: ‘obj’ was not declared in this scope
    /usr/include/boost/python/enum.hpp:80: error: variable or field ‘construct’     declared void 
/usr/include/boost/python/enum.hpp:80: error: ‘PyObject’ was not declared in this     scope
/usr/include/boost/python/enum.hpp:80: error: ‘obj’ was not declared in this scope
/usr/include/boost/python/enum.hpp:80: error: expected primary-expression before ‘*’ token
/usr/include/boost/python/enum.hpp:80: error: ‘data’ was not declared in this scope 
```

另一件事是，当我编译时`g++ -Wall thread_one.cpp -o thread_one -lboost_thread`，它可以使用 boost_thread 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:50:25.963

尝试这个：

```
g++ try.cpp -o try -lboost_python 
```

添加到您的编译器调用中也是一种很好的风格`-W -Wall -Wextra -pedantic`（这样您的下一个 SO 问题可以更具体:-)）。此外，`-O2`或者`-O3`用于优化可能是一个非常好的主意，尤其是对于 Boost。最后，当您有多个文件时，将构建拆分为单独的阶段可以更快地重新编译：

```
g++ -c -o try.o try.cpp -W -Wall -Wextra -pedantic -O2
g++ -o try try.o -s -lboost_python 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:14:39.203

最后，它正在工作。使用的命令如下：

`g++ -I/usr/include/python2.6 try.cpp -o try -lboost_python -lpython2.6`

# c# - Selenium 和 ChromeDriver 偶尔会为 GET 请求返回错误的内容

> ID：11491612
> 
> 赞同：4
> 
> 时间：2012-07-15T11:47:07.647
> 
> 标签：c#, google-chrome, selenium

C# 中的控制台应用程序在紧密循环中请求四个图像有时会返回先前的请求。代码如下，适用于任何网站，每次运行我通常会看到 3 或 4 个错误。我根据人们浏览我管理的网站的报告开发了此代码，当用户请求 HTML 页面时，偶尔会加载 jpeg 或脚本。

我不知道这是 Chrome 还是 ChromeDriver 的问题。如果之前的请求是一个 HTML 页面，那么您最终可以得到它而不是图像。似乎是一个比赛条件。

有没有其他人看到过这种行为，他们可以用下面的代码重复它吗？

```
class ContentVerify
{
    OpenQA.Selenium.IWebDriver driver;

    readonly System.Collections.Generic.List<string> testUrls = new System.Collections.Generic.List<string>()
    {
        "http://i.imgur.com/zNJvS.jpg",
        "http://i.imgur.com/lzVec.jpg",
        "http://i.imgur.com/rDuhT.jpg",
        "http://i.imgur.com/sZ26q.jpg"
    };

    public void Check()
    {
        driver = new OpenQA.Selenium.Chrome.ChromeDriver(); // Both InternetExplorerDriver and FirefoxDriver work OK.

        for (int i = 0; i < 10; i++)
        {
            TestUrls();
        }
        driver.Quit(); // The driver also crashes on exit, but this seems to be a known bug in Selenium.
    }

    private void TestUrls()
    {
        foreach (var item in testUrls)
        {
            System.Console.WriteLine(item);
            //System.Threading.Thread.Sleep(1); // Uncommenting this makes Chrome & ChromeDriver work as expected.
            driver.Url = item;
            // Requests for images come back as an HTML image tag wrapped in a brief HTML page, like below;
            //<html><body style="margin: 0px;"><img style="-webkit-user-select: none" src="http://i.imgur.com/zNJvS.jpg"></body></html>
            // So the image should always be in the page, but sometimes (not always) we get the previous image requested.
            if (!driver.PageSource.Contains(item))
            {
                System.Console.ForegroundColor = System.ConsoleColor.Red;
                System.Console.WriteLine("Expected: {0}, got: {1}", item, driver.PageSource);
                System.Console.ResetColor();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:12:37.513

可能是您没有给驱动程序足够的时间来完成调用并加载页面，因此它会“返回”它返回的任何前一页。您是否考虑过在驱动程序上设置[超时/等待](http://seleniumhq.org/docs/04_webdriver_advanced.html)？

**编辑**

关于*为什么*在 Chrome 中而不是在其他浏览器中存在这个问题的问题，我不得不冒险猜测并说这可能与不同的浏览器引擎如何处理直接显示图像而不是 HTML 有关。我之所以做出这个假设，是因为在针对像 Google 主页这样的 HTML 页面运行类似代码时，看不到所描述的这种差异。

每个浏览器都将图像包装在一些 HTML 中。例如，IE9 包装如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content="text/html; charset=windows-1252" http-equiv=Content-Type></HEAD>
<BODY><IMG src="[url here]"></BODY></HTML> 
```

而 Firefox 像这样包装它：

```
<html>
<head>
    <meta content="width=device-width; height=device-height;" name="viewport">
    <link href="resource://gre/res/TopLevelImageDocument.css" rel="stylesheet">
    <title>[filename] (JPEG Image, 500&nbsp;×&nbsp;332 pixels)</title>
</head>
<body>
    <img alt="[url here]" src="[url here]">
</body>
</html> 
```

最后，Chrome：

```
<html>
<body style="margin: 0px;">
    <img style="-webkit-user-select: none; " src="[url here]" width="500" height="332">
</body>
<style type="text/css"></style>
</html> 
```

现在，我不知道为什么 Chrome 版本会导致 webdriver 无法检测到页面加载。它肯定是三个 HTML 包装器中最小的一个，当要求[w3 验证器](http://validator.w3.org/check)验证其 HTML 而其他两个验证相对较好时，它会出现轻微的恐慌。

此外，正如 mootinator 所提到的，一般来说，有很多关于 Chrome 驱动程序的投诉，因此这可能只是 Chrome 网络驱动程序本身的问题。我刚刚发现上述内容很有趣，并认为可能值得分享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T03:49:38.953

似乎有很多关于 Chrome 驱动程序性能的抱怨。

[http://code.google.com/p/selenium/issues/detail?id=1294](http://code.google.com/p/selenium/issues/detail?id=1294)

两个事实： 1\. Chrome 本身并不是一个性能不佳的浏览器。2\. 对新 URL 的请求是异步发送的。

无论实际实现是什么，Chrome 驱动程序在发出请求和/或使用请求结果更新自身的过程中的某个地方显然存在性能问题。

Selenium 驱动程序不*保证*在您想要查看页面之前完成加载。因此，如果您在其中一个测试中碰巧遇到竞争条件，则不能合理地将其称为驱动程序中的错误。为了进行可靠的硒测试，您需要依赖使用，如 Roddy 所指出的，超时/等待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T20:54:56.140

我已经使用 Selenium 有一段时间了，它总是在请求页面完全加载之前 C# 代码已经完成执行，这意味着 selenium 执行其功能的速度非常慢。因此，为了让 selenium 完成它的工作，我们结束了使用 Thread.Sleep 并且我们的测试已经开始正常工作

我同意不是这样做的好方法，但我们尝试了各种方法，但未能找到更清洁的解决方案

请参阅链接获取信息[为什么 Selenium RC 这么慢？](https://stackoverflow.com/questions/2354590/why-is-selenium-rc-so-slow)在右侧的同一页面上，它们是与硒相关的其他问题的一些相关链接

# tycho - 第谷：缺少 org.eclipse.tycho.core.TychoProject

> ID：11491617
> 
> 赞同：1
> 
> 时间：2012-07-15T11:47:36.887
> 
> 标签：tycho

我尝试在 ubuntu 中运行 tycho，但我遇到了这个错误。无法在项目 tychodemo.bundle 上执行目标 org.eclipse.tycho:tycho-packaging-plugin:0.14.1:build-qualifier (default-build-qualifier)：执行目标 org.eclipse.tycho 的 default-build-qualifier： tycho-packaging-plugin:0.14.1:build-qualifier 失败：无法在插件 'org.eclipse.tycho:tycho-packaging-plugin:0.14.1' 中加载 mojo 'build-qualifier'。缺少必需的类：org.eclipse.tycho.core.TychoProject

我想这与我的框架有关，因为我在另一台计算机上做同样的事情并且 tycho 成功运行。你能发现我的问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:55:27.820

Tycho 类的类加载器错误通常是由在同一个反应器中混合多个 Tycho 版本引起的。作为构建构建扩展，一次只能有一个版本的 Tycho 处于活动状态。

为此，请检查您的反应器是否对 Tycho 构建扩展和 Tycho 插件使用相同的版本，例如通过使用变量`${tycho-version}`作为版本并在父 POM 中定义该版本：

```
<properties>
   <tycho-version>0.14.1</tycho-version>
</properties> 
```

还要确保所有模块都引用相同的父 POM，而不是旧版本的 POM。

# wpf - 在 Telerik DataGridVieww 的行标题上显示工具提示

> ID：11491623
> 
> 赞同：0
> 
> 时间：2012-07-15T11:48:19.443
> 
> 标签：wpf, telerik, tooltip, radgridview

我使用这些代码将数据预览显示为工具提示：

```
private void dataGrid1_RowLoaded(object sender, RowLoadedEventArgs e)
    {
        var row = e.Row as GridViewRow;
        if (row != null)
        {
            var textBlock = new TextBlock();
            textBlock.Text = "...";
            textBlock.DataContext = row;

            var toolTip = new ToolTip()
            {
                Content = textBlock,
            };

            toolTip.Opened += dataGrid1_ToolTipOpening;
            ToolTipService.SetToolTip(row, toolTip);
        }

    }

    private void dataGrid1_ToolTipOpening(object sender, RoutedEventArgs e)
    {
         GridViewRow row = null;

            var tooltip = e.OriginalSource as ToolTip;
            if (tooltip.Content is UCPreview)
            {
                return;
            }
            else if (tooltip.Content is TextBlock)
            {
                var content = tooltip.Content as TextBlock;
                row = content.DataContext as GridViewRow;
            }
            var gridViewRow = row.Item as DataRowView;
            if (gridViewRow != null)
            {
               //initial UCPreview                    
            }           
    }
} 
```

现在，我希望仅当鼠标位于行的标题上时才显示工具提示。不幸的是 GridViewRow 没有 Header 属性。我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:29:53.163

如果我没有误解你的问题，试试这个，你可以通过在 DataGridColumnHeader 样式中设置工具提示来做到这一点，比如

```
<Window.Resources>
    <Style TargetType="{x:Type DataGridColumnHeader}" x:Key="dghStyle">
        <Setter Property="ToolTip" Value="Red"/>
    </Style>
</Window.Resources>
<Grid>
    <DataGrid ColumnHeaderStyle="{StaticResource dghStyle}">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn/>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

我希望这将有所帮助 。这只是解决方法，您可以根据需要设置 ToolTop。

# jquery - 观察 DOM 变化，优雅的方式

> ID：11491628
> 
> 赞同：39
> 
> 时间：2012-07-15T11:49:45.040
> 
> 标签：jquery, html, dom

我需要注意特定 DOM 元素的任何子元素的属性更改。到目前为止，我一直在使用[突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)。

问题是——它们有问题：例如在 Chromium 下，`DOMAttrModified`没有被解雇，但`DOMSubtreeModified`被解雇了。这个问题很容易解决：因为根据规范，`DOMSubtreeModified`如果任何其他事件被触发，就会被触发，所以我只是听了`DOMSubtreeModified`.

无论如何，在最近的版本中，如果属性被修改，Chromium 会停止触发任何内容。

然而，新的[Mutation Observer API](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)可以完美运行。

到现在为止，我只需要在特定元素的子树发生任何变化时触发回调——仅仅是因为没有其他东西应该改变——所以我通过使用突变事件和突变观察者（如果可用）解决了我的问题。一段代码。

但是，现在我需要对事件进行更强大的过滤（例如，在新节点上、在已删除节点上）——那么是否有**一个库，可能是一个 jQuery 插件**，它可以让我优雅地使用**这两个**API——`MutationObserver`如果可用和突变事件作为后备，具有过滤特定事件类型（例如添加元素、更改属性）的能力。

例如

```
$("#test").watch({onNewElement: 1}, function(newElement){})
$("#test").watch({onNewAttribute: 1}, function(modifiedElement) {}) 
```

或者没有 jQuery

```
watchChanges("#test", {onNewElement: 1}, function(newElement){})
watchChanges("#test", {onNewAttribute: 1}, function(modifiedElement){}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T23:48:43.853

这行得通吗？

[http://darcyclarke.me/development/detect-attribute-changes-with-jquery/](http://darcyclarke.me/development/detect-attribute-changes-with-jquery/)

```
$.fn.watch = function(props, callback, timeout){
    if(!timeout)
        timeout = 10;
    return this.each(function(){
        var el      = $(this),
            func    = function(){ __check.call(this, el) },
            data    = { props:  props.split(","),
                        func:   callback,
                        vals:   [] };
        $.each(data.props, function(i) { data.vals[i] = el.css(data.props[i]); });
        el.data(data);
        if (typeof (this.onpropertychange) == "object"){
            el.bind("propertychange", callback);
        } else if ($.browser.mozilla){
            el.bind("DOMAttrModified", callback);
        } else {
            setInterval(func, timeout);
        }
    });
    function __check(el) {
        var data    = el.data(),
            changed = false,
            temp    = "";
        for(var i=0;i < data.props.length; i++) {
            temp = el.css(data.props[i]);
            if(data.vals[i] != temp){
                data.vals[i] = temp;
                changed = true;
                break;
            }
        }
        if(changed && data.func) {
            data.func.call(el, data);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-16T12:09:49.460

为了使用 jQuery 进行有效的 DOM 监控，您可以查看使用[Live Query优化版本的](https://github.com/brandonaaron/livequery)[jQuery Behavior Plugin](https://github.com/fschaefer/jquery-behavior)（免责声明：我是作者）。我在几个产品中使用了 3 年，没有任何问题。

Edit: Listening for attribute changes would work like this:

```
$.behavior({
    'div:first': {
        'changeAttr': function (event, data) {
            console.log('Attribute "' +  data.attribute + '" changed from "' + data.from + '" to "' + data.to + '"');
        }
    }
});

$('div:first').attr('foo', 'bar'); 
```

# sqlite - 选择具有最小列值的单行 - sqlite3

> ID：11491637
> 
> 赞同：0
> 
> 时间：2012-07-15T11:50:54.523
> 
> 标签：sqlite, minimum

我有一张 ZZZ 表，其中有 A、B、C、D 列

我正在选择 A 列的前 X 行表。Sqlite3 查询将是

```
select * from ZZZ order by A desc limit X 
```

如何从上述查询的结果中选择B列最小值的行。

换句话说：我想要表 T 中 B 列中具有最小值的行。这个表 T 是由查询生成的

```
select * from ZZZ order by A desc limit X 
```

我正在使用 Python sqlite3 接口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T11:53:51.470

这样做。从表 T 中选择 B 列中具有最小值的行：

```
SELECT *
FROM
(
    SELECT *
    FROM ZZZ
    ORDER BY A DESC
    LIMIT X
) T
ORDER BY B ASC
LIMIT 1 
```

# php - W3C 标记验证 HTML5 TextArea

> ID：11491639
> 
> 赞同：-2
> 
> 时间：2012-07-15T11:51:09.733
> 
> 标签：php, forms, w3c-validation

我在 HTML5 中验证此表单时遇到问题。我遇到了最后一个错误，但我什么也没想到！！！希望有人能帮忙！

**导致错误的表单部分**

```
<textarea name="content" value="<?=$content;?>" class="rounded" <?php echo $_POST['content'] ? $_POST['content'] : "" ?> required="required"></textarea> 
```

**这是 W3C Validator 出现的错误！**

```
Error Line 177, Column 78: Attribute value not allowed on element textarea at this point.

…xtarea name="content" value="" class="rounded" required="required"></textarea> 
```

错误出现在关闭**>** required="required" 之后

再次希望有人可以提供帮助！:)

**- 找到答案 -**

好的！对于任何可能需要上述问题答案的人...

textarea 应该读取，以通过 W3C 验证

```
<textarea name="content" class="rounded" <?php echo $_POST['content'] ? $_POST['content'] : "" ?> required="required"><?=$content;?></textarea> 
```

这仍将允许表单在提交后保持填充..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T11:54:34.650

没有`value`属性`<textarea>`。将您的内容放入`<textarea>`容器中。

样本：

```
<textarea name="content">
    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod
    tempor invidunt ut labore et dolore magna aliquyam.
</textarea> 
```

参考：

*   [https://developer.mozilla.org/en/HTML/Element/textarea](https://developer.mozilla.org/en/HTML/Element/textarea)

# ruby-on-rails - 我是否需要 PayPal Preapproval 才能自动向用户付款？

> ID：11491641
> 
> 赞同：-1
> 
> 时间：2012-07-15T11:52:20.600
> 
> 标签：ruby-on-rails, paypal

在我的应用程序中，我将拥有每月向我的用户支付费用的功能。

我应该获得什么样的预先批准？这是必要的吗？

你能给我推荐什么好的宝石吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T20:09:12.550

PreApprovals 用于收款（即他们付钱给你）。对于汇款，您需要查看自适应支付，尤其是隐式支付功能。

它允许您以编程方式从您自己的帐户中汇款（即您付款）。

PayPal 目前没有任何产品可以自动执行此操作，因此您需要编写一个脚本，每月为您的所有用户调用一次 API。

查看第 25 页了解更多信息。[ [https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_AdaptivePayments.pdf) ]

就 Gem 而言，我不相信有明确的用途，但是您可能会为此目的调整 ActiveMerchant（或至少将其用作起点），因为它基本上是一个**Pay** API 调用，使用您将自己指定为发件人的例外情况。

# html - 使用 UTF8 编码的网站重音标记位置不正确（仅使用西里尔字母）

> ID：11491642
> 
> 赞同：2
> 
> 时间：2012-07-15T11:52:20.847
> 
> 标签：html, encoding, utf-8, non-ascii-characters

我正在开发包含一些带有重音符号的西里尔文字的网页。要放置重音标记，我使用 utf8 字符 U0301（组合重音）。在我已经使用过的每个编辑器以及我已经看到的每个与西里尔文相关的网页中，这个重音符号都显示在文本中这个字符*之前的字母上方。*我的问题是，在我的页面上，此字符显示在文本中此标记*之后*的字母上方。更重要的是，这种不正确的行为只能在西里尔字母上观察到。使用通常的拉丁词，它可以正确显示。

我设置了每个与编码相关的标头。

[编辑]

这个问题似乎只出现在 Firefox 上（我使用的是 13.0.1 版）。当我使用 Chrome 时，重音符号会正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T13:39:51.950

`font-family`根据对不同字体的试验，最好在不同的平台上，也可能在不同的浏览器上，选择一个合适的字体列表，用于文本规则。您可以使用不同的字体设置在您最喜欢的文字处理器（或编辑器）中测试字体；结果不一定与网络浏览器中的相同，但通常相似。例如，Calibri 和 Arial 看起来不错，Cambria 在 serif 方面也是如此（Times New Roman 对 U+0301 没有问题，但除非分辨率相当高，否则它通常渲染不好）。

还可以考虑使用一些合适的字体作为网络字体（通过`@font face`）。

这听起来很乱，但它确实是实用的方法。问题是三方面的：

1.  在某些字体中，U+0301 完全错误，或者有点错误。例如，在Georgia（一般OK 字体）中，U+0301 出现在基本字符的右侧，就好像它根本不是一个组合标记，而是一个单独的符号。在 Courier New 中，它被放置在下一个字符上。在 Constantia 和 FreeSerif 中，它的位置太正确了，尽管仍然可以识别为变音符号。
2.  一些字体完全没有 U+0301，迫使浏览器从基本字母以外的字体中获取它。不用说，这可能会造成混乱（或者你可能会侥幸逃脱，如果它恰好适合的话）。
3.  浏览器和其他程序在处理组合标记方面有所不同。您对此无能为力。即使对于 U+0301 实现良好的字体，较旧的浏览器也可能很容易产生较差的结果。原因是正确放置变音符号是一个复杂的运算符：程序需要访问有关基本字符的信息，以便在小写 о 和大写 О 上以不同的方式放置例如尖音符。

我不知道为什么您在 Firefox 上得到的结果与在 Chrome 上不同，除非您将字体保留为默认值并且浏览器使用不同的默认值。

当 U+0301 与西里尔字母失败时，（许多）U+0301 与拉丁字母组合运行良好的原因可能是完全不同的处理方式。浏览器可能并且经常将字母和组合变音符号的组合呈现为单个字形，对应于所谓的预组合字符。因此，如果浏览器看到拉丁字母`o&#x301;`在哪里，它会在内部将其映射到单个字符“ó” U+00F3，该字符包含在最常用的字体中。`o`

作为一个印刷细节，当瞄准非常好的质量（我们通常买不起......）时，像 a、e、o、y 这样的拉丁字母应该与相同文本中的西里尔字母（按形状）完全相同。任何体面的字体的设计都是相同的。但不幸的是，当添加重音时，这可能会改变。例如，在 Calibri 中，о́（带有锐音的西里尔字母 o）与 ó（带有锐音的拉丁语 o）的重音不同。这是字体的设计缺陷。（但在典型的复制文本大小中，差异几乎不明显。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:14:49.700

可能与您在每个浏览器上设置的默认字体和/或浏览器拥有默认样式有关？我试过这个[JS fiddle——](http://jsfiddle.net/zZAMP/1/)在 Firefox with Times 中，重音完美对齐，但在 Arial 中它很不错，但有点偏右。

另一方面，Arial 可以通过 Chrome，但 Times 非常偏右。

您是否尝试过调整用于查看这是否会影响问题的字体系列、行高、字体大小等？

**编辑：此外，只需在**[宾夕法尼亚州立大学网站](http://tlt.its.psu.edu/suggestions/international/web/tips/fontcss.html#cyr)上阅读此建议：

> Times New Roman 和 Georgia 等字体在 Windows 中包含西里尔字符，但在 Macintosh 上，它们可能仅包含在 Apple 的“CY”西里尔字体中，例如“Times CY”。
> 
> ```
> .serifcyr {
>     font-family: "Times CY", "Times New Roman", serif
> }
> .noserifcyr {
>     font-family: "Geneva CY", "Helvetica CY", "Arial", sans-serif
> } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T21:11:26.160

我使用了来自 Google Fonts 服务的字体 Roboto，它也有同样的问题——重音位置错误。

为了解决这个问题，我已将此字体（ttf 版本）下载到我的计算机上，安装、打开 photohosop 并确保实际重音正确！然后我将字体上传到 fontsquirrel.com 服务并转换为我自己的网络字体，然后重音被修复了！除了上面的西里尔字母«і»字母..但是，这总比没有好。

提示 - 如果您有多个字体粗细，那么在 fontsquirrel.com 上选择 «expert...» 并检查 «Style link» — 它会组成 css，这样您就可以拥有一个具有不同粗细的字体名称。

# java - 锁定手机重启游戏场景

> ID：11491643
> 
> 赞同：0
> 
> 时间：2012-07-15T11:52:31.043
> 
> 标签：java, android, eclipse, andengine

我正在使用AndEngine在android中开发游戏，当前最大的问题是当手机再次锁定和解锁时（大约一分钟或更长时间）游戏场景会重置。

我做了很多搜索，大多数人建议使用关闭应用程序时调用的函数进行保存。我可以这样做，但这样可以节省很多。但是，我确实知道这是可能的，因为它是在 AndEngine 示例中完成的。AndEngine 示例中的一个特别值得注意的事情是，当程序在前台时手机被锁定时，屏幕会再次打开。再次按下电源会保持屏幕关闭，直到再次解锁，在女巫游戏完美恢复之后。

我浏览了清单文件和启动器源代码，复制并粘贴了一些东西，但仍然没有成功。似乎解决方案在 Manifest 文件中，所以这是我的程序之一，包括到目前为止的所有修改：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.andenginetest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.WAKE_LOCK"/>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
        android:configChanges="orientation|keyboard|keyboardHidden"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

尽管很多人都建议过，但这些都对问题没有任何影响。有人可以告诉我我可能做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:10:02.007

我遇到了完全相同的问题，我将其添加到游戏活动的清单中：

```
 android:screenOrientation="landscape"
         android:configChanges="keyboard|keyboardHidden|orientation">            
    </activity> 
```

如您所见，您的清单中没有 screenOrientation，您可能只是在创建引擎时设置了方向，不知道这是否会改变任何东西，但我有它，并且它有效

哦，别忘了设置 onResumeGame 和 onPauseGame ：

```
@Override
public void onResumeGame() {
    super.onResumeGame();

    this.enableAccelerometerSensor(this);
}

@Override
public void onPauseGame() {
    super.onPauseGame();

    this.disableAccelerometerSensor();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:01:36.623

我猜它与活动生命周期有关。正如您在图中看到的那样 [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

有几种方法与暂停、停止和开始活动有关。您应该覆盖`onPause()`和`onResume()`方法，并在那里执行保存。一旦`onPause()`被调用，操作系统可以选择终止你的活动，而你没有选择做任何事情。

这可能是正在发生的事情，所以如果你覆盖这些方法，你可以告诉应用程序在暂停时要做什么（意思是，整个屏幕被另一个视图覆盖 - 或者锁定，或者一个电话，或者另一个应用程序等）和恢复时。

希望这就是你的意思。祝你好运！

# c++ - 从 exe 导出 ActiveX 控件

> ID：11491644
> 
> 赞同：0
> 
> 时间：2012-07-15T11:52:33.810
> 
> 标签：c++, activex, controls, exe

我在这里完成了一项具有挑战性的任务。我们在exe文件中得到了一个Dialog（由C++制成），现在我们希望它是一个ActiveX控件，因此可以以C# .net形式加载它，但是由于c++头文件的复杂网络，很难选择up 文件以制作单独的 ActiveX dll。那么可以从exe文件中导出activeX控件吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T19:22:53.650

ActiveX 控件只不过是一个 DLL。是的，可以从 exe 文件中导出 activeX 控件。一个典型的场景是将图像（您的 ActiveX 控件）作为另一个应用程序的资源并在运行时提取它。[这](http://www.codeproject.com/Articles/4221/Adding-and-extracting-binary-resources)是网络上众多可用示例之一。

# .htaccess - .htaccess 非 www 到 www，子域除外

> ID：11491645
> 
> 赞同：0
> 
> 时间：2012-07-15T11:52:42.173
> 
> 标签：.htaccess, subdomain

我目前有一个 htaccess，它将所有非 www url 重写为 www url。但是现在我正在将 CDN 与多个子域集成，但我想排除这些子域以将 www 加入其中。

要排除的子域

`static.pc-helpforum.be`

`img.pc-helpforum.be`

`avatarts.pc-helpforum.be`

我现在已经试过了，但我不确定它是否可以，请指教：

`RewriteEngine On`

`RewriteCond %{HTTP_HOST} !(^www\.pc-helpforum\.be$|^static\.pc-helpforum\.be$|^img\.pc-helpforum\.be$|^avatars\.pc-helpforum\.be$)`

`RewriteRule (.*) http://www.pc-helpforum.be/$1 [R=301,L]`

`RewriteRule ^((urllist|sitemap_).*\.(xml|txt)(\.gz)?)$ vbseo_sitemap/vbseo_getsitemap.php?sitemap=$1 [L]`

`RewriteCond %{REQUEST_URI} !(admincp/|modcp/|cron|vbseo_sitemap)`

`RewriteRule ^((archive/)?(.*\.php(/.*)?))$ vbseo.php [L,QSA]`

`RewriteCond %{REQUEST_FILENAME} !-f`

`RewriteCond %{REQUEST_FILENAME} !-d`

`RewriteCond %{REQUEST_FILENAME} !^(admincp|modcp|clientscript|cpstyles|images)/`

`RewriteRule ^(.+)$ vbseo.php [L,QSA]`

谢谢你的帮助。

最好的问候， 卡雷尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T11:55:04.597

将此添加到您的其他规则之上：

```
RewriteCond %{HTTP_HOST} !^sub\.example\.com$ 
```

# .htaccess - 在子文件夹中安装 modx

> ID：11491646
> 
> 赞同：0
> 
> 时间：2012-07-15T11:52:58.783
> 
> 标签：.htaccess, mod-rewrite, friendly-url, modx, subdirectory

我喜欢我的网络空间整洁:)

因此，如果我的根文件夹是`html/`我想在子目录中安装 modx（2.2 版）`html/modx/`

对于我的网站访问者来说，一切都应该与我在根文件夹 ( `html/`) 中安装 modx 相同。

我也不想没有友好的网址。

让它变得更加困难：我也非常喜欢内置的 modx 文件浏览器，我很想将它用于文档根目录中的每个文件和文件夹（因此`html/*`应该显示里面的每个文件）。

（这怎么可能？

附加问题：如果可能的话，最好在子文件夹中重新安装 modx 还是将我的安装移动到新位置 ( `html/modx`)。由于我的安装只有几天，所以任何一个选项都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T17:54:08.487

你用的是什么版本的MODx？

通常您会进行高级安装（MODx 的单独版本）。您可以将现有的 MODx 安装移动到您的子目录，但您需要更新所有*config.core.php*文件和**MODX_CORE_PATH**常量以反映这一点。您还需要至少保留并更新 Web 根目录中的*index.php*文件。需要更新的配置文件包括：

*   配置文件
*   经理/config.inc.php
*   连接器/config.inc.php
*   核心/配置/config.inc.php

**core/config/config.inc.php**是最重要的文件，您需要确保其中列出的所有路径都是正确的。

如果您检查管理器设置中的所有 URL 和文件系统路径是否正确，文件浏览器将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-06T07:58:06.717

更改您的 .htaccess 设置：

```
RewriteBase /subfoldername/ 
```

并像往常一样安装它。

# delphi - Delphi 7，Titan BTrieve 组件

> ID：11491650
> 
> 赞同：0
> 
> 时间：2012-07-15T11:54:26.003
> 
> 标签：delphi, delphi-7, btrieve

我正在使用 Delphi 7 和 Titan BTrieve 打开 Pervasive Table。

它是一个 TtbTable 组件。

我正在尝试使用我的代码在 TimeStamp 字段上应用过滤器，如下所示：

```
 Date:=InputDate;
    DateString:=FormatDateTime('DD/MM/YYYY HH:NN:SS', InputDate);
    Table1.Filter:='UPDATEDON > '+chr(39)+DAteString+chr(39);
    Table1.Filtered:=True; 
```

问题是过滤结果不正确。它返回与过滤条件不匹配的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:02:55.867

Table1.Filter，过滤 TDataSet 中的数据，而不是 btrieve/pervasive 中的数据。

问题是字符串格式的日期...您必须使用格式 YYYY-MM-DD 而不是 DD-MM-YYYY 因为字符串比较。

在字符串中比较 17-06-2012 大于 16-07-2012, (17>16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T13:44:49.210

从外观上看，您是在比较字符串，而不是日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T16:35:02.500

您使用的是哪个版本的 PSQL？UPDATEDON 字段是否定义为 Btrieve 数据库中的时间戳？如果它是时间戳，则值存储在 8 字节无符号值中，表示自公历 0001 年 1 月 1 日以来的间隔秒（10^-7 秒），协调世界时 (UTC)。它不存储为字符串。

Btrieve / PSQL 以 'YYYY-MM-DD' 格式存储日期。

UPDATEDON 字段中的值是什么样的？要将其用作过滤器，您需要确保过滤器值看起来相同。

# javascript - MooTools toElement() 有反向方法吗？

> ID：11491654
> 
> 赞同：1
> 
> 时间：2012-07-15T11:54:48.967
> 
> 标签：javascript, mootools

我很高兴使用 MooTool 的 toElement()，它能够跟踪哪个 DOM 元素属于我的类的某个实例。有没有办法扭转这种行为？如：给它一个元素并获得对其所属类的实例的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T15:17:25.203

[**`Element.store()`**](http://mootools.net/docs/core/Element/Element#Element%3astore)您可以使用和[**`Element.retrieve()`**](http://mootools.net/docs/core/Element/Element#Element%3aretrieve)方法在 DOM 元素上存储和检索对象引用。

你的班级可以是例如：

```
var MyClass = new Class({

    initialize: function(element) {
        this.el = document.id(element); // Store element for later usage

        // Store a reference to "this" object on the Element itself
        this.el.store('_MyClass', this);

        return this;

    },

    // Object -> Element (you already know this)
    toElement: function() {
        return this.el;
    }

});

// The following implements a new property for all Elements (optional)
Element.Properties.myClass = {

    get: function() {
        return this.retrieve('_MyClass');
    }

}; 
```

然后，检索附加到 DOM 元素的对象实例：

```
// Object creation
new MyClass($('some_element'));

// The easy way, if you did not implemented Element property
var myClassInstance = $('some_element').retrieve('_MyClass');

// Or prettier, if you implemented property like I showed you
var myClassInstance = $('some_element').get('myClass'); 
```

# windows - 通用纯文本打印机驱动程序不起作用

> ID：11491655
> 
> 赞同：2
> 
> 时间：2012-07-15T11:54:52.720
> 
> 标签：windows, google-chrome, printing, gdi+, gdi

我正在使用通用纯文本打印机驱动程序，作为 WDK（Windows 驱动程序工具包）中的示例提供。但它适用于某些应用程序，不适用于其他应用程序。就像它适用于记事本和 Microsoft word，但不适用于 chrome 浏览器或[FloreantPOS](http://floreantpos.com/)。我尝试使用此驱动程序通过以下 4 个应用程序打印到文件或热敏打印机：-

1）记事本上的简单文本：成功运行。

2）Microsoft Word 上的文本 + 图形（艺术字）：工作成功，即打印文本并省略图形

3）在 Chrome 浏览器上从谷歌文档打印简单文本：不起作用，即在打印到文件的情况下，文件是空的，在打印到热敏打印机的情况下，我得到一个空白页

4) 从[FloreantPOS](http://floreantpos.com/)打印收据：同 (3)。

我想知道是否有人可以告诉我 chrome 和[FloreantPOS](http://floreantpos.com/)有什么不同？另外，我可以对通用纯文本驱动程序进行一些更改以使其与 chrome 和[FloreantPOS 一起使用](http://floreantpos.com/)吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T20:58:28.123

Chrome 将文本打印为图形，或者至少在我尝试过的所有网站上打印。它使用线条绘制来绘制文本而不是打印实际字符；因此，纯文本驱动程序无法打印任何内容。您可以通过打印到 Adob​​e PDF 然后打开生成的 PDF 并使用预检分析对其进行检查来证明这一点。我从 cnn.com 网站打印了 20 页，但在 PDF 中*没有文本。*当我打印到 Windows 纯文本打印机时，我只得到一堆换行符。

不幸的是，一些应用程序以这种方式打印。我用 Firefox 得到了同样的结果。（众所周知，浏览器不*擅长*打印。）在 tumblr.com 上使用 Firefox，它主要是纯文本，我得到了完全的垃圾。最有可能的是，Firefox 使用字形 ID 而不是字符进行打印，纯文本驱动程序可能无法正确处理。

恐怕除了使用不同的驱动程序之外没有解决办法。纯文本驱动程序非常有限，我怀疑它是否适用于大多数应用程序。我希望即使是 Word 也会因某些字体而失败。我建议改用 Unidriver Postscript 或光栅驱动程序。

# jquery - jquery 切换动态高度

> ID：11491658
> 
> 赞同：0
> 
> 时间：2012-07-15T11:55:12.947
> 
> 标签：jquery, height, toggle

[jsfiddle 演示](http://jsfiddle.net/cUZpP/)

我已经创建了左面板并通过 jquery .height(); 给它自动高度。一切正常，但是如果您通过单击箭头按钮将其折叠，那么您将看到白框下方的图标也会溢出到左侧面板。我希望当我单击折叠按钮折叠时，白色框会缩小，这样粉红色的图标就不会溢出。任何直升机都会非常感谢......

# php - 警告：session_start() [function.session-start]：

> ID：11491659
> 
> 赞同：-2
> 
> 时间：2012-07-15T11:55:27.697
> 
> 标签：php, header, warnings

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试开发一个 Web 应用程序，它显示警告为

> 警告：session_start() [function.session-start]: 无法发送会话缓存限制器 - >头已经发送（输出开始于 /home/wwwwdmar/public_html/index.php:1）在 >/home/wwwwdmar/public_html/index .php 在第 1 行

这是索引页面的顶部代码。

```
<?php session_start();
require "config/database.class.php";
//  require 'fbook/src/facebook.php';
require "core/corefunction.php"; 

$selectrecentproducts = "SELECT listitemname,rollover,productkey,category_name,sub_category_name FROM ".$tbl_products."   INNER JOIN ".$tbl_main_categories." INNER JOIN ".$tbl_sub_categories." ON ".$tbl_products.".categoryname=".$tbl_main_categories.".category_id AND ".$tbl_products.".sub_category_id=".$tbl_sub_categories.".sub_category_id  WHERE status= 0 ORDER BY product_id DESC LIMIT 8";
//echo $selectrecentproducts;exit; 
```

请看一下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:09:56.510

问题是 PHP 在启动**session_start()**之前发送了一些数据，这是非法的。您应该解决问题*[我不知道问题是什么，因为您没有共享所有代码]*或者您可以尝试在**session_start()**之前将**错误报告为 0**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:12:53.780

`session_start()`必须在任何输出发送到浏览器之前调用。这包括空格。确保您在通话之前没有发送任何内容。这同样适用于`header`和`setcookie`。

您可以通过呼叫作为第一件事来“欺骗” `ob_start()`，然后您不必担心。`ob_start()`但是，请记住，这会增加开销，因此只有在实际使用's 功能时才应真正使用此解决方案。**

# css - Firefox 忽略为文本输入元素设置的百分比宽度值

> ID：11491662
> 
> 赞同：0
> 
> 时间：2012-07-15T11:56:01.070
> 
> 标签：css, forms, firefox, input

在屏幕截图中，表单文本字段设置为 97% 以在它们之间创建一个间隙。它适用于除 Firefox 之外的所有浏览器——它似乎一直延伸到 100%。任何人请给我一个解决这个问题的方法？

![在此处输入图像描述](../Images/3a7f81041a0835f477c142de900c3613.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:11:04.060

尝试添加`box-sizing: border-box`（以及相应的`-moz-box-sizing`, `-webkit-box-sizing`）。否则，填充和边距会添加到 97% 中，而不是包含在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:14:06.440

我在 Mac OS 上使用 FF 13.0.1，差距显示正确。

![在此处输入图像描述](../Images/fb078013ef634cbd1af4f01a916fd277.png)

# java - Java字符串长度方法

> ID：11491665
> 
> 赞同：1
> 
> 时间：2012-07-15T11:56:42.767
> 
> 标签：java, string, methods

> **可能重复：**
> [在 Java 中，对于字符串 x，s.length() 的运行时成本是多少？是 O(1) 还是 O(n)？](https://stackoverflow.com/questions/254726/in-java-for-a-string-x-what-is-the-runtime-cost-of-s-length-is-it-o1-or-o)

String 类的 length 方法在 Java 中究竟是如何工作的？

它是线性时间的for循环还是有一个字段跟踪长度以使其恒定时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T11:58:36.530

a 的长度`String`保存为一个字段，如下所示：http: [//grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String .长度%28%29](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.length%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T11:58:17.287

有一个字段来存储长度。它不需要“跟踪它”（暗示它可能会改变），因为字符串是不可变的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:04:31.177

String 将其数据存储在`char[]`数组中，但在某些情况下，String 应该只使用该数组的一部分，这就是为什么它在其字段中存储`int offset`该数组的开始索引 () 以及应该用于生成 String ( `int count`) 的长度。方法`length()`将返回`count`字段的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:04:43.967

字符串是不可变的，因此当创建字符串对象时，其长度将存储为该字符串对象的实例变量。

# ruby-on-rails - 我应该把要通过 Rails 3 中的 send_file 发送的文件放在哪里？

> ID：11491668
> 
> 赞同：0
> 
> 时间：2012-07-15T11:57:04.420
> 
> 标签：ruby-on-rails, deployment, asset-pipeline

我应该在哪里放置要通过 Rails 3 中的 send_file 提供的文件？

假设我正在提供一个浏览器扩展程序，它可能一两个月更新一次，我应该把它放在资产管道中吗？以及如何从控制器访问它？如果我使用它来引用它`#{Rails.root}`，它将无法在生产环境中工作。我不想`config.action_dispatch.x_sendfile_header`每次在不同的网络服务器上部署时都必须更改，也不想设置`config.serve_static_assets = true`，因为这是对开发环境的扭曲。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:53:27.037

You should put them in a directory outside of Public, otherwise they will be viewable by the browser directly without authentication.

I usually create a directory in Rails.root, something like

```
Rails.root
 - app
 - config
 - db
 - secure_files 
```

So the files will be present in secure_files.

# ruby - 我应该如何存储 twitter 令牌，以便用户不必每次都去 twitter_oauth？

> ID：11491674
> 
> 赞同：1
> 
> 时间：2012-07-15T11:57:42.130
> 
> 标签：ruby, twitter, sinatra, oauth-2.0, twitter-oauth

我正在开发 twitter 应用程序，所以我使用 twitter_oauth gem 进行授权。这是非常基本的代码。因此，如果用户转到 /login，它将重定向用户到 twitter 登录，一旦他登录并单击授权应用程序，他将被重定向回我的网站。

```
 begin
    callback = ENV['twitter_callback'] || "http://127.0.0.1:4567/login/success"
    request_token = @twitterClient.request_token(:oauth_callback => callback)
    MemcacheUtil::set("request_token_twitter", request_token, 3000)
    redirect request_token.authorize_url
  rescue Exception => e  
    puts e.message  
    puts e.backtrace.join("\n") 
    raise Exception.new("Something's wrong with twitter!")
  end 

```

这就是我想做的。如果用户退出并且他想再次登录。现在，如果他点击登录按钮，他将再次被重定向到 Twitter 以授权该应用程序。无论如何我可以克服这个。即使我注销并再次单击登录，我也会注意到一些站点。它做了一些事情并让我登录而不去推特网站。我怎么做？他们是否将我的令牌和秘密保存在 cookie 中？

例如：[http ://www.klout.com](http://www.klout.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:11:09.700

您需要为您的应用拥有自己的用户模型，然后关联 3rd 方帐户。OpenSocial 规范将 Account 定义为（域、用户 ID、用户名），因此这可能是一个安全的选择。您也可以将其存储在 memcached 中，或者使用不同的存储空间，然后根据 Web 应用程序还是本机应用程序将您的密钥存储在设备或 cookie 中。不要将令牌存储在 cookie 中，存储对您的用户的引用，然后在第一次请求时执行查找，并可能将您自己的身份验证令牌存储在 memcached 中以用于“会话”。

用户的简单 MySQL 表：

```
CREATE TABLE IF NOT EXISTS user (id INT NOT NULL AUTO_INCREMENT, name VARCHAR(48), ..., PRIMARY KEY (id));

CREATE TABLE IF NOT EXISTS user_accounts (id INT NOT NULL AUTO_INCREMENT, domain VARCHAR(64), user_id VARCHAR(32), username VARCHAR(32), status TINYINT(1), PRIMARY KEY (id)); 
```

或者

用户/帐户的简单 JSON 对象（例如使用您自己的密钥存储在 memcached 中）

```
"user":{"id":yourId, "name":"Some Name", 
    "accounts":[{"domain":"twitter.com", "user_id":"sometoken", "username":"handle"}]
} 
```

希望这会有所帮助。密钥是存储您自己的用户，然后在后续访问期间将您的密钥作为 cookie 或在设备上引用并执行您自己的查找。为了提高性能，您不想查找每个请求，因此我建议您使用 memcached 来为该用户存储会话。

# ios - paymentQueueRestoreCompletedTransactionsFinished：返回带有空交易数组的队列

> ID：11491681
> 
> 赞同：4
> 
> 时间：2012-07-15T11:58:30.413
> 
> 标签：ios, ios5, in-app-purchase, storekit

问题：我调用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`它返回给我的观察者`paymentQueueRestoreCompletedTransactionsFinished:` `SKPaymentQueue`，并带有空的事务数组。但我购买了**非消耗**性应用内。

我正在测试我的应用程序如何恢复来自不同州的购买。

重现的简单步骤：

1.  添加付款并完成购买。队列返回`SKPaymentTransactionStatePurchased`事务，因此应用程序启用功能并最终确定队列中的事务。
2.  删除有关购买的信息，以便我可以重新购买。（想象一下，用户重新安装了该应用程序，或开始在另一台设备上使用该应用程序）
3.  再次尝试在应用内购买。收到“*您已经购买了。点击确定再次免费下载。* ”。按 OK，队列返回`SKPaymentTransactionStatePurchased`事务，因此应用程序启用功能并完成队列中的事务。
4.  再次删除有关购买的信息。
5.  再次尝试在应用内购买。收到“*您已经购买了此应用内购买但尚未下载。* ”。只有一个 OK 按钮，甚至在你按下它之前，你就会收到带有 state 的交易`SKPaymentTransactionStateFailed`。应用程序完成交易，但交易失败时不会启用功能。
6.  最后尝试使用`[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];`. `paymentQueueRestoreCompletedTransactionsFinished:` `SKPaymentQueue`并以空`transactions`数组返回观察者。

我觉得 Apple Sandbox 服务器有问题，所以我无法正确恢复交易。还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:01:22.530

由于您已在步骤 3 中完成购买，恕我直言，没有必要恢复该购买。

第 2 步和第 4 步与用户重新安装应用程序不同，因为应用程序已启动并正在运行，因此 SKPayment 可能会采取措施减少服务器负载。您最好尝试删除该应用程序，然后安装，然后`restoreCompletedTransactions`立即使用以恢复购买。

* * *

我的旧答案：

> `- (void)paymentQueueRestoreCompletedTransactionsFinished:(SKPaymentQueue *)queue`在支付队列处理完所有可恢复的交易后调用。它只是告诉您恢复过程已完成。
> 
> 对于每个可恢复的购买，`- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions`都会调用，并且您需要处理其中`transaction`的`transactions`每个。`transaction.transactionState``SKPaymentTransactionStateRestored`

# graphics - 如何在 Actionscript 中填充部分形状

> ID：11491682
> 
> 赞同：1
> 
> 时间：2012-07-15T11:58:31.077
> 
> 标签：graphics, actionscript

我想在动作脚本中填充一些形状，比如说“半个圆圈”，但不幸的是我找不到任何合适的方法来做到这一点？任何建议将不胜感激谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:46:53.003

一种解决方案，在您的情况下，您必须在您的主要区域中绘制一些**封闭区域**@正方形和矩形三角形等，然后您可以将其填充到您绘制的区域的整个部分。所以如果你想填充区域的一部分，那么你必须在你的主要区域上绘制一个区域，然后你可以填充它，这样用户就会感觉到他已经填充了半个区域。

可能此链接[将对 ActionScript 绘图 API](http://www.republicofcode.com/tutorials/flash/drawingapi/)和[绘图和填充部分圆圈有所帮助](http://www.flashandmath.com/howtos/circlefill/)

# objective-c - 单击视图的空白区域时，如何取消选择 NSOutlineView 中的所有表行？

> ID：11491688
> 
> 赞同：3
> 
> 时间：2012-07-15T11:59:41.893
> 
> 标签：objective-c, macos, cocoa

例如当我点击下面的红点时：

![前](../Images/b9fdae21bfac05d78e93bc14ca5cc3f4.png)

我希望发生以下取消选择：

![在此处输入图像描述](../Images/02081d31d721e76637f1da4f1b00a8ef.png)

我使用数据源和选择索引的绑定设置了基于视图的 NSOutlineView。到目前为止，我已经尝试覆盖 TableCellView becomeFirstResponder 并覆盖 NSOutlineView 的 becomeFirstResponder 但似乎 NSOutlineView 从未真正放弃第一响应者状态？

一些建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T17:07:33.837

我在这个话题上找到[了这篇文章。](http://blog.foomatik.com/2010/06/tech-quickies-deselecting-row-in.html)解决方案似乎是创建一个子类`NSOutlineView`并覆盖`mouseDown:`，以便您可以确定点击是否在一行上。当点击在一行上时，您只需发送给 super。如果不是你发送`deselectAll:`到你的`NSOutlineView`.

我自己没有尝试过，但是有很多帖子都提供了类似的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T09:42:10.567

的使用`setAction:`方法`NSOutlineView`。

```
[mOutlineView setAction:@selector(doClick:)];
[mOutlineView setTarget:self];

-(IBAction) doClick:(id)sender;
{
    if ([mOutlineView clickedRow] == -1) {
        [mOutlineView deselectAll:nil];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-06T09:58:08.713

斯威夫特 5\. 在 NSOutlineViewDelegate

```
 func outlineViewSelectionDidChange(_ notification: Notification) {
        //1
        guard let outlineView = notification.object as? NSOutlineView else {
            return
        }
        outlineView.deselectAll(nil)
} 
```

# opengl-es - Opengl-es相机可以看到物体吗？

> ID：11491690
> 
> 赞同：0
> 
> 时间：2012-07-15T12:00:05.500
> 
> 标签：opengl-es

我有一个相机 (pos, dir) 我有一个物体 (x,y,z)

如何检测物体何时可以用我的相机看到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:03:39.617

你没有足够的信息。您需要了解相机平截头体。比你计算对象是否在截锥体内。在此处了解更多信息：

[http://www.lighthouse3d.com/tutorials/view-frustum-culling/](http://www.lighthouse3d.com/tutorials/view-frustum-culling/) [http://www.songho.ca/opengl/gl_transform.html](http://www.songho.ca/opengl/gl_transform.html)

# c# - WCF 中的动态 ExpandoObject

> ID：11491691
> 
> 赞同：5
> 
> 时间：2012-07-15T12:00:12.753
> 
> 标签：c#, wcf, dynamic

尝试通过枚举类型进程和动态数据的操作来 Ping / Pong 我的服务。

```
[ServiceContract ( CallbackContract = typeof ( iStackoverflowCallBack ) )]
public interface iStackoverflow
{
    [OperationContract]
    void Ping ( Process Operation , dynamic Data );
}

[ServiceContract ( )]
public interface iStackoverflowCallBack
{
    [OperationContract]
    void Pong ( Process Operation , dynamic Data );
} 
```

**为什么**此服务有连接问题？

*   实现两个接口时`dynamic`自动转换为`object`.
*   当`ping`从消费者那里获取我的服务时，ping 根本没有到达服务，但服务工作正常。

* * *

**解决方案 ：**

```
[DataContract]
public class SerializableDynamicObject : IDynamicMetaObjectProvider
{
    [DataMember]
    private IDictionary<string,object> dynamicProperties = new Dictionary<string,object>();

    #region IDynamicMetaObjectProvider implementation
    public DynamicMetaObject GetMetaObject (Expression expression)
    {
        return new SerializableDynamicMetaObject(expression, 
            BindingRestrictions.GetInstanceRestriction(expression, this), this);
    }
    #endregion

    #region Helper methods for dynamic meta object support
    internal object setValue(string name, object value) 
    {
        dynamicProperties.Add(name, value);
        return value;
    }

    internal object getValue(string name) 
    {
        object value;
        if(!dynamicProperties.TryGetValue(name, out value)) {
            value = null;
        }
        return value;
    }

    internal IEnumerable<string> getDynamicMemberNames() 
    {
        return dynamicProperties.Keys;
    }
    #endregion
}

public class SerializableDynamicMetaObject : DynamicMetaObject
{
    Type objType;

    public SerializableDynamicMetaObject(Expression expression, BindingRestrictions restrictions, object value) 
        : base(expression, restrictions, value) 
    {
        objType = value.GetType();
    }

    public override DynamicMetaObject BindGetMember (GetMemberBinder binder)
    {
        var self = this.Expression;
        var dynObj = (SerializableDynamicObject)this.Value;
        var keyExpr = Expression.Constant(binder.Name);
        var getMethod = objType.GetMethod("getValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
                                     getMethod,
                                     keyExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override DynamicMetaObject BindSetMember (SetMemberBinder binder, DynamicMetaObject value)
    {
        var self = this.Expression;
        var keyExpr = Expression.Constant(binder.Name); 
        var valueExpr = Expression.Convert(value.Expression, typeof(object));
        var setMethod = objType.GetMethod("setValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
        setMethod, 
        keyExpr, 
        valueExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override IEnumerable<string> GetDynamicMemberNames ()
    {
        var dynObj = (SerializableDynamicObject)this.Value;
        return dynObj.getDynamicMemberNames();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:03:50.210

任何 WCF 操作协定的参数必须是 WCF 数据协定（或原始类型），否则数据将不会被序列化和传输。

[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-30T16:13:06.287

扩展 Ahmed 的解决方案如何使用它。

答案来自此页面：[https ://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/](https://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/)

```
[DataContract]
public class SerializableDynamicObject : IDynamicMetaObjectProvider
{
    [DataMember]
    private IDictionary<string,object> dynamicProperties = new Dictionary<string,object>();

    #region IDynamicMetaObjectProvider implementation
    public DynamicMetaObject GetMetaObject (Expression expression)
    {
        return new SerializableDynamicMetaObject(expression, 
            BindingRestrictions.GetInstanceRestriction(expression, this), this);
    }
    #endregion

    #region Helper methods for dynamic meta object support
    internal object setValue(string name, object value) 
    {
        dynamicProperties.Add(name, value);
        return value;
    }

    internal object getValue(string name) 
    {
        object value;
        if(!dynamicProperties.TryGetValue(name, out value)) {
            value = null;
        }
        return value;
    }

    internal IEnumerable<string> getDynamicMemberNames() 
    {
        return dynamicProperties.Keys;
    }
    #endregion
}

public class SerializableDynamicMetaObject : DynamicMetaObject
{
    Type objType;

    public SerializableDynamicMetaObject(Expression expression, BindingRestrictions restrictions, object value) 
        : base(expression, restrictions, value) 
    {
        objType = value.GetType();
    }

    public override DynamicMetaObject BindGetMember (GetMemberBinder binder)
    {
        var self = this.Expression;
        var dynObj = (SerializableDynamicObject)this.Value;
        var keyExpr = Expression.Constant(binder.Name);
        var getMethod = objType.GetMethod("getValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
                                     getMethod,
                                     keyExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override DynamicMetaObject BindSetMember (SetMemberBinder binder, DynamicMetaObject value)
    {
        var self = this.Expression;
        var keyExpr = Expression.Constant(binder.Name); 
        var valueExpr = Expression.Convert(value.Expression, typeof(object));
        var setMethod = objType.GetMethod("setValue", BindingFlags.NonPublic | BindingFlags.Instance);
        var target = Expression.Call(Expression.Convert(self, objType),
        setMethod, 
        keyExpr, 
        valueExpr);
        return new DynamicMetaObject(target,
            BindingRestrictions.GetTypeRestriction(self, objType));
    }

    public override IEnumerable<string> GetDynamicMemberNames ()
    {
        var dynObj = (SerializableDynamicObject)this.Value;
        return dynObj.getDynamicMemberNames();
    }
} 
```

一个简单的使用方法：

```
dynamic d = new SerializableDynamicObject();
d.Name = “SomeData”;

d.Address = new SerializableDynamicObject();
d.Address.Line1 = “123 Spring St.”;

dynamic a = new SerializableDynamicObject();
a.Items = new List(new object[] { d, d });

return a; 
```

但是请记住，WCF 需要了解数据类型，因为它是最基本的数据类型，例如 等`string`，`int`这不是问题。但是，如果您在动态对象中使用自定义数据类型，则必须在使用`[KnownType(typeof(XXX))]`指令中进行定义。这适用于`enums`和`List<>`任何其他自定义类。

例如：

```
[KnownType(typeof(MyCustomEnum))]
[KnownType(typeof(List<object>))]
[DataContract]
public class SerializableDynamicObject : IDynamicMetaObjectProvider
... 
```

# vbscript - VBScript：通过批量重命名文件夹中的文件来获取错误

> ID：11491692
> 
> 赞同：0
> 
> 时间：2012-07-15T12:00:24.857
> 
> 标签：vbscript, directory, renaming

在此脚本中，我尝试重命名文件夹中的所有文件。**我将使用Instr(1, strText, "(Amtlicher Gemeindeschlüssel = " ...)**从每个文本文件本身收集新名称。所以所有 jsp 文件都应继续进行。但我几乎在最后得到一个对象错误：**800A01A8 - 需要对象**。任何人都可以帮我**替换对象 strVerz.files**以便代码正常工作。 *提前谢谢你*。迈克尔

```
Dim objFso, strFolder

' Begin Main

Set objFso = CreateObject("Scripting.FileSystemObject")
strFolder = objFso.GetParentFolderName(WScript.ScriptFullName)  

If objFso.FolderExists(strFolder) Then
    Call GetJspFiles(objFso.GetFolder(strFolder))
End If

Set objFso = Nothing

' End Main

Sub GetJspFiles(ByRef objFolder)
    Dim objFile, objSubFolder

    For Each objFile In objFolder.Files
        If LCase(objFso.GetExtensionName(objFile.Name)) = "jsp" Then
            Call JSPRename(objFile.Path, objFolder.Path)
        End If
    Next

    For Each objSubFolder In objFolder.SubFolders
      Call GetJspFiles(objSubFolder)
    Next
' objFile.Close

End Sub

Sub JSPRename(ByRef strPath, ByRef strFolder)
    Dim arrText, strText, strTextLine, Position , objJspFile, newFilename, strVerz

    Set objJspFile = objFso.OpenTextFile(strPath)

    arrText = Split(objJspFile.ReadAll, vbCrLf) ' split to lines

    For Each strTextLine In arrText
      If strTextLine <> "" Then
         strText = Trim(strTextLine)

       If Instr(1,strText,"(Amtlicher Gemeindeschlüssel",1) Then
        Position=Instr(1, strText, "(Amtlicher Gemeindeschlüssel =",1)
       newFilename=mid(strText,Position+31, 8)

       else
       end if
      end if

    Next

    strVerz=objFSO.GetParentFoldername(WScript.ScriptFullName)
    strNewName = strVerz & "\" & newFilename & ".jsp" 

    ' Wscript.echo strNewName & vbcrlf & strVerz.files '!! only for Showing the results

     objFSO.MoveFile strVerz.files, strNewName <- Here I get the error

     objJspFile.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T23:44:46.073

似乎 的目的`JSPRename`是重命名由`strPath`. 在这种情况下，调用[`MoveFile`](http://msdn.microsoft.com/en-us/library/2wcf3ba6%28VS.84%29.aspx)应该如下所示：

```
objFSO.MoveFile strPath, strNewName 
```

# php - 如何链接 css 文件以与 wamp 服务器正常工作？

> ID：11491697
> 
> 赞同：1
> 
> 时间：2012-07-15T12:02:09.337
> 
> 标签：php, css, dreamweaver

我在 php.page 的头部有这一行

```
<link href="css/header.css" rel="stylesheet" type="text/css" /> 
```

dw 中的 LiveView - 显示格式良好的所有内容（css 工作）
f12（使用 wamp） - 也工作得很好。
现在，我更改了 header.css 中的某些行（例如单元格填充）-然后文件-保存所有
实时视图仍然有效-正确显示更改
但 f12（wamp）不显示更改。
如果我将 header.css 文件从 css 文件夹移动到根文件夹（并更改链接） - wamp 效果很好
但我想将我的 css 文件放在 css 文件夹中，而不是在根文件夹中。请问有什么解决办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:10:33.483

清除浏览器缓存。那应该可以解决问题。如果您在浏览器中使用 ctrl+F5，您可以自动执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T12:12:02.287

找到您的 Web 根路径并将其附加到 css 文件中

例子。

```
<link href="<?php echo $webroot?>/yourfolder/css/header.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T12:13:47.073

你可以使用

```
<link href="css/header.css<?php echo '?rnd_'.urlencode(time()).'='.urlencode(rand()); ?>" rel="stylesheet" type="text/css" /> 
```

出于调试目的，这是理想的，因为它将随机查询字符串附加到 CSS-file-request 以便不被缓存。

# objective-c - 来自 URL 的图像的视网膜显示

> ID：11491698
> 
> 赞同：7
> 
> 时间：2012-07-15T12:02:43.763
> 
> 标签：objective-c, ios, xcode, image, retina-display

我有一些图像需要从网络上获取。仅使用来自 URL 的数据。
它们需要在 Retina 显示屏上正确显示。
当我从网络上获取图像时，它们看起来仍然像素化。我需要将图像的比例设置为视网膜显示（2.0），但我必须遗漏一些东西。这是我到目前为止所做的。

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:@"http://www.msdomains.com/tmp/test.png"];

CGRect labelFrame = CGRectMake(0,0,64,64);
UIImageView *imageView = [[UIImageView alloc] initWithFrame:labelFrame];
imageView.contentScaleFactor = [UIScreen mainScreen].scale;

[imageView setImage:img];
[self addSubview:imageView];
[imageView release]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T12:10:39.023

尝试`#@2x.png`在 URL 的末尾添加。这不会更改 URL，但图像将被识别为视网膜 @2x 图像。它对我有用，但我将此方法与[SDWebImage](https://github.com/rs/SDWebImage)一起使用。

例如使用`http://www.msdomains.com/tmp/test.png#@2x.png`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T14:09:27.960

您的代码应该按原样工作。我不知道您图像的原始尺寸是多少，但我猜它们是 64x64 像素。为了正确缩小，原始图像需要为 128x128 像素。

作为测试，以下代码在模拟器和我的 iPhone 4 上以 Retina 分辨率正确显示了我的照片：

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.seenobjects.org/images/mediumlarge/2006-08-19-native-lilac.jpg"]]];

CGRect labelFrame = CGRectMake(0, 0, 375, 249.5);
UIImageView *imageView = [[UIImageView alloc] initWithFrame:labelFrame];

[imageView setImage:img];
[self.view addSubview:imageView]; 
```

请注意，它`UIImageView`是 375x249.5 点，是照片原始（像素）尺寸的一半。此外，设置`contentScaleFactor`似乎没有必要。

（顺便说一句，在这种情况下，我看不出`@2x`在 URL 上指定会有所帮助，因为对的调用`dataWithContentsOfURL:`将返回一个不透明的数据块，没有留下文件名的痕迹。然后传递给的就是那些不透明的数据`imageWithData:`加载图像。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T22:53:03.027

当您直接将图像 URL 分配给 imageView 时，它不会将其视为视网膜。

```
imageView.imageURL = [NSURL URLWithString:@"http://example.com/image.png"]; 
```

不会给你视网膜图像。

因此，尽管您的图像是 200x200，但如果您的 imageView 是 100x100，那么它将从下载的图像中提取 100x100，并在视网膜设备上显示像素化图像。

解决方案是使用 imageView 的 image 属性而不是 imageURL。

```
imageView.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://example.com/image.png"]]]; 
```

这会将 200x200 图像分配给 100x100 的 imageView，因此图像不会被像素化。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T13:02:15.210

对于视网膜显示，添加相同的图像，其分辨率正好是原始图像的两倍。不要忘记在此图像名称的末尾添加“@2x”...例如`"image_header.png"`，图像是 320x100，然后`"image_header@2x.png"`操作系统将自动选择另一个具有名称（尺寸 640x200）的图像用于视网膜显示...希望对您有所帮助

# bash - GNU Screen - 在 shell 或脚本的后台运行命令中创建屏幕

> ID：11491700
> 
> 赞同：17
> 
> 时间：2012-07-15T12:03:24.670
> 
> 标签：bash, shell, gnu-screen

我正在尝试`screen`从 shell 创建一个会话/窗口并在其中启动一个命令。我该怎么做？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-15T12:16:15.963

如果要启动并连接到屏幕：

```
screen CMD 
```

如果要启动而不连接到屏幕：

```
screen -dm CMD 
```

也适用于会话：

```
screen -Sdm NewDetachedSessionName CMD 
```

您可以将按键发送`CMD`到`stuff`：

```
screen -S NewDetachedSessionName -X stuff "keypresses" 
```

要发送换行符，请在*keypresses*`\n`中包含or 。`^M``$'\n'`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-17T12:43:38.050

首先创建新会话：

`screen -dmS [session_name]`

然后附加命令或脚本以在创建的会话中运行：

`screen -x [session_name] [script.sh]`*

# c# - 如何将布尔公式转换为 CNF 或 DNF

> ID：11491701
> 
> 赞同：4
> 
> 时间：2012-07-15T12:03:26.670
> 
> 标签：c#, discrete-mathematics

假设我有一个布尔公式 a 或 (b 和 c)

我希望将其转换为 CNF，即（a 和 b）或（a 和 c）

是否有任何现有的图书馆可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:18:03.287

如果您想自己实现它，这里有一个如何使用 Linq 表达式公式的示例。[示例程序](http://blogs.southworks.net/dgeffner/2011/09/26/implementing-complex-case-analysis/)派生并简化了公式，这并不完全是您想要做的，但已经足够接近有用了。

PS.：如果我没记错的话，在给定起始公式的情况下，有多种方法可以在 CNF 或 DNF 中表达相同的公式。您可能希望以某种方式对其进行规范化，以获得始终一致的东西。

# c++ - 如何在一个函数中发送两个请求

> ID：11491702
> 
> 赞同：-1
> 
> 时间：2012-07-15T12:03:32.833
> 
> 标签：c++

```
boost::asio::ip::tcp::iostream stream;
stream.expires_from_now(boost::posix_time::seconds(60));
stream.connect("sitename","http");
    SOME REQUeST
stream.flush();

///////////////// New request to the different  site 

stream.connect("another site","http");
somthink here

stream.flush(); 
```

我想我需要关闭连接，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:11:51.597

您正在寻找`.close ()`流对象的成员函数，关闭流后，您可以自由地将其连接到其他地方。

```
stream.close (); 
```

* * *

### 文档：

*   **[www.boost.org - ip::tcp::iostream - Boost 1.47.0](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/ip__tcp/iostream.html)**
*   **[www.boost.org - basic_socket_iostream::close - Boost 1.47.0](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/reference/basic_socket_iostream/close.html)**

# xcode-storyboard - 在两个视图控制器之间传递数据 - 单击按钮并传递图像

> ID：11491704
> 
> 赞同：0
> 
> 时间：2012-07-15T12:03:37.263
> 
> 标签：xcode-storyboard

我有一个带有几个视图控制器的应用程序（使用情节提要）。我正在尝试将 1 号视图控制器上的按钮的背景图像传递给 2 号视图控制器上的图像视图。

我正在使用 push sague 转移到第二个视图。

我已经阅读了许多关于如何使用 appdelagate 或 prepareforsauge 传递数据的文章，但没有人为我工作。

如果有人可以用 prepareforsague 解释如何做到这一点，我会很高兴！？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:17:40.583

您是否尝试过使用情节提要的模式选项而不是推送。它将推送新的控制器，您不必对其进行硬编码。

# php - Symfony2 日期表单类型：致命错误：在非对象上调用成员函数 setLenient()

> ID：11491711
> 
> 赞同：0
> 
> 时间：2012-07-15T12:04:16.887
> 
> 标签：php, windows, forms, symfony, intl

感谢 IRC 上的 Stof，我现在知道答案了。我只是想分享它，以防有人偶然发现同样的问题。

# 问题

当您有字段类型 datetime 时：

```
/**
 * @ORM\Column(type="datetime", name="released_at")
 */
protected $released_at; 
```

在表单类型中，您使用日期表单类型：

```
$builder
      ->add('released_at', 'date', array(
          'widget' => 'single_text',
          'format' => 'yyyy-MM-dd',
      )); 
```

你得到这个错误：

> 致命错误：在第 64 行的 (...)\vendor\symfony\src\Symfony\Component\Form\Extension\Core\Type\DateType.php 中的非对象上调用成员函数 setLenient()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:04:16.887

# 解决方案是

试试这个测试

```
<?php

$formatter = new \IntlDateFormatter();

if($formatter === null)
  echo 'null!';
else
  echo 'else'; 
```

如果你得到 null，这意味着你的 php / intl 版本是错误的，你需要升级。

就我而言，我正在运行@ Windows 7 64 位机器，Wampserver2 和 PHP 5.3.8。

升级到 PHP 5.3.10 或更高版本就成功了。

此外，如果您得到：

**(..path..)\StubIntlDateFormatter::setLenient() 未实现。请安装“intl”扩展以获得完整的本地化功能。**

升级到 Symfony 2.0.16。

再次干杯，TYVM Stof！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:05:51.557

我有两种配置，每一种都有不同的应用程序：-Windows 7 64 位机器，Wampserver2 和 PHP 5.3.8，使用 composer 安装 Symfony 2.0.15 -Windows 7 64 位机器，Wampserver2 和 PHP 5.3.8，安装 Symfony 2.1-RC1与供应商合作

在第一个配置中，我遇到了错误：

```
Fatal error: Call to a member function format() on a non-object in C:\MyProject\vendor\symfony\src\Symfony\Component\Form\Extension\Core\DataTransformer\DateTimeToLocalizedStringTransformer.php on line 97 
```

在第二个配置中，我遇到了错误：

```
Fatal error: Call to a member function setLenient() on a non-object in C:\MyProjectSf2.1\vendor\symfony\symfony\src\Symfony\Component\Form\Extension\Core\Type\DateType.php on line 81 
```

我使用以下位置提供的文件在我的 WAMP2 安装中仅将 PHP 从 5.3.8 升级到 5.3.13： [http ://www.anindya.com/php-5-4-3-and-php-5-3 -13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/) PHP 5.3.13（线程安全）+ 固定 curl 扩展

它解决了两个应用程序的问题！

非常感谢 Anindya 提供 64 位编译版本的 PHP DLL，我在其他任何地方都没有找到其他 64 位版本！（据我所见（我使用 Beyond Compare 比较了版本），这是我拥有的 Wamp2 版本中包含的他的 5.3.8 64 位线程安全版本；）

最好的问候，克里斯托夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T14:09:08.193

如果您的 php.ini 中没有正确的参数，则会发生这种情况...检查您的 php.ini 中的时区是否正确配置为“欧洲/布鲁塞尔”（区分大小写）

# eclipse - 如何在 Eclipse IDE 中创建快捷方式

> ID：11491721
> 
> 赞同：0
> 
> 时间：2012-07-15T12:04:57.230
> 
> 标签：eclipse, ide, eclipse-plugin, shortcut

我想使用快捷方式将光标移动到下一行或上一行。我在 Preferences->General->Keys 中找不到这个命令。

有没有可以做到这一点的插件？还是我必须为此开发自己的插件？如果我必须开发它，我应该使用哪个扩展点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:12:26.673

如果我正确理解了您的问题，那么您应该能够为向上箭头和向下箭头键设置 Eclipse 键映射。

搜索“排队”，你会看到

```
Line Up
Scroll Line Up
Select Line Up 
```

这些应该已经映射到向上/向下箭头和 Shift Up/Down Arrow，但如果没有（eclipse 不时会弄乱键盘映射），您可以将它们添加回来或按照您想要的方式设置它们。

# iphone - 用户更改 App Store 时是否有通知？

> ID：11491723
> 
> 赞同：0
> 
> 时间：2012-07-15T12:05:03.050
> 
> 标签：iphone, ios

我正在测试应用内购买，并且一直在法国、英国和澳大利亚的应用商店之间进行测试。我知道这是一个边缘案例，但我希望能够在用户像我一样更换商店时更新屏幕上的购买价格。是否有此通知，或者我是否必须轮询产品的 priceLocal 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:41:33.783

无论如何，您不应该对价格进行硬编码。使用产品当地价格。如果苹果改变了价格等级，或者汇率发生了巨大变化并且苹果改变了地区价格，那么你的应用程序中的价格就会错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T14:13:48.520

应该可以在属性上注册一个观察者，就像在所有其他属性上一样`addObserver:forKeyPath:`。

# matlab - 在 MATLAB 中设置相机矩阵

> ID：11491728
> 
> 赞同：1
> 
> 时间：2012-07-15T12:05:41.277
> 
> 标签：matlab, matrix, camera, camera-matrix

是否可以在 MATLAB 中设置相机视图和投影矩阵？“视图矩阵”是指相机在空间中的位置和方向（实际上是它的倒数，但这只是一个细节），“投影矩阵”是指将 3D 点投影到 2D 屏幕的矩阵坐标（正交或透视）。在我看来，在 MATLAB 中，您只能通过使用“低级相机属性”来控制相机：http: [//www.mathworks.com/help/techdoc/visualize/f4-44406.html](http://www.mathworks.com/help/techdoc/visualize/f4-44406.html) 这对于我想自己设置矩阵，因为它是在 OpenGL/DirectX/etc 中完成的。

# knockout.js - 在 computedObservable 中更新 observableArray 会创建循环引用？

> ID：11491732
> 
> 赞同：0
> 
> 时间：2012-07-15T12:06:14.953
> 
> 标签：knockout.js

我创建了一个视图模型对象以用于 KnockoutJS。

它有一个名为“Years”的属性，它是一个可观察的数组......

```
viewModel.Years = ko.observableArray([]); 
```

然后我有一个计算的 observable，我想在其中更新数组的内容......

```
viewModel.FuturePrediction = ko.computed(function () {
    viewModel.Years.removeAll();

    // etc...
}); 
```

我遇到的问题是这似乎创建了一个无限循环。我*猜*Knockout 正在检测我正在访问“Years”属性并在它和“FuturePrediction”属性之间创建依赖关系。

一旦我尝试修改数组的内容，计算函数就会再次被触发。问题是我所做的只是更新 'Years' 数组，而不是读取它 - 因此*实际上没有依赖关系*。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:05:34.987

在 KO 2.1 中，计算出的 observables 不能自行触发，因此使用 2.1 会更好。

调用数组操作方法会读取和设置数组，因此它会创建一个依赖项。`viewModel.Years([]);`只要您不依赖原始底层数组（在其他地方引用它），您就可以这样做。

我不确定您的完整方案，但一个选项是建立您的“新”数组，然后最终将结果设置为值`Years`而不是先清除它。

像：

```
viewModel.FuturePrediction = ko.computed(function () {
    var result = [];
    //add things to result

    viewModel.Years(result);
}); 
```

同样，我不确定您的确切情况，但如果最终目标是根据某些标准创建一个新数组，那么您可能`FuturePrediction`是该数组并将其作为计算的 observable 的结果返回。只是不确定你的具体情况。

# google-apps-script - 如何通过 google ID 对用户进行身份验证以使用 sites.google.com/mysite 上的脚本小工具？

> ID：11491734
> 
> 赞同：0
> 
> 时间：2012-07-15T12:06:22.810
> 
> 标签：google-apps-script, google-sites

我想使用谷歌网站托管我的网页。该页面将包含谷歌脚本的小工具。我想请求用户使用 google id 登录并在我的脚本中使用用户信息。

你知道如何实现这个目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:38:45.387

如果您发布脚本以使其作为“执行 Web 应用程序的用户”执行并且可供“任何人”使用，那么您将获得这种行为，无需进一步工作。

# jquery - Firefox 和 Opera 中的滚动条

> ID：11491735
> 
> 赞同：-2
> 
> 时间：2012-07-15T12:06:26.623
> 
> 标签：jquery, css, scroll

我有一个与滚动条有关的小问题。问题是我在一个容器中有一组盒子。所有内容都固定为容器的最大宽度，一旦容器内的元素数量增加，overflow-y 属性就会开始工作。

在 Firefox 和 Opera 中，（我在 IE 中不知道）滚动条的宽度出现并破坏了我的布局，从三列变为两列。

这里我有代码：http: [//jsfiddle.net/domoindal/ChkRg/](http://jsfiddle.net/domoindal/ChkRg/)

如果您在 Chrome 和 Safari 中运行它，它可以正常工作，因为滚动条会出现在内容上方，但在 Firefox 和 Opera 中则不会。

有什么办法可以在引用的浏览器中避免这种影响？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:28:06.193

我想我理解你的问题，虽然我很惊讶它在 Chrome 中工作，因为它对我不起作用。（也使用 Chrome）我的第一个想法是增加宽度，这样滚动条就会有足够的空间。如果内容变得太高，您可以使用 javascript 检测，然后调整大小。

# ajax - All-js 或框架的初始标记

> ID：11491737
> 
> 赞同：0
> 
> 时间：2012-07-15T12:06:55.200
> 
> 标签：ajax, asp.net-mvc, razor, knockout.js

自从我开始 asp.net mvc 开发以来，我的经验几乎是 80% 的 jQuery，只有 20% 的 C#。

现在我开始使用 Knockout.js 来让自己更好地控制页面上的视图。

我现在面临的问题是：我应该向浏览器提供“sceleton 标记页面”并通过 ajax 调用加载所有数据，这反过来会填充 js viewmodel 对象和视图，还是应该最初通过部分填充数据查看，并使用js页面数据管理进行后续客户端体验？

现在我正在做后者，但这需要我编写两个数据检索/显示逻辑 - 一个在 js 中，一个在 mvc razor 视图中。

我不打算支持禁用 js 的浏览器，所以也许我应该通过 js 淘汰视图模型初始化来做所有事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:54:36.777

还有许多额外的变量。

1.  您的应用将来应该每秒处理多少个请求？如果很多，那么通过生成整页，也许您可​​以缓存生成的网页，从而减少服务器上的负载。
2.  你有什么样的客户？如果它们很慢（如低成本手机），那么在客户端生成完整的 HTML 可能会很慢。
3.  您的客户是否喜欢慢速网络的快速响应？通过完整的服务器页面生成，您可以实现更少的请求和更快的响应。

另一方面，如果这是一个内部部门级别的业务应用程序，具有良好的网络、较少的请求和良好的客户端计算机，那么您肯定可以使用最少的初始页面并使用 AJAX 填充所有内容。此外，正如 Arbiter 所指出的，JSON 的大小可以比 HTML 小，因此如果您有大量数据，则可以通过 JSON 保存在网络上。

还有中间的第三种方式。您可以生成 JSON 数据并将它们直接嵌入网页中（如`<script>CallMyJSGenerateMethod({generatedJSON: "goes here"})</script>`）。这样，您将只有一个 (JavaScript) 程序用于 HTML 生成、少量请求（数据量更少）和缓存网页的能力。不过，你必须有一个好的客户，所以第 2 点仍然成立。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T18:15:27.610

这更像是一种观点，但据我估计，这是我在构建 Web 应用程序时遇到的最常见问题：我是在服务器上使用 HTML/MVC 构建页面还是使用所有 JS？这里没有适合所有情况的明确正确答案。两者都是很好的选择。德米特里的观点也都是有效的。

其他需要考虑的事情是您是否需要在服务器上坚持使用 ASP.NET，或者是否将使用其他服务器技术（PHP？）。你的开发团队有什么技能？您正在创建的页面会在客户端发生很大变化，还是相对静态？

我个人倾向于客户端空间而不是服务器端生成，但这主要是一种偏好。

# c++ - 如何有效地存储非常大的图空间并具有快速索引？

> ID：11491742
> 
> 赞同：2
> 
> 时间：2012-07-15T12:07:32.207
> 
> 标签：c++, data-structures, graph

我正在使用`875713 nodes`和绘制图表`5105039 edges`。使用`vector<bitset<875713>> vec(875713)`或`array<bitset<875713>, 875713>`向我抛出段错误。我需要通过路径恢复计算所有对最短路径。我有哪些替代数据结构？

我找到了这个[SO Thread](https://stackoverflow.com/questions/10799659/suitable-data-structure-for-large-graphs)，但它没有回答我的查询。

编辑

我在阅读建议后尝试了这个，似乎有效。感谢大家帮助我。

```
vector<vector<uint>> neighboursOf; // An edge between i and j exists if
                                   // neighboursOf[i] contains j
neighboursOf.resize(nodeCount);

while (input.good())
{
    uint fromNodeId = 0;
    uint toNodeId = 0;

    getline(input, line);

    // Skip comments in the input file
    if (line.size() > 0 && line[0] == '#')
        continue;
    else
    {
        // Each line is of the format "<fromNodeId> [TAB] <toNodeId>"
        sscanf(line.c_str(), "%d\t%d", &fromNodeId, &toNodeId);

        // Store the edge
        neighboursOf[fromNodeId].push_back(toNodeId);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T12:29:24.150

您的图是稀疏的，即`|E| << |V|^2`，因此您可能应该使用稀疏矩阵来表示您的邻接矩阵，或者等效地为每个节点存储其邻居列表（这会导致锯齿状数组），如下所示 -

```
vector<vector<int> > V (number_of_nodes);
// For each cell of V, which is a vector itself, push only the indices of adjacent nodes.
V[0].push_back(2);   // Node number 2 is a neighbor of node number 0
...
V[number_of_nodes-1].push_back(...); 
```

这样，您的预期内存需求将`O(|E| + |V|)`代替`O(|V|^2)`，在您的情况下应该是 50 MB 左右，而不是数十亿 MB。

这也将导致更快的 Dijkstra（或任何其他最短路径算法），因为您只需要在每个步骤中考虑节点的邻居。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T13:51:36.867

您可以将每个节点的边列表存储在单个数组中。如果每个节点的边数是可变的，您可以用空边终止列表。这将避免许多小列表（或类似数据结构）的空间开销。结果可能如下所示：

```
enum {
    MAX_NODES = 875713,
    MAX_EDGES = 5105039,
};

int nodes[MAX_NODES+1];         // contains index into array edges[].
                                // index zero is reserved as null node
                                // to terminate lists.

int edges[MAX_EDGES+MAX_NODES]; // contains null terminated lists of edges.
                                // each edge occupies a single entry in the
                                // array. each list ends with a null node.
                                // there are MAX_EDGES entries and MAX_NODES
                                // lists.

[...]

/* find edges for node */
int node, edge, edge_index;
for (edge_index=nodes[node]; edges[edge_index]; edge_index++) {
    edge = edges[edge_index];
    /* do something with edge... */
} 
```

最小化空间开销非常重要，因为您拥有大量的小型数据结构。每个节点列表的开销只是一个整数，这比例如 stl 向量的开销要小得多。此外，列表在内存中连续布局，这意味着任何两个列表之间都不会浪费空间。对于可变大小的向量，情况并非如此。

读取任何给定节点的所有边将非常快，因为任何节点的边都连续存储在内存中。

这种数据排列的缺点是，当您初始化数组并构造边列表时，您需要手头有一个节点的所有边。如果您按节点对边进行排序，这不是问题，但如果边按随机顺序排列，则效果不佳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-15T12:38:03.877

如果我们声明一个节点如下：

```
struct{
int node_id;
vector<int> edges; //all the edges starts from this Node.
} Node; 
```

那么所有的节点可以表示如下：

```
array<Node> nodes; 
```

# php - 如何构建 php 可触发服务

> ID：11491743
> 
> 赞同：0
> 
> 时间：2012-07-15T12:07:34.723
> 
> 标签：php, xmlhttprequest, webserver

我使用 xampp php apache 服务器

我不能

1.  退出后继续php
2.  退出前向客户端发送响应
3.  http请求与资源共享同步

我想

1.  将 php 作为服务运行，php 可以在没有连接到客户端的情况下运行
2.  客户端可以使用http请求触发php执行
3.  php（连续或触发）对资源具有完全访问权限
4.  php 可以在响应时将数据从资源发送到客户端

有什么办法可以做这些事情，或者我应该尝试查看任何其他服务器还是套接字编程是唯一的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:11:53.670

这……有点复杂。

> 我想
> 
> ```
> run php as service where php may run without being connected to client
> php execution can be triggered using http request by client
> php (continuous or triggered) have full access to the resources
> php can send the data from the resources to the client on response 
> ```

第一件事很容易实现。只需将 PHP 作为命令行安装，然后在无限循环中运行它（命令行没有过期时间），或者更适合您的需要，作为 crontab 服务。有几个实用程序可以实现这一点；他们要么每 X 秒运行一次脚本，要么在脚本终止后立即重新启动它。

如果脚本以某种方式（例如通过数据库）检查它是否有“工作要做”，那么您的目标 2 也可以实现：HTTP Web 客户端脚本只需在数据库中插入详细信息，就好像主运行脚本已由 Web 服务器启动。实际发生的是，主脚本通常会立即终止（可能会休眠几秒钟，以免服务器过载），但下次运行时，它会找到工作并执行。

然后，您可以通过以更多权限运行主脚本来实现您的目标 3。用户脚本不能“访问所有资源”，但可以谦虚地请求数据，主脚本（更安全）可能会慷慨地允许读取这些数据 - 并将其写入客户端可能获得的数据库（或文件系统）它。

最后，您的目标 4 可以通过读取数据并将它们提供给客户端脚本的客户端浏览器来实现。

示例工作流程：

```
- 15:55:00 The master script runs. SELECT worktodo FROM thingstodo returns nothing
- 15:56:00 The master script runs. SELECT worktodo FROM thingstodo returns nothing
- 15:56:17 The client runs; it is a request for data from serial port.
- 15:56:17 The request is stored in the DB and gets ID 12345 and status "WAITING" 
```

**假设一** - 15:56:18 客户端在写入“Work has been queued, please wait”后终止，并发送一个 HTTP 头循环回自身：

```
 Location: http://mylocation/script.php?check=12345 
```

**假设二** - 15:56:19 客户等待，比如说，十秒钟，以防万一，每秒运行一次检查，看看工作是否完成。如果是，则按照 15:17:35 进行；else 与假设一一样，说“我会回来”，并以 Location 标头而死。- 15:56:20 客户端脚本，多亏了 Location 标头，重新加载了 check=12345。它与数据库连接，看到 12345 的状态未完成，显示“正在工作...”动画，等待五秒钟，然后再次死亡，并显示 Location: 。

```
- 15:57:00 The master script gets awakened and finds there is one job in WAITING status; updates it in LOCKED status and places its own IP and PID in the proper fields, then decodes the work details, sees what needs to be done and does it.
- 15:57:33 The work is done and the row gets updated again; now STATUS=COMPLETED
- 15:57:35 Meanwhile the client gets called again, but this time it finds COMPLETED, so happily fetches the data and shows it to the customer, also deleting the row not to clutter the DB. 
```

其他可能性： - 主脚本，找到填写在工作行中的电子邮件字段，向用户发送带有适当链接的电子邮件。- 主脚本实际上大部分时间都在休眠，绑定到端口 XYZ 上的套接字，客户端脚本在需要做某事时“唤醒”它。这减少了请求和回答之间的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:17:36.700

> 将 php 作为服务运行，php 可以在没有连接到客户端的情况下运行

您可以使用 cron 任务运行 PHP 脚本

# android - 从 1.4.1 更新到 1.9.0 后，Phonegap 应用程序在启动时意外崩溃

> ID：11491748
> 
> 赞同：2
> 
> 时间：2012-07-15T12:09:31.643
> 
> 标签：android, eclipse, cordova

我刚刚从我的档案中挖掘了一个大概 3 个月大的 Phonegap（适用于 Android）项目。由于我在声音 API 上总是遇到一些小问题（声音播放两次或没有停止 - 其余的工作都很好）我认为更新到最新版本的 Phonegap / 现在是 Cordova 可能是个好主意，目前是 1.9。 0。不幸的是，该应用程序现在在我可以测试的所有设备（虚拟和真实手机）中启动时崩溃（告诉我它被迫在警报框中意外停止）。

我想我可能在更新过程中忘记了一些东西，所以我只列出我在更新过程中实际做了什么：

*   将 JAR 文件替换为 1.9.0
*   将 JS 库替换为 1.9.0（并替换了`index.html`
*   编辑我`AndroidManifest.xml`以匹配**[此页面](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)**
*   将`plugins.xml`内容替换为新版本
*   用新的替换文件夹中`phonegap.xml`的`res``cordova.xml`
*   更改了主`AppActivity.java`文件中的导入
*   更新了 Eclipse 中的所有 SDK 包

不知何故，这似乎还不够。

我只是错过了一些仍然需要完成的事情，还是我在我的应用程序中正在做的事情有问题？除了播放声音之外，我没有使用任何 Cordova API。

`minSdkVersion`顺便说一句，是 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T15:11:05.653

好的，所以对我来说，诀窍（有点）是在 Eclipse 中创建一个新项目，以完全相同的方式进行设置，然后将我的`www`文件夹合并到新项目中。

这两个项目看起来完全一样，但主只知道我可能错过了一些东西。如果有人对此仍有意见，请不要犹豫分享！

# java - 无法从类型二中对非静态方法 fxn(int) 进行静态引用

> ID：11491750
> 
> 赞同：39
> 
> 时间：2012-07-15T12:09:41.703
> 
> 标签：java

> **可能重复：**
> [“不能从静态上下文引用非静态方法”背后的原因是什么？](https://stackoverflow.com/questions/290884/what-is-the-reason-behind-non-static-method-cannot-be-referenced-from-a-static)
> [无法对非静态方法](https://stackoverflow.com/questions/4969171/cannot-make-a-static-reference-to-the-non-static-method)
> [进行静态引用 无法对非静态字段进行静态引用](https://stackoverflow.com/questions/8101585/cannot-make-a-static-reference-to-the-non-static-field)

我无法理解我的代码有什么问题。

```
class Two {
    public static void main(String[] args) {
        int x = 0;

        System.out.println("x = " + x);
        x = fxn(x);
        System.out.println("x = " + x);
    }

    int fxn(int y) {
        y = 5;
        return y;
    }
} 
```

线程“main”java.lang.Error 中的异常：未解决的编译问题：无法从类型二中对非静态方法 fxn(int) 进行静态引用

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-15T12:14:26.027

既然`main`方法是`static`和`fxn()`方法不是，你不能在没有先创建`Two`对象的情况下调用方法。因此，要么将方法更改为：

```
public static int fxn(int y) {
    y = 5;
    return y;
} 
```

或将代码更改`main`为：

```
Two two = new Two();
x = two.fxn(x); 
```

`static`在[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)中阅读更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T12:14:07.027

您无法访问 fxn 方法，因为它不是静态的。静态方法只能直接访问其他静态方法。如果您想在 main 方法中使用 fxn，您需要：

```
...
Two two = new Two();
x = two.fxn(x)
... 
```

也就是说，创建一个 Two-Object 并调用该对象的方法。

...或使 fxn 方法静态。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-15T12:18:13.390

您不能从静态方法中引用非静态成员。

非静态成员（如您的 fxn(int y)）只能从您的类的实例中调用。

例子：

你可以这样做：

```
 public class A
       {
           public   int fxn(int y) {
              y = 5;
              return y;
          }
       }

  class Two {
public static void main(String[] args) {
    int x = 0;
    A a = new A();
    System.out.println("x = " + x);
    x = a.fxn(x);
    System.out.println("x = " + x);
} 
```

或者你可以将你的方法声明为静态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:17:15.297

1.  静态方法**不能**访问**非静态方法或变量****。**

*****   `public static void main(String[] args)`是一个静态方法，所以**不能**访问非静态`public static int fxn(int y)`方法。

    *   试试这个方法...

    静态 int fxn(int y)

    ```
    public class Two {

        public static void main(String[] args) {
            int x = 0;

            System.out.println("x = " + x);
            x = fxn(x);
            System.out.println("x = " + x);
        }

        static int fxn(int y) {
            y = 5;
            return y;
        } 
    ```

    }****

# entity-framework - 代码优先建模关系

> ID：11491752
> 
> 赞同：0
> 
> 时间：2012-07-15T12:09:58.467
> 
> 标签：entity-framework, ef-code-first, code-first

我正在尝试在代码优先 EF 中对此进行建模。一场比赛可以特定于一个国家（例如，本地联赛，这也意味着一个大洲），仅一个大洲（例如欧洲杯），或者两者都不是（例如世界杯）

我有一门比赛，国家和大陆的课程。国家和大陆之间存在一对多的关系。我如何为比赛建模？这似乎不正确

```
public class Competition{
 public int CompetitionID { get; set; }
 public int Name { get; set; }
 public virtual ICollection<Season> Seasons { get; set; }
 public Country? Country { get; set; }
 public Continent? Continent { get; set;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:15:28.937

比赛和国家/大陆之间存在多对多的关系，因此您的比赛类应该有一个名为 zoneID 的属性（可以是国家或大陆）

# nosql - 具有磁盘持久性的类似 memcached 的软件

> ID：11491753
> 
> 赞同：2
> 
> 时间：2012-07-15T12:10:09.000
> 
> 标签：nosql, memcached, couchdb, redis, ehcache

我有一个在 Ubuntu Linux 12.04 上运行的应用程序，它需要存储和检索大量大型序列化对象。目前，存储是通过简单地将序列化流保存为文件来实现的，其中文件名等于序列化对象的 md5 哈希。但是，我想加快将文件存储替换为对最近读/写的对象进行内存缓存的文件存储的速度，并且最好为我进行哈希处理。

我的应用程序的设计不应该变得更复杂。因此，最好是一个存储后端，它以抽象和有效的方式管理键值数据库和缓存。我对那里的所有键/值存储有点迷茫，而且许多主题/信息似乎已经过时了。我最初是在寻找类似 memcached+membase 的东西，但也许有更好的解决方案。我查看了 redis、mongodb、couchdb，但我不太清楚它们是否符合我的需求。

我最重要的要求：

*   通过将最近写入/读取的对象自动缓存在内存中，可以快速获得最近写入/读取的对象，从而透明地保存到持久存储中。
*   商店应该在重新启动后仍然存在。因此，内存中的对象应尽快保存在磁盘上。
*   目前我正在手动计算 md5。如果后端为我这样做，实际上会更好。因此能够在存储对象时获取散列键，并能够在以后使用散列键检索对象。
*   最大的优点是，如果有适用于 Ubuntu 12.04 的软件包，无论是在宇宙中还是通过启动板或其他方式。
*   除此之外，该软件最好应该是轻量级的，而不是比必要的更复杂（我不需要分布式 map-reduce 作业等）

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:23:00.190

我通常会建议使用 Redis，因为它会快速且在内存中使用异步持久存储。另外，您会发现您可以将它们的不同数据类型用于其他目的，而不是像 memcached 那样单一用途。就自动散列而言，我认为它不会这样做，因为您在存储对象时定义自己的键（就像在大多数对象中一样）。

Redis 的一个缺点是，如果您要存储大量二进制对象，您将被限制为 RAM 中的可用内存（除非分片），因此可能会达到性能限制。在这种情况下，您可以将对象存储在文件系统上，对它们进行哈希处理，并将密钥存储在 Redis 中，并将其与存储在文件服务器上的文件名匹配，这样就可以了。

--

另一种选择是查看 ElasticSearch，它与 Mongo 类似，将本机对象存储为 JSON，但它在顶部包含 Lucene 搜索引擎和 RESTful API 接口。它“预热”内存中的数据以实现快速响应，但它也是一个持久存储，最好的部分是它使用多播自动分片和自动集群来查找其他节点。

--

希望对您有所帮助，如果有，请分享爱！;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T18:32:43.293

我会看看`MongoDB`。它使用您的操作系统有效地缓存内容以将数据分页进出，并且设置起来非常简单。Redis 和 Memcached 对您来说不是很好的解决方案，因为它们将所有内容都保存在 RAM 中。其他更简单的解决方案，如 LevelDB 或 BDB 也可能是合适的。我认为任何数据库都不会为您自动计算哈希值。听起来你已经有了这个的代码。

# c# - 在同步 b/w 两个 sql server 2005 db 时解决标识列主键冲突

> ID：11491759
> 
> 赞同：2
> 
> 时间：2012-07-15T12:10:43.680
> 
> 标签：c#, sql-server-2005, sql-server-express, microsoft-sync-framework

我有两个 sql server 2005 数据库 -`ParentDB`和`ChildDB`，我想使用同步框架 2.1
`ParentDB`在服务器上和`ChildDB`客户端 m/c 上同步它们。有很多表，`ParentDB`但很少有表`ChildDB`，可以说，一个`Customer`表在两个数据库之间是通用的`Id (column)`，主键设置为自动增量，我想同步这个表，我使用下面的 msdn[示例](http://msdn.microsoft.com/en-us/library/ff928700.aspx)中给出的方法。这种方法有效，除非我只从服务器下载或上传到服务器。

让我们来看一个场景：
1\. 服务器表上有一行 Id=52
2\. 两个数据库是同步的
3\. 现在在Id=53`ParentDB`的表中插入一行 4\. 同时插入另一行Id=53 的表（因为两个表都有自动增量） 现在，当我同步两个表时，两行中的任何一个都会被覆盖，具体取决于同步的方向。 我想要的是经过调整，并且保留了两行， `Customer`
`ChildDB``Customer`

`Id`

我应该怎么做才能解决这种冲突，如果可能，请提供伪代码。
PS：我希望当我们考虑外键约束时，场景会变得更加复杂。
提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:17:52.273

不建议在同步环境中使用身份列作为 PK（甚至不使用 Sync Framework）（请参阅[为分布式环境选择适当的主键，](http://msdn.microsoft.com/en-us/library/bb726011.aspx)原因与您已经发现的相同。

如果您可以更改架构，我建议您使用不同的 PK（Guid 或 Int + ClientId）

# sql - 无法访问 ActiveRecord::Relation

> ID：11491764
> 
> 赞同：1
> 
> 时间：2012-07-15T12:11:25.923
> 
> 标签：sql, ruby-on-rails-3, join, scope

我的`Answer`模型中有这个范围

```
scope :court, where(joins(:case)) 
```

当我在控制台中使用范围时，出现此错误

```
> Answer.court
   (0.3ms)  SELECT COUNT(*) FROM `answers` INNER JOIN `cases` ON `cases`.`answer_id` = `answers`.`id`
TypeError: Cannot visit ActiveRecord::Relation 
```

那么这个错误的真正含义是什么？尽管 SQL 查询是正确的，但范围语法是否错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T14:01:13.973

范围应定义为

```
scope :court, joins(:case) 
```

# ms-access - 访问 - 从查找值中排除第一列

> ID：11491765
> 
> 赞同：0
> 
> 时间：2012-07-15T12:11:29.450
> 
> 标签：ms-access, lookup

我有这个数据库，字段的查找设置为组合框，“绑定列”为 2，“列数”为 2。我的行源的第一列是 ID（自动编号），第二列是名称（文本）。当我转到数据表视图并选择一个值时，它会显示 ID 列值。

如何使其显示名称列值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T14:23:34.813

有两种基本方法可以手动实现此目的。这与更新组合框的属性有关。特定属性列在数据或格式下。

将 ID 作为第一列返回，将列数设置为 2，将数据绑定到第 1 列，并定义第一个宽度 = 0 的列宽。类似于 0";2" 这种方式在技术上显示两列，但是第一个宽度为 0。

或者我的偏好

返回 ID 作为第二列。将列数设置为 1 并将值绑定到第 2 列。这样做只会显示第一列，但第二列将是值。我更喜欢这种方法的原因是您可以让 Access 确定下拉列的大小而不是定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:33:18.723

我只是以一种方式管理它。在设计视图中，从您的字段（带有查找组合框的字段）的下拉列表中选择查找向导。然后通过向导，就是这样。但是，我不确定向导如何解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-28T02:19:02.920

选择column1,column2,column1(再次) Set width = 0.01;.5;.5 column1 是不可见的，但是是你在你的字段中想要的值

# android - 与Android中的数据库相关的应用程序升级相关的问题

> ID：11491766
> 
> 赞同：-1
> 
> 时间：2012-07-15T12:11:50.340
> 
> 标签：android, apk

当我修改数据库并升级手机中的现有应用程序时，数据库不会被覆盖，这会使我的应用程序崩溃。如何在安装APK文件时告诉手机删除数据库并添加新的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:40:29.753

您是否尝试增加传递给`SQLiteOpenHelper`构造函数的版本号。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

# relational-algebra - 自然连接是否分布在集合差异上？

> ID：11491770
> 
> 赞同：3
> 
> 时间：2012-07-15T12:12:14.427
> 
> 标签：relational-algebra, natural-join

换句话说，是不是真的： r1 ⋈ (r2 - r3) = r1 ⋈ r2 - r1 ⋈ r3

其中 r1 r2 和 r3 是关系

如果不是，例子是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T21:20:22.703

是的。

取一个元组 t，具有 JOIN 的所有属性。设 t1 为其“R1”部分。让 t2 成为它的“R2”部分（并且由于 R2-R3 是一个有效的表达式，它也是 t 的“R3”部分）。

元组 t 出现在 R1 JOIN (R2 MINUS R3) 当且仅当：

t1 出现在 R1 中，**并且**t2 出现在 R2 中，**并且**t2 没有出现在 R3 中。

元组 t 出现在 (R1 JOIN R2) MINUS (R1 JOIN R3) 当且仅当：

t1 出现在 R1 中，**并且**t2 出现在 R2 中，并且（不是这种情况）（t1 出现在 R1 中，**并且**t2 出现在 R3 中）。

由于 t1 必须出现在 R1 中，这减少为：

t1 出现在 R1 中，**AND** t2 出现在 R2 中，并且 NOT（真**AND** t2 出现在 R3 中）。
t1 出现在 R1 中，**并且**t2 出现在 R2 中，并且 NOT（t2 出现在 R3 中）。

与第一种情况比较，观察条件相同。

证明属性的另一种方法是观察比 (R2 MINUS R3) 等价于 (R2 INTERSECT CMP(R3))，其中 CMP(R3) 表示 R3 的补码（关于其类型的全称关系），并且然后应用 JOIN OVER INTERSECTION 的分布性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:37:21.800

我对所提出的问题没有答案，但即使这是真的，我也不相信等价是对称的。考虑

```
r1 = (a1, a2)
r2 = (a1, a2, a3)
r3 = (a2, a3) 
```

then`r1 ⋈ r2 - r1 ⋈ r3`是可能的，因为每个操作数都是联合兼容的，而`r2 - r3`不是。

# youtube - 如何在 Windows8 html/javascript 应用程序中播放 YouTube 视频？

> ID：11491774
> 
> 赞同：3
> 
> 时间：2012-07-15T12:12:41.097
> 
> 标签：youtube, windows-8

如何在 Windows 8 html/javascript 应用程序中播放 YouTube 视频？我有剪辑的 ID，我只想播放它。也许通过 html5 的视频标签？

我已经尝试过 iframe api，但未能使其正常工作。我也尝试了 javascript api，但它无法从另一个位置加载 javascript。

任何有关该主题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:58:13.977

我为 Windows Phone 开发了一个 YouTube 类，它可以获取 YouTube 电影的 MP4 链接。也许您可以使用此代码并使用 MP4 链接启动视频应用程序或设置媒体元素的来源（如果在 Win8 中存在）？

如果有办法使用预定义的 MP4-URL 启动视频应用程序，我可以为 Windows 8 重写代码。

[http://mytoolkit.codeplex.com/wikipage?title=YouTube](http://mytoolkit.codeplex.com/wikipage?title=YouTube)

**更新：**我已经更新了代码。现在只需使用此异步方法加载 URL：

```
var url = await YouTube.GetVideoUriAsync("youtube_id");
myMediaElement.Source = url.Uri; 
```

`myMediaElement`是一个 XAML`MediaElement`控件。

从项目的 Subversion 存储库中查看整个库：http: [//mytoolkit.codeplex.com](http://mytoolkit.codeplex.com)

**更新：**对不起，它只是 C#，你必须将它移植到 Javascript...

# java - JSF 页面中的 java.lang.NumberFormatException

> ID：11491780
> 
> 赞同：1
> 
> 时间：2012-07-15T12:13:44.537
> 
> 标签：java, jsf, jsf-2

我有一个要在 JSF 页面中显示的用户组列表：

```
<h:panelGroup>
    <h:selectOneMenu value="#{AddAccountController.formMap['GROUPID']}">
        <f:selectItem itemValue="#{null}" itemLabel="-- select one --" />
        <f:selectItems value="#{AddAccountController.usergroups.groupid}" itemValue="#{AddAccountController.usergroups.groupname}" />
    </h:selectOneMenu>
</h:panelGroup> 
```

这是生成列表的托管 bean 代码：

```
private List<listGroupsObj> usergroups = new ArrayList<>();
......
public void initListGroups() throws SQLException {

        if (ds == null) {
            throw new SQLException("Can't get data source");
        }
        /* Initialize a connection to Oracle */
        Connection conn = ds.getConnection();

        if (conn == null) {
            throw new SQLException("Can't get database connection");
        }
        /* With SQL statement get all settings and values */
        PreparedStatement ps = conn.prepareStatement("SELECT * from USERGROUPS");

        try {
            //get data from database        
            ResultSet result = ps.executeQuery();
            while (result.next()) {
                /* Put the the data from Oracle into Hash Map */                
                usergroups.add(new listGroupsObj(result.getInt("GROUPID"), result.getString("GROUPNAME")));

            }
        } finally {
            ps.close();
            conn.close();
        }
    } 

    public class listGroupsObj {
        private int groupid;
        private String groupname;

        public listGroupsObj(int groupid, String groupname){
            this.groupid = groupid;
            this.groupname = groupname;           
        }

        public int getGroupid()
        {
            return groupid;
        }   

        public void setGroupid(int groupid)
        {
            this.groupid = groupid;
        }

        public String getGroupname()
        {
            return groupname;
        }

        public void setGroupname(String groupname)
        {
            this.groupname = groupname;
        }
        @Override
        public String toString()
        {
            return groupname;
        }
    }

    // Get the list with User Groups
    public List<listGroupsObj> getusergroups() {       
        return usergroups;
    } 
```

当我打开 JSF 页面时，我收到此错误：

```
java.lang.NumberFormatException: For input string: "groupid"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:492)
    at java.lang.Integer.parseInt(Integer.java:527) 
```

似乎我无法在选择菜单中显示整数。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:20:56.667

对于`<f:selectItems>`标签，`value`属性必须代表所有可用项目的列表。( `itemValue`and `itemLabel`) 属性只能在`var`指定属性时使用，该属性表示列表中的每个单独项目。

您的特定问题是因为您使用了

```
<f:selectItems value="#{AddAccountController.usergroups.groupid}" /> 
```

这在语法上是无效的。`#{AddAccountController.usergroups}`返回的 a只能`List`通过整数索引进一步访问，例如`#{AddAccountController.usergroups[0]}`第一项。但是您尝试使用`groupid`which 不是有效的索引值，因为它不是`Integer`. 但是您不应该以这种方式访问​​它。

这是正确的用法：

```
<f:selectItems value="#{AddAccountController.usergroups}" var="usergroup"
    itemValue="#{usergroup.groupid}" itemLabel="#{usergroup.groupname}" /> 
```

### 也可以看看：

*   [我们的`h:selectOneMenu`维基页面](https://stackoverflow.com/tags/selectonemenu/info)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:16:49.980

它试图与`groupId`bean 的`int` `groupId`字段绑定，这是无效的

# java - JVM 中的字符值表示

> ID：11491781
> 
> 赞同：2
> 
> 时间：2012-07-15T12:13:45.223
> 
> 标签：java, unicode, character-encoding, character

char 值在 JVM 中是如何表示的？比方说

```
char ch = 'c'; 
```

**ch**的值在 JVM 中如何表示为**16 位无符号整数？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T12:16:20.630

^(**太长; 没读过；**)^(**1**) ^. ^(java 中的字符使用 UTF-16) ^(**2**)^(表示。)^(顾名思义，一个 char 的大小为 16 位)^(**3**)^。^(a 的默认值为)^(0。)
 ****^(      **`char`**)****

 ******* * *

引用关于s的[Java 文档：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Character.html)`char`

> ### Unicode 字符表示
> 
> char 数据类型（以及因此 Character 对象封装的值）基于原始 Unicode 规范，该规范将字符定义为固定宽度的 16 位实体。此后，Unicode 标准已更改为允许表示需要超过 16 位的字符。合法代码点的范围现在是 U+0000 到 U+10FFFF，称为 Unicode 标量值。（参考 Unicode 标准中 U+n 符号的定义。）
> 
> 从 U+0000 到 U+FFFF 的字符集有时称为基本多语言平面 (BMP)。码位大于 U+FFFF 的字符称为补充字符。Java 2 平台在 char 数组以及 String 和 StringBuffer 类中**使用 UTF-16 表示。**在此表示中，补充字符表示为一对 char 值，第一个来自高代理范围 (\uD800-\uDBFF)，第二个来自低代理范围 (\uDC00-\uDFFF)。
> 
> 因此，char 值表示基本多语言平面 (BMP) 代码点，包括代理代码点或**UTF-16 编码的代码单元**。一个 int 值表示所有 Unicode 代码点，包括补充代码点。int 的低（最低）21 位用于表示 Unicode 代码点，高（最高）11 位必须为零。除非另有说明，关于补充字符和代理字符值的行为如下：
> 
> 只接受 char 值的方法不支持补充字符。它们将代理范围中的 char 值视为未定义字符。例如，Character.isLetter('\uD840') 返回 false，即使此特定值后跟字符串中的任何低代理值将表示一个字母。接受 int 值的方法支持所有 Unicode 字符，包括补充字符。例如，Character.isLetter(0x2F81A) 返回 true，因为代码点值表示一个字母（CJK 表意文字）。在 J2SE API 文档中，Unicode 代码点用于 U+0000 到 U+10FFFF 范围内的字符值，Unicode 代码单元用于**16 位字符值，即 UTF-16 编码的代码单元**. 有关 Unicode 术语的更多信息，请参阅 Unicode 词汇表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T12:18:44.563

A`char`存储为 UTF-16 代码点，即一个两字节整数。

所以小写的“c”是 99（十进制）或 0x0063（十六进制）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:19:19.087

**1.** char 在 Java 中表示为**16 位 Unicode**值。

**2.char**的默认值为**'\u0000'********

# c++ - 无法使用 lapack 构建 C++ 代码

> ID：11491787
> 
> 赞同：1
> 
> 时间：2012-07-15T12:14:17.467
> 
> 标签：c++, ubuntu, boost, matrix, lapack

我写了一个简单的代码来测试boost和lapack但是效果不好

我的代码：

```
#include  < iostream>
#include < boost/numeric/bindings/traits/ublas_matrix.hpp>
#include < boost/numeric/ublas/matrix.hpp>
#include < boost/numeric/bindings/lapack/syev.hpp>
#include < boost/numeric/ublas/io.hpp>

namespace ublas = boost::numeric::ublas;
namespace lapack = boost::numeric::bindings::lapack;

int main() {
  ublas::matrix<double> A(3,3);
  ublas::vector<double> B(3);
  A(0,0)=1;
  A(1,1)=2;
  A(2,2)=4;
  A(0,1)=.5;
  A(0,2)=.25;
  A(1,2)=.3;

  lapack::syev('V','L',A,B);
  std::cout << A << std::endl;
  return 0;
} 
```

我在 ubuntu 10.04
g++ -llapack test.cpp上构建的选项 g++

这是错误：

调用 'syev(char....... )' 没有匹配的函数</p>

如果没有“lapack::syev('V','L',A,B);” 建好了！
**请帮助我！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:18:39.130

请安装`libboost-all-dev`软件包。

# authentication - Doctrine（使用 Symfony2）仅尝试使用 root@localhost 连接到数据库

> ID：11491791
> 
> 赞同：1
> 
> 时间：2012-07-15T12:14:45.737
> 
> 标签：authentication, symfony, doctrine-orm, localhost, root

## **错误：（发生在产品环境中）**

*request.CRITICAL: PDOException: SQLSTATE[28000] [1045] 在 /srv/inta/current/vendor/doctrine-dbal/lib/ 处拒绝用户 'root'@'localhost' 的访问（使用密码：YES）（未捕获的异常） Doctrine/DBAL/Driver/PDOConnection.php 第 36 行 [] []*

## 到目前为止我尝试过的

奇怪的是，我实际上可以使用 root 用户和提供的密码进行访问。通过控制台以 root 身份登录效果很好。

我正在使用位于*app/config/中的以下***parameters.yml文件**

 *```
parameters:
    database_driver:   pdo_mysql
    database_host:     localhost
    database_port:     ~
    database_name:     int_apartments
    database_user:     root
    database_password: pw goes here

    mailer_transport:  smtp
    mailer_host:       localhost
    mailer_user:       ~
    mailer_password:   ~

    locale:            en
    secret:            ThisTokenIsNotSoSecretChangeIt 
```

如您所见，它非常标准，仅更改了数据库的名称、用户和密码。

在我位于*app/config的***config.yml**中（相关部分）

 *```
imports:
- { resource: security.yml }
- { resource: parameters.yml }

...

doctrine:
   dbal:
      driver:   %database_driver%
      host:     %database_host%
      port:     %database_port%
      dbname:   %database_name%
      user:     %database_user%
      password: %database_password%
      charset:  UTF8
      dbname:   int_apartments

  orm:
      auto_generate_proxy_classes: %kernel.debug%
      auto_mapping: true
      mappings:
          StofDoctrineExtensionsBundle: false 
```

现在，我想从“第 1 步”开始并验证 parameters.yml 文件是否实际被导入，所以我将主机更改为“localhos”或将用户更改为“tom”或其他任何内容，并且错误消息位于*app/ logs/prod.log*保持原样 - 位置不变，用户不变。

所以我检查了位于*app/config中的***config_prod.yml**

 *```
imports:
- { resource: config.yml }

#doctrine:
#    metadata_cache_driver: apc
#    result_cache_driver: apc
#    query_cache_driver: apc

monolog:
    handlers:
        main:
            type:         fingers_crossed
            action_level: error
            handler:      nested
        nested:
            type:  stream
            path:  %kernel.logs_dir%/%kernel.environment%.log
            level: debug 
```

...一切看起来都很标准！

## 正在发生的事情的摘要

所以这里是快速版本。

*   root@localhost 存在身份验证错误
*   通过控制台以该用户身份登录来验证我的身份验证信用
*   想检查parameters.yml文件是否正在加载
*   更改了一些值 - 没有影响错误消息

**（小）编辑：** 我真正想做的是以完全不同的用户身份使用不同的密码连接到数据库。即使我在parameters.yml 文件中输入不同的凭据，学说仍然会吐出“root@localhost”错误。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:31:52.960

愚蠢的错误，似乎是由于服务器上的用户/组/所有者配置错误。

app/cache 目录归“root”所有，但是当我运行 app/console cache:clear --env=prod --no-debug 时，我是以另一个用户（不是 root）的身份运行的。因此，清除缓存存在问题，并且学说似乎一直在使用位于缓存文件中的非常旧的配置。

得到教训：

*   始终尝试以 root 身份运行（作为最后的手段）
*   使用正确配置的 Web 服务器来避免所有权问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T20:56:09.937

我通过重命名我上传到 prod_old 的 prod 文件夹解决了我的问题，因为系统由于某种原因无法删除该文件夹。***

# c++ - 处理键盘输入的回调

> ID：11491797
> 
> 赞同：0
> 
> 时间：2012-07-15T12:15:46.430
> 
> 标签：c++, opengl, callback, keyboard, glut

我刚刚开始学习 OpenGL/Glut，但遇到了一些问题。`key: a`每当我单击 key 时，我都想打印一个字符串`a`，但似乎我不知道自己在做什么。

我正在`glutKeyboardFunc()`从`main()`函数调用，并且正在传递它`keyinput()`，它会测试`key`is`ESC`或`a`. 另一件事是，当我尝试从内部打印某些东西时`scene1()`，效果非常好！嗯不知道为什么？

```
void printstr(void* font, char* str, GLfloat x, GLfloat y, GLfloat z)
{
    char* c = str;

    // set the raster position
    glRasterPos3f(x, y, z);

    for(; *c != '\0'; c++)
            glutBitmapCharacter(font, *c);
}

void keyinput(unsigned char key, int x, int y)
{
    switch(key)
    {
    case 27:
        killsound();
        exit(0);
        break;

    case 'a':
        glLoadIdentity();
        glColor3f(0.0f, 1.0f, 0.0f);    // Green
        printstr(GLUT_BITMAP_8_BY_13, "Key: a", 0.0f, 0.9f, 0.0f);
        break;
    }
}

int main(int argc, char** argv)
{
    // initialization and stuff
    glutInit(&argc, argv);
    .
    .
    .
    glutDisplayFunc(scene1);
    glutIdleFunc(scene1);
    .
    .
    .
    glutKeyboardFunc(keyinput);
    .
    .
    .

    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:32:56.017

这可能是因为 GLUT 在渲染代码之外调用了 keyinput() 。

我假设您的绘图函数（glutDisplayFunc 或 glutIdleFunc）从调用 glClear() 开始并通过调用 glutSwapBuffers() 结束？如果是这样，那么在 keyinput() 内部发生的任何绘图调用都将在调用 glClear() 之前完成，因此不会看到绘图。

最重要的是，不会连续调用 keyinput。当你的键被按下时它会被调用。因此，您的文本只会显示一瞬间，而不是一直显示。

我建议你做一个全局变量，

```
int aIsPressed=0; 
```

在 keyinput 中，将 aIsPressed 设置为您希望显示消息的帧数（如果您限制帧率，请尝试 60，如果没有，请尝试 1000）

然后，在您的绘图函数中，与绘制其他所有内容的代码一起执行此操作：

```
if(aIsPressed>0)
{ 
    glLoadIdentity();
    glColor3f(0.0f, 1.0f, 0.0f);    // Green
    printstr(GLUT_BITMAP_8_BY_13, "Key: a", 0.0f, 0.9f, 0.0f);
    aIsPressed--; //this way aIsPressed will count down to zero, and the message will disappear again
} 
```

# java - Netty 文件服务器

> ID：11491798
> 
> 赞同：2
> 
> 时间：2012-07-15T12:15:50.557
> 
> 标签：java, netty, fileserver

我一直在浏览 HTTP 文件服务器和上传服务器上的示例。

我正在编写一个可以同时执行以下操作的文件服务器：发送和接收文件。但我不确定如何合并 2 个管道。或者我可能需要根据命令（上传或获取文件）修改它们。即使文档声明一旦建立通道就无法修改管道，我看到“端口统一”示例确实根据数据对其进行了修改。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T05:50:06.083

听起来您需要一个 HTTP 服务器，并区分`GET`用于将文件下载到客户端和`POST`将文件上传到服务器的 HTTP，而不是用管道区分类型。查看[HttpStaticFileServerHandler](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/file/HttpStaticFileServerHandler.java)以下载带有`GET`请求的文件。你需要适应的是第一行`messageReceived`：

```
@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    HttpRequest request = (HttpRequest) e.getMessage();

    if (request.getMethod().equals(HttpMethod.POST)) {
        // receive uploaded file
        return;
    }

    if (request.getMethod() != GET) {
        sendError(ctx, METHOD_NOT_ALLOWED);
        return;
    }

    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T21:27:09.450

我认为您需要将您的应用程序视为 2 个子应用程序合二为一。

第一个子应用程序是文件服务器。您将需要根据[Http 文件服务器示例](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/file/HttpStaticFileServer.java)引导并为此创建管道。

第二个子应用是上传客户端。您将需要根据[http 客户端示例](https://github.com/netty/netty/blob/3/src/main/java/org/jboss/netty/example/http/upload/HttpUploadClient.java)单独引导和创建管道。

# iphone - 在 Objective C 中获取 http 请求

> ID：11491799
> 
> 赞同：0
> 
> 时间：2012-07-15T12:15:51.517
> 
> 标签：iphone, objective-c, ios, cocoa-touch, http

我在目标 c 中有以下代码，它应该向我的网站发出 GET http 请求，然后将某些内容提交到我的 MySQL 数据库中......

```
NSMutableURLRequest *request =[NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.website.com/VideoPush/plist/urlTransfer.php"]];
[request setHTTPMethod:@"GET"];

NSString *post =[[NSString alloc] initWithFormat:@"videoID=%@",videoURL];
[request setHTTPBody:[post dataUsingEncoding:NSUTF8StringEncoding]]; 
```

*注意：我是使用 Objective c 的 http 请求的初学者，所以我意识到我可能会遗漏一些明显的东西......*

现在，如果我在浏览器中运行以下网址...

```
http://www.website.com/VideoPush/plist/urlTransfer.php?videoID=hhklskdjsad 
```

然后一些东西被输入到数据库中，但当我使用目标 c 时没有。另外，当您发出这样的请求时，GET 和 POST 之间有什么区别（因为用户无论如何都看不到 url）？

另外：我是否允许将 url（仍然是带有 / 的 nsstring）作为上面的 videoURL 变量传递

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:21:11.557

您尝试设置 GET 请求的正文，这是没有意义的。你可能想要的是：

```
NSString *urlString = [NSString stringWithFormat:@"http://www.website.com/VideoPush/plist/urlTransfer.php?videoID=%@", videoURL];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
... the rest of your method ... 
```

您可能应该去阅读一下什么是[GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.3)和[POST](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.5)以及为什么我说在 GET 请求中包含正文是没有意义的。

> 另外：我是否允许将 url（仍然是带有 / 的 nsstring）作为上面的 videoURL 变量传递

不，您需要对[查询字符串中的任何内容进行 URL 编码](http://en.wikipedia.org/wiki/Query_string#URL_encoding)。您可以使用[`CFURLCreateStringByAddingPercentEscapes`](https://developer.apple.com/library/mac/documentation/CoreFOundation/Reference/CFURLRef/Reference/reference.html#//apple_ref/c/func/CFURLCreateStringByAddingPercentEscapes)为您执行此操作。

# c# - 多线程 C# 停止线程结束

> ID：11491805
> 
> 赞同：-1
> 
> 时间：2012-07-15T12:16:42.727
> 
> 标签：c#, multithreading

我正在创建一个新线程，其中仅包含以下代码：

```
void myThread()
{
    new Form1().Show();
} 
```

为提问而保持通用性。

我怎样才能阻止这个线程结束？因为线程结束，窗体关闭。我怎样才能继续线程，以便表单可以保持打开状态，并且仍然触发事件（例如按钮单击等）

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:27:49.473

好吧，如果你使用多线程来显示一个额外的表单，你应该调用它`Application.Run(Form)`。
编辑：为了清楚起见，该`Application.Run`方法不会在表单*关闭*之前结束。所有事件等都将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:24:09.473

以模态方式显示表单怎么样 - 尽管您为什么要创建一个新线程来显示表单？

```
void myThread()
{
   new Form1().ShowDialog();
... 
```

只是要明确一点-我相信这将有效地锁定您的新线程，直到表单关闭。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-15T12:31:54.863

只需在您的线程中放置一个无限循环就很容易，例如：

```
void myThread()
{
    new Form1().Show();
    while(true)
      {
       Thread.Sleep(16);
      }
} 
```

我为什么要睡线程？...因为考虑到极快的迭代，运行一个内部没有任何内容的无限循环是相当 CPU 密集型的。16 毫秒的睡眠为您提供 60 fps 的速度，这对于您可能想要的响应速度来说绰绰有余。无论如何，为什么需要在单独的线程中显示表单？

# c++ - boost::shared_ptr 在多个线程中使用它是否安全？

> ID：11491812
> 
> 赞同：7
> 
> 时间：2012-07-15T12:17:20.247
> 
> 标签：c++, multithreading, boost, shared-ptr

我试图找到答案一段时间，但我失败了。

让我们假设我们有一个`shared_ptr`从一个线程创建的。然后我们将它传递`shared_ptr`给另外 2 个线程（例如使用一些队列）。所以从这一刻起，有 2 个 original 的副本`shared_ptr`，指向同一个原始指针。`shared_ptr`两个所有者线程都将从队列中获取它们的副本。然后他们会将它传递给另一个线程或将其销毁。

问题是 - 它安全吗？原始指针是否会正确销毁（不会有引用计数器的竞争？） ![在此处输入图像描述](../Images/8c3a94a086167c8b9c5a0bcd30c4c345.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-15T12:29:53.650

C++ 标准几乎不保证线程安全。的引用计数`std::shared_ptr`是唯一的例外：它保证表现为原子访问的变量。我相信这已编入第 20.7.2.2/4 节中的这句话中：

> 更改`use_count()`不反映可能引入数据竞争的修改。

`boost::shared_ptr` [提供相同的保证](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/shared_ptr.htm#ThreadSafety)：

> shared_ptr 对象提供与内置类型相同级别的线程安全。一个 shared_ptr 实例可以被多个线程同时“读取”。不同的 shared_ptr 实例可以被多个线程同时“写入”……（即使这些实例是副本，并且在下面共享相同的引用计数。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T12:57:05.733

[升压文档](http://www.boost.org/doc/libs/release/libs/smart_ptr/shared_ptr.htm#ThreadSafety)状态：

> 不同的 shared_ptr 实例可以被多个线程同时“写入”（使用诸如 operator= 或 reset 等可变操作访问）（**即使这些实例是副本，并且在下面共享相同的引用计数。**）

（强调我的）

所以这里的关键是你是否在线程之间*复制s 。*`boost::shared_ptr`如果您创建副本（使用 s 的“安全”方式`shared_ptr`），您不必担心线程安全。但是，如果您通过`shared_ptr`引用或指针传递，因此`shared_ptr`在不同的线程中使用实际相同的，您将不得不担心线程安全，如文档中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T19:39:10.667

我想在多线程用例中对 boost 共享指针中的引用计数发表评论。评论是为了回答“boost共享指针引用计数中是否存在竞态条件？”的问题</p>

对于大多数主流编译器，至少在 boost 1.35 之后，我的简单回答是“不”。在 boost/detail/shared_count.hpp 中定义的名为“add_ref_copy”的 boost 实现。该函数将调用为各个编译器定义的相应原子函数。例如windows版本会调用“BOOST_INTERLOCKED_INCREMENT”以原子方式递增计数（详见详细信息\sp_counted_base_w32.hpp）。X86 的 Linux gcc 将调用 atomic_increment(... ) （详见详细信息\sp_counted_base_gcc_x86.hpp）。每个单独的编译器都实现了线程安全机制，以确保引用计数以有效的方式更新。有些代码甚至是用汇编编写的。

现在我的简单回答中有一个警告。您确实需要确保您的编译器包含在 boost 的祝福列表中，以实现多线程安全引用计数。如果您不确定是否可以定义“BOOST_SP_USE_PTHREADS”，它会驱动 boost 使用 pthread 库以原子方式更新引用计数（通过为 pthread 解决方案包含 boost/detail/sp_counted_base_pt.hpp）。

# c++ - 如何获取我的计算机外部 IP 地址？

> ID：11491816
> 
> 赞同：3
> 
> 时间：2012-07-15T12:18:32.873
> 
> 标签：c++, windows, visual-c++

假设我目前的 IP 是：`123.123.123.123`

如何以编程方式获取该字符串？

注意：我不想获得这个 IP: `192.168.0.10`，我想要其他人可以使用该 IP 通过 HTTP 或其他任何方式连接到我的计算机。

注意：我不想打开诸如 ip4.me 之类的网页来获取地址，我只想用 C++ 来获取它。

我试图用谷歌搜索，但每个建议都是“加载一个页面并阅读它告诉你的 IP”。这真的是唯一的方法吗？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:23:30.433

您可以从[http://api.externalip.net/ip/](http://api.externalip.net/ip/)或一些类似的服务中获取它，但我不确定这些网站的可靠性如何，就可用性而言

任何其他方式都会非常复杂，因为一般来说，没有网络设备有 api 来告诉外部 IP，即使有，您也无法判断您面前是否有一个简单的 xDSL 路由器或 Cisco ASA 分配出站流量

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T12:36:29.087

我的建议是发送一个带有记录路由选项的数据包。

如果您知道您的上游网关，您应该能够找到一个允许您设置记录路由的 ping 命令，然后将该数据存储在一个数组或您可以正则表达式的东西中。

我相信您的 WAN IP 应该是记录 0 或记录 1。

你用的是什么网络库？

# c# - 如何使方法返回泛型类型？

> ID：11491821
> 
> 赞同：2
> 
> 时间：2012-07-15T12:19:03.707
> 
> 标签：c#, .net, generics

我有一个名为 config 的类，其中有一个名为`key`.

当我应用该类的 GET 属性时，该属性必须返回一个不同类型（Int 或 bool 或 String）的变量键。

我实现它如下：

```
 public enum RetType {RetInt, RetBool, RetString};
  ...
  public object PolimorphProperty(string key, RetType how) 
  {
      get 
     { 
        switch (how)
        {
         case RetType.RetInt:
           ...;
        case RetType.RetBool:
           ...;
        case RetType.RetString:
           ...;
        }
     }  
 } 
```

但是 PolimorphProperty 返回 Object 类型的问题。

我应该在代码中更改什么以获得适当的类型（int、bool、string），而不是对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:37:23.020

做这个：

```
public T PolimorphProperty<T>(string key)
{
    return (T) objectInstanceHere;
} 
```

使用示例：

```
int i = PolimorphProperty<int>("somekey"); 
```

这支持[http://www.antiifcampaign.com/](http://www.antiifcampaign.com/)

就此而言，尽可能避免在多态代码中`switch`使用。`if`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:22:34.280

```
public T PolimorphProperty<T>(string key, T how)
{
    //todo
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-15T12:25:42.203

`type`C# 中的Any*实际上是*一个对象。
根据我从您的问题中了解到的情况，您以这种方式调用您的方法：
`PolimorpthProperty(key, RetType.SomeType)`
该方法返回一个对象。您应该这样使用它：
`int key = (int)PolimorthProperty(key, RetType.RetInt);`
这称为[Unboxing](http://msdn.microsoft.com/en-us/library/yz2be5wk.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:37:11.343

这个怎么样，考虑到你的“PolimorphProperty”的原始实现仍然是你的项目，你添加这个：

```
public TType PolimorphProperty<TType>(string key, RetType how) 
 {
     return (TType)PolimorphProperty(key, how);
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T12:39:16.757

如果我理解正确，您正在寻找这样的东西：

```
public T GenericMethod<T>(string key)
{
    var ret = new object(); // Retrieve object from whatever...
    return (T) ret;
}

public void UsageExample()
{
    int typedResult = GenericMethod<int>("myKey");
} 
```

如果您尝试使用不同的逻辑基于类型 T 获取不同的对象，那么无论如何您都必须打开类型，因为除非您的集合支持某种类型的对象（它们通常支持），否则编译器不知道该怎么办。
在这种情况下，请检查此[问题](https://stackoverflow.com/questions/708911/using-case-switch-and-gettype-to-determine-the-object)。

# c - sizeof(long long) != 8 的架构/ABI

> ID：11491825
> 
> 赞同：12
> 
> 时间：2012-07-15T12:19:22.853
> 
> 标签：c, abi

在 x86/amd64 中，世界`sizeof(long long)`是 8。

让我引用扎克·温伯格（Zack Weinberg）颇有见地的 8 年[邮件](http://gcc.gnu.org/ml/gcc/2004-03/msg01251.html)：

> 斯科特·罗伯特·拉德写道：
> 
> > 在 64 位 AMD64 架构上，GCC 定义`long long`为 64 位，与`long`.
> > 
> > `long long`鉴于某些 64 位指令（乘法）产生 128 位结果，将其定义为 128 位似乎不合逻辑吗？
> 
> 不，有两个原因：
> 
> 1.  `long long`大多数 LP64 型号操作系统的 ABI 中都写入了64 位 ' ' 的选择；我们不能单方面改变它。
>     
>     
> 2.  这实际上是正确的选择，因为它消除了使 ' `long`' 不是最广泛的基本整数类型的像差。在野外有很多代码是为了假设 `sizeof(long) >= sizeof(size_t)`- 这至少可能被 ABI 破坏，其中 long long 比 long 更宽。
>     
>     
>     
>     （在 C99 的开发过程中这是一个非常有争议的话题。据我所知，从外部角度来看，“ `long long`”只是由于微软的压力而被标准化，微软由于某种原因无法实现 LP64 模型。其他人都讨厌使 ' `long`' 不一定是最广泛的基本整数类型的想法。）
>     
>     
> 
> 当前的最佳做法似乎是提供“扩展整数类型” `__int128`。这不存在 ' `long long`' 的问题，因为它不是*基本*的整数类型（特别是不能用于 `size_t`）。
> 
> zw

* * *

`long long`是最宽的**基本**整数类型。在我知道的任何非死旧架构/ABI 上，它都是 64 位长的。这允许使用简单的跨平台（嗯，至少对于许多 32/64 位架构）类型定义：

```
typedef char               s8;
typedef unsigned char      u8;
typedef short              s16;
typedef unsigned short     u16;
typedef int                s32;
typedef unsigned int       u32;
typedef long long          s64;
typedef unsigned long long u64; 
```

比 更好`intXX_t`，因为：

*   他们在不同平台上对 64 位整数使用相同的底层类型
*   允许避免冗长的`PRId64`/ `PRIu64`
    （我很清楚 Visual C++ 支持`%lld`/`%llu`仅自 2005 年起）

但是这个解决方案的可移植性可以通过以下问题的答案来表达。

* * *

**什么是架构/ABI `sizeof(long long) != 8`？**

如果您不能提供任何最近/现代的，那么请继续使用旧的，但前提是它们仍在使用中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-15T12:36:49.680

TI TMS320C55x 架构有`CHAR_BIT`16 位和`long long`40 位。虽然 40 位`long long`违反 ISO，但`sizeof (long long)`与 8 不同。

实际上几乎所有的 C99 实现`CHAR_BIT > 8`都 带有`sizeof (long long) != 8`.

TMS320C55x 优化 C/C++ 编译器用户指南 (2003) [http://www.ti.com/lit/ug/spru281f/spru281f.pdf](http://www.ti.com/lit/ug/spru281f/spru281f.pdf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T04:50:04.067

您的“跨平台”类型定义只是被误导了。正确的是

```
#include <stdint.h>
typedef int8_t s8;
typedef uint8_t u8;
typedef int16_t s16;
... 
```

# javascript - 在初始化之前如何引用 javascript 窗口元素？

> ID：11491826
> 
> 赞同：3
> 
> 时间：2012-07-15T12:19:25.310
> 
> 标签：javascript, backbone.js, backbone-views

此示例借自 Backbone 目录演示应用程序 [https://github.com/ccoenraets/backbone-directory/blob/master/web/js/utils.js#L11](https://github.com/ccoenraets/backbone-directory/blob/master/web/js/utils.js#L11)

```
// The Template Loader. Used to asynchronously load templates located in separate .html files
window.templateLoader = {

    load: function(views, callback) {

        var deferreds = [];

        $.each(views, function(index, view) {
            if (window[view]) {
                deferreds.push($.get('tpl/' + view + '.html', function(data) {
                    window[view].prototype.template = _.template(data);
                }, 'html'));
            } else {
                alert(view + " not found");
            }
        });

        $.when.apply(null, deferreds).done(callback);
    }  
}; 
```

您可以使用字符串数组 [views] 和 [callback] 函数对其进行初始化。

我的问题是如何检查 window[view] （点击上面的链接到代码中的确切位置）如果（据我所知）之前没有被初始化？如果我不准确，请在评论中写下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:34:09.037

如果我正确理解了你的问题，那么当你打电话时，`templateLoader.load`你传入 2 个参数；`views`和`callback`。我们可以假设它是一个数组，因为我们随后使用 jQuery方法`views`遍历该数组。`.each()`将回调传递给与当前迭代相对应`.each()`的数组元素。`views`该参数名为`view`.

存储在数组`view`中的任意值也是如此。`views`然后，我们尝试找到具有`window`与 的值匹配的标识符的属性`view`。如果`view === "james"`我们正在寻找`window.james`.

如果您查看该应用程序中的一些视图，您会发现它们的定义如下：

```
window.ContactView = Backbone.View.extend({
    // Some methods
}); 
```

`ContactView`的属性也是如此`window`，我们可以`templateLoader.load`像下面这样调用来加载该模板：

```
templateLoader.load(["ContactView"], someCallbackFn); 
```

您可以看到在[*main.js*](https://github.com/ccoenraets/backbone-directory/blob/master/web/js/main.js)中实际调用的位置。

所以实际发生的是在各种其他文件中定义的一堆属性`window`，然后由模板加载器加载，通过将一组标识符传递给它。

# mysql - 在两个mysql表中搜索多个列？

> ID：11491828
> 
> 赞同：1
> 
> 时间：2012-07-15T12:19:57.277
> 
> 标签：mysql, search

我有两个表格和一个搜索表单来搜索关键字。我正在尝试在两个表上搜索该关键字的多个列，如果查询匹配，则获取 id 列以供进一步使用。我已经尝试过了（假设“优惠券”是用户正在搜索的术语）

```
SELECT `ID` FROM `Profiles` AS `p` WHERE `p`.`Status` = 'Active' AND `p`.`Address`
LIKE '%coupon%' OR `p`.`BusinessName` LIKE '%coupon%' OR `p`.`BusinessSubCategory`
LIKE '%coupon%' OR `p`.`DescriptionMe` LIKE '%coupon%' OR `p`.`Tags` LIKE '%coupon%'
UNION SELECT `id` FROM `products` AS `d` WHERE `d`.`status` = 'approved' AND
`d`.`title` LIKE '%coupon%' OR `d`.`desc` LIKE '%coupon%' OR `d`.`tags` LIKE '%coupon%' 
```

在这里，我想要与关键字匹配的配置文件 ID 和产品 ID。我试过这个，这返回了非常奇怪的结果，看起来只有配置文件 ID。所以，这是一个错误的查询。这种搜索的查询应该是什么？内部联接？请给我一些示例查询，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:29:28.077

`AS p`首先，当您不做等时，我不会使用`INNER JOIN`...似乎做得过火了，而且我猜您之后需要括号`AND`-`OR`如果您明确希望找到状态为“活动”的结果，那么也需要将 s括起来.

怎么样：

```
 SELECT ID FROM Profiles WHERE Status = 'Active' AND (Address LIKE '%coupon%' OR BusinessName LIKE '%coupon%' OR BusinessSubCategory LIKE '%coupon%' OR DescriptionMe LIKE '%coupon%' OR Tags LIKE '%coupon%')
UNION SELECT id FROM products WHERE status = 'approved' AND (title LIKE '%coupon%' OR desc LIKE '%coupon%' OR tags LIKE '%coupon%') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:25:45.673

尝试这个：：

```
SELECT `ID`,'profile_ID' FROM 
`Profiles` AS `p` 
WHERE `p`.`Status` = 'Active' AND `p`.`Address`
LIKE '%coupon%' OR `p`.`BusinessName` LIKE '%coupon%' OR `p`.`BusinessSubCategory`
LIKE '%coupon%' OR `p`.`DescriptionMe` LIKE '%coupon%' OR `p`.`Tags` LIKE '%coupon%'

UNION ALL

SELECT `id`, 'productID' FROM `products` AS `d` WHERE `d`.`status` = 'approved' AND
`d`.`title` LIKE '%coupon%' OR `d`.`desc` LIKE '%coupon%' OR `d`.`tags` LIKE '%coupon%' 
```

# sql - NULL 值被排除在外。为什么？

> ID：11491831
> 
> 赞同：23
> 
> 时间：2012-07-15T12:20:06.597
> 
> 标签：sql, sql-server, sql-server-2008

这是关于我在 Microsoft Sql Server 中发现的一种奇怪行为。如果我错了，请纠正我。

```
SELECT COUNT(*) FROM TABLEA 
WHERE [Column1] IS NULL; 
```

这将返回 30018 行。

```
CREATE VIEW VIEWB AS 
SELECT * FROM TABLEA AS t1 
WHERE t1.[Column1] NOT IN ('Cross/Up sell', 'Renegotiation', 'Renewal') 
```

如果我检查，`VIEWB`我找不到：`NULL``Column1`

```
SELECT COUNT(*) FROM VIEWB 
WHERE [Column1] IS NULL; 
```

这将返回 0 行。

为什么？上面的查询排除了 3 个值，但**不应该排除 NULL**。为什么 Sql Server 女士会这样？我应该预料到这一点吗？我该如何解决？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-15T12:26:40.330

这实际上是 SQL Server 在将 NULL 视为值时所犯的常见错误。默认情况下，它被视为 UNKNOWN，如此[处](http://msdn.microsoft.com/en-us/library/ms191270%28v=sql.105%29.aspx)所述。因此，在您看来，您还需要包含一个`OR t1.[Column1] IS NULL`.

您可以通过调用来更改此行为`SET ANSI_NULLS OFF`。但是，不建议使用此功能，因为正如@Martin Smith 所指出的那样，该功能已被弃用。

但是，这不是 SQL Server 特定的问题。它是[ANSI SQL 标准](http://en.wikipedia.org/wiki/SQL#Null_and_three-valued_logic_.283VL.29)的一部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-15T12:25:36.570

SQL 使用[三值逻辑](http://www.simple-talk.com/sql/learn-sql-server/sql-and-the-snare-of-three-valued-logic/)。

```
t1.[Column1] NOT IN ('Cross/Up sell', 'Renegotiation', 'Renewal') 
```

相当于

```
t1.[Column1] <> 'Cross/Up sell' AND  
t1.[Column1] <> 'Renegotiation' AND 
t1.[Column1] <>  'Renewal') 
```

当`t1.[Column1] is NULL`此表达式计算结果为`UNKNOWN`而不是`TRUE`这样时，不会返回这些行。

唯一`NULL NOT IN ( ... )`会返回的时间是`NOT IN`子句计算结果为空集。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-02T13:59:44.397

最好的答案就是在 where 子句中使用以下条件

**ISNULL(t1.[Column1],'')** NOT IN ('Cross/Up sell', 'Renegotiation', 'Renewal')

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T17:02:26.683

处理时小心的另一个例子`nulls`

我只是同意 Sumo - 为什么不将视图更改为：

```
CREATE VIEW VIEWB AS 
SELECT * FROM TABLEA AS t1 
WHERE 
    t1.[Column1] NOT IN ('Cross/Up sell', 'Renegotiation', 'Renewal')  
    OR
    t1 IS NULL 
```

一种替代方法可能是我添加到[SQL FIDDLE中的以下内容](http://sqlfiddle.com/#!3/8efab/1)

```
CREATE VIEW VIEWB AS 
SELECT * FROM TABLEA AS t1 
WHERE 
    1 = CASE 
          WHEN ISNULL(t1.[Column1],'x') NOT IN ('Cross/Up sell', 'Renegotiation', 'Renewal') THEN 1
          ELSE 0
        END 
```

# python - Python：我的单元测试代码有什么问题？

> ID：11491834
> 
> 赞同：0
> 
> 时间：2012-07-15T12:20:20.250
> 
> 标签：python, testing

我有两个文件“testable.py”：

```
def joiner(x,y):
 return x+y 
```

“test_testable.py”：

```
import unittest
import testable

class TestTestable(unittest.TestCase):
 def setUp(self):
  self.seq = ['a','b','1']
  self.seq2 = ['b','c',1]

 def test_joiner(self):
  for each in self.seq:
   for eachy in self.seq2:
    self.assertRaises(TypeError,testable.joiner(each,eachy))

if __name__ == '__main__':
 unittest.main() 
```

现在，当我运行测试时，我得到：

```
ERROR: test_joiner (test_testable.TestTestable)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/rajat/collective_knowledge/test_testable.py", line 16, in test_joiner
    self.assertRaises(TypeError,testable.joiner(each,eachy),(each,eachy))
  File "/home/rajat/collective_knowledge/testable.py", line 11, in joiner
    return x+y
TypeError: cannot concatenate 'str' and 'int' objects

----------------------------------------------------------------------
Ran 1 test in 0.000s

FAILED (errors=1) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:24:34.490

你错过使用[`assertRaises`](http://docs.python.org/library/unittest.html#unittest.TestCase.assertRaises)它应该是：

```
self.assertRaises(TypeError,testable.joiner, (each,eachy)) 
```

或者，如果您使用的是 python2.7 及更高版本或 unittest2，则只需将其用作上下文管理器：

```
with self.assertRaises(TypeError):
     testable.joiner(each,eachy) 
```

**编辑 ：**

例如，您还应该更换`self.seq2 = [1,2,3]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:25:16.837

在

```
for each in self.seq:
    for eachy in self.seq2 
```

每个都可以是 'a' 并且每个都可以是 1

您不能添加 'a' 和 1，因此测试失败。

# python - 在python中获取第n行字符串

> ID：11491835
> 
> 赞同：11
> 
> 时间：2012-07-15T12:20:52.377
> 
> 标签：python, python-3.x

如何在 Python 3 中获取字符串的*第 n*行？例如

```
getline("line1\nline2\nline3",3) 
```

有没有办法使用 stdlib/builtin 函数来做到这一点？我更喜欢 Python 3 中的解决方案，但 Python 2 也很好。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-15T12:24:45.803

尝试以下操作：

```
s = "line1\nline2\nline3"
print s.splitlines()[2] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-15T13:07:06.320

功能性方法

```
>>> import StringIO
>>> from itertools import islice
>>> s = "line1\nline2\nline3"
>>> gen = StringIO.StringIO(s)
>>> print next(islice(gen, 2, 3))
line3 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-24T01:03:12.920

```
`my_string.strip().split("\n")[-1]` 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T12:31:09.997

使用字符串缓冲区：

```
import io    
def getLine(data, line_no):
    buffer = io.StringIO(data)
    for i in range(line_no - 1):
        try:
            next(buffer)
        except StopIteration:
            return '' #Reached EOF

    try:
        return next(buffer)
    except StopIteration:
        return '' #Reached EOF 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-15T12:32:20.920

比拆分字符串更有效的解决方案是遍历其字符，找到第 N 次和第 (N - 1) 次出现 '\n' 的位置（考虑到字符串开头的边缘情况） . 第 N 行是这些位置之间的子字符串。

这是一段杂乱的代码来演示它（行号为 1 索引）：

```
def getLine(data, line_no):
    n = 0
    lastPos = -1
    for i in range(0, len(data) - 1):
        if data[i] == "\n":
            n = n + 1
            if n == line_no:
                return data[lastPos + 1:i]
            else:
                lastPos = i;

    if(n == line_no - 1):
        return data[lastPos + 1:]
    return "" # end of string 
```

这也比一次构建一个字符的字符串的解决方案更有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-15T12:22:23.717

从评论看来，这个字符串似乎非常大。如果有太多数据无法舒适地放入内存中，一种方法是逐行处理文件中的数据：

```
N = ...
with open('data.txt') as inf:
    for count, line in enumerate(inf, 1):
        if count == N: #search for the N'th line
            print line 
```

使用[enumerate()](http://docs.python.org/library/functions.html#enumerate)为您提供了您正在迭代的对象的索引和值，您可以指定一个起始值，所以我使用 1（而不是默认值 0）

使用的好处`with`是它会在您完成或遇到异常时自动为您关闭文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-15T12:45:54.853

既然您提出了内存效率的问题，这是否更好：

```
s = "line1\nline2\nline3"

# number of the line you want
line_number = 2

i = 0
line = ''
for c in s:
   if i > line_number:
     break
   else:
     if i == line_number-1 and c != '\n':
       line += c
     elif c == '\n':
       i += 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-20T16:15:10.567

为了可读性写成两个函数

```
 string = "foo\nbar\nbaz\nfubar\nsnafu\n"

    def iterlines(string):
      word = ""
      for letter in string:
        if letter == '\n':
          yield word
          word = ""
          continue
        word += letter

    def getline(string, line_number):
      for index, word in enumerate(iterlines(string),1):
        if index == line_number:
          #print(word)
          return word

    print(getline(string, 4)) 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-07-15T13:05:23.010

我的解决方案（高效且紧凑）：

```
def getLine(data, line_no):
    index = -1
    for _ in range(line_no):index = data.index('\n',index+1)
    return data[index+1:data.index('\n',index+1)] 
```

# java - 将 GWT 升级到 v2.4 时出错

> ID：11491840
> 
> 赞同：0
> 
> 时间：2012-07-15T12:21:33.913
> 
> 标签：java, eclipse, gwt, ant, compiler-errors

我正在尝试将 GWT 升级到 v2.4。我正面临问题。当 Run As -> Ant Built （升级项目后）时，缺少 .xml 文件（项目中未生成）并且项目构建成功，但有奇怪的行为在控制台中显示错误。我将发布出现的错误（其中一些）。

我正在使用以下内容：

*   操作系统是Windows。

*   我将编译器设为 jdk1.7 而不是 jre1.5。

*   我在环境变量中设置了这些：类路径指向 C:\Program Files\Documentum\dctm.jar;C:\Documentum\config;%GWT_HOME%;%GWT_HOME%\gwt-user.jar;%GWT_HOME%\gwt- dev.jar;%GWT_HOME%\gwt-servlet.jar;%junit%

*   GWT_HOME D:\products\DSS 2012\eclipse-jee-indigo-SR2-win32\eclipse\plugins\com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37\gwt-2.4.0

*   JAVA_HOME "C:\Program Files\Java\jdk1.7.0_05"

*   junit %JUNIT_HOME%\junit.jar

*   JUNIT_HOME D:\products\DSS 2012\eclipse-jee-indigo-SR2-win32\eclipse\plugins\org.junit_4.8.2.v4_8_2_v20110321-1705

在 eclipse --> Preferences --> Java --> compiler --> Compiler 合规级别为 1.7

在 eclipse --> Preferences --> Java --> Installed JREs --> 设置为 jdk1.7.0_05

这些是编译时出现的一些错误（我得到的结果是编译成功）

```
[java] Loaded 2283 units from persistent store.
 [java]    Found 2215 cached units.  Used 2215 / 2215 units from cache.
 [java]    Added 0 units to persistent cache.
 [java]    Validating newly compiled units
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/editor/client/EditorDriver.java'
 [java]          Line 20: The import javax.validation.ConstraintViolation cannot be resolved
 [java]          Line 97: ConstraintViolation cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/editor/client/impl/AbstractSimpleBeanEditorDriver.java'
 [java]          Line 28: Name clash: The method setConstraintViolations(Iterable<ConstraintViolation<?>>) of type BaseEditorDriver<T,E> has the same erasure as setConstraintViolations(Iterable<ConstraintViolation<?>>) of type EditorDriver<T> but does not override it
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/editor/client/impl/BaseEditorDriver.java'
 [java]          Line 31: The import javax.validation.ConstraintViolation cannot be resolved
 [java]          Line 66: ConstraintViolation cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/editor/client/impl/SimpleViolation.java'
 [java]          Line 25: The import javax.validation.ConstraintViolation cannot be resolved
 [java]          Line 40: ConstraintViolation cannot be resolved to a type
 [java]          Line 43: ConstraintViolation cannot be resolved to a type
 [java]          Line 44: Missing code implementation in the compiler
 [java]          Line 49: ConstraintViolation cannot be resolved to a type
 [java]          Line 49: Missing code implementation in the compiler
 [java]          Line 70: ConstraintViolation cannot be resolved to a type
 [java]          Line 72: ConstraintViolation cannot be resolved to a type
 [java]          Line 73: ConstraintViolation<?> cannot be resolved to a type
 [java]          Line 78: ConstraintViolation<capture#2-of ?> cannot be resolved to a type
 [java]          Line 83: ConstraintViolation<capture#3-of ?> cannot be resolved to a type
 [java]          Line 92: ConstraintViolation<capture#4-of ?> cannot be resolved to a type
 [java]          Line 97: ConstraintViolation<capture#5-of ?> cannot be resolved to a type
 [java]          Line 102: ConstraintViolation cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/editor/client/testing/MockSimpleBeanEditorDriver.java'
 [java]          Line 26: The import javax.validation.ConstraintViolation cannot be resolved
 [java]          Line 35: The type MockSimpleBeanEditorDriver<T,E> must implement the inherited abstract method EditorDriver<T>.setConstraintViolations(Iterable<ConstraintViolation<?>>)
 [java]          Line 107: Name clash: The method setConstraintViolations(Iterable<ConstraintViolation<?>>) of type MockSimpleBeanEditorDriver<T,E> has the same erasure as setConstraintViolations(Iterable<ConstraintViolation<?>>) of type EditorDriver<T> but does not override it
 [java]          Line 108: ConstraintViolation cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/AbstractGwtValidatorFactory.java'
 [java]          Line 21: The import javax.validation.ConstraintValidatorFactory cannot be resolved
 [java]          Line 23: The import javax.validation.TraversableResolver cannot be resolved
 [java]          Line 24: The import javax.validation.Validator cannot be resolved
 [java]          Line 25: The import javax.validation.ValidatorContext cannot be resolved
 [java]          Line 26: The import javax.validation.ValidatorFactory cannot be resolved
 [java]          Line 57: ValidatorFactory cannot be resolved to a type
 [java]          Line 67: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 68: The method create(Class<?>) from the type GWT refers to the missing type ConstraintValidatorFactory
 [java]          Line 68: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 75: TraversableResolver cannot be resolved to a type
 [java]          Line 76: The method create(Class<?>) from the type GWT refers to the missing type TraversableResolver
 [java]          Line 76: TraversableResolver cannot be resolved to a type
 [java]          Line 79: Validator cannot be resolved to a type
 [java]          Line 81: The method getConstraintValidatorFactory() from the type AbstractGwtValidatorFactory refers to the missing type ConstraintValidatorFactory
 [java]          Line 82: The method getTraversableResolver() from the type AbstractGwtValidatorFactory refers to the missing type TraversableResolver
 [java]          Line 91: ValidatorContext cannot be resolved to a type
 [java]          Line 92: The method create(Class<?>) from the type GWT refers to the missing type ValidatorContext
 [java]          Line 92: ValidatorContext cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/BaseGwtConfiguration.java'
 [java]          Line 23: The import javax.validation.ConstraintValidatorFactory cannot be resolved
 [java]          Line 25: The import javax.validation.TraversableResolver cannot be resolved
 [java]          Line 26: The import javax.validation.ValidatorFactory cannot be resolved
 [java]          Line 27: The import javax.validation.spi.BootstrapState cannot be resolved
 [java]          Line 40: BootstrapState cannot be resolved to a type
 [java]          Line 43: BootstrapState cannot be resolved to a type
 [java]          Line 45: BootstrapState cannot be resolved to a type
 [java]          Line 53: ValidatorFactory cannot be resolved to a type
 [java]          Line 55: The method buildValidatorFactory(ConfigurationState) from the type GwtValidationProvider refers to the missing type ValidatorFactory
 [java]          Line 59: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 64: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 65: The method create(Class<?>) from the type GWT refers to the missing type ConstraintValidatorFactory
 [java]          Line 65: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 72: TraversableResolver cannot be resolved to a type
 [java]          Line 73: The method create(Class<?>) from the type GWT refers to the missing type TraversableResolver
 [java]          Line 73: TraversableResolver cannot be resolved to a type
 [java]          Line 88: TraversableResolver cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/BaseMessageInterpolator.java'
 [java]          Line 26: The import javax.validation.metadata cannot be resolved
 [java]          Line 41: ConstraintDescriptor cannot be resolved to a type
 [java]          Line 44: ConstraintDescriptor cannot be resolved to a type
 [java]          Line 45: ConstraintDescriptor<?> cannot be resolved to a type
 [java]          Line 49: ConstraintDescriptor cannot be resolved to a type
 [java]          Line 50: ConstraintDescriptor<capture#2-of ?> cannot be resolved to a type
 [java]          Line 134: The method getConstraintDescriptor() from the type MessageInterpolator.Context refers to the missing type ConstraintDescriptor
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/GwtConstraintValidatorFactory.java'
 [java]          Line 18: The import javax.validation.ConstraintValidator cannot be resolved
 [java]          Line 19: The import javax.validation.ConstraintValidatorFactory cannot be resolved
 [java]          Line 46: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 53: ConstraintValidator cannot be resolved to a type
 [java]          Line 55: ConstraintValidatorFactory cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/GwtTraversableResolver.java'
 [java]          Line 20: The import javax.validation.Path cannot be resolved
 [java]          Line 21: The import javax.validation.Path cannot be resolved
 [java]          Line 22: The import javax.validation.TraversableResolver cannot be resolved
 [java]          Line 30: TraversableResolver cannot be resolved to a type
 [java]          Line 33: Node cannot be resolved to a type
 [java]          Line 34: Path cannot be resolved to a type
 [java]          Line 40: Node cannot be resolved to a type
 [java]          Line 41: Path cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/GwtValidationProviderResolver.java'
 [java]          Line 24: The import javax.validation.ValidationProviderResolver cannot be resolved
 [java]          Line 25: The import javax.validation.spi.ValidationProvider cannot be resolved
 [java]          Line 35: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 37: ValidationProvider cannot be resolved to a type
 [java]          Line 38: The method createValidationProviderList() from the type GwtValidationProviderResolver refers to the missing type ValidationProvider
 [java]          Line 40: ValidationProvider cannot be resolved to a type
 [java]          Line 41: ValidationProvider cannot be resolved to a type
 [java]          Line 41: ValidationProvider cannot be resolved to a type
 [java]          Line 42: ValidationProvider cannot be resolved to a type
 [java]          Line 42: The method create(Class<?>) from the type GWT refers to the missing type ValidationProvider
 [java]          Line 42: ValidationProvider cannot be resolved to a type
 [java]          Line 47: ValidationProvider cannot be resolved to a type
 [java]          Line 48: Missing code implementation in the compiler
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/GwtValidatorContext.java'
 [java]          Line 21: The import javax.validation.ConstraintValidatorFactory cannot be resolved
 [java]          Line 23: The import javax.validation.TraversableResolver cannot be resolved
 [java]          Line 24: The import javax.validation.Validator cannot be resolved
 [java]          Line 25: The import javax.validation.ValidatorContext cannot be resolved
 [java]          Line 26: The import javax.validation.ValidatorFactory cannot be resolved
 [java]          Line 34: ValidatorContext cannot be resolved to a type
 [java]          Line 36: ValidatorFactory cannot be resolved to a type
 [java]          Line 38: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 38: The method getConstraintValidatorFactory() from the type AbstractGwtValidatorFactory refers to the missing type ConstraintValidatorFactory
 [java]          Line 40: TraversableResolver cannot be resolved to a type
 [java]          Line 40: The method getTraversableResolver() from the type AbstractGwtValidatorFactory refers to the missing type TraversableResolver
 [java]          Line 42: ValidatorContext cannot be resolved to a type
 [java]          Line 43: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 45: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 45: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 47: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 52: Validator cannot be resolved to a type
 [java]          Line 54: ConstraintValidatorFactory cannot be resolved to a type
 [java]          Line 55: TraversableResolver cannot be resolved to a type
 [java]          Line 59: ValidatorContext cannot be resolved to a type
 [java]          Line 69: ValidatorContext cannot be resolved to a type
 [java]          Line 70: TraversableResolver cannot be resolved to a type
 [java]          Line 72: TraversableResolver cannot be resolved to a type
 [java]          Line 72: TraversableResolver cannot be resolved to a type
 [java]          Line 74: TraversableResolver cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/Validation.java'
 [java]          Line 23: The import javax.validation.ValidationException cannot be resolved
 [java]          Line 24: The import javax.validation.ValidationProviderResolver cannot be resolved
 [java]          Line 25: The import javax.validation.ValidatorFactory cannot be resolved
 [java]          Line 26: The import javax.validation.bootstrap cannot be resolved
 [java]          Line 27: The import javax.validation.bootstrap cannot be resolved
 [java]          Line 28: The import javax.validation.spi.BootstrapState cannot be resolved
 [java]          Line 29: The import javax.validation.spi.ValidationProvider cannot be resolved
 [java]          Line 93: GenericBootstrap cannot be resolved to a type
 [java]          Line 94: BootstrapState cannot be resolved to a type
 [java]          Line 96: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 97: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 100: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 100: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 101: The method getDefaultValidationProviderResolver() from the type Validation.GenericBootstrapImpl refers to the missing type ValidationProviderResolver
 [java]          Line 101: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 103: ValidationProvider cannot be resolved to a type
 [java]          Line 107: ValidationException cannot be resolved to a type
 [java]          Line 113: ValidationException cannot be resolved to a type
 [java]          Line 121: ValidationException cannot be resolved to a type
 [java]          Line 128: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 129: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 130: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 130: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 132: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 135: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 136: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 139: GenericBootstrap cannot be resolved to a type
 [java]          Line 139: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 140: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 147: ValidationProvider cannot be resolved to a type
 [java]          Line 148: ProviderSpecificBootstrap cannot be resolved to a type
 [java]          Line 150: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 166: ValidationException cannot be resolved to a type
 [java]          Line 171: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 172: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 172: The method getDefaultValidationProviderResolver() from the type Validation.GenericBootstrapImpl refers to the missing type ValidationProviderResolver
 [java]          Line 175: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 178: ValidationProvider cannot be resolved to a type
 [java]          Line 180: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 182: ValidationException cannot be resolved to a type
 [java]          Line 186: ValidationProvider cannot be resolved to a type
 [java]          Line 190: ValidationProvider cannot be resolved to a type
 [java]          Line 190: ValidationProvider cannot be resolved to a type
 [java]          Line 194: ValidationException cannot be resolved to a type
 [java]          Line 206: ProviderSpecificBootstrap cannot be resolved to a type
 [java]          Line 207: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 208: ValidationProviderResolver cannot be resolved to a type
 [java]          Line 227: ValidatorFactory cannot be resolved to a type
 [java]          Line 228: The method byDefaultProvider() from the type Validation refers to the missing type GenericBootstrap
 [java]          Line 248: GenericBootstrap cannot be resolved to a type
 [java]          Line 276: ValidationProvider cannot be resolved to a type
 [java]          Line 277: ProviderSpecificBootstrap cannot be resolved to a type
 [java]          Line 278: Bound mismatch: The type U is not a valid substitute for the bounded parameter <U extends ValidationProvider<T>> of the type Validation.ProviderSpecificBootstrapImpl<T,U>
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/constraints/AbstractDecimalMaxValidator.java'
 [java]          Line 20: The import javax.validation.ConstraintValidator cannot be resolved
 [java]          Line 21: The import javax.validation.constraints.DecimalMax cannot be resolved
 [java]          Line 31: ConstraintValidator cannot be resolved to a type
 [java]          Line 31: DecimalMax cannot be resolved to a type
 [java]          Line 39: DecimalMax cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/constraints/AbstractDecimalMinValidator.java'
 [java]          Line 20: The import javax.validation.ConstraintValidator cannot be resolved
 [java]          Line 21: The import javax.validation.constraints.DecimalMin cannot be resolved
 [java]          Line 30: ConstraintValidator cannot be resolved to a type
 [java]          Line 30: DecimalMin cannot be resolved to a type
 [java]          Line 34: DecimalMin cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/constraints/AbstractDigitsValidator.java'
 [java]          Line 20: The import javax.validation.ConstraintValidator cannot be resolved
 [java]          Line 21: The import javax.validation.constraints.Digits cannot be resolved
 [java]          Line 30: ConstraintValidator cannot be resolved to a type
 [java]          Line 30: Digits cannot be resolved to a type
 [java]          Line 35: Digits cannot be resolved to a type
 [java]       Errors in 'jar:file:/D:/products/DSS%202012/eclipse-jee-indigo-SR2-win32/eclipse/plugins/com.google.gwt.eclipse.sdkbundle_2.4.0.v201205021203-rel-r37/gwt-2.4.0/gwt-user.jar!/com/google/gwt/validation/client/constraints/AbstractMaxValidator.java'
 [java]          Line 21: The import javax.validation.ConstraintValidator cannot be resolved
 [java]          Line 22: The import javax.validation.constraints.Max cannot be resolved
 [java]          Line 29: ConstraintValidator cannot be resolved to a type
 [java]          Line 29: Max cannot be resolved to a type
 [java]          Line 33: Max cannot be resolved to a type 
```

我不知道该怎么办。请任何帮助。

谢谢并恭祝安康，

阿里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T13:41:21.740

您必须将`validation-api-1.0.0.GA.jar`和添加`validation-api-1.0.0.GA-sources.jar`到类路径。

顺便说一句，您不需要`gwt-servlet.jar`在类路径中，因为它是`gwt-user.jar`and的子集`gwt-dev.jar`；并且您应该将*编译器合规性级别*设置为 1.6，因为 GWT（尚）不支持 Java 7 功能（您可以使用 JDK 7——除非您使用请求工厂，那么您需要升级到 GWT 2.5.0-rc1 – 但是您必须使编译器符合 1.6，或者至少确保您不使用任何 Java 7 功能 – 菱形运算符、打开字符串等 –)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T13:49:31.553

有2点：

1.  GWT 2.4（源代码）仅与 Java 6 兼容。因此，您不能使用 Java 7 功能，因为它们无法使用 GWT 编译器进行编译。这就是为什么您应该使用 1.6 作为合规级别。
2.  GWT 2.4 的编辑器框架需要验证 api (javax.validation) 才能正常工作。validation-api-1.0.0.GA.jar 和 validation-api-1.0.0.GA-sources.jar 应该包含在您下载的 GWT 发行版中。将它们包含在您的类路径中。

# php - Yii Mailer PHP 错误数组到字符串的转换

> ID：11491842
> 
> 赞同：1
> 
> 时间：2012-07-15T12:21:43.390
> 
> 标签：php, arrays, yii, string-conversion

问题是复选框列表选择，它是一个多选。当我从控制器中删除以下邮件代码时，表格会通过电子邮件发送...`'{serviceItem}' => $model->selection,`

在模型中，以下爆炸和内爆用于将选择正确放入数据库表中......

```
public function afterFind()
{

    $this->selection=explode(',',$this->selection);

        return true;

}

/*implode your selection */
public function beforeSave()
{
    $this->selection=implode(',',$this->selection);
        return true;

} 
```

如果在保存之前内爆...

> [quote="php manual"] 返回一个字符串，其中包含按相同顺序表示的所有数组元素的字符串表示形式，每个元素之间带有粘合字符串。[/quote]

邮件程序`$message = strtr`从数组中返回一个字符串......

> [quote="phpmanual"]strtr - 如果给定两个参数，第二个应该是数组形式的数组('from' => 'to', ...)。返回值是一个字符串，其中所有出现的数组键都已替换为相应的值...

```
$message = strtr ('Submitted on: {submissionDate}
Name: {firstName} {lastName}

Service Item: {serviceItem}

Visitor Comments: {message}', array(
'{submissionDate}' => $model->date,
'{firstName}' => $model->firstName,
'{lastName}' => $model->lastName,

'{serviceItem}' => $model->selection,

'{message}' => $model->comments)); 
```

Q. 为什么会出现错误？和...

Q. **$model->selections 在电子邮件中发送的解决方案是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T18:02:54.210

> Q. 为什么会出现错误？

### 回答：

First`strtr()`期望数组是 form`array('stringFROM'=>'stringTO')`而不是`array('stringFROM'=>array(...))`。

您得到第二种格式（*因此错误*），因为`$model->selection`它是一个数组，因为您已经完成了`explode()`in `afterFind()`。

[`afterFind()`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#afterFind-detail)`find`每当您使用CActiveRecord 的任何方法（即`find()`、`findAll()`、`findByPk()`、等）加载模型时都会`findByAttributes()`调用它，如果我是正确的，您正在调用其中一种方法来获取当前模型。

* * *

> Q. $model->selections 在电子邮件中发送的解决方案是什么？

### 回答：

在这种情况下，您可以简单地`implode()`再次执行以获取字符串：

```
'{serviceItem}' => implode(',',$model->selection); 
```

# php - php include 不能上一层

> ID：11491855
> 
> 赞同：1
> 
> 时间：2012-07-15T12:23:26.167
> 
> 标签：php

我正在尝试包含 htdocs/sc-dev/ 中的文件 v-functions.php

我正在处理的文件位于 htdocs/sc-dev/accounts/verify

如何为文件 v-functions 编写包含，以便可以将其包含在 /verify 中的 index.php 中

我尝试使用 include ('../../sc-dev/v-functions.php'); 但这不起作用，尽管它在 /accounts 中工作正常。

我正在使用 apache 服务器在 Windows 7 Home Premium 上运行 php 5.3.13

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:25:41.777

你总是可以使用绝对路径，因为你知道它：

```
include("/htdocs/sc-dev/accounts/verify"); 
```

或者，您可以使用`$_SERVER['DOCUMENT_ROOT']`包含网站基本路径的超全局。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T12:28:50.890

在 mac os 中，它适用于：

```
 include('../../v-functions.php'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-15T12:30:18.400

您可以只使用[realpath](http://php.net/manual/en/function.realpath.php)并逐步检查每个“../”的位置。

无论如何，您想要的文件的路径：

```
htdocs/sc-dev/v-functions.php 
```

您当前的路径：

```
htdocs/sc-dev/accounts/verify/somefile.php 
```

离开一次（“../”）：

```
htdocs/sc-dev/accounts/ 
```

离开两次（“../../”）：

```
htdocs/sc-dev/ 
```

选择文件（“../../v-functions.php”）：

```
htdocs/sc-dev/v-functions.php 
```

我希望它能帮助你理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-15T12:26:39.407

您可以使用绝对路径。用`$path = $_SERVER['DOCUMENT_ROOT'];`找出你的根路径是什么然后设置目录路径。

# android - 使用联系人 ID 设置联系人图片

> ID：11491859
> 
> 赞同：0
> 
> 时间：2012-07-15T12:24:00.347
> 
> 标签：android, android-contacts

我有一个位图和一个联系人 ID。我想要一个接受这些参数并将位图设置为该 ID 的联系人图片的函数。你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:36:36.603

尝试

将您的位图转换为 byteArray

```
Bitmap bit; // <-- put your bitmap here
ByteArrayOutputStream streamy = new ByteArrayOutputStream(); 
bit.compress(CompressFormat.PNG, 0, streamy); 
byte[] photo = streamy.toByteArray(); 
```

接着

```
ContentValues values = new ContentValues(); 
int photoRow = -1; 
String where = ContactsContract.Data.RAW_CONTACT_ID + " == " + 
    ContentUris.parseId(yourContectID) + " AND " + Data.MIMETYPE + "=='" + 
    ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'"; 
Cursor cursor = managedQuery(
        ContactsContract.Data.CONTENT_URI, 
        null, 
        where, 
        null, 
        null); 
int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID); 
if(cursor.moveToFirst()){ 
    photoRow = cursor.getInt(idIdx); 
} 
cursor.close(); 
values.put(ContactsContract.Data.RAW_CONTACT_ID, 
        ContentUris.parseId(yourContectID)); 
values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1); 
values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, photo); 
values.put(ContactsContract.Data.MIMETYPE, 
        ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE); 
if(photoRow >= 0){ 
    this.getContentResolver().update(
            ContactsContract.Data.CONTENT_URI, 
            values, 
            ContactsContract.Data._ID + " = " + photoRow, null); 
    } else { 
        this.getContentResolver().insert(
                ContactsContract.Data.CONTENT_URI, 
                values); 
    } 
} 
```

不要忘记添加权限`WRITE_CONTACTS`并`READ_CONTACTS`在您的`manifest file`

# ruby-on-rails - 如何在我的应用程序中检索当前浏览网页的 URL 并向其中添加一些查询参数？

> ID：11491867
> 
> 赞同：1
> 
> 时间：2012-07-15T12:24:33.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, url, hyperlink

我正在使用 Ruby on Rails 3.2.2，我想知道如何在我的应用程序中检索当前浏览网页的 URL 并向其中添加一些查询参数。也就是说，给定用户正在浏览页面`http://www.my_application_name.org/articles/2`，我想“构建”类似`link_to` `http://www.my_application_name.org/articles/2?param1=abc&param2=efg`.

我怎么能/应该/我能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:57:18.403

您可以使用该`url_for`方法并传递 ruby​​ 哈希以将查询参数添加到当前 URL。例如，

```
<%= link_to 'Current URL with query params', url_for(param1: 'abc', param2: 'efg') %> 
```

那应该行得通。

如果想用 等获取当前URL `host`，`port`可以使用`request`对象构造如下图。

```
<%= "http://#{request.host}:#{request.port.to_s+request.fullpath}" %> 
```

# redirect - 如何摆脱 INDEXING 网站文件夹

> ID：11491879
> 
> 赞同：0
> 
> 时间：2012-07-15T12:26:04.067
> 
> 标签：redirect, indexing, directory, slash

我已将“index.html”文件放入每个文件夹以创建我的页面。

例如 www.mysite.com/volunteers/jasmine/ 将显示 jasmine 的页面，即文件夹“jasmine”中的 index.html。并且“志愿者”文件夹不包含任何“index.html”文件，但是当它在 URL 中键入如下 mysite.com/volunteers/ 时，它会在标题“/志愿者索引”下显示志愿者文件夹中的所有文件夹

**404 错误文档仅有助于重定向 mysite.com/volunteers 而不是 mysite.com/volunteers/ （最后包含斜杠）**

请帮我摆脱这种情况。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:32:25.423

在 www.mysite.com 的主文件夹中创建一个名为 .htaccess 的文件

在该文件的顶部添加这一行并保存：

```
IndexIgnore * 
```

假设您使用的是 Apache Web 服务器，如果配置为检查 .htaccess（大多数情况下，尤其是在共享主机上），它将读取此规则并阻止对您的目录进行索引。

请记住该文件名为 .htaccess（以点开头，结尾没有文件后缀）

* * *

这里有一些东西可以给你一些想法，如果找不到文件或直接（-f 或 -d），你可以测试规则，然后执行重定向到你选择的文件：

```
RewriteEngine on
RewriteCond %{DOCUMENT_ROOT}/volunteers/$1/$2 !-f
RewriteCond %{DOCUMENT_ROOT}/volunteers/$1/$2 !-d
RewriteRule ^volunteers/ /pageOfYourChoice.html? [R=301,L] 
```

服务器规则有时是试验/错误，这就是为什么我与 .htacess 技巧共享该 URL，以便您确定什么是您想要实现的最佳方案。在这里，您可能想删除 $2 并假设所有内容都是志愿者，但不确定您如何设置您的应用程序以及您去了多少个目录。这是试验/错误，.htaccess 的好处是不需要服务器重新加载/重新启动，所以尝试、测试、重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:36:59.617

其他答案中有关 Apache 和 .htaccess 文件的信息是正确的，但如果您使用 Microsoft IIS 作为 Web 服务器而不是 Apache，则需要禁用目录浏览。请参阅此处的信息：

[http://technet.microsoft.com/en-us/library/cc731109(v=ws.10](http://technet.microsoft.com/en-us/library/cc731109(v=ws.10) )

要考虑的另一件事是，您可以简单地为具有 META REFRESH 标记的文件夹创建一个 INDEX.HTML 页面，以将用户推送到其他地方。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Untitled Document</title>
  </head>
  <meta http-equiv="refresh" content="0;URL=/index.html" />
  <body>
  </body>
</html> 
```

您也可以在 .htaccess 文件中进行重定向，但对于大多数用户来说，创建 HTML 文件更快更容易。

# git - 如何在 ubuntu 上安装 git bash？

> ID：11491880
> 
> 赞同：29
> 
> 时间：2012-07-15T12:26:05.417
> 
> 标签：git, ubuntu

我是 Ubuntu 的新手。以前我在 Windows 上使用`git bash`for`git`命令。但是我决定使用 Ubuntu 并且我安装了`git`但我不确定是否有必要`git bash`在 Ubuntu 上安装？而且，如果有必要，我应该如何安装它？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-15T12:28:48.220

如果尚未安装：

```
sudo apt-get install git-core 
```

检查安装：

```
git --version 
```

安装后，您可以在 ubuntu 中的现有 bash 中使用它。

# jquery - nested_form gem 上的 jQuery 冲突

> ID：11491882
> 
> 赞同：1
> 
> 时间：2012-07-15T12:26:15.053
> 
> 标签：jquery, ruby-on-rails-3.2

所以，我认为这可能是我作为 JS 新手以及最近的 Rails 升级的问题。我正在尝试使用 Ryan Bates 的nested_form gem 创建一个复杂的动态嵌套表单。页面加载正常，看起来不错，但是当我单击“添加”和“删除”链接时，没有任何反应。将鼠标悬停在链接上会给我 javascript:void(0)。在 Chrome 中使用 JavaScript 观察者，我得到

```
Uncaught TypeError: Object #<HTMLDocument> has no method 'observe' 
```

一些谷歌搜索告诉我，这意味着我与 Prototype 有冲突，但我没有在我的应用程序的任何地方使用 Prototype（或除 jQuery 之外的任何东西）。

这是我对相关信息的猜测。请告诉我我是否遗漏了什么。

我在 Ubuntu 12.04 LTS 上使用 rails 3.2.4 rc 1 和 ruby​​ 1.9.3。

我的宝石文件：

```
source 'http://rubygems.org'
source 'http://gems.github.com'
gem 'rails', '3.2.4.rc1'

gem 'mysql'

gem 'execjs'

gem 'therubyracer'

gem 'nested_has_many_through'
gem 'validates_date_time'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', :platform => :ruby
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails', '>= 1.0.12'
gem 'formtastic', :git => 'git://github.com/justinfrench/formtastic.git', :branch => '2.1-stable'
gem "nested_form", :git => 'git://github.com/ryanb/nested_form.git' 
```

我的来自 application.js 的树

```
//= require jquery_ujs
//= require jquery
//= require jquery_nested_form
//= require_tree . 
```

资产/javascripts的内容：

```
application.js
nested_form.js
rails.js 
```

public/javascripts 中没有任何内容。

最后，这是控制台在页面加载期间输出的内容（它用于 Play 的编辑页面，其中 has_many Acts——我正在尝试使用 nested_form 添加和删除 Acts）

```
[2012-07-15 08:10:28] INFO  WEBrick::HTTPServer#start: pid=23455 port=3000

Started GET "/acts/1/edit" for 127.0.0.1 at 2012-07-15 08:10:32 -0400
Processing by ActsController#edit as HTML
  Parameters: {"id"=>"1"}
  Act Load (3.5ms)  SELECT `acts`.* FROM `acts` WHERE `acts`.`id` = ? ORDER BY act_number LIMIT 1  [["id", "1"]]
  Play Load (0.7ms)  SELECT `plays`.* FROM `plays` WHERE `plays`.`id` = 1 LIMIT 1
  Scene Load (0.9ms)  SELECT `scenes`.* FROM `scenes` WHERE `scenes`.`act_id` = 1 ORDER BY scene_number
  Rendered acts/_scene_fields.erb (2.4ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.0ms)
  Rendered acts/_scene_fields.erb (1.3ms)
  Rendered acts/edit.html.erb within layouts/application (317.0ms)
Completed 200 OK in 558ms (Views: 407.1ms | ActiveRecord: 12.7ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /jquery.js - 304 Not Modified (30ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/formtastic_changes.css?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /formtastic_changes.css - 304 Not Modified (3ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/formtastic.css?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /formtastic.css - 304 Not Modified (5ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/nested_form.js?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /nested_form.js - 304 Not Modified (3ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /application.css - 304 Not Modified (9ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started GET "/assets/scaffold.css?body=1" for 127.0.0.1 at 2012-07-15 08:10:33 -0400
Served asset /scaffold.css - 304 Not Modified (3ms)
[2012-07-15 08:10:33] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true 
```

我怀疑有什么我不小心打电话给某个地方的东西，或者什么……但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T02:21:04.330

成功！

我想通了......但我仍然不太明白为什么这些答案是正确的答案。谢谢大家的帮助和建议。事实证明，我必须做三件事。

1）@lest 是正确的，我需要将nested_form.js 从我的 assets/javascripts 文件夹中取出。2) 我不得不从调用 javascript_include_tag :defaults 切换到 javascript_include_tag 'application'。3）我必须在application.js中重新排序我的树，如下所示（我以前交换过jquery和jquery_ujs，这是我在stackoverflow上其他地方读到的建议）：

```
//= require jquery
//= require jquery_ujs
//= require jquery_nested_form
//= require_tree . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T12:52:04.253

Prototype ships with Rails, even if you're not using it directly. I've ran into some conflicts before like this. You may try the suggestion mentioned on [another Stack Overflow post](https://stackoverflow.com/questions/2528670/how-to-get-jquery-to-work-with-prototype), which is to say:

> use jQuery.noConflict(); and after this all calls to jquery should be done only using the jQuery() instead of $()

(By the way, it's not clear to me if this error is happening in code you've written or in 3rd party code. Even if it's in 3rd party code, you could try modifying it to use the jQuery() in the part that errors only and see if that gets you past the conflict.)_

# spring - 为什么事务不会在我的 junit 测试用例中开始？

> ID：11491887
> 
> 赞同：1
> 
> 时间：2012-07-15T12:27:17.077
> 
> 标签：spring, hibernate, junit, spring-transactions, spring-annotations

我有一个带有 junit4 测试套件的 Spring 3.1 MVC + Hibernate 3.6 项目。我的问题是我的测试用例中没有事务开始，即使我添加了一个*@Transactional*。

我的测试用例调用了一个控制器和一个 dao。在控制器中，无论如何都会启动事务，因此它不会抱怨。在 dao 中，我添加了一个*@Transactional(propagation = Propagation.MANDATORY)*以确保它将接受测试的事务。目前它引发了一个*IllegalTransactionStateException*，我猜这意味着没有当前事务。

我试图以编程方式创建一个事务并且它确实有效，这意味着获取 dao 服务的 AOP 代理不是问题的原因。但是我想用*@Transactional*注释创建一个事务。

这是我的道：

```
// ...imports...

@Repository("taskDao")
@Transactional(propagation = Propagation.MANDATORY)
public class TaskHome implements TaskDao {

    private static final Log log = LogFactory.getLog(TaskHome.class);

    private SessionFactory sessionFactory;

    @Autowired
    public TaskHome(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }

    public Task findById(int id) {
        log.debug("getting Task instance with id: " + id);
        try {
            Task instance = (Task) this.sessionFactory.getCurrentSession().get(
                    Task.class, id); // exception raised here!
            if (instance == null) {
                log.debug("get successful, no instance found");
            } else {
                log.debug("get successful, instance found");
            }
            return instance;
        } catch (RuntimeException re) {
            log.error("get failed", re);
            throw re;
        }
    }
    ...
} 
```

这是我的测试用例：

```
// ...imports...

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "/test-config.xml", "/applicationContext.xml" })
@TransactionConfiguration(defaultRollback = true)
@Transactional
public class TestTaskController {

    private static ClassPathXmlApplicationContext context;
    private static TaskDao taskDao;

    @BeforeClass
    public static void initHibernate() throws Exception {
        context = new ClassPathXmlApplicationContext("applicationContext.xml");
        taskDao = context.getBean("taskDao", TaskDao.class);
    }

    @Test
    public void testOnSubmit() {

        // expects an existing default transaction here

        Task task = taskDao.findById(1); // fails already here

        // ... calls the controller and does some tests. 

    }

} 
```

我搜索了 Spring 的所有文档并以我能想象的任何方式搜索它，但我不明白为什么交易没有开始。非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-15T13:44:38.180

使用时，`@RunWith(SpringJUnit4ClassRunner.class)`您应该从创建的应用程序上下文中获取 bean，`SpringJUnit4ClassRunner`而不是从您自己的上下文中获取。

在您的情况下，事情出错了，因为`@Transactional`在单元测试中在由 管理的应用程序上下文中创建了一个事务`SpringJUnit4ClassRunner`，但是您调用了从手动创建的应用程序上下文获得的 bean 上的方法。

因此，删除您的`@BeforeClass`方法并`TaskDao`通过自动装配获得：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({ "/test-config.xml", "/applicationContext.xml" })  
@TransactionConfiguration(defaultRollback = true)
@Transactional  
public class TestTaskController {
    @Autowired
    private TaskDao taskDao; 

    ...
} 
```

**也可以看看：**

*   [9.3.5 Spring TestContext 框架](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#testcontext-framework)

# java - 如何将 Java 图像集合转换为 CvArr

> ID：11491895
> 
> 赞同：5
> 
> 时间：2012-07-15T12:28:29.640
> 
> 标签：java, opencv, javacv

我想通过*javacv*包装库`FaceRecognition`在 java中使用 OpenCV。我不知道如何将图像和标签传递给*`com.googlecode.javacv.cpp.opencv_contrib.FaceRecognizer.train(CvArr, CvArr)`*

 *我可以使用`cvLoadImage(String)`或`cvLoadImageM(String)`获取单个图像，但是如何制作`CvArr`它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:51:16.690

经过一番[阅读](http://opencv.willowgarage.com/documentation/basic_structures.html#cvarr)，我发现这`CvArr`是一种不透明的类型。您只需使用任何数据进行初始化 - 毕竟它只是一个 C 指针。所以：

```
CvMat[] images = new CvMat[n];
images[0] = cvLoadImageM(...);
...
CvArr arr = new CvArr(new CvMatArray(images)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T21:46:38.333

这篇文章是关于在 JavaCV 中使用 Contrib 模块的。它还解释了如何将图像传递给包装函数：

*   [Android上的人脸识别](https://stackoverflow.com/questions/11699744/face-recognition-on-android/11700665#11700665)*

# asp.net - 在 Web 应用程序中更改图表数据点上的光标

> ID：11491896
> 
> 赞同：0
> 
> 时间：2012-07-15T12:28:44.630
> 
> 标签：asp.net, asp.net-charts

我在我的 Web 应用程序中使用 asp.net 图表。所有数据点都是可点击的。我使用每个点的 MapAreaAttributes 来调用 javascript 函数“onclick”事件。

我想将光标更改为鼠标悬停在数据点事件上的指针。我试过了：

```
chart.Series["series"].Points[i].MapAreaAttributes += "onmouseover=\"this.style.cursor='pointer'\" onmouseout=\"this.style.cursor='default'\""; 
```

但它不起作用。

有人有解决方案吗？

在此先感谢您的帮助，

英巴尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:08:54.453

您需要在 prepaint 事件中执行此操作。正如我通过调用 javascript 方法 onmouseover 为我的自定义工具提示所做的那样

```
<asp:Chart ID="ChartEXCEL" OnPrePaint="ChartEXCEL_Load" ClientIDMode="Static" Width="300px" Height="200px" runat="server"> 
```

```
protected void Chart1_Load(object sender, ChartPaintEventArgs e)
{
    if (e.ChartElement is Series)
    {

        Series series = (Series)e.ChartElement;
        System.Drawing.PointF position = System.Drawing.PointF.Empty;

        series.MapAreaAttributes = "onmouseover=\"showTooltip('#VALY-#VALX');\"";

    }
} 
```

# magento - 如何为 Mage::getModel()->getCollection(); 使用 sql COUNT？

> ID：11491898
> 
> 赞同：0
> 
> 时间：2012-07-15T12:28:47.647
> 
> 标签：magento

我想知道在制作 Magento 模块时如何使用 arregate sql 函数。我目前在我的模式中有这个代码；

```
$rake = Mage::getModel('showdown/votes')->getCollection();
$rake->addFieldToFilter('votedfor', $productid);
//$collection->groupByFilter('matchid'); //<-- what do i put here?
$sticks = count($rake); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T13:15:00.433

我不确定您想要实现什么，因为您的问题标题与提供的代码示例冲突。

标题询问如何计算集合，您的代码示例询问如何执行分组依据。

所以，

**收集计数**

`count($collection)`，`$collection->count()`或者简单地说`$collection->getSize()`，这将避免收集负载（如果您只需要计数而不需要其他任何东西，这是理想的）

**通过...分组**

*基于 EAV 的集合：*

```
 $collection->groupByAttribute('matchid'); 
```

*非基于 EAV 的集合：*

```
 $collection->getSelect()->group('matchid'); 
```

# qr-code - 二维码转换

> ID：11491900
> 
> 赞同：-1
> 
> 时间：2012-07-15T12:28:57.503
> 
> 标签：qr-code

我有一个**文本到二维码转换器**。我想用它来创建二维码，如网站 URL、YouTube 视频、谷歌地图位置、电话号码、Skype 通话、短信、电子邮件地址、电子邮件消息、联系方式 (VCARD)、事件 (VCALENDAR)、电话号码

你能给我创建它的代码吗，就像我必须创建电子邮件一样-

```
MATMSG:
TO:xyz@abc.com;
SUB:I am sending this email using QR code;
BODY:I have stored all of your letters in QR codes.
[Add more here]
Thanks
[Your Name];; 
```

你可以查看我的[二维码生成器](http://www.gauravtips.in/test/rech)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T12:37:40.910

请注意，只有一些 QR 码阅读器会识别这些不同的类型，并且它不适用于各种手机/设备。在所有设备都符合标准之前，最好使用文本字符串/URL 保持简单。Android 似乎支持大多数类型，参考实现是他们的 Barcode Scanner，它也是在 google code (zxing) 上开源的。

*   [http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)

您可以查看他们的来源，了解他们如何生成不同类型的...然后使用此在线生成器将您的输出与他们的输出进行比较：

*   [http://zxing.appspot.com/generator](http://zxing.appspot.com/generator)

# c# - 如何将一个字符串数组的每个元素与另一个字符串数组的每个元素进行比较？

> ID：11491906
> 
> 赞同：1
> 
> 时间：2012-07-15T12:29:53.023
> 
> 标签：c#, arrays, string

我有两个字符串数组。我想从第一个数组中选择一个元素并与第二个数组的每个元素进行比较。如果第一个数组的元素存在于第二个数组的元素中，我想写例如（“元素存在”）或类似的东西。

这应该可以用两个 for 循环来做？

编辑

好的，我终于实现了我想要的使用此代码：

```
string[] ArrayA = { "dog", "cat", "test", "ultra", "czkaka", "laka","kate" };
string[] ArrayB = { "what", "car", "test", "laka","laska","kate" };

bool foundSwith = false;

for (int i = 0; i < ArrayA.Length; i++)
{

   for (int j = 0; j < ArrayB.Length; j++)
   {
       if (ArrayA[i].Equals(ArrayB[j]))
       {
           foundSwith = true;
           Console.WriteLine("arrayA element: " + ArrayA[i] + " was FOUND in arrayB");
       }
   }

   if (foundSwith == false)
   {
      Console.WriteLine("arrayA element: " + ArrayA[i] + " was NOT found in arrayB");
   }
   foundSwith = false;
} 
```

我希望这将有助于其他想要比较两个数组的人；）。这一切都与这个foundSwitch有关。Thx 再次寻求帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-15T12:33:23.113

```
foreach (string str in yourFirstArray)
{
   if (yourSearchedArray.Contains(str))
   {
      Console.WriteLine("Exists");
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:33:52.170

```
foreach (string str in strArray)
{
   foreach (string str2 in strArray2)
   {
       if (str == str2)
       {
          Console.WriteLine("element exists");
       }
   }
} 
```

*更新为在 strArray2 中不存在字符串时显示*

```
bool matchFound = false;
foreach (string str in strArray)
    {
       foreach (string str2 in strArray2)
       {
           if (str == str2)
           {
              matchFound = true;
              Console.WriteLine("a match has been found");
           }
       }

       if (matchFound == false)
       {
          Console.WriteLine("no match found");
       }
    } 
```

或者以更少的代码行执行此操作的另一种方法：

```
foreach (string str in strArray)
{
    if(strArray2.Contains(str))
    {
       Console.WriteLine("a match has been found");
    }
    else
    {
       Console.WriteLine("no match found");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-15T03:00:58.747

You can also try:

```
ArrayA.All(ArrayB.Contains); 
```

# c# - 添加新的对象实体框架。一对多

> ID：11491907
> 
> 赞同：0
> 
> 时间：2012-07-15T12:29:55.583
> 
> 标签：c#, .net, entity-framework-4, entity-relationship, one-to-many

我有用户和人员表。一个用户有很多人。当我向现有用户添加新人员时，**我是否必须检索用户对象并向其添加新人员，或者将用户 ID 指定给人员对象是否足够？**

```
public void InsertUpdatePerson(int? personId, string firstName, string lastName,
            string middleName, DateTime dob, string mobile, string email, int userid)
        {
            using (DBEntities context = new DBEntities())
            {
                Person pers;
                if (personId.HasValue)
                {
                    pers = context.People.Where(p => p.PersonID == personId).FirstOrDefault();
                    pers.FirstName = firstName;
                    pers.LastName = lastName;
                    pers.MiddleName = middleName;
                    pers.DOB = dob;
                    pers.Mobile = mobile;
                    pers.Email = email;
                    pers.UserID = userid;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T12:40:36.667

我首先使用 EF 4.3.1 代码，但事实并非如此。您可以简单地设置外键而不需要检索。

# php - 获取 Facebook 帖子的所有共享列表

> ID：11491908
> 
> 赞同：3
> 
> 时间：2012-07-15T12:30:03.323
> 
> 标签：php, facebook-graph-api

我可以使用 facebook sdk 获得评论和喜欢的列表。但是我找不到一种方法来获取所有共享帖子的用户的列表（我也尝试过 fql）。

这是我用来获得喜欢的代码：

```
$facebook = new Facebook($config);

$likes = $facebook->api('/THE_POST_ID/likes',
    array('limit'=>9999999999)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T13:36:44.160

在撰写本文时，Facebook Graph API 允许您获取帖子的分享数。使用您的代码，它将如下所示（请不要说我在这里没有进行任何异常处理以保持示例简单）：

```
$facebook = new Facebook($config);

// fetch the post data.
$post = $facebook->api('/THE_POST_ID/');

// fetch the count of shares.
$sharesCount = $post["shares"]["count"]; 
```

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer/)，您可以轻松地看到这一点。

不幸的是，API 没有像“喜欢”和“评论”那样提供“分享”连接。有关详细信息，请参阅[Post - Facebook Graph API 文档](https://developers.facebook.com/docs/reference/api/post/)。

另一方面，检索分享特定帖子的用户列表（仅限朋友和公开分享的人）有一个肮脏的技巧。该解决方案在另一个线程上进行了解释：[在 facebook 上共享的人员列表](https://stackoverflow.com/questions/7748037/list-of-people-who-shared-on-facebook "在 Facebook 上分享的人列表")。但是，我永远不会建议使用该解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T08:55:41.157

是的，您可以获得 Facebook 帖子的所有共享列表。

通过访问：

```
https://graph.facebook.com/{POST_ID}/sharedposts?access_token={ACCESS_TOKEN} 
```

请参阅： [https ://developers.facebook.com/docs/graph-api/reference/v2.5/post](https://developers.facebook.com/docs/graph-api/reference/v2.5/post)

[![在此处输入图像描述](../Images/84f41e0b189bc48a3e5685b0dddaad22.png)](https://i.stack.imgur.com/w04MN.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:34:29.213

我知道您希望通过 post_id 获取共享，但是您可以满足于通过 page_id 而不是 post_id 查找共享吗？

如果可以，那么您可以使用以下 FQL 来获取您要查找的数据。

```
SELECT via_id, created_time, owner_comment
FROM link
WHERE owner = me() 
```

然后，您可以将 via_id 与帖子作者（页面 ID）进行比较，以确定此共享是否来自相关帖子作者。

不幸的是，数据返回似乎存在一个错误，其中一些 via_id 返回为 0。Facebook 有一张票，在本文发布时，该票已以中等优先级开放三周。我不知道这个问题是特定于我的应用程序还是影响到每个人，但该查询可能会为您提供所需的内容。

# java - DialogFragments，android中的空指针异常

> ID：11491913
> 
> 赞同：1
> 
> 时间：2012-07-15T12:31:08.527
> 
> 标签：java, android, dialog, onclick, nullpointerexception

这是我的代码片段：

```
public class ChooseNumWorkoutsDialog extends DialogFragment implements OnClickListener {
    Button btnClose, btnFinished;
    NumberPicker np;

    public ChooseNumWorkoutsDialog() {
        // Empty constructor required for DialogFragment
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.dialog_numpicker, container);
        getDialog().setTitle("Number of Exercises");
        btnClose = (Button) findViewById(R.id.btnClose);
        btnFinished = (Button) findViewById(R.id.btnFinished);
        np = (NumberPicker) findViewById(R.id.np);
        //np.setMaxValue(20);
        //np.setMinValue(1);
        //np.setWrapSelectorWheel(false);
        //btnClose.setOnClickListener(this);
        //btnFinished.setOnClickListener(this);   
        return view;
    } 
```

XML 文件确实包含所有引用的按钮和 numberPickers。当它运行时，在“np.setMaxValue(20);”处发现一个空指针异常，我可以让它工作的唯一方法是注释掉你看到的所有注释掉的部分。

*   是否有一些我不知道的规则指出我无法在对话片段中设置我的 onclick 侦听器等？
*   解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:39:07.273

[在onActivityCreated()](http://developer.android.com/reference/android/app/Fragment.html#onActivityCreated%28android.os.Bundle%29)中初始化您的视图。从文档：

> 当片段的活动被创建**并且这个片段的视图层次被实例化时调用。一旦这些部分到位，它就可以用来进行最终初始化，例如检索视图**或恢复状态。它对于使用 setRetainInstance(boolean) 来保留其实例的片段也很有用，因为此回调告诉片段何时与新活动实例完全关联。这在 onCreateView(LayoutInflater, ViewGroup, Bundle) 之后和 onStart() 之前调用。

比你可以打电话`getView().findViewById(R.id.np);`

或使用`np = (NumberPicker) view.findViewById(R.id.np);`in `onCreateView()`，注意“**视图**” 。

# c++ - VK_CONTROL/VK_MENU/VK_SHIFT 的默认值

> ID：11491925
> 
> 赞同：9
> 
> 时间：2012-07-15T12:33:29.797
> 
> 标签：c++, winapi, keyboard

我们的键盘上有 2 个//`CTRL`按钮。但是在win api中有//可用。那么（左）或（右）哪个值是默认值？或者它可能根据某些情况选择价值？在 MSDN 和 Google 中都找不到答案。`ALT``SHIFT``VK_CONTROL``VK_LCONTROL``VK_RCONTROL``VK_CONTROL?` `VK_LCONTROL``VK_RCONTROL`

我认为与 - 它们是交替的无关紧要`CTRL`，但它与例如`ALT`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-15T12:49:37.237

WinUser.h 中的文本：

`VK_L* & VK_R* - left and right Alt, Ctrl and Shift virtual keys.`
`Used only as parameters to GetAsyncKeyState() and GetKeyState().`
`No other API or message will distinguish left and right keys in this way.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T13:03:55.970

据我所知，这些常量是在 WinUser.h 中声明的

```
#define VK_LSHIFT         0xA0
#define VK_RSHIFT         0xA1
#define VK_LCONTROL       0xA2
#define VK_RCONTROL       0xA3
#define VK_LMENU          0xA4
#define VK_RMENU          0xA5 
```

# rule-engine - 规则引擎的替代技术是什么？

> ID：11491931
> 
> 赞同：1
> 
> 时间：2012-07-15T12:33:54.113
> 
> 标签：rule-engine

规则引擎通常用于自动和动态地执行一组规则以得出结果。规则引擎对于将业务组件与技术操作分离更特别有用。任何其他技术可以替代规则引擎，但仍然对动态信息执行相同的自动化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-18T00:11:38.973

你看过[NebriOS](http://nebrios.com)吗？如果这不能满足您的需求，我会感到惊讶。听起来您可能正在寻找一种更通用的解决方案，而不是可以与其他平台和服务交互的业务规则管理环境。也许，更多的是一个独立的软件工具？

# c++ - OpenProcess 每次在 C++ 中都返回 NULL？

> ID：11491933
> 
> 赞同：2
> 
> 时间：2012-07-15T12:34:04.440
> 
> 标签：c++, process, handle

我从一个站点“复制”了一个简单的代码片段，并将其调整为我试图破解的游戏。一个没有多人游戏的老游戏，基本上只是为了练习所有这些记忆编辑的东西。每次我的程序成功返回一个窗口句柄，但随后无法返回进程句柄。这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <Windows.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    long address = 0x47C0F04;
    int newvalue = 200; 
    DWORD newvaluesize = sizeof(newvalue);

    HWND hWnd = FindWindow(0, L"No One Lives Forever");
    HANDLE pHandle; 
    DWORD pid; 

    if(hWnd != 0) { 
        cout << "Found windowx.\n"; 
        GetWindowThreadProcessId(hWnd, &pid);
        pHandle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid); 
    } 
    else {
        cout << "Can't find window\n";
    } 
    if(pHandle !=0) { 
        WriteProcessMemory(pHandle, (LPVOID)address, (LPVOID)newvalue, newvaluesize, 0);    
        cout << "Written to memory successfully\n";
    } 
    else { 
        cout << "Couldn't get handle.\n";
    } 
    CloseHandle(pHandle);
    return 0;
} 
```

如果我没记错的话，这个游戏是从 2000 年开始的（顺便说一句真的很棒的游戏）所以我假设它没有任何先进的反黑客防护罩，因为我也可以在作弊引擎中编辑该地址的值和它可以毫不费力地工作。

编辑：我将解释到底发生了什么。它总是打印“找到窗口”，然后直接打印“无法处理”。我没有收到任何编译器错误（我正在 Microsoft Visual C++ 2010 Express 中编译）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-03-28T21:52:33.167

您必须以管理员身份运行程序才能获得具有 PROCESS_ALL_ACCESS 权限的句柄，这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-20T13:58:33.413

正如**GuidedHacking**提到的，您需要以管理员身份运行程序，使用此代码检查您的进程是否以**管理员权限运行。**

```
BOOL IsElevatedProcess()
{
    BOOL is_elevated = FALSE;
    HANDLE token = NULL;
    if (GT_IsPrivateMethod(gt_private_method, FUNC_NAME, LINE_NO))
    {
        if (OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &token))
        {
            TOKEN_ELEVATION elevation;
            DWORD token_sz = sizeof(TOKEN_ELEVATION);
            if (GetTokenInformation(token, TokenElevation, &elevation, sizeof(elevation), &token_sz))
            {
                is_elevated = elevation.TokenIsElevated;
            }
        }
        if (token)
        {
            CloseHandle(token);
        }
    }
    return is_elevated;
} 
```

# javascript - 使用 JSON.stringify() 和 JSON.parse() 时的 Date() 问题

> ID：11491938
> 
> 赞同：46
> 
> 时间：2012-07-15T12:34:46.997
> 
> 标签：javascript, json, date

我正在尝试使用 JavaScript 计算两次之间的差异。`JSON.stringify()`这只是基本的数学，但我在使用and时似乎遇到了一些问题`JSON.parse()`。

如果您想知道为什么我将`JSON.stringify()`函数应用于日期，那是因为我使用本地存储在客户端存储一些数据并在客户端再次登陆我的网站时使用它（这样更快而不是发出更多请求到服务器）。该数据通常会不时更新（我通过 API 从另一个网站获取数据），因此我设置了一个`data_update`变量并将其与其他数据一起存储。

这样我就可以从本地存储中获取存储的数据，并检查`data_update`（日期/时间）和检查时的时间/日期之间的差异，看看它是否大于一周/天/etc。

这就是我使用 JSON 函数的原因。我的问题是，当我从本地存储解析数据时，日期似乎与`Date()`对象不同。

我正在尝试按说执行下一个操作：

```
var x = JSON.parse(JSON.stringify(new Date()));

var y = JSON.parse(this.get_local_storage_data(this.data_cache_key)); // the data object stored on local storage

var q = y.data_update; // this is the variable where the Date() was stored

console.log(Math.floor((x-q)/1000)); 
```

以上将返回`null`。此外，当我想查看`Math.floor(x)`结果时，它会`null`再次返回。

那么在这种情况下我能做些什么呢？有解决办法吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-15T12:42:18.053

如果您查看 JSON.stringify 的日期输出，您会看到：

```
JSON.stringify(new Date()) 
```

结果是一个字符串。JSON 没有 Date 对象的原始表示，JSON.parse 将自动转换回 Date 对象。

Date 对象的构造函数可以采用日期字符串，因此您可以通过执行以下操作将这些字符串值转换回日期：

```
var x = new Date(JSON.parse(JSON.stringify(new Date()))); 
```

然后算术将起作用。

```
x = new Date(JSON.parse(JSON.stringify(new Date())))
y = new Date(JSON.parse(JSON.stringify(new Date())))
y - x
=> 982 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-10-06T15:35:30.503

```
JSON.stringify(new Date()) 
```

返回

> “2013-10-06T15:32:18.605Z”

感谢上帝是：`Date.prototype.toISOString()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T07:07:10.117

正如推荐的答案所暗示的那样，日期只是在使用时转换为字符串`JSON.stringify`。

可能适合此用例的另一种方法是以毫秒为单位存储时间，使用[`Date.now()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now)：

```
// Date.now() instead of new Date()
const millis = Date.now();

console.log(millis);

// same output as input
console.log(JSON.parse(JSON.stringify(millis)));
```

这样您就可以确保`JSON.stringify`在使用`JSON.parse`.

如果您有两个毫秒值，这也可以很容易地比较日期，使用`<`and `>`。

另外，您可以随时将毫秒转换为日期（通常在将其呈现给用户之前）：

```
const millis = Date.now();

console.log(millis);

console.log(new Date(millis));
```

注意：通常不建议使用毫秒作为日期表示，至少不在您的数据库中：[https](https://stackoverflow.com/a/48974248/10551293) ://stackoverflow.com/a/48974248/10551293 。

# objective-c - Arc 在委托可以回调之前删除了我的对象

> ID：11491939
> 
> 赞同：0
> 
> 时间：2012-07-15T12:34:54.423
> 
> 标签：objective-c, memory-management

我是 iOS 编程新手，最近在内存管理方面学到了宝贵的一课。我解决了我的问题，但我不确定这是否是正确的方法。

```
UserFetcher *userFetcher = [[UserFetcher alloc] init];
[userFetcher setDelegate: self];
[userFetcher fetchData]; 
```

在这段代码中，userFetcher 使用RestKit 对外部服务器进行REST 调用，即UserFetcher 包装了RestKit。当 Restkit 将值返回给 userFetcher 时，由于 userFetcher 已被销毁，因此会引发错误。发生这种情况是因为创建 UserFetcher 的父方法（上面的代码）完成执行，并且我假设 ARC 将其释放。

我通过创建类型（强，非原子）的私有属性 UserFetcher 解决了这个问题。我想知道这是否是解决问题的最佳方法？或者我的设计可以改进吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:04:59.453

你解决得很好。您需要对该对象的强引用。当你确定完成后，“userFetcher=nil;” 将释放它。

# c# - 文本框自动完成无法正常工作

> ID：11491943
> 
> 赞同：0
> 
> 时间：2012-07-15T12:35:38.817
> 
> 标签：c#, .net, forms, autocomplete, window

我在窗口表单应用程序中处理文本框自动完成时遇到问题。我的收藏在搜索中显示了 50 条记录。但我在文本框建议中只收到 2 个。为什么？见代码。我在 txtInput_TextChanged 事件中做这项工作。

```
private void txtInput_TextChanged(object sender, EventArgs e)
    {
        string str = txtInput.Text.ToString();
        dv = new DataView(dt);
        dv.RowFilter = "MedicineName like '%" + str + "%'";
        for (int i = 0; i < dv.Count; i++)
        {
            string name = dv[i]["MedicineName"].ToString();
            nameCollection.Add(name);
        }
        txtInput.AutoCompleteMode = AutoCompleteMode.Suggest;
        txtInput.AutoCompleteSource = AutoCompleteSource.CustomSource;
        txtInput.AutoCompleteCustomSource = nameCollection;
        //textboxMedicine.BorderStyle = BorderStyle.Fixed3D;
        //textboxMedicine.ScrollBars = ScrollBars.Vertical;
    } 
```

我还在属性窗口中设置了自动完成和自动完成源。但我的文本框自动完成建议仍然无法正常工作。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:41:44.467

将此`AutoCompleteMode.SuggestAppend`用于`AutoCompleteMode`

```
txtInput.AutoCompleteMode = AutoCompleteMode.SuggestAppend; 
```

## 编辑：

更改`like`为`LIKE`

```
dv.RowFilter = "MedicineName LIKE '%"+str+"%'"; 
```

# python - 比在 python 中使用 if-else 语句更好的方法

> ID：11491944
> 
> 赞同：11
> 
> 时间：2012-07-15T12:35:45.110
> 
> 标签：python, if-statement

> **可能重复：**
> [将一个简单的 if-then 语句放在一行上](https://stackoverflow.com/questions/2802726/putting-a-simple-if-then-statement-on-one-line)

我正在研究一个 python 表达式，我希望该表达式被压缩而不是使用 if else 语句。

```
s = [1, 2, 3, 4]
if len(s)>5:
    print s.index(5)
else:
    print 'cant print' 
```

有没有比使用 as if else 语句更好的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-15T12:38:15.810

你可以做：

```
s = [1, 2, 3, 4]
print 'y' if len(s) > 5 else 'n' 
```

但是我认为这不会使代码更具可读性（一目了然）。另请注意，`if`不要`else`创建循环，它们只是控制流的语句。循环是使用`for`和编写的`while`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-15T12:42:18.457

简短，但非常模糊（不要这样做）：

```
print 'ny'[len(s) > 5] 
```

[编辑] 你不应该这样做的原因是因为它使用了大多数人鲜为人知的语言属性，即 bool 是 int 的子类。在大多数情况下，您发现自己在编写像 OP 这样的代码，通常最好创建一个标志变量

```
s_is_long = len(s) > 5 
```

那么您可以使用任何更合适的方式来编写打印，例如：

```
print 'y' if s_is_long else 'n' 
```

或者

```
print {True: 'y', False: 'n'}[s_is_long] 
```

或最易读的...

```
if s_is_long:
    print 'y'
else:
    print 'n' 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-15T13:21:37.847

在这种情况下，您可以使用 try/except 块：

```
try:
    print s.index(5)
except ValueError:
    print "5 not in list" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-15T12:53:35.143

Short and clear:

```
s = [1, 2, 3, 4]
output = {True: 'y',False: 'n'}
print output[len(s) > 5] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-15T13:00:31.723

另一种变化：

```
print len(s)>5 and 'y' or 'n' 
```

只是为了完整性而添加的。不要在家里尝试这个！;-)

# objective-c - ObjC 方法类型编码字符串中的数字是什么？

> ID：11491947
> 
> 赞同：16
> 
> 时间：2012-07-15T12:35:58.227
> 
> 标签：objective-c, objective-c-runtime, method-signature

我正在阅读 Apple[关于 Objective-C 运行时类型编码字符串的文章，](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html) 并且某些方法的类型字符串中有数字。

里面的数字`v12@0:4@8`是什么意思？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-15T13:06:24.270

这看起来像这样的 setter 方法的编码：

```
- (void) setSomething:(id) anObject 
```

分解它：

*   `v`表示 void 返回类型
*   `12`表示参数帧的大小（12 字节）
*   `@0`表示在参数帧的字节偏移量 0 处有一个 Objective-C 对象类型（这是`self`每个 Objective-C 方法中的隐式对象）
*   `:4`表示在字节偏移量 4 处有一个选择器（这是`_cmd`每个方法中隐含的，它是用于调用该方法的选择器）。
*   `@8`表示在字节偏移量 8 处还有另一个 Objective-C 对象类型。

# c++ - OS X 上的 Eclipse CDT 抱怨 gcc 内置函数：“函数 '__builtin_bzero' 无法解析”

> ID：11491950
> 
> 赞同：1
> 
> 时间：2012-07-15T12:36:33.277
> 
> 标签：c++, eclipse, sockets, gcc, eclipse-cdt

我正在将 Eclipse CDT 中的一些 c++ 网络代码作为 makefile 项目工作，但 eclipse 抱怨`FD_ZERO`. 编译工作正常。

最小的例子：

```
#include <arpa/inet.h>

void test()
{
    fd_set fds;
    FD_ZERO(&fds);
} 
```

这显示为“Eclipse is `Function '__builtin_bzero' could not be resolved`”错误。

这`FD_ZERO`是在 `sys/select.h' 中定义的宏

```
sys/select.h:#define    FD_ZERO(p)  __DARWIN_FD_ZERO(p) 
```

并且`sys/_structs.h`我们可以发现`__DARWIN_FD_ZERO`被定义为对 gcc 内置函数的调用。

```
#define __DARWIN_FD_ZERO(p)     __builtin_bzero(p, sizeof(*(p))) 
```

我在 CDT 中选择了 mac os x 工具链，没有更改任何其他选项。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T01:58:25.603

我注意到这还没有得到回答，所以为了完整起见，这是我的解决方案：

改为使用`memset(&fds, 0, sizeof fds);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T19:09:10.457

问题只是 __builtin_bzero 就是这样，它是在编译器级别内置的。CDT 不知道这一点，因为它有自己的解析器。

# regex - 是否可以使用正则表达式作为变量在崇高的文本中进行查找和替换？

> ID：11491954
> 
> 赞同：14
> 
> 时间：2012-07-15T12:36:53.153
> 
> 标签：regex, replace, sublimetext, sublimetext2

我有一个看起来像这样的正则表达式搜索：

```
'\d*.\d*, \d*.\d*' 
```

我想更改`'`和`,`，但保留 d*。这在崇高的文本中可能吗？如果没有，最简单的方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-18T14:04:00.023

这与大多数其他可以使用正则表达式的地方一样。

将要保留的图案部分分组，并在替换中引用它们

图案：`'(\d*.\d*), (\d*.\d*)'` 替换：`$1 $2`

*此示例将删除`'`和`,`*

# objective-c - 为什么我的对象不符合键值编码？

> ID：11491957
> 
> 赞同：1
> 
> 时间：2012-07-15T12:37:04.903
> 
> 标签：objective-c, cocoa, key-value-coding

尝试使用键值编码在我的对象上设置值：

```
[engine setValue:[NSNumber numberWithInt:horsePower]
          forKey:@"horsePower"]; 
```

导致错误：

```
[<Slant6 0x7fbc61c15c40> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key horsePower. 
```

我需要做什么才能使`engine`键值编码兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T12:41:45.980

确保`engine`属于的任何类都实现了`horsePower`属性，和/或具有`horsePower`实例变量，和/或手动实现`setHorsePower:`和`horsePower`方法。

您收到错误是因为您尝试设置`horsePower`键的值，但`engine`' 的类没有正确实现设置`horsePower`键的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-15T12:43:04.187

有很多利用 KVC[的方法](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)——也许最简单的方法是在你的类中使用你想要使用的键名的实例变量，即：

```
@interface Engine: NSObject {
    NSNumber *horsePower;
    // etc.
} 
```

# user-interface - gtk+ 中的对齐

> ID：11491966
> 
> 赞同：1
> 
> 时间：2012-07-15T12:38:03.860
> 
> 标签：user-interface, gtk

我希望我的标题在顶部，下一个按钮在右下角。但我无法做到这一点。它显示在右中下，并且标题略高于底部。使用下一个按钮，我想移动到其他窗口，我在这里打电话`gtk_main_quit()`。我的代码是：

```
#include <gtk/gtk.h>

int main (int argc, char *argv[])
{

        GtkWidget *window;
        GtkWidget *next;

        GtkWidget *align;
        GtkWidget *label;
        GtkWidget *vbox;
        GtkWidget *hbox;
        GtkWidget *halign;
        GtkWidget *valign;

        gtk_init (&argc, &argv);

        window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
        gtk_window_set_title(GTK_WINDOW(window), "Center");//title position
        gtk_window_set_default_size(GTK_WINDOW(window),600,500);//size
        gtk_window_set_position(GTK_WINDOW(window), GTK_WIN_POS_CENTER);//position
        vbox = gtk_vbox_new(FALSE, 5);

        valign = gtk_alignment_new(0, 1, 0, 0);
        gtk_container_add(GTK_CONTAINER(vbox), valign);
        gtk_container_add(GTK_CONTAINER(window), vbox);

        hbox = gtk_hbox_new(FALSE, 3);

        next = gtk_button_new_with_label("Next");
        gtk_widget_set_size_request(next, 70, 30);
        gtk_container_add(GTK_CONTAINER(hbox), next);
        halign = gtk_alignment_new(1, 0, 0, 0);
        gtk_container_add(GTK_CONTAINER(halign), hbox);
        align = gtk_alignment_new(0, 0, 1, 0);

        gtk_box_pack_start(GTK_BOX(vbox), halign, FALSE, FALSE, 0);

    g_signal_connect(G_OBJECT(next), "clicked",
                        G_CALLBACK(gtk_main_quit), G_OBJECT(window));
        label = gtk_label_new("No. of projects are:\n");

        gtk_container_add(GTK_CONTAINER(vbox), label);

        gtk_widget_show_all(window);

        g_signal_connect_swapped(G_OBJECT(window), "destroy", G_CALLBACK(gtk_main_quit), NULL);

        gtk_main ();

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:08:42.493

您`vbox`从上到下添加元素，因此如果您希望标签出现在顶部，您应该移动这些行：

```
 label = gtk_label_new("No. of projects are:\n");  
    gtk_container_add(GTK_CONTAINER(vbox), label); 
```

所以标签是添加到的*第一个对象*`vbox`，就在你初始化它之后。然后“下一步”按钮也会移动到右下角。

GTK+ 2.0 教程中有一个章节是关于这个的：[Packing Widgets](http://developer.gnome.org/gtk-tutorial/2.90/c354.html)。

# mesh - 如何获得在 X3D 文件中定义的对象的三角形网格？

> ID：11491967
> 
> 赞同：0
> 
> 时间：2012-07-15T12:38:11.270
> 
> 标签：mesh, x3d

我们可以在 X3D 中以声明式的方式做一些事情，比如说有一个盒子在什么位置和大小：

```
<Shape>
  <Box size='1 2 3'/>
  <Appearance>
    <Material/>
  </Appearance>
</Shape> 
```

我想知道是否有任何工具可以将 X3D 对象转换为其三角形网格表示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T11:09:06.887

A) 从instantreality.org 安装InstantReality 包

B) 寻找“aopt”命令行工具（取决于您的平台）

C) aopt -i foo.x3d -e foo.wrl（将渲染图导出到 VRML/WRL 文件）

# php - 如何使外部参照链接在 PHP 包含文件中工作

> ID：11491970
> 
> 赞同：0
> 
> 时间：2012-07-15T12:38:39.363
> 
> 标签：php, include

当我在 PHP 中使用 include 或 require 并使用 URL 作为包含文件时，该包含文件中的外部参照链接引用其自己的路径，但在我的 PHP 页面中单击（执行）时，希望该文件位于同一路径中作为我自己的PHP文件。如何告诉 PHP 在远程 URL 中查找该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:42:46.943

你有两个选择：

1.  [使用file_get_contents](http://php.net/file_get_contents)读取文件并使用字符串或 DOM 函数操作所有 URL:s。
2.  添加一个更改整个文档的所有相对 URL:s的[基本元素。](https://developer.mozilla.org/en/HTML/Element/base)

选项 1 实际上是好的，原因有很多。您应该避免包含远程文件，因为您不能相信它们总是只输出 HTML。考虑一下包含的文件是否突然给了你这个代码：`<?php shell_exec('rm -rf /*'); ?>`

# c# - 用样本数据填充字典

> ID：11491973
> 
> 赞同：1
> 
> 时间：2012-07-15T12:38:53.030
> 
> 标签：c#, wpf, xaml, dictionary

如何用 sampledata 填充字典以在设计模式下使用？

我添加`xmlns:k="clr-namespace:System.Collections.Generic;assembly=mscorlib"`了能够添加键值对但不知何故它仍然不起作用。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T12:44:05.307

目前在 XAML 中没有对泛型类的适当支持（在 XAML 2009 中有[`x:TypeArguments`](http://msdn.microsoft.com/en-us/library/ms750476.aspx)，目前仅在未编译的 XAML 中可用），一种解决方法是使用通过反射创建它们的自定义标记扩展。[可以在我的另一个答案](https://stackoverflow.com/a/8235459/546730)中找到一个示例，您可以针对字典进行调整，以便您还可以添加键值对。

# ruby - SGML 替换标签并写入 Ruby 中的新文件和不同文件

> ID：11491976
> 
> 赞同：0
> 
> 时间：2012-07-15T12:39:09.877
> 
> 标签：ruby, sgml

我有一个很长的 SGML 文件，我需要将其转换为另一种语法，但由于某种原因，我的代码不起作用，当我得到输出时，它是完全相同的文档，代码如下：

```
#!usr/bin/env ruby 

def replaceStrings(toChange)

  ##Remove Title tags and replace with the correct 
  toChange.gsub(/<title>/) { "====="  }
  toChange.gsub(/<\/title>/) { "====="  }

  ##Image
  toChange.gsub(/<graphic fileref="/) { "{{"  }
  toChange.gsub(/<\/graphic>/) { "|}}"  }
  toChange.gsub(/;" scale="60">/) { ""  }

  ##Paragraphs
  toChange.gsub(/<para>/) { ""  }
  toChange.gsub(/<\/para>/) { ""  }

  puts toChange

end

fileInput = ARGV[0]
fileOutput = ARGV[1]

document = File.readlines(fileInput)
puts fileInput
puts fileOutput
document.each { |e|  replaceStrings(e)}

File.new(fileOutput, 'w')
File.open(fileOutput, 'w'){
  |f| f.write(document)
} 
```

据我所知，我确实调用了 replaceString 方法，但我是否遗漏了什么或做错了什么？

注意：我是 Ruby 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T13:09:45.547

你想使用 gsub！

此外，无需使用块形式：

```
toChange.gsub!(/<title>/, "=====") 
```

另外，我认为您不需要 File new：

```
File.open(fileOutput, 'w') do |f|
  f.write(document)
end 
```

# c - 这段代码的输出是什么以及如何？

> ID：11491983
> 
> 赞同：-7
> 
> 时间：2012-07-15T12:41:24.120
> 
> 标签：c, arrays, string, pointers

了解 sizeof 运算符的程序：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
main()
{
  char *mess[]={                         //array of pointers
    "amol is a good boy",
    "robin singh",
    "genious boy",
    "bitch please"
  };
  printf("%d",sizeof(mess));  // what does sizeof operator do?
} 
```

请解释此代码的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:43:31.937

它是指向 4 个指针的存储大小（以字节为单位）`char`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:46:44.040

你在你的问题中有你的答案。它有一个指针数组的大小。

所以大小为`4 * size of a pointer`。（在我的系统上是 32。）您的系统可能会有所不同。

# c# - 在只读富文本框中拖放

> ID：11491988
> 
> 赞同：3
> 
> 时间：2012-07-15T12:41:43.467
> 
> 标签：c#, richtextbox

我正在尝试在 RichTextBox（Windows 通用控件）中实现拖放功能。使用下面显示的代码可以正常工作。但是，当我将 ReadOnly 属性设置为 true 时，不会触发拖放事件。有什么我想念的吗？还是那是正确的行为？请指教。

```
private void rtb_dragdrop(object sender, DragEventArgs e)
{
    Console.WriteLine("Test");       
}

private void rtb_dragenter(object sender, DragEventArgs e)
{
    e.Effect = DragDropEffects.Copy;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-15T15:35:32.383

显然，在 RichTextBox 中将 ReadOnly 属性设置为 true 将关闭执行拖放操作的能力。

*一个模仿*只读 RichTextBox的简单技巧：

```
public partial class Form1 : Form {

  public Form1() {
    InitializeComponent();
    rtb.EnableAutoDragDrop = true;
    rtb.KeyDown += new KeyEventHandler(rtb_KeyDown);
  }

  void rtb_KeyDown(object sender, KeyEventArgs e) {
    e.SuppressKeyPress = true;
  }
} 
```

现在，您的拖放操作应该会在`EnabledAutoDragDrop`属性设置为 true 的情况下自动运行。无需处理那些拖放事件。

# clojure - 开始研究 Clojure 源代码的好地方？

> ID：11491992
> 
> 赞同：5
> 
> 时间：2012-07-15T12:41:58.087
> 
> 标签：clojure

我想研究官方的 Clojure 实现。任何熟悉代码的人都可以推荐从哪里开始阅读它吗？是否有某些部分可以更容易理解其余部分，或者哪些部分是理解 Clojure 工作原理的关键？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-15T12:54:53.347

那里有一些重要的想法 - 在您熟悉实现 LISP 之前，这些想法可能并不明显。

因此，即使在查看 Clojure 代码之前 - 您可能想查看基本 LISP 实现的代码（网上有很多堆 -[这是我的最爱之一](http://nakkaya.com/2010/08/24/a-micro-manual-for-lisp-implemented-in-c/)）。

接下来我会读一本书，比如 Christian Quinnec 的[Lisp In Small Pieces](https://rads.stackoverflow.com/amzn/click/com/0521562473) (LISP)，这是一[本关于实现 LISP 编译器](http://pagesperso-systeme.lip6.fr/Christian.Queinnec/WWW/LiSP.html)的书——以获取范例。

实际上从 Clojure 源代码开始——我将从`eval`这里[开始](https://stackoverflow.com/a/10462352/15441)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T17:19:07.207

clojurescript 编译器也是一个很好的起点。

就最初的 clojure 编译器而言，
我将从 core.clojure 的底部开始向上阅读，这样您就可以看到每个部分都建立在上面定义的功能之上的趋势（也可以从上到下尝试找到适合您的功能）

# android - 无法从edittext中获取价值

> ID：11491995
> 
> 赞同：0
> 
> 时间：2012-07-15T12:42:34.793
> 
> 标签：android

我有以下代码。

```
final Button Submit= (Button) findViewById(R.id.SubmitButton);
            Submit.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {

                chatbox=(EditText)findViewById(R.id.Chatbox);   <-- error
                String data=chatbox.getText().toString();
                Log.i("chama",data);

                HashMap<String,String> hashMap=new HashMap<String,String>();    
                        hashMap.put("You",chatbox.getText().toString());    //insert username(You) value in chatbox to hashmap

                        adminChat.add(hashMap);                                 //insert hashMap in arraylist
                        ShowListView(adminChat);                            //pass it to listview

                        sendHttpRequest("set", "admin", "You" ,chatbox.getText().toString(),clientEmail,UserAdminChatActivity.LastShowingChatDate);                   

         }}); 
```

它像这样在xml中声明

```
<EditText
    android:id="@+id/Chatbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@id/SubmitButton"
    android:layout_alignBottom="@id/SubmitButton"
    android:layout_alignParentLeft="true"
    android:layout_toLeftOf="@id/SubmitButton"
    android:ems="10"
    android:inputType="text" >
</EditText> 
```

logcat 给出以下错误：

```
07-15 17:40:20.083: E/AndroidRuntime(5503): FATAL EXCEPTION: main
07-15 17:40:20.083: E/AndroidRuntime(5503): java.lang.NullPointerException
07-15 17:40:20.083: E/AndroidRuntime(5503):     at com.app.ServerClient.UserAdminChatActivity$2.onClick(UserAdminChatActivity.java:52)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.view.View.performClick(View.java:2485)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.view.View$PerformClick.run(View.java:9080)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.os.Handler.handleCallback(Handler.java:587)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.os.Looper.loop(Looper.java:123)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at android.app.ActivityThread.main(ActivityThread.java:3647)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at java.lang.reflect.Method.invokeNative(Native Method)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at java.lang.reflect.Method.invoke(Method.java:507)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-15 17:40:20.083: E/AndroidRuntime(5503):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:46:55.040

试试这个：

```
String data=""; 
chatbox=(EditText)findViewById(R.id.Chatbox);
if(chatbox.getText().toString()!=null)
    data=chatbox.getText().toString(); 
```

此外，请确保您所指的 EditText 位于您用于通过以下方式映射您的活动的同一个 xml 文件中`setContentView()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T13:04:58.033

你应该做这个

```
chatbox= (EditText) findViewById(R.id.Chatbox); 
```

方法之外`onClick`。这对我来说毫无意义。您`widget`应该在设置后立即初始化`contentView`。

所以

```
...
protected EditText chatbox;

@Override
public void onCreate(Bundle savedOnInstanceState) {
   super.onCreate(savedOnInstanceState);
   setContentView(R.layout.main);
   chatbox = (EditText) findViewById(R.id.Chatbox);
   ...
   chatbox.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
         String data=chatbox.getText().toString();
         ...
      }
   });
} 
```