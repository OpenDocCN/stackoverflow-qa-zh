# StackOverflow 问答 10424000-10424999

# c# - 加密 Silverlight XAP 文件

> ID：10424003
> 
> 赞同：1
> 
> 时间：2012-05-03T01:39:44.223
> 
> 标签：c#, silverlight, silverlight-4.0

根据此链接：[http](http://forums.silverlight.net/t/20489.aspx) : //forums.silverlight.net/t/20489.aspx 无法加密 XAP 文件。然而，混淆是，但根据他们的说法，混淆只是在 XAP 文件中获取数据的一个小抽象。

任何人都可以彻底解释为什么吗？这是因为需要机器密钥来有效地加密数据并且机器密钥是免费可用的吗？或者其他原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:42:28.447

因为 XAP 必须解密才能运行。

假设您加密了 XAP。为了让用户能够运行它，您必须向他们提供解密密钥，以便他们解密。现在他们可以访问您未加密的 XAP 文件。

因此，加密 XAP 将一事无成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:07:39.970

XAP 文件不过是文件的压缩集合。如果您将扩展名从 .XAP 更改为 .ZIP，您将能够查看 .XAP 文件中的内容！！

我不知道这是否可能，但在构建解决方案时混淆源（程序集）可能会有所帮助。

# oop - 移除多重继承

> ID：10424008
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:40:19.370
> 
> 标签：oop, inheritance, multiple-inheritance, code-reuse

我正在研究多重继承，我读到它被认为是糟糕的设计。

我创建了一个多继承有用的示例，但我还没有找到重写它以删除多继承的方法。
此外，许多语言不支持多重继承，需要新的设计。

'Animal' 类实现了所有动物都会做的许多事情。
“AquaticAnimal”类实现了关于水的一切。
'TerrestrialAnimal' 类实现了关于陆地动物的一切。

'Amphibious' 类是为可以做 'AquaticAnimal' 和 'TerrestrialAnimal' 可以做的所有事情的动物创建的。
应用程序需要使用类中的“两栖”动物：动物园、水瓶​​座、平原和两栖动物。

尽管虚拟继承，菱形问题仍然存在，因为调用 Amphibious.eat() 将调用 Animal.eat() 两次，这将导致不一致的状态。

它不是真正的编程语言，但它就像 Java/C++。

```
class Animal{
  private:
    Place birthplace;
    String name;
    List likesToEat;
    Stomach stomach;

  public:
    virtual void growl(){ ... }

    virtual int eat(Food food){
        ... test if likes
        ... many operations
        chew()
        ...
        stomach.fill(food);
    }
}

class FlyingAnimal extends Animal {
  private:
    Wings wings;
  public:
    void fly(){ ...  wings.move(); ... }
}
class AquaticAnimal extends Animal{
  private:
    Flipper flipper;

  public:
    void swim(){ ... flipper.move(); ...  }

    int eat(Food food){
       int x = Animal.eat(food);
       ... use x
       flipper.nourish(food);
    }
}
class TerrestrialAnimal extends Animal{
  private:
    Legs legs;

  public:
    void run(){ ... legs.move(); ...  }

    int eat(Food food){
       int x = Animal.eat(food);
       ... use x
       legs.nourish(food);
    }
}
class Amphibious extends AquaticAnimal, TerrestrialAnimal{
  public:
    int eat(Food food){
        AquaticAnimal.eat(food);
        TerrestrialAnimal.eat(food);
        //PROBLEM: Animal.eat() will be called twice.
    }
}

//------------------------------------------
class Zoo {
  public:
    void add/remove(Animal a);
    void feed(Animal a);
    void show(Animal a);
}
class Aquarius {
  public:
    void add/remove(AquaticAnimal a);
}
class Plains {
  public:
    void add/remove(TerrestrialAnimal a);
}
class HighPeaks {
  public:
    void add/remove(FlyingAnimal a);
}
class AmphibiousRace {
  public:
    void add/remove(Amphibious a);
    void enterIntoLake(Amphibious a);
    void exitFromLake(Amphibious a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:33:29.513

如果区分水生动物和陆生动物的是腿和脚蹼，那么说两栖动物继承自两者真的有效吗？没有多少动物既有腿又有脚蹼。

无论哪种方式，您都可以使用更多的组合方法，将所需的部分传递给类：

```
class Animal{
  private:
    Place birthplace;
    String name;
    List likesToEat;
    Stomach stomach;

  public:

    virtual IEnumerable<Movement > Movements { get; }
    virtual IEnumerable<IAppendage> Appendages{ get; }

    virtual void growl(){ ... }

    virtual int eat(Food food){
        ... test if likes
        ... many operations
        chew()
        ...
        stomach.fill(food);
    }
}

interface IAppendage {
   void Move();
}

class Wings : IAppendage {}
class Legs: IAppendage {}
class Flippers : IAppendage {}

class Movement {
  private:
  IAppendage AppendageForMovement { get; }
  public :
  void Go(){
    AppendageForMovement.Move();
  }
}

class FlyingMovement : Movement {}
class RunningMovement : Movement  {}
class SwimmingMovement : Movement {}

class AmphibiousAnimal extends Animal {

private: 
   Flippers flipper;
   Legs leg;
    virtual IEnumerable<Movement > Movements { get { return new Movement [] { new SwimmingMovement( flipper ), new RunningMovement( leg ) } ; }
    virtual IEnumerable<IAppendage> Appendages { get { return new IAppendage[] {new Wings() } }

  public:
    void fly(){ // find flying movement
           ...  
           flyingMovement.Go(); 
           ... 
    }
} 
```

这是一个粗略的例子，但希望它能给你这个想法。与其尝试将所有功能绑定到基类中，不如尝试传递您需要的功能。如果您需要不止一种类型的功能（例如跑步、步行和游泳），那么您只需传入更多帮助类来提供该功能。

# ruby-on-rails - 一个表单中的多个 Rails 提交按钮（一个遥控器）

> ID：10424009
> 
> 赞同：4
> 
> 时间：2012-05-03T01:40:35.923
> 
> 标签：ruby-on-rails, forms, action

有没有办法在一个表单中添加两个提交按钮，并且其中一个请求应该是远程的？我的意思是不使用额外的 JS。

我的问题与[Rails: Multi-submit buttons in one Form](https://stackoverflow.com/questions/3332449/rails-multi-submit-buttons-in-one-form)有关，但不同的是遥控器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T16:07:18.793

最简单的方法可能是在同一页面上有 2 个不同的表单。见下文。

你好控制器

```
class HelloController < ApplicationController
  def say_hello
    puts params

    respond_to do |format|
     format.html 
     format.js
    end
  end
end 
```

路线.rb

```
TwoForms::Application.routes.draw do
  get "hello/get_ready"
  post "hello/say_hello"

  root to: "hello#get_ready"
end 
```

意见/你好/get_ready.html.erb

```
<h2>Regular hello</h2>
<%= button_to "Regular Hello", hello_say_hello_path, name: "regular" %>

<h2>Ajaxy hello</h2>
<%= button_to "Ajaxy Hello", hello_say_hello_path, name: "ajaxy", remote: true %> 
```

意见/你好/say_hello.html.erb

```
Success (regular)!

<%= params %> 
```

意见/你好/say_hello.js.erb

```
alert("Success (Ajaxy)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T16:26:11.863

我认为你可以这样做：

在“远程”提交按钮上创建绑定：#remote_btn_submit

```
$("#remote_btn_submit").on("click", function(){ //click it's not the best bind perhaps input?
  $("#my_form").data("remote", "true");
  //or
  //$("#my_form").attr("data-remote", "true");
}); 
```

您还需要在远程提交上使用 preventDefault

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-07T07:48:13.483

我遇到了同样的问题，并使用[此答案](https://stackoverflow.com/a/12504660/4469336)中的解决方案在单击相应按钮时通过 JQuery 使表单远程或非远程。为此，请将 eg`class: 'local-button'`和`class: 'remote-button'`, 添加到您的提交按钮、`id: 'my-form'`表单和以下代码 (CoffeeScript)：

```
$(".remote-button").click ->
  $("#my-form").attr("data-remote", true)
$(".local-button").click ->
  $("#my-form").removeAttr("data-remote")
  $("#my-form").removeData("remote"); 
```

# java - Java Servlet：通过电子邮件发送表单数据。（网豆）

> ID：10424024
> 
> 赞同：0
> 
> 时间：2012-05-03T01:42:28.420
> 
> 标签：java, forms, servlets, netbeans

我正在使用 Netbeans 编写一个简单的程序，但我有点困惑，希望得到一些帮助。已经做了很多研究，但 servlet 对我来说是新的。

我创建了一个 Java Web 应用程序，用 html 编码的简单网站必须从表单中收集信息并将其发送到特定的电子邮件。电子邮件始终相同，并将存储在表单中的提交按钮中。

html 代码一切正常，问题是一旦我创建了 servlet，我不知道如何将它链接到 html 代码或其中的表单。

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:11:04.100

> *我不知道如何将它链接到其中的 html 代码或表单。*

`web.xml`在注解中或通过`@WebServlet`注解将 servlet 映射到 URL 模式。让点的`action`属性`<form>`正好指向那个 URL。假设表单是 POST，在 servlet`method`的方法中收集请求参数。`doPost()`最后以通常的 Java 方式与他们一起工作。

所以：

```
<form action="servletURL" method="post">
    <input type="text" name="foo" />
    ...
</form> 
```

用 in`doPost()`方法

```
String foo = request.getParameter("foo");
// ... 
```

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含一些 Hello World 示例和几个很好的教程链接

* * *

在 servlet 中发送邮件与在带有`main()`方法的普通 Java 类中发送邮件没有什么不同。因此，您不一定需要专注于“使用 servlet 发送邮件”，您不会找到太多示例，而只需关注“使用 java 发送邮件”，您肯定会找到很多示例。

### 也可以看看：

*   [如何从 jsp/servlet 发送电子邮件？](https://stackoverflow.com/questions/3757442/how-to-send-an-email-from-jsp-servlet)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:19:04.903

请参考此链接：[http](http://www.servletworld.com/servlet-tutorials/simple-servlet-example.html) ://www.servletworld.com/servlet-tutorials/simple-servlet-example.html 在 doPost() 方法中，他们正在生成一个 html 响应。除了 HTML 响应之外，您还可以编写代码来发送电子邮件。为此，请参考此链接： [http ://www.javapractices.com/topic/TopicAction.do?Id=144](http://www.javapractices.com/topic/TopicAction.do?Id=144)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:13:36.433

您可以在[此处](http://www.daniweb.com/web-development/jsp/threads/136199/how-to-call-servlet-from-jsp)找到servlet 和 jsp 的示例。

# javascript - “重新加载”页面以模拟预加载代码注入的 JS 库？

> ID：10424027
> 
> 赞同：0
> 
> 时间：2012-05-03T01:42:42.603
> 
> 标签：javascript

抱歉，如果标题含糊不清，但这不是最容易描述的问题。目前，如果您想包装/重载浏览器中的内置函数，例如`XmlHttpRequest.prototype.open = function(){return oldOpen(...)}`，并且您想在页面中的任何脚本执行之前执行此操作，则需要使用在之前执行的浏览器扩展程序/插件文档开始被解析。问题是，浏览器扩展的用户同意安装它们的转化率通常很低。我希望能够使用小书签来做同样的事情（Pinterest 已经证明小书签对他们来说不是障碍！）。但遗憾的是，根据定义，小书签在文档加载后很长时间才会运行。

我想做的，我认为理论上可能的，是伪造一个页面重新加载，但已经插入了一个脚本。这个过程看起来像这样：

1.  通过 XHR 下载来自`window.location`.
2.  从 DOM 中删除所有元素，包括所有脚本标签。也许抛出一个漂亮的闪屏以获得良好的用户体验。
3.  清除所有超时和间隔（在 FF 和 Chrome 上，ID 似乎从 1 开始计数，因此不需要先验知识 AFAIK）。
4.  删除/取消定义空白文档中不存在的所有键`window`...`document`鉴于可能安装了一些扩展，可能需要一些 iframe 技巧/消息才能实际获得参考空白文档。
5.  将您的脚本注入现在空白的文档中。
6.  重新插入 XHR 原始文档中的所有标签，包括脚本，然后应该在新上下文中重新加载并重新执行。
7.  取下启动画面，您就可以开始了！

现在，我非常愿意尝试并开源它，但是以前有没有人尝试过这样的事情？这将是很多工作，我宁愿不重新发明轮子，除非我们现在使用的是相当于木棍上的方形巨石。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:02:42.543

或者使用适当的 js shim 将当前 url 重写到新窗口中。

```
(function() {

var scriptSrc = 'http://example.com/shim.js';
var rq = new XMLHttpRequest; rq.open('get', '', false);
rq.send();
var text = rq.responseText.replace('<head', '<script src="' + scriptSrc + '"></script><head');
var win = window.open();
win.document.open();
win.document.write(text);
win.document.close();

})(); 
```

# java - 如何找到JDK跨平台的位置

> ID：10424028
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:42:49.950
> 
> 标签：java

即使使用不同的平台，我如何在设备上找到 JDK 的位置。我是否必须通过文件蛮力搜索？如果是这样，这似乎会变得有点困难，因为它可能位于几个不同的文件夹分支中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T01:47:09.730

[`System.getProperty("java.home")`](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)将返回 JRE 的安装目录。从那里您可以查找文件树以查看这是否是 JDK 的 JRE，或者查看 JDK 是否在附近的父文件夹中。

# flash - 通过 Java Web 应用程序列出服务器上的目录和文件

> ID：10424029
> 
> 赞同：0
> 
> 时间：2012-05-03T01:42:58.780
> 
> 标签：flash

我是 Web 应用程序和 java 的新开发人员。

我的目的如下：

1.  列出 Java Web 应用程序在服务器上的目录和文件。

2.  在网页上创建目录和文件的树。

3.  单击树中的文件之一，它将使用flash player播放文件。（实际上，所有文件都是flash文件*.swf）。

问题：

如何达到我的目的？

任何建议都是有帮助的。谢谢。

# c++ - 我的 C++ 类必须是 Windows 8 Metro 风格应用程序中的 ref 类吗？

> ID：10424032
> 
> 赞同：4
> 
> 时间：2012-05-03T01:43:06.983
> 
> 标签：c++, windows-8, windows-runtime

我知道，如果我想将我的 C++ 代码作为 WinRT 组件共享给 .Net 和 JavaScript 代码，我必须将我的类声明为`public ref MyClass sealed`. 但是，如果我有一个只想在我的应用程序中使用的类，它是否需要是一个 ref 类？

假设我有一个简单的 Building 类。可以定义如下

```
#pragma once
class Building
{
public:
    Building(int cap);
    ~Building(void);
    int get_capacity() {return capacity;}
private:
    int capacity;
}; 
```

然后像这样使用

```
std::shared_ptr<Building> bldg = std::make_shared<Building>(5); 
```

我仍然希望使用 make_shared 将其实例化为 shared_ptr 以获取引用计数，但我只是在什么时候需要将其设为 ref 类感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T03:21:16.563

[Herb Sutter 建议](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-532T)（12 分钟后）您只在程序边界使用非标准 C++/CX，您的 C++ 代码必须与 WinRT 交互。所以这意味着你只打算从 C++ 中使用的类不需要是 ref 类或使用 ISO 标准 C++ 以外的任何东西。

# ruby-on-rails - activesupport回调中的堆栈级别太深

> ID：10424040
> 
> 赞同：8
> 
> 时间：2012-05-03T01:44:28.367
> 
> 标签：ruby-on-rails, ruby, activerecord, stack-trace, activesupport

我正在`SystemStackError`使用 Rails 3 应用程序。

我拥有的所有信息都是无用的一行堆栈跟踪（取自日志）：

```
SystemStackError (stack level too deep):
  activesupport (3.2.3) lib/active_support/callbacks.rb:409 
```

所以问题是我如何**查看完整的堆栈跟踪**？

**注意**：我不在乎*为什么*会发生这种情况，我只想看看它发生**在哪里**。

使用：Rails 3.2.3，独角兽。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T01:52:11.897

如果您在 before_save 或 after_save 中更新活动记录，它将继续循环......此外，如果您在关联的两端都有 validates_associated。

以下是`before_save`回调如何创建循环的示例：

```
class Foo < ActiveRecord::Base
  def before_save
    self.update_attribute(:bar, 'badidea')
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:41:07.180

这是 lib/active_support/callbacks.rb 中相当复杂的代码，但看起来它正在应用各种回调：准确地说：:before、:after、:around。

您可以尝试在第 426 行之前放置一个老式的“放置在 #{name} 之前”，然后看看会得到什么。

同样，可能整个堆栈跟踪都在 rails 堆栈内，并且被默认的 backtrace_filter 过滤掉。关闭 backtrace_filter 可能会让您看到堆栈并获得调试线索。请参阅 config/initializers/backtrace_silencers.rb 并取消注释：

> Rails.backtrace_cleaner.remove_silencers！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-28T10:45:51.430

对于那些能够升级到 Ruby 2.2 的人，由于 Nobu 在 MRI 上所做的工作，您应该获得更具描述性的堆栈跟踪 ( [https://bugs.ruby-lang.org/issues/6216](https://bugs.ruby-lang.org/issues/6216) )。切换到 JRuby 也会提供更深的堆栈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:33:16.610

`validates_associated`这是飞镖中的一枪，但是当我的 's中有循环引用时，我曾经遇到过这样的事情

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T22:29:44.933

我有一个类似的问题。在过滤器之前/之后跳过的控制器操作最终会因错误而出错

```
SystemStackError (stack level too deep):
  activesupport (3.2.13) lib/active_support/callbacks.rb:409 
```

我能想到的最好的办法是，Rails 向回调堆栈添加/删除方法的方式会在重压下产生错误。

这些是 API 调用，因此我将它们移至继承自 ActionController::Base 的单独控制器，从而无需跳过过滤器。这解决了我的问题。ApplicationController::Metal 可能是更好的选择，具体取决于您需要哪些功能。

我知道提问者并不关心为什么，但我认为其他 Rails 开发人员可能会遇到同样的问题，并且上面的日志记录建议都没有为我返回有效的堆栈跟踪。

# iphone - 将数据插入 SQLite db iPhone 的正确方法

> ID：10424043
> 
> 赞同：2
> 
> 时间：2012-05-03T01:44:47.027
> 
> 标签：iphone, objective-c, ios, sqlite, firefox

如何将数据插入到 SQLite iPhone 中的表中？

我正在尝试关注，但失败了：

```
 NSString *query=[NSString stringWithFormat:@"insert into %@ (name) values ('%@')", table name,myName ];

 sqlite3 *database;

sqlite3_stmt *createStmt = nil;

if (sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {
    if (createStmt == nil) {

        if (sqlite3_prepare_v2(database, [query UTF8String], -1, &createStmt, NULL) != SQLITE_OK) {
            return NO;
        }
        sqlite3_exec(database, [query UTF8String], NULL, NULL, NULL);
        return YES;
    }

    return YES;
}else {
    return NO;
} 
```

我以下列方式创建了表：

```
create table if not exists myDets (dets_id integer primary key asc, name text); 
```

我也在使用 Firefox SQLite 插件来检查数据库。当我尝试通过 firefox 将记录插入我的数据库时，它给了我以下错误：

```
Failed to insert values
Exception Name: NS_ERROR_STORAGE_IOERR
Exception Message: Component returned failure code: 0x80630002 (NS_ERROR_STORAGE_IOERR)        [mozIStorageStatement.execute] 
```

严重卡住:(

另外，我在 iPhone 模拟器上运行它，这有关系吗？

请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:20:53.660

*   使用参数，不要用字符串格式化你的更新语句
*   添加大量跟踪，检查返回代码并检查错误代码（你的问题是不清楚什么错误，你在 iPhone 上遇到的问题）。
*   使用 sqlite3_errmsg 获取错误消息
*   构建您的 dbPath 并将其注销。确保您可以从模拟器下的终端打开数据库。请记住，sqlite 将被动地在内存中创建一个数据库，因此如果您的路径已关闭并且数据库不存在，它可能会令人困惑。
*   打印出您的更新语句并在您登录的路径中从终端中的 sqlite cmdline 应用程序尝试它。
*   如果您将数据库放在主捆绑资源中，它是一个模板，需要复制才能打开并写入它。

这是我的示例中的更新功能：

```
- (void)updateContact: (Contact*)contact error:(NSError**)error
{
    if (![self ensureDatabaseOpen:error])
    {
        return;
    }

    NSLog(@">> ContactManager::updateContact");

    // prep statement
    sqlite3_stmt    *statement;
    NSString *querySQL = @"update contacts set name=?,address=?,phone=? where id=?";
    NSLog(@"query: %@", querySQL);
    const char *query_stmt = [querySQL UTF8String];

    // preparing a query compiles the query so it can be re-used.
    sqlite3_prepare_v2(_contactDb, query_stmt, -1, &statement, NULL);     
    sqlite3_bind_text(statement, 1, [[contact name] UTF8String], -1, SQLITE_STATIC);
    sqlite3_bind_text(statement, 2, [[contact address] UTF8String], -1, SQLITE_STATIC);
    sqlite3_bind_text(statement, 3, [[contact phone] UTF8String], -1, SQLITE_STATIC);
    sqlite3_bind_int64(statement, 4, [[contact id] longLongValue]);

    NSLog(@"bind name: %@", [contact name]);
    NSLog(@"bind address: %@", [contact address]);
    NSLog(@"bind phone: %@", [contact phone]);
    NSLog(@"bind int64: %qi", [[contact id] longLongValue]);

    // process result
    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"error: %s", sqlite3_errmsg(_contactDb));
    }

    sqlite3_finalize(statement);
} 
```

在示例中，数据库从资源复制到路径并打开。这是我用来执行此操作的确保打开功能：

```
- (BOOL)ensureDatabaseOpen: (NSError **)error
{
    // already created db connection
    if (_contactDb != nil)
    {
        return YES;
    }

    NSLog(@">> ContactManager::ensureDatabaseOpen");    
    if (![self ensureDatabasePrepared:error])
    {
        return NO;
    }

    const char *dbpath = [_dbPath UTF8String]; 
    if (sqlite3_open(dbpath, &_contactDb) != SQLITE_OK &&
        error != nil)
    {
        *error = [[[NSError alloc] initWithDomain:@"ContactsManager" code:1000 userInfo:nil] autorelease];
        return NO;
    }

    NSLog(@"opened");

    return YES;
}

- (BOOL)ensureDatabasePrepared: (NSError **)error
{
    // already prepared
    if ((_dbPath != nil) &&
        ([[NSFileManager defaultManager] fileExistsAtPath:_dbPath]))
    {
        return YES;
    }

    // db in main bundle - cant edit.  copy to library if !exist
    NSString *dbTemplatePath = [[NSBundle mainBundle] pathForResource:@"contacts" ofType:@"db"];
    NSLog(@"%@", dbTemplatePath);

    NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) lastObject];
    _dbPath = [libraryPath stringByAppendingPathComponent:@"contacts.db"];

    NSLog(@"dbPath: %@", _dbPath);

    // copy db from template to library
    if (![[NSFileManager defaultManager] fileExistsAtPath:_dbPath])
    {
        NSLog(@"db not exists");
        NSError *error = nil;
        if (![[NSFileManager defaultManager] copyItemAtPath:dbTemplatePath toPath:_dbPath error:&error])
        {
            return NO;
        }

        NSLog(@"copied");
    }    

    return YES;    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T04:33:26.697

```
- (NSString *) getDBPath {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];
    return [documentsDir stringByAppendingPathComponent:@"iHadDB.sqlite"];
}

- (void) insertValueToDatabase {

    NSString *dbPath =[self getDBPath];

    NSString *select_Meal = dummy_select_Meal;
    NSString *dateTime = dummy_date_Time;
    NSString *location = dummy_location;
    NSString *mealItem = dummy_mealItem;

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        const char *sqlDB = "Insert into iHad(Mealtype,DateAndTime,Location,Mealitem) VALUES (?,?,?,?)";

        if(sqlite3_prepare_v2(database, sqlDB, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));

        sqlite3_bind_text(addStmt, 1, [select_Meal UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 2, [dateTime UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 3, [location UTF8String], -1, SQLITE_TRANSIENT);
        sqlite3_bind_text(addStmt, 4, [mealItem UTF8String], -1, SQLITE_TRANSIENT);

        if(SQLITE_DONE != sqlite3_step(addStmt))
            NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
        //else
            //SQLite provides a method to get the last primary key inserted by using sqlite3_last_insert_rowid
            //coffeeID = sqlite3_last_insert_rowid(database);

        //Reset the add statement.
        sqlite3_reset(addStmt);

    }
    else
        sqlite3_close(database); 

} 
```

# php - 简单热或不分类的 ELO 评级？

> ID：10424046
> 
> 赞同：1
> 
> 时间：2012-05-03T01:45:12.990
> 
> 标签：php, sorting

我希望用户使用 hot-or-not 系统对大约 30 个项目的列表进行排序。该列表是一个小的定义数字，只需要由单个用户排序。我可以让用户拖放一个排序列表，但热或不热系统会更好。

从一些研究来看，ELO 评级似乎是最快的选择。

如何使用这个 PHP 类？[https://github.com/Chovanec/elo-rating](https://github.com/Chovanec/elo-rating)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T13:57:44.290

我会写我自己的，它非常简单。

```
//first i calculate the win probability.
$a_win_prob = 1/(1+pow(10,($b_elo - $a_elo)/400));
$b_win_prob = 1/(1+pow(10,($a_elo - $b_elo)/400));

//than i make a K value for a and b
if($a_elo < 2100){
    $a_k = 20;  
}elseif($a_elo > 2300){
    $a_k = 10;
}else{
    $a_k = 15;  
}

if($b_elo < 2100){
    $b_k = 20;  
}elseif($b_elo > 2300){
    $b_k = 10;
}else{
    $b_k = 15;  
}

//than i calculate both elo values.
if($win_side === "a"){
    $a_elo_new = $a_elo + $a_k*(2*$a_win_prob);
    $b_elo_new = $b_elo - $b_k*(2*$b_win_prob);
}else{
    $a_elo_new = $a_elo - $a_k*(2*$a_win_prob);
    $b_elo_new = $b_elo + $b_k*(2*$b_win_prob);
}
//than i can put them in a database 
```

这是 elo 评级系统的基本设置，它比班级简单得多。你甚至可以将它重写为一个函数。

我希望这个能帮上忙

# php - 技能依赖的Mysql技术

> ID：10424047
> 
> 赞同：4
> 
> 时间：2012-05-03T01:45:41.537
> 
> 标签：php, mysql, database

我有一个关于存储依赖项的数据库技术的问题。我知道那里有很多，但我不能轻易地将它们放在我需要的方案中。我创建了简单的图像：

![技能示例](../Images/2d906d6d8502aec9f8b107bd47838c8d.png)

正如你所看到的，我需要的是创建一个相互依赖的技能树（就像在游戏中一样）。因此，例如，如果有人想要拥有技能 8，我可以告诉他他需要首先拥有技能 1,2 和 5。

这对于数据库中的分层数据可能很好，但我不太清楚如何动态地执行此模型。我遇到的问题是，技能将一直添加到树中所有可能的位置。没完没了。可以在任何级别添加技能。

现在，在第一个问题之后，还有一个更复杂的问题。我也需要有水平的技能。因此，例如技能 1 可以有 10 个级别。并且只有在达到技能1 5级后才能达到技能2。

对于玩魔兽世界这类游戏的人来说应该是可以理解的。

还有一点需要注意的是，技能可以随时添加，但是添加后不能更改。在正常的基础上。万一某些技能非常糟糕或类似的东西，它会被删除，但这种情况很少发生。

感谢您的建议、链接或任何其他材料！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:56:47.307

> 正如你所看到的，我需要的是创建一个相互依赖的技能树（就像在游戏中一样）。
> 
> 我也需要有水平的技能。因此，例如技能 1 可以有 10 个级别。

这意味着您将需要一个表格来存储技能和技能的最高级别，基本上：

```
create table skills(
  skill_id integer,
  skill_name varchar(500) not null,
  skill_max_level integer not null,
  primary key(skill_id)); 
```

并且您需要使用所需的可选级别设置依赖项：

```
create table skills_depend
( skill_id integer
, skill_depend integer
, level_depend integer 
, primary key(skill_id, skill_depend)
, foreign key (skill_id)
  references skills (skill_id)
, foreign key (skill_depend)
  references skills (skill_id) ); 
```

查询将取决于您要检查的内容（例如，如果用户具有获得技能的先决条件）。

结合用户水平和他已经拥有的技能，我认为这是一个起点。

> 还有一点需要注意的是，技能可以随时添加，但是添加后不能更改。在正常的基础上。万一某些技能非常糟糕或类似的东西，它会被删除，但这种情况很少发生。

您需要在应用程序级别控制此要求（让用户仅添加或删除技能）。

* * *

[你可以在SQLFiddle](http://sqlfiddle.com/#!2/ed2f6)上玩这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:18:05.633

我有足够的挑战来解决这个问题，但我没有足够的挑战在 MySQL 中解决它。考虑到这一点，这是您的问题的 Postgresql 版本：

```
with recursive 
skill_list(skill_id) as
(
    select distinct skill_id from skill_req 
    where req is not null
    union
    select distinct req from skill_req
    where req is not null 
)
,skill_tree(skill_group, depend_on) as
(
    select skill_id, skill_id -- seeds
    from skill_list         
    union       
    select st.skill_group, sr.req
    from skill_req sr
    join skill_tree st 
    on sr.skill_id = st.depend_on 
)
,skills_required as
(
    select skill_group, depend_on
    from skill_tree
    where skill_group <> depend_on -- remove seeds  
)
select 
    sl.skill_id, 
    array_agg(sr.depend_on order by depend_on) as array_version,
    array_to_string(array_agg(sr.depend_on order by depend_on), ',') 
        as group_concat_version    
from skill_list sl
left join skills_required sr on sr.skill_group = sl.skill_id
group by sl.skill_id 
```

数据：

```
CREATE TABLE skill_req
    (skill_id int, req int);

INSERT INTO skill_req
    (skill_id, req)
VALUES   
   (2, 1),

   (4, 3),

   (5, 1),

   (6, 4), 
   (6, 2),

   (7, 6),   
   (7, 9),

   (8, 2),
   (8, 5),

   (9, 3),

   (10, 4),
   (10, 5),
   (10, 9); 
```

输出：

```
 skill_id | array_version | group_concat_version 
----------+---------------+----------------------
        1 | {NULL}        | 
        2 | {1}           | 1
        3 | {NULL}        | 
        4 | {3}           | 3
        5 | {1}           | 1
        6 | {1,2,3,4}     | 1,2,3,4
        7 | {1,2,3,4,6,9} | 1,2,3,4,6,9
        8 | {1,2,5}       | 1,2,5
        9 | {3}           | 3
       10 | {1,3,4,5,9}   | 1,3,4,5,9
(10 rows) 
```

现场测试：[http ://www.sqlfiddle.com/#!1/77894/1](http://www.sqlfiddle.com/#!1/77894/1)

# php - 用前导 0 填充计数器到 9，然后用 php 删除前导零

> ID：10424048
> 
> 赞同：4
> 
> 时间：2012-05-03T01:45:44.437
> 
> 标签：php, count, printf

尝试用前导 0 填充到 9，然后删除。

01, 02, 03, 04, 05, 06, 07, 08, 09 - 10, 11, 12, 14

到目前为止，我有这个：

```
<?php  $value = $count++;
printf("%02d", $value);
?> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T01:47:22.927

你也可以使用[`str_pad()`](http://us.php.net/manual/en/function.str-pad.php)

```
<?php  
    $value = $count++;
    echo str_pad($value, 2, "0", STR_PAD_LEFT);
?> 
```

# android - Android XML 解析器未获取标记

> ID：10424049
> 
> 赞同：0
> 
> 时间：2012-05-03T01:46:04.707
> 
> 标签：android, xml, parsing, feedburner

我有这段代码来解析 RSS 提要，但由于某种原因，我对 itemDownLink 的捕获从未触发。有人可以解释为什么吗？

```
 public Channel parse(InputStream is) {

    RootElement root = new RootElement("rss");
    Element chanElement = root.getChild("channel");
    Element chanTitle = chanElement.getChild("title");
    Element chanLink = chanElement.getChild("link");
    Element chanDescription = chanElement.getChild("description");
    Element chanLastBuildDate = chanElement.getChild("lastBuildDate");
    Element chanDocs = chanElement.getChild("docs");
    Element chanLanguage = chanElement.getChild("language");

    Element chanItem = chanElement.getChild("item");
    Element itemTitle = chanItem.getChild("title");
    Element itemDescription = chanItem.getChild("description");
    Element itemLink = chanItem.getChild("link");
    Element itemDate = chanItem.getChild("pubDate");
    Element itemDownLink = chanItem.getChild("feedburner:origEnclosureLink");
} 
```

这是捕手：

```
 itemDownLink.setEndTextElementListener(new EndTextElementListener() { 
        public void end(String body) {
            item.setDownloadLink(body);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:56:16.053

您需要使用 getChild 的 2 参数形式并指定 feedburner uri (http://rssnamespace.org/feedburner/ext/1.0)。

```
Element itemDownLink = chanItem.getChild("http://rssnamespace.org/feedburner/ext/1.0", "origEnclosureLink"); 
```

# java - 在 JTextArea 上触发关键事件 ctrl + 空格？

> ID：10424050
> 
> 赞同：0
> 
> 时间：2012-05-03T01:46:13.550
> 
> 标签：java, swing, jtextarea, keyevent

我是 Java Swing 的新手。我需要触发事件`ctrl`+ `space`on`JTextArea`

我可以计算并发现只触发了一个关键事件。有什么方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T01:57:09.940

A从`KeyEvent`继承方法。 [`getModifiers()`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/InputEvent.html#getModifiers%28%29)`InputEvent`

`Ctrl`关键是修饰符。

# java - Oracle Driver 或 JDK 实现的 createStatement 方法

> ID：10424052
> 
> 赞同：1
> 
> 时间：2012-05-03T01:47:04.613
> 
> 标签：java, jdbc

在 Jdbc 中，该语句是在成功创建连接后创建的，然后我们被称为

st=conn.createStatement()

我的问题是上面创建的 statemenet 对象。但是由 Oracle 类型驱动程序或 JVM 实现的 createstatement **()**方法。如果问题有任何错误，抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:50:45.907

JDBC 只定义了一个独立于数据库的接口，供特定于供应商的驱动程序实现。

因此，createStatement由 JDK*定义*，但由（在您的情况下）Oracle 驱动程序*实现。*其他供应商对不同的数据库有不同的实现。

如果您打印驱动程序创建的对象的类名，您应该会看到其中带有“Oracle”的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:10:20.367

添加到 Thilo 的回答中，createStatement() 由 JDK 中包含的 JDBC API 定义。JDBC API 是一组接口。oracle 驱动程序将为接口方法创建实现，例如 createStatement() 如果您使用 sql server db 而不是 oracle，则该实现将由 sql server db 创建。

# php - 调试电子邮件在 cakephp 中不起作用

> ID：10424054
> 
> 赞同：0
> 
> 时间：2012-05-03T01:47:13.467
> 
> 标签：php, email, cakephp

我正在尝试在 cakephp 中调试我的电子邮件，因为我无法发送测试邮件。但是，我所做的一切都只给了我一个空白网页，甚至是调试。我已经将调试模式设置为 2。以下是我的代码：

C:\xampp\htdocs\NewFolder\app\webroot\email\app\controllersmailer_controller.php

```
<?php  
class MailerController extends AppController { 

    var $name = 'Mailer'; 
    //Not using a model 
    var $uses = ''; 
    //The built in Cake Mailer 
    var $components = array('Email'); 

    $this->Email->delivery = 'debug';
    /** 
     * Send a text string as email body 
     */ 
    function sendSimpleMail() { 
        //$this->Email->to = 'yourlogin@localhost'; 
        $this->Email->to = 'csorila17@gmail.com'; 
        $this->Email->subject = 'Cake test simple email'; 
        $this->Email->replyTo = 'noreply@example.com'; 
        $this->Email->from = 'Cake Test Account <noreply@example.com>'; 
        //Set the body of the mail as we send it. 
        //Note: the text can be an array, each element will appear as a 
        //seperate line in the message body. 
        if ( $this->Email->send('Here is the body of the email') ) { 
            $this->Session->setFlash('Simple email sent'); 
        } else { 
            $this->Session->setFlash('Simple email not sent'); 
        } 
        //$this->redirect('/'); 
        $this->Email->delivery = 'debug';

    } 
} 
?> 
```

C:\xampp\htdocs\NewFolder\app\webroot\email\app\views\layouts\default.ctp

```
<?php echo $this->Session->flash(); ?>
<?php echo $this->Session->flash('email'); ?> 
```

C:\xampp\htdocs\NewFolder\app\webroot\email\app\views\layouts\email\html\default.ctp

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<html> 
<body> 
<?php echo $content_for_layout; ?> 
<?php echo $this->Session->flash(); ?>
<?php echo $this->Session->flash('email'); ?>
</body> 
</html> 
```

C:\xampp\htdocs\NewFolder\app\webroot\email\app\views\layouts\email\text\default.ctp

```
<?php echo $content_for_layout; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:14:20.640

如果您在本地运行此应用程序，我相信您需要设置一个邮件服务器才能工作，否则您可以使用任何提供商的 smtp 邮件选项。为此，您必须配置您的邮件设置。

在你的`app\config`你可以创建一个文件`email.php`

```
<?php 
    class EmailConfig {

        public $default = array(
            'host' => 'ssl://smtp.gmail.com',
            'port' => 465,
            'username' => 'your email address', //example@gmail.com
            'password' => 'password',
            'transport' => 'Smtp',
            'from' => array('From Email Address' => 'Name to be displayed in the Email'),
            'log' => true
        );

    } 
```

在您的控制器中之后，您可以设置使用以下代码发送电子邮件。

```
$email = new CakeEmail();
$email->to('example@gmail.com');
$email->subject('Email testing Subject');       
$email->send('Email testing content'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:40:04.750

除了需要一个可访问的 SMTP 服务器之外，您也不能将此语句放在函数之外......

```
$this->Email->delivery = 'debug';   // needs to be *inside* a function 
```

另请注意，当您*使用*此命令时，它只会将电子邮件保存到会话变量中*而不*发送它。

# c++ - 错误 C2447：“{”：缺少函数头（旧式正式列表？）

> ID：10424059
> 
> 赞同：1
> 
> 时间：2012-05-03T01:48:49.773
> 
> 标签：c++

我复制的这段代码有什么问题`layers_id_colors_and_visibility.h`？

```
error C2447: '{' : missing function header (old-style formal list?)
error C2017: illegal escape sequence
error C2017: illegal escape sequence
error C2017: illegal escape sequence
error C2017: illegal escape sequence
error C2017: illegal escape sequence 
```

```
#define DECLARE_LAYERS_ORDER_LIST(list) int list[LAYER_COUNT] =\
{   LAYER_N_FRONT,\
    LAYER_N_15, LAYER_N_14, LAYER_N_13, LAYER_N_12,\
    LAYER_N_11, LAYER_N_10, LAYER_N_9, LAYER_N_8,\
    LAYER_N_7, LAYER_N_6, LAYER_N_5, LAYER_N_4,\
    LAYER_N_3, LAYER_N_2,\
    LAYER_N_BACK,\
    ADHESIVE_N_FRONT , ADHESIVE_N_BACK,\
    SOLDERPASTE_N_FRONT, SOLDERPASTE_N_BACK,\
    SILKSCREEN_N_FRONT, SILKSCREEN_N_BACK,\
    SOLDERMASK_N_FRONT, SOLDERMASK_N_BACK,\
    DRAW_N,\
    COMMENT_N,\
    ECO1_N, ECO2_N,\
    EDGE_N,\
    UNUSED_LAYER_29, UNUSED_LAYER_30, UNUSED_LAYER_31\
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T06:32:25.190

非法转义序列错误使我认为一个或多个反斜杠右侧可能有空格。

现在解决了。。

谢谢大家。。

# c# - 验证不适用于部分视图

> ID：10424065
> 
> 赞同：0
> 
> 时间：2012-05-03T01:49:44.187
> 
> 标签：c#, asp.net-mvc-3, forms, validation, views

我有一个根视图，其中包含两个部分视图，它们基于单击按钮加载到 div 中：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Donation information</legend>
    <p>
        @Html.LabelFor(m => m.DonationType.DonationTypex) <br />
        @Html.DropDownListFor(model => model.DonationType.DonationTypeID, ViewBag.DonationTypes as      
        SelectList, htmlAttributes: new { @id = "selectList" })
        &nbsp;&nbsp;
        @Html.ActionLink("Select", "ContinueDonation", "Donation", htmlAttributes: new { @id = 
        "btnSelect1" })

    </p>

    <div id="donationSection1"></div>

 <br />
 <input id="btnAddPayment1" type="button" value="Add Payment Info" />
 <br /><br />
 <div id="paymentSection1"></div>

 <input type="submit" id="btnSubmitDonation" value="Save" />
 <input type="button" id="btnCancelDonation" value="Cancel" /> 

 </fieldset>
} 
```

加载到donationSection1和paymentSection1 div中的部分视图共享相同的模型，只包含其中不同属性的编辑器、标签等......只是想知道我怎样才能让它验证部分视图......如果提交/保存按钮位于根视图...

...加载 div 的 jquery ...（控制器返回共享相同模型的部分视图）：

```
 $("#btnSelect1").click(function () {
        var donationTypeID = $(this).closest('p').find('#selectList').val();
        var id = parseInt(donationTypeID);
        var route = '/Donation/ContinueDonation?dTypeId=' + id;
        $("#donationSection1").load(route, function () {
            $("#donationSection1").show('slow');
        });
        return false;
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:33:11.520

尝试使用 jquery validator.unobtrusive.parse

```
$("#btnSelect1").click(function () {
        var donationTypeID = $(this).closest('p').find('#selectList').val();
        var id = parseInt(donationTypeID);
        var route = '/Donation/ContinueDonation?dTypeId=' + id;
        $("#donationSection1").load(route, function () {
            $("#donationSection1").show('slow');
        });
          jQuery.validator.unobtrusive.parse('#donationSection1')
        return false;
    }); 
```

这是带有更多解释的链接

[http://itmeze.com/2010/10/08/client-side-validation-after-ajax-partial-view-result-in-asp-net-mvc-3/](http://itmeze.com/2010/10/08/client-side-validation-after-ajax-partial-view-result-in-asp-net-mvc-3/)

# c++ - 什么是可转换的 QML WebView？

> ID：10424067
> 
> 赞同：3
> 
> 时间：2012-05-03T01:50:14.860
> 
> 标签：c++, qt, webkit, qml

说我们有一些

```
WebView {
           id: webView
           objectName: "webView"
... 
```

我们可以通过以下方式成功找到它：

```
 QObject *object = w.ui->rootObject();
    QObject *object_webView = object->findChild<QObject*>("webView"); 
```

但是为什么我们不能将它投射到 QWebView，而不是 QGraphicsWebView，如下所示：

```
QGraphicsWebView * view = qobject_cast<QGraphicsWebView *>(object_webView); 
```

所以我想知道如何将 qml WebView 中的 dsefined 转换为具有类似方法的 Qt 对象`->page()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:19:16.490

我检查了代码，发现 QML Webview 元素实际上是**QDeclarativeWebView**，它是从**QDeclarativeItem**派生的。

**QGraphicsWebView**不进入继承层次结构。QGraphicsWebView 是 QDeclarativeWebView 的私有成员。

为了让您能够访问 QWebPage，我想您必须使用 QDeclarativeItem 创建自己的自定义 WebView 元素。

以下代码应该有助于澄清问题。

```
QDeclarativeWebView::QDeclarativeWebView(QDeclarativeItem *parent) : QDeclarativeItem(parent)
{
    init();
}

void QDeclarativeWebView::init()
{
    d = new QDeclarativeWebViewPrivate(this);

...

    d->view = new GraphicsWebView(this);
    d->view->setResizesToContents(true);
    QWebPage* wp = new QDeclarativeWebPage(this);
    setPage(wp);
  ...
}

GraphicsWebView::GraphicsWebView(QDeclarativeWebView* parent)
    : QGraphicsWebView(parent)
    , parent(parent)
    , pressTime(400)
{
}

class WebKitQmlPlugin : public QDeclarativeExtensionPlugin {
    Q_OBJECT
public:
    virtual void registerTypes(const char* uri)
    {
        Q_ASSERT(QLatin1String(uri) == QLatin1String("QtWebKit"));
        qmlRegisterType<QDeclarativeWebSettings>();
        qmlRegisterType<QDeclarativeWebView>(uri, 1, 0, "WebView");
    }
}; 
```

通过使用以下代码，您可以创建自定义 QML Web 视图元素并访问网页。

```
//custom QML web view element
MyDeclarativeWebView::MyDeclarativeWebView(QDeclarativeItem *parent) 
    : QDeclarativeItem(parent)
{
   mGraphicsWebView = new QGraphicsWebView(this);
}

QGraphicsWebView* MyDeclarativeWebView::webView() const {
    return mGraphicsWebView;
}

//register webview  wlement in main.cpp
qmlRegisterType<QmlLabel>("MyWebView", 1, 0, "MyWebView");

//use your old code to access custom webview element
QObject *object = w.ui->rootObject();
QObject *myWebViewObj = object->findChild<QObject*>("webView");
MyDeclarativeWebView * myWebView = qobject_cast<MyDeclarativeWebView *>(myWebViewObj);
QGraphicsWebView* graphivsWebview = myWebView->webView(); 
```

# c# - 消息框弹出两次--WPF

> ID：10424069
> 
> 赞同：1
> 
> 时间：2012-05-03T01:50:34.030
> 
> 标签：c#, wpf, wcf

我有基于 WPF 开发的 Windows 应用程序，我将在这里解决奇怪的问题。我必须选择图像，一旦完成，就会弹出“关键帧图像已成功调整大小”之类的消息，但是如果执行两次，它会弹出两次，如果执行 3 次，则会弹出三次。

我不确定如何解决这个问题或如何计算，非常感谢任何帮助。

这是我的视图模型类文件

```
 private void imageResizer_ResizeCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
    {
        string test =e.ToString();
        ImageResizerResult result = (ImageResizerResult)e.Result;

        this.aggregator.GetEvent<ImageResizeCompletedEvent>().Publish(result.IsSuccessful);

            if (result.IsSuccessful)
            {

                this.dialog.ShowSuccess("Keyframe Image was resized successfully");
            }

        } 
```

正在调用我的服务以传递此消息

```
 public void ShowSuccess(string message)
    {

        MessageBox.Show(message,
                        "Success",
                        MessageBoxButton.OK,
                        MessageBoxImage.Information);
    } 
```

知道这里缺少什么。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:19:05.123

我认为每次选择图像时，都会使用 += 运算符向该图像（或图像的控制器）添加一个事件。然后，在您的应用程序的某个地方触发 ResizeComplete 事件。

但是，由于您从未将事件与之前的图像分离，因此它们会一起触发。您需要在代码中的某处使用 -= 运算符，可能在 ResizeComplete 方法中。

# iframe - 如何跟踪您的用户在登录时访问的页面

> ID：10424070
> 
> 赞同：0
> 
> 时间：2012-05-03T01:50:36.043
> 
> 标签：iframe, coldfusion, air

我想在我的学生完成作业时跟踪他们，但要以一种好的方式。我想看看他们的搜索策略，以及他们完成作业花了多长时间。

我正在设想一种快进系统，在那里我可以回放他们所做的事情，跳过他们去吃饭时的长时间延迟。我还可以看到学生反过来使用它，观察我花了多长时间给他们的论文评分。

那么，是否有可能使用 iframe 来跟踪他们访问的每个 url？

我还必须不允许从剪贴板粘贴到答案框中，除非剪贴板内容来自 iframe。

所以他们可以自由使用任何搜索引擎——我只需要看看他们是如何得到答案的。

我可能不得不使用 AIR，我不知道。

将此归档在 ColdFusion 下，因为我是 ColdFusion 开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:22:06.130

除非您控制整个浏览器体验，否则您将无法确定地了解其中的任何内容*。*您可以跟踪他们在您的网站上所做的事情 - 但不能跟踪他们在其他地方的去向。因此，Sharindo 的答案是合适的（使用 cfhttp 代理他们的请求），尽管价格昂贵。然而，它不会阻止他们简单地打开一个新的浏览器窗口。

关于剪切和粘贴限制。您可以使用一些 JS 关闭剪切和粘贴，然后提供一个按钮，可以将学生在页面上选择的任何内容“粘贴”到相应的文本框中。所以...学生可以搜索（使用您创建的 chttp 代理页面），选择信息，然后单击按钮将其粘贴到答案框中。您不能关闭我所知道的“有选择地”剪切和粘贴（例如，如果他们复制某些内容不允许它但允许它用于某些其他内容）。

跟踪稍微容易一些，并且可以很简单......再次，您只能跟踪您控制的流量。您可以为表或文件创建一个简单的审计/日志函数，然后使用这些数据创建显示通过站点的路径的报告。但是您无法跟踪它们的*其他*位置-至少在没有在计算机本身上安装代理的情况下不能跟踪-我认为这可能（将）被认为是不正当的（哈）。

所以...如果您只坚持自己的网站，有一些方法可以满足您的基本要求，但它们都不是没有缺陷的，也许它们都不能满足您的需求。

我会添加（关于剪切和粘贴以及您的代理）。即使是半聪明的精通技术的学生也可以安装诸如萤火虫之类的东西并规避您的谨慎规则。恐怕这是一场失败的战斗：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:17:02.967

您可以将日期时间戳传递给数据库表，以及它们所在的 url...我通过这样做来跟踪我网站上的搜索...并且只需传递您需要的变量...所以即：上午 8 点 - 学生 Bob 登录... 8:01 转到作业页面... 搜索这个或那个... 用于跟踪页面... 您可以使用其中一些...

```
 #CGI.HTTP_USER_AGENT# - tracks O/S they are on... Can see ipad, iphone, android, msie
 #cgi.http_referer# - track where they came from
 #cgi.PATH_INFO# or #URL.path# - get url their on... 
```

只是一些不同的事情要尝试......然后将东西转储到数据库表等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:51:32.480

一旦学生离开您的域，跨域安全性会阻止您访问 iFrame 的 DOM 属性。您可以通过使用 cfhttp 代理他们的所有搜索并记录他们从那里搜索的内容来完成您想做的事情。然后，您需要将所有搜索返回的链接再次放入同域代理查询中，以记录他们点击的结果。可行，但可能不像您想象的那么简单和灵活。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:06:37.493

不要重新发明轮子。您的 Web 服务器将记录所有内容，如果没有，您可以打开它，然后您可以使用日志分析工具来深入研究日志。

如果这不能给你想要的东西，你可以写一些东西来传递日志。

# ios - 如何选择 PDF 中的文本行然后突出显示它们？(iOS)

> ID：10424072
> 
> 赞同：7
> 
> 时间：2012-05-03T01:50:52.687
> 
> 标签：ios, pdf, annotations, quartz-graphics

我在 Google、stackoverflow 和 Apple 的开发人员库上搜索了 PDF 注释，但没有一个能真正满足我的需要。这是我的问题和我目前对它的了解，如果我错了，请纠正我。

我想允许用户首先选择一些要突出显示的文本行，然后在它们上面绘制突出显示的矩形。

**[问题]：我们如何在CGContextDrawPDFPage()渲染的PDF页面上选择文本？** *具体来说，如果我要覆盖 touchesBegan/Moved/Ended 委托方法，我应该在那里做什么来跟踪用户想要选择的文本框架？*

我不想使用 FastPDFKit 因为它显示一个徽标并且要花钱，或者 UIWebView 因为它在我们可以用它做的事情方面非常有限，而且我想自己学习如何做到这一点:-)

谢谢！德里克

**- 更新 -**

潜在的解决方案：我可能会在我的 PDF 顶部放置一个透明视图，并在解析 PDF 内容时，为每个 Tj 或 TJ 中的每个字符串元素构建一个矩形。这些矩形将是用户可以突出显示的可选“文本”。需要注意的是，有些 PDF 会将几个单词塞进一个 Tj 中，这样会阻止用户在这种情况下选择单个单词。我将尝试这种方法并稍后更新结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T08:51:23.820

您的潜在解决方案是可行的方法。Tj 字符串的边界矩形的大小是字符串中每个字形的边界矩形的总和，因此您可以选择字符串中的任何内容。PDFKitten 库可能会帮助您进行文本处理：[https ://github.com/KurtCode/PDFKitten](https://github.com/KurtCode/PDFKitten)

# ubuntu - 如何使用“NetworkNotFound”从 nova-compute 崩溃中恢复？

> ID：10424074
> 
> 赞同：0
> 
> 时间：2012-05-03T01:51:29.287
> 
> 标签：ubuntu, cloud, openstack

我正在（尝试）在 Ubuntu 12.04 服务器上测试新的 OpenStack Essex 安装，截至本文已完全更新。当我启动我的第一个 VM 时，由于配置错误导致了一些网络问题，所以我删除了固定的 IPv4 网络定义。显然这是一个错误，因为试图启动图像的 nova-compute 节点在守护进程启动时崩溃并出现“NetworkNotFound”错误，大概是因为它找不到我必须删除的错误配置的网络 ID。我已经发布了“nova delete”来删除虚拟机，但它仍然显示为“nova list ...”等。（我猜是因为 nova-compute 无法启动，它无法检查队列删除损坏的图像。所以...我如何让 nova-compute 重新启动，并删除 VM 的所有痕迹？

```
2012-05-02 15:46:02 TRACE nova Traceback (most recent call last):
2012-05-02 15:46:02 TRACE nova   File "/usr/bin/nova-compute", line 49, in <module>
2012-05-02 15:46:02 TRACE nova     service.wait()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 413, in wait
2012-05-02 15:46:02 TRACE nova     _launcher.wait()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 131, in wait
2012-05-02 15:46:02 TRACE nova     service.wait()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/greenthread.py", line 166, in wait
2012-05-02 15:46:02 TRACE nova     return self._exit_event.wait()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/event.py", line 116, in wait
2012-05-02 15:46:02 TRACE nova     return hubs.get_hub().switch()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/hubs/hub.py", line 177, in switch
2012-05-02 15:46:02 TRACE nova     return self.greenlet.switch()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/eventlet/greenthread.py", line 192, in main
2012-05-02 15:46:02 TRACE nova     result = function(*args, **kwargs)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 101, in run_server
2012-05-02 15:46:02 TRACE nova     server.start()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/service.py", line 162, in start
2012-05-02 15:46:02 TRACE nova     self.manager.init_host()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 247, in init_host
2012-05-02 15:46:02 TRACE nova     self.reboot_instance(context, instance['uuid'])
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/exception.py", line 114, in wrapped
2012-05-02 15:46:02 TRACE nova     return f(*args, **kw)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 153, in decorated_function
2012-05-02 15:46:02 TRACE nova     function(self, context, instance_uuid, *args, **kwargs)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 177, in decorated_function
2012-05-02 15:46:02 TRACE nova     sys.exc_info())
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/contextlib.py", line 24, in __exit__
2012-05-02 15:46:02 TRACE nova     self.gen.next()
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 171, in decorated_function
2012-05-02 15:46:02 TRACE nova     return function(self, context, instance_uuid, *args, **kwargs)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 896, in reboot_instance
2012-05-02 15:46:02 TRACE nova     network_info = self._get_instance_nw_info(context, instance)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/compute/manager.py", line 313, in _get_instance_nw_info
2012-05-02 15:46:02 TRACE nova     instance)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/network/api.py", line 219, in get_instance_nw_info
2012-05-02 15:46:02 TRACE nova     'args': args})
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/rpc/__init__.py", line 68, in call
2012-05-02 15:46:02 TRACE nova     return _get_impl().call(context, topic, msg, timeout)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/rpc/impl_kombu.py", line 674, in call
2012-05-02 15:46:02 TRACE nova     return rpc_amqp.call(context, topic, msg, timeout, Connection.pool)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py", line 338, in call
2012-05-02 15:46:02 TRACE nova     rv = list(rv)
2012-05-02 15:46:02 TRACE nova   File "/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py", line 306, in __iter__
2012-05-02 15:46:02 TRACE nova     raise result
2012-05-02 15:46:02 TRACE nova RemoteError: Remote error: NetworkNotFound Network 3 could not be found.
2012-05-02 15:46:02 TRACE nova [u'Traceback (most recent call last):\n', u'  File "/usr/lib/python2.7/dist-packages/nova/rpc/amqp.py", line 252, in _process_data\n    rval = node_func(context=ctxt, **node_args)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/network/manager.py", line 258, in wrapped\n    return func(self, context, *args, **kwargs)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/network/manager.py", line 957, in get_instance_nw_info\n    network = self._get_network_by_id(context, vif[\'network_id\'])\n', u'  File "/usr/lib/python2.7/dist-packages/nova/network/manager.py", line 1733, in _get_network_by_id\n    network_id)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/network/manager.py", line 1549, in _get_network_by_id\n    return self.db.network_get(context, network_id)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/db/api.py", line 755, in network_get\n    return IMPL.network_get(context, network_id)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py", line 120, in wrapper\n    return f(*args, **kwargs)\n', u'  File "/usr/lib/python2.7/dist-packages/nova/db/sqlalchemy/api.py", line 1920, in network_get\n    raise exception.NetworkNotFound(network_id=network_id)\n', u'NetworkNotFound: Network 3 could not be found.\n']. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:16:07.610

我的 OpenStack 部署也有类似的问题。解决方案非常简单：转到您的 Nova 数据库，并在网络表中创建一个新网络，但手动设置 id，在您的情况下 id=3。在此之后，您可以尝试再次删除该实例，它应该会正确终止。删除所有错误配置的实例后，再次从数据库中删除网络。

# python - PyMongo 光标迭代

> ID：10424078
> 
> 赞同：5
> 
> 时间：2012-05-03T01:53:04.277
> 
> 标签：python, mongodb, pymongo

我正在寻找在 python 中创建和处理游标的方式，就像游标在 mongo 中本机工作的方式一样。我知道预期的方法是执行“result = collection.find()”并执行“for record in result”，但我希望将迭代功能包装在一个类中。我希望能够创建一个新的类对象并调用一个函数，例如 init_cursor() 来建立一个数据库连接并执行一个返回游标的查找。然后我希望有一个 get_next() 函数，该函数将移动到下一个结果并根据结果设置类数据成员。这是伪代码：

```
class dataIter():
    def __init__(self):
        self.collection = pymongo.Connection().db.collection
        self.cursor = self.collection.find({}) #return all
        self.age = None
        self.gender = None

    def get_next(self):
        if self.cursor.hasNext():
            data = self.cursor.next()
            self.set_data(data)

    def set_data(self, data):
        self.age = data['age']
        self.gender = data['gender'] 
```

这样我就可以简单地调用：

```
obj.get_next()
age = obj.age
gender = obj.gender 
```

或其他一些帮助功能，用于从每个文档中提取数据

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T02:06:04.853

我不明白您所展示的内容比仅执行以下操作更方便：

```
col = pymongo.Connection().db.collection
cur = col.find({})

obj = next(cur, None)
if obj:
    age = obj['age']
    gender = obj['gender'] 
```

目前尚不清楚这个包装器有什么帮助。此外，如果你真正追求的是 ORM，那么当它存在时不要重新发明轮子：http: [//mongoengine.org/](http://mongoengine.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:41:25.197

你应该使用python迭代器协议，你的类可以看起来像这样

```
class DataIter:
    def __init__(self):
         self.collection = pymongo.Connection().db.collection
         self.cursor = self.collection.find({}) #return all
         self.age = None
         self.gender = None
    def __iter__(self):
         return self
    def next(self):
        if self.cursor.hasNext():
            data = self.cursor.next()
            self.set_data(data)
            return self
        else:
            raise StopIteration 
```

然后你可以像这样迭代

```
for c in DataIter():
    age = c.age
    gender = c.gender 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:58:26.553

Here's what I ended up going with:

```
class Cursor(object):

    def __init__(self):
        # mongo connection
        self.collection = pymongo.Connection().cursorcollection
        self.loaded = False
        self.cursor = None

    # Cursor calls (for iterating through results)
    def init_cursor(self):
        """ Opens a new cursor """
        if not self.cursor:
            self.cursor = self.collection.find({})

    def get_next(self):
        """ load next object """
        if self.cursor and self.cursor.alive:
            self.set_data(next(self.cursor))
            return True
        else:
            self.cursor = None
            return False

    def has_next(self):
        """ cursor alive? """
        if self.cursor and self.cursor.alive:                                                                                                                                                                                                                                
            return True
        else:
            return False 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T15:19:27.650

您可以使用类似于您已经发布的内容来完成此操作。PyMongo 游标没有`haveNext`方法，但它们有一个`next`方法可以返回下一个文档，或者 raise `StopIteration`（这是由 Python 迭代器协议指定的）。

您还可以更进一步：您可以使用`__getattr__`which 实现 Python 类的属性查找，而不是将文档中的值分配给类的属性。

把它们放在一起，你最终可能会得到类似的东西：

```
class DataIter(object):

    def __init__(self, cursor):
        self._cursor = cursor
        self._doc = None

    def next(self):
        try:
            self._doc = self._cursor.next()
        except StopIteration:
            self._doc = None
        return self

    def __getattr__(self, key):
        try:
            return self._doc[key]
        except KeyError:
            raise AttributeError('document has no attribute %r' % name) 
```

# gwt - 在执行时使用 Guice 和 GIN 的动态 GWT 模块

> ID：10424082
> 
> 赞同：2
> 
> 时间：2012-05-03T01:54:56.427
> 
> 标签：gwt, guice, modularity, gwt-gin

我和一位朋友正在考虑使用 GWT、guice、GIN、JPA2 等构建可插拔应用程序......

在我们的想法中，我们将拥有一个基本的 Web 应用程序，包括登录、权限管理、基本配置、一个菜单和一个用于真实 Web 应用程序内容的内容槽。

然后，我们可以使用 Web 应用程序提供的一些 API 构建一个新的插件，生成一个 jar 文件，并将其放在 Web 应用程序的文件夹中。然后，当应用程序启动时，我们将通过反射检测声明了哪些模块并将它们添加到 Injector 和类路径中。这可以在服务器端代码中工作。

但是，我们想不出什么对客户端非常好的和可用的东西，因为 GWT 代码是编译的，所以，我们不能只添加新的地方、事件等而不继承模块和/或重新编译应用程序......

所以，在这个问题上，我想听听你们认为可以做些什么来使它起作用。任何想法都会受到欢迎。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T10:46:33.447

这不仅仅是一个答案，也是一个想法：

我知道您最终会得到几个应用程序（几个模块 .gwt.xml），每个应用程序都有其入口点。然后你有一个聚合器模块和其他一些模块。所以每次你必须重新编译这个聚合器模块，实际上它会重新编译来自其他模块的所有类。这是首选方式，因为您可以保持应用程序的一致性。

我正在考虑的另一种方法（未尝试过）是在公共模块中包含 api、服务接口和对象，然后您的聚合器将是一个简单的 html 页面，其中包含一些 js 代码来粘合所有模块。因此，如果您不更改您的 Common 模块，您将不需要重新编译其他模块。

相当艰难的艰难。

也许这会有所帮助。 [http://www.summa-tech.com/blog/2011/02/22/structuring-gwt-modules-for-large-applications/](http://www.summa-tech.com/blog/2011/02/22/structuring-gwt-modules-for-large-applications/)

# ruby-on-rails - Resque 开发模式下的多个工作人员

> ID：10424087
> 
> 赞同：16
> 
> 时间：2012-05-03T01:56:00.063
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, background, resque

嗨，是否可以在开发中同时运行多个 Resque 工作人员？我找到了这段代码，但不确定它是否会起作用以及如何..

[http://pastebin.com/9GKk8GwR](http://pastebin.com/9GKk8GwR)

到目前为止，我正在使用标准

```
bundle exec env rake resque:work QUEUE='*'

redis-server /usr/local/etc/redis.conf 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-03T03:07:30.207

您需要添加一个`COUNT`环境变量，然后更改`resque:work`为`resque:workers`. 例如，要启动 3 个工人：

```
bundle exec env rake resque:workers QUEUE='*' COUNT='3' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T02:36:10.020

我知道如何做到这一点的唯一方法，我认为这是一个很好的方法，它使用 Foreman（与 heroku 使用的相同）。

您在名为**Procfile**的文件中定义您的流程，例如：

```
web:    bundle exec thin start -p $PORT
worker: bundle exec rake resque:work QUEUE=*
clock:  bundle exec rake resque:scheduler 
```

然后您只需一个命令即可启动您的应用程序

```
foreman start 
```

要启动一种类型的多个进程，如下所示：

```
foreman start -c worker=2 
```

* * *

[https://github.com/ddollar/foreman](https://github.com/ddollar/foreman)

[http://blog.daviddollar.org/2011/05/06/introducing-foreman.html](http://blog.daviddollar.org/2011/05/06/introducing-foreman.html)

# c++ - 如何在 C++ 中返回二维字符串数组/向量

> ID：10424088
> 
> 赞同：-1
> 
> 时间：2012-05-03T01:56:06.467
> 
> 标签：c++, string, vector

我有这样的功能

```
typedef vector<vector<string> > vecArray;
vecArray dul();

vecArray dul() {
    vecArray arr = {
                    { "a", "b", "c" },
                    { "a", "b", "c" },
                    { "a", "v", "d" }
                    };
    return arr;
} 
```

我想在 C++ 函数中返回看起来像波纹管的字符串

```
{
{"ffsff","aaaasda","ddaddd"},
{"sfsasda","sdadsfd","asasaad"},
{"adacv","fasfaa","asa","aba"}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:40:17.957

您不能使用初始化列表构造向量，因为该功能仅在 C++11 中可用。不过，您可以轻松地使用 2D 数组构造向量。

```
vecArray dul() {
    string arrTemp [3][3] = //create 2D array of strings
        {
            { "a", "b", "c" },
            { "a", "b", "c" },
            { "a", "v", "d" }
        };

    vecArray arr; //here's our vector

    //for 3 arrays, push each onto back of vector using the iterator constructor
    for (vecArray::size_type i = 0; i < 3; ++i) 
        arr.push_back (vector<string> (arrTemp [i], arrTemp [i] + 3));

    return arr;
} 
```

# java - 在java中评估后缀表达式

> ID：10424091
> 
> 赞同：2
> 
> 时间：2012-05-03T01:56:32.787
> 
> 标签：java

我有一个问题，我在这个函数中找不到错误，它有时可以很好地处理一些输入，但有时没有，例如这个输入“6 2 / 3 – 4 2 * +”可以帮助任何人。

```
public static double Evaluating_postfix_expressions(String postfix) throws Exception{
    StringTokenizer st = new StringTokenizer(postfix);
    int numOF_tokens = st.countTokens();
    for (int i = 1; i <= numOF_tokens; i++) {
        Object term = st.nextToken();
        try { // if it is an operand there is no problem
            float x =  Float.parseFloat((String)term);
            stack.push(x);
        } catch (Exception e) { // it is an operator
            float v1 = (float) stack.pop();
            float v2 = (float) stack.pop();
            switch ((String) term) {
            case "+":
                stack.push(v2 + v1);
                break;
            case "-":
                stack.push(v2 - v1);
                break;
            case "*":
                stack.push(v2 * v1);
                break;
            case "/":
                stack.push(v2 / v1);
                break;
            }
        }
    }
    return (float) stack.pop();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T02:07:26.627

请注意，您输入的运算符不正确：

```
6 2 / 3 – 4 2 * + 
```

请注意与此处手动输入的版本的区别：

```
6 2 / 3 - 4 2 * + 
```

您使用了破折号而不是连字符 - 或者相反：

```
$ echo -n – | xxd
0000000: e280 93                                  ...
$ echo -n - | xxd
0000000: 2d                                       -
$ 
```

这是不报告任何问题的包罗万象的异常问题的一部分。您应该修改您`switch`的报告无效运算符，这将使捕获这个更容易。（我只是碰巧觉得它*看起来很有趣*。）

# vim - 如何列出 cscope 搜索到的所有标签？

> ID：10424094
> 
> 赞同：2
> 
> 时间：2012-05-03T01:57:13.543
> 
> 标签：vim, cscope

我只需要一个函数`tags`，它会列出与我的搜索匹配的所有标签。但是在我检查了文档之后，我仍然找不到相应的工具来提供这个功能。因此，当我使用跳转到一个标签并发现这不是我需要的标签后，它会变得非常不方便`cscope`，我想检查另一个标签。我必须再次搜索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:11:44.930

您应该使用 quickfix cscope 集成。在你的 .vimrc 中设置：

```
set cscopequickfix=s-,c-,d-,i-,t-,e- 
```

然后您可以进行 cscope 查询，所有命中都将在 quickfix 和/或位置列表中。我更喜欢在查询后打开位置列表，然后我可以搜索位置。按回车键转到该位置。

```
:lopen 90 
```

请务必阅读 vim :help quickfix 另请参阅此文档：

[http://vim.wikia.com/wiki/Cscope](http://vim.wikia.com/wiki/Cscope)

# c# - 如何仅为一项创建 IEnumerable 列表？

> ID：10424099
> 
> 赞同：0
> 
> 时间：2012-05-03T01:57:35.063
> 
> 标签：c#

我有一个类的以下构造函数：

```
public SelectList(IEnumerable items); 
```

我一直在填充以下内容：

```
 var AccountId = new SelectList(_reference.Get("01")
            .AsEnumerable()
            .OrderBy(o => o.Order), "RowKey", "Value", "00"); 
```

现在我想填充一个数据元素，其中数据是一个列表，如下所示：

```
RowKey = "", Value = "00" 
```

如何从上面的行中创建一个 IEnumerable？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:07:47.523

[Enumerable.Repeat](http://msdn.microsoft.com/en-us/library/bb348899.aspx) 是创建仅返回一个元素的迭代器的非常方便的方法。如果您需要 0 个项目的迭代器，请使用 Enumerable.Empty。

```
Enumerable.Repeat(new {RowKey = "", Value = "00"}, 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:00:29.893

您可以使用匿名类型数组：

```
var AccountId = new SelectList(new[] 
                { 
                    new { RowKey = "", Value = "00" }
                }, "RowKey", "Value", "00"); 
```

# facebook - As3 Facebook API 1.8 FacebookMobile.login

> ID：10424101
> 
> 赞同：0
> 
> 时间：2012-05-03T01:58:11.330
> 
> 标签：facebook, actionscript-3, facebook-graph-api

我已经下载了 Facebook API 示例并进行了测试。

```
FacebookMobile.login(handleLogin, stage, extendedPermissions, new StageWebView()); 
```

但是，此代码似乎不起作用，它不会打开新的 Facebook 登录页面。

这是完整的源代码，我在 Adob​​e Air 3.0 下运行

```
package  {

    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;
    import flash.display.Stage;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.media.StageWebView;

    import com.facebook.graph.FacebookMobile;
    import com.facebook.graph.controls.Distractor;

    import demo.controls.GraphicButton;
    import demo.events.FacebookDemoEvent;
    import demo.models.FriendModel;
    import demo.views.FriendDetail;
    import demo.views.FriendsList;
    import demo.views.UserInfo;

    public class FriendListMobile extends MovieClip {

        //Place your application id here.
        protected static const APP_ID:String = 'xxxxxxxx';
        //Place your specified site URL for your app here. This is needed for clearing cookies when logging out.
        protected static const SITE_URL:String = 'xxxxxxxx';
        //Extended permission to access other parts of the user's profile that may be private, or if your application needs to publish content to Facebook on a user's behalf.
        protected var extendedPermissions:Array = ["publish_stream","user_website","user_status","user_about_me"];

        public var userInfo:UserInfo;
        public var loginBtn:GraphicButton;
        public var friendDetail:FriendDetail;
        public var friendList:FriendsList;

        public var distractor:Distractor;
        public var bg:DistractorOverlay;
        public var friendsModel:FriendModel;

        protected var selectedUserInfo:Object = {};

        public function FriendListMobile() {
            // constructor code
            addEventListener(Event.ADDED_TO_STAGE, handleAddedToStage);
        }

        protected function handleAddedToStage(event:Event):void {
            removeEventListener(Event.ADDED_TO_STAGE, handleAddedToStage);
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;
            init();
        }

        protected function init():void {
            configUI();
            addEventListeners();

            FacebookMobile.init(APP_ID, onHandleInit, null);
        }

        protected function configUI():void {
            loginBtn.label = 'Login';
            loginBtn.setSize(440, 60);
            loginBtn.setStyle('font', '_sans');
            loginBtn.setStyle('size', 25);

            friendsModel = new FriendModel();

            distractor = new Distractor();
            friendDetail.visible = false;

            bg = new DistractorOverlay();
            bg.visible = true;
            addChild(bg);

            distractor.x = 120
            distractor.y = 310; 

            bg.addChild(distractor);
        }

        protected function addEventListeners():void {
            loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick, false, 0, true);
            friendDetail.addEventListener(Event.CLOSE, onCloseDialog, false, 0, true);
            friendsModel.addEventListener(Event.COMPLETE, onFriendsComplete, false, 0, true);
            friendList.addEventListener(FacebookDemoEvent.FRIEND_SELECTED, onFriendSelected, false, 0, true);
        }

        /**
         * Pops up detail view for a selected friend.
         **/
        protected function showFriendDetail():void {
            bg.visible = true;

            friendDetail.visible = true;
            friendDetail.data = selectedUserInfo;

            this.setChildIndex(friendDetail, this.numChildren - 1);
        }

        /**
         * Event Handler Close DetailView
         **/
        protected function onCloseDialog(event:Event):void {
            friendDetail.visible = false;
            bg.visible = false;
        }

        /**
         * Event Handler user selects from the friend list.
         **/
        protected function onFriendSelected(event:FacebookDemoEvent):void {
            selectedUserInfo = event.data;
            showFriendDetail();
        }

        /**
         * Event Handler User clicks Login button.
         **/
        protected function handleLoginClick(event:MouseEvent):void {
            bg.visible = true;

            loginUser();
        }

        /**
         * Event Handler User clicks on Logout button.
         **/
        protected function handleLogOutClick(event:MouseEvent):void {
            FacebookMobile.logout(handleLogout, SITE_URL);

            loginBtn.label = 'Login';
            loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick, false, 0, true);

            friendList.clear();
            userInfo.clear();

            bg.visible = true;
        }

        /**
         * Event Handler once logged out.
         **/
        protected function handleLogout(response:Object):void {
            bg.visible = false;
        }

        /**
         * Event Handler FacebookMobile initializes application.
         * Application will check if user is return to application, 
         * if not user is prompted to log in.
         **/
        protected function onHandleInit(response:Object, fail:Object):void {
            if (response) {
                updateView(response.uid, response);
            } else {
                loginUser();
            }
        }

        /**
         * Updates UI for views 
         **/
        protected function updateView(id:String, data):void {
            userInfo.id = id;
            userInfo.data = data;

            loginBtn.label = 'Log Out';
            loginBtn.addEventListener(MouseEvent.MOUSE_DOWN, handleLogOutClick);
            loginBtn.removeEventListener(MouseEvent.MOUSE_DOWN, handleLoginClick);

            friendsModel.load();
        }

        /**
         * Preforms a login call to application. Mobile application takes in an instance 
         * StageView class.
         **/
        protected function loginUser():void {
            trace('not log in');
            FacebookMobile.login(handleLogin, stage, extendedPermissions, new StageWebView());
        }

        /**
         * Event Handler once user logs in.
         **/
        protected function handleLogin(response:Object, fail:Object):void {
            bg.visible = false;
            FacebookMobile.api('/me', handleUserInfo);
        }

        /**
         * Event Handler for users information.
         **/
        protected function handleUserInfo(response:Object, fail:Object):void {
            if (response) {
                updateView(response.id, response);
            }
        }

        /**
         * Event Handler FriendModel information has been loaded.
         **/
        protected function onFriendsComplete(event:Event):void {
            bg.visible = false;
            friendList.dataProvider = friendsModel.dataProvider;
        }
    }

} 
```

是不是因为它只能在移动设备下工作，而不能在桌面上测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:32:45.727

在开发登录到 Facebook 的 Flex Mobile 应用程序时，对我有用的是将以下参数设置为 StageWebView，然后再将其传递给登录函数：

对于 Flex：

```
StageWebView webView = new StageWebView();
webView.stage = FlexGlobals.topLevelApplication.stage;
webView.viewPort = new Rectangle(0, 0, FlexGlobals.topLevelApplication.stage.stageWidth, FlexGlobals.topLevelApplication.stage.stageHeight); 
```

我还没有在非 Flex air 移动应用程序上测试过这段代码，但你可以试试这个：

```
StageWebView webView = new StageWebView();
webView.stage = stage;
webView.viewPort = new Rectangle(0, 0, stage.stageWidth, stage.stageHeight); 
```

并将其传递给登录函数：

```
FacebookMobile.login(handleLogin, stage, extendedPermissions, webView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:23:18.543

找到解决方案

而不是创建新的 StageWebView();

执行以下方式有效！是的

FacebookMobile.login(handleLogin, stage, extendedPermissions, getWebView());

私有函数 getWebView():StageWebView { if(webView) webView.dispose();

```
 webView = new StageWebView();
        webView.stage=this.stage;
        webView.assignFocus();

        webView.viewPort = new Rectangle(8, 8, stage.stageWidth -16, stage.stageHeight -16 );
        return webView;
    } 
```

# tomcat6 - 需要有关 Tomcat6 和 Oracle 11g 应用程序部署的建议

> ID：10424103
> 
> 赞同：0
> 
> 时间：2012-05-03T01:58:53.040
> 
> 标签：tomcat6

这是我在这个论坛上的第一个问题；因此，如有任何错误或不完整，请多多包涵。

我们在 Tomcat 6.0.20 和 Oracle 10g 下部署了一个 Web 应用程序，它在过去一年左右的时间里运行得非常好，没有出现任何问题。本周我们已经迁移到一个新的服务器环境。唯一改变的是 Tomcat 6.0.35 和 Oracle 11g。我使用相同的 odbc14.jar 进行数据库连接池。

虽然应用程序似乎运行良好，但我看到大约每 10 分钟左右出现在 catalina.out 中的 JVM 全线程转储（即使应用程序端没有明显的活动）。

到目前为止，应用程序性能似乎没有受到影响，但我想知道我是否应该关注这些线程转储消息。

tomcat 和 Oracle 都在 Solaris 10 下运行（在单独的物理盒子中）

任何建议都会非常有帮助。让我知道线程转储快照是否对分析更有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:26:08.537

我相信这是 11g 和 odbc14.jar 组合的一个已知问题 您应该使用 ojdbc6.jar - 这可能会或可能不会解决您的问题，但这是我在寻找其他地方之前尝试的第一件事。

顺便说一句，如果你正在升级 tomcat，为什么现在 6.0.35 而不是 7.x - 7.0.27 已经出来了？

# javascript - iPad没有选择点击文本输入中的所有文本

> ID：10424107
> 
> 赞同：3
> 
> 时间：2012-05-03T01:59:30.283
> 
> 标签：javascript, jquery, html, ios, ipad

好的，这似乎是一个简单的请求，但我发现不是这样。我只是想要它，所以当 html input[type="text"] 被聚焦（在 ios 中点击）时，所有文本都被选中（就像任何普通浏览器一样）。我环顾四周，发现了一些建议，但似乎没有任何效果 - 这是我尝试过的：

```
$('input[type="text"], textarea').focus(function() {
    $(this).setSelectionRange(0, 9999);
}).mouseup(function(e){
    e.preventDefault();
}); 
```

也试过这个：

```
$('input[type="text"], textarea').focus(function() {
    $(this).select();
}).mouseup(function(e){
    e.preventDefault();
}); 
```

我读过 ios 上的 mouseup 事件确实很时髦，但我不确定。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:10:47.070

为什么不使用[jQuery Mobile](http://jquerymobile.com/demos/1.1.0/docs/api/events.html) `tap`事件：

```
$(document).ready(function() {
    $("input[type=text], textarea").on("tap", function() {
        this.select();
    }).vmouseup(function(e){
        e.preventDefault();
    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:05:56.027

我相信应该是

```
$('input[type="text"], textarea').focus(function() {
    this.select(); //no jquery wrapper
}).mouseup(function(e){
    e.preventDefault();
}); 
```

# java - 安卓的正确多任务处理

> ID：10424108
> 
> 赞同：1
> 
> 时间：2012-05-03T01:59:45.880
> 
> 标签：java, android

嗨，我正在开发一个 android 应用程序，我想知道如何让应用程序在后台运行时使用更少的 CPU。例如，我的应用程序一旦失去焦点就会暂停，但 cpu 使用率仍然是 50%

编辑

```
 while (!pause) {
             Canvas c = null;
             try {
                 c = sHolder.lockCanvas(null);
                 synchronized (sHolder) {
                     doDraw(c);
                     powerUps();
                 }
             } finally {
                 if (c != null) {
                     sHolder.unlockCanvasAndPost(c);
                 }
             }
         } 
```

然后，当您暂停并恢复时，它只会更改暂停变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:07:33.633

IMO，当您的应用程序暂停时，您根本不应该循环。

有关 android 应用程序的“正确”生命周期的更多详细信息，请参阅[此页面](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)。

另请注意，对于任何繁忙的循环设计，您的应用程序将使用 100% 的 CPU - 我不确定从该`onResume()`方法启动循环是否正确；我的直觉是让你的循环的每次迭代都由一个由调用发起的单独调用来执行`Handler.post()`，最后一个语句重新发布下一个调用。否则，应用程序的主线程会被饿死，对吧？

也许是这样的：

```
void iterate() {
     Canvas c = null;
     try {
         c = sHolder.lockCanvas(null);
         synchronized (sHolder) {
             doDraw(c);
             powerUps();
         }
     } finally {
         if (c != null) {
             sHolder.unlockCanvasAndPost(c);
         }
     }
     this.handler.post(this.iterateRunnable);
}

void onResume() {
    this.handler = new Handler();
    this.iterateRunnable = new Runnable() {
        @Override public void run() { iterate(); }
    };
    this.handler.post(this.iterateRunnable);
} 
```

# php - preg_split 包括尾随空格的单词

> ID：10424109
> 
> 赞同：1
> 
> 时间：2012-05-03T02:00:01.513
> 
> 标签：php, whitespace, preg-split

在这个例子中 preg_split 中使用的正则表达式是什么？

例子

```
<?$a='Word  with  white   trailing   spaces.    '; 
```

输出

```
Array(
[0] => 'Word  ',
[1] => 'with  ',
[2] => 'white   ',
[3] => 'trailing   ',
[3] => 'spaces.    '
) 
```

我不知道 php 中的正则表达式。我只需要最小化代码。也许有人可以帮助我并解释一下已回答的正则表达式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:42:31.637

编辑：我看到 OP 想要一个解释。基本上 () 将一个单词 \w+ 和任何非单词 \W+ 分组，直到它找到一个新单词 @)。所以（这里的任何东西）= $1

```
$str = "Word  with  white   trailing   spaces.    ";

$split = preg_split("/(\w+\W+)/", $str, null, PREG_SPLIT_DELIM_CAPTURE|PREG_SPLIT_NO_EMPTY);

var_dump($split); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:36:30.173

好吧，这是一个选择：

```
array_map('join', 
  array_chunk(
    preg_split('/(\s+)/', $a, null, 
               PREG_SPLIT_DELIM_CAPTURE|PREG_SPLIT_NO_EMPTY),
    2)); 
```

循序渐进。

1.  按任意数量的空格分割 -`\s+`

2.  但请记住空格 - 那是括号和 PREG_SPLIT_DELIM_CAPTURE 标志。

    这为您提供了一个如下所示的数组：

    ```
    array('Word', '  ', 'with', '  ', 'white', '   ',
          'trailing', '   ', 'spaces.', '    ') 
    ```

3.  将结果传递`array_chunk`给 chunk_size 为 2。

    现在我们有一个 2 元素数组的数组：

    ```
    array(array('Word', '  '), array('with', '  '), ... ) 
    ```

4.  将结果传递给-`array_map`的回调，`join`它将每对字符串连接成一个字符串，并为我们提供所需的结果：

    ```
    array('Word  ', 'with  ', ...); 
    ```

# perl - Perl 命令行搜索并替换为多个表达式

> ID：10424113
> 
> 赞同：19
> 
> 时间：2012-05-03T02:00:27.507
> 
> 标签：perl

我正在使用 Perl 搜索和替换多个正则表达式： 当我执行以下命令时，出现错误：

```
prompt> find "*.cpp" | xargs perl -i -pe 's/##(\W)/\1/g' -pe 's/(\W)##/\1/g'
syntax error at -e line 2, near "s/(\W)##/\1/g"
Execution of -e aborted due to compilation errors.
xargs: perl: exited with status 255; aborting 
```

拥有多个`-e`在 Perl 中是有效的，那么为什么这不起作用？有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-03T02:13:48.417

几个`-e`'s 是允许的。

你错过了`';'`

```
find "*.cpp" | xargs perl -i -pe 's/##(\W)/\1/g;' -pe 's/(\W)##/\1/g;' 
```

Perl 语句必须以`;`. 块中的最终语句不需要终止分号。因此，一个`-e`没有将起作用，但当您有多个语句时`;`，您将不得不添加。`;``-e`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-29T23:51:46.383

拥有多个`-e`值是有效的，但它有用吗？多个值`-e`仅组合到一个程序中，由您来确保它们一起构成一个语法正确的程序。该`B::Deparse`程序可以向您展示`perl`该程序的想法：

```
$ perl -MO=Deparse -e 'print' -e 'q(Hello'  -e ')'
print "Hello\n";
-e syntax OK 
```

需要注意的一件奇怪的事情是换行符偷偷溜进去了。想想它是如何到达那里的，看看还有什么其他`perl`方法可以组合多个`-e`值。

在您的程序中，您正在替换当前行，然后取修改后的行并再次替换。最好写成：

```
prompt> find "*.cpp" | xargs perl -i -pe 's/##(\W)/\1/g; s/(\W)##/\1/g' 
```

现在，如果您通过一些自动化过程添加越来越多的内容来构建此命令行，`-e`并且您不提前知道会得到什么，那么这些可能是`-e`有道理的。但是，您可能会认为您可以执行相同的操作来构建您提供给的字符串`-e`。我不知道什么会更好，因为您没有解释为什么要这样做。

但是，我怀疑在某些情况下，人们实际上是在考虑只进行一项替代工作。他们想尝试一种，如果它的模式不起作用，尝试另一种，直到成功。在这种情况下，您不想用分号分隔替换。改为使用短路`||`。`s///`返回它所做的替换次数，并在`||`找到真值时停止（短路）：

```
prompt> find "*.cpp" | xargs perl -i -pe 's/##(\W)/\1/g || s/(\W)##/\1/g' 
```

请注意，您只需要一个`-p`. 它只做一次它的工作。这是具有多个`-p`deparsed 的程序：

```
$ perl -MO=Deparse -i -pe 's/##(\W)/\1/g;' -pe 's/(\W)##/\1/g;'
BEGIN { $^I = ""; }
LINE: while (defined($_ = readline ARGV)) {
    s/##(\W)/$1/g;
    s/(\W)##/$1/g;
}
continue {
    die "-p destination: $!\n" unless print $_;
}
-e syntax OK 
```

这与只有一个相同`-p`：

```
$ perl -MO=Deparse -pi -e 's/##(\W)/\1/g;' -e 's/(\W)##/\1/g;'
BEGIN { $^I = ""; }
LINE: while (defined($_ = readline ARGV)) {
    s/##(\W)/$1/g;
    s/(\W)##/$1/g;
}
continue {
    die "-p destination: $!\n" unless print $_;
}
-e syntax OK 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-01-29T02:28:31.287

非常感谢！你帮我减少了我的 ascii/十进制/8 位二进制表打印机，足以容纳一条推文：

```
for i in {32..126};do printf "'\x$(printf %x $i)'(%3i) = " $i; printf '%03o\n' $i | perl \
-pe 's#0#000#g;' -pe 's#1#001#g;' -pe 's#2#010#g;' -pe 's#3#011#g;' \
-pe 's#4#100#g;' -pe 's#5#101#g;' -pe 's#6#110#g;' -pe 's#7#111#g' ; done | \
perl -pe 's#= 0#= #' 
```

# php - 包含的 PHP 脚本应该使用 PHP 标签吗？

> ID：10424115
> 
> 赞同：0
> 
> 时间：2012-05-03T02:00:49.753
> 
> 标签：php

如果我`include`或`require`来自另一个的一个 PHP 脚本，例如`include 'header.php';`，包含的 PHP 脚本是否也应该使用开始`<?php`和结束`?>`标记？

无论标签是否存在，脚本都会正确加载。但我不确定哪个是正确的程序。我担心的是：（1）再次使用标签，PHP引擎可能会启动两次并浪费资源，（2）不使用标签，这可能是不正确的，将来可能会中断，其他人也可能会看到PHP 代码（如果它在公共目录中）。

**编辑**

人们误解了这个问题。这是一些背景知识：当您`include`或`require`文件被动态放置在父文件中时，它们被解析为一个脚本。包含的脚本不会单独执行/解释，它只是继续。这就是不需要标签的*原因*。那不是我的问题。我的问题是在这种情况下使用 PHP 标记还是完全从包含的脚本中排除它们是否更好（由 PHP 推荐？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:12:18.687

如果您的 include/require 文件是 PHP，请使用 php 标签打开它`<?php`。通常，如果 php 标签后面没有任何内容，则不要关闭它，因为它是可选的。

> 文件末尾的 PHP 块的**结束标记是可选**的，在某些情况下**，在使用 include 或 require 时省略它会很有帮助，因此文件末尾不会出现不需要的空格**，您仍然可以添加稍后响应的标题。如果您使用输出缓冲，它也很方便，并且不希望在包含的文件生成的部分末尾看到添加的不需要的空白。

[http://php.net/manual/en/language.basic-syntax.instruction-separation.php](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)

# xpath - 用于选择给定节点中的所有文本及其子节点的文本的 XPath 表达式

> ID：10424117
> 
> 赞同：16
> 
> 时间：2012-05-03T02:01:08.457
> 
> 标签：xpath

基本上我需要抓取一些具有嵌套标签的文本。

像这样的东西：

```
<div id='theNode'>
This is an <span style="color:red">example</span> <b>bolded</b> text
</div> 
```

我想要一个能产生这个的表达式：

```
This is an example bolded text 
```

我已经为此苦苦挣扎了一个小时或更长时间，但没有任何结果。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-03T02:13:07.580

元素节点的[字符串值](http://www.w3.org/TR/xpath/#element-nodes)是该元素节点的所有文本节点后代的字符串值按文档顺序串联而成。

您想`string()`在 div 元素上调用 XPath 函数。

```
string(//div[@id='theNode']) 
```

您还可以使用[normalize-space](http://www.w3.org/TR/xpath/#function-normalize-space)函数来减少由于源文档中的换行和缩进而可能出现的不需要的空白。这将删除前导和尾随空格，并用单个空格替换空格字符序列。当您将节点集传递给 normalize-space() 时，节点集将首先转换为其字符串值。如果没有参数传递给 normalize-space，它将使用上下文节点。

```
normalize-space(//div[@id='theNode'])

// if theNode was the context node, you could use this instead
normalize-space() 
```

您可能希望使用比我一直使用的示例 XPath 更有效的方式来选择上下文节点。例如，可以在某些浏览器中针对该页面运行以下 Javascript 示例。

```
var el = document.getElementById('question');
var result = document.evaluate('normalize-space()', el, null ).stringValue; 
```

`span`和元素之间的纯空格文本节点`b`可能是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-08T03:19:06.140

如果你在 python 中使用 scrapy，你可以使用`descendant-or-self::*/text()`. 完整示例：

```
txt = """<div id='theNode'>
This is an <span style="color:red">example</span> <b>bolded</b> text
</div>"""

selector = scrapy.Selector(text=txt, type="html") # Create HTML doc from HTML text
all_txt = selector.xpath('//div/descendant-or-self::*/text()').getall()
final_txt = ''.join( _ for _ in all_txt).strip()
print(final_txt) # 'This is an example bolded text' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T02:39:26.037

**使用**：

```
string(//div[@id='theNode']) 
```

当计算这个表达式时，结果是`div`文档中第一个（希望是唯一的）元素的字符串值。

由于元素的字符串值在**[XPath 规范](http://www.w3.org/TR/xpath/#element-nodes)**中定义为所有文本节点后代的文档顺序连接，因此这正是所需的字符串。

因为这可能包括许多全空白文本节点，所以您可能希望消除连续的前导和尾随空白，并将任何此类中间空白替换为单个空格字符：

**使用**：

```
normalize-space(string(//div[@id='theNode'])) 
```

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  "<xsl:copy-of select="string(//div[@id='theNode'])"/>"
===========
  "<xsl:copy-of select="normalize-space(string(//div[@id='theNode']))"/>"
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<div id='theNode'> This is an 
    <span style="color:red">example</span>
    <b>bolded</b> text 
</div> 
```

**计算两个 XPath 表达式，并将这些计算的结果复制到输出**：

```
 " This is an 
    example
    bolded text 
"
===========
  "This is an example bolded text" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T03:24:53.713

这个怎么样 ：

/div/text()[1] | /div/span/text() | /div/b/text() | /div/text()[2]

嗯，我不确定最后一部分。你可能不得不玩那个。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-28T19:28:33.097

普通代码

> //div[@id='theNode']

获取所有文本，但如果它们分裂然后

> //div[@id='theNode']/text()

不确定，但如果你给我链接，我会试试

# c++ - 将基本算术运算符存储在变量中

> ID：10424119
> 
> 赞同：9
> 
> 时间：2012-05-03T02:01:13.983
> 
> 标签：c++, operators, switch-statement, arithmetic-expressions

**如何将基本算术运算符存储在变量中？**

我想在 C++ 中做这样的事情：

```
int a = 1;
int b = 2;
operator op = +;
int c = a op b;
if (c == 3) // do something 
```

由于我只考虑`+`, `-`,`*`并且`/`我可以将运算符存储在 a 中`string`并且只使用 switch 语句。但是我想知道是否有更好/更简单的方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T02:28:10.050

```
int a = 1;
int b = 2;
std::function<int(int, int)> op = std::plus<int>();
int c = op(a, b);
if (c == 3) // do something 
```

根据需要替换`std::plus<>`为`std::minus<>`, `std::multiplies<>`,`std::divides<>`等。所有这些都位于 header`functional`中，因此请务必`#include <functional>`事先。

如果您没有使用最新的编译器，请替换`std::function<>`为。[`boost::function<>`](http://www.boost.org/libs/function/)

# php - 使用分组的千位格式化数字

> ID：10424120
> 
> 赞同：1
> 
> 时间：2012-05-03T02:01:17.487
> 
> 标签：php

我有以下功能：

```
function getPostViews($postID){
    $count_key = 'post_views_count';
    $count = get_post_meta($postID, $count_key, true);
    if($count==''){
        delete_post_meta($postID, $count_key);
        add_post_meta($postID, $count_key, '0');
        return __('0 View','mm');
    }
    return $count. __(' Views','mm'); 
} 
```

如何使其格式化数字以在千分位中包含逗号？例如，50000 应该变成 50,000。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:03:52.640

使用[`number_format()`](http://us.php.net/number_format)：

```
number_format($number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:04:21.047

看看[`number_format`](http://php.net/manual/en/function.number-format.php)。

例如：

```
$number = 1234.56;

// english notation (default)
$english_format_number = number_format($number);
// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');
// 1 234,56

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');
// 1234.57 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:04:23.413

您可以使用[`number_format`](http://php.net/manual/en/function.number-format.php).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T02:03:39.223

```
$number=number_format($number); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T00:18:39.833

您的数字格式使用正确，以获得您正在寻找的漂亮格式。我认为您在更改数据库格式时遇到的问题是您正在格式化数字并将其重新保存。

例如：

```
$count = 5000;
$count = number_format($count);
//$count is no longer equal to 5000, it is now a string 5,000 
```

尝试使用一个临时变量，这样你原来的 $count 变量就不会改变，当你写回数据库时，它仍然是你想要的格式。

例如：

```
$count = 5000;
$tmpCount = 0;
$tmpCount = number_format($count);
// $count is still 5000, and $tmpCount now holds the value 5,000. 
```

您的代码的更新版本，我假设您只希望元数据包含逗号分隔值？

```
 function setPostViews($postID) {
    //Set initial variables
    $count_key = 'post_views_count';
    $tmpCount = 0;
    $count = get_post_meta($postID, $count_key, true);

    if($count == '') {
        $count = 0;
        delete_post_meta($postID, $count_key);
        add_post_meta($postID, $count_key, '0');
    } else {
        $count++;
        //Set tmpCount variable to hold comma separated value
        $tmpCount = number_format($count);

        //Comma separated value is passed into your function
        update_post_meta($postID, $count_key, $tmpCount);
    }
} 
```

那是你所希望的吗？或者，如果您只想在向用户显示时以这种方式格式化此数字，但 db 保持正确（不是逗号分隔），在查询 db 后，保存 db 值并完全按照我创建一个逗号分隔的变量'上面已经完成了。然后在任何 db 函数上，引用 $count 变量，在任何用户输出函数上，使用 $tmpCount 变量。

再次，我希望能回答你的问题，如果不是，请澄清。

# xaml - 在 Metro 应用程序 (Windows 8) 中为 XAML 中的内联元素设置下标/上标

> ID：10424124
> 
> 赞同：0
> 
> 时间：2012-05-03T02:02:48.143
> 
> 标签：xaml, windows-8, subscript

如何以**编程**方式为 Windows 8 的内联元素 (XAML) 添加上标或下标？在 WPF 中，我们在内联元素（Run.Typography）中有 Typography 属性。但它似乎在地铁中消失了。

*在设计时*没有问题：

```
2 <Run Typography.Variants="Subscript">2</Run> 
```

我需要**在代码中**做同样的事情。我试过了：

```
 Run r = new Run();
        r.Text = "bla";
        r.SetValue(Typography.VariantsProperty, FontVariants.Superscript); 
```

和这个：

```
 Typography.SetVariants(r, FontVariants.Superscript); 
```

两者都不起作用。

# linux - 使用 bash 从多个文本文件中提取列

> ID：10424126
> 
> 赞同：2
> 
> 时间：2012-05-03T02:03:06.053
> 
> 标签：linux, bash

我正在尝试从多个文本文件（3000 个文件）中提取列。我的文本文件示例如下所示。

```
res          ABS    sum
SER A   1   161.15 138.3 
CYS A   2    66.65  49.6
PRO A   3    21.48  15.8 
ALA A   4    77.68  72.0 
ILE A   5    15.70   9.0
HIS A   6    10.88   5.9 
```

仅当总和（最后一列）> 25 时，我才想打印 1） resnames（第一列）。2）我想将输出存储到一个文件中 3）我想在输出文件中添加一个新列，其中包含提取数据的 txt 文件的名称，并且还需要打印 resnames 的总数（仅当总和大于 25 时才来自所有文本文件）

我想得到以下输出

```
SER   AA.txt
CYS   AA.txt
ALA   AA.txt
SER   BB.txt

Total numberof  SER- 2
Total number of ALA- 1
Total number of CYS- 1 
```

如何使用 Bash 获得此输出？我尝试了以下代码

```
for i in  files/*.txt
do
awk 'BEGIN{FS=OFS=" "}{if($5 > 25) print $1,i}'
done 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:07:49.677

尝试：

```
awk '{ a[$1]++ } 
     END { for (k in a) print "Total number of " k " - " a[k] }' FILES 
```

（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:48:27.987

```
awk '{
    if ($NF ~ /([0-9])+(\.)?([0-9])+/ && $NF > 25) {
        print $1, FILENAME;
        res[$1]++;
    }
}
END {
     for (i in res) {
          print "Total number of ", i, "-", res[i];
    }
}' res.txt 
```

这是我为您的示例获得的输出：

```
SER res.txt
CYS res.txt
ALA res.txt
Total number of  SER - 1
Total number of  CYS - 1
Total number of  ALA - 1 
```

# actionscript-3 - 在 AS3 中使用空格键从库中播放声音

> ID：10424129
> 
> 赞同：0
> 
> 时间：2012-05-03T02:03:09.420
> 
> 标签：actionscript-3

我一直试图想出一个简单的代码，每次按下空格键时都会从库中播放声音“跳跃”，但没有运气。我尝试的一切都将我的 fla/swf 变成了闪光灯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:12:17.297

```
var spacebarDown:Boolean = false;

stage.addEventListener(KeyboardEvent.KEY_DOWN, _keyHandler);
stage.addEventListener(KeyboardEvent.KEY_UP, _keyHandler);

function _keyHandler(e:KeyboardEvent):void
{
    if(e.keyCode == 32)
    {
        switch(e.type)
        {
            case KeyboardEvent.KEY_DOWN:

                if(!spacebarDown)
                {
                    spacebarDown = true;

                    // Play Sound.
                    var sfx:YourSound = new YourSound();
                    sfx.play();
                }

                break;

            case KeyboardEvent.KEY_UP: spacebarDown = false; break;
        }
    }
} 
```

# php - PHP cron 脚本每分钟触发一次以上

> ID：10424131
> 
> 赞同：3
> 
> 时间：2012-05-03T02:03:26.057
> 
> 标签：php, linux, cron

我有一个似乎每分钟运行一次以上的 cron 作业，考虑到 linux 仅以分钟间隔处理，我不确定这怎么可能。这是我研究它的方法。

首先，我确认 /etc/cron.hourly、/etc/cron.daily 等中没有任何额外的条目……那里没有什么异常。

然后，我进入 /etc/crontab 以确保没有其他条目，什么都没有。

然后，我运行这个命令来查看所有用户的 crontab

`for user in $(cut -f1 -d: /etc/passwd); do echo $user; crontab -u $user -l; done`

...什么都没有，但是，根没有出现，但也许这是意料之中的

最后，我打`crontab -l`

我得到的只是一个预期的条目：

`* * * * * wget --no-check-certificate -q -O - https://...cron_custom_alerts.php`

基于上述，我假设确实只配置了一个 cron 作业。但是，我将日志记录添加到正在运行的脚本中，并且我看到每分钟执行一次以上。我同时输出 $_SERVER['PHP_SELF'] 和 $_SERVER['REMOTE_ADDR]' 以防 cron 在外部执行。但是，日志没有显示任何远程 IP，并且除了我怀疑它正在运行多次之外没有提供任何线索。

```
2012-05-02 21:57:01 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:57:47 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:57:53 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:58:01 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:58:48 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:58:54 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:59:01 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:59:47 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 21:59:53 - /cron_custom_alerts.php EXECUTED BY 
2012-05-02 22:00:01 - /cron_custom_alerts.php EXECUTED BY 
```

看来他们是分三批运行的。当我输入 crontab 并注释掉一个条目时，它把它减少到两个！显然，在某个地方还有两个隐藏的工作调用了这个脚本，但是通过它是不可见的`crontab -e`

如果我可以通过 PHP 进行更多日志记录，我对此持开放态度，但在调查触发此脚本执行的原因时，我真的碰壁了。

解答： 访问日志表明脚本正在被外部访问，而不是由任何内部 cron 作业访问。其他服务器被阻止通过 htaccess deny 执行 cron。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T11:07:11.993

cron 通常是一个编写良好的软件，不会做这些深奥的事情。如果是这样，你将不会是唯一一个经历它的人。至少作为 root，您可以看到系统上的所有 crontab 条目。

禁用 cronjob 并查看它是否仍然被执行。如果是，请使用您的网络服务器的访问日志跟踪这些 HTTP 请求的来源（尤其是每分钟发生一次）。阻止这些请求。

# android - 禁用 HTC 降噪

> ID：10424133
> 
> 赞同：6
> 
> 时间：2012-05-03T02:03:36.767
> 
> 标签：android, microphone, htc-android

我有一个读取麦克风的应用程序。具体来说，我检测到对麦克风吹气；）它不适用于很多 HTC 设备。我拿起了 HTC Droid Eris 和 HTC Droid Incredible。除了那些我有很多朋友的报告之外，他们的 HTC 设备也遇到了这个问题，包括相对较新的 HTC Thunderbolt。

因此，调试应用程序表明，星巴克的环境房间噪音记录在 4000-11000 之间。一旦我对着麦克风吹气，输入音量就会下降到 4000 秒：每次，一直。

任何人都知道这是否可以通过编程方式禁用？

这就是我阅读输入的方式...

```
 int minBufferSize = AudioRecord.getMinBufferSize(8000, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT);
    AudioRecord audioRecord = new AudioRecord(MediaRecorder.AudioSource.MIC, 8000, AudioFormat.CHANNEL_CONFIGURATION_MONO, AudioFormat.ENCODING_PCM_16BIT, minBufferSize);
    short[] buffer = new short[minBufferSize];

    audioRecord.startRecording();
    audioRecord.read(buffer, 0, minBufferSize);

    int i = 0;
    for (short sample : buffer) {
        inputVolume = Math.abs(sample);
        maxVolumeIn = (inputVolume > maxVolumeIn) ? inputVolume : maxVolumeIn;
        if (inputVolume >= micSensitivity) {
            Log.d(TAG, "Blowing Detected. Volume Level: " + inputVolume);
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T23:01:28.170

它可以设置到非常小的程度。

使用音频源`MediaRecorder.AudioSource.VOICE_RECOGNITION`而不是`MediaRecorder.AudioSource.MIC`将关闭该输入的音频过滤器。一般来说，就您在设备之间看到的过滤而言，这是一种狂野的西部。即使使用`VOICE_RECOGNITION`也不是完美的，因为仅在 Ice Cream Sandwich 兼容性定义中采用了过滤器。HTC 在 Ice Cream Sandwich 之前使用过它，但对于您的情况，它可能是正确的选择。

来自[Android 4.0 兼容性定义文档](http://static.googleusercontent.com/external_content/untrusted_dlcp/source.android.com/en/us/compatibility/4.0/android-4.0-cdd.pdf)的第 5.3 节：

> 除了上述录制规范外，当应用程序开始使用`android.media.MediaRecorder.AudioSource.VOICE_RECOGNITION`音频源录制音频流时：
> 
> *   如果存在降噪处理，则必须禁用。
> *   如果存在自动增益控制，则必须禁用。

# php - 运行 MySQL 查询时出错

> ID：10424135
> 
> 赞同：-2
> 
> 时间：2012-05-03T02:03:43.350
> 
> 标签：php, mysql

`Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given`当我尝试使用下面的代码时出现错误。

```
include('config.php');

$con = mysql_connect($dbhost,$dbuser,$dbpasswd);
if (!$con)
  {
      die('Could not connect: ' . mysql_error());
  } else {
      mysql_select_db($dbname, $con);
  }
$date = getdate();
$result = mysql_query("SELECT * FROM '" . $table_prefix . "users' where user_regdate = '" . $date . "'");
$total = 0;
while($row = mysql_fetch_array($result))
  {
  $total++;
  echo $row['username'];
  echo "<br />";
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:05:40.780

您已经用单引号引用了您的表名`'`。如果您引用它，请使用反引号。单引号仅适用于 MySQL 中的字符串文字。这会导致您的查询出现语法错误。

```
$result = mysql_query("SELECT * FROM `" . $table_prefix . "users` where user_regdate = '" . $date . "'"); 
```

接下来，在 PHP 中返回一个数组而不是日期字符串，当作为字符串传递给查询时`getdate()`，它会为您的查询提供单词。`Array`相反，使用 MySQL 的本机日期函数以 MySQL 期望的格式 (yyyy-mm-dd) 获取今天的日期：

**评论后编辑**：

由于您有一个 Unix 时间戳而不是日期列，因此请创建一个日期的 Unix 时间戳：

```
where user_regdate = UNIX_TIMESTAMP(GETDATE()) 
```

对`mysql_query()`调用进行一点错误检查将揭示查询中错误的来源，并且确实有必要防止您的脚本致命失败。

```
$result = mysql_query("SELECT * FROM `" . $table_prefix . "users` where user_regdate = '" . $date . "'");
if (!$result) {
  // query failed
  echo mysql_error();
}
else {
   // all is well, proceed with fetch...
} 
```

最后，我注意到您正在将行数收集到`$total++`. 这是不必要的（除非您正在执行一些我们看不到的更具体的逻辑），因为该值可通过`mysql_num_rows($result)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:08:41.573

您的查询出错了。从[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)：

> mysql_query 成功时返回资源，错误时返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:02:18.050

因为它返回 0 行检查`mysql_num_rows()` include('config.php');

```
$con = mysql_connect($dbhost,$dbuser,$dbpasswd);
if (!$con)
  {
      die('Could not connect: ' . mysql_error());
  } else {
      mysql_select_db($dbname, $con);
  }
$date = getdate();
$result = mysql_query("SELECT * FROM '" . $table_prefix . "users' where user_regdate = '" . $date . "'");
$total = 0;
if(mysql_num_rows($result)){
while($row = mysql_fetch_array($result))
  {
  $total++;
  echo $row['username'];
  echo "<br />";
  }
} 
```

# regex - 通配符点星忽略分隔符

> ID：10424143
> 
> 赞同：0
> 
> 时间：2012-05-03T02:04:34.943
> 
> 标签：regex, pattern-matching, wildcard, splunk

我正在尝试编写一个 splunk 查询，该查询基本上提取分隔符“，”之间的字段并将值放入变量中。

我想提取两个逗号之间的所有内容。

```
,extract this@#$,
,extract this-=@#$, etc 
```

现在，没有一个选项可以不提供任何正则表达式而只获取`, ,`.

我能想到的最接近的是`,.*,` ..但是`.*`会变得贪婪并匹配其他所有内容。

遇到a 后，是否可以使用正则表达式来停止通配符匹配`,`？

我试过了

```
.*$,
.*, 
```

这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T11:13:28.883

在您的 splunk 搜索查询中使用以下正则表达式，它将提取所需的字段为“FIELDNAME”

```
| rex "(?i)\,(?P<FIELDNAME>[^ ][a-z0-9#-@$ ]+)\,\s" 
```

考虑到“，”（字段后）之后有空间，因此我添加了“\s”，没有“\s”它也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:15:05.050

不确定 splunk，但在大多数语言中，您可以尝试

```
/\,([^,]*)\,/ 
```

-- 匹配所有不是逗号的字符。提取将在 \1 中。不确定您是否需要逗号前的转义符。

# queue - 是否可以将 Go 的缓冲通道用作线程安全队列？

> ID：10424144
> 
> 赞同：22
> 
> 时间：2012-05-03T02:04:42.410
> 
> 标签：queue, go, channel

我想找到一个队列结构（一个数据容器），它的元素必须是先进先出的。对我来说，结构必须是线程安全的很重要。我打算将此数据容器用作任务或连接池之类的东西。

我知道缓冲通道是线程安全的，但我想知道它是否可以用作 FIFO，尤其是在并发情况下。

如果可以将缓冲通道用作线程安全队列，我是否需要担心它的效率？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T08:14:15.193

在 Go 中，缓冲通道就是这样：一个*线程安全的 FIFO 队列*，因此您尝试做的事情是完全有效的。使用这种方法，您根本不应该遇到性能问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T04:03:49.860

我很确定通道是先进先出的。它们也很便宜，因此内存效率很高。除此之外，在不知道您将如何使用它们的细节的情况下，我们真的无法提供更多建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-28T23:03:48.590

一般来说，我会说缓冲通道不会成为一个好的并发安全队列。创建它们会为整个缓冲区分配内存。如果您的队列大小在执行过程中从非常小变为非常大，则您必须为最坏的情况分配内存，并且可能会浪费大量内存。

# mocking - 更改 Mock RPM 构建环境中的初始应用程序

> ID：10424146
> 
> 赞同：1
> 
> 时间：2012-05-03T02:05:10.183
> 
> 标签：mocking, java, rpm

在我的 CentOS 6.2 机器的 /var/lib/mock 文件夹下，我可以看到目标构建操作系统中的所有初始应用程序。如果我想将 JDK 添加为额外的应用程序，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:51:43.560

只需将其添加到您的规范文件中的 buildrequires 即可。很少需要触及最小的 buildroot。

如果你真的，**真的**需要修改最小的 buildroot，你将不得不创建额外的（空的）存储库，`createrepo`并为 comps.xml 使用类似这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE comps PUBLIC "-//Red Hat, Inc.//DTD Comps info//EN" "comps.dtd">
<comps>
  <group>
    <id>buildsys-build</id>
    <_name>Buildsystem building group</_name>
    <_description/>
    <default>false</default>
    <uservisible>false</uservisible>
    <packagelist>
      <packagereq type="mandatory">openjdk-1.7.0-java</packagereq>
    </packagelist>
  </group>
</comps> 
```

然后将此存储库添加到您正在使用的模拟配置文件中，并在 yum 配置的主要部分添加以下一行：

```
 ...
   config_opts['yum.conf'] = """
   [main]
   overwrite_groups = 0
   ...
   """ 
```

`overwrite_groups = 0`意味着 yum 会将原始 buildsys-build 组与您的新组合并，因此将 JDK 添加到最小 buildroot（提供`chroot_setup_cmd`）`groupinstall buildsys-build`

# java - 重新排序滚动窗格中的面板

> ID：10424149
> 
> 赞同：4
> 
> 时间：2012-05-03T02:05:42.527
> 
> 标签：java, swing, user-interface, jpanel

目前我有一个容器来列出`JPanel`滚动窗格中的所有 ( ) 面板。我试图完成的功能是尝试重新排列面板。例如：将第二个面板移动到第一个，然后将第三个面板移动到最后一个位置。目前我正在考虑使用容器索引并将它们移动到数据层中。

在 GUI 表单中表示移动的好方法是什么？

我唯一的想法是在面板上放置上下箭头。当你有 100 多个面板时，它看起来不那么漂亮，而且非常混乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:29:40.510

我看到了两种通用方法来重新排序实例[集合](http://docs.oracle.com/javase/7/docs/technotes/guides/collections/reference.html)以`JPanel`响应事件：

*   通过将面板全部移除、更改顺序、验证封闭容器和重新绘制来更改容器中面板的*实际顺序；*这个[例子](https://stackoverflow.com/a/3078354/230513)展示了实例的基本思想`JLabel`。

*   [使用享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)和[表格渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)更改视图中面板的*外观*顺序；这个[例子](https://stackoverflow.com/a/7776211/230513)展示了使用.`CellRendererPane`

# c# - 检查标签页是否存在，如果不存在则创建一个新的

> ID：10424153
> 
> 赞同：0
> 
> 时间：2012-05-03T02:06:09.920
> 
> 标签：c#, tabcontrol

这是我的编码

```
Thread groupid = new Thread(() => 
{
        while(true)
        {
            GroupIds.ForEach(delegate(String name)
            {
                if (tabControl1.TabPages.ContainsKey(name))
                {
                }
                else 
                    tabControl1.TabPages.Add(name);
            });
        }
}); 
```

出于某种原因，如果我启动线程（此循环检查列表中是否出现新值，然后创建一个新页面。这段代码工作到了这一点，它将显示一个使用该值创建的新选项卡，然后在大约1 秒它说“项目没有响应”也就是它崩溃了。所以我不知道如何修复它，我尝试了！tabControl1.TabPages.Contains(name)，以及不同的循环样式。即使没有线程，它使新页面然后立即崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:37:11.543

访问`tabControl`ProgramThread 的块。所以你实际上是在不停地阻塞那个线程。尤其是在如此紧密的循环中，应用程序看起来像是没有响应的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T06:52:31.777

```
 if (!tabControl1.TabPages.Contains(tabPage2))
        {
            tabControl1.TabPages.Insert(1, tabPage2);
        } 
```

这将检查表页是否已经存在，如果不存在，这将允许您创建一个。

# c++ - c ++堆栈溢出未处理的大型数组异常

> ID：10424155
> 
> 赞同：1
> 
> 时间：2012-05-03T02:06:43.897
> 
> 标签：c++, arrays, stack-overflow

是的，在查看了这个问题之后，我相信这是因为我在我的类定义`wchar_t downloadedText[400000];` 中已经阅读了关于如何通过使用`new`运算符分配空间来处理这个问题的解决方案，即： `wchar_t *downloadedText; downloadedText = new wchar_t[400000];`

但是，我需要将类的实例写入文件，并且像上面那样分配变量似乎使用指针指向以不会写入我的文件的方式存储的数据。这也是我不能使用`std::vector`.

我读过我可能有的另一个选择是我可以增加“堆栈”的大小。我使用 VS2010 作为我的 IDE，我位于我的项目属性 > 链接器 > 系统“堆栈提交大小”、“堆栈保留大小”、“堆提交大小”和“堆保留大小”字段中，但我不确定这是否是我如何处理我的问题，如果是，正确设置适当字段的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:02:17.603

如果你必须这样做......你可以在写出对象之后明确地写出数组。例如。

```
write((char*)&myObjects[i]), sizeof(MyClass));
write((char*)downloadedText, sizeof(downloadedText[0]) * 400000); 
```

并将其读回：

```
read((char*)&myObjects[i]), sizeof(MyClass));
downloadedText = new wchar_t[400000];
read((char*)downloadedText, sizeof(downloadedText[0]) * 400000); 
```

但是，这非常脆弱并且容易出错。通过读取覆盖内存中的对象充其量是不好的形式，除非您使用为此目的明确创建的结构，该结构通常仅包含 POD。作为最低要求，请注意您必须在读取写入后设置下载的文本成员字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:40:39.723

您可以在系统堆中使用运算符分配整个对象，`new`但不能在堆栈中分配。在这种情况下，您可以以相同的方式将此对象写入文件，并且不会遇到堆栈溢出的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:34:02.707

是的，您可以使用链接器选项增加 Visual Studio 中的堆栈大小[`/STACK`](http://msdn.microsoft.com/en-us/library/8cxs58a6.aspx)。此链接器选项也可使用项目属性*Stack Reserve Size*和*Stack Commit Size*进行编辑。设置保留大小就足够了，提交大小是可选的。不过，您也应该能够使用`std::vector`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:16:28.720

听起来您对当前的序列化策略很好（制作对象 POD，并将其写入 POD 值）。在这种情况下，您的问题实际上是“如何防止这些对象占用堆栈上的太多空间？” 答案：不要把它们放在堆栈上。

用新的分配它们。或者，最好将它们包装在某种智能指针中。

* * *

你有类似字符串的数据。碰巧 C++ 提供了一个字符串类。事实上，既然你在谈论`wchar_t`字符，你想看看`std::wstring`（在`<string>`标题中）。

# javascript - 允许 Raphael/SVG 元素事件通过分层的 HTML 触发

> ID：10424157
> 
> 赞同：2
> 
> 时间：2012-05-03T02:06:53.193
> 
> 标签：javascript, jquery, svg, raphael

我有一个 html 元素（以允许动态文本换行和调整大小）分层在 Raphael 生成的 SVG 元素的顶部。

问题是我将事件（mousedown、mouseup 等）分配给了 html 下的 SVG 元素。SVG 元素本身实际上可以通过 raphael.freeTransform 插件进行拖动和缩放。

当然，顶部的 html 元素不再接收事件。

我正在寻找解决这个问题的方法，但真的不知道从哪里开始。该解决方案必须是跨浏览器兼容的，因此某些现代浏览器中允许元素忽略点击的新功能集不是可接受的解决方案。

注意：我已经尝试了通过在 SVG 本身中呈现文本来实现相同功能的所有方式，但实际上没有办法以动态方式准确地模拟我想要做的事情（即文本在用户键入时调整大小和换行）

我目前能想到的唯一解决方案是以某种方式使用foreignObjects，但是除非有人知道插件，否则Raphael 不支持它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:50:33.373

您正在寻找具有 css [pointer-events](https://developer.mozilla.org/en/CSS/pointer-events)效果的东西。这是一个 mozilla hack，后来被添加到 webkit 中，并且不受 IE 支持。它允许您防止图层拦截鼠标事件。有办法让它跨平台工作（我相信 Modenizr 支持它，但不要引用我的话）。或者考虑一下：

[IE 的 css 'pointer-events' 属性替代](https://stackoverflow.com/questions/5855135/css-pointer-events-property-alternative-for-ie)

# javascript - 为什么我的 Backbone 应用程序中多次触发点击事件？

> ID：10424160
> 
> 赞同：0
> 
> 时间：2012-05-03T02:06:59.980
> 
> 标签：javascript, backbone.js, mouseevent, backbone-events

我正在制作一个 Backbone.js 应用程序，它包括一个索引视图和几个基于 id 的子视图。所有的视图都绑定了 mousedown 和 mouseup 事件。但是每次从一个子视图转到索引视图，然后再转到任何一个子视图时，当前子视图中的mousedown和mouseup事件都会再触发一次，也就是说当我点击子视图时，会有几个连续的触发 mousedown 事件之后会触发几个连续的 mouseup 事件。

看了我的代码，终于发现是路由器导致了这个问题。我的部分代码如下：

```
 routes: {
        "": "index",
        "category/:id": "hashcategory"  
    },

    initialize: function(options){
        this._categories = new CategoriesCollection();
        this._index = new CategoriesView({collection: this._categories});

    },

    index: function(){
        this._categories.fetch();
    },

    hashcategory: function(id){
        this._todos = new TodosCollection();
        this._subtodolist = new TodosView({ collection: this._todos, 
                                            id: id                                              
                                         });
        this._todos.fetch();
   } 
```

可以看到，我`initialize`是在路由器的方法中创建索引集合和视图，但是我在路由器对应的路由函数中创建子视图集合和视图。我尝试将索引集合和视图放在`index`函数中，索引视图中的单击事件的行为方式与子视图相同。所以我认为这就是为什么 mousedown 和 mouseup 会被触发多次。

但问题是，我必须使用`id`作为发送到子视图的参数之一。所以我不能在`initialize`方法中创建子视图。更重要的是，我已经看到别人的项目基于Backbone，其中一些还在相应的路由功能中创建子集合和视图，但他们的应用程序运行完美。所以我不知道我的问题的根源是什么。有人可以给我一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:28:18.910

听起来您遇到了委托问题，因为：

> 所有子视图都使用相同的`<div>`元素

主干视图使用 jQuery[`delegate`](http://api.jquery.com/delegate/)在其`el`. 如果您有一个使用 a`<div>`作为其的视图，`el`然后`<div>`通过替换包含的 HTML 将其用于另一个视图，那么您最终将`<div>`通过两个不同的`delegate`调用将两个视图附加到该视图上。如果再次交换视图，您将有三个视图通过三个`delegate`s 接收事件。

例如，假设我们有这个 HTML：

```
<div id="view-goes-here"></div> 
```

这些观点：

```
var V0 = Backbone.View.extend({
    events: { 'click button': 'do_things' },
    render: function() { this.$el.html('<button>V0 Button</button>'); return this },
    do_things: function() { console.log('V0 clicked') }
});        
var V1 = Backbone.View.extend({
    events: { 'click button': 'do_things' },
    render: function() { this.$el.html('<button>V1 Button</button>'); return this },
    do_things: function() { console.log(V1 clicked') }
}); 
```

我们用这样的方式在它们之间切换（`which`当然从 0 开始）：

```
which = (which + 1) % 2;
var v = which == 0
      ? new V0({el: $('#view-goes-here') })
      : new V1({el: $('#view-goes-here') });
v.render(); 
```

然后你会遇到我上面描述的多代表问题，这种行为似乎与你描述的症状相匹配。

这是一个易于查看的演示：http: [//jsfiddle.net/ambiguous/AtvWJ/](http://jsfiddle.net/ambiguous/AtvWJ/)

解决此问题的一种快速简便的方法是[`undelegateEvents`](http://documentcloud.github.com/backbone/#View-undelegateEvents)在渲染新视图之前调用当前视图：

```
which = (which + 1) % 2;
if(current)
    current.undelegateEvents(); // This detaches the `delegate` on #view-goes-here
current = which == 0
      ? new V0({el: $('#view-goes-here') })
      : new V1({el: $('#view-goes-here') });
current.render(); 
```

演示：http: [//jsfiddle.net/ambiguous/HazzN/](http://jsfiddle.net/ambiguous/HazzN/)

更好的方法是让每个视图都有自己的独特性`el`，这样当您替换 HTML 时，所有内容（包括`delegate`绑定）都会消失。您最终可能会得到很多`<div><div>real stuff</div></div>`结构，但这不值得担心。

# c++ - 为什么从 const 成员函数返回的 *this 不能用于调用 C++ 中的其他函数？

> ID：10424162
> 
> 赞同：1
> 
> 时间：2012-05-03T02:07:27.003
> 
> 标签：c++, constants, this

我得到以下代码：

```
class Book
{
public:
    void print();
    const Book &Book::get();
};
void Book::print()
{
    cout << "print()" << endl;
}
const Book &Book::get()
{
    cout << "get()" << endl;
    return *this;
} 
```

然后我做了：

```
Book b;
b.get().print(); // This did not work. Why is that? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T02:10:00.810

它可以调用其他函数，但在这种情况下不能。

你正在返回一个`const Book &`from `get()`。然后调用`print()`，这是一个非常量函数。要解决此问题，请使用`print()`const：

```
void print() const;

void Book::print() const
{
    cout << "print()" << endl;
} 
```

这个 const 确保您的对象的状态不会改变，这符合您从 . 返回的 const 对象`get()`。请注意，它可以更改`mutable`成员，因为这是他们的全部目的。

编辑：顺便说一句，您要查找的术语是`method chaining`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:10:28.937

Book::print() 不是 const 成员函数，因此不能使用 Book::get() 返回的 const Book 引用来调用。

# php - imagettftext() 的 Unicode 兼容替代方案

> ID：10424166
> 
> 赞同：0
> 
> 时间：2012-05-03T02:07:53.260
> 
> 标签：php, unicode, imagettftext

还有哪些其他服务器端工具可用于从 TTF/OTF 字体文件创建文本图像？我无法让 imagettftext() 呈现中文/日文字形（即使使用 HTML 实体定义输入字符串，例如`$#44032;`此处建议的：[PHP 函数 imagettftext() 和 unicode](https://stackoverflow.com/questions/198007/php-function-imagettftext-and-unicode)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T21:40:12.457

我最终从 PHP 中调用了 ImageMagick：

```
$command = 'printf "'.$text.'" | convert -size x'.(5*$size).' -gravity center -background "#00000000" -fill "#000000FF" -font '.$fontpath.' -pointsize '.$size.' label:@- -trim '.$imagepath;
exec($command); 
```

# objective-c - 在 Objective-C 中传递块

> ID：10424167
> 
> 赞同：13
> 
> 时间：2012-05-03T02:08:01.060
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

在编写接受块作为参数的方法时，我是否需要做一些特殊的事情，例如在执行之前将块复制到堆中？例如，如果我有以下方法：

```
- (void)testWithBlock:(void (^)(NSString *))block {
    NSString *testString = @"Test";
    block(testString);
} 
```

`block`我应该在调用它之前，还是在输入方法时做任何事情？或者上面是使用传入块的正确方法吗？另外，以下调用方法的方式是否正确，或者我应该在传递之前对块做些什么？

```
[object testWithBlock:^(NSString *test){
    NSLog(@"[%@]", test);
}]; 
```

*我*需要在哪里复制块？如果我不使用 ARC，这会有什么不同？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-06T20:09:51.193

当您收到一个块作为方法参数时，该块可能是在堆栈上创建的原始块，也可能是副本（堆上的一个块）。据我所知，没有办法说。所以一般的经验法则是，如果你要在接收它的方法中执行块，你不需要复制它。如果您打算将该块传递给另一个方法（可能会或可能不会立即执行它），那么您也不需要复制它（如果它打算保留它，接收方法应该复制它）。但是，如果您打算以任何方式将块存储到某个地方以供以后执行，则需要复制它。许多人使用的主要示例是某种作为实例变量保存的完成块：

```
typedef void (^IDBlock) (id);
@implementation MyClass{
    IDBlock _completionBlock;
} 
```

但是，如果要将它添加到任何类型的集合类中，例如 NSArray 或 NSDictionary，则还需要复制它。否则，当您稍后尝试执行该块时，您将收到错误（很可能是 EXC_BAD_ACCESS）或数据损坏。

执行块时，首先测试块是否为`nil`. Objective-c 将允许您传递`nil`给块方法参数。如果那个块是 nil，当你尝试执行它时你会得到 EXC_BAD_ACCESS。幸运的是，这很容易做到。在您的示例中，您将编写：

```
- (void)testWithBlock:(void (^)(NSString *))block {
    NSString *testString = @"Test";
    if (block) block(testString);
} 
```

复制块有性能考虑。与在堆栈上创建块相比，将块复制到堆中并非易事。一般来说，这不是什么大问题，但如果你迭代地使用一个块或迭代地使用一堆块并在每次执行时复制它们，它会造成性能损失。因此，如果您的方法`- (void)testWithBlock:(void (^)(NSString *))block;`处于某种循环中，如果您不需要复制该块，则复制该块可能会损害您的性能。

您需要复制块的另一个地方是如果您打算调用该块本身（块递归）。这并不常见，但如果您打算这样做，则必须复制该块。请在此处查看我关于 SO 的问题/答案：[Recursive Blocks In Objective-C](https://stackoverflow.com/a/8896766/1147934)。

最后，如果你要存储一个块，你需要非常小心地创建保留周期。块将保留传递给它的任何对象，如果该对象是实例变量，它将保留实例变量的类（self）。我个人喜欢积木并一直使用它们。但是，Apple 不为他们的 UIKit 类使用/存储块，而是坚持使用目标/动作或委托模式是有原因的。如果您（创建块的类）保留正在接收/复制/存储块的类，并且在该块中您引用自己或任何类实例变量，则您创建了一个保留循环（classA -> classB - > 块 -> A 类）。这非常容易做到，而且我已经做过太多次了。此外，“泄密” 在 Instruments 中没有抓住它。解决这个问题的方法很简单：只需创建一个临时的`__weak`变量（对于 ARC）或`__block`变量（非 ARC），并且块不会保留该变量。因此，例如，如果“对象”复制/存储块，则以下将是一个保留周期：

```
[object testWithBlock:^(NSString *test){
    _iVar = test;
    NSLog(@"[%@]", test);
}]; 
```

但是，要解决这个问题（使用 ARC）：

```
__weak IVarClass *iVar = _iVar;
[object testWithBlock:^(NSString *test){
    iVar = test;
    NSLog(@"[%@]", test);
}]; 
```

你也可以这样做：

```
__weak ClassOfSelf _self = self;
[object testWithBlock:^(NSString *test){
    _self->_iVar = test;
    NSLog(@"[%@]", test);
}]; 
```

~~请注意，许多人不喜欢上面的方法，因为他们认为它很脆弱，但它是访问变量的有效方式。~~ *更新*- 如果您尝试使用“->”直接访问变量，当前编译器现在会发出警告。出于这个原因（以及安全原因），最好为要访问的变量创建一个属性。因此，`_self->_iVar = test;`您可以使用：`_self.iVar = test;`。

*更新（更多信息）*

通常，最好将接收块的方法视为负责确定是否需要复制块，而不是调用者。这是因为接收方法可能是唯一知道块需要保持多长时间或是否需要复制的方法。您（作为程序员）在编写调用时显然会知道这些信息，但如果您在不同的对象中考虑调用者和接收者，调用者将块交给接收者并完成它。因此，它不需要知道在块消失后对块做了什么。另一方面，它' 很可能调用者可能已经复制了块（也许它存储了块并且现在将它交给另一个方法）但是接收者（也打算存储块）仍然应该复制块（即使块正如已经复制的那样）。接收者无法知道该块已经被复制，它接收到的一些块可能被复制，而其他块可能没有。因此接收者应该总是复制一个它打算保留的块？说得通？这本质上是良好的面向对象设计实践。基本上，谁拥有信息，谁就负责处理它。因此接收者应该总是复制一个它打算保留的块？说得通？这本质上是良好的面向对象设计实践。基本上，谁拥有信息，谁就负责处理它。因此接收者应该总是复制一个它打算保留的块？说得通？这本质上是良好的面向对象设计实践。基本上，谁拥有信息，谁就负责处理它。

块在 Apple 的 GCD（Grand Central Dispatch）中被广泛使用，以轻松启用多线程。一般来说，当你在 GCD 上分发一个块时，你不需要复制它。奇怪的是，这有点违反直觉（如果你考虑一下的话），因为如果你异步调度一个块，通常创建块的方法会在块执行之前返回，这通常意味着块会过期，因为它是堆栈对象。我不认为 GCD 将块复制到堆栈中（我在某处读过，但无法再次找到它），相反，我认为线程的寿命可以通过放在另一个线程上来延长。

Mike Ash 有大量关于块、GCD 和 ARC 的文章，您可能会发现它们很有用：

*   [Mike Ash：实用积木](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)
*   [Mike Ash：Objective-C Blocks 与 C++0x Lambdas：战斗！](http://www.mikeash.com/pyblog/friday-qa-2011-06-03-objective-c-blocks-vs-c0x-lambdas-fight.html)
*   [Mike Ash：问答 - 有关 Blocks 的更多信息](http://www.mikeash.com/pyblog/friday-qa-2008-12-26.html)
*   [Mike Ash：自动引用计数](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)他在这篇文章中谈到了块和 ARC。
*   [Mike Ash：GCD 不是块，块不是 GCD](http://www.mikeash.com/pyblog/gcd-is-not-blocks-blocks-are-not-gcd.html)
*   [Apple Docs - 介绍 Block 和 GCD](http://developer.apple.com/library/mac/#featuredarticles/BlocksGCD/_index.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T02:20:38.900

这一切看起来都不错。不过，您可能需要仔细检查 block 参数：

```
@property id myObject;
@property (copy) void (^myBlock)(NSString *); 
```

……

```
- (void)testWithBlock: (void (^)(NSString *))block
{
    NSString *testString = @"Test";
    if (block)
    {
        block(test);
        myObject = Block_copy(block);
        myBlock = block;
    }
} 
```

...

```
[object testWithBlock: ^(NSString *test)
{
    NSLog(@"[%@]", test);
}]; 
```

应该没事。而且我相信他们甚至试图逐步淘汰`Block_copy()`，但他们还没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-05T04:34:25.330

正如块编程主题指南在“[复制块](http://developer.apple.com/library/ios/documentation/cocoa/Conceptual/Blocks/Articles/bxUsing.html#//apple_ref/doc/uid/TP40007502-CH5-SW2)”下所说：

> 通常，您不需要复制（或保留）块。仅当您希望在声明它的范围内销毁块后使用该块时，您才需要制作一份副本。

在您所描述的情况下，您基本上可以将块简单地视为您的方法的参数，就像它是一个`int`或其他原始类型一样。当方法被调用时，堆栈上的空间将被分配给方法参数，因此在方法的整个执行过程中块将在堆栈上（就像所有其他参数一样）。当堆栈帧在方法返回时从堆栈顶部弹出时，分配给块的堆栈内存将被释放。因此，在您的方法执行期间，该块保证是活动的，因此这里没有要处理的内存管理（在 ARC 和非 ARC 情况下）。换句话说，你的代码很好。您可以简单地调用方法内的块。

正如引用的文本所暗示的那样，唯一需要显式复制块的时候是当您希望它可以从创建它的范围之外访问时（在您的情况下，超出您的方法的堆栈帧的生命周期）。例如，假设您需要一个从 Web 获取一些数据并在获取完成时运行代码块的方法。您的方法签名可能如下所示：

`- (void)getDataFromURL:(NSURL *)url completionHandler:(void(^)(void))completionHandler;`

由于数据获取是异步发生的，因此您需要保留块（可能在类的属性中），然后在完全获取数据后运行块。在这种情况下，您的实现可能如下所示：

```
@interface MyClass

@property (nonatomic, copy) void(^dataCompletion)(NSData *);

@end

@implementation MyClass
@synthesize dataCompletion = _dataCompletion;

- (void)getDataFromURL:(NSURL *)url completionHandler:(void(^)(NSData *fetchedData))completionHandler {
    self.dataCompletion = completionHandler;
    [self fetchDataFromURL:url]; 
}

- (void)fetchDataFromURL:(NSURL *)url {
    // Data fetch starts here 
}

- (void)finishedFetchingData:(NSData *)fetchedData {
    // Called when the data is done being fetched
    self.dataCompletion(fetchedData)
    self.dataCompletion = nil; 
} 
```

在此示例中，使用具有`copy`语义的属性将对`Block_copy()`块执行 a 并将其复制到堆中。这发生在行中`self.dataCompletion = completionHandler`。因此，块从`-getDataFromURL:completionHandler:`方法的堆栈帧移动到堆，这允许它稍后在`finishedFetchingData:`方法中被调用。在后一种方法中，该`self.dataCompletion = nil`行使属性无效并将 a 发送`Block_release()`到存储的块，从而释放它。

以这种方式使用属性很好，因为它基本上会为您处理所有的块内存管理（只需确保它是一个`copy`（或`strong`）属性，而不仅仅是一个`retain`），并且在非 ARC 和 ARC 情况下都可以工作。相反，如果您想使用原始实例变量来存储您的块并在非 ARC 环境中工作，那么`Block_copy()`如果您想将块保持在比作为参数传递的方法的生命周期。上面使用 ivar 而不是属性编写的相同代码如下所示：`Block_retain()``Block_release()`

```
@interface MyClass {
    void(^dataCompletion)(NSData *);
}

@end

@implementation MyClass

- (void)getDataFromURL:(NSURL *)url completionHandler:(void(^)(NSData *fetchedData))completionHandler {
    dataCompletion = Block_copy(completionHandler);
    [self fetchDataFromURL:url]; 
}

- (void)fetchDataFromURL:(NSURL *)url {
    // Data fetch starts here 
}

- (void)finishedFetchingData:(NSData *)fetchedData {
    // Called when the data is done being fetched
    dataCompletion(fetchedData)
    Block_release(dataCompletion);
    dataCompletion = nil;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:03:28.810

你知道有两种块：

1.  存储在堆栈中的块，您明确写为 ^{...} 的块，并且在创建它们的函数返回后立即消失，就像常规堆栈变量一样。当您在它所属的函数返回后调用堆栈块时，就会发生不好的事情。

2.  堆中的块，当您复制另一个块时获得的块，只要其他对象保留对它们的引用，这些块就会存活，就像常规对象一样。

你复制一个块的唯一原因是当你得到一个块时，或者可能是一个堆栈块（显式本地块^{...}，或你不知道来源的方法参数），并且您想延长其有限的堆栈块之一的寿命，并且编译器还没有为您完成这项工作。

想一想：在实例变量中保留一个块。

在集合中添加一个块，例如 NSArray。

这些是在不确定块是否已经是堆块时应该复制块的常见示例。

请注意，当在另一个块中调用一个块时，编译器会为您执行此操作。

# java-me - 优化 LWUIT 应用程序的方法有哪些？

> ID：10424174
> 
> 赞同：1
> 
> 时间：2012-05-03T02:08:43.910
> 
> 标签：java-me, lwuit, lwuit-form, lwuit-resource-editor

我在这里遇到了一些 OC 情况。我正在使用 LWUIT 1.5 开发应用程序。所以我几乎完成了应用程序，事实上我已经添加了转换。但我注意到该应用程序在手机上滞后（我目前的测试手机是[诺基亚 C3-00](http://www.gsmarena.com/nokia_c3-3269.php)）。过渡正在中途开始。

你们对我如何优化我的应用程序有什么建议吗？我知道我可以使用 的`Next Form`属性`Form`，但我不希望每次用户转到另一个屏幕时都显示“启动屏幕”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:55:12.810

诺基亚的半透明图像通常非常慢，任何包含半透明图像的图像都会非常慢，包括图像边框。另一个罪魁祸首是剪裁过窄的图像边框，不过在[Codename One](http://www.codenameone.com/)中有一个解决方法。

删除主题并创建一个只使用颜色的空白或主题。看看速度有没有提高。

假设它确实会慢慢从您的主题中删除可疑元素。如果没有，则查看您是否加载大图像等。

# c++ - python和weierstrass函数

> ID：10424176
> 
> 赞同：0
> 
> 时间：2012-05-03T02:09:24.537
> 
> 标签：c++, python-2.7

基于此[功能](http://www.math.washington.edu/~conroy/general/weierstrass/weier.htm)。我正在尝试创建两个空数组（一个用于 x，另一个用于 y），稍后我将使用它在 python 中进行绘图。但在此之前，这是我到目前为止所拥有的......

```
 import math

    x1=-2.0 
    x2=2.0

    arr1 = []
    arr2 = []

    i=0
    n=10
    delta=(x2-x1)/n
    for i in range (0,n+1):
        x=x1+delta*i        
        arr1.append(x)         
    print arr1
     # I have not called the w function yet 
```

为了简单起见，上面的代码现在创建了一个包含 10 个数字的列表。然后它将数组的元素发送到下面的函数并计算具有特定数字的方程（无限循环）。

```
 #This function will create the array list for y
    import math

    def w(x, limit):# the limit here to compare when the number is really small            
        suma = 0.0
        sumb = 0.0
        m=1
        x=0
        suma=suma+((1/(math.pow(2,m))*(math.sin(math.pow(2,m)*x)))
        sumb=suma+((1/(math.pow(2,m+1))*(math.sin(math.pow(2,m+1)*x))) # I'm having a 
                                                                       #syntax error  
                                                                        #here
       x+=0
       if (abs (suma-sumb)<limit):
            break:
       else m+=1:
       if (m<20):
            break: 
```

对于我的语法错误或任何建议，我将不胜感激。我只希望我足够清楚。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:08:50.657

语法错误其实在上一行，括号不平衡。`)`您需要在该行的末尾添加一个额外的内容（顺便说一句，在您指出的错误处）。

还有一些其他问题

*   `suma`设置为零，因此`suma = suma + ...`与 相同`suma = ...`，但我猜您仍然需要`while`在此行之前添加循环。
*   在指示的行上，您有`sumb = suma +`，这可能是复制/粘贴错误。
*   从 开始的代码块`x+=0`缩进了 3 个空格而不是 4 个。在您的实际代码中可能不是这种情况，但如果是这样，Python 也会抱怨这一点。
*   `else m+=1:`应该是`else: m+=1`（直接在 之后的冒号`else`，而不是在行尾。
*   `break:`应该只是`break`（没有冒号）。

# mysql - 对列进行计数，然后在 SQL 中对两列进行分组

> ID：10424177
> 
> 赞同：1
> 
> 时间：2012-05-03T02:09:31.133
> 
> 标签：mysql, count, group-by

我的 SQL 语法可能有点生疏，所以我自己几乎不可能解决这个问题。我有一个典型的 MySQL 安装，带有下表“历史记录”。

```
userid        ip
----------- ----------
1            123.123.123.123  
1            123.123.123.123    
1            111.111.111.111    
2            213.213.213.213
2            214.214.214.214
2            215.215.215.215
3            163.123.121.123
4            111.222.121.212 
```

本质上，我在某个用户 ID 下记录某些内容以及他们当前使用的 IP 地址（以及其他内容，但这不是必需的）。但是，我要完成的最后一项任务是为每个用户创建一个列表，其中包含已使用多少 IP。在这种情况下，最终结果将是。

```
userid       ipcount
-----------  ----------  
1            2  
2            3
3            1
4            1 
```

我知道这会以某种方式实现，但我是 SQL 的新手（我能够得到计数，但不能按用户 ID 对其进行分组）。我可以在 PHP 中快速执行此操作，但这对服务器来说是额外的过载（我目前有大约 5K 条目）。SQL 正是为了做到这一点......

多谢你们。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:12:53.043

```
SELECT userid, COUNT(DISTINCT ip) AS ipcount
  FROM yourtable
 GROUP BY userid 
```

# objective-c - 定义函数时参数的名称是否重要？

> ID：10424179
> 
> 赞同：2
> 
> 时间：2012-05-03T02:09:50.913
> 
> 标签：objective-c

如果我在 .h 文件中定义一个具有一个参数名称的函数是否重要，例如...

```
-(foo *) initWithId:(NSString *)id; 
```

然后在我的实现中给参数一个不同的名字，因为它隐藏了一个类属性：

```
-(foo *) initWithID:(NSString *)idString; 
```

我知道自动完成文件使用 .h 作为其自动完成填充的“基础”，虽然它不适用于这种情况，但我更喜欢在我的函数中使用属性名称以尽可能保持我的编码风格一致. 理解 getFoo 和 setFoo 都适用于与 -(bar *) initWithFoo:(id) foo; 中相同的属性 'foo' 更有意义。

据我所知，编译器没有任何问题，但不知何故，它似​​乎应该很重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T04:39:21.753

Xcode 中的 LLVM 分析器似乎确实关心一些事情，比如以`new`和开头的方法`copy`。

当我命名一个以 开头的属性时，这是一个示例警告`new`：

> “属性的合成 getter 遵循 Cocoa 命名约定以返回‘拥有’对象”

（@property 有一个 @synthesize，它创建了一个以 new 开头的 getter 方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:44:52.067

不，编译器不在乎。其他阅读您的代码的人可能会关心。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-13T16:24:26.743

唯一真正重要的是您是否有一个同名的实例变量名称。

```
@synthesize something;

- (void)methodForSomething:(id)something
{

something = something;

} 
```

这将引发错误。显然解决方案是修改您的实例变量命名。

```
@synthesize something = _something; 
```

除此之外，参数名称无关紧要。

# php - 如何使联系表向用户发送确认电子邮件？

> ID：10424183
> 
> 赞同：0
> 
> 时间：2012-05-03T02:10:01.653
> 
> 标签：php

这是我到目前为止..

```
 $full_name = $_REQUEST['full_name'] ;         
 $company = $_REQUEST['company'] ;       
 $abn = $_REQUEST['abn'] ;     
 $customer_number = $_REQUEST['customer_number'] ;     
 $about = $_REQUEST['about'] ;     
 $areacode = $_REQUEST['areacode'] ;     
 $telephone = $_REQUEST['telephone'] ;         
 $email = $_REQUEST['email'] ;     
 $message = $_REQUEST['message'] ;     
 $body =" Full Name: ".$full_name."\n

Company: ".$company."\n                 
ABN: ".$abn."\n    
Customer Number: ".$customer_number."\n
About: ".$about."\n       
Area Code: ".$areacode."\n      
Telephone: ".$telephone."\n     
Email: ".$email."\n                     
Message: ".$message;

$to = "$email";

 mail( "info@rentforbusiness.com.au", "Contact Us Form", $body, "From: $email" ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:19:35.247

就像你为自己做的一样。

```
mail($email, "Thanks For Resistering", $a_thank_you_message, "From: info@rentforbusiness.com.au" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:25:50.343

在数据库中创建一个表。它应该包含以下字段：

*   id（自动递增）
*   电子邮件
*   信息
*   确认

当用户发布表单时，不要将邮件发送到您的电子邮件，而是您需要创建随机确认码（例如使用[uniqid ）：](http://php.net/manual/en/function.uniqid.php)

```
$confirmation = uniqid(); 
```

然后将用户电子邮件、消息文本和确认码添加到表中并向用户发送电子邮件：

```
$url = "http://".$_POST["SERVER_NAME"].
  "/confirmation.php?confirmation=$confirmation'>";
mail($email, "Confirmation", 
 "Please press the following link to confirm your message: 
 <a href='http://$url'>confirm</a>."); 
```

在`confirmation.php`文件使用`$_GET["confirmation"]`变量中，在表中搜索匹配的记录，从中获取电子邮件和消息，并将此数据发送到您的电子邮件。如果需要，您可以在它之后从数据库中删除条目。

# android - 无法在列表视图中设置可见性

> ID：10424187
> 
> 赞同：0
> 
> 时间：2012-05-03T02:10:24.083
> 
> 标签：android, layout, nullpointerexception

这是控制布局的可见性

```
if (!(imagepath[i].toString().equals("no picture"))) {
            try {
                aURL = new URL("http://www.orientaldaily.com.my/"
                        + imagepath[i]);
                URLConnection conn = aURL.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bm = BitmapFactory.decodeStream(bis);
                bis.close();
                is.close();

                layout_image.setVisibility(View.VISIBLE);
                imageview.setVisibility(View.VISIBLE);
                imageview.setScaleType(ScaleType.CENTER_CROP);
                imageview.setImageBitmap(bm);

            } catch (IOException e) {
                Log.e("DEBUGTAG", "Remote Image Exception", e);
            }
        }

                    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.main_alllatestnewslist, from, to);
    lv.setAdapter(adapter); 
```

这里是初始化它

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_alllatestnews);
        lv = (ListView) findViewById(android.R.id.list);
        RelativeLayout temp = (RelativeLayout)findViewById(R.id.layout_temp);
    LayoutInflater liInflater = (LayoutInflater)this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    temp.addView(liInflater.inflate(R.layout.main_alllatestnewslist, null)); 
```

这是 main_alllatestnews.xml

```
<LinearLayout
    android:id="@+id/layout_content"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/layout_menu"
    android:layout_below="@id/layout_title"
    android:orientation="vertical" >
<ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

这是 main_alllatestnewslist.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_temp"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
 android:background="@drawable/background_news_list" >

<LinearLayout
    android:id="@+id/layout_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10px"
    android:layout_marginTop="10px" >

    <ImageView
        android:id="@+id/image_alllatestnewstitle"
        android:layout_width="134px"
        android:layout_height="80px"
        android:src="@drawable/image_loading_failed_1"
        android:visibility="invisible" />
</LinearLayout> 
```

当我运行它时，它给了我 Nullpointerexception

```
temp.addView(liInflater.inflate(R.layout.main_alllatestnewslist, null)); <-- inflater still null... 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:23:08.120

改变

```
setContentView(R.layout.main_alllatestnews); 
```

到

```
setContentView(R.layout.main_alllatestnewslist); 
```

因为`layout_image`在布局 main_alllatestnewslist

编辑：

```
 LayoutInflater liInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        yourView.addView(liInflater.inflate(R.layout.main_alllatestnewslist, null)) 
```

类似的东西。

;

# sql - 如何使用 group by 子句从 MS Access 表中获取计数？

> ID：10424192
> 
> 赞同：0
> 
> 时间：2012-05-03T02:11:01.247
> 
> 标签：sql, ms-access

我对这个 SQL 查询彻底崩溃了，我希望有人能对我应该做的事情有所启发。

我有以下表格，它们由“anumber”链接；

```
athletes
--------
anumber     (id)
acountry    ('Australia','Japan')
aname

result_placing
--------------
result_id       id
anumber         (id linked to athletes)
result_placing  (Gold, Silver or null) 
```

我想获得与多少金、银结果相关的国家列表。所以输出如下：

```
country     | resul_placing | result_count
----------- | ------------- | ------------
Australia   | Gold          |       2
Australia   | Silver        |       1 
```

我试过这样的事情：

```
SELECT      acountry 
FROM        athletes 
INNER JOIN  result_placing 
ON          athletes.anumber = result_placing.anumber 
```

这表明

```
 Australia | Gold   |
 Australia | Silver | 
```

只是不确定如何获得每个的计数。我试过 count(distinct) 但 Access 不喜欢它。

一旦我在其中使用 Count ，就像：

```
SELECT      a.acountry
        ,   r.placing
        ,   count(a.acountry) 
FROM        athlete         a 
INNER JOIN  result_place    r 
ON          a.anumber       = r.anumber 
```

我收到：

*`You tried to execute a query that does not include the specified expression 'acountry' as part of an aggregate function`*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:20:11.540

尝试

```
SELECT      a.acountry
        ,   r.result_placing
        ,   sum(*) as cnt 
FROM        athletes        a 
RIGHT JOIN  result_placing  r 
ON          a.anumber       = r.anumber 
GROUP BY    a.acountry
        ,   r.result_placing 
ORDER BY    a.acountry 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:17:16.670

没有试过这个，但这里有。您需要使用分组依据。请尝试以下查询

```
SELECT a.acountry, r.result_placing, count(a.acountry) FROM athletes a INNER JOIN     result_placing r ON a.anumber = r.anumber group by a.acountry, r.result_placing 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T02:37:20.407

这是使用*LEFT OUTER JOIN*和*GROUP BY*查询数据的一种方法。

*`Script`*：

```
SELECT              a.acountry
                ,   IIf(r.result_placing = '' 
                        OR IsNull(r.result_placing), 
                        'n/a', 
                        r.result_placing
                    ) AS medal
                ,   COUNT(r.result_id) AS medalcount
FROM                athletes a
LEFT OUTER JOIN     result_placing r
ON                  a.anumber = r.anumber
GROUP BY            a.acountry
                ,   r.result_placing 
```

*`Table Data`*：

*运动员*表数据

![运动员](../Images/b135b9fb8026a7d5d291389e812d2b6b.png)

*results_placing*表数据

![results_placements](../Images/2a4c1a59a75a89d0f59b2d55639ef151.png)

*`Output`*：

查询输出

![询问](../Images/be03c4832a39e28910b4b9b4eeb295c3.png)

# objective-c - #define 怎么不需要指定变量类型呢？

> ID：10424195
> 
> 赞同：0
> 
> 时间：2012-05-03T02:11:15.987
> 
> 标签：objective-c

为什么这段代码有效？

```
// in a constants file:

#define ADFadeOutSpeed 1.1

// then, later, in another file:

-(void)fadeOut:(UIView *)sender{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:ADFadeOutSpeed];
    sender.alpha = 0.0;
    [UIView commitAnimations];
} 
```

我原以为编译器会抱怨 ADFadeOutSpeed 不是强类型的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T02:13:41.567

因为#define 不会创建变量或对象，所以它是一个编译器命令，上面写着“用 bar 替换 foo 的所有实例”——所以发生的事情，退出精英，是 ADFadeOutSpeed每次在代码中显示时都被*读取*为 1.1 . 编译器看不到：

```
[UIView setAnimationDuration:ADFadeOutSpeed]; 
```

它看到

```
[UIView setAnimationDuration:1.1]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:13:38.687

它只是预处理时的文本替换。也就是说，文本在编译发生之前被替换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:15:06.520

`#define`是 C 预编译器宏而不是变量。您指定在编译代码之前将`ADFadeOutSpeed`字符串替换为字符串。`1.1`您不会收到编译器警告，因为就编译器本身而言，它正在评估的表达式是`[UIView setAnimationDuration:1.1];`并且它将 解释`1.1`为文字。

# security - Joomla 或 vBulletin 等精心设计的代码库中最常见的漏洞类型是什么？

> ID：10424197
> 
> 赞同：0
> 
> 时间：2012-05-03T02:11:26.797
> 
> 标签：security, sql-injection, exploit

我知道在制作不佳的代码库中，SQL 注入和 javascript 注入是个大问题。在设计合理的代码库中，这些问题应该可以通过仅通过清理瓶颈模块接受表单数据并通过代码审查明确地对源自社区的模块和插件强制执行此约束来修复。

那么，一旦这些问题得到解决，剩下的主要威胁/已知漏洞的来源是什么？是否有同样直接的潜在消毒解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T05:37:50.440

第一个我不知道，但我对第二个有一定的答案。

> 它们可以通过消毒修复吗？

## 不

没有像“消毒”这样的东西。
**恰恰相反 - 对这种魔杖的信仰是所有注射的来源。**

没有恶意数据。*不同情况下*有不同的*数据*。 并且“一般清理瓶颈”永远不会有任何好处，破坏无辜的数据并留下恶意数据。

 *无论应该做什么“清理”（或者更好的格式化）都取决于数据的目标。

并且只是“守护进程”（例如 SQL、HTML）并不是具有单一规则的完整目标点。
比如说，对于您需要的 HTML，`htmlspecialchars()`或者`urlencode()`对于不同的目的地。
对于 SQL，它有四种不同的格式化技术：

*   对于字符串
*   对于数字（可以与前一个结合）
*   对于标识符
*   对于语法关键字

它们中的每一个都需要完全不同的格式，在你的魔法瓶颈点完全未知。*

# zend-framework2 - 如何使用 Zend Framework 2 路由选择控制器命名空间？

> ID：10424198
> 
> 赞同：1
> 
> 时间：2012-05-03T02:11:48.980
> 
> 标签：zend-framework2

我将它作为我的 DI 配置的一部分，来自骨架应用程序：

```
 'routes' => array(
                    'default' => array(
                        'type'    => 'Zend\Mvc\Router\Http\Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                            ),
                            'defaults' => array(
                                'controller' => 'Application\Controller\IndexController',
                                'action'     => 'index',
                            ),
                        ),
                    ), 
```

我想做以下路由：

```
http://me.com/mycontroller/myaction --> 
controller=Applicaiton\Controller\Mycontroller 
method=myactionAction 
```

但是，上面的配置会产生：

```
http://me.com/mycontroller/myaction --> 
controller=Mycontroller 
method=myactionAction 
```

如您所见，缺少控制器的命名空间。我将命名空间放在哪里/如何？（我知道我可以为每个控制器创建一个 DI 别名，但这会破坏进行段匹配的目的。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T18:32:39.183

完全有可能实现您最初想要实现的目标。在您的默认设置中，您可以添加一个 __NAMESPACE__ 键并稍微更改控制器键。

你可以这样做：

```
'default' => array(
    'type' => 'Zend\Mvc\Router\Http\Segment',
    'options' => array(
        'route' => '/[:controller[/:action]]',
        'constraints' => array(
            'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
            'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
        ),
        'defaults' => array(
            '__NAMESPACE__' => 'Application\Controller',
            'controller' => 'Index',
            'action' => 'index',
        ),
    ),
), 
```

唯一需要的其他更改是当您在模块配置中将控制器注册为可调用时，您必须这样做：

```
'controllers' => array(
    'invokables' => array(
        'Application\Controller\Index' => 'Application\Controller\IndexController',
    ),
), 
```

请注意我如何在键中使用 Index 而不是 IndexController。

我可以找到的文档中的任何地方都没有提到路由的默认定义的这个 __NAMESPACE__ 键和可调用数组行为中键末尾的“Controller”的删除。实际上，我从 ZendSkeletionApplication 的路由工作原理中收集了这些信息：

[https://github.com/zendframework/ZendSkeletonApplication/blob/2ce1cf0dd40046024970d87d3998e16cde41c7db/module/Application/config/module.config.php](https://github.com/zendframework/ZendSkeletonApplication/blob/2ce1cf0dd40046024970d87d3998e16cde41c7db/module/Application/config/module.config.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T09:44:04.890

你不应该在你的路由中使用段作为控制器。段匹配可以用于动作和其他参数，但不能用于控制器。您可以使用别名来帮助 mycontroller 匹配 MyNamespace\Mycontroller，但不建议这样做。最好、最简单且性能最高的方法是为每个控制器设置路由，必要时使用分段进行操作。

# android - Android 库没有将其资源拉到其他项目

> ID：10424199
> 
> 赞同：13
> 
> 时间：2012-05-03T02:11:50.517
> 
> 标签：android, resources

我有一个 Android 项目，我正试图将其制作成一个库。我收到此代码引发的异常：

```
_buttonStart = (Button) findViewById(R.id.buttonStart); 
```

我得到的例外是：

```
java.lang.NoSuchFieldError: com.xxx.libraryname.R$id.buttonStart 
```

Android 文档似乎明确表示该库应该能够访问这些资源：

“例如，库项目中的源代码可以通过它的R类访问它自己的资源。”

当我查看图书馆的`/gen/com.xxx.libraryname/R.java/R/id/`， buttonStart 就在那里。但是当我查看主要项目时`/gen/com.xxx.libraryname/R.java/R/id`，它不是。

我做了一个清洁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-26T10:01:31.970

**Your library project also has same name layout main.xml as your main project.**

Android will give priority to host project if both have the same Layout name, in this case **"main.xml"** Best approach is to use some prefix notation so there are no accidental collisions.

# ssrs-2008 - 如果只有一个值，则自动选择参数值

> ID：10424200
> 
> 赞同：0
> 
> 时间：2012-05-03T02:11:54.990
> 
> 标签：ssrs-2008, reporting-services

我想要一个动态参数，而如果它引用数据集，如果数据集只返回一条记录，那么参数下拉列表只会显示该值。但是，如果数据集为该参数返回多个值，那么我想在从数据集返回的值列表之前显示一个初始的“选择一个值”或类似的东西作为下拉列表中的第一个值。

我不知道如何做一个有条件的默认值。因此，以某种方式检查数据集计数，如果 > 1 将默认值设置为“选择值”。

我不确定是否需要设置默认值来执行此操作，即使...任何人？

我尝试在报告参数的默认值选项卡中选择“指定值”，并尝试将其设置为检查从数据集中返回的多个记录，如果是，则添加“选择值”的默认值，但这不会工作：

```
 =IIf(Count(Fields!BusinessLine.Value) > 1, "Select a Value", First(Fields!BusinessLine)) 
```

我也试过：

```
=IIf(Parameters!Organization.Count > 1, "Select a Value", First(Fields!BusinessLine)) 
```

没运气。我收到错误“用于报表参数'@ParameterName'的值表达式引用了一个字段。字段不能在报表参数表达式中使用。”

所以我被困在这里如何获取这个表达式或在这里检查我的报告参数的默认选择值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:27:03.473

您不必这样做，这是参数的默认行为。也许你没有正确配置它。

在你的主数据集上做你的选择，在 where 子句上做`where BusinessLine in (@BusinessLine)`

然后，创建另一个名为 DSBusinessLine 的数据集，其中包含

```
select ID, BusinessLineName
from BusinessLine 
```

双击 BusinessLine 参数，转到默认值，选择`select value from a query`并选择 DSBusinessLine 并通知 ID 作为值和 BusinessLineName 作为文本

# python - 调用子进程

> ID：10424204
> 
> 赞同：1
> 
> 时间：2012-05-03T02:12:38.353
> 
> 标签：python, ubuntu

我必须在 Ubuntu 中调用一个可执行文件......刚刚学会了如何通过`subprocess.Popen`在 Windows 中使用来完成这项工作。现在，我需要在 Ubuntu 中重复这一步。

我使用了以下 Python 命令：

```
a=subprocess.Popen("filename.exe",shell=0) 
```

回报是

```
Traceback (most recent call last):
  File "/untitled0.py", line 29, in <module>
    a=subprocess.Popen("filename.exe",shell=0)
  File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
    errread, errwrite)
  File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
    raise child_exception
OSError: [Errno 8] Exec format error 
```

如果我更改`shell=1`，则不会有任何投诉，但也不会生成任何输出文件。

`file filename.exe` 我已经使用它返回 检查了这个文件的类型：

> filename.exe：ELF 64 位 LSB 可执行文件，x86-64，版本 1 (SYSV)，动态链接（使用共享库），用于 GNU/Linux 2.6.9，未剥离

那么是否可以`subprocess.Popen`在 Ubuntu 中使用它来调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:17:55.653

快速阅读 python 文档，看起来你做对了，所以 . 如何尝试执行说 /bin/false 这应该是您系统上已知的工作 exe。如果可行，那么您的 exe 可能是错误的（在 32 位系统上可能是 64 位）

# jquery - 首次用户登录，显示对话框

> ID：10424207
> 
> 赞同：0
> 
> 时间：2012-05-03T02:12:59.383
> 
> 标签：jquery, jquery-ui

当用户第一次登录我的应用程序时，我想向他们展示一个包含一般信息的 jQuery 对话框。

要检查用户是否已登录，我可以检查 mySQL 数据库中的 last_login 字段——如果它为空，则表示用户尚未登录。

我也知道如何设置 jQuery 对话框。

但是我不认为我可以同时使用 jQuery 和 mySQL，所以我想知道其他人用什么来解决这个问题。我在这里查看了关于 SO 的其他一些问题；还没有找到任何将首次登录和弹出窗口放在一起的东西。

我正在为我的框架使用 Codeigniter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:22:10.907

当您验证登录时，只需向页面传递一个参数，说明这是第一次登录。因此，正常验证，但只需告诉您被重定向到的页面这是用户的第一次（通过该 mysql 列）。

成功登录时查看的页面将检查是否传递了该参数，如果是，将弹出模式。

在这里阅读有关模态的信息：http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)。如前所述，您可以在会话中设置变量，也可以将其作为查询字符串参数传递。您可以使用该变量来确定是否触发模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:24:31.830

我建议在会话中设置一个标志，并在创建会话后将其用作标识符。

使用 JQuery 与数据库交互的方式是使用一些持久存储 NOSQL 数据库，例如[MongoDB](http://www.mongodb.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:33:45.917

我相信 codeigniter 是 php （未标记），所以只需将脚本放在 php if 语句中弹出一个对话框：

```
<?php if (fFirstTime) { ?>
<script>
  $("#dialogdiv").dialog({...options...});
</script>
<?php } ?> 
```

将此视为伪代码，因为我确定它有错误，但你明白了。fFirstTime 将来自您在 codeigniter 中的数据库层（模型）。

# android - 从 facebook android SDK 获取专辑 ID？

> ID：10424208
> 
> 赞同：2
> 
> 时间：2012-05-03T02:13:05.040
> 
> 标签：android, facebook, sdk, image

我找到了这个答案：

[从android中的facebook相册中获取照片](https://stackoverflow.com/questions/3706678/fetch-photos-from-facebook-album-in-android)

但我想知道如何获取 ALBUM_ID？专门为“墙照”相册。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:04:41.800

假设您已经调用了 Graph API 作为 OP 中链接的解决方案，为什么不做一个简单的 for 循环呢？我的实现当然可能与你的不同，但这样的事情应该为你做。

```
for (int i = 0; i < JAAlbums.length(); i++) {
    json_data = JAAlbums.getJSONObject(i);
    // Log.d("json_data", json_data.toString());

    if (json_data.has("name"))  {
        String getAlbumCoverName = json_data.getString("name");
        if (getAlbumCoverName.equals("Wall Photos"))    {
            String getAlbumID = json_data.getString("id");
        }
    }
} 
```

这段代码，在一个轻微的实现中总是为我做的。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:37:02.657

由于这篇文章，我得到了它的工作：[Android - 如何将照片从 SD 卡上传到 Facebook 墙上](https://stackoverflow.com/questions/8662460/android-app-how-to-upload-photo-from-sdcard-to-facebook-wall)

这是我使用的代码：

```
String wallAlbumID = null;
String response = facebook.request("me/albums");
JSONObject json = Util.parseJson(response);
JSONArray albums = json.getJSONArray("data");
for (int i =0; i < albums.length(); i++) {
    JSONObject album = albums.getJSONObject(i);                     
    if (album.getString("type").equalsIgnoreCase("wall")) {
        wallAlbumID = album.getString("id");
        Log.d("JSON", wallAlbumID);
        break;
    }
} 
```

虽然我以不同的方式实现了它，但这是要走的路。(Y)

# python - 尝试从 PyQt4 QSqlQuery 中提取值

> ID：10424210
> 
> 赞同：1
> 
> 时间：2012-05-03T02:13:19.030
> 
> 标签：python, pyqt4, qtsql

我不断收到错误消息，提示我的值未位于有效记录中。我已经在 MySQL 中成功执行了查询，但我认为我忽略了代码中的某些内容。

```
query = QtSql.QSqlQuery("select patient_id," +
                        "(SUM(IF(uom_id = 1, value, 0)) / SUM(IF(uom_id = 1, 1, 0))) AS `Average radius`," +
                        "(SUM(IF(uom_id = 2, value, 0)) / SUM(IF(uom_id = 2, 1, 0))) AS `Average Volume`," +
                        "(SUM(IF(uom_id = 3, value, 0)) / SUM(IF(uom_id = 3, 1, 0))) AS `Average SA`" +
                        "from measurements" +
                        "WHERE image_id = " + self.dbImage.id.toString() +
                        "AND status = 'A'" +
                        "GROUP BY patient_id", self.db)
query.next()

radius_acc = query.value(1).toDouble()
volume_acc = query.value(2).toDouble()
SA_acc = query.value(3).toDouble()

print('average of previously accepted measurements includes ' +
      'radius = ' + str(radius_acc) +
      'volume = ' + str(volume_acc) +
      'SA = ' + str(SA_acc)) 
```

具体来说，我想知道我将查询输入到 QSqlQuery 的方式是否有问题？或者我可能试图错误地使用 value(n) 方法？

如果这两种情况都不是，我敢打赌，我在查询中为 self.dbImage.id.toString() 使用了错误的参数，在这种情况下，我明天就问同事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:19:27.263

要遍历结果集，您通常使用`while`循环：

```
 while(query.next()){
     // do whatever you need with query.value()
 } 
```

如果您只对第一行感兴趣，您可以使用`first()`, 再次`while`循环：

```
 while(query.first()){
     // do whatever you need with query.value()
 } 
```

**编辑：**对不起，误解了你的问题。现在我看到您可能忘记在某些字符串中添加一些空格：

```
 "from measurements" 
```

至

```
 " from measurements "
 #^ Here   and here ^^ 
```

如果没有这些空格，您的查询将类似于

```
 "...d = 3, 1, 0))) AS `Average SA`from measurementsWHERE image_id = ..." 
```

这当然不是一个有效的查询。

# c - 为什么我的位不左移？

> ID：10424218
> 
> 赞同：0
> 
> 时间：2012-05-03T02:13:57.980
> 
> 标签：c, embedded, microcontroller, 8051, keil

我在 Keil 上使用嵌入式 C。我正在尝试编程，使其存储一个位，位移，然后再次存储它并重复，直到存储所有八位。

但是，当我调试（可能调试错误）时，该值仅显示“01 00 00 00 00 00 00 ...”。当它存储逻辑'1'然后左移时，它显示“02 00 00 00 00 00 00...”。当循环重复时，它会一遍又一遍地显示相同的内容。我所期望的是“01 01 01 01 01 01 01 ...”（假设所有输入位都是“1”）。我该如何解决这个问题？

```
#include <reg51.h>

sbit Tsignal = P1^2;
unsigned char xdata x[500];

for(u=0; u<8; u++)
{
     x[i] = x[i] << 1;
     x[i] = Tsignal;  //Store Tsignal in x
} 
```

啊，我已经解决了。

```
unsigned int u;
unsigned char p;
unsigned char xdata x[500];

for(u=0; u<8; u++)    //Bit Shift Loop
{
    x[i] = x[i] <<1;   //Left Bit Shift by 1
    p = Tsignal;       //Store Tsignal to Buffer p
    x[i] |= p;
} //End Bitshift loop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:21:06.227

我想你想做这样的事情：

```
for(u=0;u<8;u++)
{
  // Update Tsignal.
  //Tsignal = GetBitValue();

  // Store it to x.
  x = (x << 1) | (Tsignal & 0x1)
} 
```

# python - 将列表合并为一个

> ID：10424219
> 
> 赞同：17
> 
> 时间：2012-05-03T02:14:11.910
> 
> 标签：python, list

我正在写一个小脚本来帮助记忆日语假名。我如何将以下列表合并为一个？我尝试如下。

```
a = ["a",   "i",   "u",   "e",   "o"]
k = ["ka",  "ki",  "ku",  "ke",  "ko"]
g = ["ga",  "gi",  "gu",  "ge",  "go"]
s = ["sa",  "shi", "su",  "se",  "so"]
z = ["za",  "ji",  "zu",  "ze",  "zo"]
t = ["ta",  "chi", "tsu", "te",  "to"]
d = ["da",         "du",  "de",  "do"]
n = ["na",  "ni",  "nu",  "ne",  "no"]
h = ["ha",  "hi",  "hu",  "he",  "ho"]
b = ["ba",  "bi",  "bu",  "be",  "bo"]
p = ["pa",  "pi",  "pu",  "pe",  "po"]
m = ["ma",  "mi",  "mu",  "me",  "mo"]
y = ["ya",         "yu",         "yo"]
n = ["n"]

kana = [a, k, g, s, z, t, d, n, h, b, p, m, y, n]

print kana 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T02:15:24.770

单程：

```
kana = a + k + g + s + z + t + d + n + h + b + p + m + y + n 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-03T02:25:39.893

这个问题实际上是在问你如何展平列表列表，这里回答：[join list of lists in python](https://stackoverflow.com/questions/716477/join-list-of-lists-in-python)。

您可以通过执行以下操作打印出所有内容：

```
import itertools
print list(itertools.chain(*kana)) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-03T07:49:53.353

*我对显式for 循环*的+1`.extend()`

```
>>> import this
The Zen of Python, by Tim Peters

Beautiful is better than ugly.
Explicit is better than implicit.
...
Readability counts.
...
In the face of ambiguity, refuse the temptation to guess.
... 
```

测量时，普通的 for 循环比列表理解的副作用更快。

```
import itertools
import timeit

def flattenListOfLists(lst):
    result = []
    for sublist in lst:
        result.extend(sublist)
    return result

def flattenListOfLists2(lst):
    result = []
    [result.extend(sublist) for sublist in lst]  # uggly side effect ;)
    return result

def flattenIterTools(lst):
    return list(itertools.chain(*lst))

a = ["a",   "i",   "u",   "e",   "o"]
k = ["ka",  "ki",  "ku",  "ke",  "ko"]
g = ["ga",  "gi",  "gu",  "ge",  "go"]
s = ["sa",  "shi", "su",  "se",  "so"]
z = ["za",  "ji",  "zu",  "ze",  "zo"]
t = ["ta",  "chi", "tsu", "te",  "to"]
d = ["da",         "du",  "de",  "do"]
n = ["na",  "ni",  "nu",  "ne",  "no"]
h = ["ha",  "hi",  "hu",  "he",  "ho"]
b = ["ba",  "bi",  "bu",  "be",  "bo"]
p = ["pa",  "pi",  "pu",  "pe",  "po"]
m = ["ma",  "mi",  "mu",  "me",  "mo"]
y = ["ya",         "yu",         "yo"]
n = ["n"]

kana = [a, k, g, s, z, t, d, n, h, b, p, m, y, n]

t = timeit.timeit('lst = flattenListOfLists(kana)', 'from __main__ import kana, flattenListOfLists', number=100000)
print 'for loop:', t

t = timeit.timeit('lst = flattenListOfLists2(kana)', 'from __main__ import kana, flattenListOfLists2', number=100000)
print 'list comprehension side effect:', t

t = timeit.timeit('lst = flattenIterTools(kana)', 'from __main__ import kana, flattenIterTools\nimport itertools', number=100000)
print 'itertools:', t 
```

它打印在我的控制台上：

```
for loop: 0.389831948464
list comprehension side effect: 0.468136159616
itertools: 0.620626692887 
```

无论如何，是时候重复同样的 10 万次了。*可读性*很重要是我的论点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-03T02:25:24.763

```
kana = sum([a, k, g, s, z, t, d, n, h, b, p, m, y, n], []) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-03T19:38:17.050

人们还应该知道**一个非常重要的事实**，即扁平列表与原始列表**共享原始对象**。在这种情况下这不是问题，因为对象是不可变的字符串。如果对象是可变的，则在一个结构中更改它们将更改通过第二个结构可观察到的元素值。

总而言之，必须对 Python 内部结构有更多了解。有时我们想要复制原始子列表，如下所示：

```
...
result = []
for sublist in lst:
    result.extend(sublist[:])     # notice the [:] here
... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-03T02:28:53.027

以下是列表推导`so_on`式，仅在示例中用作快捷方式来表示您要组合的实际剩余列表。

漫长的道路：

```
>>> all_list = [e for l in [a, k, so_on] for e in l] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T02:39:47.487

```
kana = [a, k, g, s, z, t, d, n, h, b, p, m, y, n]
combined_list=[]
for x in kana:
    combined_list.extend(x) 
print(combined_list)

['a', 'i', 'u', 'e', 'o', 'ka', 'ki', 'ku', 'ke', 'ko', 'ga', 'gi', 'gu', 'ge', 'go', 'sa', 'shi', 'su', 'se', 'so', 'za', 'ji', 'zu', 'ze', 'zo', 'ta', 'chi', 'tsu', 'te', 'to', 'da', 'du', 'de', 'do', 'n', 'ha', 'hi', 'hu', 'he', 'ho', 'ba', 'bi', 'bu', 'be', 'bo', 'pa', 'pi', 'pu', 'pe', 'po', 'ma', 'mi', 'mu', 'me', 'mo', 'ya', 'yu', 'yo', 'n'] 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-25T04:14:17.207

与 lambda 的其他方式

```
kana = [a, k, g, s, z, t, d, n, h, b, p, m, y, n]

reduce(lambda x,y: x+y,kana) 
```

# entity-framework - 如何首先解决实体框架数据库中的字段包装

> ID：10424222
> 
> 赞同：0
> 
> 时间：2012-05-03T02:14:34.517
> 
> 标签：entity-framework, database-first

当我第一次使用数据库时，创建edmx文件后，所有的概念模型都已经生成了。但是我想在某些领域做一些特殊的操作。例如，有一个名为“价格”的字段；我希望匹配的属性“价格”返回两倍的“价格”。我怎样才能做到这一点？如果我修改代码中的 getter，每次我从数据库更新模型时，所有修改都会消失。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:21:51.250

您可以做的是为包含 Price 属性的实体创建一个部分类，并像这样放置一个 getter（具有双倍价格的属性将是有意义的），

```
Public partial class YourEntity{
  Public float DoublePrice{
    get { return Price*2;}
 }
} 
```

或者你可以创建一个继承自实体的类，

```
 Public partial class Entity:YourEntity{
      Public override float Price{
        get { return base.Price*2;}
     }
  } 
```

# playn - 在 PlayN 中，如何使用 Storage 接口来持久化数据？

> ID：10424226
> 
> 赞同：0
> 
> 时间：2012-05-03T02:15:06.580
> 
> 标签：playn

我正在寻找一个代码示例来演示[`Storage`接口](http://docs.playn.googlecode.com/git/javadoc/index.html)的实际实际使用情况。我对 HTML5 实现特别感兴趣。我刚刚开始进行自己的概念验证，所以如果在那之前没有更好的答案，我会发布。

这个 Google 演示文稿中介绍了 Storage 接口：

*   [http://playn-2011.appspot.com/](http://playn-2011.appspot.com/slides/index.html#40)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:32:04.603

下面是一些代码，演示了存储接口与 PlayN 的 JSON 接口的使用：

```
private void loadStoredData() {
    // storage parameters
    String storageKey = "jsonData";
    Json.Object jsonData = PlayN.json().createObject();  

    // to reset storage, uncomment this line
    //PlayN.storage().removeItem(storageKey);

    // attempt to load stored data
    String jsonString = PlayN.storage().getItem(storageKey);

    // if not loaded, create stored data
    if ( jsonString == null ) {
        DemoApi.log("stored data not found");
        jsonData.put("firstWrite", new Date().toString());

    // else display data
    } else {
        jsonData = PlayN.json().parse(jsonString);
        DemoApi.log("stored data loaded");
        DemoApi.log("data first written at " + jsonData.getString("firstWrite"));
        DemoApi.log("data last read at " + jsonData.getString("lastRead"));
        DemoApi.log("data last written at " + jsonData.getString("lastWrite"));
    }

    // update last read
    jsonData.put("lastRead", new Date().toString());

    // write data (this works in Java -- not in HTML)
    // see https://stackoverflow.com/q/10425877/1093087
    /*
    Json.Writer jsonWriter = PlayN.json().newWriter();
    jsonWriter.object(jsonData).done();
    jsonString = jsonWriter.write();
    */

    // alternative write routine
    Json.Writer jsonWriter = PlayN.json().newWriter();
    jsonWriter.object();
    for ( String key : jsonData.keys() ) {
        jsonWriter.value(key, jsonData.getString(key));
    }
    jsonWriter.end();
    jsonString = jsonWriter.write();

    // store data as json
    PlayN.storage().setItem(storageKey, jsonString);

    // confirm
    if ( PlayN.storage().isPersisted() ) {
        DemoApi.log("data successfully persisted");
    } else {
        DemoApi.log("failed to persist data");
    }
} 
```

`Json.Writer`我在这里的这个问题中记录了一个似乎有点错误的小问题：在[PlayN 的 HTML 版本中，为什么以下 JSON 处理代码会引发异常？](https://stackoverflow.com/questions/10425877)

# java - java主类参数可以改吗？

> ID：10424229
> 
> 赞同：-1
> 
> 时间：2012-05-03T02:15:32.100
> 
> 标签：java, parameters, main, nosuchmethoderror

通常的参数是 (String[] arg)。我采用一个带有字符串数组的参数。当我将其更改为（Int arg）时，我得到一个运行时错误“没有这样的方法错误”。我知道错误是由更改参数引起的。我的问题是我可以将字符串数组中的参数更改为其他参数，还是只能使用预设参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T02:17:44.207

简而言之，没有。如果要引用单个整数参数，请使用

`int number = Integer.parseInt(arg[0])`

当然，您会想要使用一些异常处理，但这是一般的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:17:12.993

参数是命令行参数的列表，shell 将这些参数作为字符串传递给您的程序。从 . 更改它是没有意义的`String []`。但是您可以自由地以适合您的程序的任何方式解析字符串。

# java - 静态方法 - 何时将数组参数返回为 void 并作为数组返回？

> ID：10424234
> 
> 赞同：0
> 
> 时间：2012-05-03T02:16:30.493
> 
> 标签：java

我一直在阅读有关静态方法和通过引用调用传递数组的这一部分。所以我的问题是：什么时候是返回数组参数而不是 void 的好时机？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T02:40:20.553

> 我一直在阅读有关通过引用调用传递数组的静态方法的这一部分。

如果这是一篇 Java 文章、网站、博客、书籍等等，您可能应该找到更好的。Java 不对任何参数使用“引用调用”。任何这样说的人要么不了解 Java，要么不了解“引用调用”的含义。

Java 按值传递所有参数。时期。

混淆的一点是有些人不明白Java中的对象和数组总是引用。因此，当您将数组（例如）作为参数传递时，您将通过值传递*对数组的引用*。但是，这不是挑剔。按值传递引用在语义上与真正的“按值调用”非常不同。

重新引用实际报价：

> *“所有这些示例都突出了一个基本事实，即在 Java 中传递数组的机制是关于数组内容的引用调用机制”*（Sedgewick）。

*鉴于“关于数组内容”*的资格，我理解他在说什么。但称这种“引用调用”具有误导性。（很明显，*你在*某种程度上被它误导了！）

我还认为这在技术上是错误的。术语“按值调用”、“按引用调用”、“按名称调用”（等等）是关于参数传递/返回的。在这种情况下，参数是整个数组，而不是数组的内容。在那个级别，语义显然不是引用调用。（在方法中为参数名称分配新的数组引用不会更新调用者中的数组变量。）行为*与数组内容*的引用调用无法区分这一事实不会使其调用-引用。

* * *

现在到你的问题的实质......

> 什么时候是返回数组参数而不是 void 的好时机？

您的意思并不完全清楚，但我假设您正在谈论这两种选择：

```
 public void method(String arg, String[] result) ... 
```

相对

```
 public String[] method(String arg) ... 
```

我会说第二种形式通常更可取，因为它更容易理解和使用。此外，第二种形式允许该方法选择结果数组的大小。（对于第一种形式，如果数组太小或太大，则无法返回对重新分配的数组的引用。）

应该使用第一种形式的唯一情况是：

*   当该方法的功能要求取决于它是否要更新现有数组时，或者
*   当总体需要最小化分配的对象数量时；例如，尽量减少 GC 暂停。

如果数组已经在其他数据结构中引用，则可能会出现第一种情况，并且查找/更新这些引用会很困难。如果数组很大，也可能会出现这种情况，并且制作副本的成本将主导该方法完成的实际工作的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:50:41.570

在java中传递给方法的所有参数都是引用期望原始类型，因此无论在方法内部还是外部，它都只是将一个对象存储在内存中，静态方法在这里甚至不被视为任何特殊情况。在您返回此数组或 void 类型的情况下，它不会有任何区别。

如果您返回此数组，则返回的值正是您刚刚传递给此方法的值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-03T02:19:31.413

好吧，最终...按值传递数组很慢。它必须抓取一块内存并复制数组。如果数组的大小只有几个字节，那没什么大不了的。但是如果它的内存很大，那么这将是一个缓慢的 IO 操作。特别是如果这发生在一个紧密的循环中，它会损害性能。

通过引用传递将允许您提前创建缓冲区并重用它。

# sql - 核心数据关系与基于服务器的外键

> ID：10424235
> 
> 赞同：1
> 
> 时间：2012-05-03T02:16:33.753
> 
> 标签：sql, ios, core-data, object-relationships

我有一个复杂的 iPad 应用程序转而使用 Core Data。我从服务器接收数据，该服务器在各种表中内置了外键以表示表（实体）之间的关系。

当我重写应用程序以使用 Core Data 时，我应该维护外键结构并创建自己的访问器，还是将它们转换为 Core Data 关系或两者都使用？似乎工作加倍。我已经拥有链接两个表的数据，我可能需要维护这两个表，以便将数据发送回服务器。然而，Core Data 将为关系创建自己的密钥。它复制信息并且可能不同步。

我可以： 1\. 保留现有属性以表示表之间的关系并根据需要编写自己的提取。2\. 当我从服务器接收数据并使用核心数据关系时，构建一个对象图。3\. 根据需要使用混合的，有时是外键属性，有时是关系。

是否有一种典型的方法用于 Core Data 应用程序从服务器接收大部分数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:24:49.660

如果您打算使用核心数据而不是 sqllite，则转换为核心数据。请记住，CoreData 不仅仅是一个关系数据库。它用于持久化对象图。因此，您放置数据结构的方式可能完全不同。

通常，您可能在 Core Data 应用程序中有更多的非规范化数据，但实际上，您应该重新映射您的数据，因为您希望它在您的应用程序中使用。然后你就会知道真正的答案。但是，我不认为我会留下外键......我会使用关系，因为这是核心数据最适合的方式。

# android - 访问接收器中的视图

> ID：10424238
> 
> 赞同：0
> 
> 时间：2012-05-03T02:17:13.617
> 
> 标签：android

我有一个父应用程序：

```
private final BroadcastReceiver receiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        //hide view
    }
}; 
```

在转换 getApplication 之后，每个活动都有对父应用程序的引用。因此，在每个活动中，我都像这样绑定接收器：

```
 registerReceiver(application.getBroadcastReceiver(), new IntentFilter(MyApplication.ACTION_RESPONSE)); 
```

如何使用列出的 onReceive 方法中的调用隐藏在标题栏中全局使用的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:25:07.123

您可以将当前活动的上下文保存在应用程序类中，比如说在 CurrentActivity 变量中。然后使用这个上下文来隐藏当前活动的视图。

# spring - 来自文件系统上的平面文件的 Weblogic Spring 依赖注入

> ID：10424240
> 
> 赞同：0
> 
> 时间：2012-05-03T02:17:32.917
> 
> 标签：spring, dependency-injection, weblogic

我在 Oracle Weblogic 10.3 中部署了一个应用程序。在我的 .ear 文件中，我使用来自 ear 文件中的 xml 文件的弹簧注入。我还想从放置在服务器文件系统上的 xml 文件执行依赖注入。我们在 Karaf 中做了类似的事情，我们将捆绑包的配置文件放在服务器本身的 conf 目录中。在 weblogic 中是否有类似的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:10:04.557

您可以要求**spring 从文件系统中读取属性，**如下所示；

```
<!-- Reads application properties and uses them in the application context -->
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreResourceNotFound" value="true"/>
    <property name="systemPropertiesModeName" value="SYSTEM_PROPERTIES_MODE_OVERRIDE"/>
    <property name="locations">
        <list>
            <value>file:D:\somefolder\application.properties</value>
            <value>classpath:com/foo/sp.properties</value>
        </list>
    </property>
</bean> 
```

# android - Android：当网站包含链接 rel="alternate" type="application/rss+xml" 时如何下载 RSS

> ID：10424247
> 
> 赞同：4
> 
> 时间：2012-05-03T02:18:30.617
> 
> 标签：android, html, rss

我正在制作一个 RSS 相关的应用程序。
我希望能够下载 RSS(xml) 仅给出包含以下内容的网站 URL：

*链接 rel="alternate" 类型="应用程序/rss+xml"*

例如，[http](http://www.engaget.com) ://www.engaget.com源包含：

```
<link rel="alternate" type="application/rss+xml" title="Engadget" href="http://www.engadget.com/rss.xml"> 
```

我假设如果我将此站点作为 RSS 应用程序打开，
它会将我重定向到[http://www.engadget.com/rss.xml](http://www.engadget.com/rss.xml)页面。

我下载 xml 的代码如下：

```
private boolean downloadXml(String url, String filename) {
        try {
            URL   urlxml = new URL(url);
            URLConnection ucon = urlxml.openConnection();
            ucon.setConnectTimeout(4000);
            ucon.setReadTimeout(4000);
            InputStream is = ucon.getInputStream();
            BufferedInputStream bis = new BufferedInputStream(is, 128);
            FileOutputStream fOut = openFileOutput(filename + ".xml", Context.MODE_WORLD_READABLE | Context.MODE_WORLD_WRITEABLE);
            OutputStreamWriter osw = new OutputStreamWriter(fOut);
            int current = 0;
            while ((current = bis.read()) != -1) {
                osw.write((byte) current);
            }
            osw.flush();
            osw.close();

        } catch (Exception e) {
            return false;
        }
        return true;
    } 
```

如果我不知道“http://www.engadget.com/rss.xml”的网址，我输入“http://www.engadget.com”时如何下载 RSS？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:13:33.977

为此，您需要：

1.  检测 URL 是否指向 HTML 文件。请参阅`isHtml`下面代码中的方法。
2.  如果 URL 指向 HTML 文件，请从中提取 RSS URL。请参阅`extractRssUrl`下面代码中的方法。

以下代码是您在问题中粘贴的代码的修改版本。对于 I/O，我将[Apache Commons IO](http://commons.apache.org/io/)用于有用`IOUtils`和`FileUtils`类。`IOUtils.toString`用于将输入流转换为字符串，如文章“ [In Java, how do I read/convert an InputStream to a String?](https://stackoverflow.com/questions/309424/in-java-how-do-i-read-convert-an-inputstream-to-a-string) ”中推荐的那样。

`extractRssUrl`使用正则表达式来解析 HTML，尽管它非常不受欢迎。[（请参阅“ RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)”中的咆哮。）考虑到这一点，让我们`extractRssUrl`作为一个起点。中的正则表达式`extractRssUrl`是基本的，并不涵盖所有情况。

请注意，调用`isRss(str)`被注释掉了。如果要进行 RSS 检测，请参阅“[如何检测页面是 RSS 还是 ATOM 提要](https://stackoverflow.com/questions/2442984/how-to-detect-if-a-page-is-an-rss-or-atom-feed)”。

```
private boolean downloadXml(String url, String filename) {
    InputStream is = null;
    try {
        URL urlxml = new URL(url);
        URLConnection ucon = urlxml.openConnection();
        ucon.setConnectTimeout(4000);
        ucon.setReadTimeout(4000);
        is = ucon.getInputStream();
        String str = IOUtils.toString(is, "UTF-8");
        if (isHtml(str)) {
            String rssURL = extractRssUrl(str);
            if (rssURL != null && !url.equals(rssURL)) {
                return downloadXml(rssURL, filename + ".xml");
            }
        } else { // if (isRss(str)) {
            // For now, we'll assume that we're an RSS feed at this point
            FileUtils.write(new File(filename), str);
            return true;
        }
    } catch (Exception e) {
        // do nothing
    } finally {
        IOUtils.closeQuietly(is);
    }
    return false;
}

private boolean isHtml(String str) {
    Pattern pattern = Pattern.compile("<html", Pattern.CASE_INSENSITIVE | Pattern.DOTALL | Pattern.MULTILINE);
    Matcher matcher = pattern.matcher(str);
    return matcher.find();
}

private String extractRssUrl(String str) {
    Pattern pattern = Pattern.compile("<link(?:\\s+href=\"([^\"]*)\"|\\s+[a-z\\-]+=\"[^\"]*\")*\\s+type=\"application/rss\\+(?:xml|atom)\"(?:\\s+href=\"([^\"]*)\"|\\s+[a-z\\-]+=\"[^\"]*\")*?\\s*/?>", Pattern.CASE_INSENSITIVE | Pattern.DOTALL | Pattern.MULTILINE);
    Matcher matcher = pattern.matcher(str);
    if (matcher.find()) {
        for (int i = 1; i <= matcher.groupCount(); i++) {
            if (matcher.group(i) != null) {
                return matcher.group(i);
            }
        }
    }
    return null;
} 
```

上面的代码适用于您的 Engadget 示例：

```
obj.downloadXml("http://www.engadget.com/", "rss"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T02:29:10.493

我想显而易见的答案是您首先获取您拥有的 URL (http://www.engadget.com)，然后查看 HTML 以找到`<link>`具有正确类型的标签，然后获取其`href`属性。这是一些（Java）代码：

```
URL url = new URL("http://www.engadget.com");
InputStream is = url.openStream();
int ptr = 0;
StringBuffer buffer = new StringBuffer();
while ((ptr = is.read()) != -1) {
  buffer.append((char)ptr);
}
String html = buffer.toString();
Pattern rsspatt = Pattern.compile("<link[^>]*rss[^>]*>");
Matcher m = rsspatt.matcher(html);
String link = "";
if (m.find()) {
  String rsslink = m.group();
  Pattern xmllinkpatt = Pattern.compile("href=\"([^\"]+)\"");
  Matcher m2 = xmllinkpatt.matcher(rsslink);
  m2.find();
  link = m2.group(1);
} 
```

在此结束时，该变量`link`将为空白或包含您想要的链接，您可以将其输入到您的 downloadXml 函数中。

通常我不建议通过正则表达式解析 HTML，但我认为这是针对手机应用程序的，您希望保持简单并尽可能仅使用核心。当然，如果你想变得花哨，你可以使用 Jsoup 来检查链接标签的存在和正确的属性，然后提取你想要的链接。

# c++ - 通过 fread 将 jpg/png 读取到点数组中

> ID：10424250
> 
> 赞同：0
> 
> 时间：2012-05-03T02:18:59.900
> 
> 标签：c++, qt, image-processing, point, fread

所以我使用中值切割算法（样本在这里找到）将 .raw 图像读入点。实际阅读在这里完成：[中值切割算法](http://en.literateprograms.org/Median_cut_algorithm_%28C_Plus_Plus%29)

```
medianCutPoints = new QList< QList<int>* >();
FILE * raw_in;
int numPoints = 617*800;
Point* points = (Point*)malloc(sizeof(Point) * numPoints);
raw_in = fopen("C:\\Users\\David\\Desktop\\image.raw", "rb");
for(int i = 0; i < numPoints; i++)
{
    fread(&points[i], 3, 1, raw_in);
}
fclose(raw_in); 
```

然后，调色板通过算法生成..

```
std::list<Point> palette =
    medianCut(points, numPoints, 15); 
```

最后，我将这些点存储到一个列表中。

```
for (iter = palette.begin() ; iter != palette.end(); iter++)
{
    medianCutPoints->append(new QList<int>());
    medianCutPoints->last()->append((int)iter->x[0]);
    medianCutPoints->last()->append((int)iter->x[1]);
    medianCutPoints->last()->append((int)iter->x[2]);
} 
```

但是，这似乎只适用于 .raw，因为没有像 jpeg 或 png 那样进行压缩。如果我输入 jpg/png，则颜色与应有的颜色大相径庭。这基本上让我只有两个我能想到的选项 - 使用 jpg 和 png 库将图像解码为 .raw，或者以某种方式将压缩图像的每个像素读入点。

我无法理解第一个循环是如何工作的。我习惯了 C#.NET，那么 fread 究竟是如何工作的，Point* 点是如何设置的？如果我打印出 points[width*height].x[0]，我会从 RGB 代码中得到一个数字。但是如果我也做点[0].x[width*height]，我仍然会得到一个数字。我认为这将是 points[numberOfpoints].x[0-2]，x 是 RGB 的 3 个点。

有没有一种方法可以将 Point* 点设置为 jpg/png 中的每个像素，就像 fread 对 .raw 所做的那样？由于 Qt 是我第一次真正涉足 c++，这比我能理解的要复杂一些，而且我没有太多运气来寻找它究竟是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:56:09.550

如果您使用相同的算法从 png/jpg 文件中读取，它将无法正常工作。png 使用无损压缩，而 jpg 使用有损压缩。其中的数据将不同于“原始”图像的设置方式。从上面的算法来看，“原始”图像以 RGB 格式设置。因此，您`fread`正在将 3 个字节读入每个点。点结构存储 3 个值 x[]，在这种情况下对应于 R(red)、G(green)、B(blue)。

请注意，points 是一个数组，因此在内存中是连续的。假设您在 Point 结构中只有 x[3] 并且`width*height`没有溢出， `points[0][width*height]`将为您提供`points[(width*height)/3][(width*height)%3]`. 本质上，第一个和第二个下标被添加到点的内存位置。

For reading images using QT, you can try QImageReader. It supports many formats: [http://doc.qt.io/archives/qt-4.7/qimagereader.html#supportedImageFormats](http://doc.qt.io/archives/qt-4.7/qimagereader.html#supportedImageFormats)

# java - Java拆分输入

> ID：10424254
> 
> 赞同：3
> 
> 时间：2012-05-03T02:19:25.997
> 
> 标签：java, string, input, split

如果用户键入，我正在尝试为我的项目编写一个简单的代码

> 步行 10

我需要在我的步行（距离）方法中使用“步行”命令，因为距离 = 10 我有类似的东西

```
while (!quit) {
Scanner in = new Scanner(System.in);
String input = in.nextLine();
// if (walk x is typed) {
walk(x);
}
} 
```

我正在使用 java.util.scanner 另一个问题是我的方法 walk(int x) 使用 int 所以我需要将 String 输入转换为 int

我在网上搜索了一段时间，但找不到我要找的东西（或者我不明白）

所以无论如何，如果你能帮助我，我会很感激谢谢

**非常感谢所有的答案我最初的问题是固定的，但是现在我有另一个问题** ，当我输入“walk”时，它会得到数组越界异常当然因为它试图将 null 转换为 int（不可能）我试过这个并在网上查了

```
 try {
                    Integer.parseInt(splitStrings[1]);
                    }
                    catch(NumberFormatException e) {
                    System.out.println("error: " + e);
                    } 
```

仍然没有帮助（我不擅长尝试/捕捉）所以如果用户输入没有距离的步行，我需要给出错误消息再次非常感谢

好的，我也知道了，只是用了一个简单的东西

```
 if ("walk".equals(splitStrings[0])) {
                if (splitStrings.length == 2) {
                int distance = Integer.parseInt(splitStrings[1]);
                Robot.walk(distance);
                }
                if (splitStrings.length != 2) {
                    System.out.println("Entry must be like walk 10");
                }
            } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T02:22:28.277

您可以拆分空间，在这种情况下，数字将是结果数组的第二个元素（索引 1），例如

**编辑 Adam Liss 的以下评论**

```
Integer x = Integer.parseInt(input.split(" ")[1]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T02:26:18.167

尝试对字符串使用 split() 方法。它将返回一个字符串数组。例如

```
String s = 'walk 10';
String[] splitStrings = s.split(" ") 
```

现在，要访问 10，您可以这样做：

```
String distanceToWalk = splitStrings[1] 
```

要将其转换为 int，请在 Integer 上使用 parseInt() 方法

```
Integer.parseInt(distanceToWalk); 
```

看

1.  [http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)
2.  [http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T02:22:36.240

您可以使用以下[`Integer.parseInt()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)方法：

```
int distance = Integer.parseInt(input); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T02:23:15.687

尝试：

```
String s = 1;
int i = Integer.parseInt(s); // returns 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T02:23:53.370

假设你从字符串中去掉整数部分，例如留下一个输入

"walk 10" 和 "10"，只需使用类似

```
// say you've parsed the "number" portion into a variable "inputString"
int x;
x= Integer.parseInt(inputString); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T02:29:40.393

你可以使用这个：

```
// For read the input
InputStreamReader streamReader = new InputStreamReader(System.in);
BufferedReader reader = new BufferedReader(streamReader);
String input = reader.readLine(); 
```

如果您更喜欢使用`Scanner`，那么

```
Scanner sc = new Scanner(System.in);
String input = sc.nextLine(); 
```

然后：

```
StringTokenizer st = new StringTokenizer(input);
if (st.countTokens == 2) { // Only for two tokens "walk 100", "return 10"
    String method = st.nextToken();
    if (method.equals("walk") { // if you have more methods like "walk"
        int distance = Integer.parseInt(st.nextToken());
        walk(distance); // walk
    }
} 
```

如果您想阅读更多行

```
for(String input; sc.hasNextLine();) {
    input = sc.nextLine();

    // do something

} 
```

或者

```
for(String input; (input = reader.readLine()) != null;) {

    // do something

} 
```

# c - 双链表正确打印所有内容，但在打印功能结束时收到分段错误

> ID：10424259
> 
> 赞同：1
> 
> 时间：2012-05-03T02:20:05.013
> 
> 标签：c, linked-list, segmentation-fault, doubly-linked-list

好的，所以我几乎完成了我的最终项目的这个程序，我收到了一个分段错误......该程序将正确执行所有操作，它会将所有内容打印到屏幕上，但是它不会退出该`printWordLength()`功能。最后打印分段错误，我确定这是一个简单的修复，但我的大脑此时正在崩溃。（向下滚动到最底部以获取罪魁祸首打印功能。

如果您只想使用我的代码，请随意。

**目的：**该程序包含一个双向链表，它将读取作为命令行参数输入的文件，从文件中读取每一行，从行中标记每个单词，并且每个单词将根据其长度将其放入 Word Length 结构中然后将其放入依赖于单词字符串的 word_count 结构中，并计算每个单词在文件中的出现次数。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

#define DELIM " ,.+-=!?:;\t"
#define MAXLINE 25000

typedef struct word_count
{
    char * word;
    int count;
    struct word_count *next;
    struct word_count *prev;
} WORD;

typedef struct word_length_count
{
    int length;
    int count;
    WORD * words;
    struct word_length_count *next;
    struct word_length_count *prev;
} WLENGTH;

int splitIntoWords(char line[]);
void processLength(char * word);
void processWord(char * word, WORD * wordCount);
void printWordLength();
WLENGTH * createWordLength(char *word);
WORD * createWordCount(char *word);

WLENGTH * wordLength = NULL;

int main(unsigned int argc, unsigned char *argv[]){
    FILE *fpin;
    char line[MAXLINE];
    int totalWordCount = 0;

    if((fpin = fopen(argv[1], "r")) == NULL)
    {
            printf("Can't open input file.\n");
            exit(-1);
    }

    printf("This is the words all tokenized from the input!\n");
    while(fgets(line, MAXLINE, fpin) != NULL)
    {
            line[strcspn(line, "\n")] = '\0';
            if(line[0] == '\0')
                    continue;
            totalWordCount += splitIntoWords(line);
    }
    printf("Total number of words is: %d\n", totalWordCount);
    printWordLength();
    printf("\nFINISHED!");
}

int splitIntoWords(char line[])
{
    char *word;
    int count=0;
    word = strtok(line, DELIM);
    for(;word != NULL;)
    {
            count++;
            printf("%s\n", word);
            processLength(word);
            word = strtok(NULL, DELIM);
    }
    return count;
}

void processLength(char * word)
{
    WLENGTH *wLCounter = NULL;
    WLENGTH *wLLast = NULL;

    if(wordLength == NULL)
    {
            wordLength = createWordLength(word);
            return;
    }

    wLCounter = wordLength;

    while(wLCounter != NULL)
    {
            if(strlen(word) == wLCounter->length)
            {
                    ++wLCounter->count;
                    processWord(word, wLCounter->words);
                    return;
            }
            wLLast = wLCounter;
            wLCounter = wLCounter->next;
    }
    wLLast->next = createWordLength(word);
}

void processWord(char * word, WORD * wordCount){
    WORD * wCounter = NULL;
    WORD * wLast = NULL;

    if(wordCount == NULL)
    {
            wordCount = createWordCount(word);
            return;
    }
    wCounter = wordCount;
    while(wCounter != NULL)
    {
            if(strcmp(word, wCounter->word) == 0)
            {
                    ++wCounter->count;
                    return;
            }
            wLast = wCounter;
            wCounter = wCounter->next;
    }
    wLast->next = createWordCount(word);
}

WLENGTH * createWordLength(char *word)
{
    WLENGTH *wLCounter = NULL;
    wLCounter = (WLENGTH*)malloc(sizeof(WLENGTH));
    //wLCounter->count = (int*)malloc(int));
    //wLCounter->length = (int*)malloc(int));
    wLCounter->words = createWordCount(word);
    wLCounter->count = 1;
    wLCounter->length = strlen(word);
    wLCounter->next = NULL;
    return wLCounter;
}

WORD * createWordCount(char *word)
{
    WORD *wCount = NULL;
    wCount = (WORD*)malloc(sizeof(WORD));
    wCount->word = (char*)malloc(strlen(word+1));
    strcpy(wCount->word, word);
    wCount->count = 1;
    wCount->next = NULL;
    return wCount;
}

void printWordLength(){
    WLENGTH * temp = wordLength;
    WORD * tempWORD = wordLength->words;
    while(temp != NULL)
    {
            tempWORD = temp->words;
            printf("\nFor Word Length: %d : There are: %d occurances!\n",  temp->length, temp->count);
            while(tempWORD != NULL)
            {
                    printf("\t%s\toccurs:%d\n", tempWORD->word, tempWORD->count);
                    tempWORD = tempWORD->next;
            }
            temp = temp->next;
    }
} 
```

在为 .添加 while 循环之前，我没有收到分段错误`tempWORD`。但是我的大脑放屁时刻是我不知道这个问题。也许是指针问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:39:02.917

在没有努力理解代码的情况下，最后一行看起来像一个问题 - 您需要在分配 tempWORD = temp->words 之前检查 temp != NULL。除非您打算在移至 temp->next 之前执行 tempWord = temp->words 分配

# android - Android，是否可以使用 Fragment 在平板电脑的屏幕上放置两个不同的活动？

> ID：10424266
> 
> 赞同：0
> 
> 时间：2012-05-03T02:21:02.943
> 
> 标签：android, android-activity, fragment

根据我对片段的研究，片段在我们有基于标题/描述的内容时使用，例如书籍、杂志等。

有些项目不是标题/描述基础。在这种情况下我们可以使用片段吗？例如，假设我们有 10 英寸的平板电脑，我想在屏幕内显示我的应用程序的 4 种不同活动，而在手机中，点击菜单的用户可以看到它们。

是否有可能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:19:50.697

是的，您可以使用[Fragments](http://developer.android.com/guide/topics/fundamentals/fragments.html)在屏幕上进行任意数量的活动。

Fragments 是 google 开发的，因为平板电脑的屏幕尺寸很大，我们可以在一个屏幕上容纳更多的功能。所有工作都由 FragmentManager 完成。您可以在任何模式下使用任意数量的片段视图制作 XML 布局。然后将所有视图关联到单个活动。Activity 之间也可以相互通信。您可以在以下示例中找到更多信息。

1.  [http://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)
2.  [http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html](http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html)
3.  [http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)

**编辑**

您需要做的是使用以下函数获取宽度和高度。

```
@Override
public void onCreate(Bundle icicle) {
    WindowManager w = getWindowManager();
    Display d = w.getDefaultDisplay();
    int width = d.getWidth();
    int height = d.getHeight(); 
```

为不同尺寸的屏幕做不同的布局。现在保持 if else 循环来决定使用`setContentView(R.id.layoutfor10inchtable)`等设置哪个布局。

对于配置更改，使一个布尔变量说 permitConfigurationChange 并且当您设置视图时，您还可以在 if else 循环中将此变量设置为 true 或 false。

覆盖 onConfigurationChange 方法。如果检查`if (permitConfigurationChange == false) return;`

布局的设计部分，您需要查看教程，它们将为您提供所有详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:20:41.280

起初片段不只用于显示标题/描述类型的页面。相反，片段是可以独立工作的活动组件，与活动上的其他组件无关。Fragments 也可以维护自己的 backstack。所以，在一个屏幕/活动上总是有可能有四个片段。你需要做的是，创建四个类，它们扩展了 Fragment 而不是 Activity，并将这些 Fragment 添加到 MainActivity。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:11:44.577

1、可以使用fragment代替Activity。（不是真的）..

# tsql - SQL Server 2008 存储过程为输出值返回 null

> ID：10424269
> 
> 赞同：0
> 
> 时间：2012-05-03T02:21:32.113
> 
> 标签：tsql, stored-procedures, sql-server-2008-r2

我无法深入了解为什么下面代码中的输出变量返回 null。我已经在调试中逐步完成了它，并复制/运行了 sql 语句，它确实返回了预期值。但是当我运行它时，它只是空的。任何帮助都会很棒..

```
ALTER PROCEDURE [dbo].[spCountOfMostRecentByTableName] @table VARCHAR(120),
    @count BIGINT OUTPUT

AS
BEGIN

DECLARE @parameters NVARCHAR(100)
SET @parameters = '@count BIGINT OUTPUT'

DECLARE @date DATE = dbo.MostRecentTradeDateForDataDownload()

DECLARE @sql NVARCHAR(MAX) = N'

SELECT COUNT(ID)
FROM ' + @table + 
' WHERE DateAdded = ''' + CAST(@date AS CHAR) + '''';

EXEC sp_executesql @sql, @parameters, @count = @count OUTPUT
SELECT @count

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:28:46.773

您没有在任何地方设置 @count 变量。

改变

选择计数（ID）

至

选择@count = COUNT(ID)

# php - 从多个表循环信息的问题

> ID：10424270
> 
> 赞同：1
> 
> 时间：2012-05-03T02:21:44.050
> 
> 标签：php, mysql, loops

我正在创建一个页面，我可以在其中列出我现在和过去的所有工作，以及每个工作的各种加薪/晋升。我希望列出基本的工作信息，然后在单独的 DIV 中列出所有促销活动。当我循环它们时，我的问题就出现了。对于每项工作，我都希望有多个工资列表，但发生的情况是，如果我有不止一次加薪，它将列出每次加薪的工作信息。我如何让它按照我想要的方式工作？

以下是每个数据库的列：

**职位信息** ID | 地点名称 | 地址 | 电话

**职位促销** ID | 职位ID | 日期 | 工资 | 位置

我的代码：

```
<div id="CurrentJobs">
    <?php

    $CurrentJobsResults = mysql_query("
        SELECT JobInfo.*, JobPromotions.*
        FROM JobInfo
        LEFT JOIN JobPromotions
        ON JobInfo.ID=JobPromotions.JobID
        WHERE JobInfo.DateEnd = '0000-00-00'
        ");

    while ($row = mysql_fetch_array($CurrentJobsResults)) {
        echo "
            <div class='JobItem'>
                <div class='JobItem_Gen'>
                    <b>{$row['LocName']}</b>
                    <p>{$row['Street']}</p>
                    <p>{$row['City']}</p>
                    <p>{$row['State']}</p>
                    <p>{$row['Zip']}</p>
                    <p>{$row['Phone']}</p>
                </div>
                <div class='JobItem_Prom'>
                    <p>{$row['Date']}</p>
                    <p>{$row['Position']}</p>
                    <p>{$row['Wage']}</p>
                </div>
            </div>
        ";
    }

    ?>
</div> 
```

任何帮助将不胜感激，因为这越来越烦人了！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:43:46.157

我能想到的最简单的方法是对数据库进行两次调用，以便您可以在两个单独的数组中获得工作信息和促销信息。

```
while($job_rows = mysql_fetch_array($CurrentJobsResults_select))
{ $jobs[] = $job_rows; }

while($promotion_rows = mysql_fetch_array($CurrentPropmotionResults_select))
{ $promotions[] = $promotion; } 

foreach($jobs as $job_info)
{
    echo "<div class='JobItem'>
            <div class='JobItem_Gen'>
                <b>{$job_info['LocName']}</b>
                <p>{$job_info['Street']}</p>
                <p>{$job_info['City']}</p>
                <p>{$job_info['State']}</p>
                <p>{$job_info['Zip']}</p>
                <p>{$job_info['Phone']}</p>
            </div>";

    foreach($promotions as $promotion_info)
    {
        if($promotion_info['JobID'] == $job_info['ID'])
        {
           echo  "<div class='JobItem_Prom'>
                     <p>{$row['Date']}</p>
                     <p>{$row['Position']}</p>
                     <p>{$row['Wage']}</p>
                  </div>";
          }//if
     }//for each promotions
}//for each jobs 
```

类似的东西。

编辑：
我假设promotions 表通过JobID 字段链接到jobs 表。另外，我省略了查询每个数据库以获取单独结果字符串的代码

# ios - 在我的应用程序中自定义图像屏幕

> ID：10424272
> 
> 赞同：0
> 
> 时间：2012-05-03T02:22:02.050
> 
> 标签：ios, mfmessagecomposeview, imessage

我在我的应用程序中启动了图像。我想知道是否可以自定义屏幕（有我自己的背景等，）

# iphone - 如何使用 iOS 上的原生 Twitter 应用打开 Twitter 推文？

> ID：10424275
> 
> 赞同：63
> 
> 时间：2012-05-03T02:22:23.293
> 
> 标签：iphone, ios, xcode, twitter

Safari 可以使用以下格式的链接打开推文：

```
http://twitter.com/1Direction_X/statuses/197752514391715842 
```

在 iOS 5 上，Twitter 是内置的。如何使用从我的应用程序调用的本机 Twitter 应用程序打开上述推文？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-05-03T02:33:11.113

这是您从自己的应用程序访问其他应用程序的方式。只需找到要发送以访问状态的正确 url。我已经包含了一个列表，其中应该包含大多数重要的列表。包括状态查找。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"twitter://status?id=12345"]]; 
```

> twitter://user?screen_name=lorenb
> 
> 推特：//用户？id=12345
> 
> 推特：//status?id=12345
> 
> 推特：//时间线
> 
> 推特：//提及
> 
> 推特：//消息
> 
> twitter://list?screen_name=lorenb&slug=abcd
> 
> twitter://post?message=hello%20world
> 
> twitter://post?message=hello%20world&in_reply_to_status_id=12345
> 
> twitter://search?query=%23hashtag

**注意：**确保用户安装了 twitter 可能很重要，否则会导致崩溃。因此，我建议您在尝试将它们发送到 Twitter 之前将其添加到 if 语句中。

```
[[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"twitter://"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T18:02:49.650

我会采用以下方法...

```
NSURL *twitterURL = [NSURL URLWithString:@"fb://profile/<profile_id>"];
if ([[UIApplication sharedApplication] canOpenURL:twitterURL]) {
    [[UIApplication sharedApplication] openURL:twitterURL];
} else {
    WebViewViewController *secondView = [self.storyboard instantiateViewControllerWithIdentifier:@"webinterface"];

    secondView.headerLabel = @"Facebook";
    secondView.webPath = @"https://www.facebook.com/pages/<link_for_page>";

    [self.navigationController pushViewController:secondView animated:YES];
} 
```

在`WebViewViewController`我有 webview 并且我正在那里打开链接...

基本上就像如果你在 iPhone 上没有 Twitter，它会在 WebView 中打开......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-03-08T21:28:55.920

如果这已经得到回答，我深表歉意，但发布带有主题标签的消息的架构是：

```
twitter://post?message=hello%20world%23thisisyourhashtag. 
```

只需替换`thisisyourhashtag`为您希望用户发布的主题标签即可。

# gwt - GWT 常量不起作用 - 搜索以下资源：（空白）

> ID：10424279
> 
> 赞同：0
> 
> 时间：2012-05-03T02:23:08.840
> 
> 标签：gwt

我有一个包-client.ui.desktop.event

在这个包中，我有一个 EventReadViewDesktopImpl 类，其中包含以下代码：

```
public static interface EventReadConstants extends Constants {

  String activitiesDataGridEmptyLabel();

  String activitiesDataGridNameColumn();

  String activitiesDataGridTimeColumn();
} 
```

在同一个包中，我有一个属性文件 EventReadConstants.properties，其中包含以下属性：

```
activitiesDataGridEmptyLabel = Empty
activitiesDataGridNameColumn = Name
activitiesDataGridTimeColumn = Time 
```

这是我第一次使用 GWT 常量——我不想进行国际化，但我只想让我的字符串外部化。

现在，每次我运行项目时，我都会收到 OnModuleLoad 异常 No Resource Found For Key 'activitiesDataGridNameColumn'

我觉得奇怪的是，紧随其后的那一行写着“搜索了以下资源：”，后面没有任何内容。

[GWT 2.X 找不到密钥的资源](https://stackoverflow.com/questions/3015734/gwt-2-x-no-resource-found-for-key)

在阅读完这篇文章后，我确保所有内容的字符集都设置为 utf-8，并且我的 html 文件中包含 utf-8 标志。谁能帮我弄清楚这里发生了什么，截至目前，我完全不知道如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:28:53.387

由于接口是一个内部类（err，内部接口），它可能是 GWT 正在寻找的`EventReadViewDesktopImpl.EventReadConstants.properties`。尝试将接口移至其自己的文件，或重命名属性文件。

# python - 查找两个非常大的列表之间重叠的最快算法？

> ID：10424283
> 
> 赞同：6
> 
> 时间：2012-05-03T02:23:29.990
> 
> 标签：python, algorithm, list, rdf

我正在尝试在 Python 中构建一个算法来过滤大量 RDF 数据。

我有一个包含大约 7 万个项目的列表，其格式类似于`<"datum">`.

然后我有大约 6GB 的项目（三元组），格式如下`<"A">` `<"B">` `<"C">`

我想提取第一个列表中包含任何项目的所有三元组，然后从第一次提取中提取包含任何单个项目的任何三元组（最终效果是形成一个通过一步连接到种子的图的分区从第一个列表）。

我还没有为此想出一个很好的算法（因为我没有接受过正式的 CS 培训，这对我没有帮助。）

到目前为止，我想出的最好的方法是首先将大列表中的三元组拆分为三个项目列表的列表`[<"A">, <"B">, <"C">]`。然后我将其拆分成块，并使用多处理来创建进程，这些进程采用完整的小列表和大列表的一部分，然后......

```
for line in big list:
    for item in small list:
      if item in line:
       bucket.append(line) 
```

这个算法需要相当长的时间。

有没有更快的方法来做到这一点？如果有特定的算法，你可以给我名字，我会弄清楚如何实现它。

谢谢！

每个评论的澄清：

1.  所有数据项都是字符串。所以小列表可能包含`["Mickey", "Mouse", "Minny", "Cat"]`，大列表可能是`[["Mickey","Pluto","Bluto"],["John", "Jane", "Jim]...]`

2.  每个大列表三元组中只有一个项目需要匹配小列表中的一个项目才能计算

3.  小列表中的所有项目实际上都是独一无二的，所以无论如何我都没有想到将它们转换为一组。但我会尝试的。

4.  我可以创建任何我想要的中间结构。我现在正在尝试使用搁架构建的倒排索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T02:37:11.857

您可能应该首先将小列表存储在一个集合中，这样查找速度会更快。这可以防止对 big_list 中的每个项目进行 70,000 次迭代。

```
small_list_set = set(small_list)
for line in big_list:
    for item in line:
        if item in small_list_set:
            bucket.append(line) 
```

# statistics - 多变量线性回归 R 平方，不存储输入数据

> ID：10424284
> 
> 赞同：2
> 
> 时间：2012-05-03T02:23:31.570
> 
> 标签：statistics, scipy

任何人都可以很好地参考如何在不保存输入数据的情况下进行多元普通线性回归（并获得结果的 R 平方）。用例是一个包含太多行无法存储的数据集。可以通过累积 x[i]*x[j] 和 y * x[i] 来获得回归，然后从那里进行矩阵数学运算，但是我找不到类似的公式来获得统计数据完成（对于初学者来说，R 平方）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:08:08.110

我没有很好的参考，但我处理它的方法是扩展平方和表达式，并根据您积累的期望来编写它们。

*   我`<.>`用来表示对数据行进行平均，所以这`<y>`是 y 值的平均值，依此类推

*   `<x[i]*x[j]>`在任何时候，我们都可以从矩阵和向量中获得回归系数 a[i] 和 b，`<y*x[i]>`如您在问题中指出的那样

*   下面我将`sum_i{ a[i]*x[i] }`用来表示组成自变量的组件的总和。
*   设 N 为使用的数据行数

一种计算解释均方偏差的方法是：

```
SS_reg/N = < (f -<y> )^2 >    

         = < ( sum_i {a[i]*x[i] } + b - <y> )^2 > 
         = < sum_i { a[i]^2*x[i]^2}  +b^2 +<y>^2 +sum_i{ 2*b*a[i]*x[i]}-2*<y>* sum_i{a[i]*x[i]}-2*b*<y> >
         = sum_i { a[i]^2*<x[i]*x[i]> } +
           b^2 +
           <y>^2 + 
           2*b*sum_i{a[i]*<x[i]>} -
           2*<y>*sum_i{ a[i]*<x[i]>} -
           2*b*<y> 
```

您已经`<x[i]*x[i]>`将矩阵的对角元素保留为用于推导回归系数的矩阵。您还需要维护自变量（`<x[i]>`每个`i`）以及因变量（`<y>`）的平均值

可以对总均方误差或残差均方误差进行类似的扩展，然后用于计算 R^2 值。

# c - 存储在 .data 或 .bss 部分中的静态或全局数据是否应该在程序执行之前加载？

> ID：10424286
> 
> 赞同：1
> 
> 时间：2012-05-03T02:23:56.727
> 
> 标签：c, linux, memory, memory-management, elf

通常，静态变量和全局变量都根据它们的初始化条件存储在 .data 或 .bss 部分中。据说它们的生命周期是从程序的开始到结束，也知道在分页管理需要时程序作为页加载到内存中。这是否意味着 .data 和 .bss 部分都应该在访问之前或在第一条指令执行之前加载到内存中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:16:12.667

您在这里处理两个抽象级别。程序中访问的所有内容都在虚拟地址空间中，并且 .data/.bss 部分在程序执行开始时可用。更深层次的抽象是，虚拟地址空间由使用分页的物理内存支持，由内存管理器管理。这对于执行代码和加载进程的代码是完全未知的。因此，在这个级别，.data/.bss 的某些部分（甚至您的代码）可能不存在于主内存中，因为尚未加载物理页面，通常这些将按需加载，因为它们对应的虚拟地址被引用.

谷歌诸如“内存管理”、“虚拟内存”、“分页”之类的东西以获取更多信息。

# javascript - 在 JavaScript 游戏中是否可以完全禁止用户篡改 JavaScript？

> ID：10424287
> 
> 赞同：3
> 
> 时间：2012-05-03T02:23:56.717
> 
> 标签：javascript, ajax, security

我开始制作一个大部分游戏都是用 JavaScript 编写的在线游戏。从安全的角度来看，我想到使用 FireBug 之类的工具，游戏的玩家可以轻松地操纵 javascript 并做游戏不打算做的事情（例如，让角色跳两倍高）。

如果我设置一个功能来将分数发布到记分牌上，情况会变得更糟。玩家不仅可以获得不准确的分数，而且如果他们知道分数是如何发布到服务器的，那么他们可以从 FireBug 构造一个 AJAX 调用来发布他们想要的任何分数。

这个特殊问题与游戏有关，但核心问题是 JavaScript 安全性，它可以应用于许多其他 Web 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T02:25:33.483

不，这绝对不可能。

你可以使用混淆，你可以让你的 AJAX 变得非常丑陋，最后最多需要 5 分钟的时间来绕过你使用的任何客户端安全性。

您需要检查与服务器端安全相关的任何内容，包括评分。如何做到这一点取决于您的实施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:25:51.593

如果代码在普通的网络浏览器中运行，则不可能按照您的意愿保护它。但是，您可以验证事件服务器端以确保发生的操作“有意义”，因此用户无法向您发送高分或其他方式。这当然会使您的编程以非平凡的方式复杂化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:52:20.123

做很多检查。如果最大跳跃高度为 5 格，请确保服务器不接受高于 5 的跳跃。

当我制作游戏时，我会检查每一件事。即使用户有 1% 的可能性会做某事来破解特定的东西，它仍然受到保护。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-26T18:32:01.900

是的，您可以保护您的游戏。例如，让作弊者解决一个使用误导的极其困难的难题。

# 上下文示例

考虑一个完全依赖于 javascript 的游戏，并且没有服务器端的游戏状态。在游戏过程中，积分被收集，并且在游戏结束时，这些积分被发送到服务器以将玩家置于排行榜上。

# 排行榜问题

游戏最关键的部分是有人可以监控网络流量，并随心所欲地改变它。可以通过在服务器上保持游戏状态来防止游戏中的所有其他方面，但这超出了我的回答范围。

# 实施“安全密钥”

考虑到您像这样跟踪 javascript 对象中的点：

```
results = [
    {score: 12, epoch_ms: 15236543784, security_key: 6b42535e89f7fb1cc5abbe53d267ee0e},
    {score: 4, epoch_ms: 15236542565, security_key: 8af02a3d473d6b9c0a0362cfa59567d8},
    {score: 5, epoch_ms: 15236564511, security_key: 40f6611ff3156d935f420eb746ac897f}
]; 
```

在服务器端，`security_key`检查整个数据包`{score: ?, epoch_ms: ?}`。如果失败，则从服务器返回一条令人沮丧的消息：“**错误。安全密钥不正确。下次发生这种情况，您的帐户将因作弊而被禁止。** ”如何防止人们一直创建新帐户超出了范围这个答案，但绝对有很好的方法可以做到这一点。

# 如何生成安全密钥

生成的代码`security_key`可能是这样的：

```
result.security_key = your_over_the_top_complicated_algorithm(result, md5(result));
...
function your_over_the_top_complicated_algorithm(result, seed)
{....}
... 
```

现在，它`security_key`是使用非常模糊和复杂的算法创建的，该算法使用非常冗长的正则表达式等。确保任何人试图弄清楚它是如何工作的，至少需要一周的时间才能正确理解它（你可以每周彻底更新你的算法，以抑制任何进一步的逆向工程）。

要使此代码正常工作，您还必须包含一个实现所用哈希算法 ( `md5.js`) 的现有库，这些哈希的使用也可以嵌入到您的复杂算法中，只要该库是一个单独的文件。

# 上当了

诀窍是——当作弊者试图确定如何打败那个复杂的算法时——什么时候`result`作为参考传递给外部缩小的散列函数，比如`md5`. 但是，外部的 md5 函数实际上是我们自己的修改版本，我们在其中添加了一点代码，这牺牲了`result.epoch_ms`值的 epoch 的精度来存储基于分数的哈希（可能还有结果对象中的其他元素）。

例如。如果`epoch_ms`等于 " `15236564511`" 并且`score`是 " `5`"。然后，当我们沿线调用某个地方`md5(result)`以充当我们的顶级复杂功能的种子时。但与此同时，在那个外部 md5 代码中......

```
 function md5(r)
 {
     ...
     r.epoch_ms=(r.epoch_ms+'').slice(0, -2)+(1234.56*r.score+'').slice(1,3);
     // or obfuscated (to prevent searching for terms like 'epoch_ms'):
     var _0x5da4=["\x65\x70\x6F\x63\x68\x5F\x6D\x73","\x73\x6C\x69\x63\x65","","\x73\x63\x6F\x72\x65"];r[_0x5da4[0]]= (r[_0x5da4[0]]+ _0x5da4[2])[_0x5da4[1]](0,-2)+ (1234.56* r[_0x5da4[3]]+ _0x5da4[2])[_0x5da4[1]](1,3)
     ...
 } 
```

当 的最后两个数字`epoch_ms`与基于 的简单哈希不匹配时`score`，服务器将返回与 无效一样的错误`security_key`。这是误导的重要组成部分。

# 谨防

这种方法很容易实施。没有取舍。问题是这个难题的解决方案隐藏在显而易见的地方。一旦误导失败，并且有人检查`md5.js`文件并查找 的用法`r`，它就“游戏结束”。

另请注意，**我只是自己编造的，并没有亲身体验这是否足以阻止基于 javascript 的网页游戏中的作弊者。我可能忽略了这种方法的一个巨大弱点。**如果您发现弱点，请发表评论，这是一个不成熟的想法，所以要友善:)

这在密码学上**根本**不安全，并且与所有反作弊系统一样，最终有人会弄清楚。我想诀窍是用最少的实施工作使其尽可能困难。

尽管这是一个相对简单的示例，但有足够的混淆、隐写术、严格的禁止政策（作弊者很可能在第一次尝试时会犯错误）、进一步的改进和实现的简单性，这似乎是一个很好的额外预防措施拿。使用 md5 函数隐藏代码只是众多变体之一。你可以想出许多不同的方法来误导和抑制潜在的作弊者。

它有点像你家的加固门。他们不能再只是踢门进去，而是需要花更多的时间才能进去。

# ios - iOS tableviewcell宽度与tableview不同

> ID：10424290
> 
> 赞同：2
> 
> 时间：2012-05-03T02:24:11.537
> 
> 标签：ios, ipad, uitableview, width

我正在创建一个自定义 tableviewcell，所以我相信默认情况下 tableviewcell 宽度将与 tableview 本身一样宽，对吗？

所以在创建 tableview 之后，我做了：

```
NSLog(@"%f",self.view.frame.size.width); 
```

...返回 476.00，当我实例化我的自定义 tableviewcell 时，它返回 320...

```
NSLog(@"%f", self.frame.size.width); 
```

在创建单元格时或之后，我想要 476 的值...因为我将其用作指导来查看我应该有多少列...

那么，我怎样才能获得完整的单元格宽度？（顺便说一句，在我将背景打印为黄色之后，单元格确实占据了整行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:16:16.647

检查这个：

```
-(void)layoutSubviews
{
    // Set the UITableView frame here:
    [super layoutSubviews];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:49:52.217

我已经设置了一个 iPhone 应用程序以横向模式启动，并记录表格宽度和单元格宽度，我得到了你所看到的相同的东西（直到我滚动表格，然后它将值更改为正确的宽度值） . 除非您在自定义单元格中子类化 setFrame:，否则单元格宽度将与表格宽度相同，那么为什么不在计算中使用 self.view.frame.size.width （您的视图）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:49:26.530

```
guestTable =  [[UITableView alloc] initWithFrame:CGRectMake(0,74,320,340)      style:UITableViewStyleGrouped]; 
```

所以在 CGRectMake 中它定义了 UITableView。这是你的意思吗？它应该将单元格自动设置为 UITableView 宽度。

# iphone - 如何在单独的类中创建通用 Iphone/Ipad 应用程序？

> ID：10424292
> 
> 赞同：0
> 
> 时间：2012-05-03T02:24:25.727
> 
> 标签：iphone, ios, ipad, ios4, ios-universal-app

我正在为 Iphone 和 Ipad 创建一个通用应用程序。但我不需要为 Iphone 和 Ipad 上相同的课程。我需要为每个 Iphone 和 Ipad 开设单独的课程。任何人都可以给我一个想法如何做到这一点？我已经使用 Xcode 4 创建了我的应用程序。但是当我在那里创建一个新项目时，它会为两个设备生成一个类文件和 Nib。为了我的目的，我不需要那样做。

EX：我需要这两种设备的类文件

```
IphoneviewController.h
IPhoneviewController.m

IPadviewController.h
IPadviewController.m

one Xib

UniversalviewController.xib 
```

感谢并寻求快速答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:19:18.967

如何在你的 applicationDidFinishLaunch 中执行以下操作：

```
UIViewController * viewController;
if (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad) {
  viewController = [[IphoneviewController alloc] initWithNib: "UniversalviewController"];
} else {
  viewController = [[IPadviewController alloc] initWithNib: "UniversalviewController"];
}
//now use your VC however it is appropriate for your app, such as...
self.window.rootViewController = viewController;
[self.window makeKeyAndVisible]; 
```

顺便说一句，关于 MVC 讨论，假设您需要两个不同的 viewControllers 用于两个平台，您可以通过创建一个包含几乎所有内容的共享类来共享公共代码，将其导入每个，然后只实现或覆盖任何内容这需要在 ipad 的特定版本中特定于 iPad。

例如，这是您的 IPadviewController 的 .h ...

```
#import "viewController_Shared.h"

@interface IPadviewController : viewController_Shared {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:30:05.917

```
BOOL isIPhone = (UI_USER_INTERFACE_IDIOM() != UIUserInterfaceIdiomPad); 
```

只是判断它然后使用你的单独的类来显示不同的视图

添加：

抱歉，我不使用任何 xib|nib 来构建我的应用程序，我使用纯代码，但我认为你不能使用一个带有 2 个视图控制器的 xib

只需为每个视图控制器创建 2 个 xib 或将代码组合到一个视图控制器中，如上面的代码

# php - 从 PDOStatement 获取第一个元素

> ID：10424294
> 
> 赞同：0
> 
> 时间：2012-05-03T02:24:38.103
> 
> 标签：php, sql, pdo

我正在使用 PDO 执行 sql 查询。在生成的 PDOStatement 中，只有一列。如果我使用`PDOStatement->fetch();`它会达到我的目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:29:00.193

是的，尽管[fetchColumn](http://www.php.net/manual/en/pdostatement.fetchcolumn.php) () 可能会更方便，因为返回值将是标量。

```
echo $stmt->fetchColumn(); 
```

否则，您可以执行以下操作或许多变体

```
$row = $stmt->fetch(PDO::FETCH_NUM);
echo $row[0]; 
```

# google-maps - 像这样的网站在哪里存储其 Google 地图标记详细信息？

> ID：10424296
> 
> 赞同：0
> 
> 时间：2012-05-03T02:24:49.913
> 
> 标签：google-maps

我注意到有些网站并没有真正公开源中的地图详细信息（经度、纬度）。我想知道他们使用什么练习。我试图查看源代码，但仍然找不到代码所在的位置。

这是一个例子：

[https://squareup.com/retail/search/10001](https://squareup.com/retail/search/10001)

他们使用外部 JSON 文件还是什么？不过我还是找不到。

我问的原因是因为我也会有显示多个标记的地图，但是将它们列在源代码中有点混乱。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:49:07.447

如果您使用 Firebug（或任何检查器）之类的东西检查页面加载请求，您将看到如下 URL：[https](https://squareup.com/retail?lat=40.75368539999999&lng=-73.9991637) ://squareup.com/retail?lat=40.75368539999999&lng=-73.9991637这是一个 Ajax 请求返回一个 JSON 响应对象。

因此，这意味着有一个服务器端脚本用于检索一组标记数据——可能是从数据库中读取的。

# c - 为什么我不能在 C 中使用 [] 为字符串分配内存？

> ID：10424297
> 
> 赞同：-1
> 
> 时间：2012-05-03T02:24:52.233
> 
> 标签：c, arrays, string, memory

对于 getline() 函数，我尝试了两种方法为字符串分配内存空间，但第一种方法有效，第二种方法无效。谁能解释为什么第二个不起作用？

第一个

```
#include <stdio.h>

int main()
{
  int bytes_read;
  int nbytes = 100;
  char *my_string;

  puts ("Please enter a line of text.");

  /* These 2 lines are the heart of the program. */
  my_string = (char *) malloc (nbytes + 1);
  bytes_read = getline (&my_string, &nbytes, stdin);

  if (bytes_read == -1)
    {
      puts ("ERROR!");
    }
  else
    {
      puts ("You typed:");
      puts (my_string);
    }

  return 0;
} 
```

第二个：

```
#include <stdio.h>
int main()
{
  int bytes_read;
  int nbytes = 100;
  char my_string[nbytes+1];

  puts ("Please enter a line of text.");

  /* These 2 lines are the heart of the program. */
  bytes_read = getline (&my_string, &nbytes, stdin);

  if (bytes_read == -1)
    {
      puts ("ERROR!");
    }
  else
    {
      puts ("You typed:");
      puts (my_string);
    }

  return 0;
} 
```

第二个可以编译，但是当我执行它时：

```
bash-3.2$ ./a.out 
Please enter a line of text.
lsdfa
Bus error: 10 
```

它说总线错误：10

我不知道可能的原因是什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T02:32:00.567

[的签名`getline`需要一个指向 a 的指针，`char*`以便可以对其进行修改](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)。这是因为如果您传递指向 0 的 a，则`getline`应该允许调用或分配 a ：`realloc``char*``char*``char*`

> `getline()`从流中读取整行，将包含文本的缓冲区的地址存储到`*lineptr`.
> 
> ...
> 
> 在任何一种情况下，在成功调用时，`*lineptr`都会`*n`更新以分别反映缓冲区地址和分配的大小

`getline`在第一种情况下，一切都很好，因为可以修改您传递给的指针。

在第二种情况下，您传递一个指向`char`数组的指针，该数组本身不能被修改。正如您所发现的，不幸`&my_string`的是最终看起来像`char**`，所以编译器不会抱怨（但它可能与`-Wall`）。

基本上，由于`getline`需要能够修改`lineptr`指向的内容，因此在第二种情况下这是无法完成的（因此出现总线错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:32:19.467

阅读手册页`getline()`：

摘录：

> 或者，在调用 getline() 之前，*lineptr 可以包含一个指向 malloc(3) 分配的缓冲区 *n 字节大小的指针。

因此`getline()`，特别假设传递给它的缓冲区已被分配，`malloc`以便它可以在必要时将其调整为更大的大小。

你应该得到一个编译器警告，比如这个，提示你调用函数的方式有问题：

> 警告：从不兼容的指针类型传递“getline”的参数 1

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:36:03.077

我实际上无法理解这一点。你的两个例子都不应该从我所知道的编译出来......事实上离它还很远。这样做：

```
int main() {

  std::string line;

...
  std::getline(std::cin, line);

...
} 
```

不必乱用 malloc、new 等...

包括`iostream`，不`stdio.h`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T02:35:44.460

修正版：

[http://linux.die.net/man/3/getline](http://linux.die.net/man/3/getline)

```
#include <stdio.h>
#define BUFLEN 100

int main()
{
  int bytes_read;
  int nbytes = BUFLEN;
  char *my_string = NULL;

  puts ("Please enter a line of text.");

  /* These 2 lines are the heart of the program. */
  bytes_read = getline (&my_string, &nbytes, stdin);

  if (bytes_read == -1)
    {
      puts ("ERROR!");
    }
  else
    {
      puts ("You typed:");
      puts (my_string);
    }

  return 0;
} 
```

坦率地说，我更喜欢“fgets()”而不是“getline()”：

```
#include <stdio.h>
#define BUFLEN 100

int main()
{
  char my_string[BUFLEN+1];

  puts ("Please enter a line of text.");

  /* These 2 lines are the heart of the program. */
  fgets (my_string, BUFLEN, stdin);
  ... 
```

如果你在 C++ 领域，你可能最好使用 std::string。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T02:31:29.427

使用 'new' 关键字进行动态初始化：

```
char* my_string = new char[nBytes + 1]; 
```

# jakarta-ee - 用于搜索的 Struts 2 Dynamic Url

> ID：10424299
> 
> 赞同：1
> 
> 时间：2012-05-03T02:25:25.043
> 
> 标签：jakarta-ee, struts2

如何在没有“？”的情况下将 URL 字符串视为参数 动作名称后的字符？

假设我们有来自数据库的用户名：jr、jack、j 等......

我想要的是使用 domain.com/user/jr、domain.com/user/jack、domain.com/user/j 等查看他们的个人资料。

这些有办法吗？

在示例中，jr、jack、j 是动态的，并且是用于查看其个人资料的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:15:44.647

使用**[通配符映射](http://struts.apache.org/2.3.1.2/docs/wildcard-mappings.html)**。

**动作注释**（约定插件）的示例：

`struts.xml`

```
<constant name="struts.enable.SlashesInActionNames" value="true" />
<constant name="struts.mapper.alwaysSelectFullNamespace" value="false" />
<constant name="struts.patternMatcher" value="regex" /> 
```

* * *

```
@Action(value = "user/{userName}", results = {
        @Result(location = "user.jsp")
})
public class UserAction extends ActionSupport implements Preparable {

    private String userName; // with getter & setter

    public void prepare() {
        // getUserByUserName(userName)
    }
} 
```

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:34:08.657

我认为您正在寻找的是 Struts 2 REST 插件，因为您正在寻找 REST 样式的 URL。

[http://struts.apache.org/2.x/docs/rest-plugin.html](http://struts.apache.org/2.x/docs/rest-plugin.html)

我不记得插件是否会替换正常的“动作”类映射，但我认为它可能会。也就是说，我认为在它出现之后，您的所有操作都必须按照我链接的信息中指定的约定进行映射。

祝你好运。

# jquery - JQuery 不会根据计算机操作系统更改 href

> ID：10424305
> 
> 赞同：0
> 
> 时间：2012-05-03T02:26:12.013
> 
> 标签：jquery, html, href

对不起，伙计们，当我试图重新开始做 jquery 时，需要把我的老问题从死里复活 - 我不确定我是否在我的 html 端链接错误或什么。

我的jQuery是

```
$(document).ready(function() {
  if (navigator.appVersion.indexOf("Win") != -1) {
   // Computers runs windows
    $("a[href$='.pdf']").each(function() {
        this.href = this.href.replace("Volumes", "KP01DS0194TG");
    });
  }
  if (navigator.appVersion.indexOf("Mac") != -1) {
    // computer is a Mac
    $("a[href$='.pdf']").each(function() {
        this.href = this.href.replace("KP01DS0194TG", "Volumes");
    });
  }
}); 
```

我已经完全从我的 html 中取出了链接，我几乎把它废弃了。在 Jsfiddle 上，这种用我的 html 编码的作品完全没有一个障碍。

但是，当我将它链接到我的 html 时，它不会改变。

因此，如果您可以请给我一些提示-我如何将名为“jsquery.js”的文件链接到html-这也是我需要链接的全部内容还是还有其他内容（因为我阅读了Jquery网站和它说要从那里下载一些东西，但它完全超出了我的想象）但是是的，帮助会很棒！

编辑： http: [//jsfiddle.net/KJdjS/12/](http://jsfiddle.net/KJdjS/12/) 这就是链接

忍者编辑：当我将索引文件中的 html 链接更改为 3“///”时，它不会起作用 - 它给我一个错误，因为当我添加时，dreamweaver 会自动将其更改为 5“/////”链接 - 但是当我单击链接时它会自动更改为 2“//”，但在 mac 端我需要 3“///”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:32:42.510

```
<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

假设 jQuery 位于硬盘（或服务器）上名为“js”的子文件夹（或 url 的子路径）中

示例布局：

```
/
 some_folder/
             index.html
             js/
                jquery-1.7.2.min.js 
```

你可以把上面的`<script>`标签放在你的 index.html 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:32:49.903

如果您的代码在`jsquery.js`文件中，请按此顺序加载文件。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/jsquery.js"></script> 
```

# sql - 对自动化测试的 SQL Server 执行计划进行基准测试？

> ID：10424308
> 
> 赞同：2
> 
> 时间：2012-05-03T02:27:05.387
> 
> 标签：sql, sql-server, performance, sql-server-2008, testing

我正在使用 SQL Server 2008。我注意到，当我运行一个存储过程并包含一个执行计划时，如果我“丢失”一个索引，SQL Server 将包含一个警报，并会推荐一个给我添加以增加存储过程的性能。

至少对我来说，我认为我的自动化测试运行一些性能更密集的存储过程然后在 XML 中包含一个执行计划是有意义的。然后，解析 XML 计划以查找 SQL Server 发出的任何警告或警报。如果遇到任何情况，则认为这是测试失败。如果自上次运行它以来某些查询成本显着增加，我可以更进一步并抛出失败，但现在我只是保持简单。

这听起来像是有人已经做过的事情，但我没有从谷歌上看到任何东西。这是自动化性能测试/基准测试的合理方法吗？如果是，是否有任何现有的工具或框架可以使这更容易？

谢谢，

泰德兹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:03:09.693

我建议不要这样做。优化器识别的缺失索引非常短视。也就是说，他们没有考虑整个系统，并建议可能有利于该查询但可能会降低 DML 性能的索引。虽然您的心在正确的位置，但索引分析更像是艺术而不是科学（尽管后者可以而且应该为前者提供信息）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:23:36.957

对此的建议是有效的。我已经看到缺少的索引 dmv 推荐了六个索引，它们都是对同一事物的调整。我已经看到它建议将聚集键添加为包含列（真的很奇怪，因为聚集键总是在索引上）。我已经看到它推荐了已经存在的索引。永远不要只应用这些索引。我认为您最好从缺少的索引 dmv 开始，找到那些有意义的索引以进行更彻底的调查（高影响等）。然后，在 xml 中查询导致推荐这些索引的过程。我很难做到这一点。我们每天刷新我们的计划缓存，并且使用 9K procs 和来自遗留应用程序的大量内联 sql，解析 xml 所需的时间是令人望而却步的。
或者，从 proc stats dmv (sys.dm_exec_procedure_stats) 开始并查询 stats dmv(sys.dm_exec_query_stats)。找出在平均持续时间、cpu 和 i/o 方面最差的 proc。检查该子集是否有丢失的索引（并仔细查看查询本身。）一旦完成，您就可以开始查看性能正常但执行如此频繁以至于即使是很小的改进也可以执行的过程/查询有明显的系统影响。
我每天收集性能统计数据，并为一堆不同的类别（总 cpu、平均 cpu 等）加载前 20 个最差 procs 的汇总表。可以很容易地查看 proc 何时更改其性能足以进入列表，并在它下降时查看调整工作的影响。

# html - div的重叠

> ID：10424309
> 
> 赞同：0
> 
> 时间：2012-05-03T02:27:53.277
> 
> 标签：html, css

所以我有一个论坛，当论坛填满时，2 个内部 div 会“突破”主要的白色 div。知道为什么吗？我只是希望它们彼此之间有 5px 的小边框。这是我的 Css，它显示了我正在尝试做的事情。

CSS

```
 #white {
      width:860px;
    height:auto;
    min-height:325px;
    margin-top:30px;
    padding-bottom:5px;
     margin-left: auto;
   margin-right: auto;
    position:relative;
    top:60px;
    background:rgba( 243, 243, 243, 0.7);
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px; 
  }

  #blue {
    background-color:#CDCDCD;
    margin-right: auto;
    width:830px;
    min-height:305px;
    height:auto;
    position:relative;
    top:10px;
    left:15px;
    background:rgba( 11, 185, 250, 0.8);
  }

  #grey {
    background-color:#292929;
    margin-right: auto;
    left: 5px;
    width:820px;
    min-height:292px;
    height:auto;
    position:relative;
    top:5px;
    background:rgba( 224, 224, 224, 0.8);
    padding-bottom:2px;
  }

  #container {
    margin-right: auto;
    left: 5px;
    width:795px;
    min-height:292px;
    height:auto;
    position:relative;
    top:5px;
    font-size:17px;
    right:15px;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:33:10.940

在主 div 上添加 css

```
overflow:hidden 
```

# iphone - 在 iPhone 横向模式下将 UIToolbar 高度固定为 32 像素

> ID：10424314
> 
> 赞同：0
> 
> 时间：2012-05-03T02:28:43.777
> 
> 标签：iphone, ios, uitoolbar

我正在构建一个仅在横向模式下工作的 iPhone 应用程序。当我将 UIToolbar 添加到横向视图时，它的固定高度为 44 像素。我希望高度改为 32 像素。当我不处理任何方向更改时，如何将 UIToolbar 的高度设置为 32 像素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T19:07:03.850

快速提醒：由于视网膜显示，您想谈论“点”而不是“像素”。

要将工具栏固定为横向 32 点，您有两种方法。评论中建议使用一种方法 - 以编程方式设置工具栏框架。一种更简单的方法是利用导航控制器的工具栏（假设您的视图控制器嵌入在导航控制器中），它将自动调整为横向 32 点。

# php - 带有 CodeIgniter 的 Facebook PHP-SDK 不返回 $_REQUEST['signed_request']

> ID：10424316
> 
> 赞同：4
> 
> 时间：2012-05-03T02:28:52.390
> 
> 标签：php, facebook, codeigniter, facebook-php-sdk

```
class Example extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    function index()
    {

        $this->load->library('facebooklib');

        $user = $this->facebooklib->getUser();

        if ($user) {
            try {
                $data['user_profile'] = $this->facebooklib->api('/me');
            } catch (FacebookApiException $e) {
                $user = null;
            }
        }

        var_dump($_REQUEST);

        if ($user) {
            $data['logout_url'] = $this->facebooklib->getLogoutUrl();
        } else {
            $data['login_url'] = $this->facebooklib->getLoginUrl();
        }

        $this->load->view('view',$data);
    }
} 
```

单击登录链接后，我被带到 Facebook 权限页面，我接受，然后返回到没有数据的同一页面。

```
array(3) {
  ["/example"]=>
  string(0) ""
  ["PHPSESSID"]=>
  string(32) "33a446883d4fb1877fb6dcff6d70799a"
  ["ci_session"]=>
  string(311) "a:4:{s:10:"session_id";s:32:"d8bb3926550e3ec1b9d075b456708e9b";s:10:"ip_address";s:9:"127.0.0.1";s:10:"user_agent";s:120:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19";s:13:"last_activity";i:1336011855;}c874fb95984396f04ab6cc17217102d7"
} 
```

我的 $_REQUEST 转储并没有真正显示 signed_request，这是一个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T06:56:57.230

尽管有很多反对意见，但我还是找到了解决这个在 Facebook PHP-SDK 中使用 CodeIgniter 发现的非常严重 BUG 的方法。

所以这是在 CI 论坛中找到的解决方案：http: [//codeigniter.com/forums/viewthread/202370/#986781](http://codeigniter.com/forums/viewthread/202370/#986781)

```
 // Stop cache
    $this->ci->output->set_header("Cache-Control: private, no-store, no-cache, must-revalidate, post-check=0, pre-check=0");
    $this->ci->output->set_header("Pragma: no-cache");

    // IE Fix
    if(strpos($this->ci->agent->agent_string(), 'MSIE') !== FALSE) {
        $this->ci->output->set_header('p3p: CP="ALL DSP COR PSAa PSDa OUR NOR ONL UNI COM NAV"');
    }

    // Repopulate _REQUEST ... Facebook needs it.
    $request_uri = $_SERVER['REQUEST_URI'];
    $request_uri = explode('?',$request_uri);
    if(count($request_uri) > 1) {
        parse_str($request_uri[1], $_REQUEST);
    } 
```

出于某种原因，新的 PHP SDK 没有通过 CodeIgniter 传递 $_REQUEST。缓存也存在问题，IE 没有正确的标头。

所以这会从 $_SERVER['REQUEST_URI'] 构建 $_REQUEST，然后正确地通过 Facebook 类并成功返回正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:25:45.407

使用此说明可能会有所帮助

```
$signed_request = isset($_REQUEST['signed_request']) ? $_REQUEST['signed_request'] : $this->modelfacebook->signRequest(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T06:32:16.283

根据[这篇文章](https://stackoverflow.com/questions/11532551/codeigniter-2-1-2-and-facebook-php-sdk-3-1-1)中的一个答案，出于安全原因，CodeIgniter会*清除$_REQUEST 变量。*我认为它与 Codeigniter Manual [here](http://codeigniter.com/user_guide/libraries/input.html)中描述的自动输入过滤有关，但也没有具体提及。我不确定是否设置

```
 $config['global_xss_filtering'] = TRUE; 
```

在 config.php 中是否影响它（我将它设置为 TRUE 在我的），但至少现在你/我们知道为什么 $_REQUEST 变量不可用。

有趣的是，我的 CIApplication/libraries/ 文件夹中有 FB SDK 库，它似乎可以很好地访问 $_REQUEST 变量，只是不在我的视图或控制器中。

当我看到这篇文章时，我正在寻找同一个问题的答案——你的问题也是一个完全有效的好问题！

干杯马特

# java - Credentials.acquireTGTFromCache(null, null) 使用 jre 7 返回 null

> ID：10424320
> 
> 赞同：3
> 
> 时间：2012-05-03T02:29:28.897
> 
> 标签：java, kerberos, jaas, java-7

诚然，我不熟悉 JAAS API，但需要帮助调查我们在升级到 jre 7 时遇到的问题。以前能够使用当前登录的 Windows 用户名自动登录的应用程序停止工作。经过一番摸索，就到了这行代码。

```
sun.security.krb5.Credentials.Credentials.acquireTGTFromCache(null, null); 
```

这在使用 jre 7 jvm 时返回 null，但在使用 jre 6 时返回正确的凭证。我以最简单的形式编写了一个测试类，但仍然看到相同的行为，所以这不可能是由于我们自己的类中的代码。

```
package test;

import sun.security.krb5.Credentials;

public class Scratch {
    public static void main(final String args[]) throws Exception {
        final Credentials yaoza = Credentials.acquireTGTFromCache(null, null);
        System.out.println(yaoza);
    }
} 
```

这可能是某种配置问题吗？任何答案或指向正确方向的指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:58:59.633

在 Windows 注册表中，此处：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa\Kerberos\Parameters 
```

显然应该有以下键：

```
allowtgtsessionkey REG_DWORD (1) 
```

...根据此线程中的某个人的说法： [https ://forums.oracle.com/forums/thread.jspa?threadID=2343216](https://forums.oracle.com/forums/thread.jspa?threadID=2343216)

正如那里所提到的，这可能是 JDK6 中的一个错误，这首先是有效的。

# innerhtml - innerHTML 不在 Firefox 中添加表单元素

> ID：10424325
> 
> 赞同：1
> 
> 时间：2012-05-03T02:30:07.197
> 
> 标签：innerhtml

我环顾四周，发现其他人在 Firefox 中遇到了有关 innerHTML 的问题，但我找不到解决方案。这是一个非常简单的js，在IE中运行良好，但在firefox中不会将表单元素结果1提交到下一页。任何 Firefox 帮助表示赞赏。谢谢！杰拉德

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Page Title</title>

    <script type="text/javascript" language="JavaScript">
    function addInput1(){
    var x = document.getElementById("Input1");
    x.innerHTML += "<textarea cols=\'20\' rows=\'3\' name=\'Outcome1\'></textarea><br/>";
    }

    </script>
</head>
    <body>
        <table cellspacing="0" cellpadding="2">
        <form action="admin/AddNew.cfm" method="post">
            <tr>
            <td valign="top" class="center">
                <input type="button" value="+" onmousedown="addInput1();" />
                <div align="center" id="Input1"></div>
            </td>
            </tr>
            <tr>
            <td>
                <input type="submit" name="Submit" value="Submit">
            </td>
            </tr>
        </form>
    </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:34:01.263

FF 很久以前就不允许这样做，只是为了安全。您必须在表单中添加隐藏输入，并在提交前设置值。

哦对不起。也许你的情况有点不同。试试这个：让表单成为身体的第一个元素。

```
<body>
<form>
</form>
</body> 
```

# ruby-on-rails - Rails The action 'show' could not be found for CommentsController error

> ID：10424329
> 
> 赞同：1
> 
> 时间：2012-05-03T02:30:52.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

I'm trying to follow the rails getting started guide [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html) to create a blog for a small website i've developed in rails

I've read many similar questions on SO but i'm still not able to figure out why i keep getting the error `The action 'show' could not be found for CommentsController error` when trying to destroy a comment as done in the guide.

Here's my link in my html.erb code:

```
<%= link_to 'Destroy Comment', [comment.post, comment], :confirm => 'Are you sure you want to delete?', :method => :delete %> 
```

My template header has these lines

```
<%= csrf_meta_tag %>
<%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js", "rails", "superfish", "jquery.quicksand", 'slides.min.jquery' %> 
```

My gemfile contains this:

```
gem 'jquery-rails' 
```

I've also noticed that when i load the page with the destroy comment link on it, there is this error in the firebug console:

```
"NetworkError: 404 Not Found - http://localhost:3000/assets/rails.js" 
```

Any help on figuring out this issue is appreciated. Let me know if you want anything else posted.

**EDIT**: Manifest file.

```
// This is a manifest file that'll be compiled into including all the files listed below.
// Add new JavaScript/Coffee code in separate files in this directory and they'll automatically
// be included in the compiled file accessible from http://example.com/assets/application.js
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

Routes.rb

Allthingswebdesign::Application.routes.draw do

```
get "about/index"
get "home/index"
get "portfolio/index"
get "contact/index"
post "contact/create"
get "contact/new"
get "posts/index"
get "posts/new" 
```

resources :posts do resources :comments end

root :to => 'home#index' end

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:51:48.803

Was there a reason that you got rid of the javascript include in the tutorial? (not a snarky question - just curious). Try adding this line to `app/views/layouts/application.html.erb.`:

`<%= javascript_include_tag "application" %>`

The problem you are having really smells like the javascript function that fakes sending a DELETE request is missing/malfunctioning.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T02:46:24.803

try this in your routes

```
resources :posts do
  resources :comments, :only => [:create, :destroy]
end 
```

# android - .NET 中的加密和 Android 中的解密抛出 BadPaddingException: pad block损坏

> ID：10424334
> 
> 赞同：4
> 
> 时间：2012-05-03T02:31:47.630
> 
> 标签：android, .net, aes, rijndaelmanaged

我做了很多研究，但我找不到我的问题的答案。我在 .NET 中进行 AES 加密（Rijndael 块大小 128 位），并在 Android (AES) 中使用相同的密码、salt 和 IV 进行解密。

C# 加密代码片段：

```
 byte[] initVectorBytes = Encoding.ASCII.GetBytes(initVector);
        byte[] saltValueBytes  = Encoding.ASCII.GetBytes(saltValue);

        byte[] plainTextBytes  = Encoding.UTF8.GetBytes(plainText);

        PasswordDeriveBytes password = new PasswordDeriveBytes(
                                                        passPhrase, 
                                                        saltValueBytes, 
                                                        hashAlgorithm, 
                                                        passwordIterations);

        byte[] keyBytes = password.GetBytes(keySize / 8);

        RijndaelManaged symmetricKey = new RijndaelManaged();

        symmetricKey.Padding = PaddingMode.PKCS7;

        symmetricKey.BlockSize = 128;  

        symmetricKey.Mode = CipherMode.CBC;        

        ICryptoTransform encryptor = symmetricKey.CreateEncryptor(
                                                            keyBytes, 
                                                            initVectorBytes);

        MemoryStream memoryStream = new MemoryStream();        

        CryptoStream cryptoStream = new CryptoStream(memoryStream, 
                                                        encryptor,
                                                        CryptoStreamMode.Write);
        cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);

        cryptoStream.FlushFinalBlock();

        byte[] cipherTextBytes = memoryStream.ToArray();

        memoryStream.Close();
        cryptoStream.Close();

        string cipherText = Convert.ToBase64String(cipherTextBytes); 
```

Android解密代码片段：

```
 KeySpec keySpec = new PBEKeySpec(password.toCharArray(), salt.getBytes(), iterationCount); 

    SecretKey key = SecretKeyFactory.getInstance( 
            "PBEWithSHA1And128BitAES-CBC-BC").generateSecret(keySpec);

    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS7Padding", "BC");

    cipher.init(Cipher.DECRYPT_MODE, key, new IvParameterSpec(iv.getBytes()));

    byte[] decrypted = cipher.doFinal(encrypted); 
```

cipher.doFinal 调用引发以下异常。

“05-02 18:17:38.239: W/System.err(25547): javax.crypto.BadPaddingException: pad block 损坏”

我确实在 .NET 和 Android 中将填充设置为“PKCS7Padding”，并将加密块大小设置为 128 位。

但是，在 Android 中加密和在 Android 中解密可以正常工作。与 .NET 中的 Encrypt 和 .NET 中的 Decrypt 相同，也可以正常工作。

样品测试：

```
String PlainText            = "hello world";
String EncryptedDotNetblob  = "JyijoGEALMI25Zej7d+fMg==";
String EncryptedAndroidblob = "1HhuTQaLRJEK4zxI9FAO6A=="; 
```

如您所见，上面的 blob 也不同。

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:13:31.527

您派生的密钥不同，这就是您收到错误的原因（将它们记录为十六进制字符串以进行检查）。`PasswordDeriveBytes`另一方面，使用 PBKDF1 的修改版本`SecretKeyFactory.getInstance("PBEWithSHA1And128BitAES-CBC-BC")`为您提供了派生 PKCS#12 指定的密钥的密钥工厂。这些是不同的算法，并产生不同的密钥。`Rfc2898DeriveBytes`在 .NET 中使用并`SecretKeyFactory .getInstance("PBKDF2WithHmacSHA1")`使用相同的参数来获取相同的密钥。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-15T14:10:03.070

这是一个 C# 示例，您需要 IterationCount

```
protected void Page_Load(object sender, EventArgs e)
{
    string value = "";
    string password = "";
    string salt = "";
    string iv = "";

    byte[] vectorBytes = Convert.FromBase64String(Server.UrlDecode(iv)); 
    byte[] cipherText = Convert.FromBase64String(Server.UrlDecode(value));

    Rfc2898DeriveBytes key1 = new Rfc2898DeriveBytes(password, StringToByteArray(salt)); //same as PBKDF2WithHmacSHA1
    key1.IterationCount = 32;
    byte[] keyBytes = key1.GetBytes(16);

    string Answer = DecryptDataAES(cipherText, keyBytes, vectorBytes); //vectorBytes is good

    //litAnswer.Text = Answer;
}

public static string DecryptDataAES(byte[] cipherText, byte[] key, byte[] iv)
{
    string plaintext = null;

    using (Rijndael rijndael = Rijndael.Create())
    {
        rijndael.Key = key;
        rijndael.IV = iv;
        rijndael.Padding = PaddingMode.None;

        ICryptoTransform decryptor = rijndael.CreateDecryptor(rijndael.Key, rijndael.IV);

        // Create the streams used for decryption. 
        using (MemoryStream msDecrypt = new MemoryStream(cipherText))
        {
            using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))
            {
                using (StreamReader srDecrypt = new StreamReader(csDecrypt))
                {
                    plaintext = srDecrypt.ReadToEnd();
                }
            }
        }
    }
    return plaintext;
}

public static byte[] StringToByteArray(String hex)
{
    int NumberChars = hex.Length / 2;
    byte[] bytes = new byte[NumberChars];
    using (var sr = new StringReader(hex))
    {
        for (int i = 0; i < NumberChars; i++)
            bytes[i] =
              Convert.ToByte(new string(new char[2] { (char)sr.Read(), (char)sr.Read() }), 16);
    }
    return bytes;
} 
```

# php - PHP - 使用点符号键将多维数组转换为二维数组

> ID：10424335
> 
> 赞同：27
> 
> 时间：2012-05-03T02:31:50.830
> 
> 标签：php, arrays

有很多使用点符号访问 PHP 数组的技巧和代码示例，但我想做一些相反的事情。我想采用这样的多维数组：

```
$myArray = array(
    'key1' => 'value1',
    'key2' => array(
        'subkey' => 'subkeyval'
    ),
    'key3' => 'value3',
    'key4' => array(
        'subkey4' => array(
            'subsubkey4' => 'subsubkeyval4',
            'subsubkey5' => 'subsubkeyval5',
        ),
        'subkey5' => 'subkeyval5'
    )
); 
```

并把它变成这个（可能通过一些递归函数）：

```
$newArray = array(
    'key1'                    => 'value1',
    'key2.subkey'             => 'subkeyval',
    'key3'                    => 'value3',
    'key4.subkey4.subsubkey4' => 'subsubkeyval4',
    'key4.subkey5.subsubkey5' => 'subsubkeyval5',
    'key4.subkey5'            => 'subkeyval5'
); 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-05-03T02:57:25.547

编解码器

```
$ritit = new RecursiveIteratorIterator(new RecursiveArrayIterator($myArray));
$result = array();
foreach ($ritit as $leafValue) {
    $keys = array();
    foreach (range(0, $ritit->getDepth()) as $depth) {
        $keys[] = $ritit->getSubIterator($depth)->key();
    }
    $result[ join('.', $keys) ] = $leafValue;
} 
```

输出

```
Array
(
    [key1] => value1
    [key2.subkey] => subkeyval
    [key3] => value3
    [key4.subkey4.subsubkey4] => subsubkeyval4
    [key4.subkey4.subsubkey5] => subsubkeyval5
    [key4.subkey5] => subkeyval5
) 
```

演示：[http ://codepad.org/YiygqxTM](http://codepad.org/YiygqxTM)

我得走了，但如果你明天需要解释，问我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T03:11:05.617

这将处理任意级别的嵌套：

```
<? //PHP 5.4+
$dotFlatten = static function(array $item, $context = '') use (&$dotFlatten){
    $retval = [];
    foreach($item as $key => $value){
        if (\is_array($value) === true){
            foreach($dotFlatten($value, "$context$key.") as $iKey => $iValue){
                $retval[$iKey] = $iValue;
            }
        } else {
            $retval["$context$key"] = $value;
        }
    }
    return $retval;
};

var_dump(
    $dotFlatten(
        [
            'key1' => 'value1',
            'key2' => [
                'subkey' => 'subkeyval',
            ],
            'key3' => 'value3',
            'key4' => [
                'subkey4' => [
                    'subsubkey4' => 'subsubkeyval4',
                    'subsubkey5' => 'subsubkeyval5',
                ],
                'subkey5' => 'subkeyval5',
            ],
        ]
    )
);
?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-24T11:37:51.320

已经有了答案[`RecursiveIteratorIterator`](http://php.net/manual/en/class.recursiveiteratoriterator.php)。但这是一个**更优化**的解决方案，它**避免使用嵌套循环**：

```
$iterator = new RecursiveIteratorIterator(
    new RecursiveArrayIterator($arr),
    RecursiveIteratorIterator::SELF_FIRST
);
$path = [];
$flatArray = [];

foreach ($iterator as $key => $value) {
    $path[$iterator->getDepth()] = $key;

    if (!is_array($value)) {
        $flatArray[
            implode('.', array_slice($path, 0, $iterator->getDepth() + 1))
        ] = $value;
    }
} 
```

这里有几点需要说明。注意`RecursiveIteratorIterator::SELF_FIRST`这里使用了常量。这很重要，因为默认设置`RecursiveIteratorIterator::LEAVES_ONLY`不允许我们访问所有密钥。所以有了这个常数集，我们就从数组的顶层开始，往更深处走。[`RecursiveIteratorIterator::getDepth`](http://php.net/manual/en/recursiveiteratoriterator.getdepth.php)这种方法可以让我们存储密钥的历史并在我们使用方法丰富叶子时准备密钥。

[这是一个工作演示。](http://sandbox.onlinephpfunctions.com/code/34386e896ea9cc4417a8db4874940f65bef3bd8c)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T03:19:46.697

这是我对递归解决方案的看法，它适用于任何深度的数组：

```
function convertArray($arr, $narr = array(), $nkey = '') {
    foreach ($arr as $key => $value) {
        if (is_array($value)) {
            $narr = array_merge($narr, convertArray($value, $narr, $nkey . $key . '.'));
        } else {
            $narr[$nkey . $key] = $value;
        }
    }

    return $narr;
} 
```

可以称为`$newArray = convertArray($myArray)`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-27T09:32:18.137

这是另一种类似于上述 Blafrat 的方法 - 但只是将数组作为值处理。

```
 function dot_flatten($input_arr, $return_arr = array(), $prev_key = '')
 {
     foreach ($input_arr as $key => $value)
     {
        $new_key = $prev_key . $key;

        // check if it's associative array 99% good
        if (is_array($value) && key($value) !==0 && key($value) !==null)
        {
            $return_arr = array_merge($return_arr, dot_flatten($value, $return_arr, $new_key . '.'));
        }
        else
        {
            $return_arr[$new_key] = $value;
        }
    }

    return $return_arr;
} 
```

（唯一无法捕捉到的情况是你有一个关联的值，但第一个键是 0。）

请注意，RecursiveIteratorIterator 可能比常规递归函数慢。 [https://xenforo.com/community/threads/php-spl-why-is-recursiveiteratoriterator-100x-slower-than-recursive-search.57572/](https://xenforo.com/community/threads/php-spl-why-is-recursiveiteratoriterator-100x-slower-than-recursive-search.57572/)

在这种情况下，使用为 php5.6 提供的 1000 次迭代的示例数组，此代码的速度是两倍（递归 = .032 与交互器 = .062） - 但对于大多数情况，差异可能微不足道。主要是我更喜欢递归，因为对于像这样的简单用例，我发现迭代器的逻辑不必要地复杂。

# c++ - C++11 的 decltype 是否使克隆变得不必要？

> ID：10424337
> 
> 赞同：11
> 
> 时间：2012-05-03T02:32:05.823
> 
> 标签：c++, c++11, clone

克隆范例用于制作派生类的副本，而无需向下转换为基类类型[。](https://stackoverflow.com/questions/7708110/which-situation-will-use-clone-in-c-and-how-to-use)不幸的是，`clone`必须在每个子类中实现（或与 CRTP 一起使用 mixin）。

C ++ 11是否有可能`decltype`使这变得不必要？

我不认为下面的代码实际上是复制的`original`，而只是指向它的引用。当我尝试使用`new decltype(*original)`时，我得到一个错误： `error: new cannot be applied to a reference type`。

仍然是`clone`C++11 的路吗？或者是否有一些新方法可以使用 RTTI 从基类指针复制派生类对象？

```
#include <iostream>

struct Base
{
  virtual void print()
  {
    std::cout << "Base" << std::endl;
  }
};

struct Derived : public Base
{
  int val;
  Derived() {val=0;}
  Derived(int val_param): val(val_param) {}
  virtual void print()
  {
    std::cout << "Derived " << val << std::endl;
  }
};

int main() {
  Base * original = new Derived(1);
  original->print();

  // copies by casting down to Base: you need to know the type of *original
  Base * unworking_copy = new Base(*original);
  unworking_copy->print();

  decltype(*original) on_stack = *original;
  on_stack.print();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T02:43:04.950

`decltype`是一个静态结构。像所有 C++ 类型构造一样，它不能推断对象的*运行时*类型。`decltype(*original)`只是`Base&`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:44:57.827

`decltype`（顾名思义）给出了它所应用的表达式的*声明*类型（静态类型）。

`decltype(*original)`是`Base&`，所以你的代码将打印

```
Derived 1
Base
Derived 1 
```

但在第三种情况下不会制作副本。

克隆（或该模式的某些变体）仍然是 C++11 的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T02:55:33.827

`decltype`不能也不会恢复动态对象类型。它是一个纯粹的静态构造。

没有复制对象的神奇方法。*您必须在某处*调用其确切的最终动态类型的构造函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-21T15:01:58.553

> Is clone still the way to go in C++11? Or is there some new way to use RTTI to copy a derived class object from a base class pointer?

In case anybody is interested in a non-invasive cloning, C++11's lambdas seem to provide some new cloning facilities: Thinking about the issue of cloning, I came to admit that the one who manufactured the original instance of an object should also be the one who can help build a replica. Consider the case where all of your objects are manufactured by some `Factory`. In this case, additionally to the usual `create` interface, your factory could be equipped with a `clone` interface, e.g. like so:

```
#include <iostream>
#include <functional>
#include <memory>
#include <unordered_map>

template <typename BASE>
struct
Factory {
    private: using
    TCloneFn = std::function<std::shared_ptr<BASE>(BASE const * const)>;

    private:
    static std::unordered_map<BASE const*,TCloneFn> cloneFnMap;

    public: template <typename DERIVED_TYPE, typename...TS>
    static std::shared_ptr<BASE>
    create(TS...args) {
        BASE* obj = new DERIVED_TYPE(args...);
        const std::shared_ptr<BASE> pNewObj =
            std::shared_ptr<BASE>(
                obj,
                [&](BASE* p){
                    cloneFnMap.erase(p);
                    delete p;
                }
            );

        cloneFnMap[obj] = [&](BASE const * const orig){
            std::shared_ptr<BASE> pClone = create<DERIVED_TYPE>(std::ref(static_cast<DERIVED_TYPE const &>(*orig)));
            return pClone;
        };
        return pNewObj;
    }

    public: static std::shared_ptr<BASE>
    clone(std::shared_ptr<BASE const> original) {
        return cloneFnMap[original.get()](original.get());
    }
};

template <typename BASE> std::unordered_map<BASE const*,typename Factory<BASE>::TCloneFn> Factory<BASE>::cloneFnMap;

class Base {
    public: virtual ~Base() throw() {}
    public: virtual void whoAmI() const {
        std::cout << "I am Base instance " << this << "\n";
    }
};

class Derived : public Base {
    std::string name;
    public: Derived(std::string name) : name(name) {}
    public: Derived(const Derived&other) : name("copy of "+other.name) {
    }
    private: virtual void whoAmI() const {
        std::cout << "I am Derived instance " << this << " " << name << "\n";
    }
};

int main() {
    std::shared_ptr<Base> a = Factory<Base>::create<Derived>("Original");
    a->whoAmI();
    std::shared_ptr<Base> copy_of_a = Factory<Base>::clone(a);
    copy_of_a->whoAmI();
    std::shared_ptr<Base> copy_of_a_copy = Factory<Base>::clone(copy_of_a);
    copy_of_a_copy->whoAmI();
    return 0;
} 
```

The trick is to remember how the original was constructed in the `Factory::create` method (by associating a pointer to the object with a lambda that will invoke the copy-constructor). Never throw away old blueprints, you may need them later-on;-)

Frankly, I still prefer the old `clone` solution with CRTP etc, but this may trigger some new ideas or come otherwise in handy.

The code above is also at [http://ideone.com/kIPFt2](http://ideone.com/kIPFt2)

**EDIT:** As wjl commented, the first version of the code would cause `cloneFnMap`to steadily grow. After thinking it over, I decided to fix the code by introducing a custom deleter to the `shared_ptr`s being returned such that the `cloneFnMap` will also get cleaned up. Still, this should just be considered an experimental proof-of-concept code.

# makefile - 在makefile中替换for循环元素？

> ID：10424340
> 
> 赞同：2
> 
> 时间：2012-05-03T02:32:41.323
> 
> 标签：makefile

假设我的 Makefile 如下：

```
FILES = hello.py
PHONY: hi
hi:
    -@for file in $(FILES); do \
            (echo $$file; \
            echo $(subst py,xml,$$file); \
            echo $(subst py,xml,hello.py)); \
    done 
```

调用 make 时，将打印以下内容：

```
hello.py
hello.py
hello.xml 
```

我可以知道为什么 echo $(subst py,xml,$$file); 不能按我想要的方式工作（回显 hello.xml 而不是 hello.ph）？另外，如果您对如何修改此 for 循环元素有任何建议，请告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:44:38.933

它不起作用的原因是 Make 扩展 $(subst...) 以生成文本，然后将其传递给 shell，并且您试图根据 shell 在扩展时生成的文本进行替换“$文件”。处理此问题的一种简单方法是在 shell 中进行所有扩展：

```
FILES = hello.py
PHONY: hi
hi:
    -@for file in $(FILES); do \
            echo $$file; \
            echo $${file%py}xml; \
    done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-29T14:00:46.643

该`foreach`命令可能会有所帮助

```
FILES = hello.py hello2.py hello3.py
PHONY: hi
hi:
    $(foreach file,$(FILES),echo $(subst py,xml,$(file));) 
```

输出

```
echo hello.xml; echo hello2.xml; echo hello3.xml;
hello.xml
hello2.xml
hello3.xml 
```

# java - 如何在循环中打印出方法

> ID：10424343
> 
> 赞同：0
> 
> 时间：2012-05-03T02:32:46.643
> 
> 标签：java, arrays, methods

我很抱歉，但我是编程新手，我在编写程序时遇到了困难。原程序如下：

```
import java.io.*;
import java.io.IOException;
import java.io.InputStreamReader;

class buildABoat{

    String boatName;      // Boat name
    void buildABoat(){      
        String BoatName;            
    }

    void nameTheBoat() {        
        try {           
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("\n\nWhat should we name this vessel? \n\n");
            this.boatName = br.readLine();
            System.out.println("\n\nThe " + boatName + " is ready to sail!\n");             
        }           
        catch (IOException e) {                 
        }   
    }
}

class proj1{

    public static void main(String[] arg){

        buildABoat boat1;
        buildABoat boat2;
        buildABoat boat3;
        buildABoat boat4;
        buildABoat boat5;

        boat1 = new buildABoat();
        boat2 = new buildABoat();
        boat3 = new buildABoat();
        boat4 = new buildABoat();
        boat5 = new buildABoat();

        boat1.nameTheBoat();
        boat2.nameTheBoat();
        boat3.nameTheBoat();
        boat4.nameTheBoat();
        boat5.nameTheBoat();

        System.out.println("(Press ENTER to exit)");

        try {           
            System.in.read();
        }           
        catch (IOException e) {         
            return;
        }
    }
} 
```

这会产生以下结果：

```
What should we name this vessel?
Enterprise
The Enterprise is ready to sail!
What should we name this vessel?
Columbia
The Columbia is ready to sail!
What should we name this vessel?
Challenger
The Challenger is ready to sail!
What should we name this vessel?
Atlantis
The Atlantis is ready to sail!
What should we name this vessel?
Endeavor
The Endeavor is ready to sail!
(Press ENTER to exit) 
```

我试图将其更改为以下内容：

```
import java.io.*;
import java.io.IOException;
import java.io.InputStreamReader;

class buildABoat{    
    String boatName;      // Boat name

    void buildABoat(){
        String BoatName;
    }

    void nameTheBoat() {
        try {           
            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("\n\nWhat should we name this vessel? \n\n");
            this.boatName = br.readLine();
            System.out.println("\n\nThe " + boatName + " is ready to sail!\n");             
        }           
        catch (IOException e) {                 
        }   
    }
}

class proj1{

    public static void main(String[] arg){

        Boat[] boat;            
        boat = new Boat[5];    
        for(int i = 0; i <= Boat.Length; i++){          
            nameTheBoat();          
        }           
        System.out.println("(Press ENTER to exit)");

        try {           
            System.in.read();
        }           
        catch (IOException e) {         
            return;
        }
    }
} 
```

这当然会产生以下错误：

```
proj1.java:71: error: cannot find symbol
                for(int i = 0; i <= Boat.Length; i++){
                                        ^
  symbol:   variable Length
  location: class Boat
proj1.java:73: error: cannot find symbol
                        nameTheBoat();
                        ^
  symbol:   method nameTheBoat()
  location: class proj1
2 errors 
```

我在新程序中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:35:35.393

使用小写的**长度**

```
for(int i = 0; i <= Boat.length; i++) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:38:04.753

尝试做`boat.nameTheBoat()`而不是仅仅`nameTheBoat()`

还

```
for(int i = 0; i <= boat.length; i++){          
        boat[i].nameTheBoat();          
    } 
```

boat 是类的实例`Boat`（可能应该是`buildABoat`）。这些看起来像是编译器错误而不是运行时错误，所以编译器应该给你一些关于确切行号的提示（就像它所做的那样）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:40:21.670

正如 Nurlan 提到的，第一个错误是因为您使用大写 L作为数组的*长度属性。*实际属性以小写 l 开头。

第二个错误是因为方法*nameTheBoat*是名为*buildABoat*的类的一部分，但您试图调用它，就好像它是您的主类的一部分一样。您需要一个*buildABoat*对象的实例才能调用此方法。

另一个建议：为了遵守 java 命名约定，你不应该以小写字母开头的类名。类应始终以大写字母开头。方法应始终以小写字母开头。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T02:40:11.317

您必须尝试计算对象而不是类的长度。所以，它应该是boat.length，这里的小船是你的对象

如果方法是静态方法，则使用类名调用方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T02:43:08.727

你在哪里

```
nameTheBoat(); 
```

在你的 for() 循环中，你需要

```
boat[i] = new Boat();
boat[i].nameTheBoat(); 
```

原因是：1)`nameTheBoat()`是一种只对 类型 对象进行操作的方法`Boat`。你没有给它任何工作对象。2)`boat[] = new Boat[5];`初始化一个 Array 对象，但不在对象中创建 5 个新`Boat`的 s `Array`。因此，您需要先创建这 5 个`Boat`，然后才能`Boat`在它们上运行方法。否则你会得到一个空指针错误。

编辑：当然正如其他人提到的，`boat.length`是数组的长度`boat`，`boat.Length`是错误的。

享受！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T02:38:55.050

您创建的对象数组是`boat = new Boat[5];`. 理想情况下，您的整个代码应该是这样的

```
Boat[] boat = new Boat[5];    
for(int i = 0; i <= Boat.Length; i++){          
boat[i] = new Boat();
boat[i].nameTheBoat();          
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T02:42:37.657

你有几个问题。

一个是`boat`作为一个数组

```
Boat[] boat;            
boat = new Boat[5];    
for(int i = 0; i <= Boat.Length; i++){          
    nameTheBoat();          
} 
```

要访问数组`length`，它将`boat.length`代替您拥有的。

我看到的下一个问题是您对`nameTheBoat()`. 该方法是`buildABoat`类的一部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T02:45:47.583

这段代码看起来像是一个意外的构造函数。

```
class buildABoat{    
    String boatName;      // Boat name

    void buildABoat(){
        String BoatName;
    } 
```

如果 void buildABoat () 是一个方法（void 这么说），为什么要在其中声明一个局部变量而不使用它？

并且不要将命名良好的属性的名称作为注释重复。

```
class BuildABoat {    
    private String boatName;   

    public BuildABoat (String name) {
        boatName = name;
    } 
```

这会有些道理。您现在有一个类，可以通过传递一个保存在类中的船名来实例化它。

在您的 Proj1-Class 中，您拆分声明和初始化。这是一个坏习惯。有时它是无法避免的，但如果是，请避免它。

```
class Proj1 {

    public static void main(String[] arg){

        BuildABoat [] boat = new BuildABoat[5];    
        for(int i = 0; i <= boat.length; i++) {
            // to make this work, we have to change the 
            // buildABoat
            boat[i] = new BuildABoat (BuildABoat.nameTheBoat ());
        }
        System.out.println ("(Press ENTER to exit)");
        try {           
            System.in.read ();
        }           
        catch (IOException ignored) {         
            return;
        }
    }
} 
```

方法 nameTheBoat 必须是静态的，如果我们在没有实际拥有 (builda)boat 的情况下调用它。

```
public static String nameTheBoat () {
    try {           
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.println ("\n\nWhat should we name this vessel? \n\n");
        String s = br.readLine ();
        System.out.println ("\n\nThe " + s + " is ready to sail!\n");
        return s;
    }
      catch (IOException e) {
        return "";
    }   
} 
```

我希望代码能做一些你想要的。

# windows-phone-7 - WP7 市场测试套件

> ID：10424351
> 
> 赞同：0
> 
> 时间：2012-05-03T02:34:39.153
> 
> 标签：windows-phone-7

Marketplace 测试工具包显示了我的应用程序的两个功能：

ID_CAP_NETWORKING 和 ID_CAP_LOCATION

我使用位置 (GPS)，但我不认为我使用网络。如何找出测试在我的应用程序中检测到网络的原因？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:04:32.010

您可以通过查看来了解 Marketplace 测试套件确定功能的方式；`C:\Program Files (x86)%\Microsoft SDKs\Windows Phone\v7.1\Tools\Marketplace\Rules.xml`（`C:\Program Files\Microsoft SDKs\Windows Phone\v7.1\Tools\Marketplace\Rules.xml`在 32 位机器上）。这详细说明了哪些程序集、类和方法将触发所需的各种功能。很容易观察并确定它为什么包含该功能。

MSDN 文章[如何：确定应用程序功能](http://msdn.microsoft.com/en-us/library/gg180730%28v=vs.92%29.aspx "如何：确定应用程序功能")中详细介绍了功能过程。如底部所述，如果您的代码/XAML 中使用了 s，则`ID_CAP_NETWORKING`可以添加。`Uri`您可以尝试将其从您的设备中删除，`WMAppManifest.xml`但请确保在事后对其进行彻底测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:56:05.890

您是否使用第三方 dll，例如 Advertising SDK？它可能想要使用它。

Grep 你的源代码：

*   玩家服务
*   浏览器控件
*   系统网
*   流畅的媒体流
*   绝对网址（如 ）

# installation - 在 centOS 上安装 eucalyptus 错误

> ID：10424354
> 
> 赞同：0
> 
> 时间：2012-05-03T02:35:19.893
> 
> 标签：installation, centos, eucalyptus

我正在尝试在 centOS 6.2 上安装桉树。我按照官网[centos上安装eucalyptus](http://www.eucalyptus.com/download/eucalyptus/centos)的步骤进行操作。

说到安装 eucalyptus 的时候，我选择使用 rpm。**这是网站上在前端安装 RPM**的章节 。我输入的命令是：

```
rpm -Uvh aoetools-21-1.el4.x86_64.rpm \
 euca-axis2c-1.6.0-1.x86_64.rpm \
 euca-rampartc-1.3.0-1.x86_64.rpm \
 vblade-14-1mdv2008.1.x86_64.rpm \
 vtun-3.0.2-1.el5.rf.x86_64.rpm \
 lzo2-2.02-3.el5.rf.x86_64.rpm\
 perl-Crypt-OpenSSL-Random-0.04-1.el5.rf.x86_64.rpm\
 perl-Crypt-OpenSSL-RSA-0.25-1.el5.rf.x86_64.rpm\
 perl-Crypt-X509-0.32-1.el5.rf.noarch.rpm\
 python25-2.5.1-bashton1.x86_64.rpm\
 python25-devel-2.5.1-bashton1.x86_64.rpm\
 python25-libs-2.5.1-bashton1.x86_64.rpm 
```

和我得到的错误：

```
warning: aoetools-21-1.el4.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 217521f6: NOKEY
warning: vblade-14-1mdv2008.1.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 78d019f5: NOKEY
warning: vtun-3.0.2-1.el5.rf.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 6b8d79e6: NOKEY
error: Failed dependencies:
    libcrypto.so.6()(64bit) is needed by euca-rampartc-1.3.0-6.el5.x86_64
    libssl.so.6()(64bit) is needed by euca-rampartc-1.3.0-6.el5.x86_64
    libcrypto.so.6()(64bit) is needed by vtun-3.0.2-1.el5.rf.x86_64
    libcrypto.so.6()(64bit) is needed by perl-Crypt-OpenSSL-Random-0.04-1.el5.rf.x86_64
    libssl.so.6()(64bit) is needed by perl-Crypt-OpenSSL-Random-0.04-1.el5.rf.x86_64
    libcrypto.so.6()(64bit) is needed by perl-Crypt-OpenSSL-RSA-0.25-1.el5.rf.x86_64
    libssl.so.6()(64bit) is needed by perl-Crypt-OpenSSL-RSA-0.25-1.el5.rf.x86_64
    libcrypto.so.6()(64bit) is needed by python25-2.5.1-bashton1.x86_64
    libdb-4.3.so()(64bit) is needed by python25-2.5.1-bashton1.x86_64
    libexpat.so.0()(64bit) is needed by python25-2.5.1-bashton1.x86_64
    libreadline.so.5()(64bit) is needed by python25-2.5.1-bashton1.x86_64
    libssl.so.6()(64bit) is needed by python25-2.5.1-bashton1.x86_64 
```

我该如何解决这个问题？我希望有人和我一样陷入同样的​​境地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:15:39.653

看起来依赖项没有得到解决，这就是安装没有继续的原因。我也遇到了完全相同的问题，所以这是我找到的解决方案。您必须下载一些 RPM 才能安装所需的依赖项。

我的系统架构是i386。替换为 X86_64

1.  libcrypto.so.6() 和 libssl.so.6() ：要获取这些文件，您必须安装 RPM openssl098e-17.el6.centos.2..rpm

2.  libdb-4.3.so() : 安装 compat-db43-4.3-24-15.el6..rpm

3.  libreadline.so.5() : 安装 compat-readline5-5.2-17.1.el6..rpm
4.  libexpat.so.0() : 安装 compat-expat1-1.95.8-8.el6..rpm

安装这些依赖项后，请定期安装 RPM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:28:15.307

eucalyptus 2.0 不支持 centos 6.2。Centos 5 使用 xen，而 centos 6 使用 kvm。为此，您将不得不等待 eucalyptus 3.1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T21:34:53.003

此外，如果您想快速测试 Eucalyptus 3.1 并在 30 分钟内部署云，您可以下载[Eucalyptus FastStart](http://go.eucalyptus.com/Download-FastStart.html?LeadSourceDetails=Eucalyptus%20Website&Offer=Free%20Trial&OfferDetails=Download%20FastStart&OfferURL=http://go.eucalyptus.com/Download-FastStart.html)，它在 CentOS 6.2 和 KVM 上运行至少 2 台机器。

您可以观看这个简短的[FastStart 视频](http://www.eucalyptus.com/video/faststart-eucalyptus-31)，该视频将引导您完成安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T16:06:34.503

你问的是 Eucalyptus 2，但现在 3.1 已经发布并且支持 KVM。[在 Centos 6 上安装 Eucalyptus 3.1](http://www.eucalyptus.com/download/eucalyptus/centos-6)应该容易得多。这是安装文档中的一个片段：

> 安装适合您硬件的 KVM 驱动程序。
> 
> 对于配备 Intel 处理器的系统：
> 
> ```
> modprobe kvm_intel
> modprobe vhost_net 
> ```

# sql - 如何将多行合并为一行？

> ID：10424358
> 
> 赞同：0
> 
> 时间：2012-05-03T02:35:52.353
> 
> 标签：sql, sql-server, join, union, pivot

所以我整天都在寻找解决这个问题的好方法，结果却一无所获。假设我有一个类似的表：

ProjectID Position BilledSoFar NotBilled
---------------------------------------------------------- ------
EE123 AA1 100 200
EE456 MNGR 4000 500
EE123 AA3 43 0
EE012 SPEC1 435 4355
.... .... .... ....

我正在尝试做的是获取具有相同 projectID 的多行，并将所有这些行合并为一个。我需要每个项目 ID 的“Position”“BilledSoFar”和“NotBilled”，即使 ProjectID 不存在 Position，如下所示：

ProjectID
----------------- -------------------------------------------------- ---------------------------------------------
EE123 AA1 100 200 AA3 43 0 MNGR 空 空 ...................

等等。

所以我需要将给定项目 ID 的所有记录放在一行中，即使该项目 ID 不存在位置（上面的示例是 MNGR，它不是 EE123 下的位置）我必须拥有所有位置和计费信息（如果 projectID 不存在该职位，则显然为 NULL）。我已经尝试过枢轴，加入并考虑过联合但仍然无法解决这个问题，而且我在这里的猜测已经不多了。

我还应该注意，我知道有固定数量的投影（比如说 3400），并且有固定数量的位置（假设这个是 20）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:53:04.533

您可以使用递归 CTE 将其展平，但这不会将值放入单独的列中，而是将它们放入一个逗号分隔的列中。如果这对您不起作用：

*   您可以使用非常复杂的动态 SQL 创建来即时执行下一个选项（它只会创建所需的列数（如果不需要构建到 20）
*   你可以硬编码一个很长的左连接，因为你知道你不会超过 20 行并且只需要一次：

它看起来像这样：

```
SELECT ProjectID, Position, BilledSoFar, NotBilled, 
    ROW_NUMBER() OVER (PARTITION BY ProjectID ORDER BY Position) AS RowNum
INTO #ProjectTable
FROM ProjectTable

SELECT ProjectTable.ProjectID, 
    ProjectTable.Position AS Position1, ProjectTable.BilledSoFar AS BilledSoFar1, 
    ProjectTable.NotBilled AS NotBilled1, 
    ProjectTable2.Position AS Position2, ProjectTable2.BilledSoFar AS BilledSoFar2, 
    ProjectTable2.NotBilled AS NotBilled2, 
    ...
    ProjectTable20.Position AS Position20, ProjectTable20.BilledSoFar AS BilledSoFar20, 
    ProjectTable20.NotBilled AS NotBilled20 
FROM #ProjectTable AS ProjectTable
    LEFT JOIN #ProjectTable AS ProjectTable2
        ON ProjectTable.ProjectID = ProjectTable2.ProjectID AND ProjectTable2.RowNum = 2
    ...
    LEFT JOIN #ProjectTable AS ProjectTable20
        ON ProjectTable.ProjectID = ProjectTable20.ProjectID AND ProjectTable20.RowNum = 20
WHERE ProjectTable.RowNum = 1 
```

*   正如建议的那样，这应该在客户端应用程序中完成，但如果只完成一次，那么我会使用上面发布的简单复制和粘贴方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:19:43.037

您可以创建一个接受所需 projectID 作为参数的过程。

使用 CURSOR ( [http://justgeeks.blogspot.com/2008/08/using-t-sql-cursor-in-sql-server.html](http://justgeeks.blogspot.com/2008/08/using-t-sql-cursor-in-sql-server.html) ) 循环遍历与 projectID 匹配的行以构建字段的分隔字符串.

返回字符串或从字符串构建一个选择语句并执行它。

例如，从 CURSOR 构建的要执行的选择字符串：

```
SELECT 'EE123' AS 'ProjectID',
       'AA1', 
       '100', 
       '200', 
       'AA3', 
       '43', 
       '0', 
       'MNGR', 
       'Null', 
       'Null' 
FROM <tablaname> 
WHERE 1=1 
```

# css - 为什么在 CSS 中对图像进行 base64Encode 编码？

> ID：10424360
> 
> 赞同：7
> 
> 时间：2012-05-03T02:36:08.593
> 
> 标签：css, base64, background-image, data-uri

> **可能重复：**
> [将背景图像数据作为 base64 嵌入到 css 中，好的或坏的做法](https://stackoverflow.com/questions/1124149/embedding-background-image-data-into-css-as-base64-good-or-bad-practice)

我只是在我的谷歌浏览器主页上浏览源代码，并注意到图像是在 CSS 中进行 base64 编码的。这有什么好处？我很想这只是为了减少 http 请求，但由于它是一个本地应用程序，所以无论如何都没关系，对吧？它可以在本地加载图像吗？

```
menu > [checked]:before {
  content: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAARklEQVQYlWNgwA+MgViQkIJ3QKzEAFVpjEPBf5giJaiAMRYF72DWKSEJlKMpgNsgiCTxH5sCbG7AqgBZ4V2sCv7//08QAwAUfjKKBs+BFgAAAABJRU5ErkJggg==");
  display: inline-block;
  height: 9px;
  margin: 0 5px;
  vertical-align: 50%;
  width: 9px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:52:02.117

它是一个[数据 Uri 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)，据我所知，唯一的优点是保存 HTTP 请求（因为所有内容都作为一个加载，而不是获取图像）。

为什么它出现在 google chrome 登录页面上……嗯，谷歌确实喜欢炫耀并在所有东西上使用最新技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:22:02.320

我认为 Kirean 是对的，但要详细说明具体的问题标题......

二进制图像数据在 Data Uri 中进行了 base64 编码，因此可以放入文本文件中。如果二进制数据不是 base64 编码的，它看起来像：

```
?PNG

IHDR           ??FIDAT?c`???X???w@??Ui?C??"%??1?`?)!    ??)?? ?$??ln??Y?]?
???O~2?ρIEND?B`? 
```

它可能包含类似`"`的字符，并且 css 解析器可能会阻塞它。

当它是 base64 编码时，它只会包含如下字符：

```
0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+,= 
```

不知道他们为什么选择这样做，也许他们不想管理额外的图像文件。

# android - 需要在Android中创建一个记忆游戏

> ID：10424363
> 
> 赞同：0
> 
> 时间：2012-05-03T02:36:20.357
> 
> 标签：android, gridview, imageview

我需要在应用程序中创建一个应用程序或游戏，该应用程序从在线网站获取（下载）一组图片，并将这些照片用作注意力游戏中的卡片。我只是在寻找有关执行此操作的最佳方法的建议或示例。集中是你有一组 8 张左右的牌，所以 4 对。所有的牌面朝下。您一次选择 2 个，当您选择一对时，该对保持不变。如果您没有选择一对，则牌会被翻转回来。我需要一种方法来识别选择的两张“卡片”是否匹配。

我想使用 GridView 创建一个简单的“专注”游戏，其棋盘只有 2x3。这是我的第一个想法。使用网格视图创建 2x3 网格。我如何制作 GridView 2x3？然后将 ImageView 放入每个网格点。我可以这样做吗？ImageView 是否可以保存两个图像并在它们之间交替？那太好了。这是我刚刚想到的一些“伪代码”： int counter = 0; 布尔完成=假；

```
while(finished == false){
if(counter % 2 == 0){
    pickFirstCard();  //store first pick and leave it facing up
}
else{
    pickSecondCard();
    compareCards();   //method to compare cards
}   
counter++;
} 
```

有什么办法可以给 ImageViews 一个“值”或“属性”，这样当我比较它们时，我可以用它来查看它们是否匹配？还是只使用图像文件名？想法？我会尽快添加更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:59:07.350

我认为您应该使用数据模型来处理您的游戏逻辑并使用 UI 来显示游戏逻辑。

# php - 文件上传不工作表单标签 PHP MongoDB

> ID：10424364
> 
> 赞同：0
> 
> 时间：2012-05-03T02:36:20.557
> 
> 标签：php, forms, upload

我正在尝试将图片上传并存储到我的数据库中。问题是，我对 HTML 不是很好，我只是复制/粘贴标签来获取我喜欢的表单并编辑我认为应该去的地方。我很确定它与我正在使用的 html 标签有关，因为它本身可以正常工作，但是当我将该代码复制/粘贴到我认为应该在我的注册表单上的位置时，if 语句检查类型和大小规定总是返回 false。它必须与粘贴到工作注册表单页面的表单/发布/提交按钮组合有关。

这是我的工作上传测试代码

```
<html>
<body>
<form   method  = "post" enctype = "multipart/form-data">
<label  for = "file">Filename:</label>
<input  type    = "file"   name = "file"   id = "file" />
<input  type    = "submit" name = "Submit" value ="Submit">
</form>

<?php
if (!empty($_FILES['file']))
{
    if ((( $_FILES["file"]["type"] == "image/gif")  
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/pjpeg"))
        && ($_FILES["file"]["size"] < 5000000))
    {
        if ($_FILES["file"]["error"] > 0)
        {
            header("Location: http://www.drink-social.com/error.php?upload=".$_FILES["file"]["error"]);
            exit();
        }

        else if (file_exists("/var/www/pics/".$_FILES["file"]["name"]))
        {
            header("Location: http://www.drink-social.com/error.php?upload=exists");
            exit();
        }

        move_uploaded_file($_FILES["file"]["tmp_name"], "/var/www/pics/".$_FILES["file"]["name"]);
    }
}
?>
</body>
</html> 
```

现在，这就是我的注册页面，在我将这些部分复制/粘贴在一起之后，看起来像：

```
<html>
<body>
Please enter your details below:
<br />
<form   name = "Details" method = "post">
<br />
Username:   <input type = "text" name = "Username">
<br />
Password:   <input type = "text" name = "Password">
<br />  
Name:       <input type = "text" name = "Name">
<br />
Address:    <input type = "text" name = "Line1">
<br />
Line 2:     <input type = "text" name = "Line2">
<br />
City:       <input type = "text" name = "City">
<br />
State:      <input type = "text" name = "State">
<br />
Zip:        <input type = "text" name = "Zip">
<br />
Now let's get those daily deals...
<br />
Monday:     <input type = "text" name = "Monday">
<br />
Tuesday:    <input type = "text" name = "Tuesday">
<br />
Wednesday:  <input type = "text" name = "Wednesday">
<br />
Thursday:   <input type = "text" name = "Thursday">
<br />
Friday:     <input type = "text" name = "Friday">
<br />
Saturday:   <input type = "text" name = "Saturday">
<br />
Sunday:     <input type = "text" name = "Sunday">
<br />

<form   method  = "post" enctype = "multipart/form-data">
<label  for = "file">Filename:</label>
<input  type    = "file"   name = "file"   id = "file" />
<input  type    = "submit" name = "Submit" value ="Submit">
</form>

<?php
include_once("host_class.php");
include_once("event_class.php");

if (!empty($_POST['Username']))
{           
    $host  = new Host();        
    $event = new Event();

    if ($host->i_exist($_POST['Username']))
    {
        header("Location: http://www.drink-social.com/error.php?login=duplicate");
        exit();
    }

    else if ((( $_FILES["file"]["type"] == "image/gif")     
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/pjpeg"))
        && ($_FILES["file"]["size"] < 5000000))
    {
        if ($_FILES["file"]["error"] > 0)
            {
                header("Location: http://www.drink-social.com/error.php?upload=".$_FILES["file"]["error"]);
            exit();
            }

        else if (file_exists("/var/www/pics/".$_FILES["file"]["name"]))
        {
            header("Location: http://www.drink-social.com/error.php?upload=exists");
            exit();
        }

        move_uploaded_file($_FILES["file"]["tmp_name"], "/var/www/pics/".$_FILES["file"]["name"]);
        $host->set_username($_POST['Username']);
        $host->set_password($_POST['Password']);
        $host->set_name($_POST['Name']);        
        $host->set_address($_POST['Line1'], $_POST['Line2'], $_POST['City'],
                   $_POST['State'], $_POST['Zip']);
        $host->set_pic($_FILES['file']['name']);

        $id = new MongoID($host->add_me());
        $host->build_me($id);

        $host->set_mondayID($event->add_me($_POST['Monday'], $host->get_id()));
        $host->set_tuesdayID($event->add_me($_POST['Tuesday'], $host->get_id()));
        $host->set_wednesdayID($event->add_me($_POST['Wednesday'], $host->get_id()));
        $host->set_thursdayID($event->add_me($_POST['Thursday'], $host->get_id()));
        $host->set_fridayID($event->add_me($_POST['Friday'], $host->get_id()));
        $host->set_saturdayID($event->add_me($_POST['Saturday'], $host->get_id()));
        $host->set_sundayID($event->add_me($_POST['Sunday'], $host->get_id())); 

        $host->update_me();
        header("Location: http://www.drink-social.com/member.php?ID=".$id);
        exit();
    }

    else 
    {
        header("Location: http://www.drink-social.com/error?upload=empty");
        exit();
    }

}
?>
</body> 
</html> 
```

它通过检查帖子是否为空，但是当它查看是否有文件时，它返回 false 并将我带到我的错误页面并说没有选择文件......？我一无所知，请指教提前谢谢，抱歉这么久！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:56:46.150

对于上传文件，我正在使用此代码

假设我的输入字段为

```
<input type="file" value=""  name="file" /> 
```

现在点击提交我将收到文件为

```
if($_FILES['file']['name']){ 
    if($_FILES['file']['error']==0){
        $target = "/images/";
        $target_path = $target.time().getExtension($_FILES['file']['name']); 
        move_uploaded_file($_FILES['file']['tmp_name'], $target_path);
    }
} 
```

在这里，我正在使用当前时间戳保存文件作为名称并使用扩展名

```
function getExtension($str) {
    $i = strrpos($str,".");
    if (!$i) { return ""; }
    $l = strlen($str) - $i;
    $ext = substr($str,$i+1,$l);
    return $ext;
} 
```

现在我不确定 MongoDB，但从你的代码来看，它应该是

```
$host->set_pic($target_path); 
```

存储该图像的路径。检查文件类型和大小的其余条件可以放在此代码中的相应位置。谢谢

# c# - 与直接 C# 相比，C# 中 C dll 的重复 dllimport 调用似乎很慢

> ID：10424366
> 
> 赞同：4
> 
> 时间：2012-05-03T02:36:28.803
> 
> 标签：c#, c, performance, dllimport

我正在使用 System.Runtime.InteropServices.DllImportAttribute 测试从 C# 中的 dll 调用 C 代码的速度。C 函数生成一个自定义结构，用值填充它，执行计算，然后返回结果。这个过程我在一个循环中重复了数十万次，我记录了循环之前和循环之后的滴答数。然后我在直接的 C# 中制作了完全相同的函数并重复了这个试验。直接的 C# 方法比使用非托管 DLL 快得多。为什么？似乎没有不受管理的速度增益。

c2cstest.c

```
#include <stdio.h>
struct test {
double a;
double b;
double c;
};
_declspec(dllexport) double myCfunction(double input) {
struct test one;
one.a = input;
one.b = one.a * one.a;
one.c = one.b * one.a;
return one.c;
} 
```

cl /LD cscstest.c runCcode.cs

```
using System;
using System.Runtime.InteropServices;
class test
{
[DllImport("c2cstest.dll")]
public static extern double myCfunction (double input);
static void Main()
{
double x = 5.25;
double result = 0.0;
long tick1 = DateTime.Now.Ticks;
for(int y = 100000; y > 0; y--)
{
result = myCfunction(x);
}
long tick2 = DateTime.Now.Ticks;
Console.WriteLine("Answer is {0}.  Dllimport took {1} ticks.", result, tick2-tick1);
}
} 
```

输出：答案是 144.703125。Dllimport 花费了 250000 个滴答声。运行CScode.cs

```
using System;
using System.Runtime.InteropServices;
struct test
{
public double a;
public double b;
public double c;
}
class testclass
{
double Mycsfunction (double input)
{
test one;
one.a = input;
one.b = one.a * one.a;
one.c = one.b * one.a;
return one.c;
}
static void Main()
{
double x = 5.25;
double result = 0.0;
testclass ex = new testclass();
long tick1 = DateTime.Now.Ticks;
for(int y = 100000; y > 0; y--)
{
result = ex.Mycsfunction(x);
}
long tick2 = DateTime.Now.Ticks;
Console.WriteLine("Answer is {0}.  Straight CS took {1} ticks.", result, tick2-tick1);
}} 
```

输出：答案是 144.703125。直接 CS 需要 50000 个滴答声。

[补充：在尝试了各种方法后，我得出了与调用非托管代码技术](http://ybeernet.blogspot.com/2011/03/techniques-of-calling-unmanaged-code.html)这个家伙相同的结论，尽管他尝试的方法比我多。

结论：直接简单的函数调用是不值得的（特别是当它们被循环时）。将循环放在非托管函数中肯定会有所帮助。非常大的功能可能是值得的。无论您尝试多少种不同的方法，编组都不是一种有效的技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:11:43.667

基准很难正确；我认为，尤其是微基准。一方面，您并没有在直接的 C# 测试中测量您认为自己是什么——编译器（或者可能是抖动）认识到结果是循环不变的，因此它只运行循环一次。

这是我的机器上的结果，你`runCScode.cs`没有改变：

```
c:\temp>csc runCScode.cs
Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

c:\temp>runCScode
Answer is 144.703125\.  Straight CS took 10001 ticks. 
```

`for`以下是注释掉循环行的结果：

```
c:\temp>csc runCScode.noloop.cs
Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

c:\temp>runCScode.noloop
Answer is 144.703125\.  Straight CS took 10001 ticks. 
```

我认为运行那段代码曾经花了这么长时间很奇怪，所以我猜想由于`DateTime`某种原因实际获取值存在一些开销（我不知道为什么 - 这只是一个猜测）。实际上，我很惊讶非循环在任何时候都需要，因为我猜到编译器会将整个事情归结为将一个常量值移动到`result`. 所以，我在初始化之后添加了以下行`tick1`：

```
tick1 = DateTime.Now.Ticks; 
```

是的，没错 - 我刚刚重新`tick1`加载`DateTime.Now.Ticks`。

然后我再次运行测试：

```
c:\temp>runCScode.noloop
Answer is 144.703125\.  Straight CS took 0 ticks. 
```

（注意：公平地说，在我运行未重新加载的基准测试的大约三分之一的时间中，`tick1`我的计数为 0。但大多数运行的计数为 10000+/-1。重新加载的版本`tick1`总是报告计数为 0 滴答声）。

也就是说，正如一些人在评论中指出的那样，没有期望 C 在所有方面都比 C# 快得多，并且对于调用 C 函数的小型操作将产生由 P/Invoke 和参数/结果强加的开销编组。您还将失去对抖动执行优化的机会。所以，我认为底线是不要担心在 .NET 应用程序中使用 C 来提高性能，除非你有一个需要更快的领域，并且你有理由相信原生 C 或 C++ 可以给你一些东西无法从 C#（或 C++/CLI）获取。

这个原因不会是一些浮点运算。

最后，我认为应该说调用 C 或 C++ DLL 的主要原因之一不一定是为了性能。这是因为在您想要使用的本机 DLL 中存在一个库（甚至是单个 API），而该功能在 .NET 类中不可用。

# ios - 动态表格单元格高度（内容截断）

> ID：10424369
> 
> 赞同：3
> 
> 时间：2012-05-03T02:36:37.750
> 
> 标签：ios, uitableview, cell

我正在尝试使用具有动态高度的单元格创建一个表格视图，一切似乎都工作正常，但后来我注意到了这个奇怪的问题。当我向下滚动列表并返回时，某些单元格似乎没有完全绘制内容。

正确内容：[https ://www.dropbox.com/s/eqsx4p6dmsofrko/Screen%20Shot%202012-05-03%20at%2010.30.11%20AM.png](https://www.dropbox.com/s/eqsx4p6dmsofrko/Screen%20Shot%202012-05-03%20at%2010.30.11%20AM.png)

内容截取：[https ://www.dropbox.com/s/qqelftkc5jzetk5/Screen%20Shot%202012-05-03%20at%2010.30.19%20AM.png](https://www.dropbox.com/s/qqelftkc5jzetk5/Screen%20Shot%202012-05-03%20at%2010.30.19%20AM.png)

我在这里创建所有单元格：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ItemCell";
    ItemCell *cell = (ItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    Item *item = [self.activity objectAtIndex:indexPath.row];
    cell.projectLabel.text = item.project;
    cell.descriptionLabel.text = item.description;
    cell.timeLabel.text = item.time;
    cell.timeAgoLabel.text = item.timeAgo;
    //cell.avatar = [UIImageView item.avatar];

    cell.descriptionLabel.numberOfLines = 0;
    [cell.descriptionLabel sizeToFit];

    // remove the right arrow
    cell.accessoryType = UITableViewCellAccessoryNone;

    //[self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]] withRowAnimation: UITableViewRowAnimationNone];

    return cell;
} 
```

并使用它来更改单元格的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"ItemCell";
    ItemCell *cell = (ItemCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    CGSize descriptionHeight = [cell.descriptionLabel.text sizeWithFont:[UIFont boldSystemFontOfSize:18.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap];

    NSInteger height = cell.projectLabel.frame.origin.y + cell.projectLabel.frame.size.height;
    height += descriptionHeight.height + 30;

    NSLog(@"height: %d", height);

    return height;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:42:12.083

您是否尝试过调用 [self setNeedsDisplay] 来重新绘制表格视图？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:24:43.220

不知道为什么这段代码有效，但你永远不会在你的`tableView:cellForRowAtIndexPath:`方法中创建一个单元格。我怀疑它在你的问题中被省略了。

`[cell.descriptionLabel sizeToFit];`将这条线从你的移动`tableView:cellForRowAtIndexPath:`到这条线的上方

```
CGSize descriptionHeight = [cell.descriptionLabel.text sizeWithFont:[UIFont boldSystemFontOfSize:18.0f] constrainedToSize:CGSizeMake(265.0f, CGFLOAT_MAX) lineBreakMode:UILineBreakModeWordWrap]; 
```

在你的`tableView:heightForRowAtIndexPath:`

然后打电话

```
[cell setNeedsLayout];
[cell setNeedsDisplay]; 
```

然后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T03:15:05.807

解决方案是从数据馈送中获取文本，而不是使用出列单元格。

# haskell - 更高等级类型的 GHC 类型推断 - 分配给单型

> ID：10424375
> 
> 赞同：12
> 
> 时间：2012-05-03T02:38:00.800
> 
> 标签：haskell, types, polymorphism

我以前问过这个[问题](https://stackoverflow.com/questions/10345809/haskell-rank-two-polymorphism-compile-error)，经过大量调查后，我得出结论，GHC 仅适用于中缀`$`和`.`.

对于这个问题，我假设 GHC 遵循[RankNTypes - Haskell Prime页面上提到的系统，该页面在 arbitary](http://hackage.haskell.org/trac/haskell-prime/wiki/RankNTypes) [-rank](http://research.microsoft.com/Users/simonpj/papers/higher-rank/)中进一步详细说明。

[RankNTypes - Haskell Prime](http://hackage.haskell.org/trac/haskell-prime/wiki/RankNTypes)页面声明如下：

> 没有显式签名的参数变量在向上推理中被分配为单型，但在向下检查中可以继承任意等级的类型。

我假设“分配的单型”意味着通过将所有限定符移动到最外层来将 rank-N 类型转换为 rank-1 类型。

我也相信这就是导致我问上一个问题的异常类型错误的原因。

所以我有几个问题：

1）无论如何让GHC警告（或错误）隐式转换为单型？我上一个[问题](https://stackoverflow.com/questions/10345809/haskell-rank-two-polymorphism-compile-error)中的类型错误需要一段时间才能解决，转换为单一类型的警告会比类型错误更有帮助。
2）是否存在隐含的“分配给单一类型”是明智行为的情况，如果是这样，你能举个例子吗？
3）关于中缀`$`和`.`，这些似乎在GHC中有特殊规则。这是在哪里记录的？GHC 还有其他特殊规则吗？它们记录在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T06:54:54.087

[http://hackage.haskell.org/trac/ghc/ticket/5596](http://hackage.haskell.org/trac/ghc/ticket/5596)在这里是相关的 - 我认为没有任何官方文档。

# php - 使用 PDO 插入数据库

> ID：10424377
> 
> 赞同：2
> 
> 时间：2012-05-03T02:38:12.507
> 
> 标签：php, pdo

我正在尝试将数据插入到我服务器上的数据库中。

要连接到我的数据库，我有以下代码：

```
<?php
$host = "/homes/49/jc192699/public_html/dbase/";
$database = "EduPro.db";
$dbhandle = new PDO("sqlite:".$host.$database);

try {
    $dbhandle = new PDO("sqlite:".$host.$database);

} catch (PDOException $e) {

echo 'Connection failed: ' . $e->getMessage();
}
?> 
```

这一切都很好！我已将其包含在我的代码中，因此这不是问题。

这是我将数据插入数据库的代码：

```
<?php

$sql = "INSERT INTO USERS (`userName`, `password`) VALUES (`test, `testy`)";
  if ( $fetched = $dbhandle->query($sql)){
  $fetched->execute(PDO::FETCH_BOTH);
  echo "Success!";
  }

  else {
echo "Fail.";
}

?> 
```

由于某种原因，它没有将数据插入数据库。我知道 SQL 语句是 100% 正确的，因为我已经在其他地方进行了测试。

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:08:09.707

您正在打开两个数据库连接。将您的代码更改为

```
$host = "/homes/49/jc192699/public_html/dbase/";
$database = "EduPro.db";
try {
    $conn = new PDO("sqlite:".$host.$database);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

您不应该在查询中使用反引号而不是使用单引号。并且列不应该有任何引号。

```
try {
    $sql = "INSERT INTO USERS (userName, password) VALUES ('test', 'testy')";
    $sth = $conn->query($sql);
} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

获取您需要使用的记录

```
try {
    $sth = $conn->query('SELECT * FROM USERS');
    $rows = $sth->fetchAll(PDO::FETCH_ASSOC);
    //$rows contains the fetched records in an associative array
    var_dump($rows);
} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

在此处了解有关 PDO 的更多信息[http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:01:38.113

你为什么要反击价值观？试试单引号：

```
$sql = "INSERT INTO USERS (userName, password) VALUES ('test', 'testy')"; 
```

另外，检查您的 PHP 错误日志，它可能会给您一些见解。

根据[文档](http://us3.php.net/manual/en/pdo.exec.php)，我相信您必须使用`exec()`vs`query()`来执行非选择查询，例如插入、更新和删除。如果您打算将变量传递给`$sql`变量，您还应该阅读[prepare](http://www.php.net/manual/en/pdo.prepare.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-12T01:12:02.483

以下是一些要遵循的语法规则：

SQL 查询必须在 PHP 中引用 SQL 查询中的字符串值必须被引用 数值不能被引用 NULL 不能被引用

```
 If(isset($_POST['submit'])) {

$stmt = $db->prepare("INSERT INTO usersdata (Firstname, Lastname, 
Email,Passward)
VALUES (:name, :lstname, :email,:pass)");

// inserting a record 
```

然后将值与您的变量绑定它将起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-24T02:16:32.250

为了更安全地将数据库数据插入数据库，我相信您的代码应该看起来更像这样。

```
// First make your Database connections like so.
$host = "/homes/49/jc192699/public_html/dbase/";
$database = "EduPro.db";
try {
    $conn = new PDO("sqlite:".$host.$database);
} catch (PDOException $e) {
    echo 'Connection error: ' . $e->getMessage();
}

//then next we make the data insertion using a prepared statement.
// Try to insert the data to the database

try {
    $username = "test";
    $password = "testy";

    $sql = "INSERT INTO USERS (userName, password) VALUES ('test', 'testy')";
    $sth = $conn->query($sql);

    $stmt = $db->prepare("INSERT INTO usersdata (userName, password) VALUES (:uname, :pass)");
    $stmt->bindParam(':uname', $username);
    $stmt->bindParam(':pass', $password);
    $stmt->execute();

    echo "Data inserted "; //Just get a success message

} catch(PDOException $e) {
    echo $e->getMessage();
} 
```

# jquery - 单击不同的文本元素 - 前一个文本元素不会取消选择

> ID：10424378
> 
> 赞同：0
> 
> 时间：2012-05-03T02:38:13.293
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-resizable, nicedit

![在此处输入图像描述](../Images/3fd083347bc9fe07baf623dc29c15ac5.png)

当我单击一个 div/元素然后单击另一个时，它不会使旧 div 未被选中。

我正在使用 jquery ui 可拖动和调整大小，当我双击一个元素时，nicEdit 将用作 wisiwig。

当我双击一个元素并且 nicEdit 处于活动状态时。然后单击当前元素可调整大小和可拖动的其他元素，这很好。问题是之前选择的元素当前有一个选定的文本，您可以在上图中看到。

我正在使用 nicEdit（[http://nicedit.com/](http://nicedit.com/)）

欢迎任何建议。

谢谢。

# c - Sizeof(Struct sem_t) 出错：“sizeof”对不完整类型“struct sem_t”的无效应用

> ID：10424384
> 
> 赞同：1
> 
> 时间：2012-05-03T02:39:03.540
> 
> 标签：c

我相信我正在尝试获取 sem_t 结构的大小，它是 linux 的信号量结构，但是当我尝试动态分配 sem_t 结构数组时，它似乎无法确定它。

到目前为止，这是我的代码（我仍在构建主...我知道我仍然需要清理/关闭线程和信号量以及其他任何东西）：

```
#define _MULTI_THREADED
#include <math.h>
#include <unistd.h>     /* Symbolic Constants */
#include <sys/types.h>  /* Primitive System Data Types */
#include <errno.h>      /* Errors */
#include <stdio.h>      /* Input/Output */
#include <stdlib.h>     /* General Utilities */
#include <pthread.h>    /* POSIX Threads */
#include <string.h>     /* String handling */
#include <semaphore.h>  /* Semaphore */

//#define N 5
#define THINKING 0
#define HUNGRY 1
#define EATING 2
//#define LEFT (ph_num+4)%N
//#define RIGHT (ph_num+1)%N

sem_t mutex;
//sem_t S[N];

void * philospher(void *num);
void take_fork(int);
void put_fork(int);
void test(int);

//int state[N];
int *state;

//int phil_num[N]={0,1,2,3,4};
int N=0;
sem_t *S;

int getLeft(int phNum)
{
    return (phNum+4)%N;
}

int getRight(int phNum)
{
    return (phNum+1)%N;
}

void *philospher(void *num)
{
    while(1)
    {
        int *i = num;
        sleep(1);
        take_fork(*i);
        sleep(0);
        put_fork(*i);
    }
}

void take_fork(int ph_num)
{
    sem_wait(&mutex);
    state[ph_num] = HUNGRY;
    printf("Philosopher %d is Hungry\n",ph_num+1);
    test(ph_num);
    sem_post(&mutex);
    sem_wait(&S[ph_num]);
    sleep(1);
}

void test(int ph_num)
{
    if (state[ph_num] == HUNGRY && state[getLeft(ph_num)] != EATING && state[getRight(ph_num)] != EATING)
    {
        state[ph_num] = EATING;
        sleep(2);
        printf("Philosopher %d takes fork %d and %d\n",ph_num+1,getLeft(ph_num)+1,ph_num+1);
        printf("Philosopher %d is Eating\n",ph_num+1);
        sem_post(&S[ph_num]);
    }
}

void put_fork(int ph_num)
{
    sem_wait(&mutex);
    state[ph_num] = THINKING;
    printf("Philosopher %d putting fork %d and %d down\n",ph_num+1,getLeft(ph_num)+1,ph_num+1);
    printf("Philosopher %d is thinking\n",ph_num+1);
    test(getLeft(ph_num));
    test(getRight(ph_num));
    sem_post(&mutex);
}

int main(int argc, char *argv[])
{
    if(argc<2)
    {
        printf("Come on, now, we need a number for the number of philosphers we're going to have over for dinner.");
        return 0;
    }
    N = atoi(argv[1]);
    S=
    //S = sem_t[N];
    S=(struct sem_t *)malloc(N*sizeof(struct sem_t));
    state = malloc(N*sizeof(int));
       int i;
    pthread_t thread_id[N];
    sem_init(&mutex,0,1);
    for(i=0;i<N;i++)
        sem_init(&S[i],0,0);
    for(i=0;i<N;i++)
    {
        pthread_create(&thread_id[i],NULL,philospher,i);//&phil_num[i]);
        printf("Philosopher %d is thinking\n",i+1);
    }
    for(i=0;i<N;i++)
        pthread_join(thread_id[i],NULL);

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T02:42:28.867

这是因为`sem_t`不是结构。改为使用`sizeof(sem_t)`。

```
 S = malloc(N*sizeof(sem_t)); 
```

或者，在我看来甚至更好，

```
 S = malloc(N*sizeof(*S)); 
```

我更喜欢后者，因为它避免了`*S`.

# ruby - 如何制作 Ruby 脚本以将 .mp3 文件移动到 iTunes 文件夹？

> ID：10424388
> 
> 赞同：1
> 
> 时间：2012-05-03T02:39:50.570
> 
> 标签：ruby, shell

为了让我的音乐进入 iTunes，我必须找到它的位置，然后我必须挖掘我的文件以找到我的 iTunes 文件夹并将其复制/粘贴到我的 iTunes 文件夹中。

我想要的是一个 Ruby 脚本，它将扫描它所在的文件夹以查找以结尾的文件，`.mp3`然后将这些文件移动到我的 iTunes 文件夹中。

如果我知道文件的名称，我知道如何将文件移动到 iTunes 中，但是，我如何才能只找到`.mp3`iTunes 文件夹中的文件。我只需要一些方向来了解我可以使用什么来仅选择以 . 结尾的文件`.mp3`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:32:13.117

```
require 'find'
require 'fileutils'
Find.find('/') do |f|
  FileUtils.mv(f, "ABSOLUTE PATH TO ITUNESFOLDER") if f.match(/\.mp3\Z/)
end 
```

这可能需要一段时间，因为它将扫描其起点的整个目录树，在本例中为“/”（整个文件系统）。也许从你的主目录而不是'/'开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T05:43:26.057

您可以使用这种递归方法在多个目录中查找文件并将它们移动到您的 iTunes 文件夹中。

```
def ls_R(dirname)
   Dir.foreach(dirname) do |dir|
      dirpath = dirname + '/' + dir
      if File.directory?(dirpath)
        if dir != '.' && dir != '..'
          ls_R(dirpath)
        end
      else
        FileUtils.mv(dirpath, "PATH_TO_ITUNESFOLDER") if dirpath.match(/\.mp3\Z/)
      end
    end
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:51:09.390

对上面提供的两种解决方案的备注：有一个“自动添加到 iTunes”文件夹，您应该针对此类操作。

`....../iTunes/iTunes Media/Automatically Add to iTunes/`

这样可以更好地在 iTunes 中获取您的曲目。

# uitableview - Xcode/iOS 5 - 仅舍入 UITableView 的底部 2 个角

> ID：10424391
> 
> 赞同：0
> 
> 时间：2012-05-03T02:40:03.097
> 
> 标签：uitableview, ios5, rounded-corners

对于我正在开发的应用程序的 UI，我正在尝试为视图控制器创建圆角。我有一个 UINavigationBar 和一个 UITableView。我已经通过使用带有 UIAppearance 内容的自定义背景手动将 UINavigationBar 的顶部 2 个角弄圆了。现在我想把 UITableView 的**底部 2 个**角弄圆，这样看起来不错。我现在拥有的代码绕过了所有 4 个角落。有谁知道我怎么只能圆底2？

这是我现在在 UITableViewController 的 ViewDidLoad 方法中添加的内容。我已经导入了 QuartzCore。

```
 _tasksTableView.layer.cornerRadius=5; 
```

**非常感谢任何可以提供帮助的人！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:14:51.887

您可以创建新的 CAShapeLayer 并将其路径设置为使用创建的 bezierPath

```
+ (UIBezierPath *)bezierPathWithRoundedRect:(CGRect)rect 
                          byRoundingCorners:(UIRectCorner)corners 
                                cornerRadii:(CGSize)cornerRadii 
```

将角设置为`(UIRectCornerBottomLeft | UIRectCornerBottomRight)`新图层的字节将在两个底角具有圆角。

`mask`接下来，通过在表视图层上设置属性，使用刚刚创建的形状层屏蔽 _tasksTableView.layer 。

* * *

*注意：形状层不应**有**任何超层。*

*`CGPath`注意：在将贝塞尔路径设置为`path`形状图层的属性之前，需要通过调用贝塞尔路径将贝塞尔路径转换为 ​​CGPathRef 。*

# .net - 合并不同类型的 .NET 4.0 任务/延续

> ID：10424392
> 
> 赞同：3
> 
> 时间：2012-05-03T02:40:05.040
> 
> 标签：.net, c#-4.0, asynchronous, task, async-await

我目前正在实现一个`System.Web.Http.IActionFilter`调用内部服务来确定当前请求是否可以继续的方法。我遇到的问题是`Task<T1>`基于 a 封装的一段逻辑返回 a `Task<T2>`。

一个例子可能会有所帮助。

内部服务 API 使用 Tasks 实现。使用**.NET 4.5**的 async/await 逻辑很简单：

```
public async Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
{
    UserAuthenticationResult authResult = await HitInternalServiceAsync();

    if (!authResult.IsAuthenticated)
    {
        throw new HttpResponseException("User is not authenticated", HttpStatusCode.Unauthorized);
    }

    return await continuation();
} 
```

**然而，使用.NET 4.0**中的旧任务 API 会更加困难；

```
public Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
{
    return HitInternalServiceAsync()
            .ContinueWith(t1 => {
                UserAuthenticationResult authResult = t1.Result;

                if (!authResult.IsAuthenticated)
                {
                    throw new HttpResponseException("User is not authenticated", HttpStatusCode.Unauthorized);
                }

                //Hack hack - this blocks the thread until the task retuned by continuation() completes
                return continuation().Result;
            });
} 
```

当身份验证检查成功时，困难的部分就来了——然后我想等待延续函数返回的任务。

使用 .NET 4.0 时，我似乎在等待任务完成时明确阻止，而不是指示 Tasks API在*我*`continuation()`的任务完成后自动继续执行任务。`continuation()`

 *## 问题：这是在 .NET 4.0 中实现此行为的唯一方法吗？

给定一个足够复杂的内部服务 API，我可以很容易地看到等待其他任务的任务数量迅速增加。

**编辑：**看起来上面的**4.0**代码也不可行 - 因为延续 lambda 不会在 ASP.NET 线程上下文服务中执行，如 HttpContext.Current 不可用。更好的实现将是...

```
public Task<HttpResponseMessage> ExecuteActionFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
{
    Task<UserAuthenticationResult> authResultTask = HitInternalServiceAsync();

    var authResult = authResultTask.Result;

    if (!authResult.IsAuthenticated)
    {
        throw new HttpResponseException("User is not authenticated", HttpStatusCode.Unauthorized);
    }

    return continuation();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T11:09:22.070

您的问题是，如果您不使用`Result`,`ContinueWith()`将返回`Task<Task<HttpResponseMessage>>`而不是`Task<HttpResponseMessage>`您需要的。

幸运的是，已经有一种方法可以将 any 转换`Task<Task<T>>`为`Task<T>`: [`Unwrap()`](http://msdn.microsoft.com/en-us/library/dd781129.aspx)。所以只是`return continuation();`从`ContinueWith()`lambda 然后调用`Unwrap()`结果。

如果您希望继续在 ASP.NET 上下文中执行，您可以使用[`TaskScheduler.FromCurrentSynchronizationContext()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T12:59:07.213

> 问题：这是在 .NET 4.0 中实现此行为的唯一方法吗？

`async`/`await`是 C# 5.0 功能，而不是 .NET 4.5 功能。它确实使用了 .NET 4.5 中引入的某些类型，但没有其他原因需要新的运行时。

如果您使用的是 VS2010 (C# 4.0)，svick 的答案是最好的。

但是，如果您使用的是 VS11 Beta (C# 5.0)，还有另一种选择：您可以使用异步[目标包](http://blogs.msdn.com/b/bclteam/archive/2012/04/26/async-targeting-pack-for-visual-studio-11-now-available-for-net-4-and-silverlight-5-greg.aspx)编写在 .NET 4.0 上运行的代码。目标包具有 .NET 4.0 的这些新类型。`async``await`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T03:20:04.440

而不是 continuation().Result 使用 continuation().Wait()

task.wait 是阻止任务的适当方式。

根据 MSDN 文档，Task.Wait 方法：等待任务完成执行。

[http://msdn.microsoft.com/en-us/library/dd235635.aspx](http://msdn.microsoft.com/en-us/library/dd235635.aspx)

以下似乎相关的问题，答案 [是新的 C# 5.0 'async' 和 'await' 关键字是否使用多个内核？](https://stackoverflow.com/questions/9898441/do-the-new-c-sharp-5-0-async-and-await-keywords-use-multiple-cores)*

# sql - 如何按星期对日期字段进行分组，星期从星期六开始？

> ID：10424395
> 
> 赞同：16
> 
> 时间：2012-05-03T02:40:12.067
> 
> 标签：sql, sql-server

当我看到这个问题的答案时，我知道我会去'duh'，但尽管如此：

如何按星期对日期字段进行分组，星期从星期六开始？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-03T02:54:47.043

您需要首先使用[**DATEFIRST**](http://msdn.microsoft.com/en-us/library/ms181598.aspx)设置`Saturday`为一周的第一天。值**1**表示星期一，值**6**表示星期六。然后，您可以将[**DATEPART**](http://msdn.microsoft.com/en-us/library/ms174420.aspx)与`week`or`wk`或`ww`一起使用来对日期列值进行分组。

您可以在下面的示例数据中看到日期值`2012-01-07`和`2012-01-08`分组在第**2**周下，因为*2012-01-07*是*星期六*。*任何一年的1 月 1 日*始终是一年中的第一周。

[**单击此处查看 SQL Fiddle 中的输出。**](http://sqlfiddle.com/#!6/8a0b4/3)

*脚本*：

```
CREATE TABLE weekdays
(
    datevalue    datetime NOT NULL
  , numericvalue INT      NOT NULL
);

INSERT INTO weekdays (datevalue, numericvalue) VALUES
  ('2012-01-01', 4),
  ('2012-01-02', 1),
  ('2012-01-07', 2),
  ('2012-01-08', 8),
  ('2012-01-14', 3),
  ('2012-01-15', 2),
  ('2012-01-19', 6);

SET DATEFIRST 6;

SELECT      DATEPART(wk, datevalue)     weekno
        ,   SUM(numericvalue)           totalvalue
FROM        weekdays
GROUP BY    DATEPART(wk, datevalue) 
```

*输出*：

```
weekno totalvalue
------ ----------
  1        5
  2       10
  3       11 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-25T14:53:47.180

您应该将该`DATEPART`功能用作：

```
SELECT      DATEPART(wk, Date), SUM(Value)
FROM        Table
GROUP BY    DATEPART(wk, Date) 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T02:53:14.270

好的，未经测试，因为我没有方便的 SQL Server，但直接转换为 MySQL 似乎可以按预期工作：

```
SELECT * 
  FROM (SELECT your_date_field, 
               DATEADD(D, 
               -(DATEPART(DW,your_date_field) MOD 7), your_date_field) AS saturday 
          FROM your_table) 
 GROUP BY saturday
 ORDER BY your_date_field 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-16T12:21:46.760

对此有真正的问题，但这会阻止额外的表和 DATEFIRST，这可能会被阻止。这是我使用已知日期方法和正在检索的通话记录的答案。

19000101 = 星期一 - 总是容易记住，因此将星期六设置为 19000106

```
SELECT MIN(dateadd(day, datediff(
day,'19000106', CallRecords.CallStartTime)/7*7, '19000106')) 
AS CallStartTime
FROM CallRecords 
GROUP BY DATEDIFF(day,'19000106', CallRecords.CallStartTime)/7 
```

在 SQL Server 和 SQL Server Compact 4.0 上测试

# php - 未定义索引：用户标识

> ID：10424397
> 
> 赞同：-1
> 
> 时间：2012-05-03T02:40:15.513
> 
> 标签：php, mysql

我正在为我的项目创建一个编辑用户配置文件。我遇到了这个错误“注意：未定义的索引：第 18 行 C:\xampp\htdocs\HelloWorld\EditProfile.php 中的用户 ID”。我花了一个小时试图找出错误的原因，但我似乎找不到它。我在这里遵循了本指南[php - 论坛帖子的“编辑”功能，](https://stackoverflow.com/questions/3342258/edit-function-for-forum-posts-and-such)这是我的代码：

**编辑配置文件.php**

```
<?php 
// connect to SQL
$dbcnx = mysql_connect("localhost", "root", "2345fypj");
if (!$dbcnx)
  {
  echo( "<P>Unable to connect to the database server at this time.</P>" );
  exit();
}

// connect to database
$dbcon = mysql_select_db("my_db", $dbcnx);
if (!$dbcon) {
  echo( "<P>Unable to locate DB table at this time.</P>" );
  exit();
}

//data preparation for the query
$id = intval($_GET['userid']);

// selects title and description fields from database
$sql = "SELECT * FROM user_profile WHERE userid=$id";
$result = mysql_query($sql) or die(mysql_error());        
# retrieved by using $row['col_name']
$row = mysql_fetch_array($result);

?>

<h3>Edit</h3>
<form action="save_edit.php" enctype="multipart/form-data" method="post" name="myForm" />
  <table>
    <tr>
      <td><b>Name</b></td>
      <td><input type="text" size="70" maxlength="100" name="title" value="<?php echo $row['name'] ?>"></td>
    </tr>
    <tr>
      <td><b>Age</b></td>
      <td><input type="text" size="70" maxlength="100" name="title" value="<?php echo $row['age'] ?>"></td>
    </tr>
  </table>
  <input type="hidden" name="id" value="<?php echo $id; ?>" />
  <input name="enter" type="submit" value="Edit">
</form>

<?php 
mysql_close($dbcnx);
?> 
```

**save_edit.php**

```
<?php
// connect to SQL
$con = mysql_connect("localhost", "root", "2345fypj");
if (!$con) {
  echo( "<P>Unable to connect to the database server at this time.</P>" );
  exit();
}
// connect to database
$dbcon = @mysql_select_db("user_profile", $con);
if (!$dbcon) {
  echo( "<P>Unable to locate DB table at this time.</P>" );
  exit();
}

#data preparation for the query
$id = intval($_POST["userid"]);
foreach ($_POST as $key => $value) $_POST[$key] = mysql_real_escape_string($value);

$sql = "UPDATE user_profile SET 
        name='$_POST[name]', 
        age='$_POST[age]', 
        WHERE userid=$id";

if (!mysql_query($sql,$con)) {
  die('Error: ' . mysql_error());
}

mysql_close($con);
header ("location: http://www.domain.com/url_to_go_to_after_update");
?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:47:45.483

```
$id = intval($_GET['userid']); 
```

这意味着将`$id`变量设置为 URL 中的“userid”变量。例如，如果您的 URL 是 mySite.com?userid=12，则 $id 将设置为“12”。如果您的 URL 在其末尾部分没有“username=aValue”，您将收到您所看到的错误。:)

您可以将其更改为此设置默认值：

```
$id = (isset($_GET['userid']) ? intval($_GET['userid']) : -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:46:22.627

问题是您尝试使用`$_GET['userid']`未定义的变量。此变量引用 URL 中的 GET 参数（例如`EditProfile.php?userid=42`）。如果此参数未在 URL 中传递，您将收到此警告。您应该检查变量的存在：

```
if (!isset($_GET['userid'])) {
  die("Parameter is missing!");  
}

$id = intval($_GET['userid']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:47:44.417

在尝试访问它之前，您可能应该确保正确设置了该值。事先尝试使用 isset 函数。

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T03:15:14.053

您的代码的问题除了在使用之前使用变量之外，您在使用 intval 设置为默认值时继续执行查询（将始终返回至少 0），如果传递了非数字字符，您将始终更新表中的第 0 行用户，您应该做的是不更新任何内容并返回错误的用户。您在查询中列`,`后也有胭脂。`age`

```
<?php 
if(isset($_POST["userid"]) && is_numeric($_POST["userid"])){

    $_POST = array_walk($_POST,'mysql_real_escape_string');

    $sql = "UPDATE `user_profile` SET `name`='{$_POST['name']}', `age`='{$_POST['age']}' 
            WHERE `userid` = {$_POST['userid']}";
    mysql_query($sql);

}else{
    header('Location: ./failed');
}
?> 
```

# c# - 阻止或禁止使用 Parallel.ForEach

> ID：10424401
> 
> 赞同：1
> 
> 时间：2012-05-03T02:40:39.283
> 
> 标签：c#, c#-4.0, parallel-processing, parallel.foreach

我在上面编写了一个库，`System.Data.SQLite`并意识到它（我的库）在使用`Parallel.ForEach`. 我最终可能会调试这个（即如果我得到/花时间），最有可能通过锁定正确的部分，但现在假设我只想阻止使用`Parallel.ForEach`，或强制使用我的库以允许（或导致）只有一个线程，我将如何进行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T02:44:10.840

您无法控制外部代码如何使用您的 API。如果这是您在发布之前绝对无法解决的问题，那么在您的文档（XML 注释和任何类型的“帮助文件”）中非常明确地说明失败案例将是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:52:00.857

一些快速的线程静态属性可能会解决您的并发问题，但这听起来像是更大的冰山一角。解决根本原因，而不是症状。

# json - LINQ to Entity 交叉表

> ID：10424402
> 
> 赞同：0
> 
> 时间：2012-05-03T02:40:46.887
> 
> 标签：json, linq, crosstab

LINQ 是否可以进行交叉表查询以添加新列？这些列来自第二个和第三个表，需要转换为 JSON 才能显示在 Telerik 表中。

一个表包含需要显示的列的名称，另一个包含每列的行的值，这与具有主要相关数据的第一个表有关。

我研究了动态创建额外的列，但也因为它们需要通过 JSON 序列化以及在任何类中动态创建新属性的困难而陷入困境。

任何想法都会有所帮助。

问候

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:43:41.730

我希望这会有所帮助，尽管我不确定我是否完全理解您的要求...

由于您无论如何都要序列化为 JSON（因此可能并不太关心模式/类型信息），我建议您只使用**字典**并以这种方式填充您的数据。听起来您可以运行某种嵌套循环，循环遍历一个表中的列名，并从第二个表中提取每一列的值。

**编辑**

顺便说一句，可以使用 System.ComponentModel 执行动态属性，尽管从您描述场景的方式来看，这似乎有点过分（例如，您不需要数据绑定）。如果您有兴趣，这里有一篇关于 SO 的好帖子： [数据绑定动态数据](https://stackoverflow.com/questions/882214/data-binding-dynamic-data)

# mongodb - MongoDB $slice（嵌入式数组分页）

> ID：10424403
> 
> 赞同：6
> 
> 时间：2012-05-03T02:40:49.027
> 
> 标签：mongodb, mongoose, mongodb-query, paging, nosql

我有这个架构：

```
article: {
    subject,
    comments: []
} 
```

如果我有 8 条评论，然后查询

```
 article.find({}, {
     comments: {
         $slice: [ -10, 5 ]
     }
 }); 
```

我得到了从索引 0 到索引 4 的
评论，但我只想返回从索引 0 到索引 2 的评论，因为分页。
（第 1 页 $slice[ -5, 5 ] 从索引 3 到索引 7，第 2 页 $slice[ -10, 5 ] 从索引 0 到索引 2）

现在我必须传递另一个参数“lastId”来比较每个评论并删除“_id”<“lastId”，但我认为这有点hacky。

有人对此有很好的解决方案吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T09:54:18.300

所以我要说的是，您应该切换架构以将注释作为单独的文档留下，因为这是一个未绑定的数组，它将使您的查询更有效率。我会解释的。

当您将嵌入式文档添加到不是固定大小的数组时，mongoDB 可能需要随着文档的增长而移动文档，更改填充因子并导致碎片（填充因子是 mongodb 方面的猜测，您的文档将有多大增长，它会为这种情况预先分配更多空间）。

您也被限制为 16MB 的公关文件，所以想象一下，如果您收到一个疯狂的热门话题，或者您决定使用其他元数据扩展评论，那么您将打破这个障碍是可行的。检索大文档也是昂贵且耗时的。

一般来说，如果嵌入的文档不是未绑定的数组，它们就很棒。因此，保留前 10 条评论的列表会很好，但保留 1000 多条评论是不好的。

下面有一些很好的介绍

[http://www.10gen.com/presentations/mongodb-berlin/2012/10-key-performance-indicators](http://www.10gen.com/presentations/mongodb-berlin/2012/10-key-performance-indicators) [http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example](http://www.10gen.com/presentations/mongosv-2011/schema-design-by-example)

我认为很快就会有更多关于模式设计的工作，从长远来看会更有帮助。我认为诚实是最难的。我知道，我花了一段时间才弄清楚与关系模型的区别。

# cakephp - CakePHP 可包含在关联模型上

> ID：10424405
> 
> 赞同：1
> 
> 时间：2012-05-03T02:41:31.557
> 
> 标签：cakephp, model, cakephp-2.0, containable

我有一个设置，其中有`Books` `Users`和`Logs`。每个日志都有一本书和一个用户，我试图检索所有书籍的列表，而不考虑用户，但随后也检索与该书籍关联的日志（递归设置为 1），但随后只检索日志当前登录的用户。

希望这很清楚。我尝试使用 Containable ，就像这样：

`$this->Book->contain('Log.user_id = 2');`

但不幸的是，这忽略了用户 2 没有日志的书籍。我是否正确地解决了这个问题，我只是没有正确使用可包含的内容，还是我做错了。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:09:56.247

```
$this->Book->Behaviors->attach('Containable');

$this->Book->find('all', array(
                            'contain' => array(
                                           'Log.user_id' => 2
                                         )
                         )
                  ); 
```

# amazon-s3 - 使用 Splunk 监控 Amazon S3 日志？

> ID：10424407
> 
> 赞同：5
> 
> 时间：2012-05-03T02:41:45.833
> 
> 标签：amazon-s3, amazon-web-services, splunk, access-log

我们拥有庞大的扩展用户网络，我们使用徽章进行跟踪。每月的总流量约为 6000 万次展示。我们目前正在考虑从一个相当慢的、基于数据库的日志记录解决方案（基于 PHP 定制构建——混乱......）切换到一个依赖于 Amazon S3 日志和 Splunk 的简单的基于日志的替代方案。

在将 Splunk 用于其他一些分析任务之后，我真的很喜欢它。但目前尚不清楚如何在系统中设置像 S3 这样的源。似乎远程源需要安装通用转发器，这不是一个选项。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-08T21:46:31.560

答案很晚，但我一直在寻找同样的东西，并找到了一个 Splunk 应用程序，可以满足您的需求，[http://apps.splunk.com/app/1137/](http://apps.splunk.com/app/1137/)。我还没有尝试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T01:41:18.597

我建议将 j-son 预处理数据记录到 documentdb 数据库中。例如，结合 azure documentdb 使用适合您的场景的 azure 队列或类似的服务总线消息传递技术。因此，我将保留您基于数据库的方法并将其修改为无模式且易于扩展的基于文档的数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-16T04:39:32.807

您使用[Splunk Add-On for AWS](https://splunkbase.splunk.com/app/1876/)。

这是我的理解，

1.  创建一个 Splunk 实例。使用 splunk 的网站版本或本地 AMI 创建运行 splunk 的 EC2。

2.  在 EC2 上安装 Splunk Add-On for AWS 应用程序。

3.  根据输入日志类型（例如 Cloudtrail 日志、配置日志、通用日志等）配置插件并提供 AWS 账户 ID 或 IAM 角色等参数。

4.  附加组件将在指定时间（默认为 30 秒）后自动 ping AWS S3 源并获取最新日志。

对于通用用例（如我们的），您可以尝试[为 Splunk 配置通用 S3 输入](https://docs.splunk.com/Documentation/AddOns/released/AWS/S3)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-28T21:38:25.770

我使用来自 AWS Marketplace 的[http://www.insight4storage.com/](http://www.insight4storage.com/)按前缀、存储桶或存储类别跟踪我的 AWS S3 存储使用总量；另外，它按前缀和每个存储桶向我显示了以前的版本存储。除了其 UI 和 Web 服务 API 之外，它还具有将 S3 数据保存为可能适用于您的用例的 splunk 格式日志的设置。

# c# - Mono 2.10.9 中的 WCF 性能问题

> ID：10424416
> 
> 赞同：2
> 
> 时间：2012-05-03T02:42:45.327
> 
> 标签：c#, linux, wcf, performance, mono

我有一个简单的 WCF 主机和客户端，它们在 Windows 中运行良好，但在 Mono 2.10.8/9 上性能极差。

WCF 主机在自托管控制台应用程序中运行。WCF 客户端也是一个简单的控制台应用程序。他们使用 netTcpBinding 没有任何安全性。

这是主机 app.config：

```
<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MetadataBehavior">
          <serviceMetadata />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="MetadataBehavior" name="EmployeeServiceLib.EmployeeService">
        <clear />
        <endpoint address="net.tcp://localhost:8888/EmployeeService/tcp"
          binding="netTcpBinding" bindingConfiguration="ultra" name="EmployeeService"
          contract="EmployeeServiceLib.IEmployeeService" listenUriMode="Explicit" />
      </service>
    </services>
    <bindings>
      <netTcpBinding>
        <binding name="ultra" transactionFlow="false" transferMode="Streamed">
          <reliableSession enabled="false" />
          <security mode="None" />
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

客户端 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="EmployeeService" closeTimeout="00:01:00" openTimeout="00:01:00"
                    receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false"
                    transferMode="Streamed" transactionProtocol="OleTransactions"
                    hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                    maxBufferPoolSize="65536" maxBufferSize="65536" maxConnections="10"
                    maxReceivedMessageSize="1048576">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <reliableSession ordered="true" inactivityTimeout="00:10:00"
                        enabled="false" />
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:8888/EmployeeService/tcp"
                binding="netTcpBinding" bindingConfiguration="EmployeeService"
                contract="EmployeeService.IEmployeeService" name="EmployeeService" />
        </client>
    </system.serviceModel>
</configuration> 
```

WCF 服务类：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single,
    AddressFilterMode = AddressFilterMode.Any)]
public class EmployeeService : IEmployeeService
{
    private readonly List<Employee> m_Employees = new List<Employee>();

    #region IEmployeeService Members

    public void AddEmployee(Employee employee)
    {
        m_Employees.Add(employee);
    }

    // ... snipped ...
} 
```

客户所做的是调用 OperationContract 100 次并对调用进行基准测试。

```
var employee = new Employee { ... };
var client = new EmployeeServiceClient("EmployeeService", "net.tcp://localhost:8888/EmployeeService/tcp");
client.Open();
Console.Write("Adding 100 employees...");
var startTime = Environment.TickCount;
for (int i = 0; i < 100; i++)
{
    client.AddEmployee(employee);
}
var timeTaken = Environment.TickCount - startTime;
Console.WriteLine(" Done."); 
```

基准测试结果：

.NET 4.0 = 62 毫秒

单声道 2.11.1 = 1672 毫秒

在 VM 中运行的 Debian 6 中的 Mono 2.10.9 = 9632 毫秒（CPU 使用率徘徊在 1% 左右）

我可以做些什么来加快 WCF 在 Debian 中 Mono esp 上的性能？

# configuration - em1: 看门狗超时 -- 重置 virtualbox

> ID：10424420
> 
> 赞同：1
> 
> 时间：2012-05-03T02:43:12.010
> 
> 标签：configuration, virtualization, virtualbox, freebsd

每个人。我尝试在 virtualbox 机器上配置我的 freebsd 的网络适配器。最初设置时，我做对了。但是，在几次重新启动后，我的虚拟机给了我一条错误消息：说“em1:Watchdog timeout --resetting”

我试图用谷歌搜索它，但没有适合我的解决方案。

以下是我的 VM 的网络适配器：

*   第 1 部分：NAT
*   Adapter2：仅主机适配器 vboxnet0

在我的 Virtualbox 设置中：仅主机网络：适配器：

*   IPv4 地址：192.168.56.10
*   IPv4 网络掩码：255.255.255.0

在我的 FreeBSD 虚拟机 /etc/rc.conf

*   ifconfig_em0="DHCP"
*   ifconfig_em1="inet 192.168.56.11 网络掩码 255.255.255.0"

此外，奇怪的是，例如，如果在 ttyv0 显示超时错误消息，当我在不同的 ttyv[1-9] 登录时，将不会显示错误消息。但在 ttyv0 中，它仍然给了我信息。

而且，就 em1 的功能而言，它确实有效。

我对这个问题一无所知。希望任何人都可以给我一个解决方案或建议。那挺棒的！非常感谢。

Freebsd 版本：9.0-RELEASE FreeBSD 9.0-RELEASE i386 虚拟机：4.1.2 r73507

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:14:30.650

我过去也遇到过同样的问题。这与 FreeBSD 无关，这是提供给来宾的 Virtualbox 适配器的问题。FreeBSD 只是向您展示系统之间存在不一致。

最初我在 Virtualbox 中使用英特尔适配器。我只是将设置>网络>适配器下每个适配器的驱动程序更改为“PCnet-PCI II”。然后网络是稳定和一致的。

# php - 如何使用 facebook setUrlHandler？

> ID：10424428
> 
> 赞同：0
> 
> 时间：2012-05-03T02:44:16.997
> 
> 标签：php, ajax, facebook

我正在使用一个应用程序（“http://apps.facebook.com/greetingz”），这是我使用的 ajax 部分，我可以发送一个请求，并且接收者也可以接收通知，但是当接收者点击通知时，它会直接转到画布页面“apps.facebook.com/greetingz”，实际上我想显示一个不同的页面..请帮忙！

```
 <?php 
         $app_id = "127736900693315";

         $canvas_page = "http://apps.facebook.com/greetingz";

         $message = $_POST['varx'];

         $requests_url = "https://www.facebook.com/dialog/apprequests?app_id=" 
                . $app_id . "&redirect_uri=" . urlencode($canvas_page)
                . "&message=" . $message;

         if (empty($_REQUEST["request_ids"])) {
            echo("<script> top.location.href='" . $requests_url . "'</script>");

         } else {
           // echo "Request Ids: ";
            //print_r($_REQUEST["request_ids"]);
            echo $message;
         }
?> 
```

我如何在这个应用程序中使用下面的代码

```
 function onUrl(data) {
 if (data.path.indexOf("games.achieves") != -1) {
     console.log('I will process some achievement now.');
 } else if (data.path.indexOf("request_ids") != -1) {
     console.log('I will process some request now.');
 } else {
     // default behaviour
     window.location = data.path;
 } 
```

}

FB.Canvas.setUrlHandler(onUrl);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:02:46.950

初始化 FB api 后，您必须延迟设置处理函数。

```
FB.init(params);
setTimeout(function() { FB.Canvas.setUrlHandler(onUrl) }, 5000); 
```

使用这种方式，我得到了这个功能。

# ios - iOS - 动画和性能？

> ID：10424431
> 
> 赞同：0
> 
> 时间：2012-05-03T02:44:40.507
> 
> 标签：ios, core-animation

*   将 shouldRasterize 设置为 CALayer 是否会将相同的行为应用于其子层？

*   我的应用程序为主 UINavigationController 设置动画，以显示隐藏在 UINavigationController 后面的菜单。为我的 ViewControllers 的每一层设置光栅化是一个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:56:35.980

ShouldRasterize 是[CALayer](http://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)的属性，而不是 UIView，是的，它确实会影响子*层*。

光栅化在屏幕外绘制东西，然后在屏幕上合成它们，这很漂亮，对阴影非常有用，否则就没那么有用了。

# internet-explorer - 从其他程序设置编辑 Internet Explorer 的打开链接

> ID：10424437
> 
> 赞同：0
> 
> 时间：2012-05-03T02:45:33.970
> 
> 标签：internet-explorer

我想通过编码工作（例如 html 或 meta）**从其他程序设置更改 Internet Explorer 的打开链接。**那可能吗？

# python - 来自 App Engine 的 Google Cloud SQL 的连接限制是什么，以及如何最好地重用数据库连接？

> ID：10424442
> 
> 赞同：11
> 
> 时间：2012-05-03T02:46:30.900
> 
> 标签：python, mysql, google-app-engine, wsgi, google-cloud-sql

我有一个 Google App Engine 应用程序，它使用 Google Cloud SQL 实例来存储数据。我需要我的实例能够通过 restful 调用一次为数百个客户端提供服务，每个调用都会导致一个或几个数据库查询。我已经包装了需要数据库访问的方法，并将数据库连接的句柄存储在 os.environ 中。请参阅[此](https://stackoverflow.com/a/10162674/379037)SO 问题/答案，了解我的基本操作方式。

但是，一旦有几百个客户端连接到我的应用程序并触发数据库调用，我就会开始在 Google App Engine 错误日志中收到这些错误（当然，我的应用程序返回 500）：

```
could not connect: ApplicationError: 1033 Instance has too many concurrent requests: 100 Traceback (most recent call last): File "/base/python27_run 
```

有经验的 Google App Engine 和 Google Cloud SQL 用户有什么建议吗？提前致谢。

这是我在需要数据库连接的方法周围使用的装饰器的代码：

```
def with_db_cursor(do_commit = False):
    """ Decorator for managing DB connection by wrapping around web calls.
    Stores connections and open connection count in the os.environ dictionary
    between calls.  Sets a cursor variable in the wrapped function. Optionally
    does a commit.  Closes the cursor when wrapped method returns, and closes
    the DB connection if there are no outstanding cursors.

    If the wrapped method has a keyword argument 'existing_cursor', whose value
    is non-False, this wrapper is bypassed, as it is assumed another cursor is
    already in force because of an alternate call stack.

    Based mostly on post by : Shay Erlichmen
    At: https://stackoverflow.com/a/10162674/379037
    """

    def method_wrap(method):
        def wrap(*args, **kwargs):
            if kwargs.get('existing_cursor', False):
                #Bypass everything if method called with existing open cursor
                vdbg('Shortcircuiting db wrapper due to exisiting_cursor')
                return  method(None, *args, **kwargs)

            conn = os.environ.get("__data_conn")

            # Recycling connection for the current request
            # For some reason threading.local() didn't work
            # and yes os.environ is supposed to be thread safe 
            if not conn:                    
                conn = _db_connect()
                os.environ["__data_conn"] = conn
                os.environ["__data_conn_ref"] = 1
                dbg('Opening first DB connection via wrapper.')
            else:
                os.environ["__data_conn_ref"] = (os.environ["__data_conn_ref"] + 1)
                vdbg('Reusing existing DB connection. Count using is now: {0}',
                    os.environ["__data_conn_ref"])        
            try:
                cursor = conn.cursor()
                try:
                    result = method(cursor, *args, **kwargs)
                    if do_commit or os.environ.get("__data_conn_commit"):
                        os.environ["__data_conn_commit"] = False
                        dbg('Wrapper executing DB commit.')
                        conn.commit()
                    return result                        
                finally:
                    cursor.close()                    
            finally:
                os.environ["__data_conn_ref"] = (os.environ["__data_conn_ref"] -
                        1)  
                vdbg('One less user of DB connection. Count using is now: {0}',
                    os.environ["__data_conn_ref"])
                if os.environ["__data_conn_ref"] == 0:
                    dbg("No more users of this DB connection. Closing.")
                    os.environ["__data_conn"] = None
                    db_close(conn)
        return wrap
    return method_wrap

def db_close(db_conn):
    if db_conn:
        try:
            db_conn.close()
        except:
            err('Unable to close the DB connection.', )
            raise
    else:
        err('Tried to close a non-connected DB handle.') 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T17:09:17.653

简短的回答：您的查询可能太慢了，并且 mysql 服务器没有足够的线程来处理您尝试发送的所有请求。

长答案：

作为背景，Cloud SQL 有两个相关的限制：

*   连接：这些对应于代码中的“conn”对象。服务器上有相应的数据结构。一旦这些对象过多（当前配置为 1000 个），最近最少使用的将自动关闭。当您下方的连接关闭时，您将在下次尝试使用该连接时收到未知连接错误 (ApplicationError: 1007)。
*   并发请求：这些是在服务器上执行的查询。每个正在执行的查询都会占用服务器中的一个线程，因此限制为 100。当并发请求过多时，后续请求将被拒绝并出现您收到的错误（ApplicationError: 1033）

听起来连接限制不会影响您，但我想提一下以防万一。

对于并发请求，增加限制可能会有所帮助，但通常会使问题变得更糟。我们过去看到过两种情况：

*   死锁：长时间运行的查询正在锁定数据库的关键行。所有后续查询都阻塞在该锁上。应用程序在这些查询上超时，但它们继续在服务器上运行，占用这些线程直到触发[死锁超时。](http://dev.mysql.com/doc/refman/5.5/en/innodb-deadlock-detection.html)
*   慢查询：每个查询都非常非常慢。这通常发生在查询需要临时文件排序时。应用程序超时并重试查询，而第一次尝试查询仍在运行并计入并发请求限制。如果你能找到你的平均查询时间，你可以估计你的 mysql 实例可以支持多少 QPS（例如，每个查询 5 毫秒意味着每个线程 200 QPS。由于有 100 个线程，你可以做 20,000 QPS。50 毫秒每个查询意味着 2000 QPS。）

您应该使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.5/en/explain.html)和[SHOW ENGINE INNODB STATUS](http://dev.mysql.com/doc/refman/5.5/en/show-engine.html)来查看这两个问题中的哪一个。

当然，也有可能你只是在你的实例上驱动了大量的流量并且没有足够的线程。在这种情况下，无论如何，您可能会最大化实例的 cpu，因此添加更多线程将无济于事。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-01T04:02:05.347

我从文档中阅读并注意到有 12 个连接/实例限制：

查找“每个 App Engine 实例与 Google Cloud SQL 实例的并发连接不能超过 12 个”。在[https://developers.google.com/appengine/docs/python/cloud-sql/](https://developers.google.com/appengine/docs/python/cloud-sql/)

# python - 在 Rackspace Cloud Files Python API 中设置 Access-Control-Allow-Origin (CORS)

> ID：10424443
> 
> 赞同：0
> 
> 时间：2012-05-03T02:46:31.177
> 
> 标签：python, cors, rackspace-cloud

我正在尝试在我的 Rackspace 云文件上[启用 CORS 。](http://enable-cors.org/)根据[文档](http://docs.rackspace.com/files/api/v1/cf-devguide/content/Assigning_CORS_Headers_to_Requests-d1e2120.html)，我可以添加`Access-Control-Allow-Origin`标题，但我不知道如何使用[Python`python-cloudfiles`模块 API](http://packages.python.org/python-cloudfiles/)来做到这一点：

```
 conn = cloudfiles.get_connection('apaidnerd', 's3cr3t')
  container = conn.get_container('warez')

  obj = container.create_object('foo.png')
  obj.load_from_filename('/path/to/foo.png')

  # ...what's next? 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:23:09.623

使用 的未记录`headers`属性`Object`：

```
obj.headers['Access-Control-Allow-Origin'] = '*'                                               
obj.sync_metadata() 
```

# javascript - 如何检测对生成元素的点击？

> ID：10424444
> 
> 赞同：1
> 
> 时间：2012-05-03T02:46:51.907
> 
> 标签：javascript, jquery, json

我正在从 JSON 数据中创建一组元素：示例：

```
{
'name':'form',
'elements':[
{'name':'bt1','type':'button','value':'hello','order':'1'},
{'name':'img1','type':'image','value':'http://www.images.com/img.jpg','order':'2'}]
} 
```

我用这个 json 做的是创建一个表单，其中包含“元素”中描述的元素，代码如下：

（我在 mumbo jumbo + jquery 代码中有这个草稿）

```
$('#container').html();//clears the container
for each element in elements do
    switch element.type
          case 'button':
          $('#container').append('<input type="submit" value="'+element.value + ... etc');
          end case
          case 'image':
          insert image bla bla bla
    end switch
end for each 
```

我想检测一个元素是否被点击或其他类型的动作，如鼠标悬停等。我如何将它绑定到元素？另外，如何在不破坏元素的情况下更新元素？

**编辑**：我暗示了一些重要的事情，我的错：我需要将元素 javascript 对象中的数据与生成的 html 元素链接起来。触发操作时我检索的数据字段。这就是这一切的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:51:09.980

你有两个选择。您可以在创建元素后绑定侦听器，如下所示：

```
var $input = $('<input type="submit" value="'+element.value + ... etc')
                  .focus(...).blur(...).etc.;

$('#container').append($input); 
```

或者，您可以使用事件委托。在初始页面加载时，您可以这样做：

```
$("#container").on( "focus", "input", function(){...}); 
```

这将涵盖`#container`当前或以后动态添加的所有输入元素。[您可以在on docs](http://api.jquery.com/on/)中阅读有关事件委托的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T02:51:43.427

要检测动态添加的元素上的事件，您应该使用[`on()`](http://api.jquery.com/on/)jQuery 1.7+ 和[`.live()`](http://api.jquery.com/live/)以前的版本。

**编辑：**是的，正如詹姆斯在评论中指出的那样，[`delegate()`](http://api.jquery.com/delegate/)总是推荐超过`live()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T03:26:07.547

构建表单非常简单，因为您基本上已经映射了对象 sytanx 中元素的所有属性。因此，我们可以创建这些元素，只需选择一个标签，并将属性对象作为 jQuery 函数的第二个参数传入：

```
/* Container reference, counting variable */
var container = $("#container"), i = 0;

/* Clear out the container */
container.html("");

/* Cycle through each element */
while ( current = data.elements[i++] ) {
  /* Evaluate the value of the current type */
  switch ( current.type ) {
    /* Since <input type='button|image'> are so similar, we fall-through */
    case "button":
    case "image" :
      /* Choose a base element, pass in object of properties, and append */
      $("<input>", current).appendTo(container);
      break;
  }
} 
```

当涉及注册点击或任何其他类型的事件时，我们将使用该`$.on`方法。因为我们传入了一个选择器（在本例中为“input”），这不仅会匹配所有当前元素，还会匹配所有未来元素。

```
/* Listen for all clicks on input elements within the container */
container.on("click", "input", function(){
  /* We have a button, and an image. Alert either the value or src */
  alert( this.value || this.src );
}); 
```

在线演示：http: [//jsbin.com/izimut/edit#javascript,html](http://jsbin.com/izimut/edit#javascript,html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T02:51:21.490

如果您的 js 代码很短，只需在 append 函数中添加您的 js 代码即可。 `append('<input type="submit" onclick="xxxx" value="'+element.value + ... etc');`

如果你的 js 代码很长，你可以给你的新元素添加一个 id。并将事件添加到 id。

```
$("#idxx").click(function(){alert("Hello");}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T02:52:30.853

直接绑定元素

```
$input = $('<input type="submit" value="'+element.value + ... etc');
$input.on('click', function() { 
    // do something 
}
$('#container').append($input); 
```

或将绑定放在检查内部单击内容的选择的父级上。

```
$('#container').on('click', 'input', function() { 
    // do something 
} 
```

# web-services - 执行规则/工作流之前的 Alfresco Web 服务响应

> ID：10424447
> 
> 赞同：1
> 
> 时间：2012-05-03T02:47:07.340
> 
> 标签：web-services, response, alfresco, jbpm

我的应用程序在露天空间中放置了一个文件并等待响应。问题是 alfresco 在触发工作流的空间上执行规则后发送响应。那需要的时间太长了。我希望 alfresco 先发送 Web 服务响应，然后执行规则/工作流程。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:41:19.957

您可以通过在规则配置时选中“在后台运行规则”复选框来异步运行规则。这有效地将规则执行与请求处理事务分离。

异步运行规则时，请确保您有适当的故障处理，因为规则执行中的故障不会再出现在 Web 服务响应中。

# ruby-on-rails - 更新 gem twitter-bootstrap-rails 后找不到图标地球

> ID：10424450
> 
> 赞同：0
> 
> 时间：2012-05-03T02:47:44.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我正在使用`twitter-bootstrap-rails`宝石。昨晚我更新了我的宝石，并尝试使用`icon-globe`但我得到的只是一个空白空间。

这是我的 Gemfile：

```
gem 'jquery-rails'
gem 'therubyracer'
gem 'mongoid'
gem 'bson_ext'
gem 'bson'
gem 'mongo'
gem 'devise'
gem 'twitter-bootstrap-rails', :git => 'git://github.com/seyhunak/twitter-bootstrap-rails.git' 
```

我试过`rake tmp:clear`了，但这也没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:47:26.627

前几天我也遇到了这个。我有我的 Rails 服务器设置，以便我可以在同一服务器上运行多个 Rails 应用程序在他们自己的 suburi 下。显然，bootstrap_and_overrides.css.less 中的资产路径助手不包括精灵的相对路径，而是将背景图像 url 指向 /assets 而不是 /suburi/assets。

按照我在这里找到的内容： [https](https://github.com/rails/rails/issues/3365) ://github.com/rails/rails/issues/3365 我能够收集到我需要在预编译资产时执行以下操作：

```
RAILS_RELATIVE_URL_ROOT="/suburi" rake assets:precompile 
```

这会在您预编译时设置环境中的相对根目录，然后一切都可以正常工作。

真正让我陷入困境的是，在开发过程中一切正常。一旦我将它推送到生产服务器，图标就会停止显示。我一直在想我的服务器或我的代码有问题。一直以来，当我预编译我的资产时，它只是资产路径助手，不包括 suburi。

只需在运行预编译之前在 RAILS_RELATIVE_URL_ROOT 环境变量中设置完整的 suburi 路径，它就会起作用。

**更新：您可以通过添加在****config/application.rb**文件 中设置此变量

```
config.action_controller.relative_url_root = '/suburi' 
```

这将是最好的选择，因为它在部署时不需要额外的输入。

你可以在这里读到它：

[http://guides.rubyonrails.org/configuring.html#configuring-action-controller](http://guides.rubyonrails.org/configuring.html#configuring-action-controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:50:38.933

你试过了吗：

```
bundle exec rake assets:precompile 
```

在您的生产环境中？

# python - 有没有更快的方法来下载 HTML/XML 文档？

> ID：10424454
> 
> 赞同：0
> 
> 时间：2012-05-03T02:48:20.540
> 
> 标签：python, download

我正在构建一个使用[ystockquote 模块](http://goldb.org/ystockquote.html)在任何给定时间获取股票价格的金融应用程序。

我遇到的问题是我大约需要一两秒钟才能得到股票的价格。我需要大大减少这个时间。

我知道我应该获得更快的互联网连接，但除此之外，有没有办法加快 Python 从互联网上下载 HTML/XML 文档的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T02:56:15.533

如果您可以保持连接打开并且访问之间的持续时间相当短，那么请使用带有 keepalive 的模块，例如 urlgrabber。

# python - 关于使用带有远程存储的 sorl-thumbnails 的 celery 的指针？

> ID：10424456
> 
> 赞同：11
> 
> 时间：2012-05-03T02:48:34.140
> 
> 标签：python, django, amazon-s3, celery, sorl-thumbnail

我很惊讶在搜索如何将 celery 任务与 sorl-thumbnails 和 S3 一起使用时，除了“使用 celery”之外什么都没有看到。

问题：使用远程存储在生成缩略图时会导致大量延迟（对于具有许多缩略图的页面，想想 100 秒以上），而缩略图引擎从远程存储下载原件，对其进行处理，然后上传回 s3。

在 sorl 中设置 celery 任务的好地方在哪里，我应该叫什么？

您的任何经验/想法将不胜感激。

我将开始挖掘 Sorl 的内部结构，以找到一个更有用的地方来延迟这项任务，但我还想知道之前是否已经解决了一些问题。

1.  立即返回什么图像？必须以某种方式告诉 Sorl 返回的图像不是真正的缩略图。当 celery 完成任务时，缓存必须失效。

2.  干净地处理多个缩略图生成请求（只需要给定缓存键的第一个请求）

目前，我通过使用 nginx 反向代理缓存暂时解决了这个问题，该缓存可以在后端花费时间生成昂贵的页面（在巨大的产品网格上调整巨大的 PNG 大小）时提供命中服务，但这是一个非常手动的过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T09:32:59.837

据我了解，Sorl 可以与 S3 存储一起正常工作，但速度很慢。

我相信你知道你需要什么图像尺寸。

上传图片后，您应该启动 celery 任务。在您调用的任务中 `sorl.thumbnail.default.backend.get_thumbnail(file, geometry_string, **options)`

Sorl 将生成一个缩略图并将其上传到 S3。下次您从模板请求图像时，它已经缓存并直接从亚马逊的服务器提供

> 一种在处理图像时处理占位符缩略图的干净方法。

为此，您需要覆盖 Sorl 后端。向函数添加新参数`get_thumbnail`，例如`generate=False`. 当你从 celery pass 调用这个函数时`generate=True`

在函数更改中它的逻辑，所以如果 thumb 不存在并且`generate`是 True 你就像标准后端一样工作，但如果`generate`是 false 你返回你的占位符图像，带有文本，如*“我们现在处理你的图像，稍后再回来”*并且不要打电话`backend._create_thumbnail`。如果您认为缩略图可能会被意外删除，您可以在这种情况下启动任务。

我希望这有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T18:16:45.717

我认为您想要做的是将[THUMBNAIL_BACKEND设置为覆盖](http://thumbnail.sorl.net/reference/settings.html#thumbnail-backend)[_create_thumbnail](https://github.com/sorl/sorl-thumbnail/blob/master/sorl/thumbnail/base.py#L79)方法的自定义类。不是在该函数中生成缩略图，而是启动一个调用 _create_thumbnail 的 celery 任务，其参数与给定函数的参数相同。缩略图在请求期间将不可用，但会在后台生成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-25T17:08:47.157

您可以使用[Sollery](https://github.com/aidanlister/sorlery)。它结合了 sorl 和 celery 通过工人创建缩略图。非常小心不要在工作线程之外进行任何文件系统访问。

`THUMBNAIL_DUMMY_SOURCE`可以通过将您设置为适当的占位符来控制立即返回的缩略图（在工作人员有机会之前） 。

该作业在第一次请求缩略图时创建，后续请求将提供虚拟图像，直到工作线程完成。

# javascript - 如何使用辅助方法的输出作为haml哈希中的值？

> ID：10424459
> 
> 赞同：1
> 
> 时间：2012-05-03T02:49:03.410
> 
> 标签：javascript, ruby-on-rails, haml, helper

我有一个按钮，我想在每个页面加载时动态设置它的 onClick 属性。我想每次都使用 application_helper 给它一个自定义的 javascript。这似乎很难做到，因为 Javascript 将需要访问只有 ruby​​ 才能访问的东西。我想用 application_helper 模块构建一个自定义 javascript，并产生调用 helper 方法的结果作为 Haml 哈希中 onClick 键的值：

在 application.html.haml 中：

```
%button{class: "user_navigation_menu_item", onClick: =  gimme_my_custom_javascript} 
```

在 application_helper,rb 中：

```
def gimme_my_custom_javascript
  javascript = "function(){"
  javascript +="alert('yo!');"
  javascript+="}"
end 
```

哈姆尔对我大喊大叫：“出乎意料的“=”

我该如何做我想做的事？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T02:59:32.003

只需摆脱`=`它，它应该可以工作：

```
%button{class: "user_navigation_menu_item", onClick: gimme_my_custom_javascript} 
```

# actionscript-3 - as3 StageWebView 可以补间或动画吗？

> ID：10424465
> 
> 赞同：0
> 
> 时间：2012-05-03T02:49:49.230
> 
> 标签：actionscript-3, air

只是想知道您能否在 StageWebView 上应用一些动画，例如滑入和滑出，我已使用 TweenLite.to() 申请，但我不接受 StageWebView？有可能还是我只需要出现可见的显示和隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:22:04.597

不，这是不可能的。您可以创建 StageWebView，捕获内容的快照并将此快照补间到位，然后在补间完成后，将快照替换为实际的 StageWebView。

执行此操作所需的功能是

```
drawViewPortToBitmapData(bitmap:BitmapData):void 
```

# iphone - iOS 上的 DragonMobile Nuance SDK 语音识别.... AURemoteIO::ChangeHardwareFormats: 错误 -10875

> ID：10424466
> 
> 赞同：3
> 
> 时间：2012-05-03T02:49:53.503
> 
> 标签：iphone, ios, sdk, speech-recognition, audio-recording

我花了最后几个小时试图解决这个问题......我无法解决这个错误，它发生在我的项目中的我的 iPhone 4S 上，我在其中实现了 SDK 的 1.4.0，每当我尝试识别语音时：

`AURemoteIO::ChangeHardwareFormats: error -10875`

它在模拟器中运行良好。

此外，更奇怪的是，语音识别示例应用程序可以在我的 iPhone 4S 上运行。代码几乎相同...

我认为两者之间唯一不同的是我有一个用于 TouchDB 的链接器标志 -ObjC ......而且我正在使用 ARC。但是，我也尝试为我使用 SDK 的特定类禁用 ARC。

# javascript - JavaScript单选按钮选择验证字段？

> ID：10424467
> 
> 赞同：0
> 
> 时间：2012-05-03T02:50:19.623
> 
> 标签：javascript, forms, validation, radio-button, checkbox

我需要使用javascript，这样当一个单选按钮被选中时，什么都不会发生，但如果另一个是（例如，其他地址），它将验证以下字段；

街道郊区邮政编码

虽然我发布了这个，它可能是一个类似的方法，但是当我有一个复选框和一个文本框时，我怎么能做到这一点，以便只有当复选框被选中时，文本框才不能留空......

感谢大家！！！！如果需要，请询问更多详细信息，我在解释事情方面很糟糕！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T09:24:29.197

/* 在员工详细信息页面检查无线电验证 */

```
function editPage()
{
var select=document.frmEmployeeDetails.radSelect;
if (radioValidate(select,"Select an Employee"))
      {
window.open("EditEmployee`enter code here`.html","_self");
      }
return false;
} 
```

希望这个例子可以帮助你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:01:55.450

由于他们会在单击单选按钮时对其进行检查，因此您可以将 onClick 事件添加到其中一个单选按钮而不是另一个单选按钮。

```
<input type='radio' id='test' name='test-1' />
<input type='radio' id='test' name='test-2'onClick='Validate();'/> 
```

对于复选框，当用户选中该框时，您应该将焦点设置到文本输入字段。这样，如果用户离开该字段（onBlur），您可以给他们一个错误/警报以填写文本。

```
<input type='checkbox' id='testChkbx' name='testChkbx' onClick=' /*Set the focus to the text box*/'/>

<input type='text' id='testText' name='testText' onBlur='/* Check to make sure the value of the checkbox is not empty. */'/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:12:48.780

我假设您可能正在使用 jQuery，因为您没有说。如果没有，那么您仍然可以采用这些概念并将它们移植到普通的旧 javascript 或您正在使用的任何东西。

# 示例标记

```
<form id="address-form">
 <input type="radio" name="validate" id="validate_address" value="yes"> Validate<br>
 <input type="radio" name="validate" value="no"> Don't Validate<br>
 Street <input name="street"><br>
 Suberb <input name="suberb"><br>
 Postcode <input name="postcode"><br>
 <input type="submit">
</form>​​​​​ 
```

# 条件验证

在您页面上的某个`<script>`标记或您包含的 javascript 文件中，创建一个提交事件，该事件将在进行验证之前检查无线电输入的值。

```
$('#address-form').submit(function(event) {
    if ($('input[name=validate]:checked').val() === 'yes') {
        if (!formValid()) {
            event.preventDefault(); // Don't submit the form
        }
    }
});

// Perform validations
function formValid() {
    if ($('input[name=street]').val().length == 0) {
        // tell them ...
        return false;
    }
    if ($('input[name=suberb]').val().length == 0) {
        // tell them ...
        return false;
    }
    if ($('input[name=postcode]').val().length == 0) {
        // tell them ...
        return false;
    }

    return true;
} 
```

这应该够了吧！

我创建了一个 jsfiddle，如果你愿意，你可以进一步弄乱 - [http://jsfiddle.net/nilbus/JNnuX/2/](http://jsfiddle.net/nilbus/JNnuX/2/)

# 改为使用复选框

使用复选框非常相似。而不是这个

```
 if ($('input[name=validate]:checked').val() === 'yes') { 
```

只需检查您的复选框是否已选中。

```
 if ($('input[name=validate]').attr('checked')) { 
```

[http://jsfiddle.net/nilbus/JNnuX/3/](http://jsfiddle.net/nilbus/JNnuX/3/)

# ruby-on-rails-3 - Rails3 form_tag 路由错误

> ID：10424469
> 
> 赞同：0
> 
> 时间：2012-05-03T02:50:24.507
> 
> 标签：ruby-on-rails-3

我无法让视图和控制器一起玩得很好。我想我搞砸了我的路由，任何帮助都会很棒。

我的控制器看起来像：

```
class AccountDetailsController < ApplicationController

    def new
      puts "in new"
    end

    def home
      puts "in home"
    end
end 
```

我的 routes.rb 看起来像：

```
resources :account_details 
```

我的 new.html.erb 看起来像：

```
<h1>AccountDetails#new</h1>
<%= form_tag(url_for(:controller => "account_details", :action => "new"), :method => "post") do %>
  <%= label_tag(:q, "Search for:") %>
  <%= text_field_tag(:q) %>
  <%= submit_tag("Submit") %>
<% end %> 
```

当我转到[http://localhost:3000/account_details/new](http://localhost:3000/account_details/new) 时，我得到了我的页面，当我点击提交时，我得到了这个错误：

2012 年 5 月 2 日星期三 22:38:10 -0400 为 0:0:0:0:0:0:0:1%0 开始 POST "/account_details/new"

ActionController::RoutingError (没有路由匹配 [POST] "/account_details/new"):

除了一无所知，我做错了什么？我以为我的路线会覆盖 [POST]，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:00:24.570

创建新条目的正确方法是 PUT，而不是 POST。您应该`:method => "post"`从模板中删除，因此将自动选择 PUT 方法。

# jqplot - 图例文本颜色与jqplot中的线条颜色一致

> ID：10424471
> 
> 赞同：1
> 
> 时间：2012-05-03T02:50:58.793
> 
> 标签：jqplot, legend, textcolor

我`jqplot`用来绘制多条不同线条颜色的线条。

另外，我有图例，其颜色**应**与相应的线条颜色一致。

我似乎没有办法应对传奇色彩。

那么有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:31:24.507

取自问题标题，我了解您想将图例标签的颜色更改为与系列的颜色相对应，对吗？

出于这个原因，由于样本就在标签前面，我们可以使用它们来获取我们为标签设置的颜色。

这是您需要的代码。在绘制情节之前，您需要记住放置它。

```
$.jqplot.postDrawHooks.push(function() {
    var swatches = $('table.jqplot-table-legend tr td.jqplot-table-legend-swatch');
    var labels = $('table.jqplot-table-legend tr td.jqplot-table-legend-label');
    labels.each(function(index) {
        //turn the label's text color to the swatch's color
        var color = $(swatches[index]).find("div div").css('background-color');
        $(this).css('color',color );
    });
}); 
```

[你可以在这里看到实时运行的代码。](http://jsfiddle.net/Boro/NYewy/)

# spring - 使用 Spring-Security DB 登录的 Jersey 不断重定向到登录页面

> ID：10424473
> 
> 赞同：2
> 
> 时间：2012-05-03T02:51:16.123
> 
> 标签：spring, spring-security, jersey

我有一个使用带有数据库登录的弹簧安全性的球衣（休息）弹簧应用程序。我让它重定向到登录页面，一旦我输入有效的用户名和密码，它就会重定向回登录页面。

我是否需要编写其他代码和/或我的配置不正确。

谢谢！

弹簧安全.xml

```
<beans:beans xmlns="http://www.springframework.org/schema/security"

  xmlns:beans="http://www.springframework.org/schema/beans"

  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

  xsi:schemaLocation="http://www.springframework.org/schema/beans

           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd

           http://www.springframework.org/schema/security

           http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/images/**" security="none"/>

    <http pattern="/css/**" security="none"/>

    <http pattern="/static.css" security="none"/>

    <http auto-config="true" disable-url-rewriting="true">

         <intercept-url pattern="/login-page.html" access="ROLE_ANONYMOUS"/>

        <intercept-url pattern="/**" access="ROLE_USER" />

        <form-login login-page='/login-page.html'

        login-processing-url="/j_spring_security_check.action" 

        default-target-url="/static-page.html" />

    </http>

    <authentication-manager>

        <authentication-provider>

            <jdbc-user-service data-source-ref="dataSource"

                users-by-username-query="

                    select username,password, email 

                    from users where USERNAME=?" 

                authorities-by-username-query="

                    select u.username, ur.authority from users u, roles ur 

                    where u.username = ur.username and u.username =?  " 

            />

        </authentication-provider>

    </authentication-manager>

</beans:beans> 
```

web.xml

```
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"

    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"

    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

    <context-param>

        <param-name>contextConfigLocation</param-name>

        <param-value>classpath:server-context.xml, classpath:spring-security.xml</param-value>

    </context-param>

    <listener>

        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>

    </listener>

    <listener>

        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>

    </listener>

    <servlet>

        <servlet-name>jersey-servlet</servlet-name>

        <servlet-class>

            com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>

        <init-param>

            <param-name>com.sun.jersey.config.property.packages</param-name>

            <param-value>service.admin</param-value>

        </init-param>

        <init-param>

            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>

            <param-value>true</param-value>

        </init-param>

        <load-on-startup>1</load-on-startup>

    </servlet>

    <servlet-mapping>

        <servlet-name>jersey-servlet</servlet-name>

        <url-pattern>/sample/*</url-pattern>

    </servlet-mapping>

    <filter>

        <filter-name>springSecurityFilterChain</filter-name>

        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>

    </filter>

    <filter-mapping>

        <filter-name>springSecurityFilterChain</filter-name>

        <url-pattern>/*</url-pattern>

    </filter-mapping>

</web-app> 
```

parital dao application-context.xml 显示创建的数据源

```
 ...
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">

    <property name="driverClassName" value="com.mysql.jdbc.Driver" />

    <property name="url" value="jdbc:mysql://localhost:3306/sample" />

    <property name="username" value="root" />

    <property name="password" value="password" />

</bean>

      ... 
```

记录消息 - 在我尝试登录后

```
[...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/images/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/css/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/static.css' 
    [...web.FilterChainProxy] /j_spring_security_check at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter' 
    [...web.context.HttpSessionSecurityContextRepository] HttpSession returned null object for SPRING_SECURITY_CONTEXT 
    [...web.context.HttpSessionSecurityContextRepository] No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@466481eb. A new one will be created. 
    [...web.FilterChainProxy] /j_spring_security_check at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
    [...web.savedrequest.DefaultSavedRequest] pathInfo: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] queryString: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] requestURI: arg1=/sample/; arg2=/sample/j_spring_security_check (property not equals) 
    [...web.savedrequest.HttpSessionRequestCache] saved request doesn't match 
    [...web.FilterChainProxy] /j_spring_security_check at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter' 
    [...web.authentication.AnonymousAuthenticationFilter] Populated SecurityContextHolder with anonymous token: '...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS' 
    [...web.FilterChainProxy] /j_spring_security_check at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/login-page.html' 
    [...web.access.intercept.FilterSecurityInterceptor] Secure object: FilterInvocation: URL: /j_spring_security_check; Attributes: [ROLE_USER] 
    [...web.access.intercept.FilterSecurityInterceptor] Previously Authenticated: ...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.RoleVoter@52c51614, returned: -1 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.AuthenticatedVoter@175023d2, returned: 0 
    [...web.access.ExceptionTranslationFilter] Access is denied (user is anonymous); redirecting to authentication entry point 
...access.AccessDeniedException: Access is denied
    at ...access.vote.AffirmativeBased.decide(AffirmativeBased.java:83)
    at ...access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:205)
    at ...web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:114)
    at ...web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at ...web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at ...web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
    [...web.savedrequest.HttpSessionRequestCache] DefaultSavedRequest added to Session: DefaultSavedRequest[http://localhost:8080/sample/j_spring_security_check] 
    [...web.access.ExceptionTranslationFilter] Calling Authentication entry point. 
    [...web.DefaultRedirectStrategy] Redirecting to 'http://localhost:8080/sample/login-page.html' 
    [...web.context.HttpSessionSecurityContextRepository] SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession. 
    [...web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/images/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/css/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/static.css' 
    [...web.FilterChainProxy] /login-page.html at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter' 
    [...web.context.HttpSessionSecurityContextRepository] HttpSession returned null object for SPRING_SECURITY_CONTEXT 
    [...web.context.HttpSessionSecurityContextRepository] No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@466481eb. A new one will be created. 
    [...web.FilterChainProxy] /login-page.html at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter' 
    [...web.FilterChainProxy] /login-page.html at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
    [...web.savedrequest.DefaultSavedRequest] pathInfo: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] queryString: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] requestURI: arg1=/sample/j_spring_security_check; arg2=/sample/login-page.html (property not equals) 
    [...web.savedrequest.HttpSessionRequestCache] saved request doesn't match 
    [...web.FilterChainProxy] /login-page.html at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter' 
    [...web.FilterChainProxy] /login-page.html at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter' 
    [...web.authentication.AnonymousAuthenticationFilter] Populated SecurityContextHolder with anonymous token: '...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS' 
    [...web.FilterChainProxy] /login-page.html at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter' 
    [...web.FilterChainProxy] /login-page.html at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/login-page.html' 
    [...web.access.intercept.FilterSecurityInterceptor] Secure object: FilterInvocation: URL: /login-page.html; Attributes: [ROLE_ANONYMOUS] 
    [...web.access.intercept.FilterSecurityInterceptor] Previously Authenticated: ...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.RoleVoter@52c51614, returned: 1 
    [...web.access.intercept.FilterSecurityInterceptor] Authorization successful 
    [...web.access.intercept.FilterSecurityInterceptor] RunAsManager did not change Authentication object 
    [...web.FilterChainProxy] /login-page.html reached end of additional filter chain; proceeding with original chain 
    [...web.access.ExceptionTranslationFilter] Chain processed normally 
    [...web.context.HttpSessionSecurityContextRepository] SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession. 
    [...web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/images/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/css/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/static.css' 
    [...web.FilterChainProxy] /j_spring_security_check at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter' 
    [...web.context.HttpSessionSecurityContextRepository] HttpSession returned null object for SPRING_SECURITY_CONTEXT 
    [...web.context.HttpSessionSecurityContextRepository] No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@466481eb. A new one will be created. 
    [...web.FilterChainProxy] /j_spring_security_check at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
    [...web.savedrequest.DefaultSavedRequest] pathInfo: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] queryString: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] requestURI: arg1=/sample/; arg2=/sample/j_spring_security_check (property not equals) 
    [...web.savedrequest.HttpSessionRequestCache] saved request doesn't match 
    [...web.FilterChainProxy] /j_spring_security_check at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter' 
    [...web.authentication.AnonymousAuthenticationFilter] Populated SecurityContextHolder with anonymous token: '...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS' 
    [...web.FilterChainProxy] /j_spring_security_check at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter' 
    [...web.FilterChainProxy] /j_spring_security_check at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/j_spring_security_check'; against '/login-page.html' 
    [...web.access.intercept.FilterSecurityInterceptor] Secure object: FilterInvocation: URL: /j_spring_security_check; Attributes: [ROLE_USER] 
    [...web.access.intercept.FilterSecurityInterceptor] Previously Authenticated: ...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.RoleVoter@52c51614, returned: -1 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.AuthenticatedVoter@175023d2, returned: 0 
    [...web.access.ExceptionTranslationFilter] Access is denied (user is anonymous); redirecting to authentication entry point 
...access.AccessDeniedException: Access is denied
    ...(removed full stack trace) 
    [...web.savedrequest.HttpSessionRequestCache] DefaultSavedRequest added to Session: DefaultSavedRequest[http://localhost:8080/sample/j_spring_security_check] 
    [...web.access.ExceptionTranslationFilter] Calling Authentication entry point. 
    [...web.DefaultRedirectStrategy] Redirecting to 'http://localhost:8080/sample/login-page.html' 
    [...web.context.HttpSessionSecurityContextRepository] SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession. 
    [...web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/images/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/css/**' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/static.css' 
    [...web.FilterChainProxy] /login-page.html at position 1 of 10 in additional filter chain; firing Filter: 'SecurityContextPersistenceFilter' 
    [...web.context.HttpSessionSecurityContextRepository] HttpSession returned null object for SPRING_SECURITY_CONTEXT 
    [...web.context.HttpSessionSecurityContextRepository] No SecurityContext was available from the HttpSession: org.apache.catalina.session.StandardSessionFacade@466481eb. A new one will be created. 
    [...web.FilterChainProxy] /login-page.html at position 2 of 10 in additional filter chain; firing Filter: 'LogoutFilter' 
    [...web.FilterChainProxy] /login-page.html at position 3 of 10 in additional filter chain; firing Filter: 'UsernamePasswordAuthenticationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 4 of 10 in additional filter chain; firing Filter: 'BasicAuthenticationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 5 of 10 in additional filter chain; firing Filter: 'RequestCacheAwareFilter' 
    [...web.savedrequest.DefaultSavedRequest] pathInfo: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] queryString: both null (property equals) 
    [...web.savedrequest.DefaultSavedRequest] requestURI: arg1=/sample/j_spring_security_check; arg2=/sample/login-page.html (property not equals) 
    [...web.savedrequest.HttpSessionRequestCache] saved request doesn't match 
    [...web.FilterChainProxy] /login-page.html at position 6 of 10 in additional filter chain; firing Filter: 'SecurityContextHolderAwareRequestFilter' 
    [...web.FilterChainProxy] /login-page.html at position 7 of 10 in additional filter chain; firing Filter: 'AnonymousAuthenticationFilter' 
    [...web.authentication.AnonymousAuthenticationFilter] Populated SecurityContextHolder with anonymous token: '...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS' 
    [...web.FilterChainProxy] /login-page.html at position 8 of 10 in additional filter chain; firing Filter: 'SessionManagementFilter' 
    [...web.FilterChainProxy] /login-page.html at position 9 of 10 in additional filter chain; firing Filter: 'ExceptionTranslationFilter' 
    [...web.FilterChainProxy] /login-page.html at position 10 of 10 in additional filter chain; firing Filter: 'FilterSecurityInterceptor' 
    [...web.util.AntPathRequestMatcher] Checking match of request : '/login-page.html'; against '/login-page.html' 
    [...web.access.intercept.FilterSecurityInterceptor] Secure object: FilterInvocation: URL: /login-page.html; Attributes: [ROLE_ANONYMOUS] 
    [...web.access.intercept.FilterSecurityInterceptor] Previously Authenticated: ...authentication.AnonymousAuthenticationToken@6faeba70: Principal: anonymousUser; Credentials: [PROTECTED]; Authenticated: true; Details: ...web.authentication.WebAuthenticationDetails@fffbcba8: RemoteIpAddress: 0:0:0:0:0:0:0:1; SessionId: 37AD1209E0F0EC148C607B42933758BF; Granted Authorities: ROLE_ANONYMOUS 
    [...access.vote.AffirmativeBased] Voter: ...access.vote.RoleVoter@52c51614, returned: 1 
    [...web.access.intercept.FilterSecurityInterceptor] Authorization successful 
    [...web.access.intercept.FilterSecurityInterceptor] RunAsManager did not change Authentication object 
    [...web.FilterChainProxy] /login-page.html reached end of additional filter chain; proceeding with original chain 
    [...web.access.ExceptionTranslationFilter] Chain processed normally 
    [...web.context.HttpSessionSecurityContextRepository] SecurityContext is empty or contents are anonymous - context will not be stored in HttpSession. 
    [...web.context.SecurityContextPersistenceFilter] SecurityContextHolder now cleared, as request processing completed 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:55:30.603

您尝试使用**/j_spring_security_check**发送身份验证，但在您的配置中声明：

```
login-processing-url="/j_spring_security_check.action" 
```

该 url 未被截获，因此您无法登录。

# netty - 在 Java 1.6.x 下在 Mac OSX Lion 上构建 Netty

> ID：10424476
> 
> 赞同：1
> 
> 时间：2012-05-03T02:51:40.230
> 
> 标签：netty

我正在尝试在具有 Java 1.6.x 的 Mac OS X Lion 上构建 Netty 项目。（IDE：NetBeans）。然后我收到以下错误：

```
[enforcer:enforce]
Rule 0: org.apache.maven.plugins.enforcer.RequireJavaVersion failed with message:
Detected JDK Version: 1.6.0-31 is not in the allowed range [1.7.0,).
------------------------------------------------------------------------
BUILD FAILURE
------------------------------------------------------------------------ 
```

如果 Netty 只需要 java 1.5 或更高版本，我正在寻找一种在 java 1.6.x 下启用编译的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:13:18.897

你需要有 java7 来构建，但只需要 java5 来运行。这是因为我们根据 Java 版本在运行时启用/禁用某些功能。

另见[1]。

[1] [https://github.com/netty/netty/blob/4e528c10fae3abaa932e751c831aa48a23645744/README.md](https://github.com/netty/netty/blob/4e528c10fae3abaa932e751c831aa48a23645744/README.md)

# css - CSS 无法设置页边距的底部

> ID：10424480
> 
> 赞同：0
> 
> 时间：2012-05-03T02:52:01.180
> 
> 标签：css, positioning, margin

我似乎找不到在页面上放置下边距的方法。我想要发生的事情如下：当您单击其中一个按钮并出现缩略图时，该列表应该有一个底部边距，因此它不会卡在页面底部。

很多东西都是用 JavaScript 定位的；我不知道这会不会让事情变得混乱。

我的页面：[http ://bit.ly/JV5I0Z](http://bit.ly/JV5I0Z)

当然必须有一种方法来设置底部边距。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:55:52.240

要制作位于页面底部的内容，您有两种选择。

1 - 职位：绝对；margin-top: 600px (example)
2 - 使用 javascript 获取浏览器高度，然后将 margin-top 更改为应有的值。

# c# - 在gridview中编辑和删除行

> ID：10424485
> 
> 赞同：0
> 
> 时间：2012-05-03T02:52:36.370
> 
> 标签：c#, asp.net, winforms, ado.net, datagridview

我们知道 asp.net gridview 可以通过单击按钮以及 gridview 与数据库绑定来编辑/删除。我们可以用windows形式做吗？我的意思是如何自定义按钮事件或借用asp.net框架到winform？请看图片。 ![图片](../Images/05170a502262eae17fc914efbf1b7f65.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:47:41.577

据我所知winform网格没有这些能力，你必须明确地创建它们，比如添加另一个列并实现他的onlclick/doulbe click，它真的有很多事件。ps 如果您希望用户更改显示的行上的值，您将需要这个：dataGridView1.EditMode = DataGridViewEditMode.EditOnKeystroke

# javascript - Jquery mouseover 事件不起作用

> ID：10424486
> 
> 赞同：0
> 
> 时间：2012-05-03T02:53:07.627
> 
> 标签：javascript, jquery

我写了一个图像共享 js 脚本。一旦页面中有图像，它将添加一个 div 包装器。例如，

```
<img href="xxx.jpg" /> 
```

我的脚本将使它成为

```
<div class="wrapper">
    <img href="xxx.jpg" />
</div> 
```

而且，.wrapper 类中还有一个 mounseover 事件。在下面的代码结构之前，一切都很顺利。我们有一个博客站点，有很多 div 包装器和 img 标签。

```
<div class="a">
    <img href="xxx.jpg" />
</div> 
```

虽然我的 js 脚本包装了一个“包装”类，但我的 mouseover 事件在这些 HTML 结构中不再起作用。谁能告诉我这里发生了什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:55:15.190

查看 javascript 代码会有所帮助。由此，我的猜测是你没有绑定到`.a`并且仍然绑定到`.wrapper`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:49:01.613

这可能是实时事件绑定的情况，您可能需要检查 jQuery 的[live](http://api.jquery.com/live/)，从 1.7 开始，由于[ON](http://api.jquery.com/on/)已被弃用- on() 现在执行 live() 曾经做的事情

您说-一旦有图像，它就会自动换行-您到底是怎么做的？

例如，**解决方案**可能就在那里。在您检查图像并包装它的地方，您需要再次附加鼠标悬停

```
//  firstly, why is your image having href=xxx.jpg
//  should be src=xxx.jpg I suppose

$('img[href$="jpg"]').wrap('<div class="wrapper">');

//  Whatever might be your logic above for wrapping
//  you need to again call bind method here OR
//  you need to call one final time at the end of all your code

$('img[href$="jpg"]')
    .parent('.wrapper')
    .bind('mouseover', function() {
        $(this); // $(this) - is your current wrapper div now
        // your code
    }); 
```

如果您在包装图像时不知道图像何时出现或者它是通过 ajax 出现的，那么您可能需要查看 jQuery 的[**livequery**插件](http://archive.plugins.jquery.com/project/livequery)

```
$('div.wrapper').livequery(function() {
    $(this).bind('mouseover', function() {
        // your code
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T03:08:51.433

```
$('img').wrap('<div class="wrapper">'); 
```

您应该用 div 包装它并应用于`mouseover`该 div 而不是图片。

# javascript - 在 Node.js 中查找两个数组的交集

> ID：10424489
> 
> 赞同：4
> 
> 时间：2012-05-03T02:53:36.327
> 
> 标签：javascript, node.js, mongodb

> **可能重复：**
> [JavaScript 中数组交集的最简单代码](https://stackoverflow.com/questions/1885557/simplest-code-for-array-intersection-in-javascript)

我正在用 Mongodb 和 Nodejs 编写一个应用程序。我有一个“学生”集合，其中包含一个数组，其中包含特定学生学习的所有课程（课程 ID，指的是“课程”集合中的文档）的列表。

我有 2 个学生，StudentA 和 StudentB。我想看看这两个学生是否上过任何共同的课程。

我已经从 Mongodb 中检索了 studentA 和 studentB 文档。我想在 Node.js 应用程序中找到这两个数组之间的交集。

我想到的一种方法是遍历第一个数组，创建一个以 objectid 为键的哈希映射。然后遍历第二个数组并尝试将值增加 1。最后，所有值为 1 的条目都是相交元素。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T03:15:35.313

[Underscore.js](http://underscorejs.org/)可以计算[*n 个*](http://underscorejs.org/#intersection)[数组](http://underscorejs.org/#intersection)[的交集](http://underscorejs.org/#intersection)*。因此：*

 *```
_(a).intersection(b) 
```

或者

```
_.intersection(a, b) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T03:02:30.067

就是这样

```
a=[1,2,3,4];
b=[3,4,5];
c=[];
j=0;
for (var i=0; i < a.length; ++i)
    if (b.indexOf(a[i]) != -1)
        c[j++] = a[i]; 
```

`c`将包含此末尾的交叉点。*

# ruby-on-rails - 在 Rails 中为商店建模

> ID：10424495
> 
> 赞同：0
> 
> 时间：2012-05-03T02:55:15.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, mapping

想象一个商店模型，其中一个`store`可以有很多`items`，每个`item`可以有不同`price`的不同`store`（不同的商店可以有相同的商品但价格不同）。

这正是商店在现实生活中的样子。

到目前为止，我有`item`、`store`和`price`作为模型。

我将如何在 Rails 中为这种关联建模？添加/删除模型不是问题。

我还需要这个关联来轻松地进行这样的查询：

“给定一个项目（或一个项目的 ID），返回包含该项目的商店列表，包括它们的价格”。

到目前为止，我有以下关联：

```
Store:
  has_and_belongs_to_many :items
Item: 
  has_and_belongs_to_many :stores
  has_and_belongs_to_many :prices
Price:
  has_and_belongs_to_many :items 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:19:21.680

第四个模型 StorePrices 怎么样，它允许建立`has_many` `:through`关系。

```
Item:
  has_many :store_prices
  has_many :stores, :through => :store_prices

Store:
  has_many :store_prices
  has_many :items, :through => :store_prices

StorePrice:
  belongs_to :store
  belongs_to :item 
```

store_prices 表如下所示：

```
id -> integer
store_id -> integer
item_id -> integer
price -> decimal 
```

您可以像这样获取给定项目的商店：

```
stores = item.stores 
```

第一家商店的商品价格：

```
price = item.store_prices.first.price 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:16:14.520

而不是使用 has_and_belongs_to_many 我会使用 has_many :through

一家商店零售商品

```
Store
has_many :items through :retails
has_many :retails

Retail
belongs_to :store
belongs_to :item

Item
has_many :stores through :retails
has_many :retails 
```

然后，您可以在零售表中添加一个价格，该价格将是每个商店的每件商品。

# html - CSS3 动画位置

> ID：10424500
> 
> 赞同：11
> 
> 时间：2012-05-03T02:55:43.437
> 
> 标签：html, animation, css

考虑船在蓝色 div 上方移动的 CSS3 动画。由于某种原因，船没有移动。HTML如下：

```
<div id="wrapper">
  <div id="sea">
    <img src="ship.png" alt="ship" width="128" height="128"/>
  </div>
</div> 
```

为了制作 CSS3 动画，我使用以下内容：

```
#wrapper { position:relative;top:50px;width:700px;height:320px;
          margin:0 auto;background:white;border-radius:10px;}
#sea { position:relative;background:#2875DE;width:700px;height:170px;
       border-radius:10px;top:190px; }
#sea img { 
  position:relative;left:480px;top:-20px;
  animation:myship 10s;
  -moz-animation:myship 10s; /* Firefox */
  -webkit-animation:myship 10s; /* Safari and Chrome */
  @keyframes myship {
    from {left: 480px;} 
    to{left:20px;} 
   }
   @-moz-keyframes myship {
     from {left: 480px;} 
     to {left:20px;} 
   }
   @-webkit-keyframes myship {
     from {left: 480px;} 
     to{left:20px;} 
   }
} 
```

船的图像没有移动。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T03:03:27.400

您必须在 css 选择器之外声明您的关键帧，并为绝对定位的元素设置动画。

[http://jsfiddle.net/aNvSf/](http://jsfiddle.net/aNvSf/)

您修改后的 CSS 如下所示：

```
#wrapper{
    position:relative;
    top:50px;
    width:700px;
    height:320px;
    margin:0 auto;
    background:white;
    border-radius:10px;
}
#sea{
    position:relative;
    background:#2875DE;
    width:700px;
    height:170px;
    border-radius:10px;
    top:190px;
}
#sea img{
    position:absolute;
    left:480px;
    top:-20px;
    animation:myship 10s;
    -moz-animation:myship 10s; /* Firefox */
    -webkit-animation:myship 10s; /* Safari and Chrome */               
}

@keyframes myship{
    from {left: 480px;} 
    to{left:20px;} 
}
@-moz-keyframes myship{
    from {left: 480px;} 
    to{left:20px;} 
}
@-webkit-keyframes myship{
    from {left: 480px;} 
    to{left:20px;} 
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T02:58:38.327

要使用、或进行动画处理`left`，您必须具有绝对定位或浮动元素。所以，将位置更改为。`top``bottom``right``absolute`

`}`此外，在您开始声明关键帧之前，还有未闭合的大括号。

```
#sea img { 
    position:absolute;
    /* ... */
} 
```

大括号错误：

```
 #sea img{
         position:absolute; /* absolute */
         left:480px;top:-20px;
         animation:myship 10s;
        -moz-animation:myship 10s; /* Firefox */
        -webkit-animation:myship 10s; /* Safari and Chrome */
    } 
 /* ^ You have to close the braces here, before declaring the keyframes. 
```

这是一个工作[演示](http://jsfiddle.net/y3CBB/)

# python - 如何在 mplot3d（matplotlib + python）中获取拾取对象的属性？

> ID：10424517
> 
> 赞同：8
> 
> 时间：2012-05-03T02:57:53.667
> 
> 标签：python, matplotlib, picker, mplot3d

我使用以下方法绘制了一系列点`mplot3d`：

```
import pylab as p
import mpl_toolkits.mplot3d.axes3d as p3

fig = p.figure()
ax = fig.add_subplot(111, projection='3d')

ax.scatter([1], [0], [0], c='r', marker='^', picker=5)
ax.scatter([0], [1], [0], c='g', marker='^', picker=5)
ax.scatter([0], [0], [1], c='b', marker='^', picker=5) 
```

然后我添加一个选择器功能：

```
def onpick(event):
   ind = event.ind
   print ind

fig.canvas.mpl_connect('pick_event', onpick) 
```

最后绘制它：

```
p.show() 
```

有没有办法从我点击的标记中获取 3D 坐标？到目前为止，我可以在我使用的列表中获得点的索引`ax.scatter()`，但这不会因为我`ax.scatter()`多次使用而减少它，而且必须是这种方式（例如，我使用不同的颜色）。

问候

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T14:26:41.217

您可以使用 event.artist 的 _offsets3d 属性获取坐标数据，然后使用 ind 获取拾取点：

```
def onpick(event):
    ind = event.ind[0]
    x, y, z = event.artist._offsets3d
    print x[ind], y[ind], z[ind] 
```

# python - Python乘法表语法差异

> ID：10424520
> 
> 赞同：1
> 
> 时间：2012-05-03T02:58:39.107
> 
> 标签：python, iteration

所以我作为初学者学习python，并且一直在使用如何像计算机科学家一样思考python 3。我在关于迭代的章节中，用我自己的大脑进行编码而不是复制/粘贴，所以我记得更容易.

在做乘法表部分的最后一部分时，我得到了与课程所示相同的输出，但似乎我的更干净（更少的参数）。我仍在尝试掌握跟踪程序的窍门，所以我很难理解这些差异。我希望有人可以让我知道我的代码是否比文本版本效率低或更容易出错，并帮助结束这个头痛;)。

```
def print_multiples(n, high):         #This is the e-book version
    for i in range(1, high+1):
        print(n * i, end='   ')
    print()

def print_mult_table(high):
    for i in range(1, high+1):
        print_multiples(i, i+1)       #They changed high+1 to i+1 to halve output 
```

[来源](http://openbookproject.net/thinkcs/python/english3e/iteration.html "电子书源")

似乎他们的结果会有太多的 +1，因为 i+1 在 print_multiples 中会变为“高”，然后最终在 print_multiples 循环中再次添加 +1。（我还注意到他们保留了 end=' ' 而不是 end='\t' ，这会导致对齐。

```
def print_multiples(n):         #n is the number of columns that will be made
    '''Prints a line of multiples of factor 'n'.'''
    for x in range(1, n+1):     #prints n  2n  3n ... until x = n+1
        print(n * x, end='\t')  #(since x starts counting at 0, 
    print()                     #n*n will be the final entry)

def print_mult_table(n):            #n is the final factor
    '''Makes a table from a factor 'n' via print_multiples().
    '''
    for i in range(1, n+1):         #call function to print rows with i
        print_multiples(i)          #as the multiplier. 
```

这是我的。基本的评论是为了我的利益，试图让追踪在我的脑海中保持直截了当。我的功能对我来说更有意义，但可能会有一些不同。我真的不明白为什么这本书决定为 print_multiples() 创建两个参数，因为 1 对我来说似乎就足够了……我还更改了大多数变量，因为它们多次使用“i”和“high”来演示本地与全球相比。不过，我重新使用了 n，因为在两种情况下它都是相同的最终数字。

可能有更有效的方法来做这种事情，但我仍在迭代中。只是希望尝试了解什么有效，什么无效，而这个让我很烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:09:56.323

（注意：对，您正在运行 Python 3.x）
您的代码更简单，对我来说也更有意义。
他们的说法是对的，但其用意却不尽相同，所以其输出不同。
仔细比较两者的输出，看看你是否能注意到差异模式。

您的代码稍微“高效”一些，但是将内容打印到屏幕上需要（相对）较长的时间，并且您的程序打印的内容比他们的要少一些。

为了衡量效率，您可以在 Python 中“分析”代码以查看需要多长时间。下面是我运行的代码
a) 检查源文本和输出的差异
b) 分析代码以查看哪个更快。
您可以尝试运行它。祝你好运！

```
import cProfile

def print_multiples0(n, high):         #This is the e-book version
    for i in range(1, high+1):
        print(n * i, end='   ')
    print()

def print_mult_table0(high):
    for i in range(1, high+1):
        print_multiples0(i, i+1)       #They changed high+1 to i+1 to halve output

def print_multiples1(n):        #n is the number of columns that will be made
    '''Prints a line of multiples of factor 'n'.'''
    for x in range(1, n+1):     #prints n  2n  3n ... until x = n+1
        print(n * x, end='\t')  #(since x starts counting at 0,
    print()                     #n*n will be the final entry)

def print_mult_table1(n):            #n is the final factor
    '''Makes a table from a factor 'n' via print_multiples().
    '''
    for i in range(1, n+1):          #call function to print rows with i
        print_multiples1(i)          #as the multiplier.

def test( ) :
     print_mult_table0( 10)
     print_mult_table1( 10)

cProfile.run( 'test()') 
```

# node.js - 没有连接时如何杀死redis客户端？

> ID：10424524
> 
> 赞同：7
> 
> 时间：2012-05-03T02:59:22.253
> 
> 标签：node.js, redis

我有一个有效的服务器配置，其中无法访问 redis，但服务器可以正常运行（当找不到 redis 时，我只是剥离了功能）。

但是，我无法很好地管理连接错误。我想知道连接错误何时失败并在这种情况下关闭客户端。

我发现连接重试永远不会停止。而quit() 实际上被吞了——“为下一个服务器连接排队退出。” - 调用时。

在无法建立连接的情况下，有没有办法杀死客户端？

```
var redis = require("redis"),
    client = redis.createClient();

client.on("error", function(err) {
    logme.error("Bonk. The worker framework cannot connect to redis, which might be ok on a dev server!");
    logme.error("Resque error : "+err);
    client.quit();
});

client.on("idle", function(err) {
    logme.error("Redis queue is idle. Shutting down...");
});

client.on("end", function(err) {
    logme.error("Redis is shutting down. This might be ok if you chose not to run it in your dev environment");
});

client.on("ready", function(err) {
    logme.info("Redis up! Now connecting the worker queue client...");
}); 
```

*   错误 - Resque 错误：错误：Redis 连接到 127.0.0.1:6379 失败 - 连接 ECONNREFUSED
*   错误 - Redis 正在关闭。如果您选择不在开发环境中运行它，这可能没问题
*   错误 - Resque 错误：错误：Redis 连接到 127.0.0.1:6379 失败 - 连接 ECONNREFUSED
*   错误 - Resque 错误：错误：Redis 连接到 127.0.0.1:6379 失败 - 连接 ECONNREFUSED
*   错误 - Resque 错误：错误：Redis 连接到 127.0.0.1:6379 失败 - 连接 ECONNREFUSED
*   错误 - Resque 错误：错误：Redis 连接到 127.0.0.1:6379 失败 - 连接 ECONNREFUSED

有趣的一件事是发出了“结束”事件。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-05-16T01:37:52.387

控制客户端重新连接行为的正确方法是使用**retry_strategy**。

断开连接后，redisClient 将尝试按照默认行为重新连接。可以通过在创建客户端时提供 retry_strategy 来覆盖默认行为。

文档中一些细粒度控制的示例用法。

```
var client = redis.createClient({
    retry_strategy: function (options) {
        if (options.error && options.error.code === 'ECONNREFUSED') {
            // End reconnecting on a specific error and flush all commands with
            // a individual error
            return new Error('The server refused the connection');
        }
        if (options.total_retry_time > 1000 * 60 * 60) {
            // End reconnecting after a specific timeout and flush all commands
            // with a individual error
            return new Error('Retry time exhausted');
        }
        if (options.attempt > 10) {
            // End reconnecting with built in error
            return undefined;
        }
        // reconnect after
        return Math.min(options.attempt * 100, 3000);
    }
}); 
```

参考：[https ://www.npmjs.com/package/redis#options-object-properties](https://www.npmjs.com/package/redis#options-object-properties)

为了在连接丢失时杀死客户端，我们可以使用以下 retry_strategy。

```
var client = redis.createClient({
    retry_strategy: function (options) {
        return undefined;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:27:51.833

您可能只想在出错时强制终止与 redis 的连接，[`client.end()`](https://github.com/mranney/node_redis#clientend)而不是使用`client.quit()`which 等待所有未完成的请求完成，然后发送`QUIT`命令，如您所知，该命令需要与 redis 建立工作连接才能完成。

# android - 进入循环后我的应用程序冻结

> ID：10424525
> 
> 赞同：1
> 
> 时间：2012-05-03T02:59:27.777
> 
> 标签：android

我正在开发一个代码破解游戏，即 android 中的 Bulls and Cows。问题是，在我的主课中，我应用了一个逻辑来检查数字。这个逻辑属于循环，但是当我运行应用程序时，它在进入循环后冻结。我厌倦了在互联网上搜索答案。如果您能以某种方式提供帮助，我将不胜感激。如果我的代码对你来说很蹩脚，我很遗憾，因为我是 android 编程的初学者。以下是我的主类的代码。:-

包 com.bullsncows.bnc；

```
import java.util.Random;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.Gravity;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

  public class Startingpoint extends Activity {
     EditText etn1, etn2, etn3, etn4;
     Button bsub;
     TextView errormsg,res;
     Random r = new Random();
     int num = 0;
     boolean guessed = false;
       int count =0;

  /** Called when the activity is first created. */
   @Override
     public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       requestWindowFeature(Window.FEATURE_NO_TITLE);
       getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
       setContentView(R.layout.main);
       initializevar();
       // making the computer select a random four digit number
       while(hasDupes(num= (r.nextInt(9000) + 1000)));
       // on clicking the submit button

       bsub.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            String n1 = etn1.getText().toString();
            String n2 = etn2.getText().toString();
            String n3 = etn3.getText().toString();
            String n4 = etn4.getText().toString();
            String cnum = num+"";
            if      (n1.length()==0||n2.length()==0||n3.length()==0||n4.length()==0) {
                errormsg.setText("Fields cannot be left blank");
                errormsg.setTextColor(Color.RED);
                errormsg.setGravity(Gravity.CENTER);
            } else if (n1.equals(n2) || n1.equals(n3) || n1.equals(n4)
                    || n2.equals(n3) || n2.equals(n4) || n3.equals(n4)) {
                errormsg.setText("Please enter distinct number");
                errormsg.setTextColor(Color.RED);
                errormsg.setGravity(Gravity.CENTER);
            }else{
                String guess = n1+n2+n3+n4;
                errormsg.setText("Correct "+ cnum + " "+ guess);
                errormsg.setTextColor(Color.GREEN);
                errormsg.setGravity(Gravity.CENTER);

            do{
                    int bulls = 0;
                    int cows = 0;
                    count++;
                    for(int i= 0;i < 4;i++){
                        if(guess.charAt(i) == cnum.charAt(i)){
                            bulls++;
                        }else if(cnum.contains(guess.charAt(i)+"")){
                            cows++;
                        }
                        else if(bulls == 4){
                            guessed = true;
                            break;
                        }else{
                            res.setText(cows+" Cows and "+bulls+" Bulls.");
                            res.setTextColor(Color.BLUE);
                            res.setGravity(Gravity.CENTER);
                        }
                    }
                }while(!guessed);
                errormsg.setText("You won after "+count+" guesses!");
                errormsg.setTextColor(Color.MAGENTA);
                errormsg.setGravity(Gravity.CENTER);
            }
        }
    });

}

private void initializevar() {
    // TODO Auto-generated method stub
    etn1 = (EditText) findViewById(R.id.etnum1);
    etn2 = (EditText) findViewById(R.id.etnum2);
    etn3 = (EditText) findViewById(R.id.etnum3);
    etn4 = (EditText) findViewById(R.id.etnum4);
    bsub = (Button) findViewById(R.id.bsubmit);
    errormsg = (TextView) findViewById(R.id.tverror);
    res = (TextView) findViewById(R.id.tvres);
}
public static boolean hasDupes(int n){
    boolean[] digs = new boolean[10];
    while(n > 0){
        if(digs[n%10]) return true;
        digs[n%10] = true;
        n/= 10;
    }
    return false;
  }

 } 
```

以下是同一页面的 XML 编码：-

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Please select the numbers below" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/etnum1"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:maxLength="1" />

        <EditText
            android:id="@+id/etnum2"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:maxLength="1" />

        <EditText
            android:id="@+id/etnum3"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:maxLength="1" />

        <EditText
            android:id="@+id/etnum4"
            android:layout_width="40dp"
            android:layout_height="wrap_content"
            android:inputType="number"
            android:maxLength="1" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView android:id="@+id/tverror" 
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"/>
        <TextView android:id="@+id/tvres" 
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"/>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/bsubmit"
            android:layout_width="80dp"
            android:layout_height="40dp"
            android:layout_gravity="fill_vertical"
            android:text="Submit" />
    </LinearLayout>

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </TableLayout>

        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:06:30.733

如果不阅读您的所有代码，我似乎不太可能

```
else if(bulls == 4) 
```

将永远评估为真，因为您每次迭代都会重置公牛

```
int bulls = 0; 
```

你只有四次尝试：

```
for(int i= 0;i < 4;i++) 
```

自从

```
 else if(bulls == 4){
   guessed = true;
   break; 
```

是您唯一的终止条件，您将永远循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:03:21.453

如果您可以将代码范围缩小到导致问题的区域，那将有所帮助。但我可能猜到有错误的循环是

```
while(n > 0){
    n/= 10;
} 
```

n 可能永远不会达到 0。你能单步执行你的代码并准确找出哪一部分失败了吗？

# java - 从 Eclipse 中更改 Java 版本

> ID：10424528
> 
> 赞同：18
> 
> 时间：2012-05-03T02:59:43.487
> 
> 标签：java, eclipse, version

我用旧版本的java在eclipse中编写了一个项目。现在在另一台计算机上，但运行相同的代码，我得到了很多红色。

这是由于版本不兼容。我之前让我的教授在控制台窗口中更改了 Java 版本。在他这样做之后，代码编译得很好。我确定这段代码的情况相同。

在查看了其他教程和谷歌链接后，我只能找到命令行方法和 @override 方法。老实说，我还是不明白这些。

在 Eclipse 控制台中更改最初用旧代码编写的代码版本的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-03T03:04:25.043

在 eclipse go to 中`Window -> Preferences -> Java -> Compiler`，您可以更改 java 版本。希望能帮助到你。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-01-23T11:20:14.047

理想情况下，如果我们想要拥有两个不同版本的 Java [比如 1.6 和 1.7]，那么我们应该相应地定义两个工作区以避免任何混淆。如果我们的项目有方面，我们也可以更改项目方面。

在 Eclipse 中遵循以下步骤： 1) Windows -> Preferences -> Java -> Compiler 并根据图像根据您的要求设置合规性编译器级别。 ![编译器合规级别不是项目特定的](../Images/6f529d128d4d54c78746ae4b04f9063b.png)

2) Windows -> Preferences -> Java -> Installed JRE's 并检查您所需的 jre/jdk 是否可用，如下图所示： ![安装的 JRE 不是特定于项目的](../Images/4af9bdbdb2f043ca54cfd138754e1aa9.png)

3) 右键单击​​您的项目并转到 Java 构建路径并检查您所需的库是否可用，如下图所示： ![Java 构建路径项目特定](../Images/b08c39ddb0e90d550d5bd773a31939d7.png)

4) 现在您可以编辑 JRE 系统库或通过单击最后一张图像右侧的可用按钮添加一个，然后将打开如下所示的弹出窗口。在这里，可以更改执行环境【也可以设置默认值】 ![编辑/添加库](../Images/c4337fc7ee3d9781713cb7e7a173a59c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T03:09:03.167

在 myeclipse 中选择项目 -> 属性 -> java 编译器 -> 在那里你可以指定 jdk 版本。

# java - 如何在产品、LESS 或压缩 CSS 中使用 Twitter Bootstrap？

> ID：10424529
> 
> 赞同：3
> 
> 时间：2012-05-03T02:59:48.370
> 
> 标签：java, twitter-bootstrap, stylesheet

我在 J2EE 项目中工作，该项目希望使用 Twitter Bootstrap 作为前端的主要样式，并进行一些定制以适应产品。

我不知道我应该使用 Twitter Bootstrap 引入的 LESS 还是 CSS 格式，如果使用 LESS，我必须在服务器端或客户端将这些文件编译为 CSS，哪个 Java 框架在服务器端帮助我，因为我需要将样式表缓存在产品模式，否则不需要缓存它们。

我想知道客户端站点的预编译会影响产品性能，有人为此制定了基准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T19:32:32.953

您可以为此尝试[wro4j](http://code.google.com/p/wro4j/)，它可以用作运行时或构建时解决方案，用于将 less 转换为 css 的服务器端转换，还可以处理缓存。您可以在此处阅读有关较少支持 wro4j 的更多信息：

*   [Wro4j、页面加载优化和 Less.js](http://www.dzone.com/links/r/wro4j_page_load_optimization_and_lessjs.html)
*   [较少的 CSS 支持](http://code.google.com/p/wro4j/wiki/LessCssSupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:10:19.747

如果您不想处理服务器端编译器的麻烦，我会说使用 CSS。

如果你确实走这条路，这是一个很好的 Java 编译器：
[http ://www.asual.com/lesscss/](http://www.asual.com/lesscss/)

永远不要编译客户端，除非这是您必须使用的全部内容，它对浏览器与 gzip 压缩或压缩/缩小的 css 产生巨大影响。

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:31:21.647

LESS 非常适合开发，但只能将编译后的 .css 用于生产。无论你做什么，绝对不要让 less.js/LESS 编译客户端用于生产。即使您在开发过程中遇到 HTML 头部中包含 less.js 和 .less 文件的快速响应时间，其他所有人的响应时间也将一应俱全。我不知道是否有人可以为它制定良好的基准，因为您可以通过无数种方式导入/添加 LESS 文件。如果您在单独的 .less 文件中导入 130 个 mixin 并在客户端编译，那么即使结果大小相同，它的性能也会与一个 .less 文件不同。然后将文件大小、计算机硬件规格等考虑在内，任何基准测试都很难获得可靠的结果。

我的建议是每次保存时都使用 node.js 和 less.js 之类的东西即时编译为 css。或者使用少数几个不错的 gui 工具之一，这些工具将在您每次保存时监视项目并编译。（LESS.app、Crunch App、WinLESS 等）

# facebook - 如何让 Facebook 应用程序向用户发送通知

> ID：10424530
> 
> 赞同：0
> 
> 时间：2012-05-03T03:00:06.557
> 
> 标签：facebook, facebook-graph-api, notifications

有没有办法让我的应用程序向邀请他使用该应用程序的用户发送通知或私人消息？

假设我想邀请我的朋友使用一个应用程序，但我不想让他们知道我邀请了他们，所以应用程序会通知类似：“你的一个朋友邀请你使用这个应用程序！”

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:01:10.567

不，只有注册用户才能使用[Notifications API](https://developers.facebook.com/docs/app_notifications/)从应用程序获取通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:55:55.870

您可以通过 facebook 应用程序向 facebook 上的任何用户发送通知，但您必须是他/她的 faceook 朋友。

# java - 在抽象访问时访问数据库中数据的最佳实践

> ID：10424532
> 
> 赞同：4
> 
> 时间：2012-05-03T03:00:25.670
> 
> 标签：java, android, database, design-patterns, android-contentprovider

我正在尝试学习以下场景的最佳实践。

**我有一组定义的数据对象，它们会随着更新而改变。其中一些对象中包含其他对象的数组。**

使用`sqlite`我使用以下模式设置数据库：每个对象都是它的表。如果一个对象里面有一个子对象，它就有一个`fk`子表。

**表名称和对象可能会发生变化。因此，为了便于更改这些，我需要能够隐藏数据库调用。我还需要在插入数据库之前验证数据的能力。此验证也因对象而异，并且每个对象可以具有不同类型的验证。**

目前我正在尝试`DAO`为每个对象创建一个。并`DatabaseHelper`为每个使用 的对象`ContentProviders`提供对数据库的访问权限。然后开发人员使用`DAO`来做他们的事情。

它似乎变得非常丑陋和复杂。似乎还有一种更简单的方法......也许有一些技巧`ContentProviders`。

那么，有没有办法更好地将其整合`ContentProvider`到一个`DAO`模式中呢？或者有没有更好的方法来实现这个目标？

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:20:02.677

我最近在 .net 中创建了一个数据访问层。我创建了一个 BusinessObjectBase 类以及一个 BusinessObjectsBase（复数）类。将通用功能转移到这些类中比人们最初想象的更具挑战性。这里有一些提示。

1) 由于 .Net 是一种类型化语言（Java 也是），我需要获取有关基类虚函数所操作的派生类的类型信息。为了做到这一点，我使用了 Curiously Recurring Template Pattern（虽然我实际上没有听说过它，直到我自己意识到它的用处）：[http ://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern](http://en.wikipedia.org/wiki/Curiously_Recurring_Template_Pattern)

基本上，它是一个将自己的类型作为泛型参数的泛型类。

2）我非常依赖反思。不过，我不知道 java 必须提供多少反射方式，或者它是否足够快以对数据访问层有用。我不得不使用我在网上找到的一个免费的 fastflect 库，因为原生反射方法太慢了。

3）我使用 PostSharp（Java 有 Spring 做同样的事情）来处理更改跟踪，这样它只会在对象实际发生更改时更新对象。

4）好的，这是最重要的部分：保持简单。尽管我使用了一种奇怪的通用模式、反射和面向方面的编程来完全实现我想要的，但我的 dll 的核心实际上比你想象的要简单。我做了很多研究来寻找完美的orm工具，但发现最终只写一些函数来动态生成我自己的sql语句并不难。这就是反射派上用场的地方，因为我将属性放在表示数据库中表的类上，以及表示表中字段的属性上。这样，您只需在表或字段名称更改时更改属性并且...

5）我创建了一个简短的应用程序（几乎适合单个页面）来读取数据库表/字段并为每个表动态生成带有类的代码文件。

好的，所以您可能不想创建那么复杂的东西，但我想我会根据自己的经验提出一些想法，也许您会发现其中一个或多个有用:)

（作为旁注，我知道很多人会想：为什么你要经历所有这些麻烦，而不是仅仅使用现有的 ORM。我发现现有的 ORM 使用起来过于麻烦，而且我的实现更轻量级并且比我研究过的任何 ORM 都快）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:46:40.897

我总是有单独的数据库包名称。我编写了一个单独的数据库类，我在每个项目中都使用它。我只更改数据库名、表名、列名。以下是示例类：

```
package com.mobisys.android.contactwidget.database;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class ContactDatabase {
    public static final String DATABASE_NAME = "contact.db";
    public static final int DATABASE_VERSION = 1;
    public static final String CONTACT_TABLE_NAME = "contact";

    public static final String KEY_ID = "_id";
    public static final String KEY_ROW = "row";
    public static final String KEY_COL = "col";
    public static final String KEY_APP_WIDGET_ID = "app_widget_id";
    public static final String KEY_CONTACT_IMAGE = "image";
    public static final String KEY_CONTACT_NAME = "name";
    public static final String KEY_CONTACT_NUMBER = "number";
    public static final String KEY_CONTACT_EMAIL = "email";

    private final OpenHelper contactHelper;

    public ContactDatabase(Context context){
        contactHelper=new OpenHelper(context);
    }

    public long insert(String table, ContentValues values){
        return contactHelper.getWritableDatabase().insert(table, null, values);
    }

    public long delete(String table, String where, String[] whereArgs){
        return contactHelper.getWritableDatabase().delete(table, where, whereArgs);
    }   

    public int update(String table, ContentValues values, String whereClause, String[] whereArgs){
        return contactHelper.getWritableDatabase().update(table, values, whereClause, whereArgs);
    }

    public long countRows(String query){
        return DatabaseUtils.longForQuery(contactHelper.getReadableDatabase(), query, null);
    }

    public Cursor query(String table,String[] columns, String selection,String[] selectionArgs,String groupBy,String having,String orderBy){
        return contactHelper.getReadableDatabase().query(table, columns, selection, selectionArgs, groupBy, having, orderBy);
    }

    public void close(){
        contactHelper.close();
    }

    private static class OpenHelper extends SQLiteOpenHelper {

        OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE "+
                CONTACT_TABLE_NAME+
                " ("+ KEY_ID+" INTEGER PRIMARY KEY AUTOINCREMENT, "+
                KEY_ROW+" INT, "+
                KEY_COL+" INT, "+
                KEY_APP_WIDGET_ID+" INT, "+
                KEY_CONTACT_IMAGE+" BLOB, "+
                KEY_CONTACT_NAME+" TEXT, "+
                KEY_CONTACT_NUMBER+" TEXT, "+
                KEY_CONTACT_EMAIL+" TEXT"+")");
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int arg1, int arg2) {
            String alter_query1="alter table "+CONTACT_TABLE_NAME+" RENAME TO temp1;";
            db.execSQL(alter_query1);

            onCreate(db);

            String insert_query1="insert into "+CONTACT_TABLE_NAME+" select * from temp1;";
            db.execSQL(insert_query1);

            String delete_query1="DROP TABLE temp1;";
            db.execSQL(delete_query1);
        }

    }
} 
```

我还创建了一个 HelperDatabase 类，其中包含所有与数据库相关的静态方法。示例类：

```
package com.mobisys.android.contactwidget.database;

import android.content.ContentValues;
import android.database.Cursor;

import com.mobisys.android.contactwidget.data.CONTACT;

public class HelperDatabase {

    public static long inserContact(CONTACT contact, ContactDatabase database){
        ContentValues values=new ContentValues();
        values.put(ContactDatabase.KEY_APP_WIDGET_ID, contact.app_widget_id);
        values.put(ContactDatabase.KEY_ROW, contact.row);
        values.put(ContactDatabase.KEY_COL, contact.col);
        values.put(ContactDatabase.KEY_CONTACT_NAME, contact.name);
        values.put(ContactDatabase.KEY_CONTACT_NUMBER, contact.cotact_number);
        values.put(ContactDatabase.KEY_CONTACT_EMAIL, contact.email);
        values.put(ContactDatabase.KEY_CONTACT_IMAGE, contact.image);

        long id=database.insert(ContactDatabase.CONTACT_TABLE_NAME, values);
        return id;
    }

    public static void updateMyContactInfo(ContactDatabase contactdb, int _id, String number){
        ContentValues values=new ContentValues();
        values.put(ContactDatabase.KEY_CONTACT_NUMBER, number);
        contactdb.update(ContactDatabase.CONTACT_TABLE_NAME, values, "_id"+"="+_id, null);
    }

    public static Cursor getContacts(ContactDatabase contactdb, int sort){
        if(sort==1)
            return contactdb.query(ContactDatabase.CONTACT_TABLE_NAME, null, null, null, null, null, ContactDatabase.KEY_CONTACT_NAME);
        else if(sort==2)
            return contactdb.query(ContactDatabase.CONTACT_TABLE_NAME, null, null, null, null, null, ContactDatabase.KEY_CONTACT_EMAIL);
        else if(sort==3)
            return contactdb.query(ContactDatabase.CONTACT_TABLE_NAME, null, null, null, null, null, ContactDatabase.KEY_CONTACT_NUMBER);

        return contactdb.query(ContactDatabase.CONTACT_TABLE_NAME, null, null, null, null, null, null);
    }

    public static boolean isContactExist(ContactDatabase contactdb, String number){
        return contactdb.countRows("SELECT COUNT(*) FROM "+ContactDatabase.CONTACT_TABLE_NAME+" WHERE"+ ContactDatabase.KEY_CONTACT_NUMBER + "='"+number+"'")>0;
    }   
} 
```

所以，基本上，我可以为项目中的每个数据库设置一个类和一个 HelperDatabase 类，它执行所有插入、更新、检索和删除功能。

如果我的项目严重依赖数据库，那么最好为您的数据库类设置一个静态对象，该对象将在您的主要活动开始时打开，并在您的主要活动将销毁时关闭。

以下是代码示例：

```
public class HomeActivity extends Activity implements View.OnClickListener{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        HelperDatabase.contactdb=new ContactDatabase(this);
        startApplication();
    }

    @Override
    public void onDestroy(){
        HelperDatabase.contactdb.close();
        super.onDestroy();
    }
} 
```

希望，这将对您有所帮助。

# ruby-on-rails - Rails 时间对象

> ID：10424537
> 
> 赞同：0
> 
> 时间：2012-05-03T03:01:41.187
> 
> 标签：ruby-on-rails, date, time, controller

我的事件控制器中有一个快速添加操作，因为客户端实际上只在给定日期的三个不同时间段安排事件。日期和时间在默认形式下工作正常，但尝试手动设置值给我带来了一些麻烦。

```
def quick_add #params are date like 2012-04-29, timeslot is a string

timeslot = params[:timeslot].to_sym
date = params[:date].to_date

@workout = Workout.new do |w|
  w.name = 'Workout!'
  w.date = date
  case timeslot
  when :morning
    w.time = Time.local(w.date.year, w.date.month, w.date.day, 6)
  when :noon
    w.time = Time.local(w.date.year, w.date.month, w.date.day, 12)
  when :evening
    w.time = Time.local(w.date.year, w.date.month, w.date.day, 18, 15)
  else
    w.time = Time.now
  end
end 
```

正在创建事件，日期正确，但时间是：

```
Morning: 2000-01-01 10:00:00 UTC 
  Expected: 2012-05-02 06:00:00 UTC -400
Noon: 2000-01-01 16:00:00 UTC 
  Expected: 2012-05-02 12:00:00 UTC -400
Evening: 2000-01-01 22:15:00 UTC 
  Expected: 2012-05-02 18:15:00 UTC -400 
```

值得注意的是，在 rails 控制台中运行命令似乎得到了我期望的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:22:34.373

时间值以整数形式存储在 UTC/GMT (+0) 时区中，因此不必存储时区数据。Rails 总是将时间作为 UTC 时间存储在数据库中。当您读出它们时，您会希望再次将它们转换回您的本地时区。

您可以使用`time.getlocal`将其转换为您当地的时区。

# cocos2d-iphone - 为什么 cocos2d 找不到自己的图片？

> ID：10424539
> 
> 赞同：0
> 
> 时间：2012-05-03T03:01:53.913
> 
> 标签：cocos2d-iphone

全部。

我将我的图片“Icon2222.png”添加到我的项目中，并将图片名称从“grossini.png”（原始）更改为“Icon2222.png”，

但是当我运行该项目时，它因名为 NSInternalInconsistencyException 的异常而崩溃，并提示我“无法创建纹理。UIImage 为零”。

我在哪里做错了？我刚换了一张图。

提前致谢。

2012-05-03 14:59:10.480 ActionManagerTest[3215:f803] cocos2d: cocos2d v1.0.1

2012-05-03 14:59:10.481 ActionManagerTest[3215:f803] cocos2d：使用导演类型：CCDirectorDisplayLink

2012-05-03 14:59:10.529 ActionManagerTest[3215:f803] cocos2d：操作系统版本：5.0 (0x05000000)

2012-05-03 14:59:10.529 ActionManagerTest[3215:f803] cocos2d: GL_VENDOR: Apple Computer, Inc.

2012-05-03 14:59:10.530 ActionManagerTest[3215:f803] cocos2d: GL_RENDERER: Apple 软件渲染器

2012-05-03 14:59:10.531 ActionManagerTest[3215:f803] cocos2d: GL_VERSION: OpenGL ES-CM 1.1 APPLE

2012-05-03 14:59:10.531 ActionManagerTest[3215:f803] cocos2d: GL_MAX_TEXTURE_SIZE: 4096

2012-05-03 14:59:10.532 ActionManagerTest[3215:f803] cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16

2012-05-03 14:59:10.532 ActionManagerTest[3215:f803] cocos2d: GL_MAX_SAMPLES: 4

2012-05-03 14:59:10.533 ActionManagerTest[3215:f803] cocos2d：GL 支持 PVRTC：是

2012-05-03 14:59:10.533 ActionManagerTest[3215:f803] cocos2d：GL 支持 BGRA8888 纹理：是

2012-05-03 14:59:10.534 ActionManagerTest[3215:f803] cocos2d：GL 支持 NPOT 纹理：是

2012-05-03 14:59:10.535 ActionManagerTest[3215:f803] cocos2d：GL 支持discard_framebuffer：是

2012-05-03 14:59:10.535 ActionManagerTest[3215:f803] cocos2d：编译时支持 NPOT：否

2012-05-03 14:59:10.536 ActionManagerTest[3215:f803] cocos2d：在 TextureAtlas 中使用 VBO 支持编译：是

2012-05-03 14:59:10.536 ActionManagerTest[3215:f803] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是

2012-05-03 14:59:10.537 ActionManagerTest[3215:f803] cocos2d: 使用分析支持编译: 否

2012-05-03 14:59:10.549 ActionManagerTest[3215:f803] 视网膜显示不支持

2012-05-03 14:59:10.550 ActionManagerTest[3215:f803] cocos2d: CCTexture2D。无法创建纹理。UIImage 为零

2012-05-03 14:59:10.551 ActionManagerTest[3215:f803] cocos2d: 解除分配 [切换到进程 3215 线程 0x12f0b]

2012-05-03 14:59:10.551 ActionManagerTest [3215:f803] cocos2d：无法在 CCTextureCache 中添加图像：Icon2222.png

2012-05-03 14:59:10.559 ActionManagerTest[3215:f803] cocos2d: 解除分配

2012-05-03 14:59:10.559 ActionManagerTest[3215:f803] ***断言失败 -[CCLayer addChild:], /Users/qusean/Downloads/cocos2d-iphone-1.0.1/cocos2d/CCNode.m:413

2012-05-03 14:59:10.561 ActionManagerTest[3215:f803] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“参数必须为非零”

*** First throw call stack: (0x17de052 0x14ddd0a 0x1786a78 0x1e92db 0xb300 0x4546 0x4adb0e 0x4ae8a6 0x4bd743 0x4be1f8 0x4b1aa9 0x1ed4fa9 0x17b21c5 0x1717022 0x171590a 0x1714db4 0x1714ccb 0x4ae2a7 0x4afa9b 0x2581 0x2505 0x1) terminate called throwing an exception

这是我的代码：

1

```
CCSprite *child = [CCSprite spriteWithFile:@"Icon2222.png"];    
[child setPosition:ccp(200,200)];
[layer addChild:child]; 
```

2

```
CGSize winSize = [[CCDirector sharedDirector] winSize];
CCSprite *player = [CCSprite spriteWithFile:@"Icon2222.png"
                                               rect:CGRectMake(0, 0, 27, 40)];
player.position = ccp(player.contentSize.width/2, winSize.height/2);
[layer addChild:player]; 
```

两人都坠毁了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:09:56.390

我以前遇到过这个问题。

同样的事情发生了因为我多次更改了finder中的png名称。

使用您的图形工具创建的原始输出 png 名称将顺利进行。

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:17:40.787

从捆绑包中删除文件，然后使用正确的文件名将其带回。您只是在本地项目中更改文件的名称，而不是在项目目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:59:48.547

我建议您清理构建...删除应用程序..然后再次运行...如果它不能解决您的问题...删除所有资源并再次添加到项目...希望这会有所帮助..： )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-17T21:37:07.247

我知道这个线程相当陈旧，但我遇到了同样的问题，我的解决方案可能会帮助未来迷失的灵魂。

我的问题是该文件未附加到目标，因此未包含在内且无法找到。

即，请记住确保在“实用程序”选项卡中或在导入文件时检查该文件是否在您的目标中。
![在此处输入图像描述](../Images/ade51e2c94af4ca593e51c66750fca5c.png)

# constraints - Eclipse 约束编程 - 搜索/6

> ID：10424547
> 
> 赞同：0
> 
> 时间：2012-05-03T03:04:11.403
> 
> 标签：constraints, constraint-programming, logic-programming

我无法理解eclipse 约束编程框架中的 search/6 函数[的](http://www.eclipseclp.org/doc/bips/lib/ic/search-6.html "这个")文档。

我知道选择参数基本上会影响值排序。

选择方法似乎也选择了变量排序，但我并不完全理解它的所有选项。

我不太了解其他参数，所以我想知道是否有人可以用语言解释它们。我对约束逻辑编程的理论有很好的理解，所以请随意参考这些概念。我只是不明白该文档中的很多 CS 术语（arity 等）

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:55:32.110

I'll try to answer it as briefly as possible, since `search/6` is one of the most complex predicates you can find in the ECLiPSe system.

Any more detailed follow-up questions would probably better be asked in the ECLiPSe user mailing list, though.

The `search/6` predicate is a generic predicate for controlling the search for a solution of a CLP problem. It allows the user to control the shape of the search tree (the order of variables along the branches, the order of the branches, and the portion of the search tree that is visited). The predicate has 6 parameters: `search(+L, ++Arg, ++Select, +Choice, ++Method, +Option)`. (`+` and `++` denote the mode of the parameter)

The first two parameters go together. `L` is either a list of variables or a list of terms. If it's the former, the `Arg` must be 0, if it's the latter, then `Arg` denotes the position of the variables that should be instantiated during the search, e.g.:

```
search([A,B],0,input_order,indomain,complete,[]). 
```

or

```
search([p(1,A),p(2,B)],2,input_order,indomain,complete,[]). 
```

In both cases, the variables `A` and `B` are instantiated during search.

The third parameter is the **selection** method. This method is used by `search/6` to select the next variable from the list `L` to instantiate.

The simplest option is `input_order`: the search simply iterates of the variables in the list. In the examples above, it would instantiate `A` first, then `B`. The other options consider the domain size and/or the number of constraints attached to the variables, and make the selection accordingly. E.g., `first_fail` chooses the variable with the smallest domain. If the current domain of `A` is `[1,2,3]` and `B` has the domain `[1,3]`, then `B` will be selected and instantiated first. If more than one variable has the same smallest domain size, then the first of these by input order will be selected. Selection methods that take the domain size into account achieve a dynamic variable ordering, since the domain sizes will change (shrink) during search, depending on the amount of propagation that the constraints achieve.

The other selection methods should now be self-explanatory.

It is also possible to define your own selection method, provided that the predicate that implements it has arity 2, i.e., has two parameters. The predicate must take a variable as input and calculate some criterion value. The variable with the smallest criterion value will be selected.

The fourth parameter is the **choice** method. Once a variable is selected, the choice method controls the order in which the values in its domain are tried during search.

The simplest option is `indomain`, which chooses the values in the variable's current domain in ascending order. I.e., if variable `A` has the domain `[1,3,5]`, then the search will initially bind `A` to 1, on backtracking bind it to 3, and finally to 5\. `indomain_middle` will start with 3, then 1, then 5.

The more complex choice methods (i.e., other than `indomain`) will remove a tried value on backtracking, i.e., basically add additional constraints like `A#\=1`. This will cause additional propagation which may in turn allow earlier detection of infeasibilities. You can see the effect when running the n-queens example from the `search/6` documentation that you linked to in your question.

Again, it is also possible to define your own choice method. The predicate must be of arity 1 or 3\. If the arity is 1, then the predicate takes one variable as input and binds it to a value (or makes some other choice which alters the domain of the variable). If the arity is 3, then you can use the two additional parameters to pass along some state information which you can use to make the choice.

The fifth parameter is the **search** method. This controls the size of the section of the search tree that the search should explore (whereas the selection method controls the order of the variables along the branches of the tree, and the choice method controls the order of the branches in the search tree).

The simplest option is `complete`, which searches the tree left-to-right until the tree is exhausted. All other options (apart from symmetry breaking) are incomplete search methods, i.e., there will be branches in the search tree that are left unexplored. If the solution is on the leaf of such an unexplored branch, then it will not be found. You have to make sure that selection and choice methods shape the search tree in a way that the incomplete search method is able to find the solution. The option `bbs`, for instance, restricts the number of backtracks that can be made during search. If that number is exhausted, then the search will stop.

Symmetry breaking will only exclude branches that are equivalent (symmetrical) to other branches, in some way.

The sixth parameter is a list of possible additional options, described in the `search/6` documentation. Normally, you won't need them.

# concurrency - 公共锁的范围是什么——功能、文件还是项目？

> ID：10424553
> 
> 赞同：1
> 
> 时间：2012-05-03T03:06:03.983
> 
> 标签：concurrency, google-apps-script

我有一个 Google Apps 脚本项目（在 Google 站点中）。该项目有一个文件。该文件包含函数A 和函数B。functionA 对一组文件进行操作，而 functionB 对一组完全不同的文件进行操作。为了防止并发修改，每个函数都使用 Lock 服务来获取它自己的公共锁。每个函数每 1 分钟触发一次。

我发现 FunctionA 似乎无法获得锁，而 FunctionB 有锁。

我的问题是，这是预期的吗？如果是这样 a) 什么是文档参考和 b) 我如何设计我的系统以便 functionA 和 functionB 实际上可以同时运行？我是否需要将功能向上移动到单独的文件甚至不同的项目中？

我锁定 functionA 的目标是停止 functionA 的多个并发运行。与函数 B 类似。我不在乎functionA是否与functionB同时运行。事实上，我希望它们同时运行，以便从用户的角度认为事情运行得很快。

我已经阅读[了 LockService 文档](https://developers.google.com/apps-script/class_lockservice#getPublicLock "医生")，但它非常有限——它只是说锁的范围是“一段代码”或“一段代码”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:21:55.743

它是“每个项目”。不幸的是，您不能为同一个脚本拥有两个锁（除非它是不同的用户并且您获得了私人锁，这不是您的情况）

a) 我不是 API 设计师（我是杰出贡献者），但我很确定这是设计使然。由于资源限制，他们可能以这种方式限制它。

b）因此，您必须创建一个不同的脚本/项目才能拥有不同的锁。

# tsql - 根据之后运行的查询计数在前面注入一个值

> ID：10424556
> 
> 赞同：1
> 
> 时间：2012-05-03T03:06:13.060
> 
> 标签：tsql

我想注入一个条件值。

```
Select 'Select a Value' as CarID, 
       'Select a Value' as CarName
UNION
Select Distinct CarID, 
       CarName 
from Cars c
where ..some condition... 
```

所以在这里我只想在 select 语句返回的计数 > 1 时注入“选择一个值”，因为这将是下拉列表的数据集。

所以换句话说，如果该选择返回 0 或 1 结果，我不想包含这个联合。

有没有办法倒退或检查在返回列表的开头注入或不注入的计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:35:27.180

```
with C as 
(
  select CarID, CarName
  from Cars
  --where ..some condition...
)
select CarID, CarName
from
  (
    select CarID, CarName, 1 as Sort
    from C
    union all
    select 'Select a Value', 'Select a Value',  0
    where exists(select * from C)
  ) T
order by Sort 
```

[SQL小提琴](http://sqlfiddle.com/#!3/b7ba6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:30:37.963

在 SQL Server 中，

```
SELECT * FROM (
    Select 'Select a Value' as CarID, 
           'Select a Value' as CarName
    UNION
    Select CarID, CarName 
    from Cars c
    -- WHERE...
) SUB
WHERE @@ROWCOUNT>1 
```

# django - Django-nonrel vs Django-mongodb vs Mongokit vs pymongo native

> ID：10424562
> 
> 赞同：8
> 
> 时间：2012-05-03T03:07:08.127
> 
> 标签：django, mongodb, pymongo, django-nonrel, mongokit

在一个需要 NoSQL 存储的 Django 项目上工作，我相信我已经选择了 Mongo。我见过很多谈论 Mongo 和 Django 的话题，但没有一个提到 Django-nonrel，我不明白为什么它可能会被取消资格，但我对其中任何一个都没有经验。

理想情况下，我想为简单的事情、用户身份验证、组等保留 SQL 存储，并将 Mongo 用于更大的数据。

我还希望将 Mongo 存储的对象作为类，采用 Django-ORM 样式，以便我可以有类似的“感觉”，但这并不重要。

最后，以上任何一项是否允许我使用 Django 的多数据库支持来支持任何事情，或者我的所有 mongo 查询是否都有效地从 Django ORM“带外”？

如果我遗漏了任何其他可能很重要的因素，请随时提示我。我在这个领域知之甚少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T04:32:17.120

Django-nonrel 是在 MongoDB 上使用 Django 的方式。有 django-mongodb.org，但它只是建立在 Django-nonrel 之上。django-nonrel 邮件列表上有相当多的 mongodb 活动。

将您的 mongo 类存储为 Django ORM 对象可以正常工作，这就是重点。

我还没有尝试将多数据库支持与 SQL 一起使用。我还没有看到很多人这样使用它，我怀疑它很可能不起作用。将 django-nonrel 正式作为 Django 1.4 的一部分有一些工作，我怀疑它会在完成后工作。

使用 django-nonrel 进行身份验证工作正常。主要问题是多对多关系。auth 模块将其用于每个用户对象的权限——这是行不通的。如果您不需要它，您可能根本不使用 SQL 就可以逃脱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-17T17:51:00.210

添加到dragonx答案。django-nonrel 的问题是 auth 模块不起作用。

您可以使用 $lookup 运算符执行多对母连接。[djongo](https://github.com/nesdis/djongo)会自动为你做。它将 SQL 语法转换为 mongodb 聚合查询并填充对象模型，就像其他 SQL 驱动程序一样。

auth 模块在 djongo 上运行良好

# php - PHP：mysql 语句有问题。

> ID：10424564
> 
> 赞同：2
> 
> 时间：2012-05-03T03:07:27.677
> 
> 标签：php, mysql, class

我有一个公共函数来查询 mysql。在我的本地计算机上一切正常，但是一旦上传到 Godaddy 服务器就会出现问题。基本上，`$rows`当我调用该方法时，它是空的。

我确信数据库数据是正确的，查询应该返回很少的记录。我花了几个小时试图弄清楚但没有运气。我希望你们能帮助我解决这个问题。提前致谢。

代码

```
 class test{

     public function getEmployees($username,$password) {

         $stmt = mysqli_prepare($this->connection,
              "SELECT name, password
               FROM employee
               WHERE name='$username' && password='$password'
               ");     

          $this->throwExceptionOnError();

          mysqli_stmt_execute($stmt);
          $this->throwExceptionOnError();

          $rows = array();

          while (mysqli_stmt_fetch($stmt)) {
              $rows[] = $row;
              $row = new stdClass();
              mysqli_stmt_bind_result($stmt,  $row->name, $row->password);
          }
          if(mysqli_stmt_num_rows($stmt)==0){

              return false;
          }else{
              return $rows;
          }

          mysqli_stmt_free_result($stmt);
          mysqli_close($this->connection);
   }

}

$test=new test();
$row=$test->getEmployees('bob','1111');
echo "<pre>";
print_r($row);
echo "</pre>";

//it prints nothing on the page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:22:05.503

我认为问题在于代码结构。尝试：

```
class test{

     public function getEmployees($username,$password) {

         $stmt = mysqli_prepare($this->connection,
              "SELECT name, password
               FROM employee
               WHERE name='$username' && password='$password'
               ");     

          $this->throwExceptionOnError();

          mysqli_stmt_execute($stmt);
          $this->throwExceptionOnError();

          $rows = array();
          $row = new stdClass();
          mysqli_stmt_bind_result($stmt,  $row->name, $row->password);

          while (mysqli_stmt_fetch($stmt)) {
              $rows[] = $row;

          }

          mysqli_stmt_free_result($stmt);
          mysqli_close($this->connection);
          $temp = mysqli_stmt_num_rows($stmt); 
          if($temp==0){

              return false;
          }else{
              return $rows;
          }

   }

}

$test=new test();
$row=$test->getEmployees('bob','1111');
echo "<pre>";
print_r($row);
echo "</pre>"; 
```

# ant - 通过 Ant 任务运行 pngquant

> ID：10424568
> 
> 赞同：0
> 
> 时间：2012-05-03T03:07:33.807
> 
> 标签：ant, png

我一直在尝试创建一个使用 pngquant 处理一堆 PNG 文件的自定义 Ant 任务，但没有成功。

到目前为止，这是我一直在尝试的（并且我一直将它作为 HTML5 样板构建脚本的一部分运行，所以这就是动态值的来源）：

```
<apply executable="${basedir}/${dir.build.tools}/pngquant" dest="./${dir.publish}/${dir.images}/" osfamily="unix">
    <fileset dir="./${dir.source}/${dir.images}/" includes="**/*.png"  excludes="${images.bypass}, ${images.default.bypass}"/>
    <arg value="-force 256"/>
    <targetfile/>
    <srcfile/>
    <mapper type="identity"/>
</apply> 
```

目前，每张图片都会出现“无法打开阅读”的错误。

我知道这可能不是很有帮助，但我真的不知道从哪里开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:39:18.467

我不知道问题是什么，但我认为您的 Ant XML 本身有问题。

首先，您`excludes`的逗号后面有一个额外的空格。

> excludes：必须排除的文件模式的逗号或空格分隔列表。

*也就是说，您应该使用逗号或空格，而不是一起使用。所以应该是`${images.bypass},${images.default.bypass}`。*---- 我发现不对。它使用`StringTokenizer(String sInput, String sDelimiter, boolean bReturnTokens)`并将false传递给第三个参数，以便您可以`,`一起使用。

另外，我建议您使用嵌套`<include>`和`<exclude>`元素使其更清晰。

其次，如果你不需要使用它们，你不需要把它们放在里面`<targetfile/>`。`<srcfile/>``<apply>`

第三，`<arg value="-force 256" />`应该是`<arg value="-force"/>`和`<arg value="256"/>`。

# google-earth - 不需要 Google 地球插件密钥，也无法使用

> ID：10424569
> 
> 赞同：2
> 
> 时间：2012-05-03T03:07:58.813
> 
> 标签：google-earth, google-earth-plugin, api-key

Google 地球浏览器插件[显然不再需要密钥](https://developers.google.com/maps/signup)，而且无法请求密钥。

问题是当我运行他们[在此处找到](https://developers.google.com/earth/documentation/index)[的示例代码](http://owenmundy.com/teaching/code/apis/earth_no_key_test.php)（Chrome 18 和 FireFox 10）时，我收到一条错误消息：

> 此网站上使用的 Google Maps API 密钥是为其他网站注册的。这个网站的开发者可以在这里生成一个新的密钥。

当我检查[他们的插件页面](http://www.google.com/earth/explore/products/plugin.html)时，它告诉我：

> 好消息，您已经安装了 Google 地球插件。（版本 6.0.3.2197）

所以不需要密钥，但是当我尝试运行没有密钥的代码时，我被告知要获得一个，但我不能，因为谷歌已经取消了请求一个或下载更新的能力。我在网上看到 6.2 是最新版本，但是从 6 开始就不需要密钥了。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:05:37.260

在尝试强制刷新、清空缓存并升级浏览器后，谷歌浏览器仍然不允许[我的不使用密钥的示例](http://owenmundy.com/teaching/code/apis/earth_no_key_test.php)工作。我已经想出了如何解决这个问题。

问题在于 Chrome 不会自动更新 Google 地球浏览器插件，无论使用哪种浏览器。此外，[他们的插件页面](http://www.google.com/earth/explore/products/plugin.html)确认我有一个旧版本（6.0.3），但也不允许我手动更新。所以我按照[这些说明](http://support.google.com/earth/bin/answer.py?hl=en&answer=178389)卸载了插件，然后下载了最新版本（6.2.2）并安装了它。我必须做的最后一件事（在我的 MacBook Pro 上）：在我的用户目录的库中安装新插件

```
~/Library/Internet Plug-Ins/ 
```

但为了让它正常工作，我必须将“Google Earth Web Plug-in”文件移动到根的库中，然后重新启动 Chrome。

```
/Library/Internet Plug-Ins/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T10:55:31.667

尽管它说您在各个官方地方不需要 Google 地球的 API 密钥，但如果您在[https://code.google.com/apis/console](https://code.google.com/apis/console)上创建一个（在“API 访问”下，然后单击“创建新的浏览器密钥”）并包含在 jsapi 中，包括：`<script src="//www.google.com/jsapi?key=yourkeyhere" type="text/javascript"></script>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:01:50.843

Earth API 不需要密钥 - 您的示例代码似乎工作正常。如果您以后确实看到错误消息，请确保`key=`在加载 Google JS 时没有参数：

```
<script src="http://www.google.com/jsapi?key=ABQIAAAAwbkbZLyhsmTCWXbTcjbgbRSzHs7K5SvaUdm8ua-Xxy_-2dYwMxQMhnagaawFo7L1FE1-amhuQxIlXw"></script> 
```

键是特定于域的，因此如果您从某个地方（例如从[Demo Gallery](https://developers.google.com/earth/documentation/demogallery)复制旧示例代码），您应该只删除该`key=xxx`部分：

```
<script src="http://www.google.com/jsapi"></script> 
```

# php - Ecipe for php 如何知道我的函数被调用了多少。例如 foo()。我想知道在哪里调用 foo() 和文件位置

> ID：10424571
> 
> 赞同：0
> 
> 时间：2012-05-03T03:08:38.157
> 
> 标签：php

我正在为 PHP 使用 eclip，我可以使用 ctrl+click 跳转到任何位于函数的文件。与上面相反，如果我想知道文件 foo.php 中的 foo() 有多少调用，有什么技巧吗？使用哪个名为 foo() 的 php 文件？

我可以使用“搜索”，但如果相同的函数名位于许多 php 文件中，结果会很混乱。

# java - 如何在 java 的 Main 中更改 String args[] 的数据类型

> ID：10424577
> 
> 赞同：0
> 
> 时间：2012-05-03T03:09:40.107
> 
> 标签：java

main() 的默认参数始终是 (String[] arg)。当我将其更改为（Int arg）时，我得到一个运行时错误“没有这样的方法错误”。我知道错误是由更改参数引起的。

我的问题是我可以将参数从字符串数组更改为其他参数吗？

或者我必须始终使用默认值，然后使用 Integer.parseInt() 将其转换为 int ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:10:49.987

main 方法的签名是固定的，你不能改变它。

您需要将参数从字符串转换为整数。

# python - 如何在python中运行脚本

> ID：10424582
> 
> 赞同：-2
> 
> 时间：2012-05-03T03:10:21.687
> 
> 标签：python

我是 python 新手，没有以前的编程经验。我想在 python 上运行一个脚本。我读过我必须在notepad++之类的程序中编写脚本并将其保存为.py文件。但是在那之后我用什么命令来运行它？请帮助我到处寻找，我认为问题在于这个问题太基本了。我在 Windows 7 上，运行 python 2。

如果这不是足够的信息，谢谢和抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:18:32.373

如果您尚未将 Python 安装路径添加到 Windows PATH 变量中，则从命令行运行 Python 会有点困难。

你有两个选择：

1.  通过双击它来运行你的脚本（可能不起作用）。
2.  通过命令行运行您的脚本。

如果您想通过 CLI 进行尝试，请按`Windows`+`R`并运行`cmd`。

从 Windows 命令提示符，`cd`进入 Python 文件所在的文件夹（如果您不知道如何操作，请在 Google 上获取教程）并运行`C:\Python27\python.exe your_python_file.py`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T03:12:09.590

检查文档：[http ://docs.python.org/tutorial/interpreter.html](http://docs.python.org/tutorial/interpreter.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T02:55:26.023

假设您在 C:\Python27 中安装了 Python，并且您创建了一个名为 test.py 的脚本并将其保存在同一目录下。

1.  打开命令提示符
2.  类型：`CD C:\Python27`转到 Python 文件夹（这是 python.exe 所在的位置）
3.  键入：（`python test.py` 注意：不要先键入python，它会激活python交互模式，它不会工作。如果你这样做了，只需键入：`quit()`退出交互模式）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T03:13:39.933

打开命令提示符并将目录更改为保存脚本的位置，然后键入：Your_File_Title_here.py（按回车键），它将运行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T03:17:42.857

`python <your_file.py>`大约是标准的。在执行此操作之前，请确保您已在计算机上正确安装了 Python。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-12T03:02:22.213

一个简单的方法是：

1.  右键单击 .py 脚本
2.  选择“使用 IDLE 编辑”（这将打开一个 Python IDE 窗口进行编辑/运行）
3.  按“F5”运行模块（或从“运行”下拉菜单中选择“运行模块”）

# facebook - 如何通过我的网络应用程序将内容共享到 Facebook，显示为“通过 [我的应用程序名称]”？

> ID：10424590
> 
> 赞同：1
> 
> 时间：2012-05-03T03:12:04.317
> 
> 标签：facebook

如何在我的网络应用程序中创建 Facebook 共享链接，以便它在时间线中显示为“通过 [我的应用程序名称]”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:23:16.280

通过您的应用程序制作的所有帖子/链接/照片/等都将在前端归因于它；

如果您*没有*获得“通过”链接，我会感到非常惊讶，这可能表明您做事不正确（例如，使用 sharer.php 或类似按钮而不是提要对话框）

# c# - 标记第三方产生的线程以进一步杀死

> ID：10424596
> 
> 赞同：0
> 
> 时间：2012-05-03T03:14:22.693
> 
> 标签：c#, .net, multithreading, thread-safety, threadpool

在我们的应用程序中，我们有一个用于处理 DAL 的外部库。有时它会挂在一些琐碎的方法上，比如打开数据库连接。它只是产生另一个用于连接的线程，并且该线程永远不会终止。

那么，我怎样才能在产生的线程中做一些标记呢？然后我可以遍历应用程序的线程列表，找到这些死线程并杀死它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:37:37.147

你根本无法做到这一点。如果你需要这种行为，你应该使用进程，而不是线程。

教科书的答案是这样的：在这些线程运行的代码的配合下，你可以随心所欲地做到这一点。没有他们的合作，这将永远不会安全或可靠。

通过将库包装在服务进程中来修复库或将库与代码隔离。如果一个线程发生故障或卡住，它的进程上下文就被污染了。

# c# - YoutubeRequest 实例化的空引用异常

> ID：10424598
> 
> 赞同：1
> 
> 时间：2012-05-03T03:14:38.440
> 
> 标签：c#, youtube, gdata

我正在运行 ac# web 应用程序，其中包括将视频上传到 youtube 的功能。我正在使用 .NET 的 gdata 库。但是，当我在上传视频代码中点击这一行时（在生成我的认证请求的函数中）

```
YouTubeRequest req = new YouTubeRequest(sett); 
```

我得到一个空引用异常，创建我的请求的完整函数如下：

```
public YouTubeRequest getReq()
{
        YouTubeRequestSettings sett = new YouTubeRequestSettings("Video-Postcard", devKey, consumerKey, consumerSecret, token, tokenSecret, "default", "video-postcard.com");
        YouTubeRequest req = new YouTubeRequest(sett);
        AsymmetricAlgorithm pk = getRsaKey();
        GAuthSubRequestFactory facto = new GAuthSubRequestFactory("youtube", "Video-Postcard");
        facto.PrivateKey = pk;
        facto.Token = token;
        req.Service.RequestFactory = (IGDataRequestFactory)facto;
        ((GDataRequestFactory)req.Service.RequestFactory).KeepAlive = false;
        ((GDataRequestFactory)req.Service.RequestFactory).Timeout = 360000;
        return req;
} 
```

我使用同一段代码为我的应用程序中搜索 youtube 的不同部分生成请求，但是当我上传视频时，我得到了异常。我已经搞砸了 2 天了，没有任何变化，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T18:52:12.433

实例化对象时`devKey`, `consumerKey`, `consumerSecret`,`token`和`tokenSecret`所有非 null吗？`YouTubeRequestSettings`

# android - Android WebView：从不重新加载

> ID：10424604
> 
> 赞同：1
> 
> 时间：2012-05-03T03:15:53.097
> 
> 标签：android, webview, android-webview, reload

我看到我的 WebView 在许多不同的情况下被重新加载：改变方向后，关闭/打开等。

有没有一种简单的方法可以完全停止重新加载 WebView？这有点奇怪，当一个组件自己做这么重要的事情时，而不是抛出 NeedReload 事件或其他东西。

问候，

**更新**

要击败关闭屏幕以及方向处理，请执行以下操作：

1.  在 Application.onCreate() 中创建视图。
2.  在 Activity.onCreate() 中将视图添加到布局中。
3.  在 Activity.onDestroy() 中从布局中移除视图。

详细信息在这里：[附加/分离Android视图到/从布局](https://stackoverflow.com/questions/10505346/attach-detach-android-view-to-from-layout)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:17:12.483

Webview 内容将根据您调用 loadurl 的位置进行加载。例如：如果您在 onCreate() 中编写了 loadurl 函数，那么该函数将在方向更改时执行。您可以在清单文件中限制它们`android:configChanges="orientation|keyboardHidden"`。所以一定要在哪里调用你的加载 url 函数并查看[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html)

# r - 根据特定因素组合对行求和

> ID：10424608
> 
> 赞同：11
> 
> 时间：2012-05-03T03:16:31.603
> 
> 标签：r, plyr, data.table

这可能是一个愚蠢的问题，但我已经阅读了 Crawley 关于数据帧的章节并搜索了互联网，但还没有能够使任何工作。

这是一个类似于我的示例数据集：

```
> data<-data.frame(site=c("A","A","A","A","B","B"), plant=c("buttercup","buttercup",
"buttercup","rose","buttercup","rose"), treatment=c(1,1,2,1,1,1), 
plant_numb=c(1,1,2,1,1,2), fruits=c(1,2,1,4,3,2),seeds=c(45,67,32,43,13,25))
> data
  site     plant treatment plant_numb fruits seeds
1    A buttercup         1          1      1    45
2    A buttercup         1          1      2    67
3    A buttercup         2          2      1    32
4    A      rose         1          1      4    43
5    B buttercup         1          1      3    13
6    B      rose         1          2      2    25 
```

我想做的是创建一个场景，只要存在独特的站点、植物和处理以及植物编号组合，就可以将“种子”和“果实”相加。理想情况下，这会导致行数减少，但会保留原始列（即我需要上面的示例看起来像这样：）

```
 site     plant treatment plant_numb fruits seeds
1    A buttercup         1          1      3   112
2    A buttercup         2          2      1    32
3    A      rose         1          1      4    43
4    B buttercup         1          1      3    13
5    B      rose         1          2      2    25 
```

这个例子非常基础（我的数据集约为 5000 行），虽然在这里您只看到需要求和的两行，但需要求和的行数各不相同，范围从 1 到 ~45。

到目前为止，我已经尝试了 rowsum() 和 tapply() 的结果非常糟糕（错误告诉我这些函数对因子没有意义），所以如果你能指出我正确的方向，我将不胜感激！

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T03:45:20.920

希望下面的代码是不言自明的。它使用基本功能“聚合”，基本上这就是说对于站点、植物、处理和植物编号的每个独特组合，查看水果的总和和种子的总和。

```
# Load your data
data <- data.frame(site=c("A","A","A","A","B","B"), plant=c("buttercup","buttercup",
"buttercup","rose","buttercup","rose"), treatment=c(1,1,2,1,1,1), 
plant_numb=c(1,1,2,1,1,2), fruits=c(1,2,1,4,3,2),seeds=c(45,67,32,43,13,25)) 

# Summarize your data
aggregate(cbind(fruits, seeds) ~ 
      site + plant + treatment + plant_numb, 
      sum, 
      data = data)
#  site     plant treatment plant_numb fruits seeds
#1    A buttercup         1          1      3   112
#2    B buttercup         1          1      3    13
#3    A      rose         1          1      4    43
#4    B      rose         1          2      2    25
#5    A buttercup         2          2      1    32 
```

行的顺序发生了变化（并按站点、植物等排序），但希望这不是太大的问题。

另一种方法是使用 plyr 包中的 ddply 。

```
library(plyr)
ddply(data, .(site, plant, treatment, plant_numb), 
      summarize, 
      fruits = sum(fruits), 
      seeds = sum(seeds))
#  site     plant treatment plant_numb fruits seeds
#1    A buttercup         1          1      3   112
#2    A buttercup         2          2      1    32
#3    A      rose         1          1      4    43
#4    B buttercup         1          1      3    13
#5    B      rose         1          2      2    25 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T04:33:39.350

为了完整起见，这是`data.table`@Chase建议的解决方案。对于较大的数据集，这可能是最快的方法：

```
library(data.table)
data.dt <- data.table(data)
setkey(data.dt, site)
data.dt[, lapply(.SD, sum), by = list(site, plant, treatment, plant_numb)]

     site     plant treatment plant_numb fruits seeds
[1,]    A buttercup         1          1      3   112
[2,]    A buttercup         2          2      1    32
[3,]    A      rose         1          1      4    43
[4,]    B buttercup         1          1      3    13
[5,]    B      rose         1          2      2    25 
```

该`lapply(.SD, sum)`部分总结了不属于分组集的所有列（即不在`by`函数中的列）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-11T23:24:45.530

只是为了在很长一段时间后更新这个答案，`dplyr`/`tidyverse`解决方案将是

```
library(tidyverse)

data %>% 
  group_by(site, plant, treatment, plant_numb) %>% 
  summarise(fruits=sum(fruits), seeds=sum(seeds)) 
```

# asp.net-mvc - 如何在 Razor 中使用 html 助手而不关闭包含的 标签

> ID：10424609
> 
> 赞同：2
> 
> 时间：2012-05-03T03:16:35.967
> 
> 标签：asp.net-mvc, razor

我正在使用以下帮助程序来帮助我生成链接：

```
@helper BuildLink(string name, string action, string controller)
    {
    var url = Url.Action(action, controller);
    bool isActive = Request.Url.AbsolutePath.Equals(url, StringComparison.InvariantCultureIgnoreCase);
    <li class="@(isActive ? "current" : String.Empty)"><a href="@(url)">@name</a></li>
} 
```

它工作得很好。问题是，我需要在文档的不同位置关闭“li”标签。如果我删除助手的“关闭 li”部分，当我尝试查看视图时会收到一条错误消息：

解析器错误消息：帮助程序块缺少结束“}”字符。确保此块中的所有“{”字符都有一个匹配的“}”字符，并且没有一个“}”字符被解释为标记。

有没有办法不必包含这个结束的“li”标签？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T03:22:32.820

如果你在任何标签之前放置一个@:。它避免了剃须刀的结束标签验证，例如

```
@:<li> 
```

# stream - 是否有来自 Facebook Live Stream 社交插件的评论存档？

> ID：10424610
> 
> 赞同：1
> 
> 时间：2012-05-03T03:16:44.530
> 
> 标签：stream, widget, live, facebook-social-plugins

我想知道应用管理员是否可以从[Live Stream](http://developers.facebook.com/docs/reference/plugins/live-stream)获取评论存档。

我们希望能够查看评论以为我们的客户准备报告。

我进行了一些搜索，但这似乎不存在，但不确定是否有可能提供此功能的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:38:39.533

不可以，评论插件的评论可以通过API获取，但不能通过直播插件获取

# c++ - 异常退出失败，C++ 调用 python 脚本

> ID：10424612
> 
> 赞同：0
> 
> 时间：2012-05-03T03:16:46.470
> 
> 标签：c++, python

当我的 exe 在 python 脚本完成后退出时，我得到一个指向**crt0dat.c** ![在此处输入图像描述](../Images/9ffec4214d0987c29c37a2d878f82e9a.png)的错误点这样 的调用堆栈...... ![在此处输入图像描述](../Images/e6921c61b651b0f5013e85d66d16b4e5.png) 我的 c++ 代码或 python 代码中是否有错误？

像这样的C++代码：

```
void PythonCall::call(std::vector<double>& s,std::vector<double>& b,std::vector<double>& t,std::vector<double>& y)
{

    PyObject* args = PyTuple_New(2);
    PyObject* tPyList = convert2PythonList(t);
    PyObject* yPyList = convert2PythonList(y);
    PyTuple_SetItem(args,0,tPyList);
    PyTuple_SetItem(args,1,yPyList);

    PyObject* r = PyObject_CallObject(func,args);

    PyObject* item;

    PyObject* iter = PyObject_GetIter(r);
    /*{
    PyObject *errtype, *errvalue, *traceback;
    PyErr_Fetch(&errtype, &errvalue, &traceback);
    PyObject *s = PyObject_Str(errvalue);
    char *errstr = PyString_AsString(s);
    std::cout << "Python Error: " << errstr; 
    }*/

    item = PyIter_Next(iter);
    int i = 0;
    PyObject* iter2 = PyObject_GetIter(item);
    PyObject* item2;
    while (item2 = PyIter_Next(iter2))
    {
        s[i] = PyFloat_AsDouble(item2);
        Py_XDECREF(item2);
        i++;
    }
    Py_XDECREF(item);
    //Py_XDECREF(iter2);

    item = PyIter_Next(iter);
    i = 0;
    iter2 = PyObject_GetIter(item);
    while (item2 = PyIter_Next(iter2))
    {
        b[i] = PyFloat_AsDouble(item2);
        Py_XDECREF(item2);
        i++;
    }
    Py_XDECREF(item);
    //Py_XDECREF(iter2);

    //Py_XDECREF(iter);
    Py_XDECREF(args);
    Py_XDECREF(r);
    Py_XDECREF(item);
    Py_XDECREF(tPyList);
    Py_XDECREF(yPyList);
    //std::cout << "done" << std::endl;
} 
```

和python代码：

```
def get_slope_baseLine(tl,xl):
    slopes = get_slope2(tl,xl)
    baselines = get_leakTime(tl,slopes)
    return slopes,baselines 
```

对不起我的英语不好...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T05:10:51.377

显然，您打算遍历两个列表并减少其元素的引用计数，但您忘记重置`iter`，因此您不会遍历第二个列表。

```
PyObject* iter = PyObject_GetIter(r);

item = PyIter_Next(iter);
int i = 0;
PyObject* iter2 = PyObject_GetIter(item);
PyObject* item2;
while (item2 = PyIter_Next(iter2))
{
    s[i] = PyFloat_AsDouble(item2);
    Py_XDECREF(item2);
    i++;
}
Py_XDECREF(item);

// ! Here you probably intended another call to PyObject_GetIter
item = PyIter_Next(iter);
i = 0;
iter2 = PyObject_GetIter(item);
while (item2 = PyIter_Next(iter2))
{
    b[i] = PyFloat_AsDouble(item2);
    Py_XDECREF(item2);
    i++;
}
Py_XDECREF(item); 
```

然而，崩溃可能是由于其他原因（这取决于您正在使用的函数的记录行为）。

# ios - 添加和删 除接口类后 iPhone App 崩溃

> ID：10424613
> 
> 赞同：0
> 
> 时间：2012-05-03T03:16:55.487
> 
> 标签：ios, xcode, sigabrt

当我在开发我的应用程序时，我决定添加一个界面构建器文件（及其类）。在给我问题之后，我决定最好摆脱它并以编程方式对界面进行编程。这样做并将应用程序恢复到原来的样子后，我的应用程序在启动时崩溃了。我得到的错误是在线程 1 中的这个位置：

```
libsystem_kernel.dylib`__pthread_kill: 
```

我在这段代码片段的第三行得到了一个 SIGABRT：

```
0x34333324:  mov    r12, #328
0x34333328:  svc    #128
0x3433332c:  blo    0x34333344               ; __pthread_kill + 32
0x34333330:  ldr    r12, [pc, #4]
0x34333334:  ldr    r12, [pc, r12]
0x34333338:  b      0x34333340               ; __pthread_kill + 28
0x3433333c:  andeq  r5, r0, r0, ror #25
0x34333340:  bx     r12                      
0x34333344:  bx     lr 
```

请注意，该应用程序在 iphone 模拟器 5.1 上运行良好，所以我不太确定发生了什么。我感觉添加一个接口类然后删除它会导致这种情况，但我无法真正找到问题的根源。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:14:26.013

我只是重新启动了我的设备，它又开始工作了。我想问题不在我认为的代码或项目设置或属性列表中。

# sql - 将列表传递给 where 子句

> ID：10424625
> 
> 赞同：3
> 
> 时间：2012-05-03T03:18:42.963
> 
> 标签：sql, postgresql

我正在尝试从 SQL 导出到 .csv，如果我对其进行硬编码以接受一定数量的参数，它就可以工作。问题是，我希望允许用户请求任意数量的参数并将这些参数传递给 where 子句。代码应该使这一点更加清晰。

```
create temporary table bdates as

 select tt.date, tt.time, tt.location
 from birthdays as bd
 inner join days as d
   on (d.id = bd.birth_id)
 inner join total_time as tt
   on (bd.date = tt.date and
       bd.time = tt.time and
       d.day_of = tt.location)
 where tt.date in(:date1, :date2) --defined by user at command line
 order by...

\copy bdates to '.csv' 
```

所以我想我想做的是将一个列表传递给 where 子句，而不是显式的 :dates# 变量。例如，一个人可以使用参数“2012-01-04 12:00、2012-02-04 12:00、2012-03-04 12:00”运行脚本，或者只使用两个参数或一个参数。在三个的情况下，字符串将被解析为“2012-01-04 12:00”、“2012-02-04 12:00”、“2012-03-04 12:00”。

我试过 string_to_array()、unnest(regexp_matches(:dates, expression)) 和 regexp_split_to_table(:dates, expression)，但我不确定如何进行连接。我尝试过的各种解决方案产生了许多错误，包括：

无法将类型文本 [] 转换为没有时区的时间戳

无法将类型记录转换为没有时区的时间戳

regexp_split 不支持全局选项

WHERE 的参数不能返回一个集合

最后一个尤其​​令人沮丧，我很茫然，希望有任何意见。有一种更简单的方法可以做到这一点，不是吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T05:16:11.813

试试这个：

```
create table x(d timestamp);

insert into x values
('jan 2, 2012'),
('february 4, 2012 12:00'),
('jan 4, 2012 12:00'),
('march 1, 2012'),
('may 3, 2012'); 
```

询问：

```
with input as
(
  select 
  '2012-1-2, 2012-01-04 12:00, 2012-02-04 12:00, 2012-03-04 12:00'::text
  as d_input
)
,converted_to_array as
(
  select ('{' || d_input || '}')::timestamp[] as d_array
  from input 
)
select d
from x cross join converted_to_array
where d = any(d_array) 
```

输出：

```
D
January, 02 2012 00:00:00-0800
February, 04 2012 12:00:00-0800
January, 04 2012 12:00:00-0800 
```

现场测试：[http ://www.sqlfiddle.com/#!1/43d48/26](http://www.sqlfiddle.com/#!1/43d48/26)

* * *

您也可以使用 IN，只是将数组取消嵌套到行：

```
with input as
(
  select 
  '2012-1-2, 2012-01-04 12:00, 2012-02-04 12:00, 2012-03-04 12:00'::text
  as d_input
)
,converted_to_array as
(
  select ('{' || d_input || '}')::timestamp[] as d_array
  from input 
)
select d
from x cross join converted_to_array
where d in (select unnest(d_array)) 
```

现场测试：[http ://www.sqlfiddle.com/#!1/43d48/29](http://www.sqlfiddle.com/#!1/43d48/29)

* * *

您也可以将它们全部放在一行中：

```
select d
from x 
where d in (select unnest( ('{' || '2012-1-2, 2012-01-04 12:00, 2012-02-04 12:00, 2012-03-04 12:00'::text || '}')::timestamp[] )) 
```

但我对此犹豫不决，因为它会在stackoverflow上导致水平滚动条:-)

现场测试：[http ://www.sqlfiddle.com/#!1/43d48/31](http://www.sqlfiddle.com/#!1/43d48/31)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:45:34.517

你几乎有最简单和最快的方法：

测试表：

```
CREATE TEMP TABLE t(d date);
INSERT INTO t VALUES
 ('2012-1-1')
,('2012-1-4')
,('2012-2-2')
,('2012-2-4')
,('2012-3-3')
,('2012-3-4'); 
```

当您过滤日期而不是时间戳时，您可以简化示例输入：

```
'2012-01-04 12:00, 2012-02-04 12:00, 2012-03-04 12:00' 
```

到：

```
'2012-01-04, 2012-02-04, 2012-03-04' 
```

查询（使用任一输入）：

```
SELECT t.*
FROM   t
JOIN  (SELECT unnest(string_to_array(
                    '2012-01-04, 2012-02-04, 2012-03-04', ', ')::date[]) AS d
    ) x USING (d) 
```

也可以通过以下方式完成：

```
 SELECT regexp_split_to_table(
                       '2012-01-04, 2012-02-04, 2012-03-04', ', ')::date AS d 
```

但是`regexp_split_to_table()`比较慢。
通常， a`JOIN`比相对较慢的 选择行更快`IN()`。

# php - jQuery Autocomplete - 当从列表中选择一个项目时，将其存储在 php 变量中

> ID：10424626
> 
> 赞同：1
> 
> 时间：2012-05-03T03:18:52.873
> 
> 标签：php, jquery, autocomplete

一旦有人从自动完成选项列表中选择了一个项目，我如何将该项目的 id 存储为要在其他 php 脚本中使用的变量？

当前的 PHP 脚本：

```
$rs = mysql_query('select label, id from table where label like     "'. mysql_real_escape_string($_REQUEST['term']) .'%" order by label asc limit 0,10', $dblink);

$data = array();
if ( $rs && mysql_num_rows($rs) )
{
    while( $row = mysql_fetch_array($rs, MYSQL_ASSOC) )
    {
        $data[] = array(
            'label' => $row['label'] ,
            'value' => $row['id']
        );
    }
}

echo json_encode($data);
flush(); 
```

我的目标是使用 id 变量作为表名的占位符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:25:52.843

嗯？PHP 运行在服务器上，JavaScript/jQuery 运行在客户端。您不能直接从 JavaScript 设置任何 php 变量。

但是，如果您对服务器进行 AJAX 调用并将所选项目 ID 作为参数包含在内，则服务器可以记录所选 ID（例如，作为当前用户会话的一部分）并在后续请求中引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T11:46:07.993

用于获取自动完成值 ID 的脚本

* * *

```
<script type="text/javascript">

            $(function() {

            $('#location').val("");

            $("#location").autocomplete({
                source: "getLocation.php",
                minLength: 1,
                select: function(event, ui) {
                    $('#locationid').val(ui.item.id);

                }
            });

        });

</script> 
```

## 在隐藏中传递 ID

```
<form action="" method="post" name="addvendor" id="addvendor">
<label>Location:</label>
                        <input type="text" name="location" id="location" /><span id="locationInfo"></span>
                        <input type="hidden" name="locationid" id="locationid" />
</form> 
```

获取用于获取位置和 ID 值的页面

* * *

```
<?php
include('../config/config.php');

$return_arr = array();

/* If connection to database, run sql statement. */

    $fetch = mysql_query("SELECT location_id,location_name FROM location where location_name like '" . mysql_real_escape_string($_GET['term']) . "%'");

    /* Retrieve and store in array the results of the query.*/
    while ($row = mysql_fetch_array($fetch, MYSQL_ASSOC)) {
        $row_array['id'] = $row['location_id'];
        $row_array['value'] = $row['location_name'];
        //$row_array['abbrev'] = $row['country_id'];

        array_push($return_arr,$row_array);
    }

echo json_encode($return_arr);
?> 
```

注意：包含样式的 js 文件 bootstrap.min.js

* * *

```
<link rel="stylesheet" href="http://www.jensbits.com/demos/bootstrap/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/redmond/jquery-ui.css"> 
```

有关更多信息，请使用链接 [http://www.jensbits.com/demos/autocomplete/](http://www.jensbits.com/demos/autocomplete/)

# sql - SQL查询无效的列名

> ID：10424628
> 
> 赞同：0
> 
> 时间：2012-05-03T03:19:16.467
> 
> 标签：sql, sql-server, stored-procedures

我有以下查询

```
DECLARE @category VARCHAR(50) = 'monitor,LCD,Desktop' 
DECLARE @sql nvarchar(4000)

IF @category IS NOT NULL 
BEGIN
SELECT @sql = 'SELECT *, 
CASE 
    WHEN Aging > 90 THEN ''> 90'' 
    ELSE
        CASE 
            WHEN Aging > 60 THEN ''61-90''
            ELSE 
                CASE 
                    WHEN Aging > 30 THEN ''31-60''
                    ELSE ''<=30''
                END
        END
END AS AgingCat, Pct*100 AS Percentage FROM dbo.vwPartnerProductAging

where category IN ('+@category+') 
ORDER BY PartnerName, Category, [Description]'

END

exec sp_executesql @sql, N'@category VARCHAR(50) ', @category 
```

我想按具有值的类别显示来自以下查询的数据：显示器、LCD 和桌面。我在“WHERE blablabla”中解决问题

我有两个条件我试过。

**第一个条件**：

从我用值声明@category 时显示的代码中显示它的错误

“无效的列名监视器”

“无效的列名 LCD”

“无效的列名桌面”

**第二个条件**：

我为

```
where category IN ('''+@category+''') 
```

如果我只添加一个值，它就可以工作，但是如果我声明 @category 有多个值，它不会显示任何内容但没有错误

* * *

如果我将值直接放在“WHERE blablabla”上，它就可以正常工作。

**工作条件**：

```
DECLARE @category VARCHAR(50) = 'monitor,LCD,Desktop' 
DECLARE @sql nvarchar(4000)

IF @category IS NOT NULL 
BEGIN
SELECT @sql = 'SELECT *, 
CASE 
    WHEN Aging > 90 THEN ''> 90'' 
    ELSE
        CASE 
            WHEN Aging > 60 THEN ''61-90''
            ELSE 
                CASE 
                    WHEN Aging > 30 THEN ''31-60''
                    ELSE ''<=30''
                END
        END
END AS AgingCat, Pct*100 AS Percentage FROM dbo.vwPartnerProductAging

where category IN (''Monitor'',''LCD'',''Desktop'') 
ORDER BY PartnerName, Category, [Description]'

END

exec sp_executesql @sql, N'@category VARCHAR(50) ', @category 
```

我想改变：

```
where category IN (''Monitor'',''LCD'',''Desktop'') 
```

至：

```
where category IN ( ' + @category + ' ) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:01:00.800

谢谢@st mnmn，但我已经解决了这个问题

我正在使用用分隔符“，”分割字符串的函数

所以@category 的输入必须有带分隔符“,”的值

示例输入

```
@category= 'LCD,Monitor,Desktop' 
```

**我使用的功能**：

```
FUNCTION [dbo].[Split] (@sep char(1), @s varchar(2000))
RETURNS table
AS
RETURN (
WITH Pieces(pn, start, stop) AS (
  SELECT 1, 1, CHARINDEX(@sep, @s)
  UNION ALL
  SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)
  FROM Pieces
  WHERE stop > 0
)
SELECT pn,
  SUBSTRING(@s, start, CASE WHEN stop > 0 THEN stop-start ELSE 512 END) AS split
FROM Pieces 
```

)

在我的商店程序中：

...... where Category IN (select split from dbo.Split('','',@category))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:56:16.830

你必须改变你的@category变量：

```
DECLARE @category VARCHAR(50) = 'monitor,LCD,Desktop' 
```

至：

```
DECLARE @category VARCHAR(50) = '''monitor'',''LCD'',''Desktop''' 
```

然后当您在@sql 中使用@category 时，它也会对您有用：

```
where category IN ('+@category+') 
```

# c++ - 如何对 C++ 数组进行值初始化？

> ID：10424630
> 
> 赞同：0
> 
> 时间：2012-05-03T03:19:25.467
> 
> 标签：c++, default, initializer

1) 在 C++ 中，提供初始化列表`{}`是否与`{0}`？将声明：

`int x[10]={};`

`int x[10]={0};`

两者都产生相同的数组，所有元素都初始化为 0？

2) 在`NULL`不是 0 的系统/编译器上，指针数组的默认值初始化是否将元素设置为 NULL 或 0？以下哪个陈述应该/可以使用？

`int *x[10]={NULL};`

`int *x[10]={0};`

`int *x[10]={};`

使用空括号的值初始化器怎么样`new`——它们是使用 NULL 还是 0 作为初始化器？

`int **x=new int*[10]();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:28:49.210

1.  是的。这两个初始化器在功能上是等效的。不同之处在于，第二个将第一个元素显式初始化为 0，并隐式对数组中的所有剩余元素进行值初始化（在 的情况下`int`，意味着将它们设置为 0）。

2.  `NULL`在`0`所有符合 C++ 标准的编译器上。在这种情况下，所有三个在功能方面都是相同的。`NULL`是一个扩展为 的宏`0`，因此前两个在编译器眼中是相同的。我不确定 C++11 会发生什么，但指针的值初始化意味着将该指针设置为`NULL`.

# html - 使用 Node、Express 和 EJS 压缩 HTML？

> ID：10424631
> 
> 赞同：5
> 
> 时间：2012-05-03T03:19:26.617
> 
> 标签：html, node.js, express, ejs

我将 EJS 与 Node 和 Express 一起使用。我的视图生成的 HTML 很大并且充满了不必要的空白。我可以在生产中使用压缩 HTML 的选项或中间件吗？

例如，

```
<!doctype html>
<html><head><title>...</title>....</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:37:45.590

你的模板引擎应该有一个你传递给它的标志来压缩它，我知道 Jade 默认会这样做（我没有使用 EJS）。

但是我不会为删除空格而烦恼，而是使用 gzip 库来压缩响应，[gzippo 之](https://github.com/tomgco/gzippo)类的东西就是你所追求的。

# php - PHP html 和 php 集成（抱歉标题含糊）

> ID：10424640
> 
> 赞同：0
> 
> 时间：2012-05-03T03:21:09.337
> 
> 标签：php, html, file-io

我正在使用 php 创建另一个 .php 文件。我是这样设计的：

```
$file = fopen($Title . ".php" ,"w") or die("File Creation error: " . mysql_error());
$textToWrite =
"
<html>\n
<head>\n
&lt;?php include("Header.php") ?&gt;
</head>\n
//Body of the webpage
</html>\n
";
$textToWrite = htmlspecialchars($textToWrite);

fwrite($file, $textToWrite);
fclose($file); 
```

其中 $Title 是一个非空变量。

我发现这`htmlspecialchars`与我想要的完全相反。而不是将 > 和 < 转换为 > 和 < 而是相反。还有其他选择吗，因为直接放置 thr`<?php`会给我一个 php 错误。谢谢你。

一世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:27:13.867

您是否尝试过使用 html_entity_decode()？

[http://ch2.php.net/manual/en/function.html-entity-decode.php](http://ch2.php.net/manual/en/function.html-entity-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:28:53.077

Heredocs 和 nowdocs 让您使用 PHP 标记作为字符串数据：[http ://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
<? //PHP 5.4+
\file_put_contents(
    "$Title.php",
    <<<"content"
<html>
<head>
<? include("Header.php"); ?>
//Body of webpage
</html> 
content
);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:28:25.930

尝试使用：

```
$textToWrite =
  "<html>
    <head>
      <" . "?php include("Header.php") ?" . ">
    </head>
    Body of the webpage
  </html>"; 
```

# php - 文件夹作为PHP中的参数

> ID：10424644
> 
> 赞同：3
> 
> 时间：2012-05-03T03:21:19.917
> 
> 标签：php

我想创建一个脚本，将网站中请求的每个文件夹作为参数传递。

例如，如果有人要求：

```
www.example.com/foo 
```

...这将被重定向到主 index.php 并作为参数传递，在请求时得到相同的结果`www.example.com/index.php?foo`

请注意，请求的文件夹将是随机的，所以我无法预测文件夹并将 php 脚本放在那里。

我应该通过 HTACCESS 处理所有 404 请求吗？**还是有更好的解决方案？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T03:32:54.653

In your url `foo` is a parameter key, if you mean to have it like that then what value would it have?

Perhaps your confusing it with a routing structure where you pass the entire url to a routing script that handles the request

The rewrite your looking for is this:

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA] 
```

Then in your index you split the url like this:

```
<?php 
$parts = isset($_GET['route']) ? explode('/',$_GET['route']) : array();
?> 
```

Then an example URL would look like: `www.example.com/foo/bar/baz`

```
$parts[0] = foo
$parts[1] = bar
$parts[2] = baz 
```

then if your looking for a folders/files existence, something like this:

```
<?php 
if (isset($parts[0]) && file_exists('./'.basename($parts[0]))) {
    //Folder or file exists
} else {
    //Folder or file does not exist - 404
}
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T03:31:44.057

I think using htaccess is a solution.

```
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

That one will rewrite url not followed by index.php, images or robots.txt to /index.php?{DIR OR VARS}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:23:59.193

您需要的是**url rewrite**。网络上有很多关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T03:24:16.510

我假设您使用的是 Apache。

听起来您真正需要的是 RewriteRule，请在此处查看 mod_rewrite：[http ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T03:26:09.667

您正在寻找的称为“[路由](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)”，其中 url 的“文件夹”被转换为称为“段”的参数。

`index.php`据我所知，您需要一个“入口点，通常是”解析其余路径的顶层。

```
http://example.com/index.php/foo/bar/baz
                      ^----entry point 
```

`index.php`可以通过服务器重写规则删除该部分，留下您

```
http://example.com/foo/bar/baz 
```

这是一种更“可扩展”的方式，因为您只会在 PHP 中编辑“url 解析器”逻辑（通常作为 include in 加载`index.php`），而不是编辑`.htaccess`或服务器的 url 重写文件。这使您可以更好地控制路由，尤其是在不允许编辑服务器配置文件的托管站点中。

# makefile - 如何在 Makefile 中将带引号的字符串转换为普通字符串？

> ID：10424645
> 
> 赞同：9
> 
> 时间：2012-05-03T03:21:23.270
> 
> 标签：makefile

我不确定我是否正确描述了这个问题，但目前我正在通过以下方式解决这个问题

```
QUOTEDSTR := "hello world"
NORMALSTR := $(shell echo $(QUOTEDSTR)) 
```

有没有更内置的方式可以让“make”在不调用 shell 的情况下做到这一点？谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T15:41:12.003

另外的选择：

```
NORMALSTR := $(patsubst "%",%,$(QUOTEDSTR)) 
```

Beta 的答案将删除字符串中的每个引号。上述解决方案只会删除出现在开头和结尾的引号。例如：

```
QUOTEDSTR := -DTITLE=\"Title\" 
```

Beta 的答案将产生一个值，`-DTITLE=\Title\`而使用 patsubst 解决方案时，该值不会改变。

这取决于你想要什么。

***编辑***

如果您想根据@stefanct 的评论处理空格并且仍然只匹配变量开头/结尾的引号，您将不得不玩一些技巧。首先，您需要找到一个您知道永远不会出现在您的字符串中的非空白字符。让我们选择`^`，但如果你愿意，你可以选择其他东西。

算法是：将所有空格转换为该字符，然后从生成的单个“单词”中删除引号，然后将该字符的所有实例转换回空格，如下所示：

```
# Get a variable S that contains a single space
E :=
S := $E $E

NORMALSTR := $(subst ^,$S,$(patsubst "%",%,$(subst $S,^,$(QUOTEDSTR)))) 
```

当然还有一些并发症；例如，这仅处理空格，而不处理其他空白字符，例如 TAB。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T12:01:34.717

这应该这样做：

```
NORMALSTR := $(subst $\",,$(QUOTEDSTR)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-05T17:15:15.837

所有答案都有问题。`patsubst`“[f]inds 空格分隔的单词”所以@MadScientist 的简单解决方案不适用于像`"hello world"`. 另一方面，@Beta 的一个删除所有引号字符，无论它们在哪里。

下面的代码也展示了如何处理带有空格的字符串。但是，它也会删除单词边缘的其他引号字符，例如`"hello "world"3"`将转换为`hello world"3`. 如果那更好...我不知道，可能不是。

与其他解决方案不同，此解决方案创建了一个名为的用户函数`unquote`，而不是直接替换字符串。

```
quoted="hello world"

unquote = $(patsubst "%,%,$(patsubst %",%,$(1)))
#unquote = $(subst $\",,$(1))
#unquote = $(patsubst "%",%,$(1))
#unquote = $(shell echo $(1))

unquoted = $(call unquote,$(quoted))

$(info Variable quoted is $(quoted))
$(info Variable unquoted is $(unquoted)) 
```

这只是在每个（空格分隔）单词的开头和结尾查找所有引号字符并将其删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-01T07:39:26.877

```
NORMALSTR := $(subst $\",,$(QUOTEDSTR)) 
```

等于

```
NORMALSTR := $(subst ",,$(QUOTEDSTR)) 
```

因为你没有定义 $\ 变量，所以它是空字符串

`$\"`避免在编辑器中出现语法高亮问题。

`",,$(QUOTEDSTR))`将被编辑器识别为字符串，直到找到另一个`"`.

# iphone - UITableView :: 实例化的Bugs（里面有详细说明）

> ID：10424648
> 
> 赞同：0
> 
> 时间：2012-05-03T03:21:58.707
> 
> 标签：iphone, ios, ipad

我正在尝试缩小我在 iOS 应用程序中使用 2 个单独的 UITableView 实例时遇到的问题。也许我在 UITableViews 上设置了一个错误的属性，或者它可能是其他东西，但这里是两者的症状，尽我所能确定。

当第一次创建表并加载数据时，会发生以下两个错误。但是，如果我随后拖动并释放（从而成功滚动表格，甚至一点点），两个错误都会立即消失。

*   我无法点击任何行（从不发送委托回调）
*   没有数据出现（好像表是空的）

同样，一旦我尝试在桌子上拖动，这两个错误都会立即消失。我还应该提到它们不会 100% 发生。我猜这可能意味着我缺少某种竞争条件。

这些表是 UITableView 的编程实例化子类（通过 initWithFrame:)。这是我在子类上重写的构造函数：

```
- (id) init
{
if((self = [super initWithFrame:CGRectMake(0, 0, POST_WIDTH, 0)]))
{
    self.scrollsToTop = YES;
    self.dataSource = self;
    self.delegate = self;
    self.rowHeight = POST_DEFAULT_HEIGHT;
    self.delaysContentTouches = YES;
    self.backgroundColor = [UIColor clearColor];
    self.separatorColor = [UIColor clearColor];   
    self.scrollIndicatorInsets = UIEdgeInsetsMake(0, 0, 0, 2);
    self.showsVerticalScrollIndicator = NO;
}
return self;
} 
```

**回顾一下**：上述 2 个错误中的零个、一个或两个在创建时随机出现在每个表中，但在稍微滚动表时就会消失。

感谢您的耐心，因为我很困惑:(

FWIW，它发生在运行 iOS5 的 iPhone 和 iPad 上，包括模拟器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:20:29.183

我假设您的问题是由于数据源和委托造成的。尝试为创建和使用 tableView 的类设置数据源和委托。

从您的子类中更改以下代码

```
self.dataSource = self;
self.delegate = self; 
```

像这样的超级班

```
 tableView.dataSource = self;
 tableView.delegate = self; 
```

# java - 来自类型的 Java Arraylist 提取到 JTextFied

> ID：10424651
> 
> 赞同：0
> 
> 时间：2012-05-03T03:22:25.887
> 
> 标签：java, arraylist, strongly-typed-dataset

我的联系人数据库中有以下代码，我需要学习如何将该数据提取到多个适当的 JTextField 以在 GUI 中显示。

```
ArrayList<Contact> contacts = new ArrayList<Contact>();
contacts.add(new Contact("Sally", "Smells", "2535551212", "ssmels@somedomain.edu")); 
```

这就是我的 Contact.class 的样子。

```
import java.util.Arrays;

class Contact implements Comparable<Contact>
{  

public Contact [] contacts;
public int contactNum;
public int currentContact;  
public String search;
public String firstName;
public String lastName;
public String phone;
public String eMail;

public Contact() 
{
    super();

}

public Contact(String firstName, String lastName, String eMail, String phone) 
{
    super();
    this.firstName = firstName;
    this.lastName = lastName;
    this.eMail = eMail;
    this.phone = phone;

}

@Override
public int compareTo(Contact o) {
    // TODO Auto-generated method stub
    return 0;
}

/**
 * @return the contacts
 */
public Contact[] getContacts() {
    return contacts;
}

/**
 * @param contacts the contacts to set
 */
public void setContacts(Contact[] contacts) {
    this.contacts = contacts;
}

/**
 * @return the contactNum
 */
public int getContactNum() {
    return contactNum;
}

/**
 * @param contactNum the contactNum to set
 */
public void setContactNum(int contactNum) {
    this.contactNum = contactNum;
}

/**
 * @return the currentContact
 */
public int getCurrentContact() {
    return currentContact;
}

/**
 * @param currentContact the currentContact to set
 */
public void setCurrentContact(int currentContact) {
    this.currentContact = currentContact;
}

/**
 * @return the search
 */
public String getSearch() {
    return search;
}

/**
 * @param search the search to set
 */
public void setSearch(String search) {
    this.search = search;
}

/**
 * @return the firstName
 */
public String getFirstName() {
    return firstName;
}

/**
 * @param firstName the firstName to set
 */
public void setFirstName(String firstName) {
    this.firstName = firstName;
}

/**
 * @return the lastName
 */
public String getLastName() {
    return lastName;
}

/**
 * @param lastName the lastName to set
 */
public void setLastName(String lastName) {
    this.lastName = lastName;
}

/**
 * @return the phone
 */
public String getPhone() {
    return phone;
}

/**
 * @param phone the phone to set
 */
public void setPhone(String phone) {
    this.phone = phone;
}

/**
 * @return the eMail
 */
public String geteMail() {
    return eMail;
}

/**
 * @param eMail the eMail to set
 */
public void seteMail(String eMail) {
    this.eMail = eMail;
}

/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return "Contact [contacts=" + Arrays.toString(contacts)
            + ", contactNum=" + contactNum + ", currentContact="
            + currentContact + ", search=" + search + ", firstName="
            + firstName + ", lastName=" + lastName + ", phone=" + phone
            + ", eMail=" + eMail + "]";
}

/* (non-Javadoc)
 * @see java.lang.Object#hashCode()
 */
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + contactNum;
    result = prime * result + Arrays.hashCode(contacts);
    result = prime * result + currentContact;
    result = prime * result + ((eMail == null) ? 0 : eMail.hashCode());
    result = prime * result
            + ((firstName == null) ? 0 : firstName.hashCode());
    result = prime * result
            + ((lastName == null) ? 0 : lastName.hashCode());
    result = prime * result + ((phone == null) ? 0 : phone.hashCode());
    result = prime * result + ((search == null) ? 0 : search.hashCode());
    return result;
}

/* (non-Javadoc)
 * @see java.lang.Object#equals(java.lang.Object)
 */
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (!(obj instanceof Contact))
        return false;
    Contact other = (Contact) obj;
    if (contactNum != other.contactNum)
        return false;
    if (!Arrays.equals(contacts, other.contacts))
        return false;
    if (currentContact != other.currentContact)
        return false;
    if (eMail == null) {
        if (other.eMail != null)
            return false;
    } else if (!eMail.equals(other.eMail))
        return false;
    if (firstName == null) {
        if (other.firstName != null)
            return false;
    } else if (!firstName.equals(other.firstName))
        return false;
    if (lastName == null) {
        if (other.lastName != null)
            return false;
    } else if (!lastName.equals(other.lastName))
        return false;
    if (phone == null) {
        if (other.phone != null)
            return false;
    } else if (!phone.equals(other.phone))
        return false;
    if (search == null) {
        if (other.search != null)
            return false;
    } else if (!search.equals(other.search))
        return false;
    return true;
}

} 
```

这是我的 TestContacts.Java

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.Scanner;

import javax.swing.ButtonGroup;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.border.EmptyBorder;

import com.sun.tools.javac.util.List;

public class TestContact extends JFrame 
{

private JTextField txtFldSearch;
private JTextField txtFld_FirstName;
private JTextField txtFld_LastName;
private JTextField txtFld_Phone;
private JTextField txtFld_eMail;
public enum searchBy { First, Last, Phone, eMail };

private JPanel contentPane;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            try {
                TestContact frame = new TestContact();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public TestContact() {
     ArrayList<Contact> contacts = new ArrayList<Contact>();

     contacts.add(new Contact("Sally", "Smells", "2535551212", "ssmels@anyschool.edu"));
     contacts.add(new Contact("Joe", "Smells", "2535551212", "jsmels@anyschool.edu"));
     contacts.add(new Contact("Ally", "Bally", "2535551212", "aball@anyschool.edu"));
     contacts.add(new Contact("Ah", "chu", "2535551212", "ahchu@anyschool.edu"));
     contacts.add(new Contact("Molly", "Mocks", "2535551212", "mmocks@anyschool.edu"));

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 393, 192);

    JMenuBar menuBar = new JMenuBar();
    setJMenuBar(menuBar);

    JMenu mnFile = new JMenu("File");
    menuBar.add(mnFile);

    JMenuItem mntmOpen = new JMenuItem("Open");
    mntmOpen.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {

            // open data here

        }
    });
    mnFile.add(mntmOpen);

    JMenuItem mntmSave = new JMenuItem("Save");
    mntmSave.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {

            // save data here
            System.out.println("prentent to save.\n\nSaving..........");

        }
    });
    mnFile.add(mntmSave);

    JMenuItem mntmExit = new JMenuItem("Exit");
    mntmExit.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            //file exit
            System.out.println("prentent to save.\n\nSaving..........");
            System.exit(0);
        }
    });
    mnFile.add(mntmExit);

    JLabel lblSearch = new JLabel("Search: ");
    menuBar.add(lblSearch);

    txtFldSearch = new JTextField();
    txtFldSearch.setToolTipText("Enter search criteria");
    menuBar.add(txtFldSearch);
    txtFldSearch.setColumns(10);

    JLabel lblBy = new JLabel("By: ");
    menuBar.add(lblBy);

    JComboBox ddlSearchBy = new JComboBox();

    ddlSearchBy.addItemListener(new ItemListener() {

        @Override
        public void itemStateChanged(ItemEvent arg0) {

            searchBy enumval = searchBy.valueOf(arg0.getItem().toString());
            switch (enumval.ordinal() + 1) {
            case 1:

                break;
            case 2:

                break;
            case 3:

                break;
            case 4:

                break;
            default:

                break;
            }
        }
    });

    ddlSearchBy.setToolTipText("Search by");
    ddlSearchBy.setModel(new DefaultComboBoxModel(new String[] {"First", "Last", "Phone", "eMail"}));
    menuBar.add(ddlSearchBy);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JLabel lblFirstName = new JLabel("First name: ");
    lblFirstName.setBounds(6, 20, 100, 16);
    contentPane.add(lblFirstName);

    JLabel lblLastName = new JLabel("Last name: ");
    lblLastName.setBounds(6, 48, 100, 16);
    contentPane.add(lblLastName);

    JLabel lblPhone = new JLabel("Phone: ");
    lblPhone.setBounds(6, 76, 100, 16);
    contentPane.add(lblPhone);

    JLabel lblEmail = new JLabel("eMail: ");
    lblEmail.setBounds(6, 104, 100, 16);
    contentPane.add(lblEmail);

    txtFld_FirstName = new JTextField();
    txtFld_FirstName.setToolTipText("First name");
    txtFld_FirstName.setBounds(77, 14, 185, 28);
    contentPane.add(txtFld_FirstName);
    txtFld_FirstName.setColumns(10);

    txtFld_LastName = new JTextField();
    txtFld_LastName.setToolTipText("Last name");
    txtFld_LastName.setBounds(77, 42, 185, 28);
    contentPane.add(txtFld_LastName);
    txtFld_LastName.setColumns(10);

    txtFld_Phone = new JTextField();
    txtFld_Phone.setToolTipText("Phone number");
    txtFld_Phone.setBounds(50, 70, 212, 28);
    contentPane.add(txtFld_Phone);
    txtFld_Phone.setColumns(10);

    txtFld_eMail = new JTextField();
    txtFld_eMail.setToolTipText("eMail address");
    txtFld_eMail.setBounds(50, 98, 212, 28);
    contentPane.add(txtFld_eMail);
    txtFld_eMail.setColumns(10);

    JButton jbtn_fwd = new JButton(">>");
    jbtn_fwd.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            // fwd index here

        }
    });
    jbtn_fwd.setBounds(274, 71, 117, 29);
    contentPane.add(jbtn_fwd);

    JButton jbtn_bak = new JButton("<<");
    jbtn_bak.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            // Back index here

        }
    });
    jbtn_bak.setBounds(274, 99, 117, 29);
    contentPane.add(jbtn_bak);

    JButton btnAdd = new JButton("Add");
    btnAdd.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) 
        {

            // add contact

        }
    });
    btnAdd.setBounds(274, 15, 117, 29);
    contentPane.add(btnAdd);

    JButton btnDel = new JButton("Del");
    btnDel.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) 
        {
            // delete contact
            contacts.remove(index);
        }
    });
    btnDel.setBounds(274, 43, 117, 29);
    contentPane.add(btnDel);

}

/**
 * @return the txtFldSearch
 */
public JTextField getTxtFldSearch() {
    return txtFldSearch;
}

/**
 * @param txtFldSearch the txtFldSearch to set
 */
public void setTxtFldSearch(JTextField txtFldSearch) {
    this.txtFldSearch = txtFldSearch;
}

/**
 * @return the txtFld_FirstName
 */
public JTextField getTxtFld_FirstName() {
    return txtFld_FirstName;
}

/**
 * @param txtFld_FirstName the txtFld_FirstName to set
 */
public void setTxtFld_FirstName(JTextField txtFld_FirstName) {
    this.txtFld_FirstName = txtFld_FirstName;
}

/**
 * @return the txtFld_LastName
 */
public JTextField getTxtFld_LastName() {
    return txtFld_LastName;
}

/**
 * @param txtFld_LastName the txtFld_LastName to set
 */
public void setTxtFld_LastName(JTextField txtFld_LastName) {
    this.txtFld_LastName = txtFld_LastName;
}

/**
 * @return the txtFld_Phone
 */
public JTextField getTxtFld_Phone() {
    return txtFld_Phone;
}

/**
 * @param txtFld_Phone the txtFld_Phone to set
 */
public void setTxtFld_Phone(JTextField txtFld_Phone) {
    this.txtFld_Phone = txtFld_Phone;
}

/**
 * @return the txtFld_eMail
 */
public JTextField getTxtFld_eMail() {
    return txtFld_eMail;
}

/**
 * @param txtFld_eMail the txtFld_eMail to set
 */
public void setTxtFld_eMail(JTextField txtFld_eMail) {
    this.txtFld_eMail = txtFld_eMail;
}

/**
 * @return the buttonGroup
 */
public ButtonGroup getButtonGroup() {
    return buttonGroup;
}

/**
 * @param buttonGroup the buttonGroup to set
 */
public void setButtonGroup(ButtonGroup buttonGroup) {
    this.buttonGroup = buttonGroup;
}

/**
 * @return the contentPane
 */
@Override
public JPanel getContentPane() {
    return contentPane;
}

/**
 * @param contentPane the contentPane to set
 */
public void setContentPane(JPanel contentPane) {
    this.contentPane = contentPane;
}

/* (non-Javadoc)
 * @see java.lang.Object#toString()
 */
@Override
public String toString() {
    return "TestContact [txtFldSearch=" + txtFldSearch
            + ", txtFld_FirstName=" + txtFld_FirstName
            + ", txtFld_LastName=" + txtFld_LastName + ", txtFld_Phone="
            + txtFld_Phone + ", txtFld_eMail=" + txtFld_eMail
            + ", buttonGroup=" + buttonGroup + ", contentPane="
            + contentPane + "]";
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:26:04.967

对于 type 的每个对象`Contact`，必须有一个访问器来访问所需数据类型的字段。例如，`getEmail()`可以提供电子邮件地址。在填充您的`JTextFields`.

# android - 制作一个relativeLayout，它是我的孩子，一个imageview就像一个按钮

> ID：10424654
> 
> 赞同：1
> 
> 时间：2012-05-03T03:22:46.033
> 
> 标签：android

您好我正在尝试完成以下布局。

我有两个RelativeLayout，每个都包含一个TextView 和一个ImageView。

imageView 向用户显示他选择的选择！！。这两张图片解释了我想要做的更多：

![ui的正常状态](../Images/2afe1a83ba60874632f364c5e91a7476.png)

这张图片显示了 ui 的正常状态，没有点击事件。当用户单击底部布局时，布局顶部的图像视图将设置为不可见，并且布局底部的图像视图向用户显示用户选择了第二个选项。我发现处理这个问题并不难（在相对布局上设置点击监听器并处理 imageview 的可见性）。

我面临的问题是如何使所有相对布局像一个按钮一样“当点击相对布局时它变成蓝色同时imageview变成白色！！

简而言之，我会说如何同步两个选择器！

![在此处输入图像描述](../Images/ce729a43f439a5df20cc96714cea7087.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:45:57.690

设置子视图的属性 android:duplicateParentState="true"

[重复父状态](http://developer.android.com/reference/android/view/View.html#attr_android%3aduplicateParentState)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:20:22.137

当你在RelativeLayout的onClick中使ImageView可见/不可见时，你是否尝试将RelativeLayout的bg颜色更改为蓝色/白色？

# java - 保存文件bean，出于某种原因，文件名中有额外的随机数？

> ID：10424657
> 
> 赞同：-2
> 
> 时间：2012-05-03T03:23:42.817
> 
> 标签：java, file-upload, stripes

generatedReference will = "abc" (例如) nameWithExt = "abc.txt"

但是保存到文件系统的文件最终会是：abc501883476493193605.txt

这些数字似乎是由 smoething 随机生成的？有人知道发生了什么吗？

```
File directory = new File(bc.getUploadDirectoryPath(dir)); //c:/temp
            String generatedReference = CreateUniqueFileReference();
            String nameWithExt = generatedReference + "." + GetExtensionOfFile(fb.getFileName());
            //File f = File.createTempFile(generatedReference, "." + GetExtensionOfFile(fb.getFileName()), directory);
            //File f = File.createTempFile("abc","myExt", directory); STILL GENERATED RANDOM NOS in file?
            fb.save(f);
            bc.getLogger().info("TrySaveFile: "+nameWithExt);

public static String CreateUniqueFileReference() {
        java.util.Date today = new java.util.Date();
        String d = new java.text.SimpleDateFormat("ddMMyyyyHHmmss").format(new java.sql.Timestamp(today.getTime()));
        Random r = new Random();
        String randomNum =  Integer.toString(r.nextInt(10000) + 0);
        return d + "_" + randomNum;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:35:12.877

The `CreateUniqueFileReference` generates those numbers. It's right there in the code.

Sorry, was wrong, but it looks like it's the output from File.createTempFile(), that typically generates a long string of numbers after the name to make it unique.

# jquery - JQuery Mobile 验证方法不起作用

> ID：10424662
> 
> 赞同：0
> 
> 时间：2012-05-03T03:24:36.037
> 
> 标签：jquery, validation, node.js, jquery-plugins, jquery-mobile

我在我的 jqm 项目中使用了 jquery validate 插件（[插件页面](http://docs.jquery.com/Plugins/Validation#Isn.27t_that_nice_and_easy.3F)）。我包含了插件文件并在 pageshow 上设置了验证。这是我的 script.js 文件：

```
$("body").delegate("div[data-role*='page']", "pageshow", function(){

$("#error").message({type:"error"});
$("#info").message();

$("#home").validate();

}); 
```

我在我的布局中包含了这个文件：

```
 script(type='text/javascript', src='/javascripts/jquery.validate.min.js')
    script(type='text/javascript', src='/javascripts/script.js') 
```

我将这些类添加到我的输入中

```
input.input.required.email(id='email',type='text',value='',placeholder='name@email.com',name='email') 
```

但它不起作用。有什么我想念的吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T18:52:36.857

jQuery Mobile 不支持验证插件。我花了一段时间才弄清楚这一点，但我不得不自己写。

# android - Activity 调用 BaseAdapter 为行中的每个项目设置 OnClick()

> ID：10424668
> 
> 赞同：0
> 
> 时间：2012-05-03T03:25:31.303
> 
> 标签：android, onclick, android-alertdialog, baseadapter

不显示太多代码：

我有一个`Activity`“A”。这通过 a`Activity`填充 a ，为每一行中的项目设置a 。`ListView``BaseAdapter``BaseAdapter``getView()``onClickListener()`

单击行的项目时，我想`AlertDialog`在“A”中显示一个。`Activity`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:52:34.413

我看不出你在哪里遇到问题。如果您`BaseAdapter`在 A 中有您的版本，`Activity`那么您可以简单地调用（在您在 的方法中`OnCLickListener`设置的该行的项目中）您在 A 中创建的私有方法：`getView``BaseAdapter``Activity`

```
private void showADialog(int position) {
        new AlertDialog.Builder(this)
                .setMessage("The clicked row is " + position)
                .setPositiveButton("Ok?",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }

                        }).show();
    } 
```

如果您的自定义与 A`BaseAdapter`不在同一个文件中，`Activity`那么您可以使用`Context`您传递给的`BaseAdapter`（如果您的适配器的代码是您上一个问题中的代码，如果不是，您应该在构造函数中传递它）。然后，您可以将其`Context`转换为您的活动并调用上一个方法`showADialog()`。此外，当您设置侦听器时，您应该将其`position`作为标签传递，以便您可以在其中检索它`OnCLickListener`（否则您可能会在视图 + 侦听器被回收时得到错误的位置）：

```
//...
item.setTag(new Integer(position)); // or if you use a ViewHolder: holder.item bla.....
item.setOnClickListener(new OnClickListener() {
   @Override
   public void onClick(View v) {
    Integer realPosition = (Integer) v.getTag();
    // Here show the dialog using one of the methods above.You either:        
    // showADialog(realPosition); // when the code for your custom BaseAdapter in in the same class as Activity A
    //((CallingAlertDialogBaseAdapter) context).showADialog(realPosition); // when the code for the custom BaseAdapter is in a separate file then Activity A
    //create directly an AlertDialog. For this you'll require a valid Context(from an  Activity(getApplicationCOntext() will NOT work). 
   //You have this context from the parameter that you pass in the constructor of your custom BaseAdapter(as you ussualy pass this in the Activity where you instantiate the adapter)
   }
});
//... 
```

# eclipse - 使用 Ivy 的 Eclipse Java 项目编译错误

> ID：10424672
> 
> 赞同：0
> 
> 时间：2012-05-03T03:25:57.130
> 
> 标签：eclipse, caching, ivy

我的 Java 项目在 Eclipse 中使用 Ivy.xml。更新一些代码后，我必须手动删除 ivy 缓存，或者重新启动 Eclipse 并解析 ivy.xml。否则，Eclipse 无法识别某些对象，并引发编译错误。有人知道原因吗？有什么方法可以避免手动清除常春藤缓存？

# python - Tastypie 将登录用户识别为 AnonymousUser

> ID：10424677
> 
> 赞同：1
> 
> 时间：2012-05-03T03:26:11.520
> 
> 标签：python, django, tastypie

我将我的 Django 应用程序部署到远程服务器上，但 sweetpie 无法识别远程服务器上的登录用户。

我有一个美味的资源，可以过滤属于当前登录用户的所有对象：

```
 def apply_authorization_limits(self, request, object_list):
    return object_list.filter(user=request.user) 
```

当我尝试在端点上为对象执行 GET 请求时，出现以下错误：

```
int() argument must be a string or a number, not 'AnonymousUser 
```

我猜是因为登录没有正常工作？

还是做到了？在模板页面上，我有以下代码：

```
{% if user.is_authenticated %}
  Logged in as <strong>{{ user.username }}</strong>
  <a href="/users/logout">Logout</a>
{% else %}
  <a href="/users/signup">Signup</a>
  <a href="/users/login">Login</a>
{% endif %} 
```

并且代码正确显示了用户的用户名（这意味着用户已通过身份验证）。会发生什么？在我的本地服务器上，我能够成功地向tastypie API 发出所有HTTP 请求，并且我不被称为AnonymousUser，但在我的远程服务器上，我被称为AnonymousUser to Tastypie

编辑：当我在任何视图中有一个打印语句打印出 request.user 时，我得到了正确的登录用户。当我在我的 Tastypie api.py 中有一个打印出 request.user 的语句时，我就被称为 AnonymousUser。为什么我会被 Tastypie 称为 AnonymousUser 而不是应用程序的其余部分？

编辑：我正在使用以下身份验证：

```
authentication = Authentication() 
```

如果我将身份验证更改为 ApiKeyAuthentication，那么我必须将每个 GET/POST 请求上的用户名和 api 密钥发布到资源。这样做的问题是我必须创建一个新的中间视图来查询用户名和视图，然后对 Tastypie 端点执行 GET/POST。有没有另一种解决方案？第二种方法是将用户名和 apikey 嵌入到 webapp 中，让 JS 获取这些值并将它们添加到 GET/POST 查询字符串中，但这可能会导致安全问题。这将是一个安全问题，因为如果用户拥有用户名和 api 密钥，他们可以假装是另一个用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T03:43:43.950

第一：APIKeyAuth：就像另一个用户通过不安全的连接获取用户名和密码或会话 ID 一样，这是一个很大的问题。

第二：如果您想使用基于会话的身份验证（它仅适用于浏览器，适用于当前登录的用户）您需要创建自己的身份验证后端，详细信息请参见[http://django-tastypie.readthedocs .org/en/latest/authentication_authorization.html#implementing-your-own-authentication-authorization](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#implementing-your-own-authentication-authorization)

不过，从那里向上滚动一点，然后阅读有关您选择的身份验证方法的令人讨厌的警告。

# c++ - 指向类型的指针数组

> ID：10424678
> 
> 赞同：1
> 
> 时间：2012-05-03T03:26:12.527
> 
> 标签：c++, c, arrays, pointers, types

由于我的车坏了，我今天缺课了。类型的指针数组会类似于以下内容吗？

```
void *ary[10];
ary[0] = new int();
ary[1] = new float(); 
```

我仍然有点模糊它是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:39:05.973

如果这是`C`代码，有几点需要指出。首先（如下所述），`new`无效`C`。它在 中有效`C++`，但不能在 中以这种方式分配内存`C`。相反，您将需要使用`malloc()`来分配内存并`free()`代替 C++ 的`delete`（这些函数包含在 中`#include <stdlib.h>`）。

现在，回应您的评论。您似乎对指针的实际含义感到困惑。指针是*指向*内存中某个位置的东西。也就是说，指针在您的系统上属于某种类型（即，可能是一个`unsigned long`），它最终包含一些数字。这个数字是您分配的一些数据的内存位置（请注意，实际上由于虚拟内存，这些数字*并不*直接对应于物理 RAM 地址）。

因此，`C`当您执行以下操作时

```
char* x = (char*)malloc(sizeof(char)); 
```

您为单个`char`. from 的返回值`malloc()`是 a`void*`这就是我们将其转换为的原因，`char*`因为这就是我们想要使用此内存的原因。这是操作系统分配给您使用`void*`的您请求（通过调用）的内存的位置。`malloc()`为了实际使用此内存，您需要取消引用（即`*`运算符）内存位置。所以在我们分配了这个内存之后，我们可以尝试类似

```
*x = 'a'; 
```

现在内存位置的`x`值为`a`。在代码中，这可以表示为

```
if(*x == 'a')
  printf("True"); 
```

重要的是要注意，`sizeof(int*) == sizeof(char*)`即使`sizeof(int) != sizeof(char)`. 这是一个重要的区别。请注意第一个比较如何比较指针地址的大小，第二个比较如何比较数据结构的大小（或者，在这种情况下，类型基元）。这很重要的原因是它使您上面的代码能够实际工作。由于所有指针地址的大小相同，因此您可以创建一个数组`void*`并在其中存储您希望的任何指针类型，而不会覆盖缓冲区（即每个指针都很好地`array[i]`分别适合）。of 的强大之`void*`处在于您可以将任何东西作为 a 传递`void*`（是的，从技术上讲，您可以将任何东西转换为其他任何东西，但这有时很方便）。然而，最大的损失`void*`是你不能*直接*用它。也就是说，如果我有这样的代码：

```
void passData(void* data)
{
  char* x = (char*)data; // I _must_ do this to access the data
  printf("%s\n", x);
}

int main()
{
  char* x = (char*)malloc(10*sizeof(char));
  *x = "test";
  passData((void*)test);
  free(x);
  return 0;
} 
```

我必须知道我的数据类型才能使用`void*`（或者您必须使用元数据或类似的东西才能知道如何处理）。

现在我们对内存分配和指针的实际作用有了一些基础，我将解决您的评论。由于指针只是指向内存地址，如果您有两个指向*相同*内存地址的指针，那么您只需要访问相同数据的方法即可。例如，考虑下面的片段

```
#include <stdio.h>
int main()
{
  int x = 0; // Stack variable

  int* xPtr = &x; // & is the reference operator - it gives you the memory location of an object

  x = 5;

  printf("%d == %d\n", x, *xPtr); // xPtr == 5 since it points to the same memory location as x

  *xPtr = 10;

  printf("%d == %d\n", x, *xPtr); // x == 10 since we changed the value at the memory location of xPtr which is the same memory location which x is located at

  return 0;
} 
```

如果你还不太熟悉指针的概念，下面这个例子可能会更清楚一些，因为它纯粹是处理堆内存：

```
#include <stdio.h>
int main()
{
  int* xPtr = (int*)malloc(sizeof(int));
  int* yPtr = xPtr; // Point yPtr to the same address as xPtr

  *xPtr = 10; // The value of xPtr == 10 and so does the value of yPtr since they point to the same place
  *yPtr = 12; // In a similar way, we modified the value again for both pointers.

  yPtr = NULL; // Unset the memory location of yPtr - now yPtr no longer points to the same memory location as xPtr.
               // In fact, now yPtr == NULL, so do _NOT_ try to dereference it or you will crash. In any event, the values of the pointers are now independent

  *xPtr = 15; // Memory at the location xPtr points to has changed to 15\. But yPtr no longer points to that location, so the value at the location yPtr points to has not changed.

  yPtr = xPtr; // Change the memory location of yPtr to point to xPtr. Now yPtr's value is exactly the same as xPtr's value.

  free(xPtr); // Only free ONE of the items pointing to the same memory location (otherwise you will double free)
  return 0;
} 
```

如您所见，您只是在访问内存中特定位置的数据。指针只是指向内存中的那个位置。移动指针并使它们指向不同的位置称为`pointer manipulation`. 这就是为什么您可以在一个位置更改内存并更改指向该内存位置的任何其他指针的值的原因。

**原始回复**（最初标记的问题`C++`）

实际上，您所做的更多`C-style`。这在技术上是有效的（只要您进行了转换），但是稍后要对这些类型进行任何操作，您必须确切地知道*什么*类型在什么位置并适当地转换回来。

`void`在您给出的示例中，您创建了一个可以保存指针的数组。也就是说，`void*`几乎是任何“香草”类型（因为从技术上讲，您可以转换为任何东西，但如果您没有适当地访问内存，您肯定会崩溃）。但是您不能取消引用或对 a 进行任何实际工作，`void*`因此您需要知道内存实际上是什么才能将其回退。无论如何，值得注意的`C++`是，不使用`()`默认/空构造函数被认为是一种好习惯 - 所以就`new float;`可以了。

您可以做到这一点而不会弄乱任何东西（即不同的数据结构具有不同的大小）的原因是因为指针只是`ptr_t`类型（在许多机器上可能是一个`unsigned long`或类似的）。因此，实际上，指针只是指向内存中的某个位置，但所有指针（即地址）的大小相同，即使指向的对象大小不同。

`C++`最好使用多态性来做到这一点。例如，创建一个“Ball”指针数组，它们都是 class 的（至少有一个基类）`Ball`。然后，您可以使它们更具体。例如，您可以拥有棒球、篮球等。

如果没有适当的上下文，我不完全确定你在尝试什么，但这应该看起来像这样

```
#include <isotream>
using namespace std;
class Ball
{
public:
  virtual void ballType() const = 0;
};

class Basketball : public Ball
{
public:
  virtual void ballType() const {
    cout << "Basketball" << endl;
  }
};

class Baseball : public Ball
{
public:
  virtual void ballType() const {
    cout << "Baseball" << endl;
  }
}; 
```

然后，一般来说，如果您按如下方式使用它：

```
Ball* x[10];
x[0] = new Basketball;
x[1] = new Baseball;

x[0]->ballType();
x[1]->ballType();

delete x[0];
delete x[1]; 
```

这将打印“篮球”，然后是“棒球”。如果您可以提供更多有关您要做什么的背景信息，我可以更好地调整此回复以针对您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:33:45.873

指针是一个“整数”数字，它可以指向内存中你想要的任何东西，如果你有 void *array，它表示你有一个名为数组的 void 指针，现在取决于你如何使用它，你可以将它类型转换为 int 或其他事物和对象。

如果您使用创建指针数组的 void *array[10]，那么现在如何使用指针由您决定。您可以创建对象或将它们分配给您想要的任何数据类型，但这不是类型安全的，因为它是一个没有类型规范的空指针。它还需要强类型转换才能与数据类型一起使用。

从技术上讲，您可以在该数组中拥有具有不同数据类型的每个指针。

# c# - 基于webservice中的用户输入查询sql时无法显示结果

> ID：10424680
> 
> 赞同：-1
> 
> 时间：2012-05-03T03:26:36.227
> 
> 标签：c#, asp.net, sql

从标题你可能知道我从sql数据库查询时无法得到结果。这是我的代码：

```
public string Summon(int Input1)
{
    SqlDataAdapter dbadapter = null;
    DataSet returnDS = new DataSet();

    using (SqlConnection dbconn = new SqlConnection(
        "DatabaseConnection"))
    {
        SqlCommand cmd = new SqlCommand();
        //string sqlQuery = "select * from SUMMON";

        string sqlQuery = "select * from SUMMON where ic_no=@Input1";

        cmd.CommandText = sqlQuery;
        cmd.Connection = dbconn;
        dbadapter = new SqlDataAdapter(cmd);

        dbadapter.Fill(returnDS);
    }

    return returnDS.GetXml();
} 
```

然后我得到这个例外： -

> System.Data.SqlClient.SqlException：必须声明标量变量“@Input1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:36:36.997

您需要在 cmd 中添加一个名为 @Input1 的参数：

```
cmd.Parameters.Add(new SqlParameter("@Input1", input1)); 
```

[本文](http://msdn.microsoft.com/en-us/library/bbw6zyha%28v=vs.90%29.aspx)介绍如何将参数与数据适配器一起使用。

# ios - 如何使用 asihttprequest 发布 json 数据

> ID：10424681
> 
> 赞同：2
> 
> 时间：2012-05-03T03:26:55.770
> 
> 标签：ios, json, asihttprequest

我打算发布 json 数据：

```
NSString *newJSON = [theDictionary JSONRepresentation];

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:ADDRESS,action]];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[newJSON dataUsingEncoding:NSUTF8StringEncoding]];

[request startSynchronous];
NSString *responseString = [request responseString];

NSMutableDictionary* responseDict = [responseString JSONValue];
NSLog(@"responseString = %@",responseString); 
```

代码有效吗？我错过了一些代码吗？我阅读了[asihttprequest教程](http://allseeing-i.com/ASIHTTPRequest/How-to-use)，发现它总是用asiformdatarequest发布数据，asihttprequest和asiformdatarequest有什么区别，如果我只想发布json数据，我该怎么办？提前谢谢你。

更新：是的，它有效，但效果不佳，我使用一些工具测试数据，并收到一些额外的数据：

```
POST / HTTP/1.1
Host: 192.168.0.113
User-Agent: Ushi.com/1.0 CFNetwork/548.1.4 Darwin/11.3.0
Content-Length: 58 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T08:51:46.477

您可以像这样以 json 格式发布文本数据

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

[request setRequestMethod:@"POST"];
[request addRequestHeader:@"Accept" value:@"application/json"];
[request addRequestHeader:@"content-type" value:@"application/x-www-form-urlencoded"];
[request addRequestHeader:@"User-Agent" value:@"iPad"]; 
```

API 本身设置用户代理，尽管您也可以自己设置

```
request.allowCompressedResponse = NO;
request.useCookiePersistence = NO;
request.shouldCompressRequestBody = NO;
[request setPostBody:[NSMutableData dataWithData:[jsonRequest  dataUsingEncoding:NSUTF8StringEncoding]]];
[request startSynchronous]; 
```

# php - 如何使用 PHP 与 YouTube API 交互？

> ID：10424683
> 
> 赞同：1
> 
> 时间：2012-05-03T03:27:16.500
> 
> 标签：php, api, video, upload, youtube

我想让我网站的用户将他们的视频上传到**YouTube**，但是是通过我的 youtube 帐户。也就是说，所有上传的视频都将存储在我的 YouTube 帐户中。

我用过`ClientLogin`方法

```
https://developers.google.com/youtube/2.0/developers_guide_php#ClientLogin_for_Installed_Applications 
```

但是文档说该方法已弃用，并建议我使用 OAuth2.0 但是我在这里找不到喜欢 ClientLogin 的方法

```
https://developers.google.com/youtube/2.0/developers_guide_protocol?hl=zh-TW#Authentication 
```

所以..我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:37:12.037

我找到了！！！！！！！

答案是使用 ServiceAccount， [https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# xaml - 创建可滚动文本窗口的最有效方法（Win8 Metro）

> ID：10424686
> 
> 赞同：1
> 
> 时间：2012-05-03T03:27:44.267
> 
> 标签：xaml, text, scroll, windows-8, windows-runtime

我正在为游戏创建一个聊天窗口，并且我正在为 UI 使用 WinRT XAML。

1.将聊天窗口设计为可滚动和处理多色文本的最有效方法是什么？至少每条线应该能够是单独的颜色。目前我有一些简单的东西，例如：

> ```
> <ScrollViewer x:Name="chatViewScroller" Height="201" Width="475">
>     <StackPanel x:Name="chatViewContent" />
> </ScrollViewer> 
> ```

然后，当我根据需要创建新的 TextBlock 并将它们作为子项添加到 chatViewContent 时。这似乎是一种非常低效的做事方式。

2.新增一行文字时，如何更新滚动条自动滚动到末尾？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:13:47.013

最好使用 ListView。

1.  将 ListView 的 ItemsSource 属性设置为 ObservableCollection。
2.  您的 MessageViewModel 将具有 Text 属性以及 Brush。
3.  将您的 ListView 的 ItemTemplate 设置为下面的模板

    ```
    <DataTemplate>
        <TextBlock Text={Binding Text} Foreground="{Binding Brush}" />
    </DataTemplate> 
    ```

4.  当您将新项目添加到您的收藏时 - 它会自动出现在 ListView 中。

5.  要将其滚动到视图中，请调用类似这样的方法

    ```
    await Task.Delay(100);
    MyListView.ScrollIntoView(MyListView.Items[MyListView.Items.Count - 1]); 
    ```

    您需要延迟等待 ListView 添加新项目。

例如，您可以检查[WinRT XAML Toolkit](http://bit.ly/WinRTXamlToolkit) - 特别是[ListViewExtensionsTestPage](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/13061#268383)：

```
 private async void AddItem(object sender, RoutedEventArgs e)
    {
        var vm = (ListViewExtensionsTestViewModel)this.DataContext;
        vm.MyItems.Add(Guid.NewGuid().ToString());

        // Need to wait for the ListView to update
        await Task.Delay(100);

        SourceListView.ScrollToBottom();
        //SourceListView.ScrollIntoView(SourceListView.Items[SourceListView.Items.Count - 1]);
    } 
```

# python - 从列表动态创建变量名

> ID：10424687
> 
> 赞同：0
> 
> 时间：2012-05-03T03:27:46.367
> 
> 标签：python, maya

所以我开始在 maya 中使用 Python API，一些工具要求我在各种对象上迭代代码。这需要将带有名称的对象引用附加到对象创建者的输出中，然后在调用后立即运行函数。

而不是运行（假设示例）：

```
className.myObject1 = mayaClass.create(myObject1)
func1()
func2()

className.myObject2 = mayaClass.create(myObject2)
func1()
func2() 
```

ETC..

有没有办法我可以说这样做：

```
myObjs = ['myObject1','myObject2','myObject3']
for obj in myObjs:
    className.obj = mayaClass.create(obj)
    func1()
    func2() 
```

它肯定会节省大量打字，缩小脚本大小并使事情更容易维护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:30:20.940

[`setattr()`](http://docs.python.org/library/functions.html#setattr)

> The function assigns the value to the attribute, provided the object allows it. For example, `setattr(x, 'foobar', 123)` is equivalent to `x.foobar = 123`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:02:05.280

`setattr()`将对象的属性（由字符串给出）设置为指定值
`vars()`将局部变量作为字典获取

查看[http://docs.python.org/library/functions.html](http://docs.python.org/library/functions.html)了解重要的 Python 内置函数

```
myObjs = ['myObject1','myObject2','myObject3']

for obj in myObjs:
    setattr(className, obj, mayaClass.create(vars()[objs]))
    func1()
    func2() 
```

编辑：我还注意到另一个答案提到`exec`。在任何 python 代码中使用它时要小心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:38:46.867

除了`setattr()`伊格纳西奥的回答，我还想提一下使用该[`exec()`](http://docs.python.org/reference/simple_stmts.html#exec)声明的可能性。这允许您在当前范围内将字符串作为 python 代码执行。

# puppet - puppet 变量作为变量

> ID：10424688
> 
> 赞同：1
> 
> 时间：2012-05-03T03:28:16.850
> 
> 标签：puppet

变量名可以从变量派生吗？

```
$hash01={instance => '01',street => 'blah'} 
```

这可以调用定义：

```
mydefine { '01': hash => $mod::params::hash01 } 
```

这能行吗？（我对 hash var concat 感兴趣）

```
$var='01'

mydefine { $var: hash => $mod::params::hash"$var" } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T11:46:32.493

我为此使用了 inline_template() 和 scope.lookupvar() ：

```
$mod::params::hash01={instance => '01',street => 'blah'}
$var='01'
$hash_name="mod::params::hash$var"
$hash=inline_template("<%= scope.lookupvar(hash_name) %>") 
```

然而 inline_template 总是返回字符串，所以它会返回字符串“streetblahinstance01”，因为你的函数需要一个散列，所以它不起作用。

另一种方法是通过使用哈希数组来避免该问题。请注意，数组索引从 0 开始。

```
$mod::param::hashes=[{instance=>'00',street=>'fooblah'},{instance=>'01',street=>'blah'}]
mydefine { $var : hash => $mod::param::hashes[1] } 
```

见[https://blog.kumina.nl/tag/inline_template/](https://blog.kumina.nl/tag/inline_template/)

# c++ - Visual C++ 窗体应用程序错误：C3374

> ID：10424691
> 
> 赞同：0
> 
> 时间：2012-05-03T03:28:47.320
> 
> 标签：c++, forms, curl, download

我已经研究了好几个小时了。我对 C++ 很陌生，到目前为止我还没有找到任何解决方案。

我正在尝试在我的表单应用程序中创建一个 cURL 文件下载器，但我收到了这个该死的错误：

```
Error   50  error C3374: can't take address of 'EmperorAntiVirusInstaller::FileDownloader::write_data' unless creating delegate instance    c:\users\bailey\documents\visual studio 2010\projects\emperor antivirus installer\emperor antivirus installer\FileDownloader.h  97 
```

代码如下：

```
private:
    size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
        size_t written;
        written = fwrite(ptr, size, nmemb, stream);
        return written;
    }
    System::Void beginDownload(void) {
        CURL *curl;
        FILE *fp;
        CURLcode res;
        char *url = "http://localhost/aaa.txt";
        char outfilename[FILENAME_MAX] = "C:\\bbb.txt";
        curl = curl_easy_init();
        if(curl) {
            fp = fopen(outfilename,"wb");
            curl_easy_setopt(curl, CURLOPT_URL, url);
            curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &FileDownloader::write_data);
            curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
            res = curl_easy_perform(curl);
            curl_easy_cleanup(curl);
            fclose(fp);
        }
    } 
```

此外，表单的名称是 FileDownloader。

错误行是：

```
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, &FileDownloader::write_data); 
```

我正在寻找关于如何解决此问题的很好解释且简单的答案。：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:58:49.207

您正在尝试将指针传递给成员函数。它需要一个指向非成员函数的指针。您需要编写一个函数来满足您的需求，但*不是*作为类的成员。

至少如果内存服务，如果您只想将数据写入您在调用中指定的文件`CURLOPT_WRITEDATA`，您根本不需要使用`CURLOPT_WRITEFUNCTION`- 默认函数只会将数据写入您传递的文件。

但是，我想我还应该提到（基于错误消息中提到的委托实例）您似乎使用的是 C++/CLI 而不是真正的 C++。如果是这样的话，几乎所有其他东西都可能至少有一个小问题——C++/CLI 在某些方面有点像 C++，但其他方面的不同足以在半定期的基础上引起问题。

# html - 如何将列表项浮动到页面顶部？

> ID：10424699
> 
> 赞同：0
> 
> 时间：2012-05-03T03:29:21.753
> 
> 标签：html, css, html-lists

我想让一个列表项向顶部浮动，而不是让它向顶部流动的自然流动。如果您访问下面的链接，我已经创建了一个项目列表。

[http://jsfiddle.net/subash1232/wQL9w/23/](http://jsfiddle.net/subash1232/wQL9w/23/)

我想要一个从 div 的右下角开始，其他项目向左浮动。当线路已满时，它需要上升而不是下降。

甚至可能吗？
已经非常感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:35:01.863

I suppose you could always write your list elements in reverse order. I believe this would get you the desired results if it wasn't too much of an inconvenience.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:37:35.240

不可能。您需要反转 html 中元素的顺序。您可以手动或使用 javascript 来完成。

# c# - Border Around an Image When Tapped

> ID：10424702
> 
> 赞同：1
> 
> 时间：2012-05-03T03:30:03.017
> 
> 标签：c#, wpf, windows-runtime

I have an Image control. When the image is clicked at runtime it should be added to a grid as a child. I have implemented this.

My requirement now is when the image (which is now inside a grid) is tapped I need a border around the image. How can I achieve this?

I have added the following code inside image tapped but cannot see the border

```
Border b = new Border(); 
b.BorderThickness = new Thickness(4); 
img1 = new Image(); 
img1.MaxHeight = 300; 
img1.MaxWidth = 500; 
b.Child = img1; 
img1.Source = new BitmapImage((new Uri(imgPath, UriKind.RelativeOrAbsolute)));
grid1.Children.Add(b); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:39:59.703

不要将图像作为网格单元子元素放置，而是创建一个 Border 对象并将图像作为内容放入其中。

最初，边框可以有 BorderBrush 透明和厚度 = 1 或其他。然后，将 Tapped 事件添加到图像中以修改边框画笔颜色。

根据上面的代码，您需要类似

```
img1.Tapped += delegate(object sender, EventArgs e)
{
    ((sender as Image).Parent as Border).BorderBrush = Brushes.Blue;
}); 
```

# hadoop - 使用 Hadoop NameNode、Checkpoint Node 和 Backup Node 的优缺点是什么？

> ID：10424718
> 
> 赞同：0
> 
> 时间：2012-05-03T03:32:53.620
> 
> 标签：hadoop

我目前正在为一个内部项目评估 Hadoop 1.0.2。

Hadoop 文档说

> [次要 NameNode 已被弃用。相反，请考虑使用检查点节点或备份节点](http://hadoop.apache.org/common/docs/current/hdfs_user_guide.html#Secondary+NameNode)

有关于这三个选项*是*什么以及它们*做*什么的信息，但是我很难找到关于在什么情况下*推荐*三个选项中的哪一个的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:59:08.267

基本上，检查点节点是辅助名称节点的新实现，备份点是名称节点热备份途中的临时版本（此外，它目前可以通过分离读取和写入来提供小的性能提升 - 读入名称节点并写入备份节点

来自Konstantin Shvachko 解释的[Backupnode 文档：](https://issues.apache.org/jira/browse/HADOOP-4539)

> 此补丁引入了两种新类型的名称节点：检查点节点和备份节点。
> 
> *   检查点节点的作用是通过合并图像和编辑文件来检查点名称节点元数据。
> *   Backup 节点扩展了 Checkpointer 的功能，它可以接收文件系统元数据的在线更新，将它们应用到其内存状态，并将它们保存在磁盘上，就像 name-node 一样。因此，备份节点在任何时候都包含内存和本地磁盘上的命名空间的最新映像。这也导致更有效的检查点，因为备份节点不需要从活动名称节点传输文件，也不需要重播（合并）编辑。
> *   Term Standby 节点保留用于进一步扩展备份节点功能，如果活动节点死亡，集群将能够切换到新的名称节点。这在设计文档的“热备用规定”部分中有所提及。
> 
> 典型用例：
> 
> 1.  仅运行检查点节点以创建检查点。应该使用它来代替补丁已弃用的当前 SecondaryNameNode。我重用了很多 SecondaryNameNode 代码，所以这项工作没有白费，它只是在进化。
> 2.  运行备份节点以支持在线编辑流和高效检查点。这特别针对消除 NFS 作为编辑的远程存储。
> 3.  在没有持久存储的情况下运行 NameNode，并将所有“持久”功能委托给备份节点。这里的技巧是使用 -importCheckpoint 选项启动名称节点，然后运行备份节点。

# c# - union select 适用于第一个命令，但不是第二个？

> ID：10424725
> 
> 赞同：0
> 
> 时间：2012-05-03T03:33:27.850
> 
> 标签：c#, asp.net, sql, sql-server

我在一个连接上总共运行了三个 sql 命令。运行查询时，除了一件小事外，一切都运行良好。最后一个命令上的 UNION SELECT 不会在最后一个语句的末尾附加“TEXT”。

```
 SqlCommand commandtwo = new SqlCommand("SELECT PID = RIGHT(REPLICATE('0',8) + CAST(PID AS VARCHAR(8)),8) + ',' FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID UNION SELECT 'TEXT'", con);
        SqlCommand commandthree = new SqlCommand("SELECT INST = INST + ',' FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID UNION SELECT 'TEXT'", con); 
```

我觉得这很奇怪，因为 commandtwo 工作得很好。我还发现奇怪的是，为了让逗号在 commandthree 中起作用，我必须写

```
= INST + ',' 
```

而不仅仅是

```
 + ',' 
```

那么为什么我会出现这些奇怪的事件呢？或者因为我认为自己是初学者，我显然不知道这条规则是什么？我正在使用 SQL Server 2008 R2 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:09:22.327

联盟应该工作。检查“TEXT”位是否不在列表中。如果您的`INST`列已编入索引，则可能是在对您的结果进行排序，这就是为什么它可能不在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:36:28.400

的数据类型是`INST`什么？

`CAST(INST AS nvarchar) + ','` 可能会奏效。

# html - 未找到支持格式和 MIME 类型的视频。这是什么意思，我该如何改变

> ID：10424729
> 
> 赞同：28
> 
> 时间：2012-05-03T03:33:35.980
> 
> 标签：html, firefox, mime-types, mime

找不到支持格式和 MIME 类型的视频

将显示一个巨大的视频屏幕并显示上面的消息。我该如何解决这个问题？这种情况只发生在 Mozilla Fire fox 中而不是 Google Chrome 中。我正在使用 webm 视频和 mp4 视频。

这是针对 html5 视频的。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T05:46:50.660

Web 服务器可能未发送正确的 MIME 类型。根据服务器的不同，您可以添加一个 .htaccess 文件，其中包含以下内容：

```
AddType video/webm .webm
AddType video/mp4 .mp4 
```

如果这不起作用，请尝试搜索“服务器 mime 类型”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T15:16:45.900

转到 IIS 管理器。单击 IIS 下的 MIME 类型。单击添加按钮。输入以下详细信息。

文件扩展名：.webm MIME 类型：video/webm

再次添加，文件扩展名：.ogv MIME 类型：video/ogg

文件扩展名：.mp4 MIME 类型：video/mp4

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-06T09:38:05.330

```
<html>
<head></head>
<body>
<video width="320" height="240" controls>
<source src="ho.mp4" type="video/mp4">
<source src="ho.ogg" type="video/ogg">
Your browser does not support the video tag.
</video> 
</body>
</html> 
```

这段代码对我来说很好......从 w3schools.com 找到它......如果你仍然有问题尝试在 iis 管理器中添加 mime 类型

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-05T17:33:19.170

我有同样的问题，这就是我解决它的方法： 打开：“C:\Users\DuongKiet\Documents\IISExpress\config\applicationhost.config”-> 其中“C:\Users\DuongKiet\”取决于您的文件夹姓名。

编辑 applicationhost.config，转到这一行：

```
<mimeMap fileExtension=".mp3" mimeType="audio/mpeg" /> 
```

然后在下面插入这一行：

```
<mimeMap fileExtension=".webm" mimeType="video/webm" /> --> problemo solved 
```

如果您找不到该文件夹​​，只需点击此链接了解如何添加新的 mime 类型： http: [//www.misfitgeek.com/use-html5-video-tags-in-your-asp-net-applications/](http://www.misfitgeek.com/use-html5-video-tags-in-your-asp-net-applications/)

# python - SQL Alchemy + Postgres + Python 完整性错误

> ID：10424732
> 
> 赞同：1
> 
> 时间：2012-05-03T03:33:57.167
> 
> 标签：python, postgresql, sqlalchemy

我有一个 python 应用程序，它使用 postgres 9.1 和我相信的 sqlalchemy 0.7 在 2.7 版上运行。

我有一个 wx python gui，我可以从中添加和删除项目。代码运行良好，但现在在进行了一些修改后，我收到了

```
$self.session.commit()
$  File "build\bdist.win32\egg\sqlalchemy\orm\session.py", line 645, in commit
$  File "build\bdist.win32\egg\sqlalchemy\orm\session.py", line 313, in commit
$  File "build\bdist.win32\egg\sqlalchemy\orm\session.py", line 297, in _prepare_impl
$  File "build\bdist.win32\egg\sqlalchemy\orm\session.py", line 1547, in flush
$  File "build\bdist.win32\egg\sqlalchemy\orm\session.py", line 1616, in _flush
$  File "build\bdist.win32\egg\sqlalchemy\orm\unitofwork.py", line 328, in execute
$  File "build\bdist.win32\egg\sqlalchemy\orm\unitofwork.py", line 472, in execute
$  File "build\bdist.win32\egg\sqlalchemy\orm\mapper.py", line 2291, in _save_obj
$  File "build\bdist.win32\egg\sqlalchemy\engine\base.py", line 1405, in execute
$ File "build\bdist.win32\egg\sqlalchemy\engine\base.py", line 1538, in           
$ _execute_clauseelement
$  File "build\bdist.win32\egg\sqlalchemy\engine\base.py", line 1646, in     
$_execute_context
$  File "build\bdist.win32\egg\sqlalchemy\engine\base.py", line 1639, in 
$_execute_context
$  File "build\bdist.win32\egg\sqlalchemy\engine\default.py", line 330, in do_execute
$sqlalchemy.exc.IntegrityError: (IntegrityError) duplicate key value violates
$ unique constraint "Equipment_pkey"
$DETAIL:  Key (id)=(4) already exists.
$ 'INSERT INTO "Equipment" (name, "numPorts") VALUES (%(name)s, %(numPorts)s)     
$RETURNING "HWCIs".id' {'numPorts': 0, 'name': u'jkhj'} 
```

现在，当我重新启动应用程序时，密钥 id 增加一。我可以清楚地看到某些东西正在重置数据库的 id 序列。请问anypne可以帮助我如何通过编写python代码来解决这个问题，或者解决这个问题的简单步骤是什么。我尝试通过 psql 命令工作，但由于我缺乏知识，我没有成功。如果解决方案可以用简单的步骤解释，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T01:28:05.510

好吧，我找到了答案。我正在连接另一个数据库连接，导致数据库序列重置为 1。因此，当应用程序启动时，它会寻求`position 1`. 所以我只需要更改`sequence`为`last no`. 有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:50:50.103

日志中有所有内容：

您正在插入 id=4 的行，但已经存在具有此 id 的行。

表中是否有 id=4 的行？

# c# - Regex.Match for a string like sampleText(any Alphanumeric charectors)

> ID：10424735
> 
> 赞同：0
> 
> 时间：2012-05-03T03:34:23.393
> 
> 标签：c#, regex

I have a string as

`"AND A.BrandId IN (0,1,3,5,9,10) AND AgeGroup IN (0-24,24-36) AND Gender IN (0,1,2)"`

and I want to replace the `"AgeGroup IN (0-24,24-36)"` with other text, keeping the remaining part of the string as it as. How to do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:40:08.063

使用该`String.Replace("Old String", "New String")`方法会更容易，而不是使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions)：

# 例子：

```
string oldFoo = "AND A.BrandId IN (0,1,3,5,9,10) AND AgeGroup IN (0-24,24-36) AND Gender IN (0,1,2)";
string newFoo;
newFoo = oldFoo.Replace("AgeGroup IN (0-24,24-36)", "newFooText"); 
```

* * *

有关 String.Replace() 方法的更多信息：[MSDN](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:42:30.707

如果您认为您的字符串可能会更改为 AgeGroup IN (0-2, 0-4, 24-56,24-36, 4-12) 之类的东西，您可以使用正则表达式将该字符串替换为其他字符串。

```
 string newString = Regex.Replace(str, @"AgeGroup\sIN\s\((\s*\d*[-]\d*,*)*\)", "Other_Text"); 
```

你可以看看[这里](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)。

# python - 如何删除字符串后面的所有标点符号？

> ID：10424738
> 
> 赞同：7
> 
> 时间：2012-05-03T03:34:34.263
> 
> 标签：python, regex, string

这是一个游戏，用户可以输入一个像“Iced tea..”这样的值我想操纵字符串返回“Iced tea”而没有尾随的标点符号。

寻找最优雅/最简单的 python 解决方案。

试过了

```
def last_character(word):
  if word.endswith('.' or ','):
      word = word[:-1]
  return word 
```

如果末尾只有一个标点符号，则该方法有效。但这并不是包罗万象的。

找到了一个[Java解决方案](https://stackoverflow.com/questions/8115679/how-do-i-remove-all-punctuation-that-follows-a-single-word-in-java)：

```
String resultString = subjectString.replaceAll("([a-z]+)[?:!.,;]*", "$1"); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T03:35:38.760

```
>>> 'words!?.,;:'.rstrip('?:!.,;')
'words' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:40:20.660

在这种情况下，`rstrip`可能就是您想要的。但总的来说，将类似 Java 的东西翻译成 Python 并不难。直接翻译如下所示：

```
import re
subject_string = 'Iced tea..'
result_string = re.sub('([a-z]+)[?:!.,;]*',r'\1',subject_string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:54:25.203

```
import string
s='aaa...,'
count= 0
>>> for l in s[::-1]:
...     if l in string.punctuation:
...             count = count +1
...     else:
...             break
>>> s[:c]
'aaa' 
```

# php - 将锚标记与表单的动作属性结合使用

> ID：10424739
> 
> 赞同：4
> 
> 时间：2012-05-03T03:34:40.787
> 
> 标签：php, javascript, html

我正在为一个带有 php 的网站构建一个 CMS。我在一个页面上有多个表单，这些表单会发布给自己。每次页面重新加载以填充表单时，它都会显示页面顶部。（像往常一样）下面的伪代码可以更好地说明我的问题：

```
<Form 1>(top of page)
   bla
   bla
   bla
</form1>
<Form 2>(middle of page)
   bla
   bla
   bla
</form2>
<Form 3>(bottom of page) (how do i get this to show at the top when the page reloads?)
   bla
   bla
   bla
</form3> 
```

我觉得我没有看到一个简单的方法。但它已经晚了，它就是那样的一天。像往常一样提前感谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T04:05:26.527

这是一个保守的秘密，您可以使用片段（`#`URL 的一部分）滚动到页面上的*任何*元素，而不仅仅是`a`nchors。但是，这是通过`id`属性而不是`name`. 例如。

```
<form id="form_1" ...>
...
<form id="form_3" ...> 
```

PHP：

```
header('Location: ' . $_SERVER['PHP_SELF'] . '#form_3'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T04:15:58.173

您可以在每个表单前插入一个锚点，然后在表单操作中包含锚点名称。

```
<a name="form1"></a>
<form action='this_page.php#form1'>
...
<a name="form2"></a>
<form action='this_page.php#form2'>
... 
```

# boolean - how to only select false statements in java

> ID：10424741
> 
> 赞同：0
> 
> 时间：2012-05-03T03:34:56.240
> 
> 标签：boolean, matching

I'm in a bit of a pickle and need some help. What I'm doing is some thing like:

```
 boolean[] turn1 = {false, false, false, false, false, false};
 boolean[] turn2 = {false, false, false, false, false, false}; 
```

I'm trying to make something like if I could make a pair from turn1 and turn2 true, how could I make it so that you could only choose those that are false? I am sorry beforehand if this seems a bit vague but I will answer any question if asked.

edit:ok ill try to specify. I'm trying to make matching pairs. I suppose it could be anything as long as they have the same word. I'm making a memory game. What I want is that when I choose a matching pair, they could never be selected again. So I figured that in order to do that is to make the matching pair true so I could limit myself from choosing those that are false.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:30:37.773

在处理此类问题时，有时考虑一下在没有计算机的情况下如何在现实生活中进行处理会有所帮助。如果我和孩子玩记忆游戏，我们不会使用单独的纸来跟踪选择和匹配的卡片的真假标记。我们只需将牌从桌子上移开。

因此，不要使用大小固定的数组，而是使用[ArrayList](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/ArrayList.html)，它可以让您访问像数组一样的元素，但也可以像列表一样删除它们。

您的初始设置是这样的：

```
ArrayList<String> turn1 = new ArrayList<String>();
turn1.add("Orange");
turn1.add("Apple");
turn1.add("Banana");
turn1.add("Pear"); 
```

同样对于`turn2`. 找到匹配项后，从每个列表中删除项目：

```
turn1.remove(selection1);
turn2.remove(selection2); 
```

然后你可以简单地继续，直到你的列表为空（字面意思是，`turn1.isEmpty()`））。

# gcc - 使用可变输入运行 C++ 程序

> ID：10424747
> 
> 赞同：1
> 
> 时间：2012-05-03T03:35:29.647
> 
> 标签：gcc, g++, runtime, variable-assignment

如何从命令行运行 c++ 代码（test.cpp）：

> ./解决lm

其中 l 和 m = test.cpp 的输入变量

solve 是 test.cpp 的对象/可执行文件。

我知道我可以创建一个目标文件

> g++ test.cpp -o 解决

但我怎么做

> **./解决lm**

工作 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:39:55.087

Main() 接受两个输入。第一个（argc）是输入的数量（在您的情况下为 2、l 和 m），它将两者放入一个 char* 数组（argv[]）中。所以主要你会做：

```
#include <iostream> 
using namespace std;

int main(int argc, char* argv[]) { 
   cout << "argc = " << argc << endl; 
   for(int i = 0; i < argc; i++) 
      cout << "argv[" << i << "] = " << argv[i] << endl; 
   return 0; 
} 
```

在此处阅读解析命令行参数：http://www.site.uottawa.ca/~lucia/courses/2131-05/labs/Lab3/CommandLineArguments.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:37:45.780

你不需要做任何特别的事情来从命令行接收参数；I 和 m 都将`**argv`在您的主要功能中收到

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T03:41:37.460

您可以从主函数中提取“参数”。您必须解析它们并确保它们对您的程序可用。

```
int main( int argc, const char* argv[] ) 
```

int argc -> 参数数量和常量 char* argv[] 是参数的实际数组。请注意，第一个参数是程序的名称。然后是您在命令行中写出的所有其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T03:39:31.017

特别是，`argc`包含 中的条目数`argv`。第一个条目`argv`通常是程序的名称，所以如果有的话，您需要检查那个之后的元素。对于更复杂的程序，解析命令行参数可能会很痛苦。在这种情况下，您可能会对 Boost.ProgramOptions 感兴趣。

为了获得每个单独参数的大小，您可能会发现`strlen`in`cstdlib`很有帮助。

# jquery - jQuery Won't Work

> ID：10424748
> 
> 赞同：-1
> 
> 时间：2012-05-03T03:35:34.840
> 
> 标签：jquery, html

For some reason when I try and run a simple jQuery code it won't work. I beleive the code is correct and it's like my file isn't linked correctly. It also won't work on other pages with different code so I'm thinking it must be something with the way that jQuery is linked. My code is:

```
<!DOCTYPEhtml PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title></title>
<script type="text/javascript" src="jquery-1.7.2.min"></script>
<script type="text/javascript">
$('#toggle_message').click(function() {
    var value = $('#toggle_message').attr('value');
    $('#message').toggle('fast');

    if (value == 'Hide') {
        $('#toggle_message').attr('value', 'Show');
    } else if (value == 'Show') {
        $('#toggle_message').attr('value', 'Hide');
        }
    }
});
$('#toggle_message').click();
</script>
</head>
<body>
<input type="button" value="Hide" id="toggle_message" />
<p id="message">This is a paragraph that will disappear</p>
</body>
</html> 
```

Any help is appreciated. Also, my jQuery file is only 4 lines long.. Is that normal?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T03:36:59.987

我怀疑你忘记了`.js`jQuery 的文件名。它应该是：

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script> 
```

另外，是的，文件只有很少的行是正常的。它是压缩的，每一行都很长。

此外，[正如 Nudier 在评论中提到的](https://stackoverflow.com/q/10424748#comment13453018_10424748)，在页面加载之前绑定到元素将不起作用。您可能希望延迟绑定，直到页面加载：

```
$(function() {
    $('#toggle_message').click(function() {
        // ...
    });
    $('#toggle_message').click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:56:57.600

尝试将您的 JQUERY 代码包装在 .ready 函数中。另外，如上所述，链接的js可能不正确。如果需要，请随意尝试以下操作并将 Jquery 源更改为您的本地副本。通常我只使用来自：[http ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 的 src](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

```
 <!DOCTYPEhtml PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

    <html>
    <head>
    <title></title>
    <script src="" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('#toggle_message').click(function() {
            var value = $('#toggle_message').attr('value');
            $('#message').toggle('fast');

            if (value == 'Hide') {
                $('#toggle_message').attr('value', 'Show');
            } else if (value == 'Show') {
                $('#toggle_message').attr('value', 'Hide');
                }
        });

        $('#toggle_message').click();
    });

    </script>
    </head>
    <body>
    <input type="button" value="Hide" id="toggle_message" />
    <p id="message">This is a paragraph that will disappear</p>
    </body>
    </html>
     $('#toggle_message').click();
    }); 
```

# java - 二传手的困难

> ID：10424752
> 
> 赞同：-2
> 
> 时间：2012-05-03T03:36:34.467
> 
> 标签：java

我有一个名为 Shape 的类，它有两个子类 Shape1 和 Shape2。在 Shape 类中，我有变量 Xpos 和 Xpos 以及方法，即：

```
public int getXpos(){
    return Xpos;
}

public void setXpos(int x){
    this.x = x;
}

// Same thing for y 
```

现在让我们在 Shape 类中说`x = 10`. 现在当我继承它时：

```
public class Shape1{
    Shape1(){
        xPos = 100;
        // ...
    }
} 
```

和：

```
public class Shape2{
    Shape2(){
        xPos = 200;
        // ...
    }
} 
```

但是当我在另一个程序中执行 Shape1.getX() 时，结果是 10。谁能告诉我为什么我没有得到100？'this'关键字有问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:38:39.333

该`getXpos()`方法应如下所示：

```
public int getXpos() {    
    return x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:26:59.703

xPos 不能是静态的。如果它是静态的，则相同的数字将出现两次。（原来的形状）

# reporting-services - SSRS中的双重分组+导出

> ID：10424756
> 
> 赞同：1
> 
> 时间：2012-05-03T03:37:10.487
> 
> 标签：reporting-services, ssrs-grouping

我正在尝试创建一个报告，该报告允许用户不仅选择要分组的字段，还可以选择第二级分组。为了证明 - 被查询的记录是人们的时间表条目。所以每条记录都有诸如员工（工作时间的员工）、公司（工作时间的公司）、项目（项目工作）、活动（完成的工作类型）等字段，当然还有时间工作。还有更多字段，但对于此示例来说就足够了。

假设一些记录是：

John Smith，ABC 公司，项目 X，活动 X，10
John Smith，公司 ABC，项目 X，活动 Y，5
John Smith，公司 ABC，项目 Y，活动 X，8
John Smith，公司 FGH，项目 Y，活动 Y , 6
Jane Jones, ABC 公司, 项目 X, 活动 X, 4
Jane Jones, 公司 ABC, 项目 Y, 活动 Y, 8
Jane Jones, 公司 FGH, 项目 Y, 活动 X, 7
Jane Jones, 公司 FGH, 项目 X,活动 Y，6

等等...

报告用户可以选择按人员分组，其次按项目分组，他们会得到：

```
约翰·史密斯
                          项目 X 15
                          项目 Y 14

简·琼斯
                          项目 X 10
                          项目 Y 14

```

或者他们可以按项目然后按活动选择，或者他们喜欢的任何字段组合。我通过将一个表嵌套在另一个表中并在两者上进行分组来完成此操作，并且它工作得很好。

除了...它不会导出到 Excel。我们在 2005 年，据我所知，它在 2008 年仍然无法正常工作。之后不确定。无论如何，在我需要发布此报告时，我们无法升级。

我还能如何实现这一目标？我试图想出一些方法来在查询中进行第一级分组，但即使使用动态 SQL，我也无法想出如何使它适用于参数传入的任何字段，因为它需要能够返回第一级分组的其他字段。

我认为子报表理论上可以工作，只是整个事情都是子报表，我不知道您是否可以将它们分层。另外我怀疑开销会很糟糕......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:35:55.217

尝试在动态 SQL 查询中进行所有分组 - 例如：

```
="select " + 
 Parameters!ReportParameter1.Value + " firstCol, " +
 Parameters!ReportParameter2.Value + " secondCol, " +
 "sum(hours_worked) total_hours from timesheets " +
 "group by " + 
 Parameters!ReportParameter1.Value + ", " +
 Parameters!ReportParameter2.Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T02:29:24.807

您不需要使用嵌套表来实现这一点。您只需要一个包含两个组和两个参数“Group By 1”和“Group By 2”的表，其中参数**值**是数据集中列的名称。

例如 Group By 1 参数

```
value         label
------        -------
staff         Staff Member
project_name  Project 
```

然后将第一个组的 Group 表达式设置为：

```
=Fields(Parameters!GroupBy1.Value).Value 
```

第二组的组表达式为：

```
=Fields(Parameters!GroupBy2.Value).Value 
```

# iphone - NSKeyedArchiver 没有将数据写入文件...？

> ID：10424757
> 
> 赞同：0
> 
> 时间：2012-05-03T03:37:27.347
> 
> 标签：iphone, ios, cocoa, nskeyedarchiver

@界面

```
@interface Patient : NSObject <NSCoding> 
```

@执行

```
- (id)initWithCoder:(NSCoder *)decoder{

    self.patientPhoto = [decoder decodeObjectForKey:kPatientPhoto];
    self.firstName = [decoder decodeObjectForKey:kFirstName];
    self.lastName = [decoder decodeObjectForKey:kLastName];
    self.age = [decoder decodeIntForKey:kAge];
    self.photoPaths = [decoder decodeObjectForKey:kPhotoPaths];
    self.photoDates = [decoder decodeObjectForKey:kPhotoDates];

    return self;

   }

- (void)encodeWithCoder:(NSCoder *)encoder{

        [encoder encodeObject:self.patientPhoto forKey:kPatientPhoto];
        [encoder encodeObject:self.firstName forKey:kFirstName];
        [encoder encodeObject:self.lastName forKey:kLastName];
        [encoder encodeInt:self.age forKey:kAge];
        [encoder encodeObject:self.photoPaths forKey:kPhotoPaths];
        [encoder encodeObject:self.photoDates forKey:kPhotoDates];

    } 
```

在不同的实现中，我尝试归档患者对象。

```
 IMDataController* dataCtr = [IMDataController sharedDataController];

     Patient *currentPatient = [[Patient alloc]init];

     currentPatient.patientPhoto = self.photo.image;
     currentPatient.firstName = self.firstName.text;
     currentPatient.lastName = self.lastName.text;
     currentPatient.age = [self.lastName.text intValue];
     currentPatient.photoDates = nil;
     currentPatient.photoPaths = nil;

     NSString *patientNameForWriting = [self.firstName.text stringByAppendingString:self.lastName.text];

     NSString *stringToPatientObjectFile = [dataCtr createPatient:patientNameForWriting];

     NSFileManager* filemanager = [NSFileManager defaultManager];

    NSData *patientObjectArchived = [NSKeyedArchiver archivedDataWithRootObject:currentPatient];

     if([patientObjectArchived writeToFile:stringToPatientObjectFile atomically:YES]){

     }else{

         NSLog(@"Patient Object Didn't Archive");

     } 
```

if 语句中的上述方法未返回 YES。我已经对照 nil 检查了数据，我检查了我的编码器方法，但我找不到问题。我正在将数据写入 NSString 文件路径：.../Documents/PatientName/PatientObject.archive。我也遵守病人班的协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:40:57.087

确保父目录存在。据我所知，`writeToFile:atomically:`不会自动创建目录层次结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:29:35.193

将您的 NSCoding 实现替换为以下内容：

```
- (id)initWithCoder:(NSCoder *)decoder{
    if (self = [super initWithCoder:(NSCoder *) decoder]) 
    {
        self.patientPhoto = [decoder decodeObjectForKey:kPatientPhoto];
        self.firstName = [decoder decodeObjectForKey:kFirstName];
        self.lastName = [decoder decodeObjectForKey:kLastName];
        self.age = [decoder decodeIntForKey:kAge];
        self.photoPaths = [decoder decodeObjectForKey:kPhotoPaths];
        self.photoDates = [decoder decodeObjectForKey:kPhotoDates];
    }
    return self;

   }

- (void)encodeWithCoder:(NSCoder *)encoder{
        [super encodeWithCoder:encoder];
        [encoder encodeObject:self.patientPhoto forKey:kPatientPhoto];
        [encoder encodeObject:self.firstName forKey:kFirstName];
        [encoder encodeObject:self.lastName forKey:kLastName];
        [encoder encodeInt:self.age forKey:kAge];
        [encoder encodeObject:self.photoPaths forKey:kPhotoPaths];
        [encoder encodeObject:self.photoDates forKey:kPhotoDates];

 } 
```

然后，更改行：

```
NSData *patientObjectArchived = [NSKeyedArchiver archivedDataWithRootObject:currentPatient]; 
```

和：

```
NSMutableData *patientObjectArchived = [NSMutableData data];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData: patientObjectArchived];
[archiver encodeObject:currentPatient forKey:@"someKey"];
[archiver finishEncoding]; 
```

# php - 论坛未显示“所有”结果

> ID：10424783
> 
> 赞同：0
> 
> 时间：2012-05-03T03:40:13.990
> 
> 标签：php, mysql

所以我在服务器上有一个表格，可以保存用户输入的帖子。在您可以查看它们的最后一页上，您可以选择查看每个人的结果，或者选择只查看特定天气。选择某些天气部分正在工作，但如果您选择“全部”选项，它不会显示任何内容。任何想法是为什么？

```
View Posts 
<br>
<form method="get" action="view_forum.php">
    <label>Select Weather to Filter </label><br />
    <select name="weather">
        <option value="all">all</option>
        <option value="cloudy">Cloudy</option>
        <option value="sunny">Sunny</option>
        <option value="windy">Windy</option>
        <option value="snowy">Snowy</option>
        <option value="mixy">Wintery Mix</option>
        <option value="rainy">Rainy</option>
    </select>
    <input type="submit" value="view" />
</form>

<div id="view">
    <center><img src="images/forum.png" width="589" height="97"></center>
</div>  

<div id="white">
    <div id="blue">
        <div id="grey">
            <div id="container">        
<?php

    $dbc = mysql_connect('html','user','password','database');
    mysql_select_db('database',$dbc);

    $weather = sanitize( $_GET["weather"] ); // keep your input clean

    if ( $weather == "all" ) {
        $sql = "SELECT * FROM stories ORDER BY id DESC";
    } else {
        $sql = "SELECT * FROM stories WHERE weather = '$weather' ORDER BY id DESC";
    }

    while( $row = mysql_fetch_array($result, MYSQL_ASSOC) ) {
        echo "<div class=\"names\"> {$row['name']}<br /></div>";
        echo "<div class=\"weathers\">{$row['weather']}<br /></div>";
        echo "<div class=\"stories\">{$row['story']}<br /></div>";
        echo "<img src=\"images/line.png\" width='800' height='3'>";
        echo "<br />";  
    }
?>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:46:10.827

`WHERE`如果选择“全部”，则需要完全删除该子句。

```
$weather = mysql_real_escape_string( $_GET["weather"] ); // keep your input clean

if ( $weather == "all" ) {
  $sql = "SELECT * FROM stories ORDER BY id DESC";
} else {
  $sql = "SELECT * FROM stories WHERE weather = '$weather' ORDER BY id DESC";
}

$result = mysql_query( $sql ) or die( mysql_error() );

while ( $row = mysql_fetch_assoc( $result ) ) {
  /* Echo results */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T03:47:56.703

您应该真正注意 sql 注入，如果可能，请转到 [mysqli_prepare](http://php.net/manual/en/mysqli.prepare.php)或[PDO 准备](http://uk3.php.net/manual/en/pdo.prepare.php) 查询。

但是你的主要问题是你做一个查询`all`，除非你有天气叫它`all`不会找到它。

解决方案是检查该`all`选项并根据该选项更改查询。

此外，如果`$_GET['weather']`未设置您需要默认值，我怀疑您也关闭了错误报告并且它没有抛出通知：未定义错误。

```
<?php 
if(isset($_GET['weather'])){
    $_GET['weather']=mysql_real_escape_string($_GET['weather']);
    //All
    if($_GET['weather'] == 'all'){
        $sql = "SELECT * from stories ORDER BY id DESC";
    }else{
        //Specific
        $sql = "SELECT * from stories WHERE weather='{$_GET['weather']}' ORDER BY id DESC";
    }
}else{
    //Default
    $sql = "SELECT * from stories ORDER BY id DESC";
}
?> 
```

## 更新（完整代码，带有修复）：

```
<?php 
$dbc=mysql_connect('html','user','password','database') or die(mysql_error());
mysql_select_db('database',$dbc) or die(mysql_error());
?>

View Posts <br>
<form method="get" action="view_forum.php">
  <label>Select Weather to Filter </label><br />
  <select name="weather">
    <option value="all">all</option>
    <option value="cloudy">Cloudy</option>
    <option value="sunny">Sunny</option>
    <option value="windy">Windy</option>
    <option value="snowy">Snowy</option>
    <option value="mixy">Wintery Mix</option>
    <option value="rainy">Rainy</option>
  </select>
  <input type="submit" value="view" />
</form>

<div id="view">
 <center><img src="images/forum.png" width="589" height="97"></center>
</div>  
  <div id="white">
    <div id="blue">
      <div id="grey">
       <div id="container">
<?php
if(isset($_GET['weather'])){
$_GET['weather']=mysql_real_escape_string($_GET['weather']);
    //All
    if($_GET['weather'] == 'all'){
        $sql = "SELECT `name`,`weather`,`story`
                FROM stories 
                ORDER BY id DESC";
    }else{
        //Specific
        $sql = "SELECT `name`,`weather`,`story`
                FROM stories 
                WHERE weather='{$_GET['weather']}' 
                ORDER BY id DESC";
    }
}else{
    //Default
    $sql = "SELECT `name`,`weather`,`story`
            FROM stories 
            ORDER BY id DESC";
}

$result = mysql_query($sql);

if(mysql_num_rows($result)>0){
    while($row=mysql_fetch_assoc($result)){
        echo "<div class=\"names\"> {$row['name']}<br /></div>";
        echo "<div class=\"weathers\">{$row['weather']}<br /></div>";
        echo "<div class=\"stories\">{$row['story']}<br /></div>";
        echo "<img src=\"images/line.png\" width='800' height='3'>";
        echo "<br />";
    }
}else{
    echo 'No results';
}
?>
</div>
</div>
</div>
</div> 
```

# javascript - fancyBox：如何摆脱生涩的模态窗口闪烁

> ID：10424786
> 
> 赞同：1
> 
> 时间：2012-05-03T03:40:37.797
> 
> 标签：javascript, jquery, fancybox

我在投资组合网站上使用 fancyBox（带有许可证）来显示一系列图像，画廊风格：
[示例](http://designop.us/made/red-front-logo)

当我打开其中一个图像并使用鼠标或箭头键在图库中导航时，下一个图像出现在它应该在正确位置之前大约 200 像素的右侧。演示站点上不存在此行为，我不确定为什么在我的实现中这样做。

这是相关的脚本：

```
$(document).ready(function() {
  $('.thumbnail-display-link').fancybox({
    openEffect  : 'none',
    closeEffect : 'none'
  });
}); 
```

该脚本不会在我的控制台中抛出任何错误，我不知道从哪里开始解决这个问题。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:52:14.640

`position: relative;`尝试从你的身体标签中去除风格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:00:57.173

问题的真正原因是 body 元素的尺寸发生了变化。由于您删除了`position: relative;`您现在无法相对于它定位。我建议改用额外的包装元素。

# wpf - WPF 创建模板并绑定到列表项属性内的对象

> ID：10424787
> 
> 赞同：0
> 
> 时间：2012-05-03T03:40:54.063
> 
> 标签：wpf, object, binding, properties, datatemplate

我的数据结构如下所示：

```
public class MyDataContext
{
    public ObservableCollection<Car> CarList {set; get;}
}

public class Car
{
    public Driver CarDriver {set; get;} // implements INotifyPropertyChanged (not shown here to keep it short)
    public string Color {set; get;} // implements INotifyPropertyChanged (not shown here to keep it short)
    public string Brand {set; get;} // implements INotifyPropertyChanged (not shown here to keep it short)
}

public class Driver
{
    public string Name {set; get;}
    public string Nationality {set; get;}
} 
```

我将 CarList 绑定到我的 XAML 中的 ListView，并且我想为 Car 和 Driver 创建 DataTemplates。我的用户控件看起来像这样：

```
<UserControl.Resources>
    <DataTemplate DataType="{x:Type local:Car}>
        <StackPanel>
            <UserControl DataContext="{Binding CarDriver}"/>
            <TextBlock Text="{Binding Color}"/>
            <TextBlock Text="{Binding Brand}"/>
        </StackPanel>
    </DataTemplate>
    <DataDataTemplate DataType="{x:Type local:Driver}>
        <StackPanel>
            <TextBlock Text="{Binding Name}"/>
            <TextBlock Text="{Binding Nationality}"/>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>
<ListView ItemsSource="{Binding CarList}"/> 
```

问题是 ListView 没有显示 CarDriver 的信息。我怀疑我的线路

```
<UserControl DataContext="{Binding CarDriver}"/> 
```

是不正确的，但我不知道该放什么...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:47:50.917

你应该`ContentControl`这样写：

```
<ContentControl Content="{Binding CarDriver}"> 
```

一切都会好起来的。如果不是 - 尝试将for放在`DataTemplate`for`Driver`之上`DataTemplate``Car`

# javascript - 使用 jQuery 过滤表行的更优雅的方法？

> ID：10424788
> 
> 赞同：0
> 
> 时间：2012-05-03T03:41:19.300
> 
> 标签：javascript, jquery, html-table, tablefilter

我想让我的表格过滤器更优雅。基本上，此表将在底部有链接，以根据表中的属性隐藏和显示行。它以我想要的方式工作，但我觉得我可以使用更少的 jQuery 行编写......有人有什么想法吗？

这是jsfiddle：http: [//jsfiddle.net/vC88q/1/](http://jsfiddle.net/vC88q/1/)

和代码：

```
<!--*******************************************************
jquery that needs cleaned up appears at the end of this file!
Code is online at JSFIDDLE: http://jsfiddle.net/vC88q/1/
*********************************************************-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<body>
    <table> 
        <thead> 
            <tr> 
                <th>Color Table</th>
            </tr> 
        </thead> 
        <tbody> 
            <tr> 
                <td data-color="red">red</td>
            </tr> 
            <tr> 
                <td data-color="white">white</td>
            </tr> 
            <tr> 
                <td data-color="blue">blue</td>
            </tr> 
            <tr> 
                <td data-color="bluewhite">bluewhite</td>
            </tr> 
            <tr> 
                <td data-color="red">red</td>
            </tr>
            <tr> 
                <td data-color="red">red</td>
            </tr> 
            <tr> 
                <td data-color="red">red</td>
            </tr> 
            <tr> 
                <td data-color="blue">blue</td>
            </tr> 
            <tr> 
                <td data-color="blue">blue</td>
            </tr> 
        </tbody> 
    </table> 
    <br />
    <br />
    <div class="filtertable">
        <a href="#" data-color="all">All</a>
        <a href="#" data-color="red">Red</a>
        <a href="#" data-color="white">White</a>
        <a href="#" data-color="blue">Blue</a>
        <a href="#" data-color="bluewhite">Blue and White</a>
    </div>

<script type="text/javascript">

/*******************************************************
Here is the jquery I need help with, how can I reduce the code
I've written? Code is online at JSFIDDLE: http://jsfiddle.net/vC88q/1/
*********************************************************/

$(document).ready(function() 
    { 
    /*****************************************************************
    when users clicks the "all" filter, show all the hidden table rows
    *****************************************************************/
    $('.filtertable a[data-color=all]').click(function() {
        $('td[data-color]').parent().show();
    });
    /****************************************************************
    when users clicks the "red" filter, hide all but red table rows
    *****************************************************************/
    $('.filtertable a[data-color=red]').click(function() {
        $('td[data-color=red]').parent().show();
        $('td[data-color=white]').parent().hide();
        $('td[data-color=blue]').parent().hide();
        $('td[data-color=bluewhite]').parent().hide();
    });
    /*****************************************************************
    when users clicks the "white" filter, hide all but white table rows
    ****************************************************************/
    $('.filtertable a[data-color=white]').click(function() {
        $('td[data-color=white]').parent().show();
        $('td[data-color=red]').parent().hide();
        $('td[data-color=blue]').parent().hide();
        $('td[data-color=bluewhite]').parent().hide();
    });
    /****************************************************************
    when users clicks the "blue" filter, hide all but blue table rows
    *****************************************************************/
    $('.filtertable a[data-color=blue]').click(function() {
        $('td[data-color=blue]').parent().show();
        $('td[data-color=white]').parent().hide();
        $('td[data-color=red]').parent().hide();
        $('td[data-color=bluewhite]').parent().hide();
    });
    /*****************************************************************
    when users clicks the "blue and white" filter, hide all but blue+white table rows
    *****************************************************************/
    $('.filtertable a[data-color=bluewhite]').click(function() {
        $('td[data-color=bluewhite]').parent().show();
        $('td[data-color=white]').parent().hide();
        $('td[data-color=blue]').parent().hide();
        $('td[data-color=red]').parent().hide();
    });
} 
); 
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:52:10.133

```
$(document).ready(function()
    {
        $('.filtertable a[data-color]').click(function() {
            var color = $(this).data().color;
            if(color == 'all'){
                 $('td[data-color]').parent().show();
            } else {
                $('td[data-color='+ color +']').parent().show();
                $('td[data-color!='+color+']').parent().hide();
            }
        });
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T03:48:46.677

[这是一个演示](http://jsfiddle.net/vC88q/8/)

```
$(function() {
    var td = $('#colortable td');
    $('.filtertable').on('click', 'a', function() {
        var color = this.getAttribute('data-color');
        if (color === 'all') {
            td.parent().show()
        } else {
            td.filter('[data-color=' + color + ']').parent().show()
            td.filter('[data-color!=' + color + ']').parent().hide()
        }
    });
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T03:50:37.857

我经常将 CSS 用于此类事情。

```
<table id="myTable" class="all">
  <tr class="red"><td>red</td></tr>
  <tr class="yellow"><td>yellow</td></tr>
  <tr class="blue"><td>blue</td></tr>
<table>

<div class="controls">
  <a href="#" data-color="all">All</a>
  <a href="#" data-color="red">Red</a>
  <a href="#" data-color="white">White</a>
  <a href="#" data-color="blue">Blue</a>
</div> 
```

然后在 JS

```
$('.controls a').on('click', function(e){
  e.preventDefault();
  var c= $(this).data('color');
  $('#myTable')[0].className = c;
});​ 
```

CSS 确定在以下情况下显示什么：

```
tr { display: none; }
.all tr { display: table-row; }
.red tr.red { display: table-row; }
.blue tr.blue { display: table-row; }
.yellow tr.yellow { display: table-row; } 
```

在[JSFiddle](http://jsfiddle.net/z4QKT/)中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T03:48:02.683

以下内容应替换您的所有代码。

```
$(document).ready(function() {
    $('.filtertable a[data-color]').click(function() {
        var $this = $(this), color = $this.data('color');
        if (color !== 'all') {
            $('td[data-color]').parent().hide();
        }
        $('td[data-color' + (color !== 'all' ? '=' + color : '') + ']').parent().show();
    });
});​ 
```

编辑：更新以修复“全部”链接

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T03:49:30.977

[http://jsfiddle.net/vC88q/6/](http://jsfiddle.net/vC88q/6/)

```
 $('.filtertable a[data-color]').click(function() {
        var color = $(this).data().color;
        $('td[data-color=' + color + ']').parent().show();
        $('td[data-color!=' + color + ']').parent().hide();
    }); 
```

# php - 在 php 上下文中生成给定 XML 文件和 XSLT 的 HTML 文档

> ID：10424791
> 
> 赞同：0
> 
> 时间：2012-05-03T03:41:29.497
> 
> 标签：php, xml, xslt

我有一个挑战，我不确定我是否按照正确的方式去做。我有一个 XML 文件，它当然包含与特定字段有关的数据。想法是深入研究这个 XML 文件，在此处检索特定信息，并将其呈现为下拉框。当从下拉框中选择某些内容时，将呈现特定于所选值的信息（当然，此信息的来源是 XML 文件）。

我的方法：

我使用 simpleXMLelement 函数检索 XML 信息，创建对象，随后在 Mockclass.class.php 文件中对其进行解码和编码。对于需要显示所需信息的页面，我只需创建一个类 Mockclass 类型的对象并调用公共方法来执行所需的操作。我以纯 html 呈现的数据。

我不确定这是否是做事的正确方法，如果这是正确的方法或者有更好的替代方案和解决方案等，我需要指导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T03:46:14.957

[`DOMDocument::load()`](http://php.net/manual/en/domdocument.load.php), [`XSLTProcessor`](http://php.net/manual/en/class.xsltprocessor.php), [`DOMDocument::saveHTMLFile()`](http://php.net/manual/en/domdocument.savehtmlfile.php).

# asp.net - 调用 ASP.NET 以利用缓存的大量 ASP 页面导致 503 服务不可用

> ID：10424794
> 
> 赞同：0
> 
> 时间：2012-05-03T03:41:47.187
> 
> 标签：asp.net, iis-7, http-status-code-503, http.sys, httpcontext.cache

大容量经典 ASP 页面使用 ASP.NET 页面返回 xml 数据，利用 .NET 缓存功能。.net 页面中使用的缓存是上下文缓存。最近在平稳运行 1 年后 - IIS7 开始响应 503 不可用，并且在 HTTP.sys 错误日志中显示一些 connection_dropped 事件，然后是大量 connection_dropped_list_full 事件。此时服务器不可用。

查看遇到缓存限制或网络问题的可能性。

# objective-c - NSXMLDocument 写入 .xml

> ID：10424798
> 
> 赞同：1
> 
> 时间：2012-05-03T03:42:31.193
> 
> 标签：objective-c, file, nsxmldocument, nsxmlelement

有谁知道为什么文件在第 9 行的“<taskinprogress>”行格式不正确。它将“<project>”与“<taskinprogress>”放在同一行，我不知道为什么。我希望将“<project>”移到下一行（不向字符串添加 \n 字符）。

```
<client_state>
    <platform>******PLATFORMNAME*******</platform>
    <OS_version>********OS VERSION*******</OS_version>
    <client_version>********client VERSION*******</client_version>
    <power_supply_connected>********POWER SUPPLY CONNECTED*******</power_supply_connected>
    <work_mode>********Work Mode*******</work_mode>
    <battery_level>********Battery Level*******</battery_level>
    <last_update>********Last Update*******</last_update>
    <task_in_progress>********task_in_progress*******<project>********Project*******</project>
        <application>********Application*******</application>
        <xml_file>********xml_file*******</xml_file>
        <task_id>********task_id*******</task_id>
        <create_time>********create_time*******</create_time>
        <receive_time>********receive_time*******</receive_time>
        <input>********input*******</input>
    </task_in_progress>
</client_state> 
```

以下是我声明所有节点和元素的代码。

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[]) {

    NSXMLElement *client_state = [[NSXMLElement alloc] initWithName:@"client_state"];

    NSXMLElement *platform = [[NSXMLElement alloc] initWithName:@"platform"];
    [platform setStringValue:@"******PLATFORMNAME*******"];
    [client_state addChild:platform];
    [platform release];

    NSXMLElement *OS_version = [[NSXMLElement alloc] initWithName:@"OS_version"];
    [OS_version setStringValue:@"********OS VERSION*******"];
    [client_state addChild:OS_version];
    [OS_version release];

    NSXMLElement *client_version = [[NSXMLElement alloc] initWithName:@"client_version"];
    [client_version setStringValue:@"********client VERSION*******"];
    [client_state addChild:client_version];
    [client_version release];

    NSXMLElement *power_supply_connected = [[NSXMLElement alloc] initWithName:@"power_supply_connected"];
    [power_supply_connected setStringValue:@"********POWER SUPPLY CONNECTED*******"];
    [client_state addChild:power_supply_connected];
    [power_supply_connected release];

    NSXMLElement *work_mode = [[NSXMLElement alloc] initWithName:@"work_mode"];
    [work_mode setStringValue:@"********Work Mode*******"];
    [client_state addChild:work_mode];
    [work_mode release];

    NSXMLElement *battery_level = [[NSXMLElement alloc] initWithName:@"battery_level"];
    [battery_level setStringValue:@"********Battery Level*******"];
    [client_state addChild:battery_level];
    [battery_level release];

    NSXMLElement *last_update = [[NSXMLElement alloc] initWithName:@"last_update"];
    [last_update setStringValue:@"********Last Update*******"];
    [client_state addChild:last_update];
    [last_update release];

    //if(task in progress)

    NSXMLElement *task_in_progress = [[NSXMLElement alloc] initWithName:@"task_in_progress"];
    [task_in_progress setStringValue:@"********task_in_progress*******"];
    [client_state addChild:task_in_progress];
    [task_in_progress retain];
    [task_in_progress release];

    //start adding to inner task in progress

    NSXMLElement *project = [[NSXMLElement alloc] initWithName:@"project"];
    [project setStringValue:@"********Project*******"];
    [task_in_progress addChild:project];
    [project release];

    NSXMLElement *application = [[NSXMLElement alloc] initWithName:@"application"];
    [application setStringValue:@"********Application*******"];
    [task_in_progress addChild:application];
    [application release];

    NSXMLElement *xml_file = [[NSXMLElement alloc] initWithName:@"xml_file"];
    [xml_file setStringValue:@"********xml_file*******"];
    [task_in_progress addChild:xml_file];
    [xml_file release];

    NSXMLElement *task_id = [[NSXMLElement alloc] initWithName:@"task_id"];
    [task_id setStringValue:@"********task_id*******"];
    [task_in_progress addChild:task_id];
    [task_id release];

     NSXMLElement *create_time = [[NSXMLElement alloc] initWithName:@"create_time"];
     [create_time setStringValue:@"********create_time*******"];
     [task_in_progress addChild:create_time];
     [create_time release];

     NSXMLElement *receive_time = [[NSXMLElement alloc] initWithName:@"receive_time"];
     [receive_time setStringValue:@"********receive_time*******"];
     [task_in_progress addChild:receive_time];
     [receive_time release];

    NSXMLElement *input = [[NSXMLElement alloc] initWithName:@"input"];
    [input setStringValue:@"********input*******"];
    [task_in_progress addChild:input];
    [input release];

    [task_in_progress release];

    NSXMLDocument *xmlRequest = [NSXMLDocument documentWithRootElement:client_state];
    [client_state release];
    NSLog(@"XML Document\n%@", xmlRequest);
     NSData *xmlData = [xmlRequest XMLDataWithOptions:NSXMLNodePrettyPrint];
    [xmlData writeToFile:@"client_state.xml" atomically:YES];
    [xmlRequest release];
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:51:52.330

我犯了一个愚蠢的错误。我想到了。如果其他人正在阅读本文并感到好奇，那么所有根类型节点都不应该有一个值。我使用“< task_in_progress”作为节点，所以我必须在其声明之后删除该行：

```
//delete this:  Its a root, not a node w/ a value
 [task_in_progress setStringValue:@"********task_in_progress*******"]; 
```

# sql - 需要 SQL Server 查询帮助

> ID：10424799
> 
> 赞同：0
> 
> 时间：2012-05-03T03:43:03.057
> 
> 标签：sql, sql-server

当我尝试以下查询时，零行受到影响。有人可以帮我解决这个问题吗？

```
UPDATE PLAN 
SET PLANID = (SELECT PLANID FROM MODE WHERE [NAME]='Sam')
WHERE CUSTOMERID IN (SELECT CUSTOMERID FROM ENTITYCUSTOMER WHERE EMPID = 707) 
```

`(SELECT PLANID FROM MODE WHERE [NAME]='Sam')`将返回一个代码

`(SELECT CUSTOMERID FROM ENTITYCUSTOMER WHERE EMPID = 707)`可能返回多个值。

请帮助需要解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:48:30.867

```
SELECT PLANID FROM MODE WHERE [NAME]='Sam' 
```

'MODE' 表不得键入 PLANID；因此它无法将特定值绑定到更新。一种选择是创建一个游标，并读取要更新的正确值。另一种方法是使用您使用的任何客户端代码语言（可能是 .net 语言？）

# android - Android中将图像保存在数据库中的缺点是什么？

> ID：10424802
> 
> 赞同：2
> 
> 时间：2012-05-03T03:44:16.787
> 
> 标签：android

我正在制作一个应用程序，在该应用程序中，我从相机拍照并通过在 ByteArray 中压缩保存在数据库中，但我已经读过，如果有各种大量图像，则应用程序的处理速度可能会因从数据库中读取图像而变慢，所以什么最好存储图像（在内存或 sdcard 中）并在 ListView 中显示？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:53:05.530

将图像保存到您的 SD 卡。最好的方法是使用 ImageCache。

[缓存图像。](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T03:53:58.077

在您的数据库中存储图像会减慢您的查询速度，并且总体上通常是一个坏主意。

也看到这个[SO 问题](https://stackoverflow.com/questions/10416059/pros-and-cons-of-saving-image-in-sqllite)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T04:01:55.637

最好的方法是将图像存储在带有单独文件夹的 SD 卡中。（使用内部存储器不会有帮助，因为它会占用安装其他应用程序所需的空间。）

每次加载应用程序时，请阅读文件夹的内容并填充您的列表。您不需要为它维护单独的数据库。使用[缓存位图](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)来获得更好的代码性能。

最佳实践将根据我的意见

1.  确保您的缓存使用[SoftReferences](http://developer.android.com/reference/java/lang/ref/SoftReference.html)，这样您可以确保您不会耗尽内存，并且始终可以在丢失旧位图的“费用”上加载新位图。
2.  使用 Canvas 的 drawBitmap 方法将大型位图绘制得更小。
3.  确保防范[OutOfMemoryError](http://developer.android.com/reference/java/lang/OutOfMemoryError.html)，并注意它是 Throwable 的子类，而不是 Exception 的子类，因此`catch(Exception e)`子句不会捕获它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T03:50:33.097

将图像存储在任何数据库中都是一个坏主意，缓慢会占用更多空间等。我所知道的最佳选择是将这些图像的路径或链接存储在数据库中，并将实际文件存储在一些存储设备（如 sdcard 或内部存储设备）上，如果这些图片很大的话或者会占用大量空间，我会将它们放在 sdcard 上。

# java - 如何在查询字符串中传递多个参数 openlaszlo

> ID：10424803
> 
> 赞同：1
> 
> 时间：2012-05-03T03:44:25.800
> 
> 标签：java, openlaszlo

如何在查询字符串 openlaszlo 中传递多个参数？我收到编译时错误

当我在两个参数之间使用'&'。

示例代码：

```
LzBrowser.loadURL("../modules/Index.jsp?"base=canvas.base&id=canvas.Id,"fraMain"); 
```

有人请帮助我在查询字符串 openlaszlo 中传递多个参数。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:18:38.153

通过使用 & 我们可以做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T10:25:52.407

您可能会收到编译错误，因为您没有在方法中使用该指令，例如

```
<method name="someMethod"><![CDATA[

]]></method> 
```

这是 XML 规范所要求的。如果您不使用 CDATA 指令，则标记中的所有 & 符号都将被视为 XML 实体。

请记住，查询字符串的长度取决于浏览器。如果您只有有限数量的参数，则此方法将起作用。如果要发送大量数据，则必须发布数据。

另一种选择是将数据集与 LzParam 类结合使用。对于名称为*dsSendData*的数据集，您可以添加多个参数，如下所示：

```
<method name="sendData" args="action">
  var d=canvas.datasets.dsSendData;
  var p=new LzParam();  
  p.addValue("param1", "value1", true);
  p.addValue("param2", "value2", true);
  d.setQueryString(p);  
  d.doRequest();
</method> 
```

有关每个浏览器允许的查询字符串长度的更多信息，请查看此讨论[查询字符串的最大可能长度是多少？](https://stackoverflow.com/questions/812925/what-is-the-maximum-possible-length-of-a-query-string)

# c++ - boost::variant 的序列化

> ID：10424804
> 
> 赞同：0
> 
> 时间：2012-05-03T03:44:33.993
> 
> 标签：c++, serialization, boost, c++11, boost-variant

> **可能重复：**
> [序列化原始 boost::variant 是否安全？](https://stackoverflow.com/questions/1194842/is-it-safe-to-serialize-a-raw-boostvariant)

我想序列化一个 boost::variant 类型的非 POD 类。你能告诉我这是否可能并告诉我怎么做吗？

```
typedef boost::variant<macro,module> mvar 
```

# c# - Aspose tiff 转换后的 PDF 在 Adob e 而不是 Foxit 中打开

> ID：10424806
> 
> 赞同：0
> 
> 时间：2012-05-03T03:44:57.373
> 
> 标签：c#, pdf-generation, aspose

嗨，我正在将大量单页扫描的 .tiff 图像转换为多页 pdf。通常我会使用 iText 或 PDFSharp，但我被介绍给 Aspose 并将其用作该项目的测试（具有一些很酷的功能可以使图像去饱和并节省空间，效果非常好 - tb 的 tiff 大约是 200gb 的 PDF）。我遇到了一个奇怪的错误：当在 adobe 阅读器中打开转换后的 pdf 时它很好但是当在 foxit 中打开时它看起来像一个页面高条形码？

出于所有密集目的，我使用了这个[代码示例](http://www.aspose.com/docs/display/pdfnet/performance+improvement+while+converting+tiff+to+pdf)

有没有人遇到过这个问题？这是最新的稳定 adobe 和 Foxit 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:59:52.143

我叫 Nayyer，是 Aspose 的支持开发人员，负责 Aspose.Pdf 产品系列。根据您的问题描述，我已使用[Aspose.Pdf for .NET 6.9.0](http://www.aspose.com/community/files/51/.net-components/aspose.pdf-for-.net/entry375025.aspx)将示例 TIFF 图像转换为 PDF 格式，并且可以在 Foxit Reader 5.3.0.0423 和 Adob​​e Reader 10.1.3 中打开生成的 PDF 没有任何问题. 您能否尝试使用最新版本，如果您仍然遇到同样的问题，请您分享源 TIFF 图像，以便我们最终测试场景。对于给您带来的不便，我们深表歉意。

# greasemonkey - Greasemonkey：添加打印按钮 - 打印和“打印友好”样式的 div

> ID：10424809
> 
> 赞同：1
> 
> 时间：2012-05-03T03:45:37.263
> 
> 标签：greasemonkey

我创建了一个greasemonkey脚本，目的是：

*   将打印收据按钮添加到 3rd 方 Web 应用程序页面
*   在新窗口中将收据打印机友好样式添加到 div
*   打印此窗口

按钮出现了，但它不会触发我的函数，此时它只是打印 div。

这是我所在的位置：

```
var scriptElement = document.createElement('script');
scriptElement.type = 'text/javascript';

scriptElement.innerHTML =  'function printReceipt() { \
var divToPrint=document.getEelementById("loanTable"); \
newWin= window.open(""); \
newWin.document.write(divToPrint.outerHTML); \
newWin.print(); \
newWin.close(); \
}';

document.getElementsByTagName("head")[0].appendChild(scriptElement);

window.addButton = function () {
    // Get the location on the page where you want to create the button
    var targetDiv = document.getElementById('newcheckout');

    // Create a div to surround the button
    var newDiv = document.createElement('div');
    newDiv.setAttribute('id', 'autoCheckOrder');

    // Create the button and set its attributes
    var inputButton = document.createElement('input');
    inputButton.name = 'autoCheckOrderButton';
    inputButton.type = 'button';
    inputButton.value = 'Print Receipt?';
    inputButton.setAttribute("onclick", "printReceipt();");

    // Append the button to the div
    newDiv.appendChild(inputButton); 
    targetDiv.appendChild(newDiv);
}
addButton(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:05:51.253

这一行有一个错字：

```
var divToPrint=document.getEelementById("loanTable"); \ 
```

将其更改为：

```
var divToPrint=document.getElementById("loanTable"); \ 
```

* * *

或者，将此行添加到脚本的[元数据部分](http://wiki.greasespot.net/Metadata_Block)：

```
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js 
```

那么整个脚本就变成了：

```
$("#newcheckout").append ('<div id="autoCheckOrder"></div>');
$("#autoCheckOrder").append ('<button>Print Receipt?</button>');

$("#autoCheckOrder button").click ( function () {
    var divToPrint  = document.getElementById ("loanTable"); 
    var newWin      = window.open (""); 
    newWin.document.write (divToPrint.outerHTML); 
    newWin.print(); 
    newWin.close(); 
} ); 
```

# twitter - 如何仅通过“文本”字段查找 Twitter“GET 搜索”推文？

> ID：10424813
> 
> 赞同：0
> 
> 时间：2012-05-03T03:46:09.983
> 
> 标签：twitter

如何仅通过“文本”字段查找 Twitter“GET 搜索”推文？不是由“from_user”和其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T03:55:39.350

您不能仅将 q 参数与标准搜索端点一起使用吗？

像这样的东西：`http://search.twitter.com/search.json?q=searchTerm`

# java - 如何在java中将字节[]类型转换为证书类型？

> ID：10424817
> 
> 赞同：3
> 
> 时间：2012-05-03T03:46:40.733
> 
> 标签：java, certificate, bytearray

我有一个`byte[]`证书数据，我想将此`byte[]`类型更改为`Certificate`类型。我怎样才能做到这一点？

现在我用`CertificateFactory.generateCertificate(InputStream inStream)`.

```
byte[] csr = getCSR(cn, ou, org, loc, state, country,email);
CertificateFactory  cf = CertificateFactory.getInstance("X.509");
ByteArrayInputStream bais = new ByteArrayInputStream(csr);
Certificate certificate = cf.generateCertificate(bais); 
```

但是发生错误**Certificate certificate = cf.generateCertificate(bais);** 在这条线上。

错误：**java.security.cert.CertificateParsingException: java.io.IOException: ObjectIdentifier() -- 数据不是对象 ID（标签 = 49）**

为什么会出现这个错误？这段代码有什么问题？请解释一下。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T03:52:45.390

您可以使用它[`CertificateFactory.generateCertificate(InputStream inStream)`](http://docs.oracle.com/javase/6/docs/api/java/security/cert/CertificateFactory.html#generateCertificate%28java.io.InputStream%29)来生成证书。

这是一个生成 X509 证书的示例：

```
CertificateFactory cf   = CertificateFactory.getInstance("X.509");
Certificate certificate = cf.generateCertificate(new ByteArrayInputStream(buf)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T16:22:15.867

当我尝试在 CSR 上使用 CertificateFactory.generateCertificate 时，我遇到了同样的错误。所以我认为你的问题可能是一样的；即您的字节数组不包含证书，但证书签名请求。如果您确实需要阅读证书签名请求（就像我一样），请使用以下代码（受[http://www.journaldev.com/223/generating-a-certificate-signing-request-using-java-api](http://www.journaldev.com/223/generating-a-certificate-signing-request-using-java-api)启发） ：

```
导入 sun.security.pkcs.PKCS10；
...
PKCS10 csr = new PKCS10(Base64Utils.decode(csrPem1.getBytes()));

```

使用 Base64Utils 取决于输入数据的格式。

# spring - Spring 3 控制器映射冲突

> ID：10424825
> 
> 赞同：1
> 
> 时间：2012-05-03T03:47:46.597
> 
> 标签：spring, controller, mapping

我的主控制器为公共用户服务。它具有以下映射：

```
@Controller
@RequestMapping(value="/") 
public class HomeController extends BaseController {

@RequestMapping("/") // handles www.somesite.com
public ModelAndView request(Model model) {

@RequestMapping("/{contentId}")  // handles www.somesite.com/sports
public ModelAndView requestWithContentId(@PathVariable String contentId, Model model) {

@RequestMapping("/{contentId}/**") // handles www.somesite.com/sports/hockey/nhl , etc
public ModelAndView requestWithContentId2(@PathVariable String contentId, Model model) { 
```

我还有一组管理控制器映射到匹配 /admin* 的路径。这是一个例子：

```
@Controller
@RequestMapping(value="/admin/article")
public class AdminArticleController extends BaseController 
```

1.  我发现我的主控制器映射具有更高的优先级。因此，对 /admin/article 的请求由主控制器处理，而不是由专用 AdminArticleController 处理。我怎样才能解决这个问题？

2.  我还注意到对位于 /static/default.css 中的样式表的请求也通过主控制器。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:40:26.330

更改您的 URL 方案。由于您刚刚演示的原因，在 Spring MVC 中使用变量启动 URL 非常糟糕。

要么将您的内容链接更改为类似的内容，要么为所有内容创建显式映射，`/content/{contentId}`即`/sports`...`/whatever`

作为最后的手段，如果你绝对不能改变你的 URL 方案对你的用户的外观，使用[Tuckey urlrewrite 之](http://www.tuckey.org/urlrewrite/)类的东西并重新编写：

```
/xyz -> /content/xyz 
```

除了“已知”上下文，如“管理员”或“静态”。

# blackberry - 从加载屏幕返回数据

> ID：10424833
> 
> 赞同：0
> 
> 时间：2012-05-03T03:48:34.617
> 
> 标签：blackberry

从这个页面实现加载屏幕时遇到问题

[黑莓请等待屏幕超时](https://stackoverflow.com/questions/9533148/blackberry-please-wait-screen-with-time-out)

它运行良好，但问题是我无法从此代码中获取字符串数据。

这个想法是我想在从 web 服务捕获 json 数据时加载屏幕，并将其作为字符串返回。但是我卡住了，因为下面的代码无法返回数据。

```
UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        UiApplication.getUiApplication().popScreen(thisScreen) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:33:46.700

您可以使用 an`Interface`来实现。当您调用该方法时`PleaseWaitPopupScreen.showScreenAndWait(Runnable, String)`（来自链接[BlackBerry Please Wait Screen with Time out](https://stackoverflow.com/questions/9533148/blackberry-please-wait-screen-with-time-out)），您可以在该方法上添加另一个参数。如果一个接口实例用作第三个参数，则该接口的回调方法可用于通知`PopupScreen`关闭事件。您可以尝试以下步骤。

创建一个接口，定义回调方法。

```
interface PopupScreenCloseListener {
    // Invoke this method when PopupScreen gets closed.     
    public void popupScreenClosed();
} 
```

实现接口并将其附加为 的第三个参数`showScreenAndWait`。还可以在回调方法上获取 PopupScreen 关闭事件通知。

```
class MyClass implements PopupScreenCloseListener {
    public void showWaitingPopupScreen(final Runnable runThis, String text) {
        // append the interface, PopupScreenCloseListener as third parameter
        PleaseWaitPopupScreen.showScreenAndWait(runThis, text, this);
    }

    public void popupScreenClosed() {
        // listen PopupScreen close event here...
        // and add codes...
    }
} 
```

并修改该方法的当前实现，`showScreenAndWait`.

```
public static void showScreenAndWait(final Runnable runThis, String text, final PopupScreenCloseListener listener) {
    // old codes...
    // old codes...
            // Now dismiss this screen
            UiApplication.getUiApplication().invokeLater(new Runnable() {
                public void run() {
                    UiApplication.getUiApplication().popScreen(thisScreen);

                    // notify PopupScreen close event.
                    if (listener != null) {
                        listener.popupScreenClosed();
                    }

                }
            });
    // old codes...
    // old codes...
} 
```

# java - 当我尝试从小程序调用方法时，出现“对象不支持此属性或方法”

> ID：10424834
> 
> 赞同：2
> 
> 时间：2012-05-03T03:48:44.707
> 
> 标签：java, javascript, html, css, applet

“对象不支持此属性或方法”发生在 javascript 中，并停在为 Liferay Portal 处理来自 applet 的方法调用的行处

javascript片段：

```
<script type="text/javascript">
    function processSigning(){
        var applet = document.applets["SignApplet"];
        var path_to_certificate = document.getElementById("certificate").value;
        var pass = document.getElementById("password").value;
        var filePath = document.getElementById("documentSign").value;
        applet.filePath = document.getElementById("documentSign").value;

        //at this line, call of method from applet, javascript stops, but applet has this method
        //and it's public
        applet.profileTestPKCS12(path_to_certificate, pass);

        document.getElementById("file").value = applet.getDocumentString(filePath);
        document.getElementById("sign").value = applet.getSignString();
        document.getElementById("cert").value = applet.getCertificateString();
        document.forms['mainForm'].submit();
//        document.getElementById("mainForm").submit();

    }
</script> 
```

html 的小程序片段：

```
<APPLET name="SignApplet" mayscript code="SignApplet.class" archive="<%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/SignApplet.jar")%>, <%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/crypto.tsp.jar")%>, <%=renderResponse.encodeURL(renderRequest.getContextPath() + "/lib/crypto.gammaprov.jar")%>" height=500 width=500 style="display:none;">
    <PARAM name="boxmessage" value="Please wait, while applet is loading">
</APPLET> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:03:07.557

```
<APPLET name="SignApplet" ... style="display:none;"> 
```

W3C 关于[“显示”属性](http://www.w3.org/TR/CSS2/visuren.html#display-prop)。

> (value) **none**
> 此值导致元素不出现在格式化结构中（即，在视觉媒体中，元素不生成框并且对布局没有影响）。后代元素也不生成任何框；**元素及其内容完全从格式化结构中删除。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T04:19:13.730

在小程序中你应该避免使用 display:none ..... 当你定义为 none 时，在可视媒体中元素不生成框并且对布局没有影响....所以最好尝试**visiblity:hidden**属性而不是**display:none** ...

# python - Python unittest：在测试方法内响应失败

> ID：10424836
> 
> 赞同：1
> 
> 时间：2012-05-03T03:49:05.160
> 
> 标签：python, unit-testing

**背景**

我试图弄清楚如何针对多个输入值运行单个单元测试，然后显示失败。这是我想到的那种事情的一个简单的演示：

```
from time import time
import unittest

def demo():
    while True:
        count = 0
        for i in xrange(10):
            count += 1
            yield int(time() * 1000) + count
        count = 0

class TestDemo(unittest.TestCase):
    def setUp(self):
        self.gen = demo()
        self.prev = next(self.gen)

    def test_always_bigger(self):
        for cycle in xrange(1000):
            curr = next(self.gen)
            self.assertGreater(curr, self.prev)
            self.prev = curr

if __name__ == '__main__':
    unittest.main() 
```

我发现最相似的问题是通过某种动态`test_<something>`方法创建（例如：1、2、3 [）](https://stackoverflow.com/questions/32899/how-to-generate-dynamic-unit-tests-in-python/32939#32939)或鼻子[生成器](http://readthedocs.org/docs/nose/en/latest/writing_tests.html#test-generators)[（](https://stackoverflow.com/questions/32899/how-to-generate-dynamic-unit-tests-in-python/34094#34094)[例如](https://stackoverflow.com/questions/2798956/python-unittest-generate-multiple-tests-programmatically/2799009#2799009)：[1、2](https://stackoverflow.com/questions/1193909/pythons-unittest-and-dynamic-creation-of-test-cases/1194029#1194029) [）](https://stackoverflow.com/questions/1193909/pythons-unittest-and-dynamic-creation-of-test-cases/1194012#1194012)来回答的。我希望在坚持标准库的同时基于不可预测的输入运行 1000 次迭代，因此这两种解决方案都不适合。简单循环（如上所示）在两个限制下效果很好：对于复杂的输入，导致测试失败的原因记录不足（我的真正问题）；并且，该方法中的单个故障使整个测试失败。`test_<...>`

**问题**

我可以忍受早期的失败，但是我怎样才能在不创建数千行成功输出的情况下获得导致失败的输入呢？

**未回答**

我尝试了kwarg`assert...`方法`msg`，但它确实只适用于库已经很好处理的那种琐碎案例。在上面的示例中，unittest 知道显示`long`导致断言失败的两个 s。我可以用 `self.assertGreater(curr, self.prev, msg="cycle %s" % cycle) 对此进行注释并提供很多关于失败的见解，但是在 assertDictEquals 上显示深度嵌套的字典是一团糟。

**理想的解决方案**

此[答案](https://stackoverflow.com/questions/284043/outputting-data-from-unit-test-in-python/284326#284326)显示了日志记录模块的有趣用途，但每次成功测试都会生成数千行输出。是否可以从测试方法中检测故障？就像是：

```
 def test_always_bigger(self):
        for cycle in xrange(1000):
            curr = next(self.gen)
            fail = self.assertGreater(curr, self.prev)
            if fail:
                log.debug('...')
            self.prev = curr 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:17:22.837

```
def test_always_bigger(self):
    for cycle in xrange(1000):
        curr = next(self.gen)
        try:
            self.assertGreater(curr, self.prev)
        except AssertionError: # raised by TestCase.fail, called by all asserts
            log.debug('...')
            raise
        self.prev = curr 
```

这实现了在失败的情况下进行日志记录的语义，然后继续失败。如果您想完成所有测试，我会执行以下操作：

```
def test_always_bigger(self):
    ex = None
    for cycle in xrange(1000):
        curr = next(self.gen)
        try:
            self.assertGreater(curr, self.prev)
        except AssertionError, ae:
            ex = ae # just remember it
            log.debug('...')
        self.prev = curr
    if ex:
        raise ex 
```

显然，这只会引发第一个`AssertionError`，但它会一直运行到完成，并且会独立记录所有失败。由于此函数仅代表框架的一个测试，因此您不能真正从中产生多个失败。

如果您出于某种原因需要访问所有异常，您可能能够摆脱以下情况（未彻底测试`unittest`）

```
def test_always_bigger(self):
    exes = []
    for cycle in xrange(1000):
        curr = next(self.gen)
        try:
            self.assertGreater(curr, self.prev)
        except AssertionError, ae:
            exes.append(ae)
            log.debug('...')
        self.prev = curr
    if exes:
        self.fail(exes)
        # if that doesn't work, try: raise AssertionError(exes) 
```

# .net - HttpListener：防火墙说不

> ID：10424838
> 
> 赞同：2
> 
> 时间：2012-05-03T03:49:39.183
> 
> 标签：.net, vb.net, httplistener, windows-firewall

我需要使用[HttpListener](http://msdn.microsoft.com/en-us/library/system.net.httplistener.aspx)的实例来获取设备的 Useragent 字符串（以及一些其他自定义 HTTP 标头），但我遇到了几堵墙（字面意思）。

第一个问题，在第二个问题解决之前我不会关心，是 HttpListener 需要管理员权限，而我的应用程序的其余部分不需要。

第二个问题是 Windows 防火墙阻止了我的应用程序的所有流量。这显然是个大问题。我不能无耻地要求我的用户关闭他们的防火墙（他们甚至可能不知道如何），我不能使用代码添加异常。我了解授予对接受外部世界命令的代码的访问权限的安全隐患，但这是我唯一的选择。

我应该怎么办？

**编辑** 我应该提到我已经尝试在端口 80 上监听，但这也不起作用。我可以让设备连接到我想要的任何端口或地址，这样就不用担心了。

**编辑2**

我正在考虑使用一个单独的网络服务器，它以一个简单的 GUID 作为参数，将 HTTP 标头信息存储在数据库中，并在请求时将其返回给我的应用程序。这通过将所有托管和解析逻辑移动到我控制的实体来解决这两个问题，客户端只需要使用 HTTP 获取请求。这对任何人来说似乎都是矫枉过正吗？

**编辑3**

现在我已经通过调用 netsh 临时添加防火墙例外来解决它

```
 Private Const Port As Integer = 55748

    Private Shared Sub AddException()
        DeleteException() ' to prevent duplicates

        Dim netsh As New Process()
        Dim arguments As String = "advfirewall firewall add rule name=""MyApp"" dir=in action=allow protocol=TCP localport=" + Port.ToString
        netsh.StartInfo.FileName = "netsh"
        netsh.StartInfo.Arguments = arguments
        netsh.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
        netsh.Start()
    End Sub

    Private Shared Sub DeleteException()
        Dim netsh As New Process()
        Dim arguments As String = "advfirewall firewall delete rule name=""MyApp"" dir=in protocol=TCP localport=" + Port.ToString
        netsh.StartInfo.FileName = "netsh"
        netsh.StartInfo.Arguments = arguments
        netsh.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
        netsh.Start()
    End Sub 
```

我的实际通话看起来像这样

```
 Public Shared Function GetDeviceInfo(ByRef device As Dune) As DeviceInfo
        Dim info As DeviceInfo
        AddException()

        ' HttpListener magic happens here

        DeleteException()
        Return info
    End Function 
```

这样防火墙上就会有一个临时的洞让我做我的工作。不过，应该有人有更好的主意...

# php - 我在哪里放置 str_replace(' ', '-', 以从 url 中删除空格并加载正确的 sql 数据

> ID：10424839
> 
> 赞同：0
> 
> 时间：2012-05-03T03:50:32.710
> 
> 标签：php, mysql, sql, url

在上一篇文章的帮助下，我可以在 url 中添加破折号，但是，一旦完成此任务，我就无法加载正确的页面。

部分php代码：

```
$query_getDisplay = sprintf("SELECT blog.title, blog.description, blog.keywords,
blog.blog_entry,  DATE_FORMAT(blog.updated, '%%M %%e, %%Y') AS formatted, 
blog.blogphoto FROM blog WHERE blog.category = 'videos'
AND DATE_FORMAT(blog.updated, '%%Y-%%m') = %s
ORDER BY blog.updated DESC", GetSQLValueString($var1_getDisplay2, "text"));

} elseif (isset($_GET['title'])) {
  $var2_getDisplay3 = $_GET['title'];

$query_getDisplay = sprintf("SELECT blog.title,blog.description, blog.keywords,
blog.blog_entry,  DATE_FORMAT(blog.updated, '%%M %%e, %%Y') AS formatted,
blog.blogphoto FROM blog WHERE blog.title = %s",
GetSQLValueString($var2_getDisplay3, "text"));

} else {

$query_getDisplay = "SELECT blog.title, blog.blog_entry, blog.description,
blog.keywords,  DATE_FORMAT(blog.updated, '%M %e, %Y') AS formatted,
blog.blogphoto FROM blog WHERE blog.category = 'videos' ORDER BY blog.updated DESC
LIMIT 2";

}

$getDisplay = mysql_query($query_getDisplay, $check_mag) or die(mysql_error());
$row_getDisplay = mysql_fetch_assoc($getDisplay);
$totalRows_getDisplay = mysql_num_rows($getDisplay);
?> 
```

URL 正常工作的代码如下所示

```
 <div id="recent">
      <h3>Recent Post</h3>
<ul>
        <?php do { ?>
          <li><a href="videos.php?title=<?php echo str_replace(' ',
             '-',$row_getRecent['title']); ?>"
             ><?php echo $row_getRecent['title']; ?></a></li>
          <?php } while ($row_getRecent = mysql_fetch_assoc($getRecent)); ?>
<li> <a></a></li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:21:05.553

我不确定你为什么要运行`str_replace`，`URL`但我想你想要正确的 Url 编码.. 你应该尝试`urlencode` [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

```
urlencode($row_getRecent['title']); 
```

# php - 从目录下载最新导出的文件

> ID：10424846
> 
> 赞同：-1
> 
> 时间：2012-05-03T03:51:02.177
> 
> 标签：php, mysql, csv, download, directory

我有一个脚本，它将文件从 MySQL 数据库导出到 CSV 文件。我想创建一个链接以从目录下载最新文件。有没有办法用 PHP 做？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:13:09.897

您可以比较该文件夹中所有文件的文件修改时间并获取最新的

```
$lastestFile = "";
$lastestTime  = 0 ;
$path = "../";

foreach ( new DirectoryIterator ( $path ) as $file ) {
    if ($file->getBasename () == "." || $file->getBasename () == "..")
        continue;

    if($lastestTime < $file->getMTime() )
    {
        $lastestTime =  date("Y-m-d g:i:s",$file->getMTime());
        $lastestFile = $file->getBasename();
    }
}

var_dump($lastestFile,$lastestTime); 
```

输出

```
string 'webservice' (length=10)
string '2012-04-19 11:15:50' (length=19) 
```

# php - 在 php 中将数组数组导出到 Excel

> ID：10424847
> 
> 赞同：8
> 
> 时间：2012-05-03T03:51:09.133
> 
> 标签：php, arrays, excel

我在每个子数组的开头都有一个数组数组是列的标题，后面是我要填充列的整数。它看起来像这样：

```
Array ( [0] => Array ( [0] => How was the Food? [1] => 3 [2] => 4 ) [1] => Array ( [0] => How was the first party of the semester? [1] => 2 [2] => 4 [3] => 0 ) ) 
```

有没有办法分解数组并将其导出到 Excel？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-03T04:05:46.517

Excel可以直接打开csv文件...试试

```
$array = Array (
        0 => Array (
                0 => "How was the Food?",
                1 => 3,
                2 => 4 
        ),
        1 => Array (
                0 => "How was the first party of the semester?",
                1 => 2,
                2 => 4,
                3 => 0 
        ) 
);

header("Content-Disposition: attachment; filename=\"demo.xls\"");
header("Content-Type: application/vnd.ms-excel;");
header("Pragma: no-cache");
header("Expires: 0");
$out = fopen("php://output", 'w');
foreach ($array as $data)
{
    fputcsv($out, $data,"\t");
}
fclose($out); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T19:33:34.073

如果您真的想将数组导出到 excel，请查看[PHPReport](http://vernes.github.com/PHPReport/)。我编写了该类以简化使用 phpexcel 的导出。它支持 xls 和 xlsx。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-13T10:17:04.187

将数组导出到 excel 的最佳方法是在这里。

```
 $data = array(
         '0' => array('Name'=> 'Parvez', 'Status' =>'complete', 'Priority'=>'Low', 'Salary'=>'001'),
         '1' => array('Name'=> 'Alam', 'Status' =>'inprogress', 'Priority'=>'Low', 'Salary'=>'111'),
         '2' => array('Name'=> 'Sunnay', 'Status' =>'hold', 'Priority'=>'Low', 'Salary'=>'333'),
         '3' => array('Name'=> 'Amir', 'Status' =>'pending', 'Priority'=>'Low', 'Salary'=>'444'),
         '4' => array('Name'=> 'Amir1', 'Status' =>'pending', 'Priority'=>'Low', 'Salary'=>'777'),
         '5' => array('Name'=> 'Amir2', 'Status' =>'pending', 'Priority'=>'Low', 'Salary'=>'777')
        );
        $filename =  time().".xls";      
        header("Content-Type: application/vnd.ms-excel");
        header("Content-Disposition: attachment; filename=\"$filename\"");

        ExportFile($data);
        function ExportFile($records) {
            $heading = false;
                if(!empty($records))
                  foreach($records as $row) {
                    if(!$heading) {
                      // display field/column names as a first row
                      echo implode("\t", array_keys($row)) . "\n";
                      $heading = true;
                    }
                    echo implode("\t", array_values($row)) . "\n";
                }
            exit;
        } 
```

# android - Android 模拟器无法正常工作

> ID：10424848
> 
> 赞同：2
> 
> 时间：2012-05-03T03:51:21.800
> 
> 标签：android, android-emulator

我已经从 android 站点安装了所有必要的文件，但是当我运行我的模拟器时，它只显示“ANDROID”而没有别的。我正在使用英特尔双核 (2.20GHz)、华硕主板和 3gb 内存。什么是我无法理解的问题.. 甚至我的一个朋友使用英特尔双核（1.80GHz）和 1gb 的 RAM 运行顺利，那么我的问题是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T03:56:24.740

模拟器很慢，因为它模拟了一个完全不同的架构（arm），如果这是你第一次启动它，它必须创建内存文件来模拟你告诉它的 SD 卡在那里。

我敢打赌，您根本没有等待足够长的时间来启动它。

您可以通过选中保存快照并从它们开始的选项来节省一些时间（它至少会在第一次之后节省您的开始时间）。另一个模拟器加速是打开您要运行的任何应用程序的运行配置，单击“目标”选项卡，然后选中“禁用启动动画”框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:36:25.873

或者您可能想查看新 SDK 附带的 GPU 支持。它要快得多[http://android-developers.blogspot.com/2012/04/faster-emulator-with-better-hardware.html](http://android-developers.blogspot.com/2012/04/faster-emulator-with-better-hardware.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:54:54.123

模拟器必须正在启动。就等着吧。时间取决于你的机器。

# javascript - 在 Google Map V3 上绘制阴影区域 - Javascript

> ID：10424850
> 
> 赞同：2
> 
> 时间：2012-05-03T03:51:36.330
> 
> 标签：javascript, google-maps, google-maps-api-3

[地图阴影 http://demo.silkea.com/map_shade.png](http://demo.silkea.com/map_shade.png)

例如，我正在尝试完成绘制参考区域。只是阴影，静态，没有进一步的用户输入或更改。

尝试使用 Javascript 和 Google Map V3 来完成 - 可以找到动态而非静态绘图的示例。

任何帮助表示赞赏

* * *

得到了她...这是给其他人的...谢谢您的建议...

```
 <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
 <script type="text/javascript">

 function initialize() {
 var myLatLng = new google.maps.LatLng(51.176630373, -114.47321937);
 var myOptions = {
  zoom: 15,
  center: myLatLng,
  mapTypeId: google.maps.MapTypeId.HYBRID
 };

 var mapsquare;

 var map = new google.maps.Map(document.getElementById("map_canvas"),
    myOptions);

 var squareCoords = [
 new google.maps.LatLng(51.179858807660786, -114.47836921691896),
 new google.maps.LatLng(51.173563152178794, -114.47836921691896),
 new google.maps.LatLng(51.173563152178794, -114.46892784118654),
 new google.maps.LatLng(51.179858807660786, -114.46892784118654)
];

 // Construct the polygon
 mapsquare = new google.maps.Polygon({
  paths: squareCoords,
  strokeColor: "#FF0000",
  strokeOpacity: 1,
  strokeWeight: 1,
  fillColor: "#FF0000",
  fillOpacity: 0.35
 });

 mapsquare.setMap(map);
 }
 </script>
 </head>
 <body onload="initialize()">

 <br><br>

 NW Marker <br>
 51.179858807660786  &nbsp;&nbsp;&nbsp;  -114.47836921691896
 <br><br>
 SE Marker<br>
 51.173563152178794 &nbsp;&nbsp;&nbsp;   -114.46892784118654
 <br><br>
 <div id="map_canvas" style="width: 850px; height: 450px;"></div>

 <br><br>

 <br><br>
 </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:31:45.157

听起来[InfoBox 可以满足](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)您的需求；它的功能类似于地图上的标签。或者，如果您需要一些可以精确定义特定坐标角的东西，您可以尝试使用[google.maps.Rectangle](https://developers.google.com/maps/documentation/javascript/reference#Rectangle)。

* * *

***跟进编辑：***

您的代码中的问题是 2 个坐标有问题，因此形状会扭曲以跟随坐标。如果您采用现有的形状坐标：

```
var squareCoords = [
    new google.maps.LatLng(51.179858807660786, -114.47836921691896),
    new google.maps.LatLng(51.173563152178794, -114.47836921691896),
    new google.maps.LatLng(51.179858807660786, -114.46892784118654),
    new google.maps.LatLng(51.173563152178794, -114.46892784118654)
]; 
```

只需颠倒最后两点的顺序，您将得到：

```
var squareCoords = [
    new google.maps.LatLng(51.179858807660786, -114.47836921691896),
    new google.maps.LatLng(51.173563152178794, -114.47836921691896),
    new google.maps.LatLng(51.173563152178794, -114.46892784118654),
    new google.maps.LatLng(51.179858807660786, -114.46892784118654)

]; 
```

这将正常工作。这是我运行本地单元测试的地图图像： ![在此处输入图像描述](../Images/8269400993199b26e7476d2c93ad5e5e.png)

# azure - 添加-PSSnapin Microsoft.WindowsAzure.ServiceRuntime 错误

> ID：10424854
> 
> 赞同：1
> 
> 时间：2012-05-03T03:52:17.013
> 
> 标签：azure

我正在尝试在[MSDN](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_vmrolelab_topic3)上运行练习，并在尝试运行 Add-PSSnapin Microsoft.WindowsAzure.ServiceRuntime 时在任务 2 中遇到错误：

Add-PSSnapin：由于以下错误，无法加载 Windows PowerShell 管理单元 Microsoft.WindowsAzure.ServiceRuntime：

```
The Windows PowerShell snap-in module C:\Program Files\Windows Azure Integration Components\v1.6\Powershell\Microsoft.WindowsAzure.ServiceRuntime.Commands.dll does not have required Windows PowerShell snap-in strong name Microsoft.WindowsAzure.ServiceRuntime.Commands, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
At line:1 char:13
+ Add-PSSnapin <<<<  Microsoft.WindowsAzure.ServiceRuntime
    + CategoryInfo          : InvalidArgument: (Microsoft.WindowsAzure.ServiceRuntime:String) [Add-PSSnapin], PSSnapIn
   Exception
    + FullyQualifiedErrorId : AddPSSnapInRead,Microsoft.PowerShell.Commands.AddPSSnapinCommand 
```

之前的所有任务都已顺利完成，任务 2 的步骤 2 指出“管理单元已与集成组件一起安装，并提供对 Windows Azure 运行时环境的访问”，这在之前的练习和任务中执行时没有出现问题。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:50:16.640

请尝试运行以下命令：

```
Set-ExecutionPolicy Unrestricted 
```

这将允许我们运行任何插件，即使插件没有经过强名称签名。但请注意，这可能会引入安全问题。因此，建议您在完成教程后恢复执行策略。

```
Set-ExecutionPolicy Restricted 
```

您也可以参考[http://technet.microsoft.com/en-us/library/dd347628.aspx](http://technet.microsoft.com/en-us/library/dd347628.aspx)了解更多信息

此致，

明旭。

# jquery - 两个url之间的jquery加载

> ID：10424855
> 
> 赞同：0
> 
> 时间：2012-05-03T03:52:36.420
> 
> 标签：jquery

我正在尝试以不同的时间间隔从 2 个不同的 URL 加载内容。理想情况下，我想加载一个 url 等待 10 秒加载另一个并一遍又一遍地重复。这就是我所拥有的，但它不能正常工作。它不断地来回快速加载网址，我无法阅读内容

```
setInterval(function(){
          $('#ticker').load('misc.php?users=10');
      }, 10000);

      setInterval(function(){
          $('#ticker').load('misc.php?news=10');
      }, 20000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:04:32.557

我有更好的建议

```
var links = ['misc.php?users=10', 'misc.php?news=10'];
var pointer = 0;

setInterval(function() {
     $("#ticker").load(links[pointer++ % links.length]);
}, '10000'); 
```

### [演示](http://jsfiddle.net/qmWCw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:30:57.980

您是否设置了超时，因为您想确保首先读取第一个 URL，然后按顺序读取第二个 URL？如果是这样的话，我可能会建议一个新的模式，就像这样......

```
(function($) {
    var fn1 = function () {
        $.ajax({ 
          url: 'misc.php?users=10'
        }).done(function (data) {
          // update #ticker html with new user data
        }).always(function () {
          fn2(); // whether we succeed or not, we move on to fn2
        });
      }
      , fn2 = function () {
        $.ajax({
          url: 'misc.php?news=10'
        }).done(function (data) {
          // update #ticker html with new news data
        }).always(function () {
          fn1(); // whether success or failure we start over on fn1
        });
      };

      // ... somewhere down the line ...

      $('#ticker').on('load', fn1); // start polling
})(jQuery); 
```

我们在这里所做的是以某种同步的方式进行异步调用，而不需要混乱的超时或间隔调用。这可以维护 URL 的顺序，而不会在 AJAX 请求中重叠或纠缠在一起。一个完成后，另一个重新开始，不断轮询，直到我们切换到不同的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T03:58:37.107

您可以尝试使用`.load`的回调函数。

```
$('#ticker').load('misc.php?users=10', function(){
    setInterval( function(){ 
        $('#ticker').load('misc.php?news=10'); 
    }, 10000 );
}); 
```

# ms-access - 临时更改打印机页面大小，然后使用 VBS 在 Access 2007 中恢复

> ID：10424859
> 
> 赞同：0
> 
> 时间：2012-05-03T03:53:00.973
> 
> 标签：ms-access, printing, vbscript

我正在更新 Access 前端。大多数情况下，用户在页面尺寸设置为 4"x6" 的自定义打印机上打印标签。需要定期在 Letter 8.5x11 上打印一份新报告。

这也来自普通打印机，我已经添加了让用户在打印报告之前快速更改当前打印机并将其设置回默认值的功能。但是，我仍在尝试弄清楚如何保存当前页面大小，将其更改为字母，然后恢复为标签打印大小，所有这些都在表单后面的 VBS 中。

我看到[打印机页面大小问题](https://stackoverflow.com/questions/2236754/printer-page-size-problem)

但这似乎没有帮助。我将尝试那里给出的步骤，但我也对宽度和高度值的确切单位（什么比例）感到困惑。这些点是不是我必须简单地通过 DPI 数学计算出为每个打印尺寸设置的高度和宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:54:38.137

如果您使用的是访问内部的报告，这些链接可能包含您要查找的内容：

[http://www.access-programmers.co.uk/forums/showthread.php?t=184762](http://www.access-programmers.co.uk/forums/showthread.php?t=184762)

[http://www.tek-tips.com/viewthread.cfm?qid=1267819](http://www.tek-tips.com/viewthread.cfm?qid=1267819)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:02:19.370

看起来测量值以缇为单位

1440 缇 = 1 英寸

搜索显示此页面包含有关更改打印机和属性的信息 [http://access.mvps.org/access/reports/rpt0009.htm](http://access.mvps.org/access/reports/rpt0009.htm)

# java - GAE/J Async Datastore API：如何做相当于 UNIX 选择？

> ID：10424860
> 
> 赞同：1
> 
> 时间：2012-05-03T03:53:02.113
> 
> 标签：java, google-app-engine, google-cloud-datastore

Java Google App Engine Async Datastore API 提供了一种方法来进行异步读取，然后稍后询问它是否已经完成，如果需要，可以使用可选的超时来阻止它。但是，我想做但找不到方法的一件事是相当于 UNIX 选择。

也就是说，我想：

1.  发出一堆，比如说，读取到数据存储，然后

2.  只是去睡觉，直到他们中的任何一个回来。

据我所知，API 要求我只循环通过异步读取返回的 Futures 并询问 isDone() 直到其中一个为真；这会消耗我付出的 CPU 时间。

我是否遗漏了什么，或者没有办法使用 GAE/J Async Datastore API 获得 UNIX 选择的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:48:28.070

丹和我离线讨论了这个问题。简短的回答是，目前没有直接的方法可以做到这一点，但应用引擎中的 java 和 python 都支持线程，所以你可以在用户空间中轻松地做到这一点。更重要的是，go 的 channel 和 select 语言原语正是这样做的，所以绝对值得一看。

# c# - ASP.Net 请求生命周期 - Application_BeginRequest

> ID：10424865
> 
> 赞同：9
> 
> 时间：2012-05-03T03:53:58.417
> 
> 标签：c#, asp.net, c#-4.0, iis-7

我的示例项目中有一个图像文件。我正在尝试如下 URL。

> [http://localhost:49334/Chrysanthemum.jpg](http://localhost:49334/Chrysanthemum.jpg)

`Application_BeginRequest event`我的文件中有一个`Global.asax`。

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
} 
```

**查询**- 当我通过直接输入上面的 URL 来请求上面的图像时，不会触发此事件。

* * *

**[FROM MSDN - HttpApplication.BeginRequest 事件](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.beginrequest.aspx)**- 当 ASP.NET 响应请求时，作为 HTTP 执行管道链中的第一个事件发生。

```
I want to make my all request to fire `Application_BeginRequest` Event 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T05:25:21.490

问题可能是因为 .jpg 扩展名默认未映射到 asp.net 并且由 IIS 处理。

如果您使用 IIS7，您可以通过将 runAllManagedModulesForAllRequests 设置为 true 来更改此设置。

```
<system.webServer>
 <modules runAllManagedModulesForAllRequests="true">
  ...
 </modules>
</system.webServer> 
```

如果仍然没有触发此事件，您可以尝试像这样更改 global.asax

```
<%@ Application Language="C#" %>

<script runat="server">

    public override void Init()
    {
        this.BeginRequest += new EventHandler(global_asax_BeginRequest);        
        base.Init();
    }

    void global_asax_BeginRequest(object sender, EventArgs e)
    {

    }    

</script> 
```

如果您只想处理 .jpg 文件，更好的方法是制作 HTTP 处理程序并配置web.config 中的**system.webServer > handlers**和**system.web > httpHandlers**部分来为 .jpg 请求运行此处理程序。

# python - python中的Ruby on Rails等价物

> ID：10424867
> 
> 赞同：5
> 
> 时间：2012-05-03T03:54:21.057
> 
> 标签：python, ruby-on-rails

我没有使用 Ruby 的经验，但我听说 Ruby on Rails 是一个很棒的框架，可以超快速地构建网站。它在 python 中的等价物是什么？如果没有，现有的python建站框架有哪些更接近它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T03:56:10.477

我认为[Django](https://www.djangoproject.com/)被认为是与 Rails 等效的 Python。[Django](https://www.djangoproject.com/)和 Rails都专注于快速开发。

为了帮助您入门，这里有一些相关资源：

*   Django 官方网站： http: [//www.djangoproject.com/](http://www.djangoproject.com/)

*   官方文档：[http ://docs.djangoproject.com/](http://docs.djangoproject.com/)
*   一本关于 Django 开发**的好书：http:** [//www.djangobook.com/](http://www.djangobook.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T04:00:57.147

Python 的 Ruby on Rails 等价物是 Django。

它是：

> 高级 Python Web 框架，鼓励快速开发和简洁、实用的设计。

我个人推荐[Python Web Development with Django](https://rads.stackoverflow.com/amzn/click/com/0132356139)，因为这是一本学习 Django 的好书（显然）。

您可以在此处了解有关 Django 的更多信息：[https ://www.djangoproject.com/](https://www.djangoproject.com/)

# ruby-on-rails-3 - brew install mongodb 错误：懦弱地拒绝`sudo brew install' Mac OSX Lion

> ID：10424872
> 
> 赞同：21
> 
> 时间：2012-05-03T03:54:56.573
> 
> 标签：ruby-on-rails-3, macos, mongodb, osx-lion, homebrew

我不确定为什么会收到此错误：

```
$ brew install mongodb
==> Downloading http://fastdl.mongodb.org/osx/mongodb-osx-x86_64-2.0.4.tgz
######################################################################## 100.0%
Error: Permission denied - /usr/local/var/log/mongodb 
```

所以我尝试用 sudo 运行它：

```
$ sudo brew install mongodb
Password:
Cowardly refusing to `sudo brew install' 
```

如果我尝试自己创建文件，我会得到：

```
Error: File exists - /usr/local/var/log/mongodb 
```

当您在 homebrew 的 github 上阅读有关错误的此线程时，它会变得更加有趣：

[https://github.com/mxcl/homebrew/issues/9953](https://github.com/mxcl/homebrew/issues/9953)

他们说 brew 不能写入文件，因为它不是 root，然后他们说这是因为他们认为它不应该以 root 身份运行。

这些是官方安装说明，怎么了？

如果您有更好的安装建议，那么我会忘记自制软件。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-03T04:29:31.803

懒惰（酿造）方式：

```
ls -al /usr/local/bin/brew #confirm brew ownership
sudo chown root:wheel /usr/local/bin/brew
sudo brew install mongodb
sudo chown <your user>:<your group> /usr/local/bin/brew  #revert ownership 
```

非酿造方式：

*   从 10gen 下载 mongodb 发行版：[http ://www.mongodb.org/downloads](http://www.mongodb.org/downloads)
*   在 /usr/local/bin/ 中安装文件
*   在 /etc/mongo.conf 中创建一个配置文件（最少，告诉它在哪里存储数据，并且可能告诉它只绑定到本地主机）：[http ://www.mongodb.org/display/DOCS/File+Based+配置](http://www.mongodb.org/display/DOCS/File+Based+Configuration)
*   创建一个启动脚本，调用`mongod -f /etc/mongo.conf`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T00:28:08.313

*我用不同的 brew 包（今天是 ImageMagick）*一遍又一遍地遇到同样的问题，所以我一直回到这个页面。我只是将上述说明的版本留给自己，也许其他人也会觉得它很方便

```
ls -al `which brew` # note user/group
sudo chown root:wheel `which brew`
sudo brew install <package name>
sudo chown <your user>:<your group> `which brew` # revert ownership 
```

使用`which brew`in back ticks 替代了您的 brew 路径。

*（以及如何避免反引号？）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-11T01:57:07.843

在意识到之前我一直收到这个错误——我是 SUDO SU'd！

换句话说，我有一个 root 提示并试图运行 brew install 。如果您的命令提示符末尾有 #，请不要尝试使用 brew 安装。

我对此感到愚蠢，但也许这对其他人有帮助。

# mysql - 合并一列sql中的特定行

> ID：10424873
> 
> 赞同：0
> 
> 时间：2012-05-03T03:55:00.770
> 
> 标签：mysql

我想合并列中的特定行，但我做不到！

例如，

我有三个表，它们是：

*   **表 1**：`ID, Name1`
*   **表 2**：`ID, Table1Id, Table3Id`
*   **表 3**：`ID, Name2`

表中的数据将如下所示：

```
Table 1                     table 2                     Table 3

ID - Name             ID- Table1Id- Table2ID             ID - Name
1 - A                       1 - 1 - 1                     1 - AE
2 - B                       2 - 1 - 2                     2 - AF
                            3 - 2 - 1 
```

当我加入时，表格将是：

加入表：

```
 table1Name - Table3Name
             A - AE
             A - AF
             B - AE 
```

我希望桌子看起来像这样>>>

```
Table
    Table1Name - Table3Name
        A - AE, AF
        B - AE 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:03:46.847

```
select tb1.name nameTb1, tb3.name nameTb3
  from table2 tb2
 inner join table1 tb1 on tb2.Table1Id = tb1.id
 inner join table3 tb3 on tb2.Table3Id = tb3.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:01:21.413

你用的是什么数据库？

试试看`CONCAT`。

所以它会在选择字段上像这样。

```
CONCAT(TABLE1.NAME, '-', TABLE3.NAME) 
```

对于这种情况，这是您的代码

```
SELECT CONCAT_WS('-',table1.name , GROUP_CONCAT(table3.name SEPARATOR ',')) tablename
  FROM table2
 INNER JOIN table1 ON table2.Table1Id = table1.id
 INNER JOIN table3 ON table2.Table3Id = table3.id
GROUP BY table1.name 
```

# android - AsyncTask 和泛型

> ID：10424874
> 
> 赞同：3
> 
> 时间：2012-05-03T03:55:04.863
> 
> 标签：android, generics, android-asynctask

我使用 AsyncTask 作为内部类，具有以下签名：

```
 public abstract class BaseFragmentActivity extends FragmentActivity {
    static final int PROGRESS_DIALOG = 0;
    Dialog progessDialog;

```
public abstract void displayData(T output);

@Override
protected Dialog onCreateDialog(int id) {
    if (id == PROGRESS_DIALOG) {
        ProgressDialog progressDialog = ProgressDialog.show(this, "",
                "Loading. Please wait...", true);
        progessDialog = progressDialog;
    }

    return progessDialog;
}

class PerformOPTask<T> extends AsyncTask<Void, String, T> {
    // connector=new JSONConnector();
    Connector connector;
    String curUrl;
    Class<T> clazz;

    PerformOPTask(String url, Class<T> curClazz) {
        //connector = new UnitTestConnector();
        connector = new JSONConnector();
        curUrl = url;
        clazz = curClazz;
    }

    @Override
    protected T doInBackground(Void... params) {

        return connector.getData(URLUtils.getFormattedUrl(curUrl),clazz);
    }

    @Override
    protected void onPostExecute(T output) {
        displayData(output);

    }
} 
```

}

public abstract class BaseListFragmentActivity extends BaseFragmentActivity implements OnItemClickListener, OnClickListener{

```
protected ListView mList;

/** Called when the activity is first created. */
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.table_list);
    CommonUtil.getActionBarWithBackButton(this,getLayoutInflater());
    mList=(ListView)findViewById(R.id.table_list_listView);
    mList.setOnItemClickListener(this);

}

public void onBackABButtonPressed(View view) {
    finish();
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}

@Override
public abstract void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3); 
```

}

public class ListAccountsActivity extends BaseListFragmentActivity {

```
protected Acct[] mItems;
private String[] mIcons;
protected boolean displayHandledBySubClass=false;

/** Called when the activity is first created. */
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    // Create an array of Strings, that will be put to our ListActivity
    // Log.i("MY INFO",this.runJSONParser().getAcct().toString());
    AccountData actData = new AccountData();
    //actData=(AccountData)
    new PerformOPTask<AccountData>(getString(R.string.get_account),AccountData.class).execute();
    showDialog(PROGRESS_DIALOG);
    //.getData(URLUtils.getFormattedUrl(getString(R.string.get_account)),actData);

}

@Override
public void onItemClick(AdapterView<?> lv, View view, int position, long id) {
    // super.onListItemClick(l, v, position, id);
    // Get the item that was clicked
    Acct account = (Acct) mList.getAdapter().getItem(position);
    Intent intent=new Intent(this,AccountDetailViewActivity.class);
    intent.putExtra("selectedAccount",account);
    startActivity(intent);
}

@Override
**public void displayData(ServerOutput output){**  //error here

    if(displayHandledBySubClass){
        //handle display in subclass
        handleDisplayData(output);
    }
    else {
        Acct[] accountArray = new Acct[((AccountData)output).getAccount().size()];
        mItems = ((AccountData)output).getAccount().toArray(accountArray);
        IWMArrayAdapter<Acct> adapter = new IWMArrayAdapter<Acct>(this, mItems);
        adapter.setIcons(mIcons);
        adapter.setArrowNeeded();
        //mList is superClassVariable
        mList.setAdapter(adapter);
        dismissDialog(PROGRESS_DIALOG);
        adapter.notifyDataSetChanged();
    }
}

public void handleDisplayData(SrOutput output){

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //Toast.makeText(this, "Tapped search", Toast.LENGTH_SHORT).show();
    super.onCreateOptionsMenu(menu);
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.list_servers_menu, menu);

    // Calling super after populating the menu is necessary here to ensure
    // that the
    // action bar helpers have a chance to handle this event.
    return true;
} 
```

} 我在外部类中的回调方法 displayData 有以下方法**签名**

```
public abstract <T> void displayData(T output); 
```

现在我想扩展我的外部类并根据我期望的响应对象的类型为扩展类实现不同的 displaydata 方法。

当我在子类中定义如下方法时，我收到错误，因为它不是有效的覆盖：

```
@Override
public void displayData(ServerOutput output){} 
```

Asynctask 被调用为：

```
new PerformOPTask<AccountData>(getString(R.string.get_account),AccountData.class).execute(); 
```

这样做的正确方法是什么。我是泛型的新手，所以我对这一切有点困惑。提前感谢您的帮助。

            回答 #1

赞同：2

时间：2012-05-03T04:27:02.970

在 doInBackground 中使用 String 而不是 Void

```
 @Override
        protected T doInBackground(String... params) {

            return connector.getData(URLUtils.getFormattedUrl(curUrl),clazz);
        } 
```

            回答 #2

赞同：1

时间：2012-05-03T04:24:55.953

对您的代码进行此更改。

```
public abstract class BaseFragmentActivity<T> extends FragmentActivity{
public abstract void displayData(T output);

class PerformOPTask extends AsyncTask<Void, String, T>

/* ListAccountsActivity*/
public class ListAccountsActivity extends BaseListFragmentActivity<ServerOut> { 
```

```

# java - 如何自动化 IntelliJ IDEA 11 项目的 Java 构建过程？

> ID：10424877
> 
> 赞同：9
> 
> 时间：2012-05-03T03:55:23.000
> 
> 标签：java, intellij-idea, continuous-integration, build-automation

我正在尝试为我正在处理的 Java 项目建立一个持续集成系统。我计划在前端使用 Jenkins 或类似的东西。Java 项目配置为使用 IntelliJ IDEA IDE，版本 11。问题是无法从命令行界面构建 IntelliJ IDEA 11 项目，这是必需的，以便它可以与 CI 前端 (Jenkins) 交互.

我研究过几个潜在的解决方案。它们如下。

## 潜在的解决方案＃1

使用 IntelliJ IDEA 的“生成 Ant 构建”功能。这个解决方案有两个问题：

1.  这意味着我将不得不维护生成的 ant 文件以及 IntelliJ idea 配置文件，这是我不想做的，或者我必须定期或即时以编程方式重新创建 ant 文件，这是不可行的因为也没有命令行界面。
2.  无论如何，它甚至都行不通。该项目相当复杂，因为有配置为排除的 Java 文件，并且生成的 ant 文件没有正确执行排除。此外，看起来甚至没有正确生成依赖项。（详尽地）搜索谷歌告诉我 IntelliJ 甚至不支持这个实用程序，应该“避免”它的使用。

## 潜在的解决方案＃2

使用 3rd 方应用程序动态生成 ant 构建文件，即[ant-intellij-tasks](http://code.google.com/p/ant-intellij-tasks/)。当我看到这个项目时，我非常兴奋，但不幸的是，它看起来自 2009 年以来就没有更新过，并且不适用于新版本的 IntelliJ IDEA。我找不到任何其他像这样的库是最新的并且可以工作。

## 一些附加说明

[此链接](http://plugins.intellij.net/wishlist/item/?wid=20)表明其他人也有类似的问题并想要一个命令行界面（该链接是对竞赛所需插件的描述 - 来源是 IntelliJ IDEA 本身）。

有没有其他人使用这个工具集设置构建自动化？你是怎么做到的？理想情况下，我正在寻找的答案不需要管理其他配置文件，并且允许我在命令行上键入一些内容并进行构建。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T04:54:05.180

将您的项目转换为适合 maven 比自定义 Maven 以适应您的项目结构更容易。

虽然你可以做后者，但大多数时候人们根本不会将他们的项目布局设计得很干净，在他们采用 maven 布局之后，他们的项目变得更易于管理。

如果您采用默认 maven 项目布局的良好模式，IDEA 将自动阅读并完全理解它 - 甚至共享您在 IDE 命令行中使用的相同编译器输出。IDEA 将使用 pom.xml 作为其配置文件。

你不能用 Ant 来做这件事，因为它是一个构建过程包装器。Maven 不仅是一种依赖管理机制——它是一个项目的抽象，IDE 可以使用它来配置自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:23:14.440

您可以使用 TeamCity 构建您的 IntelliJ 项目。这工作得很好，是自动化的，并且有许多插件可以让你运行命令行任务、ant 任务等。

这是我经常使用的工作流程之一。

TeamCity 用作常春藤存储库。所以你不必设置神器。

不过我确实喜欢maven。这完全取决于您的需求。只要您想以 Maven 方式做事，Maven 就很棒 - 这是一个非常好的工作流程。

据记录，很少有 IDE 能很好地处理 Maven 项目。IntelliJ 做得不错。

# c# - JSON API 的 .Net 选项？

> ID：10424884
> 
> 赞同：9
> 
> 时间：2012-05-03T03:56:30.010
> 
> 标签：c#, .net, wcf, asp.net-mvc-3

我需要创建一个 .Net api，它将返回将由移动应用程序使用的 JSON。

一种方法是只使用 MVC 应用程序并让我的控制器返回 JSON，因此转到 url.com/controller/action/params 会给我我的 JSON。

我听说创建 WCF 服务也是一个不错的选择。不过，我对 WCF 知之甚少。

各有优缺点吗？用作仅返回 JSON 的服务是否更可靠？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T07:00:38.127

另一个竞争者是[在自托管场景中使用 WCF 的](https://pfelix.wordpress.com/2012/03/05/asp-net-web-api-processing-architecture/)[ASP.NET Web API](http://www.asp.net/web-api) 。

有利有弊，但这一切都取决于您现在需要什么与后者，您的专业知识水平，技术承诺以及设计权衡是什么。

这取决于您所说的可靠是什么意思。一种技术不一定或多或少可靠。影响可靠性的因素有很多。

这些是少数几个优点/缺点中的一些，没有特定的顺序、偏好或完整性。

**ASP.Net MVC / WebApi / ServiceStack**

优点：

*   基本场景的设置和运行在几分钟内（让 URL 获取一些 JSON 数据）
*   配置简单。
*   REST 设置直接。
*   完全控制路由。
*   JSON 原生支持（ASP.NET Web API 可以自动将
    您的模型序列化为 JSON、XML 或其他格式，然后
    将序列化的数据写入 HTTP 响应
    消息的正文。）

缺点：

*   无法向消费者描述您的服务：目前还没有像 WSDL 这样可以告诉客户端数据类型、操作和服务要求的 API
*   仅传输安全 - 点对点安全
*   没有消息级别的安全性
*   没有服务发现协议（截至目前）
*   无消息路由
*   不支持多协议，例如 tcp
*   单一托管方案（IIS - 这也可以是专业的）

**WCF**

优点：

*   多协议支持
*   传输和消息安全
*   高度可配置和可互操作
*   [非常可扩展](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/14/wcf-extensibility.aspx)
*   支持各种消息传递场景，例如路由、双工、发布/订阅、排队等。
*   许多用于塑造消息和内部工作的旋钮
*   多种托管方案（IIS/WAS、Windows 服务、控制台）

缺点：

*   陡峭的学习曲线
*   [REST 故事弱](http://msdn.microsoft.com/library/bb412172.aspx)（是的 w​​ebHttpBinding 存在，但尝试向某人解释 TemplateURI 和 WebInvoke/Web get 和 BodyStyle）
*   很多旋钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T03:59:31.457

如果您正在寻找的只是一项服务，那么我建议您使用 WCF 之类的东西。但是，WCF 很麻烦，所以我建议使用像[ServiceStack](http://www.servicestack.net/)这样更简单的东西。它允许您使用基本的 POCO 创建服务。它还内置并准备好使用 JSON/XML/SOAP 进行响应（您无需执行额外操作）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T03:59:20.560

我真的会采用 WCF 方法。它将为您提供更大的灵活性，并允许您使用许多不同的协议运行服务，而不仅仅是 HTTP，例如。

# variables - MPLab / C prg / 变量

> ID：10424885
> 
> 赞同：0
> 
> 时间：2012-05-03T03:56:33.397
> 
> 标签：variables, mplab

我安装了 MPLab V8.43 并且刚刚安装了 C18 编译器进行编程。每当我尝试构建一个小的测试代码时，它都会在第一个变量声明处停止。它说有一个语法。

```
unsigned char counter; 
```

在我看来并没有错……甚至将其作为 unsigned char counter[1]; 它仍然向我抛出了一个语法错误。是什么赋予了？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:07:49.913

局部变量必须在块（在本例中为函数）的顶部声明。这是根据 C89 标准。

这些是可以接受的：

```
void functionname(void)
{
    unsigned char counter;

    /* rest of code */
}

void functionname(void)
{
    /* code */

    for (unsigned char counter = 0; counter<30; counter++)
    {
    }

} 
```

这是不可接受的：

```
void functionname(void)
{
    /* code */

    unsigned char counter = 0; 

    /* more code */

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:28:16.737

因为您有 char 数据类型的计数器变量。但它不是数组或字符串。

```
 so you can't access it by counter[1]. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-23T08:00:56.297

您可以在 main 中定义局部变量，但它们应该被定义，这样它们就不会跟随变量分配块或代码执行块。

这是 MPLAB C18 中的有效变量声明/定义：

```
void main ()
{
    /* Declare or Define all Local variables */
    unsigned char counter;   
    unsigned char count = 5;

    /* Assignment Block or the code Execution Block starts */ 
    conter++;
    count++; 
} 
```

但是，这是无效的，并且会导致“语法错误”：

```
void main ()
{
    /* Declare or Define all Local variables */
    unsigned char count = 5;

    /* Assignment Block or the code Execution Block starts */ 
    count++; 

    /* What??? Another variable Declaration / Definition block */ 
    unsigned char counter;     /* Hmmm! Error: syntax error */ 
} 
```

希望有帮助！

# node.js - extjs 与 node.js 后端？

> ID：10424887
> 
> 赞同：4
> 
> 时间：2012-05-03T03:56:47.263
> 
> 标签：node.js, extjs

是否有任何项目、示例、教程等可以显示 ExtJS 与 Node.js 一起用作后端？我特别关注实时协作的多个用户，但是任何与 ExtJS 和节点一起使用的东西都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:16:12.963

[这](http://www.alsonkemp.com/geekery/extjs-4-models-node-js/)是与 Node.js 一起使用的 ExtJS 的示例。还有另一个名为[SilkJS](http://www.silkjs.net/)的有趣项目（服务器端 javascript） 。你也应该看看它。[这](http://www.sencha.com/forum/showthread.php?161210-Using-SilkJS-ORM-and-ExtJS-Grids-Together)是使用 SilkJs 和 ExtJS 的示例。

由于 Node.js 是服务器端，因此将它与 ExtJS 一起使用应该不会有任何问题。ExtJS 不依赖于服务器端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-28T13:36:13.633

我在 Extjs 上做了一个例子，后端有节点。请通过 git

[https://github.com/tsuryap/ExtJsAndNodeExample](https://github.com/tsuryap/ExtJsAndNodeExample)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T18:14:15.367

SilkJS 足够快，它是实时的；甚至可能比节点更实时。

无论如何，ExtJS 在 FWIW 内部做了很多 Ajax。

# asp.net-mvc - 请求的表单身份验证失败。原因：提供的票已过期 - 每分钟发生一次

> ID：10424891
> 
> 赞同：2
> 
> 时间：2012-05-03T03:57:23.593
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7

我有一个 ASP.NET MVC3 应用程序正在我们的测试 Web 服务器（单个 IIS7）上死机。似乎 IIS 无法使会话保持活动状态。对事件日志的调查显示：

“请求的表单身份验证失败。原因：提供的票证已过期。”

有趣的是，这种情况几乎每 1 分钟就会发生一次。

Web.config 看起来不错，我检查了 .NET 的 machine.config——它没有任何对 validationKey 自动生成的引用。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:54:43.900

看起来这是一条信息级消息，可以使用此线程中的建议过滤掉：

[请求的表单身份验证失败。原因：提供的票已过期](https://stackoverflow.com/questions/2686324/forms-authentication-failed-for-the-request-reason-the-ticket-supplied-has-exp)

# java - Android TextToSpeech 其他库选项

> ID：10424895
> 
> 赞同：4
> 
> 时间：2012-05-03T03:58:11.597
> 
> 标签：java, android, text-to-speech

嗯，Android 官方 TextToSpeech 引擎非常简单易实现。我玩了一段时间，它完全按照它应该的方式工作。

但是这个引擎的一个缺点是它只有一个固定的女性声音，我必须说我不喜欢那个声音。从[这个](https://stackoverflow.com/questions/9815245/android-text-to-speech-male-voice)和[这个](https://stackoverflow.com/questions/5127444/texttospeech-change-voice)线程，我开始知道没有办法改变声音。

所以我的问题是，**是否还有其他可以与 android 一起使用的 TextToSpeech 库？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:07:56.433

谷歌在“alterntate android tts engine”上给出了一些：

*   [波莉](https://aws.amazon.com/polly/)（前身为 IVONA）
*   [Flite TTS](https://github.com/happyalu/Flite-TTS-Engine-for-Android/wiki/)
*   [SVOX](http://svoxmobilevoices.wordpress.com/)

# php - 使用 HTMLENTITIES 转义

> ID：10424897
> 
> 赞同：1
> 
> 时间：2012-05-03T03:58:31.430
> 
> 标签：php, opencart, html-entities, html-escape-characters

我试图在打开购物车网站的表单中转义一些 HTML - 它是带有会话数据的自定义编码，这让我很失望。目前我有：

```
<input type="text" value="<?php echo $this->session->data['persline_2']; ?>" name="persline_2" id="persline_2" class="keyboardInput" style="width:200px" maxlength="30" /> 
```

我试图使用：

```
<input type="text" value="<?php echo htmlentities$this->session->data['persline_2']; ?>" name="persline_2" id="persline_2" class="keyboardInput" style="width:200px" maxlength="30" /> 
```

但这并没有奏效。我认为`htmlentities`应该在变量之前开始。

这是在他们的 MVC 下使用 PHP 的开放式购物车仅供参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:07:48.893

尝试：`<?php echo htmlentities($this->session->data['persline_2']); ?>`注意括号`()`

# javascript - 如何根据两个选择器找到一个元素？

> ID：10424898
> 
> 赞同：0
> 
> 时间：2012-05-03T03:58:34.903
> 
> 标签：javascript, jquery, find, contains, belongs-to

我有一棵像这样的厄运树：

```
ul #navigation
    li .active
    ul
        li.active_li
        li
        li
    /ul
    li
    ul
        li.active_li
        li
        li
    /ul
/ul 
```

我想找到属于那个`li`类的`active_li`里面的一个类。:)`ul``li``active`

正如我们所看到的，有 2`li`个类别为`active_li`. 我只想要第一个

就像是：`$('#navigation').find('li.active').find('li.active)li').doSomething();`

这个选择器似乎不起作用

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:03:13.463

试试这个选择器：

```
$('#navigation li.active ul li.active_li')
                         ^^
                          \_ You can get rid of this, as <li> elements
                             exist only within <ul> elements. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:06:09.347

您可以使用

```
$('#navigation li.active li.active_li').each(function(){

}); 
```

并在运行第一个功能后将其标记为关闭。

或者，如果您只想选择第一个：

```
 $('#navigation li.active li.active_li').first(); 
```

# mysql - 用于查找多次出现的值的 SQL 查询

> ID：10424900
> 
> 赞同：3
> 
> 时间：2012-05-03T03:58:39.520
> 
> 标签：mysql, join, count

我有一个使用 MySQL 后端的小型赛车项目。我试图找到一个很好的查询来获取在超过两场比赛中排名前 3 位的所有车手的详细信息。这是一个小表格细分：

```
Drivers table:
driver_id, driver_name, driver_age, etc misc details

Entry table:
entry_id, driver_id, placed 
```

所以，通常这不会是一个大问题，因为我可以做 a`JOIN on driver_id`然后使用`WHERE on my 'placed'`column 来精简结果；但是，客户绝对必须有不止一次进入前三名的人。我只会在脚本方面处理它，但他们用来提取数据的应用程序非常奇怪。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T04:04:36.020

```
select *
from `Entry table`
where placed <= 3
group by driver_id 
having count(*) > 1 
```

或类似的东西...我知道您正在寻找 count 语句中的 having 子句

# ruby-on-rails - 如何动态声明这些实例方法？

> ID：10424903
> 
> 赞同：1
> 
> 时间：2012-05-03T03:59:14.950
> 
> 标签：ruby-on-rails, ruby, metaprogramming

我必须在 ActiveRecord 模型上实现这些方法以支持某些所需的视图功能。

我认为必须有一种更紧凑的方式来声明这些方法，可能涉及符号数组和`Array#each`调用。

有什么建议么？

（这些是旧列名，顺便说一句。）

* * *

```
class Contract < ActiveRecord::Base

  def start_date_displayed
    self.start_date.present? ? self.start_date.strftime("%-m/%-d/%Y") : ''
  end

  def start_date_displayed=(input)
    if input.present?
      self.start_date = Date.strptime input, '%m/%d/%Y'
    end
  end

  def end_date_displayed
    self.end_date.present? ? self.end_date.strftime("%-m/%-d/%Y") : ''
  end

  def end_date_displayed=(input)
    if input.present?
      self.end_date = Date.strptime input, '%m/%d/%Y'
    end
  end

  def ArrivalDate_displayed
    self.ArrivalDate.present? ? self.ArrivalDate.strftime("%-m/%-d/%Y") : ''
  end

  def ArrivalDate_displayed=(input)
    if input.present?
      self.ArrivalDate = Date.strptime input, '%m/%d/%Y'
    end
  end

  def Contract_ReceivedDate_displayed
    self.Contract_ReceivedDate.present? ? self.Contract_ReceivedDate.strftime("%-m/%-d/%Y") : ''
  end

  def Contract_ReceivedDate_displayed=(input)
    if input.present?
      self.Contract_ReceivedDate = Date.strptime input, '%m/%d/%Y'
    end
  end

  def Contract_FinalizedDate_displayed
    self.Contract_FinalizedDate.present? ? self.Contract_FinalizedDate.strftime("%-m/%-d/%Y") : ''
  end

  def Contract_FinalizedDate_displayed=(input)
    if input.present?
      self.Contract_FinalizedDate = Date.strptime input, '%m/%d/%Y'
    end
  end

  def Committee_Date_displayed
    self.Committee_Date.present? ? self.Committee_Date.strftime("%-m/%-d/%Y") : ''
  end

  def Committee_Date_displayed=(input)
    if input.present?
      self.Committee_Date = Date.strptime input, '%m/%d/%Y'
    end
  end

  # ...

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:29:08.510

```
class Contract < ActiveRecord::Base

  %w(start_date end_date).each do |attr_name|
     class_eval <<-METHOD_DEF
         def #{attr_name}_displayed
             self.#{attr_name}.present? ? self.#{attr_name}.strftime("%-m/%-d/%Y") : ''
         end

         def #{attr_name)_displayed=(input)
            if input.present?
              self.#{attr_name} = Date.strptime #{attr_name}, '%m/%d/%Y'
            end
         end

     METHOD_DEF
  end
end 
```

如果只为那些名称以日期结尾的列定义这些方法，那么

```
class Contract < ActiveRecord::Base

   self.column_names.grep(/date$/i).each do |column_name|

     class_eval <<-METHOD_DEF
         def #{column_name}_displayed
             self.#{column_name}.present? ? self.#{column_name}.strftime("%-m/%-d/%Y") : ''
         end

         def #{column_name)_displayed=(input)
            if input.present?
              self.#{column_name} = Date.strptime #{column_name}, '%m/%d/%Y'
            end
         end             
     METHOD_DEF

  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:42:56.063

最好尽可能避免简单的评估。

```
class Contract < ActiveRecord::Base
  class << self
    def attr_displayed *attrs
      attrs.each do |attr|
        displayed = :"#{attr}_displayed"

        define_method displayed do
          send(attr).present? ? send(attr).strftime("%-m/%-d/%Y") : ''
        end

        define_method :"#{displayed}=" do |input|
          if input.present?
            send :"#{attr}=", Date.strptime(input, '%m/%d/%Y')
          end
        end
      end
    end
  end

  attr_displayed :start_date, :end_date, :ArrivalDate, :Committee_Date,
                 :Contract_ReceivedDate, :Contract_FinalizedDate
end 
```

# ruby-on-rails - Rails 对象属性/数据库迁移默认值

> ID：10424906
> 
> 赞同：1
> 
> 时间：2012-05-03T03:59:26.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我在 Rails 中有一个带有布尔`is_subscriber`属性的 User 类。

我的数据库迁移文件的结构如下：

```
class AddIsSubscriberToUsers < ActiveRecord::Migration
  def change
    add_column :users, :is_subscriber, :boolean, :default => false    
  end
end 
```

但是，当我尝试创建一个新的用户实例时，（使用`create`控制器）我得到`is_subscriber`了`nil`. 我确保将其包含在我的`attr_accessible`列表中。

它发生在我的 Rails 应用程序和 IRB 中。

# haskell - 生成随机 GLfloat 值

> ID：10424911
> 
> 赞同：0
> 
> 时间：2012-05-03T04:00:14.620
> 
> 标签：haskell

如何在 Haskell 中生成*随机*GLfloat 值？

Random GLfloat 没有实例声明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:17:07.250

没有实例的时候，做一个实例。这是他们教给你的第一件事。

有很多方法，但最简单的可能是生成一种足够的分辨率，然后将其转换为 GLfloat：

```
instance Random GLfloat where
    random g = 
        let f :: Double
            (f,g2) = random g
        in (fromRational (toRational f), g2) 
```

`Double`应该足够了，因为这是一个 64 位浮点值，而`GLFloat`（包装`CFloat`）是一个 32 位浮点数。 `Float`应该足够了，但是我对浮点的细节还不够精通，无法确定这对所有平台都是正确的。

# python - Django 管理员添加表单 ajax 调用

> ID：10424912
> 
> 赞同：4
> 
> 时间：2012-05-03T04:00:30.353
> 
> 标签：python, ajax, django, django-admin, django-views

所以我之前在 Django/Ajax/Jquery 上取得了成功，但我想知道我是否可以在管理控制台中做到这一点。当用户转到“添加新”表单时，我希望他们填写邮政编码并根据该邮政编码，根据我在数据库中对应于该邮政编码的值过滤下一个字段中的可用选项代码。

我正在尝试查找处理该表单的 POST 的管理视图，但我对 django 相对较新，并且无法找到它。也许我想多了，有一个更简单的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T06:56:38.977

1.  **Create a view** that, given a zipcode, [responds with a json list](https://docs.djangoproject.com/en/3.0/topics/class-based-views/mixins/#more-than-just-html) of available choices (python)
2.  **[Override the admin template](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#overriding-admin-templates)** for the model that has the zip code field (templates)
3.  **Add a listener** to the zipcode's [keyup](http://api.jquery.com/keyup/) or [change](http://api.jquery.com/change/) event, that [queries the view](http://api.jquery.com/jQuery.getJSON/) and uses the response to filter the next field (javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-20T16:06:57.410

网址.py

```
from django.conf.urls import url

app_name = 'your_app'
urlpatterns = [
    url(r'^query/page/(?P<otherModelSlug>[a-zA-Z0-9]+)/?', PageYouQueryFrom.as_view(), name='query_page'),
    …
    # yourWebsite.com/your_app/util/kittens
    url(r'^util/(?P<fieldValue>[a-zA-Z0-9]+)/?', GetDataUtilitly.as_view(), name='get_data_util'),
] 
```

data_template.html

```
{{result_html}} 
```

page_you_want_to_ajax.html

```
{% extends "base.html" %}

{% block script-inline %}  
  $(document).ready( function () {
    $("#place_to_query").change(function() {
      var queryURL = "/your_app/util/" + $(this).val();
      queryBox = $(this)
      $.get({
        url: queryURL,
        contentType: "application/x-www-form-urlencoded",
      })
        .done(function( data ) {
          html = $( data ).text()
          queryBox.parent().after(html)
        });
    });
  });
{% endblock script-inline %}

{% block content %}
  {{ otherModel }} <!-- or it could be a specific  field -->
  <input id="place_to_query"></input>
  <!-- The ajax will go here afterwards-->
{% endblock content %} 
```

主视图 - PageYouQueryFrom.py

```
# this is a Class Based View, but you can use a function based one too
class PageYouQueryFrom(TemplateView):
    template_name = 'path/to/page_you_want_to_ajax.html'

    def get_context_data(self, **kwargs):
        context_data = super(PageYouQueryFrom, self).get_context_data(**kwargs)
        context_data['otherModel'] = get_object_or_404(OtherModel, slug=self.kwargs['otherModelSlug'])
        return context_data 
```

数据查询视图 - GetDataUtilitly.py

```
from django.views.generic import TemplateView
import requests
from pyquery import PyQuery

# this is a Class Based View, but you can use a function based one too
class GetDataUtilitly(TemplateView):
    template_name = 'path/to/data_template.html'
    def get_context_data(self, **kwargs):
        field_value = self.kwargs['fieldValue']
            page = requests.get('https://www.page.com?searchField=' + field_value)
            pq = PyQuery(page.content)
            # Get the (html) portion of what you want
            result_html = pq('div.c-table__row').html()
            return {'result_html': result_html} 
```

# c# - 图像翻译限制边界

> ID：10424914
> 
> 赞同：1
> 
> 时间：2012-05-03T04:00:57.227
> 
> 标签：c#, windows-runtime

我正在使用`RenderTransform`操作增量事件来翻译图像。如果弹开，图像会离开屏幕。如何限制图像留在网格内？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T18:25:45.450

您需要以不离开容器的方式处理增量事件。这是来自我早期的项目（_scatterViewItemTransform 是我的轻弹项目上的 CompositeTransform，它托管在容器内（一个 ItemsControl，其 ItemsPanel 设置为网格）：

```
protected override void OnManipulationDelta(ManipulationDeltaRoutedEventArgs e)
{
    // Manipulation delta does not take UI scaling into account
    var scaleString = Windows.ApplicationModel.Resources.Core.ResourceManager.Current.DefaultContext.QualifierValues["scale"];
    var scale = Double.Parse(scaleString) * 0.01;

    var x = _translateOrigin.X + e.Cumulative.Translation.X / scale;
    var y = _translateOrigin.Y + e.Cumulative.Translation.Y / scale;

    if (e.IsInertial)
    {
        while (x < Container.Padding.Left ||
            x > Container.ActualWidth - Container.Padding.Right)
        {
            if (x < Container.Padding.Left)
                x = -x + 2 * Container.Padding.Left;
            if (x > Container.ActualWidth - Container.Padding.Right)
                x = 2 * (Container.ActualWidth - Container.Padding.Right) - x;
        }

        while (y < Container.Padding.Top ||
            y > Container.ActualHeight - Container.Padding.Bottom)
        {
            if (y < Container.Padding.Top)
                y = -y + 2 * Container.Padding.Top;
            if (y > Container.ActualHeight - Container.Padding.Bottom)
                y = 2 * (Container.ActualHeight - Container.Padding.Bottom) - y;
        }
    }

    _scatterViewItemTransform.TranslateX = x;
    _scatterViewItemTransform.TranslateY = y;

    if (!e.IsInertial)
    {
        BringIntoBounds();
    }
}

public void BringIntoBounds()
{
    if (_scatterViewItemTransform.TranslateX < Container.Padding.Left)
    {
        _scatterViewItemTransform.TranslateX = Container.Padding.Left;
    }

    if (_scatterViewItemTransform.TranslateX > Container.ActualWidth - Container.Padding.Right)
    {
        _scatterViewItemTransform.TranslateX = Container.ActualWidth - Container.Padding.Right;
    }

    if (_scatterViewItemTransform.TranslateY < Container.Padding.Top)
    {
        _scatterViewItemTransform.TranslateY = Container.Padding.Top;
    }

    if (_scatterViewItemTransform.TranslateY > Container.ActualHeight - Container.Padding.Bottom)
    {
        _scatterViewItemTransform.TranslateY = Container.ActualHeight - Container.Padding.Bottom;
    }
} 
```

# class - 如何将 java.lang.Class 对象打印到文件中？

> ID：10424924
> 
> 赞同：1
> 
> 时间：2012-05-03T04:02:20.647
> 
> 标签：class, java

我曾尝试寻找一种即时编译类的方法，并且我已经获得了创建已编译的 Class 实例的方法。但是，我希望能够创建一个可执行的 .class 文件。如果可能的话，我如何能够将 Class 对象输出到 .class 文件。如果这是不正确的，请解释我将如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:58:02.480

此页面[http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/) 描述了从字符串编译 Java 代码，生成 .class 文件的过程。这是该页面其他注释良好的代码的缩写版本。

```
public class CompilerAPITest {
    final Logger logger = Logger.getLogger(CompilerAPITest.class.getName()) ;

    /** Java source code to be compiled dynamically */
    static String sourceCode = "package com.accordess.ca;" +
        "class DynamicCompilationHelloWorld{" +
            "public static void main (String args[]){" +
                "System.out.println (\"Hello, dynamic compilation world!\");" +
            "}" +
        "}" ;

    /* Object initialization and compilation. */
    public void doCompilation (){
        SimpleJavaFileObject fileObject = new DynamicJavaSourceCodeObject ("com.accordess.ca.DynamicCompilationHelloWorld", sourceCode) ;
        JavaFileObject javaFileObjects[] = new JavaFileObject[]{fileObject} ;
        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
        StandardJavaFileManager stdFileManager = compiler.getStandardFileManager(null, Locale.getDefault(), null);
        Iterable<? extends JavaFileObject> compilationUnits = Arrays.asList(javaFileObjects);
        //This example places the output files under bin folder.
        String[] compileOptions = new String[]{"-d", "bin"} ;
        Iterable<String> compilationOptions = Arrays.asList(compileOptions);
        DiagnosticCollector<JavaFileObject> diagnostics = new DiagnosticCollector<JavaFileObject>();
        CompilationTask compilerTask = compiler.getTask(null, stdFileManager, diagnostics, compilationOptions, null, compilationUnits) ;
        boolean status = compilerTask.call();
        if (!status){//If compilation error occurs
            for (Diagnostic diagnostic : diagnostics.getDiagnostics()){
                System.out.format("Error on line %d in %s", diagnostic.getLineNumber(), diagnostic);
            }
        }
        try {
            stdFileManager.close() ;//Close the file manager
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    public static void main(String args[]){
        new CompilerAPITest ().doCompilation() ;
    }
}

class DynamicJavaSourceCodeObject extends SimpleJavaFileObject{
    private String qualifiedName ;
    private String sourceCode ;

    protected DynamicJavaSourceCodeObject(String name, String code) {
        super(URI.create("string:///" +name.replaceAll("\\.", "/") + Kind.SOURCE.extension), Kind.SOURCE);
        this.qualifiedName = name ;
        this.sourceCode = code ;
    }

    @Override
    public CharSequence getCharContent(boolean ignoreEncodingErrors)
            throws IOException {
        return sourceCode ;
    }
    // ... getters and setters
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:17:52.340

不。而是制作一个可执行的 jar。

如果您觉得可执行 jar 不是您需要的，[这里](http://www.excelsior-usa.com/articles/java-to-exe.html)还有其他选项。

# ruby-on-rails - 升级后奇怪的 Rails 3.1+ 错误：未定义的方法'parent_table_name'

> ID：10424927
> 
> 赞同：2
> 
> 时间：2012-05-03T04:02:55.380
> 
> 标签：ruby-on-rails, exception

```
undefined method `parent_table_name' for class `ActiveRecord::Associations::JoinDependency::JoinAssociation' 
```

我最近将我们的应用程序从 Rails 2.3.12 升级到 Rails 3.0.12。我清除了所有弃用警告，然后继续升级到 Rails 3.1.4。升级到 Rails 3.1.4 后，我现在每次加载应用程序并在浏览器中访问时都会收到此错误。运行测试时也会引发它。真正奇怪的是，简单的刷新会导致应用程序继续前进而不会出现另一个错误。但是，停止服务器并重新启动它会导致它在下一次访问期间再次触发。它似乎也没有发生在一个地方。触发此错误时，可以在回溯中看到不同模型或控制器上的不同方法。

我曾尝试使用调试器单步执行代码，但它不会触发。我试过用谷歌搜索这个错误，但什么也没找到。我尝试通过回溯寻找任何不寻常的东西，并尝试更新一些旧的遗留代码，看看是否有帮助。

似乎它与我的关联有关，所以我寻找任何不是基本的关联并重构它们以使其成为标准的基本关联。我有几个其他 Rails 3.1 和 3.2 应用程序，使用我使用的任何常用关联都没有看到此错误。我有一些与额外列的 habtm 关联，因此我通过创建连接模型将它们转换为 has_many :through 。我与 :conditions 和 :includes 有一些关联。这不是我通常做的事情，但我从以前的开发人员那里继承了这个应用程序。

这个错误是否对任何人敲响了警钟？任何可以帮助我追踪它的提示或指针都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:10:16.233

好的，我想通了。它与 Rails 中的任何奇怪的东西无关。以前的应用程序开发人员之一编写了一个覆盖 Module#delegate 的自定义委托方法。删除该代码后，一切正常。

# java - 如何从 Restlet 获取值和返回值？

> ID：10424936
> 
> 赞同：0
> 
> 时间：2012-05-03T04:03:49.263
> 
> 标签：java, web-services, restlet

我在java中使用restlet。我想将数据发送到restlet服务并对其执行一些操作，然后将结果返回给客户端，在客户端接收。

我没有得到任何教程。请任何人都可以为此提供任何示例吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:43:04.503

也许[你好，世界](http://www.restlet.org/documentation/2.0/firstSteps#part02)或[第一步](http://wiki.restlet.org/docs_2.2/13-restlet/21-restlet/318-restlet.html)可能会有所帮助。此外，请查看[面向 Java 开发人员的 REST：Restlet for the weary](http://www.javaworld.com/javaworld/jw-12-2008/jw-12-rest-series-2.html?page=1)，它演示了一个示例应用程序。

# java - 按句点将字符串拆分为字符串 [] 但返回一个空数组

> ID：10424939
> 
> 赞同：6
> 
> 时间：2012-05-03T04:04:04.590
> 
> 标签：java, arrays, string, split, floating-point

好吧，也许我只需要第二双眼睛。

我有一个浮点数，我变成了一个字符串。然后，我想将其按期间/小数拆分，以便将其显示为货币。

这是我的代码：

```
float price = new Float("3.76545");
String itemsPrice = "" + price;
if (itemsPrice.contains(".")){
    String[] breakByDecimal = itemsPrice.split(".");
    System.out.println(itemsPrice + "||" + breakByDecimal.length);
    if (breakByDecimal[1].length() > 2){
        itemsPrice = breakByDecimal[0] + "." + breakByDecimal[1].substring(0, 2);
    } else if (breakByDecimal[1].length() == 1){
        itemsPrice = breakByDecimal[0] + "." + breakByDecimal[1] + "0";                         
    }                           
} 
```

如果你接受并运行它，你将在第 6 行（在上面的代码中）得到一个数组索引越界错误，因为小数点后没有任何内容。

实际上在第 5 行，当我打印出数组的大小时，它是 0。

这些错误太荒谬了，因为它们不是我简单忽略的东西。

就像我说的，另一双眼睛正是我需要的，所以在指出对你来说很明显但我忽略了的事情时，请不要无礼。

提前致谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T04:09:53.810

split 使用正则表达式，其中“.” 表示匹配任何字符。你需要做

```
"\\." 
```

编辑：已修复，感谢评论者和编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:09:24.917

改用十进制格式：

```
DecimalFormat formater = new DecimalFormat("#.##");
System.out.println(formater.format(new Float("3.76545"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:24:19.420

我在 java 上工作不多，但在第 2 行，可能价格没有转换为字符串。我在 C# 中工作，我会将其用作： String itemsPrice = "" + price.ToString();

也许您应该首先明确地将价格转换为字符串。因为，它没有被转换，字符串只包含“”并且没有“。”，所以没有拆分和扩展 arrayOutOfBounds 错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:35:21.520

如果您想将其显示为价格，请使用 NumberFormat。

```
Float price = 3.76545;
Currency currency = Currency.getInstance(YOUR_CURRENCY_STRING);
NumberFormat numFormat = NumberFormat.getCurrencyInstance();
numFormat.setCurrency(currency)
numFormat.setMaximumFractionDigits(currency.getDefaultFractionDigits());
String priceFormatted = numFormat.format(price);
System.out.println("The price is: " + priceFormatted); 
```

YOUR_CURRENCY_STRING 是您正在处理的货币的 ISO 4217 货币代码。

此外，以非精确格式（例如浮点数）表示价格通常不是一个好主意。您应该使用 BigDecimal 或 Decimal。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T05:13:25.350

如果您想自己处理这一切，请尝试以下代码：

```
public static float truncate(float n, int decimalDigits) {
    float multiplier = (float)Math.pow(10.0,decimalDigits);
    int intp = (int)(n*multiplier);
    return (float)(intp/multiplier);
} 
```

并得到这样的截断价格：

```
float truncatedPrice = truncate(3.3654f,2);
System.out.println("Truncated to 2 digits : " + truncatedPrice); 
```

# asp.net - 数学在线考试实施

> ID：10424942
> 
> 赞同：-2
> 
> 时间：2012-05-03T04:04:15.123
> 
> 标签：asp.net

我想为不同的科目实施在线考试。但我不会写数学或化学类的问题。我想创建一个表格，客户可以在其中写问题并保存任何类型的（数学、化学等）问题。

创建没有想法为问题创建图像并在每次方程出现并且变得复杂时上传它。

如何实现它请建议我，

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:14:15.223

对于数学和化学问题，大多数情况下您需要上标和下标文本或数字。

如果你为你的问题使用标签，那么试试这个

```
Label1.Text = "<sub>Hey</sub>"  // For subscript

Label1.Text = "<sup>Hey</sup>"  // For superscript 
```

如果你使用 HTML 来回答你的问题，那么试试这个

```
<p>This text contains <sub>subscript</sub> text.</p> // For subscript

<p>This text contains <sup>superscript</sup> text.</p>  // For superscript 
```

使用这些来格式化您的问题..

# javascript - 如何使用 jQuery 为 HTML5 视频播放器设置动画以响应触发事件？

> ID：10424943
> 
> 赞同：0
> 
> 时间：2012-05-03T04:04:31.230
> 
> 标签：javascript, jquery, html5-video

所以，我在我的网站上使用了 Jilion 的 Sublime 的[HTML5 视频播放器](http://sublimevideo.net/)。并且想知道当某些事件通过播放器触发时，是否有办法使用一些 jQuery 为我的视频播放器设置动画？

例如，当按下播放按钮时，视频播放器将移至屏幕中央。

我在播放器的 js 中进行了挖掘，它似乎使用诸如“播放”、“暂停”、“完成”和“结束”之类的东西来触发播放器的操作。我想知道的是，我是否可以使用与某些 jQuery 相同的技术，当“播放”被击中时会说这样做：

```
$('#video').animate({left: '350'}, "fast"); 
```

我知道这是一种黑客工作，谁能指出我将如何去做这样的事情的方向。

以下是播放功能的示例：

```
o.play=function(a){if(a||this.ga==Dc)this.Z=0,this.coords=this.ec;else
if(this.Ga())return l;Ic(this);this.startTime=a=oa();-1==this.ga&&(this.startTime-
=this.duration*this.Z);this.ue=this.startTime+this.duration;this.rd=this.startTime;
this.Z||this.vd();this.la("play");-1==this.ga&&this.la("resume");this.ga=1;
var b=ia(this);b in Gc||(Gc[b]=this);Jc();Lc(this,a);return j}; 
```

提前致谢。

更新：好的，这就是我目前所拥有的，这似乎有效。

```
var v = document.getElementsByTagName("video")[0];
v.addEventListener("playing", function() { 
$('#video').animate({left: '-90'}, "fast");
},function(){
$('#video').animate({left: '-346'}, "fast");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T02:59:26.823

HTML5 视频有[许多它发出的事件](https://developer.mozilla.org/en/DOM/Media_events)，例如播放、暂停、完成和其他一些事件。您可以使用 jQuery 的[.on()](http://api.jquery.com/on/)绑定到这些事件并从那里做任何您想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:01:36.430

您可以立即使用自定义事件来触发行为。

例如：

```
$('body').bind('videoPlay', function() {
   // fancy animation stuff here..
   alert('video started playing');
}); 
```

在 o.play 函数中，您将添加如下内容：

```
$('body').trigger('videoPlay'); 
```

也就是说，当然，如果您可以访问 javascript 并且可以在正确的位置对其进行修改..

===

另一种选择是用您自己的方法覆盖 o.play，然后调用原始的 o.play .. 我不知道这是否可行，但是因为您的示例 o.play() 方法似乎同时处理 pause() 和玩（）？像这样的东西：

```
var oldplay = o.play;
o.play = function() {
  $('body').trigger('videoPlay');
  return oldplay.call();
} 
```

在任何情况下，只要您知道需要“触发”事件的位置，您就可以绑定到自定义事件并对它们做出反应。

# objective-c - 输出中文字符而不是数字？目标 C

> ID：10424957
> 
> 赞同：1
> 
> 时间：2012-05-03T04:05:55.057
> 
> 标签：objective-c

它应该做什么：每次将新字符附加到 NSMutableString 数字时，将输入的字符串组所有数字并打印出来。然后，如果当前字符不是数字，它会检查它的 + 或 x，或 *，-。如果它是其中之一，那么它将它附加到一个数组并打印出来。

它在做什么：输出中文

```
`Please enter math: 12+56x45
2012-05-02 23:52:06.538 CALC[1921:403] 퀱 
2012-05-02 23:52:06.541 CALC[1921:403] 퀱퀲 
2012-05-02 23:52:06.542 CALC[1921:403] running array (
"+"
)
2012-05-02 23:52:06.543 CALC[1921:403] 퀱퀲퀵  
2012-05-02 23:52:06.544 CALC[1921:403] 퀱퀲퀵퀶 
2012-05-02 23:52:06.544 CALC[1921:403] 퀱퀲퀵퀶큸 
2012-05-02 23:52:06.545 CALC[1921:403] 퀱퀲퀵퀶큸퀴 
2012-05-02 23:52:06.546 CALC[1921:403] 퀱퀲퀵퀶큸퀴퀵` 
```

问题：我相信它与 unichar 有关，`char current = [InputString characterAtIndex:i];`但是当我在没有它的`else if`部分的情况下运行代码时，它可以正常工作。正如您所看到的，尽管作为字符串一部分的字符数是预期的数字，但问题似乎是它们使用了错误的语言。

我的代码：

```
int main ()
{
    char userInput[99];
    NSMutableString *number = [NSMutableString string];
    int i;

    printf( "Please enter math: " );

    scanf( "%s", userInput );
    fpurge( stdin );
    NSString *InputString = [NSString stringWithUTF8String:userInput];
    NSMutableArray *broken = [NSMutableArray array];

    for (i=0; i < [InputString length]; i++) {
        char current = [InputString characterAtIndex:i];
        NSString *cur = [NSString stringWithFormat:@"%c" , current];
        if (isalnum(current)) {
            [number appendString:[NSString stringWithCharacters:&current length:1]];
            NSLog(@"%@", number);
        }
        else if (current == '+'|| current == 'x'||current == '*'||current == '-') { 
            [broken addObject:[NSString stringWithFormat:cur]];
            NSLog(@"running array %@", broken);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:31:17.680

我看到你已经“转换”`char`成`NSString`. 您为什么不尝试附加`cur`到您正在打印的字符串？所以改变：

```
[number appendString:[NSString stringWithCharacters:&current length:1]] 
```

到：

```
[number appendString:cur] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T04:43:15.517

这可能是一种将数字与运算符分开的更高级别的方法，因此您可以更轻松地处理您想要执行的数学......

```
NSString *equation = @"12+56x45";
NSCharacterSet *operatorCharacterSet = [NSCharacterSet characterSetWithCharactersInString: @"+-/x"];
NSCharacterSet *numberCharacterSet = [NSCharacterSet characterSetWithCharactersInString: @"1234567890"];

NSArray *numbersOnly = [equation componentsSeparatedByCharactersInSet: operatorCharacterSet];
NSArray *operatorsOnly = [equation componentsSeparatedByCharactersInSet: numberCharacterSet];

for (NSString *number in numbersOnly) {
    NSLog(@"%@", number);
}

for (NSString *operator in operatorsOnly) {
    NSLog(@"%@", operator);
} 
```

最后位只是记录数字和运算符，以向您展示它们现在如何划分为不同的数组。这有点使您的任务变得微不足道，但是如果您假设方程式中的第一个数据是一个数字，您可以简单地串联遍历两个数组并进行数学运算。

# wpf - 如何在不可编辑的 ComboBox 中使用前缀突出显示来实现搜索功能？

> ID：10424958
> 
> 赞同：0
> 
> 时间：2012-05-03T04:05:59.690
> 
> 标签：wpf, autocomplete, combobox

我想创建只允许从固定列表中进行选择但具有可编辑组合等搜索功能的组合，即当您键入组合时，将搜索与您键入的前缀匹配的项目，并且前缀之后的文本在选择框中突出显示。

我想我可以实现必要的逻辑来进行搜索，但我不知道如何让突出显示工作。我想我可以用文本块组成组合项目并使用和背景颜色来实现突出显示，但项目需要知道它是在选择框中呈现的，而不是在下拉区域中呈现。使用 IsEditable=false 有一些前缀搜索功能，但它是暂时的 - 如果您在一两秒钟内没有输入任何内容，则前缀将被重置。为了使其可用，用户需要查看他输入的内容，并在需要时使用退格键编辑前缀，因此突出显示前缀很重要。

该组合可能有很多长物品，我希望用户有时间找到他想要的物品。将 IsEditable 设置为 true 或多或少会提供我想要的搜索行为，但我不希望用户能够在与任何项目不匹配的框中键入文本。

我已经研究过自定义可编辑组合以仅接受与列表中的项目匹配并取得一定程度成功的按键，但我不希望可编辑组合的选择行为 - 请参阅此问题[https://stackoverflow.com/问题/10442021/how-can-i-customize-an-editable-wpf-combo-to-prevent-change-the-selected-value](https://stackoverflow.com/questions/10442021/how-can-i-customize-an-editable-wpf-combo-to-prevent-changing-the-selected-value)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:48:29.173

ComboBox 将显示第一个匹配条目，即使`IsEditable="False"`.

您遇到的问题可能是一个固定列表，其中包含多个以相同开头的条目。例如：

```
AAAA
AACC
BBBB 
```

在这种情况下，您可以给每个条目一个唯一的键：

```
<ComboBox IsEditable="False">
    <ComboBoxItem Content="AAAA" TextSearch.Text="A" />
    <ComboBoxItem Content="BBBB" TextSearch.Text="B" />
    <ComboBoxItem Content="AACC" TextSearch.Text="C" />
</ComboBox> 
```

然后，如果您键入**C**键**AACC**条目将被选中。

# git-diff - Git 何时将文件显示为已修改，而实际上不是？

> ID：10424961
> 
> 赞同：0
> 
> 时间：2012-05-03T04:06:25.013
> 
> 标签：git-diff

的输出`git diff`表明我的一个文件的完整内容已被删除，然后又添加回来。为什么是这样？

```
diff --git a/templates/appengine/go/app.yaml b/templates/appengine/go/app.yaml
index 303af12..223b642 100644
--- a/templates/appengine/go/app.yaml
+++ b/templates/appengine/go/app.yaml
@@ -1,13 +1,13 @@
-# Right now, we direct all URL requests to the Go app we are about to
-# construct, but in the future we may add support for jQuery and Bootstrap
-# to automatically put a nice UI on the / url.
-
-application: {{ app_id.downcase }}
-version: 1
-runtime: go
-api_version: 3
-
-handlers:
-- url: /.*
-  script: _go_app
-
+# Right now, we direct all URL requests to the Go app we are about to
+# construct, but in the future we may add support for jQuery and Bootstrap
+# to automatically put a nice UI on the / url.
+
+application: {{ app_id.downcase }}
+version: 1
+runtime: go
+api_version: 3
+
+handlers:
+- url: /.*
+  script: _go_app
+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:41:34.427

如果您已经转换了行尾（例如，通过使用在 Windows 中运行的具有 Unix 样式行尾的不良行为编辑器以结果为->转换`git diff`开始），则预期会出现这种输出。这是更改文件每一行的典型方法，除了空白更改之外，您通常无法从原始差异输出到终端中破译。`LF``CR LF`

选项将使忽略空白更改`-w`。你的情况会是什么样子？如果它没有显示任何变化，那么空格就是您输出的原因。`git diff``git diff``git diff -w`

在这种情况下，您可以在输出`git diff | tr '\r' '~'`中看到`CR`字符更改为`'~'`字符`git diff`（假设 Unix 工具可用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:23:57.467

它显示它是因为它在一次提交中被删除然后重新添加。因此当前状态和上次提交之间的差异已经改变。

# php - PHP 路径的最佳实践

> ID：10424963
> 
> 赞同：18
> 
> 时间：2012-05-03T04:06:38.303
> 
> 标签：php, path, twig

我一直在互联网上试图找出处理我网站中路径的最佳方法。我应该使用相对路径还是绝对路径？

我已经多次看到 dirname ( **FILE** ) 被提及。相对路径的一个问题是，不同目录级别的其他几个文件包含的 PHP 文件会导致相对路径中断。例如，如果目录结构是

```
Root
    A
    B
       b 
```

b 和 An 中的 PHP 文件包含 B 中的另一个文件，那么 B 中文件中代码的相对路径将不同。

所以一般来说，关于代码中的包含和文件操作，处理文件路径的最佳方法是什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T04:30:07.370

虽然有很多方法可以找到路径，但我总是发现在项目根目录的文件中定义一个常量`index.php`或`config`排序是最容易的。然后我可以`SITE_ROOT`用于包含/类加载器等，以及`SITE_URL`视图、控制器、重定向等。

```
<?php
$root=pathinfo($_SERVER['SCRIPT_FILENAME']);
define ('BASE_FOLDER', basename($root['dirname']));
define ('SITE_ROOT',    realpath(dirname(__FILE__)));
define ('SITE_URL',    'http://'.$_SERVER['HTTP_HOST'].'/'.BASE_FOLDER);
?> 
```

**[基础类自动加载器](http://php.net/manual/en/language.oop5.autoload.php)**

```
<?php
function __autoload($class_name) {
    include (SITE_ROOT.'/includes/'.$class_name.'.php');
}
$obj  = new MyClass1();
$obj2 = new MyClass2(); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T05:45:00.177

Zend 框架对优化包含路径有一些很好的指导：

[http://framework.zend.com/manual/1.10/en/performance.classloading.html](http://framework.zend.com/manual/1.10/en/performance.classloading.html)

即使您不使用 Zend 框架，这些都是很好的指示。一般的要点是：

*   使用绝对路径
*   减少您定义的包含路径的数量
*   最后定义当前目录，或者根本不定义
*   尽早定义您的 Zend Framework include_path（如果您不使用 Zend，则不真正相关）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T04:15:48.333

为文件的目录结构、PHP 文件和类名使用正确命名约定以及设计自动加载器以包含文件的最佳方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T04:14:45.600

您可以将所有包含文件放在一个主目录中。然后在配置文件或脚本本身中创建一个指向包含目录的路径变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T04:15:26.303

新版本的 php (PHP5.3) 可以使用[__autoload](http://www.php.net/manual/en/language.oop5.autoload.php) 所以，你只需要确定你的应用程序的根。

# kohana - Kohana框架致命错误之谜

> ID：10424966
> 
> 赞同：1
> 
> 时间：2012-05-03T04:06:59.163
> 
> 标签：kohana, php

我在 auto_load 函数中遇到了一个致命错误。看到如下错误，说明具体目录和文件'/mnt/webDir/www/sossage/system/classes/kohna/log.php'文件打开失败需要。是的，文件不存在。是走错路了。但是，我从不编写代码，也无法在我的网络根目录上使用“查找”选项找到任何地方。

> 致命错误：Kohana_Core::auto_load(): 无法打开所需的 '/mnt/webDir/www/mysite/system/classes/kohna/log.php' (include_path='.:/usr/share/php:/usr/share /pear') 在 /mnt/webDir/mysite/system/classes/kohana/core.php 第 418 行，引用：

我该如何解决这个问题，请让我知道解决方案或提示。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T02:38:00.190

您的配置中可能有错字。注意它试图访问的目录：

```
...system/classes/kohna/log.php 
```

“kohna”不是合适的拼写。该目录是：

```
...system/classes/kohana/ 
```

![在此处输入图像描述](../Images/1c10657e5463c8e0addbd480a1f50c8f.png)

# java - 使用 BouncyCastle 向 CMS 签名添加签名/认证属性

> ID：10424968
> 
> 赞同：8
> 
> 时间：2012-05-03T04:07:25.403
> 
> 标签：java, cryptography, digital-signature, bouncycastle

我想使用 bouncycastle 生成一个简单的 CMS 签名。此代码有效！

```
 Security.addProvider(new BouncyCastleProvider());
  String password = "123456";
  KeyStore ks = KeyStore.getInstance("PKCS12");
  ks.load(new FileInputStream("c:/cert_123456.p12"), password.toCharArray());
  String alias = (String)ks.aliases().nextElement();
  PrivateKey key = (PrivateKey)ks.getKey(alias, password.toCharArray());
  Certificate[] chain = ks.getCertificateChain(alias);

  CMSSignedDataGenerator generator = new CMSSignedDataGenerator();

  generator.addSigner(key, (X509Certificate)chain[0], CMSSignedDataGenerator.DIGEST_SHA1);
  ArrayList list = new ArrayList();
  for (int i = 0; i < chain.length; i++) {
       list.add(chain[i]);
  }
  CertStore chainStore = CertStore.getInstance("Collection", new CollectionCertStoreParameters(list), "BC");
  generator.addCertificatesAndCRLs(chainStore);
  CMSProcessable content = new CMSProcessableByteArray("test".getBytes());
  CMSSignedData signedData = generator.generate(content, false, "BC");

  byte[] pk = signedData.getEncoded(); 
```

但是，如何添加签名属性？
我想删除默认签名属性并添加签名策略标识符。

文章非常受欢迎。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T10:54:49.220

首先，您似乎正在使用最新版本的 Bouncy Castle 中已弃用的构造。要添加经过身份验证/签名的[属性](http://www.bouncycastle.org/docs/docs1.5on/index.html)，您必须将它们打包到[AttributeTable](http://www.bouncycastle.org/docs/docs1.5on/org/bouncycastle/asn1/cms/AttributeTable.html)中签名属性添加到签名者，如下所示：

```
ASN1EncodableVector signedAttributes = new ASN1EncodableVector();
signedAttributes.add(new Attribute(CMSAttributes.contentType, new DERSet(new ASN1ObjectIdentifier("1.2.840.113549.1.7.1"))));
signedAttributes.add(new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(digestBytes))));
signedAttributes.add(new Attribute(CMSAttributes.signingTime, new DERSet(new DERUTCTime(signingDate))));

AttributeTable signedAttributesTable = new AttributeTable(signedAttributes); 
```

然后在 addSigner 方法之一中使用它。正如我在开始时已经提到的，这种方法已被弃用，我们鼓励您使用生成器和生成器生成器。这是一个简短的示例：

```
 /* Construct signed attributes */
    ASN1EncodableVector signedAttributes = new ASN1EncodableVector();
    signedAttributes.add(new Attribute(CMSAttributes.contentType, new DERSet(new ASN1ObjectIdentifier("1.2.840.113549.1.7.1"))));
    signedAttributes.add(new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(digestBytes))));
    signedAttributes.add(new Attribute(CMSAttributes.signingTime, new DERSet(new DERUTCTime(signingDate))));

    AttributeTable signedAttributesTable = new AttributeTable(signedAttributes);
    signedAttributesTable.toASN1EncodableVector();
    DefaultSignedAttributeTableGenerator signedAttributeGenerator = new DefaultSignedAttributeTableGenerator(signedAttributesTable);

    /* Build the SignerInfo generator builder, that will build the generator... that will generate the SignerInformation... */
    SignerInfoGeneratorBuilder signerInfoBuilder = new SignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().setProvider("BC").build());
    signerInfoBuilder.setSignedAttributeGenerator(signedAttributeGenerator);
    CMSSignedDataGenerator generator = new CMSSignedDataGenerator();
    JcaContentSignerBuilder contentSigner = new JcaContentSignerBuilder("SHA1withRSA");
    contentSigner.setProvider("BC");

    generator.addSignerInfoGenerator(signerInfoBuilder.build(contentSigner.build(this.signingKey), new X509CertificateHolder(this.signingCert.getEncoded())));

    ArrayList<X509CertificateHolder> signingChainHolder = new ArrayList<X509CertificateHolder>();
    Iterator i = this.signingChain.iterator();
    while (i.hasNext()) {
        X509CertificateObject cert = (X509CertificateObject)i.next();
        signingChainHolder.add(new X509CertificateHolder(cert.getEncoded()));
    }

    generator.addCertificates(new JcaCertStore(signingChainHolder));
    generator.generate(new CMSAbsentContent(), "BC").getEncoded(); 
```

它相当庞大，可能还不能工作（我正在编写它，并在研究一些东西时偶然发现了你的问题），尤其是 signingDate 部分，它可能必须是`new DERSet(new Time(new Date))`（更新：它适用于`DERUTCTime`）。

有点离题：我仍然无法理解 Signed 和 Authenticated 属性之间的区别，Bouncy Castle 拥有 DefaultAuthenticatedAttributeTableGenerator、DefaultSignedAttributeTableGenerator 类，它们与 Signers 完美配合。两者在签名时间方面似乎存在一些细微差别，如果签名时间不存在，SignedAttributes 默认会添加签名时间。RFC 提到了这两种属性类型，但我找不到任何确定的东西。

# microcontroller - 如何对 XBee ZigBee 模块进行编程？

> ID：10424971
> 
> 赞同：1
> 
> 时间：2012-05-03T04:07:48.300
> 
> 标签：microcontroller, zigbee, xbee

我有一个项目，来自微控制器的信息（葡萄糖的下降率变化，如发送通知“几乎空”或“下降率突然变化。15 的下降率自动返回到 14”）将显示在计算机的应用程序中。我正在考虑使用 ZigBee，它会负责传输信息，但我是这项技术的新手。

有谁可以帮助我如何编程 ZigBee 模块？我看过一些文章说它可以在eclipse CDT中编程。我有点困惑如何开始。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T23:54:33.947

这实际上取决于您的安装可以处理多少配置。这是一次性安装，还是您想要制作的产品“系统”必须能够在他们购买的任何配置下一起工作？

正如已经解释的那样，已经设置了整个无线电 + 堆栈并为串行数据工作的 xbee 模块很容易用于您从实验室发送一些预先配对的设置，甚至由专家进行现场安装的简单情况。

如果您的嵌入式设备必须自动找到彼此，那么您需要一种方法让嵌入式微控制器让模块互相发现，建立连接，然后让嵌入式微控制器中的应用程序代码相互通信，并确定他们需要彼此做什么。

在这种情况下，您可能会更好地使用 zigbee 堆栈位于嵌入式控制器内部的（前期更复杂且可能更昂贵）设计，因此您的应用程序代码可以正确使用它来控制连接性。

TI zigbee pro 评估套件非常全面，到目前为止对我来说似乎很棒。听起来您正处于需要花费一些钱并获得一些实际模块经验的地步，只是为了感受一下这项技术。尽管被警告，您可能需要 IAR 嵌入式工作台才能长期使用这些软件，而且那是相当昂贵的软件！

或者，Atmel 使用他们的“bitcloud”软件平台（免费的 zigbee 专业堆栈！哇！他们有一个免费的 ARM 工具链！）有一个非常有趣的 zigbee 实现，但我发现有关 bitcloud 的入门信息真的很缺乏，虽然我可以设置和编译代码，但我没有信心为 zigbee 专业网状网络购买足够的评估设备来在现实生活中对其进行测试。

PS：如果你刚开始接触短距离无线，我不能高度推荐这本书。[http://www.amazon.com/Essentials-Short-Range-Wireless-Cambridge-Series/dp/0521760690/ref=sr_1_2?ie=UTF8&qid=1336091059&sr=8-2](https://rads.stackoverflow.com/amzn/click/com/0521760690)

它包含对可用的不同技术的很好的介绍，以及所有技术的优缺点（以及一般的无线技术）另外，它将使您能够很好地开始了解您正在设计的系统真正需要的功能.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T16:25:54.297

1.  使用 USB Explorer 设备（或类似设备）在接收 XBee 上输入串行终端会话。
2.  键入 ATMY 以获取接收 XBee 的地址。写下来。
3.  将发送者放入 USB Explorer 并输入 ATDL 加上接收者的地址，如“ATDL798A728”
4.  键入 ATWR 以保存此设置。
5.  将发送器 XBee 的 UART（TX 和 RX 引脚）连接到微控制器。
6.  将接收 XBee 插入连接到计算机的 USB Explorer。
7.  运行处理草图或类似程序以从串行端口读取。

默认情况下，这两个 XBee 将在“透明模式”下运行，它将进入一个 UART 的数据从另一个 UART 传输出去，就像一根电线一样。因此，当您的微控制器将数据写入发送方 XBee 时，它​​将从接收 XBee 中出来，并由您的软件读取（并显示或任何您需要的内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T05:07:49.927

一些 zigbee/xbee 模块只是表现为无线串行，无需编程，只需打开它们即可。其他人需要编程。这取决于您的实际需求。如果我没记错的话，那些表现得像无线串行的那些有一个 AT 命令集，所以你可以调整一些东西，例如，如果你想要两个以上（多个无线点对点连接），你可以指定哪两个与每个通话其他...

# java - Java - 在 try-catch 块中循环

> ID：10424974
> 
> 赞同：4
> 
> 时间：2012-05-03T04:08:10.893
> 
> 标签：java

我正在编写一个文件阅读器，其想法是让用户输入一个数字，该数字代表文本文件中的行号。保存这个数字的变量是类型`int`。但是，当用户输入 a 时`String`，Java 会抛出`InputMismatchException`异常，我想要的是在`catch`子句中有一个循环，我将在其中循环，直到用户输入一个有效值，即一个`int`. 骨架看起来像这样：

```
 public void _____ throws IOException {
    try {
    // Prompting user for line number
    // Getting number from keyboard
    // Do something with number
    } catch (InputMismatchException e) {
       // I want to loop until the user enters a valid input
       // When the above step is achieved, I am invoking another method here
    }  
} 
```

我的问题是，有哪些可能的技术可以进行验证？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T04:13:55.993

```
while(true){ 
   try { 
        // Prompting user for line number 
        // Getting number from keyboard 
        // Do something with number 
        //break; 
       } catch (InputMismatchException e) { 
            // I want to loop until the user enters a valid input 
            // When the above step is achieved, I am invoking another method here 
       } 
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T04:54:18.873

避免使用异常进行流量控制。捕获异常，但只打印一条消息。此外，确实需要循环内的循环。

就这么简单：

```
public void _____ throws IOException {
    int number = -1;
    while (number == -1) {
        try {
            // Prompt user for line number
            // Getting number from keyboard, which could throw an exception
            number = <get from input>;
        } catch (InputMismatchException e) {
             System.out.println("That is not a number!");
        }  
    }
    // Do something with number
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T04:58:40.293

你可以避免`Exception`

```
Scanner sc = new Scanner(System.in);
while(sc.hasNextLine())
    String input = sc.nextLine();
    if (isNumeric(input) {
        // do something
        // with the number
        break; // break the loop
    }
} 
```

方法`isNumeric`：

```
public static boolean isNumeric(String str) {
    return str.matches("^[0-9]+$");
} 
```

如果要使用对话框输入数字：

```
String input = JOptionPane.showInputDialog("Input a number:"); // show input dialog 
```

# jquery - 从缓存的选择器中遍历 DOM 是否比在 DOM 中查找 ID 元素更快？

> ID：10424975
> 
> 赞同：3
> 
> 时间：2012-05-03T04:08:12.903
> 
> 标签：jquery, optimization, dom-traversal

有很多关于通过 class 或 id 或其他选择器查找元素是否更快的问题。我对此不感兴趣。我想知道你是否有：

```
var link = $(this); //let's say you're in a click handler 
```

通过做找到容器是否更快

```
var container = link.closest('.container'); //assume container is .container 
```

或者

```
var container = $('#mycontainer'); //assume same element as above 
```

我问这个问题不仅是针对上面的特定场景（好吧，是的，也是针对这种场景），而是针对缓存遍历与创建具有 ID 的新 jQuery 对象。我注意到在我的很多代码中我倾向于使用前一种方法（因为它可以使自己变得更加动态），但我总是很好奇后一种方法是否更快。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:22:00.387

我认为，无论是否缓存选择器，使用 id 选择器会更快。ID 选择器几乎是一个直接的字典查找，而缓存/最近的组合就像一个字典查找，然后是树遍历。

[http://jsperf.com/traverse-from-cached-selector-vs-id-selector](http://jsperf.com/traverse-from-cached-selector-vs-id-selector)

最快的查找将使用本机 documentGetElementById 函数完成。

```
var container = $(document.getElementById('MyContainer')); 
```

# c# - 如何将表值参数从存储过程传递到 C#

> ID：10424976
> 
> 赞同：2
> 
> 时间：2012-05-03T04:08:14.760
> 
> 标签：c#, sql-server, sql-server-2008, c#-4.0

如何将表值参数从存储过程传递到 C#？

# python - Python ValueError：使用序列设置数组元素

> ID：10424977
> 
> 赞同：0
> 
> 时间：2012-05-03T04:08:18.973
> 
> 标签：python, arrays, numpy, sequence

我有一个使用 Python 3.2 在我的机器上编写的脚本，由于所涉及的数据文件的大小，我需要在另一台运行版本 2.5 的机器上运行它。当我运行以下将 python 列表转换为 numpy 数组的代码时，出现以下错误

```
Traceback (most recent call last):
File "count_code2.py", line 119, in <module>
cell_centers()
File "count_code2.py", line 58, in cell_centers
read_file(F)
File "count_code2.py", line 44, in read_file
Xa = numpy.array(X, dtype=float)       #Converts lists to NumPy arrays
ValueError: setting an array element with a sequence. 
```

错误所指的代码位是

```
Xa = numpy.array(X, dtype=float)       #Converts lists to NumPy arrays
Ya = numpy.array(Y, dtype=float)
Za = numpy.array(Z, dtype=float) 
```

其中 X、Y 和 Z 是以下 Python 列表（测试列表）

```
X= ['0', '0', '0', '1.5', '0', '0', '0', '0', '0', '0']
Y= ['0', '0', '0', '1', '0', '0', '0', '0', '0', '0']
Z= ['0', '0', '0', '1', '0', '0', '0', '0', '0', '0'] 
```

我已经尝试将 dtype 重铸为对象，正如我在类似帖子中所读到的那样，这可以解决问题。它确实阻止了错误被抛出，但是另一个对数组中的数据求和的函数在 python 2.x 机器上返回零，并在 3.2 机器上给出这个错误

```
File "C:\Documents and Settings\My Documents\Count_Code.py", line 103, in counter
((ymin <= Ya) & (Ya <= ymax))&
TypeError: unorderable types: float() <= str() 
```

我假设 dtype 对象将列表转换为字符串数组，这就是我收到此错误的原因。我想问是否有人可以解释为什么版本的差异会导致错误，以及我能做些什么来解决它。提前致谢

# iphone - 如何在 Xcode 中的 _WebThreadLockFromAnyThread 上设置符号断点？

> ID：10424979
> 
> 赞同：8
> 
> 时间：2012-05-03T04:08:48.643
> 
> 标签：iphone, ios, xcode, uikit

我使用 Xcode 4.3.2 和 lldb 作为我的调试器。

我继承了一个项目，其中包含从辅助线程调用 UIKit 的代码，如以下日志消息所示：

> 2012-05-02 21:48:14.603 Appname Dev[77594:16e0f] void _WebThreadLockFromAnyThread(bool), 0x8d5f810: 从主线程或 Web 线程以外的线程获取 Web 锁。不应从辅助线程调用 UIKit。

我已经清理了从辅助线程进行 UIKit 调用的大部分代码，但我仍然偶尔会在日志中看到此消息。该应用程序没有崩溃，因此很难确定问题所在。

我想在 上设置断点`_WebThreadLockFromAnyThread`，但是当我尝试使用以下方法设置符号断点时：

```
b _WebThreadLockFromAnyThread 
```

调试器告诉我：

> 断点设置 --name '_WebThreadLockFromAnyThread' 断点已创建：12：名称 = '_WebThreadLockFromAnyThread'，位置 = 0（待定）警告：无法将断点解析到任何实际位置。

我还尝试使用断点导航器中的 UI 创建符号断点，但我不确定为模块输入什么。当我将模块留空时，会创建断点，但当日志消息出现在调试控制台中时它仍然没有中断。

谁能告诉我如何在 上添加断点`_WebThreadLockFromAnyThread`，以及如何确定该符号的定义模块是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T01:57:57.693

只需省略下划线即可。b WebThreadLockFromAnyThread 在 lldb 和 gdb 中都适用于我。现在，这是 Xcode 4.6，所以如果你坚持使用旧版本，我想可能是 4.6 中不存在该版本的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T01:40:53.333

您可以尝试使用 nm 命令或 class-dump 工具来定位模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T20:20:04.583

很可能没有您需要的符号，因为默认情况下 xcode 会生成一个“发布”版本，如果我是正确的，它会剥离使 exec 文件更小的符号。我现在不确定如何，但您需要找到切换到“调试”构建的选项，这将保证所有这些可爱的符号都在等待您的分析。

# python - Python 不等式：!= vs not ==

> ID：10424983
> 
> 赞同：13
> 
> 时间：2012-05-03T04:09:30.737
> 
> 标签：python, operators

我今天在编写一些 Python 时意识到可以将不等式运算符编写为`a!=b`or `not a==b`。这让我很好奇：

1.  两种方式的行为是否完全相同，或者是否存在一些细微的差异？
2.  有什么理由使用其中一个吗？一种比另一种更常用吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T04:12:24.213

1.  `==`调用`__eq__()`. 如果存在则`!=`调用，否则等价于.`__ne__()``not ==`
2.  除非 1 的差异很重要。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T04:16:14.443

注意你的括号。

```
>>> not "test" == True
True
>>> not "test" and True
False 
```

`==`优先于`not`. 但是`not`和`and`具有相同的优先级，所以

[Python 运算符优先级](http://www.tutorialspoint.com/python/python_basic_operators.htm "Python 运算符优先级")

# c - 将结构分配给静态数组

> ID：10424985
> 
> 赞同：1
> 
> 时间：2012-05-03T04:09:39.597
> 
> 标签：c

我有一个静态数组，在一个函数中，我在循环中创建一个新结构并将其分配给数组中的每个索引。在函数中，我可以看到值，但在不同的函数中，我看到数组值的垃圾。我必须使用 malloc 来做这样的事情吗？

```
struct file_types
{
    char * typename;
    char * MIMEtype;
};

static struct file_types *file_type_table; //Table of parameters
static int file_type_table_num=0;

int add_to_filetype_table(char *param, int param_len, char *value, int val_len, char* value2)
{   if ((param == NULL) || (value==NULL) || (value2 == NULL))
        return 0;
    if ((strcmp(param,"type") != 0) || (strcmp(value,"") == 0) || (strcmp(value2,"") == 0))
        return 0;

    if (file_type_table==NULL)
        file_type_table =   emalloc(sizeof(struct file_types));
    else
        file_type_table =  erealloc(file_type_table, (file_type_table_num*sizeof(struct file_types)+ sizeof(struct file_types)));

    file_type_table_num += 1;
    int index = file_type_table_num -1;

    struct file_types new_struct;
    new_struct.typename = value;
    new_struct.MIMEtype = value2;

    file_type_table[index] = new_struct;

    return 1;
} 
```

问题在于在这里访问结构：

```
char* get_table_value(char * key)
{   logg("In get_table_value");
    int i;

    char* value;

    for (i=0;i<file_type_table_num;i++)
    {   
        if (strcmp(((file_type_table)[i]).typename, key) == 0)
        {   
            return (file_type_table[i]).MIMEtype;
        }
    }
    return value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T04:16:46.163

您的代码中有两个问题：

**问题1：**

结构`new_struct`本身位于堆栈上，一旦函数范围结束，它就会被释放，所以你的数组元素指向函数范围之外的东西是不存在的，也就是垃圾。

**解决方案：**
结构需要驻留在堆内存上才能超出范围进行访问。

* * *

**问题2：**

```
new_struct.typename = value;
new_struct.MIMEtype = value2; 
```

创建传递给函数的指针的**浅表副本**`add_to_filetype_table()`，从示例中不清楚谁拥有传递给函数的指针以及它们的生命周期是什么，如果在调用之前释放了这些指针，`get_table_value()`则留下全局静态结构带有悬空指针，因此在输出它们时会得到垃圾值。

**解决方案：**

您需要制作正在传递的指针的**深层副本**。
为结构成员分配内存，然后将`strcpy()`字符串复制（）到分配的内存中。

# python - 打印一个字符以在 Python 中的每一行开始

> ID：10424987
> 
> 赞同：-1
> 
> 时间：2012-05-03T04:09:45.880
> 
> 标签：python

我希望在 python 代码的每一行的开头打印一个字符。特别是，我想打印一个“|” 到每个输出行的开头。在 python 中实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:19:47.637

使用 Python 3？替换`print`：

```
_realprint = print
def print(*args, **kwargs):
    _realprint('|', end='')
    _realprint(*args, **kwargs)
print.__doc__ = _realprint.__doc__ 
```

现在输出的所有内容都`print`将以'|'为前缀。额外的功劳是在您的呼叫中替换`\n`为，记住何时使用等于 以外的其他内容等进行呼叫。不过，这应该可以让您通过 99% 的案例。`\n|``_realprint()``end``\n`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T04:13:50.017

制作您自己的文件，类似于定义`write()`和替换`sys.stdout`.

```
import sys

class forewrap(object):
  def __init__(self, origfile, cseq='|'):
    self.file = origfile
    self.cseq = cseq
    self.seen = False

  def write(self, txt):
    if not (self.seen and txt == '\n'):
      self.seen = True
      self.file.write(self.cseq)
    else:
      self.seen = False
    self.file.write(txt)

print 'foo'
sys.stdout = forewrap(sys.stdout)
print 'foo'
print
print 'bar' 
```

# eclipse - 在 Eclipse 工作区中搜索字符串

> ID：10424988
> 
> 赞同：87
> 
> 时间：2012-05-03T04:09:52.963
> 
> 标签：eclipse

如何在完整的 Eclipse 工作区中搜索字符串？我无法在 Eclipse 工作区中找到文本，但是在工作区中找不到指定的字符串。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-05-03T04:11:22.080

在顶级菜单中，选择**'Search' -> 'File Search'**然后在底部附近（在范围内）有一个选择**整个工作区**的选项。

对于您的**“文件搜索遇到问题”**，您需要刷新工作区中的文件，在项目/包资源管理器中，右键单击并在任何级别（项目、文件夹、文件）选择“**刷新”。**这会将您的工作区与底层文件系统同步并防止出现问题。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-10-02T12:28:21.643

按`Ctrl`+ `H`，应该会调出搜索，其中包括通过项目、目录等进行搜索的选项。

`Ctrl`++可用于在 Eclipse 中跨工作区查找选定文本`Alt`。`G`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-03T04:20:52.413

Ctrl+H，选择“文件搜索”，指明“文件名模式”，例如*.xml或*.java。然后选择范围“工作区”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-27T11:21:08.317

很多答案只解释了如何进行搜索。

要查看结果，请查找搜索选项卡（通常停靠在屏幕底部）：

![](../Images/6a1ebe7a6efa845c8722c0f2ec6c9c27.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-18T09:38:12.690

**如果“文件名模式”字段为空**，Eclipse 不会搜索。
因此，如果您想搜索一些文本，请在“包含文本”字段中写入，并
默认使用星号 (*) 保留“文件名模式”。

[![在此处输入图像描述](../Images/0e8de76238bd950356d2d681906a9502.png)](https://i.stack.imgur.com/xXXod.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-05T12:55:10.700

[eclipse instasearch plugin](https://github.com/ajermakovics/eclipse-instasearch)是一个非常有用的插件，可以满足 eclipse 内部的搜索需求。它基于lucene。这也可以在 eclipse 市场中获得。

它具有广泛的功能集。

*   即时显示搜索结果
*   使用相关行显示预览
*   定期更新索引
*   匹配部分单词（例如 CamelCase 中的大小写）
*   打开并突出显示文件中的匹配项
*   搜索 JAR 源附件
*   支持按扩展/项目/工作集过滤

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-28T05:30:54.113

**对于 Mac：**

**快速文本搜索：** `Shift` + `Cmd`+`L`

[![在此处输入图像描述](../Images/07b4bcb3320d2eba728c165dc225ac35.png)](https://i.stack.imgur.com/8MNoX.png)

**所有其他搜索**（如文件搜索、Git 搜索、Java 搜索等）：`Ctrl`+`H`

[![在此处输入图像描述](../Images/6320cac85540b7399d45b02033d8a7b8.png)](https://i.stack.imgur.com/S0Ek6.png)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-03T04:12:59.207

转到搜索-> 文件

您将获得一个窗口，您可以提供简单的搜索文本或 regx 模式。输入搜索关键字后，单击 Search 并确保 Scope 是 Workspace。

您也可以将其用于替换。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-23T13:46:25.520

按下`Ctrl+shift+L`并输入您的字符串

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-08T14:32:04.187

在您的 Eclipse 编辑器屏幕中，尝试使用 ++`Control`按钮。`Shift``R`

# security - 在他们的应用程序之间进行 Google 身份验证和授权

> ID：10424991
> 
> 赞同：5
> 
> 时间：2012-05-03T04:10:12.157
> 
> 标签：security, google-app-engine, authentication, oauth-2.0, restful-authentication

Google 提供了一堆应用程序，例如 Plus、Gmail、Docs、Reader 等。在内部，这些应用程序可以以某种方式安全地相互通信以查询信息/数据。我在概念上想知道 Google 如何在其内部应用程序中实现这种安全的身份验证和授权。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:35:32.507

我认为所有这些应用程序都在单独的套接字上工作，这意味着所有单独工作的应用程序以及安全性也可以在那里实现。. 不太确定我的答案，如果我错了，请纠正我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T12:25:53.693

最终用户的应用程序到应用程序身份验证是通过[OAuth 2.0 服务帐户](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)实现的。该机制很可能会在内部重用，因为它适合需求。

# android - android，如何重命名文件？

> ID：10424997
> 
> 赞同：45
> 
> 时间：2012-05-03T04:11:02.063
> 
> 标签：android, file-rename

在我的应用程序中，我需要录制视频。在开始录制之前，我为其分配了名称和目录。录制完成后，用户可以重命名他的文件。我写了以下代码，但似乎它不起作用。

当用户输入文件名并单击按钮时，我会这样做：

```
private void setFileName(String text) {     
        String currentFileName = videoURI.substring(videoURI.lastIndexOf("/"), videoURI.length());
        currentFileName = currentFileName.substring(1);
        Log.i("Current file name", currentFileName);

        File directory = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES), MEDIA_NAME);
        File from      = new File(directory, "currentFileName");
        File to        = new File(directory, text.trim() + ".mp4");
        from.renameTo(to);
        Log.i("Directory is", directory.toString());
        Log.i("Default path is", videoURI.toString());
        Log.i("From path is", from.toString());
        Log.i("To path is", to.toString());
    } 
```

文本：是用户输入的名称。当前文件名：是我在录制之前分配的名称 MEDIA_NAME：文件夹名称

Logcat 显示了这一点：

```
05-03 11:56:37.295: I/Current file name(12866): Mania-Karaoke_20120503_115528.mp4
05-03 11:56:37.295: I/Directory is(12866): /mnt/sdcard/Movies/Mania-Karaoke
05-03 11:56:37.295: I/Default path is(12866): /mnt/sdcard/Movies/Mania-Karaoke/Mania-Karaoke_20120503_115528.mp4
05-03 11:56:37.295: I/From path is(12866): /mnt/sdcard/Movies/Mania-Karaoke/currentFileName
05-03 11:56:37.295: I/To path is(12866): /mnt/sdcard/Movies/Mania-Karaoke/hesam.mp4 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-03T04:17:00.467

**在您的代码中：**

不应该是：

`File from = new File(directory, currentFileName);`

代替

`File from = new File(directory, "currentFileName");`

* * *

为了安全，

使用 File.renameTo() 。但是在重命名之前检查目录是否存在！

```
File dir = Environment.getExternalStorageDirectory();
if(dir.exists()){
    File from = new File(dir,"from.mp4");
    File to = new File(dir,"to.mp4");
     if(from.exists())
        from.renameTo(to);
} 
```

参考：http: [//developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29](http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-03T04:24:10.603

问题出在这一行，

```
File from = new File(directory, "currentFileName"); 
```

这`currentFileName`实际上是一个您不必使用的字符串`"`

试试这个方法

```
File from      = new File(directory, currentFileName  );
                                    ^               ^         //You dont need quotes 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-08-22T11:43:55.527

使用此方法重命名文件。该文件`from`将重命名为`to`.

```
private boolean rename(File from, File to) {
    return from.getParentFile().exists() && from.exists() && from.renameTo(to);
} 
```

示例代码：

```
public class MainActivity extends Activity {
    private static final String TAG = "YOUR_TAG";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        File currentFile = new File("/sdcard/currentFile.txt");
        File newFile = new File("/sdcard/newFile.txt");

        if (rename(currentFile, newFile)) {
            //Success
            Log.i(TAG, "Success");
        } else {
            //Fail
            Log.i(TAG, "Fail");
        }
    }

    private boolean rename(File from, File to) {
        return from.getParentFile().exists() && from.exists() && from.renameTo(to);
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-01T09:07:00.610

```
/**
 * ReName any file
 * @param oldName
 * @param newName
 */
public static void renameFile(String oldName,String newName){
    File dir = Environment.getExternalStorageDirectory();
    if(dir.exists()){
        File from = new File(dir,oldName);
        File to = new File(dir,newName);
         if(from.exists())
            from.renameTo(to);
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-15T06:25:20.647

工作示例...

```
 File oldFile = new File("your old file name");
    File latestname = new File("your new file name");
    boolean success = oldFile .renameTo(latestname );

   if(success)
    System.out.println("file is renamed.."); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T04:13:01.870

提供具有不同文件名的目标文件对象。

```
// Copy the source file to target file.
// In case the dst file does not exist, it is created
void copy(File source, File target) throws IOException {

    InputStream in = new FileInputStream(source);
    OutputStream out = new FileOutputStream(target);

    // Copy the bits from instream to outstream
    byte[] buf = new byte[1024];
    int len;

    while ((len = in.read(buf)) > 0) {
        out.write(buf, 0, len);
    }

    in.close();
    out.close();
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T04:15:54.450

你应该检查目录是否存在！

```
File directory = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MOVIES), MEDIA_NAME);
if(!directory.exist()){
    directory.mkdirs();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-04T17:27:24.837

```
public void renameFile(File file,String suffix) {

    String ext = FilenameUtils.getExtension(file.getAbsolutePath());
    File dir = file.getParentFile();
    if(dir.exists()) {
        File from = new File(dir, file.getName());
        String name = file.getName();
        int pos = name.lastIndexOf(".");
        if (pos > 0)
            name = name.substring(0, pos);
        File to = new File(dir, name + suffix + "." + ext);
        if(from.exists())
            from.renameTo(to);
    }

} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-08-30T18:24:11.543

这就是我最终使用的。它通过在文件名中添加一个整数来处理存在同名文件的情况。

```
@NonNull
private static File renameFile(@NonNull File from, 
                               @NonNull String toPrefix, 
                               @NonNull String toSuffix) {
    File directory = from.getParentFile();
    if (!directory.exists()) {
        if (directory.mkdir()) {
            Log.v(LOG_TAG, "Created directory " + directory.getAbsolutePath());
        }
    }
    File newFile = new File(directory, toPrefix + toSuffix);
    for (int i = 1; newFile.exists() && i < Integer.MAX_VALUE; i++) {
        newFile = new File(directory, toPrefix + '(' + i + ')' + toSuffix);
    }
    if (!from.renameTo(newFile)) {
        Log.w(LOG_TAG, "Couldn't rename file to " + newFile.getAbsolutePath());
        return from;
    }
    return newFile;
} 
```

# asp.net-mvc - 使用 JSON 显示数据

> ID：10424999
> 
> 赞同：2
> 
> 时间：2012-05-03T04:11:27.177
> 
> 标签：asp.net-mvc, json

我是 JSON 的新手，我正在尝试制作可以单击并显示数据的菜单。所有对象都是从我的 asp.net mvc 项目的控制器返回的。

这是我的代码：

```
<script language="javascript" type="text/javascript">
  function ViewProduct() {
    var searchVal = $("#txtsearch").val();
    $.getJSON(url, function (data) {
      var mainMenu = $("#content ul#navmenu-v");
      $.each(data, function (index, dataOption) {
        var new_li = $("<li class='level1' id='select_list'><a href='javascript:void(0);' id='" + dataOption.ID + "' class ='selectedcategory'>" + dataOption.Name + "</a>");
        mainMenu.append(new_li);
        $('a#' + dataOption.ID).click(function () {
        var urlGetProByDep = '<%: Url.Content("~/") %>' + "Products/GetProductsByDepList";
        t = dataOption.ID;
        var data = {};
        if (searchVal != "") {
          data.depID = t;
          data.Q = searchVal;
        } else {
          data.depID = t;
        }
      $(".brand_id").empty();
      $.getJSON("ProductListing/Index", data, function (product) {
         $(".brand_id").empty();
         $.getJSON("ProductListing/Index", data, function (product) {
            $.each(product.ja, function (index, value) {
               $(".brand_id").html( value.Name + "</br>" + value.PictureName + "</br>" + value.ID);
            });
         });
      });
   });
}

$(document).ready(function () {
   ViewProduct(); 
}); 
```

另一个菜单代码块工作得很好，只是我上面的代码块有问题：

```
 $.getJSON("ProductListing/Index", data, function (product) {
         $(".brand_id").empty();
         $.getJSON("ProductListing/Index", data, function (product) {
            $.each(product.ja, function (index, value) {
               $(".brand_id").html( value.Name + "</br>" + value.PictureName + "</br>" + value.ID);
            });
         });
      }); 
```

这是我将JSON对象显示在我的视图中的块，但是当我单击菜单时，它只显示JSON对象最后的元素。

这是我的 JSON：

```
{"ja":
   [
       {"Name":"ABC1","PictureName1":"my image name1","ID":1},   
       {"Name":"ABC2","PictureName2":"my image name2","ID":2}
]} 
```

每个菜单都是每个产品的部门。并且如果我不循环菜单块中的产品数据，我就无法通过部门的ID来查询获取每个部门的产品。

欢迎任何想法或问题，感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:18:58.783

您正在订阅呼叫`.click`中的锚点事件。`$.each`但是由于您已经捕获了`dataOption`用于在闭包中准备 AJAX 请求的变量，很明显，当您单击链接时，该`dataOption`变量已经指向您正在循环的数组的最后一个元素。所以你可以像这样将参数传递给点击回调：

```
<script type="text/javascript">
    function ViewProduct() {
        // TODO: There's some url variable used here which is nowhere defined => define it
        $.getJSON(url, function (data) {
            var mainMenu = $("#content ul#navmenu-v");
            $.each(data, function (index, dataOption) {
                $(mainMenu)​.append(
                    $('<li/>', {
                        'class': 'level1',
                        // TODO: find an unique id or you get broken HTML
                        'id': 'select_list',
                        'html': $('<a/>', {
                            'href': '#',
                            'id': dataOption.ID,
                            'class': 'selectedcategory',
                            'text': dataOption.Name,
                            'click': function(arg) {
                                return menuClick(arg);
                            }({ dataOption: dataOption })
                        })
                    })
                );​
            });
        });
    }

    function menuClick(arg) {
        var urlGetProByDep = '<%= Url.Action("GetProductsByDepList", "Products") %>';
        var t = arg.dataOption.ID;
        var data = { };
        var searchVal = $('#txtsearch').val();
        if (searchVal != '') {
            data.depID = t;
            data.Q = searchVal;
        } else {
            data.depID = t;
        }

        $('.brand_id').empty();

        var url = '<%= Url.Action("Index", "ProductListing") %>';

        // TODO: Are those 2 nested AJAX calls really necessary here?
        $.getJSON(url, data, function (product) {
            $('.brand_id').empty();
            $.getJSON(url, data, function (product) {
                $.each(product.ja, function (index, value) {
                    $('.brand_id').html( value.Name + "</br>" + value.PictureName + "</br>" + value.ID);
                });
            });
        });
    }

    $(document).ready(ViewProduct);
</script> 
```

另请注意，我已将`searchVal`声明移动到 click 回调中，以说明在页面加载和用户实际单击链接之间其值的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:27:39.110

您的代码中似乎有一个复制和粘贴错误，您将对完全相同的 url 执行 2 个请求，甚至不使用第一个请求的结果。我猜你只想要类似的东西

```
$(".brand_id").empty();
$.getJSON("ProductListing/Index", data, function (product) {
    $.each(product.ja, function (index, value) {
         $(".brand_id").html( value.Name + "</br>" + value.PictureName + "</br>" + value.ID);
    });
}); 
```

但是你的问题是`.html()`方法。您正在循环您的产品，并且在每一轮中，您都将*每个* `.brand_id`-element 的 html 设置为一个新值。因此，您看到的结果就是您在上一次迭代中为所有元素设置的结果。您需要做的是单独设置每个元素的 HTML，每个元素都有不同的内容。

然而，与其清空列表项并向它们读取新内容（也许您的产品数量会更改每个查询请求），我宁愿删除所有项并附加新项：

```
$(".brand_id").remove();
$.getJSON("ProductListing/Index", data, function (product) {
    var $parent = $("#parent"); // the parent node of the product list
    $.each(product.ja, function (index, value) {
         $parent.append('<li class="brand_id">' + value.Name + '<br />' + value.PictureName + '<br />' + value.ID + '</li>');
    });
}); 
```

（编辑）......或者，如果`brand_id`真的是一个ID：

```
var $parent = $("#brand_id").empty();
$.getJSON("ProductListing/Index", data, function (product) {
    $.each(product.ja, function (index, value) {
         $parent.append('<div>' + value.Name + '<br />' + value.PictureName + '<br />' + value.ID + '</div>');
    });
}); 
```