# StackOverflow 问答 000705000-000705999

# javascript - 有选择地显示 HTML 文件的不同部分，无需 SSI/服务器端脚本

> ID：705015
> 
> 赞同：0
> 
> 时间：2009-04-01T11:01:40.540
> 
> 标签：javascript, css, css-sprites

是否可以创建一个文本精灵并有选择地显示同一 HTML 文件的部分并忽略其余部分。要显示的部分由使用 CSS 生成的菜单选择，该菜单带有同一页面内的链接。

（每个部分的长度未知，预计会有很大差异）。

不幸的是，与服务器通信不是一种选择。

正如你所料，我是 CSS、PHP 和 JS 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T19:49:28.650

您将希望用 ID 标记包装每个部分，并使用 javascript 控制可见性。在 JavaScript 中有几种控制可见性的方法。

控制可见性的 CSS 元素是`visibility`和`display`。

Visibility 使用上述回复中的属性显示或隐藏文本，并且 display 允许您通过使用“block”和“none”作为属性从 DOM 中实际删除该块。您需要选择最适合您的应用程序的元素。

Prototype/script.aculo.us 或 J-Query、MooTools 等 Javascript 库非常适合这种控制。

如果您想从头开始学习这种脚本，Jeremy Keith 的“DOM Scripting”一书是一本很棒的书，可以在几天内完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-28T00:55:41.650

You should use display none to hide things and display block to show them again (or display inline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T11:10:17.990

听起来像[CSS 属性`visibility`](http://www.w3schools.com/CSS/pr_class_visibility.asp)设置为`hidden`| `visible`| `collapse`.

# javascript - 如何使 Javascript 在 GeckoFX 中正常运行？

> ID：705016
> 
> 赞同：2
> 
> 时间：2009-04-01T11:02:17.653
> 
> 标签：javascript, geckofx

我已经开始使用 GeckoFX，但我遇到了 javascript:void(0) 的一个主要问题，它充当锚点，让 JS 弹出新窗口并加载 url。我如何告诉浏览器在 geckobrowser 组件内执行此操作？现在，当我点击它时..没有任何反应。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2010-01-19T18:08:30.060

要处理新的浏览器窗口，您需要处理 GeckoWebBrowser 的 CreateWindow 事件。然后打开一个带有 Web 浏览器控件的新表单，并将 e.WebBrowser 设置为该控件：

```
private void webBrowser_CreateWindow(object sender, GeckoCreateWindowEventArgs e) {
  BrowserForm frm = new BrowserForm();
  e.WebBrowser = frm.WebBrowser;
  frm.Show();
} 
```

# windows - PDB 文件故障转储 user.dmp

> ID：705021
> 
> 赞同：3
> 
> 时间：2009-04-01T11:05:22.230
> 
> 标签：windows, crash, windbg, pdb-files

我有一个应用程序崩溃，因此它在 Windows 平台中生成一个崩溃转储。我将 exe 和 dll 文件发送给客户。客户已将 user.dmp 和 drwtsn32.log 文件发送给我。但是，客户没有相应的 pdb 文件。客户只有 dll 和 exe 文件。因此，当我将此 user.dmp 文件附加到 Windbg 时，我没有得到符号。那么，我需要做什么才能获得符号。我需要将 pdb 文件发送给客户吗？如果是，那么当崩溃发生时他需要对这些 pdb 文件做什么？我使用三种不同的机器：a）构建机器，c）客户的测试机器和 c）我自己的调试机器（与构建机器不同）。windbg安装在调试机上。我可以将所有 pdb 文件从构建机器复制到我的调试机器中。请告诉我，

谢谢康康

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T11:09:07.807

如果可执行文件的 PDB 文件正确，则只需在调试转储时将 WinDbg 指向正确的路径。为此，请使用符号路径功能。

此问题中的附加信息：[调试符号问题](https://stackoverflow.com/questions/665003/debug-symbol-issue)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-09T13:22:42.030

The great thing about gathering DMP files is that the customer doesn't need PDB files at the time of creating the DMP file. You only need pdbs when you debug into the DMP file!

# c# - 图形用户界面错误报告

> ID：705023
> 
> 赞同：1
> 
> 时间：2009-04-01T11:06:56.783
> 
> 标签：c#, .net, user-interface, error-handling

我正在使用后台工作人员从数据库中获取数据。我的问题是我正在努力报告数据库活动中的任何错误。

我已经尝试直接从 DatabaseUpdater 类中生成一个对话框（我创建的 Windows 窗体）。但是，这挂起，我留下一个白框而不是错误消息。我尝试在一个单独的线程中生成 Dialog - 这导致 Dialog 几乎立即出现和消失。显然我对此并不完全感到惊讶，但尝试保持对话框会导致相同的白盒效果。

我想我的问题真的是显示来自线程活动的错误的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T11:15:18.993

这是多线程和 WinForms 的一个很好的资源：[Synchronizing calls to UI in a multi-threaded application](http://www.lostechies.com/blogs/gabrielschenker/archive/2009/01/23/synchronizing-calls-to-the-ui-in-a-multi-threaded-application.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T11:16:26.247

假设从 UI 线程调用 BackgroundWorker 任务，您应该在 RunWorkerCompleted 事件的处理程序中检查并显示任何错误 - 不要尝试在 DoWork 处理程序方法中处理它们...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:52:49.847

可能不是您要查找的内容，但您可能会从主窗体上的 InvokeRequired 属性和 Invoke 方法中获得一些好处。

# wpf - WPF 分解 - DataGridTemplateColumn

> ID：705024
> 
> 赞同：2
> 
> 时间：2009-04-01T11:07:17.343
> 
> 标签：wpf, wpftoolkit, datagridtemplatecolumn

我正在尝试将自定义 DataGrid 列定义移动到 UserControl 中。

MyComboBoxColumn.xaml

```
<dg:DataGridTemplateColumn 
    x:Class="WpfDecomposition.MyComboBoxColumn"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dg="clr-namespace:Microsoft.Windows.Controls;assembly=WpfToolkit"
    x:Name="_this"
    >

    <dg:DataGridTemplateColumn.Header>
        <Button Content="{Binding MyHeader, ElementName=_this}" ></Button>
    </dg:DataGridTemplateColumn.Header>

</dg:DataGridTemplateColumn> 
```

MyComboBoxColumn.cs

```
public partial class MyComboBoxColumn : DataGridTemplateColumn
{
    public MyComboBoxColumn()
    {
        InitializeComponent();
    }

    public static DependencyProperty MyHeaderProperty = 
        DependencyProperty.Register("MyHeader", typeof(string), typeof(MyComboBoxColumn), new PropertyMetadata("TEST"));
} 
```

主窗口 XAML：

```
<dg:DataGrid CanUserAddRows="True" AutoGenerateColumns="False">
    <dg:DataGrid.Columns>
        <my:MyComboBoxColumn />
    </dg:DataGrid.Columns>
</dg:DataGrid> 
```

我希望在列标题中看到一个“TEST”按钮，但我看到的是空按钮。绑定好像坏了 怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T11:39:54.957

它不起作用，因为它找不到名为 的元素`_this`。在 Visual Studio 中调试代码时，在“输出”窗口中出现以下错误：

> System.Windows.Data 错误：4：找不到与引用“ElementName = _this”进行绑定的源。绑定表达式：路径=我的标题；数据项=空；目标元素是 'Button' (Name='TestButton'); 目标属性是“内容”（类型“对象”）

至于为什么找不到 - 我认为那是因为 WPF 绑定使用可视化树来查找绑定的来源。在这种情况下，`MyComboBoxColumn`不在可视树中，因此它找不到具有该名称的元素。

我也尝试使用`RelativeSource`来查找元素，但这也不起作用 - 可能出于同样的原因。

我唯一能做`DataContext`的就是在构造函数中将按钮的设置为列本身：

```
public MyComboBoxColumn()
{
    InitializeComponent();

    this.TestButton.DataContext = this;
} 
```

然后更改 XAML 中的绑定：

```
<tk:DataGridTemplateColumn.Header>
    <Button Content="{Binding Path=MyHeader}" x:Name="TestButton" />
</tk:DataGridTemplateColumn.Header> 
```

这似乎不是最好的方法，但至少它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-10-13T08:34:32.547

如果您不想或不能`DataContext`在构造函数中设置（例如在代码中动态创建列时），请将列的`Header`属性设置为您要绑定到的对象（数据上下文），然后您可以绑定到`HeaderStyle`数据模板中的这个对象。

有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/1786773/how-to-set-the-datacontext-on-a-datagrid-column-header)。

# asp.net-mvc - ASP .NET MVC 正确的 UserControl 架构

> ID：705033
> 
> 赞同：5
> 
> 时间：2009-04-01T11:09:21.363
> 
> 标签：asp.net-mvc, user-controls, partial-views

我正在尝试学习新的 ASP .NET MVC 框架，并想知道使用 UserControls 的最佳实践。

我知道您可以将 UserControl 呈现为部分内容，并将数据从控制器传递给它们。理想情况下，我认为没有文件隐藏代码是有意义的，因为这会产生破坏 MVC 规则的诱惑。

我将举一个我不明白 UserControls 如何适应模式的例子。

> 我有一个显示最新标签的 UserControl（很像 StackOverflow 上的）。与 StackOverflow 不同，我想在我的所有页面上显示这个 UserControl。如果我有一个控制器说 QuestionController 旨在处理来自某些问题视图（例如视图和详细信息）的操作，这是否意味着我必须在 QuestionController 中获取数据，然后将其传递给 UserControl？
> 
> 如果我创建另一个控制器，比如 SearchController，那么我将不得不复制相同的功能来让最新的标签再次传递给一个部分。这是否意味着 2 个不同的控制器正在做他们原本不打算做的额外事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T11:58:19.500

如果您的 UserControl 出现在每个页面上，那么解决此问题的一种方法是使用一个基本控制器，您的所有控制器都从该控制器派生并通过覆盖 OnActionExecuting 方法并将逻辑放在那里为 UserControl 生成 ViewData。如果您的 UserControl 不那么普遍，但仍然在整个站点中经常使用，您可以扩展 ActionFilterAttribute 并让您的过滤器生成所需的数据。此属性可用于装饰生成使用 UserControl 的视图的控制器或操作。

在所有这些中，我假设 UserControl 的数据独立于被调用的操作。如果存在依赖关系，最好将逻辑推送到一个类（或多个类，可能使用策略）中，并在每个动作或控制器中显式生成数据（通过覆盖 OnActionExecuting）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-04-28T05:24:27.170

或者，使用 ASP.NET MVC 2，您现在可以使用 RenderAction 调用可以获取数据的全新控制器操作。这使您的代码更加模块化，并且更清楚数据的来源。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2009-04-01T12:05:31.650

您还可以考虑将模型类放在层次结构中。上层类（或上层类之一）将包含您的普遍用户控件所需的数据。然后，您可以在基本控制器类中加载这些常用数据。

# c++ - 如何将参数传递给 Thread 对象？

> ID：705037
> 
> 赞同：-1
> 
> 时间：2009-04-01T11:11:47.677
> 
> 标签：c++, multithreading, concurrency

我正在使用一个 C++ 类库，它提供了一个线程基类，用户必须在其中实现一个`run()`方法。

是否有关于如何将参数传递给该方法的推荐`run()`方法？现在我更喜欢通过构造函数（作为指针）传递它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T11:17:06.947

我不确定 C++，但这就是你在 Java 中的做法。您将拥有一个扩展 Thread（或实现 Runnable）的类和一个带有您想要传递的参数的构造函数。然后，当您创建新线程时，您必须传入参数，然后启动线程，如下所示：

```
Thread t = new MyThread(args...);
t.start(); 
```

在您的情况下必须相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:11:14.163

另一种方法是扩展此 Thread 类以接受函子作为唯一的构造函数参数，以便您可以在其中绑定任何调用。

那么使用线程的类将不需要从 Thread 继承，而只有一个（或多个）Thread 成员。仿函数调用您想要的任何起点（具有任何参数的类的某些方法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:40:58.827

这是一个典型的模式：

1) 定义一个封装你线程需要的所有数据的数据结构 2) 在主线程中，使用 operator new 在堆上实例化一个数据结构的副本。3) 填写数据结构，将指针转换为 void*，通过线程库提供的任何方式将 void* 传递给线程过程。4）当工作线程得到void*时，它会将它重新解释为数据结构，然后取得对象的所有权。这意味着当线程处理完数据时，线程会释放它，而不是主线程释放它。

这是您可以在 Windows 中编译和测试的示例代码。

```
 #include "stdafx.h"
    #include <windows.h>
    #include <process.h>

    struct ThreadData
    {
        HANDLE isRunning_;
    };

    DWORD WINAPI threadProc(void* v)
    {

    ThreadData* data = reinterpret_cast<ThreadData*>(v);
    if( !data )
        return 0;

    // tell the main thread that we are up & running
    SetEvent(data->isRunning_);

    // do your work here...

    return 1;
}

int main()
{
    // must use heap-based allocation here so that we can transfer ownership
    // of this ThreadData object to the worker thread.  In other words, 
    // the threadProc() function will own & deallocate this resource when it's
    // done with it.
    ThreadData * data = new ThreadData;
    data->isRunning_ = CreateEvent(0, 1, 0, 0);

    // kick off the new thread, passing the thread data
    DWORD id = 0;
    HANDLE thread = CreateThread(0, 0, threadProc, reinterpret_cast<void*>(data), 0, &id);

    // wait for the worker thread to get up & running
    //
    // in real code, you need to check the return value from WFSO and handle it acordingly.  
    // Here I assume the retval is WAIT_OBJECT_0, indicating that the data->isRunning_ event 
    // has become signaled
    WaitForSingleObject(data->isRunning_,INFINITE); 

    // we're done, wait for the thread to die
    WaitForSingleObject(thread, INFINITE);
    CloseHandle(thread);

    return 0;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T11:19:09.810

可以通过构造函数传递它们。只要确保指针的寿命比线程长。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T11:22:24.717

线程启动的一个常见问题是传递的参数仅存在于调用函数的堆栈上。线程启动通常被推迟，这样调用函数就会返回，并且只是在一段时间后线程才会真正启动——到那时参数不再存在。

对此的一种解决方案是创建一个事件，然后启动线程，将该事件作为参数之一传递。然后，启动函数等待事件，该事件由线程在完成启动时发出信号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T11:31:14.290

您可以将参数作为线程类的成员传递。创建线程的线程大概可以在线程启动之前调用其他方法和/或调用成员函数。因此，它可以填充它工作所需的任何成员。然后当调用 run 方法时，它将具有启动所需的信息。

我假设您将为每个线程使用一个单独的对象。

您通常会将您创建的所有线程放入数组、向量等中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T11:40:55.297

好吧，我更喜欢将参数放在 Start() 方法中，这样您就可以拥有一个受保护的构造函数，而不必通过派生类构造函数级联参数。

我会让我的 decleration 看起来像这样：

```
class Thread
{
public:
   virtual void Start(int parameterCount, void *pars);
protected:
   Thread();
   virtual void run(int parameterCount, void *pars) = 0;
} 
```

只需确保您的参数以某种方式收缩，例如#1 将是 int，#2 将是 double 等等。等等 :)

# asp.net-mvc - ASP.NET MVC：私有网页上的 GET 请求必须是非破坏性的吗？

> ID：705043
> 
> 赞同：1
> 
> 时间：2009-04-01T11:13:49.857
> 
> 标签：asp.net-mvc

在 ASP.NET MVC 中，不使用 GET 请求来调用修改模型的控制器似乎是一种常见的做法。例如，应该不可能通过单击简单的 HTML 链接来删除客户。

我知道这条规则的唯一原因是不能防范可能无意中改变数据库的网络爬虫。GET 请求通常被认为是安全的，而 POST 请求则不是。

这是否意味着此规则不适用于网站的非公开部分（例如：您的受密码保护的用户管理区域）？还是有任何其他理由不使用破坏性 GET 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T11:20:32.537

这通常是 HTTP 的一部分。来自[HTTP 1.1 RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1)

> 实施者应该意识到该软件代表了用户在互联网上的交互，并且应该小心让用户意识到他们可能采取的任何可能对他们自己或他人产生意想不到的意义的行动。
> 
> 特别是，已经建立了约定，即 GET 和 HEAD 方法不应该具有采取除检索之外的操作的意义。这些方法应该被认为是“安全的”。这允许用户代理以特殊的方式表示其他方法，例如 POST、PUT 和 DELETE，以便用户意识到正在请求可能不安全的操作。
> 
> 当然，不可能确保服务器不会因为执行 GET 请求而产生副作用；事实上，一些动态资源认为这是一个特性。这里的重要区别是用户没有请求副作用，因此不能对它们负责。

换句话说，它不是强制执行的，但是对于具有副作用的 GET 请求来说，这是一种非常糟糕的形式。想象一下，例如，如果用户将更新某些内容的 URL 加入书签 - 他们可能不会期望会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T11:30:37.973

另一个很好的理由是浏览器的加速器插件。这些尝试通过预取当前页面上的链接来加速页面加载。想象一下，如果您有一堆 GET 请求来删除列表中的所有对象，插件会删除它们！

简而言之，您无法预测浏览器将如何处理 GET 请求，如果它看起来像一个普通的超链接，那么浏览器获取它是公平的游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T11:23:09.910

是的。

这不仅仅是关于网络爬虫，而是关于 CRSF - 跨站点请求伪造。

所以想象一下有人登录到你的网站，并浏览到 www.hax0rs.com

hax0rs.com 的源代码中有以下标签

```
<img src="http://mysite.com/members/statusChange?status=I%20am%20looking%20for%20a%20gimp%20mask" height="0" width="0"> 
```

因为您的用户已登录，并且请求将发送到您的站点，所以身份验证 cookie 随之而来。砰，突然你的用户状态发生了变化。

多么有趣:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-02T09:36:11.203

但我想您仍然可以对 GET 请求执行某种“非检索”操作。例如更新“LastVisit”记录，这可以被认为是无损且相对安全的。

# .net - 使用 Javascript 读取 .net 配置文件（不是 aspx 页面中的 javascript）

> ID：705049
> 
> 赞同：2
> 
> 时间：2009-04-01T11:16:46.820
> 
> 标签：.net, javascript, web-config

有没有一种简单的方法可以在 html 页面中使用 javascript 从 (asp.net) web.config 文件中读取设置？

顺便说一句，我找到了将配置设置传递到 aspx 页面中的 javascript 块的示例，例如

```
<script type="text/javascript">
function ReadConfigSettings(){   
   var wibble = '<%=ConfigurationManager.ConnectionStrings["MyConnString"].ConnectionString %>'   }
</script> 
```

但这不是我想要做的。我需要从独立的 html 页面中读取设置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T11:22:09.477

如果 HTML/Javascript 从 IIS 中的虚拟目录运行，则无法直接访问 Javascript 中的 .config 文件，因为 asp.net 处理程序会阻止提供“.config”文件。因此，不要将文件加载到 IFrame/Ajax 请求中。

一种选择是服务器上的 .aspx 文件，它从 .config 文件返回适用的值，因此：

[http://myhost/mydirectiory/GetConfigurationValue.aspx?key=MyConnString](http://myhost/mydirectiory/GetConfigurationValue.aspx?key=MyConnString)

从 Javascript 调用将返回“connectionStringGoesHere”的 XML，然后可以使用它。？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T11:20:35.923

你不能。配置文件是服务器端的，不能从客户端访问（故意且非常正确）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-30T12:14:16.700

一个老问题，但另一个建议，虽然它可能不符合您使用纯 HTML 页面访问的要求......

但是我正在尝试做类似的事情也许就像在主页中一样

```
<script type="text/javascript">
 function ReadConfigSettings(){   
 Window.wibble = '<%=ConfigurationManager.ConnectionStrings["MyConnString"].ConnectionString %>'           
}
</script> 
```

这使 Window.wibble 成为可从其他地方访问的全局变量。

对此的变化包括将其放在隐藏的输入 div 中并通过 jQuery / ElementById 在其他地方访问它......我喜欢这样的东西

```
<input id="connString" type="hidden" value="@Mvc.Utils.GetConnectionString()" /> 
```

本质上只是使用服务器端将值添加到 html 中，然后稍后在客户端加载值。

但是，由于您需要纯 HTML 及其传递的连接字符串，因此出于安全等原因，这可能会失败，但它适用于读取简单的 Web 配置值。

# ruby-on-rails - 使用 capistrano 和 svn 部署 rails 时，您将 app-config-files 放在哪里

> ID：705054
> 
> 赞同：7
> 
> 时间：2009-04-01T11:17:45.477
> 
> 标签：ruby-on-rails, svn, deployment, configuration-files, capistrano

我有两个配置文件

```
/app/config/database.yml 
```

和

```
/app/config/userconfig.yml 
```

我不想将数据库凭据和 userconfig 放在 svn-repository 中，所以我签入了 database.yml.dist 和 userconfig.yml.dist。

首次部署应用程序时，在共享目录中获取 dist 文件副本的最佳方法是什么？

对于以后的部署，我将从 /app/current/config 链接到它们

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T19:22:51.833

你应该把你的配置文件放在

```
/path/to/deployed_app/shared 
```

然后在 capistrano 任务中，链接到这些文件：

```
namespace :deploy do
  task :symlink_shared do
    run "ln -s #{shared_path}/database.yml #{release_path}/config/"
  end
end

before "deploy:restart", "deploy:symlink_shared" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T11:09:32.530

在 Capistrano v3 中，您可以使用名为`deploy:symlink:shared`.

提供您放置在共享目录中的文件列表，以便 Capistrano 在任务运行时知道要对哪些文件进行符号链接。这通常在`deploy.rb`：

```
set :linked_files, %w{
  app/config/database.yml
  app/config/userconfig.yml
} 
```

*相关：[Capistrano - 如何将文件放入共享文件夹？](https://stackoverflow.com/questions/19071179/capistrano-how-to-put-files-at-the-shared-folder)*

# wpf - WPF 输入手势

> ID：705057
> 
> 赞同：1
> 
> 时间：2009-04-01T11:20:13.210
> 
> 标签：wpf, xaml

我正在使用一个 WPF 应用程序，我在其中维护了一个带有输入手势的菜单栏，即键盘快捷方式。

对于另存为菜单项，我根据用户的要求保留了 Ctrl+A。只要焦点在主窗口上，它就可以正常工作。

现在我的问题是，假设用户已经在窗口中的某个列表框中导航，如果他按 Ctrl+A，则选择所有功能将用于列表框并且不会调用另存为对话框（因为我已经完成了命令绑定对于这个输入手势）

知道如何避免这种情况吗？是的，我不能改变我的输入手势。它必须是 Ctrl+A。:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-03T04:18:08.477

我认为您可以更改列表框对象上的命令绑定以删除命令的绑定。查看 ListBox.CommandBindings 列表。

您还可以关闭 ListBox 上的 Focusable，使其永远不会接收键盘命令。

您还可以查看事件模型。当预览事件从逻辑树的根“冒泡”时，您可能会捕捉到 keydown，然后它们从最终元素向下传递。它们可以被标记为在向上或向下的途中处理。

# c# - 为构造函数实现策略

> ID：705063
> 
> 赞同：1
> 
> 时间：2009-04-01T11:22:17.790
> 
> 标签：c#, constructor, strategy-pattern

在 C# 中为模板/抽象类的构造函数实现策略的最佳方法是什么？我有几个类都基于解析构造函数中的字符串。解析是在一个静态方法中完成的，该方法创建键值对列表并且对于所有类都是通用的，但是某些字段对于所有类也是通用的——因此我使用了一个抽象模板类。

问题是我没有看到继承抽象基类的构造函数实现的方法。否则，我将在基类中实现构造函数策略，并强制在一些抽象方法中处理列表。

编辑：为模板类添加了无效代码

```
public abstract class XXXMessageTemplate 
{
    public XXXMessageTemplate(string x) // implementation for the constructor 
   {
       Parse(x);//general parse function
       CommonFields();//filling common properties
       HandlePrivateProperties();//fill individual properties
       HandlePrivateStructures();//fill individual structures
    }
    abstract void HandlePrivateProperties();
    abstract void HandlePrivateStructures();
}

The actual messages should not implement any constructor and only implement the HandlePrivateProperties and HandlePrivateStructures functions. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T11:25:43.913

如果您希望基类构造函数的逻辑在派生类中运行，通常只需调用它：

```
 public Derived(...) : base(...)
 {
     // ...
 } 
```

基类*可以*在构造函数期间调用抽象/虚拟方法，但通常不赞成派生类的构造函数主体尚未执行。（您需要非常强调地记录这一点。）

这回答了你的问题了吗？我不完全确定我理解这个问题 - 一些伪代码会有所帮助。

编辑：派生类*必须*实现构造函数。构造函数不是继承的。如果您不指定任何构造函数，编译器将提供一个无参数构造函数，该构造函数调用基本无参数构造函数。但是，您可以轻松地编写具有相同签名的构造函数，并且只需调用基类构造函数：

```
public Derived(string x) : base(x)
{
    // Base constructor will do all the work
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T11:26:05.347

为基类提供构造函数并在派生类中使用：

```
abstract class Base {
     // ...
     protected Base(string commonField) {
        CommonField = commonField;
     }
}

class Derived1 : Base {
     public Derived1(string commonField, string specificField) : base(commonField) {
        SpecificField = specificField;
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T12:21:30.487

我不是 100% 确定我完全理解这个问题，但是你的意思是你希望你的子类将一个文字字符串传递给基类，就像在这个例子中一样？

```
public class MyMessage : XXXMessageTemplate
{
    public MyMessage() : base("MyMessage String")
    {
    }

    public override void HandlePrivateProperties()
    {
        // ...
    }

    public override void HandlePrivateStructures()
    {
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:35:21.843

正如我所看到的，问题出在 Parse(...) 方法中。不在于方法本身，而在于他的存在。您有一些原始数据（字符串 x），在用于构造对象之前必须将其转换为结构化数据（键值对）。因此，您需要以某种方式将结构化数据传递给基构造函数和子构造函数。我看到了 3 种方法：

1.  解析基类中的数据并使用受保护的基属性将其传递给子类。
2.  在调用构造函数之前解析数据。
3.  解析数据代替使用。

**1** 您可以通过包含已解析参数的附加受保护属性来扩展 Mehrdad 答案。就像是：

```
abstract class Base {
     protected ParsedData ParsedData;
     // ...
     protected Base(string x) {
        ParsedData = Parse(x);
        CommonFields(); //initialize common fields using ParsedData
     }
}

class Derived1 : Base {
     public Derived1(string x) : base(x) {
        DerivedFields(); //initialize specific fields using ParsedData
     }
} 
```

**2** 或者您可以将预解析的字符串传递给构造函数：

```
abstract class Base {
     protected ParsedData ParsedData;
     // ...
     public static ParsedData Parse(string x)
     {
        //Parse x here...
     }

     protected Base(ParsedData data) {
        CommonFields(data); //initialize common fields using data
     }
}

class Derived1 : Base {
     public Derived1(ParsedData data) : base(data) {
        DerivedFields(data); //initialize specific fields using data
     }
} 
```

**3** 或解析代替用法：

```
abstract class Base {
     // ...
     protected Base(string x) {
        var data = Parse(x);
        CommonFields(data); //initialize common fields using data
     }
}

class Derived1 : Base {
     public Derived1(string x) : base(x) {
        var data = Parse(x);
        DerivedFields(data); //initialize specific fields using data
     }
} 
```

# sql - 运行存储过程时出现 db2 存储错误

> ID：705067
> 
> 赞同：0
> 
> 时间：2009-04-01T11:23:04.123
> 
> 标签：sql, database, stored-procedures, jdbc, db2

在我们的应用程序中运行少量存储过程时，我看到了上述错误。我们得到的实际错误是 sqlcode=-930，根据 db2 文档，它是：“没有足够的存储空间来处理该语句。”

问题：如何增加这些 proc 可用的存储空间？有没有其他人遇到过这个错误，如果有，你找到解决方案了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T03:58:39.783

由于您还没有回答您使用的是哪个平台，所以我将在 AIX 上进行尝试。

您需要查看 db2diag.log 以了解具体原因，但这通常是因为 AIX 已用完共享内存段。

AIX 共有 16 个共享内存段，其中 7 个可用于数据库。你的数据库实际使用的数量可以用一个太复杂的公式来计算，如果我没有在故障排除指南中查找它，我就无法记住它。

但是确实有可能一个数据库将使用 6 个段，只留下一个段。我已经看到发生这种情况的情况，然后内存映射的 I/O 请求与存储过程同时发生。

这两个都需要一个共享内存段，如果 I/O 先开始，存储过程将失败，如您所见。

解决此问题的方法是通过执行以下一项或多项操作来释放段：

*   禁用内存映射 I/O。
*   减少数据库对段的使用：您将需要该公式，但我认为它涉及缓冲池、堆大小和锁定列表。
*   如果不需要，请关闭 intra_parallel。

# iis - IIS7 中的 BackgroundWorker 线程 - 失败！

> ID：705070
> 
> 赞同：2
> 
> 时间：2009-04-01T11:24:04.293
> 
> 标签：iis, iis-7, backgroundworker

只是想知道是否有人在以集成管道模式在 IIS 7 下运行的站点中使用 BackgroundWorker 线程有任何问题？

我正在尝试使用这样的野兽来更新数据库架构（显然是管理功能），并且它在 Cassini 中完美运行，但是当我部署到 IIS 7 时，线程获取大约一行代码并静默结束。有没有办法告诉线程为什么结束？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T11:26:52.070

这可能是一个例外。也许您在两个环境之间使用不同的权限集运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T11:26:58.793

我不知道，但我不得不问：你为什么首先使用 BackgroundWorker？它的主要目的是简化 UI 元素上的线程。相反，您为什么不使用“普通”线程或任何其他非 UI 机制？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-04-15T04:36:19.377

您不想使用 BackgroundWorker，来自 ASP.NET 团队的 Thomas 刚刚发布了一些有关在 ASP.NET 中的单独线程中执行代码的信息：http: [//blogs.msdn.com/tmarq/archive/2010/04/14/performing -asynchronous-work-or-tasks-in-asp-net-applications.aspx](http://blogs.msdn.com/tmarq/archive/2010/04/14/performing-asynchronous-work-or-tasks-in-asp-net-applications.aspx)

# c - 我应该做 K&R 中的所有练习吗？

> ID：705080
> 
> 赞同：11
> 
> 时间：2009-04-01T11:29:09.163
> 
> 标签：c, kernighan-and-ritchie

这是我需要问的一个稍微有点主观的问题。为了成为一名熟练的 C 程序员，我觉得我应该向 k&r 学习 C。我觉得这本书有点随和，有时难以理解，但总体上随和。

我的问题是，我是否必须做所有的练习（即使是那些难倒我的练习）才能成为一名熟练的 C 程序员？或者我可以跳过大部分吗？所问问题的格式和布局......很难，充其量是不使用 C 丰富的库集可用的工具。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T11:38:13.197

首先，祝您学习 C 好运。

要成为一名熟练的程序员本身，要做什么是非常非常粗略的事情。我会用一个比喻来回答这个问题。你可能完成了本书末尾的所有练习，但未能完成分配给你的第一个实践程序。在另一种情况下，您可能没有完成任何练习，但您能够完成您的第一个作业。你觉得谁的位置更好？我会把讨论留给解释。

本书末尾的练习旨在让阅读本书的人熟悉问题的细微差别、代码情况和编程技术。这些通常是为了测试您可能刚刚阅读的文本的实际实现。这些问题会让你对日常实践中通常出现的情况有所了解。与任何考试一样，如果您无法解决某个特定问题，并不意味着您什么都不知道。

我的建议是尝试所有问题。记下让你难过的地方，并在你对主题有了更好的理解后重新审视它们，可能是在你解决了更多问题之后，或者通过了另一个好的资源。

尝试使用 Internet 或其他地方阅读有关该主题的更多信息。

至于书，任何能让你明白的书都是好的，如果失败了，对你来说就不值得了。

玩得开心，继续走！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-01T11:40:32.613

你需要做所有的练习。然后你需要用 10 年的时间来忍受 C 的痛苦。然后你就可以被带入牦牛血的秘密会议。

不过实话说：

你边做边学。您是否喜欢通过完成所有或部分练习来完成这些练习是无关紧要的。我自己，我会尽可能多地做，然后选择一个我喜欢的项目。

对我来说，那将是一个文本模式的股票投资组合经理，你可能有其他兴趣。

但是，如果您将它用于您喜欢的事情，您会学得更快——这与 K&R 中的练习不太可能有任何关系。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T11:36:37.273

我认为 K&R 是开始学习 CI 的一个很好的资源 认为你应该尝试自己解决至少 80% 的问题，即使提出的很多问题都是重写库，它可以帮助你开始思考“C”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T11:35:11.690

我不确定 K&R 是否是学习现代 C 的正确资源，尤其是自从 K&R 时代以来 C 已经走过了相当长的路。

无论如何：说到练习，你应该*特别*做那些难倒你的练习。你的目标是学习东西，而不是以最快的方式读完这本书。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T11:37:44.383

我从 K&R（很久以前第一次编辑）学习了 C，但从未做过任何练习。我并没有声称这让我成为了今天的出色程序员，但它似乎也没有对我造成任何伤害:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T11:39:33.617

即使是精通的程序员也不了解该语言的*所有内容。*你应该尝试做你觉得困难的练习——如果你尝试一些具有挑战性的事情，你会在这个过程中学到一些东西。

# wcf - MSMQ 私有队列自动删除超过 24 小时的未读消息

> ID：705081
> 
> 赞同：1
> 
> 时间：2009-04-01T11:29:13.623
> 
> 标签：wcf, message-queue, msmq

我通过 WCF 使用 MSMQ 将消息存储在私有队列中。（由 Windows Server 2003 托管的专用队列）。消息仅存储 24 小时并自动从队列中删除，有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:41:09.303

也许这些消息有一个过期设置？请参阅[Message.TimeToBeReceived](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k(SYSTEM.MESSAGING.MESSAGE.TIMETOBERECEIVED);k(TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION%3dV3.5%22);k(DevLang-CSHARP)&rd=true)属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-12T12:06:12.687

由于 的默认值为`timeToLive`1 天，对于自定义到期，请设置 的`timeToLive`属性`netMsmqBinding`。

# asp-classic - 打开 Outlok 并使用 ASP 填充值

> ID：705082
> 
> 赞同：0
> 
> 时间：2009-04-01T11:29:30.690
> 
> 标签：asp-classic

我在 asp 中做了一个项目，因为我需要打开一个 Outlook Express（所有字段都填写为 from 、 to 、 sub 、 Body 等）来发送邮件（我知道 mailto :)。特别是在正文中，我需要发送一个普通的 HTML 文件（不是附件），请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T11:33:07.453

邮件：链接。你可以设置像

```
<a href="mailto:address?body=some_text;subject=Hi">Mail Me</a> 
```

不同部分有不同的参数，并且参数限制为 255 个字符，因此它可能不是最好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:51:07.177

使用'POST'怎么样？

```
<form action="mailto:me@you.com" method="post">
 <input type="hidden" name="body" value="....." />
</form> 
```

并从 JS 提交？

# vb6 - 运行时错误“70”权限在 VB6 中被拒绝

> ID：705085
> 
> 赞同：3
> 
> 时间：2009-04-01T11:30:13.793
> 
> 标签：vb6

我正在使用 VB6。我创建的工具提取了几个 zip 文件并将它们解压缩到我在本地创建的文件夹中。在我的代码的清理部分中，我使用此代码删除了文件夹

```
If (f.FolderExists(path + "Extracted Files") = True) Then
     f.DeleteFolder (path + "Extracted Files")
End If 
```

当我运行此代码时，我在 f.DeleteFolder(path + 'Extracted Files') 行中收到错误 Run Time Error '70' 和 Permission Denied。

我哪里错了？还是我需要创建具有不同权限的文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T12:18:33.240

也许一个或多个文件是只读的？使用可选的 force 参数强制删除：

```
f.DeleteFolder (path + "Extracted Files"), True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:36:18.157

您正在使用用另一种语言编写的库来提取文件？验证是否打开了任何指针，很可能打开了某个文件，祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-27T11:45:19.797

1.  `regedit`通过键入开始搜索或命令提示符运行注册表编辑器。
2.  在注册表编辑器中，导航到以下注册表项：

    ```
    HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Policies\System 
    ```

3.  `DWORD`在右窗格中找到以下注册表子项：`EnableLUA`
4.  双击`EnableLUA` On value prompt，将 value 设置为`0`。
5.  退出注册表编辑器。
6.  重新启动计算机。
7.  要再次启用 UAC，请将值设置`EnableLUA`为`1`。

# sql-server - Sql Server 时间落后 1 小时

> ID：705090
> 
> 赞同：1
> 
> 时间：2009-04-01T11:31:51.917
> 
> 标签：sql-server

我在名为“createdDate”的表中有一个日期时间列，默认值设置为 getutcdate()。但是，当向表中添加一行时，createdDate 的时间值比系统时间晚 1 小时。所以我的问题是如何将当前数据库系统时间戳增加 1 小时？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T11:33:00.387

听起来您的服务器知道夏令时（GMT、BST 等），并且您的数据库坚决使用 UTC。

如果您希望数据库中的日期与数据库服务器的时间匹配，请使用*GetDate* *(* ) 。

或者，取消选中服务器上日期和时间属性中的“自动调整时钟以适应夏令时变化”的复选框，然后继续使用 GetUtcDate()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:34:31.803

数据库服务器可能位于与 UTC 时间相差一小时的时区。分别查看 GetDate() 和 GetUtcDate() 的 MSND 条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T11:55:22.050

您应该始终确保您的服务器和您的数据库就时区和 DST 更改达成一致。

IMO 您应该始终选择 UTC，因为这可以使您免受由于 DST 变化不同（例如去年在美国发生的情况）导致的任何细微错误。

# grid - 检索相对于网格中心点的周边点

> ID：705091
> 
> 赞同：1
> 
> 时间：2009-04-01T11:31:59.530
> 
> 标签：grid, point

给定`p(0,0)`，我如何检索`points{(0,1),(1,1),(1,0),(1,-1),(0,-1),(-1,-1),(-1,0),(-1,1)}`相对于 p 偏移 1 的周长点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T11:41:51.067

```
for(x = p.x -1; x <= p.x + 1; x++) {
    for(y = p.y -1; y <= p.y + 1; y++) {
        // Do some stuff with each p
    }
} 
```

通用代码在这里。更改您的编程语言以及存储积分的方式。

# com - 即使 COM 功能失败，是否应该设置 out 参数？

> ID：705093
> 
> 赞同：3
> 
> 时间：2009-04-01T11:32:20.310
> 
> 标签：com, out-parameters

在实现`COM`接口时，我总是在成功时分配输出参数，但我也应该在错误时这样做吗？

```
HRESULT CDemo::Div(/*[in]*/ LONG a, /*[in]*/LONG b, /*[out,retval]*/ LONG* pRet)
{
    if (pRet == NULL)
        return E_POINTER;

    if (b == 0)
    {
        *pRet = 0; // is this redundant?
        return E_INVALIDARG;
    }

    *pRet = a/b;
    return S_OK;
} 
```

有一次，我因为没有初始化一个 out 参数并假设如果我初始化变量，如果我不在方法内部更改它，它将保持那个值。但是我使用了这个方法`.NET`，因为编组器看到这是一个`[out]`参数，它丢弃了我放在调用站点上的初始值，并在函数返回后放入垃圾中（调试很有趣，不是）。

即使在故障过度补偿时也分配给`out`参数还是我真的应该这样做？

* * *

**编辑：**即使在函数失败的情况下正式不应访问参数我经常看到（有时编写）这样的代码（使用[Sharptooth的帖子](https://stackoverflow.com/questions/705093#705131)中的示例）：

```
ISmth *pSmth = NULL; 
pObj->GetSmth(&pSmth); // HRES is ignored
if (pSmth) // Assumes that if GetSmth failed then pSmth is still NULL
{ 
    pSmth->Foo();
    pSmth->Release();
} 
```

这在未编组的代码（相同的[线程单元](http://msdn.microsoft.com/en-us/library/ms693344)）中可以正常工作，但是如果涉及编组器，它是否足够聪明，仅在函数成功时才设置返回值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T11:45:55.457

规则是，如果呼叫失败，则不允许主叫方对 out 参数值进行任何操作。因此，服务器不应提供有效值，也不应将任何资源的所有权传递给 out 参数。

例如，如果您有

```
HRESULT GetSmth( [out] ISmth** ); 
```

方法，那么预计服务器`AddRef()`在`ISmth**`返回之前调用变量。如果它要返回失败代码，则不能调用`AddRef()`，因为不允许客户端使用返回的参数值，因此不会调用`Release()`，你会得到内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-04T19:36:34.190

虽然其他答案没有错，但他们错过了一个非常重要的点——打算返回失败 HRESULT 的 COM 服务器**必须**将所有 [out] 参数设置为 NULL。这不仅仅是一个好的风格问题，它是 COM 所要求的，不遵守它可能会在涉及封送处理时导致随机崩溃。

也就是说， *pRet = 0; 在原始代码中不是多余的，而是正确和必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T13:20:26.463

我不确定我是否 100% 同意尖牙。我当然同意，对于失败的 COM 调用，您不能也不能将任何资源所有权分配给任何输出参数。这包括内存分配或添加引用 COM 对象。

但是，我认为没有错（实际上是鼓励）将纯粹的参数设置为空值，只要不转移任何资源所有权。例如，将代码设置 pRet 指向 0 从技术上讲没有任何违法之处。这不会将任何资源所有权转移给 pRet，并且只是一些没有正确检查调用成功的调用者的帮助者。

# .net - WPF MVVM 使用命令与事件处理程序

> ID：705099
> 
> 赞同：10
> 
> 时间：2009-04-01T11:33:36.407
> 
> 标签：.net, wpf, mvvm, binding

我喜欢 MVVM 模式，一旦你开始使用它，你就会沉迷其中。

我知道在完美世界中，您的 View 代码隐藏几乎是空的（可能是构造函数中的一些代码），并且 View 的各个方面都是从 ViewModel 操作的。

但是有时在 ViewModel 中创建新字段、属性和命令会比在事件处理程序中实现相同的东西创建更多的代码。

目前我坚持以下规则：

如果事件处理程序代码操作其视图的很小部分（例如，按钮单击事件处理程序增加位于同一视图上的某些 TextBlock 的字体），则可以在事件处理程序内实现逻辑。但是如果 View 需要操作业务逻辑或访问视图之外的资源，那么我将这些职责分配给 ViewModel。

你觉得我的方法怎么样？

在使用事件处理程序和 ViewModel 时，您会尽量避免什么？

在使用 MVVM 模式时，您可以推荐哪些最佳实践？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-01T11:53:43.177

我会说你的经验法则还不错。

在我看来，核心问题是“代码视图是特定的，还是解决业务逻辑？”。

视图中有代码是可以的，如果代码在这里是为了修改视图而不是执行任何类型的业务逻辑。您更改字体大小的示例是在视图中非常好的代码示例（并且会增加 ViewModel 中的噪音，使其更难理解和维护）。从本质上讲，如果你使用触发器，你已经做了一些，所以这并不奇怪。

但是请记住，如果您使用单元测试，那么测试那一点视图逻辑将非常困难。如果您需要对其进行测试，最好将其放在视图模型中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-09-22T10:45:05.583

我想我也可以在之前的评论中添加一些东西，

从非常普通的经验来看，命令没有使用事件处理程序，而是给了我更大的灵活性，因为它提供了一种独立的机制来响应来自不同控件的事件/动作，并能够检查命令本身的状态。

# sql-server - SQL Server Management Studio 中的操作符和警报有什么用？

> ID：705100
> 
> 赞同：1
> 
> 时间：2009-04-01T11:34:03.147
> 
> 标签：sql-server

谁能解释为什么以及在哪里使用 SQL Server Management Studio 中的运算符和警报？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T11:49:09.647

运算符和警报旨在支持 SQL Server 作业，而这些作业又由 SQL Server 代理管理。

假设您有一个处理大量作业的 SQL Server 实例。您可能希望为某些工作分配特定的操作员责任，因此选择通知他们这些工作的状态，即财务团队的成员可能负责生成发票的工作。

以下参考详细介绍了如何创建运算符。

[http://www.mssqltips.com/tip.asp?tip=1523](http://www.mssqltips.com/tip.asp?tip=1523)

希望这是有道理的，但如果您需要进一步的帮助，请随时直接与我联系。

干杯，约翰

# php - 内部联接

> ID：705103
> 
> 赞同：0
> 
> 时间：2009-04-01T11:34:36.980
> 
> 标签：php, sql, mysql

```
$query4 = mysql_query("SELECT * FROM comments WHERE content_id = '$id' AND     content = 'thread'
                  INNER JOIN users ON comments.poster = users.id
                  ORDER BY comments.date ASC");
while ($comment = mysql_fetch_array($query4)) {
} 
```

所有的表和列都存在，我连接到数据库，但它仍然给我：

```
警告：mysql_fetch_array()：提供的参数不是第 63 行 thread.php 中的有效 MySQL 结果资源
```

我在这里做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T11:36:22.657

您的连接语法错误。尝试：

```
SELECT *
FROM comments
INNER JOIN users ON comments.pooster = users.id
WHERE comments.content_id = '$id'
ORDER BY comments.date ASC 
```

# delphi - 数据驱动的 DUnit 测试

> ID：705114
> 
> 赞同：11
> 
> 时间：2009-04-01T11:39:44.737
> 
> 标签：delphi, dynamic, data-driven-tests, dunit

DUnit 通常的工作方式是编写一些已发布的方法，然后 DUnit 将它们作为测试运行。我想做的有点不同。我想在运行时根据数据创建测试。我正在尝试测试一个处理输入文件以创建输出文件的特定模块。我有一组带有相应已知良好输出文件的测试输入文件。这个想法是动态创建测试，每个输入文件一个，处理输入并根据已知的好文件检查输出。

然而，这里的实际数据来源并不重要。困难在于使 DUnit 以数据驱动的方式运行。为了这个问题，假设数据源只是一个随机数生成器。这是一个触及困难核心的具体问题示例：

在运行时创建一些测试对象（TTestCase 或其他），比如 10 个，其中每个

1.  在运行时从随机生成的整数中命名。（“名称”是指出现在测试运行器树中的测试名称。）
2.  通过或失败基于随机整数。偶数通过，奇数失败。

从 DUnit 的设计来看，它的设计*似乎*考虑到了足够的灵活性以使这些事情成为可能。我不确定是不是这样。我尝试通过从 TAbstractTest 和 ITest 继承来创建自己的测试类，但无法访问一些关键方法。我也尝试从 TTestCase 继承，但该类与运行已发布方法的想法密切相关（并且测试以方法命名，所以我不能只使用一个名为“go”的类，因为那时我所有的测试都将被称为“go”，我希望我的所有测试都单独命名）。

或者，是否有一些替代 DUnit 可以做我想做的事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-01T11:58:03.463

```
program UnitTest1;

{$IFDEF CONSOLE_TESTRUNNER}
{$APPTYPE CONSOLE}
{$ENDIF}

uses
  Forms, Classes, SysUtils,
  TestFramework,
  GUITestRunner,
  TextTestRunner;

{$R *.RES}

type
  TIntTestCase = class(TTestCase)
  private
    FValue: Integer;
  public
    constructor Create(AValue: Integer); reintroduce;
    function GetName: string; override;
  published
    procedure Run;
  end;

{ TIntTestCase }

constructor TIntTestCase.Create(AValue: Integer);
begin
  inherited Create('Run');
  FValue := AValue;
end;

function TIntTestCase.GetName: string;
begin
  Result := Format('Run_%.3d', [FValue]);
end;

procedure TIntTestCase.Run;
begin
  Check(FValue mod 2 = 0, Format('%d is not an even value', [FValue]));
end;

procedure RegisterTests;
const
  TestCount = 10;
  ValueHigh = 1000;
var
  I: Integer;
begin
  Randomize;
  for I := 0 to TestCount - 1 do
    RegisterTest(TIntTestCase.Create(Random(ValueHigh) + 1));
end;

begin
  Application.Initialize;
  RegisterTests;
  if IsConsole then
    TextTestRunner.RunRegisteredTests
  else
    GUITestRunner.RunRegisteredTests;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T11:47:53.253

我想说你基本上想要一个“超级测试”函数，然后调用其他测试，每个数据文件一个。这就是我们对 DUnit 测试之一所做的事情。您只需循环加载每个可用文件，并根据需要使用 Check 运行测试。

另一种方法，我们也在同一个项目中用于测试最终应用程序及其数据加载和分析，是使用类似 FinalBuilder 的东西来循环应用程序（假设你也可以循环 DUnit 应用程序并使用参数）各种不同的数据文件。然后应用程序运行，进行分析，然后在保存后退出。然后另一个应用程序将结果数据与理想数据进行比较，并在适当时报告失败。

# php - 如何对表示具有多个答案的民意调查的两个表使用一个查询？

> ID：705116
> 
> 赞同：0
> 
> 时间：2009-04-01T11:39:56.377
> 
> 标签：php, mysql, sql

我有两个表**poll**和**poll_answers**，它们代表民意调查和可供选择的选项以回答民意调查中的问题。前任：

> 我不擅长 SQL 吗？
> 
> *   是的
> *   是的你是
> *   改变工艺

以及相应的表格：

**轮询**

```
pollID pollQuestion

 1 | Am I poor at SQL? 
```

* * *

**poll_answers**

```
pollAnswerID pollAnswerText pollID

  1 | yes | 1

  2 | yes, you do | 1

  3 | change craft | 1 
```

* * *

这就是我获取数据的方式：

```
$polls=$db->get_results("SELECT pollID, pollQuestion FROM poll",ARRAY_A);
    foreach ($polls as $poll_field)
    {
        $poll['id']=$poll_field['pollID'];
        $poll['question']=$poll_field['pollQuestion'];
        $tmp=$poll['id'];
        //answers
        $answers=$db->get_results("SELECT pollAnswerID, pollAnswerText FROM poll_answers WHERE pollID='$tmp'",ARRAY_A);
            {
            //and so on , I think you get the idea.
            }

    } 
```

这对我来说看起来很笨拙，因为我认为在 ID 匹配上使用 INNER JOIN 只需一个 SQL 查询就可以获取数据......我就是做不到。你能帮我吗？请记住，我的数据库中有多个民意调查。

* * *

**编辑：**谢谢你到目前为止的答案。我很感激帮助。但是我没有很好地解释这个问题。是否有可能仅使用一个`SELECT`. 在到目前为止的答案中，您使用了`$tmp`已经从先前查询中获取的变量。那么有可能做到还是我没有得到答案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T11:44:10.500

```
SELECT pollQuestion, pollAnswerID, pollAnswerText
FROM   poll_answers pa, poll p
WHERE  p.pollID='$tmp'
       AND pa.pollId = p.pollID 
```

或者，如果您更喜欢`INNER JOIN`语法，

```
SELECT pollQuestion, pollAnswerID, pollAnswerText
FROM   poll p
INNER JOIN
       poll_answers pa
ON     pa.pollId = p.pollID
WHERE  p.pollID='$tmp' 
```

要获取数组中的所有内容，请使用：

```
SELECT  -1, pollQuestion
FROM    poll p
WHERE   p.pollID = @pollID
UNION ALL
SELECT  pollAnswerID, pollAnswerText
FROM    poll_answers pa
WHERE   pa.pollID= @pollID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T11:47:53.813

```
SELECT polls.pollID, answers.pollAnswerID, answers.pollAnswerText 
FROM poll polls
LEFT JOIN poll_anwers answers ON polls.pollID = answers.pollID
WHERE polls.pollID = " . (int) $pollId . " 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T12:14:09.057

您想要所有民意调查的所有答案吗？只需删除 pollID 约束：

选择 p.pollID p.pollQuestion, pa.pollAnswerID, pa.pollAnswerText 从投票 p, poll_answers pa WHERE pa.pollID = p.pollID

# c# - 如何使用 SqlDataSource 处理异常

> ID：705134
> 
> 赞同：4
> 
> 时间：2009-04-01T11:46:15.567
> 
> 标签：c#, asp.net, vb.net, datagridview, sqldatasource

我有一个向我的 GridView 提供数据的 SqlDataSource。这就是我在表单上使用的全部内容，因此我根本没有代码。但是在某个地方我需要一个 TRY CATCH 块，以防我的连接丢失。我必须在哪里放置什么代码？

如果我收到错误，我希望我的 lblMessage 文本为“无连接”。

**编辑**

我的 Machine.aspx 中的 GridView

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AutoGenerateColumns="False" 
    Height="209px" PageSize="7" Width="331px" AllowSorting="True" 
                DataSourceID="SqlDataSource1">
    <Columns>
        <asp:BoundField DataField="Total" HeaderText="Total" ReadOnly="True" 
            SortExpression="Total" DataFormatString="{0:R#,###,###}" >
            <HeaderStyle HorizontalAlign="Left" />
        </asp:BoundField>
        <asp:BoundField DataField="b134_rmcid" HeaderText="Machine"  ReadOnly="True" 
            SortExpression="b134_rmcid" >
            <HeaderStyle HorizontalAlign="Left" />
        </asp:BoundField>
        <asp:BoundField DataField="b134_recdate" DataFormatString="{0:d/MM/yyyy}" 
            HeaderText="Date" ReadOnly="True" SortExpression="b134_recdate" >
            <HeaderStyle HorizontalAlign="Left" />
        </asp:BoundField>
    </Columns>
</asp:GridView> 
```

我在 Machine.aspx 中的 Gridview 下的连接

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ODBC_ConnectionString %>" 
    ProviderName="<%$ ConnectionStrings:ODBC_ConnectionString.ProviderName %>" 

    SelectCommand="SELECT SUM(b134_nettpay) AS Total, b134_rmcid, b134_recdate FROM B134HRE" 
    onselected="SqlDataSource1_Selected">

</asp:SqlDataSource> 
```

我的代码在我的 Machine.aspx.cs 中的代码隐藏文件中

```
protected void Page_Load(object sender, EventArgs e)
{
    lblError.Text = "hello there";
    SqlDataSource1.Selected += new SqlDataSourceStatusEventHandler(SqlDataSource1_Selected);

}

protected void SqlDataSource1_Selected(object sender, SqlDataSourceStatusEventArgs e)
{

  if (e.ExceptionHandled)
   {

       lblError.Text = "There is a problem";  

   }

} 
```

当我在我的选定事件中放置一个断点时，仍然有一些准备好它甚至没有到达它？？？

为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T12:05:41.227

SqlDataSource 有一个`Selected`事件。像这样向这个事件添加一个处理程序，并在这个处理程序中处理任何错误（显示信息性消息等）。

```
void GridView1_Selected(object sender, SqlDataSourceStatusEventArgs e)
{
    if (e.ExceptionHandled)
    {
        //Show error message
    }
} 
```

对不起，但你将不得不在代码隐藏中有一些代码！

**编辑**

查看您的代码，我认为您从未绑定过 GridView，因此您的 SqlDataSource 永远不会尝试从数据库中选择数据。

在您的 Page_Load 方法中，添加以下代码：

```
 if (!IsPostBack)
    {
        GridView1.DataBind();
    } 
```

**进一步编辑**

尝试在您的 SqlDataSource 上将“onselected”更改为“OnSelected”，并删除该行以在后面的代码中绑定您的事件处理程序。

如果这不起作用，我会感到难过，因为你基本上有最简单的例子。

**甚至进一步编辑**

试试这个

```
void SqlDataSource1_Selected(object sender, SqlDataSourceStatusEventArgs e)
{
    if (e.Exception != null)
    {
        //Show error message
        lblError.Text = "There is a problem"; 

        //Set the exception handled property so it doesn't bubble-up
        e.ExceptionHandled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T08:21:11.010

您需要处理来自 Gridview_ItemInserting 或 gridview_itemupdating 代码后面的错误，以便在您的代码提交到 sql 控件之前触发。

```
protected void GridView1_ItemInserting(object sender,DetailsViewInsertEventArgs e)
{
if (e.Exception != null)
{
Lblerror.text="error message"
}
} 
```

这样做也是为了更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T11:55:52.640

我相信您想要处理 SQLDataSource 的 Selected 事件，并检查事件参数是否存在异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-24T02:49:01.807

为 SqlDataSource 的 Selected 事件创建一个事件处理程序，测试是否发生异常，执行您想要的任何错误报告，然后表明您现在已经处理了该错误。

```
 mSqlDataSource.Selected += new sqlDataSourceStatusEventHandler(mSqlDataSource_Selected);

    void mSqlDataSource_Selected(object sender, SqlDataSourceStatusEventArgs e)
    {
        if (e.Exception != null)
        {
            mErrorText.Text = e.Exception.Message;
            mErrorText.Visible = true;
            e.ExceptionHandled = true;
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T07:11:06.040

```
void SqlDataSource1_Selected(object sender, SqlDataSourceStatusEventArgs e)
{
if (e.Exception = null)
{
//bind data to gridview
GridView1.DataBind();
}
else
{
//Show error message    
lblError.Text = "There is a problem";
//Set the exception handled property so it doesn't bubble-up
e.ExceptionHandled = true;
}
} 
```

# dll - “热修复”dll 的“缓存”行为

> ID：705136
> 
> 赞同：2
> 
> 时间：2009-04-01T11:46:56.453
> 
> 标签：dll, caching, windows-xp

有时，客户（或测试人员）需要为我工作的产品安装补丁。有时，我会为他制作一个包含修复程序的 dll，以便他可以对其进行测试。他用新版本覆盖旧 dll 并重新启动应用程序。

时不时地，似乎实际上并未使用“新” dll，尽管我绝对肯定我的全新闪亮字节被复制*到*旧 dll 上。

更糟糕的是，在第一次“热修复”运行后，当重新启动应用程序时，新功能显然*已*加载......并且永远不会再看到旧的行为。

有没有人观察到这种行为？XP加载程序有可能是最近使用的“缓存”类的dll吗？

（注意：这发生在 XP SP2 上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-19T13:09:54.407

是的，这是可能的。Windows 不允许您删除正在使用的文件，但奇怪的是（至少对于 Windows），您可以在 DLL 仍在使用时重命名它。如果您的测试人员使用了一些东西

*   将 dll 重命名为 dll.orig
*   复制新的dll
*   重新启动应用程序

可能会发生，如果 dll.orig 版本**尚未完全卸载**（因为某些仍在启动的应用程序仍然具有对它的引用），它仍然会被使用。

这也咬了我好几次。因此，我通常会更改一些行为（主要是日志文件的标题），以便我可以确定某些事情没有发生。

解决方法很简单：关闭所有使用此 DLL 的程序。Sysinternals Process Explorer 有助于找到使用它的应用程序。

# asp.net-mvc - 视图未在实时 MVC 应用程序中打开

> ID：705137
> 
> 赞同：1
> 
> 时间：2009-04-01T11:47:35.280
> 
> 标签：asp.net-mvc, publishing

在我发布我的应用程序后，除了 default.aspx 之外，网站中的任何链接都不起作用。当我单击它们时，会显示“找不到页面”。我想，这与路由有关。但是我没有对默认的 mvc 路由设置做任何更改。什么可能导致这种事情？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T11:50:53.027

验证托管您已发布网站的 IIS 是否具有运行 ASP.NET MVC 的所有正确设置（有关如何设置 IIS 6 和[有关IIS 7 的信息，请参阅](http://blogs.dovetailsoftware.com/blogs/kmiller/archive/2008/10/07/deploying-an-asp-net-mvc-web-application-to-iis7.aspx)[此](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)内容）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:49:56.243

需要更多细节来调试问题。快速注意，首先检查服务器日志（IIS/Apache）——它会指示请求是否到达服务器、请求路由到哪里、谁处理了它以及发生了什么。还要检查服务器错误日志。

# asp.net - 用 jquery ajax 调用替换项目数据绑定

> ID：705145
> 
> 赞同：1
> 
> 时间：2009-04-01T11:50:18.660
> 
> 标签：asp.net, jquery, json

我们有一个非常慢的带有中继器的 ASP.NET 页面。它很慢，因为大部分处理都是在转发器的 ItemDataBound 事件中完成的。所有这些处理只会在每行中显示 2 个总数。

要增加吞吐量，最好在没有 ItemDataBound 事件且没有 2 个总数的情况下加载转发器。而不是在浏览器中加载页面时，可以从每一行进行 AJAX 调用，并且可以异步显示总计。

您能否指出实现这种解决方案的任何代码示例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2011-03-24T18:47:33.657

事实上，jQuery.ajax() 调用在这里是一个不错的选择。您可以使用它来调用代码隐藏中定义的[WebMethod](http://encosia.com/2008/05/29/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

至于服务器端计算，您有几个选择：

1.  将执行计算所需的值嵌入到每行中的 HiddenFields 中，并通过 ajax() 调用中的参数将它们传递给您的 webmethod。

2.  使用与上述类似的方法 (HiddenField) 为该行传递一个唯一 ID，并根据该 ID 进行计算。

至于代码，它可能看起来像这样：

```
$('span.show-total').hover(
    function(){

        // Show panel here

        $.ajax({
            type: "POST",
            url: "PageName.aspx/MethodName",
            data: '{"uniqueId":"' + $(this).find('input[id$=YourHiddenFieldID]').val() + '"}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                // Do something interesting here.
                alert(msg.d);
            }
        });
    },
    function(){
       // Hide panel here
    }
); 
```

# wcf - WCF 中的 ChannelFactory.CreateChannel 和代理实例化很慢

> ID：705150
> 
> 赞同：2
> 
> 时间：2009-04-01T11:51:31.387
> 
> 标签：wcf

我有一个客户端-服务器应用程序，其中客户端使用 WCF 与服务器通信（客户端和服务器都使用 WCF）。我的问题是，在客户端实例化自动生成的代理，方式如下：

```
 new Service1Client() 
```

持续 15.xxx 秒。我试图解决这个问题，并得出以下结果：

1) 在其他计算机上编译和运行相同的代码，以相同的方式结束（总是 15.xxx 秒）。

2）使用实例化代理`ChannelFactory.CreateChannel< IService1 >()` 没有帮助（它给出了相同的结果）。

我的猜测是，每当通道工厂创建一个通道时，它都会尝试以 15 秒的超时时间做某事，当它失败时，它会继续创建。

顺便说一句，我使用没有 SP1 的 .Net 3.5，并且无法升级到 SP1 :(

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-12-03T13:27:28.873

即使它已经过时，它可能对其他搜索相同内容的人有用。问题可能与 DNS 解析问题有关，这可能在 SP1 中得到解决。因此，您可以检查它是否仅在您使用主机名或指定 IP 地址时发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T11:57:09.063

我以前见过这个，在寻找代理服务器时花费了时间。检查您的 WinINET (Internet Explorer) 代理设置。

* * *

我考虑“代理服务器”的具体原因是它需要 15 秒。对于网络超时，15 秒听起来是个不错的整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-11T05:48:50.860

尽管这是非常古老的信息，但我也发现了这个问题，尽管我在第一次调用服务客户端上的方法时遇到了 7 秒的延迟，但我（在我的环境中）将它跟踪到 Internet Explorer 设置，如上所述，但是在我的情况不是启用代理，而是自动检测设置。

连接 -> 局域网设置和自动检测设置已启用。

我玩了 machine.config 和 app.config 并设置

```
<runtime>
  <generatePublisherEvidence enabled="false"/>
</runtime> 
```

这也没有什么区别。

我在这里找到了这个答案，并认为我会提供更多信息，以防将来其他人遇到类似的情况。

（这带有 .Net 4 WCF 服务）

# apache-flex - 解释 Adob e Flex

> ID：705152
> 
> 赞同：4
> 
> 时间：2009-04-01T11:51:33.790
> 
> 标签：apache-flex, adobe

我已经使用 Adob​​e Flex 一年多了，我真的很喜欢它，因为我不太擅长 Javascript。

但我只是想知道如果我是想制作 Adob​​e Flex 的人，我将如何向我的老板解释，我在制作什么？我的老板不会简单地说，“但是你计划做的几乎所有事情都有 Javascript”。

如果我需要为这个涉及大量“宝贵”开发人员时间的项目获得批准，我会对他说什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T11:56:06.477

好吧，我认为您用**宝贵的开发人员时间**找到了正确的位置。*如果您正在构建的是一个类似桌面的*应用程序， FLEX 将为您节省大量时间，具有大量各种形式和字段。

此外，您可能会争辩说，在浏览器上运行 FLEX APPS 的唯一需要是 FLASH 插件。因此，几乎每个人都可以运行您的应用程序，而无需经历安装新插件、框架或任何东西的所有危险。就像 JavaScript 一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T12:05:55.300

Flex 具有丰富的 UI 体验，提供更多功能，需要的编码太少，在服务器端编译并以二进制形式（作为 SWF 文件）推送到客户端，独立于客户端（因此您不必进行浏览器调整）并且与服务器端技术有更紧密的集成。与 LiveCycle (LCDS) 集成，您可以让服务器将数据推送到弹性客户端，而不是基于拉取的机制。优势清单将不断增加……

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T17:40:16.883

不过，我认为你的老板有一个有效的观点。仅仅因为您有能力在 Flex 中做某事并不意味着这是正确的决定。从你老板的角度来看：

*   可维护性 - 如果您离开或其他人加入您的团队，找到 javascript 开发人员比找到 flex 开发人员更容易
*   虽然 flash 的采用率很高，但它不像 javascript 那样 100%
*   flex 界面可能会让您的用户感到困惑（如果他们习惯于纯 Web 应用程序）
*   专有与开放标准

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T12:38:19.357

我会向他展示[Tour de Flex](http://flex.org/tour)，这样他就可以看到构建跨浏览器和操作系统的出色 UI 是多么容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T11:58:20.387

两者之间的主要区别在于，与 JavaScript 相比，ActionScript 在其库中提供了更多易于使用的功能。一个类比可能是 .NET 框架与 Windows API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T04:54:19.140

询问您的老板他是否希望您必须继续进行主要测试，并可能*在您的目标浏览器平台之一更新时更新 JavaScript 库（无论您使用哪个），对于每个浏览器*，或者他是否希望您只测试应用程序中直接与浏览器交互的少数小众部分，例如“文件上传”。

如果他*更愿意*承担额外的测试工作和风险，那么……

（当然，这取决于您的环境——您能否确保您的所有用户都拥有 Flash，例如在公司 Intranet 中？如果是，那么您是安全的。此外，Apache Flex 很可能能够以 HTML5/JS 为目标无论如何，在第 5 版。）

此外，一种实际的、真正面向对象的语言将比 JS 更有生产力。

# visual-studio - Visual Studio 布局保存在哪里？

> ID：705161
> 
> 赞同：7
> 
> 时间：2009-04-01T11:55:54.777
> 
> 标签：visual-studio, visual-studio-2008, layout

当我关闭它并再次打开时，或者当我从编码到调试并返回时，我遇到了 VS2008 移动窗口和丢失选项卡的问题。（是的，我知道它应该为编码和调试保存不同的布局）。我曾尝试导出我的设置，但它告诉我很有帮助

> 您的设置已导出，但出现了一些错误。错误 1：由于内部错误，某些命令栏设置未正确导出。

再次导入它们会出现类似的错误，并且不能解决问题。有谁知道 VS 在哪里保存布局信息？或者如何在不更改我所有其他设置的情况下重新初始化布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:01:50.690

这就是你所追求的：

工具 > 导入和导出设置

你需要让它工作。也许从 My Documents\Visual Studio 2008\Settings 手动保存

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T12:03:22.777

*   导出当前设置。不要选择导出布局设置。
*   将 IDE 设置重置为您喜欢的
*   导入导出的设置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T12:04:13.213

你可能想试试`Window > Reset Window Layout`。这将按照您上次导入布局时的配置方式重置窗口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T13:16:13.023

一些布局信息存储在当前用户的注册表中。

> HKCU:\Software\Microsoft\VisualStudio\9.0

如果您真的遇到很多问题，您可以采取删除或重命名此密钥的绝望步骤。就个人而言，我会重命名它，启动 VS 看看是否解决了我的导入导出设置问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:15:41.903

听起来您可能在尝试导出文件时遇到权限问题。

另一种不太可能的可能性是您的 *.suo 文件正在被版本化，因此当您更新项目时，该项目的布局也会更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-01T16:55:03.960

就导出错误而言，这似乎是 VS 中长期存在的错误，他们似乎无法修复它。导出设置时，取消选中菜单和命令栏的复选框。这似乎是通常引发错误的那个。然后，在重置所有设置之前，您至少会备份几乎所有内容。

# javascript - “一流的对象”是什么意思？

> ID：705173
> 
> 赞同：153
> 
> 时间：2009-04-01T12:00:19.680
> 
> 标签：javascript

在[最近的一个问题](https://stackoverflow.com/questions/700684/content-ideas-for-a-short-javascript-lesson)中，我收到了一些建议来讨论 JavaScript 中函数是“一等”对象的方面。在这种情况下，与其他对象相比，“头等舱”是什么意思？

编辑（Jörg W Mittag）：完全重复：[“什么是一流的编程结构？”](http://StackOverflow.Com/questions/646794/)

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2009-04-01T12:04:03.307

引用[维基百科](http://en.wikipedia.org/wiki/First-class_function)：

> 在计算机科学中，如果将函数视为一等对象，则称一种编程语言支持一等函数（或函数字面量）。具体来说，这意味着该语言支持在程序执行期间构造新函数，将它们存储在数据结构中，将它们作为参数传递给其他函数，并将它们作为其他函数的值返回。

这个页面也很好地[说明了它：](http://helephant.com/2008/08/functions-are-first-class-objects-in-javascript/)

> 真的，就像任何其他变量一样

*   函数是 Object 类型的实例
*   函数可以具有属性并具有返回其构造函数方法的链接
*   您可以将函数存储在变量中
*   您可以将函数作为参数传递给另一个函数
*   您可以从函数返回函数

*还看了 TrayMan 的评论，有意思……*

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2009-04-01T13:57:10.243

[英国计算机科学家Christopher Strachey](http://Wikipedia.Org/wiki/Christopher_Strachey)在 1960 年代引入了编程语言中[“一流函数”](http://C2.Com/cgi/wiki/?FirstClass)的概念。这一原则最著名的表述可能是Gerald Jay Sussman 和 Harry Abelson[在计算机程序的结构和解释中：](http://MITPress.MIT.Edu/sicp/full-text/book/book-Z-H-12.html#call_footnote_Temp_121)

*   它们可以由变量命名。
*   它们可以作为参数传递给过程。
*   它们可以作为程序的结果返回。
*   它们可能包含在数据结构中。

基本上，这意味着你可以用函数来做任何你可以用编程语言中的所有其他元素做的事情。因此，在 JavaScript 的情况下，这意味着你可以用整数、字符串、数组或任何其他类型的对象做的所有事情，你*也*可以用函数做。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-06-04T12:05:11.247

更完整地批准 Strachey-Sussman-Abelson 的配方。因此，如果您的语言支持这种结构，那么您就拥有了***作为一流***语言的功能:)

```
var men = function (objectOfAdmiration) {
  return objectOfAdmiration();
};
men.isSweetHeart = true;

var women = function (objectOfAdmiration) {
  return objectOfAdmiration();
};
women.isSweetHeart = true;

var aliens = function (objectOfAdmiration) {
  return objectOfAdmiration();
};

function like(obj){
  if (obj.isSweetHeart) {
      return function (){ return "Holy TRUE!"}; 
  }
  else {
      return function (){ return "Holy CRAP!"};
  }
}

alert("Men like women is " + men(like(women))); // -> "Holly TRUE!"
alert("Women like men is " + women(like(men))); // -> "Holly TRUE!"

alert("Men like aliens is " + men(like(aliens))); // -> "Holly CRAP!"
alert("Aliens like women is " + aliens(like(women))); // -> "Holly TRUE!" :)

//women(like(aliens)); //  Who knows? Life is sometimes so unpredictable... :) 
```

简而言之，如果任何事物在语言中充当状态操作类的对象或对象类型，那么它就是一流的对象。简单地说，您可以操作并传递语句并同时在表达式中求值。甚至更短：当您可以将函数视为可以额外调用的对象时。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-04-24T13:28:18.207

在 javascript 中，函数是一流的对象，因为它可以做的比对象所能做的要多得多。

*   函数是 Object 类型的实例。

`Function instanceof Object //returns true`

像对象一样，函数可以具有属性，并且可以具有指向其构造函数的链接。

```
 var o = {}; // empty object 'o'
    o.a = 1 ; 
    o.b = 2 ; 

    console.log(o.a); // 1
    console.log(o.b); // 2 

    function foo(){};
    foo.a = 3 ; 
    foo.b = 4 ; 

    console.log(foo.a);  // logs 3
    console.log(foo.b);  // logs 4 
```

*   函数可以作为值存储在变量中。

```
 var foo = function(){}; 
    console.log(foo); // function(){}
```

*   函数可以作为参数传递给其他函数

```
function callback (foo){
      foo();
}

callback(function(){console.log('Successfuly invoked as an argument inside function callback')})
```

*   你可以从一个函数返回一个函数

```
 function foo(){
	    return function(){console.log('working!')};
    }

    var bar = foo();
    bar(); // working!
```

*   可以存储在变量中作为参考。

```
 var sum = function (a,b){return a+b}  
    sum(4,4);
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-20T15:40:38.007

JavaScript 函数是一等函数，这意味着函数和对象被视为同一事物。函数可以作为变量存储在对象或数组中，也可以作为参数传递或由另一个函数返回。这使得函数成为“JavaScript 中的一等公民”

JavaScript 使用文字符号语法，这使得很难完全掌握 JavaScript 中的函数是对象这一事实。

例如..

```
var youObj1 = new Object();
// or
var youObj1 = {}; 
```

两个声明是等价的。通过使用**`new`**，我们正在调用对象的构造函数。同样通过使用`{}`（JavaScript 快捷方式称为文字）我们调用对象的构造函数。`{}`只是实例化构造函数的较短表示。

大多数语言使用**`new`**关键字来创建对象，所以让我们创建一个 JavaScript 对象。

```
var myFunction = new Function("a",  "b", 'return a_b'); 
```

如您所见，我们创建了一个对象名称**函数**。

使用 JavaScript 函数表达式创建相同的对象名称函数..

```
var myFunction = function myFunction(a,b) {
    return a+b;
} 
```

在这里，我们刚刚创建了一个对象名称函数。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-04-01T12:53:50.957

简单的测试。如果您可以用您的语言（例如 Python）执行此操作：

```
def double(x):
    return x*x

f = double

print f(5) #prints 25 
```

您的语言将函数视为一流的对象。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-08-21T10:37:26.507

Mozilla 网站上的定义简洁明了。根据他们，

> 在 JavaScript 中，函数是一等对象，**因为它们可以像任何其他对象一样具有属性和方法**。它们与其他对象的区别在于可以调用函数。简而言之，它们是 Function 对象。

和

> 函数是一个“子程序”，可以由函数外部（或在递归的情况下为内部）的代码调用。与程序本身一样，函数由称为函数体的一系列语句组成。可以将值传递给函数，该函数将返回一个值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-01T12:05:24.817

这意味着函数是对象，具有类型和行为。它们可以动态构建，像任何其他对象一样传递，并且可以调用它们是它们接口的一部分。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-04-01T12:05:26.050

这意味着该函数实际上继承自 Object。这样您就可以像处理任何其他对象一样传递它并使用它。

但是，在 c# 中，您需要避免使用委托或反射来处理函数。（最近使用 lambda 表达式变得更好了）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-01T12:05:48.200

我猜当某物在一种语言中是一流的，这意味着它是由它的语法而不是库或语法糖支持的。例如，C 中的类不是一流的

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-23T09:25:51.737

在 JavaScript 中很简单，函数是一流的对象，也就是说，函数属于 Object 类型，并且它们可以像任何其他对象（字符串、数组、数字等）一样以一流的方式使用，因为它们实际上是对象他们自己。它们可以“存储在变量中，作为参数传递给函数，在函数中创建，并从函数返回

# iis - IIS OpenLDAP

> ID：705176
> 
> 赞同：3
> 
> 时间：2009-04-01T12:01:36.247
> 
> 标签：iis, openldap

是否可以（以及如何）让 IIS 针对 OpenLDAP 服务器检查用户？

# asp.net - ASP.Net 使我的 html 评论可见

> ID：705186
> 
> 赞同：0
> 
> 时间：2009-04-01T12:04:20.763
> 
> 标签：asp.net, html, comments

在我的页面源代码中，我输入了：`<!-- A comment -------->`

和 ASP.Net 将其转换为：`&lt;!-- A comment --------&gt;`

所以当它到达浏览器时，我的评论是可见的。

它不会对所有评论都这样做，如果我添加另一条评论，它有时会使评论消失。

有人见过这个吗？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:06:36.157

尝试在`-->`. 它猜这可能会有所帮助。不过我之前没有遇到过这样的问题。

这是一个很好的做法：

*   **没有——在评论中**
*   **`<!--`以没有更多破折号开始您的评论**
*   **`-->`以没有更多的破折号结束您的评论**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:15:35.917

请查看此页面的[评论](http://htmlhelp.com/reference/wilbur/misc/comment.html)，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:18:53.767

Response.Write(" `<!--`");

html的其余部分？

Resonse.Write("-->");

# c# - 进程已退出，但仍在打印缓冲区，c#

> ID：705187
> 
> 赞同：1
> 
> 时间：2009-04-01T12:04:44.367
> 
> 标签：c#, process, standards

嗨，我在 C# 中创建了一个进程来执行外部程序，我使用异步方法读取标准输出，一切正常。但是我有一个问题，我正在打印一条指示该过程已完成的行。问题是，有时当缓冲区中的数据很大时可能会发生这种情况，进程可能会退出，但由于打印发生在其他线程上，它可能仍在打印数据。因此，指示进程已终止的信息会在整个输出打印之前显示出来。.NET 中是否提供任何东西来解决此类问题？因为我正在进行异步调用，所以我无法访问 process.standardoutput 值，因为它会引发冲突。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:10:44.353

在你的线程之间使用同步！

您应该查看[AutoResetEvents](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)，它完全适合您的场景（即一个线程想要通知另一个事件发生 - 在您的示例中，缓冲区读取结束）

通常，您的主线程将等待 AutoResetEvent，一旦工作完成，它将由工作线程触发。

在这种特定情况下（即等待线程完成），您还可以使用[Thread.Join](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)，它将阻塞您的主线程，直到您的工作线程终止

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:12:07.063

如果在异步委托上调用 EndInvoke，则线程应该阻塞，直到操作完成。

# linq - Silverlight 3 - RIA 服务和 LINQ

> ID：705200
> 
> 赞同：1
> 
> 时间：2009-04-01T12:06:08.840
> 
> 标签：linq, silverlight, silverlight-3.0

这是一个基本的 LINQ 问题。

在我的 RIA 服务应用程序中，我有一个 Family 对象，子列表中有联系人。这是一个实体框架应用程序。

我想知道为什么当我选择我的家人时，联系人的子列表没有加载，我知道它必须是因为延迟加载，但是如何让我的查询加载孩子。

```
var fam = from f in ContextContainer.FamilyCtx.Families
                        where f.familyId == fID
                        select f; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:02:08.360

我认为你应该有类似的东西：

ContextContainer.LoadFamilies(fam, null);

“LoadFamilies”是从 RIA 服务自动生成的。

当异步结果完成时，应该有一个 OnLoaded 事件。

然后你可以说 somelistbox.ItemSource = e.LoadedEntities

# winapi - 如何在 Visual C++ 中获取用户时间和系统时间？

> ID：705203
> 
> 赞同：0
> 
> 时间：2009-04-01T12:06:33.067
> 
> 标签：winapi, visual-c++

linux系统中是否有一些与time.h等效的API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:10:09.690

time.h 中的函数是标准的——它们在 VC++ 中也可用。但是，没有区分系统时间和用户时间的标准函数。

# html - 如何使用 CSS 边框对我的部分进行可视化分组？

> ID：705204
> 
> 赞同：0
> 
> 时间：2009-04-01T12:06:35.953
> 
> 标签：html, css

我正在尝试使用 css 边框在视觉上对我的部分进行分组，但是为我的第二部分绘制的边框包含第一个部分，因此看起来很糟糕。我怎样才能使边界正确。

我的代码：

我的第一个 div 向左浮动，它的边框正确显示，只包含它需要的区域。它主要在页面左侧具有输入元素。

```
<div style="float: left; margin-right: 40px; border-width: medium; 
border-color: Black; border-style: solid"> 
```

我的第二个 div 也主要是文本框和标签，它有这个 div 声明：

```
<div style="border-width: medium; border-color: Black; 
border-style:solid"> 
```

不幸的是，我必须遗漏一些关于 css 框模型的东西，因为这个边框一直向左延伸并包含另一个 div。我试图让两个框包含每个 div，以便有一些视觉分离和分组。如果我必须使用边框以外的东西，那也没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:18:34.397

首先为您`div`的 s 设置一个宽度，以便它们不再覆盖整个页面。（尝试`width: 50%`开始）

然后根据需要使用`margin`（或/// `margin-left`）为您的 s 分配边距。这样边界就不会崩溃了。`top``bottom``right``div`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:12:52.100

也将 float:left 添加到第二个 DIV - 如果有足够的宽度，它们仍将并排显示，但第一个的空间不会留在第二个“内部”，这就是您所看到的此时此刻。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:27:06.633

您可以通过使用“fieldset”标签轻松实现这一目标。这样，您可以使用“图例”标签为不同的组设置标题。

# c# - 动态生成的 CheckBox 的事件生成问题

> ID：705206
> 
> 赞同：0
> 
> 时间：2009-04-01T12:06:37.293
> 
> 标签：c#, asp.net

我有一个带有动态生成的复选框列的数据网格..我无法为复选框生成 checkChanged 事件..

这是我的代码：

```
public class ItemTemplate : ITemplate
{
    //Instantiates the checkbox
    void ITemplate.InstantiateIn(Control container)
    {
        CheckBox box = new CheckBox();            
        box.CheckedChanged += new EventHandler(this.OnCheckChanged);
        box.AutoPostBack = true;
        box.EnableViewState = true;
        box.Text = text;
        box.ID = id;
        container.Controls.Add(box);
    }

    public event EventHandler CheckedChanged;

    private void OnCheckChanged(object sender, EventArgs e)
    {
        if (CheckedChanged != null)
        {
            CheckedChanged(sender, e);
        }
    }
} 
```

这是事件

```
private void OnCheckChanged(object sender, EventArgs e)
{

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:31:09.170

通常我们在控件上使用“CommandName”属性。这将传递给 GridView 的 RowCommand 事件。然后，您可以检查 CommandName 的值并采取相应措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-21T05:50:21.367

since you add the control dynamically, you also need to add it to the viewState (see overrides for LoadViewState and SaveViewState).

when you do postback, the page has no information about the checkbox you've added and that's why you don't get any event.

please check this article: [http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)

it describes those issues very well.

# .net - VS .Net：发布“主要输出”的构建事件 " 在安装程序项目中

> ID：705209
> 
> 赞同：5
> 
> 时间：2009-04-01T12:07:06.590
> 
> 标签：.net, visual-studio, installation, post-build-event

我在项目中使用以下构建后操作，将 lib 合并到我的应用程序中：

```
IF $(ConfigurationName) == Debug GOTO end
cp $(TargetPath) $(TargetDir)app_unmerged.exe
del $(TargetPath)
"C:\Program Files\Microsoft\ILMerge\ilmerge.exe" /internalize $(TargetDir)MyApp_unmerged.exe $(TargetDir)someLib.dll /out:$(TargetDir)myApp.exe
del $(TargetDir)myApp_unmerged.exe $(TargetDir)someLib.dll
:end 
```

这工作正常。现在我有一个安装程序项目并添加了项目输出。我希望使用“来自的主要输出”，即 /bin/Release 中的 exe。但实际上不是 /bin/release/myApp.exe ，而是 /obj/release/myApp.exe 被使用。

有谁知道我是否可以更改此行为并将 /bin/release 中的输出用于安装程序项目？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-04-04T20:52:19.860

我解决了在 /obj 文件夹中应用 Ilmerge 的问题，这是我的构建后事件配置：

COPY $(ProjectDir)obj\$(PlatformName)\$(ConfigurationName)\$(TargetFileName) $(TargetDir)temp.exe $(solutionDir)\lib\ilmerge /wildcards /t:exe /out:"$(ProjectDir) obj\$(PlatformName)\$(ConfigurationName)\$(TargetFileName)" "$(TargetDir)temp.exe" "$(TargetDir)log4net.dll" "$(TargetDir)other.dll" DEL $(TargetDir)temp 。可执行程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:32:22.940

我明确地放置了文件，这意味着它没有告诉安装项目使用初级内容，而是明确地放置了 .exe/.dll 文件。
这很好用，我可以控制要输入的文件以及设置项目用户的相对路径，以便可以在其他机器上使用设置项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-09T10:40:25.410

似乎这个问题没有真正的解决方案，但存在一种解决方法。我在 Microsoft Connect 上创建了一张票：[https ://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=428898](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=428898)

微软的回答：

你好，

为了执行这些构建后操作，您需要将它们放在一个批处理文件中，然后添加适当的命令以在构建后事件对话框中调用批处理文件。我看到脚本中有几个实例引用了许多 Visual Studio 变量。由于我们没有将这些变量公开为环境变量，因此您必须将它们作为参数传递给批处理文件。

我希望这会有所帮助！

Candy Chiang 项目经理 - Visual Studio

# regex - 正则表达式匹配任意长度的数字字符串，其前面可能有也可能没有 0x

> ID：705218
> 
> 赞同：2
> 
> 时间：2009-04-01T12:12:03.817
> 
> 标签：regex

我想知道您是否可以帮助我制定一个正则表达式来匹配以下模式？

任意长度的数字字符串，前面可能有也可能没有 0x。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T12:18:58.310

像这样的东西：

```
\b(?:0x)?\d+\b 
```

或者这个，如果你想`"0x"`从匹配中排除可选：

```
(?:(?<=\b0x)|\b)\d+\b 
```

前者是：

```
- 单词边界
- “0x”，可选
- 十进制数字，至少一个
- 单词边界

```

后者将是：

```
- 选择
  - 前面的位置
     - 单词边界
     - “0x”
  - 或单词边界
- 十进制数字，至少一个
- 单词边界

```

后者匹配：

```
- 123456
- 0x123456

```

但不是：

```
- 0y123456

```

要匹配十六进制数字（正如您的“0x”所暗示的那样），请使用`[0-9A-Fa-f]`.`"\d"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T12:18:26.923

您能否详细说明问题？你想如何使用比赛？哪种语言/正则表达式实现。

一个可以与多种语言正则表达式实现一起使用的简单方法是。

```
(?:0x)?\d+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T12:21:37.680

如果您希望整个字符串匹配（除了数字之外别无其他）：

```
^(0x)?[0-9]+$ 
```

我在`[0-9]`这里使用的类尽可能便携。您可能更喜欢在`\d`任何实现的地方使用。

它是这样工作的：

*   匹配字符串的开头：`^`
*   匹配一个可选的“0x”：`(0x)?`
*   匹配一位或多位数字：`[0-9]+`
*   匹配字符串的结尾：`$`

如果前面的“0x”表示十六进制数，而省略表示十进制数，则变得更加困难：

```
\b((0x[0-9a-zA-Z]+)|([1-9][0-9]*))\b 
```

这也可以防止以`0`...开头的十进制数字

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:22:58.533

正式的正则表达式：

```
(0x)?[0-9]+ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T12:24:11.510

我总是喜欢提供非常基准的 RE，这样它们就可以在每个 RE 引擎上工作，所以：

```
(0x)?[0-9][0-9]* 
```

在合适的边界条件下（在旧的 RE 发动机上，应该是`[ \t]`），这应该适用于任何地方。

但是，看起来您想要十六进制字符，如果`0x`正确的话，那么您可能想要：

```
(0x)?[0-9A-Fa-f][0-9A-Fa-f]* 
```

或者它在许多其他针对更先进引擎的优秀建议中是等效的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T12:24:53.227

您提到的`0x`建议您要捕获一个十六进制数。在这种情况下，我建议：

```
(?:0x)?[[:xdigit:]]+ 
```

其中`[:xdigit:]`是 Posix 表示法中所有十六进制数的列表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T13:38:42.830

这完全取决于您所说的数字是什么意思，以及在什么情况下允许使用数字。我假设以 0x 开头的数字是十六进制数字，因此也可以包含 AF 和 af。

给定这个测试字符串：`"a 012 0xa 4_56 num:8 42!"`

此正则表达式匹配`"012"`、`"0xa"`、`"4"`、`"56"`和：`"8"``"42"`

```
(0x[\dA-Fa-f]+|\d+) 
```

此正则表达式匹配`"012"`、`"0xa"`和：`"8"``"42"`

```
\b(0x[\dA-Fa-f]+|\d+)\b 
```

此正则表达式匹配`"0xa"`,`"8"`和`"42"`:

```
\b(0x[\dA-Fa-f]+|[1-9]\d*)\b 
```

此正则表达式匹配`"012"`and `"0xa"`：

```
(?<=\s)(0x[\dA-Fa-f]+|\d+)(?=\s) 
```

这个正则表达式匹配`"0xa"`：

```
(?<=\s)(0x[\dA-Fa-f]+|[1-9]\d*)(?=\s) 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-04-01T12:27:23.923

\b((0x[[:xdigit:]]+)|((0|([1-9][0-9]+)))\b

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2009-04-01T12:23:28.237

```
['0x']?[0-9]+ 
```

* * *

> 这是满足最少 30 个字符的更多文本。

# image - 如何将图像添加到 RSS 2.0 中的项目？

> ID：705224
> 
> 赞同：27
> 
> 时间：2009-04-01T12:14:13.860
> 
> 标签：image, rss

有没有办法只为 RSS 提要中的每个项目发送带有链接和一些替代文本的图像？

我查看了`enclosure`标签，但这仅适用于视频和音乐。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2010-10-11T21:33:55.200

该`enclosure`元素**可**用于传输图片。RSS 2.0 规范对此非常清楚，说该类型是 MIME 类型。它并没有说它仅限于音频或视频。

这是一个例子：[一组来自法新社的照片](http://static.newsriver.org/afp/rss.xml)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-11-11T06:47:11.993

这在 RRS2 中是可能的，

见 [http://cyber.law.harvard.edu/rss/rss.html#ltenclosuregtSubelementOfLtitemgt](http://cyber.law.harvard.edu/rss/rss.html#ltenclosuregtSubelementOfLtitemgt)

所以你必须使用附件标签来添加媒体

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-10T01:46:33.453

一种解决方案是在描述中使用 CDATA

```
<![CDATA[
  Image inside RSS
  <img src="http://example.com/img/smiley.gif" alt="Smiley face">         
]> 
```

请注意，您可能对阻止热链接的站点有问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2010-10-11T21:08:28.533

您应该在项目中使用附件标签来包含图像。您可以通过设置正确的 Mime 类型（例如：image/jpeg）并将图像大小包括为“长度”属性来将其用于图像。长度属性不需要完全准确，但需要 RSS 被认为是有效的。

这是一篇[有用的文章](http://blog.forret.com/2005/06/rss-with-images-picture-podcasting/)，讨论了此选项和其他选项。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-01-31T18:58:21.663

要使用 Mailchimp RSS 到电子邮件功能，他们希望`<media:content>`在`<item>`. 这是他们模板中提要项目的图像宏的来源。

因此，您需要添加到声明中

```
xmlns:media="http://search.yahoo.com/mrss/ 
```

然后在`<item>`元素里面添加

```
<media:content medium="image" url="http://whatever/foo.jpg" width="300" height="201" /> 
```

如果没有额外的声明，提要是无效的，因为 media:content 不是已知元素。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-22T12:54:42.983

内部标签 ITEM

```
<image:image xmlns:image="http://web.resource.org/rss/1.0/modules/image/"> 
```

[http://域名](http://domain)。com/image.jpg </image:image>

内部描述标签

```
<![CDATA[
    Some Text..
    <br/><img src='http://domain. com/image.jpg' ><br/>
    More Text
]]> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-04-09T15:47:46.130

关于 <p> 标签问题，您需要在 xml 中对 html 进行编码。

您的代码将如下所示：

```
<description>&lt;p&gt; Text in the tag &lt;/p&gt;</description> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-02-25T21:41:49.443

由于您使用的是 php，因此您可以使用 htmlentities() 对 html 标签进行编码。它们在 xml 中看起来很糟糕，但 RSS 阅读器知道如何处理它。

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

# asp.net - 诊断 IIS 7 和 ASP.NET MVC 上的 404 错误

> ID：705229
> 
> 赞同：19
> 
> 时间：2009-04-01T12:16:27.067
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7, httphandler

我有一个用 Cassini 开发和测试的 mvc 应用程序。部署到我在 GoDaddy 上的站点，默认页面正常。点击登录，我得到一个 404。

我在那里运行在 IIS 7 下，所以这是出乎意料的。我的路线很简单：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default",                                              
            "{controller}/{action}/{id}",                           
            new { controller = "Public", action = "Index", id = "" } 
        );
        routes.MapRoute(
            "Report1",
            "Report/{action}/{start}/{end}",
            new { controller = "Report", action = "Index" }
        );
        routes.MapRoute(
            "Report2",
            "Report/{action}/{start}/{end}/{idList}",
            new { controller = "Report", action = "Index" }
        ); 
```

知道可能发生了什么或如何解决此问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-01T12:19:14.877

您是否在 IIS7**集成模式下运行**？

IIS7 的经典模式**不会**自动将无扩展名 URL 映射到 ASP.NET（很像 IIS6）。

还要确保您的`Web.config` `<system.webServer>`标签配置正确。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-05-10T04:34:00.823

[不要使用 runAllManagedModulesForAllRequests](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)。您想让 IIS 处理图像等资源。

```
<system.webServer> <!-- Rather do NOT use this -->
  <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer> 
```

而是添加 MVC 路由模块

```
<system.webServer>
  <modules>
    <remove name="UrlRoutingModule-4.0" />
    <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
  </modules>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2011-02-15T00:38:04.877

尝试了一切，我必须像这样设置我的网络配置，以使其工作。

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-12T11:00:01.233

我有同样的问题，我上传了控制器、web.config 和其他类，但我忘了上传 bin 文件夹。

在我上传 bin 文件夹后，它工作了！

# zend-framework - 使用 Lucene Search 一次搜索多个索引

> ID：705230
> 
> 赞同：3
> 
> 时间：2009-04-01T12:16:47.287
> 
> 标签：zend-framework, search, lucene

我正在使用 Zend_Search_Lucene 来实现站点搜索。我为不同的数据类型创建了单独的索引（例如，一个用于用户，一个用于帖子等）。结果类似地按数据类型划分，但是有一个“全部”选项应该显示不同结果类型的组合。是否可以一次搜索不同的索引？还是我必须索引所有索引中的所有内容？

更新：ZF 1.8 的[自述](http://framework.zend.com/download/latest)文件表明现在可以在 ZF 1.8 中执行此操作，但我无法在文档中找到它的位置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-03T05:26:28.797

因此，经过一些研究，您必须使用 Zend_Search_Lucene_Interface_MultiSearcher。在撰写本文时，我在文档中没有看到任何提及它，但是如果您查看 ZF 1.8 中的实际类，它很容易使用

```
$index = new Zend_Search_Lucene_Interface_MultiSearcher();
$index->addIndex(Zend_Search_Lucene::open('search/index1'));
$index->addIndex(Zend_Search_Lucene::open('search/index2'));
$index->find('someSearchQuery'); 
```

注意它不遵循 PEAR 语法，所以不会使用 Zend_Loader::loadClass

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-03T00:12:12.403

这正是我处理[huddler.com](http://greenhome.huddler.com/search.php?search=green)搜索的方式。我使用了多个 Zend_Search_Lucene 索引，每个数据类型一个。对于“全部”选项，我只是有另一个索引，其中包括所有索引中的所有内容——所以当我将文档添加到索引中时，我将它们添加了两次，一次添加到适当的“类型”索引，一次添加到“全部“ 指数。与其他 Lucene 实现相比，Zend Lucene 的功能严重不足，因此这是我找到的最佳解决方案。您会发现 Zend 的端口仅支持 lucene 查询语法的子集，而且性能很差——即使在中等索引 (10-100 MB)、像“a*”这样简单的查询或引用的短语也无法充分执行（如果完全）。

当我们将一个大型站点引入我们的平台时，我们发现 Zend Lucene 无法扩展。我们的索引大约达到了 1.0 GB，简单查询最多需要 15 秒。有些查询需要一分钟或更长时间。从头开始构建索引大约需要 20 个小时。

我切换到 Solr；Solr 不仅在索引期间的执行速度提高了 50 倍，而且对许多查询的执行速度提高了 1000 倍（大多数查询在 < 5 毫秒内完成，全部在 < 100 毫秒内完成），它的功能要强大得多。此外，我们能够在 30 分钟内（低于 20 小时）从头开始重建 100,000 多个文档索引。

现在，一切都在一个带有“类型”字段的 Solr 索引中；我对每次搜索的索引运行多个查询，每个查询都有一个不同的“type:”过滤查询，一个没有“type:”的“all”选项。

如果您计划将索引增加到 100+ MB，每分钟至少收到几个搜索请求，或者您想提供任何类型的高级搜索功能，我强烈建议您放弃 Zend_Search_Lucene。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T16:21:57.477

我不知道它是如何与 Zend 集成的，但在 Lucene 中会使用[MultiSearcher](http://lucene.apache.org/java/2_4_1/api/core/org/apache/lucene/search/MultiSearcher.html)，而不是通常的 IndexSearcher。

# ruby-on-rails - Rails：在 n 个关联级别上创建多个模型表单

> ID：705238
> 
> 赞同：4
> 
> 时间：2009-04-01T12:18:40.183
> 
> 标签：ruby-on-rails, forms, webforms

谁能告诉我为什么这个问题末尾的表格不能正常工作？

*   保存不起作用
*   select-helper 不根据对象选择值`@kid`

整个事情都是基于 Rails 2.2.2 的，不，升级到 Rails 2.3 来解决这个问题不是一个选择。:-)

我使用[这个配方](http://media.pragprog.com/titles/fr_arr/multiple_models_one_form.pdf)来构建多模型表单。

```
# CLASS GRANDPARENT
class Grandparent < ActiveRecord::Base
  has_many :parents 
end

# CLASS PARENT
class Parent < ActiveRecord::Base
  belongs_to :grandparent, :class_name => "Grandparent", :foreign_key => "grandparent_id"
  has_many :kids
end

# CLASS KID
class Kid < ActiveRecord::Base
  belongs_to :parent, :class_name => "Parent", :foreign_key => "parent_id"

  # Virtual attribute setter for new self.parent.grandparent (Grandparent) attributes
  def new_grandparent_attributes=(_gp_attributes)
    self.parent.build_grandparent(_gp_attributes)
  end

  # Virtual attribute setter for existing self.parent.grandparent (Grandparent) attributes
  def existing_grandparent_attributes=(_gp_attributes)
    unless self.parent.grandparent.new_record?
      attributes = _gp_attributes[self.parent.grandparent.id.to_s]
      if attributes
        self.parent.grandparent.attributes = attributes
      else
        self.parent.grandparent.delete(grandparent)
      end
    end
  end

end

# CONTROLLER KIDS
class KidsController < ApplicationController
  def new
    @kid = Kid.new
  end

  def edit
    @kid = Kid.find(params[:id])
  end

  def create
    params[:kid][:new_grandparent_attributes] ||= {}
    @kid = Kid.new(params[:kid])
  end

  def update
    params[:kid][:existing_grandparent_attributes] ||= {}
    @kid = Kid.find(params[:id])
  end

end

# THIS IS THE MULTI-MODEL FORM USED IN THE VIEW

<% form_for(@kid) do |f| %>
    <p>
        <% new_or_existing = @kid.parent.grandparent.new_record? ? 'new' : 'existing' %>
        <% prefix = "kid[#{new_or_existing}_grandparent_attributes][]" %>

        <% fields_for prefix, @kid.parent.grandparent do |g_f| -%>
            <p>
              <%= g_f.label :, 'Grandparent Name' %><br />
              <!-- THE FOLLOWING FORM DOESN'T CHANGE ACCORDING TO EXISTING @child -->
              <%= @grandparents = Entity.find(:all, :order => :name)
                g_f.collection_select(:name ,@grandparents, :id, :name) 
                %>
            </p>
        <% end %>
    </p>
    <p>
        <%= f.label :name, "Kid Name" %><br />
        <%= f.text_field :name %>
    </p>
    <%= submit_tag 'Go' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-01T07:41:40.673

好吧，如果我错了，请纠正我，但看起来你实际上并没有将对象保存在任何地方。在您调用的创建和更新操作中`new`，然后不保存它。

要纠正这个问题，你可以这样做：

```
def create
  params[:kid][:new_grandparent_attributes] ||= {}
  @kid = Kid.new(params[:kid])
  if @kid.save
    # successful save logic here
  else
    #failed save logic here
  end
end

def update
  params[:kid][:existing_grandparent_attributes] ||= {}
  @kid = Kid.find(params[:id])
  if @kid.update_attributes(params[:kid])
    #successful save logic here
  else
    #failed save logic here
  end
end 
```

然后在您的选择框中，您尝试查找 的每条记录，而不是与@kid 相关的`Entity`那些字段。`Entity`为此，您必须在孩子和祖父母之间建立关系。

```
# CLASS GRANDPARENT
class Grandparent < ActiveRecord::Base
  has_many :parents
  has_many :grand_kids, :through => :parents
end

# CLASS PARENT
class Parent < ActiveRecord::Base
  belongs_to :grandparent, :class_name => "Grandparent", :foreign_key => "grandparent_id"
  has_many :kids
end

# CLASS KID
class Kid < ActiveRecord::Base
  belongs_to :parent, :class_name => "Parent", :foreign_key => "parent_id"
  belongs_to :grandparent

  # ... 
```

通过这种方式，您可以通过 访问孩子的祖父母`@kid.grandparents`。然后您可以生成选择字段：

```
<%= g_f.collection_select(:name ,@kid.grandparents, :id, :name) %> 
```

# ruby-on-rails - 用户在聊天室中（通过简单轮询更新聊天）

> ID：705241
> 
> 赞同：4
> 
> 时间：2009-04-01T12:19:59.587
> 
> 标签：ruby-on-rails, chat, ajax-polling

我们使用简单的 Ajax 更新在 Rails 中实现了一个简单的聊天室功能。现在，在每个聊天室中，一条消息都属于特定用户。我们想要显示用户列表（类似于用户存在）。请提出方法。我们没有使用 Jabber、XMPP 等。

聊天室模型是：

```
class ChatRoom < ActiveRecord::Base
  validates_presence_of :title

  has_many :messages,:foreign_key=> "chat_room_id"
  has_many :stories,:foreign_key=>"chat_room_id"
  has_many :topics,:foreign_key=>"chat_room_id"

end 
```

消息是每个用户发送的聊天记录。

消息模型为：

```
class Message < ActiveRecord::Base
  belongs_to :user
end 
```

用户模型是：

```
class User < ActiveRecord::Base
  acts_as_authentic :crypto_provider => Authlogic::CryptoProviders::BCrypt
  validates_presence_of :nick
  validates_uniqueness_of :nick
  has_many :questions
  end 
```

请建议方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T13:25:23.503

要跟踪哪些用户在哪个房间中，您可以在 ChatRoom 和 User 模型之间设置 HABTM 关系。而且，您可以在 User 模型中添加 last_poll_datetime 列来跟踪用户最后一次轮询消息的时间（稍后会详细介绍这部分）。

要显示给定房间中所有用户的列表，请使用您的 HABTM 连接表 ChatRooms_Users。每当用户加入或离开房间时，您都将在此表中插入/删除。

如果您想让关闭浏览器而不是单击“离开房间”的用户过期，请设置一个清扫任务以每分钟运行一次，以查找 last_poll_datetime 早于一分钟的用户，并从 ChatRooms_Users 连接表中删除他们的行。

# .net - 在对象上设置属性的最快方法？

> ID：705242
> 
> 赞同：1
> 
> 时间：2009-04-01T12:21:06.027
> 
> 标签：.net

假设您有一个具有很多属性的业务对象。在不使用 ORM 工具的情况下设置属性的最简单和最好的方法是什么？

这意味着从数据读取器对象设置属性，例如

```
client.Name = (string)reader["Name"]; 
```

那么对象包含其他复杂对象的情况呢？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:27:42.487

好吧，您可以使用反射来生成分配代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:27:17.447

序列化和/或反射是一种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T12:34:22.157

你要求三个不同的东西：

*   最快的
*   最简单的
*   最好的

他们是不一样的！*最快*（在执行时）将是编译代码；即您编写常规C# 来正确设置属性。使用反射比这更容易——但这很慢。您还需要一些机制来映射子属性...（如果读者之间没有 1:1 的对应关系，还需要映射常规属性）。这可能最好通过成员（属性/字段）的自定义属性来解决。

作为速度上的妥协（过度反射），您可以使用 Delegate.CreateDelegate 来获取属性设置器 - 但这是很多工作。也许另一个选择是[HyperDescriptor](http://www.codeproject.com/KB/cs/HyperPropertyDescriptor.aspx)；这允许类似反射的访问，但速度要快得多。

最好的？可能使用现有代码——即 ORM 工具；少写和调试。

# jquery - 有没有结合 Draggable 和 Selectable 的 JQuery 插件

> ID：705250
> 
> 赞同：28
> 
> 时间：2009-04-01T12:22:46.040
> 
> 标签：jquery, html, draggable

我正在寻找一个包含许多项目的 Web 界面，这些项目可以选择并拖动以定位它们，**无论是分组还是单独**。真的很像 Windows 桌面。

我们已经在使用 JQuery，所以添加它是首选。JQuery UI Draggables 和 Selectables 单独完成了我们想要的大部分工作，但并没有真正协同工作以提供我们正在寻找的那种效果。

我完全被 JQ 插件网站弄得不知所措（它的“流行”算法似乎不是很有用），并且欢迎提供有关避免大量车轮改造的最佳方法的指导，因为我猜这个比喻有已经完成了。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2009-06-28T20:16:21.393

我也需要做同样的事情，我不想使用 eyecon.ro 的界面扩展。经过一番研究，我发现[*Combining Selectables And Draggables Using jQuery UI*](http://www.ryancoughlin.com/2008/11/23/combining-selectables-and-draggables-using-jquery-ui/)。讲得很好，但是要使代码片段运行，您必须深入研究它。我能够让它工作。我稍微改变了它，这是我完成它的方法。它需要修改才能在生产级别使用，但我希望它有所帮助。

```
// this creates the selected variable
// we are going to store the selected objects in here
var selected = $([]), offset = {top:0, left:0}; 

// initiate the selectable id to be recognized by UI
$("#selectable").selectable({
    filter: 'div',
});

// declare draggable UI and what we are going to be doing on start
$("#selectable div").draggable({
     start: function(ev, ui) {
        selected = $(".ui-selected").each(function() {
           var el = $(this);
            el.data("offset", el.offset());
        });

        if( !$(this).hasClass("ui-selected")) $(this).addClass("ui-selected");
        offset = $(this).offset();
    },
    drag: function(ev, ui) {
        var dt = ui.position.top - offset.top, dl = ui.position.left - offset.left;

        // take all the elements that are selected expect $("this"), which is the element being dragged and loop through each.
        selected.not(this).each(function() {
             // create the variable for we don't need to keep calling $("this")
             // el = current element we are on
             // off = what position was this element at when it was selected, before drag
             var el = $(this), off = el.data("offset");
             el.css({top: off.top + dt, left: off.left + dl});
        });
    }
}); 
```

CSS Styles 能够看到正在发生的事情：

```
#selectable {   width: 100%; height: 100%;}
#selectable div {
    background: #ffc;
    line-height: 25px;
    height: 25px;
    width: 200px;
    border: 1px solid #fcc;
    }
#selectable div.ui-selected {
    background: #fcaf3e;
    }
#selectable div.ui-selecting {
    background: #8ae234;
    } 
```

HTML 标记：

```
<div id="selectable">
    <div>item 1</div>
    <div>item 2</div>
    <div>item 3</div>
    <div>item 4</div>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-14T19:10:10.127

这个问题是相关的，但已经过时了；答案也是如此。 这是@idFlood 的 jsfiddle[的更新版本，适用于 jQuery 1.9.1 + jQueryUI 1.10.3：](http://jsfiddle.net/6f9zW/)

```
// store selected elements and the offset of the dragged element
var selected = $([]), offset = {top:0, left:0}; 

$( "#selectable > div" ).draggable({
    start: function (event, ui) {
        var $this = $(this);

        if ($this.hasClass("ui-selected")) {
            // if this is selected, attach current offset
            // of each selected element to that element
            selected = $(".ui-selected").each(function() {
                var el = $(this);
                el.data("offset", el.offset());
            });
        } else {
            // if this is not selected, clear current selection
            selected = $([]);
            $( "#selectable > div" ).removeClass("ui-selected");
        }
        offset = $this.offset();
    },

    drag: function (event, ui) {
        // drag all selected elements simultaneously
        var dt = ui.position.top - offset.top, dl = ui.position.left - offset.left;
        selected.not(this).each(function() {
            var $this = $(this);
            var elOffset = $this.data("offset");
            $this.css({top: elOffset.top + dt, left: elOffset.left + dl});
        });
    }
});

// enable marquee selecting and deselect on outside click...
$( "#selectable" ).selectable();

// ...but manually implement selection to prevent interference from draggable()
$( "#selectable" ).on("click", "div", function (e) {
    if (!e.metaKey && !e.shiftKey) {
        // deselect other elements if meta/shift not held down
        // $( "#dc-modules .dc-module" ).removeClass("ui-selected");
        $( "#selectable > div" ).removeClass("ui-selected");
        $(this).addClass("ui-selected");
    } else {
        if ($(this).hasClass("ui-selected")) {
            $(this).removeClass("ui-selected");
        } else {
            $(this).addClass("ui-selected");
        }
    }
}); 
```

我遇到了 _mouseStop() 调用引发错误的问题，因此我将其删除；这意味着`ui-selecting`状态不再发生在点击时，但所有其他功能保持不变。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-12-27T10:39:21.860

我对 Sinan Yasar 给出的答案做了一些修改。它并不完美，但它已经表现得更像我除了。

一个主要的附加功能是调用 select 的单击侦听器。

```
// manually trigger the "select" of clicked elements
$( "#selectable > div" ).click( function(e){
    if (e.metaKey == false) {
        // if command key is pressed don't deselect existing elements
        $( "#selectable > div" ).removeClass("ui-selected");
        $(this).addClass("ui-selecting");
    }
    else {
        if ($(this).hasClass("ui-selected")) {
            // remove selected class from element if already selected
            $(this).removeClass("ui-selected");
        }
        else {
            // add selecting class if not
            $(this).addClass("ui-selecting");
        }
    }

    $( "#selectable" ).data("selectable")._mouseStop(null);
}); 
```

您可以在这里看到一个完整的工作示例：http: [//jsfiddle.net/DXrNn/4/](http://jsfiddle.net/DXrNn/4/)

还有一个 jquery-ui 插件可以做到这一点：[http](http://code.google.com/p/jqdragdropmultiselect/) ://code.google.com/p/jqdragdropmultiselect/ 问题是它看起来没有维护。

编辑：如果您定义了可拖动的“过滤器”选项，则需要在 selectable._mouseStop(null) 之前调用 selectable.refresh()。

```
$( "#selectable > div" ).click( function(e){
  ...
  var selectable = $("#container").data("selectable");
  selectable.refresh();
  selectable._mouseStop(null);
  ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-08T14:17:24.727

还有另一种方式，可能是我用过的更简洁的方式。子元素是被选择者，父元素将具有“ui-selectable”类。

```
$("#parentContainer").selectable({
  selected: function(event, ui) {
    let selected = ui.unselected.id;
   document.getElementById(selected).style.border = '1px solid blue'
  }
  unselected: function(event, ui) {
    let unselected = ui.unselected.id;
    document.getElementById(unselected).style.border = ''
    $('#'+unselected).draggable('destroy')
  }
})

document.getElementbyId('childElement').addEventListener('mousedown', function() {
  $(this).draggable({
    cursor: crosshair
  })
})
```

# javascript - 为什么 Visual Studio 2005 不能调试我的 JavaScript 代码？

> ID：705254
> 
> 赞同：2
> 
> 时间：2009-04-01T12:24:12.823
> 
> 标签：javascript, visual-studio, debugging, visual-studio-2005

在这个非常简单的 ASP.NET 应用程序中，**Visual Web Developer 2008 Express**可以很好地调试 JavaScript 代码，但是完整版的**Visual Studio 2005 不能调试它**，即：当我单击 main.js 文件中的一行时，**它给了我一个带有**问号的红色圆圈，鼠标悬停显示：“不会到达这个断点，没有为这个文档加载任何符号。”

**我必须对我的 Visual Studio 2005 做些什么，才能像我的 Visual Web Developer 2008 那样调试 JavaScript 代码？**

**默认.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestJavascriptDebugging2005._Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
    <head runat="server">
            <script type="text/javascript" src="javascript/main.js"></script>
    </head>
    <body>
        <form id="form1" runat="server">
            <div>
                <p>This is HTML and <script type="text/javascript">test()</script>.</p>
                <p><button onclick="doIt(this)">Test</button></p>
            </div>
        </form>
    </body>
</html> 
```

**javascript/main.js：**

```
function test() {
    document.write("this is from javascript code2");
}

function doIt(element) {
    alert("This is the javascript function2.");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T12:36:37.783

检查是否遵循以下事项：

一世。在 IE 中启用脚本调试。

ii. 在脚本资源管理器中打开客户端脚本，您就可以愉快地调试了。

有关如何完成此操作的详细信息，请查看我最初从中获取此技巧的以下链接。

1.  在 VS2005 中调试客户端[javascript 。](http://geekswithblogs.net/lazydeveloper/archive/2006/07/10/84552.aspx)
2.  来自 Microsoft的[Kb解释了相同的内容。](http://msdn.microsoft.com/en-us/library/k2h50zzs(VS.80).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:28:07.337

集成的 JavaScript 调试是 VS2008 的一个新特性——或者至少，它[有了很大的改进](http://weblogs.asp.net/scottgu/archive/2007/07/19/vs-2008-javascript-debugging.aspx)......

如果您搜索“visual studio 2008 新功能 javascript 调试”，您将获得大量信息。

IDE 的较新版本（甚至是 Express 版本）比旧版本具有更多功能并非不合理。

编辑：虽然 JavaScript 调试出现在 VS2005 中，但它更好地集成在 VS2008 中，并且新功能之一是能够在 JS 代码中放置断点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T12:48:15.790

需要明确的是，Visual Studio 2005 确实支持 JavaScript 调试。它只是无法解析在浏览器中源脚本中包含行的文件上设置的断点。

在 Visual Studio 2005 中，您可以将`debugger`指令放在 JavaScript 代码中您想要中断的位置。从那里您可以打开 Scripts Explorer 窗口并在源脚本中设置断点（从浏览器的角度来看）。

# sql - SQL 加载器：从 1 个控制文件和 1 个 CSV 加载到 2 个表中

> ID：705255
> 
> 赞同：7
> 
> 时间：2009-04-01T12:24:41.370
> 
> 标签：sql, loader, load-data-infile

表 T1 结构：col1 编号，col2 编号

表 T2 结构：col1 编号、col2 编号、col3 编号

.csv 文件：

```
row1:1,2,3,4,5,6
row2:1,2,3,4,5,6 
```

我希望表 T1 中的数据为：

```
col1   col2
=====  ====
1       3
1       3 
```

我希望表 T2 中的数据为：

```
col1   col2   col3
=====  ====   ==== 
1       3       5
1       3       5 
```

**以下控制文件不起作用**

```
load data
infile *
insert into table T1 fields terminated by ',' TRAILING NULLCOLS 
(col1,fill1 filler,col2)
insert into table T2 fields terminated by ',' TRAILING NULLCOLS
(col1,fill2 filler,col2,fill3 filler,col3)
begindata
1,2,3,4,5,6
1,2,3,4,5,6 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-24T14:43:16.303

这确实有效，但我不喜欢这个解决方案。在这些情况下，我更喜欢使用外部表。简短的回答是您遇到了问题，因为 SQLLDR 不会自动重新扫描多行导入的数据。以下是文档中的一个片段。

[来自 SQLLDR 文档](http://download.oracle.com/docs/cd/B10501_01/server.920/a96652/ch06.htm)

将 POSITION 与多个表加载一起使用

在多表加载中，您指定多个 INTO TABLE 子句。当您*为第一个表的第一列指定 POSITION( ) 时，位置是相对于逻辑记录的开头计算的。当您*为后续表格的第一列指定 POSITION( ) 时，位置是相对于最后加载的表格的最后一列计算的。

因此，当后续的 INTO TABLE 子句开始时，位置不会自动设置为逻辑记录的开头。这允许多个 INTO TABLE 子句处理同一物理记录的不同部分。有关示例，请参阅提取多个逻辑记录。

逻辑记录可能包含两个表之一的数据，但不能同时包含两者。在这种情况下，您将重置 POSITION。对于 INTO TABLE 子句中的第一个字段，不要省略位置说明或使用 POSITION(*+n)，而是使用 POSITION(1) 或 POSITION(n)。

```
 load data
    infile * 
    truncate
    into table T1 
    fields terminated by ',' trailing nullcols
    ( col1  
    , fill1 filler
    , col2  )
    into table T2 
    fields terminated by ','  trailing nullcols
    ( col1 position(1) 
    , filler filler
    , col2    
    , filler2 filler
    , col3 )   

BEGINDATA
1,2,3,4,5,6
1,2,3,4,5,6

SQL> select * From t1;

      COL1       COL2
---------- ----------
         1          3
         1          3

SQL> select* From t2;

      COL1       COL2       COL3
---------- ---------- ----------
         1          3          5
         1          3          5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-13T09:14:34.253

尝试这个

```
LOAD DATA  
INFILE * "STR '|EndRec|'"  
INSERT INTO TABLE T1 FIELDS TERMINATED BY ',' TRAILING NULLCOLS 
(COL1, FILL2 FILLER, COL2, FILL4 FILLER, FILL5 FILLER, FILL6 FILLER)  
INSERT INTO TABLE T2 FIELDS TERMINATED BY ',' TRAILING NULLCOLS
(COL1 POSITION(1), FILL2 FILLER, COL2, FILL3 FILLER, COL3, FILL6 FILLER)

BEGINDATA  
1,2,3,4,5,6|EndRec|1,2,3,4,5,6|EndRec| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T12:35:41.547

尝试这个：

```
LOAD DATA
INFILE *
INSERT INTO TABLE T1 FIELDS TERMINATED BY ',' TRAILING NULLCOLS 
(COL1, FILL2 FILLER, COL2, FILL4 FILLER, FILL5 FILLER, FILL6 FILLER)
INSERT INTO TABLE T2 FIELDS TERMINATED BY ',' TRAILING NULLCOLS
(COL1, FILL2 FILLER, COL2, FILL3 FILLER, COL3, FILL6 FILLER)
BEGINDATA
1,2,3,4,5,6
1,2,3,4,5,6 
```

# ruby - 浏览字段

> ID：705265
> 
> 赞同：1
> 
> 时间：2009-04-01T12:27:53.203
> 
> 标签：ruby, selenium, win32ole

如何在 Ruby Selenium 自动化脚本中从文件浏览对话框（即从我的 PC 上传文件）中选择文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T16:29:52.327

我想我以前遇到过这个问题。

当您在 Ruby 中编写 selenium 脚本时，您可以控制浏览器的所有窗口。但是文件选择器对话框和文件下载对话框实际上是系统窗口，因此您无法通过 selenium 控制它们。

但是，您可以通过 Win32OLE gem 控制它们，以便在 Windows 上运行测试。但是当然你不能在 Mac 或 Linux 上运行这些测试。

就像一般的硒一样，它有点hacky。但它是这样工作的：

```
 require 'selenium'
 require 'test/unit'
 require 'win32ole'

 class DownloadFileTest < Test::Unit::TestCase
   def setup()
     @wsh = WIN32OLE.new('Wscript.Shell')
   end
   def teardown
     WIN32OLE.ole_free(@wsh) # yes, this is required *rolls eyes*
   end
   def test_download_file
     # ...stuff that causes a download window to pop up...
     @wsh.AppActivate("Opening")
     sleep(2)
     @wsh.SendKeys("{RIGHT}{ENTER}") # Hits ok button - file downloads
     sleep(3)
     # Use regular Ruby File methods to assert stuff on the file content
   end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T20:40:46.497

我会跳过所有的 OLE 内容，只需在字段中输入路径:)

只要您使用其中一种特权模式运行 Selenium RC，您就可以执行此操作。如果您使用的是最新的 1.0 beta 2，则默认使用这些。

# c# - 半复杂页面上的 MVP

> ID：705268
> 
> 赞同：4
> 
> 时间：2009-04-01T12:28:44.590
> 
> 标签：c#, design-patterns, mvp, presenter-first

我正在开发行为稍微复杂的 .NET 3.5 表单应用程序。是用来存书的。为了给您一个想法，工作流程将是：

*   用户输入 ISBN 代码
*   如果ISBN有效，检查是否存在，
*   如果有效且存在，则显示图书详细信息并启用保存按钮，如果不是，则显示“添加图书”按钮，
*   如果它无效，则显示错误，
*   最终，用户将单击“保存”，因此必须保存条目。

这是四个责任：

*   验证 ISBN，
*   检查书的存在，
*   显示图书详情，
*   保存新书详细信息。

我的问题是：我应该将应用程序逻辑保留在一个 MVP 结构中，还是应该将其拆分为四个 MVP 结构，每个职责一个？

将其保持在一个 MVP 结构中

*   使模型更复杂
*   使测试设置更加复杂（每个测试都有很多设置代码来选择正确的验证器、退回的书等，即使它们没有被使用），
*   使表示逻辑更容易遵循

将其保存在单独的 MVP 结构中将

*   使模型更简单，
*   为每个演示者创建更多但更简单的测试，
*   在演示者之间的交互中增加复杂性（我如何向演示者表明 ISBN 有效，以便显示图书详细信息？）

我正在尝试演示者第一原则，所以： - 保持视图不变（所以没有像“演示者验证 ISBN”这样的事件）， - 保持演示者无状态， - 保持模型简单（足够）

任何人都知道最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:43:50.653

我会选择一位演示者，但将 ISBN 号码的验证等委托给服务。

在演示者中处理输入的 ISBN 的内容如下：

```
public void IsbnEntered()
{
    var isbn = view.Isbn;

    if (isbnService.NumberIsValid(isbn))
    {
        var details = isbnService.RetrieveDetailsForIsbn(isbn);

        if (details != null)
        {
            view.Display(details);
            view.EnableSaveButton();
        }
        else
        {
            view.DisplayError("ISBN could not be found");
        }
    }
    else
    {
        view.DisplayError("Invalid ISBN");
    }
} 
```

这里的职责是明确的。IsbnService 负责 ISBN 处理，View 用于显示和输入检索，Presenter 管理两者之间的交互。

# .net - Mdi形式确保可见

> ID：705270
> 
> 赞同：0
> 
> 时间：2009-04-01T12:29:17.910
> 
> 标签：.net, windows, winforms, user-interface, mdi

我正在使用 MDI 表单开发 ac# .NET 应用程序。当 Mdi 孩子四处移动并使用滚动条时，一些表单将在显示区域之外。我想对 Mdi 孩子做一些类似于 TreeNode.EnsureVisible() 的事情，它移动 TreeView 滚动条直到节点完全可见。调用 Form.Activate() 不会这样做。我不介意是否需要 P/Invoke

感谢期待

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T12:54:49.143

您可以在父窗口上调用方法 ActivateMdiChild(childForm) 将焦点放在 childForm 上。高温高压

# eclipse - 在 Eclipse 中一次更改多个文件的文本编码

> ID：705279
> 
> 赞同：11
> 
> 时间：2009-04-01T12:32:41.630
> 
> 标签：eclipse, encoding, utf-8

我的 Eclipse 项目中有一些 UTF-8 HTML 模板，Eclipse 一直将它们视为具有不同的编码。它说编码是“由内容决定的”。我想强制正确编码。

我可以对单个文件强制使用它，但为父文件夹设置编码不会影响其中的文件，因为属性表中没有“继承”选项，而是“从内容确定”的东西。

是否可以一次为项目中的所有文件设置编码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-02-28T12:40:44.567

我刚刚解决了这个问题（eclipse 3.5.2）

**需要两个步骤：**

1.  更改文件夹属性页上的文本文件编码（我的项目中已创建.setting/org.eclipse.core.resources.prefs 文件）

2.  在首选项页面常规/内容类型上更改 *.html 文件内容类型的默认编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:37:35.287

我只看到 XML 文件的“由内容确定”。在这种情况下，它是唯一正确的设置，因为 XML 文件在其标头中定义了它们的编码，因此强制其他任何内容将是一个严重的错误。

如果您仍然想这样做，您可以尝试查看`.settings/org.eclipse.core.resources.prefs`项目中的文件（该文件可能存在也可能不存在，具体取决于您是否在项目中手动设置了任何编码）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-08-28T13:07:19.867

这是由 Eclipse 的开发版本引起的。在最新的官方版本 (3.5) 中，它已被修复。

# sql - Spring Hibernate SQL 查询

> ID：705280
> 
> 赞同：0
> 
> 时间：2009-04-01T12:32:53.613
> 
> 标签：sql, hibernate

我有一个 VO 类，它也有另一个 VO 类的 getter 和 setter。例如：

```
Class DocumentVO{
   PrintJobVO job;
   PrintRunVO run;
   String id;
   getters and setters..
} 
```

现在我需要使用 Spring Hibernate 使用 Native SQL Query。当我想映射 ID 时，我遇到了问题。我的疑问是，

```
select {r.*},{d.*}
from runs {r}, documents {d}
where {r}.RUN_ID as {r.id} = d.RUN_ID as {d.run.id} 
```

这`run`是具有其 id 和其他值的 PrintRunVO 类型。如何将它们映射到我的 SQL 中？我收到类似的错误`invalid user.table.column, table.column, or column specification`。

有什么办法可以克服呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:42:36.037

在您的普通 SQL 查询中使用 Result Transformer 概念。

```
String query = "myquery";
SQLQuery q = session.createSQLQuery(query);
q.addScalar("param1", Hibernate.STRING);
q.addScalar("param2", Hibernate.STRING);
q.setResultTransformer(Transformers.aliasToBean(MyVO.class));
q.setParameter("queryParam1", "some value");
return q.list(); 
```

# multithreading - 比较函数和多线程

> ID：705281
> 
> 赞同：2
> 
> 时间：2009-04-01T12:33:29.273
> 
> 标签：multithreading, delphi, sorting, delphi-2009, callback

假设一个多线程环境和一个（正确同步的）具有一个特定过程的类

```
procedure SortKeyList (KeyList : TList <Integer>; Inverted : Boolean); 
```

它需要一个键列表并对其进行排序。该过程使用 RTL 快速排序实现 TList.Sort：

```
KeyList.Sort (TComparer <Integer>.Construct (CompareKeys)) 
```

现在解决问题：CompareKeys 必须访问该类的某些成员才能对列表进行排序（这就是该类的重点）。但是 RTL 要求 CompareKeys 是一个正常的函数。如何以线程安全的方式将数据从对象传递到 CompareKeys 函数？显然，使用全局交换变量不是一种选择，因为它绝不是线程安全的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T12:56:39.267

你传递`CompareKeys`给的事实`TComparer.Construct`意味着它`CompareKeys` *不一定*是一个正常的函数。Delphi 2009 引入了*方法引用*，可以引用普通函数、方法和匿名方法。我假设`TComparer.Construct`从你给它的普通函数中构造一个方法引用。（不过，我不确定为什么；我认为编译器会自动进行转换。）

假设您有一个三参数函数，它接收一个列表和要比较的两个项目：

```
function CompareKeys(List: TList<Integer>; Item1, Item2: Integer): Integer; 
```

您应该能够传递这样的匿名方法：

```
KeyList.Sort(function(Item1, Item2: Integer): Integer;
  begin
    Result := CompareKeys(KeyList, Item1, Item2);
  end); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T12:40:30.537

也许您可以使用`threadvar`（线程局部变量）来保存对您的实例的引用，然后可以从 CompareKeys 函数中访问该引用（在调用 Sort 之前分配 threadvar）。

# java - Java数组：直接访问数组中的组件

> ID：705288
> 
> 赞同：0
> 
> 时间：2009-04-01T12:36:24.337
> 
> 标签：java, arrays

我是否能够直接访问数组组件，例如：

字符串 x = args[1] ？

还是我必须使用循环并使用 args[i] ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T12:39:06.997

是的。你可以这样做，假设 args[1] 存在，否则你会得到一个 ArrayIndexOutOfBoundsException。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T12:38:45.860

是的，您可以直接访问数组组件。

例如：

```
String[] test = new String[] { "first", "second" };
System.out.println(test[1]); // Prints second 
```

（编辑：出于某种原因，我确信这是关于 JavaScript 而不是 Java。奇怪。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T12:38:54.970

当然，您也可以使用 args[1]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:39:41.240

是什么让你认为你做不到？

# python - 将事件添加到列表

> ID：705296
> 
> 赞同：2
> 
> 时间：2009-04-01T12:38:59.370
> 
> 标签：python

我想将事件添加到列表中，以便在添加项目时根据项目执行操作，例如生成新数据结构、更改屏幕输出或引发异常。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T12:50:08.547

您可以创建自己的类来扩展列表对象：

```
class myList(list):
    def myAppend(self, item):
        if isinstance(item, list):
            print 'Appending a list'
            self.append(item)
        elif isinstance(item, str):
            print 'Appending a string item'
            self.append(item)
        else:
            raise Exception

L = myList()
L.myAppend([1,2,3])
L.myAppend('one two three')
print L

#Output:
#Appending a list
#Appending a string item
#[[1, 2, 3], 'one two three'] 
```

# parallel-processing - mapreduce 可以解决哪些类型的问题？

> ID：705302
> 
> 赞同：32
> 
> 时间：2009-04-01T12:40:52.627
> 
> 标签：parallel-processing, mapreduce

是否有可用的理论分析来描述 mapreduce 可以解决什么样的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-05-18T04:04:25.400

在[Map-Reduce for Machine Learning on Multicore](http://www.cs.stanford.edu/people/ang/papers/nips06-mapreducemulticore.pdf) Chu*等人中*描述了“适合统计查询模型的算法可以以某种“求和形式”编写，这使得它们可以在多核计算机上轻松并行化。他们使用 map-reduce 框架专门实现了 10 种算法，包括加权线性回归、k-Means、朴素贝叶斯和 SVM。

[Apache Mahout](http://lucene.apache.org/mahout/)项目发布了基于本文思想的一些方法的最新 Hadoop (Java) 实现。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T12:46:25.903

对于需要处理和生成大型数据集的问题。假设对银行持有的所有账户运行利息生成查询。假设为银行过去一年发生的所有交易处理审计数据。最好的用例来自谷歌——为谷歌搜索引擎生成搜索索引。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T13:30:29.900

许多“令人尴尬的并行”（好词！）的问题都可以使用 MapReduce。[http://en.wikipedia.org/wiki/Embarrassingly_parallel](http://en.wikipedia.org/wiki/Embarrassingly_parallel)

从这篇文章...... [http://www.businessweek.com/magazine/content/07_52/b4064048925836.htm](http://www.businessweek.com/magazine/content/07_52/b4064048925836.htm) ...

Hadoop（MapReduce 的开源实现）的创始人 Doug Cutting 说……“Facebook 使用 Hadoop 分析用户行为和网站上广告的有效性”

和......“纽约时报的技术团队在亚马逊的云上租用计算能力，并使用 Hadoop 将 1100 万篇存档文章（可追溯到 1851 年）转换为数字和可搜索文档。他们在一天之内完成了一项原本需要数月才能完成的工作。”</p>

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T13:02:38.907

任何涉及对大量数据进行操作的事情，其中​​问题可以分解为较小的独立子问题，然后可以将其结果汇总以产生更大问题的答案。

一个简单的例子是计算大量数字的总和。您将集合拆分为较小的集合，并行计算这些较小集合的总和（这可能涉及将这些集合拆分为更小的集合），然后将这些结果相加以得出最终答案。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-04-12T12:37:39.943

答案实际上在于算法的名称。MapReduce 不是一些答案所暗示的通用并行编程工作或批处理执行框架。**当需要处理大型**数据集（映射阶段）并从中派生某些属性，然后需要对这些派生属性进行总结（缩减阶段） 时， Map Reduce 非常有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-08-14T19:21:04.207

你也可以在[Google 上观看视频](http://code.google.com/intl/en/edu/submissions/mapreduce-minilecture/listing.html)，我自己也在看，我觉得它们很有教育意义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-08-23T06:52:11.653

MapReduce 的 hello world 介绍

[http://blog.diskodev.com/parallel-processing-using-the-map-reduce-prog](http://blog.diskodev.com/parallel-processing-using-the-map-reduce-prog)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-14T01:04:11.470

这个问题是在它的时间之前提出的。自 2009 年以来，实际上已经对 MapReduce 计算进行了理论分析。[Howard Karloff 等人](http://theory.stanford.edu/~sergei/papers/soda10-mrc.pdf)在 2010 年发表的这篇论文。以与理论家研究 P 和 NP 相同的方式将 MapReduce 形式化为复杂性类。他们证明了 MapReduce 和一个称为 NC 的类之间的一些关系（可以将其视为共享内存并行机器或某类受限电路）。但主要工作是它们的正式定义。

# c - C 中更快的 I/O

> ID：705303
> 
> 赞同：8
> 
> 时间：2009-04-01T12:40:59.897
> 
> 标签：c, optimization, io

我有一个问题，它将从控制台获取 1000000 行输入，如下所示。

```
0 1 23 4 5
1 3 5 2 56
12 2 3 33 5
...
... 
```

我使用过scanf，但它非常非常慢。有没有办法以更快的方式从控制台获取输入？我可以使用 read()，但我不确定每行中的字节数，所以我不能像 read() 那样读取“n”个字节。谢谢，非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T12:55:13.027

使用 fgets(...) 一次拉入一行。请注意，您应该检查行尾的 '\n'，如果没有，则说明您处于 EOF，或者您需要读取另一个缓冲区的值，并将两者连接在一起。起泡，冲洗，重复。不要陷入缓冲区溢出。

然后，您可以自己解析内存中的每个逻辑行。我喜欢将 strspn(...) 和 strcspn(...) 用于此类事情，但您的里程可能会有所不同。

解析：定义一个分隔符字符串。使用 strspn() 计算与分隔符匹配的“非数据”字符，并跳过它们。使用 strcspn() 计算与分隔符不匹配的“数据”字符。如果此计数为 0，则您已完成（行中没有更多数据）。否则，复制出这 N 个字符以交给解析函数，例如 atoi(...) 或 sscanf(...)。然后，将您的指针基重置到该块的末尾并重复跳过分隔符、复制数据、转换为数字的过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T12:58:36.313

如果您的示例具有代表性，您确实有每行五个十进制数字的固定格式，我可能会使用组合`fgets()`来读取行，然后调用循环`strtol()`从字符串转换为整数。

这应该比自己进行字符串到整数的转换更快`scanf()`，同时也更清晰、更高级。

像这样的东西：

```
typedef struct {
  int number[5];
} LineOfNumbers;

int getNumbers(FILE *in, LineOfNumbers *line)
{
  char buf[128];  /* Should be large enough. */
  if(fgets(buf, sizeof buf, in) != NULL)
  {
    int i;
    char *ptr, *eptr;

    ptr = buf;
    for(i = 0; i < sizeof line->number / sizeof *line->number; i++)
    {
      line->number[i] = (int) strtol(ptr, &eptr, 10);
      if(eptr == ptr)
        return 0;
      ptr = eptr;
    }
    return 1;
  }
  return 0;
} 
```

注意：这是未经测试（甚至未经编译！）浏览器编写的代码。但作为一个具体的例子也许有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T12:44:15.333

您使用多个`read`s 和固定大小的缓冲区，直到您到达文件末尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T12:49:06.960

出于好奇，是什么在控制台中生成这么多行？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T13:40:39.877

如果可以，请使用二进制 I/O。文本转换会使阅读速度减慢*数倍*。如果您因为易于调试而使用文本 I/O，请再次考虑二进制格式，并在需要时使用 od 程序（假设您使用的是 unix）使其易于阅读。

哦，另一件事：有 AT&T 的 SFIO 库，它代表更安全/更快的文件 IO。你可能也有一些运气，但我怀疑你会得到与二进制格式相同的加速。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T12:53:45.870

一次读取一行（如果缓冲区不足以容纳一行，则扩展并继续使用更大的缓冲区）。

然后使用专用函数（例如 atoi）而不是通用函数进行转换。

但是，最重要的是，使用配置文件设置可重复的测试工具，以确保更改确实可以加快速度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T04:13:37.673

如果您尝试读取比实际更多的字节， fread 仍会返回。

我发现读取文件的最快方法是这样的：

/*寻找文件结尾 */ fseek(file,0,SEEK_END);

/*获取文件大小*/ size = ftell(file);

/*寻找文件的开头 */ fseek(file,0,SEEK_SET);

/* 为文件创建一个缓冲区 */ buffer = malloc(1048576);

/*一次读取 1MB 直到达到 size 字节等 */

在现代计算机上，使用您的 ram 并将整个内容加载到 ram，然后您可以轻松地通过内存工作。

至少您应该使用尽可能大的块大小的 fread，并且至少与缓存块或 HDD 扇区大小一样大（最小 4096 字节，我个人至少使用 1048576）。您会发现，对于更大的读取请求，rfead 能够在一次操作中按顺序获得一个大流。一些人在这里使用 128 字节的建议是可笑的......因为你最终将不得不一直寻找驱动器，因为调用之间的微小延迟将导致磁头已经超过几乎可以肯定的下一个扇区有你想要的顺序数据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-06T04:17:55.897

`fread()`您可以通过使用或`fread_unlocked()`（如果您的程序是单线程的）获取输入来大大减少执行时间。锁定/解锁一次输入流需要的时间可以忽略不计，所以忽略它。

这是代码：

```
#include <iostream>

int maxio=1000000;
char buf[maxio], *s = buf + maxio;

inline char getc1(void)
{
   if(s >= buf + maxio) { fread_unlocked(buf,sizeof(char),maxio,stdin); s = buf; }
   return *(s++);
}
inline int input()
{
   char t = getc1();
   int n=1,res=0;
   while(t!='-' && !isdigit(t)) t=getc1(); if(t=='-')
   {
      n=-1; t=getc1();
   }
   while(isdigit(t))
   {
     res = 10*res + (t&15);
     t=getc1();
   }
   return res*n;
} 
```

这是在`C++`. 在`C`中，您不需要 include `iostream`，函数`isdigit()`是隐式可用的。

您可以通过调用将输入作为字符流，`getc1()`并通过调用将整数输入`input()`。

使用背后的整个想法`fread()`是一次获取所有输入。调用`scanf()/printf()`, 反复占用宝贵的时间来锁定和解锁流，这在单线程程序中是完全多余的。

还要确保 的值`maxio`使得所有输入只能在几次“往返”中获取（在这种情况下最好是一次）。根据需要对其进行调整。

希望这可以帮助！

# c# - 简化 C# 中的设置和部署

> ID：705305
> 
> 赞同：2
> 
> 时间：2009-04-01T12:42:10.313
> 
> 标签：c#, installation

我做了一个应用程序，它会经常更新。因此，每次发生更改时，我都必须一次又一次地将它的新版本包含到设置和部署程序中。有什么办法可以简化手续吗？要添加的文件数量是静态的，并且存在于一个文件夹中。我听说我们可以用 c# 编写安装程序类，我的要求与它有什么关系吗？

我认为 ClickOnce 不符合我的要求，因为我第一次希望它像安装包一样运行，因为它有一些包和一些设置需要在安装时在用户的机器上实现。可以单击一次帮助我吗？我也想以管理员身份运行我的应用程序，它引用了许多外部 dll 文件。那么它会帮助我实现目标吗？

**我终于使用 clickonce 部署做到了。我使用内容文件来标记我想要复制到目标计算机的所有文件并使用 clickonce 部署。然后我修改了我的程序启动方式，这样我就可以启动我只想在应用程序第一次运行时运行的安装程序脚本。此外，我将它托管在 IIS 上，并且不得不更改许多 MIME 类型并添加新的 MIME 类型以供下载以通过 Internet 工作**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T12:47:04.937

查看名为“ClickOnce”的部署。它使您正在谈论的许多内容自动化。

编辑：您可以像其他任何项目一样向 ClickOnce 项目添加自定义安装程序操作，以设置其他组件等等。至于权限，如果您愿意，ClickOnce 将允许您以管理员身份运行，但不建议这样做，它可能会抱怨它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T12:50:59.280

您可以使用 ClickOnce ( [http://msdn.microsoft.com/en-us/library/t71a733d(VS.80).aspx](http://msdn.microsoft.com/en-us/library/t71a733d(VS.80).aspx) ) 来简化部署过程。也许您还可以使用 NANT ( [http://nant.sourceforge.net/](http://nant.sourceforge.net/) ) 自动化构建过程。

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T12:59:28.540

是的，你可以这么做。我假设您希望客户端在有新版本时自行更新。

这需要对客户端代码进行一些更改。基本上它的工作原理是在预定义的位置检查新版本的可用性。将您的新版本更新到此位置。在客户端，如果他/她想升级到新版本，向用户显示一条消息。

[您可以在此处](http://www.codeproject.com/KB/vb/autoupdate.aspx)和[此处](http://www.codeproject.com/KB/vb/Auto_Update_Revisited.aspx)找到示例项目的链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T12:47:39.613

您可以在 Visual Studio 中的解决方案中添加一个安装项目，然后将您的其他项目输出或静态文件添加到安装项目作为参考。然后，安装项目将自动检测您的依赖项，每次您执行全部重建（或重建/构建安装项目）时，它将自动包含所有必要的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T12:48:55.557

它是什么类型的项目？在许多情况下，ClickOnce 可以以名义上的努力为您完成这项工作。

除此之外 - 您通常可以将安装程序构建到您的构建过程中；一些工具会为你做到这一点。

安装程序类在客户端运行 - 所以我认为它们与您的构建过程无关......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T12:47:30.817

我会在它们各自的属性中将文件标记为内容，然后在部署项目中右键单击项目，转到文件系统，然后右键单击文件夹，单击添加并从对话框中选择内容文件。这应该在您每次构建部署项目时复制最新的文件。

# exception - 面试问题的可接受答案

> ID：705308
> 
> 赞同：0
> 
> 时间：2009-04-01T12:42:36.320
> 
> 标签：exception, constructor, destructor

对于以下问题，你会接受什么样的答案

“描述从构造函数和析构函数抛出异常的过程和/或陷阱”（C++/C#/java）

对于声称在这些语言中拥有多年经验的候选人（如果他错过了这一点，你几乎肯定不想要他），你认为这方面的知识量是必不可少的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T13:08:34.603

如果有人说他们有 2 年的 C++ 经验，但不了解构造函数/析构函数和异常的来龙去脉，这不会阻止我雇用他们。这是一种易于学习的知识类型，由一些简单的规则组成。

我当然希望他们拥有这些知识，但没有它并不会使他们成为一个糟糕或懒惰的程序员。我曾与优秀的 C++ 程序员一起工作，他们大部分时间都在老式 COM 和 HRESULT 领域度过。这大量使用了 C++，但实际上消除了 C++ 异常。他们没有必要也没有理由去学习它。一旦我们将异常引入代码库，大约需要 15 分钟才能让每个人都参与到构造函数/析构函数问题上。

我宁愿用面试来测试一个人解决问题的能力，也不愿看看他们是否了解 C++ 特定部分的来龙去脉。教它很容易，但教解决问题却很难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T12:47:50.487

他必须知道，在 C++ 中，只有完全构造的对象才会调用析构函数。所以下面的类在 C++ 中是泄漏的：

```
class Leaky {
public:
    Leaky() { a = new char[100]; b = new char[100]; }
    ~Leaky() { delete a; delete b; }
private:
   char* a;
   char* b;
}; 
```

*如果在执行b = new char[100]*时抛出异常， 则不会调用 Leaky::~Leaky() 并且您有内存泄漏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T12:46:22.643

怎么样（我指的是 C++）：如果一个对象在其构造函数中抛出，则该对象可能处于未定义状态。析构函数不会运行。这可能会导致内存和句柄泄漏甚至死锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T13:00:02.160

此外，在 C++ 中，如果一个异常正在展开堆栈，并且从析构函数中抛出另一个异常，则程序将终止（或者，准确地说，调用 terminate_handler）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:00:30.987

您不能将构造函数代码放在 C# 中的 try-catch-finally 块中吗？这样，如果出现问题，finally 部分中的代码将释放资源。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T13:00:47.617

这是一个边缘问题。例如，一个称职的开发人员可能会在某个地方发现这是一个坏主意，并避免它们。坦率地说，我会在这方面做的最好的事情是，它可能会使对象处于部分构造的状态，所以通常最好避免它。”我希望他们详细说明他们做了什么，这是一个好的做法，为什么。

# mysql - 严重的 MySQL 性能问题（连接、临时表、文件排序......）

> ID：705311
> 
> 赞同：3
> 
> 时间：2009-04-01T12:43:22.387
> 
> 标签：mysql, database, performance, join, temp-tables

我有一个用户表和一个投票表。投票表存储对其他用户的投票。无论好坏，投票表中的一行存储两个用户之间双向的投票。

现在，问题是当我想列出某人投票过的所有人时。

我不是 MySQL 专家，但据我所知，由于 join 语句中的 OR 条件，它需要查看*整个*用户表（当前 +44,000 行），并创建一个临时表来做所以。

目前，波纹管查询大约需要两分钟，是的，**两分钟**才能完成。如果我删除 OR 条件，以及 join 语句中它之后的所有内容，它会在不到半秒的时间内运行，因为它只需要查看 44,000 个用户行中的大约 17 个（*解释一下*！）。

下面的示例，用户 ID 是*9834*，我正在尝试获取他/她自己的*无*票，并将被投票的用户的信息加入到结果中。

有没有更好、更快的方法来做这个查询？或者我应该重组表格吗？我非常希望可以通过修改查询来修复它，因为表中已经有很多用户（+44,000）和投票（+130,000），我必须迁移它们。

谢谢 ：）

```
SELECT *, votes.id as vote_id 
FROM `votes` 
LEFT JOIN users ON (
  (
    votes.user_id_1 = 9834
    AND
    users.uid = votes.user_id_2
  )
  OR
  (
    votes.user_id_2 = 9834
    AND
    users.uid = votes.user_id_1
  )
)
WHERE (
  (
    votes.user_id_1 = 9834
    AND
    votes.vote_1 = 0
  )
  OR
  (
    votes.user_id_2 = 9834
    AND
    votes.vote_2 = 0
  )
)
ORDER BY votes.updated_at DESC
LIMIT 0, 10 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T12:46:20.303

代替 OR，您可以执行 2 个查询的 UNION。我知道在至少一个其他 DBMS 中这要快一个数量级的实例，我猜 MySQL 的查询优化器可能共享相同的“功能”。

```
SELECT  whatever
FROM    votes v
        INNER JOIN
                users u
                ON v.user_id_1 = u.uid
WHERE   v.user_id_2 = 9834
AND     v.votes_2 = 0

UNION

SELECT  whatever
FROM    votes v
        INNER JOIN
                users u
                ON v.user_id_2 = u.uid
WHERE   v.user_id_1 = 9834
AND     v.votes_1 = 0

ORDER BY updated_at DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T23:53:01.963

您已经回答了自己的问题：是的，您应该重新设计表格，因为它不适合您。它太慢了，并且需要过于复杂的查询。幸运的是，迁移数据本质上只是执行您在此处询问的查询，但对于所有用户，而不仅仅是一个用户。（也就是说，对第一个答案建议的工会进行总和或计数。）

# php - MKDIR 工作不正常？

> ID：705322
> 
> 赞同：0
> 
> 时间：2009-04-01T12:47:11.957
> 
> 标签：php, mkdir

我正在使用 Xampp。当我早些时候尝试这样做时，它起作用了，但现在它不起作用。

我正在尝试在我的 www 文件夹中创建一个目录，以将其隐藏在窃取文件的坏人手中。

每个用户都有自己的上传文件夹来放置他们的文件。

Xampp 使用 apache，而 Xampp 是本地 Web 服务器。它允许我在不需要在线主机的情况下设计网站。www 文件夹在我的 C:\program files\xampp\php\www\ 中，我需要在那里创建一个目录。我知道这是可能的，因为我以前做过，只是忘记了如何实现。

当我创建一个目录时，我使用：

$uploaddir1 = "xampp/php/www/uploads/".$esclcusername."/"; mkdir($uploaddir1,0777);

我需要在 xampp 之前包含 C:\program files\ 吗？

最后，这在真正的在线虚拟主机上怎么可能实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T12:55:02.250

我在这里看到了你的问题，并在谷歌上搜索了一些。这是我发现的：

mkdir("D:/hshome/rubygirl58/gameparody.com/clansites/".$sitename."/lib", 0777)

所以是的，我认为你必须包括完整的路径。

问候，

尤尼斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:54:31.673

1.  您需要确保授予父文件夹权限以在其中创建目录 (0777)
2.  要获得完整路径，您可以使用 dirname( **FILE** ) 它将返回运行文件目录的路径

# java - 用于策略的 Java 泛型作为在构造函数中传递策略的替代方案

> ID：705326
> 
> 赞同：1
> 
> 时间：2009-04-01T12:48:08.177
> 
> 标签：java, generics

我有一些类似于以下的 Java 代码：

```
public class Thing {

    private IPolicy policy;

    public Thing(IPolicy policy) {
            this.policy = policy;
    }

    public void doSomething() {
            this.policy.execute();
    }   
} 
```

我的问题是：是否可以使用泛型而不是将策略传递给构造函数？我认为这意味着我希望它最终成为

```
public class Thing<T extends IPolicy> 
```

但我不喜欢泛型。

我的动机是：1）我的程序将它作为类型的一部分而不涉及构造函数（它还有其他更相关的事情要做）对我来说更有意义，2）我正在努力学习仿制药。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T12:49:33.120

我认为这没有多大意义。您所依赖的不是政策本身，而不仅仅是政策的*类型*吗？你不想问政策问题（例如，是否允许某项行动）吗？这意味着您将需要一个策略实例——这意味着将其传递给构造函数是有意义的。

当您想要一个 API 的一部分依赖于另一种类型的强类型 API 时，泛型是合适的，但实现本身并不关心类型是什么（可能有一些约束）。集合 API 可能是典型的示例 - a`List<T>`不在乎是什么，但希望*根据 T*`T`公开强类型 API 。我看不出这与您的政策示例相符。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:52:09.073

您要做的是确保事物始终具有策略，即。事物不能与策略一起存在。这仅需要构造函数机制或抽象，例如，

```
public abstract class Thing {
   public abstract Policy getPolicy();
   public void doSomething() {
       getPolicy().execute();
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:27:34.510

即使是泛型版本也不会避免“将策略传递给构造函数”，因为 Java 泛型使用*类型擦除*。但是，您可以实现`GenericThing(Class<T> clazz)`构造函数，但这*有点矫枉过正*：

```
public class GenericThing<T extends IPolicy> {

    private T policy;

    public GenericThing(Class<T> clazz) throws InstantiationException, IllegalAccessException {
        policy = clazz.newInstance();
    }

    public GenericThing(T policy) {
        this.policy = policy;
    }

    public void doSomething() {
        this.policy.execute();
    }
} 
```

我非常同意乔恩的[回答](https://stackoverflow.com/questions/705326/java-generics-for-policy-as-alternative-to-passing-policy-in-constructor/705332#705332)。您并没有真正利用这种*强类型*。

# sql - 每个 SELECT 语句中都需要 FROM 子句

> ID：705341
> 
> 赞同：1
> 
> 时间：2009-04-01T12:51:07.127
> 
> 标签：sql, mysql

每个 SELECT 语句中都需要 FROM 子句吗？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-01T12:53:07.963

不是真的 - 你可以使用 SELECT 来初始化一个变量。

[这里的](http://dev.mysql.com/doc/refman/5.1/en/select.html)例子：

mysql> 选择 1 + 1; -> 2

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-01T12:56:00.140

不在 MySQL 中，不。你可以这样做：

```
SELECT 1 + 1; 
```

但它会在一些 DBMS 中——例如 Oracle 会要求您执行以下操作：

```
SELECT 1 + 1 FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T12:54:30.207

不，你可以很容易地做到

```
SELECT 1+1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T12:56:21.963

（编辑：错过了 MYSQL 选项卡。）

这取决于数据库。

在 Oracle、IIRC 中，from 是必需的。但是 Oracle 有一个 DUAL 表，对于所有工作都在 SELECT 子句中完成的情况，它总是返回一行。

另一方面，SQL Server 不需要 FROM，要返回变量的值，只需选择它：

```
SELECT @myVar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:04:06.080

正如 ocedecio FROM 所述，并非每个语句都需要。

例如，我倾向于使用以下语法来初始化包含数据的表

```
insert into status(code, description)
select 'O', 'Open'
union all select 'C', 'Closed'
union all select 'P', 'Parked' 
```

ETC..

**编辑**（根据gamecat的评论）

上面的示例演示了何时 SELECT without FROM 可能有实际用途。你当然可以打电话：

```
select 'O', 'Open'
union all select 'C', 'Closed'
union all select 'P', 'Parked' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T13:37:43.520

基本上在 SQL Server 2005 中，标量值函数和系统函数不需要 FROM 关键字，但表值函数是必需的。

标量值函数可以像下面的语法一样执行

选择函数名（参数）

表值函数可以像下面的语法一样执行

从函数名（参数）中选择 *

别的

从函数名中选择 col1,col2(argument1,argument2)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-09T16:52:21.510

实际上，“ **SELECT 1** ”和“ **SELECT 1 FROM DUAL** ”都可以在最新版本的 MySQL 中使用。

有趣的是，“ **SELECT 1 WHERE 1 = 1** ”需要一个 FROM 子句：“ **SELECT 1 FROM DUAL WHERE 1 = 1** ”很好。在其他平台上，比如 PostgreSQL，“ **SELECT 1 WHERE 1 = 1** ”可以正常工作。

另一个奇怪之处：“ **SELECT 1 FROM DUAL GROUP BY 1 HAVING 1=1** ”在 MySQL 5.7 中有效，但在 MySQL 5.5 中失败。

* * *

不同平台中必需/可选的 FROM 子句总结：

*   MySQL、MariaDB、Amazon Aurora：可选或使用“ **FROM dual** ”。
*   Oracle：使用“ **FROM dual** ”。
*   IBM DB2：使用“ **FROM sysibm.sysdummy1** ”。
*   Informix：使用“ **FROM systables WHERE tabid=1** ”
*   Firebird，InterBase：使用“ **FROM rdb$database** ”。
*   Microsoft Access：需要，但没有虚拟表。尝试使用“ **FROM (SELECT COUNT(*) FROM first_table_found WHERE 1=0) AS dual** ”。
*   SQL Server、SQL Azure、SQL Server CE、Sybase ASE、SQL Anywhere、Ingres、PostgreSQL、Redshift、SQLite：可选。

# php - 如何在 a4 尺寸的纸上放宽桌子？

> ID：705342
> 
> 赞同：0
> 
> 时间：2009-04-01T12:51:17.483
> 
> 标签：php, html, css, printing

我想在 a4 尺寸的纸上打印一张报告表，但只打印了表格的一部分，少了几列。

谁能告诉我可能是什么问题？

我试图缩小以适应，但它变得太小而无法阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T19:22:37.123

以前显示器的显示区域比一张纸还小，但现在正好相反。

您应该有用于屏幕和打印的样式表。在打印 CSS 上，以百分比设置表格，并且不要超过页面宽度的 100%。对于打印，尤其是报告，越简单越好。一个干净的标题是你所需要的美学。

为此，您只需声明 2 个样式表：

```
<style type="text/css" media="screen">
</style> 
```

也...

```
<style type="text/css" media="print">
</style> 
```

还有其他媒体类型：

```
all  
aural    
braille  
embossed
handheld
print   
projection
screen   
tty  
tv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:55:22.293

尝试使用横向纸张模式而不是纵向模式。接下来缩小您的内容以适合页面。如果他们不这样做，除非您想要不可读的字体大小（读取小于您的眼睛可以读取的大小），否则您无法将整个内容放在一张纸上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T20:16:13.203

如果它不适合使用横向模式，并且您对缩小它不满意，它就是不适合。一些建议：

*   尽可能减少数据
*   在打印设置中使用纸张设置
*   如果适用，请使用填充/边距设置

否则，你无能为力。纸张按“原样”提供：P

# sql-server-2005 - 在 SQLSERVER 中执行特定作业时如何获得警报

> ID：705343
> 
> 赞同：1
> 
> 时间：2009-04-01T12:51:22.693
> 
> 标签：sql-server-2005

我创建了一个作业，其中包含来自用户数据库的命令“select * fromemploy”。

当此查询成功执行时，我必须通过邮件获取警报。如何执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T12:57:37.953

按照此处的说明（[http://weblogs.sqlteam.com/randyp/archive/2009/03/04/60863.aspx](http://weblogs.sqlteam.com/randyp/archive/2009/03/04/60863.aspx)），但最后检查“成功”而不是“失败”。

引文：

> *   运行 SQL Server 外围应用配置-> 外围应用配置功能-> 选择数据库邮件-> 选中启用数据库邮件存储过程。
> *   打开 SQL Management Studio -> 管理 -> 数据库邮件 -> 配置 SMTP 设置。
> *   转到 SQL Server 代理 -> 运算符 -> 创建新运算符
> *   转到 SQL 作业 - > 在通知中，检查电子邮件并选择操作员。如果作业失败/成功/完成，您可以选择发送通知的选项。

有关 SQL 邮件的更多信息： [http ://www.sql-server-performance.com/articles/dba/email_functionality_p1.aspx](http://www.sql-server-performance.com/articles/dba/email_functionality_p1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T12:58:35.313

SQL Server Management Studio 中可用的作业属性中有许多通知选项。

对于电子邮件通知，您需要使用信息配置服务器以[使其能够发送电子邮件](http://technet.microsoft.com/en-us/library/ms177408.aspx)。

# jquery - 使用 jquery 加载 gravatar

> ID：705344
> 
> 赞同：24
> 
> 时间：2009-04-01T12:51:49.713
> 
> 标签：jquery, gravatar

只是想在博客上创建一个简单的评论表单。当他/她在电子邮件框中写这个时，我想加载用户的 gravatar（使用 jQuery）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2009-04-01T12:56:24.897

gravatar 网址如下所示：

```
http://www.gravatar.com/avatar/<md5hashofemail> 
```

[以下是 URL 的其余选项。](http://en.gravatar.com/site/implement/url)

因此，您所要做的就是包含一个名为 md5 的函数，该函数返回用户电子邮件的 md5 哈希值。网上有很多这样做的，但我相信[https://github.com/blueimp/JavaScript-MD5/blob/master/README.md](https://github.com/blueimp/JavaScript-MD5/blob/master/README.md)效果很好。之后，只需执行以下操作：

```
// get the email
var email = $('#email').val();
// -- maybe validate the email? 

// create a new image with the src pointing to the user's gravatar
var gravatar = $('<img>').attr({src: 'http://www.gravatar.com/avatar/' + md5(email)});
// append this new image to some div, or whatever
$('#my_whatever').append(gravatar);

// OR, simply modify the source of an image already on the page
$('#image').attr('src', 'http://www.gravatar.com/avatar/' + md5(email)); 
```

我认为这很明显，但为了后代，我会添加它：

如果用户电子邮件是私人的，并且您在列表中显示此 ala-stackoverflow，则最好在服务器上对电子邮件进行编码，以便在查看源时用户电子邮件不公开可见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-26T10:41:52.123

看看[我的小提琴](http://jsfiddle.net/xanderiel/Tvnq7/4/)提供的功能

```
get_gravatar_image_url (email, size, default_image, allowed_rating, force_default) 
```

仅提供电子邮件是强制性的 - 其余的使用默认值。

确保还包含来自 Joseph Myers的事实上的标准[MD5 生成器 JS 文件](http://www.myersdaily.org/joseph/javascript/md5.js)

```
<script src="http://www.myersdaily.org/joseph/javascript/md5.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T07:41:03.853

哇感谢这篇文章。但是，如果您有自己的空白图像并且想要使用它而不是 gravatar。

```
 <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.12.0"><script>

<img id="image" src="images/mydefault.png" />

<script>

    var src = 'http://www.gravatar.com/avatar/' + 
                  md5('yourmail@gmail.com') + '?default=' + encodeURIComponent(GetRootDomain() + '/Content/images/nopic-small.png');

    $('#image').attr('src', src);

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T12:10:24.450

棘手的部分是使用与 jQuery 分离的 MD5 哈希实现生成 URL。我发现[blueimp-md5](https://github.com/blueimp/JavaScript-MD5)库在 GitHub 上的各种 MD5 包中拥有最多的明星，而且它几乎是独立的（大约 6kb 缩小）。如果您使用的是 Node 和/或 Browserify，此解决方案可能对您很有效：

```
var md5 = require("blueimp-md5");
function gravatar(email){
  var base = "http://www.gravatar.com/avatar/";
  var hash = md5(email.trim().toLowerCase());
  return base + hash;
} 
```

然后你可以`src`像这样使用 jQuery 设置图像属性：

```
var email = "someone@example.com";
$("#image").attr("src", gravatar(email)); 
```

# javascript - 在onclick 事件上从全局函数调用 javascript 变量参数

> ID：705357
> 
> 赞同：1
> 
> 时间：2009-04-01T12:54:31.250
> 
> 标签：javascript, onclick, global-variables

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-12-01T11:18:21.607

回应其他回应我不太清楚你在这里问什么。特别是**永远不要说“它不起作用**- 说明您执行了哪些操作，您的*预期*输出是什么以及您的*实际*输出是什么。尽管如此：

1.  您不应该在 href 中使用`javascript:`前缀；您实际上应该使用您在问题标题中引用的 onclick 事件。
2.  你可以只使用`xmldoc`和不`rootnode`带前缀的。
3.  如果您不希望超链接实际上去任何地方，请确保您`return false`来自 onclick 处理程序以防止处理单击。还将 URL 设置为“#”（通常指向当前页面的顶部），这样链接会在禁用 Javascript 的情况下正常降级，并且悬停时状态栏中的地址是有意义的（除非你想也覆盖它）。
4.  我希望代码突然结束，因为循环所有元素只是为了对第一个元素执行一些操作是次优的，至少可以这么说。

因此我相信你的最后一行可以写成

```
pagesref = pagesref+"<a href='#' onclick='newsdatainfo(xmldoc,newsresult,6,10); return false' >"+p+"</a> | "; 
```

事情可能会如您所愿，但可能会如此。

# c# - ReportViewer“缺少 URL 参数：名称”

> ID：705359
> 
> 赞同：4
> 
> 时间：2009-04-01T12:54:36.900
> 
> 标签：c#, asp.net, reporting-services, reportviewer

在一个 Web 应用程序中，我正在使用 ReportViewer 不断给我一个错误“缺少 URL 参数：名称”。我找到了原因，但没有解决办法。

导致报表查看器异常的 url

```
Reserved.ReportViewerWebControl.axd?ReportSession=3bkunv2wte3wmnabkquyr1y0&ControlID=1e2b5870e07b46abac7fd32a9e0e4b9d&Culture=1033&UICulture=1033&ReportStack=1&OpType=ReportArea&Controller=ctl00_ASPxRoundPanel3_PageContent_Wizard1_ReportViewer1&PageNumber=1&ZoomMode=Percent&ZoomPct=100&ReloadDocMap=true&SearchStartPage=0&LinkTarget=_top 
```

如果您在查询字符串中注意到由于某种原因而不是“&name=”它变成了“&Name=”。

我注意到在无数的谷歌搜索中，有很多人有同样的问题，但没有一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-03T21:43:24.467

听起来有些东西正在某个地方破坏您的 URL。您是否有一个 Bluecoat 代理？我看到了一些关于 Bluecoat 破坏 URL 的内容。

如果是这种情况，并且您可以控制代理，您可能可以通过它获得一条隧道以获取您的报告。否则，您可能不得不重写您的 URL。

[在这里](http://forums.asp.net/t/1118527.aspx)查看更多信息（线程中的最后一篇文章有​​一个可能的解决方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T15:19:20.027

您可以通过在每个请求开始时检查 BlueCoat 请求标头来全局解决此问题。放置在 global.asax.cs 中的这段代码解决了这个问题：

```
protected void Application_BeginRequest(Object sender, EventArgs e) 
{
    // Fix incorrect URL encoding by buggy BlueCoat proxy servers:
    if (!String.IsNullOrEmpty(Request.ServerVariables["HTTP_X_BLUECOAT_VIA"]))
    {
        string original = Request.QueryString.ToString();

        if (original.Contains(Server.UrlEncode("amp;"))) 
        {
            HttpContext.Current.RewritePath(Request.Path + "?" + original.Replace(Server.UrlEncode("amp;"), "&"));
        }
    }
} 
```

我不确定是否有任何其他代理服务器有同样的问题，但如果他们有，这可以很容易地适应检查`&amp;`QueryString 中的存在而不是检查 BlueCoat 标头（或者我猜，你可以只是检查任何其他受影响产品的标题，这可能更安全。

# visual-studio - 我可以在 VS 2005 属性窗口中重命名数据集并通过我的代码进行重构吗？

> ID：705366
> 
> 赞同：0
> 
> 时间：2009-04-01T12:56:01.777
> 
> 标签：visual-studio, visual-studio-2005, refactoring, dataset, rename

我尝试了上述方法，但是当我尝试重建时收到错误，因为编译器无法通过旧名称找到数据集。

我知道这可能很懒惰，但我已经习惯了能够在它的属性窗口中重命名一个项目，并让重构在幕后默默地为我进行。有没有办法可以对数据集做同样的事情，或者我应该使用查找和替换功能（以及相当多的双重检查）。我的项目不是特别大，所以 find-replace-check 不会花很长时间，但我将来可能需要在更大的项目上做

G

**编辑：**尝试以下解决方案会出现以下错误
文件“DataSet.cs”无法重构。当前对象是自动生成的，仅支持通过数据集设计器重命名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T13:07:47.693

我认为内置的 VS2005 重构重命名可以处理这个问题。在代码编辑器中右键单击对象名称的实例并选择重命名。

您可以在这里查看更多信息：http: [//msdn.microsoft.com/en-us/library/ms379618.aspx#vs05_refac_topic8](http://msdn.microsoft.com/en-us/library/ms379618.aspx#vs05_refac_topic8 "使用 Visual Studio 2005 重构 C# 代码")

# python - 多行字符串的缩进

> ID：705370
> 
> 赞同：5
> 
> 时间：2009-04-01T12:56:32.387
> 
> 标签：python, cmd, indentation

我有一个使用 cmd Python 模块的脚本。cmd 模块使用三引号多行字符串作为帮助文本。像这样的东西

```
def x(self, strags = None):
    """class
    help text here
    and some more help text here""" 
```

运行脚本时，命令 'help x' 将打印字符串。但是，它也会在最后两行之前打印换行符。我可以通过不缩进这些行来克服这个问题，但这会使我的代码变得丑陋{y,ier}。

如何克服这个缩进问题？专业的 Python 编码人员如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:49:01.370

就我个人而言，我尝试遵循[PEP 8](http://www.python.org/dev/peps/pep-0008/)，它将读者推荐给[PEP 257](http://www.python.org/dev/peps/pep-0257/)以获取 Docstring Conventions。它有一个关于多行文档字符串的完整部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T12:59:46.230

我会通过一致的缩进来处理它，如下所示：

```
def x(self, strags = None):
    """
    class
    help text here
    and some more help text here
    """ 
```

当然，它需要多两行，但它也通过使 doc 注释非常突出而注入了清晰度（在我看来）。

# asp.net - 打印收据 ASP.NET

> ID：705379
> 
> 赞同：1
> 
> 时间：2009-04-01T12:58:38.463
> 
> 标签：asp.net, css, printing

我目前正在做一个项目，我需要在收据打印机上打印收据。目前我正在使用 CSS 机制 media=screen ， media=print 来指示要打印的内容。

问题当然是无法删除的页眉和页脚，因为它是特定于客户端浏览器的。

所以我想知道是否有人对如何进行打印有其他建议。最好不要使用太多 IO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T20:33:26.127

一般来说，如果您需要精确控制，最好的办法是使用从服务器生成的 pdf 或其他文档格式进行打印。（如果打印收据的机器受到控制，并且有文字，那么 .doc（具有输出类型的 html）是最简单的方法。还有许多第三方控件可以从服务器端代码生成 PDF。希望这会导致你在一个可用的方向，因为你没有指定你是否控制正在使用的客户端机器。

PDF 的一个好处是您可以将其用作硬存档，也可以将收据作为附件通过电子邮件发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T20:58:33.630

页眉和页脚信息（假设您正在谈论显示在页面底部的 URL）是客户端的，您无法从服务器端更改它。

如果您的所有打印都将在公司内部完成，您可以为 Internet Explorer 打印创建组策略以在公司范围内删除这些。您也可以在您的页面上获得有关如何手动更改这些设置的说明。

另一种选择是使用 3rd 方应用程序（例如 PDF）进行打印，或者如果您可以使用该选项，则直接从服务器打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T20:14:19.557

你的意思是页眉和页脚吗？

如果是这种情况，请将页眉和页脚包含在 ID 中并创建 CSS 标记以定位它们并为它们提供更简单的样式，或者您可以使用 CSS 元素`display:none`在打印 css 中将它们完全删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T20:34:29.320

您可以将要打印的内容加载到 iframe 中，专注于它，然后打印它。这样您就可以精确控制收据上的内容。

这需要一点 javascript，但是当我编写自定义合同打印机时，我已经成功地完成了类似的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-02-24T06:01:43.597

它不是 ASP 解决方案，但可能会有所帮助：

[http://code.google.com/p/jzebra](http://code.google.com/p/jzebra)

这是一个可以绕过页眉和页脚的Java插件。

# blogs - 现场作家图片发布

> ID：705381
> 
> 赞同：0
> 
> 时间：2009-04-01T12:59:11.553
> 
> 标签：blogs

我在我的网站上托管了一个博客，我选择的博客引擎是 Subtext，我使用 Windows Live Writer 作为内容编辑器。首先，我无法在帖子中发布图像，即使发布操作进行得很好，当我进入帖子页面时也看不到图像。其次，如何设置 Subtext 以在帖子中很好地接受图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T13:45:29.287

Subtext[论坛](http://groups.google.com/group/subtext)似乎很安静。试试用谷歌搜索[Subtext Live Writer](http://www.google.com.au/search?q=Subtext+Live+Writer)，似乎有很多人在写博客 :)

# c++ - SQLite 磁盘使用情况

> ID：705385
> 
> 赞同：0
> 
> 时间：2009-04-01T13:00:08.400
> 
> 标签：c++, shared-libraries

SQLite 以小巧、快速和灵活而著称。我在我的一个 C++ 项目中使用它来将简单的统计信息保存到文件中。一次 15 分钟，将 3-5 条新的简单记录（5 行整数）保存到数据库中。在这样使用 SQLite 的几周内，我很快就观察到了明显的磁盘使用情况。我没想到，因为写入的数据量非常小。如果我将它写入纯文本文件，则磁盘的反应几乎不会引起注意。SQLite 真的是这样轻量级的数据库，还是我的问题太简单而无法使用关系数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T13:04:20.417

VACUUM 可以解决您的问题。 [http://www.sqlite.org/lang_vacuum.html](http://www.sqlite.org/lang_vacuum.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:05:12.117

好吧，我使用 SQLite 来存储一个包含 100000 个条目的英文字典内容的表，它占用了大约 20MB，所以，我认为问题不在于 SQLite，但如果你提供更多线索会很好为了得到更准确的答案

# c# - 从 C# 中的 Windows.h 定义？

> ID：705386
> 
> 赞同：4
> 
> 时间：2009-04-01T13:00:25.433
> 
> 标签：c#, winapi

有什么简单的方法可以从 C# 中的 windows.h 获取定义（至少是 WM_ 的东西）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T13:01:46.693

[http://www.pinvoke.net/default.aspx/Enums/WindowsMessages.html](http://www.pinvoke.net/default.aspx/Enums/WindowsMessages.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-01T13:03:54.847

另一种选择是使用 PInvoke 互操作助手。它包含几乎所有通过 windows.h 定义的常量的数据库，并提供即时翻译 C 标头代码的能力。

[http://www.codeplex.com/clrinterop](http://www.codeplex.com/clrinterop)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-15T11:12:27.570

将您的 Visual Studio 搜索指向文件，即 Platforms SDK 的安装位置：

例如：C:\Program Files\Microsoft SDKs\Windows\v6.1\Include

然后搜索常数。

您可以参考这篇文章：如何查找 Windows API 函数使用的未记录常量：http: [//support.microsoft.com/kb/187674](http://support.microsoft.com/kb/187674)

# uml - 在 UML 类图中表示网络连接的最佳方式是什么？

> ID：705395
> 
> 赞同：4
> 
> 时间：2009-04-01T13:02:39.173
> 
> 标签：uml, class-diagram

在 UML 类图中表示网络连接的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T13:08:13.450

UML 类图不适合将拓扑概念描述为“网络”；它们更适合对象之间的层次结构和相互依赖关系。还是您在谈论 Connection 类？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T13:11:28.700

类图是试图显示网络连接的错误位置。类图将仅显示软件中的类以及它们之间的关系。您应该使用部署图来显示您的软件元素是如何通过网络部署的。

您还可以包括一个通信图来显示软件的不同部分如何相互通信，而不考虑部署模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-01T09:35:05.187

图或网络是一种结构，其中任何元素（UM 中的类或对象）都可以连接到任何其他元素。“连接”可以是除 UML 中的“is a”之外的任何关联。因此，可以使用一组类和关联来表示图或网络的结构。

例如，考虑一类 Places、一个关联“被连接”和一类 Roads。这样，任何复杂的 Places 和 Roads 网络都可以通过将 Place 的一个实例与 Place 的另一个实例和 Road 的实例相关联来表示。因此，RDF 三元组代表了一个语义网络。

在 OOAD / UML 中表示图形或网络是否有任何其他（特殊或特定）约定？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T14:51:01.217

您应该使用部署图来显示您的软件元素是如何通过网络部署的。部署图用于可视化部署软件组件的系统的物理组件的拓扑。部署图：描述系统实现中使用的硬件以及硬件上部署的执行环境和工件。 [http://search.aol.com/aol/image?s_it=topsearchbox.imageDetails&v_t=client_searchbox&imgsz=&imgtype=&imgc=&q=deployment+diagrama+uml](http://search.aol.com/aol/image?s_it=topsearchbox.imageDetails&v_t=client_searchbox&imgsz=&imgtype=&imgc=&q=deployment+diagrama+uml) 您使用工具 Rational Rose 来获得它。一切都是为了文档，当网络发生变化时，每个人都知道您使用了 Rational Rose 和部署图。结构图强调被建模的系统中必须存在的东西，每个图都有一个功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-05-17T09:58:29.533

如上所述，UML 已经服务于其他目的，而不是代表网络或组件的物理基础设施。

可以在 creatley -> [https://creately.com/diagram/example/hfgz8ekz/Network%20Architecture%20Diagram上找到一些网络图示例](https://creately.com/diagram/example/hfgz8ekz/Network%20Architecture%20Diagram)

我个人喜欢使用[https://www.draw.io/](https://www.draw.io/)来生成图表——它基于网络，非常直观，并且具有许多功能和大型图像集库。

# .net - How do I open a FolderBrowserDialog at the selected folder?

> ID：705409
> 
> 赞同：26
> 
> 时间：2009-04-01T13:08:48.660
> 
> 标签：.net, winforms

I have a FolderBrowserDialog, displayed with code shown below. However, it keeps opening with 'Computer', i.e. the root of the folder tree, selected. How do I get it to open on the selected folder?

```
 var folderBrowser = new FolderBrowserDialog();
        folderBrowser.Description = "Select Chase 6 Installation Folder";
        folderBrowser.RootFolder = Environment.SpecialFolder.MyComputer;
        folderBrowser.ShowNewFolderButton = false;
        if (Directory.Exists(Properties.Settings.Default.defaultChasePath))
        {
            string x = Properties.Settings.Default.defaultChasePath;
            folderBrowser.SelectedPath = x;
        }
        if (folderBrowser.ShowDialog(this) == DialogResult.OK)
        {
            chasePathtext.Text = folderBrowser.SelectedPath;
        } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2010-03-09T02:19:16.573

If you set RootFolder to Environment.SpecialFolder.Desktop then it will open to the SelectedFolder as long as the path is valid.

When you set RootFolder to Environment.SpecialFolder.MyComputer, then the first time the dialog opens, it will always start at MyComputer, not the SelectedFolder path.

If a valid selection is made, then subsequent uses of the same FolderBrowserDialog instance will open at the previously selected path.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-01T13:19:09.663

From the Microsoft help for FolderBrowserDialog class:

> Typically, after creating a new FolderBrowserDialog, you set the RootFolder to the location from which to start browsing. Optionally, you can set the SelectedPath to an absolute path of a subfolder of RootFolder that will initially be selected.

Are you possibly setting the SelectedPath to a location that doesn't equate to a subfolder of RootFolder (i.e. My Computer)? That would probably cause it to dive back to the RootFolder as the presented location.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-03-01T11:44:11.637

Set rootfolder to

```
Environment.SpecialFolder.Desktop 
```

and it should work as you want.

It is the only way to actually set the initial selected folder. You'd think using

```
Environment.SpecialFolder.MyComputer 
```

would work, but it doesn't.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-12T13:54:00.120

This works for me:

```
FolderBrowserDialog diag = new FolderBrowserDialog();
diag.Description = "Select a folder in which to save your workspace...";
diag.SelectedPath = Application.StartupPath;

if (DialogResult.OK == diag.ShowDialog())
{
    // do something here...
} 
```

Set the SelectedPath property, not RootFolder.

EDIT: Here's a screenshot showing the Application.StartupPath being in "C:\LocalDocuments\Visual Studio 2010\Projects\FolderBrowserDialogTest\FolderBrowserDialogTest\bin\Debug", which is most definitely *not* in the Desktop directory.

![enter image description here](https://i.stack.imgur.com/s41rw.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-03T08:39:09.487

The folderbrowser dialog is a wrapper around a windows API call that does not match all the relevant paths possible ( I suppose that would be an uphill task..) this can be mimicked using your own class though. Generate the following class inside your application (adding namespace and System.Reflection)

```
public class RootSetter
{
    [Flags()]
    public enum CsIdl
    {
        Desktop = 0x0000, // Desktop
        Internet = 0x0001, // Internet Explorer (icon on desktop)
        Programs = 0x0002, // Start Menu\Programs
        Controls = 0x0003, // My Computer\Control Panel
        Printers = 0x0004, // My Computer\Printers
        Personal = 0x0005, // My Documents
        Favorites = 0x0006, // user name\Favorites
        Startup = 0x0007, // Start Menu\Programs\Startup
        Recent = 0x0008, // user name\Recent
        SendTo = 0x0009, // user name\SendTo
        BitBucket = 0x000a, // desktop\Recycle Bin
        StartMenu = 0x000b, // user name\Start Menu
        MyDocuments = 0x000c, // logical "My Documents" desktop icon
        MyMusic = 0x000d, // "My Music" folder
        MyVideo = 0x000e, // "My Videos" folder
        DesktopDirectory = 0x0010, // user name\Desktop
        Drives = 0x0011, // My Computer
        Network = 0x0012, // Network Neighborhood (My Network Places)
        Nethood = 0x0013, // user name\nethood
        Fonts = 0x0014, // windows\fonts
        Templates = 0x0015,
        CommonStartMenu = 0x0016, // All Users\Start Menu
        CommonPrograms = 0x0017, // All Users\Start Menu\Programs
        CommonStartup = 0x0018, // All Users\Startup
        CommonDesktopDirectory = 0x0019, // All Users\Desktop
        AppData = 0x001a, // user name\Application Data
        PrintHood = 0x001b, // user name\PrintHood
        LocalAppData = 0x001c, // user name\Local Settings\Applicaiton Data (non roaming)
        AltStartup = 0x001d, // non localized startup
        CommonAltStartup = 0x001e, // non localized common startup
        CommonFavorites = 0x001f,
        InternetCache = 0x0020,
        Cookies = 0x0021,
        History = 0x0022,
        CommonAppdata = 0x0023, // All Users\Application Data
        Windows = 0x0024, // GetWindowsDirectory()
        System = 0x0025, // GetSystemDirectory()
        ProgramFiles = 0x0026, // C:\Program Files
        MyPictures = 0x0027, // C:\Program Files\My Pictures
        Profile = 0x0028, // USERPROFILE
        SystemX86 = 0x0029, // x86 system directory on RISC
        ProgramFilesX86 = 0x002a, // x86 C:\Program Files on RISC
        ProgramFilesCommon = 0x002b, // C:\Program Files\Common
        ProgramFilesCommonx86 = 0x002c, // x86 Program Files\Common on RISC
        CommonTemplates = 0x002d, // All Users\Templates
        CommonDocuments = 0x002e, // All Users\Documents
        CommonAdminTools = 0x002f, // All Users\Start Menu\Programs\Administrative Tools
        AdminTools = 0x0030, // user name\Start Menu\Programs\Administrative Tools
        Connections = 0x0031, // Network and Dial-up Connections
        CommonMusic = 0x0035, // All Users\My Music
        CommonPictures = 0x0036, // All Users\My Pictures
        CommonVideo = 0x0037, // All Users\My Video
        Resources = 0x0038, // Resource Direcotry
        ResourcesLocalized = 0x0039, // Localized Resource Direcotry
        CommonOemLinks = 0x003a, // Links to All Users OEM specific apps
        CdBurnArea = 0x003b, // USERPROFILE\Local Settings\Application Data\Microsoft\CD Burning
        ComputersNearMe = 0x003d, // Computers Near Me (computered from Workgroup membership)
        FlagCreate = 0x8000, // combine with CSIDL_ value to force folder creation in SHGetFolderPath()
        FlagDontVerify = 0x4000, // combine with CSIDL_ value to return an unverified folder path
        FlagNoAlias = 0x1000, // combine with CSIDL_ value to insure non-alias versions of the pidl
        FlagPerUserInit = 0x0800, // combine with CSIDL_ value to indicate per-user init (eg. upgrade)
        FlagMask = 0xFF00, // mask for all possible flag values
    }

    public static void SetRootFolder(System.Windows.Forms.FolderBrowserDialog fbd, CsIdl csidl)
    {
        Type t = fbd.GetType();
        FieldInfo fi = t.GetField("rootFolder", BindingFlags.Instance | BindingFlags.NonPublic);
        fi.SetValue(fbd, (System.Environment.SpecialFolder)csidl);
    } 
```

and then inside your calling class when setting the root folder use the following syntax. It would be better to check the enum fior a close value should you find one but if you cannto then the one below is fairly generic and allows me to move thorugh my C drive easily enough.

```
private void button1_Click(object sender, EventArgs e)
    {
        FolderBrowserDialog folderBrowser = new FolderBrowserDialog(); 
        folderBrowser.Description = "Select Chase 6 Installation Folder"; 
        folderBrowser.RootFolder = Environment.SpecialFolder.ProgramFiles; 
        folderBrowser.ShowNewFolderButton = false; 

        if (Directory.Exists(Properties.Settings.Default.defaultChasePath)) 
        { 
            string x = Properties.Settings.Default.defaultChasePath; 

            //Use API Flag to set correct path, following tahter a catch all better to check
            //enum for full list
            RootSetter.SetRootFolder(folderBrowser, RootSetter.CsIdl.FlagDontVerify);

            folderBrowser.SelectedPath = x;

        } 
        if (folderBrowser.ShowDialog(this) == DialogResult.OK) 
        { 
            string huz = folderBrowser.SelectedPath; 
        }
    } 
```

Hope that helps :)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-18T09:53:29.950

My solution, [here](https://stackoverflow.com/questions/12946488/is-it-possible-to-use-non-special-folder-as-a-folderbrowserdialogs-root-folder/12950364#12950364)

I wrote this solution based on [this solution](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/4ba0955a-e963-4528-a5f0-105fa8536839) by ParkerJay86\. The solution worked on Windows 8 with several paths tested. Consider that your specified rootFolder should start with `DriveLetter:\` like "`C:\ProgramData`"

```
 private void browseFolder_Click(object sender, EventArgs e)
        {
            String selectedPath;
            if (ShowFBD("C:\\", "Please Select a folder", out selectedPath))
            {
                MessageBox.Show(selectedPath);
            }
        }

        public bool ShowFBD(String rootFolder, String title, out String selectedPath)
        {
            var shellType = Type.GetTypeFromProgID("Shell.Application");
            var shell = Activator.CreateInstance(shellType);
            var result = shellType.InvokeMember("BrowseForFolder", BindingFlags.InvokeMethod, null, shell, new object[] { 0, title, 0, rootFolder });
            if (result == null)
            {
                selectedPath = "";
                return false;
            }
            else
            {
                StringBuilder sb = new StringBuilder();
                while (result != null)
                {
                    var folderName = result.GetType().InvokeMember("Title", BindingFlags.GetProperty, null, result, null).ToString();
                    sb.Insert(0, String.Format("{0}\\", folderName));
                    result = result.GetType().InvokeMember("ParentFolder", BindingFlags.GetProperty, null, result, null);
                }
                selectedPath = sb.ToString();

                selectedPath = Regex.Replace(selectedPath, @"Desktop\\Computer\\.*\(\w:\)\\", rootFolder.Substring(0, 3));
                return true;
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-09-20T14:40:39.143

I was trying to assign a non-existent folder path to the `SelectedFolder` property. When you use a valid path, the root folder loses relevance. When you don't assign a `SelectedFolder` value, at least one of the `Environment.SepcialFolder` values will suffice.

COMING SOON: Attempts at using reflection to dynamically set a non-special root folder. Stay tuned.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-10-23T17:31:35.897

To select existing path (no special f...ng folders) you must write own treeview based form.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-15T15:51:58.583

I was seeing this problem using:

```
RootFolder = Environment.SpecialFolder.MyComputer
SelectedPath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments) 
```

By playing around with hard-wired versions of that path's subpaths and sibling branches, I decided this really is a permissions thing. It doesn't work with C:\Users[UserID]\Documents, but it works fine with C:\Users, or C:\Users\Public\Documents (even though that doesn't exist or, at least it's called Public Documents instead of Documents), or C:\Users\Default\Documents (even though that doesn't exist or, at least it's called My Documents instead of Documents).

What I ended up doing was checking whether the SelectedPath contains "\users[UserID]", then using Environment.SpecialFolder.Desktop if it did and Environment.SpecialFolder.MyComputer if it didn't.

Probably, checking the SelectedPath folder permissions would be a better test, but this will do for the expected use cases.

# asp.net - 为什么 ModalPopupExtender 不通过 javascript 显示？

> ID：705411
> 
> 赞同：4
> 
> 时间：2009-04-01T13:09:37.940
> 
> 标签：asp.net, javascript, asp.net-ajax, modalpopupextender

我关注了几个网络资源来了解如何从客户端显示弹出窗口，并编写了以下代码：

```
<asp:ImageButton runat="server" ID="btnOk" ImageUrl="imagens/btnAlterar.gif" OnClientClick="btnOkClick()" />

<asp:LinkButton runat="server" ID="dummyForPopup" Visible="false"/>

<ajaxToolKit:ModalPopupExtender runat="server" BehaviorID="btnOkPopupBehavior" ID="MPXtender" TargetControlID="dummyForPopup"  PopupControlID="pnlUpdateUserModal" BackgroundCssClass="modalBackground" OkControlID="btnCloseRequestUserUpdate" OnOkScript="userUpdReq_onOk()" />

function btnOkClick()
{
    if(validateAll())
    {
        var behavior = $find('btnOkPopupBehavior');
        if (behavior)
        {
            behavior.show();
        }
        else
        {
            var lblOutput = $get('<%= lblOutput .ClientID %>');
            lblOutput .innerText = 'Couldn't find popup';
        }
    }
} 
```

以前我将模态弹出窗口链接到确定按钮，它工作得很好。现在我需要在打开弹出窗口之前进行一些验证，并且此代码不再起作用 =/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T14:05:08.837

1) 你的虚拟按钮必须是可见的 = true，否则 javascript 不能正常工作。所以设置 visible = true 但不使用 css 显示：

```
 <asp:LinkButton runat="server"
 ID="dummyForPopup" style
 ="display:none" Visible="true" /> 
```

2) lblOutput .innerText = '找不到弹出窗口'; 是一个 JavaScript 错误。您需要将其更改为：“找不到弹出窗口”；（或使用`&apos;`）

3) OnClientClick="btnOkClick()" 应该说： OnClientClick="btnOkClick(); return false;"

4) 在您的页面上查找任何其他 javascript 错误，因为这些错误会阻止弹出窗口正常工作。

# php - 在 PHP 中查看文件信息？

> ID：705418
> 
> 赞同：0
> 
> 时间：2009-04-01T13:11:49.027
> 
> 标签：php, file, uploading

我刚刚做了一个文件上传表格，到目前为止我已经有了它，所以用户只能上传自己的.mp3；

目前，我的表单所做的只是将文件名更改为 $username 。“——”。$标题; 他们输入的变量；

然而，该表单仍处于测试阶段，我想问是否有一种方法可以使用 PHP 查看文件信息（如果不是所有文件，则为 .mp3），然后使用 $username 和 $title 重写文件信息，以及来自用户的其他输入 - 即在上传文件之前。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:15:09.987

您可以使用[getID3()](http://getid3.sourceforge.net/)解析器来获取 MP3 文件信息。

还有[这些 ID3 PHP 函数](http://php.mirrors.ilisys.com.au/manual/en/ref.id3.php)可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T13:15:43.243

这就是你所追求的吗？[http://getid3.sourceforge.net/](http://getid3.sourceforge.net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:32:19.520

有多种方法可以做到这一点......有一个名为 id3 的 pecl ext 允许您读取和设置 mp3 文件的标签。

pecl 的链接：http://pecl.php.net/package/id3 [，](http://pecl.php.net/package/id3) 这里还有一个关于如何使用 ext 的好教程的链接。[http://devzone.zend.com/article/4025 -读和写-MP3-和-照片-元数据-with-PECL-](http://devzone.zend.com/article/4025-Reading-and-Writing-MP3-and-Photo-Metadata-with-PECL-)

如果未在文件上设置 mp3 标签，您可以随时尝试[ffmpeg](http://ffmpeg.mplayerhq.hu/)，它会提供有关文件编码的所有信息......还有一个 php lib 包装了 ffmpeg，这可能很有用[http://sourceforge.net /projects/ffmpeg-phpclass/](http://sourceforge.net/projects/ffmpeg-phpclass/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-02-22T09:02:56.477

如果您无法安装 php id3 模块，您可以使用[此功能](http://www.barattalo.it/2010/02/22/reading-mp3-informations-with-php-id3-tags/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:18:09.527

听起来您只是想重命名文件。如果是这种情况，你会做这样的事情：

```
copy($OrigPath . $OrigFilename, $OrigPath . $Username . " - " . $Title . $OrigFilename); 
```

参考：[http ://us2.php.net/manual/en/function.rename.php](http://us2.php.net/manual/en/function.rename.php)

G人

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T13:40:54.620

如果您真的在询问是否可以“在上传文件之前”获取文件信息，那么不，您不能。您无法从 Web 服务器读取客户端硬盘上的文件。其他答案涵盖了文件上传后您可以执行的操作。

# javascript - 如何让 Visual Studio 2005 在脚本资源管理器中显示我正在运行的 JavaScript 文件？

> ID：705419
> 
> 赞同：1
> 
> 时间：2009-04-01T13:13:50.690
> 
> 标签：javascript, visual-studio, debugging, visual-studio-2005

在问题[为什么 Visual Studio 2005 不会调试我的 javascript？](https://stackoverflow.com/questions/705254/why-will-visual-studio-2005-not-debug-my-javascript)我了解到**在 Visual Studio 2005 中可以**进行调试，但您必须开始调试您的应用程序，然后按**CTRL-ALT-N 打开脚本资源管理器**以设置断点等。

但是，即使使用以下简单代码，当我按下 CTRL-ALT-N 时，**脚本资源管理器窗口也是完全空白**的。根据我在该主题上找到的所有文章，例如在我的情况下它应该有“main.js”（我想它就像在 Firebug 中调试）但它是空白的。

**我还需要对 Visual Studio 2005 做些什么，以便脚本资源管理器显示我正在运行的 javascript 文件？**

**默认.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="TestJavascriptDebugging2005._Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
        <script type="text/javascript" src="javascript/main.js"></script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <p>This is HTML and <script type="text/javascript">test()</script>.</p>
    <p><button onclick="doIt(this)">Test</button></p>
    </div>
    </form>
</body>
</html> 
```

**javascript/main.js：**

```
function test() {
    document.write("this is from javascript code2");
}

function doIt(element) {
    alert("This is the javascript function2.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:20:56.663

尝试通过 Debug > Attach to process 将 Visual Studio 附加到 MSIE（不确定 VS2005 中是否存在，环顾四周）。

附加到进程时，请确保检查脚本选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-09T06:35:15.597

最简单的入门方法是：

*   打开IE7
*   转到菜单 Internet 选项 > 高级
*   取消选中“禁用脚本调试”

要在 javascript 中添加断点，请添加“调试器；” 在你的代码中。在 IE7 中打开一个引用该脚本的页面，然后会弹出一个窗口询问您是否要在 Visual Studio 中调试您的脚本

```
<script type="text/javascript">

debugger;

// put your code here

</script> 
```

# git - 如何在主分支中拉出远程跟踪分支

> ID：705420
> 
> 赞同：1
> 
> 时间：2009-04-01T13:14:05.650
> 
> 标签：git

我在 master 中，我做了一个 git pull，我收到一条消息，表明我需要拉一个远程分支。

通常我先做一个*git co [branch]*然后*git pull/rebase*。

有没有办法 git pull/rebase of [branch] 而不必先做一个*git co [branch]*？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-24T16:27:36.623

如果你结合 Apikot 和 Jeremy，你会得到：

```
git pull --rebase origin branch 
```

或者，如果您尚未在配置中设置分支映射：

```
git pull --rebase origin <src>:<dst> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T13:16:56.877

git pull 起源分支

抱歉，忘了提拉合并。

如果您可以使用 git fetch origin branch 来获取该分支。[http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html](http://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:45:43.407

我认为没有任何方法可以在不切换到分支的情况下对分支进行操作。但是您可以通过执行 git pull --rebase origin 来组合 pull 和 rebase

# .net - 为什么我的应用程序在执行期间使用 CSC

> ID：705427
> 
> 赞同：1
> 
> 时间：2009-04-01T13:16:12.417
> 
> 标签：.net, csc, sgen

我一直在尝试使用 Remotesoft Linker 和 Mini Deployment 工具从我的托管代码创建单个本机可执行文件（不需要安装框架）。它具有的可配置功能之一是 csc.exe 是否可用于最终可执行文件。它的文档说它通常只在使用 XML 序列化时才需要（我是）。我修改了构建过程以使用 SGen 创建序列化程序集，并将结果添加到使用我的 xml 类的解决方案中每个项目的引用中。序列化类使其成为链接的 .net 可执行文件（所有 .net dll 组合成一个托管 exe）；所以我假设我已经正确配置了。

但是，我的应用程序在运行时仍会尝试执行 csc。我是否对序列化程序集做错了什么，导致它在运行时重新创建；或者我的应用程序是否在做其他需要 csc 的事情，我该如何确定？

[http://www.remotesoft.com/linker/](http://www.remotesoft.com/linker/)

[在构建过程中生成 Xml 序列化程序集](https://stackoverflow.com/questions/134224/generating-an-xml-serialization-assembly-as-part-of-my-build)

编辑：使用修改后的 app.config 进行一些测试，以保持序列化文件在生成时可见（通过撤消构建时间生成进行测试）；看来我之前确实已经正确创建了它们。除非框架的不同部分在运行时调用 csc 并且使用不同的标志不隐藏其结果，否则我认为 RemoteSoft 工具可能是罪魁祸首。我不能确定，因为即使它注入的 app.config 文件告诉它，输出可执行文件也不会留下它创建的任何临时文件。

我使用的 app.info 是这个。在其他地方，我看到了使用值 4 的示例，但无法找到它们的行为之间的任何区别。

```
<?xml 版本="1.0" 编码="utf-8" ?>
<配置>
   <系统诊断>
      <开关>
         <add name="XmlSerialization.Compilation" value="1" />
      </开关>
   </system.diagnostics>
</配置>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T13:25:06.107

尽管您已经生成了 XML 序列化程序集，但 Remotesoft Linker 的工作方式可能意味着内置序列化框架可能无法识别它们。我并不是说是这种情况，只是说这是第一个停靠港。

我不知道序列化框架如何决定是否使用 csc 的细节——但这可能是首先要调查的事情。

# python - 在 Windows XP 的 cygwin 上使用 python 显示 GBP 符号（井号）需要什么编码？

> ID：705434
> 
> 赞同：9
> 
> 时间：2009-04-01T13:18:23.083
> 
> 标签：python, encoding, python-2.5

我有一个在 cygwin 中运行的 python (2.5.4) 脚本（在 Windows XP 的 DOS 框中）。我想在输出中包含一个井号 (£)。如果这样做，我会收到此错误：

```
SyntaxError: Non-ASCII character '\xa3' in file dbscan.py on line 253, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

好的。所以我查看了那个 PEP，现在尝试将它添加到我的脚本的开头：

```
# coding=cp437 
```

这停止了​​错误，但输出显示 ú 它应该显示 £。

我也尝试过 ISO-8859-1，结果相同。

有谁知道我需要哪种编码？

或者我在哪里可以找到？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T23:22:19.447

磅符号的 Unicode 是 163（十进制）或十六进制的 A3，因此无论脚本的编码如何，只要输出编码正常工作，以下内容都应该有效。

```
print u"\xA3" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-01-06T18:44:03.713

尝试编码：

`# -*- coding: utf-8 -*-`

然后显示“£”符号：

```
print unichr(163) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T13:20:36.867

这里涉及两种编码：

*   源代码的编码，必须正确才能使您的输入文件表达您认为的意思
*   输出的编码，必须正确才能使发出的符号按预期显示。

看来您的输出编码现在已关闭。如果这是在 Cygwin 的终端窗口中运行的，那么您需要匹配的是该终端的编码。

**编辑**：我刚刚在（本机）Windows XP 终端窗口中运行了以下 Python 程序，认​​为它有点有趣：

```
>>> ord("£")
156 
```

156 肯定不是您尝试的 Latin1 编码中井号的代码点。[它似乎](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP1252.TXT)也不在 Window 的代码页 1252 中，我希望我的终端可以使用它……很奇怪。

# asp.net - ASP.NET MenuItem 个别样式

> ID：705440
> 
> 赞同：12
> 
> 时间：2009-04-01T13:19:43.937
> 
> 标签：asp.net, menu, styles, menuitem

我希望使用 ASP.NET 菜单控件来导航我的网站。但是，我要求每个 MenuItem 的样式必须不同（不同的颜色，静态和 onHover）。如果不创建从 MenuItem 继承的自定义类，这可能吗？

对更好的解决方案的想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T20:57:37.417

如果其他人遇到同样的问题......

一种对我有用的快速而肮脏的方法是将 HTML 内容强制到 MenuItem 中`Text`（使用适当的转义）。然后，您可以在 CSS 中以任何您想要的方式对其进行样式设置，甚至可以将每个菜单项设置为使用不同的样式：

```
<asp:MenuItem Text="<span class=&quot;menuitem_text&quot;>Text Here</span>" /> 
```

HTML 结束在`<a>`标签内：

```
<li><a  ...><span class="menuitem_text">Text Here</span></a></li> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-01T14:46:59.390

没有覆盖菜单上的 RenderContents，您的选择非常有限。您需要的大部分内容都是私密且密封的，您将无处可去。

我的解决方案是使用模板。您可以使用 MenuItem.Value 或 Depth 和 ItemIndex 来识别每个项目并提供必要的属性。

在页面中：

```
<asp:Menu ID="menu" runat="server" DynamicHorizontalOffset="2" StaticSubMenuIndent="10px">
    <Items>
        <asp:MenuItem Text="Item 1" Value="value 1">
            <asp:MenuItem Text="Item 2" Value="value 2">
                <asp:MenuItem Text="Item 3" Value="value 3"></asp:MenuItem>
            </asp:MenuItem>
            <asp:MenuItem Text="Item 4" Value="value 4">
                <asp:MenuItem Text="Item 5" Value="value 5"></asp:MenuItem>
            </asp:MenuItem>
            <asp:MenuItem Text="Item 6" Value="value 6"></asp:MenuItem>
        </asp:MenuItem>
        <asp:MenuItem Text="Item 7" Value="value 7"></asp:MenuItem>
        <asp:MenuItem Text="Item 8" Value="value 8"></asp:MenuItem>
    </Items>
    <StaticItemTemplate>
        <asp:Panel runat="server" ForeColor='<%# GetItemColor(Container) %>'>
            <%# Eval("Text") %> - <%# Eval("Value") %>
        </asp:Panel>
    </StaticItemTemplate>
    <DynamicItemTemplate>
        <asp:Panel ID="Panel1" runat="server" ForeColor='<%# GetItemColor(Container) %>'>
            <%# Eval("Text") %> - <%# Eval("Value") %>
        </asp:Panel>
    </DynamicItemTemplate>
</asp:Menu> 
```

在代码中（不要介意这段代码的愚蠢，它只是为了演示原理）：

```
public Color GetItemColor(MenuItemTemplateContainer container)
{
    MenuItem item = (MenuItem)container.DataItem;

    //identify based value
    if (item.Value == "value 2")
        return Color.Brown;

    //identify based on depth and index
    if (item.Depth == 0)
        switch (container.ItemIndex)
        {
            case 0: return Color.Red;
            case 1: return Color.Blue;
            case 2: return Color.DarkGreen;
            default:
                return Color.Black;
        }
    else
        switch (container.ItemIndex)
        {
            case 0: return Color.Purple;
            case 1: return Color.Aqua;
            case 2: return Color.DarkOrange;
            default:
                return Color.Black;
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-30T06:06:15.957

尝试像这样为每个菜单项设置样式：

后面的代码：

```
 mnuMail.Items[1].Text = "<span class=\"bold\">Inbox</span>"; 
```

CSS类：

```
.bold
{
   font-weight: bold;
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2009-04-01T13:40:20.207

如果以编程方式生成菜单，则可以在创建每个 MenuItem 时添加样式和 onmouseover/onmouseout 属性，例如：

```
menuItem.Attributes["style"] = "color: red;";
menuItem.Attributes["onmouseover"] = "javascript:Highlight(this);"; 
```

或者，尝试在标记中添加这些属性，IntelliSense 不会告诉您它们有效，但它们通常有效（我没有专门使用 MenuItems 对其进行测试）：

```
<asp:menuitem navigateurl="Home.aspx" 
    text="Home"
    imageurl="Images\Home.gif"
    popoutimageurl="Images\Popout.jpg"   
    tooltip="Home"
    style="color: red;" onmouseover="Highlight(this);" onmouseout="Unhighlight(this);"/> 
```

[CSS Friendly Adapters](http://www.asp.net/CssAdapters/)可能会让你很幸运。

当然，您可以创建一个继承的类并重新处理渲染例程......

# php - 是否可以从 php 使用 C++ 二进制文件

> ID：705443
> 
> 赞同：21
> 
> 时间：2009-04-01T13:20:11.610
> 
> 标签：php

是否可以编写一些 C 或 C++ 代码并编译为二进制文件，然后将这些二进制文件与 php 一起使用？是否也可以使用 C 和 C++ 编写 php 库？

如果是这样，请告诉我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-01T13:28:28.800

PHP 在设计上是模块化的——它由“引擎”和许多扩展组成，其中一些是必不可少的（例如“标准”扩展），而另一些则是可选的。它们可以被编译或动态加载（通过 php.ini 设置或`dl()`函数）。

如果您愿意学习 API，您可以轻松地用 C/C++ 编写自己的 PHP 扩展。从有关如何[“破解 Zend 引擎”](http://www.php.net/manual/en/internals2.php)的文档开始。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-04-02T02:29:38.360

您可能想查看[SWIG](http://www.swig.org/)，这是一种用于包装库的通用工具，以便可以从各种语言中调用它们。SWIG 支持 PHP，Perl 和 Lua（我个人使用的目标）也支持。引用[SWIG 网站上](http://www.swig.org/compare.html)的功能列表：

> SWIG 当前为 18 种不同的目标语言生成包装器代码：
> 
> *   快板 CL
> *   C＃
> *   CFFI
> *   CLISP
> *   鸡
> *   诡计
> *   爪哇
> *   卢阿
> *   模数 3
> *   方案
> *   OCAML
> *   八度
> *   Perl
> *   PHP
> *   Python
> *   R
> *   红宝石
> *   Tcl
> *   UFFI
> 
> 除此之外，解析树还可以导出为 XML 和 Lisp s 表达式。实验工作也可用于 Pike 模块。

Some of its features are dependent on back-end support in the per-language wrapper generators, but in general it provides easy to use wrappers for passing all plain-data value types in and out of functions. Where the target language has the concept, it can usually map object models as well.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-01T13:22:51.917

您可以在 php 中使用 C++ 编译代码，方法是使用 system() 函数并通过操作系统调用您的程序（就像在命令行上一样）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T13:27:55.227

可以用 C++ 编写 php 扩展（但您还必须编写 C 外观）。这不是微不足道的，而且我想说，如果你问而不是查看 PHP 代码，你对 C 以及 PHP 内部的工作方式不太熟悉，而且由于它的文档不好，这对你来说是个坏主意用 C 编写库。

编辑：有一个......一些关于zend的基本教程。[http://devzone.zend.com/node/view/id/1021](http://devzone.zend.com/node/view/id/1021)，正如我正在调查的那样，也许自我的 PHP 时代以来文档发生了变化:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-01T13:34:03.840

您可以用几乎任何语言编写扩展，并通过动态链接库将它们与 PHP 一起使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-01T13:35:58.453

您可以构建共享对象扩展，然后 php 可以加载。在[http://devzone.zend.com/node/view/id/1021上有一个简短的教程](http://devzone.zend.com/node/view/id/1021)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-01T15:48:03.487

您可以使用 C/C++ 编写代码并将其编译为 EXE。然后你可以调用 exec(); 从 PHP 并执行代码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-01T13:29:22.667

PHP 正在从预先构建的库中调用函数来完成它所做的许多事情。如果您有自己的用 C 或 C++ 编写的库，您可以为其创建 PHP 绑定，然后像使用任何其他 PHP 函数一样从其余的 PHP 代码中调用它。

以 Mcrypt 函数为例，它只是 libMyCrypt 库的 PHP 包装器。

您说的很有趣，“因为企业应用程序确实需要它”。您需要的 PHP 当前库集中缺少什么？

# ios - iOS：URL 字符串中的 & 符号问题

> ID：705448
> 
> 赞同：23
> 
> 时间：2009-04-01T13:20:38.257
> 
> 标签：ios, objective-c, nsurl

我们如何在 URL 中传递字符串 Mr.X & Mr.Y。

我已经尝试过了，但是这个可以处理所有字符，但可以使用 & 符号。

```
[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding] 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-07-28T08:11:44.633

甚至更短：

```
@implementation NSString (Escaping)
- (NSString*)stringWithPercentEscape {            
    return [(NSString *) CFURLCreateStringByAddingPercentEscapes(
        NULL, 
        (CFStringRef)[[self mutableCopy] autorelease], 
        NULL, 
        CFSTR("￼=,!$&'()*+;@?\n\"<>#\t :/"),
        kCFStringEncodingUTF8) autorelease];
}
@end 
```

在这里，它再次作为符合 ARC 的内联函数助手：

```
#if __has_feature(objc_arc)
static inline NSString *hxURLEscape(NSString *v) {
    static CFStringRef _hxURLEscapeChars = CFSTR("￼=,!$&'()*+;@?\r\n\"<>#\t :/");
    return ((__bridge_transfer NSString *)CFURLCreateStringByAddingPercentEscapes(
        NULL, 
        (__bridge CFStringRef)[v mutableCopy], 
        NULL, 
        _hxURLEscapeChars, 
        kCFStringEncodingUTF8));
}
#endif 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2009-04-01T15:28:54.813

`-stringByAddingPercentEscapesUsingEncoding:`不执行完整的转义编码。您应该使用手动添加编码`-replaceOccurrencesOfString:withString:`

[这是最初在https://devforums.apple.com/message/15674#15674](https://devforums.apple.com/message/15674#15674)建议的完整列表（反映 Gamecat 的列表）。正如尼克指出的那样，这很昂贵，所以不要简单地包含完整列表而不考虑您对逃生的真正要求。

```
NSMutableString *escaped = [actionString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];   
[escaped replaceOccurrencesOfString:@"$" withString:@"%24" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"&" withString:@"%26" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"+" withString:@"%2B" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"," withString:@"%2C" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"/" withString:@"%2F" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@":" withString:@"%3A" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@";" withString:@"%3B" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"=" withString:@"%3D" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"?" withString:@"%3F" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"@" withString:@"%40" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@" " withString:@"%20" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"\t" withString:@"%09" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"#" withString:@"%23" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"<" withString:@"%3C" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@">" withString:@"%3E" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"\"" withString:@"%22" options:NSCaseInsensitiveSearch range:wholeString];
[escaped replaceOccurrencesOfString:@"\n" withString:@"%0A" options:NSCaseInsensitiveSearch range:wholeString]; 
```

此代码肯定会对您的 URL 进行哈希处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-01T13:30:04.630

使用 %26 作为 url 转义。

其他逃生：

```
$  %24
&  %26
+  %2B
,  %2C
/  %2F
:  %3A
;  %3B
=  %3D
?  %3F
@  %40 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-12T23:24:00.943

`stringByAddingPercentEscapesUsingEncoding`也不能正常工作`+`。

这是一个更简单的解决方案：

```
[[[urlString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding] stringByReplacingOccurrencesOfString:@"&" withString:@"%26"] stringByReplacingOccurrencesOfString:@"+" withString:@"%2b"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T06:19:34.103

`CFURLCreateStringByAddingPercentEscapes`已弃用（自 iOS9 起），那么仅修改 URLQueryAllowedCharacterSet 以删除保留字符如何，从而允许*相对*有效地对它们进行百分比编码？

```
- (NSString *)URLQueryValueEncodedString:(NSString *)string {
    static NSMutableCharacterSet *_allowedCharacterSet = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSString *reservedCharacters = @"=,!$&'()*+;@?\r\n\"<>#\t :/[]%";
        _allowedCharacterSet = [NSCharacterSet URLQueryAllowedCharacterSet].mutableCopy;
        [_allowedCharacterSet removeCharactersInString:reservedCharacters];
    });

    return [string stringByAddingPercentEncodingWithAllowedCharacters:_allowedCharacterSet];
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2009-04-01T13:24:34.033

在 URL 中，& 符号是一个受保护的关键字，表示包含查询字符串变量。你不能把它作为价值本身的一部分。您需要将其更改为其他内容。

这是 StackOverflow 上提出的相同问题的链接：[ASP.Net URLEncode Ampersand for use in Query String](https://stackoverflow.com/questions/561954/asp-net-urlencode-ampersand-for-use-in-query-string)

# linux - Linux 是否保证文件的内容在 close() 后刷新到磁盘？

> ID：705454
> 
> 赞同：27
> 
> 时间：2009-04-01T13:21:42.653
> 
> 标签：linux, file-io, filesystems

当使用`close()`或`fclose()`（例如）关闭文件时，Linux 是否保证将文件写回（永久）磁盘？

我的意思是，如果`close()`返回 0，然后立即断电，之前写入的数据是否可以保证持续存在，即持久？

`fsync()`系统调用确实提供了这种保证。关闭文件也足够了吗？

目前，我找不到任何可以以一种或另一种方式提出任何主张的东西。

* * *

问题2：

如果`close()`确实隐含地做一个`fsync()`，有没有办法告诉它不要做？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-04-01T13:29:05.770

从“ `man 2 close`”：

> 成功关闭并不能保证数据已成功保存到磁盘，因为内核延迟写入。

手册页说，如果你想确保你的数据在磁盘上，你必须自己使用 fsync() 。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2009-04-01T13:25:04.157

不，close 不会**执行**fsync *(2)*，如果这样做会导致许多机器死亡。许多中间文件由它们的创建者打开和关闭，然后由它们的使用者打开和关闭，然后被删除，如果*close(2)*执行自动*fsync(2)* ，这个非常常见的序列将需要触摸磁盘。相反，通常不会触及磁盘，并且磁盘永远不会知道文件在那里。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-01T17:59:08.087

同样重要的是要注意 fsync 不保证文件在磁盘上。它只是保证操作系统已要求文件系统刷新对磁盘的更改。文件系统不必向磁盘写入任何内容

来自[男人 3 fsync](http://linux.die.net/man/3/fsync)

> 如果`_POSIX_SYNCHRONIZED_IO`未定义，则该措辞在很大程度上依赖于一致性文档来告诉用户可以从系统中得到什么。明确表示允许空实现。

幸运的是，Linux 的所有常见文件系统实际上都会将更改写入磁盘。不幸的是，仍然不能保证文件在磁盘上。许多硬盘驱动器都打开了写缓冲（因此有自己的 fsync 不会刷新的缓冲区）。一些[驱动器/raid 控制器甚至对你撒谎](http://www.livejournal.com/~brad/2116715.html)说他们已经刷新了他们的缓冲区。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-01T13:44:53.860

不，fclose() 并不意味着 fsync()。许多 Linux 文件系统延迟写入并将它们批处理，这提高了整体性能，可能减少了磁盘驱动器的磨损，并提高了笔记本电脑的电池寿命。如果操作系统必须在文件关闭时写入磁盘，那么这些好处中的许多都将丢失。

Paul Tomblin 在他的回答中提到了一个争议，并且解释我所看到的不适合发表评论。这是我听到的：

最近的争议是关于 ext4 排序（ext4 是流行的 ext3 Linux 文件系统的拟议继任者）。在 Linux 和 Unix 系统中，习惯上通过读取旧文件、用不同名称写出新文件并将新文件重命名为旧文件来更改重要文件。这个想法是确保新的或旧的都在那里，即使系统在某个时候出现故障。不幸的是，ext4 似乎很乐意阅读旧的，将新的重命名为旧的，然后写入新的，如果系统在步骤 2 和 3 之间出现故障，这可能是一个真正的问题。

处理这个问题的标准方法当然是 fsync()，但这会破坏性能。真正的解决方案是修改 ext4 以保持 ext3 的顺序，在它完成写出文件之前不会重命名文件。显然这不在标准中，所以这是一个实现的质量问题，而 ext4 的 QoI 在这里真的很糟糕，如果不不断调用 fsync() 就无法可靠地编写新版本的配置文件，所有问题这会导致或冒着丢失这两个版本的风险。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-01T13:24:58.853

不，不能保证。操作系统有自己的缓存。所有关闭的真正保证是程序缓冲区被刷新到操作系统，但操作系统可能仍然保留它未写入。我相信 Linux 内核世界中存在一些争议，因为即使 fsync 也不能保证它被刷新到磁盘，至少在 ext3 中是这样。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-03-08T08:39:18.217

**打开**的联机帮助页说：

> 为了保证同步 I/O ，除了**O_DIRECT**之外，还必须使用**O_SYNC**。

 **然后

> 通常，这 (O_DIRECT) 会降低性能。

可以使用带有**F_SETFL的****fcntl**切换此标志，以便在之后的每次读取和写入*时最小化 I/O 的缓存影响。*

 **** * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-07T13:36:43.573

您可能还对firebird sql 数据库中关于 fcntl( O_SYNC ) 无法在 linux 上运行的[错误报告感兴趣。](http://tracker.firebirdsql.org/browse/CORE-1476)

此外，您提出的问题暗示了一个潜在的问题。写入磁盘是什么意思？为什么这有关系？您是否担心电源熄灭并且驱动器中缺少文件？为什么不在系统或 SAN 上使用 UPS？

在这种情况下，您需要一个日志文件系统——而不仅仅是一个元数据日志文件系统，而是一个完整的日志，即使是所有数据。

即使在这种情况下，您也必须了解，除了操作系统的参与之外，[大多数硬盘都会对您撒谎以进行 fsync。](http://hardware.slashdot.org/article.pl?sid=05/05/13/0529252)- fsync 只是将数据发送到驱动器，由各个操作系统决定如何等待驱动器刷新自己的缓存。

--杰夫克++

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-01T13:25:19.337

我不认为 Linux 可以保证这一点，因为驱动器本身也可以缓存数据。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-12-06T20:48:45.363

如果计算机/操作系统有一个容错文件系统，我们就不必关心这一点，该系统可以保证写入至少在我们施加此约束的文件上能在电源循环中幸存下来的东西。如果有一些非易失性 RAM 或等效物，则不必是磁盘。我依稀记得一些过去时代的大型机确实有这样的机制，并且据说确实做出了这样的保证。

# c++ - OO 设计 - 传播属性

> ID：705459
> 
> 赞同：2
> 
> 时间：2009-04-01T13:24:06.797
> 
> 标签：c++, oop

我是一名经验丰富的 C 程序员，涉足 OO 设计（特别是 C++）。我有一段我讨厌的特定代码，想用 C++ 清理。

该代码实现了一个在 3d 图形应用程序中使用的显示树。它是条目的链接列表，其中有一个类型字段，指定条目是窗口、几何特征还是灯光等。特别是几何特征可以是子特征集合的单个几何，由存在一个单独的结构。

作为一个链表，它是一个平面结构，但顺序意味着层次结构。此外，每个条目都有一个属性结构，可以在列表中向下传播。

一个单独的函数允许遍历此列表，并在遍历列表时执行提供的函数指针。以这种方式使用的每个函数都必须适当注意维护属性结构，因为它在列表中传播，这是呈现错误的常见原因（通常没有意识到它们应该被重绘，因为它们是一组条目的一部分，例如）

虽然 OO 设计的某些方面让我眼前一亮，但我很想听听：

1.  我将如何最好地实现能够将函数指针向下传递到列表（或向量 - STL 向量对于这样的列表是否可以？）

2.  我是否将窗口和几何特征实现为相关（甚至相同）类是正确的

3.  如何最好地设计一个可以拥有自己集合的类

4.  关于对象之间属性传递的任何建议（例如颜色、比例）。期望的行为是修改特征将改变该特征及其包含的任何子特征的属性，并且修改子特征只会修改该特征。

我意识到这是一个漫长而广泛的问题，因此感谢您对上述任何问题的想法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:29:34.460

1）使用[boost::function](http://www.boost.org/doc/libs/1_38_0/doc/html/function/tutorial.html)和 stl 算法，如`for_each count_if`
2）从视图中划分模型。一切都会安好的。
3) [GoF 设计模式组合](http://www.vincehuston.org/dp/composite.html)
4) 要实现对更改的反应，请查看[GoF 设计模式观察者](http://www.vincehuston.org/dp/observer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T13:42:33.180

1.  您可以拥有函数指针，但通常在 OO 中每个对象都应该知道如何处理其数据，并且特殊 c(l)as(s)es 存在多态性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T14:11:51.893

## 你的观点

1：*我将如何最好地实现能够将函数指针向下传递到列表（或向量 - STL 向量对于这样的列表可以吗？）*

不。改用一个接口（或多个接口）。使用所有类都可以实现的“draw”方法创建一个“Renderable”接口。您需要多个接口，或具有不同名称和方法集的接口。

2：*将窗口和几何特征实现为相关（甚至相同）类是否正确*

我不确定您的“几何特征”到底是什么，但这可能是子类化的情况。创建一个“显示”类，它可以由您的各种几何要素类和窗口类进行子类化。另一方面，您可能将模型和视图混为一谈（请参阅[MVC](http://en.wikipedia.org/wiki/Model-view-controller)）。

3：*如何最好地设计一个可以拥有自己集合的类*

可能您希望集合是上面提到的超类“显示”（或您为超类选择的任何内容），甚至可能是一个接口。这在 GUI 框架中经常发生。

4：*关于对象之间属性传递的任何建议（例如颜色、比例）。期望的行为是修改特征将改变该特征及其包含的任何子特征的属性，并且修改子特征只会修改该特征*

这个功能听起来应该是 Renderer 类的一部分。此类将遍历您的链表（或树）并在每个类上调用上述“绘制”方法。它还可以做一些事情，比如从定义了给定属性的最后一个祖先缓存属性。这应该允许您描述的那种属性或功能覆盖。

## 一般来说

虽然不直接适用，但检查现有的 OO GUI 系统可能对您有指导意义。[Java](http://www.eclipse.org/swt/)和[.NET](http://msdn.microsoft.com/en-us/library/ms754130.aspx)都有几个。

# sql-server - Visual Studio 2008 数据库插件

> ID：705460
> 
> 赞同：0
> 
> 时间：2009-04-01T13:24:21.633
> 
> 标签：sql-server, visual-studio-2008, add-on

我目前正在尝试使用 Visual Studio 来访问 sql server 数据库，而不是使用 SQL Server Management Studio。

令人惊讶的是，设置和使用数据库连接是多么容易，而且目前它对我的工作效率产生了积极影响。

我的问题是：是否有一个插件（或我能做的）来启用 SQL 查询的智能感知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:25:52.533

Red Gate SQL Prompt 集成到 VS 2008 中，但是要花钱...

编辑：[是否有免费的 SQL Server Mgmt Studio 自动完成插件？](https://stackoverflow.com/questions/414404/are-there-free-sql-server-mgmt-studio-autocomplete-add-ins) 这可能在VS中不起作用......

# https - SSL错误的解决方法

> ID：705463
> 
> 赞同：4
> 
> 时间：2009-04-01T13:24:43.753
> 
> 标签：https, openssl, ssl

我正在连接的 https 服务器的 SSL 实现似乎存在错误；问题最初出现在我的应用程序中，但我一直在使用 openssl 命令行实用程序调试/复制它，所以我相当肯定它与我的应用程序无关。

如果我连接到远程服务器时没有其他选项`-connect`，OpenSSL 会发送 SSLv2 CLIENT-HELLO，服务器会以 TLSv1 ServerHello 响应，一切正常。

如果我用 连接`-ssl3`，OpenSSL 发送一个 SSLv3 ClientHello，服务器用 SSLv3 ServerHello 响应，一切都很好。

但是，如果我使用`-no_ssl2`or连接`-tls1`，OpenSSL 会发送一个 TLSv1 ClientHello，并且服务器会使用 响应`"TLS 1.0 Alert [length 0002], fatal unexpected_message"`，这是我在应用程序中看到的原始问题。

在这一点上，有许多可能的解决方法，但我理想情况下是在寻找通用的东西，而不是对这个特定的服务器进行特殊处理，所以我希望有某种“标准”的解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-02T15:19:36.333

看来问题实际上是由 RFC 5077 会话票据扩展引起的；禁用此功能（`-no_ticket`例如，通过传递给 openssl）允许 TLSv1 ClientHello 成功使用远程服务器。由于我的应用程序中没有特别需要此扩展，因此此解决方法似乎是最合适的方法。

一项小研究表明问题可能只是*空*会话票扩展，但我并没有费心去弄清楚这个特定服务器是否存在非空的问题。

# .net - 如何将动态构建类型的实例返回给需要接口的 WCF 服务？

> ID：705470
> 
> 赞同：1
> 
> 时间：2009-04-01T13:25:26.887
> 
> 标签：.net, wcf

我想要一个返回接口的操作合同。

我的问题：

1）我想向服务动态注册将返回的已知类型，或者让 WCF 接受该类型。我注意到，除非它是由属性标记的已知类型或在服务的静态方法中，否则该方法将失败。

2）我希望在客户端，能够从消息构造接口的动态实现者。

我不想乱发消息。我只想隐藏实现细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:31:19.917

我遇到了同样的情况：我认为你**有**，按照设计，使用 [KnownType] 属性，以便序列化程序知道要等待哪个实现。

关键点是序列化程序接收到的一些字节只有很少的关于如何读取它们的元数据（主要是类型的名称）。这就是为什么它需要知道这些字节应该代表哪种类型，并“知道”这种类型。 *如果没有这些信息，序列化程序绝对无法确定在哪里可以找到实现接口功能的少数字段。*

但是，您可以在运行时（即动态）直接使用 DataContractSerializer 添加新的 KnownTypes

大量关于该主题的信息[here](http://blogs.msdn.com/sowmy/archive/2006/06/06/all-about-knowntypes.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T18:54:06.020

您可以通过使用 KnownTypeAttribute 的特定重载来实现返回 DataContract 的已知类型的方法，并为其提供将已知类型作为数组返回的方法的名称。该方法可以返回仅在运行时才知道的类型：

```
[DataContract]
[KnownType("GetKnownTypes")]
public class MyDataContract
{
   public int X { get; set; }

   public static Type[] GetKnownTypes()
   {
      return new Type[] { typeof(Class1), typeof(Class2) }; 
   }
} 
```

# javascript - jQuery/javascript 对象传递

> ID：705473
> 
> 赞同：3
> 
> 时间：2009-04-01T13:26:39.567
> 
> 标签：javascript, jquery

到目前为止，我还没有在 javascript 方面做太多事情。我最近开始使用 jQuery，并遇到了一个关于如何在表单上[进行就地编辑的教程。](http://docs.jquery.com/Tutorials:Edit_in_Place_with_Ajax)

如果您在函数中对容器 div 的 id 进行硬编码，则生成的代码可以完美运行，但我在将其泛化为传递给函数的 id 时遇到问题。

代码是这样开始的：

```
$(document).ready(function() {
    setClickable($('#editInPlace'));
});

function setClickable(target)
{
    $(target).click
    (
        function()
        {
            //Do some dom manipulation

            $('.buttonA').click(function() { saveChanges(this, false); });
            $('.buttonB').click(function() { saveChanges(this, true); });
        }
    )

    .mouseover(function() { $(this).addClass("editable"); })
    .mouseout(function() { $(this).removeClass("editable"); });
}; //end of function setClickable

function saveChanges(obj, cancel)
{
    //Handle the save changes code

    //Reset the div
    $(obj).parent().after('<div id="editInPlace">' + t + '</div>').remove();

    //Call setClickable
    setClickable($('#editInPlace'));
} 
```

我遇到问题的部分是对函数`setClickable`内部的最后一次调用。`saveChanges`如果我对 的值进行硬编码`$('#editInPlace')`，它可以正常工作。但是，如果我将函数签名更改为

```
function saveChanges(target, obj, cancel) 
```

并从 setClickable 方法传入目标对象：

```
$('.buttonB').click(function() { saveChanges(target, this, true); }); 
```

打电话

```
setClickable(target); 
```

似乎不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T13:28:58.547

改变：

```
function setClickable(target)
{
    $(target).click
    ( 
```

到：

```
function setClickable(target)
{
    target.click
    ( 
```

您传入一个包装集（也称为 jQuery 对象），然后将其包装在另一个包装集中。以上解决了这个问题。另一种方法是：

```
$(document).ready(function() {
    setClickable('editInPlace');
});

function setClickable(id)
{
    $("#" + id).click
    ( 
```

你明白我在说什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:30:23.413

您可以随时尝试使用 setClickable($(target)); 确保你有一个 jQuery 对象。

# sharepoint - 有人知道 manifest.xml (wsp) 是否具有 Visual Studio 的智能感知功能吗？

> ID：705475
> 
> 赞同：3
> 
> 时间：2009-04-01T13:26:47.913
> 
> 标签：sharepoint, sharepoint-2007, intellisense, wsp

在 SharePoint 解决方案 (wsp) 中编辑“ *manifest.xml* ”文件但没有结果时，我一直在 Visual Studio 2005 或 Visual Studio 2008 中搜索智能感知。有谁知道是否有类似于 CAML 智能感知但用于“ *manifest.xml* ”文件的东西？？？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:36:03.850

您可以通过添加对 c:\Program Files\Common Files\Microsoft Shared\web server extensions\12\Template\Xml 中包含的 wss.xsd、coredefinitions.xsd、CamlQuery.xsd 和 camlview.xsd 的架构引用来确保智能感知

为此，在 VS.NET 中打开清单文件后，转到“属性”窗口，然后在“模式”属性中单击浏览按钮并加载这些模式。

如果您搜索 Google（我认为 Andrew Connell 有一个示例），那么也有一些方法可以强制每个 xml 文件都发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:32:07.870

Visual Studio 中 XML 中的 Intellisense 取决于文件夹中是否存在 XML 架构文件：

C:\Program Files\Microsoft Visual Studio 9.0\Xml\Schemas

（或您正在使用的版本的等效版本）。因此，如果您可以找到这些文件的 XML 架构，则可以启用 Intellisense。

您需要的文件是 DeploymentManifest.xsd，如下所述：

[http://msdn.microsoft.com/en-us/library/bb263776.aspx](http://msdn.microsoft.com/en-us/library/bb263776.aspx)

# css - 强制移动网站的数字输入

> ID：705481
> 
> 赞同：3
> 
> 时间：2009-04-01T13:28:51.263
> 
> 标签：css, mobile-website

我一直在使用'-wap-input-format' CSS 属性来强制使用“*N”进行数字输入。307 这适用于我的 SonyEricsson C702，但在 Windows Mobile IE、带有 Opera 的 Windows Mobile 或 SonyEricsson P1i 上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2010-04-01T00:11:49.670

You don't need javascript on Opera or iphone and probably not android either. Just use the "number" input type, from HTML5\. It'll fall back to a text input on browsers that don't support it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-29T14:16:25.443

我的建议也是添加一些 Javascript。Mobile Opera 以及 iPhone、Minimo (mini-mozilla) 等都可以理解 Javascript，至少在一定程度上。

```
function noNumbers(e) {
    var keynum;
    var keychar;
    var numcheck;    
    if(window.event) // IE
    {
        keynum = e.keyCode;
    }
    else if(e.which) // Netscape/Firefox/Opera
    {
        keynum = e.which;
    }

    if((keynum >= 48) && (keynum <= 57)) {
        return(true);
    }

    var good_codes = [8, 14, 15, 37, 38, 39, 40];
    for(i = 0; i < good_codes.length; i++) {
        if(good_codes[i] == keynum) {
            return(true);
        }
    }

    return(false);
} 
```

希望这可以帮助！**:)**

[metafilter.com](http://ask.metafilter.com/86258/Can-I-force-numeric-input-on-a-mobile-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-12T12:27:24.603

您正在谈论的格式是[WCSS](http://www.developershome.com/wap/wcss/) (WAP CSS) 属性，因此并没有得到广泛支持——尤其是在现代移动设备中。

-wap [-input-format](http://www.developershome.com/wap/wcss/wcss_tutorial.asp?page=inputExtension2)在任何情况下都不能很好地工作。例如，让用户用小数（“2.50”）填写数字输入几乎是不可能的（[最接近的解决方案：-wap-input-format: "*n"](http://www.suodatin.com/fathom/2009/05/04/NumericInputOnNokiaBrowsers)）。

然而，虽然不能依赖该属性进行验证（这仍然需要在服务器端，无论如何，正如 Darasd 所说），它可以通过自动将移动设备的输入切换为数字来帮助用户。

据说通过将“zip”或“phone”添加到输入字段的名称（例如“myfield_zip”），对于 iPhone来说[也是可能的。](http://dotnetslackers.com/articles/aspnet/DevelopingForTheiPhone.aspx)是的，我知道，这很笨拙。

我仍然会使用这两种技巧，因为它触发了很好的启示（如果你愿意，除了它们之外，你还可以使用 Javascript）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T17:38:55.333

```
<input type='tel' /> 
```

will bring up a numeric keypad on Android and iPhone default browsers and Chrome for Android. It does not work on Windows Phone 7.5, but should on Windows Phone 8 since WP8's browser is based on IE9.

Using

```
<input type='number' /> 
```

will do this too, but will automatically remove leading zeros.

# compiler-construction - 有编译器开发论坛吗？

> ID：705487
> 
> 赞同：3
> 
> 时间：2009-04-01T13:29:39.763
> 
> 标签：compiler-construction

我有兴趣加入已经建立的编译器或解释器开发项目，但到目前为止我还没有找到任何有用的资源。我正在寻找具有小型开发团队并且工作量很大的东西（即不进行错误修复）。SourceForge 当然有很多项目，但肯定需要一段时间才能找到哪些项目仍然活跃并且可能仍然适合。所以这就是为什么我在考虑可能有一些东西的论坛。我在谷歌上搜索但并没有真正找到任何东西。

提前感谢任何人的投入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T13:31:43.893

尝试使用网。编译器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:29:40.070

[我们在c--](http://www.cminusminus.org/)项目上需要大量帮助。有很多事情要做，你实际上可以写自己的票：你对前端、代码生成器、优化、垃圾收集器或运行时系统感兴趣吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-09-24T03:55:10.527

[GitHub 上](https://github.com/search?q=compiler&type=Everything&repo=&langOverride=&start_value=1)有很多编译器项目。

# google-app-engine - Google App Engine 数据库不一致

> ID：705490
> 
> 赞同：1
> 
> 时间：2009-04-01T13:30:17.297
> 
> 标签：google-app-engine, twitter

我在 Google App Engine 中编写一个 twitter 应用程序。它接受命令作为直接消息，因此我设置了第三方 cronjob 服务来调用定期处理 DM 的处理程序。我有一个只有一个条目的模型“信息”，它存储了一些在应用程序中的许多地方使用的通用数据（在这种情况下，是最近处理消息的时间）。我的处理程序的一般模式是这样的：

```
class Info(db.Model):
    msg_polled = db.DateTimeProperty(auto_now_add = True)
    .... More Properties ....

    @classmethod
    def get_info(cls):
        info = cls.all().get()
        if not info:
            info = cls()
            info.put()
        return info
---------------------------------------------------------
info = Info.get_info()
msgs = api.GetDirectMessages(since = info.msg_polled)
if not msgs:
    return
logging.info('Processing Messages since %s ' % str(info.msg_polled))
for msg in msgs:

    ...process commands...

    logging.info('Processed Message :- @%s : %s' % (msg.sender_screen_name, msg.text))

info.msg_polled = datetime.datetime.now()
info.put() 
```

但有时我会得到这样的日志：

```
I 03-30 07:50AM 10.973
Processing Messages since Sun, 29 Mar 2009 11:41:59 GMT 
I 03-30 07:50AM 11.122
Processed Message :- @foo : Foo_Bar
-------------------------------------------------------
I 03-30 07:46AM 08.014
Processing Messages since Sun, 29 Mar 2009 11:41:59 GMT 
I 03-30 07:46AM 08.130
Processed Message :- @foo : Foo_Bar 
```

在这里，似乎信息没有被提交到数据库。消息被多次处理，有时在 msg_polled 值更改之前多达 10 次以上。但我没有收到任何数据存储异常。这种情况只偶尔发生一次。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T13:50:10.697

Google AppEngine 数据存储在幕后使用 BigTable，这是一个分布式数据库系统。因此，更新可能不会立即可见，因为新数据尚未到达每个分布式表（亚马逊在其 SimpleDB 中称其为“最终一致性”）。几分钟后你应该就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-30T13:56:42.263

这是有关 GAE 数据存储中一致性的良好文档：

[https://cloud.google.com/developers/articles/balancing-strong-and-eventual-consistency-with-google-cloud-datastore](https://cloud.google.com/developers/articles/balancing-strong-and-eventual-consistency-with-google-cloud-datastore)

**结论：**

最终一致性是非关系数据库的基本要素，它允许开发人员在可伸缩性、性能和一致性之间找到最佳平衡。重要的是要了解如何处理最终一致性和强一致性之间的平衡，以便为您的应用程序设计最佳数据模型。在 Google Cloud Datastore 中，使用实体组和祖先查询是保证实体范围内高度一致性的最佳方式。如果您的应用程序由于前面描述的限制而无法合并实体组，您可以考虑使用其他选项，例如使用仅键查询或 Memcache。对于大型应用程序，应用最佳实践，例如使用分散的 ID 和减少索引以减少一致性所需的时间。

# asp.net - 如何为我的应用程序制作搜索引擎

> ID：705497
> 
> 赞同：0
> 
> 时间：2009-04-01T13:32:21.957
> 
> 标签：asp.net, sql, search-engine

**副本：**

> [什么是嵌入网站的好搜索引擎。](https://stackoverflow.com/questions/146388/what-is-a-good-search-engine-for-embedding-in-a-web-site)

我主要使用 ms sql 后端在 asp.net 中构建应用程序。有没有人有一个制作好的搜索引擎的虚拟指南？我被告知不要喜欢我的存储过程中的语句。如果我不使用 like，如何在包含文本的所有列中搜索术语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:36:17.500

我想说制作一个好的搜索引擎的最好方法是......不这样做。

使用[Lucene.net](http://incubator.apache.org/lucene.net/)或任何其他开箱即用的搜索引擎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T03:00:49.570

Another vote for "let someone else do your work".

You could give [Google custom search](http://www.google.com/coop/cse/) a try. Has worked well when I've used it and you might make some money off the advertising.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:35:47.907

不要做一个。查看[Lucene.Net](http://incubator.apache.org/lucene.net/)或类似的搜索引擎。

# c++ - 如何将 .cpp 源文件编译成 .dll？

> ID：705501
> 
> 赞同：4
> 
> 时间：2009-04-01T13:34:18.863
> 
> 标签：c++, dll

如何将 .cpp 源文件编译成 .dll？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-03T12:31:01.320

**编译dll**需要执行**两个**步骤：

 ***   将源文件编译为目标文件
*   将您的目标文件链接到动态链接库 (DLL)

这是一个使用 gcc 的示例：

1.  `gcc -c source.cpp //compile sources; will output "source.o"`

2.  `gcc -shared -o mydll.dll source.o //add -shared to create a dll, will output "mydll.dll"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:44:12.660

dll文件是一个库文件，它由许多目标文件组成。这意味着您需要编译您的 .cpp 文件，然后将它与您需要的任何其他文件合并到 .dll 中。

这是我通过快速谷歌找到的教程：http: [//www.icynorth.com/development/createdlltutorial.html](http://www.icynorth.com/development/createdlltutorial.html)

**编辑** 上述链接的修复，因为它现在已经死了 [https://web.archive.org/web/20130924001807/http://icynorth.com/development/createdlltutorial.html](https://web.archive.org/web/20130924001807/http://icynorth.com/development/createdlltutorial.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-01T13:37:38.870

您必须将 cpp 文件编译成 .obj 文件，然后链接它们以生成 .dll。

# c++ - 为什么微软的 C 编译器要函数开头的变量？

> ID：705502
> 
> 赞同：8
> 
> 时间：2009-04-01T13:34:36.617
> 
> 标签：c++, c

我目前正在编写 C（不是 C++）。微软的 C 编译器似乎要求在函数之上声明所有变量。

例如，以下代码将不会通过编译：

```
int foo(int x) {
    assert(x != 0);
    int y = 2 * x;
    return y;
} 
```

编译器在第三行报错，说

```
error C2143: syntax error : missing ';' before 'type' 
```

如果将代码更改为如下所示，它将通过编译：

```
int foo(int x) {
    int y;
    assert(x != 0);
    y = 2 * x;
    return y;
} 
```

如果我将源文件名从`.c`更改为`.cpp`，编译也将通过。

我怀疑有一个选项可以关闭编译器的严格性，但我还没有找到它。有人可以帮忙吗？

提前致谢。

我正在使用 Visual Studio 2008 SP1 附带的 cl.exe。

添加：

谢谢大家的回答！看来我必须与 Microsoft 的 cl.exe 一起生活在 C89 中。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-04-01T13:37:47.607

看起来它使用的是 C89 标准，它要求在任何代码之前声明所有变量。您可以使用文字等初始化它们，但不能混合使用代码和变量。

应该有一个编译器标志可以在某处启用 C99，这将使您获得您习惯的行为。

**编辑：**快速谷歌搜索似乎不太希望启用 C99。您可能不得不使用 C89（还不错）或找到更好的 C 编译器（会更好）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-01T13:40:24.963

Microsoft C 编译器是 C89 编译器，并且不再升级，标准 C99 不是 afaik 计划的。对于 C99 中的普通 C（变量不在块的开头），请使用另一个编译器或 C++ 扩展。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T14:12:15.183

正如其他人所说，这只是MSC支持的C版本。但是，如果您准备冒犯纯粹主义者，您可以强制编译器编译为 C++。

这对纯 C 几乎没有什么影响（有一些关于强制转换 void* 指针和名称修饰更改的规则），但可能会给你一个有用的混合。生成的代码将大致相同 - 进行此更改不会导致效率的神奇损失（或增益）。

你没有说你为什么热衷于使用 C。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T13:39:24.187

我不知道 C99，但对于早期版本的语言，局部变量必须在 { } 块的开头声明。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T13:37:59.167

您必须基于此错误使用的 C89 标准要求在开始执行任何块中的语句之前声明变量。

.cpp 扩展文件不会有这个问题，因为编译器会将这些文件视为 C++ 文件，它没有相同的限制。

您的断言语句是代码，因此您不能在此之后声明变量（在同一块/范围内）。

从技术上讲，您可以这样做：

```
int foo(int x) {
    assert(x != 0);
    {
        int y = 2 * x;
        return y;
    }
} 
```

但我不建议这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-01T13:39:32.313

在[C90](http://en.wikipedia.org/wiki/C90_(C_version)#ANSI_C_and_ISO_C)中，所有变量都必须在第一条语句之前声明。[在C99](http://en.wikipedia.org/wiki/C99)中情况并非如此。我想你可以看看编译器是否有 C99 的开关。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-01T13:40:06.853

它使翻译成汇编变得更容易。当您进入函数时，所有变量都被压入堆栈，因此您不必担心在其他任何地方进行操作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-01T13:42:04.367

同意关于 C 规范的评论。请记住，C 是在计算机没有大量内存的时候创建的。

解决这个问题的一种方法是确保可以从上到下一次读取源文件（这也是使用 .h 文件的原因 -> 它们告诉代码某些函数确实存在，但可能在第一次引用它们之后的某个地方）。

为在作用域顶部声明变量的代码创建编译器可能比为可以在任何地方声明变量的代码创建编译器更容易。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-01T17:04:33.583

遗憾的是，MS 没有实现混合声明和语句作为 C 编译器的扩展（即使它默认关闭并且需要打开）。我不确定，但我认为这是其他非 C99 C 编译器中非常常见的扩展；似乎我经常需要修复源代码和示例才能在 MSVC 中编译。

我认为这将相对容易实现，因为他们当然已经为 C++ 做到了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-01T13:39:46.353

C 规范要求在第一行可执行代码之前声明所有变量。编译器遵守规范。一些编译器在这方面是宽松的。

# sql-server - 在 SQL 2005 中删除集群主键时会发生什么

> ID：705504
> 
> 赞同：4
> 
> 时间：2009-04-01T13:35:37.893
> 
> 标签：sql-server, sql-server-2005, primary-key, constraints

我有一个 PK 约束——两列上的聚集索引——我正在删除它。一个小时后该命令仍在运行。我会认为，因为我只是删除一个约束，所以操作几乎是瞬时的。当我放弃 PK 时，有人可以向我解释一下引擎盖下到底发生了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-01T13:49:43.520

聚集索引不仅仅是“一个约束”，它是一种存储方法。

当您删除它时，您的数据将从集群存储重新排序到堆存储

其他索引正在更新以引用`RID`'s 而不是`PRIMARY KEY`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:37:24.533

聚集索引*是*数据，它可以解释运行所需的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T13:53:26.117

“CLUSTERED”索引将**物理上按顺序**在硬盘上写入表的记录。因此，删除或更改该索引可能会导致 SQL Server 基本上“碎片整理”（重新排序）您的硬盘驱动器（嗯，至少是该表的数据所在的部分）。

请注意，这个答案并不完全是技术性的......但它的目的是给你一个“哦，这就是正在发生的事情”的答案，这通常已经足够好了。

# silverlight - Silverlight 3 - 带有 RIA 验证的数据表单错误摘要

> ID：705510
> 
> 赞同：0
> 
> 时间：2009-04-01T13:36:23.570
> 
> 标签：silverlight, silverlight-3.0

我得到了一个部分使用 RIA 服务的数据表单（我可以获取和编辑数据）。

问题是我向我的 RIA 服务字段添加了验证。例如：来自我的 metadata.cs 文件

[StringLength ( 50, ErrorMessage= "bad data dude!" , MinimumLength=4)] 公共字符串标题；

在数据表单中，当用户输入违反上述规则的数据时，会抛出异常“bad data dude！” 这还不错。问题是我希望数据表单在错误摘要中显示此消息？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-05T07:26:38.550

Visual Studio 中断是因为它看到一个它认为未处理的错误。如果您只是继续该程序，则会处理错误并且失败的验证将按预期显示。

您可以使用 VS 中的 Debug/Exceptions 对话框告诉 VS 不要在用户未处理的 ValidationException 上停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-13T17:44:10.860

希望他们会在 Debug->Exceptions 中添加 System.ComponentModel.DataAnnotations.ValidationException 作为选项。现在看起来你必须在更多的根级别上做它[http://blog.jeffhandley.com/archive/2009/04/01/184.aspx](http://blog.jeffhandley.com/archive/2009/04/01/184.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T17:07:17.137

仅供参考：另外，刚刚发现这只发生在使用 Visual Studio 调试时。

如果我在不调试的情况下运行（Ctrl + F5），我可以让一切正常工作

是否存在更好的解决方案？

# javascript - Safari 4 Beta 和 Chrome 2 中的错误

> ID：705514
> 
> 赞同：1
> 
> 时间：2009-04-01T13:37:40.557
> 
> 标签：javascript

我有通过单击按钮打开的弹出窗口。如果用户在子窗口中搜索特定项目，我会尝试通过在子窗口中使用 window.opener.location 来切换父窗口位置。父窗口将始终位于同一网站内。这在 FireFox 3.07 & 3.1 b3 和 IE 7&8 中运行良好。但在 Chrome 2.0b（开发分支）和 Safari 4 Beta（适用于 Windows）中，我收到了这个奇怪的错误：

> 不安全的 JavaScript 尝试为带有 URL 的框架启动导航更改

这是奇怪的事情，在 Safari 中它永远不会工作，但在 Chrome 中它可以工作，如果：

> *子窗口与我正在使用的文本使用相同的协议（HTTP/HTTPS）设置 window.opener.location
> *父窗口和子窗口是相同的协议（HTTP/HTTPS）

编辑：在 Opera 中，它仅在父窗口和子窗口都是 HTTPS 时才有效...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:48:22.603

向父窗口返回一个值，然后将其重定向到正确的位置会更好吗？这对我来说似乎更干净。

```
searchterm = window.open(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T14:23:50.403

这似乎是 webkit 和 opera impliment 以及 IE 和 FF 忽略的跨站点脚本安全限制。

# mysql - MySQL中的集合可以为0吗？

> ID：705519
> 
> 赞同：2
> 
> 时间：2009-04-01T13:38:47.930
> 
> 标签：mysql

MySQL中的[集合可以为0吗？](http://dev.mysql.com/doc/refman/5.1/en/set.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:43:17.517

当然，为什么不呢？

```
CREATE TABLE t_set (id INT NOT NULL PRIMARY KEY, value SET('one', 'two'));

INSERT
INTO    t_set
VALUES  (1, 1);

SELECT  *
FROM    t_set;

id    value
----  ------
   1  one

UPDATE  t_set
SET     value = 0;

SELECT  *
FROM    t_set;

id    value
----  ------
   1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:45:17.697

> SET 是一个字符串对象，可以有零个或多个值，每个值都必须从创建表时指定的允许值列表中选择。由多个集合成员组成的 SET 列值使用逗号 (“,”) 分隔的成员指定。这样做的结果是 SET 成员值本身不应包含逗号。
> 
> 例如，指定为 SET('one', 'two') NOT NULL 的列可以具有以下任何值：
> 
> '''一''二''一，二'

[http://dev.mysql.com/doc/refman/5.1/en/set.html](http://dev.mysql.com/doc/refman/5.1/en/set.html)

# sql-server-2005 - SQL 报告：矩阵列合并

> ID：705525
> 
> 赞同：0
> 
> 时间：2009-04-01T13:39:52.827
> 
> 标签：sql-server-2005, reporting-services, matrix

嗨，我有数据被返回，我把它放在一个矩阵中。我设置了行和列。我只有一列标题为“GTA”和几行。由于某种原因，我的数据会像这样出现。

```
 GTA  GTA  GTA
Answer  
========================
1          1            
1               2       
1          1            
1               2       
1               2       
1               2       
1          1            
1                    3 
```

每当值不同时，它就会动态地为它创建一个新列，并且上述内容..为什么？有没有我可以让它看起来像这样：

```
 GTA
Answer  
==============
1          1            
1          2            
1          1            
1          2            
1          2            
1          2            
1          1            
1          3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T13:52:11.283

您想使用表格模板。矩阵用于交叉表或数据透视表样式报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-02T11:38:23.547

将 Matrix 控件视为“设计时数据透视表”。

如果您不知道数据透视表是什么或做什么，那么您不应该使用矩阵控件。

矩阵中的每一列代表一组数据。

使用表格，您只对行进行分组，使用矩阵，您对行和列进行分组。

# security - 将javascript插入URL的方法？

> ID：705533
> 
> 赞同：13
> 
> 时间：2009-04-01T13:41:11.170
> 
> 标签：security, url

**副本：**

> [我应该了解哪些常见的网络漏洞？](https://stackoverflow.com/questions/23102/what-common-web-exploits-should-i-know-about)

这是一个安全问题。

我应该在防止黑客入侵的 URL 中寻找什么？

有没有办法通过在 URL 中传递 javascript 来执行它？

正如你所看到的，我对这个概念很陌生。

这东西有什么好的帖子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:47:20.293

只需将其放入 URL 地址即可针对当前页面执行 Javascript，例如

```
javascript:;alert(window.document.body.innerHTML);
javascript:;alert(window.document.body.childNodes[0].innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-10T16:28:45.180

JavaScript 注入不会攻击您的 Web 应用程序。JavaScript 注入只是添加 JavaScript 代码供浏览器执行。JavaScript 可能损害您的 Web 应用程序的唯一方法是，如果您有博客帖子或存储用户输入的其他区域。这可能是一个问题，因为攻击者可以注入他们的代码并将其留给其他用户执行。这种攻击称为跨站点脚本。最糟糕的情况是跨站点伪造，它允许攻击者注入一个语句，该语句将窃取用户的 cookie 并因此向攻击者提供他们的会话 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T17:09:32.960

我偶然发现的老问题，我认为值得更新...您实际上可以从 URL 执行 javascript，并且您也可以对此进行创作。我最近创建了一个会员专用区域，我想提醒某人他们的密码是什么，所以我正在寻找一个非本地警报......当然，您可以将警报嵌入页面本身，然后将其公开。这里的不同之处在于我可以创建一个链接并将一些 JS 放入 href 中，因此单击该链接将生成警报。

这就是我的意思>>

```
<a href="javascript:alert('the secret is to ask.');window.location.replace('http://google.com');">You can have anything</a> 
```

因此，单击链接后，用户会收到包含信息的警报，然后将他们带到新页面。

显然你也可以写一个 onClick，但是当你通过 URL 时，href 工作得很好，只要记住在它前面加上“javascript:”

*在 chrome 中工作，没有检查任何其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T13:49:01.947

这取决于您的应用程序及其对您所需安全级别的使用。

在安全性方面，您应该验证从查询字符串或 post 参数中获得的所有值，以确保它们有效。

您可能还希望为其他人添加日志记录，包括对网络日志的分析，以便您可以确定是否正在尝试入侵您的系统。

我不相信将 javascript 注入 URL 并运行它是可能的，除非您的应用程序使用参数而不首先验证它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T13:54:51.823

关键是检查您收到的任何信息，然后在服务器上的代码中显示和/或使用。获取/发布表单变量，如果它们包含您存储的 javascript 并稍后重新显示，则存在安全风险。就像任何未经检查就连接到您运行的 sql 语句中的东西一样。

需要注意的一个潜在问题是与字符编码混淆的攻击。例如，如果我提交了一个带有 utf-8 字符集的表单，但你存储并稍后以 iso-8859-1 拉丁文显示，没有翻译，那么我可能会偷偷通过你的验证器。处理此问题的最简单方法是始终以相同的字符集显示和存储。utf-8 通常是一个不错的选择。在这种情况下，永远不要依赖浏览器为您做正确的事情。设置显式字符集并检查您收到的字符集，并在验证之前将其转换为预期的存储集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T14:38:16.790

URL 中的 Javascript 不会自行执行。这绝不意味着它是安全的或值得信赖的。

URL 是另一个不可信的用户输入，GET 或 POST（或任何其他方法）可能会导致严重漏洞的分配。

一个常见的例子是/是使用`PHP_SELF`、`REQUEST_URI`和`SCRIPT_NAME`类似的变量。开发人员会错误地将它们直接回显到浏览器，从而导致脚本被注入页面并执行。

我建议你开始大量阅读，这些是一些不错的起点：

[OWASP](http://www.owasp.org)

[XSS 备忘单](http://ha.ckers.org/xss.html)

[XSS 预防备忘单](http://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)

还可以搜索 XSS（跨站点脚本）、XSRF（跨站点请求伪造）和 SQL 注入。这将使您开始，但是要吸收大量信息，因此请花点时间。从长远来看，这将是值得的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T14:46:44.070

如果链接有javascript:，那么它将运行javascript，否则，我同意这里的其他人，没有办法做到这一点。

SO很聪明，可以过滤掉它！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-14T23:47:45.453

我相信正确的答案是“视情况而定”。

正如其他人指出的那样，如果正在处理您的请求的 Web 应用程序天真地接收并回显接收到的有效负载或 URL 参数（对于 GET 请求），那么它可能会受到代码注入的影响。

但是，如果 Web 应用程序清理和/或过滤有效负载/参数，则应该不是问题。

它还取决于用户代理（例如浏览器），如果定制的用户代理在请求中检测到任何内容（不知道任何公开的，但这也是可能的），它可能会在没有用户通知的情况下注入代码。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2009-04-01T13:45:54.887

我不相信你可以通过 URL 破解。如果您将参数（GET 或 POST）传递到您的应用程序，那么有人可能会尝试将代码注入您的应用程序，因此您的避免将与您为本地应用程序所做的非常相似。

确保您没有将参数添加到从浏览器传递到代码中的 SQL 或其他脚本执行，而不确保字符串不包含任何脚本语言。搜索下一个有关您正在使用的开发平台的注入攻击的详细信息，这应该会产生很多好的建议和示例。

# jquery - jQuery nyroModal 与 ASP.NET 使用 Web 服务

> ID：705534
> 
> 赞同：0
> 
> 时间：2009-04-01T13:41:15.867
> 
> 标签：jquery, web-services, callback, nyromodal

我使用 jQuery nyroModal 插件已经有一段时间了，坦率地说，它是我迄今为止使用过的最好的模态插件之一！我希望很多其他人也使用过这个插件，因此我需要一些关于将它与 ASP.NET 一起使用的帮助。

然而，我在过去遇到了一个问题，并试图让它与 ASP.NET 服务器控件一起工作——基本上不能在模式中使用任何服务器控件，因为它创建了另一个表单标记，而且你显然知道，ASP。 NET 只允许一个表单标签。所以我决定改用标准的 HTML 控件，并使用 web-services/page-methods 调用服务器端代码（比如单击按钮）。这很好，但我不明白的是如何在模态中进行适当的回调，换句话说 - 单击按钮，模态缩小到默认大小并显示加载指示器，然后在 HTML 响应时放大已收到，并希望显示请求的状态（即*成功*或*失败*）

我刚刚开始学习 .NET 中的 Web 服务和回调，所以我绝不是专家。请有人对此有所了解并为我提供一个小的“hello world”示例吗？我将永远伟大！

感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:55:52.057

我也遇到过这个问题，事实证明，当您打开模式时，它会向下移动到`<form>`标签之外的 HTML 末尾！

如果您使用的是最新版本的 nyroModal，您可以使用 blocker 属性告诉它要出现在里面的元素

```
 $('#myElement').nyroModal({
    'blocker': '#aspnetForm'
  }); 
```

更多信息在这里： http: [//nyromodal.nyrodev.com/#demos](http://nyromodal.nyrodev.com/#demos)

# asp.net-mvc - ASP.NET MVC - 级联下拉

> ID：705540
> 
> 赞同：7
> 
> 时间：2009-04-01T13:43:25.190
> 
> 标签：asp.net-mvc, cascadingdropdown

我目前正在学习 ASP.NET MVC 并使用 Nhibernate。

我想使用级联下拉框。有没有人设法让级联下拉框在 MVC 中工作？

更新：我查看了以下网站：[链接文本](http://stephenwalther.com/blog/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx)和使用的方法 1。

控制器代码

```
 var makeList = new SelectList(makeRepository.ListMakes (), "Id", "make",1);
        ViewData["Makes"] = makeList;

        //// Create Models view data
        var modelList = new CascadingSelectList(modelRepository.ListModels (Convert.ToInt32(makeList.SelectedValue.ToString())), "ModelID","Id", "Name");
        ViewData["Models"] = modelList; 
```

查看代码

```
<%= Html.DropDownList("--Select Make--","Makes")%>
<label for="Makes">Car Model:</label>    
<%= Html.CascadingDropDownList("Models", "Makes") %> 
```

选择使用ID的id为1的Make时，列出了正确的汽车列表，但当我选择不同的使模型列表是空的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T13:44:50.630

您可能想阅读此[提示](http://stephenwalther.com/blog/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx)。

在本技巧中，Stephen Walter 演示了创建级联下拉列表的三种方法。首先，他向您展示了如何在另一个下拉列表中的选项更改时更改一个下拉列表显示的选项列表。其次，他向您展示了如何通过控制器操作公开下拉列表的数据。接下来，他将向您展示如何从 Web 服务中获取下拉列表的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2010-05-20T19:00:13.317

你可能想看看我几周前发表的一篇关于这个的[帖子](http://www.pieterg.com/post/CascadingDropDownListwithASPNETMVC2andJQuery)

> 首先我们需要设置 JsonResult 控制器动作。

```
/// <summary></summary>  
/// Get Models
/// <param name="makeID" />  
/// <returns></returns>  
public JsonResult GetModels(string id)  
{       
   JsonResult result = new JsonResult();       
   var filteredModels = from model in homeViewModel.Models
                        where model.MakeID.ToString() == id
                        select model;       result.Data = filteredModels.ToList();
   result.JsonRequestBehavior = JsonRequestBehavior.AllowGet;    
   return result;  
} 
```

> 这个方法现在让我们能够使用漂亮的`$.getJSON`jquery 调用。调用的签名如下

```
jQuery.getJSON( url, [ data ], [ callback(data, textStatus) ] ) 
```

> 假设我们已经设置了 2 个下拉列表，一个用于品牌，另一个用于模型，就像这样。

```
 Html.DropDownListFor((model) => model.MakeID, new SelectList(Model.Makes, "ID", "Description"))    
   Html.DropDownListFor((model) => model.ModelID, new SelectList(Model.Models, "ID", "Description")) 
```

> 我们可以包含下面的 jquery

```
//Hook onto the MakeID list's onchange event  
$("#MakeID").change(function() {   
   //build the request url   
   var url = '<!--Url.Content("~/")-->' + 'Home/GetModels';

   //fire off the request, passing it the id which is the MakeID's selected item value   
   $.getJSON(url, { id: $("#MakeID").val() }, function(data) {    
      //Clear the Model list    
      $("#ModelID").empty();    
      //Foreach Model in the list, add a model option from the data returned    
      $.each(data, function(index, optionData) {       
         $("ModelID").append("<option value=" + optionData.ID +">"+ optionData.Description +"</option>"  );    
      });
   });  
}).change(); 
```

对不起无耻的插件:(

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-20T18:54:05.440

我为此创建了一个 jQuery 插件。

[http://weblogs.asp.net/rajbk/archive/2010/05/20/cascadingdropdown-jquery-plugin-for-asp-net-mvc.aspx](http://weblogs.asp.net/rajbk/archive/2010/05/20/cascadingdropdown-jquery-plugin-for-asp-net-mvc.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-10T23:34:20.730

您正在使用的提示：ASP.NET MVC 提示 #41 – 来自 Stephen Walther 的使用 Ajax 创建级联下拉列表不是用 MVC Realease 1.0 完成的

因此，它适用于下载的项目（在修复了一些小问题之后），但是当您尝试将其合并到 MVC 版本 1.0 中时，事情就会中断。

例如：在下载的项目中，脚本在 Content Folder 中，在 Release 1.0 中，脚本在 Scripts 文件夹中。

发行版中的一些（如果不是全部）*.js 文件也从赌注和 CTP 更改。这也可能是个问题。

我下载了他的项目（修复了几个小问题），它在该项目（*.js 文件）中运行良好。

例如，

我将以下内容固定为：

改变：`\Views\Home\index.aspx`

```
<label for="Makes">Car Make:</label>  
<%= Html.DropDownList("--Select Make--", "Makes") %> 
```

到：

```
<label for="Makes">Car Make:</label>
<%= Html.DropDownList("Makes", (SelectList)ViewData["Makes"], "--Select Make--")%> 
```

如您所见，存在一些问题。

这些类型的教程和博客问题很多；每个人都希望被认为是正在发布的新技术的“专家”，因此他们编写有关 beta 和 CTP 的教程。结果是“专家”将有一些不适用于最终版本的东西。

您需要找到的是已发布教程的专业人员。专业人士将确保他们的教程有效。我所说的专业人士是指该技术领域的专业培训师。

Stephen Walther 有一个更好的博客和很多好东西，但请记住，他是 Microsoift 的布道者。他撰写了有关 MS 技术的书籍，因此他需要在博客世界中保持活跃，因此他将一些好东西放在前沿技术上。这使他被视为专家，因此他的书可以出售。

请记住，无论“专家”如何，当您尝试在最终版本中使用信息时，博客/著作（基于 beta 和 CTP）都会出现不准确的情况。

# php - 在 PHP 中添加带有字符串的回声？

> ID：705541
> 
> 赞同：0
> 
> 时间：2009-04-01T13:43:36.967
> 
> 标签：php, string

我有一个 echo = "000000" 和一个名为 $id 的字符串，它是一个整数。

如果 $id = 1，如何添加 "000000" + $id 得到 000001 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T13:46:28.397

你可以看看[str_pad](http://php.net/str_pad)

在您的情况下，它将类似于：

```
str_pad('1', 6, '0', STR_PAD_LEFT); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T13:47:06.057

```
function padWithZeros($s, $n) {
  return sprintf("%0" . $n . "d", $s);
} 
```

其中 $n 是您想要的零的数量，例如：

```
echo padWithZeros("1", 6); 
```

用五个零填充数字 1 等于六个位置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T14:14:14.010

```
printf("%06d", $id) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T15:44:06.930

$temp = "00000".$id; 回声“ID = $temp”；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T17:58:53.143

str_pad 是完全符合您要求的 PHP 函数。但是，printf 是一种很好理解的方法，它适用于大多数常用语言。在这种情况下使用 printf 使代码更具可读性可能是有意义的。

# jquery - 用 jquery 生成页面不能用 flex 读取 cookie

> ID：705546
> 
> 赞同：1
> 
> 时间：2009-04-01T13:44:33.440
> 
> 标签：jquery, apache-flex, cookies

当我使用 jquery 生成页面时（通过在 html 页面中包含 startup.js），我无法通过 flex 访问 cookie。

启动.js

```
function init_element() {
$(document).ready(function(event){
    $("#accountBarDiv").css("position", "absolute");
    $("#accountBarDiv").css("left", "0px");
    $("#accountBarDiv").css("background-color", "transparent");     
    $("#accountBarDiv").append("<iframe id=\"ifrId\" style=\"width:10px;height:10px\"></iframe>");
    $("#accountBarDiv").append("<object classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0\" width=\"230px\" height=\"70px\" id=\"ogra2\">  <param name=\"movie\" value=\"http://localhost/ogra/bin/ogra.swf\"/>        <param name=\"allowscriptaccess\" value=\"always\"/>        <param name=\"wmode\" value=\"transparent\"/>               <embed src=\"http://localhost/ogra/bin/ogra.swf\" quality=high width=\"230px\" height=\"70px\"  name=\"ogra2\" type=\"application/x-shockwave-flash\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\">  </embed></object>");

});}    init_element(); 
```

我还包含了一个 script.js。它包含一个函数 test()，它将返回“hello”。

我 ogra.swf 我调用了一个 return ExternalInterface.call 来进行函数测试，不幸的是我的答案是空的。

当我用 html 和 body 以及对象和嵌入的 str 更改我的 startup.js 时（由于所有引号，很难在此处发布它）我只是 document.write str。我可以完美地访问我的 cookie。

太糟糕了，他们命令我用 jquery 编写 startup.js。

有谁知道为什么我无法在我的 flex 应用程序中访问我的 cookie？

当然，jquery 的东西在 FF 中而不是在 IE 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2010-11-26T03:58:07.083

AFAIK Flash 应用程序不发送 cookie。这是 Flash 的一个已知限制，因为 NPAPI 二进制文件直接自行建立连接，无需通过浏览器。

这被称为“Flash Cookie 错误”，列在例如 SWFUpload 的已知问题中。 [http://demo.swfupload.org/Documentation/#knownissues](http://demo.swfupload.org/Documentation/#knownissues)

您可能会尝试一些解决方法，例如使用 Javascript 解析`document.cookie`会话 cookie 并将其注入 Flash `flashvars`，然后通过 POST/GET 发送会话 cookie。

一个名为“Cookies”的 SWFUpload 插件可以做同样的事情。 [http://demo.swfupload.org/Documentation/#plugins](http://demo.swfupload.org/Documentation/#plugins)

# c# - .Net DefaultValueAttribute 属性

> ID：705553
> 
> 赞同：13
> 
> 时间：2009-04-01T13:45:56.307
> 
> 标签：c#, .net

我在用户控件中得到了这段代码：

```
[DefaultValue(typeof(Color), "Red")]
public Color MyColor { get; set; } 
```

如何更改`MyColor`为其默认值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-01T13:47:48.347

`DefaultValueAttribute`不会将属性设置为值，它纯粹是信息性的。Visual Studio 设计器将此值显示为非粗体，其他值显示为粗体（已更改），但您仍必须将属性设置为构造函数中的值。

如果值是由用户设置的，设计器将为该属性生成代码，但您可以通过右键单击该属性并单击来删除该代码`Reset`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-01T13:51:23.440

`DefaultValueAttribute`编译器不使用，并且（可能令人困惑）它没有设置初始值。您需要在构造函数中自己执行此操作。*确实*使用的地方`DefaultValueAttribute`包括：

*   `PropertyDescriptor`- 提供`ShouldSerializeValue`（由`PropertyGrid`等使用）
*   `XmlSerializer`// `DataContractSerializer`etc（序列化框架）——用于决定是否需要包含

相反，添加一个构造函数：

```
public MyType() {
  MyColor = Color.Red;
} 
```

（如果是`struct`带有自定义构造函数的，需要先调用`:base()`）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-01T13:53:57.910

它是非正式的，但您可以通过反射使用它，例如，在您的构造函数中放置以下内容：

```
foreach (PropertyInfo p in this.GetType().GetProperties())
{
    foreach (Attribute attr in p.GetCustomAttributes(true))
    {
        if (attr is DefaultValueAttribute)
        {
            DefaultValueAttribute dv = (DefaultValueAttribute)attr;
            p.SetValue(this, dv.Value);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-01T13:49:21.587

“DefaultValue”属性不会为您编写代码……而是用于告诉人们（例如 Mr Property Grid 或 Mr Serializer Guy）*您*计划将默认值设置为 Red。

这对于诸如 PropertyGrid 之类的东西很有用...因为它会*加粗*除红色以外的任何颜色...对于序列化，人们可能会选择省略发送该值，因为您告诉他们这是默认值:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-01T13:47:49.767

你`MyColor`在你的构造函数中初始化吗？

该`DefaultValue`属性实际上并未设置任何值。它只是指示设计人员不为其生成代码的值，并且还将显示默认值非粗体以反映这一点。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-05T10:53:32.967

我改编了约塞连的回答：

```
foreach (PropertyInfo f in this.GetType().GetProperties())
{
    foreach (Attribute attr in f.GetCustomAttributes(true))
    {
        if (attr is DefaultValueAttribute)
        {
            DefaultValueAttribute dv = (DefaultValueAttribute)attr;
            f.SetValue(this, dv.Value, null);
        }
    }
} 
```

# javascript - 为什么 javascript 点击区域在 IE8 中不起作用？

> ID：705556
> 
> 赞同：0
> 
> 时间：2009-04-01T13:46:32.173
> 
> 标签：javascript, visual-studio-2005, internet-explorer-8

我试图在旧的 ASP.NET 应用程序中找到一个错误，它**导致 IE8 无法单击**我们应用程序中的以下“按钮”区域：

```
<td 
    width="150px" 
    class="ctl00_CP1_UiCommandManager1i toolBarItem" 
    valign="middle" 
    onmouseout="onMouseOverCommand(this,1,'ctl00_CP1_UiCommandManager1',0,0);" 
    onmouseover="onMouseOverCommand(this,0,'ctl00_CP1_UiCommandManager1',0,0);" 
    onmousedown="onMouseDownCommand(this, 'ctl00_CP1_UiCommandManager1', 0, 0);" 
    onmouseup="onMouseUpCommand(this, 'ctl00_CP1_UiCommandManager1', 0, 0);" 
    id="ctl00_CP1_UiCommandManager1_0_0">

    <span style="width:100%;overflow:hidden;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap;">
        NEW
    </span>
</td> 
```

当我们把IE8切换到IE7兼容模式，问题就消失了，IE7就可以点击了。

由于上述 HTML 是由第三方控件（Janus，[http://www.janusys.com/controls](http://www.janusys.com/controls)）生成的，我们没有源代码。

*   **有没有人遇到过类似的IE8问题？**
*   我已经确定它实际上触发了 onMouseDownCommand 命令
*   IE8中按钮区域的CSS也不同，它没有IE7中的颜色阴影。我可以想象某个地方的 HTML 是无效的并且 IE8 更严格并没有发挥作用，但是在哪里呢？
*   欢迎提供有关如何缩小此错误范围的任何建议

# 回答：

原来是应用程序没有检查“MSIE 8.0”的 navigator.agent，因此认为 IE8 具有非 Internet Explorer 浏览器。

感谢 Lazarus 的提示，IE8 Javascript 调试器非常好，就像 IE 的 Firebug，会更多地使用它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:54:30.640

IE8 上的 F12 可让您进入具有 js 调试功能的开发人员工具，这可能是我的第一站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-04-09T14:20:03.373

IE8 中的此事件仅适用于**A**元素。

# openldap - 如何更新 OpenLDAP 目录属性？

> ID：705561
> 
> 赞同：0
> 
> 时间：2009-04-01T13:47:57.987
> 
> 标签：openldap

有没有办法通过 Java 代码以编程方式更新 OpenLDAP 目录属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T17:22:25.710

您可以使用 Novell 的[Java LDAP 类来](http://developer.novell.com/wiki/index.php/LDAP_Classes_for_Java)完成这项工作，这对我们来说做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T07:50:30.367

Peter 是对的，只要您不想摆弄 JNDI，这些类是唯一可用的。

有一件事，如果您更新属性，则需要在添加新值之前删除属性的值（尤其是多值属性）。

# java - 我可以贡献的开源 Java 项目是什么？

> ID：705575
> 
> 赞同：12
> 
> 时间：2009-04-01T13:50:37.187
> 
> 标签：java, open-source

我正在寻找一个用Java编写的开源项目，入门门槛相对较低，即。不是非常复杂，友好等。

我的背景主要是网络应用程序，所以那将是我开始的最佳场所。大多数情况下，我只是在寻找一个可以在空闲时间做一些事情并保持我的排骨的地方。

我计划浏览各种公开列表，但我想看看 Stack Overflow 社区是否有任何建议。也许有人甚至有一个宠物项目......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T14:01:22.993

许多[Apache 基金会](http://www.apache.org/)项目都是 Java。看看它们，看看你对什么感兴趣。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-01-04T07:55:08.937

它取决于感兴趣的领域，例如医疗、工程、通信等。

[SourceForge](http://www.sourceforge.net)将开源项目归为此类。看看这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T13:55:18.657

这主要取决于您的兴趣和知识。知道这一点后，您可以浏览 Sourceforge，它们应该提供一些额外的搜索参数，如活跃贡献者数量、代码行数等。这应该会给您一些机会。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T15:00:24.227

查看 terracotta.org。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-03T09:42:07.180

Apache POI HWPF [Apache POI HWPF](http://poi.apache.org/hwpf/index.html)甚至公开宣传需要有人接管这个项目。它是处理 Microsoft Word 文件的 Java API。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-29T07:07:16.560

您可以查看[github](https://github.com/search?l=Java&nwo=libgdx/libgdx&o=desc&p=6&q=Java&ref=cmdform&s=&search_target=global&type=Repositories)网站和[Google-code](https://code.google.com/hosting/search?q=label%3AJava&filter=0&mode=&start=0)，您有几个可以贡献的 java 项目。

# url-rewriting - ASP.NET URL 重写选项

> ID：705580
> 
> 赞同：0
> 
> 时间：2009-04-01T13:51:26.090
> 
> 标签：url-rewriting, asp.net-3.5

我见过一些 .NET 网站，它们显然使用了某种 URL 重写方法，但最让我感兴趣的是那些看起来像这样的网站：

**[http://www.somesite.com/pages/an-example-page.aspx](http://www.somesite.com/pages/an-example-page.aspx)**

我以前使用过“UrlRewritingNet.UrlRewrite”，但这要求数据库主键整数位于请求的 URL 中的某个位置。

还有其他方法可以执行此操作吗？我正在使用 ASP.NET 3.5

感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T13:53:40.407

在新的 MVC 框架中有一个 System.Web.Routing 添加，您可以在 3.5 中使用它，或者我相信它包含在 3.5 SP1 安装中。

[http://msdn.microsoft.com/en-us/library/system.web.routing.aspx](http://msdn.microsoft.com/en-us/library/system.web.routing.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T13:54:17.130

查看 IIS 7 的[URL 重写模块](http://www.iis.net/extensions/URLRewrite)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-25T23:02:36.827

您可以在 IIS5、IIS6 和 IIS7 上使用[Ionic 的 Isapi 重写过滤器 (IIRF) 。](http://iirf.codeplex.com)

免费，开源。使用类似 mod_rewrite 的语法。与 ASPX、PHP、ASP 或您在服务器上运行的任何东西一起工作。[好的文档。](http://cheeso.members.winisp.net/Iirf20Help/)

# java - 将带有 Equinox Servle Bridge 的 OSGi 应用程序部署到 Tomcat 时如何配置 Log4J？

> ID：705584
> 
> 赞同：5
> 
> 时间：2009-04-01T13:52:53.280
> 
> 标签：java, tomcat, log4j, osgi, equinox

使用[Equinox servlet 桥](http://www.eclipse.org/equinox/server/http_in_container.php)部署我的 OSGi Web 应用程序时，我得到以下信息：

```
log4j:WARN No appenders could be found for logger (org.springframework.osgi.extender.internal.activator.ContextLoaderListener).
log4j:WARN Please initialize the log4j system properly. 
```

我尝试了几种提供必要的“log4j.properties”文件的方法，包括：

*   将上下文参数“log4jConfigLocation”添加到 servlet 桥 web.xml
*   在 WEB-INF 文件夹中创建一个文件夹“classes”并将我的 log4j.properties 文件复制到那里（并将其复制到其他几个位置）
*   删除我的 log4j 包并将“extendedFrameworkExports”设置为 org.apache.log4j 所以（我猜）使用了 tomcat log4j ...这不起作用，因为我的依赖项需要一些作为 log4j 包的片段提供的 slf4j 类。 ..不再存在了...

当然，我还有一个片段包，它使用 log4j.properties 文件扩展了 log4j 包，但看起来这个 log4j 包没有被使用。

**添加：**我应该补充一点，我正在 Eclipse 中开发应用程序......并且配置 log4j / slf4j 的片段包在那里工作。

有没有人解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T12:47:52.633

我发现了我的错误。应该提供 log4j.properties 文件的片段没有包含它，因为我没有将它添加到 build.properties 中的二进制构建中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-27T07:08:15.453

我有同样的问题，我添加`log4j.properties`到我的`/src`文件夹中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T15:18:38.830

更新：这对您的问题没有帮助......

我自己只是在研究 OSGi。

不完全是您要寻找的内容，但以下[帖子](http://www.eclipsezone.com/eclipse/forums/t99588.html)讨论了使用 vanilla equinox 时的相同问题（即：不在 tomcat/jetty 中托管）。

它建议创建一个“片段包”（可供下载的示例）来保存您的 log4j.properties。也许你可以尝试类似的东西？

或者也许你只需要把你的 WAR放在`log4j.properties`里面？`META-INF`

# sql - 没有索引的表的 SQL Server 物理数据布局

> ID：705587
> 
> 赞同：1
> 
> 时间：2009-04-01T13:53:35.027
> 
> 标签：sql, clustered-index

我很想知道是否有人知道数据在没有索引（甚至没有 PK）的表中是如何物理排列的。在这个[问题](https://stackoverflow.com/questions/705504/what-happens-when-i-drop-a-clustered-primary-key-in-sql-2005)中，OP 声称删除集群 PK 需要很长时间。我知道聚集索引就是数据本身，但是解释长处理时间的新数据排列是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T13:59:44.543

这将是一个[**HEAP**](http://msdn.microsoft.com/en-us/library/aa964133(SQL.90).aspx)：

> 根据定义，堆表是没有任何聚集索引的表。
> 
> 基于堆的表的不同页面在磁盘上占据不同的非连续区域，并且它们没有以任何方式链接在一起。
> 
> 表上定义的每个非聚集索引将在 sysindexes 表中具有相应的条目，其 indid 介于 2 和 254 之间，指向第一个`IAM`（索引分配映射）页面。
> 
> `IAM`pages 表示由数据库对象（表或索引）使用并`SQL Server`用于分配和释放存储空间的所有页面的链接列表。
> 
> 重要的是要记住，`IAM`页面不用于搜索数据或索引页面，而仅用于分配和释放它们。

# php - PHP fopen（）重定向限制达到错误

> ID：705593
> 
> 赞同：0
> 
> 时间：2009-04-01T13:54:36.257
> 
> 标签：php, fopen

执行以下代码块时：

```
foreach($eventfiles as $eventfile)
{
    if($eventfile['filename'])
    { 
        $file = $eventfile['filepath'];
        // Open File
        if( !($fp = fopen($file, "r")))
        {
            echo '<br>CAN NOT READ FILE.';
            exit;
        }
        // Read data from the file into $data
        $data = "";
        while (!feof($fp)) $data .= fread($fp,1024);
        query("update event_rtab set html = '".escape($data)."' where id = {$eventfile[id]}");
    }
    if($eventfile['eventType']=='email')
    {
        query("INSERT INTO event_email_rtab (event_id,subject) values ($eventfile[id],'".escape($eventfile[email_subject])."')");
    }
} 
```

脚本失败并出现以下错误：

> fopen（test.html）[function.fopen]：无法打开流：达到重定向限制，在第 843 行的 /data/www/example.com/public/test.php 中中止

是什么导致了这个错误，我该如何纠正它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T16:02:16.137

您要打开的文件在哪里？它们是在本地文件系统上还是您试图通过 HTTP(S) 访问它们？

如果您正在使用某些网络协议包装器，那么此错误很可能与在从脚本到要打开的文件的过程中重定向过多（HTTP - 在 HTTP(S) 协议的情况下）有关。[默认重定向限制应为](http://de3.php.net/manual/en/context.http.php)20 。由于 20 次重定向非常多，文件名本身可能存在一些错误（导致例如另一端的网络服务器进行一些拼写检查重定向）或其他服务器配置错误或有一些安全措施或......

如果您觉得需要扩展 20 个重定向，您可以使用流上下文。

```
$context = array(
    'http'=>array('max_redirects' => 99)
);
$context = stream_context_create($context);
// hand over the context to fopen()
$fp = fopen($file, 'r', false, $context);
// ... 
```

请参见：

*   [流](http://de3.php.net/manual/en/book.stream.php)
*   [`stream_context_create()`](http://de3.php.net/manual/en/function.stream-context-create.php)
*   [HTTP 上下文选项](http://de3.php.net/manual/en/context.http.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T13:57:04.673

这很可能是由于您尝试打​​开的文件正在尝试打开另一个文件，从而达到重定向的限制。

编辑：当我说可能时，我的意思是这可能导致错误，这可能就是这种情况。

# c# - C#：Blowfish 加密单个 dword

> ID：705596
> 
> 赞同：1
> 
> 时间：2009-04-01T13:55:23.883
> 
> 标签：c#, c++, encryption, blowfish

我正在将 C++ TCP 客户端转换为 C#。客户端用于使用河豚对数组的 4 个字节进行编码。

[C++ 河豚](http://pastebin.com/m76286416)

[C# 河豚（C# NET）](http://pastebin.com/m541a734f)

C++

```
 BYTE response[6] = 
    {
        0x00, 0x80, 0x01, 0x61, 0xF8, 0x17
    };

    // Encrypt the last 4 bytes of the packet only(0x01,0x061,0xF8,0x17)
    blowfish.Encode(responce + 2, responce + 2, 4); 

    // Send the packet
    send(s, (char*)sendPtr, sendSize, 0); 
```

C＃

```
 responce  = new byte[6] { 0x00, 0x80, 0x01, 0x61, 0xF8, 0x17};

    // Encrypt the last 4 bytes of the packet only(0x01,0x061,0xF8,0x17)
    Handshake.blowfish.Encrypt(responce, 2, responce, 2, 4);

    // Send the packet
    WS.sock.Send(encrypted); 
```

在 C++ 代码中，当使用这些参数调用“Blowfish.Encode”行时，它会进入 cBlowfish.Encrypt 函数

```
DWORD cBlowFish::Encode(BYTE * pInput, BYTE * pOutput, DWORD lSize)
{
DWORD   lCount, lOutSize, lGoodBytes;
BYTE    *pi, *po;
int     i, j;
int     SameDest =(pInput == pOutput ? 1 : 0);

lOutSize = GetOutputLength(lSize);
for(lCount = 0; lCount < lOutSize; lCount += 8)
{
    if(SameDest)    // if encoded data is being written into input buffer
    {
        if(lCount < lSize - 7)  // if not dealing with uneven bytes at end
        {
            Blowfish_encipher((DWORD *) pInput, (DWORD *)(pInput + 4));
        }
        else        // pad end of data with null bytes to complete encryption
        {
            po = pInput + lSize;    // point at byte past the end of actual data
            j =(int)(lOutSize - lSize); // number of bytes to set to null
            for(i = 0; i < j; i++)
                *po++ = 0;
            Blowfish_encipher((DWORD *) pInput, (DWORD *)(pInput + 4));
        }
        pInput += 8;
    }
    else            // output buffer not equal to input buffer, so must copy
    {               // input to output buffer prior to encrypting
        if(lCount < lSize - 7)  // if not dealing with uneven bytes at end
        {
            pi = pInput;
            po = pOutput;
            for(i = 0; i < 8; i++)
                // copy bytes to output
                *po++ = *pi++;
            // now encrypt them
            Blowfish_encipher((DWORD *) pOutput, (DWORD *)(pOutput + 4));
        }
        else        // pad end of data with null bytes to complete encryption
        {
            lGoodBytes = lSize - lCount;    // number of remaining data bytes
            po = pOutput;
            for(i = 0; i <(int) lGoodBytes; i++)
                *po++ = *pInput++;
            for(j = i; j < 8; j++)
                *po++ = 0;
            Blowfish_encipher((DWORD *) pOutput, (DWORD *)(pOutput + 4));
        }
        pInput += 8;
        pOutput += 8;
    }
}
return lOutSize;
} 
```

为了清楚起见，由于传递的字节长度很短（4），循环只执行了一次。

从这个巨大的代码中只执行一个调用（只执行一次），调用是：

```
Blowfish_encipher((DWORD *) pInput, (DWORD *)(pInput + 4)); 
```

//意思是代码传递前两个if语句，然后离开循环和函数。

从我的角度来看，解决方案隐藏在加密函数内部的某个地方：

```
void cBlowFish::Blowfish_encipher(DWORD *xl, DWORD *xr)
{
union aword Xl, Xr;

Xl.dword = *xl;
Xr.dword = *xr;

Xl.dword ^= PArray [0];
ROUND(Xr, Xl, 1);  
ROUND(Xl, Xr, 2);
ROUND(Xr, Xl, 3);  
ROUND(Xl, Xr, 4);
ROUND(Xr, Xl, 5);  
ROUND(Xl, Xr, 6);
ROUND(Xr, Xl, 7);  
ROUND(Xl, Xr, 8);
ROUND(Xr, Xl, 9);  
ROUND(Xl, Xr, 10);
ROUND(Xr, Xl, 11); 
ROUND(Xl, Xr, 12);
ROUND(Xr, Xl, 13); 
ROUND(Xl, Xr, 14);
ROUND(Xr, Xl, 15); 
ROUND(Xl, Xr, 16);
Xr.dword ^= PArray [17];

*xr = Xl.dword;
*xl = Xr.dword;
} 
```

定义：

```
#define S(x,i)          (SBoxes[i][x.w.byte##i])
#define bf_F(x)         (((S(x,0) + S(x,1)) ^ S(x,2)) + S(x,3))
#define ROUND(a,b,n)    (a.dword ^= bf_F(b) ^ PArray[n]) 
```

问题是 C++ 中的 Blowfish_Encipher 函数有两个参数：Input(xl) as dword 和 Output(xr) as dword。

C# Blowfish Encrypt_Block 函数有四个参数，为什么？

```
 public void EncryptBlock(uint hi,uint lo,out uint outHi,out uint outLo) 
```

与 C++ 河豚不同，EncryptBlock 调用 Encrypt 而不是 Encrypt 来调用 EncryptBlock。也许 EncryptBlock 不是 C++ Blowfish_Encipher？

无论如何，我的问题是，当我用 6 个字节的数组调用 C++ 代码时，请求河豚只编码最后 4 个字节，它做到了。

如果我用这 4 个字节在 C# 中调用 encrypt 函数，它返回 0x00。（如果您想查看 C# Blowfish，请查看我的第一行 - 我已在此处添加了一个超链接）。

注意我不能改变数据包的结构，它应该是这样的，但是加密的。

我也试过这个：

知道C++ Encrpypt函数只执行一个调用-blowfish Encipher。我尝试在C#中直接调用EncryptBlock，但是输入和输出有Hi Uint32和Low Uint32，如何将它们传播为HI或LO？如果 Encrypt_Block 在 C# 中调用河豚加密，这会起作用吗？我不太确定。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T23:58:18.957

Blowfish 在八字节块上工作。加密不足 8 个字节（或 8 的倍数）的数据的唯一方法是将其填充（在本例中为 0）。

您需要将一个八字节缓冲区传递给您的 C++ 函数，因为您正在就地加密。您发布的代码实际上将加密四个额外字节的相邻内存 ( `(DWORD *)(pInput + 4)`)，这显然不是您想要的。此外，解密需要所有八个输出字节 - 因此，不幸的是，您不能只传递四个加密字节并期望它们在另一端成功解密。

我知道这不能解决您的问题 - 我看不出有任何解决方法，因为您只想发送四个字节的加密数据，而 Blowfish 总是至少产生八个！

# compiler-construction - 更难构建：模拟器还是编译器？

> ID：705598
> 
> 赞同：10
> 
> 时间：2009-04-01T13:55:27.970
> 
> 标签：compiler-construction, comparison, emulation

对于一个拥有 10 到 20 年经验且从未构建过编译器或仿真器的熟练开发人员，哪个更具挑战性？

你能比较一下两者都会成为障碍的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-03T16:08:21.777

仿真和编译是完全不同的，但由于两者都被认为是“低级”的，因此往往会被混为一谈。

6502 或 Z80 等简单架构的仿真对于工作的 CPU 块来说是相当简单的，但是将有相当多的代码需要编写，因为您需要为每条指令提供一个函数。您将希望以某种方式从具有所有时序等的指令集规范中自动执行此操作，因为将这些全部输入确实非常乏味:) 旧的 CPU 指令集规范很容易找到，所以这很有帮助在构建模拟器时。

最重要的是，您需要实现某种级别的*硬件仿真*，这通常涉及处理和生成中断（例如，如果仿真器用于游戏控制台，则显示设备的垂直空白中断）。这再次需要一定程度的规范和代码生成，但您可能必须手动编写大部分内容，因为它不会像指令集代码那样重复（因此可自动化）。

编译将涉及您要为其实现编译器的任何语言的某种语言规范，以及您将要为其输出代码的目标。输出可以是直接的二进制，可以是汇编，甚至可以是另一种语言（这实际上只是一个翻译器，但当目标被认为是“足够”低级时，它算作编译）。由于您将在某种硬件或 VM 平台上运行，因此您不太可能需要担心中断处理之类的事情。

**两者的绊脚石**是**复杂性**和**正确性**——对于模拟器，你需要让它非常准确地工作，除非你选择非常简单的东西来模拟。您还需要为模拟器创建某种集成调试器，否则当它总是这样做时，几乎不可能分辨出哪里出了问题。对于编译器来说，翻译一种玩具语言或一种更复杂语言的一小部分，并在你进行的过程中构建它应该是相当简单的。

请记住，对于这两个项目，您需要能够产生输入来测试它们，如果您不能产生简单的输入，那么您会发现从一开始就很难进行调试。 *仅此一项就使编译器的工作更容易进入，恕*我直言（那并且您将希望拥有可以立即模拟完整控制台或其他东西的东西:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T03:27:53.930

我两者都写过，并且会说在其他条件相同（语言或指令集的复杂性）的情况下，*编写*模拟器会更容易，尤其是当您尝试编写*有趣*的模拟器或编译器时。

原因是使用模拟器时，您正试图用另一个类似的低级事物来模拟低级事物。这还不错。使用编译器，您可能会尝试使用非常低级的工具（机器字和机器指令）来实现非常高级的想法（例如，对象、一等函数、托管内存、字符串扫描）。这项任务要困难得多。

当然，为了好玩，您可以编写一个通过*动态二进制翻译*工作的模拟器，即将模拟架构的机器代码编译为本机架构的机器代码。通过这种方式，您可以获得两者的所有乐趣——并且您可以制作真正快速的仿真器，如 QEMU 或已故的 Digital FX!32。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-01T14:04:07.387

我都写过，并且会说模拟器通常更容易。当然，这在很大程度上取决于您要模拟的内容（在 iPhone 上模拟 IBM 大型机可能有点挑战）以及您要编译的内容（小型 C 编译器非常简单，几乎可以使用完整的 C++ 编译器）不可能的困难。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-01T14:03:18.137

这在很大程度上取决于您正在模拟什么以及您正在编译什么。

*   在功能强大的系统（例如现代 PC）上模拟非常简单的系统（例如 4 功能计算器）的仿真器将很容易编写。
*   为单个目标（例如几乎直接映射到输出程序集的东西）编译非常简单的语言的编译器将很容易编写。
*   在非常简单的系统（例如 PDA）上仿真非常复杂的系统（例如大型专有计算系统）的仿真器将很难编写
*   为许多目标编译非常高级语言（例如完整的 C++）的编译器将很难编写

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-02T03:09:37.500

在我看来，复杂的编译器比复杂的仿真器更难编写，原因很简单，编译器涉及更多的理论。

在设计语言 XX 时，需要考虑很多因素，更不用说优化编译器生成的代码的输出了，这本身就是一种黑色艺术。使用模拟器，您就拥有了一个已经定义良好的环境，其中包含您想要实现的大部分定义良好的语言。

无论如何，我建议任何人编写和编写编译器，因为它可以让您更深入地了解编程，就像医生需要了解身体解剖学一样，即使他在日常工作中可能不需要它。

编辑：我认为这两种技能都非常有用，实际上可以将它们结合起来——它们不是异或。

我想在上面补充一下我的观点是，创建一种非平凡的编程语言，包括运行时库以与驱动程序、数据库等进行交互，并且可以随着未来版本的发展而保持向后兼容，这是 CS 中更具挑战性的领域之一.

我也同意，如果平台是未知的，即你正在对某些东西进行逆向工程，那么做一个模拟器要困难得多，但是 OTOH 这不是 OP 的问题，是吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-05-28T03:02:50.090

软件的模拟非常简单，因此相对容易，但可能很乏味。

编写编译器可能会非常困难，但是通过拥有良好的工作知识或拥有一组您正在为其编写编译器的语言的良好规范（例如 Backus-Naur 格式符号），它会变得更简单。

如果您的目标是让模拟器在许多不同的平台上工作（例如，在 MSDOS 下使用正确的 fudge 常量运行软盘驱动器时序的模拟，但在多- 任务平台，如 Vista 或 Linux）。当没有足够的知识了解其操作模式如何由软件控制时，硬件仿真也极其困难。这迫使在取得进展之前进行漫长而烦人的逆向工程。

总而言之，我认为仿真更难。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-04T07:51:35.747

为已知的仿真平台编写仿真器并不难（您也可以使用预制的 CPU 仿真器并获得一些开发时间）。

为未知的仿真硬件编写模拟器**要困难得多**，并且将难度转移到与代码开发不同的领域：数学、密码分析、安全协议等。而且，作为开发人员，你必须对所涉及的试错有**耐心**进行中。

[例如，想想CPS2](http://en.wikipedia.org/wiki/Capcom_System_2)仿真需要多少时间（CPS2 ROM 被加密）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-07-17T06:22:46.710

断章取义，不可能有明确的答案：这完全取决于你想要实现什么，以及你要与什么*竞争*。

如果它只是一个“概念证明”，那么在这两种情况下，它都相当简单。

但是，如果您试图模拟复杂的硬件或高精度，或者如果您想达到 AAA 编译质量，事情很快就会变得非常复杂。复杂性不仅会出现在“主要”代码的算法/理论中，还会出现在您必须构建的所有支持工具（调试器、反汇编器、分析器等）中，以便您可以进入下一步。

也就是说，要考虑的另一个方面是，为几乎任何编程语言编写一个工作编译器都具有合理的复杂性。另一方面，如果有硬件可以轻松模拟，那么即使是编写基本的模拟器也可能非常复杂。

所以用粗略的笔画，我会说编写编译器更容易，因为无论目标硬件或语言如何，你几乎可以保证成功获得工作版本。模拟器没有这样的保证。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-01T13:58:38.897

编写编译器要困难得多，因为您正在处理低级别的东西（链接、特定于您的体系结构的程序集等）。

模拟器只需要执行输入给它的每条指令的逻辑（我知道我正在简化这一点，但我假设你有指令集的规范），现在，编写 FAST 模拟器要困难得多。

# jquery - 可拖动项目添加到可排序列表

> ID：705602
> 
> 赞同：3
> 
> 时间：2009-04-01T13:56:31.897
> 
> 标签：jquery, draggable, jquery-ui-sortable

我有一个可排序的列表和一个可拖动的 div：

```
<div id="draggable">Add Item</div>

<ul id="sortable">
    <li>item 1</li>
    <li>item 2</li>
    <li>item 3</li>
    <li>item 4</li>
    <li>item 5</li>
</ul> 
```

#sortable 已经是一个 .sortable()。我应该能够在任何列表项（第一个、中间、最后一个）之间“拖动”另一个项目。

我该怎么做？

任何答复将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T15:25:05.790

您需要在可拖动选项中设置选项 connectToSortable。

IE：

$('#draggable').draggable({ connectToSortable: 'ul#sortable' });

[有关更多信息，请参阅文档](http://docs.jquery.com/UI/Draggable#option-connectToSortable)

# java - netbeans中的Java堆空间..但我已经增加了堆大小！

> ID：705605
> 
> 赞同：15
> 
> 时间：2009-04-01T13:56:45.813
> 
> 标签：java, netbeans, out-of-memory

我遇到了 netbeans 和 Java 的问题。我的程序需要能够处理通过数组列表上传的大文件。所以我使用 -Xmx512m 通过 netbeans.conf 文件增加最大堆大小。

我知道 netbeans 正在捕捉变化，并且我已经多次重新启动以确保它是。尽管如此，当总内存参数仅为 66650112 字节时，我的程序继续崩溃并出现 Java 堆空间内存错误；也就是说，64M-ish。

我怎样才能强制这个特定的类、过程等等，以允许更多的内存分配？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-01T14:08:21.450

我认为您只是配置了 netbeans IDE 本身而不是您的程序的最大堆大小。

转到您的项目“**属性**”，选择“**运行**”类别。在“ **VM 选项**”文本框中输入您的参数 ( `-Xmx512m`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-27T04:35:30.030

尝试**工具**->**服务器**-> 在**平台**选项卡上，Java 平台下方有一个 VM 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:02:07.487

我相信编辑 netbeans.conf 只会更改运行 IDE 的 JVM 可以使用的最大值。您需要更改程序的项目配置（因为它可能在不同的 Java VM 中运行）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:07:29.080

查看[此链接](http://www.netbeans.org/kb/docs/java/project-setup.html#deploy)以获取有关设置项目属性（尤其是运行项目的属性）的 NetBeans 帮助。

VM Options 是您需要添加 -Xmx512m 的地方

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-20T20:32:15.797

VM Options 是您需要添加 -Xmx512m 的地方.....

以及 -Xms512m

自从：

-Xms512m -> 初始 Java 堆大小 -Xmx512m -> 最大 Java 堆大小

因此你会在你的情况下添加： -Xmx512m -Xms512

在 VM 选项文本字段中......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-09T04:46:55.510

转到项目属性窗口。将 Build>Compiling 选项卡中的附加编译器选项设置为 -Xmx512m

# c++ - 如何正确解析我的文件？（使用中断/继续）

> ID：705609
> 
> 赞同：1
> 
> 时间：2009-04-01T13:57:07.373
> 
> 标签：c++, iteration, file-processing

例如，我有以下看起来像这样的数据：

> 34 foo
> 34 酒吧
> 34 qux
> 62 foo1
> 62 qux
> 78 qux

这些是根据第一列排序的。

我想要做的是处理以 34 开头的行，但我也希望文件迭代在它不再找到 34s 后退出，而不必扫描整个文件。我该怎么做？

原因是因为要处理的行数非常大（~10^7）。而那些以 34 开头的只占其中的 1-10% 左右。

我知道我可以 grep 这些行并将其输出到另一个文件中，但这太乏味并且会消耗更多磁盘空间。

此代码说明了我使用“继续”的失败尝试：

```
#include <iostream>
#include <vector>
#include <fstream>       
#include <sstream>       
using namespace std;     

int main () {
    string line;
    ifstream myfile ("mydata.txt");
    vector<vector<string> > dataTable;
    if (myfile.is_open())
    {
        while (! myfile.eof() )   
        {
                stringstream ss(line);    
                int FirstCol;
                string SecondCol;

                if (FirstCol != 34) {
                   continue;
                }

                // This will skip those other than 34
                // but will still iterate through all the file
                // until the end.

                // Some processing to FirstCol and SecondCol

                ss >> FirstCol >> SecondCol;
                cout << FirstCol << "\t << SecondCol << endl;   

        }
        myfile.close();
    }

    else cout << "Unable to open file"; 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T13:58:53.233

使用`break`代替`continue`！`continue`返回到循环的头部，只跳过当前的迭代，而`break`永远离开循环。

在不相关的说明中，如果由于任何原因无法读取文件，您的代码有一个错误会导致它挂起（例如，用户在您的程序尝试访问它时将其删除，用户删除了文件所在的 USB 记忆棒， ETC。）。这是因为一个循环条件，例如：

```
while (!file.eof()) 
```

很**危险**！如果文件流进入错误状态，`eof`则永远不会`true`，并且循环将继续进行...... 您需要测试文件是否处于*任何*可读状态。这可以通过使用隐式转换为布尔值来简单地完成：

```
while (file) 
```

只要文件未完成读取**并且**没有错误，这将导致循环运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:04:30.240

假设文件中的数据按第一列排序（正如我在您的示例中注意到的那样），您应该替换 if 语句

```
if (FirstCol != 34) 
{
    continue;
} 
```

有类似的东西：

```
if (FirstCol > 34) 
{
    break;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:19:58.800

基于文件按 FirstCol 排序的假设，使用状态变量指示您是否找到第一个文件。找到第一个后，只要找到 != 34 的列，就可以跳出循环。

例如，假设您的数据现在是：

```
15 boo
32 not
34 foo
34 bar
34 qux
62 foo1
62 qux
78 qux 
```

...此代码将执行您想要的操作：

```
#include "stdafx.h"
#include <iostream>
#include <vector>
#include <fstream>       
#include <sstream>       
using namespace std;     

int main () {
    string line;
    ifstream myfile ("mydata.txt");
    vector<vector<string> > dataTable;
    if (myfile.is_open())
    {
        bool found34 = false;

        while ( myfile )   
        {
                stringstream ss(line);    
                int FirstCol;
                string SecondCol;
               // This will skip those other than 34
                // but will still iterate through all the file
                // until the end.

                // Some processing to FirstCol and SecondCol

                myfile >> FirstCol >> SecondCol;
                cout << FirstCol << "\t" << SecondCol << endl;   

                switch( FirstCol )
                {
                case 34 :
                    found34 = true;
                    cout << "Processing a 34";
                    continue;   // keep looping
                default :
                    if( found34 )
                    {
                        // we found all the 34's and now we're on to the next value, so we're done
                        cout << "We're done.";
                        break;
                    }
                    else
                    {
                        // we haven't found the first 34 yet, so keep scanning until we do
                        cout << "Keep on looking for a 34...";
                        continue;
                    }
                }
        }
        myfile.close();
    }

    else cout << "Unable to open file"; 

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:23:49.663

假设 line 应该包含输入，那么将一些内容读入其中是个好主意！改变：

```
 while (! myfile.eof() ) 
```

到：

```
 while ( getline( myfile, line ) ) 
```

# embedded - 在 x86 嵌入式设备上安装 Windows CE

> ID：705612
> 
> 赞同：3
> 
> 时间：2009-04-01T13:57:32.300
> 
> 标签：embedded, windows-ce

在嵌入式设备（如[eBox4300](http://www.embeddedpc.net/eBox4300/tabid/190/Default.aspx) ）上安装 Windows CE 的一般程序是什么？在 Windows 中是否有等效的 PXE 引导，以便我可以通过网络引导设备，然后在其上安装 Windows CE？

我已经广泛搜索，我唯一收集到的是有一个 dos 引导加载程序，如果存在（预加载）将使我能够做到这一点。但由于闪存盘已格式化，这是不可能的。而且我无法使用此引导加载程序。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-03T18:59:10.247

好吧，我最终确实想出了如何做到这一点。我遵循的步骤如下：

1.  [使用HP Drive Key Boot Utility](http://h20000.www2.hp.com/bizsupport/TechSupport/SoftwareDescription.jsp?lang=en&cc=us&swItem=MTX-UNITY-I23839&jumpid=reg_R1002_USEN)制作可引导的 USB 驱动器（通过[bootdisk.com](http://www.bootdisk.com/pendrive.htm)方法 2）
2.  格式化设备中的闪存盘。
3.  [使用MBRTool](http://www.diydatarecovery.nl/mbrtool.htm)使设备中的闪存盘可启动（如果您在磁盘上安装了 GRUB，则必须这样做。需要覆盖 MBR）
4.  从 Win CE 安装文件夹，从`drive:\<path to wince installation>\PLATFORM\CEPC\SRC\BOOTLOADER\DOS\BOOTDISK`复制所有文件并将其粘贴到设备中的闪存盘中（这些文件始终与 Win CE 安装一起提供）
5.  将您构建的 Win CE -`EBOOT.BIN`放入设备的闪存盘中（这将是您自定义的 Win CE 映像）
6.  移除 USB 驱动器，然后启动设备。您的新版本的 Win CE 应该会启动。

# jquery - 在 JQuery 中将一个 CSS 属性设置为另一个 CSS 属性的值？

> ID：705613
> 
> 赞同：0
> 
> 时间：2009-04-01T13:57:37.107
> 
> 标签：jquery

例如，要从左侧为框设置动画，我可以将“left”设置为“width”的负值，并将其动画为零：

```
 $('.box').each(function(){
      $(this)
           .css('left', $(this).width()*-1 )
           .animate({'left':0},1000)
           ;
 }); 
```

有没有办法在没有每个功能的情况下做到这一点？这个 JQUERY 太冗长了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:08:27.627

我不确定为什么首先需要添加“每个”，因为大多数 jQuery 函数同时处理多个元素。这应该有效：

```
 $('.box').css('left', $(this).width()*-1 ).animate({'left':0},1000); 
```

编辑：代码不像评论中提到的那样工作，因为 $(this) 没有引用正确的对象。这应该解决它：

```
 var $box = $box.css('left', $box.width()*-1 ).animate({'left':0},1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:02:29.340

将 放在`function`它自己的函数中，称为`animateBox()`. 然后你可以这样做：

```
$('.box').each(animateBox); 
```

# asp.net - ASP.NET 使用 PageMethods 在回发之间保留 label.text 值的最佳方法

> ID：705615
> 
> 赞同：4
> 
> 时间：2009-04-01T13:57:53.737
> 
> 标签：asp.net, ajax, viewstate, pagemethods

ASP.NET 2.0，页面方法。

再会，

我正在使用 ASP.NET AJAX PageMethods 在我的页面上更改下拉列表时动态更改标签的文本。

我知道标签的文本在客户端更改时不会在回发之间保留，这是我的情况。我听说一种解决方案是将标签内容保留在隐藏字段中，然后在 Page_Load 中从该字段设置标签文本。

但是，这个解决方案对我来说似乎并不干净。是否有任何其他替代方案或最佳实践？

谢谢！

* * *

澄清一下，我有一个人名下拉列表。当下拉列表更改时，我想在标签中放置那个人的电话。但是，我认为进行完整的回发并不是最好的选择，所以我决定使用 PageMethod 获取电话，传递在下拉列表中选择的项目的 Id 以检索电话，并将其放入标签中。

但是，由于其他控件会导致完整的回发，因此我在每次回发时都会丢失电话。我知道将它放在隐藏字段中，然后在有完整回发时将其设置回 Page_Load 中的标签会起作用，但如果有其他解决方案，我会措辞。由于 WebMethods 被标记为静态，我不能写 Label.text = person.Telephone; 在他们中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T17:24:39.090

由于您似乎有 ajax，您可以只进行部分回发，将数字写入标签并写入视图状态，然后在 page_load 中将视图状态中的值写入标签。

在 DropDownList 事件处理程序中：

```
string phone = <.. get phone number ...>;
myLabel.Text = phone;
ViewState["currentPhone"] = phone; 
```

在 PageLoad 上：

```
myLabel.Text = (ViewState["currentPhone"] != null) ? (string)ViewState["currentPhone"] : string.Empty; 
```

如果您不想使用 Ajax，您可以在您的 aspx 文件中定义一个 HiddenInputField，用 javascript 填充内容，然后在回发时用内容填充标签。在 aspx 上：

```
<asp:HiddenInputField runat="server" ID="myHiddenInput" /> 
```

在页面加载上：

```
myLabel.Text = myHiddenInput.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T16:55:37.880

我建议坚持使用隐藏字段解决方案，这样您就可以将逻辑保存在一个地方。

另一种方法是使用更新面板而不是页面方法，但我不会这样做，因为这对性能不利。

正如其他人所说，第三种选择是在服务器端运行相同的逻辑，只要下拉选择的值发生变化。唯一的重复就是调用您已有的相应代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T14:03:29.573

如果标签值由下拉列表的值确定，您始终可以在服务器上复制该逻辑。

如果该逻辑太复杂，或者您不想在多个地方维护它，那么下一个最佳选择就是您建议的。我不确定您为什么认为这不是一个干净的解决方案，这是从客户端获取信息到服务器的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T15:37:40.783

您是否考虑过将代码放入 Page_Load 以确保标签反映基于下拉列表值所需的值？这样，在每次回发时，您至少可以确保获得正确的值，并且您不必担心将其存储在 2 个位置。

# tfs - 在 TFS 2008 上运行自动化测试

> ID：705616
> 
> 赞同：3
> 
> 时间：2009-04-01T13:58:05.093
> 
> 标签：tfs, msbuild, build-automation, automated-tests

我们已将 TFS 设置为在我们签入时自动构建，效果很好。

我们的问题是如何让单元测试在服务器上运行？

1.  我们如何在构建服务器上运行测试？
2.  我们如何在服务器上自动运行 SQL 脚本来构建测试数据库？
3.  我们是否需要在 Build Server 上安装 Visual Studio？
4.  我们是否需要客户端上的 Visual Studio 测试版？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-05-02T20:53:55.580

打开您的 TeamBuildType 文件 (TFSBuild.proj)。在那里，您会看到如下评论...

```
<!--  TEST ARGUMENTS
 If the RunTest property is set to true then the following test arguments will be used to run 
 tests. Tests can be run by specifying one or more test lists and/or one or more test containers.

 To run tests using test lists, add MetaDataFile items and associated TestLists here.  Paths can 
 be server paths or local paths, but server paths relative to the location of this file are highly 
 recommended:

    <MetaDataFile Include="$(BuildProjectFolderPath)/HelloWorld/HelloWorld.vsmdi">
        <TestList>BVT1;BVT2</TestList>
    </MetaDataFile>

 To run tests using test containers, add TestContainer items here:

    <TestContainer Include="$(OutDir)\HelloWorldTests.dll" />
    <TestContainer Include="$(SolutionRoot)\TestProject\WebTest1.webtest" />
    <TestContainer Include="$(SolutionRoot)\TestProject\LoadTest1.loadtest" />

 Use %2a instead of * and %3f instead of ? to prevent expansion before test assemblies are built
--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-03T13:00:12.820

如果要运行 NUnit-Tests，则必须设置一个 MSBuild-Task，将其包含在 Build-.proj 文件中。如果要运行 VS 集成测试，默认构建脚本中有预配置的任务。示例在您生成的 Build-.proj-File 中（已注释掉）。

您通常可以在构建中运行您想要的任何内容。只需创建 MSBuild-Tasks 并将它们集成到现有的构建脚本中，该脚本已经可以在多个位置进行扩展。描述所有的 MSBuild 太多了，无法在这里回答。请参阅有关 MSBuild 的各种 Web 源。

您需要安装在 Build-Machine 上运行测试所需的一切。NUnit for NUnit-Tests，VS Test Edition for Loadtests 和 Webtests，等等。

Build-Server 对您在任何客户端上安装的内容不感兴趣。

# c# - 用于测试 C# 代码的软件

> ID：705620
> 
> 赞同：4
> 
> 时间：2009-04-01T13:58:29.350
> 
> 标签：c#, automated-tests, code-analysis

考虑到我有一个 C# 代码，我需要一些工具来分析我的代码并报告错误和漏洞。是否有任何开源工具，例如 klocwork.？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T14:02:40.277

[FxCop](http://msdn.microsoft.com/en-us/library/bb429476.aspx)可以对已编译的程序集执行静态分析，[ReSharper](http://www.jetbrains.com/resharper/)可以在源代码级别分析您的程序。Visual Studio 的某些版本中内置了代码分析。

作为旁注：加快[单元测试](http://en.wikipedia.org/wiki/Unit_test)的速度（想想[NUnit](http://www.nunit.org/)等人）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:01:24.693

fxcop 将是我的第一选择

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:01:53.257

是的，编写单元测试并使用 NUnit 来运行它们。如果您正在寻找静态分析之类的东西，您应该使用 FxCop 之类的东西。您不会找到可以自动为您识别错误的软件，但是通过单元测试和静态分析，您可以非常接近。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:02:08.017

我用宪兵

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T14:02:20.277

[PEX](http://research.microsoft.com/en-us/projects/Pex/)可能是一个好的开始——它会尝试蛮力进入每个代码分支；但最终，只有您知道它的用途。您应该随时编写单元测试，可能使用[NUnit](http://www.nunit.org/)和[TestDriven.NET](http://www.testdriven.net/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T14:02:16.143

FxCop 是 Microsoft 提供的静态分析框架，适用于已编译的程序集，因此适用于任何 .Net 语言

[http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx](http://msdn.microsoft.com/en-us/library/bb429476(VS.80).aspx)

如果您正在寻找严格的代码分析，您可能想尝试 Style Cop。不过，这更多的是为了确保一致性。

[http://code.msdn.microsoft.com/sourceanalysis](http://code.msdn.microsoft.com/sourceanalysis)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T14:10:28.167

除了已经提到的 FxCop 之外，我还会添加[StyleCop](http://code.msdn.microsoft.com/sourceanalysis)来检查代码是否符合编码准则。接下来会有像 NUnit 或我个人最喜欢的 MbUnit 或 Pex 这样的单元测试工具，最后是一些确保您正确处理所有异常的工具 - 再次是[Pex](http://research.microsoft.com/en-us/projects/Pex/)或[Exception Hunter](http://www.red-gate.com/products/Exception_Hunter/index.htm)。

# linux - 最近创建的随后删除的文件的块是否会被写回光盘？

> ID：705628
> 
> 赞同：1
> 
> 时间：2009-04-01T13:59:59.207
> 
> 标签：linux, file-io, filesystems

假设我有一个进程创建一个文件，向其中写入一些数据，然后经过一小段处理（通过它自己或另一个进程），删除它并关闭所有剩余的文件描述符。

我在这里假设有足够的内存将页面保存在内存中，直到文件被删除，并且没有人在此期间调用 sync()。

现在删除的文件的块是否会被写回磁盘，还是会立即从脏列表中删除？

还是它取决于文件系统？像 xfs 和 ext4 这样的文件系统有“延迟分配”，如果它被实现的话，它可能支持这个特性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:03:57.200

在经典的 Unix 文件系统中，答案将是“否”（即，创建和删除文件的数据不一定会进入磁盘），尽管某些目录元数据（修改时间）可能仍然改变。因此，发生的情况部分取决于使用的文件系统。

请注意，即使调用`sync()`也不能保证它们被写入；它只安排将数据写回磁盘。因此，在关闭系统之前输入命令两次的古老禁令`sync`- 这样做给了计算机足够的时间来完成写入，因为它可以比您输入`sync`两次更快地写入磁盘（特别是如果您碰巧使用真正的 Teletype 110 波特）。

* * *

POSIX 标准说（命令`sync()`使用的函数`sync`）：

> sync() 函数将导致内存中更新文件系统的所有信息被安排写入所有文件系统。
> 
> 写入虽然已安排好，但在从 sync() 返回时不一定完成。

如果 Linux 已更改其定义以确保“所有数据都写入磁盘”，那么这是一个有效且有用的扩展。但这不是典型的行为——并且要小心将 Linux 专业知识转化为其他系统。

还有其他函数，例如 fsync()，提供不同的、更严格的承诺：

> fsync() 函数应请求将 fildes 命名的打开文件描述符的所有数据传输到与 fildes 描述的文件关联的存储设备。传输的性质是实现定义的。在系统完成该操作或检测到错误之前，fsync() 函数不应返回。

还有一些文件描述符选项可以再次提供其他承诺：O_SYNC、O_DSYNC、O_RSYNC。`open()`在 POSIX 标准 ( )中查找它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-13T15:14:30.063

我同意 Jonathan Leffler 的观点，但不仅适用于经典的 Unix 文件系统：关于 ext4 文件系统，已经有一个类似主题的讨论。

Theodore Ts'o（ext4 文件系统的主要开发者之一）在[评论](https://bugs.edge.launchpad.net/ubuntu/+source/linux/+bug/317781/comments/45)中说：``...例如，如果您创建一个临时文件，然后在 20 秒后将其删除，它可能永远不会命中磁盘。''

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-09-13T12:23:53.697

我对此做了一些研究，发现在 Linux 下，它确实依赖于文件系统。

ext3 似乎总是回写已删除的文件，无论它们多小或多快被删除。XFS 并不总是这样做，如果您有足够的内存，这可以为使用短期临时文件的应用程序带来更好的性能。

我怀疑“现代”Linux 文件系统（ext4、btrfs）也会这样做。那是一件好事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-09-13T12:59:54.653

你真的需要知道什么，在这里？

如果问题是“它可能会被写入磁盘吗？” 答案是否定的，如果您的处理很简短，但没有承诺。

如果问题是“我可以确定它不会被写入磁盘吗？” 答案是否定的。已删除的文件与其他文件一样，只要它保持打开状态即可；它只是一个没有名称的文件（链接）。

如果答案是“就磁盘而言它是完全免费的吗？” 答案再次是否定的——例如，我很确定在具有配额的系统上，文件中的“块”数量将在您写入用户的文件系统配额后立即计入它们。

# php - 您应该在 HTML 表单文本字段中检查什么？

> ID：705636
> 
> 赞同：0
> 
> 时间：2009-04-01T14:01:44.507
> 
> 标签：php, html, security, forms

我正在编写一个 PHP 脚本来从提交的表单中获取文本框数据。这些是简单的文本框，我不想接受任何 HTML 标记。我想我至少应该使用strip_tags() 和addslashes()。还要别的吗？我不介意将输入限制为字母数字，我应该使用正则表达式来查找非标准字符吗？

这是一个简单的表格，实际上（呃）通过电子邮件发送给处理它的人。（遗憾的是，没有数据库。）它是简单的数据，名字和姓氏之类的东西。

编辑：我也想具体知道我应该寻找什么。合理输入过滤的共识是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T14:04:16.403

使用[PHP 过滤器函数](http://au.php.net/filter)。

您可以使用它们来清理输入和验证输入（例如电子邮件地址）。

有两种验证方法（这也适用于安全性和许多其他事情）。

首先，您可以默认允许除明确禁止的内容之外的任何内容。或者，您可以默认禁止除特别允许的内容之外的所有内容。

一般来说，后一种方法更安全，应该使用，除非你有令人信服的理由不这样做（例如，很难知道什么是允许的，你正在为不被认为是安全威胁等）。

但是，您必须小心使用它。对于人名，' 和 - 等字符完全有效，但幼稚的实现可能会限制它们。您通常要避免的是：

*   SQL 注入：**始终**在任何输入上使用[mysql_real_escape_string() ；](http://au.php.net/mysql_real_escape_string)
*   XSS（跨站点脚本）：一般来说，您应该从用户输入中去除 HTML 标记。您当然有时必须允许它们（例如富文本编辑器框），但即使在这些情况下，您也会有一个您允许的标签列表，您应该删除所有其他标签（尤其是标签）；和
*   通常你应该去掉低字符（低于 ASCII 20？左右）；和
*   根据您的国际化要求，您可能希望去除高字符（高于 ASCII 127）。

一个好的默认值是：

```
$var = filter_var($var, FILTER_SANITIZE_STRING); 
```

但要根据情况选择正确的过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:20:52.090

这是一个非常常见的问题，有很多不那么明确的答案。在某些设置中，像 addlashes() 这样的函数实际上弊大于利。处理用户输入时要遵循的一些基本规则是不要信任任何内容，如果它不是您期望的格式，请不要尝试修复它只会引发错误。

如果您只需要字母数字，那么一个简单的正则表达式将处理它，但更多的信息会有所帮助。

你打算用这些数据做什么？您当前（或计划）如何处理输入，例如，用户提交表单，您处理表单并将数据存储在数据库中以供以后显示（如评论引擎）。

编辑：如果它像通过电子邮件发送文本框供人类处理一样简单。我最担心的是 XSS 和 smtp 标头注入（取决于电子邮件的发送方式）。尝试使用最简单的解决方案，如果您现在只需要接收字母数字数据，请使用正则表达式并且只接受它。另一种解决方案是使用带有 ENT_QUOTES 的 htmlentities。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T15:02:16.343

> 我不想接受任何 HTML 标签。我想我至少应该使用 strip_tags()

也许吧，但如果你想让人们输入 '<'/'>' 字符，这些字符只表示小于和大于，并且与标签没有任何关系。

在输入自由文本字段时，您不会真的想过滤掉比非换行符控制字符（您通常不希望在任何地方）更多的内容，并且，如果您使用的是 UTF-8，则无效/冗余序列.

然后，当您将值输出回页面时，您当然会记得使用 htmlspecialchars() 以便 '<' 被转义到 '<' 并显示为文字 '<' 在屏幕上，对吧？每当您将文本值输出到模板中的 HTML 时，您都需要使用 htmlspecialchars()，无论该字符串来自表单提交、数据库还是其他地方。

对于您希望所有输入都匹配特定受限格式的非自由文本字段，是的，正则表达式可能是匹配它的好方法。

> 和添加斜杠（）。

addlashes() 几乎总是错误的。一个好的经验法则是：不要使用它。

addlashes() 不足以进行 SQL 转义，因为它与实际的 SQL 字符串文字转义格式不匹配，因此您可以构造在添加斜杠时仍然很危险的字符串。当你使用 MySQL 时，你应该使用 mysql_real_escape_string() 代替。其他数据库有自己特殊的转义功能。使用它们（或者更简单，使用参数化查询，这样您就不必手动将文本转义为 SQL）。

（addslashes() 不适合 HTML 转义，因为它根本不尝试对 HTML 特殊字符做任何事情。这不是它的用途。）

无论如何，试图在输入过滤阶段处理输出转义是倒退的。相反，将应用程序内部的所有字符串保留为纯文本，并在离开应用程序时对其进行转义：mysql_real_escape_string 当他们出去参加 SQL 查询时，htmlspecialchars() 当他们要去输出到 HTML 页面，等等。

# c# - 从模板创建 PowerPoint 2007 演示文稿

> ID：705641
> 
> 赞同：5
> 
> 时间：2009-04-01T14:02:14.443
> 
> 标签：c#, .net, powerpoint, openxml, presentationml

我需要使用[Open XML Format SDK 2.0](http://www.microsoft.com/downloads/details.aspx?familyid=C6E744E5-36E9-45F5-8D8C-331DF206E0D0)从模板创建 PowerPoint 2007 演示文稿。模板必须由客户提供，用于单独的布局样式（字体、背景颜色或图像……）。它需要包含两个预定义的幻灯片：

*   文字幻灯片
*   图片幻灯片

应用程序现在应该创建模板文件的副本，创建文本和图像幻灯片的多个副本，并用一些内容替换内容占位符。

我已经[从 Microsoft 找到了一些代码片段](http://www.microsoft.com/downloads/details.aspx?familyid=8d46c01f-e3f6-4069-869d-90b8b096b556)来编辑幻灯片的标题、删除它们或替换幻灯片上的图像。但我不知道如何创建现有幻灯片的副本。也许有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-07-21T18:41:30.257

我一直在寻找类似的答案，并找到了一些可以分享的资源：

[http://msdn.microsoft.com/en-us/library/cc850834(office.14).aspx](http://msdn.microsoft.com/en-us/library/cc850834(office.14).aspx "在 PowerPoint 演示文稿中插入新幻灯片")

或更多样品

[http://msdn.microsoft.com/en-us/library/cc850828(office.14).aspx](http://msdn.microsoft.com/en-us/library/cc850828(office.14).aspx "更多样品")

或者这个网站

[http://www.openxmldeveloper.com](http://www.openxmldeveloper.com "打开 XML 开发人员")

还有这本[免费的书记录了 OpenXML 标准](http://openxmldeveloper.org/attachment/1970.ashx "开放 XML 解释")，这有些帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-02-24T02:03:17.917

这是我正在寻找的东西的一个例子，但如果没有，请告诉我： http: [//openxmldeveloper.org/articles/7429.aspx](http://openxmldeveloper.org/articles/7429.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:58:51.097

对于 C#

```
File.Copy(SourceFile,ExportedFile); 
```

您基本上保留原始文件。

现在您打开 ExportedFile

```
PowerPoint.Application ppApp = new PowerPoint.Application();
PowerPoint.Presentation presentation;
presentation = ppApp.Presentations.Open(ExportedFile, MsoTriState.msoFalse,   MsoTriState.msoTrue, MsoTriState.msoTrue); 
```

现在迭代所有幻灯片/形状

```
foreach (PowerPoint.Slide slide in presentation.Slides)
{
                    slide.Select();
                    foreach (PowerPoint.Shape shape in slide.Shapes)
                    {
                        if (shape.Type.ToString().Equals("<any type of shape>"))
                        {
                            if (shape.TextFrame.TextRange.Text.Equals("<contains a name"))
                            {
                                shape.TextFrame.TextRange.Text = <new value>;
                                shape.Delete(); // or delete
                                shape.AddPicture(<your new picture>, MsoTriState.msoTrue, MsoTriState.msoTrue, left, top, width, height);

                            }
                        }
                    } 
```

}

希望这可以澄清您的要求。

# php - php select函数生成奇怪的where子句

> ID：705649
> 
> 赞同：0
> 
> 时间：2009-04-01T14:03:01.697
> 
> 标签：php, select, associative-array

您好我尝试创建一个函数来生成选择函数。

但是下面的代码

```
public function select($psTableName, $paFields ="",$paWhere=array())
{
    //initial return value
    $lbReturn = false;
    try
    {
        $lsQuery = "SELECT * FROM `";
        $lsQuery .= $psTableName;
        $lsQuery .= "` ";
        if (!empty($paWhere)){
                $lsQuery .= "WHERE ";
                print_r($paWhere);
                foreach($paWhere as $lsKey => $lsValue)
                {
                    echo $lsKey."<br>";
                    $paWhere[] = $lsKey." = '".mysql_real_escape_string($lsValue)."'";
                }
                $lsQuery .= implode(" AND ", $paWhere);
                //$lsQuery = substr($lsQuery,0,(strlen($lsQuery)-5));
        }

        //echo $lsQuery;
        //execute $lsQuery
        $this->msLastQuery = $lsQuery;
        if(!$this->execute())
        {
            throw new DBException("Select failed, unable to execute query: ".$lsQuery);
        }
        else
        {
            $lbReturn = true;
        }
    }
    catch(DBException $errorMsg)
    {
        ErrorHandler::handleException($errorMsg);
    }
    return $lbReturn;
} 
```

生成这个 sql 语句：

```
SELECT * FROM `persons` WHERE email@gmail.com AND 2d1cf648ca2f0b2499e62ad7386eccc2 AND 1 AND per_email = 'email@gmail.com' AND per_password = '2d1cf648ca2f0b2499e62ad7386eccc2' AND per_active = '1' 
```

我不知道为什么它首先只显示 where 子句之后的值，然后返回并显示键 => 值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:05:51.283

您在循环中重用`$paWhere`，以便附加到当前值。您需要使用一个新的数组：

```
$result = array();
foreach($paWhere as $lsKey => $lsValue) {
    $result[] = $lsKey . " = '" . mysql_real_escape_string($lsValue) . "'";
}
$lsQuery .= implode(" AND ", $result); 
```

# xslt - xslt 使用 c# 函数并用于超链接

> ID：705652
> 
> 赞同：1
> 
> 时间：2009-04-01T14:03:19.247
> 
> 标签：xslt

我有一些使用 ac# 函数来获取字符串的 xslt，我这样称呼它：

```
<xsl:value-of select="myClass:GetContent('key')" /> 
```

它工作正常。

但我现在需要使用它作为 url 的一部分。

```
<a href="{concat('/',select='myClass:GetContent('key')','/mysite.com')}"> 
```

我不能让它工作......有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T14:05:26.837

像这样（“选择”只是指定查询的方式；使用缩写属性语法（“ `{query}`”）您只需直接指定查询）

```
<a href="{concat('/',myClass:GetContent('key'),'/mysite.com')}"> 
```

或者：

```
<a href="/{myClass:GetContent('key')}/mysite.com"> 
```

# compact-framework - Windows CE 6.0 中的抗锯齿圆角

> ID：705653
> 
> 赞同：2
> 
> 时间：2009-04-01T14:03:22.957
> 
> 标签：compact-framework, windows-ce

我想在运行 Windows CE 6.0 的 ARM 设备上显示一个平滑的圆角矩形。

我从[RoundRect](http://msdn.microsoft.com/en-us/library/aa929212.aspx)开始，但结果有锯齿状的角落，因为 Windows CE 使用 GDI 并且不像Windows Mobile 5+ 那样[支持 GDI+ 。](http://community.opennetcf.com/articles/cf/archive/2007/10/31/using-gdi-on-windows-mobile.aspx)我目前的临时解决方案是创建许多小角位图，但由于 GUI 设计的其余部分包括透明度、渐变填充和可变宽度边框，因此该解决方案意味着创建和管理这些位图的大量排列。

有没有办法在 Windows CE 中获得类似 GDI+ 的图形基元？我可以控制我的 Windows CE 映像，因此我可以根据需要构建任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-03T08:31:51.610

我不知道 CF 对此的支持如此糟糕。真的没有选择将 GDI+ 放到系统上吗？我没有可用的 Platform Builder，所以我无法自己查看。

我使用的解决方案是 OpenVG。如果您的设备在硬件中支持它（就像许多 OpenGL ES 2.0 设备似乎支持的那样），它真的很快，并且有一些软件实现也应该足够快（在桌面上，我使用[AmanithVG SRE](http://www.amanithvg.com/)进行仿真）。不过，我没有在我的 CE 设备上尝试 AmanithVG SRE，我认为您必须联系他们以获取二进制文件（桌面二进制文件可从网站获得）。如果您的设备有一个 PowerVR 芯片（例如 TI OMAP35x 有一个），PowerVR 会提供 OpenVG 硬件渲染器（尽管您仍然需要一个用于桌面）。

OpenVG 有一个丑陋的 API，就像所有的 OpenXX API（也就是说，如果你习惯了 .NET BCL），但它们没问题，而且 OpenVG 很容易转换为 .NET，因为即使它是程序性的，它或多或少是面向对象的，他们将所有常量都变成了枚举而不是定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-21T06:51:13.543

Windows Mobile 6 Professional 包括一个限制版本的 gdiplus.dll。

# append - 追加和覆盖文本文件的开头（Windows）

> ID：705657
> 
> 赞同：1
> 
> 时间：2009-04-01T14:03:58.260
> 
> 标签：append

我有两个文本文件。我想将 file1.txt 的四行内容附加到 file2.txt 的前四行。这必须覆盖 file2.txt 前四行的所有记录，但保留原始内容的其余部分（其他行）。

如何使用批处理或 Windows 提示符来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T14:22:00.307

```
copy file1.txt temp.txt
echo. >> temp.txt
more +5 file2.txt >> temp.txt
move /y temp.txt file2.txt 
```

**编辑**：添加了“echo.>> temp.txt”指令，它应该在 temp.txt 中添加一个换行符，从而允许 file2.txt 的“干净”合并（如果 file1.txt 不以换行符结尾） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:15:55.080

如果你[从 Gnutils 中获取 coreutils，](http://gnuwin32.sourceforge.net/packages/coreutils.htm)你将能够做很多你可以用 Cygwin 做的事情，而无需安装 cygwin。然后你可以使用 head、tail 和 cat 之类的东西，它们可以让你做你想做的事情。

例如

```
head -n 4 file2.txt 
```

获取file2的前四行。

从上面链接的页面中提取 zip，然后从 bin 目录中获取您需要使用的任何实用程序，并将它们放在路径中的目录中 - 例如，对于下面您想要 mv、head 和 tail 的目录。您可以使用内置的 DOS 移动命令，但您需要稍微更改选项。

这个问题有点不清楚，但是如果您要删除 file2.txt 的前四行并将它们附加到 file1.txt 中，您可以执行以下操作：

```
head -n 4 file2.txt >> file1.txt
tail -n +5 file2.txt >> temp.txt
mv temp.txt file2.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:05:46.713

除非两个文件开头的四行占用完全相同的空间，否则你不能不重写整个文件。

您不能在任意点向文件中插入或删除数据 - 您可以覆盖现有数据（逐个字节）、截断文件或追加到末尾，但不能删除或插入到中间。

所以基本上你需要：

*   启动一个由前四行 file1.txt 组成的新文件
*   跳过 file2.txt 的前四行
*   将 file1.txt 的其余部分附加到新的 file2.txt

您可以使用来自 Unix 的 head/tail 命令相当容易地做到这一点，如果这是一个可接受的解决方案，您可以从[Cygwin获得。](http://www.cygwin.com/)[Windows Services for Unix](http://technet.microsoft.com/en-gb/interopmigration/bb380242.aspx)的 head/tail 很可能也可以工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:08:30.387

仅使用批处理，我不确定您是否可以做到。

使用 Unix 命令，您可以 -- 并且可以在 Windows 下使用[Cygwin](http://www.cygwin.com/)轻松使用 Unix 命令。

在这种情况下，您想要：

```
#!/bin/bash
head -n 4 file1.txt > result.txt   # first 4 lines of file1
tail -n +5 file2.txt >> result.txt # append lines 5, 6, 7... of file2
mv result.txt file2.txt    # replace file2.txt with the result 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T14:09:25.737

如果你用 Windows 批处理以外的东西编写脚本，你可以做到这一点。带有windows脚本主机的vbscript或jscript应该可以做到。它们中的每一个都有一种方法来从一个文件中获取行并覆盖另一个文件的行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T14:09:34.113

您可以通过创建一个临时的第三个文件来做到这一点，从第一个文件中提取行并将它们添加到临时文件中，然后读取第二个文件，并在读取四个回车/换行对后，将其余部分写入临时文件. 然后，删除第二个文件并将临时文件重命名为第二个文件名。

# virtual-machine - 像 LLVM 或 PARROT 这样的 VM 是否允许使用来自多种语言的同一个库？

> ID：705659
> 
> 赞同：5
> 
> 时间：2009-04-01T14:04:14.703
> 
> 标签：virtual-machine, llvm, parrot

是否可以在任何其他 Parrot (LLVM) 语言中使用以一种 Parrot (LLVM) 语言编写的框架？（就像在任何 CLR 语言中使用 .NET Framework）...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-08T06:26:44.347

Parrot 和 LLVM 是两个不同的组织制作的两个不同的东西。

Parrot 是一个 VM，LLVM 是一个也可以静态编译的 VM。

**编辑**

假设对我的回答的评论是正确的：

1.  LLVM 允许您调用其他 LLVM 代码以及外部 C 类库​​。
2.  Parrot 允许您调用其他 Parrot 代码，但不能调用外部 C 类库​​。

[http://en.wikipedia.org/wiki/Comparison_of_application_virtual_machines](http://en.wikipedia.org/wiki/Comparison_of_application_virtual_machines)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-12-22T22:31:41.640

**LLVM**

代表低级虚拟机。它使用易于映射到本机机器代码的低级操作码。

*   语言：Fortran、C、C++
*   应用：系统编程、编译器开发

**鹦鹉**：

这是一个高级虚拟机。它的操作码比大多数虚拟机中的操作码要高得多。这允许 Parrot 为动态语言生成高效的本机代码。

*   语言：Ruby、Perl、PHP
*   应用程序：服务器端脚本

# php - 使用 PHP 接收电子邮件时，如何更新表格以包含电子邮件？

> ID：705664
> 
> 赞同：1
> 
> 时间：2009-04-01T14:04:54.467
> 
> 标签：php, email

我正在尝试使用 PHP 从 PHP 发送电子邮件`PHPmailer()`。
我已包含以下语法以在表格中显示内容。
我需要更新表格以在收到电子邮件时显示电子邮件。
我怎样才能做到这一点？

```
 $message ="<html><body> <table><tr><td>HELLO</td></tr></table></body></html>";
          $body = eregi_replace("[\]",'',$message);
          $mail             = new PHPMailer();
          $mail->From       = $email;
          $mail->FromName   = $Name;
          $mail->CharSet = "utf-8";
          $mail->Subject    = "GoodNoon:".$Name."";
          $mail->IsHTML(true);
          $mail->AltBody    = "To view the message, please use an HTML compatible email viewer";
          $mail->WordWrap = 50; 
          $mail->MsgHTML($body);
         // send as HTML
          $mail->AddAddress("mail@mail.de", "name");

         if(!$mail->Send()) {
            echo "Emai Not sent: " . $mail->ErrorInfo;
        } 
         else {
           echo "Email Sent";

          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:09:36.750

首先，您可能需要包含一个[body 标签](http://www.w3.org/TR/REC-html40/struct/global.html#h-7.5)。代替：

```
<html><table><tr><td>HELLO</td></tr></table></html> 
```

和

```
<html><body><table><tr><td>HELLO</td></tr></table></body></html> 
```

第二：

*   电子邮件内容如何？
*   你用的是什么电子邮件客户端？
*   是根本没有呈现 HTML，还是只是`<table>`元素？

*旁注：请在提问时尝试提供更多上下文。如果您花时间审查您的问题并确保所有必要的信息都在那里并且没有（或至少，不多）格式错误，您更有可能收到对您的问题的积极和良好的回应。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:20:17.567

问题是，我认为，你错过了内容类型。

我用这个：

```
$headers = "MIME-Version: 1.0rn";
$headers .= "Content-type: text/html; charset=iso-8859-1rn"; // or UTF-8
$headers .= "From: $from\r\n";

mail($to, $subject, $message, $headers); 
```

# c# - 数据集选择不加起来

> ID：705669
> 
> 赞同：1
> 
> 时间：2009-04-01T14:05:31.907
> 
> 标签：c#, select, dataset

我正在对数据集执行多个选择。所有这些选择的总#records 应该与数据集中的记录总数匹配，但不匹配。（所有选择的总数都较少。）我读过.Net 1.1 Select 有一个带有多个AND条件的错误，但这是VS2005和.Net 2.0。

这是代码： 注意：某些行的类别值未填充。

```
string Filter;
Filter = "Category = 'HIGH'";
Response.Write("High: " + dslErrors.Tables[0].Select(Filter).GetLength(0).ToString() + "<br>");

int TotalRecords = dslErrors.Tables[0].Rows.Count; //This is correct

Filter = "Category = 'MEDIUM'";
Response.Write("Medium: " + dslErrors.Tables[0].Select(Filter).GetLength(0).ToString() + "<br>");

Filter = "Category = 'LOW'";
Response.Write("Low Error Count: " + dslErrors.Tables[0].Select(Filter).GetLength(0).ToString() + "<br>");

Filter = "((Category <> 'HIGH') AND (Category <> 'MEDIUM') AND (Category <> 'LOW'))";
Response.Write("Other: " + dslErrors.Tables[0].Select(Filter).GetLength(0).ToString() + "<br>"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-01T14:10:37.370

如果有任何记录`Category`是`dbnull`，那么它们将与您列出的表达式不匹配。

我建议将您的最后一个更改`filter`为：

```
"(
   (
         (Category <> 'HIGH') 
     AND (Category <> 'MEDIUM')
     AND (Category <> 'LOW')
   )
   OR Category IS NULL
)"; 
```

它不起作用的原因是因为与 dbnull 的比较产生 null 而不是预期的 false。

# java - 允许一组字符并禁止其他字符的正则表达式

> ID：705672
> 
> 赞同：3
> 
> 时间：2009-04-01T14:06:09.677
> 
> 标签：java, regex

我想限制用户在字段中输入以下特殊字符：

```
œçşÇŞ
ğĞščřŠŘŇĚŽĎŤČňěž
ůŮ
伊兹
——¿„”*@
新队
回车

```

更多的将添加到此列表中，但我最终将拥有完整的受限列表。

但除了字母数字字符、通常的特殊字符等之外，他还可以输入某些外来字符，例如`äöüÄÖÜÿï`etc。

有没有一种简单的方法来构建一个正则表达式来做到这一点。在不允许的列表中添加这么多字符，例如

```
[^œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı — ¿ „ ” * @]+

```

似乎不起作用。

而且我没有完整的允许字符列表。即使我尝试获取它并且包含所有字符，它也会太长，例如：

```
~`!#$%^&()[]{};':",.

```

以及某些外国字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:09:46.703

您没有提及您正在使用的正则表达式的“风味”。下面的工作吗？

```
\A[^œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı — ¿ „ ” * @]+\z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:10:42.037

可以构建正则表达式来匹配不正确的字符，例如：

```
[œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı] 
```

（我没有包括所有角色；你明白了！）。

如果有任何字符匹配，则失败。

*或者，如果您需要一个匹配有效*输入的正则表达式，只需在括号前面添加一个插入符号，如下所示：

```
[^œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı]* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:11:37.900

您可以为此使用正则表达式，但为什么不使用内置方法检查字符串中是否有任何不允许的字符？例如，在 .NET 世界中，您可以使用 .Contains()。

就个人而言，我会创建一个允许的字符列表，然后检查您的字符串是否没有任何不在列表中的字符。使用白名单将确保您也没有忘记任何“坏”字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T14:19:10.627

> 更多的将添加到此列表中，但我最终将拥有完整的受限列表。
> 
> 而且我没有完整的允许字符列表（即使我尝试获取它也会太长，并且会包括所有字符，如 ~`!#$%^&()[]{};':",. <> 以及某些外国字符）

您最终将获得不允许的字符列表，而可能没有允许的字符列表？**您必须拥有所有允许字符的列表或所有不允许字符的列表。**否则，您无法判断输入是否合法。此外，如果您有其中一个列表，则如果字符集已知，则隐含第二个。然后只需执行较短的那个。

只是猜测，但如果您使用 Unicode，您想要禁止的字符可能比允许的字符多得多 - 想想所有花哨的中国和日本符号。所以我认为你真的应该建立一个允许的字符列表，并在可能的地方使用像**az**这样的范围。

如果你真的想建立不允许的字符列表，你必须建立一个正则表达式，如**[^œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı — ¿ „ ” * @]***。如果需要，不要忘记转义字符并尽可能使用范围。

> 在不允许的列表中添加这么多字符，例如 [^œçşÇŞ ğĞščřŠŘŇĚŽĎŤČňěž ůŮ İ ť ı — ¿ „ ” *@]+ 似乎不起作用。

您的列表中有空格。它们也在你的代码中吗？我不确定，但这可能是个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T14:41:29.123

最好通过否定允许的集合来尝试匹配任何不允许的字符。例如，如果您只想允许 'a' 到 'z'，则可以执行以下操作。

```
[^a-z] 
```

您不可能知道*所有**不允许*的字符，但您大概知道允许的字符。因此，构建一个像上面那样的正则表达式，它只匹配一个不在允许集中的字符。如果你得到一个匹配，你会知道字符串包含一个无效字符。

如果可以，请尝试使用可用的内置字符类转义码。

[在此处为 Perl RE](http://perldoc.perl.org/perlre.html)找到它们，查找“字符类和其他特殊转义”。它可以让你有一个像这样的更短的表达式。

```
[^\w\d  ..other individual chars..  ] 
```

# eclipse - 使用 Eclipse 进行 Windows 身份验证

> ID：705673
> 
> 赞同：1
> 
> 时间：2009-04-01T14:06:29.877
> 
> 标签：eclipse, authentication

我每天都使用 Eclipse 进行软件开发，使用它的人知道你会定期下载插件和更新。我工作的公司安装了 Bluecoat，它阻止了所有更新。但是，Internet Explorer 不会阻止更新 URL。话虽如此，问题似乎是 Eclipse 在从 URL 请求更新时没有使用 Windows 身份验证。有没有办法设置 Eclipse 使其像 IE 一样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:53:00.140

这可以链接到代理而不是 Bluecoat：
如果 IE 确实授权访问更新 URL，它必须通过经过身份验证的代理连接来这样做。

如果您确实有这样的设置（代理名称：端口，用户/密码），您应该在 eclipse 上报告该设置，以便该 eclipse 中的 p2 使用这些相同的设置。

（菜单`Preferences : General / Network Connections`）

# c - 包含头文件是如何发生的？

> ID：705676
> 
> 赞同：0
> 
> 时间：2009-04-01T14:07:16.647
> 
> 标签：c, recursion, include, header-files

我在工作区中有一个带有 *.c 和 *.h 文件的纯 C 代码。
我有一个头文件 1.h 声明一些结构为

```
struct my1
{ 
int a;
..
..
}my_t; 
```

但是当我尝试在另一个头文件 2.h 中声明类型为 struct my1 的变量时，如下所示： -

```
struct my1 variable1; 
```

它在此声明点给出错误。

看起来 my1 在 2.h 文件中未定义。

在文件 1.h 中我需要包含 2.h，所以在文件 2.h 中我不能包含 1.h，因为担心递归包含。

我的问题是：-

1.  在这种情况下，我需要声明什么来解决编译错误？

    这整件事让我想到了有关头文件包含的更多问题。

2.  头文件是如何包含的，按什么顺序，先是哪个头文件，然后是哪个头文件？

3.  头文件的递归包含会导致错误一个文件包括其他和其他包括第一个？

出于某种安全原因，无法发布实际的代码片段，如果问题在某种程度上造成了一些可读性问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T14:14:20.530

您应该首先在所有 .h 文件中放置一个包含锁（这称为[包含保护](http://en.wikipedia.org/wiki/Include_guard)）：

```
#ifndef ONE_H
#define ONE_H

//rest of header

#endif //ONE_H 
```

这样你就可以多次包含它。

第二：

```
typedef struct my1 { int a; .. .. }my_t; 
```

您需要 C 中的 typedef（而不是 C++）

标题按包含顺序包含在内。

如果你编译一个文件 abc.c，它的开头是：

```
#include "a.h"
#include "b.h" 
```

那么 ah 将首先被包括在内，然后是 bh

你可以这么想，就好像你把代码粘贴到文件里一样。它包含在这一点上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T15:00:37.937

就像前面的人说的那样。

我只想补充一点，有时即使#ifdef 也无济于事。

```
//file1.h
#ifndef F1
#define F1

#include "file2.h"

struct file1st {
  struct file2st *ptr;
};

#endif

//file2.h

#ifndef F2
#define F2

#include "file1.h"

struct file2st {
   struct file1st *ptr;
};

#endif

//main.c

#include "file1.h"
#include "file2.h"

/*
This will give you an error of **struct file1st not defined**
Let's see why: 

1) file1.h is included
2) file1.h includes file2.h before it declares anything
3) the definition of struct file2st occurs and it uses struct file1st which isn't declared yet
*/

int main(int argc, char* argv[]){
  struct file1st st1;
  struct file2st st2;

  return 0;
} 
```

解决这个问题的方法是：

```
//file1.h
    #ifndef F1
    #define F1

    struct file2st;//just declare, it will be defined later. 

    struct file1st {
      struct file2st *ptr; // ok, compiler KNOWS the size of struct file2st*(pointer)
      struct file2st file2Var;// NOT ok, compiler doesn't know sizeof(struct file2st)
    };

    #endif

    //file2.h

    #ifndef F2
    #define F2

    #include "file1.h"

    struct file2st {
       struct file1st *ptr;
    };

    #endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:20:53.307

头文件按*包含*指令的顺序包含。一旦编译器看到*包含*指令，它就会打开要包含的文件并将其所有内容插入到包含文件中。

如果包含的文件内部有*包含*指令，则对它们执行相同的操作。这个过程一直持续到所有的*包含*指令都被处理完。

之后才开始编译。

这就是为什么如果任何文件被多次包含（A 包含 B 和 C；例如 B 和 C 都包含 D），您会经常看到编译器抱怨重新定义。要解决此问题，请添加*包含锁*（也称为*include guards*）- *ifdef*指令。

```
//file Header1
#ifndef Header1Guard
   #define Header1Guard
// all the header text here
#endif 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:24:10.320

我赞成守卫的建议。

我虔诚地使用以下标题模板：

```
#ifndef HELLOWORLD_H_
#define HELLOWORLD_H_

// Header stuff here.

#endif // HELLOWORLD_H_ 
```

当编译器看到#include 时，它​​只是用头文件的内容替换该行（减去头文件中任何已处理的指令）。因此，这意味着您可以在任意数量的地方包含文件，而不会冒递归包含的风险。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-01T14:49:08.777

每个头文件都包含在每个翻译单元（源文件）中，其中有一个包含指令。这是有意的，并且即使使用包含保护也会发生 - 每个使用您的结构的翻译单元都需要知道该结构是如何定义的，以便它可以在您的应用程序的所有翻译单元中以相同的方式布局在内存中。包含保护只是防止它被多次包含*在一个翻译单元中*. 包含文件将按照您将它们包含在该翻译单元中的顺序包含在内（如果包含文件包含其他文件......正如其他人所说，它们将被递归包含）。编译的翻译单元的顺序由您（或您的 IDE）指定给编译器。然而，这个顺序是什么并不重要，因为每个翻译单元都是完全独立的，直到它进入构建过程的链接阶段。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T14:11:13.347

自从我使用 C 以来已经有一段时间了，但我认为你想要做的是向前定义 my1。

在 2.h 中，尝试将其放在顶部附近：

```
struct my1; 
```

抱歉，我无法回答你的另外两个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-01T14:14:53.320

```
// Header1.h
typedef struct tagHeader1
{
} Header1;

// Header2.h

struct Header1;

// Header2.c

#include "Header1.h" 
```

注意：这仅适用于指针（在 c++ 中，引用）。如果您有对完整对象的引用，编译器将需要知道它。

# java - ASP.NET/IIS 等效于 Java/WAS 上下文根

> ID：705680
> 
> 赞同：2
> 
> 时间：2009-04-01T14:07:33.633
> 
> 标签：java, asp.net, iis

在 WebSphere Application Server 上的 Java 中，如果我希望我的 servlet 等以某个根路径开始，我使用 EAR 部署描述符 (application.xml) 中的 context-root 属性。例如，我的 servlet 名为 GetData，但我希望 URL 为 www.mysite.com/secure/restricted/GetData，因此我将 context-root 设置为 secure/restricted。

如何在 IIS 上的 ASP.NET 中执行此操作？是应用程序的某种配置设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T16:48:44.463

一种选择是 URL 重写 - [http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx)

另一方面，如果您将动态 asp.net 站点与其他内容分开，则可以添加文件夹 secure/ 并通过 IIS 管理器在其中配置以指向您的 asp.net 站点（无论在哪里你有它存储）。

也就是说，我不知道 WAS 上下文根是否为您提供了额外的东西，用于链接到 asp.net 站点之外的其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T23:17:12.630

在 .Net Core 2.0 中，launchSettings.json 中有一个 applicationUrl 属性：

默认情况下，它将是`"http://localhost:port/GetData" or "http://localhost:port"`

只需将其更改为您的最终 URL：

```
"http://localhost:port/secure/restricted/GetData" 
```

# objective-c - 解析邮件以获取附件

> ID：705685
> 
> 赞同：0
> 
> 时间：2009-04-01T14:09:07.610
> 
> 标签：objective-c, cocoa, email, parsing, mime

如何在 Cocoa 中解析邮件？我已经阅读了 NSScanner 教程，但很挣扎。你知道比 NSScanner 更好的方法吗？有没有示例代码？

我的例子：

[http://pastie.org/private/pordph27stkwkyvrx2tiq](http://pastie.org/private/pordph27stkwkyvrx2tiq)

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:27:32.790

如果您找不到任何可可库来完成您需要完成的工作，您可以随时使用 C++ 或 C 库来完成您的任务。例如[Scaling Web 的 Parser](http://www.scalingweb.com/mime_parser.php)。Apple 有关于如何从 Objective C 中使用 C++ 的[文档](http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html#//apple_ref/doc/uid/TP30001163-CH10-SW1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:28:54.177

我使用[C-Client](http://www.washington.edu/imap/)。它只是 C，有点难以理解，但它完成了工作。

我不会自己编写 MIME 解析器 - 如果您查看正在发挥作用的 RFC，那就需要做很多工作。

# sql-server - 如何获取 varchar 列中数值的 MAX 值

> ID：705687
> 
> 赞同：8
> 
> 时间：2009-04-01T14:09:24.440
> 
> 标签：sql-server, tsql

我有一个带有 nvarchar 列的表。此列的值例如：

*   983
*   294
*   a343
*   a3546f

等等。

我想取这个值的 MAX，但不是文本，而是数字。所以在这个例子中，数字是：

*   983
*   294
*   343
*   3546

MAX 值是最后一个 - 3546。如何在 Microsoft SQL 上的 TSQL 中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T14:14:29.453

首先安装一个正则表达式函数。 [这篇文章](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)有你可以剪切/粘贴的代码。

然后使用 RegexReplace（来自那篇文章），您可以从字符串中提取数字：

```
dbo.RegexReplace( '.*?(\d+).*', myField, '$1' ) 
```

然后将此字符串转换为数字：

```
CAST( dbo.RegexReplace( '.*?(\d+).*', myField, '$1' ) AS INT ) 
```

`MAX()`然后在 a 中的函数内使用此表达式`SELECT`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:13:09.270

CAST() 可能会成功。

```
SELECT MAX(CAST(yourColumn AS int)) AS maxColumns FROM yourTable 
```

编辑。我没有阅读整个问题，因为它似乎......

```
– Function to strip out non-numeric chars
ALTER FUNCTION dbo.UDF_ParseNumericChars
(
  @string VARCHAR(8000)
)
RETURNS VARCHAR(8000)
AS
BEGIN
  DECLARE @IncorrectCharLoc SMALLINT
  –SET @IncorrectCharLoc = PATINDEX(’%[^0-9A-Za-z]%’, @string)
  SET @IncorrectCharLoc = PATINDEX(’%[^0-9.]%’, @string)
  WHILE @IncorrectCharLoc > 0
  BEGIN
    SET @string = STUFF(@string, @IncorrectCharLoc, 1, ”)
    SET @IncorrectCharLoc = PATINDEX(’%[^0-9.]%’, @string)
  END
  SET @string = @string
  RETURN @string
END
GO 
```

[我从这里挑选的。](http://littletalk.wordpress.com/2008/10/10/tsql-function-convert-varchar-to-number/)（虽然我投票赞成 reg exp 答案）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-01T14:54:30.340

您可以尝试保持简单而不使用正则表达式 ![替代文字](https://farm4.static.flickr.com/3452/3403866895_17195c417f_o.png)

这里是源

```
create table #t ( val varchar(100) )
insert #t select 983
insert #t select 294
insert #t select 'a343'
insert #t select 'a3546f';
GO

;with ValueRange as (
    select  val,
        [from] = patindex('%[0-9]%', val), 
        [to] = case patindex('%[a-z]', val) 
            when 0 then len(val) 
            else patindex('%[a-z]', val) - patindex('%[0-9]%', val) 
               end
    from    #t
)
select  substring(val, [from], [to]) as val
from    ValueRange VR
order by cast(substring(val, [from], [to]) as int) desc 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:47:34.647

你可以写一个类似的函数

```
create FUNCTION [dbo].[getFirstNumeric](
    @s VARCHAR(50)
)  
RETURNS int AS 
BEGIN

set @s = substring(@s,patindex('%[0-9]%',@s),len(@s)-patindex('%[0-9]%',@s) + 1) 
if patindex('%[^0-9]%',@s) = 0
    return @s
set @s = substring(@s,1,patindex('%[^0-9]%',@s)-1) 

return cast(@s as int)
end 
```

然后打电话

```
select max(dbo.getFirstNumeric(yourColumn)) from yourTable 
```

如果您使用的是 SQL Server 2005 或从不使用，您也可以使用 Sung Meister 发布的解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T14:12:15.043

据我所知，您需要创建一个进程（或用户定义的函数）来清理列，以便您可以将其实际转换为 INT 或其他适当的数据类型，然后您可以取其最大值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-01T14:14:01.653

通过使用用户定义的函数将值解析为 int，然后运行选择。

```
SELECT MAX(dbo.parseVarcharToInt(column)) FROM table 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-02T11:10:39.683

```
SELECT dbo.RegexReplace('[^0-9]', '','a5453b',1, 1) 
```

和像 Jason Cohen 说的 RegexReplace 安装

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-10T16:57:27.253

这是一个老问题，我知道 - 但要添加到其他人的知识库中......

假设您的所有值中至少有 1 个数字：

```
Select max(convert(int, SubString(VarName, PATINDEX('%[0-9]%',VarName), Len(VarName))))
from ATable 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-21T12:27:43.403

这是我的简单回答。你可以试试看。但它适用于固定的可移动字符串值。

```
select max(cast(SUBSTRING(T.column,3,len(T.column)) as int)) from tablename T 
```

# java - HSQLDB 内部结构：Hibernate 和 Integer 与 Long Id

> ID：705693
> 
> 赞同：4
> 
> 时间：2009-04-01T14:10:26.623
> 
> 标签：java, hibernate, orm, hsqldb

我正在我的 Java 应用程序中创建数据库实体，并尝试在使用 Integer 或 Long 作为“id”字段的类类型之间进行合理化。我使用 Hibernate 作为我的 ORM，反过来，它将将此字段映射到 HSQLDB 数据库中的列。

我的斗争是这样的：一个 Long 显然更大并且将处理更多的条目 - 但是，在非常低的级别上，我知道过去（32 位系统）操作系统级别的读取将是 32 位宽。IE：长读需要两遍……这是正确的想法吗？

如果我今天使用 Long，我的 HSQLDB 查询会比我使用 Integer 运行得慢吗？

IE：HSQLDB 是否必须以某种方式使用多个读取通道……或者使用更大的内部结构……或者附加两个整数大小的列……或者其他明显不理想的东西？或者，今天的 64 位处理在某种程度上是一个有争议的问题 - 应该在一次读取中处理 Long（Long 是 64 位）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T15:29:01.597

使用长。即使使用内存数据库，相对于应用程序的其余部分，性能影响也很可能不会显着。但是，如果您开始用完标识符，稍后再返回并更改应用程序将是一个令人难以置信的麻烦。

# database-design - 整合两个数据集...帮助！

> ID：705699
> 
> 赞同：0
> 
> 时间：2009-04-01T14:11:25.310
> 
> 标签：database-design, continuous-integration

我正在做一些工作以在两个不同的地方集成两个数据库。一个是 Access db，另一个是 SQLServer。集合的大小非常小，比如 350 条记录。这可能非常简单，但是“拥有”数据集的两个人坚持能够向数据库添加新字段。

关于我如何最好地解决这个问题的任何想法？干杯! ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:43:58.040

这是 RDF 的典型代表。不幸的是，这些问题是 1% 的技术问题和 99% 的外交问题。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:59:57.860

我做了一些假设： 1\. 您和您的最终用户都可以使用 Microsoft Access；2\. 当底层列发生变化时，统一视图不需要即时更改，即您愿意并且能够采取某种行动来更新您的视图；3.“加入”列不会改变。

如果所有三个假设都成立，我将创建一个新的 Access 数据库，链接两个旧表，然后创建一个查询，从两个表中选择所有列（或仅选择您知道的那些列）。当数据更改时，只需使用链接表管理器更新表，然后对查询进行任何需要的更改（如果您没有选择所有列）。

如果幸运的话，用户只是想要灵活地添加列，但没有实际计划这样做。有时他们只是不想致力于设计。

我个人不太喜欢在生产场景中使用 Access，但由于您的生产数据源之一已经是 Access，而且由于 Access 非常擅长集成单独的数据源，因此在这种情况下可能有意义。

# .net - 如何将 C++ 项目转换/调用到/从.Net？

> ID：705706
> 
> 赞同：0
> 
> 时间：2009-04-01T14:12:15.603
> 
> 标签：.net, c++, dll, marshalling

我目前有一个巨大的项目，我最近从 VC6 转换到 2005。现在我真的很想为一些功能创建一个新的前端，但是程序的主要逻辑是基于 c++ 的。代码库也围绕它自己的元类型和定制类展开。

我能想出的最佳解决方案是从 C++ 项目 dll 中调用函数。然而，这导致了巨大的数据编组投资，其中数据跨越了 c++ 和 c# 之间的边界。我想知道是否还有其他选择（完全重写不是一种选择）。

谢谢丰富

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:24:05.873

如果要为本机 DLL 创建托管前端，则必须来回编组数据。真的没有办法避免这个问题。

我们目前在我们当前的一个项目中面临着类似的问题。我们采用的方法是使用 PInvoke 来谈论 Managed -> Native。除了少数例外，我们只 PInvoke blittable 类型，这有助于降低封送处理的成本，因为 CLR 可以将其实现为内存副本。

在交流本机 -> 托管时，我们使用 COM 对象。我们尝试对 blittable 应用相同的规则，但我们发现在这种情况下您经常必须包含许多 COM 对象，这会阻止 blittable-ness。

采用这种方法对我们来说效果很好。我们花了一些时间来获取为数据编组定义的原语。但在那之后，编组变成了……因为没有更好的词而成为惯例。这是一个开销，但它比完全重写便宜得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T15:17:39.987

我以前使用 C++/CLI（以前称为托管 C++）来处理互操作 - 如果您已经在使用 C++，它可能是比 P/Invoke 更好的选择。许多互操作“正常工作”，您将获得编译时安全性，而不是您可能关心或不关心的多毛运行时绑定。

# git - 我怎样才能用 git “diff -c”？

> ID：705707
> 
> 赞同：4
> 
> 时间：2009-04-01T14:12:33.107
> 
> 标签：git

在 $VCS 中，我大量使用了`$VCS diff -c $N`仅查看修订版中引入的更改`$N`（即`diff -r $N..$N+1`）。

我怎样才能用 git 做同样的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-01T14:55:12.443

```
# git show -p SHA1_COMMIT 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-01T14:27:35.927

```
git diff SHA1_COMMIT^ SHA1_COMMIT 
```

`SHA1_COMMIT`成为`SHA1`您要检查的提交。
那“ **[`git diff`](http://git-scm.com/docs/git-diff)**”将比较：

*   该 SHA1 引用的提交之前的版本和
*   上述 SHA1 引用的提交。

如[builtin-diff.c 的源代码中所述](http://github.com/git/git/blob/442dd42d6d4903640b0dc5561481a77c88dcea90/builtin-diff.c)，解析的语法为：

```
static const char builtin_diff_usage[] =
"git diff <options> <rev>{0,2} -- <path>*" 
```

# c# - 更改 LINQ to SQL 插入的顺序

> ID：705716
> 
> 赞同：3
> 
> 时间：2009-04-01T14:14:24.977
> 
> 标签：c#, .net, sql, linq-to-sql

我有两个 LINQ to SQL 类 CandyBar 和 DeliciousCandyBar 映射到 SQL Server 中的同名表。

CandyBar 和 DeliciousCandyBar 之间存在 0..1 的关系。即，一个 CandyBar 可以有 0 或 1 个 DeliciousCandyBar。相反，DeliciousCandyBar 正好有一个 CandyBar。

在 LINQ to SQL 类中，它们看起来（基本上）像

```
class CandyBar {
  public int Id { get;set;} // this is primary key w/ autoincrement identity
  public string Name {get;set;}
  public EntityRef<DeliciousCandyBar> DeliciousCandyBar {get;set;}
}

class DeliciousCandyBar {
  public int DeliciousnessFactor {get;set;}
  public int CandyBarId {get;set;} // FK to candyBar Id
  public EntityRef<CandyBar> CandyBar {get;set;} // the association property of the FK
} 
```

为了向数据库提供数据（通过 l2sql），我的爬虫出去寻找糖果棒和美味的糖果棒。

但是，当我的爬虫插入 CandyStoreDataContext 中的第一个美味糖果棒时，调用 SubmitChanges 时 DataContext 会引发异常。

爬虫为一个美味的糖果条运行以下代码。请注意，这是一个示例。确切的过程更复杂，我使用了一个自定义的 DSL 爬虫来吐出这个对象结构。基本上，执行以下操作。

```
var dc = CandyStoreDataContext();
var bar = new CandyBar() {
    Name = "Flake",
    DeliciousCandyBar = new DeliciousCandyBar() {
      DeliciousnessFactory = 12
    }
};

dc.CandyBars.InsertOnSubmit(bar);

dc.SubmitChanges(); 
```

在 SubmitChanges() 上，抛出 SqlException 并显示消息“INSERT 语句与 FOREIGN KEY 约束 FK_CandyBar_DeliciousCandyBar 冲突。冲突发生在数据库 CandyStoreData、表 'dbo.DeliciousCandyBar'、列 'CandyBarId'”中。

当我将 CandyStoreDataContext.Log 转储到 Console.Out 时，问题变得清晰，生成的插入语句以错误的方式进行。LINQ to SQL 试图先插入 DeliciousCandyBar（它试图在 CandyBarId 列中设置无效值），而不是先插入 CandyBar。

我的问题是，如何让 Linq to SQL 与插入语句的顺序交换？

我曾（错误地）假设 LINQ to SQL 会知道关系依赖的方向并反过来做。

**更新：**

[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/fc08009e-37c3-48d5-9a87-b7bb60edf77a/)表明我对协会的看法是错误的。但这对我来说没有意义。在数据库中建模时是有意义的。这怎么可能反过来做。

在 CandyBar 上，DelciousCandyBar 属性的关联属性为 [Association(Name="DeliciousCandyBar_CandyBar", Storage="_DeliciousCandyBar", ThisKey="Id", OtherKey="CandyBarId", IsForeignKey=true)]

在 DeliciousCandyBar 上，CandyBar 属性的关联属性为 [Association(Name="DeliciousCandyBar_CandyBar", Storage="_CandyBar", ThisKey="CandyBarId", OtherKey="Id", IsUnique=true, IsForeignKey=false)]

好的，现在我很困惑，为什么第二个属性被标记为外键。

我将尝试在 SQL Management Studio 中重新创建 CandyBar 和 DeliciousCandyBar 之间的关系

**更新 2**

好的，我尝试以两种方式建立关系。并且 SSMS 非常清楚主键的位置（CandyBar.Id）。我第一次做对了。否则，级联会倒退。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T14:27:48.843

请尝试这个替代方案：

1.  插入`CandyBar`没有任何子`DeliciousCandyBar`对象的实例，然后调用该`SubmitChanges()`方法。

2.  假设您有一个 ID 或 GUID 链接这两个对象 - 比方说，`CandyBarID`. 然后将实例`CandyBarID`上的值设置`DeliciousCandyBar`为实例的值`CandyBar`。

3.  然后您可以插入`DeliciousCandyBar`对象，并且由于`CandyBarID`已设置，因此在选择`CandyBar`对象时关系应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T17:08:42.343

我会考虑它是一个带有自引用表的 linq2sql 错误的可能性。这是一个疯狂的猜测，但我记得 linq2sql 文档在某处说它不支持它。也许那里的 linq2sql 设计器会感到困惑。

从您发布的生成属性中，您可以看出它是向后的，即 CandyBar 指向的是美味，而不是相反。查看生成的代码以了解其他正常工作的关系。

一旦您确认它不起作用，并且通过在设计器中重新添加它们并没有正确设置它们，请在设计器中打开工作关联的属性，并确保在同样的方法。

# sql - 计数 DIFFDATE 超出指定值 - 步骤 3

> ID：705721
> 
> 赞同：1
> 
> 时间：2009-04-01T14:14:56.347
> 
> 标签：sql

与昨天提出的问题一样，我还有另一个“是否算数”的困境。现在我需要提取满足以下参数的条件条目的计数：

1.  ConditionLevelEntryID = 189
2.  CheckoffDate 距离 ConditionEntryDateTime > 14 天
3.  CheckoffDate 为 NULL 且 ConditionEntryDateTime 大于 14 天

我尝试了不起作用的查询（如下）。返回的错误位于查询下方。请帮我完善查询以获得准确的计数。提前致谢。

```
select Count(*)
from conditionentrytable c
where conditionlevelentryid=189
    and 
    ((c.checkoffdate IS NULL 
    and 
    convert(varchar(12),DATEADD(day,14,c.conditionentrydatetime)))
    or 
    DATEDIFF(dd,c.checkoffdate,c.conditionentrydatetime)>14) 
```

> 服务器：消息 170，级别 15，状态 1，第 7 行第 7 行：')' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:23:26.467

试试这个：

```
SELECT  COUNT(*)
FROM    conditionentrytable c
WHERE   conditionlevelentryid=189
        AND DATEDIFF(dd, COALESCE(c.checkoffdate, GETDATE()),c.conditionentrydatetime) > 14 
```

，甚至更好：

```
SELECT  COUNT(*)
FROM    conditionentrytable c
WHERE   conditionlevelentryid=189
        AND c.conditionentrydatetime > COALESCE(c.checkoffdate, GETDATE()) - 14 
```

后一个查询将使用复合索引（`(conditionlevelentryid, conditionentrydatetime)`如果有的话），这很可能会大大提高查询性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:21:43.537

我自己有点生疏，但是在 IS NULL 表达式中转换后的 conditionentrydatetime 没有做任何事情。

怎么样？

```
select Count(*)
from conditionentrytable c
where conditionlevelentryid=189
    and 
    ((c.checkoffdate IS NULL 
    and 
    DATEDIFF(dd,getdate(),c.conditionentrydatetime)>14)
    or 
    DATEDIFF(dd,c.checkoffdate,c.conditionentrydatetime)>14)) 
```

# javascript - JavaScript 模式中的 IE6 文本大小调整

> ID：705727
> 
> 赞同：0
> 
> 时间：2009-04-01T14:17:16.420
> 
> 标签：javascript, text, resize, internet-explorer-6

我遇到了一个问题，即 IE6 不会在 JavaScript 生成的模式窗口中重新调整文本的大小。如果我将父页面文本大小保持在中等打开模式窗口，然后将文本重新调整为最大，则文本在模式窗口中会被截断。如果我关闭模态窗口并将文本大小保持在最大，然后重新打开模态窗口，文本就可以了。这似乎是一个 IE6 重绘问题。

有没有其他人遇到过这个问题。

注意：我工作的公司仍然支持 IE6，所以这就是我在 IE6 中寻找解决方案的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T18:47:46.677

你的回答我的谎言在“模态”部分。模态意味着在这个对话框被“处理”之前你不能做任何其他事情。在模式窗口打开时不允许此类操作可能更容易吗？

“由于在模式下操作而限制或限制交互。模态通常描述一个辅助窗口，它限制用户与其他窗口的交互。辅助窗口相对于其主窗口或整个系统可以是模态的。比较无模式 [。msdn。 microsoft.com/en-us/library/bb226821(VS.85).aspx](http://msdn.microsoft.com/en-us/library/bb226821(VS.85).aspx) "

# java - 如何使用 CXF 框架使用受 HTTP 基本身份验证保护的 Web 服务？

> ID：705728
> 
> 赞同：16
> 
> 时间：2009-04-01T14:17:18.727
> 
> 标签：java, web-services, cxf

[我尝试使用CXF User Guide](http://cwiki.apache.org/CXF20DOC/client-http-transport-including-ssl-support.html)让它工作，但我没有运气。

我正在尝试使用 java 代码调用 Web 服务。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2009-04-01T16:00:27.873

JAX-WS 规范涵盖了这一点。基本上，将用户名/密码设置为请求上下文的属性：

```
((BindingProvider)proxy).getRequestContext().put(
    BindingProvider.USERNAME_PROPERTY, "joe");
((BindingProvider)proxy).getRequestContext().put(
    BindingProvider.PASSWORD_PROPERTY, "pswd"); 
```

运行时将它们放入 HTTP 标头中。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2011-10-28T12:27:50.590

您可以提供自己的身份验证器。如果 WDSL 本身受到基本 HTTP 身份验证的保护，那么它将起作用。

```
@WebServiceRef(wsdlLocation = "https://laka/sito?wsdl")
static XxxService service;

public static void main(String[] args) {

    Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication("user", "password".toCharArray());
        }
    });

    service = new XxxService();
    Xxx port = service.getXxxPort();

    // invoke webservice and print response
    XxxResponse resp = port.foo();
    System.out.println(resp.toString());

} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2011-02-19T11:51:28.830

有一个更好的方法：

从 WSDL 生成 Java 时，添加选项“-exsh true”：

wsdl2java -exsh true -p edu.sharif.ce [http://wsdl.ir/WebServices/WebService.asmx?WSDL](http://wsdl.ir/WebServices/WebService.asmx?WSDL)

并在使用时添加 UserCredential：

```
UserCredentials user = new UserCredentials();
user.setUserid("user");
user.setPassword("pass");

ResearchWebService_Service service = new ResearchWebService_Service();
ResearchWebService port = service.getResearchWebService();
port.addNewProject(newProject, user); 
```

# ruby-on-rails - 如何创建一个 ruby Hello 世界？

> ID：705729
> 
> 赞同：48
> 
> 时间：2009-04-01T14:17:41.240
> 
> 标签：ruby-on-rails, ruby

我知道在 PHP 中你必须解释像 index.php 这样的页面，但在 Ruby 中它是如何工作的？我不知道 PHP 的 index.php 之类的 Ruby 扩展是什么。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2009-04-01T14:22:13.490

如果您正在谈论命令行程序，这将起作用。

```
puts "Hello World" 
```

或者如果你想要一个面向对象的版本

```
class HelloWorld
   def initialize(name)
      @name = name.capitalize
   end
   def sayHi
      puts "Hello #{@name}!"
   end
end

hello = HelloWorld.new("World")
hello.sayHi 
```

如果您正在寻找 Hello World 的 ruby​​ on rails 版本。查看 Rails 入门[指南](http://guides.rubyonrails.org/getting_started.html#hello-rails-bang)。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-04-01T14:23:56.293

您可以在 Wikibooks 上查看这个[Ruby Programming Wiki](http://en.wikibooks.org/wiki/Ruby_Programming/Hello_world)

代码：

```
puts 'Hello world' 
```

跑：

```
$ ruby hello-world.rb
Hello world 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-12-04T19:23:17.777

这是使用[Sinatra](http://www.sinatrarb.com/)编写一个非常简单的“hello world”的方法，这是在不使用 Rails 的情况下创建基于 Ruby 的网站的好方法。该示例与 Sinatra 用户在其网站首页上的示例基本相同。真的就是这么简单。

安装 Sinatra gem 及其依赖项：

```
`gem install sinatra` 
```

将其保存到一个名为`hi.rb`：

```
require 'sinatra'

get '/hi' do
  "Hello World!"
end 
```

拖放到命令行，然后输入`ruby hi.rb`. 几秒钟后，您应该会看到如下内容：

```
== Sinatra/1.1.0 has taken the stage on 4567 for development with backup from WEBrick
[2010-12-04 11:43:43] INFO  WEBrick 1.3.1
[2010-12-04 11:43:43] INFO  ruby 1.9.2 (2010-08-18) [x86_64-darwin10.5.0]
[2010-12-04 11:43:43] INFO  WEBrick::HTTPServer#start: pid=37898 port=4567: 
```

默认情况下，Sinatra 的页面位于`port=4567`，但您可以更改它。阅读[文档](http://www.sinatrarb.com/documentation)以了解如何操作。

在浏览器中打开一个新窗口，然后转到：

```
http://localhost:4567/hi 
```

您应该`Hello World!`在浏览器窗口中看到。

Sinatra 非常易于使用，并且可以制作出色的原型设计和轻到中等重量的类似 MVC 的服务器。我喜欢它，因为它易于与[Sequel](http://sequel.rubyforge.org/)、我最喜欢的 ORM 和[HAML](http://haml-lang.com/)集成，它取代了 ERB 作为模板引擎。

Sinatra 的[介绍文档](http://www.sinatrarb.com/intro.html)是一个很好的起点。[Sinatra Book](http://sinatra-book.gittr.com/)也是一个很好的资源。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-14T11:45:32.633

**它在 Ruby 中是如何工作的？**

Ruby 是一种脚本语言（未编译），就像 php（正如你所说的“你必须插入一个页面”）和 python、bin/bash 等......在 Ruby 中，你有带有帮助器的库和它们非常酷的东西称为“ **gems** ”（Ruby 和 Gems :D 很好的命名约定对吗？顺便说一句，这是因为 Ruby 的父级是 Perl）。

您可以在一个 Ruby 的项目文件夹中组织不同的文件，在这种情况下可以是一个 *.rb 文件和一个“ **Gemfile** ”（即没有扩展名的名称），您可以在其中定义要在 Ruby 应用程序中安装的“gems” （阅读有关**bundler**的信息），只有这两个文件，您才能成功地做任何您想做的事情，**但**作为**桌面应用程序**（我的意思是，您编写的 Ruby 应用程序只能在安装了 Ruby 的计算机上执行，而您必须手动安装它（使用**捆绑**器，所以所有必需的“ **gems** ”都在那里），然后手动运行针对您的代码主类的 Ruby 命令（当然，除非您创建一个**cron-job**它会自动为您执行此操作，这是在 Web 服务器上运行进程的常见做法）。

如果您想使用 Ruby 创建“ **webapp** ”、网站等，现在有两个非常流行的选择是使用“ **rails** ”框架和“ **sinatra** ”gem。

使用 rails（这就是为什么您听到很多关于 ruby​​ on rails 的原因）框架，您可以执行命令来创建新的网站项目，请记住 rails 使用称为**MVC**（模型视图控制器）的编码模式，因此您将有很多选项来创建模型，视图和控制器单独或使用“脚手架”将为您创建所有这些，rails 将创建一堆文件，其中一些不会是 Gemfile 的 *.rb，它们都有一个特定的任务：配置文件对于数据库、标签、配置或您安装的其他“宝石”，除了 rails。请记住，rails 为**TDD**（测试驱动开发）提供了东西，所以在几个小时内，您就可以拥有一个功能齐全的网站 100% 测试和运行（**大型基础设施**）。

这就是为什么我还把“sinatra”gem 带到了这个对话中……sinatra 会给你提供与 rails 相同的功能，但是 sinatra 不会为你安装任何东西（如果你没有在 web 服务器上设置的专业知识，请**留下错误的空间**， web 应用程序等）只有 sinatra 框架，它将在特定端口号上为您运行服务器，这样您就可以将代码添加到主类以显示 HTML（**小型基础设施**）

**PHP 的 index.php 之类的 Ruby 扩展是什么？**

所有 ruby​​ 文件都使用 *.rb

希望这可以帮助！

**PS：你好世界样本**

1.  安装红宝石
2.  创建一个新文件夹，在里面创建一个文件“hello.rb”
3.  打开文件并添加以下代码：

    放“你好世界”

4.  关闭并保存文件

5.  现在打开终端、控制台等，转到您的 ruby​​ 文件夹路径并运行以下命令：

    红宝石你好.rb

6.  这将在您的控制台上打印：

    你好世界

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-01T14:21:36.660

```
puts "Hello, World!" 
```

要在 Web 上运行 Ruby 脚本，你需要使用一个特殊的服务器，通过 (F)CGI 运行，或者做一些其他的事情；有几种方法可以让不同语言的 HTTP 可访问。然而，最简单的方法可能是使用 Ruby Web 框架，例如 Ruby on Rails 或 Merb——这些项目包括服务器和所有你需要的东西。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-08-10T00:40:05.247

只需在终端上复制并粘贴此代码即可。然后点击进入。

```
ruby -e "puts 'Hello world'" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-04-01T14:18:53.530

我知道这个问题是关于 Ruby 的，但我认为你的意思是 rails （这就是它的标签）。Rails 是一个使用 ruby​​ 编程语言的 Web 框架。

安装rubyonrails。

类型：

```
rails projectname
cd projectname
ruby script/server 
```

导航到[http://localhost:3000](http://localhost:3000)

# javascript - 为什么 Visual Studio javascript 断点在 firebug 中不起作用？

> ID：705733
> 
> 赞同：0
> 
> 时间：2009-04-01T14:18:11.893
> 
> 标签：javascript, visual-studio-2008, debugging, firebug

为什么微软不能在 Visual Studio 中设置断点等同于在 javascript 中添加“调试器”关键字？我想以统一的方式测试javascript跨浏览器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T17:37:21.540

使用 debugger 关键字而不是设置断点。如果启用了调试器，它将中断...

```
debugger; //breakpoint here 
```

至于为什么他们不工作。Firefox 不使用 MS 脚本引擎，因此 VS 调试器不会附加到 Firefox。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-09-05T05:41:44.383

使用调试器；

或 Sys.Debug.assert() 如果断言失败，它将触发调试器语句

# debugging - 如何进行库的源代码级调试

> ID：705737
> 
> 赞同：2
> 
> 时间：2009-04-01T14:19:27.380
> 
> 标签：debugging, embedded, gdb, cross-compiling

我有以下设置。尽管我的工作设置在 Windows 主机上处理 ARM 编译器 Real View Developer Suite (RVDS) 3.2，但对于任何主机上的任何其他 C 编译器来说，这种情况都是通用的。

我在 Windows 主机上使用 RVDS 3.2 编译器工具链构建了 C 代码的 ARM 库（静态库 - .a 文件）。然后，我将这个库与使用 Linux 主机上的 ARM-Linux 编译器工具链的应用程序链接，以获得 ARM 可执行文件。现在，当我尝试使用 gdb 在 Linux 上调试此生成的 ARM 可执行文件时，尝试在链接的库中存在的某个函数中放置断点，gdb 无法在此处放置断点，因为找不到源。所以我手动复制了所有用于在可执行文件所在的 Linux 文件夹中创建库的源文件 (*.c)。gdb 仍然无法设置断点。所以现在我开始思考：

1.  如何通过在 gdb 中启动通过将此库链接到应用程序而生成的可执行文件，使用不同的编译器链在 Windows 上创建该库的源代码级调试。可能吗？我该怎么做？RVDS 编译器工具链中是否有任何编译器选项可启用此库源代码级调试？

2.  我是否需要将源文件复制到 linux 中与这些源文件在 windows 中完全相同的文件夹结构中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:04:57.583

您可以尝试查看模仿完全相同的目录结构是否有效。如果您不确定编译器在可执行文件的调试信息中注释的目录结构，您可以随时查看它`dwarfdump`（在 linux 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-04T22:16:19.513

首先，GDB*不需要*任何源码来给函数设置断点；所以你对实际发生的事情的描述可能不准确。我将首先验证您要中断的函数是否确实存在于二进制文件中：

```
 nm /path/to/app | grep function_desired 
```

其次，要进行源代码级调试，GDB 需要 GDB 能够理解的格式的调试信息。在 Linux 上，这通常意味着`DWARF`或`STABS`。您的 RVDS 编译器很可能不会发出此类调试信息；如果是这样，将无法进行源代码级调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-04T22:26:26.650

您是否在启用调试的情况下构建了库（`-g`选项）？否则，将难以识别线条等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T23:13:12.633

我发现 -fPIC 会导致此类问题，但我发现的唯一解决方法是在我想调试时不要使用 -fPIC。

# .net-3.5 - ASP.NET 3.5 转换后未触发控制事件

> ID：705743
> 
> 赞同：1
> 
> 时间：2009-04-01T14:20:53.290
> 
> 标签：.net-3.5

我的部门目前正在将我们所有的项目从 2.0 转换为 3.5，我们正在经历一个奇怪的副作用。在我们将项目转换为 3.5 框架后，似乎大多数（如果不是全部）控制事件都没有触发。至少最初不是。举个例子，我正在查看我们的一个已转换的内部接口，并且下拉选择的索引更改事件的按钮单击事件都没有触发。我转到其他不相关的内容，然后在大约 2 小时后返回页面，然后事件触发了。

我已经在设计模式下加载了 .aspx 页面，并确保事件与代码隐藏方法正确绑定，并且某些项目仍然不响应事件。

有没有人经历过这个？我在网上做了一些搜索，但没有找到任何相关的答案。任何信息将不胜感激！

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-11-17T14:17:34.683

我看到了一个类似的问题，除了它总是在 FF、Chrome 和 Safari 中运行，而在 IE8 或 7 中从不运行。

当我手动编写偶数处理程序时，它可以工作。开发和生产服务器上的行为完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-24T15:40:16.260

我遇到了同样的问题——我会说我有大约 33% 的机会页面的按钮没有连接。换句话说，我每 3 次导航到它似乎工作的页面中有 2 次，但第三次页面上的按钮都不起作用。

我似乎将其范围缩小到带有 ScriptManager 的页面，但我不知道为什么这很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-01-20T21:17:54.387

我遇到了“事件未触发”问题，并找到了可能对某些用户有所帮助的问题/解决方案。我在 Chrome（我的默认浏览器）上运行我的开发网站，但发现有时某些 UI 会工作一段时间，然后突然所有事件都会停止触发。调试起来非常令人沮丧，直到我有了尝试在 IE 中测试 UI 的好主意。我开始在 IE 中使用 UI，然后（如预期的那样）所有事件都停止触发（与 Chrome 中发生的方式相同）。但是（与 Chrome 不同）位于 IE 浏览器左下角的是一个警告图标，上面有一条消息，例如“完成，但页面上有错误”。这一直是个问题：发生了一个错误，没有在浏览器的主要部分呈现（即 UI 看起来仍然可以正常工作）。在 Chrome 中，没有出现问题的视觉警告使它看起来一切正常。我的错误与安全问题有关（Sys.WebForms.PageRequestManagerServerErrorException: Invalid postback or callback argument），但可能有许多错误导致 UI 与事件模型断开连接。我不知道如何在 Chrome 中打开警告机制，但如果您遇到“事件未触发”问题，请在 IE 中运行 UI 并专心盯着浏览器的左下角。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T16:42:20.143

我没有经历过这样的事情，但我能想到的最接近的是：

*   AutoWireEvents - 用于 Page_Load 等。如果未在生成的代码中显式配置方法，则应将其设置为 on。
*   如果您在 aspx 上配置事件，例如 OnClick="something_OnClick"，请确保后面代码中的方法受到保护（而不是私有）。也就是说，这很奇怪，因为我的经验是，如果设置错误，它将无法编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-07-15T22:41:15.920

您是否尝试过[此处](http://geekswithblogs.net/ranganh/archive/2005/04/25/37630.aspx)发布的解决方案？显然，当人们安装 .NET Framework v1 SP1 时发生了类似的问题。您也可以将此解决方案定制为 .NET 3.5。

您可能还想在 stackoverflow 上尝试对类似问题的[回复。](https://stackoverflow.com/questions/786482/asp-net-button-click-event-not-firing/807853#807853)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-17T14:10:36.147

在将站点从 .net 1.1 转换为 3.5 时，我遇到了同样的问题。就像在某些页面上的开篇文章中一样，按钮可以正常工作，而在其他页面上则不能。不起作用的页面之间似乎没有任何共同点。

我尝试更改代码以使其与可以工作的页面匹配，因此更改使用语句，更改要指定的 autowireevent 属性并将其设置为 true，删除不需要的系统关键字。我还尝试专门在页面加载中添加事件，如下所示：

```
this.dlCVs.ItemDataBound += new System.Web.UI.WebControls.DataListItemEventHandler
    (this.dlCVs_ItemDataBound);
this.dlCVs.ItemCommand += new System.Web.UI.WebControls.DataListCommandEventHandler 
    (this.dlCVs_ItemCommand);
this.btnSubmit.Click += new System.EventHandler(this.btnSubmit_Click);
this.btnHome.Click += new System.EventHandler(this.btnHome_Click); 
```

有趣的是，尽管在上面的 itemdatabound 事件确实有效，所以它只有按钮单击不起作用。

到目前为止，我遇到的唯一解决方案是删除页面，然后重新创建它并复制代码的各个部分。如果我将代码复制到一个大块中，则此解决方案不起作用。

# winforms - 任务完成后进度条不显示

> ID：705745
> 
> 赞同：3
> 
> 时间：2009-04-01T14:20:55.537
> 
> 标签：winforms, multithreading

我一直在尝试将进度条设置为选取框以在另一个功能运行时继续移动。这个函数运行后，我会显示消息（对于这个例子）

我能够完成这项工作的唯一方法是与后台工作人员一起，然后有一个

执行循环直到在主窗体中运行的条件，直到操作完成，然后是我的消息框。

这似乎是完成此任务的一种杂乱无章的方式，而 thread.start 后跟 thread.join 似乎是解决此问题的更好方法。但是，我也无法使其正常工作。

如果有人感兴趣，我已经包含了一个小型演示程序。 [http://www.filedropper.com/progressbar](http://www.filedropper.com/progressbar)

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T14:23:22.083

`Thread.Start`并且`Thread.Join`不是*这样*做的方法 - 这基本上会再次阻塞您的 UI 线程。`Application.DoEvents`也不是要走的路 - 你真的想要一个单独的线程。

然后，您*可以*使用`Control.Invoke`/`Control.BeginInvoke`将其编组回 UI 线程，但这[`BackgroundWorker`](http://technet.microsoft.com/en-gb/interopmigration/bb380242.aspx)会使这一切变得容易得多。搜索“BackgroundWorker 教程”会产生很多点击。

编辑：要在工作人员完成后显示消息，请使用[`RunWorkerCompleted`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件。[`ReportProgress`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx)方法和[`ProgressChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.progresschanged.aspx)事件用于处理更新进度条。（UI 订阅 ProgressChanged，任务会定期调用 ReportProgress。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T14:24:38.307

那不是杂牌。这是正确的做法；BackgroundWorker 方法会发生什么？诀窍是使用该`ReportProgress`方法将更改推送回 UI（不要`ProgressBar`从工作人员更新）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:22:05.863

不时在您的函数中使用 Application.DoEvents() 以便您的进程有一些时间来处理他的事件，包括重绘表单。

或者，您可以使用工作线程（如 BackgroundWorker）来处理您的处理，同时 UI 线程显示您的进度条。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:33:45.630

补充 Marc Gravell 给出的答案，BackbroundWorker 有一个布尔属性 WorkerReportsProgress，如果设置为 false，当您调用 ReportProgress 时，程序将引发 InvalidOperationException

# .net - 你们中有多少人正在为贵公司使用内部开发的安装程序？

> ID：705766
> 
> 赞同：2
> 
> 时间：2009-04-01T14:24:48.540
> 
> 标签：.net, deployment, installation

不久前，我们是否应该使用第三方安装程序还是自己编写安装程序存在争议。我们已经有 2 代内部开发的安装程序，它们只通过外壳到 exe 来执行服务、msmq、com+、gac 和 sql 脚本。

所以我想知道谁在使用定制的书面安装程序来满足您公司的特定需求？如果您对我们的方法有任何意见，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:41:08.547

我们在这里使用自定义的。我们需要做很多奇怪的事情，包括[创建联结](http://support.microsoft.com/kb/205524)、编辑其他用户的注册表项（这需要查找和加载他们的配置单元）、向我们的第三方实时 HAL 层注册东西等等。现在可能有安装程序工具包可以让您完成所有这些工作，但学习起来比自己动手要复杂得多。

我认为我们的都是 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:30:59.007

我以前的工作是这样。

我们选择这种方式的主要原因是我们需要根据用户的名称部署不同版本的软件。

如果可能的话，这是一种 clickonce 部署器，但一次支持多个版本，而不仅仅是一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T04:21:53.160

曾几何时（大约在 2002 年），我亲手编写了一个小型安装程序（< 200kb），它分析了用户的 Windows 版本，然后为该应用程序下载了适当的“主”安装程序。似乎看到这种方法现在被广泛使用:)

除此之外，大多数时候，每当我不得不为程序开发安装程序时，都是使用 InstallShield、WISE、InstallAware 或其他替代方案（如 WiX）完成的。

现实情况是，维护和支持定制安装程序的成本可能相当高，尤其是随着每个新操作系统的发布，并且其中大部分成本可以通过购买或投资其中一种商业产品（或替代品）来抵消。

话虽如此，许多安装程序可能相当迟钝。一种特定的产品需要使用 InstallShield Pro - 这样我们就可以在 InstallScript 中编写自定义操作的脚本！

所以.. 如果您有一些需要相当复杂的安装工作的东西，那么很难推荐现成的安装程序包——尤其是在升级场景中，它可能更像是一场噩梦。如果您要支持自己的自定义安装程序，请帮自己一个忙，并为此投入大量时间、金钱和测试。

哦，请确保您考虑到修补方案、升级、安装或不使用管理权限、（如果适用）无人值守安装、UI 中的多语言支持……等等。它会变得非常混乱，非常快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-03T04:44:08.943

我们有自己的安装程序包，这样做不属于我的“不该做什么……”列表的一部分

虽然我同意许多安装程序的功能集非常有限，并且在某种程度上（严重）功能，但其他安装程序提供了更大的灵活性。话虽如此，我还没有开始寻找替代品，但这将是我明年要做的事情。我需要一些我可以做到的东西：

1.  创建我自己的模块、插件或任何受支持的扩展模型，使用真正的编程语言（java、.NET……等等，如果安装工具的支持语言以工具名称的公司名称开头的话是一个主要的关闭）
2.  支持所有主要版本的 Windows。
3.  支持Linux
4.  支持静默安装

我不认为要求太多，而且我确信有人做了一些可以让我继续发展的事情。同样可以肯定的是，有一个开源打包系统可以做到这一点。

我更喜欢维护一些专门的工具和插件，而不是用于多平台部署的完整系统。

恕我直言，创建自己的任何东西应该是最后的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-03T05:02:49.910

赛门铁克为 Norton AntiVirus 2009 编写了自己的安装程序。它根本不使用 Windows 安装程序 (msiexec.exe)。

这就是他们将总安装时间缩短到不到 1 分钟的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-03T05:38:56.923

上次我编写自定义安装程序是在 1992 年左右，在 Windows 3.0 下。那时我才这样做，因为我年轻而天真。我想不出这些天为什么有人会打扰。

我将[NSIS](http://nsis.sourceforge.net/Main_Page)用于我的个人项目，它简单快捷。公司政策迫使我将 InstallShield 用于我的专业产品，这也很好。

几年前我有一个项目，安装程序需要在本地 PC 上调整一些网络设置，所以我写了一个简单的小 EXE 来做这件事，并让 InstallShield 运行它作为安装。这工作得很好，而且比编写一个完整的安装程序要容易得多。

# c# - 将属性添加到多个表的组合的 LINQ？

> ID：705767
> 
> 赞同：0
> 
> 时间：2009-04-01T14:25:03.000
> 
> 标签：c#, sql, linq

我目前有 3 个单独的表：Course、Category 和 CourseCategory。CourseCategory 是只有 CourseID 和 CategoryId 的连接。我需要 LINQ-to-SQL 中的一种方法来将 Category 属性添加到 Course 对象，该对象从多个表中抽象出来。我们需要将应用程序更改为仅允许一个类别，但我们不想更改数据库以防以后需要将其切换回来。

如何将属性添加到 Course 以获取 CourseCategory 表中的第一个类别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T14:37:47.913

只需使用新属性扩展您的课程实体。下面将公开与课程关联的单个类别（不是 CourseCategory，但如果您想要 CourseCategory，您可以轻松更改它），如果没有则返回 null，如果有多个则抛出异常。

```
public partial class Course
{
   public Category Category
   {
      get { return this.CourseCategories.SingleOrDefault().Category; }
   }
} 
```

您还可以添加一个设置器以使该属性可写。

**更新**

如果不允许没有关联的类别，您甚至应该使用 Single() 而不是 SingleOrDefault()。

# asp.net - 使用复选框列表切换 div 可见性

> ID：705770
> 
> 赞同：2
> 
> 时间：2009-04-01T14:26:00.050
> 
> 标签：asp.net, javascript, viewstate, visibility, checkboxlist

我有一个 Web 应用程序（ASP.NET2.0 C#）。在其中，我有一个 div，其中包含一个复选框列表和一个按钮。

我想切换 div 查看，所以我在网上找到了一些 javascript 代码来帮助我。

继承人的代码：

```
<script language="javascript">
var state = 'hidden';

function showhide(layer_ref) {

    if (state == 'visible') 
    {
        state = 'hidden';
    }
    else 
    {
        state = 'visible';
    }
    if (document.all) 
    { //IS IE 4 or 5 (or 6 beta)
        eval( "document.all." + layer_ref + ".style.visibility = state");
    }
    if (document.layers) 
    { //IS NETSCAPE 4 or below
        document.layers[layer_ref].visibility = state;
    }
    if (document.getElementById && !document.all) 
    {
        maxwell_smart = document.getElementById(layer_ref);
        maxwell_smart.style.visibility = state;
    }
}
</script> 
```

我这样调用函数：

```
<a href="javascript://" onclick="showhide('AlertDiv');">Choose Columns</a> 
```

当我使用此功能时，它会向我显示带有按钮的 div，但不会向我显示复选框列表......关于发生了什么的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:50:27.917

您是否尝试过使用显示而不是可见性？

例如，而不是：

```
document.getElementById(layer_ref).style.visiblity = "hidden";
document.getElementById(layer_ref).style.visiblity = "visible"; 
```

采用：

```
document.getElementById(layer_ref).style.display = "none";
document.getElementById(layer_ref).style.display = "block"; 
```

您必须将所有对可见性的引用替换为 display 而不仅仅是 getElementById 版本。您可能还想考虑使用[jQuery](http://docs.jquery.com/Downloading_jQuery)来处理您的场景，只需几行代码，而且不需要 onclick 属性来覆盖您的 html。

```
<script type="text/javascript" src="jquery-1.3.2.js">
</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('.toggleLink').click(function(e) {
       e.preventDefault();
       $('#AlertDiv').toggle();
    });
  });
</script>
<a href="#" class="toggleLink">Choose Columns</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:53:23.853

一些建议：

1.  您确实应该考虑使用[ASP.NET AJAX](http://www.asp.net/ajax/)或[JQuery 之](http://jquery.com/)类的 javascript 库。这将有助于消除浏览器特定的代码。
2.  可见性基于复选框的状态，而不仅仅是切换它。
3.  在这种情况下，“显示”可能是比“可见性”更好的样式。如果你使用“可见性”，那么你只会得到一个空白区域，当它不可见时“层”应该是。
4.  您可能希望传入 div 标签的 id 和复选框的 id，而不是“层引用”。

**asp.net ajax 中的示例：**

这将是您的复选框：

```
<input type="checkbox" id="mycheck" onclick='showhide("mycheck","mylayer")' /> 
```

这是您要显示/隐藏的区域：

```
<div id='mylayer'>content</div> 
```

这是您的功能：

```
<script language="javascript">
function showhide(checkboxid, layerid)
{

    if($get(checkboxid).checked==true)
    {
         $get(layerid).display = "none";
    }
    else
    {
         $get(layerid).style.display = "";
    }
}
</script> 
```

# c# - 在 Windows Mobile 上关闭 GPRS 连接

> ID：705774
> 
> 赞同：2
> 
> 时间：2009-04-01T14:27:02.917
> 
> 标签：c#, windows-mobile, compact-framework, gprs

是否可以在 windows mobile 上获取所有打开或缓存的 gprs 连接并以编程方式强制它们关闭？

我一直在查看连接管理器 api，但似乎找不到我这样做的方法。

问候

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:46:29.623

[可以通过调用ConnMgrReleaseConnection通知](http://msdn.microsoft.com/en-us/library/aa457268.aspx)[连接管理器](http://msdn.microsoft.com/en-us/library/aa457258.aspx)您不再使用连接，但这不会强制关闭连接。它根据注册表中定义的生命周期缓存 (HKEY_LOCAL_MACHINE\Comm\ConnMgr\Planner\Settings) 以及在发布请求中传递的任何信息关闭。（顺便说一句，这些 API 包装在[SDF](http://opennetcf.com/Products/SmartDeviceFramework/tabid/65/Default.aspx)的 OpenNETCF ConnectionManager 对象中）。

强制关闭连接的唯一方法是使用[RAS](http://rascf.codeplex.com)枚举所有设备连接，找到您要的连接，然后关闭它。请注意，如果您这样做，ConnectionManager 不知道它已被关闭，因此下次尝试使用该连接时会感到不安。通常它会在内部出现错误并尝试再次打开新连接，一切都很好，但是 YMMV。

# http - 为什么不应该在 HTTP GET 请求上修改数据？

> ID：705782
> 
> 赞同：36
> 
> 时间：2009-04-01T14:27:48.530
> 
> 标签：http, get

我知道使用非 GET 方法（POST、PUT、DELETE）来修改服务器数据是做事的正确方法。我可以找到多个资源声称 GET 请求不应更改服务器上的资源。

但是，如果今天有客户来找我说“我不在乎做事的正确方法是什么，如果我们可以使用调用 URL 并返回一些 XML，那么我们使用您的 API 会更容易 -我们不想构建 HTTP 请求和 POST/PUT XML，“否则我可以给出哪些**有利于业务的理由**来说服他们？

有缓存影响吗？安全问题？我在寻找的不仅仅是“它在语义上没有意义”或“它让事情变得模棱两可”。

**编辑：**

感谢到目前为止有关预取的答案。我不太关心预取，因为主要是围绕内部网络 API 的使用，而不是可访问的 HTML 页面，这些页面会有可以被浏览器预取的链接。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-04-01T14:29:48.137

*   **预取：**很多网络浏览器都会使用预取。这意味着它会在您单击链接之前加载一个页面。预计您稍后会单击该链接。
*   **机器人：**有几个机器人可以扫描和索引互联网以获取信息。他们只会发出 GET 请求。由于这个原因，您不想从 GET 请求中删除某些内容。
*   **缓存：** GET HTTP 请求不应该改变状态并且它们应该是幂等的。幂等意味着发出一次请求，或多次发出请求会给出相同的结果。即没有副作用。因此，GET HTTP 请求与缓存紧密相关。
*   **HTTP 标准是这样说**的：HTTP 标准说明了每种 HTTP 方法的用途。有几个程序是为使用 HTTP 标准而构建的，它们假定您将按照您应该的方式使用它。因此，如果您不遵循，您将在大量随机程序中出现未定义的行为。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-01T14:31:15.950

Google 如何在 URL 中找到包含所有 GET 参数的该页面的链接并时不时地重新访问它？那可能会导致灾难。

**The Daily WTF**上有一篇关于此的[有趣文章](http://thedailywtf.com/articles/The_Spider_of_Doom)。

 *** * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-01T14:34:51.073

可以对用户强制执行 GET 并导致跨站点请求伪造 (CSRF)。例如，如果您在[http://example.com/logout.php](http://example.com/logout.php)有一个注销功能，它会更改用户的服务器状态，那么恶意人员可以在任何使用上述 URL 作为其来源的站点上放置一个图像标签：[http](http://example.com/logout.php) ://example.com/logout.php 。加载此代码将导致用户退出。在给出的示例中没什么大不了的，但如果这是一个将资金从账户中转出的命令，那将是一个大问题。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-01T14:43:59.677

以正确的方式做这件事的充分理由......

它们是行业标准、有据可查且易于保护。虽然您完全支持让客户的生活尽可能轻松，但您不希望在短期内实现一些更容易的东西，而是更喜欢对他们来说不太容易但提供长期利益的东西。

我最喜欢的名言之一

> Quick and Dirty... 在 Quick 离开很久之后，Dirty 仍然存在。

对你来说，这是“一针及时节省九针”；）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-01T15:03:30.957

**安全性：** [CSRF](http://en.wikipedia.org/wiki/CSRF)在 GET 请求中要容易得多。

无论如何，使用 POST**不会**保护您，但 GET 可以通过使用接受图像标签的论坛和场所来引导更容易的利用和大规模利用。

根据您在服务器端所做的事情，使用 GET 可以帮助攻击者启动**DoS（拒绝服务）**。攻击者可以在图像标签中使用您昂贵的 GET 请求向数千个网站发送垃圾邮件，这些网站的每个访问者都会对您的 Web 服务器执行这个昂贵的 GET 请求。这会给你带来很多 CPU 周期。

我知道无论如何有些页面很重，这总是有风险，但如果在每个 GET 请求中添加 10 条大记录，风险就会更大。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-01T14:31:51.080

一个人的安全。如果网络爬虫遇到删除链接，或者用户被诱骗点击超链接，会发生什么？用户在实际操作之前应该知道他们在做什么。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-24T15:05:00.293

> 我在寻找的不仅仅是“它在语义上没有意义”或“它让事情变得模棱两可”。
> 
> ...
> 
> 我不在乎做事的正确方法是什么，这对我们来说更容易

告诉他们想想他们用过的最糟糕的 API。他们不能想象这是如何由扩展的快速黑客造成的吗？

如果你从语义上有意义的东西开始，在 2 个月内会更容易（也更便宜）。我们称之为“正道”是因为它让事情变得更容易，而不是因为我们想折磨你。

# c# - 在linq中返回所有同名的xml项目

> ID：705785
> 
> 赞同：4
> 
> 时间：2009-04-01T14:28:45.970
> 
> 标签：c#, linq-to-xml

如何查询一个 xml 文件，其中我有多个具有相同名称的项目，以便我可以取回所有项目。目前我只得到第一个结果。我设法让它与以下代码一起工作，但这会返回满足特定搜索条件的所有项目。我想要的输出是返回两个结果，例如都柏林的位置。问题是如何使用 linq to xml 实现这一点

干杯克里斯，

这是代码

```
string location = "Oslo";    
var training = (from item in doc.Descendants("item")
                         where item.Value.Contains(location)

                      select  new
                         {
                             event = item.Element("event").Value,
                             event_location = item.Element("location").Value
                         }).ToList(); 
```

xml 文件看起来像这样

```
<training>
   <item>
      <event>C# Training</event>
        <location>Prague</location>
        <location>Oslo</location>
        <location>Amsterdam</location>
        <location>Athens</location>
        <location>Dublin</location>
        <location>Helsinki</location>
   </item>       
   <item>
        <event>LINQ Training</event>
        <location>Bucharest</location>
        <location>Oslo</location>
        <location>Amsterdam</location>
        <location>Helsinki</location>
        <location>Brussels</location>
        <location>Dublin</location>
   </item>            
</training> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T14:42:55.843

您正在使用`item.Element("location")`which 返回项目下的*第一个*位置元素。那不一定是您要寻找的位置！

我怀疑您*实际上*想要更多类似的东西：

```
string location = "Oslo";
var training = from loc in doc.Descendants("location")
               where loc.Value == location
               select new
               {
                   event = loc.Parent.Element("event").Value,
                   event_location = loc.Value
               }; 
```

但是话又说回来，`event_location`考虑到它始终是您传递给查询的位置，它提供了什么值？

如果这不是您想要的，请提供更多详细信息 - 目前您的问题有点难以理解。您当前代码提供的内容以及您*希望*它提供的内容的详细信息会有所帮助 - 以及“名称”的含义（因为它看起来实际上是“价值”）。

编辑：好的，听起来你想要：

```
string location = "Oslo";
var training = from loc in doc.Descendants("location")
               where loc.Value == location
               select new
               {
                   event = loc.Parent.Element("event").Value,
                   event_locations = loc.Parent.Elements("location")
                                               .Select(e => e.Value)
               }; 
```

event_locations 现在将是一个字符串序列。你可以得到你想要的输出：

```
for (var entry in training)
{
     Console.WriteLine("Event: {0}; Locations: {1}",
                       entry.event,
                       string.Join(", ", entry.event_locations.ToArray());
} 
```

试一试，看看是不是你想要的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:45:50.673

这可能不是最有效的方法，但此查询有效：

```
var training = (from item in root.Descendants("item")
                where item.Value.Contains(location)
                select new
                {
                    name = item.Element("event").Value,
                    location = (from node in item.Descendants("location")
                               where node.Value.Equals(location)
                               select node.Value).FirstOrDefault(),
                }).ToList(); 
```

（请注意，如果属性名称为 ，则代码将无法编译`event`，因此我将其更改为`name`。）

我相信您的代码的问题是`location`创建匿名类型时检索到的节点没有搜索具有所需值的节点。

# deployment - 无需在客户端计算机中重新安装即可移动 ClickOnce 存储库。是否可以？

> ID：705787
> 
> 赞同：2
> 
> 时间：2009-04-01T14:29:13.800
> 
> 标签：deployment, clickonce

我有一个 C# 应用程序 (WinForms) (ClickOnce)，其存储库安装在即将崩溃的服务器上，所以我的老板要求我移动存储库，但大约有 300 台客户端计算机安装了该应用程序。

ClickOnce 使用测试证书进行签名。

是否可以移动存储库而无需在客户端计算机中重新安装？

提前致谢

**[编辑]**

我已将应用程序发布到新服务器，但客户端无法访问它，我还能做什么？我认为我应该更改清单中的某些内容或类似的内容，但实际上对 ClickOnce 不太了解...无论如何，我想避免在所有客户端计算机上重新安装，有什么想法、建议吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-08-24T15:57:08.877

这是我为可能有同样问题的人所做的。

*   在发布包上设置新服务器。（项目属性，发布选项卡）
*   发布到新服务器
*   将发布的文件复制到旧服务器。（包括 .application 文件和文件夹）

当客户端到达旧服务器时，它们将更新，但客户端上的服务器位置将更新为新的服务器名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-01-18T22:10:01.997

Jhonny 提供的答案对我来说似乎很有希望，但我在尝试时遇到了一个错误，我必须解决这个问题。它与证书有关。

按照他的设置后，当我在客户端计算机上启动 ClickOnce 应用程序时，我收到一个错误对话框：“无法启动应用程序”。

当我单击错误对话框中的详细信息... 按钮时，打开的文本文件显示应用程序正在尝试从新服务器的部署提供程序 URL 进行更新，但它给出了以下错误：

“部署标识与订阅不匹配。”

问题是用于在旧服务器上发布应用程序的证书已过期，我已经更新了在新服务器上发布的应用程序中的证书。证书不匹配。

解决方案是首先使用新证书将应用程序发布到旧服务器，让用户打开应用程序以获取该更新，然后使用新服务器的部署 URL 发布另一个新版本，并将文件复制到两台服务器。当用户下次更新时，他们从旧服务器获取应用程序的版本，清单指向新服务器，然后从新服务器检索所有后续更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:39:04.183

您可以尝试更改 DNS 别名，使其重定向到您的新服务器。

使用证书签名的代码并不相关，因为代码签名证书未绑定到特定的存储库（与 SSL 证书相反）

顺便说一句，你为什么不想重新安装？clickonce 的全部目的是简化这种软件更新！

# sql - 在 SQL 2005 中更改聚集索引 (PK) 的最佳方法

> ID：705790
> 
> 赞同：6
> 
> 时间：2009-04-01T14:30:09.900
> 
> 标签：sql, sql-server-2005, indexing, primary-key, clustered-index

我有一个表，它在两列上有一个聚集索引 - 表的主键。定义如下：

```
ALTER TABLE Table ADD  CONSTRAINT [PK_Table] PRIMARY KEY CLUSTERED 
(
  [ColA] ASC,
  [ColB] ASC
)WITH (SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF) ON [PRIMARY] 
```

我想删除此聚集索引 PK 并添加如下聚集索引并使用非聚集索引添加主键约束，如下所示。

```
CREATE CLUSTERED INDEX [IX_Clustered] ON [Table] 
(
  [ColC] ASC,
  [ColA] ASC,
  [ColD] ASC,
  [ColE] ASC,
  [ColF] ASC,
  [ColG] ASC
)WITH (PAD_INDEX  = ON, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF,     DROP_EXISTING = OFF, IGNORE_DUP_KEY = OFF, FILLFACTOR = 90, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = OFF) ON [PRIMARY]

ALTER TABLE Table ADD CONSTRAINT
  PK_Table PRIMARY KEY NONCLUSTERED 
  (
    ColA,
    ColB
  ) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 
```

我打算只删除 PK 聚集索引，然后添加新的聚集索引，然后添加非聚集主键索引，但我了解到删除现有聚集索引会导致表数据重新排序（请参阅此处的答案[What当我在 SQL 2005 中删除集群主键时发生](https://stackoverflow.com/questions/705504/what-happens-when-i-drop-a-clustered-primary-key-in-sql-2005)），我认为这不是必需的。该表正在敲 1 TB，所以我真的想避免任何不必要的重新排序。

我的问题是，从现有结构到所需结构的最佳方式是什么？

编辑：只是想澄清一下。该表为 1TB，不幸的是我没有空间来创建临时表。如果有办法在不创建临时表的情况下做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-01T14:51:36.290

This isn't a complete answer to your question, but make sure that if you have any other indexes on the table that you drop those first. Otherwise SQL Server will have to rebuild them all when you remove the clustered index then rebuild them all again when you add back a new clustered index. The usual steps are:

1.  Remove all non-clustered indexes
2.  Remove clustered index
3.  Add new clustered index
4.  Add back all non-clustered indexes

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-02T05:32:40.120

If your table is getting up to 1 TB in size and probably has LOTS of rows in it, I would strongly recommend NOT making the clustered index that much fatter!

First of all, dropping and recreating the clustered index will shuffle around ALL your data at least once - that alone will take ages.

Secondly, the big compound clustered index you're trying to create will significantly increase the size of all your non-clustered indices (since they contain the whole clustered index value on each leaf node, for the bookmark lookups).

The question is more: why are you trying to do this?? Couldn't you just add another non-clustered index with those columns, to potentially cover your queries? Why does this have to be the clustered index?? I don't see any advantage in that....

For more information on indexing and especially the clustered index debate, see [Kimberly Tripp's blog](http://sqlskills.com/BLOGS/KIMBERLY/category/Indexes.aspx) on SQL Server indexes - very helpful!

Marc

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-01T14:33:49.873

1.  创建一个新表：

    ```
    CREATE TABLE newtable (colA INT, colB INT) 
    ```

    *   将旧表中的所有值插入到新表中：

        插入新表 SELECT * FROM 表

    *   删除旧表：

        DROP TABLE 表

    *   将新表重命名为旧表

        EXEC sp_rename 'newtable', 'table'

    *   建立索引：

        ALTER TABLE Table ADD CONSTRAINT PK_Table PRIMARY KEY NONCLUSTERED (ColA, ColB) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-04-06T08:04:38.263

Clustered indexes don't actually change the physical order of the data being stored in the table it self. It hasn't been this way since SQL 6.5.

The data on the pages is stored in the correct order. The pages can be stored on the disk in any physical order.

# google-maps - 使用谷歌地图时向谷歌提交的数据是什么？

> ID：705800
> 
> 赞同：1
> 
> 时间：2009-04-01T14:32:59.893
> 
> 标签：google-maps

客户端要求我映射数据，但客户端除了要发送到另一台服务器的地理编码地址之外没有任何其他数据。除了地址和纬度/经度之外，Google 地图 API 是否会向 Google 提交其他数据？

例如，我不希望“dealerInfo”节点以下列 XML 格式提交给 Google，该 XML 用于 [ [http://www.coastalbendchevydealers.com/][1]](http://www.coastalbendchevydealers.com/][1])上的地图。

```
<?xml version="1.0" encoding="utf-8"?>
<markers>
    <!-- Neessen Automotive -->
    <marker lat="27.5380258" lng="-97.8547257" dealer="Neessen Automotive">
    <dealerInfo><![CDATA[
        <table border="0" class="infoWindow">
            <tr><td rowspan="5" width="155" align="left"><img src="images/chevydealer.jpg" width="150" height="113"/></td></tr>
            <tr><td align="left"><strong>Neessen Automotive</strong></td></tr>
            <tr><td align="left">2007 S. US Highway 77 Bypass<br>Kingsville, Texas</td></tr>
            <tr><td align="left">361-592-2668</td></tr>
            <tr><td align="left"><a href="http://www.neessenautomotive.com" target="_blank">www.neessenautomotive.com</a></td></tr>
        </table>
    ]]></dealerInfo>
    </marker> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:41:33.180

它根本不应该提交，这取决于您如何解析 XML 文件。

```
      GDownloadUrl("AMBest2bil50bil.xml", function(doc) {
        var xmlDoc = GXml.parse(doc);
        var 标记 = xmlDoc.documentElement.getElementsByTagName("marker");

        for (var i = 0; i "+name+"
总资产："+formatCurrency(text)+""+地址；
          var category = marker[i].getAttribute("category");
          // 创建标记
          var marker = createMarker(point,name,html,category);
          GEvent.addListener（标记，“点击”，函数（）{
            map.setCenter(point,10);
          });
          map.addOverlay(标记);
        }

```

这将解析我的 XML 文件并仅操作“标记”标签。您已经对信息进行了地理编码，因为您有纬度/经度，我认为 CDATA 是用于某种类型的弹出/鼠标显示。我不相信您会将这些信息传递给 Google。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-24T05:38:04.397

请记住，Google 提供此服务是一项免费服务，如果您担心数据共享，请查看高级许可（10K / 年）

来自谷歌的隐私政策：

> 11.  您向 Google 提供的许可。
> 
> 11.1 内容许可。**Google 对您的内容不主张所有权**，并且您保留您在您的内容中已经拥有的版权和任何其他权利。**通过在服务中提交、发布或展示您的内容，即表示您授予 Google 永久、不可撤销、全球性、免版税和非独家许可，以通过以下方式复制、改编、修改、翻译、公开表演、公开展示和分发您的内容该服务并通过 Google 服务作为搜索结果**。此许可仅用于使 Google 能够运营服务、推广服务**（包括通过公开演示）以及****通过 Google 服务将此类内容作为搜索结果编**入索引和提供服务**. 如果您无法或不愿意为您的内容提供此类许可，**请参阅常见问题解答，了解有关配置您的 Maps API 实施以选择退出的信息。****
> 
>  **11.2 品牌特征许可。您在有效期内向 Google 授予不可转让的非排他性许可，以使用您的品牌特征宣传您正在使用服务。
> 
> 11.3 授予许可的权力。您向 Google 确认并保证您拥有授予上述许可所需的所有权利、权力和授权。**

 **无论如何，请记住没有免费的午餐。最后，谷歌会进行搜索，他们可以获得的数据越多，搜索效果就越好。

# flash - 在 Flash 中播放嵌入的 f4v 文件？

> ID：705801
> 
> 赞同：0
> 
> 时间：2009-04-01T14:33:24.227
> 
> 标签：flash, movie

嗨，可以在 Flash 中播放嵌入式 f4v 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T14:54:36.860

是的，有一个将视频添加到 swf 的向导，您可以在**File|Import|Import Video...**下找到它。但这并不是真正值得推荐的。您经常会失去同步的视频/音频。再加上 swf 文件会很大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-05-27T01:41:16.823

对不起，但答案是大大的**不**。我知道，我知道——这太可怕了。

您不能将嵌入的电影或 aac 数据馈送到 Flash Player 的“本机”媒体播放器中。它只能从 NetStream 播放这些文件。您*可以*播放嵌入的 mp3 *（*和其他一些无损格式），但您需要视频，我明白了。

我想看看我是否可以做一些劫持并让你知道我是否成功，但我不抱希望。

从这篇关于[这个令人震惊的离奇疏忽](http://kaioa.com/node/81)的文章中......

> flash.media.Video 需要一个 flash.net.NetStream。这意味着您无法加载嵌入的视频..."

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-25T19:06:21.367

您可以使用 swfObject 的参数拉取文件。这还取决于您使用的播放器类型。

# wcf - Windows 激活服务 + WCF 是 COM+ 的替代品吗

> ID：705805
> 
> 赞同：1
> 
> 时间：2009-04-01T14:33:55.803
> 
> 标签：wcf, architecture, windows-server-2008, com+, was

WAS 功能

*   应用程序池
*   回收
*   空闲时间管理
*   身份管理
*   隔离

听起来很像 COM+，但托管在 IIS 7 中。有人在使用这项技术吗？我比较两者是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T22:05:18.370

据我了解，这是微软试图让人们使用 HTTP 绑定以外的方式，而不用担心自托管。.NET 和它的一组功能，现在早期版本的框架和 WCF 中的远程处理是 COM/COM+ 的替代品。WAS 只是另一种通过额外功能轻松托管 WCF 服务的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:40:59.310

我不认为 WAS 提供了 COM+ 及其前身 MTS 提供的那种分布式事务管理。所以 WAS 并不是 COM+ 的真正替代品，尽管它确实提供了一些相同的功能。

# css - 控制重叠滚动条

> ID：705806
> 
> 赞同：2
> 
> 时间：2009-04-01T14:34:28.563
> 
> 标签：css, internet-explorer

在 IE 7 中（尚未针对其他版本的 IE 进行测试），当我调整浏览器的大小时，我页面上的一个 iframe 中的滚动条会变为活动状态（如我所愿）。

然而，页面上可见的控件（文本框、带边框的 div）与（水平和垂直）滚动条重叠。就好像它们的 z-index 比滚动条的 z-index 更高。

有人知道我能做些什么来确保不会发生这种情况吗？

[截图 http://www.freeimagehosting.net/uploads/c45a9d78a3.png](http://www.freeimagehosting.net/uploads/c45a9d78a3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-03T14:19:07.420

将 iframe 上的滚动属性更改为 auto 而不是 yes，并且滚动条的行为符合预期。

```
<iframe class="frmProperty" height="100%" frameborder="0" id="ifrmProperty" name="ifrmProperty" width="100%" scrolling="auto" ></iframe> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-01T15:37:38.053

这是一个已知的回归，当 IE7 发布时（也发生在 IE8 中），MS 拒绝了（来自他们有点公开的错误跟踪器）

这只***发生***在 IE7 或 IE8 中的**<frames>**

**<iframe>**没问题。

基本上使用框架集和 IE7+ 是非常痛苦的。我强烈反对它。

# iis - 应用程序池资源

> ID：705808
> 
> 赞同：0
> 
> 时间：2009-04-01T14:35:55.127
> 
> 标签：iis, application-pool

我在同一个 IIS 上有 2 个网站指向相同的代码库，因为它们是白标网站。现在我应该为每个网站创建应用程序池还是应该为两者使用相同的应用程序池？

我担心该服务器上的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T14:38:40.457

如果您有两个网站和相同的代码库，您不妨在同一个应用程序池中运行它们，因为代码更改已经存在风险。

现在，如果一个网站有可能比另一个网站拥有更多的流量，那么您可能需要单独做一个来为每个网站设置不同的资源限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:39:37.537

如果你想控制内存和cpu等资源以及带宽，你需要为每个站点建立一个资源池。不确定您所说的相同代码库是什么意思，每个资源池都在自己的进程中运行，因此在跨站点共享资源时要小心。

# python - 有什么方法可以在python中使用相同的项目循环迭代？

> ID：705811
> 
> 赞同：0
> 
> 时间：2009-04-01T14:36:46.590
> 
> 标签：python, iterator

在不接收下一项的情况下循环迭代是一种常见的编程任务。例如：

```
for sLine in oFile :
  if ... some logic ... :
    sLine = oFile.next()
    ... some more logic ...
    # at this point i want to continue iteration but without
    # getting next item from oFile. How can this be done in python? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-01T14:38:23.640

我首先以为您想要`continue`关键字，但这当然会让您获得下一行输入。

我想我难住了。当循环遍历文件的行时，如果继续循环而没有得到新行，究竟会发生什么？

您要再次检查线路吗？如果是这样，我建议添加一个内部循环，该循环一直运行到您“完成”输入行，然后您可以`break`退出，或者使用`while`-condition 和标志变量来终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T17:09:30.187

只需创建一个您自己的迭代器，它可以让您将数据推回到流的前面，这样您就可以给循环一个您想再次查看的行：

```
next_lines = []
def prependIterator(i):
    而真：
        如果 next_lines:
            产量（next_lines.pop（））
        别的：
            产量（i.next（））

对于 prependIterator(oFile) 中的 sLine：
    如果...一些逻辑...：
        sLine = oFile.next()
        ...更多的逻辑...
        # 将行放回去以便读取
        # 再次回到“for”
        ＃ 陈述
        next_lines.append(sLine)

```

如果 prepend_list 从未被触及，那么 prependIterator 的行为与它传递的任何迭代器完全相同：内部的 if 语句将始终为 False 并且它只会产生它已传递的迭代器中的所有内容。但是，如果在迭代期间的任何时候将项目放在 prepend_list 上，那么这些项目将首先被生成，而不是在它返回到从主迭代器读取之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:43:57.213

你需要的是一个简单的、确定性的[有限状态机](http://www.ibm.com/developerworks/library/l-python-state.html)。像这样的东西...

```
state = 1
for sLine in oFile:
   if state == 1:
      if ... some logic ... :
         state = 2
   elif state == 2:
      if ... some logic ... :
         state = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T14:40:45.210

您可以将 file.readlines() 放入列表中，而不是逐行遍历文件。然后遍历列表（如果需要，您可以查看下一个项目）。例子：

```
list = oFile.readlines()
for i in range(len(list))
    #your stuff
    list[i] #current line
    list[i-1] #previous line
    list[i+1] #next line 
```

您只需使用 [i-1] 或 [i+1] 即可转到上一行或下一行。你只需要确保无论如何，我都不会超出范围。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T14:51:29.457

丑陋。将身体包裹在另一个环中。

```
for sLine in oFile :
  while 1:
    if ... some logic ... :
      sLine = oFile.next()
      ... some more logic ...
      continue
    ... some more logic ...
    break 
```

好一点：

```
class pushback_iter(object):
    def __init__(self,iterable):
        self.iterator = iter(iterable)
        self.buffer = []
    def next(self):
        if self.buffer:
            return self.buffer.pop()
        else:
            return self.iterator.next()
    def __iter__(self):
        return self
    def push(self,item):
        self.buffer.append(item)

it_file = pushback_iter(file)
for sLine in it_file:
    if ... some logic ... :
        sLine = it_file.next()
        ... some more logic ...
        it_file.push(sLine)
        continue
    ... some more logic ... 
```

不幸的是，没有引用当前迭代器的简单方法。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-01T14:54:36.643

您可以将迭代器分配给一个变量，然后使用 .next 获取下一个。

```
iter = oFile.xreadlines() # is this the correct iterator you want?
try:
  sLine = iter.next()
  while True:
    if ... some logic ... :
      sLine = iter.next()
      ... some more logic ...
      continue
    sLine = iter.next()
except StopIterator:
  pass 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-04-01T18:15:34.583

您只需要从迭代器中创建一个变量，然后对其进行操作：

```
% 猫 /tmp/alt-lines.py 
#! /usr/bin/python -tt

import sys

lines = iter(open(sys.argv[1]))
for line in lines:
    print line,
    lines.next() 
% 猫 /tmp/test
1
2
3
4
% /tmp/alt-lines.py /tmp/test
1
3

```

...请注意，在这种情况下，我们无条件地执行 lines.next() ，因此对于具有奇数行的文件，上述操作失败，但我认为您不会出现这种情况（并且添加错误检查相当简单 - - 只需在手册 .next() 中捕获并丢弃 StopIteration。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2009-04-01T14:49:41.630

jle 的方法应该有效，尽管您不妨使用 enumerate()：

```
for linenr, line in enumerate(oFile):
    # your stuff 
```

# wpf - 如何将 WPF 选项卡项标题拉伸到父控件宽度

> ID：705815
> 
> 赞同：35
> 
> 时间：2009-04-01T14:37:51.970
> 
> 标签：wpf, xaml, tabs, controls, stretch

XAML 中是否有办法使选项卡项标题延伸到选项卡控件的宽度？

例如，我有三个选项卡：红色、蓝色和绿色。如果我有一个宽度设置为自动的选项卡控件，则选项卡标题只会填满选项卡内容上方的部分空间，但我希望它们填满所有空间。对于我的三个选项卡示例，红色应该占据控件的前三分之一，蓝色应该占据中间三分之一，绿色应该占据最后三分之一。

我知道如何在我现在正在处理的代码中执行此操作，但我有兴趣以最简单的方式执行此操作。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-04-29T21:36:04.820

我以乔丹为例，对其进行了一些修改。此版本适用于任意数量的选项卡：

```
namespace WpfApplication1.Converters
{
    public class TabSizeConverter : IMultiValueConverter
    {
        public object Convert(object[] values, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            TabControl tabControl = values[0] as TabControl;
            double width = tabControl.ActualWidth / tabControl.Items.Count;
            //Subtract 1, otherwise we could overflow to two rows.
            return (width <= 1) ? 0 : (width - 1);
        }

        public object[] ConvertBack(object value, Type[] targetTypes, object parameter,
            System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
    }
} 
```

xaml 中的相同命名空间：

```
xmlns:local="clr-namespace:WpfApplication1.Converters" 
```

这将使所有选项卡都使用它：

```
<Window.Resources>
    <local:TabSizeConverter x:Key="tabSizeConverter" />
    <Style TargetType="{x:Type TabItem}">
        <Setter Property="Width">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource tabSizeConverter}">
                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor,
            AncestorType={x:Type TabControl}}" />
                    <Binding RelativeSource="{RelativeSource Mode=FindAncestor,
            AncestorType={x:Type TabControl}}" Path="ActualWidth" />
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-03-26T00:07:24.537

每个人似乎都在使用转换器路线，但实际上就像在模板中`UniformGrid`使用`Rows`设置为 1的. 当然，您将不得不重新模板化，但这还不错。`TabControl``TabPanel`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-29T19:05:09.987

我可以使用这样的转换器来做到这一点：

```
namespace WpfApplication1.Converters
{
    public class SizeConverter : IValueConverter
    {
        #region IValueConverter Members

        public object Convert(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            double width = Double.Parse(value.ToString());
            //Subtract 1, otherwise we could overflow to two rows.
            return .25 * width - 1;
        }

        public object ConvertBack(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }

        #endregion
    }
} 
```

然后将命名空间添加到我的 xaml：

```
xmlns:local="clr-namespace:WpfApplication1.Converters" 
```

然后让所有 TabItems 使用转换器：

```
<Window.Resources>
        <local:SizeConverter x:Key="sizeConverter" />
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Width" Value="{Binding ElementName=x_Grid, Path=ActualWidth, Converter={StaticResource sizeConverter}}" />
        </Style>
    </Window.Resources> 
```

x_Grid 是父元素的 x:Name 我希望选项卡是 1/4，如果这有意义的话。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-24T12:08:20.913

我是一个老派风格的人。并且更喜欢将这种功能封装到控件本身的代码中。我的派生控件如下所示：

```
 public class CustomTabControl :TabControl
{
    protected override void OnRenderSizeChanged(System.Windows.SizeChangedInfo sizeInfo)
    {
        foreach (TabItem item in this.Items)
        {
            double newW = (this.ActualWidth / Items.Count) - 1;
            if (newW < 0) newW = 0;

            item.Width = newW;
        }            
    }       
} 
```

我的 XAML 看起来像

```
</infrastructure:CustomTabControl>
     <TabItem />
     <TabItem />
</infrustracture:CustomControl> 
```

有人可以解释为什么每个人都喜欢样式控制而不是派生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-04T18:07:22.777

通过将宽度绑定到父选项卡控件的 ActualWidth 是可能的，如下所示。

我已经将它包装成一种样式以应用于所有标签页。

```
<Grid>
      <Grid.Resources>
        <Style TargetType="TabItem">
            <Setter Property="Width" Value="{Binding    
                     Path=ActualWidth,    
                     RelativeSource={RelativeSource    
                    Mode=FindAncestor,    
                    AncestorType={x:Type TabControl}}}"/>
        </Style>
    </Grid.Resources>

<TabControl>
    <TabItem Header="Page3"/>
    <TabItem Header="Page2"/>
    <TabItem Header="Page3"/>            
</TabControl> 
</Grid> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-17T09:47:52.310

我通过创建一个特殊的转换器解决了这个问题：

```
 public class TabItemWidthAdjustmentConverter : IValueConverter
    {
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        Double lTabControlWidth = value is Double ? (Double)value : 50; // 50 just to see something, in case of error
        Int32 lTabsCount = (parameter != null && parameter is String) ? Int32.Parse((String)parameter) : 1;
        return lTabControlWidth / lTabsCount;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
    } 
```

我在 TabControl 的 Tag 元素中计算一个选项卡项的值，以避免单独为每个选项卡计算它。这是示例代码（请注意，在我的情况下，我需要一个水平 ScrollViewer，因为我有多个选项卡项，并且具有最小宽度）：

```
<TabControl Name="tabControl" VerticalAlignment="Stretch" SelectionChanged="TabControl_SelectionChanged" 
                    Tag="{Binding RelativeSource={RelativeSource Self}, Path=ActualWidth, Converter={StaticResource tabItemWidthAdjustmentConverter}, ConverterParameter=15}"><!-- Here 15 because I have 15 tabs -->
            <TabControl.Template>
                <ControlTemplate TargetType="TabControl">
                    <StackPanel>
                        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled">
                            <TabPanel x:Name="HeaderPanel"
                                      Panel.ZIndex="1"
                                      KeyboardNavigation.TabIndex="1"
                                      IsItemsHost="True"/>
                        </ScrollViewer>
                        <ContentPresenter x:Name="PART_SelectedContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                          Margin="{TemplateBinding Padding}"
                                          ContentSource="SelectedContent"/>
                    </StackPanel>
                </ControlTemplate>
            </TabControl.Template>
            <TabItem Header="Tab1" MinWidth="115" VerticalAlignment="Stretch" Width="{Binding ElementName=tabControl, Path=Tag}">
                <ContentControl ContentTemplate="{StaticResource My_TemplateTab1}">
                    <ContentPresenter />
                </ContentControl>
            </TabItem>
            <TabItem Header="Tab2" MinWidth="115" Height="50" Width="{Binding ElementName=tabControl, Path=Tag}">
                <ContentControl ContentTemplate="{StaticResource My_TemplateTab2}">
                    <ContentPresenter />
                </ContentControl>
            </TabItem>
            <!-- Here another 13 tabs which I skipped -->
            </TabControl> 
```

我可以说这对我来说就像一个魅力:) 希望有人会觉得它有用！

PS 在我的情况下，我不需要/想要任何风格。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-21T09:45:18.573

这是一个仅使用模板的无痛解决方案：

```
<Window x:Class="Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:EffectLibrary="clr-namespace:EffectLibrary;assembly=EffectLibrary"
        mc:Ignorable="d"
        Title="Window1" Height="300" Width="300">
    <TabControl Style="{DynamicResource TabControlStyle}" ItemContainerStyle="{DynamicResource TabItemStyle}" BorderBrush="{DynamicResource Pallete.Primary}" Foreground="{DynamicResource Pallete.Primary}" Background="Transparent" Margin="0" d:LayoutOverrides="Height">
        <TabControl.Resources>
            <Style x:Key="TabControlStyle" TargetType="{x:Type TabControl}">
                <Setter Property="Padding" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Center"/>
                <Setter Property="VerticalContentAlignment" Value="Center"/>
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderBrush" Value="#093A5F"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Foreground" Value="#001423"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabControl}">
                            <Border x:Name="Bg" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                                <Grid x:Name="templateRoot" ClipToBounds="true" SnapsToDevicePixels="true" KeyboardNavigation.TabNavigation="Local">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition x:Name="ColumnDefinition0"/>
                                        <ColumnDefinition x:Name="ColumnDefinition1" Width="0"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition x:Name="RowDefinition0" Height="Auto"/>
                                        <RowDefinition x:Name="RowDefinition1" Height="*"/>
                                    </Grid.RowDefinitions>
                                    <UniformGrid x:Name="headerPanel" IsItemsHost="True" Margin="0">
                                        <UniformGrid.Style>
                                            <Style TargetType="{x:Type UniformGrid}">
                                                <Setter Property="Rows" Value="1"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource TemplatedParent}}" Value="Right">
                                                        <Setter Property="Columns" Value="1"/>
                                                        <Setter Property="Rows" Value="0"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource TemplatedParent}}" Value="Left">
                                                        <Setter Property="Columns" Value="1"/>
                                                        <Setter Property="Rows" Value="0"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </UniformGrid.Style>
                                    </UniformGrid>
                                    <Border x:Name="contentPanel" Grid.Column="0" KeyboardNavigation.DirectionalNavigation="Contained" Grid.Row="1" KeyboardNavigation.TabIndex="2" KeyboardNavigation.TabNavigation="Local" BorderThickness="0,1,0,0" BorderBrush="{TemplateBinding BorderBrush}">
                                        <ContentPresenter x:Name="PART_SelectedContentHost" ContentSource="SelectedContent" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                    </Border>
                                </Grid>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="TabStripPlacement" Value="Bottom">
                                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="1"/>
                                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                                    <Setter Property="Height" TargetName="RowDefinition1" Value="Auto"/>
                                </Trigger>
                                <Trigger Property="TabStripPlacement" Value="Left">
                                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="0"/>
                                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                                    <Setter Property="Grid.Column" TargetName="headerPanel" Value="0"/>
                                    <Setter Property="Grid.Column" TargetName="contentPanel" Value="1"/>
                                    <Setter Property="Width" TargetName="ColumnDefinition0" Value="Auto"/>
                                    <Setter Property="Width" TargetName="ColumnDefinition1" Value="*"/>
                                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                                    <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                                </Trigger>
                                <Trigger Property="TabStripPlacement" Value="Right">
                                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="0"/>
                                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                                    <Setter Property="Grid.Column" TargetName="headerPanel" Value="1"/>
                                    <Setter Property="Grid.Column" TargetName="contentPanel" Value="0"/>
                                    <Setter Property="Width" TargetName="ColumnDefinition0" Value="*"/>
                                    <Setter Property="Width" TargetName="ColumnDefinition1" Value="Auto"/>
                                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                                    <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter Property="Effect" TargetName="templateRoot">
                                        <Setter.Value>
                                            <EffectLibrary:DesaturateEffect DesaturationFactor=".25"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="TabItemStyle" TargetType="{x:Type TabItem}">
                <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
                <Setter Property="Foreground" Value="{Binding Foreground, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}}"/>
                <Setter Property="Background" Value="{Binding Background, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}}"/>
                <Setter Property="BorderBrush" Value="{Binding BorderBrush, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type TabControl}}}"/>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="Padding" Value="0,5"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TabItem}">
                            <Grid x:Name="templateRoot" SnapsToDevicePixels="true"  Background="{TemplateBinding Background}">
                                <Border x:Name="mainBorder" BorderBrush="{TemplateBinding BorderBrush}">
                                    <Border x:Name="highlightBorder"/>
                                </Border>
                                <ContentPresenter x:Name="contentPresenter" ContentSource="Header" Focusable="False" HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsEnabled" Value="false">
                                    <Setter Property="Effect" TargetName="templateRoot">
                                        <Setter.Value>
                                            <EffectLibrary:DesaturateEffect DesaturationFactor=".25"/>
                                        </Setter.Value>
                                    </Setter>
                                </Trigger>
                                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true">
                                    <Setter TargetName="highlightBorder" Property="Background" Value="#0B79CE"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}" Value="Top">
                                    <Setter TargetName="mainBorder" Property="BorderThickness" Value="0,0,1,0"/>
                                    <Setter TargetName="highlightBorder" Property="Height" Value="2"/>
                                    <Setter TargetName="highlightBorder" Property="VerticalAlignment" Value="Bottom"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}" Value="Bottom">
                                    <Setter TargetName="mainBorder" Property="BorderThickness" Value="0,0,1,0"/>
                                    <Setter TargetName="highlightBorder" Property="Height" Value="2"/>
                                    <Setter TargetName="highlightBorder" Property="VerticalAlignment" Value="Top"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}" Value="Left">
                                    <Setter TargetName="mainBorder" Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter TargetName="highlightBorder" Property="Width" Value="2"/>
                                    <Setter TargetName="highlightBorder" Property="HorizontalAlignment" Value="Right"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource AncestorType={x:Type TabControl}}}" Value="Right">
                                    <Setter TargetName="mainBorder" Property="BorderThickness" Value="0,0,0,1"/>
                                    <Setter TargetName="highlightBorder" Property="Width" Value="2"/>
                                    <Setter TargetName="highlightBorder" Property="HorizontalAlignment" Value="Left"/>
                                </DataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </TabControl.Resources>
        <TabItem Header="Years">
            <ListBox Background="{DynamicResource Pallete.Primary.Brightest}" Foreground="{DynamicResource Pallete.Primary}">
                <TextBlock Text="2015"/>
                <TextBlock Text="2016"/>
                <TextBlock Text="2017"/>
            </ListBox>
        </TabItem>
        <TabItem Header="Tables">
            <ListBox  Background="{DynamicResource Pallete.Primary.Brightest}" Foreground="{DynamicResource Pallete.Primary}">
                <TextBlock Text="Table1..."/>
                <TextBlock Text="Table2..."/>
                <TextBlock Text="Table3..."/>
            </ListBox>
        </TabItem>
    </TabControl>
</Window> 
```

希望我已经包含了所有颜色，它会为你工作。啊……啪！我的去饱和效果！[我的 WPF 启动项目](https://github.com/zORg-alex/zWPF-Startup-Project)，您可以根据需要从那里获取该效果（在触发器中添加效果比重新着色所有内容更容易，与高光相同）。是的，这是很多代码，但我只是将 ItemsContainer 更改为更好看，并用 UniformGrid 替换标准 Header 控件，并根据 TabStripPlacement 将 Rows 或 Columns 设置为 1。现在我可以折叠这段代码，或者把它藏在某个地方。:)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-10T07:45:23.613

我听从了查理的建议，继续重新设计路线。这是一个简单的实现，`TabControl`它在它的 s 之间平均分配可用空间`TabItem`，使用`UniformGrid`：

**控件的 XAML**

```
<TabControl x:Class="YourNamespace.Views.BigTabsTabControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:YourNamespace.Views"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
            Padding="2" HorizontalContentAlignment="Center" VerticalContentAlignment="Center"
            BorderThickness="1" Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}">

    <TabControl.Resources>
        <SolidColorBrush x:Key="TabItem.Selected.Background" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TabItem.Selected.Border" Color="#ACACAC"/>
    </TabControl.Resources>

    <TabControl.Style>
        <Style TargetType="{x:Type TabControl}">
            <Setter Property="Background" Value="{StaticResource TabItem.Selected.Background}"/>
            <Setter Property="BorderBrush" Value="{StaticResource TabItem.Selected.Border}"/>
        </Style>
    </TabControl.Style>

    <TabControl.Template>
        <ControlTemplate TargetType="{x:Type TabControl}">
            <Grid x:Name="templateRoot" ClipToBounds="true" SnapsToDevicePixels="true" KeyboardNavigation.TabNavigation="Local">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="ColumnDefinition0"/>
                    <ColumnDefinition x:Name="ColumnDefinition1" Width="0"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition x:Name="RowDefinition0" Height="Auto"/>
                    <RowDefinition x:Name="RowDefinition1" Height="*"/>
                </Grid.RowDefinitions>

                <UniformGrid x:Name="headerPanel" Background="Transparent" Grid.Column="0" IsItemsHost="true" Grid.Row="0" KeyboardNavigation.TabIndex="1" Panel.ZIndex="1" />
                <Border x:Name="contentPanel" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="0" KeyboardNavigation.DirectionalNavigation="Contained" Grid.Row="1" KeyboardNavigation.TabIndex="2" KeyboardNavigation.TabNavigation="Local">
                    <ContentPresenter x:Name="PART_SelectedContentHost" ContentSource="SelectedContent" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                </Border>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="TabStripPlacement" Value="Bottom">
                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="1"/>
                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                    <Setter Property="Height" TargetName="RowDefinition1" Value="Auto"/>
                    <Setter Property="Margin" TargetName="headerPanel" Value="2,0,2,2"/>
                </Trigger>
                <Trigger Property="TabStripPlacement" Value="Left">
                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="0"/>
                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                    <Setter Property="Grid.Column" TargetName="headerPanel" Value="0"/>
                    <Setter Property="Grid.Column" TargetName="contentPanel" Value="1"/>
                    <Setter Property="Width" TargetName="ColumnDefinition0" Value="Auto"/>
                    <Setter Property="Width" TargetName="ColumnDefinition1" Value="*"/>
                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                    <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                    <Setter Property="Margin" TargetName="headerPanel" Value="2,2,0,2"/>
                </Trigger>
                <Trigger Property="TabStripPlacement" Value="Right">
                    <Setter Property="Grid.Row" TargetName="headerPanel" Value="0"/>
                    <Setter Property="Grid.Row" TargetName="contentPanel" Value="0"/>
                    <Setter Property="Grid.Column" TargetName="headerPanel" Value="1"/>
                    <Setter Property="Grid.Column" TargetName="contentPanel" Value="0"/>
                    <Setter Property="Width" TargetName="ColumnDefinition0" Value="*"/>
                    <Setter Property="Width" TargetName="ColumnDefinition1" Value="Auto"/>
                    <Setter Property="Height" TargetName="RowDefinition0" Value="*"/>
                    <Setter Property="Height" TargetName="RowDefinition1" Value="0"/>
                    <Setter Property="Margin" TargetName="headerPanel" Value="0,2,2,2"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="TextElement.Foreground" TargetName="templateRoot" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </TabControl.Template>
</TabControl> 
```

**控制的代码隐藏**

```
using System.Windows.Controls;
using System.Windows.Controls.Primitives;

namespace YourNamespace.Views
{
  /// <summary>
  /// A TabControl with large tabs. 
  /// </summary>
  public partial class BigTabsTabControl : TabControl
  {
    public BigTabsTabControl()
    {
      InitializeComponent();
    }

    public override void OnApplyTemplate()
    {
      base.OnApplyTemplate();

      if (this.Template != null)
      {
        UniformGrid X = this.Template.FindName("headerPanel", this) as UniformGrid;
        if (X != null) X.Columns = this.Items.Count;
      }
    }
  }
} 
```

就是这样。您现在可以将`TabItem`s 添加到此控件，它们将自动调整其宽度。也不需要`Grid.Column`为这些`TabItem`s 指定，即使在设计时，它们也可以在没有它的情况下正常工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-01T16:05:21.043

我不知道它是否适用于标签，但每当我需要拉伸任何东西来填充容器时，我都会使用[ViewBox](http://msdn.microsoft.com/en-us/library/system.windows.controls.viewbox.aspx)。这就是你要找的东西吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-08-12T12:29:41.357

除了 Ryan Versaw 接受的提供相等 tabItem 标题宽度的解决方案之外，我还发现了以下方法使其依赖于每个标题的长度。

首先，我们通过将此行添加到 xaml 多重绑定来获取每个 tabItem 标头的字符串。这样就变成了：

```
<MultiBinding Converter="{StaticResource tabSizeConverter}">
           <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}" />
           <Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type TabControl}}" Path="ActualWidth" />
           <Binding Path="Header" RelativeSource="{RelativeSource Self}"/>
</MultiBinding> 
```

Converter 中还有一些代码（values[] 也获得了 tabItem Header）：

```
public object Convert(object[] values, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        TabControl tabControl = values[0] as TabControl;

        string AllHeaders = "";
        for (int i = 0; i < tabControl.Items.Count; i++)
        {
            int index = tabControl.Items[i].ToString().IndexOf("Header:") + "Header:".Length;
            string currentHeader = tabControl.Items[i].ToString().Substring(index);
            currentHeader = currentHeader.Substring(0, currentHeader.Length - " Content:".Length);
            AllHeaders += currentHeader;
        }

        //Normalize width according to header length
        double width = values[2].ToString().Length * tabControl.ActualWidth / AllHeaders.Length;

        //Subtract 1, otherwise we could overflow to two rows.
        var retVal = (width <= 1) ? 0 : (width - 1);
        return retVal;
    } 
```

我怀疑可能有一种更有效的方法来获取所有标题的 AllHeaders 字符串，但它可以正常工作......

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-01-21T18:13:17.147

我正在使用以下解决方案：在主窗口中，我使用窗口调整大小事件和 tabcontrol Initialized 事件来设置每个选项卡的宽度。数字“5”对应于我的标签数量。

```
 private void tabchanger_Initialized(object sender, EventArgs e)
    {
        foreach (TabItem item in tabchanger.Items)
        {
            double newW = (tabchanger.ActualWidth / 5) - 1;
            if (newW < 0) newW = 0;

            item.Width = newW;
        }

    }

    private void Window_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        foreach (TabItem item in tabchanger.Items)
        {
            double newW = (tabchanger.ActualWidth / 5) - 1;
            if (newW < 0) newW = 0;

            item.Width = newW;
        }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-12-03T14:18:13.357

这是最快速的解决方案：

```
<TabControl.Template>
    <ControlTemplate TargetType="TabControl">
        <DockPanel>
            <UniformGrid IsItemsHost="True" Rows="1" DockPanel.Dock="Top"></UniformGrid>
            <ContentPresenter ContentSource="SelectedContent"></ContentPresenter>
        </DockPanel>
    </ControlTemplate>
</TabControl.Template> 
```

# vba - 如何外壳到 exe 并从 Excel 工作表传递单元格值

> ID：705818
> 
> 赞同：1
> 
> 时间：2009-04-01T14:38:37.820
> 
> 标签：vba, excel

这在 Excel 中可行吗？

我有一个包含多个工作表的工作簿。我在代码模块中编写了一些 vba 代码，以将其转换为 exe 并将其单元格值作为参数传递。

我想要做的是在我的任何工作表中选择一个单元格或行，然后在将几个单元格中的值传递给 Sub 时调用我的 Shell Sub。最好使用热键组合。

我遇到问题的部分是从热的嘿中调用代码模块中的子程序。

你能帮忙吗？任何示例代码？

非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:00:12.167

找到了我的答案！它是在来自 Leith Ross 的帖子中找到的...

[http://www.excelforum.com/excel-programming/590157-keyboard-shortcut-to-run-sub-module-in-vb.html](http://www.excelforum.com/excel-programming/590157-keyboard-shortcut-to-run-sub-module-in-vb.html)

如果您的宏是 Sub，那么很容易为您的宏分配快捷键。在 Excel 中，键入 ALT+F8 以显示宏列表。通过单击选择宏的名称。在对话框的右下角，单击“选项..”。然后，您可以分配一个快捷键并添加宏的描述，以供其他人查看它何时在宏列表中被选中。

这正是我所需要的。

# database - 在 Ubuntu 上的 Oracle XE 下创建新数据库

> ID：705823
> 
> 赞同：11
> 
> 时间：2009-04-01T14:39:25.337
> 
> 标签：database, oracle, ubuntu, oracle-xe

我刚刚在 Ubuntu 中安装了 Oracle XE。除了安装附带的数据库之外，还有什么方法可以创建新数据库，最好是从命令行创建，以便我可以从脚本中创建？如果可能的话，最好同时启动多个数据库。

如果无法创建新数据库，那么也许有办法“清理”默认数据库？我需要的是能够随时使用新数据库“重新开始”。

我没有 Oracle 管理经验，因此欢迎提供任何提示、链接和建议。

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2009-04-01T20:02:37.510

我不知道你是否意识到这一点，但大多数初学者都对 Oracle 感到困惑：

在 Oracle 中，*数据库*是指存储在磁盘上的数据文件和控制文件的集合。您只能拥有一个带有 Oracle XE 的数据库。数据库由 Oracle*实例**安装*，这意味着您可以看到的所有后台守护程序和程序。*`ps`*

 *您可能需要一个*模式*，这是其他 DBMS 产品（例如 MySQL）通常称为“数据库”的内容。IIRC 对 Oracle XE 中的模式数量没有限制。您可以从 XE 附带的 APEX UI 或从命令行创建这些（`CREATE USER`再次令人困惑的是，在这种情况下，*用户*和*模式*在很大程度上是同义词）。

我建议阅读 Oracle 文档中的*概念*指南，其中涵盖了大部分基本内容（例如，在 Oracle 语言中如何调用事物）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T17:10:19.343

不可以。不能安装多个 XE 实例。Oracle XE 仅允许从[Oracle XE 主页](http://www.oracle.com/technology/products/database/xe/index.html)按机器一个实例，您可以阅读：

> *Oracle Database XE 可以安装在具有任意数量的 CPU 的任何大小的主机上（**每台机器一个数据库**），但 XE 将存储多达 4GB 的用户数据，使用多达 1GB 的内存，并在主机上使用一个 CPU。*

要添加更多实例，您可以：

*   通过虚拟机使用具有 XE 实例的虚拟化。
*   免费下载开发/个人使用的任何其他[Oracle 数据库版本](http://www.oracle.com/database/product_editions.html)，例如[Oracle 标准版一](http://www.oracle.com/database/std_one.html)。

无论如何，在大多数情况下，对于所有场景来说，只有一个实例就足够了。解释为什么您需要更多实例来帮助解决解决方案。

要重新创建 Xe 实例，最好和最简单的方法是卸载 i 并重新安装。

# asp.net-mvc - 如何使用 Rhino Mocks 模拟 HttpContext.Application

> ID：705833
> 
> 赞同：7
> 
> 时间：2009-04-01T14:41:10.573
> 
> 标签：asp.net-mvc, rhino-mocks, httpcontext

我是 Mocking 框架的新手，并且已经开始使用 RhinoMocks 来协助我的 MVC 应用程序单元测试。

我正在使用[Scott Hanselmanns MVC Mock Helper](http://www.hanselman.com/blog/ASPNETMVCSessionAtMix08TDDAndMvcMockHelpers.aspx)来协助模拟 HttpContext。我已经成功地（一段时间后）模拟了一些我需要的东西，但是在涉及到 HttpContext 的 Application 属性时却没有解决问题。

在我的应用程序中，我将一个对象存储在应用程序中并在控制器中检索它，例如：

```
SomeObj foo = (SomeObj)Application["fooKey"]; 
```

这是在我的 MVC 应用程序中的 Application_Start 上创建的。

**更新以下第一个答案**（为清楚起见附加代码）目前在测试设置中我做：

```
HttpContextBase mockHttpBase = mocks.FakeHttpContext();
controllerToTest = new SomeController();
mocks.SetFakeControllerContext(controllerToTest);

HttpApplicationStateBase appState = 
    MockRepository.GenerateStub<HttpApplicationStateBase>();

Globals tmpAppGlobals = 
    new Globals();

mockHttpBase.Expect(ctx => ctx.Application).Return(appState);
mockHttpBase.Expect(ctx => ctx.Application[Globals.GlobalsKey]).
    Return(tmpAppGlobals); 
```

在我的单元测试设置中，我这样做：

```
Globals tmpAppGlobals = new Globals();
controllerToTest.ControllerContext.HttpContext.
            Expect(ctx => ctx.Application[Globals.GlobalsKey]).
Return(tmpAppGlobals); 
```

此调用为 Application 对象引发 NullReference 异常。

我的问题有两个：

1）这是正确的方法还是我从设计/架构的角度做错了什么？

2）为什么这不起作用？！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:06:58.000

无需深入研究，这看起来大多是正确的。

Application 属性在 HttpContextBase 上是虚拟的，因此您应该能够从 Rhino 为它设置一个返回值——假设您像 Scott Hanselmanns 的帖子那样模拟 HttpContextBase。

一些可能的原因，实际上只是缺乏信息的猜测：

*   您是否为 controllerToTest.ControllerContext 设置了返回？
*   *您是否为该* 对象的 HttpContext 属性设置了返回值？
*   *您是否为该* 对象的应用程序属性设置了返回？

我问的原因是，通常当您进行期望设置时，您已经拥有对将作为测试的一部分调用的对象的引用，因此您不会像`controllerToTest.ControllerContext.HttpContext. Expect()`调用时那样执行属性链。

**编辑：**

我想我看到了问题，我认为这与这部分有关：

`Expect(ctx => ctx.Application[Globals.GlobalsKey])`

我认为您假设索引器的工作方式与属性相同，但实际上它们并非如此。您真正需要做的是在您的`appState`对象上设置一个期望以接收对 Item 属性的调用，如下所示：

```
// setup expectations -- assumes some of the expectations and mocks 
// the from original question
mockHttpBase.Expect(ctx => ctx.Application).Return(appState);
appState.Expect(ctx => ctx.Item(Globals.GlobalsKey)).Return(tmpAppGlobals);

// run the test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-08-16T22:04:01.277

您可以将以下内容用于最小起订量。我花了一段时间来模拟 HttpApplication，而 appState.Object 是返回方法，呵呵！

```
public static HttpContextBase FakeHttpContext()
    {
        var context = new Mock<HttpContextBase>();
        var request = new Mock<HttpRequestBase>();
        var response = new Mock<HttpResponseBase>();
        var session = new FakeHttpSessionState();
        var server = new Mock<HttpServerUtilityBase>();
        var appState = new Mock<HttpApplicationStateBase>();

        context.Setup(ctx => ctx.Request).Returns(request.Object);
        context.Setup(ctx => ctx.Response).Returns(response.Object);
        context.Setup(ctx => ctx.Session).Returns(session);
        context.Setup(ctx => ctx.Server).Returns(server.Object);
        context.Setup(ctx => ctx.Application).Returns(appState.Object);

        //emulate session (HttpContext.Current.Session) 
        var contx = new HttpContext(new MyApp.NUnit.Tests.Fakes.FakeHttpWorkerRequest());
        contx.Items["AspSession"] = CreateSession();

        HttpContext.Current = contx;

        return context.Object;
    } 
```

# c# - 如何从 C# 代码创建 .chm 文件？

> ID：705836
> 
> 赞同：7
> 
> 时间：2009-04-01T14:42:00.947
> 
> 标签：c#, .net, documentation, chm

我使用[doxygen](http://www.doxygen.nl/)创建 HTML 文件，现在我想将该文档转换为 .chm 格式。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-01T14:45:17.397

NDoc 是一个死项目，它的继任者是[Sandcastle](http://www.sandcastledocs.com/) & [Sandcastle Helpfile Builder](http://www.codeplex.com/SHFB)。

我已经使用了两个 Sandcastle 项目。它们易于设置，具有良好的文档，并且 chm 文件生成是应用程序的本机。如果可以切换，那将是比 doxygen 更好的选择。

否则，请查看此链接以获取 HTML 到 chm 信息：http: [//younsi.blogspot.com/2007/04/doxygen-to-html-to-chm.html](http://younsi.blogspot.com/2007/04/doxygen-to-html-to-chm.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-10-23T13:28:54.370

原来的 NDoc 项目已经死了，但是有一个名为[NDoc3](https://sourceforge.net/projects/ndoc3/)的新项目。

NDoc3 支持 .NET 2.0 - 3.5。它目前作为测试版提供，对我来说效果很好。我不确定该项目是否仍然有效——最后一个测试版是在 2009 年 4 月发布的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-30T06:53:17.663

除了 Doxygen，您需要的只是 HTML 帮助编译器，您可以在 Microsoft 网站上找到它。

然后，您可以使用 Doxywizard 将 Doxygen 指向编译器可执行文件 (hhc.exe)。选中“GENERATE_HTMLHELP”框，选择放置 .chm 文件的位置，一切顺利。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-18T08:55:10.417

如果你不喜欢有外部帮助编译器（部署需要正式部署整个 SDK afaik），还有 libchm，它是一个可以编写 chms 的开源 C 库。

Delphi 用户可能希望查看 Free Pascal 的 libchm 并行实现，因为 pascal 解决方案使其更易于嵌入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-01T14:43:01.303

使用[NDoc](http://ndoc.sourceforge.net/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-08-28T14:44:59.300

如果适合你，你可以试试[KEL CHM Creator 。](http://www.google.gr/search?q=kel%20chm%20creator)

# java - 如何在 Eclipse 中安装 Web 平台工具？

> ID：705837
> 
> 赞同：5
> 
> 时间：2009-04-01T14:42:18.340
> 
> 标签：java, eclipse, servlets

我应该从哪个 URL 安装这个和任何 pre-reqs，我该如何安装它们？在过去的 1 个小时里一直在努力解决这个问题，但没有运气。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-05T22:56:44.200

2013 年的新答案：它似乎取决于您正在运行的 Eclipse 版本。

1.  单击“帮助”->“关于 eclipse sdk”以查找版本（例如 4.2.2）。
2.  可选地，根据版本号，您可以知道来自维基百科的代号（例如 Juno）：[http ://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases](http://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases)
3.  去这里：[http ://wiki.eclipse.org/WTP_FAQ#How_do_I_install_WTP.3F](http://wiki.eclipse.org/WTP_FAQ#How_do_I_install_WTP.3F)
4.  右键单击正确的 WTP 链接复制链接地址（例如 WTP 3.4）（它们应按版本和代号列出）
5.  现在在 Eclipse 中，单击“帮助”->“安装新软件...”并将链接位置粘贴到“使用”字段中（例如“ [http://download.eclipse.org/webtools/repository/juno/](http://download.eclipse.org/webtools/repository/juno/) ” ）。
6.  选择“Web Tools Platform (WTP #.#.#)”并单击下一步并安装所有内容。
7.  重新启动 eclipse，关闭所有打开的文件并重新打开它们以使 Web 工具开始工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T16:25:34.053

如果您可以使用 Eclipse 的全新安装。[下载企业 Java 版](http://www.eclipse.org/home/categories/index.php?category=enterprise)。WTP 它包含在这个 Eclipse 发行版中。当您需要更新 WTP 时，您可以通过“Eclipse Software Updates”工具获取更新。

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-15T10:46:52.367

您可以从 Eclipse 帮助菜单下载 WTP。以下是将 WTP 下载到 Eclipse 中的链接。

[http://download.eclipse.org/webtools/updates](http://download.eclipse.org/webtools/updates)

[在 Eclipse 中安装软件菜单](https://i.stack.imgur.com/D1ZpS.png)

下图显示了安装新软件窗口。

[安装新软件窗口](https://i.stack.imgur.com/8DCKR.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T14:48:17.420

我尽量坚持使用[Pulse](http://www.poweredbypulse.com)，它会为您处理大量 Eclipse 插件的配置。顺便说一句，我与他们没有联系，但对这项服务非常满意。WTP 是他们提供的功能之一。

# php - 如何验证php中的下拉菜单？

> ID：705839
> 
> 赞同：0
> 
> 时间：2009-04-01T14:42:26.640
> 
> 标签：php, mysql

我们必须通过验证在 MySql 中插入出生日期（这是一个包含 DD/MM/YYYY 的下拉框）。如何做呢？

* * *

它是由用户从下拉菜单中的选项输入的出生日期的表单验证。我的问题是如何使用 PHP 在 MySql 中插入该输入 DOB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T14:55:44.143

你可以首先做（对于每个领域）：

```
if((int) $field == 0)
{
    return false;
} 
```

之后你可以这样做：

```
$birthday = date('Y-m-d', strtotime($day . '-' . $month . '-' . $year));
mysql_query("INSERT INTO your_table(birthday) VALUES('" . $birthday . "')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T18:30:31.193

我假设下拉是指一系列这样的选择，对吧？

```
<select name="month">
<option value ="01">January</option>
<option value = "02">February<option>
...
</select>
<select name="day">
<option value = "01">01</option>
...
</select>
<select name="year">
<option value = "1930">1930</option>
[etc.] 
```

如果是这种情况，那么您的数据就是自我验证的。在服务器端，你可以这样做：

```
<?php
$mysql_date = "$_POST[year]" . "-" . "$_POST[month]" . "-" . "$_POST[day]";
mysql_query("INSERT INTO your_table (`date`) VALUES ('$mysql_date')");
?> 
```

希望我没有误解这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-03T06:34:54.043

你的问题有点令人困惑。“通过验证”插入数据是没有意义的。

如果您想知道如何插入数据，那么这是一个基本的 MySQL 问题，最好通过咨询[在线文档](http://dev.mysql.com/doc/refman/5.1/en/insert.html)来回答。

如果您想知道如何验证数据，您将不得不指定您想要的验证类型——正如桑德斯所回答的那样。这有点像问“我如何制作 GUI？” 有无数种方法可以做到。问题太模糊了。

如果您只是想检查提交的值是否是有效日期，那么一种快速而肮脏（懒惰）的方法就是将其插入表中（假设您有一个[DATE/DATETIME 类型](http://dev.mysql.com/doc/refman/5.0/en/datetime.html)的列），然后进行后续查询以检索存储的值。如果存储的值是该数据类型的“零”值（即“0000-00-00”或“0000-00-00 00:00:00”），则提交的值不是有效日期。

所以你的代码看起来像：

```
<?
$month = mysql_real_escape_string($_POST['month']);
$day = mysql_real_escape_string($_POST['day']);
$year = mysql_real_escape_string($_POST['year']);
$query = "INSERT INTO my_table (`birthday`) VALUES ('$year-$month-$day')";
mysql_query($query);
$query = "SELECT `birthday` FROM my_table WHERE `id`=LAST_INSERT_ID()";
$qid = mysql_query($query);
$res = mysql_fetch_object($query);
if ($res->birthday == '0000-00-00') {
    // submitted date was invalid
}
?> 
```

当然，上面的代码有很多缺点。理想情况下，您可能希望在插入数据*之前*对其进行验证，并且如果您正在更新记录而不是插入新记录，那么您需要在它被无效记录覆盖之前获取原始值。

顺便说一句：我认为您的意思是说“下拉列表”或“选择列表”。下拉菜单是另一回事。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-01T14:48:53.567

什么样的验证？当日期无效时mysql会打印错误

# .net - 在 WCF 中序列化 SQLParameter 的任何解决方案或解决方法？

> ID：705841
> 
> 赞同：4
> 
> 时间：2009-04-01T14:42:45.283
> 
> 标签：.net, wcf

我最初在 MessageContract 中定义了一个 SQLParameters 集合，以便通过 WCF 服务创建一个简单的存储过程执行。显然，SQLParameter 类型不可序列化，所以我需要一些关于如何在此处进行的建议。

是否仍然可以以某种方式使用 SQLParameter 作为我的 WCF 合同的一部分，或者我必须做其他事情，比如创建一个与 SQLParameter 具有相同属性的自定义类，然后在我的代码中的其他地方创建 SQLParameters？

**更新：**
为了进一步了解为什么会出现这种情况，最初 Windows 窗体客户端使用通常的 ADO.NET 对象直接连接到数据库以检索用于报告目的的 DataSet。现在，客户需要一个通用的 Web 服务来处理所有报告。这是我能想到的最好的处理它而无需太多更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-16T17:54:06.237

我对接受的回应感到相对不知所措：

> 您可能会发现您想进一步重构它们，以减少数量或提高抽象级别。但如果不是，那么您应该将所有这些方法提取到一个或多个接口中。这些接口将成为您的 WCF 服务的 ServiceContracts。将方法移到新服务中以实现这些服务契约，您就大功告成了。

从根本上说，这是对简单的预定义业务逻辑的正确响应；但是，对于不同的抽象级别，例如运行*临时*sql 查询所需的服务，不能简单地通过预定义的服务调用来提供这种级别的灵活性。

对于在 WCF 服务环境中工作*的临时*查询，必须传递参数以保护系统并防止各种 SQL 注入式攻击向量。

以防万一，我已经构建了一个服务，作为业务需求，它需要将数据层从客户端抽象出来，并允许第三方与不同数据库系统上的多个数据库进行交互。

对于这个系统，我采用了上面 Craig H 的方法，并创建了一个**SerializableSqlParam**类作为列表对象传递给我的服务。

**我的SerializableSqlParam**类的好处如下：

1.  SqlParameter 类的直接序列化和类型转换。
2.  序列化对象以 UTF-16 字符串格式存储，以允许[SQL 服务器保存对象](https://stackoverflow.com/questions/1564718/using-stringwriter-for-xml-serialization)。
3.  正确使用 AssemblyQualifiedName 以允许反序列化不在直接程序集中的对象。
4.  完成 SqlParameter 类参数的编组。

一般用法如下：

```
SerializedSqlParam sp = new SerializedSqlParam(new SqlParameter("@id", 1));

//or through typecasting:

SqlParameter parameter = new SqlParameter("@id", 1);
SerializedSqlParam sp = (SerializedSqlParam) parameter; 
```

要反序列化，只需执行以下操作：

```
SqlParameter parameter = sp.GetSqlParameter();

//or through typecasting

SqlParameter parameter = (SqlParameter) sp; 
```

这是我的课。我确信有些事情可以修复/改进；但是，这只是为了传达这个概念。希望其他读者会发现这很有帮助！

**序列化SqlParam.cs**

```
[DataContract]
public class SerializedSqlParam
{
    [Browsable(false)]
    [DataMember]
    public string CompareInfo { get; set; } 

    [RefreshProperties(RefreshProperties.All)]
    [DataMember]
    public string Direction { get; set; }

    [DataMember]
    public bool IsNullable { get; set; }

    [Browsable(false)]
    [DataMember]
    public int LocaleId { get; set; }

    [Browsable(false)]
    [EditorBrowsable(EditorBrowsableState.Advanced)]
    [DataMember]
    public int Offset { get; set; }

    [DataMember]
    public string ParameterName { get; set; }

    [DefaultValue(0)]
    [DataMember]
    public byte Precision { get; set; }

    [DefaultValue(0)]
    [DataMember]
    public byte Scale { get; set; }

    [DataMember]
    public int Size { get; set; }

    [DataMember]
    public string SourceColumn { get; set; }

    [DataMember]
    public bool SourceColumnNullMapping { get; set; }

    [DataMember]
    public string SourceVersion { get; set; }

    [DataMember]
    public string SqlDbType { get; set; }

    [DataMember]
    public string TypeName { get; set; }

    [DataMember]
    public string UdtTypeName { get; set; }

    [DataMember]
    public string Value { get; set; }

    [DataMember]
    public string ValueType { get; protected set; }

    [DataMember]
    public string XmlSchemaCollectionDatabase { get; set; }
    [DataMember]
    public string XmlSchemaCollectionName { get; set; }
    [DataMember]
    public string XmlSchemaCollectionOwningSchema { get; set; }

    public SerializedSqlParam(SqlParameter p)
    {
        this.CopyProperties(p);
        this.SerializeParameterValue(p);
    }

    public static explicit operator SerializedSqlParam(SqlParameter p)
    {
        return new SerializedSqlParam(p);
    }

    public static explicit operator SqlParameter(SerializedSqlParam p)
    {
        return p.GetSqlParameter(p);
    }

    public SqlParameter GetSqlParameter()
    {
        return this.GetSqlParameter(this);
    }

    public SqlParameter GetSqlParameter(SerializedSqlParam serialized)
    {
        SqlParameter p = new SqlParameter();

        p.ParameterName = serialized.ParameterName;
        p.Precision = serialized.Precision;
        p.Scale = serialized.Scale;
        p.Size = serialized.Size;
        p.IsNullable = serialized.IsNullable;
        p.LocaleId = serialized.LocaleId;
        p.Offset = serialized.Offset;
        p.SourceColumn = serialized.SourceColumn;
        p.SourceColumnNullMapping = serialized.SourceColumnNullMapping;

        p.XmlSchemaCollectionDatabase = serialized.XmlSchemaCollectionDatabase;
        p.XmlSchemaCollectionName = serialized.XmlSchemaCollectionName;
        p.XmlSchemaCollectionOwningSchema = serialized.XmlSchemaCollectionOwningSchema;

        p.TypeName = serialized.TypeName;
        p.UdtTypeName = serialized.UdtTypeName;

        p.Direction = (ParameterDirection)Enum.Parse(typeof(ParameterDirection), serialized.Direction);
        p.CompareInfo = (SqlCompareOptions)Enum.Parse(typeof(SqlCompareOptions), serialized.CompareInfo);
        p.SourceVersion = (DataRowVersion)Enum.Parse(typeof(DataRowVersion), serialized.SourceVersion);

        p.Value = this.DeserializeObject(serialized.Value, Type.GetType(serialized.ValueType));

        return p;
    }

    private void SerializeParameterValue(SqlParameter p)
    {
        if (p.Value.GetType().IsSerializable)
        {
            this.ValueType = this.GetTypeAssemblyQualifiedName(p.Value);
            this.Value = this.SerializeObject(p.Value);
        }
        else
        {
            throw new SerializationException("Cannot serialize the parameter value object. Recast that object into a primitive or class that can be serialized.");
        }
    }

    private void CopyProperties(SqlParameter p)
    {
        this.ParameterName = p.ParameterName;
        this.Precision = p.Precision;
        this.Scale = p.Scale;
        this.Size = p.Size;
        this.IsNullable = p.IsNullable;
        this.LocaleId = p.LocaleId;
        this.Offset = p.Offset;
        this.SourceColumn = p.SourceColumn;
        this.SourceColumnNullMapping = p.SourceColumnNullMapping;

        this.XmlSchemaCollectionDatabase = p.XmlSchemaCollectionDatabase;
        this.XmlSchemaCollectionName = p.XmlSchemaCollectionName;
        this.XmlSchemaCollectionOwningSchema = p.XmlSchemaCollectionOwningSchema;

        this.TypeName = p.TypeName;
        this.UdtTypeName = p.UdtTypeName;

        this.Direction = p.Direction.ToString();
        this.CompareInfo = p.CompareInfo.ToString();
        this.SourceVersion = p.SourceVersion.ToString();

        try
        {
            this.SqlDbType = p.SqlDbType.ToString();
        }
        catch
        {
            this.SqlDbType = null;
        }
    }

    private string SerializeObject(object value)
    {
        if (value == null) return null;

        XmlSerializer serializer = new XmlSerializer(value.GetType());
        XmlWriterSettings settings = new XmlWriterSettings();

        settings.Encoding = new UnicodeEncoding(false, false);
        settings.Indent = false;
        settings.OmitXmlDeclaration = false;

        using (StringWriter textWriter = new StringWriter())
        {
            using (XmlWriter xmlWriter = XmlWriter.Create(textWriter, settings))
            {
                serializer.Serialize(xmlWriter, value);
            }
            return textWriter.ToString();
        }
    }

    private object DeserializeObject(string xml, Type type)
    {
        if (string.IsNullOrEmpty(xml)) return null;

        XmlSerializer serializer = new XmlSerializer(type);

        XmlReaderSettings settings = new XmlReaderSettings();
        using (StringReader textReader = new StringReader(xml))
        {
            using (XmlReader xmlReader = XmlReader.Create(textReader, settings))
            {
                return Convert.ChangeType(serializer.Deserialize(xmlReader), type);
            }
        }
    }

    private string GetTypeAssemblyQualifiedName(object obj)
    {
        return obj.GetType().AssemblyQualifiedName.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T14:51:26.040

首先 - 如果您希望通过 WCF 进行“类似数据库”的访问，那么 ADO.NET 数据服务是一个更好的选择。

但不是; 您不能通过 WCF 序列化 SqlParameter；您需要将其封装在其他表示形式中。请注意，IMO 将数据库逻辑暴露在如此接近 WCF 边界的位置是非常危险的——我只需要 WCF 方法来抽象它——即

```
[OperationContract]
Customer[] FindCustomers(string id, string name, string location, ...); 
```

然后你就有了一个严格控制的服务接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-02T00:58:07.580

听起来你试图采取太多简单的方法。我将重构那些用于进行直接数据库访问的方法，主要是通过使用“提取方法”重构。这会给您留下（大量）小方法，每个方法都接受一组参数并返回一个 DataSet，并且每个都有特定的目的。

您可能会发现您想进一步重构它们，以减少数量或提高抽象级别。但如果不是，那么您应该将所有这些方法提取到一个或多个接口中。这些接口将成为您的 WCF 服务的 ServiceContracts。将方法移到新服务中以实现这些服务契约，您就大功告成了。

当然，这更适用于自动化单元测试和良好的代码覆盖率。这将为做如此激进的事情提供必要的信心水平。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-08T08:41:57.510

我刚刚为 sql 参数创建了一个简单的序列化包装器

```
#region

using System;
using System.Data;
using System.Data.SqlClient;
using System.Xml.Serialization;

#endregion

[Serializable]
public class SQLParamSerializationWrapper
{
    #region Constants and Fields

    private SqlParameter param;

    #endregion

    #region Constructors and Destructors

    public SQLParamSerializationWrapper()
    {
        //paramless constructor for serialization
        this.param = new SqlParameter();
    }

    public SQLParamSerializationWrapper(SqlParameter param)
    {
        this.SQLParam = param;
    }

    #endregion

    #region Properties

    public DbType DbType
    {
        get
        {
            return this.SQLParam.DbType;
        }
        set
        {
            this.SQLParam.DbType = value;
        }
    }

    public ParameterDirection Direction
    {
        get
        {
            return this.SQLParam.Direction;
        }
        set
        {
            this.SQLParam.Direction = value;
        }
    }

    public string ParameterName
    {
        get
        {
            return this.SQLParam.ParameterName;
        }
        set
        {
            this.SQLParam.ParameterName = value;
        }
    }

    [XmlIgnore]
    public SqlParameter SQLParam
    {
        get
        {
            return this.param;
        }
        set
        {
            this.param = value;
        }
    }

    public int Size
    {
        get
        {
            return this.SQLParam.Size;
        }
        set
        {
            this.SQLParam.Size = value;
        }
    }

    public object Value
    {
        get
        {
            return this.SQLParam.Value;
        }
        set
        {
            this.SQLParam.Value = value;
        }
    }

    #endregion
} 
```

然后您可以按如下方式使用它

序列化（我使用参数列表）：-

```
List<SQLParamSerializationWrapper> procParams = new List<SQLParamSerializationWrapper>();
            SqlParameter startdate = new SqlParameter("dateStart", new DateTime(2011, 9, 5));
            SqlParameter enddate = new SqlParameter("dateEnd", new DateTime(2011, 9, 6));

            SQLParamSerializationWrapper startDateWrapper = new SQLParamSerializationWrapper(startdate);
            SQLParamSerializationWrapper endDateWrapper = new SQLParamSerializationWrapper(enddate);

            procParams.Add(startDateWrapper);
            procParams.Add(endDateWrapper);

            string paramsAsXML = "";

            using (var sw = new StringWriter())
            {
                using (var xw = XmlWriter.Create(sw))
                {
                    XmlSerializer xs = new XmlSerializer(procParams.GetType());
                    xs.Serialize(xw, procParams);
                }
                paramsAsXML = sw.ToString();
            } 
```

反序列化：-

```
var procParams = new List<SqlParameter>();

StringReader sr = new StringReader(parm.Value);
                        // Create an instance of the XmlSerializer specifying type.
                        XmlSerializer deserializer = new XmlSerializer(typeof(List<SQLParamSerializationWrapper>));

                        List<SQLParamSerializationWrapper> sqlParamWrapper = (List<SQLParamSerializationWrapper>)deserializer.Deserialize(sr);

                        foreach (var param in sqlParamWrapper)
                        {
                            procParams.Add(param.SQLParam);
                        } 
```

# windows - 如何创建拖放式草莓 Perl 程序？

> ID：705851
> 
> 赞同：13
> 
> 时间：2009-04-01T14:44:09.817
> 
> 标签：windows, perl, drag-and-drop, strawberry-perl

我有一个[Strawberry Perl](http://www.strawberryperl.com)程序，它接受单个文件作为命令行参数。如何进行设置，以便可以将所需的文件拖放到 Strawberry Perl 程序（或围绕它的包装器）上，并且程序以该文件的名称作为参数运行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-01T14:57:36.370

在 Windows 下（用 XP 测试），您可以创建一个 .cmd 文件并简单地让它运行带有 %1 参数的 Perl 程序来传递文件名，就像通过命令行执行一样。

```
perl c:\test.pl %1 
```

然后，您只需将文件拖放到 .cmd 文件上即可执行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-01T16:38:28.873

哎呀！请不要在不需要时创建包装脚本/cmd。

进入您的注册表或 Windows 中的文件类型对话框，然后重新定义 Perl 默认操作：

```
"C:\path-to-perl-folders\perl.exe" "%1" %* 
```

这将导致双击 .PL 以使用双击文件 (%1) 的名称启动 perl.exe。%* 东西（将任何文件名参数传递给 Perl 脚本）比较棘手。

再次进入注册表（真的，没有人们想象的那么可怕）并在 Perl 类下找到/创建一个“shellex”键，然后创建一个名为“DropHandler”的子键，默认字符串值为“{86C86720 -42A0-1069-A2E8-08002B30309D}”（至少，这是我在美国版 Windows XP 中的 DropHandler）。

这允许 .pl 文件（实际上是与 Perl 类相关的任何东西）有一个放置处理程序，它告诉资源管理器当您在 .pl 脚本上放置文件时要做什么。在这种情况下，它只是意味着“以删除的文件作为参数运行 Perl 脚本”。

嗯，我不认为我解释得很好，但这就是我为大型工程组织设置 Perl（运行网络驱动器）的方式。谷歌 Perl 和 DropHandler，你应该可以得到 .reg Registry 脚本来为你做这件事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-29T01:33:35.903

这是“包装器”的另一种替代方案，但需要对 perl 脚本稍作修改：

1.  将您的 script.pl 脚本重命名为 script.cmd。
2.  将以下内容添加到文件顶部：

> `@SETLOCAL ENABLEEXTENSIONS`
> `@c:\path\to\perl.exe -x "%~f0" %*`
> `@exit /b %ERRORLEVEL%`
> `#!perl`
> `#line 6`
> `# ...perl script continues here...`

该脚本像任何其他批处理文件一样运行。前三行基本上是在 CMD 文件本身上调用 Perl（`%~f0`只有在打开 CMD 扩展时才有效）。`-x`perl.exe的参数告诉 Perl 跳过所有内容，直到该`#!perl`行。" `#line 6`" 只是帮助调试。

当我对目标系统不太了解（并且可能无法编辑注册表）时，这是我的首选解决方案。

# wpf - 绑定元素名称。它使用可视树还是逻辑树

> ID：705853
> 
> 赞同：20
> 
> 时间：2009-04-01T14:44:16.447
> 
> 标签：wpf, binding, elementname, visual-tree, logical-tree

有了`{Binding ElementName=foo}`，它会查找视觉树还是逻辑树？

[WPF 中的逻辑和可视化树 数据看，数据做](https://blogs.msdn.microsoft.com/mikehillberg/2008/05/23/of-logical-and-visual-trees-in-wpf/)

> 逻辑树何时重要？
> 
> 在查找名称时，例如在 {Binding ElementName=Foo} 中，搜索会沿着祖先查找名称范围，就像它对可继承属性所做的那样。

[通过附加行为在 Silverlight 中绑定 ElementName](http://blog.scottlogic.com/2009/02/22/elementname-binding-in-silverlight-via-attached-behaviours.html)

> 为了实现这一点，WPF 提供了 ElementName 和 RelativeSource 绑定，为您提供了一种强大的机制来定位可视树中的其他元素以绑定到

**编辑：**

它看起来像用于绑定的逻辑树`ElementName`。

论据＃1。

根据 MSDN 文章[FrameworkElement 类](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.aspx)：

> FrameworkElement 扩展了 UIElement 并添加了以下功能：
> 
> *   对数据绑定和动态资源引用的支持：对数据绑定和资源的属性级支持由 DependencyProperty 类实现并体现在属性系统中，但能够解析存储为表达式的成员值（编程构造作为数据绑定和动态资源的基础）由 FrameworkElement 实现。有关详细信息，请参阅数据绑定概述和资源概述。

论点＃2。

`ElementName`指向`x:Name`，所以应该如何找到这个名称。有一个[NameScope](http://msdn.microsoft.com/en-us/library/system.windows.namescope.aspx)概念。

> 对于大多数情况，在 FrameworkElement 和 FrameworkContentElement 上公开的 FindName 方法是更适合调用以按名称搜索元素的方法。FrameworkElement 和 FrameworkContentElement 公开的 Name 属性更适合用于将初始名称设置为标记属性。并且在 FrameworkElement 和 FrameworkContentElement 上公开的 RegisterName 方法对于在特定名称范围内建立名称是必要的（没有 NameScope 成员可以直接执行此操作；您必须先设置当前名称范围才能使用 RegisterName）。

另一方面，[Visual 类](http://msdn.microsoft.com/en-us/library/system.windows.media.visual.aspx)既没有`FindName`方法，也没有实现[INameScope](http://msdn.microsoft.com/en-us/library/system.windows.markup.inamescope.aspx)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-05-22T19:13:26.267

我认为这是逻辑树。使用 ControlTemplates 时，您将一个可视化树替换为另一个，但我认为您不能引用 ControlTemplate 内部定义的名称。

例如：

```
<Page
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
        <Grid.Resources>
            <ControlTemplate x:Key="Foo" TargetType="Button">
                <Border x:Name="border" Background="Red">
                    <Label Content="{TemplateBinding Content}"></Label>
                </Border>
            </ControlTemplate>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Button x:Name="buttonFoo" Background="Green" HorizontalAlignment="Center" VerticalAlignment="Center" Template="{DynamicResource Foo}">Foo</Button>
        <Label x:Name="labelBar" Grid.Column="1"  HorizontalAlignment="Center" VerticalAlignment="Center" Background="{Binding ElementName=border, Path=Background}">Bar</Label>
    </Grid>
</Page> 
```

在 ControlTemplate 中找不到名为“border”的元素，但将 labelBar 绑定中的 ElementName 更改为“buttonFoo”会使背景变为绿色，如预期的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T15:50:31.570

某种意义上的`ElementName`绑定属性*（请参阅下面的答案）*在逻辑树上起作用，因为人们正在使用`ElementName`仅在 Xaml 中的逻辑树上预测特定控件。

> 它会查找视觉树还是逻辑树？

您提出的前提是错误的，任何一棵树本身都没有*查找。*一种是简单地为绑定使用的反射操作设置**Source**`DataContext`属性，而不是默认为逻辑树的继承。

如果阅读[Binding.ElementName Property (System.Windows.Data)](https://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname%28v=vs.110%29.aspx)的文档（我的粗体字）：

> “...ElementName 属性是您可以显式设置绑定**源**并覆盖继承的数据上下文的方法之一。”

源是当前操作命名空间内的**任何实例化对象**，可以访问和反映。

不多不少，最有可能在逻辑树中（但也没有），因为人们在 Xaml 中*命名*了逻辑项，但也可能在可视树中。

* * *

有关详细信息，请参阅[数据绑定概述](https://msdn.microsoft.com/en-us/library/ms752347(v=vs.110).aspx)。

# c++ - 如何获取重载成员函数的地址？

> ID：705854
> 
> 赞同：18
> 
> 时间：2009-04-01T14:44:24.873
> 
> 标签：c++, overloading, pointer-to-member

我正在尝试获取指向特定版本的**重载**成员函数的指针。这是示例：

```
class C
{
  bool f(int) { ... }
  bool f(double) { ... }

  bool example()
  {
    // I want to get the "double" version.
    typedef bool (C::*MemberFunctionType)(double);
    MemberFunctionType pointer = &C::f;   // <- Visual C++ complains
  }
}; 
```

错误消息是“错误 C2440: 'initializing' : cannot convert from 'overloaded-function' to 'MemberFunctionType'”

如果`f`没有重载，则此方法有效，但在上面的示例中无效。有什么建议吗？

# 编辑

请注意，上面的代码并没有反映我的实际问题，即我忘记了一个“const”——这就是公认的答案所指出的。不过，我会保持原样，因为我认为这个问题可能发生在其他人身上。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-01T15:05:58.940

好吧，我会回答我已经发表的评论，以便可以接受。问题在于常量：

```
class C
{
  bool f(int) { ... }
  bool f(double) const { ... }

  bool example()
  {
    // I want to get the "double" version.
    typedef bool (C::*MemberFunctionType)(double) const; // const required!
    MemberFunctionType pointer = &C::f;
  }
}; 
```

*澄清：*

最初的问题不包含那个`const`。我在评论中做了一个疯狂的猜测，他是否可能`f`是真实代码中的 const 成员函数（因为在更早的迭代中，事实证明还有另一件事缺失/与真实世界的代码不同：p）。他实际上将它作为一个 const 成员函数，并告诉我应该将其发布为答案。

# python - 在 Django 中缓存来自其他网站的数据

> ID：705855
> 
> 赞同：1
> 
> 时间：2009-04-01T14:44:41.877
> 
> 标签：python, django, caching

假设我有一个需要解析来自外部网站的数据的简单视图。

现在它看起来像这样：

```
def index(request):
    source = urllib2.urlopen(EXTERNAL_WEBSITE_URL)
    bs = BeautifulSoup.BeautifulSoup(source.read())
    finalList = [] # do whatever with bs to populate the list
    return render_to_response('someTemplate.html', {'finalList': finalList}) 
```

首先，这是可以接受的用途吗？

显然，这在性能方面并不好。外部网站页面很大，我只提取其中的一小部分。我想到了两个解决方案：

1.  异步执行所有这些操作。加载页面的其余部分，一旦我得到它就填充数据。但我什至不知道从哪里开始。我刚从 Django 开始，到目前为止从未做过任何异步操作。
2.  我不在乎这些数据是否每 2-3 分钟更新一次，所以缓存也是一个很好的解决方案（也为我节省了额外的往返行程）。我将如何缓存这些数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T14:50:30.943

首先，不要过早优化。让它工作。

然后，添加足够的日志来查看性能问题（如果有的话）到底是什么。

您可能会发现最终用户的 PC 是最慢的部分；实际上，当您不获取 .JS 库和 .CSS 和艺术品以及在浏览器中渲染整个内容时，从另一个站点获取数据可能会非常快。

一旦您完全确定远程内容的获取确实是一个问题。真的。然后，您必须执行以下操作。

1.  编写一个“crontab”脚本，不时执行远程获取表单。

2.  设计一个缓存远程结果的地方。数据库或文件系统，选择一个。

3.  更新您的 Django 应用程序以从缓存（数据库或文件系统）而不是远程 URL 获取数据。

只有在您有绝对证据证明远程站点的 urllib2 读取是瓶颈之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-01T19:23:55.170

使用 django 进行缓存非常简单，

```
from django.core.cache import cache
key = 'some-key'
data = cache.get(key)
if data is None:
    # soupify the page and what not
    cache.set(data, key, 60*60*8)
    return render_to_response ...
return render_to_response 
```

要回答您的问题，您可以异步执行此操作，但是您必须经常使用 django cron 之类的东西来更新缓存。另一方面，您可以将其编写为独立的 python 脚本，用 memcache 替换从 django 导入的缓存，它会以相同的方式工作。它将减少您的站点可能存在的一些性能问题，并且只要您知道缓存键，您就可以从缓存中检索数据。

就像 Jarret 所说，我会阅读 django 的缓存文档和 memcache 的文档以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:51:39.753

Django 对缓存视图具有强大的内置支持：http: [//docs.djangoproject.com/en/dev/topics/cache/#topics-cache](http://docs.djangoproject.com/en/dev/topics/cache/#topics-cache)。

它提供了缓存整个视图（例如在您的情况下）或视图中数据的某些部分的解决方案。甚至可以控制更新缓存的频率等等。

# linux - bash 中的日历计算

> ID：705857
> 
> 赞同：3
> 
> 时间：2009-04-01T14:45:07.913
> 
> 标签：linux, bash, shell, command-line

我想在 bash 中进行一些日历操作 - 具体来说，我想找出给定月份的最后一个日期（包括闰年，并且为查找准备表格对我来说不是一个有效的解决方案）。

假设我有以下代码：

```
$year=2009
$start_month=2
$end_month=10
for $month in $(seq $start_month $end_month); do
  echo "Last date of "$(date +"%B" -d "${year}-${month}-01")" is: " ???
done 
```

我无法弄清楚如何做这样的事情。我虽然`date -d`会像 POSIX mktime 一样工作，并将无效日期折叠到它们的有效等价物，所以我可以说类似`date -d "2009-03-00"`并得到“2009-02-28”，但没有这样的运气。

无论如何，是否只使用标准 GNU 环境中 bash 上可用的东西来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T14:53:55.490

尝试：`date -d 'yesterday 2009-03-01'`

直觉我知道。date 的早期版本用于以 POSIX 方式工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T15:31:37.770

date(1) 的 -d 是 GNU 特定的；所以使用它只能在 GNU Linux 上工作。

一个更便携的解决方案（这甚至应该在`sh`AFAIK 中工作）是：

```
: $(cal 4 2009); echo $_ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-01T14:49:41.553

如果您不介意使用 grep/awk/perl，可以查看`cal`.

```
$ cal 4 2009
     April 2009
Su Mo Tu We Th Fr Sa 
          1  2  3  4
 5  6  7  8  9 10 11
12 13 14 15 16 17 18
19 20 21 22 23 24 25
26 27 28 29 30 
```

编辑（MarkusQ）：为了弥补我在下面的笑话解决方案，我将为您做出贡献：

```
cal 4 2009 | tr ' ' '\n' | grep -v ^$ | tail -n 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:51:54.120

好吧，一种方法是循环观察当前日期，直到月份组件发生变化，将日期组件保存一轮。这会给你这个月的第一天和最后一天，但它可能太慢了。

2009 年 4 月 1 日发布

# ruby - Ruby：无法使用 Libxml-ruby 保存文档

> ID：705862
> 
> 赞同：1
> 
> 时间：2009-04-01T14:46:23.510
> 
> 标签：ruby, libxml-ruby

从 libxml-ruby API 文档（[http://libxml.rubyforge.org/rdoc/index.html](http://libxml.rubyforge.org/rdoc/index.html)），在 LibXML::XML::Document 下，我尝试了以下操作：

```
filename = 'something.xml'
stats_doc = XML::Document.new()
stats_doc.root = XML::Node.new('root_node')
stats_doc.root << XML::Node.new('elem1')
stats_doc.save(filename, :indent => true, :encoding => 'utf-8') 
```

...导致此错误：

```
parse_stats.rb:26:in `save': can't convert String into Integer (TypeError) 
```

（上面块中的最后一行是第 26 行）。

我尝试将文件名更改为整数，这给了我这个：

```
parse_stats.rb:26:in `save': wrong argument type Fixnum (expected String) (TypeError) 
```

所以我收集到我需要使用字符串，但字符串似乎不起作用。由于我似乎无法在 Google 上找到任何运行 libxml-ruby 的示例，所以我很茫然。任何帮助将不胜感激，或者链接到任何在线示例，我可以在其中看到 libxml-ruby 如何用于创建 XML 文档。

libxml-ruby 1.1.3 ruby​​gems 1.3.1 ruby​​ 1.8.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T14:59:49.157

似乎问题出在编码上。尝试[XML::Encoding::UTF_8](http://libxml.rubyforge.org/rdoc/classes/LibXML/XML/Encoding.html)而不是“utf-8”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-18T17:04:43.593

```
require 'rubygems'
require 'libxml'

filename = 'something.xml'
stats_doc = LibXML::XML::Document.new()
stats_doc.root = LibXML::XML::Node.new('root_node')
stats_doc.root << LibXML::XML::Node.new('elem1')
stats_doc.save(filename, :indent => true, :encoding => LibXML::XML::Encoding::UTF_8) 
```

# c - 源文件的编译顺序是如何决定的？

> ID：705866
> 
> 赞同：2
> 
> 时间：2009-04-01T14:46:46.287
> 
> 标签：c, makefile, compilation, nmake

我有一个包含许多 *.c 文件的工作区，我对其进行编译。（我可以使用任何工具链，比如 MSVC6.0 或 gcc 等）

先编译哪个源文件？

随后要编译的文件的顺序是如何决定的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-01T17:02:17.553

C 标准未指定编译顺序。

由于不需要像 C++ 中那样构造全局对象，因此在 C 中不存在编译顺序相关的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-01T14:58:54.323

通常，这在任何地方都没有指定。特别是在使用例如。并行制作，编译顺序几乎是任意的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-01T14:51:24.997

**VC**：按项目文件夹，然后按字母顺序。
**GCC** : 根据 make 文件的顺序

为什么这很重要？完成顺序不会计量，也不会影响最终的构建结果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-01T14:59:55.693

与`make`：

*   目标按照它们出现的顺序进行处理
*   为每个目标构建了一个依赖树，我猜想该树是通过后序评估深度优先遍历的（似乎是它工作的唯一方法，但我在文档中找不到任何指定的内容）

正如[jpalecek 所暗示](https://stackoverflow.com/questions/705866/how-is-the-order-of-compilation-of-source-files-decided/705938#705938)的，并发构建可能更复杂。

* * *

GNU make 文档中的一些引用：

> 目标的双冒号规则按照它们在 makefile 中出现的顺序执行。

...

> 如果您指定了多个目标，请按照您命名它们的顺序依次创建每个目标。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-02T00:40:30.227

如果这很重要，那么你真的需要在你的 makefile 中设置依赖项，以确保一些在其他之前构建。真的，您应该首先问自己为什么这很重要。

# vb6 - 将声音添加到 VB6 程序

> ID：705868
> 
> 赞同：1
> 
> 时间：2009-04-01T14:47:10.653
> 
> 标签：vb6, audio

我是一名试图操纵现有程序的研究生。基本上，用户的任务是用操纵杆跟随目标。我希望程序具有与目标位置相关的脉搏率。我已经设法在代码中找到计算/确定位置的部分，现在我只需要添加一个条件以便播放特定的 .wav 文件。我有一点编程经验，只是从未使用过声音。我使用的是 Visual Basic 6。我只需要快速了解如何添加声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:51:23.793

下面是如何使用 Win API 执行此操作的[快速示例。](http://en.allexperts.com/q/Visual-Basic-1048/play-wav-file-VB6-1.htm)此外，这是来自 Microsoft 的更详细的[答案](http://support.microsoft.com/kb/86281)。

# c++ - Mac 上的 C++ 套接字服务器。帮助！

> ID：705880
> 
> 赞同：0
> 
> 时间：2009-04-01T14:49:16.110
> 
> 标签：c++, macos, sockets, operating-system

我打算用 C++ 编写一个在 Mac 上运行的套接字服务器。我一直在搜索互联网的很大一部分，但没有任何结果。有谁知道从哪里开始？或者甚至有一个基本的源代码？非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T14:52:49.470

我认为 ASIO 库足够独立于平台。

看这里： [Boost](http://www.boost.org/doc/libs/1_38_0/doc/html/boost_asio.html) [Asio 仅限 Asio](http://think-async.com/Asio/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T14:52:16.397

[http://cs.ecs.baylor.edu/~donahoo/practical/CSockets/](http://cs.ecs.baylor.edu/~donahoo/practical/CSockets/)

上面可能是一个很好的起点——通过代码示例很好地简单介绍了套接字 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T15:02:36.920

鉴于 mac 具有 unix-oid 后端（源自 BSD 系列），任何 unix 资源（如[Beej 的套接字指南](http://beej.us/guide/bgnet/)）都应该适用。[此外，像已故的 W. Richard Stevens 所写](http://www.amazon.com/s/ref=nb_ss_gw?url=search-alias%3Daps&field-keywords=unix+network+programming&x=0&y=0)的 unix 网络编程书籍是一个很好的资源，他关于该主题的书籍是印刷中最好的，被认为是该主题的经典著作。

# tfs - 如何恢复 TFS 报告的数据源？

> ID：705902
> 
> 赞同：0
> 
> 时间：2009-04-01T14:53:08.360
> 
> 标签：tfs, ssrs-2008

以下是这种情况： 我有一个 TFS2008 安装。在名为 TFS1 的机器上，数据库位于：DB1。自星期五以来，我无法再连接到报告。

这恰好是我更改密码的那一天。当我打开“报告服务配置”时，我注意到 TFS1 没有初始化。我设法初始化了报告服务。

现在我收到消息：“报表服务器无法访问加密数据。应用备份密钥或删除所有加密内容。(rsEncryptedDataUnavailable) (rsRPCError)”

我之前遇到过这个问题，当时我确实删除了加密的内容。这删除了一个重要的 CRM 报告，我们花了 3 周时间才恢复。所以我不是很喜欢那个选项。我所知道的唯一被加密的是报告数据源。

有没有简单的方法来解决这个错误？我正在考虑重新安装 TFS 的报告服务。我可以在不中断 CRM 报告的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T16:06:57.263

我通过以下方式解决了它：

我创建了两个新的数据源：TfsOlapReportNEW 和 TfsReportNEW，设置如下：

```
"TfsOlapReportNEW"
Select "Microsoft SQL Server Analysis Services"
Place in the connection string "Data source=<SERVER>;initial catalog=TfsWarehouse"
Select "Credentials stored securely in the report server"
Enter the correct credentials for access
select "Use as Windows credentials when connecting to the data source"

"TfsReportNEW"
Select "Microsoft SQL Server"
Place in the connection string "Data source=<SERVER>;initial catalog=TfsWarehouse"
Select "Credentials stored securely in the report server"
Enter the correct credentials for access
select "Use as Windows credentials when connecting to the data source" 
```

在报告中选择属性 > 数据源。相应地选择新创建的数据源，然后单击应用。

# php - Javascript/ajax/php 问题：从服务器发送到客户端有效，从客户端发送到服务器失败

> ID：705903
> 
> 赞同：1
> 
> 时间：2009-04-01T14:53:19.500
> 
> 标签：php, javascript, ajax, session, asynchronous

抱歉重新发布（管理员，请删除另一个！）。既然你们帮了我很大的忙，我有点希望你能在遇到以下问题时再次帮助我：我目前正在尝试使用 AJAX，方法是允许 PHP 中的 managerclass 通过 XmlHttpobject 与上的 javascript 进行通信客户端。但是，我可以通过 JSON 向客户端发送一些内容，但我无法在客户端读取它。事实上，我得到的错误是“时间”是 Session 中未定义的索引。所以我想知道：我做错了什么？

Ajax 的 JavaScript 代码：

```
<script type="text/javascript">
            var sendReq = GetXmlHttpObject();
            var receiveReq = GetXmlHttpObject();
            var JSONIn = 0;
            var JSONOut= 0;
            //var mTimer;   
//function to retreive xmlHTTp object for AJAX calls (correct)
function GetXmlHttpObject()
{
    var xmlHttp=null;
    try
     {
         // Firefox, Opera 8.0+, Safari
         xmlHttp=new XMLHttpRequest();
     }
    catch (e)
     {
         // Internet Explorer
        try
        {
        xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e)
        {
            xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
     }
    return xmlHttp;
}

            //Gets the new info from the server
            function getUpdate() {
                if (receiveReq.readyState == 4 || receiveReq.readyState == 0) {
                    receiveReq.open("GET", "index.php?json="+JSONIn+"&sid=$this->session", true);
                    receiveReq.onreadystatechange = updateState; 
                    receiveReq.send(null);
                }           
            }
            //send a message to the  server.
            function sendUpdate(JSONstringsend) {
                JSONOut=JSONstringsend;
                if (sendReq.readyState == 4 || sendReq.readyState == 0) {
                    sendReq.open("POST", "index.php?json="+JSONstringsend+"&sid=$this->session", true);
                    sendReq.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
                    alert(JSONstringsend);
                    sendReq.onreadystatechange = updateCycle;
                    sendReq.send(JSONstringsend);
                }                           
            }
            //When data has been send, update the page.
            function updateCycle() {
                getUpdate();
            }
            function updateState() {
                if (receiveReq.readyState == 4) {
                    // JSONANSWER gets here (correct):
                    var JSONtext = sendReq.responseText;
                    // convert received string to JavaScript object (correct)
                    alert(JSONtext);
                    var JSONobject = JSON.parse(JSONtext);
                    //   updates date from the JSONanswer (correct):
                     document.getElementById("dateview").innerHTML= JSONobject.date;        

                    }
                    //mTimer = setTimeout('getUpdate();',2000); //Refresh our chat in 2 seconds
                }
    </script> 
```

实际使用ajax代码的函数：

```
//datepickerdata
        $(document).ready(function(){
                $("#datepicker").datepicker({
                    onSelect: function(dateText){
                    var JSONObject = {"date": dateText};
                    var JSONstring = JSON.stringify(JSONObject);
                    sendUpdate(JSONstring);
                    },  
                    dateFormat: 'dd-mm-yy' 
            });

        });

        </script> 
```

和 PHP 代码：

```
private function handleReceivedJSon($json){
    $this->jsonLocal=array();
    $json=$_POST["json"];
    $this->jsonDecoded= json_decode($json, true);
    if(isset($this->jsonDecoded["date"])){
        $_SESSION["date"]=$this->jsonDecoded["date"];
        $this->useddate=$this->jsonDecoded;

    }
    if(isset($this->jsonDecoded["logout"])){
        session_destroy();
        exit("logout");
    }
    header("Last-Modified: " . gmdate( "D, d M Y H:i:s" ) . "GMT" ); 
    header("Cache-Control: no-cache, must-revalidate" ); 
    header("Pragma: no-cache" );
    header("Content-Type: text/xml; charset=utf-8");
    exit($json);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-01T16:41:44.730

我不知道我是否正确。但似乎您使用的是 JQuery 命令而没有实现 JQuery。如果是这样，那么您的 ajax 命令是无用的。

```
$(document).ready(function(){
....
}); 
```

典型的 JQuery 函数。

看看[www.visualjquery.com](http://www.visualjquery.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T17:57:57.823

这里只是一个问题，您是否将旧版应用程序移植到 jquery？

我会首先摆脱这里的“Ajax”调用以在 jquery 中清理它

```
$(...).ajax(...) 
```

或原型

```
ajax = new Ajax.Request(...) 
```

然后当响应返回时，请务必解析/评估 `

```
response.responseText
response.responseText.evalJSON() 
```

ETC ...

# jquery - JQuery - 创建新的单选按钮

> ID：705913
> 
> 赞同：4
> 
> 时间：2009-04-01T14:54:53.240
> 
> 标签：jquery

好的，这就是我到目前为止所拥有的......感谢Paolo。
它工作正常，但前提是我有现有的单选按钮选项。

如果我需要创建一个没有任何预先存在的单选按钮的新单选按钮怎么办？

最终我想要做的是创建一个选项数组，遍历它们并将选项列表输出为单选按钮。所以最初，'abc' div 中不会有单选按钮。

提前致谢！

```
<script>
$(document).ready(function() {
  // add a new input when a new color is chosen, for example
  $('#aaa').change(function() {
      var radio = $('<input>').attr({
          type: 'radio', name: 'colorinput', value: '2', id: 'test'
      });
      $(':radio:last-child', '#abc').after(radio).after('option 3 ');
  });
});

</script>

<form id='abcdef'>
  <select id="aaa">
    <option>red</option>
    <option>blue</option>
    <option>other</option>
  </select>

  <div id="abc">
    Input<BR>
    option 1 <input type="radio" name="colorinput" value="1" /> 
    option 2 <input type="radio" name="colorinput" value="2" /> 
  </div>
  <BR>
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T14:56:57.480

好的，鉴于您更新的问题，应该这样做（或者非常接近）：

```
 $(function() {
    $("#aaa").change(function() {
      $('<input type="radio" name="colorInput" id="test" value="2">')
        .appendTo($("#abc")).before('Option 3');
    });
  }); 
```

要记住的事情：

*   您可以直接在 jQuery 构造函数中构造 HTML；
*   我假设您将使用动态 ID、值和标签。这只是在表达式中连接字符串和变量的问题；
*   您可能需要检查重复项（上面未介绍）；
*   如果你把它们放在一个 div 中，就像你看起来的那样，在上面的方法之后，而不是我最初建议的方法（即 $(":radio:last")) 因为它更快更清晰，并且不依赖于它们是单选按钮已经存在；和
*   除非您使用 jQuery 1.3 live() 事件处理程序，否则新建的 HTML 元素上不会有任何相关的事件处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T15:40:25.267

而不是处理[after](http://docs.jquery.com/Manipulation/after#content)并尝试使用[append](http://docs.jquery.com/Manipulation/append#content)。这样您就不必检查最后一个单选按钮，并且在启动时有 0 个单选按钮时该功能将起作用。

```
var radio = $('<input>').attr({
      type: 'radio', name: 'colorinput', value: '2', id: 'test'
  });
$('#abc').append(radio.after('option 3')); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T15:12:46.910

```
$(":radio:last").after('<input type="radio" name="blah">'); 
```

# windows - Windows 主机文件

> ID：705915
> 
> 赞同：9
> 
> 时间：2009-04-01T14:54:58.543
> 
> 标签：windows, localhost, hosts

这些行之间有什么区别：

```
::1             localhost 
```

...和

```
127.0.0.1       localhost 
```

在 Windows 主机文件中？

最初，我的 hosts 文件中有第一行，然后在浏览器中输入*localhost*将我带到*127.0.0.1*。然后我有一段时间没有在浏览器中使用 localhost 提示符，当我需要再次使用它时，它就不起作用了。我在我的主机文件中将第一行从第二行更改为有效。为什么会这样？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-04-01T14:57:54.683

::1 是 IPv6。

127.0.0.1 是 IPv4。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-01T14:58:02.373

::1 是[IPv6](http://en.wikipedia.org/wiki/IPv6)

127.0.0.1 是[IPv4](http://en.wikipedia.org/wiki/IPv4)

我猜你在测试之间禁用了 IPv6？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-01T14:58:12.420

前者“::1”是 localhost 的 IPv6 压缩语法。它相当于 127.0.0.1。您是否在操作系统或网络适配器中禁用了 IPv6 支持？也许这就是它停止工作的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-01T14:58:13.047

我相信 ::1 是 127.0.0.1 的 IPV6 表示法。

# visual-studio-2008 - 1 VS 解决方案中的混合签名程序集？

> ID：705916
> 
> 赞同：0
> 
> 时间：2009-04-01T14:55:10.947
> 
> 标签：visual-studio-2008, architecture, assemblies, signed

嘿，目前我正在尝试运行一个项目（Noizwaves.Client），该项目具有对签名类库（Noizwaves.Core）的依赖项（作为项目引用）。Noizwaves.Core 的程序集版本设置为 2.0.*。我在同一个 VS2008 解决方案文件中拥有这两个项目。Noizwaves.Client 设置为默认启动项目。

所有项目（和解决方案）在 VS 中构建良好，但是当我运行 Noizwaves.Client 时，我得到以下异常：

无法加载文件或程序集“Noizwaves.Core，Version=2.0.3378.15610，Culture=neutral，PublicKeyToken=bed7327d8103b148”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

当我查看 Noizwaves.Client 的调试目录时，我可以看到 Noizwaves.Core 的版本是 2.0.3378.15613。

我认为项目的构建设置/顺序应该归咎于 VS2008。目前所有设置都设置为默认值。

有没有人可以解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-07T07:55:28.340

Noizwaves.Client 可能正在从不同的位置加载 Noizwaves.Core。GAC 中有 Noizwaves.Core 吗？在 Visual Studio 下的某个文件夹中（例如 C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies）

如果这没有帮助，您可以尝试以下方法：

像这样设置注册表（注意：我建议您复制原始值，以便恢复原始状态）：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion]
"ForceLog"=dword:00000001
"LogFailures"=dword:00000001
"LogPath"="C:\\Temp\\FusionLog" 
```

并创建一个文件夹 C:/Temp/FusionLog。

Fusion 是 .NET 框架的一部分，负责查找/加载程序集。

进行此更改后，您将在该文件夹中找到所有 .NET 应用程序的一堆日志文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T15:00:15.037

Client 项目对 Core DLL 有什么样的引用？它是文件引用还是项目引用？尝试删除引用并将其重新添加为项目引用。

# sharepoint - 使用 Vista 时无法更新 ItemAdded 事件的文档属性

> ID：705920
> 
> 赞同：2
> 
> 时间：2009-04-01T14:56:19.947
> 
> 标签：sharepoint

我们正在尝试创建一个自定义事件处理程序，该处理程序将在 ItemAdded 事件上触发。然后，事件处理程序将具有唯一 ID 值的文档更新到此文档库中的列。

我们的解决方案工作正常，除非 Vista 上的用户试图从 Office 2007 保存新文档。在这种情况下，文档存储到文档库但唯一 ID 列是空的，没有例外。

Vista 用户可以毫无问题地将文档上传到库。其他一切在 XP 和 Win2k3 操作系统上运行良好。

有没有人见过类似的东西，这可能是什么问题？为了演示我们使用 DateTime.Now 作为唯一 ID 的问题。

```
 using Microsoft.SharePoint;

 public class TestReciever : SPItemEventReceiver
 {

     public override void ItemAdded(Microsoft.SharePoint.SPItemEventProperties properties)
     {

         try {
             DisableEventFiring();

             properties.ListItem("UniqueID Column") = DateTime.Now.ToString();
             properties.ListItem.SystemUpdate();

             EnableEventFiring();
         }
         catch (Exception ex) {
             // handle exception
         }

     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T21:17:29.700

我们注意到发生了完全相同的事情。当 2007 文档添加到库中时，列表中的属性将添加到其中（空白）。

然后调用（同步）事件处理程序，使用 UniqueID 列的正确值更新列表。

然后到 2007 文档的内置属性映射启动并用 2007 文档中存储的值覆盖您的值（不再引发项目更新事件）。

这意味着该列表现在为您的列有一个空白。

如果您更改为异步事件，您可能会看到我们所做的事情，并且异步的轻微延迟意味着到 2007 文档的属性映射首先发生（我们认为）意味着值被正确存储。

可以破坏列表和办公室之间的属性映射，但这只是一种解决方法。

我终生无法在 MS 网站上找到此信息，但这是一个已知问题。也许您可以在 SP2 中坚持使用（甚至可能在 SP1 中修复，但我不确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-12T12:45:31.677

最后我们联系了微软，他们为我们提供了以下解决方案。这里的关键是在单独的线程中延迟项目更新。

```
private Guid listID;
private Guid itemID;
private Guid siteID;

public override void ItemAdded(Microsoft.SharePoint.SPItemEventProperties properties)
{
    DisableEventFiring();

    item = properties.ListItem;
    listID = properties.ListId;
    itemID = properties.ListItem.UniqueId;
    siteID = properties.SiteId;

    Threading.Thread setDocumentInternalIDThread = new Threading.Thread(SetInternalID);
    setDocumentInternalIDThread.Start();

    EnableEventFiring();
}

private void SetInternalID()
{
    try {

        Threading.Thread.Sleep(10000);
        using (SPSite site = new SPSite(siteID)) {
            using (SPWeb web = site.OpenWeb()) {

                SPList list = web.Lists(listID);
                SPListItem item = list.Items(itemID);

                item(Common.CustomID) = Common.GetAlphaPrefix() + Common.GetDocNumber();
                item.SystemUpdate();
            }

        }
    }
    catch (Exception ex) {

        Log(ex.Message);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-04T18:42:28.207

另一种解决方法是将事件接收器中正在更新的自定义字段设置为只读（将字段 ReadOnly 属性设置为 TRUE）。这有一些优点和缺点。这是唯一 id 解决方案的理想选择，因为用户无法修改该值。但是，该字段对 UI 是隐藏的，因此管理它变得更加麻烦，并且该字段不能用于标签或快速部件。您可以将字段的 ShowInDisplayForm 属性设置为 TRUE，以使该字段显示在视图窗体中，而不是编辑窗体中。该字段也可以添加到您的视图中。这是迄今为止我为这个问题找到的最好的解决方法。

这是 Office 2007 和 WSS 3.0 xml 解析器的问题。从 Office 2007 文档提升属性时，解析器会尝试将文档属性分配给 SharePoint 中的列表属性（属性提升）。问题是该事件发生在任何 ItemAdded 或 ItemUpdated 事件之后，因此该属性会被文档中的值覆盖，该值当然是空白的。Microsoft 已将此作为错误提出，我希望在 SP2 中进行修复，但没有这样的运气。

# silverlight - Silverlight 数据绑定另一个用户控件中的 textBlock

> ID：705933
> 
> 赞同：0
> 
> 时间：2009-04-01T14:58:13.623
> 
> 标签：silverlight, data-binding

我有一个小的用户控件，它基本上将一个值递增或递减一个。用户控件有两个按钮（一个用于添加，另一个用于减去）和一个用于显示值的 textBlock。

我将在另一个用户控件中拥有此用户控件的多个实例，以便我可以操作具有 INotifyPropertyChanged 接口的数据类的值。我的问题是如何将值更改用户控件的 textBlock 数据绑定到我实例化它的用户控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-01T16:08:21.737

首先，我想声明 Silverlight 2 不支持元素到元素的绑定。Silverlight 3 中添加了该功能（现已推出 Beta 版）。话虽如此，我认为您无论如何都不想将控件绑定在一起。听起来您正在尝试构建一个 NumericUpDown 控件，并且您可能在代码后面有一些类实际上正在执行递增和递减。

如果是这种情况，您可以简单地订阅点击处理程序并调用模型上的方法，例如 Increment 或 Decrement。您的模型可以公开当前值的属性，并且该属性是绑定到您的文本框的内容。

现在，如果您实际上是在尝试构建 NumericUpDown 控件，则可能需要查看 Silverlight Toolkit。该工具包已包含此控件，并且还支持数据绑定。

在此处查看 NumericUpDown 控件并[在](http://www.codeplex.com/Silverlight)[此处](http://silverlight.codeplex.com/Wiki/View.aspx?title=Silverlight%20Toolkit%20Overview%20Part%201&referringTitle=Home&ANCHOR#NumericUpDown)下载工具包。

最后，从子控件绑定到父控件实际上并没有什么不同。父 UserControl 有一个 DataContext 并且所有子控件都继承它。每个单独的子控件也可以有其 DataContext 集。绑定表达式始终与 DataContext 相关，并且可以在代码中设置 DataContext。在您的情况下，可能是某种模型。

我希望这会有所帮助。

# c# - 如何找出 iis7 的 404 错误处理程序中缺少哪个请求路径？

> ID：705934
> 
> 赞同：3
> 
> 时间：2009-04-01T14:58:22.500
> 
> 标签：c#, asp.net, iis, iis-7, httphandler

我正在尝试在 iis 7 中创建自定义错误处理程序。

web.config httpErrors 部分：

```
<httpErrors>
    <remove statusCode="404" subStatusCode="-1" />
    <error statusCode="404" prefixLanguageFilePath="" path="/path/to/handlerwebservice" responseMode="ExecuteURL" />
</httpErrors> 
```

web.config httpHandler 处理错误：

```
<add path="*/path/to/handlerwebservice"          verb="GET,HEAD"     type="WebServices.Image404Handler, WebServices"          validate="false" /> 
```

Image404Handler c#代码：

```
public void ProcessRequest(HttpContext context)
{
    string requestpath;
    if (context.Request.QueryString.AllKeys.Contains("aspxerrorpath"))
    {
        requestpath = context.Request.QueryString["aspxerrorpath"];
    }
    else
    {
        requestpath = context.Request.Path;
    }

    // more code not really relevant here
} 
```

我不知道如何获取导致 404 错误触发的请求的路径。在 IIS 6 中，Visual Studio 2008 使用此路径被添加到查询字符串中的 aspxerrorpath。

我无法进行远程调试，所以我在这里问是否有人知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-02T07:03:36.627

我自己找到了答案。

使用`HttpСontext.Request.RawUrl`代替`HttpСontext.Request.Path`

# c# - 当 RenderMode 为“System”时，ToolStripMenuItem 不能显示复选标记和图像（图标）？

> ID：705937
> 
> 赞同：1
> 
> 时间：2009-04-01T14:58:48.893
> 
> 标签：c#, winforms

我的 Windows 窗体应用程序有一个`MenuStrip`并且一些菜单项 ( `ToolStripMenuItem`) 有一个图标（设置`ToolStripMenuItem.Image`属性）。

当 的`RenderMode`属性`MenuStrip`设置为时，如果or属性为 true 且菜单项有图标`ToolStripRenderMode.System`，则不显示复选标记。`Checked``CheckOnClick`

当我将属性切换到or时，它**会**显示。`MenuStrip.RenderMode``ToolStripRenderMode.Professional``ToolStripRenderMode.RenderManagerMode`

不幸的是，这是一个问题，因为我的应用程序需要：

1.  A`ProgressBar`处于选取框模式，因此`Application.EnableVisualStyles()`需要使其正常工作。
2.  该应用程序需要“平面”视觉样式，我通过省略对MenuStrip的调用`Application.EnableVisualStyles()`并保留默认设置来实现这一点。`ToolStripRenderMode.RenderManagerMode`但后来我无法获得我的选框进度条！
3.  将 设置`RenderMode`为`ToolStripRenderMode.System`解决了外观和感觉要求，但取消了检查带有图标的菜单项的能力。

有什么办法可以满足我的所有要求吗？我错过了什么吗？感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T16:53:19.930

哇，我难住了！现在我知道我必须编写一些严肃的代码。

无论如何，答案是：`ToolStripRenderer`通过创建一个继承自`ToolStripSystemRenderer`.

用您自己的代码覆盖绘制项目的方法。这是我正在寻找的专门绘制检查项目的内容。它会检查是否没有`ToolStripMenuItem`.

```
protected override void OnRenderItemCheck(ToolStripItemImageRenderEventArgs e)
{
    base.OnRenderItemCheck(e);
    if (e.Item.Selected)
    {
        Rectangle rect = new Rectangle(3, 1, 20, 20);
        Rectangle rect2 = new Rectangle(4, 2, 18, 18);
        SolidBrush b = new SolidBrush(Color.FromArgb(49, 106, 197));
        SolidBrush b2 = new SolidBrush(Color.Orange);

        e.Graphics.FillRectangle(b, rect);
        e.Graphics.FillRectangle(b2, rect2);
        e.Graphics.DrawImage(e.Image, new Point(5, 3));
    }
    else
    {
        Rectangle rect = new Rectangle(3, 1, 20, 20);
        Rectangle rect2 = new Rectangle(4, 2, 18, 18);
        SolidBrush b = new SolidBrush(Color.FromArgb(49, 106, 197));
        SolidBrush b2 = new SolidBrush(Color.Orange);

        e.Graphics.FillRectangle(b, rect);
        e.Graphics.FillRectangle(b2, rect2);
        e.Graphics.DrawImage(e.Image, new Point(5, 3));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-06-21T18:41:53.080

我也遇到了一个更简单的选择：

您可以简单地将菜单项放入 ContextMenuStrip，然后将其分配给 DropDownButton 的**DropDown**属性。

希望这对那些不喜欢覆盖 Paint 方法的人有所帮助。

# c# - 如何编写一个工具，在 Windows 中反转颜色？

> ID：705939
> 
> 赞同：2
> 
> 时间：2009-04-01T14:59:02.933
> 
> 标签：c#, .net, windows, colors

我在这个网站上阅读了一个关于它的主题，但决定发布另一个主题，因为我想编写这样一个工具，但我在 C# 和 .NET 方面没有太多经验，所以仅仅挖掘可能会花费我太多时间Net，而有人可以将我引导到正确的库或要使用的类。

所以，直奔主题。我想写一个工具，当它被激活时，它会完全反转屏幕上的所有项目，让你以这种方式工作，而不会用明亮的浅色折磨你的眼睛。

有没有人知道实现这一点所需的 .NET 库或第三方框架？

任何帮助将不胜感激！

PS 在 Windows 中更改为“高对比度”主题不是我寻求的解决方案，所以请不要提及它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T15:57:07.413

控制面板→辅助功能选项→显示→使用高对比度。

试一试。抱歉，它没有直接回答您的问题，但可能会为您节省一些时间。

# nhibernate - NHibernate 表更新事件

> ID：705943
> 
> 赞同：2
> 
> 时间：2009-04-01T14:59:53.260
> 
> 标签：nhibernate, fluent-nhibernate

我有这个表映射（我认为细节并不重要）：

```
WithTable("COPACKER_FACILITY");  
Id(x => x.FacilityNumber, "FACILITY_NUM").GeneratedBy.Sequence("FACSEQ");
Map(x => x.FacilityName, "FACILITY_NAME").Not.Nullable().Trimmed();
Map(x => x.AddressLine1, "ADDR1").Not.Nullable().Trimmed();
...
WithTable("FACIL_OTH_AUDIT_INFO", m =>
   {
      m.WithKeyColumn("FACILITY_NUM");
      m.Map(x => x.ProdnShiftsNum, "PRODN_SHIFTS_NUM").Not.Nullable();
      m.Map(x => x.ProdnCapacity, "PRODN_CAPACITY").Not.Nullable();
      m.Map(x => x.ProdnLinesNum, "PRODN_LINES_NUM").Not.Nullable();
      m.Map(x => x.AuditScore, "AUDIT_SCORE");
      m.References(x => x.FacilStatus, "STATUS_IND").Not.Nullable();
   });
HasMany(x => x.ComplianceFlags)
   .KeyColumnNames.Add("FACILITY_NUM")
   .Inverse()
   .Cascade.All();
... 
```

一对一表的原因是出于审计原因。有一个`FACIL_OTH_AUDIT_INFO_HIST`表应该为主表中的每个插入和更新获取记录。

**我的问题：**如何知道该表中何时发生插入或更新，以便知道插入审计记录？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-02T13:26:52.617

对 kvalcanti 所说的 +1... 这是另一篇文章，我认为它解释得更好一些（并向您展示了如何在没有 XML 配置的情况下做到这一点！）。我正在做这个人在我的项目中所做的事情，而且效果非常好。

[http://www.codinginstinct.com/2008/04/nhibernate-20-events-and-listeners.html](http://www.codinginstinct.com/2008/04/nhibernate-20-events-and-listeners.html)

警告：我不会在我的项目中插入需要在此事件中保存的新对象，我认为这不会有问题，但我不能肯定地说，因为我没有做你正在做的事情.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-08-23T20:00:30.520

我发布了这个问题的最终解决方案，并认为我会分享

[http://robtennyson.us/post/2009/08/23/NHibernate-Interceptors.aspx](http://robtennyson.us/post/2009/08/23/NHibernate-Interceptors.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T15:02:23.817

您可以使用事件侦听器。

尝试[http://nhibernate.info/doc/howto/various/creating-an-audit-log-using-nhibernate-events.html](http://nhibernate.info/doc/howto/various/creating-an-audit-log-using-nhibernate-events.html)

# iphone - iPhone SDK 3.0 测试

> ID：705957
> 
> 赞同：2
> 
> 时间：2009-04-01T15:02:36.763
> 
> 标签：iphone

我们计划构建一个 iPhone 应用程序，它将使用新 3.0 SDK 的一些特性，尤其是对等连接，我们目前最关心的是如何测试应用程序和对等连接，我们有等待 iPhone 3.0 的发布，或者我们可以使用现在可用的 iPhone 来测试这些东西，我想要一个建议，因为我们必须为这个应用程序购买 iPhone，如果 SDK 3 功能在当前无法测试那么我们应该推迟购买 iPhone 的过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T15:05:53.603

如果您是 iphone 开发者网络 ( [http://developer.apple.com/](http://developer.apple.com/) ) 的一员，您可以立即下载并测试 beta SDK 和操作系统。您可以在 iPhone 上安装操作系统，并且应该能够立即进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T15:06:11.980

我很确定开发人员计划的成员可以提前访问 3.0 版本的操作系统，以便他们现在可以开始测试。

# iphone - 获取特定语言的本地化字符串

> ID：705959
> 
> 赞同：1
> 
> 时间：2009-04-01T15:02:37.573
> 
> 标签：iphone, cocoa-touch, localization

我正在尝试获取英语语言的本地化字符串（在 en.lproj/Localizable.strings 中），以在找不到用户首选语言的本地化字符串时用作默认值。

我想将该默认值传递给此方法：

```
[[NSBundle mainBundle] localizedStringForKey:key value:defaultValue table:nil] 
```

但是我还没有找到一种简单的方法来获得该值。我可以从字符串文件创建字典，但我想知道是否有更方便的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T12:59:42.510

我认为 Cocoa 自动使用英文字符串作为后备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-01-09T20:13:10.047

英语是您的开发区域（语言）吗？如果是这样，默认情况下，任何尚未翻译成用户首选语言的可本地化字符串都将回退到英语。这由`CFBundleDevelopmentRegion`您的应用程序 plist 中的键控制。从[官方文档](http://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html)，

> **CFBundleDevelopmentRegion**
> 
> CFBundleDevelopmentRegion (String - iOS, Mac OS X) 指定包的本地区域。此键包含一个字符串值，该值通常对应于编写包的人的母语。如果无法为用户的首选区域或语言找到资源，则使用此值指定的语言作为默认语言。

该键会自动添加到 Xcode 模板创建的 Info.plist 文件中。它的“友好”表示是*本地化本地开发区域。*

# c# - 服务主机解析 - C# 等效于 RMI 注册表？

> ID：705960
> 
> 赞同：1
> 
> 时间：2009-04-01T15:02:41.537
> 
> 标签：c#, service, rmi, resolution, registry

我很早就参加了硕士课程，并用 C# 做我的项目，而其他人都在用 Java 做他们的项目。该项目有 4 个服务，并且需要一个将服务名称映射到套接字的名称服务器。讲师建议学生使用 RMI 来构建此注册表。由于我对 Java 不是很熟悉，而且讲师对 .NET 也不是很熟悉，所以我们无法在 C# 中找到一个等价物。有人知道吗？

更新：

我正在寻找一种在不明确知道其套接字的情况下发现 WCF 服务的方法。

更新 2：

我将使用 VS 2008/WebDev 服务器在我的 XP 笔记本电脑上演示该项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T15:31:02.107

您可以使用 Windows Server 2K3/8 附带的 UDDI 服务器。这将使您发现您的服务。除此之外，您还需要一个 3rd 方包或自己动手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T17:39:14.520

我不是 Java Remoting 方面的专家。

我认为您正在寻找的东西在 WCF 术语中称为服务端点。这可以在 [配置文件](http://msdn.microsoft.com/en-us/library/ms734786.aspx)中或通过[代码](http://msdn.microsoft.com/en-us/library/ms731080.aspx)完成。

有关 WCF 的概述，请参阅此链接：[Windows Communication Foundation Architecture](http://msdn.microsoft.com/en-us/library/ms733128.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-14T06:52:27.643

Java 中的 RMI Registery 用作容器，您可以在其中通过键查找服务。这种机制类似于通过使用依赖注入引擎的 ServiceLocator（例如 ServiceLocator 模式）解析服务/对象，并要求它解析服务的实例（即通过已知名称、接口等）：

```
IMyService service = ServiceLocator.Resolve&lt;IMyService&gt;(); 
```

或者

```
IMyService service = (IMyService)ServiceLocator.Resolve(typeof(IMyservice)); 
```

WCF 仅适用于单一服务与单一服务主机方式，这意味着每个单一服务都需要一个单独的服务主机。您可以编写一个服务容器，聚合服务主机，打开端口，并将它们注册到 DI 容器中，然后像上面提到的那样简单地请求服务的实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T19:08:33.993

了解[TCP 端口共享](http://msdn.microsoft.com/en-us/library/ms734772.aspx)，Windows Server 2008 中的新技术，它可以帮助您

# c# - 将对象添加到通用列表的开头

> ID：705969
> 
> 赞同：44
> 
> 时间：2009-04-01T15:04:27.430
> 
> 标签：c#, .net

Add 方法 将对象添加到末尾`List<T>`

将对象添加到列表开头的快速有效方法是什么？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2009-04-01T15:05:39.080

好吧，`list.Insert(0, obj)`- 但这必须移动一切。如果您需要能够有效地在开头插入，请考虑 a`Stack<T>`或 a`LinkedList<T>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-01T15:06:24.913

```
List<T> l = new List<T>();
l.Insert(0, item); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-01T15:14:13.553

您可以在列表的开头插入项目，但这不是很有效，尤其是当列表中有很多项目时。

为避免这种情况，您可以重新定义用作列表的开头和结尾的内容，以便最后一个元素是列表的开头。然后，您只需使用 Add 将一个元素放在列表的开头，这比在位置 0 处插入项目效率高得多。

# c# - Silverlight 2 - 下载文件 - IE Blocks 文件下载

> ID：705974
> 
> 赞同：1
> 
> 时间：2009-04-01T15:05:50.483
> 
> 标签：c#, asp.net, javascript, silverlight, internet-explorer

我只在我的 Silverlight 应用程序中遇到了 IE 问题。由于 Silverlight 2 不包含文件下载机制，因此我只能靠自己的设备提出解决方案。我这样做的方式如下：

HtmlPage.Window.Navigate(new Uri(sb.ToString(), UriKind.Relative));

我的 StringBuilder 包含带有查询字符串的相对 url 到服务器上的 *.ashx 处理程序，该处理程序读取查询字符串，从数据库中获取一些数据，并返回一个 Excel 文件。

当我这样做时，我只会在 IE 中看到一个被阻止的文件下载栏。我知道这是 IE 中的一项新安全“功能”，它被阻止是因为它认为下载不是由用户与网页的交互触发的。用户可以选择允许下载，并且该设置似乎会在会话的其余部分被记住。但是，下次他们打开页面时，它会再次发生。即使该站点位于受信任区域中，并且即使弹出窗口阻止程序配置为允许该站点的弹出窗口。

有谁知道如何让 IE 知道用户确实请求了这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-06-22T08:13:56.323

我有完全相同的问题。我的解决方案是不使用 HtmlPage.Window.Navigate，而是使用 HyperlinkBut​​ton 并动态设置 NavigateUri 属性。

如上所述保存和恢复应用程序状态不起作用。嗯，确实如此，但无法确定何时需要完成，何时不需要。所以，最终，它并没有真正起作用。

请参阅关于 codeplex 的讨论......

[http://slideshow2.codeplex.com/Thread/View.aspx?ThreadId=60242](http://slideshow2.codeplex.com/Thread/View.aspx?ThreadId=60242)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-03-10T14:35:29.257

尝试 HtmlPage.PopupWindow 而不是 HtmlPage.Window.Navigate。这帮助我绕过了 IE 的“自动提示文件下载”设置在 Internet 区域站点默认情况下被禁用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T10:32:54.043

这是我在 IE 8中打开 URL 进行下载并覆盖**自动提示文件下载选项问题的代码解决方案。**

它也使用**HyperlinkBut​​ton**，但都是从代码中调用的：

```
public class BrowserHelper
{
    private sealed class HyperlinkButtonCaller : HyperlinkButton
    {
        public static void OpenUrl(Uri url)
        {
            var button = new HyperlinkButtonCaller()
            {
                NavigateUri = url
            };

            button.OnClick();
        }
    }

    public static void OpenUrl(Uri url)
    {
        if (url == null)
        {
            throw new ArgumentNullException("url");
        }

        HyperlinkButtonCaller.OpenUrl(url);
    }
}

BrowserHelper.OpenUrl(new Uri(ClientGlobalInfo.Current.ApplicationUrl, "myhandler.ashx")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-01T15:34:04.363

就我而言，仅在第一次发生（使用 IE 7），也许这发生在您的本地开发实例上？

我认为您无能为力，甚至 MSDN 页面都告诉您“一条消息将出现在...之上”，可以缓解这种情况的事情：

*   警告用户将显示该消息，然后一旦他单击应用程序就会重置（将当前应用程序状态存储在隔离存储中，当您收到重置时重新加载应用程序的设置）。

*   打开一个弹出窗口，并在弹出窗口中包含和标准 HTML 按钮进行下载。

HTH布劳里奥

# flash - 如何编辑返回的 mysql 结果资源中的值并转发编辑的结果资源

> ID：705977
> 
> 赞同：0
> 
> 时间：2009-04-01T15:06:02.387
> 
> 标签：flash, mysql, resources, amfphp

这就是我想要做的......

我使用 Flash 调用 AMFPHP 服务来查询我的数据库并返回结果资源。在将结果返回到 Flash 影片之前，我需要编辑结果资源中的一些值。

如何遍历结果的行、更改一些值并“重新打包”资源以返回到 Flash？

我想过——

```
$sql = sprintf("SELECT file_name FROM ....");
$result = mysql_query($sql);
while($row=mysql_fetch_array($result)){ 
    $row['file_name'] = performFunctionOn($row['file_name']);
}
$row = 0;
if(!mysql_data_seek($result,$row))continue;
return $result 
```

我正在尝试更改存储在数据库中的文件名，并试图避免将长字符串发送回 Flash，我意识到这是执行此操作的简单方法。

非常感谢斯蒂芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T15:11:39.987

如果您想用文字常量替换所有选定的值，您可以执行以下操作：

```
$sql = sprintf("SELECT 'INeedToChangeThis' FROM ....");
$result = mysql_query($sql);
return $result 
```

如果您想动态更改数据，您可能需要从中派生一个自定义类`mysqli_stmt`并覆盖`mysqli_stmt::fetch`，以便在调用 parent 后更新引用的变量`fetch`。

[**这**](http://www.phpbuilder.com/columns/ben_robinson20070314.php3?page=1)是一个很好的教程，介绍如何从中派生自定义类`mysqli_stmt`。

# c# - 数据表未从 Excel 返回值（来自公式的值）

> ID：705985
> 
> 赞同：0
> 
> 时间：2009-04-01T15:07:42.257
> 
> 标签：c#, excel, datatable

我正在处理的一个项目需要来自 C# 应用程序的值来更新 Excel 工作表中的 6 个值。然后，此 Excel 工作表填充指定范围的项目和价格，由同一 Excel 文件中的许多 VLOOKUP 公式和工作表驱动。

该范围内的两列名为“项目”和“价格”。

“项目”是从电子表格上的公式连接起来的一列项目，这些项目在 DataTable 中显示得很好。但是，“价格”列中的任何值（来自 VLOOKUP 公式的所有数值）都不会出现在 DataTable 中。

在 C# 中加载 DataTable 时，我可以看到两列的 string 和 double 类型都很好。如果我用硬编码值替换公式派生值之一，则 DataTable 很好，所以我猜 DataTable 本身正在按预期工作。

如果我在将值传入 Excel 文件后打开它，我可以看到输入值正常，并且公式计算正确。

所以，我唯一能想到的就是导致问题的原因是在将值传递给它之后没有重新计算公式。

有没有办法在 C# 中打开一个 excel 文件并让它重新计算所有公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-02T19:38:17.367

没关系，

将 OLEDB 更新替换为 Excel 互操作，使用互操作打开 Excel 文件允许重新计算公式。

# xcode - XCode：为了更改代码模板中的版权声明，我必须在终端中输入什么？

> ID：705986
> 
> 赞同：3
> 
> 时间：2009-04-01T15:08:35.687
> 
> 标签：xcode, xcode4, xcode4.2, xcode4.5, xcode4.3

当我创建一个 XCode 项目时，有一个版权声明被注释掉了。我知道有一个特殊的终端命令可以编辑它。有人知道吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-01T15:14:45.283

尝试：

```
defaults write com.apple.Xcode PBXCustomTemplateMacroDefinitions '{"ORGANIZATIONNAME"="stackoverflow";}' 
```

或者只是在地址簿中将公司名称添加到您的卡中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-01T15:14:08.403

```
defaults write com.apple.Xcode PBXCustomTemplateMacroDefinitions '{ORGANIZATIONNAME = "My Company"; }' 
```

# java - 将 UncaughtExceptionHandler 附加到 TimerTask

> ID：705988
> 
> 赞同：1
> 
> 时间：2009-04-01T15:08:40.913
> 
> 标签：java, multithreading, concurrency

是否可以将 a 附加`UncaughtExceptionHandler`到 a `TimerTask`？

（除了打电话`Thread.setDefaultUncaughtExceptionHandler()`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T15:19:04.697

您可以编写`TimerTask`一个`Throwable`从`run`.

```
public final class TimerTaskCatcher extends TimerTask {
    private final TimerTask orig;
    private final Thread.UncaughtExceptionHandler handler;
    public TimerTaskCatcher(
        TimerTask orig, 
        Thread.UncaughtExceptionHandler handler
    ) {
        if (orig == null || handler == null) {
            throw new NullPointerException();
        }
        this.orig = orig;
        this.handler = handler;
    }
    @Override public boolean cancel() {
        // **Edit:** Correction report due to @Discape.
        // In fact, this entire method could be elided.
        boolean weirdResult;
        try {
            orig.cancel();
        } finally {
            weirdResult = super.cancel();
        }
        return weirdResult;
    }
    @Override public void run() {
        try {
            orig.run();
        } catch (Throwable exc) {
            handler.uncaughtException(Thread.currentThread(), exc);
        }
    }
    @Override public long scheduledExecutionTime() {
        return orig.scheduledExecutionTime();
    }
} 
```

顺便说一句：您可能要考虑使用`java.util.concurrent`而不是`Timer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-01T15:23:39.490

是的，我想是这样。在该集合的线程中有一个实例方法（[setUncaughtExceptionHandler](http://java.sun.com/j2se/1.5.0/docs/api/java/langThread.html#setUncaughtExceptionHandler(java.lang.Thread.UncaughtExceptionHandler))）。`Thread` `class``UncaughtExceptionHandler`

在您的`run`方法中，`TimerTask`您可以执行以下操作：

```
public void run() {
    Thread.currentThread().setUncaughtExceptionHandler(eh);
} 
```

# apache2 - 带有 apache2 的 mod_python，（重新）导入模块错误

> ID：705992
> 
> 赞同：2
> 
> 时间：2009-04-01T15:11:15.713
> 
> 标签：apache2, mod-python, cgi-bin

我试图让 mod-python 与 apache2 一起工作，但没有任何成功。我已经遵循了一些让 mod-python 工作的教程，但我看不出我做错了什么。

当我访问[http://site.example.com/cgi-bin/test.py](http://site.example.com/cgi-bin/test.py)时，我实际上得到了我的 404 页面！（而如果文件确实不存在，我会收到 403 禁止）

这是我的设置：

在 /etc/apache2/sites-enabled/ 中有以我的每个域命名的配置文件。在[site.example.com 文件中](http://dpaste.com/hold/21618/)，我已将其添加到用户指令部分：

```
# Begin user directives <--
<Directory /home/default/site.example.com/user/htdocs/cgi-bin/>
     Options Indexes FollowSymLinks MultiViews
     AllowOverride AuthConfig
     Order allow,deny
     allow from all
     AddHandler mod_python .py
     PythonHandler mod_python.publisher
     PythonDebug On
</Directory>
# --> End user directives 
```

[此处](http://dpaste.com/hold/21618/)的完整文件，其中包括以下行：

**编辑**以添加 test.py 的内容：

```
#!/usr/bin/python  
print "Content-type: text/html"  
print  
print 'hello world'  
#print 1/0 
```

如上所示，我得到一个`404 /python/test.py was not found on this server`.

但是，如果我取消注释最后一行，我会得到：

```
Mod_python error: "PythonHandler mod_python.publisher"

Traceback (most recent call last):

  File "/usr/lib/python2.4/site-packages/mod_python/apache.py", line 299, in HandlerDispatch
    result = object(req)

  File "/usr/lib/python2.4/site-packages/mod_python/publisher.py", line 98, in handler
    path=[path])

  File "/usr/lib/python2.4/site-packages/mod_python/apache.py", line 457, in import_module
    module = imp.load_module(mname, f, p, d)

  File "/home/default/site.example.co.uk/user/htdocs/python/test.py", line 5, in ?
    print 1/0

ZeroDivisionError: integer division or modulo by zero 
```

这个回溯看起来对吗？顺便说一句，启用 cgitb 没有任何效果。

我可以添加任何其他信息来帮助诊断吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-01T15:37:02.437

对于初学者，我建议不要使用该`cgi-bin`目录，因为它是为 CGI 脚本设计的。使用 mod_python 加载的 Python 文件不是 CGI 脚本。（理论上你应该能够从`cgi-bin`目录中加载 Python 文件，但是如果你给你的 Python 文件自己的目录，它会更容易调试。）

现在，您的文档根目录是`/home/default/site.example.com/user/htdocs`，所以我建议创建一个子目录，例如`/home/default/site.example.com/user/htdocs/python`，将您的 Python 文件放入其中 - 仅用于测试。不要为此目录创建任何`Alias`或`ScriptAlias`指令（因为它已经在文档根目录下），但是您需要在虚拟主机文件中放置类似的内容：

```
<Directory /home/default/site.example.com/user/htdocs/python/>
     Order allow,deny
     Allow from all
     AddHandler mod_python .py
     PythonHandler mod_python.publisher
     PythonDebug On
</Directory> 
```

.将文件`test.py`移动到该目录并尝试转到`http://site.example.com/python/test.py`，您应该会`index`在文件中看到函数的结果`test.py`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-02T16:33:46.000

据我所知，Publisher 处理程序需要接受一个请求对象和一个方法才能返回响应。

在我的脚本中，我有这样的东西：

```
#!/usr/bin/python  
def run(req):
  return 'Hello world!' 
```

然后，转到[http://.../python/test.py/run](http://.../python/test.py/run)

在这种情况下，req 是发布者处理程序传入的请求对象。

而且，如果您还没有文件，则需要`__init__.py`在 test.py 所在的同一目录中有一个文件。

此外，对于发布者，我注意到有时响应会被缓存。我将在我已经修复的浏览器中得到相同的错误。因此，如果您看到您认为已经修复的错误，重新启动 apache 并不是一个坏主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-20T22:34:02.210

为了获得所需的输出，python 文件应如下所示：

```
def index():
  return "hello world" 
```

“ [http://somesite.com/path/test.py](http://somesite.com/path/test.py) ”默认打开“索引”功能。

“ [http://somesite.com/path/test.py/run](http://somesite.com/path/test.py/run) ”改为打开“运行”功能。

你可以变得更漂亮，但上面会给你一个基本的 mod_python 页面。

# c# - 在 aspx c# 页面中包含一个 asp vb 页面

> ID：705994
> 
> 赞同：2
> 
> 时间：2009-04-01T15:11:27.117
> 
> 标签：c#, asp.net, asp-classic, vbscript

我可以有一个用 C# 代码隐藏文件编写的 aspx 页面吗？并包含一个用vb编写的代码的asp页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-01T15:13:58.233

是的，您可以拥有一个带有 VB.NET 代码隐藏的 ASP.NET C# 页面。您不能包含使用`<!--# include -->`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-01T15:16:30.613

不，你有两个选择：

1) 在 C# 中编写 aspx 页面并在 aspx 页面上放置一个 iframe。使用该 iframe 将 asp 页面与 aspx 页面完全分开加载。

2) 使 asp 页面只返回您在 aspx 页面上需要的标记，而不是整个页面。然后，您可以在您的 aspx 页面上放置一个空 div 并使用 AJAX 请求 asp 内容并将其呈现在 aspx 页面上。

这两种选择都有特定的缺点。第一个结果是一个不容易被搜索引擎抓取和索引的页面。使用第二个，您的 asp 页面将无法轻松处理任何回发数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-01T15:16:55.387

可以在您的 aspx 文件中包含 asp 代码。但是您可以使用指向 asp 文件的 iframe 并从您的 aspx 文件中调用它。

# sharepoint-2007 - 按“过去 3 天”筛选数据视图 Web 部件

> ID：705997
> 
> 赞同：3
> 
> 时间：2009-04-01T15:12:05.400
> 
> 标签：sharepoint-2007, filter, dataviewwebpart

我们有一个自定义列表，其中有一个名为“连接日期”的列，并且需要在门户的各个位置显示最新的列表项（相对于这个“连接日期”列）。数据视图 Web 部件似乎是最好的解决方案，但我很难找到按日期过滤的正确方法和语法。

我可以创建一个参数并按另一列的值进行过滤。我可以按特定日期过滤。我似乎无法弄清楚如何说“向我显示‘连接日期’在 [今天] 和 [今天]-3 范围内的所有列表项”。

这可能吗？有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-01T15:24:41.717

如果你使用 CAML，你可以做到。

```
<Where>
  <Gt>
      <FieldRef Name="Created" Nullable="True" Type="DateTime"/>
      <Value Type="DateTime"><Today OffsetDays="-7"/></Value>
  </Gt>
</Where> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-02T03:18:54.013

谢谢一堆。在此响应和此博客之间，我们能够弄清楚这一点。

[http://blogs.msdn.com/sharepointdesigner/archive/2008/02/25/filtering-and-formatting-with-date-values.aspx#filter_list_on_today_offset](http://blogs.msdn.com/sharepointdesigner/archive/2008/02/25/filtering-and-formatting-with-date-values.aspx#filter_list_on_today_offset)*************