# StackOverflow 问答 11540000-11540999

# php - 如何将javascript值插入php会话变量

> ID：11540000
> 
> 赞同：2
> 
> 时间：2012-07-18T11:12:45.093
> 
> 标签：php, javascript, session-variables

我想将 javascript 值插入到 php 会话变量中，但在 javascript 函数中。

这是我尝试过的，但它不起作用：

```
function languageChange()
{
 var lang = $('#websites1 option:selected').val();
 <?php $_SESSION['SESS_LANGUAGE']?> = lang;
 alert(<?php echo $_SESSION['SESS_LANGUAGE']?>);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T12:01:22.087

你不能直接访问它（你正在做的方式）。但是，它可以使用 AJAX 来完成。 **这是完美的解决方案。**

这是HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>1</title>
</head>

<body>
<form id="form1" name="form1" method="post" action="">
    <label for="websites1">Websites</label>
    <select name="websites1" id="websites1">
        <option value="Design">Design</option>
        <option value="Dev">Dev</option>
        <option value="Ecom">Ecom</option>
    </select>
</form>
<script type="text/javascript" src="js/jquery_1.7.1_min.js"></script> 
<script type="text/javascript">

$(document).ready(function() {

    function languageChange()
    {
         var lang = $('#websites1 option:selected').val();

        return lang;
    }

    $('#websites1').change(function(e) {                    

        var lang = languageChange();

        var dataString = 'lang=' + lang;

        $.ajax({

            type: "POST",
            url: "pass_value.php",
            data: dataString,
            dataType: 'json',
            cache: false,
            success: function(response) {

                    alert(response.message);

                }
        });

        return false;

    });

});

</script>
</body>
</html> 
```

这是 AJAX 部分：

```
//pass_value.php

<?php session_start();

$_SESSION['SESS_LANGUAGE'] = $_POST['lang'];

$_SESSION['SESS_LANGUAGE'] = 'This is my PHP session var --->'.$_SESSION['SESS_LANGUAGE'];

print json_encode(array('message' => $_SESSION['SESS_LANGUAGE']));
die();

?> 
```

**编辑1：**

运行代码后，只需从下拉菜单中选择任何其他选项，您就会收到一条警报，该警报会为您提供 php 会话变量的值以及我添加到其中的自定义文本。

**编辑2：**

如果您想最终运行我的解决方案，请确保您正确指向核心 jQuery js 文件。我的 jquery 代码指向`src="js/jquery_1.7.1_min.js"`. 确保你更新这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:26:35.190

Javascript 无法访问 PHP 变量。客户端（Web 浏览器/javascript）只能访问与会话关联的 Cookie 或 Cookieless ID（查询字符串）。

以这种方式使用会话的目的是为了不让客户端在不通过服务器的情况下修改与会话关联的设置。不太“安全”的方式是对所有设置使用 cookie。将语言设置之类的东西存储在 cookie 中而不是会话中可能是个好主意。

为了解决这个问题，您可以制作一个页面，该页面带有一个会话属性名称（如您的“SESS_LANGUAGE”）和一个使用 php.ini 将其放入会话中的值。我强烈建议不要这样做，因为任何用户都可以设置任何会话变量。

我能想象的最好的方法是你向一个页面发送一个 AJAX 调用，说你想改变语言。

被调用的 URL 是这样的：changelanguage.php?lang=en_US

以及 changelagunge.php 的 php 代码： $_SESSION['SESS_LANGUAGE'] = $_GET['lang'];

# javascript - 将字符串添加到表单的输入

> ID：11540003
> 
> 赞同：0
> 
> 时间：2012-07-18T11:13:05.350
> 
> 标签：javascript, string, input

所以，我是一个真正的 js 初学者，我有一个带有 2 个输入的表单。在此输入中，我有日期选择器，以便用户可以从日历中选择日期。但是我工作的站点的数据库具有这种日期格式：YMD 0000:00:00。当用户选择日期时，我想在末尾自动添加这些零。不知道有没有人可以帮忙，谢谢。

```
window.onload = function(){
        new JsDatePick({
            useMode:2,
            target:"inputField",
            dateFormat:"%Y-%M-%d"
        });
        new JsDatePick({
            useMode:2,
            target:"inputField2",
            dateFormat:"%Y-%M-%d"
        });
    };
<form action="insert.php" method="post" target="000:00:00 "onsubmit="return validateForm(this)">
<label for="FUP start date">FUP start date:</label> 
<input type="text" name="inputField" id="inputField"/>
</br>
</br>
<label for="FUP end date">FUP end date:&nbsp;</label> 
<input type="text" name="inputField2" id="inputField2" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:25:57.147

我假设您可以简单地更改`dateFormat`给定的每个`JsDatePick`以包括那些零，如下所示：

```
new JsDatePick({
  useMode: 2,
  target: "inputField",
  dateFormat: "%Y-%M-%d 0000:00:00"
}); 
```

如果您可以提供有关您正在使用的日期选择器的信息，那将会很有帮助。

# iphone - 特殊符号被转换

> ID：11540011
> 
> 赞同：0
> 
> 时间：2012-07-18T11:13:27.883
> 
> 标签：iphone, objective-c, ios5, special-characters

我的应用程序包含特殊字符 β（即 beta）。但它被转换为 Œ 并且它的值在 NSLog() 中显示为 \U0152\U2264。

我如何使用/替换原始符号 β ？

我的代码是 -

```
 NSString *str = [NSString stringWithUTF8String:"β"];

    NSString *temp = [[array2 objectAtIndex:0]valueForKey:@"Class"];
    NSString *temp1 = [[array2 objectAtIndex:0]valueForKey:@"Interactions"];

    interaction = [temp1 stringByReplacingOccurrencesOfString:str withString:@"β"];
     classes = [temp stringByReplacingOccurrencesOfString:str withString:@"β"];

     lblClass.text = classes;
  lblInteraction.text = interaction; 
```

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T12:24:12.360

这是为了帮助别人。

我通过将符号替换为如下解决了我的`Œ`问题`β`-

```
 NSString *temp = [[array2 objectAtIndex:0]valueForKey:@"Class"];
    NSString *temp1 = [[array2 objectAtIndex:0]valueForKey:@"Interactions"];

    interaction = [temp1 stringByReplacingOccurrencesOfString:@"Œ≤" withString:@"β"];
    classes = [temp stringByReplacingOccurrencesOfString:@"Œ≤" withString:@"β"]; 
```

# java - Android：编译错误 Util.toByteArray（取自示例）

> ID：11540018
> 
> 赞同：1
> 
> 时间：2012-07-18T11:13:46.333
> 
> 标签：java, android, eclipse, compilation

我正在尝试在我的 Android 应用程序中编译此代码示例以具有加密/解密功能。我在这里找到了该代码[http://apachejava.blogspot.it/2012/04/androidencryption-made-easy.html](http://apachejava.blogspot.it/2012/04/androidencryption-made-easy.html)我不知道它是否很好，但这与这里无关。

编译时一切正常，但`Util.toByteArray`会产生此错误“Util 无法解析”。用 Utils 替换 Util 没有任何用处。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:23:30.767

您链接的页面中缺少部分所需代码：作者忘记显示他的`Util`类，该类显然包含一个 toByteArray `function`。

**解决方案1：使用commons IO**

代替

```
Util.toByteArray(cis); 
```

经过

```
IOUtils.toByteArray(cis); 
```

IOUtils 是一个[Apache 公共 IO](http://commons.apache.org/io/)实用程序类。

你需要

*   下载commons IO jar（见链接）并相应地设置你的类路径
*   在您的课程开始时进行此导入：`import org.apache.commons.io.IOUtils;`

**解决方案 2：编写一个 toByteArray 函数**

定义这个函数：

```
public byte[] toByteArray(InputStream is) throws IOException {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    int l;
    byte[] data = new byte[1024];
    while ((l = is.read(data, 0, data.length)) != -1) {
      buffer.write(data, 0, l);
    }
    buffer.flush();
    return buffer.toByteArray();
} 
```

并替换`Util.toByteArray(cis);`为`toByteArray(cis);`.

# git - 编辑来自不同 git 分支的文件

> ID：11540019
> 
> 赞同：0
> 
> 时间：2012-07-18T11:13:50.667
> 
> 标签：git

我对 git 很陌生。我在本地服务器上克隆了一个项目，并使用 TextMate 编辑了我的文件。

所以，我有一个名为 master 的分支。然后我创建了第二个名为 local 的分支。我做了一些修改，添加了一些文件并将它们全部提交。但是现在当我回到我的主分支时，我无法使用 TextMate 编辑古老的文件（未修改的主分支文件）。怎么可能解决这个问题？我不应该使用 TextMate 吗？

最好的，迈赫迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:30:35.693

你当时有没有做过这样的事情：

```
#clone out repo that only has master branch
git clone path/to/repo

#create and checkout branch local
git checkout -b"local"

## edit files ###

#stage files
git add .

#commit changes
git commit -m"did some work"

#switch back to master
git checkout master 
```

此时，您应该像克隆后一样位于本地主分支上。如果要将更改从本地合并到主：

```
git merge local 
```

您可以随时运行`git status`以查看哪些文件已更改并`git branch -a`查看您的 repo 中的所有分支

如果您正确执行了所有这些操作但仍然无法编辑文件，则可能是权限问题：

```
sudo chmod 644 /path/to/local/files/* -R 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T08:53:36.697

所以这里有一些有用的命令

假设你在 master 分支上然后你创建了 newbranch

$git checkout -b 新分支

然后在这里编辑一些文件然后你需要提交这些更改

$git 添加。$git commit -m "提交信息"

然后切换到master分支

$git 结帐大师

合并更改

$git 合并新分支

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T12:35:07.393

我总是需要这样编辑。举例来说，我想出了一些重要的东西，需要立即在一个不在我所在的分支中的文件 A 中将它们慢下来，同时编辑一个未完成提交的文件 B，我所做的如下所示：

```
# stage and commit the fileB
git add fileB; git commit -m 'uncompleted'

# checkout to the branch containing file A
git checkout branchA

# editting the file A

# stage and commit the fileA
git add fileA; git commit -m 'big idea'

# go back to the first branch
git checkout branchB

# reset to the previous commit without changing the working-spot
git reset --soft HEAD~

# edit again and commit 
git add fileB; git commit -m 'extend the previous commit' 
```

现在就好像我不合时宜的头脑风暴没有发生在文件 B 上一样。随时可以在不同的分支中进行编辑。

# php - 将 php xml 转换为 as3

> ID：11540021
> 
> 赞同：0
> 
> 时间：2012-07-18T11:14:04.037
> 
> 标签：php, actionscript-3

我不知道如何从 PHP 文件中获取一些数据到 Flash AS3 中。我可以得到一个简单的字符串，但是我的数据是从数据库中提取的 XML 数据。我需要将 xml 带入 AS3，然后我可以从 flash 中强制下载。

这是我的 php 行，它抓取两列数据。

```
list($data, $name) = mysql_fetch_array($queryDownload); 
```

$data 是 XML 代码，$name 是文件名。

如何以将数据保留为 XML 数据的方式将其发送到 AS3？并让 AS3 使用它来创建可下载的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:04:49.217

检查[XML 的 AS3 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html)。

```
var xml:XML;

var urlRequest:URLRequest = new URLRequest("http://yourdomain.com/file.php");
var urlLoader:URLLoader = new URLLoader();
urlLoader.dataFormat = URLLoaderDataFormat.TEXT;
urlLoader.addEventListener(Event.COMPLETE, urlLoader_complete);
urlLoader.load(urlRequest);

function urlLoader_complete(evt:Event):void { 

    xml = new XML(evt.target.data);    
} 
```

在上面的代码片段中，PHP 文件名为**file.php** & 位于**yourdomain.com**

您的 PHP 代码只需要：`echo $data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:54:30.563

您应该发送序列化为字符串的 XML 对象，然后使用 new XML(xmlString) 在客户端上创建一个 XML 对象，其中 xmlString 是服务器响应。

# typo3 - tt_news：在列表视图中使用新闻标题作为下载标题

> ID：11540023
> 
> 赞同：2
> 
> 时间：2012-07-18T11:14:13.460
> 
> 标签：typo3, typoscript, tt-news

我的新闻不应包含任何文本，标题除外。相反，在列表视图中，标题应直接指向第一个附加文件（PDF）。

现在我认为最简单的解决方案是隐藏标题，仅显示附件并通过 TypoScript 为它们提供相关新闻条目的标题。

对于详细视图，此代码可以正常工作：

```
plugin.tt_news.newsFiles {
    labelStdWrap.cObject = TEXT
    labelStdWrap.cObject.dataWrap = DB:tt_news:{GPvar:tx_ttnews|tt_news}:title
    labelStdWrap.cObject.wrap3 = {|}
    labelStdWrap.cObject.insertData = 1
} 
```

...但它使用 GPvar 来显示当前显示的新闻，这当然不在列表视图中。

**所以我的问题是：如果可能的话，我如何获得当前迭代的新闻条目的 ID？**

我也对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:41:31.760

您将需要`itemMarkerArrayFunc`通过将示例复制到您自己的扩展中来使用 custom-fastest：`typo3conf/ext/tt_news/res/example_itemMarkerArrayFunc.php`并将自定义标记添加到`$markerArray`.

提到的示例甚至演示了对文件的访问，因此我认为根据您的需要对其进行修改应该不是问题。

注意：如果您没有任何自己的 ext 可以将其复制`func`到其中，并且您不想创建此类，请尝试将其复制到`fileadmin`文件夹下的某个位置，修改原始目标中的文件是错误的想法，因为您将丢失所有更改下次`tt_news'`更新后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:03:31.113

我发现最简单的解决方案是使用 labelStdWrap：

```
plugin.tt_news.newsFiles {
    labelStdWrap = TEXT
    labelStdWrap.field= title
} 
```

更多选项可以在这里找到：http: [//typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.0.0/view/5/13/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.0.0/view/5/13/)

# c# - 如何在第一个枚举器中激活另一个枚举器

> ID：11540025
> 
> 赞同：4
> 
> 时间：2012-07-18T11:14:23.880
> 
> 标签：c#, iterator, enumerable, yield-return

我有两个单独的操作是枚举器。

一个可以独立运行，另一个依赖第一个运行。

我虽然这样做我会很聪明：

```
public IEnumerator<IResult> DoStuffIndependently()
{
   yield return this;
   yield return that;
}

public IEnumerator<IResult> DoStuffBeforeSometimes()
{
   yield return AffectThis;
   yield return AffectThat;

   yield return DoStuffIndependently();
} 
```

这不起作用，通过 foreach 也不起作用。我不想自己一步一步完成所有事情，我猜有一种非常简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:22:26.633

方法*要么*是迭代器块（`yield return`等），**要么**是常规方法（`return`等）。不能两者兼而有之。因此，要使用另一个迭代器，您必须对其进行迭代 - 即

```
yield return AffectThis;
yield return AffectThat;
using(var iter = DoStuffIndependently()) {
    while(iter.MoveNext()) yield return iter.Current;
} 
```

或者，您也许可以使用将两个*现有的*迭代器`Concat`缝合在一起。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:22:48.160

使用`IEnumerable`而不是`IEnumerator`应该`foreach`可以正常工作：

```
public IEnumerable<IResult> DoStuffIndependently()
{
   yield return This;
   yield return That;
}

public IEnumerable<IResult> DoStuffBeforeSometimes()
{
   yield return AffectThis;
   yield return AffectThat;
   foreach (var x in DoStuffIndependently())
        yield return x;
} 
```

或者，按照[Marc 的建议](https://stackoverflow.com/a/11540168/533120)，显式调用[IEnumerator.MoveNext](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.movenext)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T11:25:29.637

如果您希望它是 IEnumerator 而不是 IEnumerable，则必须手动遍历它：

```
public IEnumerator<IResult> DoStuffIndependently() {
    yield return this;
    yield return that;
}

public IEnumerator<IResult> DoStuffBeforeSometimes() {
    yield return AffectThis;
    yield return AffectThat;

    var dsi = DoStuffIndependently();
    while (dsi.MoveNext()) yield return dsi.Current;
} 
```*

# xml - 两个单例标记之间的 XQuery 内容

> ID：11540029
> 
> 赞同：1
> 
> 时间：2012-07-18T11:14:32.620
> 
> 标签：xml, xquery

你知道做 XQuery 查询来选择两个单例标签之间的内容吗，例如

```
<pb n="1"/>
   this is <foo>page</foo> number one
<pb n="2"/>
   this is <bar>page</bar> number two
<pb n="3"/>
   this is <x>page</x> number three 
```

我想要例如第二页的内容，所以 between`<pb n="2"/>`和 next `<pb/>`。输出应该是：

```
 this is <bar>page</bar> number two 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:26:43.377

您可以`following-sibling`与运算符一起使用`<<`，如下所示：

```
let $xml := <xml>
<pb n="1"/> 
   this is <foo>page</foo> number one 
<pb n="2"/> 
   this is <bar>page</bar> number two 
<pb n="3"/> 
   this is <x>page</x> number three 
</xml>
return
  $xml/pb[2]/following-sibling::node()[. << $xml/pb[3]] 
```

！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T14:37:53.547

请参阅TEI wiki 上的David Sewell 的[里程碑块（）函数。](http://wiki.tei-c.org/index.php/Milestone-chunk.xquery)请注意，本文还指向一个 eXist-db 扩展函数[util:get-fragment-between()](http://demo.exist-db.org/exist/functions/util/get-fragment-between)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T02:46:40.267

**只是这个查询，恰好是一个纯 XPath 2.0 表达式**：

```
/*/node()[not(self::pb) and preceding-sibling::pb[1]/@n eq '2'] 
```

**在此 XML 文档上执行时**（提供的 XML 片段包装在单个顶部元素中）：

```
<t>
    <pb n="1"/>
       this is <foo>page</foo> number one
    <pb n="2"/>
       this is <bar>page</bar> number two
    <pb n="3"/>
       this is <x>page</x> number three
</t> 
```

**产生了想要的正确结果：**

```
 this is <bar>page</bar> number two 
```

# c# - 如何用不相邻的单词过滤 radcombobox？

> ID：11540033
> 
> 赞同：0
> 
> 时间：2012-07-18T11:14:47.347
> 
> 标签：c#, asp.net, telerik, radcombobox

如果我使用`radcombobox`：

如下：

```
<telerik:RadComboBox ID="ddl_emp1" runat="server" AutoPostBack="True" CausesValidation="false"
CollapseDelay="0" Culture="ar-EG" ExpandDelay="0" Filter="Contains"  ItemsPerRequest="100"
MarkFirstMatch="true" Skin="Outlook" Width="200px" EnableAutomaticLoadOnDemand="True"
EmptyMessage="-Type Employee Name -" ValidationGroup="2" ShowMoreResultsBox="True"                                           OnSelectedIndexChanged="ddl_emp1_SelectedIndexChanged">
</telerik:RadComboBox> 
```

如果组合框中的项目由多个部分组成，例如：

```
Ran jack Rony 
```

我想得到这个项目，如果我输入 `Ran Rony`，我没有结果。我将过滤器属性设置为“包含”而不是“开始”，但它不能解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:49:37.097

假设您在 SQL 中进行搜索，并在 ComboBox（可能是 RadCombobox）中显示结果。

您应该在 sql 查询中替换空间；然后在那个领域做一个喜欢。

例子：

您要求：Ran jack Rony

您的 SQL 查询应该执行以下操作：

```
SET @filter = 'Ran jack Rony';
SET @filter = REPLACE(@filter, ' ', '%');
SELECT * FROM TableName WHERE FieldName LIKE @filter; 
```

# java - 如何在 Spring 配置中将静态常量作为参数传递？

> ID：11540040
> 
> 赞同：1
> 
> 时间：2012-07-18T11:15:01.450
> 
> 标签：java, spring

这是我的课：

```
public class MyClassA {

    private int mode;
    public static int THREAD_MODE=1;
    public static int CLUSTER_MODE=2;

    public MyClassA(int mode) {
         this.mode= mode;
    }
} 
```

我想在我的 spring 配置 xml 中将此信息发送到我的类实例。我如何实现这样的目标？

```
<bean id="myclass" class="com.test.MyClassA"> <constructor-arg value="MyClassA.THREAD_MODE"/> </bean> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T11:20:07.750

`util`命名空间提供了一个执行此操作的`constant`元素：

```
<constructor-arg>
    <util:constant static-field="MyClassA.THREAD_MODE"/>
</constructor-arg> 
```

类提供了对此功能的支持`FieldRetrievingFactoryBean`。

这需要向您的`<beans>`元素添加名称空间和一些模式，即下面提到的项目`util`。

```
<beans xmlns="..."
    xmlns:xyz="..."
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="...
    ...
    http://www.springframework.org/schema/util
    http://www.springframework.org/schema/util/spring-util.xsd"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:21:30.317

我可能会使用枚举而不是整数（类型更安全且范围有限）。Spring 将支持枚举的注入。有关更多信息，请参阅[本文](http://forum.springsource.org/showthread.php?112691-Enum-injection-via-spring)。

# javascript - JavaScript - 未捕获的 TypeError：类型错误

> ID：11540041
> 
> 赞同：2
> 
> 时间：2012-07-18T11:15:02.637
> 
> 标签：javascript, jquery, html

我试图打破一个精灵表，它并没有像它应该的那样将它放入一个二维数组中。在我的代码末尾，靠近console.log，它吐出ImageData ...但是当它尝试putImageData ...我得到`Uncaught TypeError: Type error`

帮助？

这是我的代码：

```
$(document).ready(function () {
    console.log("Client setup...");
    canvas = document.getElementById("canvas");
    context = canvas.getContext("2d");
    canvas.tabIndex = 0;
    canvas.focus();
    console.log("Client focused.");

    var imageObj = new Image();
    imageObj.src = "./images/all_tiles.png";
    imageObj.onload = function() {
    context.drawImage(imageObj, imageWidth, imageHeight);
    };

    var allLoaded = 0;
    var tilesX = ImageWidth / tileWidth;
    var tilesY = ImageHeight / tileHeight;
    var totalTiles = tilesX * tilesY;        
    var tileData = [totalTiles]; // Array with reserved size
    for(var i=0; i<tilesY; i++)
    {
      for(var j=0; j<tilesX; j++)
      {           
        // Store the image data of each tile in the array.
        tileData.push(context.getImageData(j*tileWidth, i*tileHeight, tileWidth, tileHeight));
        allLoaded++;
      }
    }

    if (allLoaded == totalTiles) {
    console.log("All done: " + allLoaded);
    console.log(tileData[1]);
    context.putImageData(tileData[0], 0 ,0); // Sample paint
    }

}); 
```

错误发生在`context.putImageData(tileData[0], 0 ,0); // Sample paint`

[这是上面http://jsfiddle.net/47XUA/](http://jsfiddle.net/47XUA/)代码的示例小提琴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:47:02.413

你的问题是第一个元素`tileData`不是一个`ImageData`对象，**它是一个普通的数字**！初始化数组时，您使用：

```
var tileData = [totalTiles]; 
```

这意味着`tileData[0]`等于 的值`totalTiles`，即数字`483`。您正在向 提供数字而不是`ImageData`对象`putImageData`，并且浏览器会在混乱中引发错误。如果您查看数组其余部分中的任何其他元素，您会发现它已成功地填充了`ImageData`您所期望的对象；只有数组中的第一个元素是数字。

您可能打算这样做：

```
var tileData = new Array(totalTiles); 
```

这将创建一个具有指定`length`属性的数组，而不是将数组中的第一个值设置为数字。就个人而言，我会进行一些性能测试，看看这是否有用；您可能也可以使用`var tileData = [];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T19:30:08.903

当传递给语句的变量或对象不是该命令所期望的类型并且无法转换为有效的类型时，会导致类型错误。

有关错误的完整定义，请参见[此处](http://www.typeerror.com/index.php/javascript-typeerror/)。

因此很可能 context 或 tileData 的格式不正确，或者为 null 或未定义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T15:18:11.477

这里的问题是该`imageObj.onload()`函数在脚本的其余部分执行之后被调用。

这意味着查询`getImageData()`返回未定义，因为调用时画布中没有图像数据。

解决此问题的一种简单方法是将剩余的脚本封装在`imageObj.onload`函数中，如下所示：

```
$(document).ready(function () {
console.log("Client setup...");
canvas = document.getElementById("canvas");
context = canvas.getContext("2d");
canvas.tabIndex = 0;
canvas.focus();
console.log("Client focused.");

var imageObj = new Image();
imageObj.src = "./images/all_tiles.png";

imageObj.onload = function() {

  context.drawImage(imageObj, 0, 0);

  var allLoaded = 0;
  var tilesX = imageWidth / tileWidth;
  var tilesY = imageHeight / tileHeight;
  var totalTiles = tilesX * tilesY;        
  var tileData = new Array(); // Array with NO reserved size
  for(var i=0; i<tilesY; i++)
  {
    for(var j=0; j<tilesX; j++)
    {           
      // Store the image data of each tile in the array.
      tileData.push(context.getImageData(j*tileWidth, i*tileHeight, tileWidth, tileHeight));
      allLoaded++;
    }
  }

  context.putImageData(tileData[0], 0 ,0); // Sample paint
}; // End 'imageObj.onload()' scope.

}); // End document ready function scope. 
```

这样可以确保`getImageData()`在之后进行任何调用`context.drawImage()`

您在这里可能还会遇到一个问题，即您没有绘制图像以覆盖画布。换行：

```
context.drawImage(imageObj, imageWidth, imageHeight); 
```

至

```
context.drawImage(imageObj, 0, 0); 
```

**编辑：你也有`ImageWidth`和`imageWidth`（高度相同）。重命名这些。**

**编辑：在此处保留数组大小`new Array(totalTiles)`会导致问题。当我们将新的平铺图像推送到数组时，它会推送到预分配数组的末尾（从 开始`tileData[totalTiles]`）。这很容易通过删除 size 参数来解决。`push()`否则，我们可以在循环中将图像数据复制到数组中，而不是使用，例如： `tileData[n] = getImageData(...)`，从 开始`tileData[0]`。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:19:43.140

这可能是一个*赛车条件*。`./images/all_tiles.png`仅在加载图像时才使用 drawImage 。但是您在 onload 触发**之前使用上下文中的图像数据。**尝试将 onload 处理程序之后的所有内容移动到 onload 处理程序中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-18T09:58:12.653

我正在使用 Chrome。

```
context.drawImage(spritesheet.image, 0, 0, 4608, 768);// Works
context.drawImage(spritesheet.image, 768, 0, 768, 768, 4608, 768); // Doesn't work: Uncaught TypeError: Type error 
```

谢谢！

# xcode - Developer/Tools/sdp：没有这样的文件或目录

> ID：11540043
> 
> 赞同：0
> 
> 时间：2012-07-18T11:15:04.070
> 
> 标签：xcode

我正在努力使我的应用程序可编写脚本，为此我使用[此处链接中的开发人员材料](https://developer.apple.com/cocoa/applescriptforapps.html)

该教程以 CircleView 应用程序为例，并通过一些程序步骤将其制成苹果 Scriptable 应用程序。

在执行这些步骤后，在 CircleView 应用程序中添加了新的运行脚本后，如教程中所述，我收到错误

```
Developer/Tools/sdp: No such file or directory 
```

我不知道如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:47:48.593

我有一个错误，抱怨没有`/usr/bin/sdp`

我找到了文件`/Applications/Xcode.app/Contents/Developer/usr/bin/sdp`并修复了错误：

```
cd /usr/bin
sudo ln -s "/Applications/Xcode.app/Contents/Developer/usr/bin/sdp" 
```

它创建了一个指向`sdp`安装位置的符号链接。我通过 AppStore 安装了 Xcode，所以我不确定为什么一开始没有创建这个文件/符号链接，但这解决了我的问题。

# ios - IOS：触摸外层蒙版但在框架内

> ID：11540047
> 
> 赞同：1
> 
> 时间：2012-07-18T11:15:10.747
> 
> 标签：ios, uiview, mask

我有一个带有可以接收触摸的图层蒙版（小于其框架）的**UIView 。**现在问题是我想限制图层蒙版中的这些触摸。

蒙版是一个渲染的形状，并不总是一个矩形。

我必须这样做吗：

```
pointInside:withEvent: 
```

或者

```
hitTest:withEvent: 
```

还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-10T15:09:37.380

它有点老问题，但也许对某人有用:)

在您的意见 .h 文件中；

```
@interface CustomPhotoFrame : UIView {
  @protected
    CGPathRef borderPath;
}
@property (nonatomic, assign) CGPathRef borderPath; 
```

而且，在您的 .m 文件中；

```
@synthesize borderPath;

- (void)setClippingPath:(CGPathRef)path 
{
    CGPathRelease(borderPath);
    borderPath = path;
    CGPathRetain(borderPath);
}  

- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    return CGPathContainsPoint(borderPath, NULL, point, FALSE);
} 
```

在你drawrect方法；称呼;

```
UIBezierPath *aPath = [UIBezierPath bezierPath];

// your path codes.. assume that its a circle;

aPath = [UIBezierPath bezierPathWithOvalInRect: CGRectMake(centeredCircleRect)];

CGPathRef cgPath = CGPathCreateCopy(aPath.CGPath);
[self setClippingPath:cgPath]; 
```

现在您的触摸方法仅检测您的触摸是否在圆形蒙版视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T15:02:50.080

通过创建一种方法来解决该问题，该方法检查图层中特定位置是否存在实心或透明像素：

```
- (BOOL)isSolidPixel:(CGImageRef)image withXPosition:(int)xPos andYPosition:(int)yPos {
    if(xPos > CGImageGetWidth(image) || yPos > CGImageGetHeight(image))
        return NO;

    CFDataRef pixelData = CGDataProviderCopyData(CGImageGetDataProvider(image));
    const UInt8* data = CFDataGetBytePtr(pixelData);

    int pixelInfo = yPos * CGImageGetBytesPerRow(image) + xPos * 4;

    UInt8 alpha = data[pixelInfo];

    CFRelease(pixelData);

    if (alpha) 
        return YES;

    return NO;
} 
```

# android - 从 ForeignCollection 添加、删除对象

> ID：11540049
> 
> 赞同：4
> 
> 时间：2012-07-18T11:15:12.103
> 
> 标签：android, ormlite, foreign-collection

我有一个包含 ForeignCollection 的实体，该实体带有集合的 getter 和 setter

```
public class TextQuestion{

    @ForeignCollectionField
    private ForeignCollection<TextAnswer> answers;
    .... 
```

我有一个封装 DAO 的 Servicer 包装类

```
public class TextQuestionService
{

    private static TextQuestionService instance;
    private static Dao<TextQuestion, Integer> textQuestionDAO;
    private static DatabaseHelper dbHelper = new DatabaseHelper();

    public void addAnswer( TextQuestion textQuestion, TextAnswer answer )
    {
        List<Answer> answers = (List)textQuestion.getAnswers();
        if( answers == null )
        {
            try
            {
                answers = (List)textQuestionDAO.getEmptyForeignCollection("answers");
            } catch (SQLException e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        answers.add(answer);
    } 
```

我的问题是如何通过 Wrapper 服务类从该集合中添加、删除项目？以上是我的努力，但我刚刚完全迷失了，将集合转换为列表等。问题是当我想为问题 ForeignCollection 添加一个答案时，如果答案集合不为空但我想建立提出问题，在坚持之前添加答案。从上一个问题中，我了解到如果尚未从数据库中检索到父级，我需要调用 getEmptyForeignCollection。必须有一个简单的方法来做到这一点？任何类似的例子都会很好

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T18:06:25.363

> 问题是当我想向 Questions ForeignCollection 添加一个 Answers 时，如果 Answers Collection 不为空但我想建立 Questions 就没有问题，

我认为你很接近。你应该能够做到：

```
ForeignCollection<TextAnswer> answers = textQuestion.getAnswers();
if (answers == null) {
    answers = textQuestionDAO.getEmptyForeignCollection("answers");
}
answers.add(answer); 
```

`answers`也可以是 a`Collection<TextAnswer>`但不是 a `List`。

# facebook - FB.Canvas.setSize() -- 无参数/自动调整大小不起作用

> ID：11540050
> 
> 赞同：0
> 
> 时间：2012-07-18T11:15:23.507
> 
> 标签：facebook, debugging

我们在没有参数的情况下调用了 setSize，但它不起作用。

```
FB.Canvas.setSize(); 
```

7 月 18 日，不工作 7 月 17 日，工作

我在网上搜索了很多人都有这个问题。但大多数修复都与带参数的调用有关，即 FB.Canvas.setSize({width height});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:46:42.053

如果`setSize`只适用于你的参数，你可以使用 jQuery 来确定你的身体的当前大小（html 身体，你知道我的意思......）：

```
FB.Canvas.setSize({ $(document.body).width(), $(document.body).height() }); 
```

# php - nginx 和 apache - 处理 php 文件时出错

> ID：11540058
> 
> 赞同：0
> 
> 时间：2012-07-18T11:15:44.093
> 
> 标签：php, nginx, apache2

我还在学习 nginx，所以如果答案很明显，请多多包涵:)。

[我已经使用这些说明](http://hybridlogic.co.uk/2011/07/setting-up-nginx-in-front-of-apache2-on-ubuntu-server/)在 apache 前面设置了 nginx

nginx 似乎正在正确处理 html 文件，但是每当我尝试访问 php 文件时，我都会收到 404 错误。

这是 nginx example.com conf 文件

```
server {
    listen 80;
    access_log /var/www/example.com/logs/nginx.access.log;
    error_log /var/www/example.com/logs/nginx.error.log;
    root /var/www/example.com/prod;
    index index.php index.html index.htm;
    server_name www.example.com example.com;
    location \ {
            try_files $uri $uri/ index.php/$uri;
    }
    location ~* ^.*\.php$ {
            if (!-f $request_filename) {
                    return 404;
            }
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $host;
            proxy_pass http://127.0.0.1:8080;
    }
    location ~ /\.(ht|git) {
            deny all;
    }
} 
```

这是我的 apache example.com conf 文件

```
<VirtualHost 123.45.67.89:8080>
    ServerName example.com
    ServerAlias www.example.com
    ServerAdmin webmaster@example.com

    #Indexes + Directory Root
    DirectoryIndex index.html index.htm index.php
    DocumentRoot /var/www/example.com/prod/

    #CGI Directory
    ScriptAlias /cgi-bin/ /var/www/example.com/prod/cgi-bin/
    <location /cgi-bin>
            Options +ExecCGI
    </location>

    #Log Files
    ErrorLog /var/www/example.com/logs/error.log
    CustomLog /var/www/example.com/logs/access.log combined

</VirtualHost> 
```

在 4 小时的大部分时间里，我一直在试图找出我的错误在哪里。我希望你能提供帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:54:47.373

`proxy_pass http://127.0.0.1:8080;`并且`<VirtualHost 123.45.67.89:8080>` 看起来不一样。

并且 nginx 配置看起来不对。[如果您阅读官方文档](http://nginx.org/en/docs/)，也许您会获得更好的运气。

# php - 使用 file_put_contents 的数组

> ID：11540062
> 
> 赞同：1
> 
> 时间：2012-07-18T11:15:55.410
> 
> 标签：php, arrays

可以说我有 2 个数组。

```
$arr1=array("foo"=>"bar", 1=>"one", 2=>"two");
$arr2=array("h"=>"eich", 3=>"three", 4=>"four"); 
```

通过使用 file_put_contents 我可以将数组打印到一个新的 php 文件中，如下所示：

```
<?php
$arr1 = Array
(
   "foo"=>"bar",
    1=>"one",
    2=>"two"
) //need a semicolon here 
$arr2 = Array
(
   "h"=>"eich",
    3=>"three",
    4=>"four"
)//need a semicolon here 
```

我的问题是，如何在每个数组结束后获得分号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:28:22.760

因为你甚至有这个问题，我猜你正在循环数组以将它们转换为 PHP 代码而不是使用[`var_export()`](http://php.net/manual/en/function.var-export.php)- 你应该是：

```
$arr1 = array("foo"=>"bar", 1=>"one", 2=>"two");
$arr2 = array("h"=>"eich", 3=>"three", 4=>"four");

$file = "<?php\n\n".var_export($arr1, TRUE).";\n\n".var_export($arr2, TRUE).";\n";

file_put_contents('newfile.php', $file); 
```

[看到它工作](http://codepad.org/5GcuI7Qr)

# php - 带有双重选择语句的嵌套mysql查询？

> ID：11540065
> 
> 赞同：3
> 
> 时间：2012-07-18T11:16:14.990
> 
> 标签：php, mysql

我有一个关于嵌套查询的简单问题。老实说，我不知道它是否只能通过一个查询来完成，或者我是否必须使用 PHP。

简而言之，我想通过关系表中的 select 语句返回的用户 ID 从用户表中返回用户信息。

我可以通过 2 个查询和一些 PHP 循环来做到这一点，但为了节省资源，但我认为最好将它组合成 1 个查询和单个循环。

第一次查询

```
SELECT UserID FROM relations WHERE GroupID = '1' 
```

第二个查询我需要通过第一个 select 语句返回的用户 ID 从用户表中检索用户信息。

我可以通过循环遍历 ID 并进行查询来做到这一点，但我认为我可以在 1 个查询中获得所有信息。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:21:12.043

这是执行此操作的典型方法：

```
SELECT     users.*
FROM       users
INNER JOIN relations
ON         users.id = relations.userid
WHERE      relations.groupid = 1 
```

我注意到您在查询中使用了 1 周围的引号。我假设组 id 是一个整数值，在这种情况下你不应该使用引号。

使用 IN 子查询的答案可能性能较差。特别是。对于 MySQL，JOIN 应该始终是我们合并表结果的首选方式，因为 MySQL 的子查询实现特别乏善可陈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:18:45.233

```
Select * from user_table where id in(SELECT UserID FROM relations WHERE GroupID = '1')
                                   OR
Select * from user_table u INNER JOIN relations r ON u.UserID=r.UserID WHERE r.GroupID='1' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T11:18:26.120

```
select * from user_typw 
where userID in (SELECT UserID FROM relations WHERE GroupID = '1') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T11:18:47.860

试试这个

```
select * from user where UserID  in
(SELECT UserID FROM relations WHERE GroupID = '1') 
```

或者

```
select * from user U where exists 
(SELECT * FROM relations R WHERE U.UserID=R.UserID and  R.GroupID = '1') 
```

或者

```
select U.*
from user U join relations R 
on U.UserID=R.UserID 
where  R.GroupID = '1' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:20:02.577

```
SELECT * FROM user_table ut LEFT JOIN relations r on ut.UserID=r.UserID where r.GroupID=1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T11:21:32.563

SELECT A.field1,B.field2 FROM table1 A LEFT JOIN table2 B ON A.common_ID=B.common_ID WHERE field = 'abc'

# android - 通过从他们的名字中调用它们来访问android中原始文件夹中的文件

> ID：11540069
> 
> 赞同：0
> 
> 时间：2012-07-18T11:16:25.087
> 
> 标签：android

我的代码如下：我无法在文件名中使用字符串。有什么建议么？如果我使用 R.raw.anyString ，它会显示错误

```
tv3.setText(readTxt());
}

private String readTxt(){
    InputStream inputStream = getResources().openRawResource(R.raw.filname);
    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    int i;
    try {
        i = inputStream.read();
        while (i != -1)
        {
            byteArrayOutputStream.write(i);
            i = inputStream.read();
        }
        inputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return byteArrayOutputStream.toString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:36:11.767

这段代码对我很有用：

```
InputSource inputSource = new InputSource(ApplicationContext.get()
            .getResources().openRawResource(R.raw.countries)); 
```

我用它来打开 XML 文件并稍后在我的代码中解析它。

# silverlight - 交替行颜色 WP7

> ID：11540070
> 
> 赞同：0
> 
> 时间：2012-07-18T11:16:26.463
> 
> 标签：silverlight, windows-phone-7, mvvm, listbox, listboxitem

我想在我的 MVVM Light WP7 项目中使用列表框的交替背景颜色。

WP7 不支持交替 ListBox 项背景的背景颜色。

我有一个列表框，它的 itemsource 设置为 CollectionViewSource。CollectionViewSource 又绑定到我的 ViewModel 中的 ObservableCollection。CollectionViewSource 配置为按我的自定义对象中的日期时间属性对列表进行排序。

当列表滚动到底部时，会向视图模型发送一个命令，以将更多数据添加到我的集合中。由于 CollectionViewSource 按日期时间排序，因此项目可以出现在列表中的任何位置，而不仅仅是在末尾。

这使得[http://chillijam.co.uk/2012/01/11/alternating-listbox-item-background-colours-in-wp7/](http://chillijam.co.uk/2012/01/11/alternating-listbox-item-background-colours-in-wp7/)和[如何在窗口电话 7 的列表框中应用备用行样式](https://stackoverflow.com/questions/6247920/how-to-apply-alternate-row-style-in-listbox-in-window-phone-7)等方法不起作用。因为他们只检查以前添加的项目。

我还订阅了 ListView UpdateLayout 事件，并在那里遍历 ListBox 中的每个元素并交替背景，但这会触发很多次并使应用程序真的没有响应。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:22:59.053

您可以尝试按行数访问行并为其添加颜色。

```
if( row.id % 2 ==0)
//first color
else 
//second color 
```

编辑：当它被选中时，我用它来修改列表框行背景

```
 ListBoxItem lbiSelected = (ListBoxItem)(CalcultionList.ItemContainerGenerator.ContainerFromIndex(selectedItemIndex));
     //CalculationList is the name of my listbox
     lbiSelected.Background = new SolidColorBrush(Colors.Red); 
```

# clojure - *new* contrib 中的任何 Java 属性文件库？

> ID：11540071
> 
> 赞同：3
> 
> 时间：2012-07-18T11:16:26.347
> 
> 标签：clojure, properties-file, clojure-contrib

在旧的单体 clojure-contrib 中，有一些命名空间`java-utils`和`properties`一些方便的函数，比如`read-properties`将 Java 属性文件解析为 Clojure 映射。

新贡献中是否有与这些名称空间等效的名称？

我知道编写（即复制粘贴）[该函数](https://github.com/richhickey/clojure-contrib/blob/a1c66df5287776b4397cf3929a5f498fbb34ea32/src/main/clojure/clojure/contrib/java_utils.clj#L162)很容易，无论如何我可能都会这样做，但如果它已经在某个地方，我宁愿不重复代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T09:52:20.610

java_utils 库从未成功，但请查看[propertea](https://github.com/jaycfields/propertea)。我想它会做你想要的。

# android - Android MediaPlayer 错误 (1, -2147483648)

> ID：11540076
> 
> 赞同：89
> 
> 时间：2012-07-18T11:17:09.770
> 
> 标签：android, media-player, android-videoview

我有两个不同的视频，我正在尝试将它们加载到`VideoView`using

```
videoView.setVideoURI(Uri.parse(url)); 
```

这两个视频，让他们成为*video 1*和*video 2*，具有以下规格（使用 提取`ffmpeg -i`）；实际上，它们是同一视频的两种不同编码：

1.  视频 1：

    ```
    Seems stream 0 codec frame rate differs from container frame rate: 180000.00 (180000/1) -> 90000.00 (180000/2)
    Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '4fbfd5ece4b0932236fc234d.mp4':
      Metadata:
        major_brand     : mp42
        minor_version   : 0
        compatible_brands: mp42isomavc1
        creation_time   : 2011-12-03 04:43:46
        genre           : Trailer
        artist          : Paramount Pictures
        title           : Captain America: The First Avenger - Theatrical Trailer #2
        encoder         : HandBrake 4344svn 2011111001
        date            : 2011
      Duration: 00:02:30.67, start: 0.000000, bitrate: 6738 kb/s
        Stream #0.0(und): Video: h264 (High), yuv420p, 1920x800 [PAR 1:1 DAR 12:5], 6575 kb/s, 23.97 fps, 90k tbr, 90k tbn, 180k tbc
        Metadata:
          creation_time   : 2011-12-03 04:43:46
        Stream #0.1(eng): Audio: aac, 48000 Hz, stereo, s16, 159 kb/s
        Metadata:
          creation_time   : 2011-12-03 04:43:46 
    ```

2.  视频 2：

    ```
    Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '500416ea44aeb4b95d5ae8a0_hd.mp4':
      Metadata:
        major_brand     : isom
        minor_version   : 512
        compatible_brands: isomiso2avc1mp41
        creation_time   : 2011-12-03 04:43:46
        title           : Captain America: The First Avenger - Theatrical Trailer #2
        artist          : Paramount Pictures
        date            : 2011
        encoder         : Lavf53.32.100
        genre           : Trailer
      Duration: 00:02:30.69, start: 0.000000, bitrate: 2045 kb/s
        Stream #0.0(und): Video: h264 (High), yuv420p, 1280x720 [PAR 27:20 DAR 12:5], 1889 kb/s, 23.99 fps, 90k tbr, 180k tbn, 180k tbc
        Metadata:
          creation_time   : 2011-12-03 04:43:46
        Stream #0.1(eng): Audio: aac, 44100 Hz, stereo, s16, 151 kb/s
        Metadata:
          creation_time   : 2011-12-03 04:43:46 
    ```

我知道 Honeycomb 附带了 AAC 支持，因此我用几种设备测试了这些视频；结果如下：

1.  `SGS II with custom 4.0.3 OS(Sensation ROM 3.4 with CF-Root kernel) - Video 1:OK - Video2:OK`
2.  `SGS I with Samsung 2.3.3 OS - Video 1:error (1, -2147483648) - Video 2:OK`
3.  `SGS I with custom 4.0.3 OS(ICS SGS TEAM ROM with Devil kernel) - Video 1:error (1, -2147483648) - Video 2:OK`
4.  `Nexus One with original 2.3.6 OS - Video 1:See (1) below - Video 2:See (2) below`
5.  `Emulator with 2.2 OS - Video 1:error (1, -2147483648) - Video 2:error (1, -2147483648)`
6.  `Emulator with 4.0.3 OS - Video 1:error (1, -2147483648) - Video 2:error (1, -2147483648)`

这两个视频都可以在 PC 的 Google Chrome 中正常播放。在正常情况下添加视频和音频都可以正确播放可能很有用。在错误 (1, -2147483648) 的情况下，所有设备（Nexus One 除外）都会喷出相同的日志：

```
07-18 10:25:10.996: I/MediaPlayer(17860): uri is:http://s3-eu-west-1.amazonaws.com/cf-templates-k6ohn88yswx5-eu-west-1/videos/4fbc88e7e4b0b0896e877764/4fbfd5ece4b0932236fc234d.mp4
07-18 10:25:10.996: I/MediaPlayer(17860): path is null
07-18 10:25:10.996: D/MediaPlayer(17860): Couldn't open file on client side, trying server side
07-18 10:25:39.859: D/MediaPlayer(17860): getMetadata
07-18 10:25:45.070: E/MediaPlayer(17860): error (1, -2147483648)
07-18 10:25:45.074: E/MediaPlayer(17860): Error (1,-2147483648)
07-18 10:25:45.078: D/VideoView(17860): Error: 1,-2147483648 
```

在 (1) 的情况下，以下日志从 Nexus One 中喷涌而出，并且视频永远不会加载：

```
07-18 13:49:20.115: D/MediaPlayer(10109): Couldn't open file on client side, trying server side
07-18 13:49:20.115: I/StagefrightPlayer(68): setDataSource('http://s3-eu-west-1.amazonaws.com/cf-templates-k6ohn88yswx5-eu-west-1/videos/4fbc88e7e4b0b0896e877764/4fbfd5ece4b0932236fc234d.mp4')
07-18 13:49:20.135: I/NuHTTPDataSource(68): connect to s3-eu-west-1.amazonaws.com:80/cf-templates-k6ohn88yswx5-eu-west-1/videos/4fbc88e7e4b0b0896e877764/4fbfd5ece4b0932236fc234d.mp4 @0
07-18 13:49:20.155: I/ActivityManager(98): Displayed com.woisio/.video.VideoActivity: +450ms
07-18 13:49:20.795: I/NuCachedSource2(68): Keep alive
07-18 13:49:22.185: I/OMXCodec(68): [OMX.qcom.video.decoder.avc] allocating 4 buffers of size 460800 on input port
07-18 13:49:22.195: I/OMXCodec(68): [OMX.qcom.video.decoder.avc] allocating 8 buffers of size 2304000 on output port
07-18 13:49:25.325: D/dalvikvm(9499): GC_EXPLICIT freed 13K, 50% free 2726K/5379K, external 1625K/2137K, paused 116ms
07-18 13:49:27.525: I/NuCachedSource2(68): Keep alive
07-18 13:49:28.235: I/NuCachedSource2(68): Cache full, done prefetching for now
07-18 13:49:30.275: D/dalvikvm(9902): GC_EXPLICIT freed 8K, 50% free 2714K/5379K, external 1625K/2137K, paused 69ms
07-18 13:49:34.255: D/Finsky(9066): [1] 5.onFinished: Installation state replication succeeded.
07-18 13:49:35.855: I/NuCachedSource2(68): Keep alive
07-18 13:49:39.055: D/dalvikvm(9911): GC_EXPLICIT freed 22K, 50% free 2710K/5379K, external 1625K/2137K, paused 38ms
07-18 13:49:42.575: I/NuCachedSource2(68): Keep alive
07-18 13:49:43.285: I/NuCachedSource2(68): Keep alive
07-18 13:49:44.095: D/dalvikvm(9918): GC_EXPLICIT freed 7K, 50% free 2708K/5379K, external 1625K/2137K, paused 66ms
07-18 13:49:49.085: D/dalvikvm(9925): GC_EXPLICIT freed 15K, 49% free 3268K/6407K, external 1625K/2137K, paused 50ms
07-18 13:49:50.925: I/NuCachedSource2(68): Keep alive
07-18 13:49:54.115: D/dalvikvm(6756): GC_EXPLICIT freed 9K, 44% free 3774K/6727K, external 1625K/2137K, paused 77ms
07-18 13:49:57.685: I/NuCachedSource2(68): Keep alive
07-18 13:49:58.375: I/NuCachedSource2(68): Keep alive
07-18 13:49:59.105: D/dalvikvm(9066): GC_EXPLICIT freed 385K, 53% free 3186K/6727K, external 1625K/2137K, paused 66ms
07-18 13:50:05.955: I/NuCachedSource2(68): Keep alive
07-18 13:50:06.045: D/dalvikvm(8047): GC_EXPLICIT freed 9K, 47% free 3830K/7111K, external 1625K/2137K, paused 86ms
07-18 13:50:09.465: I/3gw.Service(488): Mobile Network not connected - not roaming
07-18 13:50:12.765: I/NuCachedSource2(68): Keep alive
07-18 13:50:13.465: I/NuCachedSource2(68): Keep alive
07-18 13:50:18.775: I/WindowManager(98): Setting rotation to 3, animFlags=0
07-18 13:50:18.795: I/ActivityManager(98): Config changed: { scale=1.0 imsi=286/2 loc=en_US touch=3 keys=1/1/2 nav=3/1 orien=2 layout=34 uiMode=17 seq=34}
07-18 13:50:18.895: D/dalvikvm(169): GC_EXTERNAL_ALLOC freed 108K, 48% free 3253K/6215K, external 5172K/5180K, paused 37ms
07-18 13:50:21.005: I/NuCachedSource2(68): Keep alive
07-18 13:50:21.265: D/dalvikvm(98): GC_EXPLICIT freed 394K, 42% free 6631K/11335K, external 4458K/5567K, paused 109ms 
```

在 (2) 的情况下，以下日志从 Nexus One 中喷出，如您所见，以错误结尾 (1, -2147483648)：

```
07-18 13:47:03.595: D/MediaPlayer(10059): Couldn't open file on client side, trying server side
07-18 13:47:03.595: I/StagefrightPlayer(68): setDataSource('http://s3-eu-west-1.amazonaws.com/cf-templates-k6ohn88yswx5-eu-west-1/videos/4ff4514444aec3d2f9f07ead/500416ea44aeb4b95d5ae8a0_hd.mp4')
07-18 13:47:03.605: I/NuHTTPDataSource(68): connect to s3-eu-west-1.amazonaws.com:80/cf-templates-k6ohn88yswx5-eu-west-1/videos/4ff4514444aec3d2f9f07ead/500416ea44aeb4b95d5ae8a0_hd.mp4 @0
07-18 13:47:03.625: I/ActivityManager(98): Displayed com.woisio/.video.VideoActivity: +505ms
07-18 13:47:05.355: I/OMXCodec(68): [OMX.qcom.video.decoder.avc] allocating 4 buffers of size 460800 on input port
07-18 13:47:05.355: I/OMXCodec(68): [OMX.qcom.video.decoder.avc] allocating 8 buffers of size 1382400 on output port
07-18 13:47:05.365: I/NuCachedSource2(68): Keep alive
07-18 13:47:08.375: D/MediaPlayer(10059): getMetadata
07-18 13:47:08.745: D/dalvikvm(9925): GC_EXPLICIT freed 651K, 49% free 3275K/6407K, external 1625K/2137K, paused 68ms
07-18 13:47:09.205: I/3gw.Service(488): Mobile Network not connected - not roaming
07-18 13:47:11.565: I/NuCachedSource2(68): Cache full, done prefetching for now
07-18 13:47:12.095: I/NuCachedSource2(68): Keep alive
07-18 13:47:14.245: W/QCvdec(68): H264_Utils::check_header 
07-18 13:47:14.245: W/QCvdec(68): check_header: start code 33
07-18 13:47:14.245: W/QCvdec(68): H264_Utils::check_header 
07-18 13:47:14.245: W/QCvdec(68): check_header: start code 10
07-18 13:47:14.245: W/QCvdec(68): Parsing Error unsupported profile or level
07-18 13:47:14.245: W/QCvdec(68): ETB in Invalid State
07-18 13:47:14.245: E/OMXCodec(68): [OMX.qcom.video.decoder.avc] ERROR(0x8000100a, 0)
07-18 13:47:14.245: E/MediaPlayer(10059): error (1, -2147483648)
07-18 13:47:14.285: E/MediaPlayer(10059): Error (1,-2147483648)
07-18 13:47:14.285: D/VideoView(10059): Error: 1,-2147483648 
```

根据我的阅读，错误 (1, -2147483648) 可能对应于不受支持的编解码器、损坏的元数据或不正确的文件头。如果是这样，您能否指出我使用哪种编解码器的正确方向？谢谢。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-08-06T15:16:24.513

只是为了根据标题为阅读此问题的任何人澄清一些事情。

查看错误值 (1, -2147483648) 时，“1”值对应于[MediaPlayer.MEDIA_ERROR_UNKNOWN](https://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_ERROR_UNKNOWN)中的常量。

-2147483648 对应于十六进制 0x80000000，在 frameworks/native/include/utils/Errors.h 中定义为 UNKNOWN_ERROR

这表明错误的来源很难确定，因为它是一个非常通用的返回值，由上面提到的编解码器和兼容性问题以及线程取消和其他几种类型引发。

对于您的问题，我建议使用兼容的 Android 版本咨询[Android Supported Media Formats](http://developer.android.com/guide/appendix/media-formats.html)，看看编码类型是否是您问题的原因，但如上所述，未知错误响应可能是由许多问题引起的。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-11-15T18:18:57.913

我在 Android P (Pixel 2 XL) 上遇到了同样的错误，但我所要做的就是放在`android:usesCleartextTraffic="true"`我的`AndroidManifest.xml`应用程序标签上。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-17T16:56:00.147

对于流媒体，Android 网站有一个注释：

> 对于 3GPP 和 MPEG-4 容器，moov 原子必须在任何 mdat 原子之前，但必须在 ftyp 原子之后。

`moov`在移动原子之前我遇到了同样的错误。为了解决这个问题，您可以将[mp4Box](https://gpac.wp.mines-telecom.fr/mp4box/)与以下命令一起使用：

```
MP4Box -hint output.mp4 
```

之后我的大部分视频都可以流式传输。如果它不起作用，请尝试使用 ffmpeg：

```
ffmpeg -i input.flv -f mp4 -vcodec libx264 -vprofile baseline -acodec libfaac -ar 16k -ab 32k output.mp4
MP4Box -hint output.mp4 
```

您可以在[此处](https://help.ubuntu.com/community/AndroidVideoEncoding)找到其他工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-18T14:45:30.273

播放视频（rtsp）时，我也遇到了相同**的 MEDIA_ERROR_UNKNOWN**错误问题。

就我而言，我发现我的 wifi 有问题。一些安全原因 wifi 受限于 RTSP 协议。所以我面临这个 MEDIA_ERROR_UNKNOWN 错误问题。一旦检查您的网络权限。

当我转向移动数据播放视频时，它对我来说工作正常。可能这会对面临同样错误的人有所帮助:)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-14T09:04:45.137

注意设备的支持媒体类型和分辨率。`error (1, -2147483648)`当您的设备不支持您的视频媒体类型、编解码器或分辨率时，通常会出现错误。

在文档中查看 Android 支持的媒体类型：

[https://developer.android.com/guide/appendix/media-formats.html](https://developer.android.com/guide/appendix/media-formats.html)

例如，我们可以注意到 3.0 以上的设备支持 .mp4，但并非所有设备都支持 HD 720p。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T22:28:19.143

我有一个类似的问题。在我的情况下，当我先将视频下载到手机然后播放时，视频会正常播放。但是当我尝试使用渐进式 HTTP 时，我会得到 OP 中记录的相同错误。

我验证了 ftyp、moov 和 mdat 原子的顺序是否正确。原来问题出在 ftyp 字段的值上。它被设置为“qt”。我使用 MP4Box 来提取曲目并创建一个新的 mp4 文件，其中 ftyp 设置为“isom”。这个新文件适用于渐进式 HTTP。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-21T08:32:22.180

如果您`MediaPlayer`用于播放音频，这对我来说是错误的情况：

执行`.setDataSource()`参数时，我传递的是一个带有给定文件路径的字符串。这导致了我无法找到特定原因的各种异常。但是，当更改为 时`FileDescriptor`，根据[Android Developers - .setDataSource() 方法](https://developer.android.com/reference/android/media/MediaPlayer#setDataSource(java.io.FileDescriptor,%2520long,%2520long))，它被整理出来了。
我`FileDescriptor`从`FileInputStream`.
这是代码：

```
val player: MediaPlayer = MediaPlayer()
fun playRecording() {
    try {
        replayFileStream = FileInputStream(path)
        val fd = replayFileStream?.fd
        player.setDataSource(fd)
        player.prepareAsync()
        // start should be called from onPreparedListener
     } catch (e: Exception) {
        // catch exceptions
     }
 } 
```

播放的实际开始`OnPreparedListener`按照以下建议进行处理：[Android Media Player: Start called in state 4 error(-38,0)](https://stackoverflow.com/questions/15516469/android-media-player-start-called-in-state-4-error-38-0) 。
监听器设置如下：

```
player.setOnPreparedListener(object: MediaPlayer.OnPreparedListener {
    override fun onPrepared(player:MediaPlayer) {
        player.start()
    }
}) 
```

[android](/questions/tagged/android "显示标记为“android”的问题") [kotlin 媒体播放](/questions/tagged/kotlin "显示标记为“kotlin”的问题") [器](/questions/tagged/mediaplayer "显示标记为“媒体播放器”的问题")

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-18T18:48:54.870

我以类似于@nam-trung 的回答中所述的方式解决了这个问题，但是由于我的视频已经是**h264**和**mp4**，我需要做的就是在每个文件上运行以下命令：

```
ffmpeg -i input.mp4 -vprofile baseline output.mp4 
```

之后，当我在运行 API v19 到 v25 时测试过的所有设备上运行时，这些视频都可以在*VideoView中运行。*

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-10T06:15:38.843

在我的情况下，错误是由于媒体播放器对本地存储的视频没有文件权限。尝试将视频存储到`/mnt/sdCARD`目录中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-20T11:53:16.410

就我而言，我在网址信息所在的网址上进行了 Gzip 压缩。压缩的媒体文件可能无法在 android 上解码。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-08T16:33:53.403

我面临同样的问题，但我所做的是

首先我停止媒体播放器，然后释放它。

mMediaPlayer.stop(); mMediaPlayer.release();

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-06-20T03:47:53.187

就我而言，这个问题是由带有空格的媒体 URL 引起的！这是修复：

```
mMediaPlayer.setDataSource(source.replaceAll(" ", "%20")); 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-10-31T01:05:01.663

如果您使用的是 firebase ，那么您应该从 1 复制路径（或 url）：Download Url 其中包含[https://firebasestorage](https://firebasestorage) ......

不是来自存储位置

2： `<uses-permission android:name="android.permission.INTERNET" />`在清单文件夹内的清单标签中添加此权限

内部存储规则

内部存储规则：

```
rules_version = '2';
service firebase.storage {
match /b/{bucket}/o {
match /{allPaths=**} {
 allow read, write: if true;
  }  
 }  
 } 
```

# python - 组织两列数据

> ID：11540077
> 
> 赞同：3
> 
> 时间：2012-07-18T11:17:11.860
> 
> 标签：python, sorting, csv

嗨，我有一个两列数据存储在一个名为“Cv_0.out”的文件中，每列由两个空格分隔

```
12  454
232  123
879  2354 
12312  23423
8794  1237
3245  34 
```

然后，我想仅根据右侧列值按升序对这些数据进行排序，同时将值对保持在一起，因此重新排序左侧值。我想得到以下信息：

```
3245  34
232  123
12  454
8794  1237
879  2354
12312  23423 
```

到目前为止，我已经尝试了以下方法：

```
import sys,csv    
import operator
reader = csv.reader(open('Cv_0.out'),delimiter=' ')
sort = sorted(reader, key=lambda row: int(row[0]))
print sort 
```

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:43:03.797

即使没有 CSV，也可以处理您的输入文件：

```
with open("input") as f:
    lines = (map(int,x.strip().split()) for x in f)
    newLines = sorted(lines, key=lambda row: row[1])
    print "\n".join(str(x)+ " " + str(y)  for x,y in newLines) 
```

IMO，如果您想对第二列进行排序，则问题在于使用`row[0]`而不是。`row[1]`

# monitoring - 声纳墙显示？

> ID：11540078
> 
> 赞同：2
> 
> 时间：2012-07-18T11:17:19.853
> 
> 标签：monitoring, sonarqube

我的雇主安装了两个大型 LCD 面板来显示构建健康和统计数据。

我想显示当日更新的声纳图。最好的解决方法是什么？我浏览了可用的插件，但还没有找到“墙显示”设施

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:55:54.020

目前不存在这样的插件，实际上我不确定这是否可以通过插件来实现 - 因为插件只能对当前的 Sonar UI 做出贡献。

也许您可以在我们的邮件列表 (user@sonar.codehaus.org) 上发送邮件，告诉您对 Sonar 未来版本的此类功能感兴趣？基本上，这类似于要求 UI 显示标准布局之外的 Sonar 仪表板并具有特定刷新率的可能性。

仅供参考，我们已经为 Sonar 的下一个版本 - 3.3 计划了 UI 工作，因此这可能是一个机会，看看您的需求是否可以在这个 sprint 中得到解决。

# javascript - jQuery + jQuery Mobile + Chrome 20

> ID：11540079
> 
> 赞同：-1
> 
> 时间：2012-07-18T11:17:19.437
> 
> 标签：javascript, jquery, google-chrome, jquery-mobile

将 Google Chrome 更新到最新版本后，我们遇到了一个奇怪的问题，有人可以帮助我们吗？我们正在摆脱想法。

我们有几个 .aspx 页面，其中包括 jquery core (1.7.1) 和 jquery mobile (1.1.0) 以及一些 jqm 插件。在我们更新谷歌浏览器之前，一切都运行良好......我们开始收到完全**随机**的错误，例如：

> “未捕获的类型错误：无法调用未定义的方法‘应用’”“未捕获的类型错误：无法调用未定义的方法‘jqmData’”

在 Firefox、IE9/10 和 Safari 中一切正常。jquery mobile 在 initializePage 函数中抛出异常。我们创建了一个基本页面（结构和一些基本元素）......仍然没有运气。

我们发现了这个类似的问题，但来自 2010 年。 [http://productforums.google.com/forum/#!msg/chrome/JDKZxXsQZiE/sdW9-g1rxYs](http://productforums.google.com/forum/#!msg/chrome/JDKZxXsQZiE/sdW9-g1rxYs)

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:42:38.660

可能是关于那个 v8 错误：[http](http://code.google.com/p/chromium/issues/detail?id=125148) ://code.google.com/p/chromium/issues/detail?id=125148 ？

如果是这样，请参阅那里的解决方法：[Chrome 有时调用不正确的构造函数](https://stackoverflow.com/questions/10314992/chrome-sometimes-calls-incorrect-constructor/10725004#10725004)

# javascript - 打开和关闭 JavaScript 窗口

> ID：11540085
> 
> 赞同：0
> 
> 时间：2012-07-18T11:17:57.203
> 
> 标签：javascript, html

我想关闭一个浏览器窗口，无论它是否在`open`. 我是 javascript 的新手，所以请帮助我使用 javascript 创建以下逻辑。我的 JavaScript 代码在这里：

```
if (myWindow.open() == true) {
    myWindow.close();
} else {
    myWindow=window.open('http://index.html',
                         'popUpWindow',
                         'height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes'
                         );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:21:44.580

是的，我同意克里斯托夫

```
if (!myWindow.closed) {
    myWindow.close();
} 
```

此外

***注意：与上述内容存在特定于浏览器的差异。***如果您打开了窗口，`Javascript (via window.open())`那么如果您有参考，那么您可以使用 javascript 关闭窗口。Firefox 不允许您关闭其他窗口。我相信IE会要求用户确认。其他浏览器可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:30:04.953

你接近正确的结果。

只需检查

```
(myWindow.closed === false) // same as (!myWindow.closed) 
```

代替

```
(myWindow.open() == true) 
```

（因为`open()`只会打开另一个窗口，您的检查将失败。）

另请注意，您需要写`index.html`or `http://sub.yourdomain.tld/index.html`，而不是`http://index.html`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T00:55:14.173

使用`closed`属性检查窗口状态，但首先检查窗口对象是否已创建。

```
var myWindow=null;
if (myWindow && !myWindow.closed) { //exist and is not closed
    myWindow.close();
    myWindow=null; //delete the object
} else { //not exist or is closed
    myWindow=window.open('http://index.html',
                         'popUpWindow',
                         'height=700,width=800,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes'
                        );
} 
```

# jquery - jQuery AJAX 标头授权

> ID：11540086
> 
> 赞同：6
> 
> 时间：2012-07-18T11:18:02.617
> 
> 标签：jquery, webtrends

我正在尝试根据[本教程](http://blog.rassemblr.com/2011/05/jquery-ajax-and-rest-http-basic-authentication-done-deal/)授权 AJAX 查询。它使用 Crypto 库在发送之前使用适当的授权信息设置请求标头。我遇到的问题是标题似乎没有按要求设置。这是我的代码：

```
beforeSend : function(xhr) {
  var bytes = Crypto.charenc.Binary.stringToBytes(username + ":" + password);
  var base64 = Crypto.util.bytesToBase64(bytes);
  xhr.setRequestHeader("Authorization", "Basic " + base64);
}, 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T09:31:02.607

问题不在于将 to 设置`dataType`为`JSONP`. 由于这没有完成，浏览器将调用解释为标准 AJAX 请求，这意味着它在同源策略下被阻止。

工作代码供参考（感谢 @pdeschen 建议 Crpyto）：

```
<script type='text/javascript'>
// define vars
var username = '';
var password = '';
var url = '';

// ajax call
$.ajax({
    url: url,
    dataType : 'jsonp',
    beforeSend : function(xhr) {
      // generate base 64 string from username + password
      var bytes = Crypto.charenc.Binary.stringToBytes(username + ":" + password);
      var base64 = Crypto.util.bytesToBase64(bytes);
      // set header
      xhr.setRequestHeader("Authorization", "Basic " + base64);
    },
    error : function() {
      // error handler
    },
    success: function(data) {
        // success handler
    }
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T20:24:30.670

这*最终*似乎对我有用。个别呼叫可能会发生冲突。将此方法设置为未来连接选项的默认值。

```
//Function( jqXHR jqXHR )
$.ajaxSetup( {beforeSend: function(jqXHR) {
    jqXHR.setRequestHeader( "My-Header", "My-Value" );
} } ); 
```

# matlab - 在matlab中为grt目标同步实时研讨会

> ID：11540088
> 
> 赞同：0
> 
> 时间：2012-07-18T11:18:10.137
> 
> 标签：matlab, real-time, simulink

我正在尝试使用 Real-time Workshop 在 Simulink 中运行实时仿真。目标是 grt（我试过 rtwin，但我的模拟拒绝为它编译）。我需要模拟实时运行，以便模拟中的一秒持续一秒的实时。Grt 忽略实时并在尽可能短的时间内完成模拟。有什么方法可以同步吗？

我试过[http://www.mathworks.com/matlabcentral/fileexchange/3175](http://www.mathworks.com/matlabcentral/fileexchange/3175)但无法让它工作（不编译）。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:51:56.157

看起来这是不可能的。通过使用 WinApi 中的 Sleep(time in ms) 函数和 time.h 中的时钟函数，我能够减慢执行速度，这对于低采样率看起来相当不错。但是，当我提高采样率时，睡眠功能睡眠时间过长，从而导致错误，模拟中的一秒持续时间超过现实世界的一秒。

这个想法是说一个迭代周期应该持续，比如说 200 毫秒。然后计算使用时钟函数执行一次代码迭代需要多长时间。然后调用 Sleep(200 - u)，其中 u 是迭代的长度。问题是 Sleep 函数使进程休眠并在它想要的时候唤醒它，而不是当你在参数中告诉它时。

我知道这不是一个解决方案，但发布这个，以便如果有人面临与我相同的问题，他们将不会尝试这个死胡同的解决方案。我不得不为 rtwin 重写模拟，现在它工作正常。

另一个想法是以某种方式使用中断，但我想这会很复杂，不值得麻烦。

# java - 声级有效值

> ID：11540094
> 
> 赞同：1
> 
> 时间：2012-07-18T11:18:31.243
> 
> 标签：java, audio

我找到了一些代码来计算麦克风声级（RMS）：

```
public int calculateRMSLevel(byte[] audioData) {
    // audioData might be buffered data read from a data line
    long lSum = 0;
    for (int i = 0; i < audioData.length; i++) {
        lSum = lSum + audioData[i];
    }

    double dAvg = lSum / audioData.length;

    double sumMeanSquare = 0d;
    for (int j = 0; j < audioData.length; j++) {
        sumMeanSquare = sumMeanSquare + Math.pow(audioData[j] - dAvg, 2d);
    }

    double averageMeanSquare = sumMeanSquare / audioData.length;
    return (int) (Math.pow(averageMeanSquare, 0.5d) + 0.5);
} 
```

但它仅适用于以下音频格式：

```
private AudioFormat getAudioFormat() {
    float sampleRate = 8000.0F;

    int sampleSizeInBits = 8;

    int channels = 1;

    boolean signed = true;

    boolean bigEndian = true;

    return new AudioFormat(sampleRate, sampleSizeInBits, channels, signed,
            bigEndian);
} 
```

如何扩展代码以便它可以使用不同的位数？如果我将位数更改为 16，它在静音时返回大约 50 的值，而对于 8 位，它返回 1 或 2。我还想在图表上绘制声级，声级值与时间有何关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T20:08:00.423

采样率无关紧要，但位深、字节序以及通道数很重要。

要了解原因，您必须简单地注意到所讨论的函数将字节数组作为参数并单独处理该数组中的每个值。字节数据类型是一个 8 位值。如果您想要使用 16 位值的东西，您需要使用不同的数据类型（短）或从字节转换为。

一旦你这样做了，你仍然会得到 16 位和 8 位的不同值，因为范围不同：8 位从 -128 到 +127，16 位从 -32768 到 +32767，但它们的测量值相同事物，这意味着它们将相同的实际值缩放为不同的表示值。

至于声级及其与时间的关系......这取决于你的采样率和进入这个函数的数组的大小。例如，如果您的采样率为 8kHz，并且每个缓冲区有 2048 个样本，那么您的函数将被称为 8000/2048 或大约每秒 3.9 次，这意味着您的结果将以该速率（每 256 毫秒）出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:47:27.077

您始终可以将输入缩放到相同的最小-最大范围，以从不同格式获得相似的结果。

至于声级 wrt 时间，除了样本彼此分开 1/SampleRate(in Hz) 秒之外没有任何关系。

# x86 - IVT 和 IDT 有什么区别？

> ID：11540095
> 
> 赞同：10
> 
> 时间：2012-07-18T11:18:33.637
> 
> 标签：x86, interrupt

在 Linux 系统上，中断向量表 (IVT) 和中断描述符表 (IDT) 有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T11:29:17.117

这与Linux无关。它是 CPU 的结构，操作系统对其进行初始化以处理中断和异常。在实际寻址模式中，该结构仅包含 ISR 的地址。这种格式称为 IVT。在保护模式下，结构更复杂，称为 IDT。Intel 或 AMD 的 CPU 手册将告诉您有关中断处理的所有细节。

现代操作系统几乎完全在保护模式下运行，因此使用 IDT。IVT 仅在操作系统启动时才需要，因为这发生在实模式下。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-14T11:03:01.437

**实模式下**的中断处理 **在实模式下，内存的低 1K 保存一个称为中断向量表 (IVT) 的数据结构。此表中名义上有 256 个条目。（从 80286 开始，IVT 不需要有 256 个条目或从物理地址 0 开始。IVT 的基址和地址以及长度通过查看 I** 中断描述符表寄存器**来确定。）每个条目包含指向中断服务程序的远指针。任何类型的中断都通过此表路由到相应的中断服务程序。处理器索引此表中的中断号；将当前的 CS、IP 和标志压入堆栈；并调用 IVT 中指定的远指针。处理程序处理中断，然后执行 IRET 指令，将控制权返回到中断时处理器执行的地方。**

 **保护模式下的中断处理 在保护模式下，中断的处理方式与实模式类似。中断描述符表 (IDT) 的作用与 IVT 在实模式下的作用相同。IDT 由一组 8 字节的段描述符组成，称为门。中断描述符表寄存器 (IDTR) 保存 IDT 的基地址和限制。**IDT 必须存在于物理内存中，并且永远不应换出到虚拟内存中。这是因为如果在 IDT 被换出时发生中断，处理器将产生异常，要求 IDT 获取处理此异常的处理程序，依此类推，直到系统崩溃。IDT 中的门可以由三种类型组成：中断门、陷阱门和任务门。我们不会详述陷阱和任务门的细节。有关详细信息，请参阅英特尔处理器文档。**

[http://www.reverse-engineering.info/SystemHooking/hooksoft.htm](http://www.reverse-engineering.info/SystemHooking/hooksoft.htm)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-18T11:27:08.803

IVT 仅在实模式下有效，IDT 在保护模式下有效

> 在 x86 架构上，中断向量表 (IVT) 是一个表，它指定了实模式下使用的所有 256 个中断处理程序的地址[[更多...]](http://wiki.osdev.org/IVT)
> 
> 中断描述符表 (IDT) 特定于 I386 架构。它是实模式中断向量表 (IVT) 的保护模式对应物，它告诉中断服务例程 (ISR) 的位置。[[更多的...]](http://wiki.osdev.org/Interrupt_Descriptor_Table)**

# windows-phone-7 - 如何在 wp7 中使用多行文本块？

> ID：11540096
> 
> 赞同：6
> 
> 时间：2012-07-18T11:18:34.400
> 
> 标签：windows-phone-7

我想使用 textblock 将我的文本显示为多行。我有一个文本块，它的文本属性与 webservices 绑定。运行时文本块显示在长单行上。但我想将这一单行划分为多行。那我能做什么？我也使用文本环绕属性，但它不起作用。

我的 XMAL 代码是

```
 <TextBlock FontSize="22" Text="Address:"  Height="Auto"/>
<TextBlock FontSize="22" Text="{Binding Address}" Height="Auto" Width="Auto" TextWrapping="Wrap" Margin="49,0,0,0" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T12:24:27.087

删除`Height="Auto" Width="Auto"`.Set 固定值，然后设置`TextWrapping="Wrap"`

# font-face - 字体在 IE9 中不起作用

> ID：11540097
> 
> 赞同：0
> 
> 时间：2012-07-18T11:18:41.237
> 
> 标签：font-face

我正面临字体问题我正在使用 gotham 字体检查下面的代码：

```
@font-face{  
font-family: Gotham MEDIUMITA;
src: url('Gotham_Font/GOTHAM-MEDIUMITA.OTF')format("truetype");  
} 
```

它在 IE8、firefox、chrome 中工作。但是在 IE9 字体不适用...有没有解决方案请帮助解决这个问题...。

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:49:52.783

首先，在网页中使用此字体违反了您从 H&FJ 获得的字体许可。其次，它可能无法正常工作有几个原因：

1.  IE9 要求任何与@font-face 链接的原始TTF 都将嵌入在字体中的OS/2 fsType 代码设置为“可安装”。可能您的字体没有正确设置。您可以改用 WOFF 或 EOT 来解决此问题。在此处查看字体声明的正确语法：[http ://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax/](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax/)

2.  理想情况下，您的字体系列名称应为“in_quotes_with_no_spaces”

# x86 - 为小内核设计 GDT

> ID：11540104
> 
> 赞同：1
> 
> 时间：2012-07-18T11:18:49.840
> 
> 标签：x86, kernel, memory-segmentation

我目前正在编写一些小的内核代码。以下是我从某处的内核项目中复制的内容。它包含将内核加载到内存位置 0x1000 并跳转到位置 0x1000 的代码：

```
;
; The Bootsector Code (First 512 bytes of the floppy)
;

;
; Define Code Segment and Data Segment Rights details for inputting to GDTFill function
;
%define CS_ACCES 10011011b ; CS and DS Access Rights (Details in GDT.INC)
%define DS_ACCES 10010011b

;
;  16 Bit Addressing initially
;
[bits 16]

;
; Code begins at 0x7c00
;
[org 0x7c00]

;
; Bios Jumps to 0xf000:0xffff
; Then it loads the first 512 bytes (BootSector) 
;  from first boot device to 0x0000:0x7c00
;

jmp boot

;
; Includes
;
%include "GDT.INC"

;
; Define Stack 
;
boot:
mov ax,0x07C0 
mov ds,ax
mov es,ax
mov ax,0x8FFF 
mov ss,ax

;
; Stack begins at 0xf000 and fills from there downwards
;
mov sp,0xFFFF 

;
; Note:
; Linear Address = Shift Segment by 1 byte and add Offset to it
;
; Read Kernel From Floppy to Memory location es:bx (0x1000 here)
; Cylinder Head Sector and Buffer are as follows:
; 
; es:bx - buffer where to load Kernel to
; ch    - track number
; cl    - starting sector
; dh    - head number
; dl    - drive number (0 here)
; Then call interrupt 0x13 
; 

xor ax,ax
int 0x13

;
; Do the floppy int 13 reading
;
push es 

mov ax,0x100
mov es,ax
mov bx,0

mov ah,2
mov al,30
mov ch,0
mov cl,2
mov dh,0
mov dl,0
int 0x13

;
; Now es holds stack addresss
;
pop es

;
; Fill GDT
; Refer to GDT.INC for details
;
GDTFill 0, 0xFFFFF,CS_ACCES,1101b,gdt_cs
GDTFill 0, 0xFFFFF,DS_ACCES,1101b,gdt_ds

;
; Store Limit of GDT beginning at location marked as gdtptr
; This has to be passed on to lgdt instruction
;
mov ax, gdtend
mov bx, gdt
sub ax,bx
mov word [gdtptr], ax

;
; Store Linear address of GDT at gdtptr after allowing space for the previous data
; Linear Address = Shift Segment by 1 byte and add Offset to it
;
xor ax,ax 
mov ax,ds 
mov bx,gdt
call LinearAdd
mov dword [gdtptr+2], ecx 

;
; Load gdt using lgdt. Disable interrupts before that
;
cli
lgdt[gdtptr]

;
; Move to protected mode. Set cr0's first bit to 1 by or'ing it
;
mov eax,cr0
or ax,1
mov cr0,eax

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
; Once in Protected Mode,
; Except cs all are defined w.r.t DataSegment
; DataSegment Descriptor from beginning of GDT is 8 bytes
; CodeSegment Descriptor from beginning of GDT is 10 bytes
; Stack (Very important! - This is what i messed with initially:
; --------------------------------------------------------------
; Defined w.r.t Data segment
; Beginning - 0x9f000 (Fills downwards)
; Stack size is  = 0x9f000 - DataSegment Value (= 0x0) (Have to change this)
; Quite enough for some small operations and LIBC Functions
;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
jmp next

next:
mov ax,0x10
mov ds,ax
mov es,ax
mov fs,ax
mov gs,ax
mov ss,ax 

mov esp,0x9F000 ; Stack begins filling at this address

;
; protected mode segmented address = cs:0x1000
; This is nothing but 0x0:0x1000 in protected mode (Have to change these)
; Which is where kernel was loaded earlier from floppy
;
jmp dword 0x8:0x1000

end:
jmp end ; Just in case it slips the earlier step !

;
; Initially fill GDT with 0's
; 
gdt:
gdt_null:
dw 0,0,0,0
gdt_cs:
dw 0,0,0,0
gdt_ds:
dw 0,0,0,0
gdtend:

;
; The following is the GDT Pointer
; This is used for passing it on to LGDT Instruction
;
gdtptr:
dw 0x0000 ; 16 bit size of GDT
dd 0 ; 32 bit linear address of GDT

;
; Filling the rest of space with NOP
; Or else boot sector might start executing invalid instructions there
; Because of Junk Data
;
times 510-($-$$) db 144
;
; The signature of boot sector
;
dw 0xaa55 
```

以下在 GDT.INC 中：

```
; Calculate Linear Address
; Called with following Values:
;       ax - has segment number
;   bx - has offset number
; 
; Output:
;   ecx - has Linear Address
; 
; We are in 16 bit mode
;
; Linear Address = Shift Segment by 1 byte and add Offset to it
; So 0x07c0:0x0  = 0x7c00

LinearAdd:
    xor ecx,ecx
    mov cx,ax
    shl ecx,4
    and ebx,0x0000FFFF
    add ecx,ebx
    ret

; Filling Global Descriptor Table
; -------------------------------
;
; Note:
; -----
; 1\. Order of variables input: Base (32 bits), 
;     Limit (20 bits), Access Rights(8 bits), Flags(4 bits), Segment Address 
;     (32 bits)
; 
; 2\. Variables input to function are moved LS 4 bits First (Right to Left) to table
;
; 3\. While reading LS 4 bits or MS 4 bits, read from left to right
;
; Base:
; -----
; Bits in Table          Bits in Field 'Base'        Location w.r.t Beginning of Segment
;---------------------------------------------------------------------------------------
; 16 - 31                0  - 15                     +2 (2 bytes in length)
; 32 - 39                16 - 23                     +4 (1 byte in length)
; 55 - 63                24 - 31                     +7 (1 byte in length)
;
;
; Howto:
; ------
;
; Below %5 ie., the fifth variable input to function GDTFill is Beginning of GDT's Code Segment
; [%5+2] represents entry 1 in above table
; [%5+4] represents entry 2 in above table
; [$5+7] represents entry 3 in above table
; Entry 1 is 2 bytes (so ax is moved to word [%5+2]
; Entry 2 and 3 are 1 byte (so al is moved to byte[%5+4] and [%5+7] respectively
;
; Limit:
; ------
;
; Bits in Table          Bits in Field 'Limit'        Location w.r.t Beginning of Segment
;---------------------------------------------------------------------------------------
; 0  -  15               0 -  15                       +0 (2 bytes in length)
; 16 -  20               48 - 51                       +6 (1 byte in length)
; 
; Refer 'Howto' above for detailed description
;
; Access Rights:
; --------------
; 
; Access Rights (Bit 40 to Bit 47) = Type (Bit 40 to Bit 43) + System Flag (Bit 44) + DPL (Bit 45 and 46) + Reserved (Bit 47); 
; Type        - Your Call (Say A is Kernel Code and B is User code (Here it is 11 and 3 respectively)
; System Flag - Both Code and Data Segment have S Flag = 1
; DPL         - Privilege level (Ring 0 or 3?) (Ring 0 - 00 and Ring 3 - 11)
; 
; Flags:
; ------
; G B O AVL
;
; G   - Granularity = 1 here (means Segment Size is 4096 bytes)
; B   - Address offsets used for accessing segments are 32 bits long
; O   - 0 (Don't know what it is!)
; AVL - 1 here (You Can Ignore it)
;
; 

%macro GDTFill  5   
    push eax
; Base
    mov eax,%1
    mov word [%5+2],ax
    shr eax,16         ; Shift Right to 
    mov byte [%5+4],al
    shr eax,8
    mov byte [%5+7],al
; Limit
    mov eax,%2
    and eax,0x000FFFFF
    mov word [%5],ax    ; ecrit (0..15)
    shr eax,16          ; place (16..19) sur le nibble inferieur
    mov byte [%5+6],0   ; initialise flags+lim(16..19) a 0
    or [%5+6],al        ; ecrit (16..19)
; flags :
    mov al,%4
    and al,0x0F
    shl al,4
    or [%5+6],al
; acces :
    mov byte [%5+5],%3
    pop eax
%endmacro 
```

以上工作了很长时间。然而，当我的内核开始变大时，数据和代码段重叠了。虽然两者都从 0 开始，但数据段中的数据与代码段中的代码或类似内容重叠。因此，我无法完全打印消息。

有没有办法改变数据段和代码段的基址，以便在基址之间有一些空间来编写一个最大约为 1 MB 的二进制小内核？

我已将链接附加到内核并在下面详细描述问题：

1.  我使用以下方法制作内核：

    ```
    make clean; make 
    ```

在 src 文件夹内

1.  使用以下命令在 qemu 中启动它：

    ```
    sudo qemu-system-i386 -net nic,vlan=0,model=pcnet -net tap,vlan=0,ifname=tap,script=no -fda ../flp/fileb.flp -boot a  -m 128 
    ```

2.  启动后，我运行以下命令来验证字符串操作：

    ```
    testnum 
    ```

3.  然后我运行以下命令，我看到消息在中间被剥离并且在某一行之后没有打印：

    ```
    pcnetops 
    ```

4.  如果我在 console.c 中注释以下行并运行 pcnetops，我会打印所有内容：

    ```
    print( "sizeof(char) == ");
    print(htos(sizeof(char)));
    print(CRLF);

    print("htos(stoh(ffffffff, LEFT_TO_RIGHT)): ");
    print(htos(stoh((unsigned char *) "ffffffff", LEFT_TO_RIGHT)));
    print(CRLF); 
    ```

这就是为什么我怀疑我是否应该将代码段和数据段基地址分开的原因（现在两者都是 0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T07:22:51.420

我在您的代码中看到以下内容：

```
gdt_cs:
dw 0,0,0,0
gdt_ds:set
dw 0,0,0,0 
```

您需要做的是修改描述符以包含当前设置为 0 的基数。您可以使用此图像作为指导：

![GDT 入口结构](../Images/7d4bd173db65f68e105ce5e640defbb8.png)

通过适当设置基数和限制，可以确保 CS 和 DS 不重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:09:02.380

问题在于 int 13 调用中没有读取所有软盘扇区。将 al 的值增加到 40（从 30 - 读取的扇区数），然后再次编译。现在它工作正常。我知道这个问题并没有以正确的方式完全解决:)

# asp.net-mvc - 如何使用路由加密 ASP.NET MVC 中的 URL 参数

> ID：11540106
> 
> 赞同：2
> 
> 时间：2012-07-18T11:19:01.323
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我有一个非常具体的问题，我想在 ASP.net MVC 中加密和解密我的 URL 参数。

如果我当前的网址是这样的：

```
http:/mywebsite/controler/Action/ParameterValue1/ParameterValue2/ParameterVale3 
```

我想在用户浏览器上显示为：

```
http:/mywebsite/controler/Action/EncryptedParameterValue1/EncryptedParameterValue2
/EncryptedParameterValue3 
```

在路线表的帮助下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:22:32.437

使用散列加密/解密值。

更多信息请访问[http://www.codeproject.com/Articles/38796/Simple-Encrypt-and-Decrypt-Technique-and-Computing](http://www.codeproject.com/Articles/38796/Simple-Encrypt-and-Decrypt-Technique-and-Computing)

# python - kernel32.dll 符号链接

> ID：11540108
> 
> 赞同：1
> 
> 时间：2012-07-18T11:19:06.530
> 
> 标签：python

ctypes.windll.LoadLibrary("kernel32.dll") 不在管理员模式下创建符号链接。是否可以将此 dll 复制到 D: 并从那里读取。如果有什么反作用。

```
import ctypes
inpt = "D:/mayaslate/symlink/ssh0155_plate.0003.jpg"
output = "D:/imagesequence/ssh0155_plate/ssh0155_plate.1003.jpg"
kdll = ctypes.windll.LoadLibrary("D:/mayaslate/kernel32.dll") <--- is this possible
kdll.CreateSymbolicLinkA(inpt , output, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:31:13.320

即使您`dll`从其他位置加载文件，您仍然没有任何管理员权限。

# javascript - div 关闭时停止播放 YouTube 视频

> ID：11540111
> 
> 赞同：1
> 
> 时间：2012-07-18T11:19:20.547
> 
> 标签：javascript, html, youtube, show-hide

如何在 div 关闭时停止播放 YouTube 视频？

演示：[http ://defroster.99k.org/layers.php](http://defroster.99k.org/layers.php)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:35:07.747

如果您不想使用 js_api_reference ...

您需要通过执行清除 div 对象

```
$('#slidingDiv').html('');  or rebuild the html 
```

滑动完成后，然后在激活它时再次重建 html 内容。

试试这个 [http://jsfiddle.net/fedmich/GTedm/](http://jsfiddle.net/fedmich/GTedm/)

```
$('#slidingDiv').slideToggle('', function (){
    var obj = $(this);
    if(obj.is(':hidden')){
        obj.html( obj.html() );
    }
}); 
```

# javascript - 哪些模式，大型原生构建应用程序中的最佳实践

> ID：11540112
> 
> 赞同：3
> 
> 时间：2012-07-18T11:19:22.960
> 
> 标签：javascript, jquery-mobile, cordova

我的意思是，我现在有*很多*$(document).on 和*很多*事件监听器。做不同的事情。对于每个 .jsp 页面，由于 phonegap、jquerymobile 和其他 ajax 内容。

自动取款机。我拆分了我的项目，就像每个 .jsp 都有自己的 .js 文件一样，其中包含大量的这些侦听器，这是标准模式，还是我忽略了一些黄金法则。

或者我应该将所有事件处理程序分组到我加载的 1 个 js 文件中，然后在我们浏览 .jsp 页面时加载附加到每个事件处理程序的方法。或者这个领域的标准是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:22:46.430

看看像[Backbone.js](http://backbonejs.org/)这样的 JavaScript 的 MVC 系统。

# c# - 圆边面板

> ID：11540117
> 
> 赞同：2
> 
> 时间：2012-07-18T11:19:28.170
> 
> 标签：c#, winforms

我正在使用 C# 和 winform 应用程序 .net 版本 3.5 和 Vs 2008

我将如何创建具有圆边的自定义面板？我们如何在不同的项目中使用该控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:25:25.307

您必须覆盖 OnPaint 事件并使用 GraphicPath 对象绘制角。

看看这篇文章： [http ://www.switchonthecode.com/tutorials/csharp-creating-rounded-rectangles-using-a-graphics-path](http://www.switchonthecode.com/tutorials/csharp-creating-rounded-rectangles-using-a-graphics-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-04T06:38:21.280

按照[MLablanc 的](https://stackoverflow.com/users/1012795/mleblanc) [链接](https://www.developer.com/net/vb/article.php/3790451/Creating-a-Rounded-Panel-Control.htm)，我将代码转换为 C#：

```
public class RoundedPanel : Panel {
    private float _thickness = 5;
    public float Thickness {
        get {
            return _thickness;
        }
        set {
            _thickness = value;
            _pen = new Pen(_borderColor,Thickness);
            Invalidate();
        }
    }

    private Color _borderColor = Color.White;
    public Color BorderColor {
        get {
            return _borderColor;
        }
        set {
            _borderColor = value;
            _pen = new Pen(_borderColor,Thickness);
            Invalidate();
        }
    }

    private int _radius = 20;
    public int Radius {
        get {
            return _radius;
        }
        set {
            _radius = value;
            Invalidate();
        }
    }

    private Pen _pen;

    public MpRoundedPanel() : base() {
        _pen = new Pen(BorderColor,Thickness);
        DoubleBuffered = true;            
    }
    private Rectangle GetLeftUpper(int e) {
        return new Rectangle(0,0,e,e);
    }
    private Rectangle GetRightUpper(int e) {
        return new Rectangle(Width - e,0,e,e);
    }
    private Rectangle GetRightLower(int e) {
        return new Rectangle(Width - e,Height - e,e,e);
    }
    private Rectangle GetLeftLower(int e) {
        return new Rectangle(0,Height - e,e,e);
    }

    private void ExtendedDraw(PaintEventArgs e) {
        e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;
        GraphicsPath path = new GraphicsPath();
        path.StartFigure();
        path.AddArc(GetLeftUpper(Radius),180,90);
        path.AddLine(Radius,0,Width - Radius,0);
        path.AddArc(GetRightUpper(Radius),270,90);
        path.AddLine(Width,Radius,Width,Height - Radius);
        path.AddArc(GetRightLower(Radius),0,90);
        path.AddLine(Width - Radius,Height,Radius,Height);
        path.AddArc(GetLeftLower(Radius),90,90);
        path.AddLine(0,Height - Radius,0,Radius);
        path.CloseFigure();
        Region = new Region(path);
    }
    private void DrawSingleBorder(Graphics graphics) {
        graphics.DrawArc(_pen,new Rectangle(0,0,Radius,Radius),180,90);
        graphics.DrawArc(_pen,new Rectangle(Width - Radius - 1,-1,Radius,Radius),270,90);
        graphics.DrawArc(_pen,new Rectangle(Width - Radius - 1,Height - Radius - 1,Radius,Radius),0,90);
        graphics.DrawArc(_pen,new Rectangle(0,Height - Radius - 1,Radius,Radius),90,90);
        graphics.DrawRectangle(_pen,0.0f,0.0f,(float)Width - 1.0f,(float)Height - 1.0f);
    }
    private void Draw3DBorder(Graphics graphics) {
        DrawSingleBorder(graphics);
    }
    private void DrawBorder(Graphics graphics) {
        DrawSingleBorder(graphics);
    }
    protected override void OnPaint(PaintEventArgs e) {
        base.OnPaint(e);
        ExtendedDraw(e);
        DrawBorder(e.Graphics);
    }
} 
```

要在您的项目或同一文件中使用包含此类，您将声明一个 Panel 并改用 RoundedPanel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:21:58.083

您可以使用 GDI+ 隐藏面板的边缘并绘制带有圆角的新边缘。

这是一个[例子](http://www.developer.com/net/vb/article.php/3790451/Creating-a-Rounded-Panel-Control.htm)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T11:21:14.003

一个快速的谷歌上

> winforms 创建一个带有圆边的自定义面板

返回以下作为第一个结果：

[具有自定义边框和圆角边缘的 C# 窗体](https://stackoverflow.com/questions/5092216/c-sharp-form-with-custom-border-and-rounded-edges)

要在其他项目中使用它，请将面板创建为 UserControl，而不是窗口。

# android - 如何动态更新特定的覆盖项

> ID：11540119
> 
> 赞同：6
> 
> 时间：2012-07-18T11:19:34.800
> 
> 标签：android, google-maps, location, overlay, itemizedoverlay

我正在开发一个基于位置的 android 应用程序，它处理大量的覆盖项目。

**背景：** 我想在地图上显示很多实体。实体的坐标随着它们的位置变化而实时变化。对应于更新的位置，实体应在地图上更新。实体可以增长到大量。

**实现** 我有两个覆盖。一个用于 MyLocationOverlay 以显示用户位置，另一个用于 ItemizedOverlay 子类，其中包含我需要在地图上显示的所有实体。

**问题** 每当实体的位置发生变化时，相应的覆盖项就需要更新。问题是我不确定哪种方法是实现这一目标的最佳方法。我有这些选择

1.  当我收到特定实体的位置时，我从地图中删除所有叠加层并重新添加叠加层。现在使用更新的位置创建了覆盖项之一。

    ```
    List<Overlay> overlays = map.getOverlays();
    overlays.removeAll(overlays);
    overlays.add(new MyOverlay(marker,this)); 
    ```

2.  我为每个实体创建一个叠加层。这意味着我将创建 500 个叠加层，每个叠加层仅包含一个叠加项。我创建了一个 Overlay 类的子类，并添加了我自己的属性以清楚地识别实体并为每个实体创建一个。当我到达特定实体的位置更新时，我会迭代并获取特定的覆盖项，将其删除并添加一个具有更新位置的新项。

我不知道哪个是最好的使用性能明智的。

当实体的数量超过 500 或 1000 个时，我觉得为每个实体的每个位置更新（可能很频繁）删除所有并重新添加所有覆盖会变得相当开销。

同时，遍历相同数量的实体也可以是相等的开销。

任何关于选择哪个或更好的实现方式的建议将不胜感激。

/安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:49:50.723

我相信最好的解决方案（关于性能）是创建一个从类继承的自定义 Overlay 类，`Overlay`以便您可以`onDraw`按照您想要的方式覆盖该方法。请参阅此[之前的 SO 帖子](https://stackoverflow.com/questions/4428730/creating-custom-overlay-on-the-map)以了解如何执行此操作。如果你想避免这种情况，你可以检查[ItemizedOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/ItemizedOverlay)，如果你还没有这样做的话。它比`Overlay`为每个实体创建一个更有效，但不如第一种方法建议的效率高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:16:51.620

我建议您将您的overlayItems 存储在一个HashSet 中，并将您的实体作为键。当实体更新时，您可以创建一个新的 OverlayItem 并将其存储在集合中。由于它是一个集合，旧的 OverlayItem 将被删除。

要显示 OverlayItems，请使用 ItemizedOverlay。在`ItemizedOverlay.createItem(int position)`方法中可以得到集合的OverlayItem。不要忘记用 覆盖该`ItemizedOverlay.getSize()`方法`return set.size()`。

`populate()`每次更新集合时都会调用ItemizedOverlay。

查看本[教程](https://developers.google.com/maps/documentation/android/hello-mapview)以获取更多信息，或者如果您有任何问题，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T11:54:16.197

我有同样的问题，我所做的是你的第一选择。

无论如何，在将它们添加到地图之前，将它们加载到不同的线程上，并且在加载完所有图像和数据之后，将它们添加到主线程的地图上。

# android - 无法在 Android 上使用 asmack 登录 Facebook

> ID：11540122
> 
> 赞同：1
> 
> 时间：2012-07-18T11:19:44.520
> 
> 标签：android, facebook, nullpointerexception, xmpp, asmack

我正在尝试使用 asmack 和 android 连接到 facebook。我可以连接但无法登录。当我尝试这样做时，我得到了关于`super.authenticate();`如何解决此问题的 nullpointerexception，请提供一些示例

日志：

```
 D/tag: connection succeeded
    W/System.err: java.lang.NullPointerException
    W/System.err:   at org.jivesoftware.smack.sasl.SASLMechanism.authenticate(SASLMechanism.java:116)
    W/System.err:   at CustomSASLDigestMD5Mechanism.authenticate(CustomSASLDigestMD5Mechanism.java:36)
    W/System.err:   at org.jivesoftware.smack.SASLAuthentication.authenticate(SASLAuthentication.java:319)
    W/System.err:   at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:204)
    W/System.err:   at org.jivesoftware.smack.Connection.login(Connection.java:357)
    W/System.err:   at se.hig.MainActivity.login(MainActivity.java:69)
    W/System.err:   at se.hig.MainActivity.onCreate(MainActivity.java:24)
    W/System.err:   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    W/System.err:   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
    W/System.err:   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
    W/System.err:   at android.app.ActivityThread.access$2200(ActivityThread.java:119)
    W/System.err:   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
    W/System.err:   at android.os.Handler.dispatchMessage(Handler.java:99)
    07-18 10:55:33.384: W/System.err(255):  at android.os.Looper.loop(Looper.java:123)
    07-18 10:55:33.384: W/System.err(255):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    07-18 10:55:33.393: W/System.err(255):  at java.lang.reflect.Method.invokeNative(Native Method)
    W/System.err:   at java.lang.reflect.Method.invoke(Method.java:521)
    W/System.err:   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    07-18 10:55:33.393: W/System.err(255):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    W/System.err:   at dalvik.system.NativeStart.main(Native Method)
    D/tag: login fails exeption : 
    D/tag:  service-unavailable(503) 
```

自定义SASLDigestMD5机制：

```
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.apache.harmony.javax.security.auth.callback.CallbackHandler;
import org.apache.harmony.javax.security.sasl.Sasl;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.sasl.SASLMechanism;

public class CustomSASLDigestMD5Mechanism extends SASLMechanism
{

    public CustomSASLDigestMD5Mechanism(SASLAuthentication saslAuthentication)
    {
        super(saslAuthentication);
    }

    @Override
    public void authenticate(String username, String host, String password)

    throws IOException, XMPPException
    {
        this.authenticationId = username;

        this.password = password;
        this.hostname = host;

        String[] mechanisms = { getName() };
        Map<String, String> props = new HashMap<String, String>();
        sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, this);    

        super.authenticate();

    }

    @Override
    public void authenticate(String username, String host, CallbackHandler cbh)

    throws IOException, XMPPException
    {
        String[] mechanisms = { getName() };

        Map<String, String> props = new HashMap<String, String>();

        sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, cbh);

        super.authenticate();

    }

    protected String getName()
    {

        return "DIGEST-MD5";

    }

} 
```

主要活动：

```
import org.jivesoftware.smack.ConnectionConfiguration;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPConnection;
import org.jivesoftware.smack.XMPPException;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;

public class MainActivity extends Activity
{
    private XMPPConnection connection;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        connect();

        login("username", "password");
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public String connect()
    {

        ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);

        SASLAuthentication.registerSASLMechanism("DIGEST-MD5", CustomSASLDigestMD5Mechanism.class);

        config.setSASLAuthenticationEnabled(true);
        config.setTruststorePath("/system/etc/security/cacerts.bks");
        config.setTruststoreType("bks");
        config.setDebuggerEnabled(false);

        connection = new XMPPConnection(config);
        try
        {
            connection.connect();
            Log.d("tag", "connection succeeded");
        } catch (XMPPException e)
        {
            Log.d("tag", "connection fails exeption : \n " + e);
        }

        // fbml = new FBMessageListener(connection);

        return connection.getConnectionID();

    }

    public boolean login(String userName, String password)
    {

        if ((connection != null) && (connection.isConnected()))
        {
            try
            {
                connection.login(userName, password);
            } catch (XMPPException e)
            {
                Log.d("tag", "login fails exeption : \n " + e);
            }

            return true;

        }

        return false;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:47:34.240

首先编辑您的 SASLXFacebookPlatformMechanism 类。复制并粘贴此代码。

```
package com.facebook.android;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.GregorianCalendar;
import java.util.HashMap;
import java.util.Map;

import org.apache.harmony.javax.security.auth.callback.CallbackHandler;
import org.apache.harmony.javax.security.sasl.Sasl;
import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.sasl.SASLMechanism;
import org.jivesoftware.smack.util.Base64;

import android.util.Log;

public class SASLXFacebookPlatformMechanism extends SASLMechanism {

    private static final String NAME              = "X-FACEBOOK-PLATFORM";

    private String              apiKey            = "";
    private String              accessToken        = "";

    /**
     * Constructor.
     */
    public SASLXFacebookPlatformMechanism(SASLAuthentication saslAuthentication) {
        super(saslAuthentication);
    }

    @Override
    protected void authenticate() throws IOException, XMPPException {
        getSASLAuthentication().send(new AuthMechanism(NAME, ""));
    }

    @Override
    public void authenticate(String apiKey, String host, String accessToken) throws IOException, XMPPException {
        if (apiKey == null || accessToken == null) {
            throw new IllegalArgumentException("Invalid parameters");
        }

        this.apiKey = apiKey;
        this.accessToken = accessToken;
        this.hostname = host;

        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, this);
        authenticate();
    }

    @Override
    public void authenticate(String username, String host, CallbackHandler cbh) throws IOException, XMPPException {
        String[] mechanisms = { "DIGEST-MD5" };
        Map<String, String> props = new HashMap<String, String>();
        this.sc = Sasl.createSaslClient(mechanisms, null, "xmpp", host, props, cbh);
        authenticate();
    }

    @Override
    protected String getName() {
        return NAME;
    }

    @Override
    public void challengeReceived(String challenge) throws IOException {
        byte[] response = null;

        if (challenge != null) {
            String decodedChallenge = new String(Base64.decode(challenge));
            Map<String, String> parameters = getQueryMap(decodedChallenge);

            String version = "1.0";
            String nonce = parameters.get("nonce");
            String method = parameters.get("method");

            String composedResponse =
                "method=" + URLEncoder.encode(method, "utf-8") +
                        "&nonce=" + URLEncoder.encode(nonce, "utf-8") +
                        "&access_token=" + URLEncoder.encode(accessToken, "utf-8") +
                        "&api_key=" + URLEncoder.encode(apiKey, "utf-8") +
                        "&call_id=0" +
                        "&v=" + URLEncoder.encode(version, "utf-8");
            response = composedResponse.getBytes();
        }

        String authenticationText = "";

        if (response != null) {
            authenticationText = Base64.encodeBytes(response);
        }

        // Send the authentication to the server
        getSASLAuthentication().send(new Response(authenticationText));
    }

    private Map<String, String> getQueryMap(String query) {
        Map<String, String> map = new HashMap<String, String>();
        String[] params = query.split("\\&");

        for (String param : params) {
            String[] fields = param.split("=", 2);
            map.put(fields[0], (fields.length > 1 ? fields[1] : null));
        }

        return map;
    }
} 
```

然后用这个方法登录脸书聊天

```
private void testLogin(){
        ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
        config.setSASLAuthenticationEnabled(true);
        config.setSecurityMode(ConnectionConfiguration.SecurityMode.enabled);
        xmpp = new XMPPConnection(config);
        SASLAuthentication.registerSASLMechanism("X-FACEBOOK-PLATFORM",SASLXFacebookPlatformMechanism.class);
        SASLAuthentication.supportSASLMechanism("X-FACEBOOK-PLATFORM", 0);
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAppId());
        Log.i("XMPPClient",
                "Access token to " + mFacebook.getAccessToken());
        try {
            xmpp.connect();
            Log.i("XMPPClient",
                    "Connected to " + xmpp.getHost());

        } catch (XMPPException e1) {
            Log.i("XMPPClient",
                    "Unable to " + xmpp.getHost());

            e1.printStackTrace();
        }
        try {
            xmpp.login(PreferenceConnector.APP_ID, mFacebook.getAccessToken());

        } catch (XMPPException e) {
            e.printStackTrace();
        }  
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:53:57.757

它不使用标准的身份验证方法。

请参阅[http://developers.facebook.com/docs/chat/](http://developers.facebook.com/docs/chat/)

# ajax - django ajax 请求响应

> ID：11540123
> 
> 赞同：2
> 
> 时间：2012-07-18T11:19:47.313
> 
> 标签：ajax, django, django-templates, django-views, ajax-upload

> **可能重复：**
> [从 json 上传的 django 文件](https://stackoverflow.com/questions/11542739/django-file-upload-from-json)

嗨，我正在使用模板中的以下 ajax 上传，但我没有得到 django 视图的响应。这里有什么问题..我没有看到任何警报

```
function ajax_upload(formid)
{
var form = $(formid);
form.ajaxSubmit({
  dataType:  'json',
  success:   function (data) {
  alert("Hereeeeeeee");
  if(data.status == '1')  
  {
     alert("Uploaded Successfull");
  }
  else 
  {
     alert("Uploaded UnSuccessfull :(");
  }
  }
} )   ; 
} 
```

`EDIT` 姜戈：

```
 def someview(request):
      response_dict={'status':1}
      logging.debug("seen") //This is seen in the logs
      return HttpResponse(simplejson.dumps(response_dict), mimetype='application/javascript') 
```

`EDIT1`

另请查看完整的源代码，查看[从 json 上传的 django 文件](https://stackoverflow.com/questions/11542739/django-file-upload-from-json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:32:48.030

检查`someview`添加到 urls.py。
检查`{% csrf_token %}`添加到表单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:43:21.347

您几乎不可能看到该日志，因此这是一个 python 语法错误：

```
response_dict{'status':1} 
```

应该是：

```
response_dict = dict(status=1) 
```

或者：

```
response_dict = {'status':1} 
```

或者：

```
response_dict = dict()
response_dict['status'] = 1 
```

或者：

```
response_dict = dict()
response_dict.update({'status':1}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:24:52.153

从您的代码：

```
form.ajaxSubmit({
  dataType:  'json',
  success:   function (data) {
    alert("Hereeeeeeee"); 
```

您的回调在“成功”时执行，因此我们可以将失败范围缩小到 django 视图方面。假设一切在语法上都是正确的，我最好的猜测是，由于您正在返回 json 数据，您的响应 mimetype 应该是：

```
mimetype='application/json'. 
```

如果这不起作用，我建议在 Firefox 上使用 Firebug 或在 Chrome 上使用开发者工具来查看服务器响应。您应该能够在那里看到 django 堆栈跟踪。

# primefaces - 在 primefaces 中将 inputtext 限制为 Y 或 N

> ID：11540125
> 
> 赞同：0
> 
> 时间：2012-07-18T11:19:58.223
> 
> 标签：primefaces

我想将 inputText 中的输入限制为 Y 或 N。以下是我的想法。这是正确的方法还是可能有更好的方法？

```
<p:inputText value="#{myBean.field}" id="myID" title="Enter Y or N"
  onkeypress ="if(!(event.keyCode == 89 || event.keyCode == 78)) event.keyCode=null;" />  

<p:tooltip for="myID" showEvent="focus" hideEvent="blur" /> 
```

可以使用 validateRegex 但我想在用户输入值而不是提交时限制输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:38:46.753

您也可以使用验证器作为用户输入，这样：

```
<p:inputText id="idfield" value="#{myBean.field}"
                validatorMessage="Only Y or N">
                <f:validateRegex pattern="[Y N]*" />
                <p:ajax update="msg" event="keyup" />
            </p:inputText>
            <p:message for="idfield" id="msg" display="icon" /> 
```

我想你会这样解决你的问题。（您可能必须将 [YN]* 更改为 [YN]，因为我不确定 *）

尽管如此，在我的应用程序中，对于 Y 或 N，我使用的是：

```
 <p:selectOneRadio id="sor"
 value="#{myBean.value}">
 <f:selectItem itemLabel="Y" itemValue="Y" />
<f:selectItem itemLabel="N" itemValue="N" />
</p:selectOneRadio> 
```

在数据库上也使用 char(1)。效果很好。

# iphone - 从 appDelegate 重新加载数组

> ID：11540132
> 
> 赞同：0
> 
> 时间：2012-07-18T11:20:18.707
> 
> 标签：iphone, ios, xcode

在我的应用委托中：

我存储了我的数组，然后我`viewController`将它们加载到`viewDidLoad`我的`carousel`：

```
 [carousel reloadData];

    self.images = ((RootViewAppDelegate *)[[UIApplication sharedApplication] delegate]).images; 
```

我使用这个过程，这样当我删除项目时，它仍然会被保留，但我需要的是当它退出然后返回到视图时，它不应该被保留了。在我的情况下它仍然被保留，如何重新加载我的数组？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:28:33.220

在 your `dealloc`of your`viewcontroller`中，释放项目并将其设置为 nil。

另一方面，为什么不将它与视图关联，而不是在应用程序委托中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:30:19.937

```
- (void)dealloc{
   self.images = nil;
} 
```

# ruby-on-rails - 如何使用 Rspec 测试洗出控制器

> ID：11540135
> 
> 赞同：5
> 
> 时间：2012-07-18T11:20:32.930
> 
> 标签：ruby-on-rails, soap, rspec

我已经用[wash_out](https://github.com/roundlake/wash_out) gem 实现了一个Rails 控制器。

我的控制器如下所示：

```
class TestController < ApplicationController
  include WashOut::SOAP

  soap_action "int_to_string",
              :args   => :integer,
              :return => :string
  def int_to_string
    render :soap => params[:value].to_s
  end
end 
```

路线.rb：

```
MyApp::Application.routes.draw do
  wash_out :test
end 
```

我不确定如何使用 Rspec 测试这个控制器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-04T22:10:53.857

在此链接中，您可以找到一个很好的方法

[http://blog.johnsonch.com/2013/04/18/rails-3-soap-and-testing-oh-my/](http://blog.johnsonch.com/2013/04/18/rails-3-soap-and-testing-oh-my/)

方法是：

*   使用 savonrb gem 创建客户端
*   比较测试中的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T17:17:52.633

您可以使用以下内容指定默认 wsdl 路由：

```
 require "spec_helper"

describe MywsdlController do
  describe "routing" do

    it "mywsdl/wsdl route to mywsdl#_generate_wsdl" do 
      get("/mywsdl/wsdl").should route_to("mywsdl#_generate_wsdl")
    end

  end
end 
```

然后我建议在规范一中拥有一个soap 目录，并为每个可用服务提供一个规范文件，这样您就可以在之前初始化soap 客户端：每个都带有测试参数，这可能会给您一个规范场景。

# apache - htaccess 重写规则将特定域上的特定页面重定向到另一个 url

> ID：11540138
> 
> 赞同：1
> 
> 时间：2012-07-18T11:20:55.650
> 
> 标签：apache, .htaccess

我在具有不同域的同一台服务器上托管 2 个站点。我想为域 1 上的特定页面设置重定向并将其转到另一个外部 url。已经搜索和搜索和实验，但无法让它工作。

我得到的最近的是

```
RewriteRule ^oldpagename$ http://externalsite/page [R=301,L] 
```

但这样做的问题是它也会在另一个域上捕获该 url。如何将其限制为特定域？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:56:51.817

您需要添加一个条件来匹配变量 `%{HTTP_HOST}：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1.com$ [NC]
RewriteRule ^oldpagename$ http://externalsite/page [R=301,L] 
```

# php - 像facebook消息系统一样计算时差

> ID：11540139
> 
> 赞同：2
> 
> 时间：2012-07-18T11:21:00.110
> 
> 标签：php, facebook-like

`like`我需要使用 php 在 facebook 消息中查找时差。

```
like: 2 weeks ago, 2 hr 30 mins ago, one second ago 
```

我的时间格式是“Ymd H:i:s”

任何人都可以帮我吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T11:38:23.797

将消息创建时间存储在数据库中，然后使用以下函数：

```
function get_time_difference_php($created_time)
 {
        date_default_timezone_set('Asia/Calcutta'); //Change as per your default time
        $str = strtotime($created_time);
        $today = strtotime(date('Y-m-d H:i:s'));

        // It returns the time difference in Seconds...
        $time_differnce = $today-$str;

        // To Calculate the time difference in Years...
        $years = 60*60*24*365;

        // To Calculate the time difference in Months...
        $months = 60*60*24*30;

        // To Calculate the time difference in Days...
        $days = 60*60*24;

        // To Calculate the time difference in Hours...
        $hours = 60*60;

        // To Calculate the time difference in Minutes...
        $minutes = 60;

        if(intval($time_differnce/$years) > 1)
        {
            return intval($time_differnce/$years)." years ago";
        }else if(intval($time_differnce/$years) > 0)
        {
            return intval($time_differnce/$years)." year ago";
        }else if(intval($time_differnce/$months) > 1)
        {
            return intval($time_differnce/$months)." months ago";
        }else if(intval(($time_differnce/$months)) > 0)
        {
            return intval(($time_differnce/$months))." month ago";
        }else if(intval(($time_differnce/$days)) > 1)
        {
            return intval(($time_differnce/$days))." days ago";
        }else if (intval(($time_differnce/$days)) > 0) 
        {
            return intval(($time_differnce/$days))." day ago";
        }else if (intval(($time_differnce/$hours)) > 1) 
        {
            return intval(($time_differnce/$hours))." hours ago";
        }else if (intval(($time_differnce/$hours)) > 0) 
        {
            return intval(($time_differnce/$hours))." hour ago";
        }else if (intval(($time_differnce/$minutes)) > 1) 
        {
            return intval(($time_differnce/$minutes))." minutes ago";
        }else if (intval(($time_differnce/$minutes)) > 0) 
        {
            return intval(($time_differnce/$minutes))." minute ago";
        }else if (intval(($time_differnce)) > 1) 
        {
            return intval(($time_differnce))." seconds ago";
        }else
        {
            return "few seconds ago";
        }
  } 
```

# .net - vb.net 中的会话管理

> ID：11540141
> 
> 赞同：1
> 
> 时间：2012-07-18T11:21:05.180
> 
> 标签：.net, vb.net, session, windows-applications

我正在使用 vb.net 在基于 Windows 的应用程序上寻找会话管理。我用谷歌搜索，到处都发现了类似的结果，我得到了同样的错误。

[VB.NET](http://www.codeproject.com/Questions/343007/session-in-windows-applcation-using-vb-net) [会话管理中的会话管理](http://www.velocityreviews.com/forums/t61549-session-variables.html)

这就是我想要做的

```
Session("UserId") = admin 
```

这`admin`是变量，但是，我在上面的行中遇到了错误，说 Session 没有声明。需要帮忙

提前致谢 ！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:58:59.467

**Session 是一种机制，仅当您在 asp.net 中时才**存储有关用户的信息。通常用于存储您需要的关于用户正在浏览的一些全局信息/首选项，例如，网页应该呈现给用户的语言。

每个用户都有自己的会话值。

还有其他机制可以实现这一点，例如视图状态或 cookie。

从您问题中的标签看来，您有一个 winform 应用程序。**您不能在 Windows 窗体上使用会话**。通常 Windows 窗体应用程序是为特定用户设计的。如果您想在 winforms 中存储全局信息/首选项，您可以使用静态首选项类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:26:53.233

Session 是 HTTPContext 的一部分，是从 System.Web 派生的。

你有对 System.Web 的引用吗？

请参阅以下链接以添加对您的应用程序的引用。

[如何添加对 WinForm 项目的引用？](https://stackoverflow.com/questions/6082167/how-to-add-a-reference-to-a-winform-project)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:33:53.743

会话在无状态的 Web 应用程序中可用。但是在窗口应用程序中不需要使用会话（在窗口应用程序中不可用），因为它不是无状态的。如果您想在应用程序级别使用维护，您可以使用静态类。

# android - Runnable 跳过了 Android AndEngine

> ID：11540143
> 
> 赞同：0
> 
> 时间：2012-07-18T11:21:11.213
> 
> 标签：android, andengine

我想先对大家说声谢谢。。

我已经编写了一个代码来使用 Runnable 生成精灵。但它只执行我写的最后一个可运行文件。

这是代码：

```
public class LevellingManager {

// ======================== //
// ======================== //
// THE PATH METHOD              //
// ======================== //
// ======================== //  
public static void path() {
    currType = Leveling2.TYPE_DIGGER;
    mHandler.post(mStartDigger);
    // === NOT EXECUTED === //
    generateSprite(Leveling2.TYPE_ROCK, 10, 2000, 2000, LevellingManager.EASY);
    // === EXECUTED === //
    generateSprite(Leveling2.TYPE_WORM, 8, 3000, 1000, LevellingManager.HARD);
} 
```

**generateSprite(** )方法

```
 public static void generateSprite(int type, int nSprts, int delayPerSprt,
        int delayPerBtch, int[] difficulty) {
    currType = type;

    switch (type) {
    case Leveling2.TYPE_ROCK:
        System.out.println("Awalnya : " + GameResources2.lastIndexRock);

        // ---- Set Generate Data ---- //
        currIndex = 1 + GameResources2.lastIndexRock;
        currList= GameResources2.listRockToBeAdded;
        currLastIndex = GameResources2.lastIndexRock;
        currMaxCpcty= GameResources2.MAX_ROCK;

        // --- Method to Set the position, speed & delay per sprite ---- //
        set(nSprts, delayPerBtch, delayPerSprt, difficulty);

        mHandler.postDelayed(mStartRock, currDelay);

        GameResources2.lastIndexRock = currLastIndex;

        break;

    case Leveling2.TYPE_WORM:
        // ---- Set Generate Data ---- //
        currIndex = 1 + GameResources2.lastIndexWorm;
        currList=GameResources2.listWormToBeAdded;
        currLastIndex = GameResources2.lastIndexWorm;
        currMaxCpcty = GameResources2.MAX_WORM;

        // --- Method to Set the position, speed & delay per sprite ---- //
        set(nSprts, delayPerBtch, delayPerSprite, difficulty);

        mHandler.postDelayed(mStartWorm, currDelay);

        GameResources2.lastIndexWorm = currLastIndex;
        break;      
    }
} 
```

这是可**运行**代码：

```
 public static Runnable mStartRock = new Runnable() {
    public void run() {
        installAttach(this);
    }
};
public  static Runnable mStartWorm = new Runnable() {
    public void run() {
        installAttach(this);
    }
}; 
```

这是一个将在 Runnable 中执行的方法。 **installAttach()**方法：

```
 private static void installAttach(Runnable r) {

    System.out.println("Lewat sini, type : " + currType);

    currSpriteGen = currList.get(currIndex);

    currSpriteGen
            .registerEntityModifier(new SequenceEntityModifier(
                    new MoveModifier(currSpeed,
                            currSpriteGen.getX(),
                            currSpriteGen.getX(),
                            GameResources2.CAMERA_HEIGHT,
                            GameResources2.POSITION_DIGGER_HEIGHT)));

    currSpriteGen.setVisible(true);

    if (currSpriteGen.getParent() == null)
        GameResources2.scene.attachChild(currSpriteGen);
    else
        currLastIndex = currIndex;

    switchLastIndex();

    if (currIndex == currMaxCpcty - 1) {
        currNSprts = currNSprts - currIndex;
        currIndex = -1;
    }

    System.out.println("Index : " + currIndex);
    System.out.println("Max index : " + currMaxCpcty);

    ++currIndex;

    // --- For looping ---//
    if (currIndex < currNSprts) {
        mHandler.postDelayed(r, currDelay);
    }
} 
```

所以当我在**onLoadScene() 调用 LevellingManager.path()**方法时，只有最后一个执行的 generate 方法。

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:51:27.837

显然只有一个 Runnable 有一个地方。我相信我有一个解决方法。创建一个类 RunnableBatch，其实例将包含一个 Runnables 数组。它将有一个`add(Runnable r)`方法

1) 将 Runnable 添加到数组中并

2）创建一个新的 Runnable 将包含类似`for (Runnable r : runnableArray) {r.run();}`

# html - :hover 无法在 IE6 中显示第三级菜单

> ID：11540147
> 
> 赞同：3
> 
> 时间：2012-07-18T11:21:25.387
> 
> 标签：html, css, internet-explorer-6

我正在尝试使用任何东西在 IE6 中使用 Suckerfish 样式的下拉菜单：悬停但我一生都无法显示第 3 级！非常感谢它让我发疯任何帮助。

[我的小提琴](http://jsfiddle.net/hQuYp/1/)

继承人代码HTML：

```
<!DOCTYPE html>
<html>
   <body>
        <header>
            <link rel="stylesheet" type="text/css" href="styleIE.css" />
        </header>
        <form>
            <div id="container">
               <div id = "menu">
                    <ul id="nav">
                        <li><a class="rhlinkstart" href="#"><span>Home</span></a></li>
                        <li><a class="rhlink" href="#"><span>Blad<br> Securities</span></a></li>
                        <li><a class="rhlink" href="#"><span>Market<br> Update</span></a></li>
                        <li><a class="rhlink" href="#"><span>Membership</span></a></li>
                        <li><a class="rhlink" href="#"><span>asdasd Info</span></a>
                            <ul>
                                <li><a class="linkchild" href="#"><img class = "arrow" src="Images/arrow.gif" alt="&#9658;">About the DOOB</a>
                                    <ul>
                                        <li><a class="linkchild" href="#">DOOB Explained</a></li>
                                        <li><a class="linkchild" href="#">DOOB Jurisdications</a></li>
                                    </ul>
                                </li>
                                <li><a class="linkchild" href="#">International Recogintion</a></li>
                                <li><a class="linkchild" href="#"><img class = "arrow" src="Images/arrow.gif" alt="&#9658;">Advantages of listing</a> 
                                     <ul>
                                        <li><a class="linkchild" href="#">Advantages of Listing</a></li>
                                        <li><a class="linkchild" href="#">Offers</a></li>
                                    </ul>
                                </li>
                                <li><a class="linkchild" href="#">Advantages Of Membership</a></li>
                                <li><a class="linkchild" href="#">Publications</a></li>
                                <li><a class="linkchild" href ="#">Links</a></li>
                            </ul>
                        </li>
                        <li><a class="rhlinkend" href="#"><span>Contact Us</span></a></li>
                       <li>&nbsp;</li>
                    </ul>
               </div>
            </div>
        </form>
     </body>
</html> 
```

CSS：

```
body{
  line-height:1;
  background: #e3e3e3; 
  behavior: url("csshover3.htc");
}

/*------------------------------------*\
 Main
\*------------------------------------*/
div#container
{
    width:1024px; 
    margin:0 auto;
    position: relative;
    text-align: center;
    background-color: white;
    border: 1px solid #8b8b8b;
 }

.contentwrapper {
    width: 964px;
    margin: 0px auto;
    text-align: left;
    height: 100%;
}

.clearall {
 clear: both;
}

/*------------------------------------*\
   Home Page - Menu Styling
\*------------------------------------*/

#menu {
    margin: 0 auto;
    padding-left: 2%;
    height: 47px;
    position: relative;
    top: 0;
    border: 1px solid rgb(140,51,61);
    font-size: 75%;
    display: block;
}
#nav {
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
     height:47px;
     background: none;
     background-color: transparent;
     width: 100%;
}

#nav ul {
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
}

#nav a.rhlinkstart:link, #nav a.rhlinkstart:active, #nav a.rhlinkstart:visited {
    position: relative;
    float:left;
    font-family: Georgia;
    color: rgb(131,0,26);
    width: 148px;
    text-align: center;
    height: 47px;
    margin-right: -.07em;
    margin-left: 0.5em;
    line-height: 47px;
    text-decoration: none;
}

#nav a.rhlink:link, #nav a.rhlink:active, #nav a.rhlink:visited {
    position: relative;
    float:left;
    font-family: Georgia;
    color: rgb(131,0,26);
    width: 148px;
    text-align: center;
    height: 47px;
    margin-left: -47px;
    line-height: 47px;
    text-decoration: none;
    display: block;
}

#nav a.rhlinkend:link, #nav a.rhlinkend:active, #nav a.rhlinkend:visited {
    float:left;
    position: relative;
    color: rgb(131,0,26);
    width: 148px;
    height: 47px;
    line-height: 47px;
    margin-left: -3.780em;
    font-family: Georgia;
    text-decoration: none;
}

#nav li {
    float:left;
    position:relative;
    display: block;
}

li a.rhlink span {
    line-height: 1em;
    text-decoration: none;
    text-align: center;
    display: inline-block;
    vertical-align: middle;
}

#nav li a.rhlink:hover, 
#nav li a.rhlinkstart:hover,
#nav li a.rhlinkend:hover
{
    background: red;
    color: white;
    text-decoration: none;
}

#nav a.linkchild:link,
#nav a.linkchild:active,
#nav a.linkchild:visited 
{
    display:block;
    padding:0px 10px;
    text-decoration:none;
    color: white;
    background: pink ;
}

#nav a.linkchild:hover {
   background: rgb(118,0,18);
   color: white;
}

#nav ul {
    position:absolute;
    top:47px;
    left:0;
    margin: 0;
    width:200px;
    display:none;
}

#nav li ul a {
    width:15em;
    float:left;
    display: inline-block;
    line-height: 2.5em;
    text-align: left;
    vertical-align: middle;
}

#nav li {
     display: inline-block !important;
     float: left;   
}

#nav li a {
    display: inline-block !important;   
    vertical-align: middle;
}

#nav ul ul {
    top:auto;
}

#nav li ul ul {
    left:200px;
    margin:0;
}

#nav ul ul li ul {
    left:200px;
    margin:0;
}

#nav ul ul {
   display:none;
}

#nav li:hover ul {
   display:block;
}

/* 2 and 13 */
#nav ul ul, 
#nav li:hover ul ul { 
   display:none;
}

/* 12 and 23*/
#nav li:hover ul, #nav li:hover li:hover ul { 
   display:block;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:27:17.243

您似乎正在使用 HTML5，但没有使用 HTML5 shiv，这将允许旧浏览器识别 HTML5 标签。

[http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

您还将样式表加载到 HTML5 的“header”标签中，而不是在您似乎没有的文档的常规“head”标签中。

解决这些问题可能有助于解决您的问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T06:54:37.853

一种可能的解决方案：

`display:inline-block`在 IE6 中有一些严重的错误；我建议尝试一下`display:inline`。

除此之外，您还需要做一些事情来触发 IE 将元素置于“hasLayout”模式。您不能直接执行此操作，因为它是一个内部 IE 标志，但设置多个 CSS 属性中的任何一个都会触发它。最常用的是`zoom:1`因为它没有太多其他效果，并且被其他浏览器忽略。

如果可行，请使用 IE6 CSS hack 进行制作，以便其他浏览器可以继续使用`inline-block`. 我建议要么使用下划线技巧，要么使用条件注释。

这是使用下划线hack的代码：

```
display:inline-block;
_display:inline;
zoom:1; 
```

希望有帮助。

[注意：答案编辑为包含 hasLayout，扩展 IE6 css hack 选项，并提供一段代码]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T15:49:16.210

在这一点上，Internet Explorer 6 已经死了，实际上它已经死了。99.9% 的 IE6 用户代理是机器人，我有*3*名访问者没有出现。我的浏览器市场份额基于 DOM 对象检测，因此与基于用户代理的统计数据不同，它实际上是可靠的。即使您可能被欺骗认为 IE6 实际上拥有 10% 的市场份额，您仍然必须处理它已经并将继续缩小的事实。我什至懒得真正测试 IE7，因为我只有一位数的访问者使用它。在这一点上，投入到 IE6/7 上的时间和金钱是没有任何理由的，除非客户已经死心塌地并且心不在焉，以至于他们会支付您每小时 50 美元来修复 IE6/7 特定的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T08:13:29.543

感谢大家的评论，最后我从头开始重写了菜单并让它在 IE6 中工作。我知道 IE6 已经死了，但我的客户最大的客户使用这个浏览器:(所以它必须完成。

# android - 运行硒脚本时android模拟器挂起

> ID：11540155
> 
> 赞同：0
> 
> 时间：2012-07-18T11:21:59.443
> 
> 标签：android, selenium-webdriver

我正在使用 selenium 来测试一个 android web 应用程序。我的测试最初运行良好，但在特定点挂起。它选择网页上的第一个文本字段并在放大模式下写入值，但此时它挂起并且不选择第二个文本字段。我哪里错了？

我的代码如下：

公共无效 testRegister() 抛出异常 {

```
 driver.get("file:///android_asset/www/aboutus.html");
    driver.findElement(By.xpath("html/body/div/div/ul/li[2]")).click();
    List<WebElement> w1=driver.findElements(By.tagName("input"));
    System.out.println(w1.size());
    for(int i=0;i<w1.size();i++)
    {
    System.out.println("************");
          System.out.println(i + w1.get(i).getAttribute("id") +"*****" + w1.get(i).getAttribute("name"));

    }

    for(WebElement option:w1)
    {
          String str=option.getAttribute("id");

          if(str.equals("name"))
          {
                 option.click();
                 option.sendKeys("Vaishali");
          }

          else if(str.equals("dateofbirth"))
          {
                 option.click();
                 option.sendKeys("28-09-1991");
          }

          else if(str.equals("club"))
          {
                 option.click();
                 option.sendKeys("Manchester United");
          }

          else if(str.equals("username"))
          {
                 option.click();
                 option.sendKeys("vishchan");
          }
          else if(str.equals("password"))
          {
                 option.click();
                 option.sendKeys("vishchan");
          }
          else if(str.equals("sendbutton"))
          {
                 option.click();

          }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T10:25:39.580

1.  id 可以是 '' 并且它会返回空值
2.  在元素列表中可以隐藏具有相同 ID 的元素，更多原因请发布堆栈跟踪。最好的问候塔拉斯

# angularjs - 在 AngularJS 中使用逗号作为列表分隔符

> ID：11540157
> 
> 赞同：181
> 
> 时间：2012-07-18T11:22:04.893
> 
> 标签：angularjs, angularjs-ng-repeat

我需要创建一个以逗号分隔的项目列表：

```
 <li ng-repeat="friend in friends">
      <b ng-repeat="email in friend.email">{{email}}{{$last ? '' : ', '}}</b>...
  </li> 
```

根据 AngularJS 文档，表达式中不允许使用控制流语句。这就是为什么我的`{{$last ? '' : ', '}}`不起作用。

有没有另一种方法来创建逗号分隔的列表？

**编辑 1**
有比以下更简单的东西：

```
<span ng-show="!$last">, </span> 
```

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2012-07-18T12:16:21.670

你可以这样做：

`<b ng-repeat="email in friend.email">{{email}}{{$last ? '' : ', '}}</b>`

..但我喜欢菲利普的回答:-)

* * *

## 回答 #2

> 赞同：231
> 
> 时间：2012-07-18T11:49:04.337

[`join(separator)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)只需对数组使用 Javascript 的内置函数：

```
<li ng-repeat="friend in friends">
  <b>{{friend.email.join(', ')}}</b>...
</li> 
```

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2013-09-12T20:41:34.740

还：

```
angular.module('App.filters', [])
    .filter('joinBy', function () {
        return function (input,delimiter) {
            return (input || []).join(delimiter || ',');
        };
    }); 
```

在模板中：

```
{{ itemsArray | joinBy:',' }} 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2015-08-04T09:35:34.417

```
.list-comma::before {
  content: ',';
}
.list-comma:first-child::before {
  content: '';
}
```

```
<span class="list-comma" ng-repeat="destination in destinations">
                            {{destination.name}}
                        </span>
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-02-26T16:24:42.603

你也可以使用 CSS 来修复它

```
<div class="some-container">
[ <span ng-repeat="something in somethings">{{something}}<span class="list-comma">, </span></span> ]
</div>

.some-container span:last-child .list-comma{
    display: none;
} 
```

但安迪乔斯林的答案是最好的

编辑：我改变了主意，我最近必须这样做，最后我使用了一个连接过滤器。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-10-29T06:58:06.000

我认为最好使用`ng-if`. `ng-show`在 中创建一个元素`dom`并将其设置为`display:none`. 您拥有的元素越`dom`多，您的应用程序就越需要资源，并且在资源较少`dom`的设备上，元素越少越好。

TBH`<span ng-if="!$last">, </span>`似乎是一个很好的方法。这很简单。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-23T14:18:51.923

由于这个问题已经很老了，并且 AngularJS 从那时起有时间发展，现在可以使用以下方法轻松实现：

`<li ng-repeat="record in records" ng-bind="record + ($last ? '' : ', ')"></li>`.

**请注意，我使用`ngBind`的是插值而不是插值`{{ }}`，因为它的性能更高：** `ngBind` 只有在传递的值确实发生变化时才会运行。另一方面，括号`{{ }}`将在每个 $digest 中进行脏检查和刷新，即使没有必要。来源：[这里](https://ng-perf.com/2014/10/30/tip-4-ng-bind-is-faster-than-expression-bind-and-one-time-bind/)，[这里](https://stackoverflow.com/questions/16125872/angularjs-why-ng-bind-is-better-than-in-angular/16126174#answer-23382400)和[这里](https://stackoverflow.com/questions/27097006/angularjs-why-is-ng-bind-faster-than-expressions#answer-27097165)。

```
angular
  .module('myApp', [])
  .controller('MyCtrl', ['$scope',
    function($scope) {
      $scope.records = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    }
  ]);
```

```
li {
  display: inline-block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
<div ng-app="myApp" ng-controller="MyCtrl">
  <ul>
    <li ng-repeat="record in records" ng-bind="record + ($last ? '' : ', ')"></li>
  </ul>
</div>
```

最后一点，这里的所有解决方案都有效并且直到今天仍然有效。我真的发现那些涉及 CSS 的人，因为这更像是一个演示问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-28T03:09:01.787

我喜欢 simbu 的方法，但我不习惯使用 first-child 或 last-child。相反，我只修改重复列表逗号类的内容。

```
.list-comma + .list-comma::before {
    content: ', ';
} 
```

```
<span class="list-comma" ng-repeat="destination in destinations">
    {{destination.name}}
</span> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-23T13:46:48.893

如果您使用 ng-show 来限制值，则`{{$last ? '' : ', '}}`不会起作用，因为它仍会考虑所有值。示例

```
<div ng-repeat="x in records" ng-show="x.email == 1">{{x}}{{$last ? '' : ', '}}</div>

var myApp = angular.module("myApp", []);
myApp.controller("myCtrl", function($scope) {
  $scope.records = [
    {"email": "1"},
    {"email": "1"},
    {"email": "2"},
    {"email": "3"}
  ]
}); 
```

[结果在“最后一个”值之后添加逗号](https://jsfiddle.net/pnejz3w9/1/)，因为使用 ng-show 它仍然考虑所有 4 个值

```
{"email":"1"},
{"email":"1"}, 
```

[一种解决方案是将过滤器](https://jsfiddle.net/pnejz3w9/8/)直接添加到 ng-repeat

```
<div ng-repeat="x in records | filter: { email : '1' } ">{{x}}{{$last ? '' : ', '}}</div> 
```

结果

```
{"email":"1"},
{"email":"1"} 
```

# php - 使用 TCPDF 从 PDF 创建图像

> ID：11540160
> 
> 赞同：4
> 
> 时间：2012-07-18T11:22:12.427
> 
> 标签：php, imagemagick, tcpdf

我正在使用 TCPDF 库生成 PDF，并希望将 pdf 转换为图像。任何人都知道这对于 TCPDF 本身是否可行（我查看了代码但看起来不可能）？

看看这里[以前的问题](https://stackoverflow.com/questions/467793/how-do-i-convert-a-pdf-document-to-a-preview-image-in-php)，似乎最好的方法是使用[ImageMagick](http://www.imagemagick.org/script/index.php) - 情况仍然如此吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:14:23.020

ImageMagick 和 Ghostscript 将是实现这一目标的方法。我假设从命令行运行 gs 或 convert 命令效率更高，因为您不必在 PHP 中加载 imagemagick 扩展，并且它减少了使用扩展的抽象类的开销。

# asp.net - 需要 ASP.NET 的视频播放器（应支持 IE 7.0 + 所有浏览器）

> ID：11540163
> 
> 赞同：0
> 
> 时间：2012-07-18T11:22:18.180
> 
> 标签：asp.net, video-streaming, html5-video

我需要实现一个应该播放文件（wmv、mpeg、mp4 等）的视频播放器，我尝试过对象标签，但它需要媒体播放器插件才能播放我不想要这种。有人可以建议我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:27:41.530

要在网站上播放视频，用户需要下载插件（WMP 或任何其他播放器）。没有插件，视频无法在浏览器中流式传输或播放。

# android - 在android中修剪/剪切视频文件

> ID：11540169
> 
> 赞同：4
> 
> 时间：2012-07-18T11:22:27.633
> 
> 标签：android, android-layout, video-editing

当用户通过我的应用程序播放视频时，我想提取视频的一部分。在播放视频时，用户可以指定开始和结束持续时间来剪切视频。那么有什么方法可以根据持续时间剪切视频并保存到 SD 卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T02:18:47.717

我认为这可以使用[MP4Parser](https://code.google.com/p/mp4parser/)来完成，它纯粹是用 java 编写的，并且可以与 android 一起使用，[这里](https://github.com/sannies/mp4parser/blob/master/examples/src/main/java/com/googlecode/mp4parser/ShortenExample.java)还有一个在 java 中做视频缩短的例子 作者[Sebastian-annies](https://stackoverflow.com/users/829133/sebastian-annies)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T12:45:34.570

您可以尝试将 ffmpeg 编译并集成到您的项目中。我使用 ffmpeg 剪切视频和音频，速度非常快，无需录制。我没有在 android 上做这件事的经验，但它应该可以工作。这里有关于 ffmpeg 在 android 上的官方 wiki 页面：

[https://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20compile%20FFmpeg%20for%20Android](https://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20compile%20FFmpeg%20for%20Android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-22T15:35:12.687

使用这个[Android-video_trimmer](https://github.com/a914-gowtham/Android-video-trimmer)库。它也支持 Android 10

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-30T06:27:03.410

Android 使用 Mp4Parser/isoParser 修剪视频 这里是修剪视频的示例[https://android.googlesource.com/platform/packages/apps/Gallery2/+/android-4.4.2_r2/src/com/android/gallery3d/ app/TrimVideo.java](https://android.googlesource.com/platform/packages/apps/Gallery2/+/android-4.4.2_r2/src/com/android/gallery3d/app/TrimVideo.java)并且如前所述，他使用了 isoParser，你可以从“git clone [https://android.googlesource.com/platform/external/mp4parser](https://android.googlesource.com/platform/external/mp4parser) ”中获得它

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-07-19T09:35:10.467

@Ravi --- 视频可以在 videoview 或 surfaceview android 内置类中播放。在surfaceview中，您可以启动一个线程以使用MediaRecorder从您选择的位置录制视频到您想要的位置

```
 MediaRecorder recorder = new MediaRecorder();
    recorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
        recorder.setOutputFile("/sdcard/recordvideooutput.3gpp");
        recorder.setPreviewDisplay(mHolder.getSurface());
    recorder.prepare(); 
```

您的 mholder 是用于附加表面视图的 SurfaceHolder 支架

调用这两个方法将开始和停止录制，文件将被写入 /sdcard/recordvideooutput.3gpp

```
recorder.start();
recorder.stop(); 
```

使用开发者指南[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

# symfony - Symfony2/Memcached 集成

> ID：11540171
> 
> 赞同：17
> 
> 时间：2012-07-18T11:22:32.380
> 
> 标签：symfony, memcached

我正在关注一篇博文（链接不再可用）并将 memcached 添加到 services.yml

```
parameters:
    memcached.servers:
      - { host: 127.0.0.1, port: 11211 }

services:
    memcached:
        class: Memcached
        calls:
            - [ addServers, [ %memcached.servers% ]] 
```

然后在我的控制器中：

```
$memcached = $this->get('memcached'); 
```

看起来非常漂亮。如果我能过去`500 - You have requested a non-existent service "memcached"`！

来自 php 的测试代码连接到 memcached 没有任何麻烦。完成缓存：清除，手动清除缓存 - 无济于事。

我应该去哪里看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T11:12:30.830

Adrien 在他的评论中是对的 - 默认情况下不使用 services.yml 文件。您必须在 config.yml 中明确包含它

# java - 来自org.apache的telnet代码java不适用于windows7

> ID：11540172
> 
> 赞同：0
> 
> 时间：2012-07-18T11:22:35.853
> 
> 标签：java, windows-7, telnet

我正在使用使用包 org.apache.commons.net.telnet.TelnetClient 的示例 telnet 应用程序代码

当我在 XP 中运行它时，telnet 会话已连接，我可以从中检索数据。

但是当我在 Windows7 中运行相同的 jar 时，它失败并出现以下异常。

线程“main”中的异常 java.lang.NoClassDefFoundError: javax/net/SocketFactory

我先用jre7，然后把jar和windows7都更新为jre6，但没有正面结果

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:35:26.017

您的 Java 安装存在严重问题。该类是在 2004 年左右引入的。检查您实际运行的是哪个 java.exe。java -version 显示什么？

# selenium-ide - 如何在 selenium ide 中自动化自动完成标签？

> ID：11540173
> 
> 赞同：0
> 
> 时间：2012-07-18T11:22:36.663
> 
> 标签：selenium-ide

```
<tr>
    <td>clickAt</td>
    <td>css=ul.token-input-list-facebook</td>
    <td></td>
</tr>
<tr>
    <td>setCursorPosition</td>
    <td>id=token-input-SongTags</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=token-input-SongTags</td>
    <td>n</td>
</tr>
<tr>
    <td>setCursorPosition</td>
    <td>id=token-input-SongTags</td>
    <td></td>
</tr>
<tr>
    <td>click</td>
    <td>id=token-input-SongTags</td>
    <td></td>
</tr> 
```

我尝试了上述步骤来自动化自动完成标签，但这不起作用，

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:37:22.193

```
<tr>
    <td>clickAt</td>
    <td>css=(first click)</td>
    <td></td>
</tr>
<tr>
    <td>type</td>
    <td>id=(second click)</td>
    <td>${tagname}</td>
</tr>
<tr>
    <td>typeKeys</td>
    <td>id=(second click)</td>
    <td>${tagname}</td>
</tr>
<tr>
    <td>pause</td>
    <td>3000</td>
    <td></td>
</tr>
<tr>
    <td>focus</td>
    <td>id=(second click)</td>
    <td></td>
</tr>
<tr>
    <td>keyDown</td>
    <td>id=(second click)</td>
    <td>\40</td>
</tr>
<tr>
    <td>keyDown</td>
    <td>id=(second click)</td>
    <td>\40</td>
</tr>
<tr>
    <td>keyDown</td>
    <td>id=(second click)</td>
    <td>\13</td>
</tr> 
```

# c# - 将C#函数转换为VB，char值溢出错误

> ID：11540175
> 
> 赞同：1
> 
> 时间：2012-07-18T11:22:44.777
> 
> 标签：c#, vb.net, code-conversion

我需要将以下函数转换为 VB.NET，但我不确定如何处理该语句

```
res = (uint)((h * 0x21) + c); 
```

功能齐全：

```
private static uint convert(string input)
{
    uint res = 0;
    foreach (int c in input)
        res = (uint)((res * 0x21) + c);
    return res;
} 
```

我创建了以下内容，但出现溢出错误：

```
Private Shared Function convert(ByVal input As String) As UInteger

    Dim res As UInteger = 0
    For Each c In input
        res = CUInt((res * &H21) + Asc(c)) ' also tried AscW 
    Next
    Return res

End Function 
```

我错过了什么？有人可以解释一下细节吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:36:37.617

你的代码是正确的。计算在几个字符后溢出，因为`res`每次迭代都会以指数方式增加（导致溢出的不是字符的转换，而是溢出的无符号整数）。

C# 默认允许整数运算溢出——VB 不允许。不过，您可以在 VB 的项目设置中禁用溢出检查。但是我会尽量不依赖这个。是否有理由必须移植这个特定的 C#？毕竟，您可以毫不费力地混合使用 C# 和 VB 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:31:13.653

这是一个有用的在线转换器：http: [//www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

# android - Android 服务作为单独的进程运行

> ID：11540178
> 
> 赞同：2
> 
> 时间：2012-07-18T11:22:48.473
> 
> 标签：android, eclipse, jakarta-ee

我在android中有一个服务类。服务是否可以作为单独的进程运行，而不是应用程序仅用于接收 SMS 并将它们排入队列，之后应用程序从该队列中读取 SMS。

是否可以推出单独的服务？

我在下面标记了 SmsService 类的源代码

公共类 SmsService 扩展服务 {

```
private SMSReceiver mSMSreceiver;
private IntentFilter mIntentFilter;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
public SmsService(){
    /*dba = new DataBaseAdapter(this);*/
    mSMSreceiver = new SMSReceiver();
}
@Override
public void onCreate(){
    super.onCreate();       

    mIntentFilter = new IntentFilter();
    mIntentFilter.addAction(ConstantClass.SMS_RECEIVED);
    registerReceiver(mSMSreceiver,mIntentFilter);
}
@Override 
public int onStartCommand(Intent intent , int flags, int type){
    return START_STICKY;
}

@Override 
public void onDestroy(){
    super.onDestroy();
    //unregisterReceiver(mSMSreceiver);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:24:58.397

要在不同的进程中注册您的服务，您需要在**AndroidManifest.xml****`android:process`**中定义您的服务时定​​义属性

 **例如：

```
<service android:process=":kaushik" /> 
```

这将在一个名为**kaushik**的新进程中运行您的服务。**

# java - 无法对数组类型 String[] 调用 replace(String, String)

> ID：11540181
> 
> 赞同：0
> 
> 时间：2012-07-18T11:23:05.107
> 
> 标签：java, string, jsp

在尝试处理 jsp 上的字符串时，我在代码中使用了 string.repalace() 方法，但我不断收到以下错误：

```
org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 9 in the jsp file: /final2.jsp
Cannot invoke replace(String, String) on the array type String[]
6:       public void main (String str) {
7:      String [] text = StringUtils.substringsBetween(str,"#","#");
8:      for (int i=0; i<text.length;i++) {
9:        String newtext = text.replace("#"+text[i]+"#","<b>"+text[i]+"</b>");
10:          }
11: //blank line
12:     }

Stacktrace:
org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:     102)
org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:331)
org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:469)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:378)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我的代码如下：

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.sql.*"      errorPage="" %>
<%@page import="org.apache.commons.lang.StringUtils" %>

<%
 final class setext {
  public void main (String str) {
    String [] text = StringUtils.substringsBetween(str,"#","#");
    for (int i=0; i<text.length;i++) {
      String newtext = text.replace("#"+text[i]+"#","<b>"+text[i]+"</b>");
     }

}

}
%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:24:01.483

```
text.replace("#"+text[i]+"#","<b>"+text[i]+"</b>"); 
```

text 是数组，不能调用`replace()`数组

您需要首先从提供字符串的数组中获取字符串，然后对该字符串调用替换。

```
String temp = text[i];
temp.replace("#"+text[i]+"#","<b>"+text[i]+"</b>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:24:55.940

`text`是一个字符串数组 - 你可能的意思是：

```
String newtext = text[i].replace("#"+text[i]+"#","<b>"+text[i]+"</b>"); 
```

其中`text[i]`是文本数组中的字符串之一。

虽然看着它，这种说法确实有很大的意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:52:37.523

如果只是根据需要替换“#”：

```
 public void main (String str) {
    String [] text = StringUtils.substringsBetween(str,"#","#");
    for (int i = 0, n = text.length ; i<n; i++) {
        text[i] = text[i].replace("#"+text[i]+"#", "<b>"+text[i]+"</b>");
 } 
```

*已编辑*

*   在 for(..) 中添加*n*
*   如果您的代码片段受到压力，您还可以使用 Pattern/Matcher 模型来替换“#”。

# eclipse - 调试时打开 .class 文件而不是 .java

> ID：11540184
> 
> 赞同：33
> 
> 时间：2012-07-18T11:23:16.663
> 
> 标签：eclipse

当前设置：

*   **MainProject**是一个图书馆项目

*   **BranchProject**是一个新项目，并以 MainProject 作为参考

每当我调试并且来自 MainProject 的文件处于焦点时（实际上 BranchProject 只有图形和 xml 布局更改），调试窗口就会打开一个只读的 .class 文件。我希望它打开 .java 文件，以便我可以直接编辑它。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-28T17:27:46.863

Skyler 在这篇文章中的回答对我有用： [Open source code from debug view edits .class after Android R18 update](https://stackoverflow.com/questions/11441498/opening-source-code-from-debug-view-edits-class-after-android-r18-update)

这是一个摘要：修复方法是在调试视图中右键单击项目名称，然后从菜单中选择“编辑源查找...”。从那里删除默认查找路径。之后，手动添加项目引用的关联项目（不是 jar）。这是通过单击添加，选择 Java 项目，然后检查适当的项目来完成的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T11:33:57.157

当您使用库项目时，您实际上正在做的事情之一是将您的库项目编译到一个 jar 中，然后在您的调用项目中引用该 jar。

如果您右键单击项目，然后选择“配置构建路径”，您将看到一个名为“库”的选项卡，如果您查看“Android 依赖项”，您会注意到与您的库项目相对应的 jar 列表。

这些罐子是可扩展的，向您展示它们有一个用于源附件的插槽。通常这将是可编辑的，允许您直接链接源，但就 ADT 而言，这些已填充且不可编辑。

调试这些文件时，您将链接到带有此附加源的只读类文件。这是因为您不是直接针对源文件运行，而是针对预编译的类文件运行。在 ADT 团队获得此功能之前，您几乎被迫跳转到直接源代码并重建所有内容。

**编辑**

请参阅@Steven 链接答案:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-26T11:30:40.623

`.java`我在使用 Eclipse IDE调试文件时遇到了同样的问题。据我了解，当我们将`xyz.class`文件`xyz.java`文件或`JAR`项目构建路径放置时，就会出现此问题。从项目类路径中删除`.class`or`JAR`文件，然后在调试模式下重新运行 .java 文件。这次您会看到一个未找到源的窗口。单击“未找到源”按钮并选中窗口底部的“查找重复项...”。你的问题解决了:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-16T01:05:25.220

问题是类文件优先于 java（默认情况下），这里是如何为 Eclipse 更改它（在 NEON 2 上测试）：

1.  **在项目资源管理器中右键单击**项目，单击**属性**
2.  在新窗口中选择：**运行/调试设置**
3.  创建一个**新配置**（或复制另一个）
4.  选择新配置并单击**编辑...**
5.  转到选项卡**源**
6.  选择**默认**并**删除**
7.  **使用Add...**创建一个新路径，选择**Java Library**，然后选择**JRE System Library**
8.  **使用Add...**创建一个新路径，通过 Workspace 文件夹（如果是同一工作区中的项目）或 File System 目录（不是）选择**源代码**所在的位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:27:11.097

我认为这取决于您如何在 Eclipse 中设置依赖项。您应该将 BranchProject 设置为依赖于 MainProject 的源文件。如果你依赖于 compiles Class-Files 很明显调试器会打开类文件，因为它不知道源文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-26T09:22:25.470

我在这里找到了一个很好的解决方案：

[在 Eclipse 中使用 Android 库并跳转到类文件而不是 Eclipse 工作区中的源文件](https://stackoverflow.com/questions/9682074/using-android-library-in-eclipse-and-jumping-to-class-files-instead-of-source-fi)

只需选择您的项目所依赖的每个库项目，然后使用 Top 或 Up 将其移动到项目输出上方。例如。将所有库项目移到顶部。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-06T05:12:07.407

1.  打开`main project properties -> Java Build Path -> Projects`选项卡并添加主项目所依赖的项目。
2.  切换到`Order and Export`选项卡并取消选中`Android Dependencies`
3.  享受

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-14T10:20:26.663

如果您尝试了上述所有提示但仍然无法正常工作，请尝试此解决方案，它对我有用：

1.  右键单击Package-Explorer中的项目，单击构建路径->配置构建路径...
2.  选择选项卡订购和导出
3.  选择您无法访问代码的库，然后单击底部按钮
4.  然后点击应用并关闭

希望这可以帮到你

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-30T08:11:26.200

大多数情况下，在构建路径 Sources 选项卡中未添加特定的源文件夹时会发生这种情况。

右键单击Package-Explorer中的项目，**单击构建路径->配置构建路径->源选项卡**

如果您的项目源文件夹不存在，请添加源文件夹。 **选择添加文件夹 ->**专门选择您的项目源文件夹。例如： project_name/src 。然后应用它并重新启动服务器。

# java - 循环android方法

> ID：11540186
> 
> 赞同：1
> 
> 时间：2012-07-18T11:23:23.987
> 
> 标签：java, android, surfaceview

我正在制作一个安卓游戏。我正在使用RelativeLayout，它承载一个FrameLayout，它承载一个SurfaceView。但是，我在 RelativeLayout 上添加了一个文本视图，以显示玩家还剩下多少生命值。我有一个方法可以设置他在文本视图中留下多少健康点的 int 值。int 值位于 SurfaceView 中，它是另一个类。但是文本视图和更新文本视图的方法在另一个类中。我希望其他类中的方法不断更新，让textview一直显示健康值。我怎样才能做到这一点？该方法称为 updateHealthPointsTextView()。请帮助我，非常感谢！我的代码：

```
package com.mysoftwaremobileapps.alien.attack;

import java.util.ArrayList;

public class GameScreenActivity extends Activity {
/** Called when the activity is first created. */
List<String> myList = new ArrayList<String>();
RadioButton radioEasy, radioMedium, radioHard;
private ExampleView eView;
public int ParachuterIndex;
TextView healthPoints;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    dropParachuters();
}
private void dropParachuters() { 
    // TODO Auto-generated method stub
}
    @Override
    protected void onStart()
    {
        FrameLayout fl = new FrameLayout(this);
        eView = new ExampleView(this);
        fl.addView(eView);

        healthPoints  = new TextView(this);
        healthPoints.setText("Health Points: " + eView.getThread().healthPoints);

        RelativeLayout relativeLayout= new RelativeLayout(this);
        relativeLayout.addView(fl);
        relativeLayout.addView(healthPoints);
        setContentView(relativeLayout);

        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().drawAlien();
        eView.getThread().publicFloatX = 750;

        eView.getThread().gettingAttacked();

        updateHealthPointsTextView();

        super.onStart();

        try {
            Bundle extras = getIntent().getExtras();
            if (extras != null) {
                String value = extras.getString("KEY");
            }
        } catch (Exception e) {
            // TODO: handle exception
        }

}

    private void updateHealthPointsTextView() {
        // TODO Auto-generated method stub
                    //Updating textview with health points value
            healthPoints.setText(Integer.toString(eView.getThread().healthPoints));
        }
    }
    @Override
    public boolean onKeyDown(int KeyCode, KeyEvent Event) {
        if ((KeyCode == KeyEvent.KEYCODE_MENU)) {
            //Call performSpecialAttack()
            Log.d("Parachute Hunter", "calling performSpecialAttack()");
            eView.getThread().performSpecialAttack();
            return true;
        }
        return super.onKeyDown(KeyCode, Event);
    }

@Override
protected void onStop()
{
    try {
        eView.getThread().setRunning(false);
        eView = null;
    }
    catch (NullPointerException e) {}

    super.onStop();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:29:15.840

有这样的方法怎么样：

```
public void setHealthPoints(int points) {
        eView.getThread().healthPoints = points;
        //Updating textview with health points value
        healthPoints.setText("Health Points: " + Integer.toString(points));
    }
} 
```

从任何地方调用它，它不应该阻塞 GUI-Thread

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:04:01.667

我通过简单地使倒数计时器从 1 秒倒计时然后重新启动自身并在完成后更新 textview 来修复它。有用

```
 public void updateHealthPointsTextView() {
        //The aliens are firing and throwing rocks, make the defender lose health
        new CountDownTimer(1000, 1000) {

             public void onTick(long millisUntilFinished) {
             }

             public void onFinish() {
                 //Updating textview
                healthPoints.setText("Health points: " + Integer.toString(eView.getThread().healthPoints));
                updateHealthPointsTextView();
             }
          }.start();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:34:57.727

只需在该类的构造函数中传递 textview 的引用并使用处理程序频繁更新它。

```
public final class MethodUtil {
TextView mTextView;

public MethodUtil(TextView mTextView) {
//this.mTextView =(TextView)mTextView.findViewById(R.id.textview);
    this.mTextView=mTextView;
}
public void updateHealthPointsTextView(){
mTextView.post(new Runnable() {

    @Override
    public void run() {
        mTextView.setText("Health Points: " +     eView.getThread().healthPoints);

    }
});
}
} 
```

# javascript - 如何使用 javascript 从地图坐标中获取 x1、y1、x2、y2？

> ID：11540187
> 
> 赞同：0
> 
> 时间：2012-07-18T11:23:25.203
> 
> 标签：javascript, html, imagemap

我有一个图像映射，我想让 x1,y1,x2,y2 在不同的变量中分开，这是映射：

```
 <area shape="rect"
    coords="470,555,863,665"
    id="map"
    href="#" 
```

这是从中获取坐标的方法：

```
 var myVar = (document.getElementById("map").coords); 
```

但是这一行的输出是“470,555,863,665”是否可以将它们分成不同的变量？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:25:17.350

```
var coords = myVar.split(","); 
```

`coords`现在是逗号分隔列表中各个值的数组。所以`x1 = coords[0]`,`y1 = coords[1]`等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:25:29.220

```
var myVar = (document.getElementById("map").coords).split(',');
//myVar will be an array of all those values 
```

# html - 在 ruby 中使用正则表达式解析 html

> ID：11540192
> 
> 赞同：1
> 
> 时间：2012-07-18T11:23:34.930
> 
> 标签：html, ruby, regex, extract

大家好，我有一个 html 代码作为下面的代码。我想得到里面的文字`<a>(.*)</a>`

我想得到这个结果：

```
data 1 : hello1
data 2 : hello2
data 3 : hello3 
```

从该输入：

```
<a>
hello1
</a>
<a>
hello2
</a>
<a>
hello3
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:57:48.227

要扩展这两个注释，以下 Nokogiri 代码将适用于您的示例。您可以使用 xpath 或 CSS。专用的解析器比滚动你自己的正则表达式要强大得多。

```
> require 'nokogiri'
 => true 
> doc = Nokogiri::HTML("<a>hello1</a><a>hello2</a><a>hello3</a>")
 => #<Nokogiri::HTML::Document:0x3ffec2494f48 name="document" children=[#<Nokogiri::XML::DTD:0x3ffec2494bd8 name="html">, #<Nokogiri::XML::Element:0x3ffec2494458 name="html" children=[#<Nokogiri::XML::Element:0x3ffec2494250 name="body" children=[#<Nokogiri::XML::Element:0x3ffec2494048 name="a" children=[#<Nokogiri::XML::Text:0x3ffec2493e40 "hello1">]>, #<Nokogiri::XML::Element:0x3ffec249dc88 name="a" children=[#<Nokogiri::XML::Text:0x3ffec249da80 "hello2">]>, #<Nokogiri::XML::Element:0x3ffec249d878 name="a" children=[#<Nokogiri::XML::Text:0x3ffec249d670 "hello3">]>]>]>]> 
> doc.css('a').each { |node| p node.text }
"hello1"
"hello2"
"hello3"
 => 0 
```

更新：如果您还没有安装 nokogiri gem，您将需要它。

```
sudo gem install nokogiri 
```

根据您的设置，您可能还需要预先设置

```
require 'rubygems' 
```

# visual-studio-2010 - 将 OpenCV 2.4.2 与 Visual Studio 2010 链接

> ID：11540193
> 
> 赞同：1
> 
> 时间：2012-07-18T11:23:38.243
> 
> 标签：visual-studio-2010, visual-studio, opencv

我已经按照此处所述安装了 OpenCV：[Installing openCV 2.4 for C/C++ for Visual Studio](https://stackoverflow.com/questions/11527227/installing-opencv-2-4-for-c-c-for-visual-studio)。

我尝试链接 openCV 库，但我被困在[本教程](http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html)中的“本地方法”中。

我有两个带有 openCV 文件的地方： [username]/opencv (official)/ 我在其中提取了 openCV 源代码（进一步称为源目录） [username]/opencv-build/ 在其中我使用 cmake 构建了 openCV，然后使用 Visual Studio 对其进行了编译（进一步称为构建目录）

我尝试遵循的教程说链接 $(OPENCV_DIR)\include ，它指的是构建目录。但是，我的构建目录中的“include”文件夹仅包含一些 cmake 文件，而源目录中的“include”包含 openCV 头文件（在文件夹 opencv 和 opencv 中）。我知道我应该改用源目录，但是我尝试了两者，但它们都不起作用。

接下来，教程说链接 $(OPENCV_DIR)\libs。我有一个文件夹“lib”，所以我猜这只是一个拼写错误。我的文件夹“lib”包含两个文件夹：“Debug”和“Release”。我应该将 [username]/opencv-build/lib/Debug 添加到 Debug 属性页并将 [username]/opencv-build/lib/Release 添加到 Release 属性页吗？

我在两个属性页中都向链接器输入添加了 242 个版本库。

无论我做什么，Visual Studio 都会突出显示所有的包含语句，因此也会突出显示其他所有内容。

```
#include "stdafx.h"
#include <cv.h>
#include <cxcore.h>
#include <highgui.h> 
```

任何想法我做错了什么？

* * *

**go4sri 回答后编辑：**

更改为 opencv\include\opencv 解决了包含问题（“stdafx.h”除外），但是我现在尝试了以下“hello world”：

```
 #include <cv.h>
 #include <highgui.h>

 int main ( int argc, char **argv )
 {
     cvNamedWindow( "My Window", 1 );
     IplImage *img = cvCreateImage( cvSize( 640, 480 ), IPL_DEPTH_8U, 1 );
     CvFont font;
     double hScale = 1.0;
     double vScale = 1.0;
     int lineWidth = 1;
     cvInitFont( &font, CV_FONT_HERSHEY_SIMPLEX | CV_FONT_ITALIC,
             hScale, vScale, 0, lineWidth );
     cvPutText( img, "Hello World!", cvPoint( 200, 400 ), &font,
             cvScalar( 255, 255, 0 ) );
     cvShowImage( "My Window", img );
     cvWaitKey();
     return 0;
} 
```

尽管不再突出显示包含，但其他所有内容仍然是。错误是“标识符 XXX 未定义”。

* * *

**编辑**

我已将之前版本的 openCV 中的一些文件复制到`<source_directory>\include\opencv2`. 现在 Visual Studio 没有突出显示任何内容，但是当我尝试构建它时，出现“未解析的外部符号”错误：_cvCreateImage、_cvInitFont、_cvNamedWindow、_cvPutText、_cvShowImage 和 _cvWaitKey。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:38:23.770

您使用源目录中的包含是正确的。

将包含更改为：

```
#include <opencv\cv.h>
#include <opencv\cxcore.h>
#include <opencv\highgui.h> 
```

它们都包含在include下的opencv目录中。这是使用Opencv的标准方式。

但是，您也可以将包含选项更改为`<source_dir>\include\opencv;<source_dir>\include\opencv2;<source_dir>\include`[不推荐]

对于库：

是的。使用附加库目录选项中的 Debug 目录用于 Debug（和 Release 用于发布） 您还需要更改输入库名称 - 请注意，所有调试库都以**d**结尾，而发布库则没有。例如：

调试库将被命名：`opencv_imgproc242d.lib` 发布库将被命名为：`opencv_imgproc242.lib`

希望这可以帮助...

# boost - 地铁风格的应用程序是否支持提升？

> ID：11540199
> 
> 赞同：1
> 
> 时间：2012-07-18T11:24:05.057
> 
> 标签：boost, windows-8, microsoft-metro, visual-studio-2012

我有一个使用 boost 库**1.49的桌面应用程序（基于****msvc : 11**构建）。我想将我的桌面应用程序移植到 Metro 风格。我可以将这个 boost 库与我的 Metro 应用程序一起使用吗？具体来说，我的问题是，如果 boost 使用任何受限于**WinRT**的 API ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:24:44.003

以下是Metro 风格应用程序可用[的 COM/Win32 API 列表。](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx)如果组件保持这些 API，那么对于 Metro 风格的应用程序来说就可以了。

# c# - 如何显示第二个表格以插入已插入第一个表格中的问题的答案？

> ID：11540200
> 
> 赞同：0
> 
> 时间：2012-07-18T11:24:13.980
> 
> 标签：c#, asp.net, sql-server-2008-r2

我正在尝试开发两个动态表，用户可以直接在第一个表中添加新行，当他完成添加后，他将能够选择它以打开第一个表下方的第二个表。我现在在选择第一个表中的行以显示第二个表时遇到了问题。那么如何获得呢？

仅供参考，我有以下数据库设计：

```
Quiz Table: QuizID, Title, Description
Question Table: QuestionID, Question, QuestionOrder, AnswerExplanation
QuestionImage Table: ID, QuestionID, URL
Answer Table: AnswerID, Answer
QuizContent Table: ID, QuizID, QuestionID, AnswerID 
```

此外，第一个表将用于插入问题，第二个表将用于插入答案。那么我如何选择一个问题来显示第二个表格并能够插入该问题的答案

ASP.NET 代码：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:Table ID="questionsList" runat="server" Width="70%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366; font-size:17px; font-weight:bold;">
                    <asp:TableHeaderRow>
                        <asp:TableHeaderCell>ID</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Question</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Question Order</asp:TableHeaderCell>
                        <asp:TableHeaderCell>Answer Explanation</asp:TableHeaderCell>
                    </asp:TableHeaderRow>
        </asp:Table>

        <asp:Table ID="Table1" runat="server" Width="70%" CellPadding="5" CellSpacing="0" 
                    style="border:2px solid #003366;">
            <asp:TableFooterRow>
                <asp:TableCell>Add</asp:TableCell>

                <asp:TableCell >
                    <asp:TextBox ID="txtQuestion" runat="server"></asp:TextBox>

                    <%--For the txtQuestion TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender1" runat="server"
                                    TargetControlID="txtQuestion" WatermarkText="Type the Question here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:TextBox ID="txtQuestionOrder" runat="server"></asp:TextBox>

                    <%--For the txtQuestionOrder TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender2" runat="server"
                                    TargetControlID="txtQuestionOrder" WatermarkText="Type the Question Order here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:TextBox ID="txtAnswerExplanation" runat="server"></asp:TextBox>

                    <%--For the txtAnswerExplanation TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender3" runat="server"
                                    TargetControlID="txtAnswerExplanation" WatermarkText="Type the Answer Explanation here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <span style="margin:3px 10px 0px 0px;">
                        <asp:ImageButton ID="addButton" runat="server" ImageUrl="Images/tick_small.png" OnClick="addQuestion" />
                    </span>
                </asp:TableCell>
            </asp:TableFooterRow>
        </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

代码隐藏：

```
public void fill_Questions()
    {

        string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
        SqlConnection conn = new SqlConnection(connString);
        string selectQuery = "SELECT * FROM Question";
        SqlCommand cmd = new SqlCommand(selectQuery, conn);
        DataSet ds = new DataSet();
        SqlDataAdapter sda = new SqlDataAdapter();
        sda.SelectCommand = cmd;

        Table table = (Table)UpdatePanel1.FindControl("questionsList");
        try
        {
            table.Rows.Clear();
            //open the connection
            conn.Open();
            //filling the dataset with the data
            sda.Fill(ds);
            //close the connection
            conn.Close();
        }
        catch
        {
            table.Rows.Clear();
        }

        //Loading the data into the table
        if (ds.Tables.Count > 0)
        {
            int rowsNum = ds.Tables[0].Rows.Count;
            for (int i = 0; i < rowsNum; i++) 
            {
                TableRow row = new TableRow();
                table.Rows.Add(row);

                for (int colCount = 0; colCount < 5; colCount++)
                {
                    TableCell cell = new TableCell();
                    row.Cells.Add(cell);

                    if (colCount == 0)
                    {
                        //int n = i + 1;
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["QuestionID"].ToString()));
                    }
                    else if (colCount == 1)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["Question"].ToString()));
                    }
                    else if (colCount == 2)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["QuestionOrder"].ToString()));
                    }
                    else if (colCount == 3)
                    {
                        cell.Controls.Add(new LiteralControl(ds.Tables[0].Rows[i]["AnswerExplanation"].ToString()));
                    }
                    else if (colCount == 4)
                    {
                        ImageButton deleteButton = new ImageButton();
                        deleteButton.ImageUrl = "Images/DeleteRed.png";
                        deleteButton.ID = ds.Tables[0].Rows[i]["QuestionID"].ToString() + "_" + i;
                        deleteButton.Click += new ImageClickEventHandler(deleteQuestion);
                        cell.Controls.Add(deleteButton);

                    }
                } //End for loop
            }//End OUTER for loop

        }//End if statement

    }

    //For deleting question
    public void deleteQuestion(object sender, EventArgs e) 
    {
        string id = ((ImageButton)sender).ID.ToString().Split('_')[0];
        try 
        {
            string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string deleteQuery = "DELETE FROM Question WHERE QuestionID = @id";
            SqlCommand cmd = new SqlCommand(deleteQuery,conn);
            cmd.Parameters.AddWithValue("@id", id);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
            fill_Questions();
        }
        catch(SqlException se){}

        UpdatePanel1.Update();

    }

    //For adding questions
    public void addQuestion(object sender, EventArgs e) 
    {
        try 
        {
            TextBox txtQuestion = (TextBox)UpdatePanel1.FindControl("txtQuestion");
            TextBox txtQuestionOrder = (TextBox)UpdatePanel1.FindControl("txtQuestionOrder");
            TextBox txtAnswerExplanation = (TextBox)UpdatePanel1.FindControl("txtAnswerExplanation");

            string connString = ConfigurationManager.ConnectionStrings["QuizSysDBConnectionString"].ConnectionString;
            SqlConnection conn = new SqlConnection(connString);
            string insertQuery = "INSERT INTO Question (Question, QuestionOrder, AnswerExplanation) VALUES (@Question, @QuestionOrder, @AnswerExplanation)";
            SqlCommand cmd = new SqlCommand(insertQuery,conn);
            cmd.Parameters.AddWithValue("@Question", txtQuestion.Text);
            cmd.Parameters.AddWithValue("@QuestionOrder", txtQuestionOrder.Text);
            cmd.Parameters.AddWithValue("@AnswerExplanation", txtAnswerExplanation.Text);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
            fill_Questions();
        }
        catch(SqlException se){}
    } 
```

**更新：**

我为答案创建了两个表格，就像我为问题所做的那样。现在，**在选择一个问题后，我将如何显示这些表格？**

ASP.NET 代码：

```
<div align="center">
    <h3>Answers List</h3>
    <asp:UpdatePanel ID="UpdatePanel2" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional">
        <ContentTemplate>
        <asp:Table ID="answersList" runat="server" Width="70%" CellPadding="0" CellSpacing="0"
                    style="border:2px solid #003366; font-size:17px; font-weight:bold;">
                    <asp:TableHeaderRow>
                        <asp:TableHeaderCell>Answer</asp:TableHeaderCell>
                    </asp:TableHeaderRow>
        </asp:Table>

        <asp:Table ID="Table2" runat="server" Width="70%" CellPadding="5" CellSpacing="0" 
                    style="border:2px solid #003366;">
            <asp:TableFooterRow>
                <asp:TableCell>Add</asp:TableCell>

                <asp:TableCell >
                    <asp:TextBox ID="txtAnswer" runat="server"></asp:TextBox>

                    <%--For the txtQuestion TextBox Control--%>
                    <ajaxToolkit:TextBoxWatermarkExtender ID="TextBoxWatermarkExtender4" runat="server"
                                    TargetControlID="txtAnswer" WatermarkText="Type the Answer here"
                                    WatermarkCssClass="watermarked">
                    </ajaxToolkit:TextBoxWatermarkExtender>
                </asp:TableCell>

                <asp:TableCell>
                    <asp:CheckBox ID="isCorrectCheckBox" runat="server" />
                </asp:TableCell>

                <asp:TableCell>
                    <span style="margin:3px 10px 0px 0px;">
                        <asp:ImageButton ID="ImageButton1" runat="server" ToolTip="Add" ImageUrl="Images/tick_small.png" OnClick="addAnswer" />
                    </span>
                </asp:TableCell>
            </asp:TableFooterRow>
        </asp:Table>
        </ContentTemplate>
    </asp:UpdatePanel> 
    </div> 
```

# ruby-on-rails - button_to 使用 GET 方法

> ID：11540208
> 
> 赞同：3
> 
> 时间：2012-07-18T11:24:33.710
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Rails 第 4 版（Rails 3.2+）进行敏捷 Web 开发，我对 button_to 方法有些困惑。这本书以及我所做的所有其他谷歌搜索都说 button_to 使用 POST 请求。但是，当我检查页面时， button_to 似乎正在使用 GET 方法。

现在，我可能有这个错误，但我来自 php 背景，并且 POST 方法总是意味着数据在没有 url 的情况下被传递到服务器并通过数组服务器端访问：

```
$_POST['form_item'] 
```

此外，GET 请求意味着通过 url 传递数据：

```
someurl.com/somepage?DATA=data_value 
```

使用此 button_to 代码：

```
 <%= button_to 'Add to Cart', line_items_path(product_id: product_id) %> 
```

这成为表单输出：

```
<form action="/line_items?product_id=4" class="button_to" method="post">
<div>
<input type="submit" value="Add to Cart" />
<input name="authenticity_token" type="hidden" value="vGT1scGqasbQAMxYwofXHCM62MfSyM/pNty69Ep5t38=" />
</div>
</form> 
```

此表单上的操作似乎是通过 url (?product_id=4) 传递数据。虽然我可以清楚地看到“method='post'”，但这不是使用GET吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T11:32:00.503

默认情况下，它使用 POST 方法。如果您需要 GET，只需键入：

```
<%= button_to 'Add to Cart', line_items_path(product_id: product_id), :method => :get %> 
```

您可以检查 rails 的日志并验证它是否真的是 POST 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:26:28.033

POST 请求也可以有一个 QUERY_STRING。问题是，您`line_items_path`在名为 的路径中没有参数`:product_id`，这就是帮助程序将此参数添加到 QUERY_STRING 的原因。如果您想将它放在路径中，请检查您的路线（`rake routes`），必须有类似的东西

```
POST      /line_items/:product_id(.:format)     line_items 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T23:51:56.457

正如 FancyDancy 所说，即使信息通过 URL 传递，它仍然是一个发布请求。Rails 不区分`$_GET`和`$_POST`。它只相当于`$_REQUEST`: `params`。因此，product_id 是通过 URL 还是通过隐藏的表单字段传递并不重要。在这两种情况下，您都可以通过`params[:product_id]`.

# iphone - 如何从 ipodlibrary 获取歌曲并使用 AVPlayer 播放

> ID：11540212
> 
> 赞同：4
> 
> 时间：2012-07-18T11:24:48.437
> 
> 标签：iphone, objective-c, ios, xcode

我想从 ipod 库中选择歌曲并使用 avplayer 播放我希望即使在应用程序进入后台后音乐也能继续播放我是 iOS 编程新手，谁能帮帮我..

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:13:08.317

要允许用户从他们的音乐库中选择一首（或多首歌曲），请使用`MPMediaPickerController`该类。

```
-(void) pickSong {

    // Create picker view
    MPMediaPickerController* picker = [[MPMediaPickerController alloc] init];
    picker.delegate = self;

    // Check how to display
    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad) {

        // Show in popover
        [popover dismissPopoverAnimated:YES];
        popover = [[UIPopoverController alloc] initWithContentViewController:picker];
        [popover presentPopoverFromBarButtonItem:self.navigationItem.rightBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

    } else {

        // Present modally
        [self presentViewController:picker animated:YES completion:nil];

    }

} 
```

`self.navigationItem.rightBarButtonItem`如果您没有从标题栏右侧的按钮显示它，请进行更改。

然后你需要通过实现委托来监听结果：

**当用户取消选择时调用：**

```
-(void) mediaPickerDidCancel:(MPMediaPickerController *)mediaPicker {

    // Dismiss selection view
    [self dismissViewControllerAnimated:YES completion:nil];
    [popover dismissPopoverAnimated:YES];
    popover = nil;

} 
```

**当用户选择某些东西时调用：**

```
-(void) mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {

    // Dismiss selection view
    [self dismissViewControllerAnimated:YES completion:nil];
    [popover dismissPopoverAnimated:YES];
    popover = nil;

    // Get AVAsset
    NSURL* assetUrl = [mediaItemCollection.representativeItem valueForProperty:MPMediaItemPropertyAssetURL];
    AVURLAsset* asset = [AVURLAsset URLAssetWithURL:assetUrl options:nil];

    // Create player item
    AVPlayerItem* playerItem = [AVPlayerItem playerItemWithAsset:asset];

    // Play it
    AVPlayer* myPlayer = [AVPlayer playerWithPlayerItem:playerItem];
    [myPlayer play]; 

} 
```

你需要一个`UIPopoverController* popover;`在你的类 .h 文件中。你也应该保留在`myPlayer`某个地方......

要让音乐在后台继续播放，请将`audio`字符串添加到 Info.plist 中`UIBackgroundModes`键下的数组中。

# .net - 如何在AutoCAD中选择给定点上的元素？

> ID：11540221
> 
> 赞同：2
> 
> 时间：2012-07-18T11:25:08.570
> 
> 标签：.net, vba, autocad

我目前正在将一些 AutoCAD VBA 代码移植到 .NET 并遇到以下部分：

```
Dim oSSetObj As AcadSelectionSet = Nothing
oSSetObj = ThisDrawing.SelectionSets.Add(SelSet_Prev)
oSSetObj.SelectAtPoint(pInsertionPoint) 
```

所以，我有一个给定的点，我想在这一点上选择所有元素。我查看了 the`SelectionSet`和`Editor`class 的不同方法，但它们似乎都不符合我的要求。

如何在给定点选择 AutoCAD .NET 中的所有元素？该解决方案应适用于 AutoCAD 2008 和 2011。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T12:16:29.407

恐怕你必须遍历整个数据库：[http ://through-the-interface.typepad.com/through_the_interface/2006/11/two_methods_for.html](http://through-the-interface.typepad.com/through_the_interface/2006/11/two_methods_for.html)

# web-applications - 如何在我的 Web 应用程序中使用 Liferay 功能

> ID：11540223
> 
> 赞同：0
> 
> 时间：2012-07-18T11:25:13.980
> 
> 标签：web-applications, liferay

我是 Liferay 的新手。我已经了解了它的功能，它们在单一屋顶下真的很棒。

我的要求是 - 我想使用 Liferay 的功能构建一个 java Web 应用程序 - Alloy UI、Web 内容管理、基于角色的工作流程、身份验证和授权等，但是这个应用程序不应该部署在 Portal 上，因为我们不需要所有的门户功能，这将是我们的开销。

有什么方法可以在我的 Web 应用程序中使用 Liferay 的功能并将其直接部署在 Web/应用程序服务器上？

我发现了一个标题为“[如何在 Liferay 中制作单独的 Web 应用程序](https://stackoverflow.com/questions/10383962/how-to-make-separate-web-application-in-liferay)”的结果，但它并没有说明我们是否可以在我们自己的 Web 应用程序中使用 Liferay 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:31:35.627

根据您的查询，我可以说您想要使用几乎 90% 的 Liferay 门户（CMS、Alloy UI、工作流、身份验证等），但您仍然不需要门户功能。请参考以下

1) 您在此处引用的所有 Web 应用程序（WCM、工作流应用程序、身份验证（登录部分））都是 portlet，它们不是简单的 servlet。所以，你必须有一个门户容器来运行 portlet

2) 取出portlet 并使其成为普通的Web 应用程序并不容易。

所以，在这里你可以做的是

1) 大多数 Liferay portlet 都提供 Web 服务。您可以从您的 Web 应用程序中调用这些 Web 服务并使用 Liferay 功能，但您不会获得良好的 UI 并且不会融合 UI 功能。合金可作为单独的框架使用，因此您必须自己集成。

2) Liferay 没有删除门户部分，而是提供了许多自定义来启用/禁用门户功能。尝试研究portal.properties 文件，您还可以在其中关闭许多类似portal 的功能。

毕竟，portal 也是一个传统的 Java EE web 应用程序，它提供了更多的抽象层次！:)

干杯

# java - Java - 有什么方法可以为 PC/Mac 创建独立的 GUI 应用程序？

> ID：11540225
> 
> 赞同：6
> 
> 时间：2012-07-18T11:25:18.743
> 
> 标签：java, installation, package

我很感兴趣有什么方法可以在 JAVA 上创建完全独立的桌面应用程序吗？我的意思是在分发包中打包 JAVA 运行时，为运行 *.jar 文件的 MAC/PC 构建应用程序，并获得完全跨平台的软件，而不依赖于目标机器上安装的 JAVA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:39:00.130

这显然是不可能的。您将需要至少一个可执行文件，该可执行文件将在您支持的任何平台上启动以开始设置/配置。您可以为特定操作系统使用不同的包装器来简化运行时的安装

# javascript - 如何更改数据表行颜色？

> ID：11540227
> 
> 赞同：0
> 
> 时间：2012-07-18T11:25:24.607
> 
> 标签：javascript, jquery, datatable

我有这个数据表我想为每一行设置不同的行颜色，我正在使用以下代码，但从未添加过该类

```
var oTableNE = $('#tabelNE').dataTable({
    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
        // Bold the grade for all 'A' grade browsers
        if ( aData[8] == "Submitted" )
        {
            $('tr', nRow).addClass("submittedColor");
            console.log("Change Color by adding CSS Class" + " nRow " +nRow + " " +aData[0] + " | " +aData[1] + " | " +aData[2]+ " | " +aData[8]);
        }else{
            console.log("Don't Change Color" + " nRow " +nRow + " " +aData[0] + " | " +aData[1] + " | " +aData[2]+ " | " +aData[8]);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:32:01.400

```
$('tr:nth-child(' + nRow + ')').addClass("submittedColor"); 
```

如果行的索引如上所述，则不确定您得到的 nRow 是什么。如果它的行元素本身如下所示。

```
$(nRow).addClass("submittedColor"); 
```

# javascript - 如何从jQuery中的函数返回一个字符串作为另一个jQuery函数的参数？

> ID：11540231
> 
> 赞同：1
> 
> 时间：2012-07-18T11:25:34.470
> 
> 标签：javascript, jquery, jquery-plugins

我有一个小问题：我需要将字符串的值从函数 A 传递给函数 B，函数 B 将其作为参数并使用它。

我尝试了以下方法，但它不起作用。

```
 // first function (A)
   $("a#SayHello").click(function (e) {
       e.preventDefault();

       var x = function () {
               var dt = '{"ProductID": "' + $("input#ProductID").val() + '" , "AffiliationURL": "' + $("input#AffiliationURL").val() + '" , "Quantitiy": "' + $("input#Quantitiy").val() + '" , "PricePerUnit": "' + $("input#PricePerUnit").val() + '" , "commissionAmount": "' + $("input#commissionAmount").val() + '"}';
               return dt.toString();
           };
       alert(x);
       $.B(x);
   });

   // second function
   function B(dt) {

       $.ajax({
           type: 'POST',
           data: dt,
           url: 'http://localhost:4528/WebSite1/WebService.asmx/InsertCommissionRecord',
           contentType: 'application/json; charset=utf-8',
           dataType: 'json',
           success: function (data, textStatus, XMLHttpRequest) {
               alert(data.d);
               alert(XMLHttpRequest);

           },
           error: function (XMLHttpRequest, textStatus, errorThrown) {
               alert(textStatus);
           }
       });
   }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:28:37.227

我不确定，但你没有执行该功能，试试这个：

```
alert(x());
$.B(x()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:32:47.733

代替

```
$.B(x); 
```

立即调用 x() 和 B() ：

```
B(x()); 
```

* * *

为了能够`B()`像这样使用：`$.B()`您需要将您的函数添加到 jQuery 的`$`：

```
$.B = function(){... 
```

或者

```
jQuery.B = function(){... 
```

但一般不建议污染`$`——使用自己的命名空间要好得多。

请参见此处：[在 jquery 中是否可以创建命名空间](https://stackoverflow.com/questions/527089/is-it-possible-to-create-a-namespace-in-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:33:53.880

尝试在没有“$.”的情况下调用 B 函数`B()`，就像任何简单函数一样。

此外，您可以添加一个`alert(dt)`内部 B() 函数，以检查参数中的数据。

# android - 在 android 的 twitter 和 facebook 上分享文本/图像

> ID：11540239
> 
> 赞同：2
> 
> 时间：2012-07-18T11:26:10.993
> 
> 标签：android, facebook, twitter

我已经开发了我的新闻应用程序，现在我必须添加共享（facebook/twitter）选项来共享图像和文本。我已经搜索了很多但不清楚如何满足我的要求。实际上在共享按钮上我必须显示编辑文本和按钮和无论我们在单击应该共享的共享按钮上共享什么。我也已经通过了 SDK 和意图，但不符合我的要求`

```
String twitterUri = "http://m.twitter.com/?status=";
        String marketUri = "TESTING ";
        Intent shareOnTwitterIntent = new Intent(Intent.ACTION_VIEW,
                Uri.parse(twitterUri + marketUri));
        startActivity(shareOnTwitterIntent);. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:35:48.340

嘿，您可以从以下链接获取帮助以上传 Facebook 图片

[Android facebook SDK，用不同语言的个人资料将图片上传到墙上？](https://stackoverflow.com/questions/10629613/android-facebook-sdk-upload-pictures-to-wall-with-profile-in-different-language/10630222#10630222)

而对于 Twitter，您需要在 twitpic 中上传它......为此，您必须使用 jar 文件......因为您不能在 Twitter 中发布图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:12:52.040

您可以使用 twitter4j-core-3.0.2.jar twitter4j-media-support-3.0.2.jar 库在 twitter 上共享图像和测试。例子

```
String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
 String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

 AccessToken a = new AccessToken(token, secret);
 Twitter twitter = new TwitterFactory().getInstance();
 twitter.setOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
 twitter.setOAuthAccessToken(a);

 ConfigurationBuilder cb = new ConfigurationBuilder();
 cb.setDebugEnabled(true).setOAuthConsumerKey(yourConsumerKey).setOAuthConsumerSecret(yourConsumerSeceret).setOAuthAccessToken(yourAccessToken).setOAuthAccessTokenSecret(yourAccessTokenSeceret);

 Configuration conf = cb.build();

 ImageUploadFactory factory = new ImageUploadFactory(conf);
 ImageUpload upload = factory.getInstance();
 String url = upload.upload(yourImage, yourCaptionWithImage); //image is a File Format and Caption is String 
```

参考链接：

1) [http://www.londatiga.net/it/how-to-send-image-to-twitpic-from-android/](http://www.londatiga.net/it/how-to-send-image-to-twitpic-from-android/)

2) [http://www.rqna.net/qna/wupzh-android-image-sharing-on-twitter-using-sdk.html](http://www.rqna.net/qna/wupzh-android-image-sharing-on-twitter-using-sdk.html)

# objective-c - 是否有任何工具可以在 iOS 应用程序运行时生成对象图？

> ID：11540240
> 
> 赞同：9
> 
> 时间：2012-07-18T11:26:16.537
> 
> 标签：objective-c, ios, cocoa-touch, xcode-instruments, object-graph

我知道有类模型工具（[OmniGraffle](http://www.omnigroup.com/products/omnigraffle/)、Doxygen）可以从现有的 Xcode 项目生成类模型图。但我正在寻找一种在模拟器或设备中运行 iOS 应用程序时生成对象图的工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-01-19T16:28:20.427

你可能感兴趣

[ObjectGraph-Xcode](https://github.com/vampirewalk/ObjectGraph-Xcode)

[objc_dep](https://github.com/nst/objc_dep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T12:20:17.460

我建议在`KSHObjcUML` [这里](https://github.com/kimsungwhee/KSHObjcUML)使用。

它创建了一个很好的交互式依赖关系图，以便在您的浏览器中进行分析。 [![在此处输入图像描述](../Images/2f060f93588b470e9e1720c05bc2c970.png)](https://i.stack.imgur.com/4NxoQ.png)

[在这里](http://alcatraz.io)使用 Alcatraz 最容易安装，它是 Xcode 7 的插件包管理器。安装插件就像单击绿色按钮一样容易。它甚至也支持 ObjectGraph-Xcode。

[![在此处输入图像描述](../Images/ef675aed7ee4ef68bcbd7617e60dd670.png)](https://i.stack.imgur.com/2T1H0.png)

# javascript - 用空格替换正则表达式字符

> ID：11540242
> 
> 赞同：1
> 
> 时间：2012-07-18T11:26:21.263
> 
> 标签：javascript, regex

我有一个javascript函数，每26个字母后强制一个空格

```
function nospaces(t)    
{
    if(t.value.match(/\S{27}/g))
    {    
        //alert('Sorry, you can not enter a word more than 26 characters long');
        t.value[5]=t.value.replace(/\S{27}/g,'');
    }
} 
```

现在我希望用户输入的每个第 27 个字母而不是空格应该替换为空格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:48:57.747

巧妙地使用正则表达式组，如果`\S{26}`后面`\S`跟着一个空格，则将整个匹配替换为第一个组，后面跟着一个空格；

`var foo = 'abcdefghijklmnopqrstuvwxyzab'.replace(/(\S{26})(\S)/, '$1 ');` 给出： `abcdefghijklmnopqrstuvwxyz b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:49:12.477

你可以这样做：

```
var string = 'abcdefghijklmnopqrstuvwxyz0abcdefghijklmnopqrstuvwxyz0hjh...'; 
// 0 is 27th
string = string.replace(/(\S{26})\S/g, '$1 '); 
```

我不确定这是否是最佳做法，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:49:15.863

```
function nospaces(t)    
{
     return t.replace(/\S{27}(?=\S)/g, '$& ');
} 
```

如果该序列后跟一个非空白字符，则将 27 个字符的序列替换为后跟一个空格的 27 个字符序列。

# c# - 是否可以使用 C# 为网站更改浏览器图标（在任务栏中）？

> ID：11540245
> 
> 赞同：0
> 
> 时间：2012-07-18T11:26:31.273
> 
> 标签：c#, asp.net, browser

我的客户要求我**将默认浏览器徽标更改为网站徽标（在任务栏中）**。我已经搜索了实现它的各种方法。但是我所有的路径都出错了。我知道**C# ASP 网站是否可行**。请帮我完成这个。

![在此处输入图像描述](../Images/b7321c184bd13f7dcb29ff591fc01933.png)

我不知道这是不是一个正确的问题。如果你说它的可能性，它可能对我很有帮助。

谢谢，拉克什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:28:39.920

这是不可能的。

浏览器图标是为该特定软件、该操作系统选择的图标。

您可以设置 a `favicon`，这在某些浏览器中可能会更改软件图标，但这不是您能够始终如一地执行的操作。

# gwt - 如何使用带有 hashbang URL（在 GWT 中）的页内 HTML 锚？

> ID：11540247
> 
> 赞同：2
> 
> 时间：2012-07-18T11:26:36.380
> 
> 标签：gwt, anchor, gwt-platform, hashbang, gwt-places

我在实现页内 HTML 锚点时遇到了一点问题，同时还通过 hashbang 获得了可收藏的 URL。描述很简单：

*   我访问了我的应用程序的一些 URL：[http ://www.mypage.com/Test.html#!mycontent](http://www.mypage.com/Test.html#!mycontent)

在这个页面上有很多文本，我需要一些 HTML 锚点来导航。在旧式 HTML 中，我会写`<a href="#myAnchor">AnchorText</a>`.

*   但是当我在我的 GWT 应用程序中单击此链接时，URL 更改为：[http ://www.mypage.com/Test.html#myAnchor](http://www.mypage.com/Test.html#myAnchor)

GWT 平台识别出更改并将我扔回我的`DefaultPlace`. 这很清楚，因为它无法将 URL 与演示者相关联。

所以现在（简单的）问题是：如何在使用页内导航的同时拥有 hashbang URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:24:39.067

你如何构建你的锚？
如果您是静态执行此操作，为什么现在只添加`!`到 href？：
`<a href="!#myAnchor">AnchorText</a>`

**更新**：好的，`Anchor`您可以使用`Hyperlink`or`InlineHyperlink`并将`targetHistoryToken`值设置为**#!myAnchor** ，而不是普通的：

```
<g:InlineHyperlink ui:field="diversityLink" targetHistoryToken="!#myAnchor">MyAnchor</g:InlineHyperlink> 
```

# listview - 从串口向列表视图添加项目时出错..

> ID：11540250
> 
> 赞同：-1
> 
> 时间：2012-07-18T11:26:46.350
> 
> 标签：listview, serial-port, modem

我正在读取串行端口以读取 gsm 调制解调器中存在的消息，然后在列表视图中显示它们。但我最终得到了一个包含冗余项目的列表视图。我无法理解为什么会这样..

```
{
        port.DiscardOutBuffer();
        port.DiscardInBuffer();
        string res;
        Thread.Sleep(5000);
        res = port.ReadExisting();
        ShortMessageCollection messages = new ShortMessageCollection();
        Regex r = new Regex(@"\+CMGL: (\d+),""(.+)"",""(.+)"",(.*),""(.+)""\r\n(.+)\r\n");
        Match m = r.Match(res);
        while (m.Success)
        {
            ShortMessage msg = new ShortMessage();

            msg.Index = m.Groups[1].Value;
            msg.Status = m.Groups[2].Value;
            msg.Sender = m.Groups[3].Value;
            msg.Alphabet = m.Groups[4].Value;
            msg.Sent = m.Groups[5].Value;
            msg.Message = m.Groups[6].Value;
            messages.Add(msg);
            m = m.NextMatch();
            objShortMessageCollection = (ShortMessageCollection)messages;
            foreach (ShortMessage mesg in objShortMessageCollection)
            {
                ListViewItem item = new ListViewItem(new string[] {mesg.Index, mesg.Sender, mesg.Message, mesg.Sent});
                item.Tag = mesg;
                lvwMessages.Items.Insert(0, item);
            }
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T05:46:18.867

使用以下代码删除冗余：

```
 lvwMessages.Sorting = SortOrder.Descending;
            int i = 0;
            while (i < lvwMessages.Items.Count - 1)
            {
                if (lvwMessages.Items[i].Tag == lvwMessages.Items[i + 1].Tag)
                    lvwMessages.Items[i + 1].Remove();
                else
                    i++;
            } 
```

# objective-c - IOS重复接口定义

> ID：11540253
> 
> 赞同：2
> 
> 时间：2012-07-18T11:27:08.387
> 
> 标签：objective-c, ios, interface

您好，我的 .h 文件中有以下代码

```
import <UIKit/UIKit.h>

@interface NSFont : NSObject <NSCoding> {

}

@end

@interface NSParagraphStyle : NSObject <NSCoding> {

}

@end 
```

我得到了那个错误：

> 错误：类“NSParagraphStyle”的重复接口定义

正如某些用户所指出的，我没有包含，也没有重复

main.m 进口

```
#import <UIKit/UIKit.h> 
```

首选项

```
#ifdef __OBJC__
    #import <Foundation/Foundation.h>
    #import <UIKit/UIKit.h>
#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:47:03.523

NSParagraphStyle 已添加到最新（未发布）的 iOS 版本中。所以你不需要自己定义它。您可能需要更改名称，在这种情况下不要使用 NS 作为前缀。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T11:45:46.573

`NSParagraphStyle`已经存在（[见这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html)）。

任何你为什么要使用`NS`命名空间 - 如果你想创建自己的类，创建你自己的命名空间并在你的类名之前加上它（即`MHParagraphStyle`），这样你的段落样式类就不会与内置的类冲突:)

# service-broker - Service Broker 教程——一台机器上的两个 SQL Server 实例。怎么走路线？

> ID：11540257
> 
> 赞同：1
> 
> 时间：2012-07-18T11:27:33.107
> 
> 标签：service-broker

我正在关注 MSDN 中的[Completing a Conversation Between Instances](http://msdn.microsoft.com/en-us/library/bb839483%28v=sql.105%29)教程。第[2 课：创建启动器数据库](http://msdn.microsoft.com/en-us/library/bb839497%28v=sql.105%29)（最后）展示了如何在启动器站点创建路由（缩短）：

```
...
USE InstInitiatorDB;
CREATE ROUTE InstTargetRoute
WITH SERVICE_NAME =
       N'//TgtDB/2InstSample/TargetService',
     ADDRESS = N'TCP://MyTargetComputer:4022';

...

USE msdb;
CREATE ROUTE InstInitiatorRoute
WITH SERVICE_NAME =
       N'//InstDB/2InstSample/InitiatorService',
     ADDRESS = N'LOCAL' 
```

和[第 3 课：完成目标对话对象](http://msdn.microsoft.com/en-us/library/bb839486%28v=sql.105%29)在目标实例上执行相同的操作：

```
USE InstTargetDB;
CREATE ROUTE InstInitiatorRoute
WITH SERVICE_NAME =
       N'//InstDB/2InstSample/InitiatorService',
     ADDRESS = N'TCP://MyInitiatorComputer:4022';

...

USE msdb
CREATE ROUTE InstTargetRoute
WITH SERVICE_NAME =
        N'//TgtDB/2InstSample/TargetService',
     ADDRESS = N'LOCAL'; 
```

但是，本教程假定 SQL Server 实例在单独的硬件上运行。如果两个 SQL Server 实例在同一台机器上运行，我应该如何更改路由或其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T20:40:39.207

两个实例不能共享监听端口。在第 1 课中，你有这个：

```
...
CREATE ENDPOINT InstTargetEndpoint
STATE = STARTED
AS TCP ( LISTENER_PORT = 4022 )
... 
```

在第 2 课中，你有这个：

```
...
CREATE ENDPOINT InstInitiatorEndpoint
STATE = STARTED
AS TCP ( LISTENER_PORT = 4022 )
... 
```

这将不起作用，因为两个实例都配置为侦听同一 TCP 端口。一个必须是不同的。让目标在 4023 上监听：

```
...
CREATE ENDPOINT InstTargetEndpoint
STATE = STARTED
AS TCP ( LISTENER_PORT = 4023 )
... 
```

那么从发起者到目标的路由现在必须指定端口 4023：

```
...
CREATE ROUTE InstTargetRoute
WITH SERVICE_NAME =
       N''//TgtDB/2InstSample/TargetService'',
     ADDRESS = N''TCP://MyTargetComputer:4023'';';
... 
```

其他一切都保持不变。

# ajax - 需要一些帮助结合 2 个 jQuery 脚本和行为

> ID：11540260
> 
> 赞同：0
> 
> 时间：2012-07-18T11:27:35.890
> 
> 标签：ajax, jquery, post, character-encoding

我需要使用以下 2 个脚本的组合，但尽管到目前为止我已经完成了所有组合，但我无法让它 100% 工作。

我使用颜色框来显示产品详细信息页面，其中有一个包含各种字段的表单，用于将项目添加到购物车。提交表单后，我想显示一个警报，然后关闭颜色框，以便基础页面（在最前面打开颜色框）保持原样。

有了这个脚本

```
$("#productadd").submit(function(){ // WORKS FINE EXCEPT THE ENCODING
  $.post(
    $(this).attr('action'),
    $(this).serialize(),
    function(data){
      alert('Product was added to your order');  
    $().colorbox.close();
}); 
```

除了在我的情况下是 iso-8859-7（希腊语）的编码之外，一切正常。如果我使用这个脚本，那么编码是可以的，但是帖子是使用默认行为进行的，重定向到表单操作中定义的 url。

```
 $("#productadd").submit(function(){ //ENCODING OK, COLORBOX.CLOSE() AND ALERT FAIL
         $.ajax({
            data: data,
            type: "POST",
            url: $(this).attr('action'),
            dataType: 'json',
            beforeSend : function(xhr) {
                xhr.setRequestHeader('Accept', "text/html; charset=iso-8859-7");
            },
            success: function(json) {
                alert('Product added to cart!'),  
                $().colorbox.close(),
                itemAddCallback(json);
            },
            error: function (xhr, textStatus, errorThrown) {
                $("#error").html(xhr.responseText);
            }
        }); 
```

如果有 xhr.setRequestHeader('Accept', "text/html; charset=iso-8859-7") 的 jQuery 等效项，我会非常乐意使用它。另外，我将什么声明为数据：所以我没有收到“未定义数据”错误？（尽管有错误，日期提交很好）。

**更新**：在到目前为止回答的人的各种建议之后，这就是我的代码的样子：

```
 $("#productadd").submit(function(){ 
         $.ajax({
            data: $(this).serialize(),
            type: "POST",
            url: $(this).attr('action'),
            dataType: 'text',
            mimeType: "text/html; iso-8859-7", 
            success: function() {
                alert('Item added to your order'),  
                $().colorbox.close();
            },
            error: function (xhr, textStatus, errorThrown) {
                $("#error").html(xhr.responseText);
            }
        }); 
```

我唯一的问题是，虽然它提交并显示警报等，但提交的数据是以 utf-8 而不是 iso-8859-7 编码的，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:17:17.210

在您作为数据发送的简写 POST 请求`$(this).serialize()`中，所以我想您想在另一个请求中发送相同的表单数据。

要调试请求，请使用您的浏览器网络面板并查看请求是否实际触发以及响应是什么（F12 然后 Net > XHR）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:01:56.863

请查看文档： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

查找**mimeType**属性。

```
mimeType（添加 1.5.1）字符串

用于覆盖 XHR mime 类型的 mime 类型。

```

因此，您需要添加以下内容：

```
$.ajax({
    data: data,
    type: "POST",
    mimeType: "text/html; charset=iso-8859-7"... 
```

# sql - 更新由“AS select”命令创建的表

> ID：11540261
> 
> 赞同：1
> 
> 时间：2012-07-18T11:27:36.343
> 
> 标签：sql, oracle, view

我使用“AS SELECT”语句创建了一个表。

```
CREATE TABLE TEST AS 
SELECT ... 
from (MANY TABLES) 
WHERE (MANY CONDITIONS); 
```

如何确保任何表列的更新也进入 TEST？

还是我必须使用视图？（我不想这样做，因为需要一个触发器来进行测试）

除了使用 VIEW 之外，还有其他可用的选项吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:31:05.520

您需要创建一个视图。CREATE TABLE AS SELECT 只是在执行时复制数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:36:27.297

研究将表测试创建为物化视图。触发器可以放在这些上面，也有各种更新选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:32:57.967

根据您的数据库系统，您也可以使用[触发器](http://en.wikipedia.org/wiki/Database_trigger)将值插入另一个表中。那就是如果您需要类似近实时同步的东西。或者您可以进行每日/每周/...批量同步。

由于我对 Oracle 不太熟悉，因此您应该查看他们的文档以获取详细说明。

# iphone - 如何使用 iCloud 在 iPhone 应用程序中备份和恢复 .db 数据库

> ID：11540266
> 
> 赞同：2
> 
> 时间：2012-07-18T11:27:49.520
> 
> 标签：iphone, ios, icloud, restore

我有一个应用程序，我在其中使用 SQLite 数据库（.db）来存储数据。现在我们想使用 iCloud 在设备之间进行同步。有什么选择吗？我发现喜欢使用 XML 文件从 iCloud 存储和恢复它。或为此使用核心数据。

但正如我所说，我的应用程序已经在 SQLite 中开发。我不想将整个数据库迁移到核心数据。如果可能，请为我提供任何其他解决方案

非常感谢任何帮助。

谢谢，

# asp.net-mvc-2 - 将应用程序托管为 IIS7 中的默认站点

> ID：11540267
> 
> 赞同：0
> 
> 时间：2012-07-18T11:27:52.067
> 
> 标签：asp.net-mvc-2, iis-7

我在 IIS7.0 的 wwwroot 文件夹中的默认网站内将 asp.net mvc 应用程序托管为一个名为“samples”的应用程序。网址 www.website.com/samples 将显示应用程序，但我希望网址 www.website.com 显示应用程序。

我已将默认文档设置如下。

```
<defaultDocument enabled="true">
<files>
<clear />
<add value="Index.aspx" />
</files>
</defaultDocument> 
```

我也将 Index.aspx 放在根文件夹中。我收到以下错误

文件“/Views/Shared/Site.Master”不存在。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage" %> 
```

我已经搜索并发现设置默认文档会起作用，但会出现上述错误。

谁能建议最好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:34:29.480

您的应用程序应部署到配置网站的根文件夹：

![在此处输入图像描述](../Images/f6ee3d8e3ddf3c5744bebc38e2cf4626.png)

所以在这个例子中，你`c:\inetpub\wwwroot`直接部署你的应用程序。没有子文件夹。

# css - 防止包装菜单项

> ID：11540268
> 
> 赞同：36
> 
> 时间：2012-07-18T11:27:57.643
> 
> 标签：css

我为我的网站创建了一个水平导航（菜单）栏。当我将窗口的大小重新调整为小于栏的大小时，菜单项会被包装。我希望菜单保持不变（也就是说，它应该保持水平），而不管窗口的大小，因为它通常可以在 Google 等网站上看到。我尝试了在各种论坛上发布的各种方式，包括这个，但对我没有任何帮助。下面我粘贴了菜单的 CSS 代码。

```
CSS CODE:

#cssmenu ul { margin: 0; padding: 0;}
#cssmenu li { margin: 0; padding: 0;}
#cssmenu a { margin: 0; padding: 0;}
#cssmenu ul {list-style: none;}
#cssmenu a {text-decoration: none;}
#cssmenu {height: 70px; background-color: #6699CC; box-shadow: 0px 2px 3px rgba(0,0,0,.4); }

#cssmenu > ul > li {
    float: left; 
    margin-left: 30px;
    position: relative;

}

#cssmenu > ul > li > a {
    color: #FFFFFF;
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    line-height: 70px;
    padding: 15px 20px;
-webkit-transition: color .15s;
   -moz-transition: color .15s;
     -o-transition: color .15s;
        transition: color .15s;

}

#cssmenu > ul > li > a:hover {color: #00FF00; }
body.home li.home, body.tech li.tech {font-weight:bold; }

#cssmenu > ul > li > ul {
    opacity: 0;
    visibility: hidden;
    padding: 16px 0 20px 0;
    background-color: #FFFFFF;
    text-align: left;
    position: absolute;
    top: 55px;
    left: 50%;
    margin-left: -90px;
    width: 180px;
-webkit-transition: all .3s .1s;
   -moz-transition: all .3s .1s;
     -o-transition: all .3s .1s;
        transition: all .3s .1s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu > ul > li:hover > ul {
    opacity: 1;
    top: 65px;
    visibility: visible;
}

#cssmenu > ul > li > ul:before{
    content: '';
    display: block;
    border-color: transparent transparent rgb(250,250,250) transparent;
    border-style: solid;
    border-width: 10px;
    position: absolute;
    top: -20px;
    left: 50%;
    margin-left: -10px;
}

#cssmenu > ul ul > li { position: relative;}

#cssmenu ul ul a{
    color: rgb(50,50,50);
    font-family: Verdana, 'Lucida Grande';
    font-size: 13px;
    background-color: rgb(250,250,250);
    padding: 5px 8px 7px 16px;
    display: block;
-webkit-transition: background-color .1s;
   -moz-transition: background-color .1s;
     -o-transition: background-color .1s;
        transition: background-color .1s;
}

#cssmenu ul ul a:hover {background-color: rgb(240,240,240);}

#cssmenu ul ul ul {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    top: -16px;
    left: 206px;
    padding: 16px 0 20px 0;
    background-color: rgb(250,250,250);
    text-align: left;
    width: 160px;
-webkit-transition: all .3s;
   -moz-transition: all .3s;
     -o-transition: all .3s;
        transition: all .3s;
-webkit-border-radius: 5px;
   -moz-border-radius: 5px;
        border-radius: 5px;
-webkit-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
   -moz-box-shadow: 0px 1px 3px rgba(0,0,0,.4);
        box-shadow: 0px 1px 3px rgba(0,0,0,.4);
}

#cssmenu ul ul > li:hover > ul { opacity: 1; left: 196px; visibility: visible;}

#cssmenu ul ul a:hover{
    background-color: rgb(205,44,36);
    color: rgb(240,240,240);
} 
```

HTML 代码：

```
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <link href="styles.css" rel="stylesheet" type="text/css">
 <title>Home</title>
</head>
<body class="home" background="teenscorner1.jpg" text="#FFFFFF" style="background-attachment: fixed">
 <div id='cssmenu'>
  <ul>
   <li class="home"><a href='home.jsp'><span>Home</span></a></li>
   <li class="tech"><a href='tech.jsp'><span>Tech Specs</span></a></li>
   <li><a href='#'><span>Fun</span></a></li> 
   <li><a href="#"><span>Deals</span></a></li>
   <li><a href="#"><span>Wheelz</span></a></li>
   <li><a href='#'><span>About</span></a></li>
  </ul>
 </div>
</body> 
```

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-18T11:46:46.597

当您不知道宽度时，因为链接的宽度可能不同，您可以`display: inline-block`在列表项`<li>`和`white-space:nowrap`列表本身上使用`<ul>`

[http://jsfiddle.net/Frd8J/](http://jsfiddle.net/Frd8J/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T11:36:20.287

您应该设置一个`min-width`for `#cssmenu > ul`，它允许您的所有菜单项适合。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-03T12:46:38.427

接受的答案在我的情况下不起作用，但@Ana 原始答案有效。我试图将此作为评论添加到她的答案中，但它不适合。按照建议在 UL 上设置最小宽度，根据需要将所有 LI 项目带回一行，但该行延伸到包含 div 的右侧。我在父 div 中添加了相同的最小宽度，我得到了我想要的，所有 LI 在容器内的一行中。作为最后一步，我从 UL 中删除了 min-width （所以这是一个不同的，比 Ana 的更通用的答案）并且一切仍然有效。简而言之，如果您按照接受的答案中的说明在 css 中制作 UL nowrap 并且无论如何它都会换行，那么请确保您为列表提供足够的宽度，以便它不需要换行。另一种增加宽度的方法（不使用 min-width）也是增加包含 div 中 UL 下方的内容区域的宽度。我的案例是一个选项卡 DIV，LI 是顶部的选项卡。每个选项卡下面都有内容。当下面的内容足够宽时，LI 已经排成一排。我本可以在每个选项卡内容上设置一个最小宽度，但对我来说，将它放在外部容器上一次效果更好。HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-06T00:44:07.010

我假设这些是你的导航栏项目

```
<li class="home"><a href='home.jsp'><span>Home</span></a></li>
<li class="tech"><a href='tech.jsp'><span>Tech Specs</span></a></li>
<li><a href='#'><span>Fun</span></a></li> 
<li><a href="#"><span>Deals</span></a></li>
<li><a href="#"><span>Wheelz</span></a></li>
<li><a href='#'><span>About</span></a></li> 
```

如果你把它们像这样

```
<li class="home"><a href='home.jsp'><span>Home</span></a></li>&nbsp;<li class="tech"><a href='tech.jsp'><span>Tech Specs</span></a></li>&nbsp;<li><a href='#'><span>Fun</span></a></li>&nbsp;<li><a href="#"><span>Deals</span></a></li>&nbsp;<li><a href="#"><span>Wheelz</span></a></li>&nbsp;<li><a href='#'><span>About</span></a></li> 
```

这就是你所要做的就是将它们全部连接在一起，在 li 结束和开始标签之间没有空格，现在这将显示它们全部在你加载页面上的导航项目之间没有空格，所以你可能不想要它们像它的一个条一样在视觉上连接起来，所以 iv 还在 li 结束和开始标签之间放置一个空格的代码，这将在您加载的屏幕上视觉上为您提供所有导航标签之间的单个空格，但它们仍将保持联系在一起因此，如果您使屏幕变窄，则不会放样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-18T15:04:58.650

我的菜单项换行到下一行时遇到了同样的问题。它做了一些改变。首先，我必须将`<ul>`最大高度和溢出设置为隐藏。然后我只需要为父容器设置一个宽度。

在我的例子中，由于设计是响应式的并且可用区域发生了变化（因为菜单的两侧都是具有预设硬宽度的元素），我不得不随着它的增长而扩展给定的区域。

```
#primary-menu {
  display: none;
}

@media screen and (min-width: 59em) {
  #primary-menu {
    display: inline-block;
    width: 74%;
  }
}

@media screen and (min-width: 64em) {
  #primary-menu {
    width: 78%;
  }
}

@media screen and (min-width: 78.75em) {
  #primary-menu {
    width: 83%;
  }
}

ul {
  max-height: 53px;
  overflow: hidden;
}
```

```
<div id="primary-menu" class="menu">
  <ul class="menu menu__navigation--primary">
    <li class="first leaf active-trail">
      <a href="/equipment" class="active-trail active">Equipment</a>
    </li>
    <li class="leaf">
      <a href="/solutions">Solutions</a>
    </li>
    <li class="leaf">
      <a href="/services">Services</a>
    </li>
    <li class="leaf">
      <a href="/locations">Locations</a>
    </li>
    <li class="leaf">
      <a href="/our-company">Our Company</a>
    </li>
    <li class="last leaf">
      <a href="/contact-us">Contact Us</a>
    </li>
  </ul>
</div>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-12-09T11:59:26.770

你应该把“display:flex”给“ul”标签

# php - 从使用 Mozilla Pdf Js 生成的浏览器打印 pdf

> ID：11540273
> 
> 赞同：0
> 
> 时间：2012-07-18T11:28:22.407
> 
> 标签：php, javascript, jquery, pdf, mozilla

我最近使用[Pdf JS](https://github.com/mozilla/pdf.js)来查看 pdf，有没有办法用这个脚本打印所有文档，或者有另一种方式打印这些文档。实际上我们可以使用`window.print`javascript ，但是在 Pdf JS 中，我逐页查看我的 pdf，因此无法用于`window.print`打印整个文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:59:58.830

这目前尚未实现，但该功能正在 bugzilla 上作为[https://bugzilla.mozilla.org/show_bug.cgi?id=748935进行跟踪](https://bugzilla.mozilla.org/show_bug.cgi?id=748935)

干杯，

乔纳森

# android - 如何在android中保存图像和表面视图？

> ID：11540274
> 
> 赞同：5
> 
> 时间：2012-07-18T11:28:24.433
> 
> 标签：android, android-camera, augmented-reality

当我单击按钮时，表面和图像一起保存，我尝试了以下代码

```
camera.takePicture(shutterCallback, rawCallback, jpegCallback);
ShutterCallback shutterCallback = new ShutterCallback() 
{
    public void onShutter() 
    {
        Log.d(TAG, "onShutter'd");
    }
};

PictureCallback rawCallback = new PictureCallback() 
{
    public void onPictureTaken(byte[] data, Camera camera) 
    {
        Log.d(TAG, "onPictureTaken - raw");
    }
};

PictureCallback jpegCallback = new PictureCallback() 
{
    public void onPictureTaken(byte[] data, Camera camera) 
    {
        try 
        {
            File root = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM),"Camera");
            if (!root.exists()) 
            {
                root.mkdirs();
            }

            FileOutputStream f = new FileOutputStream(new File(root,System.currentTimeMillis()+".jpg"));
            int len1 = data.length;
            f.write(data,0, len1);
            f.close();
        }
        catch (Exception e) 
        {
            e.printStackTrace();
        } 
        finally 
        {
        }
    }
 }; 
```

通过此代码仅获取表面，是否有可能将表面与图像一起保存？如果有人知道请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T03:55:12.667

您尝试使用此示例。如

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.Environment;
import android.util.AttributeSet;
import android.util.Log;
import android.view.KeyEvent;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.widget.Toast;

public class FingerpaintView extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "FingerpaintView";

    private Paint foregroundPaint;
    private Paint backgroundPaint;
    private int width, height;
    private int lastTouchX, lastTouchY;
    private Bitmap pictureBitmap;
    private Canvas pictureCanvas;
    private final Context context;

    public FingerpaintView(Context context) {
        super(context);
        this.context=context;
        init();
    }

    public FingerpaintView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context=context;
        init();
    }

    private void init() {
        setFocusableInTouchMode(true);
        getHolder().addCallback(this);
        foregroundPaint = new Paint();
        foregroundPaint.setColor(Color.WHITE);
        foregroundPaint.setStrokeWidth(4);
        backgroundPaint = new Paint();
        backgroundPaint.setColor(Color.BLACK);
        lastTouchX = -1;
        lastTouchY = -1;
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final int x = (int) event.getX();
        final int y = (int) event.getY();
        if ((event.getAction() == MotionEvent.ACTION_DOWN) || (event.getAction() == MotionEvent.ACTION_MOVE)) {
            Log.d(TAG, "Touched " + x + "," + y);
            if ((lastTouchX != -1) && (lastTouchY != -1)) {
                pictureCanvas.drawLine(lastTouchX, lastTouchY, x, y, foregroundPaint);
                draw();
            }
            lastTouchX = x;
            lastTouchY = y;
        } else {
            lastTouchX = -1;
            lastTouchY = -1;
        }
        return true;
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_MENU){
            clear();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        this.width = width;
        this.height = height;
        if (pictureBitmap != null) {
            pictureBitmap.recycle();
        }
        pictureBitmap = Bitmap.createBitmap(width, height, Bitmap.Config.RGB_565);
        pictureCanvas = new Canvas(pictureBitmap);
        clear();
        draw();
    }

    public void draw() {
        final Canvas c = getHolder().lockCanvas();
        if (c != null) {
            c.drawBitmap(pictureBitmap, 0, 0, null);
            getHolder().unlockCanvasAndPost(c);
        }
    }

    public void clear() {
        pictureCanvas.drawRect(0, 0, width, height, backgroundPaint);
        draw();
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        if (pictureBitmap != null) {

            saveFile(pictureBitmap,"MyImage");

            pictureBitmap.recycle();
        }
        pictureBitmap = null;
    }

    private void saveFile(Bitmap bitmap, String name) {
        // String filename = String.valueOf(System.currentTimeMillis()) ;
        String extStorageDirectory;
        extStorageDirectory = Environment.getExternalStorageDirectory().toString();
        OutputStream outStream = null;
           final File file = new File(extStorageDirectory, name);
           try {
            outStream = new FileOutputStream(file);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
            outStream.flush();
            outStream.close();

            Toast.makeText(context, "Saved", Toast.LENGTH_LONG).show();

           } catch (final FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();
           } catch (final IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(context, e.toString(), Toast.LENGTH_LONG).show();
           }

          }

    } 
```

我希望你会有所帮助。

# java - 如何在布局的行中放置动态创建的按钮？

> ID：11540275
> 
> 赞同：0
> 
> 时间：2012-07-18T11:28:26.733
> 
> 标签：java, android, android-layout

我正在尝试使用 for 循环添加 24 个按钮。我试图每行放置四个大小相同的按钮，并希望看到下一组四个出现在它们下方。

我怎样才能做到这一点？

到目前为止，我没有工作的努力看起来像这样：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ScrollView sv = new ScrollView(this);
        LinearLayout layout = new LinearLayout(this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams
                  (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        layout.setWeightSum(12.0f);
        params.weight = 3.0f;
        layout.setOrientation(LinearLayout.HORIZONTAL);
        sv.addView(layout);
        for (int i = 0; i < 24; i++) {
            Button btn = new Button(this);
            btn.setText("Button");
            btn.setLayoutParams(params);
            layout.addView(btn);
        }
        this.setContentView(sv);
    } 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:32:54.217

为每一行添加一个垂直的 LinearLayout 怎么样？定义 Layout 的大小，并为每个按钮赋予 1 的权重

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:34:37.010

这是您添加所需内容的`Buttons`方式：

```
 layout.setOrientation(LinearLayout.VERTICAL);
    sv.addView(layout);
    for (int i = 0; i < 6; i++) {
         Linearlayout row = new LinearLayout(this);
         row.setLayoutParams(new LinearLayout.LayoutParams
                  (LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));    
         for (int  j = 0; j < 4; j++) {
                Button btn = new Button(this);
                LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams
                  (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                lp.weight = 1; 
                btn.setLayoutParams(lp); 
                btn.setText("Button");
                btn.setLayoutParams(params);
                row.addView(btn);
         }
         layout.addView(row);
    }
    this.setContentView(sv); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:40:58.697

试试Following，就当做基础Demo吧：

```
public class ABCActivity extends Activity {
int myid = 2001;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    RelativeLayout scrollHolder = new RelativeLayout(this);
    scrollHolder.setId(++myid);
    RelativeLayout.LayoutParams scrollHolderParams = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    scrollHolder.setLayoutParams(scrollHolderParams);
    scrollHolder.setBackgroundColor(Color.DKGRAY);
    scrollHolder.setGravity(Gravity.CENTER_VERTICAL);

    // ScrollView
    ScrollView scroll = new ScrollView(this);
    scroll.setId(++myid);
    scroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,
            LayoutParams.WRAP_CONTENT));
    scroll.setBackgroundColor(Color.GREEN);

    // RelativeLayout
    RelativeLayout etHolder = new RelativeLayout(this);
    etHolder.setId(++myid);
    RelativeLayout.LayoutParams etHolderParams = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    etHolder.setLayoutParams(etHolderParams);
    etHolder.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
    etHolder.setPadding(0, 0, 0, 25);

    // Creating EditTextes and Adding to etHolder AS you have done
    RelativeLayout rl2 = addEditText(etHolder, null, 1);
    RelativeLayout rl3 = addEditText(etHolder, rl2, 2);
    RelativeLayout rl4 = addEditText(etHolder, rl3, 3);
    RelativeLayout rl5 = addEditText(etHolder, rl4, 4);
    RelativeLayout rl6 = addEditText(etHolder, rl5, 5);
    RelativeLayout rl7 = addEditText(etHolder, rl6, 6);
    RelativeLayout rl8 = addEditText(etHolder, rl7, 7);
    RelativeLayout rl9 = addEditText(etHolder, rl8, 8);
    RelativeLayout rl10 = addEditText(etHolder, rl9, 9);
    RelativeLayout rl11 = addEditText(etHolder, rl10, 10);
    RelativeLayout rl12 = addEditText(etHolder, rl11, 11);
    RelativeLayout rl13 = addEditText(etHolder, rl12, 12);

    scroll.addView(etHolder); // adding RelativeLayout = etHolder to ScrollView = scroll

    scrollHolder.addView(scroll); // adding ScrollView = scroll to RelativeLayout = scrollHolder

    setContentView(scrollHolder);

}

// Method as you have done
private RelativeLayout addEditText(RelativeLayout objRLContent,
        RelativeLayout layoutAbove, int i) {

    RelativeLayout objRLEditText = new RelativeLayout(this);
    objRLEditText.setId(1100 + i);
    RelativeLayout.LayoutParams objRLEditTextParams = new RelativeLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    if (layoutAbove != null)
        objRLEditTextParams.addRule(RelativeLayout.BELOW,
                layoutAbove.getId());
    objRLEditText.setLayoutParams(objRLEditTextParams);
    objRLEditText.setPadding(8, 2, 8, 2);

    Button objBtn = new Button(this);
    objBtn.setId(1300 + i);
    RelativeLayout.LayoutParams objETDataParams = new RelativeLayout.LayoutParams(
            200, LayoutParams.WRAP_CONTENT);
    objBtn.setLayoutParams(objETDataParams);
    objBtn.setPadding(8, 0, 8, 0);
    objBtn.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 18);
    objBtn.setText("" + i);
    objBtn.setSingleLine(true);
    objRLEditText.addView(objBtn);
    objRLContent.addView(objRLEditText);

    return objRLEditText;

}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:00:17.657

您可以使用表格布局或网格布局

```
 TableLayout table = (TableLayout)findViewById(R.id.the_table);

    for(int j=0;j<3;j++){
         TableRow row = new TableRow(this);

         for (int i=0; i<4;i++){
              final Button Button = new Button(this);
              Button.setTag(row.getTag());
              Button.setText("x");
              Button.setWidth(30);
              Button.setHeight(10);
              row_UE.addView(Button);
         }
    } 
```

# c - 结构中的枚举：取消引用指向不完整类型的指针

> ID：11540283
> 
> 赞同：0
> 
> 时间：2012-07-18T11:29:05.303
> 
> 标签：c, enums, struct

我不确定我是否只是盲人，但我在以下代码中得到了这个指向不完整类型的解引用指针：标题：

```
enum foo {stuff1, stuff2, stuff3};

struct bar {
    enum foo e;
    int x;
    int y;
}; 
```

包含标头的文件：

```
void func(struct bar *b) {
    switch(b->e) {
    ...
    }
} 
```

错误发生在 switch 行中，b 上的代码完成也只为我提供了整数 x 和 y 而不是枚举。在阅读其他人关于此错误的问题时，我总是看到他们在尚未声明的地方使用了某些东西。但这里不是这种情况。那么为什么这段代码不能编译呢？

它被要求提供有问题的代码的完整示例。所以这里是：h文件：

```
enum commandType {ADD_TREE, DEL_TREE, //tree
               ADD_NODE, DEL_NODE, //node
               ADD_SEGM, DEL_SEGM, //segment
               ADD_SKEL, MRG_SKEL, DEL_SKEL,  //skeleton
               ADD_BRCH, JMP_BRCH, //branchpoint
               ADD_COMM, DEL_COMM, //comment
               CHG_NODE, CHG_TREE //change active
};

struct SkelCommand {
    enum commandType type;
    int32_t id;
    int32_t prevActiveId;
}; 
```

c文件：

```
struct stack *undoStack = NULL;

void undo() {
//popStack returns a void*
struct skelCommand *cmd = (struct skelCommand*) popStack(undoStack);

switch(cmd->type) {
    case ADD_TREE:
        break;
    case DEL_TREE:
        break;
    case ADD_NODE:
        break;
    case DEL_NODE:
        break;
    case ADD_SEGM:
        break;
    case DEL_SEGM:
        break;
    case ADD_SKEL:
        break;
    case MRG_SKEL:
        break;
    case DEL_SKEL:
        break;
    case ADD_BRCH:
        break;
    case JMP_BRCH:
        break;
    case ADD_COMM:
        break;
    case DEL_COMM:
    break;
    case CHG_NODE:
        break;
    case CHG_TREE:
        break;
    }
} 
```

在另一个 c 文件中：

```
extern struct stack *undoStack;

void initialize() {
    undoStack = newStack(4069);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:29:37.323

错字：

```
struct skelCommand *cmd = (struct skelCommand*) popStack(undoStack); 
```

但是`struct`是`SkelCommand`，大写`S`：

```
struct SkelCommand
{
    enum commandType type;
    int32_t id;
    int32_t prevActiveId;
}; 
```

因此，错误`struct skelCommand`是不完整的类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:38:35.347

~~您的结构中不需要 enum 关键字。~~

尝试：

```
struct bar {
    foo e;
    int x;
    int y;
} 
```

* * *

编辑：**以上是不正确的**，wildplasser 是正确的。实际问题似乎是您的**func**函数接受了**struct bar* b**。我在 VS2010 中使用 C 文件进行了测试，删除**struct**关键字可以解决您的问题。例如：

```
void func(bar *b) {
    switch(b->e) {
    ...
    }
} 
```

~~更多编辑：~~

 ~~原来 MS 认为是 C 和实际 C 是不一样的（至少在 VS2010 中）。请参阅下面的评论以获取正确答案。~~

# ipad - 将 Ipad 连接到控制器

> ID：11540284
> 
> 赞同：0
> 
> 时间：2012-07-18T11:29:11.780
> 
> 标签：ipad, wifi, rs485

我需要在我的 ipad 中运行一个应用程序，该应用程序必须与控制器进行无线通信。控制器通过串行端口和 RS485 端口进行通信。它没有wifi适配器。我有哪些选择？

一个想法是，我必须购买一个 wifi 到 RS485 适配器，我将其连接到我的控制器，然后我的 ipad 可以通过 wifi 适配器连接到控制器。这可行吗？我的怀疑是因为，我不确定 Ipad 是否有能力打开到远程 wifi 适配器（在控制器上）的原始套接字连接。

如果没有，那么还有哪些可供我使用的其他选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T19:15:48.030

如果您对相当直接的电子设备和编程感到满意，这就是我的做法。

我会忘记让他们直接交谈，而是使用互联网，您可以获得称为 Electric Imp 的廉价控制器，您可以创建代码以使用他们的在线门户将您的设备连接到互联网，设备本身使用 wifi 及其连接自己的安全VPN。

连接后，您可以创建自己的网页或应用程序来与他们的云对话，这具有额外的优势，您现在可以在任何可以连接互联网的地方控制您的设备，并且您的设备可以继续与互联网交互，即使在你的 iPad 关机了。

[http://electricimp.com](http://electricimp.com)

# android - 来自安卓设备的 Sim 信息

> ID：11540285
> 
> 赞同：0
> 
> 时间：2012-07-18T11:29:12.053
> 
> 标签：android, telephonymanager

我想通过编程方式从 android 设备中知道电话号码、注册名称等 sim 信息。我经历了[这个](https://stackoverflow.com/questions/2372757/access-the-sim-card-with-an-android-application)但没有取得任何成功。任何人都可以请提供一些帮助...提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:51:44.193

您可以试用此 API，但它不适用于所有设备：

```
TelephonyManager telephonyMgr = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE); 
        simNum = telephonyMgr.getLine1Number(); 
```

除此之外，您可以阅读 MCC\MNC、网络运营商和 IMEI，这可以帮助您识别设备\用户。

# ruby-on-rails - Heroku rails-problems ((syntax error, unexpected ',', expecting ')' in textarea-form-helper)

> ID：11540289
> 
> 赞同：1
> 
> 时间：2012-07-18T11:29:30.247
> 
> 标签：ruby-on-rails, ruby, heroku

我正在尝试将我的 rails 应用程序推送到 heroku cedar-stack 上。在我的本地机器上一切正常（Ruby 版本 1.9.3 和 rails 版本 3.2.6）

当我将我的应用程序推送到 heroku 时，我的 _post_form-partial 中出现以下错误（请参见下面的代码）：

```
/app/app/views/posts/_post_form.html.erb:9: syntax error, unexpected ',', expecting ')'
2012-07-18T11:25:36+00:00 app[web.1]: ...:id =>"textarea", :cols => "5", :rows => "8", :class => "inp...
2012-07-18T11:25:36+00:00 app[web.1]: ...                               ^
2012-07-18T11:25:36+00:00 app[web.1]: /app/app/views/posts/_post_form.html.erb:9: syntax error, unexpected ',', expecting ')'
2012-07-18T11:25:36+00:00 app[web.1]: ...a", :cols => "5", :rows => "8", :class => "inputx-large boxs...
2012-07-18T11:25:36+00:00 app[web.1]: ...                               ^
2012-07-18T11:25:36+00:00 app[web.1]: /app/app/views/posts/_post_form.html.erb:9: syntax error, unexpected ')', expecting keyword_end
2012-07-18T11:25:36+00:00 app[web.1]: ... => "inputx-large boxsizing") );@output_buffer.safe_concat('
2012-07-18T11:25:36+00:00 app[web.1]: ...                               ^): 
```

我真的不明白这里的问题。我究竟做错了什么？

```
<div id="inputfield_visible_wrapper">
    <div class="well">
        <input type="text" id="inputfield_visible" class="input-xlarge boxsizing" value="Create Posting here">
    </div>
</div>
<div id="form_hidden_wrapper">
    <%= form_for Post.new, :html => { :class => "well" } do |f| %>
        <%= render "shared/posting_information" %>
        <%= f.text_area (:content, :id =>"textarea", :cols => "5", :rows => "8", :class => "inputx-large boxsizing") %>
        <%= f.submit "Post", :disabled => true, :id => "submit_button", :class => "btn btn-primary" %>
        <%= submit_tag "Cancel", :class => "btn", :id => "cancel_button", :type => "button" %>
        <div class="characters_left_wrapper">
            <span id="characters_left">100</span> <span class="hidden-phone">Characters left</span>
        </div>
        <div class="clear"></div>
    <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T15:10:17.080

不要在括号前的方法上放置尾随空格：

```
<%= f.text_area (:content) %> 
```

坏的

```
<%= f.text_area(:content) %> 
```

好的

# perl - 如何在 perl 中停止自动字符串到数字的转换？

> ID：11540290
> 
> 赞同：-4
> 
> 时间：2012-07-18T11:29:32.243
> 
> 标签：perl

好吧，当我在备份中用“4.0”命名一个文件夹并将名称存储在数据库中时。当我使用 perl 从数据库中获取它时，我更改为“4”。如何停止自动转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T16:46:41.783

这里有几件事可能出错。

*   在将变量插入数据库之前，变量中的值可能已更改
*   数据库驱动程序可能认为它是一个数字并可能会更改它
*   数据库服务器可能会在存储之前对其进行更改
*   而且，同样的事情可能会在退出的路上发生。

检查每一件事，看看那里的价值变化。然后，专注于那部分并添加到您的问题中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:19:04.330

据我所知，你不能。您正在使用的 DBD 驱动程序（您没有指定）可能是用 XS 编写的，并且正在使用它自己的启发式方法来解决这个问题。最有可能的是，您最终必须在绑定时指定类型（例如 SQL_CHAR）以影响其启发式。

请记住：发布代码和详细信息，以便人们可以提供帮助。

# uitableview - numberOfRowsInSection 中 fetchedResultsController 的奇怪行为

> ID：11540292
> 
> 赞同：1
> 
> 时间：2012-07-18T11:29:36.013
> 
> 标签：uitableview, ios5, core-data

我的目标是通过填充 fetchedResultsController 上所有获取结果的数据来填充 tableview 的一部分。这是非常简单的，就像一个魅力。

我的小应用程序的第二部分是在同一张表的另一部分添加属性“价格”。它工作正常。

这是我用来实现的：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

        // Return the number of rows in the section.
    if (section == 1) {
        return 1;

    } else return [self.fetchedResultsController.fetchedObjects count];  

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

{

```
if (indexPath.section == 0) {
    static NSString *ci = @"CellTotal";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:ci];

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:0];
    float expense = 0;
    for (NSManagedObject *object in [sectionInfo objects]) {
        expense += [[object valueForKey:@"precio"] floatValue];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%f", expense];

    return cell;

} else {
    static NSString *ci = @"Cell";

    UITableViewCell *cell = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:ci];
    [self configureCell:cell atIndexPath:indexPath];   
    return cell;
} 
```

}

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath{

Gastos *g = (Gastos *)[self.fetchedResultsController objectAtIndexPath:indexPath];
cell.detailTextLabel.text = g.nombre;

NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
[f setMinimumFractionDigits:2];
[f setMaximumFractionDigits:2];

NSString *precio = [f stringFromNumber: g.precio];

cell.textLabel.text = precio; 
```

}

当我想更改表格视图中各部分的顺序时，问题就出现了。如果我想在第 0 节中显示总添加量，在第 1 节中显示 fetchedresults 列表，那么我的应用程序会因错误而崩溃：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“ *** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]”

关于我做错了什么的任何想法？非常感谢任何帮助，谢谢！

**更新** 这是代码破坏应用程序的地方：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath{

        Gastos *g = (Gastos *)[self.fetchedResultsController objectAtIndexPath:indexPath]; 
```

看起来像是在处理第一个获取的对象，但在第二个对象上失败了。我真的很纠结这个问题。我一直在调试，检查 fetch 控制器是否存在等，一切似乎都很好，但它坏了......我是一个菜鸟，不知道如何解决这个问题:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:51:17.773

您有一个包含 2 个部分的表格视图。第二部分由 FRC（只有一个部分）填充。因此，表格视图中的*第 1*部分对应于 FRC 中的*第 0 部分。*

您的`configureCell:atIndexPath:`方法使用表视图的 indexPath (section == 1)`objectAtIndexPath`调用，但必须使用 section == 0 调用。因此您必须像这样调整节号：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSIndexPath *frcIndexPath = [NSIndexPath indexPathForRow:indexPath.row inSection:(indexPath.section - 1)];
    Gastos *g = (Gastos *)[self.fetchedResultsController objectAtIndexPath:frcIndexPath];
} 
```

# cordova - phonegap.js 和 jq.ui.min.js 一起

> ID：11540296
> 
> 赞同：2
> 
> 时间：2012-07-18T11:29:42.620
> 
> 标签：cordova, appmobi

我正在尝试使用 appmobi 的[phoneGap XDK](http://www.appmobi.com/?q=node/153)制作应用程序。我想使用phoneGap库（phonegap.js）制作相机，以及我想使用jquery.ui.min.js库制作的应用程序中的所有其他东西（按钮等）。在模拟中我没有任何问题，但在 android 移动浏览器中它不起作用。我想知道我是否可以在 phoneGap XDK 程序中一起使用这两个库，如果可以，我怎样才能让它在 android 手机上工作？你的帮助对我很重要。谢谢你。

在我的 HTML 文件中，我想要这些库：

```
http://localhost:58888/_appMobi/appmobi.js
http://localhost:58888/_appMobi/xhr.js
http://localhost:58888/_appMobi/phonegap.js
jq.ui.min.js
all.js
js/jq.web.min.js 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T02:43:33.480

也许 appMobi JavaScript 引导库可以帮助您：[http ://dev.appmobi.com/?q=node/85](http://dev.appmobi.com/?q=node/85)

查看实施指南

# svn - 如何使用提交后挂钩导出提交修订？

> ID：11540298
> 
> 赞同：1
> 
> 时间：2012-07-18T11:29:58.070
> 
> 标签：svn, powershell, hook, visualsvn-server, post-commit

在提交后使用提交后挂钩导出特定的 Subversion 存储库分支可能会很方便。

例如，**在提交后更新网站**或更新开发分支以进行测试。

有没有这种钩子的说明或样本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:29:58.070

[在 Windows 环境（例如VisualSVN Server](http://www.visualsvn.com/server/) ）中为 Subversion 编写挂钩脚本的最佳选择是使用[Windows PowerShell](http://en.wikipedia.org/wiki/Powershell)脚本语言或良好的[Windows 批处理命令行](http://en.wikipedia.org/wiki/Windows_batch_file)。

下面是*post-commit.bat*和*post-commit.ps1*的示例代码，它们应该一起用于将提交的修订导出到`C:\Test`. 将它们放入您的存储库“钩子”文件夹中，例如`C:\Repositories\repository\hooks\`

***提交后.ps1***

```
# Store hook arguments into variables with mnemonic names
$repos = $args[0]
$rev   = $args[1]

# Build path to svn.exe
$svn = "$env:VISUALSVN_SERVER\bin\svn.exe"

# Build url to repository
$urepos = $repos -replace "\\", "/"
$url = "file:///$urepos/"

# Export repository revision $rev to the C:\test folder
&"$svn" export -r $rev --force "$url" c:\test 
```

***提交后.bat***

```
@echo off

set PWSH=%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe
%PWSH% -command $input ^| %1\hooks\post-commit.ps1 %1 %2  
if errorlevel 1 exit %errorlevel% 
```

# c++ - 软件电容器

> ID：11540300
> 
> 赞同：0
> 
> 时间：2012-07-18T11:30:04.507
> 
> 标签：c++, signal-processing

我需要使用软件电容器。

我有一个带有 n 个样本的信号。我需要过滤它。

是否有包含软件电容器和其他电子元件的 c++ 库（或单个函数）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:24:37.660

如果您想要的只是一个非常简单的函数来将自定义过滤器应用于样本数组，那么应该这样做......只需用更类似于适当方程式的东西替换电容器（）函数中的循环中的逻辑。

```
#include <stdio.h>
#include <math.h>

#define INRADS *3.1416/180.0

#define NUM_SAMPLES 1000

double capVoltage = 0;
//this is a simple (capacitor like) filter.
int capacitor(double* sample, long samples, double capacitorValue, double totalTime, double initialCapVoltage){

    capVoltage = initialCapVoltage;

    for (int i = 0; i<= samples-1; i++){ //loop through all the samples
        if (sample[i] > capVoltage){ //charge the cap
            //put your math in here, calculate voltages based on capacitorValue, totalTime and capVoltage
            //this next line is just for testing purposes
            capVoltage += 0.2;
        }
        if (sample[i] < capVoltage){ //discharge the cap
            //put your math in here, calculate voltages based on capacitorValue, totalTime and capVoltage
            //this next line is just for testing purposes
            capVoltage -= 0.2;
        }
        sample[i] = capVoltage;
        printf("Changed sample %d to %f \n", i, sample[i]);
    }

}

double* myVoltageSamples; //generic wave sample
double* myVoltageSamples2; //generic wave sample

int main(){

    myVoltageSamples = new double[NUM_SAMPLES]; //let's say this is 1 sample every millisecond for one second
    myVoltageSamples2 = new double[NUM_SAMPLES]; //let's say this is 1 sample every millisecond for one second

    for (int i = 0; i<= NUM_SAMPLES-1; i++){ //put some data in the sample array
        myVoltageSamples[i] = sin( ( i ) INRADS );      // a simple, generic sin wave
        myVoltageSamples2[i] = myVoltageSamples[i];
        printf("Adding %f to the sample.\n", myVoltageSamples[i]);
    }
    //we now have a generic signal

    //apply your basic (capacitor) filter
    capacitor(myVoltageSamples2, NUM_SAMPLES, 0.001, 1000, 0); //1mF cap, one second, start voltage = 0

    //compare the start and finish:
    printf("first signal:\n");
    for (int i = 0; i<= NUM_SAMPLES-1; i++){ //put some data in the sample array
        for (int j = 0; j<=((int)(myVoltageSamples[i]*20))+20-1; j++){
            printf(".");
        }
        printf("X\n");
    }

    printf("second signal:\n");
    for (int i = 0; i<= NUM_SAMPLES-1; i++){ //put some data in the sample array
        for (int j = 0; j<=((int)(myVoltageSamples2[i]*20))+20-1; j++){
            printf(".");
        }
        printf("X\n");
    }

    delete myVoltageSamples;
    delete myVoltageSamples2;

} 
```

# orm - Symfony/Doctrine 中的 SQL 注入

> ID：11540302
> 
> 赞同：4
> 
> 时间：2012-07-18T11:30:11.167
> 
> 标签：orm, symfony, doctrine-orm, sql-injection

使用参数而不是直接在查询字符串中放置值是为了防止 SQL 注入攻击，并且应该始终这样[做](http://symfony.com/doc/current/book/doctrine.html)：

```
... WHERE p.name > :name ...
->setParameter('name', 'edouardo') 
```

这是否意味着如果我们使用这样的参数，我们将始终受到 SQL 注入的保护？在使用表单（FOS 的注册表单）时，我将`<b>eduardo</b>`其替换为带有标签的数据库。我真的不明白为什么使用参数可以防止 SQL 注入...

为什么标签会这样持久化到数据库中？有没有办法通过使用 Symfony 的验证组件来删除标签？

在 Symfony 中将数据持久化到数据库之前，我们应该使用什么通用技巧或方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T11:54:28.187

从阅读[什么是 SQL 注入](https://www.google.co.uk/search?sugexp=chrome,mod=1&sourceid=chrome&ie=UTF-8&q=what%27s%20sql%20injection?)开始。

当放入 SQL 的值改变查询时，就会发生 SQL 注入攻击。结果，查询执行了它打算执行的其他操作。

示例将使用**edouardo' OR '1'='1**作为值，这将导致：

```
WHERE p.name > 'edouardo' OR '1'='1' 
```

（因此条件始终为真）。

"<b>eduardo</b>" 是一个完全有效的值。在某些情况下，您可能希望将其保存为已提交（例如内容管理系统）。当然，当您从数据库中获取 HTML 并直接输出时，它可能会破坏您的 HTML。这应该由您的模板引擎解决（树枝会自动转义它）。

如果您想在将数据从表单传递到您的实体之前处理数据，请使用[数据转换器](http://symfony.com/doc/current/cookbook/form/data_transformers.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T11:51:52.640

如果您在创建请求时使用参数而不是串联，则程序能够区分 SQL 关键字和值。因此，它可以安全地转义可能包含恶意 SQL 代码的值，这样该恶意软件就不会被执行，而是存储在字段中，就像它应该的那样。

HTML 代码注入是另一个问题，与数据库无关。这个问题在显示值时解决了，通过使用自动输出转义，它将显示`<b>eduardo</b>`而不是**eduardo**。这样，任何恶意的 js / html 代码都不会被解释：它会被显示出来。

# zend-framework - 测试策略。在 zend 框架控制器集成/冒烟测试中 PHPUnit 模拟

> ID：11540303
> 
> 赞同：3
> 
> 时间：2012-07-18T11:30:18.083
> 
> 标签：zend-framework, tdd, phpunit, integration-testing

我有一个复杂的后端应用程序，使用 zf 1.11.11 和 phpunit 3.5.15。该应用程序具有一些复杂的通信组件（soap、rest 等）。在 CIS 或开发测试环境中，我必须模拟此模型，因为我无法建立连接或向生产性第 3 方后端发出请求。因此，模拟单元测试层的效果非常好。全面覆盖 - 没问题。问题是我不能在控制器集成测试期间使用这种技术。它是一个完全隐藏模型的更高层。所以我想在这一点上注入模拟是不可能的。一方面这是正确和好的，因为它是集成测试的本质，另一方面我对控制器测试的覆盖率非常低。

问题总结：

*   我无法创建与组件通信的测试服务（高成本）
*   在控制器测试期间我无法注入组件模拟（我只设置请求数据并触发调度程序）
*   我对控制器的覆盖率很低

我已经看到了一个将所有内容作为插件实现的解决方案。这样一些命名空间重定向可以指向模拟插件。但我不认为这是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T18:36:26.610

修复可测试类的依赖注入问题，添加以下函数，或注入构造函数。

```
function setDependentProperty(Type $value)
{
    $this->_dependency = $value;
    return $this;
}

function getDependentProperty()
{
    if (!isset($this->_dependency)) {
       $this->_dependency = new DependencyType();
    }
    return $this->_dependency;
} 
```

然后在测试中使用 Mocks

```
function testUseMockedService()
{
    $testedItem = new ObjectToTest();
    $mock = $this->getMock('Service_ToMock',
        array('functionToMock')
    );
    $mock->expects($this->exactly(1))
        ->method('functionToMock')
        ->will($this->returnValue($valueYouWant));

    $testedItem->setDependency($mock);
    $returnValue = $testedItem->doStuff();

    $this->assertEquals($something, $returnValue);
} 
```

了解单元测试不是集成测试，应该非常孤立

```
http://www.typemock.com/unit-tests-integration-tests 
```

了解没有“正确”的保险金额

> [http://www.artima.com/weblogs/viewpost.jsp?thread=204677](http://www.artima.com/weblogs/viewpost.jsp?thread=204677)

# php - 带有 htaccess 文件的内部错误 500

> ID：11540310
> 
> 赞同：0
> 
> 时间：2012-07-18T11:30:42.483
> 
> 标签：php, apache, .htaccess, webserver

上传 htaccess 文件后，我的网站显示内部服务器错误 500...

```
RewriteEngine On
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^deztimes\.com
RewriteRule (.*) http://deztimes.com/$1 [R=301, L] 
RewriteRule ^([^/]*)\.html$ /index.php?tag=$1 [L]
RewriteRule ^do/([^/]*)/post/([^/]*)/size/([^/]*)/status/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&post=$2&size=$3&status=$4&title=$5 [L]
RewriteRule ^do/([^/]*)/post/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&post=$2&title=$3 [L]
RewriteRule ^do/([^/]*)/size/([^/]*)/status/([^/]*)/id/([^/]*)/([^/]*)\.jpg$ /?do=$1&size=$2&status=$3&id=$4&tite=$5 [L]
RewriteRule ^do/([^/]*)/id/([^/]*)/([^/]*)\.jpg$ /?do=$1&id=$2&title=$3 [L]
RewriteRule ^do/([^/]*)/image/([^/]*)/size/([^/]*)/status/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&image=$2&size=$3&status=$4&title=$5 [L]
RewriteRule ^do/([^/]*)/image/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&image=$2&title=$3 [L]
RewriteRule ^do/([^/]*)/height/([^/]*)/id/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&height=$2&id=$3&title=$4 [L]
RewriteRule ^do/([^/]*)/id/([^/]*)/([^/]*)\.jpg$ /index.php?do=$1&id=$2&title=$3 [L]
RewriteRule ^post/([^/]*)/([^/]*)\.html$ /?post=$1&title=$2 [L] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:01:56.153

具体来说，重写引擎对空格并不那么聪明，所以只要你有空格，它就会假设你有另一个参数。所以你的 htaccess 文件的这一行：

```
RewriteRule (.*) http://deztimes.com/$1 [R=301, L] 
```

重写引擎看到指令：`RewriteRule`，第一个参数（匹配）`(.*)`第二个参数（目标）`http://deztimes.com/$1`，第三个参数（标志）`[R=301,` *和第四个参数* `L]`。从技术上讲，您可以将多个标志作为单独的参数，但它们需要**用方括号 [ ] 括起来**。您拥有的 2 个标志没有用方括号括起来。还行吧：

```
RewriteRule (.*) http://deztimes.com/$1 [R=301] [L] 
```

这没关系：

```
RewriteRule (.*) http://deztimes.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:52:12.847

我在我的 docroot 中放入了完全相同的 .htaccess，并产生了您的错误。删除第一个 RewriteRule 中逗号后的标志之间的空格后，错误就消失了。

# javascript - Python 到 JavaScript 对象图（反）序列化

> ID：11540314
> 
> 赞同：2
> 
> 时间：2012-07-18T11:30:52.087
> 
> 标签：javascript, python, serialization, deserialization

我正在尝试将对象图从 Python 发送到在浏览器中运行的 JavaScript，我想知道是否有一对现成的库用于处理 Python 端的序列化和 JavaScript 端的反序列化。JSON 不支持开箱即用的对象引用，JS-YAML 的文档说它在浏览器环境中不是生产就绪的，而且我没有找到任何用于 XML 的东西。有什么建议么？

**编辑：**这是我所说的“JSON 不支持开箱即用的对象引用”的示例：我有一个包含产品和订单的商店数据库以及它们之间的多对多关系。如果我将一堆订单放入 Python JSON 序列化器中，结果将包含每个产品的多个序列化（副本），因为 JSON 序列化器没有办法说，“我已经序列化了这个产品，所以我就插入对它的引用”。所以我把结果放在网络上并在客户端反序列化它，现在我有多个 JavaScript 对象代表同一个产品，这很糟糕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T20:12:55.223

how about jsonpickle? JS is awesome with json out of box, adding json pickling in python is the missing link: [jsonpickle](http://pypi.python.org/pypi/jsonpickle/)

# jpql - OpenJPA 在查询中不采用完整的列名

> ID：11540316
> 
> 赞同：2
> 
> 时间：2012-07-18T11:30:55.190
> 
> 标签：jpql, openjpa

我正在使用 OpenJPA 并使用 orm.xml 进行映射。在某些情况下，我的列名长度超过一定数量的字符，然后 jpql 在生成 sql 查询时将列名生成为最多一定数量的字符。

如果我有如下映射

```
<entity name="OneOffSystemTemplateVariableValue" class="financing.tools.docgen.models.OneOffSystemTemplateVariableValue">
    <table name="modification_variable_values"/>
    <attribute-override name="id">
      <column name="modification_variable_values_id"/>
    </attribute-override>
    .....
   </attributes>
  </entity> 
```

当我运行一个简单的查询时`OneOffSystemTemplateVariableValue`，它生成了我的查询，如下所示

```
SELECT t0.**MODIFICATION_VARIABLE_VALUES_I**, t0.create_timestamp, t0.create_id, t0.last_update_timestamp, t0.last_update_id, t0.modification_object_id, t0.variable_name, t0.variable_value FROM Administrator.modification_variable_values t0 WHERE t0.one_off_template_id = ? 
```

如果我 `MODIFICATION_VARIABLE_VALUES_ID`将列名更改为 MOD_VARIABLE_VALUES_ID ，那么我的查询效果很好。

所以生成的 sql 不采用完整的列名长度。

我没有`maxColumnNameLength`在我的应用程序中设置任何地方。

你能告诉我如何设置列名长度的值，这样我就不会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:53:59.660

如果您使用的是 MySQL，您将在您的 persistence.xml 文件中设置以下属性。

```
openjpa.jdbc.DBDictionary=mysql(maxColumnNameLength=256) 
```

对于其他数据库，请参阅[OpenJPA 用户手册](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#ref_guide_dbsetup_dbsupport)。我也有兴趣知道您正在使用哪个数据库，以便我们可以解决这个最大列问题。

# java - 常规 if 内的三元 if 运算符

> ID：11540318
> 
> 赞同：1
> 
> 时间：2012-07-18T11:30:59.120
> 
> 标签：java, if-statement, ternary-operator

在 Java 中，如果我在常规 if 中使用三元 if 运算符，例如：

```
if ((x > y - z) ? true : callLongWaitedMethod(many, parameteres)) {
        loveTeddyBear();
} 
```

`x > y - z`如果确实是真的，它会执行 callLongWaitedMethod吗？我希望不是这样，我可以使用这个漂亮的语句，乍一看有点复杂，但与额外的布尔变量相比更有吸引力：

```
boolean b = (x > y - z) ? true : callLongWaitedMethod(many, parameteres);
if (b) {
        loveTeddyBear();
} 
```

特别是如果我在一个反复迭代的大循环中使用它，所以从性能的角度来看，每次创建布尔值都不会很好，而如果我在循环之外声明布尔值，我可能会因为循环的大尺寸。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:39:52.160

这将如您所愿，但简单地使用普通`||`运算符来完成完全相同的结果会更清楚：

```
if ((x > y - z) || callLongWaitedMethod(many, parameteres)) {
        loveTeddyBear();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:41:01.600

根据[Java 语言规范 15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)，只有在必要时才会评估 long 方法：

> 未选择的操作数表达式不会针对条件表达式的特定评估进行评估。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T11:34:21.023

`callLongWaitedMethod`如果为真，则*不会*被调用。`x > y - z`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:38:12.647

如果你想执行`callLongWaitedMethod`when `(x > y - z)`is true 你实际上必须交换表达式：

```
if ((x > y - z) ? callLongWaitedMethod(many, parameteres) : true ) {
        loveTeddyBear();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:05:30.670

好像你有你想要的答案。您也可以只使用带有简单版本代码的调试语句来查看执行了什么来验证行为。就像是

```
if ((1 > 2) ? true : someSimpleMethod()) {
    System.out.println("true if");
} 
```

正如你`someSimpleMethod()`所拥有的

```
public boolean someSimpleMethod() {
    System.out.println("calling someSimpleMethod()");
    return true;
} 
```

从那里您可以交换 1 和 2 以查看是否`someSimpleMethod()`会执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-18T12:38:54.543

作为编码员，你应该问问自己，如果你不知道它会做什么，你真的应该这样编码吗？为什么不只是这样：

```
if ( (x>y-z) || 
     (x<=y-z && callLongWaitedMethod(many, parameteres))) {
    loveTeddyBear();
} 
```

对于不熟悉您的代码的新手程序员来说，这将更有意义。

# browser - Sahi 的代理不再正常工作

> ID：11540319
> 
> 赞同：0
> 
> 时间：2012-07-18T11:31:01.503
> 
> 标签：browser, proxy, continuous-integration, automated-tests, sahi

我有一套使用 Sahi 为我们的网站进行的测试。这些测试是自动化的，并输入到我们的 Jenkins 构建系统中。

测试在专用 PC 上运行，该 PC 没有其他用途。它安装了 Sahi 以及所有浏览器。Jenkins 服务器对测试 PC 进行远程调用以运行测试。由于运行所有测试需要时间，因此该功能测试套件会在一夜之间运行。

几个月来，这个系统运行良好。但突然，几周前的一天，我走进办公室，发现所有的测试都失败了。从那以后他们就没有工作过。据我所知，没有任何重大变化（我们显然保持浏览器版本是最新的，但我不认为失败与任何更新同时发生；Sahi 本身自去年以来就没有更新）

我做了一些工作来找出发生了什么：

Sahi 使用代理作为其浏览器控制魔法的一部分，我相信这个代理是问题的根源。但我无法弄清楚如何或为什么。

当 Sahi 控制下的浏览器加载要测试的页面时，似乎没有一个 HTTP 请求成功。显示了原始页面内容（我认为是因为它被缓存了），但没有显示样式、图形或脚本（浏览器已经缓存的除外）。此外，Sahi 脚本随后尝试单击按钮以继续进行测试，但浏览器无法加载任何内容。Sahi 稍等片刻，但最终脚本超时并且测试失败。

手动运行 Sahi 时，我可以在受影响的 PC 上复制它。它发生在任何站点和所有浏览器中。然而，它不会发生在我自己的台式电脑上，它安装了所有相关软件的相同版本。当然，过去它在测试盒上运行良好。

我试过卸载 Sahi 和浏览器，然后从头开始重新安装。这没有任何区别。（我很欣赏卸载通常不会真正删除所有内容，所以也许我可以在这里做更多的事情？）

我真的希望有人可以在这里帮助我，因为我不确定还有什么可以尝试的。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:31:59.467

由于它发生在所有浏览器上，看起来防火墙设置可能阻止访问端口 9999。关闭防火墙并检查。如果您在 Sahi 控制台上看到任何异常，您也可以发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:47:59.187

我无法深入了解这一点。我怀疑这是阻止 Sahi 代理工作的原因，但我找不到罪魁祸首。

我在它上面浪费了太多时间，而且它运行的机器并没有被用于其他任何东西，所以我最终的解决方案是从头开始重新安装操作系统。

这解决了这个问题。它并没有帮助我理解它为什么会发生，但只要它在工作，嗯？

感谢所有路过的人。

# javascript - JavaScript 中的函数作用域

> ID：11540329
> 
> 赞同：1
> 
> 时间：2012-07-18T11:31:30.777
> 
> 标签：javascript, scope

在 Pro JavaScript with Mootools 一书中，我找到了以下行

```
The scoping rules for function expressions are a bit different from function 
declarations because they depend on variable scoping. Remember that in 
JavaScript, the var keyword defines a variable to be scoped locally, and 
omitting the keyword creates a global variable instead: 
```

据我了解，我编写了以下代码并尝试检查

```
var a = function(){ 
   b = function(){ c = function(){ alert("b"); }; };
};
alert(typeof a); // Returned me 'function'
alert(typeof b); // Returned me 'undefined'
alert(typeof c); // Returned me 'undefined' 
```

我也在下面尝试过

```
var a = function(){ 
   var b = function(){ c = function(){ alert("b"); }; };
};
alert(typeof a); // Returned me 'function'
alert(typeof b); // Returned me 'undefined'
alert(typeof c); // Returned me 'undefined'​​ 
```

你能否解释一下，让我更好地理解。根据我在第一个代码块中的理解 b 和 c 应该是全局变量。但在这种情况下不会发生这种情况。即使我试图`a()`在警报之前调用......[这](http://jsfiddle.net/HJ4vK/)是小提琴。请帮助我更好地理解范围。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:34:26.220

> 根据我对第一块代码 b 和 c 的理解应该是全局变量

`a`它们是，但直到被调用（并且`b`在 的情况下调用直到被调用）之前，它们才会被分配值`c`。

> 这是小提琴

那个代码是不同的。你有`var b`，它是`b`一个局部变量而不是全局变量。

* * *

```
var a = function(){ 
   b = function(){ c = function(){ alert("b"); }; };
};
a();
b();
alert(typeof a); 
alert(typeof b); 
alert(typeof c); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T12:38:02.427

谷歌下面的关键词，它是掌握作用域和其他 javascript 模式技术的好地方。它是一个包含 12 个部分的系列文章。网站上没有直接链接，因此您需要使用零件编号搜索其余文章

```
  搜索
  *优雅的代码基本 javascript 第 1 部分
    优雅的代码基本 javascript 第 2 部分
    ETC...* 

```

# keyboard-shortcuts - Sublime Text 2 快捷键换行

> ID：11540330
> 
> 赞同：1
> 
> 时间：2012-07-18T11:31:32.983
> 
> 标签：keyboard-shortcuts, text-editor, sublimetext2

请原谅我的非信息性标题。只是无法在一个问题中简短地描述我想要什么。

好的，假设我们的文本文件中有两行。光标位于第一行的某处（示例显示光标位置）：

```
SO helps| people
People like SO 
```

我想要的是用空行或另一行替换第一行，光标应该在这个空行的开头。

我试过`CTRL   `+`L`并输入“新行”。但是`CTRL   `+`L`将选择扩展到行 + \n 并导致此结果（示例显示光标位置）：

```
new line|People like SO 
```

如果光标位于行首，则++`CTRL   `完美。但是，当光标不在开头时（不按、箭头和使用鼠标），如何做同样的事情呢？`K``K``  ENTER  `

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:42:37.920

当光标在行中某处时，相当于行首的**Ctrl + K + K是：** **Ctrl + Shift + K**

这里：

```
first line with text
second line| with other text
third line with another text 
```

-> **Ctrl + Shift + K**：

```
first line with text
|third line with another text 
```

# 编辑

由于要求结果应该是：

```
first line
|
third line 
```

您可以执行上面写的操作并按*ENTER*或转到*`Packages/Delete Line.sublime-macro`*并用以下代码替换文件：

```
[
    {"command": "expand_selection", "args": {"to": "line"}},
    {"command": "add_to_kill_ring", "args": {"forward": true}},
    {"command": "left_delete"},
    {"command": "insert", "args": {"characters": "\n"}},
    {"command": "move", "args": {"by": "lines", "forward": false}}
] 
```

# ruby-on-rails - 在 Rails 中提交表单时调用在不同控制器中定义的方法

> ID：11540331
> 
> 赞同：0
> 
> 时间：2012-07-18T11:31:33.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个 form_for 标记指定为 `= form_for [@driver,@driver_availability]`。这将输入的数据存储在 driver_availabilities 模型中并调用 DriversController 的 create 方法。是否可以让它调用我在不同控制器中定义的一些方法，但继续像往常一样在 driver_availabilities 模型中保存数据？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:43:49.517

`[@driver, @driver_availability]`将要求`driver_driver_availabilities(driver_id: @driver)`新对象和`driver_driver_availability(driver_id: @driver, id: @driver_availability)`现有驱动程序可用性。因此，要么创建到另一个控制器的命名路由路由（注意这些命名路由也用于索引、显示、更新和销毁），要么为表单标签提供 url 选项：

```
= form_for [@driver,@driver_availability], url: … # named route or routing hash 
```

我会选择第二个选项。

# php - 关于在 php 中发送邮件的 fsockopen() 错误

> ID：11540333
> 
> 赞同：2
> 
> 时间：2012-07-18T11:31:47.547
> 
> 标签：php, ssl, smtp, xampp, fsockopen

我想在用户注册后向用户发送确认电子邮件。我正在使用 xampp。当我运行我的 php 文件时，它返回以下错误：

```
 Warning: fsockopen() [function.fsockopen]: unable to connect to ssl://smtp.gmail.com:465 (Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP?) in C:\xampp\htdocs\class.smtp.php on line 122

    Warning: fsockopen() [function.fsockopen]: unable to connect to ssl://smtp.gmail.com:465 (Unable to find the socket transport "ssl" - did you forget to enable it when you configured PHP?) in C:\xampp\htdocs\class.smtp.php on line 122
    Message has not been sent. 
```

我的 php 文件中的相关部分：

```
try
    {
        require("class.phpmailer.php");
        $mail = new PHPMailer();   
        $mail->IsSMTP();
        $mail->Mailer = "smtp";
        $mail->SMTPSecure = "ssl"; 
        $mail->Host = "ssl://smtp.gmail.com";
        $mail->Port = 465;
        $mail->SMTPAuth = true;
        $mail->CharSet="utf-8";
        $mail->Username = "user@gmail.com";
        $mail->Password = "password";
        $mail->From     = "user@gmail.com";
        $mail->FromName="DBE Yazılım";
        $mail->AddAddress($_POST['UserMail']); 
        $mail->Subject  = "Registration Information";
        $mail->Body     = "Hello your password is " . $userpass;
        //$mail->AddAttachment($path);
        $mail->Send();
        if($mail->Send())
            echo 'Message has been sent.';
        else
            echo 'Message has not been sent.';
    }
    catch(Exception $e)
    {
        echo 'hata'.$e->getMessage();
    } 
```

我看过论坛，这个错误通常是关于 ssl 的。他们说`extension=php_openssl.dll`必须添加到php.ini中。我添加了这部分，但没有任何改变。这是关于 xampp 的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:33:26.230

正如您在错误消息中看到的

> 无法连接到C:\xampp\htdocs\ 中的**ssl://ssl://smtp.gmail.com:465**（无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？）第 122 行的 class.smtp.php

`ssl://`太多了

```
$mail->Host = "smtp.gmail.com"; // instead of ssl://smtp.gmail.com 
```

通常，如果您看到“主机”一词，这实际上是指“主机”而不是 url

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-15T22:24:49.427

在 fsockopen() 函数中打开您的服务器 PHP.ini 文件配置。你会看到它的工作......

# html - 怀疑 wordpress 没有设置 cookie

> ID：11540337
> 
> 赞同：0
> 
> 时间：2012-07-18T11:32:05.877
> 
> 标签：html, wordpress, cookies

我正在尝试制作一个简单的登录表单。

wordpress 函数 `is_user_logged_in()`总是返回 false。

我不想为 wordpress 使用任何预先存在的主题，我只想将 wordpress 功能添加到现有页面。

我用表单检查了我页面上的 cookie，但没有设置任何内容。

wordpress 安装位于：
`http://localhost/newgameplus/wordpress/`

测试脚本位于：
`http://localhost/newgameplus/TEST/scripts/php/testWP.php`

编辑：

通过转到 wp 管理面板并更改选项来解决此问题。设置>常规设置

调整网站地址以反映实际网站位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:00:25.817

您的脚本在与 WordPress 安装不同的 Web 空间中运行。要访问 Wordpress 功能，您需要在 wordpress 网络空间内的网站上工作 - 即

```
http://localhost/newgameplus/wordpress/ 
```

目录

# php - 如何使用 PHP 创建一个 zip 文件

> ID：11540339
> 
> 赞同：42
> 
> 时间：2012-07-18T11:32:15.627
> 
> 标签：php, zip

我正在尝试将**文件**从**一个文件夹**保存到**另一个文件夹。zip 文件夹**放置在不同的目录中。我写了以下代码：

**存档.php**

```
<?php
    $zip = new ZipArchive();
    $zip->open('example.zip',  ZipArchive::CREATE);
    $srcDir = "/home/sam/uploads/";
    $files= scandir($srcDir);
    //var_dump($files);
    unset($files[0],$files[1]);
    foreach ($files as $file) {
        $zip->addFile("{$file}");    
    }
    $zip->close();
?> 
```

但遗憾的是我无法创建 .zip 文件夹。我错过了什么步骤吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-18T12:08:46.630

```
$zip = new ZipArchive();

$DelFilePath="first.zip";

if(file_exists($_SERVER['DOCUMENT_ROOT']."/TEST/".$DelFilePath)) {

        unlink ($_SERVER['DOCUMENT_ROOT']."/TEST/".$DelFilePath); 

}
if ($zip->open($_SERVER['DOCUMENT_ROOT']."/TEST/".$DelFilePath, ZIPARCHIVE::CREATE) != TRUE) {
        die ("Could not open archive");
}
    $zip->addFile("file_path","file_name");

// close and save archive

$zip->close(); 
```

这里 TEST 是您的项目文件夹名称。

您可以根据需要定义路径。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-19T08:12:13.687

是的，我已经解决了我的问题。

这里我刚刚替换了代码

```
$zip->addFile("{$file}"); 
```

用代码

```
$zip->addFromString(basename($file),  file_get_contents($file)); 
```

并完成我的工作。:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-10-22T09:59:39.740

**创建一个新的 zip 文件**

```
$zip = new ZipArchive;
if ($zip->open('test_new.zip', ZipArchive::CREATE) === TRUE)
{
    // Add files to the zip file
    $zip->addFile('test.txt');
    $zip->addFile('test.pdf');

    // Add random.txt file to zip and rename it to newfile.txt
    $zip->addFile('random.txt', 'newfile.txt');

    // Add a file new.txt file to zip using the text specified
    $zip->addFromString('new.txt', 'text to be added to the new.txt file');

    // All files are added, so close the zip file.
    $zip->close();
} 
```

**覆盖现有的 zip 文件**

（使用 OVERWRITE 时，文件必须已经存在，如果不存在，则操作失败。）

```
$zip = new ZipArchive;
if ($zip->open('test_overwrite.zip', ZipArchive::OVERWRITE) === TRUE)
{
    // Add file to the zip file
    $zip->addFile('test.txt');
    $zip->addFile('test.pdf');

    // All files are added, so close the zip file.
    $zip->close();
} 
```

**创建一个新的 zip 文件并将文件添加到文件夹中**

```
$zip = new ZipArchive;
if ($zip->open('test_folder.zip', ZipArchive::CREATE) === TRUE)
{
    // Add files to the zip file inside demo_folder
    $zip->addFile('text.txt', 'demo_folder/test.txt');
    $zip->addFile('test.pdf', 'demo_folder/test.pdf');

    // Add random.txt file to zip and rename it to newfile.txt and store in demo_folder
    $zip->addFile('random.txt', 'demo_folder/newfile.txt');

    // Add a file demo_folder/new.txt file to zip using the text specified
    $zip->addFromString('demo_folder/new.txt', 'text to be added to the new.txt file');

    // All files are added, so close the zip file.
    $zip->close();
} 
```

**创建一个新的 zip 文件并将文件移动到不同的文件夹中**

```
$zip = new ZipArchive;
if ($zip->open('test_folder_change.zip', ZipArchive::CREATE) === TRUE)
{
    // Add files to the zip file
    $zip->addFile('text.txt', 'demo_folder/test.txt');
    $zip->addFile('test.pdf', 'demo_folder1/test.pdf');

    // All files are added, so close the zip file.
    $zip->close();
} 
```

**使用目录中的所有文件创建一个 zip 文件**

```
$zip = new ZipArchive;
if ($zip->open('test_dir.zip', ZipArchive::OVERWRITE) === TRUE)
{
    if ($handle = opendir('demo_folder'))
    {
        // Add all files inside the directory
        while (false !== ($entry = readdir($handle)))
        {
            if ($entry != "." && $entry != ".." && !is_dir('demo_folder/' . $entry))
            {
                $zip->addFile('demo_folder/' . $entry);
            }
        }
        closedir($handle);
    }

    $zip->close();
} 
```

**将多个文件和目录添加到一个 zip 文件**

```
$zip = new ZipArchive;
if ($zip->open('test_files_dirs.zip', ZipArchive::OVERWRITE) === TRUE)
{
    // Add directory1
    if ($handle = opendir('demo_folder/directory1/'))
    {
        while (false !== ($entry = readdir($handle)))
        {
            if ($entry != "." && $entry != "..")
            {
                $zip->addFile('demo_folder/directory1/' . $entry);
            }
        }
        closedir($handle);
    }

    // Add directory2
    if ($handle = opendir('demo_folder/directory2/'))
    {
        while (false !== ($entry = readdir($handle)))
        {
            if ($entry != "." && $entry != "..")
            {
                $zip->addFile('demo_folder/directory2/' . $entry);
            }
        }
        closedir($handle);
    }

    // Add directory3
    if ($handle = opendir('demo_folder/directory3/'))
    {
        while (false !== ($entry = readdir($handle)))
        {
            if ($entry != "." && $entry != "..")
            {
                $zip->addFile('demo_folder/directory3/' . $entry);
            }
        }
        closedir($handle);
    }

    // Add more files
    $zip->addFile('demo_folder/index.txt');

    $zip->close();
} 
```

资料来源：[https ://www.virendrachandak.com/techtalk/how-to-create-a-zip-file-using-php/](https://www.virendrachandak.com/techtalk/how-to-create-a-zip-file-using-php/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-04T05:53:09.953

试试这个代码：

```
$zip = new ZipArchive;
if ($zip->open(getcwd() . '/test.zip', ZipArchive::CREATE) === TRUE) {
    $zip->addFile(getcwd() . '/file.txt', 'newname.txt');
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-18T11:49:20.523

请看下面的例子：

```
<?php
    $error = "";        //error holder
    if(isset($_POST['createpdf'])){
        $post = $_POST;     
        $file_folder = "files/";    // folder to load files
        if(extension_loaded('zip')){    // Checking ZIP extension is available
            if(isset($post['files']) and count($post['files']) > 0){    // Checking files are selected
                $zip = new ZipArchive();            // Load zip library 
                $zip_name = time().".zip";          // Zip name
                if($zip->open($zip_name, ZIPARCHIVE::CREATE)!==TRUE){       // Opening zip file to load files
                    $error .=  "* Sorry ZIP creation failed at this time<br/>";
                }
                foreach($post['files'] as $file){               
                    $zip->addFile($file_folder.$file);          // Adding files into zip
                }
                $zip->close();
                if(file_exists($zip_name)){
                    // push to download the zip
                    header('Content-type: application/zip');
                    header('Content-Disposition: attachment; filename="'.$zip_name.'"');
                    readfile($zip_name);
                    // remove zip file is exists in temp path
                    unlink($zip_name);
                }

            }else
                $error .= "* Please select file to zip <br/>";
        }else
            $error .= "* You dont have ZIP extension<br/>";
    }
?>
<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Download As Zip</title>
</head>
<body>
<center><h1>Create Zip</h1></center>
<form name="zips" method="post">
<?php if(!empty($error)) { ?>
<p style=" border:#C10000 1px solid; background-color:#FFA8A8; color:#B00000;padding:8px; width:588px; margin:0 auto 10px;"><?php echo $error; ?></p>
<?php } ?>
<table width="600" border="1" align="center" cellpadding="10" cellspacing="0" style="border-collapse:collapse; border:#ccc 1px solid;">
  <tr>
    <td width="33" align="center">*</td>
    <td width="117" align="center">File Type</td>
    <td width="382">File Name</td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="files[]" value="a.jpg" /></td>
    <td align="center"><img src="files/image.png" title="Image" width="16" height="16" /></td>
    <td>a.jpg</td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="files[]" value="b.jpg" /></td>
    <td align="center"><img src="files/image.png" title="Image" width="16" height="16" /></td>
    <td>b.jpg</td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="files[]" value="c.docx" /></td>
    <td align="center"><img src="files/doc.png" title="Document" width="16" height="16" /></td>
    <td>c.docx</td>
  </tr>
  <tr>
    <td align="center"><input type="checkbox" name="files[]" value="d.pdf" /></td>
    <td align="center"><img src="files/pdf.png" title="pdf" width="16" height="16" /></td>
    <td>d.pdf</td>
  </tr>
  <tr>
    <td colspan="3" align="center">
        <input type="submit" name="createpdf" style="border:0px; background-color:#800040; color:#FFF; padding:10px; cursor:pointer; font-weight:bold; border-radius:5px;" value="Download as ZIP" />&nbsp;
        <input type="reset" name="reset" style="border:0px; background-color:#D3D3D3; color:#000; font-weight:bold; padding:10px; cursor:pointer; border-radius:5px;" value="Reset" />
    </td>
    </tr>
</table>

</form>
</body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-14T10:05:47.713

```
$filename = 'errors.log';
$logfile = 'path/log' . $filename;
$zipfile = date('dmY') . '.zip';
$archive = 'path/archive';
if (file_exists($logfile)) {
        $zip = new ZipArchive();
        if ($zip->open($archive . $zipfile, file_exists($archive . $zipfile) ? ZipArchive::OVERWRITE : ZipArchive::CREATE)) {
            $zip->addFile($logfile, $filename);
        }
        $zip->close();
        unlink($logfile);
    } 
```

# cookies - 如果存在某些 cookie，则绕过 Akamai 的特定 URL

> ID：11540341
> 
> 赞同：2
> 
> 时间：2012-07-18T11:32:18.997
> 
> 标签：cookies, akamai

如果存在指定的 cookie（即）如果用户在特定页面上登录，我希望 Akamai 不缓存某些 URL。无论如何，我们可以使用 Akamai 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:57:24.267

好消息是，我过去曾为 Top Gear 网站 (www.topgear.com/uk) 这样做过。逻辑是，如果存在 cookie（在本例中为“TGCACHEKEY”），则某些 url 路径将绕过 Akamai 缓存。这基本上会在登录时关闭 Akamai 对 html 页面的缓存。

坏消息是您需要 Akamai 顾问为您进行此更改。

如果这不是您的选择，那么彼得的建议都是好的。在为 Top Gear 实施基于 cookie 的方法之前，我考虑了所有这些，但最终没有一个是可行的。

另请记住，默认情况下，Akamai 会去除缓存资源的 cookie。在您的情况下，这可能会或可能不会影响您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T23:54:35.610

边缘服务器在向您的源服务器发出请求之前不会检查 cookie，我从未在他们的任何菜单、配置屏幕或文档中看到类似的内容。

但是，有几种方法我可以想到你可以获得我认为你正在寻找的效果。

1.  您可以在相应数字资产的配置设置中指定您不想缓存的路径或 URL。如果您谈论的是登录用户，您可能有一条只有他们才能到达的路径，或者您可以在服务器端设置这样的东西。例如，对于在线课程，您将拥有`www.course.com/php.html`任何人都可以访问的内容，而您可能会使用`www.course.com/student/php-lesson-1.html`实际登录的课程内容。指定`/student/*`不被缓存可以解决这个问题。

2.  如果您为已登录和未登录的用户提供相同的页面并且不能这样做，您可以检查服务器端是否已登录，如果已登录，则在链接中添加缓存中断器，以便当他们点击链接时，会自动添加缓存破坏器。如果需要，您也可以在客户端执行此操作，但在服务器端执行此操作会更安全、更快。作为对此的说明，这可能是 userid-random#。当与其他人不会请求它并获得较早的“缓存损坏”页面的页面结合时，这将保持它足够独特。

3.  如果以上两种方法都不可行，我还能想到另一种方法，至少可以说有点不合常规，但它会起作用。在您的文档根目录中使用另一个名称创建符号链接目录，以便您可以应用第一个选项并使其免于缓存。然后检查该人是否已登录，如果已登录，则将额外目录添加到链接中。从 akamai 的角度来看，`www.mysite.com/logged-on/page.html`可以在缓存的地方免于`www.mysite.com/content/page.html`缓存。在您的服务器上，如果`/logged-on/`符号链接到，`/content/`那么您已经准备就绪。

4.  当他们登录时，您可以将他们发送到设置为 ServerAlias 的子域，因此在您这边是相同的，但在 Akamai 上具有不同的缓存处理规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-24T21:20:24.153

按照与@llevera 相同的答案，您可以在 CloudFlare 上使用 cookie，而无需工程师干预来为您进行更改。

使用这种 cookie 绕过内容是一种随着时间越来越流行的技术，甚至像 Magento 这样的漏洞公司也将它用于 Magento 2 平台。

但是上面的解决方案仍然有效，也许 Akamai 现在已经支持这一点，我们在 2017 年！

# php - 如何将 iphone 联系人与数据库同步？

> ID：11540342
> 
> 赞同：0
> 
> 时间：2012-07-18T11:32:20.770
> 
> 标签：php, iphone, mysql, sync

我有一个 iphone 应用程序和一个网络应用程序（在 php 中），我想将 iphone 应用程序中的联系人与数据库记录同步。（来自设备和网络应用程序，即用户可以从设备或网络应用程序添加/更新/删除联系人和两个数据库都将同步。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:20:31.880

使用 php-addressbook.sf.net，它包括一个 Exchange 接口来同步你的 iPhone。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:55:09.620

你的问题还是不清楚，我会给你一些想法

```
ABAddressBookRef addressBook = ABAddressBookCreate( );
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

for ( int i = 0; i < nPeople; i++ )
{
ABRecordRef ref = CFArrayGetValueAtIndex( allPeople, i );} 
```

这里是编辑联系人和管理联系人的链接
[http://zcentric.com/2008/09/19/access-the-address-book/](http://zcentric.com/2008/09/19/access-the-address-book/) [https://developer.apple.com/library/ios/#samplecode/QuickContacts/简介/Intro.html#//apple_ref/doc/uid/DTS40009475](https://developer.apple.com/library/ios/#samplecode/QuickContacts/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009475)

# delphi - DBImage 与位图？

> ID：11540344
> 
> 赞同：0
> 
> 时间：2012-07-18T11:32:22.913
> 
> 标签：delphi, delphi-7, tadotable

我目前正在尝试从具有 OLE 对象字段并包含有效位图的 MS Access 数据库中读取图像（出于测试目的，我使用 MS Paint 创建了图像并将其保存为 24 位 bmp）。

我通过 DBGrid 链接到这个。从理论上讲，一切都应该正常工作并且应该显示图像，但是我得到一个：“位图图像无效”错误。如果这是 JPEG 而不是 .bmp，我可以理解，但事实并非如此。所以我的问题是，有什么问题？

我不一定必须使用 DBImage，普通的 TImage 也可以很好（甚至可能更可取），但我不确定如何将 TImage 分配给 MS Access 数据库中的 OLE 对象字段。我试过了，无济于事：

```
//Select photo from Image field  
Image1.Picture := ADOTable1['Image']; 
```

我已经阅读了关于这个问题的大部分文章，例如 about.com 等，但仍然没有得到任何好的结果。

任何帮助将不胜感激！

更新：这对我有用：

*添加到USES子句：JPEG、ADODB、DB*

```
function JpegStartsInBlob
(PicField:TBlobField):integer;
var
 bS     : TADOBlobStream;
 buffer : Word;
 hx     : string;
begin
 Result := -1;
 bS := TADOBlobStream.Create(PicField, bmRead);
 try
 while (Result = -1) and
    (bS.Position + 1 < bS.Size) do
 begin
  bS.ReadBuffer(buffer, 1);
  hx:=IntToHex(buffer, 2);
  if hx = 'FF' then begin
  bS.ReadBuffer(buffer, 1);
  hx:=IntToHex(buffer, 2);
  if hx = 'D8' then Result := bS.Position - 2
  else if hx = 'FF' then
    bS.Position := bS.Position-1;
end; 
end; 
finally
bS.Free
end;  
end;

procedure TfrmOne.btnShowImageClick(Sender: TObject);
var
 bS : TADOBlobStream;
 Pic : TJPEGImage;
begin

bS := TADOBlobStream.Create(table1.FieldByName('Photo') as TBlobField, bmRead);   
bS.Seek(JpegStartsInBlob(table1.FieldByName('Photo') as TBlobField),
        soFromBeginning);
Pic := TJPEGImage.Create;
Pic.LoadFromStream(bS);
frmOne.Image1.Picture.Graphic := Pic;
Pic.Free;
bS.Free;
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:41:55.593

什么会返回 ADOTable1['Image'] ？

我不喜欢你使用的 FieldValues 属性，因为你不知道实际类型并且无法使用类型检查来控制事物。我想你最好使用 Data.DB.TDataSet.FieldByName TField 对象的类型会提示你它包含的数据类型。

我不了解 Microsoft Jet（Excel 和 Access 的数据库引擎），但我认为它存储原始 BMP 文件数据和一些指向 Paint 应用程序（或 Gimp、Photoshop 或任何用于编辑 BMP 的工具）的链接 Kinf of TBlobField i思考。

[http://support.microsoft.com/kb/205635/en-us](http://support.microsoft.com/kb/205635/en-us) - 这显示了如何从 OLE 文件中保存文件的片段。

尝试找到一种将字段内容保存到 TFileStream 中的方法。

检查创建的文件是否真的是 BMP 文件。之后将 blob 保存到 TMemoryStream 和 TBitmap.LoadFromStream

考虑 Data.DB.TBlobField.SaveToStream、Data.DB.TField.AsBytes

文档中的另一个片段 - 如果您可以使用这些类，请探索这些类“使用 TADOBlobStream 访问或修改 ADO 数据集中的 BLOB 或备注字段的值。BLOB 字段由 TBlobField 对象和 TBlobField 的后代表示，例如 TGraphicField 和 TMemoField 。”

作为简历：

1) 获取数据的类型 - ADOTable1.FieldByName.ClassName 了解一下，哪些方法属性可以让你获取数据 2) 尝试将数据保存到文件中并分析它是什么 3) 尝试将数据保存到流中并重新用于加载图片

# dart - 有什么方法可以在 Rikulo 中使用对 Builder 模式的支持？

> ID：11540347
> 
> 赞同：2
> 
> 时间：2012-07-18T11:32:26.080
> 
> 标签：dart, rikulo

我对使用 Builder 模式使用 Rikulo 以声明方式创建 UI 很感兴趣。有没有办法这样做？Dart 语法是否支持类似的机制？

例如，

```
div(
  label(value:"OK")
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T01:20:41.743

是的，有可能。首先，您必须为 div、label 和其他 ui 对象定义全局函数。例如，

```
TextView textView([String text, String html])
=> html != null ? new TextView.html(html): new TextView(text); 
```

它可能是一个很好的插件。

# iphone - 从适合特定宽度的字符串中提取字符串

> ID：11540348
> 
> 赞同：3
> 
> 时间：2012-07-18T11:32:27.680
> 
> 标签：iphone, objective-c, ios

如果我有字符串“生活是美好的”。现在我需要从适合宽度 40 的字符串中提取一些单词。如何从目标 C 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:46:49.800

您可以[`sizeWithFont:`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html)在循环中使用该方法，如下所示：

```
NSString *longestFitting = nil;
NSString *orig = "Life is Good";
UIFont *font = ...;
for (int i = orig.length-1 ; i > 1 ; i--) {
    NSString *tmp = [orig substringToIndex:i];
    if ([tmp sizeWithFont:font].width <= 40) {
        longestFitting = tmp;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:14:22.450

您的答案是正确的，但要准确地适合 40 我已将 <= 更正为 == 所以新代码将是

```
 NSString *longestFitting = nil;
 NSString *orig = "Life is Good";
 UIFont *font = ...; 
 for (int i = orig.length-1 ; i > 1 ; i--) 
{
 NSString *tmp = [orig substringToIndex:i]; 
 if ([tmp sizeWithFont:font].width == 40) 
 {
   longestFitting = tmp; 
   break;
 } 
} 
```

# php - 在 json_encode/json_parse 中纠缠不清并转义

> ID：11540354
> 
> 赞同：0
> 
> 时间：2012-07-18T11:32:53.570
> 
> 标签：php, javascript, jquery, json, escaping

当用户在 html 表单上输入 " 或 \ 时出现问题

输入的文本将在 html 内容和 html 属性上下文中再次显示给用户

我有以下数据流：

1.  jQuery 表单行输入
2.  $_POST
3.  html 属性的转义：函数使用 html 实体或十六进制实体（`&quot;`或`&#x5C;`）转义
4.  php中的json_encode
5.  一些未知的 javascript 干扰，这会烧断保险丝
6.  jquery ajax 回调中的 json_parse

目标是向用户显示与输入完全相同的文本，但要正确转义以避免 xss 攻击。

现在我得到的第一件事是 $_POST 由于某种原因添加了斜杠。所以我现在首先使用stripslashes。这解决了单引号的所有问题，但是如果用户输入 " 或 \ 它仍然会中断。

问题似乎是javascript在 json_parse 获取数据之前进行了一些解码。它将十六进制转义符转回 \ 和 " 从而杀死 json_parse.

所以我想如果在第 4 步和第 5 步之间我使用 htmlspecialchars( $data, NO_QUOTES, 'utf-8' ) 我将 & 符号编码为`&amp;`，这应该中和 javascript 解码，但没有。它`&amp;`在解码 " 和十六进制编码时由于某种原因没有解码......

我哪里错了？有没有办法确切地知道 javascipt 解码并从 php 中和它？

* * *

在浪费了半天之后，我现在在做什么：

我认为在 onsuccess 处理程序获取数据之前干扰数据可能是一些 jQuery 的事情。我现在没有时间挖掘它并杀死它，所以我只是偷偷摸摸地用一个 hack 偷偷摸摸，这意味着 3 个字符串转换只是为了保持一个字符串不被转换，但是嘿，开发人员的时间在这里是一种稀有的商品。

在 php 中：

```
 // due to a problem with the jQuery callback code which seems to decode html entities and hex entities except for &amp;
    // we need to do something to keep our data intact, otherwise parse_json chokes on unescaped backslashes
    // and quotes. So we mask the entity by transforming the & into &amp; here and back in js.
    // TODO: unit test this to prevent regression
    // TODO: debug the jQuery to avoid this workaround
    //
    // echo  json_encode( $response );
    echo preg_replace( '/&/u', '&amp;', json_encode( $response ) ); 
```

在 parse_json 之前的 js 中：

```
 // due to a problem with the jQuery callback code which seems to decode html entities and hex entities except for &amp;
    // we need to do something to keep our data intact, otherwise parse_json chokes on unescaped backslashes
    // and quotes. So we mask the entity by transforming the & into &amp; here and back in js.
    // See function xxxxxx() in file xxxxx.php for the corresponding transformation
    //
    responseText = responseText.replace( /&amp;/g, '&' ); 
```

目前我无法为它编写单元测试，但我似乎无法打破它。

真正的问题仍然是如何在获得相同结果的同时消除不需要的转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:24:40.453

Try turning off "Magic Quotes" in php. That way the data comes in through $_POST just like the user typed it. See: [http://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

Then you can escape it according to your needs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:41:22.187

我遇到了类似您的问题并使用了 utf8_encode() 函数。现在它运作良好。你能试试吗？

# regex - 在经典 ASP 中使用正则表达式从数据中去除图像 URL

> ID：11540359
> 
> 赞同：0
> 
> 时间：2012-07-18T11:32:58.500
> 
> 标签：regex, asp-classic

我只是想知道如何编写一个函数来获取一个字符串并去除所有不是图像 URL 的东西？

我认为最好的课程是正则表达式，但我不确定。

内容类型无关紧要，只要是扩展名为 jpg、gif 或 png 的 URL。

我确实尝试过，但无济于事。

```
Function RegExResults(strTarget, strPattern)

    Set regEx = New RegExp
    regEx.Pattern = strPattern
    regEx.Global = true
    Set RegExResults = regEx.Execute(strTarget)
    Set regEx = Nothing

End Function

Set arrResults = RegExResults(data, "(http://)([a-zA-Z0-9\/\.])*")

For each result in arrResults
    Response.Write(result.Submatches(0)) & "<br>"
Next

Set arrResults = Nothing 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:18:22.907

正如许多人之前在处理文本块中的正则表达式和 URL 的其他问题中提到的那样，通过正则表达式几乎不可能 100% 准确地完成。查看[Regex Guru](http://www.regexguru.com/2008/11/detecting-urls-in-a-block-of-text/)的这篇文章，以更好地理解原因。鉴于您提供的详细信息有限，他的解决方案可能是在这种情况下使用的最佳解决方案。您需要修改结尾以确保仅获取图像文件，方法是在正则表达式中指定正确的扩展名（如果这就是您要查找的全部内容）。

```
\b(?:(?:https?|ftp|file)://|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$])(?:\.jpg|\.png|ETC.) 
```

这是使用链接中的正则表达式，只需替换 ETC。包含更多或包含您要查找的不同文件扩展名的语句。

# android - 在 Eclipse Juno 中创建新的 android 项目

> ID：11540366
> 
> 赞同：0
> 
> 时间：2012-07-18T11:33:23.213
> 
> 标签：android, eclipse, project

我已经将 SDK 下载到 Eclipse 并安装了 ADT 插件，但是当我想创建一个新的 Android 项目时，我得到的只是：文件 -> 新建 ->（无适用项目）。

我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T18:17:44.550

确保您在 Eclipse 中使用了正确的透视图。窗口 -> 打开透视图 -> 其他...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T11:47:11.637

我曾经一起工作`Eclipse Helios`

而且它是直截了当的

```
File -> New Android Application Project 
```

在我的新公司，他们一起工作`Eclipse Juno`

因为`Eclipse Juno`我必须在菜单中更深入一点

```
File -> New -> Project -> Android -> Android Application Project 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T00:47:19.103

单击新建“项目”，然后您可以选择什么类型的项目。我自己不知道怎么做，这是一个令人困惑的布局，而且呈现得有点糟糕。选择项目后，您只需单击选项的“Android”文件夹即可开始编程。希望有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T03:19:53.897

更改工作区地址。我遇到了同样的问题，但在我更改后它可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:36:53.297

您可能已经安装了 Eclipse 和 Android SDK，但不要忘记[ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)。安装之后，[这些说明](http://developer.android.com/sdk/installing/installing-adt.html)在让 ADT 插件在 Eclipse 中工作时特别简单。

通常，[此链接](http://developer.android.com/sdk/installing/adding-packages.html)提供了下载 SDK 后要采取的步骤。也许您安装了它但从未将其导入 Eclipse（此链接还封装了我在两次点击说明页面上的“下一步”时发布的第二个链接）。

# xslt - 如何在定义的点插入 xml nodet

> ID：11540368
> 
> 赞同：1
> 
> 时间：2012-07-18T11:33:25.760
> 
> 标签：xslt, xslt-1.0

xslt 有功能（反之亦然子字符串）或如何解决？我有xml：

```
<document>
<Line>
    <Line-Item>
        <LineNumber>10</LineNumber>
        <EAN>111</EAN>
        <BIC>123123</BIC>
        <SIC>AVD091</SIC>
    </Line-Item>
</Line>
<Line>
    <Line-Item>
        <LineNumber>20</LineNumber>
        <EAN>22222</EAN>
        <BIC>3232332</BIC>
        <SIC>AVD25482</SIC>
    </Line-Item>
</Line>
</document> 
```

需要的输出：

```
10        111     123123      AVD091
20        22222   3232332     AVD25482 
```

字段行号从 1 列位置开始，EAN 从 11 列位置开始，BIC 从 19 开始，SIC 从 31 开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:39:55.680

试试这个 XSLT 1.0 样式表。pad 模板是 Martin 的 mf:pad 函数的 XSLT 1.0 版本。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/>

<xsl:template match="/">
  <xsl:apply-templates select="document/Line/Line-Item"/>
</xsl:template>

<xsl:template name="pad">
  <xsl:param name="value" />
  <xsl:param name="width" />
  <xsl:variable name="col-max" select="'                    '"/>
  <xsl:value-of select="substring( concat($value,$col-max), 1, $width)" /> 
</xsl:template>  

<xsl:template match="Line-Item" >

 <xsl:call-template name="pad" >
  <xsl:with-param name="value" select="LineNumber"/>
  <xsl:with-param name="width" select="10" />
 </xsl:call-template>  

 <xsl:call-template name="pad" >
  <xsl:with-param name="value" select="EAN"/>
  <xsl:with-param name="width" select="8" />
 </xsl:call-template>  

 <xsl:call-template name="pad" >
  <xsl:with-param name="value" select="BIC"/>
  <xsl:with-param name="width" select="12" />
 </xsl:call-template>  

 <xsl:value-of select="SIC" /> 

 <xsl:value-of select="'&#x0A;'" />
</xsl:template>  

<xsl:template match="*" />
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:44:35.273

**这个简短而通用的转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <my:fields>
  <fieldset name="LineNumber" width="10"/>
  <fieldset name="EAN" width="8"/>
  <fieldset name="BIC" width="12"/>
 </my:fields>

 <xsl:variable name="vSpaces" select="'                    '"/>

 <xsl:variable name="vFields" select="document('')/*/my:fields/*"/>

 <xsl:template match="Line-Item">
     <xsl:text>&#xA;</xsl:text>
     <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="Line-Item/*">
  <xsl:value-of select=
   "concat(.,
           substring($vSpaces,
                     1,
                      $vFields[@name = name(current())]/@width
                     -
                      string-length()
                      )
           )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<document>
    <Line>
        <Line-Item>
            <LineNumber>10</LineNumber>
            <EAN>111</EAN>
            <BIC>123123</BIC>
            <SIC>AVD091</SIC>
        </Line-Item>
    </Line>
    <Line>
        <Line-Item>
            <LineNumber>20</LineNumber>
            <EAN>22222</EAN>
            <BIC>3232332</BIC>
            <SIC>AVD25482</SIC>
        </Line-Item>
    </Line>
</document> 
```

**产生想要的正确结果：**

```
10        111     123123      AVD091
20        22222   3232332     AVD25482 
```

**请注意**：

该元素`my:fields`可以放在它自己的 XML 文档中。因此，如果需要修改某些字段宽度，则不需要修改 XSLT 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:14:10.307

这是一个示例样式表（XSLT 2.0，抱歉，在您的评论表明请求 1.0 之前开始编写）：

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:param name="col-max" as="xs:string" select="'                    '"/>

<xsl:strip-space elements="*"/>
<xsl:output method="text"/>

<xsl:function name="mf:pad" as="xs:string">
  <xsl:param name="input" as="xs:string"/>
  <xsl:param name="col-length" as="xs:integer"/>
  <xsl:sequence select="concat($input, substring($col-max, 1, $col-length - string-length($input)))"/>
</xsl:function>

<xsl:template match="Line">
  <xsl:if test="position() > 1">
    <xsl:text>&#10;</xsl:text>
  </xsl:if>
  <xsl:apply-templates/>
</xsl:template>

<xsl:template match="LineNumber">
  <xsl:sequence select="mf:pad(., 10)"/>
</xsl:template>

<xsl:template match="EAN">
  <xsl:sequence select="mf:pad(., 9)"/>
</xsl:template>

<xsl:template match="BIC">
  <xsl:sequence select="mf:pad(., 12)"/>
</xsl:template>

<xsl:template match="SIC">
  <xsl:sequence select="mf:pad(., string-length())"/>
</xsl:template>

</xsl:stylesheet> 
```

# asp.net - 替换部分字符串

> ID：11540369
> 
> 赞同：0
> 
> 时间：2012-07-18T11:33:31.237
> 
> 标签：asp.net, .net, vb.net, .net-3.5, c#-3.0

我在以下方面遇到困难。

在 VB.Net 中，我有以下行：

`Dim intWidgetID As Integer = CType(Replace(strWidget, "portlet_", ""), Integer)`

在哪里`strWidget = portlet_n`

其中`n`可以是任何整数，即

`portlet_5`

我正在尝试将此代码转换为 C#，但我不断收到错误，我目前有这个：

`intTabID = Convert.ToInt32(Strings.Replace(strTabID, "tab_group_", ""));`

我使用在线转换器得到的

但是不喜欢`Strings`

所以我的问题是，如何替换字符串的一部分，所以`intTabID`基于`5`这个例子？

我已经对此进行了搜索，并找到了此链接： [C# Replace part of a string](https://stackoverflow.com/questions/9609042/c-sharp-replace-part-of-a-string)

如果没有 c# 中的正则表达式就不能做到这一点，所以基本上，我试图生成与原始 vb.net 示例代码尽可能相似的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:36:34.793

应该是这样的`strTabID.Replace("tab_group_", string.Empty);`

```
 int intTabID = 0;
    string value = strTabID.Replace("tab_group_", string.Empty);
    int.TryParse(value, out intTabID);

    if (intTabID > 0)
    { 

    } 
```

在您的代码中，我认为您需要将“tab_group_”替换为“portlet_”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:35:39.073

而不是`Strings.Replace(strTabID, "tab_group_", "")`，使用`strTabID.Replace("tab_group_", "")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:36:13.950

它们在 Vb.Net 中没有字符串类，因此请改用字符串类[http://msdn.microsoft.com/en-us/library/aa903372(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa903372(v=vs.71).aspx)

你可以通过这种方式实现它

```
string strWidget = "portlet_n";

int intWidgetID  = Convert.ToInt32(strWidget.Split('_')[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:41:23.580

这应该工作

```
int intWidgetID = int.Parse(strTabID.Replace("tab_group_",""));//Can also use TryParse 
```

# android - 使用 NDK 调整图像属性（如更改对比度、亮度等）

> ID：11540370
> 
> 赞同：0
> 
> 时间：2012-07-18T11:33:33.873
> 
> 标签：android, android-ndk

如何使用 NDK 执行图像处理？我已经建立了 NDK 并且对该主题进行了很多研究，但没有得到任何结果。

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T09:27:06.423

为了快速入门，我推荐[Craig Lindley 的书](https://rads.stackoverflow.com/amzn/click/com/0471543772) （C 中的实用图像处理）。图像（位图）只不过是一个二维字节数组（实际上表示为一维数组）。您可以操纵单个像素来实现亮度/对比度调整。

构建直方图，重新计算图像的新值（以调整收缩）。

如果您不想阅读任何书，请查找以下教程：[http](http://homepages.inf.ed.ac.uk/rbf/HIPR2/histgram.htm) ://homepages.inf.ed.ac.uk/rbf/HIPR2/histgram.htm 并[在 Wikipedia 上阅读相关内容](http://en.wikipedia.org/wiki/Histogram_equalization)

# iphone - Facebook sdk 在 iPhone 应用程序上的墙上发布

> ID：11540372
> 
> 赞同：6
> 
> 时间：2012-07-18T11:33:37.477
> 
> 标签：iphone, objective-c, ios, facebook

我在我的 iPhone 应用程序中在墙上实现 Facebook 发布时遇到问题。我安装了 SDK 并且链接的框架登录工作正常。这是代码：

```
-(IBAction)loginButtonPressed:(id)sender
{
    NSLog(@"loginButtonPressed: called");

    AppDelegate *appdel=[[UIApplication sharedApplication] delegate];
    appdel.facebookSession=[[FBSession alloc] init];
    [appdel.facebookSession openWithCompletionHandler:^(FBSession *session, 
                                                     FBSessionState status, 
                                                     NSError *error)
    {
        //
    }];
} 
```

但是我在用户的墙上发布消息时遇到问题。这是代码：

```
-(IBAction)likeButtonPressed:(id)sender
{
    NSLog(@"likeButtonPressed: called");
    // Post a status update to the user's feedm via the Graph API, and display an alert view 
    // with the results or an error.

    NSString *message = @"test message";
    NSDictionary *params = [NSDictionary dictionaryWithObject:message forKey:@"message"];

    // use the "startWith" helper static on FBRequest to both create and start a request, with
    // a specified completion handler.
    [FBRequest startWithGraphPath:@"me/feed"
                       parameters:params
                       HTTPMethod:@"POST"
                completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                    [self showAlert:message result:result error:error];
                }];

} 
```

请帮帮我。我的代码有什么问题？或者我应该为登录请求添加一些权限？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T12:46:44.737

这段代码对我有用。首先我们必须

```
#import <FBiOSSDK/FacebookSDK.h> 
```

然后

```
@property (strong, nonatomic) FBRequestConnection *requestConnection; 
```

当然不要忘记合成：

```
@synthesize requestConnection; 
```

代码本身：

```
-(IBAction)likeButtonPressed:(id)sender
{
    NSLog(@"likeButtonPressed: called");
    // FBSample logic
    // Check to see whether we have already opened a session.
    if (FBSession.activeSession.isOpen)
    {
        // login is integrated with the send button -- so if open, we send
        [self postOnWall];
    }
    else
    {
        [FBSession sessionOpenWithPermissions:[NSArray arrayWithObjects:@"publish_stream", nil]
                                completionHandler:
             ^(FBSession *session, 
               FBSessionState status, 
               NSError *error)
            {
                 // if login fails for any reason, we alert
                 if (error)
                 {
                     NSLog(@"    login failed");
                     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                     message:error.localizedDescription
                                                                    delegate:nil
                                                           cancelButtonTitle:@"OK"
                                                           otherButtonTitles:nil];
                     [alert show];
                     // if otherwise we check to see if the session is open, an alternative to
                     // to the FB_ISSESSIONOPENWITHSTATE helper-macro would be to check the isOpen
                     // property of the session object; the macros are useful, however, for more
                     // detailed state checking for FBSession objects
                 }
                 else if (FB_ISSESSIONOPENWITHSTATE(status))
                 {
                     NSLog(@"    sending post on wall request...");
                     // send our requests if we successfully logged in
                     [self postOnWall]; 
                 }
             }];
    };
}

- (void)postOnWall
{
    NSNumber *testMessageIndex=[[NSNumber alloc] init];
    if ([[NSUserDefaults standardUserDefaults] objectForKey:@"testMessageIndex"]==nil)
    {
        testMessageIndex=[NSNumber numberWithInt:100];
    }
    else
    {
        testMessageIndex=[[NSUserDefaults standardUserDefaults] objectForKey:@"testMessageIndex"];
    };
    testMessageIndex=[NSNumber numberWithInt:[testMessageIndex intValue]+1];
    [[NSUserDefaults standardUserDefaults] setObject:testMessageIndex forKey:@"testMessageIndex"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    // create the connection object
    FBRequestConnection *newConnection = [[FBRequestConnection alloc] init];

    // create a handler block to handle the results of the request for fbid's profile
    FBRequestHandler handler =
    ^(FBRequestConnection *connection, id result, NSError *error) {
        // output the results of the request
        [self requestCompleted:connection forFbID:@"me" result:result error:error];
    };

    // create the request object, using the fbid as the graph path
    // as an alternative the request* static methods of the FBRequest class could
    // be used to fetch common requests, such as /me and /me/friends
    NSString *messageString=[NSString stringWithFormat:@"wk test message %i", [testMessageIndex intValue]];
    FBRequest *request=[[FBRequest alloc] initWithSession:FBSession.activeSession graphPath:@"me/feed" parameters:[NSDictionary dictionaryWithObject:messageString forKey:@"message"] HTTPMethod:@"POST"];

    // add the request to the connection object, if more than one request is added
    // the connection object will compose the requests as a batch request; whether or
    // not the request is a batch or a singleton, the handler behavior is the same,
    // allowing the application to be dynamic in regards to whether a single or multiple
    // requests are occuring
    [newConnection addRequest:request completionHandler:handler];

    // if there's an outstanding connection, just cancel
    [self.requestConnection cancel];

    // keep track of our connection, and start it
    self.requestConnection = newConnection;    
    [newConnection start];
}

// FBSample logic
// Report any results.  Invoked once for each request we make.
- (void)requestCompleted:(FBRequestConnection *)connection
                 forFbID:fbID
                  result:(id)result
                   error:(NSError *)error
{
    NSLog(@"request completed");

    // not the completion we were looking for...
    if (self.requestConnection &&
        connection != self.requestConnection)
    {
        NSLog(@"    not the completion we are looking for");
        return;
    }

    // clean this up, for posterity
    self.requestConnection = nil;

    if (error)
    {
        NSLog(@"    error");
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"error" message:error.localizedDescription delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil];
        // error contains details about why the request failed
        [alert show];
    }
    else
    {
        NSLog(@"   ok");        
    };
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:47:27.090

试试这个代码

```
 NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSArray* facebookCookies = [cookies cookiesForURL:
                            [NSURL URLWithString:@"http://login.facebook.com"]];

for (NSHTTPCookie* cookie in facebookCookies) {
    [cookies deleteCookie:cookie];
}
NSString *FBBody = [NSString stringWithFormat:@"your message you want to post"];
UIImage *img=[UIImage imageNamed:[NSString stringWithFormat:image naemif you want to post]];
FBFeedPost *post = [[FBFeedPost alloc] initWithPhoto:img name:FBBody];
[post publishPostWithDelegate:self];
[[UIAppDelegate indicator] startAnimating];
IFNNotificationDisplay *display = [[IFNNotificationDisplay alloc] init];
display.type = NotificationDisplayTypeLoading;
display.tag = NOTIFICATION_DISPLAY_TAG; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-21T11:57:10.757

您应该设置权限：“status_update”。

像这样 ：

```
FBLoginView *loginview = [[FBLoginView alloc] initWithPermissions:[NSArray arrayWithObject:@"status_update"]]; 
```

或者

```
FBSession *fbSession = [[FBSession alloc] initWithPermissions:[NSArray arrayWithObject:@"status_update"]]; 
```

# r - R中堆叠和并排条形图的组合

> ID：11540375
> 
> 赞同：1
> 
> 时间：2012-07-18T11:33:52.573
> 
> 标签：r, lattice

在 R 的 lattice 包中，可以创建堆叠条形图。我想有几个类似于这个的并排堆叠的条：

```
barchart( mpg ~ as.factor(gear), data=mtcars, groups=cyl, stack=F, horizontal=F, auto.key=T ) 
```

![带盖条的并排条形图](../Images/f8695f3f4a146991ea86489601d01ce4.png)

这几乎是我需要的。问题是条形图是分层的，例如，对于中心的粉红色条形图，有 3 个值大致相同（介于 17 和 22 之间）的分层条形图。条不堆叠。稍后绘制的条覆盖了之前绘制的条。

堆叠条以及并排条和附加图例是否也可以具有不同的颜色/纹理？堆栈中的不同级别来自另一个因素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:20:24.087

```
library(ggplot2)
ggplot(mtcars, aes(x = factor(cyl), y = mpg, fill = factor(cyl))) + geom_bar(stat = "identity", colour = "black") + facet_wrap(~gear) 
```

![在此处输入图像描述](../Images/47ce2c2bc62bebcfc500c277c309e711.png) mtcars$ID <- rownames(mtcars) ggplot(mtcars, aes(x = factor(gear), y = mpg, fill = factor(cyl), group = ID)) + geom_bar(stat = "identity", position = "躲闪”）

![在此处输入图像描述](../Images/e032305a72f04fffa53fa804f9c79971.png)

```
ggplot(mtcars, aes(x = factor(gear), y = mpg, colour = factor(cyl))) + geom_jitter() 
```

![在此处输入图像描述](../Images/f37d009daf1bd636e6b8d975f58d07c4.png)

```
ggplot(mtcars, aes(x = factor(gear), y = mpg, colour = factor(cyl))) + geom_boxplot() 
```

![在此处输入图像描述](../Images/6d42ac41167a9c7b096e51e495ae94a2.png)

# javascript - Firefox 中的 CSS 圆角边框

> ID：11540378
> 
> 赞同：-3
> 
> 时间：2012-07-18T11:33:58.327
> 
> 标签：javascript, firefox, css

如何使用边框半径为 Firefox 提供圆形边框？我在 Ubuntu 上使用 Firefox 14。

**编辑：** 我试过

```
-moz-border-radius 
```

以及所有其他浏览器特定的评论，它们都没有奏效。我在谷歌上搜索后已经找到了这个，这就是我在这里问的原因。

如果我使用 KDE 有什么不同吗？我已经在特定于窗口的覆盖中添加了 Firefox。

我的[userChrome.css](http://pastebin.com/0c1zR2G5)文件以此开头：

```
-webkit-border-radius: 6px;
-moz-border-radius: 6px;
border-radius: 6px; 
```

它应该以不同的方式实现吗？我使用的其余 css 代码都可以正常工作。谢谢！

***结果：*** 我想绕过整个边界的拐角，但显然这是不可能的。很抱歉给您带来了误解，谢谢您的麻烦！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:41:13.613

-moz-border-radius css 属性会处理这个问题。

以下是浏览器特定的边框半径属性：

```
border-radius: 8px;
-webkit-border-radius: 8px;
-moz-border-radius: 8px; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:10:48.980

嗯，您是否为您的属性指定了[**选择器**](http://www.w3.org/TR/css3-selectors/)？[您链接的文件](http://pastebin.com/0c1zR2G5)缺少它们。试试这个：

```
* {
    -webkit-border-radius: 6px;
    -ms-border-radius: 6px;
    -o-border-radius: 6px;
    -moz-border-radius: 6px;
    border-radius: 6px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:35:52.820

用这个。

```
-moz-border-radius: <radius>px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:36:52.943

请使用`-moz-border-radius`属性作为边界半径。欲了解更多信息，请访问

[圆形边框](http://www.css3.info/preview/rounded-border/)

# c# - 没有 oauth 且具有 API 的免费云存储提供商？

> ID：11540380
> 
> 赞同：6
> 
> 时间：2012-07-18T11:34:03.647
> 
> 标签：c#, .net, backup, cloud, cloud-storage

任何人都知道一个 **免费**的（一些免费的卷，我的意思是 2-5 GB - 连续，不仅仅是像 Amazon S3 这样的第一年）云存储提供商，它的 API**不**使用 oauth 吗？

我需要它来从控制台服务（预定的网络浏览器和用户输入免费应用程序）进行定期备份。

我看过 DropBox、Google Drive、SkyDrive 和 UbuntuOne。
DropBox 和 Google 使用我不能使用的 oAuth（oAuth**不是**免费的网络浏览器和用户输入）。
UbuntuOne 的“API”是一团糟——根本无法使用。
SkyDrive SDK 需要 Windows。我的数据在 Linux 服务器上，这不会改变。

# java - 带有键盘导航的非 GPL Swing 日期选择器？

> ID：11540385
> 
> 赞同：1
> 
> 时间：2012-07-18T11:34:22.507
> 
> 标签：java, swing, datepicker

我正在寻找一个 Java Swing 日期选择器，它**专门**允许您使用键盘导航日历视图。我只从 SwingX 中找到[了 JXDatePicker 、](http://swingx.java.net/) ['DatePicker'](http://sourceforge.net/projects/datepicker)和其他几个，它们都提供带有按钮的标准文本字段来显示日历 - 但这些都不允许您单独使用键盘进行导航。用例 - 假设您的鼠标坏了或不可用（这是实际的客户要求）。

任何指针？哦，我不会用驳船杆接触 GPL 或类似许可的东西——这是针对商业项目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:10:49.327

也许[JIDE](http://www.jidesoft.com/products/grids.htm)可能会让您感兴趣。它有`DateComboBox`和`DateChooserPanel`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:37:08.540

将关键侦听器附加到它。
当用户按下“->”键（右箭头）时，向前更改月/周/w/e。
当用户按下“<-”键（左箭头）时，向后更改

等等。

# php - 简单框架 MVC：如何将控制器操作关联到 url？

> ID：11540387
> 
> 赞同：2
> 
> 时间：2012-07-18T11:34:25.637
> 
> 标签：php, frameworks

我按照[这个](http://net.tutsplus.com/tutorials/php/create-your-first-tiny-mvc-boilerplate-with-php/)不错的视频教程创建了一个迷你 MVC PHP 框架。

正如你所看到的，这个家伙创建了一个`home()`在 Controller 类中调用的动作来显示主页。

现在，我需要创建另一个名为`foobar()`显示另一个页面的操作，但是如何以简单的方式将其关联到 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:41:23.283

这通常通过路由来完成。如果 URL 的第一部分标识控制器，第二部分标识操作，则提取这些变量并相应地路由。

一个非常基本的例子：

```
$action = 'foobar';
$controllerName = 'whatever';

if(class_exists($controllerName)){

    $controller = new $controllerName;

    if(method_exists($controller, $action)){

        $controller->$action();

    }
} 
```

显然，`$action`和`$controllerName`都是从 URL 中获得的。

此代码片段尝试在名为“whatever”的类中调用方法“foobar”。

# unit-testing - 存根测试类中的方法以测试另一个方法

> ID：11540393
> 
> 赞同：1
> 
> 时间：2012-07-18T11:34:41.117
> 
> 标签：unit-testing, mocking, stub, stubbing

我发现 stub 和 mock 在测试中非常有帮助。但我想知道一件事。我想一个例子会清楚地表明这一点。

```
Class A {
    public function isOk() {
        // some work
    }

    public function iAmDepend() {
        if ($this->isOk()) {
            // do work
        }
    }
}

class TestA {
    public function testIsOk() {
        // Test itOk here
    }

    public function testIAmDepend() {
        mock(A)->method(isOk)->return(true);
        // tests for iAmDepend
    }

} 
```

做这样的事情是明智的吗？测试类的存根方法。或者它可能违反了一些规则？

PS。我无法重构代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:49:10.957

您的示例是正确的，即`testIsOk`仅测试`IsOk`，并且`testIAmDepend`仅测试`IAmDepend`。

但是你必须了解 mock 和 stub 之间的重要区别：[mock 和 stub 之间的区别](http://martinfowler.com/articles/mocksArentStubs.html#TheDifferenceBetweenMocksAndStubs)。

在您的示例中，如果`testIAmDepend`正在验证`isOk`已使用某些参数调用，并且这是您对 unittest 的断言的一部分，则这是*mock*。否则，这是*stub*，您将无法验证它是否已被调用。

# java - 使用 Tomcat 和 Eclipse IDE 的 Hibernate 和 Jersey 冲突

> ID：11540399
> 
> 赞同：1
> 
> 时间：2012-07-18T11:35:23.687
> 
> 标签：java, eclipse, hibernate, tomcat, jersey

在我的项目中，我同时使用 Hibernate 和 Jersey

[http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html](http://www.hildeberto.com/2008/05/hibernate-and-jersey-conflict-on.html)

**Jersey 使用 ASM 库，Hibernate 也使用该库，但版本不同。Hibernate 使用 1.5.3 版本，Jersey 使用 3.5.1。很大的不同！我们不能只是删除旧版本并把新版本放在那里，因为它们在架构上是不同的。版本 1.5.3 有一个“attrs”包，而 3.5.1 没有它，而是一个“签名”包。cglib 包需要 ASM 包，它是 Hibernate 库的一部分。如果我们删除该包，Jersey 将正常工作，但 Hibernate 将停止工作。要解决此冲突，请使用 cglib-nodep.jar 而不是 cglib.jar，并将 ASM 版本 3.x 与 Jersey 保持一致。cglib-nodep.jar 包含 cglib.jar 所需的一些 ASM 类，更改包名以避免任何类冲突。**

但是在包括`asm-3.1.jar`, `asm-attrs-2.2.3.jar`, `asm-commons-3.1.jar`,之后`asm-util-3.1.jar`，`cglib-nodep-2.1_3sources.jar`我收到了错误：

如果我放置`cglib 2.1.3`：

```
java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(Z)V
    at net.sf.cglib.core.DebuggingClassWriter.<init>(DebuggingClassWriter.java:47)
    at net.sf.cglib.core.DefaultGeneratorStrategy.getClassWriter(DefaultGeneratorStrategy.java:30) 
```

如果我放置`cglib-nodep-2.1_3-sources.jar`：

```
java.lang.ClassNotFoundException: net.sf.cglib.core.KeyFactory
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546) 
```

请任何人列出解决此问题所需的 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:06:06.583

如果我没记错的话，cglib 不再是 Hibernate 的首选字节码提供程序。而是 Javassist，您可以使用以下命令强制 Javassist：

```
hibernate.bytecode.provider=javassist 
```

在最新版本的 Hibernate 中，这已经是默认行为。您必须拥有旧版本的 Hibernate，或者该项目已被配置为使用 cglib 覆盖上述内容。因此，您可以更新您的 Hibernate 版本，或者将您的实例配置为使用 javassist。配置类型取决于您的环境和您想要的。通常，您将上述行包含在类路径中的 hibernate.properties 文件中。我认为您还可以添加`-Dhibernate.bytecode.provider=javassist`到命令行或 JAVA_OPTS 中以进行 JBoss 配置。

您可以在此处和网络上的其他地方[看到更多讨论。](http://forum.springsource.org/showthread.php?33286-Hibernate-with-Javassist-bytecode-provider-from-Spring)只是谷歌**hibernate.bytecode.provider**

# java - GWT 更改包结构，找不到 gwt.xml

> ID：11540404
> 
> 赞同：0
> 
> 时间：2012-07-18T11:35:44.850
> 
> 标签：java, gwt, jetty, package

我在 Eclipse Juno 的 GWT 下开发了整个项目。在开发和测试它（它工作得很好）之后，我决定稍微改变一下根包结构。

从

```
sk.jakub 
```

至

```
sk.jakub.app 
```

不严重。我更改了 .xml 文件中的所有引用。但我仍然收到以下错误：

```
Loading modules
   sk.jakub.Editor1
      [ERROR] Unable to find 'sk/jakub/Editor1.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
[ERROR] shell failed in doStartup method 
```

问题显然是 GWT 试图在旧包结构下找到 Editor1.gwt.xml。包结构未更新。

我以为我忘了更新入口点模块设置，但它们很好。所以我不明白为什么会这样。

任何建议如何解决这个问题？

非常感谢您的回答:)

更新：这是我的部署描述符（对我来说似乎很好）：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
              http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"
         xmlns="http://java.sun.com/xml/ns/javaee">

<!-- Context params -->
  <context-param>
    <param-name>contextConfiguration</param-name>
    <param-value>WEB-INF/*-context.xml</param-value>
  </context-param>

  <!-- Listeners -->
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>

  <!-- Servlets -->
  <servlet>
    <servlet-name>spring4gwt</servlet-name>
    <servlet-class>org.spring4gwt.server.SpringGwtRemoteServiceServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>spring4gwt</servlet-name>
    <url-pattern>/editor1/app/componentService</url-pattern>
  </servlet-mapping>
  <!-- Default page to serve -->
  <welcome-file-list>
    <welcome-file>Editor1.html</welcome-file>
  </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:55:19.767

在日食中，必须`run, run configurations, select your project, select the arguments tab.`

在程序参数窗口中确保您有更新的条目。我想你需要：

```
com.google.appengine.tools.development.gwt.AppEngineLauncher sk.jakub.app.Editor1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:07:17.457

检查您的 GWT 编译器设置。您必须指定包含包的 GWT 模块。重构包结构时，您必须更正这些设置。

在 Eclipse 中编译时，GWT“编译”对话框列出了“入口点模块”。检查模块“Editor1”是否已列出并具有正确的包结构。

在开发模式下作为 Web 应用程序启动时，如果您的模块正确列出，您必须检查选项卡“GWT”和“参数”。

同样适用于 ant 构建。

# objective-c - 如何在 NSPoint 上定义基本的几何运算？

> ID：11540407
> 
> 赞同：1
> 
> 时间：2012-07-18T11:35:53.770
> 
> 标签：objective-c, cocoa

NSPoint 是 Cocoa 中用于表示平面中的一个点的 C 结构。

你如何以 Objective-C 风格在 NSPoint 上平移、旋转和执行其他几何操作？

到目前为止，我使用 C 函数来进行这些计算，但在我看来，其余代码看起来并不好。

```
-(NSPoint) rotateAroundNSPoint: (NSPoint)origin  pointToRotate:(NSPoint)point andDegreesAngle:(float)angleD;
NSPoint rotateAround(NSPoint origin, NSPoint initialPos, float angleDegrees)

/* C-style function */
NSPoint pointD = rotateAround(point000, point001, 72*9);
/* Objective-C method */
NSPoint pointE = [self rotateAroundNSPoint:point000 pointToRotate:point001 andDegreesAngle:72*12]; 
```

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:41:19.773

Cocoa 定义了指向此类函数的宏，因此您可以这样做以保持一致的样式

例如

```
#define NSPointRotateAround(origin, initialPos, angleDegrees) rotateAround(origin, initialPos, angleDegrees) 
```

它仍然会调用相同的代码，只是看起来更整洁一些。您也可以将几何函数移动到一个公共文件中，不需要将它们与类关联

注意：我只是看了看，可可实际上使用了内联函数，所以你也可以这样做（调用代码看起来都一样）

# php - 如何在 php 聊天系统中获取准确的在线用户数？

> ID：11540408
> 
> 赞同：-2
> 
> 时间：2012-07-18T11:35:54.393
> 
> 标签：php, ajax

我使用 php 和 ajax 创建了一个聊天系统。当用户登录到这个聊天系统时，in table`is_online`字段*状态*会更新为 1。我正在使用此字段列出当前在线成员。

*如果用户在不按注销*的情况下关闭我网站的所有选项卡，我必须将*状态*更新为 0 。

 *我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:51:28.863

**没有故障证明，实时，有效的方法**

从理论上讲，**没有**办法安全地确定浏览器的状态。有诸如 DOM **onunload**或**onbeforeunload**事件之类的事件。可能您可以附加一个 AJAX 请求作为对该事件的响应。那将设置`online=0`。但问题是不能保证这个事件会一直触发。（比如浏览器进程被杀死时会发生什么？）

唯一的标准解决方案是定期向服务器发送非常轻量的 AJAX 请求。服务器端程序应该为每个用户维护该`lastSeenAtTime`字段，并在某个特定时间（可能是 10 分钟？）内没有收到请求时自动设置为零

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:48:02.927

跟踪表中的最后一条消息/操作。要更新计数器，只选择他们最后一次操作不超过 1 分钟前的那些。而且，如果你愿意，可以使用 is_online 来跟踪注销:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:51:40.460

真是糟糕的方法。

* * *

`online_users`用字段`name`和制作一个表格`timeout`。存储用户名（或 ID，或任何其他标识）和当前时间戳 + 5 分钟（或不同的阈值，由您决定）。

显示在线用户时，从该表中选择`timeout`比当前时间戳大的所有用户。例子：

```
$time = time();
$result = mysql_query("SELECT `name` FROM `online_users` WHERE `timeout` > '$time'"); 
```

并设置一个每天清洁一次桌子的 CRON。

并且不要忘记更新`timeout`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T11:44:16.687

我认为您应该每 5 分钟检查一次用户的活动，例如，当用户关闭计算机时，雅虎显示在线状态，但 5 分钟后显示离线。这是我的算法。我认为你不能每秒检查一次，而且检查时间有延迟*

# c# - 使用 Agility Pack 用另一个节点包围现有节点

> ID：11540415
> 
> 赞同：4
> 
> 时间：2012-07-18T11:36:12.253
> 
> 标签：c#, html-agility-pack

你将如何用一个`<div class="overflow"></div>`节点包围所有表？这显然不这样做：

```
if (oldElement.Name == "table")
{
    HtmlDocument doc = new HtmlDocument();
    HtmlNode newElement = doc.CreateElement("div");
    newElement.SetAttributeValue("class", "overflow");
    newElement.AppendChild(oldElement);
    oldElement.ParentNode.ReplaceChild(newElement, oldElement);
} 
```

当我尝试该代码时，表格没有任何反应。但如果我使用：

```
if (oldElement.Name == "table")
{
    oldElement.Remove();
} 
```

所有表都确实被删除了，所以我确定我正在访问正确的节点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T14:02:09.570

它可能有点难看，但您可以像这样编辑 oldElement.ParentNode 节点的 InnerHtml 属性：

```
if (oldElement.Name == "table")
{
    oldElement.ParentNode.InnerHtml = "\r\n<div class=\"overflow\">\r\n"
        + oldElement.OuterHtml +
        "\r\n</div>\r\n";
} 
```

您似乎也无法编辑 oldElement 的 OuterHtml 属性（这就是您必须首先获取 ParentNode 的原因）。HtmlAgilityPack 说您可以获取/设置 OuterHtml，但 VS2010 告诉我这是一个只读属性。

**编辑**

我正在玩一些代码来解决这个问题，并看到它在被调用后`oldElement.ParentNode`变成了`<div>`节点。`AppendChild()`我找到的解决方案是`HtmlNode`在 if 块的开头创建另一个来保存父节点，然后`ReplaceChild()`在最后调用该节点：

```
if (oldElement.Name == "table")
{
    HtmlNode theParent = oldElement.ParentNode;

    HtmlDocument doc = new HtmlDocument();
    HtmlNode newElement = doc.CreateElement("div");
    newElement.SetAttributeValue("class", "overflow");
    newElement.AppendChild(oldElement);

    theParent.ReplaceChild(newElement, oldElement);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:10:37.427

看看[CsQuery](https://github.com/jamietre/CsQuery)，一个 jQuery 的 C# 端口。这很容易实现。首先加载文档：

```
CQ doc = CQ.CreateFromFile(..)  // or
CQ doc = CQ.CreateFromUrl(..)   // or
CQ doc = CQ.Create(string) 
```

创建要包装的结构，这里有四种不同的方法可以做到这一点。

```
var wrap = CQ.CreateFragment("<div class='overflow'></div>");   // or

// you can pass HTML as a selector as in jQuery. The property indexer for a CQ
// object is the default method, same as $(..)

var wrap = doc["<div class='overflow'></div>"];   // or

var wrap = doc["<div />"].AddClass("overflow");  // or

// creates an element directly, sames as browser DOM methods

var wrap = doc.Document.CreateElement("div");
wrap.ClassName="overflow"; 
```

用以下结构包装所有表：

```
doc["table"].Wrap(wrap);          // or use longhand for the Select method

doc.Select("table").Wrap(wrap); 
```

将完整的文档呈现为字符串：

```
string html = doc.Render(); 
```

# objective-c - 名称中带有“iPhone”或“iPad”的驼峰式标识符的约定

> ID：11540419
> 
> 赞同：5
> 
> 时间：2012-07-18T11:36:23.113
> 
> 标签：objective-c, cocoa-touch, cocoa, naming-conventions

TRiViAL，我知道，但是在遵守约定时，iDevice 名称中的“i”是否有约定，作为较长标识符的一部分`camelCase`？Apple 是否有任何方法名称或标识符作为此类示例？

`someIPadMethod`对比`someiPadMethod`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:38:04.753

这是一个给你的：`kAudioUnitSubType_AUiPodEQ`

这是另一个使用相反约定的：`kABPersonPhoneIPhoneLabel`

第三种：`NSCoreDataVersionNumber_iPhoneOS_4_0`

看起来像多个约定。

# xml - 检查条件 xslt

> ID：11540422
> 
> 赞同：1
> 
> 时间：2012-07-18T11:36:30.183
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

与上一篇文章。

链接在这里

[上一个问题](https://stackoverflow.com/questions/11523708/condition-checking-in-xslt/11534191#11534191)

再次在输入 xml 中进行小更新，其他验证都相同。这里只有章节（元素）在变化，而不是章节我会有数字

```
<tutorial>
<lessons>
    <lesson>
     12000 Bat 20 
    </lesson>
    <lesson>
        15000 Pen Ball 10~ 
    </lesson>
    <lesson>
        14000 Book 
    </lesson>
    <lesson>
        note lesson
    </lesson>
</lessons>
<lessons1>
    <lesson>
        24000 Pencil 10
    </lesson>
    <lesson>
        description page
    </lesson>
    <lesson>
        8000 Car Tank 25
    </lesson>
</lessons1> 
```

在上一个问题中，我们有第一个节点（第 20 章），但这里我有 12000 蝙蝠 20

上述输入的期望输出是

```
<Geography>
<historical>
  <social>
     <toc1>
        <toc>
           <chapter>12000</chapter>
           <unit>Bat</unit>
           <pages>20</pages>
        </toc>
        <toc>
           <chapter>15000</chapter>
           <unit>Pen Ball</unit>
           <pages>10</pages>
        </toc>
        <toc>
           <chapter>14000</chapter>
           <unit>Book</unit>
           <pages>10</pages>
        </toc>
        <toc>
           <sample>
              <original>note lesson</original>
           </sample>
        </toc>
     </toc1>
     <toc2>
        <toc>
           <chapter>24000</chapter>
           <unit>Pencil</unit>
           <pages>10</pages>
        </toc>
        <toc>
           <sample>
              <original>description page</original>
           </sample>
        </toc>
        <toc>
           <chapter>8000</chapter>
           <unit>Car Tank</unit>
           <pages>25</pages>
        </toc>
     </toc2>
  </social> 
```

@Dimitre & @Tomalak 从下一次开始，我会写出完全准备好的问题，我肯定会用我所拥有的解决方案发布它，现在我开始用下面的输出和以前的输出更快地学习（XSLT）。

请在这里指导我

在此先感谢 Karthic

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T03:38:39.293

**这种转变**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:xs="http://www.w3.org/2001/XMLSchema" exclude-result-prefixes="xs">
                <xsl:output omit-xml-declaration="yes" indent="yes"/>
                <xsl:strip-space elements="*"/>

             <xsl:template match="tutorial">
                <Geography>
                  <historical>
                    <social>
                         <xsl:apply-templates select=
                         "*[starts-with(name(),'lessons')]"/>
                    </social>
                  </historical>
                </Geography>
             </xsl:template>

             <xsl:template match="*[starts-with(name(), 'lessons')]">
              <xsl:variable name="vPos" select="position()"/>

              <xsl:element name="toc{$vPos}">
               <xsl:apply-templates/>
              </xsl:element>

             </xsl:template>

             <xsl:template match=
             "lesson[substring-before(normalize-space(), ' ')
                    castable as xs:integer
                    ]">
              <xsl:variable name="vNorm" select=
                             "translate(normalize-space(), '~', '')"/>
              <xsl:variable name="vAtUnit" select=
                             "substring-after($vNorm, ' ')"/>

              <xsl:variable name="vUnit" select=
              "replace($vAtUnit, '([^0123456789]+)(\d*)', '$1')"/>

              <xsl:variable name="vLastPart" as="xs:string" select=
               "substring-after($vAtUnit, $vUnit)"/>

              <xsl:variable name="vNum"
                select="concat($vLastPart, '10'[not($vLastPart)])"/>

              <toc>
                <chapter>
                 <xsl:value-of select="substring-before($vNorm, ' ')"/>
                </chapter>
                <unit><xsl:value-of select="normalize-space($vUnit)"/></unit>
                <pages><xsl:value-of select="$vNum"/></pages>
              </toc>
             </xsl:template>

             <xsl:template match="lesson">
               <toc>
                   <sample>
                     <original><xsl:value-of select="normalize-space()"/></original>
                   </sample>
               </toc>
             </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
 <tutorial>
    <lessons>
        <lesson>
         12000 Bat 20
        </lesson>
        <lesson>
            15000 Pen Ball 10~
        </lesson>
        <lesson>
            14000 Book
        </lesson>
        <lesson>
            note lesson
        </lesson>
    </lessons>
    <lessons1>
        <lesson>
            24000 Pencil 10
        </lesson>
        <lesson>
            description page
        </lesson>
        <lesson>
            8000 Car Tank 25
        </lesson>
    </lessons1>
</tutorial> 
```

**产生想要的正确结果**：

```
<Geography>
   <historical>
      <social>
         <toc1>
            <toc>
               <chapter>12000</chapter>
               <unit>Bat</unit>
               <pages>20</pages>
            </toc>
            <toc>
               <chapter>15000</chapter>
               <unit>Pen Ball</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <chapter>14000</chapter>
               <unit>Book</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <sample>
                  <original>note lesson</original>
               </sample>
            </toc>
         </toc1>
         <toc2>
            <toc>
               <chapter>24000</chapter>
               <unit>Pencil</unit>
               <pages>10</pages>
            </toc>
            <toc>
               <sample>
                  <original>description page</original>
               </sample>
            </toc>
            <toc>
               <chapter>8000</chapter>
               <unit>Car Tank</unit>
               <pages>25</pages>
            </toc>
         </toc2>
      </social>
   </historical>
</Geography> 
```

# wordpress - 如何将我的 wordpress 网站从本地主机移动到服务器？

> ID：11540429
> 
> 赞同：-1
> 
> 时间：2012-07-18T11:36:49.650
> 
> 标签：wordpress

如何将我的网站从本地主机移动到服务器？所有图像和内容是否有任何插件或什么？请建议我

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-08T11:27:59.393

Wordpress 具有将您的网站迁移到网络服务器的完整文档。您可以查看此链接以获取帮助 [http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:39:15.477

[http://www.codemyownroad.com/13-steps-to-deploy-wordpress-from-your-localhost-to-a-live-web-server/](http://www.codemyownroad.com/13-steps-to-deploy-wordpress-from-your-localhost-to-a-live-web-server/)就是您所需要的！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-09T04:10:59.070

请检查此处以获取带有屏幕截图的详细迁移。

[http://www.ourpcgeek.com/migrating-wordpress-local-server-live-site/](http://www.ourpcgeek.com/migrating-wordpress-local-server-live-site/)

# curl - 使用 curl 重新加载 Solr 核心

> ID：11540434
> 
> 赞同：15
> 
> 时间：2012-07-18T11:37:07.063
> 
> 标签：curl, solr, reload, core

我正在尝试通过以下句子重新加载 Solr 核心（版本 3.6.0）：

```
curl http://localhost:8983/solr/admin/cores?action=RELOAD\&core=mycore 
```

当我执行它时，我得到以下响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
   <lst name="responseHeader">
      <int name="status">0</int>
      <int name="QTime">1316</int>
   </lst>
</response> 
```

当我将这样的 URL 放在浏览器中时，我得到了类似的响应（区别在于 QTime 的值）。

我的问题是，如果我从浏览器调用 URL，我可以在日志信息中看到重新加载已执行，但如果我从 CURL 语句调用它，我在日志信息中看不到任何内容（即也就是说，没有执行重新加载过程）。

我必须更改一些配置数据吗？似乎呼叫没有到达 Solr 服务器......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-11-15T19:18:11.657

尝试用双引号将 URL 括在命令中，如下所示：

```
curl "http://localhost:8983/solr/admin/cores?action=RELOAD&core=mycore" 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T11:33:50.477

1.尝试使用-A指定User-Agent

```
curl -A "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)" http://localhost:8983/solr/admin/cores?action=RELOAD\&core=mycore 
```

2.Curl不能执行js脚本

所以请确保它不是因为 js 脚本。

您可以使用 chrome 或 Firebug+Firefox 的开发者工具来检查 http 通信过程。

3.使用wireshark或sth检查“呼叫是否到达Solr服务器”。

我希望这会有所帮助。

# drupal - 请为 drupal 7 推荐任何好的时事通讯模块

> ID：11540437
> 
> 赞同：0
> 
> 时间：2012-07-18T11:37:11.640
> 
> 标签：drupal, module, drupal-7, newsletter

我正在寻找适用于 drupal 7 的 newletter 模块，它也适用于联系我们页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:19:20.327

您可以尝试这些[Newsletter](http://drupal.org/project/newsletter)和[simplenews](http://drupal.org/project/simplenews)模块。两者都将提供良好的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:07:11.710

[Simplenews](http://drupal.org/project/simplenews)发布新闻通讯并将其发送到订阅者列表。匿名用户和经过身份验证的用户都可以选择加入不同的邮件列表。通过添加 Mime Mail 模块可以发送 HTML 电子邮件。

# ms-access - 在 Microsoft Access 2010 报表中设置图表的行源

> ID：11540439
> 
> 赞同：1
> 
> 时间：2012-07-18T11:37:22.960
> 
> 标签：ms-access, vba

我在 Microsoft Access 2010 中的报表中有图表，该图表在报表的 OnLoad 中通过 VBA 获取其 RecordSource。原因是我有一个表单，用户可以在其中选择要包含在报告中的内容。所以在 VBA 中设置的查询是

```
Me.Chart01.RowSource = "xxxx WHERE tbl_cars.ID In (" & IDs & ");"
Me.Chart01.Requery
DoCmd.Requery 
```

问题是图表没有更新。在我设置 RowSource 之前和之后都做`MsgBox Me.Chart01.RowSource`了之后，SQL 似乎是正确的。当我删除 In() 部分并在查询设计中尝试时，它工作得很好。

（我以同样的方式加载报告的 RecordSource，它可以工作。）

Access 中的图表是否太差而无法执行此操作，或者是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:17:35.370

报表不会像表单那样刷新，因此如果图表未绑定，您必须小心并将更改行源的代码放置在报表呈现之前发生的事件中，如 Format 或 Print 事件。我假设您在 SQL 字符串中包含的 ID 是数字而不是字符串。

# c# - 如何使基础架构代码仅在命名空间中可见？

> ID：11540441
> 
> 赞同：3
> 
> 时间：2012-07-18T11:37:28.167
> 
> 标签：c#, namespaces, private-members

我有一个 Shutting-Yard 算法的实现，我正试图将它清晰地集成到我们的框架中。目前，我将它们全部打包到一个具有简单公共接口的类中。

```
namespace MathematicalParser {
  public class ExpressionParser {
    public ExpressionParser(string expression, List<string> variables);
    public double GetNumericValue(Dictionary<string,double> variableValues);
  }
} 
```

在这个类里面有很多辅助类、辅助枚举、静态变量等来将不同的名称映射到函数。所有这些都是私有的，因此图书馆的用户无需担心。

为了提高代码的可维护性，我试图将逻辑上不相关的代码分离到它们自己的类中，但是这些类在 ExpressionParser 之外没有任何意义，所以我想限制它们对命名空间 MathematicalParser 的可见性（仅包含 ExpressionParser）。

如何在 C# 中最好地实现这一点，internal 关键字仅适用于程序集，而 private 不能在命名空间中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:40:25.140

您是否尝试过使用私有嵌套类？
看看这里：[C# 中的私有内部类 - 为什么不经常使用它们？](https://stackoverflow.com/questions/454218/private-inner-classes-in-c-sharp-why-arent-they-used-more-often)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:20:24.060

如果您真的很想这样做（根据我对原始问题的评论），您可以将所有帮助程序类放入一个程序集中并使其内部化，这样它们就可以有效地被禁止使用。然后制作第二个程序集，即您让人们使用的程序集，并将“公共”类和方法放入第二个程序集中。然后使用`InternalsVisibleTo`允许您的“公共”程序集使用其他“私有”程序集的帮助程序类和方法。

[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

这确实意味着您必须强制使用您的库的人在与包含“公共”库代码的程序集不同的程序集中工作。我认为根据您的问题，您是说他们在同一个程序集中工作，在这种情况下，您必须将“公共”库分离到不同的程序集中。如果您确实这样做了，那么只需将方法设置为内部并将它们放在同一个程序集中就可以完成这项工作。

如果您走两个装配路线，并且如果您的同事正在处理同一个装配，那么至少在引用另一个装配时会有额外的“步骤”，这可能会阻止他们使用它。

如果*这*还不够……我不知道，写一个 WCF 网络服务并完成它*。

^(*这是讽刺)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T13:54:45.410

我不会这样做（与乔的意见相同），但这是从 Lopina 的答案中得出的另一个解决方案：**嵌套类 + 部分类**。

公共类.cs：

```
namespace MyNamespace
{
    public partial class PublicClass
    {
        public int ReturnSomeStuff()
        {
            MyHelperClass1 tmp = new MyHelperClass1();
            MyHelperClass2 tmp2 = new MyHelperClass2();

            return tmp.GetValue1() + tmp2.GetValue2();
        }
    }
} 
```

PrivateClass1.cs：

```
namespace MyNamespace
{
    public partial class PublicClass
    {
        private class MyHelperClass1
        {
            public int GetValue1()
            {
                return 5;
            }
        }
    }
} 
```

PrivateClass2.cs：

```
namespace MyNamespace
{
    public partial class PublicClass
    {
        private class MyHelperClass2
        {
            public int GetValue2()
            {
                return 10;
            }
        }
    }
} 
```

程序.cs：

```
public class Program
{
    private static void Main(string[] args)
    {
        PublicClass tmp = new PublicClass();

        MyHelperClass2 zz;  // Can't access MyHelperClass2 here cause it's private

        Console.WriteLine(tmp.ReturnSomeStuff());
        Console.ReadLine();
    }
} 
```

如您所见，您的不同帮助程序类在不同的文件中物理分离（也许它会帮助您维护代码）。而且你不能直接访问它们，它们是私有的`PublicClass`。

# .net - MVC 3 - 如何在视图索引视图而不是 ID 字段中显示查找值

> ID：11540444
> 
> 赞同：3
> 
> 时间：2012-07-18T11:37:30.540
> 
> 标签：.net, asp.net-mvc-3

我有一个非常简单的需求，但无法弄清楚如何完成

我有 2 个实体

*   员工
*   店铺

员工与商店相关联，例如（DB）

```
Employee_id, Store_id
1 1  
2 1

```

在索引视图中，我需要显示`Store_nam`e 而不是`StoreID`. 哪种是理想的“MVC”方式？我使用 LINQ to SQL 作为数据访问方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:44:21.017

我假设您的模型是类型的`IEnumerable<Employee>`，并且您将其显示在由 foreach 循环生成的表中。

然后你应该能够做到这一点：

```
@foreach(var item in Model){
    Html.DisplayFor(modelItem => modelItem.Store.Store_name)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:52:15.910

你的视图应该绑定到一个视图模型，它可以是一个可枚举的模型。但是为了保持它的整洁，你的视图模型应该是自定义视图，而不是你的 Linq to SQL 对象。因此，在这种情况下，您的视图模型将具有 StoreName 属性。我还没有测试过这些，但它应该能让你朝着正确的方向前进。

你的班

```
public class EmployeeModel {
    [HiddentInput(DisplayValue=false)]
    public int EmployeeID { get;set; }

    [Display("Name = "Store")]
    public string StoreName { get;set; }    
} 
```

你的行动

```
public ViewResult EmployeeDetails(int employeeId) {
        var model = new List<EmployeeModel>();

        foreach(var emp in Employees){
            model.Add(new EmployeeModel {
                          EmployeeID = emp.EmployeeID,
                          StoreName = emp.Store.StoreName
                      }); 
        }

        return View(model);
    } 
```

然后视图非常简单。无需使用试图确定 Store 名称的代码使您的视图复杂化。

```
@model IEnumerable<EmployeeModel>

<h2>Details</h2>

<table>
    <thead>
        <tr>
            <th>EmployeeID</th>
            <th>Store Name</th>
        </tr>

    </thead>
    <tbody>
        @foreach(var emp in Model){
         <tr>
             <td>emp.EmployeeID</td>
             <td>emp.StoreName</td>
         </tr>
        }      
    </tbody>

</table> 
```

如果这是 Employee 的编辑页面，您可以在其中修改 Store，那么您可以使用选择列表。

# sql-server - 如何使用powershell验证SQL服务器实例是否正确？

> ID：11540445
> 
> 赞同：3
> 
> 时间：2012-07-18T11:37:31.837
> 
> 标签：sql-server, powershell, powershell-2.0

我们正在使用 Invoke-sqlcmd cmdlet 使用 powershell 执行 SQL 查询。

如果 SQl 服务器实例错误，则抛出异常。

虽然我已经在 try catch 中捕获了错误，但它仍然在控制台中抛出异常

> “Invoke-Sqlcmd：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误”

```
 try {
            $Qresult= Invoke-sqlcmd -query $SelectQuery -ServerInstance $srvInstance
            $Qresult = $Qresult| % { $_.$columnName+"`n" }
            LogWrite "$Qresult`n"
        }
        catch {
            Write-error "Error occured when executing sql $SelectQuery"
            LogWrite $Error[0]
        } 
```

如何在执行任何查询之前验证 SQL Server 实例是否可用以及它是否正在运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T13:45:23.880

```
function SQL-Ping-Instance 
{
    param (
        [parameter(Mandatory = $true)][string] $ServerInstance,
        [parameter(Mandatory = $false)][int] $TimeOut = 1
    )

    $PingResult = $false

    try
    {
        $SqlCatalog = "master"
        $SqlConnection = New-Object System.Data.SqlClient.SqlConnection
        $SqlConnection.ConnectionString = "Server = $ServerInstance; Database = $SqlCatalog; Integrated Security = True; Connection Timeout=$TimeOut"
        $SqlConnection.Open() 
        $PingResult = $SqlConnection.State -eq "Open"
    }

    catch
    {
    }

    finally
    {
        $SqlConnection.Close()
    }

    return $pingResult
}

if (SQL-Ping-Instance $srvInstance)
{
    $Qresult= Invoke-sqlcmd -query $SelectQuery -ServerInstance $srvInstance
    $Qresult = $Qresult| % { $_.$columnName+"`n" }
    LogWrite "$Qresult`n"
}
else
{
    LogWrite "Couldn't contact $srvInstance"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:09:05.563

无法使用 try/catch 捕获非终止错误。为了使错误成为终止错误，请将 ErrorAction 值设置为“停止”。如果没有帮助，请尝试添加 -AbortOnError 开关

```
try
{
   Invoke-sqlcmd -query... -ErrorAction Stop
}
catch
{
   $_
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:51:17.133

使用 powershell tr​​y/catch 块来捕获任何错误 - $_ 将包含完整的错误描述

```
cls
try
{
invoke-sqlcmd stuff here
}
catch
{
$_
} 
```

您也可以 ping 服务器，但尝试执行命令将同时测试服务器、测试实例并测试运行查询的数据库，并且您的 try/catch 块将在每个阶段发现任何问题。

# jquery - 无法在 IE 中使用 jquery 获取背景图像，值约为：空白

> ID：11540446
> 
> 赞同：0
> 
> 时间：2012-07-18T11:37:36.260
> 
> 标签：jquery, css, background-image

我正在尝试获取 div 的背景图像，然后通过在 bg 图像名称中添加灰色前缀来更改它。

一切都在 chrome 和 firefox 中完美运行，但在 IE 中，背景图像的值为`about-blank`. 请帮我？

```
var img= $("#nom_"+$(".nomination").attr('id')).css('background-image');
            var image = img.split('/').pop();
            var img1 = image.split(')',1);
            var img1 = "<|UP>/gray"+img1; 
```

attr('id') 在 IE 中可见问题在于`.css('background-image')`；但对于 IE，我已将其更改为

```
 if($.browser.msie){
                        var id ="nom_"+$(".nomination").attr('id');
                        obj=document.getElementById(id);
                        alert(obj.currentStyle.backgroundImage);
                    } 
```

但再次返回的值是'about-blank'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:32:19.673

好的男人......现在问题解决了......因为问题是因为样式属性......当背景图像由样式（内联）设置时，`img= $("#nom_"+$(".nomination").attr('id')).css('background-image');`在IE中不起作用......但我们可以通过改变这条线

```
var img= $("#nom_"+$(".nomination").attr('id')).attr('style');
                            var image = img.split('/').pop();
                            var img1 = image.split(')',1);
                            img1 = "<|UP>/gray"+img1; 
```

在这种情况下，它对 IE 是可见的......我可以为最终的 img1 变量添加前缀......感谢大家......）））

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T11:41:11.303

我认为在第一个例子中应该是：

.css('背景图片');

# c# - 如何获取 TableAdapter 通过 datagridview 将要发送到数据库的值？

> ID：11540448
> 
> 赞同：0
> 
> 时间：2012-07-18T11:37:40.493
> 
> 标签：c#, c#-4.0, datagridview, dataset, tableadapter

我正在使用 TabaleAdapter 和 dataGridView 输入销售条目。当即将保存一行时，我想检查所选产品的 StockBalance 并验证所选产品的当前库存不低于销售量。如果它较少我想取消销售，那么如何从下面的示例代码中获取 TableAdapter 即将插入或更新的值？

```
 private void dataGridView1_RowValidated(object sender, DataGridViewCellEventArgs e)
    {

            this.Validate();
            this.itemSalesBindingSource.EndEdit();
            this.itemSalesTableAdapter.Update(this.businessDataDataSet);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:39:24.193

在调用之前尝试使用此命令`Update(...)`：

```
DataSet changesDataSet = businessDataDataSet.GetChanges(); 
```

现在您应该有一个 DataSet 对象，该对象显示将要传输到数据库的内容。

# java - Hibernate：生成报告（存储过程）

> ID：11540450
> 
> 赞同：2
> 
> 时间：2012-07-18T11:37:56.183
> 
> 标签：java, oracle, hibernate, jpa, stored-procedures

我正在使用 Hibernate (JPA 2.0)、Spring 3.0.5 和 Oracle 11g 开发一个应用程序。

我需要根据数据库中的许多表生成一些报告（CSV）；

示例报告 CSV 如下所示：

```
From_Date    TO_Date     Group   Metric     Mon     Tue      Wed     Thu    Fri

10/01/2012   10/02/2012   HP     Average    29       74       400     99     14 
10/02/2012   10/03/2012   HP     Average    81       19       22      108    07
10/03/2012   10/04/2012   HP     Average    11       62       09      16     01

10/01/2012   10/02/2012   HP     Total      924      452      915     100    940 
10/02/2012   10/03/2012   HP     Total      185      925      266     108    857
10/03/2012   10/04/2012   HP     Total      173      201      907     675    169 
```

我的问题是，由于这份报告将取决于许多表格和不同的指标（平均值、总数和百分比），因此使用给定技术堆栈的最佳方式是什么？

我目前没有使用任何报告 api。

存储过程是要走的路吗？？？

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:22:28.030

您需要两项技术：

*   检索和计算数据的东西
*   创建可视化的东西

（+可选的一些调度机制，用于每隔一段时间自动生成报告）

**数据检索**

我强烈反对使用 JPA 和 Java 代码来组装您的数据，因为这通常会很慢，除非只有少量数据。

如果您在应用程序中使用 JPA，我会首先尝试使用 JPA 视图对象 + JPA 调整（通过配置文件/注释）。

如果这不起作用，请回退到本机 JDBC。

我的博客中有关此主题的更多信息：[作为 POJO 的 JPA 查询结果](http://www.istvandevai.com/2012/06/jpa-query-result-as-pojo.html)

如果甚至 JDBC 太慢，我只会考虑存储过程（更难编写、版本、与您的应用程序保持同步等）

**可视化**

*   您可以在 Java 中轻松创建 CSV 文件
*   有关适当的报告库/工具包，请参阅[Pentaho 报告](http://reporting.pentaho.com/)或[Jasperreports](http://jasperforge.org/projects/jasperreports/)
*   对于临时报告（没有预定义模式的报告，也就是数据分析），我建议使用[Pentaho 业务分析](http://www.pentaho.com/explore/products/)。

如果您可以利用提供的整个工具链（加载数据的 ETL、报表设计器工具、数据分析器、报表调度器等），Pentaho BI 服务器（或类似产品）将使您受益匪浅。如果您只有一些报告并且这些报告不会很快改变，那么我会坚持使用 Java 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:25:23.153

对于报告，您可以使用[JasperReports](http://jasperforge.org/projects/jasperreports/) (PDF) 或[Apache POI](http://poi.apache.org/)（MS 文档，例如 MS Excel）

问候。

# android - 我怎样才能找到两个地理点之间的距离

> ID：11540452
> 
> 赞同：0
> 
> 时间：2012-07-18T11:37:58.107
> 
> 标签：android, google-maps

我可以从 kml 文件中接收距离吗？（对不起语言不好）

```
urlString.append("http://maps.google.com/maps?");
urlString.append("&saddr=");//from
urlString.append(src.getLatitudeE6()/1e6);urlString.append(","); 
urlString.append(src.getLongitudeE6()/1e6); 
urlString.append("&daddr=");//to 
urlString.append( dest.getLatitudeE6()/1e6); 
urlString.append(","); 
urlString.append( dest.getLongitudeE6()/1e6); 
urlString.append("&ie=UTF8&0&om=0&output=kml"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:44:21.450

您提供的 URL 几个月前可以正常工作，但现在突然停止工作，并且没有下载 KML 文件，而是在谷歌地图下显示路径，我想这与谷歌的政策有冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:59:21.100

这可能对你有帮助

```
public static Double calculateDistance(Double lat1, Double lon1, Double lat2, Double lon2) {
    Double Radius = 6371.00;
    Double dLat = toRadians(lat2 - lat1);
    Double dLon = toRadians(lon2 - lon1);
    Double a = Math.sin(dLat / 2) * Math.sin(dLat / 2)
            + Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2))
            * Math.sin(dLon / 2) * Math.sin(dLon / 2);
    Double c = 2 * Math.asin(Math.sqrt(a));
    return Radius * c;
} 
```

将源纬度和经度以及目的地纬度和经度作为参数传递

# java - Java Web 应用程序中的线程

> ID：11540458
> 
> 赞同：1
> 
> 时间：2012-07-18T11:38:26.360
> 
> 标签：java, multithreading, tomcat

我需要创建一个线程来监听新的、修改的或删除的文件的文件路径。我正在使用一个使用 Spring 3、Struts 2 和 Hibernate 3 的 Web 应用程序。如果我运行该项目，它会加载包含文本“Hello World”的 index.jsp。

问题是，当我创建一个`Thread()`侦听文件路径并将其分配给 index.jsp 的 java 时：

```
<action name="" method="runThread" class="TestThreadBean">
     <result>index.jsp</result>
</action> 
```

然后“Hello World”文本永远不会出现，因为线程永远不会停止（这是正确的，它不应该停止）。我需要这个线程在后台运行并且不干扰 Web 应用程序的其余部分。我不想只为这个线程创建一个单独的 Web 应用程序。另外，我不希望`new`每次创建`new`Session 实例时都创建一个 Thread 实例，无论有多少 Session 实例处于活动状态，都应该只有一个 Thread 实例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:12:12.083

基本上，人们会建议不要在容器管理的应用程序中启动自己的线程，例如 Web 应用程序或企业 (EJB) 应用程序。

这是因为在容器环境中，包括线程在内的所有资源都应该由容器管理。但是恕我直言，如果您知道含义，以及我们自己的线程及其资源的生命周期，例如用事务包装这个线程等，那么我们可以使用标准方式（`new Thread()`）创建一个线程，但这只是我的意见。

我建议您在做出决定之前先检查一次“容器管理的线程”。您可以参考一次[commonJ](http://docs.oracle.com/cd/E11035_01/wls100/commonj/commonj.html#wp1057962)来获取 Container 的线程池的句柄，但由于这不是标准或容器规范中未提及，它可能不适用于所有容器。这将适用于：

*   [网络逻辑](http://docs.oracle.com/cd/E12840_01/wls/docs103/config_wls/self_tuned.html)
*   [网络球](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.express.doc/info/exp/asyncbns/concepts/casb_workmgr.html)
*   [Tomcat，Jboss 和可能是为其他人](http://commonj.myfoo.de/)

# c# - 在没有 XAML 的情况下创建、刷新 WPF TreeView 并记住展开的节点

> ID：11540459
> 
> 赞同：7
> 
> 时间：2012-07-18T11:38:29.147
> 
> 标签：c#, .net, wpf, xaml, treeview

我目前正在升级我的前任的工具，但我遇到了一个`TreeView`问题。他的软件对数据进行了一次分析，并将结果显示在`TreeView`. 我更改了工具来分析实时数据，因此用户可以获得实时结果。*现在，我希望树视图节点在用户展开时保持展开，即使在更新之后也是如此。*我知道这个话题已经讨论过好几次了，我花了几个小时阅读答案，但我从来没有找到解决我的问题的方法。

*基本问题是：*不再有稳定的树，目前每次都重新创建树。到目前为止，我对数据绑定或 XAML 一无所知，也很少有时间学习 XAML 编程。您可以在下面看到类似于我的前任创建的代码。到目前为止我没有改变任何东西，我只是每 2-5 秒调用一次这个方法。

是否有一种（简单的？）方法可以将有关扩展节点的信息存储在任何地方（全局？）并在刷新后重新扩展它，还是我真的需要先更深入地了解 WPF？

```
foreach (Analyzer.ALARM_GROUP alarmGroup in alarmGroupList)
{
    //Display Problem Group
    TreeViewItem groupItem = new TreeViewItem();
    List<String> ListAreas = new List<string>();
    string areas = "";

    //GROUP HEADER
    //display alarm group which contains more than one alarm
    if (alarmGroup.AlarmList.Count > 1)
    {
        groupItem.Header = Convert.ToString(alarmGroup.AlarmList.Count) + " --- " + alarmGroup.AlarmList[0].EventTime + "     " + alarmGroup.AlarmList[0].AlarmText + "\n         "
                    + alarmGroup.AlarmList[alarmGroup.AlarmList.Count - 1].EventTime + "     " + alarmGroup.AlarmList[alarmGroup.AlarmList.Count - 1].AlarmText
                    + " --- " + " AREAS: " + areas;
    }
    else //display alarm group with only one alarm message
    {
        groupItem.Header = Convert.ToString(alarmGroup.AlarmList.Count) + " --- " + alarmGroup.AlarmList[0].EventTime + "     " + alarmGroup.AlarmList[0].AlarmText + " --- " + " AREA: " + areas;
    }

    //HEADLINE of single Alarm Item
    TreeViewItem alarmItem = new TreeViewItem();
    alarmItem.Header = "[EVENTTIME]                           [ALARMTAG] --- [OPCCONDITION] --- [SEVERITY] --- [AREA] --- [ALARMTEXT]";
    alarmItem.FontWeight = FontWeights.SemiBold;
    groupItem.Items.Add(alarmItem);

    //Display single alarm messages
    foreach (var alarm in alarmGroup.AlarmList)
    {
        alarmItem = new TreeViewItem();
        alarmItem.Header = alarm.EventTime + " --- " + alarm.AlarmTag + " --- " + alarm.Condition + " --- " + alarm.Severity + " --- " + alarm.Area + " --- " + alarm.AlarmText;
        alarmItem.FontWeight = FontWeights.Normal;
        groupItem.Items.Add(alarmItem);
    }

    AlarmPresentationBox.Items.Add(groupItem); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:54:16.130

> 我真的需要先对 WPF 有更深入的了解吗？

我会说是的，特别是如果您计划更长时间地工作/支持此应用程序；如果您将来想在 WPF 中工作，那么最好亲自动手使用 XAML 和 WPF 概念。

就我个人而言，我永远不会以这种方式实现这个工具，相反，我会使用下面文章中描述的 MVVM 方法，并使其干净、可维护和高效——[使用 ViewModel 模式简化 WPF TreeView](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)

> 是否有一种（简单的？）方法可以在任何地方（全局？）存储有关扩展节点的信息并在刷新后重新扩展它

你可以试试这样的 -

创建一个列表来存储扩展节点的标题（或任何唯一属性/id）

```
private List<string> expandedNodes = new List<string>(); 
```

处理每个节点的展开和折叠事件（有子节点）

```
TreeViewItem alarmItem = new TreeViewItem();
alarmItem.Expanded += OnAlarmItemExpanded; 
```

每当节点展开/折叠时更新列表 -

```
private void OnAlarmItemExpanded(object sender, RoutedEventArgs e)
{
    TreeViewItem treeNode = sender as TreeViewItem;
    string header = treeNode.Header.ToString();
    if (expandedNodes.Contains(header) == false)
    {
        expandedNodes.Add(header);
    }
}

private void OnAlarmItemCollapsed(object sender, RoutedEventArgs e)
{
    TreeViewItem treeNode = sender as TreeViewItem;
    string header = treeNode.Header.ToString();
    if (expandedNodes.Contains(header))
    {
        expandedNodes.Remove(header);
    }
} 
```

下次创建 TreeViewItem 时，如果列表中存在标题（唯一 ID），请展开它 -

```
if (expandedNodes.Contains(header))
{
    alarmItem.IsExpanded = true;
} 
```

这需要对 groupItem 和 alarmItem 进行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-21T13:29:39.937

比较TreeViewItem -

```
private void CompareTreeViewItem(TreeViewItem TViewItem1,TreeViewItemTViewItem2)
{
    if ((string)TViewItem1.Header == (string)TViewItem2.Header)
    {
        TViewItem2.IsExpanded = TViewItem1.IsExpanded;

        if (TViewItem1.Items.Count > 0)
        {
            for (int i = 0; i < TViewItem1.Items.Count && i < TViewItem2.Items.Count; i++)
            {
                CompareTreeViewItem((TreeViewItem)TViewItem1.Items[i],
                                    (TreeViewItem)TViewItem2.Items[i]);
            }
        }
    }
} 
```

# javascript - Flash 在 IE 中挂起 javascript setTimeout 调用

> ID：11540461
> 
> 赞同：0
> 
> 时间：2012-07-18T11:38:33.657
> 
> 标签：javascript, flash, internet-explorer, settimeout

我正在从 Flash 调用 Javascript (JS) 函数来加载一些数据并在数据加载时显示 Flash 加载动画。

JS函数：

```
getLMSObjectivesStatus() 
```

由于 AJAX 调用，需要一些时间才能完成（例如 > 30 秒）。正如预期的那样，如果我直接调用 JS 函数，Flash 在等待回复时会挂起。

为了解决这个问题，我通过调用来自 Flash 的不同 JS 函数将 Flash 与 Javascript 分离，该函数使用 setTimeout 内的匿名函数调用原始 JS 函数：

```
function delayedCallToGetObjectives(){
    setTimeout(function(){getLMSObjectivesStatus()},200);
} 
```

这对 Firefox/Chrome 非常有效，因为它允许 Flash 继续加载动画而无需等待 JS 的响应。当慢速 JS 函数完成后，它会调用 Flash 告诉它使用检索到的数据并继续。可爱的，欢快的！

当我使用 setTimeout 时，IE 不会将 Flash 与 JS 分离。Flash 在等待两者时挂起：

```
delayedCallToGetObjectives() 
```

和

```
getLMSObjectivesStatus() 
```

去完成。我已经通过记录进度进行了检查，订单告诉我这绝对是正在发生的事情。

有谁知道为什么这是在 IE 中，请问有什么修复/解决方法吗？

# php - 如何使用关键字“LIKE”在 mysql 表值中搜索模式

> ID：11540462
> 
> 赞同：1
> 
> 时间：2012-07-18T11:38:34.717
> 
> 标签：php, mysql, sql-like

我试过这个查询，

```
$str =$_POST['val'].'%';
$query = mysql_query("select * from table WHERE title LIKE '$str' ORDER BY createdtime DESC LIMIT 0, 70 "); 
```

但它仅在单词的开头搜索匹配项。不要在世界其他地方搜索。例如，当我在“golden”一词中搜索模式“gold”时，它检测正确。但不是在中间或结尾或其他地方，“a gold”或“a gold”之类的词将无法正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:40:03.720

```
$query = mysql_query("select * from table WHERE title LIKE '%$str%' ORDER BY createdtime DESC LIMIT 0, 70 "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:41:35.877

你需要通过`%word%`。

```
$str =$_POST['val'];

$query = mysql_query("select * from table WHERE title LIKE '%$str%' ORDER BY createdtime DESC LIMIT 0, 70 "); 
```

# c# - asp.net 回发数据

> ID：11540464
> 
> 赞同：0
> 
> 时间：2012-07-18T11:38:36.453
> 
> 标签：c#, asp.net, post, postback

我有一个带有动态表的页面，数据是从 GET 方法中提取的。

在它上面，一个 POST 到另一个 asp 页面的按钮。

单击按钮后，如果一切正常，表应该是空的，但是即使 POST 成功发生，在按钮单击导致的回发之后，表仍然有数据，即使它不应该。

如果仅刷新页面，则它会更新。

如何使它在按钮单击后更新？（在 POST 和获取数据之后可能会有一点延迟，因此它仍然显示表格的内容）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:44:42.957

难道不是“双页加载”和初始化的情况吗？

```
 if(!isPostBack)
   {
        //Clear Table
   } 
```

# google-app-engine - Google App Engine 是否有默认的“建设中”页面？

> ID：11540465
> 
> 赞同：0
> 
> 时间：2012-07-18T11:38:39.760
> 
> 标签：google-app-engine, gwt

在 GAE (https://appengine.google.com) 的仪表板中，我找不到默认的“正在建设中”页面。我还可以创建一个页面并将其部署到 GAE。但是，如果每次我想管理站点时都必须这样做，那将非常耗时。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:44:13.127

答案 [1] 为什么不运行一个版本，直到另一个版本准备好然后切换。对不起，我不明白需要。如果版本 1 正在运行，为什么在您测试和部署版本 2 并准备好运行之前它不能运行？

答案 [2] 只需一个版本，仅服务于“建设中”页面。根据需要切换到和远离它。

选择运行版本真的很容易。只需在仪表板中选择“版本”，您就可以看到该选项。

# logging - 条码阅读器和日志生成器所需的应用程序

> ID：11540466
> 
> 赞同：-1
> 
> 时间：2012-07-18T11:38:41.820
> 
> 标签：logging, barcode, barcode-scanner, time-tracking

我正在寻找一个将条形码和当前时间记录到记事本或可以轻松上传到数据库的应用程序。

例如：用户刷他的 ID，然后应用程序将记录用户刷卡的条形码和时间，.. 基本上是一个员工时间跟踪器。

我创建了一个基于 Web 的系统，但它需要一点时间，而且用户通常会快速滑动多次。有没有这样的应用程序？或者任何人都可以建议一种编程/脚本语言来制作一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:49:04.113

如果您了解一点 PHP，则可以使用以下代码轻松完成以下操作：

```
while(true)
{
    $line = trim(fgets(STDIN));
    echo 'Recorded ' . $line . ' to database' . "\n\n";
} 
```

只需从命令行启动脚本，我假设条形码扫描仪就像键盘一样工作，它输入数字并按 Enter。

# excel - Excel中的过滤选项能否在VB6中不断启用？

> ID：11540470
> 
> 赞同：0
> 
> 时间：2012-07-18T11:39:14.207
> 
> 标签：excel, vb6

我正在 VB6 中创建一个程序，其中数据在 Excel 中打开。我有数千行数据，我使用过滤器选项来查看某些数据。我想知道的是，是否可以在打开 Excel 工作表时始终打开过滤器选项，而无需单击过滤器？我知道点击过滤器功能没什么大不了的，但它会被其他人使用，所以每次查看工作表时总是在每列的第一行有这个选项会很方便。我希望这是有道理的：/谢谢

这是我的代码：

```
Private Sub cmdReports_Click()
Dim ExcelObj As Object
Dim ExcelBook As Object
Dim ExcelSheet As Object
Dim i As Integer

Set ExcelObj = CreateObject("Excel.Application")
Set ExcelBook = ExcelObj.WorkBooks.Add
Set ExcelSheet = ExcelBook.WorkSheets(1)

With ExcelSheet
.AutoFilterMode = True
For i = 1 To ListView1.ColumnHeaders.Count
.cells(1, i) = ListView1.ColumnHeaders(i).Text
Next i
For i = 1 To ListView1.ListItems.Count
.cells(i + 1, 1) = ListView1.ListItems(i).Text
.cells(i + 1, 2) = ListView1.ListItems(i).SubItems(1)
.cells(i + 1, 3) = ListView1.ListItems(i).SubItems(2)
.cells(i + 1, 4) = ListView1.ListItems(i).SubItems(3)
Next
End With

ExcelObj.Visible = True

Set ExcelSheet = Nothing
Set ExcelBook = Nothing
Set ExcelObj = Nothing
End Sub 
```

我尝试将 .AutoFilter 属性添加到单元格，但出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:01:47.523

你试过`AutoFilter`吗`UsedRange`？

尝试这个

```
ExcelSheet.UsedRange.AutoFilter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:36:24.250

您需要在最后一个 For..Next 循环之后添加此行：

```
For i = 1 To ListView1.ColumnHeaders.Count
    .Range(.Cells(1, i), .Cells(ListView1.ListItems.Count + 1, i)).AutoFilter
Next i 
```

# wix - Wix：补丁无法更新已安装的产品并显示更改/修复对话框

> ID：11540476
> 
> 赞同：0
> 
> 时间：2012-07-18T11:39:26.243
> 
> 标签：wix, patch, msp

根据本教程，我正在使用 PCP 构建补丁：
[http ://wix.sourceforge.net/manual-wix3/patch_building.htm](http://wix.sourceforge.net/manual-wix3/patch_building.htm)

我有两个 MSI（提取为管理员安装）

1.  8.11.9.225（这是我要更新的目标）
2.  8.11.9.353（最新的）。

上面的过程没有任何问题，并生成了我的 .msp 文件，但文件很大（500+ MB），所以我认为差异太大了。

但是，每当我尝试安装此补丁时，它都会显示更改/修复对话框，如果我使用更改或修复，在这两种情况下都会出现错误

**“已安装另一个版本。您必须先卸载它才能安装此版本。”**

我什至更改了第二个 msi 中的产品代码（在所有表中），但它不能解决任何问题。

这是我的补丁代码：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
  <PatchCreation
      Id="{ff8364b1-f222-48fb-bc6b-cfb37b38fcdf}"
      CleanWorkingFolder="yes"
      OutputPath="ABD_Patch_353.pcp"
      WholeFilesOnly="yes"
       AllowProductCodeMismatches="yes"

      >

    <PatchInformation
        Description=  "Patch for build 225"
        Comments=     "Patch for build 225"
        Manufacturer= "Farrukh"
    />

    <PatchMetadata
        AllowRemoval=     "yes"
        Description=      "Patch for build 225"
        ManufacturerName= "Farrukh"
        TargetProductName="My Product 08.11.09.225"
        Classification=   "Update"
        DisplayName=      "My Product 08.11.09.225"
    />
    <Family DiskId="5000"
        MediaSrcProp="ABD_225"
        Name="ABD_225"
        SequenceStart="5000">
        <UpgradeImage  Id="ABD_353" SourceFile="D:\ABD\353\My_Product.msi" >
          <TargetImage Id="ABD_225" SourceFile="D:\ABD\225\My_Product.msi" Order="2" IgnoreMissingFiles="no" />
        </UpgradeImage>
    </Family>

    <PatchSequence PatchFamily="ABDPatchFamily" 
        Sequence="1.0.0.0"
        Supersede="yes"  
    />

  </PatchCreation>
</Wix> 
```

由于它正在生成一个大尺寸的 .msp，我应该将 msp 用于这种尺寸还是进行重大升级？

任何帮助将不胜感激

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:01:40.297

并通过使用以下命令行安装 msp 来解决：

> **msiexec /p MyPatch.msp REINSTALLMODE=oums REINSTALL=ALL /qb**

我还没有挖掘出 REINSTALLMODE=oums，但它目前正在工作。

# macos - 如何在mac OS中观察静态库的内容？

> ID：11540478
> 
> 赞同：16
> 
> 时间：2012-07-18T11:39:28.637
> 
> 标签：macos, static, unix-ar

我在我的 xCode 中创建了一个静态库项目并构建了一个*名为 mylib.a 的 .a。有一些代码（* .m 文件）和另一个名为 common.a 的静态库文件来通知静态库 nylib.a。但是我怀疑common.a的竞争是否真的包含在mylib.a中。那么如何在 mac OS 中观察 mylib.a 的内容呢？我知道在 Linux 中有一些命令，例如 ar、nm 来完成这个任务。但它不能在 mac OS 中运行。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-19T02:21:28.173

" `nm`" 肯定存在于 Mac 上（在 " `/usr/bin/`" 文件夹中）。

如果您在那里看不到它，那么您可能需要安装“Xcode 命令行工具”，您可以在[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)找到它（您需要一个 Apple开发人员登录以访问此）。

" `nm`" 将为您转储静态库文件中的所有符号。[这是它的手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/nm.1.html)。

# php - php Session 变量在表单提交的页面之间丢失

> ID：11540481
> 
> 赞同：0
> 
> 时间：2012-07-18T11:39:46.900
> 
> 标签：php, forms, session, session-variables, data-loss

我想知道是否有人可以帮助我。

如果我在页面 details.php （下面的代码）上有一个带有提交按钮的表单（除其他外）。

当单击表单的提交按钮时，您将被带到 process_tenant.php。

问题是会话变量 valid_user 似乎没有附带。我在两个页面的开头都有 session_start() 并且 session 变量肯定已设置并且永远不会在 details.php 上覆盖

谁能告诉我为什么？

**详细信息.php**

```
<?php
session_start();

    $_SESSION['valid_user'] = 'admin';

    echo $_SESSION['valid_user'];       //This prints out admin 
?>

<!DOCTYPE HTML>
<html>
<head>
        ...
    </head>

    <body>
        ...

        <form action='process_tenant.php' method='POST'>
            ...
        </form>
    </body>
</html> 
```

**process_tenant.php**

```
<?php
   session_start();

   if (isset($_SESSION['valid_user']))
   {
       echo 'heya';          //This does not print
   }

   echo 'hi' . $_SESSION['valid_user'];    //This just prints 'hi'
?>

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:56:16.483

配置文件

```
<?php
ob_start();
session_start();
$_SESSION['valid_user'] = admin;
?> 
```

详细信息.php

```
<?php
include('Config.php');
?> 
```

process_tenant.php

```
<?php
include('Config.php');

if (isset($_SESSION['valid_user']))
{
     echo 'heya';
}
echo 'hi' . $_SESSION['valid_user'];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:48:27.530

在 details.php 中，值 admin 不等于任何东西。它必须是变量或字符串或某种有效类型，否则它将被取消设置。

尝试将您的代码更改为：

```
$_SESSION['valid_user'] = 'admin'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T11:41:43.167

只开始一次，即`session_start()`只使用一次，删除`process_tenant.php`并让我知道，然后一旦完成。

# php - 我们如何使用 usort 函数执行“自然排序”

> ID：11540487
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:05.840
> 
> 标签：php, sorting

我们如何`natsort`使用 function 执行“自然排序”（由 function 完成）`usort` 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:48:48.000

尝试这个

```
<?php
function cmp($a, $b)
{
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}

$a = array(3, 2, 5, 6, 1);

usort($a, "cmp");

foreach ($a as $key => $value) {
    echo "$key: $value\n";
}
?> 
```

# asp.net - 当其中一列是日期时间数据类型时，如何绑定表的 2 列，需要正确的 sql 查询

> ID：11540488
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:07.567
> 
> 标签：asp.net, sql, datetime, drop-down-menu

我想在下拉列表中将产品和日期绑定在一起

这是sql查询

```
Select P.Id , M.ProductId as ProId , P.Name + ',+'M.[Date] as Name 
from ProductMaster as P INNER JOIN PlanMaster as M on P.Id= M.ProductId  
where M.IsDelete = 'False' order by  M.ProductId ASC 
```

如果`date`不是`datetime`格式，这有效

我得到的错误是

> 从字符串转换日期时间时转换失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:43:04.937

您必须先转换`M.Date`为，`varchar`然后才能将其与`P.Name`

如果你正在使用`SQL-Server`，试试这个

```
Select P.Id , M.ProductId as ProId ,
       P.Name + ','+ Cast(M.[Date] as varchar) as Name 
.... 
```

**编辑**：如果你只想要日期部分

```
Select P.Id , M.ProductId as ProId ,
           P.Name + ','+ CONVERT(VARCHAR(10),M.[Date],111) as Name 
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T06:09:15.113

```
Select M.CODE as Id , M.ProductId as ProId ,  M.Code + ' ,' +P.Name + ' , '+CONVERT(VARCHAR(10),M.[Date],105)  as Name from ProductMaster as P INNER JOIN PlanMaster as M on P.Id= M.ProductId  where M.IsDelete = 'False' order by  M.ProductId ASC 
```

基本上 ：`CONVERT(VARCHAR(10),M.[Date],105)`

因为我想拥有它`dd/mm/yyyy`

# mysql - MySQL WHERE 子句中的子查询使用

> ID：11540493
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:16.000
> 
> 标签：mysql, where-clause

我根本不是 sql 专家，但为什么这个查询返回错误？

```
SELECT username FROM history as h 
    WHERE username IS NOT NULL AND updated>1342555201 AND updated<1342641599
    AND WHERE (SELECT status FROM managers WHERE username=h.username) > 0 
```

如何使用包含状态的第二个表上的子查询在一个查询中将状态> 0 的用户名分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:42:19.980

你不应该有 2 个 WHERE 语句

编辑：

还 - 你应该加入经理表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:44:16.420

尝试

```
SELECT h.username FROM history  h 
INNER JOIN status s USING(username)
WHERE h.updated BETWEEN 1342555201 AND 1342641599
GROUP BY h.username
HAVING  s.status > 0 
```

**笔记 ：**

*   [`INNER JOIN`](http://dev.mysql.com/doc/refman/5.5/en/join.html)将始终检索 NOT NULL 和用户名的常用值

*   我假设两个表具有*相同的列名*。如果两个表具有不同的列名，则更改

    `USING(username)`和`ON h.column_name = s.column_name`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:43:28.713

你有`where`太多了。

```
SELECT username FROM history as h 
WHERE username IS NOT NULL AND updated>1342555201 AND updated<1342641599
AND WHERE (SELECT status FROM managers WHERE username=h.username) > 0
    ^^^^^ 
```

# c# - 在 WPF 中按下时更改默认按钮

> ID：11540494
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:18.543
> 
> 标签：c#, .net, wpf, xaml

我在 WPF 的包装面板中有两个按钮，其中一个有`IsDefault="True"`. 当我单击另一个时，我希望它成为“默认按钮”。

我意识到我可以通过收听新闻事件以编程方式做到这一点，但我想要一个通用的解决方案，不需要我在这里和那里连接很多代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:46:51.367

如果您想在更具声明性的会话中实现它，您可以`EventTrigger`在按钮的 Clicked 事件上定义一个 WPF，并定义一个故事板来更改`IsDefault`受影响按钮的属性。

这是演示我的意思的示例：

```
<Window x:Class="TriggerSample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">   
    <StackPanel>
        <Button x:Name="one" Content="One">
            <Button.Style>
                <Style TargetType="Button">
                    <Style.Triggers>
                        <EventTrigger RoutedEvent="Click">
                            <BeginStoryboard>
                                <Storyboard >
                                    <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(Button.IsEnabled)">
                                        <DiscreteBooleanKeyFrame Value="False" />
                                    </BooleanAnimationUsingKeyFrames>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button>
        <Button Content="Two" />
    </StackPanel>
</Window> 
```

它会更改 IsEnabled 属性，因此您可以测试它是否有效。然后您可以将其更改为 IsDefault 属性（这显然会获得值 True）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:56:23.033

您可以创建一个`InvertBooleanConverter`并将第一个按钮的属性绑定`IsDefault`到第二个按钮的反面，然后您只需`IsDefault`使用第一个按钮上的触发器设置为关闭，第二个按钮将自动切换为打开！

```
<Button x:Name="B1" IsDefault="True"/>
<Button x:Name="B2" IsDefault="{Binding ElementName=B1, IsDefault, Converter={StaticResource InvertBooleanConverter}}"/> 
```

如果您在我的 Bindings 中使用他的回答中的“Jan Kratochvil”样式触发器，这在完整的 XAML 中应该很容易工作。

# windows - 使用 Adob e air 获取已安装 Windows 程序（应用程序）的列表

> ID：11540497
> 
> 赞同：1
> 
> 时间：2012-07-18T11:40:34.173
> 
> 标签：windows, apache-flex, air

> **可能重复：**
> [Adobe AIR - 列出已安装的应用程序](https://stackoverflow.com/questions/2265632/adobe-air-listing-installed-applications)

我是 Adob​​e air 的新手，我想列出使用 adobe air 安装的 Windows 程序（应用程序）。这可能吗？我需要访问注册表项来实现这一点吗？

# java - 快速复制哈希映射

> ID：11540498
> 
> 赞同：3
> 
> 时间：2012-07-18T11:40:41.253
> 
> 标签：java, algorithm, arraylist, clone

> **可能重复：**
> [java中HashMap的克隆实用程序](https://stackoverflow.com/questions/998376/clone-utility-for-hashmap-in-java)

我有一张一对一的地图：

```
 HashMap<Integer, ArrayList<Double>> matrix; 
```

整数是索引，ArrayList 的维度约为 50。索引的大小可能高达一百万。我想尽快复制它（包括 Arraylist 值）。

我做了以下工作：

```
 public Map<Integer,ArrayList<Double>> getCloneOfMatrix(){
 Map<Integer, ArrayList<Double>> newMatrix = new HashMap<Integer,ArrayList<Double>>(); 
    for(int i=0 ; i < indexSize; i++){
        ArrayList<Double> arrList = new ArrayList<Double>();
        arrList=(ArrayList<Double>) matrix.get(i).clone();
        newMatrix.put(i,arrList);

    }           
    return   newMatrix;
} 
```

我发现它的计算成本很高，有什么方法可以更快地做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:48:24.897

最快的方法是避免一开始就需要制作副本。

如果您使用写时复制方法，您可以有两个对同一结构的引用，但都不会看到其他的变化。这避免了复制所有内容的需要，并且根据您的使用情况，避免了复制任何内容的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:50:12.563

您`Map.get()`在每次迭代中都使用它，它会依次调用一个`hashCode()`函数，该函数可能是微不足道的，也可能不是微不足道的，然后在地图数据库中进行搜索。

**您可以简单地迭代[`Entry`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)保存在 中的集合，`Map`**它将大大减少消耗的总时间（鉴于`ArrayList`相对较小）。

```
for(Entry<Integer,ArrayList<Double> entry : matrix.entrySet()) {
        //get the key using entry.getKey()
        //get the value (the ArrayList) using entry.getValue()
} 
```

此外，您可能需要**考虑使用库来处理数学矩阵**。[例如， Colt](http://acs.lbl.gov/software/colt/)提供了密集矩阵和稀疏矩阵的实现，并且它已经为您实现和测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:47:43.017

可能[通过序列化克隆](http://weblogs.java.net/blog/emcmanus/archive/2007/04/cloning_java_ob.html)会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:48:20.997

尽管它在复杂性方面无济于事，但`ArrayList<Double>`Java 中的 an 需要对每个元素进行装箱，而 - 因为它似乎是一个稀疏矩阵，所以第二维是固定的 - 使用它`double[]`会降低单位成本。

除此之外，使用经典的稀疏矩阵表示之一（假设它是稀疏的，或者您不会打扰哈希图）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T11:49:39.327

[正如这个](https://stackoverflow.com/questions/998376/clone-utility-for-hashmap-in-java)问题的答案所述，您应该尝试使用序列化/反序列化进行克隆。

# iphone - XCode - 全局函数 self.view

> ID：11540500
> 
> 赞同：1
> 
> 时间：2012-07-18T11:40:43.223
> 
> 标签：iphone, objective-c, xcode, cocoa

所以我按照[本教程](http://sree.cc/iphone/global-functions-and-variables-in-objective-c)介绍了如何创建全局函数。除了在我的全局函数中，我有一行是：

```
[self.view addSubview:gld]; 
```

我在 self.view 上遇到错误.. 有什么想法吗？我需要 self.view 部分是调用该函数的视图..

错误：

> 在“GlobalData *”类型的对象上找不到属性“视图”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:51:13.820

您收到的错误意味着 GlobalData 没有名为 view 的属性。从类 UIViewController 继承的实例具有视图属性。因此，您必须确保 GlobalData 继承自 UIViewController 或任何其他具有 UIView 属性的类。

**编辑**

现在我明白你的意思了——但现在它更清楚了，而且你没有使用正确的命名法。您在 GlobalData 中的方法应更改为：

`-(void)loadInfo:(UIView*)superView { [superView addSubview:superView]; }`

然后，你这样称呼它：

`[[Globaldata sharedGlobalData] loadinfo:self.view];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:49:01.293

从您发布的 id 看起来，您的`GlobalData`类（我猜是从中返回的`self`）不是 viewController 或任何其他包含视图的类。

所以你基本上是在问

> “请给我什么是自我的看法”（我猜是 GlobalData 类）

Xcode 回复：

> “对不起，‘自我’中没有视图”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:49:18.677

`self.view`请参阅您的应用程序的超级视图。你调用的方法是通过“[self.view ...]”与这个视图相关的，而不是任何全局函数。

为了给他们打电话，你应该按他们的班级打电话给他们，比如

```
[MyFunctionClass Function]; 
```

# java - Netbeans 中的 Java 代码可以工作，但通过 cmd 提示符执行 jar 会出现 nosuchmethod 错误异常

> ID：11540501
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:43.237
> 
> 标签：java, netbeans, apache-poi

我已经在 Netbeans 中制作了一个 Java 程序来使用 poi 库编辑 Excel 文件，该代码在 Netbeans 中运行良好，但是在构建 jar 文件并通过命令提示符执行它之后，当调用某个函数时出现错误，即存在外部 jar .

但是我已经在 bulid.xml 中包含了目标代码。在 store 中创建的 jar 文件也不起作用，并且在 dist 文件夹中创建的 jar 文件也给出了这个错误：

`Exception in thread "AWT-EventQueue-0" java.lang.Nosuchmethoderror: org.apache.xmlbeans.xmloptions.setsaveaggresivenamespaces()Lorg/apache/xmlbeans/xmloptions;`

我已经检查了该类`org.apache.xmlbeans.xmloptions`是否存在于 jar 文件中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:42:57.980

```
Exception in thread "AWT-EventQueue-0" java.lang.Nosuchmethoderror: 
```

看来您在类路径中的 jar 版本错误。比您的代码更低版本（或）更高版本的 jar。

> 我检查了类 org.apache.xmlbeans.xmloptions

它不是抱怨找不到类，而是说类路径中可用的类与您在代码中调用的方法签名不同。

例子： `Jar has method add(int a, int b); but your code calling(int a);`

# mongodb - PHP MongoDB 排序与跳过和限制不同

> ID：11540504
> 
> 赞同：4
> 
> 时间：2012-07-18T11:40:48.507
> 
> 标签：mongodb, mongodb-php, nosql

无论如何要在 MongoDB (PHP) 中订购不同的查询吗？如果我可以对其应用 skip() 和 limit() 会更好。但我还没有找到任何方法来做到这一点。

在 SQL 中，我会按以下方式执行以下操作：

```
SELECT distinct(fieldname) 
FROM tablename
ORDER BY fieldname
LIMIT 10
OFFSET 100 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:44:57.790

您可以使用MongoDB 2.2 中的新[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)来实现这种查询：

```
db.collname.aggregate(
    { $group : { _id : "$fieldname" }},
    { $sort : { _id: 1 }},
    { $skip : 100 },
    { $limit : 10 }
); 
```

有一些[限制](http://docs.mongodb.org/manual/applications/aggregation/#limitations)需要注意，特别是：

*   结果是内联返回的，因此不能超过最大文档大小（MongoDB 2.2 为 16Mb）
*   如果任何单个聚合操作消耗超过 10% 的系统 RAM，则该操作将产生错误

# c# - 可以将 catch 块的结果传递给 try 块内的方法吗？

> ID：11540505
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:50.557
> 
> 标签：c#, error-handling, scope, try-catch, httpwebresponse

我的程序中有以下代码：

```
HttpWebResponse response = null;
try
{
    response = (HttpWebResponse)request.GetResponse();
    if (response == null)
        return false;
    aDoc.Load(response.GetResponseStream()); //Load the response into another object
}
catch (WebException e)
{
    //404's are caught and are saved as the response.
    //The reason being that 404's from this particular
    // website still provide relevant information that needs
    // extracting.
    response = (HttpWebResponse)e.Response;
}
finally
{
    response.Close();
} 
```

我的问题是：如果捕获到 WebException，是否会将响应`response = (HttpWebResponse)e.Response;`传递给`aDoc.Load()`方法？

顺便说一句，在将更多代码移入 try-catch 块之前，我有以下代码。我认为添加`finally`with`Close()`会更安全，但我仍然想知道我是否应该首先更改任何内容。

```
HttpWebResponse response = null;
try
{
    response = (HttpWebResponse)request.GetResponse();
}
catch (WebException e)
{
    response = (HttpWebResponse)e.Response;
}

if (response == null)
    return false;
aDoc.Load(response.GetResponseStream());
response.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:43:42.210

不，您需要像在第二个示例中所做的那样隔离正确的代码块。

你当然可以嵌套：

```
HttpWebResponse response = null;

try {
    try {
        response = (HttpWebResponse)request.GetResponse();
    } catch (WebException e) {
        response = (HttpWebResponse)e.Response;
    }

    if (response == null) return false;

    aDoc.Load(response.GetResponseStream());
} finally {
    if (response != null) response.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:43:43.930

不，

如果 a`WebException`被抛出，它已经离开了`try`块，块中的代码`try`不会被执行，只会执行块中的代码`finally`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:44:09.273

答案是肯定的和否定的——因为传递响应的代码`aDoc.Load()`是最后一条语句，所以异常只能发生在该行之上或之上。

假设`aDoc.Load()`从不抛出 WebException，那么答案是否定的

如果`aDoc.Load()`抛出 WebException 则异常可能来自该方法-因此从技术上讲，`aDoc.Load()`可能已从该方法传递了结果，`GetResponse()`并且异常可能已在内部抛出-尽管`aDoc.Load()`取决于实现`aDoc.Load()`

异常会停止代码执行，因此一旦抛出异常，下一段要执行的代码就是块中的代码`catch`（或者如果不存在，则在堆栈中进一步向上的任何 catch 块）然后`finally`运行

我的假设是 aDoc.Load() 不是任何类型的 Web 方法（并且可能是您自己的类），因此您最好了解这是否会引发 WebException，但答案可能是“不”

# c# - 如何在 C#/.NET/WPF 中将字段添加到 OpenFile/SaveFile 对话框？

> ID：11540506
> 
> 赞同：0
> 
> 时间：2012-07-18T11:40:51.507
> 
> 标签：c#, .net, wpf, dialog, openfiledialog

> **可能重复：**
> [在 .Net 中自定义 OpenFileDialog](https://stackoverflow.com/questions/4106120/customizing-openfiledialog-in-net)

打开/保存文件时，我需要一些额外的信息，例如格式化。这不能从文件的名称和扩展名中推断出来。我想将支持格式的 ComboBox 放入 Microsoft.Win32.OpenFile/SaveFile 对话框。如果不从头开始重新创建对话框，我该如何做到这一点？

# css - 为什么会这样？认为这是 clearfix 的问题吗？

> ID：11540508
> 
> 赞同：1
> 
> 时间：2012-07-18T11:40:59.907
> 
> 标签：css, css-float, clearfix

这是问题所在：正如您在左侧看到的浮动元素不对齐，而在右侧它们对齐。

[http://i.stack.imgur.com/Qx8Zs.jpg](http://i.stack.imgur.com/Qx8Zs.jpg)

这不会一直发生，而且它不是特定于浏览器的（AFAIK） - 它会在刷新时自行纠正......我认为这是 clearfix 的问题？下面的 CSS。

```
.clear:after {
    clear: both; 
    content: "."; 
    display: block; 
    font-size:0;
    height: 0; 
    visibility: hidden; 
}
.clear { 
    display: inline-block;  
}
* html .clear {  
    height: 1%;  
} /* Hides from IE-mac \*/
.clear {  
    display: block;  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:03:46.130

我无法复制这个问题，但这里有一些建议。

1.  给你#networks div 一个宽度
2.  给#networks溢出：自动
3.  从 #networks 中删除清除 div
4.  如果您还没有，请包括 IE 的 HTML5 shive（我看不到它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:34:05.133

这是答案[http://jsfiddle.net/xVzAY/](http://jsfiddle.net/xVzAY/)

# sql - Azure、MVC Web 应用架构 - 如何在 SQL Azure 和 Azure 表存储之间拆分数据？

> ID：11540516
> 
> 赞同：4
> 
> 时间：2012-07-18T11:41:19.597
> 
> 标签：sql, azure, database-design, azure-storage

我正处于 Web 应用程序的典型社交网络类型的规划阶段。它将有个人资料、消息、即时聊天、相册、群组、虚拟礼物等......

决定哪些数据应该存储在 SQL Azure 中以及哪些数据应该存储在 Table Storage 中的决定因素是什么？

在 Azure 之前，所有关系数据都将存储在 SQL 服务器中，然后使用数据对象的内存缓存和页面输出缓存来提高性能并减轻 SQL 服务器的负载。

Azure 表存储如何适应/改变这种方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T12:30:34.927

**SQL Azure**

在 SQL Azure 的积极方面 - 它可以免费访问（存储事务无需成本）并且易于使用（关系型，开发人员熟悉，可以建模而无需担心未来查询将如何工作等）

不利的一面是，SQL Azure 不是超级可扩展的——即使有联邦，每个数据库或联邦成员仍然与其他数据库一起生活在一个多租户环境中，并且它们在同一台服务器上相互竞争磁盘、CPU、RAM 等.

从定价的角度来看，在 SQL Azure 中存储数据比在 Azure 表存储中更昂贵，但访问它是免费的（调用 SQL Azure 数据库没有成本）

**Azure 表存储 (ATS)**

Azure 存储的优点 - 它具有超大规模的可扩展性，可以支持非常大的数据量。基本上，ATS 背后没有“关系大脑”，就像 SQL Server 背后有大脑一样。因此，您不受单一大脑的限制，您可以将所有关系活动委托给您自己的服务器/实例，您可以拥有任意数量的服务器/实例。这使您能够实现超大规模。

不利的一面是，ATS 更难使用，因为您必须对密钥（PartitionKey 和 RowKey）进行建模，尤其是在预测查询时。您甚至可能需要以多种方式复制数据，以便将来可以非常简化地访问该数据并适当地使用 PartitionKey/RowKey。

从定价的角度来看，ATS 存储数据非常便宜，但每次访问都会收费（每笔交易收费）。价格最近下降了 10 倍，但仍需要考虑，作为预算的一部分

**建议**

当您需要超大规模时使用 ATS。例如，如果你有一个像 Facebook 这样的社交网站，提供规模的最重要的地方就是新闻提要组件——因为这些数据被频繁地访问并且需要非常快。

使用 SQL Azure 进行分层数据存储，其中关系最重要且数据访问频率不高。例如，您的用户的个人资料信息（电子邮件/地址/登录名/首选项/等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:26:41.450

SO更适用于特定的编程问题。首先在 SQL 中调整大小，看看它会花费多少。如果您有大量数据，Azure 表存储 (ATS) 会更便宜。ATS 没有连接。具有大量数据的日志文件是 ATS 的候选者。

# windows-installer - 如何让 InstallShield LE 自动卸载现有安装？

> ID：11540520
> 
> 赞同：25
> 
> 时间：2012-07-18T11:41:22.457
> 
> 标签：windows-installer, uninstallation, installshield-le

这可能吗？

我所看到的搜索基本上是我需要使用 3rd 方工具（例如 Orca）从我现有的 MSI 中获取 GUID，并使用这些配置 InstallShield 以卸载现有版本。我已经尝试过其中一两套指令，但到目前为止没有任何效果。可能是因为我做错了什么，但似乎我跳过了很多圈来做一些我认为应该相对直截了当的事情。这个问题之前不是已经解决了吗？

谷歌的最高结果指向[这个答案](https://stackoverflow.com/questions/6447404/configuring-installshield-le-to-remove-previous-versions-built-using-visual-stud/6450032#6450032)：

*   使用 Orca 打开您的旧 MSI 并从属性表中获取其 UpgradeCode
*   在您的 InstallShield LE 项目中，转到解决方案资源管理器中的“常规信息”
*   确保“升级代码”字段设置为您的旧 MSI 升级代码

这是否意味着每次我想部署新版本时都必须打开我的“使用 Orca 的旧 MSI 并获取其升级代码”？

这听起来有点骇人听闻，而且我肯定不想在每次部署新版本时都这样做。有没有办法自动化这个？此功能是否在更高级的 InstallShield 版本中可用（请记住我在 LE 上 - 如果需要，我会升级）

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-04T21:14:25.710

InstallShield LE 与之前的安装项目一样，允许安装新版本的产品，该版本将*替换*以前安装的版本。至于技术上是卸载旧产品，还是就地升级，似乎无关紧要。

**关键在于产品代码**和**升级代码**之间的区别：

*   **产品代码：**由于此代码唯一标识您的产品，因此不建议在您已分发版本后更改产品代码。

*   **升级代码：**存储在 UpgradeCode 属性中的升级代码对于产品的所有版本应保持相同。

（此文本直接来自 InstallShield LE 帮助库。）

如何使用这些代码来部署产品和同一产品的版本更新并不完全简单。

![InstallShield LE 一般信息](../Images/8884094ea92abf8641ef0e198c2a6d05.png)

帮助文本听起来像是您永远不应该更改产品代码。不是这种情况。可能应该写得更清楚地说“由于此代码唯一标识您的产品**版本**，因此不建议在您已经分发*特定版本之后更改产品代码。”* ... 或类似的东西。

基本上，您***应该***在创建要发布的新版本时更改产品代码。*别管升级代码！*要更改产品代码，请单击`{..}`代码右侧的按钮。InstallShield LE 将生成一个新代码。

我的标准过程是更改我的项目的版本、生成新的产品代码并构建 InstallShield 安装项目。

在已安装较早版本的机器上安装产品时，安装项目将对其进行更新，并在目标机器上仅保留一个版本（最新）的程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-12T15:30:49.883

据我了解，YJelton 的回答是正确的，但是如果您想确保删除旧产品，您应该在升级表中添加一个 MajorUpgrade 项目——如果您保持升级代码相同（如建议的那样），您可以选择“共享我的升级代码的产品”选项，对于产品版本，您可以选择“任何早期版本”。

这样，如果升级代码与您的旧产品相同，并且您的新产品具有更高的版本号，则旧产品将被删除。

如果您想更改升级代码，您可以添加一个 MajorUpgrade 项目，该项目选择了“具有另一个升级代码的产品”选项。然后粘贴您的旧升级代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-11T11:40:22.833

转到“升级路径”并将最小版本设置为空白，最大版本。到电流。将 max/min 包括为 yes 并将所有代码 id 设置为一个 guid。

# android - 在文本文件android中添加换行符

> ID：11540526
> 
> 赞同：4
> 
> 时间：2012-07-18T11:41:42.673
> 
> 标签：android, android-intent, fileoutputstream

大家好，我正在使用此代码在 txt 文件中附加文本。任何人都可以指导我如何为这种情况添加换行符

```
fOut = new FileOutputStream(new File(myFilePath + BlueFreeConstants.logFileName), true);
osw = new OutputStreamWriter(fOut);
osw.append("<< " + values + " >>");
osw.flush();
osw.close();
fOut.close(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T11:46:10.470

```
String separator = System.getProperty("line.separator");
fOut = new FileOutputStream(new File(myFilePath + BlueFreeConstants.logFileName), true);
osw = new OutputStreamWriter(fOut);
osw.append("<< " + values + " >>");
osw.append(separator); // this will add new line ;
osw.flush();
osw.close();
fOut.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:44:06.077

`osw.append('\n')`. 那是你要找的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T11:44:22.267

```
osw.append("<<"+values+">>\n"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T22:20:37.013

这是我创建多行文本文件的代码：

```
FileOutputStream fos=null;
    OutputStreamWriter osw;
    try {
    fos = openFileOutput("login.txt",Context.MODE_PRIVATE);
    fos.write(("Line One").getBytes());
    osw = new OutputStreamWriter(fos);
    osw.append("\r\n");
    osw.append("Line Two");
    osw.flush();
    osw.close();
    fos.flush();
    fos.close();
} catch (Exception e) {} 
```

# php - 我在哪里存储用户名和用户 ID？会话或cookie？

> ID：11540531
> 
> 赞同：7
> 
> 时间：2012-07-18T11:41:56.497
> 
> 标签：php

我的代码中有很多实例需要快速访问登录的用户名和用户 ID。我目前使用cookies。这不安全。

我认为会话将​​是一个解决方案，但会话过期。

另一种选择是将唯一令牌存储在 cookie 中，然后与数据库中存储的令牌匹配，以检索登录的用户数据。这是最安全的解决方案，但我看到的问题是，在我的代码中有很多次需要登录的用户名和用户 ID，但一直查询会耗尽不必要的资源（这是真的吗？）

解决办法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T12:23:46.693

我将尝试将评论中所说的所有内容合并为一个答案。因此，请通过支持他们的答案/评论来向其他有帮助的用户表达一些爱！我还将简要概述会话的工作原理，以使答案对更广泛的受众有用。

当用户登录网站时，会创建一个会话来识别他们。在 PHP 中通过创建会话 ID 来处理会话，然后将该 ID 与服务器端的变量存储相关联，在 PHP 脚本中使用`$_SESSION`超全局访问该变量。会话 ID 存储在客户端的 cookie 中，并标识他们的会话。

为了保持安全，会话 ID 必须是唯一的、随机的和保密的。如果攻击者猜到了您的会话 ID，他们可以使用相同的 ID 在他们自己的计算机上创建一个 cookie，并接管您的会话。他们会以您的身份登录！这显然很糟糕，因此 PHP 使用强大的随机数生成器来创建这些会话 ID。为了使事情更安全，您可以在站点范围内启用 SSL，并通知浏览器只通过 SSL 发送 cookie，使用 HTTPS-only 标志。不过，这对您的网站来说可能有点矫枉过正。

为了防止泄露的会话 ID 永远有用，或者在你去商店后坏人潜入你的房间，会话使用超时。最好让它们在相当短的时间后过期 - 根据您的安全要求，在 10 到 60 分钟之间。您可以在每次查看页面时重置超时，这样活动用户就不会被注销。

为了让用户被记住（即“记住我”复选框），您需要提供一个用作身份验证令牌的 cookie。请记住，从所有意图和目的来看，此令牌与拥有您的密码相同。这意味着如果坏人窃取了 cookie，他们可以登录您的帐户。为了使这个选项安全，我们可以使用一次性令牌。这些令牌应该是一次性的、随机的、长的和秘密的。将它们视为密码！

以下是如何实现它们：

1.  生成随机令牌。`/dev/urandom`如果可以，请使用，否则您需要数百个值`mt_rand`才能获得足够“随机”的东西，然后使用 SHA1 对结果字符串进行散列以生成令牌。
2.  使用强密码散列算法（例如 PBKDF2 或 bcrypt）来创建令牌的散列。不要为此目的使用 SHA1 或 MD5 - 它们不是为散列密码而设计的！
3.  将哈希值连同它所属的用户的 ID 和它的创建日期一起插入到数据库表中。
4.  在用户端的 cookie 中设置令牌。
5.  当用户访问该站点、未登录并且检测到登录令牌 cookie 时，使用您在步骤 2 中使用的相同算法对来自 cookie 的令牌值进行哈希处理，并在数据库中查找它。如果它与条目匹配，则将该用户作为该 ID 登录。
6.  从数据库中删除条目并发出一个新条目（返回步骤 1）。

您还应该运行一个脚本来查找非常旧的会话令牌（例如 3 个月或更长时间）并删除它们。这将要求用户在长时间不活动后返回时再次登录。

有关此问题的详细说明以及有关安全 Web 表单登录系统的更多重要信息，请阅读[基于表单的网站身份验证的权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)并查看[OWASP 项目](https://www.owasp.org/index.php/Main_Page)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T11:46:43.417

如果客户端不需要它，请确保它不会在那里结束。

由于 userId 特定于登录用户而不是特定计算机，因此 cookie 似乎不是可行的方法。

PHP 中的基本身份验证通常通过会话完成，因此您也可以将 userId 添加到会话中。

如果会话时间太短，请增加会话时间。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-07-18T11:45:43.767

我将这些信息存储在数据库中，并在启动时在我的全局对象注册表中创建一个用户对象。用户对象包含用户名或电子邮件等信息，并允许更改这些信息。登录状态本身存储在会话中，也存储在 cookie 中。

# asp.net - 标准服务器控件的 ViewState 文档

> ID：11540533
> 
> 赞同：0
> 
> 时间：2012-07-18T11:42:01.937
> 
> 标签：asp.net, .net, viewstate, asp.net-4.0

任何人都知道在哪里可以找到关于给定 asp.net 服务器控件在 viewstate/controlstate 中存储哪些属性的文档（或一种简单的方法，例如使用反射器）？

提前致谢

添加了更多信息：我当前的策略是尝试、错误并从 html 页面中解码 base64 视图状态以找出存储的内容。无论如何，这种技术非常有限，因为它取决于具有非默认值的服务器控件属性。所以我需要修改给定服务器控件中的每个属性来检查。在我看来非常乏味。我一直在寻找更好的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:57:51.873

根据此链接[http://msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx) Asp.net 在回发期间将控件属性存储在视图状态中例如标签和按钮的文本属性等。

# android - Tabris 示例 Android 错误？

> ID：11540534
> 
> 赞同：0
> 
> 时间：2012-07-18T11:42:05.607
> 
> 标签：android, eclipse

我对来自 Tabris 网站的 Android 教程（Android 上的 Tabris 入门）有疑问。

当我在 Eclipse 的 android 模拟器中启动 Tabris 应用程序时，我变成了以下消息“发现失败”。

我看到教程中的 Tabris 应用程序使用 url [http://rap.eclipsesource.com/demos-0.6.0/](http://rap.eclipsesource.com/demos-0.6.0/)

在导致 tomcat 错误的普通浏览器中打开此 url。

网址[http://rap.eclipsesource.com/demos-0.6.0/](http://rap.eclipsesource.com/demos-0.6.0/)是否可能无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:36:32.393

URL [http://rap.eclipsesource.com/demos-0.6.0/](http://rap.eclipsesource.com/demos-0.6.0/)是正确的。这是部署带有客户端演示的 Tabris/RAP 应用程序的地方。

重要的部分是入口点！

所以有两种方式来配置你的客户端：

1.  将其指向[http://rap.eclipsesource.com/demos-0.6.0/](http://rap.eclipsesource.com/demos-0.6.0/)（不要忘记`/`最后的！），客户端将通过访问[http://rap.eclipsesource.com发现所有可用的入口点/demos-0.6.0/index.json](http://rap.eclipsesource.com/demos-0.6.0/index.json)
2.  将您的客户端指向一个入口点：[http ://rap.eclipsesource.com/demos-0.6.0/simple-tree](http://rap.eclipsesource.com/demos-0.6.0/simple-tree)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:51:08.423

您提到的 URL 不是 Tabris demo Android url，而是 Rich Ajax Platform 演示 ( [http://eclipse.org/rap/](http://eclipse.org/rap/) ) 对于 Tabris 在线演示，您需要访问：http: [//developer.eclipsesource.com/tabris/演示/](http://developer.eclipsesource.com/tabris/demos/)

我猜你正在混淆两个不同的项目；）

如果您想在您自己的本地机器上运行 Tabris 演示，请按照给出的说明进行操作：http: [//developer.eclipsesource.com/tabris/docs/getting-started-with-android-sdk/](http://developer.eclipsesource.com/tabris/docs/getting-started-with-android-sdk/)

# cordova - 如何让 Sencha Touch 应用程序在黑莓设备上运行

> ID：11540535
> 
> 赞同：1
> 
> 时间：2012-07-18T11:42:05.420
> 
> 标签：cordova, sencha-touch, blackberry-webworks

我有 sencha touch 应用程序，它工作正常。但现在我想在黑莓模拟器或设备上运行这个煎茶触摸应用程序。我不知道在哪里放置模型、视图、sencha 应用程序的控制器类。如何将 sencha mvc 应用程序放入黑莓 phonegap 应用程序中。我读了很多过去，但不清楚该怎么做。请建议我如何执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T21:32:37.693

好的@user1489812 我们开始吧，

1.  创建类似这样的结构

![在此处输入图像描述](../Images/040826feb44504b9c0b12db8a03f971e.png)

如果你只需要一个 jQuery 手机放一个文件夹如何显示图片，否则不要。

2.进入 index.html 文件，将所有对 Sencha Touch 2 的引用，比如这个 .js 和 .css 文件。

3.在黑莓浏览器上启动您的应用程序`http://localhost:8080/your_name_project/your_name_app.html`并准备就绪。

以上所有你可以让应用程序进入黑莓模拟器。

我希望这有帮助。:)

# java - 如何停止计时器的 actionPerformed() 方法？

> ID：11540539
> 
> 赞同：0
> 
> 时间：2012-07-18T11:42:24.827
> 
> 标签：java, swing, user-interface, timer

我正在实现一个 javax.swing.timer 来调用 GUI 上的同步操作。但是，该操作需要一些时间才能完成，我想为该计时器调用提供一个中止选项。那可能吗？

谢谢！

```
import java.awt.EventQueue;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JMenu;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.Timer;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import java.io.FilenameFilter;
import java.util.Iterator;
import javax.swing.JLabel;
import javax.swing.ImageIcon;
import javax.swing.JTextField;
import org.omg.CosNaming.IstringHelper;

public class vtm extends JPanel implements ActionListener{

    private JFrame frame;
    private String children[];
    private ConsoleApp hawk[];
    public static String data[][];
    public Timer timer;
    private int count1, count2;
    private int i;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    vtm window = new vtm();
                    window.frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    /**
     * Create the application.
     */
    public vtm() {
        timer = new Timer(25000, this);
        //timer.setInitialDelay(190);
        timer.start();
        initialize();
    }

    /**
     * Initialize the contents of the frame.
     */
    private void initialize() {

        frame = new JFrame("VTM");
        frame.setSize(1024, 720);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        JLabel lblNewLabel_1 = new JLabel("");
        lblNewLabel_1.setIcon(new ImageIcon("config.png"));
        lblNewLabel_1.setBounds(970, 0, 51, 55);
        frame.getContentPane().add(lblNewLabel_1);
        lblNewLabel_1.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent arg0) {
                config x = new config();
                x.main(null);
                timer.stop();
                frame.dispose();
            }
            });

        JLabel lblNewLabel = new JLabel("");
        lblNewLabel.setIcon(new ImageIcon("bg.png"));
        lblNewLabel.setBounds(0, 0, 1024, 720);
        frame.getContentPane().add(lblNewLabel);

        String dir = System.getProperty("user.dir");

        File df = new File(dir);

        FilenameFilter fi = new FilenameFilter(){
            public boolean accept(File df, String name){
                return name.startsWith("D-");
            }
        };

        children = df.list(fi);
        hawk=new ConsoleApp[children.length];

        EventQueue.invokeLater(new Runnable(){
            public void run(){

                int count1 = 0; count2 = 0;

                for(i=0;i<children.length;i++)
                {

                hawk[i]=new ConsoleApp(children[i]);

                Iterator<String> it = hawk[i].p.iterator();

                System.out.println("Hi:"+hawk[i].p.size());

                while(it.hasNext())
                {
                    hawk[i].call(it.next());

                    if(count1 == 3)
                    {
                        count2++;
                        count1=0;
                    }

                    System.out.println("Look: " + hawk[i].l.getText().length());
                    hawk[i].l.setBounds((60 + 270*count1) + ((260-(hawk[i].l.getText().length()*7))/2), (70+(count2*60)), 260, 62);
                    hawk[i].c.setBounds(50 + 270*count1, (70+(count2*60)), 273, 62);
                    frame.getContentPane().add(hawk[i].c,0);
                    frame.getContentPane().add(hawk[i].l,0);

                    count1++;
                }
            }
            }
        });
    }

    public void actionPerformed(ActionEvent arg0) {
        // TODO Auto-generated method stub
        System.out.println("lol");

        EventQueue.invokeLater(new Runnable(){
                public void run(){

                    int count1 = 0; count2 = 0;

                    for(i=0;i<children.length;i++)
                    {

                    hawk[i]=new ConsoleApp(children[i]);

                    Iterator<String> it = hawk[i].p.iterator();

                    System.out.println("Hi:"+hawk[i].p.size());

                    while(it.hasNext())
                    {
                        hawk[i].call(it.next());

                        if(count1 == 3)
                        {
                            count2++;
                            count1=0;
                        }

                        hawk[i].l.setBounds((60 + 270*count1) + ((260-(hawk[i].l.getText().length()*7))/2), (70+(count2*60)), 260, 62);
                        hawk[i].c.setBounds(50 + 270*count1, (70+(count2*60)), 273, 62);
                        frame.getContentPane().add(hawk[i].c,0);
                        frame.getContentPane().add(hawk[i].l,0);

                        count1++;
                    }
                }
                }
            });

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:25:59.967

您的 actionPerformed 触发了一个 Runnable，我认为这需要很长时间并且您希望中止。在 Runnable 的 run 方法中，您有两个循环，`for(i=0;i<children.length;i++)`并且`while(it.hasNext())`. 如果向这些循环添加停止条件，则可以通过从外部控制该条件使 Runnable 提前完成。

例如，`abort`在 vtm 中添加一个字段，并将两个循环分别更改为`for(i=0;i<children.length && !abort;i++)`和`while(it.hasNext() && !abort)`。您现在可以设置`abort`为 true，Runnable 将在下次尝试再次循环时停止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:26:48.523

使用 Swingworker 而不是 Runnable，这是实现取消机制的方式：http: [//docs.oracle.com/javase/tutorial/uiswing/concurrency/cancel.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/cancel.html)

另请参阅此问题：[如何在 Java 中使用 SwingWorker？](https://stackoverflow.com/questions/782265/how-do-i-use-swingworker-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T21:28:39.817

> 我正在实现一个 javax.swing.timer 来调用 GUI 上的同步操作。但是，该操作需要一些时间才能完成，我想为该计时器调用提供一个中止选项。那可能吗？

如果您想向您的用户提供 UI 以取消`Runnable`您在事件调度线程 (EDT) 运行时发布的内容，那么不，这是不可能的。

当您的`Runnable`代码开始执行时，您的 UI 将无响应，因为 UI 线程（EDT）被您的`Runnable`. 因此，在完成之前，任何取消按钮或您想到的任何界面都不会对任何点击做出反应`Runnable`。

You can cancel it before it starts running, but a better investment of your time might be to investigate whether you really have to perform heavy work on the EDT (for which normally the answer is no). It would be better to do all the heavy calculations/operations on a worker `Thread`, and update the UI during/afterwards. The `SwingWorker` class was designed for this, and many examples of its usage can be found online (in the javadoc, the official Swing tutorials and on this site)

# string - PostgreSQL+NHibernate -> LIKE 部分中的命名参数

> ID：11540540
> 
> 赞同：0
> 
> 时间：2012-07-18T11:42:25.780
> 
> 标签：string, postgresql, nhibernate, sql-like, named-parameters

在 Spring+Hibernate 应用程序中，我尝试使用命名参数传递查询应该对保存在数据库中的 xml 文档中的值作为文本求和。

```
 SELECT  document_type, 
     SUM(CAST(substring(document_content ,'<ab.*>(.*[0-9])</ab>') as float)) as value, COUNT(*)
     FROM  statistic_data_test 
     WHERE column LIKE :param1::text
     GROUP BY document_type 
     ORDER BY value DESC 
```

param1 是通过 URL 传递给程序的命名参数。整个查询和参数名称由用户动态创建。

上面显示的代码工作正常，但我不仅需要找到完全匹配的能力，而且我不能在查询中连接字符串。现在，在代码的一部分中，我正在检查类型是否为文本，如果是，我添加 % 标记作为后缀和前缀。

我不会将 % 标记从参数移动到查询字符串，但是像

```
WHERE column LIKE '%'+:param1::text+'%' 
```

转向错误

怎么做到呢？如何在查询中连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:36:29.243

改变策略，保持目标。

使用该`position`功能。

```
position(:param1::text in column) <> o 
```

# oracle - 如何授予Oracle中一行的权限？

> ID：11540541
> 
> 赞同：1
> 
> 时间：2012-07-18T11:42:35.217
> 
> 标签：oracle

我有一张桌子，里面有属于不同客户的不同人：

```
CREATE TABLE CLIENTS
(
  CLIENT    VARCHAR2(20),
  FIRSTNAME VARCHAR2(20)
) 
```

示例数据：

```
INSERT INTO CLIENTS (CLIENT, FIRSTNAME) VALUES ('A Corp.', 'Alice')
INSERT INTO CLIENTS (CLIENT, FIRSTNAME) VALUES ('B Corp.', 'Bob') 
```

现在我想授予更改“A Corp”所有行的名字的权限。到人 A 和“B Corp.”的行 给 B 人。我认为可以通过为每个人创建一个视图来实现。但是，是否也可以不为每个人创建专门的授权视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:55:17.723

如果您可以使用 Oracle 用户名或应用程序中的某些数据来识别用户，那么我认为您可以使用单个可更新视图，例如：

```
CREATE VIEW filtered_clients AS (
  SELECT * FROM clients WHERE client LIKE USER || ' Corp.'
) 
```

（其中“USER”是一个返回登录用户名的 Oracle SQL 函数。如果最终用户通过某个中间层共享数据库帐户，这将不起作用，但您可能可以从中间层并使用它。）

为了避免硬编码用户名和客户端名称之间的关系，我建议添加另一个表来标识哪些用户可以管理哪些客户端。那么视图将是这样的：

```
CREATE VIEW filtered_clients AS (
  SELECT * FROM clients WHERE client IN (
    SELECT client FROM user_client_access WHERE username = USER
  )
) 
```

我相信这仍然是可更新的。您可能希望阻止更新该`CLIENT`列；您可以通过`WITH CHECK OPTION`在视图上指定或在基表上使用触发器来执行此操作。

如果您希望用户能够看到任何行但只更新他们自己的行，那么查看方法就不好了。相反，您可以简单地在基表上设置一个触发器，该触发器在尝试更新时检查访问，并在用户尝试更新用于不同客户端的行时引发错误。

另一种方法是使用[Oracle 的虚拟专用数据库功能](http://docs.oracle.com/cd/E11882_01/network.112/e16543/vpd.htm)，但这可能是矫枉过正。（这也可能是一个额外费用的选择，我不确定。）

# java - 我如何从特定行对齐所有 JProgressbar 显示它看起来像目标中所示

> ID：11540544
> 
> 赞同：3
> 
> 时间：2012-07-18T11:42:48.567
> 
> 标签：java, swing

我有 10 个 JProgressbar，我试图将所有内容放在相同的位置，以便它看起来像目标中所示，但是当我按照它运行时，如失败部分所示。

![在此处输入图像描述](../Images/f5e0d84cac8a89b7199b3b6108d7bd77.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import javax.swing.*;

public class YumYumYum {

  private static JFrame f = new JFrame();
  private static JPanel panelFirst;

  public JProgressBar createJP(int input) {
    JProgressBar jp = new JProgressBar(JProgressBar.VERTICAL);
    jp.setPreferredSize(new Dimension(10, input));    
    return jp;
  }

  public YumYumYum() {
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.setLayout(new FlowLayout());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);

    // Main Menu
    panelFirst = new JPanel();        
    panelFirst.setBackground(Color.BLACK);    
    panelFirst.setLayout(new FlowLayout(FlowLayout.LEFT, 5,30));    
    panelFirst.setVisible(true);

    panelFirst.add(createJP(10));
    panelFirst.add(createJP(20));
    panelFirst.add(createJP(30));
    panelFirst.add(createJP(40));
    panelFirst.add(createJP(50));
    panelFirst.add(createJP(60));
    panelFirst.add(createJP(70));
    panelFirst.add(createJP(80));
    panelFirst.add(createJP(90));
    panelFirst.add(createJP(100));

    f.getContentPane().add(panelFirst);    
    f.pack();
    f.setVisible(true);

  }

  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        YumYumYum s = new YumYumYum();
      }
    });
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:48:11.993

```
 public JProgressBar createJP(int input) {
    JProgressBar jp = new JProgressBar(JProgressBar.VERTICAL, 0, 100);
    //jp.setPreferredSize(new Dimension(10, 100));
    //Why do you use PreferedSize if you want the size to be fixed?
    jp.setSize(new Dimension(10, 100));
    jp.setValue(input);  
    jp.setBackground(Color.BLACK);
    setBorderPainted(false);  
    return jp;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:14:14.157

您可以使用更灵活的 LayoutManager，例如[MigLayout](http://www.miglayout.com/)或 GridBagLayout。

这给了我（大致）想要的结果：

```
MigLayout mig = new MigLayout(null, null, "[align bottom]");
getContentPane().setLayout(mig);
for (int i = 1; i <= 10; i++) {
    getContentPane().add(createJP(i*10));
} 
```

# c++ - 在 QtCreator 上编译

> ID：11540547
> 
> 赞同：1
> 
> 时间：2012-07-18T11:43:00.300
> 
> 标签：c++, qt, qt-creator

我试图在 ubuntu 12.04 上使用 Qt 和 C++ 编程制作一个 frame_generator。我选择使用我的操作系统进入内核空间。我需要从位于我的内核上的 skbuff.h 的内核中提取一个结构，并且我成功解决了 skbuff.h 和内核系统的其他 file.h 的依赖问题，否则我在 QtCreator 上的程序可以访问到 skbuff.h 需要的不同 file.h。

但是当我编译它时，从我正在谈论的不同 files.h 中显示超过 500 个错误，当我看到一些错误时，我发现 Qt Creator 可能无法理解某些写入“C”的代码部分以及“ #ifndef ...、#error ..." 和许多其他问题。

QtCreator 使用 GCC 编译器，我真的不知道该怎么做。

轮廓：

```
QT += core
QT -= gui
TARGET = socket_buffer
CONFIG += console
CONFIG -= app_bundle
INCLUDEPATH += /usr/src/linux-headers-3.2.0-26-generic/include/ \
    /usr/src/linux-headers-3.2.0-26-generic/arch/x86/include/ \
TEMPLATE = app 
SOURCES += main.cpp \
    skb.cpp
HEADERS += \
    skb.h
QMAKE_CXXFLAGS = -I/usr/src/linux-headers-3.2.0-26-generic/include/linux/
QMAKE_CFLAGS = -I/usr/src/linux-headers-3.2.0-26-generic/include/linux/ 
```

示例错误：

```
/usr/src/linux-headers-3.2.0-26-generic/include/linux/jiffies.h:43: error: division by zero in #if
/usr/src/linux-headers-3.2.0-26-generic/include/linux/bitops.h:164: error: #error BITS_PER_LONG not 32 or 64
/usr/include/stdlib.h:337: error: 'size_t' has not been declared 
```

# c# - 如何在不产生异常的情况下检查 COM 属性或方法是否存在？

> ID：11540553
> 
> 赞同：4
> 
> 时间：2012-07-18T11:43:19.673
> 
> 标签：c#, com, .net-3.5

我正在处理一些遗留代码，它创建一个包含属性和/或方法名称的字符串列表，然后尝试将这些属性或方法应用于 COM 对象。COM 对象的属性或方法不保证存在，它可能是我不知道的属性或方法。

目前，如果一个属性或方法不存在，它会被捕获为 COM 异常。这会导致性能不佳。我试图找到一种方法来检查 COM 对象中是否存在属性或方法而不生成异常，以便我可以在尝试应用它之前检查它的存在。

使用 GetType 返回类型 System.com_object。在 System.com_object 上使用 GetProperty 不起作用，因为这是确切的运行时类型，而不是它派生的类型。相反，如果成员不存在，我必须 InvokeMember 创建一个异常。有没有人有更好的方法来做到这一点？

我目前正在使用**.NET 3.5**。迁移到 .NET 4 目前不是一种选择，但如果新的语言功能提供了更好的解决问题的方法，我仍然会对 .NET 4 中的解决方案感兴趣。

```
public static bool CheckIfComPropertyOrMethodExists<T1>(T1 objectToCheck, string propertyOrMethodName)
{
    if (CheckIfComPropertyExists(objectToCheck, propertyOrMethodName) == false & CheckIfComMethodExists(objectToCheck, propertyOrMethodName) == false) {
        return false;
    }
    {
        return true;
    }
}

public static bool CheckIfComPropertyExists<T1>(T1 objectToCheck, string propertyName)
{
    return objectToCheck.GetType().InvokeMember(propertyName, BindingFlags.GetProperty, null, objectToCheck, null) != null;
}

public static bool CheckIfComMethodExists<T1>(T1 objectToCheck, string methodName)
{
    return objectToCheck.GetType().GetMethod(methodName, BindingFlags.Public | BindingFlags.Instance) != null;
} 
```

到目前为止有用的文章

[如何检查对象是否具有某些方法/属性？](https://stackoverflow.com/questions/5114469/how-to-check-whether-an-object-has-certain-method-property)

[从 C# 调用 IDispatch COM 接口的成员](https://stackoverflow.com/questions/8068449/calling-a-member-of-idispatch-com-interface-from-c-sharp)

[http://msdn.microsoft.com/en-us/library/aa909091.aspx](http://msdn.microsoft.com/en-us/library/aa909091.aspx)

[在 C# 中实现 IDispatch](https://stackoverflow.com/questions/8069425/implementing-idispatch-in-c-sharp?rq=1)

[http://msdn.microsoft.com/en-us/magazine/dd347981.aspx](http://msdn.microsoft.com/en-us/magazine/dd347981.aspx)

[http://blogs.msdn.com/b/lucian/archive/2008/10/06/reflection-on-com-objects.aspx](http://blogs.msdn.com/b/lucian/archive/2008/10/06/reflection-on-com-objects.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:17:42.660

COM 类很可能也实现了 IDispatch 接口。然后，您可以使用它的 GetIDsOfNames 来检查类中是否存在成员。

这里有人从 C# 调用它：

[从 C# 调用 IDispatch COM 接口的成员](https://stackoverflow.com/questions/8068449/calling-a-member-of-idispatch-com-interface-from-c-sharp)

# asp.net - 我可以使用图表控件为基于返回的数据的折线图创建 X 个系列 Asp.net vb

> ID：11540555
> 
> 赞同：0
> 
> 时间：2012-07-18T11:43:22.910
> 
> 标签：asp.net, stored-procedures, dataset, asp.net-charts, microsoft-chart-controls

我将为一个项目开发一些图表..此时，我只是为存储过程创建规范文档，有些位对我来说似乎很神秘......

我将使用 ASP.net 图表控件。该图表将是一个折线图，并显示产品一年的销售数据。销售数字可能出现在一年中的一个季度，最多每年 3 个数字，但对于某些产品或某些年份，可能只有一个或两个季度。数据库工作将由数据库开发人员完成，我需要向他请求存储过程接口。因此，我将传递 ProductID 和年份，我想查找销售数据。

如果我请求存储过程从数据库中返回销售数据，那么在.net 端（包括开发图表控件）最容易开发什么 - -

我可以请求返回包含代表季度销售数据的表格的数据集吗？数据集中的一个表代表一个季度的一个销售数据。我不知道数据集中会有多少表。

或者我可以要求返回一个包含产品一年所有销售数据的大数据表。并在后面的代码中过滤自己并填充图表？如果我必须过滤自己，那么最好的方法是什么？

图表需要足够灵活，以根据上述任一返回的数据显示 1、2 或 3 系列折线图。

谢谢，

大号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:27:55.447

根据我的理解，您需要添加一个图表，其中日期范围（周、月或季度）作为 x 轴，SaleData 在 y 轴。最好的方法是在按销售日期分组的单个表中获取数据。

根据表格中可用的最小销售日期和最大销售日期，您可以设置 x-AxisInterval 类型

```
int dateDifference = EndDate.Value.Subtract(StartDate.Value).Days;

            if (dateDifference <= 15)
            {
                chart.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Days;

            }
            else if (dateDifference > 15 && dateDifference <= 60)
            {
                chart.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Weeks;

            }
            else if (dateDifference > 60)
            {
                chart.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Months;

            } 
```

# jquery - idTabs 不起作用

> ID：11540558
> 
> 赞同：1
> 
> 时间：2012-07-18T11:43:35.123
> 
> 标签：jquery, html

我确实在 Sean Catchpole 启动 idTabs 时遇到问题，Chrome 正确加载模块，控制台上没有错误，但 jQuery 不起作用，链接只是将我带到 idTabs 未隐藏的文本 -所以我假设 javascript 或 jQuery 不起作用，但问题出在哪里？这是我的代码

头部部分：

```
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery.idTabs.min.js"></script>

    <script type="text/javascript"> 
    $("#usual1 ul").idTabs(); 
    </script>

</head> 
```

HTML：

```
 <div id="usual1" class="usual"> 
  <ul> 
    <li><a class="selected" href="#tab1">Tab 1</a></li> 
    <li><a href="#tab2">Tab 2</a></li> 
    <li><a href="#tab3">Tab 3</a></li> 
  </ul> 
  <div id="tab1">This is tab 1.</div> 
  <div id="tab2">More content in tab 2.</div> 
  <div id="tab3">Tab 3 is always last!</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:00:28.993

您可以通过简单地制作 $ 并在 google-chrome-console（或 firebug）中按 Enter 来轻松测试并查看 Jquery 是否正常工作，并且该部分正在工作。[我从http://www.sunsean.com/idTabs/](http://www.sunsean.com/idTabs/)下载了 jquery-tabs并将它（非最小文件）包含在 scripts/jquery.idTabs.js

并使用以下代码它可以工作：¨

```
<!DOCTYPE html>
<body>
<head>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css" />

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script type="text/javascript" src="scripts/jquery.idTabs.js"></script>

</head>
<body>
 <div class="usual"> 
  <ul class="idTabs" > 
    <li><a class="selected" href="#tab1">Tab 1</a></li> 
    <li><a href="#tab2">Tab 2</a></li> 
    <li><a href="#tab3">Tab 3</a></li> 
  </ul> 
<div style="display:block;" id="tab1">This is tab 1.</div> 
<div style="display:none;" id="tab2">More content in tab 2.</div> 
<div style="display:none;" id="tab3">Tab 3 is always last!</div> 
</div> 
</body>
</html> 
```

从我可以看到你在写： $("#usual1 ul").idTabs(); 但你不需要那个，你需要的是把 id="idTabs" 放在你有标签的 ul 元素上。然后像你一样，用#tab1 命名你的标签（li 元素），然后在文本中使用相同名称的id。

所以 1 确保 jquery 在控制台中使用 $ 工作（或看到无法获取的错误）。2 删除脚本标签内的代码。3 将class="idTabs" 放在ul 元素中。4、玩得开心。

编辑：应该是 ul 上的 class="idTabs" （或之前的 div）。此外，您可能希望通过 style="display:none" 隐藏您的 div，它们会在按下时弹出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:54:40.823

我认为你必须这样写你的jquery，

```
$(document).ready(function() {
   $("#usual1 ul").idTabs(); 

 }); 
```

您的代码没有调用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T01:37:59.487

idTabs 确实有 Ajax 的问题。如果您在同一页面上使用 idTabs 和 Ajax 代码，那么您可能会同时遇到这两个问题。例如，您不能使用 idTabs 和 Sphider-Plus ajax 自动完成功能，两者都不起作用。

有一个解决方法，[在这里查看](http://www.sochicomputer.ru/blog/articles/%D1%81%D0%BE%D0%B2%D0%BC%D0%B5%D1%81%D1%82%D0%B8%D0%BC%D0%BE%D1%81%D1%82%D1%8C-ajax-%D0%B8-idtabs-ajax-idtabs-compatibility)- 基本上它解决了兼容性问题。

如果我们要举例 idTabs 代码，它实际上写得很好，并且在 jQuery 命名空间内。当插件尝试检查依赖项然后加载自身并加载依赖项时，就会出现问题。无论如何，检查修复。

此外，您可以使用此 javascript 为您的 idTab 设置动画：

```
 <script type="text/javascript"> 
          jQuery("#usual1 ul").idTabs(function(id){  
            jQuery(id).fadeIn(500); 
          }); 
        </script> 
```

# bash - 为什么使用 sed 命令不起作用？

> ID：11540559
> 
> 赞同：2
> 
> 时间：2012-07-18T11:43:36.583
> 
> 标签：bash, replace, sed

我有一个 bash 脚本，用于操作计算集群上的文件。

我试图操作的文件格式如下：

```
beadSize=6.25
minBoxSize=2.2
lipids=1200
chargedLipids=60
cations=0
HEAD=0
CHEAD=-2
BODY=2
TAIL=3
ION=-1
RHO_BODY=10
RHO_TAIL=14
tol=1e-10
lb=7.1
FTsize=8
ROUNDS=1000000
ftROUNDS=10
wROUNDS=1000
dt=0.01
alpha=1
transSize=0.15
transSizeZ=0.0
ionsTransSize=2.8
ionsTransSizeZ=2.8
rotateSize=0.18
volSize=8
modSize=0.0
forceFactor=2
kappaCV=0
sysSize=26
zSize=300
iVal=1
split=0
randSeed=580 
```

我在循环中调用一个函数：

```
for per in $(seq 70 -5 5); do
    for seed in {580..583}; do
        for c in {"fs","fd","bfs","bfd"}; do
            let count=$count+1
            startJob $per $seed $c $count
        done
    done
done 
```

以及我用来操纵的线条：

```
 let n=$1*12
  echo $n
  cat trm.dat | sed '/memFile*/d' | sed '/rStart*/d' | sed '/test*/d'| sed 's/modSize=[0-9.]*/modSize=0.0/' | sed 's/chachargedLipids=[0-9]*/chargedLipids="$n"/' | grep char #> propFile.dat 
```

例如`$per=15`，我期望`$n==180`。但是，当我运行脚本时，我看到：

```
180
chargedLipids=120 
```

我究竟做错了什么？

*注意* 我也尝试过使用：

```
sed "s/chachargedLipids=[0-9]*/chargedLipids=$n/" 
```

结果相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:51:24.313

`chacharged`!= `charged`，最后的 sed 什么也不做。`chargedLipids="$n"`使用单引号，如果进行替换，您会希望在输出中看到文字文本。

# vim - 如何在VIM中将一些全局变量写入vim文件

> ID：11540565
> 
> 赞同：2
> 
> 时间：2012-07-18T11:43:59.587
> 
> 标签：vim

我需要将一些设置和变量写入一些文本文件以供以后检索。检索文件可以是一个简单的源命令。那么从 vimscript 写入文件的最简单方法是什么？

我只想存储一些全局变量。全局，因为它们将被多个缓冲区使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:48:40.263

您可以通过以下命令将所有设置保存到文件中：

```
:mkv settings.vim 
```

键入`:let g:`命令以列出所有全局变量。

您可以将输出重定向到文件：

```
:redir > var.txt
:let g:
:redir END 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T13:29:55.893

当 you`:set viminfo+=!`时，以大写字母开头且不包含小写字母的全局变量会自动在 Vim 会话中保留（在`.viminfo`文件中）。

这是可用的最简单的持久性机制，并且被许多插件使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T11:53:20.010

正如[kev所说](https://stackoverflow.com/a/11540654/78845)，您可以使用：

[`:mkview [file]`](http://vimdoc.sourceforge.net/htmldoc/starting.html#:mkview)，可以使用恢复[`:loadview`](http://vimdoc.sourceforge.net/htmldoc/starting.html#:loadview)

还有：

[`:mksession`](http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession), 你可以重新启动 Vim:

```
vim -S Session.vim 
```

...您的会话神奇地*恢复了。

**实际上*不是魔术。对不起。

# .net - 判断路径是文件还是目录（磁盘上不存在路径）

> ID：11540566
> 
> 赞同：0
> 
> 时间：2012-07-18T11:44:05.010
> 
> 标签：.net, file, path, directory

我正在尝试从可能包含或不包含文件名的路径中提取目录。问题是，当我尝试获取已经是目录的路径的目录名称时， Path.GetDirectoryName() 返回该目录的上层。路径是从数据库加载的，所以我无法检查文件属性。

**前任。** Path.GetDirectoryName("D:\Work\Project\Sources\trunk\Project2\bin\Debug") 返回 "D:\Work\Project\Sources\trunk\Project2\bin\"

我在想一个简单的算法，它检查路径是否包含“。” 特点; 如果是，那么我们正在处理包含文件名的路径。不幸的是，目录名称也可以包含“。” 特点。

我知道这个问题没有完美的解决方案，但下一个最好的方法是什么？

*已经有一个关于这个问题的[Stackoverflow 问题](https://stackoverflow.com/questions/439447/net-how-to-check-if-path-is-a-file-and-not-a-directory)，但它假定文件或目录已经存在。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:46:53.010

如果您的目录或文件不存在，则无法知道它是文件还是目录。

在您的示例中`D:\Work\Project\Sources\trunk\Project2\bin\Debug`，目录中可能有一个名为`Debug`（不带扩展名）的`bin`文件。

另一个例子：`D:\Work\Project\Sources\trunk\Project2\bin\Debug\file.exe`，可能有一个名为的目录`file.exe`，它是`Debug`...的子目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:52:53.727

对于您的场景，如果您的案例确实只涉及“file.ext”格式，那么以下正则表达式将回答您需要的问题

```
^(.*/)([^/]*)$ 
```

# hibernate - Hibernate Native 查询结果列表数据类型不匹配

> ID：11540570
> 
> 赞同：0
> 
> 时间：2012-07-18T11:44:12.963
> 
> 标签：hibernate, jpa

我正在尝试运行本机查询以在休眠状态下获得结果集。我能够从查询中获取列表。

```
Query nativeQuery = manager.createNativeQuery("select name, country_cd from fresher");
List<Object[]> amount =  nativeQuery.getResultList()
for(Object[] e : amount)
{
     for(Object n : e)
        {           
          if(n != null)
               System.out.print(n + " \t " +  n.getClass());
        }
} 
```

预期结果是：Joe，美国

结果如下：

class java.lang.String --> Joe
class java.lang.Character --> U

在数据库中，**name** (VARCHAR2(100)) 和**country_cd** (CHAR(2 BYTE)) 在表更新中定义。

根据[休眠数据库类型](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch08.html)，char(2byte) 被视为 java.lang.Character

如何将 char(2b) 类型的数据检索为 String ？

注意：我不能使用结果类/实体，因为结果可能是动态的。

# php - 如何替换两个或多个连续的双引号？

> ID：11540576
> 
> 赞同：2
> 
> 时间：2012-07-18T11:44:30.110
> 
> 标签：php, regex, preg-replace, double-quotes

对于像这样的字符串：

```
""abc""" 
```

它应该是：

```
"abc" 
```

但是我的尝试失败了：

```
preg_replace('/[\"]+/','"',$input); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:52:50.820

这似乎工作......

```
$input = '""abs"""';
//$input = '""abs""';
//$input = '"abs"""';
//$input = '""abs""';
$input = preg_replace('/"+/','"',$input);

echo $input; 
```

正则表达式的简短解释 -

*   `"`- 这就是我们要找的角色。
*   `+`- 加号表示我们正在寻找前面提到的**一个或多个字符...**

[我的回答建立在[@joey](https://stackoverflow.com/users/73070/joey)[之前的回答](https://stackoverflow.com/questions/11540576/how-to-replace-two-or-more-consecutive-double-quotes/11540642#11540642)的基础上，该回答已被删除......]

* * *

参考 -

*   [preg_replace](http://php.net/manual/en/function.preg-replace.php)
*   [常用表达](http://www.regular-expressions.info/)

# asp.net - 例外：协议错误：未知传输

> ID：11540577
> 
> 赞同：2
> 
> 时间：2012-07-18T11:44:31.577
> 
> 标签：asp.net, asp.net-mvc-2, signalr

我使用 nuget 安装了 SignalR，并创建了一个非常基本的集线器。然后我在 global.asax 中注册了我的集线器。但是当我导航到我的集线器的 url 时，我得到了这个异常。我使用 ASP.NET MVC 2 和 Telerik MVC 扩展。

这是我的 Global.asax

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("elmah.axd");
        routes.IgnoreRoute("favicon.ico");
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    }

    protected void Application_Start()
    {
        RouteTable.Routes.MapHubs("~/flatwhitehubs");
        AreaRegistration.RegisterAllAreas();

        //RegisterGlobalFilters(GlobalFilters.Filters);           
        RegisterRoutes(RouteTable.Routes);

        Application[ApplicationRepository.Current.StockLockObject] = new object();
        Application["InvoiceGeneratorLock"] = new object();
    } 
```

这是我的中心：

```
[HubName("FlatwhiteHub")]
public class FlatwhiteHub : Hub, IConnected, IDisconnect
{
    public Task JoinGroup(string groupName)
    {
        return Groups.Add(Context.ConnectionId, groupName);
    }

    public Task Connect()
    {
        throw new NotImplementedException();
    }

    public Task Reconnect(IEnumerable<string> groups)
    {
        throw new NotImplementedException();
    }

    public Task Disconnect()
    {
        throw new NotImplementedException();
    }
} 
```

# mysql - 带有 SUM 结果和 GROUP BY 的 MYSQL

> ID：11540578
> 
> 赞同：0
> 
> 时间：2012-07-18T11:44:38.650
> 
> 标签：mysql, group-by, sum

我有这个查询，我想对按列 omschrijving 分组的查询的所有结果求和。

查询

```
SELECT b.BoekRegelBedrag as total, c.omschrijving, ctl.vd1, b.BoekRegelId 
FROM condensations as c 
LEFT JOIN condensations_to_ledgers as ctl 
    ON ctl.vd1 = c.code
LEFT JOIN BoekstukRegels as b 
    ON b.BoekRegelGrootboekNr = ctl.GrootboekNummer 
LEFT JOIN GrootboekRekeningen as g 
    ON g.GrootboekNummer = ctl.GrootboekNummer
WHERE c.bedrijf_id = 118  
    AND b.BoekregelUserId = 118 
    AND ctl.bedrijf_id = 118 
    AND g.GrootboekUserId = 118 
    AND c.code < 10 
    AND g.BaSoort = 2
    AND b.BoekRegelPeriode BETWEEN 201000 AND 201013
 GROUP BY b.BoekRegelId 
```

有没有一种简单的方法可以做到这一点？

**编辑**

我尝试对 BoekRegelBedrag 求和，但随后每条记录以一种或另一种方式总结了一部分，我得到了 4 个结果，而不是一个结果与总和列的总数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:05:10.707

由于您没有明确规定应该对哪一列求和，我们不得不猜测。假设不应该对 BoekRegelId 列求和（对 ID 号进行算术运算很少有意义）——*然后不对`ctl.vd1`每个评论*求和——那么：

```
SELECT omschrijving, SUM(total) AS sum_total
  FROM (SELECT b.BoekRegelBedrag as total, c.omschrijving, ctl.vd1, b.BoekRegelId 
          FROM condensations AS c 
          LEFT JOIN condensations_to_ledgers AS ctl
            ON ctl.vd1 = c.code
          LEFT JOIN BoekstukRegels           AS b
            ON b.BoekRegelGrootboekNr = ctl.GrootboekNummer 
          LEFT JOIN GrootboekRekeningen      AS g
            ON g.GrootboekNummer = ctl.GrootboekNummer
         WHERE c.bedrijf_id = 118  
           AND b.BoekregelUserId = 118 
           AND ctl.bedrijf_id = 118 
           AND g.GrootboekUserId = 118 
           AND c.code < 10 
           AND g.BaSoort = 2
           AND b.BoekRegelPeriode BETWEEN 201000 AND 201013
         GROUP BY b.BoekRegelId
       ) AS I
  GROUP BY omschrijving; 
```

基本上，我将您的原始查询结果用作 FROM 子句中的“表”，然后以您可能需要的方式聚合其列。

如果核心查询接近您想要的，另一种更简单的方法也可能是可行的：

```
SELECT c.omschrijving, SUM(b.BoekRegelBedrag) as total
  FROM condensations AS c 
  LEFT JOIN condensations_to_ledgers AS ctl ON ctl.vd1 = c.code
  LEFT JOIN BoekstukRegels           AS b   ON b.BoekRegelGrootboekNr = ctl.GrootboekNummer 
  LEFT JOIN GrootboekRekeningen      AS g   ON g.GrootboekNummer = ctl.GrootboekNummer
 WHERE c.bedrijf_id = 118  
   AND b.BoekregelUserId = 118 
   AND ctl.bedrijf_id = 118 
   AND g.GrootboekUserId = 118 
   AND c.code < 10 
   AND g.BaSoort = 2
   AND b.BoekRegelPeriode BETWEEN 201000 AND 201013
 GROUP BY c.omschrijving; 
```

# solr - 跨多个 Solr 实例查询，允许失败

> ID：11540579
> 
> 赞同：0
> 
> 时间：2012-07-18T11:44:41.380
> 
> 标签：solr, full-text-search, sharding

我们正在考虑构建多个 Solr 索引，这些索引将分布在不同的数据中心，每个索引都有相同的 Schema，但数据不同。我们目前有一个在 2 个站点上工作的原型，并且在接下来的几天内会添加更多... ，我收到一条 500 错误消息，告诉我另一台机器上的连接被拒绝...我想知道的是如何让它优雅地失败？我可以添加一些东西，当一个（或多个）Solr 索引是 MIA 时，我可以告诉用户吗？这是 Solr 内置的东西，还是我需要围绕这个问题编写代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:18:20.833

Solr 4.0 中有一个名为[shards.operator=true](http://wiki.apache.org/solr/DistributedSearch)的特性。如果服务器没有响应，它不会终止整个查询，而是将信息添加到标题中。

# php - 比较和合并数组

> ID：11540581
> 
> 赞同：1
> 
> 时间：2012-07-18T11:44:55.170
> 
> 标签：php, arrays, merge

我正在尝试比较和合并 php 中的数组。假设我有两个数组如下

```
$topCountries1 = array(
    array(
        'India',
        '23',
        '34',
        '11'),
    array(
        'USA',
        '13',
        '24',
        '21'),
    array(
        'Japan',
        '13',
        '24',
        '21'));

$topCountries2 = array(
    array(
        'France',
        '23',
        '34',
        '11'),
    array(
        'India',
        '13',
        '24',
        '21'),
    array(
        'Japan',
        '13',
        '24',
        '21')); 
```

我想合并上述两个数组，以便我将拥有一组唯一的国家/地区值，如果数组中有重复的国家/地区，它应该添加其他三个字段的值并将其组合。

尝试以下代码 - 但我对逻辑感到困惑。

```
$topCountries = array_merge($topCountries1, $topCountries2);

$collect = array();

foreach ($topCountries as $tc) {
    echo $count = count($collect);
    if ($count > 0) {
        foreach ($collect as $c) {
            if ($c[0] == $tc[0]) {
                echo "match<br/>";
                $collect[] = $tc;
            } else {
                $collect[] = $tc;
                echo "no match<br/>";
            }
        }
    } else {
        $collect[] = $tc;
    }
    echo "<br/>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:58:24.993

我以不同的方式尝试了您的答案，并得到了您想要的结果。

```
 $topCountries1 = array(
    array(
        'India',
        '23',
        '34',
        '11'),
    array(
        'USA',
        '13',
        '24',
        '21'),
    array(
        'Japan',
        '13',
        '24',
        '21'));

$topCountries2 = array(
    array(
        'France',
        '23',
        '34',
        '11'),
    array(
        'India',
        '13',
        '24',
        '21'),
    array(
        'Japan',
        '13',
        '24',
        '21'));

$collection = array();

foreach ($topCountries1 as $tc1) {
    foreach($topCountries2 as $tc2){
        if(in_array($tc1[0], $tc2)){
            $collect[0] = $tc1[0];
            $collect[1] = $tc1[1] + $tc2[1];
            $collect[2] = $tc1[2] + $tc2[2];
            $collect[3] = $tc1[3] + $tc2[3];
            array_push($collection, $collect);
        }
    }
}
$final_array = $collection;
foreach($topCountries1 as $tc1){
    $flag = true;
    foreach($collection as $coll){
        if(in_array($tc1[0], $coll)){
            $flag = false;
            break;
        }
    }
    if($flag){
        array_push($final_array, $tc1);
    }
}
foreach($topCountries2 as $tc1){
    $flag = true;
    foreach($collection as $coll){
        if(in_array($tc1[0], $coll)){
            $flag = false;
            break;
        }
    }
    if($flag){
        array_push($final_array, $tc1);
    }
}
var_dump($final_array); 
```

array_merge 将合并它想要添加数据的数据

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:59:52.970

您可以通过简单地保持一个由要合并的键组织的全局数组来做到这一点，并且您将避免不得不以 O(n²) 复杂性来完成它，只需简单的 O(n) 假设键的哈希查找是O(1)。

这是一种比之前发布的更简单的解决方案，它可以接受任意数量的输入数组而无需添加更多代码，此外还允许您在国家名称之后扩展值的数量而无需添加更多代码。

```
$topCountries1 = array(
    array(
        'India',
        '23',
        '34',
        '11',
    ),
    array(
        'USA',
        '13',
        '24',
        '21',
    ),
    array(
        'Japan',
        '13',
        '24',
        '21',
    ),
);

$topCountries2 = array(
    array(
        'France',
        '23',
        '34',
        '11',
    ),
    array(
        'India',
        '13',
        '24',
        '21',
    ),
    array(
        'Japan',
        '13',
        '24',
        '21',
    ),
);

$countries = array();
$data = array($topCountries1, $topCountries2);

foreach($data as $entries)
{
    foreach($entries as $country)
    {
        $name = $country[0];

        // if first time we see the country, add it to the list
        if (!isset($countries[$name]))
        {
            $countries[$name] = $country;
        }
        else
        {
            // add all fields after the first (the name)
            foreach (array_slice($country, 1, null, true) as $idx => $value)
            {
                $countries[$name][$idx] += $value;
            }
        }
    }
}

var_dump($countries);
var_dump(array_values($countries)); 
```

希望有帮助！

# c# - 需要创建一个可以在事件发生时自行移除的事件处理程序

> ID：11540582
> 
> 赞同：3
> 
> 时间：2012-07-18T11:44:57.930
> 
> 标签：c#, wpf, design-patterns, event-handling

我不太确定如何做到这一点，因为我还从来没有需要这种模式。我正在寻找在单独的类中创建事件处理程序的正确模式，该类可以在包含事件的对象执行时自行删除。

基本上，我想创建一个`EventHandler`发生在 WPF事件上的`Window.Close`事件。并且，在处理程序执行期间，它会将自身从`Window.Close`事件中移除。我希望这足够具体，可以继续。

另外，这种模式有特定的名称吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T11:51:18.420

尝试执行以下操作：

```
 RoutedEventHandler handlerLoad = null;
 handlerLoad = delegate
        {
            //Do something
            Window.Close -= handlerLoad;
        };

Window.Close += handlerLoad; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:47:13.933

会像以下工作吗？

```
public void EventHandlerSubscription_Invoked(object sender, EventArgs args)
{
    _objectContainingEvent.MyEventHandler -= EventHandlerSubscription;
} 
```

对不起，如果这不明智，我正在打字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:05:29.200

请详细说明您的项目的“内容”：您打算做什么。
也许您会对手动重置事件感兴趣，除非您重置它们，否则只会触发一次：http: [//msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)

# sql - sql查询中的变量，避免多次计算

> ID：11540583
> 
> 赞同：1
> 
> 时间：2012-07-18T11:44:58.013
> 
> 标签：sql, stored-procedures, db2

如何避免多次计算

我在存储过程中有这个（IBM DB2）

```
UPDATE my_table 
   SET field1 = my_func(fieldx, 1, 2), 
       field2 = my_func(fieldx, 1, 2) * fieldy
   WHERE my_key = 
 AND another_field < 0; 
```

如何避免重复调用该函数`my_func`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:19:35.360

您可以使用两个更新语句来做到这一点。. .

```
UPDATE my_table 
    SET field1 = my_func(fieldx, 1, 2)
    WHERE my_key =   AND another_field < 0;

UPDATE my_table 
    SET field2 = field1 * fieldy
    WHERE my_key =   AND another_field < 0; 
```

顺便说一下，以下内容在 DB2 中不会按预期工作：

```
UPDATE my_table 
    SET field1 = my_func(fieldx, 1, 2),
        field2 = field1 * fieldy
    WHERE my_key =   AND another_field < 0; 
```

这将对集合的第二部分使用旧值。

# class - MSMQ 使用二进制编码时如何最好地处理类

> ID：11540587
> 
> 赞同：0
> 
> 时间：2012-07-18T11:45:09.953
> 
> 标签：class, binary, msmq, formatter

我是新来的，所以请温柔一点。

这个问题围绕 VB.net / VS2010 / MSMQ 4.0

我正在开发一个以 MSMQ 为核心的应用程序。（目前）有 3 个独立的 VB 解决方案，每个解决方案都向队列发送和接收消息。

我尝试使用 XMLMessageFormatter 并遇到了问题，而且这是一个高性能、时间关键的应用程序，我知道 XMLMessaegFormatter 的开销很高，所以我已经切换到使用 BinaryMessageFormatter 来处理消息。

我已经建立了一个类 (clsTMessage)，它为消息数据提供结构并驻留在附加到解决方案的自己的 .vb 文件中。我意识到使用 Binaryformatter 的缺点是完全相同的类（直到版本和所有）必须对消息进行编码和解码，实际上我看到了这个问题。

所以我想，没问题，我只需将 clsTmessage.vb 复制到每个解决方案，但这并不能完全解决问题，因为消息使用主机程序集的命名空间进行编码，因此获取消息的下一个解决方案是在技​​术上寻找不同的类来解码它。

例如，在此示例中，您可以看到 TelemanusWorkbench 版本 1.0.0.0 使用 TelemanusWorkbench.clsTMessage 对消息进行了编码。

```
00 01 00 00 00 FF FF FF .....ÿÿÿ
FF 01 00 00 00 00 00 00 ÿ.......
00 0C 02 00 00 00 49 54 ......IT
65 6C 65 6D 61 6E 75 73 elemanus  
57 6F 72 6B 62 65 6E 63 Workbenc
68 2C 20 56 65 72 73 69 h, Versi
6F 6E 3D 31 2E 30 2E 30 on=1.0.0
2E 30 2C 20 43 75 6C 74 .0, Cult
75 72 65 3D 6E 65 75 74 ure=neut
72 61 6C 2C 20 50 75 62 ral, Pub
6C 69 63 4B 65 79 54 6F licKeyTo
6B 65 6E 3D 6E 75 6C 6C ken=null
05 01 00 00 00 1E 54 65 ......Te
6C 65 6D 61 6E 75 73 57 lemanusW
6F 72 6B 62 65 6E 63 68 orkbench
2E 63 6C 73 54 4D 65 73 .clsTMes
73 61 67 65 09 00 00 00 sage....
0E 6E 65 77 4D 65 73 73 .newMess
61 67 65 54 79 70 65 12 ageType.
6E 65 77 50 72 6F 74 6F newProto
63 6F 6C 56 65 72 73 69 colVersi
6F 6E 0D 6E 65 77 49 64 on.newId
65 6E 74 69 66 69 65 72 entifier
0B 6E 65 77 53 6F 75 72 .newSour
63 65 49 50 0D 6E 65 77 ceIP.new
53 6F 75 72 63 65 50 6F SourcePo
72 74 10 6E 65 77 44 65 rt.newDe
73 74 69 6E 61 74 69 6F stinatio
6E 49 50 12 6E 65 77 44 nIP.newD
65 73 74 69 6E 61 74 69 estinati
6F 6E 50 6F 72 74 0C 6E onPort.n
65 77 54 69 6D 65 73 74 ewTimest
61 6D 70 0E 6E 65 77 4D amp.newM
65 73 73 61 67 65 42 6F essageBo
64 79 01 01 01 01 01 01 dy......
01 00 01 0D 02 00 00 00 ........
06 03 00 00 00 03 44 46 ......DF
58 06 04 00 00 00 01 30 X......0
06 05 00 00 00 0C 30 30 ......00
30 30 30 30 30 30 30 30 00000000
30 30 06 06 00 00 00 07 00......
30 2E 30 2E 30 2E 30 06 0.0.0.0.
07 00 00 00 01 30 06 08 .....0..
00 00 00 0B 31 39 32 2E ....192.
31 36 38 2E 31 2E 31 06 168.1.1.
09 00 00 00 04 35 30 30 .....500
30 20 46 FE 12 F9 32 CF 0 Fþ.ù2Ï
88 06 0A 00 00 00 49 70 .....Ip
2C 31 2C 31 32 33 34 35 ,1,12345
36 37 38 39 30 31 32 33 67890123
34 35 36 37 38 39 2C 31 456789,1
32 33 34 35 36 37 38 39 23456789
30 31 32 33 34 35 2C 31 012345,1
2C 69 6E 74 65 72 6E 65 ,interne
74 2C 75 73 65 72 6E 61 t,userna
6D 65 2C 70 61 73 73 77 me,passw
6F 72 64 2C 30 2C 33 30 ord,0,30
0B                      . 
```

当我从应用程序中的另一个解决方案/项目中获取消息时，它无法解析消息，即使它具有相同的 clsTMessage 副本，它位于命名空间 TelemanusListener.clsTMessage 中。

鉴于在应用程序的不同部分拥有多个类的副本通常是一个坏主意，那么推荐的方法是什么？我已经阅读了 MSDN 对此的看法，但是关于如何实际实现它的内容非常薄弱。

希望我已经解释得很好，如果没有，请询​​问更多信息。

邓肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T10:26:25.313

是的。需要从两个项目中引用一个具有公共消息类型的类库。

关于自动属性的一点警告——不要在需要序列化/反序列化的类中使用它们。每次将类类型编译到程序集中时，编译器都会为每个自动属性创建一个随机命名的支持字段。当您使用不同项目部署在不同时间编译的同一个类库时，这可能会导致序列化问题。

# java - 如何将 Struts2 MessageResources.properties 文件加载到非操作类中

> ID：11540588
> 
> 赞同：1
> 
> 时间：2012-07-18T11:45:10.067
> 
> 标签：java, struts2, quartz-scheduler

如何将 Struts2 加载`MessageResources.properties`到其他非动作类中。基本上要求是我`Servlet`在 struts2 Web 应用程序中有一个 Quartz 调度程序和一个作业类。我想获得`MessageResource.properties`这个 servlet/job 类的属性。但我无法读取文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:57:20.043

Apache Commons 配置库是您正在寻找的。:)

# python - 如何在python中使用Pywinauto传递带有空格的windows完整标题名称

> ID：11540590
> 
> 赞同：0
> 
> 时间：2012-07-18T11:45:16.373
> 
> 标签：python

我想自动化 Adob​​e Reader 菜单，

```
from pywinauto import application
app = application.Application()
app.start_(r"C:\Program Files (x86)\Adobe\Reader 9.0\Reader\AcroRd32.exe") 
```

所以在如何获得完整的窗口标题“Adobe Reader”并导航到文件菜单之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:26:22.153

检查文档： http: [//pywinauto.googlecode.com/hg/pywinauto/docs/index.html](http://pywinauto.googlecode.com/hg/pywinauto/docs/index.html)

您可以使用[`MenuItems()`](http://pywinauto.googlecode.com/hg/pywinauto/docs/code/pywinauto.controls.HwndWrapper.html#pywinauto.controls.HwndWrapper.HwndWrapper.MenuItems)来检索对话框的菜单项

# hadoop - 无法使用 start-dfs.sh 启动守护进程

> ID：11540591
> 
> 赞同：5
> 
> 时间：2012-07-18T11:45:23.393
> 
> 标签：hadoop, hdfs, cloudera

我们正在使用来自 cloudera 的 cdh4-0.0 发行版。我们无法使用以下命令启动守护程序。

```
>start-dfs.sh
Starting namenodes on [localhost]
hduser@localhost's password: 
localhost: mkdir: cannot create directory `/hduser': Permission denied
localhost: chown: cannot access `/hduser/hduser': No such file or directory
localhost: starting namenode, logging to /hduser/hduser/hadoop-hduser-namenode-canberra.out
localhost: /home/hduser/work/software/cloudera/hadoop-2.0.0-cdh4.0.0/sbin/hadoop-daemon.sh: line 150: /hduser/hduser/hadoop-hduser-namenode-canberra.out: No such file or directory
localhost: head: cannot open `/hduser/hduser/hadoop-hduser-namenode-canberra.out' for reading: No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:49:21.977

看起来你正在使用压缩包？

尝试在配置文件中设置覆盖默认`HADOOP_LOG_DIR`位置，如下所示：`etc/hadoop/hadoop-env.sh`

```
export HADOOP_LOG_DIR=/path/to/hadoop/extract/logs/ 
```

然后重试`sbin/start-dfs.sh`，它应该工作。

在打包的环境中，启动-停止脚本被调整为通过相同的`HADOOP_LOG_DIR`env-var 为每种类型的服务提供唯一的位置，因此它们不会出现您看到的相同问题。

如果您使用的是包，请不要使用这些脚本，而只需执行以下操作：

```
service hadoop-hdfs-namenode start
service hadoop-hdfs-datanode start
service hadoop-hdfs-secondarynamenode start 
```

# ruby-on-rails - 回形针无需扩展即可保存远程图像

> ID：11540600
> 
> 赞同：3
> 
> 时间：2012-07-18T11:45:57.357
> 
> 标签：ruby-on-rails, image, file-extension

在这里我有控制器

```
require 'open-uri'

user = User.new
url = "some_remote_image.jpg" #remote image WITH extension
user.image = open(url)
user.save 
```

模型

```
has_attached_file :image,
  :styles => { :thumb => "25x25>", :large => "1000x1000>" }, 
  :path => ":rails_root/images/users/:id/:style/:hash.:extension",
  :url => "/images/users/:id/:style/:hash.:extension",
:hash_secret => "hash string" 
```

这项工作，但图像存储没有扩展，例如。“一些远程图像。” 如果通过邮寄形式上传图片，则所有内容都上传 WITH 扩展名。我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T13:49:13.800

我通过将 Paperclip 更新到最后一个 github 版本并像这样设置图像而不是 user.image = open(url) 来解决它

```
user.image = URI.parse(url) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-10T01:28:46.583

如果有人想要相反的事情 - 将扩展名添加到没有扩展名的文件

```
 def besfore_save
    tempfile = data.queued_for_write[:original]
    unless tempfile.nil?
      extension = File.extname(tempfile.original_filename)
      if !extension || extension == ''
        mime = tempfile.content_type
        ext = Rack::Mime::MIME_TYPES.invert[mime]
        self.data.instance_write :file_name, "#{tempfile.original_filename}#{ext}"
      end
    end

    true
  end 
```

# beautifulsoup - 当默认为 python2.7 时，让 easy_install 为 python2.5 安装一些东西

> ID：11540601
> 
> 赞同：0
> 
> 时间：2012-07-18T11:46:00.057
> 
> 标签：beautifulsoup, easy-install

因为我使用的是谷歌应用引擎，所以我必须使用 python2.5。

因此，我需要安装适用于 python2.5 的旧版本 BeautifulSoup（我认为 bs 3.0.7a 可以工作）。

为了做到这一点，据我所知，我需要让 easy_install 将 BeautifulSoup 放在 python2.5 文件夹中，而不是 python2.7 文件夹中，这是默认设置的。

easy_install 的文档说如下：

“另外，如果您使用的是 Python 2.4 或更高版本，您可以使用 -m easy_install 运行 Python 来运行该特定 Python 版本的 easy_install 命令。”

但我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:36:01.277

本指南帮助我做对了：

[http://achinghead.com/installing-multiple-versions-python.html](http://achinghead.com/installing-multiple-versions-python.html)

# payment-gateway - 如何将买家输入的自定义数据作为传递变量直接传递给 PayPal？

> ID：11540604
> 
> 赞同：1
> 
> 时间：2012-07-18T11:46:10.993
> 
> 标签：payment-gateway, paypal-ipn, pass-through

我的场景是：1）用户输入一些自定义数据 2）他按下“立即购买”按钮，然后将自定义数据发送到 PayPal。3）付款后，在 PayPal IPN 处理程序中检索他的自定义数据。

此时，我想将自定义数据作为传递变量传递给 PayPal。

```
<input type="text" name="custom" /> 
```

可能吗？我可以在 IPN 处理程序中检索此值吗？如果不可能，我如何将买家输入的自定义数据作为传递变量传递给 PayPal？

欢迎任何有好的解决方案的人？谢谢。

# c# - 单个字符串值中的不同样式格式

> ID：11540607
> 
> 赞同：0
> 
> 时间：2012-07-18T11:46:22.897
> 
> 标签：c#, windows, string, ms-word

如何在单个字符串中具有多种字体样式。

我有一个大字符串，我会将该字符串附加到来自 c# windows 应用程序的 microsoft word 中。

我希望一些字符是粗体的……有些是大字体的。像那样。

我尝试使用普通的 HTML 标签，如 < b > 粗体 ..</ b> 它不会工作..

我想要混合字体样式的字符串。

```
 Text  BOLD  small BIG 
```

正如我所提到的，我正在将该字符串从 c# windows 应用程序导出到 word 文件。

帮助 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:53:11.780

您问题的关键字是**RTF，RichText 格式字符串**见

*   [在 C# 中操作 RichText 的更好方法？](https://stackoverflow.com/questions/136132/better-way-of-manipulating-richtext-in-c)

    *   [如何在 C# 中将字符串转换为 RTF？](https://stackoverflow.com/questions/4795709/how-to-convert-a-string-to-rtf-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:53:24.613

您可以使用 RTF - 有关示例，请参阅[“如何使用 Visual Basic 自动化将富文本格式字符串粘贴到 Word 中”](http://support.microsoft.com/kb/258513)（在 VB.Net 中，但在 C# 中的工作方式相同）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:55:25.170

**字符串没有样式**。字符串是字符列表，仅此而已。

如果要将样式**文本**复制/粘贴到 word，则必须先将其导出为另一种格式。您可以使用 HTML 或 RTF。

[这个库](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)可能会帮助你。

# android - 从文件加载 AppState 时显示 ProgressDialog

> ID：11540611
> 
> 赞同：1
> 
> 时间：2012-07-18T11:46:35.873
> 
> 标签：android, android-activity, state, activity-lifecycle

当我的活动被关闭时，我将应用程序状态数据序列化到文件中，以便在应用程序被系统杀死时重新加载状态。

这种方法（保存和恢复状态）效果很好。但是，有时，当进程被杀死时，根据要加载的数据量，加载状态进程可能至少需要几秒钟才能完成。

因此，我无法在单独的线程上加载状态，因为如果 onLoad 上没有数据，我的活动将崩溃。

所以，我想在加载内容时显示一个进度对话框，但是，确保只有在加载状态过程之后才会调用 Activity 的 onLoad 方法。

有谁知道我怎么能做到这一点？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:51:17.873

嗯..你能覆盖这个`onLoad()`函数，然后添加一个布尔值来说明你是否正在显示对话框。如果对话框正在显示（布尔值为真），不要让`onLoad()`任何事情做；否则，照常进行。这样，一旦对话框被关闭，您可以再次将布尔值设置为 false，如果`onLoad()`之后默认不调用，也许您可​​以手动调用它？这只是一个想法。

换句话说：可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)显示对话框。在该`onPreExecute()`方法中，将布尔值设置为 true，在 中执行您需要的所有操作`doInBackground()`，然后`onPostExecute()`将布尔值设置为 false 并调用`onLoad()`。

在旁注......你的意思是`onCreate()`或`onResume()`？我实际上没有听说过`onLoad()`，除非这是您创建的功能。

# javascript - 当用户输入时打开一个弹出窗口使用javascript填充表格中的输入字段

> ID：11540617
> 
> 赞同：0
> 
> 时间：2012-07-18T11:46:54.060
> 
> 标签：javascript

我有一个包含输入字段的表。按用户输入时间值。这里我想要的功能是当他们填写第一个开始时间时，打开一个窗口，询问“你想包括上午/下午指定吗？” 如果他们说是，请将这些上午/下午选项包括在表中。我怎样才能通过使用 javascript 来做到这一点。

我写下面的代码

```
<div class="tbody">
<div class="tbc1" style="width:32%;">
Start Time</div>
</div>

<div class="tbody"><div class="tbc1" style="width:32%">
<input class="tblinput cd1st tsst tf" id="tsst" maxlength="5" type="text" style="width:45px;" placeholder="hh:mm"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:50:17.967

当用户离开输入时，使用 onblur 来处理。

使用 confirm('my message') 显示问题。

像这样的东西：

```
<input type="text" onblur="showMessage(this);" />

function showMessage(sender)
{
    if (confirm('do you want to...'))
    {
        document.getElementById('ampm').style.display = 'block';
    }
} 
```

如果需要，可以显示一个隐藏的 am/pm 字段：

```
<select id="ampm" name="ampm" style="display: block">
 <option>am</option>
 <option>pm</option>
</select> 
```

# jquery - JQuery 等列高度的列表项绝对底部

> ID：11540622
> 
> 赞同：2
> 
> 时间：2012-07-18T11:47:01.897
> 
> 标签：jquery, css, height

我有两件事。

1.  我的最后一个列表项绝对位于无序列表的底部，但它与无序列表的底部重叠。
2.  我想将绝对底部与“JQuery Equal Column Height”一起使用，所以我的两列彼此相等，因为我计划有斜角边框。

我正在找人为我解决这个问题，因为我现在被困住了。

这是我的 jsfiddle，最后一个列表项绝对底部：http: [//jsfiddle.net/evanmoore/QPQ8Z/](http://jsfiddle.net/evanmoore/QPQ8Z/)

这是与最后一个列表项绝对底部的 jquery 相等列高 [http://jsfiddle.net/evanmoore/mCang/2/](http://jsfiddle.net/evanmoore/mCang/2/)

```
var maxHeight = 0;
function setHeight(column) {
    //Get all the element with class = col
    column = $(column);
    //Loop all the column
    column.each(function() {       
        //Store the highest value
        if($(this).height() > maxHeight) {
            maxHeight = $(this).height()+2;
        }
    });
    //Set the height
    column.height(maxHeight);
}

$(document).ready(function() {
    setHeight('.wrapper');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:57:05.447

最初设置`position`为`#disclosure li.notes`。`relative`这将使较高的列被推下，因此您可以抓住 maxHeight。然后，在获得该数字后，将其设置回绝对值，这样就可以了`bottom: 0`。

[http://jsfiddle.net/mCang/3/](http://jsfiddle.net/mCang/3/)

# c# - C# 用函数分配 const 成员

> ID：11540624
> 
> 赞同：3
> 
> 时间：2012-07-18T11:47:11.160
> 
> 标签：c#, java

在java中它可以做这样的事情

```
class {
    final int x = Random.randomInt();
    final int y = Random.randomInt();
} 
```

...

```
switch (intVariable)
{
    case x: break;
    case y: break;
} 
```

只要 generateInt 是最终的，就会编译。

C#中是否有等价物？

编辑：你可能会问我为什么不使用具体的值或枚举，但我有我的理由为什么这些值是随机的。;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T11:47:54.970

使用[const](http://msdn.microsoft.com/en-us/library/e6w8fe1b.aspx)你不能这样做，它必须是一个编译时间常数。

您可以使用[readonly](http://msdn.microsoft.com/en-us/library/acdd6hb7%28v=vs.71%29.aspx)，例如：

```
public class yourClass
    {
        public readonly int x = generateInt();

        public static int generateInt()
        {
            return DateTime.Now.Millisecond; // or any other method getSomeInt();
        }
    } 
```

编辑：由于现在对问题进行了编辑，并参考 switch 语句中的 case 表达式进行询问。您不能在 case 语句中指定变量或只读，它必须是常量表达式/编译时间常量。

来自[MSDN - 交换机](http://msdn.microsoft.com/en-us/library/06tc147t.aspx)

> 每个案例标签指定一个常量值。

您可以将 if...else 用于您的场景。

# batch-file - dos批处理文件查找丢失的顺序文件名

> ID：11540626
> 
> 赞同：2
> 
> 时间：2012-07-18T11:47:13.890
> 
> 标签：batch-file

这是这种情况，我有一个目录，每个目录中有 10,000 个文件，命名如下：

文件名.XX0000.csv

文件名.XX9999.csv

文件名本身的大小可以更改，即：

文件名.XXX0000.csv

文件名.XXX9999.csv

文件名.XXXX0000.csv

文件名.XXXX9999.csv

X 是另一个父编号，但无论如何都应该忽略这些编号。

无论如何，尽管所有目录都应该正好有 10,000 个文件，不多也不少。问题是有些丢失了，我需要知道哪些丢失了。

我尝试了这篇文章中的脚本： [batch script to find missing sequence no](https://stackoverflow.com/questions/11454701/batch-script-to-find-missing-sequence-no)

我什至把字符串序列弄乱了几个小时都无济于事。这些选项都不能很好地工作，第二个脚本接近但最终陷入无限循环，或者吐出确实存在的文件。

我需要想出一个解决方案，可以很容易地告诉我缺少哪些数字或文件名。在我的梦想世界中，我会喜欢一个脚本，我可以将它放在父目录中，它会爬过所有子目录并打印丢失的单个文件。

最好不必告诉脚本文件名的开头部分是什么，因为理论上它应该只查看最后四个数字是否存在于 0000-9999 之间。

由于这是我的第一篇文章，我希望通过创建一个新主题来正确地做到这一点，我打算将我的问题添加到上一个主题中，直到我在邮箱中看到“但避免……”！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:09:02.463

让我们看看你是否可以编写一些代码。

*   `FOR /L`可以从 0 数到 9999
*   `IF NOT EXIST`可以测试文件是否丢失，并且支持通配符。
*   `>`并且`>>`可以将输出重定向到文件

为您的梦想世界：

*   `FOR /D /R %%F IN (.)`将迭代整个文件夹层次结构

**编辑**

您可能需要用零填充一个数字，以便宽度始终为 4 位。由于这可能会在一个循环中，您将需要使用延迟扩展。假设 %%N 是一个包含数字的 FOR 变量。

```
set num=000%%N
set num=!num:~-4! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-12T08:13:44.093

这是一个脚本，它将以连续的顺序查找所有丢失的文件：

```
@echo off

setlocal ENABLEDELAYEDEXPANSION
set max=1208
set cnt=0

for /L %%f in (0,1,%max%) do (
    set "num=00000%%f"    
    set "num=!num:~-4!"
    if not exist "img!num!.png" (
        echo img!num!.png
        set /A "cnt=!cnt!+1"
    )
) 
echo NUMBER MISSING: !cnt!

endlocal 
```

请注意，您需要使用循环内部`!x!`而不是`%x%`获取局部延迟变量。

# jenkins - 在詹金斯中使用 gtest

> ID：11540633
> 
> 赞同：29
> 
> 时间：2012-07-18T11:47:36.677
> 
> 标签：jenkins, googletest

我在 Jenkins 中使用 google test 成功运行了我的单元测试，但我不知道如何显示 gtest 生成的 .xml 文件。据说gtest满足JUnit格式，所以我设置如下：

[![截屏](../Images/ae34a12ea3020df494c463f5a35d135b.png)](https://i.stack.imgur.com/dbrft.png)

但它最终在构建后出现错误。

> 未找到测试报告文件。配置错误？
> 构建步骤“发布 JUnit 测试结果报告”将构建结果更改为 FAILURE
> Finished: FAILURE

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-28T19:28:34.103

Fraser 的回答很好，您需要一些额外的处理才能将 gtest XML 转换为正确的 JTest 格式。

首先，您要求 gtest 使用以下命令将结果输出到 XML：

```
mygtestapp --gtest_output=xml:gtestresults.xml 
```

然后在脚本中，您需要添加额外的元素来正确标记跳过的测试。Jenkins 的 JTest 处理器要求跳过的测试包含 <skipped> 元素，而不仅仅是将状态设置为“notrun”：

```
awk '{ if ($1 == "<testcase" && match($0, "notrun")) print substr($0,0,length($0)-2) "><skipped/></testcase>"; else print $0;}' gtestresults.xml > gtestresults-skipped.xml
mv gtestresults.xml gtestresults.off 
```

如果在 Windows 批处理文件上运行它，请将 awk 操作放在文件中以避免引号出现问题。awk.prog 文件：

```
{ if ($1 == "<testcase" && match($0, "notrun")) print substr($0,0,length($0)-2) "><skipped/></testcase>"; else print $0;} 
```

并在你的 bat 文件中创建 add ：

```
awk -f awk.progfile gtestresults.xml > gtestresults-skipped.xml 
```

最后，您将 JTest 处理器作为构建后步骤来读取转换后的 XML：

```
# Publish JUnit Test Result Report
Test Report XMLs: gtestresults-skipped.xml 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-18T13:55:14.407

您是否使用正确的标志（即）运行您的测试可执行文件`--gtest_output=xml[:DIRECTORY_PATH\|:FILE_PATH]`？

从`--help`输出：

> `--gtest_output=xml[:DIRECTORY_PATH\|:FILE_PATH] Generate an XML report in the given directory or with the given file name. FILE_PATH defaults to test_details.xml.`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:47:04.187

您的结果文件未存储在正确的位置，Jenkins 插件无法找到它。执行测试并生成 XML 文件后，您是否将其存储在任何地方？

我建议尝试通过将 result.xml 替换为 '*' 来使其工作（假设这是应该存储在那里的唯一 XML 文件），如果这将工作，那么开始使用正确的文件名。

我们在配置中遇到了同样的问题。确保生成的结果 XML 存储在插件期望的关键位置。您可以从项目配置中确定工作区根目录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-17T11:06:40.077

Jenkins 配置页面上的错误有点像红鲱鱼。

本质上，发生的事情是构建作业没有生成测试报告 xml 文件。因此，您会收到此错误：

```
Recording test results
No test report files were found. Configuration error? 
```

当然，必须正确配置位置。为此，请参阅这篇文章：

[如何在使用 grails 的 Jenkins CI 上配置测试报告？](https://stackoverflow.com/questions/6494317/how-to-configure-test-reports-on-jenkins-ci-working-with-grails)

那么，如何修复错误呢？关键是研究控制台输出以检查测试是否成功运行。他们可能没有，这就是错误发生的原因。

一旦你成功运行测试，假设你正确配置了位置，你应该没问题。

您正在使用 JUnit，因此它将是一个 Java 项目。我会在这里指出，以防它可能对其他人有所帮助，我们正在运行 Xcode。测试没有运行。

埋在错误上方的 Jenkins 控制台输出中是以下注释：

```
 note: RunUnitTests exited without running tests because TEST_AFTER_BUILD was set to NO. 
```

弹回 Xcode，并设置`UnitTests`目标的*Test After Build*标志来达到`YES`目的。那在*单元测试*部分。当然，您也可以在项目级别设置标志，并将目标更改为“其他”，将值设置为`$(inherited)`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-16T17:20:42.467

Jenkins 有 xunit 插件，可将 googletest xml 转换为 junit 格式：[https](https://plugins.jenkins.io/xunit/) ://plugins.jenkins.io/xunit/ 。

管道示例

```
pipeline {
    agent any
    stages {
        stage('Test'){
            steps {
                sh "run_tests.bash"
            }
        }
    }
    post {
        always{
            xunit (
                thresholds: [ skipped(failureThreshold: '0'), failed(failureThreshold: '0') ],
                tools: [ GoogleTest(pattern: 'reports/*.xml') ]
            )
        }
    }
} 
```

其他有用的链接：

*   [https://jenkins.io/doc/pipeline/steps/xunit/](https://jenkins.io/doc/pipeline/steps/xunit/)
*   [https://jenkins.io/blog/2016/10/31/xunit-reporting/](https://jenkins.io/blog/2016/10/31/xunit-reporting/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-22T08:40:17.583

这是一个 windows 批处理版本，用于通过 windows 批处理将 google-test "notRun" 转换为 junit "skipped"。我知道有更优雅的方法，但是这个只需要 windows 批处理就可以了

```
rem convert gtest xml to junit compatible format (replace notRun by skipped)
IF EXIST  %INTEXTFILE% (
    IF EXIST %OUTTEXTFILE% (
        del %OUTTEXTFILE%
        waitfor fileSystemToDoItsStuff /t 1
    )
    FOR /f "tokens=1,* delims=¶" %%A IN ( '"type %INTEXTFILE%"') DO (
        ECHO."%%A" | findstr /C:"DISABLED_">nul & IF ERRORLEVEL 1 (
            SET modified=%%A
        ) ELSE (
            SET string=%%A
            SET modified=!string:/^>=^>^<skipped /^>^</testcase^>!
        )
        ECHO !modified!>> %OUTTEXTFILE%
    )
    del %INTEXTFILE%
    waitfor fileSystemToDoItsStuff /t 1
    move %OUTTEXTFILE% %INTEXTFILE%
) 
```

# javascript - 使用 Javascript 更改 HTML 代码。不太工作

> ID：11540637
> 
> 赞同：1
> 
> 时间：2012-07-18T11:47:45.443
> 
> 标签：javascript, html

我在带有各种复选框和文本框的页面上有一个相当长的表单。如果勾选了相应的复选框，我希望有一个文本框可用。我几乎可以使用以下代码：

```
<tr class= "formspace">
<td class="formleft" valign="top" style="line-height:22px">Extra bed(s)?</td>
<td colspan="2"><input name="extrabed" type="checkbox" value="1" onChange="jsextrabed()"><?php echo $lang["extraadultx"]." ".$lang["notsingleoccx"];?>   
<div id="extrabednumber"></div>
<script type="text/javascript">
function jsextrabed() {
if(document.roomnew.extrabed.checked == 1) {
document.getElementById("extrabednumber").innerHTML='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max number of extra beds <input name="extrabed" type="text" id="extrabed" size="1" maxlength="1" value="1">';
}else{
document.getElementById("extrabednumber").innerHTML='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max number of extra beds <input name="extrabed" type="text" id="extrabed" size="1" maxlength="1" value="0">';
}
}
</script>
</td>
</tr> 
```

首次打开页面时，仅显示复选框。

当我勾选复选框时，文本框打开，值为 1。到目前为止，一切都很好。

当我再次单击复选框时，未选中该复选框，并且文本框中的值更改为 0。仍然很好。

当我再次单击复选框时（好），但文本框中的值保持在 0（坏！）。

进一步单击会切换复选框，但对文本框中的值没有影响。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:56:50.260

显示的代码没有问题。

这是一个工作演示：http: [//jsfiddle.net/dystroy/u6mtW/](http://jsfiddle.net/dystroy/u6mtW/)

**HTML：**

```
<tr class= "formspace">
<td class="formleft" valign="top" style="line-height:22px">Extra bed(s)?</td>
<td colspan="2"><input name="extrabed" id=checkextra type="checkbox" value="1" >some php   
<div id="extrabednumber"></div>
</td>
</tr>​ 
```

**Javascript：**

```
<script>
    window.onload=function(){
        document.getElementById('checkextra').onchange = function() {
            if(this.checked) {
                 document.getElementById("extrabednumber").innerHTML='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max number of extra beds <input name="extrabed" type="text" id="extrabed" size="1" maxlength="1" value="1">'; 
            }else{
                 document.getElementById("extrabednumber").innerHTML='&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max number of extra beds <input name="extrabed" type="text" id="extrabed" size="1" maxlength="1" value="0">';
            }
        }​;
    };
</script> 
```

我做了一些改变

*   适应我们没有整个 DOM 的事实。您的问题可能存在，在我们看不到的部分。
*   确保该功能正确地挂在复选框上（您可能会遇到未完全加载 DOM 的问题，具体取决于您的页面）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:54:23.247

只需检查

```
if(document.roomnew.extrabed.checked){
}
else
{ 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T13:24:24.183

问题解决了！

我对两个元素使用了相同的名称：复选框输入和文本框输入（在 innerHtml 中被称为“extrabed”。更改其中一个已修复它。

感谢所有提供帮助的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T11:51:22.723

使用此代码进行检查：

```
if(document.roomnew.extrabed.checked) { 
```

# java - html5检查器编译

> ID：11540645
> 
> 赞同：3
> 
> 时间：2012-07-18T11:48:19.243
> 
> 标签：java, python, html, symfony, liipfunctionaltestbundle

我想`LiipFunctionalTestBundle`在我的 Symfony2 项目中使用 html5 验证器。因此，我按照 bundle 的 github 页面上的说明进行操作，但在 python 构建期间出现此错误：

> IOError：[Errno 2] 没有这样的文件或目录：'./syntax/relaxng/datatype/java/dist/html5-datatypes.jar'

实际上，该路径下有一个“dist”文件夹，但它是空的（里面没有文件）。我也尝试从 daisy-pipeline 下载文件，但在再次运行 python build 后它被删除了

我在 Ubuntu x64 上使用 Java 1.7.0_04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T06:59:21.943

如上所述：

> 您需要安装 JDK，而不仅仅是 JRE。那是因为你需要java编译器。

# android - 在 InMobi Addtracker 上我的应用程序没有被报告

> ID：11540650
> 
> 赞同：2
> 
> 时间：2012-07-18T11:48:31.740
> 
> 标签：android

我在我的 android 应用程序中使用 inmobi。为此，我将 InMobiAdTrackerAndroid.jar 与此 jar 一起使用，我正在关注文档。

1：我们在我的应用程序启动器类中使用以下代码 IMAdTrackerUtil.setLogLevel(LOG_LEVEL.VERBOSE); IMAdTrackerAnalytics.getInstance().startSession(getApplicationContext(),Constants.INMOBI_APP_ID);

2：我们使用这个常量代替上面的粗体文本 public static final String INMOBI_APP_ID = "5cd90875-04c7-476d-aa6e-ee7cf0ac70f6";

3：在 AndroidManifest.xml 类中我们添加以下代码

```
 <receiver
        android:name="com.inmobi.adtracker.androidsdk.IMAdTrackerInstallRefererReciever"
        android:enabled="true"
        android:exported="true" >
        <intent-filter>
            <action android:name="com.android.vending.INSTALL_REFERRER" />
        </intent-filter>
    </receiver> 
```

4：InMobiAdTrackerAndroid.jar 是我们用于inmobi 的库，该库被添加到构建路径中。

在报告中的 InMobi 网站上，我没有得到应用程序的名称。（应用程序存在于仪表板中，报告中不存在）我使用我的应用程序的 qrcode 测试了应用程序，并将我转发到我的应用程序所在的 google play。那么我的应用程序没有显示在报告中的原因是什么。这里 ia 使用带有 sdk 版本 11 的三星平板电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:36:54.190

你需要打电话给

```
IMAdTrackerAnalytics.getInstance().reportInstallGoal() 
and 
IMAdTrackerAnalytics.getInstance().reportGoal("Any custom goal"). 
```

然后您将在 UI 中看到报告。安装目标和您定义的所有其他自定义目标，需要通过 api 调用报告。

也不要错过清单中的以下活动和所需的权限。

希望这可以帮助。

# php - MySQL (innoDB) PHP 搜索多个单词

> ID：11540652
> 
> 赞同：0
> 
> 时间：2012-07-18T11:48:37.153
> 
> 标签：php, mysql, full-text-search, innodb

我正在运行 MySQL 5.1.57 版

我有一个 HTML 表单，用户可以在其中插入搜索字符串。`$_SESSION`我在这个字符串上创建一个，然后在`MySQL`查询中运行它。像这样的东西：

```
<?php

  $sql = mysql_query ("SELECT 
                        s.student_firstname, s.student_lastname 
                      FROM students s 
                      WHERE (
                             s.student_firstname LIKE '%$searchstring%' OR
                             s.student_lastname LIKE '%$searchstring%
                             )
                      AND s.isActive = '1' "); 
?> 
```

问题是当用户搜索多个单词时。然后我的查询失败，因为它试图将字符串与任一列中的值进行匹配。

我读过一些关于 MySQL FULLTEXT 索引的内容，但据我所知，它只适用于`MyISAM`表（？）。如何使用我拥有的环境搜索多个单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:37:09.900

我认为您应该将搜索到的字符串拆分为空格（“”）并将每个段插入到您的查询或另一个查询中。例如 ：

$str = "word1 word2";

这样，您首先搜索整个字符串“word1 word2”，然后在数据库中搜索“word1”和“word2”。使用此解决方案，您应该处理一个单词忽略列表，因为像“a, an, the, or, ...”之类的单词不应该是 seek ...

我不确定 innoDB 表是否有其他方法......最好的解决方案显然是使用“匹配”命令，但它仅适用于 MyISAM 下的全文索引。

# java - 如何将变量的值分配给线程以及何时应该完成？

> ID：11540656
> 
> 赞同：0
> 
> 时间：2012-07-18T11:48:44.320
> 
> 标签：java, multithreading

我是处理多线程的新手。我有一点感到困惑并寻求澄清。我在主程序中有以下内容：

```
String hostname = null;
ExecutorService threadExecutor = Executors.newFixedThreadPool(10);
MyThread worker = null;

while(resultSet.next()) { 
  hostname = resultSet.getString("hostName");
  worker = new MyThread(hostname);
  threadExecutor.execute( worker );
}

threadExecutor.shutdown();

while (!threadExecutor.isTerminated()) {
  threadExecutor.awaitTermination(1, TimeUnit.SECONDS);
} 
```

实现runnable的类是：

```
public class MyThread implements Runnable{
  String hostname=null;

  MyThread (String hostname) {
    this.hostname=hostname;
    System.out.println("New thread created");
  }

  public void run() {
    Class1 Obj1 = new Class1();
    try {
      obj1.Myfunction(hostname);
    } catch (Exception e) {
      System.out.println("Got an Exception: "+e.getMessage());
    }
  }
} 
```

我有一个名为主机名的变量。每个线程都需要获取这个变量，因为它必须传递给`Myfunction`每个线程需要执行的函数。

我在构造函数中定义了一个名为 hostname 的变量。然后我将变量发送`hostname`到，`MyFunction(hostname).`因为`hostname`在类中定义`MyThread`，然后它作为参数发送到`Myfunction`的主机名是线程的主机名。

不知道有没有必要做任务`this.hostname=hostname`？？我什么时候需要写这个词`this.`？我需要将主机名与单词一起发送到 Myfunction`this.`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:57:32.223

您必须`this.hostname`在构造函数中使用，因为您有一个名为的参数`hostname`，因此如果您不使用`this`，您只需将参数的值存储在参数本身中。

在`run`你不必使用`this`，因为在函数的范围内没有其他同名的变量。

另请参阅[我什么时候应该在课堂上使用“this”？](https://stackoverflow.com/questions/2411270/when-should-i-use-this-in-a-class)和[Java - 何时使用“this”关键字](https://stackoverflow.com/questions/2429062/java-when-to-use-this-keyword)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:00:14.387

看起来您的问题不是多线程，而是面向对象编程的基本概念。让我们暂时忘记 runnable 和 executors。

您正在定义一个具有主机名字段的类，然后定义一个采用此参数的构造函数，并将内部值设置为该参数。*关键字 this 仅在构造函数的参数与类字段具有相同名称的情况下才是必需的*。这与它是可运行的事实无关！您可以在类中的任何其他方法中使用它，如下所示。

```
public class HostNameResolver {

    private String hostname = null;

    public HostNameResolver (String externalValue) {

        this.hostname = externalValue;

    }

    public void addToDb() {
        DbAdder dbAdder = new DbAdder();
        dbAdder.add(hostName);
   }
} 
```

如果你想让这些东西在 Executor 抽象上异步调度，这是对线程的抽象，你需要这个类来实现 Runnable 接口，其中包含一个方法 run。方法 run 是您的类的公共方法，并且可以像任何其他方法一样访问所有类的私有、公共和受保护属性。

原因很简单：当你向 ExecutorService 提交 Runnable 时，ExecutorService 会在有 Runnable 可用时立即将 Runnable 传递给 Thread，并调用你的 run 方法。

# ios - iOS 自定义手势识别器仅在第一次工作

> ID：11540659
> 
> 赞同：0
> 
> 时间：2012-07-18T11:48:48.267
> 
> 标签：ios, uigesturerecognizer

我正在尝试使用[文档](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/GestureRecognizers/GestureRecognizers.html#//apple_ref/doc/uid/TP40009541-CH6-SW2)中的复选标记手势识别器示例，但它仅在我第一次做出手势时才有效。识别后，又不行了。

我正在使用以下代码：

CheckmarkGestureRecognizer.h

```
#import <UIKit/UIKit.h>
#import <UIKit/UIGestureRecognizerSubclass.h>

@interface Checkmark2GestureRecognizer : UIGestureRecognizer {
    BOOL strokeUp ;
}

- (void)reset;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event;

@property (nonatomic,readwrite) UIGestureRecognizerState state;
@property (nonatomic,assign) CGPoint midPoint;
@end 
```

CheckmarkGestureRecognizer.m

```
#import "Checkmark2GestureRecognizer.h"

@implementation Checkmark2GestureRecognizer

@synthesize state;
@synthesize midPoint;

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];
            NSLog(@"began");
    strokeUp = NO;
    if ([touches count] != 1) {
        self.state = UIGestureRecognizerStateFailed;
        return;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesMoved:touches withEvent:event];
    if (self.state == UIGestureRecognizerStateFailed) return;
    CGPoint nowPoint = [[touches anyObject] locationInView:self.view];
    CGPoint prevPoint = [[touches anyObject] previousLocationInView:self.view];
    if (!strokeUp) {
        // on downstroke, both x and y increase in positive direction
        if (nowPoint.x >= prevPoint.x && nowPoint.y >= prevPoint.y) {
            self.midPoint = nowPoint;
            // upstroke has increasing x value but decreasing y value
        } else if (nowPoint.x >= prevPoint.x && nowPoint.y <= prevPoint.y) {
            strokeUp = YES;
        } else {
            self.state = UIGestureRecognizerStateFailed;
        }
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];
    if ((self.state == UIGestureRecognizerStatePossible) && strokeUp) {
        self.state = UIGestureRecognizerStateRecognized;
            NSLog(@"Ended");
    }

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesCancelled:touches withEvent:event];
    self.midPoint = CGPointZero;
    strokeUp = NO;
    self.state = UIGestureRecognizerStateFailed;
    NSLog(@"cancelled");
}

- (void)reset {
    [super reset];
    NSLog(@"reset");
    self.midPoint = CGPointZero;
    strokeUp = NO;
}

@end 
```

知道我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T13:56:07.990

我自己的手势识别器也有类似的问题。似乎 UIGestureRecognizer 没有调用你的类的“reset”方法，也没有将“state”属性设置为 UIGestureRecognizerStatePossible。

我知道两种使它起作用的方法：

1.  您可以在 touchesEnded 方法中自行将 state 属性设置为 UIGestureRecognizerStatePossible。但这似乎是错误的。
2.  您可以使用 UIGestureRecognizer 的 state 属性而不是您自己的 state。即在任何地方都使用 super.state 而不是 self.state。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T05:42:11.463

查看此代码。它对我很好。 [https://github.com/shahidnasrullah/CustomZGestureIOS.git](https://github.com/shahidnasrullah/CustomZGestureIOS.git)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T15:36:15.663

尝试`@synthesize state;`在您的实现中删除该行。这已经在超类中完成了。

您也不必将所有定义复制`UIGestureRecognizerSubclass.h`到您的头文件中。最好是也删除。

# c# - 从 Linux FTP 服务器和 Windows FTP 服务器下载最旧的文件

> ID：11540662
> 
> 赞同：0
> 
> 时间：2012-07-18T11:48:52.923
> 
> 标签：c#, ftp, ftp-client, ftpwebrequest

我想从 FTP 服务器上的目录下载最旧的文件。

我正在连接到 FTP 服务器，`FtpWebrequest`用于获取目录中的文件列表。我习惯`WebRequestMethods.Ftp.ListDirectoryDetails`这样做。知道文件名后，我将创建另一个 FTP 连接来下载该文件。

但是，`FtpWebResponse`当 FTP 在 Linux 上和在 Windows 上时，我在流中获得的详细信息格式不同。

1.  如何处理这个问题？
2.  我可以为 Linux 和 Windows 编写不同的方法来解析响应流。但为此，至少 Linux Ftp 和 Windows FTP 提供细节的方式应该是明确的。您知道发送详细信息的方式是否会因一台 Linux FTP 服务器而异吗？
3.  我观察到（至少在 Windows FTP 上）每次都会在响应流的末尾列出最旧的文件。文件名在每一行的末尾。我可以想当然地写代码吗？
4.  你能建议更聪明的方法来获取最旧的文件详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:21:47.520

FTP 服务器发送响应的格式/模式取决于服务器的创建/编码方式。因此，响应流的格式`ListDirectoryDetails`会因一台 Linux/Windows 服务器与另一台 Linux/Windows 服务器而异。

我从各种来源了解到大约有 400 种格式可供 Linux FTP 响应 `ListDirectoryDetails`.

**所以你不能依赖或假设任何一种模式。**

有几个解决方案：

1.  首先使用[ListDirectory](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.listdirectory.aspx)命令。它会给你目录的内容（目录记录）。然后对于每个内容/目录记录，使用[GetDateTimestamp](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.getdatetimestamp)。它会给你所有文件的日期时间戳，然后你可以决定哪个是最旧的文件。但是这个解决方案效率不高，因为您必须`FtpWebRequest`为每个文件发布才能知道日期时间戳。（如果有“n”个文件，则调用 n+1 次。）

2.  另一种解决方案是仅使用[ListDirectoryDe​​tails](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.listdirectorydetails)。这并不能以编程方式解决整个问题。

    您可以假设最常用的响应模式和针对它的代码。您可以在用户指南或配置指南等文档中记录此假设。它确实将您的解决方案限制为 Windows 和 Linux 的一种模式，但它应该是可以接受的。（至少在我的情况下是可以接受的）。我认为针对最常遇到的模式编写代码是合理的，而不是编写试图处理所有可能模式的巨大而笨拙的代码（当你不确定是否还有一种模式时也是如此！）。

    您可以使用正则表达式来匹配响应模式，如果不匹配，您可以采取适当的措施，例如抛出一些异常等。另一个好处是您将在 1 次调用中获得“n”个文件的日期时间戳（比较它反对解决方案＃1）。在 .NET 代码中确定最旧的日期时间戳肯定会更快，而不是调用 FTP 服务器 n+1 次。

# java - 在单独的类中实现 ShakeListener

> ID：11540685
> 
> 赞同：0
> 
> 时间：2012-07-18T11:49:46.680
> 
> 标签：java, android, shake

我正在尝试实现一个 ShakeListener。所以我创建了一个名为 ShakeListener.java 的类：

```
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.util.Log;

public class ShakeListener implements SensorEventListener {

    private SensorManager sensorManager;
    private List<Sensor> sensors;
    private Sensor sensor;
    private long lastUpdate = -1;
    private long currentTime = -1;

    private float last_x, last_y, last_z;
    private float current_x, current_y, current_z, currenForce;
    private static final int FORCE_THRESHOLD = 900;
    private final int DATA_X = SensorManager.DATA_X;
    private final int DATA_Y = SensorManager.DATA_Y;
    private final int DATA_Z = SensorManager.DATA_Z;

    public ShakeListener(Activity parent) {
        SensorManager sensorService = (SensorManager) parent
                .getSystemService(Context.SENSOR_SERVICE);
        this.sensorManager = sensorManager;

        this.sensors = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER);
        if (sensors.size() > 0) {
            sensor = sensors.get(0);
        }
    }

    public void start() {
        if (sensor != null) {
            sensorManager.registerListener(this, sensor,
                    SensorManager.SENSOR_DELAY_GAME);
        }
    }

    public void stop() {
        sensorManager.unregisterListener(this);
    }

    public void onAccuracyChanged(Sensor s, int valu) {

    }

    public void onSensorChanged(SensorEvent event) {

        if (event.sensor.getType() != Sensor.TYPE_ACCELEROMETER
                || event.values.length < 3)
            return;

        currentTime = System.currentTimeMillis();

        if ((currentTime - lastUpdate) > 100) {
            long diffTime = (currentTime - lastUpdate);
            lastUpdate = currentTime;

            current_x = event.values[DATA_X];
            current_y = event.values[DATA_Y];
            current_z = event.values[DATA_Z];

            currenForce = Math.abs(current_x + current_y + current_z - last_x
                    - last_y - last_z)
                    / diffTime * 10000;

            if (currenForce > FORCE_THRESHOLD) {

                Log.d("ShakeListener", "SHAKE DETECTED");

            }
            last_x = current_x;
            last_y = current_y;
            last_z = current_z;

        }
    }

} 
```

现在，我想从我的主要活动中调用它（考虑实现一个等待摇动布尔值改变的 While 循环？）。所以在我的主要活动中，我使用：

```
 private ShakeListener myShakeListener; 
```

进而

```
 myShakeListener = new ShakeListener(this);
    myShakeListener.start(); 
```

但我得到一个 NPE 就行了：

```
 this.sensors = sensorManager.getSensorList(Sensor.TYPE_ACCELEROMETER); 
```

我究竟做错了什么？我应该如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:04:24.453

看`sensorService`。这是错误的。更改您的代码：

```
SensorManager sensorService = (SensorManager) parent
                .getSystemService(Context.SENSOR_SERVICE);
        this.sensorManager = sensorManager; 
```

到

```
SensorManager sensorService = (SensorManager) parent
                .getSystemService(Context.SENSOR_SERVICE);
        this.sensorManager = sensorService ; 
```

或更好的代码：

```
 this.sensorManager = (SensorManager) parent.getSystemService(Context.SENSOR_SERVICE); 
```

# scala - 存在类型和重复参数

> ID：11540687
> 
> 赞同：6
> 
> 时间：2012-07-18T11:49:54.083
> 
> 标签：scala, types

Scala中重复参数的类型是否有可能存在类型范围？

## 动机

在[这个答案](https://stackoverflow.com/a/11517724/334519)中，我使用以下案例类：

```
case class Rect2D[A, N <: Nat](rows: Sized[Seq[A], N]*) 
```

它做我想要的，但我不在乎`N`（除了需要知道它对于所有行都是相同的），并且不希望将它放在`Rect2D`的类型参数列表中。

## 我试过的东西

以下版本给了我错误的语义：

```
case class Rect2D[A](rows: Sized[Seq[A], _ <: Nat]*) 
```

存在是在下面`*`，所以我不能保证所有的行都具有相同的第二个类型参数——例如，下面的编译，但不应该：

```
Rect2D(Sized(1, 2, 3), Sized(1, 2)) 
```

以下版本具有我想要的语义：

```
case class Rect2D[A](rows: Seq[Sized[Seq[A], N]] forSome { type N <: Nat }) 
```

在这里，我`forSome`用来将存在主义提升到外部`Seq`。它有效，但我不想写`Seq`in `Rect2D(Seq(Sized(1, 2, 3), Sized(3, 4, 5)))`。

我试图做类似的事情`*`：

```
case class Rect2D[A](rows: Sized[Seq[A], N] forSome { type N <: Nat }*) 
```

和：

```
case class Rect2D[A](rows: Sized[Seq[A], N]* forSome { type N <: Nat }) 
```

第一个（毫不奇怪）与`_`版本相同，第二个不编译。

## 简化示例

考虑以下：

```
case class X[A](a: A)
case class Y(xs: X[_]*) 
```

我不想`Y(X(1), X("1"))`编译。确实如此。我知道我可以写：

```
case class Y(xs: Seq[X[B]] forSome { type B }) 
```

或者：

```
case class Y[B](xs: X[B]*) 
```

但我想使用重复的参数，不想`Y`在`B`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:17:48.500

如果这不违反您的合同，因为您不关心 N，您可以利用协方差来丢弃存在类型，如下所示：

```
 trait Nat

  trait Sized[A,+B<:Nat]

  object Sized {
    def apply[A,B<:Nat](natSomething:B,items: A *) = new Sized[Seq[A],B] {}
  }

  class NatImpl extends Nat

  case class Rect2D[A](rows:Sized[Seq[A],Nat] * )

  val sizedExample = Sized(new NatImpl,1,2,3)

  Rect2D(Sized(new NatImpl,1,2,3),Sized(new NatImpl,1,2,3),Sized(new NatImpl,1,2,3)) 
```

这里的想法是您不关心捕获 Sized[A,B] 的第二个通用参数，因为您不使用它。所以你在 B 中使类协变，这意味着 `Sized[A,B] <:< Sized[A,C]`如果`B<:<C`

存在类型的问题是您要求传递给 Rect2D 构造函数的所有对象都相同，但显然这是不可能的，因为它是存在类型，因此编译器无法验证它。

如果你不能使它成为协变的，但它是协变的，同样的方法将起作用：你在 B 中使类协变：

`Sized[A,B] <:< Sized[A,C]`如果`C<:<B`

那么你可以利用 Nothing 是一切的子类这一事实：

```
 trait Nat

  trait Sized[A,-B<:Nat]

  object Sized {
    def apply[A,B<:Nat](natSomething:B,items: A *) = new Sized[Seq[A],B] {}
  }

  class NatImpl extends Nat

  case class Rect2D[A](rows:Sized[Seq[A],Nothing] * )

  val sizedExample = Sized(new NatImpl,1,2,3)

  Rect2D(Sized(new NatImpl,1,2,3),Sized(new NatImpl,1,2,3),Sized(new NatImpl,1,2,3)) 
```

* * *

您不能使用存在参数来验证所有行都具有相同的第二种类型的原因是因为 _ 并不表示“类型”而是“未知类型”

> 序列[序列[_]]

例如，表示每个元素都是 Seq[_] 类型的 Seq，但由于 _ 是未知的，因此无法验证每个 seq 具有相同的类型。

如果您的类不必是案例类，则在优雅方面的最佳解决方案是使用带有私有构造函数的方差/逆变方法，具有两个泛型参数 A 和 N

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T22:36:34.190

注意：我之前在这里有一个不同的、不工作的解决方案，但我把它编辑掉了。

编辑：现在是第 4 版

```
sealed trait Rect2D[A] extends Product with Serializable { this: Inner[A] =>
  val rows: Seq[Sized[Seq[A], N]] forSome { type N <: Nat }
  def copy(rows: Seq[Sized[Seq[A], N]] forSome { type N <: Nat } = this.rows): Rect2D[A]
}

object Rect2D {
  private[Rect2D] case class Inner[A](rows: Seq[Sized[Seq[A], N]] forSome { type N <: Nat }) extends Rect2D[A]
  def apply[A, N <: Nat](rows: Sized[Seq[A], N]*): Rect2D[A] = Inner[A](rows)
  def unapply[A](r2d: Rect2D[A]): Option[Seq[Sized[Seq[A], N]] forSome { type N <: Nat }] = Inner.unapply(r2d.asInstanceOf[Inner[A]])
} 
```

最后，一个“适用于案例类”的版本！我敢肯定，如果我只知道如何使用它们，大部分都可以通过宏来消除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T16:14:03.353

## Answer for the simplified example

(answer for the first example below)

It looks like you don't care about the precise type parameter of the `X[_]` in `case class Y(xs: X[_]*)`, as long as they are all the same. You just want to prevent users to create `Y`s that don't respect this.

One way to achive this would be to make the default `Y` constructor private:

```
case class Y private (xs: Seq[X[_]])
//           ^^^^^^^ makes the default constructor private to Y, xs is still public
// Note also that xs is now a Seq, we will recover the repeated arg list below. 
```

and define your own constructor this way:

```
object Y {
  def apply[B](): Y = Y(Nil)
  def apply[B](x0: X[B], xs: X[B]*): Y = Y(x0 +: xs)

  // Note that this is equivalent to
  //   def apply[B](xs: X[B]*): Y = Y(xs)
  // but the latter conflicts with the default (now private) constructor
} 
```

Now one can write

```
Y()
Y(X("a"))
Y(X(1), X(1), X(5), X(6))
Y[Int](X(1), X(1), X(5), X(6)) 
```

and the following doesn't compile:

```
Y(X(1), X("1")) 
```

## Answer to the first example

We make the constructor private and change the repeated arg list to a Seq as above:

```
case class Rect2D[A] private (rows: Seq[Sized[Seq[A], _]])
//                   ^^^^^^^        ^^^^                ^ 
```

Let's define our own constructor(s):

```
object Rect2D {
  def apply[A](): Rect2D[A] = Rect2D[A](Nil)
  def apply[A,N <: Nat](r0: Sized[Seq[A], N], rs: Sized[Seq[A], N]*): Rect2D[A] = Rect2D[A](r0 +: rs)
} 
```

Now the following compiles:

```
val r0: Rect2D[_]   = Rect2D()
val r: Rect2D[Int]  = Rect2D[Int]()
val r1: Rect2D[Int] = Rect2D(Sized[Seq](1, 2))
val r2: Rect2D[Int] = Rect2D(Sized[Seq](1, 2), Sized[Seq](2, 3))
val r3: Rect2D[Int] = Rect2D(Sized[Seq](1, 2), Sized[Seq](2, 3), Sized[Seq](2, 3), Sized[Seq](2, 3))
val r4: Rect2D[Any] = Rect2D(Sized[Seq](1, 2), Sized[Seq]("a", "b"), Sized[Seq](2, 3), Sized[Seq](2, 3)) // Works because both Sized and Seq are covariant
// Types added as a check, they can be removed 
```

and the following doesn't:

```
val r5 = Rect2D(Sized[Seq](1, 2), Sized[Seq](1, 2, 3)) 
```

One drawback is that one cannot write something like

```
val r2 = Rect2D[Int](Sized[Seq](1, 2), Sized[Seq](2, 3))
//             ^^^^^ 
```

one has to write this instead

```
val r2 = Rect2D[Int, Nat._2](Sized[Seq](1, 2), Sized[Seq](2, 3))
//                 ^^^^^^^^ 
```

Let's fix this!

## Enhanced solution for the first example

A cleaner solution would be define the constructors above this way:

```
object Rect2D {
  def apply[A,N <: Nat](r0: Sized[Seq[A], N], rs: Sized[Seq[A], N]*): Rect2D[A] = Rect2D[A](r0 +: rs) // Same as above

  case class Rect2DBuilder[A]() {
    def apply(): Rect2D[A] = Rect2D[A](Nil)
    def apply[N <: Nat](r0: Sized[Seq[A], N], rs: Sized[Seq[A], N]*): Rect2D[A] = Rect2D[A](r0 +: rs)
  }
  def apply[A] = new Rect2DBuilder[A]

} 
```

Now we can also write

```
val r2 = Rect2D[Int](Sized[Seq](1, 2), Sized[Seq](2, 3)) 
```

and the following would not compile

```
val r4 = Rect2D[Int](Sized[Seq](1, 2), Sized[Seq]("a", "b"), Sized[Seq](2, 3), Sized[Seq](2, 3))
//             ^^^^^                              ^^^^^^^^ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-18T12:34:46.527

举个简单的例子：你可以在 Y 上声明一个额外的类型参数：

> 案例类别 Y[V](xs: X[V]*)

此类型参数应该是可推断的，因此从用户的角度来看，无需编写任何额外内容。

# c# - 无法从配置文件中读取连接字符串

> ID：11540689
> 
> 赞同：0
> 
> 时间：2012-07-18T11:50:06.737
> 
> 标签：c#, .net

我的项目中有一个 app.config 文件，如下所示。

我有以下代码来读取连接字符串：

```
string connectionstring = ConfigurationManager.ConnectionStrings["LibraryReservationSystemEntities"].ConnectionString; 
```

它显示如下所列的异常。

> 你调用的对象是空的。

我们怎样才能纠正它？

注意：这是一个**类库**项目。我从另一个项目中复制了这个连接字符串，该项目有 EF 的 EMDX 文件。我目前的解决方案中只有一个项目。

注意：我需要从我的项目中实例化一个**ObjectContext**（EF）。EMDX 在不同的项目中可用。

```
<?xml version="1.0" encoding="utf-8" ?>
 <configuration>
<connectionStrings>
    <add name="LibraryReservationSystemEntities" connectionString="metadata=res://*/MyEDMtest.csdl|res://*/MyEDMtest.ssdl|res://*/MyEDMtest.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;AttachDbFilename=C:\DevTEST\Databases\LibraryReservationSystem.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
</connectionStrings>
 </configuration> 
```

**参考**

1.  [如何以编程方式设置实体框架代码优先的连接字符串？](https://stackoverflow.com/questions/6003085/how-do-i-programmatically-set-the-connection-string-for-entity-framework-code-fi)

2.  [初始化实体框架上下文的最佳方法？](https://stackoverflow.com/questions/1063730/best-way-to-initialize-an-entity-framework-context)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:59:04.077

**您不能拥有库项目的配置文件**。此配置文件与执行的程序集相关，可以是 Winform 应用程序、WPF 应用程序、控制台应用程序、IIS 中的 ASP.Net 网站...

在执行的实际程序集的 app.config（或 web.config）文件中添加您的`ConnectionStrings`部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:57:00.150

检查这个

```
you need to add a .dll reference for configuration manager

recheck if your connection string is right

check if you have more than one configuration file ex. web.config and app.config; so the ConfigurationManager is referencing the wrong file in the solution. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:00:12.423

如果 ConnectionStrings["myConnection"] 返回 null，则在构造函数中取消引用它以获取 Name 属性将失败。那绝对不是错误所在吗？

为什么不在该行放一个断点并查看 ConfigurationManager.ConnectionStrings 以检查它认为它有什么 - 并非常仔细地检查拼写错误。

之后，在方法的第一行下一个断点，检查connectionString的值是什么。将 null 传递给 SqlConnection 构造函数实际上不会引发异常，但是当您尝试打开它时会收到 InvalidOperationException。

# iphone - 仅从 iphone 的扬声器（不包括麦克风）录制音频输出

> ID：11540690
> 
> 赞同：0
> 
> 时间：2012-07-18T11:50:09.383
> 
> 标签：iphone, core-audio, record, audioqueueservices, audioqueue

我正在尝试从 iPhone 扬声器录制声音。我能够做到这一点，但我无法避免录音输出中的麦克风输入。尝试使用不同网站上提供的示例代码，但没有成功。

我使用的示例使用音频单元进行录制。我需要知道音频单元是否有任何属性可以将麦克风输入音量设置为零。除此之外，我从其他帖子中了解到音频队列服务可以为我做这件事。任何人都可以使用音频队列服务实现的示例代码重定向我。在将数据作为输入发送到扬声器之前，我需要知道是否有办法将数据写入单独的音频文件。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:09:01.993

没有用于录制发送到 iPhone 扬声器的通用音频的公共 iOS API 或属性。只能录制麦克风输入。

但是，如果您在应用程序中仅使用带有音频队列或 RemoteIO 音频单元的未压缩样本播放音频，则可以在将这些样本写入音频回调缓冲区之前将它们复制到文件中。这些保存的样本可用于构建记录。

# iphone - XCode 4 - iPhone 开发 - 良好的调试教程

> ID：11540696
> 
> 赞同：1
> 
> 时间：2012-07-18T11:50:22.477
> 
> 标签：iphone, objective-c, debugging, xcode4.3

我开始使用 XCode 4 和 Objectiv-C 进行 iPhone 开发。由于我认为掌握一门语言需要强大的调试和 IDE 知识，因此我正在寻找有关调试过程和 XCode 的良好资源。

我最近遇到的一个问题是，在示例代码中抛出了一个 unknownException，我不知道如何调试它，因为它在跳入我的 Main 后立即崩溃。我认为有了更好的配置，调试起来会容易得多！

我已经找到了这个资源：[https ://developer.apple.com/library/ios/navigation/](https://developer.apple.com/library/ios/navigation/)

但是我在那里找不到与调试相关的东西......我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:57:22.397

安迪，这首先是关于超级基本调试：http: [//mobile.tutsplus.com/tutorials/iphone/xcode-debugging_iphone-sdk/](http://mobile.tutsplus.com/tutorials/iphone/xcode-debugging_iphone-sdk/)

在这里你可以找到两个优秀的教程：

[http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

[http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:03:03.573

在 Objective-C 中容易犯错误...

1.  没有附加到视图控制器的视图
2.  向已释放的实例发送消息。打开 NSZombieEnabled。
3.  忘记添加框架（例如 MapKit）

如果此时没有修复崩溃。在您的应用程序委托中设置一个断点，然后单步执行每一行，直到它崩溃。向上移动断点，再次运行并检查值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T17:44:31.107

[Apple在此处](http://developer.apple.com/library/ios/#technotes/tn2239/_index.html)列出了他们认为对 iOS 来说最好的调试技巧。

开发者网站上还有一些视频。我永远不知道如何制作直接链接，但视频不多，所以只需搜索“调试”：

[https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

去年还有一个： [https ://developer.apple.com/videos/wwdc/2011/](https://developer.apple.com/videos/wwdc/2011/)

访问开发者网站需要注册。

如果您曾经考虑涉足 OS X 领域，那么这里就是 Apple 认可的[调试魔法](http://developer.apple.com/library/mac/#technotes/tn2124/_index.html)。

# android - 视图在 Android Jelly Bean 上不可见

> ID：11540697
> 
> 赞同：13
> 
> 时间：2012-07-18T11:50:26.467
> 
> 标签：android, android-4.2-jelly-bean

我目前正在开发一个可以检索和查看时间表的应用程序。为了显示时间表，我使用了来自 Google IO 2011 应用程序的 TimeRulerView（以及 BlocksLayout 和 BlockView）java 源文件，因为我喜欢它的外观和感觉。源代码可以在这里找到：[https](https://github.com/underhilllabs/iosched2011) ://github.com/underhilllabs/iosched2011 。（谷歌用 IO2012 的代码替换了其中一个）。

由于我的 Galaxy Nexus 昨天更新了 Jelly Bean（4.1.1），TimeRulerView（和/或其他之一）不再显示。

奇怪的是，它们实际上还在那里，但那里不可见。我可以看到计时器通常具有的长度的滚动条。此外，当我通常单击视图中的一个块时，我会弹出一个小窗口，并且在没有看到计时器或块时仍然会发生这种情况。

我在我的 JB GN 上测试了原始的 IO2011 应用程序，但那里也看不到任何东西，所以问题在于视图（一个）或 JellyBean 呈现视图的方式（可能是项目黄油？）。

请参阅此处 ( [https://dl.dropbox.com/u/7102660/TimeRulerView_JellyBean_problem.zip](https://dl.dropbox.com/u/7102660/TimeRulerView_JellyBean_problem.zip) ) 获取 ICS（应用程序工作）、JB（应用程序不工作）和 GoogleIO2011 应用程序的屏幕截图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T23:28:54.683

这可能与[硬件加速](http://android-developers.blogspot.com/2011/03/android-30-hardware-acceleration.html)有关吗？我最近在几部带有 ICS 的手机上遇到了问题，但并非所有手机/设备都受到影响。将 hardwareAccelerated 标记添加到我的清单也不能解决问题，我必须在我不想成为硬件加速的特定视图上定义它。我的解决方案在我的 xml 布局中使用了[android:layerType](http://developer.android.com/reference/android/view/View.html#attr_android:layerType) ="software" 并在 java 代码中使用了[setLayerType](http://developer.android.com/reference/android/view/View.html#setLayerType%28int,%20android.graphics.Paint%29) (LAYER_TYPE_SOFTWARE, null)。

编辑：对此进行更多测试，它没有解决我在 Jelly Bean 上使用 setLayerType 的问题。在 ICS 上将图层类型设置为软件确实解决了我的问题。我可以让视图显示的唯一方法是将整个应用程序或特定活动设置为`android:hardwareAccelerated="false"`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T13:19:40.507

感谢克里斯的回答，我玩弄了硬件加速设置。我也使用 iosched2011 代码，只需`android:layerType="software"`从 block_content.xml 文件中的 BlocksLayout 视图中删除该行。

# javascript - 变量如何在 Javascript 中工作？在 setTimeout 期间变量值可以更改吗？

> ID：11540698
> 
> 赞同：2
> 
> 时间：2012-07-18T11:50:27.670
> 
> 标签：javascript, jquery

我有以下代码：

```
function Notification(type) 
{
    switch (type) 
    {
        case "success":
           notificationID="not1";
           break;
        case "error":
           notificationID="not2";
           break;  
    }

    setNotificationTimeoutId = setTimeout(function () {
        jQuery('#' + notificationID).fadeOut(200, function () {
            var notification = document.getElementById(notificationID);
            if (notification) 
            {
                jQuery(notification.parentNode).remove();

                if (type == "success")
                        DoSomething();
            }

            setNotificationTimeoutId = null;
        });
    }, 5000);
} 
```

我的问题是，如果函数（通知）在点击事件上被调用，并且如果它被两次点击事件调用两次（首先是通知（“成功”）然后是通知（“错误”）），是否有可能第二个函数调用会更改第一个函数调用的类型变量值吗？

例如：当第一次调用（成功）进入 setTimeout 内的函数时（第二次调用 Notification 已经使用 type = "error"），即使这个调用是第一个，它是用 type = "success" 调用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:02:03.383

> 如果函数`Notification`在点击事件上被调用，并且如果它被两次点击事件调用两次（第一次用`Notification("success")`然后用`Notification("error")`），第二次函数调用是否有可能改变`type`第一次函数调用的变量值？

不，该`type`变量是一个参数，因此范围绑定到您的函数。它的值在后续调用中不会改变，每个函数调用都会创建这个变量的一个新实例，并且无法访问其他变量。

您的超时匿名函数的作用域是`Notification`'s 的“子作用域”，因此它将始终访问正确的`type`变量。

但是你是一个全局变量（不是局部范围的），所有超时`notificationID`调用都将使用相同的变量实例。`Notification`因此，第二次调用会`Notification`在第一次访问它的超时之前更改它。要解决此问题，请添加`var`关键字。

或者，由于`setNotificationTimeoutId`也在外部范围内并且可以从两个调用中访问，您可以（应该？）在创建新超时之前清除任何活动超时，方法是添加以下行：

```
clearTimeout(setNotificationTimeoutId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T11:58:56.733

您应该本地化您的 notificationID 变量，因为它是全局变量，允许函数第二次运行时更改它第一次运行时的输出。

使用 var 进行本地化：

```
 var notificationID;

 switch (type) 
 {
    case "success":
      notificationID="not1";
      break;
    case "error":
      notificationID="not2";
      break;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:06:50.847

这对你有什么作用？[http://jsfiddle.net/gRoberts/vgSGL/](http://jsfiddle.net/gRoberts/vgSGL/)

除了使用 setTimeout，你可以使用 jQuery 的 delay 方法，它是类似的。

希望能帮助到你？

加夫

# php - 使用 javascript/jquery 将外部文件添加到 $_FILES 数组

> ID：11540699
> 
> 赞同：0
> 
> 时间：2012-07-18T11:50:29.260
> 
> 标签：php, javascript, jquery, file-upload, expressionengine

我有以下情况：

我的表达式引擎站点中有一个第三方插件来处理我的用户注册。它还处理个人资料图片上传（这是注册过程的一部分）。

我想添加一个在注册期间从 Facebook 抓取用户个人资料图片的功能。因为我不想修补第三方插件，所以我正在寻找一种在客户端解决此问题的方法，方法`$_FILES`是在提交注册表单时将 Facebook 的个人资料图片直接发送到 php 数组中（所以第三派对插件可以从那里拿起它）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:34:08.927

答案是：不，你不能。同源政策（除其他外）使这成为不可能。这样做的唯一方法是获取有关用户 Facebook 帐户的信息并使用 FB API 获取服务器端

# mysql - 如何在 MySQL 中运行评估表达式并相应地更新列？

> ID：11540700
> 
> 赞同：0
> 
> 时间：2012-07-18T11:50:33.560
> 
> 标签：mysql, sql

我有以下表格：

```
tweets                                     stocks
-------------------------------------      -----------------------------
id stock_id nyse_date   class quality      stock_id _date         return
-------------------------------------      -----------------------------
1  1        2011-03-12  3                  1        2011-03-12    0.44
2  1        2011-03-12  1                  1        2011-03-15    0.17
3  1        2011-03-15  2                  2        2011-03-15   -0.03
4  2        2011-03-15  2
5  2        2011-03-16  1 
```

我需要评估以下表达式并`quality`仅使用 SQL 将结果填充到列中：

```
IF (class_value of tweet/return on that day) > 0 THEN quality = 1 ELSE 0 
```

class_value 为：

```
IF class = 1 THEN class_value =  0
IF class = 2 THEN class_value =  1
IF class = 3 THEN class_value = -1 
```

对于每条推文，我需要（显然）获取该日期的股票收益。在周末，例如在`2011-03-16`，没有可用的库存数据。在这种情况下，`quality`也应该默认为 0（并且不返回错误）。因此，让我们为示例中的 4 条推文手动执行此操作：

```
id  class  class_value  return  class_value/return  quality
-----------------------------------------------------------
1   3      -1            0.44   -1/0.44  =  -2.27   0
2   1       0            0.44    0/0.44  =   0      0
3   2       1            0.17    1/0.17  =   5.88   1
4   2       1           -0.03    1/-0.03 = -33.33   0
5   1       0            n/a                        0 
```

所以查询的最终结果将是一个更新的`tweets`表：

```
tweets                               
-------------------------------------
id stock_id nyse_date   class quality
-------------------------------------
1  1        2011-03-12  3     0
2  1        2011-03-12  1     0
3  1        2011-03-15  2     1
4  2        2011-03-15  2     0
5  2        2011-03-16  1     0 
```

我不知道如何将所有这些放入查询中。我现在有了这个，但它只选择类并返回，但没有设置`class_value`或实现表达式。

```
UPDATE tweets SET quality = (
  SELECT t.class, s.return FROM tweets t 
  LEFT JOIN stocks s ON t.nyse_date = s._date
) 
```

任何帮助是极大的赞赏 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:28:48.887

```
update tweets
   set quality = ifnull(case tweets.class
                             when 1 then 0
                             when 2 then 1
                             when 3 then -1
                        end
                 -- If there is no match, subquery will evaluate to null
                 -- Division will also evaluate to null
                      / (select `return`
                           from stocks
                          where tweets.nyse_date = stocks._date
                            and tweets.stock_id = stocks.stock_id
                        )
                 -- If there was no match, quality = 0
                      , 0)
                 -- Shortcut to set 1 if condition is satisfied
                 -- If there is an error try encapsulating
                 -- whole expression into case when (ex) then 1 else 0 end
                      > 0 
```

我想对此进行测试，因为我没有使用 MySql，但我最喜欢的 Sql Fiddle 目前已关闭。

# javascript - replaceWith & fadeIn/fadeOut - 悬停之后不工作

> ID：11540703
> 
> 赞同：1
> 
> 时间：2012-07-18T11:50:51.447
> 
> 标签：javascript, jquery, html, css, animation

我这里有一个需要大量 DOM 操作的任务。因为这会对性能产生不良影响，所以我克隆了元素，在那里进行更改并用原始元素替换克隆。

更换后，元素具有悬停功能。

因为我想要褪色的过渡，所以我做这样的改变：

```
myElement.fadeOut(500, function(){
    myClone.hide();
    myElement.replaceWith(myClone);
    myClone.fadeIn(500);
 }); 
```

这是有效的，但之后悬停功能不再起作用。当我从 中删除回调时`fadeOut`，我可以再次悬停，但定时转换看起来不再好。

*我能做些什么呢？为什么使用回调时元素会失去悬停功能？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:05:40.573

我有一个不同的解决方案给你。CSS方法：

您可以设置元素的位置之一；

```
#myElement { top:100px; left:200px; }
#myElement, #myClone { position:absolute; } 
```

jQuery：

```
$(document).ready(function() {

var myElement = $('#myElement');
var myClone = $('#myClone');

var myEleTop = parseInt(myElement.css('top'));
var myEleLeft = parseInt(myElement.css('left'));

myClone.hide();
myClone.css({'top':myEleTop+'px','left':myEleLeft+'px'});//sets position here

myElement.mouseenter(function() {
    myElement.fadeOut(500, function(){
      myClone.fadeIn(500);
    }
});
myElement.mouseleave(function() {
    myClone.fadeOut(500, function(){
      myElement.fadeIn(500);
    }
});

}); 
```

或者你可以只使用[appendTo()](http://api.jquery.com/appendTo/)和[remove()](http://api.jquery.com/remove/)方法，我对这些方法不是很熟悉，但试试这个：

```
myElement.mouseenter(function() {
    myElement.fadeOut(500, function(){
      myElement.remove();
      myClone.appendTo($('.container'));
      myClone.fadeIn(500);
    }
});
myElement.mouseleave(function() {
    myClone.fadeOut(500, function(){
      myClone.remove();
      myElement.appendTo($('.container'));
      myElement.fadeIn(500);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:29:47.380

克隆对象时，克隆将不再附加事件侦听器。解决它的一种方法是使用“on”附加事件处理程序：

```
$("my-clone-container").on("hover", "my-clone-selector", myHoverHandler); 
```

这样，每当您添加克隆时，它都会自动处理您想要的悬停事件。请参阅['on' 的文档](http://api.jquery.com/on/)。

# xml - 使用条件从之前的某些元素中获取项目的值

> ID：11540705
> 
> 赞同：0
> 
> 时间：2012-07-18T11:51:09.447
> 
> 标签：xml, xslt

我有这样的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="do.xsl"?>
<catalog>
  <cd>
    <title_>Empire Burlesque</title_>
    <artist>Bobby</artist>
    <company>Columbia</company>
  </cd>
  <cd>
    <title_>Shirt2</title_>
    <artist>Bobby</artist>
    <company>Columbia2</company>
  </cd>
  <cd>
    <title_>Fingers</title_>
    <artist>Bobby</artist>
    <company>Columbia3</company>
  </cd>
  <cd>
    <title_>Zip1</title_>
    <artist>Bobby</artist>
    <company>---</company>
  </cd>
  <cd>
    <title_>Zip2</title_>
    <artist>Bobby</artist>
    <company>---</company>
  </cd>
</catalog> 
```

我需要用以前有意义的数据替换 --- Columbia3 我接下来要做

```
<?xml version="1.0" encoding="utf-8"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="html" version="4.0" encoding="utf-8" indent="yes"/>

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title_"/></td>
      <td><xsl:value-of select="artist"/></td>
      <td>
          <xsl:variable name="NotStarted" select="preceding-sibling::cd[1]/company" />
          <xsl:choose>
            <xsl:when test="company != '---'">
              <xsl:value-of select="company"/>
            </xsl:when>
            <xsl:otherwise>
              <xsl:copy-of select="$NotStarted" />
            </xsl:otherwise>
          </xsl:choose>
      </td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

正如预期的那样，我得到了下一个 html

```
Title   Artist
Empire Burlesque    Bobby   Columbia
Shirt2  Bobby   Columbia2
Fingers Bobby   Columbia3
Zip1    Bobby   Columbia3
Zip2    Bobby   --- 
```

我如何迭代以获取最后一个有意义的字符串来替换或任何其他方式？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:31:26.460

这可以通过更改**NotStarted**变量来实现

```
<xsl:variable name="NotStarted" select="preceding-sibling::cd[1]/company" /> 
```

目前正在做的是寻找紧接在前的兄弟姐妹，无论内容如何，​​并获取其**公司**元素。您需要做的是找到第一个具有有效公司名称的兄弟姐妹

```
<xsl:variable name="NotStarted" 
   select="preceding-sibling::cd[company != '---'][1]/company/text()"/> 
```

值得注意的是，通常最好避免在 XSLT 中使用**xsl:for-each**和**xsl:choose**，并尽量利用模板匹配的威力。这是一个替代的 XSLT，它演示了这一点

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" version="4.0" encoding="utf-8" indent="yes"/>

   <xsl:template match="/">
      <html>
         <body>
            <h2>My CD Collection</h2>
            <table border="1">
               <tr bgcolor="#9acd32">
                  <th>Title</th>
                  <th>Artist</th>
               </tr>
               <xsl:apply-templates select="catalog/cd"/>
            </table>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="cd">
      <tr>
         <td>
            <xsl:value-of select="title_"/>
         </td>
         <td>
            <xsl:value-of select="artist"/>
         </td>
         <td>
            <xsl:apply-templates select="company"/>
         </td>
      </tr>
   </xsl:template>

   <xsl:template match="company[text() = '---']">
      <xsl:value-of select="../preceding-sibling::cd[company != '---'][1]/company"/>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的 XML 示例时，将输出以下内容

```
<html>
   <body>
      <h2>My CD Collection</h2>
      <table border="1">
         <tr bgcolor="#9acd32">
            <th>Title</th>
            <th>Artist</th>
         </tr>
         <tr>
            <td>Empire Burlesque</td>
            <td>Bobby</td>
            <td>Columbia</td>
         </tr>
         <tr>
            <td>Shirt2</td>
            <td>Bobby</td>
            <td>Columbia2</td>
         </tr>
         <tr>
            <td>Fingers</td>
            <td>Bobby</td>
            <td>Columbia3</td>
         </tr>
         <tr>
            <td>Zip1</td>
            <td>Bobby</td>
            <td>Columbia3</td>
         </tr>
         <tr>
            <td>Zip2</td>
            <td>Bobby</td>
            <td>Columbia3</td>
         </tr>
      </table>
   </body>
</html> 
```

# c# - 如何从图像中保存所需的像素并使用该像素绘制图像

> ID：11540706
> 
> 赞同：0
> 
> 时间：2012-07-18T11:51:09.263
> 
> 标签：c#, asp.net

大家好，我已经编写了一个示例代码来从图像中找出黑色像素，现在我想将所有这些像素保存到一个数组中，并想用保存像素保存该特定图像，有人可以帮我吗

假设我得到像素的图像如下

我将读取所有黑色像素并想保存它们，我想`Fallout`用透明背景重新成像。这是我写的

```
for (int i = 0; i < b.Width; i++)
        {
            for (int j = 0; j < b.Height; j++)
            {
                Color pixelColor = b.GetPixel(i, j);

                Response.Write("The color is " + pixelColor);

                if (pixelColor.ToArgb() == Color.Black.ToArgb())
                {
                    //Will get black color here
                }
            }
        } 
```

有人可以帮我解决剩下的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:03:30.113

创建第二个相同大小的位图

```
Bitmap newBitmap = new Bitmap(oldBitmap.Width, oldBitmap.Height); 
```

您可以直接比较颜色

```
if (pixeColor == Color.Black) { 
```

在 - 的里面`if { }`

```
newBitmap.SetPixel(...); 
```

就是这样，但如果你只是想要一个透明的版本，你可以使用`Bitmap.MakeTransparent(Color);`

PS：GetPixel() 和 SetPixel() 速度极慢，请尝试使用不安全的位图访问

# iphone - 无法将从 UIViewController 的文本字段中获取的值设置为另一个类进行计算

> ID：11540708
> 
> 赞同：0
> 
> 时间：2012-07-18T11:51:14.287
> 
> 标签：iphone

我遇到了无法将来自 Viewcontroller 的 UItextfields 的值设置为另一个从这些值进行计算的类的问题。

```
@interface InitialViewController : UIViewController

@property (weak, nonatomic) IBOutlet UITextField *phValue;
@property (weak, nonatomic) IBOutlet UITextField *pco2Value;
@property (weak, nonatomic) IBOutlet UITextField *hco3Value;
@property (weak, nonatomic) IBOutlet UITextField *sodiumValue;
@property (weak, nonatomic) IBOutlet UITextField *chlorideValue;
@property (nonatomic,retain)NSDecimalNumber* ph;
@property (nonatomic,retain) NSDecimalNumber* pco2;
@property (nonatomic,retain)NSDecimalNumber* hco3;
@property (nonatomic,retain)NSDecimalNumber* sodium; 
@property (nonatomic,retain)NSDecimalNumber* chloride;

- (IBAction)analyseValues:(UIButton *)sender;

@end 
```

在实施中

```
-(void)values{
[self setPh:[[NSDecimalNumber alloc] initWithFloat:phValue.text.floatValue ]];

[self setPco2:[[NSDecimalNumber alloc] initWithFloat:pco2Value.text.floatValue]];
[self setHco3:[[NSDecimalNumber alloc ] initWithFloat:hco3Value.text.floatValue]];
[self setSodium:[[NSDecimalNumber alloc] initWithFloat:sodiumValue.text.floatValue] ];
[self setChloride:[[NSDecimalNumber alloc] initWithFloat:chlorideValue.text.floatValue] ];
}

- (void)viewDidLoad
{
[super viewDidLoad];
[self values];} 
```

然后我有另一个类，它采用这些值，但是在运行它运行的程序时，它确实分配了从 initialViewController 中获取的值。

```
#import <Foundation/Foundation.h>
#import "InitialViewController.h"

@interface AcidBaseCalculations : NSObject
@property (nonatomic) float ph;
@property (nonatomic) float pco2;
@property (nonatomic) float chloride;
@property (nonatomic) float sodium;
@property (nonatomic) float hco3;

@implementation AcidBaseCalculations

@synthesize ph,pco2,chloride,hco3,sodium;

-(void)calculations{
    InitialViewController *bvc = [[InitialViewController alloc] init]; 
ph = bvc.ph.floatValue ;

pco2 = bvc.pco2.floatValue;     
// these values are not being set although the program   runs successfully

hco3 = bvc.hco3.floatValue;
sodium = bvc.sodium.floatValue;
chloride = bvc.chloride.floatValue; 
```

我想在这里使用这些新值并在这个类中执行一些逻辑操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:59:13.570

您正在`InitialViewController`使用此行创建一个新的：

```
 InitialViewController *bvc = [[InitialViewController alloc] init]; 
```

它与您的其他/原始实例不同`InitialViewController`

你要么必须做一个财产

```
 @property(nonatomic,strong)InitialViewController myInitialVC; 
```

并在分配/初始化`AcidBaseCalculations`. 我们必须为所有要计算的变量创建属性，并在分配/初始化时设置它们

酸碱计算

# iphone - 像 Facebook 时间线一样创建 tableview ... iPhone 应用程序

> ID：11540713
> 
> 赞同：-2
> 
> 时间：2012-07-18T11:51:21.560
> 
> 标签：iphone, ios, ipad, uitableview, tableview

我想创建一个像 Facebook 时间线这样的应用程序，所以想知道有谁知道如何创建像 Facebook 时间线这样的表格视图，它会一次加载有限数量的单元格，并在我们移动到时间线底部时自动加载？

我想创建延迟加载表格视图，当用户进入表格视图底部时自动加载新单元格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:33:55.740

一个简短的答案是：在应用程序首次加载时加载时间线的前几个单元格。然后当用户开始滚动时，加载这些单元格编号，具体取决于用户滚动的“多少”（使用手势识别器来计算），以便您只能加载这些单元格。

例如，如果一个单元格的高度是 40 磅。如果用户滚动屏幕显示 200 个点（即屏幕左上角的“x”值），则从第 6 号单元格加载（因为用户已滚动超过 5 个单元格，即 200/40 = 5 ）。

希望这可以帮助！

# java - 从 servlet 类获取数据

> ID：11540716
> 
> 赞同：0
> 
> 时间：2012-07-18T11:51:26.960
> 
> 标签：java, servlets

我有一个从 servlet 获取数据的类，如下所示：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html");{
        ServletOutputStream  out = response.getOutputStream();
        try {
            out.println("<html><head><title>" +  "</title></head>");
            out.println("<body><h1>" +  "</h1>");
            name = request.getParameter("username" );
            message = "hi there";
            //String  comment = request.getParameter( "comment" );
            out.println("Name:" + name + "<BR>");
            //out.println("Comment: " + comment + "<BR>");
        }
        catch(Throwable  t ) {
            out.println("<P><pre>");
            t.printStackTrace( new PrintStream(out) );
            out.println ("</pre><P>");
        }
        out.println ("</body></html>");
    }
} 
```

这很好用，但我也想在服务器上的不同类中使用 name 参数。我可以使用类似的东西：

```
getServletContext().setAttribute("package", "name"); 
```

并像这样从类中调用属性？还是有另一种方法可以将值保存在 servlet 上下文或 servlet 中，以便再次调用它？我真正想做的就是在加载 servlet 之后，保留它在某处处理的最后一个值，并在需要时在另一个类中使用它。

感谢所有帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:53:26.570

`getServletContext()`是servlts之间共享数据的一种方式。所以，是的，你的方法应该没问题。

如果数据是特定于用户的，而不是`getServletContext()`，最好使用`HttpSession`。

# android - 动画后设置布局参数

> ID：11540725
> 
> 赞同：0
> 
> 时间：2012-07-18T11:52:00.463
> 
> 标签：android, animation, layout

我有 2 个`RelativeLayout`这样的视图：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <View
        android:id="@+id/view1"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:background="@drawable/shape_red"/>

    <View
        android:id="@+id/view2"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_below="@id/view1"
        android:background="@drawable/shape_blue"/>

</RelativeLayout> 
```

现在，我将 y 属性设置为`view1`从 0 到 300 的动画。但我想`view2`根据`view1`- 更改其位置，因为`view2`设置为低于 (layout-below) `view1`。

由于这不起作用，我尝试`onAnimationEnd`在动画中添加一个侦听器。像这样：

```
 ObjectAnimator ani = ObjectAnimator.ofFloat(view1, "Y", 200);
    ani.setDuration(2000);
    ani.addListener(new AnimatorListenerAdapter()
    {
        @Override
        public void onAnimationEnd(Animator animation)
        {
            LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, view2.getHeight());
            params.addRule(RelativeLayout.BELOW, view1.getId());

            view2.setLayoutParams(params);
        }
    }); 
```

但`view2`根本没有改变它的位置。

如果可能的话，我想避免制作新动画`view2`，所以请不要费心推荐一个。;)

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T11:55:15.640

如果它解决了您的问题，请检查此：

```
ani.addListener(new AnimatorListenerAdapter()
    {
        @Override
        public void onAnimationEnd(Animator animation)
        {
            LayoutParams params = view2.getLayoutParams();
            // change it ...
            params.addRule(RelativeLayout.BELOW, view1.getId());

            view2.setLayoutParams(params);
        }
    }); 
```

# css - 内容的效果是什么：“\0020”；财产？

> ID：11540728
> 
> 赞同：22
> 
> 时间：2012-07-18T11:52:19.870
> 
> 标签：css

```
.container:after {
content: "\0020";
display: block;
height: 0;
clear: both;
visibility: hidden;
overflow:hidden;} 
```

内容

请解释“内容：”\ 0020“;属性的作用是什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-18T11:55:28.903

`\0020`插入 Unicode 代码点 U+0020，它是一个空格。所以代码等价于`content: ' ';`.

`content: x`用值替换内容（=显示的文本）`x`。

但是，在您发布的片段中，此内容无论如何都是不可见的，因此您实际上什么也看不到。该代码是用于在页面上重新浮动元素的[clearfix实现。](http://css-tricks.com/snippets/css/clear-fix/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:57:12.457

这增加了一个空格字符来清除浮动。谷歌 clearfix 你会看到类似的东西。

参考：内容属性可能包含：文本字符串、外部资源的 URI（例如图像）和 ASCII 码特殊字符。对于高质量的排版，建议使用 ISO 10646 字符并将它们编码为十六进制表示。

一个空格 HEX 是 20，所以你会使用 \0020

# c# - 批处理文件未通过 Windows 服务执行

> ID：11540739
> 
> 赞同：0
> 
> 时间：2012-07-18T11:53:16.937
> 
> 标签：c#, windows-services, selenium-rc

我有一个场景，我必须创建一个 Windows 服务，该服务将检查批处理文件是否未运行，那么它应该执行该批处理文件。

此外，我的批处理文件用于使用 Selenium 进行应用程序检出自动化。

当我创建该服务时，不知何故批处理文件没有执行并且无法启动硒。当我在任务管理器中看到相同的内容时，我可以看到一个 cmd 实例正在运行，但它无法运行我的 selenium。

我的项目代码：计时器设置为 1 分钟

```
private void timer1_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    if (!File.Exists(ConfigurationManager.AppSettings["testFilePath"])) //To check whether batch file is running or not 
    {
       System.Diagnostics.Process proc = new System.Diagnostics.Process(); // Declare New Process
        proc.StartInfo.FileName = ConfigurationManager.AppSettings["BatchFilePath"];
        proc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        proc.StartInfo.CreateNoWindow = true;
        proc.Start();
        proc.WaitForExit();
     }
} 
```

批处理文件是这样的：

```
copy C:\AutomatedTests\AHD\testingWS.txt C:\AutomatedTests\AHD\AHDExecutionService\testingWS.txt

start cmd /k java -jar "C:\AHS_Automation\Release\UnifiedBillingSystem\Selenium RC\selenium-server-1.0.3\selenium-server.jar" 
```

此代码将定期检查如果批处理文件未在执行中，那么我的服务将开始执行，否则将不执行任何操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:41:35.600

不确定上下文这么少......但我要检查的第一件事是执行 bat 文件相对于 bat 文件使用的文件的路径；如果您从另一个程序调用 bat 文件，它通常会从该程序继承环境文件夹 - 这是大多数人不期望的。（对于 Windows 服务，这是 windows\system32）检查是否是这种情况的最简单方法是在 bat 文件的第一行中明确设置路径（例如 cd [path of bat file] ）

# php - PHP md5() 与 MySQL md5 给出不同的输出

> ID：11540744
> 
> 赞同：8
> 
> 时间：2012-07-18T11:53:32.693
> 
> 标签：php, mysql, md5

我正在尝试建立一个登录系统，但我无法解决一个问题：PHP 正在给我另一个输出 md5(); 比 MySQL...

例如，在 PHP 中：

```
$password = md5("brickmasterj");
return $password; 
```

回报：

```
3aa7b18f304e2e2a088cfd197351cfa8 
```

但是 MySQL 等价物给了我一个更短的版本：

```
3aa7b18f304e2e2a08 
```

有什么问题？在检查密码时如何使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T11:55:28.887

我猜是你表列长度的问题，将密码字段的长度设置为至少 32

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:56:46.783

MySQL 不可能返回长度小于 32 的它。如果您执行类似 的简单查询`SELECT md5('brickmasterj')`，您会看到。现在您很可能将值插入到不够宽的列中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T11:57:17.810

您的数据库字段长度是否为 32 个字符？您是否正在使用 mysql 的 md5 写入数据库？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-04T06:51:10.363

哈希大小（如果始终固定）。在您的情况下，哈希大小为 128 位。当转换为 ascii 字符串时，它将是一个仅包含十六进制数字的 32 个字符的字符串。因此，如果您要存储可变字符，则长度应至少为 32 示例：`password varchar(32)` 应该放入 mysql 表中，然后您可以使用 php 调用 `select password from table where password =md5($password);`

# fluent-nhibernate - NHibernate 循环选择

> ID：11540748
> 
> 赞同：0
> 
> 时间：2012-07-18T11:54:24.690
> 
> 标签：fluent-nhibernate

我正在尝试使用 NHibernate 获取数据，并且数据库返回奇怪的结果。来自标准示例的对象：产品和类别。当我试图用 加载对象时`Get<Product>(id)`，Nhibernate 会加载引用实体的无限级联循环。我只需要单个产品和引用的类别。它是正常的 NH 行为还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T20:49:07.997

你能给我们提供你的模型和地图吗？我认为这是因为 reference 和 hasmany 都不是 Lazyload

# web-applications - Google Apps Scripting Web App 自动刷新标签

> ID：11540749
> 
> 赞同：1
> 
> 时间：2012-07-18T11:54:26.127
> 
> 标签：web-applications, google-apps-script

我有一个使用 Google Apps 电子表格的程序，它读取数据并将数据写入电子表格，但如果电子表格中的内容发生更改，我希望 gui 自动刷新电子表格中的数据。我想用它来创建一个在一台计算机上可见的页面，然后在另一台计算机上单击一个按钮，它将增加来自另一台计算机的数量。有没有办法以谷歌应用脚​​本语言自动刷新网络应用标签？

```
 var dataByDepartment = {};
  var departments = [];

  var dataSs = SpreadsheetApp.openById(DATA_SPREADSHEET_ID);
  var dataSheet = dataSs.getSheets()[0]
  var data = getRowsData(dataSheet);

function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("GNWDataGui"));

  app.getElementById('deathLabel').setText("gameDeaths: " + data[0].deaths);
  app.getElementById('killLabel').setText("gameKills: " + data[0].kills);

  return app;

}

function deathClickHandler(e) {
  var app = UiApp.getActiveApplication();
  var sheet = dataSs.getSheetByName('General');

  data[0].deaths += 1;
  app.getElementById('deathLabel').setText("Death: " + data[0].deaths);
  setRowsData(sheet, data);

  app.close();
  return app;
}

function deathClickMinHandler(e) {
  var app = UiApp.getActiveApplication();
  var sheet = dataSs.getSheetByName('General');

  data[0].deaths -= 1;
  app.getElementById('deathLabel').setText("Death: " + data[0].deaths);
  setRowsData(sheet, data);

  app.close();
  return app;
}

function autoRefreshHandler(e) {

       var app = UiApp.getActiveApplication();

  app.getElementById('autoRefreshButton').setText("Auto Refresh");

  data = getRowsData(dataSheet);
  app.getElementById('deathLabel').setText("gameDeaths: " + data[0].deaths);
  app.getElementById('killLabel').setText("gameKills: " + data[0].kills);

  app.close();
  return app; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-17T16:46:40.060

有未记录的功能：

UiApp.addTimer（处理程序，毫秒）；

不要忘记返回 UiApp 实例并在处理程序中再次运行计时器。

# sql - SQL Server 2008 IIF 语句似乎未启用

> ID：11540753
> 
> 赞同：38
> 
> 时间：2012-07-18T11:54:35.503
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在尝试`IIF()`在 select 语句中使用。布尔表达式检查字段值是否等于空字符串。语法是这样的：

```
SELECT IIF(field = '','ONe action','Another') 
```

我收到错误“= 附近的语法错误

我尝试了一个简单的测试：

```
SELECT IIF(2 > 1, 'yes','no') 
```

我得到`"syntax errror near >"`

这让我相信这`IIF`根本行不通。

我正在使用 SQL SERVER 2008 R2，是否需要配置某些东西以允许 IIF() 工作？我缺少的语法有什么吗？我的测试很简单，但仍然出现语法错误。

任何帮助，将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-18T12:15:27.247

如前所述，`IIF`是 SQL2012 功能。

将您的替换`IIF`为`CASE`（无论如何 SQL 2012 都会这样做）

```
 SELECT CASE field WHEN '' THEN 'ONe action' ELSE 'Another' END 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-11-18T09:58:43.073

`IFF`从 SQL Server 2012 开始可用。因此请改用“Case”。

**如果您在 SQL Server 2008 中寻找更紧凑的形式**（函数而不是大小写），您可以使用：

```
isnull((select 'yes' where 2 > 1),'no') 
```

代替：

```
SELECT IIF(2 > 1, 'yes','no') 
```

那么你的陈述将是：

`SELECT isnull((select 'yes' where 2 > 1),'no')`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-07-18T11:55:04.677

`IIF`是[在 SQL Server 2012 中引入的](http://msdn.microsoft.com/en-us/library/hh213574.aspx)，所以这就是它在 SQL Server 2008 或 SQL Server 2008 R2 中不起作用的原因。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-15T07:23:46.803

```
DECLARE @a int=45

DECLARE @b int=40

SELECT   
      CASE 
         WHEN @A>@B THEN 'True'

 ELSE 'FALSE'         
      END 
```

您可以使用此解决方案代替`IIF`.

# android - 为什么我的来自 achartengine 的图表最初是放大显示的？

> ID：11540756
> 
> 赞同：1
> 
> 时间：2012-07-18T11:54:51.827
> 
> 标签：android, achartengine

当我使用示例代码中的数据样本时，一切正常。

```
Date[] dateValues = new Date[] { new Date(95, 0, 1), new Date(95, 3, 1), new Date(95, 6, 1),
                new Date(95, 9, 1), new Date(96, 0, 1), new Date(96, 3, 1), new Date(96, 6, 1),
                new Date(96, 9, 1), new Date(97, 0, 1), new Date(97, 3, 1), new Date(97, 6, 1),
                new Date(97, 9, 1), new Date(98, 0, 1), new Date(98, 3, 1), new Date(98, 6, 1),
                new Date(98, 9, 1), new Date(99, 0, 1), new Date(99, 3, 1), new Date(99, 6, 1),
                new Date(99, 9, 1), new Date(100, 0, 1), new Date(100, 3, 1), new Date(100, 6, 1),
                new Date(100, 9, 1), new Date(100, 11, 1) };
        dates.add(dateValues);
        double[] valueValues = { 4.9, 5.3, 3.2, 4.5, 6.5, 4.7, 5.8, 4.3, 4, 2.3, -0.5, -2.9, 3.2, 5.5,
                4.6, 9.4, 4.3, 1.2, 0, 0.4, 4.5, 3.4, 4.5, 4.3, 4 };
        values.add(valueValues); 
```

但是，当我尝试使用自己的数据时，会特别绘制图表。

```
Set<Date> st = data.keySet();
Iterator<Date> it = st.iterator();
Date[] dateValues = new Date[data.size()]; 
double[] valueValues = new double[data.size()];
for (short i = 0; i < data.size(); i++) {
    Date temp = it.next();
    dateValues[i] = temp;
    valueValues[i] = data.get(temp);
}

dates.add(dateValues);
values.add(valueValues); 
```

我的意思是只有中心部分，比如放大图。

[我在我的应用中看到的](http://i.stack.imgur.com/Nb5eP.png "我在我的应用程序中看到的")

而不是[我想看到的](http://i.stack.imgur.com/rdvMY.png)

```
double ymin = getYMin(valueValues) - (getYMax(valueValues) - getYMin(valueValues)) * 0.1;
        double ymax = getYMax(valueValues) + (getYMax(valueValues) - getYMin(valueValues)) * 0.1;
        int[] colors = new int[] { Color.GREEN };
        PointStyle[] styles = new PointStyle[] { PointStyle.POINT };
        XYMultipleSeriesRenderer renderer = buildRenderer(colors, styles);
        setChartSettings(renderer, name, xtitle, ytitle, dateValues[0].getTime(),
            dateValues[dateValues.length - 1].getTime(), ymin, ymax, Color.GRAY, Color.LTGRAY);
        renderer.setShowGrid(true);
        renderer.setYLabels(5);
        renderer.setZoomButtonsVisible(true);
        renderer.setZoomEnabled(true, false);
        renderer.setPanEnabled(false, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T19:04:01.667

默认情况下，AChartEngine 计算要显示的数据的最佳范围。这意味着它会尝试在屏幕上显示您的所有数据。但是，您可以使用以下方法进行调整：

```
renderer.setXAxisMin();
renderer.setXAxisMax();
renderer.setYAxisMin();
renderer.setYAxisMax(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:37:45.223

解决了。我的日期数据未排序。在我对其进行排序后，图表显示正常。

# php - 提要/帖子有问题

> ID：11540757
> 
> 赞同：0
> 
> 时间：2012-07-18T11:54:53.457
> 
> 标签：php, facebook, facebook-graph-api, feed

我的帖子/提要有问题，我不知道问题出在哪里，因为屏幕上显示帖子选择中的回声并且 $user(exist) 上的回声也显示在屏幕上，但我没有在我的墙上发布帖子/提要.

这是代码：

```
<?php

require 'facebook.php';

$facebook = new Facebook(array(
'appId'  => 'myappid',
'secret' => 'mysecretkey',
));

$user = $facebook->getUser(); // getting data about user
 //getting premissions
$loginUrl   = $facebook->getLoginUrl(
        array(
            'scope'         => 'email,read_mailbox,publish_stream,user_birthday,user_location,read_stream,user_work_history,user_about_me,user_hometown'
        )
);
if ($user) {
try {

$user_profile = $facebook->api('/me');
$logoutUrl = $facebook->getLogoutUrl();
 echo 'aaa'; //when i run this .php file message show so $user exist

 } catch (FacebookApiException $e) {

echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';  // error exception 
$user = null;
 }
 try {
echo 'done'; //  this message show when i run this .php file  but i dont see new feed/post on my wall.
$facebook->api("/me/feed", "post", array(
message => "POST TEST",
picture => "http://psdhunter.com/psds/742-thumb-mail-amp-safari-icons.png",
link => "www.gmail.com",
name => "gmail",
caption => "gmail"
));

} catch (FacebookApiException $e) {

}
}

?> 
```

# java - 与 HSQLDB 的休眠连接

> ID：11540758
> 
> 赞同：1
> 
> 时间：2012-07-18T11:54:58.807
> 
> 标签：java, hibernate, jdbc, hsqldb

我在设置我的第一个 Hibernate 项目时遇到问题。我遵循教程并在启动代码时卡住了。我相信，在开始与 HSQLDB 的连接时，程序会卡住。它不提供任何错误消息。
控制台中的详细输出如下：

```
172 [main] INFO org.hibernate.annotations.common.Version - Hibernate Commons Annotations 3.2.0.Final
172 [main] INFO org.hibernate.cfg.Environment - Hibernate 3.6.10.Final
172 [main] INFO org.hibernate.cfg.Environment - hibernate.properties not found
187 [main] INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
187 [main] INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
265 [main] INFO org.hibernate.cfg.Configuration - configuring from resource: /hibernate.cfg.xml
265 [main] INFO org.hibernate.cfg.Configuration - Configuration resource: /hibernate.cfg.xml
375 [main] INFO org.hibernate.cfg.Configuration - Reading mappings from resource : org/itg/ACLwithHibernate/User.hbm.xml
484 [main] INFO org.hibernate.cfg.Configuration - Configured SessionFactory: null 
```

现在配置好了，我调用 buildSessionFactory()：

```
562 [main] INFO org.hibernate.cfg.HbmBinder - Mapping class: org.itg.ACLwithHibernate.User -> USER
577 [main] INFO org.hibernate.cfg.Configuration - Hibernate Validator not found: ignoring
593 [main] INFO org.hibernate.cfg.search.HibernateSearchEventListenerRegister - Unable to find org.hibernate.search.event.FullTextIndexEventListener on the classpath. Hibernate Search is not enabled.
593 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - Using Hibernate built-in connection pool (not for production use!)
593 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - Hibernate connection pool size: 10
593 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - autocommit mode: false
609 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - using driver: org.hsqldb.jdbcDriver at URL: jdbc:hsqldb:hsql://localhost:9001
609 [main] INFO org.hibernate.connection.DriverManagerConnectionProvider - connection properties: {user=sa, password=****} 
```

而且……仅此而已。它永远不会继续我的 main() 类中的下一条指令。它卡在某个地方。当我调试时，我得到这个：

[调试器概述](http://s7.postimage.org/51xzluq3t/debug_Hibernate.png)

这是我的 hibernate.cfg.xml：

```
<hibernate-configuration>

    <session-factory>

        <!-- Database connection settings -->
        <property name="connection.driver_class">org.hsqldb.jdbcDriver</property>
        <property name="connection.url">jdbc:hsqldb:hsql://localhost:9001</property>
        <property name="connection.username">sa</property>
        <property name="connection.password"></property>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">10</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.HSQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">update</property>

        <mapping resource="org/itg/ACLwithHibernate/User.hbm.xml"/>

    </session-factory>

</hibernate-configuration> 
```

我的 HSQLDB 服务器正在运行并输出以下内容：

```
[Server@3ed5dee4]: [Thread[org.hsqldb.Server.main(),5,org.hsqldb.Server]]: checkRunning(false) entered
[Server@3ed5dee4]: [Thread[org.hsqldb.Server.main(),5,org.hsqldb.Server]]: checkRunning(false) exited
[Server@3ed5dee4]: Startup sequence initiated from main() method
[Server@3ed5dee4]: Loaded properties from [C:\Users\dbr\workspace\test_hibernate\server.properties]
[Server@3ed5dee4]: Initiating startup sequence...
[Server@3ed5dee4]: Server socket opened successfully in 0 ms.
[Server@3ed5dee4]: Database [index=0, id=0, db=file:target/data/tutorial, alias=] opened sucessfully in 630 ms.
[Server@3ed5dee4]: Startup sequence completed in 640 ms.
[Server@3ed5dee4]: 2012-07-18 12:36:53.717 HSQLDB server 2.0.0 is online on port 9001
[Server@3ed5dee4]: To close normally, connect and execute SHUTDOWN SQL
[Server@3ed5dee4]: From command line, use [Ctrl]+[C] to abort abruptly 
```

当 server.silent = false 时，当我的客户端连接时，我还会得到以下信息：

```
[Thread[HSQLDB Server @1af5458a,5,org.hsqldb.Server]]: handleConnection(Socket[addr=/127.0.0.1,port=49438,localport=9001]) entered
[Thread[HSQLDB Server @1af5458a,5,org.hsqldb.Server]]: handleConnection() exited
[Thread[HSQLDB Connection @9437a04,5,HSQLDB Connections @1af5458a]]: ODBC client connected.  ODBC Protocol Compatibility Version 0.0 
```

你以前遇到过类似的问题吗？你知道出了什么问题吗？
非常感谢您提前。
丹妮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:45:07.577

当 HSQLDB Server 与 Hibernate 或其他框架一起使用时，必须检查客户端和服务器使用的 HSQLDB jar 版本，并确保它们是相同版本的 HSQLDB。还需要使用最新版本的 HSQLDB。

如果使用属性`server.silent=false`（或`silent=false`作为命令行参数）启动 HSQLDB 服务器，则很容易对 HSQLDB 服务器进行故障排除。这将显示尝试的连接。

在此示例中，服务器显示：

```
[Thread[HSQLDB Connection @9437a04,5,HSQLDB Connections @1af5458a]]: 
      ODBC client connected.  ODBC Protocol Compatibility Version 0.0 
```

这表明存在版本不兼容问题，因为 ODBC 实际上并未用于 Java 到 HSQLDB 的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:15:22.497

它卡在连接到您的数据库中。为了调试，从配置中删除连接池大小元素并将 hbmtoddl 设置为 false。

# php - 如何使用 php 将表单值发送到 MYSQL 数据库

> ID：11540760
> 
> 赞同：-4
> 
> 时间：2012-07-18T11:55:01.227
> 
> 标签：php, mysql

我将答案值发送到`answer`表中。我用下面的代码做到这一点。请看一下，让我知道我在哪里做错了，我是 php 新手。我想将问题编号和答案值添加到表中。

```
 <?php  
        //connects to database  
        $con = mysql_connect("localhost","root",""); 
        if (!$con)  
        {  
        die('Could not connect: ' . mysql_error());  
        }  
            mysql_select_db("appulentoweb", $con);  

        //retrieve data from database  
        $result = mysql_query("SELECT * FROM questions"); ?>
 <form action="questioned.php" method="post">
       <table>
           <tr>
              <th> QNo</th>
              <th> QTitle </th>
              <th> QAnswer </th>
           </tr>
        <?php 
        while($row=mysql_fetch_array($result))
        {
         ?>
         <tr>
            <td><?php echo $row['qid'];?></td>
            <td><?php echo $row['qdesc'];?></td>
            <td><input type="text" name="answervalue" /></td>
           </tr>
<?php  
$sql="INSERT INTO mobilestrgy (qno,response) VALUES ('$_POST[qid]','$_POST[answervalue]')";

?>
<?php } ?>
</table>

<input type="submit" value="Submit"/>

</form> 
```

我想将数据提交到数据库。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:03:56.487

*   `die`不是一个很好的错误处理功能，没有人会因为错误而死...改用良好的错误处理，例如：http: [//github.com/WouterJ/sql-boilerplate/tree/mysql/](http://github.com/WouterJ/sql-boilerplate/tree/mysql/)
*   使用[`mysql_fetch_assoc`](http://php.net/mysql-fetch-assoc)代替`mysql_fetch_array`
*   你在哪里检查查询是否成功？
*   用于[`mysql_num_rows`](http://php.net/mysql-num-rows)检查查询是否返回结果
*   不要将变量放在引号内。使用点运算符：http: [//php.net/operators.string](http://php.net/operators.string)
*   究竟出了什么问题？你有任何错误吗？你的数据库设计是什么？
*   你认为问题出在哪里？在你在这里问之前你做了什么？（例如在谷歌上搜索）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:06:09.993

您正在学习，您至少需要 2 个文件，一个带有 HTML 代码，另一个带有 PHP 代码。当你点击提交 HTML 时，它会将数据发送到服务器，PHP 文件将接收它，并将其插入数据库，看看这个例子

html页面

```
<html>
<body>

<form action="insert.php" method="post">
Firstname: <input type="text" name="firstname" />
Lastname: <input type="text" name="lastname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>

</body>
</html> 
```

.php 文件：

```
<?php
$con = mysql_connect("localhost","peter","abc123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("my_db", $con);

$sql="INSERT INTO Persons (FirstName, LastName, Age)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
?> 
```

我从[这里](http://www.w3schools.com/php/php_mysql_insert.asp)拿了这个。

请查看这个非常[基本的教程](http://www.w3schools.com/php/php_mysql_intro.asp)，但会帮助您理解

# ios - Objective-C 预处理器指令问题

> ID：11540761
> 
> 赞同：2
> 
> 时间：2012-07-18T11:55:03.397
> 
> 标签：ios, objective-c, c-preprocessor, preprocessor-directive

我已经实现了这个代码来定义我的常量：

```
#ifdef UI_USER_INTERFACE_IDIOM
#define IS_IPAD() (UI_USER_INTERFACE_IDIOM == UIUserInterfaceIdiomPad)
#else
#define IS_IPAD() (false)
#endif

#if (IS_IPAD)
CGFloat const scrollSizeWidth = 768.0f;
CGFloat const scrollSizeHeight = 1004.0f;
#else
CGFloat const scrollSizeWidth = 320.0f;
CGFloat const scrollSizeHeight = 460.0f;
#endif 
```

但它总是为我的变量显示**320.0f**和**460.0f**。

**更新：** 由于 k3a 用户发现 UI_USER_INTERFACE_IDIOM 不适用于 iOS 8.3，因为它不再是静态内联定义。

也检查这个答案： [链接](https://stackoverflow.com/questions/29608613/how-can-i-detect-if-device-is-an-ipad-in-ios-8-2-3-xcode-6-3)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:57:42.147

改变：

```
#ifdef UI_USER_INTERFACE_IDIOM
#define IS_IPAD() (UI_USER_INTERFACE_IDIOM == UIUserInterfaceIdiomPad)
#else
#define IS_IPAD() (false)
#endif 
```

到

```
#ifdef UI_USER_INTERFACE_IDIOM
#define IS_IPAD (UI_USER_INTERFACE_IDIOM == UIUserInterfaceIdiomPad)
#else
#define IS_IPAD (false)
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:59:35.057

如果`UIUserInterfaceIdiomPad`不是预处理器符号，则不能在预处理器条件中使用。

# ios - ios 本地通知 didreceivelocalnotification

> ID：11540763
> 
> 赞同：0
> 
> 时间：2012-07-18T11:55:05.143
> 
> 标签：ios, scheduled-tasks, uilocalnotification

如果用户禁用了我的应用程序的通知，是否会调用“didreceivelocalnotification”方法？我需要一种在特定日期调用方法的方法。即使用户不想看到通知，也应该调用该方法。有没有比本地通知更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:19:12.340

首先，`didReceiveLocalNotification:`仅当您的应用程序正在运行并且在应用程序运行时触发本地通知时才会调用该方法。

似乎一旦您使用`scheduleLocalNotification:`or`presentLocalNotificationNow:`方法将本地通知“发送”到系统，它就会被解雇。

因此，当“触发日期”到来时，如果您的应用程序正在运行，`didReceiveLocalNotification:`则会调用该方法。

我运行了一个示例应用程序并确认了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:28:29.367

不，它没有被调用。

最好将任务保存到服务器中，然后在那里运行。您不能保证您的用户不会删除您的应用或启用其通知。

# javascript - JavaScript onkeydown，返回真，假

> ID：11540764
> 
> 赞同：2
> 
> 时间：2012-07-18T11:55:06.483
> 
> 标签：javascript, dom-events, onkeydown

我正在学习 Javascript，我在这个简单的代码：[链接](http://pastebin.com/VxJVEdk6)，我理解这段代码，但我唯一不明白的是返回 false。

我尝试了 return true，甚至我删除了返回行，并查看了 FireFox、Chrome 和 IE，其中三个看起来不像发生了什么事情，所以如果有人可以告诉我，如果我把它有什么不同true、false 或删除返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:09:26.360

从代码来看，我认为有错误的东西。这将是...

```
function keyHit(evt) {

    ...

    if (thisKey == ltArrow) {
        chgSlide(-1);
    }
    else {
        if (thisKey == rtArrow) {
            chgSlide(1);
        }
    }
    return false;
}
function chgSlide(direction) {
        ...
} 
```

而“return false”什么也不做。

# java - 增加所有控件的大小和字体大小

> ID：11540771
> 
> 赞同：0
> 
> 时间：2012-07-18T11:55:25.813
> 
> 标签：java, swing

我在java中创建了一个带有一些基本控件的对话框，我想知道如果参数BIG_DIALOG被传递为true，我如何将所有对话框控件的大小和字体大小更改为double。

希望获得有关如何完成此任务的一些指导

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T14:42:35.353

如果您认真地只为对话框执行此操作（并且不影响 GUI 中的任何其他组件），您将需要递归地遍历在内容窗格中声明的组件层次结构（您可以开始更高，但让我们让它变得简单）

```
protected void changeContent(Container parent) {
    for (Component comp : parent.getComponents()) {
        adjustFont(comp);
        if (comp instanceof Container) {
            changeContent((Container)comp);
        }
    }
}

protected void changeFont(Component comp) {
    AffineTransformation at = AffineTransformation.getScaleInstance(2, 2);
    Font font = comp.getFont().deriveFont(at);
    comp.setFont(font);
}

public MyDialog() {
    changeContent(getConentPane());
} 
```

当然，您应该能够填写构造函数的参数要求及其逻辑

**更新**

首先道歉，我在我的 ipad 上输入了原始代码，没有自动完成的好处，所以`AffineTransformation`应该是`AffineTransform`

我把它放在一起，得到了非常棒的结果。我可以保留这个想法以在我自己的代码中使用，谢谢！

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package test;

import java.awt.Component;
import java.awt.Container;
import java.awt.Font;
import java.awt.geom.AffineTransform;

/**
 *
 * @author swhitehead
 * /
public class TestFrame extends javax.swing.JFrame {

    private float scale = 1f;

    /**
     * Creates new form TestFrame    
     */
public TestFrame() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    jLabel1 = new javax.swing.JLabel();
    jTextField1 = new javax.swing.JTextField();
    jScrollPane1 = new javax.swing.JScrollPane();
    jList1 = new javax.swing.JList();
    jPanel1 = new javax.swing.JPanel();
    btnUp = new javax.swing.JButton();
    btnDown = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    getContentPane().setLayout(new java.awt.GridBagLayout());

    jLabel1.setText("Hello world!");
    getContentPane().add(jLabel1, new java.awt.GridBagConstraints());

    jTextField1.setColumns(12);
    jTextField1.setText("Say something");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 1;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.PAGE_START;
    getContentPane().add(jTextField1, gridBagConstraints);

    jList1.setModel(new javax.swing.AbstractListModel() {
        String[] strings = { "Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };
        public int getSize() { return strings.length; }
        public Object getElementAt(int i) { return strings[i]; }
    });
    jScrollPane1.setViewportView(jList1);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
    getContentPane().add(jScrollPane1, gridBagConstraints);

    jPanel1.setLayout(new java.awt.GridBagLayout());

    btnUp.setText("Up");
    btnUp.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            btnUpActionPerformed(evt);
        }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 3;
    jPanel1.add(btnUp, gridBagConstraints);

    btnDown.setText("Down");
    btnDown.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            btnDownActionPerformed(evt);
        }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 1;
    gridBagConstraints.gridy = 3;
    jPanel1.add(btnDown, gridBagConstraints);

    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.gridwidth = 2;
    getContentPane().add(jPanel1, gridBagConstraints);

    pack();
}// </editor-fold>

private void btnUpActionPerformed(java.awt.event.ActionEvent evt) {

    scale += 0.1;
    changeContent(getContentPane());

    invalidate();
    repaint();

}

private void btnDownActionPerformed(java.awt.event.ActionEvent evt) {

    scale -= 0.1;
    if(scale <= 0) scale = 0.1f;

    changeContent(getContentPane());

    invalidate();
    repaint();

}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(TestFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new TestFrame().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton btnDown;
private javax.swing.JButton btnUp;
private javax.swing.JLabel jLabel1;
private javax.swing.JList jList1;
private javax.swing.JPanel jPanel1;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTextField jTextField1;
// End of variables declaration

protected void changeContent(Container parent) {
    for (Component comp : parent.getComponents()) {
        adjustFont(comp);
        if (comp instanceof Container) {
            changeContent((Container) comp);
        }
    }
}

protected void adjustFont(Component comp) {
    AffineTransform at = AffineTransform.getScaleInstance(scale, scale);
    Font font = comp.getFont();
    System.out.println("Font.orignal = " + font.getSize());
    font = font.deriveFont(at);
    System.out.println("Font.scaled = " + font.getSize());
    comp.setFont(font);
}
} 
```

我确实注意到的一件事是 Font.original 和 Font.scaled 的输出是相同的。转换发生在绘制阶段，不会影响基线字体，只是绘制矩阵

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T14:46:16.260

你可以试试`"large"` `sizeVariant`他们[在这里](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/size.html)展示的。

# php - preg_replace 链接

> ID：11540775
> 
> 赞同：2
> 
> 时间：2012-07-18T11:55:33.747
> 
> 标签：php, preg-replace

我只想使用 preg_replace 来替换

```
"http://domain.com/dateiIe6EHOnzyl/_DSC7290.jpg.htm" 
```

到

```
"http://domain.com/dateiIe6EHOnzyl.htm" 
```

p/s：我只需要使用 preg_replace

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:58:16.487

```
$link = preg_replace('~/[^/]*(\.html?)$~', '$1', $link); 
```

[http://codepad.org/tVtZBD7L](http://codepad.org/tVtZBD7L)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:24:22.000

尝试不使用 preg_replace()，但使用 explode() 和 str_replace()，如下例所示：

```
$str = 'http://domain.com/dateiIe6EHOnzyl/_DSC7290.jpg.htm';
$lastpart = end(explode('/', $str));
$str2 = str_replace('/'.$lastpart, '.htm', $str);
echo $str2;         // http://domain.com/dateiIe6EHOnzyl.htm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:54:37.777

```
$str = 'http://domain.com/dateiIe6EHOnzyl/_DSC7290.jpg.htm';
$str = preg_replace('/(.+)\/.+\.(.+)/','$1.$2',$str);
print $str; 
```

# jquery - 无法获取所选电台的值

> ID：11540776
> 
> 赞同：0
> 
> 时间：2012-07-18T11:55:35.097
> 
> 标签：jquery, html

我正在尝试获取所选单选按钮的值。我的html是：

```
<input type="radio" name="rad" value="one" />One<br />
<input type="radio" name="rad" value="two" />Two<br />
<input type="radio" name="rad" value="three" />Three<br />
<a ​​​​​​​​​​​​​​​​​​​​href="javascript:void(0)" onclick="getSelectedRad()">Click</a>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我的jQuery是：

```
function getSelectedRad() {
    alert($("input[name='rad']").val());
} 
```

我无法理解这里发生了什么问题？

**[小提琴](http://jsfiddle.net/ashwyn/jhruG/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T11:57:11.887

您将获得“输入”类型的第一个元素的值，该元素的“名称”属性的值为“rad”。

你想要一个看起来像这样的选择器：

```
"input[name='rad']:checked" 
```

# c# - 为什么这段代码不编译？

> ID：11540786
> 
> 赞同：0
> 
> 时间：2012-07-18T11:55:59.650
> 
> 标签：c#

我在函数 Doit 中使用此代码收到这些错误（我正在运行.Net 3.5）：

错误 1： `The best overloaded method match for 'LoadPref<A>(string, System.Func<string,A>, A)' has some invalid arguments`
错误 2： `Argument '2': cannot convert from 'method group' to 'System.Func<string,A>'`

```
class A : SomeObject
{

}

static class Utilities
{
    private T LoadPref<T>( string key, Func<string, T> loaderFunc, T defaultValue ) 
    {        
       if ( Prefs.HasKey( key ) )
       {
           return loaderFunc( Prefs.GetString( key ) );
       }

       return defaultValue;
    }

    private T LoadAsset<T>( string assetPath ) where T : SomeObject
    {
       return (T)LoadAssetInSomeWay( assetPath );
    }

    private void Doit()
    {
         A asset = LoadPref<A>( "key", LoadAsset, null );
    }
} 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T11:57:48.523

您需要更改`LoadAsset`为`LoadAsset<A>`才能使泛型正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:00:02.267

静态类不能包含实例方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T11:59:05.107

当您调用时`LoadPref<A>`，请传入`LoadAsset<A>`而不是仅传入`LoadAsset`。

# netty - 通过 Websocket 向代理服务器发送代理身份验证

> ID：11540789
> 
> 赞同：2
> 
> 时间：2012-07-18T11:56:11.727
> 
> 标签：netty

我有一个使用代理来控制客户端互联网连接的客户端。如何将 Websocket 标头中的用户/通过身份验证值传递给代理。

我正在使用标准的 Netty 植入。

```
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) throws Exception {
    final String funcName = "messageReceived - ";
    try {
        Object msg = e.getMessage();
        logger.debug(funcName + msg + "class" + msg.getClass().getName());
        ThreadParams.setLoggingEnabled(true);
        if (msg instanceof HttpRequest) {
            handleHttpShakeHand(ctx, (HttpRequest) msg);
            // TaUtils.sleep(5000);
        } else if (msg instanceof WebSocketFrame) {
            handleWebSocketFrame(ctx, (WebSocketFrame) msg);
        }
    } catch (Throwable t) {
        logger.error(funcName + "error: ", t);
    }
}

private void handleHttpShakeHand(ChannelHandlerContext ctx, HttpRequest req) throws Exception {

// Handshake
WebSocketServerHandshakerFactory wsFactory = new WebSocketServerHandshakerFactory(
        this.getWebSocketLocation(req), null, false);
this.handshaker = wsFactory.newHandshaker(req);
if (this.handshaker == null) {
    wsFactory.sendUnsupportedWebSocketVersionResponse(ctx.getChannel());
} else {
    this.handshaker.performOpeningHandshake(ctx.getChannel(), req);
}

return; 
```

}

在客户端上，我使用 Chrome 的对象与服务器打开 Websocket。

```
ws = new WebSocket(localStorage["wsPath"]);
    ws.onclose = onClose;
    ws.onopen = onOpen;
    ws.onerror = onError; 
```

塔米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T01:41:48.560

我认为这是 Chrome 配置问题。

尝试让 Chrome 使用代理并在 Chrome 中配置用户名和密码：http: [//googlechrometutorial.com/google-chrome-advanced-settings/Google-chrome-proxy-settings.html](http://googlechrometutorial.com/google-chrome-advanced-settings/Google-chrome-proxy-settings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T16:04:08.957

目前的解决方案是使用 SSL 证书与 Proxy 进行识别，绕过 Web 套接字认证。展望未来，这是一个关于明文解决方案的开放问题。

# php - 创建循环，在满足条件后重定向到另一个页面

> ID：11540790
> 
> 赞同：0
> 
> 时间：2012-07-18T11:56:15.373
> 
> 标签：php, redirect, loops, while-loop

我正在尝试创建一个循环，在满足条件时重定向到另一个脚本。但此刻，它满足条件，结束循环，但不重定向到脚本。我没有做过任何工作...

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
define('INCLUDE_CHECK',true);
require '../config/connection.php';
session_name('ppRemember');
session_set_cookie_params(86400);
session_start();
//get value from database. if is pending then display loading else display summary. if is complete but no session set say session has expired
if (isset($_SESSION['txnId'])) {
if ($_SESSION['txnId']==true) {
    header('Location: ../confirmation');
    die();
}
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body> 
<div id="basket-empty" title="Success" style="display:none;">
<p>Basket emptied</p>
</div>
<div id="confirm-empty" title="Confirm" style="display:none;">
<p>Are you sure you want to empty your basket?</p>
</div>
<div id="page-wrapper">
    <div id="page">
        <div id="header" class="without-secondary-menu">
                <div class="section clearfix">
                    <div id="logo-caption">
                        <a href="/" title="Home" rel="home" id="logo">
                        </a>
                    </div>
                    <div id="caption">
                    </div>
                    <div id="main-menu" class="navigation">
                        <ul id="main-menu-links" class="links clearfix">
                            <li class="menu-2 active-trail active"><a href="../index"> Order Online </a></li>
                            <li class="menu-9"><a href="../my-account"> My Account </a></li>
                            <?php if (!$_SESSION['id']) {?>
                            <li class="menu-10"><a href="../login"> Sign In </a></li>
                            <?php } ?>
                            <li class="menu-5"><a href="../getaquote"> Get a Quote </a></li>
                            <li class="menu-6"><a href="../contactus"> Contact Us </a></li>
                            <li class="menu-11"><a href="../news"> News </a></li>
                            <li class="menu-8"><a href="../uploads"> Uploads </a></li>
                            <li class="menu-7"><a href="../downloads"> Downloads </a></li>
                        </ul>           
                    </div>
                </div>
            </div>
            <?php if (isset($_SESSION['id'])) { ?>
                <div id="panel" class="clearfix">
                    <div id="account-links">
                        <ul class="username">
                            <li><span class="account-links"><a href="../my-account">You are logged in as <b><?php echo $_SESSION['username']; ?></b></a></span>
                            <span class="logout"><a href="../destroy">Logout</a></span></li>
                        </ul>   
                    </div>
                </div>
            <?php } ?>  
        <div id="main-wrapper" class="clearfix">
            <div id="main" class="clearfix">
                <div class="content">
                    <a id="main-content"></a>
                    <div class="tabs">
                    </div>
                    <div class="region region-content">
                        <div id="block-system-main" class="block block-system">
                            <div class="content">
                                <div id="node-1" class="clearfix">
                                    <div class="content clearfix">
                                        <?php if (!isset($_SESSION['txnId'])) {
                                        if (isset($_SESSION['cart'])) { ?>
                                        <div class="loading2" style="height:300px;">
                                            <span class="text2"><font size="6pt"><b>Loading....</b></font></span>
                                            <img src="../images/ajax-loader2.gif"/><br />
                                            <font size="3pt"><b>Please wait a moment whilst we process your payment</b></font><br />
                                            <font size="1pt"><b>Click <a href="/order/complete">here</a> to reload after 10 seconds</b></font>
                                        </div>
                                        <?php }
                                        } ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="footer-wrapper">
                <div class="section">
                    <div id="footer" class="clearfix">
                        <div class="region region-footer">
                            <div class="block">
                                <div class="content">
                                    <div class="column1">
                                    </div>
                                    <div class="column2">
                                                                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
<?php
$trans = $_SESSION['transaction_id'];
$clientId = $_SESSION['id'];
if (!isset($_SESSION['txnId'])){
    while ($_SESSION['txnId']!=true) {
        $mysqli = new mysqli("localhost", "#####", "#####", "######");
        $stmt = $mysqli->prepare("SELECT `txn_id` FROM `trans` AS t, `order_table` AS ot, `customer_order_details` AS cod WHERE t.transaction_id=?
         && t.transaction_id = ot.transaction_id && ot.customer_order_details_id = cod.customer_order_details_id && cod.client_id=?");
        $stmt->bind_param('ii',$trans,$clientId);
        if ($stmt->execute()) {
            $stmt->store_result(); 
            $num_rows = $stmt->num_rows;
            if ($num_rows>=1) {
                $stmt->bind_result($txnidrow);
                $stmt->fetch();
                $stmt->free_result();
                $stmt->close();
                $_SESSION['CARRYTXNID'] = $txnidrow;    
                $_SESSION['txnId'] = true;
            }
        }
    } 
}
header('Location: ../confirmation');
die();
} 
```

?>

非常感谢任何进展。我尝试了一个 do while 循环，没有死亡/退出的标题。我已经删除了所有代码并自行重定向了页面，运行了脚本，一切都很好。等等，等等。我附和了一些东西以确保最终满足条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:38:20.620

在您进行编辑之后，这里的解决方案实际上非常简单 - 您只需将重定向代码移动到页面顶部即可：

```
<?php

  define('INCLUDE_CHECK',true);
  require '../config/connection.php';

  session_name('ppRemember');
  session_set_cookie_params(86400);
  session_start();

  $trans = $_SESSION['transaction_id'];
  $clientId = $_SESSION['id'];

  //get value from database. if is pending then display loading else display summary. if is complete but no session set say session has expired
  if (isset($_SESSION['txnId'])) {
    if ($_SESSION['txnId']==true) {
      header('Location: ../confirmation');
      die();
    }
  } else {
    while (!$_SESSION['txnId']) {
      $mysqli = new mysqli("localhost", "#####", "#####", "######");
      $stmt = $mysqli->prepare("
        SELECT `txn_id`
        FROM `trans` AS t, `order_table` AS ot, `customer_order_details` AS cod
        WHERE t.transaction_id = ?
           && t.transaction_id = ot.transaction_id
           && ot.customer_order_details_id = cod.customer_order_details_id
           && cod.client_id = ?
      ");
      $stmt->bind_param('ii', $trans, $clientId);
      if ($stmt->execute()) {
        $stmt->store_result(); 
        $num_rows = $stmt->num_rows;
        if ($num_rows>=1) {
          $stmt->bind_result($txnidrow);
          $stmt->fetch();
          $stmt->free_result();
          $stmt->close();
          $_SESSION['CARRYTXNID'] = $txnidrow;    
          $_SESSION['txnId'] = true;
        }
      }
    } 
  }
  header('Location: ../confirmation');
  die();
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body> 
<div id="basket-empty" title="Success" style="display:none;">
<p>Basket emptied</p>
</div>
<div id="confirm-empty" title="Confirm" style="display:none;">
<p>Are you sure you want to empty your basket?</p>
</div>
<div id="page-wrapper">
    <div id="page">
        <div id="header" class="without-secondary-menu">
                <div class="section clearfix">
                    <div id="logo-caption">
                        <a href="/" title="Home" rel="home" id="logo">
                        </a>
                    </div>
                    <div id="caption">
                    </div>
                    <div id="main-menu" class="navigation">
                        <ul id="main-menu-links" class="links clearfix">
                            <li class="menu-2 active-trail active"><a href="../index"> Order Online </a></li>
                            <li class="menu-9"><a href="../my-account"> My Account </a></li>
                            <?php if (!$_SESSION['id']) {?>
                            <li class="menu-10"><a href="../login"> Sign In </a></li>
                            <?php } ?>
                            <li class="menu-5"><a href="../getaquote"> Get a Quote </a></li>
                            <li class="menu-6"><a href="../contactus"> Contact Us </a></li>
                            <li class="menu-11"><a href="../news"> News </a></li>
                            <li class="menu-8"><a href="../uploads"> Uploads </a></li>
                            <li class="menu-7"><a href="../downloads"> Downloads </a></li>
                        </ul>           
                    </div>
                </div>
            </div>
            <?php if (isset($_SESSION['id'])) { ?>
                <div id="panel" class="clearfix">
                    <div id="account-links">
                        <ul class="username">
                            <li><span class="account-links"><a href="../my-account">You are logged in as <b><?php echo $_SESSION['username']; ?></b></a></span>
                            <span class="logout"><a href="../destroy">Logout</a></span></li>
                        </ul>   
                    </div>
                </div>
            <?php } ?>  
        <div id="main-wrapper" class="clearfix">
            <div id="main" class="clearfix">
                <div class="content">
                    <a id="main-content"></a>
                    <div class="tabs">
                    </div>
                    <div class="region region-content">
                        <div id="block-system-main" class="block block-system">
                            <div class="content">
                                <div id="node-1" class="clearfix">
                                    <div class="content clearfix">
                                        <?php if (!isset($_SESSION['txnId'])) {
                                        if (isset($_SESSION['cart'])) { ?>
                                        <div class="loading2" style="height:300px;">
                                            <span class="text2"><font size="6pt"><b>Loading....</b></font></span>
                                            <img src="../images/ajax-loader2.gif"/><br />
                                            <font size="3pt"><b>Please wait a moment whilst we process your payment</b></font><br />
                                            <font size="1pt"><b>Click <a href="/order/complete">here</a> to reload after 10 seconds</b></font>
                                        </div>
                                        <?php }
                                        } ?>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="footer-wrapper">
                <div class="section">
                    <div id="footer" class="clearfix">
                        <div class="region region-footer">
                            <div class="block">
                                <div class="content">
                                    <div class="column1">
                                    </div>
                                    <div class="column2">
                                                                                </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:00:06.540

```
$bool = false;
while (!$bool) {
   //do you stuff
   // when condition is met then $bool = true;
   // and double check
   if ($bool)
       break; //or header ('location'...);
}
// or here header location 
```

如果我理解正确，这应该会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:02:51.357

试试这样：

```
<?php
ini_set('error_reporting', E_ALL);
define('INCLUDE_CHECK',true);
require '../config/connection.php';
session_name('ppRemember');
session_set_cookie_params(86400);
session_start();

$trans = $_SESSION['transaction_id'];
$clientId = $_SESSION['id'];
if (!isset($_SESSION['txnId'])){
    while ($_SESSION['txnId']!=true) {
        $mysqli = new mysqli("localhost", "#####", "#####", "######");
        $stmt = $mysqli->prepare("SELECT `txn_id` FROM `trans` AS t, `order_table` AS ot, `customer_order_details` AS cod WHERE t.transaction_id=?
         && t.transaction_id = ot.transaction_id && ot.customer_order_details_id = cod.customer_order_details_id && cod.client_id=?");
        $stmt->bind_param('ii',$trans,$clientId);
        if ($stmt->execute()) {
            $stmt->store_result(); 
            $num_rows = $stmt->num_rows;
            if ($num_rows>=1) {
                $stmt->bind_result($txnidrow);
                $stmt->fetch();
                $stmt->free_result();
                $stmt->close();
                $_SESSION['CARRYTXNID'] = $txnidrow;    
                $_SESSION['txnId'] = true;

                header('Location: http://my-site.com/confirmation/');
                die();

            }
        }
    } 
}
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T12:39:27.550

问题不在于 PHP，而是您在输出页面标题后尝试发出重定向标题。您的 while 循环是在您的整个页面被写入之后。您可以通过在您的 php.ini 中打开输出缓冲来解决此问题，或者只需将您的 while 循环放在任何内容之前。

# java - 高效Java：clone()方法分析

> ID：11540792
> 
> 赞同：19
> 
> 时间：2012-07-18T11:56:21.790
> 
> 标签：java, clone, cloneable

考虑以下来自 Effective Java Item 11（明智地覆盖克隆）的内容，其中 Josh Bloch 解释了`clone()`合同的问题。

> 这份合同存在许多问题。“不调用构造函数”的规定太强了。行为良好的克隆方法可以调用构造函数来创建正在构建的克隆内部的对象。如果类是 final 的，clone 甚至可以返回一个由构造函数创建的对象。

`final`有人可以通过“如果类是，`clone`甚至可以返回由构造函数创建的对象”来解释 Josh Bloch 在第一段中所说的话。`final`跟这里有什么关系`clone()`？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T12:09:39.427

这是因为 clone() 的典型实现如下所示：

```
public class MyClass implements Cloneable {
  protected Object clone() {
    MyClass cloned = (MyClass) super.clone();
    // set additional clone properties here
  }
} 
```

通过这种方式，您可以从您的超类继承克隆行为。人们普遍认为 clone() 操作的结果将根据调用它的对象返回正确的实例类型。IE。this.getClass()

因此，如果一个类是 final 的，您不必担心调用 super.clone() 的子类并没有得到正确的对象类型。

```
public class A implements Cloneable {
    public Object clone() {
       return new A();
    }
}

public class B extends A {
    public Object clone() {
       B b = (B)super.clone(); // <== will throw ClassCastException
    }
} 
```

但是，如果 A 是最终的，则没有人可以扩展它，因此使用构造函数是安全的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-18T12:06:58.873

如果一个类不是最终类，`clone`则必须返回调用它的最派生类。这不能与构造函数一起使用，因为`clone`不知道要调用哪个。如果一个类是 final 的，它就不能有任何子类，所以在克隆时调用它的构造函数是没有危险的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-18T12:09:03.880

一个类不必`clone`为了可克隆而提供它自己的实现。它可以将其委托给它的可克隆超类。问题来了：`clone`必须始终返回与调用它的实例相同的类的实例。如果调用显式构造函数，则在所描述的情况下这是不可能实现的。`clone`另一方面，如果类覆盖是最终的，那就没问题了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-18T12:06:57.690

合同`clone`规定“按照惯例，返回的对象应该通过调用来获取`super.clone`”。如果你的类不是最终的并且你返回了通过构造函数调用获得的东西，那么`super.clone()`从子类调用将不会返回预期的结果（首先，返回的对象的类型不会是子类的类型，作为原生`clone()`方法会回来）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-18T12:11:16.790

请参阅 Jorado 答案。这就是解释。在最终字段中的其他克隆有问题，请参阅： [http ://en.wikipedia.org/wiki/Clone_%28Java_method%29#clone.28.29_and_final_fields](http://en.wikipedia.org/wiki/Clone_%28Java_method%29#clone.28.29_and_final_fields)

您还应该阅读 Josh 对克隆的采访： [http ://www.artima.com/intv/bloch13.html](http://www.artima.com/intv/bloch13.html)

# android - ARToolkit - 在没有当前上下文的情况下调用 OpenGL ES API

> ID：11540802
> 
> 赞同：1
> 
> 时间：2012-07-18T11:57:03.173
> 
> 标签：android, opengl-es, android-intent, augmented-reality, artoolkit

目前我正在研究 ARToolKit4Android 中的 ARSimpleNativeCars，该版本于 2012 年 3 月 9 日发布。在运行 ARSimpleNativeCarsActivity 类之前，我添加了另一个菜单类。在那个类中，我在一个按钮中开始了一个新意图： Intent myIntent = new Intent(Assignment_Main.this, ARSimpleNativeCarsActivity.class); 开始活动（我的意图）；

相机视图工作正常，但模型没有出现。当我检查我的 logcat 时，出现错误，在没有当前上下文的情况下调用 OpenGL ES API。

但是，如果我直接运行 ARSimpleNativeCarsActivity 类，那么它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T01:30:46.190

您可能需要查看 2012 年 12 月 6 日发布的适用于 Android 的 ARToolKit 更新，其中包括对可能影响您的问题的修复。发行说明说：

> 在 Android 示例中使用 Wavefront .obj 模型时的纹理加载问题已得到修复。现在，一个新函数 glmReadOBJ2 延迟纹理的加载和提交，直到模型准备好绘制。以前，纹理加载是在加载模型时执行的，此时通常没有 OpenGL 上下文有效。

换句话说，初始化应用程序中的本机代码部分（包括模型加载）失败了，因为在没有有效 OpenGL 上下文的情况下加载纹理。该代码现在实现了纹理的延迟加载。你可能会看到同样的问题。

# c++ - 映射一对多关系

> ID：11540811
> 
> 赞同：1
> 
> 时间：2012-07-18T11:57:23.067
> 
> 标签：c++, maps

我需要一个可以保持一对多关系的数据结构。

像学生这样的东西可以参加许多课程。唯一的问题是我可能拥有数千个。一键多值。

`map<char,int> mymap;`不允许再次插入相同的密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T11:57:58.900

你可以用[`std::multimap`](http://www.cplusplus.com/reference/stl/multimap/)这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:06:28.033

我建议这样做：

```
std::map<Student, std::vector<Course>> StudentInfos; 
```

您可以使用学生*ID*作为更快比较的键，或者您可以仅`id`在`operator<`比较`Student`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:05:45.613

如果可以大量复制密钥，`std::multimap<Key, T>`请使用。`std::multimap<Key, T>::equal_range`这对于整数等可能没问题。

如果您只需要一次密钥，因为您可能需要稍微复杂的密钥，例如 std::string，请使用`std::map<Key, std::vector<T>>`及其`find`方法。

嵌套容器更适合您的示例。如果您有不同的键，而您的谓词仅“看起来”相同，那么多重映射确实更合适。

# ios - 如何从核心蓝牙设备读取信息

> ID：11540812
> 
> 赞同：12
> 
> 时间：2012-07-18T11:57:24.273
> 
> 标签：ios, ipad, core-bluetooth

我正在开发一个 iOS 核心蓝牙应用程序，我可以使用 iPad3 连接 BLE 设备。我可以到达街区`didDiscoverServices`，但无法从这里继续。

我的问题是；

1.  如何从蓝牙设备读取特征？
2.  如何读取蓝牙设备的其他信息？

帮助我或提供任何建议。

感谢威廉森的回复。

我从提到的块中得到了以下信息：

```
[0] - Service : <CBConcreteService: 0x1769a0> UUID: Generic Attribute Profile
[1] - Service : <CBConcreteService: 0x174470> UUID: Generic Access Profile
[2] - Service : <CBConcreteService: 0x1744e0> UUID: Unknown (<00005301 00000041 4c505749 53450000>)

Characteristic

[0] - Characteristic : <CBConcreteCharacteristic: 0x15d410> UUID: Service Changed

[0] - Characteristic : <CBConcreteCharacteristic: 0x1805b0> UUID: Device Name
[1] - Characteristic : <CBConcreteCharacteristic: 0x1806a0> UUID: Appearence

[0] - Characteristic : <CBConcreteCharacteristic: 0x183810> UUID: Unknown (<00004301 00000041 4c505749 53450000>)
[1] - Characteristic : <CBConcreteCharacteristic: 0x1838a0> UUID: Unknown (<00004302 00000041 4c505749 53450000>) 
```

现在如何从 didUpdateValueForCharacteristic 块中的这个特性中获取确切的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-21T23:02:11.877

好好阅读一下这个框架。如果你已经走到这一步，你应该没有任何问题找到“discoverCharacteristics”和外围委托回调“didDiscoverCharacteristic”。您需要知道要发现的服务和特征的 UUID 并将其应用于这些方法。

然后您可以使用“readValueForCharacteristic”和委托回调“didUpdateValueForCharacteristic”进行阅读。

这是从我的手机发送的，所以当我使用电脑时，我可能会稍微编辑一下。希望能帮助到你

新问题：

```
[connectedPeripheral readValueForCharacteristic:wantedCharacteristic] 
```

在外围代表处

```
- (void) peripheral:(CBPeripheral *)peripheral didUpdateValueForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error{

NSLog(@"Characteristic value : %@ with ID %@", characteristic.value, characteristic.UUID);
[delegate characteristicValueRead:characteristic.value];
} 
```

为我工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-09T05:01:05.560

你可以获得一个特征的价值

```
 NSString *value = [[NSString alloc] initWithData:characteristic.value encoding:NSUTF8StringEncoding];

NSLog(@"Value %@",value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T09:11:46.347

只需使用 [https://github.com/LGBluetooth/LGBluetooth](https://github.com/LGBluetooth/LGBluetooth)

```
 [LGUtils readDataFromCharactUUID:@"f045"
                          seriveUUID:@"5ec0"
                          peripheral:peripheral
                          completion:^(NSData *data, NSError *error) {
                              NSLog(@"Data : %s Error : %@", (char *)[data bytes], error);
                          }]; 
```

# php - 如何更新 zen 购物车中的 ez pages 元名称？

> ID：11540813
> 
> 赞同：0
> 
> 时间：2012-07-18T11:57:26.183
> 
> 标签：php, zen-cart, zen

我正在从 zen 购物车的 EZ 页面创建新页面，并且有一些默认的 mata 名称，例如

```
<meta name="keywords" content="Contact Us page of ABC company.LTD">
<meta name="description" content="Contact Us page of ABC company.LTD"> 
```

所以我想更新它。

请建议我如何更新它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:25:38.553

最简单的方法是安装Zen Cart 网站上可用的[插件。](http://www.zen-cart.com/downloads.php?do=file&id=746)

你总是可以用艰难的方式来做——编辑你的 include/languages/YOUR_LANGUAGE/meta_tags.php 并更改 EZ-Page 代码：

```
 define('META_TAG_DESCRIPTION_EZPAGE_#','');
  define('META_TAG_KEYWORDS_EZPAGE_#','');
  define('META_TAG_TITLE_EZPAGE_#', ''); 
```

类似于：

```
 define('META_TAG_DESCRIPTION_EZPAGE_1','My EZ-Page description');
  define('META_TAG_KEYWORDS_EZPAGE_1','some keywords go here');
  define('META_TAG_TITLE_EZPAGE_1', 'This is the page title'); 
```

并为每个 EZ-Page 单独执行此操作。当然，该插件是一个更简单的解决方案，因为它为您提供了来自管理员的用户友好控制。不要忘记在安装之前阅读插件的说明并备份您的网站！

# linux - 如何更改我的 git 的语言？

> ID：11540815
> 
> 赞同：27
> 
> 时间：2012-07-18T11:57:31.053
> 
> 标签：linux, git, command-line, terminal

我的 ˋgitˋ 是德语的，上面写着：

ˋ奥夫茨威格大师ˋ

代替

`On branch master`

与`git status`.

这是什么原因？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-18T12:00:47.323

可能您的语言环境是德语。您可以通过`locale`. 尝试通过以下方式更改它：`export LANG="en_US.UTF-8"`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-18T12:00:10.693

原因是您的命令行语言设置为德语。所以当你这样做时：

```
echo $LANG 
```

你会看见：

```
de_DE.UTF-8 
```

要改变这一点，请执行以下操作：

```
echo "export LANG=en_US.UTF-8" >> ~/.bashrc 
```

假设您的标准外壳是 bash。

不要忘记：

```
source ~/.bashrc 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-05-09T11:56:01.837

有时仅更改`LANG`环境变量是不够的。

您可能还需要添加`LC_ALL`

```
export LC_ALL=en_US.UTF-8 
```

根据[IEEE 和 The Open Group - Environment Variables](http://pubs.opengroup.org/onlinepubs/9699919799/)。

这是因为开始的环境变量`LC_*`将**首先**由您的系统使用`LANG`：

> **语言环境类别的值应由优先顺序确定**；下面满足的第一个条件确定值：
> 
> 1.  如果定义了 LC_ALL 环境变量并且不为空，则应使用 LC_ALL 的值。
>     
>     
> 2.  如果定义了 LC_* 环境变量（LC_COLLATE、LC_CTYPE、LC_MESSAGES、LC_MONETARY、LC_NUMERIC、LC_TIME）且不为空，则应使用环境变量的值来初始化与环境变量对应的类别。
>     
>     
> 3.  如果 LANG 环境变量已定义且不为空，则应使用 LANG 环境变量的值。
>     
>     
> 4.  如果 LANG 环境变量未设置或设置为空字符串，则应使用实现定义的默认语言环境。

要永久更改它，您需要将上面的代码粘贴到您喜欢的 shell 配置文件中（可能是`~/.bashrc`或`~/.zshrc`）

然后应用修改：

```
$ source ~/.bashrc 
```

或者

```
$ source ~/.zshrc 
```

否则，只需打开一个新终端。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-03-13T10:34:05.333

就我而言，设置`LANG`还是`LC_ALL`不够的。我还有一个`LANGUAGE`环境变量设置为`en_GB:en_US:de`. `git`尽管排序可能是一种偏好顺序，但它导致了来自其他命令行程序的德语响应。当我把它改成 时`en_GB:en_US`，`git`其他程序都变成了英文。

# c# - 如何找到可在 VS2008 中抛出的异常名称（智能感知）

> ID：11540823
> 
> 赞同：4
> 
> 时间：2012-07-18T11:58:06.297
> 
> 标签：c#, visual-studio-2008, exception, intellisense

我对 C# 感到非常沮丧的一件事是当我发现一些问题并且我想抛出一个**有意义的**异常时。我发现很难在智能感知中找到这些例外。没有异常命名空间，因此我无法通过智能感知列出所有异常，而无需四处寻找异常。

我**不想**创建自己的异常，我只是想看看除了谷歌搜索异常以找到它的命名空间之外是否还有其他选项，以便我可以使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T12:02:16.880

在大多数情况下，这是不好的做法。您应该重用少数几个异常（InvalidOperation、NullReference、ArgumentException 等）。但是，例如，您不应该`SqlException`自暴自弃——因为您不知道框架会用它做什么。

创建您自己的异常层次结构会在出现错误时为您的应用程序增加意义。重用已经理解的异常会导致混乱——*失去*意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:58:53.997

您可以在对象浏览器中浏览整个异常类树。查找 System.Exception，然后单击派生类型。不是 100% 确定它们是否都在那里，但它们中的大多数肯定在那里。System.Exception -> 派生类型（也在 System.Excecption 树的根目录中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:15:13.927

您可以在 MSDN 中找到一些例外情况，请[点击此处](http://msdn.microsoft.com/en-us/library/z4c5tckx.aspx)。通常，这些是您倾向于抛出的异常，并且在许多情况下，您将从这些异常中派生出您自己的异常。然而，一个方法抛出太多不同的异常通常是不被接受的。
另外，回想一下[`<exception>`](http://msdn.microsoft.com/en-us/library/w1htk11d.aspx)xml 文档标记。使用这个标签对启发用户你的方法抛出哪些异常以及何时抛出有很大帮助。就清晰度而言，它可能比抛出特定类的异常更重要。

# git - 使用 git rebase -i 更改先前提交的代码

> ID：11540824
> 
> 赞同：4
> 
> 时间：2012-07-18T11:58:11.830
> 
> 标签：git, rebase, git-amend

我有一个包含各种提交的存储库，我想将它们合并到两个补丁中。一个补丁介绍了该功能，另一个补丁更改了现有代码以使用它。问题是，当我在编码和提交时，我并没有考虑到这一点，所以有些提交两者都做。如何拆分这些提交？

我知道我可以以某种方式使用 git rebase -i 并为我想更改的每个提交选择编辑，但是这样我只能更改提交消息，而不是代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:30:29.477

Git[`rebase`](http://git-scm.com/docs/git-rebase)允许你[拆分提交](http://git-scm.com/docs/git-rebase#_splitting_commits)：

> 在交互模式下，您可以使用“编辑”操作标记提交。但是，这并不一定意味着 git rebase 期望此编辑的结果恰好是一次提交。实际上，您可以撤消提交，也可以添加其他提交。这可用于将提交分成两部分：
> 
> *   使用 git rebase -i ^ 启动交互式 rebase，您要拆分的提交在哪里。事实上，任何提交范围都可以，只要它包含该提交。
>     
>     
> *   使用“编辑”操作标记要拆分的提交。
>     
>     
> *   在编辑该提交时，执行 git reset HEAD^。效果是 HEAD 倒带一，索引也随之而来。但是，工作树保持不变。
>     
>     
> *   现在将更改添加到您希望在第一次提交中拥有的索引。您可以使用 git add （可能以交互方式）或 git gui （或两者）来做到这一点。
>     
>     
> *   使用现在合适的任何提交消息提交当前索引。
>     
>     
> *   重复最后两个步骤，直到您的工作树干净为止。
>     
>     
> *   使用 git rebase --continue 继续 rebase。
>     
>     
> 
> 如果您不确定中间版本是否一致（它们可以编译、通过测试套件等），您应该使用 git stash 在每次提交后隐藏尚未提交的更改，测试并修改提交（如果修复）是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:16:32.997

这是我要做的：

```
git reset COMMIT_BEFORE_CHANGES --soft 
```

并在适当的提交中重新提交所有内容。`--soft`将使您的工作树和索引保持在重置之前的状态。

不用说，在有人离开你之后，你不应该做这样的事情。

# php - 拆分分类列基础类别、品牌和设计师

> ID：11540825
> 
> 赞同：0
> 
> 时间：2012-07-18T11:58:17.197
> 
> 标签：php, mysql, arrays

```
<?php
while($row2 = mysql_fetch_array($result)){

$object_id = $row2['object_id'];
$sql ="select term_taxonomy_id from wp_term_relationships where object_id =
$object_id";
$results = mysql_query($sql);

while($row3 = mysql_fetch_array($results)){

    $term_taxonomy_id1[] = $row3['term_taxonomy_id']."<br/>";

  }

}
print_r($term_taxonomy_id1);
?> 
```

使用上述代码后，我在数组中获取了 term_taxonomy_id

```
 Array (
    [0] => 249
    [1] => 250
    [2] => 251
    [3] => 252
    [4] => 250
    [5] => 251
    [6] => 254
    ) 
```

我想获取 term_id（基于类别、品牌和设计师中的拆分分类列）

这是表结构

表：wp_term_taxonomy

![在此处输入图像描述](../Images/8171b3ed4f68cc9d06a97037d558db4f.png)

我需要这样的输出

```
 Array
    (
    [category] => Array
      (
      [0] => 177
      [1] => 179
      )
    [brand] => Array
      (
      [0] => 176
      )
    [designer] => Array
      (
      [0] => 175
      [1] => 180
      )
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:43:51.730

我不确定我是否做对了，因为我不了解对**term_taxonomy_id**的需求，但是如果它可以帮助您：

```
$data=array();
while($row3=mysql_fetch_assoc($result)){
  $taxonomy=$row3['taxonomy'];
  $sql2="select term_id from wp_term_relationships where taxonomy=$taxonomy";
  $res=mysql_query($sql2);
  while($row4=mysql_fetch_assoc($res)){
    $tab[]=$row4['term_id'];
  }
  $data[$taxonomy]=$tab;
} 
```

这不是最好的，您仍然可以使用 JOIN 过程来提高性能，但它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:30:50.777

```
<?php
while($row2 = mysql_fetch_array($result)){

      $object_id = $row2['object_id'];

      $sql ="select term.term_taxonomy_id,wp.term_id from wp_term_relationships as term  inner join wp_term_taxonomy as wp ON term.term_taxonomy_id=wp.term_taxonomy_id where object_id = $object_id";

      $results = mysql_query($sql);

      $i=0;
     while($row3 = mysql_fetch_array($results)){
         $term_taxonomy_id1[$i] = $row3['term_taxonomy_id'];

         $res_term_id[$i] = $row3['term_id'];

       }
} 
```

# spring - 当我使用“\*”作为 DispatcherServlet 的 url 模式时设置 Web 应用程序

> ID：11540829
> 
> 赞同：0
> 
> 时间：2012-07-18T11:58:28.580
> 
> 标签：spring, servlets, spring-mvc

我映射`DispatcherServlet`如下

```
<servlet>
    <servlet-name>ems</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>ems</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping> 
```

因此，根据 url，它会处理每个请求。但是，当我像这样映射 ViewResolver

```
<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>      
        <property name="prefix" value="/WEB-INF/jsps/"/>
        <property name="suffix" value=".jsp"></property>
    </bean> 
```

并且控制器返回“home”作为视图名称。然后我得到

```
[PageNotFound] No mapping found for HTTP request with URI [/ems/WEB-INF/jsps/home.jsp] in DispatcherServlet with name 'ems' 
```

由于这个 InternalResourceViewResolver 使用 RequestDispacher，它将是另一个请求，并且该请求再次被`DispatcherServlet`再次处理。

我们如何解决这个问题？当我们使用`<url-pattern>/*</url-pattern>`. 可能是一个愚蠢的问题，但是当我使用`<url-pattern>/*</url-pattern>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:00:40.150

对 URL 映射使用“/*”意味着绝对每个发送到该应用程序的请求都必须通过`DispatcherServlet`，因此您需要所有这些请求的映射。

如果这不可接受，请找到一种方法来创建一个应该通过的子集，`DispatcherSerlet`并让其余的由 HTTP 服务器处理。

# sql - 如何为每个 id 创建一个身份

> ID：11540830
> 
> 赞同：0
> 
> 时间：2012-07-18T11:58:30.600
> 
> 标签：sql, sql-server, sql-server-2000

是否可以在 sql 2000 中创建复合键

```
code    id
abc      1
abc      2
abc      3
def      1
def      2
ghi      1 
```

其中 id 在每次更改代码时重新开始计数。我需要通过创建表或其他 SELECT 语句技巧来使编号完全相同。

如何在 sql server 2000 中执行此操作

需要查询帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:32:22.003

这是在运行时检索此数据的一种方法，而不必将其实际存储在表中，尝试和维护起来非常麻烦。我在这里使用#temp 表，但您可以假装`#a`是您的永久表。照原样，这将支持多达 256 个重复项。如果需要更多，可以调整。

```
CREATE TABLE #a(code VARCHAR(32));

INSERT #a SELECT 'abc'
UNION ALL SELECT 'abc'
UNION ALL SELECT 'abc'
UNION ALL SELECT 'def'
UNION ALL SELECT 'def'
UNION ALL SELECT 'ghi';
GO

SELECT x.code, id = y.number FROM 
(
  SELECT code, maxid = COUNT(*) FROM #a GROUP BY code
) AS x
CROSS JOIN 
(
  SELECT DISTINCT number FROM master..spt_values
  WHERE number BETWEEN 1 AND 256
) AS y
WHERE x.maxid >= y.number;

DROP TABLE #a; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:04:15.017

你可以试试这个

```
INSERT INTO TABLENAME (code, id) VALUES( 'code',
(Select ISNULL(MAX(id), 0) FROM TableName where code = 'code')+1) 
```

# android - Eclipse 无法识别 Android 支持库修订版 9

> ID：11540832
> 
> 赞同：5
> 
> 时间：2012-07-18T11:58:46.090
> 
> 标签：android, eclipse, eclipse-plugin

我最近为我的 eclipse/Android 插件下载了所有最新更新（在升级之前一切正常）。我得到了一切工作，除了当我尝试创建一个新项目时，我收到一条我需要的消息`Android support library revision 8`。我单击安装/升级，然后继续下载并安装库。当它完成时，微小的下载/安装窗口消失，但通知我需要的窗口`Android support library revision 8`保持打开状态，我无法单击完成创建新项目。我尝试关闭窗口并 Eclipse 并再次尝试，但它总是将我引导到显示我需要`Android support library revision 8`. 我没有将日食移动到任何其他位置，我想知道出了什么问题。

我之前`!`在我的 Eclipse 路径中遇到了一个问题，并且由于退出错误 13，Eclipse 无法工作。我之前发布了一个关于它的[问题。](https://stackoverflow.com/questions/6166795/eclipse-crushes-at-startup-exit-code-13)我的回答解释了发生的事情和简单的解决方法。

我想知道现在出了什么问题。我需要手动链接支持库吗？我真的很沮丧，因为它需要我永远进行设置。

**更新：** 我尝试重新启动 eclipse 并多次重新安装库。

在安装支持库之前，我升级了 android sdk 工具和 sdk 平台工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:08:54.460

就像我两天前遇到的这些类似问题一样。无论何时，我都在尝试创建一个新项目，如下所示

![图片](../Images/0243b972775e8349e1fd55ecc13fd007.png)

因为，我已经下载了该`support`库，`Install/Upgrade`并且在我的路径中`E:/Android/Android-Sdk/extras/android/compaitability`我已经更改了`compaitability`as的名称，`support`并且在重新启动我的 Eclipse 之后。它工作正常。

希望这些对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:02:44.833

尝试更新 android sdk 工具和 sdk 平台工具并重新启动 eclipse？ADT 依赖于这些。

# symfony-sonata - 如何将 SonataUserBundle 用户列表添加到管理仪表板 (SonataAdminBundle)？

> ID：11540841
> 
> 赞同：1
> 
> 时间：2012-07-18T11:59:23.480
> 
> 标签：symfony-sonata, sonata-admin

## 如何将用户添加到管理仪表板？

我的应用程序：

*   Symfony 2.0.16
*   FOSUserBundle 1.2.x
*   SonataAdminBundle
*   奏鸣曲媒体包
*   SonataPageBundle
*   SonataUserBundle

我已按照 sonata-project.org 中的说明进行操作，没有收到任何错误，但我的管理仪表板是空的！我想管理我的用户和组。

我不知道这是否相关，但奏鸣曲被添加到内核中：

> 新 SonataUserBundle('FOSUserBundle')

如何将用户和组的 CRUD 添加到我的管理仪表板？

如果您想查看我的配置，请告诉我哪个部分。我没有发布我所有的配置，因为有很多代码行，我想让这个问题保持干净。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T10:38:15.113

这个配置对我很有效

```
 sonata_admin:
...
        dashboard:

...
            groups:
...    
                user:
                    label: Users management
                    items:
                        - sonata.user.admin.user
                        - sonata.user.admin.group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T17:01:28.870

似乎许多部分的文档都已过时或有错字。

删除组

```
sonata_admin:
    dashbpard:
        groups:
            default: ~ 
```

来自配置的伎俩。

# ios - Getting UiImage from CgContextRef and pass it to another ViewController

> ID：11540847
> 
> 赞同：0
> 
> 时间：2012-07-18T11:59:43.050
> 
> 标签：ios, uiimageview, uiimage, core-graphics, quartz-2d

I want to get the UIImage out of CGContextRef, and show it on UIImageView in a different UIViewController

So for this, I have written this code, I m writing this code, when I close my drawingview, because I have made my drawing view as a subview of UIViewController

//mydrawingView.m

```
- (void)closeButtonClicked
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO,0.0);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    m_curImage = UIGraphicsGetImageFromCurrentImageContext();  
    UIGraphicsEndImageContext();

    ViewController *table = [[ViewController alloc] init];
    [table setImage:m_curImage]; 
    [table viewDidLoad];
} 
```

///myViewController.h

```
@interface ViewController : UIViewController
{   
    IBOutlet UIImageView *m_imageView;
    UIImage *image;

} 
```

@property(nonatomic, strong) UIImage *image;

///myViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];    

    m_imageView.image = image; 

    NSLog(@"%@", m_imageView.image);
} 
```

But I am not able to show this image on UIImageview,

Regards Ranjit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:33:38.573

I have sorted out the answer for this question, to get the image out of the canvas , the above code applies and to show it on a imageView of anotherViewController, we have to implement delegate protocol method.

Regards Ranjit

# .net-4.0 - PInvoke 适用于 Windows 7，但在 Windows XP 中失败

> ID：11540849
> 
> 赞同：1
> 
> 时间：2012-07-18T11:59:50.690
> 
> 标签：.net-4.0, pinvoke, windows-xp-sp3

我有一个使用第三方本机 C dll 的应用程序。在具有 .Net 4 的 Windows 7 机器上一切正常，但在具有 .Net 4 的 Windows XP (SP3) 上失败。

我在 Windows XP 机器上得到以下异常。

未处理的异常：System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

当我调试时，

CacheInteropTest.exe 中 0x10069e1d 处的第一次机会异常：0xC0000005：访问冲突读取位置 0x00000000。

这是我的简化测试应用程序代码：

```
public unsafe class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        var status = CacheEnd();
        Console.ReadKey(true);
    }

    [SuppressUnmanagedCodeSecurity]
    [DllImport("cachet.dll", EntryPoint = "#24", CallingConvention = CallingConvention.Cdecl, SetLastError = true)]
    internal extern static int CacheEnd();
} 
```

我在 Windows XP (SP3) 32 位上编译了上述程序并复制到 Windows 7 机器上运行，它没有给出任何异常。第三方 dll 与可执行文件位于同一文件夹中。

我发现了很多与 AccessViolationException 相关的问题的回复，尤其是
[P/Invoke 调用](https://stackoverflow.com/questions/11272256/accessviolationexception-in-p-invoke-call)中的这个 AccessViolationException 非常匹配。[另一个站点在这里http://dotnetdebug.ne](http://dotnetdebug.net/2006/04/17/pinvoke-and-memory-related-issues/) ​​t/2006/04/17/pinvoke-and-memory-related-issues/ 对 PInvoke 和内存相关问题进行了概述， 但在这种情况下对我没有帮助。

第三方 dll 是一个数据库内核，提供多线程数据库访问（每个线程保持一个连接）。在 API 的文档中提到该 dll 必须是静态链接的，并且在 Windows XP 上使用该 dll 的 C++ 应用程序也可以正常工作。

我认为问题在于本机 dll 的实现，但为什么它在 Windows 7 上运行良好？

任何人都知道在 Windows XP 上可能会出现什么问题？

供应商提供的原生函数原型是

```
extern  int  CFPROTOD(CacheEnd,(void)); 
```

所以我猜这个问题与调用约定无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T09:21:11.667

问题是由于 Windows 中的限制。API 的静态链接要求来自供应商已经知道的这个限制。 [http://support.microsoft.com/kb/118816](http://support.microsoft.com/kb/118816)解释了 Windows 中的问题。看起来这已在 Win 7 中修复

# c# - Intellisense 告诉我更新面板的 UpdateMode 属性需要设置为 Conditional，即使它是

> ID：11540850
> 
> 赞同：1
> 
> 时间：2012-07-18T11:59:52.843
> 
> 标签：c#, asp.net, ajax

我有一个 ASP.Net 更新面板，其中包含我试图从代码隐藏文件更新的控件，方法是将控件的值设置为我想要的任何值，然后调用`Update()`UpdatePanel 的方法。

我知道要调用 Update() 方法，我需要将 UpdateMode 属性设置为有条件的，所以这就是我所做的，但无论如何我都会收到以下错误：

> 当 UpdateMode 设置为 Conditional 时，只能在 ID 为“UpdatePanel1”的 UpdatePanel 上调用 Update 方法。

我的属性框如下所示：

![特性](../Images/88e38a1b8dee70b35ccd4e88b458dfc7.png)

我的代码如下所示：

```
using System;
using System.Timers;

namespace WebApplication2
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var myTimer = new System.Timers.Timer();
            myTimer.Interval = 1000;

            myTimer.Elapsed += new ElapsedEventHandler(myTimer_Elapsed);

            myTimer.Start();
        }

        void myTimer_Elapsed(object sender, ElapsedEventArgs e)
        {
            var newGUID = Guid.NewGuid().ToString();
            Label1.Text = newGUID;
            UpdatePanel1.Update();
        }
    }
} 
```

我的表格如下所示：

![我的 ASPX 表格](../Images/a2c9292a53b84e9b5af7bc3806ca2a9c.png)

我的标记如下：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication2.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <style type="text/css">
        #form1
        {
            text-align: center;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" style="text-align: center" Text="Label"></asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

为什么这不起作用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:41:17.980

我建议您查看[以下教程](http://msdn.microsoft.com/en-us/library/cc295400.aspx)。使用的 Timer 控件是 a`System.Web.UI.Timer`而不是 a`System.Timers.Timer`在您的代码中。此外，计时器必须放在更新面板内，以便在触发`OnTick`事件时触发 AJAX 调用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@ Page Language="C#" %>
<html dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
    <script runat="server" type="text/c#">
    protected void Timer1_Tick(object sender, EventArgs e)
    {
        Label1.Text = "Panel refreshed at: " + DateTime.Now.ToLongTimeString();
    }
</script>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager runat="server" id="ScriptManager1" />

        <asp:UpdatePanel runat="server" id="UpdatePanel1">
        <ContentTemplate>
            <asp:Timer runat="server" id="Timer1" Interval="1000" OnTick="Timer1_Tick" />
            <asp:Label runat="server" Text="Page not refreshed yet." id="Label1" />
        </ContentTemplate>
        </asp:UpdatePanel>

        <asp:Label runat="server" Text="Label" id="Label2"></asp:Label>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:27:14.910

以模式查看页面`Designer`并重命名它，保存，你应该很高兴。这很可能是 VS 的缓存问题，切换设计器模式会强制控件以“设计”模式呈现，因此它应该更新幕后代码以清除错误。

# html - -webkit-动画错误

> ID：11540852
> 
> 赞同：0
> 
> 时间：2012-07-18T11:59:55.357
> 
> 标签：html, css, webkit, css-animations

我一直在设计一个网页，它有一个特定宽度的容器，里面包含浮动的 div。我在这些上有一个 webkit 动画，它与悬停相关，但是当你漂浮在一行的最后一个 div 上时，它似乎无缘无故地在下一个 div 上添加了空格。我在 Firefox 中尝试了这个，它工作正常，所以似乎是一个 webkit 错误 - 它在 Safari 和 Chrome 中都显示。这是我的小提琴：http: [//jsfiddle.net/J292V/1/](http://jsfiddle.net/J292V/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:33:45.220

通过将 div 从 float:left 更改为 display:inline-block 并在动画上定义 to 和 from 来管理它。以上绝对是一个错误，但这里是解决方法：http: [//jsfiddle.net/J292V/3/](http://jsfiddle.net/J292V/3/)

# shell - awk 命令转到包含单词的文件中的特定行

> ID：11540853
> 
> 赞同：0
> 
> 时间：2012-07-18T11:59:58.563
> 
> 标签：shell, awk

我正在编写一个 awk 脚本，我想在文件中搜索一些字符串。我面临的问题是......

从某种意义上说，该文件非常庞大。大约 100 万行。

如果我搜索文件最后一行存在的字符串，那么我不必要地遍历了开头行的其余部分，因此我正在寻找一些命令，当我将字符串作为参数时，它应该给我文件的行号..或者我想对文件进行二进制搜索，任何关于此的重定向。

只是附加说明，字符串不是单个字符串，我有多个字符串要在一个时间点搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:02:30.523

无论您做什么，如果数据在文件中，则必须先将其读入内存，然后才能进行任何处理（无论效率如何）、排序、搜索等。

您是内存不足，还是担心时间？如果内存不是问题，那么如今 100 万条记录似乎并没有那么大。

如果您只想确定数据文件中是否存在某个字符串，您可以尝试使用`grep`. 例如，

```
 grep -n target_string data.txt 
```

如果在文件中找到目标，将打印行和行号。[有关grep 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)的更多信息。

如果您想定位然后*处理*文件中的一行，那么`grep`将无法正常工作，您必须使用`awk`（如您所提到的），或者查看`sed`或用 Python 或其他语言编写自定义脚本。在所有情况下，都必须以一种或另一种方式读取文件。

也许将文件分成块然后处理特定部分（如果您可以提前确定要搜索的位置 - 尽管从您的问题听起来不太可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:14:37.323

你有一百万行，但文件有多大？100 万行 1 个字符的文件大小约为 1MB，这很小，而且在时间方面不会花时间来解析。80 个字符/行给出的文件大小为 76MB，这将比 1 个字符/行文件花费更多的时间来读取，但对于简单的查找来说，时间不会很可怕。

如果您正在查看许多兆字节，那么您需要读取文件一次并为其创建索引，但是如果这是一次性或罕见的任务，则创建此类索引所花费的时间不会超过成本使用`grep`或直接对文件进行搜索`awk`。

同样，如果您需要对不断变化的文件执行此操作，那么再次拥有索引不会给您带来太多好处，因为索引将过时并且您需要刷新索引（需要重新扫描整个文件）以获得准确的结果。

我们需要更多关于总体问题的详细信息，因为听起来还有一些其他的不清楚的要求：您多久进行一次此搜索？文件的静态程度如何？你如何处理结果？简而言之，您这样做是为了什么需求/应用？

也就是说，如果您想创建索引，那么只需逐行读取文件，在空白处拆分，然后将单词与行一起存储在某个数据存储区（SQLite 数据库？BDB 数据库？）它出现在，然后直接查询该商店。希望您可以看到初始生成非常昂贵，因此仅当文件是静态的并且您正在对文件进行多次搜索时才值得这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:10:34.357

您提到对文件进行二进制搜索，因此我们可以假设您的输入已排序，并且您要查找的字符串锚定到行首。要进行二分搜索，有一个名为 的实用程序`look`，但它不报告行号。要获取行号，只需将行号附加到输入：

```
# Append line numbers to each line
$ awk '{print $0, NR}' input > tmp   

# Do a binary search, looking for the string 'string'
$ look string tmp 
```

`look`并且`seq`不是标准实用程序，因此可能无法在您的平台上使用。

# python - 文件作为 argparse 的命令行参数 - 如果参数无效，则会出现错误消息

> ID：11540854
> 
> 赞同：69
> 
> 时间：2012-07-18T11:59:59.160
> 
> 标签：python, argparse

我目前正在使用这样的 argparse：

```
import argparse
from argparse import ArgumentParser

parser = ArgumentParser(description="ikjMatrix multiplication")
parser.add_argument("-i", dest="filename", required=True,
    help="input file with two matrices", metavar="FILE")
args = parser.parse_args()

A, B = read(args.filename)
C = ikjMatrixProduct(A, B)
printMatrix(C) 
```

现在我想指出，参数`-i`应该是一个可读文件。我怎样才能做到这一点？

我尝试添加`type=open`，`type=argparse.FileType('r')`并且它们有效，但如果文件无效，我想收到一条错误消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-07-18T12:33:00.327

其实很容易。您只需要编写一个函数来检查文件是否有效，否则会写入错误。将该功能与`type`选项一起使用。请注意，您可以通过子类化来获得更多幻想并创建自定义操作`argparse.Action`，但我认为这里没有必要。在我的示例中，我返回一个打开的文件句柄（见下文）：

```
#!/usr/bin/env python

from argparse import ArgumentParser
import os.path

def is_valid_file(parser, arg):
    if not os.path.exists(arg):
        parser.error("The file %s does not exist!" % arg)
    else:
        return open(arg, 'r')  # return an open file handle

parser = ArgumentParser(description="ikjMatrix multiplication")
parser.add_argument("-i", dest="filename", required=True,
                    help="input file with two matrices", metavar="FILE",
                    type=lambda x: is_valid_file(parser, x))
args = parser.parse_args()

A, B = read(args.filename)
C = ikjMatrixProduct(A, B)
printMatrix(C) 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2016-03-02T01:29:19.313

在 Python 3.4 中执行此操作的一种方法是使用[`argparse.FileType`](https://docs.python.org/3/library/argparse.html#argparse.FileType)该类。完成后确保关闭输入流。这也很有用，因为您可以为 STDIN/STDOUT 使用伪参数`'-'`。从文档中：

> FileType 对象理解伪参数`'-'`并自动将其转换`sys.stdin`为可读[`FileType`](https://docs.python.org/3/library/argparse.html#argparse.FileType)对象和`sys.stdout`可写[`FileType`](https://docs.python.org/3/library/argparse.html#argparse.FileType)对象

例子：

```
#!/usr/bin/env python3

import argparse

if __name__ == '__main__':
  parser = argparse.ArgumentParser()
  parser.add_argument('--infile', type=argparse.FileType('r', encoding='UTF-8'), 
                      required=True)
  args = parser.parse_args()
  print(args)
  args.infile.close() 
```

然后跑的时候...

*   没有论据：

    ```
    $ ./stack_overflow.py
    usage: stack_overflow.py [-h] --infile INFILE
    stack_overflow.py: error: the following arguments are required: --infile 
    ```

*   使用不存在的文件：

    ```
    $ ./stack_overflow.py --infile notme
    usage: stack_overflow.py [-h] --infile INFILE
    stack_overflow.py: error: argument --infile: can't open 'notme': [Errno 2] No such file or directory: 'notme' 
    ```

*   使用现有文件：

    ```
    $ ./stack_overflow.py --infile ./stack_overflow.py
    Namespace(infile=<_io.TextIOWrapper name='./stack_overflow.py' mode='r' encoding='UTF-8'>) 
    ```

*   用于`'-'`标准输入：

    ```
    $ echo 'hello' | ./stack_overflow.py --infile -
    Namespace(infile=<_io.TextIOWrapper name='<stdin>' mode='r' encoding='UTF-8'>) 
    ```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-18T12:34:58.757

我刚刚找到了这个：

```
def extant_file(x):
    """
    'Type' for argparse - checks that file exists but does not open.
    """
    if not os.path.exists(x):
        # Argparse uses the ArgumentTypeError to give a rejection message like:
        # error: argument input: x does not exist
        raise argparse.ArgumentTypeError("{0} does not exist".format(x))
    return x

if __name__ == "__main__":
    import argparse, sys, os
    from argparse import ArgumentParser

    parser = ArgumentParser(description="ikjMatrix multiplication")
    parser.add_argument("-i", "--input",
        dest="filename", required=True, type=extant_file,
        help="input file with two matrices", metavar="FILE")
    args = parser.parse_args()

    A, B = read(args.filename)
    C = ikjMatrixProduct(A, B)
    printMatrix(C, args.output) 
```

来源：[fhcrc.github.com](http://fhcrc.github.com/nestly/_modules/nestly/scripts/nestrun.html)

# javascript - 在 Extjs 中获取自定义字段容器内的文本字段值

> ID：11540855
> 
> 赞同：2
> 
> 时间：2012-07-18T12:00:00.087
> 
> 标签：javascript, extjs, extjs4.1

我正在使用 extjs 4.1 并创建了一个带有 xtype:ptextfield 的自定义字段容器，它是通过扩展具有项目 img 和 textfield 的“FieldContainer”创建的，我想要的是从**ptextfield访问****textfield 值**，即**fieldcontainer**。

 ****```
Ext.onReady(function () {

    Ext.define('PTextField', {
        extend: 'Ext.form.FieldContainer',
        alias: 'widget.ptextfield',
        requires: ['Ext.form.TextField', 'Ext.Component'],
        alias: 'widget.ptextfield',
        height: 20,
        width: 170,
        fieldLabel: 'A',
        labelAlign: 'top',
        layout: {
            type: 'hbox'
        },
        BLANK_IMAGE_URL: '',

        initComponent: function () {
            var me = this;
            Ext.applyIf(me, {
                items: [{
                    xtype: 'component',
                    height: 20,
                    width: 20,
                    autoEl: {
                        tag: 'img',
                        src: Ext.BLANK_IMAGE_URL
                    }
                }, {
                    xtype: 'textfield',
                    itemId: 'textid',
                    width: 100
                }]
            });
            this.callParent(arguments);
        }
    });

    Ext.create('Ext.window.Window', {
        title: 'Hello',
        height: 400,
        width: 400,
        //layout: 'fit',
        items: [{
            xtype: 'ptextfield',
            fieldLabel: 'First Name',
            id: 'pcontainer1',
            listeners: {
                change: {
                    element: 'el', //bind to the underlying el property
                    fn: function () {
                        var me = this;
                        Ext.Ajax.request({
                            waitMsg: 'Saving changes...',
                            url: '/Home/SaveChanges',
                            jsonData: {
                                id: this.id,
                                value: this.down('#textid').getRawValue()
                            },
                            failure: function (response, options) {
                                Ext.MessageBox.alert('Warning', 'Oops...');
                            },
                            success: function (response, options) {
                                var text = response.responseText;
                                // process server response here
                                console.log('Changes saved successfully.');
                            }
                        });
                    }
                }
            }
        }, {
            xtype: 'ptextfield',
            fieldLabel: 'Last Name',
            id: 'pcontainer2'
        }]
    }).show();
}); 
```

在下面的行中，我在“this”中得到“ptextfield”字段容器，“this.id”给了我“pcontainer1”，但我无法弄清楚如何获取位于“ ptextfield”字段容器。

我在以下行收到错误： jsonData: { id: this.id, value: this.down('#textid').getRawValue() }

错误是 - this.down('#textid') is null (firebug) (chrome) Uncaught TypeError: Cannot call method'getRawValue' of null Ext.create.items.listeners.change.fn（匿名函数）Ext.apply。 createListenerWrap.wrap

应该在哪里`"this.down(#textid').getRawValue()"`给我`textfield value`，我没有得到我无法遍历。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:39:50.857

为什么要监听容器的 html 元素的 change 事件？而不是说文本字段？

这种方式对你来说可能更简单：

把它放在 ptextfield 上：

```
listeners: {
                render: function(component) {
                    component.down('textfield').on('change', function() {
                        console.log(this, arguments);
                        // "this" is the textfield
                        // do your ajax here
                    });
                }

            } 
```****

# tcp - 自动重新连接到 TCP 主机

> ID：11540864
> 
> 赞同：5
> 
> 时间：2012-07-18T12:00:15.530
> 
> 标签：tcp, erlang, gen-server

TLDR：是否存在用于自动重新连接到有时失败的 TCP 服务器的可重用代码？

* * *

我正在编写一个服务器应用程序——称之为它`hal`——它还打开了到其他服务器的一些 TCP 连接——其中包括`xbmc`。我最初编写它是为了当`xbmc`失败时，`xbmc`erlang 进程将停止并随后由其主管重新启动。

显然，这不是在 erlang 中进行持久 TCP 连接的好方法。首先，它并没有真正起作用：当`xbmc`失败时，进程会重启得太快，主管会关闭整个`hal`程序。其次，我显然不应该为此使用主管：[Erlang Supervisor Strategy For Restarting Connections to Downed Hosts](https://stackoverflow.com/questions/2971508/erlang-supervisor-strategy-for-restarting-connections-to-downed-hosts)（当我读到它时，这个链接的问题只回答“主管解决这个问题吗？”，而不是我的问题的重复)

我认为这听起来像是一个相当常见的用例，即使主机不时出现故障，也要尽可能保持 TCP 连接的连接。我应该使用一些 OTP 或其他库代码来实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T22:41:28.153

不，OTP 中没有任何东西可以为您执行此操作。

我会说，考虑到我自己编写的次数，现在是编写一个体面的连接管理库的时候了。特别是考虑到最近的连接尝试和结果历史，可以给定一个端点地址（主机名和端口），并使用从主机名查找返回的多个地址为具有多个目标的端点执行快速故障转移。

# java - 封装 SQL 平台之间差异的策略？

> ID：11540866
> 
> 赞同：2
> 
> 时间：2012-07-18T12:00:18.420
> 
> 标签：java, sql, encapsulation, robustness

我正在这里加速一些缓慢的操作，一个案例是表中的父子关系树。目前系统运行在 SQLServer 上，经过一番研究，我发现使用通用表表达式可以将多个查询压缩为一个。

到目前为止一切都很好，但是语法是特定于 SQLServer 的，并且使用（例如）Oracle 做同样的事情需要完全不同的语法。

可以做些什么来构建系统以允许将来适应其他 RDBMS？我主要担心的是：

*   SQL 语句散布在代码中，一个 RDBMS 中的*一条*语句可能需要在另一个 RDBMS 中使用多个语句，因此甚至程序逻辑也可能需要更改。
*   即使可以很好地封装在一个 RDBMS 中的东西（我正在使用存储函数来隐藏 DB 中的一些复杂性）在不同的 DB 中也有细微的差异，或者根本不可用。

到目前为止，我觉得超出最简单 SQL 语句的所有内容似乎总是需要特定于供应商的扩展，因此不可能将差异整齐地隐藏在几个类/存储的 SQL 中（当然*可以*使用具有*大部分*抽象已经内置了。但这也排除了数据库的许多更有用的特性）。

有哪些策略可以至少*缓解*供应商差异带来的痛苦？我知道这是一个非常广泛的问题，没有万能的答案。但我希望有一些指针和模式来减少数据库对应用程序的影响。

编辑：实现语言是 Java，简单地使用 ORM（例如 Hibernate）不是我想要的（或多或少需要重写约 50% 的代码库）。

EDIT2：我主要寻找以尽可能普遍兼容的方式将细节推送到数据库中的可能性，理想情况下我希望java部分使用的SQL对于所有平台都是相同的（或者只需要非常由于语法差异而略有变化）。对于我给出的 CTE 示例，我目前将其推送到存储函数中，希望在需要移植时，该功能也可以在函数中重现。

EDIT3：目前我*没有迫切需要*支持其他 RDBM。如果它只适用于 SQLServer，没有人会责怪我。但在可能的情况下，我希望避免将 java 代码与特定的数据库供应商联系起来。

EDIT4：一些背景 - 当前的工作是向系统添加功能 - 它不是设计或计划的功能。业务人员的要求一点点滴滴出现，很难提前计划。虽然每个需求本身并不是很难解决，但恐怕我们会积累一大堆标记的东西，如果不详细了解每个查询，这些东西是不可能移植的。由于 SQLServer 本身在每个主要的新版本中也引入了各种与自身不兼容的问题，我担心即使切换到更新的 SQLServer 也可能成为未来的主要障碍（我们过去从 2005 年到 2008 年进行过一次这样的升级 - 那一次去了对于我正在维护的东西来说很顺利，但它已经给我们的供应商之一造成了许多问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:06:14.270

您没有指定您正在使用的应用程序平台。但我会假设您使用的是 .Net 或 Java。您的第一道防线是在应用程序的 SQL 语句中使用 ODBC 或 JDBC 转义序列，并将此方法无法处理的任何内容推送到存储过程中。

如果您拥有对应用程序进行更彻底重构的许可，则应考虑为您的应用程序平台切换到 ORM 库。

编辑：我看到您编辑了您的问题，澄清您正在使用 Java 并且切换到 ORM 库不是一种选择。很久以前，我正在为大型企业客户开发产品。每个客户都有自己的标准参考架构，因此我们必须适应 Oracle、Microsoft SQL Server 和 UDB/DB2。我们可能支持其他平台，但有些细节在 10 到 12 年后确实会变得模糊。我们通过对时间常数、函数和存储过程调用虔诚地使用 JDBC 转义以及将更敏感的操作推送到特定于数据库的存储过程中来实现这一点。所以我可以根据我的经验告诉你这种方法是有效的。目前，通过一系列收购，该产品是 Oracle 中间件产品组合的一部分，所以我不

我的另一个经历是在一个大数据仓库项目上。在这种情况下，我们大量使用了 Oracle 特定的特性，以至于根本无法选择迁移到另一个数据库平台。

因此，我的建议是评估使用 SQL Server 的特定功能是否是您的应用程序所固有的。如果是这样，您应该接受，如果不进行重大重写，就不能选择迁移到另一个平台。如果不是，请查看您是否可以通过使用 JDBC 转义来改进您对 SQL 的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:27:57.293

鉴于您使用的是遗留代码，我会选择一个接口，最初是一个实现，为每个与数据库相关的函数（例如 SaveOrder）添加方法，该函数采用一个简单的类，例如 Order :) ，或者在推送数据集时。随着你的进展，加入更多的东西，直到你所有的 sql 都在实现中，并且所有使用它的东西都通过接口。

然后，当您想在另一个数据库或其他持久层（如 NoSQL、Xml 或 ORM）上实现时，您知道自己必须做什么，并且还拥有一系列单元测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:02:39.850

您可能会考虑使用 MyBatis 框架。MyBatis 将 SQL 查询和结果集映射到 Java 对象中，它还对 DB 特定的查询生成提供了一些支持。放入现有应用程序非常轻量级，并且可能会大大减少您的总代码行数。查看[他们文档中关于多数据库供应商支持的部分，以](http://www.mybatis.org/core/dynamic-sql.html)获取演示该功能的快速示例映射文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T15:29:33.113

1.  远离 ORM。它们在项目中确实有其用途，但是如果您只想要数据库独立性，那就像您只需要一把锤子和一些钉子时就购买了一家General Factory Factory。

2.  将您的数据访问层隔离在一组接口后面。您的代码库中的任何内容都不应该依赖于数据库，而是这些接口的实现。因此，这些实现之外的任何类都不应访问类路径中带有“jdbc”、“jpa”或“hibernate”的任何内容。您可以考虑使用 JDepend 或 DependencyFinder 编写实际测试。

3.  使您当前的数据库访问实现这些接口。

4.  拥有针对实际数据库运行并准备针对一组不同数据库运行的自动化测试。

5.  当您必须支持第二个数据库时，修改您的测试以针对这两个数据库运行。使接口实现成为原始实现的副本，然后修复失败的测试。

6.  现在查看您的两个实现并找到值得提取的内容并相应地重构您的代码。

如果您尝试将步骤 6 在链中进一步向上移动，您将遇到 YAGNI 和 WrongAbstractionException 的不良情况。

如果您决定使用任何类型的 ORM 或其他一些数据库访问技术，则适用相同的规则。

# php - UTF8 到 php 中的等效数字

> ID：11540869
> 
> 赞同：1
> 
> 时间：2012-07-18T12:00:26.277
> 
> 标签：php, encoding, utf-8

我一直在寻找我的！！！试图找到一个 PHP 函数来将 UTF8 转换为等效数字。我不完全确定如何称呼这个数字（我听说它被称为纵坐标？）但这里有一个例子：http: [//jrgraphix.net/r/Unicode/3040-309F](http://jrgraphix.net/r/Unicode/3040-309F)

基本上我试图在 PHP 中读取一个 UTF-8 .txt 文件，然后将每一行保存在一个数组中，这样我就可以搞砸它了。

如果有人可以帮助我，我将不胜感激，因为我对 UTF8 还不是很熟悉。

编辑：这是我到目前为止所得到的：

```
echo "var TextCharacters = new Array();\n";

$LineArray = array();
$file_handle = fopen("lesson1.txt", "r");

while (!feof($file_handle)) 
{
  $line_of_text = fgets($file_handle);  
  array_push($LineArray, $line_of_text);
}

fclose($file_handle);

foreach($LineArray as $s)
{
    for($i = 0; $i < mb_strlen($s,"utf-8"); $i++)
    {
        $char = mb_substr($s, $i, 1, "utf-8");
        echo "alert(go(" . bin2hex(iconv('UTF-8', 'UCS-2', $char)) . "));";         
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:54:08.440

您正在寻找的是 Unicode 代码点，即在 Unicode 字符表中知道该字符的数字标识符。“最便宜”的方法是通过 UCS-2 字符编码，它将 1:1 从字节映射到 Unicode 代码点：

```
echo bin2hex(iconv('UTF-8', 'UCS-2', 'あ'));
// 3042 
```

警告：返回的代码总是 4 个十六进制数字长（您可能喜欢也可能不喜欢）并且 UCS-2 不支持高于 BMP 的字符，即高于代码点 FFFF。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T12:04:19.427

PHP 中的 UTF-8 没有什么神奇之处。当您读取文件时，您将获得字节值（而不是被解析为字符）。迭代您已读取的数据并使用[ord()](http://no.php.net/ord)获取字节的十进制值。

如果要使用 UTF-8 代码点执行此操作，可以使用[mb_substr](http://no.php.net/mb_substr)或[iconv_substr](http://no.php.net/manual/en/function.iconv-substr.php)提取每个字符，然后使用 ord() 打印组成字符的每个字节的值。

更新：要扩展完整的解决方案：

utf8.test：`fooÆØÅござ`

```
$utf8 = file_get_contents("utf8.test");

for ($i = 0; $i < mb_strlen($utf8, "utf-8"); $i++)
{
    $char = mb_substr($utf8, $i, 1, "utf-8");

    print($char);
    print("\n");

    for ($j = 0; $j < strlen($char); $j++)
    {
        print(dechex(ord($char[$j])));
    }

    print("\n\n");
} 
```

输出：

```
f
66

o
6f

o
6f

Æ
c386

Ø
c398

Å
c385

ご
e38194

ざ
e38196 
```

希望有帮助。

# magento - 这个jQuery函数可以用原型吗？

> ID：11540879
> 
> 赞同：1
> 
> 时间：2012-07-18T12:00:46.793
> 
> 标签：magento, prototypejs, jquery

我正在使用 Magento，我厌倦了它的内置原型 #%@$！！我有“ [Pre-Select Colors Plus Swatches](http://www.magentocommerce.com/magento-connect/pre-select-colors-plus-swatches.html) ”扩展，我也很生气，因为它没有在页面加载时预先选择产品颜色属性。我也花了几个小时试图让 jQuery noConflict() 工作，但它完全崩溃了前面提到的扩展。所以我最终得到了那个 jQuery 代码，并且需要将它翻译成 Prototype，这似乎是不可能的！此函数模拟单击第一个可用颜色选项，并在页面加载后调用它。原型可以吗？如何 ？？？

```
$j("div.atributoProduto.Cor img.swatch:not('.disabledSwatch'):first").parent().click(); 
```

另外，如果你能想出一个让jQuery和原型共存的奇迹代码，那就太好了。但是我做了一些研究并尝试了很多方法来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:11:56.590

您应该尝试在任何原型代码之前加载 jQuery，然后对其调用 noConflict。也许不要`$j`用作替换变量，而是使用替代变量`jQuery`或其他非短的东西，碰撞的可能性非常低。

```
//Load jQuery
<script>
  var jQuery = jQuery.noConflict();
</script>
//Load other Javascripts including Prototype 
```

Prototype 和 jQuery 应该能够非常完美地共存，如果您将 jQuery 作为第一个加载，它将在 Prototype 启动之前从全局命名空间中清除。这样就不会发生冲突。

您不需要 jQuery 的短名称，也不需要包含`$`

```
jQuery("div.atributoProduto.Cor img.swatch:not('.disabledSwatch'):first").parent().click(); 
```

在 Prototype 之后以 noConflict 模式加载 jQuery 是一个常见的错误，可能会导致冲突，因为 jQuery 会在`$`再次清除之前填充它，因此它可能会在加载期间的短时间内发生冲突。

* * *

如果您仍想使用原型触发点击：

```
$(myelement).simulate('click'); 
```

这应该`.click();`和 jQuery 做的差不多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T20:23:16.060

好吧，我最终得到了一个 100% 的原型解决方案。模拟方法是在互联网上找到的一个插件。我最大的问题是原型不像 jQuery 那样喜欢链接。

```
Event.simulate = function(element, eventName) {

      var options = Object.extend({
        pointerX: 0,
        pointerY: 0,
        button: 0,
        ctrlKey: false,
        altKey: false,
        shiftKey: false,
        metaKey: false,
        bubbles: true,
        cancelable: true
      }, arguments[2] || { } );

      var eventMatchers = {
        'HTMLEvents': /load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll/,
        'MouseEvents': /click|mousedown|mouseup|mouseover|mousemove|mouseout/
      };

      var oEvent, eventType = null;

      for (var name in eventMatchers) {
        if (eventMatchers[name].test(eventName)) eventType = name;
      }

      if (!eventType) throw new SyntaxError('Only HTMLEvents and MouseEvents interfaces are supported');

      if (document.createEvent) {
        oEvent = document.createEvent(eventType);
        if (eventType == 'HTMLEvents') {
          oEvent.initEvent(eventName, options.bubbles, options.cancelable);
        }
        else {
          oEvent.initMouseEvent(eventName, options.bubbles, options.cancelable, document.defaultView, 
            options.button, options.pointerX, options.pointerY, options.pointerX, options.pointerY,
            options.ctrlKey, options.altKey, options.shiftKey, options.metaKey, options.button, $(element));
        }
        $(element).dispatchEvent(oEvent);
      }
      else {
        options.clientX = options.pointerX;
        options.clientY = options.pointerY;
        oEvent = Object.extend(document.createEventObject(), options);
        $(element).fireEvent('on' + eventName, oEvent);
      }
}

function selecionaOnload( atributo ){
    var elem = $$("div.atributoProduto."+atributo+" img.swatch:not(.disabledSwatch)").first();
    Event.simulate( elem, 'click');

    if(atributo == 'Cor'){
        $$("div.atributoProduto.Tamanho div.ico-esgotado").each(function(elem){
            elem.remove();
        });
        marcaIndisponivel('Tamanho');
    }
}

function marcaIndisponivel( atributo ){
    $$("div.atributoProduto."+atributo+" img.swatch.disabledSwatch").each(function(elem){
        elem.insert( {before:"<div class='ico-esgotado'></div>"} );
    });
}

Event.observe(window, 'load', function() {  

    //marcaIndisponivel('Cor');
    selecionaOnload('Cor');
    marcaIndisponivel('Tamanho');
    //selecionaOnload('Tamanho');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T06:39:41.300

如果我不理解你的问题，在原型 js 中使用 $$ 应该可以解决这个问题。Prototype 还支持伪类，例如 not, nth, first。你可以看看[这里](http://prototypejs.org/api/utility/dollar-dollar)。

# android - 自定义 CursorLoader 和支持 ListView 的 CursorAdapter 之间的数据不同步

> ID：11540880
> 
> 赞同：29
> 
> 时间：2012-07-18T12:00:48.433
> 
> 标签：android, android-loadermanager, android-cursorloader, asynctaskloader, android-loader

## 背景：

我有一个`CursorLoader`直接使用 SQLite 数据库而不是使用`ContentProvider`. 此加载程序与`ListFragment`由`CursorAdapter`. 到现在为止还挺好。

为简化起见，我们假设 UI 上有一个删除按钮。当用户单击它时，我从数据库中删除一行，并调用`onContentChanged()`我的加载器。此外，在`onLoadFinished()`回调时，我调用`notifyDatasetChanged()`我的适配器以刷新 UI。

## 问题：

当删除命令快速连续发生时，意味着快速连续`onContentChanged()`调用，**`bindView()`最终将使用 stale data**。这意味着一行已被删除，但 ListView 仍在尝试显示该行。这会导致光标异常。

我究竟做错了什么？

## 代码：

这是一个自定义 CursorLoader（基于Diane Hackborn 女士的[建议）](https://groups.google.com/d/msg/android-developers/J-Uql3Mn73Y/3haYPQ-pR7sJ)

```
/**
 * An implementation of CursorLoader that works directly with SQLite database
 * cursors, and does not require a ContentProvider.
 * 
 */
public class VideoSqliteCursorLoader extends CursorLoader {

    /*
     * This field is private in the parent class. Hence, redefining it here.
     */
    ForceLoadContentObserver mObserver;

    public VideoSqliteCursorLoader(Context context) {
        super(context);
        mObserver = new ForceLoadContentObserver();

    }

    public VideoSqliteCursorLoader(Context context, Uri uri,
            String[] projection, String selection, String[] selectionArgs,
            String sortOrder) {
        super(context, uri, projection, selection, selectionArgs, sortOrder);
        mObserver = new ForceLoadContentObserver();

    }

    /*
     * Main logic to load data in the background. Parent class uses a
     * ContentProvider to do this. We use DbManager instead.
     * 
     * (non-Javadoc)
     * 
     * @see android.support.v4.content.CursorLoader#loadInBackground()
     */
    @Override
    public Cursor loadInBackground() {
        Cursor cursor = AppGlobals.INSTANCE.getDbManager().getAllCameras();
        if (cursor != null) {
            // Ensure the cursor window is filled
            int count = cursor.getCount();
            registerObserver(cursor, mObserver);
        }

        return cursor;

    }

    /*
     * This mirrors the registerContentObserver method from the parent class. We
     * cannot use that method directly since it is not visible here.
     * 
     * Hence we just copy over the implementation from the parent class and
     * rename the method.
     */
    void registerObserver(Cursor cursor, ContentObserver observer) {
        cursor.registerContentObserver(mObserver);
    }    
} 
```

我班级的一个片段`ListFragment`，显示了`LoaderManager`回调；以及`refresh()`每当用户添加/删除记录时我调用的方法。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mListView = getListView();

    /*
     * Initialize the Loader
     */
    mLoader = getLoaderManager().initLoader(LOADER_ID, null, this);
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new VideoSqliteCursorLoader(getActivity());
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {

    mAdapter.swapCursor(data);
    mAdapter.notifyDataSetChanged();
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);
}

public void refresh() {     
    mLoader.onContentChanged();
} 
```

My`CursorAdapter`只是一个普通的，`newView()`被覆盖以返回新膨胀的行布局 XML 并`bindView()`使用`Cursor`将列绑定到`View`行布局中的 s。

* * *

## 编辑 1

在深入研究了这一点之后，我认为这里的根本问题是`CursorAdapter`处理底层`Cursor`. 我试图了解它是如何工作的。

采取以下场景以更好地理解。

1.  假设`CursorLoader`已经完成加载并且它返回`Cursor`现在有 5 行的 a。
2.  开始显示这些`Adapter`行。它移动`Cursor`到下一个位置并调用`getView()`
3.  此时，即使在呈现列表视图的过程中，也会从数据库中删除一行（例如，_id = 2）。
4.  **这就是问题所在**-`CursorAdapter`已将 移动`Cursor`到与已删除行相对应的位置。该`bindView()`方法仍然尝试使用 this 访问该行的列`Cursor`，这是无效的并且我们得到异常。

### 问题：

*   这种理解正确吗？我对上面的第 4 点特别感兴趣，我假设当一行被删除时，`Cursor`除非我要求，否则它不会被刷新。
*   假设这是正确的，我如何要求我`CursorAdapter`丢弃/中止它`ListView` **正在进行**的渲染，并要求它使用新的`Cursor`（通过`Loader#onContentChanged()`and返回`Adapter#notifyDatasetChanged()`）来代替？

**PS**向版主提出的问题：是否应该将此编辑移至单独的问题？

* * *

## 编辑 2

根据各种答案的建议，我对 s 如何工作的理解似乎存在根本性错误`Loader`。事实证明：

1.  `Fragment`or根本`Adapter`不应该直接操作。`Loader`
2.  应该监视数据的`Loader`所有变化，并且只要数据变化就应该提供`Adapter`新`Cursor`的`onLoadFinished()`。

有了这种理解，我尝试了以下更改。- 没有任何操作`Loader`。refresh 方法现在什么都不做。

`Loader`另外，为了调试和内部发生的事情`ContentObserver`，我想出了这个：

```
public class VideoSqliteCursorLoader extends CursorLoader {

    private static final String LOG_TAG = "CursorLoader";
    //protected Cursor mCursor;

    public final class CustomForceLoadContentObserver extends ContentObserver {
        private final String LOG_TAG = "ContentObserver";
        public CustomForceLoadContentObserver() {
            super(new Handler());
        }

        @Override
        public boolean deliverSelfNotifications() {
            return true;
        }

        @Override
        public void onChange(boolean selfChange) {
            Utils.logDebug(LOG_TAG, "onChange called; selfChange = "+selfChange);
            onContentChanged();
        }
    }

    /*
     * This field is private in the parent class. Hence, redefining it here.
     */
    CustomForceLoadContentObserver mObserver;

    public VideoSqliteCursorLoader(Context context) {
        super(context);
        mObserver = new CustomForceLoadContentObserver();

    }

    /*
     * Main logic to load data in the background. Parent class uses a
     * ContentProvider to do this. We use DbManager instead.
     * 
     * (non-Javadoc)
     * 
     * @see android.support.v4.content.CursorLoader#loadInBackground()
     */
    @Override
    public Cursor loadInBackground() {
        Utils.logDebug(LOG_TAG, "loadInBackground called");
        Cursor cursor = AppGlobals.INSTANCE.getDbManager().getAllCameras();
        //mCursor = AppGlobals.INSTANCE.getDbManager().getAllCameras();
        if (cursor != null) {
            // Ensure the cursor window is filled
            int count = cursor.getCount();
            Utils.logDebug(LOG_TAG, "Count = " + count);
            registerObserver(cursor, mObserver);
        }

        return cursor;

    }

    /*
     * This mirrors the registerContentObserver method from the parent class. We
     * cannot use that method directly since it is not visible here.
     * 
     * Hence we just copy over the implementation from the parent class and
     * rename the method.
     */
    void registerObserver(Cursor cursor, ContentObserver observer) {
        cursor.registerContentObserver(mObserver);
    }

    /*
     * A bunch of methods being overridden just for debugging purpose.
     * We simply include a logging statement and call through to super implementation
     * 
     */

    @Override
    public void forceLoad() {
        Utils.logDebug(LOG_TAG, "forceLoad called");
        super.forceLoad();
    }

    @Override
    protected void onForceLoad() {
        Utils.logDebug(LOG_TAG, "onForceLoad called");
        super.onForceLoad();
    }

    @Override
    public void onContentChanged() {
        Utils.logDebug(LOG_TAG, "onContentChanged called");
        super.onContentChanged();
    }
} 
```

这是我的片段`Fragment`和`LoaderCallback`

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    mListView = getListView();

    /*
     * Initialize the Loader
     */
    getLoaderManager().initLoader(LOADER_ID, null, this);
}

@Override
public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    return new VideoSqliteCursorLoader(getActivity());
}

@Override
public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    Utils.logDebug(LOG_TAG, "onLoadFinished()");
    mAdapter.swapCursor(data);
}

@Override
public void onLoaderReset(Loader<Cursor> loader) {
    mAdapter.swapCursor(null);
}

public void refresh() {
    Utils.logDebug(LOG_TAG, "CamerasListFragment.refresh() called");
    //mLoader.onContentChanged();
} 
```

现在，每当数据库发生变化（添加/删除行）时，应该调用的`onChange()`方法 - 对吗？`ContentObserver`我没有看到这种情况发生。我的`ListView`从未表现出任何变化。我看到任何变化的唯一一次是如果我明确地调用`onContentChanged()`.`Loader`

这里出了什么问题？

* * *

## 编辑 3

好的，所以我重写了我`Loader`的直接从`AsyncTaskLoader`. 我仍然没有看到我的数据库更改被刷新，也没有看到我在数据库中插入/删除一行时被调用的`onContentChanged()`方法:-(`Loader`

只是为了澄清一些事情：

1.  我使用了代码`CursorLoader`并只修改了一行返回`Cursor`. `ContentProvider`在这里，我用我的代码替换了对的调用`DbManager`（它反过来用于`DatabaseHelper`执行查询并返回`Cursor`）。

    `Cursor cursor = AppGlobals.INSTANCE.getDbManager().getAllCameras();`

2.  我对数据库的插入/更新/删除是从其他地方发生的，而不是通过`Loader`. 在大多数情况下，数据库操作发生在后台`Service`，在少数情况下，从`Activity`. 我直接使用我的`DbManager`类来执行这些操作。

我仍然没有得到的是 -**谁告诉我`Loader`一行已被添加/删除/修改？**换句话说，在哪里被`ForceLoadContentObserver#onChange()`调用？在我的加载器中，我在以下位置注册了我的观察者`Cursor`：

```
void registerContentObserver(Cursor cursor, ContentObserver observer) {
    cursor.registerContentObserver(mObserver);
} 
```

这意味着当它发生变化时有责任`Cursor`通知它。`mObserver`但是，然后 AFAIK，“光标”不是“实时”对象，它会在数据库中修改数据时更新它指向的数据。

这是我的 Loader 的最新版本：

```
import android.content.Context;
import android.database.ContentObserver;
import android.database.Cursor;
import android.support.v4.content.AsyncTaskLoader;

public class VideoSqliteCursorLoader extends AsyncTaskLoader<Cursor> {
    private static final String LOG_TAG = "CursorLoader";
    final ForceLoadContentObserver mObserver;

    Cursor mCursor;

    /* Runs on a worker thread */
    @Override
    public Cursor loadInBackground() {
        Utils.logDebug(LOG_TAG , "loadInBackground()");
        Cursor cursor = AppGlobals.INSTANCE.getDbManager().getAllCameras();
        if (cursor != null) {
            // Ensure the cursor window is filled
            int count = cursor.getCount();
            Utils.logDebug(LOG_TAG , "Cursor count = "+count);
            registerContentObserver(cursor, mObserver);
        }
        return cursor;
    }

    void registerContentObserver(Cursor cursor, ContentObserver observer) {
        cursor.registerContentObserver(mObserver);
    }

    /* Runs on the UI thread */
    @Override
    public void deliverResult(Cursor cursor) {
        Utils.logDebug(LOG_TAG, "deliverResult()");
        if (isReset()) {
            // An async query came in while the loader is stopped
            if (cursor != null) {
                cursor.close();
            }
            return;
        }
        Cursor oldCursor = mCursor;
        mCursor = cursor;

        if (isStarted()) {
            super.deliverResult(cursor);
        }

        if (oldCursor != null && oldCursor != cursor && !oldCursor.isClosed()) {
            oldCursor.close();
        }
    }

    /**
     * Creates an empty CursorLoader.
     */
    public VideoSqliteCursorLoader(Context context) {
        super(context);
        mObserver = new ForceLoadContentObserver();
    }

    @Override
    protected void onStartLoading() {
        Utils.logDebug(LOG_TAG, "onStartLoading()");
        if (mCursor != null) {
            deliverResult(mCursor);
        }
        if (takeContentChanged() || mCursor == null) {
            forceLoad();
        }
    }

    /**
     * Must be called from the UI thread
     */
    @Override
    protected void onStopLoading() {
        Utils.logDebug(LOG_TAG, "onStopLoading()");
        // Attempt to cancel the current load task if possible.
        cancelLoad();
    }

    @Override
    public void onCanceled(Cursor cursor) {
        Utils.logDebug(LOG_TAG, "onCanceled()");
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        }
    }

    @Override
    protected void onReset() {
        Utils.logDebug(LOG_TAG, "onReset()");
        super.onReset();

        // Ensure the loader is stopped
        onStopLoading();

        if (mCursor != null && !mCursor.isClosed()) {
            mCursor.close();
        }
        mCursor = null;
    }

    @Override
    public void onContentChanged() {
        Utils.logDebug(LOG_TAG, "onContentChanged()");
        super.onContentChanged();
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T16:23:48.050

根据您提供的代码，我不能 100% 确定，但有几件事很突出：

1.  突出的第一件事是您已将此方法包含在您的`ListFragment`:

    ```
    public void refresh() {     
        mLoader.onContentChanged();
    } 
    ```

    使用 时`LoaderManager`，很少需要（而且通常很危险）`Loader`直接操作你的。在第一次调用 之后`initLoader`，`LoaderManager`可以完全控制`Loader`并且将通过在后台调用其方法来“管理”它。在这种情况下直接调用 s 方法时必须非常小心`Loader`，因为它可能会干扰`Loader`. 我不能肯定你的调用`onContentChanged()`是不正确的，因为你没有在你的帖子中提到它，但在你的情况下它不应该是必要的（也不应该持有对 的引用`mLoader`）。您`ListFragment`不关心如何检测更改......也不关心如何加载数据。它所知道的是，新数据将神奇地提供`onLoadFinished`当它可用时。

2.  你也不应该打电话`mAdapter.notifyDataSetChanged()`来`onLoadFinished`。[`swapCursor`](http://bit.ly/OjmPY6)会为你做这件事。

在大多数情况下，`Loader`框架应该完成所有涉及加载数据和管理`Cursor`s 的复杂事情。相比之下，您的`ListFragment`代码应该很简单。

* * *

## 编辑＃1：

~~据我所知，`CursorLoader`依赖于`ForceLoadContentObserver`（实现中提供的嵌套内部类`Loader<D>`）......所以这里的问题似乎是你正在实现你的 on custom `ContentObserver`，但没有设置任何东西来识别它。许多“自我通知”的东西是在`Loader<D>`and`AsyncTaskLoader<D>`实现中完成的，因此隐藏在执行实际工作的具体`Loader`s（例如`CursorLoader`）之外（即`Loader<D>`不知道`CustomForceLoadContentObserver`，那么它为什么要接收任何通知？ ）。~~

您在更新的帖子中提到您无法`final ForceLoadContentObserver mObserver;`直接访问，因为它是一个隐藏字段。您的解决方法是实现您自己的自定义`ContentObserver`并调用`registerObserver()`您的覆盖`loadInBackground`方法（这将导致`registerContentObserver`在您的`Cursor`. 这就是您没有收到通知的原因......因为您使用了框架`ContentObserver`从未识别的自定义。`Loader`

~~要解决此问题，您应该直接使用您的类`extend AsyncTaskLoader<Cursor>`而不是`CursorLoader`（即，只需将您继承的部分复制并粘贴`CursorLoader`到您的类中）。这样您就不会遇到隐藏`ForceLoadContentObserver`字段的任何问题。~~

## 编辑#2：

[**根据 Commonsware 的说法**](https://stackoverflow.com/questions/9606598/writing-data-managed-by-a-loadermanager/9607327#comment15445765_9607327)，没有一种简单的方法来设置来自 的全局通知`SQLiteDatabase`，这就是为什么`SQLiteCursorLoader`他的每次进行交易时都`Loaderex`依赖于自身的`Loader`调用`onContentChanged()`直接从数据源广播通知的最简单方法是实现 a`ContentProvider`并使用`CursorLoader`. 这样，您可以相信`CursorLoader`每次`Service`更新基础数据源时都会向您广播通知。

我不怀疑还有其他解决方案（即，也许通过设置一个全局的`ContentObserver`......或者甚至可能通过使用*没有*a的`ContentResolver#notifyChange`方法），但最干净和最简单的解决方案似乎只是实现一个 private 。*`ContentProvider``ContentProvider`*

 *（ps确保您`android:export="false"`在清单中设置了提供者标签，这样`ContentProvider`其他应用程序就看不到您了！：p）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:08:34.853

这并不是真正解决您的问题的方法，但它可能对您仍然有用：

有一种方法`CursorLoader.setUpdateThrottle(long delayMS)`，它强制在 loadInBackground 完成和下一次加载被调度之间有一个最短时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T14:28:46.503

## 选择：

我觉得使用 CursoLoader 对这项任务来说太重了。需要同步的是数据库的添加/删除，可以用同步的方式来完成。正如我在之前的评论中所说，当 mDNS 服务停止时，从它中删除 db（以同步方式），发送删除广播，在接收器中：从数据持有者列表中删除并通知。这应该足够了。只是为了避免使用额外的数组列表（用于支持适配器），使用 CursorLoader 是额外的工作。

* * *

您应该对`ListFragment`对象进行一些同步。

调用`notifyDatasetChanged()`应该是同步的。

```
synchronized(this) {  // this is ListFragment or ListView.
     notifyDatasetChanged();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-06T04:28:10.087

当我遇到同样的问题时，我阅读了您的整个帖子，以下语句为我解决了这个问题：

`getLoaderManager().restartLoader(0, null, this);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T13:09:36.937

A也有同样的问题。我通过以下方式解决了它：

```
@Override
public void onResume() {
    super.onResume();  // Always call the superclass method first
    if (some_condition) {
        getSupportLoaderManager().getLoader(LOADER_ID).onContentChanged();
    }
} 
```*

# ruby-on-rails - 添加最后修改的标头后客户端不加载资产

> ID：11540881
> 
> 赞同：0
> 
> 时间：2012-07-18T12:00:50.407
> 
> 标签：ruby-on-rails, nginx, thin, last-modified

我在 Debian 上使用 Thin 和 nginx（0.7.6）在生产模式下运行我的 Rails 应用程序。它工作得很好，但我没有尝试实现 last-modified 标头，当我重新启动 nginx 时，客户端不再加载资产。

这是我的 nginx 配置：

```
upstream instance-name {
        server unix:/var/run/thin/appname.0.sock;
        server unix:/var/run/thin/appname.1.sock;
        server unix:/var/run/thin/appname.2.sock;
        server unix:/var/run/thin/appname.3.sock;
}

server {
        listen 5678;
        server_name appname;
        access_log /root/rails/appname/log/access.log;
        error_log /root/rails/appname/log/error.log;
        root /root/rails/appname/public;
        index index.html;
        location / {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_redirect off;

                if (-f $request_filename/index.html) {
                        rewrite (.*) $1/index.html break;
                }

                if (-f $request_filename.html) {
                        rewrite (.*) $1.html break;
                }

                if (!-f $request_filename) {
                        proxy_pass http://fibre-dox;
                        break;
                }
        }
        location ~* \.(jpg|gif|png|css|js)$ {
               if (-f $request_filename) {
                       expires max;
                       break;
               }
        }
} 
```

给我带来麻烦的部分是这个：

```
location ~* \.(jpg|gif|png|css|js)$ {
                   if (-f $request_filename) {
                           expires max;
                           break;
                   }
            } 
```

我究竟做错了什么？我想使用最后修改的标题，这样客户端每次点击页面时都不会重新加载所有图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T17:50:05.790

```
 location / {
            try_files $uri $uri/ $uri.html @backend;

            location ~* \.(?:jpg|gif|png|css|js)$ {
                try_files $uri @backend;
                expires max;
            }
    }

    location @backend {
            proxy_pass http://fibre-dox;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $http_host;
            proxy_redirect off;

            location ~* \.(?:jpg|gif|png|css|js)$ {
                proxy_pass http://fibre-dox;
                expires max;
            }
    } 
```

*   [http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)
*   [http://wiki.nginx.org/Pitfalls](http://wiki.nginx.org/Pitfalls)
*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)
*   [http://nginx.org/r/try_files](http://nginx.org/r/try_files)
*   [http://nginx.org/r/location](http://nginx.org/r/location)

# c# - LINQ 表达式结果隐含到继承的对象

> ID：11540884
> 
> 赞同：1
> 
> 时间：2012-07-18T12:01:02.293
> 
> 标签：c#, linq, entity-framework, .net-4.0

我有一个由实体框架模型生成器生成的**Document**对象和**User对象。**

我想获取**文档**列表，以及根据此文档创建的*userCount 。*

所以，我创建了新对象*DocumentWithUserCount*：

```
public class DocumentWithUserCount:Document
{
    public uAmount {get;set}
} 
```

和 LINQ 保留数据（下面的代码，我需要你的帮助）：

```
 var ed = (from d in _entity.Document
     join p in _entity.User[get DocID and count by this docID ] on d.RID equals p.DocID         
select new DocumentWithUserCount(xxxx)).ToList(); 
```

这该怎么做？

**编辑：** 只是我想用 LINQ 做下面的等效代码。

```
 SELECT d.*, p.* from Document d INNER JOIN (select docid, count(RID) as uAmount from User
    GROUP BY DocID) p ON d.RID=p.docid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:04:50.553

这不起作用吗？

```
var documentWithUserCount =
    from Document d in _entity.Document
    join p in _entity.User on d.RID equals p.DocID
    select new DocumentWithUserCount(d, p.Count()); 
```

在 DocumentWithUserCount 中添加构造函数如下

```
public DocumentWithUserCount(Document doc, int count) : base(d)
{
    uAmount = count;
} 
```

在 Document 中添加一个构造函数，它将接受一个 Document 并设置适当的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:57:21.717

我认为继承在这里是错误的工具。改用合成。而且不清楚你是否需要加入，应该有一个导航属性：

```
var eds = from d in _entity.Document       
   select new { Document=d, UserCount=d.Users.Count() };  // anon type 
```

或者

```
public class DocumentWithUserCount  //:Document
{
    public Doucument { get; set; }
    public int Amount {get;set}
}
var eds = from d in _entity.Document       
   select new DocumentWithUserCount { Document=d, Amount=d.Users.Count() }; 
```

# watin - 在测试期间随机抛出“InvalidCastException”

> ID：11540886
> 
> 赞同：2
> 
> 时间：2012-07-18T12:01:08.373
> 
> 标签：watin

在 WatiN UI 测试中，我遇到了一个问题，即在运行测试时，错误有时会引发以下错误：

> 用户代码未处理 InvalidCastException”...“无法将类型为“mshtml.HTMLDocumentClass”的 COM 对象转换为接口类型“mshtml.IHTMLDocument2”。此操作失败，因为对具有 IID“...”的接口的 COM 组件上的 QueryInterface 调用由于以下错误而失败。不支持这样的接口”。

WatiN 是在页面上查找元素还是与其交互（单击或使用 Eval 方法）似乎并不重要。

错误发生在所有时间到某些时间之间的任何频率上。这是非常不一致的。它通常倾向于影响某些元素而不是其他元素（在我的情况下，我有 Javascript 下拉菜单，它似乎更频繁地发生），但错误似乎几乎可以在任何地方出现。

任何人都经历过这种情况，或者对如何解决这个问题有任何想法？

谢谢

# android - 如何在android中的谷歌地图中绘制两个地理点之间的旅行路径

> ID：11540893
> 
> 赞同：0
> 
> 时间：2012-07-18T12:01:31.683
> 
> 标签：android

我想在两个geopiont之间创建行进路径。我在它们之间设置了两个点和条纹线，但我想在两点之间绘制行进路径......提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:05:35.350

试试这个教程。

[http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html](http://csie-tw.blogspot.in/2009/06/android-driving-direction-route-path.html)

# iphone - 如何在iphone的车速表中旋转图像

> ID：11540894
> 
> 赞同：1
> 
> 时间：2012-07-18T12:01:31.440
> 
> 标签：iphone, objective-c, ios, uiimage, cgaffinetransform

以下是在触摸事件上旋转箭头（uiimage）的代码。在这我减去两个触摸的位置之前和当前但问题是箭头（uiimage）有时会在触摸的相反方向上移动。

```
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch *touch = [touches anyObject];        
    NSLog(@"%@",[touch view]);   
    if ([touch view] == ImgViewArrowImage) 
    {
    CGPoint currentLocation = [touch locationInView:touch.view];
    CGPoint pastLocation = [touch previousLocationInView:touch.view];

    CGPoint d1 = CGPointMake(currentLocation.x-touch.view.center.x, currentLocation.y-touch.view.center.y);   
    CGPoint d2 = CGPointMake(pastLocation.x-touch.view.center.x, pastLocation.y-touch.view.center.y);

    CGFloat angle1 = atan2(d1.y, d1.x); 
    CGFloat angle2 = atan2(d2.y, d2.x); 
    [[ImgViewArrowImage layer] setAnchorPoint:CGPointMake(0.0, 0.5)];
    [[ImgViewArrowImage layer] setPosition:CGPointMake(159,211)];

    ImgViewArrowImage.transform = CGAffineTransformRotate(ImgViewArrowImage.transform, angle1-angle2);
  } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T06:41:56.133

我只是从我的代码中删除了 2 行，我的代码现在正在运行，所以最终的代码是

```
- (void) touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event
{
    UITouch *touch = [touches anyObject];        
    NSLog(@"%@",[touch view]);   
    if ([touch view] == ImgViewArrowImage) 
    {
    CGPoint d1 = [touch locationInView:touch.view];
    CGPoint d2 = [touch previousLocationInView:touch.view];

    CGFloat angle1 = atan2(d1.y, d1.x); 
    CGFloat angle2 = atan2(d2.y, d2.x); 
    [[ImgViewArrowImage layer] setAnchorPoint:CGPointMake(0.0, 0.5)];
    [[ImgViewArrowImage layer] setPosition:CGPointMake(159,211)];

    ImgViewArrowImage.transform = CGAffineTransformRotate(ImgViewArrowImage.transform, angle1-angle2);
  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:43:26.077

根据原始问题的评论，**保持角度高于 0**：

```
float _angle = angle1 - angle2;
if (_angle < 0) _angle += M_PI; // if you are working with radians, otherwise: _angle += 360.f; 
```

**还有另一个原因：**

我们都知道它是如何工作的：分母*为零*`atan(...)`时是不确定的，因为除以*零*是一个未定义的情况，理论上的结果是无限的，但在这种情况下你可能会得到值。**`atan(...)``float``MAX_FLOAT`**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T12:40:18.023

使用此代码：

```
 self.button.layer.anchorPoint = CGPointMake(self.button.layer.anchorPoint.x, self.button.layer.anchorPoint.y*2);

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5f];
[self.button setTransform: CGAffineTransformMakeRotation((M_PI / 180) * -40.0579987)];
[UIView commitAnimations]; 
```**

# three.js - 使用 THREE.ParticleSystem 时的不透明度问题

> ID：11540895
> 
> 赞同：1
> 
> 时间：2012-07-18T12:01:39.460
> 
> 标签：three.js

我只是做了一个 jsfiddle 来演示这个问题。 [http://jsfiddle.net/georgeneil/64LF4/4/](http://jsfiddle.net/georgeneil/64LF4/4/)

我在“场景”中有一个立方体和 20 个粒子。粒子是使用 THREE.ParticleSystem 创建的。这里有一些粒子在立方体后面。在 GUI 控件中更改不透明度时，我无法看到粒子。但是当我在 GUI 控件中将立方体的可见性设置为 false 时，可以清楚地看到。

有人可以帮我解决这个问题。当我降低立方体的不透明度时，我需要看到粒子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:04:49.240

+1 以获得出色的演示！

不透明度可能很棘手。你需要做两件事：

1.  添加`transparent: true`为立方体材质的属性，

2.  添加粒子*后*，将立方体添加到场景中。

这是一个更新的小提琴：http: [//jsfiddle.net/64LF4/6/](http://jsfiddle.net/64LF4/6/)

# asp-classic - Asp 测试是否为字母

> ID：11540902
> 
> 赞同：0
> 
> 时间：2012-07-18T12:01:59.987
> 
> 标签：asp-classic, sql-like

我是asp的新手，因为我经常使用aspx

我使用的函数应该遍历字符串的所有字符并删除所有不是数字或字母字符的字符。线

```
If sChar Like "[0-9A-Za-z]" Then 
```

返回错误：未定义子或函数

```
MM_folder_vpisan = "fdvddvsd.-,čšž"

For lCtr = 1 To Len(MM_folder_vpisan)
     sChar = Mid(MM_folder_vpisan, lCtr, 1)
     If sChar Like "[0-9A-Za-z]" Then
         sAns = sAns & sChar
     End If    
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:10:39.167

这是我认为是此代码的改进版本：

```
Set objRegExp = New RegExp
objRegExp.Pattern = "[^0-9A-Z]" 'we'll ignorecase so no need for a-z
objRegExp.IgnoreCase = True
objRegExp.Global = True
sAns = objRegExp.replace(MM_folder_vpisan, "") ' replace all that is not 0-9 or A-Z
Set objRegExp = nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:15:19.517

您应该能够使用这个正则表达式命令：（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms972966.aspx#regexnet_topic11)的文档）

```
String newText = Regex.Replace(inputString, pattern, replacementText); 
```

在哪里

*   `inputString`是您要从中删除字符的字符串。
*   `pattern`是正则表达式，`"\w"`。（这是一个匹配任何一个的元字符`[0-9a-zA-Z]`）
*   `replacementText`是你替换它的东西。要删除，您只需输入一个空白字符串。

希望这可以帮助！

# mysql - MySQL 列类别和位置 SELECT 限制为 4。当类别只有 3 条记录时，从缺少位置的其他类别中选择一个？

> ID：11540906
> 
> 赞同：1
> 
> 时间：2012-07-18T12:02:05.293
> 
> 标签：mysql, sql, database

我有两列类别和位置。

```
Category     |  Position
-------------|----------
A            |  0
A            |  1
A            |  2
A            |  3
B            |  0
B            |  1
B            |  2
B            |  3 
```

在我的查询中，我选择`where category = B, limit 4`. 如果 B 类只有 3 条记录，我想要丢失位置的 A 记录。

如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:32:33.967

解决这个问题的一种方法是重新定义问题。如果 B 的给定位置缺失，则使用 A 记录。这仅适用于如果此语句*If category B only has 3 记录* 只是一种检测丢失位置的方法。

然后，您只需要将 A 记录加入 B 记录，然后对列进行合并。这意味着如果缺少给定位置，那么它将使用 A 记录。

```
SELECT 
    COALESCE(B_Rec.Category, A_Rec.Category) Category,
    COALESCE(B_Rec.Position , A_Rec.Position ) Position 

FROM 
    tabl A_Recs
    LEFT JOIN B_Rec
    ON A_recs.Position = B_recs.Position 
       AND a_Rec.Category = 'A' 
       AND b_Rec.Category = 'B' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T12:05:36.737

```
select * 
from tbl
order by Category desc
limit 4 
```

# javascript - 将jsp对象列表分配给javascript数组

> ID：11540915
> 
> 赞同：0
> 
> 时间：2012-07-18T12:02:31.527
> 
> 标签：javascript, arrays, list, jsp

我在 JSP 中有一个名为 cumulatorList 的列表，它是对象列表。类的 Object 几乎没有 String 和 Date 变量作为其属性。

我必须将此列表从 jsp 转移到 javascript 。我正在使用以下代码：

## 代码

```
var cumList = new Array();
<%! 
int j = 0;
%>
for (int i = 0; i < <%=cumulatorList.size()%>;i++)
{
    <%
         session.setAttribute("cumListElement", cumulatorList.get(j++))
    %>
    cumList[i] = document.getElementById("cumListElement");
}

//Note: Here "cumListElement" is hidden element included in HTML. 
```

但是添加以下代码后，我的jsp页面消失了，没有错误。如果我删除这部分，一切正常。

请告诉我如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:09:29.630

你不能生成一个包含所有值的字符串吗？我不是 JSP 专家，但您应该能够循环并产生每个值

```
var cumlist = [ 
<%
  // Loop over JSP cumulatorList and return each of the values
%>
];

// Result: var cumlist = [ 'x', 'y', 'z' ]; 
```

# android - 如何在键入消息屏幕时显示存储在 android 手机中的联系人

> ID：11540919
> 
> 赞同：0
> 
> 时间：2012-07-18T12:02:46.737
> 
> 标签：android, android-contacts

我想在`EditText`框中键入文本时显示存储在 android mobile 中的联系人。`EditText`我想像消息屏幕一样在框下方显示联系人。我可以使用 检索联系人`ContactsContract`，但我不知道如何像 Android 中的消息屏幕那样显示。有人知道吗？

我当前的代码：

```
 Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
                    null, null, null, null);
 if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(
                        cur.getColumnIndex(ContactsContract.Contacts._ID));
        System.out.println("contactsID-->>>"+id);
        String name = cur.getString(
                        cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        System.out.println("contactsName-->>>"+name);

        if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            Cursor pCur = cr.query(Contacts.Phones.CONTENT_URI, null, 
                                   Contacts.Phones.PERSON_ID +" = ?", 
                                   new String[]{id}, null);
            int i=0;
            int pCount = pCur.getCount();    

            while (pCur.moveToNext()) {
                String phoneNum = pCur.getString(
                                       pCur.getColumnIndex(Contacts.Phones.NUMBER));
                System.out.println("PhoneNum-->>>"+phoneNum);
            }

            // Query phone here.  Covered next
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:07:36.973

您必须使用`AutoCompleteTextView`并用您的联系人填充它。[文档](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:15:09.993

您可以使用自己的课程来存储联系信息，根据您的要求自定义此类：-

```
public class History {
    private static final int VERSION = 1;
    private static final String FILENAME = "history.dat";

    private Context ctx;
    private ArrayList<String> list;

    public History( Context ctx ) {
        this.ctx = ctx;
    }

    public ArrayAdapter<String> getArrayAdapter() {
        return new ArrayAdapter<String>( ctx, android.R.layout.simple_dropdown_item_1line, list );
    }

    public void addUrl( String url ) {
        if (!list.contains( url )) list.add( url );
    }

    public int size() {
        return list.size();
    }

    public void read() {
        list = new ArrayList<String>();

        try {
            DataInputStream dis = new DataInputStream( ctx.openFileInput( FILENAME ));

            dis.readInt(); // VERSION
            int n = dis.readInt();

            while (n-- > 0) list.add( dis.readUTF());
        }
        catch (IOException e) {
        }
    }

    public void write() {
        try {
            DataOutputStream dos = new DataOutputStream( ctx.openFileOutput( FILENAME, 0 ));

            dos.writeInt( VERSION );
            dos.writeInt( list.size());

            for (String url : list) dos.writeUTF( url );
        }
        catch (IOException e) {
        }
    }
} 
```

在您的主要课程中：

```
History  historyObject= new History(MainActivity.this)
while (cursor.moveNext()) {
    historyObject.addUrl(cursor.getString(0));
} 
```

使用自动完成文本框代替编辑文本

```
autocompleteText.setAdapter(historyObject.getArrayAdapter()); 
```

希望它会帮助你:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:28:10.983

您需要使用[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)并使用从 ContactsContract 读取的联系人姓名来填充适配器。代码：

```
 String CONTACTS[] = null;
    Cursor contactsCursor  = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, new String[]{Contacts.DISPLAY_NAME}, null, null, null);
    if(contactsCursor!=null){
        CONTACTS = new String[contactsCursor.getCount()];//(contactsCursor.getCount())];
        int i=0;
        while(contactsCursor.moveToNext()) {
            CONTACTS[i] = contactsCursor.getString(contactsCursor.getColumnIndex(Contacts.DISPLAY_NAME));
            i++;
        }
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, CONTACTS);
    AutoCompleteTextView textView = (AutoCompleteTextView)
            findViewById(R.id.autocompleteTextView);
    textView.setAdapter(adapter); 
```

# mysql - 具有多个 JOIN 的 MySQL UPDATE 表

> ID：11540920
> 
> 赞同：0
> 
> 时间：2012-07-18T12:02:50.147
> 
> 标签：mysql, join, insert

我需要向表中添加一些记录，但只有那些与某个链接表匹配的记录。三张表如下：

```
extension_prefs (extension_id, value, parameter)
extension (id, client_id)
client (id, parent_client_id) 
```

这些将链接如下：

```
extension_prefs.extension_id = extension.id AND extension.client_id = client.id 
```

`extension_prefs`我需要为属于特定客户端的每个扩展插入 4 条记录`parent_client_id`。我不知道实现这一点的语法，尽管我觉得它非常简单。

编辑：是的，我搞砸了，这些记录需要更新而不是插入。

非常感谢

乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:33:31.160

您可以为每个首选项调用以下查询，它将为所有必要的扩展保存。

更新：以下查询为首选项插入一个新行，或者如果它存在，则更新现有行。
这假定 extension_prefs 表对 extension_id 和参数列具有唯一约束。

```
INSERT INTO extension_prefs (extension_id, parameter, value)
  SELECT e.id, "key", "value"
   FROM extension e
   JOIN client c ON e.client_id = c.id
   WHERE c.parent_client_id = 123
ON DUPLICATE KEY
  UPDATE value = "value" 
```

# php - 找出由 PHP 的 mcrypt 创建的确切密钥

> ID：11540924
> 
> 赞同：12
> 
> 时间：2012-07-18T12:03:08.040
> 
> 标签：php, mcrypt, rijndael

我正在维护的 PHP 应用程序使用 Rijndael_256 和 EBC_MODE 加密和 mcrypt。有趣的是，密钥不是 256 位长，而是只有 160 位。根据[`mcrypt_encrypt`](http://www.php.net/manual/en/function.mcrypt-encrypt.php)文档，如果密钥太小，则用 \0 填充密钥以获得所需的大小。

> 用于加密数据的密钥。如果它小于所需的密钥大小，则用 '\0' 填充。最好不要将 ASCII 字符串用作键。

这似乎发生在[mcrypt.c 的第 1186 行开头](https://github.com/php/php-src/blob/master/ext/mcrypt/mcrypt.c#L1186)并在第 1213 行修改密钥。

所以假设我们得到`$key = 'abcdefghijkm';`的太短了，但是 PHP 的 mcrypt 实现确保它在使用 RIJNDAEL_256 时扩展到 32 个字符（或 256 位）。最终的钥匙会是什么样子？

我问这个是因为正在构建另一个使用相同加密数据但使用另一种语言的应用程序。确切地说是 Perl，我正在使用[`Crypto::Rijndael`](https://metacpan.org/module/Crypt::Rijndael). 对于给定的示例密钥，我必须提供的确切密钥`Crypto::Rijndael`（或任何其他密钥）才能再次解密数据？

**更新**

使用 Perl，我可以生成一个 \0 填充的密钥`pack('a32', 'my secret key');`（或`Z32`），`length()`将报告 32 并且`Crypt::Rijndael`模块接受该密钥。查看 PHP 的 mcrypt 的来源，这应该是正在生成的密钥（\0 填充），但它根本不会接受它。

理论上在 PHP 中`pack('a32', 'my secret key');`应该产生与 PHP 的 mcrypt 生成相同的 \0 填充密钥，但事实并非如此。

我非常接近再次加密所有内容，但使用新密钥。这需要太多时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T23:24:12.257

问题不在于键的填充，而在于您使用了两种不同的块大小。在 PHP 中，using`MCRYPT_RIJNDAEL_256`使用的块大小为... 256 位。但是，在 perl using 中`Crypt::Rijndael`，他们注意到：

> **blocksize**
> Rijndael 的块大小为 16 字节（128 位），尽管该算法实际上支持任何字节的任意倍数的块大小。**然而，128 位是 AES 指定的块大小，所以这就是我们支持的全部**。

因此，没有允许在这些不同算法之间进行转换的密钥。您可以在 PHP 中切换到 128 位：

```
<?
$key = "abcdefghijklmnopqrstuvwxyz";
$data = "Meet me at 11 o'clock behind the monument.";
$crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_ECB, nil);
echo bin2hex($crypttext) . "\n";
// prints c613d1804f52f535cb4740242270b1bcbf85151ce4c874848fd1fc2add06e0cc2d26b6403feef4a8df18f7dd7f8ac67d
?> 
```

哪个 Perl 可以使用 Crypt::Rijndael 毫无问题地解密：

```
use Crypt::Rijndael;
$key = "abcdefghijklmnopqrstuvwxyz\0\0\0\0\0\0";
$crypttext = "c613d1804f52f535cb4740242270b1bcbf85151ce4c874848fd1fc2add06e0cc2d26b6403feef4a8df18f7dd7f8ac67d";
$cipher = Crypt::Rijndael->new($key, Crypt::Rijndael::MODE_ECB());
print $cipher->decrypt(pack('H*', $crypttext));
# prints "Meet me at 11 o'clock behind the monument." 
```

或者您可以切换到支持更多块大小的不同 Perl 模块，例如[Crypt::Rijndael_PP](http://search.cpan.org/~delta/Crypt-Rijndael_PP-0.04/Rijndael_PP.pm)：

```
# Same PHP code except using MCRYPT_RIJNDAEL_256
# prints f38469ec9deaadbbf49bb25fd7fc8b76462ebfbcf149a667306c8d1c033232322ee5b83fa87d49e4e927437647dbf7193e6d734242d583157b492347a2b1514c 
```

珀尔：

```
use Crypt::Rijndael_PP ':all';
$key = "abcdefghijklmnopqrstuvwxyz\0\0\0\0\0\0";
$crypttext = "f38469ec9deaadbbf49bb25fd7fc8b76462ebfbcf149a667306c8d1c033232322ee5b83fa87d49e4e927437647dbf7193e6d734242d583157b492347a2b1514c";
print rijndael_decrypt(unpack('H*', $key), MODE_ECB, pack('H*', $crypttext), 256, 256);
# prints "Meet me at 11 o'clock behind the monument." 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T13:36:42.583

'\0' 表示 NULL，它的十六进制值为 00 ！所以我测试了 3 个代码，它们返回的都是一样的 :)

1.  让 mcrypt_encrypt 做 '\0' 填充
2.  添加了 PHP NULL 值
3.  添加了 PHP 转换的 0 十六进制值

代码：

```
function encryptThis($text,$key){
    $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $crypttext = mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, $iv);
    return ($crypttext);
}

echo bin2hex(encryptThis("Meet me at 11 o'clock behind the monument.", "abcdefghijklmnopqrstuvwxyz"))."<br/>";

echo bin2hex(encryptThis("Meet me at 11 o'clock behind the monument.", "abcdefghijklmnopqrstuvwxyz" . NULL . NULL . NULL . NULL . NULL . NULL))."<br/>";

echo bin2hex(encryptThis("Meet me at 11 o'clock behind the monument.", "abcdefghijklmnopqrstuvwxyz" . hex2bin(0) . hex2bin(0) . hex2bin(0) . hex2bin(0) . hex2bin(0) . hex2bin(0)))."<br/>";

?> 
```

# javascript - collada 模型看起来很奇怪（three.js）

> ID：11540925
> 
> 赞同：2
> 
> 时间：2012-07-18T12:03:11.107
> 
> 标签：javascript, webgl, three.js, collada

collada 模型在three.js 中看起来很奇怪。截图：

![警察](../Images/132bc3d16ada7462657b2edd248679f3.png)

代码很简单，没什么特别的：

```
loader.load( 'models/police_car.dae', function ( collada ) {
  dae = collada.scene;

  init();
}); 
```

我从谷歌sketchup仓库下载了模型。[[链接](http://sketchup.google.com/3dwarehouse/details?mid=ce77b7e28b298ce21ab9df4be75138d0&prevstart=0)]

我不知道是什么问题，因为我是 three.js 的新手。我应该调用一个函数来修复它吗？

提前致谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:44:58.547

我认为这是因为没有渲染背面。COLLADA 无法指定一个面是否应该是双面的。Google 地球使用此方法导出此信息：

```
<extra>
  <technique profile="GOOGLEEARTH">
    <double_sided>1</double_sided>
  </technique>
</extra> 
```

Three.js 在调用的对象上使用一个属性`doubleSided`来指示面部是否为双面，但 ColladaLoader.js 不会寻找`<extra>`标签来设置属性。您应该使用 three.js 提交一个错误以添加对它的支持。

**编辑：**这似乎已在 dev 分支上修复。这是我加载此模型的内容：

![在此处输入图像描述](../Images/b4c12e7be1931371794cec9b1b032706.png)

透过半透明的车窗，您可以清楚地看到车内的仪表板。

# mysql - 多个连接来收集用户评分？

> ID：11540927
> 
> 赞同：0
> 
> 时间：2012-07-18T12:03:15.357
> 
> 标签：mysql, join, subquery, rating

我有一个名为引号的表：

```
id date       content
80 2012-06-03 This is the first quote.
81 2012-06-05 Lorem Ipsum. 
```

还有一个名为评级的表格：

```
rid uid qid rating
1   4   80  -1
2   4   81  1 
```

uid 字段是指进行该评分的登录用户。报价网站仅对登录用户开放，我希望能够向当前用户显示报价，包括指示报价当前评级的信息，他们是否对报价进行了评级，如果是，他们的评级它作为。评级可以是 -1 或 1。报价与提交报价的用户无关。

如果我只想获取一个报价，我执行这个查询（例如报价 80 和用户 4）：

```
SELECT
  q.id AS qid, q.content, q.date,
  COALESCE(SUM(r.rating), 0) AS rating,
    (SELECT COALESCE(rating, 0) FROM ratings WHERE qid = 80 AND uid = 4 LIMIT 1)
      AS user_rated
  FROM quotes q
  LEFT JOIN ratings r ON q.id = r.qid
  WHERE q.id = 80
  GROUP BY q.id 
```

我将如何修改它以显示多个报价（即不仅仅是报价 ID 80），但保留 user_rated 和评级信息？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:28:17.000

```
SELECT
  q.id AS qid,
  q.content,
  q.date,
  COALESCE(SUM(r.rating), 0) AS rating,
  COALESCE(SUM(IF(r.uid = 4, r.rating, NULL)), 0) AS user_rated
FROM quotes q
LEFT JOIN ratings r ON q.id = r.qid
GROUP BY q.id 
```

# actionscript-3 - ActionScript 3 MouseEvent 运行一次

> ID：11540937
> 
> 赞同：0
> 
> 时间：2012-07-18T12:03:39.320
> 
> 标签：actionscript-3

我想要做的是运行一次我的监听器函数。问题是，一旦我将鼠标悬停在我的影片剪辑“按钮”上，它就会一次又一次地进入一个新循环。当补间事件完成时，如何让它**只运行一次？**

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

function Over (e:MouseEvent):void
{
trace('Over');
var myTweenUp:Tween = new Tween(button, "y", Back.easeOut, 200, 180, 2, true);
}

function Out (e:MouseEvent):void
{
trace('Out');
var myTweenDown:Tween = new Tween(button, "y", Back.easeOut, 180, 200, 2, true);
}
button.addEventListener(MouseEvent.MOUSE_OVER, Over);

button.addEventListener(MouseEvent.MOUSE_OUT, Out); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:05:28.623

如果要运行这两个 MouseEvent，可以添加 removeEventListener 来实现。

```
function Over (e:MouseEvent):void
{
trace('Over');
var myTweenUp:Tween = new Tween(button, "y", Back.easeOut, 200, 180, 2, true);
button.removeEventListener(MouseEvent.MOUSE_OVER, Over);
}

function Out (e:MouseEvent):void
{
trace('Out');
var myTweenDown:Tween = new Tween(button, "y", Back.easeOut, 180, 200, 2, true);
button.removeEventListener(MouseEvent.MOUSE_OUT, Out);
}

button.addEventListener(MouseEvent.MOUSE_OVER, Over);
button.addEventListener(MouseEvent.MOUSE_OUT, Out); 
```

如果你想制作一个循环，当鼠标悬停在运行 Over 的按钮上并一个接一个地运行 Out 时，你可以尝试下面的编码：

```
function Over (e:MouseEvent):void
{
trace('Over');
var myTweenUp:Tween = new Tween(button, "y", Back.easeOut, 200, 180, 2, true);
button.removeEventListener(MouseEvent.MOUSE_OVER, Over);
button.addEventListener(MouseEvent.MOUSE_OUT, Out);
}

function Out (e:MouseEvent):void
{
trace('Out');
var myTweenDown:Tween = new Tween(button, "y", Back.easeOut, 180, 200, 2, true);
button.removeEventListener(MouseEvent.MOUSE_OUT, Out);
button.addEventListener(MouseEvent.MOUSE_OVER, Over);
}

button.addEventListener(MouseEvent.MOUSE_OVER, Over); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T20:30:51.920

我认为**@loxxy**的解决方案应该可以解决问题。 **首先尝试该解决方案。**

如果没有，则在事件触发后尝试删除侦听器。您也可以稍后重新添加它。

例如：

```
function Over (e:MouseEvent):void
{
    button.removeEventListener(MouseEvent.MOUSE_OVER, Over);
    [...]
}

function Out (e:MouseEvent):void
{
    button.addEventListener(MouseEvent.MOUSE_OVER, Over);
    [...]
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:13:23.987

上面的代码没有问题。

我认为您正在将代码添加为框架脚本，即在 IDE 中的时间轴框架上。

如果是这种情况，只需`stop();`在上面的代码片段之前添加。

```
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

stop();

// ... rest of the code 
```

# objective-c - 表格单元格未出现在表格视图目标-C中

> ID：11540943
> 
> 赞同：0
> 
> 时间：2012-07-18T12:03:49.977
> 
> 标签：objective-c, ios, storyboard

我有一个连接到导航控制器的 tableviewcontroller 类。

但我不知道为什么当我运行它时我的单元格没有出现，而且我只有一个带有标签栏的导航栏，这是我的代码：

另一个问题是我想在顶部的导航栏中设置对齐按钮，但我所有的按钮都在右边我知道我使用了 rightBarButtonItems 但我不知道我应该在那里证明它的合理性。

```
 self.navigationItem.rightBarButtonItems = buttons; 
```

你能帮帮我吗！提前致谢！

![在此处输入图像描述][2]

```
- (void)viewDidLoad
{
[super viewDidLoad];

 UIBarButtonItem *menuButton= [[UIBarButtonItem alloc] initWithTitle:@"Menu" style:UIBarButtonItemStyleDone        target:self action:@selector(menu:)];
UIBarButtonItem *yearButton= [[UIBarButtonItem alloc] initWithTitle:@"Year" style:UIBarButtonItemStyleDone target:self action:@selector(year:)];
UIBarButtonItem *weekButton= [[UIBarButtonItem alloc] initWithTitle:@"Week" style:UIBarButtonItemStyleDone target:self action:@selector(week:)];
UIBarButtonItem *reportButton= [[UIBarButtonItem alloc] initWithTitle:@"Report" style:UIBarButtonItemStyleDone target:self action:@selector(report:)];

NSArray *buttons = [NSArray arrayWithObjects:menuButton,yearButton,weekButton,reportButton,nil];
self.navigationItem.rightBarButtonItems = buttons;

}

- (void)viewDidUnload
{

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
// Return the number of sections.
return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
// Return the number of rows in the section.
return 0;
 }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {

 static NSString *CellIdentifier = @"Cell";
 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

 return cell;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:06:40.297

您在情节提要中配置了一个静态表格视图。由于您没有使用某种动态数据填充它，因此如果您**删除****下面**的孔代码部分应该没问题：

```
#pragma mark - Table view data source 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:37:57.340

您是否从 .xib 文件中设置了 tableview 的数据源和委托？还要在委托 cellForRowAtIndexPath 中添加一些文本并再次检查。

# javascript - 仅在 Internet Explorer 中未定义命名空间？

> ID：11540947
> 
> 赞同：0
> 
> 时间：2012-07-18T12:04:01.673
> 
> 标签：javascript, google-closure-library

我正在使用 Google Closure Library 来实施一个非常大规模的项目。我刚刚开始研究它，但是我在 IE8 中遇到了一个奇怪的错误。它是唯一能在页面中检测到 JavaScript 错误的浏览器，我不明白为什么。

[http://www.niuzly.com/ajax/niuzly.base.js](http://www.niuzly.com/ajax/niuzly.base.js)

这是所使用的 JS 脚本的链接。它使用 Google JavaScript 指南，所以应该很容易理解所有内容。感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:58:03.093

链接的 JavaScript 文件“niuzly.base.js”不会出现`goog.provide`在命名空间中。尝试在您的版权声明下方添加以下行：

```
goog.provide('niuzly.base.renderPage'); 
```

您还应该明确地`goog.require`“goog.dom”：

```
goog.require('goog.dom'); 
```

# c# - 将一个节点从 tabItem 添加到另一个 tabItems

> ID：11540948
> 
> 赞同：1
> 
> 时间：2012-07-18T12:04:03.513
> 
> 标签：c#, wpf, tabcontrol, tabitem

我的`TabControl`;中有多个 TabItems `tabItem1`, `tabItem2`, `tabItem3`...这些是`CloseableTabItem`。

如果我在其中添加一个节点`tabItem1`并按下按钮为该节点创建一个 subGraph 模型，相同的节点应该出现在`tabItem2`; 以便

`tabItem2-Header = nodeName`和`nodeName = tabItem1-Header`。

代码工作正确，但问题是如果我添加一个新节点`tabItem2`并按下 subGraph-Button，该节点将被添加到`tabItem3`但`nodeName = tabItem1-Header`.

我想我需要在`if()`我的第一个条件旁边写另一个条件，但我不知道什么条件适合

```
MyNodeData todata = new MyNodeData();
if (tabItem1.IsLoaded)
{
  string childNodeName = (String)tabItem1.Header;
  todata.Text = childNodeName;
  return; 
}
if (tabItem2.IsLoaded) 
{
  string childNodeName = (String)tabItem2.Header;
  todata.Text = childNodeName;
  return;
}
if (tabItem3.IsLoaded)
{
  string childNodeName = (String)tabItem3.Header;
  todata.Text = childNodeName;
  return;
} 
```

# android - Android多行EditText

> ID：11540961
> 
> 赞同：6
> 
> 时间：2012-07-18T12:04:33.247
> 
> 标签：android, android-layout

我有一个多行 EditText 和它下面的提交按钮。
当用户点击 EditText 区域时，会出现软键盘。
它上面有一个回车键，使用户能够移动到下一行。
我的问题是软键盘隐藏了我的提交按钮 - 所以当用户完成编辑时，他/她必须按设备上的后退按钮来隐藏软键盘才能提交。
有没有办法在键盘上同时保留输入和完成按钮？或者，还有其他更好的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:58:52.930

您还可以`imeAction`在 xml 布局中进行设置，只要您的 editText 具有这些事件的侦听器，您就可以直接从软键盘调用 Done/Next/Search 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:37:46.113

是的，您可以使用按钮始终位于页面底部但位于键盘顶部的布局，如下所示

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

        <Button
            android:id="@+id/button_save"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:enabled="false"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:text="@string/button_save" />

    <ScrollView
        android:id="@+id/scroll_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_above="@+id/button_save"
        android:fadeScrollbars="false"
        >

...all your stuff here
</ScrollView>

</RelativeLayout> 
```

# boost - 告诉 NVCC 不要预处理主机代码以避免 BOOST_COMPILER 重新定义

> ID：11540962
> 
> 赞同：2
> 
> 时间：2012-07-18T12:04:34.263
> 
> 标签：boost, cuda, nvcc

我有一个包含主机和设备代码的 .cu 文件：

```
// device code
__global__ void
myKernel() { ... }

// host code
#include <boost/thread/mutex.hpp>

boost::mutex myMutex;

int main() { ... } 
```

如您所见，我包含了 boost 的互斥锁功能。当我编译文件时，由于以下警告而出现错误：

```
warning C4005: 'BOOST_COMPILER': Macro-Redefinition c:\boost\include\boost-1_49_0\boost\config\compiler\visualc.hpp 
```

所以我假设 nvcc 处理设备代码和主机代码的所有预处理。我是对的，如果是的话，我怎样才能避免这种情况并将预处理传递给 cl.exe（MSVC 2010，Win7）？

我已经尝试将主机代码放在单独的 hpp/cpp 文件中，并将该文件包含在 cu 文件中 - 同样的问题。在主机代码中，我定义了一个将在设备代码中使用的表面参考。所以这就是我需要在 cu 文件和主机代码中包含设备代码分别知道的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:26:53.993

这是`nvcc`（技术上`cudafe`，我认为）的一个已知限制。nvcc 使用文件扩展名来确定是否应该为设备代码处理给定的源文件或传递给 CUDA 预处理器，然后传递给设备编译器。该编译轨迹无法正确解析 boost 包含的一些非常复杂的声明，因此编译失败。

解决方案是不要在`.cu`文件中导入 boost 标头。将您的主机升压代码放在一个`.cc`文件中，设备代码和内核启动在一个单独的文件中，并制作一些瘦包装器以从该文件`.cu`访问内核调用。`.cc`您仍然可以将所有源代码传递`nvcc`给编译，但是将 boost 导入与设备代码分开可以消除前端在 boost 声明中阻塞的问题。

# find - 使用“xargs”和“tar”进行“查找”

> ID：11540964
> 
> 赞同：15
> 
> 时间：2012-07-18T12:04:39.563
> 
> 标签：find, tar, xargs

我有以下我想做的事情：

```
find . -maxdepth 6 \( -name \*.tar.gz -o -name bediskmodel -o -name src -o -name ciao -o -name heasoft -o -name firefly -o -name starlink -o -name Chandra \) -prune -o -print | tar  cvf somefile.tar --files-from=- 
```

即，排除一大堆东西，只看六个子目录深度，然后一旦修剪完成，剩下的就“焦油”了。

这并不难。管道 (|) 之前的位 100% 工作。如果我排除了“焦油”，那么我就会得到我想要的（在屏幕上）。但是，一旦我包含了管道和焦油，它就会对所有内容进行焦油化，包括我刚刚在“查找”中排除的所有内容。

我尝试了许多不同的迭代：

```
-print0 | xargs -0 tar rvf somefile.tar
-print0 | xargs -0 tar rvf somefile.tar --null --files-from=-
-print0 | tar cvf somefile.tar --null -T - 
```

那么我做错了什么？我以前做过这个；但现在它只是给了我白发。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-03-13T16:25:33.667

查找标志的组合`-print`，然后`--files-from`在“tar”命令上为我工作。在我的情况下，我需要压缩 5000 多个日志文件，但仅使用“xargs”在结果文件中只给了我 500 个文件。

```
find . -name "*.pdf" -print | tar -czf pdfs.tar.gz --files-from - 
```

你有“--files-from=-”，当你只想要“--files-from-”时，我认为你需要一个`-`在前面`cvf`，如下所示。

```
find . -maxdepth 6 ( -name *.tar.gz -o -name bediskmodel -o -name src -o -name ciao -o -name heasoft -o -name firefly -o -name starlink -o -name Chandra ) -prune -o -print| tar -cvf somefile.tar.gz --files-from - 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T09:44:17.610

我记得做了类似下面一行的事情来“tar”一堆文件。我对我想要分组的文件很明确，所以我运行了这样的东西：

```
find . -name "*.xyz" | xargs tar cvf xyz.tar; 
```

在您的情况下，我想知道您为什么在 -print 似乎再次包含所有内容之前执行“-o”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T16:48:07.160

如果您的“查找”正在返回目录，那么这些目录将被传递给“tar”，并且将包含完整的内容，而不管您的“查找”命令中的排除项如何。

因此，我认为您需要在“查找”中包含“-type f”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T20:02:45.397

我使用了前两种方法的组合。为了备份一天的工作，我这样做：

```
rm -rf new.tgz; find . -type f -mtime 0 | xargs tar cvf new.tgz; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-17T11:25:23.403

在`files-from`没有选项的情况下使用是使它对我有用的唯一方法。所有其他选项包括目录中的所有文件，而不是我生成的列表。

这是我的解决方案：

```
find . ! -name '*.gz' -print | xargs tar cvzf ../logs.tar.gz --files-from 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-25T13:23:41.370

这适用于我，其中 ARG 可以是任何名称 var

寻找 。-name "*.tar.gz" -print | xargs -I ARG 焦油 -xvzf ARG

# c# - 无法破译此错误消息以了解如何处理它

> ID：11540965
> 
> 赞同：0
> 
> 时间：2012-07-18T12:04:43.913
> 
> 标签：c#, .net, jquery, c#-3.0

有人知道为什么我会收到此错误消息吗？

**错误信息：**

```
{"Message":"Invalid JSON primitive: tab_group_48.","StackTrace":" at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()\r\n at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeDictionary(Int32 depth)\r\n at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\r\n at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\r\n at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

**jQuery：**

可靠的 jQuery 看起来像这样：

```
$.ajax({
    type: 'POST',
    url: '/webservices/minimised.asmx/UpdateState',
    data: '{ strTabID:' + tab + ', strWidgetID:' + widget[1] + ', intState:' + state + ' }', 
```

**发布到服务器的数据**

在这个例子中：

数据变成=`{ strTabID:tab_group_48, strWidgetID:portlet_4, intState:0 }`

**C#：**

而可靠的 webservice 部分 c# 如下所示：

```
[WebMethod()]
public int UpdateState(string strTabID, string strWidgetID, int intState)
{
    intTabID = Convert.ToInt32(strTabID.Replace("tab_group_", ""));
    strQuery = "update columns set unminimised = @state where tabs_id = @tab and widgets_id = @widget";

    intWidgetID = Convert.ToInt32(strTabID.Replace("portlet_", string.Empty));

    using (connection = new SqlConnection(ConfigurationManager.AppSettings["connString"]))
    {
        using (command = new SqlCommand(strQuery, connection))
        {
            command.Parameters.Add("@tab", SqlDbType.Int, 4).Value = intTabID;
            command.Parameters.Add("@widget", SqlDbType.Int, 4).Value = intWidgetID;
            command.Parameters.Add("@state", SqlDbType.Int, 4).Value = intState;

            connection.Open();
            intAffectedRows = command.ExecuteNonQuery();
            connection.Close();
        }
    }

    return intAffectedRows;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:10:56.710

您的 JSON 数据格式无效，您需要用单引号将值括起来，例如

```
"{ strTabID: '" + tab + "', strWidgetID: '" + widget[1] + "', intState: '" + state + "' }"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:17:32.940

看起来您实际上需要将 tab_group_48 放入撇号。试试这个：

```
data: "{ strTabID:'" + tab + "', strWidgetID:'" + widget[1] + "', intState:'" + state + "' }" 
```

# asp.net - 具有相同 ID 问题的多个控件的自定义控件？

> ID：11540966
> 
> 赞同：0
> 
> 时间：2012-07-18T12:04:43.993
> 
> 标签：asp.net

我在下面定义了一个非常简单的自定义控件：

```
public class TestCtrl : WebControl
{
    protected override void OnInit(EventArgs e)
    {
        var btn = new Button() { ID = "test", Text = "text"};
        this.Controls.Add(btn);
    }
} 
```

但是，当我希望将它们的多个实例放在同一页面上时，我得到...

> '找到了具有相同 ID'test' 的多个控件。

...单击时`btn`。

```
 protected void Page_Init(object sender, EventArgs e)
    {
        var ctrl1 = new TestCtrl() { ID = "ctrl1" };
        plc.Controls.Add(ctrl1);
        var ctrl2 = new TestCtrl() { ID = "ctrl2" };
        plc.Controls.Add(ctrl2);
    } 
```

有没有一种干净的方法来阻止这种情况发生？我尝试将 ClientIDMode 设置为“自动”但没有成功，因为`name`渲染标记的属性`"test"`在两个按钮上。

编辑：通过将“INamingContainer”添加到控件来解决 `public class TestCtrl : WebControl, INamingContainer{...}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T13:50:57.033

编辑：通过将“INamingContainer”添加到控件公共类 TestCtrl 来解决：WebControl，INamingContainer{...}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T19:10:19.890

你走错路了。

```
 public class TestCtrl : WebControl, INamingContainer {

     private button btn;

     [Bindable(true), Category("Content"), DefaultValue(""), Description("Gets or Sets the Fields that are to be added to the ListItems")]
     public string TextField {
        get { EnsureChildControls(); return btn.Text; } 
        set { EnsureChildControls(); btn.Text = value; }
     }

     [Bindable(true), Category("Content"), DefaultValue(""), Description("Gets or Sets another field of your choice")]
     public string SomeStringField{
        get { return ViewState["_someStringField"] != null ? ViewState["_someStringField"].ToString() : String.Empty ;  }
        set { ViewState["_someStringField"] = value; }
     }

     protected override void OnInit(EventArgs e) {
         base.OnInit(e);
     }

     protected override void CreateChildControls() {
         btn = new button();
         btn.id = "btn";

         this.Controls.Add(btn);
     }

     protected override void Render(HtmlTextWriter writer) {
         writer.Write(<b>SomeStringField + ":</b>");
         btn.RenderControl(writer);
     }

 } 
```

将其添加到您的页面后

这将显示一个标签，然后是它旁边的按钮。您想要但 CreateChildControls 中的 id，以便为它分配一个唯一的 ID。EnsureChildControls 将确保正确加载属性。您可以从控件中的几乎任何位置调用此方法，但我会在 OnInit 之后执行此操作。如果不是，那么 Id 将被混淆。有时他们会工作，而其他人则不会。Jquery 的 Javascript 也会让你头疼。

我会参考微软的例子。他们有很多，非常有帮助。

[http://msdn.microsoft.com/en-us/library/aa479016.aspx](http://msdn.microsoft.com/en-us/library/aa479016.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:26:10.480

因为您在 OnInit 方法中指定了 btn 的 ID 等于“test”，因此当您将控件添加到页面时，它为控件设置了 ID = test。我认为没有必要在 OnInit() 方法中设置 ID 属性。将以下代码添加到您的渲染方法

```
protected override void OnInit(EventArgs e)
{
    var btn = new Button() { Text = "text"}; // No need to add ID property
    this.Controls.Add(btn);
} 
```

# java - WSDL 中 SOAP 地址位置上的 JMS：这是什么意思？

> ID：11540968
> 
> 赞同：0
> 
> 时间：2012-07-18T12:04:56.417
> 
> 标签：java, soap, wsdl, jms, httpurlconnection

我正在查看一个 wsdl，它包含`soap:address location`一个值为`jms:/queue?destination=...`.

*   `soap:address`WSDL 上的值有什么用？
*   它会影响客户端连接到 Web 服务的方式吗？

另外，我尝试在 Google 上搜索`jms:/queue?destination=...`，结果中出现了“SOAP over JMS”一词。

*   什么是“JMS”，什么是“SOAP over JMS”？

我在客户端工作，所以我担心是否需要为此采取任何措施。目前，我只知道如何通过`HttpUrlConnection`.

下面是 WSDL 文件的示例：（如下所示，使用的传输协议是 HTTP，但随后服务也将其与 JMS 地址一起使用？我在这里有点困惑。这是 SOAP over HTTP 还是 SOAP通过 JMS？）

```
<wsdl:binding name="MethodSOAP_JMS_Binding" type="tns:MethodPortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" />
    <wsdl:operation name="methodName">
        <soap:operation soapAction="" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" />
        <wsdl:input name="method_Input">
            <soap:body parts="RequestBean" use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" />
        </wsdl:input>
        <wsdl:output name="method_Output">
            <soap:body parts="ResponseBean" use="literal" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>

<wsdl:service name="MethodSOAP_JMS_Service">
    <wsdl:port binding="tns:MethodSOAP_JMS_Binding" name="MethodSOAPPort">
        <soap:address location="jms:/queue?..." xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" />
    </wsdl:port>
</wsdl:service> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T20:49:50.360

JMS，Java Message Service，是一种在系统之间发送可靠消息的 Java 标准。消息永远不会在系统之间直接发送，例如 HTTP，而是由兼容 JMS 的服务器软件存储和转发。JMS 消息是一些标头和各种类型的有效负载，但对于 SOAP，它很可能是字符串有效负载，因为 SOAP 是基于 XML 的。

JMS URL 不像 HTTP url 那样“独立”。

像这个：

```
jms:///queue?connectionfactory=MyQCF&destination=MyQ 
```

它说你应该连接一个叫做 MyQCF 的连接工厂和一个叫做 MyQ 的目的地。确切地说，这意味着必须在其他地方配置，它没有说明特定的物理服务器等。这在 JMS 中很常见，因为建立与 JMS 服务器的连接的最常见方法是通过名为 JNDI 的配置文件或寄存器。在该配置中，供应商特定的设置和配置解析为要联系的服务器、服务器的供应商/版本、目的地（主题或队列）等。

没有像获得一个开源的 java 库然后开始那么简单。所有 JMS 供应商都是独特的实现。（示例。IBM WebSphere MQ、Apache ActiveMQ、Tibco EMS、OpenMQ、HornetQ）。有一些开源和一些商业。您需要确定在您的基础架构中使用了哪个特定的 JMS 供应商，根据该供应商的文档设置 JMS 配置。一些供应商允许在 JMS url 中进行完整设置，例如 ActiveMQ。它仍然需要在 java 中加载的特定库。

JMS 上的 SOAP 简单地使用 SOAP 的所有通用标准，例如 WSDL、WS-Security 等，但 JMS 增加了可靠性和事务性以及松散耦合，这反过来又为系统和配置复杂性提供了交易的健壮性。

如果您没有考虑特定的 JMS 供应商和库，您可能希望查看 CXF 和 ActiveMQ 以启动和运行 SOAP over JMS。指南可以在[这里](http://cxf.apache.org/docs/soap-over-jms-10-support.html)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:22:38.033

基本上，JMS 是用于消息传递的中间件服务，请参阅：[http ://en.wikipedia.org/wiki/Java_Message_Service](http://en.wikipedia.org/wiki/Java_Message_Service)

'soap:address' 定义了服务的位置。

“SOAP over JMS”意味着您通过 JMS 队列将 SOAP 请求发送到服务，请参见图 1：[http ://www.ibm.com/developerworks/websphere/library/techarticles/0402_du/0402_du.html](http://www.ibm.com/developerworks/websphere/library/techarticles/0402_du/0402_du.html)

在客户端，您必须连接到相应的 JMS 队列。是否透明处理（或完全支持）取决于您的库。

另一个教程： [http ://www.ibm.com/developerworks/websphere/library/tutorials/0903_adams/index.html](http://www.ibm.com/developerworks/websphere/library/tutorials/0903_adams/index.html)

SO有几个相关的问题。

# android - Andengine eglSwapBuffers 失败

> ID：11540970
> 
> 赞同：1
> 
> 时间：2012-07-18T12:05:02.603
> 
> 标签：android, opengl-es, andengine

我知道之前有人问过这个问题，但仍然没有答案，所以问题出在：我在游戏中收到以下异常：

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_SUCCESS
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1085)
at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1043)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1369)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1123) 
```

和

```
java.lang.RuntimeException: eglSwapBuffers failed: EGL_BAD_ALLOC
at android.opengl.GLSurfaceView$EglHelper.throwEglException(GLSurfaceView.java:1082)
at android.opengl.GLSurfaceView$EglHelper.swap(GLSurfaceView.java:1040)
at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1338)
at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1121) 
```

这只发生在某些设备上，我无法在我的设备上重现它。我知道很多人报告了这个问题。有没有人找到任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:22:15.813

有时可以通过将纹理大小减小到 1024x1024 来解决此错误。

# php - fputcsv - 只有一列

> ID：11540976
> 
> 赞同：4
> 
> 时间：2012-07-18T12:05:16.857
> 
> 标签：php, mysql, arrays, csv, fputcsv

我想将我的 mysql 数据库的部分（并且排列方式不同）保存在 CSV 文件中。为此，我编写了这段代码：

```
$headerDisplayed = false;
foreach ($arr as &$currName)
{
    $result2 = mysql_query("SELECT * FROM Experiment Where Person='$currName'"); 
    $i = 1;
    while ($row2 = mysql_fetch_array($result2)) 
    {
        $list['Name'] = $currName;
        $list['Studie'] = $row2['Studie']; 
        if(strcmp($row2['Antwort'],$row2['Korrekt']) == 0)
        {
            $list["A $i"] = '0';
        }
        else
        {
            $list["A $i"] = '1';
        }

        $i++;
    }

    if ( !$headerDisplayed ) {
        // Use the keys from $data as the titles
        fputcsv($fp, array_keys($list));
        $headerDisplayed = true;
    }

    fputcsv($fp, $list);
}

fclose($fp); 
```

不幸的是，这不是我想要的。我的计划是`$list`（例如`$list["A 1"]`或`$list["A 15"]`）的每个条目都有自己的列。然后调用应该为每个条目`fputcsv`创建一个新行和一列。正如预期的那样，`$list`我每次调用都会创建新行，但完整的数组位于第一列（最左边）。`fputcsv``$list`

我该怎么做才能解决这个问题？

**补充：** 我得到类似的东西：

```
[1,0,0,0,1,1,0,0] [] [] [] [] [] [] []

[1,0,1,1,0,1,0,0] [] [] [] [] [] [] []

[0,1,1,1,1,1,0,1] [] [] [] [] [] [] [] 
```

但我想要的更像是：

```
[1] [0] [0] [0] [1] [1] [0] [0]

[1] [0] [1] [1] [0] [1] [0] [0]

[0] [1] [1] [1] [1] [1] [0] [1] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T12:20:26.837

这个：

```
fputcsv($fp, array_values($list)); 
```

编辑：

使用它可以立即使用 excel：

```
fputcsv($fp, array_values($list), ';', ' '); 
```

编辑 2：在 excel 中用作字段分隔符的默认字符由 windows 的区域设置设置。这意味着：如果您导出具有德语语言环境设置的 csv 文件，将导致美国环境中的 excel 出现问题......另一个[线程](https://superuser.com/questions/180964/how-to-open-semicolon-delimited-csv-files-in-us-version-of-excel)涵盖了这个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:32:21.117

试试这个

```
fputs($fp, implode(array_keys($list), ',')."\n");

fputs($fp, implode(array_values($list), ',')."\n"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T12:11:22.107

你必须做一个矩阵：

```
 {
            $list["A"]["$i"] = '0';
        }
        else
        {
            $list["A"]["$i"] = '1';
        } 
```

[请参见http://php.net/manual/en/function.fputcsv.php](http://php.net/manual/en/function.fputcsv.php)的示例 1

# android - 假定在平板电脑上未重新缩放的可绘制图像

> ID：11540985
> 
> 赞同：1
> 
> 时间：2012-07-18T12:05:51.277
> 
> 标签：android, image, user-interface, drawable

我在 Android 文档页面上阅读[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)，它指出：

> “默认情况下，Android 会缩放您的位图可绘制对象（.png、.jpg 和 .gif 文件）和九补丁可绘制对象（.9.png 文件），以便它们在每个设备上以适当的物理尺寸呈现。”
> 
> * * *
> 
> “如有必要，系统会根据当前屏幕密度将可绘制资源缩放到适当的大小。”

最近，我们一直在向我们的应用程序添加平板电脑功能。在横向模式下（也适用于纵向，但我将使用横向作为示例），我们在屏幕左侧有一个带有文本的图像，在右侧有一个按钮。简单的。在开发这个 XML 布局时，我得到这个图像（在 Eclipse 的 XML 编辑器的图形布局部分），在我的 10" 平板电脑上运行应用程序时会发生什么：

![我期望看到的。](../Images/4d1869668083bdd9567bda04f87dd84b.png)

但是，当我在 Acer Iconia A200 上运行我的应用程序时，我得到的屏幕截图更像这样：

![我最终看到的。](../Images/9be3e68cbc703f831b8d8306881a314c.png)

事实上，您在第二张屏幕截图中看到的“图像”看起来与我在 Android 2.2 MyTouch 手机上看到的图像大小几乎相同，如果不完全相同的话。

因此，我的问题是，为什么 Android 不会像在 XML 编辑器的图形布局中显示的那样重新调整图像的大小（就像在第一个屏幕截图中一样？）

我尝试过的事情：

*   我已将适当缩放的可绘制图像添加到每个`drawable-_ _ _ _`文件夹。尽管如此，图像看起来还是一样的。
*   我已将图像添加到 ldpi，希望它可以放大以适应更高分辨率的平板电脑 - 但事实并非如此。
*   我目前在文件夹中有那个单一的图像`drawable`（没有扩展名）。尽管如此，同样的行为仍然存在。

有什么建议么？

* * *

编辑：

代码：

```
<LinearLayout
    android:id="@+id/leftLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/ImageViewLogo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="4dp"
        android:layout_marginTop="10dp"
        android:background="@android:color/transparent"
        android:contentDescription="@+string/logo"
        android:scaleType="fitCenter"
        android:src="@drawable/logo_red" />

    <RelativeLayout
        android:id="@+id/layoutBelowImage"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp"
        android:gravity="center" >

        ... 4 TextViews here...

    </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T12:30:31.030

在**您** `scaleType`的`ImageView`. 在这种情况下，您可能希望使用`fitCenter`来保持纵横比。

模拟器和真实设备之间仍然存在一些不一致之处。

为避免使用但保持(with )`wrap_content`的纵横比，您可以尝试以下操作：`ImageView``fitCenter`

*   将其设置为`fill_parent`。在 a 中使用权重`LinearLayout`（建议避免嵌套权重，但不是关键）。
*   将其设置为`fill_parent`。正确使用`layout_above`和`layout_below`。
*   创建一个自定义视图，扩展`ImageView`并设置正确的纵横比`OnMeasured`。
*   设置一个固定的宽度和高度 dp（最简单的）。

# perl - 我应该将继承方法的 perldoc 复制到子类的文档中吗？

> ID：11540988
> 
> 赞同：4
> 
> 时间：2012-07-18T12:06:13.880
> 
> 标签：perl, oop, perldoc

我编写了一个`foo.pm`从 Web 服务收集一些数据的类。在里面`foo.pm`我添加了 perldoc 来描述功能以及使用的简短指南。它的所有方法都有一个参考。

我还编写了一个子类`cachedFoo.pm`，它`foo.pm`用作基类，将自己的构造函数包装在`foo`'`new`方法周围，并`foo`使用数据库连接进行升级以缓存结果。我已经`cachedFoo.pm`为其他内容添加了 perldoc。

现在我只希望我的同事使用`cachedFoo.pm`. `foo.pm`我应该从to复制所有继承方法的 perldoc，`cachedFoo.pm`还是应该说“查看访问器的基类文档”？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T13:27:52.527

不要复制文档，它会不同步，只需提供原始文档的链接并记录差异。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T15:17:38.450

在接口描述的开头附近显眼地指向其他类就足够了，请参阅下面的最佳实践文档示例。然后，您的 pod 覆盖测试应该使用[Pod::Coverage::CountParents](http://p3rl.org/Pod%3a%3aCoverage%3a%3aCountParents)来考虑继承。

```
package cachedFoo;
⋮
=head1 INTERFACE

=head2 Composition

    cachedFoo
        ISA foo
        DOES somerole

All methods and attributes not mentioned here are
inherited from L<foo> or mixed in from L<somerole>.

=head2 Methods

=head3 C<cache_database_thing>

Blah blah blah, Mr. Freeman 
```

显式命名每个组合方法不会扩展。我不能推荐这个：

```
=head3 C<quux>

See L<foo/quux>. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T15:39:32.247

您应该考虑重命名模块。我认为 Foo::Cached 将是常见的做法。我通常只在相关部分指出继承，例如：

```
=head1 METHODS

L<Foo::Cached> inherits all methods from L<Foo> and implements the following methods by itself:

... 
```

如果您仍然想查看所有继承的方法，您可以使用[Pod::Inherit](https://metacpan.org/module/Pod%3a%3aInherit)创建一个临时 podfile，其中还包括来自父模块的 POD（或者如果您正在构建更大的东西，您可以尝试[Pod::Weaver](https://metacpan.org/module/Pod%3a%3aWeaver)。

# c# - 为什么这个 C# SQL 登录系统不起作用？

> ID：11540989
> 
> 赞同：0
> 
> 时间：2012-07-18T12:06:20.003
> 
> 标签：c#, sql, database

我不确定我在这里做错了什么。

我没有收到实际错误，但每次都返回 false：

```
string commandString = 
    "SELECT * FROM UserTable WHERE Username = @UserName";
DataTable result = new DataTable();
using (SqlCommand command = new SqlCommand(commandString, dataConnection))
{

    command.Parameters.Add("@UserName", SqlDbType.VarChar).Value = info.username;
    using (SqlDataReader dr = command.ExecuteReader())
    {
        result.Load(dr);
    }
}
if (result.Rows.Count > 0)
{
    Console.WriteLine((string)result.Rows[0]["Password"]);
    Console.WriteLine((string)result.Rows[0]["Username"]);
    Console.WriteLine(info.password);
    Console.WriteLine(info.username);
    string dbPassword = (string)result.Rows[0]["Password"];
    if (string.Compare(dbPassword, info.password) == 0)
        return true;
    else return false;
}
else
    return false; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T12:10:08.533

认为我看到了问题

```
if (result.Rows.Count == 0) 
```

需要是

```
if (result.Rows.Count == 1) 
```

否则，您检查是否有 0 行而不是 1 行，然后您可以检查数据所在的第 0 行的结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T12:41:34.423

在条件下试试这个。

```
dbPassword.ToLower().trim() == info.password.ToLower().trim() 
```

# java - org.apache.commons.io.IOUtils.toByteArray 的 Android 等效项

> ID：11540990
> 
> 赞同：3
> 
> 时间：2012-07-18T12:06:20.767
> 
> 标签：java, android, apache, bytearray, encryption

我需要在 CipherInputStream 变量上调用“toByteArray”方法，或者使用实用程序类。执行此操作的 Android 代码是哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T08:26:27.700

试试[番石榴](https://code.google.com/p/guava-libraries/)。我还没有测试它，但似乎它有你需要的东西。toByteArray 列在[他们的 IO 工具](https://code.google.com/p/guava-libraries/wiki/IOExplained)中。

# android - 在启动时启动应用程序

> ID：11540996
> 
> 赞同：0
> 
> 时间：2012-07-18T12:06:36.973
> 
> 标签：android

我有两个应用程序通过使用`BOOT_COMPLETE`事件在手机启动时启动。我希望一个应用程序在启动时先于另一个应用程序启动。有没有办法设置优先级，以便首先启动第一个应用程序。请注意，我无法从另一个应用程序启动一个应用程序。请给我一个关于如何进行的线索。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:11:49.887

您可能对意图优先级感兴趣：

```
<intent-filter android:icon="drawable resource"
           android:label="string resource"
           android:priority="integer" >
. . .
</intent-filter> 
```

[安卓文档](http://developer.android.com/guide/topics/manifest/intent-filter-element.html)：

> 在处理过滤器描述的类型的意图方面，应给予父组件的优先级。该属性对活动和广播接收器都有意义：它控制执行广播接收器以接收广播消息的顺序。具有较高优先级值的那些在具有较低值的那些之前被调用。（该顺序仅适用于同步消息；对于异步消息，它会被忽略。）

等等

# c++ - push_back 与派生类

> ID：11540998
> 
> 赞同：2
> 
> 时间：2012-07-18T12:06:40.113
> 
> 标签：c++, class, vector, push-back

我想创建一个对象数组，并且我想使用某个构造函数。

```
std::vector<Modul> arrDigOut; 
arrDigOut.push_back(Modul(IDC_CHECK1, this, "GVL.DigOut1", pAddr)); 
```

只要`DigOut`不是派生类，它就可以工作。当我派生它并使用`DigOut`它失败的类时：

```
class Modul
{
protected:
    int         id;
    int         nErr;
    void*       plcVar;
    bool        bDigOut;
    PAmsAddr    pAddr;
    ULONG       lHdlVar;
    CButton*    pBt;

public:
    Modul();

    //Modul(int ID, Cbeckhoff_frontendDlg* pCbeckhoff,void* pVar,PAmsAddr pAdr)
    //{
    //    SetID(ID,pCbeckhoff);
    //    plcVar = pVar;
    //    pAddr = pAdr;
    //};

    int         GetID() { return (id); };
    void*       GetplcVar() { return plcVar; };
    void        SetID(int ID, Cbeckhoff_frontendDlg* pCbeckhoff);
    int         InitCheck(Cbeckhoff_frontendDlg* pCbeckhoff);
    CButton*    GetpBt(){return pBt;};
    void        SetButton( Cbeckhoff_frontendDlg* pCbeckhoff);
};

class DigOut : protected Modul
{
public:
    DigOut();
    DigOut(int ID, Cbeckhoff_frontendDlg* pCbeckhoff,void* pVar,PAmsAddr pAdr)
    {
        SetID(ID,pCbeckhoff);
        plcVar = pVar;
        pAddr = pAdr;
    };
}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T12:07:49.987

那是因为**对象切片**。您需要有一个指向基类的指针或智能指针向量：

```
std::vector<Modul*> arrDigOut; 
arrDigOut.push_back(new Modul(IDC_CHECK1, this,"GVL.DigOut1",pAddr));
arrDigOut.push_back(new DigOut()); 
```

如果不使用智能指针，请记住释放内存。

当您有 a`std::vector<Modul> arrDigOut;`并在派生类型的对象上插入时，它将被切片并变为 a `Modul`。对象的`Modul`一部分被复制到向量中，其余部分丢失。

# javascript - 带有超时的jQuery按钮

> ID：11540999
> 
> 赞同：1
> 
> 时间：2012-07-18T12:06:49.390
> 
> 标签：javascript, jquery

我有一个删除按钮来删除照片。第一次单击`div`会在顶部显示一条动画消息：“如果您真的想删除这张照片，请再次单击。” 第二次单击将删除照片。如果您在第一次单击后 3 秒内未再次单击，则该消息将消失。但是，如果它消失了，您再次单击该按钮，它仍然会被删除。当消息消失以停止发布时，我需要停止脚本`$.ajax()`

```
$(".delete").toggle(function(){
    $("#top").html("Click again if you really want delete this photo.");
    $("#top").animate({top: "0"}).delay(3000).animate({top: "-50"});
    return false;
}, function() {
    $("#top").animate({top: "-50px"});
    var id = $(this).attr("id");
        $.ajax({
           ...
        });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:12:30.680

像这样的东西（未经测试）：

```
$(".delete").click(function()
{
    if ($(this).attr('canDelete') == 'y')
    {
        $("#top").animate({top: "-50px"});
        ... do delete
    }
    else
    {
        $("#top").html("Click again if you really want delete this photo.");
        $("#top").attr('canDelete', 'y')
                 .animate({top: "0"})
                 .delay(3000)
                 .attr('canDelete', 'n')
                 .animate({top: "-50"});
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T12:11:59.593

为什么不做这样的事情？

```
$(".delete").click(function() {
    if ( $(this).hasClass("confirm") ) {

        //When the button is clicked again within 3 seconds it will have
        //the confirm class and will go here

    } else {

        //The button will go here when clicked first time, a class
        //of confirm is added for 3 seconds.
        $(this).addClass("confirm");
        setTimeout(function() {
            $(this).removeClass("confirm");
        }, 3000);

    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T12:17:32.040

您可以像这样在闭包中放置一个变量：

```
var allowDel;
$(".delete").toggle(function(){
    allowDel = true;
    $("#top").html("Click again if you really want delete this photo.");
    $("#top").animate({top: "0"}).delay(3000).animate({top: "-50"});
    setTimeout(function() { allowDel = false; }, 3000);
    return false;
}, function(){
    if (!allowDel) return;
    $("#top").animate({top: "-50px"});
    var id = $(this).attr("id");
        $.ajax({
           ...
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T12:36:45.010

所以我编辑它并且它有效

```
var allowDel;
$(".delete").click(function(){
   if(allowDel){
       $.ajax();
       allowDel = false;
   }else{
       allowDel = true;
       setTimeout(function() {
           $("#top").slideUp();
       }, 3000);
       return false;
   }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T12:24:14.370

另一个解决方案，这次没有任何额外的变量或属性/属性（并不是说有任何显着的优势，也许有点清洁）。这个使用消息DIV的Y坐标来决定是否允许删除。

**演示：http:** [//jsfiddle.net/Eu2vu/](http://jsfiddle.net/Eu2vu/)

**代码：**

```
$(".delete").click(function() {
    var top = $('#top');
    if (top.position().top >= 0) {
        top.animate({top: "-50px"});
        console.log('do delete');
    }
    else {
        top.html("Click again if you really want delete this photo.");
        top.animate({top: "0"}).delay(3000).animate({top: "-50"});
    }
}); 
```