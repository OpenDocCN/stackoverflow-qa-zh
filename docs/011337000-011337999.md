# StackOverflow 问答 11337000-11337999

# php - 在会话中保存对象是一种好习惯吗？

> ID：11337007
> 
> 赞同：3
> 
> 时间：2012-07-05T01:51:47.020
> 
> 标签：php, session

我正在开发一个针对许多客户动态定制的 PHP 通用应用程序。

我有类`client`，我在其中加载客户端的样式和首选项。

我的问题是：

在会话中保存该对象是一种好习惯吗？（我认为这是最好的解决方案，而不是在每个页面中创建对象，这将需要大量的 mysql 查询。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T01:59:06.647

在处理会话时，您需要考虑的事项很少。

1.  您不应该在会话中存储不同的大值。我认为在您的情况下这不是问题，因为偏好通常足够小。

2.  当您在会话中存储对象时。您可能无法获得实时更新。例如，假设同一用户使用两个单独的浏览器和/或机器登录并在一个中修改首选项。在这种情况下，其他人将没有更新的自定义。这不是一个大问题，但取决于您的要求。

我在这里没有看到任何其他问题。实际上，它是在会话中存储小值并避免数据库查询的有效且良好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T01:54:33.347

如果它不会改变，只会导致不断地调用 MySQL 查询，那么**是**的，这是一个好主意。

MySQL 查询（以及一般的函数）是**内存/cpu 密集型**的，并且会影响 PHP 的页面加载速度，因此您导致它执行的工作越少越好。

如果返回的值会不断变化，最好**不要**，而是在会话中存储可以存储的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:42:54.630

我认为当客户端关闭浏览器时会话将终止。如果将其存储在 cookie 中（加载的客户端）？它不利于安全。

当您在会话（加载的服务器）中存储迷你数据时，这意味着您在服务器上使用了一些内存。当你有很多客户时会发生什么？

因此，应该在每个页面的进程结束时销毁数据库连接。不用担心使用它。

# jquery - 自动播放 CSS3 幻灯片

> ID：11337009
> 
> 赞同：-1
> 
> 时间：2012-07-05T01:52:17.243
> 
> 标签：jquery, css, slideshow

[我修改了我在这里](http://cssdeck.com/item/458/css3-image-slider)找到的预先设计的幻灯片，我想对其进行编辑，以便它自动播放而无需用户单击箭头。但是，我不确定如何执行此操作。你能用 jQuery 模拟点击吗？这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:41:57.053

他说他正在使用`checked`单选按钮的属性。

> 我使用带有 :checked 伪类的单选输入按钮及其标签来控制滑动图像。因此，如果您从一个图像更改为另一个图像，浏览器不会在浏览器历史记录中创建一个步骤（就像在其他 CSS 幻灯片中一样）。
> 
> 玩我的滑块:)

因此，您可以使用 JQuery 创建一个遍历复选框数组的循环。[您可以使用复选框选择器](http://api.jquery.com/checkbox-selector/)获取复选框数组，并通过使用[选中](http://api.jquery.com/checked-selector/)的选择器查找当前选中的单选按钮来迭代当前选中的单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T02:20:15.180

这是我想出的解决方案。它获取当前幻灯片并每 3.5 秒前进一次。这特别适用于 4 张幻灯片，而不是教程中显示的 5 张幻灯片。我的脚本还考虑了到达最后一张幻灯片并循环回到第一张幻灯片，以及如果用户自己推进它们，则从*最新的幻灯片推进。*

每张幻灯片都是这样的......

```
<input value="0" type="radio" id="button-1" name="controls" checked="checked"/> 
```

...在当前幻灯片上使用 checked = "checked"。每张幻灯片的值为 0、1、2、3、...、n。

```
<script type="text/javascript">
        var tmp = 0;
        $(document).ready(
            function() { 
                tmp = parseInt($('input[name=controls]:checked').val());
                var tid = setInterval(advance, 3500);
            }
        );

        function advance() {
            if(tmp == 3) {
                $('input[name=controls]:eq(0)').attr('checked', 'checked');
                tmp = 0;
            }
            else { 
                $('input[name=controls]:eq(' + (tmp+1) + ')').attr('checked', 'checked'); 
                tmp = parseInt($('input[name=controls]:checked').val());
            }
        }

        function abortTimer() { clearInterval(tid); }
    </script> 
```

# javascript - 强制重新加载所有页面资源，而不是从缓存中

> ID：11337011
> 
> 赞同：1
> 
> 时间：2012-07-05T01:52:44.013
> 
> 标签：javascript, caching, google-chrome, browser-cache

我想做一些类似于在 chrome 中打开开发人员工具并检查禁用缓存然后重新加载页面的事情。

我无法以任何方式修改 url（例如，在查询中附加时间戳），因为这将工作一次，但是下次我正常重新加载页面时，资源将从没有时间戳的旧 url 加载并且是旧的缓存版本。

我只需要对 chrome 的支持，我无权访问服务器。

基本上我需要在 chrome 缓存中更新资源文件，而不更改 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-07T15:35:35.647

在**Chrome**中重新加载所有页面资源，无论缓存可以通过在开发人员工具打开时*长按* **刷新按钮来强制**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:18:44.157

参考这个话题：[防止浏览器缓存jQuery AJAX调用结果](https://stackoverflow.com/questions/367786/prevent-caching-of-ajax-call)

由于您可以编辑服务器端脚本以设置不缓存标头，因此很难在 IE 上完美地处理它。不幸的是，唯一可以为客户端做的方法是在查询字符串的末尾添加时间戳。

# ruby-on-rails - 从数据库中删除旧记录（Postgres/Rails）

> ID：11337016
> 
> 赞同：2
> 
> 时间：2012-07-05T01:54:07.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

您认为在 Rails 应用程序中从 Postgres 数据库中删除旧记录的最有效方法是什么？

我想删除一年前的记录，最好是：

*   每晚运行一个脚本来删除正好一岁的记录
*   或每周（或每月）运行一次脚本以删除至少一岁的所有记录

我想我需要在 created_at 字段上建立一个索引来加快查找速度，但是这两个选项中哪一个是最明智和最有效的方法呢？

（或者还有其他我没有考虑过的选择吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:07:12.380

你会想和

> 或每周（或每月）运行一次脚本以删除至少一岁的所有记录

这样，如果它没有运行一晚，您可以在第二晚或当它再次开始运行时进行追赶。

# python - Python max-by 函数？

> ID：11337023
> 
> 赞同：14
> 
> 时间：2012-07-05T01:55:15.817
> 
> 标签：python

例子：

```
print max(chain_length(i) for i in xrange(1,10001)) 
```

这将返回最大/最大的“chain_length”（任意函数），但我想要的是产生`i`最大值的输入值。

有没有方便的方法来做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T01:56:49.847

```
max(xrange(1, 10001), key=chain_length) 
```

# objective-c - 为什么在使用 MFMailComposeViewController 时应用程序因“无法恢复”而崩溃

> ID：11337024
> 
> 赞同：1
> 
> 时间：2012-07-05T01:55:18.177
> 
> 标签：objective-c, ios

我的应用程序需要通过电子邮件支持用户反馈。我们更喜欢使用 MFMailComposeViewController 而不是 url 模式，因为我们需要在邮件中附加一些日志文件。但是，当用户按照以下步骤操作时，应用程序可能会因“未能及时恢复”而崩溃。

```
1\. Get into message editing view;
2\. "Cancel-->Save Draft";
3\. When saving draft, presh home button. Application will enter background state;
4\. User launch application again, application will block in launch image. After few second, application will crash. 
```

设备日志说：

```
Jul  2 15:38:58 unknown SpringBoard[57] <Warning>: com.XXX failed to resume in time
Jul  2 15:38:58 unknown SpringBoard[57] <Warning>: Forcing crash report of XXX[461]...
Jul  2 15:38:59 unknown SpringBoard[57] <Warning>: Finished crash reporting.
Jul  2 15:38:59 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.XXX[0x8c58]) Exited: Killed: 9 
```

**问题：为什么我的申请在简历期间被阻止？
为什么 MFMailComposeViewController 使用这么长时间来保存草稿？
我怎样才能四处走动以避免撞车？**

崩溃报告：

```
Date/Time:       2012-07-03 09:25:40.222 +0800
OS Version:      iPhone OS 5.0.1 (9A405)
Report Version:  104

Exception Type:  00000020
Exception Codes: 0x8badf00d
Highlighted Thread:  0

Application Specific Information:
com.XXX failed to resume in time

Elapsed total CPU time (seconds): 1.720 (user 1.720, system 0.000), 17% CPU
Elapsed application CPU time (seconds): 0.009, 0% CPU

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib        0x35ca8010 0x35ca7000 + 4112
1   libsystem_kernel.dylib        0x35ca8206 0x35ca7000 + 4614
2   AppSupport                    0x376c68c4 0x376b4000 + 75972
3   AppSupport                    0x376c52f0 0x376b4000 + 70384
4   AppSupport                    0x376c59a6 0x376b4000 + 72102
5   AppSupport                    0x376c3cfc 0x376b4000 + 64764
6   AppSupport                    0x376c3b8a 0x376b4000 + 64394
7   MessageUI                     0x305dea90 0x305d5000 + 39568
8   MessageUI                     0x306048b2 0x305d5000 + 194738
9   MessageUI                     0x305f3914 0x305d5000 + 125204
10  MessageUI                     0x305f2fa0 0x305d5000 + 122784
11  MessageUI                     0x306025ce 0x305d5000 + 185806
12  UIKit                         0x3727fcd4 0x37143000 + 1297620
13  CoreFoundation                0x33cf742e 0x33ce4000 + 78894
14  UIKit                         0x371619e4 0x37143000 + 125412
15  UIKit                         0x371619a0 0x37143000 + 125344
16  UIKit                         0x3716197e 0x37143000 + 125310
17  UIKit                         0x371616ee 0x37143000 + 124654
18  UIKit                         0x37162026 0x37143000 + 127014
19  UIKit                         0x37160508 0x37143000 + 120072
20  UIKit                         0x3715fefa 0x37143000 + 118522
21  UIKit                         0x371464e6 0x37143000 + 13542
22  UIKit                         0x37145d26 0x37143000 + 11558
23  GraphicsServices              0x30578dec 0x30574000 + 19948
24  CoreFoundation                0x33d7154c 0x33ce4000 + 578892
25  CoreFoundation                0x33d714ee 0x33ce4000 + 578798
26  CoreFoundation                0x33d7033c 0x33ce4000 + 574268
27  CoreFoundation                0x33cf34d6 0x33ce4000 + 62678
28  CoreFoundation                0x33cf339e 0x33ce4000 + 62366
29  GraphicsServices              0x30577fc6 0x30574000 + 16326
30  UIKit                         0x3717473c 0x37143000 + 202556
31  XXX                   0x00002d26 0x1000 + 7462
32  XXX                   0x00002ce4 0x1000 + 7396 
```

# jquery - 超大 3.2.7 在 IE8 中不起作用

> ID：11337026
> 
> 赞同：1
> 
> 时间：2012-07-05T01:55:29.663
> 
> 标签：jquery, internet-explorer-8, supersized

我有一个 jQuery 插件，超大 3.2.7 在 Chrome 和 Firefox 中工作，但在 IE8 中不起作用。图片加载不出来。

以下是控制台中显示的错误。

```
SCRIPT5007: Unable to get value of the property 'thumb': object is null or undefined 
supersized.js?ver=3.4, line 13 character 1126 
```

Javascript代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="assets/js/supersized.js?ver=3.4"></script>
<script src="assets/js/supersized.shutter.js?ver=3.4"></script>
<script src="assets/js/easing.js"></script>
<script>

    jQuery(function($){

        jQuery.supersized({ 
            slide_interval: 5000,
            transition: 'fade',
            transition_speed: 1000,
            new_window: 0,
            horizontal_center: 1,
            progress_bar: 0,
            mouse_scrub: 0,                             
            slides:[

                {image: 'http://localhost/assets/images/city-at-night.jpg', title: '<h1>Discover More Possibilities...</h1><h2>At Lorem Ipsum, we fulfil your ideas'},
                {image: 'http://localhost/assets/images/modern-skyscraper.jpg', title: '<h1>Explore Our Capabilities</h1><h2>Lorem Ipsum Dolor Sit Amet'},
            ]

        });
    });

</script>
<script src="assets/js/scripts.js"></script> 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T02:04:34.257

尝试删除幻灯片数组中的最后一个逗号

```
slides:[

            {image: 'http://localhost/assets/images/city-at-night.jpg', title: '<h1>Discover More Possibilities...</h1><h2>At Lorem Ipsum, we fulfil your ideas'},
            {image: 'http://localhost/assets/images/modern-skyscraper.jpg', title: '<h1>Explore Our Capabilities</h1><h2>Lorem Ipsum Dolor Sit Amet'}
        ] 
```

# opengl - 简单的 Opengl 和图形问题

> ID：11337027
> 
> 赞同：0
> 
> 时间：2012-07-05T01:55:42.123
> 
> 标签：opengl, graphics, 3d

1.  COP和“相机”是一回事吗？这又指的是“用户”在看屏幕吗？
2.  如果有的话，有人可以向我解释一下投影透视图和视口之间的关系吗？因为目前对我来说，它们似乎是同一件事。还是 PP 是窗口，然后缩放以适合视口？
3.  在 OpenGL 中，当设置 gluPerspective 时，zNear 值是相机与投影透视图的距离，因此 fovy 和 zNear 的组合定义了窗口的大小（假设 Window == Projection Perspective 并且我不明白一些东西：/）进入世界。
4.  创建窗口时（仅使用 gl 和 glu），在初始化所有内容后进入具有渲染功能的 while(!quit) 循环（这个问题有点傻），在所有情况下，所有内容都会在此渲染中绘制具有 glBegin() 和 glEnd() 的函数。让我们假设我有一个很大的世界，有很多功能等等。需要绘制的所有内容是否都适合这些函数，以便该 Render 函数可以及时变得非常大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T09:16:21.230

> COP和“相机”是一回事吗？这又指的是“用户”在看屏幕吗？

COP 可能意味着很多，但我认为您的意思是“投影中心”。在仿射投影的情况下，COP 确实在“相机”的位置。但是 OpenGL 没有摄像头，COP 通常位于原点。移动“相机”是通过与移动相机相反的方式移动整个世界来实现的。

> 如果有的话，有人可以向我解释一下投影透视图和视口之间的关系吗？

投影透视是一种连接到相机的“镜头”。您还可以使用完全不同的投影，其行为非常不同。

视口是投影边界“对齐”到的窗口部分。想象一下视口是您放置/缩放/拉伸渲染图片的窗口/屏幕的一部分（当然渲染直接发生在视口上）。

> 因为目前对我来说，它们似乎是同一件事。还是 PP 是窗口，然后缩放以适合视口？

更像是后者。

> 在 OpenGL 中，当设置 gluPerspective 时，zNear 值是相机与投影透视图的距离，因此 fovy 和 zNear 的组合定义了窗口的大小（假设 Window == Projection Perspective 并且我不明白一些东西：/）进入世界。

不完全的。投影体积由所谓的平截头体（您已切割其尖端的四面金字塔）定义。尖端位于原点，即一切都被投射到尖端。但是投影事物的平面是近平面。很容易看出，近平面应尽可能远离原点，而远平面应尽可能近。此外，两者必须具有相同的符号，否则事物会“通过”看起来错误的原点投影。

> 创建窗口时（仅使用 gl 和 glu），

您不能仅使用 OpenGL 和 GLU 创建窗口（GLU 不是 OpenGL BTW 的一部分！）。

> 在初始化所有输入的具有渲染函数的 while(!quit) 循环之后（这个问题有点傻），所有情况下的所有内容都在这个具有 glBegin() 和 glEnd() 的渲染函数中绘制。让我们假设我有一个很大的世界，有很多功能等等。需要绘制的所有内容是否都适合这些函数，以便该 Render 函数可以及时变得非常大？

好吧，OpenGL 不是场景图。正如您已经知道的那样，它是一个绘图 API。是的，应该在屏幕上显示的所有内容都必须放入绘图功能中。但是，您永远不会将场景直接放入代码中。您构建一些抽象数据结构，用来自外部源的数据填充这些数据结构，然后拥有一组渲染函数，这些函数遍历这些结构以决定要渲染的内容并进行正确的绘图调用。

顺便说一句：立即模式，即`glBegin`……`glEnd`自 OpenGL-2 以来已被弃用，取而代之的是顶点数组。请不要使用立即模式。只需跳过有关它的每一章和教程。

# html - 如何垂直对齐内容 div里面的标签？

> ID：11337030
> 
> 赞同：0
> 
> 时间：2012-07-05T01:56:05.493
> 
> 标签：html, css

我似乎无法让我的链接在我的 div 标签内垂直对齐。我尝试过使用 li 和 ul 标签，但从我阅读的内容来看，它更加困难。理想情况下，我希望能够添加更多链接并让它们在添加/删除链接时自动对齐。

这是我的 HTML：[http://pastebin.com/9q4tzCpQ](http://pastebin.com/9q4tzCpQ) 这是我的 CSS： http: [//pastebin.com/pBYxME7p](http://pastebin.com/pBYxME7p)

感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-05T02:00:39.887

除非您在表格内，否则垂直对齐不起作用。如果它绝对关键，并且内容是静态的，请使用绝对位置。

绝对位置固定标签（例如 p）相对于其下一个非静态祖先的位置。所以基本上，在你的 div 标签中，把

```
position:relative; 
```

并在您的 p 标签中使用

```
position:absolute;
top:90%;
left:5% 
```

记住： position:absolute 指定距*so* top:20px 的距离，将其*向下*移动20px。

谷歌：位置属性。

祝你好运！

# vb.net - 为什么“ELSE：”在 vb.net 中编译？

> ID：11337032
> 
> 赞同：7
> 
> 时间：2012-07-05T01:56:49.583
> 
> 标签：vb.net, operators

为什么会这样编译？

```
If Months > 1 Then

    Label.Text = Months + " Months"

Else : Months = 1

    Label.Text = Months + " Month"

End If 
```

使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T01:59:47.143

`:`是行分隔符。它相当于一个换行符：

```
If Months > 1 Then

    Label.Text = Months + " Months"

Else

    Months = 1
    Label.Text = Months + " Month"

End If 
```

[这是我能找到的最好的文档。](http://msdn.microsoft.com/en-us/library/ba9sxbw4(v=vs.71))对不起。

# mysql - Mysql join 匹配每个表中的多行

> ID：11337037
> 
> 赞同：3
> 
> 时间：2012-07-05T01:58:17.310
> 
> 标签：mysql, sql

这是我的数据库相关部分的简化版本：

```
Person:
    id

PersonSkills:
    person_id
    skillname
    ability

Position:
    id

PositionSkills:
    position_id
    skillname
    ability 
```

一个人可以有任意数量的 PersonSkills，假设在这个例子中，我们的用户有 6 个。一个职位可以需要任意数量的 PositionSkills，比如说在这个例子中，这个职位需要 3 个。我需要一个查询来确定所有的与此职位关联的 PositionSkills 存在于与此人关联的 PersonSkills 中。（我还需要确保 PersonSkill 的能力大于 PositionSkill 的能力，但我认为一旦我找出了在这里给我带来麻烦的部分，那就很简单了。）

在此先感谢，杰森

**编辑**

以下是有关我正在寻找的内容的更多详细信息：

```
PersonSkills
+-------------+---------+---------+
| person_id   | skill   | ability |
+-------------+---------+---------+
|     1       |  A      | 5       |
|     1       |  B      | 4       |
|     1       |  C      | 5       |
|     1       |  D      | 4       |
|     1       |  E      | 5       |
+-------------+---------+---------+

PositionSkills
+-------------+---------+---------+
| position_id | skill   | ability |
+-------------+---------+---------+
|     5       |  A      | 3       |
|     5       |  B      | 3       |
|     5       |  C      | 3       |
|     6       |  A      | 3       |
|     6       |  B      | 3       |
|     6       |  Z      | 3       |
+-------------+---------+---------+ 
```

从我是用户 1 的事实来看，我想要一个查询来告诉我我有资格担任职位 5，因为我具有所需的技能 A、B 和 C，但我不符合职位 6 的资格，因为我缺乏技能Z

再次感谢，杰森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:38:40.613

试试这个解决方案：

```
SELECT
    a.id,
    (COUNT(c.position_id) = (SELECT COUNT(*) FROM positionskills WHERE position_id = <position_id here>)) AS isQualified
FROM
    person a
LEFT JOIN
    personskills b ON a.id = b.person_id
LEFT JOIN
    positionskills c ON 
        b.skillname = c.skillname AND 
        b.ability >= c.ability AND
        c.position_id = <position_id here>
GROUP BY
    a.id
WHERE
    a.id = <person_id here> 
```

如果这个人是合格的，`isQualified`将是`1`否则它将是`0`

**编辑**：根据问题中的说明，要获得该人有资格担任的所有职位，请使用以下解决方案：

```
SELECT
    a.position_id
FROM
    (
        SELECT bb.position_id, COUNT(*) AS skillshave
        FROM personskills aa
        INNER JOIN positionskills bb ON aa.skillname = bb.skillname AND aa.ability >= bb.ability
        WHERE aa.person_id = <person_id here>
        GROUP BY bb.position_id
    ) a
INNER JOIN
    (
        SELECT position_id, COUNT(*) AS skillsrequired
        FROM positionskills
        GROUP BY position_id
    ) b ON a.position_id = b.position_id AND a.skillshave = b.skillsrequired 
```

# java - Java 什么是更有效的内存明智？

> ID：11337039
> 
> 赞同：0
> 
> 时间：2012-07-05T01:58:34.417
> 
> 标签：java, arrays, field, ram

我需要存储我班级的大量实例，并且由于我有一台非常糟糕的计算机，只有 2gb 的 RAM，我需要它以尽可能少的内存使用来运行。所以谁能告诉我拥有大量字段或数组是否更有效。我不在乎“最佳方式”，我需要使用最少 RAM 的方式。所以是的，一个数组或许多字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:05:49.793

你的问题有点不清楚，但基本上是类

```
public class SomeClass {
    int var1;
    int var2;
    ...
    int var100;
} 
```

`int[100]`将占用与数组一样多的空间。可能会略有不同，具体取决于平台，但总共不超过 16 个字节，并且可以采用任何一种方式。（并且您可以替换任何其他数据类型，`int`同样的事情也是如此。）

但是，为了清楚起见，上述任何一个所占用的空间都比 100 个对象少得多，每个对象包含*一个*`int`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T02:02:04.353

数组不会以任何方式压缩对象，它只是对它们进行排序。因此字段或数组将具有相同的内存开销。

也就是说，拥有一个对象数组（或 a `List`）会更好地将您的对象收集在一起。

# java - 当我删除 Jtextfield 中的文本时没有发生 lostFocusEvent？

> ID：11337040
> 
> 赞同：0
> 
> 时间：2012-07-05T01:58:44.227
> 
> 标签：java, swing, jtextfield, jformattedtextfield

嗨，我已经实现了一个简单的 focusListener 方法并向它注册了两个 jTextField。该方法的作用是将其中的数字相加并显示在 JLabel 中。如果我在其中输入“2”，它会正确更新给我 4。但是，如果我之后删除 2，即使我单击其他地方也不会触发 focusLost 事件。如果我在 JTextField 中输入 0，则 focusLost 事件将正常发生。为什么呢？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:53:56.310

一种方法是利用 in 中的`value`属性[`JFormattedTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)，如本[示例中所示并](https://stackoverflow.com/a/8703807/230513)[在此处](https://stackoverflow.com/a/6804008/230513)概述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T06:46:55.633

没有 THE [SSCCE](http://sscce.org/)，很难说出您在案例中使用的逻辑。由于在下面的示例中，它按您的预期工作：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;

public class TextFieldExample
{
    private JTextField tfield1;
    private JTextField tfield2;
    private JLabel label;
    private FocusListener tfieldListener = new FocusListener()
    {
        @Override
        public void focusGained(FocusEvent fe)
        {
        }

        @Override
        public void focusLost(FocusEvent fe)
        {
            String num1 = tfield1.getText().trim();
            String num2 = tfield2.getText().trim();
            if (num1 == null || num1.equals(""))
                num1 = "0";
            if (num2 == null || num2.equals(""))
                num2 = "0";         
            label.setText(Integer.toString(Integer.parseInt(num1) + Integer.parseInt(num2)));
        }
    };

    private void displayGUI()
    {
        JFrame frame = new JFrame("Text Field Focus Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT, 5, 5));

        tfield1 = new JTextField(10);
        tfield2 = new JTextField(10);

        tfield1.addFocusListener(tfieldListener);
        tfield2.addFocusListener(tfieldListener);

        ((AbstractDocument)tfield1.getDocument()).setDocumentFilter(new MyDocumentFilter());
        ((AbstractDocument)tfield2.getDocument()).setDocumentFilter(new MyDocumentFilter());

        label = new JLabel("SUM IS");

        contentPane.add(tfield1);
        contentPane.add(tfield2);
        contentPane.add(label);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    class MyDocumentFilter extends DocumentFilter
    {
        @Override
        public void insertString(FilterBypass fb, int offset
                                                , String text
                                                , AttributeSet aset)
        {
            try
            {
                super.insertString(fb, offset, text.replaceAll("\\D++", ""), aset);
            }
            catch(BadLocationException ble)
            {
                ble.printStackTrace();
            }
        }

        @Override
        public void replace(FilterBypass fb, int offset, int len
                                           , String text
                                           , AttributeSet aset)
        {
            try
            {
                super.replace(fb, offset, len, text.replaceAll("\\D++", ""), aset);
            }
            catch(BadLocationException ble)
            {
                ble.printStackTrace();
            }
        }       
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TextFieldExample().displayGUI();
            }
        });
    }
} 
```

# unix - 在管道中强制标准输出的行缓冲

> ID：11337041
> 
> 赞同：150
> 
> 时间：2012-07-05T01:58:44.480
> 
> 标签：unix, buffer, pipe, stdout, tee

通常，`stdout`是行缓冲的。换句话说，只要您的`printf`论点以换行符结尾，您就可以期望该行会立即打印出来。当使用管道重定向到`tee`.

我有一个 C++ 程序，`a`它输出字符串，总是`\n`终止，到`stdout`.

当它自己运行时 ( `./a`)，一切都按预期在正确的时间正确打印。但是，如果我将它通过管道传输到`tee`( `./a | tee output.txt`)，它在退出之前不会打印任何内容，这违背了使用`tee`.

我知道我可以通过`fflush(stdout)`在 C++ 程序中的每次打印操作后添加一个来修复它。但是有没有更清洁、更简单的方法？有没有我可以运行的命令，例如，`stdout`即使使用管道也会强制进行行缓冲？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2012-07-05T02:10:44.630

你可以试试`stdbuf`

```
$ stdbuf --output=L ./a | tee output.txt 
```

（大）手册页的一部分：

```
 -i, --input=MODE   adjust standard input stream buffering
  -o, --output=MODE  adjust standard output stream buffering
  -e, --error=MODE   adjust standard error stream buffering

If MODE is 'L' the corresponding stream will be line buffered.
This option is invalid with standard input.

If MODE is '0' the corresponding stream will be unbuffered.

Otherwise MODE is a number which may be followed by one of the following:
KB 1000, K 1024, MB 1000*1000, M 1024*1024, and so on for G, T, P, E, Z, Y.
In this case the corresponding stream will be fully buffered with the buffer
size set to MODE bytes. 
```

但请记住这一点：

```
NOTE: If COMMAND adjusts the buffering of its standard streams ('tee' does
for e.g.) then that will override corresponding settings changed by 'stdbuf'.
Also some filters (like 'dd' and 'cat' etc.) dont use streams for I/O,
and are thus unaffected by 'stdbuf' settings. 
```

你没有在运行`stdbuf`，`tee`你正在运行它`a`，所以这不应该影响你，除非你在' 源中设置`a`' 流的缓冲。`a`

此外，`stdbuf`它**不是**POSIX，而是 GNU-coreutils 的一部分。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-07-05T02:50:35.110

试试[`unbuffer`](http://expect.sourceforge.net/example/unbuffer.man.html)哪个是[`expect`](http://expect.sourceforge.net/)包装的一部分。您可能已经在系统上安装了它。

在你的情况下，你会像这样使用它：

`./a | unbuffer -p tee output.txt`

（`-p`用于管道模式，其中 unbuffer 从 stdin 读取并将其传递给其余参数中的命令）

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-07-05T17:12:25.500

您也可以尝试使用该命令在伪终端中执行您的`script`命令（这应该强制将行缓冲输出到管道）！

```
script -q /dev/null ./a | tee output.txt     # Mac OS X, FreeBSD
script -c "./a" /dev/null | tee output.txt   # Linux 
```

请注意，该`script`命令不会传播回包装命令的退出状态。

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-05-14T14:46:50.233

您可以使用 stdio.h 中的 setlinebuf。

```
setlinebuf(stdout); 
```

这应该将缓冲更改为“行缓冲”。

如果您需要更大的灵活性，您可以使用 setvbuf。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-08-15T12:11:33.750

@Paused包中的命令[`unbuffer`](http://expect.sourceforge.net/example/unbuffer.man.html)直到[另行通知](https://stackoverflow.com/users/26428/)答案对我来说并没有按照它的呈现方式工作。[`expect`](http://expect.sourceforge.net/)

而不是使用：

`./a | unbuffer -p tee output.txt`

我不得不使用：

`unbuffer -p ./a | tee output.txt`

> （`-p`用于管道模式，其中 unbuffer 从 stdin 读取并将其传递给其余参数中的命令）

该`expect`软件包可以安装在：

1.  MSYS2 与`pacman -S expect`
2.  Mac 操作系统`brew install expect`

* * *

### 更新

我最近`python`在 shell 脚本内部遇到了缓冲问题（尝试将时间戳附加到其输出时）。修复方法是将`-u`标志传递给`python`这种方式：

1.  `run.sh`和`python -u script.py`
2.  `unbuffer -p /bin/bash run.sh 2>&1 | tee /dev/tty | ts '[%Y-%m-%d %H:%M:%S]' >> somefile.txt`
3.  此命令将在输出上放置一个时间戳并将其同时发送到文件和标准输出。
4.  `ts`程序（时间戳）可以随`moreutils`包一起安装。

* * *

### 更新 2

最近，`grep`缓冲输出也有问题，当我使用它的参数`grep --line-buffered`停止`grep`缓冲输出时。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-05T03:12:29.897

如果您改用 C++ 流类，则 each`std::endl` *是*隐式刷新。使用 C 样式打印，我认为您建议的方法 ( `fflush()`) 是唯一的方法。

# emacs - *scratch* 使用 SLIME 的缓冲区

> ID：11337042
> 
> 赞同：2
> 
> 时间：2012-07-05T01:58:45.493
> 
> 标签：emacs, lisp, slime

我意识到 SLIME 是高级 Lisp 交互模式，但我想知道是否有一个“Lisp 交互”缓冲区可以与 Common Lisp 一起使用，例如 *scratch* 缓冲区可以与 Emacs Lisp 一起使用。IE 在表单末尾点击 Cj 会将表单的结果插入到当前缓冲区中。

我问是因为我发现根据需要编辑输出比使用 repl 更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T05:52:29.117

虽然`M-x``slime-scratch``RET`我不知道`C-j`默认情况下会做什么，因为我使用 [Paredit](http://emacswiki.org/emacs/ParEdit)。

但是，在和`C-u``C-x``C-e`中都可以满足您的要求。`*scratch*``*slime-scratch*`

```
It is bound to C-x C-e.

(eval-last-sexp EVAL-LAST-SEXP-ARG-INTERNAL)

Evaluate sexp before point; print value in minibuffer.
Interactively, with prefix argument, print output into current buffer.
Truncates long output according to the value of the variables
`eval-expression-print-length' and `eval-expression-print-level'. 
```

（它`slime-eval-last-expression`在`*slime-scratch*`缓冲区中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:54:05.220

将此函数绑定到 Cj 会执行我正在寻找的行为：

```
(defun slime-eval-print-last-sexp ()
  (interactive)
  (newline)
  (insert (cadr (slime-eval `(swank:eval-and-grab-output ,(slime-last-expression)))))
  (newline)) 
```

# graphviz - 如何使用 Graphviz 注释节点和边？

> ID：11337048
> 
> 赞同：12
> 
> 时间：2012-07-05T01:59:44.963
> 
> 标签：graphviz

如何使用 Graphviz 绘制图形并注释其节点和边？

例如：

```
(a: level=0) --3--> (b: level=1)  
(a: level=0) --2--> (c: level=1) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T06:36:06.850

这很简单，这是`dot`您的示例文件（`test.dot`）：

```
strict digraph {
    1 [label="a: level=0"];
    2 [label="b: level=1"];
    3 [label="c: level=1"];
    1 -> 2 [label="3"];
    1 -> 3 [label="2"];
} 
```

将`dot -Tpng -o test.png test.dot`输出：

![点输出](../Images/10d663c4d32b7f6dcb7ba1140d50474c.png)

您可以设置更多参数来获得所需的布局。我建议您查看[Graphviz 文档](http://www.graphviz.org/content/dot-language)。

# iphone - 使用情节提要时如何将导航控制器推送动画设置为“否”

> ID：11337051
> 
> 赞同：6
> 
> 时间：2012-07-05T02:00:01.007
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller, storyboard

我正在将故事板用于基于导航的 iphone 应用程序。我希望视图控制器使用“pushviewcontroller”属性进行导航，但同时我不希望它们动画。只是我想将他们的动画属性设置为“否”

如何使用情节提要做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-21T01:33:05.410

要通过@azethoth 扩展答案，创建无动画segue 很简单：

```
@interface NoAnimationSegue : UIStoryboardSegue
@end

@implementation NoAnimationSegue    
- (void)perform
{
    [[self.sourceViewController navigationController] pushViewController:self.destinationViewController animated:NO];
}    
@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T04:04:05.270

据我所知，没有办法以声明方式执行此操作。您可以手动调用

```
[sourceController pushViewController:destination animated:NO]; 
```

或者，如果您一心想要使用 segue，您可以创建自己的子类`UIStoryboardSegue`并实现上述`perform`方法。然后在情节提要中，您可以使用自定义转场并输入转场子类的名称。

# c++ - 套索线选择

> ID：11337052
> 
> 赞同：1
> 
> 时间：2012-07-05T02:00:12.047
> 
> 标签：c++, algorithm, qt, geometry

我正在使用 Qt 构建一个 2D 图形应用程序。该图具有用户可以创建的节点和边，并且选择是通过套索选择工具完成的。到目前为止，我已经能够使用简单[的多边形点](http://en.wikipedia.org/wiki/Point_in_polygon)算法来实现节点选择。但是，现在我需要实现边缘选择。

目前我有代表这个图的三个类：节点、边和图。Node 是一个简单的 X、Y 容器。Edge 有一个指向源节点和目标节点的指针。并且图包含节点和边的列表。

我知道当节点是选择的一部分时我如何选择边但是当相应的节点不是选择的一部分时我如何实现边选择（即边-多边形相交测试）。我说多边形是因为我的套索工具构造了一个代表 n 边多边形的点列表。

这是我需要的算法示例（红色代表预期结果）。

![在此处输入图像描述](../Images/24ccf38d6cc116f2b4f90277e58dd30e.png)

> *这不是为了学校，而是我正在做的一个爱好项目。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:28:09.520

```
$selected = [];

for each $polygon in $scene:
    if $polygon.intersects($selectionPolygon):
        for each $edge in $polygon:
            for each $selectionEdge in $selectionPolygon:
                if $edge.crosses($selectionEdge):
                    $selected.push($edge)
                    break
                endif
            end
        end
    endif
end 
```

# c# - 如何将变量连接到一些 属性？

> ID：11337054
> 
> 赞同：2
> 
> 时间：2012-07-05T02:00:27.800
> 
> 标签：c#, asp.net, webforms

我正在使用 C#/ASP.NET 编写小型 Web 表单。我想将错误消息存储到 C# 类的变量中；像这样的东西：

```
public static class ErrorMessages { 
 public static string fooX = "baa"; 
 // etc..
} 
```

然后将其连接到`ASP`标签的某些属性中：

```
<asp:RegularExpressionValidator runat="server"
     ControlToValidate="baain"
     ErrorMessage= *ErrorMessages.fooX*
 /> 
```

是否可以？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:03:05.100

在 aspx 页面中，您可以尝试：

```
ErrorMessage='<%# ErrorMessages.fooX %>' 
```

在页面加载调用后面的代码中`DataBind();`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        DataBind();
    }
} 
```

我不确定是否连接页面的 aspx 部分，您可以在后面的代码中设置 RegularExpressionValidator 的 ErrorMessage 属性。就像是：

```
RegularExpressionValidator1.ErrorMessage = "Your message"; 
```

或者

```
RegularExpressionValidator1.ErrorMessage = ErrorMessages.fooX; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:10:34.240

一种方法是创建您自己的自定义表达式构建器。

ExpressionBuilder 类是表达式生成器的基类，例如 AppSettingsExpressionBuilder 类，它们在页面解析期间创建代码表达式。

表达式构建器解析声明性表达式并创建代码以检索绑定到控件属性的值。在非编译方案中，支持非编译功能的表达式生成器在运行时评估表达式。

有关更详细的说明和示例，请参阅 msdn 的链接。

[http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T02:51:09.613

这很简单，你有没有试过这个：

```
<%= YourNamespace.YourConstant %> 
```

或者（.Net 4，这个选项会自动对文本进行编码）

```
<%: YourNamespace.YourConstant %> 
```

有几个运算符：

*   `<%#`用于数据绑定

*   `<%$`用于表达式，而不是代码；经常在 DataSources 中看到：

*   `<%=`返回一个字符串

*   `<%:`相同，`<%=`但它自动对标记内的值进行 html 编码

## 编辑 1

好吧，我刚刚进行了测试，看来您不能将内联代码与服务器控件一起使用...

所以替代方法：

*   只需使用后面的代码分配值

    ```
     this.myRegularExpressionValidator.ErrorMessage = ErrorMessages.Foo; 
    ```

*   改为使用资源。使用资源，您将获得许多好处，例如站点的本地化，并且由于资源只是 xml 文件，您可以将它们放到您的站点中而无需重新编译（假设您没有使用附属程序集来存储您的资源）

    ```
    <asp:RegularExpressionValidator runat="server" ErrorMessage="<%$ Resources:Resource, MyResource %>" /> 
    ```

    在哪里

    *   `Resource`指全局资源文件
    *   `MyResource`引用资源文件中包含文本的键

    全局资源必须放在`App_GlobalResources`ASP.Net 专用文件夹中，例如资源文件名：`Resource.resx`

    资源文件示例

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <root>
      <data name="MyResource" xml:space="preserve">
        <value>My error message</value>
      </data>
    </root> 
    ```

    可以使用 Visual Studio 添加和管理资源文件，因此您不必手动处理 XML

# facebook - 禁用第三方 cookie 时如何执行 Facebook 注销？

> ID：11337055
> 
> 赞同：0
> 
> 时间：2012-07-05T02:00:33.070
> 
> 标签：facebook, facebook-graph-api, logout

我的网站上有一个注销页面，如下所示：

```
<div id="fb-root"></div>
    <script>
      // Load the Facebook SDK Asynchronously
      (function(d){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/en_US/all.js";
         ref.parentNode.insertBefore(js, ref);
       }(document));

      // Init the SDK upon load
      window.fbAsyncInit = function() {
        FB.init({
          appId      : '[valid_app_id]' // App ID
        });
        FB.getLoginStatus(function(loginResponse){
          // As soon as we get the login status... log out!
            FB.logout(function(logoutResponse) {
            // logged out!
          }); 
        });
      } 
    </script> 
```

从香草 Chrome 浏览器访问时，该页面运行良好。但是，如果

```
[x]Block third-party cookies and site data 
```

在 Chrome 的“内容设置...”下选中选项，页面无法注销用户，并报告

```
FB.logout() called without an access token. 
```

这个问题有解决方法吗？我希望能够注销用户，即使他们有比平常更严格的安全设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:56:27.200

我创建了一个解决此问题的解决方案，只需为您的访问令牌定义一个空值，最后使用 getLogoutUrl() mrthod 将他重定向到注销页面：

```
$_SESSION['fb_YOUR_APP_ID_access_token'] = '';
$logout = $facebook->getLogoutUrl(array( 'next' => 'YOUR_LOGOUT_MESSAGE_PAGE'));
header("Location: $logout " ); 
```

对不起，我的英语不好！

# php - mysql 检查列？

> ID：11337056
> 
> 赞同：0
> 
> 时间：2012-07-05T02:00:37.067
> 
> 标签：php, mysql, pdo

有没有办法检查mysql语法中有哪些列？

例如，

```
$dbh = $db->query("SELECT * FROM table");
while($row = $dbh->fetchAll(PDO::FETCH_ASSOC))
{
$row['somecolumn'];
} 
```

例如，如果有或没有一些列，我想知道是否有一种方法可以显示我正在寻找的语法中的所有列的列表`table`

这样以后，我将能够检查是否有`$row['fr']`或`$row['food']`可以工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:02:43.913

您可以简单地检查是否 `$row`包含您需要的密钥。

PHP 函数[`array_key_exists`](http://www.php.net/manual/en/function.array-key-exists.php)会告诉你是否`$row`包含你想要的键。例如，如果包含一个键，`array_key_exists("fr", $row)`将返回 true 。`$row``fr`

如果您想查看所有键（即所有列），只需使用[`array_keys`](http://php.net/manual/en/function.array-keys.php); 例如：`array_keys($row)`会给你所有的钥匙`$row`。

或者，如果您不介意另一个 SQL 调用，您可以使用`SELECT column_name FROM information_schema.columns WHERE table_name='your_table'`xdazz 的回答提及。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:03:41.210

您可以使用`INFORMATION_SCHEMA`来执行此操作，或`DESCRIBE`.

查看[information_schema 列](http://dev.mysql.com/doc/refman/5.1/en/columns-table.html)文档，或查看[描述](http://dev.mysql.com/doc/refman/5.0/en/describe.html)语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:06:16.707

您可以使用下面的 sql 为一个表选择 cloumn 名称。

```
SELECT 
    column_name 
FROM 
    information_schema.columns 
WHERE 
    table_name='your_table'; 
```

# c# - 是拥有一个公共只读对象、每个类相同的本地只读对象还是直接引用库对象更好？

> ID：11337061
> 
> 赞同：3
> 
> 时间：2012-07-05T02:01:44.643
> 
> 标签：c#

我正在 XNA 中使用 C# 构建游戏，但我不确定这四种方式中的哪一种最适合引用“视口”以进行只读访问：

1.  有一个公共静态变量，每个类都可以通过调用 Game.Viewport 来访问（Game 是主类：

    public static readonly Viewport Viewport = GraphicsDevice.Viewport;

正在使用：

```
rectangle = new Rectangle (Game.Viewport/2, ... 
```

1.  对于需要视口的每个类，都有一个局部变量来引用视口：

    私有只读视口视口 = GraphicsDevice.Viewport;

正在使用：

```
rectangle = new Rectangle (viewport/2, ... 
```

1.  使用向下传递到需要视口的每个类的构造函数的局部变量（这将是唯一不需要导入 Microsoft.Xna.Framework.Graphics 的类）：

    私有只读视口视口；

然后在构造函数中：

```
viewport = pViewport; 
```

正在使用：

```
rectangle = new Rectangle (viewport/2, ... 
```

1.  在需要（使用中）的任何地方直接从类库中引用视口：

    矩形 = 新矩形 (GraphicsDevice.Viewport.Width/2, ...

我想知道哪个在速度方面最好，哪个在可读性方面最好。就个人而言，我觉得第四种方法是最简单和最快的，所以我不需要创建任何对视口的引用，很明显我指的是全局的东西。看起来它正在取消“中间人”，但随后您必须将 XNA 图形库导入到使用视口的每个类中。

你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:35:41.863

我想这取决于你的设计。如果这只是一个简单的一次性应用程序，我将使用您的第一个示例。您有一个单一的视口，您的所有类都不依赖于`GraphicsDevice`您决定管理该视口的方式。

将单个对象存储在那里并在代码中引用它会很快；它只是一个字段参考，所以它们不会比这快得多。`GraphicsDevice.Viewport`每次都调用，*尤其是*因为它是一个属性，这意味着您*每次*想要访问它时都将运行一个属性 getter 方法。

编辑：如果您想快速在`Game.Viewport`（而不是字段）上放入属性包装器，以便您可以临时跟踪访问（例如用于日志记录），那么您可以自由地这样做。如果您选择后者`GraphicsDevice.Viewport`，则必须在代码中调用它的每个位置都执行此操作（代码重复）。

如果这是为了一个更可重用的库，*如果*将 Viewport 的访问限制为仅相关类是有意义的，或者希望将依赖项分离`Game`到单元测试。

我什至不会考虑选项 2（`GraphicsDevice.Viewport`将每个类评估为私有字段）。至少你可以用你自己的可重用静态类来包装它（这就是你正在做的`Game`）

# php - 将joomla连接到mysql

> ID：11337065
> 
> 赞同：0
> 
> 时间：2012-07-05T02:02:06.457
> 
> 标签：php, mysql, joomla

我在 Centos 下的 Lamp 中安装了 mysql，用户为 root，没有密码。所以我有一个 joomla 网站，我把它全部放在 lamp 文件夹中的 htdocs 下。我编辑了配置文件以使用 mysql

```
$host = 'localhost';
$db_name = 'spilet_en';
$user = 'root'; 
```

但它说：数据库错误：无法连接到数据库：无法连接到MySQL

我在 phpMyAdmin 中看到了数据库。我用root用户名登录它。但它不起作用。我应该怎么办？joomla 似乎在其他 user_name/ 上使用。我如何记录 joomla 尝试与之连接的用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:28:24.647

首先，确保 MySQL 数据库运行正常。一般默认安装mysql应该是没有密码的。您可以从外壳测试它：

```
# mysql -u root 
```

最好设置root密码。如果运行正确，您应该使用 php 轻松连接 mysql。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:09:40.757

我检查了我的 joomla 的配置文件

我的变量数据库名称与您的变量如此不同。

这是我的变量

```
var $host = 'localhost';
var $user = 'root';
var $db = ''; 
```

请再次检查。

# java - 为我的 Java 棋盘游戏优化我的“捕获”算法

> ID：11337067
> 
> 赞同：0
> 
> 时间：2012-07-05T02:02:35.257
> 
> 标签：java, algorithm, optimization, matrix

*   棋盘游戏是一个 11x11 矩阵。
*   件是白色，黑色，（1）whiteking
*   可以通过夹住对手来“捕获”一块
    *   例如）黑色棋子的左右或上下有一个白色棋子/白色国王
*   也可以使用板的边缘或 4 个角件中的任何一个夹住和捕获
    *   ex) 白棋子在棋盘的左边缘，然后黑棋子直接移动到白棋子的右侧，这将是一个捕获

到目前为止，我有一个

*   11 x 11 矩阵
*   (int) 0 = 空，1 = 白色，2 = 黑色，3 = 白化

所以到目前为止我的算法是基本的，检查上/下/左/右，如果是反对，然后再次检查旁边的棋子是否是友好的棋子，如果是，然后捕获。

但是我不能简单地这样做，因为如果这块在 2 个外边缘行或列上，使用上面的算法我会得到一个 ArrayOutofBoundsException 错误。

那么我有一个巨大的if语句来判断这件作品是白色还是黑色。

我只是觉得有一种更简单的方法来优化它.. 作为一个初级程序员，我看不到它。有人可以提出一些建议吗？

如果您查看下面的代码..您可以看到这仅在移动位于外边缘时...如果它位于“1”列/行中，我几乎必须重新复制并粘贴所有内容.. . 然后我终于可以检查 2 个空格上/左/右/下，而不必担心 ArrayOutofBoundsException。

然后我必须再次为 Black Pieces 做所有这些。我的代码看起来真的很草率，我觉得有一种更简单的方法可以做到这一点。有什么建议么？

```
void makeMove(int typePiece, int fromRow, int fromCol, int toRow, int toCol) {
    board[toRow][toCol] = board[fromRow][fromCol];
    board[fromRow][fromCol] = EMPTY;        

    //CAPTURE
    if(typePiece == WHITE) {
        if(toRow==0) { //top row
            //check right
            if(toCol!=9 && board[toRow][toCol+1]==BLACK && 
                    (toCol==10 || board[toRow][toCol+2]==WHITE || board[toRow][toCol+2]==WHITEKING)) {
                board[toRow][toCol+1]=EMPTY;
            }
            //check left
            if(toCol!=1 && board[toRow][toCol-1]==BLACK && 
                    (toCol==0 || board[toRow][toCol-2]==WHITE || board[toRow][toCol-2]==WHITEKING)) {
                board[toRow][toCol-1]=EMPTY;
            }
            //check bottom
            if(board[toRow-1][toCol]==BLACK && (board[toRow-2][toCol]==WHITE || board[toRow-2][toCol]==WHITEKING)) {
                board[toRow-1][toCol]=EMPTY;
            }
        }
        else if(toRow == 10) { //bottom row
            //check right
            if(toCol!=9 && board[toRow][toCol+1]==BLACK && (toCol==10 || board[toRow][toCol+2]==WHITE || board[toRow][toCol+2]==WHITEKING)) {
                board[toRow][toCol+1]=EMPTY;
            }
            //check left
            if(toCol!=1 && board[toRow][toCol-1]==BLACK && (toCol==0 || board[toRow][toCol-2]==WHITE || board[toRow][toCol-2]==WHITEKING)) {
                board[toRow][toCol-1]=EMPTY;
            }
            //check top
            if(board[toRow+1][toCol]==BLACK && (board[toRow+2][toCol]==WHITE || board[toRow+2][toCol]==WHITEKING)) {
                board[toRow+1][toCol]=EMPTY;
            }
        }
        else if(toCol == 0) { //left column
            //check right
            if(board[toRow][toCol+1]==BLACK && (board[toRow][toCol+2]==WHITE || board[toRow][toCol+2]==WHITEKING)) {
                board[toRow][toCol+1]=EMPTY;
            }
            //check top
            if(toRow!=1 && board[toRow+1][toCol]==BLACK && (board[toRow+2][toCol]==WHITE || board[toRow+2][toCol]==WHITEKING)) {
                board[toRow+1][toCol]=EMPTY;
            }
            //check bottom
            if(toRow != 9 && board[toRow-1][toCol]==BLACK && (board[toRow-2][toCol]==WHITE || board[toRow-2][toCol]==WHITEKING)) {
                board[toRow-1][toCol]=EMPTY;
            }
        }
        else if(toCol == 10) { //right column
            //check left
            if(board[toRow][toCol-1]==BLACK && (toCol==0 || board[toRow][toCol-2]==WHITE || board[toRow][toCol-2]==WHITEKING)) {
                board[toRow][toCol-1]=EMPTY;
            //check top
            if(toRow!=1 && board[toRow+1][toCol]==BLACK && (board[toRow+2][toCol]==WHITE || board[toRow+2][toCol]==WHITEKING)) {
                board[toRow+1][toCol]=EMPTY;
            }
            //check bottom
            if(toRow != 9 && board[toRow-1][toCol]==BLACK && (board[toRow-2][toCol]==WHITE || board[toRow-2][toCol]==WHITEKING)) {
                board[toRow-1][toCol]=EMPTY;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:47:50.750

您的问题似乎与“围棋”游戏非常相似。

您可以做的是检查“自由”中所谓的内容。自由是一组棋子旁边的一个自由位置。如果一个群体没有更多的自由（被对手包围），那么这个群体就会死亡。

这里有一些关于如何实现它的提示。

当一块被移动时，你检查它的邻居。如果其中一个邻居是对手，

```
function: hasPieceLiberty(Position piece): return true if one of the neighbours is empty

function: hasGroupLiberty(Position currentPiece):
   add current piece to visited pieces for this group
   if currentPiece.hasPieceLiberty -> return true
   else 
       if currentPiece has no more non visited neighbours for this group -> return false
       else call hasGroupLiberty for non visited neighbours in the group

function: move(Position piece)
   if piece has neighbours that are opponents, check if opponent group has liberties 
```

我希望这会有所帮助

编辑：我注意到你的问题实际上比我最初想的要简单。我认为您必须将对手包围在任何地方，而不仅仅是在一条线的两侧。然后你应该检查 CosmicComputer 的建议

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:37:33.747

考虑到一块只能作为另一块移动的结果来捕获。假设您有一个白色棋子移动到与黑色棋子相邻的某个位置（八次检查“我旁边有一个黑色棋子吗？”）；此时，检查是否有沿同一条线穿过它的白色棋子（如果黑色棋子在第一个白色棋子下方，则检查第一个黑色棋子正下方是否有另一个白色棋子；如果黑色棋子斜向上并且在右侧，检查黑色块的右侧和上方是否有另一个白色块；等等）。此外，每次移动棋子时，您都需要检查 a) 我周围是否有敌方棋子，如果有，则 b) 它是否在另一侧被另一个敌方棋子镜像？

尝试以下方式：

```
for all eight directions (up, down, left, right, and the four diagonals):
    is there an enemy piece in that direction adjacent to me?
    if so:
        is there a friendly piece in that direction that is also adjacent to that enemy piece?
        if so:
             remove that piece 
```

和

```
for all eight directions:
    is there an enemy piece in that direction adjacent to me?
    if so:
         is there another enemy piece in the opposite direction that is also adjacent to me?
    if so:
         remove me 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:28:46.983

当我试图解决这个问题时，一些自定义项有助于清理代码：

`struct`**`Point`**需要一个“x”和一个“y”。方便映射出二维数组的内容。
`Operations`可以包括分别对“x”和“y”值进行操作的**加法**、减法等。检查可能有助于确定该点是否是数组的有效索引（给定数组，作为参数）
。**`isValid`**覆盖**`ToString()`**也很好。

包含来自源点的所有所需**方向**`dir4`的点数组 ( ,`dir8`等) 非常适合检查它周围的情况。遍历提供的方向：[ `foreach( Point dir in dir4 ){ testPoint = sourcePoint + dir; ... }`]。在`isValid`尝试检查位置的内容以避免出现`IndexOutOfBoundsException`.

# c# - 多个动态定时器

> ID：11337069
> 
> 赞同：0
> 
> 时间：2012-07-05T02:02:44.270
> 
> 标签：c#, timer

我正在做一个项目，我需要让用户创建一个（或多个）计时器来触发事件。用户应该定义变量，例如计时器是否应该处于活动状态以及计时器触发的频率以及计时器触发时会发生什么的其他变量。

所有这些变量都存储在字典（字典）中，其中对象保存用户设置的所有变量，字符串是用户为此计时器选择的名称。

然后我希望我的程序遍历这个字典并搜索所有将变量 t_Active 设置为 true 的对象（我已经实现了）。我需要帮助弄清楚的是以下情况：当它检测到变量时，如果它设置为 true，我需要程序查看是否已经为此创建了一个计时器。如果不是，它应该创建一个并为计时器设置相关参数。两个变量 t_num 和 t_period 应该决定定时器的间隔。t_num 是一个整数，t_period 是一个字符串，可以设置为分钟、小时或天。

将 t_num 与 60000（分钟）、3600000（小时）或 86400000 结合起来应该给出正确的间隔。

但是我将如何继续以编程方式为每个用户定义的活动对象创建一个计时器？以及如何让程序检测是否已经创建了计时器？

我一直在这里和谷歌上搜索，但到目前为止我还没有遇到对我有意义的东西。我还在学习 C#，所以对你们有意义的东西对我来说可能还没有意义。:)

我希望我已经解释了我需要足够好的东西，如果你不明白我，请让我澄清一下。

编辑：

也许我还应该提到，上述字典也将保存到一个 XML 文件中，以便用户可以随时获取他们所做的所有设置。

编辑2：

@hatchet我想知道这是否可行。我试图让它工作，但遇到了一些困难（因为我缺乏经验并且不完全理解你的伪代码。我遇到了错误，有一些我可以解决，还有一些我可以解决'不。（我没想到代码完全可以工作，别担心））。

此外，用户应该能够修改计时器。在主窗体中，有几个文本框和三个按钮。该表单用于发送消息。用户可以选择手动发送消息、将消息添加到计时器或编辑计时器。

当用户点击手动按钮时，消息会发送给所有接收者一次。如果将消息添加到计时器，则会弹出一个新的子表单，他们可以在其中设置以下详细信息： string Name (of timer) DateTime Start_date CheckBox Ending DateTime End_date NumericUpDown Seconds (最小值为 15 分钟) Combobox Minutes, Hours , 天数复选框激活

当用户将消息添加到计时器时，TimerSettings 作为 sting,Object （我的自定义对象包含所有详细信息）进入字典。

如果他们点击主窗体上的修改按钮，则认为在打开子窗体之前，程序会查找相应的计时器（主窗体有一个包含所有已添加计时器的组合框），停止计时器，然后打开子窗体让用户编辑详细信息。

子窗体上还有一个删除按钮，以便用户可以删除计时器。

添加或修改计时器时，mainform 会捕获它并将更改写入 XML 文件和组合框。如果已经有一个用于此消息的计时器并且在没有的情况下创建，或者如果有，则重新启动计时器。

我不确定我应该如何让您的解决方案为此工作。发送消息的过程需要 30 秒到 5 分钟，具体取决于接收器的数量（不能超过 42（该程序是另一个程序的接口，不允许超过 42 个接收器））。

我知道几个计时器可能是一个问题，但我怀疑任何用户都需要超过最多 10 个计时器，因此可能存在一个内置限制，比如说 15 个计时器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:13:09.263

我不确定计时器在这种方法下的扩展效果如何。可能值得研究管理这些事件的其他方法。正如@hatchet 刚刚发表的评论一样，您可以为下一个事件设置 1 个计时器。使用这种方法，您可以在它运行时设置下一个计时器。

另一种可能性是使用一个数据库和一个每隔 <small time period> 运行的计时器，它执行所有带有适当时间戳的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:09:21.263

这是一种伪代码 C#，用来传达这个想法。我也做过同样的事情，但是有足够多的小细节是不同的，粘贴该代码会令人困惑。因此，在我的脑海中，这个半代码有望与真实代码足够接近，以向您展示我对您问题的评论的意思。

假设您有这样的课程

```
public delegate void Work();

public class TimedThing {
    public int IntervalSecs;
    public DateTime NextFiring;
    public event Work OnWork;        
} 
```

然后你有一个控制器类

```
public class TimedGroup {
    TimedThing[] things;
    System.Timers.Timer timer;

    public TimedGroup() {
        this.timer = new System.Timers.Timer();
        this.timer.AutoReset = false;
        this.timer.Elapsed += TimerFired;
    }
            ...
    // some methods for adding and removing TimerThings
            ...
    public void Start() {
        this.timer.Interval = 1; // just to get things started
        this.timer.Enabled = true;
    }
    public void Stop() {
        this.timer.Enabled = false;
    }
    private void TimerFired(object sender, System.Timers.ElapsedEventArgs e) {
        DateTime now = DateTime.Now;
        // let's have timer fire at least as frequently as every 5 minutes
        // if we need to have it fire sooner than that, it will get set below
        DateTime next = now.AddMinutes(5); 
        foreach(var thing in this.things) {
            if (thing.nextFiring <= now) {
                var task = Task.Factory.StartNew(() => DoWork(thing));
                thing.NextFiring = thing.NextFiring.AddSeconds(thing.IntervalSeconds);
                // or maybe this is more appropriate
                // thing.NextFiring = Now.AddSeconds(thing.IntervalSecs);
            }
            if (thing.NextFiring < next) next = thing.NextFiring;
        }
        // set the timer to fire whenever the next soonest work needs to be done
        this.Timer.Interval = (next - now).TotalMilliseconds;
        this.Timer.Enabled = true;
    }
    private void DoWork(TimedThing thing) {
        thing.Work();
    }
} 
```

尽管必须处理可能的细节，但无论您是对每件事都使用计时器，还是对所有事情都使用一个计时器，都必须处理许多细节。例如，如果一个事物的工作通常需要 10 秒，但有时可能需要 60 秒，并且他们将时间间隔设置为 45 秒。有时下一次触发会想要再次运行该工作，尽管在上一次触发时开始的先前工作仍在运行。这可能是可取的，也可能不是可取的，这取决于这些东西在做什么。如果不希望这样做，您必须添加一些对生成的任务的监控，以便您知道是否需要跳过执行工作，因为之前的工作尚未完成。另一件事是编码一个优雅的结束。当你设置定时器。[为什么当 Enabled 设置为 false 时 System.Timer.Timer 仍会触发事件？](https://stackoverflow.com/questions/6455393/why-does-system-timer-timer-still-fire-events-when-enabled-is-set-to-false)）。这可能会导致一些奇怪的行为/错误。

# javascript - 为什么 jQuery.val() 的行为与 jQuery 的其余部分不同

> ID：11337070
> 
> 赞同：4
> 
> 时间：2012-07-05T02:02:47.680
> 
> 标签：javascript, jquery, api, default-value

通常在 jQuery 无法使用其选择器找到匹配元素的情况下，默认值绝不是例外，而是缺少操作。

我的理解是这是通过设计完成的，以确保缺少元素不会导致错误情况。但是我发现它`jQuery.val()`并没有表现出同样的行为。如果所选元素不存在，`jQuery.val()`则将返回`undefined`而不是空字符串（这与我所期望的框架的其余部分保持一致）。

那么为什么`jQuery.val()`框架的其余部分是一个例外，改变这种行为的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T10:21:27.687

这里的关键是*jQuery*方法的可链接性。A jQuery method doesn't return `undefined`when a selector doesn't match anything because it would break the chain. 考虑：

```
$( '#doesntExist' ).addClass( 'foo' ).fadeIn(); 
```

如果不匹配任何内容的选择器将返回`undefined`它会破坏链，因为`undefined`它没有任何自己的方法。现在，无论是否找到元素，每个方法都会执行（并且什么都不做）。

`.val()`另一方面是不同的，因为它的目的是*返回元素的值*。与许多其他 jQuery 方法不同，它根本不链接，因为方法必须返回一个 jQuery 对象才能链接。例如，*不管元素是否**存在都*`$( '#foo' ).val().addClass( 'bar' )`不起作用。*`#foo`*

在这种情况下，`.val()`返回一个空字符串不会使其与可链接方法更加一致，因为当找不到元素时没有其他方法返回空字符串，并且返回 undefined 不会破坏可链接性，因为该方法没有首先是链条。

（顺便说一下，每个返回值的方法都是如此，比如`.css()`和`.data()`。）

通常知道元素的值是否为空或元素是否根本不存在会更有用，但如果您希望始终返回字符串，您可以添加自己的方法：

```
$.fn.stringVal = function() {
    return( this.val() || '' );
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T02:19:46.763

如果我`.val()`用来获取一个项目的价值，我希望该项目存在。如果没有，我需要知道这一点。在这种情况下返回`undefined`似乎是最好的方法。

正如@Ricardo 所指出的，`.val()`在其他情况下的表现也不同，具体取决于输入。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-05T02:09:19.867

jQuery.val() 返回输入的值（或“选择”的选定选项）

# java - 在我的 java applet 程序中添加另一个类

> ID：11337073
> 
> 赞同：1
> 
> 时间：2012-07-05T02:03:22.867
> 
> 标签：java, applet

我正在用java实现骑士之旅，目前我把所有东西都混成了一大堆代码。

我有一个名为 MainFrame 的类，其中包括解决骑士之旅的代码以及菜单的方法等。

我想创建一个名为 KT（用于骑士之旅）的新类，其中将包含算法的代码，但这样做有很多问题。

我不想在这里发布代码，因为我不希望我班上的人复制或其他东西，所以我将简要解释一下。

在 KT 类中，我已经声明了变量、数组等。我有诸如 printSolution、move、redo（回溯）等方法。

但是我不确定如何绑定按钮的代码（在 MainFrame 中声明）。例如，我在 print 方法中有一个循环，可以在 8x8 板上打印正确的解决方案。现在我被要求为按钮创建一个新方法，即使我在 MainFrame 类中有按钮。

我有一个 KT k = new KT(); 然后我正在启动 MainFrame。这是我做错的地方还是我太愚蠢而无法弄清楚的事情真的很简单？

tl；当我在一个班级中拥有所有东西时，dr 程序运行良好，但我想制作两个班级并使一切“看起来”不错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:07:19.217

在`actionPerformed`您的`MainFrame`类的方法中，只需调用适当的方法即可从中获取解决方案`KT`（顺便说一下，我将重命名为`KnightsTour`...可读性计数）。

理想情况下，您希望将所有逻辑（模型）分解成合理的方法`KnightsTour`，并将所有显示和按钮处理代码（视图和控制器）分解为`MainFrame`. 如果这很困难，那么这是一个好兆头，您需要重新考虑如何将事物划分为方法（以及您对全局状态所做的事情......这是不受欢迎的）。

对不起，我不能更具体——因为你没有发布代码，所以我有点手忙脚乱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T02:27:11.750

首先，给你的 KnightTour 类起一个真实的名字。就像，你知道的，KnightTour。如果您编写此代码是为了获得现金，那么下一个必须阅读您的代码的人会想揍那个叫类似 KT 的类的人。

考虑创建此类，以便您可以从 GUI 控制器（如按钮和菜单加载小程序）中使用它。但是，它也可以从基于字符的应用程序中使用，您可以在提示符下键入命令并让您的新类评估这些命令。

我建议这样做的原因是因为它会迫使您创建 KnightTour 类，以便它纯粹是您的应用程序的“业务逻辑”。我的意思是你的 KnightTour 类不应该知道任何关于按钮、菜单、GUI、文本界面或类似的东西。您需要考虑您的 KnightTour 课程必须完成的任务。

我真的不知道 KnightTour 是做什么的。所以我只是抛出一些关于它可能需要支持什么样的功能的想法。我假设一切都发生在棋盘上？

1.  获取给定棋盘位置 (x,y) 的状态（已占用、未占用）
2.  将棋子（棋子枚举器）放在给定位置（x，y）
3.  验证一块的放置（块枚举器，位置 x，y）
4.  建议移动，返回带有片段枚举器和位置的 Suggestion 对象
5.  重置板以重新开始。

现在，当您按下一个显示“在 5,5 上放置一块”的按钮时，您将在您的 GUI 控制器中处理该事件，然后调用“设置块”方法（上面的#2）来完成这项工作。如果您有一个基于字符的应用程序，当您键入“put knight at 5,5”时，您将解析该文本，然后调用上面的#2。关键是这两个用户界面都访问相同的 KnightTour 方法来完成相同的工作。

# ruby-on-rails - 如何通过不加载 Rails 来运行快速的 Draper 装饰器规范？

> ID：11337074
> 
> 赞同：1
> 
> 时间：2012-07-05T02:03:26.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, draper

如果可能的话，我想运行不加载 Rails 的 draper 装饰器规范，以坚持快速规范。我的大脑放屁让第二行开始工作。我错过了什么？

```
require "rspec/mocks/standalone"
require "draper/test/rspec_integration"
require_relative "../../app/decorators/articles_decorator"

describe ArticleDecorator do
  describe "#published_date" do
    let(:article)           { double('Article', published_at: Time.now,
                                                content:      'content',
                                                abstract:     'abstract') }
    let(:decorated_article) { ArticleDecorator.new(article) }

    it "returns the article's published_at timestamp in long date form" do
      decorated_article.published_date.should == article.published_at.to_s(:long_date)
    end

    it "returns the article's content when an id is present" do
      decorated_article.abstract_or_content('id').should == 'content'
    end

    it "returns the article's abstract when an id is not present" do
      decorated_article.abstract_or_content.should == 'abstract'
    end
  end
end 
```

# ruby-on-rails - 如果属性存在则考虑狮身人面像的顺序，否则忽略

> ID：11337077
> 
> 赞同：1
> 
> 时间：2012-07-05T02:04:12.557
> 
> 标签：ruby-on-rails, sorting, activerecord, grouping, thinking-sphinx

如果有多个具有验证级别的索引模型，需要按其验证级别进行排序。

但我也有几个没有验证级别的模型。

```
ThinkingSphinx.search @search.q, :order => 'class_crc ASC, @relevance DESC, verification_level DESC', :page => page, :limit => limit, :classes => @search.types_as_models 
```

问题是我可以在具有该属性的模型上按verification_level 排名，但在没有verification_level 的模型上会出错

```
index ground_core,ground_delta,user_core,user_delta: sort-by attribute 'verification_level' not found 
```

示例播放器 define_index 和 verify_level

```
 define_index do
      indexes [first_name, last_name], :as => :name, :sortable => true    
      where "state = 1"
      has created_at, updated_at, verification_level
      set_property :delta => ThinkingSphinx::Deltas::ResqueDelta
    end 
```

示例用户定义索引没有验证级别

```
 define_index do
      indexes [first_name, last_name], :as => :name, :sortable => true    
      has created_at, updated_at
      set_property :delta => ThinkingSphinx::Deltas::ResqueDelta
    end 
```

有没有办法在模型上进行排序而在不在模型上时忽略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T21:49:38.330

我的解决方案是通过在 define_index 块中添加不需要的模型来伪造验证级别

`has '0', :as => :verification_level, :type => :integer`

# neo4j - Cypher Query，如果它们具有相同类型的关系，则通过多个节点属性创建位置

> ID：11337079
> 
> 赞同：0
> 
> 时间：2012-07-05T02:04:45.420
> 
> 标签：neo4j

如果我们有一个节点通过相同类型的关系与其他节点相关联

```
classmetadata<-INSTANCE_OF-instance(TheNodeINeed)-RELATED_TO->...................

 - ->listype(The owner(name=d,etc))
 - ->listype(The state(name=x,etc))
 - ->listype(The propertie(name=y,etc))
 - ->listype(The location(name=z,etc)) 
```

要查找的实例节点，必须通过索引中的节点类元数据通过其名称（这很容易）和**实例**名称（这也很容易）以及**listype** .name=.. 和**listype** .name=..和**listype** .name=.. 这就是问题所在：

如果我尝试只查找名称为**MyInstance的****实例**，该实例是 RELATED_TO名称为**d的****所有者**，这里我只查询一个 listype 节点没有问题，此查询有效

 ******```
START classmetadata = node:classes(name = "MyClassMetadata")
MATCH classmetadata<-[:INSTANCE_OF]-instance-[:RELATED_TO]->listype
WHERE instance.name="MyInstance" and listype.name = "d"
RETURN instance, listype
ORDER BY instance.name ASC skip 0 limit 10 
```

但是如果我需要查找名称为**MyInstance的****实例**，该实例是 RELATED_TO 名称为 d 的所有者，**并且****还**与名称**x的****状态**相关，并且还与名称为**y的****属性**相关，则查询结果始终为空，是如果它们通过相同类型的关系相关，有什么方法可以同时过滤大约两个或三个或更多节点。属性（listype.name）？

 ******像这样的东西不起作用

```
START classmetadata = node:classes(name = "MyClassMetadata")
MATCH classmetadata<-[:INSTANCE_OF]-instance-[:RELATED_TO]->listype
WHERE instance.name = "MyInstance" AND listype.name = "x"
AND listype.name = "y" AND listype.name="d" RETURN instance, listype
ORDER BY instance.name ASC skip 0 limit 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T04:00:48.333

我将 name 属性添加到每个关系中，以确保我在正确的节点中进行过滤。

```
START classmetadata = node:classes(name = "MyClassMetadata")
MATCH classmetadata<-[:INSTANCE_OF]-instance-[r1:RELATED_TO]->listype1,
instance-[r2:RELATED_TO]->listype2, 
instance-[r3:RELATED_TO]->listype3 

WHERE instance.name = "MyInstance" AND 
r1.name="state" AND listype1.name = "x" AND 
r2.name="property" AND listype2.name = "y" AND 
r3.name="owner" AND listype3.name="d" 
RETURN instance, listype
ORDER BY instance.name ASC skip 0 limit 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:15:02.400

因此，您想查找 listtype 的 name 属性可以是 d 或 x 或 y 的所有列表类型（在您的第一个代码片段中）？如果是这样，那么 START classmetadata = node:classes(name = "NodeType ") MATCH classmetadata<-[:INSTANCE_OF]-instance-[:RELATED_TO]->listype WHERE instance.state="good" and (not(listype.name在 ["d","x","y"])) RETURN 实例，listype ORDER BY instance.name ASC 跳过 0 限制 10

您上面的查询也可以工作......只需统一引用 listtype - 不需要 listtype1、listtype2 等。 START classmetadata = node:classes(name = "NodeType ") MATCH classmetadata<-[:INSTANCE_OF]-instance-[:RELATED_TO ]->listype WHERE instance.state="good" 和 AND listype.name！=〜“。*宝。* ”和listype.name！=~ " .me *.* " RETURN instance, listype ORDER BY instance.name ASC skip 0 limit 10

那是你要找的吗？************

# ruby-on-rails - 使用 paperclipdropbox gem 来存储上传

> ID：11337083
> 
> 赞同：0
> 
> 时间：2012-07-05T02:06:27.657
> 
> 标签：ruby-on-rails, file-upload, gem, paperclip, dropbox

我有一个 Rails 应用程序需要存储工作申请的简历。在本地，附件可以使用 Paperclip 插件正常工作。我想使用回形针盒宝石将它们存储在生产中。我做了以下事情：

1）按照github上的文档设置回形针附件

2) 运行安装 dropbox gem 的命令，在其上 paperclipdropbox

```
gem install dropbox 
```

[3）根据https://github.com/dripster82/paperclipdropbox#readme](https://github.com/dripster82/paperclipdropbox#readme)设置回形针盒 我的回形针盒.yml 文件看起来像这样

```
 development:
  dropbox_key: email_for_dropbox_account
  dropbox_secret: password_for_dropboxaccount
production:
  dropbox_key: email_for_dropbox_account
  dropbox_secret: password_for_dropboxaccount 
```

运行后

```
rake paperclipdropbox:authorize 
```

我收到以下错误：

```
 C:\Sites\appname>rake paperclipdropbox:authorize  --trace
rake aborted!
Don't know how to build task 'paperclipdropbox:authorize'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task_
manager.rb:49:in `[]'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:115:in `invoke_task'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `block (2 levels) in top_level'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `each'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `block in top_level'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:88:in `top_level'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:66:in `block in run'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:63:in `run'
C:/RailsInstaller/Ruby1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in
 `'
C:/RailsInstaller/Ruby1.9.2/bin/rake:19:in `load'
C:/RailsInstaller/Ruby1.9.2/bin/rake:19:in `' 
```

不幸的是，我没有在网上找到太多文档。知道可能导致问题的原因吗？您还有其他免费的存储方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:43:46.950

我认为您可能已经安装了 gem，但没有在`Gemfile`. 确保您的 Gemfile 中有`paperclip`, `dropbox`, `paperclip-dropbox`gem。

```
gem 'paperclip'
gem 'dropbox'
gem 'paperclipdropbox' 
```

然后运行`bundle install`，并尝试再次运行该 rake 任务。这是因为默认情况下，Bundler 将隔离并仅使您的宝石`Gemfile`对您的 Rails 应用程序可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T07:18:23.710

您必须在 Dropbox 中创建项目。[这里](https://www.dropbox.com/developers)有链接。

使用后`rake paperclipdropbox:authorize`

# android - 无法从 adb shell 读写

> ID：11337091
> 
> 赞同：1
> 
> 时间：2012-07-05T02:07:23.953
> 
> 标签：android, python, shell, unix, subprocess

我正在尝试用 Python 控制终端。根据我找到的文档，我应该能够使用 Popen 运行终端命令，并输出标准输入和标准输出。不幸的是，它不起作用：

```
import subprocess
o = subprocess.Popen("adb shell",stdin=subprocess.PIPE, stdout=subprocess.PIPE, shell=True)
#for line in o:
#print "I got",line
print o.communicate("ls /")
o.stdin.write("ls /")
o.stdin.flush()
print o.stdout.read()
print o.readline();
print o.communicate() 
```

编辑 - 我尝试了 monkeyrunner，它似乎是为这个任务制作的，但不幸的是它失败并出现错误：

```
>>> device.shell('su')
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] Error executing command: su
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice]com.android.ddmlib.ShellCommandUnresponsiveException
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:408)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.ddmlib.Device.executeShellCommand(Device.java:388)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.chimpchat.adb.AdbChimpDevice.shell(AdbChimpDevice.java:269)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyDevice.shell(MonkeyDevice.java:217)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at java.lang.reflect.Method.invoke(Method.java:616)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyReflectedFunction.__call__(PyReflectedFunction.java:175)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyObject.__call__(PyObject.java:355)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyMethod.__call__(PyMethod.java:215)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyMethod.instancemethod___call__(PyMethod.java:221)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyMethod.__call__(PyMethod.java:206)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyObject.__call__(PyObject.java:397)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyObject.__call__(PyObject.java:401)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.pycode._pyx19.f$0(<stdin>:1)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.pycode._pyx19.call_function(<stdin>)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyTableCode.call(PyTableCode.java:165)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.PyCode.call(PyCode.java:18)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.Py.runCode(Py.java:1197)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.core.Py.exec(Py.java:1241)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.PythonInterpreter.exec(PythonInterpreter.java:147)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runcode(InteractiveInterpreter.java:89)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runsource(InteractiveInterpreter.java:70)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveInterpreter.runsource(InteractiveInterpreter.java:46)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.push(InteractiveConsole.java:110)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.interact(InteractiveConsole.java:90)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at org.python.util.InteractiveConsole.interact(InteractiveConsole.java:60)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.ScriptRunner.console(ScriptRunner.java:193)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:73)
120706 08:29:28.433:S [main] [com.android.chimpchat.adb.AdbChimpDevice] at com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:189) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:55:14.717

好。`monkeyrunner`可以做你展示的例子：

```
#! /usr/bin/env monkeyrunner

from com.android.monkeyrunner import MonkeyRunner

cmd = 'ls /'
print cmd+':', MonkeyRunner.waitForConnection().shell(cmd) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:30:05.063

尝试：

```
o = subprocess.Popen(["adb", "shell"],stdin=subprocess.PIPE, stdout=subprocess.PIPE, shell=True) 
```

该命令必须是我相信的列表。确保`adb`在 python 进程的路径中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T19:43:43.257

你可以试试：

```
import os
ls=os.popen('ls').read() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-21T02:16:32.183

尝试：

```
import subprocess
o = subprocess.Popen(["adb", "shell"],stdin=subprocess.PIPE, stdout=subprocess.PIPE)
o.stdin.write("ls /")
o.stdin.write("\n")
o.stdin.flush()
o.stdout.readline() 
```

# asp.net-mvc-3 - 尝试在 Orchard 中启用客户端验证

> ID：11337093
> 
> 赞同：1
> 
> 时间：2012-07-05T02:07:38.080
> 
> 标签：asp.net-mvc-3, data-annotations, orchardcms, client-side-validation

我正在尝试在 Orchard 中启用客户端验证以获取评论。我已遵循此[SO 讨论](https://stackoverflow.com/questions/10778897/is-it-possible-to-get-standard-asp-net-mvc-unobtrusive-validation-to-work-in-orc)中的建议。我已经注释掉了：

```
 //ModelValidatorProviders.Providers.Clear();
 //ModelValidatorProviders.Providers.Add(new LocalizedModelValidatorProvider()); 
```

我在评论模块的资源清单中包含以下内容。

```
 manifest.DefineScript("jQueryValidation").SetUrl("jquery.validate.js", "jquery.validate.min.js").SetVersion("1.7").SetDependencies("jQuery");
        manifest.DefineScript("jQueryValidation_Unobtrusive").SetUrl("jquery.validate.unobtrusive.js", "jquery.validate.unobtrusive.min.js").SetDependencies("jQuery", "jQueryValidation"); 
```

我在视图中粘贴了以下内容：

```
this.Script.Require("jQueryValidation_Unobtrusive").AtHead(); 
```

我还在 CommentPartRecord.cs 文件中添加了 DataAnnotation，用 [Required] 装饰 Author

以及对 Web.config 的更改：

```
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/> 
```

尽管评论的所有这些服务器端验证都是有效的。没有客户端验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T12:52:27.253

DataAnnotation 不应该在 CommentPartRecord 上，而是在 CommentPart 上。

但是 Orchard.Comments 不是一个很好的例子，因为 CommentPart 没有定义与 Record 相同的属性（它将在未来的版本中重构）。

在您创建的另一个模块上尝试此操作。

# c - 如何使c中的输入无效

> ID：11337095
> 
> 赞同：1
> 
> 时间：2012-07-05T02:08:17.353
> 
> 标签：c

我正在用 C 语言编写一个程序，假设向用户询问一个数字。

数字必须大于零，并且数字前后不能有字母。（即：`400`有效但`abc`或`400abc`不是`abc400`）。我可以让我的程序使除`400abc`. 如果输入开始有效然后变为无效，我将如何使其无效？（我大约 2 个月进入 c 类的介绍，所以我的知识非常有限。）

```
 #include<stdio.h>

int check(void);
void clear_input(void);

main()
{
    int num;
    printf("Please enter a number: ");

    num = check();
    printf("In Main %d\n", num);

}

int check(void){

    int c;

    scanf("%d", &c);
    while (c < 0){
        clear_input();
        printf("Invalid, please enter an integer: ");
        scanf("%d", &c);
    }

    return c;
}

void clear_input(void){
    char junk;
    do{
        scanf("%c", &junk);
    }while (junk != '\n');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T02:14:27.170

您还可以检查从用户输入扫描的每个字符的 ascii 值是否应在 48-57 范围内，它只会是整数值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:40:17.300

`strtol`可以用来做，但需要一些额外的工作。

运行此代码后：

```
char *endptr;
int n = strtol(num_text, &endptr, 10); 
```

`n`将包含数字。但是您仍然必须检查：
1\. `*endptr=='\0'`- 这意味着`strtol`没有停在中间。在`400abc`中，`endptr`将指向`abc`。您可能希望允许尾随空格（在这种情况下，请检查是否`endptr`指向全空格字符串
。2.`num_text`不为空。在这种情况下，`strtol`将返回 0，但空字符串不是有效数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:24:10.687

您可以读取字符数组中的数字并通过检查是否所有字符都在 ascii 范围 48 到 57（'0' 到 '9'）内来验证它。如果是这样，你就没有。是有效的，否则您可以放心地将其视为无效输入。这里是演示：

```
#include<stdio.h>
#include<string.h>
int conv( char * word )
{
    int ans=0;
    int res=0;
    for(int i=0;i<strlen(word);i++)
        if(word[i]>='0' && word[i]<='9')
            ans=(ans*10) + (word[i] - '0');
        else
            res=-999;
    if(res==-999)
        return res;
    else
        return ans;
}
int main()
{
    char a[10];
    gets(a);
    int b=conv(a);
    if(b==-999)
        printf("Invalid Entry.\n");
    else
        printf("Success.No is %d.\n",b);
    return 0;
} 
```

您也可以通过检查单词数组中的第一个字符为“-”并相应地调整符号来调整负数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T02:14:33.577

使用 . 将输入读取为一行`fgets`。

检查所有字符是否都是数字。

如果不是，则无效。如果是，请使用`sscanf`将行转换为 int。

检查int是否在范围内；你完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T02:16:21.710

带有 %d 的 scanf 会将 "400abc" 视为 400，所有尾随字符将被忽略，因此无需担心。

如果您确实想将“400abc”视为无效输入，那么也许您不应该在 scanf 中使用 %d ，而是使用 %s ？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T16:49:08.183

这是 C99，所以用 -std=c99 编译

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <stdbool.h>

bool getNum(int *n) {
    char c, s[10];
    if (!scanf("%9s", s))
        return false;
    for (int i=0; c=s[i]; i++)
        if (!isdigit(c))
    return false; 
    *n = atoi(s);
    return true;
}

int main() {
    int n;
    if (getNum(&n))
        printf("you entered %d\n", n);
    else
        printf("you did not enter a number\n");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-05T10:20:52.607

以下是您重写的检查功能以解决您的问题，因此请尝试以下操作：

```
int check(void){

    int n;
    char c;

    while (EOF==scanf("%d%c", &n,&c) || n < 0 || !isspace(c)){
        clear_input();
        printf("Invalid, please enter an integer: ");
    }

    return n;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-05T07:02:21.140

一种方法是将整行读取为字符串并自行检查它是否包含任何非数字。

另一种方法是读取整数，然后查看输入，`fgetc()`以查看检测到的输入之后的下一个字符是否有效。或者您甚至可以为此使用相同的 scanf() ：

```
char delim;
if(scanf("%d%c", &c, &delim) == 2 && !isspace(delim))
  // the input is invalid 
```

# google-chrome-extension - 如何更改 chrome 扩展程序所有者的电子邮件

> ID：11337098
> 
> 赞同：2
> 
> 时间：2012-07-05T02:08:52.647
> 
> 标签：google-chrome-extension

我创建了一个 google chrome 扩展程序，我想通过更改用于上传扩展程序的电子邮件将所有权转移给不同的用户。那可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T06:53:33.817

是的，只需填写[此表格](http://support.google.com/chrome_webstore/bin/request.py?contact_type=dev_account_transfer)即可转让所有权。

# android - 如何在 Spinner onItemSelected(...) 方法中处理按钮的 onClickListener？

> ID：11337103
> 
> 赞同：0
> 
> 时间：2012-07-05T02:09:43.983
> 
> 标签：android, android-spinner, android-button, onclicklistener

我有一个`Spinner.onItemSelected()`方法，我希望能够在选择项目`Button`后单击 a 后发生事件。`Spinner`

例如，如果您为 Spinner 选择 Beginner，然后为另一个 Spinner 单击 Java。在此之下，我有一个显示“开始”的按钮。如何让`Button.onClick`事件与选定的微调器选项相对应？

我做了这样的事情，但是我分配的`setOnClickListener()`值没有被`View.OnClickListener`.

```
 public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    selected = (Integer) arg0.getItemAtPosition(0);
    position = spinner.getSelectedItemPosition();
    start = (Button)findViewById(R.id.start);
    start.setOnClickListener(phaseHandler);

    View.OnClickListener phaseHandler = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    };

} 
```

我声明的`phaseHandler`没有被读取，`start.setOnClickListener(phaseHandler)`所以这导致我的`View.OnCLickListenr`调用不起作用，因为`phaseHandler`没有设置为`Button`开始。在 Eclipse 中，我`phaseHandler`的红色下划线卷曲表示出现错误`start.setOnClickListener(phaseHandler);`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:21:23.097

移动 start.setOnClickListener(phaseHandler); 下来这可能会帮助你

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub
    selected = (Integer) arg0.getItemAtPosition(0);
    position = spinner.getSelectedItemPosition();
    start = (Button)findViewById(R.id.start);

    View.OnClickListener phaseHandler = new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    };

    start.setOnClickListener(phaseHandler);

} 
```

# seo - 路径不能被谷歌索引

> ID：11337104
> 
> 赞同：1
> 
> 时间：2012-07-05T02:10:07.653
> 
> 标签：seo, urlencode

我的页面包含这种网址： http://fashion.piliapp.com/author/http%3A%2F%2Fwww.wretch.cc%2Fblog%2Fwiwinnie/ 由“ [http://fashion.piliapp.com/](http://fashion.piliapp.com/author/http%3A%2F%2Fwww.wretch.cc%2Fblog%2Fwiwinnie/) 创建”作者/” 。rawurlencode("http://www.wretch.cc/blog/wiwinnie") 。“/”

HTML看起来像

```
<cite><a href="/author/http%3A%2F%2Fwww.wretch.cc%2Fblog%2Fwiwinnie/">♡winnie♡(｡￫v￩｡)♡</a></cite>

```

它在每个页面上出现很多时间，我也在 sitemap.xml 中添加了，但它只有一个结果在**site:fashion.piliapp.com/author/** 它应该有数千页。

我认为问题是： - 谷歌认为这些页面是错别字页面。- CITE 标签不会被索引。- 这种网址无效。

壳我改变什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:17:58.630

是的，如果您仍然可以更改网址，请继续更改它。如果您更改它，请确保一切仍然正常:)

或者，如果您愿意，可以使用一些 base_encode，然后使用 base_decode 技术。

```
<?php
$url = base64_encode($url) . '.htm';
$url = "http://fashion.piliapp.com/author/" . $url;
?> 
```

然后在显示实际页面时，稍后通过解码获取url

```
<?php
$uri = $_SERVER['REQUEST_URI'];
$url = str_replace("http://fashion.piliapp.com/author/",'',$url);
$url = str_replace(".htm",'',$url);

$url = base64_decode($url);
//$url should contain the actual url afterwards

?> 
```

# ruby-on-rails - 命名空间、静态页面和继承的控制器，哪些文件夹中的哪些文件？

> ID：11337105
> 
> 赞同：0
> 
> 时间：2012-07-05T02:10:16.373
> 
> 标签：ruby-on-rails, inheritance, namespaces, controller, routes

我正在构建一个管理控制面板（尝试；））。

我一直在[研究 Ruby on Rails 中的后端管理，](https://stackoverflow.com/questions/107674/backend-administration-in-rails)并按照建议尝试让 Admin::AdminController 检查管理员并设置布局等。

但我也试图在其中设置一个路由，将 /admin 路由到 /admin/dash

根据我对阅读[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)的理解，特别是第 2.6 节，

管理员::管理员控制器

告诉 Rails Admin 是名称空间，AdminController 是控制器，它是 ApplicationController 的子类（扩展？，接口的实现？）。这意味着控制器应该位于 app/controllers/admin/ 中并被称为 admin_controller.rb。

但我想要的是

管理员控制器

我收到如下错误：

```
uninitialized constant Admin::Controller 
```

我的路线代码：

```
 match :admin, :to => 'admin/admin#dash'
  namespace :admin do
    # Directs to /admin/resources/*
    match '/dash', to: '#dash'
    resources :users, :pictures
  end 
```

我已将控制器放入 app/controllers/admin、app/controllers 以及与

```
class Admin::AdminController < ApplicationController
  before_filter :admin_user
  # / ** STATIC ADMIN PAGES ** /
  def dash
  end
end 
```

或类 AdminController < ApplicationController。

编辑：也许这是我对路由的理解。例子：

```
namespace :admin do
  get "/dash" 
```

对比

```
namespace :admin do
  match "/dash" to "admin#dash" 
```

对比

```
namespace...
  match "/dash" to "#dash" 
```

第一个使我可以通过控制器显示破折号，即管理员/破折号将由

```
AdminController < ApplicationControler
  def dash
  end 
```

第二个路由 admin/admin/dash 到 admin/dash 吗？

TL/DR：我认为我的困惑来自语法或我对 RESTful 实践的理解不足，甚至可能是 ruby​​ 中的类/对象继承。

感谢您帮助这个 n00b。:)

附带问题：我可以将我的代码更改为最小化，直到有人像剧透一样打开它，这样如果我找到更多信息并添加它就不会拥挤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:34:41.577

我认为你最初的方法是正确的，但你需要稍微改变一下。

1）在命名空间内插入 /admin => /admin/dash （恕我直言，最好重定向它）

```
match 'admin' => redirect('admin/dash') 
```

或者

```
namespace :admin do
  match '/', to: 'admin#dash'
end 
```

2）你不能将'/dash'与'#dash'匹配，因为你不在**资源**块内，你在**命名空间**块内，所以它没有'隐含控制器。

```
namespace :admin do
  match 'dash', to: 'admin#dash'
  # This will go to Admin::AdminController#dash
  # (first Admin because of the namespace,
  #  and the second because of the controller name)
end 
```

希望它有效：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:32:25.710

您想要的是路由中的“范围”。

```
scope "/admin" do
  resources :articles
end 
```

这会将 /admin/articles 路由到 ArticlesController（没有 Admin:: 前缀）

文档几乎涵盖了所有可能的情况。 [http://edgeguides.rubyonrails.org/routing.html](http://edgeguides.rubyonrails.org/routing.html)

# c# - C#（以及一般的 OOP）中存在私有方法是否有充分的理由？

> ID：11337110
> 
> 赞同：1
> 
> 时间：2012-07-05T02:10:59.943
> 
> 标签：c#, oop

我不是要拖钓，但我真的不明白。为什么语言设计者会允许私有方法而不是一些命名约定（参见 Python 中的 __）？
我搜索了答案，通常的论点是：
**a）**使实现更清晰/避免 IDE 自动完成中的长长的垂直方法列表
**b）**向世界宣布哪些方法是公共接口，哪些方法可能会改变并且仅用于实现目的
**c )**可读性

好的，现在，所有这些都可以通过使用 __ 前缀或“private”关键字命名所有私有方法来实现，除了 IDE 的信息（不要将它们放在自动完成中）和其他程序员（除非你真的必须，否则不要使用它）。地狱，甚至可能需要 unsafe-like 关键字来访问私有方法来真正阻止这种情况。
我问这个是因为我使用了一些 c# 代码，并且出于测试目的，我不断将私有方法更改为公共方法，因为许多中间私有方法（例如用于 xml 序列化的字符串生成器）对于调试目的非常有用（例如编写字符串的某些部分记录文件等）。
**所以我的问题是：**
有没有什么是通过访问限制实现的，但在不限制访问的情况下无法通过命名约定来实现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T02:14:47.907

您提出了几个问题/问题，因此我将分别处理每个问题。

## 如何测试私有方法？

除了[是否应该测试私有方法的辩论/讨论](http://www.google.com/search?q=should%20you%20test%20private%20methods)之外，还有一些方法可以做到这一点。

**重构**
一个广泛的普遍答案是，您可以将行为重构为原始类利用的单独的可测试类。这是有争议的，并不总是适用，具体取决于您的设计或这样做的特权。

**InternalsVisibleTo**
一个常见的例程是将可测试的逻辑提取到方法中并将其标记为`internal`. 在您的程序集属性中，您可以添加一个属性`[InternalsVisibleTo("MyUnitTestingProject")]`。这将允许您从单元测试项目中访问该方法，同时仍然隐藏对所有其他程序集的访问。[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

但是，鉴于您的评论，您无法在工作场所永久更改源代码的结构；您正在更改访问器以进行测试，测试，然后在提交之前将它们更改回来。在这种情况下，有两种选择：

**部分测试类**
如果您将类标记为`partial`. 创建第二个部分类文件，该文件将包含您的测试（或私有成员的公共包装器）。然后当需要合并/提交时，只需从项目中删除您的部分类并`partial`从主类中删除关键字。此外，您可以使用`if DEBUG`（或其他指令）包装整个测试代码文件，以便它仅在单元测试时可用并且不会影响生产/开发代码。 [http://weblogs.asp.net/ralfw/archive/2006/04/14/442836.aspx](http://weblogs.asp.net/ralfw/archive/2006/04/14/442836.aspx)

```
public partial class MyClass
{
    private string CreateTempString()
    {
        return "Hello World!";
    }
}

#if DEBUG

public partial class MyClass //in file "MyClass_Accessor.cs"
{
    public string CreateTempString_Accessor()
    {
        return CreateTempString();
    }
}

#endif 
```

**反射**
你仍然可以通过反射访问私有成员： public class Test { private string PrivateField = "private"; }

```
Test t = new Test();
var publicFieldInfo = typeof(Test).GetField("PrivateField", BindingFlags.Instance | BindingFlags.NonPublic);
Console.WriteLine(publicFieldInfo.GetValue(t)); //outputs "private" 
```

您的单元测试可以通过这种方式提取类中的私有/隐藏数据。事实上，微软提供了两个类来为你做这件事：[PrivateObject](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.privateobject%28VS.80%29.aspx)和[PrivateType](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.privatetype.aspx)

鉴于您的内部开发流程限制，这可能是您最好的选择，因为您将能够在主项目库之外管理自己的测试，而无需更改核心代码中的任何内容。

**请注意**，Silverlight（以及可能的其他 Core-CLR 运行时）在反射期间严格执行非公共访问，因此此选项在这些情况下不适用。

所以，有几种方法可以测试私人成员，我敢肯定还有一些更聪明/不那么聪明的方法潜伏在那里。

* * *

## 是否可以通过使用 __ 前缀命名所有私有方法或引入私有但可访问的访问修饰符来实现所有这些好处？

您（引用其他人）引用的好处是：

1.  为了使实现更清晰/避免 IDE 自动完成中的长长的垂直方法列表
2.  向全世界宣布哪些方法是公共接口，哪些方法可能会改变并且仅用于实现目的
3.  可读性

现在您补充说，这些都可以通过 __*或*通过更改语言规范和/或支持私有但可访问访问修饰符的 IDE 来实现，可能使用一些类似 unsafe 的关键字来阻止这一点。我认为就*更改*语言和 IDE 的当前功能/行为（可能对 StackOverflow 没有意义）进行辩论是不值得的，因此关注*可用*的内容：

**1) 更简洁的实现和智能感知**
Visual Studio IDE（我不能代表 MonoDevelop）确实支持在使用 [EditorBrowsableAttribute] 标记成员时从智能感知中隐藏成员。但这仅在开发人员在其 Visual Studio 选项中启用“隐藏高级成员”选项时才有效。（请注意，当您在同一个程序集中工作时，它不会抑制智能感知中的成员） [http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)

因此，将公共成员标记为这样会使其（智能感知）表现为内部（不支持 [InternalsVisibleTo]）。因此，如果您在同一个程序集中，或者如果您没有`Hide Advanced Members`启用，您仍然会在智能感知中看到一长串 __ 成员。即使您将其从智能感知中隐藏，它仍然可以根据其当前的访问修饰符完全访问。

**2) 公共使用接口/约定**
这假定 C#、Visual Basic、F#、C++.NET 和任何 .NET 开发世界中的所有开发人员都将采用相同的 __ 命名约定*，并*在编译和交换程序集时遵守它开发商之间。也许如果您在 IronPython 中编写脚本，您可以摆脱它，或者如果您的公司内部采用这种方法。但一般来说，这不会发生，.NET 开发人员可能会犹豫利用采用这种约定的库，因为这不是一般的 .NET 文化。

**3) 可读性**
这与#2 一致，因为“可读性”取决于文化和该领域的开发人员期望什么；这当然是有争议的和主观的。我敢打赌，大多数 C# 开发人员发现严格/强制封装可以显着提高代码可读性，我敢肯定他们中的很大一部分会发现 __ 经常使用会减损这一点。（另一方面，我确信开发人员为私有字段采用 _ 或 __ 前缀并仍然保持私有的情况并不少见）

但是，C# 中的可读性和封装不仅仅是公共/私有访问器。在 C# 中，有 private、public、protected internal、protected 和 internal（我错过了一个吗？）每个都有自己的用途，并为开发人员提供不同的信息。现在我不确定您将如何仅通过 __ 与这些访问器进行通信。建议单下划线是受保护的，双下划线是私有的，*这*肯定会妨碍可读性。

* * *

## 有没有什么是通过访问限制实现的，而在不限制访问的情况下通过命名约定无法实现？

如果你问*为什么*C# 设计团队会走这条路，那么我想你总有一天要问 Hejlsberg 先生。我知道他们正在创建一种收集 C/C++ 最好部分的语言，并强烈关注面向对象原则的原则。

至于通过访问修饰符强制访问来实现什么：更能保证 API 消费者的正确访问。如果您的类使用`MakeTempStringForXMLSerialization`将字符串存储为类属性以进行序列化的方法，但出于性能原因放弃了昂贵的检查（因为您，作为开发人员已完成单元测试以确保所有类的字段都将通过公共 API 有效）然后第三方做了一些可爱的垃圾进垃圾出，他们会责怪你和/或供应商的劣质图书馆。这公平吗？不必要; 他们把垃圾放进去，但现实是很多人仍然会责怪供应商。

对于试图了解 API 工作原理的新开发人员来说，这有助于简化他们的体验。是的，开发人员应该阅读文档，但如果公共 API 是直观的（通常应该如此）并且不会暴露大量*不应访问*的成员，那么它就不会那么混乱，而且他们不太可能意外地喂垃圾进入系统。它还将降低让开发人员轻松有效地使用和利用您的 API 的开销。当涉及到您发布的 API 的任何更新，您希望更改/重构/改进您的内部实现细节时，情况尤其如此。

因此，从商业角度来看，它可以保护他们免受责任和与客户的不良关系，并且更能吸引开发商购买和投资。

现在这一切都可能是这种情况，正如你所说，如果每个人都遵循`__`不应该在课堂之外访问成员的约定，或者`unsafe`在你说的地方提供一些标记，“如果你这样做，它会破坏，这不是我的错！ " 那么您与 C# .NET 开发不在同一个星球上。C# 提供的访问器提供了该`__`约定*，但*确保*所有*开发人员都遵守它。

有人可能会争辩说，受限访问是一种错觉，因为消费者可以通过反射来解决它（如上所示），因此访问修饰符和 __ （或其他）符号之间实际上没有*编程差异。*（尽管在 Silverlight/Core-CLR 上，*肯定*存在程序上的差异！）但是开发人员访问这些私有字段所要做的工作是你给消费者一扇敞开的门，上面写着“不要进去” “（你希望他们能读懂）和一扇带锁的门，他们必须砸下来。

那么它到底提供了什么？ *对成员的标准化、强制*访问，其中 as`__`提供对成员的*非标准化、非强制*访问。此外，`__`缺乏各种可用访问修饰符提供的描述范围。

## 更新（2013 年 1 月 2 日）

我知道已经半年了，但我一直在阅读 C# 语言规范，并从第[2.4.2 节标识符](http://msdn.microsoft.com/en-us/library/aa664670%28VS.71%29.aspx)中发现了这个小宝石，其中指出：

> 包含两个连续下划线字符 (U+005F) 的标识符保留供实现使用。例如，一个实现可能会提供以两个下划线开头的扩展关键字。

我想不会发生任何*不好的*事情，如果你这样做，很可能不会发生灾难性的破坏。但这只是规范建议您不要在代码中使用双下划线时应该考虑的另一个方面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T02:35:34.700

私有方法存在的原因是为了提供[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

这允许您提供您希望您的对象与之交互的公共合约，但您的内部逻辑和状态以重构不会影响消费者的方式封装。

例如，您可以提供公共命名属性，但决定将状态存储在 Dictionary 中，类似于类型化 DataSet 所做的。

它并不是真正的“安全”功能（因为您总是有反射来覆盖它），而是一种将公共 API 与内部实现分开的方法。没有人应该“依赖”您的内部和私有实现，他们应该只依赖于您的公共（或受保护）实现。

现在，关于单元测试，通常不希望测试内部实现。但是，一种常见的方法是将其声明为内部并通过`InternalsVisibleToAttribute`Chris 提到的那样为测试程序集提供访问权限。

此外，公共、私有和受保护之间的明确区别对于继承非常有用，可用于定义您期望可覆盖的内容和不应该覆盖的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T02:20:41.630

通常，将字段或方法标记为私有并没有真正意义。它提供了一种人为的安全感。所有的代码都在同一个进程中运行，大概是由彼此友好的人编写的。为什么他们需要访问控制来保护彼此的代码？这听起来像是一个需要解决的文化问题。

文档提供了比私有/受保护/公共更多的信息，一个好的系统无论如何都会有文档。用它来指导你的开发。如果您将一个方法标记为“私有”，而开发人员仍然调用它，那是一个糟糕的开发人员，他最终会以其他方式破坏您的系统。修复那个开发者。

访问控制最终会妨碍开发，而您花时间只是让编译器满意。

当然，如果您严格地谈论 C#，那么您应该坚持将方法标记为私有，因为其他 C# 开发人员会期望它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T02:24:46.100

它隐藏了很多内部细节，特别是对于可能真正想要隐藏这些细节的库实现者。

请记住，那里有商业图书馆正在出售。他们在界面中只向用户展示了非常有限的一组选项，并且他们希望将其余所有选项都隐藏起来。

如果您设计的语言不提供此选项，那么您正在制作一种几乎专门用于开源项目（或主要用于脚本）的语言。不过，我对 Python 了解不多，如果知道是否有用 Python 编写的商业闭源库会很有趣。

你提到的理由也足够好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T02:34:34.127

如果您要发布具有公共成员的库，则用户可以使用这些成员。您可以使用命名约定来告诉他们不应该这样做，但有些人会这样做。

如果您的“内部”成员是公开的，那么您就不可能保证与旧版本的库的兼容性，除非您保持所有内部结构相同并且只进行非常小的更改。这意味着使用您的库的每个程序都必须使用它编译时所针对的版本（并且很可能通过发布自己的版本而不是使用共享系统版本来做到这一点）。

当您的图书馆有安全更新时，这会成为一个问题。充其量，所有程序都使用不同的共享版本，并且您必须将安全更新反向移植到野外的每个版本。更有可能的是，每个程序都有自己的版本，除非该程序的作者这样做，否则根本不会获得更新。

如果您仔细设计您的公共 API，并为您可能更改的内容设置私有成员，您可以将破坏性更改保持在最低限度。然后所有程序/库都可以使用最新版本的库，即使它们是为早期版本编译的，它们也可以从更新中受益。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T02:19:46.433

这可能会引发一些有趣的辩论。标记私有方法（和成员变量）的一个主要原因是强制信息隐藏。外部代码不应该知道或关心你的类是如何工作的。您应该可以自由更改您的 impl 而不会破坏其他内容。这是成熟的软件实践。

然而在现实生活中，私有方法可能会妨碍测试和需要发生的不可预见的变化。Python 坚信“我们都是同意的成年人”并且不鼓励使用私有方法。因此，有时我只会使用命名约定和/或注释“不打算供公众使用”。这是 OO 理论与现实问题的另一个问题。

# c++ - 如何从内存地址中获取值？

> ID：11337111
> 
> 赞同：-3
> 
> 时间：2012-07-05T02:11:15.310
> 
> 标签：c++, windows, memory

我想从我拥有的内存地址中获取值，而不会使程序崩溃。

这是我的代码：

```
int main(){
    int *ptr=(int*)0x09D37570;
    while(1){
        system("cls");
        cout<<(*ptr);
    }
    return 0;
} 
```

但这会使程序崩溃，它通过调用 *ptr 崩溃，为什么会发生这种情况？我怎样才能毫无问题地获得价值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T02:36:56.307

您正在获取一个硬编码的地址并期望它保持您看到的值。但是，这样做有几个问题：

如果担心你自己的过程，你必须拥有那段记忆。你分配的东西`new`或类似的东西最好已经抢走了那个地址，否则不知道会发生什么。例如：

```
int *someAddress = new int (5);
int *somePtr = someAddress; //point to same address as newed
int someInt = *somePtr; //someInt is 5
++somePtr; //uh-oh, now we've left what we newed; it might not be allocated
someInt = *somePtr; //there's no telling if that memory was ok to use 
```

如果它确实起作用，你只会得到一些随机数。事实上，如果你循环足够长的时间，它最终会崩溃。然而，即使是一个问题，它甚至不直接属于这里！

最大的问题是即使它有相同的地址，它也不是相同的内存。这可能听起来令人困惑，但这是一个非常棒的话题（[http://en.wikipedia.org/wiki/Virtual_address_space](http://en.wikipedia.org/wiki/Virtual_address_space)）。基本上，每个进程都有相同的地址值，但它们映射到实际内存中的不同区域。因此，您的硬编码地址仅与您的进程有关。

至少在 Windows 上，您可以查看其他进程的内存的一种方法是使用[ReadProcessMemory](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680553(v=vs.85).aspx)。在页面上，您可以看到要求，例如`PROCESS_VM_READ`对您正在读取的进程具有特权。一定要检查`GetLastError`它是否也失败了。[这里](https://stackoverflow.com/questions/7688462/c-readprocessmemory-into-byte-array)有一个小例子。

请注意，在调用之前， [VirtualQueryEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366907(v=vs.85).aspx)也是一件好事`ReadProcessMemory`。

它可能有效，也可能无效，但这是我所知道的在其他进程的内存空间中闲逛的最好的东西。如果您打算完成此任务，那么值得一试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T02:35:16.070

每个进程都有自己的内存空间，不同进程的同一个地址映射不同的物理地址，那样做是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-05T06:48:22.103

如果您在 Linux 上，您可以使用`gdb`附加到进程，并在某个时间点按 Ctrl-C，然后检查内存。命令是`x`，所以

```
x 0x09D37570 
```

你应该也可以

```
print *(int*)0x09D37570; 
```

使用`gdb`，您处于进程的受保护内存空间中。

如果没有操作系统，您正在尝试做的事情*确实有效。*如果您正在开发没有虚拟内存地址的固件，这*是*获取内存的正确方法。

[https://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html](https://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html)

# javascript - 延迟 JS 加载 - 插入到 Head 或 Body

> ID：11337112
> 
> 赞同：0
> 
> 时间：2012-07-05T02:12:06.340
> 
> 标签：javascript, jquery, optimization, deferred-loading

我想知道在优化、缓存和页面加载速度方面最推荐的方式是什么。使用延迟加载时，我应该在我的网站文档的 BODY 或 HEAD 中动态插入 JS 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:38:20.403

如果您使用 DEFER，则将脚本标签放在 HEAD 或 BODY 中，就脚本何时运行或缓存而言无关紧要。无论哪种方式，它都会在页面解析完成后运行，并根据与 javascript 文件一起发送的服务器标头进行缓存。

您可能仍希望将脚本标记放在正文的末尾，以针对旧浏览器忽略 DEFER 属性的情况进行优化。

或者，您可能希望将脚本标签放在 HEAD 中，以便在获取顺序中更早地获取 javascript 文件（例如，在正文中指定的图像、音频或视频文件之前）。

# java - AES加密/解密java充气城堡解释？

> ID：11337117
> 
> 赞同：2
> 
> 时间：2012-07-05T02:13:20.443
> 
> 标签：java, encryption, aes

有人可以解释一下这个程序在做什么，指出一些要点吗？我正在查看代码，我完全迷路了。我只需要解释加密/解密阶段。我认为它会在某一时刻生成一个 AES 192 密钥，但我不能 100% 确定。我不确定字节/ivBytes 的用途。

```
import java.security.Key;
import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.spec.IvParameterSpec;

public class RandomKey
{
    public static void main(String[] args) throws Exception
    {
    byte[] input = new byte[] { 
                        0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 
                        0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f,
                        0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07 };

    byte[] ivBytes = new byte[] { 
                        0x00, 0x00, 0x00, 0x01, 0x04, 0x05, 0x06, 0x07,
                        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01 };

    //initializing a new initialization vector  
    IvParameterSpec ivSpec  = new IvParameterSpec(ivBytes);
    //what does this actually do?
    Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding", "BC");
    //what does this do?
    KeyGenerator generator = KeyGenerator.getInstance("AES","BC");
    //I assume this generates a key size of 192 bits
    generator.init(192);
    //does this generate a random key?
    Key encryptKey = generator.generateKey();

    System.out.println("input: " +toHex(input));

    //encryption phase
    cipher.init(Cipher.ENCRYPT_MODE, encryptKey, ivSpec);
    //what is this doing?
    byte[] cipherText = new byte[cipher.getOutputSize(input.length)];
    //what is this doing?
    int ctLength = cipher.update(input, 0, input.length, cipherText,0);

    //getting the cipher text length i assume?
    ctLength += cipher.doFinal (cipherText, ctLength );
    System.out.println ("Cipher: " +toHex(cipherText) + " bytes: " + ctLength);

    //decryption phase
    cipher.init(Cipher.DECRYPT_MODE, encryptKey, ivSpec);
    //storing the ciphertext in plaintext i'm assuming?
    byte[] plainText = new byte[cipher.getOutputSize(ctLength)];
    int ptLength = cipher.update(cipherText, 0, ctLength, plainText, 0);
    //getting plaintextLength i think?
    ptLength= cipher.doFinal (plainText, ptLength);
    System.out.println("plain: " + toHex(plainText, ptLength));  

    }

private static String digits = "0123456789abcdef";

public static String toHex(byte[] data, int length)
{
    StringBuffer buf = new StringBuffer();

    for (int i=0; i!= length; i++)
    {
        int v = data[i] & 0xff;

        buf.append(digits.charAt(v >>4));
        buf.append(digits.charAt(v & 0xf));
    }
    return buf.toString();

}

public static String toHex(byte[] data)
{
    return toHex(data, data.length);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:48:38.903

```
 //what does this actually do?
 Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding", "BC"); 
```

这使用 Bouncy Castle (“BC”) 提供程序来获取 AES 密码的实例，设置为无填充 (NoPadding) 的计数器模式 (CTR)。[有关Block Cypher 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation)和[填充](http://en.wikipedia.org/wiki/Padding_%28cryptography%29)，请参阅 Wikipedia 。Javadoc 也会帮助您。

```
//what does this do?
KeyGenerator generator = KeyGenerator.getInstance("AES","BC"); 
```

这再次使用 Bouncy Castle 提供程序为 AES 设置密钥生成器。您可以阅读 Javadoc 以了解更多信息。

```
//what is this doing?
byte[] cipherText = new byte[cipher.getOutputSize(input.length)]; 
```

它设置了一个足够大的字节数组来保存加密的输出。

```
//what is this doing?
int ctLength = cipher.update(input, 0, input.length, cipherText,0); 
```

它实际上是在进行加密。检查 Javadoc 以`update()`获得很好的解释。

```
//getting the cipher text length i assume?
ctLength += cipher.doFinal (cipherText, ctLength ); 
```

不，看`+=` 它正在**更新**密文长度。`update()`再次阅读 Javadoc 以了解和`doFinal()`方法之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:12:19.147

你试过看这里吗？

[http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html](http://docs.oracle.com/javase/6/docs/api/javax/crypto/Cipher.html)

[http://docs.oracle.com/javase/6/docs/api/javax/crypto/KeyGenerator.html](http://docs.oracle.com/javase/6/docs/api/javax/crypto/KeyGenerator.html)

您拥有的代码是一个非常简单的代码示例，说明了如何在 Java 中加密和解密字节数据。

通读类文档后，您可以更好地阐明有关此代码行为的问题。

# qt - 我可以在 Qt 中使用多少种字体？

> ID：11337120
> 
> 赞同：3
> 
> 时间：2012-07-05T02:14:31.970
> 
> 标签：qt, fonts

比如`setFont(QFont("Helvetica",16,1))`，我想总结一下这些字体。但是，我不知道有多少种字体。有大佬告诉我吗 或者给我一个链接。谢谢 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T02:18:47.150

用于`QFontDatabase`查找系统上安装的字体。特别是，检查`QFontDatabase::families()`.

# django - 完整性错误 - integerfield 可能不为空

> ID：11337123
> 
> 赞同：5
> 
> 时间：2012-07-05T02:15:47.813
> 
> 标签：django

```
class Incubator(models.Model):
    name = models.CharField(max_length=30)
    category = models.CharField(max_length=30, blank=True)
    acceptanceRate = models.DecimalField(max_digits=5, decimal_places=2, blank=True, null=True)
    funding = models.IntegerField()
    programLength = models.DecimalField(max_digits=4, decimal_places=2)
    kloutScore = models.IntegerField(blank=True, null=True)
    companies = models.ManyToManyField(Company, blank=True)

    def __unicode__(self):
        return self.name 
```

当我将任何整数字段留空时，我不断收到一条错误消息，

```
IntegrityError at /admin/incubators/incubator/add/
incubators_incubator.kloutScore may not be NULL 
```

我想通过设置空白=真和空=真，它会解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T05:36:52.597

这是因为我在创建数据库之后添加了“blank=true”和“null=true”。我不得不删除我的数据库，然后删除“syncdb”，然后它就起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T14:39:05.603

我在这篇文章中遇到了类似的问题，所以我想我会分享对我有用的解决方案：

在相关 models.py 文件中的原始类中，而不是只使用没有任何值的构造函数，如下所示：

```
 some_field = models.BooleanField() 
```

.. 我*改为*配置默认值 False：

```
 some_field = models.BooleanField(default = False) 
```

..然后再次同步数据库后，我的问题就解决了。

# java - 在java中使用更长的种子生成随机数

> ID：11337127
> 
> 赞同：1
> 
> 时间：2012-07-05T02:16:40.663
> 
> 标签：java, random

所以我知道我可以调用`random(long val)`Java 来生成一个种子为 2^63 的随机数。如何做得更好（更大的种子价值）？我假设这必须是一个手动课程才能完成这样的成就，但我对如何开始有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:46:24.953

增加种子材料量的两种方法是：

*   使用设计用于接受大量种子材料的 RNG。
*   结合两个不同的RNG。

首先，看看 George Marsaglia 的一些方法，它们使用数组来保存它们的状态。[在http://programmingpraxis.com/2010/10/05/george-marsaglias-random-number-generators/](http://programmingpraxis.com/2010/10/05/george-marsaglias-random-number-generators/)有一个示例（请注意评论中的更正：

```
#define SHR3  (jsr^=(jsr<>17), jsr^=(jsr<<5)) 
```

数组 t[256] 是大部分种子所在的位置。

对于第二个，看看 Pierre L'Ecuyer 的工作，例如，[Efficient and Portable Combined Random Number Generators](http://www.iro.umontreal.ca/~lecuyer/myftp/papers/cacm88.pdf)

# vim - 在 Vim 中设置缓冲区特定变量

> ID：11337129
> 
> 赞同：1
> 
> 时间：2012-07-05T02:17:00.983
> 
> 标签：vim

如果未使用以下 autocmd 定义局部变量，我正在尝试将缓冲区局部变量设置为全局变量

```
au BufEnter * if !exists('b:Variable') | let b:Variable = g:Variable | endif 
```

但是，b:Variable 没有得到定义。我在这里做错了什么？

编辑：为了改写/澄清，文件中使用了 b:Variable。错误是`b:Variable is not defined`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:39:23.347

首先，您的自动命令是正确的。它应该工作。

我看到了它可能失败的一些原因：

*   g:变量未定义
*   事件被禁用，请参阅 :help eventignore （这不太可能）
*   您的 vim 版本不支持自动命令功能（这也不太可能）。:version 必须列出 +autocmd。
*   我最喜欢的：自动命令没有来源。您确定您的自动命令处于活动状态吗？

做什么

> :verbose autocmd BufEnter

说？如果您的自动命令未列出，则它未处于活动状态。

或者尝试一些更简单并提供直接反馈的方法，以查看带有 BufEnter 的自动命令是否正常工作。例如

> :au BufEnter * echom "缓冲区输入"

# android - 单击侦听器突然终止应用程序

> ID：11337130
> 
> 赞同：0
> 
> 时间：2012-07-05T02:17:05.210
> 
> 标签：android, button, onclicklistener

我有一个带有 OnClickListener() 的文本框。此外，每当我在文本框中键入字母时，它都会使用一些声音文件大声朗读出来。问题是在读出/输入 5-6 个字母后，应用程序意外终止。我无法弄清楚原因。为什么会这样？

代码在这里：

```
package com.example.newaa;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.support.v4.app.NavUtils;
import android.text.Editable;
import android.text.TextWatcher;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.view.View;
import android.view.View.OnClickListener;

import android.os.Bundle;

public class Recipient extends Activity{
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.recipient);
            EditText a;
            a=(EditText)findViewById(R.id.editText3);
            a.addTextChangedListener(new TextWatcher(){ 
                @Override   
                public void afterTextChanged(Editable s) {   
                       //GET TEXT HERE AFTER TYPING DONE BY PERSON   

                    }   
                @Override   
                public void beforeTextChanged(CharSequence s,int start,int count,int after){  
                      //GET TEXT HERE BEFORE TYPING START BY PERSON

                    }   
                @SuppressLint("ParserError")
                @Override   
                public void onTextChanged(CharSequence s, int start, int before, int count) {   
                   //GET TYPED CHAR HERE 

                    char ch=s.charAt(s.length()-1);
                    if(ch=='a')
                    {

                        MediaPlayer mPlayer1 = MediaPlayer.create(Recipient.this, R.raw.a);
                        mPlayer1.start();
                    }
                    if(ch=='b')
                    {
                        MediaPlayer mPlayer2 = MediaPlayer.create(Recipient.this, R.raw.b);
                        mPlayer2.start();
                    }
                    if(ch=='c')
                    {
                        MediaPlayer mPlayer3 = MediaPlayer.create(Recipient.this, R.raw.c);
                        mPlayer3.start();
                    }
                    if(ch=='d')
                    {
                        MediaPlayer mPlayer4 = MediaPlayer.create(Recipient.this, R.raw.d);
                        mPlayer4.start();
                    }
                    if(ch=='e')
                    {
                        MediaPlayer mPlayer5 = MediaPlayer.create(Recipient.this, R.raw.e);
                        mPlayer5.start();
                    }
                    if(ch=='f')
                    {
                        MediaPlayer mPlayer6 = MediaPlayer.create(Recipient.this, R.raw.f);
                        mPlayer6.start();
                    }
                    if(ch=='g')
                    {
                        MediaPlayer mPlayer7 = MediaPlayer.create(Recipient.this, R.raw.g);
                        mPlayer7.start();
                    }
                    if(ch=='h')
                    {
                        MediaPlayer mPlayer8 = MediaPlayer.create(Recipient.this, R.raw.h);
                        mPlayer8.start();
                    }
                    if(ch=='i')
                    {
                        MediaPlayer mPlayer9 = MediaPlayer.create(Recipient.this, R.raw.i);
                        mPlayer9.start();
                    }
                    if(ch=='j')
                    {
                        MediaPlayer mPlayer10 = MediaPlayer.create(Recipient.this, R.raw.j);
                        mPlayer10.start();
                    }
                    if(ch=='k')
                    {
                        MediaPlayer mPlayer11 = MediaPlayer.create(Recipient.this, R.raw.k);
                        mPlayer11.start();
                    }
                    if(ch=='l')
                    {
                        MediaPlayer mPlayer12 = MediaPlayer.create(Recipient.this, R.raw.l);
                        mPlayer12.start();
                    }
                    if(ch=='m')
                    {
                        MediaPlayer mPlayer13 = MediaPlayer.create(Recipient.this, R.raw.m);
                        mPlayer13.start();
                    }
                    if(ch=='n')
                    {
                        MediaPlayer mPlayer14 = MediaPlayer.create(Recipient.this, R.raw.n);
                        mPlayer14.start();
                    }
                    if(ch=='o')
                    {
                        MediaPlayer mPlayer15 = MediaPlayer.create(Recipient.this, R.raw.o);
                        mPlayer15.start();
                    }
                    if(ch=='p')
                    {
                        MediaPlayer mPlayer16 = MediaPlayer.create(Recipient.this, R.raw.p);
                        mPlayer16.start();
                    }
                    if(ch=='q')
                    {
                        MediaPlayer mPlayer17 = MediaPlayer.create(Recipient.this, R.raw.q);
                        mPlayer17.start();
                    }
                    if(ch=='r')
                    {
                        MediaPlayer mPlayer18 = MediaPlayer.create(Recipient.this, R.raw.r);
                        mPlayer18.start();
                    }
                    if(ch=='s')
                    {
                        MediaPlayer mPlayer19 = MediaPlayer.create(Recipient.this, R.raw.s);
                        mPlayer19.start();
                    }
                    if(ch=='t')
                    {
                        MediaPlayer mPlayer20 = MediaPlayer.create(Recipient.this, R.raw.t);
                        mPlayer20.start();
                    }
                    if(ch=='u')
                    {
                        MediaPlayer mPlayer21 = MediaPlayer.create(Recipient.this, R.raw.u);
                        mPlayer21.start();
                    }
                    if(ch=='v')
                    {
                        MediaPlayer mPlayer22 = MediaPlayer.create(Recipient.this, R.raw.v);
                        mPlayer22.start();
                    }
                    if(ch=='w')
                    {
                        MediaPlayer mPlayer23 = MediaPlayer.create(Recipient.this, R.raw.w);
                        mPlayer23.start();
                    }
                    if(ch=='x')
                    {
                        MediaPlayer mPlayer24 = MediaPlayer.create(Recipient.this, R.raw.x);
                        mPlayer24.start();
                    }
                    if(ch=='y')
                    {
                        MediaPlayer mPlayer25 = MediaPlayer.create(Recipient.this, R.raw.y);
                        mPlayer25.start();
                    }
                    if(ch=='z')
                    {
                        MediaPlayer mPlayer26 = MediaPlayer.create(Recipient.this, R.raw.z);
                        mPlayer26.start();
                    }
                  }   
                });
     }

} 
```

日志在这里：

```
07-05 08:08:42.153: E/AndroidRuntime(321): Uncaught handler: thread main exiting due to uncaught exception
07-05 08:08:42.183: E/AndroidRuntime(321): java.lang.NullPointerException
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.example.newaa.Recipient$1.onTextChanged(Recipient.java:79)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.widget.TextView.handleTextChanged(TextView.java:6172)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:6316)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:889)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:578)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:174)
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:120)
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:231)
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:57)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.os.Looper.loop(Looper.java:123)
07-05 08:08:42.183: E/AndroidRuntime(321):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-05 08:08:42.183: E/AndroidRuntime(321):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 08:08:42.183: E/AndroidRuntime(321):  at java.lang.reflect.Method.invoke(Method.java:521)
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-05 08:08:42.183: E/AndroidRuntime(321):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-05 08:08:42.183: E/AndroidRuntime(321):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:00:52.587

**编辑部分......**

Try to **release the mediaplayer** once the sound is player... And no need to create multiple instances of the mediaplayer... Reinitialize the same one at the starting..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:56:24.613

由于传递`Illegal Activity Context (NULL Context)`给任何方法或其他活动而出现错误。

参考[Uncaught handler: thread main exiting due to uncaught exception](https://stackoverflow.com/questions/7118980/uncaught-handler-thread-main-exiting-due-to-uncaught-exception)，也有类似的问题。您可能会找出问题所在。

# python - 文件传送器安装

> ID：11337132
> 
> 赞同：0
> 
> 时间：2012-07-05T02:17:29.317
> 
> 标签：python, drupal-6, cdn, cloudfiles

对于 Fileconveyor 有限的文档，我在他们的网站 Fileconveyor.org 上按如下方式运行 pip 命令后对它的安装位置感到困惑。

底线：有人在 Debian 6 上安装 Fileconveyor 以与 Drupal 6 和 CND 模块集成吗？

我不知道将我的 settings.xml 文件放在哪里。

谢谢，柯蒂斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:00:39.937

文档确实指出了东西的放置位置，但并不完全清楚，因为我们期望“安装”将东西移动到某些目的地，例如 /usr/bin。实际上，Fileconveyor 安装在与 git clone 放置的位置完全相同的目录中。

设置文件（必须是来自名为“config.sample.xml”的文件的 cp）位于主“conveyor”文件夹中的“conveyor”文件夹中。

您可以阅读的链接是[https://github.com/wimleers/fileconveyor](https://github.com/wimleers/fileconveyor)

它的部分内容是：“示例配置文件 (config.sample.xml) 应该是不言自明的。将此文件复制到 config.xml，这是 File Conveyor 将查找的文件，并对其进行编辑以满足您的需要。”

启动它实际上不会调用任何名为“fileconveyor”的命令，我之前提到过这是典型安装所期望的。来自上述链接的另一条指令如下：

## "启动文件传送器

File Conveyor 必须通过启动它的仲裁器来启动（它将所有东西链接在一起；它控制文件系统监视器、处理器链、传输器等）。您可以像这样启动仲裁器：python /path/to/fileconveyor/arbitrator.py"

在我的情况下，命令是'python ~/src/conveyor/conveyor/arbitrator.py'

回想起来，我可能会在另一个目录中重新安装，以防我清空我的 ~/src 文件夹，该文件夹是我最初用来下载项目以进行编译和安装，然后清理的文件夹。我没想到它最终会成为 Fileconveyor 的安装文件夹。

希望这可以帮助。

# user-interface - FranTK installation

> ID：11337133
> 
> 赞同：3
> 
> 时间：2012-07-05T02:17:35.383
> 
> 标签：user-interface, haskell

I am trying to work with FranTK in order to make some examples to work for class. But cant go further the installation process (cabal install may be to mainstream). I've gotten it from [http://src.gnu-darwin.org/ports/x11-toolkits/hs-frantk/work/](http://src.gnu-darwin.org/ports/x11-toolkits/hs-frantk/work/)

in the readme a directory above it says i need to compile TclHaskellSrc, then FranSrc, then FranTkSrc. but i dont know how.

It also says it works with ghc-5, will it work with ghc-7?

has someone already use it successfully?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T14:11:20.790

FRAN is outdated, bitrotted, and will almost certainly not compile under GHC 7\. (See [Conal Elliott's](http://conal.net/fran/) page for confirmation of this.) It was supposed to have been followed up with successors Reactive and FieldTrip, but, if I remember correctly, these projects hit a snag over OpenGL implementation issues.

If you're looking for good demos of FRP animation, then you'll be better off with one of the following:

*   [elerea](http://hackage.haskell.org/package/elerea) - it's simple, and has several good examples
*   [sodium](http://hackage.haskell.org/package/sodium) - also simple, and also has several good examples
*   [reactive-banana](http://hackage.haskell.org/package/reactive-banana) - More complex than the other two, and more intended for GUI programming than for animation. Still worth a look, as it is well-documented and actively maintained.

The state of the art for FRP *used* to be [Yampa](http://hackage.haskell.org/package/Yampa), but I'd recommend against using either it or its recent fork [Animas](http://hackage.haskell.org/package/Animas), not because they're bad in any way, but rather because they use Arrows, which tend to overcomplicate an already-difficult subject.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T16:48:45.427

Old thread, I know, but Elm ([elm-lang.org](http://elm-lang.org)) has come along in the meantime. It compiles down the JavaScript, supports animations easily, and is under active development.

# ios - Bundle ID 和应用提交

> ID：11337137
> 
> 赞同：-1
> 
> 时间：2012-07-05T02:18:08.527
> 
> 标签：ios, app-store-connect

> **可能重复：**
> [捆绑 ID 后缀？它是什么？](https://stackoverflow.com/questions/3436260/bundle-id-suffix-what-is-it)

这个问题的答案并不能完全涵盖我的问题。

来自 info.plist

```
Bundle Identifier : art.capeann.mobile.${PRODUCT_NAME:rfc1034identifier}
Bundle Name : ${PRODUCT_NAME} 
```

在 iTunes 连接中，我应该为 Bundle ID Suffix 输入什么

```
Bundle ID Suffix = [what do I put here?] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:56:13.587

在 Bundle ID Suffix 中，您应该写下 bundle ID 的全名。

这是不该做的事例：Bundle ID suffix = thebestapp

这是做什么 Bundle ID = com.awesomeapps.thebestapp

# javascript - 在Javascript中取消重定向？

> ID：11337138
> 
> 赞同：2
> 
> 时间：2012-07-05T02:18:15.267
> 
> 标签：javascript, html, css

我将此添加到我的页面顶部：

```
<script type="text/javascript">

if (screen.width <= 800) {
    window.location = "http://m.domain.com";
}

</script> 
```

我的移动版本上有一个名为“主站点”的按钮。我希望按钮转到我的主站点，但不重定向回我的移动站点。我该怎么做呢？

另外，我只希望他们去那里一次。所以，下次他们输入我的网站名称时，我希望它把他们带到移动网站

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:31:41.230

如果您已经有一个按钮可以转到您的主站点。只需将主站点链接到该按钮即可。您可以额外做的是，使用 url 参数来检查并强制主布局。就像是

```
<a href="http://www.domain.com?forcelayout=main">Main site</a> 
```

当您想要强制主布局时，检查此参数。否则，当前使用的脚本将自动执行您想要执行的操作。

* * *

使用以下函数读取查询字符串。[[来源]](https://stackoverflow.com/a/5158301/295264)

```
function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)')
                    .exec(window.location.search);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
} 
```

接下来，您可以在逻辑中使用它，如下所示：

```
if (screen.width <= 800 && getParameterByName('forceLayout') != 'main') {
    window.location = "http://m.domain.com";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:26:40.280

你可以检查`document.referrer`

```
<script type="text/javascript">
if (screen.width <= 800 && document.referrer.indexOf('http://m.domain.com') != 0) {
    window.location = "http://m.domain.com";
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T02:29:33.720

当有人点击您的“主站点”按钮时，在您重定向到您的主站点之前，创建一个“MobilOptOut”cookie，然后在您的 screen.width if 语句中测试该 cookie 的存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T02:53:57.120

客户端需要管理用户想要查看的当前视图的状态。由于 HTTP 是一种无状态协议，因此您可以使用 cookie 在 HTTP 请求中保留用户的选择。

当用户单击按钮以显示主要版本时，将 cookie 作为单击事件的一部分删除。同样，当用户想要查看移动版本时，将 cookie 设置为您想要的值。由于有许多使用 JavaScript 操作 cookie 的方法可能依赖于库，因此下面是您的页面应该执行的伪代码。

```
// Pseudocode:
// Sets a cookie named "view" with the value "mobile"
function setMobileView() {
    Cookie.set("view", "mobile");
}
mobileViewButton.onclick = setMobileView;

// Deletes the cookie named "view"
function setMainView() {
    Cookie.delete("view");
}
mainViewButton.onclick = setMainView; 
```

这是您的重定向逻辑的伪代码：

```
// Pseudocode for deciding the view to display
if (view === "mobile") {
  location.href = "http://m.domain.com";
} 
```

# php - PHP代码可以将图像插入excel文件并在MS Excel中正确打开吗？

> ID：11337142
> 
> 赞同：3
> 
> 时间：2012-07-05T02:19:28.550
> 
> 标签：php, image, phpexcel

我已经有一个 excel 文档，我想使用 php 将图像插入到该 excel 中。

有可能这样做吗？如何实现它（代码）？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T11:32:16.030

```
$fileType = 'Excel2007';
$fileName = 'test.xlsx';

// Load the workbook
$objPHPExcelReader = PHPExcel_IOFactory::createReader($fileType);
$objPHPExcel = $objPHPExcelReader->load($fileName);

// Add an image to the worksheet
$objDrawing = new PHPExcel_Worksheet_Drawing();
$objDrawing->setName('My Image');
$objDrawing->setDescription('The Image that I am inserting');
$objDrawing->setPath('./images/myImage.png');
$objDrawing->setCoordinates('B2');
$objDrawing->setWorksheet($objPHPExcel->getActiveSheet());

// Save the workbook
$objPHPExcelWriter = PHPExcel_IOFactory::createWriter($objPHPExcel,$fileType);
$objPHPExcelWriter->save($fileName); 
```

# android - 无法将 java web 服务引用到 android

> ID：11337143
> 
> 赞同：2
> 
> 时间：2012-07-05T02:19:37.137
> 
> 标签：android, web-services

这是我的安卓活动。请帮帮我。如果您可以删除您的邮件 ID，我将完全发送该项目。

```
package prakash.ws.connectsql;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;

import android.os.Bundle;
import android.app.Activity; 
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

private static final String Soap_Action="http://testws.ws.prakash/testws";
private static final String Method_Name="testws";
private static final String Name_Space="http://testws.ws.prakash/";
private static final String URI="http://localhost:8045/testws/services/Testws?wsdl";
EditText ET;
TextView Tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     // Packeting the request
    SoapObject request=new SoapObject(Name_Space,Method_Name);
    // pass the parameters to the method.If it has one
    request.addProperty("name", ET.getText().toString());

    //passing the entire request to the envelope
    SoapSerializationEnvelope soapEnvelope=new            SoapSerializationEnvelope(SoapEnvelope.VER11);
    soapEnvelope.setOutputSoapObject(request);

    //transporting envelope
    AndroidHttpTransport aht=new AndroidHttpTransport(URI);
    try{
        aht.call(Soap_Action, soapEnvelope);
        @SuppressWarnings("deprecation")
        SoapPrimitive resultString=(SoapPrimitive)       soapEnvelope.getResult();
        Tv.setText(resultString.toString());
    }catch(Exception e)
    {
        Tv.setText("error");
    }       
}
} 
```

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

```
 <wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"         xmlns:ns1="http://org.apache.axis2/xsd" xmlns:ns="http://testws.ws.prakash"      xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"       xmlns:http="http://schemas.xmlsoap.org/wsdl/http/"      xmlns:xs="http://www.w3.org/2001/XMLSchema"  xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/"      xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"    xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" targetNamespace="http://testws.ws.prakash">
 <wsdl:documentation>Please Type your service description here</wsdl:documentation>
 <wsdl:types>
 <xs:schema attributeFormDefault="qualified" elementFormDefault="qualified"       targetNamespace="http://testws.ws.prakash">
<xs:element name="testws">
 <xs:complexType>
  <xs:sequence>
  <xs:element minOccurs="0" name="name" nillable="true" type="xs:string"/>
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  <xs:element name="testwsResponse">
  <xs:complexType>
  <xs:sequence>
  <xs:element minOccurs="0" name="return" nillable="true" type="xs:string"/>
  </xs:sequence>
  </xs:complexType>
  </xs:element>
  </xs:schema>
  </wsdl:types>
  <wsdl:message name="testwsRequest">
  <wsdl:part name="parameters" element="ns:testws"/>
  </wsdl:message>
  <wsdl:message name="testwsResponse">
  <wsdl:part name="parameters" element="ns:testwsResponse"/>
  </wsdl:message>
  <wsdl:portType name="TestwsPortType">
  <wsdl:operation name="testws">
   <wsdl:input message="ns:testwsRequest" wsaw:Action="urn:testws"/>
   <wsdl:output message="ns:testwsResponse" wsaw:Action="urn:testwsResponse"/>
   </wsdl:operation>
   </wsdl:portType>
   <wsdl:binding name="TestwsSoap11Binding" type="ns:TestwsPortType">
  <soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
  <wsdl:operation name="testws">
  <soap:operation soapAction="urn:testws" style="document"/>
  <wsdl:input>
  <soap:body use="literal"/>
  </wsdl:input>
  <wsdl:output>
  <soap:body use="literal"/>
  </wsdl:output>
  </wsdl:operation>
  </wsdl:binding>
  <wsdl:binding name="TestwsSoap12Binding" type="ns:TestwsPortType">
  <soap12:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
  <wsdl:operation name="testws">
  <soap12:operation soapAction="urn:testws" style="document"/>
  <wsdl:input>
  <soap12:body use="literal"/>
  </wsdl:input>
  <wsdl:output>
  <soap12:body use="literal"/>
  </wsdl:output>
</wsdl:operation>
 </wsdl:binding>
 <wsdl:binding name="TestwsHttpBinding" type="ns:TestwsPortType">
 <http:binding verb="POST"/>
 <wsdl:operation name="testws">
 <http:operation location="testws"/>
  <wsdl:input>
 <mime:content type="text/xml" part="parameters"/>
 </wsdl:input>
 <wsdl:output>
 <mime:content type="text/xml" part="parameters"/>
 </wsdl:output>
 </wsdl:operation>
  </wsdl:binding>
 <wsdl:service name="Testws">
 <wsdl:port name="TestwsHttpSoap11Endpoint" binding="ns:TestwsSoap11Binding">
 <soap:address   location="http://localhost:8045/testws/services/Testws.TestwsHttpSoap11Endpoint/"/>
 </wsdl:port>
 <wsdl:port name="TestwsHttpSoap12Endpoint" binding="ns:TestwsSoap12Binding">
 <soap12:address location="http://localhost:8045/testws/services/Testws.TestwsHttpSoap12Endpoint/"/>
  </wsdl:port>
  <wsdl:port name="TestwsHttpEndpoint" binding="ns:TestwsHttpBinding">
  <http:address location="http://localhost:8045/testws/services/Testws.TestwsHttpEndpoint/"/>
 </wsdl:port>
 </wsdl:service>
 </wsdl:definitions> 
```

此 Web 服务在服务器中运行良好。

清单文件

我已经添加了互联网权限。

现在这是 logcat 中的错误。

```
07-04 21:31:00.757: E/dalvikvm(375): Could not find class   'org.ksoap2.serialization.SoapObject', referenced from method    prakash.ws.connectsql.MainActivity.onCreate
 07-04 21:31:00.757: W/dalvikvm(375): VFY: unable to resolve new-instance 481    (Lorg/ksoap2/serialization/SoapObject;) in Lprakash/ws/connectsql/MainActivity;
 07-04 21:31:00.757: D/dalvikvm(375): VFY: replacing opcode 0x22 at 0x0008
 07-04 21:31:00.757: D/dalvikvm(375): VFY: dead code 0x000a-004e in   Lprakash/ws/connectsql/MainActivity;.onCreate (Landroid/os/Bundle;)V
 07-04 21:31:00.937: D/AndroidRuntime(375): Shutting down VM
 07-04 21:31:00.937: W/dalvikvm(375): threadid=1: thread exiting with uncaught exception (group=0x40015560)
 07-04 21:31:00.957: E/AndroidRuntime(375): FATAL EXCEPTION: main
 07-04 21:31:00.957: E/AndroidRuntime(375): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject
 07-04 21:31:00.957: E/AndroidRuntime(375):     at prakash.ws.connectsql.MainActivity.onCreate(MainActivity.java:30)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
07-04 21:31:00.957: E/AndroidRuntime(375):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.os.Handler.dispatchMessage(Handler.java:99)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.os.Looper.loop(Looper.java:123)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at java.lang.reflect.Method.invokeNative(Native Method)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at java.lang.reflect.Method.invoke(Method.java:507)
 07-04 21:31:00.957: E/AndroidRuntime(375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-04 21:31:00.957: E/AndroidRuntime(375):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-04 21:31:00.957: E/AndroidRuntime(375):  at dalvik.system.NativeStart.main(Native Method)
 07-04 21:31:05.307: I/Process(375): Sending signal. PID: 375 SIG: 9 
```

# android - Android中的动画形状颜色

> ID：11337144
> 
> 赞同：5
> 
> 时间：2012-07-05T02:19:43.470
> 
> 标签：android, animation, colors, shape

我想在我的Android代码中的某处创建一个循环，以某种速率连续改变两种颜色之间的可绘制矩形的颜色。我想用两个按钮开始和停止它的闪烁。我做了很多研究，但似乎无法弄清楚如何去做。我是 android 新手，没有使用 run() 方法的经验。但我猜我必须使用 run() 方法制作某种矩形类，将其动画化为改变颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-25T18:16:52.523

我对android也很陌生，但我会试一试。

既然你说你想让它闪烁，你应该能够通过一个简单的“for”循环在蓝色和红色之间切换实际图像。按下按钮时，您可以将布尔值的状态从 false 更改为 true。然后，当“for”语句不再为真时，它会跳转到下一组代码，从而停止它。这就是我要做的。

您的两个按钮的 XML：

```
<Button
    android:id="@+id/start"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Start"
    android:Clickable="true"
    android:onClick="start"
     />

<Button
    android:id="@+id/stop" <!-- Gives the button an ID to use in java code -->
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Stop" <!-- sets the text on the button -->
    android:Clickable="true" <!-- makes the button clickable -->
    android:onClick="stop" <!-- The method it calls when it is clicked, removes the necessity of an OnClickListener -->
     /> 
```

现在，您将拥有 2 个 ImageViews:`blue_rectangle`和`red_rectangle`，它们都位于布局中的同一位置。这是两个 ImageView 的 XML

```
<ImageView
android:id="@+id/blue_rectangle"
android:layout_width="100dp"
android:layout_height="75dp"
android:layout_marginLeft="50dp"
android:layout_marginTop="5dp"
android:src="@drawable/blue_rectangle" />

<ImageView
android:id="@+id/red_rectangle"
android:layout_width="100dp"
android:layout_height="75dp"
android:layout_marginLeft="50dp"
android:layout_marginTop="5dp"
android:src="@drawable/red_rectangle" /> 
```

下一部分是棘手的部分。

这里是Java。

```
package your.package.name.thingy.here;

//everything it tells you to import goes here

public class BlinkingActivity extends Activity{

 ImageView blueRectangle;
 ImageView redRectangle;
 Button start;
 Button stop;

    @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourLayout);

    blueRectangle = (ImageView) findViewById(R.id.blue_rectangle);
    redRectangle = (ImageView) findViewById(R.id.red_rectangle);
    start = (Button) findViewById(R.id.start);
    stop = (Button) findViewById(R.id.stop);
    Boolean isBlinking = new Boolean(false);

    blinkRectangle(whateverVariableThisNeeds);

}

public static void blinkRectangle(View view){

blueRectangle.setVisibility(View.INVISIBLE);
redRectangle.setVisibility(View.INVISIBLE);

for(initialization; isBlinking; update){

   blueRectangle.setVisibility(View.VISIBLE);

   blueRectangle.postDelayed(new Runnable() {
   @Override
   public void run() {
   blueRectangle.setVisibility(View.INVISIBLE);
   }
   }, 2000); //the 2000 is the number of milliseconds for how long blue is visible
   redRectangle.setVisibility(View.VISIBLE);

   redRectangle.postDelayed(new Runnable() {
   @Override
   public void run(){
   redRectangle.setVisibility(View.INVISIBLE);
   }
   }, 2000);

   blueRectangle.setVisibility(View.VISIBLE); //This prevents a bug where if the user hits the stop button at just the right time, both rectangles will be invisible.
}

public static void start(View view){ //no need to call this anywhere, the XML onClick does it for you

isBlinking = true; //I think this is how you set a boolean, if not, correct me.

}

public static void stop(View view){//same here

isBlinking = false; //again, correct me if I'm wrong.

}

} 
```

这是代码的基本作用。

它有一个布尔值，默认为 false。虽然它是假的，但矩形不会闪烁。虽然这是真的，但运行中的`for`语句`blinkRectangle()`。该`for`循环使蓝色可见，等待 2 秒，使其不可见，使红色可见，等待 2 秒，然后重复。`start()`和方法将`stop()`布尔值分别切换为 true 和 false。我认为这种类型的`for`循环在返回顶部时会重新检查布尔值。我以前从未使用过它。这就是我可以从我查看的网站收集到的信息。

好吧，我认为这可以做到。如果您不了解任何代码的作用，或者它不起作用，或者我的问题错了，或者我完全错了，或者任何事情，请评论这个答案。我希望这行得通！

祝你好运！

PS这里是我用来参考的网站

[http://www.tutorialspoint.com/java/java_loop_control.htm](http://www.tutorialspoint.com/java/java_loop_control.htm)

[http://www.java-examples.com/java-boolean-example](http://www.java-examples.com/java-boolean-example)

哇...我刚刚意识到这个问题已经 2 岁了。不过，我希望这对你有帮助！

# android - 如何检查特定布局是否包含在来自 JAVA 的 android 中？

> ID：11337147
> 
> 赞同：0
> 
> 时间：2012-07-05T02:20:04.400
> 
> 标签：android, android-layout

我想做以下事情：

```
setContentView(R.layout.product_details_editpage); 
```

我想检查 product_details_editpage 布局中是否包含另一个布局？如果是这样，对于包含的布局组件，我想重用应用程序中其他地方的处理程序。

如果包含的布局有一个按钮，例如注销，那么我不想在上面设置调用 setContentView() 的活动中再次重新实现该注销按钮处理程序。

最简单的方法/最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T15:48:26.190

同意上述意见。接受 讨论结束。

# c# - 扩展方法无法正常工作 C#

> ID：11337148
> 
> 赞同：1
> 
> 时间：2012-07-05T02:20:09.510
> 
> 标签：c#, extension-methods, pass-by-value

所以我有一个简单的方法叫做`Invert`：

```
public static void Invert(this bool value)
{
    value = !value;
} 
```

它位于`.dll`文件中的静态类中。现在，当我进入一个新的 Winforms 项目时，我将其添加`.dll`为参考，到目前为止一切都很好。现在当我这样做时：

```
bool test = true;
test.Invert(); 
```

我没有收到任何错误，但是当我这样做时：

```
MessageBox.Show(test.ToString()); 
```

它输出`true`，好像什么都没有改变。我不确定是因为我在方法中所做的事情还是其他原因。但如果我去：

```
MessageBox.Show((!test).ToString()); 
```

它输出`false`.

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T02:23:26.553

这工作正常。因为`bool`是值类型，所以它作为值传递，并且原始变量 ( `test`) 永远不会被更改。

相反，您应该执行以下操作：

```
public static bool Invert(this bool value) 
{ 
    return !value; 
} 
```

但是，创建一个方法来完成语言本身的工作有点浪费时间。

我认为扩展方法不会让您`this`通过引用获取参数，因此您必须使用常规静态方法，并长期调用它：

```
public static bool Invert(ref bool value) { value = !value; }

BooleanHelpers.Invert(ref test); 
```

最后，这样做会更干净、更容易（更不用说对其他开发人员来说更明显了）：

```
test = !test; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T02:22:09.373

您的扩展方法接受`bool`值，而不是引用。该方法的主体正在更改 的本地副本，而`bool`不是调用者拥有的原始值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:22:19.653

`bool`是一个值类型，你没有通过引用传递它。您需要将结果分配`Invert`给另一个或相同的变量以使其保持不变。

# audio - Corona Lua 波形声音合成

> ID：11337151
> 
> 赞同：3
> 
> 时间：2012-07-05T02:20:43.917
> 
> 标签：audio, lua, coronasdk

我想使用 Corona SDK 制作声音合成器，这意味着在纯 Lua 中。所有 Lua 合成程序都依赖于底层 C 程序。是否有任何生成波形的 Lua 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:04:55.110

我不知道 Corona 是否有允许这样做的音频 API，但 MOAI SDK 是一个免费的、开源的、基于 Lua 的引擎，它以 iOS（+ Android、PC、Mac、Linux）为目标，你可以添加任何你想要的东西想要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T15:51:50.173

我在音频方面没有经验。

但是这里有几个链接可以帮助您入门！

[http://www.coronalabs.com/blog/2011/07/27/the-secretundocumented-audio-apis-in-corona-sdk/](http://www.coronalabs.com/blog/2011/07/27/the-secretundocumented-audio-apis-in-corona-sdk/)

[http://developer.coronalabs.com/forum/2012/02/09/drone-fx](http://developer.coronalabs.com/forum/2012/02/09/drone-fx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T16:30:11.837

不幸的是，Corona SDK 对声音的支持很弱，而且我所知道的 Lua 音频库也不是很好。MOAI似乎已经死了，或者大部分已经死了。

如今，AudioKit 似乎是编写合成的方式，但它仅适用于 Swift 和 Objective-C。很想在 Lua 中看到它，但似乎没有朝那个方向推进：

[http://audiokit.io/](http://audiokit.io/)

# jquery - jQuery，使用自定义属性创建多个 div 实例

> ID：11337152
> 
> 赞同：0
> 
> 时间：2012-07-05T02:21:08.190
> 
> 标签：jquery, html

我基本上有多个 div，它们在一页上包含不同单词（单词、定义等）的信息。所以每个“单词卡”都写成如下（我取出了一些多余的东西）：

```
<div id="card">
    <div class="card-info-box" id="definition" wordID="1">To lessen or get rid of any pain or suffering.</div>
    <a href="#" class="definition" wordID="1">Define</a> 
</div> 
```

我为每个单词添加了一个自定义属性“wordID”。我正在尝试使用 jQuery 创建一个“定义”链接，用于切换适当的#definition div。到目前为止，我有以下 jQuery 代码：

```
 $(document).ready(function() {
    $('#definition').hide();
    $(".definition").click(function(evt) {
        var d = $(this).attr("wordID");
        $("#definition[wordID=" + d + "], #definition[wordID=" + d + "]").toggle();
    }); 
}); 
```

现在页面上只有一张卡片，jQuery 可以很好地切换它各自的定义 div。但是，如果我复制卡片 div 并将第二组的 wordID 更改为 2，则第二个 div 的定义链接不会做任何事情。第一个仍然按预期工作。

有什么我需要改变的，以便 jQuery 对每个 wordID 属性值正确工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:26:21.623

据我所知，您不能拥有多个具有相同 ID 的元素，即使它们具有不同的属性。尝试只使用类或数据项名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:28:56.290

下面试试。您不需要使用属性选择器，您可以使用`$(this).siblings('.card-info-box')`来选择要切换的 div。

```
$(".definition").click(function(evt) {
    evt.preventDefault();
    $(this).siblings('.card-info-box').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:38:33.427

根据之前的答案，您的页面上不能有多个具有相同 id 属性的元素。

我之前也尝试过使用自定义属性，但它们有问题并且不是严格有效的 html。我现在使用的方法是在元素的 id 属性中使用您的 wordID，如下所示：

```
<div id="card-1">
  <div class="card-info-box" id="definition-1">To lessen or get rid of any pain or suffering.</div>
  <a href="#" class="definition" id="define-word-1">Define</a>
</div> 
<div id="card-2">
  <div class="card-info-box" id="definition-2">A state of general wellbeing.</div>
  <a href="#" class="definition" id="define-word-2">Define</a>
</div> 
```

然后根据需要构造关联的id值。

```
$(document).ready(function() {
  $('.card-info-box').hide();
  $(".definition").click(function(evt) {
        var d = $(this).attr("id").replace("define-word-", "");
        $("#definition-" + d).toggle();
        return false;
    });
});​ 
```

（编辑添加返回值，防止点击链接被点击/浏览器跳回页面顶部）

# javascript - 带有 Backbone.js 的无限滚动 jquery 插件

> ID：11337153
> 
> 赞同：1
> 
> 时间：2012-07-05T02:21:11.327
> 
> 标签：javascript, jquery, backbone.js, jquery-infinite-scroll

我正在为我的页面使用[无限滚动 jquery 插件](http://www.infinite-scroll.com/)。在实现backbone.js 之前，无限滚动在我的页面上运行良好。分页链接由 Laravel PHP 框架创建。

**问题：**但是在更改代码以使用backbone.js 后，无限滚动功能停止工作。我想知道这是否是由于插件在主干加载视图之前加载，所以插件没有看到任何内容，并认为没有更多元素可以添加到当前页面。如果是这样，我该如何解决这个问题？否则，可能发生了什么？谢谢！

**JS代码**

```
// Routers

var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'explore'
    },

    explore: function() {
        this.photoList = new PhotoCollection();
        var self = this;
        this.photoList.fetch({
            success: function() {
                self.photoListView = new PhotoListView({collection: self.photoList });
                self.photoListView.render();

                var container = $('#photo_list');
                container.infinitescroll({
                    navSelector  : "#pagination",            // selector for the paged navigation (it will be hidden)
                    nextSelector : "#pagination a",    // selector for the NEXT link (to page 2)
                    itemSelector : "#photo_list .photo_box",          // selector for all items you'll retrieve
                    loadingText  : 'Loading...'
                 }, function( newElements ) {
                    console.log('added!');
                    var newElems = $( newElements );
                    container.append(newElems); // this line of code is not tested
                  }
                );

            }
        });
    }

});

var app = new AppRouter();
Backbone.history.start(); 
```

**HTML**

```
<div id="pagination" style="display: none; ">
     <div class="pagination">
        <span class="previous_page disabled">« Previous</span> 
        <span class="current">1</span> 
        <a href="http://domain.com/explore?page=2">2</a> 
        <a href="http://domain.com/explore?page=3">3</a> 
        <a href="http://domain.com/explore?page=4">4</a> 
        <a href="http://domain.com/explore?page=5">5</a> 
        <a href="http://domain.com/explore?page=2" class="next_page">Next »</a>
     </div>        
</div> 
```

# android - 在 Android 中启动偏好活动时如何跳转到特定偏好？

> ID：11337155
> 
> 赞同：1
> 
> 时间：2012-07-05T02:21:26.027
> 
> 标签：android, android-preferences

我有一个`PreferenceActivity`使用 xml 文件向其中添加首选项的

```
addPreferencesFromResource(R.xml.preferences). 
```

当我开始`PreferenceActivity`时，我被带到了偏好层次结构的顶部，（如预期的那样）。

我现在想要一个快捷按钮，从我的主要活动到preferences.xml 文件层次结构中较低的首选项。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:32:30.410

您无需自定义任何内容。如果您的目标低于 Honeycomb (3.0)，则使用以下结构：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:title="Settings" >

    <PreferenceCategory android:title="Category 1" >
        <PreferenceScreen android:title="Display" >
            ... 
```

每个`<PreferenceScreen>`都将自动加载到活动中。

如果您的目标是 3.x+，您可以参考 Android SDK 文件夹中的示例。

# java - 在 javafx 2.0 中获取给定布局中节点的大小？

> ID：11337160
> 
> 赞同：0
> 
> 时间：2012-07-05T02:22:00.660
> 
> 标签：java, javafx-2

在自定义控件的皮肤中，我想绘制一个与控件大小相同的三角形，并让三角形随着框架大小的调整而增长。我有以下代码，但当我调整框架大小时，边界只会增加。如何让它正确调整大小？

```
private void update()
{
    Bounds bounds = node.getBoundsInParent();
    Path path = new Path();
    path.getElements().add(
            new MoveTo(
            bounds.getWidth() / 2 + bounds.getMinX(), 
            bounds.getMinY()));
    path.getElements().add(
            new LineTo(bounds.getMaxX(), bounds.getMaxY()));
    path.getElements().add(
            new LineTo(bounds.getMinX(), bounds.getMaxY()));
   path.setFill(Color.RED);
   node.getChildren().setAll(path);                
} 
```

编辑：使用摇摆我会做以下事情。但我无法让它在 JavaFX 中工作。

```
public class Arrow extends JPanel
{

@Override
protected void paintComponent(Graphics graphics) {
    super.paintComponent(graphics);
    Dimension size = getSize();

    Point top = new Point(size.width/2,0);
    Point bottomRight = new Point(size.width, size.height);
    Point bottomLeft = new Point(0, size.height);

    GeneralPath path = new GeneralPath();
    path.moveTo(top.x, top.y);
    path.lineTo(bottomRight.x, bottomRight.y);
    path.lineTo(bottomLeft.x, bottomLeft.y);
    path.lineTo(top.x, top.y);

    Graphics2D g2d = (Graphics2D)graphics.create();
    g2d.setColor(Color.RED);
    g2d.fill(path);
    g2d.dispose();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T21:46:11.813

> 在自定义控件的皮肤中，我想绘制一个与控件大小相同的三角形，并让三角形随着框架大小的调整而增长。

JavaFX 的默认 Caspian 样式中的 ScrollBar thumb 实现正是这样做的。它通过 -fx-shape css 属性来实现：

```
.scroll-bar:vertical .increment-arrow {
    -fx-background-color: -fx-mark-highlight-color, -fx-mark-color;
    -fx-background-insets: 1 0 -1 0, 0;
    -fx-padding: 0.333333em 0.5em 0.0em 0.0em; /* 4 6 0 0 */
    -fx-shape: "M -3 0 L 0 4 L 3 0 z";
} 
```

[-fx-shape 的文档](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)是：

> SVG 路径字符串。通过在此处指定形状，区域将采用该形状，而不是矩形或圆角矩形。此路径字符串的语法。

* * *

现在到您显然不相关的问题标题：

> 在 javafx 2.0 中获取给定布局中节点的大小？

那么你真正想要什么尺寸？

Node 的视觉边界是它[在 parent 中的边界](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#getBoundsInParent%28%29)。节点的[布局边界](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#getLayoutBounds%28%29)是：

> 应该用于此节点的布局计算的矩形边界。layoutBounds 可能与节点的视觉边界不同，并且根据节点类型计算不同。

如果您不使用我之前提到的 -fx-shape css 东西（对于您正在做的事情），您可能想要使用布局边界，因为您将在控件的父区域内布置您的三角形，而您的三角形将自动继承应用于父区域的任何变换。

在将节点添加到活动场景并在节点上执行 css 传递之前，通常不会完全计算节点的布局。因此，您可以将侦听器添加到适当的属性（例如 boundsInLocal），并在侦听器被触发时更新您的三角形渲染。这可以在不创建自定义控件和皮肤的情况下完成。

如果您确实采用自定义控件和皮肤路线，那么您可以覆盖控件的[layoutChildren](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/Region.html#layoutChildren%28%29)方法并在那里进行布局工作 - 但这是一个相当复杂的高级用例，除非您尝试创建性能关键的用例，否则通常是不必要的，可重复使用的控件。

# ios - 无法将 UINavBarController 设置为 UITabBarController

> ID：11337163
> 
> 赞同：1
> 
> 时间：2012-07-05T02:23:03.480
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我无法将某个选项卡视图设置为 UiNavigation 控制器。我得到的警告是：

```
Pushing a navigation controller is not supported 
```

这是我的代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1, *viewController2, *viewController3, *viewController4;
        viewController1 = [[HomeViewController alloc] initWithNibName:@"HomeViewController_iPhone" bundle:nil];
        viewController2 = [[SearchViewController alloc] initWithNibName:@"SearchViewController_iPhone" bundle:nil];
        viewController3 = [[ListViewController alloc] initWithNibName:@"ListViewController_iPhone" bundle:nil];
        viewController4 = [[InfoViewController alloc] initWithNibName:@"InfoViewController_iPhone" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    UINavigationController * listNavController = [[UINavigationController alloc] initWithRootViewController:viewController3];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, listNavController, viewController4, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:07:49.973

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, listNavController, viewController4, nil]; 
```

到

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, viewController3, viewController4, nil]; 
```

并在需要时保留对导航控制器的引用。我认为这将是正确的方法，但您也可以将导航控制器包装在一个简单的 UIViewController 中。如果不能保证 viewController3 始终是堆栈中最底层的 VC，您可能会希望这样做。

# facebook - Facebook Opengraph Action 并非始终有效

> ID：11337164
> 
> 赞同：0
> 
> 时间：2012-07-05T02:23:07.913
> 
> 标签：facebook, facebook-opengraph, facebook-timeline

[我创建了一个与我的网站http://liveofofo.com](http://liveofofo.com)集成的 Facebook OpenGraph 应用程序，一切正常，但问题是并非每个读取操作都会触发到时间线的帖子，事实上，它可能在几天内无法工作，我在另一个站点 (ghanamovie.org) 上有相同的 Opengraph 插件和设置，它运行良好，所有读取操作都会触发到时间轴的帖子

我已经做了很多故障排除，但我仍然无法弄清楚问题到底是什么，我将不胜感激任何帮助建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T15:08:43.170

[我快速浏览了页面上第一篇文章](http://liveofofo.com/gossip-column/mbgn-2012-isabella-ayuks-secret-runs/)的源代码。

Open Graph 元标记在页面上重复多次（并且不在文件的 <head> 部分中）。

仔细查看您的代码结构并使用[调试器](http://developers.facebook.com/tools/debug/og/object?q=http://liveofofo.com/gossip-column/mbgn-2012-isabella-ayuks-secret-runs/)查看 Facebook 是否认可您的语法。

如果在发布 Open Graph 操作时出现问题，请记录错误消息。它可能会告诉您帖子失败的原因。

# java - 我在尝试连接到 FTP 服务器时收到“无法连接到主机”Logcat 消息，我做错了什么？

> ID：11337165
> 
> 赞同：2
> 
> 时间：2012-07-05T02:23:15.653
> 
> 标签：java, android, mobile, ftp-client

我正在 Android 上开发一个连接到 FTP 服务器以上传和下载文件的应用程序。为了建立连接，我正在使用基于[此](http://androiddev.orkitra.com/?p=28)的 apache commons-net 库的 FTPClient 类，并且我正在使用 Eclipse。

但我在我的 Logcat 上收到以下消息：

```
07-04 21:11:44.196: D/USB Virtual(14708): Error: could not connect to host ftp://xxx.xxx 
```

以下是我的清单权限：

```
<uses-sdk android:minSdkVersion="7" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

我真的很困惑为什么我无法连接到我的 FTP 服务器，在控制台中没有显示错误。我错过了什么吗？我会感谢任何帮助。

我正在添加我用来连接到我的 FTP 服务器的代码：

```
public boolean ftpConnect(String host, String username, String password,
        int port) {
    try {
        mFTPClient = new FTPClient();
                    //host is ftp://looner-project.zxq.net
        mFTPClient.connect(host);
        mFTPClient.connect(InetAddress.getByName(host));

        if (FTPReply.isPositiveCompletion(mFTPClient.getReplyCode())) {

            boolean status = mFTPClient.login(username, password);
            mFTPClient.setFileType(FTP.BINARY_FILE_TYPE);
            mFTPClient.enterLocalPassiveMode();

            return status;
        }
    } catch (Exception e) {
        Log.d(TAG, "Error: could not connect to host " + host);
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:53:53.880

要检查的东西...

**1.**检查您的互联网连接。

**2.**你给ftp站点的Url正确吗？？

**3.**如果它的密码保护，你给他们正确吗？

**4.**使用命令提示符检查它。给出以下命令来检查它。

```
ftp www.your_ftp_site.com 
```

**执行上述命令后，系统将提示您输入用户名和密码。**

我还附上了我用来将音频文件上传到服务器的代码以使其清楚......

```
 import java.io.File;

    import java.io.FileInputStream;

    import java.io.IOException;

    import org.apache.commons.net.ftp.FTP;

    import org.apache.commons.net.ftp.FTPClient;

    import android.util.Log;

    public class MyOwn {

        public void goforIt(){

            FTPClient con = null;

            try
            {
                con = new FTPClient();
                con.connect("www.mysamle.net");                 // Its dummy Address

                if (con.login("uju495", "Stevejobs!!"))
                {
                    con.enterLocalPassiveMode();                   // Very Important

                    con.setFileType(FTP.BINARY_FILE_TYPE);        //  Very Important
                    String data = "/sdcard/Vivekm4a.m4a";

                    FileInputStream in = new FileInputStream(new File(data));
                    boolean result = con.storeFile("/Ads/Vivekm4a.m4a", in);
                    in.close();
                    if (result) Log.v("upload result", "succeeded");
                    con.logout();
                    con.disconnect();
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            }   
        }

    } 
```

# vba - 搜索两个值并循环复制其间的所有内容

> ID：11337167
> 
> 赞同：2
> 
> 时间：2012-07-05T02:23:28.313
> 
> 标签：vba, excel

我有一个工作表，其中在 AI 列中有许多术语想要搜索两个术语，例如术语 A 和术语 B，并复制两个术语之间的所有行并将其粘贴到新工作表中。这两个术语可能在列中重复。我基本上面临以下问题：每当我运行我的代码时，它也会复制术语 B 和术语 A 之间的行，这是不必要的。以下是我用于两个术语术语 A 和术语 B 的代码。例如，我的列 A 是

研究所事件工作计算机笔记本电脑数字事件数字格式计算机

还有更多术语我想复制术语 A: Event 和术语 B: Laptop 之间的所有行并将其粘贴到新工作表中。我的代码正在做的是复制事件和计算机的所有组合之间的行。甚至计算机和事件之间的行也被复制（在本例中为数字和笔记本电脑）。

```
Sub OpenHTMLpage_SearchIt()
    Dim Cell As Range, Keyword$, N%, SearchAgain As VbMsgBoxResult
    Dim ass As Variant
    Dim Cellev As Range, prakash$, P%, SearchAgaina As VbMsgBoxResult
    Dim asa As Variant

StartSearch:
    N = 1
    Keyword = "Event"

    If Keyword = Empty Then GoTo StartSearch
    For Each Cell In Range("A1:A500")
        If Cell Like "*" & Keyword & "*" Then

        ass = Cell.Address

        P = 1
        prakash = "Computer"
        If prakash = Empty Then GoTo StartSearch
            For Each Cellev In Range("A1:A500")
                If Cellev Like "*" & prakash & "*" Then
                    asa = Cellev.Address

                    Range(asa, ass).Select
                    Selection.Copy
                    Sheets.Add After:=Sheets(Sheets.Count)
                    Range("B13").Select
                    ActiveSheet.Paste

                    Worksheets("sheet1").Select
                    P = P + 1
                End If
            Next Cellev
            N = N + 1
        End If
    Next Cell

End Sub 
```

编辑：代码格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T01:29:18.500

以下是为我工作的代码。这将复制事件和笔记本电脑之间的所有内容并将其粘贴到新工作表中。然后它再次搜索第二次，这次搜索将从下一行开始到第一次搜索。我希望我对此很清楚。

```
 Sub Star123()
   Dim rownum As Long
   Dim colnum As Long
   Dim startrow As Long
   Dim endrow As Long
   Dim lastrow As Long
   rownum = 1
   colnum = 1
   lastrow = Worksheets("Startsheet").Range("A65536").End(xlUp).Row
   With ActiveWorkbook.Worksheets("StartSheet").Range("a1:a" & lastrow)

   For rownum = 1 To lastrow
    Do
       If .Cells(rownum, 1).Value = "Event" Then
          startrow = rownum
       End If

       rownum = rownum + 1

   If (rownum > lastrow) Then Exit For

   Loop Until .Cells(rownum, 1).Value = "Laptop"
   endrow = rownum
   rownum = rownum + 1

   Worksheets("StartSheet").Range(startrow & ":" & endrow).Copy

   Sheets("Result").Select
   Range("A1").Select
   ActiveSheet.Paste

   Next rownum
   End With
   End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:19:08.280

尝试这个：

```
Sub DoEeeeeet(sheetName, termA, termB)

    Dim foundA As Range, _
        foundB As Range
    Dim newSht As Worksheet

    With Sheets(sheetName).Columns(1)
        Set foundA = .Find(termA)
        If Not foundA Is Nothing Then
            Set foundB = .Find(termB, after:=foundA, searchdirection:=xlPrevious)
        End If
    End With

    If foundA Is Nothing Or foundB Is Nothing Then
        MsgBox "Couldn't find " & IIf(foundA Is Nothing, termA, termB)
    Else
        Range(foundA, foundB).Copy
        Set newSht = Sheets.Add
        newSht.Range("B13").PasteSpecial
    End If

End Sub 
```

你可以这样称呼它：

```
DoEeeeeet "Sheet1","Event","Laptop" 
```

它会在名为“Sheet1”的工作表上找到“事件”的第一个实例和“笔记本电脑”的最后一个实例，并将所有这些数据复制到 B13 和新工作表中的后续单元格。

那是你要的吗？或者您是否希望每个子范围都以“事件”开头并以“笔记本电脑”结尾？

# mysql - 在关系数据库中存储列表的最有效方法是什么？

> ID：11337168
> 
> 赞同：0
> 
> 时间：2012-07-05T02:23:40.543
> 
> 标签：mysql, arrays, database-design, relational-database, database-normalization

我在这里和其他地方已经阅读了许多关于在 mysql 中存储数组的强有力的声明。规范化规则似乎表明它是一个坏主意，并且在存储的数组中搜索会导致不雅的代码。但是，对于我正在开发的应用程序，将数组存储在字段中似乎是一个合理的解决方案。我敢肯定这是每个人在这个职位上的错误想法，但我想不出更好的方法。这是设置：

我有一系列表格来存储注册学生、他们可以参加的课程以及他们在每门课程中的表现。所有都“标准化”以避免重复和错误。我希望能够生成一个“我的课程”部分，以便学生在登录后看到他们有资格参加的课程以及他们已经参加但可以自由复习的课程。想到的方法是两个数组；my_eligible_courses 和 my_completed_courses。注册时，学生将获得一组他们有资格参加的课程。这可以存储为多个出现 studentid 的行，他们可以参加的每门课程都有一个：

学生 1 课程 1 学生 1 课程 2 学生 1 课程 n

然后可以在该表中查询学生 1 的所有符合条件的课程，并在学生登录时显示为列表。

或者，studentid 可以是主键，并且在“eligible_courses”列中会有一个数组（课程 1、课程 2、课程 n）。

有一个学生表现表，记录每门课程以及与学生表现相关的指标。它将被查询以报告学生表现、课程质量等，但此表会变得非常大。我很难相信生成 my_completed_courses 列表的最有效方法是每次登录时通过 studentid 查询此表，以便为他们提供已完成课程的列表。

另一个复杂情况是，学生有资格的课程集是可变的，并且随着新课程的开发而扩展，在我看来，这似乎表明为每门新课程生成一组新列是一个坏主意——例如，new course_name , pretest_score, posttest_score, time_to_complete, ... 此外，对于生成一组简单列表的相对平凡的端点来说，每门新课程的表格似乎是一个复杂的解决方案。

因此，为了重申这个问题，将合格和已完成课程的“不雅”排列列表存储在注册学生表中或动态生成这些列表更好吗？

我猜这仍然太含糊，但是任何关于数据库设计的讨论都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:42:35.293

这是一个坏主意，原因有两个：

1.  DBMS 不能强制执行正确的引用^X（可能还有[域](http://en.wikipedia.org/wiki/Integrity_constraints#Domain_Integrity)）完整性，并且**依赖应用程序级的完整性几乎总是一个坏主意**。
2.  虽然数据库将能够回答查询：“根据给定的学生，给我课程”，但如果您需要，您将无法（有效地）朝相反的方向前进。

*^X如何阻止有缺陷的应用程序将不存在的 ID 存储在数组中？或者删除学生仍然参考的课程？即使您的应用程序对课程删除很小心，也没有办法有效地执行此操作 - 您需要进行全表扫描来检查所有数组。*

*你为什么*还要尝试这个？链接（又名联结）表将解决这些问题，而成本适中的一些额外存储空间。

如果你*真的很*在意存储空间，你甚至可以切换 DBMS 并使用支持前沿索引压缩的 DBMS（例如[Oracle](http://www.orafaq.com/node/2523)）。

> 我很难相信生成 my_completed_courses 列表的最有效方法是每次登录时通过 studentid 查询此表，以便为他们提供已完成课程的列表。

数据库非常擅长查询大量数据。在这种情况下，如果正确使用[集群](http://use-the-index-luke.com/sql/clustering)，DBMS 将能够在很少的 I/O 操作中获取这些数据，这意味着非常快。您是否执行了任何实际的基准测试？您是否**测量**过任何实际的性能问题？

> 此外，对于生成一组简单列表的相对平凡的端点来说，每门新课程的表格似乎是一个复杂的解决方案。

生成一个新表*可能*是合理的，以防它有不同的列。但是，这听起来不像你想要做的。

* * *

在我看来，您只需要：

![在此处输入图像描述](../Images/18add650849d472eb2e4d0ac861bf93c.png)

```
CHECK (
    (COMPLETED = 0 AND (performance fields) IS NULL)
    OR (COMPLETED = 1 AND (performance fields) IS NOT NULL)
) 
```

*   当学生注册课程时，在 STUDENT_COURSE 中插入一行，将 COMPLETED 设置为 0 并将表现字段保留为 NULL。
*   当学生完成课程时，将 COMPLETED 设置为 1 并填写表现字段。

*（顺便说一句，您甚至可以完全省略 COMPLETED，而只依赖于测试性能字段是否为 NULL。）*

[InnoDB 表是集群的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，这意味着属于同一学生的 STUDENT_COURSE 中的行在物理上靠近存储在一起，这意味着获取给定学生的课程非常快。

如果您需要朝相反的方向前进（获取给定课程的学生），请在相同字段上添加索引，但顺序相反：{COURSE_ID, STUDENT_ID}。在这种情况下，您甚至可以考虑[覆盖。](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index)

由于我们谈论的是少量行，所以将 COMPLETED 保留为未索引就可以了。如果您*真的*对此感到担忧，您甚至可以执行以下操作：

![在此处输入图像描述](../Images/9aa231aeda68334164cf45b3499ee1a1.png)

COMPLETED_STUDENT_COURSE 是*仅*用于已完成课程的 B-Tree（本质上是 STUDENT_COURSE 的子集，它是所有已注册课程的 B-Tree）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:32:13.537

您应该确信，如果您的表中有适当列的索引，那么查询`my_completed_courses`将非常快速。

当您的表增长到您注意到速度变慢的程度时，您可以使用适当的内存分配设置配置您的 MySQL 服务器，以便它可以将更多数据缓存在内存中。或者你现在可以调查一下。

针对您对添加新课程所做的编辑：不要为每门课程添加新列。不要为每门课程添加新表。为课程创建一个表，并为每个课程添加行。

然后，您应该能够在索引列上将您的表连接在一起，以生成您需要的数据列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:55:43.043

以下是我认为可以帮助您做出正确决定的一些想法。

1.  通常，使用正确规范化的表是一个规则。但这**可能**有例外。也许你的项目**可能是**这样的。

2.  大多数时候，新开发人员倾向于专注于将数据放入数据库。在为特定目的检索它时，他们会陷入困境。因此，考虑到数组与关系表的两种情况，问问你自己，这两种方法是否符合你的目的。例如，如果你想列出学生 X 的课程，你的数组方法就可以了。这是因为您可以像学生证一样通过主键检索它。但是如果你想知道有多少学生在 A 课程上，那么数组方法将是一个可怕的方法。

3.  再说一次，以上几点也取决于您的数据量。例如，如果您只有大约 100 名学生，您可能不会注意到表现的差异。但是，如果您正在查看数千条记录，并且您有大量针对学生的课程列表，那么数组方法**不是**要走的路。

4.  基准。这是您找出答案的最佳方式。您可以使用 MySQL 的解释，也可以使用执行查询的程序对其进行计时。用您的标准数据量尝试每种方法，看看哪种方法效果最好。例如，在最近的过去，MySQL 一直在吹嘘自己的 ISAM 引擎的实力。然后我不得不处理一个涉及数百万条记录的大型应用程序。在这里，我注意到每次出现新记录时，都必须重建索引。所以现在我们不得不改变规则。同样，您最好使用正确的数据量进行测试并做出更好的决定。

但是不要把这个例子当作一个规则。相反，遵循规范化标准，只弯曲例外规则。

# .net - 字符串或二进制数据将被截断，但值足够短以适应

> ID：11337171
> 
> 赞同：1
> 
> 时间：2012-07-05T02:24:46.127
> 
> 标签：.net, mysql, sql

作为标题，我在插入新值时不断收到相同的错误消息，但我的值足够短以适合现在让我烦恼的特定列。

```
insert into x_licenseXservice(license_ID,service_ID)
VALUES('PSV(D)',2) 
```

对于列“license_ID”，数据类型设置为 varchar(40) 对于列“service_ID”，数据类型设置为 smallint

希望哪位大神指出问题，谢谢~

# javascript - 用 parseInt() 对变量求和；不工作

> ID：11337172
> 
> 赞同：0
> 
> 时间：2012-07-05T02:24:49.937
> 
> 标签：javascript, variables, add, parseint

在Javascript中添加多个变量之和的正确方法是什么？

这就是我想要做的。我已经尝试过在变量周围加引号和不加引号。我没有得到 NaN 或 Undefined 或任何东西。没有任何输出。

```
function setstat(){
document.getElementById('date').value = window.opener.document.getElementById('thisday').value;
document.getElementById('name').value = window.opener.document.getElementById('element_7').value;
document.getElementById('time').value = window.opener.document.getElementById('stwa').value;

inbcalls = window.opener.document.getElementById('element_6').value;
document.getElementById('totinb').value = inbcalls;
inbcallsp = parseInt("inbcalls",10);
asaptotal = window.opener.document.getElementById('asapcalls').value;
document.getElementById('asaptot').value = asaptotal;
asaptotalp = parseInt("asaptotal",10);
faxtotal = window.opener.document.getElementById('faxcalls').value;
document.getElementById('faxtot').value = faxtotal;
faxtotalp = parseInt("faxtotal",10);
obtotal = window.opener.document.getElementById('obcalls').value;
document.getElementById('obtot').value = obtotal;
totalcalls = inboundcallsp + asaptotalp + faxtotalp + obtotalp;
document.getElementById('totsum').value = totalcalls;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:26:51.357

为什么要引用变量名？

```
inbcallsp = parseInt("inbcalls",10); 
```

应该：

```
inbcallsp = parseInt(inbcalls, 10); 
```

其他人也一样。您想解析变量的值，而不是变量的名称；那些总是会导致`NaN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:29:23.430

asaptotalp = parseInt("asaptotal",10); "asaptotal" 被识别为字符串而不是你不应该引用它的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T18:43:24.717

使用 parseInt 时，始终将基数指定为 10。

函数特征：parseInt(string, radix)

基数是可选的，但如果省略，JavaScript 假定如下：

如果字符串以“0x”开头，则基数为 16（十六进制） 如果字符串以“0”开头，则基数为 8（八进制）。不推荐使用此功能如果字符串以任何其他值开头，则基数为 10（十进制）

示例：parseIn("05") ==== 0 -> true

parseIn("05", 10) ==== 5 -> true

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-20T12:03:29.883

不要使用`ParseInt`，有时它不会返回正确的值。

更好地使用`Number`，例如：

```
var i=Number(your value) 
```

# c# - 表的 C# 和 SQL 递归搜索

> ID：11337178
> 
> 赞同：0
> 
> 时间：2012-07-05T02:26:09.103
> 
> 标签：c#, sql, lambda

我有一个 db 表，它仅由一列当前 ids（键）和第二个 columnm 及其以前的 ids 组成。id 用于特定对象，但它们必须定期更改。我希望跟踪更改 id 并输出对象的整个 id 血统。在将表格转换为文本并使用列表后，我在 c# 中完成了此操作。但是，在 c# 中是否有一个可用的 SQL 查询可以递归表以获取完整的沿袭？

表：相关 ID

CurrID,PrevID（表）

2,1

4,3

101,2

会产生血统：

1 -> 2 -> 101

3 -> 4

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:40:28.010

您可以使用公共表表达式在 MS SQL 2005 或更高版本中实现此目的（请参阅：http: [//msdn.microsoft.com/en-us/library/ms186243](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx) (v=sql.105).aspx ）：

```
; -- You'll only need this if it's not the first statement in the batch
WITH Recursive AS (
  SELECT CurrID AS ID, CAST(CurrID AS nvarchar) AS Path
  FROM SourceTable
  WHERE PrevID IS NULL -- You need to anchor your first result

  UNION ALL

  SELECT S.CurrID, P.Path + ' > ' + CAST(CurrID AS nvarchar)
  FROM SourceTable S 
  INNER JOIN Recursive R ON R.CurrID = S.PrevID
)
SELECT * FROM Recursive 
```

然后，您可以过滤最终查询以获得您需要的内容。仅从顶部底部过滤出完整的独特路径需要一些创造力，但是可以通过类似这样的方法来完成（我无法对此进行测试，因此可能需要进行一些改进）：

```
; -- You'll only need this if it's not the first statement in the batch
WITH Recursive AS (
  SELECT CurrID AS ID, CAST(CurrID AS nvarchar) AS Path, 0 AS Depth
  FROM SourceTable
  WHERE PrevID IS NULL -- You need to anchor your first result

  UNION ALL

  SELECT S.CurrID, P.Path + ' > ' + CAST(CurrID AS nvarchar), P.Depth + 1
  FROM SourceTable S 
  INNER JOIN Recursive R ON R.CurrID = S.PrevID
)
SELECT Path 
FROM Recursive A
LEFT JOIN Recursive B ON B.Path LIKE A.Path + '%' AND A.Depth < B.Depth
WHERE B.Path IS NULL 
```

您应该知道，在大型数据集上，像这样的字符串处理不会很快，因此在决定以这种方式做事时必须警惕它。

SQL 2008 有一个名为的数据类型`hierarchyid`，它也很有用。我从来没有用过，所以我真的帮不上忙，但如果你有兴趣，这应该让你开始：http: [//msdn.microsoft.com/en-us/library/bb677290.aspx](http://msdn.microsoft.com/en-us/library/bb677290.aspx)

# iphone - 通过 objectID 访问托管对象

> ID：11337179
> 
> 赞同：1
> 
> 时间：2012-07-05T02:26:17.840
> 
> 标签：iphone, objective-c, ios, core-data

我有三种情况：

```
masterMOC - private queue tied to the persistent store, so physical saves happen here
----mainMOC - main queue tied to the UI, child of masterMOC
-------backgroundMOC - private queue, child of mainMOC 
```

让我们看看我在 上创建一个 Employee 对象`mainMOC`，然后保存`mainMOC`. 然后我保存`masterMOC`（写入磁盘）。

现在，我已将 Employee 保存`NSManagedObjectID`在一个变量 objectID 中。我想让这个员工在后台MOC。是否`[backgroundMOC objectWithId:objectID]`服务于这个目的？它会去持久化存储并使用该方法获取该对象吗？还是我必须执行提取请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:02:02.410

你做对了。他们希望您使用 ID 在 MOContexts 之间传递对象。objectWithId 将命中持久存储并以新状态加载对象。您唯一需要担心的是这种情况。

您在 MOContext 中获取一个对象或创建一个新对象。您尝试将 objectID 传递到另一个上下文而不保存新的 MOContext 不会知道更新，如果您创建了一个新对象，则 objectID 不会在持久存储中，所以我认为它返回 nil 或未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:23:20.457

今年有一个名为“核心数据最佳实践”的 WWDC 视频，其中谈到了嵌套的 MOC。但要回答你的问题，是的，`objectWithId`将通过最少数量的 MOC 级别来找到对象。因此，如果您调用`[backgroundMOC objectWithId:objectID]`并且对象存在于 中`mainMOC`，它将从 中获取它，`mainMOC`而无需一路到达`masterMOC`或 数据库。

# javascript - Javascript Regex - 仅影响非 html 代码？（即文字）

> ID：11337185
> 
> 赞同：1
> 
> 时间：2012-07-05T02:27:12.540
> 
> 标签：javascript, jquery, regex

我有一个用跨度包装文本的函数

```
$(".ui-content").html(function (i, v) 
  {  
     return v.replace(/(CANADA)/gi, '<span class="query">$1</span>'); 
}); 
```

但是，当我传入术语`"div"`or `"span"`or `"a"`which are html 时，页面当然会变得一团糟。

我可以更改什么`regex`以仅删除不属于 html 代码`<strong>`但确实可以使用的文本`A strong person is a helpful friend`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:34:36.330

节点操作救援，一如既往！

```
function toArray(obj) {
    var r = [];

    for(var i = 0; i < obj.length; i++) {
        r.push(obj[i]);
    }

    return r;
}

$('.ui-content').each(function() {
    var stack = [this];
    var c, n;

    while(c = stack.pop()) {
        var childNodes = toArray(c.childNodes);

        for(var i = 0; n = childNodes[i]; i++) {
            if(n.nodeType === 1) {
                stack.push(n);
            } else if(n.nodeType === 3) {
                var matches = n.nodeValue.split(/(CANADA)/i);

                for(var i = 0; i < matches.length; i++) {
                    var newNode;

                    if(/CANADA/i.test(matches[i])) {
                        newNode = document.createElement('span');
                        newNode.className = 'query';
                        newNode.appendChild(document.createTextNode(matches[i]));
                    } else {
                        newNode = document.createTextNode(matches[i]);
                    }

                    n.parentNode.insertBefore(newNode, n);
                }

                n.parentNode.removeChild(n);
            }
        }
    }
}); 
```

[这是一个演示 jsFiddle。](http://jsfiddle.net/minitech/Ckhk5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:02:28.550

与@elclanrs 相同的概念，但模仿了负面的外观：

```
$(".ui-content").html(function (i, v) {       
     return v.replace(/([^</])(strong)/gi, ' <span class="query">$2</span> ');
});​ 
```

[http://jsfiddle.net/39VMe/](http://jsfiddle.net/39VMe/)

还有一篇关于如何处理 JavaScript 正则表达式的某些限制的好文章：http: [//blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:45:47.133

我知道人们通常坚持不使用正则表达式来解析 html，但是嘿，这似乎工作得很好。这使用否定前瞻来仅替换单词“strong”而不是实际`<strong>`标签：

```
/strong(?!>)/ 
```

**编辑：**

使用这个更灵活并允许属性的正则表达式：

```
/strong(?!(>|\s\w+=))/g; 
```

无论如何，这一切都取决于您的 HTML。如果正则表达式不这样做，那么您必须正确解析。

**演示：http:** [//jsfiddle.net/mGLjb/2/](http://jsfiddle.net/mGLjb/2/)

# java - Maven多模块项目编译

> ID：11337186
> 
> 赞同：2
> 
> 时间：2012-07-05T02:27:31.580
> 
> 标签：java, maven, module, dependencies

我创建了一个 C/S 框架作为多模块 Maven 项目。它包含三个模块：“server”、“client”和“common”。“公共”模块中的类被“服务器”和“客户端”使用。

但是我不想要一个独立的`common.jar`. 相反，我希望将“common”模块中的类直接编译成`server.jar`and `client.jar`. 有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:15:39.343

您可以使用[maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/)将公共 jar[解压](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-dependencies-mojo.html)到其他项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:14:10.227

完成此操作的最佳方法是使用[`maven-shade-plugin`](http://maven.apache.org/plugins/maven-shade-plugin/).

将此添加到您的服务器/客户端 pom：

```
<project>
    ...
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-shade-plugin</artifactId>
                <version>1.7.1</version>
                <configuration>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>shade</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    ...
</project> 
```

您最终会得到与/`common`相同的 jar 中的类。`server``client`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:43:03.433

使用[带有预定义描述符 jar-with-dependencies 的 maven 程序集插件](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)

**选项 1：** 在“服务器”项目 pom.xml 中包含以下内容：

```
 <build>
    <plugins>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <configuration>
          <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
          </descriptorRefs>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

如果您有的话，这也将包括其他第三方依赖项。

**选项 2：** 此选项用于排除第三方库（如果有）。

1.在pom.xml同目录下创建一个assembly.xml如下。

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>custom</id>
    <formats>
        <format>jar</format>
    </formats>
    <dependencySets>
        <dependencySet>
            <outputDirectory>/</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
            <unpack>true</unpack>
            <scope>runtime</scope>
            <includes>
                <include>common</include>
            </includes>
        </dependencySet>
    </dependencySets>
</assembly> 
```

包含标签必须包含`<groupId>:<artifactId>`格式，这里只提到了 artifactId 'common'，因为我不知道你的 groupId。

2.在“服务器”pom.xml 中包含以下内容：

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <descriptors>
                    <descriptor>assembly.xml</descriptor>
                </descriptors>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

运行程序集命令（程序集：单个）。

# c# - C# Facebook SDK

> ID：11337188
> 
> 赞同：0
> 
> 时间：2012-07-05T02:27:47.453
> 
> 标签：c#, facebook, sdk

我想为我的 WPF 项目使用 C# Facebook SDK，但我从下载链接得到的只是 404 错误。如果没有 404 错误，我什至无法链接以获得反馈。这会持续几天，我不知道在哪里可以找到 C# Facebook SDK。另外我想找到一个很好的文档来如何使用那个 SDK。很抱歉，如果有人问过一些类似或相同的问题，但请在这里回答。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:35:37.510

如您所见，该项目已从 移动[`codeplex`](http://facebooksdk.codeplex.com)到下载。[`Github`](https://github.com/facebook-csharp-sdk)[`this README`](http://facebooksdk.codeplex.com/downloads/get/340200)

# ruby-on-rails - 更改预先存在的应用程序的heroku repo

> ID：11337190
> 
> 赞同：6
> 
> 时间：2012-07-05T02:28:03.857
> 
> 标签：ruby-on-rails, ruby, git, heroku

前段时间我为我的 rails 应用程序创建了一个 heroku 存储库，但因为我从未使用过它而将其删除。现在我已经到了需要使用 heroku 的地步，但我遇到了以下错误：

`! No such app as furious-mist-2295.`这是旧的 repo 名称，所以它显然没有推送到我创建的新堆栈。

这是我正在考虑尝试的，但我担心会对我的 git repo 造成不必要的更改。

`git remote rm origin`

`git remote add origin <URL to new heroku app>`

`git push -u origin master`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T03:01:57.913

原来它可以用以下命令完成

`git remote rm heroku`

`git remote add heroku git@heroku.com:new-application.git`

这是一个非常简单的小修复。在事先不知道这些命令存在的情况下，似乎相当困难。

`git remote -v`派上用场仔细检查 git 和 heroku 中的哪些 repos 被推送和获取。

# java - 获取 SQLiteDatabaseCorruptException

> ID：11337193
> 
> 赞同：0
> 
> 时间：2012-07-05T02:28:21.050
> 
> 标签：java, android, sqlite

问题是我在执行下一个代码时收到了 SqLiteDatabaseCorrupException：

```
ArrayList<Advertiser> arr = new ArrayList<Advertiser>();
        Cursor holo = db.rawQuery("select * from Advertiser;", null);
        while(holo.moveToNext()){
            Advertiser adver = new Advertiser();
            adver.setId(holo.getString(0));
            adver.setNombre(holo.getString(1));
            adver.setDescripcion(holo.getString(2));
            adver.setDireccion(holo.getString(3));
            adver.setContacto(holo.getString(4));
            adver.setSitioWeb(holo.getString(5));
            adver.setFacebook(holo.getString(6));
            adver.setTwitter(holo.getString(7));
            adver.setPosx(holo.getDouble(8));
            adver.setPosy(holo.getDouble(9));
            adver.setCiudad(holo.getString(10));
            System.out.println("Objeto: " + adver.toString());
            arr.add(adver);
        } 
```

发生的情况是 while 开始正常执行，但是当 log cat 显示数据库已损坏然后数据库被删除时，它会到达一个点。发生这种情况的任何原因？

已编辑：我忘了添加，我的应用程序在主要活动启动时下载数据库，这与数据库损坏有关吗？数据库被下载并存储在 sd 卡上。

编辑＃2：这是我如何下载数据库的代码，希望这会有所帮助：

```
public void DescargaBD() {
    try {
        URL url = new URL(
                "http://71.6.150.179:8079/dbHandler.axd?SqliteDbVersion=0");

        HttpURLConnection urlConnection = (HttpURLConnection) url
                .openConnection();

        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.connect();

        File SDCardRoot = Environment.getExternalStorageDirectory();
        File file = new File(SDCardRoot, "DirLaguna.db");

        FileOutputStream fileOutput = new FileOutputStream(file);

        InputStream inputStream = urlConnection.getInputStream();

        int totalSize = urlConnection.getContentLength();
        int downloadedSize = 0;

        byte[] buffer = new byte[1024];
        int bufferLength = 0;
        while ((bufferLength = inputStream.read(buffer)) > 0) {
            fileOutput.write(buffer, 0, bufferLength);
            downloadedSize += bufferLength;
        }
        fileOutput.close();
        location = file.getAbsolutePath();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

提前致谢。

# internet-explorer - CSS3 文本阴影 IE

> ID：11337206
> 
> 赞同：0
> 
> 时间：2012-07-05T02:31:22.443
> 
> 标签：internet-explorer, css

我一直在试图找出这个[网站](http://kremim.com/)是如何设法让文本阴影功能在 IE 7+ 中如此流畅地工作的。

也许它正在使用一些过滤器，但我在网站的样式表中看不到它。有人可以帮我吗？

下图在ie7中有文字阴影效果

![文字阴影ie7+](../Images/1ef0cafea3421cbbaf2e9da26b546270.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:50:01.080

他们使用支持文本，即相同的文本，从原始文本偏移和不同的颜色，并使用 IE 过滤器属性根据网站的此片段进行模糊

```
 <h1 style="position: relative; z-index: 1;">
        Sağlık &amp; Güzellik Bilgilendirme Sitemize Hoş Geldiniz
        <span class="dummyShadow" id="dummyShadow9" 
              style="
              left: -1px; 
              top: 0px; 
              width: 100%; 
              color: rgb(0,0,0); 
              display: block; 
              filter: progid:DXImageTransform.Microsoft.Blur(
                      PixelRadius=2, 
                      MakeShadow=false, 
                      ShadowOpacity=0.8); 
              position: absolute; 
              z-index: -1;">
                   Sağlık &amp; Güzellik Bilgilendirme Sitemize Hoş Geldiniz
        </span>
    </h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:27:24.550

嗨，请阅读下面提到的文章，您可以从这里获得几种`text-shadow` **IE**过滤器。

我希望这会对您有所帮助：- [http://heygrady.com/blog/2011/03/10/css-text-shadows-in-internet-explorer/](http://heygrady.com/blog/2011/03/10/css-text-shadows-in-internet-explorer/)

```
h1 {
  filter: progid:DXImageTransform.Microsoft.Shadow(direction=135,strength=2,color=ff0000);
} 
```

# javascript - 使用 json 文件自动完成

> ID：11337208
> 
> 赞同：0
> 
> 时间：2012-07-05T02:31:29.533
> 
> 标签：javascript, jquery, json, autocomplete

我在让自动完成功能专门处理我收到的 json 文件时遇到了一些麻烦。我不确定这是否需要有一个 php 解决方法，也许它只是我的 jquery 中的一堆错误。但是，这是使用自动完成工具。

非常感谢您对此提供的任何帮助。

**javascript** - 是的，表格都正确标记。

```
$(document).ready(function() {
    $('#autocomplete').autocomplete({
        source: function(request, response) {
            $.getJSON('data/destination.json', { q: request.term }, function(result) {
                response($.map(result, function(item) {
                return item.value;
            }));
        });
    }
}); 
```

**JSON 文件**

```
{
"destinations": [
    {
        "value": "Oceania and Australia",
        "label": "Australia & South Pacific"
    },
    {
        "value": "Australia",
        "label": "Australia"
    },
    {
        "value": "Brisbane",
        "label": "Brisbane Australia"
    },
    {
        "value": "GoldCoast",
        "label": "GoldCoast-Australia"
    },
    {
        "value": "SunshineCoast",
        "label": "SunshineCoast-Australia"
    }, 
```

就这样继续下去。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:38:59.750

下面试试。您应该`$.map`在 json 数据的目的地申请。

```
 source: function(request, response) {
        $.getJSON('data/destination.json', { q: request.term }, function(data) {
            response($.map(data.destinations, function(item) {
            return item.value;
        }));
    }); 
```

# facebook-graph-api - 是否可以在不使用任何 facebook sdk 的情况下重新验证 过期的访问令牌？

> ID：11337210
> 
> 赞同：0
> 
> 时间：2012-07-05T02:31:57.687
> 
> 标签：facebook-graph-api, curl

我使用 c++ 和 libcurl 与 Facebook 交互。我正在制作一个原生 Windows 应用程序，所以我不能使用任何 facebook sdk。我可以使用图形 api 处理过期/无效的访问令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:38:38.963

是的，除非用户取消了您的应用程序的授权。

阅读此[Facebook：操作方法：处理过期的访问令牌](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

只需调用图形 api

这就是 php 中发生的事情，但我认为你可以很容易地翻译它

```
 $token_url="https://graph.facebook.com/oauth/access_token?client_id="
  . $app_id . "&redirect_uri=" . urlencode($my_url) 
  . "&client_secret=" . $app_secret 
  . "&code=" . $code . "&display=popup";
$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);
$access_token = $params['access_token']; 
```

# javascript - 有没有办法检查从顶部加载了多少图片（以像素为单位）？

> ID：11337218
> 
> 赞同：-2
> 
> 时间：2012-07-05T02:33:37.027
> 
> 标签：javascript

标题总和就是全部。不过，这种情况是我有一张长（20x2000px）的图片作为缩略图的精灵。如果我可以开始只为已经加载了所需部分精灵的缩略图开始显示精灵，同时显示加载器，那就太好了。

我只需要知道从顶部开始以像素为单位加载了多少图片（假设它不是渐进式的）。我想用文件大小来估计，虽然那会很不准确。

每个人都有的主要问题 -*为什么要这样做？*

有一个页面显示大约 100 个缩略图。如果这个页面有一个按缩略图降序生成的缩略图精灵，那将是一件好事。

![在此处输入图像描述](../Images/60e63971bd409be245f47bcc1ead074e.png)

这样的页面已经存在。附上截图。加载精灵时，用户可以看到一个灰色的占位符。我只想在该缩略图的精灵所需部分已加载时才显示缩略图。

> @Guy 听起来像是一个理论问题......根据您对下面答案的评论，如果您正在加载 10MB 的“精灵”，那么您做错了。

不，如果可以做到这一点，那就没有错。每次调用页面时，这将减少 100 次调用。即使所有内容都被缓存，这也是一个显着的速度提升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:07:59.070

我明白你想要做什么，但简而言之，你做不到。如果可能的话，在 JavaScript 中计算像素（也许用画布？我不这么认为）只会不合理地消耗资源。然而，单独加载所有图像（即，不是作为一个精灵）将提供您正在寻找的效果，作为大多数浏览器的默认值，尽管以更多请求为代价。

解决方案？使用内容交付网络 (CDN)，因此浏览器可以同时获取所有 100 张图像，而不必给您自己的服务器带来压力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:43:17.087

编辑：

[经过一些额外的搜索，我发现这里](https://stackoverflow.com/questions/10559264/possible-to-calculate-how-much-data-been-loaded-with-ajax)看起来是一个解决方案，并且类似于[这里](http://bytes.com/topic/javascript/answers/474909-how-check-progress-xmlhttprequest)提供的解决方案。基本思想是发出 AJAX 请求并监控进度。

* * *

如果我对您的理解正确，您希望避免在页面加载（或什至发生之后）的短暂时间段内图像尚未完成传输并且尚未出现在应有的位置。

我认为您将遇到的问题（如果这是加载页面的场景）是您正在等待占位符图像和精灵穿过电线。当你的占位符结束时，你的精灵可能已经到达那里或者落后几毫秒，并且你还没有避免上述情况。

如果您正在处理第一次请求精灵的鼠标悬停事件或类似事件，您可以在页面加载时通过 JavaScript 调用它来预加载精灵图像，因此它已经被缓存并准备就绪事件触发。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-05T03:15:47.303

我已经有了理论上的解决方案。在我开始研究它之前，如果有人能告诉我我的想法是否有任何重大错误，那就太好了。

图片是在服务器端生成的，一个又一个的截图。因此，在每个屏幕截图合并到精灵之后，我可以将缩略图大小信息与相应的条目一起保存到数据库中。

一旦用户登陆页面，我将继续检查精灵加载了多少字节，循环遍历每个待显示的条目，检查值是否大于或等于条目“权重”并显示或继续适当循环。

# api - Codeigniter REST CSV 导入到 mysql

> ID：11337221
> 
> 赞同：7
> 
> 时间：2012-07-05T02:34:22.820
> 
> 标签：api, codeigniter, rest, codeigniter-2

我想使用 API 在我的控制器上发布 csv 文件。我正在使用 phil sturgeon 的 Codeigniter REST 库。如何在客户端实现将 CSV 导入到我的 REST 服务器。我只是想问一下，因为我找不到任何关于它的文档。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-05T06:49:55.247

这是一个简单的方法来做到这一点。我不知道人们做什么，但我用这个

这是我的 csv 阅读器库，将其保存在库文件夹中为 csvreader.php。

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class CSVReader {

    var $fields;            /** columns names retrieved after parsing */ 
    var $separator  =   ';';    /** separator used to explode each line */
    var $enclosure  =   '"';    /** enclosure used to decorate each field */

    var $max_row_size   =   4096;    /** maximum row size to be used for decoding */

    function parse_file($p_Filepath) 
    {
        $file           =   fopen($p_Filepath, 'r');
        $this->fields   =   fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure);
        $keys_values        =   explode(',',$this->fields[0]);

        $content            =   array();
        $keys           =   $this->escape_string($keys_values);

        $i  =   1;
        while(($row = fgetcsv($file, $this->max_row_size, $this->separator, $this->enclosure)) != false ) 
        {
            if( $row != null ) { // skip empty lines
                $values         =   explode(',',$row[0]);
                if(count($keys) == count($values)){
                    $arr            =   array();
                    $new_values =   array();
                    $new_values =   $this->escape_string($values);
                    for($j=0;$j<count($keys);$j++){
                        if($keys[$j]    !=  ""){
                            $arr[$keys[$j]] =   $new_values[$j];
                        }
                    }
                    $content[$i]    =   $arr;
                    $i++;
                }
            }
        }
        fclose($file);
        return $content;
    }

    function escape_string($data)
    {
        $result =   array();
        foreach($data as $row){
            $result[]   =   str_replace('"', '',$row);
        }
        return $result;
    }   
}
?> 
```

和控制器方法

```
function readExcel()
{
        $this->load->library('csvreader');
        $result =   $this->csvreader->parse_file('Test.csv');//path to csv file

        $data['csvData'] =  $result;
        $this->load->view('view_csv', $data);  
} 
```

这是视图

```
<table cellpadding="0" cellspacing="0" width="100%">
    <tr>
            <td width = "10%">ID</td>
            <td width = "20%">NAME</td>
            <td width = "20%">SHORT DESCRIPTION</td>
            <td width = "30%">LONG DESCRIPTION</td>
            <td width = "10%">STATUS</td>
            <td width = "10%">PARENTID</td>
    </tr>

            <?php foreach($csvData as $field){?>
                <tr>
                    <td><?php echo $field['id']?></td>
                    <td><?php echo $field['name']?></td>
                    <td><?php echo $field['shortdesc']?></td>
                    <td><?php echo $field['longdesc']?></td>
                    <td><?php echo $field['status']?></td>
                    <td><?php echo $field['parentid']?></td>
                </tr>
            <?php }?>
</table> 
```

注意：这只会读取服务器上存在的文件。如果需要上传文件，请使用[File Upload Class](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)上传文件并将其保存到服务器上的某个位置，然后在`parse_file`方法中给出定位文件的路径。一切都会正常工作。

# java - 我应该将布尔字段设置为易失性吗？

> ID：11337222
> 
> 赞同：2
> 
> 时间：2012-07-05T02:34:29.673
> 
> 标签：java, android, multithreading, concurrency, volatile

以下代码是线程安全的吗？我真的需要设置`dataReady`为`volatile`，尽管一个线程只有一次写入和多次读取（如下所示的while循环）？

```
public class MyApplication extends Application
{
    /* a flag indicates if the data is fully retrieved from the database */
    private volatile boolean dataReady = false;

    @Override
    public void onCreate()
    {
        super.onCreate();

        new AsyncTask<Void, Void, Void>()
        {
            @Override
            protected Void doInBackground(Void... params)
            {
                // retrieve data from the database
                return null;
            }

            @Override
            protected void onPostExecute(Void result)
            {
                dataReady = true;
            }
        }.execute();
    }

    public boolean isDataReady()
    {
        return dataReady;
    }
} 
```

在其他线程（不是主线程）上：

```
while(!getApplication().isDataReady()); // wait until the data is ready 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:06:41.777

将布尔值标记为`volatile`保证可见性，换句话说，它保证所有线程都会看到它的当前值。由于您在不同的线程中进行写入和读取，因此您必须将布尔值标记为`volatile`.

如果您不将其标记为`volatile`，则很有可能（但不是系统地）您的主线程将设置`dataReady`为 true，而另一个线程会将标志视为 false 并继续循环。在更糟糕的情况下，它甚至可能变成无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:45:03.373

```
though there is only one write and multiple reads from one thread 
```

当它是**单线程**时，正如您所提到的，一次写入并多次读取，那么我认为不需要 volatile，因为 volatile 反映了一个线程对另一个线程对数据所做的更改，

但是假设你有**多个线程**读取和写入数据库，最好将**写入方法/语句设置为同步**，并**在从数据库中检索的数据上使用 volatile，这样可以从线程中获得多个访问权限来读取数据.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:50:40.660

代码不一定是线程安全的。虽然我知道系统可以设计为确保只有一个线程创建 MyApplication 的实例然后调用 onCreate，但这并不意味着您提供的代码片段本身就是线程安全的。因此，dataReady 应该被标记为 volatile。

如您所知，易失性意味着主内存中只有一个变量副本，而不是由线程缓存的副本。我认为这在这种情况下是最合适的。

# javascript - javascript将IMG标签中的图像转换为标签中的实际链接图像

> ID：11337234
> 
> 赞同：3
> 
> 时间：2012-07-05T02:36:03.433
> 
> 标签：javascript, image, hyperlink

 我以前曾问过这个问题，并试图多次解决它，但没有运气。
作为一个在 javascript 方面经验很少的非程序员，
我想要一个书签或类似的东西来帮助我用图像链接指向的原始（全尺寸）图像替换页面上的所有图像。例如，如果我单击链接图像，它将带我进入全尺寸图像，但我希望在页面上显示全尺寸图像。

以下是网站代码的示例：

```
<a href="http://www.diyphysics.com/wp-content/uploads/2012/02     Multiplier_schematic.jpg">
<img class="aligncenter wp-image-627" title="Multiplier_schematic" src="http://www.diyphysics.com/wp-content/uploads/2012/02/Multiplier_schematic-1024x205.jpg" alt="Schematic of Dual-Polarity High-Voltage Cockroft-Walton Multiplier by David and Shanni Prutchi" width="614" height="123"/>
</a> 
```

我希望它是：

```
<img class="aligncenter wp-image-627" title="Multiplier_schematic" src="http://www.diyphysics.com/wp-content/uploads/2012/02/Multiplier_schematic.jpg" alt="Schematic of Dual-Polarity High-Voltage Cockroft-Walton Multiplier by David and Shanni Prutchi"/> 
```

宽度和高度限制已被删除。 

例如，这个网站 [http://www.pocketmagic.net/?p=802](http://www.pocketmagic.net/?p=802)
有很多微小的低分辨率图像显示为链接，我希望书签用高分辨率图像替换所有这些图像他们被指向。这样我可以将页面保存为一个整体，或者将其导出...

谢谢 ！

编辑：1.@Frosco，我试过了，但我对 JS 的了解很少，我哪儿也去不了。
2\. @PhD，应该是带有 javascript: 协议的小册子。面向用户，不适合 Web 开发人员。

已解决：感谢约翰，我想通了，

这是 JS 小书签，以防有人感兴趣：

```
javascript:(function(e,a,g,h,f,c,b,d){if(!(f=e.jQuery)||g>f.fn.jquery||h(f)){c=a.createElement("script");c.type="text/javascript";c.src="http://ajax.googleapis.com/ajax/libs/jquery/"+g+"/jquery.min.js";c.onload=c.onreadystatechange=function(){if(!b&&(!(d=this.readyState)||d=="loaded"||d=="complete")){h((f=e.jQuery).noConflict(1),b=1);f(c).remove()}};a.documentElement.childNodes[0].appendChild(c)}})(window,document,"1.3.2",function($,L){$('a img').each(function(index) {    var currentElement= $(this);    var anchor = currentElement.parent();    var highResSource = anchor.attr("href");    var newImage = "<img src='" + highResSource + "'/>" +"</div>";    anchor.html(newImage);});}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T02:46:31.220

这样的事情应该让你开始：

```
$('a img').each(function(index) {
    var currentElement= $(this);
    var anchor = currentElement.parent();
    var highResSource = anchor.attr("href");
    var newImage = "<img src='" + highResSource + "'/>";
    anchor.html(newImage);
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T02:49:49.353

你可以试试[.unwrap()](http://api.jquery.com/unwrap/)：

```
$('img').each(function() {
   var $this = $(this);
   if ($this.attr('src') === $this.parent('a').attr('href')) {
       $this.unwrap();
   }
}); 
```

# c# - 将泛型类型转换为其基类型，反之亦然

> ID：11337248
> 
> 赞同：4
> 
> 时间：2012-07-05T02:39:12.137
> 
> 标签：c#, generics, casting, generic-list

有人可以帮助我解决我在封闭代码中面临的转换......我评论了我遇到问题的代码行。这甚至是实现这一目标的正确方法吗……我想做的是将指定类型的响应转发到提供的回调。

> **编辑 1**
> 
> 我忘了提到 Response 和 AFResponse 是抽象类，它们是：>Response -> AFResponse -> AF 层消息的具体实现

```
public class MessageBinder
{
    private class Subscriber<T> : IEquatable<Subscriber<T>> where T : Response
    {
        ...
    }

    private readonly Dictionary<Type, List<Subscriber<Response>>> bindings;

    public MessageBinder()
    {
        this.bindings = new Dictionary<Type, List<Subscriber<Response>>>();
    }

    public void Bind<TResponse>(short shortAddress, Action<ZigbeeAsyncResponse<TResponse>> callback)
        where TResponse : Response
    {
        List<Subscriber<TResponse>> subscribers = this.GetSubscribers<TResponse>();
        if (subscribers != null)
        {
            subscribers.Add(new Subscriber<TResponse>(shortAddress, callback));
        }
        else
        {
            var subscriber = new Subscriber<TResponse>(shortAddress, callback);

            // ERROR: cannot convert from 'List<Subscriber<TResponse>>' to 'List<Subscriber<Response>>' ... tried LINQ Cast operator - does not work either
            this.bindings.Add(typeof(TResponse), new List<Subscriber<TResponse>> { subscriber });
        }
    }

    public void Forward<TResponse>(TResponse response)
        where TResponse : Response
    {
        var subscribers = this.GetSubscribers<TResponse>();
        if (subscribers != null)
        {
            Subscriber<TResponse> subscriber;
            Type responseType = typeof (TResponse);

            if (responseType.IsSubclassOf(typeof (AFResponse)))
            {
                // ERROR: Cannot convert type 'TResponse' to 'AFResponse' ... tried cast to object first, works, but is this the right way?
                var afResponse = (AFResponse)response;
                subscriber = subscribers.SingleOrDefault(s => s.ShortAddress == afResponse.ShortAddress);
            }
            else
            {
                subscriber = subscribers.First();
            }

            if (subscriber != null)
            {
                subscriber.Forward(response);
            }
        }
    }

    private List<Subscriber<TResponse>> GetSubscribers<TResponse>() where TResponse : Response
    {
        List<Subscriber<Response>> subscribers;
        this.bindings.TryGetValue(typeof(TResponse), out subscribers);

        // ERROR: How can I cast List<Subscriber<Response>> to List<Subscriber<TResponse>>?
        return subscribers;
    }
} 
```

感谢您的任何帮助 ：）

> **编辑 2**
> 
> 我根据@Bojan 的回答更改了代码，它正在工作。但我很好奇，为什么 Dictionary 不能容纳所有 Response 消息的基类？有没有办法做到这一点，或者我只是想把头推过墙？
> 
> **编辑 3**
> 
> 现在我面临另一个问题......当消息到达时，它由字节数组组成，>它进入解决并构建它的消息工厂：

```
public static T Build<T>(Packet packet) where T : Response
{
    Type resolvedType;
    if (!dependencyMap.TryGetValue(packet.MessageId, out resolvedType))
    {
        var str = String.Format("Could not resolve message. Message info: CMD0: {0}, CMD1: {1}, MessageID: {2}",
                                packet.Cmd0, packet.Cmd1, packet.MessageId);
        Debug.WriteLine(str);

        throw new MessageNotFoundException(str);
    }

    ConstructorInfo firstConstructor = resolvedType.GetConstructors().First();

    return (T) firstConstructor.Invoke(new object[] {packet});
} 
```

> 然后调用**OnAsyncResponseReceived(Response response)**事件处理程序，然后将消息转发给该消息的订阅者（如果有）。现在的问题是，如果我订阅（响应的子层是：AFResponse、SystemResponse 等...） SystemResetResponse 是 SystemResponse 的子类，它是 Response 的子类，我必须从 Response(base) 类型中转换该响应具体类型 SystemResetResponse 的方式是为了让 MessageBinder 中的 Forwarder 可以找到该消息类型的订阅者，并转发它。
> 
> 有很多类型，手动铸造会有点过分……有没有办法解决这个问题，或者甚至是更好的方法来设计这种类型的系统？
> 
> **编辑 4**
> 
> 我更改了这样的代码......这是正确的方法吗？还有其他更好的方法吗？总的来说，我是在尝试以正确的方式解决问题还是有更好的方法来处理这个问题？

```
private void OnAsyncResponseReceived(Response response)
{
    dynamic resolvedResponse = Convert.ChangeType(response, response.GetType());
    messageBinder.Forward(resolvedResponse);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:04:19.940

您需要将`subscribers`列表中的每个项目转换为`Subscriber<TResponse>`. 像这样的东西总是对我有用-

```
private List<T> get<T>()
    {
        List<IEntity> list = new List<IEntity>();
        List<T> genericList = new List<T>();
        foreach (var item in list)
        {
            genericList.Add((T)item);
        }
        return genericList;
    } 
```

希望能帮助到你！！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:11:34.560

除了已经提供的答案之外，以下代码行...

```
 Type responseType = typeof (TResponse);
    if (responseType.IsSubclassOf(typeof (AFResponse))) 
```

可以替换为：

```
 if (response is AFResponse) 
```

或更好）

```
 AFResponse af = response as AFResponse;
    if (af != null) 
```

**编辑**更新了代码，因为我事先没有意识到 TResponse 是通用的。您是否还知道 IsSubclassOf 如果它是匹配类型则返回 false ？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T07:40:13.607

您的问题的一部分是您试图将您的字典声明为具有通用订阅者（`List<Subscriber<Response>>`），同时期望每个条目都是不相关的类型（`List<Subscriber<TResponse>>`）。一种解决方案是将实际类型隐藏在`object`or后面`IList`：

```
private readonly Dictionary<Type, object> bindings;

private List<Subscriber<TResponse>> GetSubscribers<TResponse>() 
    where TResponse : Response
{
    object subscribers;
    bindings.TryGetValue(typeof(TResponse), out subscribers);

    return (List<Subscriber<TResponse>>)subscribers;
} 
```

您的`Forward`方法可以以更简单的方式检查`AFResponse`和子类，但强制转换必须经过`object`：

```
public void Forward<TResponse>(TResponse response)
    where TResponse : Response
{
    var subscribers = GetSubscribers<TResponse>();
    if (subscribers != null)
    {
        Subscriber<TResponse> subscriber;

        var afResponse = response as AFResponse;
        if (afResponse != null)
        {
            subscriber = subscribers.SingleOrDefault(s => s.ShortAddress == afResponse.ShortAddress);
        }
        else
        {
            subscriber = subscribers.First();
        }

        if (subscriber != null)
        {
            subscriber.Forward(response);
        }
    }
} 
```

***更新***

您没有声明您的字典包含“所有消息的基类”。即使`Response`是所有响应的基类，`Subscriber<Response>`并且`Subscriber<T>`是不相关的类型。它有点类似于如何`List<int>`和`List<string>`不相关，即使两者都`string`继承`int`自`object`.

您要查找的内容称为[协方差](http://msdn.microsoft.com/en-us/library/ee207183.aspx)，仅受某些接口支持。

例如，如果您有：

```
interface ISubscriber<out T> where T:Response
{}

class Subscriber<T> : ISubscriber<T> where T:Response
{} 
```

你可以这样做：

```
ISubscriber<Response> s = new Subscriber<AFResponse>(); 
```

但是，`List<ISubscriber<Response>>`并且`List<ISubscriber<AFResponse>>`仍然是不相关的类型。

# r - quantmod 的简单功能不再起作用

> ID：11337249
> 
> 赞同：13
> 
> 时间：2012-07-05T02:39:16.443
> 
> 标签：r, quantmod

我明天要交论文，我收到了一个非常奇怪的 quantmod 错误消息，这是我在过去几周使用这个包时从未遇到过的。我无法导入特定于道琼斯指数 (^DJI) 的数据。我收到以下错误消息：

```
getSymbols("^DJI",src="yahoo", from='2005-6-01', to='2012-6-21')

Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  : 
impossible to open the URL 'http://chart.yahoo.com/table.csv?s=^DJI&a=5&b=01&c=2005&d=5&e=21&f=2012&g=d&q=q&y=0&z=^DJI&x=.csv'
Also : Message d'avis :
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
impossible to open : the status HTTP was '404 Not Found' 
```

问这么简单的问题，我几乎觉得不好意思。我真的不明白问题出在哪里..这些例如工作得很好

```
getSymbols("AAPL",src="yahoo", from='2005-6-01', to='2012-6-21')
getSymbols("^NDX",src="yahoo", from='2005-6-01', to='2012-6-21') 
```

那么问题出在哪里？非常感谢您的帮助，我真的很感激！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T03:37:58.580

出于某种原因，雅虎目前不提供该数据。您可以 [在雅虎网站上](http://finance.yahoo.com/q/hp?s=%5EDJI+Historical+Prices) 看到它目前显示“指定日期范围内的历史报价数据不可用”。

我不知道这是暂时的还是永久性的，但我猜它是暂时的，因为正如您所指出的，“^NDX”仍然有效。由于今天是美国的假期，雅虎可能正在维护。

如果它在您为时已晚之前变得可用，我建议您使用`save`或 with保存数据，`FinancialInstrument:::saveSymbols.common`以便您可以使用`getSymbols(*, src='FI')`

如果它在您需要的时候还没有完成，那么您有几个可能会或可能不会满足您需求的替代方案。您可以`getSymbols.FRED`用来获取自 1886 年以来的指数收盘价

```
getSymbols("DJIA", src='FRED') 
```

或者，您可以使用 DIA ETF，它实际上是可交易的，是指数的体面代理

```
getSymbols("DIA", src='yahoo') 
```

# sql - 如何在这里避免除以零错误？

> ID：11337250
> 
> 赞同：1
> 
> 时间：2012-07-05T02:39:32.557
> 
> 标签：sql, sql-server, sql-server-2008, tsql, divide-by-zero

我的以下查询遇到除以 0 错误：

```
select  pp.building_name, 
        ld.tenant_trading_name,  
        tenancy_reference,  
        ld.turnover_threshold, 
        ld.percentage_rent, 
        ld.income_base_rent_ach, 
        ld.income_base_rent_ach / ld.percentage_rent as correct 
from 
    lease_deal.lease ld

inner join property.property pp
    on ld.building_id = pp.building_id

where 
    (ld.income_base_rent_ach / ld.percentage_rent ) <> ld.turnover_threshold
    and lease_status = 'APPROVED'
    and ld.progenesis_load_date is  null
order by pp.building_name 
```

我已尝试通过执行以下操作来纠正此问题 - 但我收到语法错误，我不确定为什么？这里有什么语法错误？

```
select  pp.building_name, 
        ld.tenant_trading_name,  
        tenancy_reference,  
        ld.turnover_threshold, 
        ld.percentage_rent, 
        ld.income_base_rent_ach, 
        ld.income_base_rent_ach / ld.percentage_rent as correct 
from 
    lease_deal.lease ld

inner join property.property pp
    on ld.building_id = pp.building_id

where 
    case when ld.percentage_rent = 0
    then 1=1
    else ((ld.income_base_rent_ach / ld.percentage_rent ) <> ld.turnover_threshold)
    end
    and lease_status = 'APPROVED'
    and ld.progenesis_load_date is  null
order by pp.building_name 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T02:46:12.940

怎么换

```
(ld.income_base_rent_ach / ld.percentage_rent ) <> ld.turnover_threshold 
```

和

```
ld.income_base_rent_ach <> (ld.percentage_rent * ld.turnover_threshold) 
```

# ibm-connections - 当我尝试在 IBM Connections 上搜索一个 Wiki 时出现错误消息

> ID：11337258
> 
> 赞同：0
> 
> 时间：2012-07-05T02:40:30.433
> 
> 标签：ibm-connections

当我尝试在 IBM 连接上搜索一个 wiki 时，会显示以下消息：

> 由于无法联系服务器，因此未执行搜索

服务器运行正常。我的索引有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T15:02:28.657

搜索应用程序是否正在运行？你能导航到 http://server:port/search 吗？当 Wiki 前端无法与 Search API 服务通信时，通常会显示此类错误。

# c++ - 角度命中比较：未能检测到命中

> ID：11337259
> 
> 赞同：1
> 
> 时间：2012-07-05T02:41:02.880
> 
> 标签：c++, math, trigonometry

我正在尝试编写一个函数来告诉我一个角度是否在其他两个角度内。当说*“如果一个角度位于其他 2 个角度内”时，*我的意思是，例如，如果我有 2 个角度 0 和 90，那么 45 将位于这些角度之间，但 -20（或 99）不会。

**我的问题：**我的功能似乎没有检测到 2 个角度何时应该位于 2 个角度内。我不确定我的功能是否也适用于负角？

**我需要更改什么才能使我的功能正常工作？**

```
bool is_angle_between(int target, int angle1, int angle2)
{
  // Post: Return true if target lies between the 2 angles

  int iTarget = (360 + (target % 360)) % 360;
  int iAngle1 = (3600000 + angle1) % 360;
  int iAngle2 = (3600000 + angle2) % 360;

  if (iAngle1 < iAngle2)
    if (iAngle1 <= iTarget && iTarget <= iAngle2)
      return true;
  else if (iAngle1 <= iTarget || iTarget <= iAngle2)
    return true;

  return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:50:13.020

这个问题只与测试一个整数是否在另外两个整数的范围内有关。由于我们不知道是否`angle1`或`angle2`更大的价值，我会做这样的事情：

```
bool is_angle_between(int target, int angle1, int angle2)
{
    return (target > angle1 && target < angle2) ||
           (target > angle2 && target < angle1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T08:11:33.493

这样做的一个好方法是旋转间隔，以便您比较的所有数字都是正数：

```
int rTarget = ((target - angle1) % 360 + 360) % 360;
int rAngle2 = ((angle2 - angle1) % 360 + 360) % 360;
return 0 <= rAngle1 && rAngle1 <= rAngle2; 
```

否则你会在 0 = 360 度附近遇到麻烦。

顺便说一句，您应该避免不必要`if`的语句，因为分支可能很昂贵。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T02:49:14.807

似乎这样应该工作：

```
if (iAngle1 < iAngle2) {
    if (iAngle1 <= iTarget && iTarget <= iAngle2) {
        return true;
    }
}
else {
    if (iAngle2 <= iTarget && iTarget <= iAngle1) {
        return true;
    }
}

return false; 
```

请注意，此处的大括号有助于确保 else 与 if 您想要的匹配。您的原始代码按您希望的方式缩进，但这不是它的解析方式。

# python - XPath 命名空间问题

> ID：11337265
> 
> 赞同：0
> 
> 时间：2012-07-05T02:43:32.263
> 
> 标签：python, xml, xpath, xmpp

连接到 XMPP 服务器时，我得到以下两个响应之一：

```
<stream:features xmlns:stream="http://etherx.jabber.org/streams">
    <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
       <mechanism>PLAIN</mechanism>
       <mechanism>DIGEST MD5</mechanism>
    </mechanisms>
    <auth xmlns="http://jabber.org/features/iq-auth" />
    <register xmlns="http://jabber.org/features/iq-register" />
</stream:features> 
```

或者

```
<stream:features>
    <mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
        <mechanism>DIGEST-MD5</mechanism>
        <mechanism>PLAIN</mechanism>
        <mechanism>ANONYMOUS</mechanism>
        <mechanism>CRAM-MD5</mechanism>
    </mechanisms>
    <compression xmlns="http://jabber.org/features/compress">
        <method>zlib</method>
    </compression>
    <auth xmlns="http://jabber.org/features/iq-auth" />
    <register xmlns="http://jabber.org/features/iq-register" />
</stream:features> 
```

当试图用我的代码解析第二个时，我得到了这个错误：

```
namespace error : Namespace prefix stream on features is not defined
<stream:features><mechanisms xmlns="urn:ietf:params:xml:ns:xmpp-sasl"><mechanism
                ^ 
```

这是我的代码：

```
mechanisms = []

xmlParsed = libxml2.parseDoc(xmlResponse)

xpathContext = xmlParsed.xpathNewContext()
xpathContext.xpathRegisterNs('urn','http://etherx.jabber.org/streams')
xpathContext.xpathRegisterNs('sasl', 'urn:ietf:params:xml:ns:xmpp-sasl')
nodes = xpathContext.xpathEval("//urn:stream/features/sasl:mechanisms/sasl:mechanism/text()|//urn:features/sasl:mechanisms/sasl:mechanism/text()")
for node in nodes:
    mechanisms.append(str(node)) 
```

我做错了什么，我该如何纠正？请不要说，使用 XMPP 库之类的，我不是要写一个完整的 XMPP 客户端。我只想要足够的代码先注册为用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:11:28.467

请不要从头开始编写自己的 XMPP 库。[xmpp.org](http://xmpp.org/xmpp-software/libraries/)上的列表中已经有很多可用的。特别是对于 Python，请尝试[SleekXMPP](http://sleekxmpp.com/)。

例如，使用 parseDoc 是行不通的；您需要逐步解析 XML。“stream:features”中“stream”的前缀定义缺失是这类问题的症状。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:38:13.123

我认为该`<stream:features>`标签报告了错误，指出`stream`未定义前缀。

`<stream:features>`表示`features`标记位于前缀表示的命名空间下，`stream`并且在您的 xml 片段中没有声明这样的命名空间。

# javascript - jquery , jquery ui 和 jquery mobile 如何组合在一起

> ID：11337267
> 
> 赞同：2
> 
> 时间：2012-07-05T02:43:35.300
> 
> 标签：javascript, jquery, asp.net-mvc, jquery-ui, jquery-mobile

如果目标是开发一个当前将在台式计算机上使用但最终也将支持智能手机或平板电脑等移动设备的网络应用程序，那么在组织代码时建议采用什么策略？是否应该有一组用于桌面客户端的代码，然后是一组用于移动客户端的代码？过去我使用过 jquery 和 jquery ui 。jquery 、 jquery ui 和 jquery mobile 如何在 Web 应用程序中组合在一起？为非移动 Web 客户端和移动 Web 客户端开发之间的主要区别是什么？我正在使用 asp.net mvc 。我的赞助商更喜欢单页网络应用程序。所以我正在研究 Knockout.js 。我也在研究一些小部件集，例如 [dhtmlx](http://dhtmlx.com/docs/download.shtml) [jqwidgets](http://www.jqwidgets.com/jquery-ui-widgets-toolkit/) 请随时评论我的选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:49:39.860

为了使事情简单明了-您应该使用（或考虑使用）[响应式网页设计](http://losttie.com/Home/ResponsiveDesign)。主要思想是您开发 CSS 以根据屏幕宽度处理重新调整大小/重新组织。这使您可以处理屏幕足够宽以被识别为桌面屏幕的情况，同时能够调整到移动屏幕尺寸 - 无论设备如何。

让您的 CSS 调整页面上元素的大小/位置可以让您为所有用户拥有一组代码（没有单独的移动/桌面站点）。您只需要花费更多的时间和精力来设计您的网站来处理页面宽度的重新调整。

jquery 库在移动设备上的工作方式与在“传统”平台上的工作方式相同。不过，有时您可能希望利用各种 jquery 库的移动增强版本。

*   一个例子：当你在导航菜单上有嵌套链接时，当你点击一个类别，比如“衬衫”，然后是一个子类别，比如“按钮”，然后是一个子类别，比如， “蓝色的。” 在“传统”平台上，用户可以将鼠标光标悬停在元素上以展开嵌套 - 在移动平台上，用户可能希望点击每个类别/子类别以展开嵌套导航按钮。

这完全取决于您网站的设计——在设计响应式网站时，我通常在用于“移动”和“桌面”设备的视图之间的脚本几乎没有变化——所以对我来说两者的开发都没有变化，我对待新网站作为“响应式”，并从一开始就考虑到可调整大小的浏览器来设计它。

此外，有关 jquery、jquery ui 和 jquery 移动库的详细信息的进一步详细说明，请参阅[Tats_innit 引用的链接](https://stackoverflow.com/questions/6636388/jquery-vs-jquery-mobile-vs-jquery-ui)。

# asp.net - ASP：runat=server 用于动态控制

> ID：11337268
> 
> 赞同：1
> 
> 时间：2012-07-05T02:43:40.307
> 
> 标签：asp.net, runatserver

在 Page_Load 方法中，我根据各种条件创建了几个控件。我想用这些控件注册服务器端代码。但是，对于最后一部分，我需要将我的控件声明为服务器控件。这通常由 runat=server 完成，但我不知道如何在 C# 代码中设置此属性。myControl.Attributes.Add("runat", "server") 不能解决问题。这一个有效，这意味着当我单击它时会调用“测试”方法：

```
<asp:LinkButton ID="LinkButton1" runat="server" OnClick="test">testtext</asp:LinkButton> 
```

这个不起作用：

```
 LinkButton lb = new LinkButton();
            lb.ID = "LinkButton1";
            lb.OnClientClick = "test";
            lb.Text = "testtext";
            lb.Attributes.Add("runat", "server"); 
```

我可以点击它，页面已加载，但未调用测试方法。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:04:13.277

你几乎做对了。只是几件事：

*   手动实例化服务器控件时，无需添加`runat="server"`属性。这是一个特殊属性，仅由 ASP.NET 页面解析器用于将服务器控件与其他标记区分开来。
*   标记中的`OnClick`属性对应于`Click`您使用运算符连接的服务器端事件`+=`。（另一方面，`OnClientClick`标记中的属性对应于`onclick` *客户端*`OnClick`属性，它通常包含一段 JavaScript 代码。不对应的事实确实`onclick`有点令人困惑。）

因此：

```
LinkButton lb = new LinkButton();
lb.ID = "LinkButton1";
lb.Click += test;
lb.Text = "testtext"; 
```

`private`还有你的事件处理程序（如果没有从标记中引用它，你甚至可以制作它）：

```
protected void test(object sender, EventArgs e)
{
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:11:55.913

您是否尝试注册服务器端事件？如果是这样，您可以这样做。

```
LinkButton lb = new LinkButton();
lb.ID = "LinkButton1";
lb.Click += new EventHandler(LinkButton1_Click);
lb.Text = "testtext"; 
```

事件

```
protected void LinkButton1_Click(object sender, EventArgs e)
{ 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T02:48:49.820

你不需要。由于控件是通过 C# 代码在服务器端创建的，因此它们已经是服务器端控件。您遇到的问题与页面生命周期有关：当您像现在一样在服务器端创建控件时，您需要在每次回发时重新添加控件并重新挂钩您想要处理的任何事件处理程序为他们。

另请注意，您的代码显示了 2 个不同的内容：在您发布的标记上，您正在显示`OnClick`事件的处理程序，而在 C# 代码上，您正在为`OnClientClick`事件添加处理程序。它们是两种不同的东西。单击控件时，该`OnClientClick`事件只会触发您页面上的任何 javascript 代码。这与这样做完全相同：

```
 link.Attributes.Add("onclick","SomeJavascriptFunction();"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T02:50:53.933

首先，你不需要那条`lb.Attributes.Add("runat", "server")`线。`runat="server"`所做的只是使控件对代码隐藏可见。由于您要在代码隐藏中添加控件，因此这是一个有争议的问题。

~~至于脚本，请注意有效的脚本正在使用`OnClick`，而您损坏的脚本正在使用`OnClientClick`。区别很重要，因为`OnClick`javascript 本身就可以理解，它会找到具有名称的函数`test`并执行它。~~

`OnClientClick`另一方面，它是 ASP.NET 运行时手动绑定到 click 事件的任意 javascript。意思是，它只是要执行`test`。没什么。`test()`，另一方面，是正确的 javascript。

~~因此，将该行更改为`lb.OnClickClick = "test()";`~~

编辑：我把自己搞混了，看看另一个答案。

# python - matplotlib 中具有各种角度和偏心率的椭圆

> ID：11337272
> 
> 赞同：1
> 
> 时间：2012-07-05T02:44:27.847
> 
> 标签：python, matplotlib

我想用椭圆作为标记制作一个图。这是一个示例代码，它制作了一个大椭圆，现在实际上是一个圆。

```
#! /usr/bin/env python3.2
import numpy as np
import pylab
import matplotlib.pyplot as plt
from matplotlib.backends.backend_pdf import PdfPages
from matplotlib.patches import Ellipse

PlotFileName="test.pdf"
pdf = PdfPages(PlotFileName)
fig=plt.figure(1)
ax1=fig.add_subplot(111)
x_lim=3
plt.xlim([0,x_lim])
plt.ylim([0,x_lim])

F=pylab.gcf()
DefSize = F.get_size_inches()

#These lines have a true angle of 45 degrees, only as a reference:
offset_along_x=x_lim-(x_lim/ax_ratio)
ax1.plot([offset_along_x/2, x_lim-(offset_along_x/2)], [0, x_lim], "b")
ax1.plot([offset_along_x/2, x_lim-(offset_along_x/2)], [x_lim, 0], "b")

e=0.0
theta=0
maj_ax=2
min_ax=maj_ax*np.sqrt(1-e**2)
xconst=(DefSize[1]/DefSize[0])*np.cos(theta*np.pi/180)-np.sin(theta*np.pi/180)
yconst=np.cos(theta*np.pi/180)+(DefSize[1]/DefSize[0])*np.sin(theta*np.pi/180)
print("xconstant= {}".format(xconst))
print("yconstant= {}".format(yconst))
ax1.add_artist(Ellipse((x_lim/2, x_lim/2), xconst*maj_ax, yconst*min_ax, angle=theta, facecolor="green", edgecolor="black",zorder=2, alpha=0.5))

pdf.savefig(fig)
pdf.close()
plt.close() 
```

虽然在这个简化的情况下，`ax1.axis("equal")`会给出一个纯圆，但在我的最终情节中，这个命令会破坏整个情节（比例不相等）。所以我想制作一个通用的椭圆工具而不使用`ax1.axis("equal")`. 如您所见，您可以在此程序中设置主轴的偏心率和倾角。

**问题：** 问题似乎是我不明白 matplotlib 如何旋转它的图像。如果将`theta`此处的值更改为 0 或 90 以外的值，则对象将不再是圆形。输出是一个圆圈，`ax1.axis("equal")`现在不管值`theta`是多少。所以我的第一个问题是：在更改`theta`. 我假设一旦我解决了这个问题，它也适用于椭圆。有人可以帮我吗？我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:11:15.373

在 matplotlib 中，通过首先缩放到高度和宽度然后围绕其中心旋转然后平移到所需位置来设置日食位置和形式。所以旋转和缩放高度和之前可能会变坏（就像在你的脚本中一样），但很难完全正确（你可能必须缩放和反转旋转，但我的变换数学很生疏）。

如果要正确缩放椭圆的形状，则需要子类化 Ellipse 类并重新定义`_recompute_transform`函数：

```
from matplotlib import transforms

class TransformedEllipse(Ellipse):

    def __init__(self, xy, width, height, angle=0.0, fix_x = 1.0, **kwargs):
        Ellipse.__init__(self, xy, width, height, angle, **kwargs)

        self.fix_x = fix_x

    def _recompute_transform(self):

        center = (self.convert_xunits(self.center[0]),
                  self.convert_yunits(self.center[1]))
        width = self.convert_xunits(self.width)
        height = self.convert_yunits(self.height)
        self._patch_transform = transforms.Affine2D() \
            .scale(width * 0.5, height * 0.5) \
            .rotate_deg(self.angle) \
            .scale(self.fix_x, 1) \
            .translate(*center) 
```

并像这样使用它：

```
fix_x = DefSize[1]/DefSize[0]/ax_ratio

ellipse = TransformedEllipse((x_lim/2.0, x_lim/2.0), maj_ax, min_ax, angle=theta, facecolor="green", edgecolor="black",zorder=2, alpha=0.5, fix_x = fix_x) 
```

PS我认为`ax_ratio`是`y_lim / x_lim`！

# eclipse - 连接超时：连接，Eclipse Juno + EGit

> ID：11337273
> 
> 赞同：0
> 
> 时间：2012-07-05T02:44:54.697
> 
> 标签：eclipse, windows-7, egit, eclipse-juno

我正在使用带有 Eclipse Juno 和 EGit 插件的 Windows 7 每当我尝试从 Git 导入 > 项目时，它总是返回错误消息连接超时：连接。 ![错误信息](../Images/5c92c9cb492329817bb29c0c219ec39d.png)

我尝试通过 ssh 从 git 导入。使用用户名/密码

有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T13:57:05.797

刚遇到同样的问题；对我自己来说，这是一个与代理相关的问题。如果您有代理，请尝试以下操作。

首先，确保为代理配置了 GIT。在您的 Eclipse 偏好下，冒险：

```
Team -> Git -> Configuration -> User Settings 
```

`http.proxy`添加具有诸如 的值的条目`http://<myip>:<myport>`。

由于 GIT 使用代理并且我的服务器位于我的本地 LAN 中，因此我必须（对于我的设置）在我的 Internet 选项中为我的存储库主机添加一个例外。

附带说明：

*   我**不必**配置`http.sslverify`GIT 首选项即可使其工作。
*   我**不必**手动更改常规 -> 网络连接 -> SSH2 下的任何配置。
*   我**不必**更改专门为 SSH 连接定制的 GIT URL（即，我可以使用字符串`<my user>@<host>:/opt/git/<repo>/`而不是`ssh://<my user>@<host>/opt/git/<repo>/`）。

# flash - 手动设置时电影剪辑的大小错误

> ID：11337279
> 
> 赞同：1
> 
> 时间：2012-07-05T02:45:51.677
> 
> 标签：flash, apache-flex, movieclip

我通过在 Flex 中将 MovieClip 添加到 Canvas 进行了测试。

```
private function onInit():void {
    var mc:MovieClip = new MovieClip();
    mc.graphics.clear();
    mc.graphics.lineStyle(2, 0, 1);
    mc.graphics.beginFill(0xFF0000, 0.5);
    mc.graphics.drawRect(0, 0, 400, 300);
    mc.graphics.endFill();
    mainCanvas.rawChildren.addChild(mc);
}

private function onMouseMove():void {
    var child:DisplayObject = mainCanvas.rawChildren.getChildAt(i);
    trace("MovieClip size:", (child as MovieClip).width, (child as MovieClip).height);
} 
```

mainCanvas 在 MXML 中声明和实例化：

```
<Canvas id="mainCanvas" width="400" height="300" /> 
```

第一次尝试效果很好，当我将鼠标移到舞台上时，控制台会显示以下输出：

```
MovieClip size: 402 302 
```

但是，当我想明确设置我不再看到的影片剪辑的大小时，输出显示的大小错误。

这是更新初始化方法：

```
private function onInit():void {
    var mc:MovieClip = new MovieClip();
    mc.width = 400;
    mc.height = 300;
    mc.graphics.clear();
    mc.graphics.lineStyle(2, 0, 1);
    mc.graphics.beginFill(0xFF0000, 0.5);
    mc.graphics.drawRect(0, 0, 400, 300);
    mc.graphics.endFill();
    mainCanvas.rawChildren.addChild(mc);
} 
```

以及相应的输出：

```
MovieClip size: 0 0 
```

有人对这种奇怪的行为有任何解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:54:01.230

最初，您设置空的大小`MovieClip`：

```
var mc:MovieClip = new MovieClip();
mc.width = 400;
mc.height = 300; 
```

您正在尝试调整没有内容的剪辑的大小。

在剪辑中有内容后设置您的大小：

```
var mc:MovieClip = new MovieClip();
mc.graphics.lineStyle(2, 0, 1);
mc.graphics.beginFill(0xFF0000, 0.5);
mc.graphics.drawRect(0, 0, 400, 300);
mc.graphics.endFill();

mc.width = 400;
mc.height = 300; 
```

# javascript - jQuery Slider 在 Android Chrome 浏览器上不起作用

> ID：11337281
> 
> 赞同：1
> 
> 时间：2012-07-05T02:46:05.307
> 
> 标签：javascript, android, jquery, html

[http://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

jQuery 滑块在 Android 上不起作用。有人可以推荐一个适用于 Android 的基于网络的滑块吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:51:59.680

jQuery 移动

[http://jquerymobile.com/](http://jquerymobile.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T20:39:51.253

我试过 jQuery Mobile Slider 但感觉很慢。我现在正在尝试“ [Touch Punch](http://touchpunch.furf.com/) ”，非常有前途！！从[https://stackoverflow.com/a/9533878/809536链接](https://stackoverflow.com/a/9533878/809536)

# ios - 不再能够通过 oauth 登录 iOS 应用程序：“未找到请求的页面”

> ID：11337285
> 
> 赞同：2
> 
> 时间：2012-07-05T02:46:17.980
> 
> 标签：ios, facebook-graph-api, oauth

自昨天（7 月 3 日）以来，我一直无法在我的 iOS 应用程序中通过 oauth 登录 Facebook，而是被重定向到一个页面，显示“未找到请求的页面”。这是新行为 - 通常我会从 web 视图（iOS 5.1）通过 oauth 登录没有问题，但是现在在尝试登录时我被重定向到以下页面：“找不到您请求的页面，返回上一页”，使用以下 URL 重定向 - ttps://m.facebook.com/developers/login_error.php?app_id=id]&type=external&refid=9&_rdr

这仅在返回登录时发生。如果用户是第一次进行身份验证，同意权限——在这种情况下（publish_stream，read_stream），用户可以成功登录。如果用户随后注销并尝试再次登录，则会收到错误消息。

可能值得注意的是，登录屏幕的样式也发生了变化，现在说“登录到 Facebook 以将其连接到……”，同时请求用户名或电话号码，如果用户输入错误的密码则不会发出警告或用户名。这与用户在登录页面上被告知错误的早期行为不同。

这也会影响 Facebook Hackbook 示例应用程序——我也无法登录。

我已经用三个 fb 帐户对此进行了测试，每个帐户的行为都相同。这是一个错误，还是导致这种行为的后端发生了变化？

谢谢 - 该应用程序正在等待 Apple 审核，所以有点麻烦！

编辑：这看起来像是在以下错误报告中与 Facebook 一起提出的，一个由我提出，另一个由一个小时左右击败我的人提出（Facebook 的某人分配）：

[https://developers.facebook.com/bugs/161181664017031?browse=search_4ff5a6a2bf1f51f27060269](https://developers.facebook.com/bugs/161181664017031?browse=search_4ff5a6a2bf1f51f27060269)

[https://developers.facebook.com/bugs/151046355019557?browse=search_4ff5a76b963853613233998](https://developers.facebook.com/bugs/151046355019557?browse=search_4ff5a76b963853613233998)

我的是两个链接中的第二个；如果我的不是重复的，我会将它的状态保留为新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:37:56.913

您可以通过将应用类型从“Web”更改为“Native/Desktop”来解决此问题

应用设置 -> 高级 -> 身份验证 -> 应用类型

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T22:12:47.827

我知道这个问题非常古老，但是在我执行以下操作后，我遇到了类似的问题：

*developers.facebook.com -> 我的应用程序 -> 选择（创建）您的应用程序 -> 状态和审查 -> 打开开关*

也许它会帮助某人。

# wxpython - ListCtrl - wxPython 从列中获取所有值

> ID：11337286
> 
> 赞同：3
> 
> 时间：2012-07-05T02:46:27.003
> 
> 标签：wxpython, wxwidgets

*是否可以将wx.ListCtrl*列中的所有值（项目）作为列表获取？

我可以在文档中看到您可以获得指定的项目，但不是整个列，`GetValue()`也不起作用，有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T14:19:16.907

这是一种方法：

```
import wx

########################################################################
class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "List Control Tutorial")

        # Add a panel so it looks the correct on all platforms
        panel = wx.Panel(self, wx.ID_ANY)
        self.index = 0

        self.list_ctrl = wx.ListCtrl(panel, size=(-1,100),
                         style=wx.LC_REPORT
                         |wx.BORDER_SUNKEN
                         )
        self.list_ctrl.InsertColumn(0, 'Subject')
        self.list_ctrl.InsertColumn(1, 'Due')
        self.list_ctrl.InsertColumn(2, 'Location', width=125)

        btn = wx.Button(panel, label="Add Line")
        btn2 = wx.Button(panel, label="Get Column 0")
        btn.Bind(wx.EVT_BUTTON, self.add_line)
        btn2.Bind(wx.EVT_BUTTON, self.getColumn)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.list_ctrl, 0, wx.ALL|wx.EXPAND, 5)
        sizer.Add(btn, 0, wx.ALL|wx.CENTER, 5)
        sizer.Add(btn2, 0, wx.ALL|wx.CENTER, 5)
        panel.SetSizer(sizer)

    #----------------------------------------------------------------------
    def add_line(self, event):
        line = "Line %s" % self.index
        self.list_ctrl.InsertStringItem(self.index, line)
        self.list_ctrl.SetStringItem(self.index, 1, "01/19/2010")
        self.list_ctrl.SetStringItem(self.index, 2, "USA")
        self.index += 1

    #----------------------------------------------------------------------
    def getColumn(self, event):
        """"""
        count = self.list_ctrl.GetItemCount()
        for row in range(count):
            item = self.list_ctrl.GetItem(itemId=row, col=0)
            print item.GetText()

#----------------------------------------------------------------------
# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

就个人而言，我比 ListCtrl 更喜欢 ObjectListView。

# wpf - WPF：从数据上下文对象中获取 DataTemplate 元素

> ID：11337290
> 
> 赞同：4
> 
> 时间：2012-07-05T02:46:33.817
> 
> 标签：wpf, data-binding, datatemplate

我有一个相当复杂的数据树，我在 WPF UserControl 中显示，并且该控件使用 DataTemplates 来创建各种 UI 元素并将其链接到树内的各种数据。这是一个（非常）简单的示例，它涉及在位于画布上的 ItemsControl 中显示的项目列表，并且每个元素都用 TextBox 表示：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <TextBox
            Text="{Binding ...}"
            Canvas.Left="{Binding ...}"
            Canvas.Top="{Binding ...}"
        />
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

现在我的 UserControl 中发生了一个事件，我引用了其中一个列表项，我想将焦点设置到它后面的 TextBox 项。有没有一种简单的方法可以从其数据上下文绑定到的数据对象中获取 TextBox 元素？还是我必须自己手动遍历整个视觉树？

我意识到我可以将一个成员放入数据元素本身并使用触发器来做我想做的任何事情，但在我的情况下，它需要一个额外的抽象层，如果可能的话，我真的很想避免.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:23:17.237

正如您所说，如果您不能直接将成员添加到您正在使用的项目类中，我假设它是您无权访问的内置类型，您必须创建一个正确的视图模型来访问触发器，例如

```
<Trigger Property="IsFocused" Value="True">
    <Setter TargetName="myTextBox" Property="FocusManager.FocusedElement" Value="{Binding IsTextBoxFocused}" />
</Trigger> 
```

这是另一层抽象，但您总是会发现使用您有权访问的视图模型很重要。

# javascript - 结合 jQuery Isotope 和延迟加载

> ID：11337291
> 
> 赞同：18
> 
> 时间：2012-07-05T02:46:45.060
> 
> 标签：javascript, jquery, html, lazy-loading, jquery-isotope

已经使用 jQuery Isotope 开始了一个项目。最初与无限卷轴集成，但认为它有点笨重。

希望用 Lazy Load 替换 Infinite Scroll，并想知道是否有人有幸将两者结合起来。任何让他们玩得很好的技巧都会很棒。

感谢磨坊

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-17T17:29:20.603

如果要使用isotope的排序/过滤功能，需要设置lazyload的failure_limit，并通过isotope的onLayout回调触发事件。

```
jQuery(document).ready(function($) {
    var $win = $(window),
    $con = $('#container'),
    $imgs = $("img.lazy");

    $con.isotope({
        onLayout: function() {
            $win.trigger("scroll");
        }
    });

    $imgs.lazyload({
        failure_limit: Math.max($imgs.length - 1, 0)
    });
}); 
```

## 解释

根据文档（[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）

> 滚动页面后，延迟加载会通过卸载的图像循环。在循环中，它检查图像是否可见。默认情况下，当找到折叠下方的第一张图像（不可见）时，循环停止。这是基于以下假设。页面上的图像顺序与 HTML 代码中的图像顺序相同。在某些布局假设下，这可能是错误的。

使用同位素排序/过滤列表，页面顺序肯定与 HTML 不同，因此我们需要调整 failure_limit。

如您所见，我们存储了 jQuery 对象，以便我们可以使用它的 length-1 作为 failure_limit。如果你好奇它为什么是length-1，那是因为下面检查了lazyload的update方法。

```
if (++counter > settings.failure_limit) {
    return false;
} 
```

## 其他事件的延迟加载

如果您没有在滚动时触发延迟加载，则需要将“滚动”触发器交换为您正在使用的任何事件。

## 演示

[http://jsfiddle.net/arthurc/ZnEhn/](http://jsfiddle.net/arthurc/ZnEhn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:31:07.830

我认为您可能会使用它来获得一些运气：[https ://github.com/fasterize/lazyload](https://github.com/fasterize/lazyload)

它是独立于库的，因此不会中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T01:51:47.600

这是同时使用 jquery isotope 和lazyload 成功的工作代码（在 Chrome 中测试）

[http://jsfiddle.net/wN6tC/62/](http://jsfiddle.net/wN6tC/62/)

在浏览器控制台中，当您向下滚动时，您将在加载图像时得到 console.log('loaded image') 确认。拖动 jsfiddle html 框以更改宽度，您将看到布局动态变化。

我添加了背景红色类，因此您可以看到同位素在加载后如何改变 dom。尝试设置它时的大多数问题来自恕我直言，同位素的 dom 操作。

我希望这足以让你开始。玩得开心。

**更新：** 我从未在其他浏览器中测试过示例，显然 IE 或 FF 无法工作，因为 HTTPS 资源对 javascript 资源的引用（出于某些奇怪的安全原因）。替换它们就是让它在 IE 和 FF 中工作所需的一切，如下所示：

[http://jsbin.com/ajoded/](http://jsbin.com/ajoded/) 和 [http://jsfiddle.net/wN6tC/73/](http://jsfiddle.net/wN6tC/73/)

# c++ - 为什么 boost 没有 make_scoped()？

> ID：11337292
> 
> 赞同：15
> 
> 时间：2012-07-05T02:46:45.887
> 
> 标签：c++, boost, make-shared, scoped-ptr

Boost 的[`make_shared()`](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/make_shared.html)函数在尝试创建`shared_ptr`.

**为什么没有`make_scoped()`等价物？有共同的最佳实践吗？**

[`boost::scoped_ptr`这是文档](http://www.boost.org/doc/libs/1_50_0/libs/smart_ptr/scoped_ptr.htm)中对我来说似乎不安全的代码示例：

```
 boost::scoped_ptr<Shoe> x(new Shoe); 
```

这行代码将按**顺序**完成这三件事：

*   分配堆内存为`Shoe`
*   调用构造函数`Shoe`
*   调用构造函数`boost::scoped_ptr<Shoe>`

如果 for 的构造函数`Shoe`抛出异常， ~~就会导致内存泄漏。~~ *（请参阅 R. Martinho Fernandes* 的回答）`scoped_ptr`不会处理释放，因为它尚未构建。

这是疏忽吗？或者有没有我没有注意到的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-05T03:00:28.083

`scoped_ptr`早于移动语义并且在设计上是不可复制的。因此，`make_scoped`不可能实现，因为为了从函数返回对象，其类型必须是可移动的或可复制的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-05T02:57:18.343

如果构造函数失败，则不会泄漏内存。这是 的语义的一部分`new`，不涉及智能指针：

```
struct Foo { Foo() { throw 23; } };
new Foo(); // no memory leaked 
```

`make_shared`当你`shared_ptr`在一个表达式中初始化两个 s 并且*这两个初始化不是 sequenced*时，提供了额外的异常安全性，就像函数调用参数中的情况一样：

```
struct Bar {
    Bar(bool fail) {
        if(fail) throw 17;
    }
}
f(shared_ptr<Bar>(new Bar(true)), shared_ptr<Bar>(new Bar(false))); 
```

`new Bar(true)`由于、和的评估之间没有顺序`shared_ptr<Bar>(new Bar(true))`，可能会发生以下情况：`new Bar(false)``shared_ptr<Bar>(new Bar(false))`

1.  `new Bar(false)`被评估并成功：分配内存；
2.  `new Bar(true)`被评估并失败：它不会泄漏由此评估产生的内存；

此时构造了No `shared_ptr`，因此在 #1 中分配的内存现在泄漏了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T02:56:48.847

如果 Shoe 抛出，则 Shoe 没有被构造，因此 scoped_ptr 无能为力。不？scoped_ptr x 在堆栈上，将在范围退出时被清理。

# c++ - 如何立即更改项目中所有引用的变量名称

> ID：11337294
> 
> 赞同：10
> 
> 时间：2012-07-05T02:47:22.110
> 
> 标签：c++, visual-studio-2010, visual-studio, refactoring

我正在开发VS10中的一些游戏，我想更改一些变量的名称，因为我想扩展游戏，但是对它的引用太多了，我不知道从哪里开始。VS10 中是否有任何热键可以立即为我执行此操作？我知道有 NetBeans 热键 CTRL+H，但这不适用于 VS10。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T02:58:12.220

首先，任何变量都应始终在最小范围内声明和使用。

在VS2010中，每当你重命名一个变量时，它会提示你是否要对这个变量的所有引用都这样重命名。在您更改的名称下方会出现一个小红条。将鼠标移到该栏，将出现一个图标，其中包含“更新对重命名对象的引用的选项”。您可以选择立即重命名或预览。

（当您重命名另一个不同的变量时，重命名对重命名变量的所有引用的能力就会消失。也许有一种方法可以返回到旧的重命名，但我还没有找到它。）

我尝试重命名一个类的公共属性。自动重命名也适用于对该公共属性的引用，至少当两者都在同一个代码文件中时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T03:50:17.350

正如 Retired Ninja 在他的评论中所说，您非常需要 Visual Studio 的附加组件（如 Visual Assist X）。

安装 Visual Assist 将为您提供如下菜单：

![在此处输入图像描述](../Images/6934b9ee26274ee4152d5fb3ff8bb8a7.png)

...其中“查找引用”按钮搜索对该变量/函数/命名空间/等的所有引用并替换它（不仅仅是纯文本搜索）。

其他替代方法是打开“查找和替换”窗口（按 Ctrl+F），然后单击“快速替换”。从那里您可以进行纯文本搜索和替换（如果有帮助，还有通配符和正则表达式支持（在“查找选项->使用:”下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T02:29:24.550

VS10中也有CTRL+H。如果在右侧按下它会弹出面板，该面板基本上是您想要修改的界面。它包含所有内容，仅在当前打开的文档中修改该名称，甚至在整个项目中。坏事是用它遇到的所有东西替换该名称，除了标题名称。因此，如果我有类似fruit.h 之类的内容，并且我想在apple.h 中重命名它，那么除了名称文件之外，所有内容都将重命名为apple.h，因此它会抛出找不到上述头文件的异常。

# android - 列表视图给出运行时异常

> ID：11337296
> 
> 赞同：0
> 
> 时间：2012-07-05T02:48:10.207
> 
> 标签：android, listview, runtime

我想在列表视图中列出用户安装的应用程序。我尝试了很多方法，例如 @android:id 和 @+id 但似乎没有任何效果..有人可以指出这段代码中的错误是什么..

应用列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

列表行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:padding="10dp"  
    android:textSize="16sp"
    android:id="@+id/rowTextView">
</TextView> 
```

InstalledApp 类

```
public class InstalledApps extends ListActivity{

    private ListView listview;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.applist);

        listview = (ListView)findViewById(R.id.listView1);

        PackageManager pm = getPackageManager();
        List<ApplicationInfo> packages = pm.getInstalledApplications(PackageManager.GET_META_DATA);

        List<ApplicationInfo> installedApps = new ArrayList<ApplicationInfo>();

        for(ApplicationInfo app : packages) {
            //checks for flags; if flagged, check if updated system app
            if((app.flags & ApplicationInfo.FLAG_UPDATED_SYSTEM_APP) == 1) {
                //installedApps.add(app);
            //it's a system app, not interested
            } else if ((app.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {
                //Discard this one
            //in this case, it should be a user-installed app
            } else {
                installedApps.add(app);
            }
        }

        ArrayAdapter<ApplicationInfo> adapter = new ArrayAdapter<ApplicationInfo>(this,
                R.layout.listrow, installedApps);
        listview.setAdapter(adapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:53:57.920

ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。为此，**您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象**（如果它在代码中，则为列表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:57:13.527

您的代码似乎没问题，只是尝试了一个小错误`public class InstalledApps extends Activity`，而不是`public class InstalledApps extends ListActivity`如果您扩展`ListActivity`，那么您将收到错误`Caused by: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list'`

# c# - C#：在构造函数中通过引用传递还是通过更新循环作为参数传递？

> ID：11337300
> 
> 赞同：0
> 
> 时间：2012-07-05T02:49:10.830
> 
> 标签：c#, parameter-passing, pass-by-reference

我有一个对象，我需要在游戏循环中的每次更新中更新数据（在 C# 中）。将对象通过引用传递到执行更新循环的对象的构造函数中是否更好，以便引用不断具有最新的对象，

还是我应该将它作为参数正常传递给 Update 方法（每次更新都称为）？

所以这作为一个构造函数：

```
public UpdatingObject(ref DataObject dataObject) 
```

或者这是一个更新循环头（默认值传递）：

```
public void Update(DataObject dataObject) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T02:51:33.490

在需要时通过引用传递，即，当您需要重新分配引用以引用不同的对象时：

```
void ByRef(ref object o)
{
    o = new object();
} 
```

如果方法保证设置，`o`则将其作为`out`参数传递。

默认语义（通过引用的副本传递）适合大多数需求，因为您通常只修改对象上的字段/属性。

如果参数是值类型，那么您需要使用`ref`以调用者可以看到的方式改变参数。

我的问题是；你为什么要改变构造函数的参数？这对我来说似乎有点奇怪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:00:41.207

必要时通过引用传递。

但是，您能否在 DataObject 类中定义更新方法并定义另一个复合类来执行更新？类似的东西。

```
public class DataObject 
{
   public void Update()
   { 
     // define your update method.
   }
} 
```

# iphone - Xcode 4.3.3 生成的 IPA 大于 Xcode 4.5 DP2

> ID：11337302
> 
> 赞同：2
> 
> 时间：2012-07-05T02:49:17.477
> 
> 标签：iphone, xcode, xcode4.3, xcode4.5

在**同一个**项目中，Xcode 4.3.3 生成的 IPA 为 4.1 MB，Xcode 4.5 DP2 使其仅为 2.9 MB。解压并显示包内容后，只有应用程序可执行文件不同。Xcode 4.3.3 为 4.9 MB，Xcode 4.5 DP2 为 2.3 MB。

为什么有区别？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:54:41.837

我的猜测是，没有安装 Xcode 4.3.3 是 Xcode 4.5 DP2`ARMv6`从 ipa 中删除了二进制文件。因此，您只剩下 ARMv7 二进制文件。

# javascript - 如果文件位于使用 javascript 或 jQuery 的不同服务器上，是否可以检查文件是否返回 404 错误？

> ID：11337304
> 
> 赞同：12
> 
> 时间：2012-07-05T02:49:54.973
> 
> 标签：javascript, jquery, ajax, youtube, http-status-code-404

如果文件位于使用 jQuery/javascript 的不同服务器上，是否可以检查文件是否返回 404 错误？

我正在使用 youtube api 来获取我正在嵌入的视频的高清屏幕截图，但它返回的 JSON 并没有表明视频的高清屏幕截图是否存在。

截图的 url 通常是 [http://img.youtube.com/vi/](http://img.youtube.com/vi/) + video.ID + /maxresdefault.jpg

但是当它不存在时，我会得到这个丑陋的低分辨率灰色 POS：http: [//img.youtube.com/vi/MAyTES9gDAU/maxresdefault.jpg](http://img.youtube.com/vi/MAyTES9gDAU/maxresdefault.jpg)

所以，基本上，我想检查屏幕截图是否存在，如果不存在，则应用于`display: none`保存它的 div。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T02:55:58.210

创建一个`<img>`指向该图像的元素，然后处理该`onerror`事件并将其隐藏。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T02:56:26.350

您可以创建一个`Image`对象并处理`onload`和`onerror`。请注意，它仅适用于图像。

```
function checkExists(imageUrl, callback) {
    var img = new Image();

    img.onerror = function() {
        callback(false);
    };

    img.onload = function() {
        callback(true);
    };

    img.src = imageUrl;
} 
```

像这样使用它：

```
checkExists(yourVideoUrl, function(exists) {
    if(!exists) {
        // Hide the image
    }
}); 
```

[这是一个演示。](http://jsfiddle.net/minitech/m8aen/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T17:39:10.003

minitech 的答案适用于检查 404，但是......

对于 YouTube 案例，他们有自己的处理方式，而不是给你一个 404，他们给你一个“漂亮”的错误图像。

YouTube 有一个 API 可以检查视频 ID 是否有效。查看这篇文章，告诉您如何检查 YouTube 视频 ID 是否存在或是否有效：[https ://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/oAztQ3f1tcM](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/oAztQ3f1tcM)

确认视频存在后，您可以尝试加载图像。如果视频*不*存在，您可以随心所欲地处理这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T20:09:51.730

这对我有用（我的在coffeescript中）。

```
checkImages = ->
  $("img").each ->
    $(this).error ->
      $(this).attr("src", "../default/image.jpg")

$(document).on('page:load', checkImages) 
```

我猜javascript等价物是这样的

```
function checkImages() {
  $("img").each(function() {
    $(this).error(function() {
      $(this).attr("src", "../default/image.jpg");
    });
  });
};

$(document).on("page:load", checkImages); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-26T17:16:57.487

您必须为默认灰度图像添加额外检查：

```
function checkExists(imageUrl, callback) {
    var img = new Image();

    img.onerror = function() {
        callback(false);
    };

    img.onload = function() {
        //check for a default (grey) image
        if (this.width == 120) {
           callback(false);
        }else {
           callback(true);
        }
    };

    img.src = imageUrl;
} 
```

[演示](http://jsfiddle.net/7nv5m48q/)

# objective-c - 如何制作不规则形状精灵的矩形？

> ID：11337308
> 
> 赞同：1
> 
> 时间：2012-07-05T02:50:14.777
> 
> 标签：objective-c, ios, cocos2d-iphone

我使用遮罩来破坏图像，如下面提到的模式，现在它分成不同的部分，但现在我有一个问题来制作每个部分的矩形，我需要拖动破碎的部分并调整到正确的位置，以便我可以制作再次实际图像。要拖动并放置在正确的位置，我需要制作 Rect 但我不知道如何制作这种不规则形状的 Rect，我将非常感谢您，任何制作 rect 的想法或代码。我之前的问题是：

[https://gamedev.stackexchange.com/questions/27650/how-do-i-break-an-image-into-6-or-8-pieces-of-different-shapes/27655#comment53300_27655](https://gamedev.stackexchange.com/questions/27650/how-do-i-break-an-image-into-6-or-8-pieces-of-different-shapes/27655#comment53300_27655)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T10:26:04.620

为什么要制作破碎图像的矩形？如果您想在触摸时移动图像，则不需要任何矩形。使用不规则形状的矩形的唯一原因是为了从图像的右侧进行碰撞检测。如果这是制作破碎图像的 cgrect 的原因您可以使用具有像素完美碰撞的精灵boundingBox。

如果是这种情况，可以给你像素完美的碰撞检测代码。

# objective-c - 添加新的视图控制器后收到“线程 1：信号 SIGABRT”。我该如何解决这个问题？

> ID：11337313
> 
> 赞同：1
> 
> 时间：2012-07-05T02:50:58.357
> 
> 标签：objective-c, xcode4.3, sigabrt

我的项目构建并运行良好。（它的 rootViewController 是一个 TabBarController）所以我在我的故事板中添加了两个新的视图控制器并将它们连接到我的 rootviewcontroller。在情节提要中，标签添加得很好，一切看起来都很好。所以我将 ViewController 类添加到我的项目中，并将它们连接到情节提要中正确的 viewController。但是，当我运行该项目时，我的新选项卡在模拟器中不可见。所以我在我的项目上运行“清理”，从模拟器中删除我的应用程序，将模拟器重置为其原始设置，我的新标签仍然不会出现在模拟器中。所以我退出了一切并重新启动了我的mac。这一次，当我运行我的项目时，它给了我“线程 1：信号 SIGABRT”所以我变得沮丧并删除了我的新视图控制器，来自故事板和类菜单。我把课程扔进了垃圾箱。但我仍然收到 SIGABRT 错误。即使现在我回到了我原来的项目，我也得到了错误。我不知道出了什么问题。因为它不会让我发布我的屏幕图片，所以如果您需要任何额外的调试器输出或任何东西，请告诉我。这就是它在调试器中给我的。

```
2012-07-05 09:22:33.336 NewsomeBand[265:15203] ***
Terminating app due to uncaught exception 
'NSInvalidArgumentException', reason: 'Could not 
find a storyboard named 'MainStoryboard' in bundle
NSBundle </Users/tammyscheele/Library/Application
Support/iPhone Simulator/5.1/Applications/
1B3E088D-23A6-4B77-8CBB-390A9720818A/
NewsomeBand.app> (loaded)'
*** First throw call stack:
(0x152b022 0x30d2cd6 0x5179f2 0xecd60 0xecff8 0xec17f 0xfb183 0xfbc38 0xef634  
0x16beef5 0x14ff195 0x1463ff2 0x14628da 0x1461d84 0x1461c9b                                 
0xebc65 0xed626 0x202d 0x1f95)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:46:24.703

从您发布的调试器输出看来，您可能不小心也删除了对主/根故事板的引用。我猜这是基于

```
'NSInvalidArgumentException', reason: 'Could not 
find a storyboard named 'MainStoryboard' in bundle 
```

或者是你不小心在某个地方重命名或拼错了？无论如何，它看起来都很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T15:18:51.343

我解决了！我进入项目中的信息选项卡并将“主故事板文件基本名称”设置为“MainStoryboard”，并确保我的故事板被命名为“MainStoryboard”。这似乎解决了一切

# sql - SQL-用表的行计算 SUM/COUNT

> ID：11337319
> 
> 赞同：0
> 
> 时间：2012-07-05T02:51:49.050
> 
> 标签：sql

我有一个带有 (StoreNumber, ItemNumber, Price) 的 PriceComparison 表，该表保留了头对头比较购物的定价数据。目标是包含所有商店的以下内容的记录集：

*   店铺编号
*   该商店的 COUNT 次正面交锋
*   该商店的面对面损失计数
*   该商店的 COUNT 个头对头关系
*   该商店所有商品定价的总和
*   该商店以上商品的所有正面竞争者定价的总和

例子：

```
StoreNumber  ItemNumber  Price
-----------  ----------  -----
101          1           1.39
102          1           1.89
101          2           3.49
103          2           2.99
101          3           9.99
104          3           9.99 
```

我想如果我可以为 CompetitorPrice 添加一个临时列，我可以计算这些 SUM 和 COUNT。这样，该项目列出了两个价格，并且变得容易。

如何在正确的配置中获取此信息？我尝试对同一张表进行 INNER JOIN，但这很棘手。

谢谢！

更新：这适用于 MS SQL Server。更新：每件商品只有两个价格，不超过 2 家商店。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:54:38.907

```
SELECT 
    a.storenumber,
    SUM(CASE WHEN a.price < b.price THEN 1 ELSE 0 END) AS wins,
    SUM(CASE WHEN a.price > b.price THEN 1 ELSE 0 END) AS losses,
    SUM(CASE WHEN a.price = b.price THEN 1 ELSE 0 END) AS ties,
    SUM(a.price) AS store_price_sum,
    SUM(b.price) AS competitor_price_sum
FROM
    pricecomparison a
INNER JOIN
    pricecomparison b ON 
        a.itemnumber = b.itemnumber AND 
        a.storenumber <> b.storenumber
GROUP BY
    a.storenumber 
```

# java - Android - 将 OnClickListener 添加到对话框中的按钮时出错

> ID：11337320
> 
> 赞同：0
> 
> 时间：2012-07-05T02:52:03.190
> 
> 标签：java, android, events, onclicklistener

基本上我正在尝试将 OnClickListener 添加到对话框中的按钮，但是通过简单地添加侦听器，应用程序变得不稳定并崩溃，当我尝试捕获它时，返回的消息为空。感谢您查看我的问题。

此外，如果它有帮助，这将在按下菜单按钮时触发。

创建对话框：

```
try {
        final Dialog dialog = new Dialog(List.this);
        dialog.setContentView(R.layout.adddialog);
        dialog.setTitle("Add to the list");
        dialog.setCancelable(true);

        final EditText et = (EditText) findViewById(R.id.itemAddDialog);
        Button ok = (Button) findViewById(R.id.okAddDialog);
        Button cancel = (Button) findViewById(R.id.cancelAddDialog);

        ok.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View arg0) {
                //Contents of this function don't matter, It freezes simply by being created
            }
        });

        dialog.show();
        }
catch (Exception e) {
    Toast.makeText(List.this, e.getMessage(), Toast.LENGTH_LONG).show();
} 
```

（略微修剪）XML 文件：

```
<LinearLayout
    android:id="@+id/btnpaneAddDialog"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal" >

    <Button
        android:id="@+id/okAddDialog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Add it" />

    <Button
        android:id="@+id/cancelAddDialog"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cancel" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T02:59:18.113

改变：

```
Button ok = (Button) findViewById(R.id.okAddDialog); 
```

到

```
Button ok = (Button) dialog.findViewById(R.id.okAddDialog); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T02:59:50.183

似乎您正在`net.startRunning();`从主线程（从内部`OnClick()`方法）调用重方法。正确的方法是在新线程上运行该方法，例如：

```
@Override
public void onClick(View arg0)
{
    String toSend = "";
    for(String s : items)
    {
        if(s != null && !s.equals("")) toSend += s + ":";
    }

    new AsyncTask<Void, Void, Void>()
    {
        @Override
        protected Void doInBackground(Void... params)
        {
            net.startRunning();
            net.sendMessage("setlist|" + uname + "#" + (toSend += et.getText().toString()));
            return null;
        }

        @Override
        protected void onPostExecute(Void result)
        {
            dialog.dismiss();
        }
    }.execute();
} 
```

# php - 在内部页面上索引和搜索文本的最佳解决方案？

> ID：11337321
> 
> 赞同：0
> 
> 时间：2012-07-05T02:52:11.053
> 
> 标签：php, mysql, search, google-search-api

我有一个高流量的新闻网站，我需要添加一个搜索功能。我需要免费或便宜的东西，可以立即将新的新闻故事添加到搜索结果中，处理高流量，并允许自定义结果样式。我查看了 Google 自定义搜索，它似乎不是一个好的选择，因为您必须为高流量付费，而且他们不会立即添加新的新闻文章，除非我每次添加文章时都付费为它们编制索引。

有谁知道可以满足我需要的不同搜索 API 或者更好的，我可以使用的某种库或脚本？例如，Sphinx、Lucene、Solr 等是否具有索引网页的能力？如果是这样，这是否有大量的数据需求，会使我的 Amazon Web Services 账单飙升？最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:49:21.170

如果它们都只是一堆文本文件，您可以使用带有[附件插件的](http://www.elasticsearch.org/tutorials/2011/07/18/attachment-type-in-action.html)[elasticsearch](http://www.elasticsearch.org/)来索引这些文本文件。

但是，请注意，这不是简单的即插即用情况。您将需要编写一些代码来获取这些文本文件，然后将其索引到弹性搜索中。

您还必须编写一些代码，以便每次更新或添加页面时，都会调用 elasticsearch 的 web 服务以对其进行索引或更新。

Elasticsearch 使用 REST API，因此您可以使用 CURL 轻松地与它进行交互，就像任何普通的 Web 服务一样。还有一些 PHP 库可以简化交互。数据以 JSON 格式发送和接收。

我认为弹性搜索在这里会很合适，但试一试，看看它是如何工作的。

# mysql - MySQL如何有效地比较表之间的多个字段？

> ID：11337322
> 
> 赞同：0
> 
> 时间：2012-07-05T02:52:39.633
> 
> 标签：mysql

所以我的专长不是 MySQL，所以我写了这个查询，它开始运行越来越慢，在 EquipmentData 中有 100k 行，在 EquipmentDataStaging 中有 30k 左右（这对我来说是非常少的数据）：

```
 CREATE TEMPORARY TABLE dataCompareTemp 
   SELECT eds.eds_id FROM equipmentdatastaging eds
   INNER JOIN equipment e ON e.e_id_string = eds.eds_e_id_string
   INNER JOIN equipmentdata ed ON e.e_id = ed.ed_e_id 
       AND eds.eds_ed_log_time=ed.ed_log_time 
       AND eds.eds_ed_unit_type=ed.ed_unit_type
       AND eds.eds_ed_value = ed.ed_value 
```

我正在使用此查询将从客户端设备提取的数据行与位于其数据库中的当前数据进行比较。从这里我获取临时表并使用它的 ID 来做出有条件的决定。我有`e_id_string`索引，我已经`e_id`索引了，其他的都没有。我知道我必须比较所有这些信息看起来很愚蠢，但是客户端系统正在吐出冗余数据，我正在使用这个查询来查找它。无论是 SQL 或 MySql 管理的不同方法，任何类型的帮助都将不胜感激。我觉得当我在 MSSQL 中执行此类操作时，它可以更好地处理请求，但这可能是因为我的某些设置不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:38:25.617

提示

*   索引所有使用 with`ON`或`WHERE`condition 的必要列，您需要索引`eds_ed_log_time`, `eds_e_id_string`, `eds_ed_unit_type`, `eds_ed_value`, `ed_e_id`, `ed_log_time`, `ed_unit_type`,`ed_value`

*   将语法更改为`SELECT STRAIGHT JOIN`...[`see more`](https://stackoverflow.com/questions/5818837/why-does-straight-join-so-drastically-improve-this-query-and-what-does-it-mean) [`reference`](https://stackoverflow.com/questions/512294/when-to-use-straight-join-with-mysql)

# ios - 如何在 Core Data 中高效地插入和获取 UUID

> ID：11337324
> 
> 赞同：22
> 
> 时间：2012-07-05T02:52:49.503
> 
> 标签：ios, swift, sqlite, core-data, uuid

我正在寻找一种在 Core Data 中存储和搜索 UUID 的有效方法。这些 UUID 是由分布式系统中的许多 iOS 设备生成的。这些设备中的每一个都可以存储大约 20-50k 个 UUID。

很明显，在 Core Data 中将 UUID 存储为 String 会损害对其进行索引的效率。但经过一系列研究后，我发现**将 UUID 存储为 Core Data 中的二进制数据（并对其进行索引）可能比将其存储为 String 效率低**。

因为在 SQLit 中不支持 BINARY-like 或 VARBINARY-like 数据类型。我猜 Core Data 中的任何二进制数据类型的数据都在 SQLit 中存储为 BLOB。由于 BLOB 可能是被索引的最慢的数据类型，因此会对性能造成不良影响。

那么任何人都可以帮助回答，有没有更有效的方法将 UUID 存储在 Core Data 中？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-05T03:28:32.423

将它们存储为 ASCII 字符串，并使字段成为索引。

**编辑**

Egads，我碰巧在做一些事情，并遇到了这个。多么可耻的回答。那天我一定是有点心情。如果可以的话，我会删除它并继续前进。但是，这是不可能的，所以我将提供一个更新的片段。

首先，了解什么是“高效”的唯一方法是衡量，考虑程序时间和空间以及源代码复杂性和程序员工作量。

幸运的是，这很容易。

我写了一个非常简单的 OSX 应用程序。该模型由一个属性组成：`identifier`.

如果您不将属性标记为索引，这些都不重要。创建商店会花费更多时间，但它会使查询速度更快。

另外，请注意，为二进制属性创建谓词与为字符串创建谓词完全相同：

```
fetchRequest.predicate =
    [NSPredicate predicateWithFormat:@"identifier == %@", identifier]; 
```

该应用程序非常简单。首先，它创建 N 个对象，并为标识符属性分配一个 UUID。它每 500 个对象保存一次 MOC。然后我们将所有标识符存储到一个数组中并随机打乱它们。然后将整个 CD 堆栈完全拆除以将其全部从内存中删除。

接下来，我们再次构建堆栈，然后遍历标识符，并进行简单的获取。构造 fetch 对象，使用一个简单的谓词来获取该对象。所有这些都是在自动释放池中完成的，以尽可能保持每次提取的原始状态（我承认会与 CD 缓存进行一些交互）。这不是那么重要，因为我们只是比较不同的技术。

二进制标识符是 UUID 的 16 字节。

UUID String是一个36字节的字符串，调用[uuid UUIDString]的结果，看起来是这样的（B85E91F3-4A0A-4ABB-A049-83B2A8E6085E）。

Base64 String 是一个 24 字节的字符串，对 16 字节的 UUID 二进制数据进行 base-64 编码的结果，对于相同的 UUID，它看起来像这样 (uF6R80oKSrugSYOyqOYIXg==)。

Count 是该运行的对象数。

SQLite 大小是实际 sqlite 文件的大小。

WAL 大小是 WAL（预写日志）文件的大小 - 仅供参考......

create 是创建数据库的秒数，包括保存。

Query 是查询每个对象的秒数。

```
Data Type     | Count (N) | SQLite Size | WAL Size  | Create  | Query
--------------+-----------+-------------+-----------+---------+---------
Binary        |   100,000 |   5,758,976 | 5,055,272 |  2.6013 |  9.2669
Binary        | 1,000,000 |  58,003,456 | 4,783,352 | 59.0179 | 96.1862
UUID String   |   100,000 |  10,481,664 | 4,148,872 |  3.6233 |  9.9160
UUID String   | 1,000,000 | 104,947,712 | 5,792,752 | 68.5746 | 93.7264
Base64 String |   100,000 |   7,741,440 | 5,603,232 |  3.0207 |  9.2446
Base64 String | 1,000,000 |  77,848,576 | 4,931,672 | 63.4510 | 94.5147 
```

首先要注意的是，实际的数据库大小比存储的字节数（1,600,000 和 16,000,000）大得多——这对于数据库来说是可以预料的。额外存储的数量将在某种程度上与您的实际对象的大小有关……这个仅存储标识符，因此开销的百分比会更高）。

其次，在速度问题上，作为参考，执行相同的 1,000,000 个对象查询，但在 fetch 中使用 object-id 大约需要 82 秒（注意这与调用之间的明显差异，`existingObjectWithID:error:`需要 0.3065 秒）。

您应该分析您自己的数据库，包括在运行代码上明智地使用工具。我想如果我进行多次运行，数字会有所不同，但它们非常接近，因此没有必要进行此分析。

但是，基于这些数字，让我们看看代码执行的效率测量。

*   正如预期的那样，存储原始 UUID 二进制数据在空间方面更有效。
*   创建时间非常接近（差异似乎基于创建字符串的时间和所需的额外存储空间）。
*   查询时间似乎几乎相同，二进制字符串似乎有点慢。我认为这是最初的关注点——对二进制属性进行查询。

Binary 大大赢得了空间，它可以被认为在创建时间和查询时间上都非常接近。如果我们只考虑这些，存储二进制数据显然是赢家。

源代码复杂性和程序员时间如何？

好吧，如果您使用的是现代版本的 iOS 和 OSX，则几乎没有区别，尤其是 NSUUID 上的简单类别。

但是，您需要考虑一个问题，那就是使用数据库中的数据是否容易。当您存储二进制数据时，很难对数据进行良好的可视化。

因此，如果出于某种原因，您希望数据库中的数据以对人类更有效的方式存储，那么将其存储为字符串是更好的选择。因此，您可能需要考虑 base64 编码（或其他一些编码——尽管记住它已经在 base-256 编码中）。

FWIW，这是一个示例类别，可以更轻松地访问 UUID 作为 NSData 和 base64 字符串：

```
- (NSData*)data
{
    uuid_t rawuuid;
    [self getUUIDBytes:rawuuid];
    return [NSData dataWithBytes:rawuuid length:sizeof(rawuuid)];
}

- (NSString*)base64String
{
    uuid_t rawuuid;
    [self getUUIDBytes:rawuuid];
    NSData *data = [NSData dataWithBytesNoCopy:rawuuid length:sizeof(rawuuid) freeWhenDone:NO];
    return [data base64EncodedStringWithOptions:0];
}

- (instancetype)initWithBase64String:(NSString*)string
{
    NSData *data = [[NSData alloc] initWithBase64EncodedString:string options:0];
    if (data.length == sizeof(uuid_t)) {
        return [self initWithUUIDBytes:data.bytes];
    }
    return self = nil;
}

- (instancetype)initWithString:(NSString *)string
{
    if ((self = [self initWithUUIDString:string]) == nil) {
        self = [self initWithBase64String:string];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-15T11:43:43.733

由于这篇文章似乎相当受欢迎，值得注意的是，自 2012 年以来情况发生了一些变化。

您现在可以使用`NSUUIDA`/`UUID`属性类型 ( [UUIDAttributeType](https://developer.apple.com/documentation/coredata/nsattributetype/uuidattributetype) ) 而不是手动将其映射到字符串或二进制数据（在 iOS 11 中添加）。UUID 将自动存储为二进制文件，根据另一个答案，这是在 CoreData 中存储 UUID 的最快、最佳方式。

[WWDC17：核心数据的新功能](https://developer.apple.com/wwdc17/210)

> [20:21] 我们添加了分别由 UUID 和 URL 值类支持的 NSUUIDA 属性类型和 NSURL 属性类型。

# php - 如何在php中删除html注释

> ID：11337332
> 
> 赞同：4
> 
> 时间：2012-07-05T02:54:24.587
> 
> 标签：php, html, comments

我正在尝试删除嵌入 html 文件的任何注释

```
$data= file_get_contents($stream); <br>
$data = preg_replace('<!--*-->', '', $data); <br>
echo $data; 
```

我仍然以所有评论结束<！- bla bla bla -->
我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-07-30T08:01:38.023

```
// Remove unwanted HTML comments
function remove_html_comments($content = '') {
    return preg_replace('/<!--(.|\s)*?-->/', '', $content);
} 
```

正如你可以在这里阅读：[https ://davidwalsh.name/remove-html-comments-php](https://davidwalsh.name/remove-html-comments-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T02:58:14.357

下面的正则表达式将删除 HTML 注释，但会保留条件注释。

```
<!--(?!<!)[^\[>].*?--> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-14T02:31:20.107

您可以在不使用正则表达式的情况下做到这一点：

```
function strip_comments($html)
{
    $html = str_replace(array("\r\n<!--", "\n<!--"), "<!--", $html);
    while(($pos = strpos($html, "<!--")) !== false)
    {
        if(($_pos = strpos($html, "-->", $pos)) === false)
            $html = substr($html, 0, $pos);
        else
            $html = substr($html, 0, $pos) . substr($html, $_pos+3);
    }
    return $html;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T02:56:39.643

1.  正则表达式很难在这里做你想做的事情。

2.  要匹配正则表达式中的任意文本，您需要`.*`，而不仅仅是`*`. 您的表达式正在寻找`<!-`，后跟零个或多个`-`字符，然后是`-->`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T02:57:16.230

`s/<!--[^>]*?-->//g`

切换正则表达式

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-16T11:13:24.037

我知道很多答案已经发布了。我已经尝试了很多，但对我来说，这个正则表达式适用于多行（在我的情况下为 40 行评论）HTML 评论删除。

```
$string = preg_replace("~<!--(.*?)-->~s", "", $string); 
```

干杯:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-14T17:16:54.280

我不会使用正则表达式来完成这样的任务。正则表达式可能会因意外字符而失败。
相反，我会做一些安全的事情，比如：

```
$linesExploded = explode('-->', $html);
foreach ($linesExploded as &$line) {
    if (($pos = strpos($line, '<!--')) !== false) {
        $line = substr($line, 0, $pos);
    }
}
$html = implode('', $linesExploded); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-07-05T03:00:41.937

你应该这样做：

```
$str = "<html><!-- this is a commment -->OK</html>";
$str2 = preg_replace('/<!--.*-->/s', '', $str);
var_dump($str2); 
```

# c# - Visual Studio 2010 中的 GTK#

> ID：11337333
> 
> 赞同：13
> 
> 时间：2012-07-05T02:55:04.520
> 
> 标签：c#, visual-studio-2010, mono, gtk, gtk#

我整天都在努力让 GTK# 在 Windows Server 2008 R2 x64 上的 Visual Studio 2010 中工作，这样我就可以开始编写漂亮的跨平台 GUI 应用程序，但我对 C# 有点陌生，我有一个世界的麻烦。

我安装了最新的 Mono for Windows，其中包括 GTK#。我还安装了一个 Mono 2.10.8 配置文件作为我的项目的目标框架，松散地遵循这里的指南：http: [//erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/](http://erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/)

我创建了一个新的 Windows 窗体应用程序并删除了对 Windows 窗体内容的引用并添加了对 GTK# 内容的引用，大致遵循此处的指南：http: [//jrwren.wrenfam.com/blog/2008/11/01/gtk- in-visual-studio-2008-on-vista-x64/](http://jrwren.wrenfam.com/blog/2008/11/01/gtk-in-visual-studio-2008-on-vista-x64/)

除了该指南中的引用之外，我还添加了对 gtk-dotnet 的引用。

这是我的应用程序的完整代码：

```
using System;
using System.Runtime.InteropServices;
using System.Collections.Generic;
using System.Linq;
using Gtk;

namespace GridToGo
{
    static class Program
    {
        [STAThread]
        static void Main()
        {
            Application.Init();
            Window myWin = new Window("My first GTK# Application! ");
            myWin.Resize(200, 200);
            myWin.Destroyed += new EventHandler(myWin_Destroyed);
            Label myLabel = new Label();
            myLabel.Text = "Hello World!!!!";
            myWin.Add(myLabel);
            myWin.ShowAll();
            Application.Run();
        }

        static void myWin_Destroyed(object sender, EventArgs e)
        {
            Application.Quit();
        }
    }
} 
```

当我尝试使用任何配置运行它时，我得到以下异常：

```
System.TypeInitializationException was unhandled
  Message=The type initializer for 'Gtk.Application' threw an exception.
  Source=gtk-sharp
  TypeName=Gtk.Application
  StackTrace:
       at Gtk.Application.Init()
       at GridToGo.Program.Main() in F:\visual-studio\GridToGo\GridToGo\Program.cs:line 13
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: System.DllNotFoundException
       Message=Unable to load DLL 'glibsharpglue-2': The specified module could not be found. (Exception from HRESULT: 0x8007007E)
       Source=glib-sharp
       TypeName=""
       StackTrace:
            at GLib.Thread.glibsharp_g_thread_supported()
            at GLib.Thread.get_Supported()
            at Gtk.Application..cctor()
       InnerException: 
```

我不知道如何让它找到那个dll！我什至尝试使用以下名称将 DLL 的 4 个副本复制到解决方案中的几乎每个文件夹中：`glibsharpglue-2` `glibsharpglue-2.dll` `glibsharpglue-2.o` `glibsharpglue-2.o.dll`！我什至还尝试从 GTK 站点安装 GTK 一体化软件包并将其 bin 文件夹添加到我的系统路径，然后将相同的 4 个 dll 复制到该文件夹​​中，但都没有成功。

对我的疯狂问题有什么建议吗？我觉得我在这里错过了一些大事。>_<

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T14:53:17.447

我想到了！Mono for Windows 完全没有必要。.NET 的 GTK# 是我所需要的。对于将来想要为跨平台 GTK# 开发设置 Windows 环境的任何人，以下是我遵循的步骤：

1.  从这里安装带有方向的 Mono 项目目标：http: [//erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/](http://erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/)
2.  从 Mono 官方下载站点安装 GTK# for .NET。
3.  在此处安装 Glade/GTK+ for Windows，sourceforge 项目：http: [//sourceforge.net/projects/gladewin32/](http://sourceforge.net/projects/gladewin32/)
4.  创建一个以 Mono 为目标的新 C# 项目。
5.  为您安装 GTK# for .NET 的项目引用必要的程序集。

# c - 运行时检查失败 #2-stack 围绕变量“numbers”

> ID：11337336
> 
> 赞同：0
> 
> 时间：2012-07-05T02:55:27.743
> 
> 标签：c, error-handling, runtime-error

我有如下所示的输入文件

5

8

10

实际上，我需要在上面的示例中读取更多行的文件。（中间没有空格。因此，我需要让数组的大小取决于文本文件的行。这是我使用的方法发生 r

```
#include "stdafx.h"
#include <ctype.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

int _tmain(int argc, _TCHAR* argv[])
{
    FILE *test;
    int numbers[]={0};
    int i=0;
    char *array1;
    if((test=fopen("Input1.txt","r"))==NULL)
    {
        printf("File could not be opened\n");
    }
    else
    {
        array1 = (char*)malloc(1000*sizeof (char));
        if((test=fopen("Input1.txt","r"))==NULL)
        {
            printf("File could not be opened\n");
        }
        else
        {
            while(fgets(array1,(sizeof array1)-1,test)!=NULL) 
            {
                numbers[i]=atoi(array1);
                i++;
            }
            for(i=0;i<sizeof(array1)-1;i++)
            {
                printf("%d\n",numbers[i]);
            }
        }
    fclose (test);
    }
    system("pause");
    return 0;
    free(array1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:51:16.587

例如

```
{
    FILE *test;
    int *numbers=NULL;
    int i=0,size=0;
    char array1[1000];//don't need dynamic allocate

    if((test=fopen("Input1.txt","r"))==NULL)
    {
        printf("File could not be opened\n");
    }
    else
    {
        while(fgets(array1, sizeof(array1), test)!=NULL) 
        {
            numbers=(int*)realloc(numbers,sizeof(int)*(i+1));
            numbers[i++]=atoi(array1);
        }
        size=i;
        for(i=0;i<size;i++)
        {
            printf("%d\n",numbers[i]);
        }
        fclose(test);
        free(numbers);
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T07:06:48.260

你`sizeof`用来做它不能做的事情。
`sizeof array1`是变量的大小`array1`。由于它被定义为`char *`，所以大小是指针的大小（32 位系统中为 4，64 位系统中为 8）。
您显然希望分配的内存量`array1`指向。却给`sizeof`不了。

您需要使用分配的大小 - 在您的情况下为 1000。最好把它放在一个变量中，而不是在两个地方使用数字 1000（因为那样的话，如果你改变一个，你可能会忘记改变另一个）。

# android - android 指南针旋转动画

> ID：11337347
> 
> 赞同：0
> 
> 时间：2012-07-05T02:56:29.943
> 
> 标签：android, compass-geolocation, rotateanimation

我正在制作一个指向用户定义位置的指南针。我正在使用旋转动画来旋转针。当针指向手机的方向时，我知道手机指向我想要的方向。但是，无论手机的方位如何，我都希望指针指向正确的方向。

问题是，rotateanimation 似乎没有根据真实世界的坐标旋转指针，而是相对于手机的屏幕。所以针的 58 度旋转与现实世界中的 58 度旋转不匹配。这是真的还是我在代码中犯了错误？

指南针旨在通过将手机背面平放在表面上来使用。我也尝试过输出方位角，它的内容如下：

```
Azimuth           Actual Phone angle
0                        0
45                       90
90                       180 
```

当它接近一整圈时，它会在 120 到 340 之间反弹。

这是代码：

```
direction = 360 - azimuth + rotate;

RotateAnimation animate = new RotateAnimation(rotateLast, direction, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
            animate.setFillAfter(true);
            animate.setInterpolator(new LinearInterpolator());
            animate.setDuration(10);
            needle.startAnimation(animate);

            rotateLast = direction; 
```

azimuth 是手机与传感器的方位角，rotate 是用户指定的方向（以北为单位的度数），direction 是指针所需的旋转方向。

rotateLast 是针的最后一个位置，我使用它是因为没有它针会恢复到零度并闪烁。

谢谢，PS这一直让我发疯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:57:34.673

我想通了，我的数学全错了，我误解了方位角如何影响旋转。

当我将图像旋转到方位角时，我意识到它导致指针指向北方。我需要做的只是添加用户方向。我使用的数学导致指针以不可预知的方式旋转。

答案很简单：

```
RotateAnimation animate = new RotateAnimation(-azimuth+rotation, -azimuth+rotation, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f); 
```

-azimuth 是因为 rotateanimation 如何逆时针旋转。

# java - 使用 Java 在 Selenium WebDriver 中聚焦元素的正确方法

> ID：11337353
> 
> 赞同：56
> 
> 时间：2012-07-05T02:57:25.040
> 
> 标签：java, focus, selenium-webdriver, setfocus

`selenium.focus()`WebDriver的等价物是什么？

```
element.sendKeys(""); 
```

或者

```
new Actions(driver).moveToElement(element).perform(); 
```

我已经尝试了这两种方法并且它们都有效，但是哪一种总是适用于所有元素？

哪一种是任何元素（如按钮、链接等）的正确方式？这对我很重要，因为该功能将用于不同的 UI。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-07-05T04:51:11.647

以下代码 -

`element.sendKeys("");`

试图找到一个输入标签框来输入一些信息，而

`new Actions(driver).moveToElement(element).perform();`

更合适，因为它适用于图像元素、链接元素、下拉框等。

因此，使用**moveToElement()**方法更有意义地关注网页上的任何通用 WebElement。

对于输入框，您必须在要聚焦的元素上**单击（）**。

`new Actions(driver).moveToElement(element).click().perform();`

而对于链接和图像，鼠标将位于该特定元素上，您可以根据自己的需要决定单击（）它。

*如果输入标签上的 click() 不起作用 -*

由于您希望此函数具有通用性，因此您首先检查 webElement 是否为输入标签 -

```
if("input".equals(element.getTagName()){
   element.sendKeys("");
} 
else{
   new Actions(driver).moveToElement(element).perform();

} 
```

您可以根据自己的喜好进行类似的更改。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-28T10:48:07.953

您可以使用 JS 如下：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor) driver;
jse.executeScript("document.getElementById('elementid').focus();"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-06T18:13:05.023

此代码实际上不提供焦点：

```
new Actions(driver).moveToElement(element).perform(); 
```

它提供了悬停效果。

此外，JS 代码 .focus() 要求窗口处于活动状态才能工作。

```
js.executeScript("element.focus();"); 
```

我发现这段代码有效：

```
element.sendKeys(Keys.SHIFT); 
```

对于我自己的代码，我同时使用：

```
element.sendKeys(Keys.SHIFT);
js.executeScript("element.focus();"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-02T16:25:08.123

仅当窗口获得焦点时，焦点才有效。

使用`((JavascriptExecutor)webDriver).executeScript("window.focus();");`确定。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-04T17:56:40.010

FWIW，我遇到了我认为相关的问题并想出了一个解决方法：我编写了一个 Chrome 扩展程序，它在一个 textarea 中执行了一个 document.execCommand('paste')，重点是窗口卸载，以便用系统剪贴板内容。这在 100% 的时间里都是手动工作的，但是当在 Selenium 下运行时，execCommand 几乎总是返回 false。

我在最初的 driver.get(myChromeExtensionURL) 之后添加了一个 driver.refresh()，现在它可以 100% 工作。这适用于 Mac OS 10.9 上的 Selenium 驱动程序版本 2.16.333243 和 Chrome 版本 43。

当我研究这个问题时，我没有看到任何关于这个解决方法的提及，所以我想我会记录我的发现，以供那些跟随我的 Selenium/focus/execCommand('paste') 脚步的人使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-01T12:29:26.510

C#扩展方法代码，焦点元素，输入文本，调用change()。

```
public static void EnterText(this IWebDriver driver, IWebElement element, string textToEnter)
    {
        var js = (IJavaScriptExecutor)driver;
        js.ExecuteScript("arguments[0].focus();", element);
        js.ExecuteScript("arguments[0].setAttribute('value', arguments[1])", element, textToEnter);
        js.ExecuteScript("$(arguments[0]).change();", element);
    } 
```

调用者：

```
driver.EnterText(element, text); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-26T13:41:35.937

我们还可以使用以下代码聚焦 webelement：

```
public focusElement(WebElement element){
    String javaScript = "var evObj = document.createEvent('MouseEvents');"
                    + "evObj.initMouseEvent(\"mouseover\",true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);"
                    + "arguments[0].dispatchEvent(evObj);";

            ((JavascriptExecutor) getDriver()).executeScript(javaScript, element);
} 
```

希望能帮助到你 ：）

# blackberry - 对焦后图像消失

> ID：11337354
> 
> 赞同：0
> 
> 时间：2012-07-05T02:57:25.723
> 
> 标签：blackberry, focus, buttonfield

[这](http://desmond.imageshack.us/Himg20/scaled.php?server=20&filename=beforedocus.png&res=landing)是在焦点状态之前。它工作正常。

[这](http://desmond.imageshack.us/Himg594/scaled.php?server=594&filename=focusing.png&res=landing)是对焦状态。它工作正常。

[这](http://desmond.imageshack.us/Himg833/scaled.php?server=833&filename=afterfocus.png&res=landing)是在焦点状态之后。图像消失的地方发生了问题。

它适用于右上角，但左上角图像有问题。

这是我的习惯`VerticalFieldManager`：

```
public class Custom_TopField extends HorizontalFieldManager implements
    FieldChangeListener {

private Bitmap bg = Bitmap.getBitmapResource("header_bar.png");
private Bitmap download = Bitmap.getBitmapResource("btn_download.png");
private Bitmap downloadactive = Bitmap
        .getBitmapResource("btn_download_active.png");
private Bitmap refresh = Bitmap.getBitmapResource("icon_refresh.png");
private Bitmap refreshactive = Bitmap
        .getBitmapResource("icon_refresh_active.png");
private Bitmap back = Bitmap.getBitmapResource("btn_back.png");
private Bitmap backctive = Bitmap.getBitmapResource("btn_back_active.png");
private Bitmap news = Bitmap.getBitmapResource("icon_news.png");
private Bitmap newsactive = Bitmap
        .getBitmapResource("icon_news_active.png");

private Custom_ButtonField downloadbtn, refreshbtn, backbtn, newsbtn;
private Custom_LabelField title;

Custom_TopField(final MainScreen mainscreen) {
    Background background = BackgroundFactory.createBitmapBackground(bg);
    setBackground(background);
    title = new Custom_LabelField("东方日报", DrawStyle.ELLIPSIS
            | LabelField.USE_ALL_WIDTH | DrawStyle.HCENTER
            | Field.FOCUSABLE, Color.WHITE) {
        protected boolean navigationClick(int status, int time) {
            Main.getUiApplication().pushScreen(new Main_AllLatestNews());
            Main.getUiApplication().popScreen(mainscreen);
            return true;
        }
    };
    title.setFont(Font.getDefault().derive(Font.BOLD, 33));
    add(title);

    downloadbtn = new Custom_ButtonField(download, downloadactive,
            downloadactive);
    downloadbtn.setChangeListener(this);
    add(downloadbtn);

    refreshbtn = new Custom_ButtonField(refresh, refreshactive,
            refreshactive);
    refreshbtn.setChangeListener(this);
    add(refreshbtn);

    backbtn = new Custom_ButtonField(back, backctive, backctive);
    backbtn.setChangeListener(this);
    add(backbtn);

    /*newsbtn = new Custom_ButtonField(news, newsactive, newsactive);
    newsbtn.setChangeListener(this);
    add(newsbtn);*/
}

protected void sublayout(int width, int height) {
    Field field = getField(0);
    layoutChild(field, 120, Font.getDefault().getHeight());
    setPositionChild(field, (getPreferredWidth() - title.getWidth()) / 2,
            15);

    field = getField(1);
    layoutChild(field, download.getWidth(), download.getHeight());
    setPositionChild(field, getPreferredWidth()
            - (download.getWidth() + 10),
            getPreferredHeight() - (download.getHeight() + 5));

    field = getField(2);
    layoutChild(field, refresh.getWidth(), refresh.getHeight());
    setPositionChild(field,
            getPreferredWidth() - (refresh.getWidth() + 10),
            getPreferredHeight() - (refresh.getHeight() + 5));

    field = getField(3);
    layoutChild(field, back.getWidth(), back.getHeight());
    setPositionChild(field, 10, 5);

    /*field = getField(4);
    layoutChild(field, news.getWidth(), news.getHeight());
    setPositionChild(field, 10, 5);*/

    width = Math.min(width, getPreferredWidth());
    height = Math.min(height, getPreferredHeight());
    setExtent(width, height);
}

public int getPreferredHeight() {
    return 70;
}

public int getPreferredWidth() {
    return Display.getWidth();
}

public void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();

    graphics.drawRect(0, 0, rectWidth, rectHeight);
    super.paint(graphics);
}

public void fieldChanged(Field field, int context) {
    if (field == downloadbtn) {

    } else if (field == refreshbtn) {

    } else if (field == backbtn) {

    } else if (field == newsbtn) {

    }
}
} 
```

这是`custom button field`

```
public class Custom_ButtonField extends ButtonField {
Bitmap mNormal;
Bitmap mFocused;
Bitmap mActive;

int mWidth;
int mHeight;

private int color = -1;
String text;

public Custom_ButtonField(Bitmap normal, Bitmap focused, Bitmap active) {
    super(CONSUME_CLICK | Field.FOCUSABLE);
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
}

public Custom_ButtonField(String text, Bitmap normal, Bitmap focused,
        Bitmap active, int color) {
    super(CONSUME_CLICK | Field.FOCUSABLE);
    this.color = color;
    mNormal = normal;
    mFocused = focused;
    mActive = active;
    mWidth = mNormal.getWidth();
    mHeight = mNormal.getHeight();
    setMargin(0, 0, 0, 0);
    setPadding(0, 0, 0, 0);
    setBorder(BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    setBorder(VISUAL_STATE_ACTIVE,
            BorderFactory.createSimpleBorder(new XYEdges(0, 0, 0, 0)));
    this.text = text;
}

protected void onFocus(int direction) {
    super.onFocus(direction);
}

protected void onUnfocus() {
    super.onUnfocus();
}

protected void paint(Graphics graphics) {
    Bitmap bitmap = null;
    switch (getVisualState()) {
    case VISUAL_STATE_NORMAL:
        bitmap = mNormal;
        break;
    case VISUAL_STATE_FOCUS:
        bitmap = mFocused;
        break;
    case VISUAL_STATE_ACTIVE:
        bitmap = mActive;
        break;
    default:
        bitmap = mNormal;
    }
    graphics.drawBitmap(0, 0, bitmap.getWidth(), bitmap.getHeight(),
            bitmap, 0, 0);
    graphics.setFont(Font.getDefault().derive(Font.BOLD, 25));
    graphics.setColor(color);
    graphics.drawText(text, (mNormal.getWidth() - Font.getDefault()
            .getAdvance(text)) / 2, ((mNormal.getHeight() - Font
            .getDefault().getHeight()) / 2) + 10, DrawStyle.HCENTER
            | DrawStyle.VCENTER);
}

public int getPreferredWidth() {
    return mWidth;
}

public int getPreferredHeight() {
    return mHeight;
}

protected void layout(int width, int height) {
    setExtent(mWidth, mHeight);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T07:19:18.573

这是[我在过去几周看到](https://stackoverflow.com/a/11060070/119114)的第二个问题。

## 背景

要了解解决方案，首先您应该了解 BlackBerry 中的基本 UI 类。

首先，我们[有`Field`类](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Field.html)。A`Field`是普通 UI*组件*的基类。如果您自己编写一个 UI 组件，**从头开始**，那么您将子类化`Field`：

```
public class MyWidget extends Field { 
```

但是，如果已经存在一个 BlackBerry 类几乎可以满足您的需求，并且您只需要稍微改变它的行为，那么您将子类化其他东西。例如：

```
public class MyButtonWidget extends ButtonField { 
```

[`Manager`类](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html)也存在相同的模式。如果您是`Manager` **从头开始**编写，请扩展`Manager`：

```
public class MyManager extends Manager { 
```

[根据黑莓文档，](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html)这涉及到这样做：

> **实现自己的布局管理器**
> 
> 如果您有特殊需求，您可以实现自己的管理器。扩展Manager类，实现子布局、getPreferredWidth、getPreferredHeight。为了提高效率，您可以选择覆盖 subpaint。

但是，如果现有的 Manager**子类**已经完成了您需要的大部分工作，并且您只想自定义它，那么您可能会考虑扩展该子类：

```
public class MyHorizontalManager extends HorizontalFieldManager { 
```

在您的情况下，您`Custom_TopField`正在为完全自定义完成**所有**`Manager`必需的工作（请参阅上面 javadocs 中突出显示的引用）。因此，您实际上没有任何理由**扩展** `HorizontalFieldManager`. `HorizontalFieldManager`当您只想要`add()`您的字段并将它们全部水平布置时，使用A。但是，您在`sublayout()`代码中明确地执行此操作。事实证明，您的逻辑似乎正在与基类竞争。

## 解决方案

所以，你应该做的是让你的课程扩展`Manager`：

```
public class Custom_TopField extends Manager implements FieldChangeListener { 
```

如果这样做，您将需要调用不同的超级构造函数。像这样的东西（您可能想根据需要选择不同的样式常量）：

```
Custom_TopField(final MainScreen mainscreen) {
   super(Manager.USE_ALL_WIDTH | Manager.NO_VERTICAL_SCROLL | Manager.NO_HORIZONTAL_SCROLL); 
```

另一种选择是根本不实现`sublayout()`，像原来那样扩展`HorizontalFieldManager`，然后使用子字段的**边距**和`long` **样式**标志控制布局。但是，由于我上面给出的解决方案只需要更改 2 行代码，这对你来说可能是最简单的。

## 其他问题

我还在您的代码和屏幕截图中注意到“**下载**”按钮没有出现。我不知道所有 png 图像的确切大小，但是如果刷新和下载图像的大小相同，那么您当前的逻辑就是将刷新按钮放在下载按钮的正上方。所以，下载按钮是隐藏的。这可能不是你想要的？

# sql - 具有聚合函数的多个 mysql JOIN

> ID：11337355
> 
> 赞同：2
> 
> 时间：2012-07-05T02:57:29.233
> 
> 标签：sql

我正在尝试加入 3 张桌子

文章、库存和已售表 ![在此处输入图像描述](../Images/c0ccb6bd0a61703741219edac480441e.png)

我想为每篇文章从表 Stock 中选择其 QteEntre 的总和，从表中选择 Qte 的总和 Sold here s my code

```
Select  Article.IdArt,
        Sum(sold.Qte),
        Sum(Stock.QteEntree)
from (((Article) 
        Left Join Sold on Sold.IdArt = Article.IdArt)
        Left Join Stock on Stock.IdArt = Article.IdArt)
Group by Article.IdArt 
```

但我总是得到（例如）IdArt 乘以 2 的 QteEnttree 和乘以 3 的 Qte 的结果我猜是因为我在 Sold 表中有 2 条记录，在 Stock 表中有 3 条记录

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T03:00:50.207

使用子查询试一试：

```
select a.IdArt,
       (select sum(Qte) from Sold where IdArt = a.IdArt group by IdArt) as QteSum,
       (select sum(QteEntree) from Stock where IdArt = a.IdArt group by IdArt) as QteEntreeSum
from Article a 
```

# c# - 在 Facebook 上发布图片

> ID：11337358
> 
> 赞同：2
> 
> 时间：2012-07-05T02:58:08.943
> 
> 标签：c#, facebook, sdk

我是 C# Facebook SDK 的新手，所以我想知道它是如何工作的。首先，我想知道如何在 Facebook 页面上发布带有描述的图片，例如`facebook.com/TennisHelper`.

图片是PNG格式的，我想把它贴在时间线上。

# javascript - 鼠标悬停让 div 出现在图像的边框内

> ID：11337367
> 
> 赞同：2
> 
> 时间：2012-07-05T02:59:32.343
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

当我将鼠标悬停在`img`within`div.hover-group`时，div`div.hover-toggle`变得可见，当鼠标离开图像时变得不可见。`div.hover-toggle`应该出现在`img`它所属的区域内**，与其底部边框**和每个**相等宽度**`button.btn`的s对齐。

 **为了显示：

没有鼠标悬停：

```
|-----------|
|           |
|    img    |
|           |
|           |
|           |
|-----------| 
```

是鼠标悬停：

```
|-----------|
|           |
|    img    |
|           |
|-----------|
| 1 | 2 | 3 |
|-----------| 
```

我已经使用 jQuery 完成了悬停切换：

```
$(selector1).mouseover(function(){$(selector2).hide();});
$(selector1).mouseout(function(){$(selector2).show();}); 
```

但是，一直无法`div.hover-toggle`与图像的底部对齐，如图所示，它反而出现在图像的下方。

如何才能做到这一点？

谢谢！

* * *

我在上面操作的 DOM 出现在下面。它使用 twitter 引导程序。

```
<ul class="thumbnails">
    <li class="span3">
        <div class="hover-group thumbnail">
            <img src="http://placehold.it/260x180" alt="">
            <div class="hover-toggle btn-group">
                <button class="btn">1</button>
                <button class="btn">2</button>
                <button class="btn">3</button>
            </div>
            <h5>Thumbnail label</h5>
            <p>Thumbnail caption right here...</p>
        </div>
    </li>
...
</ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T03:09:30.850

这里不需要 JS，你可以通过简单的 CSS 和一点标记更改来完成所有事情（我将图像和 .hover-toggle div 包装在 .image-wrapper div 中）：

```
<ul class="thumbnails">
    <li class="span3">
        <div class="hover-group thumbnail">
            <div class="image-wrapper">
              <img src="http://placehold.it/260x180" alt="">
              <div class="hover-toggle btn-group">
                  <button class="btn">1</button>
                  <button class="btn">2</button>
                  <button class="btn">3</button>
              </div>
            </div>
            <h5>Thumbnail label</h5>
            <p>Thumbnail caption right here...</p>
        </div>
    </li>
...
</ul> 
```

现在它需要的样式很简单：

```
.hover-group .image-wrapper {
  /* We need this to make the .hover-toggle div relative to .image-wrapper */
  position: relative;
}

.hover-group .image-wrapper .hover-toggle {
  /* set it at the bottom of .image-wrapper */
  position: absolute;      
  bottom: 0;
  /* and don't display it */
  display: none;
}

.hover-group .image-wrapper:hover .hover-toggle {
  /* only display it when .image-wrapper is being hovered on */
  display: block;
} 
```

如果您希望它在您将鼠标悬停在整个 .hover-group 上时显示，请使用此 CSS 而不是最后一行：

```
.hover-group:hover .image-wrapper .hover-toggle {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:43:07.550

如果要保持结构不变，可以设置 div.hover-toggle 的高度，然后设置图像的边距，如下所示：

```
margin:0 0 -30px 0; 
```

哪个 30 是合适的数字取决于 div.hover-toggle 的高度。

现场演示：http: [//jsfiddle.net/4geFu/](http://jsfiddle.net/4geFu/)**

# embedded - 嵌入式软件中的回声消除 (AEC)

> ID：11337368
> 
> 赞同：1
> 
> 时间：2012-07-05T02:59:34.067
> 
> 标签：embedded, signal-processing, acoustics

我正在嵌入式设备上做一个 VoIP 项目。我使用带有低级音频编解码器的 32 位 MCU 构建了一个示例。现在我发现我的设备上存在回声问题，即我可以从扬声器中听到我说的话。我做了一些研究，发现大多数应用程序使用具有声学回声消除功能的 DSP 编解码器。但是，是否可以使用我的 32 位 MCU 在软件中进行声学回声消除？

您能否介绍用于声学回声消除的算法，甚至源代码：P？我知道在 MCU 上不可能使用复杂的方法，但也欢迎使用简单的算法。

谢谢

[跟进] : 我尝试了一些AEC代码，但它们在我的MCU中无法正常工作，可能是MCU功率的限制。我发现我的设备在实施这些代码时变得非实时（但 VoIP 需要实时响应）。最后我通过添加一个 AEC 芯片实现了一个模拟硬件解决方案，因为我不想在另一个 DSP 芯片中再次编写代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T06:03:14.653

我在回声消除方面玩得很开心。我写了一个软件电话，用户可以根据自己的喜好来切换他们的音频输入和输出设备。我尝试了 Speex 回声消除库，以及我在网上找到的其他几个开源库。没有一个对我有用。我尝试了不同的扬声器/麦克风配置，回声总是以某种形式或方式存在。

我相信很难创建适用于所有可能的扬声器配置/房间大小/背景噪音等的 AEC 代码。最后我坐下来用这个算法为我的软电话编写了我自己的回声消除模块。

它有点粗糙，但运行良好且可靠。

变量 1：记录与您交谈的人说话时的平均幅度。（不要考虑安静时间）

变量2：记录输入（麦克风）上的平均幅度，但仅在有声音时 - 再次 - 不要考虑安静时间。

只要有音频播放 - 切断麦克风。假设听的人没有说话，在最后一个可听音频帧进入播放后 150-300 毫秒打开麦克风。

如果来自麦克风的音频（您在播放期间丢弃的）大于 oh-say (variable2 * 1.5)，则开始发送音频输入帧指定的持续时间，每次输入幅度达到 (v​​ariable2 * 1.5）。

这样说话的人就会知道他们被打断了，然后停下来看看这个人在说什么。如果说话的人没有太嘈杂的背景，他们可能会听到大部分（如果不是全部）中断。

就像我说的，不是最优雅的，但它不使用很多资源（CPU、内存），而且它实际上工作得非常好。我对我的声音很满意。

为了实现它，我只做了几个函数。

在接收到的音频帧上，我调用了一个我调用的函数：

```
void audioin( AEC *ec, short *frame ) {
    unsigned int tas=0; /* Total sum of all audio in frame (absolute value) */
    int i=0;
    for (;i<160;i++)
        tas+=ABS(frame[i]);
    tas/=160; /* 320 byte frames muLaw */
    if (tas>300) { /* I assume this is audiable */
        lockecho(ec);
        ec->lastaudibleframe=GetTickCount64();
        unlockecho(ec);
    }
    return;
} 
```

在发送帧之前，我会：

```
#define ECHO_THRESHOLD 300 /* Time to keep suppression alive after last audible frame */
#define ONE_MINUTE 3000 /* 3000 20ms samples */
#define AVG_PERIOD 250 /* 250 20ms samples */
#define ABS(x) (x>0?x:-x)

char removeecho( AEC *ec, short *aecinput ) {
    int tas=0; /* Average absolute amplitude in this signal */
    int i=0;
    unsigned long long *tot=0;
    unsigned int *ctr=0;
    unsigned short *avg=0;
    char suppressframe=0;
    lockecho(ec);
    if (ec->lastaudibleframe+ECHO_THRESHOLD > GetTickCount64() ) {
        /* If we're still within the threshold for echo (speaker state is ON) */
        tot=&ec->t_aiws;
        ctr=&ec->c_aiws;
        avg=&ec->aiws;
    } else {
        /* If we're outside the threshold for echo (speaker state is OFF) */
        tot=&ec->t_aiwos;
        ctr=&ec->c_aiwos;
        avg=&ec->aiwos;
    }
    for (;i<160;i++) {
        tas+=ABS(aecinput[i]);
    }
    tas/=160;
    if (tas>200) {
        (*tot)+=tas;
        (*avg)=(unsigned short)((*tot)/( (*ctr)?(*ctr):1));
        (*ctr)++;
        if ((*ctr)>AVG_PERIOD) {
            (*tot)=(*avg);
            (*ctr)=0;
        }
    }
    if ( (avg==&ec->aiws) ) {
        tas-=ec->aiwos;
        if (tas<0) {
            tas=0;
        }
        if ( ((unsigned short) tas > (ec->aiws*1.5)) && ((unsigned short)tas>=ec->aiwos) && (ec->aiwos!=0) ) {
            suppressframe=0;
        } else {
            suppressframe=1;
        }
    }
    if (suppressframe) { /* Silence frame */
        memset(aecinput, 0, 320);
    }
    unlockecho(ec);
    return suppressframe;
} 
```

如果需要，它将使框架静音。我将所有变量（例如计时器和幅度平均值）保留在 AEC 结构中，我从调用返回

```
AEC *initecho( void ) {
    AEC *ec=0;
    ec=(AEC *)malloc(sizeof(AEC));
    memset(ec, 0, sizeof(AEC));
    ec->aiws=200; /* Just a default guess as to what the average amplitude would be */
    return ec;
}

typedef struct aec {
    unsigned long long lastaudibleframe; /* time stamp of last audible frame */
    unsigned short aiws; /* Average mike input when speaker is playing */
    unsigned short aiwos; /*Average mike input when speaker ISNT playing */
    unsigned long long t_aiws, t_aiwos; /* Internal running total (sum of PCM) */
    unsigned int c_aiws, c_aiwos; /* Internal counters for number of frames for     averaging */
    unsigned long lockthreadid; /* Thread ID with lock */
    int stlc; /* Same thread lock-count */
} AEC; 
```

您可以根据需要进行调整并尝试使用这个想法，但就像我说的那样。它实际上听起来相当不错。我唯一的问题是他们是否有很多背景噪音。但对我来说，如果他们拿起他们的 USB 听筒或使用耳机，他们可以关闭回声消除功能，而不必担心……但尽管带有麦克风的 PC 扬声器……我对此很满意。

我希望它有帮助，或者给你一些可以建立的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T07:20:32.100

如果您正在做一个商业项目，这应该很容易。您可以在 VoIP 应用程序中集成商业音频消除软件。

# google-app-engine - 在 Google App Engine 上使用 OAuth 处理身份验证 (OpenId)（两个问题）

> ID：11337369
> 
> 赞同：0
> 
> 时间：2012-07-05T02:59:42.450
> 
> 标签：google-app-engine, openid, oauth-2.0, restlet

刚刚实现了这个，我有一个关于身份验证和 oauth 如何协同工作的非常基本的问题。我有一个示例 Web 应用程序客户端 (ckclient)，它访问 REST API (commitapi) 来管理他们的承诺。这遵循了类似 LinkedIn 的应用程序显示用户的推文（通过 Twitter）的模型，如下所述：[http ://www.slideshare.net/coldfumonkeh/oauth-demystified-hopefully](http://www.slideshare.net/coldfumonkeh/oauth-demystified-hopefully)

在我的简单应用程序中，用户访问 Web 应用程序客户端并要求查看他们的承诺。我正在使用 Restlet，用户被重定向到一个页面，他们可以在其中选择他们的 OpenId 提供程序并登录。他们被重定向到可以批准访问其承诺资源的页面。一切正常。

但是，Web 应用程序客户端不知道用户是谁！所有身份验证都是使用 REST API 完成的，而不是使用 Web 应用程序客户端。

所以我的第一个问题是......这是一个错误还是一个功能？

我对答案的猜测是这是一个“功能”——这就是 Oauth 的工作方式——你不希望 Web 应用程序客户端知道与资源服务器一起存储的用户 ID/电子邮件地址（在我的情况下是提交者，Twitter 在上面的幻灯片）。

如果这是正确的，那么如果我希望 Web 应用程序客户端知道用户是谁，那么 Web 应用程序客户端应该提供用户身份验证。由于我在服务器端使用 Google 的 UserService，因此我还在 Web 应用程序客户端上实现了基于 UserService 的身份验证。现在，如果用户还进行了 Web 应用程序客户端身份验证，那么 Web 应用程序客户端具有用户的身份。所以这一切都很好。

将这两者结合起来也有效——但我不太明白为什么。

1.  在网络应用程序上，我通过 Google 的 userService 登录（技术上使用 GaeAuthenticator，它只使用 Google 帐户）。现在网络应用程序知道我是谁并且可以显示我的电子邮件地址。
2.  通过网络应用程序，我向服务器询问我的承诺。服务器通过给我登录页面来响应，我可以在其中选择我的 OpenId 提供程序。

2a. 如果我选择 Google，UserService 似乎知道我已经通过网络应用程序登录并显示我的承诺。

2b。如果我选择雅虎（或其他），我必须通过雅虎进行身份验证，然后我会看到该雅虎用户的承诺。这一切对我来说似乎都很好——除了 UserService 是如何知道我已经登录的？网络客户端位于 x.appspot.com，服务器位于 y.appspot.com。答案是否像 UserService 集成在所有 apppot.com 中一样简单？

无论如何，感谢任何可以回答这两个问题的人 - 或者只是确认我在正确的道路上。

（注意：我使用 Google 的 UserService 创建登录 url，我的 web 应用程序客户端和资源服务器在 apppot 上，使用联合身份验证，这一切都是 Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T22:16:35.207

好吧，问题第一部分的答案是“功能”——通过 OAuth 从 ResourceServer 获取资源不应该向 Web 应用程序客户端公开任何与用户相关的信息。

我将提出一个关于 UserService 如何发挥其魔力的更具体的问题。

# c# - 缓存信息时最好的方法是什么？

> ID：11337370
> 
> 赞同：0
> 
> 时间：2012-07-05T02:59:46.010
> 
> 标签：c#, sql, caching

我的应用程序发送电子邮件。我现在：

1.  从数据库（对象）中获取客户列表
2.  从数据库中获取他们的电子邮件类型列表（同上）
3.  从数据库中获取电子邮件收件人/唯一数据的列表（再次）
4.  使用上面的数据生成邮件
5.  在记录 smtp 状态时循环浏览邮件并发送出去

现在，当您发送 500 封电子邮件时，这种行为很好，但如果是 10,000 多封电子邮件，会有什么影响？我想在某些时候我存储的对象数量直到我到达第 5 步是相当可观的。我如何衡量它以知道我正在接近容量？我想我至少可以对整个场景进行计时，以了解它何时成为系统的拖累需要多长时间作为线索。

以每个客户为基础运行此方案会更好吗？似乎效率会降低，可能会击中数据库数百次而不是 3 次左右。我知道日志记录将是对数据库的一次点击。

我正在寻找一种方法，而不是代码解析。上次我没有具体说明时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:03:49.090

我想这取决于几件事，例如您的系统有多大/强大（数据库容量，处理/内存等等？），以及快速发送这些邮件的重要性等等。

一个想法可能是使用临时数据库表来存储步骤 1-4 中的信息。您可以分批执行此操作（如 Blogobeard 所述），也可以一次执行此操作，具体取决于效率。然后，实际的邮寄作业也可以分成几批，当发送邮件时，该客户的信息将从临时表中删除。

可能有几种方法可以对此进行微调，并且一旦您尝试了某些东西并有一些具体的结果可以采取行动，可能会更容易提供更好的建议。

# regex - 从一行中确定登录名和密码的简单正则表达式

> ID：11337371
> 
> 赞同：-5
> 
> 时间：2012-07-05T02:59:49.097
> 
> 标签：regex, expression

我需要你的帮助来为此创建一个正则表达式：

（网址；登录名；；密码）

``http://www.random-site.com;daba1169;;582485``

``http://www.random-site2.com;daba1534;;256485` 等等`

 `假设我需要一个正则表达式来获取第一个站点的登录名和密码。登录很容易： (?<=http://www.random-site.com.com;).*(?=;;)

但是我不能为密码做一个正则表达式（得到数字 582485），你能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T03:01:47.057

为什么不直接拆分/分解`;`并获取相关部分？

如果您坚持使用正则表达式，请使用以下命令：

```
/;(.*?);;(.*)/ 
```

第一个子模式是用户名，第二个子模式是密码。`

# mysql - 选择具有特定日期的所有记录：更简单的方法？

> ID：11337380
> 
> 赞同：0
> 
> 时间：2012-07-05T03:01:19.747
> 
> 标签：mysql

我正在选择列中有特定日期的记录`datetime`，但感觉有点草率，我想知道是否有更好的方法。我的查询如下所示：

```
SELECT   * 
FROM     myTable 
WHERE    event_datetime 
BETWEEN  '2012-05-05 00:00:00' AND '2012-05-05 23:59:59' 
```

它工作正常。我只是想知道在 mySQL 中是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:05:02.643

从什么角度看更好？

有人会建议使用`DATE(event_datetime) = '2012-05-05'`，但效率非常低。

因此，请继续使用您的解决方案并确保`event_datetime`列被索引覆盖

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:04:16.627

在 where 子句中的列上使用[DATE函数。](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)

例如：

```
SELECT   * 
FROM     myTable 
WHERE    DATE(event_datetime) = '2012-05-05' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:05:59.783

你可以这样做`WHERE date(event_datetime) = '2012-05-05'`，但是这种方式不能使用 index on `event_datetime`，所以如果你想使用 index of `event_datetime`，请使用你原来的方式。

# python - 使用python删除未访问的文件

> ID：11337382
> 
> 赞同：2
> 
> 时间：2012-07-05T03:01:31.617
> 
> 标签：python, file, time

我`django app`解析了一些用户上传的文件。有可能用户上传的文件可能会在服务器中保留很长时间，而没有被应用程序解析。如果很多用户上传很多，这可能会增加大小的文件。

我需要删除那些最近没有被应用程序解析的文件-say `not accessed for last 24 hours`。我试过这样

```
import os
import time

dirname = MEDIA_ROOT+my_folder
filenames = os.listdir(dirname)
filenames = [os.path.join(dirname,filename) for filename in filenames]
for filename in filenames:
    last_access = os.stat(filename).st_atime #secs since epoch
    rtime = time.asctime(time.localtime(last_access))
    print filename+'----'+rtime 
```

这显示了每个文件的最后访问时间..但我不确定如何测试文件访问时间是否在过去 24 小时内..有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:04:55.910

退房`time.time()`。它将允许您以 UTC 时间访问当前时间戳。然后，您可以从文件时间戳中减去当前时间戳，看看它是否大于 24*60*60。

[http://docs.python.org/library/time.html#time.time](http://docs.python.org/library/time.html#time.time)

另外，请记住，很多时候，Linux 文件系统是使用 noatime 挂载的，这意味着 st_atime 变量可能不会被填充。为了安全起见，您可能应该使用 st_mtime，除非您 100% 确定文件系统将始终以记录的时间挂载。

这应该是一个工作示例，但我还没有调试过。

```
import os
import time

dirname = MEDIA_ROOT+my_folder
filenames = os.listdir(dirname)
filenames = [os.path.join(dirname,filename) for filename in filenames]
for filename in filenames:
    last_access = os.stat(filename).st_mtime #secs since epoch
    timediff = time.gmtime() - last_access
    print filename+'----'+timediff
    if timediff > 24*60*60:
        print 'older than a day'
        # do your thing 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:14:31.980

为什么要打扰实际日期？只需检查是否`os.stat(filename).st_atime < time.time() - 24*60*60`.

# java - Java线程转储：“等待锁定”和“停车等待”之间的区别？

> ID：11337384
> 
> 赞同：50
> 
> 时间：2012-07-05T03:01:45.080
> 
> 标签：java, multithreading, locking, jvm, thread-dump

在 Java 线程转储中，您可以看到堆栈跟踪中提到的锁。
似乎有三种信息：

1：

```
- locked <0x00002aab329f7fa0> (a java.io.BufferedInputStream) 
```

2：

```
- waiting to lock <0x00002aaaf4ff6fa0> (a org.alfresco.repo.lock.LockServiceImpl) 
```

3：

```
- parking to wait for  <0x00002aaafbf70bb8> (a java.util.concurrent.SynchronousQueue$TransferStack) 
```

*   1：线程已获得对象 0x00002aab329f7fa0 上的锁定。
*   2&3：似乎是说线程正在等待所述对象上的锁变得可用......
    但是2和3有什么区别？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-05T11:05:25.463

使用内部锁时您将在线程转储中获得“等待锁定”，而使用 java.util.concurrent 中的锁时您将获得“停车等待”。考虑以下示例：

```
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class LockTest {

    final Lock lock = new ReentrantLock(true);

    synchronized void intrinsicLock() {
        Thread th = new Thread(new Runnable() {
            public void run() {
                intrinsicLock();
            }
        }, "My thread");
        th.start();
        try {
            th.join();
        } catch (InterruptedException e) {
        }
    }

    void reentrantLock() {
        lock.lock();
        Thread th = new Thread(new Runnable() {
            public void run() {
                reentrantLock();
            }
        }, "My thread");
        th.start();
        try {
            th.join();
        } catch (InterruptedException e) {
        }
        lock.unlock();
    }

    public static void main(String[] args) {
        LockTest lockTest = new LockTest();
        lockTest.intrinsicLock();
        //lockTest.reentrantLock();
    }

} 
```

您将`lockTest.intrinsicLock()`获得以下线程转储：

```
"My thread" prio=10 tid=0x00007fffec015800 nid=0x1775 waiting for monitor entry [0x00007ffff15e5000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at LockTest.intrinsicLock(LockTest.java:9)
    - waiting to lock <0x00000007d6a33b10> (a LockTest)
    at LockTest$1.run(LockTest.java:11)
    at java.lang.Thread.run(Thread.java:662) 
```

同时`lockTest.reentrantLock()`生产：

```
"My thread" prio=10 tid=0x00007fffec082800 nid=0x17e8 waiting on condition [0x00007ffff14eb000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000007d6a33d30> (a java.util.concurrent.locks.ReentrantLock$FairSync)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:156)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)
    at java.util.concurrent.locks.ReentrantLock$FairSync.lock(ReentrantLock.java:201)
    at java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:262)
    at LockTest.reentrantLock(LockTest.java:22)
    at LockTest$2.run(LockTest.java:25)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-05T09:41:34.523

在我看来，java.util.concurrent 包几乎都使用 LockSupport.park() 方法来阻塞线程，例如属于抽象队列同步框架的 CountDownLatch、ReentrantLock。因此，您问题中的第 3 个场景意味着您的代码最终调用 LockSupport.park() 方法，因为您使用 java.util.concurrent 包中的并发类，第 2 个场景意味着您使用同步密钥并显式调用 wait() 方法。

# php - imageresize 后如何获取 imagick 临时文件的名称

> ID：11337389
> 
> 赞同：1
> 
> 时间：2012-07-05T03:02:26.693
> 
> 标签：php, imagemagick, imagick

使用 imagemagick，我需要调整多种尺寸（800px、400px、50px）的图像大小。

而且我不想在本地保存这些图像，因为无论如何我都需要将图像上传到 Amazon S3。

例如，在下面的代码之后

```
$im->resizeImage(0, 800, imagick::FILTER_LANCZOS, 1, FALSE); 
```

$im->getImageFilename() 仍然返回在调整大小之前上传的原始临时文件。我需要的是调整大小后的临时文件名和路径，以便我可以将其直接上传到 Amazon S3 而无需在本地执行 writeImage()。为了节省时间和空间。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:05:16.337

没有“临时文件”。ImageMagick 在内存中进行操作。如果您希望将图像写入文件，您需要调用`$im->writeImage`.

# visual-studio-2010 - 如何创建 asp.net web setup 项目

> ID：11337394
> 
> 赞同：1
> 
> 时间：2012-07-05T03:03:56.687
> 
> 标签：visual-studio-2010, web-setup-project

我有一个 Asp.net 应用程序，我想通过单击 .ext 或 .msi 文件轻松地在客户端机器中解聚。

然后我在vs中找到了“网络设置项目”。

但是我不知道怎么做。

就我而言，我的应用程序需要 .Net 4。

部署应用程序后，我必须修改 web.config 中我想通过安装向导收集的内容。

我还需要在部署后做一些干净的工作（修改一些文件）。

所以我想知道我的要求是否可以使用“网络设置项目”，以及如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:52:21.953

在 Visual Studio 中，您只能通过[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066%28v=vs.85%29.aspx)在安装期间修改文件。因此，您需要编写自定义代码来满足您的需求。关于 .NET Framework 4，它可以作为[先决条件](https://stackoverflow.com/questions/1334436/adding-custom-prerequsites-to-visual-studio-setup-project)添加。

如果您想要一个更简单的解决方案，您可以尝试商业设置创作工具：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

例如，Advanced Installer 具有用于 ASP.NET 应用程序的专用项目类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T07:04:19.687

是的，我们可以在安装过程中对 .msi 文件进行自定义操作（安装过程中的框架连接，为 Web 应用程序使用 WCF 服务）。如果您想对此有更清晰的了解，请参阅我的文章。

这是为了创建或更改连接字符串以及 Windows 应用程序的设置创建

[http://www.codeproject.com/Tips/446121/Adding-connection-String-During-Installation](http://www.codeproject.com/Tips/446121/Adding-connection-String-During-Installation)

在此为使用 WCF 服务的 Web 应用程序创建设置文件

[http://www.codeproject.com/Tips/477202/SetUp-file-Creation-for-Web-Application-which-Cons](http://www.codeproject.com/Tips/477202/SetUp-file-Creation-for-Web-Application-which-Cons)

# java - 如果我的 Java 应用程序停止工作，请关闭它

> ID：11337395
> 
> 赞同：0
> 
> 时间：2012-07-05T03:04:03.793
> 
> 标签：java

有没有办法让我的java应用程序出现错误关闭？例如，如果我有一个空指针异常，我可以让它完全关闭吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:06:18.590

顶层任何未捕获的异常都会自动停止它所在的线程。如果程序中有多个线程，其他线程仍将继续存在。如果要显式终止，可以调用`System.exit()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:34:31.167

正如其他人所说，捕获异常并调用`System.exit()`是（通常）正确的方法。但不仅如此：

问：我真的需要抓住它吗？

A：如果您的应用程序是常规的命令行应用程序，并且在“主”线程上抛出异常，那么您可能不需要捕获它。主线程上未捕获的异常将导致应用程序退出......如果不存在其他非守护线程。（事实上​​，同样的事情适用于**任何**线程......）

但是，如果您的线程有多个非守护线程，那么您需要做一些事情来停止应用程序。就像捕获异常并调用`exit()`.

问：你在哪里抓到的？

答：在可能引发“致命”异常的任何线程的堆栈上。有两种方法可以做到这一点：

*   `main(String[])`在方法、线程的方法等中放置一个 try/catch（Throwable）`run()`。

*   安装默认的未捕获异常处理程序。

你不想做的是`System.exit()`通过你的代码库添加调用。这种方法会导致可重用性、单元测试以及通常弄清楚“为什么*effing*应用程序又死了”的各种问题。

问：如果已经被抓到了怎么办？

答：您的应用程序可能无法自然退出的一个原因是您的代码已经意外地捕获了异常。例如：

```
 try {
       doSomething()
    } catch (Exception ex) {
       handle an IO exception
    } 
```

在上面，一些无知/懒惰的程序员没有考虑可能抛出的异常，`doSomething`并认为它们都是某种与 IO 相关的异常。但是，如果异常实际上是意外`NullPointerException`......或者更糟糕的......那么代码只是将它压扁了。

解决这种问题的方法是代码审查和指导，以治愈程序员的坏习惯……希望在他对代码库造成太大破坏之前！如果你在你的代码库中发现这种东西，你应该立即修复它......并且可能对类似事件进行“grep”并修复它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T03:04:57.310

您可以使用`System.exit(0);`来终止 JVM。

`NullPointerException`但是，您应该在使用它之前通过检查参考来避免：

```
if(foo != null) foo.doSomething(); 
```

# node.js - 在 Express.js 的中间件模块中向响应对象添加数据是否可以？

> ID：11337402
> 
> 赞同：22
> 
> 时间：2012-07-05T03:04:36.400
> 
> 标签：node.js, express

这是基本设置。我正在尝试创建一个简单的中间件组件，它可以让我轻松地将数据从路由直接传递到客户端的 javascript。（非常类似于红宝石中的[Gon](https://github.com/gazay/gon)宝石）。我这样做的方式是拥有一个如下所示的模块：

```
 module.exports = function(){
    return function(req,res,next){
        var app = req.app;
        if(typeof(app) == 'undefined'){
            var err = new Error("The JShare module requires express");
            next(err);
            return;
        }
        res.jshare = {};
        app.dynamicHelpers({
            includeJShare: function(req,res){
                if(typeof(res.jshare) === 'undefined'){
                    return "";
                }
                return function(){
                    return '<script type="text/javascript">window.jshare=' + JSON.stringify(res.jshare) + '</script>';
                } 
            }
        });
        next();
    };
} 
```

然后，在我的路线中，我可以这样做：

```
exports.index = function(req, res){
  res.jshare.person = {firstName : "Alex"};
  res.render('index', { title: 'Express' })
}; 
```

最后在 layout.jade 中：

```
!{includeJShare()} 
```

这样做是在客户端上输出一行 javascript，该行创建了在服务器端创建的确切 JSON 对象。

这是问题；这一切都按预期工作，但作为 Express 和 Node.js 的新手，我只是好奇将属性附加到响应对象上是否可以，或者我只是忽略了这样做有什么问题吗？出于某种原因，它没有通过我的“气味测试”，但我不知道为什么......

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-12T20:35:36.953

我知道这是一个旧线程，但是这个主题还有其他内容要添加。

Express 有一个`response.locals`用于此目的的对象 - 扩展中间件的响应以使其可用于视图。

您可以直接向响应对象添加一个属性，正如@hasanyasin 所指出的，这就是 JavaScript 的设计方式。但更具体地说，Express 有一种他们更喜欢我们这样做的特定方式。

这可能是 express 3.x 中的新功能，不确定。当问到这个问题时，也许它并不存在。

有关详细信息，请参阅

[http://expressjs.com/en/api.html#res.locals](http://expressjs.com/en/api.html#res.locals)

还有一个`app.locals`for 对象不会因请求而异（或响应我想的响应）。

[http://expressjs.com/en/api.html#app.locals](http://expressjs.com/en/api.html#app.locals)

另请参阅：[Express 中间件中的 req.locals vs. res.locals vs. res.data vs. req.data vs. app.locals](https://stackoverflow.com/questions/33451053/req-locals-vs-res-locals-vs-res-data-vs-req-data-vs-app-locals-in-express-mi)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-05T03:49:43.233

完全没问题。这就是 JavaScript 的设计方式。唯一需要注意的是不要意外覆盖已经存在的属性或被其他人覆盖。为了更安全，您可以考虑更深一层，而不是直接将所有内容添加到 req/res 对象中：

```
res.mydata={}
res.mydata.person= ... 
```

像那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-11-15T10:57:55.390

用于`res.locals`在响应对象中包含自定义变量。

# javascript - 使用 javascript/jQuery 更改类的背景颜色属性

> ID：11337404
> 
> 赞同：7
> 
> 时间：2012-07-05T03:04:43.373
> 
> 标签：javascript, jquery, css, class, background-color

这似乎是一个简单的问题，但没有什么可以解决它。我正在尝试使用 javascript/jQuery 动态更改某些文本的背景颜色（从白色或粉红色到绿色），但由于某种原因它不起作用。文本使用名为“.novice”的 CSS 类设置样式。

这是CSS。这很简单。我也尝试过完全删除背景颜色，所以它还没有设置背景颜色。

```
<style type="text/css">
.novice {
background-color: pink;
}

</style> 
```

这是一个包含我使用循环写出的项目的数组。第一项具有“新手”类

```
var achievements = ['<span class="novice">novice - 10 or more guesses </span>', ...] 
```

下面是一个 if 语句，如果为真，则应该使“.novice”类具有“背景色：绿色”属性，并使“新手 - 10 次或更多猜测”以绿色突出显示。我很肯定我已经正确设置了变量 timeguessed 并且拼写正确。但是，当 timesguessed 大于 10 时，“新手...”仍然不会以绿色突出显示。

```
if (timesguessed > 10) {
    $('.novice').css('background-color', 'green'); 
} 
```

**我在上面输入这个部分对吗？** 我也试过替换 $('.novice').css('background-color', 'green'); 与 $('.novice').background-color(green); ，尽管这可能是错误的。

即使我用所谓的新修改的“新手”类打印出另一行，文本仍然不会以绿色突出显示。

```
document.write('<span class="novice">novice - 10 or more guesses </span>'); 
```

我知道原始的 CSS .novice 类正在工作，因为无论时间猜测是大于还是小于 10，文本都会以粉红色突出显示。

我不确定Javascript是否没有修改CSS类，或者什么。或者，也许它只是有其他东西覆盖它？

谢谢您的帮助。是的，我是 javascript/jQuery 的初学者。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
.novice {
}

</style>
<script type="text/javascript" src="../MM_JAVASCRIPT2E/MM_JAVASCRIPT2E/_js/jquery-1.6.3.min.js"></script>

<title>Number Guessing Game</title>

</head>

    <body>
    <h1 style="text-align:center;"> Number Game </br> Try to guess my number that is between 0-1000 </h1>
    <script>
// BEGIN LONG BLOCK OF CODE WITH GUESSING GAME MECHANISMS. You can ignore this part I think, this part works.
    var realnumber = prompt('Player 1, please enter a number for Player 2 to guess then hand it off to Player 2.', '');
    while (isNaN(realnumber)) {
        realnumber = prompt('Player 1, please enter a NUMBER, dimwit, for Player 2 to guess.', '');}
    var timesguessed=0;
    while (numbertoguess != 0) {
    var numbertoguess = prompt("Player 2, guess a number", "");
    while (isNaN(numbertoguess)) {
        numbertoguess = prompt('Please, type in a number');} // why don't I need an "else" here?
    numbertoguess = Math.abs(numbertoguess - realnumber);
        if ( numbertoguess >= 50 ) {
        alert("Tundra cold");
        timesguessed++;
        }
    else if ( 30 <= numbertoguess && numbertoguess < 50) {
        alert("cold");
        timesguessed++;
        }
    else if ( 20 <= numbertoguess && numbertoguess < 30 ) {
        alert("warm");
        timesguessed++;
        }
    else if ( 10 <= numbertoguess && numbertoguess< 20 ) {
        alert("hot");
        timesguessed++;
    }
    else if ( 5 <= numbertoguess && numbertoguess < 10 ) {
        alert("Steaming hot!");
        timesguessed++;
        }
    else if ( 3 <= numbertoguess && numbertoguess < 5 ) {
        alert("SCALDING HOT!");
        timesguessed++;
    }
    else if ( 1 < numbertoguess && numbertoguess < 3 ) {
        alert("FIRE!");
        timesguessed++;
    }
    else if ( numbertoguess == 1 ) {
        alert("Face Melting!");
        timesguessed++;
    } else if ( numbertoguess == 0 ) { 
        alert("BINGO!");
        timesguessed++;
    }
    }
    document.write('</br></br></br></br><h2 style="text-align:center; font-size: 18px;"> The number was ' + realnumber + '.');
    if (timesguessed == 1) {
        document.write('</span><h2 style="text-align:center;">It took you ' + timesguessed + ' guess.</h2>');
    } else {
    document.write('<h2 style="text-align:center;">It took you ' + timesguessed + ' guesses.</h2>');
    }

// END LONG BLOCK OF CODE WITH GUESSING GAME MECHANISMS

    document.write('</br></br>')
//below is the array written out with a loop
    var achievements = ['<span class="novice">novice - 10 or more guesses </span>',bronze - 7-10 guesses', 'silver', 'gold', 'titanium', 'platinum', 'diamond', ]
    var counter = 0;
        while (counter < achievements.length) {
        document.write('<h2 style="text-align:center;">' + achievements[counter] + ' ');
        counter++;
        }
//below is the "if" function of question
    if (timesguessed > 10) {
        $('.novice').css('background-color', '#00FF00'); //why does this not work?
    }
    document.write('<span class="novice">novice - 10 or more guesses </span>'); //why does this not work?

    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:56:01.953

`.css()`在您的代码中，通过向它们添加内联样式来更改*页面上已有元素的样式 -***而不是**通过修改 css 规则。

您可以在运行时添加新规则，如下所示：

```
$('head').append('<style type="text/css">.novice{color:green;}</style>'); 
```

不过，我不支持这种修改。我宁愿看到像这样的css

```
.novice {background-color: pink;}
.over-ten-guesses .novice {background-color:green;} 
```

之后，您可以`.over-ten-guesses`在任何具有`.novice`其后代的容器元素上使用 Javascript 切换该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T05:14:30.967

您可以通过以下方式进行 **步骤 1**

```
 var imageUrl= "URL OF THE IMAGE HERE";
   var BackgroundColor="RED"; // what ever color you want 
```

**对于具有相同类的元素**

```
var elements = document.getElementsByClassName("ClassName")
            for (var i = 0; i < elements.length; i++) {
                elements[i].style.background=imageUrl; 
                //if you want to change bg image
                //if you want to change bg color
                elements[i].style.backgroundColor=BackgroundColor ;
            } 
```

**更改具有 ID 的元素**

```
document.getElementById("ElementId").style.backgroundImage=imageUrl
document.getElementById("ElementId").style.backgroundColor=BackgroundColor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:51:26.473

jQuery 未正确包含在页面中。检查你的控制台会告诉你链接是否失败（并且应该说那`$`是未定义的）。要使用谷歌的最新版本，请使用此链接：[http ://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js)

即改变这个：

```
<script type="text/javascript" src="../MM_JAVASCRIPT2E/MM_JAVASCRIPT2E/_js/jquery-1.6.3.min.js"></script> 
```

对此

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

在未定义的对象上调用方法会导致错误，并且后续代码的执行将失败。

# regex - 使用正则表达式匹配字符串和逗号之间的所有大小写

> ID：11337409
> 
> 赞同：0
> 
> 时间：2012-07-05T03:04:59.670
> 
> 标签：regex

我有一个大字符串。这是其中的一部分：

```
{"status":"ok","items":[{"image_versions":[{"url":"http:\/\/distilleryimage8.instagram.com\/11a67042c62311e1bf341231380f8a12_7.jpg","width":612,"type":7,"height":612},{"url":"http:\/\/distilleryimage8.instagram.com\/11a67042c62311e1bf341231380f8a12_6.jpg","width":306,"type":6,"height":306},{"url":"http:\/\/distilleryimage8.instagram.com\/11a67042c62311e1bf341231380f8a12_5.jpg","width":150,"type":5,"height":150}],"code":"MrMBxJo-O8","has_more_comments":true,"taken_at":1341438972.0,"comments":[{"media_id":228329104165036988,"_spam":false,"text":"I live in Oklahoma! :D Shoot them off with me! :D","created_at":1341441914.0,"user":{"username":"heather_all_over","pk":13296276,"profile_pic_url":"http:\/\/images.instagram.com\/profiles\/profile_13296276_75sq_1339538236.jpg","full_name":"Heather\ud83c\udf80","is_private":false},"content_type":"comment","pk":228353791620276525,"type":0},{"media_id":228329104165036988,"_spam":false,"text":"Wish I had that much money to spend.......","created_at":1341441916.0,"user":{"username":"l_mcnair","pk":23775741,"profile_pic_url":"http:\/\/images.instagram.com\/profiles\/profile_23775741_75sq_1339894045.jpg","full_name":"Lauryn","is_private":true},"content_type":"comment","pk":228353803204944174,"type":0},{"media_id":228329104165036988,"_spam":false,"text":"You should video tape you setting them all off","created_at":1341441939.0,"user":{"username":"ahrii_","pk":37732021,"profile_pic_url":"http:\/\/images.instagram.com\/profiles\/profile_37732021_75sq_1340907381.jpg","full_name":"Ahriana;-*","is_private":false},"content_type":"comment","pk":228353997065675057,"type":0},{"media_id":228329104165036988,"_spam":false,"text":"When did skrillex start selling 
```

我正在尝试匹配“pk”之后的每个数字：“。我一直在尝试向前看，但似乎不太正确。我对正则表达式了解不多，所以如果有人能指出我正确的方向会很好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:11:29.777

这看起来像一个 JSON 响应。为什么不只解析 JSON 并提取所有“pk”键的值？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:18:04.217

根据您使用的语言，正则表达式可能看起来不同，但这应该适用于大多数语言：

```
/"pk":(\d+)/g 
```

这基本上是查找字符串“pk”：然后是之后的所有数字，将这些数字放在捕获组中。最后的 g 使它搜索所有出现的事件。但是，根据您使用的语言，您可能无法检索所有捕获。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T03:10:23.900

如果你想在某事**之后**的部分，你应该使用后视：

```
(?<="pk":)\d+ 
```

# jakarta-ee - 使用 Persistence API 的 criteriaQuery 进行条件查询

> ID：11337412
> 
> 赞同：2
> 
> 时间：2012-07-05T03:05:20.230
> 
> 标签：jakarta-ee, persistence, criteria-api

`findAll`Session bean的 Abstract 方法的默认生成代码是这样的：

```
public List<T> findAll() {
    javax.persistence.criteria.CriteriaQuery cq = getEntityManager().getCriteriaBuilder().createQuery();
    cq.select(cq.from(entityClass));
    return getEntityManager().createQuery(cq).getResultList();
} 
```

我们能否以同样的方式创建另一个方法，它可以找到所有记录，`WHERE status ='1'`

如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:55:25.297

你需要使用 cq.where()

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
CriteriaQuery cq = cb.createQuery();
Root<T> c = cq.from(entityClass);
cq.select(c);
cq.where(cb.gt(c.get("status"), 1));
return getEntityManager().createQuery(cq).getResultList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:40:26.600

我最近遇到了同样的问题，所以，虽然它可能与 OP 不再相关，但我会发布一个答案。也许它可以帮助别人。

```
CriteriaBuilder cb = getEntityManager().getCriteriaBuilder();
CriteriaQuery cq = cb.createQuery();
Root<T> c = cq.from(entityClass);
cq.select(c);
cq.where(cb.equal(c.get("status"), 1));
return getEntityManager().createQuery(cq).getResultList(); 
```

如您所见，与@dgregory 的答案的唯一区别在于这一行：

```
cq.where(cb.equal(c.get("status"), 1)); 
```

@dgregory 使用的函数**gt()而不是****equal()**测试它的第一个参数是否**大于**第二个参数，这意味着参数必须是**numbers**。但是，您数据库中的**状态**列显然是**char**，因此会引发异常。此异常的含义是不存在第一个参数为 char 的 gt() 方法，尽管此方法存在于数字第一个参数中。

更不用说，即使存在这样的方法，这也不是您对查询的期望。

# vba - 根据值查找单元格位置然后做一些事情-用户表单 VBA Excel

> ID：11337413
> 
> 赞同：0
> 
> 时间：2012-07-05T03:05:21.007
> 
> 标签：vba, excel, userform

我有编程经验，但是，我是 VBA 新手。我有一个正在处理的用户表单。此表单有一个组合框，其中有一个初始化列表。我想做的是：

*从 ComboBox 中获取用户输入的 ID Number 值 *获取用户输入的值并使用工作表中的一系列值找到其匹配项（即 Worksheet.Range("ID_Number_List")） *一旦获得匹配项获取它匹配的单元格的位置 * Off 将单元格的位置设置一列以获取与 ID 号（相同行）相关的名称以将其设置为 textBoxName.Value *Off 将其设置为两列以获取与 ID 号相关的电话号码并将其设置为 textboxTele.value

我希望在从组合框中选择一个值后立即发生这种情况，所以我的问题是我的代码是进入组合框中还是进入下一个文本框？因此，只要该人切换到下一个文本框，代码就会自动执行。我希望代码能够完全执行，而不需要转到下一个框。

这段代码不完整，但这是我所拥有的（我没有添加偏移部分，我只是做了一个测试执行）：

```
Dim ORIValue As String 
'get value from combo_box Set 
ORIValue = COMBO_ORILIST.Value

Dim cLoc As Range 
Dim cORIVal As Range

'worksheet with the ID information Dim ORISheetList As Worksheet 
Set ORISheetList = Worksheets("ORI_LIST")

'
For Each cLoc In ORISheetList.Range("ORI_LIST")
'compare the input string from list- considering using Match function for this
If StrComp(cLoc, ORIValue,  vbTextCompare) Then TextBAgencyName.Value = "test"
Else: Next cLoc
End If 
```

让我知道你的想法。如果我必须重写一切，我会的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:15:29.527

您的代码无法编译。

如果您有一个带有单个组合框的用户窗体，称为 ComboBox1，则需要将单元格查找代码放入表单代码中，如下所示：

```
Private Sub ComboBox1_Change()
    MsgBox "yep, this is where the code should go"
End Sub 
```

我怀疑将组合框的 rowsource 属性与所选值的索引结合使用，您可能不需要实际执行对所选值的搜索。像这样的东西可能会起作用：

```
Private Sub ComboBox1_Change()
    MsgBox Range(ComboBox1.RowSource).Cells(ComboBox1.ListIndex + 1)
End Sub 
```

希望有帮助。

# django - 第一次启用管理员时，我可以使用现有用户作为 Django 管理员吗？

> ID：11337420
> 
> 赞同：27
> 
> 时间：2012-07-05T03:06:40.383
> 
> 标签：django, django-admin

我已经建立了一段时间的 Django 站点，但我从未启用 Django 管理员。

用户帐户在 LDAP 和 Django 上都注册了，但主记录基于 LDAP。所以我必须使用 LDAP 中的帐户作为超级用户。

当我启用 Django Admin 时，系统会提示我创建一个超级用户。我可以使用现有帐户（在 LDAP 和 Django db 上注册）作为超级用户吗？

如何？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-05T03:43:24.623

是的，但是您将通过 Django shell 来完成：

```
python manage.py shell 
```

然后从数据库中获取您的用户：

```
from django.contrib.auth.models import User
user = User.objects.get(username="myname")
user.is_staff = True
user.is_admin = True
user.save() 
```

退出 shell，该用户现在将成为管理员用户。

您还可以添加行

```
user.is_superuser = True 
```

`user.save()`如果您希望或需要此用户成为超级用户并拥有所有可用权限，请在调用之前。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-03-04T17:12:18.853

接受的答案在 Django 3 上产生了一个错误：

```
AttributeError: Manager isn't available; 'auth.User' has been swapped for 'users.User' 
```

从 Django 外壳：

```
python manage.py shell 
```

运行这个：

```
from django.contrib.auth import get_user_model
User = get_user_model()
user = User.objects.get(username="myname")
user.is_staff = True
user.is_admin = True
user.is_superuser = True
user.save() 
```

# javascript - 更改 JQuery 就绪调用的顺序

> ID：11337421
> 
> 赞同：1
> 
> 时间：2012-07-05T03:06:49.643
> 
> 标签：javascript, jquery

我需要订购一些 onReady 电话，我在[此处](https://stackoverflow.com/questions/3934570/order-of-execution-of-jquery-document-ready)和[此处](https://stackoverflow.com/questions/3976493/jquery-document-ready-queue-order)查看这些问题，但一无所获。然而那是很久以前的事了，也许现在有一些东西可以解决这个问题。所以我需要做这样的事情：

```
$(function (){ console.log('second call'); })
$(function (){ console.log('first call'); }) 
```

为了澄清为什么我需要这样做：

我需要的原因是这些调用分布在所有应用程序中，最重要的是：其中一些来自第三方，我无法控制它们。但是我确实需要首先调用我的方法，并且我需要将脚本放在文档的最前面。我正在处理的代码是遗留代码，我无法对其进行太多更改，因此重新考虑您的工作方式之类的答案对我来说没有多大意义。如果可能或任何解决方法，我只是在徘徊。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:11:14.023

如果你想控制函数执行的顺序，你应该把它们放在同一个回调函数中。

```
$(function() {
  console.log('second call');
  console.log('first call');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:20:34.513

原理是，ready()函数将东西添加到一个数组（readyList）中，然后按照添加的顺序执行。操作 readyList 数组可能会解决您的要求，根据本文[here](http://activelamp.com/blog/change-execution-order-documentready)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:35:03.133

您可以使用一个数组来存储函数，并使用一个 onReady 调用以正确的顺序调用它们。

```
var calls = [];

calls[2] = function() {
    console.log("third call");
};

calls[1] = function() {
    console.log("second call");
};

calls[0] = function() {
    console.log("first call");
};

$(function() {
    for (var index = 0; index < calls.length; index += 1) {
        calls[index]();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-18T17:19:05.860

我很早就有一个 .ready() 来解决它（在 jQuery 加载之后），它执行数组中的函数。因为它在源代码中非常早，所以首先执行 .ready()。在页面的下方，我可以将函数添加到数组中，因此它们都在任何其他 .ready() 之前执行。

我将它封装在一个 .beforeReady() 函数中，并将其作为 jQuery-Before-Ready 放在 GitHub 上，供任何感兴趣的人使用。

[https://github.com/aim12340/jQuery-Before-Ready](https://github.com/aim12340/jQuery-Before-Ready)

用法：

```
$.beforeReady(function() {
    alert("Ere I am JH")
}); 
```

# apache - httpd.conf 中 apache ThreadsPerChild 参数的硬限制是什么？

> ID：11337423
> 
> 赞同：3
> 
> 时间：2012-07-05T03:07:04.520
> 
> 标签：apache, websphere, websphere-7, websphere-6.1, ibmhttpserver

我正在使用基于 Apache 的 ibm http 服务器。当我尝试将参数增加到**`ThreadsPerChild`**1000 以上时，http 服务器总是只启动 1000 个工作线程。以下是相关信息：

错误日志：

> [Thu Jul 05 10:50:45 2012] [debug] mpm_winnt.c(564): Child 9040: 从父级检索到 2 个监听
> 器 [Thu Jul 05 10:50:45 2012] [notice] Child 9040: 获得了启动互斥锁.
> [Thu Jul 05 10:50:45 2012] [notice] Child 9040: **Starting 1000 worker threads**。
> [Thu Jul 05 10:50:45 2012] [notice] Child 9040：启动线程监听端口 81。
> [Thu Jul 05 10:50:45 2012] [notice] Child 9040：启动线程监听端口 80。

httpd.conf

```
<IfModule mpm_winnt.c>
  ThreadLimit 2048<br>
  ThreadsPerChild 2000
  MaxRequestsPerChild  0
</IfModule> 
```

IHS 7.0.0.0 操作系统 winNT

顺便说一句，另一个问题**`ThreadsPerChild`**是一个 Apache 线程是否在这里处理一个客户端连接，或者一个线程可以处理多个客户端连接？

请帮帮我。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T17:31:35.473

关于 ThreadsPerChild 设置的限制，引自[IBM HTTP Server Performance Tuning](http://publib.boulder.ibm.com/httpserv/ihsdiag/ihs_performance.html)；

> 在 64 位 Windows 操作系统上，每个实例限制为大约 2500 个 ThreadsPerChild。在 32 位 Windows 上，这个数字更接近 5000。这些数字并不是确切的限制，因为真正的限制是每个线程的固定启动内存成本 + 每个线程的最大运行时内存使用量的总和，这取决于配置和工作量。当运行时内存使用使进程地址空间超过 2GB 或 3GB 障碍时，提高 ThreadsPerChild 并接近这些限制可能会导致子进程崩溃。

值得注意的是，ThreadsPerChild 并不是调整 IHS 并发连接的唯一参数。您可以在以下链接中找到有关其他参数（如 maxClients）和调整方法的信息；

[调整 IBM HTTP Server 以最大化与 WebSphere Application Server 的客户端连接数](http://www-01.ibm.com/support/docview.wss?uid=swg21167658)

# java - java ioexception 错误=24 打开的文件太多

> ID：11337426
> 
> 赞同：2
> 
> 时间：2012-07-05T03:07:32.127
> 
> 标签：java, file, io, ioexception

我正在编写一个需要读取/写入大量文件的遗传算法。GA 的适应度测试调用了一个名为 的程序`gradif`，该程序将一个文件作为输入并生成一个文件作为输出。

一切正常，除非我使种群大小和/或遗传算法的总代数太大。然后，经过这么多代人，我开始得到这个：`java.io.FileNotFoundException: testfiles/GradifOut29 (Too many open files)`。（我为许多不同的文件反复获取它，索引`29`只是我上次运行它时第一次出现的那个）。这很奇怪，因为在第一代或第二代之后我没有收到错误，而是在经过大量代之后，这表明每一代都会打开更多它不会关闭的文件。但据我所知，我正在关闭所有文件。

代码的设置方式是`main()`函数在`Population`类中，`Population`类中包含一个数组`Individuals`。这是我的代码：

输入文件的初始创建（它们是随机访问的，因此我可以跨多代重用同一个文件）

```
files = new RandomAccessFile[popSize];

for(int i=0; i<popSize; i++){
    files[i] = new RandomAccessFile("testfiles/GradifIn"+i, "rw");
} 
```

在整个程序的最后：

```
for(int i=0; i<individuals.length; i++){
    files[i].close();
} 
```

里面`Individual`的体能测试：

```
FileInputStream fin = new FileInputStream("testfiles/GradifIn"+index);
FileOutputStream fout = new FileOutputStream("testfiles/GradifOut"+index);
Process process = Runtime.getRuntime().exec ("./gradif");
OutputStream stdin = process.getOutputStream();
InputStream stdout = process.getInputStream(); 
```

然后，后来……

```
try{
      fin.close();
  fout.close();
  stdin.close();
  stdout.close();
      process.getErrorStream().close();
}catch (IOException ioe){
    ioe.printStackTrace();
} 
```

然后，之后，我在文件中附加一个“END”，以使解析它们更容易。

```
FileWriter writer = new FileWriter("testfiles/GradifOut"+index, true);
writer.write("END");
try{
   writer.close();
}catch(IOException ioe){
   ioe.printStackTrace();
} 
```

我对标准输入和标准输出的重定向`gradif`来自[这个答案](https://stackoverflow.com/a/11336368/1390487)。我尝试使用`try{close()}catch{}`语法来查看关闭任何文件是否有问题（没有），我从[这个答案](https://stackoverflow.com/a/4289528/1390487)中得到了。

还应该注意的是，`Individual`s 的适应度测试同时运行。

更新：我实际上已经能够将其范围缩小到`exec()`通话。在我最近的一次运行中，我第一次遇到麻烦的是第 733 代（人口规模为 100）。为什么前几代还好？我不明白为什么，如果没有泄漏，算法应该能够通过前几代但在后几代失败。如果有泄漏，那么它来自哪里？

UPDATE2：在试图弄清楚这里发生了什么时，我希望能够（最好是实时地）查看 JVM 在任何给定点打开了多少文件。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:15:55.913

将所有操作放在循环中也许是个好主意：

```
while(selection_ of_file.hasNext()){
File are new randomFile
open inputFile
open outPufile
read from inputFile
write to outputFile
close inputFile
close outputFile
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:39:07.507

也尝试关闭错误流：

```
process.getErrorStream().close(); 
```

编辑：事实上你也应该阅读它，因为错误流上的缓冲区已满会阻塞子进程。

在这里查看 StreamGobbler 实现： [需要示例 Java 代码来运行 shellscript](https://stackoverflow.com/questions/609762/need-sample-java-code-to-run-a-shellscript)

编辑 2：是否存在人口规模（足够小），无论代数如何，您都不会遇到问题？如果是这种情况，您可能不会再泄漏打开的文件/流。

在这种情况下，您有两种解决方案：

*   要么重写你的算法，不让所有的人口文件同时打开
*   或者增加允许打开文件的最大数量。请参阅[此处](https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux)了解执行此操作的一些方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T21:19:59.543

如果您确定要关闭所有文件等，则可以尝试提高 ulimit。我曾经遇到过一个问题，Java 程序一直碰到 ulimit 上限。增加它解决了我的问题。我认为它可能需要重新启动服务器，因为它是内核参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T03:27:23.373

您似乎在 linux（或某些类似 unix 的操作系统）上运行。您可以使用类似“lsof”的命令来确定您的应用程序在收到错误时打开了哪些文件。

# ios - 复制后缺少属性（iOS）

> ID：11337430
> 
> 赞同：0
> 
> 时间：2012-07-05T03:08:24.120
> 
> 标签：ios, properties, automatic-ref-counting

我的项目启用了 ARC，我有两个模型，例如：

`Category`：

```
@interface Parent : NSObject
@property (assign, nonatomic) Category *parent;
@property (strong, nonatomic) NSArray *children;
@property (strong, nonatomic) NSArray *subCategories;
@end 
```

`Product`：

```
@interface Child : NSObject
@property (strong, nonatomic) NSString *name;
@property (assign, nonatomic) Category *category;
@end 
```

为了避免引用循环，并在 iOS 4.x 上部署，我将 Child 的 parent 属性设置为`assign`but not `weak`。

从 JSON 数据中，我可以获得包含我的类别和产品的树。当我使用树进行枚举时，一切都很完美。而且我有一种递归方法来搜索名称与关键字匹配的产品。方法如下：

```
- (NSArray *)productsWithKeyword:(NSString *)keyword
{
    NSMutableArray *filteredProducts = [NSMutableArray array];
    for (Category *cat in self.children) {
        NSArray *subResult = [cat productsWithKeyword:keyword];
        [filteredProducts addObjectsFromArray:subResult];
    }

    return [filteredProducts copy];
} 
```

问题是当我使用返回的数组时，我可以获得正确的`category`属性。但是从第二次开始，该`category`属性变为 0（从调试器中捕获）。

所以有什么问题？解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:12:08.207

为了避免引用循环，您希望一个对象对另一个对象具有弱引用，而不是使两者都具有对彼此的弱引用。我认为在这种情况下发生的事情是产品不拥有该类别并且该类别不拥有该产品，因此 ARC 假设没有人声称它们会释放这两个对象。

修复：使这些对象之一成为另一个对象的“父级”。

# windows - Windows32 API：函数入口上的“mov edi，edi”？

> ID：11337433
> 
> 赞同：2
> 
> 时间：2012-07-05T03:09:11.730
> 
> 标签：windows, x86, calling-convention, seh

我正在逐步执行 Windows 7 中的结构化错误处理恢复代码（例如，在 SEH 处理程序完成并传回“CONTINUE”代码后会发生什么）。这是一个调用的函数：

```
 7783BD9F  mov         edi,edi  
 7783BDA1  push        ebp 
 7783BDA2  mov         ebp,esp   
 7783BDA4  push        1  
 7783BDA6  push        dword ptr [ebp+0Ch]  
 7783BDA9  push        dword ptr [ebp+8]  
 7783BDAC  call        778692DF  
 7783BDB1  pop         ebp  
 7783BDB2  ret         8 
```

我习惯了“push ebp/mov ebp,esp”的功能序言。“mov edi,edi”的目的是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T03:11:00.663

Raymond Chen（Microsoft 开发人员之一）已经回答了这个确切的问题：

*   [为什么windows函数都以无意义的MOV EDI、EDI指令开头？](http://blogs.msdn.com/b/oldnewthing/archive/2011/09/21/10214405.aspx)

他链接了一个更早的参考：

*   [为什么编译器会在函数开头生成一条MOV EDI、EDI指令？](http://blogs.msdn.com/b/ishai/archive/2004/06/24/165143.aspx)

基本上，它为热补丁期间插入的跳转指令留出了空间。

# android - 如何打开 android 内置的下载应用程序？

> ID：11337435
> 
> 赞同：2
> 
> 时间：2012-07-05T03:10:16.133
> 
> 标签：android, android-intent, android-4.0-ice-cream-sandwich, launcher

因此，我正在下载内容并将其放入内置下载应用程序中，因为下载管理器就是这样工作的。我只想让用户单击一个打开内置下载应用程序的按钮。这是我的尝试：

```
btnDownloads.setOnClickListener(new Button.OnClickListener(){
    public void onClick(View v) {
        PackageManager pakMan=MainActivity.context.getPackageManager();
        Log.d("bebr", "Making pak");
        if(pakMan!=null){
            Intent downloadsIntent=new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_LAUNCHER).setComponent(new ComponentName("com.android.downloads","com.android.downlods.Downloads"));
            ResolveInfo resolved=pakMan.resolveActivity(downloadsIntent, PackageManager.MATCH_DEFAULT_ONLY);
            Log.d("bebr","Resolving");
            if(resolved!=null){
                Log.d("bebr", "Starting");
                startActivity(downloadsIntent);
            }
        }
    }
}); 
```

好的，终于设法得到了解决方案：

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-07T01:55:42.997

使用[DownloadManager.ACTION_VIEW_DOWNLOADS](http://developer.android.com/reference/android/app/DownloadManager.html#ACTION_VIEW_DOWNLOADS)常量：

```
startActivity(new Intent(DownloadManager.ACTION_VIEW_DOWNLOADS)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:46:44.797

您必须知道包名称才能启动下载应用程序。我不确定它在每台设备上是否都相同（尽管可能如此）。您可以通过查看 Logcat 并启动它来找到它，您应该会在日志中看到包含包名称的某些行。

但是，您可以完全跳过下载应用程序并直接启动包安装程序（当用户在下载应用程序中选择您的 apk 时会发生这种情况）

只需在以下代码段中填写文件的路径：

```
File appFile = new File("/path/to/your/file.apk");
Uri packageURI = Uri.parse("file:/"+ appFile.getAbsolutePath());
Intent installIntent = new Intent(Intent.ACTION_VIEW);
installIntent.setDataAndType(Uri.fromFile(appFile),"application/vnd.android.package-archive");
startActivity(installIntent); 
```

# python - 将对象转换为 DateRange

> ID：11337437
> 
> 赞同：1
> 
> 时间：2012-07-05T03:10:24.313
> 
> 标签：python, numpy, pandas

我正在使用 Pandas 0.8 查询底层 PostgreSQL 数据库。Pandas 正确返回 DataFrame，但我数据库中的底层时间戳列在 Pandas 中作为通用“对象”类型返回。因为我最终想对我的数据进行季节性标准化，我很好奇如何将这个通用的“对象”列转换为适合分析的东西。

这是我当前检索数据的代码：

```
# get timestamp with time zone Pandas example
import pandas.io.sql as psql
import psycopg2

# define query
QRY = """
    select 
        i i, 
        i * random() f,
        case when random() > 0.5 
        then 
            true 
        else 
            false 
        end b, 
        (current_date - (i*random())::int)::timestamp with time zone tsz 
    from 
        generate_series(1,1000) as s(i)
    order by
        4
    ;
"""
CONN_STRING = "host='localhost' port=5432 dbname='postgres' user='postgres'"

# connect to db
conn = psycopg2.connect(CONN_STRING)

# get some data set index on relid column
df = psql.frame_query(QRY, con=conn)

print "Row count retrieved: %i" % (len(df),) 
```

Python中的结果：

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1000 entries, 0 to 999
Data columns:
i      1000  non-null values
f      1000  non-null values
b      1000  non-null values
tsz    1000  non-null values
dtypes: bool(1), float64(1), int64(1), object(1) 
```

有趣的是，第一列“i”是 PG 中的 Integer col。我不确定为什么 Pandas 认为这是一个“布尔”类型的列。我真正的问题是我认为需要某种时间戳的“对象”列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:37:49.300

列出的 dtypes 按字母顺序排列。该`tsz`列可能包含`datetime.datetime`Python 对象（数据库驱动程序通常为时间戳列返回什么），你看过吗？

# c++ - 没有类实例的类成员的地址？

> ID：11337449
> 
> 赞同：2
> 
> 时间：2012-07-05T03:12:12.967
> 
> 标签：c++, class, pointers, member

我偶尔会看到类似这样的代码：

```
class A {
    int b;
}

void foo() {
    int* blah = &A::b;
    // Other stuff.
} 
```

但是在没有类实例的情况下获取类成员变量的地址怎么可能有用呢？它有什么作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T03:16:41.190

您的代码格式错误，无法编译。的类型`blah`不是`int*`，它是`int (A::*)`。也就是说，它不是“指向 的指针”，而是“指向类型为 的类类型的`int`数据成员的指针”。`A``int`

请注意，为了获得指向成员的指针，该成员必须是可访问的。要在 中进行计算`&A::b`，`foo()`需要`b`成为公共数据成员，或者`foo()`需要成为 的朋友`A`。

指向成员的指针不指向对象。相反，指向成员的指针可以绑定到对象以获取其数据成员的值。您可以通过将指向成员的指针绑定到 的实例来获取对象的`b`数据成员的值。例如，`A``blah``A`

```
A x;
int b_value = x.*blah; // b_value has the value of x.b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T14:00:23.667

该类`A`具有 int `b`。这意味着`b`是类的数据，如果你有一个实例`A`，你可以得到指针。`b``A`

我想你想问这个案例：

```
class A{
   int foo(int i) {
   }
} 
```

编译后，方法 foo 有地址，你可以得到指向`&A::foo`.

# c# - 不健全的程序有罪

> ID：11337453
> 
> 赞同：0
> 
> 时间：2012-07-05T03:13:20.640
> 
> 标签：c#, sql, xml, stored-procedures, anti-patterns

我正在阅读罗伯特·罗斯尼 (Robert Rossney) 的文章“你必须维护的最不健全的程序是什么？” 发现于：（[您必须维护的最不健全的程序是什么？](https://stackoverflow.com/questions/214836/whats-the-most-unsound-program-youve-had-to-maintain)）当我意识到我无意中开发了一个几乎相同的应用程序时！
该应用程序包含一个 HTTPListener 对象，该对象抓取传入的 POST 请求。根据标头中的信息，我将请求正文传递给 SQL Server 以执行适当的事务。
请求如下所示：

```
<InvoiceCreate Control="389>
  <Invoice>
    <CustomerNumber>5555</CustomerNumber>
    <Total>300.00</Total>
    <RushOrder>1</RushOrder>
  </Invoice>
</InvoiceCreate> 
```

HTTPListener 对象接收到它后，我通过存储过程使用 SQL Server 的内置 XML 处理功能对 Invoice 表执行所需的 INSERT：

```
 INSERT INTO Invoice (InvoiceNumber, CustomerNumber, Total, RushOrder)
  SELECT @NEW_INVOICE_NUMBER,  
         @XML.value('(InvoiceCreate/Invoice/CustomerNumber)[1]', 'varchar(10)'),
         @XML.value('(InvoiceCreate/Invoice/Total)[1]', 'varchar(10)'),
         @XML.value('(InvoiceCreate/Invoice/Total)[1]', 'varchar(10)') 
```

然后我在同一个存储过程中使用另一个 SELECT 语句来返回插入到 Invoices 表中的新 Invoice Number 的值：

```
SELECT @NEW_INVOICE_NUMBER FOR XML PATH 'InvoiceCreateAck' 
```

然后，我使用 C# 中的 SQL 数据读取器对象读取生成的 XML，并将其用作 HTTPListener 对象的响应。

我的问题是，我注意到罗伯特确实是正确的。我的所有应用程序逻辑都存在于存储过程中，因此我发现自己必须在存储过程中进行大量错误检查（即验证客户编号和发票编号值）。

我仍然是一名中级开发人员，因此，我正在寻求改进。鉴于原始帖子和我当前的架构，我可以做些什么不同的事情来改进应用程序？有没有我可以参考的模式或最佳实践？你会采取什么方法？我愿意接受任何和所有的批评，因为我想尽自己的一份力量来减少世界上“不健全的编程”的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:41:00.293

不确定具体的模式，但你需要定义你的图层并坚持下去。我在这里非常松散地使用图层。您有一层需要解析 XML。您有一个读取 HTTP 请求的层。您有一层进行数据访问。如果您使用 C#，这些可能是 3 个单独的类。

我不会在存储过程中这样做。根据我的经验，如果您更改数据库，这样做几乎可以完全重写。测试也真的很难。

对于您的数据访问，您仍然可以使用您的存储过程。我个人只会使用 C# 编写简单的插入语句。我只是努力将任何业务逻辑排除在存储过程之外。保留任何业务逻辑，在 C# 中解析，因为以后移植会容易得多。

祝你好运！

# oop - 如何为接口的实现赋值，但接口没有setter方法？

> ID：11337455
> 
> 赞同：0
> 
> 时间：2012-07-05T03:13:56.910
> 
> 标签：oop, interface, junit, setter

我有一个接口：Show，我有一个实现类调用 ShowImpl，还有一个实现类调用 ManageShowImpl。我已经完成了ManageShowImpl里面的所有方法。现在我正在做 Junit 测试。我在ManageShowImpl中定义的方法，例如：addShows(Show...shows)，现在我想给show数组赋值：Show[]，但是在界面中：Show，我没有setter方法（这不应该在界面内），一些专家可以告诉我如何将值添加到 Show []。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:59:49.787

如果我正确理解了您的问题，我认为您可以简单地在构造函数中设置值：

```
public class ShowImpl implements Show{

    private Show[] shows;

    public ShowImpl(Show... shows){
        this.shows = shows;
    }

    @Override
    public void someInterfaceMethod(){
        // ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:32:42.063

（我*不是*junit专家，甚至不是初学者，但也许我可以启发一些人来回答。我*已经*做了相当多的测试。）

给定一个带有构造函数的类，您总是可以创建一个实例，用您想要的任何数据填充它，并以您想要的任何方式对其进行测试。接口受到更多限制。除了测试，这是一件非常好的事情。它限制了某人在掌握接口实现时可能造成的损害；它安全地封装了数据。但是你不能孤立地测试一个接口。您需要首先创建一个实现类的实例。那时你应该填写你的数组。 *然后*将其作为*接口实例*传递给一个测试方法来测试接口。

# c# - Visual Studio for C# 中的其他全局包含目录

> ID：11337456
> 
> 赞同：1
> 
> 时间：2012-07-05T03:14:25.407
> 
> 标签：c#, visual-studio-2010, visual-studio

我发现自己在这里和那里重写了很多小东西，因为它们可能太大/太复杂而无法表示为片段，但实际上用它制作一个独立的 DLL 是没有意义的，因为我们可能只是在谈论几十或几百行代码。

例如一个小表单，它只包含一个文本框，用户在其中输入密码并在 {Enter} 时关闭。

或者一个扩展方法，它可以将任何对象序列化/反序列化到/从 GZipped 文件中，假设对象被标记为`Serializable`.

名单还在继续。这些年来，我积累了很多零碎的东西，而且没有以任何整齐的方式组织起来。

在 C++ 项目中，我可以编写一个包含这些代码位的 lib 文件，我可以将这些代码添加到我的编译器设置中，这样我创建的任何未来 C++ 项目都包含这个 lib。我已经用 ATL 和 Boost 做到了这一点。

我不知道为 C# 项目执行此操作的方法。可能吗？

**编辑：**

如果我制作一个程序集，我必须将它编译成一个 DLL 并将 DLL 与我的主要可执行文件一起分发。DLL 可能很小，也可能很大，我不知道。但我可能只需要在我的项目中使用该 DLL 中的一些小函数。在 C++ 中，当我使用库时，只有我使用的函数是静态链接的，但是如果我使用 DLL 分发我的软件，那么我必须分发所有内容。

我知道可以将 DLL 与主可执行文件合并，这样用户就不会知道有一个单独的库，但是整个 DLL 仍然与可执行文件一起打包。

想象一下，我编写了一个包含很多我自己的数学、统计、文件 IO、图像处理、序列化、用户 IO 等的 DLL。没什么特别的，只是我发现自己经常做的一些常见的事情。例如，DLL 可能是 4MB。

现在我想编写一个使用 DLL 的一小部分的程序，如果我只是复制/粘贴必要的代码，那么我的 EXE 最终会变成 700kB。

你是说我要么复制/粘贴我需要的代码，要么我必须分发一个 4MB 的 DLL 和我的 700kB 的 EXE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:51:20.940

除了使用程序集之外，我知道的唯一方法是在您的项目中创建指向相关源代码的链接。在视觉工作室中，过程是：

> 项目→添加→现有文件→添加为链接（小向下箭头：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:37:26.983

尽管经常要求（仅 Google c# #include 等效项），但在源代码级别是不可能的。c# 提供的唯一合理替代方案是将您的公共代码编译为 DLL 并添加对它的引用。

请注意，尽管您可以从另一个项目将文件添加到您的项目中，但它会获取一个副本，因此不会维护更新。我已经使用它来“手动”实现相同的效果 - 当公共文件更新时，我将其从“引用”它的项目中排除，然后重新添加以获得新副本。

**更新**如下评论，您可以添加为链接 - 太酷了！为什么没人告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T03:44:43.333

我们在整体包含路径中添加一个公共目录，然后使用

```
#include <somefile.cpp> 
```

直接在我们的 cpp 文件中。它将直接包含源代码。

# windows-7 - 路由表中的环回

> ID：11337458
> 
> 赞同：6
> 
> 时间：2012-07-05T03:14:46.987
> 
> 标签：windows-7, vmware, routes, routed-commands, loopback-address

我正在做一个项目，在 VMWare 来宾中使用 FreeBDS 创建一个 WAN 仿真器，该 VMWare 来宾配置为在主机操作系统与其正常网关路由器之间路由流量。我计划修改主机上的路由表，使其流量正确重定向，并在来宾中使用 ipfw 来修改各种网络特征。

在 Windows 7 中，我可以使用“ROUTE -f”完全清除路由表，但之后我无法为环回地址重新创建路由。

这是我用“ROUTE -f”清除它之前的路由表：

```
===========================================================================
Interface List
 10...00 1c c0 ea c9 c2 ......Realtek RTL8168D/8111D Family PCI-E Gigabit
 Ethernet NIC (NDIS 6.20)
 18...00 50 56 c0 00 01 ......VMware Virtual Ethernet Adapter for VMnet1
 20...00 50 56 c0 00 08 ......VMware Virtual Ethernet Adapter for VMnet8
  1...........................Software Loopback Interface 1
 11...00 00 00 00 00 00 00 e0 Microsoft ISATAP Adapter
 12...00 00 00 00 00 00 00 e0 Teredo Tunneling Pseudo-Interface
 19...00 00 00 00 00 00 00 e0 Microsoft ISATAP Adapter #2
 21...00 00 00 00 00 00 00 e0 Microsoft ISATAP Adapter #3
===========================================================================

IPv4 Route Table
===========================================================================
Active Routes:
Network Destination        Netmask          Gateway       Interface  Metric
          0.0.0.0          0.0.0.0    192.168.1.254     192.168.1.68     20
       10.10.10.0    255.255.255.0         On-link        10.10.10.1    276
       10.10.10.1  255.255.255.255         On-link        10.10.10.1    276
     10.10.10.255  255.255.255.255         On-link        10.10.10.1    276
        127.0.0.1  255.255.255.255         On-link         127.0.0.1    306
      192.168.1.0    255.255.255.0         On-link      192.168.1.68    276
     192.168.1.68  255.255.255.255         On-link      192.168.1.68    276
    192.168.1.255  255.255.255.255         On-link      192.168.1.68    276
    192.168.110.0    255.255.255.0         On-link        10.10.10.1    276
    192.168.110.1  255.255.255.255         On-link        10.10.10.1    276
  192.168.110.255  255.255.255.255         On-link        10.10.10.1    276
    192.168.163.0    255.255.255.0         On-link     192.168.163.1    276
    192.168.163.1  255.255.255.255         On-link     192.168.163.1    276
  192.168.163.255  255.255.255.255         On-link     192.168.163.1    276
===========================================================================
Persistent Routes:
  None 
```

在“ROUTE -f”之后，“Active Routes:”下面的所有路由在 Windows 7 上都消失了。（这在 Vista 上不会发生；只有默认网关，即第一行消失。）我已经能够重新创建表在大多数情况下，但我无法为 127.0.0.1 重新创建路由。不会出现错误消息，但会显示 ROUTE 的帮助文本。

谁能告诉我手动添加回环地址路由的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T15:48:27.453

如果您希望重新创建此路线：

```
 127.0.0.1  255.255.255.255         On-link         127.0.0.1    306 
```

然后你必须这样做：

```
route add 127.0.0.1 mask 255.255.255.255 0.0.0.0 metric 306 
```

但是，您会注意到`METRIC`从未重新创建。我不知道为什么会这样，但这可能只是 Windows 试图超越用户。使用“... METRIC 1”可能会取得更好的成功。此外，要重新创建`On-link`，您只需使用`0.0.0.0`.

还有两件事。

(1) 删除路由时，Windows 会删除其上的所有路由`Network Destination`。因此，您需要重新创建它们。

(2) 嗅探本地环回接口路由在 Windows 中不支持，因此您需要确保环回路由首先“退出”接口，通常通过外部网关。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-01T17:46:29.840

当用户无法 ping 127.0.0.1 时，我们使用的故障排除步骤之一是`netsh winsock reset`. 它需要重新启动机器，但它对我有用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-28T14:55:08.820

我考虑更好地使用它（在 *.bat 文件中）：

```
route -p add 127.0.0.1 mask 255.255.255.255 0.0.0.0 metric 1 if 1
route -p add 127.0.0.0 mask 255.0.0.0 0.0.0.0 metric 1 if 1 
```

，并在同一位置立即执行下一个命令：

```
route -p change 127.0.0.1 mask 255.255.255.255 0.0.0.0 metric 1 if 1
route -p change 127.0.0.0 mask 255.0.0.0 0.0.0.0 metric 1 if 1 
```

，如果 1 - 环回接口的数量，则为 1。

# c++ - ubuntu 12.04 eclipse中的“没有这样的文件或目录”错误

> ID：11337459
> 
> 赞同：1
> 
> 时间：2012-07-05T03:14:53.407
> 
> 标签：c++, eclipse-cdt

大家，我是 C++ 的新手，当我尝试构建一个项目时，以下代码中发生错误：

```
#ifndef GAMEPLAYEREX_H_
#define GAMEPLAYEREX_H_

#include "GamePlayer.h"

class GamePlayerEx : virtual public GamePlayer
{
public:
    GamePlayerEx(int = 0);
    virtual ~GamePlayerEx(void);
...... 
```

错误信息是：

```
In file included from ../GameEngine/GameMoudle/GamePlayerEx.cpp:8:0:
../GameEngine/GameMoudle/GamePlayerEx.h:11:24: fatal error: GamePlayer.h: No such file or directory
compilation terminated. 
```

我的项目目录如下图，我不想使用`#include "../GamePlayer.h"`.

那么，有人知道如何在项目中配置并让它工作吗？谢谢！

![在此处输入图像描述](../Images/4c388fe9e315ac89867013a2d0543b48.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:26:34.900

如果您使用 gcc（或大多数其他命令行编译器），您可以设置包含路径以包含任意目录，例如：

```
gcc -I.. myfile.cpp 
```

这将在这些目录中搜索包含文件。

如果您使用的是 IDE，则可以修改 IDE 或项目设置。例如， Eclipse Galileo CDT 的[这个链接](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm)显示了如何为给定项目设置包含路径。

# java - 进度条时间计算+java

> ID：11337462
> 
> 赞同：0
> 
> 时间：2012-07-05T03:15:27.050
> 
> 标签：java, swing

我正在将文件从客户端传输到服务器。我不知道转移需要多少时间。但是我的 UI 将简单地保持不变，而不会向用户提供任何提示。我需要保持一个进度条，直到文件上传为止。我怎样才能做到这一点。

我有点意识到.net 中的这种情况。但是我们如何在java中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:24:26.417

对于真正“不确定”的行为，[垃圾神的回答是正确的。](https://stackoverflow.com/a/11337480/104950)为什么您认为您的文件传输属于这一类？您是否从未在互联网上下载过带有某种进度条的文件？你能想象*没有*那个吗？

[*请参阅下面的示例，该示例在如何使用 JProgressBar 显示文件复制进度*](https://stackoverflow.com/questions/447481/how-do-i-use-jprogressbar-to-display-file-copy-progress)的答案中提供？[](https://stackoverflow.com/questions/447481/how-do-i-use-jprogressbar-to-display-file-copy-progress)

 *```
public OutputStream loadFile(URL remoteFile, JProgressBar progress) throws IOException
{
    URLConnection connection = remoteFile.openConnection(); //connect to remote file
    InputStream inputStream = connection.getInputStream(); //get stream to read file

    int length = connection.getContentLength(); //find out how long the file is, any good webserver should provide this info
    int current = 0;

    progress.setMaximum(length); //we're going to get this many bytes
    progress.setValue(0); //we've gotten 0 bytes so far

    ByteArrayOutputStream out = new ByteArrayOutputStream(); //create our output steam to build the file here

    byte[] buffer = new byte[1024];
    int bytesRead = 0;

    while((bytesRead = inputStream.read(buffer)) != -1) //keep filling the buffer until we get to the end of the file 
    {   
        out.write(buffer, current, bytesRead); //write the buffer to the file offset = current, length = bytesRead
        current += bytesRead; //we've progressed a little so update current
        progress.setValue(current); //tell progress how far we are
    }
    inputStream.close(); //close our stream

    return out;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:19:53.067

如[*如何使用进度条*](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)中所示，您可以指定*不确定模式*，直到您有足够的数据来衡量进度或下载结束。确切的实现取决于传输是如何发生的。理想情况下，发送方首先提供长度，但也可以随着数据的累积动态计算速率。*

# java - 当给定2个点和这些点的asa时，获取等腰三角形的最后一个角点

> ID：11337466
> 
> 赞同：0
> 
> 时间：2012-07-05T03:15:48.163
> 
> 标签：java, geometry

我从只有两个点和一个属于这两个点的角度开始。我剩下的唯一部分是最后一点，我不想强​​行通过它。到目前为止，我拥有下面列出的所有信息。

*   A点：给定
*   B点：给定
*   C点：（？，？）
*   角度 A：给定（在 A 点），与角度 B 相同
*   角度 B：给定（在 B 点），与角度 A 相同
*   角度 C：180 - 角度*2~（在 C 点）
*   AB边：距离(Point~A & Point~B)
*   AC 面：(Side~AB * Math.sin(Angle~A)) / Math.sin(Angle~C)
*   BC 面：(Side~AB * Math.sin(Angle~B)) / Math.sin(Angle~C)

到目前为止我的代码几乎就是这样的：（提示：p 是一个点，a 是一个角度，d 是一个边；1 是 A，2 是 B，3 是 C。我知道我的代码很难阅读但这是我的初稿。）

```
public static Point solve(Point p1, Point p2, double angle)
{
  //known
  double a1 = angle;
  double a2 = angle;
  double d12 = p1.distance(p2);
  //mathed
  double a3 = 180 - (angle*2);
  double d13 = (d12*Math.sin(a1))/Math.sin(a3);
  double d23 = (d12*Math.sin(a2))/Math.sin(a3);
  //mathed, mathed.
  Point p3 = null;
  return p3;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T06:42:44.690

让我们 P 是 AB 段的中心，**P** = ( **A** + **B** ) / 2

则PC向量垂直于AP，PC的长度为| **电脑**| = | **美联社**| / Tg（角度），Tg = Tan = 正切

让我们 Tg(角度) = t

第一个条件（perp 向量的点积）：PCx*APx+PCy*APy=0

第二个（平方长度）： t^2*(PCx*PCx+PCy*PCy) = APx*APx+APy*APy

该系统的解决方案（2个解决方案，C点可能在AB线的不同侧）：

PCx = +- APy/t

PCy = -+ APx/t

小心：标志应该是相反的！

最后：

Cx = Px + PCx = Ax/2 + Bx/2 +- Ctg(角度)/2 * (Ay + By)

Cy = Py + PCy = Ay/2 + By/2 -+ Ctg(角度)/2 * (Ax + Bx)

第一点：

Cx1 = Ax/2 + Bx/2 + Ctg(角度)/2 * (Ay + By)；

Cy1 = Ay/2 + By/2 - Ctg(角度)/2 * (Ax + Bx)；

第二点：

Cx2 = Ax/2 + Bx/2 - Ctg(角度)/2 * (Ay + By)；

Cy2 = Ay/2 + By/2 + Ctg（角度）/2 * (Ax + Bx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:25:46.560

如果通过 AB 的中心画一条垂直于 AB 的线，它将与点 C 相交。将线与线段 AB 相交的点称为 D。将这条线平移到 x 轴，D 到原点，AD 到y轴

```
^ y
|
| A
o
|\
| \
|  \
|   \ C
o----o-----> x
D 
```

计算出长度 DC 后，将 C 投影回原始坐标空间应该很容易。

1.  角度 C = 90 - 角度 A
2.  AC * cos 角 C = DC
3.  DC = AC * cos (90 - 角度 A)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:48:38.843

我希望这行得通。以 P1 = (-10,0), P2 = (10, 0), Angle = 45 度为例；我得到 (0, +-10) 有最终答案，这是正确的吗？

```
Mid Point = ( (x1+x2)/2, (y1+y2)/2)
Slope Angle = arcTan(m) = arcTan((y2-y1) / (x2-x1))
Perpendicular Angle = Slope Angle +- 90
Distance = (distance(P1 & Mid Point)/sin(90-Angle)) * sin(Angle)

P3 = (cos(Perpendicular Angle)*Distance + Mid Point.x , sin(Perpendicular Angle)*Distance + mid Point.y) 
```

我得到这个的方法是一个距离为 R 的单位圆，然后转到垂直角，对 x 使用 cos，对 y 使用 sin。我通过正弦定律得到了一半三角形（P1，中点，P3）的距离，其中中点是 90 度。

Please give your advice on this, Thanks ~vzybilly~

# grails - Grails - 跨包的一对多表关系

> ID：11337467
> 
> 赞同：1
> 
> 时间：2012-07-05T03:16:30.817
> 
> 标签：grails, grails-domain-class

我有两个类，每个类都在不同的包中，它们之间存在一对多的关系。这是怎么做到的？我有：

```
package one
class History {
  String name
  static hasMany = [fielderror:FieldError]
}

package two
class FieldError {
  String fieldName
  static belongsTo = [history:History]
} 
```

如果它们在同一个包中，这将起作用，但它们不是。**包一**中的错误是：

> Groovy：在静态范围内发现了明显的变量“FieldError”，但不引用局部变量、静态字段或类。

所以我想我需要让**包一**知道**包二**，反之亦然。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:21:41.030

为另一个包中的任何类添加导入：

```
import one.FieldError 
```

# android - Android中系统偏好的任何监听器

> ID：11337474
> 
> 赞同：2
> 
> 时间：2012-07-05T03:17:49.653
> 
> 标签：android, preferences

我想在用户尝试进入首选项屏幕时捕获事件，以便我可以询问密码。我之所以尝试这个，是因为我正在为残疾人开发应用程序。我不希望他们直接接触系统设置，只是允许的助手。

是否有任何事件侦听器或接收器？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:28:52.607

我认为公共 API 中没有任何东西可以让你这样做。[Device Admin](http://developer.android.com/guide/topics/admin/device-admin.html)可能是最接近的东西，但我不认为它完全可以做到这一点。

如果您希望实现这一点（并确保它会有效），您必须稍微修改您设备上的操作系统。

*API 中可能*起作用的一种可能性是创建一个替代主屏幕，该主屏幕不显示菜单中的常用项目。如果你要走这条路，你可以“锁定”到你的活动中，只是让他们无法进入设置，除非使用密码或其他东西。但这将是很多工作，并且需要用户将您的应用程序设置为他们的默认主屏幕。即使在较新的设备上使用此功能，您也可能会遇到麻烦，因为通知下拉菜单中有一个设置按钮，我认为没有办法阻止，即使更换主屏幕也是如此。

# php - Preg模式发现

> ID：11337476
> 
> 赞同：0
> 
> 时间：2012-07-05T03:18:32.497
> 
> 标签：php, regex, preg-match

我想解析具有以下内容的 html 内容：

```
<td class="s3_40">12,909</td> 
```

我尝试了许多正则表达式来查找（12,909）之间的字符串，例如：`%<td class=\"s3_40\">(.*)</td>%` 但我没有找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:43:59.170

希望这可以帮助：

```
$str = '<td class="s3_40">12,909</td>';
if (preg_match('#<td class="s3_40">(.*)</td>#s',  $str, $matches)) {
    var_dump($matches[1]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:30:54.797

如果你必须用正则表达式来做。您可以尝试这样的模式：

```
/<td[^>]*>(.*?)<\/td>/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T09:38:33.587

尝试这样做，只需将 s3_41、s3_42 等添加到您需要的类中即可。

```
<?php
$s = '<td class="s3_40">12,909</td>';
$pat = '@<td class=".*(s3_40|s3_41).*".*?>(.*?)</td>@isU';
preg_match_all($pat,$s,$ms);
var_dump($ms); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T08:58:34.813

尝试这个

```
#(?<=(s3_40">))([^<]+)(?=(</td>))# 
```

# asp.net - 如何在 ASP.NET 中混合使用 WebForms 和 MVC

> ID：11337477
> 
> 赞同：24
> 
> 时间：2012-07-05T03:18:37.363
> 
> 标签：asp.net, asp.net-mvc, webforms

我有一个运行良好的现有 ASP.NET WebForms 3.0 应用程序。我将它升级到 ASP.NET 4，它仍然运行良好，但现在我想向它添加一些 ASP.NET MVC 页面。我不想重写应用程序。

有什么建议么？我可以混合它们吗？怎么工作呢？有适合我的教程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T03:21:23.900

看看 Scott Hanselman 关于这个主题的博客文章：

[将 ASP.NET MVC 3 集成到现有升级的 ASP.NET 4 Web 窗体应用程序中](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T04:21:42.437

您必须在 MVC 应用程序的 Global.asax 文件中提及这行代码。

```
routes.IgnoreRoute("{WebPage}.aspx/{*pathInfo}"); 
```

这会禁用扩展名为 .aspx 的文件的 MVC 路由

# javascript - 有什么方法可以改变这两种分配方法的优先级吗？

> ID：11337478
> 
> 赞同：1
> 
> 时间：2012-07-05T03:18:46.883
> 
> 标签：javascript

这是一道面试题，要求写一个`Man`类让下面的代码能正常运行：

```
var me =new  Man();

//method one:
me.attr("fullname", "tom");

//method two:
me.fullname = "jim";

console.info("my name is:" + me.attr("fullname"));

/*------[result is]------
my name is:tom
------------------*/ 
```

我的回答是：

```
var Man=function(){
};

Man.prototype.attr=function(attr,val){
    if(val){
        this[attr]=val;
    }
    else{
        return this[attr];
    }
} 
```

我的代码运行结果是：

```
/*------[result is]------
my name is:jim
------------------*/ 
```

谁能帮我？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:21:49.007

你可以制作第二本字典：

```
function Man() {
    this.dictionary = {};
}

Man.prototype.attr = function(attr, val) {
    if(arguments.length > 1) {
        this.dictionary[attr] = val;
    } else {
        return this.dictionary[attr];
    }
}; 
```

您可以使用封闭变量：

```
function Man() {
    var dictionary = {};

    this.attr = function(attr, val) {
        if(arguments.length > 1) {
            dictionary[attr] = val;
        } else {
            return dictionary[attr];
        }
    };
} 
```

您可以使用封闭`fullname`变量，并忽略除以下内容之外的所有内容`'fullname'`：

```
function Man() {
    var fullname;

    this.attr = function(attr, val) {
        if(attr === 'fullname') {
            if(arguments.length > 1) {
                fullname = val;
            } else {
                return fullname;
            }
        }
    };
} 
```

您也可以`"tom"`每次都返回，或者假装所有属性都是`"fullname"`，或两者兼而有之。您可以[在分配之前 ROT13 属性名称](http://jsfiddle.net/minitech/KP26g/)。您可以[添加下划线](http://jsfiddle.net/minitech/KP26g/1/)。您可以[创建一个属性，而不是丢弃以`"j"`](http://jsfiddle.net/minitech/KP26g/2/). 实际上，可能性是无限的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:24:09.307

使用属性来保存属性。

```
var Man=function(){
  this.attributes = {};
};

Man.prototype.attr=function(attr,val){
    if(val){
        this.attributes[attr] = val;
    }
    else{
        return this.attributes[attr];
    }
} 
```

# blackberry - 自定义编辑字段不稳定

> ID：11337483
> 
> 赞同：1
> 
> 时间：2012-07-05T03:20:29.447
> 
> 标签：blackberry, focus, blackberry-editfield

我建立了自定义编辑字段，因为我想更改背景颜色。

[一](http://desmond.imageshack.us/Himg3/scaled.php?server=3&filename=initialc.png&res=landing)、[二](http://desmond.imageshack.us/Himg829/scaled.php?server=829&filename=scrolling.png&res=landing)、[三](http://desmond.imageshack.us/Himg4/scaled.php?server=4&filename=completedw.png&res=landing)显示不稳定，有时对焦时显示，失焦时消失。

我想要第三张图像的结果，其中聚焦的位置也静态显示所有字段。

这是我的`Custom_EditField`：

```
public class Custom_EditField extends EditField {
private int width, row, color;
private boolean isfocus;

Custom_EditField(long style, int width, int row) {
    super(style);
    this.width = width;
    this.row = row;
}

public int getPreferredHeight() {
    return Font.getDefault().getHeight() * row;
}

public int getPreferredWidth() {
    return width;
}

protected void onFocus(int direction) {
    color = Color.GRAY;
    isfocus = true;
}

protected void onUnfocus() {
    color = Color.GOLD;
    isfocus = false;
}

protected void layout(int maxWidth, int maxHeight) {
    super.layout(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
    super.setExtent(maxWidth,
            Math.min(maxHeight, Font.getDefault().getHeight() * row));
}

protected void paint(Graphics graphics) {
    int rectHeight = getPreferredHeight();
    int rectWidth = getPreferredWidth();
    try {
        if (isfocus) {
            graphics.setBackgroundColor(color);
        } else {
            graphics.setBackgroundColor(color);
        }
        color = Color.BLACK;
        graphics.setColor(color);
        graphics.drawRect(0, 0, rectWidth, rectHeight);
        super.paint(graphics);
    } finally {
        graphics.setColor(color);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:45:44.270

我不是 100% 确定您要问的是哪个问题：

*   如何绘制自己的焦点背景颜色`EditField`，或
*   如何解决移动焦点时字段消失的问题

**1）**如果这是第二个问题（消失），那么我猜您遇到的问题与其他问题相同，`Custom_TopField` [按钮消失了](https://stackoverflow.com/a/11357574/119114)

因此，如果这些`Custom_EditField`对象是由扩展的管理器创建的`VerticalFieldManager`，但也实现`sublayout()`了自身以执行所有定位，那么请尝试我在另一个问题中建议的解决方案（不要扩展`VerticalFieldManager`，只需扩展`Manager`）。

**2）** *如果这不起作用*，则可能是您的`paint()`方法没有在应该触发的时候被触发。尝试`invalidate()`在你的焦点方法中添加一个调用，以及对超类方法的调用`onFocus()`和`onUnfocus()`：

```
protected void onFocus(int direction) { 
    color = Color.GRAY; 
    isfocus = true; 
    invalidate();
    super.onFocus(direction);
} 

protected void onUnfocus() { 
    color = Color.GOLD; 
    isfocus = false; 
    invalidate();
    super.onUnfocus();
} 
```

**3）**而且，您可能还需要实现这一点：

```
public boolean isFocusable() {
    return true;
} 
```

但是，首先，检查您的经理课程，以确保这与您的其他问题不同。

## 还 ...

在本课程中，您将编辑字段的高度基于行号。这真的是你想要的吗？第 0 行的大小为 0，之后的每一行都会越来越高。这真的是用户界面吗？通常，您会让所有行的编辑字段大小相同，并使用不同的**y offset**简单地布置它们。最有可能的是，这个类不需要知道`row`它被放置在哪个类上。该信息通常由管理器对象负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:32:48.857

```
protected EditField getEditField() {

    EditField edit_field = new EditField("", "", 10, EditField.NO_NEWLINE
            | BasicEditField.FIELD_VCENTER) {

        protected boolean navigationClick(int status, int time) {

        }

        protected void onFocus(int direction) {
            Set the boolean during focus
        }

        protected void onUnfocus() {

        }

        protected void paintBackground(Graphics graphics_paint) {
            if(that boolean is true)
                  {
                       Set your custom background during focus.
                  }else{
                       Set your custom background during unfocus.
                  }
        }

        protected void paint(Graphics graphics_paint) {
            int old_color = graphics_paint.getColor();
            try {
                if(that boolean is true)
                  {
                       Set your custom Font color during any event like focus and click.
                  }else{
                       Set your custom background Font color during any event like unfocus.
                  }
                super.paint(graphics_paint);
            } finally {
                graphics_paint.setColor(old_color);
            }
        }

        public void layout(int width, int height) {

        }
    }; 
```

# php - 无法在 PHP 中正确应用 foreach 循环

> ID：11337484
> 
> 赞同：0
> 
> 时间：2012-07-05T03:20:33.660
> 
> 标签：php, joomla

我想在每张幻灯片上发布两个帖子。但只有一张幻灯片。我是编程新手，请帮助我。

```
$widget_id  = $widget->id.'-'.uniqid();
    $settings   = $widget->settings;
    $navigation = array();
    $captions   = array();

    $i = 0;
?>

<div id="slideshow-<?php echo $widget_id; ?>" class="wk-slideshow wk-slideshow-revista-articles" data-widgetkit="slideshow" data-options='<?php echo json_encode($settings); ?>'>
    <div>
        <ul class="slides">

            <?php foreach ($widget->items as $key => $item) : ?>
            <?php
                $navigation[] = '<li><span></span></li>';
                $captions[]   = '<li>'.(isset($item['caption']) ? $item['caption']:"").'</li>';

                /* Lazy Loading */
                $item["content"] = ($i==$settings['index']) ? $item["content"] : $this['image']->prepareLazyload($item["content"]);
            ?>
            <li>
                <article class="wk-content clearfix"><?php echo $item['content']; ?></article>
            </li>
            <?php $i=$i+1;?>
            <?php endforeach; ?>
        </ul>
        <?php if ($settings['buttons']): ?><div class="next"></div><div class="prev"></div><?php endif; ?>
        <?php echo ($settings['navigation'] && count($navigation)) ? '<ul class="nav">'.implode('', $navigation).'</ul>' : '';?>
        <div class="caption"></div><ul class="captions"><?php echo implode('', $captions);?></ul>
    </div>
</div> 
```

[http://i.stack.imgur.com/sy1ih.png](http://i.stack.imgur.com/sy1ih.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:04:26.063

你错过了循环结束时`{`的`foreach`and 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:21:20.613

`$settings['index']`永远不会在循环内改变，但是`$i`确实如此。改成：`($i<2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T06:01:45.743

```
<?php foreach ($widget->items as $key => $item) { 

            $navigation[] = '<li><span></span></li>';
            $captions[]   = '<li>'.(isset($item['caption']) ? $item['caption']:"").'</li>';

            /* Lazy Loading */
            $item["content"] = ($i==$settings['index']) ? $item["content"] : $this['image']->prepareLazyload($item["content"]);
        ?>
        <li>
            <article class="wk-content clearfix"><?php echo $item['content']; ?></article>
        </li>
        <?php 
         $i=$i+1;
         }
         ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T06:21:20.750

您的 foreach 语法看起来不错。当嵌入 HTML 时，对于某些人来说，这种语法比传统的大括号更容易阅读。

我能问一下**$this**变量指的是什么吗？我在您的代码中的任何地方都没有看到这个实例化？它应该是**$item**吗？

# php - MySQL查询有什么区别

> ID：11337487
> 
> 赞同：2
> 
> 时间：2012-07-05T03:20:49.270
> 
> 标签：php, mysql, phpmyadmin

当我在 phpMyAdmin 中手动更新数据库时，这是它使用的代码：

```
UPDATE  `test`.`users` SET  `number` =  '12' WHERE  `users`.`id` =1; 
```

这是我手动编写查询时通常在 php 中使用的代码：

```
UPDATE `users` SET  `number` =  '12' WHERE `id` =1; 
```

有什么不同？更重要的是，哪个更好用，为什么？请回答原因，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T03:22:15.470

一个 phpMyAdmin 只包含数据库名和表名。

在 PHP 中，这通常是不需要的，因为您使用[`mysqli_select_db`](http://www.php.net/manual/en/mysqli.select-db.php)or指定数据库[`mysqli_connect`](http://www.php.net/manual/en/function.mysqli-connect.php)。

两者是等价的；唯一的区别是选择数据库的方式。在第一个中，数据库在查询中明确指定，在第二个中，数据库名称是隐含的，因为您使用[`mysqli_select_db`](http://www.php.net/manual/en/mysqli.select-db.php)or指定它[`mysqli_connect`](http://www.php.net/manual/en/function.mysqli-connect.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T03:24:31.357

phpMyAdmin 使用的一个是它添加了数据库的名称，这通常在我们的常规实践中不使用，但是当我们有多个数据库要连接并且在这些数据库中具有相同的表名时，这是一个非常好的主意

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:39:18.343

为了便于解释，

在您的第一条语句中，您只需在要显示的表和字段的一部分上包含一个**别名**

第二个是你的第一个陈述的反之亦然

但我指的是使用第一条语句，因为当您的查询出现多个连接时，它将难以阅读，因此我们需要使用别名，这是一个最佳实践

但是当您只查询一个表时，第二个查询语句很好

希望对你有帮助

少年

# java - 在sql语句中使用java变量

> ID：11337488
> 
> 赞同：2
> 
> 时间：2012-07-05T03:20:56.273
> 
> 标签：java, sql

我正在尝试构建一个网页以更好地学习 Java 和 SQL。我的问题是，Java 中有没有一种方法可以制作通用的 SQL 选择语句？例如：

```
SELECT var1 FROM var2 WHERE var3=var4 
```

或类似的东西。

`var`我的想法是用用户从网页中选择的项目填充s。我知道这可以在 PHP 中使用该`Post`方法完成，但我没有使用 PHP。另外，我读过Java中的Prepared Statement，但似乎只有在比较运算符之后使用时才有效；前任：

```
SELECT * FROM table Where attr = ? & 
```

另外，我知道我可以做硬编码版本，`"SELECT " + var1 + "FROM " + var2 + "WHERE attr = " + var3 + " "`但这似乎不是很通用并且容易出现很多错误。

*   Incase：我正在尝试使用 HTML 和 JSP 构建这个测试页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:49:02.103

你正在做的`?`是参数化查询。查询只能为值参数化，而不是表或列的名称。

每次运行查询时。数据库必须创建一个查询计划。如果您一次又一次地运行相同的查询，您可以通过创建一个`PreparedStatement`. 第一次执行`PreparedStatement`将生成查询计划。随后的执行将重用相同的计划。

此处的相同查询意味着，除了 where 子句、表达式等中使用的值外，它在所有方面都是相同的。

如果您更改 Column 或 Table 名称或修改查询的结构，则它是一个不同的查询，需要不同的查询计划。PreparedStement 在这种情况下没有用，您应该坚持使用您谈到的硬编码版本。由于这个原因，如果您尝试在`PreparedStement`.

话说回来。不建议对查询采用这种通用方法。如果您的查询如此简单，您可以从 ORM 工具中受益。您甚至不必维护一行 SQL。对于复杂的查询，您可以选择使用 ORM 特定的查询语言或 JPQL 或 Native SQL。寻找 JPA + Hibernate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:35:57.313

JDBC 不允许您的特定用途。创建准备好的语句时，您需要对表名进行硬编码。如果你真的想这样做，我建议你使用字符串连接来创建 SQL 语句，然后创建一个`PreparedStatement`带参数来处理 where 部分。如果您想知道为什么要`PreparedStatements`在特定的解决方案中打扰，那是为了避免 SQL 注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T05:09:19.903

您可以使用它`PreparedStatement`来实现您的目标。

例如 -

```
String query = "SELECT * FROM table Where attr = ?";
PreparedStatement pt = con.prepareStatement(query);
pt.setString(1, attribete);
pt.executeUpdate(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T05:28:19.880

在任何 SQL 打包类或其他类中都没有这样的直接规定，可以使用单一方法在查询字符串中替换表、列名以及查询参数值。

您需要同时依赖[`PreparedStatement`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)任何一个 String 方法[`replace(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)来[`replaceFirst(...)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceFirst%28java.lang.String,%20java.lang.String%29)实现您的要求。

```
String sql = "Select $1, $2 from $3 where $4=? and $5=?";
sql = sql.replaceFirst( "$1", "col1_name" );
sql = sql.replaceFirst( "$2", "col2_name" );
sql = sql.replaceFirst( "$3", "table_name" );
sql = sql.replaceFirst( "$4", "col4_name" );
sql = sql.replaceFirst( "$5", "col5_name" );
// .. and so on

PreparedStatement pst = con.prepareStatement( sql );
// use relevant set methods to set the query parametrs.
pst.setXXX( 1, value_for_first_query_parameter ); // from a variable or literal
pst.setXXX( 2, value_for_second_query_parameter); // from a variable or literal
// ... and so on 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-05T03:55:36.680

如果您使用的是 JDBC，可以试试这个

```
PreparedStatement statement = connection.prepareStatement("SELECT ? FROM ? WHERE ?=? "); 
```

然后

```
statement.setString(1, "column_name");
statement.setString(2, "table_name");
statement.setString(3, "column_name");
statement.setBigDecimal(4, 123); 
```

如果您使用的是其他 ORM，如 Hibernate 或 JPA，我相信也有办法。

# c++ - C++ stl unordered_map 实现，参考有效性

> ID：11337494
> 
> 赞同：12
> 
> 时间：2012-07-05T03:22:01.623
> 
> 标签：c++, stl, map, reference, unordered-map

对于`std::map`和`std::tr1::unordered_map`，我从标准中看到：

> 对 unordered_map 容器中元素的引用在所有情况下都保持有效，即使在重新散列之后也是如此。

他们是如何做到的（*实施方面*）？他们是否将所有条目维护为一种链表，然后哈希表只存储指向元素的指针？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-05T03:45:19.023

是的，涉及到链表，尽管不像你建议的那样。

2011 年标准说（23.2.5 第 8 段），“无序关联容器的元素被组织成桶。具有相同哈希码的键出现在同一个桶中。”

在每个桶中，元素都在一个链表中（每个桶有一个单独的列表，而不是整个容器的一个大列表）。当容器被重新散列时，元素将被分配给新的桶，但指向每个元素的指针仍然有效。每个新桶中的链表由指向该桶中现有元素的指针组装而成。

迭代器通过 rehash 无效，因为迭代器需要同时保存指向元素及其存储桶的指针（因此它可以从一个存储桶的最后一个元素步进到下一个存储桶的第一个元素）。元素指针仍然有效，因此现有的指针和对元素的引用仍然有效，但桶指针被 rehash 无效，因此迭代器不可用。

（这也是为什么无序容器只支持前向迭代器，而不是有序关联容器支持的双向迭代器。每个桶的元素都在一个单链表中，所以你不能后退。）

# c++ - Linux g++ 下的 MFC 头文件：在 '<' 标记之前需要 '{'

> ID：11337497
> 
> 赞同：0
> 
> 时间：2012-07-05T03:22:36.880
> 
> 标签：c++, linux, mfc, porting

我有一个基于 MFC 的旧 C++ 项目，我正在尝试在 Linux（Centos 6.2）上的 eclipse 中使用 g++ 进行编译。我从头文件中收到以下错误：

```
RawData.h:54: error: expected template-name before ‘&lt;’ token
RawData.h:54: error: expected ‘{’ before ‘&lt;’ token
RawData.h:54: error: expected unqualified-id before ‘&lt;’ token 
```

这是头文件中存在问题的部分（从第 54 行开始）：

```
class CRawDayData: public CArray<CRawQHData*,CRawQHData*>
{
public:
    CRawDayData();
    virtual ~CRawDayData();

public:
    tm m_tmDate;

}; 
```

我认为这个问题与 CArray 有关，因为我在 Linux 上并且没有使用 MFC 的 afx 东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:06:16.517

如果这是你得到的唯一错误，我建议用它的 STL 等效 std::vector 替换 CArray。如果 MFC 或 windows API 被广泛使用，最好尝试针对 Winelib 编译它。

参考：[在 Linux 上运行 MFC 程序](https://stackoverflow.com/questions/6945773/run-mfc-program-on-linux)

使用 STL，你可以这样写：

```
#include<vector>

class CRawDayData: public vector<CRawQHData*>
{
public:
    CRawDayData();
    virtual ~CRawDayData();

public:
    tm m_tmDate;

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:29:01.513

所有 MFC 的东西都只是 windows，所以它们在 Linux 上不可用。您必须转换为使用一些跨平台或特定于 linux 的库，例如 STL、wxWidgets 等。

# python - 如何将图像从 np.uint16 转换为 np.uint8？

> ID：11337499
> 
> 赞同：26
> 
> 时间：2012-07-05T03:23:36.567
> 
> 标签：python, opencv, numpy

我正在创建一个图像：

```
image = np.empty(shape=(height, width, 1), dtype = np.uint16) 
```

之后，我将图像转换为 BGR 模型：

```
image = cv2.cvtColor(image, cv2.COLOR_GRAY2BGR) 
```

我想现在将图像转换为 a`dtype = np.uint8`以便将该图像与`cv2.threshold()`功能一起使用。我的意思是，我想将图像转换为`CV_8UC1`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-05T15:04:44.803

你可以使用`cv2.convertScaleAbs`这个问题。请参阅[文档。](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=convertscale#convertscaleabs)

查看下面的命令终端演示：

```
>>> img = np.empty((100,100,1),dtype = np.uint16)
>>> image = cv2.cvtColor(img,cv2.COLOR_GRAY2BGR)

>>> cvuint8 = cv2.convertScaleAbs(image)

>>> cvuint8.dtype
dtype('uint8') 
```

希望能帮助到你！！！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-14T11:35:18.587

我建议你使用这个：

```
outputImg8U = cv2.convertScaleAbs(inputImg16U, alpha=(255.0/65535.0)) 
```

这将输出一个 uint8 图像并相对于 0-65535 之间的先前值分配 0-255 之间的值

```
exemple :
pixel with value == 65535 will output with value 255 
pixel with value == 1300 will output with value 5 etc... 
```

# windows - LibreOffice - 未找到已注册的 IFilter - Windows 7 x64

> ID：11337507
> 
> 赞同：1
> 
> 时间：2012-07-05T03:24:42.713
> 
> 标签：windows, search, libreoffice, ifilter, odt

我无法索引LibreOffice 文件的**内容**。.odt 文件等文件无法在 Windows Search 上建立索引。

错误显示“未找到已注册的 IFilter”

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:30:05.693

您安装了 libreoffice 安装程序所需的所有可选组件？在可选功能中，您可以选择一些典型安装中没有的功能。

这是视频教程的快速链接，一步一步地描述[如何安装 LibreOffice](http://usefultutorial.com/free-stuff/249-libreoffice-a-great-free-alternative-to-microsoft-office)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:49:03.890

IFilter 用于将文件格式转换为文本以进行搜索。问题是它们需要与想要加载它们的应用程序具有相同的“位数”。因此，如果您有一个想要使用 IFilter 的 64 位应用程序，则需要安装 64 位 IFilter。

你安装了 64 位的 Libre Office 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T23:15:07.943

LibreOffice 为 64 位提供 IFilter。今天我在 W7_64 上更新到 3.6.3.2。该更新安装了它的过滤器，但它们不起作用。[我从IFilterShop](http://www.ifiltershop.com/staroffice-openoffice-ifilter.html "过滤器商店")恢复到过滤器。这个确实有效（需要阅读 Vista 和 W7 的自述文件）。它免费用于非商业用途。

# iphone - 如何隐藏导航栏？

> ID：11337508
> 
> 赞同：-4
> 
> 时间：2012-07-05T03:24:52.433
> 
> 标签：iphone, objective-c, navigationbar

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];
    self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];
    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    return YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:50:59.143

设置`navigationBarHidden`属性以隐藏导航栏。有关参考，请参阅[UINavigationController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)文档。

将以下语句添加到您的`didFinishLaunchingWithOptions`方法中。

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:52:55.793

试试这个来删除导航栏。

> ```
> (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
> { 
>     self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease]; 
>    // Override point for customization after application launch. 
>    MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease]; 
>    self.window.rootViewController = masterViewController; 
>    [self.window makeKeyAndVisible]; return YES;
> } 
> ```

# vba - 求和公式 VBA

> ID：11337510
> 
> 赞同：1
> 
> 时间：2012-07-05T03:25:35.990
> 
> 标签：vba, excel, formula

我正在尝试计算 vba 中更改单元格范围的总和。不幸的是，单元格值是变量。我似乎无法使以下公式起作用。

```
Private Sub calcOverheadRate(startCell As Integer, endCell As Integer)
     Total = endCell + 1
     Range("D" & Total).Formula = "=SUM("D" & startCell & ":" & "D" & endCell)"
End Sub 
```

我得到编译错误：“预期：语句结束

为了解决这个问题，我将功能更改为，

```
Private Sub calcOverheadRate(startCell As Integer, endCell As Integer)

    Dim start As String
    Dim endC As String

    start = "D" & CStr(startCell)
    endC = "D" & CStr(endCell)

    Total = endCell + 1

    Range("D" & Total).Formula = "=SUM(start:endC)"

End Sub 
```

该函数编译得很好，当我运行它时，单元格中的值是“#NAME”，它引用的`SUM(start:endC)`不是`SUM(D5:D23)`......

任何有关如何解决此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T13:24:56.817

引号是问题：
`Range("D" & Total).Formula = "=SUM(" & startCell & ":" & endCell & ")"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:36:01.870

我已经发现问题 & 需要在字符串文字的引号内

```
Range("D" & Total).Formula = "=SUM(" & start & ":" & endC & ")" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T03:55:34.377

你试试用桌子怎么样？

![在此处输入图像描述](../Images/49afec81dfb801dd54601191646c4cea.png)

这是一个关于如何在 Excel 中制作表格的 1 分钟视频：

[http://www.screenr.com/VvZ8](http://www.screenr.com/VvZ8)

# http-daemon - 如何实现HttpDaemon

> ID：11337512
> 
> 赞同：0
> 
> 时间：2012-07-05T03:26:05.987
> 
> 标签：http-daemon

我是一名 Java 程序员。我必须实现 HttpDaemon。我认为它会用 'C' 或 'Perl' 编写。请帮助我了解它是什么以及如何实施它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:27:53.463

1.  阅读并理解所有相关规范。
2.  编码吧。开始`java.net.ServerSocket`。

第一步是艰难的！

说真的，有许多用 Java 编写的工业级 Web 服务器：[Tomcat](http://tomcat.apache.org/)、[Jigsaw](http://www.w3.org/Jigsaw/)等。[这里有一个很长的列表。](http://java-source.net/open-source/web-servers)

您可能最感兴趣的是[Jetty](http://www.eclipse.org/jetty/)，它旨在嵌入到其他应用程序中。使用 Jetty，而不是自己编写。做好工作是一项艰巨的任务，为什么要重新发明轮子？

# java - 在Android中的按钮内左对齐文本

> ID：11337513
> 
> 赞同：65
> 
> 时间：2012-07-05T03:26:15.467
> 
> 标签：java, android, xml

我想将按钮的文本向左对齐，我不知道该怎么做，请帮助我如何在 xml 文件中执行此操作。我没有找到这个属性。

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-07-05T04:56:19.647

也许这会帮助你：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="left|center_vertical"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-08-22T19:31:46.873

你可能想要两者

```
 android:gravity="left|center_vertical" 
```

然后是一点空间

```
 android:paddingLeft="5dp" 
```

以防止文本碰到按钮的左边缘。

（根据您的按钮艺术调整 padding_left 的数量。）

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-07-05T03:36:56.630

`android:gravity="left"`

希望这会有所帮助

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-14T22:07:09.537

```
android:gravity="left|center_vertical" 
```

它会起作用，但现在您可能需要根据您的要求添加一些填充。

```
 android:paddingLeft="10dp" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-10T23:01:30.553

这是对我有用的上面的组合，左侧的图标和左对齐的文本与一些填充

```
<Button
    android:id="@+id/butt_labs"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:drawableLeft="@drawable/dt_labjob"
    android:paddingLeft="10dip"
    android:gravity="left|center_vertical"
    android:text="@string/l_labs" /> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-05T11:50:09.640

您可能需要`android:gravity`AND`android:layout_gravity`来将文本与“左”对齐。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T20:49:22.923

正如其他人提到的那样，`"left|center_vertical"`有效，但我发现如果没有明确说明左或右，大多数属性默认为左。

因此，放置以下内容应该足以让您的文本左对齐和垂直居中：

```
android:gravity="center_vertical" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-12T18:04:34.377

如果您必须支持许多不同的语言，最好使用`start`或`end`定位文本。这样，对于*从右到左 (RTL) 的语言*，它仍然可以工作。

**例子：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="start|center_vertical"
        android:text="Button" />

</LinearLayout> 
```

# macos - Apple Script 将每个活动工作表缩放到所需的缩放级别

> ID：11337517
> 
> 赞同：0
> 
> 时间：2012-07-05T03:26:45.530
> 
> 标签：macos, excel, applescript, zooming

我有一个包含许多工作表的工作簿。每次切换到工作表时，我都必须将其缩放到 150 以使文本正确可见。我希望苹果脚本为我做这件事。我使用带有 Excel 11 的 Mac Book Air。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T09:55:10.930

尝试：

```
tell application "Microsoft Excel"
    activate
    set zoom of front window to 150
end tell 
```

# iphone - 在为原始数据类型堆栈编写方法时使用“id”？

> ID：11337521
> 
> 赞同：0
> 
> 时间：2012-07-05T03:28:29.117
> 
> 标签：iphone, objective-c, ios, xcode

我正在编写一个简单的计算器应用程序。我想实现一个堆栈来存储用户输入的运算符。最初，我想使用 chars，但是当我尝试将 removelastobject 和 last 对象用于我的 pop 方法并使用 addobject 用于我的 push 方法时遇到了一些问题。

相反，我使用 id 作为类型。这是错误的还是有更好的方法来解决这个问题？

在我的 .h 中：

```
//Brain.h
-(void)pushOperator:(id)op; 
```

在我的 .m 中：

```
 //Brain.m
 #import Brain.h
 @interface CalculatorBrain()
 @property (nonatomic,strong) NSMutableArray *operandStack;
 @property (nonatomic,strong) NSMutableArray *operatorStack;//This is the one I'm asking about
 @end

 @implementation CalculatorBrain

 @synthesize operatorStack = _operatorStack;

 - (NSMutableArray *) operatorStack
 {
    if (! _operatorStack)
     {
         _operatorStack = [[NSMutableArray alloc] init];
     }
     return _operatorStack;
 }

-(void)pushOperator:(id)op
{
    [self.operatorStack addObject:op];
}

-(id)popOperator
{
    NSObject *op = [self.operatorStack lastObject];
    if (op)
    {
        [self.operatorStack removeLastObject];
    }
    return op;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:23:19.297

据我了解，您的运算符不是对象类型，而是基本数据类型。您可以传递一个 NSValue，然后可以将其声明为 id，但我很确定您会更适合特定的原始值。

如果您将方法设置为接收 char 指针，那么您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:53:55.393

使用 id 可以，但我认为您可能希望使用抽象类并从中派生您的运算符。然后你可以使用

```
-(void)pushOperator:(MyOperator)op; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:31:15.260

NSArray 只存储对象；您不能将原始类型存储在一个中。如果您只想存储值，可以将它们包装在 NSNumber 或 NSValue 的实例中。

# asp.net-mvc - ASP MVC 多对多关系 - 从关联表中检索数据

> ID：11337523
> 
> 赞同：2
> 
> 时间：2012-07-05T03:28:34.710
> 
> 标签：asp.net-mvc, entity-framework, many-to-many, code-first

我正在尝试首先使用 EF 代码创建具有多对多关系的数据库。

```
public class Item
{
    public int ItemId { get; set; }
    public String Description { get; set; }
    public ICollection<Tag> Tags { get; set; }

    public Item()
    {
        Tags = new HashSet<Tag>();
    }
}

public class Tag
{
    public int TagId { get; set; }
    public String Text { get; set; }
    public ICollection<Item> Presentations { get; set; }

    public Tag()
    {
        Presentations = new HashSet<Item>();
    }
}

public class ItemsEntities : DbContext
{
    public DbSet<Item> Items { get; set; }
    public DbSet<Tag> Tags { get; set; }
} 
```

之后，我将一个项目添加到数据库中

```
var tag = new Tag { Text = "tag1" };
var item = new Item
{
    Description = "description1",
    Tags = new List<Tag>()
};
item.Tags.Add(tag);
using (var db = new ItemsEntities())
{
    db.Items.Add(item);
    db.SaveChanges();
} 
```

问题是我无法输出带有相关标签的项目。控制器如下所示：

```
public ActionResult Index()
{
    ItemsEntities db = new ItemsEntities();
    return View(db.Items.ToList());
} 
```

并且查看页面有以下代码：

```
@foreach (var item in Model) 
{
   <tr>
    <td>
        @Html.DisplayFor(model => item.Description)
    </td>
    <td>
        @foreach (var tag in item.Tags)
        {
            @tag.Text
        }
    </td>
</tr>
} 
```

我希望该表包含“description1”和“tag1”，但我只得到“description1”。我真的不明白问题出在哪里。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:33:26.680

您的导航属性需要被标记`virtual`。

```
public class Item
{
    public int ItemId { get; set; }
    public String Description { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }

    public Item()
    {
        Tags = new HashSet<Tag>();
    }
}

public class Tag
{
    public int TagId { get; set; }
    public String Text { get; set; }
    public virtual ICollection<Item> Presentations { get; set; }

    public Tag()
    {
        Presentations = new HashSet<Item>();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:00:38.687

为了使您的代码正常工作，您可以按照`virtual`@danludwig 的说明标记您的集合属性。通过将集合属性标记为`virtual`EF Code First 将在迭代视图中的项目时延迟加载这些属性。使用这种方法会遇到 SELECT N+1 问题。让我们检查您的视图代码：

```
@foreach (var item in Model) 
{
   <tr>
     <td>
       @Html.DisplayFor(model => item.Description)
     </td>
     <td>
       @foreach (var tag in item.Tags)
       {
         @tag.Text
       }
     </td>
   </tr>
} 
```

在此`foreach`循环中，您将遍历模型中使用 EF 数据上下文选择的所有项目。

```
db.Items.ToList() 
```

这是您的第一个选择。但是在您上面的视图中，每次访问项目的`Tags`属性时都会执行另一个选择。重要的是**每个项目**。这意味着如果您有 100 个`Items`in `db.Items` `DbSet`，您将执行 101 个选择。这对大多数系统来说是不可接受的。

更好的方法是为每个项目预先选择标签。一种方法是使用 [`Include`](http://www.thomaslevesque.com/2010/10/03/entity-framework-using-include-with-lambda-expressions/)或选择与项目相关的标签到专用对象中。

```
public class ItemWithTags 
{
    public Item Item { get;set; }
    public IEnumerable<Tag> Tags { get;set; }
}

public ActionResult Index()
{
    ItemsEntities db = new ItemsEntities();

    var itemsWithTags = db.Items.Select(item => new ItemWithTags() { Item = item, Tags = item.Tags});
    return View(itemsWithTags.ToList());
} 
```

在您的视图中，您可以遍历`itemsWithTags`集合、访问项目的属性以及`Tags`访问`ItemWithTags`.

您的代码的另一个问题是，**ItemsEntities** `DbContext`在您的代码中打开但从未关闭。您可以使用 VS MVC 模板生成一个控制器来`DbContext`正确处理打开和关闭！

您可以使用 MVC Mini Profiler 之类的工具来检查针对数据库执行的命令。这个[Stackoverflow 问题](https://stackoverflow.com/questions/6550046/using-mvc-mini-profiler-database-profiling-with-entity-framework-code-first)展示了如何使用 EF Code First 设置 MVC Mini Profiler。

# c++ - C++11 中的高效算术运算符重载

> ID：11337528
> 
> 赞同：2
> 
> 时间：2012-07-05T03:29:13.163
> 
> 标签：c++, c++11, operator-overloading, rvalue-reference, move-semantics

我有一个具有许多成员的 POD 结构，我想知道 C++11 中实现其算术运算符的最有效方法。

该结构旨在代替数学上下文中的原语；例如：

```
template<typename Double>
Double calcSomething(const Double& d0, const Double& d1, const Double& d2)
{
    return d0*d1 + 3*d2 - 6;
} 
```

where`Double`要么只是一个 normal `double`，要么是一个带有所有相关重载运算符的 POD 结构：

```
struct MyDouble
{
    MyDouble(double a, double b) : _a(a), _b(b) {}
    double _a;
    double _b;
};
MyDouble operator+(const MyDouble& d0, const MyDouble& d1) 
{
    return MyDouble(d0._a + d1._a, d0._b + d1._b);
} 
```

使用移动构造函数和右值引用在 C++11 中实现这一点是否有一种非常好的、有效的方法？请记住，这`MyDouble`可能是一个大型 POD 结构（即不仅仅是两个双打）。

我想继续讨论没有指向堆分配内存的结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:25:02.873

如果结构不*拥有*任何其他对象或资源，则移动语义和复制语义是相同的。即使是移动构造函数或移动赋值运算符也需要将所有数据成员复制到目标对象。它只是不必执行*深层*复制，即拥有的子对象被简单地转移到目标对象，而不是被复制。

如果您的结构确实很大，您可以创建一个包含指向堆分配实例的指针的持有者类型（最好使用 scoped_ptr）。然后，您可以支持移动该持有人类型 - 实际上，如果您使用 scoped_ptr 管理实际实例，我认为您将自动获得移动支持。

# google-app-engine - appengine dev_appserver 时间异常

> ID：11337533
> 
> 赞同：0
> 
> 时间：2012-07-05T03:31:14.900
> 
> 标签：google-app-engine, go

我是 Google AppEngine & to Go & to Web stacks 的新手 - 所以很可能我在这里做错了，但我想不通:)

我正在尝试在 Go 中编写一个简单的时钟应用程序，其中服务器推送到客户端并且 JS 处理程序更新 HTML 元素。我正在使用 TaskQueue api 重新安排服务器端更新，并且我已将默认队列频率更改为每秒一次。服务器发送一个有效负载字符串，其中包含任务 URL 被命中的次数和当前时间。正如预期的那样，命中计数以每秒 1 次的速度更新 - 但时间戳几乎没有变化。我在 dev_appserver 控制台中看到的日志输出看起来是正确的

```
INFO     2012-07-05 03:04:31,955 dev_appserver.py:2952] "POST /update HTTP/1.1" 200 -
INFO     2012-07-05 03:04:31,985 dev_appserver.py:2952] "POST /update HTTP/1.1" 200 -
INFO     2012-07-05 03:04:32,015 dev_appserver.py:2952] "POST /update HTTP/1.1" 200 -
INFO     2012-07-05 03:04:32,043 dev_appserver.py:2952] "POST /update HTTP/1.1" 200 - 
```

我在下面粘贴了我的代码（pastebin 更好吗？）。

干杯! 布拉德

```
package clock

import (
    "fmt"
    "appengine"
    "appengine/channel"
    "appengine/datastore"
    "appengine/taskqueue"
    "html/template"
    "net/http"
    "time"
//  "appengine/user"
)

type Greeting struct {
    Author  string
    Content string
    Date    time.Time
}

func init() {
    http.HandleFunc("/", root)
    http.HandleFunc("/update", update)
}

type TemplateFiller struct {
    Time      string
    Token     string
}

var clientId string = "clockclient"

func root(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)
    q := datastore.NewQuery("Greeting").Order("-Date").Limit(10)
    greetings := make([]Greeting, 0, 10)
    if _, err := q.GetAll(c, &greetings); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
        return
    }

    token, _ := channel.Create(c, clientId);
    tf := TemplateFiller{time.Now().String(), token}

    if err := guestbookTemplate.Execute(w, tf); err != nil {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }

    reschedule(c)
}

func reschedule(c appengine.Context) {
    t := taskqueue.NewPOSTTask("/update", map[string][]string{"token": {clientId}})
        if _, err := taskqueue.Add(c, t, ""); err != nil {
            return
        }
}

var hits int = 0

func update(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)
    channel.Send(c, clientId, fmt.Sprintln(hits) + time.Now().Format(time.RFC3339))
    hits = hits + 1
    //channel.Send(c, clientId, time.Now().Format(time.RFC3339))
    reschedule(c)
}

var guestbookTemplate = template.Must(template.New("").Parse(guestbookTemplateHTML))

const guestbookTemplateHTML = `
<html>
  <script type="text/javascript" src="/_ah/channel/jsapi"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <body>
<div id="timediv">No time</div>

<script type="text/javascript">
$(document).ready(function(){

   onMessage = function(msg) {
      $("#timediv").html(msg.data);
   }

    channel = new goog.appengine.Channel('{{.Token}}');
    socket = channel.open();
    //socket.onopen = onOpened;
    socket.onmessage = onMessage;
    //socket.onerror = onError;
    //socket.onclose = onClose;
 });

</script>

  </body>
</html>
` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:07:48.787

1.  dev_server 队列和计时的行为与生产服务器的行为完全不同（计时）。
2.  依靠队列为您提供一个常量和稳定的计时器中断是一个非常糟糕的主意。

# php - 使用外部链接 PHP 的 readfile() 进行可恢复下载

> ID：11337534
> 
> 赞同：3
> 
> 时间：2012-07-05T03:31:18.190
> 
> 标签：php, readfile, resume

我有这个代码：

```
if  (isset($_GET['file']) && isset($_GET['name']))
{

    $ch = curl_init($file);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_HEADER, true);

    $data = curl_exec($ch);
    curl_close($ch);

    if (preg_match('/Content-Length: (\d+)/', $data, $matches)) 
    {
        // Contains file size in bytes
        $contentLength = (int)$matches[1];
    }

    header("Content-type: application/x-file-to-save");
    header("Content-Disposition: attachment; filename=".$_REQUEST['name']);
    header('Content-Length: ' . $contentLength);
    header('Content-Transfer-Encoding: binary');
    header('Accept-Ranges: bytes');
    header('Connection: Keep-Alive');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0', false);
    header('Cache-Control: private', false);

    readfile($file);
} 
```

问题是 $file 位于不同的服务器上。如何启用恢复此下载？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:44:22.990

修改你的卷曲以也拉入身体（删除 NOBODY 选项）

然后，您可以将返回的内容 ($data) 拆分为标题和正文 - 拆分是第一个空行（连续查找两个回车 - 上面的内容是标题，下面的任何内容都是正文）。将它们放入变量 $header 和 $body 中。

在 $header 上运行 preg_match。

要输出其余部分，只需“echo $body”或 substr($body, $startpos) 即可恢复下载。

* * *

可恢复下载：如果文件很大，那么您可能希望在本地缓存它。（即保存“$body”到本地文件，然后在本地文件上使用readfile。然后您可以通过打开文件（fopen）并转到正确的位置（fseek）并读取（fread）来处理可恢复下载/从那里回显（回显）其余部分。一旦找到起点，fpassthru 也应该这样做。

此外，如果您试图将其他人的内容作为自己的内容传递，请先获得许可；）（否则为什么不简单地将用户引导到另一个 URL 并为自己节省进出带宽）

# javascript - 如何在客户端 javascript 中区分 WebView 和本机浏览器？

> ID：11337535
> 
> 赞同：2
> 
> 时间：2012-07-05T03:31:28.347
> 
> 标签：javascript, android, ios

我有一个 Web 应用程序，我想做这样的事情。

```
<script type="text/javascript">
if (is_android_webview()) {
  // do something specific operations for android WebView
} else if (is_iphone_webview()) {
  // do something specific operations for iPhone UIWebView
} else {
  // do something
}
</script> 
```

可能吗？

# google-maps - 谷歌地图周围有灰色边框/填充

> ID：11337536
> 
> 赞同：1
> 
> 时间：2012-07-05T03:31:43.867
> 
> 标签：google-maps

根据下面的截图，我在谷歌地图周围有一个灰色的边框/填充，有人知道如何删除它吗？

谢谢

![在此处输入图像描述](../Images/042019238c86631df66070413149fa15.png)

这是我的代码：

```
var map;
  function initialize(canvas,lat,lng) {
    var myOptions = {
            zoom: 16,
            center: new google.maps.LatLng(lat,lng),
            disableDefaultUI: true,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            panControl: false,
            zoomControl: true,
            zoomControlOptions: {
                style: google.maps.ZoomControlStyle.SMALL,
                position: google.maps.ControlPosition.LEFT_TOP
            },
            scaleControl: false,
            streetViewControl: false,
            scrollwheel: false
    };
    map = new google.maps.Map(document.getElementById(canvas),myOptions);
  } 
```

我有 3 页嵌入谷歌地图，我添加了下面的代码来调用谷歌地图

```
$(document).ready(function() {
        initialize("causewayBayMapCanvas","22.281001", "114.186375");
}); 
```

**更新：**

```
<div style="width:300px; height:200px; border: 1px solid #0051B9">
            <div id="<?php echo $mapId;?>" class="map rounded"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:44:32.663

看起来像一个零大小的 div 问题。您没有提供设置地图 div 大小的代码。您需要确保在调用初始化函数时定义了大小。如果您使用百分比高度和宽度，请参阅 Mike Williams 的此 (v2) 教程，该教程解决了地图[的百分比大小：基础知识 - 第 20 部分使用地图 div 的百分比高度](http://econym.org.uk/gmap/basic19.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T15:11:43.120

我以前也遇到过这个问题。

我修复的方法是在初始化地图后使用以下代码调整地图大小：

google.maps.event.trigger(map, 'resize');

如果您的地图显示在多个页面上，您可能需要在用户访问该页面时执行此操作。

# android - GridView 不在 android 中显示内容

> ID：11337540
> 
> 赞同：1
> 
> 时间：2012-07-05T03:32:21.610
> 
> 标签：android, android-gridview

我正在尝试使用 GridView 显示图像。这是我第一次使用 GridView，所以我使用[这里](http://www.technotalkative.com/android-gridview-example/)的示例并将其实现到我的（我已经尝试了其中包含的示例，它的工作原理）。

但是，我检查了很多次，LogCat 没有错误，没有强制关闭，图像没有显示。我不知道哪里错了。

这是我的代码：

选择图片.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/bg_inner">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/book_inner"
            android:layout_marginTop="50dp"
        />

        <ImageButton
            android:id="@+id/homeBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/home_btn"
            android:background="@null"
        />

        <ImageView
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:src="@drawable/bg_arrow_btn"
            android:layout_alignParentRight="true"    
        />

        <ImageButton
            android:id="@+id/nextBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/right_arrow"
            android:background="@null"
            android:layout_alignParentRight="true"
            android:layout_marginTop="5dp"
            android:layout_marginRight="7dp"
            android:layout_marginLeft="7dp"
        />

        <ImageButton
            android:id="@+id/prevBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/left_arrow"
            android:background="@null"
            android:layout_toLeftOf="@+id/nextBtn"
            android:layout_marginTop="5dp"
        />

        <GridView
            android:id="@+id/gridView1"
            android:numColumns="3"
            android:gravity="center"
            android:columnWidth="30dp"
            android:stretchMode="columnWidth"
            android:layout_width="300dp"
            android:layout_height="200dp"
            android:layout_marginLeft="60dp"
            android:layout_marginTop="70dp"
        >

        </GridView>
</RelativeLayout> 
```

动物按钮.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/grid_item_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true">
</ImageView>
<TextView 
    android:text="TextView" 
    android:layout_height="wrap_content"
    android:id="@+id/textView1" 
    android:layout_width="wrap_content"
    android:layout_centerHorizontal="true"
    android:textSize="18sp"
    android:visibility="gone">      
</TextView> 
```

ImageAdapter.java

```
 public class ImageAdapter extends BaseAdapter{

    private Activity activity;
    private ArrayList<String> listNm;
    private ArrayList<Integer> listAnim;

    public ImageAdapter(Activity activity,ArrayList<String> listName, ArrayList<Integer> listImage) {
        super();
        this.listNm = listName;
        this.listAnim = listImage;
        this.activity = activity;
    }

    public static class ViewHolder
    {
        public ImageView imgViewAnim;
        public TextView txtViewAnim;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder view;
        LayoutInflater inflator = activity.getLayoutInflater();

        if(convertView==null)
        {
            view = new ViewHolder();
            convertView = inflator.inflate(R.layout.animalbutton, null);

            view.txtViewAnim = (TextView) convertView.findViewById(R.id.textView1);
            view.imgViewAnim = (ImageView) convertView.findViewById(R.id.grid_item_image);

            convertView.setTag(view);
        }
        else
        {
            view = (ViewHolder) convertView.getTag();
        }

        view.txtViewAnim.setText(listNm.get(position));
        view.imgViewAnim.setImageResource(listAnim.get(position));

        return convertView;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public String getItem(int position) {
        // TODO Auto-generated method stub
        return listNm.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

选择pic.java

```
 public class choosepic extends Activity {
    /** Called when the activity is first created. */

    ImageAdapter mAdapter;
    GridView gridView;
    static final String[] animal = new String[] { 
        "cat", "cow","croc", "duck", "elephant", "giraffe", "lion", "moose", "mouse"};

    private ArrayList<String> listNm;
    private ArrayList<Integer> listAnim;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.choosepic);

        gridView = (GridView) findViewById(R.id.gridView1);
        prepare_list1();
        mAdapter = new ImageAdapter(this,listNm, listAnim);
        gridView.setAdapter(mAdapter);

        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {
                Toast.makeText(getApplicationContext(), mAdapter.getItem(position), Toast.LENGTH_SHORT).show();

            }
        });
    }

    public void prepare_list1(){
        listNm = new ArrayList<String>();
        listAnim = new ArrayList<Integer>();
        for (int i = 0; i < animal.length; i++) {
            listNm.add(animal[i]);
            listAnim.add(getResources().getIdentifier("anim_"+animal[i], "drawable", getPackageName()));

        }
    }
} 
```

我需要帮助。我感谢任何帮助。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T05:00:44.243

我认为问题在于你`getCount()`返回 0 个元素而不是让它像这样

```
 @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return listNm.size();
    } 
```

# java - 如何修复此错误“XYZ 没有无参数构造函数”

> ID：11337542
> 
> 赞同：0
> 
> 时间：2012-07-05T03:32:42.283
> 
> 标签：java, web-services, spml

我正在尝试编写一个侦听 SPML 请求的 Web 服务。我正在使用 spml 版本 2 工具包。

我正在使用 Jdeveloper 创建这个网络服务。

我创建了一个这样的方法： `public Response execute(Request req)`

当我尝试使用 jdeveloper 创建 Web 服务时...出现以下错误：

`ExecutionMode does not have a no-arg constructor.`

有谁知道如何解决这个问题..？？这方面的一个例子将不胜感激。

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:38:30.330

您需要向 ExecutionMode 类添加一个默认（无参数）构造函数。

```
public class ExecutionMode {
     public ExecutionMode() {
          // initialization code here
     }

     // other class code    

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:37:50.213

大概你有一个名为 ExecutionMode 的类？编译器正在寻找一个无参数构造函数，即。不带参数的构造函数：

```
class ExecutionMode{
    ....
    public ExecutionMode(){...}
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:17:35.230

如果你定义了一个参数化构造函数，那么你还应该定义一个默认构造函数，如果你使用一个，因为如果你定义参数化构造函数，java不会提供默认构造函数。所以你应该定义

```
public ExecutionMode()
{

   //defination

} 
```

# ruby-on-rails-3 - Rails：在 has_one 关联中搜索

> ID：11337543
> 
> 赞同：1
> 
> 时间：2012-07-05T03:32:52.830
> 
> 标签：ruby-on-rails-3, search, model

我有一个名为**User** which `has_one` **Player**的模型。一个**玩家** `belongs_to`一个**用户**。

我想找到用户属性城市具有特定价值的所有玩家。现在我的 Player 模型中有这个：

```
def find
  User.find(:all, :conditions => ['city LIKE ?', "%#{city}%"])
end 
```

但是，这给了我用户。我想要用户满足该条件的玩家。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T03:43:43.963

试试这个。

```
Player.joins(:user).where('user.city LIKE ?', "%#{city}%") 
```

# javascript - 透明度跳脸？

> ID：11337545
> 
> 赞同：2
> 
> 时间：2012-07-05T03:33:04.367
> 
> 标签：javascript, webgl, three.js

我一直在开发一个运行在 Three.js 库之上的 WebGL 项目。我正在渲染几个半透明的网格，我注意到根据您倾斜相机的角度，顶部会出现不同的对象。

为了说明这个问题，我使用三个半透明立方体做了一个快速演示。当您将图像垂直于屏幕旋转过去时，最小立方体的后半部分“跳跃”并且不再可见。但是，它不应该仍然可见吗？我尝试调整一些混合方程，但这似乎没有什么不同。

我想知道这是否是 WebGL/Three 中的错误，或者我可以修复的问题。任何见解将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T21:26:13.073

嗯，这是他们在发明所有这些硬件加速图形业务时无法解决的问题，听起来我们将不得不处理很长一段时间。

这里的问题是图形卡不会对多边形或对象进行排序。显卡是“哑”的，你告诉它绘制一个对象，它会绘制代表它的像素，并且在另一个称为 zbuffer（或 depthbuffer）的不可见“图像”中，将绘制代表对象的像素但它会为每个像素绘制到相机的距离而不是颜色。之后绘制的任何其他对象，图形卡将检查每个像素到相机的距离，如果距离较远，则不会绘制它（除非您禁用检查）。

这大大加快了速度，并为您提供了实体对象之间的良好交集。但它在透明度方面表现不佳。假设您有 2 个透明对象，并且您希望将 A 绘制在 B 后面。您需要告诉显卡先绘制 A，然后绘制 B。只要它们不相交，就可以正常工作。为了绘制 2 个相交的透明对象，图形必须对所有多边形进行排序，并且由于图形卡不这样做，所以你必须这样做。

这是您需要了解并专门针对您的案例进行调整的其中之一。

在three.js 中，如果您设置`material.transparent = true`我们将对该对象进行排序，以便将其绘制在（较早）前面的其他对象之前。但是，如果您想与它们相交，我们无法真正帮助您。

# jquery - 包含多个项目的 JQuery UI 手风琴

> ID：11337548
> 
> 赞同：0
> 
> 时间：2012-07-05T03:33:45.963
> 
> 标签：jquery, jquery-ui, accordion

我在一个我无法控制的框架之上进行编码，因此需要解决所生成内容的限制。

我正在尝试做一个 jquery UI 手风琴，但需要手风琴包含标题后面的两个元素，而不仅仅是一个。

例如，被吐出的代码是（删除了中间的一堆）：

```
<h2>HEADER</h2>
<div>ITEM DESCRIPTION</div> 
<fieldset>
    <legend>Prices</legend>
    <div class="prices">
        <div class="productline" ><label>Price:</label>
                    <div  class="amount">$97.50</div></div>

    </div>
</fieldset> 
```

这一切都需要进入单个手风琴项，但此时手风琴使用h2作为标题，带有描述的div作为手风琴内容，然后将后面的字段集留在手风琴之外。由于我无法控制生成的代码将它们都包装在一个 div 中，有没有办法告诉手风琴使用标题后面的两个项目，而不是一个？

我正在使用的 jquery 是：

```
$(function() {
    $( ".productindex" ).accordion({
        active: false,
        collapsible: true,
        autoHeight: true,
        header: 'li>form>h2'
    });
}); 
```

更复杂的是，有些项目没有描述，所以如果任何脚本可以在字段集可能不存在之前容纳初始 div，那就太好了 - 但最坏的情况是我可以确保每个项目都有描述。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:34:30.960

根据我最初的评论，您可以获取需要成为“手风琴内容”的所有内容并将其全部包装在适当的元素中，以便手风琴功能起作用。

需要了解 HTML 的周围结构才能确定用于抓取这些元素的最佳选择器。让我们想象一下，您的结构有点类似于 jQuery UI 网站上的演示，除了使用不可更改的标记而不是 div：

```
<h2>HEADER</h2>
<div>ITEM DESCRIPTION</div> 
<fieldset>
    <legend>Prices</legend>
    <div class="prices">
        <div class="productline" >
            <label>Price:</label>
               <div  class="amount">$97.50</div>
        </div>
    </div>
</fieldset>

<h2>HEADER</h2>
// whoops, no description!
<fieldset>
    <legend>Prices</legend>
    <div class="prices">
        <div class="productline" >
            <label>Price:</label>
               <div  class="amount">$105.50</div>
        </div>
    </div>
</fieldset> 
```

我们可以使用`h2`节点作为选择的入口点。您真正想要做的是选择所有可用的直到下一个（当DOM 树的那个分支中`h2`没有更多内容时它也会结束）。`h2`由于这种选择的本质，您是否有项目描述或其他元素并不重要。然后我们在所有找到的元素周围添加一个新的包装器。

我不知道这是否是最完善的代码（人们通常不喜欢使用`.each()`，但我发现它在这里很方便），但这是我想出的：

```
var headers = $('h2');
headers.each( function() {
  var toWrap = $(this).nextUntil('h2');
  toWrap.wrapAll('<div class="wrapped" />');
}); 
```

从 jQuery UI 文档来看，你不需要包装 div 上的任何类，我只是包含了一个以方便这个 jsFiddle 演示：

演示：http: [//jsfiddle.net/StUWc/1/](http://jsfiddle.net/StUWc/1/)

只是为了彻底，在 wrapAll 函数之后，你的 DOM 变成了可以用这个标记表示的东西：

```
<h2>HEADER</h2>
<div class="wrapped">
  <fieldset>
    <legend>Prices</legend>
    <div class="prices">
        <div class="productline" >
            <label>Price:</label>
               <div  class="amount">$97.50</div>
        </div>
    </div>
  </fieldset>
</div>

<h2>HEADER</h2>
<div class="wrapped">
  <fieldset>
    <legend>Prices</legend>
    <div class="prices">
        <div class="productline" >
            <label>Price:</label>
               <div  class="amount">$105.50</div>
        </div>
    </div>
  </fieldset>
</div> 
```

# javascript - 为什么有两种不同的方式在 Javascript 中创建函数？

> ID：11337554
> 
> 赞同：3
> 
> 时间：2012-07-05T03:34:40.697
> 
> 标签：javascript, function

在我的代码中，我有以下内容：

```
var setTheme = function (color) {

};

function setTheme(color) {

}; 
```

函数名称并不完全相同，但我在这里放了相同的名称。创建函数的两种方式有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T03:38:38.467

它们是有区别的。使用函数定义，整个定义被提升：

```
foo(5); // Pops up 5

function foo(n) {
    alert(n);
} 
```

而 with `var`，声明被提升，但分配不是：

```
foo(5); // Error!

var foo = function(n) {
    alert(n);
}; 
```

我注意到的另一个区别是，在 ECMAScript 5 严格模式下的 Google Chrome Canary（目前，至少我还没有在许多其他浏览器中尝试过）上，函数定义的嵌套深度不能超过一层：

```
!function() {
    'use strict';

    function Blah() {
        function Lol() { // Error.
        }
    }
}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:41:23.117

**所以，**

*获取设置的JS函数*

```
 var setTheme = function (color) {

    }; 
```

如果您需要一个私有实用程序来获取/设置/删除模型值，那么您可以将函数声明为这样的变量。这对于在由函数计算的声明时分配变量可能很有用。

**适用于：** *简单版*

```
function setTheme(color) {

}; 
```

这是在 JavaScript 中声明函数的最简单方法。比如说，我们想写一个简单的函数调用`setTheme(color)`，它只接受一个参数`color`，对对象执行简单`color`的操作或返回值。您可以通过以下几种方法来做到这一点。

***5种不同的方式：有趣的阅读：***

[http://www.jquery4u.com/jquery-functions/5-ways-declare-functions-jquery/](http://www.jquery4u.com/jquery-functions/5-ways-declare-functions-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:38:56.443

这已经回答了很多次了。有很多方法可以调用这些。据我了解，第一个是**函数赋值**，第二个是**函数声明**。第一个将提升`setTheme`到最近范围的顶部，但它不会被定义为函数，直到它到达实际分配的位置。第二个将函数提升到`setTheme`顶部，因此您甚至可以在声明之前使用该函数。IMO，始终使用第一个。

# java - java.util.Date 中的默认时区是什么

> ID：11337557
> 
> 赞同：25
> 
> 时间：2012-07-05T03:35:24.133
> 
> 标签：java, date, timezone

如果我创建一个新的 Date() 对象。它将打印的默认时区是什么。

我的机器在 GMT 运行。我正在创建一个新的 Date() 对象。如果我打印为什么它显示 Thu Jul 05 08:21:05 **PKT** 2012。它如何将时区作为 PKT ？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-06T07:33:45.337

日期本身没有任何时区。它的`toString()`方法使用当前的默认时区来返回一个表示这个日期的字符串：

```
Date date = new Date();

System.out.println(TimeZone.getDefault());
System.out.println(date);

TimeZone.setDefault(TimeZone.getTimeZone("UTC"));

System.out.println(TimeZone.getDefault());
System.out.println(date); 
```

在我的机器上执行上面的代码会导致以下输出：

```
sun.util.calendar.ZoneInfo[id="Europe/Paris",offset=3600000,dstSavings=3600000,useDaylight=true,transitions=184,lastRule=java.util.SimpleTimeZone[id=Europe/Paris,offset=3600000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]]
Fri Jul 06 09:24:45 CEST 2012
sun.util.calendar.ZoneInfo[id="UTC",offset=0,dstSavings=0,useDaylight=false,transitions=0,lastRule=null]
Fri Jul 06 07:24:45 UTC 2012 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T07:35:35.773

实际上，基本日期时间通常与时区无关，它们不存储时区。要使用时区，您可以使用格式化程序、日历等。当然，基本日期必须在默认时区中，无论它可能是什么（通常是 GMT），否则您将无法从基本日期实例创建本地日期。

在您的特定情况下，查看 a) javadocs 和 b) 类本身会有所帮助，因为 JDK 通常与 java.util.Date 的源代码一起分发。根据 javadoc，java.util.Date 类表示自称为“纪元”的标准基准时间以来的毫秒数，即 1970 年 1 月 1 日，格林威治标准时间 00:00:00。

如果它在您的机器上打印时显示不同的日期，那是因为您的系统将使用您系统的默认时区来打印它。但是，您可以使用任何其他时区自行打印。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-18T06:50:02.070

如果您在 linux 下运行，系统中的某处有一些神奇的时区文件。对于我的 gentoo 来说，魔法只是创建一个包含内容的文本文件 /etc/timezone

```
Europe/Berlin 
```

有趣的是，它一直`date`都给出了正确的时间和时区（CEST），但是 java 把我送到了 Greenwhich。

```
> date
Thu Sep 18 08:49:14 CEST 2014 
```

# html - 在 silverlight 中设置 IFRAME innerHTML 属性

> ID：11337562
> 
> 赞同：0
> 
> 时间：2012-07-05T03:36:23.723
> 
> 标签：html, silverlight, iframe

我将在我的 silverlight 4 应用程序中显示 HTML，我不能使用 Out of Browser 或无窗口模式，事实上我正在使用 IMAP (WCF) 阅读电子邮件并希望在我的 Silverlight Web 应用程序中显示它们的正文。我正在使用 IFRAME 来显示 html，它工作正常，但我应该将它的 URL 设置为显示 HTML，是否可以设置它的 innerHTML 而不是设置它的 URL？我的正文为 HTML，我想将其设置为 IFRAME innerHTML，我可以使用 Javascript 设置其 innerHTML 属性吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:03:15.397

你可以试试这个控件。

[http://blogs.msdn.com/b/delay/archive/2007/09/10/bringing-a-bit-of-html-to-silverlight-htmltextblock-makes-rich-text-display-easy.aspx](http://blogs.msdn.com/b/delay/archive/2007/09/10/bringing-a-bit-of-html-to-silverlight-htmltextblock-makes-rich-text-display-easy.aspx)

此控件不需要 windowless = true 并且也适用于浏览器。但它只支持 html 页面而不是 aspx 页面。

# c# - 字符串解析并找到常见的空白位置

> ID：11337565
> 
> 赞同：1
> 
> 时间：2012-07-05T03:36:49.870
> 
> 标签：c#, algorithm

我正在尝试解析一个字符串并找到一个常见的空白位置。

这是我的字符串

```
abc   xyz 123   456
cba 1234a 45623 say
avc  4567 bv    456 
```

可以有任意数量的字符串。我需要一个在 c# 中更可取的通用算法，我可以在其中找到上述字符串中的常见空白位置。

例如，在上面的字符串中，常见的位置是

```
4, 10 ,16 
```

每个字符串中都有空格。

我一直在尝试的方法包括 Intersect ，并获取所有可能的空间，然后比较找出常见的空间，但我试图找出最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:49:19.550

```
var stringList = new[] { "abc   xyz 123   456", "cba 1234a 45623 say", "avc  4567 bv    456" };
var shortest = stringList.OrderBy(s => s.Length).First();
var result = new Collection<int>();

for (int i = 0; i < shortest.Length; i++)
{
    if (stringList.All(c => c[i] == ' ')) result.Add(i+1);
}

// Test the results
foreach (var index in result)
{
    Console.WriteLine(index);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T03:49:57.047

在第一个字符串中创建一组空白位置。检查第二个字符串中的这些位置，如果第二个字符串中该位置的字符不是空格，则从集合中删除该位置。对剩余的字符串重复。

另一种可能性是找到每个字符串中空白位置的集合，然后找到这些集合的交集。这将有一个潜在的优势。虽然这通常会完成更多的总工作，但其中的一部分工作（查找单个集合）很容易并行执行。我怀疑这会经常获胜（除非，也许，你有很多弦和很多核心）。虽然它可能不太明显，但您也可以并行找到集合的交点 - 您基本上是做一个二叉树的交点，所以在第一次迭代中您会找到对之间的交点，在第二次您会找到结果对之间的交点从第一次迭代开始，依此类推，直到你只剩下一组。假设至少有许多核心作为字符串，这将时间复杂度从 O(N) 降低到 O(log N)。

# jsf - 如果没有更改输入值，则避免提交表单

> ID：11337567
> 
> 赞同：3
> 
> 时间：2012-07-05T03:36:59.207
> 
> 标签：jsf, jsf-2

在 JSF2 中有什么方法可以避免表单提交，或者在提交表单时不做任何事情？

我们在一个表单中有几个输入字段（20 个输入字段），其中填充了一些默认值，如果没有更改值，那么我们不想提交表单。

JSF中有什么直接的方法可以实现这一点吗？

```
<h:form id="summaryForm" prependId="false">
     <h:inputText id="inputField1" value="#{summaryBean.inputFieldValue1}" />
     <h:inputText id="inputField2" value="#{summaryBean.inputFieldValue2}" />
     <h:inputText id="inputField3" value="#{summaryBean.inputFieldValue3}" />
     <h:inputText id="inputField4" value="#{summaryBean.inputFieldValue4}" />
     <h:inputText id="inputField5" value="#{summaryBean.inputFieldValue5}" />
     <h:commandButton action="#{summaryBean.submitSummary}" />
</h:form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T12:19:53.577

简短的回答是否定的，在普通的 JSF 中你不能这样做。不过，您可以在客户端使用一些 JavaScript 和[jQuery](http://www.jquery.com)来完成。

```
... include jQuery somewhere here ...

<script>
var anyInputChanged = false;
var checkIfAnyValueChanged = function(){ return anyInputChanged; };
(function($) {
    $(function() {
        // set variable anyInputChanged to TRUE on event 'onchange',
        //    for the fields with class "submitOnlyIfChanged"
        $('.submitOnlyChanged').change(function(){ anyInputChanged = true; });
    });
})(jQuery);
</script>

<h:form id="summaryForm" prependId="false">
    <!-- set up all the fields with the class "submitOnlyIfChanged" -->
    <h:inputText class="submitOnlyIfChanged" id="inputField1"
       value="#{summaryBean.inputFieldValue1}" />
    <h:inputText class="submitOnlyIfChanged" id="inputField2"
       value="#{summaryBean.inputFieldValue2}" />
    <h:inputText class="submitOnlyIfChanged" id="inputField3"
       value="#{summaryBean.inputFieldValue3}" />

    <!-- set up a check if any field was changed on button click -->
    <h:commandButton onclick="return checkIfAnyValueChanged();"
       action="#{summaryBean.submitSummary}" />
</h:form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-11T07:49:21.010

简单的方法。

```
var allFields = document['formName'].elements;
var submit = document.getElementById("submit");
submit.disabled  = true;
var fieldsValue = [];
var x;
var y=0;
for( var i=0; i<allFields.length; i++ ){
    fieldsValue[i] = document.forms["formName"][allFields[i].name].value;
    document.getElementsByName(allFields[i].name)[0].addEventListener('input', function (evt) {
        x = fieldsValue.indexOf(this.value);
        x < 0 ? y = y+1 : y = y-1;
        y > 0 ? submit.disabled  = false : submit.disabled  = true;
    });

} 
```

# javascript - 从 javascript 数组中删除 id 的更智能方法

> ID：11337581
> 
> 赞同：0
> 
> 时间：2012-07-05T03:39:30.013
> 
> 标签：javascript, arrays, underscore.js

这就是我现在所拥有的。环顾四周，并没有看到任何突然出现在我身上的东西。是否有更好的执行方式来删除/删除我的对象`myArray`不存在于`data`ID 中？

```
for (m in myArray) {
    var found = false;
    _.each(data, function (p) {
        if (p.id === m) {
            found = true;
        }
    });
    if (!found) {
        myArray[m].remove();
        delete myArray[m];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:53:25.713

您只是想删除不包含在`data`. 为什么不直接过滤它们？

```
ids = _(data).pluck('id');
myArray = _(myArray).filter(function(x) {
  return _(ids).include(x);
}) 
```

# sql - 错误 49 错误的绑定变量 oracle 表单

> ID：11337582
> 
> 赞同：5
> 
> 时间：2012-07-05T03:39:57.003
> 
> 标签：sql, forms, oracle, variables, bind

我想问一下这个错误...

```
 Error 49 at line 5, column 6
       bad bind variable 'S_ORD.payment_type' 
```

这是代码：

```
 DECLARE
     N NUMBER;
      v_credit S_CUSTOMER.credit_rating%type;
    BEGIN
      IF :S_ORD.payment_type = 'CREDIT' THEN
        SELECT credit_rating
        INTO v_credit
        FROM S_CUSTOMER
      WHERE :S_ORD.customer_id = id;
      IF v_credit NOT IN ('GOOD', 'EXCELLENT') THEN
            :S_ORD.payment_type:= 'CASH';
          n:=SHOW_ALERT('Payment_Type_Alert');
      END IF;
     END IF;
   END; 
```

我是 oracle 表单的新手，所以我不确定我是否缺少设置或任何东西。S_ORD 表存在并且有一个列 payment_type，它由 'CREDIT' 和 'CASH' 值组成。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:00:56.477

当代码位于库或菜单中时，Oracle Forms 不允许使用绑定变量。

这是来自 Oracle Forms (6i) 帮助的引用：

> 您可以使用 NAME_IN 和 COPY 内置子程序间接引用项目。NAME_IN 函数返回指定变量或项的内容。使用 NAME_IN 函数获取项目的值，而不直接引用项目。以下语句是等效的：
> 
> IF :emp.ename = 'smith' -- 直接引用
> IF NAME_IN('emp.ename') = 'smith' -- 间接引用
> 
> 返回值始终是一个字符串。要将 NAME_IN 用于 DATE 或 NUMBER 项，请使用适当的转换函数将字符串转换为所需的数据类型：
> 
> date_var := TO_DATE(Name_In('order.date_item'));
> num_var := TO_NUMBER(Name_In('order.number_item'));
> 
> 关于 NAME_IN 的注释：
> 
> · NAME_IN 函数不能返回全局或局部变量的内容。
> 
> · 在将在输入查询模式下执行的 PL/SQL 触发器中，您必须使用 NAME_IN 而不是普通的绑定变量表示法来访问数据块中的值。（这是因为最终用户可能会在项目中键入关系运算符，从而产生一个不能由 PL/SQL 处理的形式的值。）
> 
> COPY 过程 COPY 过程将指示值分配给指示变量或项。然而，与标准 PL/SQL 赋值不同，使用 COPY 过程允许您间接引用正在设置其值的项：
> 
> :emp.ename := '史密斯'; -- 直接引用 Copy('smith','emp.ename'); -- 间接引用
> 
> COPY 可以与 NAME_IN 函数一起使用，为名称存储在引用变量或项目中的项目赋值：
> 
> /* 将值 'smith' 放入名称存储在 ref_item 中的项目 */ Copy('smith',Name_In('control.ref_item'));
> 
> 为什么使用间接引用间接
> 引用项目允许您编写更通用、可重用的代码。通过使用变量代替实际项目名称，您可以编写一个子程序，该子程序可以对名称已分配给指定变量的任何项目进行操作。此外，当您在库或菜单模块中编写的 PL/SQL 中引用表单绑定变量（项、参数、全局变量）的值时，必须使用间接引用。因为库、菜单和表单是独立的应用程序模块，所以您不能在菜单项命令或库过程中直接引用表单项的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T16:03:21.553

对于一个简单的答案 -

在 Oracle 表单中

```
 :S_ORD.payment_type 
```

将意味着您有一个名为`DATA_BLOCK`（可能是 a ）的 named 。`S_ORD``element``TEXT ITEM``PAYMENT_TYPE`

因此，除非 Oracle 表单上有任何此类数据块和元素，否则它将继续出错。使用冒号的绑定变量与在or`:`中的工作方式不同。作为解决方案，您可以在桌子上作为`SQL``PL/SQL``DECLARE``CURSOR``S_ORD`

```
CURSOR c_pymnt_type IS
 SELECT payment_type
   FROM S_ORD; 
```

然后`OPEN`,`FETCH`和`CLOSE`过程中的光标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T03:19:29.637

我注意到您正在尝试遵循来自[http://www.oracle.com/webfolder/technetwork/tutorials/obe/forms/11g/formsmenuscreate/formsmenuscreate.htm的 Oracle 教程](http://www.oracle.com/webfolder/technetwork/tutorials/obe/forms/11g/formsmenuscreate/formsmenuscreate.htm)

通过转到数据块中的每个项目并将属性选项板中的项目类型更改为列表中所选项目之后的下一个项目类型，可以轻松解决该问题。

这适用于 oracle 表格 10。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T05:11:56.670

显然，我们很难知道你做了什么，因为我们看不到你的代码，而且你没有给我们太多信息。所以这是一个猜测。

S_ORD 是您表单中的一个块，基于（我希望）一个名为 S_ORD 的表。您发布的代码段正在某个触发器中运行，可能是 POST-QUERY 或 WHEN-VALIDATE-ITEM，尽管这并不重要，并且应该在该块上填充一个名为 PAYMENT_TYPE 的字段。

错误消息告诉您的是，块 S_ORD 没有名为 PAYMENT_TYPE 的字段。（它说“绑定变量”，因为冒号表示绑定变量，我们也可以以相同的方式引用诸如全局变量之类的东西）。

为什么这个领域不存在？任何一个：

1.  您的表有一个名为 PAYMENT_TYPE 的列，而您在创建块时没有选择它；或者
2.  您的表没有名为 PAYMENT_TYPE 的列；
3.  您的数据块不称为 S_ORD。

在第一种情况下，您需要进入块属性编辑器并添加列。在第二种情况下，您需要将一个非基表项添加到您的块中。 [在这里了解如何](http://www.oracle.com/webfolder/technetwork/tutorials/obe/forms/FormsMasterDetail/FormsMasterDetailOBE.htm#t3)。如果您已将数据块命名为表名以外的其他名称（并且这样做可能有充分的理由），那么您需要在调用中使用块名，而不是表名）。

# ios - UITableViewCell 子视图动画计时怪异

> ID：11337587
> 
> 赞同：4
> 
> 时间：2012-07-05T03:41:06.763
> 
> 标签：ios, uitableview, uiviewanimation

我正在尝试在 UITableViewCell 内启动动画，但除非我做一些愚蠢的事情，否则它不会启动。代码被调用，但动画什么也不做。如果我通过将它放在 a 中来延迟它，`dispatch_async`那么它将起作用。为什么会这样？我需要等待什么才能开始动画？

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(mNeedsAnimation)
    {
    //this will delay it a bit and make it work, but why?
    //dispatch_async(dispatch_get_main_queue(), ^(void){ (
        mViewToAnimate.transform = CGAffineTransformMakeScale(0.5f, 0.5f);
        mViewToAnimate.hidden = NO;
        mViewToAnimate.alpha = 1.f;

        [UIView animateWithDuration:1 delay:0 options:UIViewAnimationOptionRepeat|UIViewAnimationCurveLinear animations:^{
            mViewToAnimate.alpha = 0.0;
            mViewToAnimate.transform = CGAffineTransformMakeScale(1.f, 1.f);
        }completion:nil];
    //});
        mNeedsAnimation = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:50:55.393

我认为这是因为当 willDisplayCell 被调用时，单元格仍然在屏幕外并且不能有动画。

# actionscript-3 - 如何将 Spark TextArea 组件显示为 MovieClip 的子组件

> ID：11337588
> 
> 赞同：1
> 
> 时间：2012-07-05T03:41:07.390
> 
> 标签：actionscript-3, flash, apache-flex, textarea, movieclip

我需要在我的应用程序中使用 TextArea，因为它支持 TLF 框架并允许用户编辑文本。

我的问题是这个 TextArea 必须是 MovieClip 的子项，但我无法使其工作并且 TextArea 没有显示。

这是我的代码示例：

```
var mc:UIMovieClip = new UIMovieClip();
mc.graphics.clear();
mc.graphics.lineStyle(2, 0, 1);
mc.graphics.drawRect(0, 0, 400, 300);
mc.width = 400;
mc.height = 300;

var textArea:TextArea = new TextArea();
textArea.width = 350;
textArea.height = 250;
textArea.text = "Hello world!";
mc.addChild(textArea);
myCanvas.rawChildren.addChild(mc); 
```

当我将 TextArea 直接添加为画布的子项时，即当我替换行时，TextArea 组件正确显示

```
mc.addChild(textArea); 
```

与以下

```
mainCanvas.addChild(mc); 
```

TextArea 需要成为 MovieClip 的子项的原因是我正在使用与 MovieClips 一起使用的外部库。如果我使用 UIMovieClip 而不是 MovieClip，这个技巧也不起作用。

有人可以解释为什么在那种情况下不会显示 TextArea 吗？是否有任何解决方法来获得所需的结果？（我尝试使用 UIComponent 作为中间子级但没有成功）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T05:11:57.913

如果`MovieClip`您使用的是从 Flash 编译的，我们最近使用的一个很好的解决方案是将其实际导出为 Flex 友好的容器： [http ://www.webkitchen.be/2009/02/11/video-tutorial -create-flex-container-components-with-flash-cs4/](http://www.webkitchen.be/2009/02/11/video-tutorial-create-flex-container-components-with-flash-cs4/)

如果没有，请尝试扩展`ContainerMovieClip`而不是`UIMovieClip`，并设置其`content`属性。

# html - 为什么选择标签的下拉框显示在错误的位置？

> ID：11337592
> 
> 赞同：2
> 
> 时间：2012-07-05T03:41:21.263
> 
> 标签：html, css, drop-down-menu, html-select

我的 CSS 文件根本没有触及标签“选择”，也没有 CSS 类与标签“选择”相关。但是在浏览器中显示时，包含值的下拉框显示在错误的位置，如下图所示： ![在此处输入图像描述](../Images/97686411cb915606245b30af75696a06.png) **为什么会这样？或者它是Chrome的一个错误？**因为据我所知，CSS 和 JS 都不能改变这种下拉框的位置。我希望它回到 SELECT 元素正下方的正常位置！！！

这是上面提到的“选择”标签的 HTML 部分：

```
<select id="sel_user">   
  <option value="39" >Bùi Ngọc Sơn &lt;son.bui@tamtay.vn&gt;</option>   
  <option value="19" >Cao Thanh Hải &lt;hai.cao@tamtay.vn&gt;</option>   
  <option value="15" >Cao Thanh Thảo &lt;thao.cao@tamtay.vn&gt;</option>   
  <option value="72" >Cao Thị Lan Anh &lt;anh.cao@tamtay.vn&gt;</option>    
  ...
</select> 
```

select 标签的 id 仅用于 JS，它不与任何 CSS 项目链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:49:40.303

我不明白...我尝试了您的选择列表，但它运行得很好。

您的选择列表是否可以在其他浏览器中使用？

我认为您的 HTML 代码中有一些错误。

# javascript - 可靠地检测网站的新访问者

> ID：11337595
> 
> 赞同：1
> 
> 时间：2012-07-05T03:42:03.333
> 
> 标签：javascript, cookies, ip

我想设置一条介绍性消息以显示给所有新用户。它应该以某种方式存储他们的信息（cookie？IP 地址？），这样他们（理想情况下）就不会再次看到该消息。我知道使用 cookie 是可能的，但最可靠的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:45:52.880

要可靠地做到这一点，您需要使用服务器端脚本。Javascript 可以被禁用，因此不再可靠。

PHP 会很简单 - 你可以读取用户 IP 地址和用户代理 (UA)

```
<?php
    $IP = $_SERVER['REMOTE_ADDR'];
    $UA = $_SERVER['HTTP_USER_AGENT'];
?> 
```

将该信息存储到数据库中，您就可以跟踪用户。将其与 cookie 结合使用（但同样，这可能会被用户删除），您就有了一个非常好的跟踪解决方案。

```
<?php
   // Set a cookie
   $userID = 'something';
   setcookie('UID', $userID);

   // Read a cookie
   echo($_COOKIE['uid']);
?> 
```

查看[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)以获取有关 cookie 的信息。

# python - Shell 脚本、python、ld_library

> ID：11337596
> 
> 赞同：0
> 
> 时间：2012-07-05T03:42:35.180
> 
> 标签：python, bash, shell, dynamic-library

我有一个从 python 调用 shell 脚本的程序。在 shell 脚本中，我像这样添加到 LD_LIBRARY_PATH，指向 mdbtools 中的 .so。

```
NEWPATH=${PWD}"/mdbtools/usr/lib/x86_64-linux-gnu"
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$NEWPATH 
```

我很确定这部分代码是正确的。然后，我使用输入中的变量调用 .so 中的一个程序，“mdb-export”，就像这样。：

```
mdb-export ${1} Athlete > "${2}athlete.csv" 
```

这是令人困惑的部分。当我从命令行调用脚本时

```
./buildscvs abcd.mdb 1234 
```

它完美地工作。csvs 按预期填充。但是，当我从 python 调用脚本时：

```
 try:
        p = Popen([cmd, filename, prepend],  stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True).communicate()[0]
        print "p", p
    except Exception as e:
        print str(e) 
```

cmd、文件名和前置如下

```
filename = /app/djangoFiles/meetPlanner/2011ROXBURY.mdb
cmd = /app/djangoFiles/meetPlanner/buildcsvs.sh
prepend = 824365891 
```

csvs出来空白。这似乎与您运行具有未知程序名称的命令时发生的情况一致，例如我运行

```
abcd 1234.mdb > test.csv 
```

有谁知道发生了什么？我非常感谢你能给我的任何帮助

谢谢！

**编辑**

更改为 subprocess.check_call() 后

如下所示，我现在收到以下错误消息：

```
/mdb-export: error while loading shared libraries: libmdb.so.2: cannot open shared object file: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:08:32.673

你不仅要检查`stdout`，还要检查`stderr`。

```
(stdout, stderr) = Popen([cmd, filename, prepend],  stdin=PIPE, stdout=PIPE, stderr=PIPE, close_fds=True).communicate()
if stderr != "":
    print stderr 
```

您还写了 ou set `LD_LIBRARY_PATH`，但是在哪里？在脚本中还是在 python 程序中？如果在 python 程序中你必须在`Popen`调用中传递环境哈希，但你不这样做。

你得到的错误

```
/app/djangoFiles/meetPlanner/mdb-export: error while loading shared libraries: libmdb.so.2: cannot open shared object file: No such file or directory 
```

确切地说`LD_LIBRARY_PATH`是设置不正确（或根本没有设置）。

*更新*

好的，现在我们知道您`LD_LIBRARY_PATH`在脚本中设置了。不要忘记导出它。

```
export LD_LIBRARY_PATH 
```

# jquery - 从另一个fancybox调用jquery fancybox

> ID：11337597
> 
> 赞同：0
> 
> 时间：2012-07-05T03:42:49.697
> 
> 标签：jquery, fancybox

是否可以从打开的fancybox 调用另一个fancybox 而无需关闭打开的fancybox？

自己看：http: [//jsfiddle.net/unsDG/5/](http://jsfiddle.net/unsDG/5/)

:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:08:34.670

在父页面上，使用 iFrame 设置 fancybox：

```
$(document).ready(function() {

$(".fancybox").fancybox(

{

    width:'75%',

    height:'75%',

    'type' : 'iframe'

});

}); 
```

在子页面中，放入您的内容，确保它具有有效的 doctype，再次导入 Fancybox 需要的 javascript 和 css，然后声明您的新 Fancybox 链接。它可能会帮助你

# c# - 合并字典列表

> ID：11337601
> 
> 赞同：1
> 
> 时间：2012-07-05T03:43:33.173
> 
> 标签：c#

假设我们有字典 ld1 和 ld2 的列表。两者都有一些共同的字典对象。假设字典对象“a”在两个列表中。我想合并字典列表，这样相同的对象在两个列表中它应该只在合并列表中出现一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T03:45:29.603

[LINQ`.Union`](http://msdn.microsoft.com/en-us/library/bb341731)应该可以很好地工作：

```
oneList.Union(twoList) 
```

如果您需要`List`，只需调用`ToList()`结果即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T03:51:53.757

如果你想合并列表，[Enumerable.Union](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.union.aspx)

```
ld1.Union(ld2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:53:13.593

如果您正在使用自定义对象或类，简单的 enumerable.Union 将不起作用。

您必须创建自定义比较器。

为此，请创建一个实现 IequalityComparer 的新类，然后按如下方式使用它

oneList.Union(twoList, customComparer)

一些代码示例如下所示：

```
public class Product
{
    public string Name { get; set; }
    public int Code { get; set; }
}

// Custom comparer for the Product class
class ProductComparer : IEqualityComparer<Product>
{
    // Products are equal if their names and product numbers are equal.
    public bool Equals(Product x, Product y)
    {

        //Check whether the compared objects reference the same data.
        if (Object.ReferenceEquals(x, y)) return true;

        //Check whether any of the compared objects is null.
        if (Object.ReferenceEquals(x, null) || Object.ReferenceEquals(y, null))
            return false;

        //Check whether the products' properties are equal.
        return x.Code == y.Code && x.Name == y.Name;
    }

    // If Equals() returns true for a pair of objects 
    // then GetHashCode() must return the same value for these objects.

    public int GetHashCode(Product product)
    {
        //Check whether the object is null
        if (Object.ReferenceEquals(product, null)) return 0;

        //Get hash code for the Name field if it is not null.
        int hashProductName = product.Name == null ? 0 : product.Name.GetHashCode();

        //Get hash code for the Code field.
        int hashProductCode = product.Code.GetHashCode();

        //Calculate the hash code for the product.
        return hashProductName ^ hashProductCode;
    }

} 
```

详细解释见以下链接：

[http://msdn.microsoft.com/en-us/library/bb358407.aspx](http://msdn.microsoft.com/en-us/library/bb358407.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T04:13:50.570

```
Dictionary<int, string> dic1 = new Dictionary<int, string>();
dic1.Add(1, "One");
dic1.Add(2, "Two");
dic1.Add(3, "Three");
dic1.Add(4, "Four");
dic1.Add(5, "Five");

Dictionary<int, string> dic2 = new Dictionary<int, string>();
dic2.Add(5, "Five");
dic2.Add(6, "Six");
dic2.Add(7, "Seven");
dic2.Add(8, "Eight");

Dictionary<int, string> dic3 = new Dictionary<int, string>();
dic3 = dic1.Union(dic2).ToDictionary(s => s.Key, s => s.Value); 
```

结果是 dic3 具有八个值，其中删除了重复的键值（5，“五”）。

# symfony - 如何在 symfony2 中通过 KnpMenu 创建树项目菜单

> ID：11337604
> 
> 赞同：3
> 
> 时间：2012-07-05T03:43:50.757
> 
> 标签：symfony, menu, knpmenu

我想创建一个 ul，如下所示：

```
<ul>
    <li>
       <a><a>
       <ul>......</ul>
    </li>
</ul> 
```

sub ul 将是另一个子项目，我不知道如何创建它，任何人都可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T03:31:54.903

```
$menu = $factory->createItem('root');

$menu
    ->setChildrenAttribute('class', 'nav pull-right');

$menu
    ->addChild('User')
    ->setAttribute('dropdown', true);

$menu['User']
    ->addChild('Profile', array(
        'uri' => '#'
    ))
    ->setAttribute('divider_append', true);

$menu['User']
    ->addChild('Logout', array(
        'uri' => '#'
    )); 
```

更多信息： http: [//linkofy.wordpress.com/2012/04/02/using-knpmenubundle-and-twitter-bootstrap/](http://linkofy.wordpress.com/2012/04/02/using-knpmenubundle-and-twitter-bootstrap/)

# c# - 必须在更新语句中声明标量变量“@UserId”

> ID：11337613
> 
> 赞同：-2
> 
> 时间：2012-07-05T03:45:27.383
> 
> 标签：c#, asp.net, sql, sql-server

我有一个名为`UserProfile.aspx`. 用户登录后，他们可以在 UserProfile 中查看和编辑他们的详细信息。我使用了 a`SqlDataSource`并将数据绑定到 a `DetailsView`。在详细信息视图中，它从 3 个表中检索数据，并且选择查询工作正常并且可以成功显示数据。

但是，当我更新信息并点击此错误中的`Update`按钮时：`DetailsView`

> 异常详细信息：System.Data.SqlClient.SqlException：
> 必须声明标量变量“@UserId”。

以下是我获取当前登录用户（内部`UserProfile.aspx`）的代码：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
      ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionString1 %>" 

  SelectCommand="SELECT aspnet_Membership.Email, Details.CustName, Details.CustNum, Details.CustRole, Details.CustStatus, Details.PName, Details.PEmail, Details.PRole, Details.WedDate, aspnet_Users.UserName FROM Details INNER JOIN aspnet_Membership ON Details.UserId = aspnet_Membership.UserId INNER JOIN aspnet_Users ON aspnet_Membership.UserId = aspnet_Users.UserId WHERE Details.UserId = @UserId" 
        onselecting="SqlDataSource1_Selecting" 

  UpdateCommand="UPDATE Details SET CustName = @CustName, CustNum = @CustNum, CustRole = @CustRole, CustStatus = @CustStatus, PName = @PName, PEmail = @PEmail, PRole = @PRole, WedDate = @WedDate WHERE [UserId] = @UserId">

        <SelectParameters>
            <asp:Parameter Name="UserId" type="String" />
        </SelectParameters> 
```

**编辑**

```
 <UpdateParameters>
            <asp:Parameter Name="UserId" type="String" />
            <asp:Parameter Name="CustName" type="String"  />
            <asp:Parameter Name="CustNum" type="String" />
            <asp:Parameter Name="CustRole" type="String" />
            <asp:Parameter Name="CustStatus" type="String" />
            <asp:Parameter Name="PName" type="String" />
            <asp:Parameter Name="PEmail" type="String"  />
            <asp:Parameter Name="PRole" type="String"  />
            <asp:Parameter Name="WedDate" type="String" />
        </UpdateParameters>
    </asp:SqlDataSource>

    <br />
    <asp:DetailsView ID="DetailsView1" runat="server" 
        AutoGenerateRows="False" 
        DataSourceID="SqlDataSource1" 
        Height="29px" 
        Width="476px">

        <Fields>
            <asp:BoundField DataField="UserName" HeaderText="UserName" 
                SortExpression="UserName" ReadOnly="True" />

            <asp:BoundField DataField="Email" HeaderText="Email" 
                SortExpression="Email" />

            <asp:BoundField DataField="CustName" HeaderText="CustName" 
                SortExpression="CustName" />

            <asp:BoundField DataField="CustNum" HeaderText="CustNum" 
                SortExpression="CustNum" />    

            <asp:BoundField DataField="CustRole" HeaderText="CustRole" 
                SortExpression="CustRole" />
            <asp:BoundField DataField="CustStatus" HeaderText="CustStatus" 
                SortExpression="CustStatus" />
            <asp:BoundField DataField="PName" HeaderText="PName" 
                SortExpression="PName" />
            <asp:BoundField DataField="PEmail" HeaderText="PEmail" 
                SortExpression="PEmail" />
            <asp:BoundField DataField="PRole" HeaderText="PRole" 
                SortExpression="PRole" />
            <asp:BoundField DataField="WedDate" HeaderText="WedDate" 
                SortExpression="WedDate" />
            <asp:CommandField ShowEditButton="True" />

        </Fields>
        <PagerTemplate>
            <br />
        </PagerTemplate>
    </asp:DetailsView> 
```

这是`UserProfile.aspx.cs`文件：

```
protected void SqlDataSource1_Selecting(object sender, SqlDataSourceSelectingEventArgs e)
{
    // Get a reference to the currently logged on user
    MembershipUser currentUser = Membership.GetUser();

    // Determine the currently logged on user's UserId value
    // Assign the currently logged on user's UserId to the @UserId parameter
    //access the parameter value using e.Command.Parameters 
    //programmatically set the @UserId:

    e.Command.Parameters["@UserId"].Value = currentUser.ProviderUserKey.ToString();

    Response.Write(currentUser.ProviderUserKey.ToString()); 
    //When I run the webform, the UserId of the current logged-in user had displayed, 
    // the @UserId was not empty. 
} 
```

我在想也许更新查询无法检测到`@UserId`。但既然`@UserId`在`SELECT`查询中工作，为什么在`UPDATE`，它不是？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:51:50.830

您需要在 Update 参数中指定 UserId 作为参数，并且 Select 和 Update 是两个独立的命令。UserId 在 Update WHERE 子句中使用，因此需要提供。

```
 <UpdateParameters>
        <asp:Parameter Name="UserId" type="String" />
        <asp:Parameter Name="CustName" type="String"  />
        <asp:Parameter Name="CustNum" type="String" />
        <asp:Parameter Name="CustRole" type="String" />
        <asp:Parameter Name="CustStatus" type="String" />
        <asp:Parameter Name="PName" type="String" />
        <asp:Parameter Name="PEmail" type="String"  />
        <asp:Parameter Name="PRole" type="String"  />
        <asp:Parameter Name="WedDate" type="String" />
    </UpdateParameters> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:54:12.623

您需要在 UpdateParameters 和 SelectParameters 中声明 UserId，如下所示：

```
<asp:Parameter Name="UserId" type="String" /> 
```

# php - 使用 PHP 模拟 XMLHttpRequest 客户端

> ID：11337617
> 
> 赞同：0
> 
> 时间：2012-07-05T03:46:28.180
> 
> 标签：php

为了测试我应该在哪里给出网站的网址，你能用上面代码中的例子告诉我吗？

```
$r = new HTTPRequest("server.php", HTTP_METH_POST);
$r->addPostFields(array('omg' => 'wtf'));
$r->send();
var_dump($r->getResponseCode());
var_dump($r->getResponseBody()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:53:12.040

只需使用[addHeaders()](http://www.php.net/manual/en/httprequest.addheaders.php)。

XMLHttpRequest 是`X-Requested-With`标头的值，因此您只需执行以下操作：

```
$r = new HTTPRequest("http://mywebservices.com/somewebserver.php", HTTP_METH_POST); 
$r->addHeaders(array('X-Requested-With' => 'XMLHttpRequest')); 
```

从 PECL 安装 HTTP 的说明：[http ://www.php.net/manual/en/http.setup.php](http://www.php.net/manual/en/http.setup.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:41:38.780

phpdev 已经很好地回答了您的问题，如果您安装 HTTP 扩展并按照答案进行操作，它肯定会起作用。

```
$r = new HttpRequest('http://your-required-url-here', HttpRequest::METH_POST);
$r->addPostFields(array('omg' => 'wtf'));
echo $r->send()->getBody(); 
```

您在之前的评论中给出的网址格式不正确，您似乎粘贴了一些随机网址。

这只是使用 php CURL 的另一种方法。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://www.openfirms.com/index.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
$data = array('omg' => 'wtf');
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
print_R($output); 
```

这将输出指定 url 的内容。希望它会有所帮助

# cqrs - 什么触发 CQRS 客户端应用程序中的 UI 刷新？

> ID：11337618
> 
> 赞同：14
> 
> 时间：2012-07-05T03:46:27.990
> 
> 标签：cqrs

我正在尝试学习 CQRS 设计方法（模式和架构）并将其应用于新项目，但似乎缺少关键部分。

我的客户端应用程序执行查询并从读取模型中检索轻量级只读 DTO 列表。用户选择一个项目并单击一个按钮以启动一些操作。该操作是通过创建相应的命令对象并将其发送到写入模型（命令处理程序执行操作、更新数据存储等）来执行的。但是，在某些时候，我需要更新 UI 以反映对由操作产生的应用程序的状态。

UI 如何知道何时刷新原始列表？

**附加信息**

我注意到大多数讨论 CQRS 的文章/博客在他们的示例中都使用 MVC 客户端应用程序。我现在正在开发 Silverlight 客户端，我开始怀疑这种模式在这种情况下是否行不通。

**后续问题**

在更多地考虑了 Bartlomiej 的回应和随后的讨论之后，我想知道 CQRS 中的错误处理。鉴于命令基本上是即发即弃的异步操作，我们如何向 UI 报告错误情况？

我看到“刷新 UI”采取以下两种形式之一：

1.  操作成功，数据已更改，应更新 UI 以反映这些更改
2.  操作失败，数据未更改，但应通知用户失败和潜在的纠正措施。

即使在 MVC 中使用 Post-Redirect-Get 模式，在您知道操作的结果之前，您也无法真正进行重定向。到目前为止，我所看到的例子都没有解决这些现实世界的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:47:25.370

我一直在为 WPF 客户端解决类似的问题。任何数据的重新查询触发器取决于您更新的数据，命令往往分为以下几类：

1.  该命令是一种真正的即发即弃的方法，它通知后端状态更改，但这种更改不需要反映在 UI 中，或者更改对 UI 根本不重要。

2.  该命令将更改单个查询的结果

3.  该命令将更改多个查询的结果，通常（至少在我的域中）以级联方式更改，也就是说，更改单个“高级”数据的状态可能会影响许多“低级”缓存。

我的第一个触发器是页面加载，很少有项目可以免除这一点，因为大多数页面必须假定数据自上次访问以来已更新。尽管某些系统可能只需以这种方式更新财务和其他关键数据即可逃脱。

对于短命令，我还会在命令返回“成功”时更新数据。虽然这主要是懒惰，因为恕我直言，所有 CQRS 命令都应该异步触发。它仍然是我不能没有的一个选项，但如果您的实现期望命令和查询之间存在高延迟，您可能不得不这样做。

我开始使用的一种模式是中介（大多数 MVVM 框架都有一个）。当我发出命令时，我还会向中介者发出一条消息，指定启动了哪个命令。每个缓存（一个视图模型属性`Retriever<T>`）都会监听影响它的命令，然后适当地更新。我尝试最小化消息的数量，同时仍然最小化从单个消息中更新不必要的缓存的数量，所以我（希望）最终会得到一个更新原因的候选列表，每个“原因”都会更新一个缓存列表。

另一种方法是简单的诚实，我发现通过以图形方式展示系统如何更新本身使用户更愿意耐心等待。在触发命令时显示一些 UI，指示您正在等待成功响应，在错误时您可以提供重试/显示错误，在成功时您开始更新相关字段。请记住，此命令可能已从另一个终端（您不知道）触发，因此数据最终需要超时以避免丢失其他机器调用的状态更改。

注意到具有讽刺意味的是，在客户端上更新缓存和值的唯一有效方法是再次取消分离命令和查询，无论是通过硬编码还是哈希图之类的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T02:06:50.330

我的两分钱。

我认为 MVVM 实际上非常适合 CQRS。ViewModel 简单地变成了一个可观察的 ReadModel。

1 - 您通过对 ReadModel 的查询来初始化您的 ViewModel 状态。

2 - ViewModel 上的更改会自动反映在绑定到它的任何视图上。

3 - 您的 ViewModel 上的某些更改会触发一个传播到消息队列的命令，负责将这些命令发送到服务器的对象将这些消息从队列中取出并将它们发送到 WriteModel。

4 - 客户端应该是正确的，这意味着 ViewModel 在触发命令之前应该已经执行了适当的验证。一旦命令被触发，任何事件通知都可以发布到事件总线上，以便客户端将更改传达给系统中对这些更改感兴趣的其他 ViewModel 或组件。这些事件应携带必要的相关信息。通常，这意味着其他视图模型通常不必因为更改而重新查询读取模型，除非它们依赖于需要检索的其他数据。

5 - 有一个对象连接到服务器上的消息总线以在其他客户端进行此客户端有兴趣了解的更改时进行实时推送通知，必要时回退到长轮询。它将这些信息传播到将客户端上的组件联系在一起的内部消息总线。

6 - 最后要处理的部分是客户端可以偶尔连接的事实，这应该是命令失败的唯一原因（他们目前没有互联网访问权限），此时应该通知客户端出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T07:44:19.377

在我的 ASP.NET MVC 3 中，我根据用例使用 2 种技术：

*   众所周知的 Post-Redirect-Get 模式非常适合 CQRS。触发命令的 MVC 操作将重定向到执行查询的操作。
*   在某些情况下，比如其他客户端的实时更新，我依赖于域事件/消息。我创建了一个事件处理程序，它使用 singlarR 将更改推送到所有已连接且感兴趣的客户端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:39:53.570

据我所知，您可以采取两种主要方法：

1）设计你的用户界面，让用户不会马上看到它的变化。比如一条信息告诉他他的行动是成功的，并为他提供不同的选择来继续他的工作。这应该为您赢得足够的时间来更新您的 readmodel。

2）更复杂，但您可能会保留已发送到服务器的信息并在界面中显示它们。

我想最重要的是，如果可以的话，教育你的用户，让他们知道为什么数据不在这里......但是！

我现在才考虑它，但这些是用于同步命令处理，而不是异步，在异步中事情变得更加困难......客户端界面也成为事件吞噬者......

# vba - VBA：使用 Or 时抛出错误（在 If-Then 语句中），第一个条件测试对象是否为空

> ID：11337620
> 
> 赞同：0
> 
> 时间：2012-07-05T03:46:35.940
> 
> 标签：vba, if-statement, short-circuiting

对于自定义对象，我想测试两个条件。首先是对象是否是虚无。如果是，请输入该块。如果对象不是什么都不是，我想对对象的一个​​属性进行测试，只有通过了这个测试才进入块。

因此，该声明将类似于：

```
If myObject Is Nothing Or myObject.myInt > x Then
    'Perform my task
End If 
```

如果 myObject 实际上什么都不是，则会引发错误，因为当它测试第二个条件时，它会尝试访问不存在的对象的属性。

如果发现第一个条件为真，我过去使用过的大多数语言都不会费心测试 Or 语句的第二个条件，因此您可以不用写上面的行。VBA 似乎不允许这样做。是否有任何等效的方式可以编写此声明，而无需诉诸：

```
If myObject Is Nothing Then
    'Perform my task
ElseIf myObject.myInt > x Then
    'Perform my task
End If 
```

?

为清晰而编辑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T04:09:33.700

您可以创建一个标志：

```
PerformTheTask = False

If myObject Is Nothing Then
    PerformTheTask = True
ElseIf myObject.myInt > x Then
    PerformTheTask = True
End If

If PerformTheTask Then
    'Perform my task
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:13:12.273

它不能帮助您解决代码问题，但我想我会在短路运算符评估中包含一个指向 Wikipedia 页面的指针：

> [http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

它包括一个有用的常用语言常用运算符表，对它们是否遵守短路语义或总是急切地进行分类。在 VBA 的特定基础中，他们确认操作数`And`和`Or`确实被*热切*评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T05:34:19.923

虽然这有点不寻常，但您也可以执行以下操作：

```
Select Case True
    Case myObject Is Nothing, myObject.myInt > x
        'Perform task
End Select 
```

选择隐式比较将使用短路评估。“或”不会。

# jquery-ui - jQuery UI 组合框在 IE 9.x 中无法正确呈现？

> ID：11337625
> 
> 赞同：1
> 
> 时间：2012-07-05T03:47:10.673
> 
> 标签：jquery-ui, combobox, jquery-ui-autocomplete

[我在Combobox jQuery Autocomplete Demo](http://jqueryui.com/demos/autocomplete/#combobox)有一个基于 Combobox 自动完成演示的 html 页面。问题是组合框在 FireFox 13.x 中完美呈现。但是，在 IE 9.x（64 位）中，它正确地完成了自动完成部分，但外观很奇怪，正如您在此链接中看到的那样：[Strange jQuery Combobox Appearance in IE](http://screencast.com/t/6swMlGAA) 9.x。我认为 jQuery 是完美的跨浏览器技术，但它看起来不像。或者我的 html 代码中可能缺少某些内容？完整的 html 代码如下所示。

```
 <html>
        <head>
        <meta charset="utf-8">
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="css/cupertino/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
        <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script>
        <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
        <style>
        .ui-combobox {
            position: relative;
            display: inline-block;
        }
        .ui-combobox-toggle {
            position: absolute;
            top: 0;
            bottom: 0;
            margin-left: -1px;
            padding: 0;
            /* adjust styles for IE 6/7 */
            *height: 1.7em;
            *top: 0.1em;
        }
        .ui-combobox-input {
            margin: 0;
            padding: 0.3em;
        }
        </style>
        <script type="text/javascript">
            (function ($) {
                $.widget("ui.combobox", {
                    _create: function () {
                        var input,
                        self = this,
                        select = this.element.hide(),
                        selected = select.children(":selected"),
                        value = selected.val() ? selected.text() : "",
                        wrapper = this.wrapper = $("<span>")
                            .addClass("ui-combobox")
                            .insertAfter(select);

                        input = $("<input>")
                        .appendTo(wrapper)
                        .val(value)
                        .addClass("ui-state-default ui-combobox-input")
                        .autocomplete({
                            delay: 0,
                            minLength: 0,
                            source: function (request, response) {
                                var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                                response(select.children("option").map(function () {
                                    var text = $(this).text();
                                    if (this.value && (!request.term || matcher.test(text)))
                                        return {
                                            label: text.replace(
                                                new RegExp(
                                                    "(?![^&;]+;)(?!<[^<>]*)(" +
                                                    $.ui.autocomplete.escapeRegex(request.term) +
                                                    ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                                ), "<strong>$1</strong>"),
                                            value: text,
                                            option: this
                                        };
                                }));
                            },
                            select: function (event, ui) {
                                ui.item.option.selected = true;
                                self._trigger("selected", event, {
                                    item: ui.item.option
                                });
                            },
                            change: function (event, ui) {
                                if (!ui.item) {
                                    var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                        valid = false;
                                    select.children("option").each(function () {
                                        if ($(this).text().match(matcher)) {
                                            this.selected = valid = true;
                                            return false;
                                        }
                                    });
                                    if (!valid) {
                                        // remove invalid value, as it didn't match anything
                                        $(this).val("");
                                        select.val("");
                                        input.data("autocomplete").term = "";
                                        return false;
                                    }
                                }
                            }
                        })
                        .addClass("ui-widget ui-widget-content ui-corner-left");

                        input.data("autocomplete")._renderItem = function (ul, item) {
                            return $("<li></li>")
                            .data("item.autocomplete", item)
                            .append("<a>" + item.label + "</a>")
                            .appendTo(ul);
                        };

                        $("<a>")
                        .attr("tabIndex", -1)
                        .attr("title", "Show All Items")
                        .appendTo(wrapper)
                        .button({
                            icons: {
                                primary: "ui-icon-triangle-1-s"
                            },
                            text: false
                        })
                        .removeClass("ui-corner-all")
                        .addClass("ui-corner-right ui-combobox-toggle")
                        .click(function () {
                            // close if already visible
                            if (input.autocomplete("widget").is(":visible")) {
                                input.autocomplete("close");
                                return;
                            }

                            // work around a bug (likely same cause as #5265)
                            $(this).blur();

                            // pass empty string as value to search for, displaying all results
                            input.autocomplete("search", "");
                            input.focus();
                        });
                    },

                    destroy: function () {
                        this.wrapper.remove();
                        this.element.show();
                        $.Widget.prototype.destroy.call(this);
                    }
                });
            })(jQuery);

            $(function () {
                $("#combobox").combobox();
                $("#toggle").click(function () {
                    $("#combobox").toggle();
                });
            });
        </script>
    </head>
    <body>
        <div class="demo">
            <div class="ui-widget">
                <label>
                    Your preferred programming language:
                </label>
                <select id="combobox">
                    <option value="">Select one...</option>
                    <option value="ActionScript">ActionScript</option>
                    <option value="AppleScript">AppleScript</option>
                    <option value="Asp">Asp</option>
                    <option value="BASIC">BASIC</option>
                    <option value="C">C</option>
                    <option value="C++">C++</option>
                    <option value="Clojure">Clojure</option>
                    <option value="COBOL">COBOL</option>
                    <option value="ColdFusion">ColdFusion</option>
                    <option value="Erlang">Erlang</option>
                    <option value="Fortran">Fortran</option>
                    <option value="Groovy">Groovy</option>
                    <option value="Haskell">Haskell</option>
                    <option value="Java">Java</option>
                    <option value="JavaScript">JavaScript</option>
                    <option value="Lisp">Lisp</option>
                    <option value="Perl">Perl</option>
                    <option value="PHP">PHP</option>
                    <option value="Python">Python</option>
                    <option value="Ruby">Ruby</option>
                    <option value="Scala">Scala</option>
                    <option value="Scheme">Scheme</option>
                </select>
            </div>
            <button id="toggle">
                Show underlying select</button>
        </div>
        <!-- End demo -->
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:29:21.287

我刚刚发现在 IE 中导致不正确渲染的问题。为了在 IE 中正确呈现内容，使用 jQuery 时，**您必须指定文档类型，如下面的代码所示**。这将使 jQuery 组合框在 IE 中正确呈现。

```
<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>
    <link type="text/css" href="css/cupertino/jquery-ui-1.8.21.custom.css" rel="stylesheet" />
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.21.custom.min.js"></script> 
```

**作为替代方案**，您还可以使用以下 Web URL 来获取本示例中与 jQuery 相关的 css 和脚本，而不是上面代码示例中提到的本地 URL。

```
<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <title>jQuery UI Example Page</title>

    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui
                 /1.8/themes/cupertino/jquery-ui.css" type="text/css" media="all" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2
                 /jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-
                ui.min.js" type="text/javascript"></script> 
```

# javascript - 如何改变设计所以它不会显示文本字段？

> ID：11337629
> 
> 赞同：0
> 
> 时间：2012-07-05T03:47:54.897
> 
> 标签：javascript, save, savefiledialog

> **可能重复：**
> [输入类型=文件仅显示按钮](https://stackoverflow.com/questions/1084925/input-type-file-show-only-button)

有这样的设计：

![](../Images/8e6bef60aca0b90a92f2c363195fedad.png)

我可以修改它使其不显示文本字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:41:26.197

[在quirksmode](http://www.quirksmode.org/dom/inputfile.html)中找到了一个非常好的指南- 设置输入类型 =“文件”

引用**一些修改**以匹配问题：

> 1.  取一个法线`<input type="file">`并将其放入一个带有`position: relative`. 或者`absolute`
>     
>     
> 2.  向同一父元素添加具有正确样式的图像或按钮。绝对定位此元素，使它们与`<input type="file">.`
>     
>     
> 3.  将 的 设置为`z-index`使其`<input type="file">`位于`2`样式图像或按钮的顶部。
>     
>     
> 4.  最后，将 的设置`opacity`为。现在变得实际上是不可见的，并且样式化的图像或按钮会发光，但您仍然可以单击“浏览”按钮。（请注意，您不能使用，因为真正不可见的元素也是不可点击的，我们需要保持可点击）`<input type="file">``0``<input type="file">``visibility: hidden``<input` `type="file">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:51:26.430

建议：可以使用[uploadify插件](http://www.uploadify.com/demos/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T03:57:36.190

在您的问题中看不到 jQuery 标记，但是嘿，它很有帮助，并且可能很容易在 vanilla JS 中重写。这是我从[Ideal Forms](https://github.com/elclanrs/jq-idealforms)中提取的一个小 jQuery 插件，我在 github 上维护的一个插件。它涵盖了做你想做的所有基础知识，并为 IE 和`multiple`HTML5 浏览器提供后备。加上处理事件和标记替换。CSS 是你自己的，但没有什么太复杂的样式，如你所见。如果需要，您也可以隐藏文本字段。这里的想法是，这允许使用 CSS 进行任何可能的自定义。

```
$.fn.toCustomFile = function () {
  return this.each(function () {

    var

    $file = $(this), // The file input

    // Necessary markup
    $wrap = $('<div class="wrap">'),
    $input = $('<input type="text" class="filename" />'),
    $button = $('<button type="button" class="upload">Open</button>')

    // Hide by shifting to the left, that way can 
    // still use events that are otherwise problematic
    // if the field is hidden as in "display: none"
    $file.css({
      position: 'absolute',
      left: '-9999px'
    })

    // Events
    $button
      .attr('tabIndex', -1) // disable focus on button for better usability
      .click(function () {
        $file.trigger('click') // Yes, `click`, not `change`. Crossbrowser compat.
      })

    $file
      .attr('tabIndex', -1)
      .on({
        change: function () {
          // Detect if browser supports HTML5 "file multiple"
          var multipleSupport = typeof $('input')[0].multiple !== 'undefined',
              files = [],
              fileArr,
              filename
          if (multipleSupport) {
            fileArr = $file[0].files
            for (var i = 0, len = fileArr.length; i < len; i++)
              files.push(fileArr[i].name)
            filename = files.join(', ')
          } else {
            filename = $file.val().split('\\').pop() // Remove fakepath
          }
          $input.val(filename)
          // Set filename as title tooltip on 
          // input field for better usability
          $input.attr('title', filename)
        },
        focus: function () {
          $input.trigger('focus')
        }
    })

    $input
      .on({
        keyup: function () { $file.trigger('change') },
        focus: function () { $file.trigger('change') },
        blur: function () { $file.trigger('blur') },
        // Open files when pressing [ENTER]
        // on the input field
        keydown: function (e) { if (e.which === 13) $file.trigger('click') }
      })

    // Append to DOM
    $wrap.append($button, $input).insertAfter($file)

  })
} 
```

这是一个易于使用的要点：[https ://gist.github.com/3051209](https://gist.github.com/3051209)

# ruby - 防止 ruby sinatra 中的会话固定

> ID：11337630
> 
> 赞同：7
> 
> 时间：2012-07-05T03:48:15.203
> 
> 标签：ruby, security, session, sinatra, session-fixation

ruby 中的大多数会话固定主题大多与 Rails 相关。sinatra 中是否存在会话修复漏洞？在 Rails 中，我们主要建议在分配会话之前执行 reset_session。我们如何防止 sinatra 中的会话固定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:46:15.653

Sinatra 默认使用 Rack::Protection gem 来防止很多常见的漏洞。您可能对它的会话劫持保护特别感兴趣。这些是 Rack::Protection gem 可以防止的一些事情：

### 跨站请求伪造

**真实性令牌：**如果给定的访问令牌与会话中包含的令牌匹配，则仅接受不安全的 HTTP 请求。**表单令牌：**仅当给定的访问令牌与会话中包含的令牌匹配时才接受提交的表单。不期望来自 Ajax 请求的此类令牌。**远程令牌：**仅当给定的访问令牌与会话中包含的令牌匹配或请求来自同一来源时，才接受不安全的 HTTP 请求。**JSON CSRF：** JSON GET API 很容易被嵌入为 JavaScript，而 Array 原型已被修补以跟踪数据。如果内容类型是 JSON，即使在 GET 请求上也会检查引荐来源网址。**远程推荐人：**如果 Referer [sic] 标头设置为不同的主机，则不接受不安全的 HTTP 请求。

### 跨站脚本

**XSS Header：**设置 X-XSS-Protection 标头来告诉浏览器阻止攻击。点击劫持。**转义参数：**自动转义 Rack::Request#params 以便它们可以嵌入到 HTML 或 JavaScript 中，而不会出现任何进一步的问题。如果定义了转义字符串，则调用 html_safe，以避免在 Rails 中双重转义。

### 点击劫持

**框架选项：**设置 X-Frame-Options 标头以告诉浏览器避免将页面嵌入框架中。

### 目录遍历

取消转义 '/' 和 '.'，扩展 path_info。因此 GET /foo/%2e%2e%2fbar 变为 GET /bar。

### 会话劫持

跟踪会话中的用户代理等请求属性，并在这些属性更改时清空会话。这基本上可以防止来自 Firesheep 的攻击。由于考虑到的所有标头也可能被欺骗，因此这不会阻止所有劫持尝试。

### IP 欺骗

检测（某些）IP 欺骗攻击。

*与大多数与安全相关的问题一样，了解 Web 安全的一般知识是个好主意。*不幸的是，没有很多专门针对 Sinatra 安全性的好的教程。

# excel - VBA-创建用户定义的函数

> ID：11337631
> 
> 赞同：0
> 
> 时间：2012-07-05T03:48:21.667
> 
> 标签：excel, vba

我想创建一个函数，它将返回给定持续时间的分布的预期值。输入将仅采用以下格式 ExpValue(Jan--01/June30;EXPO(2000),July--01/Dec--31;NORM(1000,2000)) 其中 Jan--01/June30 和 July --01/Dec--31 是持续时间。而且，EXPO(2000) 和 NORM(1000,2000) 是该特定季节数据的分布类型（括号中提供了平均值、标准偏差等）。用户只需要输入4个字母开头的分布类型，例如：NORM表示NORMAL分布EXPO表示EXPONENTIAL分布等。可以有尽可能多的季节，用“，”分隔，每个季节的持续时间类型分别用“;”与持续时间分开。

我已经为该函数编写了代码，但它不起作用。请向我建议所需的更改。

```
Public Function ExpValue(str As String) As String

Dim Mylen As Integer
Dim A As Integer
Dim B As Integer
Dim C As Integer
Dim D As Integer
Dim i As Integer
Dim j As Integer
Dim k As Integer
Dim l As Double
Dim N As Integer
Dim ExpectValue As Double
Dim Arr1() As String
Dim Arr2() As String
Dim Arr3() As String
Dim Arr4() As String
Dim Arr5() As String
Dim Arr6() As String
Dim Arr7() As Double
Dim txt1 As String
Dim txt2 As String
Dim txt3 As String
Dim txt4 As String
Dim txt5 As String
Dim txt6 As String

Arr1() = Split(str, ",")
C = UBound(Arr1())
ReDim Arr1(C) As String

    For i = 0 To C

            Arr2() = Split(Arr1(i), ";")
            ReDim Arr2(1) As String
            Arr3(i) = Arr2(0)
            Arr4(i) = Arr2(1)

    Next i

    ReDim Arr3(C) As String
    ReDim Arr4(C) As String

    For i = 0 To C
        txt1 = Arr4(i)
        Mylen = Len(txt1)
        txt2 = Left(txt1, 4)        ' type of distribution
        A = Mylen - 5
        B = Mylen - 6
        txt3 = Right(txt1, A)       ' 1,2.3,4,... )
        txt4 = Left(txt3, B)        ' 1,2.3,4.,..
        Arr5 = Split(txt4, ",")
        D = UBound(Arr5())

        ReDim Arr7(D) As Double
            For j = 0 To D
                Arr7(i) = CDbl(Arr5(i))
            Next j

        Select Case txt2

            Case "EXPO", "POIS"             ' just one number EXPO(2.34)
            l = CDbl(txt4)                  ' txt4=2.34
            Arr6(i) = l

            Case "NORM"
            ExpectValue = Arr7(1)
            Arr6(i) = ExpectValue

            Case "BETA"
            ExpectValue = (Arr7(1) / (Arr7(0) + Arr7(1)))
            Arr6(i) = ExpectValue

            Case "GAMM"
            ExpectValue = Arr7(0) * Arr7(1)
            Arr6(i) = ExpectValue

            Case "TRIA"
            ExpectValue = ((Arr7(0) + Arr7(1) + Arr7(2)) / 3)
            Arr6(i) = ExpectValue

            Case "UNIF"
            ExpectValue = ((Arr7(0) + Arr7(1)) / 2)
            Arr6(i) = ExpectValue

            Case "LOGN"
            ExpectValue = Exp((Arr7(0) + ((Arr7(1)) ^ 2)) / 2)
            Arr6(i) = ExpectValue

            Case "ERLA"
            ExpectValue = Arr7(0) * Arr7(1)
            Arr6(i) = ExpectValue

        End Select

    'Next j
    Next i
    'i = i + 1

    If C = 0 Then
        txt6 = Arr3(0) & ";" & Arr6(0)
    Else
        txt6 = ""

        For i = 0 To C
            txt6 = txt6 & "," & Arr3(i) & "," & Arr6(i)
        Next i

    End If

    ExpValue = txt5

End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:06:53.017

```
DateDiff("d",FirstDate,SecondDate) '+ 1 
```

将给出两个日期之间的天数差异，“m”表示月份等。这将从第一个日期开始为您提供，因此将排除它，因此如果您想要总天数只需 +1。

至于你上面的代码，我让它工作了，但很难理解你想要实现的目标。可能有比将整个方程式作为字符串传递更好的方法。

```
=ExpValue("1/1/2001-30/6/2001;EXPO(2000)|1/7/2001-31/12/2001;NORM(1000,2000)") 
```

我更改了等式中的一些内容，以更好地识别字符串中的拆分部分。不能使用“，”，因为它包含在 NORM(,) 函数中。所以“-”分割日期，“;” 拆分函数，“|” 拆分两个方程。

这是我的尝试，代码应生成： ,181,2000,184,1000 其中 181 和 184 是输入的两个日期之间的天数。我相信选择案例方法也不能正常工作，但通过工作功能，您可以改进它。

```
Public Function ExpValue(str As String) As String

Dim Mylen As Integer, A As Integer, B As Integer, C As Integer, D As Integer, i As Integer
Dim j As Integer, k As Integer, l As Double, N As Integer, ExpectValue As Double
Dim Arr1() As String, Arr2() As String, Arr3() As String, Arr4() As String, Arr5() As String
Dim Arr6() As String, Arr7() As Double, txt1 As String, txt2 As String, txt3 As String
Dim txt4 As String, txt5 As String, txt6 As String

Dim d1 As Date, d2 As Date, ArrDate() As String
Dim dPart() As Integer

Arr1() = Split(str, "|")
C = UBound(Arr1())

ReDim Arr3(C)
ReDim Arr4(C)
ReDim dPart(C)

For i = 0 To C
    Arr2() = Split(Arr1(i), ";")
    Arr3(i) = Arr2(0)
    Arr4(i) = Arr2(1)

    ArrDate() = Split(Arr2(0), "-")
    d1 = ArrDate(0)
    d2 = ArrDate(1)
    dPart(i) = DateDiff("d", d1, d2) + 1
Next i

ReDim Preserve Arr3(C) As String
ReDim Preserve Arr4(C) As String
ReDim Arr6(C)

For i = 0 To C
    If Arr4(i) <> "" Then
    txt1 = Arr4(i)
    Mylen = Len(txt1)
    txt2 = Left(txt1, 4)    ' type of distribution
    A = Mylen - 5
    B = Mylen - 6
    txt3 = Right(txt1, A)    ' 1,2.3,4,... )
    txt4 = Left(txt3, B)        ' 1,2.3,4.,..
    Arr5 = Split(txt4, ",")
    D = UBound(Arr5())

    ReDim Preserve Arr7(D) As Double

        For j = 0 To D
                Arr7(j) = CDbl(Arr5(0))
        Next j

        Select Case txt2

        Case "EXPO", "POIS"        ' just one number EXPO(2.34)
        l = CDbl(txt4)        ' txt4=2.34
        Arr6(i) = l

        Case "NORM"
        ExpectValue = Arr7(0)
        Arr6(i) = ExpectValue

        Case "BETA"
        ExpectValue = (Arr7(1) / (Arr7(0) + Arr7(1)))
        Arr6(i) = ExpectValue

        Case "GAMM"
        ExpectValue = Arr7(0) * Arr7(1)
        Arr6(i) = ExpectValue

        Case "TRIA"
        ExpectValue = ((Arr7(0) + Arr7(1) + Arr7(2)) / 3)
        Arr6(i) = ExpectValue

        Case "UNIF"
        ExpectValue = ((Arr7(0) + Arr7(1)) / 2)
        Arr6(i) = ExpectValue

        Case "LOGN"
        ExpectValue = Exp((Arr7(0) + ((Arr7(1)) ^ 2)) / 2)
             Arr6(i) = ExpectValue

        Case "ERLA"
        ExpectValue = Arr7(0) * Arr7(1)
        Arr6(i) = ExpectValue

        End Select
    End If
    Next i

    If C = 0 Then
        txt6 = dPart(0) & ";" & Arr3(0) & ";" & Arr6(0)
    Else
        txt6 = ""

        For i = 0 To C
            txt6 = txt6 & "," & dPart(i) & "," & Arr6(i)
        Next i
    End If

    ExpValue = txt6

End Function 
```

# javascript - Eclipse Web Development - 安装哪些插件以及如何获取 Dojo、Ajax - 所见即所得的开发

> ID：11337634
> 
> 赞同：1
> 
> 时间：2012-07-05T03:48:28.657
> 
> 标签：javascript, jsp, servlets, dojo, wysiwyg

Eclipse Java Web Development - 安装哪些插件以及如何让 Dojo、Ajax - WYSIWYG 开发工作。我一直在为在 Eclipse 上进行 Web 开发而苦苦挣扎——我对 Aptana、Netbeans 或 Dojo 的 Maquetta 不感兴趣——请告诉我如何配置任何版本的 Eclipse——Helios、Indigo、Juno 以拥有 dojo、javascipt、html , jsp servlet 与所见即所得一起工作。

非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:59:38.087

您可以从 Eclipse 下载站点下载 Eclipse Java EE 包。您可以参考此[链接](http://www.eclipse.org/downloads/moreinfo/compare.php)以更详细地比较不同的 eclipse 包。

它附带 JavaScript 开发工具包（JSDT）和 WST（Web Started Toolkit），可帮助您开始 Web 开发。我相信 WST 工具包还包含一个用于创建 html 页面的 WYSIWYG 编辑器。

# jquery - DataTables 页眉和页脚显示不正确

> ID：11337642
> 
> 赞同：0
> 
> 时间：2012-07-05T03:50:12.917
> 
> 标签：jquery, datatables

我在使用页眉和页脚样式的[DataTables时遇到问题。](http://datatables.net)

问题：

*   标题将搜索框放在新行上，而不是在同一行上浮动。
*   th 的分页按钮/图标也显示在新行上。
*   页脚按钮显示为模糊。

![在此处输入图像描述](../Images/623082751d11917fe8812ba32957ef74.png)

我已经尝试排除除平滑度之外的所有其他 css 文件（这使它看起来是灰色的）。我错过了一些设置吗？我在整个网站上查看了示例，但他们没有提到这个问题。

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <link href="css/smoothness/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
    <script language="javascript" type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script language="javascript" type="text/javascript" src="jquery.dataTables.js"></script>
    <script language="javascript" type="text/javascript" src="jquery.dataTables.nightly.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        oTable = $('#num2').dataTable({
            "bJQueryUI": true,
            "sPaginationType": "full_numbers"
        });
    } );

    </script>

</head>
<body>
        <table id="num2">

            <thead>
            <tr>
                <th>
                num 1
                </th>
                <th>
                num 2
                </th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>john
                </td>
                <td>
                joe
                </td>
            </tr>
            </tbody>

        </table>
</body>
</html> 
```

这是页眉和页脚的外观： ![在此处输入图像描述](../Images/841505d6ce0b643ea6d0e884feba50b3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:19:19.710

从外观上看，您缺少数据表的“结构”CSS 文件。我自己没有使用过 Datatables，但我对 jQuery 和 jQuery UI 有很多经验，而且 CSS 文件在“结构”和“主题”之间非常清晰地分开。现在我注意到您已经包含了 css/smoothness/jquery-ui-1.8.21.custom.css 文件，该文件（假设您勾选了下载站点上的所有框）包含标准小部件的所有结构 CSS（手风琴、对话框、选项卡等）和一个主题（平滑度）。我认为您缺少的是 DataTables 结构 CSS 文件，它不是 jQuery UI 的默认小部件，因此需要从 DataTables 站点获取。看看他们网站上的主题滚轮示例，他们还有一个 /demo_table_jui.css 的 CSS 文件”

在 iFrame 内渲染应该无关紧要

# jquery-mobile - 如何更改迷你拨动开关的宽度？

> ID：11337653
> 
> 赞同：2
> 
> 时间：2012-07-05T03:51:31.960
> 
> 标签：jquery-mobile, jquery, togglebutton

我无法更改迷你版翻转拨动开关的宽度，并且文本未全部显示。

如果它不是迷你的，我可以使用将其添加到 CSS 的技术来更改宽度：

```
 .containing-element .ui-slider-switch { width: 7em } 
```

然后将开关封装在一个div中。

如果我设置 data-mini="true" 则完全相同，并且切换变为迷你，但我无法更改宽度。

如果翻转拨动开关是迷你的，我如何更改宽度？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T01:02:20.150

看起来如果你添加 !important 到你的 css，它就可以工作。尝试

```
.containing-element 
.ui-slider-switch { width: 7em !important } 
```

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T14:21:35.737

When using ui-mini you need to mention that in the css as well, Try this

```
.containing-element .ui-slider-switch.ui-mini { width: 7em } 
```

# cloud-foundry - 使用 Micro Cloud Foundry 的外部域

> ID：11337654
> 
> 赞同：2
> 
> 时间：2012-07-05T03:51:42.063
> 
> 标签：cloud-foundry

我知道这是一个关于 Cloud Foundry 的常见问题，目前的回答令人失望，尽管我知道使用 Micro Cloud Foundry 的实例是不可能的，但我想问一下只是为了确定。是否可以在 Micro Cloud Foundry 实例上配置外部域，而无需从 cloudfoundry 子域建立隧道？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:16:18.610

这对于库存的 Micro Cloud Foundry VM 是不可能的。但是，您可以通过 SSH 连接到 VM 并修改必要的文件，以便它响应您选择的域。在此处查找指针：http: [//support.cloudfoundry.com/entries/20404628-how-does-url-addressing-work](http://support.cloudfoundry.com/entries/20404628-how-does-url-addressing-work)

# ruby - rails rspec - 如何检查模型常数？

> ID：11337660
> 
> 赞同：16
> 
> 时间：2012-07-05T03:52:18.280
> 
> 标签：ruby, rspec, constants

我该怎么做：

```
it { should have_constant(:FIXED_LIST) } 
```

在我的模型（活动记录）中，我有`FIXED_LIST = 'A String'`

它不是数据库属性或方法，我无法使用`responds_to`或`has_attribute`测试它（它们失败了）。我可以用什么来检查它。- 顺便说一句，我安装了应该匹配器。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T15:22:49.607

根据 David Chelimsky 的回答，我可以通过稍微修改他的代码来实现这一点。

在文件 spec/support/utilities.rb（或 spec/support 中的其他文件）中，您可以输入：

```
RSpec::Matchers.define :have_constant do |const|
  match do |owner|
    owner.const_defined?(const)
  end
end 
```

注意使用“RSpec::Matchers.define”而不是“matchers”

这允许测试规范中的常量，例如：

```
 it "should have a fixed list constant" do
    YourModel.should have_constant(:FIXED_LIST)
 end 
```

注意使用“have_constant”而不是“have_const”

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T23:41:09.130

它读起来有点傻，但是：

```
describe MyClass do

  it { should be_const_defined(:VERSION) }

end 
```

原因是 Rspec 对以`be_`and开头的方法有“神奇的”匹配器`have_`。例如，`it { should have_green_pants }`将断言返回的`has_green_pants?`方法。`subject``true`

以同样的方式，一个例子`it { should be_happy }`会断言返回的`happy?`方法。`subject``true`

因此，该示例`it { should be_const_defined(:VERSION) }`断言`const_defined?(:VERSION)`返回`true`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-05T04:35:15.547

如果你想说`have_constant`你可以为它定义一个自定义匹配器：

```
matcher :have_constant do |const|
  match do |owner|
    owner.const_defined?(const)
  end
end

MyClass.should have_const(:CONST) 
```

如果您尝试使用单行语法，则需要确保主题是类（而不是实例）或在匹配器中检查它：

```
matcher :have_constant do |const|
  match do |owner|
    (owner.is_a?(Class) ? owner : owner.class).const_defined?(const)
  end
end 
```

有关自定义匹配器的更多信息，请参阅[http://rubydoc.info/gems/rspec-expectations/RSpec/Matchers](http://rubydoc.info/gems/rspec-expectations/RSpec/Matchers)。

HTH，大卫

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-03-25T20:10:25.023

另一种简单地确保定义常量的选项——不用担心它是用什么定义的：

```
it 'has a WHATEVER constant' do
  expect(SomeClass::WHATEVER).not_to be_nil
end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-04T13:41:21.387

对尝试测试常量已定义的任何人的警告：如果您的代码在定义类时*引用*了未定义的常量，那么您的规范将在测试之前崩溃。

这会让你相信

```
expect { FOO }.to_not raise_error 
```

未能捕获 NameError，因为您将得到一个很大的堆栈跟踪，而不是一个很好的“预计不会引发错误，但引发了 NameError”。

在巨大的堆栈跟踪中，很难注意到您的测试实际上在第 1 行崩溃：requre "spec/spec_helper" 因为您的整个应用程序在进入实际测试之前无法加载。

如果您有动态定义的常量，例如由 ActiveHash::Enum 完成，然后您在另一个常量的定义中使用它们，就会发生这种情况。不要费心测试它们是否存在，如果其中一个规范未能定义，您的应用程序中的每个规范都会崩溃。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-05T03:57:16.280

你可以使用

```
defined? YOUR_MODEL::FIXED_LIST 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-24T21:37:15.923

在 RSpec 2 中，我能够让它在一行中工作，如下所示：

`it { subject.class.should be_const_defined(:MY_CONST) }`

也就是说，检查类，而不是实例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-03T17:10:19.910

在我的模型中

```
 class Role < ActiveRecord::Base
   ROLE_ADMIN = "Administrador"     
 end 
```

在我的 rspec

```
 RSpec.describe Role, type: :model do
  let(:fake_class) { Class.new }

  describe "set constants" do
    before { stub_const("#{described_class}", fake_class) }

    it { expect(described_class::ROLE_ADMIN).to eq("Administrador") }
  end
end 
```

# android - Android 应用程序暂停 onStop

> ID：11337663
> 
> 赞同：2
> 
> 时间：2012-07-05T03:53:03.847
> 
> 标签：android, android-activity, lifecycle

我想做一个不能被杀死或破坏的应用程序。我试过了

```
@Override
public void onStop() {
     super.onPause();
} 
```

但这不起作用，应用程序仍然被杀死。那么，有没有其他方法可以让应用程序暂停而不是停止呢？感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T03:56:06.327

不。

对于长时间运行的任务，请使用服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:04:08.883

如果您正在谈论防止重新启动活动以进行配置更改，请尝试将 android:configChanges 添加到清单中的活动标记。

```
<activity
    android:name=".ActivityName"
    android:configChanges="keyboard|keyboardHidden|orientation|screenSize" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:31:17.553

您可以使用 onPause 而不是 onStop 方法。如果系统内存不足并且 GC 启动，活动的暂停并不能保证您的应用程序不会被杀死。

```
 @Override
  public void onPause() {

  } 
```

有关 Activity 的更多参考，请查看[此处](http://developer.android.com/guide/components/activities.html)

# javascript - 动态生成 iframe 导致先前生成的 iframe 异常刷新 - 使用 innerHTML 时

> ID：11337667
> 
> 赞同：1
> 
> 时间：2012-07-05T03:53:48.613
> 
> 标签：javascript, post, iframe, dynamic, innerhtml

提前感谢您的帮助。

我将表单值发布到多个动态生成的 iframe，并希望每个 iframe 的内容在我发布到另一个动态生成的 iframe 时保留。

正如您在我的示例中所看到的 - 即使只是通过 innerHTML += 动态创建和添加新的 iframe，也会导致先前生成的 iframe 刷新。

如果我不使用 javascript 创建 iframe，则情况并非如此——如果我只是提前编写 html 并发布到已经存在的 iframe，则不会出现任何刷新问题。之前发布的 iframe 将与发布的内容一起保留。

我不知道我需要多少个 iframe - 这就是我使用 javascript 动态生成 iframe 的原因。

我知道我可以将 AJAX 用于同样的目的，但我没有为此使用 AJAX。

**当我通过 Javascript 和innerHTML**动态添加另一个 iframe 时，我只需要知道为什么 iframe 会刷新，无论内容如何？

有没有办法在不刷新 iframe 的情况下实现这一点？

以我的例子 - 我只是表明 iframe 是令人耳目一新的。我不会向他们发帖。但问题显示相同。

单击“添加 iframe”按钮，最多 3 次。请注意在添加新 iframe 时刷新之前的 iframe。

这是我的这个问题的示例代码。

再次感谢。

* * *

```
<script type="text/javascript">
var Content_For_Iframe_Array = new Array("http://www.bing.com", "http://www.wordpress.com/", "http://www.webcrawler.com");

var Inc_iFrame_Num = 0;
function add_iframe_with_content(){
if(Inc_iFrame_Num < 3){
        var iFrame_String ="<iframe frameborder='5' src='"+Content_For_Iframe_Array[Inc_iFrame_Num]+"' scrolling ='yes' id='iFrame_"+Inc_iFrame_Num+"' style='height:300px; width:800px; margin:5px; padding:0px;'></iframe>";
        document.getElementById('iFrame_Container').innerHTML += iFrame_String;
        Inc_iFrame_Num++;
    }
}
</script>

<div style="cursor:pointer; background-color:#CCC; border:thin #7777 solid; width:85px; margin-top:40px; margin-bottom:14px;" onclick="add_iframe_with_content();">Add Iframe</div>
<div id="iFrame_Container" style="height:300px; width:800px; border:#CCC thin solid;">Div to hold Iframes</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T17:59:41.303

既然你解决了它，这就是它发生的原因。iframe 在技术上没有刷新，它们被销毁然后重新创建。

设置 时`innerHTML`，将删除元素内的所有现有节点，然后根据插入的 HTML 片段生成新节点。试试下面的实验。

```
<div id="el"><button>My Button</button></div>
<script>
    var myElement = document.getElementById('el');
    var button = myElement.firstChild;

    myElement.innerHTML = myElement.innerHTML;

    console.log(button);
    console.log(myElement.firstChild);
    console.log(button == myElement.firstChild);
    console.log(button.parentNode);
</script> 
```

在这里，你看到我们有`<div>`一个`<button>`. 我们将按钮存储为变量，然后“重新加载”内部 HTML。在日志的前两行中，元素看起来相同，但它们实际上是两个不同的节点。这可以通过第 3 行返回 false 的事实来证明，表明它们是不同的，第 4 行显示`button`没有父节点。它只是存在于内存中，因为我们有对它的引用。

正如您所发现的，更改元素子元素的非破坏性方法是使用 DOM 方法。您可以使用`appendChild`在末尾添加元素或`insertBefore`在不同位置插入子元素。较新的浏览器支持一种名为的方法`insertAdjacentHTML`，该方法执行您最初计划的操作，从字符串创建 HTML 并将其非破坏性地插入到节点的末尾。不过，我认为支持还不是很完善，而且其他 DOM 方法更容易理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T17:48:03.787

我想我找到了答案。正确的方法是使用`createElement()`and `appendChild()`。（见下面的代码）

但我仍然很想知道为什么 innerHTML 方法会刷新其他 iframe？

这是我的示例的正确用法：

```
// PROPER METHOD to place the new iframe
var iframe = document.createElement('iframe');
iframe.frameBorder = 5;
iframe.scrolling ='yes';
iframe.height = "300px";
iframe.width = "800px";
iframe.name = "iFrame_"+Inc_iFrame_Num;
document.getElementById("iFrame_Container").appendChild(iframe);
// 
```

# mysql - 在 ubuntu11.4 中安装 phpmyadmin 时出现访问被拒绝错误

> ID：11337674
> 
> 赞同：6
> 
> 时间：2012-07-05T03:54:40.473
> 
> 标签：mysql, ubuntu, phpmyadmin, ubuntu-11.04

我是 ubuntu 的新手。在 ubuntu11.4 服务器中安装 phpmyadmin 时出现错误。它说

```
An error occurred while installing the database:
ERROR 1045 (28000):Access denaid for user 'root'@'localhost' (using password:YES); 
```

我确定我使用了正确的 root 密码。我可以通过putty登录mysql。
我需要做任何有特权的事情吗？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-28T10:02:15.993

我建议：

```
mysql -h localhost -u root -p 
```

你输入了别的东西。:(

`pidof mysqld`到底说了什么？如果没有，然后`sudo service mysql start`尝试

```
mysql -h localhost -u root -p 
```

再次。

重新配置mysql服务器：

```
sudo dpkg-reconfigure mysql-server 
```

或者

```
sudo dpkg-reconfigure mysql-server-5.1 
```

无论安装哪个。

一旦你重新配置（并恢复）你的 root mysql 密码，然后重新配置 phpmyadmin

```
sudo dpkg-reconfigure phpmyadmin 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:16:22.660

我遇到了同样的问题，只是想出了我的问题。我在我的 Root 用户密码中使用了“ü”。似乎 PHPMYADMIN 无法处理 utf-8 集。所以我将密码更改为“abc”，它成功了！只是不要忘记撤消您的临时密码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-12T08:38:18.437

我遇到了同样的问题并再次安装了我的机器，因为我虽然做错了什么。但是重新安装Ubuntu后同样的问题。

对我有用的是安装 mysql-server 和 phpmyadmin 而不是 root 用户。我创建了一个新用户`adduser admin`并将他们放入 sudo 组中`adduser admin sudo`。之后，我使用 root 帐户退出我的 ssh 连接并使用新的管理员用户登录。现在，我安装了两个软件包，而且，令人惊讶的是，一切正常。

# c++ - 指向两个不同结构的指针

> ID：11337678
> 
> 赞同：2
> 
> 时间：2012-07-05T03:55:12.397
> 
> 标签：c++, pointers, structure

我有三个结构`header`,`dataA`和`dataB`。将`header`确定将使用的结构。`dataA`和具有几乎相同的`dataB`结构（比方说）：

```
struct dataA
{
    int   intValue;
    char  reserved1[8];
    float floatValue;
    char  reserved2[4];
    short shortValue;
};

struct dataA
{
    int   intValue;
    short shortValue;
    char  reserved[2];
    float floatValue;
}; 
```

我想像这样打印它：

```
sprintf(outStr, "%i, %f, %s", p->intValue, p->floatValue, p->shortValue); 
```

- 或者 -

```
sprintf(outStr, "%i, %f, %s", p.intValue, p.floatValue, p.shortValue); 
```

我该如何申报`p`？（**注意：**两者`dataA`的`dataB`结构都很大，但数据几乎相同，但***保留***值除外。）

我在想这样的事情：

```
void * p;

if (header->type==1)
   p = (dataA*)(pData);
else if (header->type==2)
   p = (dataB*)(pData);

// print all data here 
```

**注意：**这里`pData`是指向我将被读取的（原始）数据的指针。我只需要那些非*保留*值并忽略*保留*值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T03:58:38.423

将打印逻辑移动到函数模板中：

```
template <typename T>
int print_data(char* const str, std::size_t const len, T const* const p)
{
    return std::snprintf(
        str, len,
        "%i, %f, %s",
        p->intValue, p->floatValue, p->shortValue);
} 
```

然后从您的切换逻辑中调用此函数：

```
if (header->type==1)
    print_data(str, len, static_cast<dataA const*>(pData));
else if (header->type==2)
    print_data(str, len, static_cast<dataB const*>(pData)); 
```

如果您打算使用`std::snprintf`，最好将`static_assert`s 添加到`print_data`函数模板中，以确保数据成员`T`的类型是您期望的类型，只是为了确定。

请注意，如果您的平台有严格的对齐要求，并且`pData`不能保证指向的数据对于您的所有目标类型都正确对齐，则需要将强制转换替换为字节副本到适当对齐的缓冲区中。

# java - PorterduffXfermode：清除位图的一部分

> ID：11337679
> 
> 赞同：35
> 
> 时间：2012-07-05T03:55:13.357
> 
> 标签：java, android, bitmap, android-canvas, ondraw

目标是在某物的顶部绘制位图，并绘制擦除位图底层区域的形状。

我有一个概念证明来尝试了解我应该如何去做。我发现了许多关于使用的提示：

```
android.graphics.PorterDuff.Mode.CLEAR 
```

下面的代码创建了一个蓝色背景的屏幕并添加了一个自定义视图。此视图在其画布上从下到上绘制：粉红色背景，带有轻微插入以显示粉红色背景的位图，以及每个 PorterDuffXfermode 的黄色圆圈。

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.PorterDuffXfermode;
import android.graphics.Paint.Style;
import android.graphics.PorterDuff.Mode;
import android.graphics.RectF;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.RelativeLayout;

public class Test extends Activity {
    Drawing d = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        RelativeLayout.LayoutParams rlp = null;

        // Create the view for the xfermode test
        d = new Drawing(this);
        rlp = new RelativeLayout.LayoutParams(600, 900);
        rlp.addRule(RelativeLayout.CENTER_IN_PARENT);
        d.setLayoutParams(rlp);

        RelativeLayout rl = new RelativeLayout(this);
        rl.setBackgroundColor(Color.rgb(0, 0, 255));
        rl.addView(d);

        // Show the layout with the test view
        setContentView(rl);
    }

    public class Drawing extends View {
        Paint[] pDraw = null;
        Bitmap bm = null;

        public Drawing(Context ct) {
            super(ct);

            // Generate bitmap used for background
            bm = BitmapFactory.decodeFile("mnt/sdcard/Pictures/test.jpg");

            // Generate array of paints
            pDraw = new Paint[16];

            for (int i = 0; i<pDraw.length; i++) {
                pDraw[i] = new Paint();
                pDraw[i].setARGB(255, 255, 255, 0);
                pDraw[i].setStrokeWidth(20);
                pDraw[i].setStyle(Style.FILL);
            }

            // Set all transfer modes
            pDraw[0].setXfermode(new PorterDuffXfermode(Mode.CLEAR));
            pDraw[1].setXfermode(new PorterDuffXfermode(Mode.DARKEN));
            pDraw[2].setXfermode(new PorterDuffXfermode(Mode.DST));
            pDraw[3].setXfermode(new PorterDuffXfermode(Mode.DST_ATOP));
            pDraw[4].setXfermode(new PorterDuffXfermode(Mode.DST_IN));
            pDraw[5].setXfermode(new PorterDuffXfermode(Mode.DST_OUT));
            pDraw[6].setXfermode(new PorterDuffXfermode(Mode.DST_OVER));
            pDraw[7].setXfermode(new PorterDuffXfermode(Mode.LIGHTEN));
            pDraw[8].setXfermode(new PorterDuffXfermode(Mode.MULTIPLY));
            pDraw[9].setXfermode(new PorterDuffXfermode(Mode.SCREEN));
            pDraw[10].setXfermode(new PorterDuffXfermode(Mode.SRC));
            pDraw[11].setXfermode(new PorterDuffXfermode(Mode.SRC_ATOP));
            pDraw[12].setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
            pDraw[13].setXfermode(new PorterDuffXfermode(Mode.SRC_OUT));
            pDraw[14].setXfermode(new PorterDuffXfermode(Mode.SRC_OVER));
            pDraw[15].setXfermode(new PorterDuffXfermode(Mode.XOR));
        }

        @Override
        public void onDraw(Canvas canv) {
            // Background colour for canvas
            canv.drawColor(Color.argb(255, 255, 0, 255));

            // Draw the bitmap leaving small outside border to see background
            canv.drawBitmap(bm, null, new RectF(15, 15, getMeasuredWidth() - 15, getMeasuredHeight() - 15), null);

            float w, h;
            w = getMeasuredWidth();
            h = getMeasuredHeight();

            // Loop, draws 4 circles per row, in 4 rows on top of bitmap
            // Drawn in the order of pDraw (alphabetical)
            for(int i = 0; i<4; i++) {
                for(int ii = 0; ii<4; ii++) {
                    canv.drawCircle((w / 8) * (ii * 2 + 1), (h / 8) * (i * 2 + 1), w / 8 * 0.8f, pDraw[i*4 + ii]);
                }
            }
        }
    }

} 
```

这是测试的结果：

![在此处输入图像描述](../Images/2bac40df6fa329d8d7d3ddbb86fc61e7.png)

CLEAR 模式位于左上方，显示为黑色。

在我尝试使用它的另一个示例中，我有一个 DialogFragment，其中 CLEAR 模式擦除了整个 DialogFragment，以便可以看到下面的活动。因此，我在此测试中使用了许多不同的背景颜色。

这可能会像其他例子让我相信的那样清除整个活动的像素吗？我原以为只有与视图相关的画布像素可以被擦除，但在我的另一个示例中，自定义视图、底层图像视图和 DialogFragment 背景的像素都被清除了。

有人可以帮我理解到底发生了什么吗？

**编辑：** 我复制了一个例子来证实我的怀疑。当添加这个精确的自定义视图但在 DialogFragment 中时，底层活动变得可见。

![在此处输入图像描述](../Images/8d9a827f1abcf447e0e67a89fa09f041.png)

对我来说，这似乎是一个非常明确的指标，它`Mode.CLEAR`是否也在以某种方式擦除下面视图的画布？我的猜测是第一个示例中的黑色是顶级视图的黑色？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-08T20:36:24.970

问题是硬件加速。为您正在使用 CLEAR 绘制的特定视图将其关闭。如果您使用的是自定义视图，请在构造函数中执行此操作：

```
if (android.os.Build.VERSION.SDK_INT >= 11) 
{
     setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

您还可以在视图引用上调用 setLayerType。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-05T06:09:21.377

我看不出有什么意外。在 的特定情况下`Mode.CLEAR`，目标的颜色和 alpha 都被清除，从而允许显示黑色背景。该[实用程序](https://sites.google.com/site/drjohnbmatthews/composite)允许人们尝试各种模式、颜色和 alpha 值，并且来源可能会提供一些见解。在下面的（有些过时的）图像中，这些`CLEAR`区域显示了平台代表提供的微弱细条纹灰色`PanelUI`。

[![图片](../Images/2d3dd5db7aeb0c8116f5306ca0cfc689.png)](https://i.stack.imgur.com/cfjSf.png)
[（来源：[sites.google.com 上的 Composite](https://sites.google.com/site/drjohnbmatthews/composite)）]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-14T19:42:15.543

正如 Romain Guy 在这里指出的那样：[谷歌](https://code.google.com/p/android/issues/detail?id=54105#c1)你需要在位图上写的东西，而不是你想要清除的带有圆圈的画布，然后将其设置为视图中的主画布。因此，请执行以下操作：

```
// Generate bitmap used for background
            bm = BitmapFactory.decodeFile("mnt/sdcard/Pictures/test.jpg");

// Create the paint and set the bitmap
Canvas temp = new Canvas(bm.getHeight(), bm.getWidth, Config.ARGB_8888);

// in onDraw()
temp.drawCircle((w / 8) * (ii * 2 + 1), (h / 8) * (i * 2 + 1), w / 8 * 0.8f, pDraw[i*4 + ii]);

// After loop
canvas.drawBitmap(....); 
```

希望这可以帮助。

# mysql - 如何通过 mysql_fetch_array 打开分类从不同的 sql 表中获取数据

> ID：11337683
> 
> 赞同：0
> 
> 时间：2012-07-05T03:55:40.947
> 
> 标签：mysql, sql

这是打开的分类表。

这是`oc_posts`具有以下列的表：

```
idPost | idCategory | type | title | description 
```

这是另一个包含`oc_posthits`这些列的表：

```
idHit | idPost | hitTime 
```

我想获得点击量的标题列表，一个标题的点击量。完整列表。

我想像在打击示例中一样制作变量

```
$dynamicList = "";
$sql = mysql_query("SELECT * FROM oc_posts ORDER BY title ASC");
$productCount = mysql_num_rows($sql); // count the output amount
if ($productCount > 0) {
    while($row = mysql_fetch_array($sql)){ 
            $idPost=$row['idPost'];
                $postType=$row['type'];

                $postTitle=$row['title'];
                $category=$row['category'];//real category name
                $fcategory=$row['fcategory'];//frienfly name category
                $idCategoryParent=$row['idCategoryParent'];
                $fCategoryParent=$row['parent'];
                $postPassword=$row['password'];
                $insertDate=$row['insertDate'];

             $dynamicList .= '<table width="1000" border="0">
  <tr>

    <td width="800">' .$postTitle.'<a href="http://capitalclassified.com/manage/?post='.$idPost.'&amp;pwd='.$postPassword.'&amp;action=delete">Delete</a></td>
    <td width="150">'.$insertDate.'</td>
    <td width="50"><div class="bannerad">
<a href="http://capitalclassified.com/manage/?post='.$idPost.'&amp;pwd='.$postPassword.'&amp;action=edit">Edit</a>
</div> </td>
<td width="50"><div class="bannerad">
<a href="http://capitalclassified.com/manage/?post='.$idPost.'&amp;pwd='.$postPassword.'&amp;action=delete">Delete</a>
</div> </td>

  </tr>
</table>';
}
// if successful redirect to delete_multiple.php
if($result){
echo "<meta http-equiv=\"refresh\" content=\"0;URL=listing.php\">";
}
}
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:14:51.337

SELECT ops.*, oph.hitTime FROM oc_posts ops, oc_posthits oph WHERE oph.idPost = ops.idPost

你想要的是这样的东西吗？

# mysql - 从多对多数据库关系获取数据

> ID：11337687
> 
> 赞同：7
> 
> 时间：2012-07-05T03:56:06.080
> 
> 标签：mysql

我有一个包含用户评论的表，我想检索每个用户发表的最后评论。

下面的查询应该让你知道我想要做什么

```
select comment, comment_id, userId FROM comments_table 
WHERE comment_id in (
   SELECT MAX(comment_id)
   FROM comments_table where userId in (2001, 2002, 2010)
   GROUP BY userId
) 
```

上面的查询有效，但需要很长时间，尤其是在用户 ID 很多的情况下。

我需要一个更快的查询语句来完成同样的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T04:00:33.320

使用连接而不是子查询：

```
SELECT
    b.*
FROM
    (
        SELECT userid, MAX(comment_id) AS maxcomment
        FROM comments_table
        WHERE userid IN (2001, 2002, 2010)
        GROUP BY userid
    ) a
INNER JOIN
    comments_table b ON 
        a.userid = b.userid AND
        a.maxcomment = b.comment_id 
```

此查询中的子选择只会执行一次，而`WHERE IN`子查询将针对评论表中的每一行执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:00:44.177

尝试

```
 select comment, comment_id, userId FROM          comments_table WHERE userId in (2001, 2002, 2010) order by comment_id desc limit 1 
```

试试看这个查询是否与你的查询等效`userid`列上有一个索引，这应该比体面

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:04:26.357

让我们保持简单：

```
SELECT comment, MAX(comment_id), userId 
FROM comments_table 
WHERE userId IN (2001, 2002, 2010) 
GROUP BY userId; 
```

# xcode - 为什么我的 NSURLConnection 委托方法没有被调用？

> ID：11337689
> 
> 赞同：2
> 
> 时间：2012-07-05T03:56:09.547
> 
> 标签：xcode, multithreading, nsurlconnection, delegation

我已经完全按照[官方文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)的指示进行了操作。我创建了一个控制台项目用于测试目的。然后我创建了一个名为 RequestSender 的类（参见下面的代码），并在主函数中创建了这个类的一个实例。

请求发送者.h：

```
#import <Foundation/Foundation.h>
@interface RequestSender : NSObject <NSURLConnectionDelegate> {
    NSMutableData* d;
}
@end 
```

请求发送者.m：

```
#import "RequestSender.h"

@implementation RequestSender

- (id)init {
    self = [super init];
    if (self) {
        NSString* s = @"http://www.apple.com/";
        NSURL* u = [[NSURL alloc] initWithString:s];
        NSURLRequest* r = [[NSURLRequest alloc] initWithURL:u];
        NSURLConnection* c = [[NSURLConnection alloc] initWithRequest:r delegate:self];
        if (c) {
            d = [NSMutableData data];
        }

        return self;
    } else {
        return nil;
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [d setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [d appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
}

@end 
```

这无疑将在主线程和默认运行循环中执行。然而，没有调用委托方法。

我已经做了很多测试并阅读了很多帖子，但我仍然没有任何线索。

请帮我。这让我发疯。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:59:44.733

I believe you're missing the part where you *start* the connection. The connection class offers another method for this, or you could just call it off of your "c" object.

```
NSURLConnection* c = [[NSURLConnection alloc] initWithRequest:r delegate:self];
if (c) {
    d = [NSMutableData data];
    [c start];
} 
```

or

```
NSURLConnection* c = [[NSURLConnection alloc] initWithRequest:r delegate:self startImmediately:YES];
if (c) {
    d = [NSMutableData data];
} 
```

# android - 显示 ImageView 数组 5 秒

> ID：11337692
> 
> 赞同：2
> 
> 时间：2012-07-05T03:56:42.403
> 
> 标签：android, android-imageview

我有一个带有 ImageView 数组的 TableLayout，然后当我单击 menuInflater 时，它会出现五秒钟，然后隐藏并开始倒计时。

```
public boolean onOptionsItemSelected(MenuItem item) {

super.onOptionsItemSelected(item);

switch (item.getItemId()){

case R.id.txt1:
    handler = new Handler (this);
                Worker w = new Worker (handler);
               Thread t = new Thread (w);
               t.start();
     return true; 
```

* * *

```
 protected int [] imgIds = {
    R.id.img_1,R.id.img_2,R.id.img_3,R.id.img_4,R.id.img_5,R.id.img_6,
    R.id.img_7,R.id.img_8,R.id.img_9,R.id.img_10,R.id.img_11,R.id.img_12,
   };

public class Worker implements Runnable{

private Handler h;

public Worker (Handler h)
{
this.h = h;
}

@Override
public void run() {

for(int i=0; i<10; i++)
{
    imgIds.setsetVisibility(View.INVISIBLE)

    try{
        Thread.sleep(1000);
    }catch (InterruptedException e){
        e.printStackTrace();
    }
}
h.postDelayed(Worker,1000);
 }   
 } 
```

然后 ImageView 隐藏并启动游戏。

**这段代码是错误的，所以如果有人可以帮助我。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T04:55:38.793

[帧动画](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)将为您提供帮助

以下片段将指导您。

```
package com.org.sampleproject;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.os.Handler;
import android.view.Menu;
import android.view.View;
import android.widget.ImageView;
import android.widget.Toast;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AnimationDrawable animation = new AnimationDrawable();
        animation.addFrame(getResources().getDrawable(R.drawable.img1), 1000); //1 Sec
        animation.addFrame(getResources().getDrawable(R.drawable.img2), 1000); //1 Sec 
        animation.addFrame(getResources().getDrawable(R.drawable.img3), 1000); //1 Sec 
        animation.addFrame(getResources().getDrawable(R.drawable.img4), 1000); //1 Sec
        animation.addFrame(getResources().getDrawable(R.drawable.img5), 1000); //1 Sec
        animation.setOneShot(true);

        final ImageView imageAnim = (ImageView) findViewById(R.id.image);
        imageAnim.setBackgroundDrawable(animation);

        animation.start();

        new Handler().postDelayed(new Runnable() {

            @Override
            public void run() {
                imageAnim.setVisibility(View.INVISIBLE);

                //Perform Your Task Here 

            }
        }, animation.getNumberOfFrames() * 1000);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:51:35.307

也许您可以使用 CountDownTimer ：

[http://developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

```
protected int [] imgIds = {
R.drawable.img_1,R.drawable.img_2,...
};

new CountDownTimer(12000, 1000) {
    public void onTick(long millisUntilFinished) {
       img.setImageResource(R.drawable.my_image);
    } 
```

# core-data - 如何在 Core Data 中本地化数据

> ID：11337695
> 
> 赞同：1
> 
> 时间：2012-07-05T03:57:20.137
> 
> 标签：core-data, localization, internationalization

我的应用程序预先填充了包含图标图像及其名称的类别数据。在下一个版本中我需要本地化它的名称，这可能吗？在这里找到[为本地化](https://stackoverflow.com/questions/5534681/how-to-represent-a-localized-string-type-in-core-data)方法添加关系，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:16:12.460

Core Data 没有内置“本地化”功能。[因此，如如何在 Core Data 中表示本地化字符串类型中](https://stackoverflow.com/questions/5534681/how-to-represent-a-localized-string-type-in-core-data)所述，将本地化名称添加到单独的实体中？是要走的路。

# visual-c++ - 在图像视觉c ++上绘制点

> ID：11337700
> 
> 赞同：1
> 
> 时间：2012-07-05T03:58:36.210
> 
> 标签：visual-c++, mfc, drawing

当用户选中复选框时，我必须将图像插入 MFC 对话框并在其上打印点。是否可以在 MFC 中的图像上绘制点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:35:20.003

尝试创建您自己的基于 CStatic 所有者绘制的控件来显示您的位图。当您收到 DrawItem 请求时，将原始位图加载到兼容的 DC 中。然后，您可以在 DC 上绘制您的修改，并在完成后将 DC BitBlt 到 DRAWITEMSTRUCT 信息中提供的实际屏幕 DC。

一步步。

1.  基于 CStatic 创建一个名为 CMyPic 的新 MFC 控件

2.  在对话框上放置一个图片控件（作为控件的占位符）

3.  将图片控件的名称从IDC_STATIC更改为IDC_MYPIC

4.  将控件的类型从“框架”更改为“所有者绘制”

5.  右键单击控件并“添加变量”。使其成为一个名为 m_mypic 之类的控制变量，并将变量类型更改为 CMyPic。

6.  在 CMyPic 中为 DrawItem 添加一个覆盖

7.  在 DrawItem 中，您可以绘制位图（在我的情况下，我正在绘制 PNG 并覆盖一些文本），如下所示：

    ```
    void CMyPic::DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct){

        CPngImage img;
        img.Load( IDB_PNG1 );

        CDC dcScreen;
        dcScreen.Attach( lpDrawItemStruct->hDC );

        CDC dcMem;
        dcMem.CreateCompatibleDC( &dcScreen );
        CBitmap * pold = (CBitmap*)dcMem.SelectObject( img );

        dcMem.DrawText( L"Hi", &lpDrawItemStruct->rcItem, NULL );

        dcScreen.BitBlt( 0, 0, lpDrawItemStruct->rcItem.right, lpDrawItemStruct->rcItem.bottom, &dcMem, 0, 0, SRCCOPY );

        dcMem.SelectObject( pold ); 
        dcScreen.Detach( );
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:10:10.627

这是可能的，但我*强烈*反对直接这样做。

通常，对话框应该*只*充当控件的容器。

因此，您可能想要的是某种分层绘图控件，它可以将位图显示为背景，并在其前面显示其他对象（点、可能的线、曲线等）。在 MFC 中编写一个 ActiveX 控件来做到这一点几乎是微不足道的。使用ATL*有点*困难，但并不多——从更小和（可能）更快的角度来看，结果几乎不可避免地会“更好”。

# java - 从 mysql db 在 android 地图上显示点

> ID：11337706
> 
> 赞同：1
> 
> 时间：2012-07-05T03:59:41.503
> 
> 标签：java, android, mysql, google-maps, marker

我的 android 应用程序中有一个谷歌地图，上面有一个简单的硬编码标记。我在 mysql db 中保存了一些带有纬度和经度的数据，我想从 mysql db 中读取这些数据，然后在我的 google 地图上显示它在 android .我的意思是如何从我的 mysql 数据库数据中制作地图。这是我的加载地图的代码，具有简单的硬编码标记。

**更新**

```
 package com.javacodegeeks.android.googlemaps;

import java.util.List;

import android.graphics.drawable.Drawable;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;
import com.google.android.maps.Overlay;
import com.google.android.maps.OverlayItem;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

//import android.app.ListActivity;
import android.net.ParseException;
//import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class GMapsActivity extends MapActivity {

private MapView mapView;

JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb=null;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

mapView = (MapView) findViewById(R.id.map_view);       
        mapView.setBuiltInZoomControls(true);

 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
//http post
try{
     HttpClient httpclient = new DefaultHttpClient();
     HttpPost httppost = new HttpPost("http://sml.com.pk/a/map.php");
     httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
     HttpResponse response = httpclient.execute(httppost);
     HttpEntity entity = response.getEntity();
     is = entity.getContent();
     }catch(Exception e){
         Log.e("log_tag", "Error in http connection"+e.toString());
    }
//convert response to string
try{
      BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
       sb = new StringBuilder();
       sb.append(reader.readLine() + "\n");

       String line="0";
       while ((line = reader.readLine()) != null) {
                      sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
        }catch(Exception e){
              Log.e("log_tag", "Error converting result "+e.toString());
        }
//paring data
double LAT;
double LANG;
String INFO;
try{
      jArray = new JSONArray(result);
      JSONObject json_data=null;
      for(int i=0;i<jArray.length();i++){
             json_data = jArray.getJSONObject(i);
             LAT=json_data.getDouble("LAT");
             LANG=json_data.getDouble("LANG");
             INFO=json_data.getString("INFO");

//Overlay code
List<Overlay> mapOverlays = mapView.getOverlays();
                Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
        CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);

        //GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
        GeoPoint point = new GeoPoint((int)(LAT * 1e6),(int)(LANG * 1e6));
        OverlayItem overlayitem = new OverlayItem(point, "", INFO);
        itemizedOverlay.addOverlay(overlayitem);
        mapOverlays.add(itemizedOverlay);

        MapController mapController = mapView.getController();

        mapController.animateTo(point);
        mapController.setZoom(6);

//Overlay code

         }
      }
      catch(JSONException e1){
          Toast.makeText(getBaseContext(), "No City Found" ,Toast.LENGTH_LONG).show();
      } catch (ParseException e1) {
            e1.printStackTrace();
    }
}
@Override
protected boolean isRouteDisplayed() {
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:27:55.887

你可以这样做

```
ArrayList<Data> dynamicData=getData();
    if(dynamicData!=null)
    {
        for(int i=0;i<dynamicData.size();i++)
        {
            Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
            CustomItemizedOverlay itemizedOverlay = new CustomItemizedOverlay(drawable, this);

            //GeoPoint point = new GeoPoint(latitudeE6, longitudeE6);
            GeoPoint point = new GeoPoint((int)(Double.parseDouble(dynamicData.get(i).lat) * 1e6),(int)(Double.parseDouble(dynamicData.get(i).lon) * 1e6));
            OverlayItem overlayitem = new OverlayItem(point, "SML", "Shakarganj Mills Limited Jhang");

            itemizedOverlay.addOverlay(overlayitem);
            mapOverlays.add(itemizedOverlay);
        }
    } 
```

和

```
public static ArrayList<MapData> getData() {
    try {

        String URL = "http://sml.com.pk/a/map.php";
        HttpParams httpparams = new BasicHttpParams();

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", new PlainSocketFactory(), 80));

        DefaultHttpClient client = new DefaultHttpClient(
                new ThreadSafeClientConnManager(httpparams, registry),
                httpparams);

        HttpGet httpGet = new HttpGet(URL);

        HttpResponse response = client.execute(httpGet);
        String string_response = EntityUtils.toString(response.getEntity(),
                "UTF-8");
        JSONArray JsonResponse;
        try {
            JsonResponse = new JSONArray(string_response);

            ArrayList<MapData> list = new ArrayList<MapData>();
            for (int i = 0; i < JsonResponse.length(); i++) {
                String GPS = JsonResponse.getJSONObject(i).getString("GPS");
                String temp[] = GPS.split(",");
                MapData apoint = new MapData();
                apoint.lat = temp[0];
                apoint.lon = temp[1];
                list.add(apoint);

            }
            return list;
        } catch (JSONException e) {
            e.printStackTrace();
            return null;
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {

        e.printStackTrace();
        return null;

    }

}

 public static class MapData {
        public String lat;
        public String lon;
    } 
```

# java - 处理大型数据集时出现内存不足错误

> ID：11337711
> 
> 赞同：-3
> 
> 时间：2012-07-05T04:01:45.270
> 
> 标签：java, out-of-memory, heap-memory

我在 LSI 上运行代码，这需要首先从数据库中获取大量数据。它适用于小型数据集。因为，我增加了数据集，它给了我以下错误。

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

我目前正在具有 2 GB RAM 的系统上运行代码。是与 RAM 容量有关的错误还是由于其他原因。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:10:07.070

当您运行 Java 时，您必须为您的特定问题传递 VM 参数。您需要增加堆值：

```
-Xms40m - minimum heap size in MB
-Xmx1024m - maximum heap size in MB 
```

> java test.java -Xms40m -Xmx1024m

启动您的应用程序时。有关详细信息，请参阅[Oracle 文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/java.html)。或者，如果您使用 Eclipse，请在`ecliplse.ini`文件中增加此大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T05:19:59.697

首先检查您为服务器分配了多少堆空间。如果它看起来很低，那么您可以使用以下参数增加它 -

```
-Xms128m   -  minimum heap size in MB
-Xmx1024m -  maximum heap size in MB 
```

通常，当可用 hep 大小已满且没有可用于程序正常执行的内存时，我们会收到此异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T05:37:37.217

1.  -Xmx 为最大堆大小，
2.  -Xms 用于初始堆大小，

重要的一点是以上两种语法都区分大小写。这么小心。

**如何在Tomcat中设置java堆大小？** 停止 Tomcat 服务器，设置环境变量 CATALINA_OPTS，然后重启 Tomcat。查看文件 tomcat-install/bin/catalina.sh 或 catalina.bat 了解如何使用此变量。例如，

set CATALINA_OPTS=-Xms512m -Xmx512m (Windows, no "" around the value) export CATALINA_OPTS="-Xms512m -Xmx512m" (ksh/bash, "" around the value) setenv CATALINA_OPTS "-Xms512m -Xmx512m" (tcsh/csh, "" 围绕值）

在 catalina.bat 或 catallina.sh 中，您可能已经注意到 CATALINA_OPTS、JAVA_OPTS 或两者都可用于指定 Tomcat JVM 选项。CATALINA_OPTS 和 JAVA_OPTS 有什么区别？名称 CATALINA_OPTS 特定于 Tomcat servlet 容器，而 JAVA_OPTS 可能被其他 java 应用程序（例如，JBoss）使用。由于环境变量由所有应用程序共享，我们不希望 Tomcat 无意中选择用于其他应用程序的 JVM 选项。我更喜欢使用 CATALINA_OPTS。

**如何在 JBoss 中设置 Java 堆大小？**

停止 JBoss 服务器，编辑 $JBOSS_HOME/bin/run.conf，然后重新启动 JBoss 服务器。您可以使用 JAVA_OPTS 将行更改为：

JAVA_OPTS="-server -Xms128m -Xmx128m"

**如何在 Eclipse 中设置 Java 堆大小？** 您有 2 个选项： 1\. 将 eclipse-home/eclipse.ini 编辑为如下所示并重新启动 Eclipse。

-vmargs-Xms64m-Xmx256m2。或者，您可以在最后运行带有附加选项的 eclipse 命令。-vmargs 之后的任何内容都将被视为 JVM 选项并直接传递给 JVM。以这种方式在命令行中指定的 JVM 选项将始终覆盖 eclipse.ini 中的选项。例如，

eclipse -vmargs -Xms64m -Xmx256m

**如何在 NetBeans 中设置 Java 堆大小？** 退出 NetBeans，编辑文件 netbeans-install/etc/netbeans.conf。例如，

netbeans_default_options="-J-Xms512m -J-Xmx512m -J-XX:PermSize=32m -J-XX:MaxPermSize=128m -J-Xverify:none

如果您有疑问，请参阅下面的链接。感谢他们提供详细信息。

[在此处输入链接描述](http://javahowto.blogspot.com/2006/06/6-common-errors-in-setting-java-heap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T04:15:00.093

如果它与您的 RAM 有关，您的处理器将停止 Java。所以肯定不是。这是因为**java堆内存已满**，堆空间中的所有对象都处于活动状态，所以不会进行垃圾收集过程。所以堆空间中没有足够的内存来处理进一步的数据。由于这个原因，您会收到此错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T04:20:21.993

除了增加您的应用程序可以拥有的最大堆大小（可能是您需要做的全部）之外，听起来您可能能够显着减少您正在使用的内存量。如果您正在索引文档，在标准 LSI 设置中，您一次应该只能将 1 个文档加载到内存中。所以假设你有一个文档列表，你遍历列表并：加载、索引、关闭。冲洗并重复。

我认为这可能是您的问题，因为您的代码适用于较小的数据集。另一种可能性是，当您扩展数据集时，您将包含一些用尽所有堆空间的巨大文档。在这种情况下，最简单的解决方案就是增加堆空间。

# playframework - Playframework：无法执行播放命令

> ID：11337715
> 
> 赞同：1
> 
> 时间：2012-07-05T04:02:09.960
> 
> 标签：playframework

我开始研究 Play 框架，但遇到了一些问题。
目前我下载Playframework：play_2.0.2

我的java环境如下：
JDK：java版本“1.7.0_05”
运行时：javac 1.6.0_22

设置环境变量的路径后：
我开始使用此步骤创建新项目：
C:\play new todolist
C:\cd todolist
C:\todolist>play
虚拟机初始化期间发生错误
无法为对象堆保留足够的空间
错误：无法创建Java虚拟机。
错误：发生了致命异常。程序将会退出。

请指导那些错误信息。我需要部署并使用它。

Rgds,
加德

# ruby-on-rails - 确认电子邮件地址

> ID：11337716
> 
> 赞同：3
> 
> 时间：2012-07-05T04:02:11.340
> 
> 标签：ruby-on-rails, devise, email-confirmation

我遵循了 Michael Hartl 的 RoR 教程，用于建模用户、登录和注册。现在，我需要验证登录时给出的任何电子邮件都是真实的电子邮件，而不是与我在验证时使用的正则表达式匹配的随机字符串。

我知道 Devise 可以解决这个问题。而且我不想更改我拥有的工作代码。我怎么能只使用 Devise 的电子邮件验证功能？（不希望它为我做任何登录、会话和身份验证等）

如果不能以这种方式使用 Devise，那么将 Devise 插入我的 Rails 用户模型会有多大的破坏性？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:43:27.483

设计使用正则表达式验证电子邮件（使用正则表达式非常合乎逻辑）。

设计使用的正则表达式是：（从设计代码复制）

```
 # Email regex used to validate email formats. It simply asserts that
  # an one (and only one) @ exists in the given string. This is mainly
  # to give user feedback and not to assert the e-mail validity.
  mattr_accessor :email_regexp
  @@email_regexp = /\A[^@]+@([^@\.]+\.)+[^@\.]+\z/ 
```

如果您正在使用设计，则可以在设计初始化程序中更改此 reg exp。

如果您不需要设计，您可以自己实现电子邮件验证。

[官方 Rails 指南Active Record Validations 文档](http://edgeguides.rubyonrails.org/active_record_validations.html)中给出了一个非常好的示例。

```
class EmailValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    unless value =~ /\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\z/i
      record.errors[attribute] << (options[:message] || "is not an email")
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T16:15:58.150

你需要的是[设计可确认](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)的。（它会发送一封带有确认链接的电子邮件。）

这个 railscast 应该有帮助：[http](http://railscasts.com/episodes/209-introducing-devise) ://railscasts.com/episodes/209-introducing-devise 。

要启用它，请查看[本指南](https://github.com/plataformatec/devise/wiki/How-To:-Add-:confirmable-to-Users)或[此问题](https://stackoverflow.com/questions/4783392/how-do-i-enable-confirmable-in-devise)。

# jquery - 没有周末的 jQuery 日历之类的 Datepicker

> ID：11337720
> 
> 赞同：0
> 
> 时间：2012-07-05T04:03:58.327
> 
> 标签：jquery, html, calendar, html-table

这是我在 StackOverflow 上的第一个问题，所以我会尽力以“正确的方式”提出这个问题。

我正在尝试使用 jQuery 动态创建 HTML 日历。基本上，我希望我的日历看起来像这样，但没有周末： http: [//postimage.org/image/4xryen3ej/](http://postimage.org/image/4xryen3ej/)。

日历日期在 tbody 元素中创建：

```
<table>
    <thead>
        <tr>
            <th class="weekday">Mo</th>
            <th class="weekday">Tu</th>
            <th class="weekday">We</th>
            <th class="weekday">Th</th>
            <th class="weekday">Fr</th>
        </tr>
    </thead>
    <tbody id="dates">
    </tbody>
</table> 
```

这是jQuery代码：

```
var months = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

var now       = new Date;
var year      = now.getFullYear();
var month     = now.getMonth();
var thisMonth = now.getMonth();
var monthStart;
var monthLength;
var addDays;
var dayOfWeek;
var today;

printDate();
createCalendar();

function printDate()
{
    monthStart   = new Date(year, month, 1);
    var monthEnd = new Date(year, month + 1);
    monthLength  = Math.round((monthEnd - monthStart) / (1000 * 60 * 60 * 24));

    $("#dateToday").text(months[month] + " " + year + " " + monthLength);
}

function createCalendar()
{
    addDays   = now.getDate();
    dayOfWeek = now.getDay();
    today     = now.getDate();

    $("#dates").append("<tr>");

    for (var i = 0; addDays < monthLength + 1; i++)
    {
        if (i < dayOfWeek)
        {
            $("#dates").append("<td style=\"border: 1px solid; height: 80px\">" +
                               "<div style=\"background-color: #EEEEEE; height: 18px; text-align: right\"></div>" +
                               "<div style=\"height: 62px\"></div>" +
                               "</td>");
        }
        else
        {
            if ((addDays == today) && (now.getMonth() == month))
            {
                $("#dates").append("<td style=\"border: 1px solid; height: 80px\">" +
                                   "<div style=\"background-color: #EEEEEE; height: 18px; text-align: right\"><b>" + addDays + "</b></div>" +
                                   "<div style=\"height: 62px\"></div>" +
                                   "</td>");

                addDays = addDays + 1;
            }
            else
            {
                if (i % 5 == 0)
                {
                    addDays = addDays + 2;

                    $("#dates").append("</tr>" +
                                       "<tr>");
                }

                $("#dates").append("<td style=\"border: 1px solid; height: 80px\">" +
                                   "<div style=\"background-color: #EEEEEE; height: 18px; text-align: right\">" + addDays + "</div>" +
                                   "<div style=\"height: 62px\"></div>" +
                                   "</td>");

                addDays = addDays + 1;
            }
        }
    }
} 
```

我知道网上有很多关于这类问题的例子，但我仍然无法解决问题，因此我不得不在这里发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:27:39.010

如果您使用 JQuery Datepicker UI。禁用周末很简单

```
$(function() {
   $('#id').datepicker({ 
       beforeShowDay: $.datepicker.noWeekends 
   });
}); 
```

# javascript - 需要非常简单的 Javascript 帮助

> ID：11337725
> 
> 赞同：0
> 
> 时间：2012-07-05T04:04:33.787
> 
> 标签：javascript, forms, show-hide

我正在制作一个表单字段，我想做一个简单的显示隐藏以在单选按钮上显示 div。

```
<form id="basic" name="basic">

<label><input name="formelement" type="radio" value="yes" /> Yes   </label>
<label><input name="formelement" type="radio" value="no" /> No </label>

<div id="yes" style="display: none;">
This is the div that displays that shows when 'Yes' is selected.
</div>

<div id="no" style="display: none;">
This is the div that displays that shows when 'No' is selected.
</div>

</form> 
```

我玩过一些我在网上找到的各种 javascript，但并没有取得很大的成功，因为它们中的大多数都在网上设法显示隐藏一个 div。选择“否”时隐藏“是”，反之亦然是棘手的部分。如果有人可以提供一些帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:28:46.117

只需在 head 标签之间粘贴这些代码

```
<script type="text/javascript">
window.onload=function(){
    var el1 = document.getElementsByName('formelement')[0];
    var el2 = document.getElementsByName('formelement')[1];  
    el1.onchange=function(){
        var show=el1.value;
        var hide=el2.value;
        document.getElementById(show).style.display='block';
        document.getElementById(hide).style.display='none';
    }

    el2.onchange=function(){
        var show=el2.value;
        var hide=el1.value;
        document.getElementById(show).style.display='block';
        document.getElementById(hide).style.display='none';
    }  
}
</script> 
```

[**演示。**](http://jsfiddle.net/GZ6vL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:10:24.553

下面假设 radio 的值与 div 的 id 相同。

```
function getRadioVal(name){
   var oRadio = document.forms[0].elements[name];
   for(var i = 0; i < oRadio.length; i++)
      if(oRadio[i].checked)
         return oRadio[i].value;
   return '';
}

//hide both divs..
document.getElementById("yes").style.display = "none";
document.getElementById("no").style.display = "none";

//show only one of them..
document.getElementById(getRadioVal("formelement")) = "block"; 
```

* * *

当事情变得复杂时，在没有任何库的情况下处理 javascript 会很痛苦，我会推荐[jQuery等库](http://www.jquery.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:10:43.663

这就是你想要的

[如何检查是否使用 JavaScript 选择了单选按钮？](https://stackoverflow.com/questions/1423777/how-can-i-check-if-a-radio-button-is-selected-in-javascript)

分配 onclick 事件，您就可以开始了。

# android - Android：HttpsUrlConnection 和 Pinset 示例

> ID：11337726
> 
> 赞同：0
> 
> 时间：2012-07-05T04:04:41.327
> 
> 标签：android, certificate, pinning, httpsurlconnection

我正在观看 Google I/O 2012 的[Security and Privacy in Android Apps](https://developers.google.com/events/io/sessions/gooio2012/107/)。在 37:55 左右，Kenny Root 谈到了证书固定，并告诉我们访问文档`HttpsUrlConnection`以了解如何使用 pinset。

不幸的是，我的 Google-fu 再次关闭，我似乎无法找到该示例（本地或网络）。搜索“httpsurlconnection pinset 示例”返回 0 个命中。有人会碰巧有一个链接或使用`HttpsUrlConnection`pinset 的示例吗？

对于那些不固定的人，固定是预期服务器证书（可能是指纹）的白名单。它修复了运营商、电信公司、手机 OEM、CA、从属 CA 证书（包括代理）、ISP 和 DNS 提供商造成的许多基础设施问题。

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:41:03.907

访问[HttpsURLConnection](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)上的 Android 文档并阅读标题为“提供特定于应用程序的 X509TrustManager”的部分以获取示例代码。

请注意，您必须制作一个包含您的证书的 Keystore 文件。您可以使用 JDK 附带的“keytool”命令执行此操作：

keytool -import -trustcacerts -alias myca -file myca.crt -keystore myca.jks

# java - 调用shutdown.sh后Tomcat关闭非常慢？

> ID：11337727
> 
> 赞同：6
> 
> 时间：2012-07-05T04:04:56.010
> 
> 标签：java, linux, apache, tomcat, tomcat6

我的情况是这样的：

每次在将 war 文件上传到 web-app 文件夹之前，我都会通过调用`sh shutdown.sh`. 过去，完全关机大约需要 30 秒。但现在它已经不能很好地工作了。

实际上，它做了一些工作，因为当我从网页访问应用程序时，它会抛出 503 错误（维护中）。但是当我使用`ps aux | grep tomcat`检查时，tomcat进程仍然存在。它会在那里大约 5 - 10 分钟。

我知道完成所有任务可能需要额外的时间，但是在完全停止之前它太慢了（5 - 10 分钟）。我不明白为什么会发生这种情况，但一定有一些原因。也许与代码或我们最近使用的新部署脚本有关。我几乎不知道在哪里检查。

这对我们的团队很重要，因为我们正在使用“自动部署”，其中我们使用脚本自动打包战争文件，在特定时间上传和部署。如果我们在旧的成功关闭之前启动一个新的 tomcat 实例，它将永远挂在那里，并且通过“kill -9”清理任务是令人生畏的。

有没有人尝试过这个问题？任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T05:54:07.417

黄龙 -

谢谢你的更新。

1) 您看到 Quartz 作业正在运行这一事实以及错误消息都很重要：

> 严重：Web 应用程序 [/project] 似乎已经启动了一个名为 [Resource Destroyer in BasicResourcePool.close()] 的线程，但未能停止它。这很可能造成内存泄漏。

2）一个建议是配置：

> [http://forum.springsource.org/showthread.php?17833-Spring-Quartz-Tomcat-no-shutdown](http://forum.springsource.org/showthread.php?17833-Spring-Quartz-Tomcat-no-shutdown)
> 
> 我有同样的问题。`destroy-method="destroy"`我通过添加到 SchedulerFactoryBean 定义来修复它 。这样，当应用程序停止时，spring 会关闭调度程序。

3）另一个建议是添加一个关闭监听器：

> [http://forums.terracotta.org/forums/posts/list/15/4341.page](http://forums.terracotta.org/forums/posts/list/15/4341.page)
> 
> 使用上下文侦听器并在关闭时引入超时为我解决了这个问题。我只是在关闭后等待一秒钟：
> 
> ```
>  public void contextDestroyed(ServletContextEvent sce) {
>     try {
>       factory.getScheduler().shutdown();
>       Thread.sleep(1000); 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T06:08:14.260

如果这是最近几天神秘地开始发生的事情，也许您遇到了 Linux 闰秒错误？有关详细信息，请参阅

[https://serverfault.com/questions/403732/anyone-else-experience-high-rates-of-linux-server-crashes-during-a-leap-second](https://serverfault.com/questions/403732/anyone-else-experiencing-high-rates-of-linux-server-crashes-during-a-leap-second)

[https://access.redhat.com/knowledge/articles/15145](https://access.redhat.com/knowledge/articles/15145)

[http://pedroalves-bi.blogspot.fi/2012/07/java-leap-second-bug-how-to-fix-your.html](http://pedroalves-bi.blogspot.fi/2012/07/java-leap-second-bug-how-to-fix-your.html)

# html - 如何在表格单元格的中间排列我的数字？

> ID：11337731
> 
> 赞同：0
> 
> 时间：2012-07-05T04:05:38.013
> 
> 标签：html, css

我有以下内容：

```
<td id="refKey_1">1.0</td> 
```

数字出现在左侧。有没有办法让它们出现在单元格的中间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:07:57.243

嘿，你可以这样做

```
<td align="center" valign="middle" id="refKey_1">1.0</td> 
```

- - - - - - -或者

在 CSS 中

```
td#refkey_1{
text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T04:07:58.450

使用 CSS，你可以做到

```
text-align:center 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T04:08:11.197

```
<td id="refKey_1" style="text-align:center;">1.0</td> 
```

或者使用 css

```
tr td#refKey_1{ text-align:center } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T04:07:25.873

`<td align="center">`将是最简单和最快的。

# d3.js - d3.js 中的分层图

> ID：11337732
> 
> 赞同：10
> 
> 时间：2012-07-05T04:05:53.413
> 
> 标签：d3.js

我目前正在使用 Graphviz 来可视化控制流图。基本上，一个（可简化的）控制流图是一个 DAG 加上一些指向前一层节点的边。后面的边不应影响节点放置。

目前，`dot`绘制图形非常整齐，但缺乏一种简单的方法来添加交互性（例如折叠、滚动、缩放），这对于分析非常大的图形来说是无价的。因此，我选择了 d3.js 作为最成熟、功能最丰富的图形库。

我很确定有一种简单的方法可以在 d3.js 中绘制[分层图](https://en.wikipedia.org/wiki/Layered_graph_drawing)（就像`dot`d3.js 一样），但我似乎不认识它。我怎么做？如果这有帮助，我已经对我的 CFG 执行了支配分析。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:55:32.487

用于有向图绘制的 Dagre 库与渲染无关，但与 d3.js 很好地集成：[https ://github.com/cpettitt/dagre](https://github.com/cpettitt/dagre)

这是使用 D3 渲染的演示：http: [//cpettitt.github.io/project/dagre-d3/latest/demo/interactive-demo.html](http://cpettitt.github.io/project/dagre-d3/latest/demo/interactive-demo.html)

# jsf-2 - primefaces 上下文菜单不会更新为对话框输入

> ID：11337734
> 
> 赞同：0
> 
> 时间：2012-07-05T04:06:24.770
> 
> 标签：jsf-2, primefaces, contextmenu

我已经看到了这个问题。请参阅我的 jsf 页面。

```
<h:form id="companyList">
            <p:contextMenu for="companiesDB" style="height:53px;">
                <p:menuitem value=" edit" update="panelGrid" icon="ui-icon-pencil" oncomplete="editCompany.show()" />

                <p:menuitem value=" delete" update="panelGrid" icon="ui-icon-closethick" onclick="editCompany.show()" />
            </p:contextMenu>

            <p:dataTable id="companiesDB" var="companies"
                value="#{companyController.companyList}" rowKey="#{companies.pkId}"
                selection="#{companyController.selectedCompany}"
                selectionMode="single" paginator="true"
                paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                rows="20" >
                <p:column headerText="name">
                    #{companies.companyName}
                </p:column>
                <p:column headerText="desc">
                    #{companies.description}
                </p:column>
            </p:dataTable>

            <p:dialog header="edit mode" widgetVar="editCompany"
                modal="true" height="160" width="390"
                id="dialog" resizable="false">

                <p:panelGrid cellpadding="10" id="panelGrid" >
                    <p:row>
                        <p:column width="300">
                            <h:outputText value="name:" style="float:left;" />
                        </p:column>
                        <p:column>
                            <p:inputText   value="#{companyController.selectedCompany.companyName}"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <h:outputText value="desc:" style="float:right;" />
                        </p:column>
                        <p:column>
                            <p:inputText  
                                value="#{companyController.selectedCompany.description}" />
                        </p:column>
                    </p:row>

                </p:panelGrid>

                <br />
                <br />
                <p:commandButton value="save" icon="ui-icon-check"
                    style="float:right; margin-right:25px;" update="companiesDB"
                    oncomplete="addCompany.hide();"
                    action="#{companyController.insertCompany()}">
                </p:commandButton>
            </p:dialog>
 </h:form> 
```

控制台错误是：/company.xhtml @46,91 value="#{companyController.selectedCompany.companyName}": Target Unreachable, 'selectedCompany' 返回 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:45:16.393

尝试将您的对话ID重命名为`mydialog`（只是为了安全起见）

并按如下方式更新您的菜单项条目（注意`update="mydialog"`）：

```
<p:menuitem value="edit" update="mydialog" icon="ui-icon-pencil" oncomplete="editCompany.show()" /> 
```

另外，请确保仅在表中进行选择后才启用编辑按钮...否则您将获得空指针...

你可以用类似的东西来实现它

```
<p:menuitem value="edit" disabled=#{companyController.selectedCompany eq null}..... 
```

`p:ajax`并在您的表中添加两个

```
<p:dataTable.......>
    <p:ajax event="rowSelect" update="contextMenuID" />
    <p:ajax event="rowUnselect" update="contextMenuID" /> 
```

最后一件事：添加`id=contextMenuID`到您的上下文菜单

# mysql - sunspot_solr 分组子句中的未定义字段错误

> ID：11337745
> 
> 赞同：0
> 
> 时间：2012-07-05T04:08:26.930
> 
> 标签：mysql, sunspot, sunspot-rails, sunspot-solr, rsolr

我有属于类别的 product_details 表。product_details 具有 id、name、price、discount 和 category_id 等字段，而 categories 表具有 id 和 name 等字段。我正在使用 mysql 数据库我正在尝试根据 category_id 对产品详细信息进行分组。要进行分组，我参考 [了 https://gist.github.com/f987013b2feec5b28456](https://gist.github.com/f987013b2feec5b28456)。但是我收到以下错误

```
RSolr::Error::Http - 400 Bad Request
Error:     undefined field category_id 
```

我的模型看起来像这样

```
 class ProductDetail < ActiveRecord::Base
      belongs_to :category

      searchable do
        text :name
        integer :category_id
      end

    end 
```

我的控制器看起来像这样

```
def index
      @search_res1=ProductDetail.search do

        adjust_solr_params do |params|
          params[:group] = true
          params[:"group.field"] = "category_id"
          params[:"group.format"] = "simple"
        end

      end.execute
      @navurls=@search_res1.results
end 
```

在我的日志文件中，我是这样的

# RSolr::Error::Http 在 ProductDetailsController#index

```
RSolr::Error::Http - 400 错误请求
错误：未定义字段 category_id

请求数据：“fq=type%3AProductDetail&fq=category_id_i%3A%281%29&start=0&rows=30&group=true&group.field=category_id&group.format=simple&q=%2A%3A%2A”

回溯：/home/toshiba/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/home/toshiba/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:167：在“执行”中
/home/toshiba/.rvm/gems/ruby-1.9.2-p290/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
```

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T01:54:59.690

这里有两件事：

1\. 太阳黑子中的分组仅支持`string`字段。因此，将您的`searchable`块更改为以下内容：

```
class ProductDetail < ActiveRecord::Base
  belongs_to :category

  searchable do
    text :name
    string :category_id_str do
      category_id.to_s
    end
  end
end 
```

2.更改组参数以反映属性名称更改：

```
def index
  @search_res1=ProductDetail.search do
    adjust_solr_params do |params|
      params[:group] = true
      params[:"group.field"] = "category_id_str_s"
      params[:"group.format"] = "simple"
    end
  end.execute
  @navurls=@search_res1.results
end 
```

我在这里假设太阳黑子在`_s`索引它时将额外添加到属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T09:56:23.723

也许在 /usr/share/solr/conf 的 schema.xml 中缺少整数类型？

这是我的例子：

```
<schema name="sunspot" version="1.0">
  <types>
    <!-- field type definitions. The "name" attribute is
       just a label to be used by field definitions.  The "class"
       attribute and any other attributes determine the real
       behavior of the fieldType.
         Class names starting with "solr" refer to java classes in the
       org.apache.solr.analysis package.
    -->
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="string" class="solr.StrField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="tdouble" class="solr.TrieDoubleField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="rand" class="solr.RandomSortField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="boolean" class="solr.BoolField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="date" class="solr.DateField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="sdouble" class="solr.SortableDoubleField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="sfloat" class="solr.SortableFloatField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="sint" class="solr.SortableIntField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="slong" class="solr.SortableLongField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="tint" class="solr.TrieIntField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="tfloat" class="solr.TrieFloatField" omitNorms="true"/>
    <!-- *** This fieldType is used by Sunspot! *** -->
    <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true"/>
  </types> 
```

# css - 文本 标签和CSS

> ID：11337750
> 
> 赞同：0
> 
> 时间：2012-07-05T04:09:35.183
> 
> 标签：css, html, text

我有两个问题：

1）我有一个带有图像的 div，用于我的页脚，但是当我调整页面大小时，页脚文本会全部“混合”在一起。有什么方法可以让文本保持在某个位置并随页面调整大小？

2) 我使用 div 作为页面主体，但是当我尝试添加文本并将其对齐时，它会移动整个 div。当我移动文本时，如何让 div（只是背景颜色）保持原位？

这是 jsfiddle 上的站点和代码：http: [//jsfiddle.net/HzwV9/embedded/result/](http://jsfiddle.net/HzwV9/embedded/result/)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:40:17.607

玩弄了你的小提琴，这里有一个可能对你有帮助的结果：http: [//jsfiddle.net/HzwV9/4/](http://jsfiddle.net/HzwV9/4/)

我注意到的一些事情：

*   您的一些 HTML 标记没有关闭（这是自找麻烦）。
*   无需`<h1>`用于您的较低链接；[它是块元素，而不是内联元素](https://stackoverflow.com/questions/4322029/stop-hyperlink-inheriting-divs-width/4322102#4322102)`<a>`，而且无论如何您都需要稍后创建链接
*   您可以在开始时简化标签的大列表，只需使用`*`- all！

希望这可以帮助。此外，页脚是出了名的困难，因为 CSS[不能很好地垂直调整大小](https://stackoverflow.com/questions/3931187/css-metaphysics-why-is-page-vertical-alignment-so-difficult)……有一些解决方案，但它们都有问题，取决于你想要错的地方:)

# javascript - 更改所选项目的文本以包括其父 optgroup

> ID：11337752
> 
> 赞同：1
> 
> 时间：2012-07-05T04:09:36.960
> 
> 标签：javascript, jquery, html

我有一个`select`将在移动设备上显示的元素

```
<form>
<select id="selectMe" >
    <optgroup label="Australia">
        <option value="AustCars">Australia Cars Report</option>
        <option value="AustBikes">Australia Bikes Report</option>                
    </optgroup>
    <optgroup label="New Zealand">                    
        <option value="NZCars">New Zealand Cars Report</option>
        <option value="NZBikes">New Zealand Bikes Report</option>                
    </optgroup>
</select>
</form>​ 
```

有两点需要注意：

*   我想`Australia Cars Report`在关闭时显示全名，以消除澳大利亚和新西兰之间的歧义。
*   我想在打开`Cars Report`时使用较短的版本`select`，因为 iPhone 选择器的全名`Australia Cars Report`太长（不是实际名称，而是呈现为`Austr...rs Report`或类似），并且国家/地区隐含在`optgroup`.

我的方法（基于[Change a select list display value on selection description](https://stackoverflow.com/questions/2791754/change-a-select-list-display-value-upon-selecting-description)）是在控件获得焦点时修改每个项目的值，然后在失去焦点时取消修改。这就是我卡住的地方。

我这里有两个问题：

*   我可以获得焦点事件，但没有“失去焦点”事件。我不能使用 'changed' 事件，因为用户可能实际上没有更改选择。
*   我不知道如何`optgroup`从选项文本中获取要添加和删除的值。我的意思是我需要找到`Australia Cars Report`它嵌套在下面`Australia`，因此我可以从显示文本中删除该单词。

如果适用，我可以使用 javascript 或 jQuery 或其他工具。对我也忽略的简单方法的建议持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:17:05.467

> 我可以获得焦点事件，但没有“失去焦点”事件。我不能使用 'changed' 事件，因为用户可能实际上没有更改选择。

使用`blur`.

> 我不知道如何获取 optgroup 的值以从选项文本中添加和删除。

有点不清楚，但我会冒险一些猜测让你开始：

*   您需要为特定组提供一个 ID 才能唯一地访问它，例如

    `var fooElement = document.getElementById("foo")`

*   您可以使用`fooElement.selected`
*   您可以使用`fooElement.options[]`. 在此列表中添加和删除新的 DOM 元素将在 HTML DOM 中添加或删除它们。
*   `option`可以使用`.value`或找到an 的值`.text`。

尝试查找`select`HTML 中的标记，以及与该类型元素交互的 javascript。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:23:50.567

第一个问题：见史蒂夫的回答。

对于第二个问题：当它变得模糊时，您可以将文本澳大利亚添加到选项

```
$("select").blur(function(){
   $(this).html($(this).parent().html() + " " + $(this).html());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T04:34:06.263

```
$('#selectMe option').click(function(){
    var myparent = $(this).parent();
    if (myparent.get(0).tagName == 'OPTGROUP'){
        $(this).text(myparent.attr('label') + ' ' + $(this).text());
    }
});

$('#selectMe').focus(function(){
    $('option', this).each(function(){
        var myparent = $(this).parent();    
        $(this).text($(this).text().replace(myparent.attr('label'),''));     
    });
}) 
```

在这里工作演示[http://jsfiddle.net/GXvJB/11/](http://jsfiddle.net/GXvJB/11/)

# android - 设备锁定/睡眠一段时间后禁用广播接收器

> ID：11337759
> 
> 赞同：0
> 
> 时间：2012-07-05T04:11:51.890
> 
> 标签：android

我想问的问题是：在 android 设备锁定一段时间后，我的 boradcastrevever 无法工作，我在 onStart 上拒绝了它

```
@Override
protected void onStart() {
    setBroadcastReceiverAction();
    super.onStart();
} 
```

并在 onDestroy 上取消注册

```
 @Override
protected void onDestroy() {
    unregisterBroadcastReceiver();
    super.onDestroy();
} 
```

请注意，在长时间欺骗锁定之前一切正常，甚至设备锁定 1/2 分钟。但如果我将设备锁定 1 小时，问题就出来了

有没有办法防止这种情况发生？

谢谢帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:17:39.213

您应该获取 WakeLock 以使您的广播接收器运行。

在您的广播接收器`onReceive()`方法中获取 PARTIAL_WAKE_LOCK 并在`onReceive()`完成之前释放该锁。

# django - 在 Django 中编辑表单

> ID：11337768
> 
> 赞同：0
> 
> 时间：2012-07-05T04:13:50.623
> 
> 标签：django, django-forms

我在我的应用程序中创建了一个表单，我可以在其中获取用户的详细信息。现在我想创建一个可以让我编辑表单的表单。

我的 urls.py：

```
url(r'^home/editform/(?P<userpk>[^/]+)/$', 'lexuseditform', name='lexuseditform'),) 
```

我的观点.py：

```
@login_required                              
def lexuseditform(request,userpk):
    if int(userpk) != request.user.pk:
    return HttpResponseForbidden()
else:
    form = AdultForm()
    if request.method == 'POST': # If the form has been submitted...
        form = AdultForm(request.POST) # A form bound to the POST data
        if form.is_valid(): # All validation rules pass
          form.save()
          redirect_url = reverse('lexus/lexusedited.html')
          return HttpResponseRedirect(redirect_url) # Redirect after POST
    else:
       form = AdultForm() # An unbound form

return render('lexus/lexuseditform.html', {'form': form}) 
```

我的模型.py：

```
class AdultForm(ModelForm):
    """
    Edit Profile Information
    """
    class Meta:
        model = Adult
        fields = ('user', 'email','fullname','created') 
```

但我收到一条错误消息：No ReverseMatch: Reverse for 'lexuseditform' with arguments '()' and keyword arguments '{}' not found

似乎无法解决此错误。需要一些帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:30:15.963

在您的 POST 处理中，反向应该传递 URL 名称而不是模式。因此，请更正您为该 url 指定的任何名称。

```
redirect_url = reverse('lexus/lexusedited.html') <----- Incorrect. 
```

如果您的 urlname 是“lexusedited”

```
redirect_url = reverse('lexusedited') 
```

提示：您可以直接执行以下操作：

```
return HttpResponseRedirect(reverse('lexusedited')) 
```

# c# - ASP.NET MVC 4 异步控制器回调

> ID：11337770
> 
> 赞同：9
> 
> 时间：2012-07-05T04:14:10.680
> 
> 标签：c#, asp.net, asp.net-mvc-4

我只是使用 MVC 4 中的新异步控制器功能，如此处所述[http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)

如果我有一个可能需要 10-20 秒才能运行的操作，我想提供某种状态栏来通知用户进度。异步功能有什么帮助吗？

编辑：我将尝试如何尝试并看看是否有更好的方法

```
public async Task<ActionResult> GizmosAsync()
{
    return View("Gizmos", await GetGizmosAsync());
}

private void GetGizmosAsync()
{
    for(int i=0; i<10; i++) 
    {
        lock(_locker) 
        {
           _statusMessage = String.Format("{0} of 10", i);
        }  
        DoSomethingLongRunning();
    }
}

public ActionResult Status()
{
   return Json(new { Status = _statusMessage });
}

static readonly object _locker = new object();

static string _statusMessage = "";

....

<script>

setTimeout(displayStatus, 1000);

function displayStatus() {
  $.post("/controller/status", function(data) {
    alert(data.Status);
  });
}

</script> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T04:26:58.667

异步控制器只是一种从 IIS 中的 ThreadPool 中释放线程以便能够在重负载期间处理传入请求的机制，但与客户端的通信仍然是通常的请求-响应。

状态栏和排序通常只是 javascript 在屏幕上显示某些内容，直到 ajax 请求完成。我认为 MVC4 不会在这方面有所帮助。

您可以执行以下操作：[https](https://stackoverflow.com/a/68503/1373170)`<div>` ://stackoverflow.com/a/68503/1373170在 ajax 调用期间显示“正在处理...” 。

**编辑**：如果您需要真正的客户端进度和交互（例如真正的进度），您应该查看**SignalR** [http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx) 这个相关的帖子：[Async Controllers (MVC), long running带有“停止”的过程](https://stackoverflow.com/questions/8020204/async-controllers-mvc-long-running-process-with-stops)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-05T11:31:20.130

这篇文章似乎描述了你想要的：

[ASP.NET MVC 3：用于长时间运行任务的异步 jQuery 进度指示器](http://blog.janjonas.net/2012-01-02/asp_net-mvc_3-async-jquery-progress-indicator-long-running-tasks)

**控制器：**

```
public class HomeController : Controller
{
    private static IDictionary<Guid, int> tasks = new Dictionary<Guid, int>();

    public ActionResult Index()
    {
        return View();
    }

    public ActionResult Start()
    {
        var taskId = Guid.NewGuid();
        tasks.Add(taskId, 0);

        Task.Factory.StartNew(() =>
        {
            for (var i = 0; i <= 100; i++)
            {
                tasks[taskId] = i; // update task progress
                Thread.Sleep(50); // simulate long running operation
            }
            tasks.Remove(taskId);
        });

        return Json(taskId);
    }

    public ActionResult Progress(Guid id)
    {
        return Json(tasks.Keys.Contains(id) ? tasks[id] : 100);
    }
} 
```

**看法：**

```
<script type="text/javascript">

function updateMonitor(taskId, status) {
  $("#" + taskId).html("Task [" + taskId + "]: " + status);
}

$(function () {
  $("#start").click(function (e) {
   e.preventDefault();
   $.post("Home/Start", {}, function (taskId) {

     // Init monitors
     $("#monitors").append($("<p id='" + taskId + "'/>"));
     updateMonitor(taskId, "Started");

     // Periodically update monitors
     var intervalId = setInterval(function () {
       $.post("Home/Progress", { id: taskId }, function (progress) {
         if (progress >= 100) {
           updateMonitor(taskId, "Completed");
         clearInterval(intervalId);
         } else {
           updateMonitor(taskId, progress + "%");
         }
        });
      }, 100);
    });
  });
});
</script> 
<div id="monitors"></div> 
```

# jsp - 访问 EL 标记中的 JSP 页面对象

> ID：11337773
> 
> 赞同：1
> 
> 时间：2012-07-05T04:15:21.543
> 
> 标签：jsp, jakarta-ee

我有一个类似的代码

```
<% int myvar =20; %> 
```

我希望通过 JSP 标签访问它，这样的事情可能吗？

```
${pageScope.myvar} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:26:42.427

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
--<c:set var="myvar" scope="page" value = " value="${20}" />
<c:out  value = "${pageScope.str}"  /> --- 
```

试试上面的代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T05:48:51.103

Scriptlet 变量是在*服务*方法中创建的，因此它们具有*本地*范围，因此

EL 无法评估它们。作用于`EL`作用域变量——页面作用域、请求、

会话和应用范围。

# c++ - 排列顺序不变的 +ve 和 -ve 数字数组

> ID：11337774
> 
> 赞同：3
> 
> 时间：2012-07-05T04:15:33.643
> 
> 标签：c++, algorithm

> **可能重复：**
> [哪种算法可以只用 O(N) 移动就地进行稳定的二进制分区？](https://stackoverflow.com/questions/5465399/which-algorithm-can-do-a-stable-in-place-binary-partition-with-only-on-moves)

这是我被击中的面试问题之一

**问题：** 给定一个正负整数数组，您需要将正数移到一侧，将负数移到另一侧，并且顺序不变。前任。{-1,5,3,-8,4,-6,9} 到 {-1,-8,-6,5,3,4,9}。这应该在 O(n) 中完成，并且不需要额外的 array 。

首先我想通过快速排序来做到这一点

**伪代码**

找到最接近零的元素。使其成为枢轴元素。然后在数组上应用一次快速排序。这是 O(n) 。

唉! 但是快速排序不是稳定排序？

之后我提出了以下解决方案

**伪代码：**

最初，增加电流直到第一个 +ve 数字和减量结束直到最后一个 -ve 数字

如果 current 为负，则增加 current 如果 current 为正，则将其与 end 的元素交换并减少 current 和 end 如果 current >= end ，则中断。

仍然没有得到正确的答案。需要这方面的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:24:27.903

std::stable_partition 完全符合您的要求。

对于 C++11，执行

```
std::stable_partition(
  array.begin(), array.end(),
  [] (int i) { return i < 0; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:00:37.460

如果结果数组与源数组不同，您可以分两遍轻松完成：

```
p = 0;   //current index in result array

For i = 0 to length - 1 :
    If source[i] < 0 then
        result[p] = source[i]
        increment p
    End if
End for

For i = 0 to length - 1 :
    If source[i] >= 0 then
        result[p] = source[i]
        increment p
    End if
End for 
```

如果你想就地做，那就有点棘手了。您可以尝试冒泡排序，但这是 O(n^2)：

```
n = 0  // number of negative items found

For i = 0 to length - 1 :
    If array[i] < 0 then
        For j = i - 1 downto n :
            swap array[j+1] and array[j]
        End for

        increment n
    End if
End for 
```

不幸的是，我想不出一个既是 O(n) 又不需要分配额外数组的解决方案。

# jquery - 对 WCF 的 Jquery Ajax 调用在 Firefox 中不起作用

> ID：11337777
> 
> 赞同：1
> 
> 时间：2012-07-05T04:16:42.767
> 
> 标签：jquery, wcf, internet-explorer, firefox, get

嗨，我做了一个 WCF 服务，可以从 Jquery 访问它在 IE 8，IE 中工作，但在 Firefox 中不工作。

这是我的服务班

```
namespace JSONSample
{
    [ServiceContract]
    public interface IService1
    {
        [OperationContract]
        [WebGet( ResponseFormat = WebMessageFormat.Json)]
        Employee[] getData();
    }

    [DataContract]
    public class Employee
    {
        [DataMember]
        public string id { get; set; }

        [DataMember]
        public string name { get; set; }
    }

} 
```

以及实施

```
namespace JSONSample
{

    public class Service1 : IService1
    {

        #region IService1 Members

        public Employee[] getData()
        {
            return new Employee[] { new Employee() { id = "1", name = "John" }, new Employee() { id = "2", name = "Bourne" }, new Employee() { id = "3", name = "Harry" } };
        }

        #endregion
    }
} 
```

Webconfig 中的端点

我已经创建了端点

```
<system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="JSONSample.Service1Behavior">
                    <serviceMetadata httpGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="false"/>
                </behavior>
            </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
        </behaviors>
    <services>
      <service behaviorConfiguration="JSONSample.Service1Behavior" name="JSONSample.Service1">
        <endpoint address="" binding="webHttpBinding" contract="JSONSample.IService1" behaviorConfiguration="web"/>
      </service>
    </services>
    </system.serviceModel> 
```

来自 Html 的调用我正在使用 get 并且没有向服务器发送任何数据

```
jQuery.support.cors = true;
        $(document).ready(function() {

            $.ajax({
                 type: "GET", 
                 url: "http://localhost:51220/Service1.svc/getdata", 
                 contentType: "application/json; charset=utf-8", 
                 dataType: "json", 
                 processdata: false,
                 success: function(msg) {
                        alert(msg);
                 },
                 error: function ServiceFailed(result) {
                    alert('Service call failed: ' + result.status + '' + result.statusText);
                }
            });

        }); 
```

为什么这只适用于 IE 而不是 Firefox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T05:37:34.493

您还必须在 WCF 服务中设置 CORS 标头。您可以通过自定义行为轻松设置它。

检查这篇[文章](http://dhvik.blogspot.in/2011/06/supporting-cross-origin-resource_9123.html)。

# php - 更改服务器后 readfile() 脚本不起作用

> ID：11337778
> 
> 赞同：1
> 
> 时间：2012-07-05T04:16:43.893
> 
> 标签：php, download, readfile

我有一个有效的代码，在这里：

```
if (isset($_GET['file']) && isset($_GET['name']))
{
$file = base64_decode($_REQUEST['file']);

$ch = curl_init($file);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);

$data = curl_exec($ch);
curl_close($ch);

if (preg_match('/Content-Length: (\d+)/', $data, $matches)) 
{
    // Contains file size in bytes
    $contentLength = (int)$matches[1];
}

header("Content-type: application/x-file-to-save");
header("Content-Disposition: attachment; filename=".$_REQUEST['name']);
header('Content-Length: ' . $contentLength);
header('Content-Transfer-Encoding: binary');

@readfile($file);

} 
```

然后我将服务器更改为不同的主机提供程序，并且代码停止工作。当我从 chrome 下载时，它只会不断加载和加载，但是当我从 IDM 之类的下载管理器下载时，它会获得正确的名称和大小，但是当我按下开始时，它会出现错误，说明不支持恢复或其他内容。 ..

同样，当我使用不同的提供者时，代码仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:23:47.110

可能是在`readfile()`使用之前输出的错误`ob_clean(); flush();`以删除之前的任何输出`readfile`

# php - 使用 Javascript 创建 DOM 元素

> ID：11337784
> 
> 赞同：0
> 
> 时间：2012-07-05T04:18:37.873
> 
> 标签：php, javascript, dom, rss

您好我正在尝试使用 PHP 和 javascript 检索 RSS 提要。

我可以使用 PHP 获取 RSS 提要，但我想使用 javascript 为 RSS 提要创建 DOM 元素。我不知道如何完成这个。有人可以分享一些提示吗？非常感谢。

```
PHP

    function parse_rss_feed($url){
        $contents= file_get_contents($url);
        $xmlStr= simplexml_load_string($contents);
        return $xmlStr;
    }

    function get_rss_feed($xmlStr){

         echo '<ul>';

          foreach ($xmlStr->item as $node):

              //I want to transfer my RSS value to my javascript....

                $title=$node->title;
                $author=$node->creator;

                $desc=$node->description; 

           endforeach;

            echo '</ul>';

      } 
```

html

```
 <head>
     <script type="text/javascript" src="js/slideshow.js"></script>
</head>
<body>
   <?php
     include 'getFeed.php';
     parse_rss_feed('http://myRSSFeed')
     get_rss_feed($xmlStr)
   ?>
</body> 
```

幻灯片.js

```
var rss=document.createElement('artical');

//How do I get the value from my php...
rss.innerHtml=.......??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:21:40.883

再简单不过了，[`createElement()`](http://reference.sitepoint.com/javascript/Document/createElement)。

```
var el = document.createElement('div') 
```

**编辑：**

要将 JavaScript 与 PHP 混合使用，只需像您通常所做的那样将其转义，但我建议您是否正在认真学习[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

```
?>
<script>
  var foo = <?php echo 'baz' ?>
</script>
<?php 
```

# java - 如何在jsp中以编程方式清除浏览器缓存？

> ID：11337785
> 
> 赞同：6
> 
> 时间：2012-07-05T04:18:39.607
> 
> 标签：java, jsp

在我的 Web 应用程序中，由于浏览器缓存存在一些问题。

加载我的jsp页面时如何清除浏览器缓存？

如何在 jsp 页面中包含清除缓存代码？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T04:28:10.263

您可以在您的 JSP 中这样做`prevent from caching`，但无法以编程方式清除缓存：

```
 <% response.setHeader("Cache-Control","no-cache"); //HTTP 1.1 
 response.setHeader("Pragma","no-cache"); //HTTP 1.0 
 response.setDateHeader ("Expires", 0); //prevents caching at the proxy server  
%> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T03:43:28.190

```
<%
response.setHeader("Cache-Control", "no-cache");
response.setHeader("Cache-Control", "no-store");
response.setHeader("Pragma", "no-cache");
response.setDateHeader("Expires", 0);
 %> 
```

**在 jsp 中完美工作并记得检查会话**

```
<%

User u = (User) request.getSession().getAttribute("user");
if (u != null ) {
//show page
}else{
// redirect to login page
}

%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-20T22:34:36.327

```
<%
response.addHeader("Cache-Control", "no-cache, no-store, must-revalidate");
response.addHeader("Pragma", "no-cache");
response.setDateHeader("Expires", 0);
%> 
```

这对我有用。[参考](https://blog.55minutes.com/2011/10/how-to-defeat-the-browser-back-button-cache/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-07T10:41:21.737

如何禁用特定 JSP 的浏览器缓存？可以防止浏览器缓存 JSP 页面响应。添加到响应标头的以下提示似乎可以防止大多数现代浏览器在“命中”相同的 URL 时将页面拉出缓存：

```
<%
   response.setHeader( "Pragma", "no-cache" );
   response.setHeader( "Cache-Control", "no-cache" );
   response.setDateHeader( "Expires", 0 );
%> 
```

在 HTML 标头中使用 meta 标签也可以达到同样的效果：

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Sat, 01 Dec 2001 00:00:00 GMT"> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-05T05:22:21.347

在 HTML 标头中使用 meta 标签也可以达到同样的效果：

```
<meta http-equiv="Pragma" content="no-cache"> 
 <meta http-equiv="Cache-Control"      content="no-cache"> 
<meta http-equiv="Expires" content="Sat, 01 Dec 2012 00:00:00 GMT"> 
```

Cache-Control 标头是在 HTTP 1.1 中添加的，而另外两个标头也存在于 HTTP 1.0 中。

# php - Zend DB - where And Or 查询

> ID：11337790
> 
> 赞同：0
> 
> 时间：2012-07-05T04:19:21.787
> 
> 标签：php, sql, zend-db

有人可以告诉我 Zend DB 查询表示最后一行的正确语法（`and (xxx or xxx)`

```
...
where
    id = 1241487470
and (contract=0 or is_work IS NOT NULL)
... 
```

我被困在这个：

```
->where('id = ?', 1241487470)
->where(...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:19:22.177

这似乎合乎逻辑并且有效。所以耶。

```
->where('id = ?', 1241487470)
->where('contract= ? or is_work IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T09:22:55.560

这似乎也有效并保留了zend db擒纵机构

```
->where('id = ?', 1241487470);
->where('(contract = ?', 0);
->orWhere('is_work IS NOT NULL)'); 
```

# sql - pgsql 选择表中最大的项目

> ID：11337792
> 
> 赞同：-3
> 
> 时间：2012-07-05T04:19:48.563
> 
> 标签：sql, postgresql

我创建表格

```
CREATE TABLE dataset (
  identifier character varying(15) NOT NULL,
  description character varying(3000) NOT NULL,
  publisher character varying(45) NOT NOT NULL,
  publication_date date,
  modification_date date,
  title character varying(600) NOT NULL,
  release_date date
) 
```

我如何选择最大的标识符，例如。

```
10001/01
10001/02
10001/03
10001/04 
```

选择10001/04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:53:18.510

为什么需要一段文本 (variing(15)) 作为标识符？通常使用从序列中获取下一个数字的数字。使用数据类型 SERIAL，这一切都为您处理，请参阅[手册](http://www.postgresql.org/docs/current/static/datatype-numeric.html#DATATYPE-SERIAL)。

您也可以使用 MAX() 来获得最大的数字，但永远不要尝试将其用作“下一个数字”，因为这不起作用。可能还有其他人在同一个号码上工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:28:55.357

像这样的东西

```
select parts[1], max(parts[2])
from ( 
   select identifier,
          regexp_split_to_array(identifier, '/')::int[] as parts
   from dataset 
) t
group by parts[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:39:49.753

```
select max(
       substring(
                 identifier, 
                 position('/' in identifier) + 1, 
                 length(identifier) - position('/' in identifier)
                )::integer
      ) 
```

我知道它不是那么漂亮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T05:09:34.873

第 4 行出现语法错误`NOT NOT NULL`。

如果您所说的“最大”意味着“最长”，那么这样的事情可能会帮助您：

```
select identifier from dataset order by length(identifier) desc limit 1; 
```

如果您想要文本比较格式中的“最大”项（即“foo”>“bar”），则使用 MAX：

```
select max(identifier) from dataset; 
```

如果标识符是字符串格式的数字，这也将有所帮助（警告......由于一些奇怪的语言环境设置......我曾经经历过'-1'>'0'......和'9'>'10'）。

如果它是数字的，您也可以将标识符动态转换为 int：

```
select max(identifier::int) from dataset; 
```

鉴于希望比较斜线后的数字的额外信息，试试这个：

```
select identifier from dataset 
order by substring(identifier from '/([0-9]*)$')::int desc limit 1; 
```

为了加快速度，您可以在子字符串表达式上添加一个索引：

```
create index dataset_by_substring on dataset 
(substring(identifier from  '/([0-9]*)$')); 
```

# jquery - Facebook页面应用程序中的偏移颜色框位置

> ID：11337794
> 
> 赞同：0
> 
> 时间：2012-07-05T04:19:50.940
> 
> 标签：jquery, colorbox, facebook-javascript-sdk

发现自己在一个角落里 - 我正在尝试在 Facebook 页面应用程序上使用颜色框，并且由于 iframe 而遇到问题。

Colorbox 使用，工作正常，但在框架中间加载：

```
$(document).ready(function () {
    $('a.popup').colorbox();        
});

<a class='popup' href='xxxxxx' title='title'><img src='xxxxxx'/></a> 
```

我可以从 FB api 获取 scrollTop 值并将其与一串 html 一起发送到 Colorbox：

```
$("a.popup").click(function () {
    FB.Canvas.getPageInfo(function (fbCanvasInfoObject) {
        var fbPosition = fbCanvasInfoObject.scrollTop;
        $.colorbox({html:"content", pxToTop:fbPosition});
    });
}) 
```

在 Colorbox 中稍作更改以使用 pxTotop 值，它将模态窗口设置为距视口顶部 150px：

```
top = settings.pxToTop + 150; 
```

我需要将两者结合起来，并具有第一个示例中的 Colorbox 功能（图像标题显示为标题的标准功能），以及第二个示例中生成的偏移量。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:42:10.213

总是会发生 - 问一个问题，然后自己找到答案。如果有人有兴趣，解决方案如下：

```
$(document).ready(function () {
    $("a.popup").live("click", function () {
        var caption = this.title;
        var image = this.href;
        FB.Canvas.getPageInfo(function (fbCanvasInfoObject) {
            var fbPosition = fbCanvasInfoObject.scrollTop;
            $.colorbox({ href:image, title: caption, fbScrollTop: fbPosition });
        });
        return false;
    })
}); 
```

修改了彩盒脚本（~ln518）：

```
var top = settings.fbScrollTop + 150; 
```

排序。奇迹般有效。

# url - Groovy 中使用 HttpURLConnection 的连接超时

> ID：11337795
> 
> 赞同：1
> 
> 时间：2012-07-05T04:19:53.087
> 
> 标签：url, groovy

我总是收到“连接到 ${url} 时出错”消息？

谁能告诉我我的错误？

```
 def url = new URL("https://www.google.com")
        HttpURLConnection connection = (HttpURLConnection) url.openConnection()
        connection.setRequestMethod("GET")
        // connection.setConnectTimeout(10000)
        connection.connect()
        if (connection.responseCode == 200 || connection.responseCode == 201) {
            def returnMessage = connection.content

            //print out the full response
            println returnMessage
        } else {
            println "Error Connecting to " + url
        } 
```

| 错误 2012-07-05 00:04:05,950 [http-bio-8080-exec-6] 错误错误。GrailsExceptionResolver - 处理请求时发生 ConnectException：[GET] /CopperApplications/urlTracker 连接超时：连接。Stacktrace 如下：消息：连接超时：连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:31:38.313

您的代码似乎是正确的，并在带有 1.6.0_33 JVM 的 Groovy 1.7.9 上产生了预期的（？）结果。您的网络可能有问题（如连接超时错误所示）。

# android - Android（三星 Galaxy S III）上的爆炸人像 HDMI 输出

> ID：11337797
> 
> 赞同：5
> 
> 时间：2012-07-05T04:20:39.427
> 
> 标签：android, galaxy, mirroring, portrait, hdmi

目前，当您将外接显示器连接到支持镜像的 Android 手机时，手机会假设外接显示器设置为横向。因此，当手机（在本例中为 Galaxy S III）纵向放置时，显示器上的视频输出是纵向的，但两侧的黑条居中。当然，当手机水平握持时，输出会填满外接显示器。

我正在寻找的是一种强制 Galaxy S III 镜像其屏幕的方法，这样当它以纵向放置时，输出将填满外部显示器。它必须在 Android 上运行 - 我不是特别在谈论特定的应用程序，它需要在所有应用程序中一致地运行。

外接显示器将垂直安装，因此 Galaxy S III 在纵向时的输出必须完全填满并在外接显示器上具有正确的方向。

谁能给我任何关于从哪里开始的建议？我已经查看了 S III 的源代码，但找不到任何线索（我没有在 Android 上编写自己的驱动程序的经验）。这将适用于美国版本（特别是 Verizon，尽管视频硬件 - Adreno 225 GPU 和 SiI9234 MHL 控制器芯片 - 在所有美国版本中都是相同的）。也许在该领域更有经验的人可以对此有所了解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T16:49:10.850

不幸的是，这是不可能的。您必须在横向模式下开发您的应用程序，然后旋转所有视图/内容以使其看起来处于垂直纵向模式。一种选择是动画。IE：

旋转动画.xml：

```
<rotate  xmlns:android="http://schemas.android.com/apk/res/android"
       android:fromDegrees="0" 
       android:toDegrees="-90"
       android:pivotX="50%"
       android:duration="0"
       android:fillAfter="true" /> 
```

您的代码：

```
 TextView text = (TextView)findViewById(R.id.txtview);       
  text.setText("rotated text here");

  RotateAnimation rotate=    (RotateAnimation)AnimationUtils.loadAnimation(this,R.anim.rotateAnimation);
t.setAnimation(rotate); 
```

你也可以看看这个帖子：

[Android中的垂直（旋转）标签](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android)

# android - 获取订阅令牌的 Google Android 订阅 API 到期时间。

> ID：11337799
> 
> 赞同：10
> 
> 时间：2012-07-05T04:21:09.513
> 
> 标签：android, google-api, google-play

当我提出以下请求时，Google 只给出错误 503，并且不会提供任何有用的信息。

我在这里关注文档：[https ://developers.google.com/android-publisher/v1/purchases/get](https://developers.google.com/android-publisher/v1/purchases/get)

授权令牌最近被刷新（自动）。（通常它过时时会显示 401。）

```
[root@308321 cgi-bin]# wget -dSO- 'https://www.googleapis.com/androidpublisher/v1/applications/com.kizbit.pairfinder/subscriptions/subscription99/purchases/vkorjajxnjfyhxbftpymwfox?access_token=ya29.AHES6ZSnxLdOVf2QWrX96VbpDMdUKlHFXJOFEdHM_f_ErQlL'
Setting --server-response (serverresponse) to 1
Setting --output-document (outputdocument) to -
DEBUG output created by Wget 1.12 on linux-gnu.

--2012-07-05 00:09:46--  https://www.googleapis.com/androidpublisher/v1/applications/com.kizbit.pairfinder/subscriptions/subscription99/purchases/vkorjajxnjfyhxbftpymwfox?access_token=ya29.AHES6ZSnxLdOVf2QWrX96VbpDMdUKlHFXJOFEdHM_f_ErQlL
Resolving www.googleapis.com... 2001:4860:b007::5f, 74.125.142.95
Caching www.googleapis.com => 2001:4860:b007::5f 74.125.142.95
Connecting to www.googleapis.com|2001:4860:b007::5f|:443... connected.
Created socket 3.
Releasing 0x0000000000cc9370 (new refcount 1).
Initiating SSL handshake.
Handshake successful; connected socket 3 to SSL handle 0x0000000000cd8e70
certificate:
  subject: /C=US/ST=California/L=Mountain View/O=Google Inc/CN=*.googleapis.com
  issuer:  /C=US/O=Google Inc/CN=Google Internet Authority
X509 certificate successfully verified and matches host www.googleapis.com

---request begin---
GET /androidpublisher/v1/applications/com.kizbit.pairfinder/subscriptions/subscription99/purchases/vkorjajxnjfyhxbftpymwfox?access_token=ya29.AHES6ZSnxLdOVf2QWrX96VbpDMdUKlHFXJOFEdHM_f_ErQlL HTTP/1.0
User-Agent: Wget/1.12 (linux-gnu)
Accept: */*
Host: www.googleapis.com
Connection: Keep-Alive

---request end---
HTTP request sent, awaiting response...
---response begin---
HTTP/1.0 503 Service Unavailable
Content-Type: application/json; charset=UTF-8
Date: Thu, 05 Jul 2012 04:09:56 GMT
Expires: Thu, 05 Jul 2012 04:09:56 GMT
Cache-Control: private, max-age=0
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
Server: GSE

---response end---

  HTTP/1.0 503 Service Unavailable
  Content-Type: application/json; charset=UTF-8
  Date: Thu, 05 Jul 2012 04:09:56 GMT
  Expires: Thu, 05 Jul 2012 04:09:56 GMT
  Cache-Control: private, max-age=0
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  X-XSS-Protection: 1; mode=block
  Server: GSE
Closed 3/SSL 0x0000000000cd8e70
2012-07-05 00:09:47 ERROR 503: Service Unavailable. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T16:34:06.153

@imrankhan。下面是如何在 Perl 中执行此操作：

```
sub refreshAccessToken {
    my $ua = LWP::UserAgent->new;
    my $req = HTTP::Request->new(POST => 'https://accounts.google.com/o/oauth2/token');
    $req->content_type('application/x-www-form-urlencoded');
    $req->content('grant_type=refresh_token&client_id=9999999.apps.googleusercontent.com&client_secret=xxxxxxxxxxxxxxxx&refresh_token='.$REFRESH_TOKEN);
    # grant_type=refresh_token
    # client_id=<the client ID token created in the APIs Console>
    # client_secret=<the client secret corresponding to the client ID>
    # refresh_token=<the refresh token from the very first authorization step>
    my $res = $ua->request($req);
    if ($res->is_success()) { # parse JSON
        #print $res->content . "\n";
        # {
          # "access_token" : "ya29.AHES3ZQ_MxxxxTeSl530Na2",
          # "token_type" : "Bearer",
          # "expires_in" : 3600,
        # }
        my $json = decode_json($res->content);
        my $accessToken = $json->{'access_token'};
        saveAccessToken($accessToken);
    } else {
        serverError($ERROR_GOOGLE, 'Could not refresh subscription access token from Google server. '.$res->status_line);
        exit;
    }
} 
```

# c++ - 有什么方法可以制作参数化的用户定义文字？

> ID：11337800
> 
> 赞同：3
> 
> 时间：2012-07-05T04:21:30.367
> 
> 标签：c++, c++11, literals

不久前，我对“参数化”用户定义的文字有了一个想法，并且想知道在当前的 C++ 标准中是否有任何方法可以做到这一点。

基本上，这个想法是有一个用户定义的文字，它的行为可以根据一些参数进行调整。作为一个简单的例子，我选择了一个“定点”文字，它将浮点数转换为整数；该参数是小数位数方面的精度。

现在这只是一个练习，因为我不确定这在实际应用程序中如何或是否有用。

我的第一个想法是这样的：

```
namespace fp_impl {
    constexpr int floor(long double n) {
        return n;
    }

    constexpr int pow10(int exp) {
        return exp == 0 ? 1 : 10 * pow10(exp - 1);
    }

    template<int i>
    constexpr int fixed_point(long double n) {
        return floor(n * pow10(i));
    }

    namespace fp2 {
        constexpr int operator"" _fp (long double n) {
            return fixed_point<2>(n);
        }
    }

    namespace fp4 {
        constexpr int operator"" _fp (long double n) {
            return fixed_point<4>(n);
        }
    }
}

template<int prec> struct fp;
template<> struct fp<2> {
    namespace lit = fp2;
};
template<> struct fp<4> {
    namespace lit = fp4;
};

int main() {
    {
        using namespace fp<2>::lit;
        std::cout << 5.421_fp << std::endl; // should output 542
    }
    {
        using namespace fp<4>::lit;
        std::cout << 5.421_fp << std::endl; // should output 54210
    }
} 
```

但是，它不会编译，因为在类范围内不允许命名空间别名。（它还要求您手动定义每个版本的`operator"" _fp`.）所以我决定尝试使用宏：

```
namespace fp {
    namespace detail {
        constexpr int floor(long double n) {
            return n;
        }

        constexpr int pow10(int exp) {
            return exp == 0 ? 1 : 10 * pow10(exp - 1);
        }

        template<int i>
        constexpr int fixed_point(long double n) {
            return floor(n * pow10(i));
        }
    }
}

#define SPEC(i) \
    namespace fp { \
        namespace precision##i { \
            constexpr int operator"" _fp(long double n) { \
                return fp::detail::fixed_point<i>(n); \
            } \
        } \
    }
SPEC(2); SPEC(4);
#undef SPEC
#define fp_precision(i) namespace fp::precision##i

int main() {
    {
        using fp_precision(2);
        std::cout << 5.421_fp << std::endl;
    }
    {
        using fp_precision(4);
        std::cout << 5.421_fp << std::endl;
    }
} 
```

这是可行的，尽管它仍然需要为`SPEC()`您想要使用的每个精度使用宏。当然，对于从 0 到 100 的每个值，可以使用一些预处理器技巧来执行此操作，但我想知道是否有更像模板解决方案的东西，每个都在需要时被实例化。我对在模板类中使用声明为友元函数的运算符“”有一个模糊的想法，尽管我怀疑这也行不通。

作为说明，我确实尝试过`template<int i> constexpr int operator"" _fp(long double n)`，但似乎这不是文字运算符的允许声明。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T22:04:14.517

`operator()(int)`您可以返回从文字运算符重载的类类型。然后你可以写

```
5.421_fp(2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T10:17:40.080

用户定义的文字函数将文字本身作为其唯一参数。您可以在函数外部使用状态，例如使用全局或线程局部变量，但这不是很干净。

如果参数将始终是编译时常量，并且它是数字的一部分，请将其传递给文字本身。这需要编写一个`operator "" _ ( char const *, std::size_t )`重载或`template< char ... > operator "" _ ()`模板并完全自己解析数字。

但是，您必须将这样的参数用于现有的浮点语法。尽管 C++ 定义了一个非常开放的*预处理数字*结构，但用户定义的文字必须由附加了*ud 后缀*标识符的有效标记构成。

您可能会考虑使用字符串而不是数字，但随后模板选项就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T07:18:29.933

不需要宏来解决问题。由于问题涉及处理文字数字（例如，整数或浮点格式的数字），因此可以使用文字运算符的模板定义和模板元编程在编译时完成这项工作。

要进行定点文字转换，您可以使用带有 unsigned long long 的整数文字运算符，例如，

```
some_type operator "" _fp(unsigned long long num)
{
  // code
} 
```

（或可能会损失精度的 long double ）但这会导致一切都在运行时发生。

第 3 和第 4 节中的第 2.14.8 节（用户定义的 Lierals [lex.ext]）中的 C++11 定义了文字运算符变体，**包括****整数**和**浮点**文字的**模板版本**！不幸的是，第 5 和第 6 段*没有*为*字符串*和*字符*文字定义*模板版本*。这意味着该技术仅适用于整数和浮点字面量。

 *******因此，从 C++11 第 2.14.8 节开始，上面的 _fp 文字运算符可以改为：

```
template <char... Digits>
constexpr some_type operator "" _fp()
{
  return process_fp<2, Digits...>::to_some_type();
} 
```

例如，其中 2 是`int i`来自 OP 的模板参数的值，并且`some_type`是返回类型需要的任何值。请注意，模板参数是一个`char`-- 而不是一个`int`或其他数字。另请注意，文字运算符没有参数。因此`Digit - '0'`，需要类似代码来将数值转换为该字符的整数值。此外，`Digits...`将按从左到右的顺序进行处理。

现在可以使用模板元编程，`process_fp`其前向声明如下所示：

```
template <int i, char... Digits>
struct process_fp; 
```

并且会`static constexpr`调用一个方法`to_some_type()`来计算并返回所需的编译时结果。

人们可能还想要一个有意义的、简单的例子。去年我写了这样使用的代码（下面的链接）：

```
int main()
{
  using namespace std;

  const unsigned long long bits =
    11011110101011011011111011101111_binary;
  cout << "The number is: " << hex << bits << endl;
} 
```

将二进制数 11011110101011011011111011101111 转换`unsigned long long`为编译时的二进制数并将其存储为位。使用上面提到的模板元编程技术的完整代码和解释在我的博客文章中提供，标题为[Using The C++ Literal Operator](http://preney.ca/paul/archives/636)。*******

# ruby-on-rails - 如何在 Rails 的 API 文档中快速定位方法？

> ID：11337801
> 
> 赞同：0
> 
> 时间：2012-07-05T04:21:36.120
> 
> 标签：ruby-on-rails

例如，我想`ActionController::RoutingError`在[http://api.rubyonrails.org/](http://api.rubyonrails.org/)找到构造函数。我在搜索框中输入`ActionController::RoutingError`或`RoutingError`，没有返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:00:40.820

这是一个不好的例子。查看源代码：

```
 class RoutingError < ActionControllerError #:nodoc:
    attr_reader :failures
    def initialize(message, failures=[])
      super(message)
      @failures = failures
    end
  end 
```

该课程没有文档。

也可以试试[http://apidock.com/rails——](http://apidock.com/rails)这个资源通常会更有帮助。

# yii - beforeSave() 重命名 yii(php) 中的文件

> ID：11337805
> 
> 赞同：0
> 
> 时间：2012-07-05T04:21:48.137
> 
> 标签：yii, yii-extensions

我正在使用 beforeSave() 重命名已上传的文件。但在保存到文件夹之前它没有被重命名。它与上传的文件同名。我使用扩展名 EAjaxUpload 上传文件。任何人都可以帮助我哪里出错了...而且我正在Windows上工作。

在模型中（附加简历）：-

```
protected function beforeSave()
{ 
                            $path='C:\\wamp\\www\\Myapp\\Resumes\\';
                        $uid=$_POST['AttachResume']['User_id'];
                        //var_dump($this->User_id); exit();
                        $file=$_POST['AttachResume']['ResumeName'];
                        //var_dump($this->ResumeName); exit();
                        $temp = $path.$file;
                        $newname=$uid.$file;
                        if(file_exists($temp)==true)
                        {
                          rename($temp, $path.$newname);

                        }
                 return parent::beforeSave();

  }  
Controller:-
 public function actionIndex()
{
    $model=new AttachResume;  
    if(isset($_POST['AttachResume']))
        {

         $model->User_id=$_POST['AttachResume']['User_id'];
     $model->ResumeName=$_POST['AttachResume']['ResumeName'];
     $model->save();

        }
       $this->render('index',array('model'=>$model));
    } 
```

Myapp 是应用程序。Resume 是它下面的文件夹，我必须在其中保存文档，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T11:34:08.880

使用这个扩展： [http](http://www.yiiframework.com/extension/eajaxupload/) : //www.yiiframework.com/extension/eajaxupload/ 那是最好的扩展

要重命名正在上传的文件，请在下面添加以下行： rename($folder.$result['filename'],$folder."newfilename");

感谢 Ben：在此链接上找到的解决方案： [How to use xupload with Yii](https://stackoverflow.com/questions/8543909/how-to-use-xupload-with-yii)

# actionscript-3 - 获取不在第一帧上的实例对象

> ID：11337808
> 
> 赞同：0
> 
> 时间：2012-07-05T04:22:22.047
> 
> 标签：actionscript-3, instance

我正在使用 actionscript 3.0 和 Flash Professional CS5.5 我遇到了不在第一帧上的实例对象的问题。我的第一帧是菜单，第二帧包含 TLF 文本字段。我给文本字段一个实例名称，比如说“username_txt”。现在，如果我关闭“自动声明阶段实例”并在我的主类中执行此操作

```
 public class MainClass extends MovieClip {

        public var username_txt:TLFTextField;

        public function MainClass() {
            username_txt.text = "anything";
        }
 } 
```

我将收到一个运行时错误，说明我尝试访问空对象的属性。（我已经导入了所有必要的类，所以这不是问题）

但是，当我将文本放在第一帧时，这不会发生。

有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:42:43.177

由于尚未到达框架，因此尚未实例化文本字段，因此我不确定是否有一种优雅的方式来执行此任务。

也许更好的模型是将数据模型与视图分离。

创建一个单例类来存储数据：

```
package
{

    public class ApplicationModel
    {

        /** Singleton instance. */
        private static var instance:ApplicationModel = new ApplicationModel();

        /** Return singleton instance. */
        public static function getInstance():ApplicationModel
        {
            return instance;
        }

        /** Data Model */
        public var username:String;

        /** Constructor as singleton enforcer */
        public function ApplicationModel()
        {
            if (instance)
                throw new Error("ApplicationModel is a singleton and can only be accessed through ApplicationModel.getInstance()");
        }

    }
} 
```

然后从关键帧或类等任何地方，您可以获取对象的实例，实现为：

```
ApplicationModel.getInstance().username = "test"; 
```

或者更好的做法是：

```
var applicationModel:ApplicationModel = ApplicationModel.getInstance();
applicationModel.username = "test"; 
```

根据您的示例：

```
public class MainClass extends MovieClip {

    public var username_txt:TLFTextField;

    public function MainClass() {
        ApplicationModel.getInstance().username = "anything";
    }
} 
```

然后，在需要更新 TLFTextField 的框架上（框架 2 的框架脚本），根据模型设置文本：

```
username_txt.text = ApplicationModel.getInstance().username 
```

您的视图将始终在需要时更新。

# clojure - 编译时出现ns错误

> ID：11337810
> 
> 赞同：1
> 
> 时间：2012-07-05T04:22:30.660
> 
> 标签：clojure

我想在功能块中导入依赖项。w 这些依赖项不是公开可用的，因此我无法通过 project.clj 包含它们并在 ns 块中需要它们。

但是，这些 jars 在服务器环境中可用，并且当下面的 deps 在类路径中时，服务器会调用下面的函数。

但是，当我在服务器 env 之外编译以下函数时，我仍然得到编译器错误，它无法找到 util 和 web ns。

```
(defn imm
  []
  (require '[immutant.web :as web]
           '[immutant.utilities :as util])
  (server/load-views (io/file (util/app-root) "src/pm/views"))
  (web/start "/dev" handler)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:53:29.130

您必须延迟 Var 分辨率。

```
(defn imm
  []
  (require '[immutant.web :as web] '[immutant.utilities :as util])
  (server/load-views (io/file @(resolve 'util/app-root) "src/pm/views"))
  (@(resolve 'web/start) "/dev" handler)) 
```

# php - 用户读取功能时蛋糕php问题

> ID：11337813
> 
> 赞同：0
> 
> 时间：2012-07-05T04:22:58.647
> 
> 标签：php, cakephp-2.0

嗨，这是我面临的一个 cakephp 问题。

我在客户中添加了一家外地公司

当我尝试读取数据时

```
$this->data = $this->Customer->read(null, $id); 
```

使用这个。

它向我显示内部错误

请任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:50:20.350

**为您的客户**表添加一个新字段后，尝试删除您的模型缓存并检查，

```
$this->data = $this->Customer->read(null, $id); 
```

它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:06:10.853

另一种方法是将调试值从 2 更改为 0，然后执行您的代码，然后在 app/Config/core.php 文件中再次将其从 0 更改为 2。它对我有用。

在这种情况下，您不需要从 app/tmp/cache/models 文件夹中清除模型缓存文件。

# javascript - 保存/恢复浏览器后退/前进按钮上的所有 javascript 变量单击

> ID：11337819
> 
> 赞同：0
> 
> 时间：2012-07-05T04:24:01.010
> 
> 标签：javascript, client-side, browser-history

当按下浏览器后退按钮时，我想恢复一个 ajax 整个修改页面以及内存中的 javascript 变量。它是使用手动添加到浏览器历史记录中的`window.history.pushState()`。我正在尝试使用以下方法保存/恢复页面：

```
 function changeURL(){
               window.history.pushState(document.body.innerHTML,"","...");
            }

            window.onpopstate = function(e){
                if(e.state){
                    document.body.innerHTML = e.state;
                }
            }; 
```

看起来这可行，但只是一个问题，即加载页面时内存中的 javascript 变量不再存在，因为它们被后续的 ajax 请求修改，但我没有做出任何规定来在按下后退按钮时恢复它们。如何将所有这些值恢复到变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:40:48.433

1.  编写一个函数，将您想要跟踪的所有变量序列化为某种易于管理的格式（我建议使用 JSON）。
2.  编写第二个函数，它可以接受序列化数据并对其进行解析/反序列化，同时恢复变量（这将是第一个函数的镜像）。
3.  找到一些合理的位置来存储您的序列化状态，以便在页面加载时保留它。就个人而言，我过去曾为此使用过 cookie，尽管您也可以使用`localStorage`或您喜欢的任何其他机制。
4.  每次状态更改时，或至少在用户离开页面之前的某个时刻，将代码添加到您的页面以存储/更新序列化状态。
5.  将代码添加到页面以在页面加载时检查存储/序列化状态，如果存在则加载它。

编辑：我还建议不要将全部`document.body.innerHTML`视为您的序列化“状态”。应该可以隔离您用于修改 HTML 内容的变量，并将其用作您的状态。然后，您可以通过重新应用变量来重新生成相应的 HTML。

# database - oracle数据库中sqlplus如何列出一个表中的所有数据？

> ID：11337820
> 
> 赞同：1
> 
> 时间：2012-07-05T04:24:05.690
> 
> 标签：database, oracle, sqlplus

这可能是一个非常基本的问题，但我找不到正确的命令。

我可以使用命令列出表中的数据字段

```
select * from cat where table_name='mytable'; 
```

如何使用 sqlplus 检查已插入此表中的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:47:14.220

您可以使用简单的语句从表中获取所有数据：

```
select * from <table name>; 
```

因此，如果您想从表中获取所有数据`cat`，请尝试：

```
select * from cat; 
```

如果您想从中获取所有数据`mytable`，请尝试：

```
select * from mytable; 
```

您在语句中定义的任何`where`子句都用于过滤这个简单的“选择所有内容”语句将返回的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-31T14:52:18.680

连接到您要在其中查看表的所需用户 SQL QUERY: **select table_name from user_tables;**

# javascript - 带有关联的 RESTful API 设计

> ID：11337823
> 
> 赞同：5
> 
> 时间：2012-07-05T04:25:09.303
> 
> 标签：javascript, api, rest, backbone.js

我正在尝试为两种资源构建 API，一种与用户有关，另一种与电影有关。两种资源都有关联——一个用户将有多个电影，而一个电影将有多个用户。据推测，我会这样设计我的 API：

```
/api/users/
/api/users/:id
/api/users/:id/movies

/api/movies/
/api/movies/:id
/api/movies/:id/users 
```

但问题是：我还在客户端使用 Backbone.js 来获取 API 数据。如果我在

```
/api/users/:id/movies 
```

那么这将适用于 GET 请求，但 POST 和 PUT 请求似乎会被定向到：

```
/api/users/:id/movies/:id 
```

但是，看起来，如果它被发布到会更好

```
/api/movies/:id 
```

反而。那是对的吗？人们通常如何处理 RestFul 联想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:48:12.720

不确定您所说的“POST 和 PUT 请求似乎会被定向到......”是什么意思。Backbone.js 会自动为 URL 添加参数吗？如果是这样，您应该考虑对其进行配置，使其不会那样做，因为它不能与 REST API 一起使用。REST API 提供的链接应该是完整的，没有什么可以添加或删除的。

最后，如果您想将电影与用户相关联。您可以将电影（或只是其 ID）发布到：

```
/api/users/:id/movies 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-08T06:43:47.247

它是正确的。这是因为“电影”独立于“用户”。电影可以在没有用户的情况下存在，所以它们的关系实际上是“关联的”。要创建电影，您根本不需要用户，因此将创建电影的 POST URI 设置为“POST /api/movies”更有意义。

我能想到的 RESTful API 中关联的替代方法是在 GET 用户 API 响应中包含电影 ID 列表，例如，名为“associatedMovieIDs”的属性具有与用户关联的电影 ID 字符串数组。这样，您的 API 将变为：

```
/api/users/
/api/users/:id

/api/movies/
/api/movies/:id 
```

# c++ - 无法发送代理凭据 (407)

> ID：11337824
> 
> 赞同：1
> 
> 时间：2012-07-05T04:25:22.800
> 
> 标签：c++, http, https, proxy, winhttp

我正在尝试编写与需要密码和用户名身份验证（ip:port:username:pw）的代理连接的代码 C++ 程序，我得到了 http 工作，但是当我使用 https 时，我总是收到 407 错误。

如何以正确的方式在 https 上发送代理凭据？(C++)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:30:33.277

这很好，因为状态 407 意味着代理需要身份验证。

所以你可以使用这个：

```
 case 407:
            // The proxy requires authentication.
            printf( "The proxy requires authentication.  Sending credentials...\n" );

            // Obtain the supported and preferred schemes.
            bResults = WinHttpQueryAuthSchemes( hRequest, 
                &dwSupportedSchemes, 
                &dwFirstScheme, 
                &dwTarget );

            // Set the credentials before resending the request.
            if( bResults )
                dwProxyAuthScheme = ChooseAuthScheme(dwSupportedSchemes);

            // If the same credentials are requested twice, abort the
            // request.  For simplicity, this sample does not check 
            // for a repeated sequence of status codes.
            if( dwLastStatus == 407 )
                bDone = TRUE;
            break; 
```

功能

```
 DWORD ChooseAuthScheme( DWORD dwSupportedSchemes )
  {
//  It is the server's responsibility only to accept 
//  authentication schemes that provide a sufficient
//  level of security to protect the servers resources.
//
//  The client is also obligated only to use an authentication
//  scheme that adequately protects its username and password.
//
//  Thus, this sample code does not use Basic authentication  
//  becaus Basic authentication exposes the client's username
//  and password to anyone monitoring the connection.

if( dwSupportedSchemes & WINHTTP_AUTH_SCHEME_NEGOTIATE )
    return WINHTTP_AUTH_SCHEME_NEGOTIATE;
else if( dwSupportedSchemes & WINHTTP_AUTH_SCHEME_NTLM )
    return WINHTTP_AUTH_SCHEME_NTLM;
else if( dwSupportedSchemes & WINHTTP_AUTH_SCHEME_PASSPORT )
    return WINHTTP_AUTH_SCHEME_PASSPORT;
else if( dwSupportedSchemes & WINHTTP_AUTH_SCHEME_DIGEST )
    return WINHTTP_AUTH_SCHEME_DIGEST;
else
    return 0;
   } 
```

这决定了身份验证方案......然后你使用

```
 bResults = WinHttpSetCredentials( hRequest, 
        WINHTTP_AUTH_TARGET_SERVER, 
        dwProxyAuthScheme,
        username,
        password,
        NULL ); 
```

我希望这会有所帮助...我也正在使用这些工具从 azure 市场连接到 Microsoft 翻译器，因为它移到了那里，并且从 8 月开始，所有旧的 bing 翻译器都不会收到请求。对我来说，它是通过标头发送身份验证密钥。但我猜你有一个用户名和密码。

# asp.net-mvc - 我可以预先计算一个变量，然后在 Razor HTML 脚本中使用它吗？

> ID：11337830
> 
> 赞同：0
> 
> 时间：2012-07-05T04:25:46.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我的 HTML / razor 代码如下所示：

```
@model Content.Grid
<tr id="row_@(Model.Row)" 
    data-pk="@(Model.PartitionKey)"
    data-rk="@(Model.RowKey)">
   <td>
@(Model.RowKey.Substring(0, 2).TrimStart('0')).@(Model.RowKey.Substring(2, 2).TrimStart('0').PadLeft(1, '0'))
  </td>
   <td>
@(Model.RowKey.Substring(0, 2).TrimStart('0')).@(Model.RowKey.Substring(2, 2).TrimStart('0').PadLeft(1, '0'))
  </td>
</tr> 
```

这只是一个示例，但在我的应用程序中，我的列会重复几次相同的计算。有没有一种方法可以在代码开头执行此操作，然后只使用每列中的值。像预先计算这个然后将 Obj 局部变量放在 my ?

```
@{
    Obj = Model.RowKey.Substring(0, 2).TrimStart('0'))
} 
```

我试过这个，但似乎无法让它工作。

请注意。我无法在我的应用程序中更改模型。计算必须在剃刀文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:35:03.257

我看不出有什么理由不这样做。试试这个：

```
@model Content.Grid

@{
    var result = string.Format("{0}.{1}", Model.RowKey.Substring(0, 2).TrimStart('0'), Model.RowKey.Substring(2, 2).TrimStart('0').PadLeft(1, '0'));
}

<tr id="row_@(Model.Row)" 
    data-pk="@(Model.PartitionKey)"
    data-rk="@(Model.RowKey)">
    <td>
        @result
    </td>
    <td>
        @result
    </td>
</tr> 
```

# mysql - 如何避免使用单个 $wpdb 在 foreach 中进行多次查询？

> ID：11337834
> 
> 赞同：0
> 
> 时间：2012-07-05T04:26:45.277
> 
> 标签：mysql, wordpress, loops, foreach

好吧，这会很大。正如你们许多人所知，鼓励不要在循环内多次查询数据库，但对于这项任务来说，不这样做是非常困难的——至少对我来说是这样。我们走吧。

在 Wordpress 中，我有六类帖子。一个页面必须调用每个类别的 3 个最新帖子并按顺序显示它们（不混合）。

要完成该任务，首先我向数据库询问类别。然后，`foreach`类别我运行一个查询以使用 $wp_query 对象检索该类别名称下的最后 3 个帖子——这会产生 6 个查询。类别可以更改，当然我不想在每次更改代码时都被调用。

我尝试使用 $wpdb 使用一次性 MySQL (5.5) 查询来检索所有这些帖子[和变量](https://stackoverflow.com/questions/4775820/sql-give-me-3-hits-for-each-type-only)：

```
SELECT
    DISTINCT $wpdb->posts.ID,
    $wpdb->posts.post_title,
    $wpdb->posts.post_excerpt,
    $wpdb->posts.comment_count,
    $wpdb->posts.guid,
    $wpdb->posts.post_status,
    $wpdb->posts.post_name,
    $wpdb->posts.post_date,
    $wpdb->posts.post_type,
    $wpdb->terms.slug
FROM (
      SELECT
        $wpdb->posts.ID,
        $wpdb->posts.post_title,
        $wpdb->posts.post_excerpt,
        $wpdb->posts.comment_count,
        $wpdb->posts.guid,
        $wpdb->posts.post_status,
        $wpdb->posts.post_name,
        $wpdb->posts.post_date,
        $wpdb->posts.post_type,
        $wpdb->terms.slug,
        @num := if(@group = $wpdb->terms.slug, @num + 1, 1) as row_number,
        @group := $wpdb->terms.slug
      FROM $wpdb->posts
      LEFT JOIN $wpdb->term_relationships
             ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
      LEFT JOIN $wpdb->term_taxonomy
             ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
      LEFT JOIN $wpdb->terms
             ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
      ORDER BY $wpdb->terms.slug ASC, $wpdb->posts.post_date DESC
    ) as $wpdb->posts

LEFT JOIN $wpdb->term_relationships
       ON($wpdb->posts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy
       ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
LEFT JOIN $wpdb->terms
       ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)

WHERE $wpdb->posts.post_type = 'site_type'
  AND $wpdb->posts.post_status = 'publish'
  AND $wpdb->term_taxonomy.taxonomy = 'site_category'
  AND $wpdb->terms.slug IN ('cars', 'planes', 'motorcycles', '4x4', 'bicycles', 'jetpacks')
  AND row_number <= 5

ORDER BY $wpdb->terms.slug ASC, $wpdb->posts.post_date DESC
LIMIT $total 
```

然后，在那之后，[我](https://stackoverflow.com/questions/6382362/split-array-into-smaller-arrays-based-on-value-of-key)根据`slug`. 结果就是问题。

在 PHPMyAdmin 中，我执行这个查询并且`row_number`不求和，每一行的值都是 1。这使得每个“X slug 下的帖子组”都没有限制，`row_number <= 5`不起作用。在自定义页面中，第一个类别（有 7 个帖子）显示超过 3 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:35:57.350

如果我理解你的问题，那么我会告诉你使用`query_posts`

```
<?php 
    $categories=array('cat1', 'cat2', 'cat3', 'cat4', 'cat5', 'cat6');
    foreach($categories as $cat)
    {
        query_posts('category_name='.$cat.'&showposts=3&orderby=date&oredr=DESC');
        while (have_posts()) : the_post();
        ?>
            <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
        <?php
        endwhile;
        wp_reset_query();
    }
?> 
```

只需将$categories 数组中的`cat1`, `cat2`......替换`cat6`为您的真实类别名称即可。

`$categories`此代码段将显示我们之前分配的数组中每个类别的最新 3 篇文章（此处仅以标题为例） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:54:58.980

在再次尝试使用 MySQL 变量但失败后，我看到了另一个选项：使用`UNION ALL`-[已在此处声明](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)，您`SELECT`每个组的 N 个数，然后用简单的话将它们联合起来。性能方面，至少在我的配置中，它的性能几乎与使用变量相同。

因此，我构建了一个`foreach`类别并为该组添加了查询。

```
 $p = 1;
    $numb = count($products);
    global $wpdb;
foreach($categories as $product) {
    $query .=  "(SELECT $wpdb->posts.ID, $wpdb->posts.post_title, $wpdb->posts.post_excerpt, $wpdb->posts.comment_count, $wpdb->posts.guid,
        $wpdb->posts.post_status,
        $wpdb->posts.post_name,
        $wpdb->posts.post_date,
        $wpdb->posts.post_type,
        $wpdb->terms.slug
    FROM $wpdb->posts
    LEFT JOIN $wpdb->term_relationships
        ON ($wpdb->posts.ID = $wpdb->term_relationships.object_id)
    LEFT JOIN $wpdb->term_taxonomy
        ON($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
    LEFT JOIN $wpdb->terms
        ON($wpdb->term_taxonomy.term_id = $wpdb->terms.term_id)
    WHERE $wpdb->posts.post_type = 'pb_review'
    AND $wpdb->posts.post_status = 'publish'
    AND $wpdb->term_taxonomy.taxonomy = 'product_reviews'
    AND $wpdb->terms.slug IN ('$product->slug')
    ORDER BY $wpdb->posts.post_date DESC
    LIMIT 3)" . ($p == $numb ? '' : ' UNION ALL ');
    $p++;
} 
```

在构建 $query 之后，我将它作为变量传递给 $wpdb 并瞧瞧：

```
$productos_query = $wpdb->get_results($query, OBJECT); 
```

为什么变量不起作用，将 +1 添加到`row_number`？我的猜测是因为我正在使用`LEFT JOIN`，但请做我的客人。

# html - 背景图片全宽，有限高度

> ID：11337838
> 
> 赞同：0
> 
> 时间：2012-07-05T04:27:11.290
> 
> 标签：html, css

我想实现背景图像效果，类似于[http://yipit.com/](http://yipit.com/)。

这是我目前拥有的：

```
<div id="landing-header">
    <img class="landing-background" src="{{ STATIC_URL }}images/new/landing-background.jpg"/>
</div>

#landing-header {
    height: 489px;
}
.landing-background {
    height: auto;
    min-width: 1460px;
    width: 100%;
    position: fixed;
    left: 0;
} 
```

我想要完成的是水平宽度总是与浏览器一样宽，并且图像会相应地缩放。例如，如果它是一个`500x200`图像并且浏览器很`1000px`宽，则图像将缩放到`1000x400`. 这是有效的。

但是，我只希望容器`400 px`高。换句话说，我想在 处截断图像`400px`。例如，`2000px`浏览器宽度中的图像将为`2000x800`，但仅显示顶部`400px`。我将如何做到这一点？

请注意，我**只**希望在浏览器宽度大于图像宽度时调整图像大小，我不希望每次更改浏览器时都调整图像大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:35:39.663

您好，您可以通过**CSS3 属性实现您想要的结果** `background-size:cover;`

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

查看演示：- [http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)

**更新**

查看更新后的演示，它是一个非常小的图像，而不是浏览器的宽度，因此它覆盖了整个背景：- [http://tinkerbin.com/CraP8wBh](http://tinkerbin.com/CraP8wBh)

# php - facebook访问令牌的到期时间

> ID：11337840
> 
> 赞同：2
> 
> 时间：2012-07-05T04:27:24.730
> 
> 标签：php, facebook, facebook-graph-api, facebook-access-token

如何在**php**中找到访问令牌将在什么时间到期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-27T18:34:48.653

[您最初在signed_request](http://developers.facebook.com/docs/authentication/signed_request/)中从 Facebook 收到的令牌将在 2 小时或 7200000 毫秒或 7200 秒后过期。如果您使用以下请求扩展令牌，您将在响应中收到 5184000 秒的新过期时间，转换为 60 天。我通常做的是将这个时间以毫秒为单位存储到自纪元以来的当前 Unix 时间（以毫秒为单位），并在需要时不断检查该时间。

[扩展令牌](http://developers.facebook.com/roadmap/offline-access-removal/)：

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

作为一个例子，我会要求在客户端获取信息并进行以下检查..

```
if (response.user.sources.FACEBOOK.expires > new Date().getTime() ) {
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T06:34:16.533

不确定您为什么要尝试确定这一点？如果用户在任何时候取消对您的应用程序的授权或更改其密码，访问令牌可能会过期。

阅读此 [Facebook - 操作方法：处理过期的访问令牌](http://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

此外，我相信 facebook 正在引领所有应用程序获得 60 天令牌。我可能是错的，但如果您启用离线访问令牌的弃用，您的应用程序应该被授予 60 天令牌。如果您的用户重新访问您的应用程序，该令牌会重新使用 60 天。

# javascript - 无法在较小 div 的中心对齐大图像，溢出隐藏以及字幕效果

> ID：11337842
> 
> 赞同：1
> 
> 时间：2012-07-05T04:27:48.787
> 
> 标签：javascript, jquery, css, youtube

我的问题分为三个部分

第 1 部分：显示图像的动画图像标题（这部分在示例第一行[http://jsfiddle.net/JBnbG/32/](http://jsfiddle.net/JBnbG/32/)中完成）

第 2 部分：在 150x150 尺寸的 div 中显示 youtube`hqdefault.jpg`缩略图的中心部分（这部分在示例中也作为第二行完成）

第 3 部分：我想将第 1 部分和第 2 部分功能集成到第 3 部分中。问题是标题有效，但图像未在中心对齐，如示例第二行所示。

示例在[http://jsfiddle.net/JBnbG/32/](http://jsfiddle.net/JBnbG/32/)

我不能改变结构，否则它不会工作标题部分正常工作

如果有人可以帮助解决保持 HTML 结构完整的问题，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:57:50.910

我想我的问题是，您是从 youtube 动态加载示例 html，还是仅加载图像？

如果 html 是你的，这是一个简单的样式调整。

我在[jsfiddle](http://jsfiddle.net/son0fhobs/VrFQR/6/)上分叉了它，我想这就是你的意思。

不太确定样式发生了什么，但我设置了图像

```
id="ContentPlaceHolder1_rptVideos_imgVideo_1" style="height:auto; width:200px;margin-left:-25px;" 
```

或者，另一种方式是：

```
left:-25px; position:relative; 
```

顺便说一句，所有这些样式都应该在样式表中声明为一个类。

如果您要动态加载 html，我会注释掉实现相同功能的 javascript。

根据您正在使用的内容，如果使用 php，您可能希望获得一个能够自动裁剪为适当大小的脚本。Timthumb.php 是最值得注意的一个，尽管存在一个永远不会完全防弹的安全问题，尽管它非常可靠。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:06:44.463

检查此工作代码：http: [//jsfiddle.net/surendraVsingh/JBnbG/39/](http://jsfiddle.net/surendraVsingh/JBnbG/39/)

**要在 CSS 中完成的更改：**

```
.VideoContainer  > span {
    display: block;    
}
.VideoContainer > span > img {
    display: inline-block;
    margin-left: -60px;
    margin-top: -25px;
} 
```

# objective-c - ABS(A) 和 abs(int)

> ID：11337845
> 
> 赞同：5
> 
> 时间：2012-07-05T04:28:15.740
> 
> 标签：objective-c, c, xcode, function, macros

我对这两个在 xcode、ABS(A) 和 abs(int) 中的区别感到困惑。似乎也无法在网上找到任何解释。我应该使用哪个？我实际上正在研究加速度计。使用 ABS(A) 和 abs(int) 给了我两个不同的值。使用 abs(int) 有时会产生一个 inf 值，而 ABS(A) 会给我一个不同的值，但绝不会是 inf。谢谢！

[http://www.switchonthecode.com/tutorials/iphone-tutorial-reading-the-accelerometer](http://www.switchonthecode.com/tutorials/iphone-tutorial-reading-the-accelerometer)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T04:43:14.877

`abs()`适用于 int，意思`abs(-10.123)`是 return `10`，while`ABS()`是一个宏，从`NSObjCRuntime.h`它返回一个值，其类型是参数的类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T07:38:11.990

NSObjCRuntime.h 中的 ABS 定义是：

```
#define ABS(a) ({typeof(a) _a = (a); _a < 0 ? -_a : _a; }) 
```

因此它返回具有参数类型的值。另一方面，abs 有原型

```
int abs (int number) 
```

所以它返回一个int类型的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T04:30:32.340

`ABS()`很可能是一个宏，这意味着它是一些代码的复制粘贴到您的应用程序中，而`abs()`可能是一个函数。在大多数情况下，请使用该函数，因为如果您在其中包含分配，它不会产生奇怪的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T09:29:43.487

关于使用带有函数参数的宏的警告，例如

```
#include <stdio.h>
#define BAD_ABS(A) ((A)<0 ? (-(A)):(A))
int     afunc(){
    printf("afunc was called\n");
    return 1;
}
int     main(void){
    int     a;
    a = BAD_ABS(afunc());
    /* this has the result of:
    a = (afunc()<0) ? (-(afunc())) : (afunc());
    */
} 
```

函数 'afunc' 将被调用两次，第一次用于比较 <0，第二次用于返回结果 -A 或 A。

NSObjCRuntime.h 中的 ABS 宏的定义方式通过引入一个额外的变量来避免这种情况，但一些 DIY 宏可能不会，例如我在几个地方看到过

```
 #define BAD_ABS(a) ((a)<0 ? (-(a)) : (a)) 
```

如果要调用的函数是随机数生成器，情况会变得更糟，例如

```
#include <stdio.h>
#include <stdlib.h>
int main(void){
   short seeds[] = {1,2,3};
   int i;
   for(i=0;i<10000;i++) printf("%ld\n", BAD_ABS(jrand48(seeds)));
} 
```

这有 50-50 的机会返回负数！！！

另一方面，如果您想使用 stdlib abs() 函数，请注意它不适用于长整数。在这种情况下，您应该使用 labs()。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-09-19T13:48:31.420

我们有两种选择

```
#define ABS(a) ({typeof(a) _a = (a); _a < 0 ? -_a : _a; }) 
```

在 Swift 2 中使用

```
Int32 abs(Int32) which has a return type Int32
T abs(T) which has a return type T where T is a generic type 
```

我希望它有效，谢谢

# javascript - 在 javascript 中扩展 Array 对象的方法

> ID：11337849
> 
> 赞同：42
> 
> 时间：2012-07-05T04:29:20.260
> 
> 标签：javascript, arrays, class, extend

我尝试使用一些用户友好的方法（例如 Array.Add() 而不是 Array.push() 等）在 javascript 中扩展 Array 对象...

我实现了 3 种方法来做到这一点。不幸的是，第三种方式不起作用，我想问为什么？以及如何做到这一点。

```
//------------- 1st way
Array.prototype.Add=function(element){
     this.push(element);
};

var list1 = new Array();
list1.Add("Hello world");
alert(list1[0]);

//------------- 2nd way
function Array2 () {
    //some other properties and methods
};

Array2.prototype = new Array;
Array2.prototype.Add = function(element){
  this.push(element);  
};

var list2 = new Array2;
list2.Add(123);
alert(list2[0]);

//------------- 3rd way
function Array3 () {
    this.prototype = new Array;
    this.Add = function(element){
      this.push(element);  
    };
};

var list3 = new Array3;
list3.Add(456);  //push is not a function
alert(list3[0]); // undefined 
```

在第三种方式中，我想在 Array3 类内部扩展 Array 对象。如何做到这一点才不会得到“推送不是函数”和“未定义”？

在这里，我添加了第 4 种方式。

```
//------------- 4th way
function Array4 () {
    //some other properties and methods
    this.Add = function(element){
        this.push(element);
    };
 };
Array4.prototype = new Array();

var list4 = new Array4();
list4.Add(789);
alert(list4[0]); 
```

在这里我必须再次使用原型。我希望避免在类构造函数之外使用额外的行作为 Array4.prototype。我想有一个紧凑的定义类，所有部分都在一个地方。但我认为我不能这样做。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2015-05-22T08:28:40.187

# ES6

```
class SubArray extends Array {
    last() {
        return this[this.length - 1];
    }
}
var sub = new SubArray(1, 2, 3);
sub // [1, 2, 3]
sub instanceof SubArray; // true
sub instanceof Array; // true 
```

* * *

# [使用`__proto__`](http://perfectionkills.com/how-ecmascript-5-still-does-not-allow-to-subclass-an-array/)

（旧答案，不推荐，可能会导致[性能问题](https://www.google.com/search?q=__proto__+performance+issues)）

```
function SubArray() {
  var arr = [ ];
  arr.push.apply(arr, arguments);
  arr.__proto__ = SubArray.prototype;
  return arr;
}
SubArray.prototype = new Array; 
```

现在您可以将方法添加到`SubArray`

```
SubArray.prototype.last = function() {
  return this[this.length - 1];
}; 
```

像普通数组一样初始化

```
var sub = new SubArray(1, 2, 3); 
```

表现得像普通数组

```
sub instanceof SubArray; // true
sub instanceof Array; // true 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-07-05T04:54:24.577

方法名称应该是小写的。不应在构造函数中修改原型。

```
function Array3() { };
Array3.prototype = new Array;
Array3.prototype.add = Array3.prototype.push 
```

在 CoffeeScript 中

```
class Array3 extends Array
   add: (item)->
     @push(item) 
```

如果您不喜欢该语法，并且您必须从构造函数中扩展它，您唯一的选择是：

```
// define this once somewhere
// you can also change this to accept multiple arguments 
function extend(x, y){
    for(var key in y) {
        if (y.hasOwnProperty(key)) {
            x[key] = y[key];
        }
    }
    return x;
}

function Array3() { 
   extend(this, Array.prototype);
   extend(this, {
      Add: function(item) {
        return this.push(item)
      }

   });
}; 
```

你也可以这样做

```
ArrayExtenstions = {
   Add: function() {

   }
}
extend(ArrayExtenstions, Array.prototype);

function Array3() { }
Array3.prototype = ArrayExtenstions; 
```

在过去，'prototype.js' 曾经有一个 Class.create 方法。你可以把这一切都包装起来就是这样的方法

```
var Array3 = Class.create(Array, {
    construct: function() {

    },    
    Add: function() {

    }
}); 
```

有关此内容以及如何实现的更多信息，请查看prototype.js 源代码

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-12T21:22:11.593

A while ago I read the book *Javascript Ninja* written by **John Resig**, the creator of *jQuery*. He proposed a way to mimic array-like methods with a plain JS object. Basically, only `length` is required.

```
var obj = {
    length: 0, //only length is required to mimic an Array
    add: function(elem){
        Array.prototype.push.call(this, elem);
    },
    filter: function(callback) {
        return Array.prototype.filter.call(this, callback); //or provide your own implemetation
    }
};

obj.add('a');
obj.add('b');
console.log(obj.length); //2
console.log(obj[0], obj[1]); //'a', 'b' 
```

I don't mean it's good or bad. It's an original way of doing `Array` operations. The benefit is that you do not extend the `Array prototype`. Keep in mind that `obj` is a plain `object`, it's not an `Array`. Therefore `obj instanceof Array` will return `false`. Think `obj` as a *façade*.

If that code is of interest to you, read the excerpt *Listing 4.10 Simulating array-like methods*.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T04:35:01.663

在您的第三个示例中，您只是创建了一个以`prototype`object命名的新属性`Array3`。当您执行`new Array3`which should be`new Array3()`时，您将该对象实例化为 variable `list3`。因此，该`Add`方法将不起作用`this`，因为有问题的对象 没有有效的方法`push`。希望你能理解。

**编辑：**查看[了解 JavaScript 上下文](http://joshuakehn.com/2011/10/20/Understanding-JavaScript-Context.html)以了解更多关于`this`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-08T15:41:14.907

你也可以在 ES6 中使用这种方式：

```
Object.assign(Array.prototype, {
    unique() {
      return this.filter((value, index, array) => {
        return array.indexOf(value) === index;
      });
    }
}); 
```

结果：

```
let x = [0,1,2,3,2,3];
let y = x.unique();
console.log(y); // => [0,1,2,3] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T04:53:16.813

您是否尝试做一些更复杂的事情，然后只为“push”添加一个名为“Add”的别名？

如果没有，最好避免这样做。我建议这是一个坏主意的原因是因为 Array 是一个内置的 javascript 类型，修改它会导致所有脚本 Array 类型都有新的“添加”方法。名称与另一个第三方发生冲突的可能性很高，并且可能导致第三方脚本失去其方法而有利于您的脚本。

我的一般规则是让一个辅助函数在 Array 上工作，如果它不存在于某个地方，并且仅在非常必要时扩展 Array。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-07T20:42:20.330

您不能在 JavaScript 中扩展数组对象。

相反，您可以做的是定义一个对象，该对象将包含在 Array 上执行的函数列表，并将这些函数注入该 Array 实例并返回这个新的 Array 实例。您不应该做的是更改`Array.prototype`以在列表中包含您的自定义函数。

例子：

```
function MyArray() {
  var tmp_array = Object.create(Array.prototype);
  tmp_array = (Array.apply(tmp_array, arguments) || tmp_array);
  //Now extend tmp_array
  for( var meth in MyArray.prototype )
    if(MyArray.prototype.hasOwnProperty(meth))
      tmp_array[meth] = MyArray.prototype[meth];
  return (tmp_array);
}
//Now define the prototype chain.
MyArray.prototype = {
  customFunction: function() { return "blah blah"; },
  customMetaData: "Blah Blah",
} 
```

只是一个示例代码，您可以修改它并根据需要使用它。但我建议您遵循的基本概念保持不变。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-28T18:14:25.453

```
var SubArray = function() {                                           
    var arrInst = new Array(...arguments); // spread arguments object
    /* Object.getPrototypeOf(arrInst) === Array.prototype */
    Object.setPrototypeOf(arrInst, SubArray.prototype);     //redirectionA
    return arrInst; // now instanceof SubArray
};

SubArray.prototype = {
    // SubArray.prototype.constructor = SubArray;
    constructor: SubArray,

    // methods avilable for all instances of SubArray
    add: function(element){return this.push(element);},
    ...
};

Object.setPrototypeOf(SubArray.prototype, Array.prototype); //redirectionB

var subArr = new SubArray(1, 2);
subArr.add(3); subArr[2]; // 3 
```

答案是一个紧凑的解决方法，它可以在所有支持的浏览器中按预期工作。

# linux - 更新-rc.d 命令

> ID：11337851
> 
> 赞同：0
> 
> 时间：2012-07-05T04:29:32.157
> 
> 标签：linux, debian

我有一些脚本我想自动运行它。我正在使用这样的命令：

```
 update-rc.d tdpsd defaults 
```

它失败并出现以下错误：

```
insserv: warning: current stop runlevel(s) (0 1 6) of script `tdpsd' overwrites defaults (0 1 6 S) 
```

我理解错误的含义，但在不通过自定义运行级别的情况下找不到任何解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:52:51.897

这不是错误。这只是一个通知，您正在加载的 init 脚本具有不寻常的运行级别——如果您真的不希望它在 S（单用户）运行级别中运行，请忽略该消息。

# java - 安卓USB应用

> ID：11337852
> 
> 赞同：2
> 
> 时间：2012-07-05T04:29:46.367
> 
> 标签：java, android, usb, communication

我一直在研究一个程序，其中一个 android 应用程序通过 USB 连接与台式计算机进行通信。我确实发现 Android 3.1 允许 USB 通信，但我不知道如何继续。如果有人能告诉我这是如何完成的，我会非常有帮助。

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:37:49.240

您可以使用此 API。

[配件开发套件](http://developer.android.com/tools/adk/index.html)

也可以从此链接获得更详细的信息。

[Android 应用程序，与插入 USB 端口的设备通信](https://stackoverflow.com/questions/3803871/android-apps-communicating-with-a-device-plugged-in-the-usb-port)

我不确定您是否可以使用模拟器对此进行测试。因此，开发一个应用程序并将其部署`real device`到`connect`您的 PC`via USB port`上进行测试。

# c# - 控件范围内的光标

> ID：11337856
> 
> 赞同：1
> 
> 时间：2012-07-05T04:30:20.017
> 
> 标签：c#, winforms, cursor, contains, windows-controls

```
public void TapeMeasure(object sender, EventArgs e)
  {
     if (TrussManager.Truss != null)
     {
        Point containerPoint = trussEditor.PointToClient(Cursor.Position);

        if (!trussEditor.MainMenu.CommandToolStrip.ClientRectangle.Contains(containerPoint))
           execute command A
        else
        execute command B
     }
  } 
```

这个事件是从

```
ToolStripButton commandButton = new ToolStripButton("Tape", ConvertIconToImage(icon), TapeMeasure); 
```

和

```
ToolStripMenuItem tsmi = new ToolStripMenuItem("Tape", ConvertIconToImage(icon), TapeMeasure); 
```

（Winforms 应用程序）

我想知道我的光标何时不是我的工具条。但是，无论我的光标在哪里，上面的代码都会返回相同的结果。

此代码位于从工具条上的按钮或上下文菜单上的按钮调用的事件处理程序中。如果在上下文菜单上调用它，我假设用户想要使用当前鼠标点。否则我希望用户去点击他们想要的点

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:02:39.827

由于您使用 MouseClick 事件来启动您的方法，因此 Click 事件的 Sender 对象将具有发起该事件的对象。在这种情况下，我只需确定发件人的类型，因为一个是 ToolStripButton，另一个是 MenuItem。正如我在聊天中提到的那样，Cursor.Point 会不断更新，我认为这是导致您的问题的原因。

此示例将确定哪个对象生成了 ClickEvent 并运行适当的方法。

```
public void TapeMeasure(object sender, EventArgs e) 
{ 
    if (TrussManager.Truss != null) 
    { 
        System.Type sysType = sender.GetType();

        if (!(sysType.Name == "ToolStripButton"))
            //execute command A 
        else 
            //execute command B 
    } 
} 
```

并且这个例子将考虑到 ContextMenu 的位置，如果它包含在工具栏中，则处理与单击按钮相同的方法。

```
public void TapeMeasure(object sender, EventArgs e) 
{ 
    if (TrussManager.Truss != null) 
    {
        System.Type sysType = sender.GetType();
        if (!(sysType.Name == "ToolStripButton"))
        {
            if (sysType.Name == "ToolStripMenuItem")
            {
                ToolStripMenuItem temp = (ToolStripMenuItem)sender;
                if (trussEditor.MainMenu.CommandToolStrip.ClientRectangle.Contains(trussEditor.MainMenu.CommandToolStrip.PointToClient(temp.Owner.Location)))
                {
                    //execute command A
                }
                else
                {
                    //execute command B
                }
            }
        }
        else
        {
            //execute command A
        }
    } 
} 
```

# google-maps - 当我上传到我的网络服务器时，Google Maps v3 上的标记消失了

> ID：11337857
> 
> 赞同：0
> 
> 时间：2012-07-05T04:30:30.370
> 
> 标签：google-maps, google-maps-api-3

很奇怪。当我在本地计算机上预览我的地图文件时，它工作得很好，并且出现了标记。但是，当我上传到我的网络服务器时，标记消失了。文件完全一样...

有谁知道发生了什么？

[http://www.andyinman.com/googlemap/test2.html](http://www.andyinman.com/googlemap/test2.html)

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>St. Joseph Larceny Map</title>
<script src="http://maps.google.com/maps/api/js?sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[

[ { featureType: "landscape.natural", stylers: [ { hue: "#3bff00" }, { visibility: "off" } ] }]

var customIcons = {
  restaurant: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_blue.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  },
  bar: {
    icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
    shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png'
  }
};

function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(39.7579, -94.8365),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("larceny1.xml", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var address = markers[i].getAttribute("address");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
      var html = "<b>" + name + "</b> <br/>" + address;
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
      bindInfoWindow(marker, map, infoWindow, html);
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}

//]]>
  </script>
  </head>

  <body onload="load()">
    <div id="map" style="width: 100%; height: 100%"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:59:09.323

它适用于 Chrome、Firefox 和 IE8。也许你有一个坏的 xml 副本卡在浏览器缓存中（你使用的是哪个浏览器？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:32:35.220

尝试使用您自己的合法密钥。这条线

```
<script src="http://maps.google.com/maps/api/js?sensor=false"
        type="text/javascript"></script> 
```

应该看起来更像这样

```
<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AacbdefglcdK7C2GHbQAmdkBID70Uppuf-D030&sensor=true">
    </script> 
```

您可以在他们的主页上申请自己的 Google Maps API 密钥。由于带宽等情况，不允许普通用户使用默认 Google 密钥进行发布有几个原因。因此，大容量公司必须付费才能获得 Google Maps 密钥的许可证，但供您使用，免费密钥可能会正常工作。

# javascript - 如何使用 jQuery Mobile Phone-Gap for iPhone&Android 添加发送电子邮件功能

> ID：11337861
> 
> 赞同：0
> 
> 时间：2012-07-05T04:31:00.063
> 
> 标签：javascript, android, iphone, jquery-mobile, cordova

我已经使用**Phone-Gap**和**jQuery Mobile**为**`iPhone`**和**`Android`**.

我们需要添加以将数据作为*电子邮件*从我们的应用程序发送。**`mail`** *`functionality`*

 ***jQuery mobile 中是否有任何常用的电子邮件功能插件。**

*`How to add mail functionality in jQuery Mobile.`*

请提供任何链接和指导/教程。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:12:25.997

我不确定在 Android 端，但有一个适用于 iPhone 端的插件，您可以在 github 上的以下链接中找到。

[https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/EmailComposer](https://github.com/purplecabbage/phonegap-plugins/tree/master/iPhone/EmailComposer)*

# c# - Microsoft Office Addin 2007 和 2010 自定义帮助主题

> ID：11337865
> 
> 赞同：0
> 
> 时间：2012-07-05T04:31:28.223
> 
> 标签：c#, ms-office, office-addins

我负责 Office 加载项，我需要知道是否可以向加载项的 Microsoft 帮助添加帮助。即，当按下 F1 时，在帮助中打开一个页面，其中包含有关加载项的信息。

我能够在网上找到的唯一信息与 Excel 有关，但这需要是一个通用的解决方案，如果可能的话，它可以适用于所有办公应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:40:27.393

我认为您不能将某事添加到内置帮助中。这是我认为的一些 *.chm 文件，因此您必须对其进行扩展或替换。我宁愿在功能区中添加一些按钮，其中包含指向您的手册所在页面的链接，或者在 ActionPane 的 Word/Excel 中显示它。

# spring - 我如何告诉 EclipseLink 停止 ServerSession 连接查询

> ID：11337866
> 
> 赞同：0
> 
> 时间：2012-07-05T04:31:29.463
> 
> 标签：spring, session, jpa, eclipselink, connection-pooling

查看堆栈跟踪日志时，我注意到每当我使用实体管理器或 EL (JPA 2.0) 提供的方法运行任何查询时`em.find(), findAll() ...`，都会有一个来自所有相关实体的 Injected bean，它们`n queries`根据关系触发。我已经使用 spring.instruments jar 成功地启用了 tomcat 的编织，我非常确定编织正在发生，并且我的 @OneToOne、@ManyToOne 懒惰设置正在及时设置和编织。问题可能是我如何查询以及`ServerSession`执行多个查询的连接。

显示此的堆栈跟踪：

```
[EL Fine]: sql: 2012-07-04 22:26:20.959--ServerSession(1528617164)--Connection(1657707912)--Thread(Thread[tomcat-http--9,5,main])--SELECT personID, TYPE, DATEADDED, FIRSTNAME, LASTNAME, MIDDLENAME, ACTIVE, BIRTHDAY, EMAILADDRESS, ETHNICITY, GENDER, HISPANIC, IMAGEPATH, MARITAL, NATIVELANGUAGE, PRIMARYTELEPHONE, RELIGIOUSAFFILIATION, SECONDARYTELEPHONE, version, addressID, schoolID, MAJOR, studentId FROM PERSON WHERE (personID = ?)
    bind => [101]
2012-07-04 22:26:20,963 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Administrator': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Person.entityManager
2012-07-04 22:26:20,964 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
2012-07-04 22:26:20,964 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Administrator': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Person.entityManager
2012-07-04 22:26:20,965 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
[EL Fine]: sql: 2012-07-04 22:26:20.966--ServerSession(1528617164)--Connection(264950364)--Thread(Thread[tomcat-http--9,5,main])--SELECT addressID, CITY, COUNTRY, STATE_US, STREETADDRESS, STREETADDRESS2, version, ZIPCODE FROM ADDRESS WHERE (addressID = ?)
    bind => [3]
2012-07-04 22:26:20,970 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Address': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Address.entityManager
2012-07-04 22:26:20,971 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
[EL Fine]: sql: 2012-07-04 22:26:20.972--ServerSession(1528617164)--Connection(255059556)--Thread(Thread[tomcat-http--9,5,main])--SELECT personID, TYPE, DATEADDED, FIRSTNAME, LASTNAME, MIDDLENAME, ACTIVE, BIRTHDAY, EMAILADDRESS, ETHNICITY, GENDER, HISPANIC, IMAGEPATH, MARITAL, NATIVELANGUAGE, PRIMARYTELEPHONE, RELIGIOUSAFFILIATION, SECONDARYTELEPHONE, version, addressID, schoolID, MAJOR, studentId FROM PERSON WHERE (addressID = ?)
    bind => [3]
2012-07-04 22:26:20,975 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Student': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Person.entityManager
2012-07-04 22:26:20,976 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
2012-07-04 22:26:20,976 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Student': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Person.entityManager
2012-07-04 22:26:20,977 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
[EL Fine]: sql: 2012-07-04 22:26:20.98--ServerSession(1528617164)--Connection(2062869828)--Thread(Thread[tomcat-http--9,5,main])--SELECT schoolID, ACTIVE, ADMISSIONSEMAILADDRESS, ADMISSIONSPHONE, CODE, description, HELPGENERALEMAILADDRESS, NAME, PRIMARYPHONE, version, addressID FROM SCHOOL WHERE (schoolID = ?)
    bind => [3]
2012-07-04 22:26:20,982 [tomcat-http--9] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.School': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.School.entityManager
2012-07-04 22:26:20,982 [tomcat-http--9] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
[EL Fine]: sql: 2012-07-04 22:26:20.983--ServerSession(1528617164)--Connection(140234280)--Thread(Thread[tomcat-http--9,5,main])--SELECT id, ACTIVE, CODE, DESCRIPTION, NAME, version, SCHOOLDEPARTMENT_schoolID FROM DEPARTMENT WHERE (SCHOOLDEPARTMENT_schoolID = ?)
    bind => [3]
[EL Fine]: sql: 2012-07-04 22:26:20.986--ServerSession(1528617164)--Connection(1812702959)--Thread(Thread[tomcat-http--9,5,main])--SELECT personID, TYPE, DATEADDED, FIRSTNAME, LASTNAME, MIDDLENAME, ACTIVE, BIRTHDAY, EMAILADDRESS, ETHNICITY, GENDER, HISPANIC, IMAGEPATH, MARITAL, NATIVELANGUAGE, PRIMARYTELEPHONE, RELIGIOUSAFFILIATION, SECONDARYTELEPHONE, version, addressID, schoolID, MAJOR, studentId FROM PERSON WHERE (schoolID = ?)
    bind => [3] 
```

对实体管理器对象执行查询后如何忽略缓存并立即返回？

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord(identifierColumn = "addressID")
public class Address {

    @Id
    @TableGenerator(name = "ADDRESS_TABLE_GEN", table = "ADDRESS_SEQUENCE_TABLE", pkColumnName = "SEQ_NAME", valueColumnName = "SEQ_COUNT", pkColumnValue = "ADDR_SEQ", allocationSize = 1, initialValue = 1)
    @GeneratedValue(strategy = GenerationType.TABLE, generator = "ADDRESS_TABLE_GEN")
    @Column(name = "addressID")
    private Long id;

    @BatchFetch(BatchFetchType.JOIN)
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "address", fetch = FetchType.EAGER)
    private Set<Person> persons = new HashSet<Person>(); 
```

申请实体

```
public class Applicant extends Person {

    private String major;

    @BatchFetch(BatchFetchType.JOIN)
    @OneToMany(targetEntity = ApplicantSchool.class, cascade = { javax.persistence.CascadeType.PERSIST, javax.persistence.CascadeType.REMOVE }, mappedBy = "applicant", fetch = FetchType.EAGER)
    private Set<ApplicantSchool> schools = new HashSet<ApplicantSchool>();

} 
```

堆栈跟踪; 恢复特定的 OneToOne 映射

```
[TomcatInstrumentableClassLoader@747917a] error aspect 'org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect' woven into 'org.bixin.dugsi.domain.Registration_Roo_Jpa_ActiveRecord' must be defined to the weaver (placed on the aspectpath, or defined in an aop.xml file if using LTW).
[TomcatInstrumentableClassLoader@747917a] error aspect 'org.springframework.mock.staticmock.AnnotationDrivenStaticEntityMockingControl' woven into 'org.bixin.dugsi.domain.Registration_Roo_Jpa_ActiveRecord' must be defined to the weaver (placed on the aspectpath, or defined in an aop.xml file if using LTW).
2012-07-06 17:08:34,910 ["http-bio-8080"-exec-1] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Found injected element on class [org.bixin.dugsi.domain.Registration]: PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Registration.entityManager
2012-07-06 17:08:34,910 ["http-bio-8080"-exec-1] DEBUG org.springframework.beans.factory.annotation.InjectionMetadata - Processing injected method of bean 'org.bixin.dugsi.domain.Registration': PersistenceElement for transient javax.persistence.EntityManager org.bixin.dugsi.domain.Registration.entityManager
2012-07-06 17:08:34,911 ["http-bio-8080"-exec-1] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'entityManagerFactory'
2012-07-06 17:08:34,914 ["http-bio-8080"-exec-1] DEBUG org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'org.apache.shiro.spring.security.interceptor.AuthorizationAttributeSourceAdvisor#0'
[EL Warning]: metadata: 2012-07-06 17:08:34.968--ServerSession(1433743869)--Thread(Thread["http-bio-8080"-exec-1,5,main])--Reverting the lazy setting on the OneToOne or ManyToOne attribute [person] for the entity class [class org.bixin.dugsi.domain.UserAccount] since weaving was not enabled or did not occur. 
```

这是 EL 所指的字段

```
 @OneToOne(targetEntity = Person.class, fetch = FetchType.LAZY) 
    @JoinColumn
    private Person person; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:36:17.953

您在显示的两个关系中都指定了 FetchType.EAGER，因此在构建源对象时必须始终获取它们。如前所述，问题似乎是在人（或申请人）中读取，这会导致获取地址。很可能，“地址”ManyToOne in Person 也被标记为渴望。这会导致构建地址，并且因为您有一个来自地址-> 申请人的 1:M，所以此查询必须转到数据库以确保它获取所有申请人。

所有引用的热切获取的实体都会发生同样的情况，这就是为什么除非必要，否则将所有内容都标记为热切是一个坏主意，尤其是 OneToMany 和 ManyToMany 关系。我建议您将它们更改为惰性并仅在访问关系时根据需要获取它们，或者在查询或查询提示中使用 fetch join 来预取所需的特定关系。

# css - 得到

> ID：11337867
> 
> 赞同：1
> 
> 时间：2012-07-05T04:31:48.860
> 
> 标签：css, fieldset, css-reset

许多[CSS 重置](http://sixrevisions.com/css/css-tips/css-tip-1-resetting-your-styles-with-css-reset/)消除了 <fieldset> 标记的边框、填充和边距。我想这是为了确保它们在所有浏览器中均匀呈现。但是，字段集在重置后不再在视觉上分隔 HTML（表单）元素组。

两个问题：

1.  浏览器是否真的以不同的方式呈现 <fieldset> 无重置？
2.  在 CSS 重置后获得“边框”外观的最佳方法是什么？像这样简单地重新设计它：

    ```
    fieldset {
        border: 1px solid silver;
        margin: 2px;
        padding: 7px;
    } 
    ```

我正在描述的一些图像：

不重置： ![在此处输入图像描述](../Images/d4147df293e4583ffa32b1dfb1a7104a.png)

带复位： ![在此处输入图像描述](../Images/65524974a4c5227e852b75ab954a39f1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:51:23.587

简单的答案是：不要使用重置！如果您知道自己在做什么，它们是不必要的。

例如，如果您使用重置，那么您将丢失任何本机 UI 样式，例如在本例中的字段集。例如，在 IE 中，无样式的字段集将有一个带有略微圆角的边框，就像本机程序中的字段集一样。重置会删除它，并且[非本机 UI 很糟糕](http://www.codinghorror.com/blog/2007/02/non-native-ui-sucks.html)。

但是，如果您坚持，只需确保以正确的顺序定义样式即可。重置应该是绝对的第一件事，然后是“取消重置”。看，是多余的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-25T20:38:45.287

我有类似的问题 - 我做了什么，我从[Normalize.css](https://github.com/necolas/normalize.css/blob/master/normalize.css)复制了样式，在 css 重置后粘贴了这个

```
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1\. Correct `color` not being inherited in IE 8/9/10/11.
 * 2\. Remove padding so people aren't caught out if they zero out fieldsets.
 */

legend {
  border: 0; /* 1 */
  padding: 0; /* 2 */
} 
```

# c++ - Qt creator 中函数的 C++ 注释

> ID：11337870
> 
> 赞同：5
> 
> 时间：2012-07-05T04:32:25.837
> 
> 标签：c++, qt, qt-creator, doxygen

如何在 Qt creator 中评论 C++ 函数，以便当我将鼠标悬停在对该函数的函数调用上时，我可能会将文档视为工具提示。

就像我们 /** newline Eclipse 自动创建注释块一样，我在 Qt creator 中寻找相同的内容，请告知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T04:39:30.690

您可能正在寻找类似[doxygen](http://www.doxygen.nl/)的东西。

[以下是](https://facwiki.cs.byu.edu/HCMI/index.php/Using_doxygen_with_Qt_Creator)使用 Qt Creator 的说明。

# c# - 进程无法访问该文件，因为它正被另一个进程使用，但并非一直都在使用

> ID：11337873
> 
> 赞同：2
> 
> 时间：2012-07-05T04:32:38.970
> 
> 标签：c#

这很奇怪，我有一个控制台应用程序，它可以读取媒体文件并使用第三方 dll（MediaInfo.dll）从媒体文件中提取一些数据

然后我将该文件从源上传到其他位置，最后我在一切完成后删除源中的该文件。

以下是我的删除代码。

```
 GC.Collect();
                    FileInfo[] fiListImages = (new DirectoryInfo(mfsData.Images)).GetFiles(String.Format("*{0}*", sp.Story.Slug));
                    foreach (FileInfo fi in fiListImages)
                    {

                        bool ImageFolder = fi.Directory.Name.Contains("Images");
                        if (ImageFolder)
                        {

                            File.Delete(fi.FullName);

                        }
                    }

                    FileInfo[] fiListMedia = (new DirectoryInfo(mfsData.EncodedMedia)).GetFiles(String.Format("*{0}*", sp.Story.Slug), SearchOption.AllDirectories);
                    foreach (FileInfo fi in fiListMedia)
                    {

                        if (sp.Profile.Name == "Comedy" && fi.FullName.Contains(@"\Comedy"))
                        {
                            File.Delete(fi.FullName);
                        }
                        else if (sp.Profile.Name == "Actuib" && ((fi.FullName.Contains(@"\Action") || (fi.FullName.Contains(@"\Syndicated")))))
                        {
                            File.Delete(fi.FullName);
                        }

                    } 
```

我只想在开始删除之前调用垃圾收集器（我认为这将帮助我删除所有锁，但我错了）。

该代码有时工作得非常好，有时它会抛出此异常“进程无法访问该文件，因为它正在被另一个进程使用”。

当我将媒体文件加载到第三方库时，我可能会怀疑另一个地方，如下所示

```
 videoInterrogator.LoadFile(filename);
                logger.Info("video interrogar extract the video files");
                message.AppendFormat(messageFormat, "FileSize", videoInterrogator.GetFileSize(), Environment.NewLine);
                message.AppendFormat(messageFormat, "MaxBitRate", videoInterrogator.maxBitRate(), Environment.NewLine);
                logger.Info("Video Extract done"); 
```

进入这段代码后，当我尝试手动删除该文件时，我收到相同的错误消息，并且不确定如何强制关闭连接以释放文件。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T04:48:46.797

有关的更多信息`videoInterrogator`肯定会有用。尝试检查其文档。如果它实现了，请在完成后`IDisposable`尝试调用`Dispose()`该对象。如果是 COM 对象调用`Marshal.ReleaseComObject()`。

# xml - 命名空间处理

> ID：11337874
> 
> 赞同：1
> 
> 时间：2012-07-05T04:32:42.963
> 
> 标签：xml, xslt, xslt-1.0

我有一个 xsl 文件和 2 个输入 xml 文件，要从中生成输出。在一个 XML 文件中，它们是一些被导入 xsl 文件的命名空间。但在其他 XML 文件中，名称空间不存在。我必须以可以处理两个 XML 文件的方式处理我的 XSL，因为 XSL 对于两个输入 XML 文件都是通用的。请建议。

第一个 XML 文件中的命名空间 ->

```
<TreeList xmlns="urn:sfti:documents:BasicTreeList:1:0"    
xmlns:cac="urn:sfti:CommonAggregateComponents:1:0"  
xmlns:cbc="urn:oasis:names:tc:ubl:CommonBasicComponents:1:0" 
xmlns:ccts="urn:oasis:names:tc:ubl:CoreComponentParameters:1:0" 
xmlns:cur="urn:oasis:names:tc:ubl:codelist:CurrencyCode:1:0" 
xmlns:sdt="urn:oasis:names:tc:ubl:SpecializedDatatypes:1:0" 
xmlns:udt="urn:oasis:names:tc:ubl:UnspecializedDatatypes:1:0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

第二个 XML 文件中的命名空间 ->

```
<TreeList xmlns:cac="urn:sfti:CommonAggregateComponents:1:0"  
xmlns:cbc="urn:oasis:names:tc:ubl:CommonBasicComponents:1:0" 
xmlns:ccts="urn:oasis:names:tc:ubl:CoreComponentParameters:1:0" 
xmlns:cur="urn:oasis:names:tc:ubl:codelist:CurrencyCode:1:0" 
xmlns:sdt="urn:oasis:names:tc:ubl:SpecializedDatatypes:1:0" 
xmlns:udt="urn:oasis:names:tc:ubl:UnspecializedDatatypes:1:0"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

XSL 文件中的命名空间 ->

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"   
    xmlns:abc="urn:sfti:documents:BasicTreeList:1:0" 
    xmlns:cac="urn:sfti:CommonAggregateComponents:1:0" 
    xmlns:cbc="urn:oasis:names:tc:ubl:CommonBasicComponents:1:0"> 
```

当我运行我的 XSL 文件时，它使用第一个 XML 运行良好。但由于命名空间问题，它不适用于第二个 XML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T07:40:42.263

如果您想使用相同的 XSLT 代码来处理在其词汇表中使用相同本地名称但名称空间不同的源文档，那么最好的解决方案是预处理其中一个文件以更改名称空间。这可以使用包含以下模板的样式表来完成：

```
<xsl:template match="*[namespace-uri()='old-uri']">
  <xsl:element name="{local-name()}" namespace="new-uri">
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="*"/>
  </xsl:element>
</xsl:template>

<xsl:template match="@*[namespace-uri()='old-uri']">
  <xsl:attribute name="{local-name()}" namespace="new-uri">
    <xsl:value-of select="."/>
  </xsl:attribute>
</xsl:template>

<xsl:template match="*">
  <xsl:copy>
    <xsl:apply-templates select="@*"/>
    <xsl:apply-templates select="*"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="@*">
  <xsl:copy/>
</xsl:template> 
```

# android - LiveSDK XMPP android 示例不工作

> ID：11337876
> 
> 赞同：0
> 
> 时间：2012-07-05T04:32:50.227
> 
> 标签：android, xmpp, hotmail, windows-live-messenger

我尝试为 Hotmail 聊天的信使服务实现[LiveSDK XMPP android 示例](https://github.com/liveservices/LiveSDK/tree/master/Samples/XMPP-Samples/Android)。

我得到了身份验证令牌，如 LogCat 预览所示，

```
07-05 09:52:06.408: I/onPageFinished(21312): <!>com.ms.wlm.WLMActivity$MyWebViewClient 319<!> Page - http://www.slktechlabs.com/#access_token=EwAoAq1DBAAUlbRWyAJjK5w968Ru3Cyt%2f6GvwXwAAaoVuXcoTjxcoOkoec%2fKvwaSgtfYv1N9duMQHPFph7mdbXsfOiTf9EDe1PtFJ6YdjcHdKfbEwbh8LyVMHtj88iXIkhFBWcfDMVe4lNwfL9GKJq5CQKeeNHhPKGWe5cBOyIFnH8lBi0uPAQaJxsrUYjo800%2bgiMZyM8ammDU70gGto7TlavrpjuowtMSQqYJSMXF1Pjs4Cq6eMAPcoUrtLG1xFf2wiAF2%2f5a8kM97cVGarMGi62HUpZWrp1f4sBuaImzo8C8DMy7LafE42IUHPHalne54oHMNDLB3mXh9pvXTdrP8XLSfaDkNgbuMIDP3yEdBuPQuwnl%2fMfuca9hXbE8DZgAACCRBkUfjJ6s7%2bABg%2bAUJRL%2ftxNgDkG%2fquQ0D1q6kozu24jPVF9DxISPK6BDRyDpkO0uFvUaC4eskE93t8obfYdKSdNl3jGyoyiSG1%2fw3Mrisa%2bChMiEuLVzS1tP%2fAKEchYqdEvyn%2bn%2bYaybyCArNYMgQEKIg3PFoLOAh6QImPo21tMbu9KIBYOyDb0B88y9WNErxMJb%2bACRy4iskUrlaxniOXi92RX6fH40cmkC0Bfy%2b6T4CmZ6NTLXJoGqF6nd8l3RVJBEUz%2fLL%2baFGpcol3RZja0vyZeUTQkwwJiTm0wcX9VpnkMAO10cyony5QghkmC8c8Ts9tDvVpDZseGtwmHUtnwAA&token_type=bearer&expires_in=3600&scope=wl.messenger&authentication_token=eyJhbGciOiJIUzI1NiIsICJraWQiOiIwIiwgInR5cCI6IkpXVCJ9.eyJ2ZXIiOjEsICJpc3MiOiJ1cm46d2luZG93czpsaXZlaWQiLCAiZXhwIjoxMzQxNTQ4NTE3LCAiYXVkIjoid3d3LnNsa3RlY2hsYWJzLmNvbSIsICJ1aWQiOi
I2N2Q2NDcxNTRmOTEyYWQ1MWU2OTI1YWFmZGIwNGM0OSIsICJ1cm46bWljcm9zb2Z0OmFwcHVyaSI6IiIsICJ1cm46bWljcm9zb2Z0OmFwcGlkIjoiMDAwMDAwMDA0MDBDQjk4RSJ9.NGQB8_NBT8twZOmJvsrrUUjQkX2gQeRCIY5sMwvObjM 
```

但是，当该代码在获取身份验证令牌后`this.connection.connect();`在`XmppClient.java`文件中运行时，它会引发`<see-other-host>`错误。

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:11:22.973

在 4 月份的最新服务器更新后，此示例不再有效。另请参阅[http://msdn.microsoft.com/en-us/library/live/hh826554.aspx](http://msdn.microsoft.com/en-us/library/live/hh826554.aspx)

您必须阅读错误中给出的主机名并重新连接到该主机。这似乎是他们的负载平衡方式;-)

# html - html5 microdata markup using Schema.org

> ID：11337879
> 
> 赞同：3
> 
> 时间：2012-07-05T04:33:30.933
> 
> 标签：html, microdata, schema.org

I am working on a site of a christian church. It has a page with schedule list and house churches list which I want to mark up using Schema.org microdata. The thing is I cannot find appropriate type to describe these items. For schedule I decided to go for [http://Schema.org/Event](http://Schema.org/Event) type, however I need to add contact person name and phone but which property of Event can I use for that? I used "performer" property, but that is not really it...

```
<div itemscope="" itemtype="http://schema.org/Event">
    <span class="time"><time itemprop="startDate" datetime="2012-07-02T19:00:00">19:00</time></span>
    <h2 class="colored" itemprop="name">Worship Group</h2>
    <strong>Address:</strong> <a href="http://www.example.com" target="_blank" class="dashed" title="See on the map"><span itemprop="location">St. Patric 42</span></a>
    <br><strong>Contacts:</strong>
    <span itemprop="performer" itemscope="" itemtype="http://schema.org/Person">
    <span itemprop="telephone">8-422-212-5532</span> (<span itemprop="name">John Parker</span>)</span>
    <span itemprop="description">We want to worhip God together</span>
</div> 
```

As for a house church - it's something between an Organization and Event - it's a group of believers getting together at a place at a certain time. I decided to go for [http://schema.org/Organization](http://schema.org/Organization), added ContactPoint as church leader contacts info. But how can I mark start time?

Is there any way to combine entity types so that I could describe all important properties I have?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T19:50:52.963

**First part of your question:**

> *For schedule I decided to go for [http://Schema.org/Event](http://Schema.org/Event) type, however I need to add contact person name and phone but which property of Event can I use for that?*

You're spot on using an `Event` for your schedules. You could of course be a bit more precise and and use an extension of `Event` to be more precise as itemtype.

When you wish to specify a contact person as a performer I'm a bit unsure. I would rather flip your thinking around and not specify a contact person but instead specify the events as upcoming or past events associated with the organization. The organization then has a contact point that will go for all the events.

```
<div itemscope="" itemtype="http://schema.org/Organization/ReligiousGroup">
  <div itemprop="location" itemscope="" itemtype="http://schema.org/Church">
    ...
  </div>

  <div itemprop="contactPoint" itemscope="" itemtype="http://schema.org/Person">
    ...
  </div>

  <div itemprop="events" itemscope="" itemtype="http://schema.org/Event">
    ...
  </div>

  <div itemprop="events" itemscope="" itemtype="http://schema.org/Event">
    ...
  </div>

  <div itemprop="events" itemscope="" itemtype="http://schema.org/Event">
    ...
  </div>
</div> 
```

Or more simple described with YAML:

```
--- 
Organization/ReligiousGroup:
  location : Church
  contactPoint : Person
  events : 
    - Event
    - Event
    - Event 
```

You can extend `Organization` to `ReligiousGroup` to be more precise of the item.

Read more about extending here: [http://www.schema.org/docs/extension.html](http://www.schema.org/docs/extension.html)

* * *

**Now the final part of your question:**

> *As for a house church - it's something between an Organization and Event - it's a group of believers getting together at a place at a certain time.*

A group of people getting together at a place at a certain time is an `Event`.

# python - pysnmp 中的 ipv6 支持

> ID：11337883
> 
> 赞同：2
> 
> 时间：2012-07-05T04:34:15.723
> 
> 标签：python, snmp, ipv6, pysnmp

我正在使用以下代码：

```
import pysnmp
from pysnmp.entity.rfc3413.oneliner import cmdgen

errorIndication, errorStatus, errorIndex, \
           varBindTable = cmdGen.nextCmd (
                          cmdgen.CommunityData(agent, community_string),
                          cmdgen.UdpTransportTarget ( (ip, port) ),
                          (str(oid))
            ) 
```

其中 ip 是 IPv4**地址**。如何使用**ipv6**地址。我读过 pysnmp 也支持 ipv6。我不知道如何使用这里的地址。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:55:38.663

需要稍作调整才能通过“oneline”接口使用 IPv6：

```
from pysnmp.entity.rfc3413.oneliner import cmdgen
from pysnmp.carrier.asynsock.dgram import udp6
import socket

class Udp6TransportTarget(cmdgen.UdpTransportTarget):
    transportDomain = udp6.domainName

    def __init__(self, transportAddr, timeout=1, retries=5):
        self.transportAddr = (
            socket.getaddrinfo(transportAddr[0], transportAddr[1],
                               socket.AF_INET6,
                               socket.SOCK_DGRAM,
                               socket.IPPROTO_UDP)[0][4]
            )
        self.timeout = timeout
        self.retries = retries

    def openClientMode(self):
        self.transport = udp6.Udp6SocketTransport().openClientMode()
        return self.transport

print cmdgen.CommandGenerator().getCmd(
        cmdgen.CommunityData('public'),
        Udp6TransportTarget(('::1', 161)),
        '1.3.6.1.2.1.1.1.0') 
```

# android - 调用此记录类时强制关闭

> ID：11337884
> 
> 赞同：0
> 
> 时间：2012-07-05T04:34:45.540
> 
> 标签：android, android-mediaplayer, android-mediarecorder

`Record.java`当我通过另一个类调用这个类`Intent`然后单击时`button1`，我得到一个强制关闭异常。我想知道为什么会这样。此外，logcat 说设备已断开连接“无法创建媒体播放器”

代码是：

```
public class Record extends Activity{
    Button btn1,btn2;
    MediaRecorder recorder;
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.record);
            btn1=(Button)findViewById(R.id.button1);
            btn2=(Button)findViewById(R.id.button2);
            btn1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    recorder = new MediaRecorder();

                    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                    recorder.setOutputFile("/sdcard/sample.3gp");

                    try {
                        recorder.prepare();
                        recorder.start();
                    } catch (IllegalStateException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            });
            btn2.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    recorder.stop();
                    recorder.reset();
                    recorder.release();

                    recorder = null;
                }
            });
     }

} 
```

这是logcat的输出

```
 07-05 10:20:07.598: E/AndroidRuntime(841): Uncaught handler: thread main exiting due to uncaught exception
07-05 10:20:07.609: E/AndroidRuntime(841): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newaa/com.example.newaa.Recipient}: java.lang.IndexOutOfBoundsException: charAt: -1 < 0
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.os.Looper.loop(Looper.java:123)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-05 10:20:07.609: E/AndroidRuntime(841):  at java.lang.reflect.Method.invokeNative(Native Method)
07-05 10:20:07.609: E/AndroidRuntime(841):  at java.lang.reflect.Method.invoke(Method.java:521)
07-05 10:20:07.609: E/AndroidRuntime(841):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-05 10:20:07.609: E/AndroidRuntime(841):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-05 10:20:07.609: E/AndroidRuntime(841):  at dalvik.system.NativeStart.main(Native Method)
07-05 10:20:07.609: E/AndroidRuntime(841): Caused by: java.lang.IndexOutOfBoundsException: charAt: -1 < 0
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.text.SpannableStringBuilder.charAt(SpannableStringBuilder.java:110)
07-05 10:20:07.609: E/AndroidRuntime(841):  at com.example.newaa.Recipient$2.onTextChanged(Recipient.java:76)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.TextView.setText(TextView.java:2687)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.TextView.setText(TextView.java:2552)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.EditText.setText(EditText.java:71)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.TextView.setText(TextView.java:2527)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.widget.TextView.onRestoreInstanceState(TextView.java:2427)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.view.View.dispatchRestoreInstanceState(View.java:5940)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1127)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:1127)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.view.View.restoreHierarchyState(View.java:5919)
07-05 10:20:07.609: E/AndroidRuntime(841):  at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1454)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.Activity.onRestoreInstanceState(Activity.java:835)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.Activity.performRestoreInstanceState(Activity.java:807)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1096)
07-05 10:20:07.609: E/AndroidRuntime(841):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2473) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:36:51.220

随时随地让代码像重用一样。这是使用 Context ref 直接调用 mediarecorder 的代码。并使用它的方法来处理它。

```
public class AudioRecorder {
  final MediaRecorder recorder = new MediaRecorder();
  final String path;
  Context context;

  public AudioRecorder(Context context,String path) {
    this.context = context;
    this.path = sanitizePath(path);
  }

  private String sanitizePath(String path) {
    if (!path.startsWith("/")) {
      path = "/" + path;
    }
    if (!path.contains(".")) {
      path += ".3gp";
    }
    return Environment.getExternalStorageDirectory().getAbsolutePath() + path;
  }
  /**
   * Starts a new recording.
   */
  public void start() throws IOException {
    String state = android.os.Environment.getExternalStorageState();
    if(!state.equals(android.os.Environment.MEDIA_MOUNTED))  {
        Toast.makeText(context,"SD Card is not mounted",Toast.LENGTH_LONG).show();
        throw new IOException("SD Card is not mounted.  It is " + state + ".");

    }
    // make sure the directory we plan to store the recording in exists
    File directory = new File(path).getParentFile();
    if (!directory.exists() && !directory.mkdirs()) {
      throw new IOException("Path to file could not be created.");
    }
    System.out.println("Full path of audio"+path);

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(path);   
    recorder.prepare();
    recorder.start();

  }
  /**
   * Stops a recording that has been previously started.
   */
  public void stop() throws IOException {
    recorder.stop();
    recorder.release();
  }

  public void Release() throws IOException{
      recorder.release();
  }  

}** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:58:27.280

您的问题出在 com.example.newaa.Recipient 类中。
看到这个行号。在 com.example.newaa.Recipient$2.onTextChanged(Recipient.java:76)
希望你会发现问题或发布你的 Recipient.java 的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T05:45:34.880

从我不久前[对自己的回答中](https://stackoverflow.com/a/10613299/1056359)可以看出，Android`EXTRA_OUTPUT`在视频捕获意图中设置标志时存在问题。尝试获取默认文件位置并从那里复制视频，如下所示：

```
protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
   super.onActivityResult(requestCode, resultCode, intent);

   if (resultCode == RESULT_OK) {   
      try {
          AssetFileDescriptor videoAsset = getContentResolver().openAssetFileDescriptor(intent.getData(), "r");
          FileInputStream fis = videoAsset.createInputStream();
          File videoFile = new File(Environment.getExternalStorageDirectory(),"<VideoFileName>.mp4"); 
          FileOutputStream fos = new FileOutputStream(videoFile);

          byte[] buffer = new byte[1024];
          int length;
          while ((length = fis.read(buffer)) > 0) {
             fos.write(buffer, 0, length);
         }       
         fis.close();
         fos.close();
         } catch (IOException e) {
            // TODO: handle error
        }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T04:45:29.377

你不应该这样调用输出文件。而是使用`Environment.getExternalStorageDirectory()`

# objective-c - AppDelegate 的属性意外设置为 null

> ID：11337885
> 
> 赞同：1
> 
> 时间：2012-07-05T04:34:50.693
> 
> 标签：objective-c, delegates, nsstring

首先，我真的很感谢你的帮助。

好吧，我在两个视图中共同使用了三个 NSString 对象。这些视图由 Embedded NavigationController 提供，我的意思是我开始使用 SingleView 进行编程。

在 AppDelegate.h 中，我写

```
@property (weak, nonatomic) NSString    *crntURL;

@property (weak, nonatomic) NSString    *crntTitle;

@property (weak, nonatomic) NSString    *crntHTML; 
```

为委派。

在第一个视图中，我有一个 webview 并写

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    NSString    *url = [[NSString alloc] initWithString:[myWebView     stringByEvaluatingJavaScriptFromString:@"document.URL"]];
    NSString    *title = [[NSString alloc] initWithString:[myWebView stringByEvaluatingJavaScriptFromString:@"document.title"]];
    NSString    *html = [[NSString alloc] initWithString:[myWebView stringByEvaluatingJavaScriptFromString:@"document.all[0].outerHTML"]];
    appDelegate.crntTitle = nil;
    appDelegate.crntTitle = [[NSString alloc] initWithString:title];
    appDelegate.crntHTML = nil;
    appDelegate.crntHTML = [[NSString alloc] initWithString:html];
    appDelegate.crntURL = nil;
    appDelegate.crntURL = [[NSString alloc] initWithString:url];
} 
```

在这里，当我放置 NSLog 时，会转储预期的 HTML 源代码。

在第二个视图（UIViewController 的子类）中，我写

```
- (void)viewDidLoad
{
    // Do any additional setup after loading the view.
    AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    sourceHTML.text = appDelegate.crntHTML;
    NSLog( @"%@", appDelegate.crntHTML );
    NSLog( @"%@", appDelegate.crntURL );
    NSLog( @"%@", appDelegate.crntTitle );
    [super viewDidLoad];
} 
```

只有 crntHTML 意外设置为 null 而 crntURL 和 crntTitle 保留值。

你有什么想法？

先感谢您。

胜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:06:26.260

您已将应用程序委托中的属性声明为弱。使用 ARC，如果没有强引用，对象将被释放并设置为零。

我可以想象您正在从第一个视图控制器引用标题和 URL 变量，但 HTML 变量仅在第二个视图控制器中引用。一旦你准备好在第二个控制器中显示 HTML，它就已经发布了，因为应用程序委托没有保留它。

尝试将应用委托中的属性声明更改为强：

```
@property (strong, nonatomic) NSString *crntURL;
@property (strong, nonatomic) NSString *crntTitle;
@property (strong, nonatomic) NSString *crntHTML; 
```

# iphone - 更新发布到应用商店后应用崩溃

> ID：11337887
> 
> 赞同：4
> 
> 时间：2012-07-05T04:35:02.183
> 
> 标签：iphone, ios, ipad

我已经成功发布了我的应用程序的两个版本

但是在 App Store 中发布了第三版应用程序后，当我从 Appstore 下载应用程序时，应用程序正在崩溃：

当我尝试启动应用程序时，它会立即崩溃，并且 Xcode Organizer 中没有生成崩溃报告。

相同的应用程序在 IPAD/IPHONE SIMULATORS 5.0 和 4.1 版本中运行良好，并且在安装了 IOS 5.1.1（通过 XCODE 运行）的 IPHONE 和 IPAD 设备中进行测试时也运行良好。

除了在本地测试时工作正常的一些图像更改和动画更改之外，没有给出任何重大更改。

请在下面找到日志，请帮助解决此问题。

> *7 月 5 日 12:16:01 未知 fairplayd.N90[41]：libMobileGestalt computeUniqueDeviceID：bb 返回 imei 的总时间：0 7 月 5 日 12:16:01 未知 SpringBoard[52]：无法获取 pid 的任务名称端口权225: (os/kern) failure Jul 5 12:16:01 unknown com.apple.launchd[1] : (UIKitApplication:com.myCompany.myApp[0xdaa7]) Exited: Killed: 9 Jul 5 12:16:01 unknown com.apple.launchd[1] : (UIKitApplication:com.myCompany.myApp[0xdaa7]) 节流重生：将在 2147483647 秒 7 月 5 日 12:16:01 未知 SpringBoard[52] 开始：应用程序“myApp”异常退出并带有信号9：杀死：7 月 5 日 9 日 12:16:02 未知内核 [0]：AppleFairplayTextCrypterSession::fairplayOpen() 失败，错误 -42110*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T04:41:51.180

其实，这不是你的错。App Store(s) 最近遇到了麻烦，因为它正在向消费者提供损坏的二进制文件。通过 iTunes connect 联系苹果以获得解决方案，或者等待几天并发布更新。致所有阅读此内容且有待处理应用程序更新的开发人员：

# 等等，请稍等！

其他症状包括：

*   该应用程序在启动时立即崩溃（甚至没有显示初始屏幕，只是黑色->崩溃）。
*   受影响的消费者分布在许多地区（非本地化），但有些不受影响。
*   您的应用/更新最近已获得批准。
*   Mac应用程序会显示*“[App]已损坏，无法打开。删除[App]并从App Store重新下载。”*
*   控制台将打印：`AppleFairplayTextCrypterSession::fairplayOopen() failed, error -42110`

唯一的解决方法是删除应用程序并重新安装（基本上是祈祷工作副本）。请放心，**您不是唯一一个**！来自大公司的许多主要应用程序都受到此问题的影响（愤怒的小鸟，NOOOOO）。

证实：

*   [http://www.marco.org/2012/07/04/app-store-corrupt-binaries](http://www.marco.org/2012/07/04/app-store-corrupt-binaries)
*   [http://www.appleinsider.com/articles/12/07/04/developers_suspect_app_store_mix_up_led_to_corrupt_binaries.html](http://www.appleinsider.com/articles/12/07/04/developers_suspect_app_store_mix_up_led_to_corrupt_binaries.html)
*   [http://www.imore.com/2012/07/04/newly-installed-updated-apps-reportedly-crashing-launch-due-corrupt-app-store-binary-bug/](http://www.imore.com/2012/07/04/newly-installed-updated-apps-reportedly-crashing-launch-due-corrupt-app-store-binary-bug/)
*   [http://www.forbes.com/sites/anthonykosner/2012/07/05/apple-app-store-encryption-glitch-causes-many-new-app-updates-to-crash-see-list/](http://www.forbes.com/sites/anthonykosner/2012/07/05/apple-app-store-encryption-glitch-causes-many-new-app-updates-to-crash-see-list/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:05:18.193

> 在您本地测试的应用程序中，请在您的设备中删除它。在您更新或在 App Store 中下载您更新的应用程序后

# java - 使用 Java 从 Instagram API 获取 oAuth 令牌

> ID：11337890
> 
> 赞同：1
> 
> 时间：2012-07-05T04:35:18.060
> 
> 标签：java, api, oauth, access-token, instagram

我有一个名为 Autentica 的简单 servlet，它负责获取用于了解 OAuth 令牌的解码参数。API 返回到我的回调页面，从而运行名为回调的 servlet。问题就在这里：当我构建获取 OAuth 令牌的 URL 时，会生成一个我不知道如何解决的 IOException。

任何人都可以帮助我吗？遵循 servlet 代码和控制台结果。非常感谢！

1) Servlet Autentica

```
@WebServlet(name = "autentica", urlPatterns = {"/autentica"})
public class Autentica extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        processRequest(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        processRequest(req, resp);
    }

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();

        //API Credentials
        String client_id = "XXXXXXXXXXX";
        String client_secret = "YYYYYYYYYYYY";
        String redirect_uri = "http://localhost:8080/InstagramAPI/callback";

        //Set Session Variables
        HttpSession session = request.getSession(true);
        session.setAttribute("client_id", client_id);
        session.setAttribute("client_secret", client_secret);
        session.setAttribute("redirect_uri", redirect_uri);

        try {
            //Redirect User to foursquare login page
            String url = "https://api.instagram.com/oauth/authorize/?client_id=" 
                    + client_id + "&redirect_uri=" + redirect_uri
                    + "&response_type=code";
            response.sendRedirect(url);
        } finally {
            out.close();
        }
    }
} 
```

2) Servlet 回调

```
@WebServlet(name = "callback", urlPatterns = {"/callback"})
public class Callback extends HttpServlet{

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        processRequest(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        processRequest(req, resp);
    }

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        HttpSession session = request.getSession(true);
        String clientID =(String)session.getAttribute("client_id");
        String clientSecret =(String)session.getAttribute("client_secret");
        String redirectURI =(String)session.getAttribute("redirect_uri");  
        String code = request.getParameter("code");

        String url = "https://api.instagram.com/oauth/access_token?"
                + "client_id=" + clientID
                + "&client_secret=" + clientSecret
                + "&grant_type=authorization_code"
                + "&redirect_uri=" + redirectURI
                + "&code="+code;
        getContent(url);
    }

    //Return response after GET Request
    public String getContent(String httpurl){
        try {
            URL url = new URL(httpurl);
            URLConnection httpc = url.openConnection();
            httpc.setDoInput(true);
            httpc.connect();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    httpc.getInputStream()));
            String strLine = "";
            String content = "";
            while ((strLine = in.readLine()) != null){
                 content = content+strLine;
            }
            in.close();
            return content;
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
} 
```

3) 控制台

```
SEVERE: java.io.IOException: Server returned HTTP response code: 405 for URL: https://api.instagram.com/oauth/access_token?client_id=XXXXXXXXXXX&client_secret=YYYYYYYYYYYY&grant_type=authorization_code&redirect_uri=http://localhost:8080/InstagramAPI/callback&code=aca1134c71944461b9db9417f4e2baa5
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at Callback.getContent(Callback.java:62)
    at Callback.processRequest(Callback.java:52)
    at Callback.doGet(Callback.java:29)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE:     at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1615)
SEVERE:     at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
SEVERE:     at Callback.getContent(Callback.java:62)
SEVERE:     at Callback.processRequest(Callback.java:52)
SEVERE:     at Callback.doGet(Callback.java:29)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
SEVERE:     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
SEVERE:     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
SEVERE:     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
SEVERE:     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
SEVERE:     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
SEVERE:     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T09:18:51.833

当你得到一个[`Error 405`](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_Error)这意味着：

> 405 方法不允许
> 
> 使用该资源不支持的请求方法对该资源发出请求；例如，在需要通过 POST 呈现数据的表单上使用 GET，或者在只读资源上使用 PUT。

您正在发送 GET 请求，但 Instagram[坚持使用 POST](http://instagram.com/developer/authentication/)：

> 为了进行这种交换，您只需将此代码连同一些应用程序标识参数一起发布到我们的 access_token 端点。

要`URLConnection`与 Post 一起使用，请检查[此答案](https://stackoverflow.com/a/2165000/1467115)。

# opengl-es-2.0 - 是否可以从 VBO 读取？

> ID：11337893
> 
> 赞同：2
> 
> 时间：2012-07-05T04:36:02.747
> 
> 标签：opengl-es-2.0

我正在尝试制作一个 OpenGL 渲染器，它将各种形状混合成一个大网格并将它们存储在两个 VBO 中，一个 GL_ARRAY_BUFFER 和一个 GL_ELEMENT_ARRAY_BUFFER。我的目标是让它同时在 OpenGL ES 2 和 OpenGL 3.2 核心上工作。我目前正在尝试找到处理从该网格中删除形状的最佳方法，我目前的方法是定期重建整个事物，可能在后台线程上。

问题是，为了重建新的干净的网格，我需要使用 glMapBuffer 访问已写入缓冲区的顶点/索引。根据 GL_OES_mapbuffer 的文档， [WRITE_ONLY_OES](http://www.khronos.org/registry/gles/extensions/OES/OES_mapbuffer.txt)是“访问”唯一可接受的参数。

所以，我不认为指向那里的数据可以可靠地读取以创建我的新缓冲区。我知道 GL Core 中还有其他功能可以让您复制缓冲区数据，但这些似乎也不见了。

谁能验证这在 ES 2.0 上是不可能的，或者给出一些实现缓冲区读取的方法？我目前的解决方案是保留所有数据的卷影副本，这显然并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:29:06.693

我认为在主内存中保留 GPU 数据的影子副本比从 GPU 内存中读取这些数据要好得多。无论如何，建议在使用 glMapBuffer 之前丢弃以前的数据。阅读[此](http://www.stevestreeting.com/2007/03/17/glmapbuffer-vs-glbuffersubdata-the-return/)内容以获取更多信息（它不会直接回答您的问题，但可能会有用）。

# mysql - mysql：关系表的字符集

> ID：11337896
> 
> 赞同：0
> 
> 时间：2012-07-05T04:36:12.797
> 
> 标签：mysql

就多多关系表的性能而言，什么是最好的字符集，那些只有整串 id 引用其他表的主 id。或者使用你喜欢的任何东西都没有关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:46:31.433

仅当您有任何字符串列时，字符集才重要。如果您的表仅包含数字外键，则在创建表时不要指定字符集。

# javascript - 如何自定义 Blueimp jQuery 文件上传的上传/下载模板

> ID：11337897
> 
> 赞同：12
> 
> 时间：2012-07-05T04:36:14.613
> 
> 标签：javascript, jquery, template-engine

我正在尝试使用[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/) Demo。我搜索了[wiki](https://github.com/blueimp/jQuery-File-Upload/wiki)和模板引擎 wiki，但找不到如何在不使用表格行标签的情况下自定义上传/下载模板的答案。每次我删除/更改表格行标签时，它都不起作用。

Bellow 是我自定义的上传模板，它不起作用。我不知道为什么，有人可以帮忙吗？

```
uploadTemplate: function (o) {
        var rows = $();
        $.each(o.files, function (index, file) {
            var row = $('<li class="span3"><div class="thumbnail template-upload">' +
                '<div class="preview"><span></span></div>' +
                '<div class="caption"><h5 class="name"></h5>' +
                '<p class="size"></p>' +
                (file.error ? '<div class="error" colspan="2"></div>' :
                        '<div><div class="progress">' +
                            '<div class="bar" style="width:0%;"></div></div></div>' +
                            '<div class="start"><button>Start</button></div>'
                ) + '<div class="cancel"><button>Cancel</button></div></div></div></li>');
            row.find('.name').text(file.name);
            row.find('.size').text(o.formatFileSize(file.size));
            if (file.error) {
                row.find('.error').text(
                    locale.fileupload.errors[file.error] || file.error
                );
            }
            rows = rows.add(row);
        });
        return rows;
    }, 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T05:09:40.467

通过查看示例和现场演示，我创建了这个 jsbin：http: [//jsbin.com/ivonow/1/](http://jsbin.com/ivonow/1/)

这是演示中的代码。我取出了html底部的jQuery模板，并在设置fileupload对象时将上面的uploadTemplate函数添加到传入的选项中。

我还必须将uploadTemplateId 和downloadTemplateId 设置为null，这样它就不会尝试加载默认值：

```
{
  uploadTemplateId: null,
  downloadTemplateId: null,
} 
```

在 html 中，我取出了围绕行模板的表格并添加了 UL，但样式仍然很奇怪。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-25T17:12:17.880

首先，当您想删除已上传的图片时，您必须处理**template-download**而不是**template-upload**。

template-upload 用于预览要上传的内容，一旦上传，它就会回到模板下载中。

因此，在您的情况下要覆盖的模板应该是**template-download**。这里有一个很好的例子：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine) ://github.com/blueimp/jQuery-File-Upload/wiki/Template-Engine 。

**注意 1：**将被动态删除的节点是 CSS 类*template-download*的目标。因此，您应该尝试将该类定位到代码中的不同位置（我使用了 div，它对我有用）。“fade”类用于过渡效果。

**但是，**本文档中似乎存在一些错误（可能来自文档中未报告的模块升级）。

以下用于重写模板下载的代码提取**将不起作用**

```
row.find('.delete')
    .attr('data-type', file.delete_type)
    .attr('data-url', file.delete_url); 
```

因为de**文件**对象没有任何**delete_type**和**delete_url**参数，而是**deleteType**和**deleteUrl**参数。那是针对**Jquery File Upload version 8.9.0**的，tho'（旧版本可能有效）。

因此，如果您只是从文档中复制'n'粘贴代码，则删除按钮将没有正确的值，因此，它也不起作用。

覆盖模板下载时使删除按钮起作用的正确代码是

```
row.find('.delete')
    .attr('data-type', file.deleteType)
    .attr('data-url', file.deleteUrl); 
```

对我来说，下面的代码工作得很好。

```
 $('#fileupload').fileupload({  
    downloadTemplateId: '',
    downloadTemplate: function (o) {
        var rows = $();
        $.each(o.files, function (index, file) {
            var row = $( '<div class="template-download fade"><span class="preview"></span>' +
                (file.error ? '<div class="error"></div>' : '') +
                '<button class="delete">Delete</button></div>');
            //row.find('.size').text(o.formatFileSize(file.size));
            if (file.error) {
                row.find('.name').text(file.name);
                row.find('.error').text(file.error);
            } else {
               // row.find('.name').append($('<a></a>').text(file.name));
                if (file.thumbnailUrl) {
                    row.find('.preview').append(
                        $('<a></a>').append(
                            $('<img>').prop('src', file.thumbnailUrl)
                        )
                    );
                }
                row.find('a')
                    .attr('data-gallery', '')
                    .prop('href', file.url);
                row.find('.delete')
                    .attr('data-type', file.deleteType)
                    .attr('data-url', file.deleteUrl);
            }
            rows = rows.add(row);
        });
        return rows;
    }
}); 
```

# javascript - 无法正确获取报价

> ID：11337900
> 
> 赞同：0
> 
> 时间：2012-07-05T04:36:38.600
> 
> 标签：javascript, quotes

我很难在这段代码中正确引用引号。不工作，所以我猜引号是错误的。

```
html+='<img src="' + noteDirectory + '"/ "' + currentNote + '".png>'"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T04:39:16.957

你需要的是这样的：

```
html+='<img src="' + noteDirectory + '/' + currentNote + '.png">'; 
```

一个更好的看待它的方法是：你只需要`"`after`src=`和 between`.png`和 last`>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T04:39:47.573

干得好：

```
html += '<img src="' + noteDirectory + '/' + currentNote + '.png">'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T04:40:33.817

```
html+='<img src="' + noteDirectory + '/' + currentNote + '.png">'; 
```

# android - Android-城市飞艇推送通知不起作用

> ID：11337901
> 
> 赞同：1
> 
> 时间：2012-07-05T04:36:38.867
> 
> 标签：android, push-notification, apk

我对我们的应用程序实施了 Urban airship C2dm 推送通知，但遇到了下面提到的以下问题。

当我从 Eclipse 部署到手机时，它可以工作，并且以适当的方式收到推送通知。但是，每当我生成 .apk 并将其部署到手机时，推送通知都不起作用。

什么是交易？不知道会发生什么错误。请帮忙。

# php - 在主页面创建的 IFRAME 中的访问会话变量

> ID：11337903
> 
> 赞同：0
> 
> 时间：2012-07-05T04:36:56.217
> 
> 标签：php, html, facebook-graph-api, iframe

我在 PHP. 中创建了代码，如下所示。

我有 index.php 作为主页，它具有以下结构。

```
<table>

    <tr><td><?PHP $_session['id']=$id; ?></td></tr>
    <tr><td><iframe ....></iframe></td></tr>

</table> 
```

现在，当我尝试从 iframe 中加载的页面访问会话变量时，该变量未被访问，或者没有为 IFRAME 中加载的页面设置。

由于在 IFRAME 中加载的页面位于同一服务器的同一目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:43:34.940

大多数浏览器不允许来自 iframe 的 cookie，并且由于 PHP 中的会话依赖它们，您将无法访问它们。

存在多个垫片以允许来自 iframe 的 cookie，例如 IE 的 P3P 标头。

虽然，Safari 第三方策略更难绕过，所以你可能不得不简单地改变你使用会话的方式。您可以手动设置会话并使用在客户端和服务器之间传输的 id（PHP 提供了一种类似的方法），或者在 facebook 上，您可以依靠 signed_request / getLoginStatus 来管理应用程序中的身份验证。

# mysql - 使用 MySQL 选择不存在的数据

> ID：11337905
> 
> 赞同：0
> 
> 时间：2012-07-05T04:37:40.587
> 
> 标签：mysql, select

我正在尝试在两个日期范围之间选择数据。但是，并非每天都会插入所有数据。以下是表格样本：

```
mysql> SELECT * FROM attendance;
+------------+-------+
| date       | total |
+------------+-------+
| 2012-07-02 |   100 |
| 2012-07-04 |    70 |
| 2012-07-05 |    78 |
+------------+-------+
3 rows in set (0.00 sec) 
```

场景是我想从 2012-07-02 到 2012-07-04 获得总出勤率。根据上面的数据我会得到

```
mysql> SELECT * FROM attendance WHERE date BETWEEN '2012-07-02' AND '2012-07-04';
+------------+-------+
| date       | total |
+------------+-------+
| 2012-07-02 |   100 |
| 2012-07-04 |    70 |
+------------+-------+
2 rows in set (0.00 sec) 
```

但是我的目标是让 2012-07-03 包含在结果中。

```
+------------+-------+
| date       | total |
+------------+-------+
| 2012-07-02 |   100 |
| 2012-07-03 |     0 |
| 2012-07-04 |    70 |
+------------+-------+ 
```

这可以通过MySQL来完成吗？我确实查看了[临时表](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)。但仍然无法达到目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:35:34.803

您可以将日期枚举为派生的伪表（使用`UNION`），然后将其与您的数据连接起来

```
SELECT dates.date, COALESCE(attendance.total,0) AS total FROM (
SELECT '2012-07-02' AS date
UNION ALL SELECT '2012-07-03'
UNION ALL SELECT '2012-07-04'
) AS dates
LEFT JOIN attendance USING(date) 
```

编辑：添加`COALESCE`以返回`0`而不是`NULL`丢失记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T04:40:19.337

MySQL 无法生成不存在的数据。如果您想要不存在的日期，则需要一个包含您加入的完整日期范围的临时表。另一种选择是维护一个服务器端变量并为每一行做一些日期数学，这很难看

```
select @dateval := '2012-07-02';
SELECT @dateval := @dateval + INTERVAL 1 DAY from ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T05:59:13.540

这是一个简单解决方案的常见问题。

创建一个常规表，例如 REF_DATE，并将所有日期存储在其中，例如 3 年或您需要的任何时间跨度。

然后使用左边的这个表`LEFT OUTER JOIN`

```
SELECT REF.date,IFNULL(A.total,0) as total FROM REF_DATE REF 
LEFT OUTER JOIN attendance 
ON REF.date=A.date
A WHERE REF.date BETWEEN '2012-07-02' AND '2012-07-04'; 
```

DATE 是 MySQL 中的一个关键字，我在这里使用它是为了便于阅读。使用不同的列名。

# python - 在 python + openCV 中使用网络摄像头的问题

> ID：11337913
> 
> 赞同：5
> 
> 时间：2012-07-05T04:38:29.833
> 
> 标签：python, opencv, webcam

我正在使用以下代码使用 openCV + python 访问我的网络摄像头...

```
import cv

cv.NamedWindow('webcam_feed', cv.CV_WINDOW_AUTOSIZE)

cam = cv.CaptureFromCAM(-1) 
```

然后我在控制台中收到以下错误...

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument 
```

我最初使用的是，

```
cv.CaptureFromCAM(0) 
```

访问相同的内容并遇到相同的问题并使用-1，因为假设它可以拾取任何网络摄像头。

我还测试了 Ubuntu 是否可以识别网络摄像头，并且确实可以。我正在为网络摄像头使用 v4l2。

{编辑}

我正在使用以下代码显示视频源，它似乎只显示网络摄像头捕获的一张图像，而不是连续的视频源......

```
import cv
cv.NamedWindow('webcam_feed', cv.CV_WINDOW_AUTOSIZE)
cam = cv.CaptureFromCAM(-1)
feed = cv.QueryFrame(cam)
cv.ShowImage("webcam_feed", feed)
cv.WaitKey(-1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:51:29.640

哇，在我发布这篇文章后，我在 15 岁时回答了我自己的问题。我做了一些研究，网络摄像头只抓取一张图像的原因是...

```
cv.WaitKey(-1) 
```

这不允许刷新窗口的内容。我把数字设置为10...

```
cv.WaitKey(10) 
```

它工作得很好。我也尝试了 100，但没有发现任何区别。我只看到数字为 1000 时的差异。我使用 1 是因为它似乎运行最顺畅。

这是显示网络摄像头提要的完整代码

```
import cv

cv.NamedWindow("webcam", 1)

cam = cv.CaptureFromCAM(-1)

While True:
feed = cv.QueryFrame(cam)
cv.ShowImage("webcam", feed)
cv.WaitKey(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:50:41.907

我相信你需要把

```
frame = cv.QueryFrame(cam)
cv.ShowImage("Webcam Feed", frame) 
```

在循环中不断更新窗口中显示的图像。也就是说，来自的帧`cv.QueryFrame`是静态图像，而不是连续视频。

如果您希望能够通过按键退出，也可以`cv.WaitKey`在循环中使用小超时进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-28T21:57:06.780

对我来说，root中的命令

主机+

节省我的时间，注意关闭并打开新终端。

再见。

# android - DialogFragment 是全屏的。如何让它变小

> ID：11337914
> 
> 赞同：5
> 
> 时间：2012-07-05T04:38:41.617
> 
> 标签：android, android-layout

我有这个 DialogFragment。当我显示它时，它变成全屏，我的意思是它与当前屏幕重叠。如何使它像 AlertDialog 一样小？

我猜这是因为 RelativeLayout 所以我将 LinearLayout 包装在 RelativeLayout 之外，但没有任何变化。

```
public class LoginDialogFragment extends DialogFragment {

@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme);
}

@Override
public View onCreateView(final LayoutInflater inflater, final ViewGroup container,
        final Bundle savedInstanceState) {
    final View v = inflater.inflate(R.layout.login_dialog, container, false);
    final EditText emailEditText = (EditText)v.findViewById(R.id.emailEditText);
    final EditText passwordEditText = (EditText)v.findViewById(R.id.passwordEditText);
    final Button loginButton = (Button)v.findViewById(R.id.loginButton);
    loginButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(final View v) {
                checkLogin(emailEditText.getText().toString(), passwordEditText.getText().toString());
            }
        });
    return v;
}
} 
```

布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

    <TextView
        android:id="@+id/loginTitleTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/loginDialogTitle"
        android:textColor="@color/White"
        android:textSize="20sp" />

    <EditText
        android:id="@+id/emailEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/loginTitleTextView"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="textEmailAddress" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/passwordEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/emailEditText"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="textPassword" />

    <TextView
        android:id="@+id/passwordTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/passwordEditText"
        android:layout_alignBottom="@+id/passwordEditText"
        android:layout_alignParentLeft="true"
        android:layout_weight="1"
        android:text="@string/password"
        android:textColor="@color/White"
        android:textSize="16sp" />

    <TextView
        android:id="@+id/emailTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/emailEditText"
        android:layout_alignBottom="@+id/emailEditText"
        android:layout_alignParentLeft="true"
        android:layout_weight="1"
        android:text="@string/email"
        android:textColor="@color/White"
        android:textSize="16sp" />

    <Button
        android:id="@+id/loginButton"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/passwordEditText"
        android:text="@string/loginButtonText" />

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T19:09:06.393

调用`setStyle(STYLE_NORMAL, android.R.style.Theme_Dialog);`而不是`setStyle(DialogFragment.STYLE_NORMAL, android.R.style.Theme);`in `onCreate()`。有帮助吗？

# php - 使用 PHP 读取 .properties 文件

> ID：11337916
> 
> 赞同：0
> 
> 时间：2012-07-05T04:38:52.780
> 
> 标签：php, file

> **可能重复：**
> [PHP 是否像 Java 中一样允许 *.properties 文件？](https://stackoverflow.com/questions/5900077/does-php-allow-properties-file-as-in-java)

如何使用 PHP 读取/解析 .properties 文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T04:49:42.493

`.properties`文件通常用于`Java`平台。它在 PHP 中的对应物是`.ini`文件。`.ini`PHP 可以使用[`parse_ini_file()`](http://in.php.net/parse_ini_file). 请参阅此 stackoverflow 问题：[PHP 是否允许 *.properties 文件与 Java 中一样？](https://stackoverflow.com/q/5900077/851432).

不过，如果您想读取和解析`.properties`文件，则必须手动进行。在 Google 上快速搜索，我会看到以下结果：

*   [在 PHP 中读取 java 样式的属性文件](https://mufumbo.wordpress.com/2009/08/05/reading-java-style-properties-file-in-php/)- Github[存储库](https://gist.github.com/977771)

希望这可以帮助 ：）

# google-maps - 来自美国的 4000+ 点的 KML 图层可以，不能从亚洲显示

> ID：11337918
> 
> 赞同：0
> 
> 时间：2012-07-05T04:39:10.900
> 
> 标签：google-maps, google-maps-api-3, kml

我有一个 Google Map API v3 地图，它显示了通过 capacust= new google.maps.KmlLayer('MyURL....php?param=99',{preserveViewport:true}); 添加的 kml 图层

从美国，拉丁美洲可以看到，但是说亚洲（泰国）的用户没有显示点数，这是 waipoints aprox, 4000。

显示较小的数量（2000 或更少），有没有办法告诉地图“等待”kml？kml 是从 PHP 生成的

这可能是什么问题，服务器在美国，美国（拉丁美洲和北美）的用户可以正常工作

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:04:22.250

KmlLayer 渲染是时间敏感的。如果生成 kml 的 PHP 进程没有足够快地生成它，那么距离可能很重要。我不确定您正在生成什么，也许您可​​以研究 FusionTables 或更快的服务器。

# android - 三星tab2平板安卓开发

> ID：11337920
> 
> 赞同：2
> 
> 时间：2012-07-05T04:39:18.340
> 
> 标签：android, samsung-mobile

是否可以使用 Eclipse 在三星 tab 2 平板电脑中开发 android 应用程序？
它需要安装任何驱动程序吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T05:07:42.310

当然可以！您必须安装标准的 android 开发工具（SDK、ADT）和 eclipse（Juno 最新版本）。从此[链接](http://developer.android.com/sdk/index.html)下载 SDK ，也可参考此[链接](http://developer.android.com/sdk/installing/index.html)了解如何安装它并最终安装[ADT 插件](http://developer.android.com/sdk/installing/installing-adt.html)。

1.  将正确的三星设备驱动程序安装到您的工作站上，我建议您安装足以识别您的 Android 平板电脑的[Samsung Kies ，它包含与您的 Android Sambung 平板电脑配合使用的必要驱动程序。](http://www.samsung.com/ca/support/usefulsoftware/KIES/JSP)
2.  为您的项目选择正确的 API 级别，即 HoneyComb

3.  打开移动设备上的“ **USB调试”***设置->应用程序->开发->“USB调试”*

4.  通过 USB 连接您的平板电脑，它现在应该在 Eclipse 中可见（DDMS 透视图），您现在可以在平板电脑上运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T05:26:35.937

在 Apple Mac 中安装无需驱动程序。它直接在 Eclipse 中检测。

# android - 为什么 Android 4.0.3 PHONE HTC OneX 中的“共享至”菜单项消失了

> ID：11337923
> 
> 赞同：4
> 
> 时间：2012-07-05T04:39:47.060
> 
> 标签：android, icons, contextmenu

**更新
到目前为止，这只发生在使用 Android 4.0.3 的 HTC OneX 上**

我在 android 共享菜单中有两个**共享到**菜单项。

当用户从 android 图库分享图像时，我的应用程序会显示两个
图标，因此用户可以轻松访问我的应用程序的两个不同部分。见图片。

***这在 API v8 中运行良好，但在真实设备***上的 API v15中缺少其中一个。API v15 模拟器没问题！

在我的`AndroidManifest.xml`这两个`Activity's`中设置了一个图标在共享菜单中。

```
 - ActivityMainLauncher   
 - ActivityQuickLauncher 
```

图像位于**hdpi**、**mdpi**、**ldpi**文件夹中。
大小为 72、48、36 像素，它们是**PNG**图像。
Photoshop 为所有三张图像显示相同的分辨率 72,009。
**更新
为 96pix 添加了 drawable-xhdpi 文件夹，但我仍然只有一项：“SPRiiD”**

这种行为太奇怪了，我不知道从哪里开始调试。我认为我监督的 API v15 中有一些新内容？

模拟器 API v15 的图像正确显示了这两个选项。

![在此处输入图像描述](../Images/0dc4345f4e90ecabec585b7fc8d2fed9.png)

这是我的**`AndroidManifest.xml`**文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:installLocation="internalOnly"
    package="com.carlsberg.dumbo"
    android:versionCode="12"
    android:versionName="0.83" >

<!-- android:versionCode as the basis for identifying the application internally and handling updates, -->
<!-- android:versionName to users as the application's version -->
<permission
    android:name="com.carlsberg.dumbo.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<supports-screens android:anyDensity="true" />

<uses-permission android:name="com.carlsberg.dumbo.permission.C2D_MESSAGE" />
<!-- <uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission> -->
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.USE_CREDENTIALS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
</uses-permission>

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/launcher_gallery"
    android:label="@string/string_app_name" >
    <activity
        android:name=".ActivityMainLauncher"
        android:configChanges="keyboardHidden|orientation"
        android:icon="@drawable/launcher_gallery"
        android:label="@string/string_app_name"
        android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="image/*" />
            <data android:mimeType="video/*" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="text/*" />
            <data android:mimeType="application/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="image/*" />
            <data android:mimeType="video/*" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="text/*" />
            <data android:mimeType="application/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity-alias
        android:name="com.android.internal.app.ResolverActivity"
        android:exported="true"
        android:targetActivity=".ActivityMainLauncher" />

    <activity
        android:name=".gallery.ActivityGallery"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:configChanges="orientation|keyboardHidden"
        android:icon="@drawable/launcher_gallery"
        android:label="@string/string_app_name_gallery"
        android:launchMode="singleTop"
        android:taskAffinity="com.carlsberg.dumbo.GalleryActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".ActivityQuickLauncher"
        android:configChanges="keyboardHidden|orientation"
        android:icon="@drawable/launcher_gallery"
        android:label="@string/string_app_name_quick_launcher"
        android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.SEND" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="image/*" />
            <data android:mimeType="video/*" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="text/*" />
            <data android:mimeType="application/*" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND_MULTIPLE" />

            <category android:name="android.intent.category.DEFAULT" />

            <data android:mimeType="image/*" />
            <data android:mimeType="video/*" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="text/*" />
            <data android:mimeType="application/*" />
        </intent-filter>
    </activity>

    <activity
        android:name=".send.ActivitySend"
        android:configChanges="orientation|keyboardHidden"
        android:launchMode="singleTask"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".ActivityRemoveFriend"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/string_app_name"
        android:theme="@android:style/Theme.Dialog" >
    </activity>
    <activity
        android:name="com.carlsberg.dumbo.history.TabActivityHistoryLauncher"
        android:label="@string/string_app_name"
        android:launchMode="singleTask" >
    </activity>
    <activity android:name="com.carlsberg.dumbo.history.ActivityTabGroup1" >
    </activity>
    <activity android:name="com.carlsberg.dumbo.history.ActivityTabGroup2" >
    </activity>
    <activity android:name="com.carlsberg.dumbo.history.ActivityHistoryOutgoing" >
    </activity>
    <activity android:name="com.carlsberg.dumbo.history.ActivityHistoryIncoming" >
    </activity>
    <activity
        android:name=".ActivityLogin"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/string_app_name"
        android:theme="@android:style/Theme.Dialog" >
    </activity>
    <activity
        android:name=".ActivityAddFriend"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/string_app_name"
        android:theme="@android:style/Theme.Dialog" >
    </activity>
    <activity
        android:name=".ActivityAcceptFriend"
        android:configChanges="keyboardHidden|orientation"
        android:label="@string/string_app_name"
        android:theme="@android:style/Theme.Dialog" >
    </activity>
    <activity android:name=".Preferences" >
    </activity>
    <activity
        android:name=".send.TabActivityActivityHelpSend"
        android:launchMode="singleTask"
        android:screenOrientation="portrait" >
    </activity>

    <service
        android:name=".IntentServiceSendFiles"
        android:label="@string/string_sendFileService" >

    </service>
    <service
        android:name=".IntentServiceGetFilesFromPc"
        android:label="@string/string_getFileService" >
    </service>        
    <service
        android:name=".IntentServiceGetFiles"
        android:label="@string/string_getFileService" >
    </service>
    <service
        android:name=".ServiceBootCompleated"
        android:label="@string/string_batchtester" >
    </service>
    <service
        android:name=".IntentServiceGetFriendList"
        android:label="@string/string_listupdater" >
    </service>
    <service
        android:name=".IntentServiceUpdateFriendList"
        android:label="@string/string_listupdater" >
    </service>
    <service android:name=".C2DMReceiver" />

    <receiver
        android:name="com.google.android.c2dm.C2DMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>

            <!-- Receive the actual message -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />

            <category android:name="com.carlsberg.dumbo" />
        </intent-filter>
        <intent-filter>

            <!-- Receive the registration id -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.carlsberg.dumbo" />
        </intent-filter>
    </receiver>
    <receiver android:name="com.google.android.c2dm.C2DMBroadcastReceiver" >

        <!-- Handle retry events -->
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RETRY" />

            <category android:name="com.carlsberg.dumbo" />
        </intent-filter>
    </receiver>
    <receiver android:name=".AlarmReceiver" >
    </receiver>
    <receiver android:name=".myBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <provider
        android:name=".contentprovider.UserContentProvider"
        android:authorities="com.carlsberg.dumbo.contentprovider" >
    </provider>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T09:09:47.267

我刚刚复制了清单的相关部分并创建了一个测试项目：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityMainLauncher"
            android:configChanges="keyboardHidden|orientation"
            android:icon="@drawable/ic_launcher"
            android:label="@string/string_app_name"
            android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.SEND" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="image/*" />
                <data android:mimeType="video/*" />
                <data android:mimeType="audio/*" />
                <data android:mimeType="text/*" />
                <data android:mimeType="application/*" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.SEND_MULTIPLE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="image/*" />
                <data android:mimeType="video/*" />
                <data android:mimeType="audio/*" />
                <data android:mimeType="text/*" />
                <data android:mimeType="application/*" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityQuickLauncher"
            android:configChanges="keyboardHidden|orientation"
            android:icon="@drawable/ic_launcher"
            android:label="@string/string_app_name_quick_launcher"
            android:launchMode="singleTop" >
            <intent-filter>
                <action android:name="android.intent.action.SEND" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="image/*" />
                <data android:mimeType="video/*" />
                <data android:mimeType="audio/*" />
                <data android:mimeType="text/*" />
                <data android:mimeType="application/*" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.SEND_MULTIPLE" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="image/*" />
                <data android:mimeType="video/*" />
                <data android:mimeType="audio/*" />
                <data android:mimeType="text/*" />
                <data android:mimeType="application/*" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

简单的活动实现：

```
public class ActivityQuickLauncher extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Toast.makeText(this, getClass().getName(), Toast.LENGTH_LONG).show();
    }
}

public class ActivityMainLauncher extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Toast.makeText(this, getClass().getName(), Toast.LENGTH_LONG).show();
    }
} 
```

它有效：

![安卓 4.1.1](../Images/691746d8c47dc3be60ca8ead4349ca99.png) ![安卓 4.0.3](../Images/07bc7ba2d210255ca08e81f0ac5b3ceb.png)

Android 4.1.1 (Galaxy Nexus) 和 Android 4.0.3 (Archos G9 A70)。

# java - 使用 jsoup 提取 https url

> ID：11337931
> 
> 赞同：0
> 
> 时间：2012-07-05T04:40:52.927
> 
> 标签：java, web-crawler, jsoup

我有以下代码使用 jsoup 从给定页面中提取 url。

```
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import java.io.IOException;

/**
 * Example program to list links from a URL.
 */
public class ListLinks {
    public static void main(String[] args) throws IOException {

        String url = "http://shopping.yahoo.com";
        print("Fetching %s...", url);

        Document doc = Jsoup.connect(url).get();
        Elements links = doc.getElementsByTag("a");

        print("\nLinks: (%d)", links.size());
        for (Element link : links) {
       print(" * a: <%s>  (%s)", link.absUrl("href") /*link.attr("href")*/, trim(link.text(), 35));     
        }
    }

    private static void print(String msg, Object... args) {
        System.out.println(String.format(msg, args));
    }

    private static String trim(String s, int width) {
        if (s.length() > width)
            return s.substring(0, width-1) + ".";
        else
            return s;
    }
} 
```

我想要做的是构建一个只提取`https`站点的爬虫。我给爬虫一个种子链接开始，然后它应该提取所有`https`站点，然后获取每个提取的链接并对它们执行相同的操作，直到达到一定数量的收集 URL。

我的问题：上面的代码可以提取给定页面中的所有链接。我需要提取`https://`仅以开头的链接，我需要做什么才能实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:30:24.967

您可以使用`jsoup`. 他们非常强大。

```
doc.select("a[href*=https]");//(This is the one you are looking for)selects if value of href contatins https
doc.select("a[href^=www]");//selects if value of href starts with www
doc.select("a[href$=.com]");//selects if value of href ends with .com. 
```

等等。用它们做实验，你会发现正确的。

# html - 单击缩略图后，大图像将不会保留。仅 HTML 和 CSS

> ID：11337932
> 
> 赞同：1
> 
> 时间：2012-07-05T04:41:07.593
> 
> 标签：html, css

所以我最近发表了另一篇文章，我觉得它已经得到了明确的回答，这是链接（[之前的帖子](https://stackoverflow.com/questions/11214790/how-do-i-display-other-info-on-page-using-only-css-and-html/11220105#11220105)），虽然它确实解释并实现了我想知道的，但它为我创造了一个新问题。所以我认为最好为这个特定问题创建一个新帖子。
我的问题是，当我创建导航菜单并在其中有一个链接时，当您单击它时，它会向您显示 div 部分。在该部分中，我有一个缩略图。我想让它可以点击，这样当你点击它时，大图像就会出现在侧面。虽然我可以通过悬停来执行此操作，但如果用户想要单击缩略图，我也希望它（大图像）保留在那里。如果用户想要查看图像的完整分辨率，我还会在大图像的描述上添加一个锚点。问题是当我点击缩略图时，整个 Div 部分消失了……这很奇怪。这是一个[视频](http://www.youtube.com/watch?v=v-aAydZqj44&hd=1)，显示了我的意思。这也是我在虚拟页面上的代码：

这是我的[`fiddle`](http://jsfiddle.net/n6f4Y/)

请记住，我是 html 和 css 的新手，我真的很想用这两种语言做我的投资组合网站。一旦我对 css 和 html 有了更好的掌握和理解，我稍后会转向 javascript。现在已经这样做了大约 3 周多。提前感谢您阅读所有这些内容并可能提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:11:43.390

嘿，现在你可以习惯**`check box`**而且比它**可能**

请查看**我创建的这个演示** [http://jsfiddle.net/n6f4Y/1/](http://jsfiddle.net/n6f4Y/1/)

**HTML**

```
<div id="container">

<h1>Welcome to Erimagination!</h1>
<hr id="top_hr">

<ul id="navmenu">

    <!-- This is my PORTFOLIO section -->
    <li>
        <input type="checkbox" id="portfolio"/>
        <label for="portfolio">Portfolio</label>
        <span class="des_am"><h3>Latest Work</h3><br>
            <p>check out this image:
            <br>
                <a href="#"><img class="thumb_image" src="http://www.gravatar.com/avatar/f6ba1c2b27d3a607d894c70ba1be0f85?s=32&d=identicon&r=PG" alt="" ></a>
                <span class="large_image"><img src="files/pictures/photoshop/brit_airways.jpg" alt="">
                    <br>This is the larger version of the thumbnail. If you would like to see the full
                    version you can click <a href="#" style="text-decoration:underline; color:blue;"><i>HERE</i></a>
                </span>
            </p>
        </span>
    </li>
    <!-- PORTFOLIO ends -->

</ul>

</div> 
```

**CSS**

```
/* Reset things */
    *{
        padding: 0px;
        margin: 0px;
    }

    /* The pages width and height plus bkg color and margins */
    #container{
        width: 960px;
        height: 960px;
        background:#ABC;
        margin: 0 auto 0 auto;
    }

    /* minor stuff */
    a{ text-decoration: none; color:red; }
    ul, li{ list-style-type:none }      

    /*===================================
        set the nav menu link stuff
    ===================================*/
    #navmenu{
        float:left;
        margin-left: 50px;
        background: white;
        width:80px;
        height:25px;
        line-height:25px;
        padding:3px;
    }

    #navmenu a:hover{ color:green; }
    #navmenu a:focus{  font-size:16pt; text-decoration:underline; color:green; }

    /* Set stuff up in our span but hide it */
    li > span{
        display:none;
        width:875px;
        height:800px;
        float:left;
        background:white;
        color:grey;
        text-indent:15px;
        padding-right:3px;
        padding-left:6px;
        margin-top:30px;
    }

    /* show span stuff when link is clicked on */
li > input[type="checkbox"]{
display:none;
}  
li  label{
cursor:pointer;
}

li > input[type="checkbox"]:checked + label + span{ display:block; }

    /* Thumbnail parameters when link is clicked */
    li > input[type="checkbox"]:checked + span .thumb_image{
        display:inline-block;
        float:left;
        position:relative;
        background:red;
        outline:1px solid red;
    }

    /* minor thumnail stuff */
    li > input[type="checkbox"]:checked + label + span .thumb_image:hover{ outline:3px solid rgba(0,255,0, 1); }

    /* ===================================
        large image stuff parameters
    =====================================*/

    /* Set up and  Hide large image with z-index */
    li > input[type="checkbox"] + label + span span{
        z-index:-200;
        display:inline-block;
        float:left;
        color:black;
        width:600px;
        padding:4px;
        position:absolute;
        background:rgba( 255, 250, 108, .25);
        outline:1px solid darkgrey;
        text-align:center;
        margin: -0px 0 0 150px;
    }

    /* bring large image into view when thumbnail is hovered */
    li > input[type="checkbox"]:checked + label + span a:focus+span, li > input[type="checkbox"]:checked + label + span a:hover+span{ z-index:10; }

    /*
    li >a:focus+span .thumb_image:hover+.large_image{ z-index:10; }

    li > a+span .large_image{
        z-index:-200;
        display:inline-block;
        float:left;
        color:black;
        width:600px;
        padding:4px;
        position:absolute;
        background:rgba( 255, 20, 108, .5);
        border:1px solid black;
        text-align:center;
        margin: -0px 0 0 175px;
    }
    */ 
```

# mysql - 导入转储文件 mysql ubuntu

> ID：11337938
> 
> 赞同：-3
> 
> 时间：2012-07-05T04:42:29.270
> 
> 标签：mysql

我在运行 ubuntu 的机器上安装了 mysql 服务器，然后在安装后我执行了以下操作：

1.  mysql -u root -p 获取mysql提示 2.创建数据库预测；
2.  创建用户亚当；
3.  为亚当设置密码=密码（“12211”）；
4.  授予所有预测权限。* 授予由“12211”标识的亚当；
5.  使用预测；
6.  -u 亚当 -p 预测

我得到错误：

ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '-u khalil -p prediction 附近使用的正确语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:46:45.167

`adam`您的错误消息与您的 #6 条目（ vs ）不对应`khalil`。无论如何，你不能简单地进入`-u whatever`mysql 命令行。这些是命令行选项，而不是 sql 命令/查询。你需要先退出mysql，然后重新输入

```
$ mysql -u adam -p prediction 
```

在 shell 提示符下

# python - Python负零切片

> ID：11337941
> 
> 赞同：10
> 
> 时间：2012-07-05T04:42:47.833
> 
> 标签：python, idioms, slice

我经常发现自己不得不处理序列中的最后 n 个项目，其中 n 可能是 0。问题是尝试切片`[-n:]`在 的情况下不起作用`n == 0`，因此需要笨拙的特殊情况代码。例如

```
if len(b): 
    assert(isAssignableSeq(env, self.stack[-len(b):], b))
    newstack = self.stack[:-len(b)] + a
else: #special code required if len=0 since slice[-0:] doesn't do what we want
    newstack = self.stack + a 
```

我的问题是 - 有没有办法在不需要笨拙的特殊外壳的情况下获得这种行为？如果我不必一直检查 0，代码会简单得多。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-05T04:45:14.830

只需使用`or`' 的合并行为。

```
>>> print 4 or None
4
>>> print -3 or None
-3
>>> print -0 or None
None 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-05T04:51:13.260

你可以把它`L[-2:]`从`L[len(L)-2:]`

```
>>> L = [1,2,3,4,5]
>>> L[len(L)-2:]
[4, 5]
>>> L[len(L)-0:]
[] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T04:51:43.190

当你发现自己不止一次使用一个构造时，把它变成一个函数。

```
def last(alist, n):
    if n:
        return alist[:-n]
    return alist

newstack = last(self.stack, len(b)) + a 
```

EOL 在评论中建议的更简单的版本：

```
def last(alist, n):
    return alist[:-n] if n else alist[:] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T04:52:10.640

由于双重反转，这可能非常低效，但希望反转序列以使索引更容易的想法有一些东西：

```
a = [11, 7, 5, 8, 2, 6]

def get_last_n(seq, n):
    back_seq = seq[::-1]
    select = back_seq[:n]
    return select[::-1]

print(get_last_n(a, 3))
print(get_last_n(a, 0)) 
```

回报：

```
[8, 2, 6]
[] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T07:10:38.983

你可以在那里滑一个条件

```
L[-i if i else len(L):] 
```

我认为这个版本不太清楚。您应该在旁边使用评论

```
L[-i or len(L):] 
```

# dialog - Primefaces datalist ajax 分页对话框未更新

> ID：11337945
> 
> 赞同：0
> 
> 时间：2012-07-05T04:43:50.663
> 
> 标签：dialog, primefaces, datalist

我在[这里](http://www.primefaces.org/showcase-labs/ui/dataListAjax.jsf)尝试使用 primefaces 的 primefaces 对话框更新方法，并且我已经用我的 bean 替换了 bean 及其方法。

这就是我所做的

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" type="text/css" href="../Styles/homepage-style.css" />
        <link rel="stylesheet" type="text/css" href="../Styles/profile.css" />
        <title>Shadi Bandhan | We find the best match for you</title>
    </h:head>

    <h:body>

        <h:form id="form">  

            <p:dataList value="#{messagesManagedBean.userInboxMsgs}" var="msg" id="cars"  
                        paginator="true" rows="5"
                        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
                        rowsPerPageTemplate="5,10,15" type="none">  

                <f:facet name="header">  
                    Cars  
                </f:facet>  

                <p:commandButton icon="ui-icon-search" update=":form:carDetail" oncomplete="carDialog.show()" title="View Detail">  
                    <f:setPropertyActionListener value="#{msg}" target="#{messagesManagedBean.selectedMessage}" />  
                </p:commandButton>  

                <h:outputText value="#{msg.message}, #{msg.userFullname}" style="margin-left:10px" />  
                <br />  
            </p:dataList>  

            <p:dialog header="Car Detail" widgetVar="carDialog" modal="true" showEffect="fade">  
                <p:outputPanel id="carDetail" style="text-align:center;" layout="block">  

                    <h:panelGrid  columns="2" cellpadding="5">  
                        <h:outputLabel for="modelNo" value="Message: " />  
                        <h:outputText id="modelNo" value="#{messagesManagedBean.selectedMessage.message}" />  

                        <h:outputLabel for="year" value="Full name: " />  
                        <h:outputText id="year" value="#{messagesManagedBean.selectedMessage.userFullname}" />  

                        <h:outputLabel for="color" value="User Id: " />  
                        <h:outputText id="color" value="#{messagesManagedBean.selectedMessage.userId}" style="color:#{tableBean.selectedCar.color}"/>  
                    </h:panelGrid>  
                </p:outputPanel>  
            </p:dialog>  

        </h:form> 

    </h:body>
</html> 
```

它打开对话框但不显示值。（对话框未更新） **注意**以前，当我使用 ui:repeat 而不是 datalist 时，使用 f:param 方法很好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T05:46:36.493

```
<h:form id="form">  

            <p:dataList value="#{tableBean.cars}" var="car" id="cars"  
    paginator="true" rows="10"  
    paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"  
    rowsPerPageTemplate="10,15" type="none">  
                <p:column>
        <f:facet name="header">  
            Notificaciones  
        </f:facet>  
                <p:commandButton icon="ui-icon-search" update=":form:carDetail"  oncomplete="carDialog.show()" title="View Detail">  
            <f:setPropertyActionListener value="#{car}" target="#{tableBean.selectedCar}" />  
                </p:commandButton>  

        <h:outputText value="#{car.manufacturer}, #{car.year}" style="margin-left:10px" />  
        <br /> 
                </p:column>
</p:dataList> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:28:59.327

**答案是**

将命令链接或命令按钮放入`<p:column></p:column>`解决了我的问题。

# redis - Redis 索引：存储完整密钥与 ID

> ID：11337946
> 
> 赞同：1
> 
> 时间：2012-07-05T04:44:01.053
> 
> 标签：redis

给定这个例子：

```
user:1 email bob@bob.com
user:1 name bob 
```

根据我的研究，所有示例都创建了一个类似于以下内容的“索引”：

```
user:bob@bob.com 1 
```

我的问题是：将它存储为“用户：1”不是更好吗？这将消除在代码中连接字符串的需要。还有其他原因不存储整个字符串吗？可能是内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:52:50.417

问题专门关于将完整键存储在索引中，或者只是作为该键一部分的数字 ID。

Redis 有许多[内存优化](http://redis.io/topics/memory-optimization)，您可能希望利用这些优化来减少一般内存消耗。这些优化之一是 intset（一种表示整数集的有效结构）。

很多时候，集合用作索引条目，在这种情况下，存储数字 ID 而不是字母数字键要好得多，以从 intset 优化中受益。

您的示例略有不同，因为给定的电子邮件地址应仅与一个用户相关联。唯一的哈希对象可以存储整个索引。我仍然会在这里使用数字 ID，因为它更紧凑，并且可能会受益于未来的 Redis 优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T05:53:06.497

根据您到目前为止所传达的内容，我将使用 Redis 哈希。例如，我会对数据进行一些非规范化，并将其存储为`hmset users:1 email bob@bob.com name Bob`“hset users:lookup:email bob@bob.com 1”。

这样，我可以使用他的电子邮件 ID 或用户 ID 来检索用户。您可以根据需要创建更多查找哈希。

有关更多有用的模式，请查看由 Salvatore Sanfilippo 本人撰写的[Little Redis 书。](http://openmymind.net/2012/1/23/The-Little-Redis-Book/)

# sql - 使用函数选择分层项目

> ID：11337947
> 
> 赞同：1
> 
> 时间：2012-07-05T04:44:01.233
> 
> 标签：sql, hierarchical-data

我试图从表中生成 Html。为了实现这一点，我使用了函数。

**桌子：**

```
LayoutId        LayoutDetailsId ParentId        DetailSyntax    DetailValue
--------------- --------------- --------------- --------------- ---------------
2               15              0               table           htmlchild
2               16              15              tbody           htmlchild
2               17              16              tr              htmlchild
2               18              17              th              No.
2               19              17              th              Name
2               20              17              th              Address
2               21              16              tr              htmlchild
2               22              21              td              1
2               23              21              td              Asha
2               24              21              td              Flamboyan Street
2               25              16              tr              htmlchild
2               26              25              td              2
2               27              25              td              Jack
2               28              25              td              Manggo Street 
```

请注意，DetailValue 中的 htmlchild 类似于“HasChild”

**功能：**

```
CREATE FUNCTION FnHtmlGenerator(@layoutId BIGINT, @parentId BIGINT = 0, @prevTopLevelHtml VARCHAR(MAX) = '')
RETURNS VARCHAR(MAX)
AS
BEGIN
    DECLARE @currentHtml VARCHAR(MAX);
    DECLARE @parentTable TABLE
    (
        layoutDetailsId BIGINT,
        parentId BIGINT,
        syntax VARCHAR(50),
        val VARCHAR(50)
    );

    INSERT INTO @parentTable
    SELECT
        ld.LayoutDetailsId,
        ld.ParentId,
        ld.DetailSyntax,
        ld.DetailValue
    FROM Alert.LayoutDetails ld
    WHERE ld.ParentId = @parentId
    AND ld.LayoutId = @layoutId;

    SELECT
        @currentHtml = '<' + pt.syntax + '>{0}</' + pt.syntax + '>',
        @parentId = pt.layoutDetailsId
    FROM @parentTable pt;

    SELECT
        @prevTopLevelHtml =
        CASE CHARINDEX('{0}', @prevTopLevelHtml)
            WHEN 0 THEN @currentHtml
            ELSE STUFF(@prevTopLevelHtml, CHARINDEX('{0}', @prevTopLevelHtml), 3, @currentHtml)
        END;

    SELECT
        @prevTopLevelHtml =
        CASE
            (SELECT COUNT(0)
            FROM Alert.LayoutDetails ld
            WHERE ld.ParentId = @parentId)
            WHEN 0 THEN @prevTopLevelHtml
            ELSE FnHtmlGenerator(@layoutId, @parentId, @prevTopLevelHtml)
        END;

    RETURN @prevTopLevelHtml;
END 
```

**结果：**

```
html
---------------------------------------------------
<table><tbody><tr><td>{0}</td></tr></tbody></table> 
```

问题是。我的函数只跟踪 1 条路径。第一个`tr`和第一个`td`甚至`th`没有被追踪。如何让它追踪所有路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:06:46.563

因为当你打电话

```
SELECT 
    @currentHtml = '<' + pt.syntax + '>{0}</' + pt.syntax + '>', 
    @parentId = pt.layoutDetailsId 
FROM @parentTable pt; 
```

...返回表中的最后一行，并将其分配给变量，因此路径为 2/15/16/25/28

您可能想查看通用表表达式的递归能力（例如： http: [//msdn.microsoft.com/en-us/library/ms186243](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx) (v=sql.105).aspx ）和/或分层数据类型如果您的数据库平台支持它（SQL Server 2008+，）

# android - 如何删除微调器的默认选择？

> ID：11337948
> 
> 赞同：-1
> 
> 时间：2012-07-05T04:44:11.217
> 
> 标签：android, android-widget

我的萨尔曼·阿姆贾德我在我的应用程序中使用了两个微调器，并且在每个选择上都使用了 if else 结构......但是当应用程序加载时，默认选择条件执行......我想删除默认选择可以任何一个你请帮我做这件事？？？？第一个条件也不会在第一个执行....

```
 convertto.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View v1,
                int index1, long arg3) {
            //from meters
            var1=Double.parseDouble(lvalue.getText().toString());
            var2=var1;
            if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Meter") ))
            {
            Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();
            var2=var1;
            lresult.setText("" + var2);

        }
            else{
                if ((quantity[index1]=="Inches") && (s1.equalsIgnoreCase("Meter")))
                {
                Toast.makeText(v1.getContext(), " to inches",Toast.LENGTH_SHORT).show();

                var2=var1 * 39.3700787;
                lresult.setText("" + var2);

            }
                else{
                    if ((quantity[index1]=="Feet") && (s1.equalsIgnoreCase("Meter")))
                    {
                    Toast.makeText(v1.getContext(), " to Feet",Toast.LENGTH_SHORT).show();

                    var2=var1 * 3.281;
                    lresult.setText("" + var2);

                }
                    else{
                        if ((quantity[index1]=="Yards") && (s1.equalsIgnoreCase("Meter")))
                        {

                        Toast.makeText(v1.getContext(), " to Yards",Toast.LENGTH_SHORT).show();

                        var2=var1 * 1.0936133 ;
                        lresult.setText("" + var2);
                        }
                    }
                }
                //from inches
                if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Inches")))
                {
                Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();

                var2=var1/39.3700787;
                lresult.setText("" + var2);

            }
                else{
                    if ((quantity[index1]=="Inches") && (s1.equalsIgnoreCase("Inches")))
                    {
                    Toast.makeText(v1.getContext(), " to inches",Toast.LENGTH_SHORT).show();

                    var2=var1;
                    lresult.setText("" + var2);

                }
                    else{
                        if ((quantity[index1]=="Feet") && (s1.equalsIgnoreCase("Inches")))
                        {
                        Toast.makeText(v1.getContext(), " to Feet",Toast.LENGTH_SHORT).show();

                        var2=var1/12;
                        lresult.setText("" + var2);

                    }
                        else{
                            if ((quantity[index1]=="Yards") && (s1.equalsIgnoreCase("Inches")))
                            {

                            Toast.makeText(v1.getContext(), " to Yards",Toast.LENGTH_SHORT).show();

                            var2 = var1/36;
                            lresult.setText("" + var2);
                            }
                        }
                    }
                    //from feet
                    if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Feet")))
                    {
                    Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();

                    var2=var1/3.281;
                    lresult.setText("" + var2);

                }
                    else{
                        if ((quantity[index1]=="Inches") && (s1.equalsIgnoreCase("Feet")))
                        {
                        Toast.makeText(v1.getContext(), " to inches",Toast.LENGTH_SHORT).show();

                        var2=var1*12;
                        lresult.setText("" + var2);

                    }
                        else{
                            if ((quantity[index1]=="Feet") && (s1.equalsIgnoreCase("Feet")))
                            {
                            Toast.makeText(v1.getContext(), " to Feet",Toast.LENGTH_SHORT).show();

                            var2=var1;
                            lresult.setText("" + var2);

                        }
                            else{
                                if ((quantity[index1]=="Yards") && (s1.equalsIgnoreCase("Feet")))
                                {

                                Toast.makeText(v1.getContext(), " to Yards",Toast.LENGTH_SHORT).show();

                                var2 = var1/3;
                                lresult.setText("" + var2);
                                }
                            }
                        }
                        //from yards
                        if ((quantity[index1]=="Meter") && (s1.equalsIgnoreCase("Yards")))
                        {
                        Toast.makeText(v1.getContext(), " to meter",Toast.LENGTH_SHORT).show();

                        var2=var1/1.0936133;
                        lresult.setText("" + var2);

                    }
                        else{
                            if ((quantity[index1]=="Inches") && (s1.equalsIgnoreCase("Yards")))
                            {
                            Toast.makeText(v1.getContext(), " to inches",Toast.LENGTH_SHORT).show();

                            var2=var1*36;
                            lresult.setText("" + var2);

                        }
                            else{
                                if ((quantity[index1]=="Feet") && (s1.equalsIgnoreCase("Yards")))
                                {
                                Toast.makeText(v1.getContext(), " to Feet",Toast.LENGTH_SHORT).show();

                                var2=var1*3;
                                lresult.setText("" + var2);

                            }
                                else{
                                    if ((quantity[index1]=="Yards") && (s1.equalsIgnoreCase("Yards")))
                                    {

                                    Toast.makeText(v1.getContext(), " to Yards",Toast.LENGTH_SHORT).show();

                                    var2 = var1;
                                    lresult.setText("" + var2);
                                    }
                                }
                            }
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T04:56:45.620

这是因为当您第一次执行您的应用程序`onItemSelected`并被解雇时。为了摆脱这种情况，您需要自己应用一些逻辑东西，以便当 Activity 第一次启动时它不会触发您的代码，`onItemSelected`并且在用户进行选择时工作。

你可以做类似的事情，

```
int spinner_counter = 1, spinnner_selected = 0; // declare globally

        @Override
        public void onItemSelected(AdapterView<?> arg0, View v1,
                int index1, long arg3) {

           if(spinnner_selected < spinner_counter){
                  spinnner_selected++;
           }
           else{
                 //execute your code here
           }
        } 
```

# sql - where table.* <> table.* - 有没有办法做这样的事情？

> ID：11337950
> 
> 赞同：5
> 
> 时间：2012-07-05T04:44:27.130
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个设计糟糕的表（谢天谢地不是我做的），它以类似于以下方式存储数据：

> [key]、[lease_id]、[building_name]、约 20 列数据

Lease_id 可以并且将存在于中心和总部。我被要求查找所有建筑物中的租赁数据与总部中相同租赁的数据不匹配的所有实例。

我可以很容易地通过自我加入来做到这一点。这里的挑战是有大约 20 列要比较，虽然我可以手动输入每一列，但我想知道是否有更好的方法来做到这一点（这也意味着将来可以使用查询，考虑任何表更改）。

在语法上荒谬的伪代码中 - 我想做一些类似于以下内容的事情：

```
select  lp.*
from    lease_proposal lp
        inner join
        (
            select  *
            from    lease_proposal lp2
            where   building_id = '001' -- assume 001 is head office for sake of example
        ) lp2
            on lp2.lease_id = lp.lease_id
where   lp.* <> lp2.* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T04:56:13.253

您可以执行`INTERSECT`操作以查找所有数据匹配的所有行，然后找到`LEFT JOIN`该结果并仅选择没有交集的行：

```
SELECT
    a.*
FROM
    lease_proposal a
LEFT JOIN
    (
        SELECT *
        FROM lease_proposal

        INTERSECT

        SELECT *
        FROM lease_proposal
        WHERE building_id = 001
    ) b ON a.lease_id = b.lease_id
WHERE
    b.lease_id IS NULL 
```

如果 SQL Server 支持它，你也可以`NATURAL LEFT JOIN`像这样使用：

```
SELECT  
    a.*
FROM
    lease_proposal a
NATURAL LEFT JOIN
    (
        SELECT *
        FROM lease_proposal
        WHERE building_id = 001
    ) b
WHERE b.lease_id IS NULL 
```

# java - 在aws elastic beanstalk上上传文件？

> ID：11337951
> 
> 赞同：0
> 
> 时间：2012-07-05T04:44:27.763
> 
> 标签：java, hibernate, amazon-s3, amazon-web-services, amazon-elastic-beanstalk

我创建了一个 Java Web 应用程序并将其部署在 AWS Elastic Beanstalk 上。它的数据库运行良好。

现在，在我的项目中，用户可以选择上传文档、pdf 和图像。这正在制造问题。在本地系统中，我`./`用作保存上传文档的路径，但在亚马逊上，我不知道在哪里存储这些上传的文档以及如何分配路径。

到目前为止，我已经完成了以下工作，一切正常。

1.  在 AWS Elastic Beanstalk 上上传了一个项目。
2.  使用 AWS 创建了一个数据库`RDS`。
3.  应用程序和数据库都在相互通信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T06:03:31.147

要存储文件，我建议使用 S3 存储桶。使用亚马逊 SDK 来完成。对于 java，请参阅[com.amazonaws.services.s3 putObject 接口 AmazonS3](https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#putObject-java.lang.String-java.lang.String-java.lang.String-)。

当然，您的文件保存代码应该是可插入的，至少有两个实现。一种实现将文件保存到本地磁盘，另一种实现将其存储在 S3 中。您的启动代码应该连接正确的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T16:17:14.000

是的，一旦您将其存储在（AWS）S3 存储桶中，获取它的凭证详细信息并创建凭证文件

容易多了！:)

# openerp - 我怎么能叫我的表格

> ID：11337954
> 
> 赞同：0
> 
> 时间：2012-07-05T04:45:18.160
> 
> 标签：openerp

我创建了一个表单视图，目标是当我单击新按钮时，它将转到我创建的表单。但是为什么我总是看到错误？

```
**ProgrammingError: operator does not exist: integer = boolean
LINE 1: select name, model from ir_ui_view where (id=false or inheri...
                                                    ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.** 
```

就是这个图，谢谢

（如果你想看图片，请告诉我你的电子邮件，因为我不能把图片放在这里。谢谢。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T06:21:14.590

在看到您的回溯之后，您似乎正在传递`view_id = False`. 它应该是您要打开的表单视图的“ID”。

# xcode - 在mac上安装xunbug

> ID：11337957
> 
> 赞同：1
> 
> 时间：2012-07-05T04:46:41.423
> 
> 标签：xcode, cordova

有人知道如何在mac上安装Xun bug吗？

我遵循了他们提供的指导方针。但是当我构建时，xcode 发送了以下错误..

“**第 3 行：/phone/version/mac/bin/profile.sh: 没有这样的文件或目录**”

请帮帮我？

# ruby - rails 3.2 更新 has_many :through

> ID：11337959
> 
> 赞同：0
> 
> 时间：2012-07-05T04:47:05.173
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, has-many-through

我非常接近这个，但赶上了一个小细节。我正在尝试更新 has_many :through 关系。当我提交编辑表单时，我无法提取我想要更新的适当属性。更新发货数量的循环不会使用正确的值更新该字段。如何从 params[:product_shipments] 哈希中仅提取 qty_shipped 属性？

```
This is the contents of my params[:product_shipments] hash that the update action is working with

"product_shipments"=> {"82"=>{"qty_shipped"=>"234"},
                       "83"=>{"qty_shipped"=>"324"},
                       "84"=>{"qty_shipped"=>"324"}}, 
                       "commit"=>"Update Shipment", "id"=>"250"} 
```

其中包含我更新货件所需的所有信息，因为 @shipment.product_shipments 循环将更新限制为仅适用的 shipping_id。我的问题是这是更新操作调用的以下 sql

```
ProductShipment Load (0.3ms)  SELECT `product_shipments`.* FROM `product_shipments` WHERE `product_shipments`.`shipment_id` = 250
BEGIN
UPDATE `product_shipments` SET `qty_shipped` = 1 WHERE `product_shipments`.`id` = 82
COMMIT
BEGIN
UPDATE `product_shipments` SET `qty_shipped` = 1 WHERE `product_shipments`.`id` = 83
COMMIT
BEGIN
UPDATE `product_shipments` SET `qty_shipped` = 1 WHERE `product_shipments`.`id` = 84
COMMIT 
```

这是生成上述 sql 的更新操作：

```
def update
  @shipment = Shipment.find(params[:id])
  @shipment.update_attributes(params[:shipment])

  @shipment.product_shipments.each do |shipment|
    shipment.update_attributes(:qty_shipped=> params[:product_shipments])
  end

  respond_with @shipment, :location => shipments_url
end 
```

不首选使用 rbates nested_forms gem，因为我想弄清楚这一点是为了了解 Rails 的工作原理。

```
<%= hidden_field_tag("product_shipments[][#{product_shipment.id}]") %>
<%= hidden_field_tag("product_shipments[][product_id]", product_shipment.id) %>
<%= text_field_tag "product_shipments[][qty_shipped]", product_shipment.qty_shipped,:class => 'shipment_qty_field'%>&nbsp<%=@product.product_name %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:10:51.123

```
@shipment.product_shipments.each do |product_shipment|
   product_shipment.update_attributes(:qty_shipped => params[:product_shipments][product_shipment.id][:qty_shipped])
end 
```

您不必做所有这些，只需使用嵌套表单。这是铁轨！

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

你的参数应该是这样的

```
{:product_shipments => { 79 => { :qty_shipped => 450 }, 80 => { :qty_shipped => 35 } }, :shipment_id => 1 } 
```

为此，您应该像这样命名您的字段

```
<input name="product_shipments[79][qty_shipped]" value="450" />
<input name="product_shipments[80][qty_shipped]" value="35" /> 
```

要生成它，

```
<% @shipment.product_shipments.each do |product_shipment| %>
  <%= text_field_tag "product_shipments[#{product_shipment.id}][qty_shipped]", product_shipment.qty_shipped || 0 %>
<% end %> 
```

# c# - 计时器跳过 ElapsedEvents

> ID：11337960
> 
> 赞同：2
> 
> 时间：2012-07-05T04:47:09.383
> 
> 标签：c#, timer

所以我试图每 5 秒运行一次事件。似乎在某种程度上使用 System.Timers.Timer 工作，但它似乎有时会跳过，甚至没有响应迟到，只是简单地跳过它。

对此我能做些什么吗？

```
 internal void DetermineScreenCapping()
        {
            System.Timers.Timer ScreenCapTimer = new System.Timers.Timer();
            /// Initialize the screencapper (doesn't enable it yet)
            // Tell the timer what top do when it elapses
            ScreenCapTimer.Elapsed += new ElapsedEventHandler(ExecuteCode);
            // Set it to go off every five seconds
            ScreenCapTimer.Interval = 5000;
            // And start it        
            ScreenCapTimer.Enabled = true;
        }
    private void ExecuteCode(object source, ElapsedEventArgs e)
    {
        if (IsCurrentlyWorking == true)
        {
            Execute Code
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:36:23.137

问题确实不在于计时器没有完成它的工作。正是正在执行的代码存在一些问题，由于某种原因甚至无法看到调试。

我更改了代码，计时器现在可以正常工作了^^

# ios - 点击 UITextField 的清除按钮隐藏键盘而不是清除文本

> ID：11337961
> 
> 赞同：19
> 
> 时间：2012-07-05T04:47:12.400
> 
> 标签：ios, objective-c, iphone, keyboard, uitextfield

在 iPhone 中，我有一个视图，其中包含`UITextField`. 当我点击`UITextField`'s 的清除按钮时，键盘被关闭而不是清除`UITextField`. 在 iPad 上它工作正常。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-02-14T05:57:54.320

只需清除该字段`resignFirstResponder`（如果您想隐藏键盘）并返回`NO`/`false`

注意：设置属性检查器的属性`UITextField`

> **清除按钮 -> 编辑时出现**

所以它会在文本字段中编辑时显示清除按钮。

**// 目标-C**

```
-(BOOL)textFieldShouldClear:(UITextField *)textField
{
    textField.text = @"";
    [textField resignFirstResponder];
    return NO;
} 
```

**// 斯威夫特**

```
func textFieldShouldClear(textField: UITextField) -> Bool {
    textField.text = ""
    textField.resignFirstResponder()
    return false
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-05T06:18:51.617

附加 uitextifield 的委托后尝试此代码

```
-(BOOL)textFieldShouldClear:(UITextField *)textField
{
     return true;
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-07-05T05:08:30.170

首先，检查与您相关的所有代码块`UITextField`（尤其是代码`yourTextField.hidden = YES;`）

设置断点并分析`UITextField`您实施的每个委托。

( *`textFieldDidEndEditing`, `textFieldShouldEndEditing`, `textFieldShouldReturn.etc`.* )

或者

实现`textFieldShouldClear`委托并在此处编写代码以显示和清除您的`UITextField`

为此，您必须设置`clearButtonMode`如下，

```
yourTextField.clearButtonMode = UITextFieldViewModeWhileEditing;
yourTextField.delegate = self;

//For active keyboard again
[yourTextField becomeFirstResponder]; 
```

然后实现`textFieldShouldClear`委托

**你的班级.h**

```
 @interface className : UIViewController <UITextFieldDelegate> 
```

**你的班级.m**

```
-(BOOL)textFieldShouldClear:(UITextField *)textField {
    yourTextField.hidden = NO;
    yourTextField.text = @"";
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-06T09:15:11.367

只要确保你给了这两个

```
editingTextField.delegate = self;
editingTextField.clearButtonMode = UITextFieldViewModeWhileEditing; 
```

**仅当您需要进行一些自定义时才需要**TextFieldShouldClear :-)****

 **你在用这种方法做一些事情吗？

也许您正在此委托方法中调用 resignFirstResponder，这就是键盘被关闭的原因。

请通过委托方法，并检查您到底在做什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-05T10:10:17.033

如果你有这个问题也会发生

```
yourTextField.clearButtonMode = UITextFieldViewModeNever; 
```

检查此行并将其删除或更改查看模式..**

# googletest - 如何在谷歌测试中编写两个数字相加的程序？

> ID：11337967
> 
> 赞同：0
> 
> 时间：2012-07-05T04:48:25.390
> 
> 标签：googletest

我正在使用visual studio 2005 ...有人可以告诉我如何编写最基本的程序来在谷歌测试中添加两个数字吗？我已经阅读了几乎所有给出的参考资料......但不知何故不明白如何开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:02:31.960

以下将是尽可能基本的：

```
#include "gtest/gtest.h"

int GetSum(int a, int b) { return a + b; }

TEST(MathsFunctions, GetSum) {
  ASSERT_EQ(3, GetSum(1, 2));
}

int main(int argc, char **argv) {
  testing::InitGoogleTest(&argc, argv);
  return RUN_ALL_TESTS();
} 
```

您需要提供 gtest 包含目录的路径并链接到 gtest.lib

# c# - Windows 窗体的 Groupbox

> ID：11337968
> 
> 赞同：1
> 
> 时间：2012-07-05T04:48:29.663
> 
> 标签：c#, winforms

我已经为 windows 窗体创建了 gui ......！

一方面，我有带复选框的组框和两个按钮“>>”和“<<”，另一方面，我还有一个组框。

如果用户选择了多个我需要引发错误的复选框，我需要一次选择一个复选框。

如果用户选中复选框并单击“>>”按钮，我需要在另一个组框中显示消息数，即在“选定命令列表”中...并单击“>>”选定的消息列表应该从列表中删除。

单击此选项卡时，我已在我的 gui 中包含选项卡控件我需要显示一些命令列表我该怎么做...

谁可以帮我这个事...

这是代码..

```
namespace Menu_Sample
{
    public partial class Form1 : Form
    {

    public Form1()
    {

        InitializeComponent();
        groupBox1.Text = "MSC";
        groupBox2.Text = "List Of Selected Commands";
        checkBox1.Visible = false;
        cb2.Visible = false;
        cb3.Visible = false;
        cb4.Visible = false;
        label1.Visible = false;
        label2.Visible = false;
        label3.Visible = false;
        label4.Visible = false;

    }

    private void submenu1ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        groupBox1.Text = "ICP";
        checkBox1.Visible = true;
        cb2.Visible = true;
        cb3.Visible = true;
        cb4.Visible = true;
    }

    private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {

    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (checkBox1.Checked == true)
        {
            label1.Visible = true;
            label1.Text = "ibit";
            groupBox2.Controls.Add(label1);
            label2.Visible = true;
            label2.Text = "Cbit";
            groupBox2.Controls.Add(label2);
            label3.Visible = true;
            label3.Text = "Kbit";
            groupBox2.Controls.Add(label3);
            label4.Visible = true;
            label4.Text = "ibit";
            groupBox2.Controls.Add(label4);

        }
        if (cb2.Checked == true)
        {
            label1.Visible = true;
            label1.Text = "ibit";
            groupBox2.Controls.Add(label1);
            label2.Visible = true;
            label2.Text = "Cbit";
            groupBox2.Controls.Add(label2);
            label3.Visible = true;
            label3.Text = "Kbit";
            groupBox2.Controls.Add(label3);
            label4.Visible = true;
            label4.Text = "ibit";
            groupBox2.Controls.Add(label4);

        }
    }

    private void btn6_Click(object sender, EventArgs e)
    {

        if (label1.Enabled==true)
        {
            label1.Text = "";
        }
    }

    private void btn5_Click(object sender, EventArgs e)
    {
        label1.Text = "";
        label2.Text = "";
        label3.Text = "";
        label4.Text = "";
    }

    private void submenu2ToolStripMenuItem_Click(object sender, EventArgs e)
    {
        groupBox1.Text = "MCP";
    }

    private void mDPToolStripMenuItem_Click(object sender, EventArgs e)
    {
        groupBox1.Text = "MDP";
    }

    private void mRPPToolStripMenuItem_Click(object sender, EventArgs e)
    {
        groupBox1.Text = "MRPP";
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T04:58:31.220

我给你一个想法，我们如何做到这一点。

您必须创建一个组框单击事件，然后对该组框中的控件使用循环，如果该控件是复选框并且它已被选中，那么您只需计算不应该选中其他复选框。

我很快就会收到代码。

# rvm - 未初始化的常量 Capistrano (NameError)

> ID：11337971
> 
> 赞同：2
> 
> 时间：2012-07-05T04:48:51.037
> 
> 标签：rvm, rvm-capistrano

rvm 1.14.5、rvm-capistrano (1.2.2) 和 capistrano (2.12.0) 我的 Gemfile 是：

```
group :development, :test do
   gem 'rvm-capistrano'
   gem 'capistrano'
end 
```

当我尝试启动乘客时，我一直看到此错误：

```
[ pid=4691 thr=76294140 file=utils.rb:176 time=2012-07-04 11:37:06.179 ]: *** Exception NameError in PhusionPassenger::Rack::ApplicationSpawner (uninitialized constant Capistrano) (process 4691, thread #<Thread:0x9184ff8>):
from /home/ved/.rvm/gems/ruby-1.9.3-p194/gems/rvm-capistrano-1.2.2/lib/rvm/capistrano.rb:3:in `<top (required)>'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `require'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `rescue in block in require'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:62:in `block in require'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
from /home/ved/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
from /home/ved/rails_projects/grabber/config/application.rb:12:in `<top (required)>'
from /home/ved/rails_projects/grabber/config/environment.rb:3:in `require'
from /home/ved/rails_projects/grabber/config/environment.rb:3:in `<top (required)>'
from config.ru:3:in `require'
from config.ru:3:in `block in <main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T02:02:57.803

只是在这里尝试一下，但请确保在安装包时排除开发和测试组。

bundle install -- 没有测试开发

听起来您的应用程序出于某种原因正在尝试加载 rvm-capistrano。

# operating-system - 鼠标检测，操作系统启动

> ID：11337973
> 
> 赞同：0
> 
> 时间：2012-07-05T04:48:53.720
> 
> 标签：operating-system, driver, bios

我只是想知道鼠标，键盘在启动过程中是如何工作的。假设我有一个 USB 鼠标和一个 USB 键盘。当我打开我的电脑时，POST 只是为了检查连接到我的系统的所有硬件是否正常工作。但是要使 USB 硬件正常工作，我们需要一个 USB 驱动程序，它最终是一个过程。但是如果操作系统还没有加载（我的意思是初始化和交换进程），这个进程是如何存在的？让我印象深刻的一件事是 BIOS。但我认为，BIOS 无法识别检测不同鼠标、键盘所需的不同驱动程序。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T05:00:54.087

BIOS 能够枚举和控制 USB 设备的某个子集。特别是，鼠标和键盘属于一类通用的设备（人机接口设备，HID），它们具有通用的、已定义的接口并且可以很好地驱动。因此，BIOS 仅包含用于该类设备的驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T09:02:40.677

[现代 BIOS 使用SMM/SMI](http://en.wikipedia.org/wiki/System_Management_Mode)模拟 PS/2 端口 0x60 和 0x64 ，具有通常称为“USB Legacy Support”的功能（有关更多信息，请参阅[EHCI 规范](http://www.intel.com/technology/usb/download/ehci-r10.pdf)。）

当操作系统本身加载并初始化 USB 控制器时，控制器所有权会从 BIOS 拥有到 OS 拥有。

# ios - 无法访问 dispatch_async 中的全局变量：“变量不可赋值（缺少 _block 类型说明符）”

> ID：11337975
> 
> 赞同：49
> 
> 时间：2012-07-05T04:49:24.907
> 
> 标签：ios, objective-c, multithreading, objective-c-blocks, grand-central-dispatch

在我的 dispach_async 代码`block`中，我无法访问`global variables`. 我收到此错误`Variable is not Assignable (missing _block type specifier)`。

```
NSString *textString;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
   (unsigned long)NULL), ^(void) {
        textString = [self getTextString];
}); 
```

谁能帮我找出原因？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-07-05T04:51:50.723

修改块内的变量时必须使用 __block 说明符，因此您提供的代码应如下所示：

```
 __block NSString *textString;
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 
                                                 (unsigned long)NULL), ^(void) {
      textString = [self getTextString];
}); 
```

块捕获其体内引用的变量的状态，因此必须将捕获的变量声明为可变的。考虑到您实际上是在设置这个东西，而可变性正是您所需要的。

# mysql - 查询以获取已回答的调查问题的摘要（不同的列值）

> ID：11337981
> 
> 赞同：0
> 
> 时间：2012-07-05T04:49:54.567
> 
> 标签：mysql, sql

我有一个调查表，每次有人完成调查时，都会在`survey_result`表中创建一条记录。

该表对每个问题都有一列。大多数是多项选择，有些是自由文本。

即表中的列：

```
happy_or_sad (no. yes, sometimes)
are_you_busy (no, yes, sometimes)
your_suggestion 
```

现在我想显示已提交的多项选择答案的摘要。

问：快乐还是悲伤？否 (40%) 是 (20%) 有时 (40%)

（或者如果百分比工作量太大，至少要计数）。我可以用来得到这个的最有效的查询是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:18:00.287

尝试：

```
SELECT
    (SUM(happy_or_sad = 'no') / COUNT(*)) * 100 AS percentage_no,
    (SUM(happy_or_sad = 'yes') / COUNT(*)) * 100 AS percentage_yes,
    (SUM(happy_or_sad = 'sometimes') / COUNT(*)) * 100 AS percentage_sometimes,
FROM
    survey_result 
```

# d3.js - d3js selection.each() 回调组参数

> ID：11337983
> 
> 赞同：5
> 
> 时间：2012-07-05T04:50:17.613
> 
> 标签：d3.js

简单的html：

```
 <div class="div1">
      <div class="test"><span>1</span></div>
      <div class="test"><span>2</span></div>
 </div> 
```

和js：

```
var el = d3.select(".div1").selectAll(".test");
el.each(function() { 
      console.log(arguments);
}); 
```

输出：

```
[undefined, 0, 0]
[undefined, 1, 0] 
```

最新的论点 (0) 是什么？根据源代码，这是组，但我在 d3 文档中找不到有关选择器组的任何信息。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T07:15:43.373

它适用于嵌套选择器： http: [//bost.ocks.org/mike/nest/](http://bost.ocks.org/mike/nest/)

例如对于这个 HTML：

```
<table>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
</table> 
```

让我们选择 td：

```
var el = d3.selectAll("tr").selectAll("td"); 
```

埃尔是`[ Array[2] , Array[2] ]`

和`el.each`：

```
el.each(function() { 
    console.log('args',arguments);
}); 
```

输出：

```
args [undefined, 0, 0]
args [undefined, 1, 0]
args [undefined, 0, 1]
args [undefined, 1, 1] 
```

# vim - 从命令行自动缩进 .lisp 文件并使用 slimv 进行缩进

> ID：11337986
> 
> 赞同：3
> 
> 时间：2012-07-05T04:50:21.823
> 
> 标签：vim, clojure, common-lisp, swank, slimv

我正在尝试从命令行自动缩进 .lisp 文件，利用 vim+slimv 进行缩进。

我尝试编写脚本：

```
vi -c 'call SlimvConnectSwank()' -c 'normal gg=G' -c 'wq' -c 'q!' temp.lisp 
```

但是没有查询 swank 服务器进行缩进，所以这只是将文件缩进到 .lisp vim 默认值（如果 slimv 和服务器没有运行）。

我需要在调用连接到 swank 服务器之后放置某种延迟/等待 -c 命令吗？似乎整个 vi 进程关闭得太快了，并且没有给 swank 连接的机会。如果 swank 连接发生在单独的线程上，我想可能是这种情况。

想法/评论/建议表示赞赏。

谢谢！

塔马斯明白了。它是（我检查了这一点，实际上两者都是需要的；真的:)）一个睡眠命令和 swank 命令让它工作。

我将它添加到我的 .bashrc 并将其别名为“ai”，以便我可以轻松地从命令行缩进 .lisp 文件：

```
alias ai="vi \
        -c 'call SlimvConnectSwank()' \
        -c 'sleep 1' \
        -c 'call SlimvEval(['0'])' \
        -c 'normal gg=G' \
        -c 'wq' \
        -c 'q!'" 
```

现在 'ai temp.lisp' 自动将 temp.lisp 缩进到 slimv+vim+swank 等标准。

一旦您使用 bash 命令为一个文件执行此操作，就可以通过各种方式编写脚本以自动缩进 lisp 文件的存储库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T08:54:46.633

整个过程是单线程的，所以不需要添加延迟，每个命令在执行下一个命令之前完成。您可以通过以下命令验证 Slimv 的缩进是否负责：

`vi -c "call SlimvConnectSwank()" -c "setlocal indentexpr?" temp.lisp`

它应该打印`indentexpr=SlimvIndent(v:lnum)`。

我怀疑你有一些`temp.lisp`影响缩进的定义。首先必须将这些定义告知 swank 服务器，否则 swank 服务器不知道例如函数参数等。记住：整个过程是动态的，运行时信息用于缩进表格。

所以我认为首先你需要评估整个缓冲区，然后才进行缩进。你可以使用这个命令：

`vi -c "call SlimvConnectSwank()" -c "call SlimvEvalBuffer()" -c "normal gg=G" -c "wq" -c "q!" temp.lisp`

# cordova - 如何在 Android 的 phonegap 中使用 calllog 插件？

> ID：11337990
> 
> 赞同：1
> 
> 时间：2012-07-05T04:51:19.810
> 
> 标签：cordova

我是phonegap的新手。我无法调用phonegap中的插件。我必须获取calllog插件。我已经粘贴了我的代码......

呼叫列表插件

```
public class CallListPlugin extends Plugin {

    /** List Action */
    private static final String ACTION = "list";
    private static final String CONTACT_ACTION = "contact";
    private static final String SHOW_ACTION = "show";
    private static final String TAG = "CallListPlugin";

    /*
     * (non-Javadoc)
     * 
     * @see com.phonegap.api.Plugin#execute(java.lang.String,
     * org.json.JSONArray, java.lang.String)
     */
    @Override
    public PluginResult execute(String action, JSONArray data, String callbackId) {
        Log.d(TAG, "Plugin Called");
        PluginResult result = null;
        if (ACTION.equals(action)) {
            try {
                int limit = -1;

                //obtain date to limit by
                if (!data.isNull(0)) {
                    String d = data.getString(0);
                    Log.d(TAG, "Time period is: " + d);
                    if (d.equals("week"))
                        limit = -7;
                    else if (d.equals("month"))
                        limit = -30;
                    else if (d.equals("all"))
                        limit = -1000000; // LOL
                } 

                //turn this into a date
                Calendar calendar = Calendar.getInstance();
                calendar.setTime(new Date());
                calendar.add(Calendar.DAY_OF_YEAR, limit);
                Date limitDate = calendar.getTime();
                String limiter = String.valueOf(limitDate.getTime());

                //now do required search
                JSONObject callInfo = getCallListing(limiter);
                Log.d(TAG, "Returning " + callInfo.toString());
                result = new PluginResult(Status.OK, callInfo);
            } catch (JSONException jsonEx) {
                Log.d(TAG, "Got JSON Exception " + jsonEx.getMessage());
                result = new PluginResult(Status.JSON_EXCEPTION);
            }
        } else if (SHOW_ACTION.equals(action)) {
            try {
                if (!data.isNull(0)) {
                    viewContact(data.getString(0));
                } 
            } catch (JSONException jsonEx) {
                Log.d(TAG, "Got JSON Exception " + jsonEx.getMessage());
                result = new PluginResult(Status.JSON_EXCEPTION);
            } catch (Exception e) {}
        } else if (CONTACT_ACTION.equals(action)) {
            try {
                String contactInfo = getContactNameFromNumber(data.getString(0));
                Log.d(TAG, "Returning " + contactInfo.toString());
                result = new PluginResult(Status.OK, contactInfo);
            } catch (JSONException jsonEx) {
                Log.d(TAG, "Got JSON Exception " + jsonEx.getMessage());
                result = new PluginResult(Status.JSON_EXCEPTION);
            }
        } else {
            result = new PluginResult(Status.INVALID_ACTION);
            Log.d(TAG, "Invalid action : " + action + " passed");
        }
        return result;
    }

    /**
     * Gets the Directory listing for file, in JSON format
     * 
     * @param file
     *            The file for which we want to do directory listing
     * @return JSONObject representation of directory list. e.g
     *         {"filename":"/sdcard"
     *         ,"isdir":true,"children":[{"filename":"a.txt"
     *         ,"isdir":false},{...}]}
     * @throws JSONException
     */
    private JSONObject getCallListing(String period) throws JSONException {

        JSONObject callLog = new JSONObject();

        String[] strFields = { 
                android.provider.CallLog.Calls.DATE,
                android.provider.CallLog.Calls.NUMBER,
                android.provider.CallLog.Calls.TYPE,
                android.provider.CallLog.Calls.DURATION,
                android.provider.CallLog.Calls.NEW,
                android.provider.CallLog.Calls.CACHED_NAME,
                android.provider.CallLog.Calls.CACHED_NUMBER_TYPE,
                android.provider.CallLog.Calls.CACHED_NUMBER_LABEL };

        try {
            Cursor callLogCursor = ctx.getContentResolver().query(
                    android.provider.CallLog.Calls.CONTENT_URI, 
                    strFields,
                    CallLog.Calls.DATE + ">?",
                    new String[] {period},
                    android.provider.CallLog.Calls.DEFAULT_SORT_ORDER);

            int callCount = callLogCursor.getCount();

            if (callCount > 0) {
                JSONObject callLogItem = new JSONObject();
                JSONArray callLogItems = new JSONArray();

                callLogCursor.moveToFirst();
                do {
                    callLogItem.put("date", callLogCursor.getLong(0));
                    callLogItem.put("number", callLogCursor.getString(1));
                    callLogItem.put("type", callLogCursor.getInt(2));
                    callLogItem.put("duration", callLogCursor.getLong(3));
                    callLogItem.put("new", callLogCursor.getInt(4));
                    callLogItem.put("cachedName", callLogCursor.getString(5));
                    callLogItem.put("cachedNumberType", callLogCursor.getInt(6));
                    //callLogItem.put("name", getContactNameFromNumber(callLogCursor.getString(1))); //grab name too
                    callLogItems.put(callLogItem);
                    callLogItem = new JSONObject(); 
                } while (callLogCursor.moveToNext());
                callLog.put("rows", callLogItems);
                System.out.println("CALLLOG"+callLogItems);
            }

            callLogCursor.close();
        } catch (Exception e) {
            Log.d("CallLog_Plugin",
                    " ERROR : SQL to get cursor: ERROR " + e.getMessage());
        }

        return callLog;
    }

    /**
     * Show contact data based on id
     * @param number
     */
    private void viewContact(String number) {
        Intent i = new Intent(ContactsContract.Intents.SHOW_OR_CREATE_CONTACT, 
                Uri.parse(String.format("tel: %s", number)));
        this.ctx.startActivity(i);
    }

    /**
     * Util method to grab name based on number
     * 
     */
    private String getContactNameFromNumber(String number) {
        // define the columns I want the query to return
        String[] projection = new String[] { Contacts.Phones.DISPLAY_NAME, Contacts.Phones.NUMBER };

        // encode the phone number and build the filter URI
        Uri contactUri = Uri.withAppendedPath(Contacts.Phones.CONTENT_FILTER_URL, Uri.encode(number));

        // query time
        Cursor c = ctx.getContentResolver().query(contactUri, projection, null, null, null);

        // if the query returns 1 or more results
        // return the first result
        if (c.moveToFirst()) {
            String name = c.getString(c.getColumnIndex(Contacts.Phones.DISPLAY_NAME));
            c.deactivate();
            return name;
        }

        // return the original number if no match was found
        return number;
    }
} 
```

资产-calllog.js

```
var CallLog = function() {
};

CallLog.prototype.list = function(params, successCallback, failureCallback) {
    return PhoneGap.exec(successCallback, failureCallback, 'CallListPlugin', 'list',
            [ params ]);
};

CallLog.prototype.contact = function(params, successCallback, failureCallback) {
    return PhoneGap.exec(successCallback, failureCallback, 'CallListPlugin', 'contact',
            [ params ]);
};

CallLog.prototype.show = function(params, successCallback, failureCallback) {
    return PhoneGap.exec(successCallback, failureCallback, 'CallListPlugin', 'show', 
            [ params ]);
}; 
```

索引.html

```
<html>
  <head>
    <meta name="viewport" content="target-densitydpi=low-dpi; user-scalable=no" />
    <title>PhoneGap Events Example</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.0.js"></script> 
     <script type="text/javascript" charset="utf-8" src="Calllog.js"></script>

      <script type="text/javascript" charset="utf-8">

         function onBodyLoad()
         {
         document.addEventListener("deviceready",onDeviceReady,false);
        }

   function onDeviceReady() {    
        console.log("We got device ready");
        window.plugins.CallListPlugin.list();

        }, function() {
            console.log("fail");
        });
    }

    </script>
  </head>
  <body onload="onBodyLoad();">
    <h2>IMEI v1.5</h2>
    IMEI: <span id="imei"></span><br/>

  </body>
</html> 
```

类

```
public class ImeiNumberPhoneGapActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.init(); 
        super.appView.getSettings().setJavaScriptEnabled(true);
        super.appView.addJavascriptInterface(this, "Msgbox");
        super.loadUrl("file:///android_asset/www/index.html");  

    } 
```

插件.xml

```
<plugin>

 <plugin name="CallListPlugin" value="com.gsr.phonegap.CallListPlugin"/>

</plugin> 
```

我正在尝试运行此代码，但在调用插件 nvr 时出现错误。请帮助我解决此问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T06:07:44.727

您忘记像这样在 calllog.js 中加载插件

```
 * Load CallListPlugin
 */
cordova.addConstructor(function() {
    cordova.addPlugin("CallListPlugin", new CallListPlugin());
}); 
```

以及现在您正在使用`Cordova`而不是**Phonegap**。所以像这样 PhoneGap.exec**替换它**`cordova.exec`

所以最后你的**calllog.js**应该是这样的

```
var CallListPlugin = function() {
};

CallListPlugin.prototype.list = function(params, successCallback, failureCallback) {
    return cordova.exec(successCallback, failureCallback, 'CallListPlugin', 'list',
            [ params ]);
};

CallListPlugin.prototype.contact = function(params, successCallback, failureCallback) {
    return cordova.exec(successCallback, failureCallback, 'CallListPlugin', 'contact',
            [ params ]);
};

CallListPlugin.prototype.show = function(params, successCallback, failureCallback) {
    return cordova.exec(successCallback, failureCallback, 'CallListPlugin', 'show', 
            [ params ]);
};

* Load CallListPlugin
*/
cordova.addConstructor(function() {
cordova.addPlugin("CallListPlugin", new CallListPlugin());
}); 
```

# android - 安卓传感器记录工作循环

> ID：11337992
> 
> 赞同：0
> 
> 时间：2012-07-05T04:51:34.923
> 
> 标签：android, logging, sensors

我有一个将传感器数据记录到 SD 卡的应用程序。使用按钮开始/停止记录。对于电池问题，我希望它对其进行修改，以便应用程序继续读取传感器值并记录 X 秒，然后休眠 Y 秒，读取并记录 X 秒，休眠 Y 秒......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:58:42.110

您应使用专为此类需求而设计的[TimerTask 。](http://developer.android.com/reference/java/util/TimerTask.html)[在这里](http://android.okhelp.cz/timer-simple-timertask-java-android-example/)看一个例子。

# spring - 用户在spring应用程序中授权后如何添加自定义过滤器

> ID：11337997
> 
> 赞同：7
> 
> 时间：2012-07-05T04:51:51.970
> 
> 标签：spring, spring-security

我是 Spring Security 3 的新手。我正在使用角色让用户登录。

我想在用户被授权进入应用程序后添加一些会话值。也许我需要一些过滤器，以便它重定向到我添加一些会话值的方法。我已经配置了我的 security.xml 文件，但我不确定我是否在做正确的事情。这个方向的任何例子都会有所帮助。我应该使用哪个过滤器类？我应该如何配置 security.xml 文件？

```
<custom-filter ref="authenticationFilter" after="FORM_LOGIN_FILTER "/>

<beans:bean id="authenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="filterProcessesUrl" value="/j_spring_security_check" />
    <beans:property name="authenticationManager" ref="authenticationManager" />
    <beans:property name="authenticationSuccessHandler" ref="successHandler" />
</beans:bean> 

<beans:bean id="successHandler" class="org.dfci.sparks.datarequest.security.CustomAuthorizationFilter"/> 
```

我的过滤器类方法我需要添加一些会话值。

```
public class CustomAuthorizationFilter implements AuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws IOException, ServletException {
        Set<String> roles = AuthorityUtils.authorityListToSet(authentication
                .getAuthorities());
        if (roles.contains("ROLE_USER")) {
            request.getSession().setAttribute("myVale", "myvalue");
        }
    }
} 
```

**编辑代码**

我修改了我的 security.xml 文件和类文件

```
<custom-filter ref="authenticationFilter" after="FORM_LOGIN_FILTER "/> 
```

```
public class CustomAuthorizationFilter extends GenericFilterBean {

    /*
     * ServletRequestAttributes attr = (ServletRequestAttributes)
     * RequestContextHolder.currentRequestAttributes(); HttpSession
     * session=attr.getRequest().getSession(true);
     */
    @Autowired
    private UserService userService;

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        try {
            chain.doFilter(request, response);

                    HttpServletRequest req = (HttpServletRequest) request;
                    HttpSession session = req.getSession(true);
                    Authentication authentication = SecurityContextHolder
                            .getContext().getAuthentication();
                    Set<String> roles = AuthorityUtils
                            .authorityListToSet(authentication.getAuthorities());
                    User user = null;                   
                        if (true) {
                            session.setAttribute("Flag", "Y");
                        } 
            }

        } catch (IOException ex) {
            throw ex;
        }
    }

} 
```

它调用每个 URL。当用户通过身份验证时，是否只调用一次过滤方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T10:41:59.397

最后我能够解决我的问题。我没有使用过滤器，而是添加了只为成功登录调用的处理程序。

在 security.xml 中添加以下行

```
<form-login login-page="/" authentication-failure-url="/?login_error=1" default-target-url="/" always-use-default-target="false"  
        authentication-success-handler-ref="authenticationSuccessHandler"/>
        <logout />

<beans:bean id="authenticationSuccessHandler" class="security.CustomSuccessHandler"/> 
```

我还添加了一个添加会话属性的自定义处理程序。

```
package security;

import java.io.IOException;
import java.security.GeneralSecurityException;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.security.core.Authentication;
import org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler;

public class CustomSuccessHandler extends
            SavedRequestAwareAuthenticationSuccessHandler {
    @Override
    public void onAuthenticationSuccess(final HttpServletRequest request,
            final HttpServletResponse response, final Authentication authentication)
            throws IOException, ServletException {
        super.onAuthenticationSuccess(request, response, authentication);

        HttpSession session = request.getSession(true);

        try {
            if (CurrentUser.isUserInRole("USER")) {
                session.setAttribute("Flag", "user");
            } 
        } catch (Exception e) {
            logger.error("Error in getting User()", e);
        } 
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T06:51:12.030

您可以使用标准 java 过滤器（我的意思是实现过滤器接口）。只需将它放在 web.xml 中的身份验证过滤器之后（这意味着它将在过滤器链中稍后，并将在安全过滤器链之后调用）。

```
public class CustomFilter implements Filter{

    @Override
    public void destroy() {
        // Do nothing
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res,
            FilterChain chain) throws IOException, ServletException {

            HttpServletRequest request = (HttpServletRequest) req;

            Authentication authentication = SecurityContextHolder.getContext().getAuthentication();

            Set<String> roles = AuthorityUtils.authorityListToSet(authentication.getAuthorities());
            if (roles.contains("ROLE_USER")) {
                request.getSession().setAttribute("myVale", "myvalue");
            }

            chain.doFilter(req, res);

    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {
        // Do nothing
    }

} 
```

web.xml 的片段：

```
<!-- The Spring Security Filter Chain -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<!-- Pay attention to the url-pattern -->
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <!-- <dispatcher>FORWARD</dispatcher>
<dispatcher>REQUEST</dispatcher> -->
</filter-mapping>

<!-- Your filter definition -->
<filter>
    <filter-name>customFilter</filter-name>
    <filter-class>com.yourcompany.test.CustomFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>customFilter</filter-name>
    <url-pattern>/VacationsManager.jsp</url-pattern>
</filter-mapping> 
```

# html - 如何从 html 执行 ruby 代码？

> ID：11337998
> 
> 赞同：-4
> 
> 时间：2012-07-05T04:52:02.277
> 
> 标签：html, ruby

我有一个 ruby​​ 文件，即 sample.rb。我想从我的表单中执行它，实际上我的 ruby​​ 代码在执行时会写入一个 html 文件。所以我需要做的是，当我单击表单中的按钮时，它应该执行 ruby​​ 代码，然后它必须打开在我的表单中的一个框架中执行的 html 文件。有可能吗？如果可能的话！怎么做？

我试过的是

```
<?php
exec("./sample.rb")
?> 
```

但它的作用是。它只是获取了我在 ruby​​ 代码中使用的 api 的 url，并从该 api 返回了 json。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:17:17.840

可能你应该为此使用 Rails [http://rubyonrails.org](http://rubyonrails.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T07:02:24.463

您`sample.rb`作为外部命令调用，就像任何其他 shell 脚本一样。因此，您必须自己捕获和处理其*输出*。

您说“它从 api 返回 JSON”。没关系，你可以提取你感兴趣的数据，例如：

```
<?php
  $json = exec("./sample.rb");
  $data = json_decode($json);
  $url = $data->url; # assuming there is an URL field
?> 
```

现在您可以例如输出一个链接：

```
<a href="<?php echo $url ?>">click</a> 
```

或生成一些 JavaScript：

```
<script>
  window.location.href="<?php echo $url ?>";
</script> 
```

或通过 HTTP 标头重定向用户：

```
<?php
  header("Location: $url");
?> 
```