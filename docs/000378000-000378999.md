# StackOverflow 问答 000378000-000378999

# windows-services - 安装 Windows 服务时，如何以编程方式使其使用特定域帐户

> ID：378030
> 
> 赞同：1
> 
> 时间：2008-12-18T14:38:02.630
> 
> 标签：windows-services, installation, service

我有一个运行良好的 Windows 服务，但我必须让它在一个特殊的用户帐户下运行。

目前我进入服务并将登录更改为部分，但对于部署，这必须更专业地完成。

有没有办法让我以编程方式或在服务安装过程中以自定义用户帐户身份登录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T14:43:18.560

当您打开服务控制管理器（SCM）时，当然，有一个标有登录的选项卡。在那里您可以指定它应该在哪个域或机器帐户下运行...

但是以编程方式。如果您在代码中使用服务安装程序类，则可以在此处指定它。

```
 public class MyServiceInstaller : Installer
    {
        private ServiceInstaller servInst;
        private ServiceProcessInstaller servProcInst;
        public MyServiceInstaller () { InitializeComponent(); }

        #region Component Designer generated code
        private void InitializeComponent()
        {
            servInst = new ServiceInstaller();
            servProcInst = new ServiceProcessInstaller();
            // -----------------------------------------------
            servProcInst.Account = ServiceAccount.LocalSystem; // or whatever accnt you want
            servProcInst.Username = null;  // or, specify a specifc acct here
            servProcInst.Password = null;
            servProcInst.AfterInstall += 
                new InstallEventHandler(this.AfterServProcInstall);
            servInst.ServiceName = "MyService";
            servInst.DisplayName = "Display name for MyService";
            servInst.Description = " Description for my service";
            servInst.StartType = ServiceStartMode.Automatic;
            servInst.AfterInstall += 
               new InstallEventHandler(this.AfterServiceInstall);
            Installers.AddRange(new Installer[] { servProcInst, servInst });
        }
        #endregion
    }
    private void AfterServiceInstall(object sender, InstallEventArgs e) { }
    private void AfterServProcInstall(object sender, InstallEventArgs e) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T14:46:06.263

看一下[CreateService](http://msdn.microsoft.com/en-us/library/ms682450(VS.85).aspx)函数，尤其是`lpServiceStartName`参数。那是“服务应该在其下运行的帐户的名称”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T14:43:44.597

你是怎么安装的？这是一个 .net 服务吗（在这种情况下，我认为您可以在安装程序对象上指定帐户）。

通常，安装程序技术允许您更改凭据（COM 的服务注册可能除外）

如果您正在执行 xcopy 注册，然后在第一次运行时注册，您可以使用 ChangeServiceConfig(..., ServiceName, Password,...) 来修复注册。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-05-24T14:33:37.247

遇到这个，并认为我也会加入一个 Powershell 选项，因为我很方便，它可以帮助某人：

```
$svc = gwmi win32_service -computername <computer name> -filter "name='<name of your service>'"
$inParams = $svc.psbase.getMethodParameters("change")
$inParams["StartName"] = '<domain\username>'
$inParams["StartPassword"] = '<password>'
$null = $svc.invokeMethod("change", $inParams, $null) 
```

# visual-studio - 新的 MFC 功能包控件是否应该出现在 VS 工具箱中

> ID：378038
> 
> 赞同：3
> 
> 时间：2008-12-18T14:41:32.793
> 
> 标签：visual-studio, mfc-feature-pack

我正在尝试使用 VS2008 SP1 在现有 MFC 应用程序上使用一些新的 MFC 功能包控件。对话框编辑器工具箱中不会出现任何新控件。

我是否应该期望它们出现在那儿，如果是这样，人们对如何让它们出现有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T14:50:48.983

不幸的是，没有 IDE 支持新的“NextMFC”控件。暂时也没有加入VS2008的打算，等待VS2010吧！

# sql - 递归sql问题

> ID：378040
> 
> 赞同：7
> 
> 时间：2008-12-18T14:42:21.387
> 
> 标签：sql

我有一个希望通过 SQL 查询解决的问题。这将用作 PoC（概念证明）。

问题：

产品供应由一个或多个产品实例组成，一个产品实例可以属于许多产品供应。这可以在表格中这样实现：

```
PO | PI

-----

A | 10

A | 11

A | 12

B | 10

B | 11

C | 13 
```

现在我想从一组产品实例中取回产品报价。例如，如果我们发送 10、11、13，则预期返回的结果是 B & C，如果我们只发送 10，那么结果应该为 NULL，因为没有产品供应仅由 10 组成。发送 10、11、12将导致 A（不是 A & B，因为 12 本身不是有效的产品报价）。

前提条件：发送的产品实例组合只能产生一种特定的产品组合，因此每个查询只有一个解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T17:13:27.230

好吧，我想我有它。这符合您提供的约束。可能有一种方法可以进一步简化这一点，但它有点吃了我的大脑：

```
select distinct PO 
from POPI x 
where 
  PO not in (
    select PO 
    from POPI 
    where PI not in (10,11,12)
  ) 
  and PI not in (
    select PI 
    from POPI 
    where PO != x.PO 
      and PO not in (
        select PO 
        from POPI 
        where PI not in (10,11,12)
      )
  ); 
```

这只会产生填充给定集合的结果，这些结果与所有其他结果不相交，我**认为**这是您所要求的。对于给出的测试示例：

*   提供 10,11,12 收益率 A
*   提供 10,11,13 产量 B,C

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T16:10:51.443

**编辑：**虽然我认为我的工作正常，但亚当的回答无疑更优雅、更有效——我将把我的留给后代！

抱歉，因为我知道自从我开始玩以来这已被标记为 Oracle 问题。这是一些我认为适用于所有上述情况的 SQL2008 代码......

```
declare @test table
(
    [PI] int
)
insert @test values (10), (11), (13)

declare @testCount int
select @testCount = COUNT(*) from @test

;with PO_WITH_COUNTS as 
(
        select  PO_FULL.PO, COUNT(PO_FULL.[PI]) PI_Count
        from    ProductOffering PO_FULL
        left
        join    (
                select  PO_QUALIFYING.PO, PO_QUALIFYING.[PI]
                from    ProductOffering PO_QUALIFYING
                where   PO_QUALIFYING.[PI] in (select [PI] from @test)
                ) AS QUALIFYING
                on      QUALIFYING.PO = PO_FULL.PO
                and     QUALIFYING.[PI] = PO_FULL.[PI]
        group by
                PO_FULL.PO
        having  COUNT(PO_FULL.[PI]) = COUNT(QUALIFYING.[PI])
)
select  PO_OUTER.PO
from    PO_WITH_COUNTS PO_OUTER 
cross 
join    PO_WITH_COUNTS PO_INNER
where   PO_OUTER.PI_Count = @testCount
or      PO_OUTER.PO <> PO_INNER.PO
group by
        PO_OUTER.PO, PO_OUTER.PI_Count
having  PO_OUTER.PI_Count = @testCount 
or      PO_OUTER.PI_Count + SUM(PO_INNER.PI_Count) = @testCount 
```

不确定 Oracle 是否有 CTE，但可以将内部查询声明为两个派生表。外部查询中的交叉连接让我们可以找到包含所有有效项目的产品组合。我知道这只会根据问题中的陈述起作用，即数据使得每个请求的集合只有 1 个有效组合，否则它会更加复杂，因为计数不足以删除具有重复产品的组合他们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T14:51:33.427

我面前没有数据库，但是在我的脑海中，您想要输入列表中没有任何 PI 的 PO 列表，即

```
select distinct po 
from tbl 
where po not in ( select po from tbl where pi not in (10,11,13) ) 
```

编辑：以下是其他情况的示例：
当输入 PI = 10,11,13 时，内部选择返回 A，因此外部选择返回 B，C
当输入 PI = 10 时，内部选择返回 A，B，C，因此外部选择返回无
行当输入 PI = 10,11,12 时，内部选择返回 C，因此外部选择返回 A,B

编辑：亚当指出，最后一种情况不符合只返回 A 的要求（这会教我急于求成），所以这还不是工作代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T15:18:23.843

```
 Select Distinct PO
   From Table T
   -- Next eliminates POs that contain other PIs
   Where Not Exists 
       (Select * From Table 
        Where PO = T.PO
            And PI Not In (10, 11, 12))
     -- And this eliminates POs that do not contain all the PIs
     And Not Exists 
        (Select Distinct PI From Table  
         Where PI In (10, 11, 12)
           Except 
         Select Distinct PI From Table  
         Where PO = T.PO 
```

或者，如果您的数据库没有实现 EXCEPT...

```
 Select Distinct PO
   From Table T
   -- Next predicate eliminates POs that contain other PIs
   Where Not Exists 
       (Select * From Table 
        Where PO = T.PO
            And PI Not In (10, 11, 12))
     -- And this eliminates POs that do not contain ALL the PIs
     And Not Exists 
         (Select Distinct PI From Table A
          Where PI In (10, 11, 12)
             And Not Exists
                 (Select Distinct PI From Table 
                  Where PO = T.PO 
                     And PdI = A.PI)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T23:19:39.470

客户是否有可能多次要求产品？

例如：他/她要求提供 10、10、11、11、12？

如果这比解决方案可行

select ... from ... where pi in (10,10,11,11,12)

不管用。

因为 'pi in (10,10,11,11,12)' 与 'pi in (10,11,12)' 相同。

10,10,11,11,12 的解决方案是 A&B。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T14:52:43.753

好吧，这里是我脑海中的一些伪代码：

从 PI = 10 或 pi =11 等的表中选择

将结果存储在临时表中

从临时表中选择不同的 PO 和 count(PI)。

现在，对于每个 PO，您可以获得全部可用的 PI 产品。如果可用 PI 的数量与临时表中的计数匹配，则意味着您拥有该 PO 的所有 PI。添加所有的采购订单，你就拥有了你的结果集。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T15:41:10.787

您将需要对列表中的项目进行计数，即@list_count。找出哪些产品具有不在列表中的实例。选择所有不在*该*列表中并且在列表*中*有实例的产品：

```
select P0,count(*) c from table where P0 not in (
select P0 from table where P1 not in (@list)
) and P1 in (@list) group by P0 
```

我会将其存储在临时表中并选择 * 记录其中 c = @list_count

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T17:01:44.180

如果我们重新定义一个问题：

让我们有一个包含产品实例的客户表：

```
crete table cust_pi (
pi varchar(5),
customer varchar(5)); 
```

还有一个“product_catalogue”表：

```
CREATE TABLE PI_PO_TEST
   ("PO" VARCHAR2(5 CHAR),
   "PI" VARCHAR2(5 CHAR)
           ); 
```

让我们用一些示例数据填充它：

```
insert into CUST_PI (PI, CUSTOMER)
values ('11', '1');
insert into CUST_PI (PI, CUSTOMER)
values ('10', '1');
insert into CUST_PI (PI, CUSTOMER)
values ('12', '1');
insert into CUST_PI (PI, CUSTOMER)
values ('13', '1');
insert into CUST_PI (PI, CUSTOMER)
values ('14', '1');
insert into PI_PO_TEST (PO, PI)
values ('A', '10');
insert into PI_PO_TEST (PO, PI)
values ('A', '11');
insert into PI_PO_TEST (PO, PI)
values ('A', '12');
insert into PI_PO_TEST (PO, PI)
values ('A', '13');
insert into PI_PO_TEST (PO, PI)
values ('B', '14');
insert into PI_PO_TEST (PO, PI)
values ('C', '11');
insert into PI_PO_TEST (PO, PI)
values ('C', '12');
insert into PI_PO_TEST (PO, PI)
values ('D', '15');
insert into PI_PO_TEST (PO, PI)
values ('D', '14'); 
```

那么我的第一个拍摄方案是这样的：

```
select po1 po /* select all product offerings that match the product definition 
                (i.e. have the same number of product instances per offering as 
                in product catalogue */
  from (select po po1, count(c.pi) k1
          from cust_pi c, pi_po_test t
         where c.pi = t.pi
           and customer = 1
         group by po) t1,
       (select po po2, count(*) k2 from pi_po_test group by po) t2
 where k1 = k2
   and po1 = po2
minus /* add those, that are contained within others */
select slave
  from (select po2 master, po1 slave
  /* this query returns, that if you have po "master" slave should be removed from result, 
     as it is contained within*/
          from (select t1.po po1, t2.po po2, count(t1.po) k1
                  from pi_po_test t1, pi_po_test t2
                 where t1.pi = t2.pi
                 group by t1.po, t2.po) t1,
               (select po, count(po) k2 from pi_po_test group by po) t2
         where t1.po2 = t2.po
           and k1 < k2)
 where master in
 /* repeated query from begining. This could be done better :-) */
       (select po1 po
          from (select po po1, count(c.pi) k1
                  from cust_pi c, pi_po_test t
                 where c.pi = t.pi
                   and customer = 1
                 group by po) t1,
               (select po po2, count(*) k2 from pi_po_test group by po) t2
         where k1 = k2
           and po1 = po2) 
```

所有这些都是在 Oracle 上完成的，因此您的里程可能会有所不同

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T18:10:33.650

我在 4 组值下对此进行了测试，它们都返回了正确的结果。这使用了我在 SQL 中使用的一个函数，它从以分号分隔的参数字符串生成一个表。

```
DECLARE @tbl TABLE (
    po varchar(10),
    pii int)

INSERT INTO @tbl
SELECT 'A', 10
UNION ALL
SELECT 'A', 11
UNION ALL
SELECT 'A', 12
UNION ALL
SELECT 'B', 10
UNION ALL
SELECT 'B', 11
UNION ALL
SELECT 'C', 13

DECLARE @value varchar(100)
SET @value = '10;11;12;'
--SET @value = '11;10;'
--SET @value = '13;'
--SET @value = '10;'

SELECT DISTINCT po
FROM @tbl a
INNER JOIN fMultiValParam (@value) p ON
a.pii = p.paramid
WHERE a.po NOT IN (
    SELECT t.po
    FROM @tbl t
    LEFT OUTER JOIN (SELECT *
            FROM @tbl tt
            INNER JOIN fMultiValParam (@value) p ON
            tt.pii = p.paramid) tt ON
    t.pii = tt.pii
    AND t.po = tt.po
    WHERE tt.po IS NULL) 
```

这是功能

```
CREATE    FUNCTION [dbo].[fMultiValParam]
(@Param varchar(5000))
RETURNS @tblParam TABLE (ParamID varchar(40))
AS
BEGIN

IF (@Param IS NULL OR LEN(@Param) < 2)
BEGIN
    RETURN
END

DECLARE @len INT
DECLARE @index INT
DECLARE @nextindex INT

SET @len = DATALENGTH(@Param)
SET @index = 0
SET @nextindex = 0

WHILE (@index < @len)
BEGIN
    SET @Nextindex = CHARINDEX(';', @Param, @index)

    INSERT INTO @tblParam
    SELECT SUBSTRING(@Param, @index, @nextindex - @index)

    SET @index = @nextindex + 1

END
RETURN
END 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T21:59:35.297

试试这个：

```
SELECT DISTINCT COALESCE ( offer, NULL )
FROM products
WHERE instance IN ( @instancelist ) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-12-18T15:07:09.263

恕我直言，如果没有一些存储过程代码，纯 SQL 是不可能的。但是……我不确定。

**补充：**另一方面，我对递归查询有了一个想法（在 MSSQL 2005 中有这样一个东西，它允许您使用它自己的结果加入查询，直到没有更多的行返回）这可能“收集" 通过将上一步的结果与所有产品交叉连接，然后过滤掉无效组合，得到正确答案。但是，您将获得有效组合的所有排列，并且几乎没有效率。而且这个想法很模糊，所以我不能保证它实际上可以实现。

# windows - 未在 MFC ActiveX 复合控件中获取所有 Windows 消息

> ID：378057
> 
> 赞同：0
> 
> 时间：2008-12-18T14:46:01.567
> 
> 标签：windows, mfc, activex, messages

我有一个复合控件，其声明如下：

```
 class ATL_NO_VTABLE CFooCtrl : 

               public CComObjectRootEx<CComSingleThreadModel>,
               public IDispatchImpl<CFooCtrl, &IID_IFooCtrl, &LIBID_FooLib>,
               public CComCompositeControl<CFooCtrl>,
               public IPersistStreamInitImpl<CFooCtrl>,
               public IOleControlImpl<CFooCtrl>,
               public IOleObjectImpl<CFooCtrl>,
               public IOleInPlaceActiveObjectImpl<CFooCtrl>,
               public IViewObjectExImpl<CFooCtrl>,
               public IOleInPlaceObjectWindowlessImpl<CFooCtrl>,
               public IConnectionPointContainerImpl<CFooCtrl>,
               public IPersistStorageImpl<CFooCtrl>,
               public ISpecifyPropertyPagesImpl<CFooCtrl>,
               public IQuickActivateImpl<CFooCtrl>,
               public IDataObjectImpl<CFooCtrl>,
               public IProvideClassInfo2Impl<&CLSID_FooCtrl, &DIID__IFooCtrlEvents, &LIBID_FooCtrlLib>,
               public IPropertyNotifySinkCP<CFooCtrl>,
               public CComCoClass<CFooCtrl, &CLSID_FooCtrl>,
               public CProxy_IFooCtrlEvents<CFooCtrl>,
            {

        ...

       BEGIN_MSG_MAP(CFooCtrl)
          CHAIN_MSG_MAP(CComCompositeControl< CFooCtrl >)
          DEFAULT_REFLECTION_HANDLER()
          MESSAGE_HANDLER(WM_TIMER, OnTimer)
          MESSAGE_HANDLER(WM_ERASEBKGND, OnEraseBkgnd)
          MESSAGE_HANDLER(WM_KEYDOWN, OnKeyDown)
          MESSAGE_HANDLER(WM_KEYUP, OnKeyUp)
          MESSAGE_HANDLER(WM_LBUTTONDBLCLK, OnLButtonDblClk)
          MESSAGE_HANDLER(WM_LBUTTONDOWN, OnLButtonDown)
          MESSAGE_HANDLER(WM_LBUTTONUP, OnLButtonUP)
          MESSAGE_HANDLER(WM_PAINT, OnPaint)
          MESSAGE_HANDLER(WM_RBUTTONDBLCLK, OnRButtonDblClk)
          MESSAGE_HANDLER(WM_RBUTTONDOWN, OnRButtonDown)
          MESSAGE_HANDLER(WM_RBUTTONUP, OnRButtonUp)
          MESSAGE_HANDLER(WM_MOUSEMOVE, OnMouseMove)
          MESSAGE_HANDLER(WM_MOUSEWHEEL, OnMouseWheel)
          MESSAGE_HANDLER(WM_SIZE, OnSize)
          MESSAGE_HANDLER(WM_INITDIALOG, OnInitDialog)
          MESSAGE_HANDLER(WM_DESTROY, OnDestroy)
      END_MSG_MAP()

   LRESULT OnTimer(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnEraseBkgnd(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnKeyDown(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnKeyUp(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnLButtonDblClk(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnLButtonDown(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnLButtonUP(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnPaint(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled); 
   LRESULT OnRButtonDblClk(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnRButtonDown(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnRButtonUp(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnMouseMove(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnMouseWheel(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnSize(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnInitDialog(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled);
   LRESULT OnDestroy(UINT uMsg, WPARAM wParam, LPARAM lParam, BOOL& bHandled); 
```

我得到像 OnMouseMove、OnLButtonDown/Up/DblClk 这样的事件，但我没有得到像 KeyUp、KeyDown 或 MouseWheel 这样的事件。

一切似乎都被正确定义了。我已经搬家了

```
 CHAIN_MSG_MAP(CComCompositeControl< CFooCtrl >)
      DEFAULT_REFLECTION_HANDLER() 
```

到最后的Message Map 并没有什么区别。我发现当我删除 Reflection_handler() 时，我不会在 KeyDown 上发生崩溃，但我怀疑这些来自驱动控件的 Python 程序。

我唯一可以假设的是链接的 msg 映射正在吃这些事件，但是没有应该对它们感兴趣的父控件。

任何人都知道为什么我收到一些消息而不是其他消息？有什么重新获得这些信息的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-21T06:26:15.377

我相信您的代码使用的是 ATL 而不是 MFC。

复合控件上的键盘处理通过 IOleInPlaceActiveObject 进行。ATL 中的基本实现将在您的类上调用您的 PreTranslateMessage（如果已实现），您可以在该消息进入 TranslateMessage 之前对其进行破解。

ATL 复合控件是一个控件容器（它是一个可以承载其他 activex 控件的子对话框）。有关详细信息，请参阅[http://www.microsoft.com/msj/1299/containment/containment.aspx中的“键盘处理”部分](http://www.microsoft.com/msj/1299/containment/containment.aspx)

# java - Spring MVC 表单支持对象树初始化的最佳实践

> ID：378066
> 
> 赞同：7
> 
> 时间：2008-12-18T14:50:03.900
> 
> 标签：java, spring, spring-mvc

如果我有一个具有复杂对象树的表单支持对象——比如说一个人，它有一个联系信息对象，一个地址对象有一堆字符串——似乎该对象需要用组件完全填充对象之前我可以绑定到它。因此，如果我要创建一个新的 Person，我需要确保它已经填充了所有组件对象，如果我要从数据库中检索一个 Person，我需要确保所有不是从数据库中填充的对象填充为空对象。

当然，第一个问题——我的上述假设是否正确？似乎如果我尝试绑定到 person.contactInfo.homeAddress.street 并且没有 ContactInfo，我会得到一个空指针异常。

其次，初始化我的对象的最佳方法是什么。我可以想到几种方法。一种是在声明时初始化所有成员对象：

```
public class Person {
     String name;
     ContactInfo contactInfo = new ContactInfo();
     //getters, setters, etc.
}

public class ContactInfo {
     String phone;
     Address homeAddress = new Address();
} 
```

等等。

另一种方法是拥有一个初始化所有内容的 PersonFactory（或拥有一个初始化所有内容的工厂方法 Person.getInstance）。

在从数据库中检索人员的情况下，第一种方法将解决问题（即，如果此特定人员在数据库中没有地址，则该对象仍然有一个地址），但这意味着创建每个对象两次。不知道如何处理这个问题，除了让 DAO 显式填充所有内容，即使没有从数据库中检索到任何内容。或者给工厂一种方法来遍历对象并“填充”任何缺少的东西。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-23T17:25:41.863

如果您愿意，可以称其为矫枉过正，但我​​们实际上最终做的是创建一个通用工厂，它将获取任何对象并使用反射（递归）查找所有空属性并实例化正确类型的对象。我使用 Apache Commons BeanUtils 做到了这一点。

通过这种方式，您可以获取可能从各种来源（DAO、XML 反序列化等）获得的对象，将其传递给该工厂，并将其用作表单支持对象，而不必担心绑定所需的东西可能为空。

诚然，这意味着实例化给定表单可能不需要的属性，但在我们的例子中通常并不适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T21:17:10.263

我通常会确保对象已完全初始化 - 它使使用对象更加简单，并避免您在整个代码中分散空检查。

在您在这里给出的情况下，我可能会将初始化放在 getter 中，因此子对象仅在实际使用时才被实例化，即：当 getter 被调用时，只有当它为 null 时才被实例化。

在从具有一对一关系的数据库加载方面，我通常会进行连接并加载很多内容。性能影响通常很小，但您应该知道可能存在影响。

当涉及到一对多关系时，我通常会选择延迟加载。Hibernate 会为您解决这个问题，但如果您自己滚动，那么您只需要一个 List 的自定义实现，它在调用与其内容相关的任何方法时调用适当的 DAO。

这种具有一对多关系的行为的一个例外是，当您有一个要迭代的父对象列表以及每个要迭代其子对象的父对象时。显然，性能会很糟糕，因为当您实际上可以通过 2 次调用来完成时，您会对数据库进行 + 1 次调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T21:16:34.320

我猜你在谈论类似的东西 `< form:input path="person.contactInfo.homeAddress.street"/>`？我不清楚，但假设我是对的:)：

1）是的，当你写的时候`person.contactInfo.homeAddress.street` ，读`person.getContactInfo().getHomeAddress().getStreet()`。如果 ContactInfo 或 HomeAddress 或 Street 对象为 null，则调用其中一种方法会引发 NullPointException。

2）我通常在声明时初始化成员对象，就像在代码片段中一样。如果初始化值是无条件的，则看不到工厂类完成这项工作的好处。我没有清楚地看到您被迫两次创建 Person 的问题……但我可能累了；）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T21:47:09.953

我已经采用了工厂方法方法（不喜欢为它使用单独的类，对我来说，将它放在静态方法中更有意义，所以它都在一个地方）。我有类似的东西 -

```
public static Person getInstanceForContactInfoForm() {
      ContactInfo contactInfo = ContactInfo.getInstanceForContactInfoForm();

      Person person = new Person(contactInfo);
      // set whatever other properties you need for Person
      // just enough to 1-render the form and 2-avoid any exceptions
      return person;
} 
```

如果我从数据库中加载 Person，我在 Person 类中有一个名为“initializeForContactInfoForm”之类的方法。从数据库加载 Person 后，我将在返回 Form Backing Object 的 Spring MVC 方法调用的方法中调用 Service 层中的此方法。

我不认为这是一个真正的惯例，这只是我自己制定的一种方法。我真的不知道有什么缺点，所以如果有人不同意，请告诉我......

# wcf - 生成的架构中的 WCF 和可为空的属性

> ID：378067
> 
> 赞同：0
> 
> 时间：2008-12-18T14:50:11.433
> 
> 标签：wcf

我正在尝试进行一些合同优先开发，并且已经设计了一个元素具有`minoccurs=0`和`nullable=false`. 但是，我无法制作生成此**xsd的***DataContract*或*XmlSerializer*。

 **我有一个想法，这是不可能的。

我发现的唯一解决方案是一个丑陋的解决方案，请参见[此处](http://www.theserverside.net/tt/articles/content/DesignServiceContracts/DesignServiceContracts.html)。

在这个解决方案中，我必须实现*IXmlSerializable*并自己进行 shema 和序列化。所以我必须同时维护模式和 C# 类 -> 丑陋

有没有人找到解决方案或从 Microsoft 听说这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-19T16:36:07.253

据我所知，如果正确填充了对象，两者`XmlSerialiser`都会`DataContractSerializer`生成尊重模式的对象，但如果未填充所需的值，则生成的 xml 将不会再次验证模式。

您可以尝试使用[XsdObjectGenerator](http://www.windevpowertools.com/tools/106)。

# command-line - 哪种方式与 SourceSafe 交互更快？命令行还是对象模型？

> ID：378073
> 
> 赞同：3
> 
> 时间：2008-12-18T14:51:17.297
> 
> 标签：command-line, build-automation, visual-sourcesafe, object-model

我们的项目保存在 SourceSafe 数据库中。我们有一个自动构建，它每天晚上在专用的构建机器上运行。作为我们构建过程的一部分，我们从 SourceSafe 获取安装的源和相关数据。这可能需要相当长的时间，并且构成了构建过程的大部分（否则由安装文件的创建主导）。

目前，我们使用命令行工具 ,`ss.exe`与 SourceSafe 进行交互。我们使用的命令用于递归获取项目源和数据、检出版本文件、检入更新的版本文件和标记。但是，我知道 SourceSafe 也支持对象模型。

*   有人对这个对象模型有任何经验吗？
*   与使用在我们的流程中可能有用的命令行工具相比，它是否提供了任何优势？
*   有什么缺点吗？
*   我们会通过在命令行上使用对象模型获得任何性能提升吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T15:27:55.507

我应该想象命令行是在内部使用与您在对象模型中找到的相同代码实现的，因此除非需要大量启动，否则它应该不会有太大区别。

重写以使用对象模型的成本可能比让它保持原样所节省的成本要多。除非您对所花费的时间有明确的问题，否则我怀疑这对您来说是一个很大的解决方案。

您可以调查影子目录，以便始终提供最新版本，因此您不必每次都执行“getlatest”，并且可以确保您正在与本地 VSS 对话（因为所有命令都直接在文件系统，因此 WAN 操作非常昂贵）。

否则，除非您想使用不同的 SCM（我推荐 SVN - codeplex 上有一个[出色的转换器](http://www.codeplex.com/VSS2SVN)可用，示例代码显示如何使用 VSS 和 SVN 对象模型），否则您会被卡住

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:13:25.647

此后，我们将源代码控制升级到了 Team Foundation Server。当我们使用 VSS 时，我在 CruiseControl.Net 构建日志中注意到了同样的事情（警告：我从未研究过 CC 使用什么；我假设是命令行）。

根据我的经验，我会说问题出在 VSS 上。我们的 TFS 位于 1000 多英里之外，并且比服务器被大约 6 英尺长的以太网电缆隔开时的速度更快。

编辑：戴上我的商务帽子，如果您将等待构建所花费的时间加上尝试加速构建所花费的时间可能足以保证升级或另一篇文章中提到的 VSS 附加组件（已经 +1它）。我不会花费您太多时间在 VSS 上构建解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T15:23:31.430

VSS 使用挂载的文件系统来共享数据库。当您从 SourceSafe 获取文件时，它在文件系统级别工作，这意味着它不仅向您发送文件，而是向您发送磁盘的所有块以查找文件和文件。这增加了更多的交易和额外的数据。

当通过远程或慢速连接或大型项目使用 VSS 时，它几乎无法使用。

有一种产品在网络上使用时**可将 VSS 的速度提高约 12 倍**。它通过实现客户端服务器协议来做到这一点。这还可以被加密，这在通过 Internet 使用 VSS 时很有用。

我不工作或与他们有任何联系，我只是在以前的公司使用过。

请参阅 www.sourcegear.com 上的 SourceOffSite。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T16:29:22.107

在回答您的问题中似乎有任何实质内容的唯一部分 - 切换到对象模型不会更快，因为“缓慢”来自用于在 VSS 和数据库之间共享文件的协议 - 请参阅我的其他答案。

我提到的产品与 VSS 一起工作以解决您遇到的问题。你仍然使用 VSS 和 ahev 来获得使用它的许可证……它只是在你需要的地方加速它。

不知道你为什么标记我？！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T18:32:59.813

我打赌运行对象模型会慢至少 2 小时.... ;-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T18:50:41.807

命令行工具是如何使用的？您不是偶然每个文件调用一次该工具吗？

听起来不像（'recursive get' 几乎暗示你不是），但我想我会把这个想法扔进去。其他人可能会遇到与你类似的问题，这在源代码控制系统中似乎非常普遍。

一个客户端的 ClearCase 表现得像一条完整的狗，因为客户端的后端脚本就是这样做的。每个命令行调用都会创建一个连接、验证用户身份、获取文件并关闭连接。数万次。哦，命令行界面和一点 Perl 的危险。

使用 API，您很可能在操作之间正确地保持会话打开。

# interface - Jitterbit 与 BizTalk

> ID：378088
> 
> 赞同：7
> 
> 时间：2008-12-18T15:00:16.780
> 
> 标签：interface, biztalk, jitterbit

有没有人使用过或研究过 Jitterbit 以及 BizTalk？如果是这样，每种方法的优缺点是什么，您选择哪一种作为最终解决方案？

具体来说，我正在寻找 SAP 集成，但任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-23T07:12:03.847

和 Rob 一样，在阅读您的问题之前我还没有听说过 JitterBit（谢谢！），然而，在过去的 9 年里，我几乎一直在使用 BizTalk；出于这个原因，我不确定我是否应该做出回应，但正如 Rob 所做的那样，其他人都没有，我认为它值几美分......

从我所做的少量阅读来看，在我看来，JitterBit 除了是一个有优点和缺点的开源之外，还试图通过提供一个相对简单的解决方案来降低进入门槛，并承诺快速开发和拖拽-n-drop 方法“没有自定义代码”。

我会从表面上接受他们的承诺，因为我对此一无所知，尽管我有疑问，所以让我们假设使用 JitterBit 进行开发非常容易，我可以明确说明一件事 - 使用 BizTalk 进行开发不是。

但是，这有点，但在我看来，使用 BizTalk 进行开发有些困难，不是因为微软在这方面做得不好，相反 - 使用 BizTalk 开发有些困难，因为微软希望创建一个可以实际允许企业很好地解决了他们的 BPM 和集成需求，而且根据我的经验，这些问题几乎从来都不是简单的，因此微软构建了一个具有许多功能、非常强大且非常灵活的服务器，但代价是复杂性。

因此，虽然任何有经验的技术销售人员都可以为您演示一个非常简单的集成场景，并且使用大量拖放和配置在几分钟内开发，即使在 BizTalk 中也是如此，但这是一个现实的企业吗？水平解决方案？这是一个真实的场景吗？根据我的经验，答案几乎完全是否定的；这些问题往往很复杂，需要更强大的解决方案。

所以，我想底线是——如果你正在寻找一个一次性的解决方案，并且开源是你们一起工作的东西——JitterBit 绝对值得一看，看看它是否能够提供帮助，并且确实，学习曲线短（关注维护、监控、故障排除、实例管理等很重要）

但是，如果您相信（通常情况下）您的解决方案将发展成为您组织中的 BPM/集成平台，并且您需要更强大的东西 - 我会把钱放在 BizTalk 上，使其成为更好的候选人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-22T21:52:15.133

从旧的 SAP DCOM 连接器开始，我已经与 SAP 进行了相当多的集成。最近，我参与了在企业服务总线模式中服务的集成平台的选择。

我们制作了 Web 服务示例以在多个平台上连接到 SAP，包括 BizTalk、Mule、Netweaver、Webmethods 和 Tibco。尽管 BizTalk 和 Netweaver 都获得了很高的分数，但 Webmethods 在许可和能力方面胜出。

Jitterbit 不是评估的一部分——事实上，我必须查一下以确保我理解了你的问题。

如果您的目标只是能够调用 RFC，那么 .NET SAP 连接器可以很好地工作。

如果您的目标是公开 Web 服务以包装 SAP 中的流程，那么 BizTalk 很好，但我建议您查看您的组织是否已经获得了 netweaver 许可，因为有许多无需编码即可直接从 SAP 获得的 Web 服务。

我的建议是暂时避免在企业中使用 Jitterbug 和 Mule - 除非开源在您的工作场所实际上很受欢迎。Netweaver 和 BizTalk 是非常强大、完善的产品。

如果您正在寻找可以轻松发货的东西，那么 Jitterbug 可能更有意义。虽然通常我建议您将其定义为 Web 服务调用，并从您的客户技术堆栈中寻找最合适的集成技术。

您希望实现的目标的更多背景信息将有助于获得更准确的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-02T20:51:22.023

迈克尔，

我们在我们的组织中使用 Jitterbit，我们在各种项目中都非常成功。我们的 SAP 项目使用 XI，而 Jitterbit 极大地简化了将 Web 服务接口与其支持的各种协议集成的能力。

除了优惠的价格（我们现在订阅 Jitterbit 以获得支持）外，我们还从支持服务中实现了巨大的价值。如果我们在实施过程中有任何问题，他们似乎提供了包含在支持成本中的所有主题专业知识，因此我们完全可以自给自足。

我们公司还有很多其他的集成解决方案，包括VB和Java程序；这是一团糟，但我们不相信任何一个平台都能满足我们所有不同部门的需求。多年来，我们一直在使用开源，特别是 Linux 和 Apache，尽管 IBM 和微软在这里也很流行。

我们选择了 Jitterbit，因为它支持集成任何现代系统所需的协议，并且 SOA / Web 服务是我们明确的方向，Jitterbit 非常适合我们的需求。

鉴于 Jitterbit 是开源的，我鼓励您下载并试用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-10T19:17:23.083

我会简单地说，我一直在使用 biztalk，并且是帮助验证 2006 年培训课程的人之一。Biztalk 是目前可用的业务流程的最佳服务器应用程序之一。您还必须考虑到与其他产品相比，价格点低得离谱。

# delphi - 如何在 Delphi 2007 应用程序中显示 Crystal XI 报告？

> ID：378089
> 
> 赞同：4
> 
> 时间：2008-12-18T15:00:32.990
> 
> 标签：delphi, crystal-reports

Delphi 的最新 Crystal XI 组件是为 Delphi 7 发布的。该 VCL 组件在 D2007 中编译，但在运行时给我错误。在 Delphi 2007 应用程序中显示连接数据库的 Crystal Report 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T15:03:44.043

这是我使用 ActiveX 找到的解决方案：

首先，像这样注册 Active X 控件：

在 Delphi 中，选择组件 -> 导入组件

点击“类型库”，点击下一步

选择“Crystal ActiveX Report Viewer Library 11.5”

选择您想要的任何调色板页面（我选择了“数据访问”）

选择导入位置

退出向导

将您选择的位置添加到项目搜索路径中

现在这段代码应该可以工作了：

```
...
uses
  CrystalActiveXReportViewerLib11_5_TLB, OleAuto;
...

procedure TForm1.Button1Click(Sender: TObject);
var
  cry : TCrystalActiveXReportViewer;
  oRpt, oApp : variant;
  i : integer;
  frm : TForm;
begin
  cry := TCrystalActiveXReportViewer.Create(Self);
  oApp := CreateOleObject('CrystalRuntime.Application');
  oRpt := oApp.OpenReport('c:\my_report.rpt',1);
  for i := 1 to oRpt.Database.Tables.Count do begin
    oRpt.Database.Tables[i].ConnectionProperties.Item['User ID'] := 'username';
    oRpt.Database.Tables[i].ConnectionProperties.Item['Password'] := 'password';
  end;

  frm := TForm.Create(Self);
  try
    cry.Parent := frm;
    cry.Align := alClient;
    cry.ReportSource := oRpt;
    cry.ViewReport;
    frm.Position := poOwnerFormCenter;
    frm.ShowModal;
  finally
    FreeAndNil(frm);
  end;  //try-finally
end;

procedure TForm1.btnExportClick(Sender: TObject);
var
  cry : TCrystalActiveXReportViewer;
  oRpt, oApp : variant;
  i : integer;
begin
  //Export the report to a file
  cry := TCrystalActiveXReportViewer.Create(Self);
  oApp := CreateOleObject('CrystalRuntime.Application');
  oRpt := oApp.OpenReport(c_DBRpt,1);
  for i := 1 to oRpt.Database.Tables.Count do begin
    oRpt.Database.Tables[i].ConnectionProperties.Item['User ID'] := 'username';
    oRpt.Database.Tables[i].ConnectionProperties.Item['Password'] := 'password';
  end;

  oRpt.ExportOptions.FormatType := 29;  //excel 8
  oRpt.ExportOptions.DiskFileName := 'c:\output.xls';
  oRpt.ExportOptions.DestinationType := 1;  //file destination
  //Export(False) => do NOT prompt.
  //Export(True) will give runtime prompts for export options.
  oRpt.Export(False);
end; 
```

如果您使用这种方法，那么[这个（相当密集的）引用](http://help.sap.com/businessobject/product_guides/crxi/en/crXI_Techref_en.pdf)将很有帮助，特别是因为 Intellisense 不适用于此类 Ole 对象。

编辑：参考的原始链接坏了，所以我把它改成指向一个新的（从 2009 年 12 月 15 日起有效）。如果那个新的坏了，那么[谷歌应该能够找到它](http://www.google.com/search?q=crystal+reports+xi+technical+reference)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T17:20:09.120

我知道这不是你的问题，在你的情况下它可能根本不是一个可以接受的答案，但我发现 FastReports 显然优于 Crystal 就我的目的而言。它重量更轻，包含真正的脚本语言，包含事件处理，可以调用您的本机代码以获取信息和更新，并且不需要 ActiveX 连接。我可以将我的报告导出为外观清晰的 PDF 文件或 Excel 电子表格和其他几种格式。输出的质量增加了用户从我的应用程序中获得的整体体验。我可以继续，但如果它对你来说是题外话，那将无济于事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-23T15:23:59.220

为了其他可以使用它的人，这里有一个完整的类，它为这些邪恶的 Crystal 交互提供了一个愉快的包装。它在大约 80% 的时间里对我有用，但我怀疑很多这些东西都非常依赖于它运行的特定平台。我会在制作时发布改进。

Business Objects 的某个人应该认真研究一下这个 API。它很糟糕。

```
{
Class to facilitate the display of Crystal 11 Reports.

The Crystal 11 VCL component does not seem to work with Delphi 2007.
As a result, we have to use ActiveX objects, which make deployment messy.

This class is similar to CrystalReporter, but it works for Crystal 11.
However, it lacks some of the features of the old CrystalReporter.

Refer to the crystal reports activex technical reference to duplicate the
missing functionality.

Example usage is at the bottom of this unit.
//}
unit CrystalReporter11;

interface

uses
  CrystalActiveXReportViewerLib11_5_TLB, OleAuto, Classes, Controls;

type
  TCryExportFormat = (
                      XLS
                     ,PDF
                     );

type
  TCrystalReporter11 = class
  private
    FCryRpt : TCrystalActiveXReportViewer;
    FRpt, FApp : variant;
    FReportFile, FUsername, FPassword, FServer, FFilters : string;
    FOwner : TComponent;
    procedure SetLoginInfo(const username, password, server : string);
    function GetFilterConds: string;
    procedure SetFilterConds(const Value: string);
  public
    property FilterConditions : string read GetFilterConds write SetFilterConds;

    procedure ExportToFile(ExportFileName : string;
      FileExportFmt : TCryExportFormat; PromptForOptions : boolean);
    procedure Display;

    constructor Create(AOwner : TComponent; ReportFile : string); overload;
    constructor Create(AOwner : TComponent; ReportFile,
      Username, Password, Server : string); overload;
  end;

implementation

uses
  SysUtils, Forms;

const
  //these are taken from pgs 246 and 247 of the technical reference
  c_FmtCode_Excel = 29;
  c_FmtCode_PDF = 31;

constructor TCrystalReporter11.Create(AOwner: TComponent; ReportFile: string);
begin
  inherited Create;
  try
    FReportFile := ReportFile;
    if FileExists(FReportFile) then begin
      FOwner := AOwner;
      FCryRpt := TCrystalActiveXReportViewer.Create(AOwner);
      FApp := CreateOleObject('CrystalRuntime.Application');
      FRpt := FApp.OpenReport(FReportFile,1);
      FFilters := FRpt.RecordSelectionFormula;
    end
    else begin
      raise Exception.Create('Report file ' + ReportFile + ' not found!');
    end;
  except on e : exception do
    raise;
  end;  //try-except
end;

constructor TCrystalReporter11.Create(AOwner: TComponent; ReportFile, Username,
  Password, Server: string);
begin
  Create(AOwner,ReportFile);
  FUsername := Username;
  FPassword := Password;
  FServer := Server;
  SetLoginInfo(FUsername,FPassword,FServer);
end;

procedure TCrystalReporter11.Display;
var
  rptForm : TForm;
begin
  SetLoginInfo(FUsername,FPassword,FServer);
  FCryRpt.ReportSource := FRpt;
  rptForm := TForm.Create(FOwner);
  try
    FCryRpt.Parent := rptForm;
    FCryRpt.Align := alClient;
    FCryRpt.ViewReport;
    rptForm.Position := poOwnerFormCenter;
    rptForm.WindowState := wsMaximized;
    rptForm.Caption := ExtractFileName(FReportFile);
    rptForm.ShowModal;
  finally
    FreeAndNil(rptForm);
  end;  //try-finally
end;

procedure TCrystalReporter11.ExportToFile(ExportFileName : string;
  FileExportFmt : TCryExportFormat; PromptForOptions : boolean);
begin
  case FileExportFmt of
    XLS : FRpt.ExportOptions.FormatType := c_FmtCode_Excel;
    PDF : FRpt.ExportOptions.FormatType := c_FmtCode_PDF;
  end;  //case

  FRpt.ExportOptions.DiskFileName := ExportFileName;
  FRpt.ExportOptions.DestinationType := 1;  //file destination
  FCryRpt.ReportSource := FRpt;  
  FRpt.Export(PromptForOptions);
end;

function TCrystalReporter11.GetFilterConds: string;
begin
  Result := FFilters;
end;

procedure TCrystalReporter11.SetFilterConds(const Value: string);
begin
  FFilters := Value;
  if 0 < Length(Trim(FFilters)) then begin
    FRpt.RecordSelectionFormula := Value;
  end;
end;

procedure TCrystalReporter11.SetLoginInfo(const username, password,
  server : string);
var
  i : integer;
begin
  //set user name and password
  //crystal only accepts these values if they are CONST params
  for i := 1 to FRpt.Database.Tables.Count do begin
    FRpt.Database.Tables[i].ConnectionProperties.Item['User ID'] := username;
    FRpt.Database.Tables[i].ConnectionProperties.Item['Password'] := password;
    try
      {
      Some reports use direct connections, and others use an ODBC Data Source.
      Crystal XI uses a different label to refer to the database name in each
      method.
      I don't know how to determine in advance which method is being used, so:
          First, we try the direct connection.
          If that fails, we try the "data source" method.

      Reference: "Crystal Reports XI Technical Reference", pages 41 thru 46;
                 "Common ConnectionProperties"
      }
      FRpt.Database.Tables[i].ConnectionProperties.Item['Server'] := server;
    except on E: Exception do
      FRpt.Database.Tables[i].ConnectionProperties.Item['Data Source'] := server;
    end;
  end;
end;
{
Example usage:

procedure TForm1.btnShowRptDBClick(Sender: TObject);
var
  cry : TCrystalReporter11;
begin
  cry := TCrystalReporter11.Create(Self,'c:\my_report.rpt','username',
    'password','server.domain.com');
  try
    cry.Display;
  finally
    FreeAndNil(cry);
  end;
end;
}
end. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-02T14:54:27.197

我也对 Crystal Reports 在应用程序集成方面缺乏努力感到失望。我使用 RDC，据我了解，这已被弃用，重点放在 .Net 上。

我的应用程序在 uses 子句中有这些文件：CRRDC、CRAXDRT_TLB、

它工作正常。因为缺点是参数传递。在我的选择中，查看器附带的参数对话框很糟糕。所以我使用我自己的 Delphi 应用程序来提示输入参数并将它们传递给报告。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T22:04:13.007

这是一个更简单、更干净的类，它很好地解决了这个问题：

单元水晶报表；使用 Winapi.Windows、Winapi.Messages、System.SysUtils、System.Variants、System.Classes、Vcl.Graphics、Vcl.Controls、Vcl.Forms、Vcl.Dialogs、Vcl.StdCtrls、Vcl.OleCtrls、ActiveX、ComObj、Data .DB、Data.Win.ADODB、CrystalActiveXReportViewerLib11_TLB、Vcl.OleServer、CrystalReportsControllersLib_TLB；

```
type
TCrystalReportForm = class(TForm)
    CRV: TCrystalActiveXReportViewer;
    procedure DisplayReport;
private
    { Private declarations }
public
    {Public declarations }
    ReportName : WideString;
    ReportCaption : String;
    ReportSelectionFormula : WideString;
end;

var
CRXIRuntime : Variant;

implementation

{$R *.dfm}

procedure TCrystalReportForm.DisplayReport;
var
CrystalReport : variant;
i : integer;

begin
CrystalReport := CRXIRuntime.OpenReport(ReportName);
for i := 1 to CrystalReport.Database.Tables.Count do begin
    CrystalReport.Database.Tables[1].ConnectionProperties.Item['User ID'] := 'user';
    CrystalReport.Database.Tables[1].ConnectionProperties.Item['Password'] := 'password';
end;
CrystalReport.FormulaSyntax := 0;
Caption := ReportCaption;
CrystalReport.RecordSelectionFormula := ReportSelectionFormula;
CRV.Align := alClient;
CRV.ReportSource := CrystalReport;
WindowState := wsMaximized;
CRV.ViewReport;
ShowModal;
end;

begin
CRXIRuntime := CreateOleObject('CrystalRuntime.Application');
end. 
```

# c# - 我如何将这个 webforms 范式翻译成 mvc？

> ID：378091
> 
> 赞同：1
> 
> 时间：2008-12-18T15:00:37.997
> 
> 标签：c#, asp.net-mvc

采取以下假设情况，我将如何在 MVC 中实现它？

我所有的页面都位于一个 Master 中，上面有一个 CurrentUser 属性。该对象由某个会话用户 ID 确定，然后在每次页面加载时从数据库中查询。然后在整个站点中使用此对象，例如在顶部显示“欢迎 _____”，并在各种页面代码隐藏中用作数据库查询的一部分等。一个页面上有多个用户控件，每个控件显示不同的信息，查询在第一次加载。当一个控件回发并以某种方式改变它的显示时，页面的其余部分保持不变而无需重新填充。

我了解了 mvc 的基础知识，但是我正在努力了解如何将其带到下一个（现实世界）级别的内容丰富视图。您如何将常见对象公开给视图？控制器是否必须将视图可能需要的所有数据都粘贴到 ViewData 中？

任何人都可以推荐一个关于更高级 mvc 使用的好教程，这将帮助我了解如何远离网络表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T18:36:50.477

我更喜欢将视图所需的所有数据放入 ViewData。我大部分时间都尝试使用强类型模型，并且在将整个应用程序中使用的通用属性添加到通用 BaseViewData 类方面取得了一些成功。

对于用户信息等常见属性，我让 BaseViewData 类负责填充或提供这些属性值，这样每个控制器就不必担心不一定是特定操作所关注的上下文信息。

我很想看看其他人是如何解决这个问题的。

# apache-flex - 在 Flex/AS3 中使用 HTTPService 在 POST 上取得进展

> ID：378092
> 
> 赞同：2
> 
> 时间：2008-12-18T15:00:49.073
> 
> 标签：apache-flex, actionscript-3, httpservice

我正在使用带有 POST 操作的 HTTPService 来提交 Base64 编码文件（取自应用程序中的位图数据），但我确实可以了解 POST 操作的进度（例如 FileReference.upload()） .

我不认为这是可能的，但如果它是可能的（通过任何方式，我愿意改变我的设置来获得这个）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-23T20:05:01.337

不要使用 HTTP 服务。使用 URLRequest、URLLoader 和 URLVariables。

如果您使用 HTTPService 标签，请使用它并将其替换为充满类似...的脚本标签

```
 private function forYou() : void{
     var req : URLRequest = new URLRequest("PUT YOUR URL HERE")
     var loader : URLLoader = new URLLoader();
     var params : URLVariables = new URLVariables();
     params.WHATEVER = WHATEVER YOU WANT IT TO BE;
     req.data = params;
     req.method = URLRequestMethod.POST;
     loader.addEventListener(ProgressEvent.PROGRESS, YOUR LISTENER FUNCTION NAME);
     loader.load(req);
} 
```

将此函数名称分配给根标记的 creationComplete 属性。

如果您不使用 HTTPService 标记，只需在您的操作脚本中使用 HTTPService 对象并使用上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-31T06:28:30.170

这对我使用 REST Web 服务很有效：

[http://code.google.com/p/as3httpclient/wiki/Links](http://code.google.com/p/as3httpclient/wiki/Links)

[例子](http://www.abdulqabiz.com/blog/archives/flash_and_actionscript/http_authentica.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-06-16T14:20:07.053

这对于 HTTPService 是不可能的。它唯一的事件是`result`, `fault`, and `invoke`（除了和 的不相关的继承事件`activate`）`deactivate`。

要获取上传过程的进度信息，服务器必须提供信息，这将需要在操作期间服务器和客户端之间的通信方式，而常规 HTTP POST 操作不具备这种方式。

一种选择可能是在服务器上创建一个对象，该对象将在服务器开始从您的客户端接收 POST 数据时被实例化。然后它将跟踪进度并将该数据公开给服务器端应用程序的其余部分。然后，您的客户端可以启动一个轮询系统，该系统将请求该特定变量的值。

不过，这似乎是一种牵强的选择……

# css - * HTML Body 在 css 样式表中是什么意思？

> ID：378096
> 
> 赞同：3
> 
> 时间：2008-12-18T15:02:50.817
> 
> 标签：css, syntax

在样式表中，我有：

```
 * HTML BODY
    {
        padding-right: 0px;
        padding-left: 0px;
        padding-bottom: 25px;
        padding-top: 190px;
    }
    * HTML #maincontent
    {
        width: 100%;
        height: 100%;
    } 
```

我知道一个。表示类，# 表示应用于 id，但 * HTML 是什么意思？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T15:10:14.903

* 是通用选择器，因此可以匹配任何元素。例如

```
P * { } 
```

匹配作为 P 标签的子元素的任何元素

```
* HTML 
```

应该没有任何意义，因为 HTML 不能是任何东西的子项（根据定义）。使用它是因为 IE（编辑，至少 IE 5 - 6 - 感谢 RoBorg！）忽略 * ，因此它可用于定义 IE 特定样式：

```
HTML {
 // Normal styles
}

* HTML {
 // IE Specific styles
 } 
```

见[http://www.peachpit.com/articles/article.aspx?p=358552](http://www.peachpit.com/articles/article.aspx?p=358552)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T15:09:08.587

`*`表示任何元素
`HTML`，`BODY`表示`<html>`和`<body>`元素。

因此`* HTML BODY`意味着 HTML 元素内的 body 元素，在任何元素内。

这实际上是一个**浏览器破解**：有些浏览器会匹配它，有些则不会（Internet Explorer 匹配，Firefox 不匹配，不确定其他浏览器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T16:20:26.697

人们在样式表规则中添加 *、html 或 body（或在本例中为全部 3 个）之类的选择器的一个原因是为了增加选择器特异性计算。当然，html 永远不会是其他任何东西的孩子，所以 * html 是一种特定的 IE hack，但是人们会在声明中添加 html 或 body 是有原因的：

例如：

```
html p { font-color: red }
p { font-color: blue } 
```

html 标记中的段落（如所有段落）比段落更具体，因此字体颜色将为红色，无论样式表中这些声明的顺序如何。如果 html body p 有第三条规则，它将优先。

与使用 !important 相比，它稍微少一些 hack，但如果可能的话，最好关闭更多语义标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:10:50.457

好吧，这是一个非常糟糕的 CSS 选择器语句，就是这样。让我为你分解一下：

```
[all elements] (sub-selection) [HTML] [BODY] 
```

也就是说，它遍历所有元素以找到`HTML`元素，然后是`BODY`内部。问题是始终只有*1 个*body 元素，`#maincontent`要么应该在其中，要么应该`BODY`在其中。时期。

正如乔尔所说，这可能是为了提醒设计师，但我不太确定。对我来说，该代码是一种明确的“代码气味”！

您应该将 CSS 选择器重写为：

```
body { 
```

和：

```
#maincontent { 
```

分别。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2008-12-18T15:06:15.113

对于第二个片段，因为 * 匹配任何元素 item 是多余的。看起来它在那里提醒作者样式的意图 - 如果他在第二个片段中更改了某些内容，请确保他检查 #maincontent 元素以确保它看起来正确。

# c# - C# 停止选择一个或多个 TreeNode 的 Treeview

> ID：378097
> 
> 赞同：1
> 
> 时间：2008-12-18T15:03:03.950
> 
> 标签：c#, winforms, treeview, treenode

我有一个 TreeView 控件，在有组织的层次结构中显示多个 TreeNode。我想阻止用户选择最高级别的节点（这是通过使用 BeforeSelect 事件实现的）。如果用户选择它们，我还想阻止 TreeView 突出显示顶级节点，即停止 TreeView 更改节点的背景颜色并“选择”它。

我使用的 TreeView 是控件的 WinForms 版本。

以下是我目前尝试使用的源代码：

```
private void tree_BeforeSelect ( object sender, TreeViewCancelEventArgs e )
{
    if ( e.Node.Level == 0 )
    {
        e.Cancel = true;
    }
} 
```

这确实会取消选择节点，但仅在不希望出现的明显闪烁（~200 毫秒）之后。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2010-10-05T11:31:15.497

此代码防止在取消之前绘制选择：

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    treeView1.BeginUpdate();
}

private void treeView1_MouseUp(object sender, MouseEventArgs e)
{
    treeView1.EndUpdate();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T15:08:52.097

如果通过在 BeforeSelect 的事件参数中将 Cancel 设置为 true 来取消选择，则不会选择节点，因此背景颜色不会改变。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-06-09T22:32:46.223

除了现有代码之外，如果您使用代码向 TreeView 上的 MouseDown 事件添加处理程序并使用其位置选择节点，则可以设置节点颜色。

```
private void treeView1_MouseDown(object sender, MouseEventArgs e)
{
    TreeNode tn = treeView1.GetNodeAt(e.Location);
    tn.BackColor = System.Drawing.Color.White;
    tn.ForeColor = System.Drawing.Color.Black;
} 
```

仍然存在一个小问题，选择轮廓仍然显示在 MouseDown 上，但它至少停止了蓝色背景并让你走得更远。

高温高压

OneSHOT

# asp.net - HttpModule 似乎不起作用

> ID：378101
> 
> 赞同：3
> 
> 时间：2008-12-18T15:04:44.277
> 
> 标签：asp.net, httpmodule

我创建了一个简单的 HttpModule 来记录我现有 Web 服务的使用情况。有一个包含单个类的 dll

```
public class TrackingModule : System.Web.IHttpModule
{
    public TrackingModule(){}

    public void Init(System.Web.HttpApplication context)
    {
        context.BeginRequest+=new EventHandler(context_BeginRequest);
    }

    public void Dispose()
    {

    }

    private void context_BeginRequest(object sender, EventArgs e)
    {
        try
        {
            Microsoft.ApplicationBlocks.ExceptionManagement.ExceptionManager.Publish( new Exception("Log attept") );
            HttpApplication app = (HttpApplication)sender;
            string method = app.Request.RawUrl;
            SaveUseToDatabase( app.Request.UserHostAddress, method );
        }
        catch( Exception ex )
        {
            try
            {
                Microsoft.ApplicationBlocks.ExceptionManagement.ExceptionManager.Publish( ex );
            }
            catch{}
        }
    }
} 
```

编译完 dll 后，我将它添加到 webservice 的 bin 文件夹中，并在 webservice 的 web.config 中添加：

```
<system.web>
    <httpModules>
       <add name="TrackingModule" type="WebserviceTrackingModule.TrackingModule, WebserviceTrackingModule"/> 
```

这在我的计算机上运行良好，但是当我将其复制到生产服务器时，什么也没有发生。数据库中没有新条目，ExceptionManager 没有记录任何条目。就好像它根本不存在一样。

我能错过什么？

编辑：在执行另一个测试后，我可以添加它在我为拥有自己的顶级虚拟目录的 web 服务添加它时工作。它不适用于驻留在作为另一个虚拟目录的子文件夹的虚拟目录中的 Web 服务。

我知道 HttpModules 设置被子目录继承，但看起来父目录的存在妨碍了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-27T15:04:01.993

我相信我找到了更好的解决方案。在运行时而不是在 Web 配置中附加模块。查看[Rick Strahl 的博客文章](http://www.west-wind.com/weblog/posts/44979.aspx)了解详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T09:32:33.447

好的，我正在回答我自己的问题。

当您在子目录的 web.config 中定义 <httpModules> 时，它不起作用，即使子目录配置为应用程序也是如此。到目前为止，我发现的唯一解决方案是在根应用程序（父目录）的 web.config 中的 <location> 标记中定义它们。

我不喜欢它:(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-26T10:56:42.283

[我在http://forums.iis.net/t/1151924.aspx](http://forums.iis.net/t/1151924.aspx)找到了这个问题的答案

> 哦，好吧，一个小小的消除过程永远不会让我失望。
> 
> 看了看 3.5 相关的 web.config 代码后，我意识到我的模块需要添加到新的部分：
> 
> <system.webserver>
> 
>     <模块>
> 
> 而不是 system.web ......至少它现在正在工作。

所以翻译一下：

如果您在使用 httphandlers 时遇到问题

将您的处理程序添加到 system.webserver 中的模块节点，看看是否有效复制用于 scriptmodule 的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:15:07.483

这行得通吗？

```
<add name="TrackingModule" type="WebserviceTrackingModule.TrackingModule" /> 
```

并且每个请求都肯定会调用 context_BeginRequest 方法吗？

# c# - 如何在 app.config 中为自定义部分获取智能感知？

> ID：378105
> 
> 赞同：31
> 
> 时间：2008-12-18T15:06:23.133
> 
> 标签：c#, .net, configuration, app-config, custom-sections

我们的 app.config 文件中有一个与我们的 IoC 容器类相关的自定义部分。在编辑本节的配置文件时如何获得智能感知，以及摆脱通知我缺少架构的编译器消息。

我在这里发现了这个问题：[app.config configSections custom settings can not find schema information](https://stackoverflow.com/questions/229155/appconfig-configsections-custom-settings-can-not-find-schema-information)，但我不明白它是否适用于我的问题，以及如何使用那里的答案。

我还找到了这个页面[How to get Intellisense for Web.config and App.config in Visual Studio .NET](http://www.radsoftware.com.au/articles/intellisensewebconfig.aspx)，但它说在运行应用程序之前删除 xmlns 属性。这真的是唯一/最好的方法吗？

这是一个简单文件的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="ServiceContainers"
        type="LVK.IoC.RegistrationsSectionHandler, LVK"/>
  </configSections>
  <ServiceContainers>
    <Registration type="DatabaseConnection" class="DatabaseConnection">
      <Parameter name="connectionString" type="System.String"
          value="TYPE=MSSQL2000;SERVER=localhost;DATABASE=db"/>
    </Registration>
  </ServiceContainers>
</configuration> 
```

基本上我希望能够`<R`在`<ServiceContainers>`节点内输入，并在智能感知下拉列表中向我建议注册，以及它的适当属性。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-18T15:21:55.363

XML Intellisense 不会自动用于自定义配置部分。

Visual Studio 可能会在编译时报告警告，抱怨自定义配置部分的属性未定义。这些警告可能会被忽略。

如果您希望 XML IntelliSense 支持自定义配置部分（或者如果您只是希望“找不到架构”警告消失），请在第一个 <xs:schema ...> 之后立即将以下行添加到您的 DotNetConfig.xsd 文件中行（通常是 DotNetConfig.xsd 文件中的第二行）。

```
<xs:include schemaLocation="YOUR_DIRECTORY\namespace.assemblyname.xsd"/> 
```

DotNetConfig.xsd 文件可以在 Visual Studio 8（或 9）安装目录的 Xml\Schemas 子目录中找到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-10T16:15:54.670

如果您不想修改 DotNetConfig.xsd，您可以添加 xsd 配置“内联”。

在您的情况下，将以下属性添加到自定义部分

```
<ServiceContainers xmlns="your_xmlns"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="your_xmlns location_of_your_schema">

         <Registration ....

</ServiceContainers> 
```

这在本地测试 xsd 时很有用，因为*location_of_your_schema*可能是本地路径，并且当您准备生产时，将*location_of_your_schema*更改为 xsd 文件的公共 url。

请注意，*xsi:schemaLocation*属性必须包含由空格分隔的字符串对，其中每对中的第一个字符串是命名空间 URI，第二个字符串是模式的位置。

# svn - Subversion Ant 更新任务永远耗时

> ID：378106
> 
> 赞同：2
> 
> 时间：2008-12-18T15:06:46.893
> 
> 标签：svn, ant, build-process, build-automation, performance

我已经从 tigris.org 下载了 ant 的 svntask，所以它是“官方”的。

我有一个简单的任务来更新我的整个项目

```
<target name="prepare">
    <svn username="user" password="pass">
        <update>                
            <fileset dir="."/>
        </update>
    </svn>
</target> 
```

运行此任务大约需要 2 个小时。

`svn update`在命令行上运行 a大约需要 5 秒。

（在这两种情况下，服务器都没有更新）

我还尝试过更改 svntask 用于与 subversion 交互的方法，我尝试过 svnkit 方法和命令行方法。

任何想法为什么这可能需要这么长时间？显然，这是不可接受的缓慢。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T17:00:34.197

通过使用嵌套`<fileset>`命令最终调用`update`当前目录层次结构中的每个文件。这可能就是为什么需要两个小时。

尝试使用任务的`dir`属性`update`：

```
 <svn username="user" password="pass">
        <update dir="."/>                                
    </svn> 
```

并且，如果这不起作用，请打开`-verbose`或`-debug`查看您是否可以获得有关任务期间发生的事情的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T16:14:41.873

1.您使用哪个库来访问svn（svnkit或javahl）？

尝试显式提供适当的库：

```
<svn username="user" password="pass" svnkit="true"> 
```

2.我不确定您是否必须为更新提供用户名和密码参数（它们在结帐时被缓存）。

3.如果您的用例与我的相似，您可以将**checkout**任务重用于*checkout*和*update*：

```
<target name="prepare">
  <svn username="user" password="pass">
      <checkout url="${svn.url}" destpath="${svn.path}" />
    </svn>
</target> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T16:07:30.280

所以如果你只运行“ant prepare”需要 2 小时？或者这 2 小时的持续时间是否仅在您的构建机器等特殊条件下？

您是否尝试过使用该任务进行比较，以尝试隔离它是否是 Ant 与特定任务？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T16:18:30.693

我不明白为什么 svntask 需要 2 个小时，所以我会先详细研究一下。

但如果必须，您可以从命令行运行 SVN：

```
<exec executable="cmd.exe">
    <arg line="/c svn checkout repository ..."/>
</exec> 
```

编辑：实际上，你不需要dos窗口，你可以直接做。我这样做是为了在 ant 控制台中看到输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T17:05:23.500

分析您的构建以查看它实际花费大部分时间的位置可能是有益的。 [antutility](https://antutility.dev.java.net/)很容易用于此目的。只需将 jar 添加到您的类路径并像这样运行它：

```
 ant -listener net.java.antutility.BuildMetricsListener [target] 
```

# .net - .NET 应用程序中可预测帧捕获的选项

> ID：378107
> 
> 赞同：2
> 
> 时间：2008-12-18T15:06:53.943
> 
> 标签：.net, directshow, video-capture

我在 C# 中工作，需要捕获视频文件的各个帧。尽可能快（比实时更快），我希望寻找特定的帧号并将每第 n 帧捕获为图形文件格式，例如 BMP 或 JPEG。非常希望捕获的帧是可预测和可重复的，即不丢帧。

我对 DirectShow 有一些经验，但不知道这种技术是否最适合在现代 Windows .NET 环境中解决这个问题。理想情况下，我想找到一个 .NET 或基于 COM 的库来尽可能地抽象出来。我不需要在屏幕上实际显示视频文件，实际上我更希望没有用于视频播放的 Windows 用户界面。

有人对要研究的技术或特定产品有建议吗？它们需要与基于 MPEG-2 和 MPEG-4 的视频文件兼容，包括 DivX。QuickTime 支持将是一个不错的奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T07:38:52.600

我看不出您需要“比实时更快”执行此操作的原因，因为您正在考虑进行某种处理而不显示任何视频。

我用[DirectShow.Net](http://directshownet.sourceforge.net/)和 .Net 2.0 写过类似的东西。使用 directshow 需要一些经验，否则您将很难尝试。

您还可以从 Windows 访问 IMediaDet 界面来进行帧捕获。这种方法比较简单，但是有一定的限制，比如支持MPEG2。我注意到它也不支持“某些”flv。查看[CodeProject 上的示例 - FrameGrabber](http://www.codeproject.com/KB/graphics/FrameGrabber.aspx)

Quicktime 支持意味着安装[QuickTimeAlternative](http://www.free-codecs.com/download/quicktime_alternative.htm)

我可以发布我使用 DirectShow.Net 编写的代码。让我知道您是否需要它（我需要在发布之前美化它：P）。

编辑：注意：至于您的“可预测”捕获，根本没有问题，因为视频不是实时播放，而是暂停，因此您可以寻找任何点，然后提取帧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T15:14:39.233

阿罗哈

（免费）程序 Image Grabber II.net 完全符合您的描述。我似乎记得来源也已发布，但现在找不到。它需要 .NET 框架。

-Edoode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-22T14:07:21.903

万一其他人遇到此类问题，另一种选择是基于 Delphi 的 ActiveX 控件，称为[TVideoGrabber](http://www.datastead.com/vidgrab/index.htm)。虽然它不是免费的，但它非常便宜，并且可以很好地作为 DirectShow 的薄包装。

TVideoGrabber 不适合我的问题，因为我的应用程序没有 GUI——它作为 Windows 服务运行。我确实让它工作，但实例化多个控件（可能不是线程安全的开始）并在假事件循环中运行，来自 .NET，作为 Windows 服务......好吧，有几件事可能会出错。即使我已确保仅从创建线程操作控件，我似乎仍然存在并发问题。但这是另一个问题...... :)

# delphi - Delphi的字典（来自Python）组件？

> ID：378109
> 
> 赞同：4
> 
> 时间：2008-12-18T15:07:53.723
> 
> 标签：delphi, dictionary

Delphi 是否有类似 Python 字典的组件？

我现在使用 TStringList 来映射字符串/对象对，但我想要更通用的方法并且可能更强大（TStringList 在排序时具有二进制搜索）。

也欢迎 D2009 之前的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T15:29:33.507

Delphi 2009 中有。添加了一个全新的容器单元，Dictionary 类是可用的类之一。

将此与泛型结合起来，您将拥有一组非常强大的类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-19T01:40:41.137

IniFiles.pas 中有一个“隐藏”的 THashedStringList 类（从 TStringList 子类化），可以显着加快在基于字符串列表的字典中的搜索速度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T17:05:33.313

我自己没有尝试过，但是这个[Delphi Collections](http://www.warmachine.u-net.com/delphi_collections/)包怎么样？（谢谢谷歌）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T20:34:11.537

如果您正在寻找一些 Hashtable 实现，请查看[Hashtable implementations](https://stackoverflow.com/questions/179162/hashtable-implementation-for-delphi-5)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T22:55:52.997

我一直使用[DeCAL](http://sourceforge.net/projects/decal/)。它包括序列、映射和哈希表。

# haskell - 有哪些适合初学者的 Haskell Primers/Tutorials？

> ID：378115
> 
> 赞同：16
> 
> 时间：2008-12-18T15:09:31.770
> 
> 标签：haskell, functional-programming

一般来说，有哪些好的链接可以深入研究 Haskell 和函数式编程？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-12-20T02:32:20.747

*[Learn You a Haskell for Great Good](http://learnyouahaskell.com/)*感觉有点像《 *Why's (Poignant) Guide to Ruby》*的 Haskell 版本。Lisperati 有一个简洁的[Haskell 教程](http://lisperati.com/haskell/)，该教程基于使用模拟退火让人们在野餐时开心；它只使用了三遍“monad”这个词！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-12-18T15:16:40.257

[Real World Haskell](http://book.realworldhaskell.org/read/)是一个很好的开始。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-18T15:43:39.830

还有[另一个 Haskell 教程](http://www.cs.utah.edu/~hal/htut/)和[Haskell 的简单介绍](http://www.haskell.org/tutorial/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T03:12:36.767

如果您要查看*Real World Haskell* ，请务必注册[Real World Haskell Book Club](http://groups.google.com/group/real-world-haskell-book-club)，这是一个很棒的讨论小组，并且还将定期召开虚拟会议，逐章阅读本书。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-20T21:08:45.627

老歌但很好：“ [Haskell：函数式编程的工艺](http://www.cs.kent.ac.uk/people/staff/sjt/craft2e/)”

# javascript - flvFPW1() - 它有什么作用？

> ID：378117
> 
> 赞同：1
> 
> 时间：2008-12-18T15:09:54.670
> 
> 标签：javascript

我的任务是重写当前为客户的内部网站提供动力的 Javascript 引擎。在查看代码时，我遇到了这个我不认识的函数*flvFPW1*，我也无法破译代码（我的 Javascript 知识充其量是适度的）。谷歌搜索给了我一些点击，但大多数（如果不是全部）页面点击来自该特定页面上使用的 Javascript。换句话说，我找不到这个功能的描述，即使它显然被其他人使用。

这里有人可以启发我吗？

谢谢/弗雷德里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T15:56:11.753

我自己的研究同意这是一个 Dreamweaver 扩展：我找到[了 1.44 版的代码](http://forums.devshed.com/javascript-development-115/apply-onclick-to-all-links-in-template-265457.html)（在此页面上向下滚动一些）而不是 1.3：

```
function flvFPW1(){//v1.44
var v1=arguments,v2=v1[2].split(","),v3=(v1.length>3)?v1[3]:false,v4=(v1.length>4)?parseInt(v1[4]):0,
v5=(v1.length>5)?parseInt(v1[5]):0,v6,v7=0,v8,v9,v10,v11,v12,v13,v14,v15,v16;v11=
new Array("width,left,"+v4,"height,top,"+v5);for (i=0;i<v11.length;i++){v12=v11[i].split(",");l_iTarget=parseInt(v12[2]);
if (l_iTarget>1||v1[2].indexOf("%")>-1){v13=eval("screen."+v12[0]);
for (v6=0;v6<v2.length;v6++){v10=v2[v6].split("=");
if (v10[0]==v12[0]){v14=parseInt(v10[1]);if (v10[1].indexOf("%")>-1){v14=(v14/100)*v13;v2[v6]=v12[0]+"="+v14;}}
if (v10[0]==v12[1]){v16=parseInt(v10[1]);v15=v6;}}
if (l_iTarget==2){v7=(v13-v14)/2;v15=v2.length;}
else if (l_iTarget==3){v7=v13-v14-v16;}v2[v15]=v12[1]+"="+v7;}}v8=v2.join(",");v9=window.open(v1[0],v1[1],v8);
if (v3){v9.focus();}document.MM_returnValue=false;return v9;} 
```

当然，这是通过压缩器以节省带宽，使其难以阅读。在我意识到通过将“dreamweaver”添加到我的搜索字符串中可以获得更好的结果之前，我花了一点时间对其进行模糊处理。这样做我能够找到一些更有趣的文档：

[http://www.flevooware.nl/dreamweaver/extdetails.asp?extID=8](http://www.flevooware.nl/dreamweaver/extdetails.asp?extID=8) （简短描述） [http://satsuki.altervista.org/basibloggers/source40.txt](http://satsuki.altervista.org/basibloggers/source40.txt)（完整的脚本代码，意大利语）

简而言之：它基本上只是`window.open`. 这是我在翻译代码时取得的进展：

```
function flvFPW1()
{//v1.44
    var v1=arguments;  // pass v1[0] and v1[1] directly to window.open
    var arg3=v1[2].split(",");
    var focusNewWindow=(v1.length>3)?v1[3]:false;
    var newWindowWidth=(v1.length>4)?parseInt(v1[4]):0;
    var newWindowHeight=(v1.length>5)?parseInt(v1[5]):0;

    var adjustedWindowPosition=0,result,keyValuePair,AxisProperty;
    var windowSize,sizeValue,arg3Index,anchorValue;

    var hwArray= new Array("width,left,"+newWindowWidth,"height,top,"+newWindowHeight);
    for (i=0;i<hwArray.length;i++)  // x-axis, then y-axis
    {
        AxisProperty=hwArray[i].split(","); // {"width", "left", 0}  or {"height", "top", 0}
        l_iTarget=parseInt(AxisProperty[2]);  // l_iTarget defined where?

        if (l_iTarget>1||v1[2].indexOf("%")>-1)  
        {
            screenSize=eval("screen."+AxisProperty[0]); // x or y size of the window
            for (var i=0;i<arg3.length;i++)
            {
                keyValuePair=arg3[i].split("=");
                if (keyValuePair[0]==AxisProperty[0]) // if the key is (width|height)
                {
                    sizeValue=parseInt(keyValuePair[1]);
                    if (keyValuePair[1].indexOf("%")>-1)
                    {
                        sizeValue=(sizeValue/100)* screenSize;
                        arg3[i]=AxisProperty[0]+"="+sizeValue;
                    }
                }

                if (keyValuePair[0]==AxisProperty[1])  // if the key is (left|top)
                {
                    anchorValue=parseInt(keyValuePair[1]);
                    arg3Index=i;
                }
            }
            if (l_iTarget==2)
            {
                adjustedWindowPosition=(screenSize-sizeValue)/2; // will center the window on this axix
                arg3Index=arg3.length;
            }
            else if (l_iTarget==3)
            {
                adjustedWindowPosition= screenSize-sizeValue-anchorValue;
            }
            arg3[arg3Index]=AxisProperty[1]+"="+adjustedWindowPosition;  // (left|top) = value
        }
    }
    var newArg3=arg3.join(",");
    result=window.open(v1[0],v1[1],newArg3);
    if (focusNewWindow)
    {
        result.focus();
    }

    document.MM_returnValue=false;
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:18:32.063

在您的网站上，在地址栏中输入：

```
javascript:alert(flvFPW1); 
```

它将报告功能代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:18:00.130

我不认为它是一个内置函数，所以它只是你团队中的某个人编写的一些函数。

它可能是 Dreamweaver 添加到页面以执行某些操作的功能......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:34:44.277

安装 Firefox ( [http://www.mozilla.com/en-US/firefox/](http://www.mozilla.com/en-US/firefox/) ) 和 FireBug 扩展 ( [https://addons.mozilla.org/en-US/firefox/addon/1843](https://addons.mozilla.org/en-US/firefox/addon/1843) )。使用 FireBug 的 DOM 选项卡找到该功能并在右侧栏中单击它。它将带您到定义函数的文件/行。

或者在您最喜欢的强大文本编辑器（如 TextPad 或 TextMate）中打开 HTML 页面，然后搜索/查找函数名称。

如果您说您找到了该功能但实际上无法理解它，那么您可能应该将代码粘贴到您的问题中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T15:45:20.573

谷歌产生：

```
function flvFPW1() { // v1.3
    // Copyright 2002, Marja Ribbers-de Vroed, FlevOOware (www.flevooware.nl/dreamweaver/)
    var v1 = arguments, v2 = v1[2].split(","), v3 = (v1.length > 3) ? v1[3] : false, v4 = (v1.length > 4) ? parseInt(v1[4]) : 0, v5 = (v1.length > 5) ? parseInt(v1[5]) : 0, v6, v7 = 0, v8, v9, v10, v11, v12, v13, v14, v15, v16, v17, v18;
    if (v4 > 1) {
        v10 = screen.width;
        for (v6 = 0; v6 < v2.length; v6++) {
            v18 = v2[v6].split("=");
            if (v18[0] == "width") {
                v8 = parseInt(v18[1]);
            }
            if (v18[0] == "left") {
                v9 = parseInt(v18[1]);
                v11 = v6;
            }
        }
        if (v4 == 2) {
            v7 = (v10 - v8) / 2;
            v11 = v2.length;
        } else if (v4 == 3) {
            v7 = v10 - v8 - v9;
        }
        v2[v11] = "left=" + v7;
    }
    if (v5 > 1) {
        v14 = screen.height;
        for (v6 = 0; v6 < v2.length; v6++) {
            v18 = v2[v6].split("=");
            if (v18[0] == "height") {
                v12 = parseInt(v18[1]);
            }
            if (v18[0] == "top") {
                v13 = parseInt(v18[1]);
                v15 = v6;
            }
        }
        if (v5 == 2) {
            v7 = (v14 - v12) / 2;
            v15 = v2.length;
        } else if (v5 == 3) {
            v7 = v14 - v12 - v13;
        }
        v2[v15] = "top=" + v7;
    }
    v16 = v2.join(",");
    v17 = window.open(v1[0], v1[1], v16);
    if (v3) {
        v17.focus();
    }
    document.MM_returnValue = false;
} 
```

评论中的 URL 导致：

[FlevOOware - Dreamweaver 扩展 - 弹出链接](http://www.flevooware.nl/dreamweaver/extdetails.asp?extID=8)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-19T07:59:10.360

感谢您的帮助！spilth：是的，我在 js 文件中找到了该函数，但无法理解代码。由于我在其他几个与我的客户页面无关的页面上发现了相同的功能，我认为其他人已经知道了它的目的......所以我没有费心发布代码。不过我下次会的。

最好的祝福

# c# - 实例化工作变量的最有效方法是什么

> ID：378118
> 
> 赞同：1
> 
> 时间：2008-12-18T15:10:00.817
> 
> 标签：c#, variables, for-loop

我应该在 for 循环内部还是外部实例化我的工作变量

例如

一种）

```
bool b = default(bool);

for (int i = 0; i < MyCollection.Length; i++)
{
  b = false;

  foreach(object myObject in myObjectCollection)
  {
    if (object.Property == MyCollection[i].Property)
    {
      b = true;
      break;
    }
  }      

  if (b)
  {
    DoSomethingWith(MyCollection[i]);
  }
} 
```

b)

```
for (int i = 0; i < MyCollection.Length; i++)
{
  bool b = default(bool);

  foreach(object myObject in myObjectCollection)
  {
    if (object.Property == MyCollection[i].Property)
    {
      b = true;
      break;
    }
  }      

  if (b)
  {
    DoSomethingWith(MyCollection[i]);
  }
} 
```

编辑：似乎普遍认为在 IL 方面没有区别。但是为了可读性和范围的清晰......内部更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T15:15:41.540

里面看起来更干净，但同意 Jon 的观点，IL 是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:16:39.773

由于我误读了代码，因此删除了先前的答案。（顺便说一句，在任何地方使用“default（bool）”有点奇怪。）

但是，除非变量被委托等捕获，否则我希望它们编译*为*实际上相同的 IL（在行为和性能方面）。

与以往一样，首先编写最*易读*的代码。像这样的微观优化是自找麻烦。我同意其他人的建议，即尽可能地限制变量的范围——所以如果你在循环之后需要它，无论如何你别无选择；否则在里面声明。

好的，这是一个测试程序：

```
using System;

class Test
{
    static void Main() {}

    static void DeclareInside()
    {
        for (int i=0; i < 10; i++)
        {
            bool x = false;
            for (int j=5; j < 20; j++)
            {
                if (i == j)
                {
                    x = true;
                    break;
                }
                if (x)
                {
                    Console.WriteLine("Yes");
                }
            }
        }
    }

    static void DeclareOutside()
    {
        bool x;
        for (int i=0; i < 10; i++)
        {
            x = false;
            for (int j=5; j < 20; j++)
            {
                if (i == j)
                {
                    x = true;
                    break;
                }
                if (x)
                {
                    Console.WriteLine("Yes");
                }
            }
        }
    }
} 
```

生成的 IL（只是`csc Test.cs`）：

```
.method private hidebysig static void  DeclareOutside() cil managed
{
  // Code size       79 (0x4f)
  .maxstack  2
  .locals init (bool V_0,
           int32 V_1,
           int32 V_2,
           bool V_3)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.1
  IL_0003:  br.s       IL_0045
  IL_0005:  nop
  IL_0006:  ldc.i4.0
  IL_0007:  stloc.0
  IL_0008:  ldc.i4.5
  IL_0009:  stloc.2
  IL_000a:  br.s       IL_0037
  IL_000c:  nop
  IL_000d:  ldloc.1
  IL_000e:  ldloc.2
  IL_000f:  ceq
  IL_0011:  ldc.i4.0
  IL_0012:  ceq
  IL_0014:  stloc.3
  IL_0015:  ldloc.3
  IL_0016:  brtrue.s   IL_001d
  IL_0018:  nop
  IL_0019:  ldc.i4.1
  IL_001a:  stloc.0
  IL_001b:  br.s       IL_0040
  IL_001d:  ldloc.0
  IL_001e:  ldc.i4.0
  IL_001f:  ceq
  IL_0021:  stloc.3
  IL_0022:  ldloc.3
  IL_0023:  brtrue.s   IL_0032
  IL_0025:  nop
  IL_0026:  ldstr      "Yes"
  IL_002b:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_0030:  nop
  IL_0031:  nop
  IL_0032:  nop
  IL_0033:  ldloc.2
  IL_0034:  ldc.i4.1
  IL_0035:  add
  IL_0036:  stloc.2
  IL_0037:  ldloc.2
  IL_0038:  ldc.i4.s   20
  IL_003a:  clt
  IL_003c:  stloc.3
  IL_003d:  ldloc.3
  IL_003e:  brtrue.s   IL_000c
  IL_0040:  nop
  IL_0041:  ldloc.1
  IL_0042:  ldc.i4.1
  IL_0043:  add
  IL_0044:  stloc.1
  IL_0045:  ldloc.1
  IL_0046:  ldc.i4.s   10
  IL_0048:  clt
  IL_004a:  stloc.3
  IL_004b:  ldloc.3
  IL_004c:  brtrue.s   IL_0005
  IL_004e:  ret
} // end of method Test::DeclareOutside

.method private hidebysig static void  DeclareInside() cil managed
{
  // Code size       79 (0x4f)
  .maxstack  2
  .locals init (int32 V_0,
           bool V_1,
           int32 V_2,
           bool V_3)
  IL_0000:  nop
  IL_0001:  ldc.i4.0
  IL_0002:  stloc.0
  IL_0003:  br.s       IL_0045
  IL_0005:  nop
  IL_0006:  ldc.i4.0
  IL_0007:  stloc.1
  IL_0008:  ldc.i4.5
  IL_0009:  stloc.2
  IL_000a:  br.s       IL_0037
  IL_000c:  nop
  IL_000d:  ldloc.0
  IL_000e:  ldloc.2
  IL_000f:  ceq
  IL_0011:  ldc.i4.0
  IL_0012:  ceq
  IL_0014:  stloc.3
  IL_0015:  ldloc.3
  IL_0016:  brtrue.s   IL_001d
  IL_0018:  nop
  IL_0019:  ldc.i4.1
  IL_001a:  stloc.1
  IL_001b:  br.s       IL_0040
  IL_001d:  ldloc.1
  IL_001e:  ldc.i4.0
  IL_001f:  ceq
  IL_0021:  stloc.3
  IL_0022:  ldloc.3
  IL_0023:  brtrue.s   IL_0032
  IL_0025:  nop
  IL_0026:  ldstr      "Yes"
  IL_002b:  call       void [mscorlib]System.Console::WriteLine(string)
  IL_0030:  nop
  IL_0031:  nop
  IL_0032:  nop
  IL_0033:  ldloc.2
  IL_0034:  ldc.i4.1
  IL_0035:  add
  IL_0036:  stloc.2
  IL_0037:  ldloc.2
  IL_0038:  ldc.i4.s   20
  IL_003a:  clt
  IL_003c:  stloc.3
  IL_003d:  ldloc.3
  IL_003e:  brtrue.s   IL_000c
  IL_0040:  nop
  IL_0041:  ldloc.0
  IL_0042:  ldc.i4.1
  IL_0043:  add
  IL_0044:  stloc.0
  IL_0045:  ldloc.0
  IL_0046:  ldc.i4.s   10
  IL_0048:  clt
  IL_004a:  stloc.3
  IL_004b:  ldloc.3
  IL_004c:  brtrue.s   IL_0005
  IL_004e:  ret
} // end of method Test::DeclareInside 
```

唯一的区别是变量在堆栈中的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T15:18:22.907

里面。变量的范围应限于它们的实际用途。在外部声明它会将变量范围限定为包含块，这是不必要的，并且可能会导致混淆。

**编辑**：我猜这段代码只是为了说明这个例子，但我实际上会省略无关变量并将其写为：

```
for (int i = 0; i < MyCollection.Length; i++)
{
   foreach(MyObjectClass myObject in myObjectCollection)
   {
        if (myObject.Property == MyCollection[i].Property)
        {
             DoSomethingWith(MyCollection[i]);
             break;
        }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:14:08.857

我喜欢在循环内声明它们，它节省了一行代码（在同一行上声明和设置它），并且更容易看到我在循环范围内外使用了哪些变量，这很好当你在做一些复杂的事情时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T15:18:30.003

将变量声明为尽可能接近您使用它们的第一个位置，并让编译器担心生成最有效的 IL（至少在这种情况下）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T15:19:43.870

另一点是范围。如果在循环之外声明了一个变量，我是否应该期望它在循环之后使用？这是我通常假设的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T15:23:37.780

与读者一起编写代码是您首先想到的。应该优化一小部分代码。

通常在优化和可读性之间进行权衡。由于大部分人力都花在修改和编辑现有代码上，因此倾向于可读性而不是优化通常是正确的决定。

80/20 规则经常在这里应用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T15:25:52.627

我同意大小，我取决于范围，如果变量不能在循环内部以外的任何地方使用，则在循环内部声明它。如果要在循环完成后使用它，则需要在外部声明。

# jquery - 使用 jQuery 找到合适的父级

> ID：378133
> 
> 赞同：16
> 
> 时间：2008-12-18T15:14:59.043
> 
> 标签：jquery, dom, parent

给定一个 DOM 元素，我如何使用给定的 css 类找到它最近的父元素？

```
$(".editButton").click(function() {
   (magic container selector goes here).addClass("editing");
}); 
```

我不想使用很多或 $(...).parent().parent() 因为我不想被绑定到特定的 dom 结构。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2008-12-18T15:18:18.100

这应该工作

```
$(this).parents('.classYouWant:first').addClass("editing"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-03-06T20:38:17.703

```
$( this ).closest( '.yourselector' ) 
```

顾名思义，为`this`元素找到最近的祖先。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T15:20:22.450

使用`.parents(".yourClass")`而不是`.parent()`.

[jQuery 父母（）](http://docs.jquery.com/Traversing/parents#expr)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T15:22:06.563

您可以使用父选择。eg`$(".myclass:parent").something();`将找到所有具有类 myclass 的元素。

# .net - 如何删除其他进程使用的文件

> ID：378134
> 
> 赞同：0
> 
> 时间：2008-12-18T15:15:03.537
> 
> 标签：.net, process, io, winapp

这是交易。

我的 WinApp 正在运行，对吧？假设进程'A'。它创建一个文件并保留句柄（保持文件打开以进行写入，这是必须的）。
然后它开始其他 msbuild 过程，我们称之为“B”。此过程从[System.Diagnostic.Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process(VS.80).aspx)类开始。
在某些时候，我的 WinApp (A) 需要删除之前创建的文件（记住它是由 A 自己创建的），这时我收到 IOException 并显示消息“进程无法访问文件'X'，因为它正在被另一个进程使用”。它实际上是！......如果我终止进程'B'，只有'A'才能成功删除文件。

所以我的问题是：
1）有没有办法告诉我创建的过程不是没有处理我打开的文件？
2）还有其他方法可以实现我的方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:03:08.167

看起来像`System.Diagnostic.Process.Start`调用[CreateProcess](http://msdn.microsoft.com/en-us/library/ms682425.aspx)并将`bInheritHandles`参数设置为`true`.

您可以尝试在[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo_members(VS.80).aspx)`UseShellExecute`中设置为 true ，或直接 P/Invoke 到.`CreateProcess`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T15:27:19.160

可以在不关闭正在使用该句柄的进程的情况下强制关闭文件句柄，但这可能会导致应用程序崩溃。换句话说，做你想做的事情可能会导致'B'崩溃。也就是说，您所要求的绝对是可能的，因为应用程序[Process Explorer](http://forum.sysinternals.com/forum_topics.asp?FID=2)可以做到这一点。如果您在该链接中搜索留言板，您可能会发现它提供了丰富的信息，尽管即使是*查找*哪个应用程序正在使用句柄的行为也是一种令人沮丧的练习，更不用说实际关闭句柄了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:28:34.307

我不知道删除具有打开句柄的文件的保证方法，但如果您可以等到系统重新启动才能删除文件，您可以使用与Sysinternals的[MoveFile实用程序相同的技术。](http://technet.microsoft.com/en-us/sysinternals/bb897556.aspx)

该程序将注册表值添加到 Windows 在启动时检查的**HKLM\System\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations**键，这将保证文件被删除，尽管不是立即删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T16:15:02.557

当我试图读取一个被独占锁定的文件时，我遇到了类似的问题。

我试图这样做：

```
FileStream exclusiveWriter = new FileStream(@"C:\Temp\FileLockTest1.txt", FileMode.OpenOrCreate, FileAccess.Write, FileShare.None); 
```

完整的讨论可在以下网址获得：

[文件被另一个进程独占锁定 - MSDN 论坛讨论](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/26f31d41-c1ad-4fa0-b00e-e891a7ab4739)

希望这可以帮助。

# c# - Linq To SQL OrderBy，使用枚举时的问题

> ID：378153
> 
> 赞同：6
> 
> 时间：2008-12-18T15:18:46.073
> 
> 标签：c#, linq-to-sql, enums

当在枚举类型上运行时，我在 LINQ 查询上使用 OrderBy 扩展方法时遇到了一些问题。我使用 Visual Studio 创建了一个常规的 DataContext，只需将所有内容拖放到设计器上即可。然后，我创建了单独的实体模型，它们只是 POCO，我使用存储库模式从我的数据库中获取数据并将它们映射到我自己的实体模型中（或者更确切地说，我有一个存储库模式，它可以构建和 IQueryable这将完成所有这些）。

一切都很好，除非我尝试在我已从 short/smallint 映射到枚举的属性上应用 OrderBy（存储库外部）。

以下是相关的代码位：

```
public class Campaign
{
    public long Id { get; set; }
    public string Name { get; set; }
    ....
    public CampaignStatus Status { get; set; }
    ...
}
public enum CampaignStatus : short {
    Active,
    Inactive,
    Todo,
    Hidden
}
public class SqlCampaignRepository : ICampaignRepository
{
...
    public IQueryable<Campaign> Campaigns()
    {
        DataContext db = new DataContext();
        return from c in db.Campaigns
                select new Campaign
                   {
                       Id = c.Id,
                       Name = c.Name,
                       ...
                       Status = (CampaignStatus)c.Status,
                       ...
                   };
     }
} 
```

然后在别处

```
SqlCampaignRepository rep = new SqlCampaignRepository();
var query = rep.Campaigns().OrderBy(c => c.Status); 
```

这会触发以下异常：System.ArgumentException 未被用户代码处理 Message="参数 'value' 的类型错误。预期的 'IQMedia.Models.CampaignType'。实际的 'System.Int16'。" Source="System.Data.Linq" StackTrace：已验证 System.Data.Linq.SqlClient.SqlOrderExpression.set_Expression（SqlExpression 值）已验证 System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitSelect（SqlSelect 选择）已验证 System.Data。 Linq.SqlClient.SqlVisitor.Visit(SqlNode 节点) ved System.Data.Linq.SqlClient.SqlBinder.Visitor.VisitIncludeScope(SqlIncludeScope 范围) ...

（对不起那里的丹麦人，ved = by/at）。

我已经尝试在 orderBy 表达式中将 Status 类型转换为 short ，但这并没有帮助，如果我也将它转换为实际的 enum 类型也是如此。

非常感谢任何解决此问题的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T17:08:12.483

`CampaignStatus`您可以直接在您`DataContext`的设计器中指定类型吗？这样，值会自动映射到`enum`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:30:13.460

`Campaign`类和类是什么关系`Campaigns`？如果`Campaigns`返回`Campaign`对象集，请注意您通常不能`select new`映射实体。

我想知道如果您在 Select 之前执行 OrderBy 是否会更好？

最后一个技巧可能是`[Function]`使用简单的 TSQL 创建一个假的可组合。例如，`ABS`可能就足够了。即类似于（根据上下文）：

```
 [Function(Name="ABS", IsComposable=true)] 
    public int Abs(int value) 
    { // to prove not used by our C# code... 
        throw new NotImplementedException(); 
    } 
```

然后尝试：

```
 .OrderBy(x => ctx.Abs(x.Status)) 
```

我还没有测试过上述内容，但可以稍后试一试……不过，它适用于其他一些类似的情况。

值得一试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:38:07.593

我的 DataContext 有它自己的名为 Campaign 的实体类（当然，它位于不同的命名空间中）。此外，状态列在数据库中保存为 smallint，并且 LINQ 实体命名空间将其类型列为短 (System.Int16)。

如果我将 orderby 应用到存储库中的查询中，orderby 确实可以工作——尽管这只是一个更大的事情的一部分，整个想法是不要让存储库应用任何排序、过滤或类似的东西，而只是映射数据库实体类到我自己的。这个例子显然有点毫无意义，它几乎是一个直接的映射，但在某些情况下，我也添加了本地化。

我也忘了补充——在我尝试执行查询（即——调用 ToList 或枚举集合）之前，显然不会发生异常。

从更大的角度来看，这个方法被一个服务类使用，然后它应该添加过滤、排序和所有这些——所有这一切的重点当然是把事情分开一点，但也允许轻松过渡到如果需要的话，稍后会使用不同的数据库或不同的 OR/M。

啊，直到我回复后才看到最后一点 - 我还没有使用 Function 属性的任何经验，但我将无法访问我应该应用排序的类中的数据上下文。

# asp.net - 隐形按钮

> ID：378154
> 
> 赞同：0
> 
> 时间：2008-12-18T15:18:48.193
> 
> 标签：asp.net

我有一个服务器端 ImageButton，一个服务器端 Button，然后是一个简单的 HTML input-type="button"。ImageButton 和纯 HTML 按钮都不可见，ImageButton 的 alt 文本也不可见。但是，当我检查它们时，它们会呈现在客户端 HTML 上。

有人有想法么？

```
<asp:ImageButton runat="server" ID="btnCancel" OnClientClick="top.ChaseDialog.hide();"
                    ImageUrl="~/Images/PageControls/pageControls_Delete_sm.gif" AlternateText="xxxxxxxx"></asp:ImageButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T15:26:18.817

很难说没有看到完整的 HTML 和 CSS。几个可能的原因：

*   一些错误的 CSS 规则使它们不可见；
*   上面还有其他东西；
*   由于元素的自动调整大小，它们被压缩到完全没有像素；
*   他们在他们的容器外面，里面有`overflow:hidden`;
*   由于以上原因，它们所在的容器是不可见的；

**补充：**我建议您使用一些客户端 HTML 调试器，例如 IE 的“Internet Explorer Developer Toolbar”或 FireFox 的“FireBug”。

# python - Python，正则表达式邮政编码搜索

> ID：378157
> 
> 赞同：6
> 
> 时间：2008-12-18T15:19:34.277
> 
> 标签：python, regex, postal-code

我正在尝试使用正则表达式在字符串中查找英国邮政编码。

我在 RegexBuddy 中使用了正则表达式，见下文：

```
\b[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}\b 
```

我有一堆地址，想从中获取邮政编码，示例如下：

> 市县某路名
> 镇123号PA23 6NH

我将如何在 Python 中解决这个问题？我知道`re`Python 的模块，但我正在努力让它工作。

干杯

伊夫

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T15:42:50.377

使用邮政编码 PA23 6NH、PA2 6NH 和 PA2Q 6NH 重复您的地址 3 次作为您的模式测试，并使用维基百科中的正则表达式与您的匹配，代码是..

```
import re

s="123 Some Road Name\nTown, City\nCounty\nPA23 6NH\n123 Some Road Name\nTown, City"\
    "County\nPA2 6NH\n123 Some Road Name\nTown, City\nCounty\nPA2Q 6NH"

#custom                                                                                                                                               
print re.findall(r'\b[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}\b', s)

#regex from #http://en.wikipedia.orgwikiUK_postcodes#Validation                                                                                            
print re.findall(r'[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][A-Z]{2}', s) 
```

结果是

```
['PA23 6NH', 'PA2 6NH', 'PA2Q 6NH']
['PA23 6NH', 'PA2 6NH', 'PA2Q 6NH'] 
```

两个正则表达式都给出相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T15:40:05.483

尝试

```
import re
re.findall("[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}", x) 
```

你不需要 \b。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:45:41.447

```
#!/usr/bin/env python

import re

ADDRESS="""123 Some Road Name
Town, City
County
PA23 6NH"""

reobj = re.compile(r'(\b[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}\b)')
matchobj = reobj.search(ADDRESS)
if matchobj:
    print matchobj.group(1) 
```

示例输出：

```
[user@host]$ python uk_postcode.py 
PA23 6NH 
```

# linux - 代码注入 - Solaris & Linux

> ID：378158
> 
> 赞同：4
> 
> 时间：2008-12-18T15:19:36.693
> 
> 标签：linux, gcc, solaris, elf

我有一个由第三方创建的可执行模块。我想将我的代码（一种在单独线程中运行的看门狗）“注入”到这个进程中。

到目前为止，有两种可能的方法 - 一种是将我的代码作为可执行文件运行并在其之上动态加载一个过程（似乎非常困难和棘手）或使我的代码成为共享对象，通过 LD_PRELOAD 加载它并从一些静态变量构造函数。

有没有更方便的方法来做到这一点？我的操作系统是 Linux x86 和 Solaris-SPARC。

更新：如果可能的话，我不想修补这个过程，而是动态加载我的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T15:35:33.247

听起来您正在寻找[InjectSo](http://www.securiteam.com/tools/5EP0P157PG.html)。有一个[Powerpoint 演示文稿](http://www.blackhat.com/presentations/bh-europe-01/shaun-clowes/bh-europe-01-clowes.ppt)解释了它是如何工作的。我还没来得及尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-10-09T17:56:20.147

[Hotpatch](https://github.com/vikasnkumar/hotpatch)应该为您执行此操作。它比injectso更有能力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:45:20.667

Rob Kennedy 向您介绍了 InjectSo——这可能就是您所需要的。

请注意，将线程引入非线程进程将充满同步问题。如果应用程序已经线程化，问题就不那么严重了，但即便如此，应用程序可能会反对它不知道的线程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-09T20:46:35.243

我没有使用过上面提到的 InjectSo，但这是一个值得注意的信息。如果您正在寻找替代方案，这是一种注入代码的简单方法：

```
#include <stdio.h>
#include <sys/types.h>
#include <pwd.h>
int main()
{
    struct passwd* pswd = getpwuid(1000);
    if(pswd) 
        printf("%s\n", pswd->pw_name);
    return 0;
} 
```

`gcc test.c -o test`

```
#define _GNU_SOURCE
#include <dlfcn.h>
#include <sys/types.h>
#include <pwd.h>
#include <stdlib.h>
#include <stdio.h>

static char* hocus = "hocus pocus";

struct passwd *getpwuid(uid_t uid)
{
    static struct passwd *(*orig_getpwuid)(uid_t uid);
    if(!orig_getpwuid) {
        orig_getpwuid = (struct passwd* (*)(uid_t))dlsym(RTLD_NEXT, "getpwuid");
    }

    struct passwd* original_passwd = (*orig_getpwuid)(uid);
    if(original_passwd) {
        original_passwd->pw_name = hocus;
    }
    // your code here
    return original_passwd;
} 
```

`gcc inject.c -shared -o libinject.so`

运行`LD_LIBRARY_PATH=. LD_PRELOAD=libinject.so ./test`

应该说`hocus pocus`。您可以覆盖任意`libc`函数，例如`printf`, `snprintf`- 只需找到该模块使用的是什么。

在“您的代码”中，您可以启动任意线程、看门狗等。

# java - 在 Java Swing 中，如何管理允许选择多个面板的面板列表？

> ID：378161
> 
> 赞同：3
> 
> 时间：2008-12-18T15:21:32.947
> 
> 标签：java, swing, jpanel, jlist

我正在开发一个跟踪一堆任务的内部应用程序。我想要一个简单的任务监视器，它会列出任务名称和任务的状态。我需要它看起来有点漂亮，我不是设计师，所以无论我做什么都会很糟糕，但是基本的文本显示不适合项目要求。

我实际上试图做的是显示类似于 Firefox 下载窗口、I-Tunes 下载窗口的东西，我可以命名更多，但它们看起来基本相同。在这些应用程序中的每一个中，每个“进度面板”都是可选的。所以为了实现这一点，我认为只使用一个 JPanel 列表很简单，每个 JPanel 都有一个 JProgressBar 和一个 JLabel，每个 JPanel 都可以接受焦点来确定它和其他是否被选中。我认为这将是一项简单的任务，但如果我使用 JList，它只会显示文本。然后我只是想我会在一个更大的面板中显示所有任务面板，但我无法让内部面板识别焦点。

有这种模式吗？有没有我刚刚找到的滚动标准解决方案？或者有没有更好的方法来做到这一点？我不想重新发明轮子，但我认为这很简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T15:38:59.387

听起来您可能正在寻找的是一个[`JList`](http://java.sun.com/javase/6/docs/api/javax/swing/JList.html).

您可以`JList`通过首先将您的“任务”添加到`JList`对象中来添加您的项目[`ListModel`](http://java.sun.com/javase/6/docs/api/javax/swing/ListModel.html)（请参阅 Java 教程中的[创建模型](http://java.sun.com/docs/books/tutorial/uiswing/components/list.html#creating)部分），然后您需要分配一个自定义[`ListCellRenderer`](http://java.sun.com/javase/6/docs/api/javax/swing/ListCellRenderer.html)来接受您的“任务”和在列表本身中呈现`JList`为 a 。`JPanel`这里的关键是让您的自定义`ListCellRenderer`能够以`JList`您希望在`JList`.

查看The Java Tutorials的[How to Use Lists页面中的](http://java.sun.com/docs/books/tutorial/uiswing/components/list.html)[Writing a Custom Cell Renderer](http://java.sun.com/docs/books/tutorial/uiswing/components/list.html#renderer)部分。它将描述如何进行自定义，以便您可以将“任务”表示为您想要的任何内容。`ListCellRenderer`

为简短起见，您将[`ListCellRenderer`](http://java.sun.com/javase/6/docs/api/javax/swing/ListCellRenderer.html)通过实现 which 来实现接口，[`getListCellRendererComponent`](http://java.sun.com/javase/6/docs/api/javax/swing/ListCellRenderer.html#getListCellRendererComponent(javax.swing.JList,%20java.lang.Object,%20int,%20boolean,%20boolean))这将返回 a[`Component`](http://java.sun.com/javase/6/docs/api/java/awt/Component.html)这是您的任务在`JList`. 您可能希望`JPanel`在此方法中构造或实例化您的并将其作为`Component`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T15:26:16.930

做这类事情的标准方法是使用 JTable（或 JList）作为容器。

您不必为表格单元格使用默认渲染器，但您可以为特定单元格指定自己的渲染器。看看[CellRenderer](http://java.sun.com/javase/6/docs/api/javax/swing/table/TableCellRenderer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T15:24:54.890

怎么样 a `JTable`（您可以设置为允许选择多行），内部`JPanel`占用每行中的单个单元格，其中包含 a`JProgressBar`和 a `JLabel`。或者您可以使用`JList`与我刚刚描述的结构相同的 a 。

# c# - 提取单词文本和处理单元格字符的建议

> ID：378167
> 
> 赞同：2
> 
> 时间：2008-12-18T15:22:53.990
> 
> 标签：c#, string, ms-word, vsto

寻求建议（也许是最佳实践）。

我们有一个从单元格中提取文本的 MS Word 文档（Office 2007）。

我们可以使用以下内容：

```
string text = wordTable.cell(tablerow.index, 1).Range.Text; 
```

文本被提取；但是我们似乎得到了额外的字符尾随，例如`\r\a`.

现在我们可以添加以下内容：

```
.... wordTable.cell(tablerow.index, 1).Range.Text.Replace("\r\a,""); 
```

但这似乎有点太懒惰了，而且几乎是在浪费时间，很可能会导致未来出现问题。

我们还可以有一个接收要清理的字符串的方法：

```
private string cleanTextWordCellBreak(string wordTextToClean)
{
    // Clean the text here
    return cleanstring;
} 
```

然后我们可以使用它：

```
cleanTextWordCellBreak(wordTable.cell(tablerow.index, 1).Range.Text;
); 
```

这似乎更接近于处理问题的更好方法。你会怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T15:54:33.300

我会将它分解为一个单独的方法，但使用替换实现，因为它是最简单的解决方案。如果遇到问题，您可以随时更改实现（例如文本包含多个`\r\a`并且需要保留）

所以：

```
private string stripCellText(string text)
{
      return text.Replace("\r\a", "");
}

string text = stripCellText(wordTable.cell(tablerow.index, 1).Range.Text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T15:37:21.120

我肯定会选择亲自将其分解为单独的方法。它有助于提高代码的可读性，并使其在将来需要时更容易更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T20:11:07.650

获得它的另一种方法是获取字符的长度并将文本提取到该长度。

 `````
dim range as Range
dim text as string
dim length as Integer

range = ActiveDocument.Tables(1).Cell(1,1).Range
text = range.Text
length = range.Characters.Count

Debug.Print Mid(text, 1, length - 1)

````  `# algorithm - 您如何比较两个列表的顺序相同的程度？

> ID：378204
> 
> 赞同：8
> 
> 时间：2008-12-18T15:36:29.140
> 
> 标签：algorithm

我有两个包含相同元素但顺序不同的数组，我想知道它们的顺序不同的程度。

我试过的方法，没有用。如下：

对于每个列表，我构建了一个矩阵，该矩阵记录了每对元素在列表中是否在彼此之上或之下。然后我计算了这两个矩阵的皮尔逊相关系数。这非常糟糕。这是一个简单的例子：

```
清单 1：
1
2
3
4

清单 2：
1
3
2
4

```

我上面描述的方法产生了这样的矩阵（其中 1 表示行号高于列，反之亦然 0）：

```
清单 1：
  1 2 3 4
1 1 1 1
2 1 1
3 1
4

清单 2：
  1 2 3 4
1 1 1 1
2 0 1
3 1
4

```

由于唯一的区别是元素 2 和 3 的顺序，因此应该认为它们非常相似。这两个矩阵的 Pearson 相关系数为 0，表明它们根本不相关。我想问题是我正在寻找的不是真正的相关系数，而是其他某种相似性度量。编辑距离，也许？

任何人都可以提出更好的建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T15:40:00.350

每个元素的索引差异的均方。

```
List 1: A B C D E
List 2: A D C B E 
```

列表 2 中列表 1 的每个元素的索引（从零开始）

```
A B C D E
0 3 2 1 4 
```

列表 1 中列表 1 的每个元素的索引（从零开始）

```
A B C D E
0 1 2 3 4 
```

差异：

```
A  B C D E
0 -2 0 2 0 
```

差异平方：

```
A B C D E
  4   4 
```

平均差异 = 8 / 5。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T15:52:36.130

只是一个想法，但是在采用标准排序算法来计算将 list1 转换为 list2 所需的交换操作数方面有什么意义吗？

我认为定义比较函数可能很困难（甚至可能和原始问题一样困难！），这可能效率低下。

编辑：再想一想，比较函数本质上是由目标列表本身定义的。例如，如果列表 2 是：

1 4 6 5 3

...那么比较函数应该导致 1 < 4 < 6 < 5 < 3 （并在条目相等时返回相等）。

然后只需要扩展交换函数来计算交换操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T15:49:11.580

您可能会考虑将一个字符串转换为另一个字符串需要进行多少更改（我猜这是您在提到编辑距离时遇到的问题）。

见：[http ://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

虽然我不认为 l-distance 考虑到旋转。如果您允许将旋转作为操作，则：

1、2、3、4

和

2、3、4、1

很相似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-14T07:58:28.390

在这里聚会有点晚了，但只是为了记录，我认为 Ben 几乎做到了......如果你进一步研究相关系数，我想你会发现**Spearman 的等级相关系数**可能是这样的去。

有趣的是，jamesh 似乎也得出了类似的度量，但没有标准化。

请参阅这个[最近的 SO 答案](https://stackoverflow.com/questions/859536/sorted-list-difference/859902#859902)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T17:50:14.283

有一个分支定界算法应该适用于您喜欢的任何一组运算符。它可能不是真正的快。伪代码是这样的：

```
bool bounded_recursive_compare_routine(int* a, int* b, int level, int bound){
    if (level > bound) return false;
    // if at end of a and b, return true
    // apply rule 0, like no-change
    if (*a == *b){
        bounded_recursive_compare_routine(a+1, b+1, level+0, bound);
        // if it returns true, return true;
    }
    // if can apply rule 1, like rotation, to b, try that and recur
    bounded_recursive_compare_routine(a+1, b+1, level+cost_of_rotation, bound);
    // if it returns true, return true;
    ...
    return false;
}

int get_minimum_cost(int* a, int* b){
    int bound;
    for (bound=0; ; bound++){
        if (bounded_recursive_compare_routine(a, b, 0, bound)) break;
    }
    return bound;
} 
```

它所花费的时间在答案中大致呈指数级，因为它受最后一个有效的界限支配。

补充：这可以扩展以查找存储在 trie 中的最近匹配字符串。几年前，我在拼写校正算法中做到了这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T19:00:24.627

我不确定它到底使用了什么公式，但`difflib.SequenceMatcher.ratio()`确实是这样的：

```
ratio(self) method of difflib.SequenceMatcher instance:
    Return a measure of the sequences' similarity (float in [0,1]). 
```

代码示例：

```
from difflib import SequenceMatcher
sm = SequenceMatcher(None, '1234', '1324')
print sm.ratio()

>>> 0.75 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-21T21:01:00.057

另一种基于一点[数学](http://en.wikipedia.org/wiki/Permutation_group#Transpositions.2C_simple_transpositions.2C_inversions_and_sorting)的方法是计算*反转*的次数以将一个数组转换为另一个数组。反转是两个相邻数组元素的交换*。*在红宝石中它是这样完成的：

```
# extend class array by new method
class Array
  def dist(other)
    raise 'can calculate distance only to array with same length' if length != other.length
    # initialize count of inversions to 0
    count = 0
    # loop over all pairs of indices i, j with i<j
    length.times do |i|
      (i+1).upto(length) do |j|
        # increase count if i-th and j-th element have different order
        count += 1 if (self[i] <=> self[j]) != (other[i] <=> other[j])
      end
    end
    return count
  end
end
l1 = [1, 2, 3, 4]
l2 = [1, 3, 2, 4]
# try an example (prints 1)
puts l1.dist(l2) 
```

两个长度为 n 的数组之间的距离可以在 0（它们相同）和 n*(n+1)/2 之间（将第一个数组颠倒得到第二个）。如果您希望距离始终在 0 和 1 之间以便能够比较不同长度的数组对的距离，只需除以 n*(n+1)/2。

这种算法的一个缺点是它的运行时间为 n^2。它还假设数组没有双重条目，但可以对其进行调整。

*关于代码行“count += 1 if ...”的注释：仅当第一个列表的第 i 个元素小于*其第 j 个元素且第二个列表的第 i 个元素时，计数才会增加列表*大*于其第 j 个元素，反之亦然（意味着第一个列表的第 i 个元素大于其第 j 个元素，第二个列表的第 i 个元素小于其第 j 个元素）。简而言之：(l1[i] < l1[j] and l2[i] > l2[j]) or (l1[i] > l1[j] and l2[i] < l2[j])

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-07T13:32:10.063

如果一个有两个订单，则应该查看两个重要的排名相关系数：

1.  Spearman 等级相关系数：[https](https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient) : //en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient 这与 Jamesh 答案几乎相同，但在 -1 到 1 的范围内缩放。定义为：
    1 - ( 6 * sum_of_squared_distances ) / (n_samples * (n_samples**2 - 1)

2.  Kendalls tau：[https ://nl.wikipedia.org/wiki/Kendalls_tau](https://nl.wikipedia.org/wiki/Kendalls_tau)

使用 python 时，可以使用：

```
 from scipy import stats

 order1 = [ 1, 2, 3, 4]
 order2 = [ 1, 3, 2, 4]
 print stats.spearmanr(order1, order2)[0]
 >> 0.8000
 print stats.kendalltau(order1, order2)[0]
 >> 0.6667 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-11T16:26:19.200

如果有人使用 R 语言，我已经实现了一个函数，使用上面@bubake 描述的方法计算“spearman 等级相关系数[”](https://stackoverflow.com/questions/859536/sorted-list-difference/859902#859902)：

```
get_spearman_coef <- function(objectA, objectB) {
  #getting the spearman rho rank test 
  spearman_data <- data.frame(listA = objectA, listB = objectB)
  spearman_data$rankA <- 1:nrow(spearman_data) 
  rankB <- c()

  for (index_valueA in 1:nrow(spearman_data)) {
    for (index_valueB in 1:nrow(spearman_data)) {

      if (spearman_data$listA[index_valueA] == spearman_data$listB[index_valueB]) {
        rankB <- append(rankB, index_valueB)
      }

    }
  }
  spearman_data$rankB <- rankB
  spearman_data$distance <-(spearman_data$rankA - spearman_data$rankB)**2

  spearman <- 1 - ( (6 * sum(spearman_data$distance)) / (nrow(spearman_data) * ( nrow(spearman_data)**2 -1) ) )
  print(paste("spearman's rank correlation coefficient"))
  return( spearman)  
} 
```

结果 ：

> get_spearman_coef(c("a","b","c","d","e"), c("a","b","c","d","e"))
> 
> > 斯皮尔曼等级相关系数：1

> get_spearman_coef(c("a","b","c","d","e"), c("b","a","d","c","e"))
> 
> > 斯皮尔曼等级相关系数：0.9

# c++ - C ++如何迭代直到动态数组的末尾？

> ID：378207
> 
> 赞同：3
> 
> 时间：2008-12-18T15:37:53.117
> 
> 标签：c++, arrays

假设我声明了一个动态数组

```
int *dynArray = new int [1]; 
```

它在某个时候用未知数量的 int 值初始化。

我将如何迭代直到未知大小的数组结束？

另外，如果它读取一个空格，它在数组中的相应位置是否会被丢弃？

# 从下面的用户帖子中复制输入：

事情是：

a) 我不允许使用 STL（表示：否）

b）我想将一个字符串分解成它的字符并存储它们。到目前为止，我想使用这样的函数：

```
 string breakLine (string line){

         int lineSize = line.size();

         const char *aux;

         aux=line.data();

         int index=0;

         while (index<=lineSize){
         mySynonyms[index]=aux[index]; 

         index++;
         } 
```

我认为如果要存储的两个数字之间有很大的空白空间（显然不是），那么数组 aux 最终会被丢弃。我想知道是否有办法在这种类型的数组中迭代到未定义的结尾。谢谢你的回答。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-18T15:45:09.623

您不会：将数组包装成一个记住其长度的结构：`std::vector`.

```
std::vector v(1);
std::for_each( v.begin(), v.end(), ... ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-12-18T15:44:26.003

没有便携的方式来做到这一点。要么将大小与数组一起传递，要么更好地使用标准容器，例如`std::vector`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T15:46:42.240

简短的回答是你不能。如果你有一个指向数组第一个元素的指针，你就无法知道数组的大小。为什么首先要使用数组。如果您的数组可以动态更改大小，则使用 std::vector 会更好，如果它是固定大小，则使用 boost::Array 会更好。

我不明白你的第二个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T15:45:41.213

您的代码需要跟踪数组，因此大小永远不会未知。（或者您将不得不使用一些带有执行此操作的代码的库。）

我不明白你问题的最后一部分。你能详细说明一下吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T16:11:17.260

您在下面的帖子中解释说您想查看 std::string 的内容。

如果您希望您的搅拌器像一个 c 字符串（也就是不包含 NULL），那么使用 line.c_str() 而不是 line.data()。这将保证 aux 指向一个 null 终止 c 样式的字符串。

之后，您可以迭代直到 aux[index] == '\0';

否则，您可以使用 line.data() 和 string.length/size 来获取它的大小，就像在您的示例中一样。

但是，“将字符串分解为字符”是毫无意义的，字符串*是*字符数组。只需复制字符串并将其存储即可。您可以这样做：

```
char ch = line[index]; 
```

更好的是，在原始字符串上使用迭代器！

```
for(std::string::const_iterator it = line.begin(); it != line.end(); ++it) {
    const char ch = *it;
    // do whatever with ch
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T17:12:19.573

> a) 我不允许使用 STL（表示：否）

什么？？那是谁的愚蠢想法？

std::vector 不是“STL”（HP 的版权产品）的一部分，而是（并且已经存在近十年）**C++ Language Standard 的一部分**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T18:26:49.327

如果您不被允许使用 STL（无论出于何种原因），那么您要做的第一件事就是实现您自己的版本——至少是您需要的部分，以及您需要的可定制级别。例如，`vector`使用自定义的`allocator`. 但尽管如此，请务必**实现**您自己的轻量级`vector`. 其他一切都会导致糟糕的、难以维护的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T15:51:45.803

使用一个向量，它有一个返回整数的 vector.size() 函数和一个返回迭代器的 vector.end() 函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T16:02:50.057

您可以创建一个仅包含您需要的方法的简单 Vector 类。实际上，我不得不为今年学习的课程重新创建 Vector 课程，这并不是很困难。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T16:37:17.567

如果有一个无效的值，您可以将其用作哨兵，并确保您的所有数组都以此终止。当然，它很容易出错，并且当您碰巧错过一次时会导致难以发现的错误，但这就是我们在 FORTRAN 中读取文件时经常做的事情（回到全大写时代，在 END= 之前）成为标准）。

是的，我在和自己约会。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-12-18T18:59:14.847

这闻起来像家庭作业，老师的目标是让您了解实现动态数组需要什么。到目前为止，你得到了一个 F。

您需要意识到，当您像这样分配内存时

```
int *dynArray = new int [1]; 
```

您只分配一个整数，而不是通过某种未知魔法来扩展的无限数量的整数。最重要的是，你只能说

```
dynArray[0] = 78; 
```

但你不能说

```
dynArray[1] = 8973; 
```

索引 1 处的元素不存在，您正在进入不是为您保留的内存。当您释放数组时，此特定违规将导致稍后崩溃，因为您存储 8973 的内存属于堆管理数据结构，并且您损坏了堆。

正如许多其他响应者所提到的，您必须始终知道数组中有多少元素。所以，你必须做一些事情

```
int arraySize = 1;
int *dynArray = new int [arraySize]; 
```

arraySize 与数组一起使用，最好在一个 C++ 对象中与 dynArray 结合使用。

现在，在分配给 dynarray[1] 之前，您必须重新分配数组：

```
if (index > arraySize) {
  int newSize = index+1;
  int *newArray = new int[newSize]
  // don't forget to copy the data from old array to new
  memcpy(newarray dynArray, sizeof *newArray * arraySize);
  arraySize = newSize;
  dynArray = newArray;      
}
// now you're ready!
dynArray[index] = value; 
```

现在，如果你想让它更高效一点，你分配的比你需要的多，所以你不必每次添加元素时都分配。我将把这个作为练习留给读者。

在完成所有这些之后，你可以提交你的作业，你会欣赏为你完成所有这些的不起眼的 std::vector 以及更多。

# c++ - C ++ sql将整数传递给sql字符串

> ID：378210
> 
> 赞同：0
> 
> 时间：2008-12-18T15:38:39.590
> 
> 标签：c++, sql

我在 MS Access 中建立了一个数据库。我有一个名为“客户”的表，其中还有一个名为“员工类型：整数”的单元格。我还用 C++ 构建了一个控制所有数据的程序。

假设我有一个这样的字符串：

```
string sqlString = "SELECT * FROM Customers Where Customers.Employee = '" + id + "' "; 
```

Id 正确地通过了我的函数并且是一个整数，所以我在编译时收到错误消息：“无效的指针添加”。

如果我将 id 声明为字符串当然没有错误，但我的表单中也没有结果。如果我在数据库单元格 Employee 中声明为文本并像这样构建我的查询：

```
string sqlString = "SELECT * FROM Customers WHERE Customers.Employee = 128"; 
```

我得到了结果，但我需要那个 Employee 作为一个整数，因为它是另一个表的外键。

那么，我应该如何处理我的查询以使结果通过变量 id 将整数作为参数传递，以便数据库中的单元格 Employee 也是整数？有任何想法吗？我真的很感激这里的一些帮助。

* * *

正如我所说，如果我将 id 转换为字符串，我的表单中没有结果，因为数据库中的 Employee 是一个整数。所以这：

```
std::ostringstream buf;
buf << "SELECT * FROM Customers Where Customers.Employee = '" << id  << "' ";
string str = buf.str(); 
```

不会完成这项工作或任何其他转换。

如何在查询中将 id 作为整数传递？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T15:47:37.310

您可以使用 sprintf，但在 C++ 中，您可以：

```
std::ostringstream buf;
buf << "SELECT * FROM Customers Where Customers.Employee = '" << id  << "' ";
string str = buf.str(); 
```

（未经测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T15:44:48.017

您需要将 id 转换为字符串，然后您的第一种方法应该有效。

请参阅此问题以了解如何进行转换： [Alternative to itoa() for convert integer to string C++?](https://stackoverflow.com/questions/228005/alternative-to-itoa-for-converting-integer-to-string-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T16:20:20.160

利用

```
std::ostringstream buf; buf << "SELECT * FROM Customers Where Customers.Employee = " << id ; string str = buf.str(); 
```

这应该可以，请尝试“12”——报价不应放在 12 之前和之后

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:53:30.807

你可以使用 boost::format 和 boost::str

```
string = boost::str(boost::format("This is a string with some %s and %d numbers") %"strings" %42); 
```

这应该是更好的方法，因为您最终会将所有替换变量放在一个位置。

# c++ - 在 C++ 中调试 GUI 应用程序

> ID：378213
> 
> 赞同：4
> 
> 时间：2008-12-18T15:39:07.437
> 
> 标签：c++, debugging, user-interface

背景：我目前正在调试一个使用 C++ 定制的 GUI 框架编写的应用程序。我已经设法确定了大多数错误，但我遇到最多的错误往往有一个共同的主题。所有这些似乎都与屏幕刷新、重绘或更新以匹配提供的数据有关。调试起来很痛苦，因为我不能在每次刷新时都中断，而且这些东西大部分都是时间敏感的，所以断点偶尔会“修复”错误。

**问：有没有人有任何调试基于 Windows 的 GUI 的技巧，尤其是关于刷新单个组件的技巧？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T15:55:14.547

我同意双显示器甚至远程调试，以减少对消息的干扰。

我也强烈推荐 Spy 实用程序。这些可让您查看系统中正在发送哪些消息。一个这样的程序是 Winspector。 [http://www.windows-spy.com/](http://www.windows-spy.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T15:49:42.873

这可能无济于事，但我发现在这种情况下使用双显示器很有用。我在一个屏幕上有调试器，在另一个屏幕上有应用程序。然后我可以单步执行代码并查看应用程序正在刷新或在另一个屏幕上执行任何操作。这样做仍然存在焦点问题，但至少我可以看到它何时重绘。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T16:14:22.387

日志记录几乎是唯一的答案。在不知道您的框架的情况下，我无法给出确切的答案，但基本上是打开一个文件并在各种感兴趣的过程中附加消息。最后关闭它。

在消息中包含您感兴趣的变量的值。

使用窗口消息框也有助于查看您是否在正确的分支或过程中。这对所有流量的影响很小。

最后尝试下载 .NET 的任何 Express 版本并使用 Winforms 尝试对特别有问题的区域进行测试。虽然 Winform 是它自己的框架，但它的控件与 Windows 提供的控件之间存在高度的对应关系。

我维护了一个项目 Mercury Capsule 的模拟作为轨道器空间模拟器的附加组件。它是用 C++ 编写的，某些面板和对话框必须直接使用 Win32。有时我启动了 VB6（后来是 VB.NET）来解决一些复杂的交互，然后将其转换为 C++ 中的 Win32 等价物。

然而，这是最后的手段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T15:52:35.800

在调试 Windows 控件和 UI 的刷新/重绘问题时，双屏确实很有帮助。

将应用程序放在第二个屏幕上不会让调试器在调试断点中断时在主 UI 屏幕上生成“无效”。

如果您不能有第二个屏幕，请尝试将两个应用程序并排放置，以便应用程序和调试器不会干扰。

# c# - 无法使用 mdbg 从进程中分离

> ID：378217
> 
> 赞同：3
> 
> 时间：2008-12-18T15:39:32.160
> 
> 标签：c#, .net, debugging, mdbg

从[这个问题](https://stackoverflow.com/questions/367966/how-to-intercept-debugging-information-debugview-style-in-c)开始，我现在有了可以使用 Mdbg API 附加到进程的代码。

问题是，如果需要，我无法脱离流程。当我调用 **mgProcess.Detach().WaitOne();** （其中 mgProcess 是从 MDbgEngine 对象创建的 MDbgProcess ）我收到以下错误消息：

```
 Process not synchronized. (Exception from HRESULT: 0x80131302)
     at Microsoft.Samples.Debugging.CorDebug.NativeApi.ICorDebugController.Detach()
     at Microsoft.Samples.Debugging.CorDebug.CorController.Detach() in C:\mdbg\src\debugger\corapi\Controller.cs:line 89
     at Microsoft.Samples.Debugging.MdbgEngine.MDbgProcess.Detach() in C:\mdbg\src\debugger\mdbgeng\Process.cs:line 716 
```

如果我只是尝试调用**mgProcess.Detach()**或**mgProcess.CorProcess.Detach()**我会得到相同的结果。

有谁知道分离 Mdbg 进程的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:15:58.453

[事实证明，当被调试者正在运行时](http://blogs.msdn.com/jmstall/archive/2006/03/22/att-macros.aspx)，Mdbg 不允许您做任何事情。

```
 MgProcess.CorProcess.Stop(0);
  MgProcess.Detach(); 
```

似乎是前进的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-11-14T08:51:50.143

试试这个：

```
proc.AsyncStop();
proc.Detach(); 
```

或者

```
Proc.CorProcess.Stop(0);  
Proc.Detach(); 
```

# silverlight-2.0 - 为最终用户提供无需访问 Microsoft 站点即可安装 Silverlight 2.0 的机制

> ID：378224
> 
> 赞同：1
> 
> 时间：2008-12-18T15:41:14.967
> 
> 标签：silverlight-2.0

我们基于 Web 的应用程序安装在最终客户处。通常，这些客户无法访问互联网。我们应用程序的下一个版本的一部分是基于 Silverlight 2.0。

当没有 Silverlight 2.0 插件的浏览器尝试访问我们应用程序的 Silverlight 部分时，客户会获得标准的“安装 Microsoft Silverlight”图像，单击该图像会尝试访问 Microsoft 下载站点。

有没有办法控制这个页面？我们希望在我们的应用程序中提供 Silverlight 插件，以便用户可以在尚未安装插件时直接从我们的应用程序下载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T15:47:21.333

您可以使用最初在 Silverlight v1 中提供的 javascript API 来编辑加载动画和安装机制等内容。 [Silverlight Javascript API](http://msdn.microsoft.com/en-us/library/cc903928(VS.95).aspx)

# vb.net - 如何在 VB.NET 中检查 Null 值

> ID：378225
> 
> 赞同：19
> 
> 时间：2008-12-18T15:41:48.240
> 
> 标签：vb.net, dataset

我有这个：

```
If String.IsNullOrEmpty(editTransactionRow.pay_id.ToString()) = False Then
    stTransactionPaymentID = editTransactionRow.pay_id 'Check for null value
End If 
```

现在，什么时候`editTransactionRow.pay_id`是 Null，Visual Basic 会抛出异常。这段代码有问题吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2008-12-18T15:51:11.687

`null`VB中的等价物是`Nothing`你的支票想要：

```
If editTransactionRow.pay_id IsNot Nothing Then
    stTransactionPaymentID = editTransactionRow.pay_id
End If 
```

或者，如果您实际上想要检查 SQL 空值：

```
If editTransactionRow.pay_id <> DbNull.Value Then
    ...
End If 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-18T15:44:22.463

editTransactionRow.pay_id 是 Null 所以实际上你正在做： null.ToString() 并且它不能被执行。您需要检查 editTransactionRow.pay_id 而不是 editTransactionRow.pay_id.ToString();

您的代码应该是（如果 pay_id 是一个字符串）：

```
If String.IsNullOrEmpty(editTransactionRow.pay_id) = False Then
    stTransactionPaymentID = editTransactionRow.pay_id 'Check for null value
End If 
```

如果 pay_id 是一个整数，那么您可以在没有字符串的情况下检查它是否通常为空...编辑以显示它是否不是字符串：

```
If editTransactionRow.pay_id IsNot Nothing Then
    stTransactionPaymentID = editTransactionRow.pay_id 'Check for null value
End If 
```

如果它来自数据库，您可以使用 IsDBNull，但如果不是，请不要使用它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-12-18T15:55:03.660

如果您使用的是强类型数据集，那么您应该这样做：

```
If Not ediTransactionRow.Ispay_id1Null Then
    'Do processing here
End If 
```

您收到错误是因为强类型数据集检索基础值并通过属性公开转换。例如，这基本上是正在发生的事情：

```
Public Property pay_Id1 Then
   Get
     return DirectCast(me.GetValue("pay_Id1", short)
   End Get
   'Abbreviated for clarity
End Property 
```

GetValue 方法返回的 DBNull 无法转换为 short。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2011-09-01T20:33:28.400

您还可以使用 IsDBNull 函数：

```
If Not IsDBNull(editTransactionRow.pay_id) Then
... 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-02-29T11:09:31.813

```
If Not IsDBNull(dr(0)) Then
    use dr(0)
End If 
```

不要使用`= Nothing`or `Is Nothing`，因为它无法检查数据行值是否为空。我试过了，我确保上面的代码有效。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-06-07T00:09:40.853

我发现最安全的方法是

```
If Not editTransactionRow.pay_id Is Nothing 
```

它可能读起来很糟糕，但 ISIL 实际上与 IsNot Nothing 有很大不同，它不会尝试评估表达式，这可能会给出空引用异常。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T15:45:09.780

您必须检查以确保 editTransactionRow 不为空且 pay_id 不为空。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-11-21T14:04:10.247

这是准确的答案。试试这个代码：

```
If String.IsNullOrEmpty(editTransactionRow.pay_id.ToString()) = False Then
    stTransactionPaymentID = editTransactionRow.pay_id 'Check for null value
End If 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T15:46:34.970

```
If Not editTransactionRow.pay_id AndAlso String.IsNullOrEmpty(editTransactionRow.pay_id.ToString()) = False Then
    stTransactionPaymentID = editTransactionRow.pay_id 'Check for null value
End If 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-18T15:59:23.277

```
 If Short.TryParse(editTransactionRow.pay_id, New Short) Then editTransactionRow.pay_id.ToString() 
```

# asp.net-mvc - 构建具有可变数量成员的对象？

> ID：378229
> 
> 赞同：0
> 
> 时间：2008-12-18T15:43:30.343
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, anonymous-types

在我的 asp.net mvc 页面中，我想调用 RedirectToAction(actionName, controllerName, values)。

values 参数是一个包含所有必要值的对象。例子

```
return RedirectToAction(redirectAction, redirectController,
          new{ personId = foundId,
               personEmail = foundEmail,
               personHeigh = foundHeight}); 
```

这一切都很好，如果这些参数都不是 null 或空字符串。发生这种情况时，System.Uri.EscapeDataString(String stringToEscape) 会引发 ArgumentNullException。
问题是我在编译时不知道哪些参数将为空。此外，我不希望为 notnull 值的每个可能组合创建一个对象。
在我的示例中只有三个参数，但如果有 10 个呢？可能的组合呈指数增长。由于无法将字段添加到匿名类型，因此我也无法将参数一一添加。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T15:54:37.653

您可以强制非空值...

```
return RedirectToAction(redirectAction, redirectController,
      new{ personId = foundId,
           personEmail =foundEmail ?? string.Empty,
           personHeigh = foundHeight ?? string.Empty}); 
```

# c# - 对 PDF 文件进行数字签名

> ID：378247
> 
> 赞同：60
> 
> 时间：2008-12-18T15:46:06.330
> 
> 标签：c#, pdf, digital-signature

我有一个识别用户的数字证书。我需要用它来对 pdf 文件进行数字签名。

有没有人有一个不使用第三方组件的例子？我需要完成这项工作，但最好能完全了解事情是如何完成的。

请提供 C# 示例:)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2008-12-18T19:58:24.823

开源[iTextSharp](http://itextsharp.sourceforge.net/)库将允许您执行此操作。这是一篇解释如何对 pdf 文件进行数字签名的[帖子。](http://www.codeproject.com/Articles/14488/E-signing-PDF-documents-with-iTextSharp)如果您不想使用第三方库，那么您可以自己实现它，但这可能是一项艰巨的任务 -> 您可以从阅读[pdf 规范](http://www.adobe.com/devnet/acrobat/pdfs/PDF32000_2008.pdf)(8.6MB)开始

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-12-20T10:37:01.580

正确的 PDF 签名是一项*非常*复杂的任务。存在许多不符合 PDF 规范的文件（损坏的外部参照等），您的代码必须处理所有这些文件。然后各种 Acrobat 版本以不同的方式处理签名字段中的某些内容。因此，如果您需要完成任务（而不是研究其工作原理），您应该依赖第三方解决方案，例如我们的[PDFBlackbox](http://www.eldos.com/sbbdev/net-pdf.php)组件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2010-05-06T05:33:37.967

在不使用第三方组件的情况下对 PDF 文档进行数字签名需要大量工作，通常最好避免。

组件为您完成所有繁重的工作，因此您不必这样做。您应该会发现有一些优秀的免费 PDF 组件可以满足您的需求。

以下用 C# 编写的示例显示了使用 ABCpdf 对 PDF 文档进行数字签名是多么简单：

```
Doc theDoc = new Doc();
theDoc.Read(Server.MapPath("../Rez/Authorization.pdf"));
Signature theSig = (Signature)theDoc.Form["Signature"];
theSig.Location = "Washington";
theSig.Reason = "Schedule Agreed";
theSig.Sign(Server.MapPath("../Rez/JohnSmith.pfx"), "111111");
theDoc.Save(Server.MapPath("Signed.pdf")); 
```

来源：[ABCpdf 文档 - 签名方法](http://www.websupergoo.com/helppdf7net/source/6-abcpdf6.objects/signature/1-methods/sign.htm)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-05-10T20:37:31.670

失去了我的第一个答案。可能想让 DocQ 尝试[链接文本](https://docq.com/ "对 PDF 进行数字签名") 他们有自己的证书，可以免费/便宜地为您执行此操作，以密封和加密 PDF。他们还有一个你可以使用的 API。

# vb.net - 如何在 VB .NET 中将 Double 向下舍入到最接近的整数？

> ID：378259
> 
> 赞同：10
> 
> 时间：2008-12-18T15:50:27.117
> 
> 标签：vb.net, double, rounding

如何在 VB .NET 中将 Double 向下舍入到最接近的整数？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-05T08:25:28.273

这已经很老了，但使用的公认答案在`Math.Truncate`技术上是不正确的：截断舍入*为零*，而不是向下。例如，-1.5 舍入为 -1 而不是 -2。

为了始终向下舍入*，*请使用`Math.Floor`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T15:51:41.810

我们是在谈论 VB.NET 还是 VB6？在 VB.NET 中使用[Math.Truncate](http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-11T12:43:33.387

这是我们使用的逻辑：

```
dim d as decimal = 1.50

dim I as int64 = convert.toint64(D) 
```

# sharepoint - 控制导出到电子表格时自定义字段类型的呈现方式

> ID：378261
> 
> 赞同：0
> 
> 时间：2008-12-18T15:50:52.433
> 
> 标签：sharepoint

我创建了一个基于 SPFieldLookup 的自定义字段类型。但是，当我使用 SharePoint 的“导出到电子表格”功能时，它没有正确呈现。

对于普通查找字段，仅呈现查找值。对于我的自定义字段，使用了查找值的字符串表示形式（即“1;#My Lookup Value”）。

有没有办法更改自定义查找字段，以便在导出到电子表格时仅呈现查找值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-22T14:56:29.027

我不确定它是否可以做你想做的事。

以下是 MSDN 上 SPFieldLookup 文档的注释：

[对继承者的说明：在 Windows SharePoint Services 3.0 中，基于自定义字段类型的列不会出现在数据表视图中，并且在您将列表导出到 Microsoft Excel 电子表格时也不包括在内。](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldlookup.aspx)

也许您可以查看fldtypes_XXX.xml 中的[DisplayPattern 元素](http://msdn.microsoft.com/en-us/library/ms948151.aspx)

# ms-access - Access 2007 Engine：如何将它包含在我的 .msi 安装程序中？

> ID：378264
> 
> 赞同：2
> 
> 时间：2008-12-18T15:51:28.020
> 
> 标签：ms-access, windows-installer, installation, ms-access-2007

我有一个 .NET 应用程序，它使用 accdb 文件（MS Access 2007 格式）作为其数据库。要在另一台机器上安装这个应用程序，我需要在该机器上安装 Access 引擎。Microsoft 有这个文件：AccessDatabaseEngine.exe，其中包含引擎，但在安装过程中提取时，会运行另一个 .msi 安装程序。

您可以猜到，由于此 msi 在安装另一个 msi（我的应用程序的安装程序）期间运行，因此 Access 引擎设置失败并出现错误 1500：“另一个安装正在进行中。在继续这个之前完成那个...”

我也找到了 Access 2007 的运行时，它确实安装了引擎，但运行时包又是一个 msi 安装程序，这意味着我仍然遇到同样的问题。

将引擎包含在我的应用程序安装程序中的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:21:04.183

您可能想看看这篇文章：[添加程序到 Access 2007 部署包](http://msdn.microsoft.com/en-gb/library/bb687991.aspx)

[Access Developer Extensions](http://msdn.microsoft.com/en-us/office/bb229700.aspx)提供了一个基本但功能强大的安装程序，可以处理一般部署方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T11:45:00.133

最好的想法是构建自己的 msi 包，包括所需的访问文件。您可以使用 VERITAS Wininstall 之类的产品。您有这种“发现”方法，允许您通过 (1) 拍摄系统的 2 个快照（安装前一个，安装后一个）然后 (2) 创建与安装相对应的 .msi 文件，从而构建一个完全可操作的 .msi 文件过程。

无论如何，我建议您拥有多个包，一个用于 Access，当计算机加入您公司的域时，可以使用“所有用户”选项安装它，一个用于您的应用程序。通过这样做，您将能够分发您的应用程序的新版本，而无需重新分发 Access，这会占用几兆空间以及几分钟用户最宝贵的时间）。

Sio 如果 Microsoft 已经提供了 Access Runtime msi 包，只需保持“原样”并在新机器加入域时自动将其分发到您的网络上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-09T12:32:06.973

I wouldn't recommend WinInstall, we have it in my office and we have to keep calling them in to package stuff for us as it's so finiky to use. Some things they haven't been able to package at all. WISE Studio is better or a free alternative is [AppDeploy](http://www.appdeploy.com/) whihc I have heard great things about.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-27T11:12:29.843

I found this software called "Bootstrapper Manifest Generator" or BMG. It helps create a prerequisite package using an MSI or EXE installer file, and adds it to VS2008 Prerequisites dialog box in Setup and Deployment projects. Although it's not that user friendly, it does the job. It's on MSDN: [code.msdn.microsoft.com/bmg](http://code.msdn.microsoft.com/bmg)

Thought it's good to save others from going through all the trouble.

# winapi - Win32：IPProgressDialog 不会消失，直到您将鼠标悬停在它上面

> ID：378265
> 
> 赞同：2
> 
> 时间：2008-12-18T15:51:31.700
> 
> 标签：winapi, message-queue

我正在使用[Win32 进度对话框](http://msdn.microsoft.com/en-us/library/bb775248(VS.85).aspx)。最糟糕的是，当我打电话时：

```
progressDialog.StopProgressDialog(); 
```

它不会消失。它一直在屏幕上，直到用户将鼠标移到它上面——*然后*它突然消失了。

调用立即`StopProgressDialog`返回（即它不是同步调用）。我可以在电话返回后通过做一些事情来证明这一点：

```
private void button1_Click(object sender, EventArgs e)
{
   //Force red background to prove we've started
   this.BackColor = Color.Red;
   this.Refresh();

   //Start a progress dialog
   IProgressDialog pd = (IProgressDialog)new ProgressDialog();
   pd.StartProgressDialog(this.Handle, null, PROGDLG.Normal, IntPtr.Zero);

   //The long running operation
   System.Threading.Thread.Sleep(10000);

   //Stop the progress dialog
   pd.SetLine(1, "Stopping Progress Dialog", false, IntPtr.Zero);
   pd.StopProgressDialog();
   pd = null;

   //Return form to normal color to prove we've stopped.
   this.BackColor = SystemColors.Control;
   this.Refresh();
} 
```

表格：

*   开始灰色
*   变红表示我们已经盯着
*   变回灰色以显示我们已调用**停止**

所以调用`StopProgressDialog`已经返回，除了进度对话框仍然坐在那里，嘲笑我，显示消息：

> 停止进度对话框

[![替代文字](https://i.stack.imgur.com/5YXHR.png)](https://i.stack.imgur.com/5YXHR.png)

* * *

## 10 秒内不出现

此外，进度对话框不会出现在屏幕上，直到

```
System.Threading.Thread.Sleep(10000); 
```

十秒钟的睡眠结束了。

* * *

## 不限于 .NET WinForms

同样的代码在 Delphi 中也失败了，它也是 Window 窗口的对象包装器：

```
procedure TForm1.Button1Click(Sender: TObject);
var
   pd: IProgressDialog;
begin
   Self.Color := clRed;
   Self.Repaint;

   pd := CoProgressDialog.Create;
   pd.StartProgressDialog(Self.Handle, nil, PROGDLG_NORMAL, nil);

   Sleep(10000);

   pd.SetLine(1, StringToOleStr('Stopping Progress Dialog'), False, nil);
   pd.StopProgressDialog;
   pd := nil;

   Self.Color := clBtnFace;
   Self.Repaint;
end; 
```

* * *

## 保留签名

`StopProgressDialog`如果失败会抛出异常。

*IProgressDialog 中的大多数*方法，在翻译成 C#（或 Delphi）时，使用编译器将失败的 COM HRESULTS 转换为本地语言异常的自动机制。

换句话说，如果 COM 调用返回错误 HRESULT（即小于零的值），以下两个签名将引发异常：

```
//C#
void StopProgressDialog();

//Delphi
procedure StopProgressDialog; safecall; 
```

而以下内容可让您查看 HRESULT 并自行做出反应：

```
//C#
[PreserveSig]
int StopProgressDialog();

//Delphi
function StopProgressDialog: HRESULT; stdcall; 
```

HRESULT 是一个 32 位值。如果设置了高位（或值为负），则为错误。

我正在使用前一种语法。因此，如果`StopProgressDialog`返回错误，它将自动转换为语言异常。

**注意：**仅对于 SaG，我使用了`[PreserveSig]`语法，返回的 HRESULT 为零；

* * *

## 消息等待？

症状类似于[Raymond Chen 曾经描述](http://blogs.msdn.com/oldnewthing/archive/2005/02/17/375307.aspx)的，这与错误使用 PeekMessage 后跟 MsgWaitForMultipleObjects 有关：

> “有时我的程序卡住了，报告的记录比它应该报告的少。我必须摇动鼠标才能更新值。再过一段时间，它落后了两个，然后是三个……”

但这意味着失败出现在 IProgressDialog 中，因为它在 CLR .NET WinForms 和本机 Win32 代码上同样失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-01-16T21:50:00.183

为了真正隐藏对话框，我在 C++ 包装类中添加了以下内容：

```
void CProgressDlg::Stop()
{
    if ((m_isVisible)&&(m_bValid))
    {
        HWND hDlgWnd = NULL;
        //Sometimes the progress dialog sticks around after stopping it,
        //until the mouse pointer is moved over it or some other triggers.
        //This process finds the hwnd of the progress dialog and hides it
        //immediately.
        IOleWindow *pOleWindow;
        HRESULT hr=m_pIDlg->QueryInterface(IID_IOleWindow,(LPVOID *)&pOleWindow);
        if(SUCCEEDED(hr))
        {
            hr=pOleWindow->GetWindow(&hDlgWnd);
            if(FAILED(hr))
            {
                hDlgWnd = NULL;
            }
            pOleWindow->Release();
        }
        m_pIDlg->StopProgressDialog();
        if (hDlgWnd)
            ShowWindow(hDlgWnd, SW_HIDE);

        m_isVisible = false;
        m_pIDlg->Release();
        m_bValid = false;
    }
} 
```

这是在 C++ 中，但您应该能够将其适应 C# 而没有太多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T16:18:51.350

检查 StopProgressDialog 方法的返回值，也许这会给你更多关于正在发生的事情的信息：

> HRESULT StopProgressDialog(VOID);
> 
> *如果成功则返回 S_OK，否则返回错误值。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T16:29:45.290

完整的 P/Invoke 签名[可用](http://www.pinvoke.net/default.aspx/Interfaces/IProgressDialog.html)，但为了便于阅读，这里是精简版：

```
[ComImport]
[Guid("EBBC7C04-315E-11d2-B62F-006097DF5BD4")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IProgressDialog
{
    void StartProgressDialog(IntPtr hwndParent,
    [MarshalAs(UnmanagedType.IUnknown)]    object punkEnableModless, //IUnknown
        PROGDLG dwFlags,  //DWORD
        IntPtr pvResevered //LPCVOID
        );
    void StopProgressDialog();
    void SetTitle(
        [MarshalAs(UnmanagedType.LPWStr)] string pwzTitle //LPCWSTR
        );
    void SetAnimation(
        IntPtr hInstAnimation, //HINSTANCE
        ushort idAnimation //UINT
        );
    [PreserveSig]
    [return: MarshalAs(UnmanagedType.Bool)]
    bool HasUserCancelled();
    void SetProgress(
        uint dwCompleted, //DWORD
        uint dwTotal //DWORD
        );
    void SetProgress64(
        ulong ullCompleted, //ULONGLONG
        ulong ullTotal //ULONGLONG
        );
    void SetLine(
        uint dwLineNum, //DWORD
        [MarshalAs(UnmanagedType.LPWStr)] string pwzString, //LPCWSTR
        [MarshalAs(UnmanagedType.VariantBool)] bool fCompactPath, //BOOL
        IntPtr pvResevered //LPCVOID
        );
    void SetCancelMsg(
        [MarshalAs(UnmanagedType.LPWStr)] string pwzCancelMsg,
        object pvResevered
        );
    void Timer(PDTIMER dwTimerAction, object pvResevered);
} 
```

**注意：**几乎所有方法的签名都遵循适当的 COM 规则。除了`HasUserCancelled`. 它不遵循 COM 类中方法签名的规则。所有方法都应该返回一个**HRESULT**，并且返回值应该在一个`out retval`参数中。**HasUserCancelled**实际上返回一个布尔值。

**注意：**几乎所有这些世界都是你的。除了`Europa`. 尝试不在那里着陆。

**注意：**几乎你所有的基地都属于我们。除了`WhatYouSay`. 主灯亮。

# inheritance - XSD继承设计

> ID：378279
> 
> 赞同：2
> 
> 时间：2008-12-18T15:53:44.830
> 
> 标签：inheritance, xsd

我的 xsd 中有这个：

```
<xsd:simpleType name="line_action">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="add"/>
        <xsd:enumeration value="delete"/>
        <xsd:enumeration value="remove"/>
        <xsd:enumeration value="suspend"/>
        <xsd:enumeration value="restore"/>
        <xsd:enumeration value="update"/>
    </xsd:restriction>
</xsd:simpleType>

<xsd:simpleType name="action_enum_5">
    <xsd:restriction base="tns:line_action">
        <xsd:enumeration value="add"/>
        <xsd:enumeration value="remove"/>
    </xsd:restriction>
</xsd:simpleType>

    <xsd:element name="call_forward_dont_answer">
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:restriction base="tns:basic_option">
                    <xsd:sequence>
                        <xsd:element name="paths" type="tns:path_type"/>
                        <xsd:element name="number_of_rings" type="tns:number_of_rings_type"/>
                        <xsd:element name="ring_to_number" type="tns:telephone_number_type"/>
                    </xsd:sequence>
                    <xsd:attribute name="action" type="tns:action_enum_5"/>
                </xsd:restriction>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element> 
```

所以对于 call_forward_dont_answer，我想扩展基本选项和更多的元素/字段，但是操作应该只是添加和删除。如果我进行扩展，那么我不能更改属性类型，但是如果我进行限制，那么我不能添加新的元素/字段？

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-19T13:48:02.990

好吧，我自己修好了。通过制定限制，然后扩展该限制。

```
<xsd:simpleType name="line_action">
    <xsd:restriction base="xsd:string">
        <xsd:enumeration value="add"/>
        <xsd:enumeration value="delete"/>
        <xsd:enumeration value="remove"/>
        <xsd:enumeration value="suspend"/>
        <xsd:enumeration value="restore"/>
        <xsd:enumeration value="update"/>
    </xsd:restriction>
</xsd:simpleType>
<xsd:complexType name="super_option">
    <xsd:attribute name="action" type="tns:line_action"/>
</xsd:complexType>

        <xsd:element name="call_forward_dont_answer">
            <xsd:complexType>
                <xsd:complexContent>
                    <xsd:extension base="tns:updatable_option">
                        <xsd:sequence>
                            <xsd:element name="paths" type="tns:path_type"/>
                            <xsd:element name="number_of_rings" type="tns:number_of_rings_type"/>
                            <xsd:element name="ring_to_number" type="tns:telephone_number_type"/>
                        </xsd:sequence>
                    </xsd:extension>
                </xsd:complexContent>
            </xsd:complexType>
        </xsd:element>

<xsd:complexType name="basic_option">
    <xsd:complexContent>
        <xsd:restriction base="tns:super_option">
            <xsd:attribute name="action" type="tns:action_enum_1"/>
        </xsd:restriction>
    </xsd:complexContent>
</xsd:complexType>

<xsd:complexType name="updatable_option">
    <xsd:complexContent>
        <xsd:restriction base="tns:super_option">
            <xsd:attribute name="action" type="tns:action_enum_5"/>
        </xsd:restriction>
    </xsd:complexContent>
</xsd:complexType> 
```

# function - 纬度/经度 + 距离 + 航向 --> 纬度/经度

> ID：378281
> 
> 赞同：17
> 
> 时间：2008-12-18T15:53:55.283
> 
> 标签：function, geometry, geospatial

所以：我有以下函数，改编自网上找到的公式，它采用两个纬度/经度坐标并找到它们之间的距离（以英里为单位）（沿着球形地球）：

```
public static double distance (double lat1, double lon1, double lat2, double lon2) {
        double theta = toRadians(lon1-lon2);
        lat1 = toRadians(lat1);
        lon1 = toRadians(lon1);
        lat2 = toRadians(lat2);
        lon2 = toRadians(lon2);

        double dist = sin(lat1)*sin(lat2) + cos(lat1)*cos(lat2)*cos(theta);
        dist = toDegrees(acos(dist)) * 60 * 1.1515 * 1.609344 * 1000;

        return dist;
    } 
```

据我所知，这很好用。

我需要的是第二个函数，它使用完全相同的地球几何模型，采用单个纬度/经度对 [A]、航向和距离，并输出一个新的纬度/经度对 [B] 使得如果您从 [A] 点开始，并以给定的航向行进给定的距离，您将在 [B] 点结束。

这就是我的几何技能完全离开我的事实发挥作用的地方:)

任何帮助将非常感激！

谢谢，-丹

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-18T16:03:57.010

[我从The Aviation Formulary](http://edwilliams.org/avform.htm)获得了大部分此类公式。

他给出的公式是：

> ### 给定径向和距离的纬度/经度
> 
> 如果：
> 
> ```
>  lat=asin(sin(lat1)*cos(d)+cos(lat1)*sin(d)*cos(tc))
>  IF (cos(lat)=0)
>     lon=lon1      // endpoint a pole
>  ELSE
>     lon=mod(lon1-asin(sin(tc)*sin(d)/cos(lat))+pi,2*pi)-pi
>  ENDIF 
> ```
> 
> 此算法仅限于 dlon < pi/2 的距离，即那些在经度上延伸不到地球圆周四分之一的距离。如果允许更大的距离，则需要一个完全通用但更复杂的算法：
> 
> ```
>  lat =asin(sin(lat1)*cos(d)+cos(lat1)*sin(d)*cos(tc))
>      dlon=atan2(sin(tc)*sin(d)*cos(lat1),cos(d)-sin(lat1)*sin(lat))
>      lon=mod( lon1-dlon +pi,2*pi )-pi 
> ```

请注意，他使用“tc”代表真实航向（从北顺时针以弧度表示），并且他给出的距离是沿地球表面的弧度弧度。公式的第一部分对此进行了解释（以及从海里来回转换的公式）。此外，请查看该页面上的“实施说明”和“工作示例”。

# php - Zend_Controller 遵循 PEAR 命名约定

> ID：378284
> 
> 赞同：1
> 
> 时间：2008-12-18T15:54:13.520
> 
> 标签：php, zend-framework, zend-controller

我正在使用 zend 框架开发一个网络应用程序。我喜欢所有自动加载的工作方式，但是我不太喜欢 Zend_Controller 默认命名控制器的方式。我正在寻找一种方法来使 zend_controller 能够理解存储在 {$app}/Controller/User.php 中的名为 Controller_User 的控制器类。无论如何我可以用最少的额外代码来做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T17:27:42.287

这当然不是一个循序渐进的答案，但我相信您可以通过继承标准调度程序类，并对处理控制器目录和控制器对象的函数进行一些更改来完成您想要的。[ZF 参考指南 - 子类化调度程序](http://framework.zend.com/manual/en/zend.controller.dispatcher.html#zend.controller.dispatcher.subclassing "子类化调度程序")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T07:52:13.833

子类调度程序（引自[http://cslai.coolsilon.com/2009/03/28/extending-zend-framework/](http://cslai.coolsilon.com/2009/03/28/extending-zend-framework/)）

```
class Coolsilon_Controller_Dispatcher 
    extends Zend_Controller_Dispatcher_Standard { 
    public function __construct() { 
        parent::__construct(); 
    } 

    public function formatControllerName($unformatted) { 
        return sprintf( 
            'Controller_%s', ucfirst($this->_formatName($unformatted)) 
        ); 
    } 

    public function formatActionName($unformatted) { 
        $formatted = $this->_formatName($unformatted, true); 
        return strtolower(substr($formatted, 0, 1)) . substr($formatted, 1); 
    } 
} 
```

# asp.net - 限制可以输入“文本区域”的文本数量的最佳方法是什么？

> ID：378294
> 
> 赞同：4
> 
> 时间：2008-12-18T15:57:02.703
> 
> 标签：asp.net, javascript, html

限制用户可以在网页上的“文本区域”字段中输入的文本数量的最佳方法是什么？有问题的应用程序是 ASP .NET，但首选与平台无关的答案。

我知道可能需要一些 javascript 才能完成此操作，因为如果可能的话，我不希望实际使用该数据量执行“发布”，因为 ASP .NET 确实对其请求的大小有上限将服务（虽然我不知道那是什么）。

所以也许真正的问题是，在满足以下标准的 javascript 中执行此操作的最佳方法是什么：

- 对于简单地输入数据和从另一个来源复制/粘贴数据的用户来说，必须同样有效。

- 必须尽可能对“508 合规性”友好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T16:06:50.063

```
function limit(element, max_chars)
{
    if(element.value.length > max_chars)
        element.value = element.value.substr(0, max_chars);
} 
```

作为javascript，并且...

```
<textarea onkeyup="javascript:limit(this, 80)"></textarea> 
```

作为 XHTML。将 80 替换为您想要的限制。无论如何，我就是这样做的。

请注意，这将阻止用户在文本框中输入超出限制，但是用户仍然可以使用自己的 javascript 绕过此限制。为了确保，您还必须检查您的服务器端语言。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T16:04:02.487

在 ASP.Net 中使用 RegularExpressionValidator 控件来验证字符数以及通常的验证

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T16:00:10.140

在我看来，最用户友好的想法是像 Twitter-one 这样的解决方案。提供用户已超过最大值的视觉指示，但不要限制他打字。

无论您使用什么 Javascript，您仍然需要在服务器端进行验证。禁用 Javascript 的用户将能够规避您的限制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T16:05:27.880

正如 Javache 所说，您仍然需要检查服务器端。我们一直在使用 jQuery[验证器插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，该插件支持最大长度以及其他音调...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T16:14:28.877

我用这个，限制是必须的。它还为用户提供剩余的字符数。

```
function CountLength(vControl)
    {
        var strValue = vControl.value;
        var vMax = 480;
        var vLeft = vMax - strValue.length;
        if (vLeft < 0)
        {
            vLeft = 0;
        }
        var vMessage = returnObjById('TextCounter');
        if (document.all)
        {
            vMessage.innerText = vLeft + ' characters remaining.';
        }
        else
        {   
            vMessage.textContent = vLeft + ' characters remaining.';
        }
        if (vLeft == 0)
        {
            vControl.value = vControl.value.substring(0, vMax);
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-10T19:18:33.837

jQuery 在这里也提供了一些[选项](http://www.ajaxray.com/blog/2007/11/09/interactive-character-limit-for-textarea-using-jquery/)。选项、选项和选项。

# c++ - 为什么我的 WM_UNICHAR 处理程序从未被调用？

> ID：378296
> 
> 赞同：2
> 
> 时间：2008-12-18T15:58:55.553
> 
> 标签：c++, com, unicode, atl

我有一个 ATL 控件，我希望它能够识别 Unicode。我为 WM_UNICHAR 添加了一个消息处理程序：

```
MESSAGE_HANDLER( WM_UNICHAR, OnUniChar ) 
```

但是，出于某种原因，永远不会调用 OnUniChar 处理程序。

根据文档，应首先使用“UNICODE_NOCHAR”调用处理程序，如果您想接收 UTF-32 字符，则处理程序应返回 TRUE。但是，正如我所说，处理程序永远不会被调用。

有什么特别需要做的来激活它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T20:04:30.520

你在做什么你认为应该生成 WM_UNICHAR 消息？

如果您的代码（或 ATL 代码）最终调用 CreateWindowW，那么您的窗口已经支持 Unicode，并且 WM_CHAR 消息将是 UTF-16 格式。

该文档还不清楚何时生成 WM_UNICHAR 消息，但从我在 Google Groups 和 Internet 上非常有限的闲逛中收集到的信息来看，它看起来像是由 3rd 方应用程序而不是 Windows 本身发送的, 除非 Window 是一个 ANSI 窗口（CreateWindowA 等等）。您是否尝试过手动将 WM_UNICHAR 消息发送到您的窗口以查看会发生什么？如果您收到消息，那么您的消息调度代码没有任何问题，并且没有任何事情会导致 WM_UNICHAR。您还可以使用 Spy++ 检查您是否收到该消息，尽管我怀疑它只是没有被发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T07:14:41.550

我今天的经验是 Spy++ 在 Unicode 过程中没有为 WM_CHAR 提供正确的结果。我得到 ASCII 翻译或“？” 显示在消息列表中，即使我查看原始（未解码）参数。调试器显示 wParam 是 Unicode 代码点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-05T16:46:47.853

```
void CMFCProView::OnUniChar (UINT xChar, UINT nRepCnt, UINT nFlags)
void CMFCProView::OnChar    (UINT xChar, UINT nRepCnt, UINT nFlags) 
```

UINT（无符号整数）的范围是 0 到 4294967295 十进制（16 位）。

OnChar 可以做任何你想让 OnUniChar 做的事情。单击`A`软键盘上的英文字符，OnChar 将收到`0x0041`. 点击一个 CJKV 一（一），然后 OnChar 将收到`0x4E00`. 所以我们在 App 中不需要 OnUniChar。

# java - 如何动态替换 Eclipse 插件的类加载器？

> ID：378297
> 
> 赞同：2
> 
> 时间：2008-12-18T15:59:22.777
> 
> 标签：java, hibernate, jdbc, eclipse-plugin, osgi

我正在开发一个适合客户端-服务器模型的 Eclipse 插件。它是一个商业项目，因此我们无法为我们通过插件支持的各种数据库重新分发 JDBC 驱动程序。

所以我开发了一个首选项页面来允许用户定位 jars，并有一个简单的发现机制，它遍历 jar 文件中的类，加载每个类以验证它是否实现了 java.sql.Driver 接口。这一切都很好。

但问题是我正在使用 Hibernate。Hibernate 使用 Class.forName() 来实例化 JDBC 驱动程序。

如果我尝试使用以下内容，我会得到`ClassNotFoundException`.

```
public Object execute(final IRepositoryCallback callback)
{
    final DatabaseDriverClassLoader loader = new DatabaseDriverClassLoader(
        Activator.getDefault().getDatabaseDriverRegistry());
    final ClassLoader oldLoader = Thread.currentThread()
        .getContextClassLoader();
    try
    {
        Thread.currentThread().setContextClassLoader(loader);
        try
        {
            final SessionFactory sessionFactory = this.configuration
                .buildSessionFactory();
            if (sessionFactory != null)
            {
                final Session session = sessionFactory
                    .openSession();
                if (session != null)
                {
                    // CHECKSTYLE:OFF
                    try
                    // CHECKSTYLE:ON
                    {
                        return callback.doExecute(session);
                    }
                    finally
                    {
                        session.close();
                    }
                }
            }
            connection.close();
        }
        finally
        {
        }
    }
    // CHECKSTYLE:OFF
    catch (Exception e)
    // CHECKSTYLE:ON
    {
        RepositoryTemplate.LOG.error(e.getMessage(), e);
    }
    finally
    {
        Thread.currentThread().setContextClassLoader(oldLoader);
    }
    return null;
} 
```

如果我尝试按如下方式自己创建驱动程序，我会得到一个 SecurityException。

```
public Object execute(final IRepositoryCallback callback)
{
    final DatabaseDriverClassLoader loader = new DatabaseDriverClassLoader(
        Activator.getDefault().getDatabaseDriverRegistry());
    final ClassLoader oldLoader = Thread.currentThread()
        .getContextClassLoader();
    try
    {
        Thread.currentThread().setContextClassLoader(loader);
        final Class driverClass = loader.loadClass(this.connectionDriverClassName);
        final Driver driver = (Driver)driverClass.newInstance();
        DriverManager.registerDriver(driver);
        try
        {
            final Connection connection = DriverManager.getConnection(
                this.connectionUrl, this.connectionUsername,
                this.connectionPassword);
            final SessionFactory sessionFactory = this.configuration
                .buildSessionFactory();
            if (sessionFactory != null)
            {
                final Session session = sessionFactory
                    .openSession(connection);
                if (session != null)
                {
                    // CHECKSTYLE:OFF
                    try
                    // CHECKSTYLE:ON
                    {
                        return callback.doExecute(session);
                    }
                    finally
                    {
                        session.close();
                    }
                }
            }
            connection.close();
        }
        finally
        {
            DriverManager.deregisterDriver(driver);
        }
    }
    // CHECKSTYLE:OFF
    catch (Exception e)
    // CHECKSTYLE:ON
    {
        RepositoryTemplate.LOG.error(e.getMessage(), e);
    }
    finally
    {
        Thread.currentThread().setContextClassLoader(oldLoader);
    }
    return null;
} 
```

编辑：我不确定这是最好的选择，但我采取了实现自己的方法，`ConnectionProvider`这允许我使用实例化驱动程序`Class.forName()`，然后使用`Driver.connect()`而不是打开连接`DriverManager.getConnection()`。它非常基本，但在我的特定用例中我不需要连接池。

`configure()`方法如下：

```
public void configure(final Properties props)
{
    this.url = props.getProperty(Environment.URL);
    this.connectionProperties = ConnectionProviderFactory
        .getConnectionProperties(props);

    final DatabaseDriverClassLoader classLoader = new DatabaseDriverClassLoader(
        Activator.getDefault().getDatabaseDriverRegistry());

    final String driverClassName = props.getProperty(Environment.DRIVER);
    try
    {
        final Class driverClass = Class.forName(driverClassName, true,
            classLoader);
        this.driver = (Driver)driverClass.newInstance();
    }
    catch (ClassNotFoundException e)
    {
        throw new HibernateException(e);
    }
    catch (IllegalAccessException e)
    {
        throw new HibernateException(e);
    }
    catch (InstantiationException e)
    {
        throw new HibernateException(e);
    }
} 
```

`getConnection()`方法如下：

```
public Connection getConnection()
    throws SQLException
{
    return this.driver.connect(this.url, this.connectionProperties);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T20:10:22.363

`Class.forName()`在 OSGi 中是一个主要的痛苦。这实际上不是任何人的错，只是两者都使用了类加载器，而这些类加载器的工作方式与对方的客户端所期望的方式不同（即 OSGi 类加载器的工作方式与 hibernate 所期望的方式不同）。

我认为您可以采用几种方法之一，但我现在能想到的方法是：

*   干净的方法是将 JDBC 驱动程序打包为 OSGi 包。将课程作为服务提供。您可以使用声明式服务（可能更好）或编写一个您需要管理启动的激活器来做到这一点。当您准备好获取驱动程序时，获取 JDBCDriver 服务，然后查找您感兴趣的类。
*   不太干净的方式，但比第一种方式更省力 - 用于`DynamicImport-Package`从捆绑的驱动程序中添加导出的包。这样，客户端代码仍然可以看到它将使用的类，但它不必知道它直到运行时。但是，您可能必须尝试使用​​包模式来涵盖所有情况（这就是它不太干净的原因）。
*   OSGi 方式越少；也就是将你的驱动程序添加到 Eclipse 类路径中，并添加应用程序父类加载器。你可以添加这个：`osgi.parentClassloader=app`到你的 config.ini。这可能不适合您的部署，尤其是在您无法控制`config.ini`文件的情况下。
*   非 OSGi 方式，而不是使用上下文类加载器，使用`URLClassLoader`. 这仅在您有一个充满驱动程序 jar 的目录时才有效，或者用户可以直接或间接指定驱动程序 jar 的位置。

# oracle - 通过 DBLINK 引用 Oracle 用户定义类型？

> ID：378299
> 
> 赞同：3
> 
> 时间：2008-12-18T15:59:24.227
> 
> 标签：oracle, types, collections, dblink

我在两个不同的 Oracle 实例上使用两个不同的 Oracle 模式。我已经定义了几种类型和类型集合来在这些模式之间传输数据。我遇到的问题是，即使类型具有完全相同的定义（用于在模式中创建两个集合的脚本相同），Oracle 仍将它们视为不可互换的不同对象。

我曾考虑将传入的远程类型对象转换为相同的本地类型，但我收到关于跨 dblink 引用类型的错误。

本质上，我正在执行以下操作：

```
DECLARE
  MyType  LocalType; -- note, same definition as the RemoteType (same script)
BEGIN
  REMOTE_SCHEMA.PACKAGE.PROCEDURE@DBLINK( MyType );  -- MyType is an OUT param
  LOCAL_SCHEMA.PACKAGE.PROCEDURE( MyType ); -- IN param
END; 
```

失败是因为 REMOTE 过程调用无法理解 MyType，因为它将 LocalType 和 RemoteType 视为不同的对象类型。

我也尝试如下 DECLARING MyType：

```
 MyType REMOTE_SCHEMA.RemoteType@DBLINK; 
```

但我得到另一个关于跨 dblinks 引用类型的错误。类型之间的 CAST 也不起作用，因为为了进行转换，我需要跨 dblink 引用远程类型——同样的问题，同样的错误。我也尝试使用 SYS.ANYDATA 作为跨越两个实例的对象，但它得到了类似的错误。

有任何想法吗？

**更新：** 尝试使用相同的 OID 声明 DBLINK 两侧的对象类型（使用手动检索`SYS_OP_GUID()`），但 Oracle 仍然“认为”这两个对象不同，并引发“错误数量或类型的争论”错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-19T09:13:34.263

我已经阅读了 Oracle 文档，这并不难。

您需要在两个数据库中的类型定义中添加一个 OID。

您可以使用 GUID 作为 OID。

```
SELECT SYS_OP_GUID() FROM DUAL; 

SYS_OP_GUID()
--------------------------------
AE34B912631948F0B274D778A29F6C8C 
```

**现在在两个数据库中使用相同**的OID创建您的 UDT 。

```
create type testlinktype oid 'AE34B912631948F0B274D778A29F6C8C' as object
( v1 varchar2(10) , v2 varchar2(20) );
/ 
```

现在创建一个表：

```
create table testlink 
( name testlinktype);

insert into testlink values (testlinktype ('RC','AB'));

commit; 
```

现在您可以通过另一个数据库中的 dblink 从表中进行选择：

```
select * from testlink@to_ora10;

NAME(V1, V2)
--------------------------
TESTLINKTYPE('RC', 'AB') 
```

如果您在第一次尝试通过 dblink 进行选择时收到错误 ORA-21700，请重新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T20:58:25.373

我认为根本问题是 Oracle 不知道如何通过网络自动序列化/反序列化您的自定义类型，可以这么说。

您最好的选择可能是通过链接传递 XML（或其他）表示。

# python - 如何在Django中获取具有特定权限组的所有用户的列表

> ID：378303
> 
> 赞同：64
> 
> 时间：2008-12-18T16:00:49.840
> 
> 标签：python, django, dictionary, permissions

我想获取具有特定权限组的所有 Django auth 用户的列表，如下所示：

```
user_dict = {
    'queryset': User.objects.filter(permisson='blogger')
} 
```

我无法找到如何做到这一点。权限组如何保存在用户模型中？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2009-06-14T07:02:33.027

如果您想按权限获取用户列表，请查看此变体：

```
from django.contrib.auth.models import User, Permission
from django.db.models import Q

perm = Permission.objects.get(codename='blogger')  
users = User.objects.filter(Q(groups__permissions=perm) | Q(user_permissions=perm)).distinct() 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2008-12-18T19:03:38.537

这将是最简单的

```
from django.contrib.auth import models

group = models.Group.objects.get(name='blogger')
users = group.user_set.all() 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2008-12-18T19:11:08.427

我认为对于组权限，权限是针对组存储的，然后用户将组链接到他们。所以你可以解决用户-组关系。

例如

```
518$ python manage.py shell

(InteractiveConsole)
>>> from django.contrib.auth.models import User, Group
>>> User.objects.filter(groups__name='monkeys')
[<User: cms>, <User: dewey>] 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-09-05T14:11:06.703

根据@Glader 的回答，此函数将其包装在一个查询中，并已修改为获取超级用户（根据定义，它们具有所有权限）：

```
from django.contrib.auth.models import User
from django.db.models import Q

def users_with_perm(perm_name):
    return User.objects.filter(
        Q(is_superuser=True) |
        Q(user_permissions__codename=perm_name) |
        Q(groups__permissions__codename=perm_name)).distinct()

# Example:
queryset = users_with_perm('blogger') 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-06-09T09:53:24.570

不要忘记仅指定权限代号是不够的，因为不同的应用程序可能会重复使用相同的代号。需要获取权限对象才能正确查询用户：

```
def get_permission_object(permission_str):
    app_label, codename = permission_str.split('.')
    return Permission.objects.filter(content_type__app_label=app_label, codename=codename).first()

def get_users_with_permission(permission_str, include_su=True):
    permission_obj = get_permission_object(permission_str)
    q = Q(groups__permissions=permission_obj) | Q(user_permissions=permission_obj)
    if include_su:
        q |= Q(is_superuser=True)
    return User.objects.filter(q).distinct() 
```

导入代码： [https ://github.com/Dmitri-Sintsov/django-jinja-knockout/blob/master/django_jinja_knockout/models.py](https://github.com/Dmitri-Sintsov/django-jinja-knockout/blob/master/django_jinja_knockout/models.py)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-22T14:34:18.107

组与用户是多对多的（你看，没什么不寻常的，只是 Django 模型......），所以 cms 的答案是正确的。另外，这是双向的：拥有一个组，您可以通过检查`user_set`属性列出其中的所有用户。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-19T10:02:34.240

试试这个：

```
User.objects.filter(groups__permissions = Permission.objects.get(codename='blogger')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-13T22:21:50.313

根据@Augusto 的回答，我使用模型管理器并使用 authtools 库进行了以下操作。这是在`querysets.py`：

```
from django.db.models import Q
from authtools.models import UserManager as AuthUserManager

class UserManager(AuthUserManager):
    def get_users_with_perm(self, perm_name):
        return self.filter(
                Q(user_permissions__codename=perm_name) |
                Q(groups__permissions__codename=perm_name)).distinct() 
```

然后在`models.py`：

```
from django.db import models
from authtools.models import AbstractEmailUser
from .querysets import UserManager

class User(AbstractEmailUser):
   objects = UserManager() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-25T17:00:55.267

```
$ python manage.py shell <<'EOF'
> from django.contrib.auth.models import User
> User.objects.filter(groups__name='blogger')
> EOF
...
(InteractiveConsole)
>>> >>> [<User: foo>, <User: bar>, <User: baz>, '...(remaining elements truncated)...'] 
```

（简化自 cms 的回答，我无法编辑）

# winforms - 在 Winforms 报表上过滤子报表数据

> ID：378311
> 
> 赞同：0
> 
> 时间：2008-12-18T16:03:00.367
> 
> 标签：winforms, reporting, service, subreport

我正在使用 Winforms Reporting Services (RDLC) 生成具有子报表的报表。我的问题是子报表没有被父 ID 过滤。

数据模型的一个简单示例可能是包含员工的部门。

在报告中，我想显示所有部门并有一个子报告来显示属于该部门的员工。

我创建了一个包含两个数据表（部门和员工）的数据集。我使用 DepartmentId 列在两个表之间创建了关系。

在表格中，我使用适当的填充命令填充每个表格。我先填写Department 表，然后填写Employee 表，即Select * From Deparment 和Select * from Employee。

现在对于实际的 RDLC：Department rdlc 使用 Deparment 数据源并显示有关该部门的信息。我在这个 rdlc 上放置了一个子报表控件并设置了属性。我将 ReportProperty 传递给 Field!DepartmentId 的子报表。

在 Employee rdlc 中，我添加了 Employee 数据源并在 Property!DepartmentId 上创建了一个过滤器。

当我运行报告时，我可以循环浏览每个部门，但子报告不显示。如果我从员工数据源中删除过滤器，子报表会显示但显示所有员工。

在表单本身中，我正在处理 SubProcessing evert 并将 Employee 数据源添加到报告中。

关于如何将子报表数据链接到父级的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-09T18:37:35.243

将父级的 ID 作为参数传递给子报表，然后根据该参数值过滤子报表中的表。

[MSDN - 配置子报表和钻取报表](http://msdn.microsoft.com/en-us/library/ms251765(VS.80).aspx)

# image-processing - libgd 如何在竞争中脱颖而出？

> ID：378314
> 
> 赞同：1
> 
> 时间：2008-12-18T16:03:24.687
> 
> 标签：image-processing, gd

我很好奇人们对 libgd 有过什么样的体验。我正在寻找 GDI+ 的替代品（更快的东西）。我已经尝试过 ImageMagick，但无法从中获得我需要的性能。

我听说 ligd 很快，但功能较少，而 ImageMagick 很慢，但功能更丰富。

我只需要有限数量的格式（主要是 jpg）上的非常简单的图像处理程序（缩放、裁剪）。但是我需要非常高质量的插值并且它必须很快（比 GDI+ 快得多）。

我正在考虑尝试 libgd，考虑到我的要求，这看起来很合适吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:13:48.287

我自己对 libgd 的体验非常好。

我在一个网站上使用过它，我从磁盘获取 jpeg 图像，为它们添加文本标题，然后将它们渲染出来，感觉就像直接从磁盘提供文件一样快。

鉴于每次它都在解码 jpeg，更改它，然后重新编码它，这非常好！

# windows - Windows 资源管理器“此处的命令提示符”

> ID：378319
> 
> 赞同：196
> 
> 时间：2008-12-18T16:05:50.703
> 
> 标签：windows, command-line, windows-explorer

我经常发现自己在 Windows 中打开了一个文件夹，希望用相同的工作目录打开一个命令提示符。

我知道 Power Toys 的“命令提示符”，但它只能作为文件夹上的上下文菜单项使用，如果您已经在那里，则不能从文件夹内部使用。我知道您可以导航到父目录并从那里使用它，但是如果父目录中有数千个目录，这就不那么方便了。我已经尝试了一些与资源管理器中的文件夹操作相关的自制批处理文件，但这些文件遇到了类似的问题。

那么，用当前 Windows 资源管理器文件夹的工作目录打开命令提示符的最快方法是什么？

我目前的做法：（可怕）

*   **`Alt`- `D`, `Ctrl`-`C`** (复制路径)
*   **`Win`- `R`, "cmd",`Enter`** (启动命令提示符)
*   **"cd",`Space`** (启动更改目录命令)
*   **`Alt`- `Space`, `e`,`p`**（粘贴目录）
*   **`Enter`**（执行更改目录）

我知道有更好的东西！它是什么？

* * *

## 回答 #1

> 赞同：434
> 
> 时间：2008-12-19T00:28:41.673

按住**Shift**的同时**右键单击**所需文件夹中的空白区域以显示更详细的上下文菜单。选项之一是`Open Command Window Here`。这适用于 Windows Vista、7、8 和 10。自 Windows 10 创意者更新以来，该选项已替换为`Open PowerShell Here`. 但是，有办法[再次](https://superuser.com/q/1201988/269404)[启用`Open Command Window Here`](https://superuser.com/q/1201988/269404)。

* * *

## 回答 #2

> 赞同：320
> 
> 时间：2008-12-19T15:13:43.533

只需**在位置栏输入“cmd”即可**。它将在当前路径中启动一个新的命令提示符。

此解决方案已确认可在 Windows XP、Vista、7、8 和 10（包括 Creators Update）中运行。

将焦点移动到位置栏的击键：

*   `Alt``D`英语（蒂姆·斯图尔特在评论中指出）
*   `Alt``E`在德国

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2014-05-16T16:17:30.867

在您当前的文件夹中，只需按`Shift`+ `Alt`+ `F`--*然后*--> `Enter`。

提示将显示您当前文件夹的路径集。

注意：这仅适用于 Windows 7 / Vista。它的作用是为您放下“文件”菜单，因为按下“Shift”键，“在此处打开命令窗口”选项被启用并集中为“文件”菜单的第一个可用选项。按回车键启动命令窗口的焦点选项。

**编辑：**

如果您在一个文件夹中并且您已经选择了它的一些内容（文件/文件夹），这将不起作用。在这种情况下，单击文件夹内的空白区域以取消选择任何先前选择的文件并重复。

**编辑2：**

在当前目录中打开终端的另一种方法是在`cmd`写入当前文件夹路径的文件浏览器导航栏上键入。

为了让您的键盘专注于导航栏`Ctrl`+ `L`。然后你可以输入`cmd`并点击`Enter`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2008-12-19T00:12:57.977

[右键单击资源管理器窗口的标题栏图标。](http://blogs.msdn.com/oldnewthing/archive/2003/10/08/55223.aspx)您将获得当前文件夹的上下文菜单，您将在其中找到“此处的命令窗口”项。

（请注意，要查看该菜单项，您需要安装[相应的“强力玩具”](http://www.microsoft.com/windowsxp/downloads/powertoys/xppowertoys.mspx)，或者您可以自己[创建正确的注册表项](http://blogs.msdn.com/oldnewthing/archive/2003/10/08/55223.aspx#55235)以将该项目添加到文件夹的上下文菜单中。）

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2014-05-17T13:26:30.977

作为一个非常快速的解决方案，我可以给你这个。我在 Windows 8.1 上测试了这个

1-查找文件并右键单击文件资源管理器上的命令提示符，然后将命令提示符添加到您的快速访问工具栏：

![说明 1](https://i.stack.imgur.com/tVQj5.png)

2-添加后，您可以从此处访问该文件夹：

![指令 2](https://i.stack.imgur.com/Pah7k.png)

这将为您打开一个命令提示符。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2013-03-05T23:36:28.317

在 Vista 和 Windows 7 上：

*   **Alt+d** -> 将焦点放在资源管理器窗口的地址栏上
*   然后，键入您将使用 WIN+r 启动的任何程序的名称
*   **按**回车

 **该程序将从其当前目录设置为资源管理器实例的目录开始。例如：python、ghci、powershell、cmd等...

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-06-25T05:31:07.803

对于 Windows vista 和 Windows 7，打开命令提示符 1) 转到您要工作的文件夹

2）在地址栏中输入- cmd

按回车

它将打开该位置的命令提示符

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2011-09-26T19:38:25.650

您可以编辑注册表以将命令提示符项添加到上下文菜单中。这是我使用的几个 .reg 文件。

Cmdhere.reg - 对于 WinNT/2000/XP/Vista/7：

```
Windows Registry Editor Version 5.00
[HKEY_CLASSES_ROOT\Directory\shell\OpenNew]
@="Command Prompt"
[HKEY_CLASSES_ROOT\Directory\shell\OpenNew\Command]
@="cmd.exe /k cd %1"
[HKEY_CLASSES_ROOT\Drive\shell\OpenNew]
@="Command Prompt"
[HKEY_CLASSES_ROOT\Drive\shell\OpenNew\Command]
@="cmd.exe /k cd %1" 
```

Doshere.reg - 对于 Win9x：

```
REGEDIT4
[HKEY_CLASSES_ROOT\Directory\shell\OpenNew]
@="MS-DOS Prompt"
[HKEY_CLASSES_ROOT\Directory\shell\OpenNew\Command]
@="command.com /k cd %1"
[HKEY_CLASSES_ROOT\Drive\shell\OpenNew]
@="MS-DOS Prompt"
[HKEY_CLASSES_ROOT\Drive\shell\OpenNew\Command]
@="command.com /k cd %1" 
```

将其复制到一个空文本文件中并将扩展名更改为 .reg。在 Windows 资源管理器中双击它会将这些键添加到注册表中。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2008-12-18T16:11:39.350

我使用 StExBar，这是一个 Windows 资源管理器扩展，它在资源管理器中为您提供命令提示按钮以及其他一些很酷的功能（复制路径、复制文件名等）。

[https://tools.stefankueng.com/StExBar.html](https://tools.stefankueng.com/StExBar.html)

编辑：我刚刚发现（已经使用了一年多但不知道这一点）Ctrl+M 将使用 StExBar 来完成。怎么这么快！

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-18T16:18:03.877

和你的差不多：

*   **Alt+d** , **Ctrl+c**
*   **赢+r**
*   **cmd /K cd** , **Ctrl+v** ,**回车**

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2008-12-18T16:12:51.517

如果这很麻烦，您可以尝试切换到 Windows 资源管理器替代品，例如[freecommander](http://www.freecommander.com/)，它有一个工具栏按钮用于此目的。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-08-23T14:49:11.907

我经常使用“发送至”功能。
我在文件夹中创建自己的批处理 (.bat) 文件，`shell:sendto`并使用上下文菜单将文件/文件夹发送给它们（要到达那里，只需在位置栏中输入“shell：sendto”）。
我有执行各种操作的脚本：通过 ftp 发送文件，在当前文件夹中启动 php 服务器，创建以当前日期命名的文件夹，将发送的路径复制到剪贴板等。
抱歉，有点离题但无论如何都很有用。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-11-26T03:09:33.283

尝试了Windows 7 中 [Tough Coder 给出的答案，它可以工作！](https://stackoverflow.com/a/23711877/382515)

在 中创建 cmd.exe 的快捷方式`%HOMEDRIVE%%HOMEPATH%\Links`，打开其文件属性并将字段“开始于”更改为`%1`（从西班牙语翻译的“Iniciar en”）。

现在将文件夹拖到它上面，你会看到它的神奇之处。它也适用于所有标准的打开文件对话框。哇！

ps：我图片中的那些“奇怪”标签是因为我使用[Clover](http://ejie.me/)。我推荐它！

![在此处输入图像描述](https://i.stack.imgur.com/5oow3.jpg)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-12-19T13:16:57.863

[http://www.petefreitag.com/item/146.cfm](http://www.petefreitag.com/item/146.cfm)

*   Open up **windows explorer**

*   **Tools** -> **Folder Options**.

*   **File Types** Tab

*   Select the **Folder** file type

*   Click **Advanced**

*   Click **New**

*   For the **Action** type what ever you want the context menu to display, I used Command Prompt.

*   For the **Application used to perform the action** use c:\windows\system32\cmd.exe (note on win2k you will want to specify the winnt directory instead of the windows directory)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-06-07T10:40:22.207

此解决方案也适用于背景菜单： [http ://www.roggel.com/NGNeer/BackgroundCMD/](http://www.roggel.com/NGNeer/BackgroundCMD/)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2014-07-07T18:31:08.557

在命令提示符中使用以下命令在 Windows 资源管理器中打开您的当前位置：

C:\your-directory> 资源管理器。

# c# - 如何在我的 winforms 应用程序中设置我的 datagrid 滚动条的位置？

> ID：378330
> 
> 赞同：28
> 
> 时间：2008-12-18T16:09:06.843
> 
> 标签：c#, winforms, datagrid

在我的 C# winforms 应用程序中，我有一个数据网格。当数据网格重新加载时，我想将滚动条设置回用户设置的位置。我怎样才能做到这一点？

编辑：我使用的是旧的 winforms DataGrid 控件，而不是较新的 DataGridView

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-12-18T17:14:58.910

您实际上并不直接与滚动条交互，而是将`FirstDisplayedScrollingRowIndex`. 因此，在重新加载之前，捕获该索引，一旦重新加载，将其重置为该索引。

**编辑：**评论中的好点。如果您使用的是 a`DataGridView`那么这将起作用。如果您使用的是旧`DataGrid`的，那么最简单的方法就是继承它。见这里：[联动](http://www.thescarms.com/dotnet/ScrollDataGrid.aspx)

DataGrid 有一个受保护的 GridVScrolled 方法，可用于将网格滚动到特定行。要使用它，请从 DataGrid 派生一个新网格并添加一个 ScrollToRow 方法。

**C# 代码**

```
public void ScrollToRow(int theRow)
{
    //
    // Expose the protected GridVScrolled method allowing you
    // to programmatically scroll the grid to a particular row.
    //
    if (DataSource != null)
    {
        GridVScrolled(this, new ScrollEventArgs(ScrollEventType.LargeIncrement, theRow));
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-12-18T17:46:53.917

是的，绝对[是 FirstDisplayedScrollingRowIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.firstdisplayedscrollingrowindex.aspx)。您需要在一些用户交互后捕获此值，然后在重新加载网格后，您需要将其设置回旧值。

例如，如果重新加载是通过单击按钮触发的，那么在按钮单击处理程序中，您可能希望在第一行中使用一个将该值放入变量的命令：

```
// Get current user scroll position
int scrollPosition = myGridView.FirstDisplayedScrollingRowIndex;

// Do some work
...

// Rebind the grid and reset scrolling
myGridView.DataBind;
myGridView.FirstDisplayedScrollingRowIndex = scrollPosition; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-29T13:45:28.803

将您的垂直和水平滚动值存储到某个变量中并重置它们。

```
int v= dataGridView1.VerticalScrollingOffset ;
int h= dataGridView1.HorizontalScrollingOffset ;
//...reload
dataGridView1.VerticalScrollingOffset = v;
dataGridView1.HorizontalScrollingOffset =h; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T02:18:53.047

刚刚在给出的链接上发布了答案[`BFree`](https://stackoverflow.com/users/15861/bfree)

DataGrid 有一个受保护的 GridVScrolled 方法，可用于将网格滚动到特定行。要使用它，请从 DataGrid 派生一个新网格并添加一个`ScrollToRow`方法。

C# 代码

```
public void ScrollToRow(int theRow)
{
    //
    // Expose the protected GridVScrolled method allowing you
    // to programmatically scroll the grid to a particular row.
    //
    if (DataSource != null)
    {
        GridVScrolled(this, new ScrollEventArgs(ScrollEventType.LargeIncrement, theRow));
    }
} 
```

VB.NET 代码

```
Public Sub ScrollToRow(ByVal theRow As Integer)
    '
    ' Expose the protected GridVScrolled method allowing you
    ' to programmatically scroll the grid to a particular row.
    '
    On Error Resume Next

    If Not DataSource Is Nothing Then
        GridVScrolled(Me, New ScrollEventArgs(ScrollEventType.LargeIncrement, theRow))
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-17T15:56:51.427

* * *

您可以使用下一个代码保存滚动位置

* * *

```
int Scroll;
void DataGridView1Scroll(object sender, ScrollEventArgs e)
    {
        Scroll = dataGridView1.VerticalScrollingOffset;
    } 
```

* * *

并且您可以在刷新后将 dgv 的滚动设置到相同的位置，加载 dgv... 使用下一个代码：

* * *

```
PropertyInfo verticalOffset = dataGridView1.GetType().GetProperty("VerticalOffset", BindingFlags.NonPublic | 
BindingFlags.Instance);
verticalOffset.SetValue(this.dataGridView1, Scroll, null); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T14:21:36.780

我使用了@BFree 的答案，但还需要捕获第一个可见行`DataGrid`：

```
int indexOfTopMostRow = HitTest(dataGrid.RowHeaderWidth + 10, 
                                dataGrid.PreferredRowHeight + 10).Row; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-21T12:18:23.690

尽管这是一个老问题，但上面的许多解决方案都对我不起作用。最终奏效的是：

```
if(gridEmployees.FirstDisplayedScrollingRowIndex != -1) gridEmployees.FirstDisplayedScrollingRowIndex = 0; 
```

# sql - 数据库记录的物理与逻辑（硬与软）删除？

> ID：378331
> 
> 赞同：139
> 
> 时间：2008-12-18T16:09:32.897
> 
> 标签：sql, database, database-design, soft-delete, hard-delete

与实际或物理删除记录相比，对记录进行逻辑/软删除（即设置一个表明记录已删除的标志）有什么优势？

这是常见的做法吗？

这安全吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2008-12-18T16:13:53.560

优点是您保留历史记录（有利于审计），并且您不必担心通过数据库中引用您正在删除的行的各种其他表进行级联删除。缺点是您必须编写任何报告/显示方法以将标志考虑在内。

至于它是否是一种常见做法 - 我会说是的，但与任何事情一样，您是否使用它取决于您的业务需求。

编辑：想到另一个缺点 - 如果表上有唯一索引，删除的记录仍将占用“一个”记录，因此您也必须围绕这种可能性进行编码（例如，具有唯一索引的用户表用户名；已删除的记录仍会阻止已删除用户的用户名获取新记录。解决此问题，您可以将 GUID 添加到已删除的用户名列，但我不推荐这是一个非常hacky的解决方法。可能在这种情况下它会最好有一个规则，一旦用户名被使用，就永远不能被替换。）

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2008-12-18T16:36:49.253

逻辑删除是常见的做法吗？是的，我在很多地方都看到过。它们安全吗？这真的取决于它们是否比您删除之前的数据更不安全？

当我是技术主管时，我要求我们的团队保留每一条数据，我当时就知道我们将使用所有这些数据来构建各种 BI 应用程序，尽管当时我们不知道要求是什么是。虽然从审计、故障排除和报告的角度来看这很好（这是一个用于 B2B 交易的电子商务/工具网站，如果有人使用了工具，我们想记录它，即使他们的帐户后来被关闭），它确实有几个缺点。

缺点包括（不包括其他已经提到的）：

1.  保留所有数据的性能影响，我们制定各种归档策略。例如，应用程序的一个领域接近于每周生成大约 1Gb 的数据。
2.  保存数据的成本确实会随着时间的推移而增加，虽然磁盘空间很便宜，但用于在线和离线保存和管理数 TB 数据的基础设施数量很多。冗余需要大量磁盘，人们需要时间来确保备份快速移动等。

在决定使用逻辑、物理删除或归档时，我会问自己以下问题：

1.  这些数据是否可能需要重新插入表中。例如，用户帐户适合此类别，因为您可能会激活或停用用户帐户。如果是这种情况，逻辑删除是最有意义的。
2.  存储数据有什么内在价值吗？如果是这样，将生成多少数据。根据这一点，我要么进行逻辑删除，要么实施归档策略。请记住，您始终可以归档逻辑删除的记录。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-09-30T16:42:20.160

可能有点晚了，但我建议大家查看Pinal Dave关于逻辑/软删除[的博客文章：](http://blog.sqlauthority.com/2010/09/03/sql-server-soft-delete-isdelete-column-your-opinion/)

> 我只是根本不喜欢这种设计[软删除]。我坚信只有必要的数据应该放在单个表中而无用的数据应该移动到存档表中的架构。我建议不要使用 isDeleted 列，而是使用两个不同的表：一个包含订单，另一个包含已删除订单。在这种情况下，您将不得不维护这两个表，但实际上，维护起来非常容易。当您将 UPDATE 语句写入 isDeleted 列时，将 INSERT INTO 写入另一个表并从原始表中删除它。如果情况是回滚，则以相反的顺序编写另一个 INSERT INTO 和 DELETE。如果您担心交易失败，请将此代码包装在 TRANSACTION 中。
> 
> 在上述情况下，小桌子与大桌子相比有什么优势？
> 
> *   较小的桌子易于维护
> *   索引重建操作更快
> *   将存档数据移动到另一个文件组将减少主文件组的负载（考虑到所有文件组都在不同的系统上）——这也将加快备份速度。
> *   由于尺寸较小，统计信息将经常更新，这将减少资源密集度。
> *   索引的大小会更小
> *   表的性能将随着表大小的减小而提高。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-03-11T03:35:41.053

我是一名 NoSQL 开发人员，在我的上一份工作中，我处理的数据对某人来说总是很重要，如果它在创建的同一天被意外删除，我无法在上次备份中找到它从昨天！在那种情况下，软删除总能化险为夷。

我使用时间戳进行了软删除，记录了文档被删除的日期：

```
IsDeleted = 20150310  //yyyyMMdd 
```

每个星期天，都会有一个进程在数据库上运行并检查该`IsDeleted`字段。如果当前日期与时间戳之间的差异大于 N 天，则文档被硬删除。考虑到该文档在某些备份中仍然可用，这样做是安全的。

**编辑：**这个 NoSQL 用例是关于在数据库中创建的大文档，每天有几十个或几百个，但不是数千个或数百万个。一般来说，它们是包含工作流程的状态、数据和附件的文档。这就是用户可能删除重要文档的原因。此用户可能是具有管理员权限的人，或者可能是文档的所有者，仅举几例。

TL;DR 我的用例不是大数据。在这种情况下，您将需要一种不同的方法。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-09-09T00:18:30.090

我使用的一种模式是创建一个镜像表并在主表上附加一个触发器，因此所有删除（如果需要，还可以更新）都记录在镜像表中。

这允许您“重建”已删除/更改的记录，并且您仍然可以在主表中硬删除并保持“干净” - 它还允许创建“撤消”功能，您还可以记录日期、时间，以及在镜像表中执行操作的用户（在猎巫情况下非常宝贵）。

另一个优点是在查询主数据库时不会意外包含已删除的记录，除非您故意麻烦地从镜像表中包含记录（您可能希望显示实时和已删除的记录）。

另一个优点是镜像表可以独立清除，因为它不应该有任何实际的外键引用，与从使用软删除但仍具有与其他表的引用连接的主表中清除相比，这是一个相对简单的操作。

**还有什么优点？**- 如果你有一堆程序员在做这个项目，用混合技能和对细节级别的关注来读取数据库，你不必熬夜希望他们中的一个没有忘记不包括已删除记录（大声笑，不包括已删除记录 = True），这会导致夸大客户可用的现金头寸，然后他们会购买一些股票（即，如在交易系统中），当您使用交易系统时，您将很快发现稳健解决方案的价值，即使它们可能有更多的初始“开销”。

**例外：**
- 作为指导，对“参考”数据（如用户、类别等）使用软删除，对“事实”类型数据（即事务历史）的镜像表使用硬删除。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-12-18T16:17:50.307

我通常使用逻辑删除 - 我发现当您间歇性地将“已删除”数据归档到归档表（如果需要时可以搜索）因此不会影响应用程序的性能时，它们工作得很好。

它运作良好，因为如果您被审计过，您仍然拥有数据。如果你物理删除它，**它就消失了**！

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-12-18T16:24:50.447

我是逻辑删除的忠实拥护者，尤其是对于业务线应用程序或在用户帐户的上下文中。我的理由很简单：很多时候我不希望用户能够再使用系统（因此帐户被标记为已删除），但如果我们删除了用户，我们将失去他们所有的工作等等。

另一个常见的情况是用户可能会在被删除后重新创建一段时间。对于用户来说，让他们的所有数据都像被删除之前一样存在，而不是必须重新创建它，这是一种更好的体验。

我通常认为删除用户更多的是无限期地“暂停”他们。你永远不知道他们什么时候合法地需要回来。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-06-06T03:06:04.733

我曾经做过软删除，只是为了保留旧记录。我意识到用户并不像我想象的那样频繁地查看旧记录。如果用户想查看旧记录，他们可以从归档或审计表中查看，对吗？那么，软删除有什么好处呢？它只会导致更复杂的查询语句等。

在我决定不再软删除之前，以下是我已经实现的东西：

1.  实施审计，记录所有活动（添加、编辑、删除）。确保没有外键链接到审计，并确保此表是安全的，除了管理员之外没有人可以删除。

2.  识别哪些表被认为是“事务表”，很可能会保留很长时间，并且很可能用户可能希望查看过去的记录或报告。例如; 购买交易。该表不应只保留主表的id（如dept-id），还应保留名称作为参考（如dept-name）或任何其他必要的报告字段等附加信息。

3.  实现主表的“活动/不活动”或“启用/禁用”或“隐藏/显示”记录。因此，用户可以禁用/停用主记录，而不是删除记录。这种方式安全得多。

只是我的两分钱意见。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-06-09T12:44:56.690

我几乎总是软删除，原因如下：

*   如果客户要求您这样做，您可以恢复已删除的数据。软删除让客户更满意。从备份中恢复特定数据很复杂
*   检查`isdeleted`无处不在不是问题，`userid`无论如何您都必须检查（如果数据库包含来自多个用户的数据）。您可以通过将这两个检查放在单独的函数（或使用视图）上来强制执行代码检查
*   优雅的删除。处理已删除内容的用户或进程将继续“看到”它，直到他们点击下一次刷新。如果进程正在处理一些突然删除的数据，这是一个非常理想的功能
*   同步：如果您需要在数据库和移动应用程序之间设计同步机制，您会发现软删除更容易实现

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-18T16:32:20.993

回复：“这安全吗？” - 这取决于你的意思。

如果您的意思是通过进行物理删除，您将**阻止任何人找到已删除的数据**，那么是的，这或多或少是正确的；物理删除需要删除的敏感数据会更安全，因为这意味着它会从数据库中永久消失。（但是，请意识到可能存在其他数据副本，例如备份、事务日志或传输中的记录版本，例如数据包嗅探器 - 仅仅因为您从数据库中删除并不保证它没有保存在其他地方。）

如果您的意思是通过执行逻辑删除，您的数据更安全，因为**您永远不会丢失任何数据**，那也是正确的。这对审计场景有好处；我倾向于这样设计，因为它承认一个基本事实，即一旦生成数据，它就永远不会*真正*消失（特别是如果它有能力被互联网搜索引擎缓存）。当然，真正的审计场景不仅要求删除是合乎逻辑的，而且还要记录更新，以及更改的时间和进行更改的参与者。

如果您的意思是数据不会落入不应该看到的任何人手中，那么这完全取决于您的应用程序及其安全结构。在这方面，逻辑删除并不比数据库中的其他任何东西更安全。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-09-30T17:18:20.613

我强烈**不同意**逻辑删除，因为您会遇到很多错误。

首先，每个查询都必须注意 IsDeleted 字段，复杂查询出错的可能性会更高。

其次是性能：想象一个有 100000 个记录的表，只有 3 个活动，现在将这个数字乘以数据库的表；另一个性能问题是新记录可能与旧记录（已删除记录）发生冲突。

我看到的唯一优点是记录的历史记录，但是还有其他方法可以实现此结果，例如您可以创建一个可以保存信息的日志记录表：可以在*`TableName,OldValues,NewValues,Date,User,[..]`*哪里并在此表单中写入详细信息；[..] 或将信息存储为.`*Values``varchar``fieldname : value``xml`

所有这一切都可以通过代码或触发器来实现，但您只是**一张**拥有所有历史记录的表。另一种选择是查看指定的数据库引擎是否原生支持跟踪更改，例如在 SQL Server 数据库上有 SQL Track Data Change。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-02-20T13:03:52.900

除了系统设计之外，还有一些要求需要回答。记录保留的法律或法定要求是什么？根据与行相关的内容，可能存在法律要求数据在“暂停”后保留一段时间。

另一方面，要求可能是，一旦记录被“删除”，它就被真正且不可撤销地删除。在做出决定之前，请与您的利益相关者交谈。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-12-18T16:31:48.297

如果对参照完整性有困难，则进行逻辑删除。

当表数据存在时间方面（有效的 FROM_DATE - TO_DATE）时，这是正确的想法。

否则将数据移动到审计表并删除记录。

从积极的一面：

这是更简单的回滚方式（如果可能的话）。

很容易看出特定时间点的状态。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-18T16:34:44.750

如果您想保留某事的历史记录（例如@Jon Dewees 提到的用户帐户），这是相当标准的。如果用户要求取消删除的可能性很大，这当然是一个好主意。

如果您担心从查询中过滤掉已删除记录的逻辑会变得混乱并且只会使查询复杂化，那么您可以构建为您进行过滤的视图并使用查询。它将防止这些记录在报告解决方案等中泄漏。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-07-15T09:10:17.513

依赖于同步的移动应用程序可能会强制使用逻辑删除而不是物理删除：服务器必须能够向客户端指示记录已被（标记为）删除，如果记录被物理删除，这可能是不可能的。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2012-07-04T15:47:14.270

他们不让数据库执行，因为它应该使诸如级联功能之类的东西变得无用。

对于插入等简单的东西，在重新插入的情况下，那么后面的代码就加倍了。

您不能只是简单地插入，而是必须检查是否存在，如果之前不存在则插入，或者如果存在则更新删除标志，同时还将所有其他列更新为新值。这被视为对数据库事务日志的更新，而不是导致审计日志不准确的新插入。

它们会导致性能问题，因为表被冗余数据堵塞。它对索引特别是唯一性进行了破坏。

我不是逻辑删除的忠实粉丝。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-08-24T10:55:20.823

我只是想扩展提到*的唯一约束*问题。

假设我有一个包含两列的表：为了支持软删除`id`，`my_column.`我需要将表定义更新为：

```
create table mytable (
  id serial primary key,
  my_column varchar unique not null,
  deleted_at datetime
) 
```

但是如果一行被软删除，我希望`my_column`忽略约束，因为删除的数据不应该干扰未删除的数据。我的原始模型不起作用。

我需要将我的数据定义更新为：

```
create table mytable (
  id serial primary key,
  my_column varchar not null,
  my_column_repetitions integer not null default 0,
  deleted_at datetime,
  unique (my_column, my_column_repetitions),
  check (deleted_at is not null and my_column_repetitions > 0 or deleted_at is null and my_column_repetitions = 0)
) 
```

并应用此逻辑：当行是当前行（即未删除）时，`my_column_repetitions`应保持默认值`0`，而当行被软删除时，`my_column_repetitions`需要将其更新为`(max. number of repetitions on soft-deleted rows) + 1.`

后一种逻辑必须使用触发器以编程方式实现或在我的应用程序代码中处理，并且我无法设置检查。

对每个独特的列重复此操作！

我认为这个解决方案真的很hacky，并且会支持一个单独的*存档*表来存储已删除的行。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-09-08T02:54:13.547

为了回复 Tohid 的评论，我们遇到了同样的问题，我们想保留记录的历史记录，而且我们不确定是否需要`is_deleted`列。

我说的是我们的 python 实现和我们遇到的类似用例。

我们遇到了[https://github.com/kvesteri/sqlalchemy-continuum](https://github.com/kvesteri/sqlalchemy-continuum)，这是获取相应表的版本控制表的简单方法。最少的代码行并捕获添加、删除和更新的历史记录。

这不仅仅是`is_deleted`列。您可以随时使用 backref 版本表来检查此条目发生了什么。条目是否被删除、更新或添加。

这样我们根本不需要`is_deleted`列，我们的删除功能非常简单。这样我们也不需要记住`is_deleted=False`在我们的任何 api 中进行标记。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-11-14T07:40:59.087

当数据更相关时，软删除是大多数应用程序中遵循的一种编程实践。考虑一个金融应用案例，最终用户的错误删除可能是致命的。当软删除变得相关时就是这种情况。在软删除中，用户实际上并没有从记录中删除数据，而是将其标记为 IsDeleted 为 true（按照正常约定）。

在 EF 6.x 或 EF 7 及更高版本中，Softdelete 被添加为属性，但我们现在必须创建一个自定义属性。

**我强烈推荐 SoftDelete 在数据库设计中，它是编程实践的良好约定。**

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-06-20T14:12:50.773

出色地！正如大家所说，这取决于情况。

如果您在 UserName 或 EmailID 之类的列上有索引 - 您永远不会期望再次使用相同的 UserName 或 EmailID；您可以使用软删除。

也就是说，请始终检查您的 SELECT 操作是否使用主键。如果您的 SELECT 语句使用主键，则在 WHERE 子句中添加标志不会有太大区别。举个例子（伪）：

表用户（UserID [主键]、EmailID、IsDeleted）

```
SELECT * FROM Users where UserID = 123456 and IsDeleted = 0 
```

由于 UserID 列具有主键，因此该查询不会对性能产生任何影响。最初，它会根据 PK 扫描表，然后执行下一个条件。

软删除根本不起作用的情况：

在大多数网站上注册都将 EmailID 作为您的唯一标识。我们非常清楚，一旦在 facebook、G+ 等网站上使用 EmailID，其他任何人都无法使用它。

有一天，用户想从网站上删除他/她的个人资料。现在，如果您进行逻辑删除，该用户将无法再次注册。此外，使用相同的 EmailID 再次注册并不意味着恢复整个历史记录。谁都知道，删就是删。在这种情况下，我们必须进行物理删除。但是为了维护帐户的整个历史记录，我们应该始终将此类记录存档在存档表或已删除表中。

是的，在我们有很多外部表的情况下，处理非常麻烦。

还要记住，软/逻辑删除会增加你的表大小，所以索引大小。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-09-19T14:34:37.093

大多数时候使用软删除是因为您不想公开某些数据，但由于历史原因您必须保留它（产品可能会停产，因此您不希望与它进行任何新交易，但您仍然需要使用销售交易的历史）。顺便说一句，有些人正在复制销售交易数据中的产品信息值，而不是引用产品来处理这个问题。

事实上，它看起来更像是对可见/隐藏或活动/非活动功能的改写。因为这就是商业世界中“删除”的含义。我想说终结者可能会删除人，但老板只会解雇他们。

这种做法是非常常见的模式，并且由于很多原因被很多应用程序使用。因为这不是实现这一目标的唯一方法，所以你会有成千上万的人说这很好或胡说八道，并且都有很好的论据。

从安全的角度来看，SoftDelete 不会取代 Audit 的工作，也不会取代备份的工作。如果您害怕“两个备份案例之间的插入/删除”，您应该阅读完整或批量恢复模型。我承认 SoftDelete 可以使恢复过程变得更简单。

由您来了解您的要求。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-17T22:17:20.707

视情况而定，请考虑以下几点：

通常，您不需要“软删除”记录。保持简单和快速。 *例如，删除不再可用的产品，因此您不必检查该产品是否在您的应用程序中被软删除（计数、产品列表、推荐产品等）。*

然而，您可能会考虑数据仓库模型中的“软删除”。*例如*，您正在查看已删除产品的旧收据。*

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-04-13T19:19:09.083

这完全取决于系统的用例及其数据。

例如，如果您谈论的是政府监管系统（例如，制药公司的系统被认为是质量系统的一部分，并且必须遵循 FDA 的电子记录指南），那么您最好不要进行硬删除！FDA 的审核员可以进来询问系统中与产品编号 ABC-123 相关的所有记录，并且所有数据都可以更好地获得。如果您的业务流程所有者说系统不应该允许任何人在未来的新记录中使用产品编号 ABC-123，请使用软删除方法使其在系统中“不活动”，同时仍保留历史数据。

但是，也许您的系统及其数据有一个用例，例如“跟踪北极的天气”。也许您每小时读取一次温度读数，并在一天结束时汇总每日平均值。也许在聚合后将不再使用每小时数据，并且您会在创建聚合后硬删除每小时读数。（这是一个虚构的、琐碎的例子。）

关键是，这完全取决于系统的用例及其数据，而不是纯粹从技术角度做出的决定。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-02-09T21:35:54.533

作为替代方案，我们让用户使用通过 MobiLink 更新的远程设备。如果我们删除服务器数据库中的记录，这些记录永远不会在客户端数据库中被标记为已删除。

所以我们两者都做。我们与客户一起确定他们希望能够恢复数据多长时间。例如，通常客户和产品在我们的客户说应该删除之前是活跃的，但销售历史只保留 13 个月，然后自动删除。客户可能希望将已删除的客户和产品保留两个月，但将历史记录保留六个月。

因此，我们在一夜之间运行一个脚本，根据这些参数将事物标记为逻辑删除，然后两/六个月后，今天标记为逻辑删除的任何内容都将被硬删除。

我们关心的不是数据安全，而是在内存有限的客户端设备（例如智能手机）上拥有庞大的数据库。一个连续四年每周两次订购 200 种产品的客户将拥有超过 81,000 条历史记录，其中 75% 的客户不关心他是否看到。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-11-15T18:03:35.660

优点是数据保存/永久化。一个缺点是在从具有大量软删除的表中查询或检索数据时性能下降。

在我们的例子中，我们使用两者的组合：正如其他人在之前的答案中提到的那样，`soft-delete` `users/clients/customers`例如，我们在存在不需要保留重复记录`hard-delete`的表上。`items/products/merchandise`

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-09-27T02:41:23.097

我已经[在另一个帖子中](https://stackoverflow.com/a/58119887/1398479)回答了。但是，我认为我的回答更适合这里的问题。

> 我对软删除的实用解决方案是通过创建一个具有以下列的新表来归档：`original_id`, `table_name`, `payload`, （和一个可选的主键 `id）。
> 
> `original_id`已删除记录的原始 id在哪里，是已删除记录`table_name` 的表名（`"user"`在您的情况下）， `payload`是已删除记录所有列的 JSON 字符串化字符串。
> 
> 我还建议在列上建立一个索引，`original_id`以便以后检索数据。
> 
> 通过这种方式归档数据。你将拥有这些优势
> 
> *   跟踪历史中的所有数据
> *   无论删除记录的表结构如何，都只有一个地方可以存档任何表中的记录
> *   不用担心原始表中的唯一索引
> *   不用担心在原始表中检查外部索引
> *   每个查询中没有更多`WHERE`的子句来检查删除
> 
> [这里](https://stackoverflow.com/a/2549940/1398479)已经是一个讨论 ，解释了为什么软删除在实践中不是一个好主意。软删除会在将来引入一些潜在的麻烦，例如计数记录，...

# java - 从 Java 启动 OpenOffice 服务 (soffice) 的问题（在命令行中工作的命令，但不是从 Java 中）

> ID：378338
> 
> 赞同：2
> 
> 时间：2008-12-18T16:10:46.170
> 
> 标签：java, command, openoffice.org, runtime.exec, soffice

我想执行一个简单的命令，它可以在 shell 中工作，但不能在 Java 中工作。这是我要执行的命令，效果很好：

```
soffice -headless "-accept=socket,host=localhost,port=8100;urp;" 
```

这是我从 Java 中执行的代码，试图运行这个命令：

```
String[] commands = new String[] {"soffice","-headless","\"-accept=socket,host=localhost,port=8100;urp;\""};
Process process = Runtime.getRuntime().exec(commands)
int code = process.waitFor();
if(code == 0)
    System.out.println("Commands executed successfully"); 
```

当我运行这个程序时，我得到“命令执行成功”。但是，当程序完成时，该进程没有运行。JVM是否有可能在程序运行后将其杀死？

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:42:50.707

我不确定我是否记错了，但据我所知，您正在生成命令但从未将它们传递给“执行”方法......您正在执行“”。

尝试使用 Runtime.getRuntime().exec(commands) =)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-01-21T10:07:55.303

我想说我是如何解决这个问题的。我创建了一个 sh 脚本，它基本上为我运行 soffice 的命令。

然后从 Java 我只运行脚本，它工作正常，如下所示：

```
公共 void startSOfficeService() 抛出 InterruptedException，IOException {
        //首先我们需要检查soffice进程是否正在运行
        字符串命令 = "pgrep soffice";
        进程进程 = Runtime.getRuntime().exec(commands);
        //需要等待这条命令执行
        int 代码 = process.waitFor();

        //如果我们从 readLine 得到任何东西，那么我们知道进程正在运行
        BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
        if (in.readLine() == null) {
            //没有返回，那么我们应该执行该过程
            进程 = Runtime.getRuntime().exec("/etc/init.d/soffice.sh");
            代码 = process.waitFor();
            log.debug("soffice 脚本启动");
        } 别的 {
            log.debug("soffice 脚本已经在运行");
        }

        附寄（）;
    }

```

我也通过调用这个方法杀死了 soffice 进程：

```
公共无效 killSOfficeProcess() 抛出 IOException {
        if (System.getProperty("os.name").matches(("(?i).*Linux.*"))) {
            Runtime.getRuntime().exec("pkill soffice");
        }
    }

```

请注意，这只适用于 Linux。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-18T04:19:10.697

我相信您没有正确处理报价。原始的 sh 命令行包含双引号以防止 shell 解释分号。在 soffice 进程看到它们之前，shell 将它们剥离。

在您的 Java 代码中，shell 永远不会看到参数，因此不需要额外的双引号（用反斜杠转义）——它们可能会使 soffice 感到困惑。

这是去掉了多余引号的代码（并添加了一个分号）

```
String[] commands = new String[] {"soffice","-headless","-accept=socket,host=localhost,port=8100;urp;"};
Process process = Runtime.getRuntime().exec(commands);
int code = process.waitFor();
if(code == 0) 
    System.out.println("Commands executed successfully"); 
```

（免责声明：我不懂 Java，也没有测试过这个！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-19T01:06:52.367

`"/Applications/OpenOffice.org\ 2.4.app/Contents/MacOS/soffice.bin -headless -nofirststartwizard -accept='socket,host=localhost,port=8100;urp;StartOffice.Service'"`

或者只是转义引号也可以。我们将这样的命令提供给 ant 脚本，最终以 exec 调用结束，就像你上面所说的那样。我还建议每 500 次左右的转换重新启动该过程，因为 OOO 无法正确释放内存（取决于您运行的版本）。

# lotus-notes - 启用/禁用从代码编辑表单域

> ID：378346
> 
> 赞同：2
> 
> 时间：2008-12-18T16:11:59.133
> 
> 标签：lotus-notes, lotus-domino, domino-designer-eclipse

我不是一个 Notes 程序员，但是，因为我的罪过，我最近一直在为一个内部项目开发一些 Notes 功能。我需要根据情况启用/禁用字段编辑。在我看来，这是一个相当标准的功能，我需要，但我无法在任何地方找到有关如何执行此操作的任何信息。

在表单设置（和其他字段的`onchange`）代码中，如下所示：

```
if some requirement = true then
    textField.enable = true
else
    textField.enable = false
end if 
```

我已经看到其他地方有一种基于某些代码有条件地隐藏段落的解决方法，有 2 个具有相反隐藏条件的段落，一个具有可编辑字段，另一个具有计算字段。但是，我对 Notes 的了解还不够，无法了解它是如何实现的（我可以看到它在其他形式上完成，但在 Notes 中似乎有一些我看不到或没有得到的“神奇”步骤）。

[编辑] Kerr 的回复似乎是我正在寻找的，但我仍然无法找到 InputEnabled 属性的位置。应该在最初的问题中说，我使用的是 Notes 7.0.3。

公平地说，何时启用/禁用该字段并不重要，它只是设置的一些布尔条件，在我的情况下仅在表单加载时，所以我什至不必担心这种动态变化显示表格时。

我在使用 Notes 时遇到了一些问题，我最大的问题是它与设计器 UI 的联系如此紧密，这完全是垃圾。我可以在大多数 GUI 语言（C#、Java、Delphi 甚至 VB）中以编程方式执行此类操作，但我需要在 Notes 中打开属性框并正确设置它们。

这作为一种*可选*方法是可以的，但是*强迫*你这样做意味着你只能像 IDE 在这种情况下允许你一样工作，而且这里的 IDE 似乎在积极地对你不利。你不能打开多个函数/脚本，你不能从一个脚本切换到另一个脚本而不返回左侧的菜单，你不能轻易地在代码库中搜索变量/字段的出现（相信我，这个对我来说是一个重大失败，因为在我的案例中，Notes 或内部代码库似乎大量使用了全局变量！），您只能通过显示的属性框处理字段，您不能在其中编辑代码通过主 Notes 客户端进行调试时的设计器。

虽然 Java 方面的编码比 LotusScript 好，但它仍然相当糟糕（为什么不能调试 INTO Java 代码？？为什么需要为每个 Java 类重新导入 JAR 文件，每个类都有不同的 CLASSPATH ？？？）。可能这在 Notes 8 中得到了改进，我听说它是​​基于 Eclipse 的。有谁知道这是真的还是假的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T18:32:35.010

了解有关“情况”的更多细节会有所帮助，但最常见的处理方法是在要启用/禁用的字段上使用隐藏公式。

从技术上讲，您并没有启用或禁用该字段，只是将其隐藏，但通常效果也一样。

由于在 Notes 中可以使用的事件很少，开发人员通常使用文档刷新作为“事件”来使字段隐藏或显示。

假设您有两个字段，称为 TriggerField 和 Subject。假设您想根据 TriggerField 中的值禁用主题。最简单的方法是将 TriggerField 设置为 Dialog List 类型并选中“Refresh fields on keyword change”选项。这意味着当对话框列表的值发生变化时，整个文档将被刷新。

然后在主题字段的隐藏时间公式中，指定何时显示或隐藏该字段的条件。任何时候字段值更改，然后刷新文档（即表单），在重新评估公式时隐藏。

根据您的情况，还有其他方法可以解决此问题。如果您想让用户自己刷新表单，请在表单上放置一个调用@Command([ViewRefreshFields]) 命令的按钮。如果您想同时对表单进行其他更改，您可以在刷新命令之前向该按钮添加任何其他公式。

另一种选择是只显示某个字段。然后创建一个运行 LotusScript 的按钮以允许用户更改该仅显示字段。在脚本中，您可以提示用户输入值，设置仅显示字段，然后调用文档刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:54:50.083

在 ND7 及更高版本中，如果您只想禁用输入字段，请在要禁用的字段的 InputEnabled 部分中编写适当的公式。

所以我有两个字段，一个称为触发器，一个值为“On”的复选框，另一个是文本字段的主题。检查触发时，我希望将启用值。

我只是将以下公式放在字段主题的 Input Enabled 元素中：

```
Trigger = "On" 
```

我还希望在触发器的值发生更改时重新计算此值，因此我在触发器字段上选择了“关键字更改时刷新字段”选项。

如果您卡在旧版本中，则需要适当地隐藏段落。

# c# - 正则表达式在搜索中忽略大小写但不替换

> ID：378349
> 
> 赞同：1
> 
> 时间：2008-12-18T16:12:26.930
> 
> 标签：c#, regex

在 C# 中，我希望能够一般地替换文本，在搜索中忽略大小写，但在替换中不忽略（有点？）。这是一个例子：

我有一个看起来像这样的列表：

站点 -> 地点

东西 -> 东西

ETC...

然后我想调用 ConvertMyString("Site") 并让它返回 "Place"。

到目前为止，我有这个工作，但是......

如果我调用 ConvertMyString("site")，我希望它返回 "place"（小写）。

有没有一种简单的方法可以使用 RegEx 或其他东西来做到这一点，而不必将所有大写和小写版本都放在列表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T16:18:38.027

您可以使用[MatchEvaluator](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.matchevaluator.aspx)来操作替换字符串吗？它会收到匹配的字符串，因此您可以查看它的情况并组装替换。不过似乎有点矫枉过正

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-26T10:14:21.607

或使用此在线工具： http: [//gskinner.com/RegExr/](http://gskinner.com/RegExr/)

# asp.net - ASP.NET 网站的 BIN 目录和参考资料

> ID：378350
> 
> 赞同：3
> 
> 时间：2008-12-18T16:12:48.053
> 
> 标签：asp.net, reference, shared-libraries, assemblies, web-site-project

想象一下以下解决方案：

*   网站 ABC.com（不是 Web 应用程序）
*   BLL（单独程序集中的业务逻辑层）
*   DTO（自己程序集中的 dto 对象）
*   DAL（它自己的程序集中的数据访问层）。

    1.  BLL 引用了 DAL。
    2.  BLL 具有对 DTO 层的引用。
    3.  网站项目引用了 BLL。

编译网站工程时，BIN目录下会出现以下DLL：
BLL.dll
DTO.dll
DAL.dll

当一个人去预览站点时，会发生一个错误，因为没有必要的程序集引用......现在如果右键单击网站项目，添加引用，并明确添加对缺少的程序集的引用，它会正常工作。

在我看来，ASP.NET 提取了在网站中添加/引用的引用程序集的引用程序集。

为什么需要对引用的引用添加显式引用...？抱歉，如果我的措辞不正确或令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T21:58:50.710

这是一篇关于您的问题[Compilation and Deployment](http://www.west-wind.com/presentations/AspNetCompilation/AspNetCompilation.asp)的好文章。

它与在运行时编译的“网站”有关。希望上面的文章能回答你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-01-12T12:18:50.873

今天刚刚为我正在进行的项目测试了这个场景。只需在 Web.config 中添加程序集就可以了：

```
<compilation debug="true">
  <assemblies>
    <clear/>
    <add assembly="mscorlib"/>
    <add assembly="System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    <add assembly="System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    <add assembly="System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    <add assembly="System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>

    <add assembly="YourBLLLib, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </assemblies>
</compilation> 
```

此外，您的程序集应该保留在您网站根目录下著名的 ./bin 文件夹中。GL！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T19:38:42.320

我认为这个问题可能与使用网站项目有关，而不是 Web 应用程序。我不记得了，但是网站项目的编译方式有些时髦，与 Web 应用程序项目相反。

# .net - 在 .NET 中使用 MAPI 时如何处理用户访问控制

> ID：378353
> 
> 赞同：0
> 
> 时间：2008-12-18T16:13:34.603
> 
> 标签：.net, windows-vista, uac, mapi

我使用 MAPI 从我的应用程序中创建带有附件的电子邮件，它在 XP 和 Vista（没有 UAC）上运行良好。当然，如果您启用了 UAC，它就不起作用（尽管它没有给出错误，并且不会提示用户允许继续）。

我做了一堆阅读，发现了很多不同的想法：

*   需要应用程序的管理员权限
*   要求应用程序具有某种形式的提升权限
*   为需要提升的一小部分代码创建一个 COM 对象
*   让操作系统提示用户询问他们是否要继续。

我想知道 SO 用户会做什么，因为我真的只需要提升一两个功能。我在这里寻找最小的痛苦（我不做 COM，但我可以用最好的 P/Invoke...），我正在使用 .NET 2.0（它是一个遗留应用程序） .

编辑：我同意提升整个应用程序并不是一个好主意，因为它只有一部分需要提升，但我的想法是，从长远来看，这可能比只提升其中一部分更容易。

此外，我宁愿远离 .NET SMTP 解决方案，因为我的目标只是创建一条带有附件的消息，但将其显示给用户，以便他们可以添加更多文本并在闲暇时发送。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T17:15:10.953

如果您可以放弃[MAPI](http://en.wikipedia.org/wiki/MAPI)转而使用更通用的[SMTP](http://en.wikipedia.org/wiki/SMTP)，您可以使用 .NET 的[System.Net.Mail.SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient(VS.80).aspx)类。与[MailMessage](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage(VS.80).aspx)类一起，您可以添加[附件并通过任何愿意的](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment(VS.80).aspx)[SMTP](http://en.wikipedia.org/wiki/SMTP)服务器发送消息。

所有这些都可以在良好的旧 .NET 2.0 中作为托管代码使用 - 无需 p/invoke 或 COM。参考页面中的示例。

# javascript - 查找 DOM 节点索引

> ID：378365
> 
> 赞同：60
> 
> 时间：2008-12-18T16:17:21.413
> 
> 标签：javascript, dom

我想找到给定 DOM 节点的索引。这就像做的相反

```
document.getElementById('id_of_element').childNodes[K] 
```

我想提取 的值，`K`因为我已经拥有对子节点和父节点的引用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-02-03T17:11:03.553

在所有版本的 Safari、FireFox、Chrome 和 IE >= 9 中，没有任何框架的最短方法：

`var i = Array.prototype.indexOf.call(e.childNodes, someChildEl);`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2008-12-18T16:49:26.437

稍短一点，期望元素在 elem 中，返回 k。

```
for (var k=0,e=elem; e = e.previousSibling; ++k); 
```

*在[Justin Dearing](https://stackoverflow.com/users/95195/)发表评论后，我查看了我的答案并添加了以下内容：*

或者，如果您更喜欢“while”：

```
var k=0, e=elem;
while (e = e.previousSibling) { ++k;} 
```

最初的问题是如何找到现有 DOM 元素的索引。我在这个答案中上面的两个示例都期望**elem**是一个 DOM 元素，并且该元素仍然存在于 DOM 中。如果你给他们一个 null 对象或一个没有**previousSibling**的对象，他们将会失败。更简单的方法是这样的：

```
var k=-1, e=elem;
while (e) {
    if ( "previousSibling" in e ) {
        e = e.previousSibling;
        k = k + 1;
    } else {
        k= -1;
        break;
    }
} 
```

如果**e**为**null**或其中一个对象中缺少**previousSibling ，则****k**为 -1。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T16:31:09.250

RoBorg 的答案有效……或者您可以尝试……

```
var k = 0;
while(elem.previousSibling){
    k++;
    elem = elem.previousSibling;
}
alert('I am at index: ' + k); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-04-02T23:28:56.023

现代原生方法可能包括`Array.from(e.children).indexOf(theChild)`

不支持 IE，但 Edge 有效：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-26T11:55:59.437

与原始海报一样，我试图

> 查找给定 DOM 节点的索引

但是我刚刚使用了一个点击处理程序，并且*仅与它的兄弟姐妹有关*。我最终无法使上述工作正常工作（毫无疑问，由于菜鸟，我尝试在“this”中为 elem 替换，但没有成功）。

我的解决方案是使用 jquery 并使用：

```
var index = $(this).parent().children().index(this); 
```

它无需指定元素的类型即可工作，即：'h1' 或 id 等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T16:22:35.287

我认为这样做的唯一方法是遍历父母的孩子，直到找到自己。

```
var K = -1;
for (var i = myNode.parent.childNodes.length; i >= 0; i--)
{
    if (myNode.parent.childNodes[i] === myNode)
    {
        K = i;
        break;
    }
}

if (K == -1)
    alert('Not found?!'); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2010-02-09T02:51:08.917

使用原型之类的框架，您可以使用它：

```
$(el).up().childElements().indexOf($(el)) 
```

# .net - .Net 中有类似 Java 描述符的东西吗？

> ID：378367
> 
> 赞同：2
> 
> 时间：2008-12-18T16:17:39.370
> 
> 标签：.net, clr, jvm, il

我正在为.NET 程序集开发一个静态分析工具。在 Java 中，有一个[Descriptor](http://java.sun.com/docs/books/jvms/second_edition/html/ClassFile.doc.html#1169)可用于表示具有指定语法的字符串中的方法或字段。

对于领域：

`double d[][][];`

将会

`[[[D`

它在进行字节码分析时特别有用。因为这很容易描述。如果.NET CLR 中有类似的东西？还是有更好的方法来实现这一目标？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-23T13:04:26.320

去年我在 .NET CIL 中做了很多静态分析，最好的方法是使用 ildasm.exe 或任何反汇编程序，它们会给你一些非常容易解析的 IL 语言文本文件。你会发现，不需要对任何东西进行逆向工程，你会发现 .NET 并没有那么编译。

如果您对 IL Assembler 很认真，这里有一本好书推荐：[Expert .NET 2.0 IL Assembler](https://rads.stackoverflow.com/amzn/click/com/1590596463 "专家级 .NET 2.0 IL 汇编器")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-23T20:26:57.330

嘿，谢谢文森特。我现在使用一个类来表示“返回类型+参数列表”信息，而不是字符串中的描述符。谢谢你推荐的书。是的，我使用 ildasm.exe 并读取程序集的内部。在我的项目中，我使用 Cecil 挖掘所有内容。

# ruby-on-rails - Rails 与 activerecord 共享会话

> ID：378376
> 
> 赞同：6
> 
> 时间：2008-12-18T16:19:11.020
> 
> 标签：ruby-on-rails, activerecord, session

我目前使用默认 cookie 作为我的单点登录 (SSO)，但在我推送更新后，一些用户会遇到奇怪的错误。我正在考虑使用活动记录来存储会话，但想知道如何告诉 Rails 会话在另一个数据库中？

因此，如果我通过 AR 在 App1DB 中存储会话，那么所有其他应用程序如何知道在哪里寻找会话？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-18T17:16:40.170

Rails**确实**支持数据库会话存储。

在 config/environment.rb 中，取消注释

```
# config.action_controller.session_store = :active_record_store 
```

检查 \actionpack-2.2.2\lib\action_controller\session\active_record_store.rb 显示 CGI::Session::ActiveRecordStore::Session 继承自 ActiveRecord::Base。

所以在config/environment.rb的最后，你应该可以说

```
CGI::Session::ActiveRecordStore::Session.establish_connection(
                              :adapter => "mysql",
                              :host => "otherserver",
                              :username => "session_user",
                              :password => "123ABC",
                              :database => "sessions") 
```

或者

```
CGI::Session::ActiveRecordStore::Session.establish_connection(:sessions) 
```

使用 config/database.yml 中定义的连接

* * *

例如，添加到 config/database.yml：

```
 sessions_development:
   adapter: mysql
   host: otherserver
   username: sessions_user
   password: 123ABC
   database: sessions 
```

添加到 config/environment.rb 的末尾

```
 CGI::Session::ActiveRecordStore::Session.establish_connection("sessions_#{RAILS_ENV}") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-10-09T01:49:53.507

在轨道 2.3 中

打开 config/initializers/session_store.rb

取消注释该行`ActionController::Base.session_store = :active_record_store`

在看起来像的行上更改键的值`:key => '_YOUR_APP_NAME_session'`

然后重新启动您的服务器。

The result will change your store, and invalidate all old cookies

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T16:49:21.583

会话配置的 Rails 文档（[http://api.rubyonrails.org/classes/ActionController/SessionManagement/ClassMethods.html#M000312](http://api.rubyonrails.org/classes/ActionController/SessionManagement/ClassMethods.html#M000312)）说这些是唯一的选择：[http://api.rubyonrails.org/classes/动作控制器/Base.html#M000523](http://api.rubyonrails.org/classes/ActionController/Base.html#M000523)。由于未列出要使用的数据库的选项，因此它可能不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T17:25:57.813

我们可以澄清你的问题吗？您是否有多个不同的 Rails 应用程序要使用同一个会话存储？我问是因为您提到了 SSO 和多个应用服务器。

# c++ - 如何调试意外以静默方式终止的 win32 进程？

> ID：378380
> 
> 赞同：8
> 
> 时间：2008-12-18T16:20:59.910
> 
> 标签：c++, debugging, winapi, crash

我有一个用 C++ 编写的 Windows 应用程序，它偶尔会消失。我使用蒸发这个词是因为没有留下任何东西：没有来自 Windows 的“我们很抱歉”消息，没有来自 Dr. Watson 设施的崩溃转储......

有一次在调试器下发生了崩溃，调试器没有中断——它显示应用程序仍在运行。当我手动暂停执行时，我发现我的进程不再有任何线程。

如何捕获此过程终止的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T16:28:03.997

您可以尝试使用[windows 调试工具包](http://www.microsoft.com/whdc/devtools/debugging/default.mspx)中的 adplus 实用程序。

```
adplus -crash -p yourprocessid 
```

自动转储工具为异常提供迷你转储，并在应用程序崩溃时提供完整转储。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T16:39:37.407

如果您使用的是 Visual Studio 2003 或更高版本，您应该启用调试器“第一次机会异常”处理程序功能，方法是打开“调试菜单 | 下的所有调试异常中断”选项。例外对话框。在调试器中启动进程的调试构建之前打开每个选项。

默认情况下，调试器中的大多数 First Chance Exception 处理程序都已关闭，因此如果 Windows 或您的代码抛出异常，调试器希望您的应用程序处理它。

First Chance Exception 系统允许调试器拦截进程和/或系统抛出的每一个可能的异常。

[http://support.microsoft.com/kb/105675](http://support.microsoft.com/kb/105675)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T16:49:53.970

发布的所有其他想法都很好。

但听起来应用程序正在调用 abort() 或 terminate()。

如果你在调试器中运行它，在这两个方法和 exit() 上都设置一个断点，只是为了更好的衡量。

[以下是由于异常](https://stackoverflow.com/questions/222175/why-destructor-is-not-called-on-exception#222358)出错而导致调用终止的情况列表。

另请参阅： [为什么在异常时不调用析构函数？](https://stackoverflow.com/questions/222175/why-destructor-is-not-called-on-exception)

这表明如果没有捕获到异常，应用程序将终止（）。因此，在 main() 中粘贴一个 catch 块，报告错误（到日志文件）然后重新抛出。

```
int main()
{
    try
    {
        // Do your code here.
    }
    catch(...)
    {
        // Log Error;
        throw;  // re-throw the error for the de-bugger.
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T16:36:32.000

好吧，问题是您遇到了访问冲突。您可能希望附加 WinDBG 并打开所有异常过滤器。它可能仍然无济于事-我的猜测是您遇到了没有引发异常的内存损坏。

您可能想查看[启用完整的页面堆检查](http://www.eggheadcafe.com/forumarchives/windbg/Jun2005/post23448378.asp)

您可能还想查看有关堆损坏的[旧问题，以了解有关工具的一些想法。](https://stackoverflow.com/questions/1069/heap-corruption-under-win32-how-to-locate)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-18T16:40:04.300

这种突然消失的最常见原因是堆栈溢出，通常是由某种无限递归引起的（当然，这可能涉及一系列相互调用的多个函数）。

你的应用程序有这种可能性吗？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T16:29:32.887

[您可以在 Windows 上的事件查看器](http://en.wikipedia.org/wiki/Event_Viewer)中检查 Windows 日志。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T16:31:16.503

首先我想说的是，我在 Windows 开发方面的经验并不多。在那之后，我认为这是一个典型的案例，日志可能会有所帮助。

通常调试和记录提供正交信息。如果您的调试器没用，那么日志可能会对您有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-12-18T19:38:14.300

这可能是对 _exit() 或某些 Windows 等效项的调用。尝试在 _exit 上设置断点...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-29T22:36:05.133

您是否尝试过 PC Lint 等并在您的代码上运行它？尝试以最大警告编译如果这是一个 .NET 应用程序 - 使用 FX Cop。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-05-13T09:12:25.453

可能的原因浮现在脑海。

*   终止进程（）
*   堆栈溢出异常
*   处理异常时出现异常

最后一个尤其​​会导致应用程序立即失败。
堆栈溢出 - 您可能会收到通知，但不太可能。

进入调试器，将所有异常通知更改为“始终停止”而不是“如果未处理则停止”，然后执行导致程序失败的操作。如果您遇到异常，调试器将停止，您可以决定这是否是您正在寻找的异常。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-23T19:04:00.893

我花了几个小时试图在 Windows 7 上运行 64 位应用程序的 Visual Studio 2017 上对此进行深入研究。我最终不得不在**RtlReportSilentProcessExit**函数上设置断点，该函数位于**ntdll.dll**文件中。只需基本函数名称就足以让 Visual Studio 找到它。

也就是说，在我让 Visual Studio 自动下载 C 标准库的符号后，它也自动停止了导致问题的运行时异常。

# asp.net - ViewState 对象在母版页加载中丢失

> ID：378381
> 
> 赞同：5
> 
> 时间：2008-12-18T16:21:01.703
> 
> 标签：asp.net, master-pages, viewstate

我在内容页面的页面加载中分配 ViewState["something"]，当我尝试访问母版页加载事件处理程序中的 ViewState 变量时，viewstate 变量丢失了。谁能指导我为什么会发生这种情况以及解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T17:09:33.430

母版页和内容页不共享相同的 ViewState。如果您尝试将内容页面中的某些内容传递到母版页，则有两种选择：
- 在 HTTP 请求期间使用整个站点通用的 this.Context.Items
- 在母版页上创建公共属性，将 this.Master 从内容页转换为母版页类并设置属性
- 使用 Session

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T16:26:38.463

也许（刚刚在网上找到）这是解决方案的提示：

> 除非 MasterPage 的 ViewState 打开，否则它下面的所有控件都将失去其状态。

[在标题为MasterPage and viewstate issue](http://geekswithblogs.net/vivek/archive/2006/10/04/93094.aspx)的博客文章中找到了这一点。这可能与在母版页中关闭 Viewstate 有关吗？

# asp.net - 在 VS 中通过 html 游标滞后

> ID：378387
> 
> 赞同：1
> 
> 时间：2008-12-18T16:22:39.390
> 
> 标签：asp.net, visual-studio, visual-studio-2008

如果我在源视图中打开了一个大小合适的 asp.net 页面，并按住向上键或向下键滚动它，它会定期“卡住”。它会在一条线上停止几微秒，你可以看到屏幕闪烁，就像它试图追赶它在幕后所做的一样。在我的双显示器设置中，我在显示器 2 中工作，您可以在显示器 1 上看到桌面上的图标闪烁。这很烦人，因为我总是越界，必须来回移动，不断纠正滞后。当我浏览代码时，知道它在做什么吗？我可以关闭任何东西来阻止这种情况发生吗？（降低我的按键重复率不是一种选择。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T17:13:21.100

可能是属性窗格——这在 VS2005 中是一个大问题，VS2005SP1 不仅添加了关闭此功能的功能，而且默认将其关闭，但看起来他们已经删除了在 VS2008 中关闭它的选项。

[Scott Guthrie在 VS2005 SP1 中](http://weblogs.asp.net/scottgu/archive/2006/12/19/html-source-editing-performance-improvements-in-vs-2005-sp1.aspx)发表了一篇关于HTML 源代码编辑性能的文章。

如果您没有真正使用它，关闭属性窗格可能会很好地解决问题。

# unit-testing - VSTS 单元测试 - 构建系统

> ID：378388
> 
> 赞同：1
> 
> 时间：2008-12-18T16:24:11.370
> 
> 标签：unit-testing, tfs, msbuild

我在 MSBuild (NET 3.0) 和 cc.net 上开发了一个构建系统来执行 Visual Studio 2008 应用程序的持续集成构建，但是团队中的一位开发人员最近添加了一个 VSTS 单元测试项目。microsoft 是否提供了任何 SDK 或插件来允许在非团队系统构建环境中编译它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:31:15.240

您可以从命令行运行测试，但它需要在您的构建服务器上安装 Visual Studio 的测试版：

[http://devlicio.us/blogs/derik_whittaker/archive/2008/09/25/clean-build-server-with-mstest-fail.aspx](http://devlicio.us/blogs/derik_whittaker/archive/2008/09/25/clean-build-server-with-mstest-fail.aspx)

[http://aspadvice.com/blogs/ssmith/archive/2008/03/18/Continuous-Integration-Setup-with-MSTest.aspx](http://aspadvice.com/blogs/ssmith/archive/2008/03/18/Continuous-Integration-Setup-with-MSTest.aspx)

此人正在使用 CC.NET 进行 MSTest，因此可能会有所帮助：

[http://testearly.findtechblogs.com/default.asp?item=630602](http://testearly.findtechblogs.com/default.asp?item=630602)

一般来说，这是许多人选择[NUnit](http://www.nunit.org)、[xUnit.NET](http://www.codeplex.com/xunit)或[MbUnit](http://www.mbunit.com/)而非 MSTest 的主要原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-02-02T15:12:53.017

如果您使用 MSTEST，则必须将该版本放在构建服务器上。长话短说，最好将开发人员使用的测试框架从 MStest 更改为 Nunit。它是一个更轻的解决方案。

# mfc - 使用 PropSheetLook_OneNoteTabs 样式动态调整 CMFCPropertySheet 的大小

> ID：378408
> 
> 赞同：1
> 
> 时间：2008-12-18T16:31:16.660
> 
> 标签：mfc, mfc-feature-pack

我正在尝试动态调整 a`CMFCPropertySheet`以在每个页面的底部添加自定义控件。

由于所有属性页的高度不同，我有一种机制可以在必要时增加大小。为此，我重写了该`OnActivatePage`方法，并使用`SetWindowPos`，我可以调整工作表的大小，首先是选项卡控件，然后是页面，最后我可以移动 OK/Cancel/Help 按钮。

它适用于`PropSheetLook_OutlookBar`和`PropSheetLook_Tabs`样式，但不适用于`PropSheetLook_OneNoteTabs`样式。页面（或选项卡）未正确调整大小（页面的浅灰色未填满工作表。

OneNote 风格[OneNote http://www.freeimagehosting.net/uploads/th.ec91600664.jpg](http://www.freeimagehosting.net/uploads/th.ec91600664.jpg)

Outlook 风格[Outlook http://www.freeimagehosting.net/uploads/th.319b6938ab.jpg](http://www.freeimagehosting.net/uploads/th.319b6938ab.jpg)

任何想法？MFC 功能包错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-27T17:19:55.880

我发现了问题。需要获取对`OneNote`版本使用的不同选项卡控件的引用`GetTab()`并相应地调整其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-11-01T02:38:09.563

只需按照[此处](http://support.microsoft.com/kb/300606)所示的说明进行操作。尽管这些说明适用于**CPropertySheet**，但它们也适用于**CMFCPropertySheet**。

代码的某些部分已弃用，因此您需要进行以下修改。

1.  完全跳过**XmnPropSheetCallback**和**DoModal**实现
2.  `OnInitDialog`只需调用`CPropertySheet::OnInitDialog();`然后调用，而`OnSize`不是执行该代码中显示的所有内容。

# web-services - 使用 LoadRunner 测试服务器进程

> ID：378411
> 
> 赞同：0
> 
> 时间：2008-12-18T16:32:11.960
> 
> 标签：web-services, ibm-mq, performance-testing, loadrunner

我们目前使用 LoadRunner 来测试我们的 Web 应用程序的性能，但我们也有一些需要测试的服务器端进程。

## 背景：

我们将这些过程称为我们的“引擎”。一个引擎通过轮询 IBM WebSpere MQ 队列的消息来接收消息。它从队列中取出一条消息，对其进行处理，然后将结果放入出站队列。我们目前通过 TCL 脚本测试这个引擎，该脚本读取包含消息的文件，将消息放入入站队列，然后轮询出站队列以获取结果。

另一个引擎通过 Web 服务接收消息。Web 服务将消息写入我们数据库中的表中。引擎轮询数据库表中的新消息，获取一条消息并对其进行处理，然后将结果放回数据库中。我们目前通过一个 VBScript 脚本测试这个引擎，该脚本读取一个包含消息的文件，将消息发送到 Web 服务，然后继续查询 Web 服务以获取结果，直到它准备就绪。

## 问题：

我们希望取消 TCL 和 VBScript 脚本并在 LoadRunner 上实现标准化，以便我们拥有一个工具来管理我们所有的性能测试。

1.  我知道 LoadRunner 支持“开箱即用”的 Web 服务协议，但我不确定如何使用它。有谁知道如何使用 LoadRunner 测试 Web 服务的任何示例？
2.  LoadRunner 是否有用于 MQ 的协议？是否可以使用 LoadRunner Vuser 将负载（放入消息）驱动到 MQ 队列中？我们是否需要从 HP 或其他供应商处购买东西才能做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-20T09:49:43.000

包含的软件中有一个 LoadRunner 插件，用于与 MQ 系列接口并将消息直接放入队列中。也完全支持 Web 服务，也支持 VBScript，也许使用 QTPro 作为脚本和 LoadRunner 中的 GUI 用户？科林。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T22:54:44.233

对于 #1，作为 Web 服务脚本的替代方案，您可以尝试记录 Windows 套接字脚本。我使用 LoadRunner 来记录 winsock 脚本来测试一些（Java）API。我所做的是编写一个非常简单的 Java API 客户端，然后从 Windows 批处理文件中执行它。在 VUGen 中录制 LR 脚本时，该批处理文件将被引用为可执行文件。

我不确定 VUGen 是否可以加载 VBScript 文件进行录制，但您可以尝试。否则，您可能会尝试将您的 VBScript 包装在可由 VUGen 运行的批处理文件中。

当 VUGen 录制一个 winsock 脚本时，它基本上是在监视您正在录制的进程的网络通信。完成录制后，它会在“data.ws”工作表中生成网络数据转储，您可以使用 VUGen 查看和编辑。您可以为负载测试参数化此数据工作表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-09T17:02:56.840

可以在 LoadRunner 中编写 SOA 请求并解析响应。请参阅 wilsonmar.com/1lrscript.htm。

但请记住，为功能测试开发的 TCL 和 VBScript 与 LoadRunner 脚本具有不同的体系结构和范围。QTP 和 WinRunner 接管应用程序。

LoadRunner 脚本专注于通过网络交换数据。在无头 SOA XML 的情况下，这种架构区别并不重要。

但是，您从 GUI 维护 VBscript 可能更容易，因为在 LoadRunner 中创建 SOA 脚本需要比大多数 MQ 开发人员更深入地了解消息格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-03-15T12:50:23.393

您确实有三种使用 LoadRunner 从 MQ 队列推送和弹出消息的路径

(1) MQTester。这是与 LoadRunner (2) Winsock 一起使用的本机 MQ 协议插件。最好将 Winsock 的开发描述为与从胡椒粉中挑选蝇粪极其相似。乏味，但最终非常有益。开箱即用，除了许可证更新（可能）之外，不需要额外的插件 (3) 使用 Java 虚拟用户的 JMS，请参阅。 [http://en.wikipedia.org/wiki/Java_Message_Service](http://en.wikipedia.org/wiki/Java_Message_Service)。您最终会在 LoadRunner 的 Java 模板虚拟用户中使用一个小型 Java 程序。您将不得不处理与 LoadRunner 相关的所有 Java 黑魔法方面，但是一旦确定了发布和安装细节的组合，您就可以使用虚拟相同的代码发布到几乎任何 JMS 提供程序（不仅仅是 MQ）某些连接出厂设置已更改。

您也应该能够使用 Web 服务虚拟用户执行 JMS，但我尚未测试该配置。查看运行时设置的 JMS 部分。

# c# - 如何提取括号（圆括号）之间的文本？

> ID：378415
> 
> 赞同：251
> 
> 时间：2008-12-18T16:32:27.343
> 
> 标签：c#, .net, regex

我有一个字符串`User name (sales)`，我想提取括号之间的文本，我该怎么做？

我怀疑子字符串，但直到右括号我才能弄清楚如何阅读，文本的长度会有所不同。

* * *

## 回答 #1

> 赞同：507
> 
> 时间：2011-08-27T15:05:51.330

如果您希望远离正则表达式，我能想到的最简单的方法是：

```
string input = "User name (sales)";
string output = input.Split('(', ')')[1]; 
```

* * *

## 回答 #2

> 赞同：468
> 
> 时间：2008-12-18T16:42:24.220

一个非常简单的方法是使用正则表达式：

```
Regex.Match("User name (sales)", @"\(([^)]*)\)").Groups[1].Value 
```

* * *

作为对（非常有趣的）评论的回应，这里有相同的正则表达式和一些解释：

```
\(             # Escaped parenthesis, means "starts with a '(' character"
    (          # Parentheses in a regex mean "put (capture) the stuff 
               #     in between into the Groups array" 
       [^)]    # Any character that is not a ')' character
       *       # Zero or more occurrences of the aforementioned "non ')' char"
    )          # Close the capturing group
\)             # "Ends with a ')' character" 
```

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2008-12-18T16:44:13.747

假设你只有一对括号。

```
string s = "User name (sales)";
int start = s.IndexOf("(") + 1;
int end = s.IndexOf(")", start);
string result = s.Substring(start, end - start); 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2011-01-27T21:52:15.963

使用这个功能：

```
public string GetSubstringByString(string a, string b, string c)
    {
        return c.Substring((c.IndexOf(a) + a.Length), (c.IndexOf(b) - c.IndexOf(a) - a.Length));
    } 
```

这是用法：

```
GetSubstringByString("(", ")", "User name (sales)") 
```

输出将是：

```
sales 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-12-18T16:42:13.063

正则表达式可能是这里最好的工具。如果您不熟悉它们，我建议您安装[Expresso](http://www.ultrapico.com/Expresso.htm) - 一个很棒的小型正则表达式工具。

就像是：

```
Regex regex = new Regex("\\((?<TextInsideBrackets>\\w+)\\)");
string incomingValue = "Username (sales)";
string insideBrackets = null;
Match match = regex.Match(incomingValue);
if(match.Success)
{
    insideBrackets = match.Groups["TextInsideBrackets"].Value;
} 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2008-12-18T16:38:56.223

也许是一个正则表达式？我认为这会奏效...

```
\(([a-z]+?)\) 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2008-12-18T16:43:30.847

```
string input = "User name (sales)";

string output = input.Substring(input.IndexOf('(') + 1, input.IndexOf(')') - input.IndexOf('(') - 1); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2013-01-28T08:50:08.133

```
using System;
using System.Text.RegularExpressions;

private IEnumerable<string> GetSubStrings(string input, string start, string end)
{
    Regex r = new Regex(Regex.Escape(start) +`"(.*?)"`  + Regex.Escape(end));
    MatchCollection matches = r.Matches(input);
    foreach (Match match in matches)
    yield return match.Groups[1].Value;
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2017-07-20T12:44:35.787

```
int start = input.IndexOf("(") + 1;
int length = input.IndexOf(")") - start;
output = input.Substring(start, length); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2008-12-18T16:47:39.683

使用正则表达式：

```
string test = "(test)"; 
string word = Regex.Match(test, @"\((\w+)\)").Groups[1].Value;
Console.WriteLine(word); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-18T16:49:11.100

```
input.Remove(input.IndexOf(')')).Substring(input.IndexOf('(') + 1); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-12-18T16:49:12.800

我认为该`regex`方法优越，但如果您想使用谦虚`substring`

```
string input= "my name is (Jayne C)";
int start = input.IndexOf("(");
int stop = input.IndexOf(")");
string output = input.Substring(start+1, stop - start - 1); 
```

或者

```
string input = "my name is (Jayne C)";
string output  = input.Substring(input.IndexOf("(") +1, input.IndexOf(")")- input.IndexOf("(")- 1); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-02-06T20:24:34.070

我发现正则表达式非常有用，但很难编写。所以，我做了一些研究，发现这个[工具](http://www.rubular.com/)让编写它们变得如此简单。

不要回避它们，因为语法很难弄清楚。他们可以如此强大。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-11-26T04:29:32.597

这是一个避免使用正则表达式的通用可读函数：

```
// Returns the text between 'start' and 'end'.
string ExtractBetween(string text, string start, string end)
{
  int iStart = text.IndexOf(start);
  iStart = (iStart == -1) ? 0 : iStart + start.Length;
  int iEnd = text.LastIndexOf(end);
  if(iEnd == -1)
  {
    iEnd = text.Length;
  }
  int len = iEnd - iStart;

  return text.Substring(iStart, len);
} 
```

要在您的特定示例中调用它，您可以执行以下操作：

```
string result = ExtractBetween("User name (sales)", "(", ")"); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-04-18T18:18:25.933

我最近一直在使用和滥用 C#9，即使在有问题的情况下，我也情不自禁地投入 Spans ......只是为了好玩，这里是上面答案的变体：

```
 var input = "User name (sales)";
    var txtSpan = input.AsSpan();
    var startPoint = txtSpan.IndexOf('(') + 1;
    var length = txtSpan.LastIndexOf(')') - startPoint;
    var output = txtSpan.Slice(startPoint, length); 
```

*对于 OP 的特定场景*，它会产生正确的输出。（就我个人而言，我会使用其他人发布的 RegEx。更容易绕过上述解决方案崩溃的更棘手的场景）。

**我为自己的项目制作的更好的版本（作为扩展方法）：**

```
//Note: This only captures the first occurrence, but 
//can be easily modified to scan across the text (I'd prefer Slicing a Span)  
public static string ExtractFromBetweenChars(this string txt, char openChar, char closeChar)
{
    ReadOnlySpan<char> span = txt.AsSpan();
    int firstCharPos = span.IndexOf(openChar);
    int lastCharPos = -1;

    if (firstCharPos != -1) 
    { 
        for (int n = firstCharPos + 1; n < span.Length; n++)
        {
            if (span[n] == openChar) firstCharPos = n; //This allows the opening char position to change
            if (span[n] == closeChar) lastCharPos = n;
            if (lastCharPos > firstCharPos) break;
            //This would correctly extract "sales" from this [contrived]
            //example: "just (a (name (sales) )))(test"
        }
        return span.Slice(firstCharPos + 1, lastCharPos - firstCharPos - 1).ToString();
    }
    return "";
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-02-18T13:55:59.420

此代码比这里的大多数解决方案（如果不是全部）更快，打包为[String](https://msdn.microsoft.com/en-us/library/system.string%28v=vs.110%29.aspx) [扩展方法](https://msdn.microsoft.com/en-us//library/bb383977.aspx)，它不支持递归嵌套：

```
public static string GetNestedString(this string str, char start, char end)
{
    int s = -1;
    int i = -1;
    while (++i < str.Length)
        if (str[i] == start)
        {
            s = i;
            break;
        }
    int e = -1;
    while(++i < str.Length)
        if (str[i] == end)
        {
            e = i;
            break;
        }
    if (e > s)
        return str.Substring(s + 1, e - s - 1);
    return null;
} 
```

这个更长更慢，但它更好地处理递归嵌套：

```
public static string GetNestedString(this string str, char start, char end)
{
    int s = -1;
    int i = -1;
    while (++i < str.Length)
        if (str[i] == start)
        {
            s = i;
            break;
        }
    int e = -1;
    int depth = 0;
    while (++i < str.Length)
        if (str[i] == end)
        {
            e = i;
            if (depth == 0)
                break;
            else
                --depth;
        }
        else if (str[i] == start)
            ++depth;
    if (e > s)
        return str.Substring(s + 1, e - s - 1);
    return null;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-31T14:50:32.670

与@Gustavo Baiocchi Costa 非常相似，但偏移量是用另一个中间值计算的`Substring`。

```
int innerTextStart = input.IndexOf("(") + 1;
int innerTextLength = input.Substring(start).IndexOf(")");
string output = input.Substring(innerTextStart, innerTextLength); 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-11-27T04:04:05.037

我在寻找非常相似的实现的解决方案时遇到了这个问题。

这是我实际代码的片段。从第一个字符（索引 0）开始子字符串。

```
 string separator = "\n";     //line terminator

 string output;
 string input= "HowAreYou?\nLets go there!";

 output = input.Substring(0, input.IndexOf(separator)); 
```

# model - 扩展富域模型

> ID：378420
> 
> 赞同：12
> 
> 时间：2008-12-18T16:34:38.167
> 
> 标签：model, scalability, domain-driven-design

领域驱动设计鼓励您使用丰富的领域模型。这意味着所有的领域逻辑都位于领域模型中，并且领域模型是至高无上的。持久性成为一个外部问题，因为理想的领域模型本身对持久性一无所知（例如数据库）。

我一直在一个中等规模的单人项目（> 100k 行 Java）中使用它，我发现了许多优点，主要是它提供的灵活性和可重构性，而不是面向数据库的方法。我可以添加和删除域类，点击几个按钮，一个全新的数据库模式和 SQL 层就会推出。

但是，我经常遇到这样的问题，即我发现很难将富域逻辑与支持应用程序的 SQL 数据库这一事实相协调。通常，这会导致典型的“1+N 查询问题”，即您获取 N 个对象，然后对每个再次触发查询的对象执行一个重要的方法。手动优化此过程允许您在恒定数量的 SQL 查询中执行该过程。

在我的设计中，我允许系统插入这些优化版本。我通过将代码移动到一个“查询模块”中来做到这一点，该模块包含数十个特定于域的查询（例如 getActiveUsers），其中两个都在内存中（幼稚且不可扩展）和基于 SQL（用于部署）的实现。这使我可以优化热点，但有两个主要缺点：

*   我有效地将我的一些域逻辑移动到它并不真正属于的地方，实际上甚至将其推入 SQL 语句中。
*   这个过程需要我仔细阅读查询日志以找出热点在哪里，然后我必须重构代码，通过将其降低到查询中来降低其级别抽象。

有没有更好、更简洁的方法来协调域驱动设计及其富域模型与您不能将所有实体都保存在内存中并因此仅限于数据库后端的事实？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T17:15:32.983

至少有两种方法可以看待这个问题，一种是技术“我可以做些什么来更智能地加载我的数据”版本。我知道的唯一真正聪明的事情是动态集合，这些集合部分加载，其余部分按需加载，可能预加载部分。在[JavaZone 2008 上有一个关于这个的有趣的演讲](http://www4.java.no/incogito/session/Managing+one-to-too-many+relations+in+rich+domain+models.html)

在我使用 DDD 时，第二种方法更受我关注。如何在不牺牲太多 DDD 优点的情况下制作我的模型，使其更“可加载”。多年来我的假设一直是，许多 DDD 模型对领域概念进行建模，这些领域概念实际上是所有允许的领域状态的总和，跨越所有业务流程以及随着时间的推移在每个业务流程中出现的不同状态。我相信，如果域模型在进程/状态方面稍微标准化一点，那么很多这些加载问题都会大大减少。这通常意味着没有“订单”对象，因为订单通常存在于多个不同的状态，这些状态具有相当不同的语义（ShoppingCartOrder、ShippedOrder、InvoicedOrder、HistoricalOrder）。

但是这里没有灵丹妙药..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T17:39:41.030

根据我的经验，这是做事的唯一方法。如果您编写的系统试图完全隐藏或抽象持久层，那么您将无法使用持久层的细节来优化事物。

我最近一直在解决这个问题，并且一直在研究一种解决方案，其中持久层可以选择实现代表优化的接口。我一直在玩它，但要使用您的 ListAUsers 示例，它会像这样......

首先编写一个 ListAllUsers 方法，该方法在域级别执行所有操作。有一段时间这会起作用，然后它会开始变得太慢。

当使用富域模型变得缓慢时，创建一个名为“IListActiveUsers”的接口（或者可能更好）。并让您的持久性代码使用适当的技术（可能是优化的 SQL）来实现此接口。

现在您可以编写一个层来检查这些接口并调用特定方法（如果存在）。

这并不完美，我对这类事情没有太多经验。但在我看来，关键是要确保如果您使用的是完全幼稚的持久性方法，那么所有代码​​都应该仍然有效。任何优化都需要作为对此的补充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T16:54:33.633

不，不是。反正我并不知道（尽管我很想听听任何 DDD 支持者的相反回应）。

根据我自己的经验，以及与我一起工作的经验丰富的团队的经验，如果您希望从数据库支持的应用程序中获得最佳性能，那么将其架构转变为面向服务的架构是不可避免的。我在这里写了[更多关于此](http://gregbeech.com/blogs/tech/archive/2008/07/16/service-orientation-is-inevitable-for-performant-database-applications.aspx)的内容（文章讨论了延迟加载的属性，但您可以考虑将这一点应用于需要检索更多数据以完成其工作的类上的任何方法）。

正如您现在所做的那样，您可以从一个丰富的域模型开始，并在出于性能原因需要时将其转换为面向服务的。只要您定义了绩效目标并且您正在实现它们，就没有必要改变一切。我认为这是一种相当不错的务实方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-25T11:42:57.990

我相信您应该考虑将查询层作为您的域逻辑的一部分。您应该允许自己编写优化的查询，这些查询只能通过对持久性解决方案的“深入”了解来完成。不要试图抽象出一切。此外，批处理是您的应用程序的另一部分，也应该允许您了解您的领域。我发现没有必要仅仅因为我无法将批处理放入我的域模型中而尝试避免批处理。但是，您可以组合这些方法：使用查询来找出需要更改的对象，然后使用您的域逻辑将它们的 id 排队并自行处理每个对象。

# c# - 在 .NET 中移动不同卷上的文件

> ID：378422
> 
> 赞同：5
> 
> 时间：2008-12-18T16:35:42.297
> 
> 标签：c#, .net, file-io, directory-structure

显然我无法使用 Directory.Move 移动不同卷上的文件。

我读过我必须将每个文件单独复制到目标，然后删除源目录。

我还有其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T16:49:02.600

无论 Directory.Move（或任何其他函数）是否执行卷之间的移动，它本质上都是在下面进行复制和删除。所以如果你想提高速度，那是不会发生的。我认为最好的解决方案是编写自己的可重用移动函数，该函数将从路径和路径获取卷标 (C:,D:)，然后在必要时执行移动或复制+删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T16:58:11.113

`UnauthorizedAccessException`据我所知，没有其他方法，但是删除目录有一个问题：删除目录及其所有内容时，只读文件可能会导致。

这会递归一个目录并取消设置所有只读标志。打电话之前`Directory.Delete`：

```
public void removeReadOnlyDeep(string directory)
{
    string[] files = Directory.GetFiles(directory);
    foreach (string file in files)
    {
        FileAttributes attributes = File.GetAttributes(file);
        if ((attributes & FileAttributes.ReadOnly) != 0)
        {
            File.SetAttributes(file, ~FileAttributes.ReadOnly);
        }
    }
    string[] dirs = Directory.GetDirectories(directory);
    foreach (string dir in dirs)
    {
        removeReadOnlyDeep(dir);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-14T09:27:42.433

一个更简单的选择是添加对`Microsoft.VisualBasic`命名空间的引用并使用`MoveDirectory`可以跨卷移动的方法。

```
Microsoft.VisualBasic.FileIO.FileSystem.MoveDirectory(sourceDirName, destDirName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-04T06:03:11.310

尝试使用这个：

```
public static void RobustMove(string sourceDirectory, string destDirectory)
{
    //move if directories are on the same volume
    if (Path.GetPathRoot(source) == Path.GetPathRoot(destination))
    {
        Directory.Move(source, destination);
    }
    else
    {        
        CopyDirectoryRecursive(source, destination);
        Directory.Delete(source, true);
    }
} 
```

你会[在这里](https://stackoverflow.com/questions/58744/copy-the-entire-contents-of-a-directory-in-c-sharp)找到 CopyDirectoryRecursive 函数：

[在您使用跨区卷](http://lifehacker.com/5986883/how-to-combine-multiple-hard-drives-into-one-volume-for-cheap-high-capacity-storage)或符号链接到另一个物理磁盘之前，这应该可以工作。

为了更加健壮，您可以改进此功能以使用 Move 直到 System.IO .Exception 被抛出，然后切换到复制和删除。

# requirements - 使用 MS Word 进行软件需求审查 - 如何以自动方式获取指标？

> ID：378425
> 
> 赞同：2
> 
> 时间：2008-12-18T16:36:26.820
> 
> 标签：requirements, review

假设我在 MS Word 中有一个需求文档，其他人对其进行审核并提供使用“跟踪更改”功能发现的问题列表。

有没有办法提取“审查过程中发现了多少个主要/次要问题”？使用自动化脚本 - 用于度量目的？

我看到[CodeCollaborator](http://smartbear.com/codecollab.php)有一些 MS Word 集成，但它似乎不知道如何查看 Word 内部以提取跟踪的更改数据。它只是启动文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:47:57.203

我曾经写过一个 Word 宏，可以将评论提取到单独的文档中，欢迎您尝试根据您的目的调整它，如果您遇到问题，请在此处回复，我可以帮助您进行更改。

```
Public Sub PROCESS_COMMENTS()

Dim strReplaceText As String
Dim myPar As Paragraph
Dim strCurrentColumn As String
Dim i As Integer
Dim Com As Comment

    Application.ScreenUpdating = False

    '   set the input and output docs.
    Set inDoc = ActiveDocument
    '   check we have comments to process in the original document
    If inDoc.Comments.Count < 1 Then
        MsgBox "No comments in the document"
        Exit Sub
    End If

    '   comments exist so create new document
    Set outDoc = Documents.Add
    Set outRange = outDoc.Content

    outDoc.Range.InsertAfter "List of Comments:"
    outDoc.Paragraphs(outDoc.Paragraphs.Count).Style = outDoc.Styles("Heading 1")
    outDoc.Range.InsertParagraphAfter

    '   cycle through comments, inserting them in the new document
    '   display the new document and refresh
    outDoc.Activate
    Application.ScreenRefresh

    For Each Com In inDoc.Comments
        outRange.InsertAfter "[" & Com.Author & " - " & Com.Initial & Com.Index & "] "
        outDoc.Paragraphs(outDoc.Paragraphs.Count).Range.Font.Bold = True
        outDoc.Range.InsertParagraphAfter
        outRange.InsertAfter Com.Range.Text
        outDoc.Paragraphs(outDoc.Paragraphs.Count).Range.Font.Bold = False

        Set myRange = Com.Scope

        outDoc.Range.InsertParagraphAfter
        outDoc.Range.InsertParagraphAfter
    Next

    Application.ScreenUpdating = True
    Set outDoc = ActiveDocument

End Sub 
```

# php - 为什么这个 PHP 代码没有生成有效的 PNG 图像？

> ID：378428
> 
> 赞同：1
> 
> 时间：2008-12-18T16:36:59.940
> 
> 标签：php, gd

```
$c = $record['corrects'];
$i = $record['incorrects'];

if($c == 0 && $i == 0)
{
    $image = imagecreatetruecolor(200,80);

    $white = imagecolorallocate($image,255,255,255);
    $red = imagecolorallocate($image,255,0,0);

    imagefilledrectangle($image,0,0,199,79,$white);

    $text = 'Quiz cancelled!';

    $box = imageftbbox(10,0,'verdana.ttf',$text);

    $x = imagesx($image)/2 - abs($box[2] - $box[0])/2 - 5;

    $y = imagesy($image)/2 - abs($box[5] - $box[3])/2 - 5;

    imagefttext($image,10,0,$x,$y,$red,'verdana.ttf',$text);

    header('Content-type: image/png');

    imagepng($image);
    imagedestroy($image);

    exit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T16:41:22.397

注释掉 imagepng() 和 header() 调用并在浏览器中查看输出以查看是否生成任何错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T16:41:17.293

我试过了，它有效。它产生了一条红色文字，上面写着“测验取消！”。

也许您应该检查 $c 和 $i 是否确实都是 0？

我假设你有 < ? php 和 ? > 文件开头和结尾的标签？

编辑：另外，ttf字体文件在正确的位置吗？

如果您可以提供更多信息，它也可能会有所帮助：浏览器是否出现错误？或者只是什么都不显示？

本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T16:46:44.897

如前所述，这个问题在细节上有点粗略。

GDFONTPATH 环境变量是否设置正确？

```
<?php
// Set the enviroment variable for GD
putenv('GDFONTPATH=' . realpath('.')); 
```

（来自[uk.php.net/imagefttext](http://uk.php.net/imagefttext)）

# sharepoint - 以编程方式将 Web 部件添加到 Sharepoint 页面并将值保存到 Web 部件个性化存储中

> ID：378430
> 
> 赞同：1
> 
> 时间：2008-12-18T16:37:49.343
> 
> 标签：sharepoint, web-parts, personalization

在我的项目中，我以编程方式创建了一个 Web 部件页面，并使用 SPLimitedWebPartManager 向其中添加了一个 Web 部件。我还想为 Web 部件设置一些属性并将其保存到 Web 部件个性化范围中。如何访问 Web 部件的个性化存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-01-12T14:46:32.263

在更改您的属性以设置它们之后，使用 SPLimitedWebPartManager 上的 SaveChanges 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-23T13:26:21.310

请参阅以下帖子以编程方式添加 Web 部件：

[http://www.etechplanet.com/post/2009/03/18/AddingRemoving-web-part-programmatically-in-SharePoint-website-using-C-Code.aspx](http://www.etechplanet.com/post/2009/03/18/AddingRemoving-web-part-programmatically-in-SharePoint-website-using-C-Code.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-23T13:28:39.493

要以编程方式修改 Web 部件属性值，请参阅以下帖子：

[http://www.etechplanet.com/post/2009/03/19/Modify-property-values-of-a-web-part-in-SharePoint-website-programmatically-using-C.aspx](http://www.etechplanet.com/post/2009/03/19/Modify-property-values-of-a-web-part-in-SharePoint-website-programmatically-using-C.aspx)

# sql-server - SQL Server xml.modify 删除方法

> ID：378431
> 
> 赞同：5
> 
> 时间：2008-12-18T16:38:28.593
> 
> 标签：sql-server, xml

我从节点中删除属性时遇到问题。

例子：

```
DECLARE @processID int
SET @processID = 8

DECLARE @xml XML
SET @xml = 
'<Process id="10" name="Test 1">
  <Shapes>
    <Shape id="1" name="Shape 1" subProcessID="8">
    </Shape>
    <Shape id="2" name="Shape 2" subProcessID="9">
    </Shape>
  </Shapes>
  <Lines />
</Process>'

SET @xml.modify('delete (/Process/Shapes/Shape/@subProcessID[/Process/Shapes/Shape/@subProcessID = sql:variable("@processID")])')
SELECT @xml 
```

给出结果：

```
<Process id="10" name="Test 1">
  <Shapes>
    <Shape id="1" name="Shape 1" />
    <Shape id="2" name="Shape 2" />
  </Shapes>
  <Lines />
</Process> 
```

我想要的是：

```
<Process id="10" name="Test 1">
  <Shapes>
    <Shape id="1" name="Shape 1" />
    <Shape id="2" name="Shape 2" subProcessID="9" />
  </Shapes>
  <Lines />
</Process> 
```

实现这一点的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T13:33:57.030

由于 OP 不见了，但他在评论中留下了解决方案，让我补充一下作为答案：

```
DECLARE @processID int
SET @processID = 8

DECLARE @xml XML
SET @xml = 
'<Process id="10" name="Test 1">
  <Shapes>
    <Shape id="1" name="Shape 1" subProcessID="8">
    </Shape>
    <Shape id="2" name="Shape 2" subProcessID="9">
    </Shape>
  </Shapes>
  <Lines />
</Process>'

SET @xml.modify('delete (/Process/Shapes/Shape[@subProcessID = sql:variable("@processID")]/@subProcessID)')
SELECT @xml 
```

这是[一个有效的sqlfiddle](http://sqlfiddle.com/#!3/d41d8/26925)。

# c++ - 如何从 Windows MFC 客户端使用 SSL？

> ID：378441
> 
> 赞同：2
> 
> 时间：2008-12-18T16:41:14.097
> 
> 标签：c++, windows, mfc, ssl, https

我有一个 MFC 应用程序，它当前使用 CAtlHttpClient 来查询 Web 服务器以获取一些信息。

我想更改它，以便查询安全地通过服务器身份验证，使用 SSL。

谷歌搜索显示微软已经多次改变了他们支持这一点的方式，例如 WinInet、WinHTTP，但对于我来说，我无法弄清楚如何在 MSVS 2005 下使用 MFC 来完成上述操作。

该应用程序使用 C++，如果可能的话，我想避免将 .Net 拖入图片中。

任何帮助、提示、建议或指点都将不胜感激！

谢谢，

只

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T18:50:18.907

你可以看看 Ultimate TCP/IP - 它对 MS 很友好，可能会做你想要的：

[http://www.codeproject.com/KB/MFC/UltimateTCPIP.aspx](http://www.codeproject.com/KB/MFC/UltimateTCPIP.aspx)

我使用这个工具包，它非常好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T17:51:43.750

早在 2002 年，我为 Windows Developer Magazine 写了一篇文章，展示了如何使用 OpenSSL 为 MFC 的 CAsyncSocket 提供 SSL。代码和文章在这里：[http](http://www.serverframework.com/asynchronousevents/2010/10/using-openssl-with-asynchronous-sockets.html) ://www.serverframework.com/asynchronousevents/2010/10/using-openssl-with-asynchronous-sockets.html可能对你有帮助。你也可以使用微软的 SChannel 做类似的事情，但它是涉及更多一点，因为 OpenSSL 会为您做一些缓冲，所以您需要做的就是将字节推入其中，直到您获得明文...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T21:48:05.117

找到了一些可能符合要求的 Microsoft 示例代码的指针：http: [//msdn.microsoft.com/en-us/library/s2ya483s (VS.80).aspx](http://msdn.microsoft.com/en-us/library/s2ya483s(VS.80).aspx)

然而，这在 AcquireCredentialsHandle 上失败了，这将是我对这个八月论坛的下一个问题......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-30T17:06:28.323

只需使用 WinHttp，它是一个很棒的 AP​​I，并且拥有通过 HTTP 执行 SSL 所需的一切（此外还可以与 Vista 的代理配置一起使用）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T23:44:10.000

如何使用作为**OpenSSL一部分的****libeay32.dll**和**ssleay32.dll**文件：

 **[https://code.google.com/p/openssl-for-windows/](https://code.google.com/p/openssl-for-windows/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-13T00:29:59.270

我正在使用带有 MFC 应用程序的 Visual Studio 2005，该应用程序具有访问网站以获取小文件的功能。我正在使用这些`WinINet`函数，[请参阅 Microsoft Windows Dev Center 中的 WinINet API 参考](https://msdn.microsoft.com/en-us/library/windows/desktop/aa385483(v=vs.85).aspx)，它提供了一组简单的函数，这些函数使用 URL 访问网站，该 URL 指定协议（HTTP、HTTPS、FTP 等）以下拉一个小文件。

在`libcurl`站点上查看此 Microsoft 技术说明，[文章 ID 238425 - 信息：WinInet 不支持在服务](https://support.microsoft.com/en-us/kb/238425)中使用，已标记为自 2015 年 8 月 12 日起停用。文章摘要如下：

> 从服务或 Internet 信息服务器 (IIS) 应用程序（也是服务）运行时，不支持 Microsoft Win32 Internet 函数（从 WinInet.dll 导出）。本文讨论在服务或 Internet Information Server 应用程序中使用 WinInet.dll。

我在 MFC 应用程序中使用的适用源代码有一个对话框，该对话框使用 HTTPS 类型的 URL，向其附加附加信息以构建完整的 URI，然后转到网站以提取完整的小文件：

```
int GetFile (HINTERNET hOpen, TCHAR * szURL, BYTE  szTemp[4096])   
{
    DWORD dwSize;
    TCHAR szHead[15];
    HINTERNET  hConnect;

    szHead[0] = '\0';
    szTemp[0] = 0;

    // Opens a resource specified by a complete HTTP URL.
    if ( !(hConnect = InternetOpenUrl( hOpen, szURL, szHead, 15, INTERNET_FLAG_DONT_CACHE, 0)))
    {
        DWORD  dwlasterror = GetLastError();
        if (dwlasterror == ERROR_INTERNET_NAME_NOT_RESOLVED) {
            AfxMessageBox (_T("Error: ERROR_INTERNET_NAME_NOT_RESOLVED - check LAN connectivity."));
        } else if (dwlasterror == ERROR_INTERNET_TIMEOUT) {
            AfxMessageBox (_T("Error: ERROR_INTERNET_TIMEOUT - check LAN connectivity."));
        } else if (dwlasterror == ERROR_INTERNET_SERVER_UNREACHABLE) {
            AfxMessageBox (_T("Error: ERROR_INTERNET_SERVER_UNREACHABLE - check LAN connectivity."));
        } else if (dwlasterror == ERROR_INTERNET_OPERATION_CANCELLED) {
            AfxMessageBox (_T("Error: ERROR_INTERNET_OPERATION_CANCELLED - check LAN connectivity."));
        } else {
            CString msg;
            msg.Format (_T("Error: GetLastError() returned %d."), dwlasterror);
            AfxMessageBox (msg);
        }
        return -2;
    }

    // Reads data from a handle opened by the InternetOpenUrl, FtpOpenFile, or HttpOpenRequest function.
    if (InternetReadFile (hConnect, szTemp, 4096,  &dwSize) )
    {
        if (dwSize) {
            return dwSize;
        }
        return -3;
    }
    return -4;
}

int DownloadURLImage (TCHAR * szURL, BYTE  szTemp[4096])
{
    int result = -1;
    HINTERNET hInternet;

    // Initializes an application's use of the WinINet functions.
    hInternet= InternetOpen (_T("DeviceConfig"), INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, NULL);
    if (hInternet) {
        // if open succeeded then get the file and close the handle as we be done.
        result = GetFile (hInternet, szURL, szTemp) ; 
        InternetCloseHandle(hInternet);
    }
    return result ;
} 
```

# ruby - RSpec 模拟 :each 块

> ID：378449
> 
> 赞同：8
> 
> 时间：2008-12-18T16:43:10.910
> 
> 标签：ruby, rspec, mocking, rspec-mocks

我想使用 RSpec 模拟为块提供固定输入。

红宝石：

```
class Parser
  attr_accessor :extracted

  def parse(fname)
    File.open(fname).each do |line|
      extracted = line if line =~ /^RCS file: (.*),v$/
    end
  end
end 
```

规格：

```
describe Parser
  before do
    @parser = Parser.new
    @lines = mock("lines")
    @lines.stub!(:each)
    File.stub!(:open).and_return(@lines)
  end

  it "should extract a filename into extracted" do
    linetext = [ "RCS file: hello,v\n", "bla bla bla\n" ]

    # HELP ME HERE ...
    # the :each should be fed with 'linetext'
    @lines.should_receive(:each)

    @parser.should_receive('extracted=')
    @parser.parse("somefile.txt")
  end
end 
```

这是一种通过将固定数据传递给块来测试块内部是否正常工作的方法。但我不知道如何使用 RSpec 模拟机制进行实际的馈送。

**更新：**看起来问题不在于 linetext，而在于：

```
@parser.should_receive('extracted=') 
```

这不是它的调用方式，在 ruby​​ 代码中用 self.extracted= 替换它有点帮助，但不知何故感觉不对。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-03T14:11:23.237

充实“and_yield”的工作原理：我认为“and_return”并不是你真正想要的。这将设置 File.open 块的返回值，而不是为其块产生的行。稍微改变一下这个例子，假设你有这个：

红宝石

```
def parse(fname)
  lines = []
  File.open(fname){ |line| lines << line*2 }
end 
```

规格

```
describe Parser do
  it 'should yield each line' do
    File.stub(:open).and_yield('first').and_yield('second')
    parse('nofile.txt').should eq(['firstfirst','secondsecond'])
  end
end 
```

将通过。如果您将该行替换为“and_return”，例如

```
File.stub(:open).and_return(['first','second']) 
```

它将失败，因为该块被绕过：

```
expected: ["firstfirst", "secondsecond"]
got: ["first", "second"] 
```

所以底线是使用'and_yield'来模拟'each'类型块的输入。使用“and_return”模拟这些块的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T17:40:27.970

我没有一台装有 Ruby 和 RSpec 的计算机来检查这个，但我怀疑你需要`and_yields`在`should_receive(:each)`. 但是，您可能会发现在这种情况下不使用模拟更简单，例如您可以从存根返回一个`StringIO`包含的实例。`linetext``File.open`

[1] [http://rspec.rubyforge.org/rspec/1.1.11/classes/Spec/Mocks/BaseExpectation.src/M000104.html](http://rspec.rubyforge.org/rspec/1.1.11/classes/Spec/Mocks/BaseExpectation.src/M000104.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T22:35:05.457

我会采用存根 File.open 调用的想法

```
lines = "RCS file: hello,v\n", "bla bla bla\n"
File.stub!(:open).and_return(lines) 
```

这应该足以测试循环内的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-20T17:43:51.827

这应该可以解决问题：

```
describe Parser
  before do
    @parser = Parser.new
  end

  it "should extract a filename into extracted" do
    linetext = [ "RCS file: hello,v\n", "bla bla bla\n" ]
    File.should_receive(:open).with("somefile.txt").and_return(linetext)
    @parser.parse("somefile.txt")
    @parser.extracted.should == "hello"
  end
end 
```

Parser 类中有一些错误（它不会通过测试），但这就是我编写测试的方式。

# javascript - 将图像从 jpg 转换为 swf

> ID：378456
> 
> 赞同：1
> 
> 时间：2008-12-18T16:46:03.243
> 
> 标签：javascript

是否有将静止图像（jpg）交换为电影（swf）的javascript函数？如果存在脱节的交换图像路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T17:14:22.047

你可以这样做：

```
<div id="still_image" style="display:block">
    <!-- img code here -->
</div>

<div id="ani_swf" style="display:none">
    <!-- embedded swf here -->
</div>

<input type="button" value="Swap" onclick="imgToSWF();" />

<script type="text/javascript">

function imgToSWF() {
    document.getElementById('still_image').style.display = 'none';
    document.getElementById('ani_swf').style.display = 'block';
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T20:16:10.807

您可以使用[swfobject](http://code.google.com/p/swfobject/)。当然，您并没有说太多您真正想要做什么：鼠标悬停，页面加载（并且图像只是替换）等等......

# c# - 检索字典值最佳实践

> ID：378465
> 
> 赞同：80
> 
> 时间：2008-12-18T16:48:36.343
> 
> 标签：c#, .net, dictionary

我最近才注意到`Dictionary.TryGetValue(TKey key, out TValue value)`并很好奇哪种方法是从字典中检索值的更好方法。

我传统上做过：

```
if (myDict.Contains(someKey))
     someVal = myDict[someKey];
     ... 
```

除非我知道它*必须*在那里。

这样做更好吗：

```
if (myDict.TryGetValue(somekey, out someVal)
    ... 
```

哪个是更好的做法？一个比另一个快吗？我想 Try 版本会更慢，因为它在自身内部“吞下”一个 try/catch 并将其用作逻辑，不是吗？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2008-12-18T16:53:26.240

TryGetValue 稍微快一些，因为 FindEntry 只会被调用一次。

> 快多少？这取决于手头的数据集。当您调用 Contains 方法时，Dictionary 会进行内部搜索以查找其索引。如果它返回 true，则需要另一个索引搜索来获取实际值。当您使用 TryGetValue 时，它​​只搜索一次索引，如果找到，它会将值分配给您的变量。

仅供参考：它实际上并没有发现错误。

它在呼唤：

```
public bool TryGetValue(TKey key, out TValue value)
{
    int index = this.FindEntry(key);
    if (index >= 0)
    {
        value = this.entries[index].value;
        return true;
    }
    value = default(TValue);
    return false;
} 
```

ContainsKey 是这样的：

```
public bool ContainsKey(TKey key)
{
    return (this.FindEntry(key) >= 0);
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-12-18T17:02:10.467

好吧，事实上 TryGetValue 更快。快多少？这取决于手头的数据集。当您调用 Contains 方法时，Dictionary 会进行内部搜索以查找其索引。如果它返回 true，则需要另一个索引搜索来获取实际值。当您使用 TryGetValue 时，它​​只搜索一次索引，如果找到，它会将值分配给您的变量。

**编辑：**

好的，我理解你的困惑，所以让我详细说明：

**情况1：**

```
if (myDict.Contains(someKey))
     someVal = myDict[someKey]; 
```

在这种情况下，有 2 次 FindEntry 调用，一次检查密钥是否存在，一次检索它

**案例二：**

```
myDict.TryGetValue(somekey, out someVal) 
```

在这种情况下，只有一次对 FindKey 的调用，因为结果索引保留在同一方法中以供实际检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T16:54:37.890

我想 trygetvalue 正在做的事情更像：

```
if(myDict.ReallyOptimisedVersionofContains(someKey))
{ 
  someVal = myDict[someKey];
  return true;
}
return false; 
```

所以希望不要在任何地方尝试/捕捉。

我认为这只是一种方便的方法。我通常使用它，因为它可以节省一两行代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-05T16:16:19.883

```
 public bool TryGetValue(TKey key, out TValue value)
{
  int index = this.FindEntry(key);
  if (index >= 0)
  {
    value = this.entries[index].value;
    return true;
  }
  value = default(TValue);
  return false;
}

public bool ContainsKey(TKey key)
{
  return (this.FindEntry(key) >= 0);
} 
```

如您所见， TryGetValue 与 ContainsKey + 一个数组查找相同。

如果您的逻辑只是检查字典中是否存在该键，并且没有其他与该键相关的内容（获取键的值），您应该使用 ContainsKey。

也尝试检查这个类似的问题：[is-there-a-reason-why-one-should-use-containskey-over-trygetvalue](https://stackoverflow.com/a/39885648/248916)

# linq - 将用户定义的标量函数作为属性添加到 Linq-To-Sql 类

> ID：378485
> 
> 赞同：0
> 
> 时间：2008-12-18T16:57:58.010
> 
> 标签：linq, linq-to-sql

我有以下 Linq 查询...正确执行：

```
from t in Tasks
where LookupTaskStarted(t.TaskId) == true
select new
{
     t.TaskId,
     t.Number,
     Started = LookupTaskStarted(t.TaskId)
} 
```

无论如何要创建它作为 Linq-To-Sql 类的属性？还是我总是必须像这样引用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T17:45:37.303

我没有你的问题的答案，但我有一个重构建议。`let`您可以使用子句记录值，而不是两次调用 LookupTaskStarted() ：

```
from t in Tasks
let started = LookupTaskStarted(t.TaskId)
where started
select new
{
    T.TaskId,
    t.Number,
    Started = started
} 
```

写完之后，我意识到如果您按 过滤`started`，则不需要该`Started`属性，因为它们都将为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T18:03:26.317

```
class MyTask
{
   public int TaskId {get; set;}
   public int Number {get; set;}
   public bool Started {get; set;}
   public MyTask(Task t)
   {
       TaskId = t.TaskId;
       Number = t.Number;
       Started = LookupTaskStarted(t.TaskId)
   }
}
// :
// :
from t in Tasks
where LookupTaskStarted(t.TaskId) == true
select new MyTask(t); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T17:06:15.107

所有 linq-sql 类都作为部分创建。您可以扩展并添加此属性。

# php - 如何正确处理 PHP Shell_exec 中的空格？

> ID：378490
> 
> 赞同：4
> 
> 时间：2008-12-18T17:00:20.547
> 
> 标签：php, shell-exec

我通过命令行在 win2003 服务器 PHP 526 上运行。

我有一个命令行字符串：

```
$cmd = '  "d:\Prog Files\foo.exe" -p "d:\data path\datadir"  '; 
```

尝试在 php 代码中执行此操作

```
$out = `$cmd`;       # note use of backticks AKA shell_exec 
```

导致 foo.exe 失败，因为它将 -p arg 解释为“d:\data”。

`$cdm`但是，复制到 Windows shell cmdline的相同字符串会成功执行。

如何正确处理 PHP 中的空格`shell_exec`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-12-18T17:42:22.227

使用 escapeshellarg() 来转义你的论点，它应该为你的平台使用适当的引号和转义空格组合来转义它（我猜你在 Windows 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-02-22T23:40:16.230

与要求转义引号内的引号的 Unix 不同，Windows 似乎不能以这种方式工作。它如何跟踪报价超出了我的范围，但这实际上似乎有效，尽管所有逻辑都相反：

$cmd = '" "C:\Path\To\Command" "Arg1" "Arg2" "';
$fp = popen($cmd, 'r');
$输出='';
而 ($l = fgets($fp, 1024))
$output.=$l;

我猜 command.exe 正在使用命令字符串总数并取消（否则是多余的）外部引号。如果没有这些外部引用，DOS 会做一些奇怪的事情。此解决方案类似于 user187383 的帖子，但取消了“cmd /c”，它只会混淆实际发生的情况以及轻微的性能下降，因为 cmd /c 首先是由 shell 调用隐含的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-10-07T02:38:18.167

这是一个有趣的问题。显然，PHP 允许您在程序或参数周围加上双引号，但不能同时使用这两者。可能值得将此作为错误报告。

一种解决方法是使用 DOS 8.3 名称而不是引号。例如，“C:\Program Files\”通常会变成“C:\Progra~1”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-09T19:01:08.283

也有这个问题 - 想出了一个通过 cmd.exe 路由启动的想法。这里的诀窍是不要迷失在双引号中。通常你想把任何你想运行的东西放进去：

```
exec('cmd /c " '.$path.' "'; 
```

其中 $path 已经是您的可执行文件的双引号路径。例子：

```
$path = '"C:\Program Files\ToDoList Simple\ToDoList.exe" "C:\SomePath\todo.tdl" -nt test -cm test2'; 
```

# apache-flex - Flex 组件访问其他组件

> ID：378492
> 
> 赞同：0
> 
> 时间：2008-12-18T17:00:51.607
> 
> 标签：apache-flex

例如，我有 2 个组件（使用 mx:windows 的editor.mxml），当我单击编辑按钮时，我想从另一个组件的数据字段中获取当前值？（使用 mx:window 的 datagrid.mxml）

我确实知道如何通过 parentDocument 或 Application.application 方法访问主 MXML 的数据网格，但如果我想访问上述其他方式，则会遇到困难。使代码尽可能简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T07:05:20.887

您可以进行[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)，即为组件提供对组件`A`的引用，`B`以便它们可以直接通信（更紧密耦合的示例），或者让两个组件使用事件通过公共[中介](http://en.wikipedia.org/wiki/Mediator_pattern)进行通信（更松散耦合的示例。）

这两个选项都将在您创建这些组件（在本例中）并将它们添加到显示列表的任何地方`A`实现`B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-20T22:01:00.567

这可能比它应得的要复杂得多，并且有点像 Pattern-Fever，但是您可以使用一个中介类来侦听来自按钮的 CLICK 事件，并且对其他组件有足够的了解来查询它的属性。它甚至可以使用按钮侦听的自定义事件来传输该数据。

虽然这涉及三个类而不是两个类，但事实证明，拥有两个专注于好看的组件和一个担心协调的组件通常会更容易。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T10:11:02.333

您还可以像这样向自定义组件添加一个 id，

```
<custom:Editor id="myCustomComponent">

  </Editor:AddressForm> 
```

和

像这样访问您的数据网格的值，

```
var data:ArrayCollection = myCustomComponent.DatagridID.dataProvider; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-11-11T23:07:32.583

尝试这个：

```
FlexGlobals.topLevelApplication 
```

这指向你的根。从根你可以抓住你想要的每一个元素。

# python - 在 Python 中对 BaseException 进行子类化的问题

> ID：378493
> 
> 赞同：6
> 
> 时间：2008-12-18T17:00:56.117
> 
> 标签：python, exception, inheritance

我想创建自己的 Python 异常类，如下所示：

```
class MyException(BaseException):
    def __init__(self, errno, address):
        if errno == 10048:
            mess = str(address) + ' is already in use'
        else:
            mess = 'Unable to open ' + str(address)
        BaseException.__init__(mess) 
```

但是当程序调用到时`BaseException.__init__()`，我得到了这个回溯：

```
BaseException.__init__(mess)
TypeError: descriptor '__init__' requires a 'exceptions.BaseException' object but received a 'str' 
```

我认为 BaseException 会采用任何一组参数。另外，我应该如何将“exceptions.BaseException”对象传递给 exceptions.BaseException 的构造函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T17:11:05.673

您必须使用实例作为第一个参数来调用基类的方法：

```
BaseException.__init__(self, mess) 
```

引用本[教程](http://docs.python.org/tutorial/classes.html#inheritance)：

> 派生类中的重写方法实际上可能想要扩展而不是简单地替换同名的基类方法。有一个简单的方法可以直接调用基类方法：只需调用`BaseClassName.methodname(self, arguments)`. 这有时对客户也很有用。（请注意，这只适用于直接在全局范围内定义或导入基类的情况。）

正如 Tony Arkles 和[文档](http://docs.python.org/library/exceptions.html#exceptions.Exception)中提到的，

> 所有内置的、非系统退出的异常都派生自这个类。所有用户定义的异常也应该从 [ `Exception`] 派生。

所以你不应该继承自`BaseException`，无论如何......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T17:12:40.053

跳是对的。

附带说明一下，您真的不应该继承 BaseException，而应该继承 Exception。（除非你真的很清楚自己在做什么）

# .net - 我可以反射 .NET 基类库 (BCL) 吗？

> ID：378498
> 
> 赞同：3
> 
> 时间：2008-12-18T17:03:29.933
> 
> 标签：.net

[BCL](http://msdn.microsoft.com/en-us/netframework/aa569603.aspx)

具体来说，我这样做是否违反了 EULA？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-18T17:08:30.920

为什么要麻烦使用反射器？[只看原始源代码](http://weblogs.asp.net/scottgu/archive/2008/01/16/net-framework-library-source-code-now-available.aspx)！

经过更多研究，我发现 .NET Framework 与安装它的操作系统属于同一 EULA，还有几个附加条款，您可以通过运行以下命令并为您的语言选择正确的一个来找到它们（ 1033 是英文）。

```
where /R "%WINDIR%\Microsoft.NET" eula*.* 
```

因此，由于 Microsoft 操作系统 EULA 明确声明不允许“反编译或反汇编”，并且在 Reflector 中查看代码可能被视为属于此范围，因此从技术上看，查看 .NET Framework 源代码似乎是不合法的通过反射器。即使您可以查看原始代码……这是一个有趣的悖论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T17:59:26.793

> 为什么要麻烦使用反射器？只看原始源代码！

不过，您应该提到查看源代码的注意事项。正如 Frans Bouma 所写：[不要查看在“参考许可证”下获得许可的 .NET 的源代码](http://weblogs.asp.net/fbouma/archive/2007/10/04/don-t-look-at-the-sourcecode-of-net-licensed-under-the-reference-license.aspx)。他列举了几个风险，所有这些风险都与隐含的非自由知识的获取有关，这可能在编写自己的软件时造成问题。最严重的法律风险可能与非自愿专利侵权有关。此外，在查看了类似的源代码之后，您被明确**禁止**为某些其他项目做出贡献，例如[ReactOS （可能还有 Mono）。](http://www.reactos.org/en/dev_legalreview.html)这可能在未来还包括 .NET 源代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T17:06:18.820

是的，绝对可以。您还可以[设置 VS2008 来调试 BCL](http://weblogs.asp.net/scottgu/archive/2008/01/16/net-framework-library-source-code-now-available.aspx)。考虑到微软提供了 ildasm 之类的工具可以让您查看 IL 代码，我无法想象这是一个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-18T17:45:55.807

更大的问题是……法律文件能否阻止您查看存储在您拥有的磁盘上的一系列字节，并为它们分配意义？任何法院都会认为这样的文件具有强制执行力是值得怀疑的。

（这与事后分发该信息的问题有些不同）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T17:09:26.817

问题是您为什么不使用[http://referencesource.microsoft.com/](http://referencesource.microsoft.com/)代替；如果您对他们的许可协议感到满意，那么以这种方式访问​​ BCL 源代码会容易得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T18:40:26.447

根据您对许可证和 IP 法的鲁莽/知识程度，您可能认为无论 .NET Framework EULA 如何都可以使用 Reflector，因为您可能认为禁止逆向工程是无法执行的（这是我的信念，但该怎么做我知道？）。

以下是参考源代码中心 (RSCC) 博客对 Reflector 的评价：

> [RSCC 和 .NET Reflector 的区别](http://blogs.msdn.com/rscc/archive/2008/09/05/the-difference-between-rscc-and-net-reflector.aspx)
> 
> .NET Reflector 使您能够轻松地查看、导航和搜索 .NET 程序集的类层次结构，即使您没有它们的代码。有了它，您可以反编译和分析 C#、Visual Basic 和 IL 中的 .NET 程序集。
> 
> 参考源代码中心及其在 Visual Studio 2008 中的集成为在 Microsoft 平台之上构建应用程序的开发人员提供了丰富的调试方案。有了它，您可以快速轻松地访问 Microsoft 的平台源代码。
> 
> RSCC 和 .NET Reflector 之间最重要的区别是什么？
> 
> *   RSCC 只能显示我们目前支持的 .NET Framework 的源代码，.NET Reflector 可以让您看到任何 .NET 程序集的反射代码
>     
>     
> *   RSCC 使您能够从 Visual Studio 内部调试和单步执行源代码
>     
>     
> *   这两种工具都可以让您查看 C# 中的 .NET Framework 源代码，但作为开发人员，您获得的信息有所不同：[省略示例]

您可能不想使用 RSCC 源的一个原因是，如果您“为非 Windows 操作系统设计、开发或测试具有相同或基本相同的与软件相同的特性或功能。”

因此，如果您参与了 Mono，您将不想使用 RSCC。根据您的谨慎/偏执程度，即使您只是 Mono 的用户，这也可能适用，因为这可能包含在“测试”中。但是，我认为 Mono 开发人员也可能会小心，甚至不要使用 Reflector 之类的东西（老实说，我不知道他们的政策是什么）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-11-28T12:32:27.713

正如格雷格已经指出的那样，

> [OS EULA 明确声明] 不允许“反编译或反汇编”。

另一方面，[微软自己的*MSDN 杂志*](http://msdn.microsoft.com/en-us/magazine/cc300497.aspx#S8)写道：

> [...] 我认为 .NET Reflector 的最佳用途是检查 .NET Framework 程序集和方法。[...] 通过使用 .NET Reflector，您可以看到 Microsoft 在编写 DataSet 的 ReadXml 方法时使用了什么，或者他们在从配置文件中读取数据时做了什么。.NET Reflector 也是查看创建对象（如 HttpHandler 或配置处理程序）的最佳实践的绝佳方式，因为您可以了解 Microsoft 的团队实际上是如何在框架中构建这些对象的。

我不是律师，但我想当他们*建议*你打破 EULA 时，执行 EULA 会很困难......

# c++ - boost.asio 和文件 i/o 有什么关系？

> ID：378515
> 
> 赞同：50
> 
> 时间：2008-12-18T17:11:30.713
> 
> 标签：c++, boost, file-io, boost-asio

我注意到 boost.asio 有很多涉及套接字、串行端口和各种非文件示例的示例。谷歌并没有真正为我提供很多关于 asio 是否是执行异步文件 i/o 的好方法或有效方法的信息。

我有大量数据要异步写入磁盘。这可以通过 Windows（我的平台）中的本机重叠 io 来完成，但我更希望有一个独立于平台的解决方案。

我很好奇如果

1.  boost.asio 有任何类型的文件支持
2.  boost.asio 文件支持对于日常文件 i/o 来说已经足够成熟了
3.  是否会添加文件支持？对此有何展望？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-18T17:31:11.967

## boost.asio 有任何类型的文件支持吗？

从（我认为）Boost 1.36（包含 Asio 1.2.0）开始，您可以使用 [boost::asio::]windows::stream_handle 或 windows::random_access_handle 来包装 HANDLE 并对其执行异步读写方法在内部使用 OVERLAPPED 结构。

用户 Lazin 还提到 boost::asio::windows::random_access_handle 可用于异步操作（例如命名管道，也包括文件）。

## boost.asio 文件支持对于日常文件 i/o 是否足够成熟？

由于 Boost.Asio 本身现在被广泛使用，并且实现在内部使用重叠 IO，我会说是的。

## 是否会添加文件支持？对此有何展望？

[由于在Asio](http://asio.sourceforge.net/)网站上没有找到路线图，我想说 Boost.Asio 不会为此功能添加新的内容。尽管贡献者总是有机会向 Boost.Asio 添加代码和类。也许您甚至可以自己贡献缺失的部分！:-)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-09T16:27:31.673

**Linux 上的 boost::asio 文件 i/o**

在 Linux 上，asio 使用该[`epoll`](http://linux.die.net/man/4/epoll)机制来检测套接字/文件描述符是否准备好进行读/写。如果您尝试在 Linux 上的常规文件上使用 vanilla asio，您将收到“不允许操作”异常，因为[epoll 不支持 Linux 上的常规文件](https://bugzilla.kernel.org/show_bug.cgi?id=15272)。

解决方法是配置 asio 以[`select`](http://linux.die.net/man/2/select)在 Linux 上使用该机制。您可以通过定义`BOOST_ASIO_DISABLE_EPOLL`. 如果您使用大量打开的套接字，这里的权衡[往往比 epoll 慢。](https://stackoverflow.com/questions/17355593/why-is-epoll-faster-than-select)定期使用打开文件`open()`，然后将文件描述符传递给[`boost::asio::posix::stream_descriptor`](http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/posix__stream_descriptor.html).

**Windows 上的 boost::asio 文件 i/o**

在 Windows 上，您可以使用从文件操作创建的[`boost::asio::windows::object_handle`](http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/windows__basic_object_handle.html)包装。`Handle`见[例子](http://theboostcpplibraries.com/boost.asio-platform-specific-io-objects)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T19:18:57.537

boost::asio::windows::random_access_handle 是最简单的方法，如果你需要一些高级的东西，例如异步 LockFileEx 或其他东西，你可以扩展 asio，添加你自己的异步事件。[例子](http://sourceforge.net/mailarchive/forum.php?thread_name=49222BF7.2080202%40synchromesh.com&forum_name=asio-users "asio 用户邮件列表")

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-02-20T14:48:22.573

ASIO 在支持良好的 Windows 上支持重叠 I/O。在 Unix 上，这个想法停滞不前，原因是：

*   文件通常位于同一物理设备上，最好按顺序访问它们。
*   文件请求通常会很快完成，因为它们在物理上就在附近。
*   文件通常对于完成程序的基本操作至关重要（例如，必须在进一步初始化之前读取其配置文件）

一个常见的例外是将文件直接提供给套接字。这是一种常见的特殊情况，Linux 有一个**内核函数**可以为您处理这个问题。再次否定使用异步文件 I/O 的原因。

简而言之：ASIO 似乎反映了底层 OS 设计理念，大多数 Unix 开发人员忽略了重叠 I/O，因此该平台不支持它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-10T03:48:51.113

io_uring 改变了一切。
asio 现在支持异步文件读/写。
请参阅发行说明：
[asio 1.21.0 发行说明](https://think-async.com/Asio/asio-1.21.0/doc/asio/history.html#asio.history.asio_1_21_0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-04T15:21:02.357

Linux 有一个 asio 库，在这项工作中使用起来并不比 Windows API 难（我已经使用过它）。两组操作系统都实现了相同的概念架构。它们在与编写一个好的库相关的细节上有所不同，但并不是说你不能为两个操作系统平台提供一个通用接口（我已经使用过一个）。

基本上，所有类型的异步文件 I/O 都遵循“Fry Cook”架构。这就是我在读取操作上下文中的意思：我（处理线程）走到快餐柜台（OS）并要求一个芝士汉堡（一些数据）。它给了我一份订单票（一些数据结构）的副本，并在后面向厨师（内核和文件系统）发出一张票来烹饪我的汉堡。然后我坐下来或看手机（做其他工作）。后来，有人宣布我的汉堡准备好了（给处理线程的信号），我收集了我的食物（读取缓冲区）。

# c# - 如何创建正则表达式以确保单词仅由给定的单个字母和字母组组成？

> ID：378524
> 
> 赞同：2
> 
> 时间：2008-12-18T17:14:59.597
> 
> 标签：c#, regex

我正在尝试在 C# 中创建一个可用的正则表达式，它允许我获取单个字母和/或字母组的列表，并确保一个单词仅由该列表中的项目组成。例如：

*   'a' 将匹配 'a'、'aa'、'aaa'，但不匹配 'ab'
*   'a b' 将匹配 'a'、'ab'、'abba'、'b'，但不匹配 'abc'
*   'ab abc' 将匹配 'a'、'ab'、'abc'、'aabc'、'baabc'，但不匹配 'ababac'

我想到了一些形式

```
(a|b|abc)* 
```

会起作用，但它与最后一个词不匹配。这是我正在测试的代码：

```
[Fact]
public void TestRegex()
{
    Regex regex = new Regex("(a|b|abc)*");
    regex.IsMatch("a").ShouldBeTrue();
    regex.IsMatch("b").ShouldBeTrue();
    regex.IsMatch("abc").ShouldBeTrue();
    regex.IsMatch("aabc").ShouldBeTrue();
    regex.IsMatch("baabc").ShouldBeTrue();

    // This should not match ... I don't think anyway
    regex.IsMatch("ababac").ShouldBeFalse();
} 
```

我对正则表达式有一个非常基本的了解，所以如果我在这里遗漏了一些明显的东西，我深表歉意:)

**更新** *我不明白为什么你的反例是一个反例：ababac = aba bac. c你能澄清一下吗？*

我只想使用“a”、“b”和“abc”——“bac”将是一个完全不同的术语。

让我再举一个例子：使用“ba”和“t”，我可以匹配单词“bat”，但不能匹配“tab”。字母组中字母的顺序很重要。

（使用 Diadistis 溶液进行测试）

```
 [Fact]
    public void TestRegex()
    {
        Regex regex = new Regex(@"\A(?:(e|l|ho)*)\Z");
        regex.IsMatch("e").ShouldBeTrue();
        regex.IsMatch("l").ShouldBeTrue();
        regex.IsMatch("ho").ShouldBeTrue();
        regex.IsMatch("elho").ShouldBeTrue();
        regex.IsMatch("hole").ShouldBeTrue();
        regex.IsMatch("holle").ShouldBeTrue();
        regex.IsMatch("hello").ShouldBeFalse();
        regex.IsMatch("hotel").ShouldBeFalse();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T17:32:27.050

我不太确定您要做什么，但是为了使最后一个错误，您应该检查字符串是否可以完全匹配：

```
Regex regex = new Regex(@"\A(?:(a|b|abc)*)\Z"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T17:56:08.533

尝试用 和 括起您的正则表达式，`^`以`$`确保完全考虑整行：

```
^(a|b|abc)*$ 
```

# c# - 从 c# .net 导出到 Excel

> ID：378528
> 
> 赞同：-1
> 
> 时间：2008-12-18T17:15:48.300
> 
> 标签：c#, excel, export

从 c#.net 导出我遇到了一个问题我有一个表单，当我导出到 excel 作为 excel 的结果任何想法为什么会发生这种情况我包括下面的 ASP 代码。

```
<%@ Page Language="C#" MasterPageFile="~/masterpages/Admin.master" AutoEventWireup="true" CodeFile="members-search-adv.aspx.cs" Inherits="masteradmin_members_search_adv" Title="LISA - Life Insurance Settlement" %>
<%@ Register TagPrefix="UC" TagName="Paging" Src="~/controls/Paging.ascx" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

    <script type="text/javascript" src="sorttable.js"></script>
 Go to <a href="members-search.aspx" class="link">Quick Search</a>
<h1>Contact Database - Advanced Search</h1>
<asp:Label ID="lblSearchCriteria" runat="server" Text=""  ForeColor="blue"></asp:Label>
<table width="100%" cellspacing="0" cellpadding="0">
    <tr>
        <td valign="top" width="50%">
<table border="0" cellpadding="3" cellspacing="1" style="height: 214px; width: 101%;">  
    <tr>
        <td class="form1" align="right"><strong>OpenSearch:</strong></td>
        <td class="form2">
            <asp:TextBox ID="txtSearch" runat="server" CssClass="fields" Width="245px" ></asp:TextBox><b>*</b>&nbsp;<br><b>*</b><small>Search By Company Name, First Name, Last Name, Tags, Comments</small></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Industry Segment:</strong></td>
        <td class="form2"><asp:DropDownList ID="ddlIndSegment" runat="server" CssClass="fields" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Member Type:</strong></td>
        <td class="form2"><asp:DropDownList ID="ddlMemberType" runat="server" CssClass="fields" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Member Rep only:</strong></td>
        <td class="form2"><asp:CheckBox ID="cbxMemberRep" runat="server" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Board Only:</strong></td>
        <td class="form2"><asp:CheckBox ID="cbxBoardOnly" runat="server" /></td>
    </tr>
    <tr>
        <td colspan="2" align="right">
            <asp:ImageButton ID="btnSearch" runat="server" ImageUrl="/RadControls/images/bu_search.jpg" />
        </td>
    </tr>
    </table>
    </td>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
    <td valign="top" width="50%">
    <%--split the table here--%>
        <table border="0" cellpadding="3" cellspacing="1" 
            style="width: 98%; margin-left: 0px;">
    <tr>
        <td class="form1" align="right"><strong>Suspended Only:</strong></td>
        <td class="form2"><asp:CheckBox ID="cbxSuspended" runat="server" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Active Only:</strong></td>
        <td class="form2"><asp:CheckBox ID="cbxActiveOnly" runat="server" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>Allow Other Members To See My Info Only:</strong></td>
        <td class="form2"><asp:CheckBox ID="cbxAllowOtherMembers" runat="server" /></td>
    </tr>
    <tr>
        <td class="form1" align="right"><strong>State:</strong></td>
        <td class="form2"><asp:DropDownList ID="ddlState" runat="server" CssClass="fields" /></td>
    </tr>
        <tr>
        <td class="form1" align="right"><strong>By Special Level:</strong></td>
        <td class="form2"><asp:DropDownList ID="ddlSpecialLevel" runat="server" CssClass="fields" /></td>
    </tr>

    <tr>
        <td class="form1" align="right"><strong>Sort by:</strong></td>
        <td class="form2">
            <asp:DropDownList ID="ddlSortBy" runat="server" CssClass="fields">
                <asp:ListItem Value="CompanyName">Company</asp:ListItem>    
                <asp:ListItem Value="FirstName">First Name</asp:ListItem>
                <asp:ListItem Value="LastName">Last Name</asp:ListItem>
                <asp:ListItem Value="MemberCategoryId">Membership Type</asp:ListItem>
                <asp:ListItem Value="IndustrySegmentId">Industry Segment</asp:ListItem>
            </asp:DropDownList>
        </td>
    </tr>

</table>    
</td>
</tr>
</table>
    <table  border="0" cellpadding="3" cellspacing="1" width="100%">        
<tr>
<td><asp:Literal ID="litTotalCount" runat="server" /></td><td align=left class="form3">
    <asp:Button ID="Button1" runat="server"  onclick="Button1_Click" Text="Button" />
    <asp:LinkButton ID="LinkButton1" runat="server" onclick="LinkButton1_Click">Export To Excel</asp:LinkButton>
    <small>* Click on the column to SORT</small></td></tr>
</table>

    <asp:Repeater ID="rptList" runat="server">
        <HeaderTemplate>
        <table class="sortable" border="0" cellpadding="3" cellspacing="1" width="100%">        
            <tr>
                <td align="left" valign="top" class="form1"><b>Company</b></td>
                <td align="left" valign="top" class="form1"><b>First Name</b></td>
                <td align="left" valign="top" class="form1"><b>Last Name</b></td>
                <td align="left" valign="top" class="form1"><b>Email</b></td>
            </tr>
        </HeaderTemplate>
        <ItemTemplate>
            <tr>
                <td class="form2" align="left" valign="top"><asp:HyperLink ID="hlCompany" runat="server" CssClass="link"></asp:HyperLink></td>
                <td class="form2" align="left" valign="top"><asp:HyperLink ID="hlFirstName" runat="server" CssClass="link"></asp:HyperLink></td>
                <td class="form2" align="left" valign="top"><asp:HyperLink ID="hlLastName" runat="server" CssClass="link"></asp:HyperLink></td>
                <td class="form2" align="left" valign="top"><asp:HyperLink ID="hlEmail" runat="server" CssClass="link"></asp:HyperLink> </td>
            </tr>
        </ItemTemplate>
        <FooterTemplate>
        </table>
        </FooterTemplate>
    </asp:Repeater>

    <asp:GridView ID="GridView2" runat="server">
    </asp:GridView>

    <asp:PlaceHolder ID="PlaceHolder1" runat="server"><br />
    <UC:Paging Id="ctlPaging" runat="server" />
    </asp:PlaceHolder>
<%--    <div align="center">
        <br /><UC:Paging Id="ctlPaging" runat="server" />
    </div>--%>

</asp:Content> 
```

* * *

抱歉，但这是对从 c#.net 导出问题的更好解释我遇到了一个问题我有一个表单，当我导出到 excel 时，我得到以下`<div></div>`数据我在数据网格中有数据，但在 excel 中没有我刚刚得到`<div></div>`

* * *

这是我正在使用的功能

```
void ExportToExcel3()
 {
     Response.Clear();
     Response.AddHeader("content-disposition", "attachment;filename=FileName.xls");
     Response.Charset = "";
     Response.ContentType = "application/vnd.xls";
     System.IO.StringWriter stringWrite = new System.IO.StringWriter();
     System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
     GridView2.RenderControl(htmlWrite);
     Response.Write(stringWrite.ToString());
     Response.End();
 }

public override void VerifyRenderingInServerForm(Control control)
 {

 } 
```

* * *

我在导出之前填充数据网格。这是代码行。有趣的是，我只使用这部分代码创建了一个新的网络表单，并且导出工作正常。您是否认为我在导致冲突的页面中的数据中继器存在问题。

```
MemberList list = MemberDB.GetMembers(sql, m_page, m_RecordPerPage, out count, _state);
          this.GridView2.DataSource = list;
          this.GridView2.DataBind(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T17:57:09.183

这根本不是顺序——这不是 asp.net 和 web 的工作方式。

您不会在加载阶段填充网格：您检索数据并将其设置为表的数据源，但网格（实际上是转发器）尚未填充。直到数据绑定阶段才会发生这种情况。在数据绑定阶段（在渲染阶段）之后，带有数据绑定转发器的页面最终由服务器发送到浏览器。至此，*所有服务器端的东西都被处理掉了。*

现在，浏览器终于​​可以显示带有用户可以单击的“导出到 Excel”大按钮的页面了。再说一遍：服务器已经在破坏你辛辛苦苦构建的所有数据。当用户单击您的按钮时，会创建一个全新的请求，并将一个全新的页面发送回浏览器。您必须再次将所有数据加载到网格中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-12-18T20:15:04.180

我找到了解决我的问题的方法。感谢大家的贡献。在 Load_Page 事件中，我在 if !postback 中有绑定。

# .net - 找不到配置绑定扩展

> ID：378530
> 
> 赞同：3
> 
> 时间：2008-12-18T17:16:40.843
> 
> 标签：.net, wcf, rest

我创建了一个使用 WCF 服务库模板的简单 wcf 服务。使用默认soap绑定时一切正常，但是当我尝试修改服务以添加REST绑定时，它失败并出现以下错误：

“找不到配置绑定扩展 'system.serviceModel/bindings/webHttpBinding'。验证此绑定扩展已在 system.serviceModel/extensions/bindingExtensions 中正确注册，并且拼写正确。”

我想我在这里遗漏了一些非常基本的步骤。谁能帮我吗？

我的配置文件中的相关代码片段如下：

```
<service name="WebService.Service1">
  <endpoint address="" binding="webHttpBinding" contract="WebService.IService1" behaviorConfiguration="RestBehavior" />
</service>

<endpointBehaviors>
  <behavior name="RestBehavior">
    <webHttp />
  </behavior>
</endpointBehaviors> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T18:21:29.480

我为 .NET 3.5 安装了 Service Pack 1，它似乎解决了这个问题。

# .net - 装配问题/难题中的只读与属性

> ID：378534
> 
> 赞同：3
> 
> 时间：2008-12-18T17:18:46.923
> 
> 标签：.net, assemblies, properties, internal

如何在程序集 (DLL) 之外为使用 DLL 的人创建一个“只读”属性，但仍然能够从程序集中填充该属性以供他们阅读？

例如，如果我有一个**Transaction对象，当****Transaction**对象发生某些事情时，它需要填充**Document**对象（这是**Transaction**类的子类）中的属性，但我只想开发人员使用我的 DLL能够读取该属性而不更改它（它只能从 DLL 本身中更改）。

 *** * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T17:21:35.420

C＃

```
public object MyProp {
   get { return val; }
   internal set { val = value; }
} 
```

VB

```
Public Property MyProp As Object
   Get
      Return StoredVal
   End Get
   Friend Set(ByVal value As Object) 
      StoredVal = value
   End Set
End Property 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T17:21:00.787

如果您使用的是 C#，您可以在 and 上有不同的访问修饰符`get`，`set`例如以下内容应该可以实现您想要的：

```
public int MyProp { get; internal set; } 
```

VB.NET 也有这个能力：[http ://weblogs.asp.net/pwilson/archive/2003/10/28/34333.aspx](http://weblogs.asp.net/pwilson/archive/2003/10/28/34333.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-12-18T17:23:18.940

C＃

```
public bool MyProp {get; internal set;} //Uses "Automatic Property" sytax 
```

VB

```
private _MyProp as Boolean
Public Property MyProp as Boolean
   Get
      Return True
   End Get
   Friend Set(ByVal value as Boolean)
      _MyProp = value
   End Set
End Property 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T17:21:22.940

什么语言？在 VB 中，您将 setter 标记为 Friend，在 C# 中，您使用内部。

# java - 纹理顶点缓冲区对象

> ID：378536
> 
> 赞同：2
> 
> 时间：2008-12-18T17:19:40.680
> 
> 标签：java, opengl, vbo, lwjgl, vertex-buffer

我想做的是用OpenGL绘制一个（大）地形。所以我有一组顶点，比如说 256 x 256，我存储在 VRAM 中的顶点缓冲区对象中。我正确地对它们进行了三角测量，所以我有一个用于面部的索引缓冲区。

```
// vertexes
glBindBufferARB(GL_ARRAY_BUFFER_ARB, vertexBufferId);
glVertexPointer(3, GL_FLOAT, 0, 0);
// textures
glBindBufferARB(GL_ARRAY_BUFFER_ARB, texCoordBufferId);
glTexCoordPointer(2, GL_FLOAT, 0, 0);
// indexes
glBindBufferARB(GL_ELEMENT_ARRAY_BUFFER_ARB, indexBufferId);
// draw it
glDrawRangeElements(GL11.TRIANGLES, 0, size - 1, size, GL_UNSIGNED_INT, 0); 
```

我还加载了一个方形纹理，它必须应用于每个三角形。所以我对纹理坐标有疑问：

每个顶点包含在 4 个三角形中，这意味着它需要 4 个纹理坐标。但是 glDrawRangeElements() 需要与顶点一样多的纹理坐标。

所以我不知道如何用 VBO 做到这一点。也许有更好的概念来解决我的问题，或者我只是缺乏一个好主意。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T22:18:01.373

如果您的纹理应该在每个四边形中重复（或镜像）自身，最好的方法是使用与数组中 (x, y) 位置数匹配的纹理坐标。例如，第一行顶点使用这些纹理坐标：(0.0, 0.0), (1.0, 0.0), (2.0, 0.0)...(255.0, 0.0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-29T16:46:00.253

由于您可能希望纹理无缝平铺，因此您只需为每个顶点计算正确的纹理坐标并像顶点一样传递它们。

# .net - WinForms MonthCalendar 控件中比 MinDate 更早的日期变灰

> ID：378542
> 
> 赞同：0
> 
> 时间：2008-12-18T17:20:35.750
> 
> 标签：.net, winforms, infragistics, monthcalendar

我正在使用`MonthCalendar`Windows 窗体应用程序中的控件。我想将比控件的 MinDate 更早的日期变灰（或者为用户提供一些关于哪些日期对选择无效的视觉线索）。该控件没有获得我期望的行为的属性。我已经尝试过`UltraDateTimeEditor`Infragistics 但它有同样的问题（没有属性可以为 MinDate 之前的日期设置颜色/样式）。

我怎样才能得到我想要的东西，而不必编写我自己的日历控件或做太多低级（即自定义绘图）的东西？理想情况下，该解决方案应该在 .Net 框架 2.0 上运行，但如果它需要 3.5，那也没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T04:28:59.580

MonthControl 似乎已经完成了您正在寻找的工作。设置 minDate 属性会从日历中删除无效的天数/年数，因此无法选择它们。适用于 .NET 2.0 和 3.5。

请记住，我使用的是 Windows Server 2008，因此 .NET 控件的视觉样式可能与您系统上的不同。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-24T05:27:11.797

如果不创建自己的控件或自定义绘图，则无法完成。

# apache-flex - 在 Flash 中预加载多个视频？在 Flex 中？

> ID：378547
> 
> 赞同：3
> 
> 时间：2008-12-18T17:21:35.933
> 
> 标签：apache-flex, flash, video, latency, preloader

我正在做一个项目，我们背靠背播放多个视频，如果我们通过提供流 url 以正常方式加载它们，每次开始下一个视频时都会有加载延迟。

我浏览了 Adob​​e 的 Flash 和 Flex 文档，但找不到预加载视频的方法。在此应用程序中嵌入它们是不可行的。理想情况下，我们会预先加载它们，同时显示进度条或其他短视频，并且只有在所有视频加载完毕后才开始播放视频。

我不习惯向其他人询问有关编程的问题，我是 RTFM，但我发现缺少 Adob​​e 文档，而且谷歌搜索 flash/flex 问题很困难。有很多东西要筛选，我找不到相关的技术/解决方案。

至于 Flex/Flash，我对其中一个或两者的解决方案都感兴趣。也许它是一样的，因为它是actionscript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-19T06:55:49.863

您可以尝试查看该[`bulk-loader`](https://github.com/arthur-debert/BulkLoader)项目，看看它是否对此有用。

摘自首页：

> *“BulkLoader 是一个用 Actionscript 3 (AS3) 编写的最小库，旨在使加载和管理复杂的加载要求更容易和更快。BulkLoader 采用更动态、更少架构重的方法 [原文如此]。很少导入并大量使用 AS3 的动态功能，BulkLoader 有一种不会妨碍您的单线感觉。”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-19T07:20:12.403

这应该非常简单。对于直接闪光，请使用 fl.video。**VideoPlayer**或 fl.video。**FLV 播放**。创建多个播放器，每个视频一个，在每个播放器上调用 load() 并使用源视频的 url。然后侦听 VideoProgressEvent.PROGRESS 事件以了解视频何时加载。最后，您可以将视频连续附加到可视组件并调用 play() 来播放它们。

示例代码（未测试）：

```
var video1:VideoPlayer = new VideoPlayer();
video1.load("http://example.com/video1.flv");
video.addEventListener(VideoProgressEvent.PROGRESS,
                       function(e:VideoProgressEvent):void
                       {
                         if (e.bytesLoaded == e.bytesTotal)
                         {
                           trace("video1 loaded.");
                           parent.addChild(video1);
                           video1.play();
                         }
                       }
var video2:VideoPlayer = new VideoPlayer();
video2.load("http://example.com/video1.flv");
video.addEventListener(VideoProgressEvent.PROGRESS,
                       function(e:VideoProgressEvent):void
                       {
                         if (e.bytesLoaded == e.bytesTotal)
                         {
                           trace("video2 loaded.");
                         }
                       } 
```

# sql - 需要有关 SQL 中复杂 Join 语句的帮助

> ID：378548
> 
> 赞同：3
> 
> 时间：2008-12-18T17:22:18.087
> 
> 标签：sql, greatest-n-per-group

如何在具有稀疏日期数的表和具有详尽日期数的另一个表之间连接，以使稀疏日期之间的间隔采用前一个稀疏日期的值？

说明性示例：

```
PRICE table (sparse dates):
date        itemid  price
2008-12-04  1       $1
2008-12-11  1       $3
2008-12-15  1       $7

VOLUME table (exhaustive dates):
date         itemid  volume_amt
2008-12-04   1       12345
2008-12-05   1       23456
2008-12-08   1       34567
2008-12-09   1       ...
2008-12-10   1
2008-12-11   1
2008-12-12   1
2008-12-15   1
2008-12-16   1
2008-12-17   1
2008-12-18   1 
```

期望的结果：

```
date       price  volume_amt
2008-12-04 $1     12345
2008-12-05 $1     23456
2008-12-08 $1     34567
2008-12-09 $1     ...
2008-12-10 $1
2008-12-11 $3
2008-12-12 $3
2008-12-15 $7
2008-12-16 $7
2008-12-17 $7
2008-12-18 $7 
```

更新：

几个人建议了一个相关的子查询来完成所需的结果。（相关子查询 = 包含对外部查询的引用的子查询。）

这将起作用；但是，我应该注意到我使用的平台是 MySQL，其相关子查询的优化很差。有什么方法可以在不使用相关子查询的情况下做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T17:48:54.130

这不像稀疏表的单个 LEFT OUTER JOIN 那样简单，因为您希望外部连接留下的 NULL 用最新的价格填充。

```
EXPLAIN SELECT v.`date`, v.volume_amt, p1.item_id, p1.price
FROM Volume v JOIN Price p1
  ON (v.`date` >= p1.`date` AND v.item_id = p1.item_id)
LEFT OUTER JOIN Price p2
  ON (v.`date` >= p2.`date` AND v.item_id = p2.item_id
    AND p1.`date` < p2.`date`)
WHERE p2.item_id IS NULL; 
```

此查询将 Volume 与 Price 中较早的所有行匹配，然后使用另一个连接来确保我们只找到最近的价格。

我在 MySQL 5.0.51 上对此进行了测试。它既不使用相关子查询也不使用分组依据。

**编辑：**更新查询以匹配 item_id 以及日期。这似乎也有效。我创建了一个索引`(date)`和一个索引，`(date, item_id)`EXPLAIN 计划是相同的。在这种情况下，索引`(item_id, date)`可能会更好。这是 EXPLAIN 的输出：

```
+----+-------------+-------+------+---------------+---------+---------+-----------------+------+--------------------------------------+
| id | select_type | table | type | possible_keys | key     | key_len | ref             | rows | Extra                                |
+----+-------------+-------+------+---------------+---------+---------+-----------------+------+--------------------------------------+
|  1 | SIMPLE      | p1    | ALL  | item_id       | NULL    | NULL    | NULL            |    6 |                                      | 
|  1 | SIMPLE      | v     | ref  | item_id       | item_id | 22      | test.p1.item_id |    3 | Using where                          | 
|  1 | SIMPLE      | p2    | ref  | item_id       | item_id | 22      | test.v.item_id  |    1 | Using where; Using index; Not exists | 
+----+-------------+-------+------+---------------+---------+---------+-----------------+------+--------------------------------------+ 
```

但是我有一个非常小的数据集，优化可能依赖于更大的数据集。您应该进行实验，使用更大的数据集分析优化。

**编辑：**我之前粘贴了错误的 EXPLAIN 输出。上面的一个被更正了，并且显示出更好的使用`(item_id, date)`索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T17:34:03.897

假设每个日期/项目只有 1 个价格：

```
select v.date, v.itemid, p.price
from volume v
join price p on p.itemid = v.item_id
where p.date = (select max(p2.date) from price p2
                where p2.itemid = v.itemid
                and p2.date <= v.date); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T17:29:34.107

```
SELECT v.date, p.price, v.volume
FROM volume v
LEFT JOIN Price p ON p.itemID=v.itemID
    AND p.[date] = (
                    SELECT MAX([date] )
                    FROM price p2 
                    WHERE p2.[date] <= v.[date] AND p2.itemid= v.itemid
                    GROUP BY p2.[date]
                   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T17:32:07.830

```
 SELECT  Volume.date, volume.itemid, price.price, volume.volume_amt
 FROM Volume 
 LEFT OUTER JOIN Price
 ON Volume.date = Price.date 
```

大概。我的 SQL-fu 很弱

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T17:34:25.283

此方法适用于 Oracle。不了解其他数据库，您也没有指定。如果这种确切的语法在您的数据库中不起作用，我猜想有类似的技术。

```
dev> select * from price;

AS_OF               ID     AMOUNT
----------- ---------- ----------
04-Dec-2008          1          1
11-Dec-2008          1          2
15-Dec-2008          1          3

dev> select * from volume;

DAY                 ID     VOLUME
----------- ---------- ----------
05-Dec-2008          1          1
06-Dec-2008          1          2
07-Dec-2008          1          3
08-Dec-2008          1          4
09-Dec-2008          1          5
10-Dec-2008          1          6
11-Dec-2008          1          7
12-Dec-2008          1          8
13-Dec-2008          1          9
14-Dec-2008          1         10
15-Dec-2008          1         11
16-Dec-2008          1         12
17-Dec-2008          1         13
18-Dec-2008          1         14
19-Dec-2008          1         15
20-Dec-2008          1         16
21-Dec-2008          1         17
22-Dec-2008          1         18
23-Dec-2008          1         19

dev> select day, volume, amount from (
  2    select day, volume, (select max(as_of) from price p where p.id = v.id and as_of <= day) price_as_of
  3      from volume v
  4  )
  5  join price on as_of = price_as_of
  6  order by day;

DAY             VOLUME     AMOUNT
----------- ---------- ----------
05-Dec-2008          1          1
06-Dec-2008          2          1
07-Dec-2008          3          1
08-Dec-2008          4          1
09-Dec-2008          5          1
10-Dec-2008          6          1
11-Dec-2008          7          2
12-Dec-2008          8          2
13-Dec-2008          9          2
14-Dec-2008         10          2
15-Dec-2008         11          3
16-Dec-2008         12          3
17-Dec-2008         13          3
18-Dec-2008         14          3
19-Dec-2008         15          3
20-Dec-2008         16          3
21-Dec-2008         17          3
22-Dec-2008         18          3
23-Dec-2008         19          3 
```

# wpf - WPF - 最大化应用程序窗口不会垂直扩展控件 - 它会水平扩展

> ID：378555
> 
> 赞同：1
> 
> 时间：2008-12-18T17:23:33.963
> 
> 标签：wpf, controls

当我按下我的 WPF 应用程序上的最大化按钮时，其中的所有控件都完美地水平扩展，但它们不会扩展以垂直填充窗口。我认为它最大化水平处理它，它也应该垂直处理它。我应该在每个控件的某处设置一个属性吗？我可以捕捉到 Resize 事件，但是要遍历所有控件并仅垂直调整它们的大小似乎需要做很多工作。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T21:42:12.600

FYI. I ended up changing the Height of the grid to "Auto", and then when the SizeChanged event for the Window1 fired, I set the grid Height to the e.NewSize.Height minus the ActualHeights of the controls in the StackPanel that are above it. Not how I would like it to be, but so far the only solution I found that works.

Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T17:25:34.973

你能给我们看一些 Xaml 吗？尝试将外部容器设置为 VerticalAlignment="Stretch"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T17:59:43.783

预览窗口会截断一些 XAML，但会显示在答案文本框中确定。让我知道它是否正常。VerticalAlignment="Stretch" 没有帮助。

```
<Window x:Class="MainScreen.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MainScreen"
    xmlns:r="clr-namespace:Microsoft.Windows.Controls.Ribbon;assembly=RibbonControlsLibrary"
    xmlns:dg="http://schemas.microsoft.com/wpf/2008/toolkit" 
    WindowStartupLocation="CenterScreen"
    Title="Nodes" Height="600" Width="800"
    >
    <!-- The "toolkit" namespace above is for the data grid control.  It's reference is WPFToolkit. -->
    <Window.CommandBindings>
        <CommandBinding Command="{StaticResource LineTopologyCommand}" Executed="OnLineTopology" />
        <CommandBinding Command="{StaticResource PointToPointTopologyCommand}" Executed="OnPointToPointTopology" />
        <CommandBinding Command="{StaticResource PointToMultiPointTopologyCommand}" Executed="OnPointToMultiPointTopology" />
        <CommandBinding Command="{StaticResource MultiToMultiTopologyCommand}" Executed="OnMultiToMultiTopology" />
        <CommandBinding Command="{StaticResource CesTopologyCommand}" Executed="OnCESTopology" />
        <CommandBinding Command="{StaticResource AllTopologyCommand}" Executed="OnAllTopology" />
    </Window.CommandBindings>
    <StackPanel VerticalAlignment="Stretch">
        <r:Ribbon Name="mRibbon" DockPanel.Dock="Top">
            <r:Ribbon.Resources>
                <r:RibbonGroupSizeDefinitionCollection x:Key="ViewLayout">
                    <r:RibbonGroupSizeDefinition>
                        <!-- Control sizes: L,L,L -->
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                        <r:RibbonControlSizeDefinition ImageSize="Small" IsLabelVisible="True"/>
                    </r:RibbonGroupSizeDefinition>
                </r:RibbonGroupSizeDefinitionCollection>
            </r:Ribbon.Resources>
            <r:Ribbon.ApplicationMenu>
                <r:RibbonApplicationMenu>
                    <r:RibbonApplicationMenu.Command>
                        <r:RibbonCommand
                            Executed="OnCloseApplication"
                            LabelDescription="Application Button"
                            SmallImageSource="Images/SEL.ico"
                            LargeImageSource="Images/SEL.ico"
                            ToolTipTitle="SEL Network Management System"
                            ToolTipDescription="" />
                    </r:RibbonApplicationMenu.Command>
                </r:RibbonApplicationMenu>
            </r:Ribbon.ApplicationMenu>
            <r:Ribbon.QuickAccessToolBar>
                <r:RibbonQuickAccessToolBar CanUserCustomize="True">
                </r:RibbonQuickAccessToolBar>
            </r:Ribbon.QuickAccessToolBar>
            <r:RibbonTab Label="View" MouseLeftButtonUp="RibbonTab_View_MouseLeftButtonUp">
                <r:RibbonTab.Groups>
                    <r:RibbonGroup GroupSizeDefinitions="{StaticResource ViewLayout}">
                        <r:RibbonGroup.Command>
                            <r:RibbonCommand LabelTitle="Topology"/>
                        </r:RibbonGroup.Command>
                        <r:RibbonButton Command="{StaticResource LineTopologyCommand}"/>
                        <r:RibbonButton Command="{StaticResource PointToPointTopologyCommand}" />
                        <r:RibbonButton Command="{StaticResource PointToMultiPointTopologyCommand }" />
                        <r:RibbonButton Command="{StaticResource MultiToMultiTopologyCommand }" />
                        <r:RibbonButton Command="{StaticResource CesTopologyCommand }" />
                        <r:RibbonButton Command="{StaticResource AllTopologyCommand }" />
                    </r:RibbonGroup>
                </r:RibbonTab.Groups>
            </r:RibbonTab>
            <r:RibbonTab Label="Home" MouseLeftButtonUp="RibbonTab_Home_MouseLeftButtonUp">

            </r:RibbonTab>
            <r:RibbonTab Label="Device Designer">

            </r:RibbonTab>
            <r:RibbonTab Label="Network Design">

            </r:RibbonTab>
        </r:Ribbon>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" HorizontalAlignment="Center">
            <StackPanel.Resources>
                <Style x:Name="ButtonStyle" TargetType="{x:Type Button}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Border Name="theBorder" BorderBrush="Gray" BorderThickness="2" 
                            CornerRadius="10" Padding="5" Background="{TemplateBinding Background}">
                                    <ContentPresenter/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="theBorder" Property="BorderBrush" Value="#333333"/>
                                    </Trigger>
                                    <Trigger Property="IsPressed" Value="True">
                                        <Setter TargetName="theBorder" Property="Background" Value="#CCCCCC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </StackPanel.Resources>
            <Label Content="Number of Nodes"/>
            <TextBox x:Name="NumNodes"  HorizontalAlignment="Right" Margin="0,0,6.71,0" Width="30"/>
            <Slider
                    x:Name="uiScaleSlider"
                    Width="78"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    ToolTip="Determines the UI scale factor."
                    Height="27"
                    Value=".1" Minimum=".5" Maximum="5"
                    Orientation="Horizontal"
                    Ticks="1"
                    IsSnapToTickEnabled="False"
                    TickFrequency="1"
                    TickPlacement="BottomRight"
                    AutoToolTipPlacement="BottomRight"
                    AutoToolTipPrecision="2" />
            <Button Name="AddNodes" Content="Add Nodes" Margin="0,0,10,0"/>
            <Button Name="Clear" Content="Clear" Margin="0,0,5,0"/>
        </StackPanel>
        <Grid VerticalAlignment="Stretch" x:Name="mainGrid" Margin="2,5,0,0" Height="390" Background="WhiteSmoke">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="3*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <GridSplitter Grid.Column="0" Grid.RowSpan="2" Width="5" ResizeDirection="Columns" Grid.ColumnSpan="1" Height="Auto" ResizeBehavior="BasedOnAlignment" VerticalAlignment="Stretch"/>
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <local:Graph x:Name="theGraphPanel" Background="#FFE7CEBF" Grid.Column="0" Grid.Row="0" Margin="2,2,2,2">
                    <local:Graph.LayoutTransform>
                        <ScaleTransform
                                    CenterX="0" CenterY="0"
                                    ScaleX="{Binding Path=Value, ElementName=uiScaleSlider}"
                                    ScaleY="{Binding Path=Value, ElementName=uiScaleSlider}"
                                />
                    </local:Graph.LayoutTransform>
                </local:Graph>
            </ScrollViewer>
            <TabControl x:Name="mTabControl"  Grid.Column="1" Grid.RowSpan="2" Margin="3,0,0,2">
                <TabItem Name="Item1" Header="Circuit">
                    <TreeView>
                        <TreeViewItem Header="Ring1">
                            <TreeViewItem Header="Site 1">
                                <TreeViewItem Header="Node 1">
                                    Data (#113)
                                </TreeViewItem>
                                <TreeViewItem Header="Node 2">
                                    Data (#114)
                                </TreeViewItem>
                                <TreeViewItem Header="Node 3">
                                    Data (#115)
                                </TreeViewItem>
                            </TreeViewItem>
                            <TreeViewItem Header="Site 2">
                            </TreeViewItem>
                        </TreeViewItem>
                        <TreeViewItem Header="Ring 2">
                            <TreeViewItem Header="Site 2">
                                <TreeViewItem Header="Node 1">
                                    Data (#7)
                                </TreeViewItem>
                            </TreeViewItem>
                        </TreeViewItem>
                    </TreeView>
                </TabItem>
                <TabItem Name="Item2" Header="Inventory"></TabItem>
            </TabControl>
            <GridSplitter Grid.Row="1" ResizeDirection="Rows" ResizeBehavior="BasedOnAlignment" HorizontalAlignment="Stretch" Name="GridSplitter1" Height="5" VerticalAlignment="Top" />
        </Grid>
    </StackPanel>
</Window> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T18:21:42.333

当您调整窗口大小时，相关控件是否会垂直缩小/增长？

您将 Grid 的 Height 属性设置为“390”，这使得它垂直固定大小。如果这是您对其他所有内容的“父”控制，他们将以此为关键。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T18:52:16.233

是的，这是我调整窗口大小时不会垂直收缩/增长的控件。

Since I wrote, I changed the grid height to auto, which, when I run my app, the grid, since it is the last control in the StackPanel, takes up only a portion of the remaining space in the window when it is first shown - maybe 80 of the 390\. In row 0, column 0, I have a custom panel (theGraphPanel) where I draw nodes in a circle. If I draw say 20 nodes, that cell sizes appropriately, even to take up the entire screen when it is maximized. This somewhat solves the problem, although the vertical scrolling doesn't work because I believe it thinks it has infinite height.

I would like the grid to show up on the screen the way it does when I set the size to 390 - the first row taking up 3* the height of the remaining space and second row taking up * height. I guess what I am trying to do is simulate a MDI set up. I want the proportions to stay the same when I first start the app (800 x 600) and then when I maximize it. From what I can tell, unless the grid cells have content, they will stay at a minimum size and grow to whatever size the content is when the overall grid height is set to "Auto". Perhaps I am trying to do something that is not possible.

Thanks for the answers so far.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-05T16:42:29.763

Why not just use nested grids

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition></RowDefinition>
        <RowDefinition Height="33"></RowDefinition>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="120"></ColumnDefinition>            
        <ColumnDefinition Width="200"></ColumnDefinition>
        <ColumnDefinition Width="3"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>        
    <GridSplitter Grid.Column="2" Grid.Row="0" 
        Height="Auto" Width="Auto" HorizontalAlignment="Stretch" 
        VerticalAlignment="Stretch" />

    <Grid Grid.Column="0" Margin="4,10,2,0" Grid.Row="0" VerticalAlignment="Stretch">
        <Grid.RowDefinitions>
            <RowDefinition Height="20"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Column="0" Grid.Row="0" Style="{StaticResource HeaderText}" FontSize="13" >Templates</TextBlock>

        <ListBox Grid.Column="0" Grid.Row="1" FontSize="13" >
            <ListBoxItem>
                Blank
            </ListBoxItem>
            <ListBoxItem>
                New from existing...
            </ListBoxItem>
        </ListBox>

    </Grid>

    <ListView Grid.Column="1" Style="{StaticResource MyView}" Grid.Row="0" Margin="2,10,2,0">
        <ListViewItem>item1</ListViewItem>
    </ListView>

    <ListView Grid.Column="3" Style="{StaticResource MyView}" Grid.Row="0" Margin="2,10,4,0">
        <ListViewItem>item1</ListViewItem>
    </ListView>

    <WrapPanel Grid.Row="1" Grid.Column="3" HorizontalAlignment="Right">
        <Button Height="22" Width="60">Create</Button>
        <Button Height="22" Width="60">Cancel</Button>
    </WrapPanel>

</Grid> 
```

# css - WebKit 的表格问题

> ID：378556
> 
> 赞同：-1
> 
> 时间：2008-12-18T17:24:55.850
> 
> 标签：css, webkit, html-table

我无法让此代码在 WebKit 浏览器（chrome/safari）中正确显示。它在 IE6、IE7 和 FireFox 中看起来不错。

```
<table width="100%">
    <tr>
        <td rowspan="2" style="vertical-align:middle;">
            <a href="http://http://{$smarty.const.DOMAIN}/company/a_cherry_on_top/line/gift_cards/?v=s2"><img src="/i/thumbnails/acotgc25sm.gif" alt="Gift Certificate"/></a>
        </td>

        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=2044" target="_top">Wishlist</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=2125" target="_top">Link to Us</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://www.shareasale.com/shareasale.cfm?merchantID=8362" target="_blank">Affiliate Program</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=1521" target="_top">Privacy</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=1395" target="_top">Guarantee</a>
        </td>

        <td rowspan="2" style="width:160px;">
            <script src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/translatemypage.xml&up_source_language=en&w=160&h=60&title=&border=&output=js"></script>
        </td>
    </tr>
    <tr>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=3069" target="_top">About Us</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=1467" target="_top">Shipping</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=12342383" target="_top">Why Buy From Us</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/article?a=1397" target="_top">Contact Us</a>
        </td>
        <td style="vertical-align:middle;">
            <a href="http://{$smarty.const.DOMAIN}/help" target="_top">Help</a>
        </td>
    </tr>
</table> 
```

问题是 WebKit 使顶行非常小，而底行填充了其余空间，而不是每行具有相等的高度。

任何人都知道如何让它在基于 WebKit 的浏览器中显示我想要的样子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-06-20T04:40:55.370

我有一些建议给你，但我不能完全回答你的问题，因为当我尝试 WebKit 时似乎可以很好地呈现你的源代码。

1.  首先，也许您可​​以更改`width="100%"`为`style="width:100%;"`可能与其他标记结合使用，它将浏览器置于怪癖模式。
2.  其次，确保您有正确的文档类型并且您的代码验证或至少接近。我在复制和粘贴代码时使用的 doctype 是 XHTML Strict。

否则，请发布整个页面的源代码或仅链接到现场演示。即使是屏幕截图也会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-09-26T13:40:13.820

确保它在 webkit 中未正确显示的正确示例如下：

```
<table width="200" border="1">
  <tbody>
    <tr>
      <td rowspan="2" width="15">
        this is a very high rowspan 2 row that will thus be split over 2 rows, it prevents the second row from being formatted in height
      </td>
      <td>
        this should be big instead
      </td>
    </tr>
    <tr height="20">
      <td height="20">
        this row fails to size to 20 height on webkit
      </td>
    </tr>
  </tbody>
</table> 
```

如您所见，左侧部分渲染得很好，但右侧部分应该不同，因为顶行应该填充左侧空间，底行设置为 20 高度（因为您既看不到 tr 高度也看不到td 高度由 webkit 考虑）。这在所有其他浏览器中都很好

编辑：在玩弄和修补我的问题之后，我得出了以下解决方案。完全依赖 jquery 从要更改的行中读取 height 属性：

```
<html>
<head>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
$("#pipnorowspan").height(function(){
    return $("#rcarowspan").height() - $("#piplowerrow").attr('height') + 2;
});
});
</script>
</head>
<body>
<table width="200" style="border-collapse:collapse; border:1px solid #000;" id="ertable">
  <tbody>
    <tr style="border:1px solid #000;">
      <td rowspan="3" width="15" id="rcarowspan" style="border:1px solid #000;">
        this is a very high rowspan 2 row that will thus be split over 2 rows, it prevents the second row from being formatted in height
      </td>
      <td id="pipnorowspan" style="border:1px solid #000;">
        this should be big instead
      </td>
    </tr>
    <tr height="20" id="piplowerrow" style="border:1px solid #000;">
      <td height="20" style="border:1px solid #000;">
        this row fails to size to 20 height on webkit
      </td>
    </tr>
  </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-05T15:14:17.413

I could help more with a live example to test on but you could try adding this to your `tr` tags.

```
<tr style="height: 50%;"> 
```

Assuming you only need two rows this will bring them to equal height.

# sql-server - 在 SQL Server 中导入现有存储过程

> ID：378559
> 
> 赞同：5
> 
> 时间：2008-12-18T17:25:25.583
> 
> 标签：sql-server, stored-procedures, import, generate-scripts

我从生产中恢复了我的开发数据库，​​而我的开发环境中需要的存储过程在我的生产数据库中不存在。Ii 是否可以使用命令将developmetn 存储过程导入回SQL Server。大约有 88 个文件，因为每个过程都在不同的文本文件中。

蒂亚！克里斯

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T17:29:11.533

哎呀，你做了很痛苦的方式来生成脚本。您应该通过右键单击 SSMS 中的数据库，选择任务 -> 生成脚本来为所有过程创建一个脚本。

但是，如果您不想再次执行该过程，请在文件夹中打开一个 cmd shell 并记住那些旧的批处理文件天：

```
for %f in (*.sql) do sqlcmd -i %f 
```

这应该可以解决问题！如果需要，您可以向 sqlcmd 添加其他参数（即登录名、密码、服务器名称……）。要查看开关列表，只需执行`sqlcmd -h`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T18:05:55.563

对于 SQL 2K 和 2K5，您需要[这个工具](http://www.microsoft.com/downloads/details.aspx?familyid=56E5B1C5-BF17-42E0-A410-371A838E570A&displaylang=en)。

不久前我问了一个类似的问题，并从 Mike L 那里得到了这个建议（[在这里](https://stackoverflow.com/questions/121837/sql-server-2005-importing-data-from-sql-server-2000)给他投票）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-09-12T05:35:21.113

1.  右键单击要从中传输数据的数据库
2.  选择*数据传输*
3.  选择*表*或*存储过程*（您要传输的内容）
4.  选择要传输数据的位置（在服务器或本地主机或任​​何文件上）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T17:32:00.623

右键单击开发数据库点击生成 SQL 脚本，然后只选择存储的程序。如果您需要额外的过滤，您甚至可以选择您不想要的存储过程。

然后只需在开发中运行该查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T17:34:37.437

我不知道是否有命令行方法可以做到这一点，但如果你将它们全部放在文本文件中，编写一个快速而肮脏的应用程序，它只循环所有文件，并且使用您选择的任何语言在您的生产服务器上运行创建语句。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-30T16:46:01.150

如果像我一样，您必须处理文件夹层次结构中的一堆 sql 文件，这个衬垫会将它们组合成一个名为 out.sql 的文件，您可以在 SQL Management Studio 中轻松执行该文件。它只会包含以 .sql 结尾的文件，而忽略 *.sqlsettings 等文件。

从 .sql 文件层次结构的根文件夹运行它。确保 out.sql 中没有任何有价值的内容，因为它将被替换。

```
del out.sql && for /f %f in ('dir /b /s ^| findstr /E \.sql') do type %f >> out.sql 
```

# python - 惯用的异步设计

> ID：378564
> 
> 赞同：8
> 
> 时间：2008-12-18T17:27:35.250
> 
> 标签：python, asynchronous

在编写异步 API 时，我可以使用任何有用的习惯用法吗？我想对某些东西进行标准化，因为我似乎在整个过程中使用了几种不同的风格。让异步代码变得简单似乎很难；我想这是因为异步操作绝非如此。

在最基本的层面上，API 的用户必须能够：

1.  在数据可用时将数据推送给他们
2.  检查异步操作的状态
3.  收到发生错误的通知
4.  等待完成（将异步操作转换为同步操作）

我的类支持几种异步操作。我一直在围绕它的类中放置一些状态/错误回调，但是该类正被许多附带字段所困扰，并且变得太大。我很好奇是否有人使用过他们发现组织良好的异步 API。我查看了 .NET 的 Begin/EndAsyncOperation + AsyncResult 设计，以及 Java 中的一些类（例如 Future）。

这是用 Python 编写的，因此它仍然非常灵活。有一个警告：其中一些异步操作被编组到远程机器并在那里执行。因此，并非每个操作都必须在单独的线程中执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T17:43:31.083

您可能想查看[Python Twisted](http://twistedmatrix.com/trac/)。它是一个很好的基于[Reactor](http://en.wikipedia.org/wiki/Reactor_pattern)的 API，支持[异步](http://twistedmatrix.com/projects/core/documentation/howto/async.html)操作。[Proactor](http://www.cs.uu.nl/docs/vakken/no/proactor.pdf)是框架等异步完成处理程序的通用术语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:02:46.010

还可以查看异步完成令牌和 ActiveObject 模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T22:22:09.633

这听起来像**观察者**设计模式。 [链接](http://en.wikipedia.org/wiki/Observer_pattern)。

您的客户端对象是**Observer**。您的 API 属于**Observable**的对象。

每个客户端（用 Java 术语来说）都实现了**Observer**接口。在 Python 中，每个客户端都提供许多您的 observable 将使用的方法。

```
class SomeClientInterface( object ):
    def update( self, source, data ):
        # handle data being pushed from Observable source
    def error( self, from, status ):
        # handle error in Observable source 
```

你的 Observable 对象有一种方法让观察者注册和做其他事情。

```
class Observable( object ):
    def __init__( self ):
        self.clients= set()
    def register( self, observer ):
        self.clients.add( observer )
    def whenSomethingHappens( self ):
        # doing work
        if itAllWentToHell:
            for c in self.clients:
                c.error( self, "some status object" )
        else:
            for c in self.clients:
                c.update( self, the pushed data )
    def waitFor( self ):
        # observers are waiting...
        return theData
    def status( self ):
        return self.currentState 
```

# silverlight - Silverlight：创建圆形按钮模板

> ID：378568
> 
> 赞同：3
> 
> 时间：2008-12-18T17:28:49.180
> 
> 标签：silverlight, xaml

我决定尝试制作一个圆形按钮，因此使用表达式混合，我在我的 xaml 上放置了一个按钮控件。然后我通过选择“编辑控制部件（模板）”->“编辑副本”从中创建了一个模板。我正在尝试设计它，使按钮的左侧和右侧始终是完美的半圆形，这样无论按钮长多高或多宽，角半径都会最大为宽度的一半或长度的一半按钮，取决于哪个更小。这样，如果按钮被拉高，顶部和底部将是完美的半圆，如果按钮被拉宽，左右将是完美的半圆。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-27T11:07:51.013

这很接近，但使其成为完美的圆形边缘更难。我通过制作圆形而不是带有圆形曲线的矩形来制作它。看看这是否有帮助：

```
 <Style x:Key="roundButton"
       TargetType="Button">
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="Button">
        <Grid>
          <Grid.RowDefinitions>
            <RowDefinition Height="0.479*" />
            <RowDefinition Height="0.521*" />
          </Grid.RowDefinitions>
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.147*" />
            <ColumnDefinition Width="0.685*" />
            <ColumnDefinition Width="0.168*" />
          </Grid.ColumnDefinitions>
          <vsm:VisualStateManager.VisualStateGroups>
            <vsm:VisualStateGroup x:Name="FocusStates">
              <vsm:VisualState x:Name="Unfocused" />
              <vsm:VisualState x:Name="Focused" />
            </vsm:VisualStateGroup>
            <vsm:VisualStateGroup x:Name="CommonStates">
              <vsm:VisualState x:Name="MouseOver" />
              <vsm:VisualState x:Name="Normal" />
              <vsm:VisualState x:Name="Pressed" />
              <vsm:VisualState x:Name="Disabled" />
            </vsm:VisualStateGroup>
          </vsm:VisualStateManager.VisualStateGroups>
          <Path Margin="-2,8,2,8"
                Grid.Column="1"
                Grid.RowSpan="2"
                Fill="{TemplateBinding Background}"
                Stretch="Fill"
                Stroke="#FF000000"
                Data="M25.999998,0.5 L26.499998,0.55732149 L26.499998,0.50000316 L184.5,0.50000316 L184.5,0.55732256 L185,0.5 C199.0833,0.50000429 210.5,13.483747 210.5,29.500002 C210.5,45.516144 199.0833,58.500004 185,58.500004 L184.5,58.44268 L184.5,58.500004 L26.499998,58.500004 L26.499998,58.44268 L25.999998,58.500004 C11.916747,58.500004 0.5,45.516209 0.5,29.500002 C0.5,13.483672 11.916748,0.50000429 25.999998,0.5 z"
                StrokeThickness="0" />
          <ContentControl FontFamily="{TemplateBinding FontFamily}"
                          FontSize="{TemplateBinding FontSize}"
                          FontStyle="{TemplateBinding FontStyle}"
                          FontWeight="{TemplateBinding FontWeight}"
                          Foreground="#FFFFFFFF"
                          HorizontalContentAlignment="Center"
                          VerticalContentAlignment="Center"
                          Grid.ColumnSpan="3"
                          Grid.RowSpan="2"
                          Content="{TemplateBinding Content}" />
        </Grid>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
  <Setter Property="Background"
          Value="#FFFF0000" />
</Style> 
```

# php - 找不到套接字传输“https”

> ID：378574
> 
> 赞同：35
> 
> 时间：2008-12-18T17:30:35.823
> 
> 标签：php, iis, fsockopen

我正在使用它来检查 URL 的可用性：

```
$fp = fsockopen($url, 443, $errno, $errstr); 
```

我得到了这个错误......

**警告：fsockopen() [function.fsockopen]：无法连接到[https://example.com/soapserver.php:443](https://example.com/soapserver.php:443)（无法找到套接字传输“https” - 您在配置 PHP 时是否忘记启用它？ ) 在 C:\Home 等...**

顺便说一句，我正在使用 IIS 服务器，（不，这不是我做的！）所以我认为这与没有 open-ssl 有关，但我不确定。有人可以帮忙吗？

我做了一个 phpinfo() 并且我确实有 ssl，但在 IMAP 和 cURL 上，仅此而已。

有任何想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2011-01-30T19:17:30.073

取消注释该行：`extension=php_openssl.dll`在`php.ini`

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-12-18T17:33:26.237

您应该只使用主机名，而不是 fsockopen 调用中的 URL。您需要提供 uri，减去实际 HTTP 标头中的主机/端口。正如@Martijin 所指出的，并且如手册页中所列，如果使用传输层安全性，您需要在您的主机名前加上 ssl:// 或 tls:// 来表示 SSL。

[fsockopen 的手册页](http://us3.php.net/fsockopen)。查看示例 #1。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-12-18T17:41:27.843

同样对于 ssl，您需要在主机前加上 ssl://

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-19T12:49:17.243

假设您想获取强制 HTTPS 的 NY Times：

不正确：

`$client = stream_socket_client('https://www.nytimes.com', $errno, $errstr, 30);`

正确的：

`$client = stream_socket_client('tcp://www.nytimes.com:443', $errno, $errstr, 30);`

请注意，我已将 443 端口替换`https://`并附`tcp://`加到主机名。

我想我们可以说它`stream_socket_client()`不会说 URL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-19T18:15:58.987

切换到`ssl://`为我工作，但我一直收到 BAD REQUEST 响应。我发现我需要再添加一行来明确声明我的主机头，如此[处所述，](https://stackoverflow.com/questions/27452744/paypal-sandbox-ipn-not-getting-verified-response/44076188#44076188)并确保我已将我的 HTTP 从更新`HTTP/1.0`为`HTTP/1.1`：

```
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-11T11:22:42.013

检查是否为 php 安装了 curl。如果未安装，请安装 curl。对于 windows 取消注释行：extension=php_openssl.dll in php.ini，对于 ubuntu sudo apt-get install php-curl

# html - 使用 html 控件调用函数背后的代码

> ID：378583
> 
> 赞同：0
> 
> 时间：2008-12-18T17:32:39.890
> 
> 标签：html, asp.net-mvc

我有一个简单的函数，我想在文件名 Move 后面的代码中调用它，我试图看看如何做到这一点，我没有使用 asp 图像按钮，因为没有尝试使用 asp 服务器端控件，因为它们往往不起作用与 ASP.net MVC 一样好。现在它的设置方式将寻找一个名为 Move 的 JavaScript 函数，但我希望它在同一视图后面的代码中调用一个名为 move 的函数

```
 <img alt='move' id="Move" src="/Content/img/hPrevious.png" onclick="Move()"/>

protected void Move(){

} 
```

//根据搜索条件更新一个新表

```
 protected void Search(object sender EventArgs e)
{
 for (int i = 0; i < data.Count; i++){
 HtmlTableRow row = new HtmlTableRow();
 HtmlTableCell CheckCell = new HtmlTableCell();
 HtmlTableCell firstCell = new HtmlTableCell();
 HtmlTableCell SecondCell = new HtmlTableCell();
 CheckBox Check = new CheckBox();
 Check.ID = data[i].ID;
 CheckCell.Controls.Add(Check);
 lbl1.Text = data[i].Date;
 lbl2.Text = data[i].Name;
  row.Cells.Add(CheckCell);
  row.Cells.Add(firstCell);
  row.Cells.Add(SecondCell); 
  Table.Rows.Add(row);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T23:16:18.447

Scott Guthrie 有一个[很好的例子](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)来说明如何使用路由规则来做到这一点。

这将使您能够让用户导航到格式为 /Search/[Query]/[PageNumber] 的 URL，例如[http://site/Search/Hippopotamus/3](http://site/Search/Hippopotamus/3)，它将显示搜索结果的第 3 页河马。

然后在您看来，只需将下一个按钮指向“ [http://site/Search/Hippopotamus/4](http://site/Search/Hippopotamus/4) ”，不需要 javascript。

当然，如果你想使用 javascript，你可以这样做：

```
function Move() {
    var href = 'http://blah/Search/Hippopotamus/2';
    var slashPos = href.lastIndexOf('/');
    var page = parseInt(href.substring(slashPos + 1, href.length));
    href = href.substring(0, slashPos + 1);

    window.location = href + (++page);
} 
```

但这比仅仅增加控制器中的页码参数和设置下一个按钮的 URL 更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T19:54:07.297

您不能在 ASP.NET MVC 应用程序的 JavaScript 中执行回发或调用视图中的任何内容。您想从 JavaScript 调用的任何内容都必须是控制器上的操作。如果没有更多关于你想要做什么的细节，很难说更多，但是如果你想在你的 web 应用程序中从 JavaScript 调用某个方法“Move”，那么“Move”必须是控制器上的一个动作。

根据评论，我将更新此答案，更完整地描述您如何实施我所理解的问题中描述的问题。但是，这个问题缺少很多信息，所以我在这里推测。希望总体思路能够通过，即使某些细节与 TStamper 的确切代码不匹配。

让我们从一个控制器动作开始：

```
public ActionResult ShowMyPage();
{
    return View();
} 
```

现在我知道我想重新显示此页面，并使用从页面中的 JavaScript 函数传递的参数来执行此操作。由于我将再次显示同一页面，因此我将更改操作以进行论证。字符串参数可以为空，因此我可以像往常一样继续进行页面的初始显示，而不必担心为参数指定某种默认值。这是新版本：

```
public ActionResult ShowMyPage(string searchQuery);
{
    ViewData["SearchQuery"] = searchQuery;
    return View();
} 
```

现在我需要在 JavaScript 中再次调用这个页面。所以我使用最初用于显示页面的相同 URL，但我在表名后面附加了一个查询字符串参数：

[http://example.com/MyControllerName/ShowMyPage?searchQuery=tableName](http://example.com/MyControllerName/ShowMyPage?searchQuery=tableName)

最后，在我的 aspx 中，我可以调用一个代码隐藏函数，从视图数据中传递 searchQuery。再一次，我对在 MVC 应用程序中使用代码背后有强烈的保留意见，但这会起作用。

如何在 aspx 中调用代码隐藏函数：

```
<% Search(ViewData["searchQuery"]); %> 
```

我已经改变了论点。由于您不处理事件（除了少数例外，例如 Page_Load，MVC 中没有），因此 Search 函数不需要事件处理程序的签名。但我确实添加了“tablename”参数，以便您可以从 aspx 传递它。

再一次，我将在后面的代码中表达我对这样做的保留。当 MVC 的工作方式不同时，让我感到震惊的是，您正在尝试在 MVC 框架内使用标准 ASP.NET 技术。我强烈建议您阅读 MVC 教程以查看执行此类操作的更标准方法的示例。

# silverlight - Silverlight：模板绑定

> ID：378587
> 
> 赞同：0
> 
> 时间：2008-12-18T17:33:57.530
> 
> 标签：silverlight, xaml, expression-blend

我正在尝试创建一个完美的圆形按钮，因此我使用 Expression Blend 从标准按钮控件创建了一个模板。普通按钮具有使用模板绑定绑定到模板的背景对象（边框类型）的 BorderThickness 属性。如果我想在设计时自定义按钮的边框，我将如何将其绑定到模板？它不会让我选择将圆形笔触厚度绑定到模板 BorderThickness 属性。我可以使用模板绑定将 Border 对象的 BorderThickness 绑定到模板 BorderThickness 属性，但我不知道如何将边框控件设置为始终为圆形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-20T18:04:08.540

您可能会尝试创建一个圆形椭圆并使其成为按钮（表达式混合中的工具-> Makebutton。我认为这将是更简单的路径。

# c# - 与母版页一起使用时谷歌地图空白

> ID：378596
> 
> 赞同：2
> 
> 时间：2008-12-18T17:36:40.070
> 
> 标签：c#, asp.net, google-maps

我写了一个谷歌地图查找页面。在我引用该页面以使用母版页之前，一切都很好。我从母版页中删除了表单标签，因为地图页面上的搜索按钮是一个提交按钮。我页面上的所有其他内容都会出现，但谷歌地图 div 会出现地图导航控件和徽标，但不会出现地图视觉效果。

我用以前的非母版页版本重新测试，地图正确显示。对我所缺少的有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-31T07:14:38.953

请查看下面的代码，让我知道它有用...

**MasterPage 代码（GMap.master 页面）**

```
< body onload="initialize()"  onunload="GUnload()"  >  
< form id="form1" runat="server" >
    < div >
        < asp:contentplaceholder id="ContentPlaceHolder1" runat="server" >
        < /asp:contentplaceholder >
    < /div >
    < /form >
< /body > 
```

**GMatTest.aspx 使用的页面 GMap.Master 页面**

```
< %@ Page Language="C#" MasterPageFile="~/MasterPages/GMap.master" AutoEventWireup="true"
    CodeFile="GMapTest.aspx.cs" Inherits="GMapTest" Title="Google Map Page" % >

< asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server" >

    < script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=< % = AppConfig.GoogleMapApiKey % >"
        type="text/javascript" >< /script >

    < script type="text/javascript" >

    var map = null;
    var geocoder = null;
    var latsgn = 1;
    var lgsgn = 1;
    var zm = 0; 
    var marker = null;    

    function initialize()
     {
      if (GBrowserIsCompatible()) 
      {
       var latitude=  "";
       var longitude= "";

       map = new GMap2(document.getElementById("map_canvas"));

         var center = new GLatLng(0,0);
         map.setCenter(center, 17);

         map.addControl(new GLargeMapControl());
        map.addControl(new GScaleControl());
        map.enableScrollWheelZoom();

        map.addControl(new GMapTypeControl());

        map.enableDoubleClickZoom();

         marker = new GMarker(center,{draggable: true});

         geocoder = new GClientGeocoder();

       GEvent.addListener(marker, "dragend", function() {
        var point = marker.getLatLng();
         marker.openInfoWindowHtml("Latitude: " + point.y + "< /br > Longitude: " + point.x  );
      });

       GEvent.addListener(marker, "click", function() {
        var point = marker.getLatLng();        

      });

        map.addOverlay(marker);
        GEvent.trigger(marker, "click");

        if (latitude  > 0 &&  longitude  > 0)
        {
        }
        else
        {       

            showAddress();

        }
      }
     } 
```

下面的部分是继续所以请也复制它

```
function showAddress() 
{
     var isAddressFound=false;  
     var companyAddress = '';  
     var address='satyam mall, vastrapur, ahmedabad, gujrat, india';  
     if (geocoder)   
    {  
         geocoder.getLatLng(address,function(point) {   
                             if (!point) {  
                            alert(address + " not found");  

                             } else {  
                                isAddressFound =true;  
                             map.setCenter(point,17);  
                             zm = 1;  
                             marker.setPoint(point);  
                             GEvent.trigger(marker, "click");  
                             }  
                         }  
         );  

//If address not found then redirect to company address

     if(!isAddressFound)
     {     
         geocoder.getLatLng(companyAddress,
         function(point) { 
         if (!point) { 
         } else {
            isAddressFound =true;
         map.setCenter(point,17);
         zm = 1;
         marker.setPoint(point);
         GEvent.trigger(marker, "click");
         }
         }
         );
     }
 }
}
< /script >

< div id="map_canvas" style="width: 100%; height: 425px" >
< /div >
< /asp:Content > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-03-08T13:02:31.483

这是我使用的代码。在这里可以正常工作，但是每当我添加母版页时，它都不会执行任何使用功能

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
        <title>Find latitude and longitude with Google Maps</title>
      <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAPkZq56tNYNmeuZjNQQ2p3hT0NZP-HbfQNNfWb9Z5SLbjZKYKwBTrGBqtttFmF2d-kWv2B2nqW_NyEQ"
      type="text/javascript"></script>
    <script type="text/javascript">

 function load() {
      if (GBrowserIsCompatible()) {
        var map = new GMap2(document.getElementById("map"));
        map.addControl(new GSmallMapControl());
        map.addControl(new GMapTypeControl());
        var center = new GLatLng(48.89364,      2.33739);
        map.setCenter(center, 15);
        geocoder = new GClientGeocoder();
        var marker = new GMarker(center, {draggable: true});  
        map.addOverlay(marker);
        document.getElementById("lat").innerHTML = center.lat().toFixed(6);
        document.getElementById("lng").innerHTML = center.lng().toFixed(6);

      GEvent.addListener(marker, "dragend", function() {
       var point = marker.getPoint();
          map.panTo(point);
       document.getElementById("lat").innerHTML = point.lat().toFixed(6);
       document.getElementById("lng").innerHTML = point.lng().toFixed(6);

        });

     GEvent.addListener(map, "moveend", function() {
          map.clearOverlays();
    var center = map.getCenter();
          var marker = new GMarker(center, {draggable: true});
          map.addOverlay(marker);
          document.getElementById("lat").innerHTML = center.lat().toFixed(6);
       document.getElementById("lng").innerHTML = center.lng().toFixed(6);

     GEvent.addListener(marker, "dragend", function() {
      var point =marker.getPoint();
         map.panTo(point);
      document.getElementById("lat").innerHTML = point.lat().toFixed(6);
         document.getElementById("lng").innerHTML = point.lng().toFixed(6);

        });

        });

      }
    }

       function showAddress(address) {
       var map = new GMap2(document.getElementById("map"));
       map.addControl(new GSmallMapControl());
       map.addControl(new GMapTypeControl());
       if (geocoder) {
        geocoder.getLatLng(
          address,
          function(point) {
            if (!point) {
              alert(address + " not found");
            } else {
          document.getElementById("lat").innerHTML = point.lat().toFixed(6);
       document.getElementById("lng").innerHTML = point.lng().toFixed(6);
         map.clearOverlays()
            map.setCenter(point, 14);
   var marker = new GMarker(point, {draggable: true});  
         map.addOverlay(marker);

        GEvent.addListener(marker, "dragend", function() {
      var pt = marker.getPoint();
         map.panTo(pt);
      document.getElementById("lat").innerHTML = pt.lat().toFixed(6);
         document.getElementById("lng").innerHTML = pt.lng().toFixed(6);
        });

     GEvent.addListener(map, "moveend", function() {
          map.clearOverlays();
    var center = map.getCenter();
          var marker = new GMarker(center, {draggable: true});
          map.addOverlay(marker);
          document.getElementById("lat").innerHTML = center.lat().toFixed(6);
       document.getElementById("lng").innerHTML = center.lng().toFixed(6);

     GEvent.addListener(marker, "dragend", function() {
     var pt = marker.getPoint();
        map.panTo(pt);
    document.getElementById("lat").innerHTML = pt.lat().toFixed(6);
       document.getElementById("lng").innerHTML = pt.lng().toFixed(6);
        });

        });

            }
          }
        );
      }
    }
    </script>
  </head>

<body onload="load()" onunload="GUnload()" >

<p>This page uses the Google Maps API to find out accurate geographical coordinates (latitude and longitude) for any place on Earth. <br/>It provides two ways to search, either by moving around the map and zooming in, or by typing an address if the place is unknown.<br/>
<i>
    <p> The default location and address are those of Mondeca office in Paris.<br />
   <p><b> Find coordinates by moving around the map</b></p> <p>1\. Drag and drop the map to broad location. <br/>
    2\. Zoom in for greater accuracy. <br/>
    3\. Drag and drop the marker to pinpoint the place. The coordinates are refreshed at the end of each move.  </p>

  <form action="#" onsubmit="showAddress(this.address.value); return false">
     <p>        
      <input type="text" size="60" name="address" value="3 cit&eacute; Nollez Paris France" />
      <input type="submit" value="Search!" />
      </p>
    </form>

 <p align="left">

 <table  bgcolor="#FFFFCC" width="300">
  <tr>
    <td width="100"><b>Latitude</b></td>
    <td id="lat"></td>
  </tr>
  <tr>
    <td width="100"><b>Longitude</b></td>
    <td id="lng"></td>
  </tr>
</table>
 </p>
  <p>
  <div align="center" id="map" style="width: 600px; height: 400px"><br/></div>
   </p>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T13:29:51.020

这是与上面提到的相同的问题。当我使用母版页时，没有绘制谷歌地图。后来我找到了解决方案。

您需要在要显示谷歌地图的 .aspx 页面中调用 Javascript 函数（如`initialize();`），在您的情况下可能会有所不同。

在我的情况下的代码：

```
<script type="text/javascript"">
    window.onload = function () {
        DrawGoogleMap();
    }

    function DrawGoogleMap() {
        if (GBrowserIsCompatible()) {
            map = new GMap2(document.getElementById("GoogleMap_Div"));
            geocoder = new GClientGeocoder();

            GService.GetGoogleObject(fGetGoogleObject);
        }
    } 

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T17:57:15.410

添加母版页时可能会改变的一件事是您的元素 ID。

如果您在其中显示地图的 div 上`runat="server"`有，您可能会遇到问题。您将添加该标签，以便您可以从代码隐藏中操作 div。

所以，如果我的 div 看起来像这样：

```
<div id="gmap" runat="server"></div> 
```

如果是这样，在初始化地图时，需要获取 div 的 ClientId。看起来像这样：

```
var mapDiv = '<%= gmap.ClientID %>';
var map = new GMap2(mapDiv); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T20:06:10.220

加载 FireFox 和 FireBug，开始寻找 javascript 错误。我发现的一项，您必须在地图上调用 setCenter 才能显示。此外，如果要添加标记（或图层），则必须在调用 setCenter 后添加标记。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-29T22:12:20.187

最终不得不强制 div 可见

在谷歌地图支持论坛上查看这个帖子：

[http://groups.google.com/group/Google-Maps-Troubleshooting/browse_thread/thread/0d27b66eef5f5d9e/1259a2991412f796?lnk=raot](http://groups.google.com/group/Google-Maps-Troubleshooting/browse_thread/thread/0d27b66eef5f5d9e/1259a2991412f796?lnk=raot)

谢谢！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-08T13:39:29.860

我使用的代码是

```
<%@ Page Language="C#" AutoEventWireup="true"  CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <META NAME="AUTHOR" CONTENT="Rakshith Krishnappa">
    <META NAME="DESCRIPTION" CONTENT="KML Tool - Get Latitude and Longitude for KML Polyline">
    <META NAME="KEYWORDS" CONTENT="Google, maps, mashup, tools, kml, polyline">
    <META NAME="ROBOTS" CONTENT="ALL"> 
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
    <title>Mapmash | Geocoder Tool | Geocode - Reverse Geocode - IP Geocode</title>
    <%--<style type="text/css">
    <!--
      html {
        height: 100%; width:100%;overflow:hidden;
      } 
      body {
      background-color: white;
      font-family: Arial, sans-serif;
      font-size:10pt
     }
     h1 {
     font-size: 18pt;
     }   
      #map {
      height: 100%;
           } 
    #hand_b {
      width:31px;
      height:31px;
      background-image: url(http://google.com/mapfiles/ms/t/Bsu.png);
    }
    #hand_b.selected {
      background-image: url(http://google.com/mapfiles/ms/t/Bsd.png);
    }

    #placemark_b {
      width:31px;
      height:31px;
      background-image: url(http://google.com/mapfiles/ms/t/Bmu.png);
    }
    #placemark_b.selected {
      background-image: url(http://google.com/mapfiles/ms/t/Bmd.png);
    }

    #line_b {
      width:31px;
      height:31px;
      background-image: url(http://google.com/mapfiles/ms/t/Blu.png);
    }
    #line_b.selected {
      background-image: url(http://google.com/mapfiles/ms/t/Bld.png);
    }

    #shape_b {
      width:31px;
      height:31px;
      background-image: url(http://google.com/mapfiles/ms/t/Bpu.png);
    }
    #shape_b.selected {
      background-image: url(http://google.com/mapfiles/ms/t/Bpd.png);
    }          
    --> 
    </style>
    <style type="text/css">
    v\:* {
      behavior:url(#default#VML);
    }
    </style>--%>
    <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAPkZq56tNYNmeuZjNQQ2p3hT0NZP-HbfQNNfWb9Z5SLbjZKYKwBTrGBqtttFmF2d-kWv2B2nqW_NyEQ"></script>
    <script type="text/javascript">
        google.load("maps", "2");
    </script>
    <script src="dragzoom.js" type="text/javascript"></script>
    <script src="http://adserver.lat49.com/lat49/v0.10/lat49.js" type="text/javascript"></script>
    <!-- Start of Google Analytics Code -->
    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
    </script>
    <script type="text/javascript">
    _uacct = "UA-2417064-1";
    urchinTracker();
    </script>
    <!-- End of Google Analytics Code -->   
    <script type="text/javascript">
    //<![CDATA[
    //rakf1 modified code taken from these 2 sources: - http://www.gorissen.info/Pierre/maps/googleMapLocationv4.php and - Distance Measurement Tool - Google Mapplets
    // argItems code taken from 
    // http://www.evolt.org/article/Javascript_to_Parse_URLs_in_the_Browser/17/14435/?format=print

    var map;
    var coordinates = '';
    var geocoder = new GClientGeocoder();
    var added = 0;
    var marker;

    function write_point() {
        var position = marker.getPoint();
        var lat = position.y.toFixed(6);
        var lng = position.x.toFixed(6);

        coordinates = lng + "," + lat + "\n";
        document.getElementById("attribute").value = 'lat="'+lat+'" lng="'+lng+'"';
        document.getElementById("latlng").value = '<lat>'+lat+'</lat>\n<lng>'+lng+'</lng>';
        document.getElementById("kml").value = lng+','+lat;
        document.getElementById("coord").value = marker.getPoint().toUrlValue();            
    }

    function get_address1() {
        GEvent.addListener(marker, "click", function(){
            var position = marker.getPoint();
            var lat = position.y.toFixed(6);
            var lng = position.x.toFixed(6);
            var html = 'FreeReverseGeo.com (~address):<br><iframe id="RSIFrame" name="RSIFrame" style="overflow:hidden; width:200px; height:55px; border: 1px" src="http://www.freereversegeo.com/gmap-api.php?lat_1=' + lat + '&lng_1=' + lng + '"></iframe><br>('+lat+','+lng+')';
            marker.openInfoWindowHtml(html);                    
        });     
    }

    function get_address() {
        GEvent.addListener(marker, "click", function(){
            var position = marker.getPoint();
            geocoder.getLocations(position, function(addresses) {
              if(addresses.Status.code != 200) {
                marker.openInfoWindowHtml("<b>Google Reverse Geocode:</b><br>Reverse geocoder failed to find an address for " + position.toUrlValue());
              }
              else {
                address = addresses.Placemark[0];
                var html = address.address;
                marker.openInfoWindowHtml("<b>Google Reverse Geocode:</b><br>"+html);
              }
            });                 
        });     
    }

    function my_location() {
        if (google.loader.ClientLocation) {
            var cl = google.loader.ClientLocation;
            var html = 'Google ClientLocation: <br><font size="+1">' + cl.address.city + ', ' + cl.address.region+ '<br> ' + cl.address.country+'</font><br>('+cl.latitude+','+cl.longitude+')'; 
            var point = new GLatLng(cl.latitude, cl.longitude);
            if(!marker) {
            map.setZoom(12);
            marker = new GMarker(point,{title: "Click to get address", draggable: true});
            map.addOverlay(marker); 
            added = 1;
            }
            map.setCenter(point);
            marker.setPoint(point);
            marker.openInfoWindowHtml(html);
        }
    }

    function draw_point() { 
        GEvent.addListener(map, 'click', function(overlay, point) {
            if (point && !added) {
                marker = new GMarker(point, {icon:G_DEFAULT_ICON, draggable: true, title: "Click to get address"});             
                map.addOverlay(marker);
                added = 1;
                GEvent.addListener(marker, "dragend", function(){
                    write_point();
                }); 
            }
            else if (point && added) {
                marker.setPoint(point); 
            }
            write_point();
            get_address();
        });

    }

    function showAddress(address) {
      geocoder.getLatLng(
        address,
        function(point) {
          if (!point) {
            alert(address + " not found");
          } else {
            map.setCenter(point, 11);
            if(!marker) {
                marker = new GMarker(point, {icon:G_DEFAULT_ICON, draggable: true, title: "Click to get address"});             
                map.addOverlay(marker); 
                get_address();
                added = 1;
            }
            marker.setPoint(point); 
            write_point();
            }
        }
      );
    }

    function showLat49Ads(){
        Lat49.initAds(19);
        var center = map.getCenter();
        var lat = center.lat();
        var lng = center.lng();
        var zoomlevel = Lat49.Tile.convertGMap2Zoom(map.getZoom());
        Lat49.updateAdByLatLon("lat49ads", lat, lng, zoomlevel);
    }

    function load(){

        map = new GMap2(document.getElementById("map"),{draggableCursor: 'crosshair', draggingCursor: 'crosshair'});
        map.addControl(new GSmallZoomControl());
        map.addControl(new GMenuMapTypeControl(),new GControlPosition(G_ANCHOR_TOP_LEFT, new GSize(61,7)));
        map.addMapType(G_PHYSICAL_MAP);
        map.addControl(new GOverviewMapControl());
        var boxStyleOpts = { opacity: .2, border: "2px solid yellow" };         
        var otherOpts = {
          buttonHTML: "<img src='zoom-control-inactive1.png' title='Drag Zoom' />",
          buttonZoomingHTML: "<img src='zoom-control-active1.png' title='Drag Zoom: Cancel' />",
          buttonStartingStyle: {width: '15px', height: '15px'},
          overlayRemoveTime: 0 };
        map.addControl(new DragZoomControl(boxStyleOpts, otherOpts, {}), new GControlPosition(G_ANCHOR_TOP_LEFT, new GSize(25,7)));
        map.setCenter(new GLatLng(37.35, -121.93), 12);

        draw_point();
        showLat49Ads();
        GEvent.addListener(map, "moveend", showLat49Ads);
     }
    //]]>
    </script>       
  </head>
  <body onload="load()" onunload="GUnload()">
    <table width="100%" height="100%" style="width:100%; height:100%">
        <tr style="vertical-align:top">
            <td style="width:320px">
                <table><tr>             
                </tr></table>
            </td>
            <td>
            </td>
            <td align="right">
                <nobr>
                  <form action="#" onsubmit="showAddress(this.address.value); return false">
                    <input type="text" size="30" name="address" value="Chicago, IL" />
                    <input type="submit" value="Go!" />
                  </form>
                </nobr>    
            </td>
        </tr>  
        <tr>
            <td valign="top">
                <div style="width:300px;font-size:8pt"><h1>GeoCoder</h1>Click on the map or search a place to add a marker and drag marker around to get marker position coordinates. Click on marker to get approximate address.</div>
                <br><span style="font-size:8pt"><b>Coordinates (lat, lng):</b> [for GLatLng]</span><br>
                <input type="text" size="30" id="coord" onclick="this.select()"/>
                <br><br><span style="font-size:8pt"><b>Coordinates (lng, lat):</b> [for KML]</span><br>
                <input type="text" size="30" id="kml" onclick="this.select()"/>
                <br><br><span style="font-size:8pt"><b>Coordinates (lat="x.xx" lng="x.xx"):</b></span><br>
                <input type="text" size="30" id="attribute" onclick="this.select()"/>
                <br><br><span style="font-size:8pt"><b>Coordinates (&lt;lat&gt; &lt;lng&gt;):</b></span><br>
                <textarea rows="2" cols="24" id="latlng" onclick="this.select()" ></textarea>               
                <br>
                <br>    
                    <script type="text/javascript"><!--
                    google_ad_client = "pub-2773616400896769";
                    /* maptools_300x250_01 */
                    google_ad_slot = "1034665593";
                    google_ad_width = 300;
                    google_ad_height = 250;
                    //-->
                    </script>
                    <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
                    </script>   
            </td>       
            <td colspan="2" width="100%" height="100%">
                <div style="position:relative;width:100%;height:100%">
                    <div id="lat49ads" lat49adposition="top-right" 
                        style="position:absolute;top:7px; right:4px; width:125px; height:133;z-index:99999;"></div>             
                    <div id="map" style="width:100%;height:400px;min-height:400px;border:1px solid #999;"></div>
                </div> 
            </td>
        </tr>
    </table>
  </body>
</html> 
```

如果有人对我之前发布的代码有任何想法，请发表评论。

谢谢

# php - 如何在给定节点下选择 SQL 层次结构中的所有叶节点？

> ID：378608
> 
> 赞同：0
> 
> 时间：2008-12-18T17:41:31.183
> 
> 标签：php, sql, hierarchy

我有一组模拟类别层次结构的数据。根类别包含一组顶级类别。每个顶级类别都包含一组子类别。

每个子类别都有一组组织。给定的组织可以出现在多个子类别中。

此层次结构的叶节点是组织。一个组织可能出现在多个子类别中。

数据存储在三个 SQL 表中：

```
organizations
organization_id organization_name
1               Org A
2               Org B
3               Org C
4               Org D
5               Org E
6               Org F

categories
category_id parent_id category_name
0           NULL      Top Level Category
1           0         First Category
2           0         Second Category
3           1         Sub Category A
4           1         Sub Category B
5           1         Sub Category C
6           2         Sub Category D

organizations_categories -- Maps organizations to sub_categories
organization_id category_id
1               3
2               3
2               6
3               4
4               4
5               4
6               5
6               4
7               6
8               6 
```

我希望能够选择给定类别或子类别下所有独特组织的列表。

我现在这样做的方式包括首先确定已请求哪些子类别，然后循环遍历代码中的每个 sub_category 并执行选择以将所有组织映射到该类别。每个选择的结果都附加到一个数组中。只要组织出现在多个子类别中，此数组就会包含重复项。

我很想用一个查询替换这个 kludge，该查询可以有效地选择一个不同组织的列表，给定层次结构中一个类别的 id。

我正在使用 PHP 和 MySQL 开发这个解决方案。

感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T17:52:06.747

假设您的层次结构总是正好 3 级深：

```
SELECT DISTINCT
     O.organization_id,
     O.organization_name
FROM
     Categories CAT
INNER JOIN Categories SUB ON
     SUB.parent_id = CAT.category_id
INNER JOIN Category_Organizations CO ON
     CO.category_id = SUB.category_id
INNER JOIN Organizations O ON
     O.organization_id = CO.organization_id
WHERE
     CAT.category_id = @category_id 
```

您可以将其修改一级以允许您传递子类别 ID。如果您当时不知道您是否有类别 ID 或子类别 ID，那么您可以执行以下操作：

```
SELECT DISTINCT
     O.organization_id,
     O.organization_name
FROM
     Categories CAT
LEFT OUTER JOIN Categories SUB ON
     SUB.parent_id = CAT.category_id
INNER JOIN Category_Organizations CO ON
     CO.category_id IN (CAT.category_id, SUB.category_id)
INNER JOIN Organizations O ON
     O.organization_id = CO.organization_id
WHERE
     CAT.category_id = @category_id 
```

如果您的层次结构可能具有未知数量的级别（或者您认为将来可能），请查看[Joe Celko 的 Trees and Hierarchies in SQL for Smarties](https://rads.stackoverflow.com/amzn/click/com/1558609202)以了解对层次结构进行建模的替代方法。无论如何，这样做可能是个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-13T10:30:13.603

不确定您的数据模型是否允许，但您可以使用单个索引列和二叉树轻松将此信息存储在单个“组织树”表中。还有一个好处是您使用单个查询而无需修改在类别、子类别或组织级别进行搜索（例如，给我 X 子类别的所有结果）

希望这可以帮助。

亚当。

# java - 我可以根据要注释的字段的类型生成编译时错误吗

> ID：378616
> 
> 赞同：7
> 
> 时间：2008-12-18T17:45:12.110
> 
> 标签：java, annotations

我编写了一个如下所示的 java 注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)  // can I further limit this to only fields of type DomainObject?
public @interface Owns {
} 
```

短暂环顾四周后，我看不出是否有办法进一步限制此注释的使用，以便只能注释特定类型的字段。这个注解是为我们的领域定制的，只能在我们的基础领域对象类的实例上使用。

有谁知道如何在编译时强制执行？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T18:47:05.683

[您可能会在注释处理器](http://java.sun.com/javase/6/docs/api/javax/annotation/processing/Processor.html)中发出错误（如果您想要 Java 5 支持，则必须使用[私有 API ）。](http://java.sun.com/j2se/1.5.0/docs/guide/apt/GettingStarted.html)您可以使用从传递给 init的[ProcessorEnvironment获得的](http://java.sun.com/javase/6/docs/api/javax/annotation/processing/ProcessingEnvironment.html)[Messager 。](http://java.sun.com/javase/6/docs/api/javax/annotation/processing/Messager.html)

这有多有效可能取决于您的工具链。如果您使用[javac](http://java.sun.com/javase/6/docs/technotes/tools/)通过命令行或通过构建脚本进行编译应该没问题。在我的 Eclipse 版本中，我必须为项目手动启用注释处理器（通过项目设置），并且错误没有出现在任何明显的地方。（如果您想提供自定义支持， [JDT](http://www.eclipse.org/jdt/)注释插件确实具有允许与 IDE 更好集成的扩展点。）检查常用工具是值得的，特别是如果您需要支持任意开发环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T17:49:48.467

我相信这在编译时是不可执行的——如果你想确保它不在任何不合适的字段上，你必须在运行/加载时检查。

# asp.net - 使用 EQATEC Profiler 分析 ASP.NET 网站

> ID：378617
> 
> 赞同：79
> 
> 时间：2008-12-18T17:45:12.330
> 
> 标签：asp.net, profiling, eqatec

我正在寻找一个免费的 ASP.NET 分析器，我偶然发现了[EQATEC Profiler for .NET](http://www.eqatec.com/tools/profiler)，但我找不到任何关于如何用它分析 ASP.NET 项目的说明。请发布分步说明或包含足够信息的链接。

我正在使用 Visual Studio 2008 Professional 和 .NET 3.5。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2010-06-10T13:15:50.740

自从 Pavel 的说明发布以来，他们似乎已经更改了用户界面。这是我为我的团队写的说明。他们替换了 Pavel 帖子中的步骤 4-8。

要使用 EQATEC 分析 ASP.NET 应用程序，只需在应用程序路径设置中选择应用程序的 bin 文件夹。

然后，单击表单底部的 Build 按钮。

然后，加载您的应用程序并转到您要分析的页面。转到运行选项卡，然后单击重置计数器按钮。

然后，执行您要分析的操作。完成后，单击拍摄快照按钮。

完成后，快照报告将出现在底部列表中。您可以双击它来查看它。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2009-06-02T00:52:17.107

这应该适用于 ASP.NET Web 项目：

1.  编译你的项目。
2.  启动网络应用程序。您可以右键单击 Visual Studio 中的某个 .aspx 文件，然后选择“在浏览器中查看”。（如果您稍后启动您的应用程序，您可能会覆盖已分析的 DLL。）
3.  启动 EQATEC Profiler。
4.  在 Build 选项卡上浏览到项目的 bin 文件夹。
5.  单击“应用程序选项”按钮
    *   仅将输出文件夹设置为 $(AppDir)。
    *   取消选中“普通应用程序”。
6.  单击构建按钮。
7.  切换到您喜欢的浏览器。导航到您要配置的页面。您应该在 EQATEC Profiler 的 Run 选项卡中获得“Profiled app started”条目。
8.  单击“拍摄快照”按钮。一个新条目应出现在“查看快照报告”列表中。选择它并单击查看按钮。

编辑：根据评论更新说明。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-12-18T18:20:57.077

来自 EQATEC 论坛：

*   [ASP.NET？](http://www.eqatec.com/forum/profiler/bugs-problems/905006992/#903912541)
*   [跟踪 asp.net 网络应用程序](http://www.eqatec.com/forum/tracer/general-discussion/587914964/#42616725)
*   [分析 Web 应用程序](http://www.eqatec.com/forum/profiler/bugs-problems/350359133/#789976522)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-08-10T13:31:17.203

您可能需要获取站点的编译版本（bin 文件夹中是否有站点的 dll 或只是依赖项？）。最简单的方法是发布它。（只需右键单击 Visual Studio 中的站点）。那么 Pavel 的回答就可以了。

# c# - 如何从 RadioButtonList 中获取选定的值？

> ID：378620
> 
> 赞同：35
> 
> 时间：2008-12-18T17:46:33.513
> 
> 标签：c#, asp.net

我的页面上有一个 RadioButtonList，它是通过数据绑定填充的

```
<asp:RadioButtonList ID="rb" runat="server">
</asp:RadioButtonList>
<asp:Button Text="Submit" OnClick="submit" runat="server" /> 
```

如何获取用户在我的“提交”方法中选择的单选按钮的值？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2008-12-18T20:53:44.383

ASPX 代码将如下所示：

```
 <asp:RadioButtonList ID="rblist1" runat="server">

    <asp:ListItem Text ="Item1" Value="1" />
    <asp:ListItem Text ="Item2" Value="2" />
    <asp:ListItem Text ="Item3" Value="3" />
    <asp:ListItem Text ="Item4" Value="4" />

    </asp:RadioButtonList>

    <asp:Button ID="btn1" runat="server" OnClick="Button1_Click" Text="select value" /> 
```

以及背后的代码：

```
protected void Button1_Click(object sender, EventArgs e)
        {
            string selectedValue = rblist1.SelectedValue;
            Response.Write(selectedValue);
        } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-12-18T17:50:40.383

使用您的单选按钮的 ID，尝试`rb.SelectedValue`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T15:58:00.573

从技术上讲，答案是正确的，但还有一个潜在的问题。 `string test = rb.SelectedValue`是一个对象，而这种隐式转换有效。如果您将其发送到另一种方法（并且授予这可能取决于框架的版本，我不确定）它可能无法更正，它可能无法识别该值。

```
string test = rb.SelectedValue;  //May work fine
SomeMethod(rb.SelectedValue); 
```

where`SomeMethod`期望字符串可能不会。

可悲的是，这`rb.SelectedValue.ToString();` 可以节省一些意想不到的问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-08-22T17:56:04.740

```
string radioListValue = RadioButtonList.Text; 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2015-12-12T10:47:55.193

`radiobuttonlist.selected <value>` 使用您的代码进行处理。

# php - 从 cer 文件中提取公钥以在 nusoap 中使用

> ID：378622
> 
> 赞同：2
> 
> 时间：2008-12-18T17:46:56.867
> 
> 标签：php, web-services, certificate, nusoap

有人能告诉我如何从 .cer 文件中提取 .pem 格式的公共 keu 吗？我正在尝试使用 nusoap 通过 https 配置 web 服务。

Tks，教育署

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T18:03:35.303

```
openssl x509 -inform der -in <certificate> -noout -pubkey 
```

应该打印出公钥。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T17:58:51.227

每当我需要转换证书格式时，我都喜欢跳上我的 Linux shell 并使用 openssl CLI。

查看[此页面](http://shib.kuleuven.be/docs/ssl_commands.shtml)以了解常见的 openssl 命令。您将对标题为“将 DER (.crt .cer .der) 转换为 PEM”的文章最感兴趣。

# java - 使用 Java 在 Windows 上枚举 USB 设备

> ID：378625
> 
> 赞同：1
> 
> 时间：2008-12-18T17:47:11.920
> 
> 标签：java, windows, usb

在之前的 SO question 中，提到可以在 Windows 中使用以下方法安装 USB 设备：

MOUNTVOL C:\USB: \\?\卷{ebc79032-5270-11d8-a724-806d6172696f}\

我的问题是以 \\?\Volume 开头的字符串是什么，以及检索它的最佳方法是什么。如果可能的话，我宁愿不使用 .NET，因为据我所知，如果不将 .NET 运行时物理地安装在机器上，就无法真正“捆绑”它。

如果可能的话，我也会对使用 JNA 感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T19:36:40.513

您也不能捆绑 Java“...运行时而不将其物理安装在机器上...”。

安装后枚举设备应该很简单。实际上安装设备不应该是简单的，因为 Java（和 .NET）都是为了抽象硬件而设计的。

我建议您为此选择更合适的工具。要么选择简单地调用另一个进程来运行 mount 命令（知道它不会是可移植的），要么选择一个不会抽象出硬件的工具，或者至少不那么抽象（也许是 Python？）。

编辑：关于 JVM 安装的说明...

很好的一点——JVM 安装比 .NET 安装侵入性要小得多，因为后者必须与操作系统集成，而前者只能与操作系统集成。所以，是的，包括私有 JVM 安装是可行的，也许是可取的。

注意：该问题包括 USB 设备的挂载命令，该命令倾向于强调该方面是主要要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T20:49:08.887

您在寻找什么样的 USB 设备？您引用的位仅适用于 USB 磁盘驱动器，而不适用于一般的 USB 设备。

# design-patterns - DCI - 数据、上下文和交互 - MVC 的继任者？

> ID：378629
> 
> 赞同：38
> 
> 时间：2008-12-18T17:48:26.037
> 
> 标签：design-patterns, dci

向组织推销[数据、上下文和交互 (DCI)](http://www.gertrudandcope.com-a.googlepages.com/thedciarchitecture)的最佳描述是什么？

它由[MVC 模式的创建者](http://en.wikipedia.org/wiki/Model-view-controller)[Trygve Reenskaug](http://folk.uio.no/trygver/)创建。

它真的是 MVC 的继承者还是只是另一种模式？它的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2010-08-27T05:48:56.867

Trygve 在[https://vimeo.com/8235394中介绍了 DCI](https://vimeo.com/8235394)

创建 DCI 是为了解决面向对象的问题：审查 OO 代码太难了。

OO 中一个用例的代码通常分布在许多类之间。要了解代码的工作原理，您还必须了解运行时对象之间的关系。这些关系不是在代码中设置的，它们取决于情况。

DCI 建议将给定用例的代码从类中分离出来并放入称为上下文的不同工件中。不同类的对象可以在此上下文中建立关系，并在它们具有不同角色的情况下参与交互。

DCI 的全部意义在于使 OO 代码更具可读性！

我就是这样推销它的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-03-21T17:01:58.140

我得到的印象是，它与其说是 MVC的*继承者，不如说是一种**补充*，例如[关于 DCI 的 artima 文章](http://www.artima.com/articles/dci_vision.html)中的图 5两者都有。我认为它应该有助于使模型和控制器之间的区别更加清晰，或者可能在控制器的不同部分或模型的不同部分之间进行区分。

基本思想似乎是为您的数据类中的特定操作拆分逻辑，并将其移动到特征/混合/无论如何，每个（用户）操作一个。您将拥有许多小段代码，而不是几段大段。此外，听起来添加新的 mixins 应该比向基类添加功能“更好”。单个动作的代码可能（我认为？）更加分散，但不同动作的代码应该更加清晰和明显地分开。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-03-14T12:23:59.170

一个好问题和一个经常出现的问题。简短的回答是，它本身就是基于 Kay、Dahl 和其他人的 OO 创始思想的范例。正如您所注意到的，它是由 Trygve Reenskaug 创建的，并考虑了几个目标。其中一个目标是使 IO 操作成为该计划的一等公民。（不是磁盘操作中的 IO，而是两个不同对象之间的所有通信）。DCI 的另一个重要目标是将系统的功能（功能/行为）与系统的功能（数据）分开

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-21T00:39:24.300

我认为改进的系统理解对任何组织来说都是一个巨大的胜利，但是由于以下其他因素，您也可以证明 DCI 是对 MVC 的改进：

1.  干净地分离系统行为和数据为数据聚合活动提供了许多好处，包括由于域对象的占用空间更小而带来的更高性能的实时分析。
2.  当数据对象和行为对象有自己的住所而不是像随机放置在系统中混合数据/行为对象的子集一样时，它们在功能部门之间的重用要容易得多。
3.  随着 BDD 正在成为事实上的敏捷方法，该组织将在此实践中领先于行业的其他公司，并可能成为其他志同道合的组织的榜样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-04-05T13:21:45.010

在我看来，它完全是 Andrei Alexandrescu 在现代 C++ 设计中的基于策略的设计，但是这项工作更底层，DCI 看起来像一个带有部分方法的架构（用例驱动设计）。

# c++ - 在 DLL 中指定 C++ 导出函数的序数

> ID：378630
> 
> 赞同：0
> 
> 时间：2008-12-18T17:48:35.037
> 
> 标签：c++, dll, export

我正在编写一个带有混合 C/C++ 代码的 DLL。我想指定要导出的函数的序数。所以我创建了一个看起来像这样的 .DEF 文件

```
LIBRARY LEONMATH

EXPORTS

    sca_alloc   @1
    vec_alloc   @2
    mat_alloc   @3

    sca_free    @4
    vec_free    @5
    mat_free    @6

    ... 
```

我也想指定我的 C++ 函数和类方法的序数。我尝试使用 Dependency Walker 将我的函数的错位名称添加到 .DEF 文件中：

```
 ??0CScalar@@QAE@XZ      @25
    ??0CScalar@@QAE@O@Z     @26
    ??0CScalar@@QAE@ABV0@@Z @27
    ??1CScalar@@QAE@XZ      @28 
```

但这失败了。任何想法为什么会发生这种情况？

* * *

**编辑：** kauppi 做了一个很好的观察，所以我在这个问题中添加了更多信息。

*   **平台：** Windows（我对可移植性不感兴趣）
*   **编译器：**微软的C++编译器（我用的是VS2005）
*   **我为什么要这样做？：**使用序数的好处是可以让我从 C 代码中调用导出的 C++ 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T18:29:16.407

好吧，我没有使用序数的经验（看起来像一些丑陋的、特定于编译器的东西），但我可以帮助您使 C++/C 代码兼容。

假设在 C++ 中，您的头文件如下所示：

```
class MyClass
{
    void foo(int);
    int bar(int);
    double bar(double);
    void baz(MyClass);
}; 
```

您可以通过执行以下操作使其与 C 兼容：

```
#ifdef __cplusplus
#define EXTERN_C extern "C"
// Class definition here; unchanged
#else
#define EXTERN_C
typedef struct MyClass MyClass;
#endif

EXTERN_C void MyClass_foo (MyClass*, int);
EXTERN_C int MyClass_bar_int (MyClass*, int);
EXTERN_C double MyClass_bar_double (MyClass*, double);
EXTERN_C void MyClass_baz (MyClass*, MyClass*); 
```

在 C++ 源文件中，您只需定义各种`extern "C"`函数以传递给所需的成员函数，如下所示（这只是一个；其余的工作类似）

```
extern "C" void MyClass_foo (MyClass* obj, int i)
{
  obj->foo(i);
} 
```

然后，代码将具有 C 接口，而根本无需更改 C++ 代码（头文件中的声明除外；但这些也可以移动到另一个文件`"myclass_c.h"`等）。所有声明/定义的 extern "C" 函数都不会被破坏，因此您可以轻松地对它们进行其他操作。您可能还需要函数来构造/销毁 MyClass 的实例（当然，您可以为此使用`new`/ ）。`delete`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T18:48:08.193

您说“使用序数的好处是让我可以从 C 代码中调用导出的 C++ 函数。” ，很抱歉，这是不正确的。

C++ 类成员函数具有特殊的调用约定，它需要在特定于实现的寄存器/参数中传递不可见的**this值。**而且您还需要一个类实例来传递，这是您在 C 中无法完成的。

据我所知，它的唯一两种用途是更快的 DLL 动态链接和更小的导入表。只需使用依赖步行器检查 system32 目录中的 mfc70.dll 即可。

# html - IE 在单击按钮元素时发送内部 HTML

> ID：378632
> 
> 赞同：8
> 
> 时间：2008-12-18T17:48:56.003
> 
> 标签：html, internet-explorer, forms, button, input

我的网页中有以下 html（简化）。

```
<button type="submit" name="action" value="ButtonA">Click Here</button> 
```

在 Firefox 中，它提交“ButtonA”作为“action”表单值的值。但是，在 IE7 中，它会提交“单击此处”。有没有办法解决这个问题？我不想使用输入标签，因为我需要能够自定义文本而不影响发送回表单的值（本地化）。基本上，我希望能够拥有多个具有相同名称的按钮，并根据它们的值，在提交时执行不同的操作。在这种情况下，让 IE 正确运行有什么简单的方法吗？

[更多的]

也许我应该更清楚，但我不能使用

```
<input type="submit" name="Action" value="ButtonA"> 
```

因为我需要能够更改为本地化规则显示的文本，而不影响随表单提交的按钮的实际值。

[更多的]

更详细地说，基本上，我希望按钮能够根据语言说“保存”或“Sauver”，但不会更改提交给服务器的值。我还希望有多个具有相同名称的按钮，并根据值做某事，而不是依赖于按钮名称，并测试该按钮是否有值。代码已经从那个角度编写了，我只想能够更改值中显示的文本，而不需要现有的服务器端处理代码。

这是一个很好地[解释问题](http://allinthehead.com/retro/330/coping-with-internet-explorers-mishandling-of-buttons)的链接，并提供了一些可能的解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T17:56:56.143

一种解决方案是使用 Javascript 和隐藏字段

```
 <input type="hidden" name="actionparam" value="DoNothing">
   <input type="button" onclick="OnSubmitForm('ActionA')" Value="Click Here for A" />
   <input type="button" onclick="OnSubmitForm('ActionB')" Value="Click Here for B" />

   function OnSubmitForm(actionname) {
    var f = document.frm;
    f.actionparam.value = actionname;
    f.submit();
 } 
```

这也可以作为隐藏的 CATPCHA，您可以在 javascript 函数中添加一些客户端验证

## 编辑：

既然你说你想降级到非 javascript 浏览器，你可以使用这个版本，它只允许对没有 javascript 的人执行一个默认操作

额外的按钮在 HTML 中被禁用，但随后使用 javascript 重新启用。
测试代码：

```
<html>
<head>
    <script type="text/javascript">
    <!--
    function OnSubmitForm(actionname) {
            var f = document.frm;
            f.actionparam.value = actionname;
            f.submit();
    }
    //-->
    </SCRIPT>
</head>
<body>
   <noscript>
        <div style="background-color: yellow; margin: 20px;" >
            You are using a limited version of the site because you don't have Javascript enabled
        </div>
    </noscript>

   <h1>form</h1>
    <form name="frm" method="post">
    <input type="hidden" name="actionparam" value="DefaultAction" />
    <button name="defaultbutton" type="submit">default action</button>
    <button name="extrabutton1" disabled onclick="OnSubmitForm('ExtraAction1')">Extra action 1</button>
    <button name="extrabutton2" disabled onclick="OnSubmitForm('ExtraAction2')">Extra action 2</button>
    </form>

   <h1>Results</h1>
   <h2>forms collection</h2>
   <ol>
   <%
   For x = 1 To Request.Form.count()
      Response.Write("<li>" + Request.Form.key(x) + "=" + Request.Form.item(x) + "</li>")
   Next
   %>
   </ol>

    <script type="text/javascript">
    <!--
    document.frm.extrabutton1.disabled = false;
    document.frm.extrabutton2.disabled = false;
    //-->
    </SCRIPT>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-17T16:28:20.717

只需要处理 IE6 对`button`元素的精彩实现。该解决方案*确实*依赖于 Javascript，但有些人可能会觉得它很有用。

在 Spring 框架中使用 AbstractWizardController 时特别烦人，因为该`button`元素是向导的“下一步”、“返回”和“完成”按钮的理想解决方案，但在 IE6 中不起作用。

因此，我最终编写了一个基于 jQuery 的小型修复程序（尽管转换它非常简单，因此您不必使用 jQuery 库）。

```
$(function(){
if((window.XMLHttpRequest == undefined) && (ActiveXObject != undefined)) {
    $('button').click( function(event) {
        var rx = /\bvalue ?= ?(".*?"|'.*?')/i;
        var matches = $(this)[0].outerHTML.match( rx );
        if( matches != null )
            $(this).attr( 'value', matches[1].substring( 1, matches[1].length - 1 ) );
        $('button').not( $(this) ).attr('disabled','disabled');
    });
}
}); 
```

这将为所有按钮元素添加一个 onclick 事件。单击按钮时，它将抓取按钮的外层HTML，例如：

```
<button name="playerId" value="34">Walter Payton</button> 
```

并解析出 value 属性。为了获取值似乎很麻烦，但我发现`getAttributeNode('value').value`返回的是 innerHTML 而不是指定的 value 属性，所以不是很有帮助。然后我们将正则表达式的子匹配设置为按钮的值。如果您使用双引号或单引号作为分隔符，它应该匹配它，但*您必须使用某种形式的分隔符*。

这样做的结果是，它实际上不会发布“Walter Payton”，而是发布“34”。缺点是按钮在页面上的外观也会在表单提交之前更改为“34”。

最后，脚本将找到所有按钮元素，除了被点击的元素，并将它们的`disabled`属性设置为禁用。这可确保它们不包含在 POST 中，并且您不会得到误报。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-20T13:09:48.807

使其与输入提交一起使用的通常解决方法是将值转换为多个“名称”属性，例如：

```
<input type="submit" name="submit.buttonA" value="Sausage" />
<input type="submit" name="submit.buttonB" value="Mash" /> 
```

我个人使用的表单层会自动转换，就好像单击了值为“buttonA”或“buttonB”的“提交”控件，但在大多数环境中手动操作应该很容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T21:47:46.113

好消息：微软在 IE8 中修复了这个问题（仅限标准模式）

坏消息：它仍处于测试阶段

这个[jQuery 修复](http://my.opera.com/pp-layouts/blog/2008/10/04/ie6-ie7-button-hack)工作正常，或者你可以破解你自己的 JS 来处理 IE。

至于那些建议通过按钮输入的人，那很好，但如果你想要按钮上的图形或不同的样式，那么按钮是唯一的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-18T22:03:50.653

您在问题中提供的[链接](http://allinthehead.com/retro/330/coping-with-internet-explorers-mishandling-of-buttons)说明 IE6 会在每次提交表单时提交所有按钮，因此无论您使用什么解决方法，您的应用都无法与 IE6 一起使用。我对此进行了测试并验证了 IE6 确实做到了这一点。这意味着如果没有 Javascript，<button> 标签在 IE6 中是无用的，并且考虑到其他限制，它在 IE7 中也受到严重限制。我能想到的唯一非 Javascript 解决方法是将您的 <button> 标签放在主 <form> 之外，以它们自己的形式。您也可以使用 <a> 标记来执行此操作，但我不建议这样做，因为链接始终是 GET 请求，而 GET 请求不应该有副作用，例如修改数据。

```
<div style="float:left">
  <form name="shoppingCart" action="#c" method="GET">
    <input type="hidden" name="item1" value="hat">
    <input type="text" name="item1quantity" value="1"> Hat, red<br>
    <input type="hidden" name="item2" value="scarf">
    <input type="text" name="item2quantity" value="1"> Scarf, red<br>
    <button type="submit" name="button" value="purchase">Buy now!</button>
  </form>  
</div>
<div style="float:right">
  <form name="remove" action="#a" method="GET">
    <input type="hidden" name="item" value="item1">
    <button type="submit" name="button" value="delete1">Remove this item</button>
  </form>
  <form name="remove" action="#b" method="GET">
    <input type="hidden" name="item" value="item2">
    <button type="submit" name="button" value="delete2">Remove this item</button>
  </form>
</div> 
```

使用多种形式的缺点是您可以传输的内容有限；如果用户在上面的表格中更改了数量，当用户点击“删除”时，信息将不会被提交。但是你可以考虑非 JS 用户的优雅降级，并使用 JS 将主窗体中的数据与隐藏窗体中的数据同步。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-12-18T19:07:42.273

我认为你应该重新考虑整个概念。我感觉你的情况是这样的：

*   用户单击保存或取消
*   服务器端，您检查“保存”或“取消”值
*   您基于此执行操作

实际上，保存按钮的值是什么并不重要。例如，在 PHP 中，您可以简单地检查Save 元素中*的*值。无论该值是“Save”还是“Sauver”，您都可以执行保存功能。

如果我离开这里，我很抱歉。让我知道我的假设是否准确。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-12-18T18:00:25.667

正如 Eduardo 所提到的，JavaScript 听起来是您的最佳选择。但是，您需要以某种方式考虑这样一个事实，即如果用户禁用了 JavaScript，您将不会收到适当的值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-18T17:51:07.933

我认为您应该使用 an`<input type="submit" />`而不是`<button>`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-12-18T17:53:13.920

使用`<input>`而不是`<button>`. 否则，这里是[一个不错的基于 jQuery 的 hack 的描述](http://my.opera.com/pp-layouts/blog/2008/10/04/ie6-ie7-button-hack)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-12-19T00:27:06.357

我不知道有什么方法可以让它在 IE7（或 IE6）中运行而不需要 JavaScript（或奇怪的多形式结构）。

后端也不能以某种方式本地化吗？比如说，文本是来自数据库还是只是内联在本地模板中？您应该能够在打印和验证后端表单时检索标签的本地化版本，不是吗（尽管您宁愿只使用不变的值，因为您应该能够做到做）？

总是有 JavaScript 解决方案......

下面是一个概念验证，比现成的 jQuery one-liner 需要一些调整，但它应该可以在不需要更改任何 HTML 的情况下工作：

```
<!doctype html>
<html>

<head>

<title>Fix Buttons in IE6</title>

<script type="text/javascript">
function fixButtons() {
    var btns = document.getElementsByTagName('button');

    for (var i = 0; i < btns.length; i++) {
        btns[i].onclick = fixValue;
    }
}

function fixValue() {
    var btns = document.getElementsByTagName('button');

    for (var j = 0; j < btns.length; j++) {
        if (this == btns[j]) {
            this.value = this.getAttributeNode('value').value;
        }
        else {
            btns[j].parentNode.removeChild(btns[j--]);
        }
    }
}
</script>

</head>

<body onload="fixButtons()">

<form action="" method="get">
    <button type="submit" name="action1" value="value1">Do Action 1</button>
    <button type="submit" name="action2" value="value2">Do Action 2a</button>
    <button type="submit" name="action2" value="value3">Do Action 2b</button>
</form>

</body>

</html> 
```

如果它只需要在 IE7 中工作，而不在 IE6 中工作，则该`fiXValue()`功能可以简化为：

```
this.value = this.getAttributeNode('value').value 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-09-03T10:09:14.097

查看这个使用 IE 行为（即 javascript）巧妙地解决问题的[ie-button-fix项目。](http://code.google.com/p/ie-button-fix/)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-02-13T01:29:19.723

一个不使用 javascript 的简单解决方法是：

```
<button type="submit" name="action" value="ButtonA" onclick="this.value='ButtonA'">Click Here</button> 
```

# c# - 在 CompositeControl 中公开 OnSelectedIndexChanged 事件

> ID：378638
> 
> 赞同：4
> 
> 时间：2008-12-18T17:50:35.627
> 
> 标签：c#, asp.net, composite-controls

如果我有一个`DropDownList`构成 CompositeControl 一部分的控件，我如何将`SelectedIndexChanged`事件公开给正在使用的 aspx 页面？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T19:57:45.290

有一种更简单的方法是直接通过。

试试这个：

```
 public event EventHandler SelectedIndexChanged
    {
        add { this.TargetControl.SelectedIndexChanged += value; }
        remove { this.TargetControl.SelectedIndexChanged -= value; }
    } 
```

[编辑] 除非你当然需要注入自定义逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T19:04:54.913

这就是你要做的。首先声明一个这样的事件：

```
public event EventHandler SelectedIndexChanged; 
```

然后，在内部，连接到 DropDownList 的 SelectedIndexChangedEvent。在您的事件处理程序中执行以下操作：

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (this.SelectedIndexChanged != null)
            {
                this.SelectedIndexChanged(sender, e);
            }
        } 
```

您真正要做的就是包装原始事件并重新提出它。

编辑：见布赖恩鲁道夫的回答。这实际上是一种非常简单的方法。

# c# - 最快的类型比较？

> ID：378643
> 
> 赞同：7
> 
> 时间：2008-12-18T17:51:20.833
> 
> 标签：c#, types, xna

以下事件可能每帧调用数百次。

```
public bool OnCollision(Body body1, Body body2)
{
 if(body2.Tag is Dog)
      ((Dog)body2.Tag).Bark();
} 
```

我知道使用“is”会导致进行演员表，然后当我想用它做某事时，再次转换它。有没有更有效的方法来检查类型？我制作了一个控制台应用程序尝试“if(body2.Tag.GetType() == typeOf(Dog))”，但它似乎比使用“is”还要慢。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-18T17:55:19.907

```
 if(body2.Tag is Dog) 
```

实际上编译为

```
Dog Temp = body2.Tag as Dog;
if (temp != null) 
```

在您的代码中，您将再次进行演员阵容。更好的是：

```
Dog dog = body2.Tag as Dog;
if (dog != null)
{
    dog.Bark();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T18:12:25.910

我会在 Body 对象上创建一个名为 Collided 的抽象方法：

```
abstract class Body
{
   abstract void Collision(Body other);
}

class Dog : Body
{
   public override void Collision(Body other) {
      this.Bark();
   }

   public void Bark() { ... }
} 
```

然后在您的碰撞函数中，只需在相关物体上调用 Collision 即可。

```
public bool OnCollision(Body body1, Body body2)
{
   body2.Collision(body2);
} 
```

这样，任何类型的主体都可以在发生碰撞时做任何需要的事情，您甚至可以对其进行优化以跟踪哪些主体已收到相互碰撞的通知，并减少您必须执行的函数调用的数量：

```
public bool OnCollision(Body body1, Body body2)
{
   // Record that these two objects have been notified of a collision
   // then when these same objects are the only two operands in subsequent calls
   // you can just short circuit the calls.
   if(!AlreadyNotifiedOfCollision(body1, body2))
   {
      body1.Collision(body2);
      body2.Collision(body1);
      NotifiedOfCollision(body1, body2);
   }
} 
```

当然，必须进行经验测试以验证此检查是否比实际调用两次更快...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T18:12:28.780

这样的方法是否可行或有用？

```
public interface ICollidable
{
    void OnCollision();
}

public abstract class Body : ICollidable
{
    public abstract void OnCollision();
}

public class Dog : Body
{
    public override void OnCollision();
    {
        Bark();
    }
}

public Boolean OnCollision(ICollidable a, ICollidable b)
{
    b.OnCollision();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-28T18:20:22.100

通用碰撞方法怎么样？那么就不需要继承了。只是一个界面。

```
public bool OnCollision<TA,TB>(TA a, TB b)
    where TA : ICollidable
    where TB : ICollidable {
    a.Collision(b);
} 
```

# blackberry - BlackBerry COD 或 ALX 文件可以反编译吗？

> ID：378650
> 
> 赞同：6
> 
> 时间：2008-12-18T17:53:38.240
> 
> 标签：blackberry, java-me, decompiling

如果我为 BlackBerry 编写 Java 软件，是否可以使用类似于[.NET Reflector](http://www.red-gate.com/products/reflector/)的免费工具对其进行反编译，或者它是一个更复杂的过程？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-12-18T18:17:11.017

您为任何语言、任何平台编写的软件都可以被反编译。不管你使用什么代码处理（混淆）工具，它都可以被反编译。

任何担心这一点的尝试都是浪费时间。就像 DRM ;p

但真正的重点是，我希望我有我正在考虑的讨论的链接，因为它非常好。但重点是这个。有人可以反编译它，如果他们只是直接重新编译它并尝试转售它，那有什么意义呢？将他们带到法庭并获胜仍然很容易。

但是您说“他们可以查看我的代码并弄清楚我是如何做到的并重做它！”。对此我说：不要自吹自擂。

想想你是否可以得到 Windows 的源代码。会有很多“他们在这里做什么”？和“男孩，我会以不同的方式做事”。有那么一会儿，你会挠挠下巴，然后“哇，好极了”。但总的来说，这不是你自己不会来的。真正的价值是他们花时间真正解决问题并提出解决方案。

任何盗用您的代码的人都不会这样做。什么更难？编写新软件还是维护软件？我认为大多数开发人员更喜欢前者。

所以有人反编译了你的软件，或者以一种显而易见的方式出售它，你可以轻松起诉，或者他们花时间完全解决问题并设计自己的问题，最终（几年后？）可能会完全和你的不同。

这真是一个荒谬的场景，如果有人通过反编译竞争产品来剽窃产品，我真的很伤心。

不要担心有人“窃取”你的代码。它可以做到，你无法阻止它，但它不会做，因为它很荒谬。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-01-13T14:04:19.490

RIM 的 RAPC 工具将标准 J2ME .jar 文件转换为 .cod 文件——这是一种专有格式，尚未公布其详细信息。已知的是 .cod 文件的大小小于 .jar 文件的大小，并且很多东西都被剥离了（基本上是静态上下文无法访问的任何东西）。

请注意，当 .cod 文件变得足够大时（或者更准确地说，当它们的代码或数据大小变得足够大时），RAPC 会将 .cod 拆分为 2 个或多个单独的 cod（名为 CODNAME-2.cod 等），然后压缩它们并将 .zip 重命名为 .cod。您可以解压缩它，但仍然留下一堆无法反编译的 .cod 文件。

所以一般来说，不，你不能反编译 BlackBerry 应用程序文件。有一个名为[codedec](http://drbolsen.wordpress.com/2008/07/14/coddec-released/)的工具声称能够反编译 .cod 文件，但我没有任何运气。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T17:59:38.557

Java 代码很容易反编译。如果您对保护您的代码感兴趣，请搜索 Java Me 的混淆器。值得注意的是检查[这个](http://www.paxmodept.com/telesto/blogitem.htm?id=436)。

然而，亚当关于你为什么不应该关心的评论也应该被考虑在内。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-12-20T04:37:47.327

RIM 的工具链还通过优化器 (rapc) 运行您的代码，这使得它比标准字节码更难反编译。除非有人专门花费大量时间来反编译它，否则这不太可能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-23T17:00:27.700

If you write a Midlet using pure J2ME and Sun's Compiler, the resulting bytecode can easily be decompiled. (Not that I have ever done this :P). However if you use RIM's BlackBerry JDE and it's RAPC Compiler, your bytecode will be in a proprietary, undocumented format and it's really hard for somebody to decompile that or make any sense of your code.

Be aware though, its always possible to find out hard-coded Strings in an application, so you don't wanna hard code your TripeDES Key or something like that.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-12-23T17:15:47.810

我喜欢 Java 类的 JAD - [http://www.kpdus.com/jad.html](http://www.kpdus.com/jad.html)。

与上述观点相呼应 - 不要担心人们会窃取您的代码。

关于反编译，我最喜欢的两件事：

1.  您将了解编译器如何处理您的代码。例如，您可以验证字符串连接是否由 StringBuilder 类处理。或者，您可能会发现一些发人深省的“for”语句，而不是传统的“for (int i=0, i

2.  你真的可以学习一个产品并扩展它。我使用过 Microsoft OCS2007 语音服务器。我在反编译他们的一些程序集时学到了很多关于产品的知识。我还扩展了一些基本工具以满足我的需求。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-12-18T18:28:02.710

是的，理论上可以，因为它本质上只是 Java 字节码。但是，上次我做 BB 开发时（2 年前），在实践中实际上很难做到。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-12-18T18:01:16.820

几乎所有软件都可以反编译。问题只是实现它所需的参与量和资源。

# svn - 在颠覆中排除具有模式的子目录

> ID：378655
> 
> 赞同：2
> 
> 时间：2008-12-18T17:55:06.083
> 
> 标签：svn

我想在 subversion 中按模式排除子目录，因为我们使用的开发工具正在生成它们。让工具在别处生成目录不是一种选择。我们不想在 ~/.subversion/config 中编辑 global-ignore 属性，因为很难保持与此的一致性。我们试图排除的目录如下所示：

```
rootdir
  |-> dir1
       |-> dirToExclude
  |-> dir2
       |-> dirToExclude 
```

我想在 dir1 和 dir2 中排除 dirToExclude。是否可以在 rootdir 上使用 svn:ignore 而不必将 svn:ignore 添加到 dir1 和 dir2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T18:04:57.767

> 可以在 rootdir 上使用 svn:ignore 来完成

不，`svn:ignore`具体来说*不是*递归应用，而是仅在当前文件夹上应用。由于每个文件夹都有自己的版本信息，因此不会将任何内容传播到子文件夹。参见[红皮书第 7 章，属性](http://svnbook.red-bean.com/en/1.1/ch07s02.html#ftn.id3022585)，脚注 29。

这实际上很不幸。我宁愿`.htaccess`自己有一个类似的属性传播。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2008-12-18T19:30:35.783

您可能会考虑另一种方法。

通常，从源代码管理中排除子目录和/或文件的愿望表明这些子目录和/或文件位于错误的位置——它们应该被移出源代码树。例如，如果它们是构建输出，则重新配置您的构建工具/脚本以将它们放在远离源的单独目录树中。如果它们是生成的文件，请告诉相关工具在其他地方生成它们。

无论这些文件/子目录的目的是什么，您都可以重新配置以将它们移开。在这个过程中，你简化了你的生活，并可能解决/缓解一些其他问题。

如果您的特定工具使这变得非常困难甚至不可能，那么可能是时候重新评估该工具了。

最良好的祝愿。

# .net - 对于 .net 开发人员来说，进入移动开发的学习曲线是怎样的？

> ID：378663
> 
> 赞同：13
> 
> 时间：2008-12-18T17:56:11.653
> 
> 标签：.net, windows-mobile, compact-framework

对于 .net 开发人员来说，进入移动开发的学习曲线是怎样的？

有多少种不同的操作系统运行 .net？

windows mobile 和 windows ce 一样吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-12-18T18:10:17.910

**学习曲线**

我讨厌说“这取决于”，但确实如此，而且取决于几个因素。您的“.NET 开发”经验是什么？请记住，CF 支持 C# 和 VB.NET，因此，如果您是 COBOL.NET 人员，它会比 C# 人员更陡峭。如果您主要在桌面上使用 ASP.NET，那么它会比使用 WinForms 更陡峭。如果您对偶尔连接的场景一无所知，对嵌入式系统一无所知，那将比您这样做更陡峭。

从桌面移动到移动是相当简单的，但 Compact Framework 包含完整框架的一个子集，但它不是一个纯粹的子集。它还包含一些桌面上根本不存在的东西。所以有些东西要学。

然而，更重要的是，您经常需要不同的心态。您没有交换文件。您的内存和存储空间有限。你有睡眠/唤醒。你有更小的分辨率和动态分辨率和纵横比变化。桌面开发人员很少想到这些事情。

**操作系统**

这更直接。只有 Windows CE 平台（有关更多说明，请参阅下一个答案）支持 Compact Framework。还有微框架，但我称它为“嵌入式”而不是“移动”，所以它可能不是你正在考虑的东西（如果我错了，请纠正我）。

**CE 与 WinMo**

对于很多初学者来说，这是一个主要的困惑点。与 XP（为了讨论，不包括 XPe）或 Vista 不同，Windows CE 是一个模块化操作系统。这意味着设备 OEM 可以选择在操作系统中包含或排除几乎任何功能。这意味着没有一个“Windows CE”。想想 Windows Mobile 和 Windows CE 客户。他们采用 CE 并选择可用功能的特定子集。然后他们*将*自己的部分添加到其中（如 WinMo shell、几个 API 等）。这意味着普通 CE 设备可以（并且通常会）拥有 Windows Mobile 设备所没有的东西。这也意味着所有 Windows Mobile 设备都包含普通 CE 设备无法提供的部分。为了让它更有趣，WinMo OEM 甚至可以添加他们自己的东西，

这甚至没有涉及 WinMo 平台本身（专业版、标准版、智能手机版、手机版等）之间的差异。

**其他相关的 SO 问题**

你可能想看看这些：

*   [CF 提示、技巧和陷阱](https://stackoverflow.com/questions/363158/net-compact-framework-tips-tricks-and-gotchas#363197)
*   [WinMo 开发 - 从哪里开始](https://stackoverflow.com/questions/377604/windows-mobile-development-where-to-begin)
*   [WinMo 开发入门](https://stackoverflow.com/questions/68985/getting-started-with-windows-mobile-development)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T18:25:46.040

一个大问题是如何设计 UI。WinCE 似乎仍然假设桌面 3 手用户操作（左、右和鼠标），以及使（要求）用户能够以非模态方式启动一切的事件驱动架构。这在手机上通常效果不佳。忘记下拉菜单。多面板窗口不是很有用。等等等等。你的许多基本设计假设和模式需要重新学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-19T20:15:11.930

不能对已经存在的内容添加太多内容，但我会说，如果您只使用完整框架，您会在很多地方感到惊讶。

*   有真假和断电之分，写涉及系统资源的代码时要记住这一点。
*   性能——天哪，事情很慢，在某些地方可能比你预期的要慢得多。
*   缺少点点滴滴 - 您将不得不在几次重新编写轮子，因为由于空间原因，有些东西没有被移植。我有没有提到 Decimal.Round() 只支持银行家的四舍五入？
*   钥匙...有有限的钥匙。有时您可能希望键执行不同的操作，然后您会记得 WinForm 小部件会拦截键并执行预编程的操作。哦不！
*   P/调用。您习惯免费获得的一些东西将需要 P/Invokes。
*   [GC 不同](http://blogs.msdn.com/stevenpr/archive/2004/07/26/197254.aspx)。如果您想创建一个大型应用程序，可能值得一读。
*   并非所有设备都相同，就像 PC 一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T18:16:34.123

我认为曲线可能在一定程度上取决于您来自哪种 .Net 世界以及您想要进入哪种移动开发领域。例如，如果您是一名 Web 开发人员，并且想要在紧凑的 .Net 框架中使用 Mobile 控件构建一个站点，这可能不像 Web 开发人员尝试编写一个独立的应用程序那样困难，该应用程序的方式发生了变化。事情应该流动。还有一个问题是你想把什么叫做移动开发，因为 iPhone、黑莓、Treo 智能手机和其他一些环境可能在某种程度上具有不同的功能。

您指的是哪个 .Net：版本号以及原始和紧凑的差异不同。

我认为还有另一个答案很好地解决了您的最后一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T21:13:23.393

我认为 .NET 开发背景肯定会有所帮助。两个平台之间存在一些差异，最大的差异在于 Compact Framework 仅提供了 .NET Framework 的一个子集。当您熟悉的某些功能未在 CF 上实现时，从桌面环境转换时，这可能会很困难。

为 Windows Mobile 设备开发时需要注意的其他一些事项：

*   迎合多种屏幕方向、尺寸和分辨率
*   处理器速度限制
*   内存限制/管理
*   UI 设计（您只是没有与桌面相同的屏幕空间）
*   数据输入（手写笔/软输入面板）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-27T03:17:06.447

除了 ctacka 关于各种 OC 版本引起的混乱的评论之外，我还要提到我最初对框架、SDK，尤其是 SQL Server 引擎和客户端的大量 CAB 选项的困难。选项似乎一直在变化，我仍在努力解决所有问题。我在移动开发学习曲线中最陡峭的部分是让开发和运行时环境以及安装过程正常工作。

# asp.net - .net 手风琴给我带来了问题

> ID：378665
> 
> 赞同：0
> 
> 时间：2008-12-18T17:57:00.183
> 
> 标签：asp.net, javascript, ajax, accordion

我有一堆控件，我根据网页中的操作显示、隐藏、启用和禁用它们。一切正常，直到我把它们放进手风琴。现在我无法让 Javascript 能够更新它们的状态。我有一个小例子

这是Javascript

```
 <script type="text/javascript">
  var ctrl = document.getElementById('<%= btmRocp.ClientID %>');

    function ShowPanel(control)
{
    alert('<%= btmRocp.ClientID %>');
    ctrl.disabled = true;
}
</script> 
```

这是手风琴

```
 <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <cc1:Accordion  ID="MyAccordion"
                        runat="Server"
                        SelectedIndex="0"                      
                       >
         <Panes>
            <cc1:AccordionPane ID="accordianPane0" runat=server>
            <Header>Create New Report </Header>
            <Content>a
            <asp:Button ID="Button1"  onmouseup="ShowPanel('') " runat="server" Text="Button" />            
            <asp:Button ID="btmRocp" runat="server" Text="Button" />
            </Content>
            </cc1:AccordionPane>
            <cc1:AccordionPane ID="accordianPane1"  runat=server>
            <Header>Create New Report </Header>
            <Content>b</Content>
            </cc1:AccordionPane> 
            </Panes>

        </cc1:Accordion> 
```

我很想知道我在这里做错了什么，警报会打印出正确的 ID。

如果我在将“this”对象传递给函数的地方做某事，我可以禁用该按钮，但我确实需要它来禁用或隐藏 10 个对象

有人有想法吗？

[http://www.riconllc.com/accordian.zip](http://www.riconllc.com/accordian.zip)上的示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-18T19:07:22.973

Accordion 的默认状态是什么？崩溃了？我不知道手风琴是如何工作的，但我怀疑它正在修改 HTML DOM，使得当页面第一次加载时“btmRocp”实际上并不存在于页面本身上，直到它变为“可见”。也就是说，它可能会根据手风琴状态将控件注入和退出页面。

找出这种行为的最佳选择是插入“调试器”；在适当的时间点将语句添加到您的页面中，以便在这些时间点检查实时 DOM。

```
<textbox id="debugbox" onblur="this.value = eval(this.value);"></textbox> 
```

也是在页面上使用脚本的好方法。

# vb6 - 如何在visual basic 6.0中进行开发和构建

> ID：378669
> 
> 赞同：6
> 
> 时间：2008-12-18T17:58:12.957
> 
> 标签：vb6

我正在寻找构建多个 Visual Basic 项目（所有 dll）的最佳实践。我们有多个项目，我们的最终交付物将是一个 dll。现在，一个项目使用 2 个其他项目，另一个引用另一个项目。项目应该参考vbp文件还是dll？如果他们引用 vbp 文件，如何构建所有项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-29T12:23:09.457

在使用 VB6 几年后，我们的项目往往是这样的结构：

在源文件夹下组织的所有项目源（项目和源）。

```
\project\source
\project\source\project1\
\project\source\project2\
... 
```

一个 bin 文件夹中的所有二进制文件（.dll 和 .exe）。

```
\project\bin\ 
```

所有 .dll 都设置为与单个 bin 目录中的结果文件兼容的二进制文件。

在初始构建以使 binarycomptible 稳定之后，每个非破坏性构建都将通过使用一个简单的命令文件 build.cmd 完成，该文件位于源文件夹上方的文件夹中，可能如下所示：

```
"c:\Program Files\Microsoft Visual Studio\VB98\VB6.EXE" /M .\source\project1\proj1.vbp
"c:\Program Files\Microsoft Visual Studio\VB98\VB6.EXE" /M .\source\project2\proj2.vbp
"c:\Program Files\Microsoft Visual Studio\VB98\VB6.EXE" /M .\source\project3\proj3.vbp
del .\\bin\\*.exp
del .\\bin\\*.lib 
```

构建顺序必须是依赖顺序。

每当发生重大更改时，必须将依赖的 VB 项目引用到新的二进制文件。

在没有破坏性更改的情况下，build.cmd 通常可以完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T18:10:14.510

除非您专门从 VB 外部管理类型库，否则您应该使用项目引用。如果您引用这些文件，并以各种方式修改公共接口，VB 将为类型库中的各个部分生成新的 id，这将导致类型不匹配错误。

您可以使用“保留兼容性”设置来帮助缓解这种情况。确保您至少使用项目级别（如果您使用 COM+，那么您需要基于已编译的 dll 版本的二进制文件）

至于编译，您可以编译一个解决方案文件（我什至安装了 Vb6 已经很长时间了，但我认为它们是 .vbg 文件）。

过去我们使用[Visual Build](http://www.kinook.com/VBP/)以及支持编译解决方案文件的[Visual Make 。](http://www.visualmake.com/vmake/default.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T18:14:28.200

您从最低级别开始分别编译每个项目，并沿着链向上工作。

使用 VB6 构建的大问题通常可以追溯到兼容性问题。修复程序最坏的情况是这样的兼容性问题

构建 A（其中 A 是所有其他参考的一个）

将 A 复制到兼容性目录

构建 B 引用 A

将 B 复制到兼容性目录

构建引用 B 和 A 的 C

将 C 复制到兼容性目录中。

等等。

这是因为 COM DLL 的类型库使用 INCLUDE 来添加它们引用的项目的类型库。您可以使用 Visual Studio 6.0 附带的 OLE 视图工具查看 VB6 COM DLL 的类型库。

很多时候，添加方法或属性会导致 DLL 无法编译，因为设置 Typelibs 的 MS 方法会使它们不兼容二进制。如果在二进制兼容性规则下允许添加，则此操作失败。

90% 的时间都有效的解决方案是始终将最新版本的被引用的 DLL 放在兼容性目录中。

一旦你有了一个好的集合，你就可以让一个自动构建器使用它来自动构建项目。

请注意，仅当您添加其他 DLL 引用的内容并且它们需要保持二进制兼容性时，才会出现此问题。

您需要一个系统来确保每个人都有正确的兼容性 DLL 集来构建。

# history - 软件史上的关键次优决策

> ID：378678
> 
> 赞同：17
> 
> 时间：2008-12-18T18:00:02.097
> 
> 标签：history

在整个软件开发的历史中，有时会发生某些人（通常不为人知，可能是不知情的）做出的事情，在当时看来是一个微不足道的短期决定，改变了编程世界。想到了什么这种性质的事件，我们的行业为减轻痛苦做出了什么反应？

插图（我能想到的最大的一个）：当 IBM 设计最初的 PC 时，决定通过选择具有 8 位可寻址内存的半脑死 8088 来节省几美元的制造成本，而不是16 位选项（8086、680n 等），注定我们要进行 20 年的地址偏移计算。

（作为回应，开始了许多unix平台开发的职业。）

在天平的另一端，有人决定在键盘的左端有一个怪物 Shift Lock 键，而不是 Ctrl 键。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-12-18T18:34:21.247

Paul Allen 决定在 MS DOS 中使用 / 字符作为命令行选项。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-12-18T18:06:21.710

仅为年份字段分配 2 位数字。

缓解措施是在字段溢出之前花费大量金钱和时间来扩展它们并修复代码。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-12-19T03:09:49.397

艾伦·图灵在 42 岁时结束了他的职业生涯。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-12-18T18:49:32.917

Microsoft 决定使用反斜杠而不是正斜杠作为路径分隔符。并且无法虚拟化驱动器号。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-12-18T21:35:46.200

实际上 8088 和 8086 具有相同的内存模型和相同数量的地址位 (20)。唯一不同的是外部数据总线的宽度，8088 为 8 位，8086 为 16 位。

我会说不同操作系统（\n - UNIX，\r\n - DOS，\r - Mac）使用不一致的行尾是一个错误的决定。最终，Apple 通过将 \n 设为 OS-X 的默认值来让步，但 Microsoft 顽固地坚持使用 \r\n。即使在 Vista 中，记事本也无法正确显示使用 \n 作为行尾的文本文件。

这个问题的最好例子是 FTP 的*ASCII*模式，它只是将 /r 添加到从 UNIX 服务器传输到 Windows 客户端的文件中的每个 /n，即使该文件最初包含 /r/n。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2008-12-18T18:48:44.667

C 的设计中有很多次优决策（运算符优先级、愚蠢的 case 语句等），这些决策嵌入在许多语言（C、C++、Java、Objective-C，也许是 C#）的大量软件中- 不熟悉那个）。

我相信丹尼斯·里奇（Dennis Ritchie）说过他很快就重新考虑了优先级，但不会改变它。世界上没有整整三个安装和数十万行源代码。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-12-18T19:13:10.700

决定 HTML 应该用于标记超文本文档以外的任何内容。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2009-01-23T19:20:04.347

Microsoft 决定使用“C:\Program Files”作为应在 Windows 中安装程序的标准文件夹名称。突然间，在命令提示符下工作变得更加复杂，因为那个冗长的位置带有嵌入的空间。你不能只输入：

```
cd \program files\MyCompany\MyProgram 
```

每当目录名称中有空格时，都必须将整个内容用引号括起来，如下所示：

```
cd "\program files\MyCompany\MyProgram" 
```

为什么他们不能直接将其命名为 c:\programs 或类似的名称？

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-12-19T03:09:00.880

Microsoft 决定不在 MS-DOS 中添加类似 *NIX 的执行/不执行文件权限和安全性。我想说的是，如果每个可执行文件都需要在系统上执行（更不用说造成严重破坏）之前都需要标记为可执行文件，那么我们今天拥有的 90% 的 Windows 病毒（和间谍软件）将被消除。

仅这一决定就催生了防病毒行业的诞生。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2008-12-18T22:26:35.507

HTML 作为浏览器显示语言。

HTML 最初被设计为一种内容标记语言，其目标是描述文档的内容，而不会对文档应该如何显示做出过多判断。除了外观对于大多数网页非常重要，对于 Web 应用程序尤其重要之外，这很棒。

因此，我们一直在用 CSS、XHTML、Javascript、Flash、Silverlight 和 Ajax 修补 HTML，以便提供一致的跨浏览器显示渲染、动态内容和 Web 应用程序所需的客户端智能。

您有多少次希望浏览器控制语言一开始就正确完成？

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2008-12-18T18:32:34.527

苹果将​​史蒂夫·乔布斯（第一次）赶下台，由一连串的糖水推销员和毫无灵感的豆类柜台领导。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2008-12-18T19:40:57.807

Gary Kildall 没有与 IBM 达成协议，将 CP/M 86 授权给他们，因此他们不会使用 MS-DOS。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2008-12-18T21:24:14.213

银行等重要网站仍然使用“安全问题”作为忘记密码的人的二级安全措施。问问莎拉佩林，当每个人都可以在维基百科上查找你母亲的娘家姓时，它的效果如何。或者更好的是，找到 Bruce Schneier 写的关于它的博客文章。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2009-02-13T10:23:07.240

EBCDIC，IBM 大型机的“标准”字符集。整理顺序是“疯狂的”（字母表中的字母不连续）。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2008-12-18T18:36:22.553

对 time_t 和 Internet 协议的时间戳使用 4 个字节。

这还没有咬到我们——再给它一点时间。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2009-02-26T00:29:11.280

Netscape's [decision to rewrite their browser from scratch](http://joelonsoftware.com/articles/fog0000000069.html). This is arguably one of the factors that contributed to Internet Explorer running away with browser market share between Netscape 4.0 and Netscape 6.0.

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2008-12-18T21:10:47.080

Lisp 使用名称“CAR”和“CDR”而不是对这些基本功能合理的名称。

* * *

## 回答 #18

> 赞同：4
> 
> 时间：2009-02-26T01:10:03.037

DOS 的 8Dot3 文件名，以及 Windows 采用文件扩展名来确定要启动的应用程序。

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2009-01-23T19:29:07.400

空引用 -[十亿美元的错误](http://qconlondon.com/london-2009/speaker/Tony+Hoare)。

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2008-12-18T18:40:28.660

在计算机上使用 qwerty 键盘而不是 dvorak。

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2008-12-18T19:16:13.783

认为密码将是控制访问的一种巧妙方法。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2009-01-08T00:48:30.247

微软从原始 Mac 复制了快捷键，但使用 Ctrl 而不是 Command 键来执行 Undo、Cut、Copy、Paste 等（Z、X、C、V 等），并在与小指的众多 Ctrl 键职责相比，拇指位置几乎没有任何作用。（现代 Mac 有一个有用的 Ctrl 键（用于终端命令）、*一个*位于拇指位置的 Command 键（用于程序或系统快捷方式）和一个用于输入奇怪字符的 Alt（选项）键。）（请参阅[这篇文章](http://www.roughlydrafted.com/2007/08/11/how-apple-keyboards-lost-a-logo-and-windows-pcs-gained-one/)。）

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2009-01-14T00:52:36.813

以空字符结尾的字符串

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2009-02-22T11:12:34.587

7 位文本。然后用代码页“修复”这个问题。编码问题总有一天会杀了我。

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2008-12-18T19:41:21.813

当唯一的原因是“只是为了与众不同”时，每个使语法不同的语言设计师。我在想 S 和 R，其中注释以 # 开头，_ 是赋值运算符。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2008-12-18T20:17:56.373

决定 Internet 协议中多字节数字的“[网络顺序](http://en.wikipedia.org/wiki/Network_order#Endianness_in_networking)”将是高位字节。

（当时网络的异构性意味着这是一个掷硬币的决定。三十年后，英特尔派生的处理器完全主导了市场，似乎低字节优先是一个更好的选择）。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2008-12-18T21:11:50.603

Netscape 决定在其浏览器中支持 Java。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2009-02-13T09:20:53.070

Microsoft 决定将 Window NT 建立在 DEC VMS 而不是 Unix 上。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2011-01-21T14:20:29.497

不对现代语言强制执行类似 Smalltalk 的一元、二元和关键字方法。它可能是自该功能发明以来发明的最好的自我记录功能。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2008-12-19T03:55:00.833

术语翻译后备缓冲区（应该按照页面缓存或地址缓存的方式称为某些东西）。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-01-08T01:04:34.723

当 Atari 在 1982 年创建并发布电子游戏 ET the Extra-Terrestrial 时，最终只是用游戏填埋了垃圾填埋场......

[![替代文字](https://i.stack.imgur.com/xJAhX.jpg)](https://i.stack.imgur.com/xJAhX.jpg)
[（来源：[wikimedia.org](http://upload.wikimedia.org/wikipedia/en/a/aa/AtariLandfill.jpg)）]

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2009-01-08T09:59:11.773

拥有一个用于[Caps Lock](http://capsoff.org/)而不是 Shift Lock 的键，实际上它是一个 Caps Reverse 键，但使用[Shift Lock](http://www.brainsystems.com/capsunlock/)它可以是可控的。

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2009-02-22T11:15:20.027

这些天我们已经被有用的图书馆所覆盖，但是 Netscape 的那个认为 cookie 到期日期应该是人类可读的白痴应该采取措施，永远不要亲自见到我。

* * *

## 回答 #34

> 赞同：-3
> 
> 时间：2008-12-19T02:59:48.747

重新排列键盘上的字母以降低打字效率，回到最初的机械打字机时代，并将其转移到数字计算机上。

[Qwerty的历史](http://abckeyboard.co.uk/qwerty.htm)

# asp.net - 有谁知道如何摆脱来自我的 .net Web 服务的 jsdebug 请求

> ID：378683
> 
> 赞同：7
> 
> 时间：2008-12-18T18:01:37.477
> 
> 标签：asp.net, web-services

我们的 Web 表单站点中有一个用于预先输入文本字段的 ajax 列表提供程序。现在每个页面都请求一个没有缓存参数等的 listprovider.asmx/jsdebug。

我们如何关闭它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-22T15:33:23.790

您需要确保在 web.config 中将 debug 属性设置为 false，它是 system.web 中编译元素的一部分。

希望有帮助...

史蒂夫

# winforms - 帮我分析这个调用堆栈，看看是什么调用了我的方法

> ID：378691
> 
> 赞同：0
> 
> 时间：2008-12-18T18:03:57.457
> 
> 标签：winforms, analysis, callstack

好的，所以我有一个非常简单的表单，其中几乎没有逻辑，由演示者控制。有一个方法 public void Reset() 将表单重置为其初始状态。这应该只由演示者调用，并且在非常特殊的情况下（例如活动超时）。我遇到了一个问题，尽管在一些边缘情况下（例如，当我模拟我的应用程序失去数据库连接时） Reset() 方法在不应该被调用的时候被调用，我无法弄清楚是什么.

所以我在 Reset() 方法中设置了一个跟踪点并让它打印调用堆栈。奇怪的是，这引发了更多的问题。谁能帮我弄清楚对 Reset() 的调用来自哪里？我的调用堆栈在下面。

我应该解释的一件事是 DriverInterface2.UI.WinForms.NonInheritingForms.CheckInForm 您可以在调用堆栈中看到。这是 ICheckInForm（相关接口）的一个非常简单的实现，只需创建 CheckInForm 并将其委托给它。它存在只是因为我使用的是城堡温莎，并且连接从 Form 继承的类变得非常混乱。无论如何，该方法的全部内容是这样的：

```
public void Reset() {_form.Reset();} 
```

这是调用堆栈：

```
Function: DriverInterface2.UI.WinForms.CheckInForm.Reset(), 
Thread: 0xA96F4 Main Thread, 
Caller: DriverInterface2.UI.WinForms.NonInheritingForms.CheckInForm.Reset, 
Callstack:  DriverInterface2.UI.WinForms.dll!DriverInterface2.UI.WinForms.CheckInForm.Reset
    DriverInterface2.UI.WinForms.dll!DriverInterface2.UI.WinForms.NonInheritingForms.CheckInForm.Reset
    [Native to Managed Transition]
    [Managed to Native Transition]
    mscorlib.dll!System.Delegate.DynamicInvokeImpl
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackDo
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbackHelper
    mscorlib.dll!System.Threading.ExecutionContext.runTryCode
    [Native to Managed Transition]
    [Managed to Native Transition]
    mscorlib.dll!System.Threading.ExecutionContext.RunInternal
    mscorlib.dll!System.Threading.ExecutionContext.Run
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallback
    System.Windows.Forms.dll!System.Windows.Forms.Control.InvokeMarshaledCallbacks
    System.Windows.Forms.dll!System.Windows.Forms.Control.WndProc
    System.Windows.Forms.dll!System.Windows.Forms.ScrollableControl.WndProc
    System.Windows.Forms.dll!System.Windows.Forms.ContainerControl.WndProc
    System.Windows.Forms.dll!System.Windows.Forms.Form.WndProc
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.OnMessage
    System.Windows.Forms.dll!System.Windows.Forms.Control.ControlNativeWindow.WndProc
    System.Windows.Forms.dll!System.Windows.Forms.NativeWindow.Callback
    [Native to Managed Transition]
    [Managed to Native Transition]
    System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner
    System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop
    System.Windows.Forms.dll!System.Windows.Forms.Application.Run
    DriverInterface2.exe!DriverInterfaceRunner.Program.Main
    [Native to Managed Transition]
    [Managed to Native Transition]
    mscorlib.dll!System.AppDomain.ExecuteAssembly
    Microsoft.VisualStudio.HostingProcess.Utilities.dll!Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart_Context
    mscorlib.dll!System.Threading.ExecutionContext.Run
    mscorlib.dll!System.Threading.ThreadHelper.ThreadStart 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T18:21:22.723

在我看来，一条 Windows 消息正在编组到一个 .NET 事件，并且该事件正在调用您的 Reset 方法。是什么活动，不知道。如果它不是一个事件，那么它可能是一个异步委托。

如果您从 Application.Idle 事件调用 Reset 方法，那可能会解释它。

由于调用是异步的，导致引发异步委托的调用（事件处理程序或其他）不会出现在堆栈中。因此，在系统通过 Windows 消息泵调度委托之前，堆栈可能会从该调用中解开。因此，原始调用者不再存在于堆栈中。

# winforms - 自定义发布/订阅事件和在 Winforms 中构建它 .Net 事件

> ID：378694
> 
> 赞同：0
> 
> 时间：2008-12-18T18:04:40.620
> 
> 标签：winforms, publish-subscribe

我必须设计和实现自己的发布订阅事件以满足动态 UI Winform 设计的要求。是否有任何支持 pub/sub 的 .Net 库可供我比较和改进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T00:58:34.153

为什么不从 MSDN 上的这种[基于列表的发布/订阅模式](http://msdn.microsoft.com/en-us/library/ms752254.aspx)（使用 WCF）开始呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-19T04:05:25.073

其实我走得更远。例如，您可以创建一个 SystemEvent 并将其发布到名称为“Application.UI.TreeInstance.[InstanceName].Node.Clicked”的主题上，并且如果您注册了“Application. *' 或 '应用程序.UI。*' 或 'Application.UI.TreeInstance.[InstanceName].Node.*' 或您将通过多播在您的委托上调用并接收事件的完整主题。您可以根据需要定义的 SystemEvent；它有一个 ValueNamePairCollection 和一个公共接口，可以让您随心所欲地获取数据。您可以注册同步和异步处理，也可以取消注册。我的 UI 元素现在可以处理他们关心的事件，而不必知道是谁发布了它们。如果社区对这样的东西感兴趣，我可以打包代码并使其可用，以便我们大家共享和改进。我已经对其进行了彻底的测试并且可以 100% 运行。我还编写了一些监控 GUI，您可以实时查看发布和订阅以及注册和取消注册的情况。

# sql-server - 是否可以在 Microsoft SQL 2000+ 中的表中添加描述/注释

> ID：378700
> 
> 赞同：33
> 
> 时间：2008-12-18T18:07:09.633
> 
> 标签：sql-server, metadata

是否可以在 Microsoft SQL 2000 及更高版本的表中添加类似“元数据”的描述或注释？

您将如何通过 CREATE TABLE 语句执行此操作？

是否可以在字段中添加描述或评论？

您如何在 MSSQL 2000 中查询此信息？2005 年？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2008-12-18T18:20:40.387

使用扩展属性。例如，要将扩展属性添加到 dbo 模式中的表，您可以使用：

```
EXEC sys.sp_addextendedproperty @name=N'<NameOfProp>', 
@value=N'<Value>' , @level0type=N'SCHEMA',@level0name=N'dbo', 
@level1type=N'TABLE',@level1name=N'<Table>' 
```

您可以更新它们：

```
EXEC sys.sp_updateextendedproperty 
   @name=N'MS_Description', @value=N'My Description' ,
     @level0type=N'SCHEMA',@level0name=N'dbo', 
      @level1type=N'TABLE'
     ,@level1name=N'<YOUR TABLE NAME>' 
```

你可以像这样阅读它们：

```
SELECT *
FROM fn_listextendedproperty (NULL, 'schema','dbo', 'table', '<yourtable>', default, default); 
```

或者

```
SELECT
p.name AS [Name],p.value
FROM
sys.tables AS tbl
INNER JOIN sys.extended_properties AS p ON p.major_id=tbl.object_id AND p.minor_id=0 AND p.class=1
WHERE
(tbl.name=N'<yourtablename>' and SCHEMA_NAME(tbl.schema_id)=N'dbo')
ORDER BY
[Name] ASC 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-08-03T14:17:25.703

您当然可以使用上面提到的 SP 来执行此操作，但是，有一种更简单的方法可以执行此操作，我相信 MGT Studio 应该是您进行这些更改的首选，除非您尝试使用脚本自动化操作。这是如何做到的： [![在此处输入图像描述](https://i.stack.imgur.com/qpxZh.jpg)](https://i.stack.imgur.com/qpxZh.jpg)

1-右键单击表格

2-点击设计

3- 评论如上图

只是为了让你有一个完整的答案，这里有一个更简单的脚本来改变它（与上面的答案相比更简单）：

```
DECLARE @v sql_variant 
SET @v = N'Comment here'
EXECUTE sp_addextendedproperty N'MS_Description', @v, N'SCHEMA', N'dbo', N'TABLE', N'Stack_testing', N'COLUMN', N'testinghere' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T18:09:58.270

大多数工具和人们使用扩展属性来支持这一点。SSMS 使用的通用名称是 MS_Description

有几个内置的存储过程用于创建和读取这些属性，它们会随着时间的推移而改变，因此 SQL 版本之间会有兼容性差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-25T20:41:16.833

不幸的是，这种方法不适用于高负载的生产环境。操作扩展属性的存储过程在目标表上设置排他锁。当它们被执行时，整个表是不可读的。

# xhtml - 防止浏览器插入用户名和密码

> ID：378702
> 
> 赞同：3
> 
> 时间：2008-12-18T18:08:52.033
> 
> 标签：xhtml, browser, credentials

重复[禁用浏览器保存密码功能](https://stackoverflow.com/questions/32369/disable-browser-save-password-functionality)

有没有办法告诉浏览器不要将预先保存的凭据数据插入网站的表单中？

例如，我可能有一个必须先登录的应用程序。我保存了此登录的凭据。

当我现在想在控制面板中创建一个新用户帐户时，浏览器会自动填写名称和密码字段的值，尽管我想创建一个新用户。

有没有办法阻止这种情况发生？感谢您的回答。

编辑：我的意思是浏览器在打开网站时会填写保存的凭据。我的意思不是为该表格提供预先填写的值。但是当我打开网站时，整个文本字段和密码字段都填写了我的数据。我正在寻找执行此操作的 xhtml 方式，因此它与编程相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T18:16:16.433

从这篇较早的帖子中，“自动完成”属性可能是您的朋友：

[禁用浏览器“保存密码”功能](https://stackoverflow.com/questions/32369/disable-browser-save-password-functionality)

# javascript - 使用 javascript 将整个文档复制到 iframe

> ID：378704
> 
> 赞同：3
> 
> 时间：2008-12-18T18:09:56.507
> 
> 标签：javascript, html, iframe

听起来很奇怪，但这就是我试图用 javascript 做的事情（这都是由事件处理程序触发的）：

1.  将页面的内容（最好是整个文档或至少 documentElement 对象）保存到变量中。
2.  创建一个 iframe 并将其插入正文。
3.  将 iframe 的文档替换为保存的文档（这样 iframe 现在与外页具有相同的内容）。
4.  更改外页。

除了替换 iframe 文档的部分外，一切都很花哨。我尝试了很多不同的方法，但都有问题（如下所述）。当页面位于 iframe 中时，我需要事件处理程序、样式、链接等才能正常工作。

是的，我意识到我可以将 iframe 的 src 设置为当前页面的 url，但我宁愿页面不必加载。如果我不能想出一个解决方案，这就是我要做的。

* * *

### 我已经尝试过的事情：

```
var html = iframe.contentWindow.document.importNode(document.documentElement, true);
iframe.contentWindow.documentElement = html; 
```

我收到一条错误消息（“设置只有 getter 的属性”）。

```
var html = iframe.contentWindow.document.importNode(document.documentElement, true);
var idoc = iframe.contentWindow.document;
while(idoc.firstChild) idoc.removeChild(idoc.firstChild);  // remove all children (firefox automatically creates an html element for iframes with no src)
idoc.appendChild(html); // insert a new documentElement 
```

这似乎有效，但不会重新渲染样式，并且事件处理程序不起作用。有趣的是，链接也不起作用，甚至连浏览器的默认样式都没有。也许这是因为 DOCTYPE 没有复制到 iframe？

```
iframe.contentWindow.document.documentElement.innerHTML = document.documentElement.innerHTML; 
```

这与 removeChild/appendChild 方法具有相同的行为。

* * *

似乎如果我可以让浏览器重新呈现样式并重新注册事件处理程序，那么我会很高兴，但我不确定这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T18:24:46.087

关于最后一种方法，也许您正在复制的窗口的 DOM 尚未加载？

至于 Doctype，您可以从头开始重建它并使用 document.write 将其插入到 html 节点之前。

doctype 可以通过 document.doctype 访问，但这只有一个 getter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-09T13:30:16.057

如果你在 iframe 中加载一个空的 html 样板文档会怎么样？在某个文件夹“myFolder/sparePage.html”中创建一个文档，然后执行

```
var myIframe = document.createElement("iframe");
myIframe.style.display = "none";
document.body.appendChild(myIframe);
function myIframeLdd(){
   console.log("myIframe is loaded");
    //....your iframe ready code here
   myIframe.removeEventListender("load",myIframeLdd,false);
}
myIframe.addEventListener("load", myIframeLdd, false);
myIframe.src = "myFolder/sparePage.html"
```

# php - 为什么转义字符 (\) 出现在一个表单域中而不出现在另一个表单域中？

> ID：378716
> 
> 赞同：0
> 
> 时间：2008-12-18T18:15:27.730
> 
> 标签：php, http

我一直在构建一个数据库输入表单。备注有三个字段。它们都是同时建造的。它们具有相同的逻辑和类系统 - 但其中一个在我更新记录时返回转义标记，例如我输入

```
1
2
3 
```

并且更新的记录返回

```
1\r\n2\r\n3 
```

我很困惑，因为另一个返回格式化的文本。你能建议为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T12:34:54.417

正如康拉德所说，你的问题不够清晰。它们都在同一页面上吗？如果不是，两个页面是否相同`DOCTYPE`？

最简单的解决方案是不管`addslashes`（或`mysql_real_escape_string`）对于`INSERT`s 和`UPDATE`s 以及`stripslashes`对于`SELECT`s 来处理它。

您必须处理的另一种情况是`POST`出现错误的页面（例如，重新填充了帖子值）。您必须确保该`POST`值是斜线的“剥离”版本，否则您将加倍添加斜线；因此，只有在您完成所有后验证和验证后才添加斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:20:17.890

实际上，您的问题缺少很多关键信息。显然，如果一切都以相同的方式完成，那么数据也将相同。此外，您可能并不是说您的数据中有转义标记（或者是吗？）。在这种情况下，您必须显式调用一个函数来将换行符转换为包含字符`'\'`和的字符串`'n'`。

缺少任何代码，我假设您以不同的方式显示数据；一次使用普通`echo`，一次使用类似`var_dump`.

# .net - 应对快速变化的技术（尤其是 Microsoft）

> ID：378724
> 
> 赞同：38
> 
> 时间：2008-12-18T18:19:06.473
> 
> 标签：.net

今天，当我启动 Visual Studio 2008 来完成我的工作时，我在开始页面上看到了一篇关于[Visual Studio 2010 和 .NET 4.0](http://channel9.msdn.com/shows/10-4/10-4-Episode-1-Working-with-the-Visual-Studio-2010-CTP-VPC/)的新博客文章。

我不禁感到有些不知所措。我刚刚开始掌握微软在 .NET 3.0 和 3.5 中添加的所有东西（LINQ、WPF、lambda 函数等）......我知道这些东西不再是新东西，尤其是对于这里的人，但我一直忙于为客户解决实际问题……尽管使用的是 .NET 2.0 等“旧”技术，并且没有时间持续跟上。

抱歉，我的问题是非技术性的，但我认为它与程序员、员工和独立顾问以及软件业务（我希望有一天能开始）非常相关：你如何应对如此快速的变化，并且仍然保持相关性? 您是在需要它之前忽略它，还是尝试保持领先？我很想保持领先并保持相关性（阅读：把我的房子和食物放在桌子上），而不是停留在遗留的东西上，但它看起来就像一个没完没了的跑步机。尤其是对于 MS ......似乎他们有很多钱和人，他们只是不断地推出新的东西......更糟糕的是，使以前的技术过时且不受支持（比如 VB6......我前世的东西）。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-12-18T18:24:31.843

您无需不断更新您的生产工作以使用最新和最先进的技术。但是你应该对外面的东西和正在创造的东西保持了解。会有一段时间开始使用新技术，但这在很大程度上取决于您的项目和时间表。

但在某些时候，你需要继续前进。某些技术变得不受支持。您应该知道何时会发生这种情况，并计划与您的生产工作相匹配的未来。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-18T18:25:52.060

<rant>
就个人而言，我希望微软在发布任何新的小部件、框架或 whizbang thingamajigs 之前先**修复错误。**从 1.1 和早期 2.0 开始，.NET 中仍然存在已知的错误 -*五年或更早的*错误，MS 没有显示修复的意愿。来吧，女士，只需要一年时间来解决问题，然后带来新的东西。
</rant>

从好的方面来说，如果您在使用 MS 的最新产品之前等待一两年（或 SP2，以更长的时间为准），它往往会非常好。

编辑：为了实际提供问题的“答案”，我倾向于了解我需要什么（谷歌是你的朋友！），不要对微软或任何人的最新闪亮小部件感到太兴奋别的。很多时候，它只是全新包装中的相同旧东西。当稀有宝石出现时，很难错过（互联网上的嗡嗡声！）。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-12-18T18:30:43.923

不要用你最喜欢的框架的 10.8 版本的哪些酷炫的功能来衡量你的相关性，你可以把它塞进你的代码中。

您的客户将通过您是否解决他们的问题来衡量您的相关性。他们不知道您是使用 ForEach 而不是 Linq 查询，还是使用委托而不是 lambda 表达式。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-12-18T18:33:56.397

作为一名经理，我积极为我的开发人员寻求使用新技术的机会。我们是一家 .NET 商店，但“跟上琼斯”是我们过去拥有的一些旧政策的范式转变。直到去年，我们仍然使用 1.1 框架来解决所有问题。这是非常痛苦的，既受到旧版本框架的限制，又不得不使用 Visual Studio 2003。

我们开始将业务请求与框架中可用的功能保持一致。在“使用我们当前的基础架构需要十个开发人员天，或者您可以投入五天时间让我们解决我们的框架限制 - 然后这些类型的请求将需要两天”之后，我们不仅被鼓励升级框架，但也要保持最新状态并在可用时采用特性和功能。

虽然微软并不完美，但他们现在确实为其产品的 CTP 提供了极大的可用性，允许人们在游戏中保持领先，只要组织内有时间允许这样做。这些产品也非常适合包含在概念验证项目中。

随着正在取得的进步，无论您可以立即投入多少时间，都很难将它们全部吸收。您需要预先确定哪些特性、功能和工具可以提供最大的积极影响，并专注于此。当您扩大使用范围时，您会惊讶于其他部分开始到位的速度有多快。Lambda 表达式就是一个很好的例子。使用 LINQ 为它们提供了一个合乎逻辑的进展，而不是我们试图实现的重点。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-12-19T03:29:40.793

将近 20 年后，我非常有信心说这是一台无止境的跑步机。嗯，几乎...

您注意到的第一件事是，某些技术比其他技术更持久。一般来说，这是设计得更好的东西，但它并不总是那么一致，有时垃圾会获胜，至少在一段时间内是这样。显然，学习好东西是明智的选择，而忽略其余的。如果我试图学习这些年来出现的每一项技术，我的脑袋就会炸裂，而且很多东西都不值得学习。

你注意到的第二件事是这些东西大部分都被回收了。一遍又一遍地重复同样的废话，只是这一次有一个不同的名字，和一个更新的声音片段。最终，事实证明，做事的方法并不多，尽管它每五年左右重新引入一次，但相同的基本概念浮出水面。我会研究它们，但现在并不值得，我认为现在几乎所有的领先技术实际上只是在过去 20 年中存在的早期版本的旋转。几十年来，该行业没有看到任何真正的创新，它只是以更快的速度生产出更多的东西，仅此而已（好吧，它也有点浮华，但不多）。

第三点也是最重要的一点，就像很久以前告诉我的那样：“这些东西都不起作用！”。这可能是最好的节省时间的方法。那里的很多东西可能很酷并且有潜力，但可悲的事实是，它并没有做足够的广告来使其可用于某些实际应用程序。我们是一个假货行业。这可能是因为意识到制作一个看起来很漂亮的演示真的很容易，但很难制作出能正常工作的东西。随着我们在水中乱扔垃圾越来越多，我们的基础变得越来越弱。因此，学习如何使用其最佳点之外的东西是没有意义的。大多数技术只做一件事，其余的只是炒作。弄清楚那是什么，记住它，但不要

多年来，我不得不跳出不同的语言和不同的操作系统。我的编辑环境已经退化，我用来自动化项目的工具变得更漂亮，更不值得信赖。技术发生了变化，但由于我们已经超过了一些门槛，虽然它们有更多的功能，但它们不再可靠，所以以一种奇怪的方式，它变得更慢、更容易了。过去我们真的必须了解事情是如何运作的，现在你只需将代码放在一起，然后当它表现得很奇怪时责怪别人。

选择一些好的技术，大部分时间都在返回海滩的路上乘风破浪。每五年跳一次，游回来再做一次。运气好的话，你会在正确的时间出现在正确的地点。如果运气不好，你最终会像大多数其他前程序员一样转向其他职业。

保罗。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-12-18T19:48:07.010

**秒杀**！定期花大量时间使用新技术编写解决方案。它不必花哨或有用 - 足以让您学习基础知识以及何时在实际项目中使用它。

**关心它**。我不同意一些答案——坚持这些东西是非常重要的。如果您对学习新技术和不断提高技能不感兴趣，那么您*可能会*更关心另一行工作。我并不是说要丑陋，而是继续使用旧技术，你并没有利用你面临的问题已经解决的事实。你忽视了成千上万人和社区的工作。例如，如果您使用 WebServices 而不是 WCF 编写新服务，那么您并没有利用安全性的改进——充其量，您自己再次解决这些问题是在浪费时间和金钱。在最坏的情况下，您做错了，对您的公司/客户构成风险。

**知道什么时候说不。**在更新旧代码方面有一个平衡行为。你不能每次出现新技术时都重写所有内容。如果您专注于编写高质量、“面向未来”的代码，这将有所帮助。例如，如果您编写了一个结构良好的 WinForms 应用程序，则应该可以在 WPF 中重用您的逻辑。如果你写了一个像样的数据层，你应该可以加入一个 linq 数据层。这种级别的代码很难掌握，但重构工具、单元测试和静态分析会有所帮助。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-12-18T18:25:33.497

我的感觉差不多。很多时候，我担心技术变化的速度超过了我掌握当前工具集的速度。我总是尝试提出某种可以应用该技术的项目。例如，我真的很想了解 MVC，所以我决定使用新框架编写一个混合了 digg、stackoverflow 和 dotnetkicks 的应用程序。我只参加了 3 天，我已经学会了 TON。

我们工作的难点在于很难保持相关性。然而，正是这个挑战让它如此令人兴奋。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-12-18T18:25:09.737

在个人方面。

通过学习适用于所有编程语言的良好实践、设计模式和原则。它有助于深入了解算法和数学的各个方面

在您平台的编程社区中保持活跃，以便在他们进行无偿和重大更改时让他们拥有它（希望在他们实际实施之前）

在软件方面。

通过为您的软件进行良好的设计，从而最大限度地减少来自切换平台的问题。

通过进行跨平台和跨语言翻译的良好测试，您可以在移植时检测行为变化。

如果您的应用程序打算在几十年内得到支持，那么如果您没有源代码，请尽量减少对第三方软件的使用。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-12-19T11:15:27.687

**技术**只是帮助**解决问题的****工具**。

 ****软件开发**是使用手头的工具**解决业务问题的职业。**

所以我只是**专注于解决业务问题**，而不用过多担心工具。然而，在大多数情况下，最终证明最有效的工具是最新的。因此，尽管所有主要原则仍然相同，但切换到比以前稍好一些的新产品感觉很自然。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-12-19T05:16:49.577

我同意你对微软输出的看法。它确实有它的好处，但是它们不断的发布流很难跟踪，并且经常导致计算环境混乱（有时甚至无法运行）。而且他们的产品经常在功能上重叠，就好像不同的团队从不同的角度攻击同一个问题而不互相交谈。如果产品被证明是无用的，那么尽早学习他们的东西所花费的时间就会被浪费掉。

无论如何，我通常说，**学习你感兴趣的东西，而忽略其他的**。这是保持动力和不断学习的最佳（唯一？）方式。这项工作应该是关于你的，而不是微软。

如果你像我一样，有更多的兴趣而不是时间去追求它们，那么你需要找到提高效率的方法：减少你的“时间开销”（花在无趣的事情上的时间），利用你现在不使用的时间，并且学得更快。

我发现现实世界中提高效率的技术通常与您在编写软件时所做的相似。把你的“生活表现”想象成一个程序，并找到优化它的方法——也许通过用一种资源交换另一种资源、缓存等。

更具体地说，这是我喜欢做的事情：

1) 不要觉得您需要了解您感兴趣的主题的所有内容。以适合您感兴趣程度的详细程度来学习它。

2）在编程中，寻找一个有趣的问题并为其创建一个尖峰解决方案。如果尖峰确实可用，那就更好了。对我来说，学习一门新的语言或技术的最好方法就是让我肮脏的手去动手做点什么。

3) 尽量减少多任务处理。我所做的就是尝试始终准确地处理两件事情——当一件事情被搁置时，我会处理另一件事情。两者都被阻止的情况很少见，并且试图将我的注意力分散在两个以上的事情上，这会导致我的注意力质量受到影响，并且还会引入过多的上下文切换成本。

4) 把时间花在有趣的、有建设性的事情上；即，收听播客以利用时间，否则不会花在学习上。不要把时间浪费在电视和游戏等非建设性的事情上。体育锻炼是必须的——套用一些老武术老师的话说，“通过控制你的身体来控制你的思想”。

5）通过与其他对你相同的事物感兴趣的人交往来保持你的积极性。一种方法是将您在尖峰解决方案上所做的工作向公众公开。

6) 在任何时候都有一些你正在学习的不同的东西，一旦你开始厌倦你正在学习的东西，就在它们之间切换。但是，一旦您的兴趣重新建立，请稍后再返回。我发现这有助于增加我花在学习上的总时间，也避免了我对其中任何一个的倦怠。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-12-18T18:41:40.110

我认为没有任何理由为不使用最新最好的技术而感到难过。学习一门新的语言或技术类似于改造工厂：如果你把所有的时间都花在改造上，你就不会花任何时间实际生产任何东西。

注意：这不应作为继续使用 Visual Basic 6 的理由。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-12-18T18:44:18.763

跨越某些版本是有意义的，也许采用其他版本。如果您觉得有必要跟上每项技术的每个版本，那么您就不会花太多时间做实际工作或提高您已经使用的工具的流畅度。

我们已经进入了这样一种心态，即更新总是更好。即使更新更好，也并不*总是*更好，值得麻烦。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-12-18T19:41:18.367

我只是阅读并了解 Microsoft 技术，但我不会仅仅因为它们已经过时而急于使用或实施它们。微软一直有很多新技术出现，有些甚至与自己的技术相冲突。就像 Linq to Sql 和 Entity Framework 是同一领域的两种新技术一样，微软在那里试图做的事情令人困惑。

由你决定使用对你有用的东西并坚持下去，直到出现真正提供你不能没有的好处的新东西。否则，请享受过多的 Microsoft 新技术，并尝试从他们大部分时间创造的混乱和混乱中笑出来，直到他们齐心协力并发布值得您花时间的东西。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2008-12-18T20:00:56.750

我在公司方面为一家大型公用事业公司工作，所以我不是需要精通所有技术的供应商——我可以专注于我们手头的问题。

我发现现在我们的商店已经更新并与 MS 的版本同步，保持最新并不难。了解 .NET 只是压倒性的。进入 3.0 是很困难的：我在 2.0 发布后就被公司聘用了，这是公司用来编写非平凡 .NET 应用程序的第一个 .NET 版本……然后 3.0 很快就出来了。试图让现有的开发人员理解 2.0，而 3.0 正在混合中，这让人感到不知所措。但是我们真的很想要 WCF（我们有一个使用 WSE 的项目很痛苦：WCF 看起来并被证明是使用 WS-* 的一个很好的解决方案）。所以当 3.0 出来时，我们很快就采用了它并开始走 WCF 路线。WCF 是一个非常棒的堆栈恕我直言，但是（并且仍然）难以满足。在 3.0 版本发布时，我们没有

这使得 3.0 版本变得易于管理，因为考虑到我们的业务需求（即我们在没有 WCF 的情况下所感受到的痛苦），我们只真正关注 WCF 方面。

3.5 对我们来说也很容易理解——我们使用了 LINQ，因为它是有意义的。采用 WCF 并不像说 WCF 那样难，因为您可以根据需要使用尽可能少的或尽可能多的。我个人一开始只是删除了一些 foreach 语句以查找集合成员，并从那里加深了我对 LINQ 的理解。由于我们是 Oracle 商店，因此我们目前不使用直接数据（即 Linq to Sql）。C# 的 Lambda 方式正在慢慢渗透到我们的代码库中——这是一个相当大的转变，但我喜欢它。同样，由于它完全是可选的，因此很容易根据需要采用。

由于我们对 3.0 和 3.5 真正需要的东西感到满意，我们有一些时间开始研究这些版本的其他部分，看看它们如何提高我们的生产力。我最近花了一些时间在工作流上，我真正开始看到它的力量。看到 PDC 4.0 中的 Workflow 演示让我真的很想发布它……与其对新技术感到不知所措，我实际上非常期待它的发布……对于烘焙任务并行库也是如此。

所以我想我会说在这一点上我并没有被大量新的东西淹没。我认为，就我的痛点而言，专注于新版本正在解决的问题，而忽略其余的，直到我为它们做好准备会有所帮助。它还有助于快速采用新框架。3.0 和 3.5 很容易采用，因为它们位于 2.0 之上，并且不需要全面升级核心代码。4.0 至多还有一年的时间......我们有足够的时间开始研究 WPF/Silverlight 以及这样做的时钟周期。通常，我们只是给最感兴趣的人一点空闲时间，我们可以腾出时间成为首席球探并开辟道路……这也有帮助。我们并不都需要成为整个堆栈中的专家。

它还帮助我们在新框架发布后尽快（即大约一个月内）采用它们。4.0 版本可能更难做到这一点......通过版本控制分支将我们的核心代码与单个项目分开有助于将共享的核心代码与“真实”开发工作隔离开来，使我们能够在不破坏个人的情况下推进核心项目。当有时间吸收这些变化时，单个项目只会合并这些变化。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-12-19T01:54:51.450

最近的阅读：

[http://www.pseale.com/blog/LearningLahar.aspx](http://www.pseale.com/blog/LearningLahar.aspx)

[http://www.secretgeek.net/3way.asp](http://www.secretgeek.net/3way.asp)

执行摘要是：除非需要，否则不要学习！

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2008-12-18T20:13:40.063

是的，技术发展很快，实际上每个行业都在快速发展。它的发展速度与人们愿意创造事物的速度一样快。我认为想到的评论是专业的。找到你喜欢和专攻的东西。你永远不会让自己远离变化，关键是让自己有市场，选择你想学的东西，而不是别人告诉你热门的东西。正如我们所见，有很多公司甚至没有在他们的机器上部署 .NET Framework，因为对于他们目前使用的应用程序，他们没有必要。这些公司将开始升级，但其中许多升级是长达十年的迁移。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2008-12-18T19:01:30.787

我认为诀窍是学习永恒和便携的技能。知道如何用一种以上的语言和框架编程，比知道如何用最新的语言或框架编程重要得多。同样，了解安全原则比了解某些 Web 服务器中最新的缓冲区溢出更重要。

不幸的是，如果您要换工作，您可能会遇到不知道这一点的招聘人员，他们的工作职能本质上是*grep 流行语 cv*。但是，如果您能够克服这一点并接受了解工作的人的采访，那应该没关系。如果它确实很重要，你可能会讨厌在那个地方工作。

此外，大多数这种“变化”只是毫无意义的流失，许多新的“技术”只是某人编写的程序或库......它并不比你写的最后一个程序或库是新的“新技术”技术。您无需了解其中的大部分内容，就像世界其他地方必须研究您生产的所有产品一样。

您当然不需要知道所有这些，就像您需要安装和学习曾经编写的每个电子邮件程序以便能够发送电子邮件一样。

这有点像试图跟上您的 RSS 提要中的所有内容或阅读邮件列表中的所有内容。放手吧。将其全部标记为已读。如果它很重要，你会再次听到它。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-12-18T19:07:24.520

我不认为你是唯一一个感觉 C# 增长很快的人。幸运的是，针对 C# 4.0 和 .NET 4.0 宣布的更改绝不会像 C# 3 的新特性那样压倒一切。它们是非常好的特性，我特别期待 IronPython 和 IronRuby 以及 VS2010 的新 TDD 特性.

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-12-18T23:45:09.607

我们的一位共同主持人（来自[JoelOnSoftware](http://www.joelonsoftware.com)的 Joel）发表了[一篇文章](http://www.joelonsoftware.com/articles/fog0000000339.html)，其中涉及到这种快速变化的技术，Joel 将其比作掩护。很久以前读的时候觉得挺有意思的。相关部分在下方某处，在一位年轻伞兵的照片之后。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2008-12-19T02:48:09.050

为了跟上技术的步伐，我尝试做的事情：

*   尝试在工作中融入新事物。这样，我基本上可以得到报酬来学习。
*   辅助项目或在其他人的开源项目上工作。也有助于了解其他人对新技术的看法。
*   收听有关技术的播客。我特别听 Java Pose 和 .NET Rocks。如果我不积极编码，至少我可以听到新的东西！

我听有人说你应该每 2 年学习一门新的编程语言。就我个人而言，我觉得在工作之外有这么多时间是非常困难的。至少，如果我想保持婚姻，就不会！:)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-12-18T19:01:19.617

通常通过与当地用户群保持联系，尝试一些我工作的地方，看看哪些实验产生了哪些结果，并意识到我的雇主可以在我使用的东西中发挥作用，并将继续使用. 因此，我进入了 .Net 3.5 框架，因为其他人需要在项目中使用 Linq 以及使用它的新 CMS 系统，所以现在我开始对此进行一些探索。

做一些小实验并不是在我需要它之前保持领先或忽略它，而是定期保持婴儿脚步。例如，在过去的十年中，我从 ISAPI 扩展到 ASP 再到 ASP.Net 及其从 1.0 到 3.5 的各种版本，包括 3.0 的绝妙想法，包括 2.0，并添加了一些东西，而不是称之为 WinFx，这是一个它曾经的名字。

如果一个人的工具来自雇主，那么问题是他们如何看待新技术并处理不时将开发人员与新硬件或软件一起转移，例如从 P4 机器到 Core 2 Duo 机器是很好，也增加了 RAM 的数量，但我确实丢失了一些我在旧盒子上使用的软件，比如以前版本的 Visual Studio。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-12-18T18:29:02.473

学习学习学习。读读读。参加参加。码码码。

一天有24小时。保持最新是让我们保持相关性和需要的原因。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-12-18T19:09:22.020

对我来说（在我 40 岁出头的时候），保持当前状态的需要，甚至是渴望都在减弱。真正的工作，具有真正持久的好处，是那些你正在处理一些旧技术的工作。在我看来，较旧的技术将是 .NET 2.0。

恕我直言，真正的趋势引领者的标志是能够对新技术有足够的了解，以了解它们是否适合您对旧技术的支持，并且它们是否具有商业意义？例如，Linq to Sql 在您的旧环境中是否有意义？研究那一件事，决定它是否有意义，然后继续使用那一项新技术。

不要为了实施新事物而实施新事物。只有时间才能证明一项新技术是否为任何企业带来了可观的投资回报率。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-12-19T09:22:34.560

我经常发现自己处于同样的困境中，并试图让自己学习一门新技术或一门新语言。但大多数时候，除非你的雇主要求，否则你不会对那项技术或任何对该语言有用的东西做太多事情。你最终会编写一堆有用的小程序来学习语言的特性，并尝试一些很酷的广告位。而且，您通常会试图说服自己，新语言正在尝试以更好的方式完成您对旧语言所做的事情。在尝试采用此功能时，我忘记了使用该语言的好处。

最终，发生了两件事——新方法比我的旧方法更好，因为它节省了几行代码。但我仍在用新包装做旧事。或者新功能很烂，我会坚持旧方法并抨击所有宣传创作者。:)

但在某些情况下，这种学习是必不可少的。一旦你做了几次这个练习，你迟早会开始对什么可能会起飞和什么不会起飞有一个直觉。所以保持更新确实有帮助，至少互联网上会有很多评论在这方面帮助你。

但永远记住，学习技术比学习编程更容易。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-12-18T19:25:44.420

> 在需要它之前你会忽略它吗...

这是不断被新技术淹没的可靠方法。

缓慢的学习速度是可以的，只要它是稳定的。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-12-18T19:43:48.703

了解其他版本。我就是这样跟上的。大多数书籍通常会让您深入了解以前的框架并告诉您添加了什么。

只是我的2美分。

# delphi - 有没有更好的方法将所有数据集字段及其属性复制到另一个数据集？

> ID：378737
> 
> 赞同：7
> 
> 时间：2008-12-18T18:24:23.280
> 
> 标签：delphi

我正在克隆一个 TClientDataSet，我想将所有字段复制到克隆（这是一个新的 DataSet），我知道我可以遍历字段并复制信息，或者创建我的类的 2 个实例，然后克隆光标，但是有更好的方法吗？像创建一个新的数据集并分配字段信息之类的东西？

**编辑：**

以下类助手方法适用于我：

```
procedure TDataSetHelper.CopyFieldDefs(Source: TDataSet);
var
  Field, NewField: TField;
  FieldDef: TFieldDef;
begin
  for Field in Source.Fields do
  begin
    FieldDef := FieldDefs.AddFieldDef;
    FieldDef.DataType := Field.DataType;
    FieldDef.Size := Field.Size;
    FieldDef.Name := Field.FieldName;

    NewField := FieldDef.CreateField(Self);
    NewField.Visible := Field.Visible;
    NewField.DisplayLabel := Field.DisplayLabel;
    NewField.DisplayWidth := Field.DisplayWidth;
    NewField.EditMask := Field.EditMask;

   if IsPublishedProp(Field, 'currency')  then
     SetPropValue(NewField, 'currency', GetPropValue(Field, 'currency'));

  end;
end; 
```

任何人都有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-18T20:00:53.117

如果您只想复制字段定义，您可以执行以下操作：

```
ds2.FieldDefs.Assign(ds1.FieldDefs);
ds2.CreateDataSet;
ds2.Open; 
```

当然，这假设您为 ds1 创建了 FieldDefs。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T21:18:18.047

您是在寻找更美观的方式还是更快的方式？

如果是前者，请创建自己的隐藏循环的类。

如果是后者，那就不用担心了。一位非常聪明的程序员曾经对我说：磁盘访问成本；网络接入费用；可能是屏幕访问成本；其他一切都是免费的。

不要将源代码的大小与执行时间混淆。与数据库连接的初始握手相比，在内存中循环一千次并复制位是无法检测到的。

干杯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-19T01:45:28.507

如果您要循环遍历数据集以制作副本，请记住先调用 DisableControls，然后再调用 EnableControl。

没有它，如果您有可视化控件在表单上显示数据集的数据，事情会变得非常缓慢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-12-18T19:54:56.483

CloneCursor 会为您工作吗？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-10-10T18:24:58.603

非可编程方法

*   第一个 tclientdataset：打开字段编辑器。如果尚未显示，请添加所有字段。选择所有字段。复制到剪贴板。

*   第二个 tclientdataset：打开字段编辑器。在字段编辑器中粘贴剪贴板。完毕

您现在应该看到两个 tclientdatasets 的相同 fieldDefs。

# castle-windsor - Castle Windsor IOC 和配置文件中的出现顺序

> ID：378741
> 
> 赞同：1
> 
> 时间：2008-12-18T18:25:13.480
> 
> 标签：castle-windsor

我是温莎城堡的新手，对配置文件中的顺序感到困惑。这取自 GettingStarted1 示例。HttpServiceWatcher 类在其构造函数中采用 IFailureNotifier 实现器。但是，无论我如何订购实现此接口的两个组件——AlarmFailureNotifier 和 EmailFailureNotifier——我总是得到 EmailFailureNotifier。我知道您可以覆盖使用参数和“服务查找”参考选择的选项，但我认为在其他机制不使用时使用声明顺序。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="castle"
             type="Castle.Windsor.Configuration.AppDomain.CastleSectionHandler,Castle.Windsor" />
  </configSections>

  <castle>
    <components>

      <component
        id="httpservicewatcher"
        type="GettingStartedPart1.HttpServiceWatcher, GettingStartedPart1">
      </component>

      <component
        id="alarm.notifier"
        service="GettingStartedPart1.IFailureNotifier, GettingStartedPart1"
        type="GettingStartedPart1.AlarmFailureNotifier, GettingStartedPart1" />

      <component
        id="email.notifier"
        service="GettingStartedPart1.IFailureNotifier, GettingStartedPart1"
        type="GettingStartedPart1.EmailFailureNotifier, GettingStartedPart1" />

      <component
        id="form.component"
        type="GettingStartedPart1.Form1,GettingStartedPart1" />

    </components>

  </castle>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-01-24T19:46:54.700

Castle 2.0（去年初进入 RTM）解决了这个问题。

Castle 的最新版本是 2.1.1：

[http://sourceforge.net/projects/castleproject/files/InversionOfControl/2.1/Castle-Windsor-2.1.1.zip/download](http://sourceforge.net/projects/castleproject/files/InversionOfControl/2.1/Castle-Windsor-2.1.1.zip/download)

Castle 的版本总是很难找到（他们需要更新他们的网站）。我总是参考项目列表：

[http://www.castleproject.org/castle/projects.html](http://www.castleproject.org/castle/projects.html)

你想要：MicroKernal/Windsor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:48:07.960

我不知道您使用的是哪个版本，但我相信这是前段时间的一个错误，并且已在构建服务器版本中得到纠正。试试那个，看看会发生什么。

此外，您可以使用这样的默认组件：[Castle Windsor and default components](http://www.nablasoft.com/alkampfer/index.php/2008/05/27/castle-windsor-and-default-component/)

# iphone - 如何使用 iPhoneSDK 的 MPMoviePlayer 跳转到特定时间？

> ID：378746
> 
> 赞同：1
> 
> 时间：2008-12-18T18:26:17.160
> 
> 标签：iphone

我正在开发一个基于 iPhone 的课程视频系统，其中我需要将幻灯片与视频的特定时间位置相关联。我没有发现播放视频时可以跳转到特定时间位置的功能。（或者像 Joost 应用程序中的自定义控件）如果有人可以帮助我，这对我来说将是一个很大的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-12-21T23:11:39.277

It appears there is no public API for this. There is a private API, `-currentTime` and `-setCurrentTime:` on MPMoviePlayerController, but as this is private your app is liable to get rejected from the AppStore if you use it (and you open yourself up to breaking on iPhone OS updates).

# sql - 通过 SQL SP 映射到网络驱动器

> ID：378752
> 
> 赞同：7
> 
> 时间：2008-12-18T18:30:11.990
> 
> 标签：sql, sql-server-2005

有没有办法通过使用存储过程映射到网络驱动器？我努力了：

```
xp_cmdshell 'net use Q: [shared_network_drive] [pwd] /user:[username]' 
```

但我收到一个错误，说类似

```
'System error 1312 has occurred.'
'A specified logon session does not exist. It may already have been terminated.' 
```

但是，当我在与 SQL 服务器机器相同的框中的 cmd 控制台中运行相同的命令时，完全没有问题。看起来 SQL 进程确实传递了正确的登录凭据信息。SQL SP有什么办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T08:17:02.007

在另一个论坛中，有人[发布了一条](http://www.msfn.org/board/topic/54894-info-net-use-command-returns-system-error-1312/)关于如何`System error 1312 has occurred.`通过指定包含其域的用户名来解决问题的提示，如下所示：

```
net use Q: \\[host]\[folder] [pwd] /user:[host]\[username] 
```

我试过了，它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T21:45:32.777

我花了一个小时，但问题解决了： 你必须指定 [HOST]\[username] 如果你这样写： u:/username - 它不起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T19:22:54.863

您是否为 xp_cmdshell 设置了代理帐户？如果您不是 sysadmin 的成员，则需要代理帐户。xp_cmdshell 和 sp_xp_cmdshell_proxy_account 的文档会详细解释，但请尝试执行以下操作：

```
EXEC sp_xp_cmdshell_proxy_account 'DOMAIN\Username', 'password' 
```

当然，将用户和密码信息替换为您希望执行此操作的网络上的帐户信息。

**警告**：xp_cmdshell 可能是一个巨大的安全漏洞。确保至少您使用的代理帐户具有非常有限的安全性。不要使用任何类型的管理员帐户，也不要使用实际用户的帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T20:13:13.187

实际上，我需要的是使用 Win Scheduled Tasks 工具。我可以创建一个 .Net 应用程序来完成这项工作，然后将应用程序添加到计划任务中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T05:13:59.143

使用分布式文件系统时会出现[问题](http://social.technet.microsoft.com/Forums/en/w7itpronetworking/thread/cda92757-2f21-41e3-a244-65b5e8bc01cc)，无论您使用的是哪种操作系统。相反，获取托管 DFS 内容的服务器的实际名称。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T19:23:46.437

为什么你甚至想这样做？！？即使有可能，您也应该仔细问自己为什么要这样做。

我的建议：不要。我的印象是你需要改变你的方法——无论网络驱动器映射可能用于什么目的，都应该在数据库引擎之外的更合适的地方进行。一旦您选择了合适的位置，实际调用映射可能会变得微不足道。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-18T19:58:56.770

罗德，你是对的。在 SQL Server 中这样做是一个很大的风险，并不是所有的 SQL 管理员都允许打开这扇门。我正在做的是将遗留流程迁移到计划的 SQL 作业，以便其他部门的应用程序可以使用所需的数据来获取另一个计划流程中的数据。

我想 Windows 服务作业可能是一个更好的应用程序来提取数据并将结果传输到所需的网络驱动器。

# java - Java swing UI 崩溃调试

> ID：378754
> 
> 赞同：2
> 
> 时间：2008-12-18T18:32:02.157
> 
> 标签：java, swing

我正在尝试调试用户单击按钮并且 UI 死机的问题。我知道，祝你好运。

日志在用户单击按钮后才结束，所以我认为可能存在一些我们没有记录的异常/错误。也许是 OutOfMemoryError。

关于如何进行的任何建议？获取更多信息。Java 命令设置等

谢谢你的帮助

*   富有的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T18:46:50.113

哪个版本的java和什么机器？

无论如何，这是独家新闻：事件队列线程在某种程度上与主线程分开运行。在 Java < 5 中，有一个错误导致难以从该线程捕获事件，因此一些异常就消失了。在 Java 5 中，有一个新方法`Thread.setDefaultUncaughtExceptionHandler()`可以让您为任何可能未被捕获的事物设置异常处理程序。在那里添加一个处理程序，并捕获所有`Throwables`并记录它们。

这也是处理您可能需要的事情`System.exit()`的好方法；有一个`normalExit` `Throwable`；把它扔到你在 GUI 中调用 exit 的任何地方，并确保所有东西都被清理干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T18:36:46.500

尝试重定向标准输出 - 您可能会在那里看到异常堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T18:38:32.580

您必须有一个事件侦听器等待鼠标单击事件。您是否通过该代码跟踪到特定行？

代码至少必须到达第一行，我看不到事件监听器不起作用。

你需要把它分解一下。

如果它只有一行，那么您需要深入研究该代码，直到您有不止一行，或者直到您可以将其隔离更多......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T19:42:12.890

我不知道你说的“死”是什么意思。

*   如果将 UI 拖到屏幕边缘之外然后再重新拖入，UI 是否仍会重新绘制自身？
*   整个过程最终会意外终止吗？
*   整个过程是否会*立即*意外终止？

假设当您单击按钮时 UI 仍然存在，并且似乎没有发生任何事情，那么诊断可能出了什么问题的另一种简单方法是监视该进程的 CPU 和内存使用情况。如果您在 Windows 中，则任务管理器（或更好的进程资源管理器）；`ps`如果您是 Unix 的某种风格（也可能是 Mac）。首先检查该进程使用了​​多少 CPU。

如果它是 0%，那么你可能有一些良性的东西，比如没有监听器的按钮（因此点击它没有任何效果）。

如果它是 100%，那么您可能有一些业务逻辑在疯狂运行，可能处于无限循环中。看两件事：一，检查内存使用情况，看是不是涨了；错误可能会导致创建大量对象，最终您将耗尽内存。如果不知道代码的作用，就不可能肯定地说。上面提到的第二件事：将 UI 拖出屏幕然后再返回。Java 的 EDT（Event Dispatch Thread）负责处理所有 UI 事件，包括当 UI 可见时重绘 UI；如果它不这样做，那么您就知道 EDT 中正在运行不应该运行的东西，从而阻止它进行重绘之类的事情。据我所知，业务逻辑运行良好，但只需要一段时间，并且占用了 EDT。

（如果它略低于 50%、33%、25% 等，那么您在多 CPU 机器上；请参阅上面的 100%...）

但是，根据您的描述（即“日志刚刚结束”），听起来您的 UI 或业务逻辑正在等待永远不会出现的东西，因此您将在该进程上拥有 0% 的 CPU。无论如何都值得检查，因为它很快并且可以阻止在错误的地方进行不必要的错误搜索。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T20:01:45.360

该应用程序在 java 1.6 上运行。并且整个过程立即意外终止。

另一条信息是 Swing 应用程序是使用 webstart 启动的。

我正在根据日志中的最后一行查看代码，看看我是否能弄清楚发生了什么。

不幸的是，这曾经发生过，而且每次都发生在不同的时间点，所以我无法重现。

我们可能最终会使用 Thread.setDefaultUncaughtExceptionHandler() 建议，看看我们是否可以获得更多信息。

欢迎任何更多的想法。非常感谢你的帮忙

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T20:36:09.987

我能够找到jvm错误文件。
看起来在“AWT-Windows”本机线程中发生了一些事情。

**=>0x02acf000 JavaThread "AWT-Windows" 守护进程 [_thread_in_native, id=3616, stack(0x02eb0000,0x02f00000)]**

siginfo：ExceptionCode=0xc0000005，写入地址0xe2789280

寄存器：EAX=0x234f099c, EBX=0x00001400, ECX=0x00000100, EDX=0xe2789280 ESP=0x02eff4a4, EBP=0x00000400, ESI=0x234f099c, EDI=0xe2789280 EIP=0x6d02bcbd=0x6d02bcbd0,

栈顶的：（SP = 0x02eff4a4）0x02eff4a4：02eff500 00000100 02eff584 00000100
0x02eff4b4：6d0a5697 00000400 00000400 00000100
0x02eff4c4：00000100 02eff700 02eff500 00000000
0x02eff4d4：00000000 00000100 041ac3a0 00000100
0x02eff4e4：00182620 00000400 e2789280 00000000
0x02eff4f4：00000000 00000100 00000100 00000000
0x02eff504：00000000 00000100 00000100 00000000
0x02eff514: 00000000 00000004 00000400 00000000

说明： (pc=0x6d02bcbd)
0x6d02bcad: 00 00 00 8b 4c 24 14 8b e9 c1 e9 02 8b f0 8b fa
0x6d02bcbd: f3 a5 8b cd 83 e1 03 f3 a4 8b 74 24 18 8b 4c 24

堆栈：[0x02eb0000,0x02f00000]，sp=0x02eff4a4，可用空间=317k 本
机帧：（J=编译的 Java 代码，j=解释的，Vv=VM 代码，C=本机代码）
C [awt.dll+0x2bcbd]

[报错时发生错误（打印本机堆栈），id 0xc0000005]

Java 框架：（J=编译的 Java 代码，j=解释的，Vv=VM 代码）
j sun.awt.windows.WToolkit.eventLoop()V+0
j sun.awt.windows.WToolkit.run()V+69
j java.lang.Thread.run()V+11
v ~StubRoutines::call_stub

# css - 如何找到有关 CSS 浏览器不兼容性的信息？

> ID：378762
> 
> 赞同：2
> 
> 时间：2008-12-18T18:35:16.033
> 
> 标签：css, cross-browser

很多时候，当我阅读与 CSS 相关的书籍时，我会看到诸如“这在某些浏览器上不起作用”、“这个 hack 将在那个浏览器上起作用”之类的东西。

我在哪里可以获得所有我需要知道的所有浏览器的黑客信息？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T18:41:21.483

我建议[Quirksmode](http://www.quirksmode.org/)。非常有用的 Web 开发资源。

这是 Quirksmode 上 CSS 页面的链接：

[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-18T18:51:13.350

我发现[SitePoint CSS 参考](http://reference.sitepoint.com/css)非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T18:41:29.330

你可以从：

[CSS 内容和浏览器兼容性](http://www.quirksmode.org/css/contents.html)

如果您对电子邮件客户端和浏览器感兴趣：

[电子邮件客户端中的 CSS 支持指南 (2008)](http://www.campaignmonitor.com/css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T18:44:17.000

我总是发现[这种特殊的比较](http://www.webdevout.net/browser-support#css)很有用，因为它显示了是否支持特定功能，以及它们的支持程度。它也可能对您有用。

> 本文档将总结流行 Web 浏览器对 Web 标准和成熟技术的支持程度。它涵盖了 Internet Explorer、Firefox 和 Opera Web 浏览器，重点关注 HTML、CSS、DOM 和 ECMAScript 技术。

除此之外，[Quirksmode](http://www.quirksmode.org/css/contents.html)是一个很好的资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T19:28:44.057

[Position Is Everyting](http://www.positioniseverything.net/)可用于查找问题的解决方案（主要与 IE6 及以下相关）。它们没有浏览器比较，并且它们的错误名称可能并不总是直观，因此并不总是很容易找到特定的不兼容性。

这些文章介绍了很多细节，并且通常有几个可能的修复，所以一旦你发现了一个渲染错误，它就会非常有用。我不建议直接使用他们的所有修复，因为它们通常涉及特定于浏览器的 CSS hack。通常最好使用条件注释。

# linux - Subversion 创建具有过于严格权限的修订目录

> ID：378768
> 
> 赞同：5
> 
> 时间：2008-12-18T18:38:25.593
> 
> 标签：linux, svn, permissions, posix

今天早上，我尝试对 Subversion 进行修改，突然发现我没有这样做的权限。

```
无法将“/svn/db/txn-protorevs/21000-ga9.rev”移动到“/svn/db/revs/21/21001”：
没有权限
```

查看 revs 目录，我注意到有人提交了第 21000 个修订版，并且由于某种原因缺少新目录的组写入权限。

```
    drwxrwsr-x 2 svn svn 24K 2008-10-27 10:04 19
    drwxrwsr-x 2 svn svn 24K 2008-12-18 07:13 20
    drwxr-sr-x 2 杰夫 svn 4.0K 2008-12-18 11:18 21

```

在该目录上设置组写入权限允许我提交，所以我可以再进行 1000 次修订。但是为什么会发生这种情况，我可以改变什么以确保它不会再次发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-18T18:40:28.210

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:16:55.920

解决此问题的最佳方法是通过服务器访问存储库。

如果您不介意未加密的通信（自从您使用 以来似乎就是这种情况`file://`），`svnserve`则很容易设置：

```
svnserve -d -r /svn 
```

有关设置和配置身份验证的帮助，请参阅[此参考。](http://svnbook.red-bean.com/en/1.5/svn.serverconfig.svnserve.html)

令人遗憾的是，您必须分别设置每个用户的身份验证。

要连接到您的操作系统的身份验证，您需要设置一个 Apache SVN 服务器，这有点复杂，请参阅[这些一般说明](http://svnbook.red-bean.com/en/1.5/svn.serverconfig.httpd.html)。您可以通过一些谷歌搜索找到适用于您的操作系统的特定说明。

最后，如果您想要在仍在使用的同时防止组写入权限被重置的最快途径`file://`，只需让每个人在他们的 shell 启动中设置一个正确的 umask (002)，或者通过一个设置它的包装脚本使用 svn：

```
#!/bin/bash
# svnwrapper.sh
umask 002
/usr/bin/env svn $* 
```

确保此 umask 在您的环境中不是安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T19:13:11.933

# python - 如何在 C 中创建 Python 类？

> ID：378773
> 
> 赞同：5
> 
> 时间：2008-12-18T18:39:59.597
> 
> 标签：python, c

我有一个创建对象树的遗留 C 库。我想将树转换为预先存在的 Python 类。如何为该类创建 PyObject？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-26T04:46:59.770

[Cython](http://www.cython.org/)能够做到这一点。它是 Pyrex 的一个半分叉，它可以包装现有的数据结构并将它们暴露给 Python。事实上，这是[用户指南中的部分之一](http://docs.cython.org/docs/external_C_code.html)。Cython 相对易于使用，它包括一种 HTML 输出格式，显示所有生成的代码以及可以应用优化的突出显示的热点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T18:45:45.983

看看使用[pybindgen](https://launchpad.net/pybindgen/)等工具生成 Python 绑定。这些人正在尝试制作一个出色的绑定生成器，他们在首页上谈论其他工具（例如 SWIG）的缺点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T19:19:36.117

我在这些场景中使用[Robin取得了成功。](http://robin.python-hosting.com/)

# asp.net-mvc - 升级到 Beta 1 后的奇怪 Html.ActionLink() 行为

> ID：378774
> 
> 赞同：0
> 
> 时间：2008-12-18T18:40:14.463
> 
> 标签：asp.net-mvc, routes, html-helper

我将我一直在开发的一个大型 ASP.NET MVC 应用程序升级到了今天的最新测试版，并且在一些最初的问题之后，我已经让它基本上可以再次工作了。最大的问题是我有这样的事情：

```
<%= Html.ActionLink("LOGIN", "Index", "Authorization", new { redirect=Request.Url })%> 
```

和

```
<%= Html.ActionLink("Edit this page", "Edit", "Webpages", new { id = wp.Id })%> 
```

将链接呈现为：

```
http://localhost:60321/calendar/edit?Length=8 
```

尽管有不同的“长度”。我不知道为什么会这样；就好像我的路由表已经完全疯了。"calendar/edit/{id}" 是一个有效的路线，但它大约是列表中的第四个。这些以前工作得很好。

我有点不知所措，试图弄清楚发生了什么……链接文本完美呈现；这只是我的*一些*ActionLink 调用的 url 不起作用。其中一些工作正常。这是一个可以正常工作的示例：

```
<%= Html.ActionLink("ADMIN", "Index", "ControlPanel") %> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T19:14:08.687

通过查看 ActionLink 上的方法签名，它们看起来已经发生了变化，并且与以下内容匹配：

```
ActionLink( string linkText, string action,
            object values, object htmlAttributes ); 
```

我会尝试在那些不起作用的末尾添加一个 null htmlAttributes，以便它使用这个：

```
ActionLink( string linkText, string action, string controller,
            object values, object htmlAttributes ); 
```

这看起来像：

```
<%= Html.ActionLink("LOGIN",
                    "Index",
                    "Authorization",
                    new { redirect=Request.Url },
                    null )%> 
```

MVC Beta 1 的源代码位于[http://www.codeplex.com/aspnet（SCC](http://www.codeplex.com/aspnet)服务器此时似乎已关闭 12/18/2008 1:16Pm CST）。我通过智能感知找到了签名。

# objective-c - Cocoa 中的抽象类内存管理

> ID：378786
> 
> 赞同：2
> 
> 时间：2008-12-18T18:42:38.580
> 
> 标签：objective-c, cocoa, memory-management

在写抽象类，或者不直接实例化的类的时候……你是不是倾向于在抽象类中写dealloc方法，在合适的地方释放，然后让子调用[super dealloc]然后再担心关于他们添加的不属于超类的实例变量？

你们如何使用抽象类管理内存？

我在想一些事情：

```
@interface ClassA : NSObject {
    NSArray *foo;
}
@end

@implementation ClassA
- (void) dealloc {
    [foo release];
    [super dealloc];
}
@end

@interface ClassB : ClassA {
    NSArray *bar;
}
@end

@implementation ClassB
- (void) dealloc {
    [bar release];
    [super dealloc];
}
@end 
```

请原谅任何语法错误，我只是临时写的。以上是否有意义或应该以不同的方式管理内存？GC 不是一个选项，因为我在 iPhone 上这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T19:11:10.580

是的，您对自己负责，而不是对超类或子类负责。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:53:24.363

和斯蒂芬说同样的话，但从不同的角度说：尽可能避免将`alloc`and放在不同的地方（并且是主要的例外）。将它们放在不同的类中是双倍的，就像你的类和它的超类一样。`release``init``dealloc`

超类不应释放其子类创建的对象。

# vb.net - 获取泛型枚举的整数值

> ID：378801
> 
> 赞同：31
> 
> 时间：2008-12-18T18:48:57.083
> 
> 标签：vb.net, generics, enums

这是基本情况。

```
Public Class MyEnumClass(of T)
   Public MyValue as T
End Class 
```

这是对实际类的过度简化，但基本上我知道 T 是一个枚举（如果不是，那么会有很多其他问题，并且是程序员犯的逻辑错误）

基本上我想获得 MyValue 的基础整数值。

使用 Cint 或 Ctype 不起作用。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2008-12-18T19:05:58.140

我打算使用一段很酷的反射代码，但只是一个简单的[`Convert.ToInt32`](https://msdn.microsoft.com/en-us/library/system.convert.toint32(v=vs.110).aspx)作品很好......原谅我的 VB 我是一个 C# 人

```
Public Function GetEnumInt(Of T)(enumVal As T) As Integer
    Return Convert.ToInt32(enumVal)
End Function 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T18:59:48.387

我试过了，它奏效了：

```
String.Format("{0:d}", MyValue) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T19:00:41.460

我知道您可以执行以下操作来获取所有基础值（我希望我的 VB 语法是正确的......我最近一直在使用 C#）：

```
Dim intVal As Integer

For Each intVal In  [Enum].GetValues(GetType(T))
    //intValue is now the enum integer value
Next 
```

这至少可以让你朝着正确的方向开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-04T14:54:26.150

这也有效： `Fix(enumval)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T00:05:37.913

VB.NET 中另一种简单的方法是将其添加到 0：

```
Dim intVal As Integer = 0 + myEnum 
```

所以，这应该工作：

```
Sub GetEnumInt(of T)(enumVal as T) as Int
   return 0 + enumVal
End Sub 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-01-12T10:44:14.390

Thanks to 'Jon Skeet'. But his code does not work in my Excel-2016\. Minwhile the next code works fine:

```
Public Enum TypOfProtectWs
    pws_NotFound = 0
    pws_AllowAll = 1
    pws_AllowFormat = 2
    pws_AllowNone = 3
End Enum

Private Function TypOfProtectWs2I(pws As TypOfProtectWs) As Integer
    TypOfProtectWs2I = Format("0", pws)
End Function

Private Sub test_TypOfProtectWs2I()
    Debug.Print TypOfProtectWs2I(pws_AllowAll)
End Sub 
```

# c++ - 如何在 C++ 中更改 IP 地址？

> ID：378808
> 
> 赞同：2
> 
> 时间：2008-12-18T18:51:18.670
> 
> 标签：c++, linux, networking

我需要在 C++ 中做一些我通常会`ifconfig`在 Linux 中做的与网络相关的事情，但我想在不解析一组系统调用的输出的情况下做到这一点。我可以使用哪些 C 或 C++ 库来判断网络适配器是启动还是关闭、读取或更改适配器的 IP 地址和网络掩码以及更改默认 DNS 网关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T19:40:51.923

基本上，您需要使用套接字句柄（SIOCGIFADDR、SIOCADDRT）进行一堆 ioctl 调用。您可以在文档/网络下的 Linux 内核源代码中找到使用它的示例程序。其他一些可能有用的链接：

*   [AIX 上的网络接口操作](http://www.ibm.com/developerworks/aix/library/au-ioctl-socket.html)
*   [XBMC 的实现](http://xbmc.org/trac/browser/branches/linuxport/XBMC/xbmc/linux/NetworkLinux.cpp)（查看 CNetworkInterfaceLinux）

编辑：我还要补充一点，如果您的目标是桌面 linux，那么您可以考虑使用 DBUS API 来使用 NetworkManager 查询网络参数。

*   [http://people.redhat.com/dcbw/NetworkManager/NetworkManager](http://people.redhat.com/dcbw/NetworkManager/NetworkManager) DBUS API.txt（抱歉，在编辑中插入链接时出现问题）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T19:50:41.077

您可以随时查看 ifconfig 的源代码，了解他们最初是如何做到的：http: [//archive.ubuntu.com/ubuntu/pool/main/n/net-tools/net-tools_1.60.orig.tar .gz](http://archive.ubuntu.com/ubuntu/pool/main/n/net-tools/net-tools_1.60.orig.tar.gz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-22T09:47:29.697

如今，[NetworkManager服务通过](http://projects.gnome.org/NetworkManager/)[dbus](http://www.freedesktop.org/wiki/Software/dbus)公开了一个 API，用于查询/操作许多发行版上的网络。对于您的目的来说，这可能太高级了（例如，您需要更好地控制网络，或者系统上没有 dbus/NetworkManager ......），但它可能会为您提供所需的东西。

查看[dbus C++ 绑定](http://www.freedesktop.org/wiki/Software/dbus-c%2B%2B)和[NetworkManager API](http://people.redhat.com/dcbw/NetworkManager/NetworkManager%20DBUS%20API.txt)（抱歉，我现在找不到更好的格式化版本，但信息就在那里）。

# python - 让 python 工作，内部服务器错误

> ID：378811
> 
> 赞同：10
> 
> 时间：2008-12-18T18:53:14.190
> 
> 标签：python

我试图让从网络浏览器调用的 Python 脚本工作。我不断收到错误：

```
500 Internal Server Error 
```

当我检查我的错误日志时，我看到了消息

```
Premature end of script headers 
```

这个错误的唯一在线文档说它可能是脚本中包含不正确的行返回字符的结果，但我是用 pico 直接从 shell 编写了我的测试脚本。此外，当我从命令行运行文件时，它执行得很好。” 到目前为止，我对 apache 所做的唯一更改是将 .py 添加到“AddHandler cgi-script”行。

谢谢！

* * *

感谢您的快速回复。这是最新版本的测试代码。我按照建议在输出之前添加了几行新行，但仍然出现相同的错误：

```
#!/usr/local/bin/python
print "Content-type: text/html\n"
print "\n\n"
print "<HTML>"
print "<HEAD>"
print "<TITLE>Test</TITLE>"
print "</HEAD>"
print "<BODY>"
print "<H2>Hi there.</h2>"
print "</BODY>"
print "</HTML>" 
```

其他一些细节：我正在运行 Apache 1.3 并且没有 mod_python。如上所述，我将 apache 设置为识别 .py。我正在从主 public_html 文件夹运行脚本。

* * *

更新。我在shebang线上放了什么似乎并不重要。我尝试了所有建议，即使我将其留空，错误日志中也会显示相同的错误，并且我收到 500 错误。

我在安装了 WHM/Cpanel 的 linux (red hat 3.4) 上运行 Apache/1.3.41。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-12-18T19:42:48.927

如果您的 Python 脚本没有可执行权限集，这就是您会得到的确切行为。

尝试：

```
chmod a+x foo.py 
```

（其中 foo.py 是您的脚本名称）。

有关更多信息，请参阅[Apache 教程](http://httpd.apache.org/docs/1.3/howto/cgi.html#filepermissions)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T19:00:01.023

在打印其他内容之前，您是否在顶部有类似的内容？

```
print "Content-type: text/html\n" 
```

如果你已经有了这个，然后发布你的代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-12-18T18:59:06.423

有两件事立即浮现在脑海。

1.  确保您正在输出`Content-Type: text/html`标题
2.  确保在输出“Hello, world”或其他内容之前在标题后添加两个换行符（“\n”）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-18T19:43:11.700

好的最后猜测：

尝试将 shebang 行更改为：

```
#!/usr/bin/env python 
```

或者

```
#!/usr/bin/local/env python 
```

了解您的平台/托管服务提供商也会有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-27T21:34:48.433

一个常见的错误是错误的路径。我的情况是 usr/bin/python。另一个常见错误是未以 ASCII 模式传输文件。我正在使用 WinSCP，您可以在其中轻松设置它：转到选项->首选项->传输->单击编辑并将模式更改为文本。

此代码应该可以工作：

```
#!/usr/bin/python
print "Content-type: text/html\n\n";
print "<html><head>";
print "<title>CGI Test</title>";
print "</head><body>";
print "<p>Test page using Python</p>";
print "</body></html>"; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-23T11:22:15.993

如果您正确配置了 Apaches httpd 文件，那么您可能会因为以下两个原因收到此错误。确保这些是正确的。

1.  在您的脚本中包括 '#!/usr/bin/python' 或 '#!C:/Python27/python' 或相应地作为第一行。
2.  确保 print "Content-type: text/html" 后有空格，即。
    print "内容类型：text/html\n\n";
    希望这可以帮助！！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-28T16:11:49.850

我有一个类似的问题，问题是你需要在打印内容类型后有两个换行符。以下对我有用：

```
#!/usr/local/bin/python2.6
print('Content-type: text/html\r\n')
print('\r\n')
print('Hello, World!') 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-12-18T19:18:33.937

通过在 Python 脚本的顶部添加这一行，您还可以获得更好的错误消息：

`import cgitb; cgitb.enable()`

此外，标题应该大写`Content-Type`，而不是`Content-type`，尽管我怀疑这会破坏任何东西。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-31T17:01:39.923

如果你在 linux web 服务器上有 DOS 风格的行尾，你也可以得到同样的愚蠢。（这只是我今天早上大约两个小时的时间。）在我需要使用的这个 windows 盒子上更新我的 vim.rc。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-01-28T01:48:58.713

在我看来，您在 Unix 机器上使用的是用 Windows 编写的脚本，而没有先将行尾从 0d0a 转换为 0a。转换它应该很容易。一种方法是使用您的 ftp 程序；以 ASCII 模式传输文件。我使用 Metapad 的方式是在保存之前使用 File->FileFormat。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-02-17T18:35:42.790

我尝试了很多方法来让 Python 与 Apache 一起正常工作，最后使用**Apache + mod_WSGI + [web.py](http://webpy.org/cookbook/mod_wsgi-apache)**解决了问题。听起来很多，但它比使用像 Django 这样的复杂框架要简单得多。

（你是对的，不要理会 mod_python）

请注意，我使用的是 Apache2 ，但 mod_wsgi 也适用于 1.3，基于[modwsgi 页面](http://code.google.com/p/modwsgi/)。

如果你在 Redhat 上，我相信你有 yum，所以一定要获取 apache wsgi 模块和其他 python 包：

```
$ yum update
$ yum install gcc gcc-c++ python-setuptools python-devel
$ yum install httpd mod_wsgi 
```

并为您的 python 版本获取 web.py。例如，使用 easy_install。我有 v2.6。

```
$ easy_install-2.6 web.py 
```

为您的 python 脚本创建一个目录：`/opt/local/apache2/wsgi-scripts/`

在您的 httpd.conf 中：

```
LoadModule wsgi_module modules/mod_wsgi.so 

# note foo.py is the python file to get executed 
# and /opt/local/apache2/wsgi-scripts/ is the dedicated directory for wsgi scripts
WSGIScriptAlias /myapp /opt/local/apache2/wsgi-scripts/foo.py/

AddType text/html .py

<Directory /opt/local/apache2/wsgi-scripts/>

    Order allow,deny
    Allow from all
</Directory> 
```

请注意，web.py 使用“模板目录”。把它放到wsgi目录下，`/opt/local/apache2/wsgi-scripts/templates/` .

创建一个文件`/opt/local/apache2/wsgi-scripts/templates/mytemplate.html`：

```
$def with (text)
<html>
<body>
Hello $text.
</body>
</html> 
```

添加适当的权限。

```
$ chown -R root:httpd   /opt/local/apache2/wsgi-scripts/
$ chmod -R 770   /opt/local/apache2/wsgi-scripts/ 
```

在你的 python 文件中， foo.py ：

```
import web

urls = ( '/', 'broker',)
render = web.template.render('/opt/local/apache2/wsgi-scripts/templates/')

application = web.application(urls, globals()).wsgifunc()

class broker:
    def GET(self):
        return render.mytemplate("World") 
```

以上将在返回结果之前将 mytemplate 中的特殊 web.py $text 变量替换为单词“World”。

[http://ivory.idyll.org/articles/wsgi-intro/what-is-wsgi.html](http://ivory.idyll.org/articles/wsgi-intro/what-is-wsgi.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-15T22:31:15.780

这最终成为`dos2unix`我的一个问题。跑`dos2unix test.py test.py`了，它奏效了。`\r\n`组合是问题所在。不得不`yum install dos2unix`安装它。

# unix - 在 UNIX shell 脚本中将十进制转换为十六进制

> ID：378829
> 
> 赞同：118
> 
> 时间：2008-12-18T19:00:50.227
> 
> 标签：unix, shell, hex

在 UNIX shell 脚本中，我可以使用什么将十进制数字转换为十六进制？我认为 od 可以解决问题，但它没有意识到我正在向它提供数字的 ASCII 表示形式。

打印？总的！现在使用它，但还有什么可用的？

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2008-12-18T19:04:03.417

试过了`printf(1)`吗？

```
printf "%x\n" 34
22 
```

可能有一些方法可以在所有 shell 中使用内置函数，但它的可移植性会降低。我还没有检查过 POSIX sh 规范来查看它是否具有这样的功能。

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2008-12-18T21:46:53.387

```
echo "obase=16; 34" | bc 
```

如果要过滤整个整数文件，每行一个：

```
( echo "obase=16" ; cat file_of_integers ) | bc 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2009-12-15T16:11:10.363

**十六进制转十进制：**

```
$ echo $((0xfee10000))
4276158464 
```

**十进制转十六进制：**

```
$ printf '%x\n' 26
1a 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-05-02T06:12:29.673

```
bash-4.2$ printf '%x\n' 4294967295
ffffffff

bash-4.2$ printf -v hex '%x' 4294967295
bash-4.2$ echo $hex
ffffffff 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-03-12T14:24:04.670

对不起我的错，试试这个...

```
#!/bin/bash
:

declare -r HEX_DIGITS="0123456789ABCDEF"

dec_value=$1
hex_value=""

until [ $dec_value == 0 ]; do

    rem_value=$((dec_value % 16))
    dec_value=$((dec_value / 16))

    hex_digit=${HEX_DIGITS:$rem_value:1}

    hex_value="${hex_digit}${hex_value}"

done

echo -e "${hex_value}" 
```

例子：

```
$ ./dtoh 1024
400 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-12-18T19:05:42.120

尝试：

```
printf "%X\n" ${MY_NUMBER} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-18T22:26:20.170

在`zsh`你可以做这样的事情：

```
% typeset -i 16 y
% print $(( [#8] x = 32, y = 32 ))
8#40
% print $x $y
8#40 16#20
% setopt c_bases
% print $y
0x20 
```

示例取自[`zsh`有关算术评估的文档页面](http://zsh.sourceforge.net/Doc/Release/Arithmetic-Evaluation.html)。

我相信 Bash 也有类似的能力。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-09T14:59:18.857

就我而言，我偶然发现了一个使用 printf 解决方案的问题：

`$ printf "%x" 008 bash: printf: 008: invalid octal number`

最简单的方法是使用带有*bc*的解决方案，在更高的帖子中建议：

`$ bc <<< "obase=16; 008" 8`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-07-25T19:39:50.897

```
xd() {
    printf "hex> "
    while read i
    do
        printf "dec  $(( 0x${i} ))\n\nhex> "
    done
}
dx() {
    printf "dec> "
    while read i
    do
        printf 'hex  %x\n\ndec> ' $i
    done
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-28T08:20:01.107

```
# number conversion.

while `test $ans='y'`
do
    echo "Menu"
    echo "1.Decimal to Hexadecimal"
    echo "2.Decimal to Octal"
    echo "3.Hexadecimal to Binary"
    echo "4.Octal to Binary"
    echo "5.Hexadecimal to  Octal"
    echo "6.Octal to Hexadecimal"
    echo "7.Exit"

    read choice
    case $choice in

        1) echo "Enter the decimal no."
           read n
           hex=`echo "ibase=10;obase=16;$n"|bc`
           echo "The hexadecimal no. is $hex"
           ;;

        2) echo "Enter the decimal no."
           read n
           oct=`echo "ibase=10;obase=8;$n"|bc`
           echo "The octal no. is $oct"
           ;;

        3) echo "Enter the hexadecimal no."
           read n
           binary=`echo "ibase=16;obase=2;$n"|bc`
           echo "The binary no. is $binary"
           ;;

        4) echo "Enter the octal no."
           read n
           binary=`echo "ibase=8;obase=2;$n"|bc`
           echo "The binary no. is $binary"
           ;;

        5) echo "Enter the hexadecimal no."
           read n
           oct=`echo "ibase=16;obase=8;$n"|bc`
           echo "The octal no. is $oct"
           ;;

        6) echo "Enter the octal no."
           read n
           hex=`echo "ibase=8;obase=16;$n"|bc`
           echo "The hexadecimal no. is $hex"
           ;;

        7) exit 
        ;;
        *) echo "invalid no." 
        ;;

    esac
done 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-08-23T08:35:47.013

这不是一个 shell 脚本，但它是我用来在 bin/oct/dec/hex 之间转换数字的 cli 工具：

```
 #!/usr/bin/perl

    if (@ARGV < 2) {
      printf("Convert numbers among bin/oct/dec/hex\n");
      printf("\nUsage: base b/o/d/x num num2 ... \n");
      exit;
    }

    for ($i=1; $i<@ARGV; $i++) {
      if ($ARGV[0] eq "b") {
                    $num = oct("0b$ARGV[$i]");
      } elsif ($ARGV[0] eq "o") {
                    $num = oct($ARGV[$i]);
      } elsif ($ARGV[0] eq "d") {
                    $num = $ARGV[$i];
      } elsif ($ARGV[0] eq "h") {
                    $num = hex($ARGV[$i]);
      } else {
                    printf("Usage: base b/o/d/x num num2 ... \n");
                    exit;
      }
      printf("0x%x = 0d%d = 0%o = 0b%b\n", $num, $num, $num, $num);
    } 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2021-03-24T14:28:20.417

哇，我没有意识到 shell 可以使用 printf ！

话虽如此，我很惊讶没有人评论将 printf 放入 shell 脚本（如果需要，您可以将其放入您的个人 bin 目录中）。

echo "printf "0x%x\n" $1" > 十六进制 chmod +x 十六进制

现在只需运行：./hex 123

它返回：0x7b

# mysql - DISTINCT 的替代方法

> ID：378832
> 
> 赞同：3
> 
> 时间：2008-12-18T19:01:16.717
> 
> 标签：mysql

我有这样的sql语句

```
SELECT DISTINCT results_sp_08.material_number FROM results_sp_08
        INNER JOIN courses ON results_sp_08.material_number = courses.material_number
        INNER JOIN users ON results_sp_08.id = users.id
        AND results_sp_08.doctor = 'xx260' 
```

我需要在 MySQL 版本中使用 DISTINCT 的替代方法：4.1.22？

还有其他方法或技巧吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-18T19:04:08.677

`DISTINCT`在功能上等同于`GROUP BY <all the columns in your select list>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T19:10:01.627

像 Joel 一样，最好的办法是添加 GROUP BY 子句。在你的情况下

```
GROUP BY results_sp_08.material_number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-18T19:03:49.923

我通常在这些上使用双连接策略：

```
JOIN tablex AS x1 ON whatever  
LEFT JOIN tablex AS x2 ON whatever  
    AND x2.pkid < x1.pkid AND x2.somefield IS NULL 
```

这保证我在所有连接中最多获得 1 条记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T19:07:33.287

我过去通过在 WHERE 中添加更多子句成功地消除了 DISTINCT。您需要查看 JOIN 中的哪些字段导致多行返回。子查询也可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-18T19:11:06.103

我需要 DISTINCT 来选择不重复的元素，例如我在一列中包含这些值（EE432 - EE432 - EE352 - EE352）我的 sql 语句将只返回 EE432 和 EE352 。

所以我需要其他方法来做到这一点

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T19:13:54.833

如果不知道表结构，就很难说。你需要用语言说出你想要做什么。

假设 result_sp_08 仅包含唯一的“material_number”，并且您试图获取在课程和用户表中至少有一行的所有唯一 material_number：

```
SELECT results\_sp\_08.material\_number
FROM results\_sp\_08
WHERE results\_sp\_08.doctor = 'xx260' and
EXISTS(select * from courses
    where results\_sp\_08.material\_number = courses.material\_number) and
EXISTS(select * from users
    where results\_sp\_08.id = users.id) 
```

请参阅文档：[http ://dev.mysql.com/doc/refman/4.1/en/exists-and-not-exists-subqueries.html](http://dev.mysql.com/doc/refman/4.1/en/exists-and-not-exists-subqueries.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-12-19T15:05:00.057

我认为我们在这里遗漏了一些重要信息。DISTINCT 在 mysql 4.1.22 中完全有效，那么为什么需要替代方法？

material_number 列是否包含文字字符串“EE432 - EE432 - EE352 - EE352”，还是您的查询返回 4 行？如果是字符串，再多的 SQL 也无济于事。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-24T09:15:29.270

```
SELECT results_sp_08.material_number FROM results_sp_08
       INNER JOIN courses AS c ON
       results_sp_08.material_number = c.material_number
       INNER JOIN users AS u ON results_sp_08.id = u.id
       AND results_sp_08.doctor = 'xx260'
GROUP BY results_sp_08.material_number. 
```

添加了 group by 子句并删除了 distinct。最佳实践之一：在使用 JOIN 时始终使用别名。

# delphi - DELPHI IDE - 停止 F12 以显示“CPU”窗口

> ID：378840
> 
> 赞同：6
> 
> 时间：2008-12-18T19:04:03.887
> 
> 标签：delphi

我正忙着开发一个使用 F12 的 Delphi 应用程序

当我在 Delphi IDE 下运行软件并按 F12 时，程序停止并打开“CPU”窗口

当按下 F12 时，我能做些什么来阻止 Delphi IDE 这样做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-18T19:48:51.317

更改此注册表项的值..

> `HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug\UserDebuggerHotKey`

..到 0x13（十进制的 19）。这会将键从 f12 更改为暂停/中断。您需要重新启动才能使此更改生效。

参考：[这篇博文](http://blogs.teamb.com/deepakshenoy/2004/12/17/2204)。帖子中的 MS 链接已损坏，[所以这是一个固定的](http://www.microsoft.com/technet/prodtechnol/windows2000serv/reskit/regentry/11498.mspx?mfr=true)链接。

# html - 有没有比 CGI for Ruby 更好的 HTML 转义和反转义工具？

> ID：378847
> 
> 赞同：19
> 
> 时间：2008-12-18T19:05:59.263
> 
> 标签：html, ruby, escaping

`CGI.escapeHTML`很糟糕，但`CGI.unescapeHTML`完全无聊。例如：

```
require 'cgi'

CGI.unescapeHTML('&#8230;')
# => "…"                    # correct - an ellipsis

CGI.unescapeHTML('&hellip;')
# => "&hellip;"             # should be "…"

CGI.unescapeHTML('&#162;')
# => "\242"                 # correct - a cent

CGI.unescapeHTML('&cent;')
# => "&cent;"               # should be "\242"

CGI.escapeHTML("…")
# => "…"                    # should be "&#8230;" 
```

似乎`unescapeHTML`知道所有的数字代码加`&amp;`、、、`&lt;`和。并且只知道最后四个——它不做任何数字代码。我知道转义通常不需要那么健壮，因为 HTML 将允许大多数字符的文字版本，除了知道的四个字符。但是取消转义确实应该更好。`&gt;``&quot;``escapeHTML``CGI.escapeHTML`

有没有更好的工具，至少可以用来逃避？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-20T18:17:41.527

htmlentities gem 应该可以解决问题：

```
require 'rubygems'
require 'htmlentities'

coder = HTMLEntities.new

coder.decode('&#8230;') # => "…"
coder.decode('&hellip;') # => "…"
coder.decode('&#162;') # => "¢"
coder.decode('&cent;') # => "¢"
coder.encode("…", :named) # => "&hellip;"
coder.encode("…", :decimal) # => "&#8230;" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T23:21:06.393

```
require 'rubygems'
require 'hpricot'

Hpricot('&#8230;', :xhtml_strict => true).to_plain_text 
```

尽管您可能不得不摆弄字符编码。

# javascript - 如何转义可能包含引号的内容？

> ID：378848
> 
> 赞同：0
> 
> 时间：2008-12-18T19:06:35.723
> 
> 标签：javascript

我想捕获我的搜索词并将它们传递给 JavaScript 变量，但我不知道如何处理可能出现的引号。

这是我目前拥有的：

```
var searchTerms = "<!--#echo var="terms"-->";
var pattern = / /g;
newSearchTerms = searchTerms.replace(/[^a-zA-Z 0-9]+/g,'');
var searchStr=newSearchTerms.replace(pattern,"_"); 
```

我担心如果“术语”包含双引号（或者如果我在 JS 中使用单引号，则使用撇号）那么我的函数将失败。

如何在字符串进入脚本之前对其进行转义？

谢谢，
史蒂夫

* * *

编辑/回答：我最终通过将其移动到捕获并解析查询字符串的外部脚本而不是在 HTML 中回显它来完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T19:13:47.830

如果`terms`包含引号，当您完成`var searchTerms = "<!--#echo var="terms"-->";`替换任何引号时已经太迟了，您的 JavaScript 将无效。例如，如果`terms`包含**这些是**您的 JavaScript 将如下所示的“术语”（并在浏览器中产生语法错误）：

```
var searchTerms = "These are the "terms""; 
```

如果您确定`terms`只包含双引号，您可以这样做：

`var searchTerms = '<!--#echo var="terms"-->';`

如果它可以同时包含单引号和双引号，则需要使用比`<!--#echo var="..."-->`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:36:11.387

从您的代码看来，您正在使用 Apache SSI 包含。`echo`SSI 有一个名为的属性，`encoding`可以让您指定 url 样式的编码。您可以通过这种方式对引号进行编码，然后在 Javascript 中使用`unescape()`

尝试这个：

```
var terms = "<!--#echo encoding="url" var="terms"-->";
terms = unescape(terms) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T19:19:26.397

我会在搜索文本框的 onchange 事件中添加一个 javascript。捕获击键并忽略引号和可能输入的任何其他特殊字符。如果输入来自服务器端，则在将其发送到您的脚本之前对其进行清理。

# asp-classic - 附加在 vbscript/classicasp 中的 UTF-8 文件 - 可以吗？

> ID：378850
> 
> 赞同：2
> 
> 时间：2008-12-18T19:06:51.197
> 
> 标签：asp-classic, vbscript

我目前的知识：

如果您尝试在 vbscript / asp 中编写文本文件，您有两个选择。

> 1.  Scripting.FileSystemObject
> 2.  ADODB.Stream 对象

`Scripting.FileSystemObject`不支持utf8。它将以 Ascii 或 Unicode 编写（并且为大多数字符浪费两个字节）

`ADODB.Stream`不支持附加（afaik）。当我调用stream.Write 时，我无法弄清楚如何让`ADODB.Stream`对象实际打开一个文件并写入它。有一个`SaveToFile`函数，但它输出整个流。

如果您需要写入 1GB 的文件，则必须先将整个 1GB 填充到流中，然后才能将其写出。

是否有一个特殊的技巧可以让`ADODB.Stream`对象*链接*到磁盘上的文件？我试过 ：

```
stream.Open "URL=file:///c:\test.txt" 
```

但这给出了一个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T21:17:56.067

在这种情况下，我可能会创建一个接受字符串的 COM 组件，并通过[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/ms776420(VS.85).aspx)运行它以将其转换为 UTF-8。

如果您真的想留*在*VBScript 中，我只是破解了一个非常快速且非常肮脏的 UTF-8 转换......

```
Function Utf8(ByVal c)

    Dim b1, b2, b3

    If c < 128 Then
        Utf8 = chr(c)
    ElseIf c < 2048 Then
        b1 = c Mod 64
        b2 = (c - b1) / 64
        Utf8 = chr(&hc0 + b2) & chr(&h80 + b1)
    ElseIf c < 65536 Then
        b1 = c Mod 64
        b2 = ((c - b1) / 64) Mod 64
        b3 = (c - b1 - (64 * b2)) / 4096
        Utf8 = chr(&he0 + b3) & chr(&h80 + b2) & chr(&h80 + b1)
    End If

End Function 
```

只需使用系统默认编码使用 Scripting.FileSystemObject 打开一个文件。然后通过此函数传递您要写入的字符串的每个字符。

**请注意**，该函数需要一个 Unicode 代码点，因此请务必使用`AscW()`而不是 plain `Asc()`：

```
For i = 1 to Len(s)
    file.Write Utf8(AscW(Mid(s, i, 1)))
Next 
```

# requirements - 用户故事与用例

> ID：378856
> 
> 赞同：14
> 
> 时间：2008-12-18T19:07:36.610
> 
> 标签：requirements, user-stories, use-case

用例只是多个用户故事吗？

使用用户故事而不是用例有什么好处……反之亦然……何时使用一个而不是其他……所有敏捷方法都使用用户故事吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-12-18T19:24:11.490

实际上，最初的用例（参见[Jacobson 的 OOSE](https://rads.stackoverflow.com/amzn/click/com/0201544350)）非常轻量级，就像现在的用户故事一样。随着时间的推移，它们发展到现在“用例”的通用格式是包含输入、输出、继承、使用关系、伪代码等的复杂文档。程序员通常会尝试将所有内容转换为编程。

无论如何，试图从“场景”中定义“用例”与“用户故事”的区别是徒劳的，因为很难找到两个同意的权威。\

就个人而言，我发现模式“[Actor] [verbs] [noun] to get [business value]”很有帮助。如果它超过了一段文字，它可能太大了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-18T19:13:09.610

归根结底，“敏捷”只是一个标签，人们不同意它的确切含义。同样，人们将非常不同的事物称为“用例”。

根据我的经验，两者之间的主要区别在于用户故事以用户为中心，并且通常更短且不那么正式——理想情况下，它应该很容易放在明信片上。它可能没有提供错误处理等的详细信息。

用例*可以*更加正式（尽管有些人也可以非正式地编写它们）——它们关注与系统的每次交互，并且很可能在同一个用例中更详细地介绍几个不同的系统/参与者/等。

不过，这只是我的经验——每个人都有可能以不同的方式使用这些工具。我不会太在意标签——只要使用对你的项目有用的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T19:49:24.137

用例不是用户故事的汇编。

用户故事通常比用例简单得多。我认为用例试图涵盖与系统某些方面的行为有关的所有内容。也就是说，所有行为、所有错误路径和所有异常处理。

推荐给用户的模板是：

> 作为（角色）我想要（某事）以便（受益）

（感谢 Mike Cohn 提供这个简单的模板）

像这样表达的行为描述更加灵活。

这种模板让您可以使用不同级别的详细信息来描述行为。例如：

1.  对于那些在更晚的 sprint 中实施的故事，您可以以高级方式描述行为，例如，作为一名运营团队成员，我想远程监控系统，以便在旅途中确定系统健康状况。
2.  对于在下一个 sprint 中实施的那些故事，您可以描述行为是一种稍微更详细的方式，例如，作为一名运维团队成员，我希望有一个专门的运维人员登录，以便我可以检查系统健康状况。
3.  对于当前 sprint 中正在实施的那些故事，您可以以非常详细的方式描述行为，例如，作为一名运维团队成员，我想要一个 Web 界面，以便我可以检查摄取 ftp 服务器的当前状态。

恕我直言，用例更加刻板！因此，在初始版本之后更新可能是一个问题。

高温高压

干杯，

抢

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-12-18T19:14:54.223

一言以蔽之，没有。

用例通常是详细的规范，说明某些特定功能将如何工作，或者特定用户将如何使用系统。它通常是特定用户（或演员）的声音，并且是相当独立的。

另一方面，用户故事是“讨论邀请”。它通常是一两个句子。[这](http://www.extremeprogramming.org/rules/userstories.html)是一个很好的资源。Mike Cohn 的[用户故事应用](http://www.mountaingoatsoftware.com/book/2)非常值得。

典型的语法是“作为 <user> 我需要 <functionality> 来实现 <business value>”，或“为了实现 <business value> 作为 <user> 我需要 <functionality>”，这将故事的价值带回家.

用户故事*并不*意味着是独立的，而是旨在邀请开发人员和客户（或客户代理）之间的故事讨论。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-12-18T19:14:31.837

您可以将用例视为用户故事，但反之则不然。一个用例将涵盖故事的多个“结局”、特殊要求（例如，表单字段必须以 xyz 格式输入，如果用户以错误格式输入字段，则显示错误消息 123）。此外，一个用例可以包括对外部文档的附加引用，例如安全指南。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-14T13:01:43.930

**用户故事**是敏捷开发中使用的一种工具，可确保您创建用户真正需要的产品。

*   它描述**了为什么**你应该做这个或那个特性而不是**HOW**或**WHAT 特性**。
*   根据我的个人经验，这是平衡客户和开发人员的愿景以创造更好产品的好方法。

与美国不同，**用例**侧重于 WHO 使用您的产品。这就是区别。

我想说，对于敏捷开发人员来说，没有像用户故事这样的工具。如果您想学习如何成功编写它们，请查看[这篇](https://magora-systems.com/how-to-write-great-user-stories/)文章。

# ms-access - 更新 Access 的语法

> ID：378862
> 
> 赞同：2
> 
> 时间：2008-12-18T19:09:46.637
> 
> 标签：ms-access, syntax

我需要根据与另一个表的匹配来更新一个字段（当前为空）。这应该很简单，但我的语法是错误的。

在 SQLServer 2005 中，语法为

```
UPDATE Facilities-NOID
SET Facilities-NOID.ID = Facilities-ID.ID
FROM Facilities-NOID, Facilities-ID
WHERE [Facilities-ID].[Structure ID] = [Facilities-NOID].[Structure ID]; 
```

Access 不喜欢该 FROM 行，但如果我将其省略，它需要每个 ID。这应该很简单，但我在更新语法的 MS 帮助中没有看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T20:57:29.803

我认为这就是你想要的：

```
UPDATE Facilities-NOID 
INNER JOIN Facilities-ID ON Facilities-NOID.[Structure ID] 
    = Facilities-ID.[Structure ID]
SET Facilities-NOID.ID= Facilities-ID.ID 
```

您正在根据设施 ID 中出现的结构 ID 匹配来更新设施 NOID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T19:47:04.893

完全删除 FROM 子句

```
UPDATE Facilities-NOID
SET Facilities-NOID.ID = Facilities-ID.ID
WHERE [Facilities-ID].[Structure ID] = [Facilities-NOID].[Structure ID]; 
```

（这就是查询构建器最终构建它们的方式）

# string - 如何在 Perl 中将人们的全名解析为用户名？

> ID：378864
> 
> 赞同：4
> 
> 时间：2008-12-18T19:10:08.320
> 
> 标签：string, perl, parsing, substring

我需要将 Parisi, Kenneth 格式的名称转换为 kparisi 格式。

有谁知道如何在 Perl 中做到这一点？

以下是一些异常的示例数据：

Zelleb, Charles F., IV
Eilt, John, IV Wods
, Charles R., III
Welkt, Craig P.,, Jr.

这些特定名称应以 czelleb、jeilt、cwoods、cwelkt 等结尾。

* * *

到目前为止，我还有一个条件正在毁掉我的名字生成器

O'Neil，Paul

，Vinko Vrsalovic 的答案在混合使用奇怪/腐败的名字时效果最好，但上面的这个例子会以“pneil”的形式出现......如果我不能在 p 和 n 之间得到那个 o，我会在犹大之下被诅咒

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T19:27:05.960

```
vinko@parrot:~$ cat genlogname.pl

```

```
use strict;
use warnings;

my @list;
push @list, "Zelleb, Charles F.,,IV";
push @list, "Eilt, John,, IV";
push @list, "Woods, Charles R.,,III";
push @list, "Welkt, Craig P.,,Jr.";

for my $name (@list) {
        print gen_logname($name)."\n";
}

sub gen_logname {
        my $n = shift;
        #Filter out unneeded characters
        $n =~ s/['-]//g;
        #This regex will grab the lastname a comma, optionally a space (the 
        #optional space is my addition) and the first char of the name, 
        #which seems to satisfy your condition
        $n =~ m/(\w+), ?(.)/;
        return lc($2.$1);
} 
```

```
vinko@parrot:~$ perl genlogname.pl
策勒布
投降
乔木
关注

```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-18T19:18:42.937

我将从过滤异常数据开始，以便您只有常规名称。然后像这样的东西应该可以解决问题

```
$t = "Parisi, Kenneth";
$t =~ s/(.+),\s*(.).*/\l$2\l$1/; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T19:14:30.107

尝试：

```
$name =~ s/(\w+),\s(\w)/$2$1/;
$name = lc $name; 
```

`\w`这里匹配一个字母数字字符。如果你想更具体，你也可以使用`[a-z]`，并传递`i`标志（不区分大小写）：

```
$name =~ s/([a-z]+)\s([a-z])/$2$1/i; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-20T00:59:17.253

这是一个单行解决方案，假设您将所有名称存储在一个名为“names”的文件中（每行一个），并且稍后您将以某种方式进行重复名称检测。

```
cat names | perl -e 'while(<>) {/^\s*(\S*)?,\s*(\S)/; print lc "$2$1\n";}' | sed s/\'//g 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-12-20T02:53:51.810

看起来您的输入数据是以逗号分隔的。对我来说，最清晰的方法是拆分成组件，然后从中生成登录名：

```
while (<>) {
    chomp;
    my ($last, $first) = split /,/, lc $_;
    $last =~ s/[^a-z]//g;  # strip out nonletters
    $first =~ s/[^a-z]//g; # strip out nonletters
    my $logname = substr($first, 0, 1) . $last;
    print $logname, "\n";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-23T18:07:34.023

```
 $rowfetch =~ s/['-]//g; #All chars inside the [ ] will be filtered out.
    $rowfetch =~ m/(\w+), ?(.)/;
    $rowfetch = lc($2.$1); 
```

这就是我最终使用 Vinko Vrsalovic 解决方案的方式......它在一个遍历 sql 查询结果的 while 循环内......再次感谢 vinko

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-02T15:34:33.410

这应该做你需要的

```
use strict;
use warnings;
use 5.010;

while ( <DATA> ) {
    say abbreviate($_);
}

sub abbreviate {
    for ( @_ ) {
        s/[-']+//g;
        tr/A-Z/a-z/;
        tr/a-z/ /c;
        return "$2$1" if /([a-z]+)\s+([a-z])/;
    }
}

__DATA__
Zelleb, Charles F.,,IV
Eilt, John,, IV
Woods, Charles R.,,III
Welkt, Craig P.,,Jr.
O'Neil, Paul 
```

### 输出

```
czelleb
jeilt
cwoods
cwelkt
poneil 
```

# c++ - C++ 命名空间：交叉使用

> ID：378876
> 
> 赞同：2
> 
> 时间：2008-12-18T19:14:04.693
> 
> 标签：c++, namespaces, include

考虑以下示例。它由两个头文件组成，声明了两个不同的命名空间：

```
// a1.h
#pragma once
#include "a2.h"

namespace a1 
{
    const int x = 10;
    typedef a2::C B;
} 
```

第二个是

```
// a2.h    
#pragma once
#include "a1.h"

namespace a2 {
  class C {
  public:
    int say() {
      return a1::x; 
    }
  };
} 
```

和一个单一的源文件，`main.cpp`：

```
#include <iostream>
#include "a1.h"
#include "a2.h"

int main()
{
  a2::C c;
  std::cout << c.say() << std::endl;
} 
```

这样它就不会编译（尝试过 GCC 和 MSVC）。错误是`a1`未声明命名空间（Windows 上的 C2653）。如果您以`main.cpp`这种方式更改包含顺序：

```
#include "a2.h"
#include "a1.h" 
```

您会收到一条对称错误消息，即`a2`未声明命名空间。

有什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-12-18T19:25:21.160

您需要在头文件中使用前向声明，因为您有循环引用。像这样的东西：

```
// a1.h
#pragma once

namespace a2 {
    class C;
}

namespace a1 
{
    const int x = 10;
    typedef a2::C B;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-12-18T19:21:04.850

只是一个猜测，但您的包含引用是循环的。这意味着编译器无法确定首先编译哪个头文件。a1 引用 a2 引用 a1。

如果可能，合并/重组文件，以便有一个非循环的包含链。

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-18T19:59:33.383

当您首先包含 a1.h 时，它会在声明任何内容之前立即尝试包含 a2.h

a2.h 引用了命名空间 a1 中尚未声明的内容

当您首先包含 a2.h 时，它会在声明任何内容之前立即尝试包含 a1.h

a1.h 引用了命名空间 a2 中尚未声明的内容

从您没有使用的 a1.h 中删除 typedef 并且不包括 a2.h 会删除循环。

或者像其他评论者一样，转发声明 C 类。

```
// a1.h
#pragma 一次
//#包括“a2.h”

命名空间 a1
{
    常量 int x = 10;
// typedef a2::CB;
}

```

# jquery - Jquery - 无法选择父 div

> ID：378880
> 
> 赞同：2
> 
> 时间：2008-12-18T19:14:32.057
> 
> 标签：jquery, dom

我希望这不是浪费时间，但是我一直在努力解决这个问题。是我的语法吗。一旦单击带有“.remove-link”类的链接，我只想删除父div“.number-row”。

提前致谢

```
<script>
$(document).ready(function(){
    $(".remove-link").click(function() {
        $(this).parent(".number-row").hide();
    })
})
</script> 
```

* * *

```
<div class="number-row" >
   <div class="number-column">
         <div class="label-row">
             Select Country:
         </div>
         <div class="input-row">
             <select>
                 <option>1</option>
                 <option>2</option>
             </select>
         </div>
         <div class="label-row">
             Select Toll Free or City:
         </div>
         <div class="input-row">
             <select>
                 <option>1</option>
                 <option>2</option>
             </select>
         </div>
         <div class="label-row">
             Select Your Number:
         </div>
         <div class="input-row">
             <select>
                 <option>1</option>
                 <option>2</option>
             </select>
         </div>
     </div>
   <div class="number-column">
         <div class="label-row">
             Select Country:
         </div>
         <div class="input-row">
             <select>
                 <option>1</option>
                 <option>2</option>
             </select>
         </div>
         <div class="label-row">
             Enter Number to Forward to:
         </div>
         <div class="input-row">
            <input type="text" name="forward_number" id="forward_number" />
         </div>
         <div class="number-row-options">
            <a class="save-link" href="#">Save</a>
            <a class="remove-link" href="#">Remove</a>
         </div>                    
     </div>                    
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-12-18T19:20:43.853

尝试[parents()](http://docs.jquery.com/Traversing/parents)而不是[parent()](http://docs.jquery.com/Traversing/parent)：

```
$(document).ready(function(){
    $(".remove-link").click(function() {
        $(this).parents(".number-row").eq(0).hide();
    })
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:20:32.557

这个应该做...

```
$(document).ready(function(){ 
    $(".remove-link").click(function() { 
        $(this).parent().parent().parent().hide();
    }) 
}) 
```

请注意，这不会**删除**您要求的 ；它只是**隐藏**它。您可以使用`remove()`而不是`hide()`将其从 DOM 中删除。

# sql-server - 间歇性 SQL Server ODBC 超时已过期

> ID：378881
> 
> 赞同：3
> 
> 时间：2008-12-18T19:14:34.503
> 
> 标签：sql-server, vb6, odbc

我们有一堆 VB6 应用程序可以访问两个不同的数据库服务器（都是 32 位 windows 2003，一个 SQL Server 2000，一个 SQL Server 2005）。大约每十分钟左右，我们就会收到一些错误：

> [Microsoft][ODBC SQL Server 驱动程序]超时[Microsoft][ODBC SQL Server 驱动程序][DBNETLIB]SQL Server 不存在或访问被拒绝。[Microsoft][ODBC SQL Server 驱动程序]ConnectionRead()

这种情况随机发生在十几台不同的计算机上。我们也有 IP 电话，它们都通过同一个网络运行，并且没有任何问题。我们还可以将 VNC 导入用户计算机并重现他们遇到的错误，但 VNC 仍然可以继续工作。电子邮件也可以。它似乎只是导致问题的 SQL Server 的 ODBC 连接。我们的两个 SQL Server 都会发生错误。我们搜索了谷歌，但还没有找到解决方案。有什么我们可以尝试诊断问题的方法吗？有什么解决办法吗？

### 更新：

我们在服务器或客户端上都没有内部防火墙。我们通过服务器的 dns 名称通过 TCP/IP 连接（也尝试过 IP 地址）。

一台服务器装有 Windows 2003 SP2，而另一台则没有。

奇怪的是，它多年来一直运行良好，但突然间这些错误正在发生。很长一段时间以来，这些服务器上没有任何变化。这使我们相信这是一个糟糕的开关，但这似乎不太可能，因为没有其他任何东西（电子邮件、电话、vnc、文件服务器等）都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-18T19:22:17.330

查看此 Microsoft 知识库文章。

[安装 Windows Server 2003 SP2 后出现一些问题](http://support.microsoft.com/kb/945977)

我还建议您切换到 OLE DB 提供程序。以我的经验，它比 ODBC 更快，也更可靠。

[连接字符串](http://connectionstrings.com/sql-server-2005)

向下滚动到：SQL Native Client OLE DB Provider

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T19:37:25.893

您是否使用非默认实例？或者你有内部防火墙？

我们更改为“server.fqdn.tld\instance,port”以避免来自内部防火墙后面的客户端的这种确​​切 (IIRC) 间歇性连接问题。

只有 SQL 连接受到影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-09-28T20:18:29.703

我们从来没有弄清楚为什么会发生这种情况。我们将服务器升级到 SQL Server 2008 并且错误消息停止了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-06-23T17:53:00.187

我最近遇到了一个非常相似的问题并将[其发布在这里](https://stackoverflow.com/questions/3095487/classic-asp-application-experiencing-sql-server-timeouts-and-sql-server-does-n)。

**ScottE 找到了解决方案。**

# java - 如何从 HSSFWorkbook 对象获取输入流

> ID：378883
> 
> 赞同：12
> 
> 时间：2008-12-18T19:15:00.667
> 
> 标签：java, apache-poi

我希望我的 Web 应用程序用户将一些数据下载为 Excel 文件。

我有下一个函数在响应对象中发送输入流。

```
public static void sendFile(InputStream is, HttpServletResponse response) throws IOException {
        BufferedInputStream in = null;
        try {
            int count;
            byte[] buffer = new byte[BUFFER_SIZE];
            in = new BufferedInputStream(is);
            ServletOutputStream out = response.getOutputStream();
            while(-1 != (count = in.read(buffer)))
                out.write(buffer, 0, count);
            out.flush();            
        }   catch (IOException ioe) { 
            System.err.println("IOException in Download::sendFile"); 
            ioe.printStackTrace();
        } finally {
            if (in != null) {
                try { in.close(); 
                } catch (IOException ioe) { ioe.printStackTrace(); }
            }   
        }
    } 
```

我想将我的 HSSFWorkbook 对象转换为输入流并将其传递给上一个方法。

```
public InputStream generateApplicationsExcel() {
    HSSFWorkbook wb = new HSSFWorkbook();
    // Populate the excel object
    return null; // TODO. return the wb as InputStream 
} 
```

[http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-12-18T21:08:41.467

您的问题的问题是您正在混合 OutputStreams 和 InputStreams。InputStream 是您读取的内容，OutputStream 是您写入的内容。

这就是我将 POI 对象写入输出流的方式。

```
// this part is important to let the browser know what you're sending
response.setContentType("application/vnd.ms-excel");
// the next two lines make the report a downloadable file;
// leave this out if you want IE to show the file in the browser window
String fileName = "Blah_Report.xls";
response.setHeader("Content-Disposition", "attachment; filename=" + fileName); 

// get the workbook from wherever
HSSFWorkbook wb = getWorkbook();
OutputStream out = response.getOutputStream();
try {
   wb.write(out);
}       
catch (IOException ioe) { 
  // if this happens there is probably no way to report the error to the user
  if (!response.isCommited()) {
    response.setContentType("text/html");
    // show response text now
  }
} 
```

如果您想重用现有代码，则必须将 POI 数据存储在某处，然后将其转换为输入流。这很容易通过将其写入 ByteArrayOutputStream，然后使用 ByteArrayInputStream 读取这些字节来完成，但我不推荐它。您现有的方法作为通用管道实现会更有用，您可以在其中将数据从 InputStream 管道传输到 OutputStream，但您不需要它来编写 POI 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-16T07:12:43.100

您可以从对象创建 InputStream。

```
public InputStream generateApplicationsExcel() {
    HSSFWorkbook wb = new HSSFWorkbook();
    // Populate a InputStream from the excel object
    return new ByteArrayInputStream(excelFile.getBytes());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-20T11:18:20.933

我的解决方案是先将 HSSFWorkbook 传输到 ByteArrayOutputStream ，然后从 ByteArrayOutputStream 创建一个 InputStream ：

```
 HSSFWorkbook wb = ...

        // Fill an empty output stream
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        wb.write(baos);

        // Close the document
        wb.close();

        // Create the input stream (do not forget to close the inputStream after use)
        InputStream is = new ByteArrayInputStream(baos.toByteArray()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-18T20:31:05.257

我想我理解你想要做什么（也许我低于预期）

你真的不需要那么多代码 - 查看 write 方法 -

```
HSSFWorkbook wb = new HSSFWorkBook();
//populate

ServletOutputStream out = response.getOutputStream();
try {
   wb.write(out);
   out.flush();
}       
catch (IOException ioe) { 
   //whatever
}
out.close(); 
```

据我记得当我使用 POI 工作时，我就是这样做的。如果您在 Web 框架中，则可能必须对其进行调整，以便框架在您关闭它后不会尝试对 ServletOutputStream 执行某些操作。如果它尝试，你会得到一个异常抛出，告诉你输出流已经关闭。

# ruby - 如何在 Ruby 中计算字符串的宽度？

> ID：378887
> 
> 赞同：7
> 
> 时间：2008-12-18T19:17:25.093
> 
> 标签：ruby, typography

`String.length`只会告诉我字符串中有多少个字符。（其实在 Ruby 1.9 之前，它只会告诉我有多少字节，这更没用了。）

我真的很想知道一个字符串有多少'en'宽。例如：

```
'foo'.width
# => 3

'moo'.width
# => 3.5          # m's, w's, etc. are wide

'foi'.width
# => 2.5          # i's, j's, etc. are narrow

'foo bar'.width
# => 6.25         # spaces are very narrow 
```

`n`如果我能得到一个字符串的第一个 en会更好：

```
'foo'[0, 2.en]
# => "fo"

'filial'[0, 3.en]
# => "fili"

'foo bar baz'[0, 4.5en]
# => "foo b" 
```

如果我可以制定整个事情的战略，那就更好了。有些人认为空格应该是 0.25en，有些人认为应该是 0.33，等等。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-12-19T12:11:22.950

您应该使用 RMagick gem 使用您想要的字体渲染“Draw”对象（您可以加载 .ttf 文件等）

代码看起来像这样：

```
 the_text = "TheTextYouWantTheWidthOf"
   label = Draw.new
   label.font = "Vera" #you can also specify a file name... check the rmagick docs to be sure
   label.text_antialias(true)
   label.font_style=Magick::NormalStyle
   label.font_weight=Magick::BoldWeight
   label.gravity=Magick::CenterGravity
   label.text(0,0,the_text)
   metrics = label.get_type_metrics(the_text)
   width = metrics.width
   height = metrics.height 
```

您可以在我的按钮制作器中看到它的实际效果：[http ://risingcode.com/button/everybodywangchungtonite](http://risingcode.com/button/everybodywangchungtonite)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-25T17:24:23.220

使用[ttfunk](https://github.com/prawnpdf/ttfunk) gem 从字体文件中读取指标。然后，您可以在 em 中获取一串文本的宽度。[这是我将这个示例添加到 gem 中的拉取请求。](https://github.com/prawnpdf/ttfunk/pull/24)

```
require 'rubygems'
require 'ttfunk'
require 'valuable'
# Everything you never wanted to know about glyphs:
# http://chanae.walon.org/pub/ttf/ttf_glyphs.htm

# this code is a substantial reworking of:
# https://github.com/prawnpdf/ttfunk/blob/master/examples/metrics.rb

class Font
  attr_reader :file

  def initialize(path_to_file)
    @file = TTFunk::File.open(path_to_file)
  end

  def width_of( string )
    string.split('').map{|char| character_width( char )}.inject{|sum, x| sum + x}
  end

  def character_width( character )
    width_in_units = ( horizontal_metrics.for( glyph_id( character )).advance_width )
    width_in_units.to_f / units_per_em
  end

  def units_per_em
    @u_per_em ||= file.header.units_per_em
  end

  def horizontal_metrics
    @hm = file.horizontal_metrics
  end

  def glyph_id(character)
    character_code = character.unpack("U*").first
    file.cmap.unicode.first[character_code]
  end
end 
```

这是在行动：

```
>> din = Font.new("#{File.dirname(__FILE__)}/../../fonts/DIN/DINPro-Light.ttf")
>> din.width_of("Hypertension")
=> 5.832
# which is correct! Hypertension in that font takes up about 5.832 em! It's over by maybe ... 0.015. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-12-18T22:47:02.173

您可以尝试创建一个标准化的“宽度比例表”来计算近似值，基本上您需要存储每个字符的宽度，然后遍历字符串将宽度相加。

[我在这里](http://courses.ece.uiuc.edu/ece390/resources/varfont/varfont.html)找到了这张桌子：

```
Left, Width, Advance values for ArialBD16 'c' through 'm'
Letter  Left    Width   Advance
c        1       7       9
d        1       8       10
e        1       8       9
f        0       6       5
g        0       9       10
h        1       8       10
i        1       2       4
j       -1       4       4
k        1       8       9
l        1       2       4
m        1       12      14 
```

如果你想认真一点，我会从 webkit、gecko 和 OO.org 开始，但我猜字距调整和大小计算的算法并不简单。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2010-11-02T19:27:47.180

如果您安装了 ImageMagick，您可以从命令行访问此信息。

```
$ convert xc: -font ./.fonts/HelveticaRoundedLTStd-Bd.otf  -pointsize 24 -debug annotate -annotate 0 'MyTestString' null: 2>&1
2010-11-02T19:17:48+00:00 0:00.010 0.010u 6.6.5 Annotate convert[22496]: annotate.c/RenderFreetype/1155/Annotate
  Font ./.fonts/HelveticaRoundedLTStd-Bd.otf; font-encoding none; text-encoding none; pointsize 24
2010-11-02T19:17:48+00:00 0:00.010 0.010u 6.6.5 Annotate convert[22496]: annotate.c/GetTypeMetrics/736/Annotate
  Metrics: text: MyTestString; width: 157; height: 29; ascent: 18; descent: -7; max advance: 24; bounds: 0,-5  20,17; origin: 158,0; pixels per em: 24,24; underline position: -1.5625; underline thickness: 0.78125
2010-11-02T19:17:48+00:00 0:00.010 0.010u 6.6.5 Annotate convert[22496]: annotate.c/RenderFreetype/1155/Annotate
  Font ./.fonts/HelveticaRoundedLTStd-Bd.otf; font-encoding none; text-encoding none; pointsize 24 
```

要从 Ruby 中执行此操作，请使用反引号：

```
result = `convert xc: -font #{path_to_font} -pointsize #{size} -debug annotate -annotate 0 '#{string}' null: 2>&1`
if result =~ /width: (\d+);/
  $1
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-06-05T11:23:11.963

这是个好问题！

我正在尝试使用 ruby​​ 中的 pango/cairo 来解决它以进行 SVG 输出。我可能会使用 pango 来计算宽度，然后使用一个简单的 svg 元素。

我使用以下代码：

```
require "cairo"
require "pango"

paper = Cairo::Paper::A4_LANDSCAPE
TEXT = "Don't you love me anymore?"
def pac(surface)
        cr = Cairo::Context.new(surface)
        cr.select_font_face("Calibri",
                              Cairo::FONT_SLANT_NORMAL,
                              Cairo::FONT_WEIGHT_NORMAL)
    cr.set_font_size(12)
    extents = cr.text_extents(TEXT)
    puts extents
end

Cairo::ImageSurface.new(*paper.size("pt")) do |surface|
  cr = pac(surface)
end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-19T07:14:40.860

一旦我必须在两行中显示一个字符串数组（包含即将到来的世界日、当前命名日等），将换行符放在适当的字符串之后，我必须确定字符串的累积宽度，以 Arial 打印。我打开我的文字编辑器，输入字母表，然后根据给定字体的宽度将字符分为两类：

```
w="023456789AÁBCDEFGHJKLMNOÓÖŐPQRSTUÚÜŰWZYaábcdeghksoóöőpqwuúüűzymn".chars.yield_self{|z| z.zip(Array.new(z.size){1.5})}.to_h.merge("1rfiíjltIÍ ".chars.yield_self{|z| z.zip(Array.new(z.size){1})}.to_h)
w.default=1
nntd=["01-21:A vallások világnapja", "01-19:Kanut", "Kenéz", "Margaréta", "Márió", "Máriusz", "Megyer", "Sára", "Szultána", "Vázsony"]
nntd.sort_by!{|z| z.chars.map{|q| w[q]}.sum}.reverse 
```

然后我能够确定换行符的位置：

```
ind=nntd.collect.with_index.find_index{|z,i| nntd[0..i].join.chars.map{|q| w[q]}.sum >=nntd.join.chars.map{|q| w[q]}.sum/2}

t=[nntd[0..ind],nntd[ind+1..-1]].map{|z| z.join(",")}.join("\n") 
```

毕竟我得到了一个不错的平衡输出，分为两行：

01-21:A vallások világnapja,01-19:Margaréta,Szultána Vázsony,Máriusz,Megyer,Kenez,Kanut,Márió,Sára

[![在此处输入图像描述](https://i.stack.imgur.com/JKeSS.png)](https://i.stack.imgur.com/JKeSS.png)

这样，我可以眨眼检查即将到来的世界日和当前的命名日。

# c# - 操作可能会破坏运行时的稳定性？

> ID：378895
> 
> 赞同：40
> 
> 时间：2008-12-18T19:19:39.067
> 
> 标签：c#, .net, linq, linq-to-sql, .net-3.5

我在理解这里的问题时遇到了一些麻烦。我有一些代码使用 LINQ 从数据库中提取记录并将它们放入一个对象中，该对象被转换为一个接口。它看起来有点像这样：

```
public IEnumerable<ISomeObject> query()
{
    return from a in dc.SomeTable
           select new SomeObject
           {
             //Assign various members here
           } as ISomeObject;
} 
```

当我对此进行测试时，我将返回的 IEnumerable 放入一个名为 results 的变量中并运行这一行：

```
Assert.AreEqual(EXPECTED_COUNT, results.Count()); 
```

当它运行时，我得到一个 System.Security.VerificationException：“操作可能会破坏运行时的稳定性。”

我在[这里](http://devlicio.us/blogs/derik_whittaker/archive/2008/11/29/quot-operation-could-destabilize-the-runtime-quot-from-casting-from-concrete-to-interfaces-with-linq.aspx)找到了解决方案，就是这样：

```
var results = from a in dc.SomeTable
              select new SomeObject
              {
                //Assign various members here
              } as ISomeTable;
return results.OfType<ISomeObject>(); 
```

这行得通，但我无法理解这里发生了什么。为什么我首先得到异常，上面的代码行是如何修复它的？MSDN 文档似乎表明这是一个类型安全问题，但我没有看到以前的代码在哪里是类型不安全的。

**更新** 我发现的更多信息。如果我将返回类型设为 IQueryable，则第一个示例有效。*这对出了什么*问题有了更多的了解，但我仍然对*为什么*感到困惑。为什么编译器不强制我将 IEnumerable 转换为 IQueryable？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-12-18T20:15:54.990

我相信这是[这个论坛帖子](http://www.manning-sandbox.com/message.jspa?messageID=77137#77137)所指出的协变或逆变问题。

请参阅 Eric Lippert 博客[中的 C# 中的协方差和逆变，第二部分：数组协方差和](http://blogs.msdn.com/ericlippert/archive/2007/10/17/covariance-and-contravariance-in-c-part-two-array-covariance.aspx)[协方差和逆变系列](http://blogs.msdn.com/ericlippert/archive/tags/Covariance+and+Contravariance/default.aspx)的其余部分。

尽管他在我链接的文章中处理数组，但我相信这里会出现类似的问题。对于您的第一个示例，您将返回一个`IEnumerable`可能包含实现*大于*的接口的对象`ISomeTable`（即 - 当 IEnumerable 只能包含 Giraffes 时，您可以将 Turtle 放入 Animals IEnumerable）。我认为当你返回时它起作用的原因`IQueryable`是因为它比你可以返回的任何东西都*更大/更宽*，所以你可以保证你返回的东西你将能够处理（？）。

在第二个示例中，[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)确保返回的是一个对象，该对象存储了仅返回可以转换为 Giraffe 的那些元素所需的所有信息。

我很确定这与上面概述的类型安全问题有关，但正如 Eric Lippert 所说，[高阶函数伤害了我的大脑](http://blogs.msdn.com/ericlippert/archive/2007/10/24/covariance-and-contravariance-in-c-part-five-higher-order-functions-hurt-my-brain.aspx)，我无法准确地表达为什么这是一个协变/逆变问题。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2010-05-21T15:23:31.807

我在寻找自己的“操作可能会破坏运行时”的解决方案时发现了这个条目。虽然上面的协方差/反方差建议看起来很有趣，但最后我发现在打开代码覆盖并设置 AllowPartiallyTrustedCallers 程序集属性的情况下运行单元测试会得到相同的错误消息。

**删除 AllowPartiallyTrustedCallers 属性导致我的测试运行良好。** 我也可以关闭代码覆盖以使它们运行，但这不是一个可接受的解决方案。

希望这可以帮助其他进入此页面的人尝试找到解决此问题的方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-12-18T19:29:52.727

只是一个猜测，但**as**运算符可能返回 null - 因此它可能与`new SomeObject { ... }`代码的实际实现有关，因为它是语法糖。`return results.OfType<ISomeTable>();`基于类型的过滤器，因此您的方法的 return 语句将仅返回该类型（确保类型安全）。我在返回泛型类型时遇到了类似的问题。

PS 我喜欢“操作可能会破坏运行时的稳定性”。例外。这几乎就像“你可能会炸毁互联网”的例外。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T08:45:18.707

我用类似的代码遇到了这个错误；

```
IEnumerable<Table> records = (from t in db.Tables
                              where t.Id.Equals(1)
                              select t).ToList(); 
```

这个看似无害的代码是从 Page 调用的 UserControl 方法的一部分。在 .NET4 开发环境中没有问题，但是，当站点被预编译并部署到 .NET3.5 上的服务器时，我得到了这个错误。

我怀疑这与控件被编译为单独的 DLL 以及框架之间的安全更改有关，如[本 .NET 安全博客中所述](http://blogs.msdn.com/b/shawnfa/archive/2009/11/12/differences-between-the-security-rule-sets.aspx)

我的解决方案：在 .NET4 上运行实时站点

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-06T12:01:44.757

`我已在 System.Security.VerificationException 部分中添加到 web.config 文件：“操作可能会破坏运行时的稳定性。” 不来找我。

```
<system.Web>
<trust level="Full"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-12-18T19:38:02.180

如果您更改它是否仍然失败：

```
select new SomeObject { ... } as ISomeTable; 
```

对此：

```
select (ISomeTable) new SomeObject { ... }; 
```

?

如果是这样（我看到你已经确认），也许这与接口实现可以是类或结构的事实有关？如果您转换为抽象类而不是接口，问题是否仍然存在？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-05T02:51:44.737

我发现 OfType 在使用 linq to sql 时有一些令人讨厌的副作用。例如，之前在对 db 运行查询后评估的部分 linq 被转换为 SQL。这失败了，因为这些部分没有等效的 SQL。我最终改用 .Cast ，这似乎也解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-20T07:59:46.133

就我而言，我错误地在 Linq2SQL 类的 Column 属性中声明了 Storage 属性

```
 [Column(Storage = "_Alias", DbType = "NVarChar(50)")]
    public string UserAlias 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-02T20:25:56.567

我有同样的问题，但是通过继承，我在程序集 A 中定义了一个类，在程序集 B 中定义了一个子类，之后我将以下属性添加到程序集 A，问题解决了：

```
[assembly: SecurityRules(SecurityRuleSet.Level1, SkipVerificationInFullTrust = true)] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-06-06T15:01:01.563

[我在使用“动态数据访问框架”被动库](https://github.com/Talljoe/Passive)时遇到了这个错误。错误的来源是 DynamicDatabase.cs 文件中的第 100 行。

```
databaseDetectors = (databaseDetectors ?? Enumerable.Empty<DatabaseDetector>()).DefaultIfEmpty(new DatabaseDetector()); 
```

我将该行代码更改为：

```
databaseDetectors = (databaseDetectors ?? Enumerable.Empty<DatabaseDetector>()).DefaultIfEmpty(new DatabaseDetector()).OfType<IDatabaseDetector>(); 
```

这样做解决了问题。我继续[分叉项目](https://github.com/Jabberrwocky/Passive)并将更改提交给原作者。

感谢 Jason Baker 在您最初的问题中指出解决方案。

附带说明一下，原始库在我的本地机器和 Rackspace VPS 上运行良好，但是当我将相同的代码推送到共享托管环境（GoDaddy 和 Rackspace 的云站点）时，我开始收到“操作可能会破坏运行时的稳定性“ 错误。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2008-12-18T21:00:17.973

我猜想，Linq to Sql 在翻译为 sql 语句时可能不支持强制转换。

# java - 如何从命令行使用“java”调用 groovy

> ID：378905
> 
> 赞同：14
> 
> 时间：2008-12-18T19:22:29.060
> 
> 标签：java, command-line, groovy

我必须将一些 groovy 代码发送给一些只安装了 java 的用户（没有 grooy，没有 $groovy_home 等）。我正在尝试从命令行调用 groovy，但我没有运气。这是我的bat文件：

```
java -classpath .;lib;bin;bin-groovy introspector.AclCollector 
```

这是我的例外：

```
Exception in thread "main" java.lang.NoClassDefFoundError: groovy/lang/GroovyObject
       at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
        at java.net.URLClassLoader.access$000(URLClassLoader.java:56)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Caused by: java.lang.ClassNotFoundException: groovy.lang.GroovyObject
        at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
        ... 12 more
Could not find the main class: introspector.AclCollector.  Program will exit. 
```

有人有线索吗？我在 \lib 目录中有“groovy-all-1.6-beta-1.jar”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-12-18T20:00:35.193

[这里](http://marc.info/?l=ant-user&m=120407907827987&w=2)有另一个从 Java 调用的 Groovy 应用程序示例（在本例中，来自 ant，但总体思路是相同的）。

```
java -cp [...];%GROOVY_HOME%/embeddable/groovy-all-1.5.4.jar;[..] 
```

正如 frankowyer 所提到的，您在 java.util.java 的类路径参数中明确列出了确切的 groovy jar。

由于您的客户没有特殊的环境变量，只需将 替换为`%GROOVY_HOME%/...`以下的完整路径：

*   groovy.jar 或
*   [goovy-all-VERSION.jar](http://groovy.codehaus.org/Ant+Task+Troubleshooting)（以尽量减少与其他库的任何冲突）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-12-18T19:25:48.600

我认为您需要在类路径中明确列出 groovy jar

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2011-08-02T15:50:01.393

避免不同机器上不同类路径问题的一种方法是将所有必要的依赖项捆绑到一个 jar 中，这也将使分发给用户更容易。这可以通过这个“GroovyWrapper”脚本来完成。默认情况下，脚本中包含默认 jars（embeddable/groovy-all- *.jar 和 lib/* commons.jar），如果您需要其他 JARS，可以轻松添加它们。

有关完整脚本和说明，请参阅[http://docs.codehaus.org/display/GROOVY/WrappingGroovyScript](http://docs.codehaus.org/display/GROOVY/WrappingGroovyScript)。

**下面是一个如何使用 GroovyWrapper 的示例：**

假设你有 groovy 脚本 HelloWorld.groovy，使用 GroovyWrapper 构建 HelloWorld.jar，如下：

```
$ groovy GroovyWrapper -c -m HelloWorld 
```

GroovyWrapper 会将脚本 HelloWorld.groovy 编译为 HelloWorld.class，并创建一个自执行 jar HelloWorld.jar。

现在您可以使用 HelloWorld.jar 来启动 HelloWorld 脚本，只需运行：

```
$ java -jar HelloWorld.jar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-02-04T08:30:31.397

VonC 的最佳答案：

> .......由于您的客户没有特殊的环境变量，只需将`%GROOVY_HOME%/`... 替换为完整路径：
> 
> ```
> groovy.jar or
> goovy-all-VERSION.jar (to minimize any conflict with other libraries)........ 
> ```

这适用于 Windows Vista：

在系统属性 | 环境变量 | 用户变量：变量名称`GROOVY_HOME`设置为`C:\groovy\Groovy-1.8.5` ，变量名称`CLASSPATH`值设置为包括`.;%GROOVY_HOME%\embeddable\groovy-all-1.8.5.jar`

不要犯我犯的错误（稍微转动我的轮子），不要用“.;”预先结束'groovy-all'的路径 （点和分号）：因为路径需要您所在的基本文件夹来查找主类（看起来很奇怪）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-05T12:02:44.960

小心[~]！

```
java -cp .:~/path-to-groovy-all.jar YourClassName     # does not work
java -cp ~/path-to-groovy-all.jar:. YourClassName     # works
java -cp .:/full/path/to/goovy-all.jar YourClassName  # works 
```

在第一行波浪号没有被bash处理，java无法理解。

在第二行，波浪号被 bash 取代，一切正常。

# django - 如何将 NamedTemporaryFile 保存到 Django 中的模型 FileField 中？

> ID：378909
> 
> 赞同：5
> 
> 时间：2008-12-18T19:23:15.143
> 
> 标签：django, file, upload, model, temporary-files

我创建了一个 NamedTemporaryFile，在其中添加了一些内容，现在我想将其保存到模型 FileField 中。

问题是我得到一个 SuspiciousOperation 因为 tmp 目录不在 FileSystemStorage 目录中。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-19T12:09:13.953

您希望 django 为您检查它，因为它确保文件放在 MEDIA_ROOT 目录中，因此可以下载。

在任何情况下，您想将文件放在 MEDIA_ROOT 之外（在本例中为“/tmp”），您应该执行以下操作：

```
from django.core.files.storage import FileSystemStorage
fs = FileSystemStorage(location='/tmp')

class YourModel(models.Model):
    ...
    file_field = models.FileField(..., storage=fs) 
```

参见[Django 文档](http://docs.djangoproject.com/en/dev/topics/files/#the-built-in-filesystem-storage-class)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-19T16:54:01.757

我最终采用了 romke 解释的相反方式：我正在 MEDIA_ROOT 中创建临时文件。

另一种解决方案可能是使用 /tmp 中的文件，然后将其移动到 MEDIA_ROOT。

我最初的困惑来自表单处理上传文件的方式：它们位于 /tmp 目录（或内存中），然后自动移动到 upload_to 目录。我在 Django 中寻找一种通用的方法。

# python - 检查 Python 变量类型的最佳（惯用）方法是什么？

> ID：378927
> 
> 赞同：340
> 
> 时间：2008-12-18T19:27:57.347
> 
> 标签：python, types, typechecking

我需要知道 Python 中的变量是字符串还是字典。下面的代码有什么问题吗？

```
if type(x) == type(str()):
    do_something_with_a_string(x)
elif type(x) == type(dict()):
    do_somethting_with_a_dict(x)
else:
    raise ValueError 
```

**更新**`isinstance`：我接受了 avisser 的回答（尽管如果有人解释为什么优先于 ，我会改变主意`type(x) is`）。

但感谢裸狂热者提醒我，使用 dict（作为案例陈述）通常比使用 if/elif/else 系列更干净。

让我详细说明我的用例。如果一个变量是一个字符串，我需要把它放在一个列表中。如果它是一个字典，我需要一个唯一值列表。这是我想出的：

```
def value_list(x):
    cases = {str: lambda t: [t],
             dict: lambda t: list(set(t.values()))}
    try:
        return cases[type(x)](x)
    except KeyError:
        return None 
```

如果`isinstance`是首选，您将如何编写此`value_list()`函数？

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2008-12-18T21:54:26.977

如果有人将 unicode 字符串传递给您的函数会发生什么？还是从dict派生的类？还是一个实现类dict接口的类？以下代码涵盖了前两种情况。如果您使用的是 Python 2.6，您可能希望使用[`collections.Mapping`](https://docs.python.org/2/library/collections.html#collections.Mapping)而不是`dict`按照[ABC PEP](http://www.python.org/dev/peps/pep-3119/)。

```
def value_list(x):
    if isinstance(x, dict):
        return list(set(x.values()))
    elif isinstance(x, basestring):
        return [x]
    else:
        return None 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2008-12-18T19:49:33.263

`type(dict())`说“制作一个新的字典，然后找出它的类型是什么”。说just更快`dict`。但是，如果您只想检查类型，则更惯用的方法是`isinstance(x, dict)`.

请注意，这`isinstance`还包括子类（感谢[Dustin](https://stackoverflow.com/users/39975/dustin)）：

```
class D(dict):
    pass

d = D()
print("type(d) is dict", type(d) is dict)  # -> False
print("isinstance (d, dict)", isinstance(d, dict))  # -> True 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2008-12-18T19:43:23.963

Python 中的内置类型具有内置名称：

```
>>> s = "hallo"
>>> type(s) is str
True
>>> s = {}
>>> type(s) is dict
True 
```

顺便说一句，请注意*is*运算符。然而，类型检查（如果你想这样称呼它）通常是通过在 try-except 子句中包装特定类型的测试来完成的，因为重要的不是变量的类型，而是你是否可以做某有没有。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2008-12-18T23:48:43.080

isinstance 比 type 更可取，因为当您将对象实例与其超类进行比较时，它的评估结果也为 True，这基本上意味着您不必将旧代码与 dict 或 str 子类一起使用。

例如：

```
 >>> class a_dict(dict):
 ...     pass
 ... 
 >>> type(a_dict()) == type(dict())
 False
 >>> isinstance(a_dict(), dict)
 True
 >>> 
```

当然，在某些情况下您可能不想要这种行为，但希望这些情况比您确实想要的情况要少得多。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-12-19T01:25:58.873

我想我会采用鸭子打字方法 - “如果它像鸭子一样走路，它会像鸭子一样嘎嘎叫，它就是一只鸭子”。这样您就不必担心字符串是 unicode 还是 ascii。

这是我要做的：

```
In [53]: s='somestring'

In [54]: u=u'someunicodestring'

In [55]: d={}

In [56]: for each in s,u,d:
    if hasattr(each, 'keys'):
        print list(set(each.values()))
    elif hasattr(each, 'lower'):
        print [each]
    else:
        print "error"
   ....:         
   ....:         
['somestring']
[u'someunicodestring']
[] 
```

欢迎这里的专家评论这种类型的ducktyping用法，我一直在使用它，但最近了解了它背后的确切概念，对此感到非常兴奋。所以我想知道这是否有点矫枉过正。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-12-18T20:33:10.913

我认为实际上可能更喜欢这样做

```
if isinstance(x, str):
    do_something_with_a_string(x)
elif isinstance(x, dict):
    do_somethting_with_a_dict(x)
else:
    raise ValueError 
```

2 替代形式，取决于您的代码，一种或另一种可能被认为比这更好。一是跳跃前不看

```
try:
  one, two = tupleOrValue
except TypeError:
  one = tupleOrValue
  two = None 
```

另一种方法来自 Guido，它是一种函数重载形式，它使您的代码更加开放。

[http://www.artima.com/weblogs/viewpost.jsp?thread=155514](http://www.artima.com/weblogs/viewpost.jsp?thread=155514)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-12-18T19:39:45.577

这应该可行 - 所以不，您的代码没有任何问题。但是，也可以使用 dict 来完成：

```
{type(str()): do_something_with_a_string,
 type(dict()): do_something_with_a_dict}.get(type(x), errorhandler)() 
```

你不会说更简洁和pythonic吗？

* * *

编辑.. 听从 Avisser 的建议，代码也可以这样工作，看起来更好：

```
{str: do_something_with_a_string,
 dict: do_something_with_a_dict}.get(type(x), errorhandler)() 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-05-02T16:48:59.197

您可能需要检查类型检查。 [http://pypi.python.org/pypi/typecheck](http://pypi.python.org/pypi/typecheck)

Python 的类型检查模块

这个包为 Python 函数、方法和生成器提供了强大的运行时类型检查工具。不需要自定义预处理器或更改语言，类型检查包允许程序员和质量保证工程师对其代码的输入和输出做出精确的断言。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-12-19T00:07:44.677

我一直在使用不同的方法：

```
from inspect import getmro
if (type([]) in getmro(obj.__class__)):
    # This is a list, or a subclass of...
elif (type{}) in getmro(obj.__class__)):
    # This one is a dict, or ... 
```

我不记得为什么我使用它而不是 isinstance，虽然......

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2009-04-09T16:19:50.817

`*sigh*`

不，不需要在 python 中对参数进行类型检查。**从来没有**必要 。

如果您的代码接受字符串或 dict 对象，那么您的设计将被破坏。

这是因为如果您还不知道自己程序中对象的类型，那么您已经做错了。

类型检查会损害代码重用并降低性能。拥有一个根据传递的对象类型执行不同操作的函数很容易出错，并且具有更难以理解和维护的行为。

您有以下更明智的选择：

1）创建一个函数`unique_values`，在唯一的值列表中转换字典：

```
def unique_values(some_dict):
    return list(set(some_dict.values())) 
```

让您的函数假定传递的参数始终是一个列表。这样，如果您需要将字符串传递给函数，您只需执行以下操作：

```
myfunction([some_string]) 
```

如果你需要传递一个字典，你可以：

```
myfunction(unique_values(some_dict)) 
```

这是您的最佳选择，它干净、易于理解和维护。任何阅读代码的人都会立即了解正在发生的事情，而您不必进行类型检查。

2）创建两个函数，一个接受字符串列表，一个接受字典。您可以以最方便的方式在内部进行一个调用（`myfunction_dict`可以创建字符串列表并调用`myfunction_list`）。

无论如何，**不​​要 typecheck**。这是完全没有必要的，只有缺点。以不需要类型检查的方式重构代码。从短期和长期来看，这样做只会使您受益。

# .net - 试图弄清楚如何在文本框中按下回车键时触发事件

> ID：378930
> 
> 赞同：1
> 
> 时间：2008-12-18T19:28:56.613
> 
> 标签：.net, f#, textbox

我正在玩的代码是：

```
open System
open System.Windows.Forms
open System.Drawing

let tehform = new Form(Text = "STOP!", Width = 200, Height = 200)
let awe = new TextBox(Left = 1, Top = 30, Width = 100)
let stuff _ _ = MessageBox.Show(awe.Text) |> ignore
let handler = new EventHandler(stuff)
let yeah = new Button(Text = "", Left = 20, Top = 60, Width = 80)
yeah.Click.AddHandler(handler)
let ms = new MenuStrip()
let file = new ToolStripDropDownButton("File")
let ddi = file.DropDownItems.Add("Hi")
ddi.Click.AddHandler(handler) |> ignore
ms.Items.Add(file) |> ignore
let dc c = (c :> Control)
tehform.Controls.AddRange([| dc yeah; dc ms; dc awe |]) 
```

我想，通过查看库，我可以使用 awe.OnEnter.AddHandler(handler) 但这也不起作用。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-18T19:35:03.840

当 TextBox 获得焦点时触发 OnEnter。使用 OnKeyDown 事件并检查事件参数的 Keys 属性。

[这是 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keydown(VS.80).aspx)。

# assemblies - 汇编中模块的逻辑分组是什么意思？

> ID：378935
> 
> 赞同：1
> 
> 时间：2008-12-18T19:30:45.113
> 
> 标签：assemblies

汇编中模块的逻辑分组是什么意思？谁能解释一下.NET的CLR如何与程序集一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-12-19T00:41:33.503

您可以使用命名空间来组织模块。使用命名空间，您可以为程序集中的每个逻辑模块分组创建一个。

因此，如果您有一个带有一些字符串帮助程序和一些文件帮助程序的**Utlity**程序集，您可以将字符串帮助程序模块放在名为**Utility.StringHelper**的命名空间中，并将文件帮助程序模块放在名为**Utility.FileHelper**的命名空间中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-12-18T19:53:00.277

dotNet 程序集是所有可执行代码的容器。换句话说，包含程序的可执行代码的包。您的问题似乎将 Microsoft 术语与另一个术语混淆了。你能澄清你的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-19T00:51:26.557

我认为您可能会将**程序集**（这是 DLL 或 EXE 文件的 Microsoft.NET 术语 - 编译代码的二进制包）与**汇编语言**（基于底层机器代码指令的符号表示的低级编程语言）混淆

在 Microsoft .NET 程序集的上下文中，模块的逻辑分组意味着根据它所执行的角色（例如vs. ）组织代码*命名空间*，并组织成*程序集*（通常是 .DLL 文件），以便每个程序集形成一个有凝聚力的、清晰的——定义的函数和类的集合。`System.Data.SqlClient``System.Data.OledbClient`

 *例如，用于处理 HTTP、HTML 和其他 Web 技术的所有 Microsoft 库代码都打包在`System.Web`DLL 中 - 在此 DLL 中存在多个名称空间，因此您可以选择性地包含该技术的各个部分。这最大限度地减少了您需要管理的物理 DLL 文件的数量，同时使用命名空间将这些 DLL 中的各种职责清楚地分开。

# asp.net - Server.Transfer 是否可以跨 AppDomains/Web 应用程序工作？

> ID：378940
> 
> 赞同：1
> 
> 时间：2008-12-18T19:32:56.590
> 
> 标签：asp.net

如果您有两个应用程序驻留在同一台服务器上，您可以使用 Server.Transfer 在不同的 AppDomain/Application 中加载页面吗？

我的猜测是否定的，因为 Server.Transfer() 复制 HttpContext.Items 等等。在 AppDomain 之间复制这些数据，会导致线程和内存共享问题，如果线程隔离是严格执行的。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-12-18T19:39:39.977

不，这是不可能的。

`Server.Transfer`并且`Server.Execute`不能在这些场景中使用。

但是，它不会复制`HttpContext.Items`. 它不是复制的。同样`HttpContext`被重复使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T19:38:37.310

您不能在 Web 应用程序中使用 Server.Transfer()。原因是它实际上只是更改了 HttpHandler 将要返回的页面，而不是完成请求并创建一个新页面。它会导致额外的浏览器之旅，但 Response.Redirect() 确实是这样做的方法。

[Server.Transfer 与 Response.Redirect](http://www.developer.com/net/asp/article.php/3299641)

# emacs - Emacs Lisp 函数中的（交互式）是什么意思？

> ID：378942
> 
> 赞同：32
> 
> 时间：2008-12-18T19:34:53.870
> 
> 标签：emacs, lisp

Emacs Lisp 函数通常这样开始：

```
(lambda () (interactive) ... 
```

“（交互式）”有什么作用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-12-18T20:38:51.947

只是为了澄清（[查理引用的引用文档中](https://stackoverflow.com/questions/378942/what-does-interactive-mean-in-an-emacs-lisp-function#378960)）`(interactive)`不仅适用于键绑定功能，而且适用于任何功能。没有`(interactive)`，它只能以编程方式调用，不能从`M-x`（或通过键绑定）调用。

**编辑：**请注意，仅将“（交互式）”添加到函数中也不一定会使其以这种方式工作 - 函数不是交互式的可能有很多原因。范围，依赖关系，参数等。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-12-18T19:40:10.070

我的意思是您包含一些代码，用于在绑定到键时使函数可调用 - 例如从 CTRL-u 获取参数。

看看`CTRL-h f interactive`详情：

```
    交互式是“C 源代码”中的一种特殊形式。
    （交互式参数）

    指定解析参数以交互使用函数的方式。
    例如，写
      (defun foo (arg) "Doc string" (interactive "p") ...使用 arg...)
    当 `foo' 作为命令调用时，使 ARG 成为前缀参数。
    对“interactive”的“调用”实际上是一个声明而不是一个函数；
     它告诉“交互式调用”如何读取参数
     传递给函数。
    当实际调用时，`interactive' 只返回 nil。

    `interactive' 的参数通常是一个包含代码字母的字符串
     接着是提示。（有些代码字母不使用 I/O 来获取
     参数，不需要提示。）提示多个参数，
     给出一个代码字母、它的提示符、换行符和另一个代码字母等。
     提示被传递给格式，并且可以使用 % 转义来打印
     已经读过的论据。

```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-04-17T14:53:24.493

此外值得一提的是，它`interactive`的主要目的是在交互式上下文中（例如，当用户使用键绑定调用函数时），让用户指定函数参数，否则只能以编程方式给出。

例如，考虑函数`sum`返回两个数字的总和。

```
(defun sum (a b)
  (+ a b)) 
```

你可以调用它，`(sum 1 2)`但你只能在 Lisp 程序（或 REPL）中调用它。如果您`interactive`在函数中使用特殊形式，则可以向用户询问参数。

```
(defun sum (a b)
  (interactive
   (list
    (read-number "First num: ")
    (read-number "Second num: ")))
  (+ a b)) 
```

现在`M-x sum`将让您在 minibuffer 中键入两个数字，您仍然可以这样做`(sum 1 2)`。

`interactive`如果函数以交互方式调用，则应返回一个列表，该列表将用作参数列表。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-03-17T15:42:58.090

(interactive) 用于与用户交互的功能，无论是通过 Mx 还是通过键绑定。

Mx describe-function RET 交互式 RET 获取有关如何使用它的详细信息，包括捕获字符串、整数、缓冲区名称等的参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-09T20:55:30.303

[这](https://www.gnu.org/software/emacs/manual/html_node/elisp/Interactive-Codes.html)澄清的一个“陷阱”是，*参数*`interactive`实际上是一种小型格式化语言（如 for ）`printf`，它指定以下内容（用于周围函数的输入）：

1.  模式（参数数量及其类型）
2.  源（例如，缓冲区中的标记区域和/或用户输入等）

例如，

> `'r'` 点和标记，作为两个数字参数，最小的在前。

意味着`interactive`-annotated 函数恰好需要两个参数。例如，这将起作用

```
(defun show-mark (start stop)
  (interactive "r")
  (print start)
  (print stop)) 
```

这将打破：

```
(defun show-mark (start)
  (interactive "r")
  (print start)) 
```

> ```
> Wrong number of arguments: ((t) (start) (interactive "r") (print start)), 2 
> ```

# c - 如何摆脱代码中的 GVim 折叠注释？

> ID：378958
> 
> 赞同：5
> 
> 时间：2008-12-18T19:39:47.747
> 
> 标签：c, vim, vi

我的团队中有人发誓使用某种 GVim 功能来进行手动代码折叠。

由于我正在使用另一个编辑器并且并不真正需要折叠功能，我认为它只会用以下标签污染源代码：

```
/* {{{1 */ 
```

说服人们不要使用这种折叠方式不是一种选择（之前曾进行过一些激烈的讨论）。

我不是真正的 GVim 人，我想知道是否没有其他方法可以在不更改团队代码的情况下进行折叠？

*   也许将折叠方向放在一个单独的文件中，或者
*   在不更改源代码的情况下进行某种智能折叠，将编程语言的语法考虑在内？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-12-18T19:49:49.737

我想他可以将以下内容添加到他的 .vimrc 中：

```
set foldmethod=syntax 
```

假设他正在使用支持该功能的 VIM 版本。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-18T20:16:47.983

只用谷歌“vim 折叠”就[发现](http://www.vim.org/htmldoc/fold.html)Vim 支持六种折叠方法。

`syntax`，`indent`并且`diff`都意味着用户几乎无法控制折叠发生的位置。这可能是也可能不是问题。

`marker`对你来说是个问题，因为你不喜欢这些标记。

`expr`每个问题都有一点，具体取决于您创建的表达式。

如果你的人想定义他自己的折叠点，并将它们存储在一个单独的文件中，它似乎`set foldmethod=manual`结合起来`:mkview`就`:loadview`可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-15T02:30:05.100

你应该自己试试。一旦你开始使用 foldmethod=marker 就没有回头路了。我现在正在做一个不能使用记号笔折叠的项目，感觉就像在没有洗衣机之前洗衣服一样。

# php - 如何在 PHP 中执行静态代码分析？

> ID：378959
> 
> 赞同：480
> 
> 时间：2008-12-18T19:39:58.353
> 
> 标签：php, code-analysis, static-analysis

有没有针对 PHP 源文件的静态分析工具？

二进制文件本身可以检查语法错误，但我正在寻找更多功能，例如：

*   未使用的变量赋值
*   未先初始化就分配到的数组
*   以及可能的代码风格警告
*   ...

* * *

## 回答 #1

> 赞同：374
> 
> 时间：2008-12-18T22:02:58.970

`php`从命令行以 lint 模式运行以验证语法而不执行：

`php -l FILENAME`

更高级别的静态分析器包括：

*   [php-sat](http://www.program-transformation.org/PHP/PhpSat) - 需要[http://strategoxt.org/](http://strategoxt.org/)
*   [PHP_依赖](http://pdepend.org/)
*   [PHP_CodeSniffer](http://pear.php.net/package/PHP_CodeSniffer)
*   [PHP 混乱检测器](http://phpmd.org/)
*   [PHP斯坦](https://github.com/phpstan/phpstan)
*   [PHP-CS-Fixer](https://github.com/FriendsOfPHP/PHP-CS-Fixer)
*   [范](https://github.com/phan/phan)

低级分析器包括：

*   [PHP_解析器](http://pear.php.net/package/PHP_Parser)
*   [token_get_all](http://docs.php.net/manual/en/function.token-get-all.php)（原始函数）

由于 PHP 的动态特性，运行时分析器对某些事情更有用，包括：

*   [Xdebug](http://www.xdebug.org/)具有[代码覆盖率](http://www.xdebug.org/docs/code_coverage)和[功能跟踪](http://www.xdebug.org/docs/execution_trace)。
*   我的[PHP Tracer Tool](http://github.com/troelskn/php-tracer-weaver/tree/master)使用组合的静态/动态方法，建立在 Xdebug 的函数跟踪之上。

文档库[phpdoc](http://www.phpdoc.org/)和[Doxygen](http://www.doxygen.org/)执行一种代码分析。例如，Doxygen 可以配置为使用[Graphviz](http://www.graphviz.org/)呈现漂亮的继承图。

另一种选择是[xhprof](http://pecl.php.net/package/xhprof)，它类似于 Xdebug，但更轻，使其适用于生产服务器。该工具包括一个基于 PHP 的界面。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2008-12-18T19:48:21.643

[在线 PHP 皮棉](http://www.icosaedro.it/phplint/phplint-on-line.html)

[PHPLint](http://www.icosaedro.it/phplint/)

[统一变量检查](http://antirez.com/page/phplint.html)。不过，链接 1 和 2 似乎已经很好地做到了。

不过，我不能说我已经大量使用了这些中的任何一个:)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2008-12-19T11:29:23.007

为了完整性——还要检查[phpCallGraph](http://phpcallgraph.sourceforge.net/)。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-02-17T17:00:49.210

[PHP Mess Detector](http://phpmd.org)很棒而且速度很快。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-05-26T22:40:39.807

我试过使用`php -l`和其他几个工具。

但是，根据我的经验，最好的一个（当然，您的里程可能会有所不同）是[pfff toolset 的检查](https://github.com/facebook/pfff/wiki/Main)。我在 Quora 上听说过 pfff（*[有没有好的 PHP lint/静态分析工具？](http://www.quora.com/Is-there-a-good-PHP-lint-static-analysis-tool)*）。

您可以编译并安装它。没有很好的软件包（在我的[Linux Mint](https://en.wikipedia.org/wiki/Linux_Mint) Debian 系统上，我必须先安装*libpcre3-dev*、*ocaml*、*libcairo-dev*、*libgtk-3-dev*和*libgimp2.0-dev*依赖项），但应该值得安装。

结果报告如下

```
$ ~/sw/pfff/scheck ~/code/github/sc/
login-now.php:7:4: CHECK: Unused Local variable $title
go-automatic.php:14:77: CHECK: Use of undeclared variable $goUrl. 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2010-03-07T07:05:47.440

请参阅[Semantic Designs 的 CloneDR](http://www.semanticdesigns.com/Products/Clone)，这是一种“克隆检测”工具，可查找复制/粘贴/编辑的代码。

尽管有空格、注释甚至变量重命名，它仍会找到准确的和未命中的代码片段。可以在网站上找到 PHP 的示例检测报告。（我是作者。）

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2010-09-02T08:32:43.027

NetBeans IDE 检查语法错误、未使用的变量等。它不是自动化的，但适用于中小型项目。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2010-06-02T06:50:37.400

有一个名为[nWire for PHP](http://www.nwiresoftware.com/products/nwire-php)的新工具。它是[Eclipse PDT](https://en.wikipedia.org/wiki/Eclipse_%28software%29)和[Zend Studio](https://en.wikipedia.org/wiki/Zend_Studio) 7.x的代码探索插件。它支持 PHP 的实时代码分析，并提供以下工具：

*   代码可视化 - 组件和关联的交互式图形表示。
*   代码导航 - 独特的导航视图显示所有关联，并在您编写或阅读代码时与您一起工作。
*   快速搜索 - 在您键入方法、字段、文件等时搜索。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2010-01-09T22:45:20.943

[PHP PMD](https://en.wikipedia.org/wiki/PMD_(software)) (Programming Mistake Detector) 和[PHP CPD](https://en.wikipedia.org/wiki/PMD_(software)#Copy/Paste_Detector_(CPD)) (Copy/Paste Detector) 作为[PHPUnit](https://en.wikipedia.org/wiki/PHPUnit)的前身。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-08-30T23:49:03.320

有[RIPS——一种用于 PHP 脚本漏洞的静态源代码分析器](http://rips-scanner.sourceforge.net/#features)。RIPS 的源代码可在[SourceForge](http://sourceforge.net/projects/rips-scanner/?source=navbar)获得。

从 RIPS 网站：

> RIPS 是一个用 PHP 编写的工具，用于使用静态代码分析来查找 PHP 应用程序中的漏洞。通过对所有源代码文件进行标记和解析，RIPS 能够将 PHP 源代码转换为程序模型，并检测在程序流程中可能被用户输入（受恶意用户影响）污染的敏感接收器（潜在易受攻击的函数）。除了发现漏洞的结构化输出外，RIPS 还提供了一个集成的代码审计框架，用于进一步的手动分析。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-03-13T22:11:44.297

有一个名为[PHP Analyzer](https://github.com/scrutinizer-ci/php-analyzer)的静态代码分析工具。PHP Analyzer 现在是一个已弃用的项目，但您仍然可以在旧分支上访问它。

在许多类型的静态分析中，它还提供基本的自动修复功能，请参阅[文档](https://scrutinizer-ci.com/docs/tools/php/php-analyzer/)。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-05-26T03:08:46.367

您可能想尝试使用 Facebook 的[HipHop](https://en.wikipedia.org/wiki/HipHop_for_PHP)进行编译。

它对整个项目进行静态分析，可能是您正在寻找的。

[GitHub页面](https://github.com/facebook/hiphop-php)

# haskell - 将这些 haskell Int 列表变成不同的列表

> ID：378969
> 
> 赞同：5
> 
> 时间：2008-12-18T19:42:12.030
> 
> 标签：haskell, list

我有以下 Int 列表：

```
t1 = [1000, 1001, 1002, 1003, 1004]
t2 = [2000, 2001, 2002]
t3 = [3000, 3001, 3002, 3003] 
```

列表大小是可变的，它们不只是像这个例子中的 3。它们可以有 1 个或更多元素。然后我有这个：

```
tAll = [t1, t2, t3] 
```

我需要一个将**tAll**变成这样的函数：

```
[[1, 1000, 2000, 3000],
[2, 1001, 2001, 3001],
[3, 1002, 2002, 3002],
[4, 1003, 0, 3003], 
[5, 1004, 0, 0]] 
```

是否有捷径可寻？

**编辑：** 对不起，我匆忙发布了这个，这不是我想要的。我更新了上面的代码...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-12-21T19:31:01.097

如果您仍然感兴趣，这里有一个单线供您使用：

```
zipWith (:) [1..] $ take (maximum $ map length tAll) 
                         (transpose (map (++repeat 0) tAll)) 
```

编辑：好的，最好用两行写:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-12-18T20:38:12.637

好吧，这是 Haskell 初学者的编写方式，但由于它正在执行显式递归，因此可能有更好的方式。:-)

```
head0 [] = 0
head0 xs = head xs

tail0 [] = []
tail0 xs = tail xs

nreorder n ts
  | all null ts = []
  | otherwise   = (n : map head0 ts) : nreorder (n+1) (map tail0 ts) 
```

并`nreorder 1 tAll`打印您想要的列表。您可以通过执行以下操作来避免这些索引：

```
reorder ts
  | all null ts = []
  | otherwise   = (map head0 ts) : reorder (map tail0 ts) 
```

所以`reorder tAll = [[1000,2000,3000],[1001,2001,3001],[1002,2002,3002],[1003,0,3003],[1004,0,0]]`，和（稍微清理了感谢mattiast）：

```
nreorder ts = zipWith (:) [1..] (reorder tAll) 
```

以便`nreorder tAll`打印您想要的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-12-18T20:39:37.563

闻起来像作业，所以我不会给出代码，但有一些提示：
- 结果列表的长度都是相同的，这是列表的最大值。找到最大值并用零填充所有其他列表（使用惰性可以用无限的零列表填充所有列表）。
- 得到一个工作的中间版本，它只打印你最终答案的第一列......
- 当你有这个工作时，得到第二列......剩下的应该是肉汁。

编辑：评论表明这不是家庭作业，所以：

```
列表 = [[1000, 1001, 1002, 1003, 1004],[2000, 2001, 2002],[3000, 3001, 3002, 3003]]main = do mapM_ (putStrLn.show) (旋转列表)
旋转列表 = [(i+1):map (!!i) 填充列表 | i<-[0..(len-1)] ]
 其中 len = 最大 $ 地图长度列表
       paddedlist = map (++repeat 0) 列表

            回答 #4

赞同：1

时间：2008-12-18T19:59:03.150

`zip3`会将 3 个列表变成一个三元组列表。如果你想要长度为三的列表，你可以使用`zipWith3 (\a b c -> [a,b,c])`
如果你想要一些不同的细节（如更新的请求），你必须自己动手。我想说，把你的终止条件放在第一位，然后处理一般情况。您应该有两个辅助函数——一个以您想要的方式修复值（例如，“head_or_zero”），另一个用于处理已终止的输入列表（例如，“tail_or_nil”）：

```
 fix _ [] [] [] = []
fix i as bs cs = [i, hoz as, hoz bs, hoz cs]:fix (i+1) (ton as) (ton bs) (ton cs) where
    hoz [] = 0
    hoz x:xs = x
    ton [] = []
    ton x:xs = xs 
```

        emacs - 如何制作 Emacs 键绑定来设置变量？

ID：378972

赞同：2

时间：2008-12-18T19:42:19.753

标签：emacs, lisp

我在 Emacs 中有一个名为 my-var 的变量，我想在按下 Cv 时设置它。我怎么做？我试过这个：

```
(defun set-my-var (value)
  "set my var"
  (interactive)
  (defvar my-var value
    "a variable of mine")
)

(global-set-key "\C-v" 'set-my-var) 
```

但这失败了：

```
call-interactively: Wrong number of arguments: (lambda (value) "set my var"
(interactive) (defvar my-var value "a variable of mine")), 0 
```

            回答 #1

赞同：4

时间：2008-12-18T20:08:15.207

实际上，defvar 也不会像您认为的那样做：它只会在之前没有值的情况下更改值。这是使用 CTRL-u 参数执行您要查找的内容的块：

```
(defun set-my-var (value)
  "Revised version by Charlie Martin"
  (interactive "p")
  (setq my-var value)) 
```

这是一个例子，来自`*scratch*`缓冲区的代码

```
(defun set-my-var (value)
  "Revised version by Charlie Martin"
  (interactive "p")
  (setq my-var value)) ; do ^J to evaluate the defun form, showing return in the buffer.
set-my-var

(global-set-key "\C-v" 'set-my-var)
set-my-var
 ;Another ^J

;;; Now, what's the value after ^U^V?
my-var
4
;;; Now ^U 8 ^V
my-var
8
;;; now ^U^U^V
my-var
16 
```

            回答 #2

赞同：3

时间：2008-12-18T19:50:43.853

它在争论中。看看我刚刚发布的文字`(interactive)`。当您绑定`set-my-var`到一个键时，它正在寻找一个参数，但由于您使用`(interactive)`了没有参数。您*想要*的是`(interactive "p")`获取`CTRL-u`参数或`(interactive "M")`获取字符串。

阅读关于[“使用交互式”的 EMACS Lisp 手册。](http://www.tac.nyc.ny.us/manuals/elisp/elisp_230.html)

            回答 #3

赞同：2

时间：2008-12-18T19:56:15.107

其他一些提示：

*   CTRL-v 是一个标准绑定并且被大量使用（`scroll-up`）。你最好找到一些没有用过的东西。典型地，这些将被添加到`CTRL-c`键盘映射中。
*   不要养成将parens 视为C 大括号的习惯。对于我们其他可能阅读您的代码的人来说，最好（更习惯）的 LISP 样式在最后关闭所有括号。

        c# - 是否可以在样式中使用转换器？

ID：378979

赞同：17

时间：2008-12-18T19:43:34.260

标签：c#, wpf, xaml, styles, converter

是否可以在样式中使用转换器？例如，我正在尝试创建一个样式`TextBlock`，其文本`ActualHeight`根据`TextBlock`. 调整大小将通过转换器完成。

            回答 #1

赞同：39

时间：2008-12-18T19:58:12.543

是的，这是可能的。例如：

```
<Style TargetType="TextBlock">
    <Setter Property="FontSize">
        <Setter.Value>
            <Binding Path="ActualHeight" RelativeSource="{RelativeSource Self}">
                <Binding.Converter>
                    <MyConverter/>
                </Binding.Converter>
            </Binding>
        </Setter.Value>
    </Setter>
</Style> 
```

根据您的具体情况，您可能还可以使用更简洁的：

```
<Style TargetType="TextBlock">
    <Setter Property="FontSize" Value="{Binding ActualHeight, RelativeSource={RelativeSource Self}, Converter={StaticResource MyConverter}}"/>
</Style> 
```

            回答 #2

赞同：3

时间：2011-01-31T11:10:56.830

我设法通过使用以下方法获得了类似的工作：

```
<Setter Property="Text">
  <Setter.Value>
    <Binding Path="CompanyName">
      <Binding.Converter>
        <conv:UppercaseConverter/>
      </Binding.Converter>
    </Binding>
  </Setter.Value>
</Setter> 
```

希望它也适合你。

扬

PS - CompanyName 是我将文本块绑定到的实际 ViewModel 属性的名称

        asp.net - 是否有用于 Asp.net 标记的#IF DEBUG？

ID：378982

赞同：34

时间：2008-12-18T19:45:11.790

标签：asp.net, debugging

我可以根据“定义调试常量”设置在 asp.net 页面的标记中执行类似的操作吗？

```
#IF (DEBUG) THEN
  <asp:TextBox ID="TextBox1" runat="server">You're in debug mode</asp:TextBox>
#END IF 
```

            回答 #1

赞同：61

时间：2009-12-03T12:20:11.057

```
<form runat="server">
 <% #if DEBUG %>
 <asp:TextBox ID="TextBox1" runat="server">You're in debug mode</asp:TextBox>
 <% #else %>
 <asp:TextBox ID="TextBox2" runat="server">Mmm... No, I think you're not in debug mode</asp:TextBox>
 <% #endif %>
</form> 
```

请注意，您不能为这些文本框分配相同的 ID。

另请注意，当在 web.config 中如此设置时，DEBUG 为 true：

```
<compilation debug="true"> 
```

            回答 #2

赞同：6

时间：2008-12-18T20:34:57.150

我能得到的接近是：

```
<asp:Literal id="isDebug" runat="server" />
<script runat="server">
    void Page_Load()
    {
#if DEBUG
        isDebug.Text = "You're in debug mode";
#endif
    }
</script> 
```

如果您想在 Page_Load() 事件中添加任何其他内容，这会给您带来问题；上面的文字代码仅在页面/控件后面没有代码时才有效。  

如果我需要这样做，我会将上述代码封装到用户控件中，并将该控件包含在感兴趣的页面中。

我的测试用户控件如下所示：

```
<%@ Control Language="C#" AutoEventWireup="true"  %>
<asp:Literal id="isDebug" runat="server" />
<script runat="server">    
    void Page_Load()    
    {
#if DEBUG        
        isDebug.Text = "You're in debug mode";
#endif    
    }
</script> 
```

            回答 #3

赞同：6

时间：2013-12-03T19:07:08.393

如果您尝试单步调试 javascript 或者更喜欢在不调试时缩小 javascript，我更喜欢这种方法：

```
<% if (Debugger.IsAttached) { %>

  <script src="jquery.js"></script>

<% } else { %>

  <script src="jquery.min.js"></script>

<% } %> 
```

我在调试时可以轻松地单步执行代码，否则我希望将脚本缩小。请务必包含以下导入：

```
<%@ Import Namespace="System.Diagnostics" %> 
```

此外，使用 Web Essentials Visual Studio 扩展来捆绑/缩小您的 javascript 文件非常好，这样您的脚本只需向服务器发出一个请求。

            回答 #4

赞同：0

时间：2008-12-18T19:54:07.997

使用 Literal 然后在代码隐藏中使用 #if DEBUG 将文本框的 html 注入到文字中怎么样？ASP.NET 中也有直接代码块，但我不知道它们是否处理#if 语句；这些似乎是为 C# 编译器保留的。

            回答 #5

赞同：-1

时间：2008-12-18T19:49:44.840

自己动手就很容易了。您可能会错过 Compilation Constants 的一些更酷的非编译功能，但您肯定有能力基于某种全局参数添加标记。

        c# - .NET 中的 IP 地址解析

ID：378983

赞同：3

时间：2008-12-18T19:45:13.680

标签：c#, .net, parsing, ip-address

我正在使用 IPAddress.TryParse() 来解析 IP 地址。但是，它有点过于宽松（解析“1”返回 0.0.0.1）。我想将输入限制为点分八位字节表示法。最好的方法是什么？

（注意：我使用的是 .NET 2.0）

**编辑**

让我澄清一下：

我正在编写一个应用程序，它将扫描一系列 IP 以查找某些设备（基本上是端口扫描器）。当用户输入“192.168.0.1”作为起始地址时，我想自动填写“192.168.0.255”作为结束地址。问题是当他们输入“1”时，它会解析为“0.0.0.1”，而结束地址填写为“0.0.0.255”——看起来很傻。

            回答 #1

赞同：8

时间：2008-12-18T19:52:07.270

如果您对解析格式感兴趣，那么我会使用正则表达式。这是一个很好的（[来源](http://www.regular-expressions.info/regexbuddy/ipquick.html)）：

```
bool IsDottedDecimalIP(string possibleIP)
{
    Regex R = New Regex(@"\b(?:\d{1,3}\.){3}\d{1,3}\b");
    return R.IsMatch(possibleIP) && Net.IPAddress.TryParse(possibleIP, null);
} 
```

该正则表达式不会捕获无效 IP，但会强制执行您的模式。TryParse 检查它们的有效性。

            回答 #2

赞同：0

时间：2008-12-18T19:50:46.727

IP 地址实际上是一个 32 位数字 - 它不是 xxx.xxx.xxx.xxx - 这只是人类可读的格式。所以IP地址1实际上是0.0.0.1。

编辑：鉴于澄清，您可以按照建议使用正则表达式，或者您可以根据自己的喜好格式化快捷方式，因此如果您希望“1”显示为“1.0.0.0”。您可以附加它并仍然使用 parse 方法。

        asp.net - 无法在 ASP.NET 面板中设置可见属性

ID：378985

赞同：0

时间：2008-12-18T19:46:37.107

标签：asp.net, datagrid

`Panel`我在使用 ASP.NET控件的可见属性时遇到问题。我有一个调用数据库表并在数据网格中返回结果的页面。
要求
如果某些返回值是`null`我需要隐藏它旁边的图像。
我正在使用 a`Panel`来确定是隐藏还是显示图像，但在声明中遇到问题：

```
visible='<%# Eval("addr1") <> DBNull.Value %>' 
```

我也试过这些：

```
visible='<%# Eval("addr1") <> DBNull.Value %>'
visible='<%# IIf(Eval("addr1") Is DbNull.Value, "False","True") %>' 
```

代码如下：

```
<asp:TemplateField >
     <ItemTemplate>
          <%# Eval("Name")%>
               <p>
                   <asp:Panel runat="server" ID="Panel1" 
                        visible='<%# Eval("addr1") <> DBNull.Value %>'>
               <asp:Image Id="imgHouse" runat="server" 
                        AlternateText="Address" SkinId="imgHouse"/>                
               </asp:Panel>
           <%# Eval("addr1") %><p>                                             
</ItemTemplate>
</asp:TemplateField> 
```

我究竟做错了什么？
**编辑**
如果我使用`visible='<%# IIf(Eval("addr1") Is DbNull.Value, "False","True") %>'`
我收到以下错误：

```
Compiler Error Message: CS1026: ) expected 
```

            回答 #1

赞同：1

时间：2008-12-18T19:58:34.073

尝试：

`<%# String.IsNullOrEmpty(DataBinder.Eval(Container.DataItem,"addr1").ToString()) #>`

            回答 #2

赞同：0

时间：2008-12-18T20:14:31.373

嗯……

visible='<%# IIf(Eval("addr1") Is DbNull.Value, "False","True") %>'

应该管用。你遇到了什么错误？

            回答 #3

赞同：0

时间：2008-12-18T19:51:00.670

尝试将 eval 的结果与空白而不是 null 进行比较。

            回答 #4

赞同：0

时间：2008-12-18T19:57:35.293

使用服务器端代码可能更容易完成。

处理网格中的 RowDataBound 事件（假设您使用的是 gridview，对于 DataGrid，它是 ItemDataBound），然后执行以下操作：

```
public void grid1_RowDataBound(object sender, GridViewRowDataBoundEventArgs e)
{
   if(e.Row.RowType == RowType.DataRow)
   {
        object itemFromDb = e.Row.DataItem;  //you'll need to cast this to your type
        Panel p = (Panel)e.Row.FindControl("myPanel");
        if(itemFromDb.SomeItem == null)
           p.Visible = false;
   }
} 
```

这不是我的想法，我可能有语法错误或 2。但你明白了。

        messaging - ActiveMQ 在创建大量主题时抛出 OOME

ID：378995

赞同：2

时间：2008-12-18T19:49:22.343

标签：messaging, activemq

我正在使用 ActiveMQ 5.2，我的应用程序需要大量主题，大约 500,000 个。当我运行我的应用程序时，只创建了大约 1000 个主题后，ActiveMQ 会引发 OutOfMemoryException。

期望 ActiveMQ 支持这么多主题是不是很不合理？

这种用法是否有最佳配置？

该线程详细说明了该问题： http: [//www.nabble.com/java.lang.OutOfMemoryError%3A-unable-to-create-new-native-thread-on-AMQ-5.0-td17005441.html](http://www.nabble.com/java.lang.OutOfMemoryError%3A-unable-to-create-new-native-thread-on-AMQ-5.0-td17005441.html)

            回答 #1

赞同：3

时间：2008-12-19T13:35:38.973

这是一个有趣的线程，但它并没有导致 jira 问题，所以我想知道*不*使用专用任务运行器是否是这里的解决方案。使用线程池而不是专用的任务运行程序应该将目标的创建与线程的创建分离。如果不是这种情况，请[打开一个 jira 问题](https://issues.apache.org/activemq/secure/CreateIssue!default.jspa)并将其分配给我。

有一些更一般的信息@ [http://activemq.apache.org/javalangoutofmemory.html](http://activemq.apache.org/javalangoutofmemory.html)

```*********``**