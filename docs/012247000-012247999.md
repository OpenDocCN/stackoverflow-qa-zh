# StackOverflow 问答 12247000-12247999

# iphone - 有没有办法在 iOS 中使用 sip 进行视频聊天（两种方式）？

> ID：12247001
> 
> 赞同：3
> 
> 时间：2012-09-03T11:31:55.197
> 
> 标签：iphone, objective-c, ios, ipad

任何人请帮助我进行视频通话服务（如 Skype）。我基本上是使用 SIP 来实现的。因此，如果有任何相关链接，请建议我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:45:34.233

[您可以在http://code.google.com/p/idoubs/](http://code.google.com/p/idoubs/)上找到您正在寻找的项目

# android - Android 左右声道

> ID：12247002
> 
> 赞同：5
> 
> 时间：2012-09-03T11:31:56.047
> 
> 标签：android, audio

是否可以为我们的应用程序保留左声道/扬声器并以编程方式保持右声道不变？

这个想法是使用左声道发送音频串行命令，而右声道仍然可以用于正常的声音输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:10:23.993

我检查了 API，特别是[http://developer.android.com/reference/android/media/audiofx/Equalizer.html](http://developer.android.com/reference/android/media/audiofx/Equalizer.html)和 [http://developer.android.com/reference/android/media/AudioManager.html](http://developer.android.com/reference/android/media/AudioManager.html) 但我不能什么都找不到。

我的猜测是，如果您想做类似的事情，您可能必须使用 android NDK [http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html)并且如果您想完全禁用左声道，您可能需要 root 访问权限。

# ruby-on-rails - Rails 2.3 基于其他关联的动态has_many条件

> ID：12247004
> 
> 赞同：2
> 
> 时间：2012-09-03T11:32:01.540
> 
> 标签：ruby-on-rails, associations, has-many, ruby-on-rails-2

我有一个名为 ActiveRecord 的模型`Books`，它有一个`has_one`关联 on`authors`和一个`has_many`关联 on `publishers`。所以下面的代码都很好

`books`.`publishers`

现在我有另一个 AR 模型，`digital_publishers`它很相似，但如果本书的作者回应，我想透明地使用它`digital?`- 让我用一些代码来解释

```
normal_book = Book.find(1)
normal_book.author.digital? #=> false
normal_book.publishers #=> [Publisher1, Publisher2, ...]

digital_book = Book.find(2)
digital_book.digital? #=> true
digital_book.publishers #=> I want to use the DigitalPublishers class here 
```

因此，如果这本书的作者是数字的（作者是通过`has_one :author`关联设置的，所以它不像在 books 表上有一个带有 SQL 条件的 has_many 那样简单），我仍然希望能够调用`.publishers`它，但是让它返回一个的列表`DigitalPublishers`，所以我希望我的`has_many`关联有一些条件，首先检查这本书是否是数字的，如果是，则使用`DigitalPublishers`类而不是`Publishers`类。

我尝试使用`after_find`以下代码使用回调：

```
after_find :alias_digital_publisher

def alias_digital_publisher
  if self.author.digital?
    def publishers
      return self.digital_publishers
    end
  end
end 
```

但这似乎没有奏效。另外，我使用的是 Rails 2.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:35:29.213

我需要有关该项目的更多信息才能真正提出建议，但这里有一些想法需要考虑：

### 1.出版商不应该属于书籍

我猜一个出版商可能与不止一本书有关，所以它们属于书籍并没有多大意义。我会考虑

```
#Book.rb
has_many :publishers, :through=>:publications 
```

### 2\. 将数字出版商存储在 publishers 表中

对列为 的数字发布者使用单表继承 (STI) `type`，`DigitalPublisher`或者仅添加一个布尔值，指示发布者是否为数字发布者。

这样，您只需调用`book.publishers`，您将获得可能是或可能不是数字的发布者，具体取决于分配的内容。

诀窍是您需要确保只有数字出版商被分配给数字作者的书籍。不过，这对我来说很有意义。

### 3.（或者）为发布者添加一个方法

```
def book_publishers
   author.digital? ? digital_publishers : publshers
end 
```

我不是这个选项的真正粉丝，我认为你最好将所有出版商放在一张桌子上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:21:18.977

我的解决方案非常简单。

```
class Book < ActiveRecord::Base

    has_many :normal_publishers, :class_name => 'Publisher'
    has_many :digital_publishers, :class_name => 'DigitalPublisher'

    def publishers
        if self.digital?
            self.digital_publishers
        else
            self.normal_publishers
        end
    end

end 
```

您仍然可以链接一些方法，例如`book.publishers.count`, `book.publishers.find(...)`。

如果你需要`book.publisher_ids`，，，你可以定义这些方法，`book.publisher_ids=`如.`book.publishers=``book.publishers`

上面的代码适用于 Rails 2.3.12。

更新：抱歉，我在发布此内容后注意到 klochner 的替代解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T16:48:01.363

查看 Rails Guides v-2.3.11 中的这一[部分](http://guides.rubyonrails.org/v2.3.11/activerecord_validations_callbacks.html#after-initialize-and-after-find)。特别注意以下几点：

> after_initialize 和 after_find 回调与其他回调有点不同。它们没有 before_* 对应物，注册它们的唯一方法是将它们定义为常规方法。如果您尝试使用宏样式类方法注册 after_initialize 或 after_find，它们将被忽略。

基本上，尝试将您定义`after_find`为

```
def after_find
  ...
end 
```

如果这不起作用，可能是因为书籍的字段尚未初始化，因此请尝试`after_initialize`。

# php - 在 PHP 中下载 Zip 文件时显示的路径名和 Zip 文件名

> ID：12247008
> 
> 赞同：0
> 
> 时间：2012-09-03T11:32:22.113
> 
> 标签：php, zip

我正在尝试编写一个 PHP 程序，它提供一个 zip 文件供下载。我在互联网上搜索并尝试了所有解决方案，但我的问题没有得到解决。

我的问题是当 zip 文件下载到用户的计算机时，整个路径显示为 zip 文件的名称。

例如： Zip 文件的路径：“http://www.websitename.com/folder1/folder2/” Zip 文件的名称：“zbc123.zip”

浏览器下载zip文件时，文件名如下：http-_www.websitename.com_folder1_folder2_zbc123.zip

我不希望路径是下载的 zip 文件的名称。

我只希望显示实际的 zip 文件。

这是我的代码规范：

```
$m_item_path_name = "http://www.websitename.com/folder1/folder2/";
$m_zip_file_name = "zbc123.zip"

//Combining the Path and the Zip file name and storing into memory variable
$m_full_path = $m_item_path_name.$m_zip_file_name;

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"".$m_zip_file_name."\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($m_item_path_name.$m_zip_file_name));
ob_end_flush();
@readfile($m_item_path_name.$m_zip_file_name); 
```

谁能帮我解决这个问题。

任何形式的帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:43:28.820

尝试这个：

```
<?php
$file_names = array('file1.pdf','file2.pdf');

//Archive name
$archive_file_name=$name.'Name_u_want.zip';

//Download Files path
$file_path=$_SERVER['DOCUMENT_ROOT'].'/files/';

zipFilesAndDownload($file_names,$archive_file_name,$file_path);

function zipFilesAndDownload($file_names,$archive_file_name,$file_path)
{
        //echo $file_path;die;
    $zip = new ZipArchive();
    //create the file and throw the error if unsuccessful
    if ($zip->open($archive_file_name, ZIPARCHIVE::CREATE )!==TRUE) {
        exit("cannot open <$archive_file_name>\n");
    }
    //add each files of $file_name array to archive
    foreach($file_names as $files)
    {
        $zip->addFile($file_path.$files);

    }
    $zip->close();
    //then send the headers to foce download the zip file
    header("Content-type: application/zip"); 
    header("Content-Disposition: attachment; filename=$archive_file_name");
        header("Content-length: " . filesize($archive_file_name));

    header("Pragma: no-cache"); 
    header("Expires: 0"); 

    readfile("$archive_file_name");
    exit;
}
?> 
```

# ruby-on-rails - 在rails中设置模型值有条件？

> ID：12247009
> 
> 赞同：0
> 
> 时间：2012-09-03T11:32:26.210
> 
> 标签：ruby-on-rails

我有一个具有以下字段的模型

*   已发布（布尔值）
*   发布时间（日期时间）

更新模型时，我想将**published_at**设置为**Time.now**，当**published**设置为**true**时！

有什么建议我怎么能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:39:17.197

在你的模型中，你需要把这个

```
before_save :set_published_at

def set_published_at
    @published_at = Time.now if @published == true
end 
```

# javascript - 将对象传递给原型回调

> ID：12247015
> 
> 赞同：0
> 
> 时间：2012-09-03T11:32:45.680
> 
> 标签：javascript, jquery

我正在为 jQuery 使用[Nivo Slider 插件](http://nivo.dev7studios.com/)。`object`该插件允许您在插件原型的参数内部提供一些回调，例如

```
$('.slider').nivoSlider({
    afterLoad: control_responses(this, false),
    beforeChange: control_responses(this, false),
    afterChange: control_responses(this, false)
}); 
```

在我传递`this`给我的地方，`control_responses()`我实际上想发送当前的迭代，`$('.slider')`但`this`当前指的是`window object`.

我如何将当前迭代传递`$('.slider')`给我的回调函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:37:02.353

您正在调用该`control_responses`函数并将返回值放入对象中。将函数放入对象中，以便在`control_responses`调用回调函数时调用该函数：

```
$('.slider').nivoSlider({
  afterLoad: function() { control_responses(this, false); },
  beforeChange: function() { control_responses(this, false); },
  afterChange: function() { control_responses(this, false); }
}); 
```

# html - 无法在 Rails 中的嵌套模型表单的新对象之间创建关联

> ID：12247025
> 
> 赞同：0
> 
> 时间：2012-09-03T11:33:10.780
> 
> 标签：html, ruby-on-rails, ruby

我正在观看[railscasts](http://railscasts.com/episodes/196-nested-model-form-part-1?view=asciicast)并尝试用自己的双手编写示例。但是我在以下步骤中遇到了麻烦：创建表单。

它需要在调查和问题之间创建关联。但是无法在我的 Rails 应用程序中建立此关联，因此表单中不会出现任何问题

这是代码

**调查模型：**

```
class Survey < ActiveRecord::Base
  attr_accessible :name, :questions
  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions

end 
```

**问题模型：**

```
class Question < ActiveRecord::Base
  attr_accessible :context, :survey_id
  belongs_to :survey
end 
```

**Surveys_Controller 方法：**

```
 # GET /surveys/new
  # GET /surveys/new.json
  def new
    @survey = Survey.new
    3.times {@survey.questions.build}

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @survey }
    end
  end 
```

**_form.html.erb 中的问题部分**

```
 <% f.fields_for :questions do |builder|%>
    <%= builder.label :context, "Question" %><br />
    <%= builder.text_area :context, :rows => 3 %>
  <% end %> 
```

**这是我从控制台测试中得到的**

```
irb(main):010:0> @survey = Survey.new
=> #<Survey id: nil, name: nil, created_at: nil, updated_at: nil>
irb(main):011:0> 3.times {@survey.questions.build}
=> 3
irb(main):012:0> @survey.questions
=> [#<Question id: nil, survey_id: nil, context: nil, created_at: nil, updated_a
t: nil>, #<Question id: nil, survey_id: nil, context: nil, created_at: nil, upda
ted_at: nil>, #<Question id: nil, survey_id: nil, context: nil, created_at: nil,
 updated_at: nil>] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:47:20.210

您有一个新的模型对象。您为空对象创建 3 个问题。你的问题必须是空的。它没有保存或定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:49:49.580

如果我正确理解您的问题，则您的表格中看不到问题。您需要为表格中的一个问题提供一份表格。你在做 questions.each 吗？

你需要类似的东西：

```
<% survey.questions.each do |question| %>
      <%= fields_for question do |builder| %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:54:14.453

哈哈，我傻了。这是一个愚蠢的问题。与协会无关。

我打错字了

`<%` `f.fields_for :questions do |builder|%>`

它应该返回一些插入 HTML 文档的文本，而不仅仅是作为 ruby​​ 代码处理

它应该是`<%=` `f.fields_for :questions do |builder|%>`

但是谢谢你所有的答案:)

# javascript - 用于多个 div Vticker 的 jquery 选择器

> ID：12247029
> 
> 赞同：0
> 
> 时间：2012-09-03T11:33:32.417
> 
> 标签：javascript, jquery

嗨，我有两个名为“tick”的部门，我在这里要做的是，如果内容溢出，则只应激活自动收报机。

```
div1 : <div class="home tick">
div2 : <div class="rbar tick"> 
```

**问题：**如果一个 div 中的内容溢出，另一个 div 也开始勾选任何解决方案？

```
if( ($('.tick > ul').height()) > 160){
    $('.tick').vTicker({ 
        speed: 500,
        pause: 3000,
        animation: 'fade',
        showItems: 3,
        height: 192
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:36:29.877

分别取每个 div：

```
$('.tick > ul').each(function(){
  if( ($(this).height()) > 160){
    $(this).parent().vTicker({ 
        speed: 500,
        pause: 3000,
        animation: 'fade',
        showItems: 3,
        height: 192
    });
  }
}) 
```

# php - Nginx 正在转发到 apache2，但用户获取的 url 为：3000

> ID：12247031
> 
> 赞同：0
> 
> 时间：2012-09-03T11:33:44.450
> 
> 标签：php, wordpress, apache, nginx

将 apache2 设置为侦听端口 3000 和服务器 php 文件（wordpress）点击 blog.mysite.com:3000 后加载我的 wordpress 安装没问题。然后我将 nginx 设置为监听 80 端口作为 apache 的代理。这工作正常，我唯一的问题是当用户点击 blog.mysite.com 时，它会被重定向到 blog.mysite.com:3000，这不是所需的行为。在网上寻找一些解决方案，涉及将一些 php 代码添加到我的 wp-config.php 但没有奏效。有什么帮助吗？

**编辑：**

```
server {
        listen       80 default_server;
        server_name  appsrd.devmbs.com;
        root /home/ubuntu/projecs/APPS-RD;
        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   /home/ubuntu/projects/APPS-RD;
            index  index.html index.htm index.php;
        }

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        location ~ \.php$ {
        proxy_pass   http://127.0.0.1:3000;
        proxy_buffering on;
        proxy_buffers 12 12k;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $host;
        proxy_redirect  http://appsrd.devmbs.com:3000   http://appsrd.devmbs.com;

        }
} 
```

**编辑：**

/wp-admin 正在显示，但站点的根目录正在重定向循环中运行。

127.0.0.1 - - [03/Sep/2012:12:29:25 +0000] "GET /index.php HTTP/1.0" 301 529 "http://appsrd.devmbs.com/wp-admin/options-general .php" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_0) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"

这个请求被触发了 12 到 15 次。

**编辑：**

最奇怪的是，我删除了数据库并进入[http://www.mysite.com](http://www.mysite.com)，重定向循环消失了，我收到一条消息，wordpress 找不到应该发生的数据库。然后我创建了一个新数据库，运行了 wordpress 安装，同样的情况出现了。管理员工作正常，但网站页面出现重定向循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:44:46.070

问题是在 wordpress 设置中我有错误的地址，所以它在 url 的末尾添加了 :3000。由于这个问题的标题不再代表我当前的问题，我将关闭它并创建一个新问题。

# permutation - 查找具有排序但不重复的 k 排列数

> ID：12247033
> 
> 赞同：2
> 
> 时间：2012-09-03T11:33:55.983
> 
> 标签：permutation, combinations, combinatorics

我正在努力为*基数 n*的集合*S的**k 排列*数找到一个封闭形式。

 **组合应考虑排序，但不能重复。

例子：

```
|S| = n = 3 
S = {a,b,c}
k = 2

{a,b}
{b,a}
{b,c}
{c,b}
{a,c}
{c,a} 
```

任何人都可以帮助我如何计算可行排列的数量（而不是排列本身）？

我尝试过的：我阅读了不同的材料并发现，包括repitititions

```
O(n) = n^k 
```

我最初的想法是，我需要消除像这样的排列

```
{a,a}
{b,b}
{c,c} 
```

但我很难为可感知的重复次数找到一个封闭的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:50:53.610

您正在寻找基数 n 的集合 S 的 k 排列数。

公式是众所周知的：n！/（nk）！

伪证明：

*   对于第一个元素，您可以在 S 的 n 个元素中进行选择；
*   第 2 次，仅在：n-1 之间，因为您不想要 doublons ；
*   ...
*   对于第 i 个，仅在： n-(i-1) 中；
*   ...
*   对于第 k 个，仅在： n-(k-1) 中；

所以，最后：n * (n-1) * ... * (ni) * ... * (n-k+1) = n！/（NK）！**

# php - 从 yyyy-md 到 yyyy-mm-dd 的日期格式

> ID：12247034
> 
> 赞同：-3
> 
> 时间：2012-09-03T11:33:55.877
> 
> 标签：php, sql

我正在使用代码从日历中获取日期

```
if ($_POST){
    $m = $_POST['m'];
    $d = $_POST['d'];
    $y = $_POST['y'];

$event_date = $y."-".$m."-".$d; 
```

日期的格式为 yyyy-md 我如何将格式更改为 yyyy-mm-dd 以便我可以插入数据库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:37:00.527

```
$time = strtotime( $event_date );
$myDate = date( 'Y-m-d', $time ); 
```

第一行转换为时间戳。第二行转换为您想要的日期格式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:36:52.353

一种可能性是[`date()`](http://php.net/manual/en/function.date.php)结合使用[`mktime()`](http://php.net/manual/en/function.mktime.php)

```
$event_date = date('Y-m-d', mktime(0, 0, 0, $m, $d, $y)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:42:53.857

您可以使用 strftime 并使用 checkdate 执行检查：

```
if ($_POST){

  $m = $_POST['m'];
  $d = $_POST['d'];
  $y = $_POST['y'];

  $event_date = checkdate($m, $d, $y) ? strftime('Y-m-d', mktime(0, 0, 0, $m, $d, $y)) : null;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:43:44.830

```
 echo(date("Y-m-d", strtotime($event_date))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:36:25.377

您可以在使用它之前对其进行转换，如下所示：

```
if($_POST['m']<10)
{
    $m='0'.$_POST['m'];
}
else
{
    $m=$_POST['m'];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-03T11:38:30.347

```
if ($_POST){
    $m = $_POST['m'];
    $d = $_POST['d'];
    $y = $_POST['y'];

if($m<10)
{
  $m="0".$m;
}
if($d<10)
{
  $d="0".$d;
}
$event_date = $y."-".$m."-".$d;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-03T11:41:17.623

会`substr("00" . $m, -2)`工作吗？

不要使用 PHP，所以语法可能是错误的，但方法应该很明显，在开头添加 00 然后取最后 2 个字符

# php - Wordpress 自定义帖子，如何在列表中显示自定义字段

> ID：12247036
> 
> 赞同：4
> 
> 时间：2012-09-03T11:34:22.450
> 
> 标签：php, wordpress, custom-post-type

请帮助我.. 我是 wordpress 的新手，我用字段的 custom_meta_box 创建了一个自定义帖子（位置，着装）

因此，在我的自定义帖子列表中，我想查看我在 custom_meta_box 上创建的值。

这是我当前的代码：

```
    /*
    插件名称：我自己的自定义帖子
    插件 URI：http://www.mywebsite.com/firstPlugin/
    描述：我的样本描述
    作者：蒙斯基
    版本：1.0
    作者 URI：http://www.mywebsite.com/
    */

    // 注册新的帖子类型和分类
    函数 wpt_event_posttype() {
        register_post_type('事件',
            大批（
                '标签' => 数组（
                    '名称' => __( '事件' ),
                    'singular_name' => __( '事件' ),
                    'add_new' => __('添加新事件'),
                    'add_new_item' => __('添加新事件'),
                    'edit_item' => __( '编辑事件' ),
                    'new_item' => __( '添加新事件' ),
                    'view_item' => __('查看事件'),
                    'search_items' => __( '搜索事件' ),
                    'not_found' => __('未找到事件'),
                    'not_found_in_trash' => __( '没有在垃圾箱中找到事件' )
                ),
                '公共' => 真的，
                '支持' => 数组（'title', 'editor', 'thumbnail', 'comments'）,
                'capability_type' => '发布',
                'rewrite' => array("slug" => "events"), // 永久链接格式
                'menu_position' => 5,
                'register_meta_box_cb' => 'add_events_metaboxes'
            )
        );
    }
    add_action('init', 'wpt_event_posttype');

    函数 add_events_metaboxes() {
       // add_meta_box('wpt_events_date', '事件日期', 'wpt_events_date', 'events', 'side', 'default');
        add_meta_box('wpt_events_location', '事件位置', 'wpt_events_location', '事件', '正常', '高');
    }

    add_action('add_meta_boxes', 'add_events_metaboxes');

    函数 wpt_events_location() {
        全球 $post;
        // Noncename 需要验证数据的来源
        回声'';
        // 如果已经输入，则获取位置数据
            $location = get_post_meta($post->ID, '_location', true);
            $dresscode = get_post_meta($post->ID, '_dresscode', true);
        // 回显字段
            回声'输入位置：';
            回声'';
            回声'人们应该如何着装？';
            回声'';
    }

    函数 wpt_save_events_meta($post_id, $post) {
        // 验证这来自我们的屏幕并具有适当的授权，
        // 因为save_post可以在其​​他时间触发
        if ( !wp_verify_nonce( $_POST['eventmeta_noncename'], plugin_basename(__FILE__) )) {
        返回 $post->ID;
        }
        // 是否允许用户编辑帖子或页面？
        if ( !current_user_can( 'edit_post', $post->ID ))
            返回 $post->ID;
        // OK，我们通过了身份验证：我们需要找到并保存数据
        // 我们将它放入一个数组中以使其更容易循环。
        $events_meta['_location'] = $_POST['_location'];
        $events_meta['_dresscode'] = $_POST['_dresscode'];
        // 添加 $events_meta 的值作为自定义字段
        foreach ($events_meta as $key => $value) { // 循环遍历 $events_meta 数组！
            if( $post->post_type == 'revision' ) 返回；// 不要两次存储自定义数据
            $value = implode(',', (array)$value); // 如果 $value 是一个数组，则将其设为 CSV（不太可能）
            if(get_post_meta($post->ID, $key, FALSE)) { // 如果自定义字段已经有值
                update_post_meta($post->ID, $key, $value);
            } else { // 如果自定义字段没有值
                add_post_meta($post->ID, $key, $value);
            }
            if(!$value) delete_post_meta($post->ID, $key); // 如果为空则删除
        }
    }
    add_action('save_post', 'wpt_save_events_meta', 1, 2); // 保存自定义字段

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:03:06.927

您想使用[get_post_meta](http://codex.wordpress.org/Function_Reference/get_post_meta)函数。这将提供值并允许您在页面/帖子模板中显示它。

希望[这篇文章](http://wptheming.com/2010/08/custom-metabox-for-post-type/)也有助于了解整个过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-28T13:51:57.447

用该代码更新您的代码，它对我有用。我更喜欢使用 ACF（高级自定义字段），但最好学习如何元框。使用繁重的代码可以更好地了解您的知识

```
add_action('init','wpt_event_posttype');
add_action('save_post','save_event_data');

function add_events_metaboxes(){
    add_meta_box('events',esc_html__('Info'), 'events_callback', 'events', 'normal', 'default', null);
}

//Events Callback function Meta_Box
function events_callback($post){
    wp_nonce_field('save_event_data','event_nonce');

    $location = get_post_meta($post->ID,'_event_location_key',true);
    echo '<label for="event_location_field" style="display:block">Location</label></br>';
    echo '<input type="text" id="event_location_field" name="event_location_field" style="width:400px" value="'. esc_attr__($location).'"/></br>';

    $dresscode = get_post_meta($post->ID,'_event_dresscode_key',true);
    echo '<label for="event_dresscode_field" style="display:block">Dresscode</label></br>';
    echo '<input type="text" id="event_dresscode_field" name="event_dresscode_field" style="width:400px" value=" '. esc_attr__($dresscode). '" /></br>';

}
function save_event_data($post_id){
    if (!isset($_POST['event_nonce'])
        || ! wp_verify_nonce($_POST['event_nonce'],'save_event_data')
        || ! isset($_POST['event_location_field'])
        || ! isset($_POST['event_dresscode_field'])){
        return;
    }
    $event_location = sanitize_text_field($_POST['event_location_field']);
    update_post_meta($post_id,'_event_location_key',$event_location);

    $event_dresscode = sanitize_text_field($_POST['event_dresscode_field']);
    update_post_meta($post_id,'_event_dresscode_key',$event_dresscode);
} 
```

并为您的 html 使用此代码

```
<?php 
     $location = get_post_meta(get_the_ID(),'_event_location_key') ; 
     $dresscode = get_post_meta(get_the_ID(),'_event_dresscode_key');
?>

echo $location[0];
echo $dresscode[0]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-06-21T14:05:12.187

我建议你使用下面的插件。使用 ACF，您可以为自定义帖子类型创建自定义字段。

[https://wordpress.org/plugins/advanced-custom-fields/](https://wordpress.org/plugins/advanced-custom-fields/)

# security - 如何限制对codeigniter文件夹中文件的访问

> ID：12247040
> 
> 赞同：6
> 
> 时间：2012-09-03T11:34:38.260
> 
> 标签：security, .htaccess, codeigniter, robot

您好，我使用 codeigniter 开发我的网站，但是当我在 google 中搜索我的网站时，google 会显示指向特定文件夹中文件 (pdf) 的链接，用户无需登录即可直接查看这些文件 (pdf)。我想限制谷歌直接显示这些文件的链接。例如：www.mywebsite/myfolder/myfile

请指导我如何做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T13:23:47.883

[对上一个答案](https://stackoverflow.com/questions/12247040/how-to-restrict-access-to-files-in-a-folder-in-codeigniter/12247430#12247430)稍作修改：

将 .htaccess 与内容一起放在您的文件夹中

```
order deny, allow
deny from all 
```

这将拒绝对该特定文件夹的所有访问。

为了访问文件，在控制器中编写一个带有正文的函数 -

```
public function index($file_name){
    if($this->login())  // login check
        if (preg_match('^[A-Za-z0-9]{2,32}+[.]{1}[A-Za-z]{3,4}$^', $file_name)) // validation
            {
            $file = 'my_path/'.$file_name;
            if (file_exists($file)) // check the file is existing 
                {
                header('Content-Type: '.get_mime_by_extension($file));
                readfile($file);
                }
            else show_404()
            }
    else    show_404();
} 
```

然后你必须像这样在你的配置文件夹中的 routes.php 文件中添加一些行

```
$route['my_files/(:any)'] = "my_controller/index/$1"; 
```

这会将所有请求重定向到 myfiles/bla_bla_bla 到 my_controller/index/bla_bla_bla

认为这可能会有所帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:57:48.293

基本上，您需要将文件托管在 public_html 文件夹之外 - 而是通过 php readfile() 将它们提供给用户。

像这样的东西会起作用

```
function user_files($file_name = "")
{
    // Check if user is logged in
    if($this->user->logged_in())
        {   
            // Now check the filename is only made up of letters and numbers
            // this helps prevent against file transversal attacks
            if (preg_match('^[A-Za-z0-9]{2,32}+[.]{1}[A-Za-z]{3,4}$^', $file_name)))
            {
                // Rewrite the request to the path on my server 
                $file = '../my_folder/'.$file_name;

                // Now check if file exists
                if (file_exists($file))
                {
                   // Serve the file
                   header('Content-Type: '.get_mime_by_extension($file));
                   readfile($file);
               }
            }
        }
    }
} 
```

注意：您需要小心目录转换 - 因此您应该检查文件名是否仅由字母组成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T10:04:19.793

只需在之前添加以下代码`readfile($file)`。这将有助于浏览器读取图像和视频文件。

```
ob_clean();
flush(); 
```

完整示例

```
if($this->user->logged_in())
{
    if (file_exists($file))
    {
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Pragma: public');
        header('Content-Length: '.filesize($file));
        ob_clean();
        flush();
        readfile($file);
        exit;
    }
} 
```

# java - 使您的业务（服务）层依赖于用户会话是不好的设计吗？

> ID：12247044
> 
> 赞同：9
> 
> 时间：2012-09-03T11:35:03.893
> 
> 标签：java, architecture, ejb

在一个常见的 MVC 设计的应用程序中，使服务层依赖于用户会话是一个坏主意吗？假设有一个服务方法从数据库中获取一些对象，并且您希望根据谁初始化调用返回不同的结果 - 例如，管理员可能会获得 10 行对象，而普通用户可能只会获得 7 行因为最后 3 个是“仅限管理员”的对象。解决此问题的几种方法是：

*   引入一个包含调用用户的新方法参数。在许多方法中必须投入用户参数，但不依赖但很麻烦。
*   为不同的用户角色制定不同的方法（有多个结果）。也没有依赖，但有很多方法基本上做同样的事情，这增加了代码重复的风险。
*   让该方法从存储当前用户会话的静态上下文中的 ThreadLocal 变量中读取。此变量在每个请求之前设置。

最近，我越来越多地开始使用最后一种方法，因为它提供了一个干净的界面并且感觉非常实用。过滤器确保当前线程始终具有用户集。这是糟糕的设计吗？我相信有些人会认为这是从服务层到 Web 层的依赖关系，尽管我个人认为它们是非常分离的。最大的后果是一个方法的行为会根据另一个类的状态而有所不同，这可能是一件坏事，也是一件好事。

您对此有何看法？如果这是一个糟糕的解决方案，那么更强大的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:50:19.573

我强烈建议 aginst ThreadLocal 风格的方法——它似乎有太多的“全局变量”设计气味。这有很多问题，最值得注意的是：

*   随着您在测试之前设置越来越多的隐式全局状态的滑坡，您的代码变得**更难测试**
*   您**无法清楚地看到**某段代码正在使用哪些参数。这对于维护者来说可能会非常令人困惑，或者如果您在几个月后回到代码中。
*   如果您将工作交给**不同的线程**，它可能会导致**非常讨厌的错误/复杂性**。您已经有效地使您的代码执行依赖于它正在运行的线程......可能会出现什么问题？:-)
***   您正在创建**循环依赖项**（服务层 <-> 用户界面层）。绝不是一个好主意，您应该尝试仅以一种方式保持依赖关系（几乎总是用户界面层->服务层）**

 **在其他两种方法之间，我认为“这取决于”：

*   如果用户本质上是数据模型的一部分（例如，您有一个社交图数据库），那么将用户作为参数传递似乎很自然。
*   如果用户数据仅用于身份验证等前端内容，那么我倾向于尽量减少对特定用户详细信息的依赖，而是为不同角色创建不同的方法（或等效地添加“角色”参数）。

另一种选择是将“上下文”对象传递给包含一组相关会话数据（即不仅仅是用户名）的服务层。如果您想最小化参数膨胀，这可能是有意义的。请注意它会变成一种“绕过”良好分层原则的方式。如果它只是“数据”，那么它可能没问题，但是一旦人们开始在上下文中传递回调对象/ UI 组件，那么你可能会走向一团糟......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T09:37:34.437

只需使用Java EE 的角色机制，它已经存在。

举个例子：

```
@Stateless
public class AService {

    @Resource
    private SessionContext sessionContext;

    @PersistenceContext
    private EntityManager entityManager;

    public List<AObject> fetchAFewObjects() {

        String query = "aUserQuery";      

        if (sessionContext.isCallerInRole("ADMIN")
            query = "aAdminQuery";

        return entityManager.createNamedQuery(query, AObject.class)
            .getResultList();    
    }  
} 
```

在 Web 端，确保您正在执行[容器登录](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#login%28java.lang.String,%20java.lang.String%29)，以便服务器知道登录用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T09:01:30.180

您不必为您的用例实施任何一种解决方案。

在 EJB 中，框架已经支持您想要的。它被称为安全上下文，它会自动传播到您调用的每个方法中（在幕后它确实经常由 TLS 实现，但这是一个实现细节）。

此安全上下文将使您能够访问用户名和他/她的角色。在您的情况下，您似乎只需要检查角色。

您可以通过在方法上使用注释 (@RolesAllowed) 或通过注入 EJB 会话上下文并询问当前用户的角色来以声明方式执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:57:28.883

从架构的角度来看，我认为您的最后一个选择是唯一明智的选择。

1.  存在安全风险。您最终将不得不根据会话中的用户信息（或通过任何其他安全机制）验证用户名，这实际上会使这可能具有的任何优势无效（因为无论如何您都必须知道用户的姓名/角色）。

2.  既不实用也不可扩展。想象一下，您需要添加另一个需要更多信息（而不仅仅是更多记录）的角色。然后，您将拥有用于现有 2 个用户角色的方法和用于新角色的另一组方法，可能具有不同的签名和*if-if-if*逻辑来处理不同的场景。这往往会变得非常混乱，非常非常快，并导致严重的维护问题。

如果您研究 Java 中的 Web 框架，您会注意到它们使用最后一种方法。他们还将用户信息放入更“抽象”的实体（身份、上下文等）中，并提倡在处理信息分层时使用角色而不是用户名。这种方式更容易管理存在于较大用户群中的复杂性，其中有多个角色需要不同的信息视图。只需将角色添加到用户配置文件即可。

作为参考，请参阅 Seam 的实现： http: [//grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.jboss.seam/jboss-seam/2.0.0.GA/org/jboss /seam/contexts/Contexts.java#Contexts](http://grepcode.com/file/repository.jboss.org/nexus/content/repositories/releases/org.jboss.seam/jboss-seam/2.0.0.GA/org/jboss/seam/contexts/Contexts.java#Contexts)。

**由于评论而更新没有足够的空间**

从您下面的推荐来看，您似乎正在耦合您的服务和 UI 层。只有当您从不期望外部实体使用您的服务层时，才会发生这种情况。这可能很好，这取决于您的情况。

除此之外，我同意 Mikera 的观点，但只是在一定程度上。`ThreadLocal`s 不是全局的，因为静态值是全局的。对于您的服务层，用户的信息肯定是全球性的，将其与标准业务信息分开是有意义的。另请记住，您可能还有其他需要存储的此类信息。如果您需要用户的国家或语言或货币怎么办？

`ThreadLocal`s 提供了一种有效且高效的解决方案。不完美？当然不是，但如果实施得当，它比其他解决方案更干净。也就是说，它确实需要一些努力来构建一个正确且万无一失的实现，但这几乎可以说是任何事情。**

# android - Android动态添加布局

> ID：12247049
> 
> 赞同：0
> 
> 时间：2012-09-03T11:35:16.343
> 
> 标签：android, android-linearlayout

我有一个包含由 XML 文件定义的 LinearLayout 的视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/main"
  android:orientation="horizontal"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:paddingTop="5dip"
  android:paddingBottom="5dip"
  android:background="#CCC">

     <LinearLayout 
        android:id="@+id/linearLayout1" 
        android:layout_height="fill_parent" 
        android:layout_width="wrap_content" 
        android:orientation="vertical">

        <TextView 
            android:id="@+id/hours"
            android:textAppearance="?android:attr/textAppearanceSmall" 
            android:layout_height="wrap_content" 
            android:layout_width="wrap_content"/>
    </LinearLayout>
</LinearLayout> 
```

它只是在屏幕左侧添加了一个栏。现在根据用户的输入，我想在栏旁边添加动态线性布局。

显示栏的代码是：

```
public class MainActivity extends ListActivity {

private static int HOURS_PER_DAY = 24;
Context context = this;

@Override
public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.list);

    setListAdapter(new ListAdapter() {

        public boolean areAllItemsEnabled() {
            return false;
        }

        public boolean isEnabled(int arg0) {
            return false;
        }

        public int getCount() {
            return HOURS_PER_DAY;
        }

        public Object getItem(int arg0) {
            return null;
        }

        public long getItemId(int arg0) {
            return 0;
        }

        public int getItemViewType(int arg0) {
            return 0;
        }

        public View getView(int position, View arg1, ViewGroup arg2) {

            LayoutInflater inflater = getLayoutInflater();
            View listItem = (View) inflater.inflate(R.layout.list,getListView(),false);

             return listItem;
        }

        public int getViewTypeCount() {
            return 1;
        }

        public boolean hasStableIds() {
            return false;
        }

        public boolean isEmpty() {
            return false;
        }

        public void registerDataSetObserver(DataSetObserver arg0) {
        }

        public void unregisterDataSetObserver(DataSetObserver arg0) {
        }

    }); 
```

在java代码中，我想在xml文件中定义的旁边添加新的线性布局

# php - 错误 #520009 - 帐户受到限制

> ID：12247050
> 
> 赞同：6
> 
> 时间：2012-09-03T11:35:20.913
> 
> 标签：php, paypal, paypal-adaptive-payments

尝试进行并行付款时，我收到 520009 错误（帐户 xx@xx.com 受到限制）。我的代码使用沙箱运行良好，但我切换到实时端点并开始失败。有问题的帐户是有效的贝宝帐户，我正在使用“feespayer=SENDER”。我错过了什么吗？即使收款人是基本帐户，付费电话也不应该通过吗？为什么会出现这种情况？

这是我的代码供参考

```
function deposit($config) {
    try {
        if (isset($config['return_url']))
            $this->return_url = $config['return_url'];
        else
            return 'Return URL should be set';

        if (isset($config['return_url']))
            $this->cancel_url = $config['cancel_url'];
        else
            return 'Cancel URL should be set';

        if (isset($config['email']))
            $this->sender_email = $config['email'];
        else
            return 'Email should be defined';

        if (isset($config['amount']))
            $this->amount = $config['amount'];
        else
            return 'Amount should be defined';

        $returnURL = $this->return_url;
        $cancelURL = $this->cancel_url;
        $currencyCode = 'USD';
        $memo = 'Deposit to ' . $this->ci->config->item('site_name');
        $feesPayer = 'SENDER';

        $payRequest = new PayRequest();
        $payRequest->actionType = "PAY";
        $payRequest->cancelUrl = $cancelURL;
        $payRequest->returnUrl = $returnURL;
        $payRequest->clientDetails = new ClientDetailsType();
        $payRequest->clientDetails->applicationId = $this->ci->config->item('application_id');
        $payRequest->clientDetails->deviceId = $this->ci->config->item('device_id');
        $payRequest->clientDetails->ipAddress = $this->ci->input->ip_address();
        $payRequest->currencyCode = $currencyCode;
        //$payRequest->senderEmail = $this->sender_email;
        $payRequest->requestEnvelope = new RequestEnvelope();
        $payRequest->requestEnvelope->errorLanguage = "en_US";

        $receivers = array();

        $receiver = new receiver();
        $receiver->email = $this->ci->config->item('moneyfan_account');
        $receiver->amount = $this->amount;
        $receiver->primary = 'false';

        $receivers[] = $receiver;

        $payRequest->receiverList = $receivers;
        $payRequest->feesPayer = $feesPayer;
        $payRequest->memo = $memo;

        $ap = new AdaptivePayments();
        $response = $ap->Pay($payRequest);            
        if (strtoupper($ap->isSuccess) == 'FAILURE') {

            $this->ci->session->set_userdata('FAULTMSG', $ap->getLastError());
            return json_encode(array('status' => 'false', 'msg' => $ap->getLastError()->error->errorId .' : '. $ap->getLastError()->error->message));
            //redirect(site_url('home/api_error'));
        } else {
            $this->ci->session->set_userdata('payKey', $response->payKey);
            if ($response->paymentExecStatus == "COMPLETED") {
                redirect($returnURL);
            } else {
                $token = $response->payKey;
                $payPalURL = PAYPAL_REDIRECT_URL . '_ap-payment&paykey=' . $token;
                return json_encode(array('status' => 'true', 'msg' => $payPalURL));
                //header("Location: " . $payPalURL);
            }
        }
    } catch (Exception $ex) {

        $fault = new FaultMessage();
        $errorData = new ErrorData();
        $errorData->errorId = $ex->getFile();
        $errorData->message = $ex->getMessage();
        $fault->error = $errorData;
        $this->ci->session->set_userdata('FAULTMSG', $fault);
        redirect(site_url('home/api_error'));
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T14:59:55.580

不！您无法使用基本帐户执行此操作。

要使 API 正常工作，您需要有一个经过验证的企业帐户。

在他们的[API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)中它说：

> 注意：
> 应用程序所有者必须拥有 PayPal 企业帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T23:22:07.110

PayPal API 有两个参考来源：cms.paypal.com 页面，如 Mihai Iorga 所引用的页面，以及 www.x.com 页面，如： [https ://www.x.com/developers/paypal/文档工具/与您的应用程序一起使用](https://www.x.com/developers/paypal/documentation-tools/going-live-with-your-application)

在 x.com 上，它说您必须有一个经过验证的企业帐户，尽管 cms.paypal.com 并不清楚这种情况。

# iphone - 如何使用 Springboard Services Framework 使用 SBSLaunchApplicationWithIdentifier

> ID：12247052
> 
> 赞同：1
> 
> 时间：2012-09-03T11:35:32.840
> 
> 标签：iphone, ios, jailbreak, springboard

我想使用 Springboard 服务框架来使用以下代码。

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.apple.preferences"), false); 
```

但是，当我下载头文件并在我的项目中使用它时，它不会构建。请让我知道如何使这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:17:18.163

你到底打算用这种方法做什么？我的印象是从守护进程启动应用程序？

还有其他方法可以很容易地启动应用程序。我发现最可靠的是使用显示堆栈来正确启动应用程序。当您关闭应用程序并尝试重新启动并崩溃时，其他启动应用程序的方法往往会导致问题。

使用 theos，您可以执行以下操作：

```
NSMutableArray *displayStacks = nil;

// Display stack names
#define SBWPreActivateDisplayStack        [displayStacks objectAtIndex:0]
#define SBWActiveDisplayStack             [displayStacks objectAtIndex:1]
#define SBWSuspendingDisplayStack         [displayStacks objectAtIndex:2]
#define SBWSuspendedEventOnlyDisplayStack [displayStacks objectAtIndex:3]

// Hook SBDisplayStack to get access to the stacks

%hook SBDisplayStack

-(id)init
{
    %log;
    if ((self = %orig)) 
    {
        NSLog(@"FBAuth: addDisplayStack");
        [displayStacks addObject:self];
    }
    return self;
}

-(void)dealloc
{
    [displayStacks removeObject:self];
    %orig;
}

%end 
```

然后要启动应用程序，请执行以下操作：

```
id PreferencesApp = [[objc_getClass("SBApplicationController") sharedInstance] applicationWithDisplayIdentifier:@"com.apple.preferences"];

[SBWActiveDisplayStack pushDisplay:PreferencesApp]; 
```

However, if you really want to use that method, you need to specify what errors are stopping it from building and check which header files you are using to build it with. You also need to link against the SBS framework.

# javascript - Phonegap iOS - 设备准备好不触发其他事件

> ID：12247060
> 
> 赞同：1
> 
> 时间：2012-09-03T11:36:20.823
> 
> 标签：javascript, ios, cordova

我尝试了一切，但仍然无法触发 deviceready 事件。我还尝试触发正常工作的暂停事件。我正在使用科尔多瓦 2.0.0。这是我的代码：

```
<html>
<head>

    <title>Taxiii</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale =1, user-scalable=no" />   
    <meta name="apple-mobile-web-app-capable" content="yes" /> 
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />  
    <link rel="stylesheet" href="reset.css" type="text/css" media="all" />
    <link rel="stylesheet" href="style.css" type="text/css" media="all" />

    <script src="cordova-2.0.0.js"></script>
    <script src="jquery.js"></script>
    <script src="xui.js"></script>
    <script src="iscroll.js"></script>
    <script src="loadData.js"></script>
    <script src="loadServices.js"></script>
    <script src="js.js"></script>
    <script src="methods.js"></script>
    <script src="setSizes.js"></script>
    <script src="map.js"></script>
    <script src="http://maps.googleapis.com/maps/api/js?libraries=places,geometry&sensor=true"></script>

    <script>

       function onLoad() {
          document.addEventListener("deviceready", onDeviceReady, false);
       }

       function onDeviceReady() {
          alert("123")
       }

    </script>

</head>
<body onload="onLoad()">
... 
```

我尝试了更多的语法，但没有一个奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:07:27.760

没有必要包裹`document.addEventListener("deviceready", onDeviceReady, false);`在里面`function onLoad()`。尝试不使用它并判断它是否有帮助。

# mysql - 我删除了 general_log 表，如何再次创建它？

> ID：12247063
> 
> 赞同：15
> 
> 时间：2012-09-03T11:36:26.463
> 
> 标签：mysql, mysql-error-1146

## 启用日志记录

我启用了日志[记录](https://stackoverflow.com/a/678310/471214)：

```
SET GLOBAL log_output = 'TABLE';
SET GLOBAL general_log = 'ON'; 
```

所有执行的查询都记录到`mysql.general_log`表中。没事。

## 尝试清理表

然后表变大了，我想从表中删除所有记录。我执行了：

```
DELETE FROM general_log 
```

但这导致了一个错误，说我无法锁定日志表。因此，我在禁用日志记录后删除了表：

```
SET GLOBAL general_log = 'OFF';
DROP TABLE general_log; 
```

我希望再次启用日志记录将创建表，但我无法启用它。当我执行这个：

```
SET GLOBAL general_log = 'ON'; 
```

它给出了这个错误：

> 表 'mysql.general_log' 不存在

## 问题

1.  如何重新创建`mysql.general_log`？
2.  如何`mysql.general_log`安全无痛地清理？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-03T11:38:45.870

## 重新创建：

```
USE mysql;

CREATE TABLE IF NOT EXISTS `general_log` (
  `event_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `user_host` mediumtext NOT NULL,
  `thread_id` int(11) NOT NULL,
  `server_id` int(10) unsigned NOT NULL,
  `command_type` varchar(64) NOT NULL,
  `argument` mediumtext NOT NULL
) ENGINE=CSV DEFAULT CHARSET=utf8 COMMENT='General log'; 
```

## 清空表：

```
TRUNCATE table mysql.general_log; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T11:39:54.130

对于 1.:

```
USE mysql;
CREATE TABLE `general_log` (
    `event_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `user_host` MEDIUMTEXT NOT NULL,
    `thread_id` INT(11) NOT NULL,
    `server_id` INT(10) UNSIGNED NOT NULL,
    `command_type` VARCHAR(64) NOT NULL,
    `argument` MEDIUMTEXT NOT NULL
)
COMMENT='General log'
COLLATE='utf8_general_ci'
ENGINE=CSV; 
```

对于 2.:

```
TRUNCATE mysql.general_log; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-28T12:39:48.787

这是更新版本，2012 年的答案不再起作用：

```
CREATE TABLE mysql.general_log (
  `event_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `user_host` mediumtext NOT NULL,
  `thread_id` bigint(21) unsigned NOT NULL,
  `server_id` int(10) unsigned NOT NULL,
  `command_type` varchar(64) NOT NULL,
  `argument` mediumtext NOT NULL
) ENGINE=CSV DEFAULT CHARSET=utf8 COMMENT='General log' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-26T11:34:58.507

## MySQL 5.7.18

我也丢了`mysql.general_log`桌子，但其他答案对我没有帮助。

然后，我注意到有关表结构的错误，因为它有点不同`MySQL 5.7.18`，所以我更改了一些字段，现在它可以工作了。

如果有人需要它：

```
CREATE TABLE `general_log` (
  `event_time` timestamp(6) NOT NULL DEFAULT CURRENT_TIMESTAMP(6) ON UPDATE CURRENT_TIMESTAMP(6),
  `user_host` mediumtext NOT NULL,
  `thread_id` bigint(21) unsigned NOT NULL,
  `server_id` int(10) unsigned NOT NULL,
  `command_type` varchar(64) NOT NULL,
  `argument` mediumblob
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COMMENT='General log' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-12T20:52:59.927

好的，有第一手经验，这对我有用，如果您的表因任何原因损坏，可与 MySQL 5.6.11 一起使用

```
use mysql;
SET GLOBAL general_log = 'OFF';

DROP TABLE general_log;

CREATE TABLE IF NOT EXISTS `general_log` (
  `event_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `user_host` mediumtext NOT NULL,
  `thread_id` bigint(21) unsigned NOT NULL,  -- Be careful with this one.
  `server_id` int(10) unsigned NOT NULL,
  `command_type` varchar(64) NOT NULL,
  `argument` mediumtext NOT NULL
);

SET GLOBAL general_log = 'ON';

SET GLOBAL log_output = 'TABLE';

select * from mysql.general_log
order by event_time desc; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-14T09:04:29.833

在 MySQL 8.0.17 中重新创建表：

```
use mysql;
CREATE TABLE general_log(
event_time timestamp(6) NOT NULL ,
user_host mediumtext NOT NULL,
thread_id bigint(21) unsigned NOT NULL,
server_id int unsigned NOT NULL,
command_type varchar(64) NOT NULL,
argument mediumblob NOT NULL
) ENGINE=CSV DEFAULT CHARSET=utf8 COMMENT='General log'; 
```

# java - 如何使用访问令牌在 facebook 墙上发布数据

> ID：12247064
> 
> 赞同：1
> 
> 时间：2012-09-03T11:36:26.867
> 
> 标签：java, facebook-graph-api

> **可能重复：**
> [使用图形 api 发布到 facebook 用户的墙上](https://stackoverflow.com/questions/10908329/posting-to-a-wall-of-a-facebook-user-using-the-graph-api)

如何使用从 facebook API 生成的访问令牌在 facebook 墙上发布数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:27:25.327

使用 commons-http-client 和 graph api，代码将如下所示。

```
class WallPostService{
    ...
    public makeWallPost(){
        HttpClient client = null;
        PostMethod method = null;
        String urlStr = null;
        String linkText = ""; //Facebook page name or alias
        String linkURL = ""; //Facebook page URL
        String response = null;
        String accessToken = null;

        try{
            urlStr = "https://graph.facebook.com/$PROFILE_ID$/feed";
            urlStr = urlStr.replace("$PROFILE_ID$", facebookId);
            accessToken = getAccessToken();//[USER ACCESS TOKEN]
            client = new HttpClient();
            method = new PostMethod(urlStr);
            method.setRequestHeader("pageEncoding", "UTF-8");
            method.setRequestHeader("Content-Type", "text/html; charset=UTF-8");

            method.addParameter("access_token", accessToken);
            method.addParameter("message", "");
            method.addParameter("link", "Link of wall post header");
            method.addParameter("name", "Header of wall post");
            method.addParameter("actions", "[{\"name\": \"" + linkText + "\" , \"link\": \"" + linkURL + "\"}]");

            method.addParameter("caption", " ");
            method.addParameter("description", "message body here");
            method.addParameter("picture", "http://www.example.com/test.jpg");
            client.executeMethod(method);
            response = method.getResponseBodyAsString();
           }
           catch(Exception e){

           }
           finally{
               method.releaseConnection();
           }

    }
} 
```

# asp.net-mvc-3 - 图像按钮 asp.net

> ID：12247066
> 
> 赞同：0
> 
> 时间：2012-09-03T11:36:35.243
> 
> 标签：asp.net-mvc-3, imagebutton

嗨，我想做的就是使用图像而不是按钮将值传递给控制器​​。我用按钮让它工作了。

```
<input type="submit" name="Vote" value="1" /> 
```

这可行，但是当我尝试使用按钮类型时，它会说我发送了一个空参数。

```
<input type="image" src="imagepath" value="1" alt="1" name="Vote" /> 
```

如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:39:42.320

```
<input type="image" src="imagepath" value="1" alt="1" name="Vote" onclick="submit" /> 
```

但我认为你会通过按回车键失去提交。

输入图像“有时”（？）只需发送图像的 x 和 y 坐标...

`Input type="image"`无论如何，提交按钮是要避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:40:40.747

为什么不使用 Ajax？

```
@Ajax.RawActionLink("Text", "Action", "Controller", null, ajaxOptions, new { @class = "button green small" }) 
```

# ios - iOS Mail.app 文本正文中的换行符

> ID：12247073
> 
> 赞同：2
> 
> 时间：2012-09-03T11:37:03.107
> 
> 标签：ios, html-email, line-breaks, mailto

我有一个简单`div`的 with`onclick`属性。该属性包含一个`mailto`achor 标记，因此如果访问者单击 div，他/她的邮件客户端会弹出一个新的邮件窗口。

我的问题是邮件正文中有一个带有换行符的示例标签。在 OS X Mail.app、Windows 的 Outlook、Gmail 甚至在我的 Windows Phone 7.5 默认邮件客户端中，它都能完美运行，但在我的 iPhone 或 iPad 上却没有换行符。

对于换行符，我使用以下代码：`\u2029`.

我复制了整个代码，以便您了解我的问题：

```
<?php
    $linebreak = '\u2029';
    $signup_email = 'hello@company.com';
    $signup_subject = 'Signup';
    $signup_body = 'Dear Company,'. $linebreak . $linebreak .'I would like to signup as the following'. $linebreak .'My name: '. $linebreak .'My e-mail: '. $linebreak . $linebreak . $linebreak .'Best regards, '. $linebreak;
?>
<div id="signup" class="left" onclick="location.href='mailto:<?=$signup_email;?>?subject=<?=$signup_subject;?>&body=<?=$signup_body;?>';">Signup</div> 
```

示例文本只是示例文本，我不想制作这样的注册表单（它会很蹩脚（：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:31:31.363

好的，我刚刚想通了。

[在这篇文章](http://www.cubetoon.com/2008/how-to-enter-line-break-into-mailto-body-command/)中，作者说你应该使用 %0D%0A 序列来换行。它有效！我在 Windows XP/7、Windows Phone 7.5、iOS 5.1 和 iOS 4.2.1 上尝试了 Gmail、OS X 默认 Mail.app、MS Outlook 和 Thunderbird。

# html - HTML/CSS——省略标志左侧的面包屑

> ID：12247077
> 
> 赞同：2
> 
> 时间：2012-09-03T11:37:21.420
> 
> 标签：html, css, overflow, ellipsis

我正在尝试在徽标旁边放置一个面包屑栏。该网站应该从 1000 像素缩放到 400 像素，因此如果我可以省略面包屑以防它们太长（开始新行没有多大意义，因为面包屑文本与徽标水平对齐）文本）。

期望的 ASCII 艺术外观：

*当所有文字都适合时：*

```
 /-\
  \-/
COMPANY    Breadcrumb > Breadcrumb > Breadcrumb 
```

*缩小时：*

```
 /-\
  \-/
COMPANY    Breadcrumb > Breadcru... 
```

我的**HTML**目前看起来像这样：

```
<div>
    <a href="...">
        <img src="logo"/>
    </a>
</div>
<div style="position: absolute; top: 50px; left: 0px; overflow: hidden; text-overflow: ellipsis; min-width: 400px; white-space: nowrap; max-width: 100%;">
    <a href="..." style="margin: 0 0 0 100px;">Top Crumb</a>
    <span>&nbsp;&gt;&nbsp;</span>
    <a href="...">2nd Level Crumb</a>
    <span>&nbsp;&gt;&nbsp;</span>
    <a href="...">3rd Level Crumb</a>
</div> 
```

现在，如何将省略号应用于最后一个可见的面包屑（无需为每个`<span>`and设置固定宽度`<a>`？

（我希望这足够清楚，但我非常乐意回答问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:53:24.777

见[http://jsfiddle.net/C97kC/](http://jsfiddle.net/C97kC/)

只需删除`min-width: 400px`

CSS：

```
#div{
    position: absolute; top: 50px; left: 0px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
} 
```

HTML：

```
<div>
    <a href="...">
        <img src="logo"/>
    </a>
</div>
<div id="div">
    <a href="..." style="margin: 0 0 0 100px;">Top Crumb</a>
    <span>&nbsp;&gt;&nbsp;</span>
    <a href="...">2nd Level Crumb</a>
    <span>&nbsp;&gt;&nbsp;</span>
    <a href="...">3rd Level Crumb</a>
</div>​ 
```

**编辑：**

如果您希望它的宽度至少为 400 像素，则可以使用您拥有的代码。问题是文本不够长。

如果你使用...

```
<a href="..." style="margin: 0 0 0 100px;">Top Crumb</a>
<span>&nbsp;&gt;&nbsp;</span>
<a href="...">2nd Level Crumb</a>
<span>&nbsp;&gt;&nbsp;</span>
<a href="...">3rd Level Crumb</a>
<span>&nbsp;&gt;&nbsp;</span>
<a href="...">4rd Level Crumb</a> 
```

...你会看到省略号。

演示： http: [//jsfiddle.net/C97kC/1/](http://jsfiddle.net/C97kC/1/) ​</p>

# android - 如何从 android 上的电子邮件选择器中删除 facebook、skype 和不必要的选项

> ID：12247082
> 
> 赞同：1
> 
> 时间：2012-09-03T11:37:26.930
> 
> 标签：android, android-intent

在我的应用程序中，我将 WAV 文件作为电子邮件附件发送。在显示电子邮件选择器时，Indent.createChooser 意图将列出电子邮件、gmail、facebook、skype、蓝牙和其他不必要的选项。我只想显示电子邮件和 Gmail 选项。我不知道该怎么做？在您提出可能重复的问题之前，我看到了以下链接，但它对我没有帮助。

1.  [如何在电子邮件中发送录制的语音？](https://stackoverflow.com/questions/10860499/how-to-send-recorded-voice-in-email)
2.  [Android Intent 选择器仅显示电子邮件选项](https://stackoverflow.com/questions/6255915/android-intent-chooser-to-only-show-e-mail-option)

如上述链接中所述，我已经尝试过`sendIntent.setType("audio/rfc822");`。再次显示相同。

我的代码示例：

```
 Intent sendIntent = new Intent(Intent.ACTION_SEND);
    sendIntent.putExtra(Intent.EXTRA_SUBJECT, "xxxxxxxxxxxx");
    sendIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file://" + f.getAbsolutePath())); 
    sendIntent.setType("audio/wav");
    startActivity(Intent.createChooser(sendIntent, "Email file")); 
```

**更新的问题：**

我已经实现了一个示例，其中列出了已安装的应用程序，然后单击列表视图上的项目我将启动 Gmail / 电子邮件应用程序： ***上面写着“没有应用程序可以执行此操作”。***

要在列表视图中列出应用程序：

```
-----------------
List<PackageInfo> packs = packageManager.getInstalledPackages(0);
  for(int i = 0; i < packs.size(); i++) {
     PackageInfo p = packs.get(i);
     ApplicationInfo a = p.applicationInfo;
     if ((includeSysApps) && ((a.flags & ApplicationInfo.FLAG_SYSTEM) == 1)) {
        continue;
     }
     App app = new App();
     app.setTitle(p.applicationInfo.loadLabel(packageManager).toString());
     app.setPackageName(p.packageName);
     app.setVersionName(p.versionName);
     app.setVersionCode(p.versionCode);
     app.setInstallDir(p.applicationInfo.sourceDir);
     app.setInstallSize(calculateSize(app.getInstallDir()));
     CharSequence description = p.applicationInfo.loadDescription(packageManager);
     app.setDescription(description != null ? description.toString() : "");
     apps.add(app);
     ----------- 
```

在 onclick 项目事件中是：

```
 Intent sendIntent = new Intent(getPackageManager().getLaunchIntentForPackage(app.getPackageName()));
                sendIntent.putExtra(Intent.EXTRA_SUBJECT, "xxxxxxxxxxxx");
                sendIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file://" + Environment.getExternalStorageDirectory().getPath()+"/Music/SalsaFav.mp3")); 
                sendIntent.setType("audio/wav");
                startActivity(Intent.createChooser(sendIntent, "Email file")); 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:45:20.287

您可能需要创建自己的弹出式活动并将意图发送到该活动。现在在该弹出活动中，您需要列出您喜欢的沟通渠道。在单击任何通信渠道时，您弹出的活动应启动相关活动。您可以查看的其他内容是[这篇](https://stackoverflow.com/questions/3935009/how-to-open-gmail-compose-when-a-button-is-clicked-in-android-app)文章，它将向您展示如何完成工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:52:59.327

你有两个选择：

*   将[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)与 queryIntentActivities 函数一起使用，从中过滤并显示您自己的 Dialog

在这里，您可以获得可以实际处理您的 Intent 的应用程序：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);
sendIntent.putExtra(Intent.EXTRA_SUBJECT, "xxxxxxxxxxxx");
sendIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file://" + f.getAbsolutePath())); 
sendIntent.setType("audio/wav");

// Get the Activities which can handle the Intent
List<ResolveInfo> resolveInfos = getPackageManager().queryIntentActivities(sendIntent, 0);

// Loop on your Activities, filter and construct your own list here
if (!resolveInfos.isEmpty()){
  for (ResolveInfo resolveInfo : resolveInfos) {
  // Filter here !

  }
} 
```

*   [使用getApplicationInfo](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo%28java.lang.String,%20int%29)用已知包名称列表查询 PackageManager 并根据现有应用程序构建对话框

我认为第一个解决方案最符合您的需求

# rest - 在 Sinatra 中，如何使过滤器依赖于请求方法？

> ID：12247084
> 
> 赞同：2
> 
> 时间：2012-09-03T11:37:32.460
> 
> 标签：rest, sinatra

我一直在 Sinatra 中按照文档中声明的方式使用过滤器：没有匹配字符串、匹配字符串或匹配正则表达式。到目前为止，它一直运行良好。现在，我有一个特定的用例。假设我有这条路线：

```
/resources/1 
```

根据 REST，根据请求方法，这可以是 GET 方法、PUT 方法或 DELETE 方法。第一个问题是：如何编写仅在 GET 请求时调用的过滤器？（目前我让所有这些都被过滤，然后我才测试该方法。它有效，但我不喜欢它）。第二个问题，更重要的是：假设触发了这样的 PUT 请求：

```
/resources/ 
```

这当然是错误的，因为 PUT 请求没有关联的资源 id。我想知道 Sinatra 中是否有一些东西可以让我做这样的事情：

```
before "/resources/", :method => :put do
  error_message
end 
```

只是这种可能性不存在（之前只接受一个论点）。我怎样才能达到这个结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T02:15:38.633

实际上，过滤器[确实需要条件](http://www.sinatrarb.com/intro#Filters)。不过，您不必使用条件，您可以在过滤器中使用条件：

```
before "/path/" do
  if request.request_method == "PUT"
    # do something
  end
end 
```

如果你想使用一个条件，我想你需要写一个，也许是这样的：

```
set(:accepted_verbs) {|*verbs|
  condition { 
    verbs.any?{|v| v == request.request_method }
  } 
}

before "/path/", :accepted_verbs => ["GET","POST"] do
  # do something
end

before "/path/", :accepted_verbs => ["PUT"] do
  # do something else
end 
```

请参阅[条件](http://www.sinatrarb.com/intro#Conditions)了解更多信息。

# android - 为什么 AsyncTasks 不总是在 onClickListener 中工作？

> ID：12247088
> 
> 赞同：4
> 
> 时间：2012-09-03T11:37:56.197
> 
> 标签：android, methods, onclick, android-asynctask, onclicklistener

在过去的几个月里，我注意到了这一点。如果我在按钮上设置 clickListener 来执行 AsyncTask，它并不总是被执行。我通过将执行 AsyncTask 的代码行包装在一个方法中来解决这个问题。

这是始终无法正常工作的代码：

```
button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            new CustomAsyncTask().execute();
        }
    }); 
```

这是我的修复：

```
button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            executeAsyncTask();
        }
    });

public void executeAsyncTask(){
    new CustomAsyncTask().execute();
} 
```

我没有注意到它何时会中断和不会中断的模式，但我想知道是否有其他人注意到这一点？

此外，如果有人解释为什么会发生这种情况，那也很酷。

提前致谢。

**编辑**

这是 CustomAsyncTask （我知道它不会一直被调用，因为它不打印任何东西）

```
private class CustomAsyncTask extends AsyncTask<Void, Void, Void>{

    @Override
    protected Void doInBackground(Void... params) {

        Log.i("CustomAsyncTask", "doInBackground");

        return null;
    }
} 
```

# rest - 为什么 IP 10.0.2.2 在 Android 模拟器中不起作用

> ID：12247093
> 
> 赞同：2
> 
> 时间：2012-09-03T11:38:13.450
> 
> 标签：rest, cordova, android-emulator

我是 android phonegap 应用程序的新手。我试图通过 android 模拟器应用程序中的 rest api 进行登录，但总是以 jquery ajax 错误函数结束，我使用了 IP 地址 10.0.2.2 但仍然无法正常工作 - 我怎样才能获得 jquery ajax 的成功响应来自安卓模拟器。这里我给出js代码..

```
$.ajax({
          url: 'http://10.0.2.2/wedding/Source/Website/api/login',
          type: 'POST',
          data: $('#loginPageForm').serialize(),
          success: function(data){
             /*Process your response here*/
              alert(data);
          },
          error: function(jqXHR, textStatus, errorThrown){
            alert(99999);
          }
       });

                   And here is the html form I am using for login ...

<form method="post" data-ajax="false" id="loginPageForm">
         <fieldset>
             <div data-role="fieldcontain">
                 <label for="basic">Username:</label>
                 <input type="text" name="User[username]" id="loginPageUsername" value=""  />
             </div>
             <div data-role="fieldcontain">
                 <label for="basic">Password:</label>
                 <input type="password" name="User[password]" id="loginPagePassword" value=""  />
             </div>
             <div data-role="fieldcontain">
                 <button value="Login" name="loginPageSubmit" type="button" onClick="doLogin()">Login</button>
             </div>
         </fieldset>
     </form> 
```

我已经通过正常工作的休息客户端测试了休息应用程序，然后我还在也在运行的浏览器上测试了该应用程序，但相同的代码在 Android 模拟器上不起作用。谁能解释一下错误在哪里以及什么我需要做些什么来修复它。

提前致谢..

# c# - 如何编写onrowcommand的事件

> ID：12247097
> 
> 赞同：3
> 
> 时间：2012-09-03T11:38:37.220
> 
> 标签：c#, gridview

我是 c# 的新手，如果我的提问方式不正确，我深表歉意。

我已经在网格视图中添加了按钮，现在我想对 c# 中的按钮编码执行一些特定的操作。但是我无法单击按钮，这就是为什么我无法针对按钮事件编写代码。

请告诉我如何针对网格中的按钮事件编写代码？？？

这是我的编码：

```
 <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button ID="btnDecline" runat="server" Text="Decline"  onrowcommand="decline" />
                    </ItemTemplate>
                </asp:TemplateField> 
```

这是 c# 编码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using Sherserve.BusinessLogicLayer;
using Sherserve.CustomTypeLayer;

namespace SherserveLeaveManagementSystem
{
    public partial class LMSAdminPanel : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!this.IsPostBack)
            {
                LMSManager leavestatus = new LMSManager();
                int emplid = Convert.ToInt32(Session["EmployeeID"]);
                List<EmployeeLeave> leaverecord = leavestatus.GetLeaveRecord(emplid);
                GridView1.DataSource = leaverecord;
                GridView1.DataBind();

            }
        }

        protected void GridView1_PageIndexchanging(object sender, GridViewPageEventArgs e)
        {

            LMSManager leavestatus = new LMSManager();
            int emplid = Convert.ToInt32(Session["EmployeeID"]);
            List<EmployeeLeave> leaverecord = leavestatus.GetLeaveRecord(emplid);
            GridView1.DataSource = leaverecord;
            GridView1.PageIndex = e.NewPageIndex;
            GridView1.DataBind();
        }

        protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

    }
} 
```

我是 C# 新手，请不要介意我的提问方式是否长或不正确。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:47:24.583

像这样使用 commandname 属性（在这种情况下选择，删除）：

```
<asp:GridView ID="EntityGridView" runat="server" DataKeyNames="Id" DataSourceID="EntityListDataSource"
    AutoGenerateColumns="False" AllowPaging="True" AllowSorting="True" SkinID="GridViewSmall"
    OnRowCommand="EntityGridView_RowCommand" 
    OnPageIndexChanged="EntityGridView_PageIndexChanged"
    OnSorting="EntityGridView_Sorting">
    <Columns>
        <asp:TemplateField ItemStyle-CssClass="TemplateFieldTwoColumns">
            <ItemTemplate>
                <asp:ImageButton ID="btnView" runat="server" ToolTip="<% $resources:AppResource,Edit %>" SkinID="EditPage" CommandName="Select" CommandArgument='<%# Eval("Id") %>' />
                <asp:ImageButton ID="btnDelete" runat="server" ToolTip="<% $resources:AppResource,Delete %>" SkinID="DeletePage" OnClientClick="<%# GetDeleteConfirmation() %>" CommandName="Delete" CommandArgument='<%# Eval("Id") %>' />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="Title" HeaderText="<% $resources:AppResource,Title %>" SortExpression="Title" />
    </Columns>
</asp:GridView> 
```

以下是您连接到事件的方式：

```
 protected void EntityGridView_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "Select")
        {
             //do something on select...                
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:48:16.883

有关更多信息，请参阅此 [http://www.dreamincode.net/forums/topic/184448-using-gridview-and-rowcommand-events/](http://www.dreamincode.net/forums/topic/184448-using-gridview-and-rowcommand-events/)

```
protected void myGV_RowCommand(Object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "click1")
        {
            int index = Convert.ToInt32(e.CommandArgument); //get row number selected
            GridViewRow row = GridView1.Rows[index]; 
            Go ahead do something like above 

        }

        if (e.CommandName == "click2")
        {
            Do something cool ... 
        }
    } 
```

# android - 在 ListView 上添加视图

> ID：12247100
> 
> 赞同：2
> 
> 时间：2012-09-03T11:38:41.010
> 
> 标签：android, listview

我想创建日历。我想使用 ListView 作为 Hours For day 查看。

我遇到了一个问题，用于显示白天的事件。我将我的视图用作事件。当我想在两个小时之间显示我的视图时，一切都很好（因为只是在适配器的 getView() 方法中我膨胀了我的视图并显示它）但我无法在两个小时之间显示我的视图时间不在两个小时之间。

例如，我无法在 2:30 到 3:30 之间显示我的视图。我想在 ListView 上添加我的视图。

这是 ICS 日历，我想要这样的东西： ![在此处输入图像描述](../Images/672f71d4ee5452fe6fc48e9c67010cfa.png)
你可以在 5:30 到 6:30 之间看到事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:43:39.617

使用相对布局创建“层”。您的底部布局将以 ListView 和 TextView 作为顶部。但是这种布局可能会引起很多头痛。

我建议创建自定义组件（基于 LinearLayout），您可以在其中自己绘制时间并使用绝对定位放置 TextView。

# php - 返回MYSQL表中所有列字段的名称

> ID：12247103
> 
> 赞同：0
> 
> 时间：2012-09-03T11:39:05.230
> 
> 标签：php, mysql, sql

我想在我的数据库中获取特定表的所有列名。我四处搜索，发现了这个查询：

```
SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns where TABLE_NAME = 'auto' 
```

所以我写了这个**PHP**来处理它：

```
 <?php
    $query  = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns where TABLE_NAME = 'auto'";
    $result = mysql_query($query);
    $i = 0;
    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    echo "<p>".$row[$i]."</p>";
    $i++;
  }
  ?> 
```

它什么也不返回。我尝试通过删除变量不使用数组索引，`$i`但它只返回`Array`结果列表。

有谁知道如何做到这一点？

我也试过：

```
<?php
    $query  = "SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.Columns where TABLE_NAME = 'auto'";
    $result = mysql_query($query);
    $i = 0;
    print_r($result);
  ?> 
```

那回来了`Resource id #5`。所以它必须是SQL Query。

这完全杀死了页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:40:16.623

您正在尝试获取关联的数组 - 而不是数字数组。

```
while($row = mysql_fetch_array($result)) 
```

默认情况下，关联数组是列名数组。

您还可以从表中获取列详细信息，而无需使用信息模式 - 这在 mysql 中性能很差 - 5.1 到 5.4ish - 通过使用`show columns from yourTableName;`

```
mysql> show columns from first;
+-------+----------+------+-----+---------+-------+
| Field | Type     | Null | Key | Default | Extra |
+-------+----------+------+-----+---------+-------+
| id    | int(3)   | YES  |     | NULL    |       |
| title | tinytext | YES  |     | NULL    |       |
+-------+----------+------+-----+---------+-------+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T11:46:37.717

我错过了什么还是我们忘记了[SHOW COLUMNS](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html)功能？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:43:38.623

```
<?php
 /* The users table consists of three fields:
 *   user_id
 *   username
 *   password.
 */
  $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
   if (!$link) {
      die('Could not connect to MySQL server: ' . mysql_error());
   }
   $dbname = 'mydb';
   $db_selected = mysql_select_db($dbname, $link);
   if (!$db_selected) {
     die("Could not set $dbname: " . mysql_error());
   }
   $res = mysql_query('select * from users', $link);

    echo mysql_field_name($res, 0) . "\n";
    echo mysql_field_name($res, 2);
  ?> 
```

上面的示例将输出：

user_id 密码

# javascript - jQuery .text() 显示双文本

> ID：12247110
> 
> 赞同：14
> 
> 时间：2012-09-03T11:39:36.253
> 
> 标签：javascript, jquery, html

有一个奇怪的情况发生。我有一个`<h3>`文字。当我使用 .text() 提取此文本然后将其放入 a`<textarea>`时，文本出现两次。

[这是jsFiddle。](http://jsfiddle.net/Putpe/4/)

**HTML**

```
<h3 class="profileRightAboutMeText">Heya, this is all the text.</h3>     
<textarea class="profileRightAboutMeTextarea"></textarea> 
```

**查询**

```
$(document).on('click','h6.editMyProfileSection', function() {
  var originalText = $('h3.profileRightAboutMeText').text();

  $('h3.profileRightAboutMeText').fadeOut('fast', function() {
    $('textarea.profileRightAboutMeTextarea').text(originalText).fadeIn('fast');
  });
  alert(originalText);
}); 
```

警报和`<textarea>`显示文本都加倍，如下所示：

嘿，这是所有的文字。嘿，这是所有的文字。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-03T11:47:08.413

我会说你有 2 个元素与页面上的 $('h3.profileRightAboutMeText') 匹配。

您可以在这里看到：http: [//jsfiddle.net/KwcGB/](http://jsfiddle.net/KwcGB/)该文本出现两次，因为我在 html 中添加了一个额外的 h3.profileRightAboutMeText 但如果删除了额外的行，那么它只会出现一次。

尝试将 $('h3.profileRightAboutMeText') 放入 firebug 的控制台并查看它匹配的元素数量......

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-19T12:21:03.960

`text()`对于由复合路径寻址的重复项，JQuery 对方法有不同的行为。

例如，让

```
<div id=b class="a">2</div>
<div id=b class="a">3</div> 
```

然后

```
var val1 = $("#b").text()
var val2 = $("#b.a").text()

// val1 = 2
// val2 = 23 
```

为避免此问题，请务必使用 .first()

```
var val3 = $("#b.a").first().text()

// val3 = 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T11:41:17.340

对于表单元素，您应该使用[`val()`](http://api.jquery.com/val/)而不是`text()`：

```
$("textarea.profileRightAboutMeTextarea").val(originalText) 
```

此外，检查您是否有重复的带有 class 的元素`profileRightAboutMeText`。

# mysql - MySQL 非法混合排序规则

> ID：12247120
> 
> 赞同：19
> 
> 时间：2012-09-03T11:40:01.303
> 
> 标签：mysql, symfony, collation, symfony-2.1, fosuserbundle

查看我的产品日志后，我有一些错误提示：

```
[2012-08-31 15:56:43] request.CRITICAL: Doctrine\DBAL\DBALException: 
An exception occurred while executing 'SELECT t0.username ....... FROM fos_user t0 WHERE t0.username = ?'
with params {"1":"Nrv\u29e7Kasi"}:

SQLSTATE[HY000]: General error: 1267 Illegal mix of collations (latin1_swedish_ci,IMPLICIT)
and (utf8_general_ci,COERCIBLE) for operation '=' 
```

Alghout 我在学说 cfg 下有 UTF-8 默认值：

```
doctrine:
    dbal:
        charset:  UTF8 
```

似乎我所有的 MySQL 表都在`latin1_swedish_ci`，所以我的问题是：

**我可以手动将排序规则更改`utf8_general_ci`为我的所有表格，而不会出现任何并发症/预防措施吗？**

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-04T09:48:43.540

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T18:15:16.113

Thats right. I ran into this problem and the best quick and fast solution is

```
 CONVERT(fos_user.username USING utf8) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-23T08:44:52.440

Simply convert table's character set by command as follows,

```
ALTER TABLE tbl_name CONVERT TO CHARACTER SET utf8; 
```

# xmpp - 在 smack 中阻止用户

> ID：12247121
> 
> 赞同：3
> 
> 时间：2012-09-03T11:40:06.250
> 
> 标签：xmpp, smack

我正在开发一个聊天应用程序，我想从我的聊天列表中阻止一个特定的朋友。谁能告诉我如何通过 smack 库阻止特定用户。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T17:51:07.990

XMPP 在[XEP-16](http://xmpp.org/extensions/xep-0016.html)中定义了隐私列表。Smack 将 XEP-16 实现为[PrivacyListManager](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smack/PrivacyListManager.html)。可以在[此处](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/privacy.html)找到文档和示例代码。

# php - Magento 中的 /app/code/core/Mage/Catalog/Model/Resource 文件夹？

> ID：12247123
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:13.903
> 
> 标签：php, magento

我正在尝试解决 Magento 网站的一些问题，但我遇到了很多问题。. .

我在 Magento 中找到了一个文件夹，其路径为：

“/app/code/core/Mage/Catalog/Model/Resource”

在 Magento 的默认安装中，它的文件结构如下：

```
 - category
 - collection
 - eav
 - helper
 - layer
 - product
 - more php files 
```

然而，我收到的当前站点的转储除了“Eav”文件夹之外没有任何这些文件夹或文件，该站点抛出错误，所以我添加了其他文件夹（这似乎修复了它）不幸的是我认为这可能导致其他问题。

我的问题是，所有这些文件夹对于 Magento 工作来说都是绝对必要的吗？或者在某些情况下您可能会删除除“Eav”文件夹之外的所有这些文件夹/文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:24:42.763

在 CE1.6 中发生了一般性的 ORM 返工。随着 DB 特定助手的引入和 Varien DDL 组件的完成，资源模型通常被移动到所有模块的标准位置。在 Mage_Catalog 的情况下，资源模型从*Mage/Catalog/Resource/Eav/Mysql4/*移动到*Mage/Catalog/Model/Resource/*并且资源模型类组从 更改`catalog_resource_eav_mysql4`为`catalog_resource`。

正如上面评论中提到的，最好将苹果与苹果进行比较，这意味着验证`Mage`类中的版本号并将核心文件与已知良好的副本进行比较。

# javascript - Facebook 喜欢 CSS 样式

> ID：12247126
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:25.890
> 
> 标签：javascript, css, facebook, facebook-fbml

我正在使用 CSS 样式来修复默认 Facebook 粉丝框的样式。

问题是我无法将父帖子内容部分（其中显示“甲状腺颈部肿块的原因”）定位为“clear:both”

我尝试了以下代码：

```
.-cx-PRIVATE-uiImageBlock__content{
    clear: both;
} 
```

但它似乎只在我的电脑上工作，因为类名会根据你所在的电脑而改变？

有没有办法以该 div 为目标，以使所有计算机/浏览器/操作系统都具有相同的“清晰：两者”？

以下是内容 HTML：

```
<div class="clearfix"><a class="external -cx-PRIVATE-uiImageBlock__image -cx-PRIVATE-uiImageBlock__largeImage lfloat" aria-hidden="true" href="http://www.thyroid.com.au/blog/reasons-for-thyroid-neck-lumps/?ref=nf" rel="nofollow" target="_blank" data-ft="{&quot;type&quot;:41,&quot;tn&quot;:&quot;E&quot;}" tabindex="-1" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/www.thyroid.com.au\/blog\/reasons-for-thyroid-neck-lumps\/?ref=nf&quot;);" onclick="LinkshimAsyncLink.referrer_log(this, &quot;http:\/\/www.thyroid.com.au\/blog\/reasons-for-thyroid-neck-lumps\/?ref=nf&quot;, &quot;http:\/\/www.facebook.com\/si\/ajax\/l\/render_linkshim_log\/?u=http\u00253A\u00252F\u00252Fwww.thyroid.com.au\u00252Fblog\u00252Freasons-for-thyroid-neck-lumps\u00252F\u00253Fref\u00253Dnf&amp;h=wAQEaywabAQFjkWBq_12A_eL7rVFG7Tv4gu0VXfElQqzWdA&amp;s=1&quot;);"><img class="img" src="http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=254577506873&amp;v=1&amp;size=z&amp;cksum=6832c1a10fa088b2eb112fe71667be00&amp;src=http%3A%2F%2Fwww.thyroid.com.au%2Fwp-content%2Fuploads%2F2011%2F10%2Fhyperthyroidism.jpg" alt=""></a><div class="-cx-PRIVATE-uiImageBlock__content "><div class="fsm fwn fcg"><div class="uiAttachmentTitle" data-ft="{&quot;type&quot;:11,&quot;tn&quot;:&quot;C&quot;}"><strong><a href="http://www.thyroid.com.au/blog/reasons-for-thyroid-neck-lumps/" target="_blank" onclick="LinkshimAsyncLink.referrer_log(this, &quot;http:\/\/www.thyroid.com.au\/blog\/reasons-for-thyroid-neck-lumps\/&quot;, &quot;http:\/\/www.facebook.com\/si\/ajax\/l\/render_linkshim_log\/?u=http\u00253A\u00252F\u00252Fwww.thyroid.com.au\u00252Fblog\u00252Freasons-for-thyroid-neck-lumps\u00252F&amp;h=aAQHSUMCfAQEtYTi5yinio3ZiIIl7p6PPjwOzidpvNqkbYA&amp;s=1&quot;);" rel="nofollow" onmouseover="LinkshimAsyncLink.swap(this, &quot;http:\/\/www.thyroid.com.au\/blog\/reasons-for-thyroid-neck-lumps\/&quot;);">Reasons for Thyroid Neck Lumps</a></strong> </div><span class="caption" data-ft="{&quot;tn&quot;:&quot;L&quot;}">Thyroid and Parathyroid Gland Surgery Sydney</span><div class="mts uiAttachmentDesc translationEligibleUserAttachmentMessage" data-ft="{&quot;tn&quot;:&quot;M&quot;}">
Reasons for Thyroid Neck Lumps
Many people feel a lump in their neck and they immediately become afraid of the C word that no one ever wants to think about. However, this is not always the cause of a lump in the throat and it will be important to get an ...</div></div></div></div> 
```

发布所有 HTML 太大了，但这是我感兴趣的部分。

![脸书喜欢](../Images/63d6f3af1014d7c4b911d998e700abc7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:43:01.260

如果您想定位所有人`div`而不管他们的名字如何，只需使用它`div{ clear: both }`，并且如果您想定位一个特定的 div 其名称可能会更改，您可以使用它`xpath`来解决该特定的`div`

# .htaccess - 如何使用正则表达式编写重定向

> ID：12247128
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:30.887
> 
> 标签：.htaccess, redirect

我想用 htaccess 重定向所有传入链接

```
/2011/05/16/xps-15z-dell-laesst-sich-vom-apple-macbook-inspirieren/ 
```

到

```
/xps-15z-dell-laesst-sich-vom-apple-macbook-inspirieren/ 
```

正则表达式的外观如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:46:39.217

这应该做的工作

```
RewriteRule ^/[0-9]+/[0-9]+/[0-9]+/(.*)/?$ /$1 
```

甚至这个

```
RewriteRule ^/\d+/\d+/\d+/(.*)/?$ /$1 
```

# wcf - 使用 Web 引用在 WCF 客户端上设置 useDefaultWebProxy=false

> ID：12247129
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:34.337
> 
> 标签：wcf, binding, reference, web-config, wcf-binding

我有一个 Windows 窗体应用程序，其中添加了对 WCF 服务的 Web 引用。我需要在 wcf 客户端上将属性“useDefaultWebProxy”设置为“false”。

如果我添加了“Service-References”，而不是“Web-References”，我可以轻松地修改 app.config 文件：

```
<basicHttpBinding> 
  <binding name="pluto" ... useDefaultWebProxy="false"> 
   <readerQuotas ... /> 
   <security ...> 
    <transport ... /> 
    <message ... /> 
   </security> 
  </binding> 
 </basicHttpBinding> 
```

但是我有网络参考，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:37:06.300

好的，一个解决方案：

```
System.Net.WebRequest.DefaultWebProxy = MyWebClient.Proxy;
MyWebClient.MyFirstCall(username, password); 
```

皮莱吉

# php - 自动从 MySQL 检索数据

> ID：12247134
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:50.703
> 
> 标签：php, jquery, mysql, ajax

我在 PHP 中有 2 个页面（ insert.php ， retrieve.php ）

insert.php ，具有以下内容：

1）表单 2）输入框 3）提交按钮（插入） 4）div（div id='data'）。

检索.php：

具有从 MySQL 数据库（表）中检索/选择行的代码：MySQL."Select * from table"........ while(...) { .. }

我需要 ajax 代码/jQuery ，无论从 retrive.php 中检索（获取）结果并将它们放入 div id='data' 而不刷新页面。也许这必须设置一个 timer=1sec 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:56:30.587

你需要什么：

*   编写 PHP 脚本并确保它工作（没有 JavaScript）
*   测试一下
*   如果成功，那么你需要开始采用这个来“jquery-ajax”

例如，

您的 php 脚本可能与此类似：

```
<?php

//suppose we already connected 

$query = "SELECT * FROM `some_table` WHERE ...";
$result = mysql_query($query);

//Just Ensure that it's not FALSE 
if ( !$result ){
  die('wrong query');
}

while ($row = mysql_fetch_assoc($result)){  
  print $row['column']; /// and so on..
} 
```

好的，假设您已经知道它确实有效。

现在您将实现计时器以在 1 秒 (==1000m) 后检索它并且您必须相应地更改 div 的内容。

```
<script>

  $(function(){
    setTimeout(function(){

     $.post('path_to_your_scr_php.php', { /* Data in JSON format, if needed, use it like: key: val */ }, function(respond){

        $("#id_of_the_div_you_want_to_change").html(respond);
     })

   }, 1000);
  });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:44:19.523

采用`setTimeout(function, millisDelay)`

```
 setTimeout(function()
    {

        $("form").submit(function() {
            jQuery.post({
              type: 'POST',
              url: "retreive.php",
              data: FORM_PARAMETERS_HERE
          });
          return true;
        });
    }, 1000); //1000 milisec = 1 sec 
```

# php - Firefox/Opera 中的 JSON 输出为空，在 Chrome 中正确

> ID：12247135
> 
> 赞同：4
> 
> 时间：2012-09-03T11:40:52.740
> 
> 标签：php, json, response

*注意：我不认为这是 Drupal 问题，所以我将其发布在 SO 上。*

我们创建了一个应该返回 JSON 的 Drupal 模块。例如调用 /foo/json 返回 JSON。在 Chrome 中这一切都很好。但是，Firefox 只显示“null”。

JSON 的内容只是一个 PHP 数组，其中包含一些通过循环填充的信息

```
$someArray = array();
foreach(....) {
   $someArray[] = array("foo" => "bar", ...);
}

echo json_encode($someArray); 
```

到目前为止，我知道

*   这不是编码问题。如果我只从中返回一个元素`$someArray[0]["some_key"]`，Chrome 会显示`"USA"`为*5*，所以我确信没有一个非 ASCII 字符。但是，Firefox 显示的内容长度为*4*。`Content Length`*`null`*
***   做 a`wget`给我所有 JSON 的正确内容。由于我比浏览器更信任 wget，因此我认为这不是 Drupal/.htaccess 问题。*   根据 jsonlint.com，JSON 格式正确，并且由于 PHP 函数进行转换，我认为它的格式确实正确。*   权限（每个人都可以访问页面）或编码（发送 UTF-8）等其他内容不会改变结果。*   这与 jQuery/跨域无关，因为我只想在浏览器中调用 URL 并希望查看 JSON 响应。*   在另一台具有相同（Drupal）设置的机器上，结果是相同的。*   我能够从与 Drupal 设置无关的其他目录返回 JSON。但是因为我只是做 a `json_encode`，所以我绕过了 Drupal 的所有可能输出，并且由于`wget`我的工作，它与 Drupal IMO 无关。**

 ***根据评论更新*

*   内容类型`application/json`具有适当的编码信息。将其更改为 text/html 或其他内容不会改变任何内容。使用这两者`header`以及 Drupal 函数来设置标题。
*   我确信`null`响应是正确的，因为我使用 Firebug 对其进行了检查。
*   `ini_set('default_charset', 'UTF-8');`不会改变任何东西，因为我已经在标题中提交了此信息。

来自带有 Firebug 的 Firefox 的响应标头

```
Cache-Control   no-cache, must-revalidate, post-check=0, pre-check=0
Connection          Keep-Alive
Content-Language    en
Content-Length  4
Content-Type    application/json; charset=utf-8
Date            Mon, 03 Sep 2012 12:16:58 GMT
Etag            "1346674618"
Expires         Sun, 19 Nov 1978 05:00:00 GMT
Keep-Alive          timeout=5, max=100
Last-Modified   Mon, 03 Sep 2012 12:16:58 +0000
Server          Apache/2.2.22 (Ubuntu)
X-Powered-By    PHP/5.3.10-1ubuntu3.2 
```

请求头

```
Accept          text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.7,de;q=0.3
Connection          keep-alive
Cookie          has_js=1; respimg_ratio=1; respimg=1000 //Drupal information
Host            vie.local
User-Agent          Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:15.0) Gecko/20100101 Firefox/15.0 
```

**TL;DR**
虽然 Chrome 显示正确（格式良好）的 JSON 输出，但 Firefox（并且也在 Opera 中测试过）仅显示`null`最简单的字符串，例如`"USA"`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:01:25.727

问题是 Firefox 不知何故没有向服务器发送正确的语言。我不知道是通过 cookie 还是在标题中。由于我对输出使用了语言感知过滤，因此从未返回输出。

所以禁用语言过滤器解决了这个问题。我不知道为什么 Firefox 会出现语言问题，但这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:31:30.723

正如我在评论中所说，您如何将 json 响应发送回浏览器可能存在问题

> 这不是编码问题。如果我只从 $someArray[0]["some_key"] 返回一个元素，Chrome 会显示内容长度为 5 的“USA”，所以我确信没有一个非 ASCII 字符。但是，Firefox 显示 null，内容长度为 4。

null 返回内容长度为 4

美国返回 5 的内容长度？为什么？美国只有 3 个字符

在响应之前或之后检查空白间距

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T14:18:27.287

**将 json 文件发送到 XMLHttpRequest 使用的标头中**

```
$json_string = file_get_contents("path/well_formated.json"); 
```

使用

```
header("header_name: $json_string")); 
```

FF 和

```
header("header_name:". json_encode($json_string)); 
```

所有人都失败了

**php HEREDOC 解决方案**

```
$json_string = file_get_contents("path/well_formated.json");
$h= <<<H
header_name : $json
H;
header($h); 
```

这适用于 Chrome、Opera、Firefox、IE**

# android - 使用 setOnItemSelected 在SharedPreferences 中加载和保存 Spinner 选择

> ID：12247136
> 
> 赞同：1
> 
> 时间：2012-09-03T11:40:56.407
> 
> 标签：android, spinner, sharedpreferences, default-value

我用 OnItemSelectedListener 函数做了一个微调器。我从一个包含 4 个选项的数组中创建它：

```
 String[] arrayOfString = new String[4];
    arrayOfString[0] = "Kiskunfélegyháza HQ [160kbps MP3]";
    arrayOfString[1] = "Kiskunfélegyháza MQ [64kbps AAC]";
    arrayOfString[2] = "Kiskunmajsa HQ [160kbps MP3]";
    arrayOfString[3] = "Kiskunmajsa MQ [64kbps AAC]";
    this.items = arrayOfString; 
```

加载数据中：

```
 PreferenceManager.setDefaultValues(this, 0x7f040000, false);
    final SharedPreferences localSharedPreferences = PreferenceManager.getDefaultSharedPreferences(this);
    this.mWebView_enabled = localSharedPreferences.getBoolean("mWebView_enabled", true);
    this.savszelesseg_port = localSharedPreferences.getString("savszelesseg_mentes", "savszelesseg_port");
    this.savszelesseg_saved = this.savszelesseg_port;

           final Spinner localSpinner = (Spinner)findViewById(R.id.savszelesseg);
    ArrayAdapter localArrayAdapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, this.items);
    localArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    localSpinner.setAdapter(localArrayAdapter); 
```

如果有人选择一个选项，它将被保存到 SharedPreferencies 并更改音乐。但是，当有人退出然后重新打开应用程序时，如何取回数据？

我将它保存为 savszelesseg_mentes，并保存 savszelesseg_port。我还有一个选项菜单来保存此设置。

```
 localSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() 
    {
        public void onItemSelected(AdapterView parentView, View paramView, int paramInt, long paramLong) 
        {
            if (!savszelesseg_port_modositva)
            {
              savszelesseg_port = localSharedPreferences.getString("savszelesseg_mentes", "savszelesseg_port");
              savszelesseg_port_modositva = true;

            }
            savszelesseg_beallitas = items[paramInt];

            if (savszelesseg_beallitas == "Kiskunfélegyháza HQ [160kbps MP3]")
            {
              savszelesseg_port = "8500/relay_911";
              SharedPreferences.Editor editor = localSharedPreferences.edit();
              editor.putString("savszelesseg_mentes", savszelesseg_port);
              editor.commit();
            }
            if (savszelesseg_beallitas == "Kiskunfélegyháza MQ [64kbps AAC]")
            {
              savszelesseg_port = "8500/relay_mobile_911";
              SharedPreferences.Editor editor = localSharedPreferences.edit();
              editor.putString("savszelesseg_mentes", savszelesseg_port);
              editor.commit();
            }
            if (savszelesseg_beallitas == "Kiskunmajsa HQ [160kbps MP3]")
            {
              savszelesseg_port = "8500/relay_882";
              SharedPreferences.Editor editor = localSharedPreferences.edit();
              editor.putString("savszelesseg_mentes", savszelesseg_port);
              editor.commit();
            }
            if (savszelesseg_beallitas == "Kiskunmajsa MQ [64kbps AAC]")
            {
             savszelesseg_port = "8500/relay_mobile_882";
             SharedPreferences.Editor editor = localSharedPreferences.edit();
             editor.putString("savszelesseg_mentes", savszelesseg_port);
             editor.commit(); 
            }

            if (lejatszas == 1 && savszelesseg_port_modositva)
            {

                  stopPlaying();
                  startPlaying();

            }

            if (lejatszas == 0 && savszelesseg_port_modositva == true)
            {
              startPlaying();
            }

        } 
```

如果没有选择：

```
 public void onNothingSelected(AdapterView parentView) 
        {
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:44:37.790

您正在比较字符串而不是引用，所以使用 equals() 方法不要使用 ==

您正在使用

```
if (savszelesseg_beallitas == "Kiskunfélegyháza HQ [160kbps MP3]") 
```

改为使用

```
if (savszelesseg_beallitas.equals("Kiskunfélegyháza HQ [160kbps MP3]")) 
```

或者

if ("Kiskunfélegyháza HQ [160kbps MP3]".equals(savszelesseg_beallitas));

[即使评估为真，](https://stackoverflow.com/questions/12242587/if-statement-wont-execute-even-though-evaluation-is-true/12242598#12242598)请参阅If 语句不会执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:56:41.893

像这样，您应该这样做以获取数据，然后设置正确的选择：

```
int index = 0;
String savedString = localSharedPreferences.getString("savszelesseg_mentes", "");
for(int i = 0; i < arrayOfString.length(); i++){
    if(savedString.equals(arrayOfString[i])){
        index = i;
        break;
    }
}
localSpinner.setSelection(index, true); 
```

# c# - 在 MonoTouch 中绑定 NSArray

> ID：12247138
> 
> 赞同：2
> 
> 时间：2012-09-03T11:41:01.123
> 
> 标签：c#, iphone, objective-c, xcode, xamarin.ios

我在静态库中有方法`-(NSArray*)SetImage:(UIImage *)OcrImage;`。

我必须在 MonoTouch 中将此方法绑定为

`NSArray [] SetImage(UIImage OcrImage);`

当我尝试在 monotouch 类中使用方法时

`NSArray[] wordArray=test.SetImage(this.imgSnapshot.Image);`

但是当我调用该方法时应用程序崩溃了。

崩溃日志

```
 System.InvalidCastException: Cannot cast from source type to destination type.
at (wrapper managed-to-native) object:__icall_wrapper_mono_object_castclass (object,intptr)
at MonoTouch.Foundation.NSArray.ArrayFromHandle[NSArray] (IntPtr handle) [0x0003a] in /Developer/MonoTouch/Source/monotouch/src/shared/Foundation/NSArray.cs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T14:04:38.200

`NSArray`是一个数组，所以你不想（**也不能**）`[]`在你的 C# 声明中添加。

如果您知道数组中返回的*单一*类型（例如 的数组`UIImage`），那么您可以像这样绑定：

```
UIImage [] SetImage(UIImage OcrImage); 
```

否则，您可以采用*一般*方式，例如：

```
NSObject [] SetImage(UIImage OcrImage); 
```

您也可以将其绑定为`NSArray`（不带`[]`），但这很少是最佳选择。

# php - 传递表单值并移动到另一个页面

> ID：12247139
> 
> 赞同：3
> 
> 时间：2012-09-03T11:41:01.053
> 
> 标签：php, javascript, html

我是 web 开发的初学者，用 PHP 和 MySQL 做 HTML。我正在尝试使用表单从用户那里读取数据，然后单击“保存”，我需要将表单值提交到同一个文件并移动到另一个页面。

同一文件中的 PHP 对象使用这些值来调用处理这些值的方法。

不幸的是，提交的值丢失了，似乎无处可去。此外，我不会转到所需的（另一个）页面。

这是我的表格。（当前文件名为“Insert.php”，我只显示一个元素）。

```
<form method="post" action= "Insert.php">
<fieldset>
<legend>Insert New Data </legend>
<p> Service Name : 
<select name="service_name">
<option value=""> </option>

<?php

$result = $db_link->query("SELECT * FROM servicetype_lookup "); 

while($row= $result->fetch_row()) {
$id = $row[0];
$value = $row[1];
echo "<option value='$id'>$value</option>";
}
    ?>
    </select>

.........
......... 
```

在同一个文件“Index.php”中，我将值发送到另一个文件中的函数，该文件包含一个名为“AccountHolder”的类，如下所示：

```
<?php

if(isset ($_POST['service_name'] ) )
{

$account_holder= new AccountHolder; 
$result= $account_holder->insert($_POST['service_name'] , 
                                 $_POST['reference'],
                                 $_POST['title'],
                                 $_POST['risk_rating'],
                                 $_POST['root_cause'],
                                 $_POST['impact'],
                                 $_POST['likelihood'],
                                 $_POST['efforts'],       
                                 $_POST['finding'],
                                 $_POST['implication'],
                                 $_POST['recommendation'] );  

}

?> 
```

最后我有这个提交按钮，它应该移动到另一个名为“Database.php”的页面（这不是包含类 AccountHolder 的页面）：

```
 <br/><input type="submit" value=" Save " onclick="window.location.href='Database.php'" /> 
```

有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:47:14.480

将提交按钮更改为：

```
<input type="submit" value=" Save " /> 
```

单击“保存”时，它会将您带到 Insert.php 将您的东西（插入）那里。

完成插入后，在回显任何内容之前

```
Header( 'Location: Database.php'); 
```

或用户在插入后必须看到的任何其他位置。

您应该更改测试以查看是否已从

```
if(isset ($_POST['service_name'] ) ) { 
```

进入

```
if( ($_SERVER['REQUEST_METHOD'] == 'POST') ) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T08:22:29.670

您可以将数据从一个 php 页面发送到另一个页面

index.php 提交.php

```
$username=$_post['name'];
$Password=$_post['pass']; 
```

在提交.php

```
$x=$username;
$y=$password; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T19:54:00.560

将提交按钮更改为：

```
<input type="submit" value=" Save " name="save" /> 
```

然后在下面的代码中进行如下编辑：

```
if(isset ($_POST['save'] ) )
{

$account_holder= new AccountHolder; 
$result= $account_holder->insert($_POST['service_name'] , 
                             $_POST['reference'],
                             $_POST['title'],
                             $_POST['risk_rating'],
                             $_POST['root_cause'],
                             $_POST['impact'],
                             $_POST['likelihood'],
                             $_POST['efforts'],       
                             $_POST['finding'],
                             $_POST['implication'],
                             $_POST['recommendation'] );  
                             RedirectToURL("DESIRED PAGE");

}

?> 
```

注意**RedirectToURL("table.php");** 在上面的代码中。这是保存值后重定向到新页面的功能。如何创建重定向到 url 功能如下所示：

```
 function RedirectToURL($url)
 {
    header("Location: $url");
    exit;
 } 
```

# objective-c - 详细信息披露按钮未出现在 mapkit 标注上

> ID：12247141
> 
> 赞同：2
> 
> 时间：2012-09-03T11:41:04.670
> 
> 标签：objective-c, ios, mapkit, mkannotation

我不确定为什么细节披露按钮没有出现在 mapkit 标注上。这是我的代码：

我确保包含在 .h 文件中，然后包含以下方法。标注有效并在地图加载后立即出现。我还确保将委托连接到 Xib 文件中。

```
 - (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    MKPinAnnotationView *mapPin = nil;
    if(annotation != map.userLocation) 
    {
        static NSString *defaultPinID = @"defaultPin";
        mapPin = (MKPinAnnotationView *)[map dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if (mapPin == nil )
        {
            mapPin = [[MKPinAnnotationView alloc] initWithAnnotation:annotation 
                                                     reuseIdentifier:defaultPinID];
            mapPin.canShowCallout = YES;

            UIButton *disclosureButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            [disclosureButton addTarget:self action:@selector(clDetails:) forControlEvents:UIControlEventTouchUpInside];

            mapPin.rightCalloutAccessoryView = disclosureButton;

        }
        else
            mapPin.annotation = annotation;

    }
    return mapPin;
}

  - (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    id<MKAnnotation> myAnnotation = [self.mapView.annotations objectAtIndex:0];
    [self.mapView selectAnnotation:myAnnotation animated:YES];
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:49:34.347

我在 viewDidLoad 中有这行代码，它抛出了 MKAnnotation 方法。

```
mapView = [[MKMapView alloc]initWithFrame:self.view.bounds]; 
```

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:35:59.863

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
```

{ // 如果是用户位置，则返回 nil。if ([annotation isKindOfClass:[MKUserLocation class]]) 返回零；

```
// try to dequeue an existing pin view first
static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc]
                                 initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
pinView.animatesDrop = YES;
pinView.canShowCallout = YES;
pinView.draggable = NO;
pinView.annotation = annotation;
pinView.draggable = YES;
pinView.enabled = YES;
pinView.exclusiveTouch = YES;
pinView.highlighted = YES;
pinView.multipleTouchEnabled = YES;
pinView.pinColor = MKPinAnnotationColorPurple;
pinView.userInteractionEnabled = YES;

//button on the right for popup for pins
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:annotation.title forState:UIControlStateNormal];
[rightButton addTarget:self
                action:@selector(showDetails:)
      forControlEvents:UIControlEventTouchUpInside];
pinView.rightCalloutAccessoryView = rightButton;

 //Create and add the right button to the callout
 rightCalloutButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[pinView setRightCalloutAccessoryView:rightButton];

    [self updateAnnotation];

    [self crawlViews];

//zoom button on the left of popup for pins
UIButton* leftButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
[leftButton setTitle:annotation.title forState:UIControlStateNormal];
[leftButton addTarget:self 
               action:@selector(zoomToLocation:) forControlEvents:UIControlEventTouchUpInside];
pinView.leftCalloutAccessoryView = leftButton;

UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
pinView.leftCalloutAccessoryView = profileIconView;
[profileIconView release];

return pinView; 
```

}

# ios - ARC - 如何管理那些需要 unsafe_unretained 的属性？

> ID：12247145
> 
> 赞同：1
> 
> 时间：2012-09-03T11:41:26.307
> 
> 标签：ios, delegates, automatic-ref-counting

我正在使用 ARC，我在我的界面中声明我的 ivar

id itemDelegate; 然后我声明属性：

`@property (nonatomic, weak) id<myAppDelegate> Delegate`;

在我的实现文件中，我简单地将其合成为：

`@synthesize Delegate`;

但是，我收到错误：

“_weak 属性 'itemDelegate' 的现有 ivar 'ItemDelegate' 必须是 _weak”。

任何人都可以提出解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:58:34.090

您可以删除 iVar 声明，因为它会自动创建。

问题是 iVars 的默认所有权限定符是`__strong`. 因此，`id itemDelegate`与 相同`__strong id itemDelegate`。如果您将该属性声明为弱，那么您就会遇到问题。你需要使用`__weak`. （或者`__unsafe_unretained`如果您需要向后兼容 iOS 4。）

# c# - C#将字符串添加到另一个字符串

> ID：12247147
> 
> 赞同：9
> 
> 时间：2012-09-03T11:41:46.000
> 
> 标签：c#

> **可能重复：**
> [使用 C# 的最佳字符串连接方法是什么？](https://stackoverflow.com/questions/21078/whats-the-best-string-concatenation-method-using-c)

我有一个变量：

```
string variable1; 
```

我正在尝试做这样的事情：

```
for (int i = 0; i < 299; i += 2)
        {
            variable1 = variable1 && IntToHex(buffer[i]);
        } 
```

IntToHex 是一个字符串函数，因此“IntToHex(buffer[i])”的结果将是字符串。但是出现了一个错误，说我不能使用 &&。有什么解决方案可以将一个字符串添加到另一个字符串？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T11:43:20.787

只需使用`+`运算符：

```
variable1 = variable1 + IntToHex(buffer[i]); 
```

您还需要初始化`variable1`：

```
string variable1 = string.Empty; 
```

或者

```
string variable1 = null; 
```

但是考虑使用 a[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)代替，因为它更有效：

```
StringBuilder builtString = new StringBuilder();

for (int i = 0; i < 299; i += 2)
{
    builtString.Append(IntToHex(buffer[i]));
}

string variable1 = builtString.ToString(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T11:43:17.760

在 C# 中，只需使用 a`+`来连接字符串：

```
 variable1 = variable1 + IntToHex(buffer[i]); 
```

但更重要的是，这种情况需要一个StringBuilder。

```
 var buffer = new StringBuilder();
    for (int i = 0; i < 299; i += 2)
    {
        buffer.Append( IntToHex(buffer[i]) );
    }

    string variable1 = buffer.ToString(); 
```

对于 100 个或更多的循环，这确实对性能产生了很大影响。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T11:46:08.743

`&&`是[条件与运算符](http://msdn.microsoft.com/en-us/library/2a723cdk.aspx)。

您*可以*将运算符用于字符串连接，但在循环[(details)](http://pobox.com/~skeet/csharp/stringbuilder.html)`+`中使用它不是一个好主意。

要么使用`StringBuilder`：

```
StringBuilder builder = new StringBuilder(299 * 4); // Or whatever
for (int i = 0; i < 299; i += 2)
{
    builder.Append(IntToHex(buffer[i]));
}
string combined = builder.ToString(); 
```

或者可能使用`string.Join`- 考虑到您的循环，在这种情况下它可能不那么实用，但在其他情况下它会很棒。你仍然可以在这里使用它，如下所示：

```
string combined = string.Join("", Enumerable.Range(0, 149)
                                       .Select(i => IntToHex(buffer[i * 2]))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T11:43:10.663

```
variable1 = variable1 + IntToHex(buffer[i]); 
```

但是，这可能更好：

```
var sb = new StringBuilder();
for (int i = 0; i < 299; i += 2)
    {
        sb.Append(IntToHex(buffer[i]));
    }
variable1 = sb.ToString(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-03T11:43:48.110

```
variable1 += IntToHex(buffer[i]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T11:44:42.627

有多种方法可以将字符串添加到字符串中。您可以使用在大多数情况下不推荐的简单 + 函数。string.concat 和 string.format 是添加字符串的首选方法。stringBuilder 类在将大部分字符串添加在一起时也很有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-03T11:45:05.123

您需要`+`在 c# 中用于连接字符串

```
for (int i = 0; i < 299; i += 2)
{
   variable1 = variable1 + IntToHex(buffer[i]);
} 
```

但是 StringBuilder 在这里是一个不错的选择......

```
StringBuilder sb = new StringBuilder("");

for (int i = 0; i < 299; i += 2)
{
   sb= sb.Append(IntToHex(buffer[i]));
} 
```

# android - 缩放后图像质量下降

> ID：12247150
> 
> 赞同：1
> 
> 时间：2012-09-03T11:41:52.817
> 
> 标签：android, bitmap, scaling

我有一个位图图像，我一次又一次地缩小它。但是出现的问题是图像质量随着我的缩小而下降。我应该怎么做才能保持图像质量不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:47:46.780

如果您需要缩放图像以将其保存在某处，则只需缩放一次。

如果要显示缩放图像，请使用矩阵 instread。例如`ImageView`类有一个名为的方法`setImageMatrix()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:54:39.210

它看起来像一个累积问题:)

1）从原始（最大）图像缩放。2）我对 Bitmap.scalledBitmat 使用的算法不满意，但它很快，我认为它返回靠近位置的第一个离散像素。

因此，如果您可以提高质量，您将需要手动调整大小。

例如，您有一个包含 3\. 点的数组，您需要重新调整为包含 2\. 点的数组。

拳点计算为dest[0] = (1*src[0]+0.5*src[1])/1.5。

这是一维的。你需要制作二维算法。

# macos - 通过命令行登录 OSX

> ID：12247151
> 
> 赞同：4
> 
> 时间：2012-09-03T11:41:57.727
> 
> 标签：macos, bash, authentication, unix

我希望能够通过命令行对[登录窗口进行身份验证。](http://4sysops.com/wp-content/uploads/2011/11/Network-accounts-are-unavailable-error-in-Mac-OS-X-Lion_thumb.png)我不知道这是否可能，但如果是的话，我真的很想知道它是如何完成的。

我已经计算出该过程称为“登录窗口”，但我无法弄清楚如何向它传递任何参数。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:51:41.683

像这样的东西怎么样：

```
#!bin/sh
cat >/tmp/Login_Automatically.sh <<-"EOF"
if [[ "$(who | grep console)" == "" ]]; then # Runs ONLY if no one is logged in
osascript <<EOT
set username_ to "username"
set password_ to "password"
tell application "System Events" 
```

（通过[http://hints.macworld.com/article.php?story=2010021119293586](http://hints.macworld.com/article.php?story=2010021119293586)）

另外，如果您想要绕过登录的方法，您不能在系统偏好设置中一起禁用身份验证吗？

或者如果你想杀死它，请阅读： [Kill "loginwindow" process using command line in Mac OS X](https://stackoverflow.com/questions/10620606/kill-loginwindow-process-using-command-line-in-mac-os-x)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:23:27.587

解决方案在[本文](http://hints.macworld.com/article.php?story=2010021119293586)的评论中。

复制并粘贴到命令行/ARD：

```
osascript -e 'tell application "System Events" to keystroke "usernamegoeshere"'; \
osascript -e 'tell application "System Events" to keystroke tab'; \
osascript -e 'tell application "System Events" to keystroke "passwordgoeshere"'; \
osascript -e 'tell application "System Events" to keystroke return' 
```

感谢 Sam Mirrado 提供文章链接。

[来源](http://hints.macworld.com/article.php?story=2010021119293586)。由 engelby 于 2010 年 2 月 16 日下午 2:09:32 发表评论。

# android - 在 Android（在 JB 上）中，如何向自定义富通知添加操作？

> ID：12247153
> 
> 赞同：5
> 
> 时间：2012-09-03T11:42:04.460
> 
> 标签：android, notifications, android-4.2-jelly-bean

我一直在玩 Jelly Bean 中新的丰富通知，当我使用模板`Notification.BigPictureStyle`、`Notification.BigTextStyle`或`Notification.InboxStyle`. 我可以使用该`Notification.Builder.addAction()`方法，并且操作按钮显示在扩展通知的底部。但是当我尝试使用[Notification.bigContentView](http://developer.android.com/reference/android/app/Notification.html#bigContentView)创建一个cutsom 通知时，操作按钮永远不会出现。

只是为了澄清一下，如果我从不设置`bigContentView`，按钮会出现。但是一旦该字段设置为自定义 RemoteViews 对象，按钮就消失了。

有没有人知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:58:37.513

各种`Big...Style`建设者创建自己的`bigContentView`. 如果您想要自己`bigContentView`的按钮，则必须自己添加按钮，也许通过检查[这些构建器的源代码](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/app/Notification.java)并查看他们是如何做到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T21:35:56.973

当您添加自定义 bigContentView 时，它将替换由 Notification.BigPictureStyle、Notification.BigTextStyle 或 Notification.InboxStyle 创建的 contentview。正如 commonsware 指出的那样，您需要自己添加按钮，那就是通过使用按钮创建自己的自定义[remoteView](http://developer.android.com/reference/android/widget/RemoteViews.html)，然后将其添加为 contentView。

[您可以在此处](http://feras.us/blog/custom-rich-notification-view-android/)找到有关如何执行此操作的教程。

# c++ - 按值传递给虚方法

> ID：12247161
> 
> 赞同：3
> 
> 时间：2012-09-03T11:42:54.913
> 
> 标签：c++, inheritance

我有一个关于按值传递对象构造和虚拟方法的问题。

我有一个这样的虚拟方法：

```
typedef boost::function1<void, void*> Task

class ITaskPool
{
    //......

    virtual AddTask(Task task) = 0;
}; 
```

然后像这样的实现

```
class TaskPool : public ITaskPool
{
    //......

    AddTask(Task task);
}; 
```

如果我这样使用它；

```
void MyFunc(void* arg)
{

}

int main()
{
    TaskPool tp;
    tp.AddTask(&MyFunc); 
} 
```

一个Task对象会被创建两次，一次是传递给虚方法，另一次是传递给派生类的方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:44:59.327

只会创建一个副本。当您声明一个虚拟函数时，该派生类的方法通过动态绑定调用。不是第一个方法 A 被调用然后方法 B 被调用的情况。编译器在运行时决定调用哪个方法。

[多态性和动态绑定](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:44:08.040

您的代码错误（缺少返回类型），但不，只涉及一份副本。我认为你对多态性有错误的想法。这不像是先调用基类方法，然后再转发给派生类。`TaskPool::AddTask`通过动态调度直接调用（如果它被多态调用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:46:04.840

这里只有一种方法：您`virtual`在基类中声明的方法。您在派生类中提供的是该方法的实现。因此，只会调用一种方法。作为一种虚拟方法，它的实现通常会在运行时被选择，但只会调用一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:47:21.757

只会创建一个副本...

# php - 饼干的解剖

> ID：12247162
> 
> 赞同：2
> 
> 时间：2012-09-03T11:42:55.760
> 
> 标签：php, security, cookies, yii

我是 cookie 的新手。试图了解用户登录时我的网站设置的这个 cookie 的结构。我正在使用 Yii 在 PHP 中构建，我还在 config 中启用了 cookie 验证。只是想确保它是否正常工作（`HMAC`设置了令牌）以及我是否对任何漏洞持开放态度。

> dd3b7ffe10018a899b39986a9d94dfd3b64e7e4as:248:"05035a5ae619356a622ed6ed805b6695a4fd6c44a:4:{i:0;s:18:"mjkvj003@gmail.com";i:1;s:18:"mjkvj0;"mjkvj0:6:"mjkvj0; i:3;a:4:{s:6:"userid";s:2:"10";s:8:"用户名";s:18:"mjkvj003@gmail.com";s:4:"类型";s:10:"诊断";s:6:"状态";s:7:"待定";}}";

cookie 名称本身是一个随机的 32 个字符的字母数字序列。我还有一个单独存储会话 id 的 phpsession cookie。这里`mjkvj003@gmail.com`的用户名、类型和状态都是应用相关的变量。我认为 cookie 用于`=`分配值，但在这里我看到`:`正在使用。它是否正确 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:48:36.917

这不是 cookie 的内容。它是 PHP 内容的序列化表示[`$_SESSION`](http://php.net/manual/en/reserved.variables.session.php)，它是通过调用[`serialize`](http://php.net/manual/en/function.serialize.php)该数组生成的。

cookie 本身只包含会话 id，它让 PHP 知道哪些序列化的会话数据可用于您的脚本`unserialize`并使其可用。`$_SESSION`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:31:21.133

第一行是 Yii 设置的 HMAC 令牌。翻遍框架文件，发现他们设置了令牌，还序列化了 cookie 数据。

# c# - 如何使用正则表达式在动态字符串中查找值？

> ID：12247164
> 
> 赞同：2
> 
> 时间：2012-09-03T11:43:09.230
> 
> 标签：c#, asp.net, regex

这是一个可以动态构建的字符串示例。

```
{Static String} <a href="{Dynamic Value}"><b>{Dynamic Value 2}</b></a>

example of static text <a href="http://www.exampleurl.com">example value</a> 
```

如何在 C# 中使用 Regex 查找 {Dynamic Value 2} 或示例值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:52:18.340

你会使用这样的东西：

```
using System.Text.RegularExpressions;

private string ExtractString(string sourceString)
{
    // (?<=string) is positive look-behind where you search for string before the match.
    // .* is all characters in between.
    // (?=string) is positive look-ahead where you search for string after the match.
    string pattern = "(?<=<a.*?>).*(?=</a)";
    Match match = Regex.Match(sourceString, pattern);
    return match.Value;
} 
```

当然，您应该实现某种异常处理机制。

请注意，这将返回

```
<b>{Dynamic Value 2}</b> 
```

如果解析

```
<a href="{Dynamic Value}"><b>{Dynamic Value 2}</b></a> 
```

如果需要，您可以使用其他正则表达式模式进一步处理字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:57:14.580

试试这个，你会得到你想要的结果。

```
string Actualstring = "{static string}<a href='{Dynamic Value}'><b>{Dynamic Value 2}</b></a>"  string prevSplitBy = {static string};string desiredstring="";
     string FirstSplitBy = "<b>";
                    string SecondSplitBy = "</b>";
                    Regex regexprevSplit = new Regex(prevSplitBy );Regex regexFirstSplit = new Regex(FirstSplitBy);
                    Regex regexSecondSplit = new Regex(SecondSplitBy);
                  string[] StringprevSplit = regexprevSplit.Split(Actualstring );string[] StringFirstSplit = regexFirstSplit.Split(StringprevSplit[1] );
                    string[] StringSecondSplit = regexSecondSplit.Split(StringFirstSplit[1]); if(StringSecondSplit!=null){ for(int i=0 ; i <StringSecondSplit.count-1;i++)desiredstring=desiredstring+StringSecondSplit[i] } 
```

`desiredstring`会有你想要的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:03:09.560

## 选项 1：原始解析。不建议。

```
{Static String} <a href="{Dynamic Value}"><b>{Dynamic Value 2}</b></a> 
```

用类似的东西很好地解析

```
Regex parser = new Regex(
 @"*?\<a href\=\""(?<value1>[^\""]*)\""\>\<b\>(?<value2>[^\<]*)\<\/b\>\<\/a\>"); 
```

* * *

## 选项 2：XML 解析。推荐的。

```
XElement el = XElement.Parse("<a>your long html string to parse</a>").Element("a");
string v1 = el.Attribute("href").Value;
string v2 = el.Element("b").Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:05:19.200

stackoverflow 上的人们似乎建议使用[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)来解析 html 并从中提取值。它比使用正则表达式更容错。如果使用正则表达式，如果您搜索的字符串中有任何更改，则必须更改正则表达式。

# seo - 网上商店的多个域

> ID：12247172
> 
> 赞同：-1
> 
> 时间：2012-09-03T11:43:28.947
> 
> 标签：seo, e-commerce, ranking, multiple-domains, webshop

我希望为我的网上商店使用多个域，我想知道它将如何影响 SEO 和搜索引擎排名。

目前我有一个网店的通用名称，我们称之为 www.mysmallshop.com。我卖很多不同的东西。我最近获得了一个名为 www.clothing.com 的新域。

现在，如果我的网上商店有这些类别；鞋子、衣服、配饰、夹克和我更改了我的网上商店，以便衣服类别下的所有产品都有 URL www.clothing.com/productname 而不是 www.mysmallshop.com/clothing/productname，这会破坏任何 SEO 和搜索引擎排名？以这种方式使用域是一个好主意，还是我最好做所有其他 SEO 鲨鱼所做的事情并“制作一个假博客”并链接回我原来的商店？有什么想法或意见吗？

内容重复不是问题，将使用规范 URL 或纯重定向来确保 URL 一致。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:49:20.923

好吧，我会...告诉引擎您的“不那么通用”的网店名称已被永久移动（并且不会降低/影响 SEO 分数）

通过 mod_rewrite （如果涉及 apache）通过这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.?)slave-webshop.com$
RewriteRule ^(.*)$ http://www.mainwebshop.com/$1 [R=301,L] 
```

# html - DIV 在 Firefox 中不工作，但在 IE8 中工作

> ID：12247177
> 
> 赞同：1
> 
> 时间：2012-09-03T11:43:43.003
> 
> 标签：html, extjs

我正在使用 Ext JS 在 itemselector DIV 中呈现 itemselector，在 editor-grid DIV 中呈现面板，在 editor-grid1 DIV 中呈现表单。我想做的是，最初 editor-grid1 是可见的，当用户在 editor-grid1 中提交表单时，面板是可见的，当用户单击面板的结果时，项目选择器是可见的。它在 IE8 中很完美，但即使在提交表单后，编辑器网格/面板 DIV 和项目选择器 DIV 在 Firefox 中也不可见。

这是我的html

```
<body>
<div id="loading-mask"></div>
<div id="loading">
  <div class="loading-indicator">
   <table></table>
  </div>
</div>
<div id="editor-grid1" align="center"></div>
<div id="editor-grid" style="LEFT: 17px; top: 135px; POSITION: absolute;"></div>
 <div id="itemselector" class="demo-ct" style="LEFT: 472px; top: 135px; POSITION:absolute; display:'none';"></div>
</body> 
```

# android - 安卓可以用red5代替FFmpeg吗？

> ID：12247181
> 
> 赞同：4
> 
> 时间：2012-09-03T11:43:45.490
> 
> 标签：android, ffmpeg, red5

我可以使用**red5**作为我的原生库而不是**FFmpeg** for Android 吗？有人告诉我 FFmpeg 位于 red5 中。我看不到 red5 的文档，因为 red5 服务器已关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:43:58.457

不，您无法比较这些工具。Red5 仅用于流媒体（MP4、MP3、FLV）和使用 RTMP 协议传送媒体。如果您正在寻找适用于 Android 的 RTMP 客户端，那么也许 Red5 可以提供一些东西。但 FFMPEG 专注于将流从一种格式转码/转换为另一种格式。这些工具唯一的共同点是，在最新版本的 FFMPEG 中，它们增加了对 RTMP 流的支持。但就是这样。Xuggler 是（或现在仍然是）一个将 FFMPEG 与 Red5 集成的项目。但我认为他们删除了 Red5，因为 FFMPEG 具有 RTMP 流媒体功能。

# javascript - jQuery 选择器，DIV 中的所有 Span

> ID：12247184
> 
> 赞同：3
> 
> 时间：2012-09-03T11:43:52.800
> 
> 标签：javascript, jquery, jquery-selectors

```
 $("#" + mainContent).children("span").replaceWith(function(){ return $(this).text(); }); 
```

使用上面的代码行，我似乎无法用文本值替换所有跨度。

html看起来像

```
<div id="bla" contenteditable="true">
<span> bla finds this one</span>
    <div>
        <span> doesnt find me </span>
    </div>
</div> 
```

如何选择 div "bla" 中的所有跨度并将它们全部替换？

替换工作只是查找没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T11:46:26.170

使用[`.find` *^([文档])*](http://api.jquery.com/find/)而不是`.children`. 它寻找所有的后代，而不仅仅是孩子。

查看所有不同遍历方法的 jQuery API：http: [//api.jquery.com/category/traversing/tree-traversal/](http://api.jquery.com/category/traversing/tree-traversal/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T11:47:01.347

你可以试试：

```
$('span',"#" + mainContent).each(function(){this.html('Something Different')}) 
```

也取决于您尝试用什么替换它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T11:51:33.923

jQuery的`children()`函数只匹配直接子级。对于您的 DOM 结构，只有一个`<span>`元素是`<div>`您的选择器匹配的直接子元素。如果您要查找与选择器匹配的元素层次结构下的所有元素，则需要使用`find()`which 执行向下搜索，或者您必须修改选择器：

`$('div span')`将 div 下的所有跨度与 DOM 层次结构中的所有跨度匹配。

`$('div > span'`) 匹配 DOM 中 div 的所有直接跨度子项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:49:24.080

使用 .find() 而不是 .children() ：

```
$("#" + mainContent).find("span").replaceWith(function(){ return $(this).text(); }); 
```

# javascript - 查找最低设置位

> ID：12247186
> 
> 赞同：7
> 
> 时间：2012-09-03T11:44:01.567
> 
> 标签：javascript, bit-manipulation

我有 5 位数字，例如

```
10000
01000
00100 
```

如果我的计算中只有一位，我没有问题。

但是如果有 2 个位，那么我只想选择第一个位，例如

```
10010 
```

我想把它当作 2 而不是数字 18

在这种情况下我可以使用任何按位运算吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-03T15:54:17.380

由于您只想隔离它，而不是获取它的索引，因此很容易：

```
function firstSetBit(number)
{
    return number & -number;
} 
```

它之所以起作用，是因为 的二进制表示`-number`，称为“二进制补码”。

举个更好的例子，假设数字是 888，它是`0000001101111000`二进制的。前导零构成一个 16 位数字，但这适用于任何整数大小。

为了获得一个数字的二进制补码，我们首先对其进行补码，将所有 1 设置为 0，将 0 设置为 1。

```
 number: 0000001101111000
      complement: 1111110010000111 
```

然后我们给它加1。

```
 number: 0000001101111000
      complement: 1111110010000111
           add 1: 1111110010001000 
```

请注意，如果最右边的位是 1，这将创建一个进位，它将所有 1 翻转为 0，直到达到 0。

这个数字现在实际上也是 的二进制表示`-number`。

```
 number: 0000001101111000
      complement: 1111110010000111
           add 1: 1111110010001000
         -number: 1111110010001000 
```

我们现在取 and 的按位`number`& `-number`。

```
 number: 0000001101111000
         -number: 1111110010001000
number & -number: 0000000000001000 
```

目标位的右侧，`number`前提是全为 0。`-number`也是全 0，因为它们在 +1 期间被翻转。0 和 0 的按位与生成 0。

在目标位，`number`有一个 1，也是前提。`-number`也有一个 1，因为取反将其变为 0 并进位将其放回 1。1 和 1 的按位与产生 1。

在目标位的左侧，`number`并且`-number`总是形成 0 和 1 对，因为它不受二进制补码过程的 +1 步骤的干扰。1 和 0 的按位与产生 0。

因此，我们已经证明`number & -number`产生数字的最低 1 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-13T06:28:21.183

返回 log2(n & -n) + 1;

这可能会对您有所帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-03T11:58:12.830

二元运算符通常影响数字的所有位。因此，没有特殊功能可以仅获取数字中的第一个“1”。但是你可以试试这样的功能：

```
function filterFirstFoundBit(number)
{
    for (var i = 0; i < 32; i++) {
        if ((1 << i) & number)
        {
            return 1 << i;
        }
    }
    return number;
}
document.write(filterFirstFoundBit(9)); //10010​​​​​​​​ 
```

[在这里](http://jsfiddle.net/kpRZ6/)试试

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-03T12:13:38.063

```
function isolateLowestBit(input)
{
  mask = 1;
  while (mask <= input)
  {
    if (mask & input)
    {
      // found match - mask is set to the value of the lowest bit
      return mask;
    }

    mask *= 2;  // shift up mask by one bit
  }

  // no match
  return 0;
} 
```

请注意，Javascript 中的按位运算不是一个好主意，因为 Javascript 数字不是自然整数。

# ruby-on-rails - 如何在rails中从子范围中找到父级？

> ID：12247188
> 
> 赞同：1
> 
> 时间：2012-09-03T11:44:05.220
> 
> 标签：ruby-on-rails, activerecord

不完全确定如何正确表达我的需要。代码更好地反映了它：

```
class Product < ActiveRecord::Base
  def self.know_your_parent
    p ? # <------- is it possible to get order.id here?
  end
end

class Order < ActiveRecord::Base
  has_many :products
end

(order=Account.new).assign_attributes({id: 4}, without_protection: true)
order.products.know_your_parent # => "4" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:02:49.220

在您的示例`order.products.know_your_parent`中，在数组上调用了 know_your_parent 函数因此，如果您可以扩展添加该函数的数组，则应该可以做到。但我不确定是否建议以这种方式扩展和使用它。

# hibernate - 在 Freemarker 逆向工程模板中向 getter-annotations 添加属性？

> ID：12247192
> 
> 赞同：2
> 
> 时间：2012-09-03T11:44:23.377
> 
> 标签：hibernate, reverse-engineering, freemarker, hibernate-tools

我正在尝试实现一个 FreeMarker 自定义逆向工程模板，该模板会自动创建我的 Hibernate 类。
在构建过程中，模板被 hibernate-tools 用来生成休眠类。
到目前为止，我为此目的使用了默认的 freemarker 模板，并且效果很好。

但是现在我面临一个问题：
**如何向默认的 getter-annotations 添加其他属性**？

One-to-may 关联的默认 freemarker 方法是（在 Ejb3PropertyGetAnnotation.ftl 中实现）：

```
...
<#elseif c2h.isCollection(property)>
    ${pojo.generateCollectionAnnotation(property, cfg)}
... 
```

生成的java代码例如：

```
@OneToMany(fetch=FetchType.LAZY, mappedBy="person")      
public Set<ContactInformation> getContactInformations() {
    return this.contactInformations;
} 
```

但我想将**cascade = CascadeType.ALL**添加到每个一对多的 g​​etter 注释中，如下所示：

```
@OneToMany(cascade = CascadeType.ALL
           fetch=FetchType.LAZY, mappedBy="person") 
```

我是 freemarker 和 hibernate 的新手，不知道如何存档。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-07T10:17:00.773

答案更简单：只需将**${property.setCascade("ALL")}**放在**generateCollectionAnnotation**方法调用之前。

```
<#elseif c2h.isCollection(property)>
${property.setCascade("ALL")}
${pojo.generateCollectionAnnotation(property, cfg)} 
```

结果也更好，因为它使用了 javax.persistence.CascadeType 枚举。

```
@OneToMany(cascade = CascadeType.ALL, fetch=FetchType.LAZY, mappedBy="person")
public Set<ContactInformation> getContactInformations() { 
```

可以使用的级联类型列表：

```
${property.setCascade("persist, merge, delete, refresh")} 
```

结果：

```
@OneToMany(cascade = { CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REMOVE, CascadeType.REFRESH }, fetch=FetchType.LAZY, mappedBy="person") 
public Set<ContactInformation> getContactInformations() { 
```

此解决方案还为 ManyToMany 关系生成级联类型。如果你不喜欢这种行为，你需要控制它。可以生成 @OneToMany orphanRemoval 属性，但不在问题范围内。

亲切的问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:27:28.687

我发现，注释

```
cascade = CascadeType.All 
```

不一定必须在@OneToMany 方法的签名中。

解决方案是在 Freemarker 模板文件 Ejb3PropertyGetAnnotation.ftl 中添加以下行：

```
 @${pojo.importType("org.hibernate.annotations.Cascade")}(value=${pojo.importType("org.hibernate.annotations.CascadeType")}.ALL) 
```

总而言之，@OneToMany 的方法模板看起来像这样

```
<#elseif c2h.isCollection(property)>
   ${pojo.generateCollectionAnnotation(property, cfg)}
   @${pojo.importType("org.hibernate.annotations.Cascade")}(value=${pojo.importType("org.hibernate.annotations.CascadeType")}.ALL)                    
<#else> 
```

结果将是fi：

```
 @OneToMany(fetch=FetchType.LAZY, mappedBy="person")
  @Cascade(value=CascadeType.ALL)                    
  public Set<ContactInformation> getContactInformations() {
       return this.contactInformations;
  } 
```

# c# - 在 Enyim.Caching（版本 2.11.0.0）上使用过期时无法获得结果

> ID：12247213
> 
> 赞同：1
> 
> 时间：2012-09-03T11:45:17.870
> 
> 标签：c#, .net, caching, memcached, enyim

```
var config = new MemcachedClientConfiguration();
config.Protocol = MemcachedProtocol.Binary;
config.AddServer(server[0],int.Parse(server[1]));

var mc = new MemcachedClient(config);

var finish = mc.Store(StoreMode.Set, key, value,TimeSpan.FromSeconds((double)60000));
if(finish)
{
var obj=mc.Get(key);
Debug.Assert(obj==null,"obj is null.")
} 
```

结果（obj）总是返回null，为什么？

如果 expire 设置为 TimeSpan.MaxValue 就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:04:18.620

代码看起来不错。我已经为此进行了测试，它通过了

```
 [Test]
     public void Should_get_object()
     {
        const string key = "1";
        const string value = "6";
        var mc = new MemcachedClient();

        var finish = mc.Store(Enyim.Caching.Memcached.StoreMode.Set, 
                              key, value, TimeSpan.FromSeconds((double)60000));

         if(finish)
         {
            var obj=mc.Get(key);
            Assert.That(obj!=null,"obj is null.");
         }
    } 
```

因此我怀疑配置，这是我用来比较的配置

```
<enyim.com>
    <memcached>
      <servers>
        <add address="127.0.0.1" port="11211"/>
      </servers>
      <socketPool minPoolSize="10" maxPoolSize="100" 
                  connectionTimeout="00:00:10" deadTimeout="00:02:00"/>
    </memcached>
  </enyim.com> 
```

# c#-4.0 - 在 C# 中将省略号和组合框添加到 datagridview 列

> ID：12247228
> 
> 赞同：1
> 
> 时间：2012-09-03T11:46:07.953
> 
> 标签：c#-4.0

我有一个具有 1 行和 1 列的数据网格视图。

我想将一个省略号添加到一个单元格并将组合框添加到同一列的另一个单元格。

此外，我还有一些事件要在单击省略号时触发。

请帮我。

谢谢，斯瓦纳

# objective-c - sqlite 阅读问题

> ID：12247232
> 
> 赞同：1
> 
> 时间：2012-09-03T11:46:14.787
> 
> 标签：objective-c, xcode4.3

我有一个 favDatabase 从我的数据库中读取数据：

。H

```
@interface favDatabase : NSObject {

UIWindow *window;
UINavigationController *navigationController;

NSString *databaseName;
NSString *databasePath;

NSMutableArray *idSPBData;
} 
```

.m

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {
    // Setup some globals
    databaseName = @"usualBike.sql";

    // Get the path to the documents directory and append the databaseName
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];

    // Execute the "checkAndCreateDatabase" function
    [self checkAndCreateDatabase];

    // Query the database for all favorites
    [self getFavorites];

    // Configure and show the window
    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
} 
```

现在在我最喜欢的视图中，我尝试读取数据：

```
favDatabase *fav = (favDatabase *)[UIApplication sharedApplication];

return fav.idSPBData.count; 
```

但是，它崩溃了：

```
 2012-09-03 13:44:13.692 usualBike[1857:11603] -[UIApplication idSPBData]: unrecognized selector sent to instance 0x6e2f5a0
 2012-09-03 13:44:13.693 usualBike[1857:11603] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIApplication idSPBData]: unrecognized selector sent to instance 0x6e2f5a0' 
```

我正在使用 Xcode 4.3，这是发布问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:49:51.840

在委托类中保留一个保存数据库的属性变量，然后调用：

```
favDatabase *fav = (favDatabase *)((AppDelegate*)[UIApplication sharedApplication].myFavDatabase); 
```

假设`AppDelegate`是您的主要代表。

另一种方法是使您的数据库实例成为单例：

```
+(favDatabase *)sharedManager{
    static dispatch_once_t pred;
    static favDatabase *shared = nil;

    dispatch_once(&pred, ^{
        shared = [[favDatabase alloc] init];
    });
    return shared;
} 
```

使用：

```
@interface favDatabase : UIResponder <UIApplicationDelegate>

@property (nonatomic) favDatabase  *myFavDatabase; 
```

# javascript - 在使用 javascript 的输入字段上只接受 20 的倍数（例如 40、60、80）？

> ID：12247233
> 
> 赞同：1
> 
> 时间：2012-09-03T11:46:14.360
> 
> 标签：javascript, forms, validation

我是 javascript 的新手。我需要使用 javascript 进行表单验证的认真帮助。这是我需要脚本执行的内容。

当用户填写表格并输入除 20 的倍数以外的数字（如 40、60、80、100）时，他应该收到警报。

示例：如果我在输入字段中输入 45，我会收到类似“您输入的金额无效”的错误。

{别的}

邮寄表格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:49:04.157

尝试使用`%`（模数）运算符

```
if ((+([value of inputfield])||1)%20 === 0) { /* is multiple of 20 */ }
//   ^convert to Number      ^
//                           ^if conversion fails, use 1 for value
//                            (so %-operation will not fail) 
```

有关简单示例，请参[见此 jsfiddle](http://jsfiddle.net/KooiInc/bXtMZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:01:05.157

在 jQuery 中

```
if($('#input_id').val() % 20 != 0)
{
    $('#input_id').val('');
    alert('You have entered an invalid amount.');
} 
else 
{ 
    //success
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:55:47.433

@Kooilnc 是正确的，但这里有一个更完整的解决方案：http: [//jsfiddle.net/nottrobin/vN3xK/](http://jsfiddle.net/nottrobin/vN3xK/)

```
<form name="numberForm">
    <input type="number" name="number" />
    <button type="submit">submit</button>
</form>
<script>
    // NB: jQuery is required
    jQuery('[name="numberForm"]').bind(
        'submit',
        function(evt) {
            if(jQuery('[name="number"]').val() % 20 != 0) {
                alert('Your number is wrong');
                evt.preventDefault();
            }
        }
    );
</script> 
```

我可以建议你使用`%`而不是正则表达式吗，因为它更整洁。

# regex - 将文本文件存储在结构化数组中

> ID：12247235
> 
> 赞同：3
> 
> 时间：2012-09-03T11:46:15.247
> 
> 标签：regex, matlab, io

我有一个结构良好的输入文本文件：

```
START_PARAMETERS
C:\Users\admin\Desktop\Bladed_wind_generator\_wind
C:\Users\admin\Desktop\Bladed_wind_generator\reference_v_4_2.$PJ
END_PARAMETERS
---------------------------------------------------------------------------
START_DLC1-2
4 6 8 10 12 14 16 18 20 22 24 26 28 29
6
8192
600
END_DLC1-2
---------------------------------------------------------------------------
START_DLC6-1
44.8
30
8192
600
END_DLC6-1
---------------------------------------------------------------------------
START_DLC6-4
3 31 33 35
6
8192
600
END_DLC6-4
---------------------------------------------------------------------------
START_DLC7-2
2 4 6 8 10 12 14 16 18 20 22 24 
6
8192
600
END_DLC7-2
--------------------------------------------------------------------------- 
```

目前我是这样读的：

```
clc,clear all,close all

f = fopen('inp.txt','rt');  % Read Input File
C = textscan(f, '%s', 'Delimiter', '\r\n');
C = C{1}; % Store Input File in a Cell
fclose(f); 
```

然后，通过正则表达式，我读取了 (START_DLC/END_DLC) 块的每次出现：

```
startIndx = regexp(C,'START_DLC','match');
endIndx = regexp(C,'END_DLC','match'); 
```

目的是将每个 START_DLC/END_DLC 块之间的文本内容存储在结构化单元格中（应该称为 store_DLCs）。结果必须是（例如 DLC1-2）：

```
DLC1-2
4 6 8 10 12 14 16 18 20 22 24 26 28 29
6
8192
600 
```

以此类推，直到 DLC7-2。

你介意给我一些提示吗？

我提前感谢大家。

BR，弗朗西斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:07:47.053

到目前为止，您的代码还可以。不过有一件事，我会稍微改变你对`startIndx`和`endIndx`以下的计算：

```
startIndx = find(~cellfun(@isempty, regexp(C, 'START_DLC', 'match')));
endIndx = find(~cellfun(@isempty, regexp(C, 'END_DLC', 'match'))); 
```

这样您就可以得到*实际*的索引（为了方便起见，我在此处对它们进行了调换），如下所示：

```
startIndx =

     6    13    20    27

endIndx =

    11    18    25    32 
```

我还要添加一个断言来检查输入的完整性：

```
assert(all(size(startIndx) == size(endIndx))) 
```

现在，按照上面计算的所有索引，您可以继续将数据提取到单元格中：

```
extract_dlc = @(n)({C{startIndx(n):endIndx(n) - 1}});
store_DLCs = arrayfun(extract_dlc, 1:numel(startIndx), 'UniformOutput', false) 
```

并且要“修复”每个单元格的名称（它们是第一个条目），您可以执行以下操作：

```
fix_dlc_name = @(x){strrep(x{1}, 'START_', ''), x{2:end}};
store_DLCs = cellfun(fix_dlc_name, store_DLCs,  'UniformOutput', false); 
```

此代码应用于您的示例输入将产生一个 1×4 单元格数组：

```
store_DLCs =

    {'DLC1-2', '4 6 8 10 12 14 16 18 20 22 24 26 28 29', '6', '8192', '600'}  
    {'DLC6-1', '44.8', '30', '8192', '600'}   
    {'DLC6-4', '3 31 33 35', '6', '8192', '600'}   
    {'DLC7-2', '2 4 6 8 10 12 14 16 18 20 22 24', '6', '8192', '600'} 
```

# android - 编辑文本未显示类型字符

> ID：12247242
> 
> 赞同：5
> 
> 时间：2012-09-03T11:46:39.933
> 
> 标签：android, android-edittext

在一个片段上，我有类似的布局

问题.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/question"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="44dp"
    android:layout_marginTop="47dp"
    android:text="TextView" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/question"
    android:layout_marginLeft="85dp"
    android:layout_toRightOf="@+id/question"
    android:text="CheckBox" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/question"
    android:layout_marginTop="23dp"
    android:ems="10"
    android:inputType="text" />

</RelativeLayout> 
```

我有这样的界面

![在此处输入图像描述](../Images/fa27d7980414f049eb4287ebed7e6af7.png)

但问题是当我专注于`EditText`并尝试在其中写一些东西时，什么都没有发生。没有文字，没有键盘显示。如果我单击并按住`EditText`它，它会显示没有可粘贴的消息。为什么文本没有在编辑文本中输入？

这是我的代码

```
public class ListFrag extends ListFragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {  
        super.onActivityCreated(savedInstanceState);       
        setListAdapter(new ListFragAdapter(
            new MyListData("Software Engineer", "Basit", "4 years"),
            new MyListData("Lt. Commander", "Kashif", "12 years"),
            new MyListData("Beautiful", "Hafsa", "23 years"),
            new MyListData("Electrical Engineer", "Wajahat", "7 years"),
            new MyListData("Doctor", "Mehreen", "12 years")));  
    } //end of onActivityCreated()

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {        
        MyListData listData = (MyListData)getListAdapter().getItem(position);       
        DetailFrag frag = (DetailFrag) getFragmentManager().findFragmentById(R.id.frag_capt);
        if (frag != null && frag.isInLayout()) {            
            getData(position, listData, frag);  
        }

    } //end of onListItemClick()

    private void getData(int position, MyListData listData, DetailFrag frag) {      
        String artist = listData.artist;
        String title = listData.title;      
        frag.setText(artist, title);        
    } //end of getData()

} //end of class ListFrag 
```

这是我的细节片段

```
public class DetailFrag extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.question , container, false);
        return view;

    } //end of onCreateView()

    public void setText(String artist, String title) {

        TextView leftSide_artist = (TextView) getView().findViewById(R.id.question);
        leftSide_artist.setText(artist);

    } //end of setText()

} //end of class DetailFrag 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-01T03:04:23.290

另一种可能性是您在活动或 AndroidManifest.xml 中的应用程序中设置了 hardwareAccelerated = false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:08:08.680

是的，有区别，通常它发生在风景模式键盘不会在 AVD 中弹出，但会在设备上正常工作，我是如何管理这个的

*   转到您的模拟器设置>>语言和键盘，关闭所有字典和自动建议
*   转到 AVD Manger 并编辑您的 AVD，在“硬件”部分单击“新建”并添加“键盘支持”
*   重启 AVD

试试它是否适合你

# php - 除非我在同一个控制器中写入，否则无法读取 cakephp 会话

> ID：12247243
> 
> 赞同：2
> 
> 时间：2012-09-03T11:46:40.307
> 
> 标签：php, session, cakephp

除非我在要读取的控制器的开头写入，否则我无法读取会话数据。下面的例子：

```
public function login(){
$this->Session->write('Facebook.accessToken','This now works superb');
    //TODO: Implement check to see if logged in user has the same session user id.
    require_once(APP . 'Vendor' . DS .'facebook.php');
    $facebook = new Facebook(array(
    'appId'  => 'REMOVED',
    'secret' => 'REMOVED'
    ));
    $user = $facebook->getUser();
    try {
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        $loginUrl = $facebook->getLoginUrl(array('redirect_uri'=>'http://www.facebook.com/REMOVED'));
        $this->set('loginUrl',$loginUrl);
    }

    if(!isset($loginUrl)){
    // means that we are authenticated, so check for login with user id. If logged in redirect to event-list. If login failed display join form.    
        if($user = $this->User->findById($user_profile['id'])){
            if($this->Auth->login($user['User'])){
                $this->redirect('/users/dash');
            }
        }else{
            $this->Session->write('Facebook.accessToken2',$facebook->getAccessToken());
            $this->redirect(array('controller'=>'users','action'=>'add'));
            }
    }
}

public function add(){
    debug($this->Session->read());
    $this->Session->write('testing','value');
    debug($this->Session->read());
    } 
```

如果我删除`$this->Session->write('Facebook.accessToken','This now works superb');`控制器将不会写入 Facebook.accessToken2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:56:10.990

您的控制器中有 Session 组件吗？

```
 $components[] = 'Session';
    //or
    public $components = array('Session'); 
```

此外，这仅在此身份验证控制器的登录操作中还是在其他控制器中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:33:50.253

在您的 AppController 中：

```
public $components = array('Session');
function beforeFilter()
{
    $this->Session->write('Facebook.accessToken','This now works superb');
} 
```

在您的本地控制器中：

```
function beforeFilter()
{
    parent::beforeFilter();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T20:42:16.110

我建议在启用调试器和 XDebug 的情况下逐步执行代码，以确保遵循您期望的代码路径。

Netbeans 和 Eclipse 可以为您或任何其他具有调试逐步功能的 php 编辑器/ide 执行此操作。

# java - 错误：不兼容的操作数类型和对象

> ID：12247244
> 
> 赞同：1
> 
> 时间：2012-09-03T11:46:42.720
> 
> 标签：java, jsp

在下面放置在 JSP 文件中的 Java 代码中，

```
if (false == session.getAttribute("loggedin")) {  
    response.sendRedirect("login.jsp");
}
else if (null == session.getAttribute("loggedin")) {
    response.sendRedirect("login.jsp");
} 
```

我收到以下编译错误：

> 不兼容的操作数类型和对象

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:55:35.203

`session.getAttribute()`返回一个对象。对象不能与布尔值进行比较。所以表达式`false == session.getAttribute("loggedin")`无效。如果要检查是否`Boolean.FALSE`存储在会话属性中，代码应该是

```
 if (Boolean.FALSE.equals(session.getAttribute("loggedin"))) 
```

请注意，您最好将所有 Java 代码放在常规 Java 类中，并将自己限制在 JSP 中的 JSP [EL](https://stackoverflow.com/tags/el/info)中。不应再使用 Scriptlet。

# c# - 在 Caliburn Micro 中预加载视图

> ID：12247247
> 
> 赞同：1
> 
> 时间：2012-09-03T11:46:57.953
> 
> 标签：c#, wpf, caliburn.micro

我有一个运行在一些相当慢的平板电脑上的 Caliburn.Micro 应用程序。该应用程序的形状像一个向导，用户必须通过几个屏幕。由于运行应用程序的计算机速度很慢，因此第一次创建每个视图时，都会出现明显的延迟。

有没有办法在实际显示视图之前预加载或预渲染视图，这样我就可以花时间在应用程序启动（由于其他原因已经很长时间）并避免视图延迟？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:18:50.253

关于[OnViewReady](http://compiledexperience.com/blog/posts/using-on-view-ready-in-caliburn-micro)的一些信息。

数据是从哪里加载的，这是怎么发生的，你能展示一下这段代码吗？它是异步加载的，所以视图显示但数据仍在加载？

可能在应用程序启动时构造一个视图，使其可用于`ViewModel`，然后覆盖`GetView`。如果视图不像所述的那样复杂，则可能是数据的加载。

# javascript - AngularJS Linky过滤器停止传播

> ID：12247251
> 
> 赞同：5
> 
> 时间：2012-09-03T11:47:07.920
> 
> 标签：javascript, onclick, angularjs, stoppropagation

我有一个`span`看起来像这样的标签：

```
<span ng-bind-html="item.Name | linky" ng-click="open(item)"></span> 
```

在 ng 重复中。

我有一个问题，如果`item.Name`包含电子邮件或链接，链接过滤器会更改 html 并插入锚标记。现在，当我单击链接时，ng-click 触发并且锚点打开，但我只希望锚点打开并防止调用 ng-click ...这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T17:59:51.533

为您的 html 做这样的事情怎么样：

```
<span ng-bind-html="item.Name | linky" ng-click="open(item, $event)"></span> 
```

这对于您的函数调用：

```
$scope.open = function(item, event){
    if(event.srcElement.tagName !== 'A'){
        alert('do something here with ' + item.Name);
    }        
} 
```

可能有更好的方法，但我相信这会奏效。虽然它在我在[本组文章](https://groups.google.com/d/msg/angular/n3lAPn6SwZ8/Z6-PCCrCcUEJ)中看到的[文档](http://docs.angularjs.org/api/ng.directive%3angClick)中。`$event`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T09:43:10.600

使用指令怎么样！

```
app = angular.module("myModule", ["ngSanitize"])
    .directive('linkyDir', function() {
        return {
            restrict: 'E',
            replace: true,
            scope: { item: '=' },
            template: '<span ng-bind-html="item.Name | linky", ng-click="open(item)"></span>',
            controller: function($scope, $element) {
                $scope.open = function(item) {
                    if ($element[0].firstChild.tagName !== "A") {
                        console.log("Not an anchor");
                    } 
                    else {
                        console.log("Is an anchor tag");
                    }
                }
            }
        };
    }) 
```

加上限制：'E'，你会这样称呼它

```
<p ng-repeat="item in items">
    <linky-dir item="item"></linky-dir>
</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:12:06.930

我不知道这是否可行，但请尝试一下。

将参数添加到您的 open 函数并`this`作为当前 dom 元素的指针传递。

```
<span ng-bind-html="item.Name | linky" ng-click="open(item,this)"></span> 
```

现在在您的打开功能 EDITED CODE 中：

```
 function open(item,this)
    {
      // will be true if linky had changed the HTML and added anchor tag
    var children = this.childNodes;   
    for(a in children ) 
    {
      if(children[a].href)
      {
          return false; 
      } 
    }   
 //your existing code
    .
    .
    .

    } 
```

所以该方法将被调用，但如果它是锚标记将返回 false。

这可能不是你想要的，但它会达到你的目的:)

# java - 编译 Scala

> ID：12247252
> 
> 赞同：1
> 
> 时间：2012-09-03T11:47:08.093
> 
> 标签：java, scala, jvm

任何人都可以告诉我（或表示某些来源）编译Scala的方式。

我有一些疑问，例如，

*   在编译步骤中，Scala 如何编译 Java 相关的东西？它是否单独使用Java编译器？
*   最终的字节码`.scala`和Java的`.class`文件一样吗？
*   由于 Sun 被 Oracle 收购，JVM 是否也属于 Oracle？
*   如果有一天 JVM 获得了专有软件，那也会影响 Scala 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:05:41.270

如果您愿意，可以查看[编译器源代码，但首先查看](https://github.com/scala/scala/tree/master/src/compiler/scala)[Martin Odersky 关于编译器内部的演示](http://www.scala-lang.org/node/598)可能会提供更多信息。

在回答您的具体问题时：

*   是的。早期版本`scalac`不会这样做，需要您先`javac`手动运行；但是 scalac 可以[使用 javac 从 2.7.2 开始在需要的地方编译 Java 文件](http://www.codecommit.com/blog/scala/joint-compilation-of-scala-and-java-sources)。
*   肯定是一样的格式 取决于您在 Scala 中所做的确切工作，它可能不会为“等效”事物产生完全相同的 JVM 操作，但它完全符合字节码规范（这就是它可以在 JVM 上运行的原因）。
*   是的，无论您是指[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/index.html)，还是实际的 vm 实现（JRE 下载）。
*   我不确定您所说的“财产”究竟是什么意思。但我怀疑，就你所问的而言，答案是否定的。Scala 编译成标准字节码格式的 Java 类文件。在运行时，用 Scala 编写的代码/类与用 Java 编写的代码/类之间没有区别。因此，任何从根本上阻止 Scala 代码在这些 JVM 上运行的东西也会阻止 Java 代码运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T00:27:43.720

*   在编译步骤中，Scala 如何编译 Java 相关的东西？

Scala 不编译 Java。它对 Java 的了解足以弄清楚类的 API 是什么，但仅此而已。

*   它是否单独使用Java编译器？

它希望您使用 java 编译器编译您的 java 文件。

*   .scala 的最终字节码是否与 Java 的 .class 文件相同？

是的。Scala 生成有效的 .class 文件。但是，不可能将该文件转换为 Java 代码，因为有效的类文件允许 Java 不允许或无法表示的内容。

*   由于 Sun 被 Oracle 收购，JVM 是否也属于 Oracle？

没有“那个”JVM。现有的 JVM 有很多，事实上，Oracle 有自己的专有 JVM。当然，Sun 的 JVM 现在是 Oracle 的了。

*   如果有一天 JVM 获得了专有软件，那也会影响 Scala 吗？

一直有许多专有的 JVM，其中之一来自 Oracle。

让我们考虑一个假设的“最坏情况”场景：世界上所有的 JVM 都成为许可（付费）产品或不复存在。当然，Scala 仍然可以在 Dalvik VM 上运行，但我们假设它也已付费或不复存在。

在这种情况下，Scala*仍然*可以继续存在，但您必须付费才能运行使用 Scala 编译的程序。事实上，由于 Scala 是一个 JVM 程序，你甚至需要付费才能使用编译器！

*或者*，Scala 可以扩展到其他一些目标平台。Scala 现在有这样的努力，但绝对没有压力让它们成为生产级。如果有必要，它会完成。

# r - 在函数内部使用 attributes()

> ID：12247254
> 
> 赞同：3
> 
> 时间：2012-09-03T11:47:10.637
> 
> 标签：r, function, attributes, scope, attr

我需要这样的功能：

```
note<-function(object,text=""){attributes(object)[4]<-text} 
```

例如：`note(xxx,"yyyy")`

在其中我尝试将对象`"yyyy"`的第四个属性设置为值`xxx`（在全局环境中）。实际上，该函数（如预期的那样）不起作用，因为它修改了
函数 env 中的值。
有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:53:51.223

您可以使函数返回对象本身，因此可以重新分配它：

```
note <- function(object, text = "") {
    attributes(object)[4] <- text
    return(object)
}

xxx <- note(xxx, "yyyy") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:38:20.150

这里的解决方案（发现尝试 flodel 建议）：

```
note<-function(object,text=""){
 object2<-object
 attributes(object2)[4]<-text
 assign(deparse(substitute(object)),object2,envir=.GlobalEnv)
} 
```

谢谢大家

# c - 在结构定义中定义宏

> ID：12247255
> 
> 赞同：12
> 
> 时间：2012-09-03T11:47:12.303
> 
> 标签：c, macros, structure

在下面的结构定义上，有一行带有宏定义（`#define`）。那条线到底是做什么的？我知道它为数组的第一个条目创建了一个别名`h_addr_list`，但它对我来说仍然很奇怪。是`h_addr`struct 的成员`hostent`吗？这个定义是否只在结构的范围内？

```
struct  hostent
{
  char    *h_name;        /* official name of host */
  char    **h_aliases;    /* alias list */
  int     h_addrtype;     /* host address type */
  int     h_length;       /* length of address */
  char    **h_addr_list;  /* list of addresses from name server */
  #define h_addr  h_addr_list[0]  /* address, for backward compatiblity */
}; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-03T11:50:22.137

宏定义根本没有作用域，如果它是在该结构之外定义的，它将以相同的方式工作。

它允许旧代码继续使用，`hr.h_addr`而不必更改为`he.h_addr_list[0]`（假设`he`是 a `struct hostent`）。

澄清一下，`h_addr`不是`struct hostent`. 该定义由*预处理器处理*，实际的*编译器*在该处看到一个空行`#define`。
但是如果一段代码写成`he.h_addr`，预处理器会修改它并替换为`he.h_addr_list[0]`. 这就是实际的编译器将看到的。

预处理器宏从不限定范围：编译器本身甚至看不到它们 - 它只看到替换的结果，而预处理器完全忽略（不知道）范围。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T11:49:55.767

一旦定义，宏标识符保持可见，独立于 C 范围规则。它的范围从它的定义开始，直到翻译单元或相应`#undef`指令的结尾。

这里，结构内部的定义只是为了便于阅读；您还可以在结构之后定义宏，例如：

```
struct hostent
{
  char *h_name;
  char **h_aliases;
  int h_addrtype;
  int h_length;
  char **h_addr_list;
};

#define h_addr  h_addr_list[0] 
```

它根本不是一个领域。它允许用户编写`s.h_addr`而不是`s.h_addr_list[0]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:50:05.593

宏定义没有作用域，因此这个宏在看到这个定义的编译单元中是可见的，直到`undef h_addr`.

# sql - 使用 Spring JDBC 执行 SQL 函数

> ID：12247258
> 
> 赞同：2
> 
> 时间：2012-09-03T11:47:16.080
> 
> 标签：sql, spring, function, jdbc, procedures

我在数据库中有一个 sql 函数

```
FUNCTION RATELIMIT_OWN.Get_Logs ( p_yyyymm VARCHAR2, p_numec NUMBER ) 
```

函数返回

```
TYPE RATELIMIT_OWN.LOG_RECORD AS OBJECT
   (EVENTID              VARCHAR2(15),
    MSG                    VARCHAR2(2000),
    CREATE_DATE      DATE); 
```

我是存储过程和 sql 函数的新手。在函数中查看查询后，它可能会返回多个结果。

我正在使用 Spring JDBC 来执行和获取结果。

```
 SimpleJdbcCall caller = new SimpleJdbcCall(this.jdbcTemplate).withFunctionName("RATELIMIT_OWN.Get_Logs");
    MyBean resultBean = null;

    MapSqlParameterSource paramMap = new MapSqlParameterSource();
    paramMap.addValue("p_yyyymm", inputBean.getMonth(), Types.VARCHAR);
    paramMap.addValue("p_numec", inputBean.getNumec(), Types.INTEGER);

    resultBean = caller.executeFunction(MyBean.class, paramMap); 
```

但这行得通吗？如果我得到多个结果，这是如何工作的。它应该正确返回列表。我找不到任何 SimpleJdbcCall 方法来返回对象列表，甚至找不到可以通过 RowMapper 将返回的列映射到 Bean 的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T00:35:36.270

您可以使用 JDBCTemplate 的查询方法，该方法将按预期返回一个集合。还允许您指定行映射器。检查本[教程第 1 部分](http://www.stevideter.com/2008/03/08/processing-stored-procedure-result-sets-in-spring/)和[教程第 2 部分](http://www.stevideter.com/2008/03/09/spring-jdbctemplate-and-stored-procedures-part-ii/)

# php - 成功：jquery 中的函数（数据）永远不会执行

> ID：12247261
> 
> 赞同：0
> 
> 时间：2012-09-03T11:47:23.953
> 
> 标签：php, jquery, ajax, forms, google-api

我在 jquery 函数中执行 ajax 调用，以便将表单发布到控制器。我检查了所有字段的值是否正确，但是

```
sucess : function(data) {
    alert('it works');
} 
```

不显示任何内容。这是我的代码：

```
function add_event() {
    // Vars
    var form_values = $('#addEventForm').serialize();

    // Traitement Ajax
    $.ajax({
        type: 'POST',
        url: '<?php echo site_url()."/public/calendar/addEvent/"; ?>',
        data: form_values,

        success: function(data) {
            // Debug
            alert(data);

            if (data == 'true') {
                $('#addEvent').hide();
                location.reload();
            } else {
                alert("error");
            }
        },
    });
}​ 
```

这是我在控制器中的代码：

```
function addEvent()

{       $this->load->library('gcal');

    // Posts      
    $title = $this->input->post('title');
        $click_date = $this->input->post('start_date'); echo $click_date;
    $date       = explode("-", $click_date);
    $year       = $date[0];  
    $month       = $date[1]; 
    $day        = $date[2]; 
    $date_start = $this->unix_timestamp($year.'-'.$month.'-'.$day);
    // Params
    $params = array(
                        'calendarId'    => 'myriam.gsim@gmail.com',
                        'allday'        => true, 
                        'start'         => $date_start,
                        'end'       => $date_start,
                        'summary'       => $title,
                        'description'   => "this is a test"
                    ); 
       echo 'before insertion';
    // Insertion
         $response = $this->gcal->eventInsert($params);
    echo 'apres insertion';

    if($response)
    {
        echo "true";
    } 
    else
    {
        echo "false";
    }

} 
```

我注意到这是`$response = $this->gcal->eventInsert($params);`导致错误的原因（我在 google api 控制台上注册了该应用程序）

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:28:50.423

添加一个失败...

例如：

```
$.ajax({ ..
..
..
success: function(data) {alert(data)},
error:function(request, status, error){// do something with it..}
}) 
```

我很确定，它失败了。还要检查您的控制台以获取更多信息。

# jsf - 不同 JSF 应用程序的 cookie 存储策略和选项卡式浏览给出“无法恢复视图”

> ID：12247265
> 
> 赞同：1
> 
> 时间：2012-09-03T11:47:29.037
> 
> 标签：jsf, cookies

**我在我的机器上的两个不同端口上启动了两个不同的JBoss AS 7.1**实例，并将相同的应用程序（具有相同的根上下文）部署到它们两者。当我使用相同的浏览器（Chrome 或 Firefox 或 Conkeror）进行选项卡式浏览时，此配置确定性地给了我以下异常：

```
javax.servlet.ServletException: viewId:/whatever.xhtml - View /whatever.xhtml could not be restored.
javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) 
```

当我使用不同的浏览器浏览时，一切正常。

在进一步调查不同浏览器如何存储 cookie 后，我发现组合（**IP** /**路径）**必须是唯一的，以避免此类选项卡式浏览问题，并且**端口**不会发挥作用。即 cookie 按**IP**和按**路径**存储，但*不是*按**端口**存储。因此，在部署在相同 IP 和路径（但显然在不同端口上）的两个不同应用程序上使用相同浏览器进行选项卡式浏览将导致视图过期，因为浏览器会混淆两个会话。我认识到我的设置不太可能出现在生产环境中，但我想问一下：

1.  有没有定义这种 cookie 组织行为的标准？

2.  在多个 JSF 应用程序中进行选项卡式浏览时，是否有任何最佳实践必须注意以避免会话混淆？

3.  是否`javax.faces.STATE_SAVING_METHOD`对此有任何影响（在我的设置中设置为`"server"`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:00:55.763

> *有没有定义这种 cookie 组织行为的标准？*

版本 0 cookie（[Netscape](http://curl.haxx.se/rfc/cookie_spec.html)规范 cookie）不以任何方式支持端口。

版本 1 cookie（[RFC2965](http://www.ietf.org/rfc/rfc2965.txt)规范 cookie）支持该`Port`属性。如果不存在，则使用版本 0 行为。

一般的 servletcontainer 将`JSESSIONID`cookie 设置为版本 0 cookie。理论上，您可以通过在 servlet 容器中提供自定义“会话管理器”来覆盖它。请注意，MSIE 9 仍然不支持版本 1 cookie。

* * *

> *在多个 JSF 应用程序中进行选项卡式浏览时，是否有任何最佳实践必须注意以避免会话混淆？*

现实世界项目中的规范方法是使用不同的子域（在同一个端口上！）。例如`beta.example.com`, `dev.example.com`, `update.example.com`,`test.example.com`等。

* * *

> *是否`javax.faces.STATE_SAVING_METHOD`对此有任何影响（在我的设置中设置为`"server"`）？*

如果将它设置为`client`，那么`ViewExpiredException`确实会消失，因为视图不再存储在会话中，而是存储在表单的隐藏字段中。但是您可能仍然会遇到其他与会话相关的问题，如果您在会话中存储了一些东西，例如会话范围的托管 bean 和登录用户，则可以肯定。

# php - 通过单词的前导字符拆分PHP中的字符串

> ID：12247269
> 
> 赞同：1
> 
> 时间：2012-09-03T11:48:02.690
> 
> 标签：php, regex, string

我已将 Instagram 标题存储在字符串中

就像是：

```
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img"; 
```

我的目标是将字符串拆分为一个包含标签的数组，并将字符串的其余部分保存在一个变量中

例如

```
$matches[0] --> "#beautiful"
$matches[1] --> "#photo" etc..

also $leftoverString="This is a beautiful photo"; 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T11:59:11.113

```
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img";
if (preg_match_all('/(^|\s)(#\w+)/', $caption_text, $arrHashtags) > 0) {
    print_r($arrHashtags[0]);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T11:56:36.357

```
$caption_text = "This is a beautiful photo #beautiful #photo #awesome #img";

preg_match_all ( '/#[^ ]+/' , $caption_text, $matches );

$tweet = preg_replace('/#([^ \r\n\t]+)/', '', $caption_text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:07:11.603

```
$temp = explode(' ', $caption_text);
$matches = array();
foreach ($temp as $element) {
    if ($element[0] == '#') {
       $matches[] = $element;
    }
    else
        $leftoverstring .= ' '.$element;
}

print_r($matches);
echo $leftoverstring; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T11:56:30.990

你可以试试：

```
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img";

$array = explode(' ', $caption_text);

$photos = array();
foreach ($array as $a) {
    if ($a[0] == '#') {
        $photos[] = $a;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T11:57:26.763

```
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img";

$matches = explode('#',$caption_text);

for($i = 0; $i<count($matches);$i++)
{ 
   $matches[$i]= '#'.$matches[$i];
}

print_r($matches); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-03T11:57:39.227

一种可能性是按“”展开，然后检查每个项目是否有标签。如果不是，你可以让其他人再次成为一个字符串。例如：

```
$arr_text = explode(' ',"This is a beautiful photo #beautiful #photo #awesome #img");
$tmp = array();
foreach ($arr_text as $item) {
    if(strpos($item,'#') === 0) {
        //do something
    } else  {
        $tmp[] = $item;
    }
}
implode(' ', $tmp); 
```

希望这有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-03T12:02:58.693

```
<?php
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img";
$new = explode(" ",$caption_text);
foreach($new as $key=>$value)
{
if($value[0] == "#")
$match[] = $value;
else
$rem .= $value." "; 
}
print_r($rem).PHP_EOL;
print_r($match)
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-03T11:53:55.187

```
<?php
$caption_text ="This is a beautiful photo #beautiful #photo #awesome #img";
$new = explode(" #",$caption_text);
print_r($new);
?> 
```

# macos - WebView 无法打开名称中包含空格的本地 html 文件

> ID：12247274
> 
> 赞同：0
> 
> 时间：2012-09-03T11:48:11.087
> 
> 标签：macos, cocoa, webview

由于名称中有空格，WebView 无法显示本地 .htm 文件。我收到错误

```
Error Domain=NSURLErrorDomain Code=-1100 "The requested URL was not found on this   server." UserInfo=0x400ea1900 {NSUnderlyingError=0x400265c80 "The requested URL was not found on this server.", NSErrorFailingURLStringKey=file:///Users/olgadalton/Library/Caches/ee.64.xxx/_books/Deployment-guide-for-Microsoft-SharePoint-Server-2010_2/OEBPS/Text/Deployment%2520Guide%2520for%2520Microsoft%2520SharePoint%2520Server%25202010_split_000.htm, NSErrorFailingURLKey=file:///Users/olgadalton/Library/Caches/ee.64.xxx/_books/Deployment-guide-for-Microsoft-SharePoint-Server-2010_2/OEBPS/Text/Deployment%2520Guide%2520for%2520Microsoft%2520SharePoint%2520Server%25202010_split_000.htm, NSLocalizedDescription=The requested URL was not found on this server.} 
```

但是文件存在于finder和终端列表中：

```
ls -l
total 6024
-rw-rw-r--@ 1 olgadalton  staff   3925 Oct 11  2011 Deployment Guide for Microsoft SharePoint Server 2010_split_000.htm 
```

权限也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:20:11.073

问题已解决：在使用之前需要取消转义的 url 中有额外的 %25：

```
[NSURL fileURLWithPath: .... ] 
```

将其更改为：

```
[NSURL fileURLWithPath: [ .... stringByReplacingPercentEscapesUsingEncoding: NSUTF8StringEncoding]] 
```

# wpf - 按内容划分的窗口大小限制

> ID：12247277
> 
> 赞同：10
> 
> 时间：2012-09-03T11:48:18.193
> 
> 标签：wpf, layout, sizetocontent

我希望窗口尊重`MinWidth`/`MinHeight`和`MaxWidth`/`MaxHeight`里面的内容控件的规范。

有些人建议使用`SizeToContent`，但这仅有助于设置初始窗口大小，而不是约束。

其他人建议在那里覆盖`MeasureOverride`和设置窗口的最小/最大高度和宽度，但这似乎有点不干净，考虑到这样一个微不足道的问题肯定应该有一个纯粹的声明性解决方案。

只是提到另一个似乎合理但*不起作用*的解决方案（并且之前在一个被删除的答案中提到过）：`MinWidth`将窗口绑定到`MinWidth`控件不考虑窗口装饰。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-02T18:41:30.583

如果设置了初始窗口大小，使得实际内容大小不会被初始布局过程中内容的 MinWidth/MinHeight 和 MaxWidth/MaxHeight 强制（例如，通过使用 Window.SizeToContent="WidthAndHeight"），则以下等式为真：

```
Window.ActualSize - Content.ActualSize = 
      Window.MinSize - Content.MinSize = Window.MaxSize - Content.MaxSize. 
```

根据这些等式，您可以得出以下代码：

```
public MainWindow()
{
    InitializeComponent();

    this.SizeChanged += OnWindowSizeChanged;
}

private static void OnWindowSizeChanged(object sender, SizeChangedEventArgs e)
{
    var window = (Window)sender;
    var content = (FrameworkElement)window.Content;

    window.MinWidth = window.ActualWidth - content.ActualWidth + content.MinWidth;
    window.MaxWidth = window.ActualWidth - content.ActualWidth + content.MaxWidth;

    window.MinHeight = window.ActualHeight - content.ActualHeight + content.MinHeight;
    window.MaxHeight = window.ActualHeight - content.ActualHeight + content.MaxHeight;

    window.SizeChanged -= OnWindowSizeChanged;
} 
```

我不知道如何使用纯声明性方法有效地实现这一点，因为代码应该在初始布局通过后只运行一次。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-13T19:09:45.357

> 有些人建议使用`SizeToContent`，但这仅有助于设置初始窗口大小，而不是约束。

我通过在窗口初始化**后**`MinWidth`立即设置和`MinHeight`属性来解决这个问题：

 ****主窗口.xaml**

```
<Window ... SizeToContent="WidthAndHeight">
    ...
</Window> 
```

**主窗口.xaml.cs**

```
public MainWindow()
{
    InitializeComponent();
    SourceInitialized += (s, e) =>
    {
        MinWidth = ActualWidth;
        MinHeight = ActualHeight;
    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T04:54:37.140

使用绑定标记扩展。绑定是 wpf 在此属性（源）更改时更新某些其他属性（目标）的方式。在这种情况下，Grid 的 MinWidth 属性是 Source，而您的窗口的 MinWidth 属性是目标。

```
<Window x:Class="MinMaxValuesOnWindows.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="600" Width="800"
    MinWidth="{Binding ElementName=gridy, Path=MinWidth}"
    MinHeight="{Binding ElementName=gridy, Path=MinHeight}"
    MaxWidth="{Binding ElementName=gridy, Path=MaxWidth}"
    MaxHeight="{Binding ElementName=gridy, Path=MaxHeight}">
    <Grid Name="gridy"  MinHeight="80" MinWidth="80" MaxHeight="300" MaxWidth="300"/>
</Window> 
```

正如您在主题中提到的，这并不完全有效，但您可以在更新绑定目标之前使用绑定上的转换器来添加窗口框架的高度和宽度（可能需要 PInvoke）。由于我怀疑您的应用程序中的窗框厚度是动态变化的，因此这可能只是一个恒定值（如果用户更改主题，则不一定如此）。**

# java - 在第一个 \n 之后截断字符串

> ID：12247278
> 
> 赞同：-3
> 
> 时间：2012-09-03T11:48:18.647
> 
> 标签：java, android, regex

我不太擅长正则表达式等。我需要在字符串中的计数器中的第一个 \n 之后获取剩余的字符串。

例子：

```
going.\nTest found at 241. 
```

所以我想回来`Test found at 241.`

也许有一个非常简单的解决方案，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:50:58.113

这将起作用：

```
String s = "going.\nTest found at 241.";
s = s.substring(s.indexOf("\n") + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:50:31.920

怎么样：

```
String s =  "going.\nTest found at 241";
String[] parts = s.split("\n");
if(parts.length==2) {
 //do something with parts[1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:50:43.033

在这种简单的情况下，只需使用`myString.indexOf('\n')`查找`\n`角色的位置（如果存在），然后使用`substring`删除该位置之前的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T11:51:18.883

```
 String ss="going.\nTest found at 241.";
    System.out.println(ss.substring(ss.indexOf("\n")+1)); 
```

`string.indexIf(STR)`将返回该字符串第一次出现的索引（STR）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:52:29.150

```
str = str.substring(str.indexOf("\n")+1,str.length()); 
```

# c# - 在gridview edititemtemplate中绑定下拉列表

> ID：12247279
> 
> 赞同：12
> 
> 时间：2012-09-03T11:48:20.143
> 
> 标签：c#, asp.net, gridview

我无法绑定存在于 edititem template 中的下拉列表。当我尝试访问它时，我得到空引用。

我的设计：

```
<asp:TemplateField HeaderText ="Category">
    <ItemTemplate >
    <asp:Label ID="drpcategory" Text ='<%#Bind("category") %>' runat ="server" />
    </ItemTemplate>
    <EditItemTemplate>
        <asp:DropDownList ID="drpcategory1"  AppendDataBoundItems="True" runat="server" >
        </asp:DropDownList>
    </EditItemTemplate>
</asp:TemplateField> 
```

我背后的代码：

```
protected void gv_RowEditing(object sender, GridViewEditEventArgs e)
{
    gv_table1.EditIndex = e.NewEditIndex;
    DropDownList drpcategory1 = ((DropDownList)gv_table1.Rows[e.NewEditIndex].Cells[8].FindControl("drpcategory1"));
    //BindDropDown(drpcategory1);
    dt = con.GetData("Select category_name from category");

    String str = gv_table1.Rows[e.NewEditIndex].FindControl("drpcategory1").GetType().ToString();
    //((DropDownList)gv_table1.Rows[e.NewEditIndex].Cells[8].FindControl("drpcategory1")).DataSource = dt;
    drpcategory1.DataSource = dt;
    drpcategory1.DataTextField = "category_name";
    drpcategory1.DataValueField = "category_name";
    drpcategory1.DataBind();

    this.setgrid();
} 
```

我已经尝试在网上寻找并尝试了很多徒劳的事情。我是asp新手。提前致谢。我希望仅当用户进入编辑模式时才绑定下拉列表。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-04T07:34:17.767

**代码背后：**测试代码并在编辑模式下设置下拉列表选定值

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        if ((e.Row.RowState & DataControlRowState.Edit) > 0)
        {
            DropDownList ddList= (DropDownList)e.Row.FindControl("drpcategory1");
            //bind dropdown-list
            DataTable dt = con.GetData("Select category_name from category");
            ddList.DataSource = dt;
            ddList.DataTextField = "category_name";
            ddList.DataValueField = "category_name";
            ddList.DataBind();

            DataRowView dr = e.Row.DataItem as DataRowView;
            //ddList.SelectedItem.Text = dr["category_name"].ToString();
            ddList.SelectedValue = dr["category_name"].ToString();
        }
    }
}

protected void gv_RowEditing(object sender, GridViewEditEventArgs e)
{
    gv.EditIndex = e.NewEditIndex;
    gridviewBind();// your gridview binding function
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-27T01:37:55.017

我这样做。其中，Name 和 Id 是 Company 对象的两个字段：

HTML 代码：

```
<asp:TemplateField HeaderText="Công ty">
    <EditItemTemplate>
        <asp:DropDownList ID="ddlCompanyEdit" DataSource="<%# PopulateddlCompanyEdit() %>" DataValueField="Id" DataTextField="Name" runat="server"></asp:DropDownList>
    </EditItemTemplate>
    <ItemTemplate>
        <asp:Label ID="lbCompany" runat="server" Text='<%#Bind("Company") %>'></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

后面的 C# 代码：

```
protected IEnumerable<Company> PopulateddlCompanyEdit()
{
    using (var bkDb = new BrickKilnDb())
    {
        return bkDb.Companies.ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T04:17:53.550

```
protected void gvProject_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        try
        {
            string Active = "";
            if (e.Row.DataItem != null)
            { 
                if ((e.Row.RowState & DataControlRowState.Edit) > 0)
                {
                    Label lblEditActive = (Label)e.Row.FindControl("lblUP_ET_ActiveStatus");
                    if (lblEditActive.Text != string.Empty)
                    {
                        Active = lblEditActive.Text.Trim();
                    }

                    DropDownList ddlActive = (DropDownList)e.Row.FindControl("ddlUP_ET_ActiveStatus");
                    ddlActive.Items.Clear();
                    ddlActive.Items.Add("True");
                    ddlActive.Items.Add("False"); 
                    ddlActive.DataBind(); 
                    ddlActive.Items.FindByText(Active).Selected = true;
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T05:52:56.770

您必须使用 RowDataBound 事件来绑定已编辑行的下拉控件。请在 RowDataBound 事件中使用以下方法。

```
 protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowState == DataControlRowState.Edit)
        {
            DropDownList drpcategory1 = (DropDownList)e.Row.FindControl("drpcategory1");
            DataTable dt = con.GetData("Select category_name from category");
            drpcategory1.DataSource = dt;
            drpcategory1.DataTextField = "category_name";
            drpcategory1.DataValueField = "category_name";
            drpcategory1.DataBind();
        }
    }

Hope this will help you. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T11:53:09.667

该事件`RowEditing`恰好在编辑行之前发生。

您应该改用该`RowDataBound`事件。

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if (gv.EditIndex == e.Row.RowIndex && 
       e.Row.RowType==DataControlRowType.DataRow) 
   {       
       DropDownList drpcategory1 = (DropDownList)e.Row.FindControl("drpcategory1"); 
       //bind the control
   }
} 
```

# jquery - 通过 ajax 获取图像失败

> ID：12247286
> 
> 赞同：0
> 
> 时间：2012-09-03T11:48:29.403
> 
> 标签：jquery, ajax, codeigniter, jpgraph

嗨，我使用 Jpgraph 进行报告，我使用 Codeigniter Ajax-Jquery-Json。这是我的情况：

图像未出现在浏览器中，我在 Firebug 控制台中收到此响应：编码图像和不可见字符

代码：

控制器：

```
function RapportByRegion()

{
    $this->load->model('rapport');
    $item = trim($this->input->post('variable'));
    //$array = array('result' => $item);
    header('Content-Type: application/json',true);

       $data = array();
        $casregion = $this->rapport->RapportByRegion($item);
        $casregionlegende = $this->rapport->RapportByRegionLegende($item);

        $graph = $this->jpgraph->Reporting($casregion,'Nombre de cas par structure',$casregionlegende);
        $graphTempDirectory = 'temp';

        $graphEnterName = 'casregion.png';
        $graphFileLocationE = $graphTempDirectory . '/' . $graphEnterName;
        $graph->Stroke('./' . $graphFileLocationE);
        $data['graph4'] = $graphFileLocationE;
        echo json_encode($data);

} 
```

Jpgraph类：

```
class Jpgraph {

    function Reporting($ydata, $title, $legends) {
        require_once "jpgraph/jpgraph.php";
        require_once "jpgraph/jpgraph_pie.php";
        require_once "jpgraph/jpgraph_pie3d.php";

        $graph = new PieGraph(500, 500);
        $graph->SetShadow(true,5,'red');
        $graph->legend->SetShadow('darkgray@0.5');
        $graph->title->Set($title);
        $graph->title->SetFont(FF_FONT1, FS_BOLD);
        $graph->legend->Pos(0.12,0.89,"right","top");
        $graph->img->SetMargin(60,80,30,40);

        $plot = new PiePlot3D($ydata);
        $plot->SetLabelType(PIE_VALUE_ABS);
        $plot->value->SetFormat('%d Cas');
        $plot->ExplodeSlice(4);
        $plot->SetLegends($legends);
        $graph->legend->SetPos(0, 0.15);
        //$graph->legend->SetSize(0.10);
        $plot->SetSize(0.25);
        $plot->SetCenter(0.5);
        $graph->Add($plot);
        return $graph;
    }

} 
```

jQuery代码：

```
$(document).ready(function() {
$( '#region').change(function(){
    var regionid = $('#region').val();

        if (regionid != ""){
            var variable_de_test = regionid;
        var post_url = "/index.php/report/RapportByRegion/" + regionid;
            $.ajax({
               type: "POST",
               dataType: "json",
               url: post_url,
               data :{variable : variable_de_test}, 
               async:false,
               success: function(result) //we're calling the response json array 'cities'
                {
                    //alert(region.result);
                 $('#rapports').hide();
                 $('#cas-region').html('<img src="<?php echo site_url();?>/"'+result.graph4+' />');                

                } //end success

             }); //end AJAX
        } 
     return false;   
    });

}); 
```

# python - Python - 发送数据包发出错误 - Minecraft Packets

> ID：12247290
> 
> 赞同：2
> 
> 时间：2012-09-03T11:48:35.720
> 
> 标签：python, struct, send, packet, minecraft

**我正在使用以下脚本：**

```
import socket
import struct

username = "username_value"
verification_key = "verification_key"

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  # boilerplate
s.connect(("example.com", 1234))  # adjust accordingly

# now for the packet
# note that the String type is specified as having a length of 64, we'll pad that

packet = ""

packet += struct.pack("B", 1)  # packet type
packet += struct.pack("B", 7)  # protocol version
packet += "%-64s" % username  # magic!
packet += "%-64s" % verification_key
packet += struct.pack("B", 0)  # that unused byte, assuming a NULL byte here

# send what we've crafted
s.send(packet) 
```

**并得到以下回复：**

```
 packet += struct.pack("B", 1)  # packet type
TypeError: Can't convert 'bytes' object to str implicitly 
```

**我对 Python 几乎是全新的，刚刚开始，但我理解这门语言。我阅读并发现了一些关于 Python 3 改变了你使用数据包的方式。我觉得有点绝望。帮助？谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:59:12.840

在 python 3 中，您必须将字符串隐式定义`packet`为字节

```
packet = b"" 
```

代替`packet = ""`

# javascript - 在大网格上映射小网格

> ID：12247291
> 
> 赞同：0
> 
> 时间：2012-09-03T11:48:36.200
> 
> 标签：javascript, algorithm, grid, mapping

我正在尝试构建一个小游戏，其中有一个大网格。(10x20) 个空间和一个小网格 (3x3)。我想将小网格映射到大网格。

我必须能够为要放置的网格指定 ay/row 位置和 ax/cell 位置。

我怎样才能做到这一点？

例子：

```
 small grid:
    |0|1|0|
    |1|1|1|
    |0|1|0|

    large grid
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0

    result:
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|1|0|0|0|0|0
    |0|0|0|1|1|1|0|0|0|0
    |0|0|0|0|1|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0
    |0|0|0|0|0|0|0|0|0|0 
```

**更新** 游戏是俄罗斯方块。我检查了一个小网格（砖）不能从大网格边界中出来。

```
 A brick holds:
        X: cell position on the large grid
        Y: row position on the large grid
        Width: the width of the small grid
        Height: the height of the small grid
        Fields: the small grid where some fields are 0 (unmarked), and some are 1 (marked) 
```

我尝试过这样的事情：但无法让它工作

```
 for (var row = brick.y; row < brick.y + brick.height; row++) {
            for (var cell = brick.x; cell < brick.x + brick.width; cell++) {
                for (var fieldRow = 0; fieldRow < brick.type.fields.length; fieldRow++) {
                    for (var fieldCell = 0; fieldCell < brick.type.fields[fieldRow].length; fieldCell++) {
                        console.log(brick.type.fields[fieldRow][fieldCell]);
                        if (brick.type.fields[fieldRow][fieldCell] == 1) {
                            this.grid[row][cell] = 1;
                        }
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:02:35.420

假设您使用 2 个阵列来构建游戏，您的 3x3 阵列位于大网格的中间。

小数组的中心是smallGrid[1][1]，大数组的中心是bigGrid[4][11]。让我们构建传输算法

```
for(i=0; i<=2; i++){
 for(j=0; j<=2; j++){
   if(smallGrid[i][j] == 1) 
    { 
      bigGrid[i+3][j+10]=1;
    } 
 }
} 
```

# php - PHP imagesetpixel() 停止将绘制的像素限制为 ~250

> ID：12247302
> 
> 赞同：3
> 
> 时间：2012-09-03T11:49:19.323
> 
> 标签：php, image, image-processing, pixel, pixels

我正在使用 imagesetpixel() 为字母“x”绘制一个灰色像素，为字母“o”绘制一个黑色像素。如果您只输入约 250 个或更少的 X 和 O，它工作正常，但如果您输入更多，出于某种奇怪的原因，只会绘制前约 250 个 X 和 O，其余的则不会。有谁知道我该如何解决这个问题？

作为旁注，在未来，我可能希望能够用其他字母替换我选择的自己的颜色，所以请记住这一点（例如 a = 红色，b = 蓝色，c = 绿色，d = 橙色等）。

```
...
$image = imagecreate($xdim, $ydim);

for(...){
if( $string{$i} == "o" ){
    $color = 0;
} else if( $string{$i} == "x" ){
    $color = 170;
}

imagesetpixel($image, $x, $y, imagecolorallocate($image, $color, $color, $color));

...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:58:07.327

每次调用时，函数 imagecolorallocate 都会在图像颜色表中添加一种颜色——这个颜色表有 255 种颜色的限制。

您要做的是在遍历所有字母之前创建对颜色的引用，有效地为每个字母创建一个颜色引用。

因此，在创建图像后立即分配对不同颜色的引用，然后直接调用这些引用而不是分配新颜色：

```
...
$image = imagecreate($xdim, $ydim);
$black = imagecolorallocate($image, 0, 0, 0);
$grey = imagecolorallocate($image, 170, 170, 170);

for(...){
    if( $string{$i} == "o" ){
        $color = $black;
    } else if( $string{$i} == "x" ){
        $color = $grey;
    }

    imagesetpixel($image, $x, $y, $color);

    ...
} 
```

# mysql - 如何在不使用 if 的情况下在特定时间执行 mysql 事件

> ID：12247303
> 
> 赞同：0
> 
> 时间：2012-09-03T11:49:19.213
> 
> 标签：mysql, events, procedures

我正在使用以下代码运行此事件 `IF CURRENT_TIME() = '23:50:00'`

但是这样做，每一秒都必须将时间与服务器时间进行比较。我们可以在没有条件的情况下实现它吗

```
drop event OEAuditEvent;

DELIMITER $$

CREATE EVENT OEAuditEvent
ON SCHEDULE EVERY 1 SECOND
STARTS '2012-08-30 09:00:10'

DO
BEGIN

DECLARE a CHAR(20);
DECLARE b,c,d INT;
DECLARE done INT DEFAULT FALSE;

IF CURRENT_TIME() = '23:50:00' THEN
begin 

DECLARE cur CURSOR FOR select OE_User,count(OE_User) from RNCM_Status where date(OE_Date)=CURDATE() group by OE_User; 
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN cur;
read_loop: LOOP

FETCH cur INTO a, b;

SET c=ceil((b*5)/100);
insert into test values(a,b);
IF done THEN

          LEAVE read_loop;
ELSE
          insert into OE_Audit(MDN,CAF,UploadedDate,OEUser,OEDate,UserCount,QCCount,intime) select MDN,CAF,UploadedDate,OE_User,OE_Date,b,c,now() from RNCM_Status where OE_User=a and date(OE_Date)=CURDATE() order by rand() limit c;
    END IF;

END LOOP;
CLOSE cur;
end ;
END IF;

END $$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T11:54:53.990

为什么不创建事件本身以在每天 23:00 运行并完全删除 IF？

```
CREATE EVENT OEAuditEvent
ON SCHEDULE EVERY 1 DAY
STARTS '2012-08-30 23:00:00' 
```

# awk - 如何打印日期超过两天的文本行

> ID：12247306
> 
> 赞同：2
> 
> 时间：2012-09-03T11:49:33.403
> 
> 标签：awk

我有以下正在使用的文本文件，并且必须能够在`creationdatetime`超过两天时仅解析对象名称值。

```
objectname ...........................: \Path\to\file\hpvss-LUN-22May12 22.24.11\hpVSS-LUN-29Aug12 22.39.15
creationdatetime .....................: 01-Sep-2012 02:17:43
objectname ...........................: \Path\to\file\hpVSS-LUN-22May12 22.24.11\hpVSS-LUN-28Aug12 22.16.19
creationdatetime .....................: 03-Sep-2012 10:18:09
objectname ...........................: \Path\to\file\hpVSS-LUN-22May-12 22.24.11\hpVSS-LUN-27Aug12 22.01.52
creationdatetime .....................: 03-Sep-2012 10:18:33 
```

上述命令的输出将是：

```
\Path\to\file\hpvss-LUN-22May12 22.24.11\hpVSS-LUN-29Aug12 22.39.15 
```

任何帮助将不胜感激。

普雷姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:24:33.647

日期解析`awk`有点棘手，但可以使用`mktime`. 为了将月份名称转换为数字，定义了一个关联转换数组。

路径名称中有空格，因此字段分隔符的最佳选择可能是`:`（冒号后跟空格）。这是一个有效的 awk 脚本：

**old_than_two_days.awk**

```
BEGIN {
  months2num["Jan"] = 1;  months2num["Feb"] =  2; months2num["Mar"] =  3; months2num["Apr"] =  4;
  months2num["May"] = 5;  months2num["Jun"] =  6; months2num["Jul"] =  7; months2num["Aug"] =  8;
  months2num["Sep"] = 9;  months2num["Oct"] = 10; months2num["Nov"] = 11; months2num["Dec"] = 12;

  now = systime()
  two_days = 2 * 24 * 3600
  FS  = ": "
}

$1 ~ /objectname/ { 
  path = $2
}

$1 ~ /creationdatetime/ {
  split($2, ds, " ")
  split(ds[1], d, "-")
  split(ds[2], t, ":")
  date           = d[3] " " months2num[d[2]] " " d[1] " " t[1] " " t[2] " " t[3]
  age_in_seconds = mktime(date)

  if(now - age_in_seconds > two_days)
    print path
} 
```

最后一个块中的所有拆分都是挑选出日期位并将它们转换为可以`mktime`接受的格式。

像这样运行它：

```
awk -f older_than_two_days.awk infile 
```

输出：

```
\Path\to\file\hpvss-LUN-22May12 22.24.11\hpVSS-LUN-29Aug12 22.39.15 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:40:35.667

我会分两个阶段进行：

1）重新格式化你的输入文件

```
awk '/objectname/{$1=$2="";file=$0;getline;$1=$2="";print $0" |"file}' inputfile > inputfile2 
```

这样你会处理

```
01-Sep-2012 02:17:43 |  \Path\to\file\hpvss-LUN-22May12 22.24.11\hpVSS-LUN-29Aug12 22.39.15
03-Sep-2012 10:18:09 |  \Path\to\file\hpVSS-LUN-22May12 22.24.11\hpVSS-LUN-28Aug12 22.16.19
03-Sep-2012 10:18:33 |  \Path\to\file\hpVSS-LUN-22May-12 22.24.11\hpVSS-LUN-27Aug12 22.01.52 
```

2）过滤日期：

```
COMPARDATE=$(($(date +%s)-2*24*3600)) # 2 days off
IFS='|'
while read d f
do 
  [[ $(date -d "$d" +%s) < $COMPARDATE ]] && printf "%s\n" "$f"
done < inputfile2 
```

# android - GridView 中网格的填充

> ID：12247309
> 
> 赞同：3
> 
> 时间：2012-09-03T11:49:43.283
> 
> 标签：android, xml, android-layout, android-gridview

我的网格布局有一些问题。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:id="@+id/frag_books_grid_view_layout"
     android:orientation="vertical">
        <GridView
            android:padding="0dp"
            android:cacheColorHint="@color/bg_default"
            android:listSelector="@drawable/list_selector_background"
            android:id="@+id/frag_books_grid_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:stretchMode="spacingWidth"
            android:scrollbars="none"/>
</LinearLayout> 
```

单品：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <ListView
        android:cacheColorHint="@color/bg_default"
        android:scrollbars="none"
        android:listSelector="@drawable/list_selector_background"
        android:layout_gravity="center_vertical|left"
        android:gravity="center_vertical|left"
        android:paddingLeft="15dp"
        android:paddingRight="15dp" 
        android:id="@+id/frag_book_list_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:verticalSpacing="5dp"/>
</LinearLayout> 
```

问题是单项没有左右填充。选择项目时看起来很糟糕：http: [//i.imgur.com/rirNP.png](http://i.imgur.com/rirNP.png)

请帮忙解决。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T11:55:34.740

试试看

```
 <?xml version="1.0" encoding="utf-8"?>
    <GridView xmlns:android="http://schemas.android.com/apk/res/android" 
        android:id="@+id/menu_category"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:columnWidth="90dp"
        android:numColumns="auto_fit"
        android:verticalSpacing="10dp"
        android:horizontalSpacing="10dp"
        android:stretchMode="columnWidth"
        android:gravity="center"
    /> 
```

信息

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T11:59:55.527

这个最适合三列..

```
 <GridView
        android:id="@+id/gridview_Gallery"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:columnWidth="65dp"
        android:gravity="center"
        android:horizontalSpacing="6dp"
        android:listSelector="#00000000"
        android:numColumns="3"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:verticalSpacing="-1dp" /> 
```

# java - 如何使用 Java 在 WebDriver 中调用外部 JavaScript

> ID：12247313
> 
> 赞同：1
> 
> 时间：2012-09-03T11:49:49.087
> 
> 标签：java, javascript, webdriver, selenium-webdriver

我可以在 WebDriver（使用 java）中执行 JavaScript，如下所示：

```
WebDriver driver = new FirefoxDriver();
JavascriptExecutor jse = (JavascriptExecutor) driver;
jse.executeScript("some JS code here;"); 
```

我想执行一个外部 JS 文件。如何在 WebDriver 中执行外部 JavaScript（.js 文件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:27:45.157

您应该使用您的语言（在本例中为 Java）提供的文件 I/O 机制将 JavaScript 文件的内容读入 String 变量。然后，您可以将该字符串与 JavascriptExecutor 结合使用。

# javascript - 使用 javascript 和自定义验证器来检查开始日期和结束日期？

> ID：12247314
> 
> 赞同：4
> 
> 时间：2012-09-03T11:49:53.377
> 
> 标签：javascript, asp.net, validation, customvalidator

我正在尝试验证开始日期和结束日期，以便如果用户输入的结束日期早于开始日期，则会引发错误。我正在使用 JavaScript 和自定义验证器执行此操作，但出现运行时错误，提示“CheckDate 未定义”。

我认为这应该不难解决，因为代码看起来不错，我只是想念一些东西。

任何帮助都会很棒。

这是我的 JavaScript，它在脚本标签中，只是没有复制它们

```
function CheckDate(sender, args) {
    if (new date (document.getElementById("txtstartdate").value)
        > new (document.getElementById("TxtFinish").value)) {
        args.IsValid = false;
        return;
    }
    args.IsValid = true;
} 
```

这是我的 FinishDate 控件的验证

```
<asp:CustomValidator ID="CustomValidator29" runat="server" 
ErrorMessage="Finish Date should be greater than the Start Date" ClientValidationFunction="CheckDate"></asp:CustomValidator> 
```

需要更多信息询问:)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:06:08.047

您可以简单地使用 CompareValidator！

```
 <asp:CompareValidator ID="CompareValidator1" runat="server" 
    ControlToCompare="txtStartDate" ControlToValidate="txtEndDate" 
    Display="Static" ErrorMessage="'End Date' must not be earlier than 'From Date'"  Text="*"
    Operator="GreaterThanEqual" SetFocusOnError="True" Type="Date" 
    ValidationGroup="SearchGroup"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:56:40.027

这是我所做的，它完美地验证了。由于我不确定您使用的是哪种控件，所以我只使用了一个基本的文本框。我会输入诸如“1983 年 7 月 21 日 01:15:00”之类的值。

JavaScript：

```
<script type="text/javascript" >

        function CheckDate(sender, args) {

            var startDate = new Date(document.getElementById("txtStartDate").value);

            var finishDate = new Date(document.getElementById("txtFinishDate").value);

            if (startDate > finishDate) {
                args.IsValid = false;
            }
            else {
                args.IsValid = true;
            }
        }

    </script> 
```

HTML：

```
<asp:CustomValidator ID="CustomValidator29" runat="server" 
    ErrorMessage="Finish Date should be greater than the Start Date" 
    ClientValidationFunction="CheckDate" ControlToValidate="txtStartDate">
</asp:CustomValidator>

<asp:TextBox id="txtStartDate" runat="server" />
<asp:TextBox id="txtFinishDate" runat="server" /> 
```

这是一个值和结果表：

txtStartDate：1983 年 7 月 21 日 01:15:00
txtEndDate：1983 年 7 月 25 日 01:15:00
有效：是

txtStartDate：1983 年 7 月 25 日 01:15:00
txtEndDate：1983 年 7 月 21 日 01:15:00
有效：否

txtStartDate：1983 年 7 月 21 日 01:15:00
txtEndDate：1983 年 7 月 21 日 06:15:00
有效：是

txtStartDate：1983 年 7 月 21 日 06:15:00
txtEndDate：1983 年 7 月 21 日 01:15:00
有效：否

# .htaccess - .htaccess，URL 更改但加载内容

> ID：12247320
> 
> 赞同：1
> 
> 时间：2012-09-03T11:50:25.243
> 
> 标签：.htaccess, mod-rewrite, redirect

我遇到了 .htaccess 问题，我成功地重写了 URL，但内容不再加载。

以下是我的 htaccess 文件。

我的目标是我的所有 .html 页面（该网站由 .html 静态页面组成）删除它们的扩展名。但是，我要求将 .html URL 301 重定向到新 URL，这样我的 SEO 就不会受到这些更改的影响。

例子：

*   原文：www.example.co.uk/page.html
*   所需：www.example.co.uk/page/

重要的是原始 URL 会重定向新 URL。

```
Options +FollowSymLinks
RewriteEngine on

# REDIRECT yourdomain.com TO www.yourdomain.com
RewriteCond %{HTTP_HOST} !^www.example.co.uk$ [NC]
RewriteRule ^(.*)$ http://www.example.co.uk/$1 [L,R=301]

RewriteRule (.+)\.html?$ http://www.example.co.uk/$1/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(([^/]*/)*[^/.]+)$ $1.html [L] 
```

我已经尝试了上面的 htaccess，也尝试了下面的变体，但都没有按预期工作。任何帮助将非常感激。

```
Options +FollowSymLinks
RewriteEngine on

# REDIRECT yourdomain.com TO www.yourdomain.com
RewriteCond %{HTTP_HOST} !^www.example.co.uk$ [NC]
RewriteRule ^(.*)$ http://www.example.co.uk/$1 [L,R=301]

RewriteRule (.+)\.html?$ http://www.example.co.uk/$1/ [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:11:18.320

你需要改变两件事。

1.  在重定向后添加此内容以防止重定向循环：

    ```
    RewriteCond %{ENV:REDIRECT_STATUS} 200
    RewriteRule ^ - [L] 
    ```

2.  将最后一条规则更改为：

    ```
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} ^/(.*?)/?$
    RewriteCond %{DOCUMENT_ROOT}/%1\.html -f
    RewriteRule ^ /%1.html [L] 
    ```

# android - 允许在屏幕上的哪个位置放置 admob 广告？

> ID：12247321
> 
> 赞同：-2
> 
> 时间：2012-09-03T11:50:26.913
> 
> 标签：android, admob

定位admob广告有什么规定吗？我知道如果它不可滚动，则每页应该只有一个广告，如果它是可滚动的（一个可见），则最多两个广告，并且不应靠近按钮和类似内容。它是否必须位于底部（或顶部）？例如，它可以定位在屏幕底部或中间 50dp 处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:11:10.937

是的，它可以放置在您想要的任何位置。但是，不建议放在屏幕之间，因为它会妨碍用户体验。

# delphi - CreateProcess 调用返回错误代码 50

> ID：12247327
> 
> 赞同：1
> 
> 时间：2012-09-03T11:50:55.390
> 
> 标签：delphi, delphi-xe2

尝试使用 Createprocess 在给定路径中启动 Windows Explorer，但我不断收到

**系统错误。代码 50。不支持该请求。**

我究竟做错了什么？

```
procedure TfrmProjectManager.OpenFolderinExplorer(const aPath: string);
  function GetWinDir: String;
  var
    Buffer: array[0..MAX_PATH] of Char;
  begin
    GetWindowsDirectory(Buffer, SizeOf(Buffer));
    SetString(Result, Buffer, StrLen(Buffer));
  end;

var
  strCmdLine    : String;
  fStartInfo    : TStartupInfo;
  fProcessInfo  : TProcessInformation;

begin

  try
    if sysutils.DirectoryExists(aPath) or 
       (MessageDlg('Folder [%s] not found. Create it?', mtConfirmation, mbYesNo, 0)=mrYes) then
    begin
      sysutils.ForceDirectories(aPath);
      FillChar(fStartInfo,sizeof(fStartInfo),0);
      FillChar(fPRocessInfo, Sizeof(fProcessInfo),0);

      fStartInfo.cb:=sizeof(fStartInfo);
      fStartInfo.lpReserved := nil;
      fStartInfo.lpDesktop := nil;
      fStartInfo.lpTitle := nil;
      fStartInfo.dwFlags := STARTF_USESHOWWINDOW ;
      fStartInfo.wShowWindow := SW_SHOW;
      fStartInfo.cbReserved2 := 0;
      fStartInfo.lpReserved2 := nil;

      strCmdLine := '"' + GetWinDir + '\explorer.exe"';

    if not CreateProcess(nil,PChar(strCmdLine),nil,nil,False, 0,nil,PChar(aPath),fStartInfo,fProcessInfo) then
     RaiseLastOSError;

  end

  except
    on E:TObject do
      if not IsAbortException(E) then
        raise;
  end;
end; 
```

我在 CreateProcess 中尝试了各种参数组合，但似乎无法找到正确的组合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:01:01.893

我会说你不应该`CreateProcess`在这里使用。而不是调试你的`CreateProcess`，我会为你提供我认为在文件夹中打开 shell 视图的正确方法。打电话`ShellExecute`。

```
ShellExecute(0, '', PChar(aPath), '', '', SW_SHOWNORMAL); 
```

这样，您就可以让 shell 决定向用户显示文件夹内容的适当方式。

# python - plone中atreal.richfile.preview的自定义

> ID：12247329
> 
> 赞同：0
> 
> 时间：2012-09-03T11:51:01.490
> 
> 标签：python, plone, zope

Wrt plone 中 atreal.richfile.preview 的自定义，对于文件预览，有一个名为 viewlet.pt 的模板，它包含一个 TAL 语句，显示控件以激活/更新、刷新和折叠 Actions 菜单：。完整的代码片段：

```
<dl class="richfile portlet"
    tal:condition="view/available"
    tal:attributes="id view/plugin_id"
    i18n:domain="atreal.richfile.preview">

    <dt tal:attributes="id string:${view/plugin_id}Header" class="rfheader portletHeader">
        <span class="portletTopLeft"></span>
        <!--tal:block tal:replace="structure view/controls" -->
        <span class="title" style="font-weight:bold"
            i18n:translate="">
            Preview 
        </span>

        <span class="portletTopRight"> <span>
    </dt>

   <dd tal:content="structure view/getPreview" >

        <!--Your specific code here-->        
        <IFRAME src="http://somesite.com" 
            tal:attributes="src string:${here/absolute_url}/rfpreview"
            ondragstart="false" onselectstart="false"
            width="100%" height="400" scrolling="auto" frameborder="0"> </IFRAME>

        <!--End of specific code-->

    </dd>

</dl> 
```

如果我删除`<tal:block tal:replace="structure view/controls" >`，我可以正确查看 doc、xls、odt 文件格式。但是对于**pdf**文件，所有的内容都是混乱的。如果我保持上述声明不变，当我单击操作控件激活/更新或刷新并正确查看时，它会打开另一个窗口，但它会下载 doc xls 和其他文件（由于超链接，这不是预期的）

还要注意在更改默认`<dd>`属性后 `<dd tal:content="structure view/getPreview">`允许查看没有背景图像的 pdf 文件。

如果语句保持原样，则会打开一个新窗口，其中有用于缩放、打印和另存为的图标。我希望在此窗口中禁用这些。

我还希望阻止从这个新窗口中复制粘贴。（我可以在 viewlet 中使用 javascript 禁用复制粘贴）但它不会在新窗口中发生。我无法检测到这个新窗口的模板。

**主要目的是防止从 plone 站点复制/粘贴/下载任何文件，但应允许文件预览。**

任何人都可以正确指导 ZMI 中的确切位置以及如何自定义它吗？克隆 4.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:53:51.963

解决此问题的另一种方法是通过自定义模板并在[如何设置 TAL 条件以检查文件类型并相应地在 Plone 4.1 中呈现模板中可用](https://stackoverflow.com/questions/12260688/how-to-set-tal-condition-to-check-the-file-type-and-accordingly-render-the-templ/12261071#12261071)

# ios - 将图像加载到 UITableView 中的自定义单元格时发生内存泄漏

> ID：12247335
> 
> 赞同：0
> 
> 时间：2012-09-03T11:51:32.723
> 
> 标签：ios, uitableview, memory-leaks, uiimageview, custom-cell

在我的 iPhone 应用程序中，有一个带有自定义单元格的 UITableView。其中包含 UILabels 和 UIImageViews。但是当我将图像分配给图像视图时出现内存泄漏。这是代码。泄漏在 cellForRowAtIndexPath 方法中：我已经提到了泄漏百分比。请检查代码，这里出了什么问题？请帮忙。

```
 //  UIMenuItemCell.h
            @class UIMenuitemImage;
            @interface UIMenuItemCell : UITableViewCell{
                UILabel *cellItemName;
                UIImageView *cellitemImage;
            }
            @property (nonatomic, retain) UILabel *cellItemName;
            @property (nonatomic, retain) UIImageView *cellitemImage;

        //  UIMenuItemCell.m

        #import "UIMenuItemCell.h"

        @implementation UIMenuItemCell
        @synthesize cellItemName, cellitemImage, cellItemButton, cellItemProgress;

        - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
        {
            self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
            if (self) {
                // Initialization code
        //        cellitemImage = [[UIMenuitemImage alloc]init];
            }
            return self;
        }

        - (void)setSelected:(BOOL)selected animated:(BOOL)animated  
        {
            [super setSelected:selected animated:animated];

            // Configure the view for the selected state
        }

    //  MenuScreenVC.m
    - (UIMenuItemCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect CellFrame = CGRectMake(0, 0, 150, 60);
    CGRect Label1Frame = CGRectMake(20, 23, 98, 30);
    CGRect imgFrame = CGRectMake(20, 48, 110, 123);
    CGRect btnFrame = CGRectMake(25, 136, 100, 30);
    CGRect progressFrame = CGRectMake(25, 140, 100, 21);

    UILabel *lblTemp;
    UIImageView *itemImg;
    UIButton *itemBtn;
    UIProgressView *itemProgView;

    UIMenuItemCell *cell = [[[UIMenuItemCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    cell.frame = CellFrame;

    //Initialize Label with tag 1\.  
    lblTemp = [[UILabel alloc] initWithFrame:Label1Frame];
    lblTemp.tag = 1;
    lblTemp.textColor=[UIColor colorWithRed:139.0f/255.0f green:69.0f/255.0f blue:19.0f/255.0f alpha:1.0f];
    lblTemp.textAlignment = UITextAlignmentCenter;
    lblTemp.backgroundColor = [UIColor clearColor];
    lblTemp.font = [UIFont systemFontOfSize:13.0];
    [cell.contentView addSubview:lblTemp];
    [lblTemp release];

    //Initialize ImageView
    itemImg = [[UIImageView alloc]initWithFrame:imgFrame];
    itemImg.tag = 2;
    [cell.contentView addSubview:itemImg];
    [itemImg release];

    //Initialize Button
    itemBtn = [[UIButton alloc]initWithFrame:btnFrame];
    itemBtn.frame = btnFrame;
    itemBtn.tag = 3;
    itemBtn.titleLabel.textColor = [UIColor blueColor];
    itemBtn.titleLabel.font = [UIFont systemFontOfSize:9.0];
    [cell.contentView addSubview:itemBtn];
    [itemBtn release];

    //Initialize ProgressView
    itemProgView = [[CustomProgressView alloc]initWithFrame:progressFrame];
    itemProgView.tag = 4;
    //[cell.contentView addSubview:itemProgView];
    [itemProgView release];

    return cell;
}
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d", indexPath.row];

    UIMenuItemCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(cell == nil){
        cell = [self getCellContentView:CellIdentifier];

        cell.transform = CGAffineTransformMakeRotation(M_PI_2);
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        cell.cellItemName = (UILabel *)[cell viewWithTag:1];
        cell.cellitemImage = (UIImageView *)[cell viewWithTag:2];
        cell.cellItemButton = (UIButton *)[cell viewWithTag:3];
        cell.cellItemProgress = (UIProgressView *)[cell viewWithTag:4];

        DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:indexPath.row];

        __autoreleasing NSString *imageLocalFilePath = nil;
        if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"NotAvailable"]) {
            cell.cellItemProgress.hidden = YES;
            cell.cellItemButton.hidden = NO;
            imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalNotAvailPath objectAtIndex:indexPath.row]];
            NSString *date = [self changeDateFormat:itemObj.itemReleaseDate];          
            [cell.cellItemButton setTitle:date forState:UIControlStateNormal]; 
            cell.cellItemButton.userInteractionEnabled = NO;
            cell.userInteractionEnabled = NO;
            [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"not_available_bttn_bck_img"] forState:UIControlStateNormal];
        }else if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Available"]){
            cell.cellItemButton.userInteractionEnabled = YES;
            cell.userInteractionEnabled = YES;
            cell.cellItemProgress.hidden = YES;
            [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_normal"] forState:UIControlStateNormal];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_pressed"] forState:UIControlStateHighlighted];
            [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
            [cell.cellItemButton addTarget:self action:@selector(confirmationAlert:) forControlEvents:UIControlEventTouchUpInside];
            imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalAvailPath objectAtIndex:indexPath.row]];
        }else if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Active"]) {
            cell.cellItemButton.userInteractionEnabled = YES;
            cell.userInteractionEnabled = YES;
            cell.cellItemProgress.hidden = YES;
            [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
            [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"active_bttn_img_normal"] forState:UIControlStateNormal];
            [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
            [cell.cellItemButton addTarget:self action:@selector(alert) forControlEvents:UIControlEventTouchUpInside];
            imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalAvailPath objectAtIndex:indexPath.row]];
        }else if([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Downloading"]) {
            imageLocalFilePath = [NSString stringWithFormat:@"%@",[tempItemLocalAvailPath objectAtIndex:indexPath.row]];
            [cell.contentView addSubview:myprogressView];
            cell.cellItemButton.hidden = YES;
        }
        if ([imageLocalFilePath isEqualToString:@""]) {
            [cell.cellitemImage setImage:[UIImage imageNamed:@"item01.png"]];
        }else {
            [cell.cellitemImage setImage:[UIImage imageWithContentsOfFile:imageLocalFilePath]];
        }        
        cell.cellItemName.text = [NSString stringWithFormat:@"%@",[tempItemNameArray objectAtIndex:indexPath.row]]; 

        for (UIProgressView *prog in cell.contentView.subviews) {
            if ([prog isKindOfClass:[UIProgressView class]]){
                if (prog.progress == 1) {
                    [prog removeFromSuperview];
                    cell.cellItemButton.hidden = NO;
                    DataBaseClass *itemObj = [appDelegate.itemArray objectAtIndex:indexPath.row];
                    NSString *imageLocalFilePath = nil;
                    if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Available"]){
                        cell.cellItemButton.userInteractionEnabled = YES;
                        cell.userInteractionEnabled = YES;
                        cell.cellItemProgress.hidden = YES;
                        [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
                        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_normal"] forState:UIControlStateNormal];
                        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"available_bttn_img_pressed"] forState:UIControlStateHighlighted];
                        [cell.cellItemButton addTarget:self action:@selector(confirmationAlert:) forControlEvents:UIControlEventTouchUpInside];
                    }else if ([[tempitemStatusArray objectAtIndex:indexPath.row] isEqualToString:@"Active"]) {
                        cell.cellItemButton.userInteractionEnabled = YES;
                        cell.userInteractionEnabled = YES;
                        cell.cellItemProgress.hidden = YES;
                        [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
                        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"active_bttn_img_normal"] forState:UIControlStateNormal];
                        [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"active_bttn_img_normal"] forState:UIControlStateHighlighted];
                        [cell.cellItemButton addTarget:self action:@selector(alert) forControlEvents:UIControlEventTouchUpInside];
                    }

                    imageLocalFilePath = [NSString stringWithFormat:@"%@",itemObj.availableLocalIconPath];
                    if ([imageLocalFilePath isEqualToString:@""]) {
                        [cell.cellitemImage setImage:[UIImage imageNamed:@"item01.png"]];
                    }else {
                        [cell.cellitemImage setImage:[UIImage imageWithContentsOfFile:imageLocalFilePath]];
                    }
                    cell.cellItemName.text = [NSString stringWithFormat:@"%@",[tempItemNameArray objectAtIndex:indexPath.row]];

                    [cell.contentView reloadInputViews];
                }
            }
        }

    }else {
        for (UIProgressView *prog in cell.contentView.subviews) {
            if ([prog isKindOfClass:[UIProgressView class]]){
                if (prog.progress == 1) {
                    [prog removeFromSuperview];
                    cell.cellItemButton.hidden = NO;
                    cell.cellItemButton.userInteractionEnabled = YES;
                    cell.userInteractionEnabled = YES;
                    [cell.cellItemButton setTitle:@"" forState:UIControlStateNormal];
                    [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"active_bttn_img_normal"] forState:UIControlStateNormal];
                    [cell.cellItemButton setBackgroundImage:[UIImage imageNamed:@"active_bttn_img_normal"] forState:UIControlStateHighlighted];
                    [cell.cellItemButton removeTarget:nil action:NULL forControlEvents:UIControlEventAllEvents];
                    [cell.cellItemButton addTarget:self action:@selector(alert) forControlEvents:UIControlEventTouchUpInside];
                }
            }
        }        
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T11:58:46.947

在你的方法中

```
- (UIMenuItemCell *) getCellContentView:(NSString *)cellIdentifier 
```

利用：

```
UIMenuItemCell *cell = [[[UIMenuItemCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease]; 
```

* * *

编辑以回应评论：

释放 iVar 的正确方法是在 dealloc 方法中。如果它没有被调用，这意味着你的 UIMenuItemCells 没有被释放。这可能是因为您的实施方式；您正在为表格视图中的每一行创建一个可重复使用的单元格。我认为，如果您将单元格标记为重用，则在释放表格视图之前它不会被释放。

您可以通过查看释放表视图时是否释放所有内存来测试这一点（如果这发生在您的应用程序中）。这意味着您实际上没有泄漏，只是您的应用程序使用了大量内存（很可能是不必要的）。您还可以测试当您将已经创建的行滚动回屏幕时内存是否增加，因为在这种情况下，我认为您将重用您的单元格，因此内存不应该增加。您还可以尝试使用 nil 初始化表格视图单元格作为单元格标识符，以便在滚动离开屏幕时释放它们。

您可能应该尝试重新编写代码，以便您确实重用您的单元格。否则滚动很可能会非常不稳定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T09:52:29.773

我遇到了类似的问题，终于解决了。

因为您的表格单元格稍后会被重用，

所以只需在将子视图添加到单元格之前调用 removeFromSuperview 。

# javascript - 如何在 tinymce 编辑器中启用字体系列和颜色选项？

> ID：12247339
> 
> 赞同：5
> 
> 时间：2012-09-03T11:51:42.457
> 
> 标签：javascript, fonts, tinymce

我在我的 cms 上使用 tinymce 编辑器，它有一个普通的文本工具栏，其中有粗体、斜体、下划线和对齐选项，但它没有字体系列更改选项，甚至没有颜色更改。如何启用它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-03T12:19:43.010

我已经这样做了

```
tinyMCE.init({
theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
    theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
)}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-19T11:24:57.740

对于升级版本，这里是全功能示例

```
 tinymce.init({
    selector: 'textarea',
    height: 500,
    theme: 'modern',
    plugins: ['advlist autolink lists link image charmap print preview hr anchor pagebreak',
    'searchreplace wordcount visualblocks visualchars code fullscreen',
    'insertdatetime media nonbreaking save table contextmenu directionality',
    'emoticons template paste textcolor colorpicker textpattern imagetools'
    ],
   toolbar1: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image',
   toolbar2: 'print preview media | forecolor backcolor emoticons',
   image_advtab: true,
   templates: [
   { title: 'Test template 1', content: 'Test 1' },
   { title: 'Test template 2', content: 'Test 2' }
   ],
   content_css: ['//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css',
    '//www.tinymce.com/css/codepen.min.css'
   ]
   }); 
```

如需更多参考，请访问[https://www.tinymce.com/docs/demo/full-featured/](https://www.tinymce.com/docs/demo/full-featured/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-03T08:50:27.743

在我的 TinyMCE 4.0.10 旧版本中，除了您的其他初始化工具栏和插件选项之外，还向 tinymce.init 添加了字体和颜色控件：

```
toolbar: "styleselect fontselect fontsizeselect | forecolor backcolor",
plugins: "textcolor" 
```

# c# - 是否有任何能够添加代码片段的免费 ASP.NET MVC 富文本编辑器？

> ID：12247343
> 
> 赞同：0
> 
> 时间：2012-09-03T11:52:01.717
> 
> 标签：c#, asp.net-mvc, text-editor, code-snippets

我有一个 ASP.NET MVC 应用程序，我需要一个富文本编辑器，它允许用户为 HTML、JavaScript 和 C# 代码添加代码片段。

请记住 Visual Studio 如何根据缩进和颜色格式化此类代码。它不必与 Visual Studio 所做的完全一样，但我的意思只是让用户更轻松地阅读此类代码。

类似于富文本编辑器的语法荧光笔。

有没有我可以使用的免费组件？

我为 CKEditor 找到了这个 Rails 插件，但它不是免费的：[https ://github.com/galetahub/rails-ckeditor](https://github.com/galetahub/rails-ckeditor)

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:07:27.787

您当然可以使用 ASP.Net Ajax 控件工具包 HTML 编辑器或第三方工具。

以下是您可能已经知道的 HTML 编辑器的链接；

*   [http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/HTMLEditor/HTMLEditor.aspx](http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/HTMLEditor/HTMLEditor.aspx)
*   [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/HTMLEditorExtender/HTMLEditorExtender.aspx)
*   [http://mvccontroltoolkit.codeplex.com/](http://mvccontroltoolkit.codeplex.com/)
*   [http://richtexteditor.com/mvc/](http://richtexteditor.com/mvc/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:41:42.137

快速谷歌搜索，CKEditor 的 MVC 助手： [http ://www.andrewbarber.com/post/CKEditor-Html-Helpers-ASPNET-MVC-Razor-Views.aspx](http://www.andrewbarber.com/post/CKEditor-Html-Helpers-ASPNET-MVC-Razor-Views.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T12:00:17.410

[http://www.obout.com](http://www.obout.com)对非商业网站是免费的。

# xslt - xsl：变量高级选择

> ID：12247351
> 
> 赞同：1
> 
> 时间：2012-09-03T11:52:47.830
> 
> 标签：xslt

我有几个这样的 XML 元素：

```
 <testcase starttime="2012-09-03 10:41:29" timestamp=" 622.922000">
    <testlogfile file="" />
    <teststep timestamp=" 622.944000" level="0" type="user" ident="1" result="pass">Do something</teststep>
    <teststep timestamp=" 622.965000" level="0" type="user" ident="2" result="pass">Do something</teststep>
    <teststep timestamp=" 622.986000" level="0" type="user" ident="3" result="pass">Do something</teststep>
    <verdict time="2012-09-03 10:41:30" timestamp=" 623.428000" endtime="2012-09-03 10:41:30" endtimestamp=" 623.428000" result="pass" />
    <title>Title goes here</title>
    <ident>TC100_06</ident>
    <description>description goes here</description>
    <extendedinfo type="test case status">Approved</extendedinfo>
    <extendedinfo type="traceability">some requirement</extendedinfo>
    <extendedinfo type="vehicle mode">Hibernate, Parked, Living, Accessory</extendedinfo>
    <extendedinfo type="environment">Station with ATB</extendedinfo>
    <extendedinfo type="variants">veh variants</extendedinfo>
  </testcase> 
```

我想做一个 xsl:variable 选择查询来按“身份”和“测试用例状态”计算测试用例。我能够实现 2 个单独的查询，但我不知道如何将它们都加入：

```
<xsl:variable name="totalTc" select="count(//testcase[./ident!='text' and ./ident!='obsolete' and ./ident!='rtm' and ./ident!='status overview' and ./ident!='statistics'])"/>
<xsl:variable name="approvedTc" select="count(//extendedinfo[@type='test case status' and text()='Approved'])"/> 
```

我希望加入的查询看起来像这样，但我无法查询属性：

```
<xsl:variable name="totalTc" select="count(//testcase[./ident!='text' and ./ident!='obsolete' and ./ident!='rtm' and ./ident!='status overview' and ./ident!='statistics' and ./extendedinfo=='Approved'])"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:10:36.923

怎么样...

```
<xsl:variable name="totalTc" select="count(
  //testcase[
     ident!='text' and
     ident!='obsolete' and
     ident!='rtm' and
     ident!='status overview' and
     ident!='statistics' and
     extendedinfo[
         @type='test case status' and
         .='Approved']
   ])"/> 
```

## 选项

请注意，在 XSLT 2.0 中，您可以改为使用：

```
<xsl:variable name="totalTc" select="count(
  //testcase[
     not (ident in ('text','obsolete','rtm','status overview','statistics')) and
     extendedinfo[@type='test case status' and .='Approved']
   ])"/> 
```

此外，而不是形式的表达......

```
testcase[ A and B] 
```

...可以改为写....

```
testcase[A][B] 
```

前一种情况可能会稍微高效一些，但我认为个人风格也应该考虑到你选择的表达方式。因此，例如，也可以将...

```
<xsl:variable name="totalTc" select="count(//testcase
   [not (ident in ('text','obsolete','rtm','status overview','statistics'))]
   [extendedinfo[@type='test case status'][.='Approved']])"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:52:09.907

**使用**：

```
 count(
   //testcase
      [extendedinfo[@type='test case status']='Approved'
     and
       not(teststep
            [contains('|text|obsolete|rtm|status overview|statistics',
                       concat('|',@ident,'|')
                       )
           ]
         )
      ]
       ) 
```

# java - @ReplaceWithMock 不使用 Springmockito-annotations 进行模拟

> ID：12247360
> 
> 赞同：4
> 
> 时间：2012-09-03T11:53:26.140
> 
> 标签：java, spring, junit, mockito, springmockito

我有一门课，我正在尝试单元测试。我正在尝试使用 Mockito 对其进行测试，并使用 Springockito 和 Springockito-annotations 来解决使用 mockito 的弹簧注入。

```
@ContextConfiguration(loader = SpringockitoContextLoader.class,
        locations = {"classpath:testApplication-context-EU.xml"})
public class RelatedSearchToHotUrlProcessorTest extends AbstractJUnit4SpringContextTests {

    @Autowired
    RelatedSearchToHotUrlProcessor processor;

    @ReplaceWithMock
    private RestOperations restTemplate;

    @Test
    public void testGetCategoryFromIdWithNoStoredAlias() {
        Taxonomy mockTaxonomy = mock(Taxonomy.class, RETURNS_DEEP_STUBS);
        GraphType.Node mockNode = mock(GraphType.Node.class);
        when(restTemplate.getForObject(anyString(), eq(Taxonomy.class))).thenReturn(mockTaxonomy);
        when(mockTaxonomy
                .getRev()
                .get(0)
                .getCountry()
                .get(0)
                .getGraph()
                .getNodeOrAtom()
                .get(0)).thenReturn(mockNode);
        when(mockNode.getAlias()).thenReturn("mockalias");
        String categoryAlias = processor.getCategoryAliasFromId(13130L);
        assertEquals("mockalias", categoryAlias);
    }
} 
```

如果我删除`@ReplaceWithMock`和`private RestOperations restTemplate`行，那么它会进行正确的调用，并且可以验证该值是否正确。但是，我想在处理器内部模拟 RestOperations 对象，但使用 @ReplaceWithMock 会使 restTemplate 变量为空，导致它失败。我无法弄清楚如何隔离这个成员并模拟它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T12:40:23.960

遇到了类似的问题，我发现用 @WrapWithSpy 或 @ReplaceWithMock 注释是不够的。也就是说测试类中的字段为空。根据 Arasu 的评论，除了 springockito 注释之外添加 @Autowired 注释解决了这个问题 - 虽然它看起来确实很奇怪......

```
@Autowired
@WrapWithSpy
private SomeBean someBean; 
```

# objective-c - Objective-C 文字语法中未装箱的 BOOL 给出错误

> ID：12247364
> 
> 赞同：5
> 
> 时间：2012-09-03T11:53:36.793
> 
> 标签：objective-c, xcode4, objective-c-literals

我只是在试验作为 Xcode 4.4 的一部分引入的新的 Objective-C 文字语法。

字典、整数和数组都可以正常工作，但我在`BOOL`s 工作时遇到了问题。例如：

```
NSDictionary *myDict = @{
    @"foo": @"bar",
    @"test": @YES
}; 
```

在布尔值的行上给我***“意外的类型名称'BOOL'：预期的表达式”***。

但是，`@(YES)`，`@1`，`@true`一切正常。

这篇文章：[http](http://clang.llvm.org/docs/ObjectiveCLiterals.html) ://clang.llvm.org/docs/ObjectiveCLiterals.html建议`@YES`应该可行。

我也在自己的线路上尝试过：`NSNumber *myNum = @YES;`并得到同样的错误。

漏洞？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:00:18.353

这不是一个错误，这是因为苹果目前有

```
#define YES (BOOL)1
#define NO  (BOOL)0 
```

代替

```
#define YES ((BOOL)1)
#define NO  ((BOOL)0) 
```

这是在最新的 SDK 中修复的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:56:25.370

BOOL 文字依赖于定义为 iOS 或 Mac SDK 一部分的新语言关键字，因此较旧的 SDK（包括 iOS 5.1）没有它，因此必须使用装箱符号 - 即`@(YES)`.

正如我在上面的评论中提到的，我的猜测是对象下标也是如此。

（使用来源回答我自己的问题：http: [//jamesdempsey.net/2012/07/30/moving-to-new-objective-c-literals/](http://jamesdempsey.net/2012/07/30/moving-to-new-objective-c-literals/)）

# javascript - Javascript window.open() 函数在没有弹出窗口阻止程序的情况下打开链接

> ID：12247368
> 
> 赞同：3
> 
> 时间：2012-09-03T11:54:00.117
> 
> 标签：javascript

Javascript`window.open()`函数在没有弹出窗口阻止程序的情况下打开链接，我想从 javascript`window.open()`函数打开一些链接，但它在 firefox、chrome、safari 上被阻止。

如何通过 javascript 代码取消阻止弹出窗口，以便它在新选项卡中打开

我的代码是：

```
 function GoUrl(id) {
        var string = 'select#' + id + ' option:selected';
        var value = $(string).val(); 
        if (value != "links") {enter code here
           window.open(value, '_blank'); 
            window.focus();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:22:00.650

刚刚从另一个线程中找到了答案，以为我与你们分享了这个，绕过弹出窗口阻止程序的**唯一方法是通过****onclick**事件，我遇到的问题是我有**onmousedown**，我只是简单地将它更改为点击，然后繁荣！立即工作！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T11:57:16.823

您应该从用户事件启动您的功能。即：onclick 或 href：

```
 <a href="javascript:window.open('http://google.com');return false;"> open 2 </a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T11:57:29.087

你不能强迫它打开一个新标签。该功能完全由浏览器控制。

为避免您的窗口被阻塞，请在任何用户事件（如`onclick`）上打开窗口。

# android - iOS 上的丰富图表 - BB - Android 具有相似的外观和感觉

> ID：12247370
> 
> 赞同：5
> 
> 时间：2012-09-03T11:54:09.197
> 
> 标签：android, iphone, blackberry, charts

我正在寻找可用于 BB(OS >=5)、Android(OS >= 2.3) 和 IOS(OS >= 4) 的图表库。我有两个要求

1.  图表应该很有吸引力（不像画布绘制的那样基本）
2.  外观和感觉在所有平台上都应该相同。

我尝试了许多基于 Web 的框架来生成图表，但它们大多支持更高的操作系统版本，因为它们使用 HTML5 和 javascript。我探索过，

1.  高图
2.  煎茶图表
3.  融合图
4.  弗洛特
5.  还有很多...

但是它们都不支持 BB OS 5。我搜索了支持 BB OS 5 及更高版本的本地图表 API，但没有找到任何东西。无论我发现什么，它们都非常基本，外观不吸引人。此外，它应该兼容触摸并启用缩放平移。（比如向下钻取等），所以我可以操纵它的事件并在图表上显示效果。如果我缺少任何可以使用的图表或框架，有什么好的建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:54:32.850

我不确定这是否能解决您的问题，但“Google Chart Tools”值得一试。在此处查看有关 API 的更多详细信息。

[https://developers.google.com/chart/](https://developers.google.com/chart/)

它支持以下图表格式

1.  条形图 箱形图
2.  烛台图
3.  复合图表
4.  Google-O-Meter 图表
5.  GraphViz 图表
6.  饼状图
7.  雷达图
8.  散点图
9.  维恩图

下面使用 Google Chart API 的黑莓示例

[http://code.google.com/p/blackberry-google-chart-api/](http://code.google.com/p/blackberry-google-chart-api/)

关于操纵事件和在图表上显示效果的其他问题，在这里处理起来有点棘手。您必须花费大量时间来编写自定义 API，以便在从 google 下载的聊天中播放不同的事件。您必须使用所有本机 API 进行事件处理。

但是，如果它不能满足您的目的，那么再次编写您自己的库。但我的经验是没有这样的库可以根据您的要求提供更多定制的图表。

**EDIT-1** 下面的链接提供了在原生黑莓中自定义您自己的图表的基本思路

[http://www.codeproject.com/Articles/37205/Creating-a-XY-Chart-Plot-as-a-BlackBerry-Custom-Fi](http://www.codeproject.com/Articles/37205/Creating-a-XY-Chart-Plot-as-a-BlackBerry-Custom-Fi)

祝你好运！快乐编码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T05:56:53.203

我不确定是否有任何一个 可用于所有平台的**原生开源库，它为您提供****相同的外观和感觉，除非** 您对所有平台使用开放的 Google 图表。

如果你想让它一样，你应该自定义每个库。

这是一些很好的开源库

**安卓：**

[图表引擎](http://code.google.com/p/achartengine/)

支持大范围的二维图表，如折线图、面积图、散点图、时间图、条形图、饼图、气泡图、圆环图、范围（高-低）条形图、表盘图/仪表、组合（任意组合线、三次线、散点图、条形图、范围条形图、气泡）图表三次折线图。

**IOS：**

[核心情节](http://code.google.com/p/core-plot/feeds)

它可以像 chart 引擎一样定制，具有相同的外观和感觉。

**黑莓：**

黑莓图表没有如此**丰富的**库，但您可以设法使用一些库（老实说我不是它的忠实粉丝），如 [aiCharts](http://www.artfulbits.com/products/blackberry/aicharts.aspx)或使用一些 J2ME 库来呈现图形。像 [Tazzix](http://tazzix.com/wp/2004/03/02/j2me-chart-graph-api-v09/)，[MIDP2.0](http://www.beanizer.org/site/index.php/en/Software/J2me-ChartComponent-ver-1.5.html)但似乎它们非常基础，使用那些你不能像 iphone 和 android 一样自定义你的应用程序，除非你对**openGl**有很好的表面渲染知识来自定义你的应用程序（这太忙了，而且耗时的 ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:54:45.477

也许你应该试试`AFreeChart`。它是为数不多的`Jfreechart`用于 Android 的 swing 端口之一。在此查看项目和[此](http://code.google.com/p/afreechart/)[链接](http://afreechart.googlecode.com/svn/doc/screenshot/index.html)中的一些屏幕截图。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T05:44:46.560

IOS

最常用的一个是核心情节。[http://code.google.com/p/core-plot/](http://code.google.com/p/core-plot/)

对于安卓。

[AChartEngine](http://code.google.com/p/achartengine/)是一个用于 Android 应用程序的图表库。它目前支持以下图表类型：

折线图、面积图、散点图、时间图、条形图、饼图、气泡图、圆环图、范围（高-低）条形图、刻度盘/仪表、组合（折线、三次线、散点的任意组合，条，范围条，气泡）图表，三次折线图，

对于BB； [http://amcharts.com/、http://datamob.org/、http://www.blackberryforums.com/developer-forum/253-useful-links-new-mobile-programmers-blackberry-sdk.html](http://amcharts.com/) _ [_](http://datamob.org/) _ [_](http://www.blackberryforums.com/developer-forum/253-useful-links-new-mobile-programmers-blackberry-sdk.html)

# java - Java中的花式循环

> ID：12247372
> 
> 赞同：1
> 
> 时间：2012-09-03T11:54:34.813
> 
> 标签：java

我有一个问题，其中我有两个字符串，其中一个字符串的长度只有在执行我的函数时才会知道。我想编写我的函数，以便它需要这两个刺，并根据哪个更长，计算一个最终字符串如下 -

```
finalString = longerStringChars1AND2
   + shorterStringChar1 
   + longerStringChars3and4 
   + shorterStringChar2 
   + longerStringChars5AND6 
```

...依此类推，直到较短的字符串结束。

一旦较短的字符串结束，我想将较长字符串的剩余字符附加到最终字符串，然后退出。我已经写了一些代码，但是我喜欢的循环太多了。有什么建议么？

这是我写的代码 - 非常基本 - public static byte [] generateStringToConvert(String a, String b){ （字符串 b 的长度总是已知为 14。）

```
 StringBuffer stringToConvert = new StringBuffer(); 

    int longer = (a.length()>14) ? a.length() : 14;
    int shorter = (longer > 14) ? 14 : a.length();

    int iteratorForLonger = 0;
    int iteratorForShorter = 0;
            while(iteratorForLonger < longer) {
                int count = 2;
                while(count>0){
                    stringToConvert.append(b.charAt(iteratorForLonger));

                    iteratorForLonger++;
                    count--; 
                    }

             if(iteratorForShorter < shorter && iteratorForLonger >= longer){
                 iteratorForLonger = 0;
             }
             if(iteratorForShorter<shorter){
                 stringToConvert.append(a.charAt(iteratorForShorter));
                 iteratorForShorter++;
             }
             else{
                 break;
             }

            }
    if(stringToConvert.length()<32 | iteratorForLonger<b.length()){
        String remainingString = b.substring(iteratorForLonger);
        stringToConvert.append(remainingString);
    }
    System.out.println(stringToConvert);
    return stringToConvert.toString().getBytes();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:42:18.007

您可以使用`StringBuilder`来实现这一点。请在下面找到源代码。

```
 public static void main(String[] args) throws InterruptedException {

    int MAX_ALLOWED_LENGTH = 14;
    String str1 = "yyyyyyyyyyyyyyyy";
    String str2 = "xxxxxx";

    StringBuilder builder = new StringBuilder(MAX_ALLOWED_LENGTH);
    builder.append(str1);
    char[] shortChar = str2.toCharArray();
    int index = 2;
    for (int charCount = 0; charCount < shortChar.length;) {
        if (index < builder.length()) {
            // insert 1 character from short string to long string
            builder.insert(index, shortChar, charCount, 1);
        }
        // 2+1 as insertion index is increased after after insertion
        index = index + 3;
        charCount = charCount + 1;
    }
    String trimmedString = builder.substring(0, MAX_ALLOWED_LENGTH);
    System.out.println(trimmedString);

} 
```

输出

```
 yyxyyxyyxyyxyy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:27:58.103

```
String one = "longwordorsomething";
String two = "short";

String shortString = "";
String longString = "";

if(one.length() > two.length()) {
    shortString = two;
    longString = one;
} else {
    shortString = one;
    longString = two;
}

StringBuilder newString = new StringBuilder();

int j = 0;

for(int i = 0; i < shortString.length(); i++) {
    if((j + 2) < longString.length()) {
        newString.append(longString.substring(j, j + 2));
        j += 2;
    }
    newString.append(shortString.substring(i, i + 1));
}

// Append last part
newString.append(longString.substring(j));  
System.out.println(newString); 
```

# echo - php 500 回显错误

> ID：12247375
> 
> 赞同：0
> 
> 时间：2012-09-03T11:54:39.383
> 
> 标签：echo

我总是在这条线上遇到 500 内部服务器错误：

```
echo "<ul><li class='active'><a href='".substr($dir, 3)."/".$file."'><img src='".substr($dir, 3)."/"."small_".$file"' alt='small_".$file"'/></a></li></ul>"; 
```

那里出了什么问题。我在 Ubuntu VPS 上，php5.32 和 apache2 是最新的，一切都设置正确（我认为是这样）。非常感谢你的帮助！问候，吉米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:01:17.150

尝试这个 -

```
 echo "<ul><li class='active'><a href='".substr($dir, 3)."/".$file."'><img src='".substr($dir, 3)."/"."small_".$file."' alt='small_".$file."'/></a></li></ul>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:58:48.463

**维基引用：**

> 500 - 通用错误消息，当没有更具体的消息适合时给出

你没有一个`.`after `$file`in`img`和`alt`。尝试这个：

```
echo "<ul><li class='active'><a href='".substr($dir, 3)."/".$file."'><img src='".substr($dir, 3)."/"."small_".$file."' alt='small_".$file."'/></a></li></ul>"; 
```

# html - 离线访问 - SQLite 或索引数据库？

> ID：12247380
> 
> 赞同：28
> 
> 时间：2012-09-03T11:55:10.040
> 
> 标签：html, sqlite, local-storage, indexeddb

我正处于开发应用程序的研发阶段，具有以下关键要求：

*   HTML5 [Web 应用程序](http://en.wikipedia.org/wiki/Web_application)- 也将有一个混合版本
*   当没有 Internet 连接时，表单数据将存储在本地

由于配额限制，我无法使用网络存储 - 我正在比较[SQLite](http://en.wikipedia.org/wiki/SQLite)和[Indexed DB](https://en.wikipedia.org/wiki/Indexed_Database_API)。

*   SQLite 似乎是最合适的，但它已被弃用
*   索引数据库是一个不错的选择，但不支持[Safari](http://en.wikipedia.org/wiki/Safari_%28web_browser%29) - 未来应该在 iPad 和 Android 设备上运行混合应用程序。

我对 API 的选择感到困惑。在 Safari 上是否有其他 SQLite 替代方案或对 Indexed DB 的支持？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-03T12:02:45.447

我认为放弃 IndexedDB 是个坏主意，因为它可能是未来的格式，所以 Safari 可能会停止支持 WebSQL。

似乎有各种 JavaScript 解决方案可以弥补两者之间的差距 - 保存在用户浏览器上可用的任何一个： [JavaScript Library to Bridge IndexedDB 和 WebSQL](https://stackoverflow.com/questions/6116053/javascript-library-to-bridge-indexeddb-and-websql) 我认为这可能是您最好的解决方案。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-13T20:44:33.063

首先，被 W3C 弃用的是 WebSQL 而不是 SQLite

索引数据库 -

*   它与许多类型的移动操作系统不兼容，仅与某些类型的移动操作系统版本兼容
*   开发人员不能将 SQL 与 IndexedDB 一起使用。他们可以使用 SQLite 和 WebSQL
*   大多数开发人员都尽可能地避免使用 IndexedDB

WebSQL -

*   它已被 W3C 弃用，这意味着它不再被维护或开发
*   它需要另一个名为 Polyfill 的插件，以使移动应用程序能够与流行的移动操作系统（如 Google Android 和 Apple iOS）一起使用

SQLite -

*   它获得了谷歌的奖项
*   SQLite 有它的官方网站。IndexedDB 和 WebSQL 没有
*   在 Google 上，SQLite 返回 430 万条结果。WebSQL 返回的结果略少于 700K，IndexedDB 返回的结果为 282K。

如果你想要一个关于 SQLite 的快速教程，

[使用 Android 和 Phonegap 存储 SQLite 数据库](https://stackoverflow.com/questions/19570868/storage-of-sqlite-database-using-android-and-phonegap/25518453#25518453)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-03T14:43:17.930

是的，IndexedDB API 很棒，所有浏览器都将在不久的将来支持。

我绝对推荐我自己的解决方案[https://bitbucket.org/ytkyaw/ydn-db](https://bitbucket.org/ytkyaw/ydn-db)它是 IndexedDB 的非常薄的包装器，并且回退到 Sqlite 用于 safari。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-03T14:27:10.057

IndexedDB 很可能是未来受支持的数据库，最好使用它而不是 WebSQL。正如 Raymond 所指出的，最好参考[http://www.caniuse.com](http://www.caniuse.com)以了解桌面和移动浏览器当前/未来的支持。

根据您的解决方案的当前需求，您可以使用许多可用的 JavaScript 库之一，这些库使用[本地存储](https://en.wikipedia.org/wiki/Web_storage#Local_and_session_storage)并提供查询接口。对我来说效果很好的图书馆之一是[Lawnchair](http://brian.io/lawnchair/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-28T14:46:37.710

如果您不想在 IndexedDB 或 WebSQL 之间进行选择，您可以使用 Javascript 库[PouchDB](http://pouchdb.com/)。

我在 Android Webview 中使用它来存储离线数据，并且效果很好。如果没有可用的 Internet 连接，数据将存储在本地数据库（使用 IndexedDB 或 WebSQL）上，并在有可用连接时与远程数据库（[CouchDB](http://couchdb.apache.org/)数据库）同步。

PouchDB 将依赖于 IndexedDB，但如果不支持 IndexedDB，则[回退到 WebSQL 。](http://pouchdb.com/adapters.html#pouchdb_in_the_browser)也可以为 Cordova/PhoneGap 使用 SQLite 插件。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-08-05T18:09:49.853

我想做一个小的编辑来更新这个问题，因为如果你对 websql、localStorage 和 indexedDB 的主题进行研究，谷歌就会向我们提出这个问题。编辑被拒绝，所以我发布作为答案。

正如其他人在他们的回答中所说，IndexedDB 在支持和网络上的文档和规范方面缺乏一些内容。

但是对于移动端的 IndexedDB 支持已经有了[很大的改进](http://caniuse.com/#search=indexed)。它改进了很多，以至于唯一不支持或不支持的浏览器是 Opera Mini，[但它只有 0,34% 的市场使用率](http://caniuse.com/usage-table)。

截至 2015 年，我建议任何开发人员迁移到 IndexedDB，因为 WebSQL 已被弃用，IE 和 Firefox 停止支持它（仅这些就占市场使用量的 15% 以上！）并且 SQLite 正在迅速失去空间给 IndexedDB，后者现在有非常好的[文档来源](https://msdn.microsoft.com/en-us/library/hh673548%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396)，[很多](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)。[一些官方以及](http://www.w3.org/TR/IndexedDB/)！一些 IT 公司甚至也在鼓励使用，例如[IBM](http://www.ibm.com/developerworks/library/wa-indexeddb/)。

我打算使用它，到目前为止我还没有遇到任何问题。Safari 已经增加了对它的支持，所有主要的浏览器也是如此。去吧！

编辑：个人附录：我试过 IndexedDB。我是团队中的一名资深人士，IndexedDB 语法对于小的存储问题来说太混乱和复杂了——我最终使用 localstorage 来保存一些简单的 JSON 数据并在需要时对其进行解析。我团队中的任何人都可以更好地获得它（当然，我也是！）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-05T17:39:18.083

这可能会迟到，但你可以看看： [SequelSphere](http://www.sequelsphere.com)

它是一个 100% 的 HTML5/JavaScript 关系数据库，可以跨浏览器工作，并使用本地存储来保存数据。您也可以使用 SQL 来查询它。它是它自己的数据库引擎，不依赖于内置的（WebSQL）关系数据库。因此，它将适用于所有浏览器。

虽然它目前只支持 localStorage，但它的想法是支持所有未来的标准。由于浏览器支持其他类型的持久性，SequelSphere 将利用这一点。积极的一面是您只使用标准 SQL 针对 SequelSphere 进行编码，并让它处理持久性。

不过，请注意，它是市场上的新产品，因此既有正面的也有负面的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-09T01:14:04.953

正如其他人指出的那样，自从提出这个问题以来，webSQL[已被弃用](http://caniuse.com/#search=websql)，而 IndexedDB 实现[现在存在于所有主要浏览器供应商](http://caniuse.com/#search=indexeddb)中。

因此，对于任何可能发现自己在这里面临同样决定的人来说，选择 IndexedDB。

这里的其他人也正确地暗示不必在两种类型的数据库之间做出选择。可以简单地选择（或制作）一个库，该库利用客户端计算机上可用的任何数据库。

如果您正在寻找这样的图书馆，请查看[BakedGoods 。](https://github.com/klawson88/Baked-Goods)它建立了一个统一的接口，可用于在所有本地和一些非本地客户端存储设施中进行存储操作。它还保持了每个人为用户提供的灵活性和选项。

有了它，在支持的任何一种数据库类型中执行存储操作都是...

...为两种数据库类型指定适当的操作选项和等效配置：

```
//If the operation is a set(), and the referenced structures 
//don't exist, they will be created automatically.

var webSQLOptionsObj = {
    databaseName: "Example_DB",
    databaseDisplayName: "Example DB",
    databaseVersion: "",
    estimatedDatabaseSize: 1024 * 1024,
    tableData: {
        name: "Main",
        keyColumnName: "lastName",
        columnDefinitions: "(lastName TEXT PRIMARY KEY, firstName TEXT)"
    }, 
    tableIndexDataArray: [name: "First_Name_Index", columnNames: "(firstName)"]
};

var indexedDBOptionsObj = {
    databaseName: "Example_DB",
    databaseVersion: 1,
    objectStoreData: {
        name: "Main",
        keyPath: lastName,
        autoIncrement: false
    },
    objectStoreIndexDataArray: [
        {name: "First_Name_Index", keyPath: "firstName", unique: false, multiEntry: false}
    ],
};

var optionsObj = {
    conductDisjointly: false, 
    webSQL: webSQLOptionsObj, 
    indexedDB: indexedDBOptionsObj
}; 
```

...并进行操作：

```
bakedGoods.set({
    data: [
        {value: {lastName: "Obama", firstName: "Barack"}}, 
        {value: {lastName: "Biden", firstName: "Joe"}}
    ],
    storageTypes: ["indexedDB", "webSQL"],
    options: optionsObj,
    complete: function(byStorageTypeStoredItemRangeDataObj, byStorageTypeErrorObj){}
}); 
```

其简单的界面和无与伦比的存储设施支持是以缺乏对某些存储设施特定配置的支持为代价的。例如，它不支持在具有多列主键的 WebSQL 表中进行存储操作。

因此，如果您大量使用这些类型的功能，您可能想看看其他地方。

哦，为了完全透明，BakedGoods 由这个人在这里维护 :)。

# android - 安卓音频可视化

> ID：12247387
> 
> 赞同：2
> 
> 时间：2012-09-03T11:55:36.513
> 
> 标签：android

我正在尝试开发具有音频输入可视化器的应用程序。

我正在`android.media.audiofx.Visualizer`为此使用课程。

但无法初始化 Visualizer 对象。

参考： [https ://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java](https://github.com/felixpalmer/android-visualizer/blob/master/src/com/pheelicks/visualizer/VisualizerView.java)

这是我的代码：

```
private MediaPlayer mPlayer;
private byte[] mBytes;
private byte[] mFFTBytes;
private Visualizer mVisualizer;

mPlayer = MediaPlayer.create(this, R.raw.test);
        mPlayer.setLooping(false);
        mPlayer.start();

mVisualizer = new Visualizer(mPlayer.getAudioSessionId());
        mVisualizer.setCaptureSize(Visualizer.getCaptureSizeRange()[1]);

    Visualizer.OnDataCaptureListener captureListener = new Visualizer.OnDataCaptureListener()
    {
        @Override
        public void onWaveFormDataCapture(Visualizer visualizer, byte[] bytes,
                int samplingRate)
        {
            System.out.println("onWaveFormDataCapture");
        }

        @Override
        public void onFftDataCapture(Visualizer visualizer, byte[] bytes,
                int samplingRate)
        {
            System.out.println("onFftDataCapture");
        }
    };

    mVisualizer.setDataCaptureListener(captureListener,
            Visualizer.getMaxCaptureRate() / 2, true, false);

    mVisualizer.setEnabled(true);
    mPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener()
    {
        @Override
        public void onCompletion(MediaPlayer mediaPlayer)
        {
            mVisualizer.setEnabled(false);
        }
    }); 
```

请帮我解决一下这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:52:25.470

错误 -4 表示您已将错误值作为参数传递（http://developer.android.com/reference/android/media/audiofx/Visualizer.html#ERROR_BAD_VALUE）

1.  你能检查是否`Visualizer.getCaptureSizeRange()[1]`实际上是2的幂吗？应该是，但如果不是，您将捕获大小范围设置为不是 2 的幂的数字，这会导致此错误。

2.  您可以检查`mPlayer.getAudioSessionId()`返回的内容吗？如果它是一个错误的值，例如，如果初始化`mPlayer`尚未完全完成，则可能导致错误。

# hadoop - Hadoop/Yarn 分布式 shell 示例

> ID：12247388
> 
> 赞同：5
> 
> 时间：2012-09-03T11:55:45.610
> 
> 标签：hadoop, mapreduce, protocol-buffers, hadoop-yarn

我正在尝试运行分布式 shell 示例（使用 Hadoop 的 SVN 签出，这就是版本设置为 3.0.0-SNAPSHOT 的原因）：

```
 yarn jar share/hadoop/yarn/hadoop-yarn-applications-distributedshell-3.0.0-SNAPSHOT.jar \
 -jar share/hadoop/yarn/hadoop-yarn-applications-distributedshell-3.0.0-SNAPSHOT.jar \
 org.apache.hadoop.yarn.applications.distributedshell.Client -shell_command whoami 
```

但是它不起作用：

```
12/09/03 13:44:37 FATAL distributedshell.Client: Error running CLient
java.lang.reflect.UndeclaredThrowableException
 at org.apache.hadoop.yarn.exceptions.impl.pb.YarnRemoteExceptionPBImpl.unwrapAndThrowException(YarnRemoteExceptionPBImpl.java:128)
 at org.apache.hadoop.yarn.api.impl.pb.client.ClientRMProtocolPBClientImpl.getClusterMetrics(ClientRMProtocolPBClientImpl.java:123)
 at org.hadoop.yarn.client.YarnClientImpl.getYarnClusterMetrics(YarnClientImpl.java:163)
 at org.apache.hadoop.yarn.applications.distributedshell.Client.run(Client.java:316)
 at org.apache.hadoop.yarn.applications.distributedshell.Client.main(Client.java:164)
 at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
 at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.lang.reflect.Method.invoke(Method.java:601)
 at org.apache.hadoop.util.RunJar.main(RunJar.java:208)
Caused by: org.apache.hadoop.ipc.RemoteException(java.io.IOException): Unknown protocol: org.apache.hadoop.yarn.api.ClientRMProtocolPB
 at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.getProtocolImpl(ProtobufRpcEngine.java:398)
 at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:456)
 at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898)
 at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1732)
 at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1728)
 at java.security.AccessController.doPrivileged(Native Method)
 at javax.security.auth.Subject.doAs(Subject.java:415)
 at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1367)
 at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1726)

 at org.apache.hadoop.ipc.Client.call(Client.java:1164)
 at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:202)
 at $Proxy7.getClusterMetrics(Unknown Source)
 at org.apache.hadoop.yarn.api.impl.pb.client.ClientRMProtocolPBClientImpl.getClusterMetrics(ClientRMProtocolPBClientImpl.java:121)
 ... 8 more 
```

本质问题似乎在第二个跟踪中：

```
Unknown protocol: org.apache.hadoop.yarn.api.ClientRMProtocolPB 
```

有谁知道 Hadoops ProtoBufRPC 的协议注册是如何工作的？关于如何调试的任何想法？

**编辑：**使用 Hadoop 版本 2.0.1-alpha，它工作得稍微好一些。

```
12/09/03 18:43:14 INFO distributedshell.Client: Application did not finish. YarnState=FAILED, DSFinalStatus=FAILED. Breaking monitoring loop
12/09/03 18:43:14 ERROR distributedshell.Client: Application failed to complete successfully 
```

所以也许我的构建工作不正常。关于导致上述问题的任何想法（我真的很想使用 HEAD，因为我计划在 MapReduce 之外进行一些低级实验）？还是 HEAD 部分损坏，HEAD 上的分布式外壳对您有用吗？

我自己的（尚未工作......）客户端仍然失败并出现相同的错误：

```
Caused by: java.io.IOException: Unknown protocol: org.apache.hadoop.yarn.api.ClientRMProtocolPB 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T11:38:48.483

事实证明，我*自己的*代码的主要问题是我天真地实例化了`Configuration`类，而不是实例化`YarnConfiguration`. 这样，yarn 配置文件就不会被读取，它会尝试在默认端口上联系服务器——这与我的设置不符。

示例中似乎存在相同的错误`distributedshell`。

# javascript - JavaScript 可见性不起作用（“隐藏”有效，“可见”无效）

> ID：12247391
> 
> 赞同：1
> 
> 时间：2012-09-03T11:55:47.917
> 
> 标签：javascript, visibility, business-process-management

我正在使用 Lombardi Teamworks BPM Tool 开发解决方案。该工具本身会生成客户端源代码，但我可以使用 JavaScript 输入代码，例如为组合框添加 onChange 代码。

无论如何，我有一个按钮，我正在尝试使用 JavaScript 切换其可见性。我可以使用 隐藏按钮`hidden`，但无法使用 取消隐藏隐藏按钮`visible`。

这是完整的代码：

```
var eleBtnVisibilityTest = document.getElementById("btnVisibilityTest");
if (eleBtnVisibilityTest== null) {
            eleBtnVisibilityTest = document.getElementsByName("btnVisibilityTest");
}

alert("-->"+eleBtnVisibilityTest.style.visibility+"<--");

eleBtnVisibilityTest.style.visibility = "visible";

alert("-->"+eleBtnVisibilityTest.style.visibility+"<--"); 
```

在倒数第二行中，我将按钮设置为`visible`，但它不起作用......但是，如果该按钮以前可见，并且我在`hidden`这里写过，它会起作用的。

*对于这两种情况，在设置可见性之前*的警报中，我得到的弹出窗口说`--><--`.. 在设置可见性*之后*的弹出窗口中，它要么是`-->visible<--`要么`-->hidden<--`..

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:30:56.230

`document.getElementsByName`返回一个 NodeList，您必须从该列表中选择一个项目：

```
var eleBtnVisibilityTest = document.getElementById("btnVisibilityTest");
if (eleBtnVisibilityTest== null) {
            eleBtnVisibilityTest = document.getElementsByName("btnVisibilityTest")[0];
} 
```

但是，当设置隐藏作品的可见性时，这实际上不是这里的问题。

您应该提供更多详细信息，因为您的代码在与 getElementById
[**http://jsfiddle.net/doktormolle/4mhBk/一起使用时有效**](http://jsfiddle.net/doktormolle/4mhBk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:58:50.773

尝试使用 CSS 显示属性：

```
display: block;
display:none; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:51:35.760

不确定“但它不起作用”是什么意思 - 你的意思是按钮保持不可见吗？

可能是按钮通过 CSS`visibility`属性以外的其他方式隐藏。也许它也有`display: none`？在这种情况下，设置`visibility`属性不会使按钮变得可见。使用 Chrome 的检查器之类的工具来检查是否是这种情况。

在 JSFiddle 上发布代码片段，以便我们可以看到代码在运行中。

# java - 在 Linux 上使用 Java 的提示

> ID：12247393
> 
> 赞同：1
> 
> 时间：2012-09-03T11:55:50.680
> 
> 标签：java, linux, ubuntu-12.04

我在 Java 上工作了几年，但大部分时间我都在 Windows 操作系统上工作，因为它是我的 DEV 环境。现在我想在 Java+Linux 环境下工作。

我已经安装了 Ubuntu 12.04，安装了 Oracle JDK、Eclipse、Netbeans……到目前为止还不错。

但我正在寻找专注于 Linux 上的 Java 开发的资源/网站/博客，以了解更多关于如何解决新手（如我）的常见问题、Java 应用程序的任何分析/调试工具、日志文件搜索提示、识别有多少 Java进程正在运行，杀死特定的 java 进程等。

通过谷歌搜索，我可以单独获取这些详细信息……想知道是否有专门关注上述领域的网站/博客？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:07:39.790

好消息：一旦你在 JVM 中运行，Java在 Windows 和 Linux 上**的工作方式非常相似**——在某种程度上，这就是跨平台语言和运行时的全部意义所在！因此，您的大部分 Java 体验都将是完全可移植的。

如果您发现自己在做一些特定于 Linux 或 Windows 的事情，那么您可能想停下来想一想……有没有跨平台的方式来做这件事？在Java中通常有。

因此，您需要了解的 Linux 和 Windows 特定的事情基本上只是发生在 JVM 之外的事情，例如：

*   启动和停止 JVM
*   如何处理本机库
*   非 Java 特定的东西，例如管理文件系统等。

没有任何特定资源可供您跟进，但一般 Linux 站点应该可以帮助您完成上述大部分内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:01:36.383

您正在寻找通用 UNIX 命令的东西，并不特定于 Java 甚至 Linux。所有的 Java 命令在 Windows 和 Linux 下都是一样的，如果你使用 IDE，你不需要担心它们

> 用于 Java 应用程序的任何分析/调试工具

与 Windows 相同。使用 IDE 中的调试按钮进行调试和`jvisualvm`分析，或使用 YourKit 等商业分析器。

> 日志文件搜索提示

使用`less`或`grep`两者兼而有之。;) 您可以使用 Cygwin 在 Windows 中使用这些。

> 确定有多少 java 进程正在运行

`jps -lvm`就像在 Windows 中一样使用。

> 杀死一个特定的java进程

采用`kill {pid}`

> 想知道是否有专门针对上述领域的网站/博客？

我不会想象有。而是寻找常见的 UNIX 命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T14:24:19.010

实际上，有很多工具可以在 Linux 上调试 Java 应用程序。我有一篇博客文章列出了我过去几年使用的 Java 相关工具。

[http://hunmr.blogspot.com/2012/08/java-performance-tunning.html](http://hunmr.blogspot.com/2012/08/java-performance-tunning.html)

和一些方便的命令： [http ://hunmr.blogspot.com/2012/08/handy-commands-for-development.html](http://hunmr.blogspot.com/2012/08/handy-commands-for-development.html)

# asp.net-mvc-3 - 如果给定jquery ui进行日期选择，如何不允许用户在日期字段的文本框中输入？

> ID：12247394
> 
> 赞同：0
> 
> 时间：2012-09-03T11:55:53.003
> 
> 标签：asp.net-mvc-3, jquery-ui, datetime

> **可能重复：**
> [带有不允许用户输入的文本输入的 JQuery Datepicker](https://stackoverflow.com/questions/153759/jquery-datepicker-with-text-input-that-doesnt-allow-user-input)

我正在使用 mvc3 开发网站。我为 DateTime 字段创建了编辑器模板，并使用 jquery ui 来选择日期。现在我不希望用户输入日期字段的文本框，用户应该只使用 jquery ui 选择它。有可能吗？如果可能的话怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:02:53.077

在您的编辑器模板中添加以下内容：

![在此处输入图像描述](../Images/5a631bf8f918e9ec2e42ae8ffa59b9e8.png)

```
@model System.DateTime?
@Html.TextBox("", (Model.HasValue ? Model.Value.ToString("dd.MM.yyyy"): string.Empty), new { @class = "date-pick" })

<script type="text/javascript">
    $(function () {
        $(".date-pick").attr("readonly", "true");    
        $('.date-pick').datepicker({
            dateFormat: "dd.mm.yy",
            yearRange: "-162:+0",
            showWeek: true,
            changeMonth: true,
            changeYear: true,
            showButtonPanel: true,
            changeButtonPanel: true,
            buttonImageOnly: true,
            showOn: "button",
            buttonImage: '@Url.Content("~/Content/images/calendar_32.png")'
        });               
    });  
</script> 
```

请注意，我还指定了自定义日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T11:59:40.380

让它只读？

```
@Html.TextBoxFor(model => model.PostedDate, new { @readonly = "readonly" }) 
```

# android - 如果我的应用程序在小屏幕上运行或运行时的模拟器设置为横向模式，我的背景图像会失真

> ID：12247395
> 
> 赞同：-1
> 
> 时间：2012-09-03T11:56:00.773
> 
> 标签：android

如果我的应用程序在小屏幕上运行或运行时的模拟器设置为横向模式，我的背景图像会失真。

我已经尝试将图像放在 hdpi mdpi 和 ldpi 文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:09:41.343

您需要设置不同的图像大小，不能在所有文件夹中使用相同的图像。有关更多信息，请通过此链接 - [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# android - edittext 已聚焦但光标不可见

> ID：12247396
> 
> 赞同：1
> 
> 时间：2012-09-03T11:56:06.267
> 
> 标签：android, focus, cursor, android-edittext

我想在编辑文本中输入文本，当我单击键盘的输入键（物理/软）时，文本应添加到列表中，编辑文本将被清除以进行下一个条目。但这里的编辑文本被清除但它丢失了焦点。但 edittext.isFocused() 函数返回 true。光标在edittext中不可见。代码粘贴在下面。请帮助我。

```
 edittext.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView tv, int actionId,
                KeyEvent event) {

            if ((event != null)
                    && (event.getAction() != KeyEvent.ACTION_DOWN))
                return false;

            if (actionId == EditorInfo.IME_ACTION_NEXT
                    || event.getKeyCode() == KeyEvent.KEYCODE_ENTER
                    || actionId == EditorInfo.IME_NULL) {

                if (!TextUtils.isEmpty(edittext.getText().toString()
                        .trim())) {
                    makeFreeFormTextItem((edittext.getText().toString()
                            .trim()));
                    edittext.setText("");
                    edittext.requestFocus();
                    edittext.setCursorVisible(true);
                    return true;
            }
               }
            return false;
        }
    }); 
```

# url - 谷歌阅读器公共 RSS 获取超过 9 条

> ID：12247399
> 
> 赞同：1
> 
> 时间：2012-09-03T11:56:14.233
> 
> 标签：url, rss, limit, google-reader

我们需要解析来自谷歌阅读器公共 rss 提要的数据，问题是 url 参数 n=numerofitemstoretrieve 仅适用于 n=9

例如在我们的测试网址中：

[http://www.google.com/reader/shared/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=2](http://www.google.com/reader/shared/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=2)

检索 2 个新闻项目

[http://www.google.com/reader/shared/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=20](http://www.google.com/reader/shared/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=20)

仅检索 9 个新闻项目

我们怎样才能克服这个限制？这种情况下还有其他参数吗？还是另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:48:20.920

Atom 格式（OP 中两个网址右上角的链接）： [http ://www.google.com/reader/public/atom/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=20](http://www.google.com/reader/public/atom/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=20)

第二篇文章的 URL 中带有 /api/ 的内容是 JSON 格式，比 Atom XML 更难解析。

[https://webapps.stackexchange.com/questions/26567/how-to-raise-google-reader-rss-feed-entry-limit](https://webapps.stackexchange.com/questions/26567/how-to-raise-google-reader-rss-feed-entry-limit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T15:26:02.653

我们发现使用这个替代 url n 参数可以正常工作：

[https://www.google.com/reader/api/0/stream/contents/feed/http://www.google.com/reader/public/atom/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n= 20](https://www.google.com/reader/api/0/stream/contents/feed/http://www.google.com/reader/public/atom/user%2F15926769355350523044%2Flabel%2FPublicas%20RSS?n=20)

唯一的问题是这种方式的输出格式不同，所以如果有人找到更好的解决方案，我们将给予他/她的回应

似乎只有在浏览器中查看 url 时才会裁剪结果...如果您从代码中获取 web 内容，它会返回正确的项目计数...（相比之下，使用替代 url 返回的内容是正确的两种方式：从代码中获取它们并在浏览器中查看）

# netbeans - 在 Netbeans 6.5 中显示控制字符

> ID：12247405
> 
> 赞同：1
> 
> 时间：2012-09-03T11:56:34.407
> 
> 标签：netbeans

是否可以在 NetBeans 6.5 中显示控制字符？像回车，空格或制表符等。我在每个菜单点中都搜索了它，但没有找到相应的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:30:23.437

检查这个：**`View -> Show Non-printable Characters`**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T14:46:13.530

对于此版本的 Netbeans，此功能不存在。你/我能做的最好的事情就是使用搜索来查找空格或制表符。Netbeans 会标记它们。

# php - 表单字段计数和名称到 PHP

> ID：12247406
> 
> 赞同：0
> 
> 时间：2012-09-03T11:56:33.990
> 
> 标签：php, forms, post

我的表格内容可变，从 1 到 5，每次都有不同的名称。我无法修改表单本身。

我怎样才能获得表单中的文本区域数量和它们的名称（如果我可以在没有 javascript 的情况下在 php 中清理它，那将是最好的）。

表格正在使用`method="POST"`和`PHP version is 5.2+`

编辑：我忘了告诉你我只有文本区域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:59:35.967

您可以按照以下方式做一些事情：

```
$count=0;
$formElements=array();
foreach ($_POST as $key => $val)
{
    $count++;
    $formElements[]=$key;
}

echo "The form as $count elements.";
var_dump($formElements); 
```

如果你想要帖子的值，你可以像这样创建一个二维数组：

```
foreach ($_POST as $key => $val)
{
    $count++;
    $formElements[]=array($key => $val);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:01:37.090

如果您将表单发布到 php 脚本，`$_POST`则变量是数组。那么你可以使用这样的东西：

`foreach($_POST as $v){}`获得每个领域。

# avplayer - AVPlayerDemo 当前时间为零时第一次前进到下一帧。

> ID：12247407
> 
> 赞同：0
> 
> 时间：2012-09-03T11:56:34.970
> 
> 标签：avplayer, ios5.1, seek

我正在使用 AVPlayerDemo 开源代码来播放所选视频。与 MPMoviePlayerController 相比，我使用 AVPlayerDemo 的原因是寻找每一帧很容易。

在 AVPlayerDemo 示例代码中，我添加了一个“下一步”按钮，单击“下一步”将使视频前进到下一帧。

当用户在视频的第一帧时，我在前进到下一帧时遇到问题

当视频的nominalFrameRate为30时，从上述逻辑寻找下一帧，日志如下所述，点击“Next”按钮不前进视频。

# android - phonegap 将传入数据解析到应用程序

> ID：12247409
> 
> 赞同：0
> 
> 时间：2012-09-03T11:56:37.307
> 
> 标签：android, cordova, android-intent

使用 PhoneGap 我正在使用 Manifest 文件中指定的意图从电子邮件中的链接打开 Android 上的应用程序。这工作正常。

我现在需要做的是将一些数据解析到打开的应用程序中，我从 URL 查询参数中检索的数据，这工作正常我正在读取在 onCreate(Bundle savedInstanceState 中的电子邮件中单击的 URL ) 方法因此：

```
super.loadUrl("file:///android_asset/www/index.html");
System.out.println("- start intent -");
final Intent intent = getIntent();
if(intent != null && intent.getDataString() != null){
    System.out.println("- data string:"+intent.getDataString());
    String url = intent.getDataString();
    this.sendJavascript("testMethod('"+url+"');");
    System.out.println("- finished method call");
} 
```

如果您查看上面的代码，系统输出都按预期输出，并且数据字符串与预期完全相同，但是我的 index.js 文件中的 testMethod(url) 永远不会被调用。即使我这样做了一个简单的方法

```
function testMethod(url){
            alert("************************ alert");
            console.log("******************** log")
            console.warn("******************** warn")
            console.info("******************** info")
            console.error("******************** error")
 } 
```

不会发出任何控制台调用或警报。所以对我来说，sendJavascript 方法似乎没有被执行或调用。 **我错过了什么吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T08:43:16.880

最后我根本无法让它发挥作用。我想要实现的是在从 URL 加载应用程序时传递一个值。如果有意图，我通过更改 URL 并将查询参数添加到 loadUrl 来实现这一点。然后在 index.js 中，我检查了 window.location.search，如果像这样找到特定的查询参数，则调用一个额外的函数。

```
 if(intent != null && intent.getDataString() != null){
        super.loadUrl("file:///android_asset/www/index.html?register=true");
    }
    else{
        super.loadUrl("file:///android_asset/www/index.html");
    } 
```

然后在Javascript中

```
 if(window.location.search === "?register=true"){
        handleOpenURL("my/url");
    } 
```

# html - 无法更改表格的可排序列背景颜色

> ID：12247413
> 
> 赞同：1
> 
> 时间：2012-09-03T11:56:42.193
> 
> 标签：html, css

我有一个关于我很久以前创建的表的问题。

我有一张桌子，可排序的列有蓝色背景。我想在这个表中添加另一个类，比如“sortable-table-white-bg”，当它添加到表中时会删除蓝色背景/将白色背景添加到可排序的列中。

我的表格代码如下：

```
 <table cellspacing="0" cellpadding="0" border="0" class="data-table sortable-table "
summary="JavaScript enabled sortable data table example">
    <caption><em>Sortable data table</em></caption>
    <thead>
        <tr>
            <th scope="col">Header 1</th>
            <th scope="col" class="abc-sort">
                <a href="#sort">
                    <span>Header 2</span>
                    <span class="abc-icon">&nbsp;</span>
                </a>
            </th>
            <th scope="col" class="abc-numeric abc-sort">
                <a href="#sort">
                    <span>Header 3</span>
                    <span class="abc-icon">&nbsp;</span>
                </a>
            </th>
            <th scope="col" class="abc-date abc-sort">
                <a href="#sort">
                    <span>Header 4</span>
                    <span class="abc-icon">&nbsp;</span>
                </a>
            </th>
            <th scope="col">Header 5</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row" class="abc-table-row">This is a sample text</th>
            <td>Duis autem</td>
            <td class="abc-numeric">$1,234.56</td>
            <td>12 Dec 1999</td>
            <td>Ipsum dolor</td>
        </tr>
        <tr>
            <th scope="row" class="abc-table-row">This is a sample text</th>
            <td>Quis nostrud</td>
            <td class="abc-numeric">$789.10</td>
            <td>25 Jul 2007</td>
            <td>Adipscing</td>
        </tr>
        <tr>
            <th scope="row" class="abc-table-row">This is a sample text</th>
            <td>Magna diam</td>
            <td class="abc-numeric">$1,112.13</td>
            <td>01 Jan 2000</td>
            <td>Sed diam</td>
        </tr>
    </tbody>
</table> 
```

表格的 CSS 是：

```
table.data-table.sortable-table td.accent{
    background-color: #eeeeee;
}

table.data-table td.abc-sort-column{
    background:url(/i/v17/table_sort_col_background.gif) repeat-x 0px 0px ;

}

table.data-table tbody tr:first-child td.abc-sort-column{
    background: url(/i/v17/table_sort_col_background_child.gif) repeat 0 0 !important;
} 
```

当我们将“sortable-table-white-bg”类添加到表中时，我将 CSS 更改为

```
 table.data-table.sortable-table td.accent{
    background-color: #eeeeee;
}

table.sortable-table-white-bg td.abc-sort-column{
    background-color: #ffffff;

}

table.data-table td.abc-sort-column{
    background:url(/i/v17/table_sort_col_background.gif) repeat-x 0px 0px ;

}

table.sortable-table-white-bg tbody tr:first-child td.abc-sort-column{
    background-color: #ffffff ;

}

table.data-table tbody tr:first-child td.abc-sort-column{
    background: url(/i/v17/table_sort_col_background_child.gif) repeat 0 0 !important;
} 
```

什么都没有改变...我仍然看到相同的蓝色背景。

请帮我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:31:11.313

是因为您使用 bot 类作为 table.data-table 和 table.sortable-table-white-bg。你的代码：

```
<table cellspacing="0" cellpadding="0" border="0" class="data-table sortable-table "
summary="JavaScript enabled sortable data table example"> 
```

您应该在 css 文件中只定义没有表的类。例子：

```
.sortable-table-white-bg {  }
.data-table {  } 
```

或者您有一个脚本或一个类正在重写您的特定 css 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:48:45.683

这是由几件事造成的。

1.  CSS 引用了名为的类`abc-sort-column`，但 HTML 中没有任何元素具有该类。相反，HTML 仅包含名为`abc-sort`. 可能的解决方法是更改`abc-sort-column`​​为`abc-sort`在 CSS 中*或* `abc-sort`在`abc-sort-column`HTML 中。

2.  引用类名的 CSS`abc-sort-column`显式选择一个`TD`元素，而在 HTML 中，没有`TD`具有这样类名的元素。可能的解决方法是将选择器更改为使用`TH`而不是`TD`.

3.  如果假设`abc-sort-column`应该是`abc-sort`，则某些 CSS 选择器会明确指定`TBODY`HTML 中的元素，没有具有此类名称的元素。据推测，选择器应该`THEAD`代替`TBODY`.

# java - 将文件转换为字节数组

> ID：12247416
> 
> 赞同：0
> 
> 时间：2012-09-03T11:56:57.013
> 
> 标签：java, android, file, bytearray

我正在创建一个目录，即文件并将位图图像存储到该文件中，现在如何将其转换为字节数组

```
File myDir = new File(root + "/saved_images");      
                myDir.mkdirs();
                Random generator = new Random();
                int n = 10000;
                n = generator.nextInt(n);
                String fname = "Image-"+ n +".jpg";
                File file = new File (myDir, fname);

                if (file.exists ()) file.delete (); 
                try {
                    FileOutputStream out = new FileOutputStream(file);

                    bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);

                    out.flush();
                    out.close();
                } catch (Exception e) {
                    e.printStackTrace();

                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:09:06.543

不完全确定您要做什么，但您可以尝试以下操作：

```
InputStream is = ...
ByteArrayOutputStream buffer = new ByteArrayOutputStream();

int nRead;
byte[] data = new byte[some huge number, power of 2 preferably];

while ((nRead = is.read(data, 0, data.length)) != -1) {
  buffer.write(data, 0, nRead);
}

buffer.flush();

byte[] byteArray = buffer.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:09:37.683

只需使用它来读取您保存的文件。

```
// 以字节数组的形式返回文件的内容。
公共静态字节 [] getBytesFromFile（文件文件）抛出 IOException {
    InputStream is = new FileInputStream(file);

    // 获取文件大小
    长长度 = file.length();

    // 不能使用 long 类型创建数组。
    // 它必须是 int 类型。
    // 在转换为 int 类型之前，检查
    // 确保文件不大于 Integer.MAX_VALUE。
    如果（长度>整数.MAX_VALUE）{
        // 文件太大
    }

    // 创建字节数组来保存数据
    字节[]字节=新字节[（int）长度]；

    // 读入字节
    整数偏移 = 0；
    int numRead = 0;
    而（偏移量= 0）{
        偏移量 += 读数；
    }

    // 确保所有字节都已读入
    如果（偏移量
```

礼貌：[http ://www.exampledepot.com](http://www.exampledepot.com/egs/java.io/file2bytearray.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:15:43.957

如果您只想修改现有代码以将图像写入字节数组而不是文件，则将`try`块替换为以下代码：

```
 ByteArrayOutputStream out = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.JPEG, 90, out);
    bytes = out.getBytes(); 
```

... where`bytes`有 type `byte[]`，并摆脱生成文件名的代码并删除现有文件（如果存在）。由于您写入 ByteArrayOutputStream，因此无需调用`flush()`或`close()`on `out`。（他们不会做任何事情。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:43:55.907

我已经使用此代码将图像文件转换为字节 araay，

```
Bitmap bm = BitmapFactory.decodeResource(getResources(),R.drawable.abc);
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.JPEG, 40 , bos);
            public byte[] bitmapdata = bos.toByteArray();
            Log.w("Image Conversion", String.valueOf(bitmapdata.length));
            String converted_txt="";
            for (int i = 0; i < bitmapdata.length; i++) 
           { 
               Log.w("Image Conversion", String.valueOf(bitmapdata[i]));
               ba = bitmapdata[i];
               converted_txt=converted_txt+bitmapdata[i]; 
           }
           try 
           {
               File myFile = new File("/sdcard/myImageToByteFile.jpg");
               myFile.createNewFile();
               fOut = new FileOutputStream(myFile);
               OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
               myOutWriter.write(ba);
               myOutWriter.close();
               fOut.close();
           }
           catch (Exception e) 
           {
               Toast.makeText(getApplicationContext(), e.getMessage(),5000).show();
           } 
```

# javascript - 如何在 Metro 风格应用程序中实现类似 Bing Travel 的 UI

> ID：12247421
> 
> 赞同：1
> 
> 时间：2012-09-03T11:57:05.877
> 
> 标签：javascript, css, microsoft-metro, winjs

我正在寻找一种方法来制作类似于 Windows 8 标配的 Bing Travel 应用程序的布局。我正在使用 Visual Studio 2012 中的 Javscript/CSS 开发该应用程序。

这是一个简单的模型：

![用户界面样机](../Images/f33008a93de8b6f9cf992230c33890cf.png)

令我困惑的部分是展示的第一个项目。不知何故，第一个项目使用最大垂直空间显示，而所有下一个项目都在网格布局 ListView 中对齐。

我已经有了右边显示的 groupheader 的 gridlayout。添加第一项是否有最佳实践？我应该添加另一个具有 2 列的父 css-grid（第一个具有固定宽度和第二个自动宽度）还是可以以某种方式操纵列表视图以保持布局简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:42:48.710

好的，我解决了，这是基于 VS 2012 GridLayout 模板。我做了两件事。

1）创建了一个（父）网格布局，其中包含 2 列具有正确溢出属性的列。

2) 禁用WinJS.UI.ListView 控件生成的溢出属性。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>groupedItemsPage</title>

    <!-- WinJS references -->
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="/css/default.css" rel="stylesheet" />
    <link href="/pages/groupedItems/groupedItems.css" rel="stylesheet" />
    <script src="/js/data.js"></script>
    <script src="/pages/groupedItems/groupedItems.js"></script>

    <style type="text/css">
        #scrollContainer
        {
            height:100%;

            display:-ms-grid;
            -ms-grid-columns: 480px max-content;
            -ms-grid-rows: 1fr;

            overflow-x:scroll;
            overflow-y:hidden;

            -ms-overflow-style:scrollbar;
        }

        #col1
        {
            -ms-grid-column:1;
        }

        #col2
        {
            -ms-grid-column:2;
            -ms-overflow-style:none;
        }
    </style>
</head>
<body>
    <!-- templates -->

    <!-- The content that will be loaded and displayed. -->
    <div id="scrollContainer">
        <div id="col1">
            col1
        </div>
        <div id="col2" class="fragment groupeditemspage ">
            <!-- the code from the GridLayout example goes here -->
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:51:35.113

如果是我，我会向包含第一项和 ListView 的元素添加一列。您可以尝试想出一种操作 ListView 的方法，但由于您是组数据，恕我直言，这将是一种痛苦。没有理由让事情变得比他们需要的更难。

# php - 使用 Composer 自动加载器进行自定义代码管理？

> ID：12247431
> 
> 赞同：23
> 
> 时间：2012-09-03T11:57:51.490
> 
> 标签：php, composer-php

我已经开始了一个新项目，我使用[Composer](http://getcomposer.org/)来处理一些依赖项，以及它们的自动加载。

我只将 composer.json 文件保存在 VCS 中，而不是整个供应商目录，所以我不想开始在其中添加我的代码。

我应该如何处理我自己的项目特定代码，以便它也自动加载？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-03T12:56:53.253

这实际上非常简单。从存储库中排除供应商目录是正确的方法。您的代码应存储在单独的位置（如 src）。

使用[autoload](http://getcomposer.org/doc/04-schema.md#autoload)属性使作曲家识别您的命名空间：

```
{
    "autoload": {
        "psr-4": {
            "Acme\\": "src/"
        }
    }
} 
```

假设您有遵循 psr-4 标准的类名，它应该可以工作。下面是一些类名及其在文件系统上的位置的示例：

*   Acme\Command\HelloCommand -> src/Command/HelloCommand.php
*   Acme\Form\Type\EmployeeType -> src/Form/Type/EmployeeType.php

请记住为每个类定义一个命名空间。这是 Acme\Command\HelloCommand 的示例：

```
<?php

namespace Acme\Command;

class HelloCommand
{
} 
```

不要忘记在你的 PHP 控制器中包含自动加载器：

```
<?php

require 'vendor/autoload.php'; 
```

[在 PHP Framework Interoperability Group 上](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md)阅读有关PSR-4 标准的更多信息。

请注意，如果您编辑`composer.json`，则需要运行 install、update 或[dump-autoload](http://getcomposer.org/doc/03-cli.md#dump-autoload)以刷新自动加载器类路径。

# php - 对象的子数组上的 if 语句

> ID：12247432
> 
> 赞同：1
> 
> 时间：2012-09-03T11:57:54.557
> 
> 标签：php, arrays, object

希望标题有意义，但我的问题是我有一个带有这样数组的对象，这只是数组中的 1 作为示例

```
 object(stdClass)#6 (3) {
  ["items"]=>
  array(40) {
    [0]=>
    object(stdClass)#7 (22) {
      ["id"]=>
      int(46)
      ["parentId"]=>
      int(0)
      ["name"]=>
      string(22) "Complete monthly wages"
      ["description"]=>
      string(294) "Complete monthly wages<span style=""></span><br /><div>Complete monthly wages<span style=""></span><br /></div><div>Complete monthly wages<span style=""></span><br /></div><div>Complete monthly wages<span style=""></span><br /></div><div>Complete monthly wages<span style=""></span><br /></div>"
      ["tags"]=>
      string(0) ""
      ["projectId"]=>
      int(12)
      ["ownerId"]=>
      int(1)
      ["groupId"]=>
      int(0)
      ["startDate"]=>
      string(19) "2012-09-03T00:00:00"
      ["priority"]=>
      int(2)
      ["progress"]=>
      float(0)
      ["status"]=>
      int(10)
      ["createdAt"]=>
      string(19) "2012-09-03T07:35:21"
      ["updatedAt"]=>
      string(19) "2012-09-03T07:35:21"
      ["notifyProjectTeam"]=>
      bool(false)
      ["notifyTaskTeam"]=>
      bool(false)
      ["notifyClient"]=>
      bool(false)
      ["hidden"]=>
      bool(false)
      ["flag"]=>
      int(0)
      ["hoursDone"]=>
      float(0)
      ["estimatedTime"]=>
      float(0)
      ["team"]=>
      object(stdClass)#8 (3) {
        ["items"]=>
        array(2) {
          [0]=>
          object(stdClass)#9 (1) {
            ["id"]=>
            int(2)
          }
          [1]=>
          object(stdClass)#10 (1) {
            ["id"]=>
            int(1)
          }
        }
        ["count"]=>
        int(2)
        ["total"]=>
        int(2)
      }
    } 
```

我们可以看到它有一个团队部分，这是我的重点

```
["team"]=>
          object(stdClass)#8 (3) {
            ["items"]=>
            array(2) {
              [0]=>
              object(stdClass)#9 (1) {
                ["id"]=>
                int(2)
              }
              [1]=>
              object(stdClass)#10 (1) {
                ["id"]=>
                int(1)
              }
            }
            ["count"]=>
            int(2)
            ["total"]=>
            int(2)
          }
        } 
```

正如你所看到的那样，那里有 2 个 id，1 和 2，可能有 30 个左右，但我不知道如何有效地告诉它搜索整个数组。

如果我使用它，只要 Id 1 恰好是 id 中的第一项，它就可以工作，但显然并非总是如此。我的目标是搜索对象并仅在用户 ID 在团队数组中时运行代码，我对 php 和对象特别陌生，所以希望有人能指出我正确的方向

```
foreach($tasksList->items as $task_details) 
{
    if($task_details->team->items->id === 1)
    {
        echo "My Code";

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:03:41.220

您的代码（以及您在上面粘贴的部分）似乎错过了*array*`[team]`的事实。在顶部示例中，它看起来像：`team->items`

 *```
["team"]=>
  object(stdClass)#8 (3) {
    ["items"]=>
    /* It's an array! */
    array(2) {
     ...
    }
  } 
```

它不会`id`直接拥有属性。相反，您需要迭代`team->items`：

```
foreach ($taskList->items as $task_details) {
  foreach ($task_details->team->items as $key => $value) {
    echo "Team item #: $key ... Team id: $value->id\n";
    if ($value->id === 1) {
       echo "Matched Team ID 1\n";
    }
  }
} 
```*

# objective-c - 检查 NSNumber 是否为分数

> ID：12247433
> 
> 赞同：5
> 
> 时间：2012-09-03T11:57:57.247
> 
> 标签：objective-c, ios, macos, nsnumber

`NSNumber`检查 a是否为分数的最佳方法是什么？

```
NumberIsFraction(@(0)); // NO;
NumberIsFraction(@(0.5)); // YES;
NumberIsFraction(@(1.0)); // NO; 
```

在边境案件处理和绩效方面“最佳”。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T15:12:39.007

避免转换为具有较小域的类型：

```
BOOL NumberIsFraction(NSNumber *number) {
    double dValue = [number doubleValue];
    if (dValue < 0.0)
        return (dValue != ceil(dValue));
    else
        return (dValue != floor(dValue));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-09T05:46:28.590

来自 Jonathan、hpique 和 prashant 的解决方案都有相同的错误：它们涉及强制转换`NSNumber`为固定精度类型（各种`double`、`long long`等），如果值非常大，则会中断`NSDecimalNumber`。例如，接受的答案在`NSDecimalNumber(string: "1000000000000000.1")`.

更正确的实现（作为扩展，在 Swift 中）：

```
extension NSNumber {
    var isFraction: Bool {
        var decimal = decimalValue, decimalRounded = decimal
        NSDecimalRound(&decimalRounded, &decimal, 0, .down)
        return NSDecimalNumber(decimal: decimalRounded) != self
    }
} 
```

或者在 Objective-C 中，作为一个全局函数：

```
BOOL NumberIsFraction(NSNumber *number) {
    NSDecimal rounded = number.decimalValue;
    NSDecimalRound(&rounded, &rounded, 0, NSRoundDown);
    return ![number isEqualToNumber:
        [[NSDecimalNumber alloc] initWithDecimal:rounded]];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-03T11:57:57.247

我目前正在使用：

```
BOOL NumberIsFraction(NSNumber* number) {
    return ![number isEqualToNumber:@(number.longLongValue)];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T11:34:45.490

```
-(BOOL) NumberIsFraction: (NSNumber*)number
{
   NSLog(@"%0.16g",number.doubleValue);
   NSLog(@"%d", number.intValue);
   double diff = number.doubleValue - number.intValue;
   if (diff>0)
     return YES;
   else return NO;
} 
```

# dataset - 根据替代数据集大小设置表的 BIRT 可见性

> ID：12247442
> 
> 赞同：0
> 
> 时间：2012-09-03T11:58:18.730
> 
> 标签：dataset, birt

我有一个 BIRT 报告，其中包含两个数据集和两个表，每个表绑定一个。根据“替代”数据集的内容，我只希望一次显示一个表格。因此，如果 datset2 不为空，则基本上 table1 的可见性设置为隐藏，反之亦然。

我可以/如何编写这个脚本？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:22:33.310

您可以在 beforeFactory 脚本中调用 BIRT 数据引擎 API 来检查第二个表的数据集，以查看它是否具有值以及是否确实从报告中删除了第一个表。

```
//check if table 2 has data.  If it does drop table 1

importPackage( Packages.org.eclipse.birt.report.model.api );
importPackage(Packages.java.lang);
importPackage(Packages.java.util);
importPackage(Packages.org.eclipse.birt.data.engine.api);
importPackage(Packages.org.eclipse.birt.report.model.api);
importPackage(Packages.org.eclipse.birt.data.engine.api.querydefn);
importPackage(Packages.org.eclipse.birt.data.engine.core);

var myconfig = reportContext.getReportRunnable().getReportEngine().getConfig();
var de = DataEngine.newDataEngine( myconfig, null );

var dsrc = reportContext.getDesignHandle().findDataSource("Data Source");
var dset = reportContext.getDesignHandle().findDataSet("Data Set2");

var odaDataSource = new OdaDataSourceDesign( "Test Data Source" );
odaDataSource.setExtensionID( "org.eclipse.birt.report.data.oda.jdbc" );
odaDataSource.addPublicProperty( "odaURL", dsrc.getProperty("odaURL").toString() );
odaDataSource.addPublicProperty( "odaDriverClass", dsrc.getProperty("odaDriverClass").toString());
odaDataSource.addPublicProperty( "odaUser", dsrc.getProperty("odaUser").toString() );
odaDataSource.addPublicProperty( "odaPassword", "" );       

var odaDataSet = new OdaDataSetDesign( "Test Data Set" );
odaDataSet.setDataSource( odaDataSource.getName( ) );
odaDataSet.setExtensionID( "org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" );
odaDataSet.setQueryText( dset.getQueryText() ); 

de.defineDataSource( odaDataSource );
de.defineDataSet( odaDataSet );

queryDefinition = new QueryDefinition( );
queryDefinition.setDataSetName( odaDataSet.getName() );
queryDefinition.setAutoBinding(true);

var pq = de.prepare( queryDefinition );

var qr = pq.execute( null );
rowcount=0;     
var ri = qr.getResultIterator( );       
while (  ri.next( ) )
{       
    rowcount++
}

ri.close( );
qr.close( );
de.shutdown( );

if( rowcount > 0 ){
reportContext.getDesignHandle().findElement("Table1").drop();
} 
```

请注意，在此示例中，表 1 必须命名为 Table1。这可以在表格的一般属性中完成。完整示例可在此处获得[http://www.birt-exchange.org/org/devshare/designing-birt-reports/1542-data-engine-api-to-check-data-set-values/](http://www.birt-exchange.org/org/devshare/designing-birt-reports/1542-data-engine-api-to-check-data-set-values/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T17:17:35.703

抱歉，太晚了，这可能对其他人有帮助

您应该使用数据集中的列值（计数列，主列...）进行测试，然后在您的表中`Visibility properties`，检查`Hide Element`并`For all outputs`按下`fx`以编写以下代码：

```
if (row["yourTestColumn"] == null){ 
    true /* when you want to hide your table *
} else{
    false
} 
```

我希望这会帮助其他人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T13:09:09.863

保留一个标志。基于该标志加载您的数据集，以便您可以同时根据该标志选择您的表格可见性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-03T10:19:25.360

以下代码对我有用：（将其放在“ **beforeFactory** ”脚本中）

```
if (params["show"].value == 'N')
{
reportContext.getDesignHandle().findDataSet("MyDataSet").drop();
reportContext.getDesignHandle().findElement("MyChart").drop();
} 
```

# asp.net - 带有更新面板的 ajax 选项卡容器中使用的文件上传器无法正常工作

> ID：12247448
> 
> 赞同：0
> 
> 时间：2012-09-03T11:58:36.657
> 
> 标签：asp.net, file-upload, asp.net-ajax

我正在使用带有更新面板和文件上传器的 ajax 选项卡容器

`fileuploaderId.HasFille`总是空白。

这是我的html代码

```
 <cc1:TabPanel ID="tour" runat="server">
                        <HeaderTemplate>
                            <span class="label_Tag_big">भ्रमण (Tours)</span></HeaderTemplate>
                        <ContentTemplate>
                            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                                <ContentTemplate>
                                    <center class="control_bg">
                                        <table width="75%" cellspacing="1">
                                            <tr>
                                                <td style="background-color: #996666">
                                                    <table width="100%" align="center" cellpadding="0" cellspacing="1">
                                                        <tr class="form_heading">
                                                            <td colspan="2">
                                                                <asp:Label ID="lbl" runat="server" Text="भ्रमण (Tours)"></asp:Label>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;विभागाध्‍यक्ष / अधिकारी का पद नाम
                                                            </td>
                                                            <td>
                                                                designation location, department
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;<asp:Label ID="lblCurrentTT" runat="server"></asp:Label>
                                                                का लक्ष्‍य
                                                            </td>
                                                            <td>
                                                                <asp:Label ID="lblTargetT" runat="server"></asp:Label>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;<asp:Label ID="lblCurrentTA" runat="server"></asp:Label>
                                                                की लक्ष्‍य प्राप्ति
                                                            </td>
                                                            <td>
                                                                <asp:Label ID="lblAchivedT" runat="server"></asp:Label>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="form_sub_heading" colspan="2" align="left">
                                                                भ्रमण का विवरण (Tours details)
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td width="45%">
                                                                &nbsp;दौरे का स्थान
                                                            </td>
                                                            <td width="55%">
                                                                <table width="100%" cellpadding="3" cellspacing="0">
                                                                    <tr>
                                                                        <td width="50%">
                                                                            <asp:DropDownList ID="ddlLocLevel" runat="server" OnSelectedIndexChanged="ddlLocLevel_SelectedIndexChanged"
                                                                                AutoPostBack="True" Width="200px" />
                                                                            <asp:RequiredFieldValidator ID="rfqLocLevel" runat="server" InitialValue="0" ControlToValidate="ddlLocLevel"
                                                                                Display="None" ErrorMessage="दौरे का स्थान चुनें " ValidationGroup="tour"></asp:RequiredFieldValidator>
                                                                        </td>
                                                                        <td width="50%">
                                                                            <asp:DropDownList ID="ddlLocation" runat="server" OnSelectedIndexChanged="ddlLocation_SelectedIndexChanged"
                                                                                AutoPostBack="True" Width="200px">
                                                                                <asp:ListItem Text="-- चुनें --" Value="0"></asp:ListItem>
                                                                            </asp:DropDownList>
                                                                            <asp:RequiredFieldValidator ID="rfqLocation" runat="server" InitialValue="0" ControlToValidate="ddlLocation"
                                                                                Display="None" ErrorMessage="-- चुनें --" ValidationGroup="tour" Enabled="false"></asp:RequiredFieldValidator>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>
                                                                            <asp:DropDownList ID="ddlSubDistrict" runat="server" OnSelectedIndexChanged="ddlSubDistrict_SelectedIndexChanged"
                                                                                AutoPostBack="True" Width="200px">
                                                                                <asp:ListItem Text="-- तहसील चुनें --" Value="0"></asp:ListItem>
                                                                            </asp:DropDownList>
                                                                            <asp:RequiredFieldValidator ID="rfqddlSubDistrict" runat="server" InitialValue="0"
                                                                                ControlToValidate="ddlSubDistrict" Display="None" ErrorMessage="-- चुनें --"
                                                                                ValidationGroup="tour" Enabled="false"></asp:RequiredFieldValidator>
                                                                        </td>
                                                                        <td>
                                                                            <asp:DropDownList ID="ddlPoliceStation" runat="server" Width="200px">
                                                                                <asp:ListItem Text="-- पुलिस थाना चुनें --" Value="0"></asp:ListItem>
                                                                            </asp:DropDownList>
                                                                            <asp:RequiredFieldValidator ID="rfqddlPoliceStation" runat="server" InitialValue="0"
                                                                                ControlToValidate="ddlPoliceStation" Display="None" ErrorMessage="-- पुलिस थाना चुनें --"
                                                                                ValidationGroup="tour" Enabled="false"></asp:RequiredFieldValidator>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;<asp:Label ID="lblTourStartDate" runat="server" Text="दौरे की तिथि "></asp:Label>
                                                            </td>
                                                            <td>
                                                                <asp:TextBox ID="txtTourStartDate" runat="server" Width="25%" CssClass="date" onkeypress="return false;"
                                                                    onPaste="return false;"></asp:TextBox>
                                                                <cc1:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="txtTourStartDate"
                                                                    Format="dd/MM/yyyy">
                                                                </cc1:CalendarExtender>
                                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtTourStartDate"
                                                                    ErrorMessage="दौरे की आरम्भिक तिथि डाले" ValidationGroup="tour" Display="None"></asp:RequiredFieldValidator>
                                                                &nbsp;&nbsp;से&nbsp;&nbsp;
                                                                <asp:TextBox ID="txtTourEndDate" runat="server" Width="25%" onkeypress="return false;"
                                                                    onPaste="return false;"></asp:TextBox>
                                                                <cc1:CalendarExtender ID="CalendarExtender2" runat="server" TargetControlID="txtTourEndDate"
                                                                    Format="dd/MM/yyyy">
                                                                </cc1:CalendarExtender>
                                                                &nbsp;&nbsp;तक&nbsp;&nbsp;
                                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtTourEndDate"
                                                                    ErrorMessage="दौरे की समाप्ति तिथि डाले" ValidationGroup="tour" Display="None"></asp:RequiredFieldValidator>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;दौरे के दौरान निरीक्षण किया गया ?
                                                            </td>
                                                            <td>
                                                                <asp:RadioButtonList ID="rdbtnInsp" runat="server" RepeatDirection="Horizontal" AutoPostBack="true"
                                                                    OnSelectedIndexChanged="rdbtnInsp_SelectedIndexChanged">
                                                                    <asp:ListItem Text="नही" Value="0"></asp:ListItem>
                                                                    <asp:ListItem Text="हाँ" Value="1"></asp:ListItem>
                                                                </asp:RadioButtonList>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;निरीक्षण नही किये जाने की स्थिति मे टिप्पणी
                                                            </td>
                                                            <td>
                                                                <asp:TextBox ID="txtConIns" runat="server" TextMode="MultiLine" MaxLength="4000"
                                                                    Enabled="false" Rows="3" Width="97%"></asp:TextBox>
                                                                <asp:RequiredFieldValidator ID="rfqConIns" runat="server" ControlToValidate="txtConIns"
                                                                    ValidationGroup="tour" ErrorMessage="निरीक्षण नही किये जाने की स्थिति मे टिप्पणी डाले "
                                                                    Enabled="false" Display="None">
                                                                </asp:RequiredFieldValidator>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;दौरे के दौरान रात्री विश्राम किया गया ?
                                                            </td>
                                                            <td>
                                                                <asp:RadioButtonList ID="rdbtnNHault" runat="server" RepeatDirection="Horizontal"
                                                                    AutoPostBack="true" OnSelectedIndexChanged="rdbtnNHault_SelectedIndexChanged">
                                                                    <asp:ListItem Text="नही" Value="0"></asp:ListItem>
                                                                    <asp:ListItem Text="हाँ" Value="1"></asp:ListItem>
                                                                </asp:RadioButtonList>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;रात्री विश्राम नही किये जाने की स्थिति मे टिप्पणी
                                                            </td>
                                                            <td>
                                                                <asp:TextBox ID="txtConNHault" runat="server" TextMode="MultiLine" MaxLength="4000"
                                                                    Enabled="false" Rows="3" Width="97%"></asp:TextBox>
                                                                <asp:RequiredFieldValidator ID="rfqConNHault" runat="server" ControlToValidate="txtConNHault"
                                                                    Display="None" ValidationGroup="tour" ErrorMessage="रात्री विश्राम नही किये जाने की स्थिति मे टिप्पणी डाले "
                                                                    Enabled="false">
                                                                </asp:RequiredFieldValidator>
                                                                <asp:ValidationSummary ID="vsTour" runat="server" ShowSummary="False" ShowMessageBox="true"
                                                                    ValidationGroup="tour" />
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td>
                                                                &nbsp;<asp:Label ID="Label8" runat="server" Text="संलग्न निरीक्षण रिपोर्ट "></asp:Label>
                                                            </td>
                                                            <td>
                                                                <asp:FileUpload ID="fuTourReport" runat="server" />
                                                                <asp:RegularExpressionValidator ID="RegularExpressionValidator3" runat="server" ErrorMessage="Only pdf file is allowed!"
                                                                    ValidationExpression="^.+(.pdf|.PDF)$" ControlToValidate="fuTourReport" Display="None"
                                                                    ValidationGroup="nhalt"> </asp:RegularExpressionValidator>
                                                            </td>
                                                        </tr>
                                                        <tr class="bgColor" align="left" valign="top">
                                                            <td colspan="2" align="center">
                                                                <asp:Button ID="btnSaveTour" runat="server" Text="Submit" ValidationGroup="tour"
                                                                    OnClick="btnSaveTour_Click" CssClass="savetour" />
                                                                <asp:Button ID="btnCancelTour" runat="server" Text="Cancel" CausesValidation="False" />
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                        <center style="padding-top: 5px">
                                            <asp:GridView ID="grdTours" runat="server" AllowPaging="True" AutoGenerateColumns="False"
                                                DataKeyNames="tourId" Width="100%" OnPageIndexChanging="grdTours_PageIndexChanging"
                                                OnRowCommand="grdTours_RowCommand">
                                                <Columns>
                                                    <asp:BoundField DataField="Location_NameH" HeaderText="दौरे का स्थान " />
                                                    <asp:BoundField DataField="tourStartDate" HeaderText="आरम्‍भिक तिथि" DataFormatString="{0:dd/MM/yyyy}" />
                                                    <asp:BoundField DataField="tourEndDate" HeaderText="समाप्‍ति की तिथि" DataFormatString="{0:dd/MM/yyyy}" />
                                                    <asp:TemplateField>
                                                        <ItemTemplate>
                                                            <asp:LinkButton ID="lnkinsdetail" runat="server" Text="Detail" CommandName="insdetail"
                                                                CommandArgument='<%#Eval("tourId")%>'></asp:LinkButton></ItemTemplate>
                                                    </asp:TemplateField>
                                                </Columns>
                                            </asp:GridView>
                                        </center>
                                    </center>
                                </ContentTemplate>
                            </asp:UpdatePanel>
                        </ContentTemplate>
                    </cc1:TabPanel>
</cc1:TabContainer> 
```

我已经试过了

```
<Triggers>
    <asp:PostBackTrigger ControlID="clickButton" />
</Triggers> 
```

和

```
protected void Page_Init(object sender, EventArgs e)
    {
        PostBackTrigger trig = new PostBackTrigger();

        trig.ControlID = btnSaveTour.UniqueID;

        UpdatePanel1.Triggers.Add(trig);
    } 
```

但没有运气....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:52:31.740

不幸的是，FileUpload 控件在 UpdatePanel 中不起作用

除了删除 UpdatePanel 或通过使用 AsyncFileUpload 控件之类的东西来解决它之外，您实际上没有太多选择

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/6267183/fileupload-postedfile-always-null-inside-updatepanel/7511010#7511010)

戴夫

# c - C：传递指针：不兼容的指针类型警告

> ID：12247449
> 
> 赞同：0
> 
> 时间：2012-09-03T11:58:38.943
> 
> 标签：c, string, pointers, multidimensional-array, incompatibletypeerror

我正在尝试将二维数组（字符串数组）传递给 C 中的函数，但遇到“不兼容的指针类型”警告。

```
In function ‘main’:
warning: passing argument 1 of ‘addCodonstoHash’ from incompatible pointer type 
```

代码如下。我正在尝试使用 uthash 创建一个哈希表，其中包含 3 个字母的字符串作为键（代表 DNA 密码子），以及代表密码子翻译成的氨基酸的相关字符值。所以本质上，从下面的代码中，我想要一个形式的哈希表

{“GCT”：“A”，“GCC”：“A”，“GCA”：“A”，“GCG”：“A”，“GCN”：“A”}

其中“A”代表丙氨酸。但是现在，我无法简单地将密码子数组传递给应该解析它们并将它们添加到哈希表的函数。我已经阅读了 [不兼容的指针类型](https://stackoverflow.com/questions/2539844/incompatible-pointer-type) 并将 [字符串数组作为参数传递给 C](https://stackoverflow.com/questions/486075/passing-an-array-of-strings-as-parameter-to-a-function-in-c) 中的函数无济于事......我*想*我了解数组是如何分配并降级为指针的，但显然不是。

此外，当我尝试计算 addCodonstoHash 中数组的长度时（将有许多不同大小的数组代表各种氨基酸），它分别从 printf 调试行返回 8 和 2，我可以不知道为什么会这样。你们能引导我朝着正确的方向前进吗？

```
/* Helper method for adding codons to hash table from initialized arrays */
void addCodonstoHash(char AAarray[][4], char AAname)
{   int i, size1, size;
    size1 = sizeof(AAarray);
    size  = size1 / sizeof(AAarray[0]);

    /* Debugging lines */
    printf("%d\n", size1);
    printf("%d\n\n",size);

    for (i = 0; i < (sizeof(AAarray) / sizeof(AAarray[0])); i++)
    {   add_codon(AAarray[i], AAname);
        printf(AAarray[i]);
        printf("\n");
    }
}

int main(int argc, char *argv[])
{   /*
     * Generate arrays for codons corresponding to each amino acid, will
     * all eventually be incorporated into hash table as keys, with AA
     * values.
     */
    const char Ala[][4] = {"GCT", "GCC", "GCA", "GCG", "GCN"};
    ...

    addCodonstoHash(Ala, 'A');

    delete_all(); 
    return 0;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:00:48.597

`Ala`有类型`const char(*)[4]`（除非它用作`sizeof`或`&`操作数），但参数有类型`char(*)[4]`。您需要将此声明为`const`.

# c# - C# & Design Patterns - 需要一个优雅的解决方案来解决一个常见问题

> ID：12247451
> 
> 赞同：2
> 
> 时间：2012-09-03T11:58:44.830
> 
> 标签：c#, design-patterns, polymorphism, adapter

我有 2 个项目：第一个项目是我从 xml 文件中读取的结构项目。
该项目用于其他解决方案第二个项目（其他解决方案中的 1 个）在结构项目上工作，foreach 在组件列表上运行：

```
namespace FriendProject.Workers
{
    public class Worker
    {
        static void Main(string[] args)
        {
            foreach (Component component in ComponentList)
            {
                DoWork(component);
            }
        }
    }
} 
```

今天，DoWork 方法执行以下操作：

```
public void DoWork(Component component)
{
   // Doing work on component properties
   // Zip component files with open source Zipper
   if (component is DBComponent)
   {
      // work on DBComponent properties
    }
} 
```

现在，如果您熟悉设计模式，那么您可以看到这里有一个注入点，应该执行以下操作：

```
public class Component
    {
        public virtual void DoWork()
        {
            // Do work
        }
    }

    public class DBComponent : Component
    {
        public override void DoWork()
        {
            base.DoWork();
            // injection point - work on DBComponent properties
        }
    }

    public class Operator
    {
        static void Main(string[] args)
        {
            foreach (Component component in ComponentList)
            {
                component.DoWork();
            }
        }
    } 
```

问题是包含 Component 和 DBComponent 的项目是一个结构项目，用于其他解决方案和其他项目，我需要将开源 Zip dll 添加到项目中，它与当前项目的耦合更加紧密（ “FriendProject”）并且不太可用。更不用说其他项目永远不会使用这些方法（Component 和 DBComponent 中的 DoWork）

有没有更好的解决方案而不改变太多设计？我应该添加一个适配器吗？
如果是这样，请提供示例。
谢谢大家

**编辑：简短的问题**
2 项目：
一个是经理项目，作用于第二个项目。
其次是与其他项目重用的结构项目（从 xml 读取数据）。
我想在结构项目（第二个项目）中添加方法和引用（由于多态性）。但是感觉不对，因为使用它的其他项目永远不会使用这些方法和添加的引用。
有没有更好的解决方案来解决这个问题？

**编辑：**
删除了结构项目代码以缩短问题。这段代码是无关紧要的，因为它的类（组件和 DBComponent）接下来出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:19:39.573

如果您确定要拆分数据结构和数据操作，请创建单独的工作者类。

```
public interface IWorker
{
    void DoWork();
}

public abstract Worker<T>: IWorker where T: Component
{
     private T _component;
     protected Worker(T component) {_component = component;}
     public abstract void DoWork();
}

public class DbWorker: Worker<DbComponent>
{
     public DbWorker(DbComponent component): base(component) {}
     public override DoWork() {...}
} 
```

并实施一些工厂以从特定组件创建特定工人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:38:52.783

简单（并具有三种不同的 GOF 设计模式）。

由于我们不能对组件做任何事情，我们将不得不使用桥接模式。

让我们定义处理程序：

```
public interface IHandlerOf<T> where T : Component
{
    void DoWork(T component);
} 
```

所以现在我们可以为我们想要处理的每个组件类型创建一个处理程序类型。DB 组件处理程序如下所示：

```
public class DbComponentHandler : IHandlerOf<DbComponent>
{
    public void DoWork(DbComponent component)
    {
        // do db specific information here
    }
} 
```

但是由于我们真的不想跟踪所有的处理程序，所以我们想创建一个为我们做这件事的类。我们最终希望像您的示例一样调用代码：

```
foreach (Component component in ComponentList)
{
    handler.DoWork(component);
} 
```

但让我们让它更酷一点：

```
//maps handlers to components
var service = new ComponentService();

// register all handlers in the current assembly
service.Register(Assembly.GetExecutingAssembly());

// fake a component
var dbComponent = new DbComponent();

// the cool part, the invoker doesn't have to know
// about the handlers = facade pattern
service.Invoke(dbComponent); 
```

使之成为可能的服务如下所示：

```
public class ComponentService
{
    private readonly Dictionary<Type, IHandlerInvoker> _handlers = new Dictionary<Type, IHandlerInvoker>();

    public void Register(Assembly assembly)
    {
        foreach (var type in assembly.GetTypes())
        {
            if (type.IsInterface)
                continue;

            foreach (var interfaceType in type.GetInterfaces())
            {
                if (!interfaceType.IsGenericType || interfaceType.GetGenericTypeDefinition() != typeof(IHandlerOf<>))
                    continue;

                var componentType = interfaceType.GetGenericArguments()[0];
                var instance = Activator.CreateInstance(type);
                var method = instance.GetType().GetMethod("DoWork", new[] { componentType });

                _handlers[componentType] = new ReflectionInvoker(instance, method);
            }
        }
    }

    public void Register<T>(IHandlerOf<T> handler) where T : Component
    {
        _handlers[typeof (T)] = new DirectInvoker<T>(handler);
    }

    #region Nested type: DirectInvoker

    private class DirectInvoker<T> : IHandlerInvoker where T : Component
    {
        private readonly IHandlerOf<T> _handler;

        public DirectInvoker(IHandlerOf<T> handler)
        {
            _handler = handler;
        }

        #region IHandlerInvoker Members

        public void Invoke(Component component)
        {
            _handler.DoWork((T) component);
        }

        #endregion
    }

    #endregion

    #region Nested type: IHandlerInvoker

    private interface IHandlerInvoker
    {
        void Invoke(Component component);
    }

    #endregion

    #region Nested type: ReflectionInvoker

    private class ReflectionInvoker : IHandlerInvoker
    {
        private readonly object _instance;
        private readonly MethodInfo _method;

        public ReflectionInvoker(object instance, MethodInfo method)
        {
            _instance = instance;
            _method = method;
        }

        #region IHandlerInvoker Members

        public void Invoke(Component component)
        {
            _method.Invoke(_instance, new object[] {component});
        }

        #endregion
    }

    #endregion

    public void Invoke(Component component)
    {
        IHandlerInvoker invoker;
        if (!_handlers.TryGetValue(component.GetType(), out invoker))
            throw new NotSupportedException("Failed to find a handler for " + component.GetType());

        invoker.Invoke(component);
    }
} 
```

请注意，接口 ( `IHandlerOf<T>`) 是通用的，这意味着我们不能将它直接存储在字典中。因此我们使用适配器模式来存储所有的处理程序。

* * *

完整示例：

```
public interface IHandlerOf<in T> where T : Component
{
    void DoWork(T component);
}

public class ComponentService
{
    private readonly Dictionary<Type, IHandlerInvoker> _handlers = new Dictionary<Type, IHandlerInvoker>();

    public void Register(Assembly assembly)
    {
        foreach (var type in assembly.GetTypes())
        {
            if (type.IsInterface)
                continue;

            foreach (var interfaceType in type.GetInterfaces())
            {
                if (!interfaceType.IsGenericType || interfaceType.GetGenericTypeDefinition() != typeof(IHandlerOf<>))
                    continue;

                var componentType = interfaceType.GetGenericArguments()[0];
                var instance = Activator.CreateInstance(type);
                var method = instance.GetType().GetMethod("DoWork", new[] { componentType });

                _handlers[componentType] = new ReflectionInvoker(instance, method);
            }
        }
    }

    public void Register<T>(IHandlerOf<T> handler) where T : Component
    {
        _handlers[typeof (T)] = new DirectInvoker<T>(handler);
    }

    #region Nested type: DirectInvoker

    private class DirectInvoker<T> : IHandlerInvoker where T : Component
    {
        private readonly IHandlerOf<T> _handler;

        public DirectInvoker(IHandlerOf<T> handler)
        {
            _handler = handler;
        }

        #region IHandlerInvoker Members

        public void Invoke(Component component)
        {
            _handler.DoWork((T) component);
        }

        #endregion
    }

    #endregion

    #region Nested type: IHandlerInvoker

    private interface IHandlerInvoker
    {
        void Invoke(Component component);
    }

    #endregion

    #region Nested type: ReflectionInvoker

    private class ReflectionInvoker : IHandlerInvoker
    {
        private readonly object _instance;
        private readonly MethodInfo _method;

        public ReflectionInvoker(object instance, MethodInfo method)
        {
            _instance = instance;
            _method = method;
        }

        #region IHandlerInvoker Members

        public void Invoke(Component component)
        {
            _method.Invoke(_instance, new object[] {component});
        }

        #endregion
    }

    #endregion

    public void Invoke(Component component)
    {
        IHandlerInvoker invoker;
        if (!_handlers.TryGetValue(component.GetType(), out invoker))
            throw new NotSupportedException("Failed to find a handler for " + component.GetType());

        invoker.Invoke(component);
    }
}

public class DbComponent : Component
{
}

public class DbComponentHandler : IHandlerOf<DbComponent>
{
    public void DoWork(DbComponent component)
    {
        // do db specific information here
        Console.WriteLine("some work done!");
    }
}

internal class Program
{
    private static void Main(string[] args)
    {
        var service = new ComponentService();
        service.Register(Assembly.GetExecutingAssembly());

        var dbComponent = new DbComponent();
        service.Invoke(dbComponent);

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:38:08.210

您是否考虑过将解决方案的其他项目打包在一起，以及`Operator`在第二个项目中？然后，您可以使用 Spring.net 等轻量级容器来配置和加载相关程序集。`Component``DBComponent``.exe`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:47:32.197

赋予组件行为而不是让工作类操作其属性是正确的做法。

如果您不希望其他项目看到 doWork 方法，请将其隐藏在公共接口后面，并创建一个从公共接口到内部接口的适配器。

```
public interface ComponentPublic {
    void sharedMethod();
}

public class ComponentPublicAdapter implement ComponentPublic {
    private Component component;
    void sharedMethod() {
        // Do something, may be call doWork()
    }
} 
```

将 ComponentPublic 接口打包在不同的项目/命名空间中，因此其他项目可能会在不知道内部接口的情况下与之交互。使用依赖注入框架或反射来实例化适配器和组件。

# php - 将javascript与php代码集成

> ID：12247454
> 
> 赞同：-2
> 
> 时间：2012-09-03T11:58:48.773
> 
> 标签：php, javascript, html

我是新手，只需要一些关于 javascript 和 PHP 的指导。我想获取由我的 javascript 生成的 id var，然后获取此 var 值并使用它来查询数据库。当数据库发回结果时，我想以 HTML 格式显示结果。有什么建议么？只要把我放在写路径上，我就会去读。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:00:44.437

使用 XHR (AJAX) 请求向服务器查询数据。让您的服务器端接受这些查询并从数据库返回数据。显示 XHR 请求返回的数据。去读吧，现在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:04:40.753

获取一个 javascript 变量并在 PHP 中使用它是不可能的。原因 Javascript 是客户端，PHP 是服务器端。

但是您可以在 Javascript 中使用 PHP 变量，例如：

> `var myVar = "<?php echo $myPhpVar;?>";`

您可以做的另一件事是设置隐藏输入字段并使用 javascript 值设置该值。

# php - 使用 jquery ajax 发布关联数组

> ID：12247457
> 
> 赞同：2
> 
> 时间：2012-09-03T11:58:51.737
> 
> 标签：php, javascript, jquery, ajax, cakephp

我正在使用 cakephp 表单创建表单。它正在创建这样的形式：

```
<form name='license' action='/some/action' action='POST'>

  <input type="text" id="license0Number" name="data[license][0][number]">
  <input type="text" id="license0Year" name="data[license][0][year]">

  <input type="text" id="license1Number" name="data[license][1][number]">
  <input type="text" id="license1Year" name="data[license][1][year]">

</form> 
```

当以正常形式提交表单并获取如下数据时，它工作正常：

```
$data = array( 'license' => array( '0' => array( 'number'=>'123', 'year'=>'2000' ),
                                   '1' => array( 'number'=>'321', 'year'=>'2003' )
                                 ); 
```

但是当我使用 jQuery`$.ajax()`函数提交相同的表单并使用函数发布数据时`serialize()`。我在服务器端获取类似这样的数据。

```
Array
(
[data%5Blicense%5D%5B0%5D%5Bnumber%5D] => 123
[data%5Blicense%5D%5B0%5D%5Byear%5D] => 2000
[data%5Blicense%5D%5B1%5D%5Bnumber%5D] => 321
[data%5Blicense%5D%5B1%5D%5Byear%5D] => 2003
) 
```

使用 jQuery $.ajax() 函数时，如何以关联数组的形式获取表单数据？

**编辑：**

```
$('#license_form').live( 'submit', function( event ) {

  var action = '/some/action';
  var data = $(this).serialize();

  $.ajax({

     type: "POST",
     url: action,
     data: data, // form data
     success: function( result ) { alert( result ); },
     error: function() { alert('error'); }
  });

   event.preventDefault();
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:36:28.117

无需使用低级 ajax，而是使用 $.post 简写。

试试这个：

```
$(function(){

  $("#submit").click(function(){
     //Since you're talking about POST
     $.post('path_to_php_script.php', {

       "license0Number" : $("#license0Number").val(),
       "license0Year"   : $("#license0Year").val(),
       "license1Number" : $("#license1Number").val(),
       "license1Year"   : $("#license1Year").val()

      }, function(respond){

          //Respond from PHP
          //Maybe replace some div with the server respond?
          $("#some_div").html(respond); //optional   
      });

   });  

}); 
```

您要求使用 jquery 进行 POST ASSOC ARRAY，所以您会明白的，

在您的 php 脚本中：

```
<?php

print_r($_POST); //will print what you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:14:09.920

您可以使用`.serializeArray()`然后手动编码这些值：

```
var values = form.serializeArray();
for (var i = 0; i < values.length; i++)
    values[i] = encodeURIComponent(values[i].value);
values = values.join('&'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:14:33.453

一种可能的解决方案是在服务器端解析关键字符串并在 PHP 中构建关联的数组......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:20:50.727

我认为[jQuery.param](http://api.jquery.com/jQuery.param/)是您正在寻找的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T11:51:04.003

序列化数组（）；是你要找的

# php - 在 php 的 cron 作业中包含路径错误

> ID：12247460
> 
> 赞同：1
> 
> 时间：2012-09-03T11:59:01.680
> 
> 标签：php, cron

我有每天使用 php 生成 XML 文件的功能。

这在浏览器中工作正常。但在 cron 作业中不起作用。

cron 给我所需的一次错误和致命错误。它停止执行我的 cron 作业。包含的文件也包括其他文件。

我得到的错误是这样的，

> **警告**：require_once（/common/configs/config_local.inc.php）[function.require-once]：无法打开流：**/home/wwwsite/public_html/sitename/common/configs/config.inc中没有这样的文件或目录第****281**行的**.php**
> 
> **致命错误**：require_once() [function.require]: 无法打开所需的 '/common/configs/config_local.inc.php' (include_path='.:/usr/lib/php:/usr/local/ lib/php') 在第**281**行的**/home/wwwsite/public_html/sitename/common/configs/config.inc.php**

 **有没有人能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:05:04.413

它告诉你它找不到'/common/configs/...'，注意那里的绝对路径，第一个字符是'/'。

您可以将其设置为定义它的相对路径，也可以将前缀也放在那里（'/home/wwwsite/public_html/sitename/'），可能带有变量（$sitebase ='/home/wwwsite /public_html/sitename/';) 并在包含文件名前加上它。

它在网站上运行但不在命令行上运行的原因可能是几种方法之一。最明显的是 CLI（命令行界面）的 php.ini include_path 不包含“。” 从当前目录检查。默认情况下它没有它还有一个很好的理由。另一种方法是您的代码可能将 ..../sitename/ 目录放入 include_path - 或者设置要自动包含的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T04:02:18.287

我有解决办法

curl yoursitename/yourfilename.php > /dev/null 2>&1

这已经按照我的设置运行了我的 cron 作业，没有任何错误**

# javascript - 根据选择选择多行的所有 td

> ID：12247468
> 
> 赞同：0
> 
> 时间：2012-09-03T11:59:30.353
> 
> 标签：javascript, jquery

我需要通过拖动事件选择表中的所有 td。我想要实现的是根据我第一个选择的 td 创建一个日期范围，直到最后一个选择的 td，但它们可以跨越多行。目前，我使用`nextUntil()`with`andSelf()`来包含最后选择的，但它只选择当前 tr 中的 td。下面是我的代码示例。请提供任何帮助。

```
this.BindCalendarMouseDrag = function () {
        var isMouseDown = false;
        var isHighlighted;
        var selectedDays = [];
        $(".tabCalendarContainer tr.trCalWeek td")
            .mousedown(function () {
                isMouseDown = true;
                $(this).addClass("highlighted");
                isHighlighted = $(this).hasClass("highlighted");
                selectedDays.push($(this));
                return false; // prevent text selection
            })
            .mouseover(function () {
                if (isMouseDown) {
                    $(this).addClass("highlighted", isHighlighted);

                    var firstSelectedDay = selectedDays[0];
                    firstSelectedDay.nextUntil($(this)).andSelf().add($(this)).addClass("highlighted", isHighlighted);

                    selectedDays.push($(this));
                }
            })
            .bind("selectstart", function () {
                return false;
            });

        $(document).mouseup(function () {
            isMouseDown = false;
            //alert(selectedDays.length);
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:44:52.090

我冒昧地构建了一个 jsFiddle，它说明了一个带有可拖动工作日的日历。它还不适合 BACKWARDS 拖动，但您应该能够轻松地调整代码以适应它。

您可以[在此处](http://jsfiddle.net/tgWeS/9/)访问它。

# javascript - 为什么此代码未定义但未定义 2？

> ID：12247469
> 
> 赞同：5
> 
> 时间：2012-09-03T11:59:33.780
> 
> 标签：javascript, scheme

我尝试将此方案代码翻译成 Javascript：

```
(define (double f)
  (lambda (x) (f (f x))))
(define (inc x) (+ x 1))
((double inc) 0) 
```

`((double inc) 0)`表示`(inc (inc 0))`，所以它返回 2。

这是我的 Javascript 代码：

```
var double = function(f){
    return function(x) { f(f(x)); }
}
var inc = function(x) {return x+1;}
double(inc)(0); 
```

但`double(inc)(0)`返回未定义，而不是 2。为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T12:03:00.030

```
var double = function(f){
    return function(x) { return f(f(x)); }
}
var inc = function(x) {return x+1;}
double(inc)(0); 
```

小错误:) 应该与返回一起工作。

如果一个函数没有返回任何东西，它实际上返回的是未定义的。在您的双重功能中，您有一个返回“无”的功能=>您未定义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-03T12:02:11.037

你错过`return`了`double`功能：

```
 var double = function(f){
        return function(x) {return f(f(x)); }
    }
    var inc = function(x) {return x+1;}
    double(inc)(0); 
```

# java - 将 JSch 的标准 iostream 重定向到 primefaces 的终端

> ID：12247470
> 
> 赞同：1
> 
> 时间：2012-09-03T11:59:35.437
> 
> 标签：java, primefaces, inputstream, outputstream, jsch

我正在使用 Primefaces 的终端组件和 JSch 来 ssh 到远程桌面。使用 exec 通道执行需要花费太多时间，因为会话和通道都会在每个命令处关闭，而我没有设法避免这一点。所以我将频道更改为 shell，现在我正在尝试“重定向”标准输入/输出蒸汽。这是我的代码的样子：

```
import org.apache.commons.io.IOUtils;
import org.apache.commons.lang3.StringUtils;

@ManagedBean
@SessionScoped
public class TerminalController implements Serializable{  

     public TerminalController(){
     jsch=new JSch();
     InputStream in=null;
     PrintStream out=System.out;
try{
                      session=jsch.getSession(user, ip, port);
                      session.setConfig("StrictHostKeyChecking", "no");
                        session.setPassword(passwd);
                        session.connect();
                       channel=session.openChannel("shell");    
                       channel.setInputStream(in);
                       channel.setOutputStream(out);
                       channel.connect();
}catch(Exception ee){
                      System.out.println(ee);
} }
    public String handleCommand(String command, String[] params) {  
     command=command+StringUtils.join(params," ");

                   in=IOUtils.toInputStream(command);
                  String result=out.toString();
                   out.flush();
                    return result;} 
```

我知道这是一团糟，我仍然是java的初学者。我想到的另一个问题是，在从iostream到字符串的转换中，我可能会丢失回车按钮功能！我正在等待您的建议、解决方案和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T17:09:45.423

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

import org.apache.commons.lang.StringUtils;
import org.fusesource.jansi.AnsiConsole;
import org.fusesource.jansi.AnsiString;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;

@ManagedBean
@SessionScoped
public class TerminalController {
    BufferedReader fromChannel;
    PrintWriter toChannel;
    Channel channel;
    Session session;
    JSch jsch;

    public TerminalController() {
        jsch = new JSch();
        try {
            session = jsch.getSession("leoks", "localhost", 22);
            session.setConfig("StrictHostKeyChecking", "no");
            session.setPassword("xxx");
            session.connect(Integer.MAX_VALUE); // 3 secs timeout
            channel = session.openChannel("shell");
            InputStream inStream = channel.getInputStream();
            fromChannel = new BufferedReader(new InputStreamReader(inStream,
                    "UTF-8"));
            OutputStream outStream = channel.getOutputStream();
            toChannel = new PrintWriter(new OutputStreamWriter(outStream,
                    "UTF-8"));
            channel.connect();

            StringBuilder result = new StringBuilder();
            boolean stop = false;
            while (!stop) {
                // prompt does not end with newline...
                char c = (char) fromChannel.read();
                result.append(c);
                System.out.print(c);
                if (result.toString().endsWith("$")) {
                    System.out.print("<<<");
                    stop = true;
                }
            }

        } catch (Exception ee) {
            ee.printStackTrace();
        }
    }

    public String handleCommand(String command, String[] params)
            throws IOException {
        command = command + " " + StringUtils.join(params, " ");
        toChannel.println(command);
        toChannel.flush();
        StringBuilder result = new StringBuilder();
        AnsiConsole.systemInstall();
        while (true) {
            char c = (char) fromChannel.read();
            result.append(c);
            if (c == '$') {
                AnsiString as = new AnsiString(result.toString());
                String s = as.getPlain().toString();
                s = s.replaceAll("\n", "<br>");
                AnsiConsole.systemUninstall();
                return s;
            }
        }
    }
} 
```

Jansi 还有一个 HTML 渲染类，它需要一些工作才能将 \n 正确替换为 BR，因为终端组件会渲染 HTML 并默默地忽略任何包含控制代码的格式错误的字符串。您可能还想用固定宽度的字体替换终端 CSS 定义，例如，使用诸如

```
.ui-widget
{
    font-family: "Courier New", Courier, monospace;
    font-size: 0.8em;
} 
```

和

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Terminal POC</title>
</h:head>
<h:body>
    <h:outputStylesheet library="css" name="styles.css" />
    <h:form>
        <p:terminal 
            commandHandler="#{terminalController.handleCommand}"
            height="300px" 
            welcomeMessage="Welcome..." 
            prompt="&gt;" />
    </h:form>
</h:body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:09:30.883

设置`in`变量对通道没有影响，调用`out.toString()`不会给你任何结果。

您需要将命令（及其参数）**写入**通道，然后从那里读取输出。另外，不要使用`setInputStream`or`setOutputStream`方法（如果您有现有的流可以读取或写入，它们很好，但您没有）。

```
public class TerminalController implements Serializable{  

    BufferedReader fromChannel;
    PrintWriter toChannel;
    Channel channel;
    Session session;

     public TerminalController(){
        jsch=new JSch();
        try {
            session=jsch.getSession(user, ip, port);
            session.setConfig("StrictHostKeyChecking", "no");
            session.setPassword(passwd);
            session.connect();
            channel = session.openChannel("shell");    
            InputStream inStream = channel.getInputStream();
            fromChannel = new BufferedReader(new InputStreamReader(inStream, "UTF-8"));
            OutputStream outStream = channel.getOutputStream();
            toChannel = new PrintWriter(new OutputStreamWriter(outStream, "UTF-8"));
            channel.connect();
        } catch(Exception ee) {
            ee.printStackTrace();
        }
    }

    public String handleCommand(String command, String[] params) {  
         command = command + StringUtils.join(params," ");
         toChannel.println(command);
         StringBuilder result = new StringBuilder();
         while(true) {
            String line = fromChannel.readLine();
            result.append(line);
            if(looksLikePrompt(line))
               return result.toString();
            result.append("\n");
         }
    }
} 
```

困难的部分实际上是知道远程命令的输出何时完成，并且您需要返回（这是`looksLikePrompt`我不知道如何编写的方法）。

我不确定`CommandHandler`Primeface 终端组件的原理是创建交互式终端的正确设计，终端不需要知道命令何时完成。当命令需要更多输入时会发生什么？

# sencha-touch-2 - Sencha-touch 2：如何在列表中显示项目

> ID：12247474
> 
> 赞同：0
> 
> 时间：2012-09-03T11:59:42.380
> 
> 标签：sencha-touch-2

我正在将数据从 mysql 服务器动态加载到其 itemTpl 定义如下的列表中：

```
itemTpl: "<div class=\"list-item-title\">{item_name}{item_qty}</div><div class=\"list-    item-narrative\">{item_detail}</div> 
```

我有我的 app.css 相应地定义如下所示。我希望我的“item_name”位于列表的最左侧，并且 item_qty 位于同一行的最右侧。我可以使用多个空格 ( )，但我想要两个项目之间的一些相对间距。

当我为 {item_name} 和 {item_qty} 使用 2 个不同的 div 元素时，它们出现在 2 个不同的行中，而不是在列表中的同一行中。

```
itemTpl: "<div class=\"list-item-title\">{item_name}</div><div class=\"list-item-qty\">{item_qty}</div><div class=\"list-item-narrative\">{item_detail}</div> 
```

应用程序.css

```
/* Increase height of list item so title and narrative lines fit */
.x-list .x-list-item .x-list-item-label
{
 min-height: 3.5em!important;
}
/* Move up the disclosure button to account for the list item height increase */
.x-list .x-list-disclosure {
position: absolute;
bottom: 0.85em;
right: 0.44em;
}
.list-item-title
{
    float:left;
    width:100%;
    font-size:90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right:25px;
    line-height:150%;
margin-right:520px;
}
.list-item-narrative
{
    float:left;
    width:95%;

    font-size:90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right:25px;
}
.x-item-selected .list-item-title
{
    color:#ffffff;
}
.x-item-selected .list-item-narrative
{
    color:#ffffff;
}
.notes-list-empty-text
{
    padding:10px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T12:18:11.083

您的 itemTpl 看起来像：

```
itemTpl: "<div class=\"list-item-title\">{item_name}</div><div class=\"list-item-qty\">{item_qty}</div><div class=\"list-item-narrative\">{item_detail}</div> 
```

但是你的 app.css 是错误的。缺少一个类：`list-item-qty`

试试这个：

```
/* Increase height of list item so title and narrative lines fit */
.x-list .x-list-item .x-list-item-label
{
 min-height: 3.5em!important;
}
/* Move up the disclosure button to account for the list item height increase */
.x-list .x-list-disclosure {
position: absolute;
bottom: 0.85em;
right: 0.44em;
}
.list-item-title
{
    float:left;
    /*width:100%; //this can't be 100% width*/
    width: 75%; //could be more if you need
    font-size:90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right:25px;
    line-height:150%;
    /*margin-right:520px;*/
}
.list-item-qty
{
    float:right;
    font-size:90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right:25px; //You will need that when onItemDisclosure is set to true
    line-height:150%;
    clear: right;
}
.list-item-narrative
{
    float:left;
    width:95%;

    font-size:90%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding-right:25px;
}
.x-item-selected .list-item-title
{
    color:#ffffff;
}
.x-item-selected .list-item-narrative
{
    color:#ffffff;
}
.notes-list-empty-text
{
    padding:10px;
} 
```

# php - AngularJS插入页面刷新

> ID：12247480
> 
> 赞同：0
> 
> 时间：2012-09-03T12:00:40.280
> 
> 标签：php, angularjs, page-refresh

我希望通过 AngularJS 和 PHP 在 MySQL 数据库中添加一条记录。记录添加成功但没有看到AngularJS效果。即页面不会自动刷新。下面是给出的代码：

**控制器**：

```
 $scope.add = function() {
    var elem = angular.element($element);
    var dt = $(elem).serialize();
    //alert($element);
    console.log($(elem).serialize());
    $http({
        method: 'POST',
        url: 'php/add.php',
        data: dt,
        headers: {'Content-Type': 'application/x-www-form-urlencoded'}
    }).success(function(data, status) {
            $scope.status = status;
            $scope.data = data;
            console.log(data);
            data.push(this);
            $scope.products = data; // Show result from server in our <pre></pre> element
    }).error(function(data, status) {
            $scope.data = data || "Request failed";
            $scope.status = status;
        });
  }; 
```

**索引.html**

```
<li ng-repeat="product in products" ng-model = 'products'>
    {{product.description}}|{{product.name}} | <a href='edit.html' ng-click = "edit(product.product_id)">edit</a> | <a href='' ng-click = "del(product.product_id)" ng-hide="isHidden">delete</a>
                <input type="hidden" name="hdnid" ng-model="hdn" value="{{product.product_id}}"/>
                </li> 
```

**添加.php**

```
<?php
include 'connect.php';
mysql_select_db($database,$con);  
$nm = $_POST['keywords'];
$desc = $_POST['desc'];
$query = "INSERT INTO `product`(`name`,`description`) VALUES ('$nm', '$desc')";
$result = mysql_query($query) OR die(mysql_error()); 
?> 
```

我应该怎么做才能自动刷新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:32:07.040

当您为 $scope.products 分配新数组或修改现有数组时，它会自动在 html 的新/修改列表中列出每个产品。您不必重新加载页面。

在您的情况下，帖子的响应数据应该是 json 数组，如果不是，它将不起作用。

像 mysql_query($query).toJSON 这样的东西应该可以工作。

如果您想刷新页面（出于某些非角度原因），您应该在 http 调用成功时明确执行此操作。请记住，使用 $http 包装器进行的 GET/POST 调用是 ajax 调用。

示例：http: [//jsfiddle.net/Y3b3H/12/](http://jsfiddle.net/Y3b3H/12/)

# cuda - 两张显卡之间的通信

> ID：12247482
> 
> 赞同：1
> 
> 时间：2012-09-03T12:00:45.897
> 
> 标签：cuda

CUDA如何同步两张显卡？他们如何沟通？我有两张特斯拉卡，但我不知道如何在它们之间进行通信。

我需要在 RAM 中存储 5 GB 矩阵。我有两张特斯拉卡，每张 3GB RAM。我可以通过将内核分成更小的内核来强制同步吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:06:24.173

这篇由 NVIDIA 开发技术工程师 Paulius Micikevicius 编写的[多 GPU 编程教程](http://www.gputechconf.com/gtcnew/on-demand-gtc.php?sessionTopic=&searchByKeyword=micikevicius&submit=&select=%20&sessionEvent=&sessionYear=&sessionFormat=#1451)全面概述了多 GPU 上的 CUDA 编程，包括 GPU 之间的通信和同步。

综上所述，CUDA Runtime API（v4.x 及更高版本）提供了`cudaMemcpy*`提供点对点复制功能的功能，并且可以通过使用 Stream 和 Event API（例如`cudaStreamWaitEvent()`）来实现同步。

# iphone - 在 iPhone 中为工具栏添加空间

> ID：12247485
> 
> 赞同：0
> 
> 时间：2012-09-03T12:00:48.787
> 
> 标签：iphone, ipad, toolbar, xib, uibarbuttonitem

我是 iPhone 新手，

我在我的`.xib`文件中添加了一个工具栏，然后`BarbuttonItem`在工具栏中添加了 5，

**查看快照：** ![1](../Images/ce966c255b69ce4508e7bf5183884ad6.png) 您可以在工具栏上看到条形按钮，但它们之间没有空格..我想要的是..所有按钮之间应该有足够的空间，比如`search bar`放在最右边，`a`并且`A`应该在工具栏的中间.

当我尝试`search bar`在最右边拖动时，它会正确拖动，但在鼠标点击`search bar`时再次回到它的原始位置。

**如何解决这个问题？**

***任何帮助都会得到帮助。***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:07:28.067

在`Objects`面板中有两个`UIBarButtonItem`名为`Fixed Space Bar Button Item`和的子类`Flexible Space Bar Button Item`。你需要使用这两个来调整你的空间。

# php - PHP - 添加尾部斜杠 (.php/) 导致页面显示错误

> ID：12247488
> 
> 赞同：0
> 
> 时间：2012-09-03T12:00:55.120
> 
> 标签：php, .htaccess

我目前在我的网站上遇到了问题。如果有人输入[http://mysite.com/index.php](http://mysite.com/index.php)，它可以正常工作并按应有的方式显示 index.php。但是，如果有人输入[http://mysite.com/index.php/](http://mysite.com/index.php/)，index.php 会丢失大部分图像，现在充当文件夹，即使它不是。这发生在我所有的 .php 文件上。

但是，在其他站点上，不会发生此问题。我一直在考虑使用这个 htaccess 代码：

```
# Remove garbage info after .php
RewriteRule ^([^.]+\.php)[/.] http://www.example.com/$1 [R=301,L] 
```

我的问题基本上是......这个问题的最佳解决方案是什么？另外，如果我使用我上面提到的 thae htaccess RewriteRule，像 /test.php?id=5 这样的页面会被剥离到只是 /test.php （基本上删除 .php 之后的所有内容）？

谢谢，
马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:12:04.357

处理此问题的最佳方法是为您的网站创建一个入口点。

因此，在您的 .htaccess 中，您可以编写：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

现在您将始终输入 index.php 并从那里您可以使用 url 做您喜欢的事情：

```
$url = rtrim( $url, '/' );
$request = explode( '/', $url ); 
```

看看我的[教程/博客](http://www.ganymedes.be/index/blog/2)。

# extjs - Extjs 在渲染前检索标签

> ID：12247495
> 
> 赞同：1
> 
> 时间：2012-09-03T12:01:24.673
> 
> 标签：extjs

我正在尝试在 beforerender 事件上加载标签的文本。所以我附上了之前的事件......如下

```
{
    xtype: 'label',
    text: 'VOID',
    listeners: {
        beforerender: {
        fn: me.onLabelBeforeRender,
        scope: me
    }
},

Ext.Ajax.request({
    url: '/who',
    method: 'GET',
    params: {
        id: 1
    },
    success: function(response){
        var text = Ext.decode(response.responseText);
        alert(text);
        // process server response here
    }
}); 
```

现在我想将标签从 VOID 更改为 /who 的响应值但是我看不到如何以体面的方式访问该标签。当然我可以添加一个 id 使用 getcmp 但这似乎很笨拙，或者这是要走的路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:33:54.013

实际上，就性能而言， id +`Ext.getCmp()`是最有效的选择。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/11872261/extjs4-1-up-down-versus-ext-getcmp/11873049#11873049)。

它肯定会比添加一个监听器更快，你会得到一个非常健康的调用堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:08:39.897

像这样定义标签

```
{
    xtype: 'label',
    text: 'VOID',
    itemId:'someLabel',
    listeners: {
        beforerender: {
        fn: me.onLabelBeforeRender,
        scope: me
    }
} 
```

现在因为你保持范围`me`，我假设是标签的一些祖先，所以在`onLabelBeforeRender`函数中你可以`me`通过`this`关键字访问。所以在那个函数中检索标签为

```
var label = this.down('label[itemId="someLabel"]');
label.setText('WHATEVER YOU WANT HERE'); 
```

# asp.net - 在 vs201o 中复制和构建下载的项目

> ID：12247496
> 
> 赞同：0
> 
> 时间：2012-09-03T12:01:28.973
> 
> 标签：asp.net, c#-4.0

我从互联网上下载了一些基于 c# 和 asp.net 的项目，并且我在 CD 中也有一些项目。最近我在有窗口 7 的电脑上安装了 microsoft visual studo 2010 终极设置。现在，我想知道如何将下载的或 CD 项目（c#、asp.net）复制到 Visual Studio 并运行它。我是编程领域的新手，所以只想查看一些示例项目。请告诉我如何在 vs2010 Ultimate 中复制和构建项目的分步过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:10:45.740

1 打开 Visual Studio

2 访问文件

3 创建新的解决方案

4 访问解决方案资源管理器（快捷键 CTRL + ALT + L）

5 右键单击​​解决方案并选择添加现有项目

6 浏览到您的项目（扩展名 .csprog）并单击

# php - 在 php 中控制 PDF 文件的页数

> ID：12247497
> 
> 赞同：0
> 
> 时间：2012-09-03T12:01:30.893
> 
> 标签：php

我正在用 php 生成一个动态 PDF 文件。但我想从页数中删除 PDF 文件的第一页（例如，如果 PDF 文件中有 6 页，我需要显示从第二页开始的页数）。我该如何实施？任何帮助请...

```
$this->Cell(207, 0, 'Proposal Report Page '.$this->getAliasNumPage().' of '.$this->getAliasNbPages(), 0, 2, 'C'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:57:34.143

我认为您正在使用 TCPDF 类。在这种情况下，您可能正在寻找

`setStartingPageNumber()`

方法？

# android - 返回上一个活动而不丢失数据

> ID：12247500
> 
> 赞同：1
> 
> 时间：2012-09-03T12:01:35.993
> 
> 标签：android, android-intent, android-activity, flags, start-activity

我有两个活动。活动 A e 活动 B。

我在活动 A 中有带有数据的 editText。我传递给活动 B。

但是当我尝试将活动 B 传递给 A 时，活动 A 重新启动并且我丢失了 edittext 中的数据。如何使用 A 内的数据将 B 传递给 A？

这是我在活动 B 中的代码。但不起作用

```
 Intent afectarQuotaSocios = new Intent(B.this,A.class);
    afectarQuotaSocios.putExtra("ArrayListIdSocios",al);
    afectarQuotaSocios.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(afectarQuotaSocios); 
```

有任何想法吗？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:07:01.750

你应该使用

```
startActivityForResult(Intent intent, int requestCode); 
```

开始一个子活动。就像你的情况一样，它的 B.

要将活动的结果返回到其超级活动，请调用

`setResult();`方法

并在回调方法中获得超活动的返回结果，`onActivityResult()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:07:59.253

您必须使用[startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)方法

然后在您的 B 活动中，您可以传递您的结果：

```
resultIntent = new Intent(null);
resultIntent.putExtra(YOUR_CONSTANT_TEXT_IDENTIFIER, textValue);
setResult(Activity.RESULT_OK, resultIntent);
finish(); 
```

并且您在[onActivityResult](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)方法上获得 A Activity 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:04:14.823

您正在启动一个新的 Activity，它将调用已启动的 Activity 的`onCreate`方法，然后重新开始。为了保持相同的状态，您想要做的是`finish()`从您的活动 B中调用。

看一下[`startActivityForResult`](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)以获得您正在寻找的这种行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:07:20.057

在清单文件中，只需将此标签添加到 Activity A `android:launchMode="singleInstance"`，不会为 Activity A 调用 onCreate，因此不会刷新您的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T12:39:28.400

您创建一个新的意图对象，通过 setResult(...) 方法调用将其传回。之后调用finish() 方法将控制权交还给父活动。

```
 Intent returnIntent = new Intent();
  returnIntent.putExtra("SELECTVALUE",book);
  setResult(RESULT_OK,returnIntent);        
  finish();
... 
```

然后你回到你之前的活动。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data)
  {
  switch(requestCode) {
  case BOOK_SELECT: 
        if (resultCode == RESULT_OK) {
            String name = data.getStringExtra("SELECTVALUE");
             System.out.println("Name"+name);
            } 
```

} }

# button - 是否可以使用 gxt 2.5 在按钮中添加复选框

> ID：12247505
> 
> 赞同：0
> 
> 时间：2012-09-03T12:01:47.963
> 
> 标签：button, checkbox, gxt

我的类扩展了 gxt 按钮，我想在按钮中添加一个复选框，但没有在按钮中添加组件的方法。

```
import com.extjs.gxt.ui.client.widget.button.Button;
import com.extjs.gxt.ui.client.widget.form.CheckBox;

public class ButtonCheckBox extends Button {

    private CheckBox checkBox;

    public ButtonCheckBox() {
        checkBox = new CheckBox();
        checkBox.setBoxLabel("CheckBox");

        setWidth(200);
    }
} 
```

如果可能的话，我怎样才能在我的按钮中添加一个复选框？

![在此处输入图像描述](../Images/b2b0267377685273afa1ad2e896f187d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:50:59.810

感谢 Eliran Malka，我使用以下代码完成了这项工作

```
import com.dips.pei.client.view.resources.Icons;
import com.extjs.gxt.ui.client.event.ComponentEvent;
import com.extjs.gxt.ui.client.widget.button.ToggleButton;
import com.google.gwt.user.client.ui.AbstractImagePrototype;

public class CheckBoxButton extends ToggleButton {

public CheckBoxButton() {
    setIcon(AbstractImagePrototype.create(Icons.INSTANCE.notcheckedIcon()));
    setId("checkBoxButton");
}

@Override
protected void onClick(ComponentEvent ce) {
    super.onClick(ce);

    if(isPressed()){
            setIcon(AbstractImagePrototype.create(Icons.INSTANCE.checkedIcon()));
    }else{
        setIcon(AbstractImagePrototype.create(Icons.INSTANCE.notcheckedIcon()));
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T09:45:55.167

使用 GXT 2.x 标准 API 似乎不可能，但可以使用 HTML 来实现`Template`。

假设复选框的目的是作为按钮状态的指示器，我建议您改用 a`ToggleButton`并修改其外观。您可以为其分配一个 CSS 类名，并根据其不同的状态应用不同的背景图像：

```
.my-toggle-button .x-btn-mc {
    background-image: url('images/toggle-button/checkbox-off.png');
}

.my-toggle-button.x-btn-pressed .x-btn-mc {
    background-image: url('images/toggle-button/checkbox-on.png');
} 
```

### 参考资料（在 GXT 2.2.5 API 上）

*   [`Template`](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/core/Template.html)
*   [`ToggleButton`](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/button/ToggleButton.html)

# facebook - facebook弹出窗口阻止提要共享

> ID：12247511
> 
> 赞同：1
> 
> 时间：2012-09-03T12:02:16.887
> 
> 标签：facebook

我具有以下功能，用户可以在其中共享提要。以下代码在大多数浏览器上被弹出阻止程序阻止。我看过几篇关于这个问题的堆栈溢出帖子。一个建议使用我尝试过的 onclick。我注意到，如果我的 facebook sdk 失败，我不会收到弹出框。什么是最好的进攻计划。我正在使用 php。

```
<a class="facebook" href="#" onclick='loadSdk(); return false;'></a>

<script>

function loadSdk(){

    window.fbAsyncInit = function() {
        FB.init({
            appId      : '123', // App ID
            channelUrl : 'http://mysite.com/facebook', // Channel File
            //   status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            xfbml      : true  // parse XFBML

        });

        if (typeof facebookInit == 'function') {
            facebookInit();
        }

        FB.api('/me', function(user) {
            if (user) {
                var image = document.getElementById('image');
                image.src = 'https://graph.facebook.com/' + user.id + '/picture';
                var name = document.getElementById('name');
                name.innerHTML = user.name
            }
        });
    };
    // Load the SDK Asynchronously
    (function(d){
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);

    }(document));
}

 function facebookInit(){

        var publish = {
            method: 'feed',
            message: '',
            name: '',
            caption: '',
            description: (

                ),
            link: 'http://mysite.com/',
            picture: 'http://mysite.com/fblogo.png',
            actions: [
                { name: '123', link: 'http://www.mysite.com/' }
            ],
            user_message_prompt: 'Share your thoughts'
        };

        FB.ui(publish, null);

}

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:50:18.467

目前您正在加载 SDK onclick - 为什么？

您想要执行*打开弹出窗口的功能*-`facebookInit`在您的情况下 - onclick。

# unit-testing - 如何在一次测试运行中多次执行单元测试？

> ID：12247513
> 
> 赞同：0
> 
> 时间：2012-09-03T12:02:28.190
> 
> 标签：unit-testing, batch-file, mstest

我的一项测试间歇性地失败了。我现在想经常执行测试。

我写了一个小批处理文件

```
:loop
mstest /testcontainer:"path/test.dll" /test:"mytest"
set /a COUNT=%COUNT%+1
if %COUNT GTR %MAX% goto end
goto loop 
```

虽然这很好用，但输出没有意义或没有意义。假设我运行这个测试 100 次我得到 100 次文本说

```
Loading ... 
Starting execution ...
Results
Passed/Failed 1
--------
Total 1 
```

并且将创建 100 个 .trx 文件...

我真正想要的是有这样的输出

```
Passed 97
Failed 3
--------
Total 100 
```

并且只有一个 .trx 文件。

我不知何故怀疑是否有可能在一次测试运行中多次运行测试，因为我没有在`mstest /help`输出中找到任何参数。

有没有办法创建一个尽可能接近给定请求的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T06:36:45.580

```
setlocal enabledelayedexpansion
set passed=0
set failed=0
for /l %%x in (1,1,%max%) do (
  mstest /testcontainer:"path/test.dll" /test:"mytest"
  if !errorlevel!==0 (
    set /a passed=passed+1
  ) else (
    set /a failed=failed+1
  )
)
echo Passed %passed% > %~n1.trx
echo Failed %failed% >> %~n1.trx
echo --------- >> %~n1.trx
echo Total %Max% >> %~n1.trx
endlocal 
```

# javascript - 如何为鼠标悬停时出现的按钮添加点击事件

> ID：12247514
> 
> 赞同：4
> 
> 时间：2012-09-03T12:02:30.183
> 
> 标签：javascript, image, button, mouseover

我有两个问题：

1.  我想`mouseover`在特定位置的图像事件上在图像周围显示 6 个按钮。可能吗？

2.  是否可以为这些按钮编写`onclick`事件？

我没有任何网页设计经验。我使用了下面的代码

**Javascript：**

```
function showIt(imgsrc)
{
document.getElementById('imageshow').src=imgsrc;
document.getElementById('imageshow').style.display='';
}

function hideIt()
{
document.getElementById('imageshow').style.display='none';
} 
```

**HTML：**

```
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button1"/>&nbsp;&nbsp;&nbsp;
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button2"/>&nbsp;&nbsp;&nbsp;
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button3"/><br>
<img src="Images/Image1.jpg" onmouseover="showIt(this.src)"><br>
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button4"/>&nbsp;&nbsp;&nbsp;
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button5"/>&nbsp;&nbsp;&nbsp;
<input type="button" id="imageshow" Onclick="onClickFunc()" style="display:none" value="Button6"/> 
```

但是当我`mouseout`从图像中，按钮正在消失。如果我删除该`onmouseout`事件，该按钮将保持不变，只是我不想这样做。而且我真的不知道如何在图像周围放置 6 个按钮。我打算这样做： ![在此处输入图像描述](../Images/65ec7d16dd7d0f050568a34ea4e13900.png)

所以请帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:17:08.867

是的，为什么不 ！！！

1.  我想在特定位置的图像鼠标悬停时在图像周围显示 6 个按钮。可能吗？ANS :- 为每个按钮提供与“imgBtn”相同的类，并使其默认不显示。在图像上的鼠标烤箱时，您可以编写代码

在 jquery 中像：-

```
jQuery('#imageID').hover(function(){
    jQuery('imgBtn').show();
}) 
```

在 javascript 中：

将此行粘贴到 img 标签上

```
onmouseover="document.getElementsByClassName("redText").style.visibility = 'visible';" 
```

* * *

1.  是否可以为这些按钮编写 onclick 事件？我没有任何网页设计经验。所以请帮助我。谢谢

ANS：是的，您可以在 onclick 按钮上编写任何函数，例如：

```
jQuery('#buttonID').click(function(){

    //button functionality
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:46:45.927

是的，这是可能的，您要做的就是根据需要定义所有六个按钮并设置属性，`display:none`当您将鼠标悬停在图像上以及当您想要显示所有六个图像时，然后调用一个函数`onmouseover`并设置`display:none`属性`display:''`这样，当您将鼠标悬停在图像上时，所有图像都会显示

第二，您可以`onClick`使用每个按钮编写，它会正常工作。

希望对你有用。

这将是六个按钮中每个按钮的代码

```
<input type="button" id="btn1" Onclick="onClickFunc()" style="display:none" value="Button1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:17:39.490

将图像设置为一个 div 的背景。在该 div 中创建另一个 div 并在其中编写 6 个按钮的代码。

通常`display:none`为此按钮 div 设置，当从 javascript 函数悬停该图像时，您可以`display:block`从 javascript 设置，然后六个按钮将显示在图像上。

以下是为按钮添加 onclick 事件的代码。

```
<button type="button" Onclick="alert('hai')">Click Me!</button> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:56:09.293

好的，我想到的唯一解决方案是使用图像映射和 jquery。

我已经构建了一个粗略的演示，您可能需要根据您的要求对其进行增强。

这是一个[演示](http://jsfiddle.net/mL6rd/)

除了中间的一个框外，所有的框都是图像映射。当您将鼠标悬停在任何图像映射上时，我会在 jquery 的帮助下显示一个按钮。

# javascript - 地图视图未使用 PhoneGap 加载

> ID：12247516
> 
> 赞同：3
> 
> 时间：2012-09-03T12:02:43.750
> 
> 标签：javascript, ios, cordova, jquery-mobile

我正在使用PhoneGap和jQueryMobile开发一个iPhone应用程序，在我的应用程序中我有两个html页面，第一个是index.html页面，第二个是mapView.html，现在，我的问题是当我从index.html打开mapView.html时使用

```
function loadMap() {
        $.mobile.changePage( "mapView.html", { transition: "pop"} );
} 
```

地图未加载。如果我在任何浏览器上打开 mapView.html，它可以完美运行，即使我通过更改 appDelegate
`self.viewController.startPage = @"mapView.html";`
类地图加载直接加载 mapView.html。有谁知道为什么我从另一个 .html 页面打开地图时没有加载地图？我的 PhoneGap 版本是 2.0.0
谢谢。

**编辑 1：** mapView.html 代码

```
<!DOCTYPE HTML>
<html>
    <head>
        <title>Map Location</title>
        <link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
        <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
        <script type="text/javascript" src="jquery.mobile-1.1.1.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"> </script>
        <script type="text/javascript">

            var demoCenter = new google.maps.LatLng(41,-87);

            var map;
            function initialize()
            {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                                          zoom: 7,
                                          center: demoCenter,
                                          mapTypeId: google.maps.MapTypeId.ROADMAP
                                          });
            }

            function addMarkers()
            {
                // perform your AJAX here. In this example the markers are loaded through the cityList array
                $.ajax({
                       type:'post',
                       url:'test.html',
                       data:'',
                       success:function(data)
                       {

                       // imagine that the data in this list
                       // will be retrieved from the AJAX response
                       // i used the cityList array just for testing
                       var cityList = [
                                       ['Chicago', 41.850033, -87.6500523, 1],
                                       ['Illinois', 40.797177,-89.406738, 2]
                                       ];

                       var marker, i;
                       var infowindow = new google.maps.InfoWindow();
                       for (i = 0; i < cityList.length; i++) 
                       {  
                       marker = new google.maps.Marker({
                                                       position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
                                                       map: map,
                                                       title: cityList[i][0]
                                                       });

                       google.maps.event.addListener(marker, 'click', (function(marker, i) {
                                                                       return function() {
                                                                       infowindow.setContent(cityList[i][0]);
                                                                       infowindow.open(map, marker);
                                                                       }
                                                                       })(marker, i));
                       }
                       }
                       });
            }

            $(document).ready(function() 
                              {
                              addMarkers();
                              });
            </script>
    </head>
    <body onload="initialize()">
        <div id="basic-map" data-role="page">
            <div data-role="header" data-theme="b">
                <h1>Map Location</h1>
                <a data-rel="back">Back</a>
            </div>
            <div data-role="content">   
                <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="map_canvas" style="height:350px;"></div>
                </div>
            </div>
        </div>      
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T17:31:03.673

使用`$.mobile.changePage`jQuery Mobile AJAX 功能。jQuery Mobile 仅加载 DOM 中第一个 data-role="page" 元素内的代码。

> 如[jQuery Mobile 文档](http://jquerymobile.com/demos//1.2.0/docs/api/events.html)中所述，在 jQuery Mobile 中，AJAX 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序`$(document).ready()`仅针对第一页执行。

您可以在下面找到一个包含两个页面的工作示例，通过 Ajax 执行导航，并在第二个页面中加载地图：

另请注意，您可以使用 rel="external" 或 data-ajax="false" 执行转换。这些属性的使用将导致整个页面刷新而没有动画过渡。

工作示例：

指示：

*   创建文件夹
*   在文件夹中创建一个名为 maps.js 的文件
*   在文件夹中创建一个名为 map-intro.html 的文件
*   在文件夹中创建一个名为 map.html 的文件
*   用相应的代码填充每个创建的文件，可以在下面找到

在 maps.js 中添加以下代码：

```
function initialize() {
    var mapCenter = new google.maps.LatLng(59.3426606750, 18.0736160278),
    myOptions = {
        zoom:10,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center: mapCenter
    },
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

$( document ).on( 'pageshow', '#map-page',function(event){
  initialize();
});

$( document ).on( 'click', '#map-anchor', function(event){
  event.preventDefault();
  $.mobile.changePage( "map.html", { transition: "flip" } );
}); 
```

在 map-intro.html 中添加以下代码：

```
<!doctype html>
<html lang="en">
   <head>
        <title>Map Intro Page</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script src="./maps.js"></script>
    </head>
    <body>
        <div id="map-intro-page" data-role="page">
            <div data-role="header">
                <h1><a data-ajax="false" href="/">Map Example</a></h1>
            </div>
            <div data-role="content">   
                <ul data-role="listview" id="my-list">
                    <li><a href="#" id="map-anchor">Go to Map</a></li>
                </ul>
            </div>
        </div>
    </body>
</html> 
```

在 map.html 中添加以下代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
        <title>jQuery mobile with Google maps geo directions example</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    </head>
    <body>
        <!-- /page -->
        <div data-role="page" id="map-page">
            <!-- /header -->
            <div data-role="header">
                <h1>Map</h1>
                <a data-rel="back">Back</a>
            </div>
            <!-- /content -->
            <div data-role="content" class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
                <div id="map_canvas" style="height:300px;"></div>
            </div>
        </div>
    </body>
</html> 
```

我希望这有帮助。

# java - 如何为项目/应用程序创建 java api 文档？

> ID：12247527
> 
> 赞同：0
> 
> 时间：2012-09-03T12:03:07.837
> 
> 标签：java, javadoc

我需要知道如何为项目/应用程序创建 java api 文档？我知道在 Eclipse 中创建评论，比如

```
 /**
 * Method to add two number
 * @param a int value
 * @param b int value
 * @return a+b
 */
private int add(int a,int b){
    return a+b;
} 
```

但是我需要 java 文档文件，而单击该文档应该像 sun java 文档一样打开，因此如何在文档和项目/应用程序之间创建和建立连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:06:05.240

正如 Dan 所说，它被称为 Javadoc。尝试

文件 > 导出 - 然后 - Java > Javadoc

在 Eclipse 中，在 Destination 下选择一个目标文件夹，单击复选框以选择要为其生成文档的 java 文件，然后单击 Finish。如果出现弹出窗口，请单击“全部同意”。转到您选择作为目标的文件夹，然后打开 allclasses-frame.html 或 allclasses-noframe.html 。

达达！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:06:08.350

执行此操作的工具称为 javadoc。对于较小的项目，您可以从命令行使用它。但是，我建议您学习如何将其与 ant 等自动构建工具集成。

# java - 将 ModelData 从 Ext GWT 2 迁移到 3

> ID：12247533
> 
> 赞同：1
> 
> 时间：2012-09-03T12:03:28.463
> 
> 标签：java, gwt, gxt

我有这个遗留的 Ext GWT 2 代码，我需要使用 Ext GWT 3 进行迁移：

```
 for (ModelData data: store.getRootItems()) {

        Element voiceElement = DOM.createDiv();
        Element labelElement;
        Element optionsElement;

        String text = data.get("text");
        String url = data.get("url");
                    ...
           } 
```

当 ModelData 是 Ext GWT 3.0 的一部分时，如何将此代码转换为 Ext GWT 3。

# javascript - 在元素悬停时使用 javascript 在弹出窗口中显示网站

> ID：12247538
> 
> 赞同：0
> 
> 时间：2012-09-03T12:03:57.520
> 
> 标签：javascript, html, popup

我试图在 html 页面中有一个动态弹出窗口。当用户悬停一个单词时，将出现弹出窗口。在弹出窗口中，我想调用一个带有悬停词作为参数的网页。它不需要处理页面中的每个单词。只有将鼠标悬停在我选择的单词上才会这样工作。例如，我的 html 页面中有一个文本“你好，这是一个示例文本”，用户将鼠标悬停在“示例”一词上，将出现一个弹出窗口，在弹出窗口中我将显示以下页面“www.blabla.com /?字=样本"

希望我很清楚。我希望它能够在静态页面上工作。我对javascript很陌生。我什至不知道从哪里开始，所以任何帮助将不胜感激。谢谢。

编辑：我希望弹出窗口成为模态弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:08:56.137

获取您想要具有此效果的元素，循环它们，为它们中的每一个添加事件侦听器，这会弹出一个窗口。

这是类似这样的粗略实现，其中单词`popup`周围有类：

```
[].slice.apply(document.getElementsByClassName('popup')).forEach(function (elem){
    elem.addEventListener('mouseover', function (){
        window.open('http://google.com/?q=' + this.innerHTML);
    }, false);
});​ 
```

[演示](http://jsfiddle.net/amaan/pgDPM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:08:36.990

这是非常基本的，请阅读[http://www.tizag.com/javascriptT/javascriptevents.php](http://www.tizag.com/javascriptT/javascriptevents.php)和[http://www.w3schools.com/jsref/met_win_open.asp上的教程](http://www.w3schools.com/jsref/met_win_open.asp)

但我可以告诉你，通过这种方法，浏览器会触发它们的弹出窗口拦截器。

# c - 比较C中的无符号字符数组

> ID：12247539
> 
> 赞同：0
> 
> 时间：2012-09-03T12:04:13.560
> 
> 标签：c, function, pointers, openssl

这是我的程序的输出：

```
Username: paolo
Password: paolo
254835d73cc88095a30fc74133beabe9d8463b2954493227b205ea326c8a9c86
254835d73cc88095a30fc74133beabe9d8463b2954493227b205ea326c8a9c86
No user or password inside the database; 
```

这是我的程序：

```
int main(void){

    int isok = -1;
    char *user = NULL, *pass = NULL;

    printf("Username: ");
    if(scanf("%m[^\n]%*c", &user) == EOF){
        perror("scanf user");
        return EXIT_FAILURE;
    }

    printf("Password: ");
    if(scanf("%m[^\n]%*c", &pass) == EOF){
        perror("scanf");
        free(user);
        return EXIT_FAILURE;
    }

    isok = check_login(user, pass);
    if(isok == 0){
        /* some code here */
    }
    else{
        /* some code here */
    }
    return EXIT_SUCCESS;
}

int check_login(char *u, char *p){

    int retval = -1;
    FILE *fp = NULL;
    char *tmp, *tmp2, *line = NULL;

    /* some code here */

    while(fgets(line, 255, fp) != NULL){
        tmp = strtok(line, " ");
        if(tmp == NULL){
            perror("strtok 1");
            free(u);
            free(p);
            free(line);
            free(fp);
            return -1;
        }

        tmp2 = strtok(NULL, "\n"); 
        if(tmp2 == NULL){
            perror("strtok 2");
            free(u);
            free(p);
            free(line);
            free(fp);
            return -1;
        }
        retval = hash_pwd(p, (unsigned char *)tmp2);
        if((strcmp(tmp,u) == 0) && (retval == 0)){
            free(line);
            free(fp);
            return 0;
        }
        else{
            continue;
        }
    }
    return -1;
}

int hash_pwd(char *to_hash, unsigned char *tocheck){
    SHA256_CTX context;
    unsigned char md[SHA256_DIGEST_LENGTH];
    size_t length = strlen((const char*)to_hash);
    int i;
    SHA256_Init(&context);
    SHA256_Update(&context, (unsigned char*)to_hash, length);
    SHA256_Final(md, &context);
    for(i=0; i<SHA256_DIGEST_LENGTH; i++){
        printf("%02x", md[i]);
    }
    printf("\n%s\n", tocheck);
    for(i=0; i<SHA256_DIGEST_LENGTH; i++){
        if(md[i] == tocheck[i]) continue;
        else return 1;
    }
    return 0;
} 
```

为什么我在函数*hash-pwd*中的比较不起作用？
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:35:53.887

它不起作用的原因是一个指向包含十六进制值的 ascii 字符串的指针；另一个是二进制值数组（您打印为十六进制）。

```
....
// print out the digest - a binary array of SHA256_DIGEST_LENGTH
// bytes printed in hex
for(i=0; i<SHA256_DIGEST_LENGTH; i++){
    printf("%02x", md[i]);
}

// A string of SHA256_DIGEST_LENGTH *2 + 1 length - containing
// the value in hex spelled out in ascii.
printf("\n%s\n", tocheck); 
```

因此，您需要将其中一个转换为另一个。然后比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:06:46.563

你怎么知道哈希比较失败了？它也可能是`strcmp()`电话：

```
if((strcmp(tmp,u) == 0) && (retval == 0)){ 
```

例如，您确定`tmp`不包含缺少的换行符`u`吗？

此外，不确定您是否正确处理了哈希加载，如果文件中有一长串十六进制字符，则需要在比较之前将其转换为二进制。SHA256 计算的哈希是二进制的，而不是十六进制字符串。

有两种（在我看来）解决这个问题的合理方法：

1.  在比较之前将从文件读取的哈希转换为二进制
2.  在比较之前将运行时计算的哈希转换为文本

您可以看到这两种解决方案是互为补充的，这对我来说似乎很自然。我不鼓励您在评论中提到的涉及临时文件的解决方案。

在上面，第二个可能是最容易实现的，因为将一堆字节转换为十六进制比反过来更容易。这是我会采用的解决方案，例如：

```
static int hash_to_string(char *output, size_t output_max,
                           const unsigned char *hash, size_t hash_size)
{
  size_t i;

  if(output_max < 2 * hash_size + 1)
    return 0;
  for(i = 0; i < hash_size; ++i)
    sprintf(output + 2 * i, "%02x", hash[i] & 0xff);
  output[2 * i] = '\0';
  return 1;
} 
```

使用指向足够大以保存字符串版本的缓冲区的指针调用上述方法，然后将其与从文件加载的缓冲区进行比较。

**更新**：或者，您可以使用现有的 API 并调用`[SHA256_End()](http://www.unix.com/man-page/All/3/SHA256_Update/)`以获取十六进制的哈希。

作为一般观察，不要这样做：

```
for(i=0; i<SHA256_DIGEST_LENGTH; i++){
    if(md[i] == tocheck[i]) continue;
    else return 1;
}
return 0; 
```

相反，这样做：

```
return memcmp(md, tocheck, sizeof md) != 0; 
```

# python - 打印到文件时如何使结果易于阅读？

> ID：12247541
> 
> 赞同：0
> 
> 时间：2012-09-03T12:04:17.353
> 
> 标签：python, file, printing, pickle, raw-input

我还是新手，但我认为我很接近。我的任务是计算平均值、中位数和众数，然后：

*   提示用户输入数字列表（提示：确保有一种方式让用户表明他们已完成提供数字列表）
*   打开一个包含数字列表的文件
*   计算数字列表的平均值、统计中位数和众数
*   将您的答案存储在另一个文件中
*   询问用户是否想查看答案，如果答案是肯定的，则打开文件并显示数字

我想让文件更“可读”。我现在得到的结果的一个例子是：

```
(lp1
S'3,5,6'
p2
aF4.666666666666667
aF5
aF3
a. 
```

任何帮助将不胜感激！

这是我的代码：

```
def mean(numbers):
    average = 0
    for number in numbers:
        average += number
    return average / float(len(numbers))

def median(numbers):
    middle = []
    for number in numbers:
        middle.append(number)
    middle.sort()
    middleValue = len(middle) / 2
    if len(middle) % 2 == 1:
        return middle[middleValue]
    else:
        return (middle[middleValue] + middle[middleValue - 1]) / 2

def mode(numbers):
    frequency = {}
    for number in numbers:
        times = frequency.get(number, None)
        if times == None:
            frequency[number] = 1
        else:
            frequency[number] = times + 1

    maxValue = max(frequency.values())
    for modeFreq in frequency:
        if frequency[modeFreq] == maxValue:
            return modeFreq        

import cPickle as pickle

def main():
    user_in = raw_input("Enter a list of numbers seperated by commas: ")
    numbers_as_strings = user_in.replace(' ', '').split(',')
    numbers = [float(x) for x in numbers_as_strings]
    if not user_in:
        return 0
    else:
        print "\nYour inputs: ", user_in, '\n'
        print "   Mean = ", mean(numbers)
        print " Median = ", median(numbers)
        print "   Mode = ", mode(numbers), '\n'
        pckl_file = file("mean_medi_mode.txt", "w")
        pickle.dump([user_in, mean(numbers),median(numbers),mode(numbers)],pckl_file)
main()

while True:
    answer = raw_input('Would you like to open a file with your results? ')
    if answer.strip() in "y Y yes Yes YES".split():
        f = open("mean_medi_mode.txt", 'r')
        for line in f:
            print line,
        print 'Done'
        break
    elif answer.strip() in "n N no No NO".split():
        print 'Done'
        break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:09:01.667

当重新打开一个 pickle 文件（这不是一种人类可读的文本格式）时，使用`pickle.load`：

```
given, average, median, mode = pickle.load(f) 
```

而不是你的`for line in f: print line`陈述。您的输出是 pickle 转储的原始内容，其中包含您保存的结果：

```
>>> import cPickle
>>> p = '''\
... (lp1
... S'3,5,6'
... p2
... aF4.666666666666667
... aF5
... aF3
... a.
... '''
>>> cPickle.loads(p)
['3,5,6', 4.666666666666667, 5.0, 3.0] 
```

对于您的目的，泡菜格式可能有点笨拙。使用更轻松的、人类可读的格式，例如[`json`](http://docs.python.org/library/json.html)或[`csv`](http://docs.python.org/library/csv.html)可能更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:11:21.767

尝试使用该`json`模块。它易于使用且易于阅读

```
import json
code...
def main():
    user_in = raw_input("Enter a list of numbers seperated by commas: ")
    numbers_as_strings = user_in.replace(' ', '').split(',')
    numbers = [float(x) for x in numbers_as_strings]
    if not user_in:
        return 0
    else:
        print "\nYour inputs: ", user_in, '\n'
        print "   Mean = ", mean(numbers)
        print " Median = ", median(numbers)
        print "   Mode = ", mode(numbers), '\n'
        json.dump([user_in, mean(numbers), median(numbers), mode(numbers)], fp) 
```

然后：

```
def print(fp):
    user_in, mean, median, mode = json.load(fp)
    print "\nYour inputs: ", user_in, '\n'
    print "   Mean = ", mean
    print " Median = ", median
    print "   Mode = ", mode, '\n' 
```

# java - 如何正确缓冲我的 Java 输入/输出/文件流？

> ID：12247542
> 
> 赞同：6
> 
> 时间：2012-09-03T12:04:26.773
> 
> 标签：java, file-io, stream, buffering

我正在编写一个需要通过网络发送文件的应用程序。到目前为止（在我大学的第一年）我只被教过如何使用标准的 java.net 和 java.io 类，所以我没有使用 java.nio 和 netty 以及所有这些好东西的经验。我使用 Socket 和 ServerSocket 类以及 BufferedInput/OutputStreams 和 BufferedFile 流设置了一个工作服务器/客户端，如下所示：

服务器：

```
 public class FiletestServer {

    static ServerSocket server;
    static BufferedInputStream in;
    static BufferedOutputStream out;

    public static void main(String[] args) throws Exception {
    server = new ServerSocket(12354);
    System.out.println("Waiting for client...");
    Socket s = server.accept();
    in = new BufferedInputStream(s.getInputStream(), 8192);
    out = new BufferedOutputStream(s.getOutputStream(), 8192);
    File f = new File("test.avi");
    BufferedInputStream fin = new BufferedInputStream(new FileInputStream(f), 8192);

    System.out.println("Sending to client...");
    byte[] b = new byte[8192];
    while (fin.read(b) != -1) {
        out.write(b);
    }
    fin.close();
    out.close();
    in.close();
    s.close();
    server.close();
    System.out.println("done!");
    }
} 
```

和客户：

```
public class FiletestClient {

    public static void main(String[] args) throws Exception {
    System.out.println("Connecting to server...");
    Socket s;
    if (args.length < 1) {
        s = new Socket("", 12354);
    } else {
        s = new Socket(args[0], 12354);
    }
    System.out.println("Connected.");
    BufferedInputStream in = new BufferedInputStream(s.getInputStream(), 8192);
    BufferedOutputStream out = new BufferedOutputStream(s.getOutputStream(), 8192);
    File f = new File("test.avi");
    System.out.println("Receiving...");
    FileOutputStream fout = new FileOutputStream(f);
    byte[] b = new byte[8192];
    while (in.read(b) != -1) {
        fout.write(b);
    }
    fout.close();
    in.close();
    out.close();
    s.close();
    System.out.println("Done!");
    }
} 
```

起初我没有使用缓冲，而是从 in.read() 写入每个 int。根据我在 Windows 7 上的网络监视器小工具，这让我的传输速度大约为 200kb/s。然后我按照上面的方法进行了更改，但使用了 4096 字节的缓冲区并获得了相同的速度，但接收到的文件通常比源文件大几千字节，这就是我的问题所在。我将缓冲区大小更改为 8192，现在通过无线传输到我的笔记本电脑的速度约为 3.7-4.5mb/秒，这对于现在来说已经足够快了，但我仍然遇到文件变大的问题（这会导致接收到 md5/sha 哈希测试失败）。

所以我的问题是什么是缓冲以获得不错的速度并最终在另一边得到完全相同的文件的正确方法？让它走得更快一点也会很好，但我对现在的速度很满意。我假设更大的缓冲区在某种程度上更好，我只需要找到那个点是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:10:58.173

您忽略了实际读取的数据大小。

```
while (in.read(b) != -1) {
    fout.write(b);
} 
```

即使只读取一个字节，也将始终写入 8192 个字节。相反，我建议使用

```
for(int len; ((len = in.read(b)) > 0;)
   fout.write(b, 0, len); 
```

您的缓冲区与您的 byte[] 大小相同，因此它们目前并没有真正做任何事情。

大多数网络的 MTU 大约为 1500 字节，您可以在速度较慢的网络（最大 1 GB）上获得高达 2 KB 的性能提升。8 KB 也可以。大于这个值不太可能有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:08:58.410

如果你真的想让它“如此完美”，你应该看看[try-catch-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)和[java.nio 包](http://docs.oracle.com/javase/7/docs/api/java/nio/package-summary.html)（或任何 nio 派生库）。

# android - 如何解析存储在字符串变量中的 xml？我们从具有身份验证的 web 服务获取 xml 响应？

> ID：12247546
> 
> 赞同：4
> 
> 时间：2012-09-03T12:04:37.640
> 
> 标签：android

我不确定它是否是一个明确的问题。我想要的是从 web 服务中检索 xml 响应。我有 web 服务的 url、用户名、密码、xml 正文等详细信息。我可以在字符串中获取 xml 响应变量。有人可以为我提供一个有用的链接来解析 xml 字符串吗？我共享用于检索 xml 的代码注意：-确保您有 commons-httpclient-3.1、commons-codec-1.6、commons-logging-1.1.1、junit-4.10 库

```
 import java.io.BufferedReader;
    import java.io.InputStream;
    import java.io.InputStreamReader;

    import org.apache.commons.httpclient.HttpClient;
    import org.apache.commons.httpclient.HttpStatus;
    import org.apache.commons.httpclient.UsernamePasswordCredentials;
    import org.apache.commons.httpclient.auth.AuthScope;
    import org.apache.commons.httpclient.methods.PostMethod;

    public class AbstractService
    {
        @SuppressWarnings( "deprecation" )
        protected String postForString( final String requestUrl, final String requestBody )
        {
            final StringBuilder result = new StringBuilder();
            HttpClient client = new HttpClient();

            try
            {
                PostMethod postRequest = new PostMethod( getAbsoluteUrl( requestUrl ) );

                postRequest.addRequestHeader( WebServiceClientConstants.CONTENT_TYPE,
                        WebServiceClientConstants.APPLICATION_XML );
                postRequest.setRequestBody( WebServiceClientConstants.REQUEST_HEADER + requestBody );

                client.getState()
                        .setCredentials(
                                new AuthScope( WebServiceClientConstants.HOST, WebServiceClientConstants.PORT,
                                        AuthScope.ANY_REALM ),
                                new UsernamePasswordCredentials( WebServiceClientConstants.USERNAME,
                                        WebServiceClientConstants.PASSWORD ) );

                int responseCode = client.executeMethod( postRequest );

                System.out.println( "[REQUEST][" + postRequest.getURI().toString() + "]" );
                System.out.println( "[STATUS][" + postRequest.getStatusLine().toString() + "]" );

                if ( HttpStatus.SC_OK == responseCode )
                {
                    String data = null;
                    final InputStream responseStream = postRequest.getResponseBodyAsStream();
                    final BufferedReader bufferedReader = new BufferedReader( new InputStreamReader( responseStream,
                            WebServiceClientConstants.UTF_8_ENCODING ) );

                    while ( ( data = bufferedReader.readLine() ) != null )
                    {
                        result.append( data );
                    }
                }

                postRequest.releaseConnection();

            }
            catch ( Exception e )
            {
                e.printStackTrace();
            }

            return result.toString();
        }

        private String getAbsoluteUrl( String requestUrl )
        {
            return WebServiceClientConstants.SERVIE_BASE_URL + requestUrl;
        }
    } 
```

WebServiceClientConstants 接口

```
package com.test.service.info;
public interface WebServiceClientConstants
{
    String  PROTOCOL        = "http://";
    String  HOST            = "youraddress.blah.test.com";
    Integer PORT            = 8080;
    String  SERVIE_BASE_URL = "http://youraddress.blah.test.com:8080/test/seam/resource/Services/";
    String  USERNAME        = "Username";
    String  PASSWORD        = "password";
    String  REQUEST_HEADER  = "<?xml version=\"1.0\"?>";
    String  CONTENT_TYPE    = "Content-Type";
    String  APPLICATION_XML = "application/xml";
    String  UTF_8_ENCODING  = "UTF-8";
} 
```

菜单服务接口

```
public interface MenuService
{
    String getMenu();
} 
```

MenuServiceImpl.java

```
public class MenuServiceImpl extends AbstractService implements MenuService
{
    @Override
    public String getMenu()
    {
        String requestUrl = "getMenu";
        String requestBody = "<ServiceRequest>" + "<ShortName>AppName</ShortName>"
                + "</ServiceRequest>";

        return postForString( requestUrl, requestBody );
    }
} 
```

然后在一些活动中写

```
 MenuService menuService = new MenuServiceImpl();
        String prMenu = menuService.getMenu();
        Assert.assertNotNull( prMenu );

        test.setText(prMenu); 
```

现在我将 xml 响应存储在 prMenu 变量中。它看起来像这样 [http://www.coders-global.com/works/dev/menuserivicetemp.xml。](http://www.coders-global.com/works/dev/menuserivicetemp.xml.Now)现在我该如何解析这个 Xml 字符串。请采取看了一下链接。它看起来很复杂，我之前在其他一些线程中询问过如何解析这个链接，并且回复没有那么有用。如果有任何有用的链接或建议，请告诉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:16:22.903

您的问题似乎相当于“我如何解析存储在内存中的 XML 内容”，因为您似乎能够从远程服务器正确获取数据。

本质上，Java 库中内置了两种工具，分别称为 SAX 和 DOM 解析器。这两个选项的工作方式完全不同，重要的是您要了解差异并在它们之间进行明智的选择。

Here is an example of using the DOM parser in android [XML Parsing Tutorial](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/) which is probably the direction you want to take given the low volume of the data.

PS: also using String.append as you do is pretty bad from a performance point of view - you need to look at the stringbuilder classes that are optimised for this kind of task.

# iphone - 在应用程序中购买包含大量数据的“包”。优化用户体验

> ID：12247548
> 
> 赞同：0
> 
> 时间：2012-09-03T12:04:44.870
> 
> 标签：iphone, in-app-purchase, large-files, updates

我正在开发一个应用程序，可以选择在应用程序内购买音频包，每个包大约 30 MB，大约 500 个文件。我想从 10 个可用包开始，随着时间的推移添加新包，可能每月 4-5 个。一个给定的用户预计在任何时候使用的包不超过 10 个。以下是一些考虑因素，我将非常感谢有关以下方面的建议/建议：

1.  我可以将应用程序设置为仅在购买包后才下载包的音频文件吗？还是需要将它们包含在主捆绑包中，通过“解锁”功能来访问它们？
2.  我可以让用户选择删除包含在已“完成”的包中的音频文件，当然还有稍后重新下载的选项 - 毕竟它已经付费了。
3.  我可以设置应用程序，以便更新可用包列表，而无需每次都通过应用程序商店重新提交吗？
4.  如果我需要替换其中一个包中的单个文件 - 如何将此更新推送给已安装该包的最终用户？
5.  如果我选择在主包中包含所有单词 - 并且我想稍后添加更多包，iPhone 是否可以保留原始内容，以便使用原始版本的用户只需要下载新内容？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T17:00:42.390

要回答您的问题：

1.  您可以对其进行设置，以便可以从您自己的服务器下载内容。
2.  是的，但您必须跟踪哪些用户下载了哪些内容。我相信有 API 可以帮助你解决这个问题，比如`MKStoreKit`你可以在 git 上找到。
3.  如果内容在您自己的服务器上，那么您只需更新它而无需重新提交应用程序。但是您将进行智能设置，以便您可以根据从服务器 ping 的信息动态更新应用程序的 UI。
4.  不确定，但可能有办法。
5.  不确定，但这似乎不是一种合乎逻辑的方法，尤其是因为您将在自己的服务器上存储数据。

`iOS5 Programming Pushing The Limits`并`Napier`就`Kumar`这一切如何运作提供了一个很好的高级解释。您可能确实需要对其进行一些阅读。

我希望这能让你上路。

# mysql - 带有 where 子句的 MySQL 限制

> ID：12247555
> 
> 赞同：0
> 
> 时间：2012-09-03T12:05:10.750
> 
> 标签：mysql, limit

我想要搜索的视图中有一些数据。数据具有不同的类型（在列中定义），我想为每种类型定义不同的限制。

例子`my_view`

```
id   |    type    |     content
--        ----          -------
1         'dog'        'Lorem ipsum dolor sit amet, consectetur...'
2         'cat'        'adipisicing elit, sed do eiusmod...'
3         'cat'        'tempor incididunt ut labore...'
4         'dog'        'et dolore magna aliqua...' 
```

我想要一个查询：

```
SELECT * FROM `my_view` WHERE ... LIMIT [[ max of 2 dogs, 1 cat and 1 sheep]] 
```

我当然可以为此做三个查询并将它们组合在一起（在查询中或之后），但据我所知，将为每次搜索重新创建视图，因此效率很低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:06:42.310

你不能一举两得。

使用联合

```
(SELECT * 
FROM my_view
WHERE type='dog'
ORDER BY yyy
LIMIT 2)

UNION

(SELECT * 
FROM my_view
WHERE type='cat'
ORDER BY xxx
LIMIT 1) 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T14:13:09.177

像这样使用子选择：

```
SELECT * 
FROM dogs, cats, sheeps, animals 
WHERE 
dogs.dog_id = (select dogs.dog_id from dogs where dogs.fk_animal_id = animals.animal_id limit 2) AND 
cats.cat_id = (select cats.cat_id from catswhere cats.fk_animal_id = animals.animal_id limit 1) AND 
sheeps.sheep_id = (select sheeps.sheep_id from sheeps where sheeps.fk_animal_id = animals.animal_id limit 1) 
```

# objective-c - 在启动时重新加载内容

> ID：12247559
> 
> 赞同：1
> 
> 时间：2012-09-03T12:05:25.707
> 
> 标签：objective-c, ios, xcode

几天来，我一直在努力尝试了解如何在应用程序启动后立即执行操作。

基本上，如果用户打开一个决定他是否想在启动时下载新内容的开关，我想从我的网站下载一个 plist。

重点是：

*   “A”类具有重新加载内容的方法；
*   “B”类有一个开关，如果打开，它会告诉委托在应用程序启动后立即执行重新加载内容方法

现在，如果打开了“B”类的开关，我不知道如何告诉 AppDelegate 运行“A”类的方法。显然我需要使用`NSUserDefaults`，但在那之后我很迷茫。

任何人都可以让事情更清楚吗？或者，是否有更舒适的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:24:56.147

是的，您可以使用 NSUserDefaults 执行此操作

在你的班上 b。

```
-(void)swithChanged
 {
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    //check if !null
   if(![[defaults objectForKey:@"shouldDownload"]isKindOfClass:[NSNull class]]){
         if([(NSNumber*)[defaults objectForKey:@"shouldDownload"]boolValue])
          {
             [defaults setObject:[NSNumber numberWithInt:0] forKey:@"shouldDownload"];
             [defaults synchronize];
          }else{
             [defaults setObject:[NSNumber numberWithInt:1] forKey:@"shouldDownload"];
             [defaults synchronize];

         }
     }else{
       //set your NSUserDefault here for the first time
    }

} 
```

在您的 AppDelegate 中

```
- (void)applicationDidBecomeActive:(UIApplication *)application{
   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    //check if !null
   if(![[defaults objectForKey:@"shouldDownload"]isKindOfClass:[NSNull class]]){
         if([(NSNumber*)[defaults objectForKey:@"shouldDownload"]boolValue])
          { 
              //you can write the downloadData method in this appDelegate,
             //[self downloadData]

             //OR
             AClass *aClass = [AClass alloc]init];
             [aClass downloadData];
          }else{
            //do not download
         }
     }else{
       //the default behaviour of app, download or not?
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:11:02.230

这里有一篇文章可以帮助您了解应用程序启动期间的流程：http: [//www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging](http://www.cocoanetics.com/2010/07/understanding-ios-4-backgrounding-and-delegate-messaging)

另外，请查看此帖子： [applicationWillEnterForeground 与 applicationDidBecomeActive、applicationWillResignActive 与 applicationDidEnterBackground](https://stackoverflow.com/questions/3712979/applicationwillenterforeground-vs-applicationdidbecomeactive-applicationwillre)

# wolfram-mathematica - 如何使用mathematica输入频率数据

> ID：12247561
> 
> 赞同：0
> 
> 时间：2012-09-03T12:05:39.690
> 
> 标签：wolfram-mathematica

我在如何在 Mathematica 中输入频率数据时遇到了麻烦。例如，我有 0 个具有 10,000 个频率，1 个具有 9000 个频率，2 个具有 3000 个频率和 4 个具有 1000 个频率。谁能帮我把这些数据输入mathematica，然后我需要找到这些数字的一阶、二阶和三阶矩。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T21:10:38.227

```
Table[
  fun[
    EmpiricalDistribution[
      {10000, 9000, 3000, 1000} -> {0, 1, 2, 4}
    ]
  ], 
  {fun, {Mean, Variance, Kurtosis}}
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:19:01.627

就像是 ：

```
data = Join[ConstantArray[1, 9000], ConstantArray[2, 3000], ConstantArray[4, 1000]];

Mean[data]
Variance[data]
Kurtosis[data] 
```

# c# - 强制构建在某些条件下失败

> ID：12247563
> 
> 赞同：2
> 
> 时间：2012-09-03T12:05:48.000
> 
> 标签：c#, build, constraints

我有一个 HierarchicalDictionary 类和一些派生类，例如 Territory、Department 等。我想控制从 HierarchicalDictionary 派生的所有类在构建期间包含该类（Territory、Department 等）类型的属性“层次结构” . 如果不是这样，我希望构建失败。

也就是说，如果 Territory 不包含 Territory 类型的属性 Hierarchy 或 Department 不包含 Department 类型的属性 Hierarchy，则构建应该会失败。

所以我希望在编译条件期间像这样检查（伪代码）：

```
foreach (Class1 that derive from HierarchicalDictionary)
  if(!(Class1 contains property Hierarchy of type Class1))
    build fail 
```

我考虑过[CodeContracts](http://research.microsoft.com/en-us/projects/contracts/)，但我不知道在构建期间是否存在因条件而失败的可用性。可能有一些适当的方法吗？

**UPD：**我将尝试描述针对我的情况的其他限制：

HierarchicalDictionary 不存储（在数据库中）类。并存储派生类，因此相应的表包含数据库中的自引用字段。当我从 HierarchicalDictionary 派生类“C1”时，我的意思是，这个类必须包含“C1”类型的属性（或字段）“层次结构”。像 [ClassMustContainHierarchyFieldOfMyselfType] 属性。我想在编译期间控制这个事实。如果我有从 HierarchicalDictionary 派生的类“C2”并且不包含字段（或属性）“public C2 Hierarcy”，则构建应该失败。

可能没有任何“内置”解决方案。可能我可以使用构建前或构建后事件或其他任何东西（例如 CodeContracts）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:08:32.913

如果`HierarchicalDictionary`可以`abstract`，您可以将属性定义为[`abstract`](http://msdn.microsoft.com/en-us/library/yd3z1377.aspx)在基类中。这在每个子类中强制执行具体实现。

如果您需要能够创建基类的实例，`HierarchicalDictionary`您可以通过添加接口来强制执行该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:35:58.773

好吧，也许你可以做这样的事情：

```
// GENERIC base class 
public abstract class A<T> 
{
    public abstract T GetMyType {get;}  
}

//derived ones 
public class B : A<B>
{
   public override B GetMyType
   {     
      get {
        return new B();     
      }
   }
}

public class C : A<C>
{
   public override C GetMyType 
   {     
      get  {
         return new C();        
      }
   }
} 
```

在代码之后：

```
new B().GetMyType.ToString(); //B 
new C().GetMyType.ToString(); //C 
```

*因此，您使用抽象方法*创建约束，而且每个被覆盖的方法都返回自己的类型，因为它们是从泛型基类派生的。

# java - 如何获取 JCheckbox 的选中索引？

> ID：12247567
> 
> 赞同：3
> 
> 时间：2012-09-03T12:05:53.970
> 
> 标签：java, swing

如何获取 JCheckbox 的选定索引（从使用 for 循环添加到屏幕的多个 jcheckbox 中）？

```
// for some t values:
checkBoxes[t] = new JCheckBox("Approve");
checkBoxes[t].addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent  e) {
        boolean selected = checkBoxes[t].isSelected();
        System.out.println("Approved"+selected);
    }
}); 
```

当我单击复选框时，我想获取所选复选框的索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:11:45.263

您有一个 JCheckBox 数组，您可以简单地遍历您的数组并找出选择了哪个 JCheckBox。

关于：

> 当我单击复选框时，我想获取所选复选框的索引。

`getSource()`编辑：您会发现使用传递给 ActionListener 的 ActionEvent的方法选择了哪个复选框。例如，您可以将 ActionListener 更改为如下：

```
checkBoxes[t].addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent  e) {
    boolean selected = checkBoxes[t].isSelected();
    System.out.println("Approved"+selected);

    int index = -1;
    for (int i = 0; i < checkBoxes.length; i++) {
      if (checkBoxes[i] == e.getSource()) {
        index = i;
        // do something with i here
      }
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:51:21.587

据我了解，您希望获取选定对象的索引，`JCheckBox`以便对用户的操作做出适当的响应。

如果是这种情况，您可能需要考虑一种不同的方法：您可以`ItemListener`为每个复选框注册一个。

```
JCheckBox check = new JCheckBox("Approve");
check.addItemListener(new ItemListener() {
  public void itemStateChanged(ItemEvent e) {
    if (check.isSelected()){
      System.out.println(check.getName() + " is selected");
    }
  }
}); 
```

（灵感来自[java2s.com 教程](http://www.java2s.com/Tutorial/Java/0240__Swing/CheckifaJCheckBoxisselectedinitsitemchangelistener.htm)）

在这种情况下，事件将立即触发，您将始终知道刚刚单击了哪个复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:34:57.570

我会尝试类似的东西：

```
for (int i=0; i < checkBoxes.length; i++) {
if (checkBoxes[i].isSelected() == true) {
index = i; }
return index; } 
```

根据您的问题，这就是我收集到的您正在寻找的内容。

编辑：

我之前的方法是有缺陷的，因为它采用了一种非常幼稚的方法，即只会选择一个框，并且不会取消选择任何框。

其中 'e' 是 ActionEvent 对象，

```
for (int i=0; i < checkBoxes.length; i++) {
if (checkBoxes[i] == e.getSource()) {
index = i; } }
return index; 
```

这样就可以识别最近的选择或取消选择复选框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:36:56.683

遍历复选框并检查[isSelected](http://www.java2s.com/Code/JavaAPI/javax.swing/JCheckBoxisSelected.htm)标志

# android - 如何通过单个活动显示 20 个静态 xml 布局？

> ID：12247568
> 
> 赞同：0
> 
> 时间：2012-09-03T12:06:02.350
> 
> 标签：android, xml, android-activity

我有 20 个 xml 布局，我必须按顺序显示。它们是静态的，不包含任何更新或操作。我想要的只是每个布局中的下一个按钮，并在单击下一个按钮时一个一个地显示它们。我的问题是我可以通过一个活动来完成吗？还是我必须进行 20 次 corrs 活动来陪伴它？

PS：如果可以帮助将它们放在某个循环或其他东西中，我可以将布局命名为任何名称。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:09:55.483

我认为您可以为此使用 ViewFlipper。

```
ViewFlipper flipper = (ViewFlipper) findViewById(R.id.flipper);

//Inflate the Views
LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v1 = inflater.inflate(R.layout.t1, null);
View v2 = inflater.inflate(R.layout.t2, null);
View v3 = inflater.inflate(R.layout.t3, null);

//Add the views to the flipper
viewFlipper.addView(v1);
viewFlipper.addView(v2);
viewFlipper.addView(v3);

//Move between them
flipper.showNext();
flipper.showPrevious(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:10:07.730

不，你不需要新的活动。只需致电`setContentView(R.layout.thenextlayout)`，但有更好的方法可以做到这一点并根据您的需要进行设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:11:04.133

我建议将[片段](http://developer.android.com/guide/components/fragments.html)与[replace()](http://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment,%20java.lang.String%29)一起使用。如果您不熟悉片段，请考虑使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)。

# loops - 如何在 JasperReports .jrxml 文件中使用循环？

> ID：12247572
> 
> 赞同：2
> 
> 时间：2012-09-03T12:06:28.943
> 
> 标签：loops, for-loop, jasper-reports

我正在使用 iReport Designer 来设计 .jrxml 文件。

如何在 .jrxml 文件中使用*for*循环或*if循环？*
可能吗？
如果是怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-15T13:39:56.080

您可能希望使用 scriptlet。它基本上是一个扩展以下两个类中的任何一个的 Java 类：

*   [`net.sf.jasperreports.engine.JRAbstractScriptlet`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRAbstractScriptlet.html)
*   [`net.sf.jasperreports.engine.JRDefaultScriptlet`](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRDefaultScriptlet.html)

在scriptlet 中，您可以指示每次报告事件发生时（例如，报告、页面或列初始化）都应该执行一段特定的代码。

在 scriptlet 中，您可以使用循环。您可以访问字段、参数和变量值。您还可以调整变量值。

[JasperReports Ultimate Guide](http://community.jaspersoft.com/system/files/documentation/jasperreports-ultimate-guide-3v2.pdf)中有一个关于 scriptlet 的章节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:47:54.437

那么您可以做的是创建一个选定字段列表（客户端 UI 选择）并将其作为集合传递给 JasperFillManager.fillReport 并在 jrxml 中创建一个字段名称 _THIS ，它将代表列表中的值。并且当您希望这些字段循环打印时，请将它们放在报告的详细信息带中。

# git - Git推送到已经存在文件的远程

> ID：12247573
> 
> 赞同：0
> 
> 时间：2012-09-03T12:06:32.523
> 
> 标签：git, deployment, git-checkout

我想在一个已经有很多内容的网站上开始使用 git（比如几十 GB 的视频和照片）。我将所有源代码（PHP、HTML 等）本地存储在我的计算机上。

我喜欢[这个用于 git 部署的解决方案，](http://toroid.org/ams/git-website-howto)但我担心 git 会删除该远程服务器上的多媒体文件（如果它们不在存储库 git 中）。

我已将包含照片和视频的文件夹放入 gitignore。

所以问题是：如果在你建立一个裸存储库之后，GIT_WORK_TREE 中已经有文件，那么它们会在你推送后被删除吗？还是可以以某种方式删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:12:45.560

结帐时，Git 不会触及任何未跟踪的内容，因此您很安全。

您可能应该避免在`-f`checkout 命令中使用 (force) 标志，这样如果您有未跟踪的文件在推送中被跟踪，git 会要求您确认覆盖它们。

# c++ - 如何在 Visual Studio / C++ / .NET 中快速找到给定声明所需的头文件？

> ID：12247576
> 
> 赞同：0
> 
> 时间：2012-09-03T12:06:42.880
> 
> 标签：c++, .net, visual-studio-2010, header-files

我正在尝试编译我在 Internet 上找到的包含该函数的 Visual Studio / C++ 代码片段：

```
Marshal::SizeOf() 
```

编译代码段时，我收到错误消息：

```
error C2653: 'Marshal' : is not a class or namespace name 
```

所以我想我需要包含一个带有这个命名空间或类的定义的头文件，以及 SizeOf() 函数。

当我`Marshal::SizeOf` `C++`在 Google 中查找时，我找到[了这个帮助页面](http://msdn.microsoft.com/en-us/library/y3ybkfb3.aspx)，但是在这个页面上没有关于必须包含哪个头文件才能使用这个功能的信息。

是否有一个文档页面可以查找所有 .NET 类和函数并轻松找到必须包含的 C++ 头文件才能使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:12:02.840

您需要了解 C++/CLI 是什么。它是 Microsoft 对 C++ 的专有扩展，用于简化本机代码和托管代码（即 .Net）之间的接口。

`Marshal`不是 C++ 类，它是 C++/CLI 类。因此，没有要包含的标题。就是`#import`你要找的。

# php - 如果 Post 值等于其他 post 值以外的值，则回显“失败”；？

> ID：12247581
> 
> 赞同：2
> 
> 时间：2012-09-03T12:06:59.813
> 
> 标签：php, sql

我有两个组合框，一个用于报告得分，一个用于设置进球者，如果在 post['submit'] 上，我该如何做到这一点

如果 $_POST['Score1'] 和 $_POST['Score2'] 不等于 $_POST['homegoalscorer1'] 和 $_POST['awaygoalscorer1'] 则 echo"fail";

就像是;

```
 if(isset($_POST['submit']))   
 {
 $homescore = $_POST['Score1'];
 $awayscore = $_POST['Score2'];

 $homegoalscorer = $_POST['homegoalscorer1'];
 $awaygoalscorer =  $_POST['awaygoalscorer1'];

   if '$homescore' + '$awayscore' != $homegoalscorer + $awaygoalscorer {
      echo "failed";
   }
      else {

            }
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:09:46.560

变量上的单引号将把该变量引入一个字符串而不执行。你也忘了加括号：

```
if(isset($_POST['submit']))   {
    $homescore = (float)$_POST['Score1'];
    $awayscore = (float)$_POST['Score2'];

    $homegoalscorer = (float)$_POST['homegoalscorer1'];
    $awaygoalscorer =  (float)$_POST['awaygoalscorer1'];

    if (($homescore+$awayscore) != ($homegoalscorer+$awaygoalscorer)) {
        echo "failed";
    } else {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:09:01.300

在 if 语句中使用一些括号来强制在正确的上下文中进行条件设置 - 为什么要将变量封装在单引号中？

```
if (($homescore + $awayscore) != ($homegoalscorer + $awaygoalscorer))
{
// Your code continues.... 
```

# blackberry - 以编程方式连接 2 个号码

> ID：12247584
> 
> 赞同：0
> 
> 时间：2012-09-03T12:07:14.090
> 
> 标签：blackberry

我创建了一个简单的应用程序（使用 phonelistener），它监听来电，当来电时，应用程序拨打另一个号码。现在我如何以编程方式加入这两个号码（不是手动，因为我知道如何手动进行）以建立电话会议？

例如来电号码 - 092098

```
 Dialled number - 447767 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:16:32.777

考虑[EventInjector](http://www.blackberry.com/developers/docs/4.1api/net/rim/device/api/system/EventInjector.html)并在必要时注入[键盘事件。](http://www.blackberry.com/developers/docs/4.1api/net/rim/device/api/system/EventInjector.KeyEvent.html)

它将模拟用户键盘输入并执行您想要的操作。

确保您在应用程序启动时[请求](http://tinyurl.com/d6stf2s)并[设置了相关权限](http://www.blackberry.com/developers/docs/4.5.0api/net/rim/device/api/applicationcontrol/ApplicationPermissionsManager.html)。否则`EventInjector`行不通。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-03T13:19:44.477

您应该考虑将 Twilio 集成到您的应用程序中。

[http://www.twilio.com/docs/howto/simple-conference](http://www.twilio.com/docs/howto/simple-conference)

# mysql - 如何将in子句用于内连接

> ID：12247587
> 
> 赞同：-3
> 
> 时间：2012-09-03T12:07:16.727
> 
> 标签：mysql, sql, join

我需要这样的查询；

```
select a.*, b.column1 from table1 a
inner join table2 b on (b.id in (id_array)) 
```

此查询不返回任何内容。

我想要做什么：我从table1中检索id组。然后从table2中获取这些id的名称列。所以，我为此使用内部连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:08:58.557

不应该只是加入吗？

```
select a.*, b.* from table1 a
inner join table2 b on b.id = a.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:11:23.017

```
select *
from table1, table2
where find_in_set(id, ids) > 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:11:41.910

```
select a.* , b.* from table1 a inner join table2 b on a.id = b.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:12:35.863

我假设这`a.ids`是某种 id 列表，因此您可以使用该[`find_in_set()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)函数：

```
select * 
from table1 a
join table2 b on find_in_set(b.id, a.ids) > 0 
```

# grails - 如何使用 log4j (Config.groovy) 将 println 输出从控制台重定向到 grails 中的指定日志文件

> ID：12247594
> 
> 赞同：1
> 
> 时间：2012-09-03T12:07:30.870
> 
> 标签：grails, logging, console, log4j, stdout

在我的应用程序中，我使用`println "Some text here ${var}"`语句将一些“调试”信息发送到控制台。但我想将数据发送到指定的文件。

可以通过配置 Config.groovy 文件来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:00:33.013

您应该直接使用记录器。它简单、干净、有文档且灵活。

[http://grails.org/doc/latest/guide/single.html#logging](http://grails.org/doc/latest/guide/single.html#logging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T14:30:55.393

你不能。日志消息必须通过 log4j 才能由 Grails 和 log4j 处理。

您可以做的是将`println`代码中的所有实例替换为`log.debug`; 这应该是一个简单的搜索并用您的文本编辑器或 IDE 替换。

如果这不可能，您可以尝试将全局`System.out`对象替换`PrintStream`为`BootStrap.groovy`.

# bash - bash 脚本选项卡

> ID：12247597
> 
> 赞同：0
> 
> 时间：2012-09-03T12:07:44.517
> 
> 标签：bash, scripting, escaping

我是 Bash 脚本的新手。

这是脚本中包含的命令：

`arecacli64 disk info`通常给出：

```
  # Ch# ModelName 容量使用情况

==================================================== ==============================
  1 1 ST3750330NS 750.2GB RAID 套装 # 00   
  2 2 ST3750330NS 750.2GB RAID 套装 # 00   
  3 3 ST3750330NS 750.2GB RAID 套装 # 00   
  4 4 ST3750330NS 750.2GB RAID 套装 # 00   
  5 5 ST3750330NS 750.2GB RAID 套装 # 00   
  6 6 ST3750330NS 750.2GB RAID 套装 # 00   
  7 7 ST3750330NS 750.2GB RAID 套装 # 00   
  8 8 ST3750330NS 750.2GB RAID 套装 # 00   
  9 9 ST3750330NS 750.2GB RAID 套装 # 00   
 10 10 ST3750330NS 750.2GB RAID 套装 # 00   
 11 11 ST3750330NS 750.2GB RAID 套装 # 00   
 12 12 ST3750330NS 750.2GB RAID 套装 # 00   
 13 13 ST3750330NS 750.2GB RAID 套装 # 00   
 14 14 ST3750330NS 750.2GB RAID 套装 # 00   
 15 15 ST3750330NS 750.2GB RAID 套装 # 00   
 16 16 ST3750330NS 750.2GB RAID 套装 # 00   
 17 17 ST3750330NS 750.2GB 突袭套装 # 00   
 18 18 ST3750330NS 750.2GB RAID 套装 # 00   
 19 19 ST3750330NS 750.2GB RAID 套装 # 00   
 20 20 ST3750330NS 750.2GB HotSpare[全球]
 21 21 ST3750330NS 750.2GB RAID 套装 # 00   
 22 22 ST3750330NS 750.2GB RAID 套装 # 00   
 23 23 ST3750640NS 750.2GB RAID 套装 # 00   
 24 24 ST3750330NS 750.2GB 突袭套装 # 00   
==================================================== ==============================

```

我的简单脚本是：

```
F=`dmidecode |grep  "Product Name:"|cut -d ":" -f2|head -1`

if [ $F == "X7DB8" ]
then
echo
echo
echo -e "$VERT" HOSTNAME : `hostname`"$NORMAL"
echo -e "$BLEU" TYPE :"$NORMAL" `dmidecode -s system-manufacturer`
echo -e "$BLEU" MODEL :"$NORMAL" `dmidecode -t system |grep "Product Name:"|cut -d ":" -f2`

echo "-------------------->"
echo

echo -e  `/usr/local/bb/ext/Raid/arecacli64 disk info`

fi 
```

但是结果显示（与raid ctrl有关的部分）没有命令显示的任何选项卡`arecalcli64 disk info`

```
主机名：xxxx@www.com
 类型：超微
 型号：X7DB8
-------------------->

  # Ch# ModelName 容量使用情况 ============================================= ==================================== ST3750330NS 750.2GB Raid Set #00 2 2
ST3750330NS 750.2GB 突袭套装 # 00 3 3
ST3750330NS 750.2GB RAID 套装 # 00 4 4
ST3750330NS 750.2GB RAID 套装 # 00 5 5
ST3750330NS 750.2GB RAID 套装 # 00 6 6
ST3750330NS 750.2GB 突袭套装 # 00 7 7
ST3750330NS 750.2GB RAID 套装 # 00 8 8
ST3750330NS 750.2GB 突袭套装 # 00 9 9
ST3750330NS 750.2GB RAID 套装 # 00 10 10
ST3750330NS 750.2GB 突袭套装 # 00 11 11
ST3750330NS 750.2GB RAID 套装 # 00 12 12
ST3750330NS 750.2GB RAID 套装 # 00 13 13
ST3750330NS 750.2GB RAID 套装 # 00 14 14
ST3750330NS 750.2GB RAID 套装 # 00 15 15
ST3750330NS 750.2GB 突袭套装 # 00 16 16
ST3750330NS 750.2GB RAID 套装 # 00 17 17
ST3750330NS 750.2GB 突袭套装 # 00 18 18
ST3750330NS 750.2GB RAID 套装 # 00 19 19
ST3750330NS 750.2GB RAID 套装 # 00 20 20
ST3750330NS 750.2GB HotSpare[全球] 21 21
ST3750330NS 750.2GB 突袭套装 # 00 22 22
ST3750330NS 750.2GB 突袭套装 # 00 23 23
ST3750640NS 750.2GB RAID 套装 # 00 24 24
ST3750330NS 750.2GB Raid Set #00 =========================================== ==================================== GuiErrMsg：成功。

```

我已经尝试使用`\t` `\`或使用`sed`等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:29:13.200

代替

```
echo -e  `/usr/local/bb/ext/Raid/arecacli64 disk info` 
```

只需使用

```
/usr/local/bb/ext/Raid/arecacli64 disk info 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:04:55.630

如果您引用命令替换，您将获得正确的输出。

```
echo  "`/usr/local/bb/ext/Raid/arecacli64 disk info`" 
```

`-e`不需要该标志，因为您没有指定任何`\t`字符；选项卡嵌入在的输出中，`arecacli64`并通过引用其输出来保留。

但正如 kkeller 指出的那样，首先没有必要使用命令替换。

# android - iOS 和 Android 共享订阅计费的最佳实践

> ID：12247602
> 
> 赞同：0
> 
> 时间：2012-09-03T12:08:06.543
> 
> 标签：android, ios, shared, subscription

我想问一下对于 iOS 和 Android 的共享订阅计费是否有任何最佳实践。

目前，我们正在开发一款适用于 Android 和 iOS 的移动应用程序（都是原生 sdk，不是跨平台的）。我们在应用程序中有这个特定的功能，您需要订阅才能访问。但这将是一个共享订阅。一次性付款，无论用户使用什么设备订阅。

对不起，但我不太擅长解释事情，所以也许我会给你一个场景。我希望它能帮助你理解我在说什么。

例如，用户有两部手机，一部 Android 手机和一部 iPhone。然后，他在他的 iPhone 和 Android 手机中安装了我们的应用程序。现在，他在他的 iPhone 上打开了我们的应用程序，他想要访问该特定功能，所以他订阅了。有了这个，我们作为开发人员想要做到的是，当他在他的 android 手机中打开应用程序时，他已经能够访问该特定功能，因为他在使用 iPhone 应用程序时已经订阅了。

由于谷歌和苹果有不同的计费方案，我们仍然犹豫是否继续。但也许有解决方案，或者有吗？

我希望有人可以告诉我们如何以最实用的方式做到这一点。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:39:52.993

我目前面临同样的问题。这就是我到目前为止所拥有的。

*   似乎有跨平台解决方案，但似乎没有一个可以通过 Google Play 或 Apple 支付方式工作。

*   您可以使用您的 API/后端服务来标记当前用户订阅状态并将其同步到您的所有平台（这可能违反 Apple 应用内系统条件）。

*   我目前正在寻找一种方法来与 Google Play 和 Apple 应用内支付系统沟通该商品已在不同平台上购买。应该有办法，但正如所说，仍在寻找它。

我们将保持最新状态。

# python - 前瞻性搜索是否支持 ndb.model？

> ID：12247610
> 
> 赞同：3
> 
> 时间：2012-09-03T12:08:38.940
> 
> 标签：python, google-app-engine, python-2.7

一位同事正在

> DocumentTypeError：不支持文档类型。

`Subscribe`在开发应用服务器上使用 ndb 文档类型调用时。*ndb*和*前瞻性搜索*兼容吗
？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:20:39.217

是的，ndb 和 Prospective search 是兼容的，但是您需要使用预期搜索来进行 ndb：

`from google.appengine.ext.ndb import prospective_search`

关于错误，来源：

> get_document() 引发 DocumentTypeError：如果无法识别文档类。

[http://appengine-ndb-experiment.googlecode.com/hg/ndb/prospective_search.py](http://appengine-ndb-experiment.googlecode.com/hg/ndb/prospective_search.py)**

# tridion - 已知组ID和组名时如何获取组的用户

> ID：12247614
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:08:46.787
> 
> 标签：tridion, tridion-2011

根据完成工作流活动的用户，我得到了用户所属的“groupid 和 groupname”。现在基于 groupid 我如何获取该组的用户列表。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:18:53.037

这实际上只是一个“以防万一” - 一旦您检索到群组成员，您还没有说明您要对它们做什么，但请记住，大多数成员都是具有一定范围的群组成员，而不是比所有出版物。

因此，如果您尝试获取出版物 A 的所有编辑，请小心，如果您仅使用编辑组，您可能会遇到问题，因为它可能包含无权访问出版物 A 的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:27:46.140

使用方法`GetGroupMembers`

# html - HTML5 中的“缩放”、“平移”和“倾斜”，类似于 Prezi 演示文稿

> ID：12247615
> 
> 赞同：1
> 
> 时间：2012-09-03T12:08:51.810
> 
> 标签：html, prezi

我想制作一个类似于**Prezi**演示文稿的登录页面，具有自动缩放倾斜和平移功能。你能给我指点类似的东西，这样我就可以工作了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-11T16:43:41.387

如果你真的想用缩放来摇摆不定，你应该偷看：http: [//jaukia.github.io/zoomooz/](http://jaukia.github.io/zoomooz/) 这比 impress.js 更有趣，因为 reppin'Prezi

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T16:08:14.323

还有[Strut](http://strut.io)，它是一个用于创作 impress.js 演示文稿的 GUI。这是一个演示视频：[http ://www.youtube.com/watch?v=zA5s8wwme44](http://www.youtube.com/watch?v=zA5s8wwme44)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-16T10:16:25.680

看看[layerJS ，一个可以创建](http://layerjs.org)**类似 Prezi 的**HMTL5 Web 界面的开源库。您可以定义允许触摸和鼠标**手势在帧之间转换的帧****邻接**关系。如果您需要一些元素彼此独立移动，它甚至允许**多个图层。**

 ****这非常**简单**：只需添加一个**舞台**div 并放入一个或多个图层，并在您可以进行**缩放、平移和旋转转换之间添加任意数量的****帧**。

 **通过使用与“画布”不同的图层布局类型，不仅有类似 Prezi 的过渡。看看[文档](https://github.com/layerJS/layerJS/wiki)。

HTML 代码如下所示：

```
<div data-wl-type="stage">
  <div data-wl-type="layer" data-wl-layout-type="canvas">
    <div data-wl-type="frame" data-wl-name="frame1" data-wl-x="100" data-wl-width="1000" data-wl-rotation="45" ...>
    </div>
    <div data-wl-type="frame" data-wl-neighbors-l="frame1" ...>
    </div>
  </div>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T07:31:08.803

我知道及时回答有点太晚了，但你可以试试[Impress.js](http://bartaz.github.com/impress.js/#/bored)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-03T12:12:46.923

有一个名为 impress.js ( [http://bartaz.github.io/impress.js/#/bored](http://bartaz.github.io/impress.js/#/bored) ) 的工具非常酷，可以实现您想要的。

检查页面，您会看到它本身就是一个演示（不要忘记查看源代码，文档在那里）。

希望这对你有帮助，有什么请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-07T07:47:37.523

现在有[Webpgr](http://webpgr.com)。这是一个类似 Photoshop 的在线编辑器，用于精确创建缩放平移和倾斜登录页面。******

# iphone - 洪水填充方法因访问错误而崩溃任何想法？

> ID：12247619
> 
> 赞同：2
> 
> 时间：2012-09-03T12:08:56.420
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的洪水填充方法因访问错误而崩溃，我找不到错误任何想法吗？

当我启动我的应用程序时，我可以很好地绘制小对象，但是当我想像油漆桶一样使用洪水填充来填充更大的对象时，它只会因 BAD ACCESS 错误而崩溃。

我是菜鸟，我尝试了很多东西，递归次数增加了，但它仍然崩溃。我在这个应用程序中使用 ARC。

```
-(void)paintingBucket:(int)point point2:(int)point2 width:(int)width colorAtPoint:(UIColor *)color {

int offset = 0;
int x = point;
int y = point2;
if (point<1025 && point2<705) {

offset = 4*((width*round(y))+round(x));

int alpha = data[offset];
int red = data[offset + 1];
int green = data[offset + 2];
int blue = data[offset + 3];
color1 = [UIColor colorWithRed:(green/255.0f) green:(red/255.0f) blue:(alpha/255.0f) alpha:(blue/255.0f)];

   if ([color1 isEqual: color] ) {

        color3 = self.currentColor ;
        CGFloat r,g,b,a;
        [color3 getRed:&r green:&g blue: &b alpha: &a];
        int reda = (int)(255.0 * r);
        int greena = (int)(255.0 * g);
        int bluea = (int)(255.0 * b);
        int alphaa = (int)(255.0 * a);
       // NSLog(@" red: %u green: %u blue: %u alpha: %u", reda, greena, bluea, alphaa);

        data[offset + 3] = alphaa;
        data[offset + 2] = reda;
        data[offset + 1] = greena;
        data[offset] = bluea;

        [self paintingBucket:x+1 point2:y  width:width colorAtPoint:color];
        [self paintingBucket:x point2:y+1  width:width colorAtPoint:color];
        [self paintingBucket:x-1 point2:y  width:width colorAtPoint:color];
        [self paintingBucket:x point2:y-1  width:width colorAtPoint:color];

            }

        }

    } 
```

**编辑：** 我在崩溃时得到的唯一信息是“0x995d7d5f：calll 0x995d7d64；szone_malloc_should_clear + 14”

我知道有一些内存问题，但我无法识别它我解决了它。正如我所说，我是目标 c 的菜鸟，所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:31:33.933

几乎可以肯定是堆栈溢出。当您递归地填充一个区域时，堆栈上的项目数等于前沿的长度，对于较大的区域可能会变得很长。

您应该将递归方法替换为基于队列的方法来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:00:33.923

你有

```
int x = point;
int y = point2;

if (point<1025 && point2<705) 
{
... 
```

但是你从 x 和 y 中减去，而不是检查它们是否 > 0

```
 [self paintingBucket:x-1 point2:y  width:width colorAtPoint:color];
    [self paintingBucket:x point2:y-1  width:width colorAtPoint:color]; 
```

这可能是溢出的原因，因为递归不会因负值而停止。

# ios - KissXML 因包含处理指令的 XML 而失败

> ID：12247630
> 
> 赞同：1
> 
> 时间：2012-09-03T12:09:45.413
> 
> 标签：ios, xpath, kissxml

我遇到了一个问题，当 XML 包含处理指令时，KissXML 中的 XPath 查询将失败，但如果完全相同的 XML 不包含任何处理指令，它将正常工作。

例如，我有以下没有处理指令的 XML (demo1.xml)：

```
<?xml version="1.0"?>
<tst:TstForm xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tst="http://schemas.somewhere.com/tst/1" xml:lang="en-US">
    <tst:TstDetails>
        <tst:Title>Labelling error on boxes</tst:Title>
        <tst:Description>Box labels</tst:Description>
    </tst:TstDetails>
</tst:TstForm> 
```

我正在解析 XML 并执行 XPath 查询，如下所示：

```
// Parse the DEMO XML - no processing instructions,
// so this will work
NSLog(@"**** About to parse %@ ****\n\n", xmlFilename);
NSString *XMLPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:xmlFilename];
NSData *XMLData   = [NSData dataWithContentsOfFile:XMLPath];

NSError *err=nil;
NSURL *furl = [NSURL fileURLWithPath:XMLPath];
if (!furl) {
    NSLog(@"Can't create an URL from file: %@.", XMLPath);
    return;
}
xmlViewDoc = [[DDXMLDocument alloc] initWithData:XMLData
                                              options:0
                                                error:&err];

// Prove that the XML was parsed correctly...
NSLog(@"Root node'%@' found\n\n", xmlViewDoc.rootElement.name);
NSLog(@"About to iterate through elements 2 levels down from the root node...");
NSArray *nodes = xmlViewDoc.rootElement.children;
for (DDXMLElement *node in nodes) {
    NSArray *childNodes = node.children;
    for (DDXMLElement *childNode in childNodes) {
        NSLog(@" XPath: %@", childNode.XPath);
    }
}
NSLog(@"Root node elements END\n\n");

// Show that the namespaces are parsed correctly
NSLog(@"Root node contains the following namespaces...");
nodes = xmlViewDoc.rootElement.namespaces;
for (DDXMLElement *node in nodes) {
    NSLog(@" Found NS: '%@' = '%@'", node.name, node.stringValue);
}
NSLog(@"Namespaces END\n\n");

// Now execute an XPath query using the namespace
NSString *xPathQuery = @"/tst:TstForm/tst:TstDetails";
NSLog(@"Based on the above namespace and the XML structure, we should be able to execite the following XPath query:\n %@", xPathQuery);
NSLog(@"The XPath query should return two elements (Title & Description)...");
nodes = [xmlViewDoc.rootElement nodesForXPath:xPathQuery error:nil];
for (DDXMLElement *node in nodes) {
    NSLog(@" XPath: %@", node.XPath);
}
NSLog(@"XPathQuery END\n\n"); 
```

此代码按预期提供以下日志输出：

```
2012-09-03 13:04:25.662 NDPad[37359:c07] **** About to parse demo1.xml ****

2012-09-03 13:04:25.690 NDPad[37359:c07] Root node'tst:TstForm' found

2012-09-03 13:04:25.690 NDPad[37359:c07] About to iterate through elements 2 levels down from the root node...
2012-09-03 13:04:25.691 NDPad[37359:c07]  XPath: /TstForm[1]/TstDetails[1]/Title[1]
2012-09-03 13:04:25.691 NDPad[37359:c07]  XPath: /TstForm[1]/TstDetails[1]/Description[1]
2012-09-03 13:04:25.691 NDPad[37359:c07] Root node elements END

2012-09-03 13:04:25.691 NDPad[37359:c07] Root node contains the following namespaces...
2012-09-03 13:04:25.692 NDPad[37359:c07]  Found NS: 'xsi' = 'http://www.w3.org/2001/XMLSchema-instance'
2012-09-03 13:04:25.692 NDPad[37359:c07]  Found NS: 'tst' = 'http://schemas.somewhere.com/tst/1'
2012-09-03 13:04:25.692 NDPad[37359:c07] Namespaces END

2012-09-03 13:04:25.692 NDPad[37359:c07] Based on the above namespace and the XML structure, we should be able to execite the following XPath query:
 /tst:TstForm/tst:TstDetails
2012-09-03 13:04:25.692 NDPad[37359:c07] The XPath query should return two elements (Title & Description)...
2012-09-03 13:04:25.693 NDPad[37359:c07]  XPath: /TstForm[1]/TstDetails[1]
2012-09-03 13:04:25.693 NDPad[37359:c07] XPathQuery END 
```

但是，如果我随后使用包含单个处理指令 (demo1-5.xml) 的以下 XML：

```
<?xml version="1.0"?>
<?tst-example-instruction?>
<tst:TstForm xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tst="http://schemas.somewhere.com/tst/1" xml:lang="en-US">
    <tst:TstDetails>
        <tst:Title>Labelling error on boxes</tst:Title>
        <tst:Description>Box labels</tst:Description>
    </tst:TstDetails>
</tst:TstForm> 
```

相同的代码将失败，并且仅提供以下输出：

```
2012-09-03 13:04:25.693 NDPad[37359:c07] **** About to parse demo1-5.xml ****

2012-09-03 13:04:25.756 NDPad[37359:c07] Root node'tst:TstForm' found

2012-09-03 13:04:25.756 NDPad[37359:c07] About to iterate through elements 2 levels down from the root node...
2012-09-03 13:04:25.756 NDPad[37359:c07]  XPath: /TstForm[1]/TstDetails[1]/Title[1]
2012-09-03 13:04:25.756 NDPad[37359:c07]  XPath: /TstForm[1]/TstDetails[1]/Description[1]
2012-09-03 13:04:25.756 NDPad[37359:c07] Root node elements END

2012-09-03 13:04:25.757 NDPad[37359:c07] Root node contains the following namespaces...
2012-09-03 13:04:25.757 NDPad[37359:c07]  Found NS: 'xsi' = 'http://www.w3.org/2001/XMLSchema-instance'
2012-09-03 13:04:25.757 NDPad[37359:c07]  Found NS: 'tst' = 'http://schemas.somewhere.com/tst/1'
2012-09-03 13:04:25.757 NDPad[37359:c07] Namespaces END

2012-09-03 13:04:25.757 NDPad[37359:c07] Based on the above namespace and the XML structure, we should be able to execite the following XPath query:
 /tst:TstForm/tst:TstDetails
2012-09-03 13:04:25.758 NDPad[37359:c07] The XPath query should return two elements (Title & Description)...
2012-09-03 13:04:25.758 NDPad[37359:c07] XPathQuery END 
```

我看不出这个 XML 有什么问题会导致 XPath 查询失败，尤其是在遍历 DOM 表明它解析正确时。

谢谢，保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T23:18:32.307

我现在有一个技巧，可以在其中执行以下操作：

*   将 XML 作为字符串读取。
*   使用正则表达式解析以查找所有处理指令。
*   将所有处理指令添加到字符串数组中。
*   使用正则表达式去除处理指令

这让我可以毫无问题地执行 XPath 查询。但是，如果我需要写回 XML，我需要：

*   创建一个新的可变字符串来保存输出 XML 文档/
*   循环处理指令并将它们附加到新的输出 XML 文档字符串中。
*   从我的真实 XML 文档中获取字符串并附加到新的输出 XML 字符串。

然而，这远非最佳，我不明白为什么处理指令会破坏 KissXML 中的 XPath 查询。这是我的代码示例：

```
 // Load the XML file from the application bundle
    NSString *xmlFilename = @"demo1-5.xml";
    NSLog(@"**** About to parse %@ ****\n\n", xmlFilename);
    NSString *XMLPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:xmlFilename];
    NSString *xmlStringData = [NSString stringWithContentsOfFile:XMLPath encoding:NSUTF8StringEncoding error:nil];

    // Now that we have the XML as a string, use regex to:

    // 1) Find all processing instructions
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<\\?.*?\\?>" options:NSRegularExpressionCaseInsensitive error:nil];
    processingInstructions = [[NSMutableArray alloc] init];
    [regex enumerateMatchesInString:xmlStringData options:0 range:NSMakeRange(0, [xmlStringData length]) usingBlock:^(NSTextCheckingResult *match, NSMatchingFlags flags, BOOL *stop){
        // 2) Put all the matches in an array
        NSString *toStore = [xmlStringData substringWithRange:[match range]];
        [processingInstructions addObject:toStore];
    }];
    // 3) Remove all processing instructions from the XML string
    NSString *newString = [regex stringByReplacingMatchesInString:xmlStringData options:0 range:NSMakeRange(0, xmlStringData.length) withTemplate:@""];

    // Having removed the processing instructions, we can now parse the XML
    NSError *err=nil;
    NSURL *furl = [NSURL fileURLWithPath:XMLPath];
    if (!furl) {
        NSLog(@"Can't create an URL from file: %@.", XMLPath);
        return;
    }
    xmlViewDoc = [[DDXMLDocument alloc] initWithXMLString:newString
                                             options:0
                                               error:&err];

    // Now execute an XPath query using the namespace
    NSString *xPathQuery = @"/tst:TstForm/tst:TstDetails";
    NSArray *nodes = [xmlViewDoc.rootElement nodesForXPath:xPathQuery error:nil];
    for (DDXMLElement *node in nodes) {
        NSLog(@"Title Value: %@", node.stringValue);
    }

    // Finally we'll generate a new XML string which is a concatenation of
    // the processing instructions and the NSXMLDocument.
    NSMutableString *xmlOutputString = [[NSMutableString alloc] init];
    for (NSString *piString in processingInstructions) {
        [xmlOutputString appendFormat:@"%@\n", piString];
    }
    [xmlOutputString appendString:[xmlViewDoc XMLStringWithOptions:DDXMLNodePrettyPrint]];

    NSLog(@"XML:\n%@", xmlOutputString); 
```

# vba - 将未命名的工作簿链接到 VBA 中的变量

> ID：12247641
> 
> 赞同：1
> 
> 时间：2012-09-03T12:11:08.283
> 
> 标签：vba, excel

我正在编写一个宏，它将信息从一个工作簿复制并粘贴到 excel 2010 中的另一个工作簿中。数据所在的工作簿与宏的工作簿相同。我已经让 VBA 创建了一个新工作簿来粘贴数据。如何将 VBA 刚刚创建的新工作簿分配给一个变量。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:31:55.153

您没有确切提到如何创建工作簿，但您可以`Workbook`在创建它的同一语句中设置对新对象的引用。

例子：

```
Option Explicit

Sub AddWorkbook()

    Dim oWb As Workbook

    Set oWb = Workbooks.Add

    'Do something with the new workbook
    Debug.Print oWb.FullName

    Set oWb = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:15:56.253

尝试通过遍历工作簿来查看所有工作簿的名称。我认为新创建的工作簿的名称将是“Workbook1”，直到已经没有其他未命名的工作簿。所以基本上新创建的工作簿仍然没有命名。

# html - 将 div 定位在容器元素的底部

> ID：12247643
> 
> 赞同：0
> 
> 时间：2012-09-03T12:11:11.207
> 
> 标签：html, css, positioning, css-position

我正在设计的网页布局就像这个小提琴：http: [//jsfiddle.net/5sTub/](http://jsfiddle.net/5sTub/)

**编辑：注意：我不是想获得一个粘性页脚。我只想把它放在页面的底部。回答前请先看小提琴**

我正在尝试将页脚放置在页面底部，但无法如您在上面的链接中看到的那样。我已经尝试了我在互联网上找到的所有内容，包括设置容器元素的位置：相对；和页脚的`position:absolute;`and`bottom:0;`但似乎没有任何效果，事实上，如果您将容器 div 添加到代码中并制作它`position:relative;`，并将以下 css 添加到 footer : `position:absolute; bottom: 0;`，页脚似乎在某处消失。很长一段时间以来我一直对这个问题感到震惊，到目前为止我发现的唯一解决方案是设置我的页眉和我的内容以及页脚的`position:static;`，这不符合目的并破坏整个布局并且看起来很丑陋。我想避免使用 javascript。请帮助，在此先感谢。

**编辑：我需要的说明：** ![在此处输入图像描述](../Images/fa6b0c1b8544a93c78f219893a8addfb.png)

其中蓝色是页脚，深蓝色是页眉，浅蓝色是实际内容，粉红色是粘性 div。我不想让页脚变粘，但我希望它像你在普通页面上找到的那样，唯一的问题是它不会停留在页面底部（见[小提琴](http://jsfiddle.net/5sTub/)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:13:38.040

用这个

在你的 CSS 中添加这个 CSS 属性

```
html, body{height:100%}

div#footer {
        color: white;
        background: rgba(68, 68, 68, 0.8);
        width: 100%;
        position:absolute;
        bottom:0;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:15:07.750

您可以为此使用**Sticky Footer**方法。阅读此[http://ryanfait.com/sticky-footer/](http://ryanfait.com/sticky-footer/)

例如这样写：

**HTML**

```
<div class="container"></div>

<div class="footer"></div> 
```

**CSS**

```
body,html{
 height:100%;
}
.container{
 min-height:100%;
}
.footer{
 height:40px;
 margin-top:-40px;
} 
```

检查此[页面底部的更多Flushing页脚，twitter bootstrap](https://stackoverflow.com/questions/10099422/flushing-footer-to-bottom-of-the-page-twitter-bootstrap/10099486#10099486)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:25:02.077

它会帮助[http://jsfiddle.net/5sTub/1/](http://jsfiddle.net/5sTub/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T05:35:34.563

我不知道您是否解决了这个问题，但是我遇到了类似的问题并解决如下：

```
<!DOCTYPE HTML PUBLIC "-//W3C/DTD HTML 4.01 Transitional//EN" " http://w3.org/TR/html4/loose.dtd">
<html>
<style type="text/css" >
div#mypage {
    top:0;
    background: purple;
    color: white;
}
div#pageheader {
    top:0;
    left:0;
    height: 20%;
    position:absolute;
    width:100%;
    background: green;
    color: white;
 }
div#pagecontent {
}
div#contentleft {
    display: inline-block;
    background: blue;
    position:absolute;
    border-radius: 2px;
    left:0%;
    right: 15%;
    width:15%;
    height: 92.5%;
    top: 5%;
    color: white;
}
div#contentcenter {
    display: inline-block;
    background: yellow;
    position:absolute;
    border-radius: 2px;
    left:15%;
    right: 30%;
    width:80%;
    height: 92.5%;
    top: 5%;
    color: black;
}
div#contentright {
    display: inline-block;
    background: red;
    position:absolute;
    border-radius: 2px;
    left:95%;
    right: 5%;
    width:5%;
    height: 92.5%;
    top: 5%;
    color: white;
}
div#pagefooter {
    color: white;
    background: rgba(68, 68, 68, 0.8);
    width: 100%;
    height: 2.5%;
    position:fixed;
    left:0;
    bottom:0;
}
</style>
<head>
<title>Multiple Div's</title>
</head>
<body bgcolor="#cccccc">
<div id="mypage">
    <div id="pageheader">HDR</div>
    <div id="pagecontent">PAGE CONTENT
        <div id="contentleft">LEFT</div>
        <div id="contentcenter">CENTER</div>
        <div id="contentright">RIGHT</div>
    </div>
    <div id="pagefooter">FOOTER</div>
</div>
</div>
</body>
</html> 
```

# c++ - c++ 延迟 printf 直到需要

> ID：12247646
> 
> 赞同：1
> 
> 时间：2012-09-03T12:11:25.000
> 
> 标签：c++, buffer, printf

在 c++ 中，是否可以使用 printf （或类似的）写入某种缓冲区，然后在程序中稍后将缓冲区写入屏幕或根据结果丢弃它。

我想这样做是因为我有一个递归函数，并且只希望在结果感兴趣的情况下查看整个递归过程中打印的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:18:54.490

该课程`std::ostringstream`是您正在寻找的。

在 C++ 中，格式化 IO 是（最好）通过`<iostream>`库完成的。这就是大名鼎鼎的`cout << variable << endl`。

`cout`直接输出到标准输出。如果您想改为缓冲，您可以将输出重定向到一个`std::ostringstream`实例，然后您可以将其重定向到标准输出：

```
#include <iostream>

[...]

ostringstream buf;
buf << myVar1 << "MyStr" << endl;

[...] // some time later

cout << buf.str(); 
```

如果你更喜欢`printf`做事的方式，你可以使用`sprintf`（虽然我不会推荐它）。它有点复杂，因为您需要提前知道缓冲区的大小。

```
char myBuf[10000]; // up to you do to the proper bound checking
sprintf(myBuf, "format %d", myvar);

[...] // you may want to use strcat and such for more complex operations

printf(myBuf); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:21:53.433

当然。`vsnprintf`为此，您可以利用 的力量。我建议使用某种包装`std::string`或的类`std::vector<char>`（在 C++11 中基本相同）：

```
#include <cstdargs>
#include <cstdio>
#include <string>

class Formatter
{
    std::string buf;
public:
    void add(char const * fmt, ...)
    {
        std::va_list ap, aq;
        va_start(ap, fmt);
        va_copy(aq, ap);

        int ret1 = std::vsnprintf(NULL, 0, fmt, ap);
        // check ret1 != -1

        std::size_t cur = buf.size();
        buf.resize(cur + ret1 + 1);

        int ret2 = std::vsnprintf(&buf[cur], ret1 + 1, fmt, aq);
        // check ret2 != -1
        buf.resize(cur + ret1);

        va_end(aq);
        va_end(ap);
    }

    std::string const & str() const { return buf; }
}; 
```

现在你可以说：

```
Formatter f;
f.add("Hello, %s", "world");
f.add("%i%i%i", 1, 2, 3);
std::cout << f.str() << std::endl; 
```

如果您非常关心性能，您可以尝试为打印操作预先分配一些空间并保持单独的“结束”位置，希望您永远不必多次运行`vnsprintf`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:13:49.003

使用字符串是什么意思？或者一个字符串数组。还是收藏？收集您需要的所有数据并在需要时打印？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:19:01.730

您可以使用与char 缓冲区`sprintf`执行相同操作的函数。`printf`但你不应该。这些旧的 C 风格函数在 C++ 中已经过时，您应该使用流来代替。看起来`std::stringstream`适合你需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T12:20:04.037

对于递归函数，最好的方法是延迟*获取结果*，而不是打印它，所以不要这样：

```
int fact( int n )
{
    printf("%d", n);
    if( n!=1 )
        return n * fact(n - 1);
    else return 1;
};
<....>
fact( 5 ); 
```

你可以使用这个：

```
int fact( int n )
{
    if( n!=1 )
        return n * fact(n - 1);
    else return 1;
};
<....>
int result = fact( 5 );
printf("%d", result); 
```

基本上，只有在它准备好时才打印它。如果由于某些原因您不能直接执行此操作，请将结果保存到某种缓冲区变量中，并在函数结束后访问它。

# unity3d - Unity3D OffNavMesh 跳转问题

> ID：12247647
> 
> 赞同：3
> 
> 时间：2012-09-03T12:11:26.830
> 
> 标签：unity3d, navigation, mesh, curve

我已经设置了 Unity 导航网格（四个平面）、导航代理（球体）并设置了自动和手动关闭网格链接。它现在应该在网格之间跳转。它确实在网格之间跳跃，但它是直线跳跃的。

换句话说，当代理到达边缘时，它并没有真正跳起来（就像绘制了脱离网格的链接），它只是直线移动，但速度更快。我尝试将一架飞机移动得比其他飞机高，但球体仍在直线跳跃。

它应该是这样的吗？是否可以设置导航以跳跃某些曲线？还是我应该尝试自己实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-09T12:31:32.470

我是通过这个问题来的，不得不深入研究 Unity 示例。我只是希望通过提取重要的部分来让人们更容易。

要在 navmesh 链接上应用您自己的动画/过渡，您需要告诉 Unity 您将处理所有 offmesh 链接遍历，然后添加定期检查代理是否在 offmesh 链接上的代码。最后，当转换完成时，您需要告诉 Unity 您已移动代理，并恢复正常的导航网格行为。

您处理链接逻辑的方式取决于您。你可以直接走直线，有一个旋转的虫洞，无论如何。对于跳转，unity 使用动画进度作为 lerp 参数遍历链接，这非常有效。（如果您正在制作循环或更复杂的动画，则效果不佳）

重要的统一位是：

```
_navAgent.autoTraverseOffMeshLink = false; //in Start()
_navAgent.currentOffMeshLinkData; //the link data - this contains start and end points, etc
_navAgent.CompleteOffMeshLink(); //Tell unity we have traversed the link (do this when you've moved the transform to the end point)
_navAgent.Resume(); //Resume normal navmesh behaviour 
```

现在是一个简单的跳跃示例...

```
using UnityEngine;

[RequireComponent(typeof(NavMeshAgent))]
public class NavMeshAnimator : MonoBehaviour
{
    private NavMeshAgent _navAgent;
    private bool _traversingLink;
    private OffMeshLinkData _currLink;

    void Start()
    {
        // Cache the nav agent and tell unity we will handle link traversal
        _navAgent = GetComponent<NavMeshAgent>();
        _navAgent.autoTraverseOffMeshLink = false;
    }

    void Update()
    {
        //don't do anything if the navagent is disabled
        if (!_navAgent.enabled) return;

        if (_navAgent.isOnOffMeshLink)
        {
            if (!_traversingLink)
            {
                //This is done only once. The animation's progress will determine link traversal.
                animation.CrossFade("Jump", 0.1f, PlayMode.StopAll);
                //cache current link
                _currLink = _navAgent.currentOffMeshLinkData;
                //start traversing
                _traversingLink = true;
            }

            //lerp from link start to link end in time to animation
            var tlerp = animation["Jump"].normalizedTime;
            //straight line from startlink to endlink
            var newPos = Vector3.Lerp(_currLink.startPos, _currLink.endPos, tlerp);
            //add the 'hop'
            newPos.y += 2f * Mathf.Sin(Mathf.PI * tlerp);
            //Update transform position
            transform.position = newPos;

            // when the animation is stopped, we've reached the other side. Don't use looping animations with this control setup
            if (!animation.isPlaying)
            {
                //make sure the player is right on the end link
                transform.position = _currLink.endPos;
                //internal logic reset
                _traversingLink = false;
                //Tell unity we have traversed the link
                _navAgent.CompleteOffMeshLink();
                //Resume normal navmesh behaviour
                _navAgent.Resume();
            }
        }
        else
        {
            //...update walk/idle animations appropriately ...etc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:23:45.957

建议通过动画解决您的问题。只需为您的对象创建一个`Jump`动画，并在正确的时间播放它。该位置是相对的，因此如果您在动画中增加 Y 位置，它看起来就像对象在跳跃。

这也是 Unity 示例的工作方式，士兵四处奔跑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T19:41:28.177

不确定你使用的是什么版本的统一，但你也可以试试这个，我知道它在 4 中工作得很好：

```
string linkType = GetComponent<NavMeshAgent>().currentOffMeshLinkData.linkType.ToString();

if(linkType == "LinkTypeJumpAcross"){

        Debug.Log ("Yeah im in the jump already ;)");
} 
```

也只是给你一些额外的麻烦，最好使用代理并遵循 navAgent 游戏对象：

就像是：

AIMan = this.transform.position; AI_Proxy.transform.position = AIMan;

并且一定要使用：

AI_Proxy.animation["ProxyJump"].blendMode = AnimationBlendMode.Additive;

如果您使用的是内置的统一动画！

K，这是我这周的好事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-12T12:28:55.360

修复 update() 中的位置

```
if (agent.isOnOffMeshLink)
 {
    transform.position =  new Vector3(transform.position.x, 0f, transform.position.z);       
 } 
```

# python - 非常具体的子字符串检索和拆分

> ID：12247651
> 
> 赞同：1
> 
> 时间：2012-09-03T12:11:51.060
> 
> 标签：python, logging, substring

我知道有很多关于子串的帖子，相信我，我已经搜索了很多帖子来寻找答案。

我有很多字符串，来自日志的行，我正在尝试对它们进行分类和解析。

它们看起来像这样：

> /long/file/name/with.dots.and.extension:Jan 01 12:00:00 TYPE 静态消息；动态消息

其中filename是日志所在的文件，date是消息放入日志的日期/时间，TYPE是消息的类型，然后消息由两部分组成，一个是静态部分和一个动态部分，静态部分不会因为消息而改变，而动态部分可以改变（显然），它们被 a 分割，`;`但`;`动态部分可以有更多。

我希望能够提取静态消息和动态消息。

到目前为止，我一直在使用这样的东西：

```
parts = line.split(";")
static = parts[0]
dynamic = ";".join(parts[1:]) 
```

不是很漂亮。而且我的静态部分还包含我不想要的文件名、日期和类型。所以我想我会做这样的事情：

```
parts = " ".join(":".join(line.split(":")[1:]).split(" ")[4:]).split(";")
static = parts[0]
dynamic = ";".join(parts[1:]) 
```

我试过了，它在某种程度上有效，除了有时文件名可能有空格，或者类型可能有空格或某些东西不能正常工作，我有时会得到类型作为静态消息的一部分......效率是这是一个问题，因为这些是成千上万行必须每天解析和分类的日志。所以我想知道除了这个黑客工作之外是否有更好的方法来做到这一点？

**编辑：**我想我会在日志中提供更多行示例。为了解决我之前所说的问题，有几种类型的条目。

> /long/file/name/with.dots.and.extension:Jan 01 12:00:00 TYPE 静态消息；动态消息
> 
> /long/file/name/with.dots.and.extension:Jan 01 12:00:00 MODULE.NAME TYPE THREAD.OR.CONNECTION.INFORMATION 静态消息；动态消息

如您所见 - 有两种类型的日志条目。那些没有模块的和那些有模块的，可以连接到连接，也可以连接到线程。这使得解析更加困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:21:39.313

您可以将拆分限制为第一个 ';' 只要：

```
static, dynamic = line.split(';', 1) 
```

您的静态部分拆分可能需要做更多的工作，但如果您知道在第一部分中空格的数量将是静态的，那么同样的技巧可能会在那里起作用：

```
static = static.split(' ', 4)[-1] 
```

如果该行的第一部分更复杂（类型部分中的空格），我担心在此之前删除所有内容将是一件更困难的事情。最好的办法是找出`TYPE`可以假设的有限值集，并使用带有该信息的正则表达式来拆分静态部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T19:38:05.107

您可以尝试以下方法：

```
>>> regexp = re.compile("^([\/.\w]*)\:(\w{3}\s\d{2}\s\d{2}\:\d{2}\:\d{2})\s([A-Z]*)\s([\w\s]*)\;([\w\s]*)$")
>>> regexp.match(line).groups()
('/long/file/name/with.dots.and.extension', 'Jan 01 12:00:00', 'TYPE', 'Static Message', 'Dynamic Message') 
```

# sql - 如果条件不满足，如何使用 stord 过程在 sql server 中显示警报消息框

> ID：12247657
> 
> 赞同：1
> 
> 时间：2012-09-03T12:12:24.303
> 
> 标签：sql, sql-server

如果条件不满足，我想使用 sql server 中的存储过程在 .net（前端）中显示一个消息框。我想在存储过程中编写条件只是为了在前端显示消息框。

在此先感谢，文卡特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:14:59.760

你不能。

根据结果​​编写您的存储过程以返回适当的值，并使您的 .net 前端相应地对该结果采取行动，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:15:42.123

您可以根据存储过程中的查询使用 OUTPUT 参数使存储过程返回一些内容。

根据 OUT PUT 值，您可以显示消息框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:17:54.807

您可以在存储过程中使用 RAISERROR 方法

检查这个[http://support.microsoft.com/kb/321903](http://support.microsoft.com/kb/321903)

# c# - “var”的最佳实践（算法帮助）

> ID：12247658
> 
> 赞同：1
> 
> 时间：2012-09-03T12:12:33.063
> 
> 标签：c#, dynamic, var, simple.data

我正在使用 Simple.data，答案不在前面提到的技术中，但有助于说明这一点。所以忽略语法等。

我正在用一个简单的查询查询一个数据库；但根据一组条件，查询会发生变化。

所以举个例子：（很简单，大概5-10个条件）

```
 var result;

     if(LoggedAtSelected)
     {
      // Condition 1 - Calls Logged after a certain date
      result = db.Jobs.FindAll(db.Jobs.Logged_At >= startDate);
     }
     else 
     {
      // Condition 2 - Calls Closed after a certain date
      result = db.Jobs.FindAll(db.Jobs.Closed_At >= startDate && dd.Jobs.Closed_At <= endDate);
     }

     foreach(var JobRecord in result)
     {
     } 
```

这是上面的理想代码，但遗憾的是，鉴于 var 的动态绑定和可变性质，这是不可能的。这种情况的最佳做法是什么？我唯一的想法是为每个条件编写一个“var result = condition...”，并在 if..else if..else 中，在将其转换为该类型后将其分配给全局变量；然后在“foreach”中使用它。听起来工作量很大。有任何想法吗？还是这样的！！！？！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:14:24.520

代替：

```
var result; 
```

使用返回的实际类型`db.Jobs.FindAll`：

```
IEnumerable<Job> result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:17:36.783

如果编译器可以确切地知道要使用哪种类型（或如何为您定义新类型），您只能使用 var。

在您的情况下，您可以使用类型定义它说

```
List<Job> result; 
```

或者调用构造函数返回一个实例：

```
var result = new List<Job>; 
```

（当然，您的查询将返回一个 IEnumarable 实例而不是 List，我只是使用 List 作为示例，因为您无法实例化枚举。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T13:10:33.063

请注意，由于您的 if 语句确定查询的过滤器而不是查询本身，因此您可能希望在那里建立一个 SimpleExpression 并在之后运行查询。例如。

```
var whereCLause;

if(LoggedAtSelected)
{
  // Condition 1 - Calls Logged after a certain date
  whereClause = db.Jobs.Logged_At >= startDate;
}
else 
{
  // Condition 2 - Calls Closed after a certain date
  whereClause = db.Jobs.Closed_At >= startDate && dd.Jobs.Closed_At <= endDate;
}

List<Job> results = db.Jobs.All.Where(whereClause);
foreach(Job record in results)
{
  ...
} 
```

# charts - 如何在 Protovis 折线图中显示文本框或标签？

> ID：12247659
> 
> 赞同：1
> 
> 时间：2012-09-03T12:12:33.070
> 
> 标签：charts, textbox, label, linechart, protovis

我正在创建一个铁路时间表折线图。X 轴显示时间，Y 轴显示站名。此折线图显示一列火车从源站开往目的地站，火车停靠的一些车站由 DOT 显示，工具提示显示火车名称 + 车站名称 + 时间。

该图一切都很好，但我想在每列火车的开头显示一个带有火车名称的框，从火车出发的地方。我附上了图表的屏幕截图以供理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:06:10.430

Sup，你试过醉酒插件吗？

您可以更改触发它的事件。

# css - Extjs对齐文本字段控件旁边的图标

> ID：12247661
> 
> 赞同：0
> 
> 时间：2012-09-03T12:12:42.137
> 
> 标签：css, extjs, extjs4.1

我想要文本字段右侧的图标，我正在尝试的是我包装文本框并且该包装器具有相对位置，然后在这个包装上我附加一个具有绝对位置的 div，然后将类设置为它以显示图标。我的问题是具有绝对位置的图标不应该位于相对定位的包装内。渲染后，我在 firebug 的 HTML 选项卡中的 textfield 表之外看到了包装器和图标 div。我的屏幕截图代码如下。

```
<style type="text/css">

    .icon {
        background-image: url("../Content/images/not_documented.png");
        cursor: pointer;
        height: 16px;            
        width: 16px;            
    }

</style>
    <script type="text/javascript">

Ext.onReady(function () {

    //define a new custom text field
    Ext.define('WithStatusTextField', {
        extend: 'Ext.form.field.Text',
        alias: 'widget.withStatusTextField',
        iconCls: 'icon ',
        fieldStyle: {
            textTransform: "uppercase"
        },
        initComponent: function () {
            this.callParent(arguments);
        },
        afterRender: function () {
            if (this.iconCls) {
                var iconCls = this.iconCls;
                //delete this.iconCls;
                this.setIconCls(iconCls);
            }
            this.callParent(arguments);

        },

        renderIconEl: function () {
            if (!this.wrap) {
                this.wrap = this.el.wrap({ cls: "x-form-field-wrap" });
                this.positionEl = this.wrap;
            }

            this.wrap.applyStyles({ position: "relative" });

            this.icon = Ext.DomHelper.append(this.el.up("div.x-form-field-wrap") || this.wrap,
            {
                tag: "div",
                style: "position:absolute"
            }, true)
            if (!this.width) {
                this.wrap.setWidth(this.el.getWidth() + 50);
            }
            this.icon.on("click", function (e, t) {
                this.fireEvent("iconclick", this, e, t);
            }, this);
        },
        setIconCls: function (iconCls) {
            if (this.iconCls) {
                this.renderIconEl();
            }
            this.iconCls = iconCls;
            this.icon.dom.className = iconCls;
            //this.icon.alignTo(this.el, 'tl-tr', [2, 0]);
        },
        listeners: {
            change: function (obj, newValue) {
                console.log(newValue);
                obj.setRawValue(newValue.toUpperCase());
            }
        }
    });

    Ext.create('Ext.form.Panel', {
        title: 'Simple Form',
        bodyPadding: 5,
        width: 350,
        height: 150,

        // The fields
        defaultType: 'withStatusTextField',
        items: [{
            fieldLabel: 'First Name',
            name: 'first',
            allowBlank: false                
        },{
            fieldLabel: 'Last Name',
            name: 'last',
            allowBlank: false
        }],

        // Reset and Submit buttons
        buttons: [{
            text: 'Reset',
            handler: function() {
                this.up('form').getForm().reset();
            }
        }, {
            text: 'Submit',
            formBind: true, //only enabled once the form is valid
            disabled: true,
            handler: function() {
                var form = this.up('form').getForm();
                if (form.isValid()) {
                    form.submit({
                        success: function(form, action) {
                           Ext.Msg.alert('Success', action.result.msg);
                        },
                        failure: function(form, action) {
                            Ext.Msg.alert('Failed', action.result.msg);
                        }
                    });
                }
            }
        }],
        renderTo: Ext.getBody()
    }); 
```

当我将调试点放在萤火虫中，设置显示图标的 div 的类时，它会在文本字段旁边正确显示图标，其屏幕截图是，但在完成渲染后，图标位于其他地方。

使用图标类在文本字段上包装 afterRender - 设置图标类后图标的视觉显示。

用图标类包裹文本字段 - this.wrap.dom.outerHtml

dom 结构 - 完成渲染后，带有字段包装类的 div 图标类超出了文本字段 div。

![使用图标类在文本字段上包装 afterRender - 设置图标类后图标的视觉显示。](../Images/0a146b43929554cef86b40eae26ab09c.png)

![用图标类包裹文本字段 - this.wrap.dom.outerHtml](../Images/b3912e72ae9fa85b604c4551c17240df.png)

![dom 结构 - 完成渲染后，带有字段包装类的 div 图标类超出了文本字段 div。](../Images/709b584b8eb55b8a1765bfd488695a0c.png)

# php - Ajax/Php 获得超过 1 个结果

> ID：12247663
> 
> 赞同：0
> 
> 时间：2012-09-03T12:12:50.343
> 
> 标签：php, javascript, jquery, ajax, json

我已经建立了一个从数据库中获取用户帖子的脚本，而且我快到了。ajax 调用，我在 Firebug 的响应中得到了 10 个帖子，当我单击加载更多时，它只在页面中显示 1 个帖子。我需要在下面的代码中添加什么来显示另外 9 个结果？

AJAX

```
<script type="text/javascript">
$(document).ready(function(){
$('.load_more').live("click",function() 
{
var ID = $(this).attr("id");
if(ID)
{
$("#load"+ID).html('Loading...');

$.ajax({
type: "POST",
url: "include/load_more_home_posts.php",
cache: false, 
dataType: "json",
data: { streamitem_id: ID},
cache: false,
success: function(stream){
      $("#articles").prepend("<div id='divider-"+stream['streamitem_id']+"'><div class='userinfo'><a href='/profile.php?username="+stream['username']+"'><img class='stream_profileimage' style='border:none;padding:0px;display:inline;' border=\"0\" src=\"imgs/cropped"+stream['id']+".jpg\" onerror='this.src=\"img/no_profile_img.jpeg\"' width=\"40\" height=\"40\" ></a><div class'delete' style='cursor:pointer;position:relative;top:0px;float:right;padding-right:5px;' onclick=\"delete_('"+stream['streamitem_id']+"');\">X</div><a href='/profile.php?username="+stream['username']+"'>"+stream['first']+" "+ stream['middle']+" "+stream['last']+"</a><span class='subtleLink'> said</span><br/><a class='subtleLink' style='font-weight:normal;'>"+stream['streamitem_timestamp']+"</a><hr>"+stream['streamitem_content']+"<div style='height:20px;' class='post_contextoptions'><div id='streamcomment'><a style='cursor:pointer;' id='commenttoggle_"+stream['streamitem_id']+"' onclick=\"toggle_comments('comment_holder_"+stream['streamitem_id']+"');clearTimeout(streamloop);swapcommentlabel(this.id);\">Write a comment...</a></div><div id='streamlike'><a title='Like "+stream['first']+" "+ stream['middle']+" "+stream['last']+"s status' id='likecontext_"+stream['streamitem_id']+"' style='cursor:pointer;' onClick=\"likestatus("+stream['streamitem_id']+",this.id);\"><div style='width:50px;' id='likesprint"+stream['streamitem_id']+"'>Like</a></div><div style='width:50px;' id='likesprint"+stream['streamitem_id']+"'><a title='See who likes "+stream['first']+" "+ stream['middle']+" "+stream['last']+"s status' href='include/likes.php?streamitem_id="+stream['streamitem_id']+"' /></a></div></div></form></div><div id='streamdislike'><a id='dislikecontext_"+stream['streamitem_id']+"' style='cursor:pointer;' onClick=\"dislikestatus("+stream['streamitem_id']+",this.id);\"><div style='width:70px;' id='dislikesprint"+stream['streamitem_id']+"'>Dislike</a></div><div style='width:70px;' id='dislikesprint"+stream['streamitem_id']+"'></div></div></form><div class='stream_comment_holder' style='display:none;' id='comment_holder_"+stream['streamitem_id']+"'><div id='comment_list_"+stream['streamitem_id']+"'></div><div class='stream_comment_inputarea'><form id='mycommentform' method='POST'  class='form_statusinput'>\
<input type='hidden'  name='streamidcontent' id='streamidcontent' value='"+stream['streamitem_id']+"'>\
<input type='input' name='commentingcontents' id='commentingcontents' placeholder='Say something' autocomplete='off'>\
<input type='submit' id='button' value='Feed'><br/></div></div>");
// remove the previous load more link
 $("#load"+ID).remove();
}
});
}
return false;
});
});
</script> 
```

包括/load_more_home_posts.php

```
<?php
session_start();
include("rawfeeds_load.php");

if (isset($_POST['streamitem_id']) && $_POST['streamitem_id'] != "") {
$lastID = mysqli_real_escape_string($mysqli,$_POST['streamitem_id']);

$json= array();
$following_string = mysqli_real_escape_string($mysqli,$_SESSION['id']);
$call="SELECT d.*, c.*, u.*
  FROM streamdata          AS d
  JOIN streamdata_comments AS c ON d.streamitem_id = c.comment_streamitem
  JOIN users               AS u ON u.id = c.comment_poster
 WHERE c.comment_poster = '$following_string'
   AND d.streamitem_id < '$lastID'
   AND (d.streamitem_target  = '$following_string' OR
        d.streamitem_creator = '$following_string')
   ORDER BY d.streamitem_id DESC LIMIT 10";
$chant = mysqli_query($mysqli, $call) or die(mysqli_error($mysqli));

$json['streams'] = array();

while ($resultArr = mysqli_fetch_assoc($chant)) {

    $json['streamitem_id'] = $resultArr['streamitem_id'];
    $json['streamitem_content'] = $resultArr['streamitem_content'];
    $json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']);
    $json['comment_id'] = $resultArr['comment_id'];
    $json['comment_content'] = $resultArr['comment_content'];
    $json['comment_poster'] = $resultArr['comment_poster'];
    $json['comment_datetime'] = Agotime($resultArr['comment_datetime']);
    $json['comment_streamitem'] = $resultArr['comment_streamitem'];
    $json['username'] = $resultArr['username'];
    $json['id'] = $resultArr['id'];
    $json['first'] = $resultArr['first'];
    $json['middle'] = $resultArr['middle'];
    $json['last'] = $resultArr['last'];

    $json['streamdata'][] = $json;

}
echo json_encode($json);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:27:42.263

您从 PHP 中接收到一个 JSON，如 [{item1, item2},{item11, item12},...] 并且不对其进行迭代，您只使用第一组。我认为最好和最简单的方法是使用`$.getJSON`function 而不是`$.ajax`. 看[这里](http://api.jquery.com/jQuery.getJSON/)的第二个例子，我认为你只需要处理从 PHP 接收的 JSON。

# indexing - Sphinx 不在 Windows 中创建索引文件

> ID：12247664
> 
> 赞同：0
> 
> 时间：2012-09-03T12:12:55.263
> 
> 标签：indexing, sphinx

search.conf 文件：

```
source app_main
{
    type        = pgsql
    sql_host    = localhost
    sql_user    = blizzard_moz455_1_3
    sql_pass    = adminpwd
    sql_db      = blizzard_moz455_1_3
    sql_port    = 5432

    sql_query   = \
    SELECT "id", "header", "date", "is_paid", "text", 10 as content_type\
    FROM app_main

    sql_query_info  = SELECT * FROM "app_main" WHERE "id" = $id
    sql_attr_uint   = content_type
    sql_attr_timestamp  = date
}

index app_main
{
    source       = app_main
    path             = D:/blizzard/Projects/Python/Web/moz455/app/sphinx
    docinfo      = extern
    morphology   = stem_enru
    min_word_len     = 2
    charset_type     = utf-8
    html_strip   = 1
    html_remove_elements = script
    min_prefix_len    = 0
    min_infix_len     = 3
    enable_star   = 1
}

indexer
{
    mem_limit = 32M
}

searchd
{
    listen = 127.0.0.1:3312
    log = searchd.log
    query_log = query.log
    read_timeout = 5
    max_children = 30
    pid_file = searchd.pid
    max_matches = 1000
} 
```

命令“indexer --config sphinx.conf --all”的输出：

```
using config file 'sphinx.conf'...
indexing index 'app_main'...
collected 1 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 1 docs, 143 bytes
total 0.065 sec, 2172 bytes/sec, 15.19 docs/sec
total 2 reads, 0.000 sec, 2.5 kb/call avg, 0.0 msec/call avg
total 9 writes, 0.000 sec, 1.2 kb/call avg, 0.0 msec/call avg 
```

即没有错误。但是没有创建索引文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:45:59.650

“D:/blizzard/Projects/Python/Web/moz455/app/sphinx”并不是真正的文件夹 - 最后一部分（“sphinx”）是文件的前缀。它们是在“app”文件夹中创建的：sphinx.spa, ..., sphinx.sps

# c# - 覆盖粘贴操作 ListBox

> ID：12247666
> 
> 赞同：1
> 
> 时间：2012-09-03T12:12:59.247
> 
> 标签：c#, winforms, listbox

当用户粘贴到 ListBox 中时，我希望剪贴板中的内容作为单独的项目排列。拆分文本将由换行符完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:32:28.490

如果您可以`ListBox`控制您的表单（我们称之为`listBox`），您应该处理它的`KeyDown`事件。

这是示例：

```
private void listBox_KeyDown(object sender, KeyEventArgs e)
{
    // Check that the button pressed is V, that Control is also pressed and that the clipboard contains text.
    if ((e.KeyCode == Keys.V) && e.Control && Clipboard.ContainsText())
    {
        // Get text from clipboard and separate it.
        string text = Clipboard.GetText();
        string[] textLines = text.Split(
            new string[] { Environment.NewLine }, 
            StringSplitOptions.RemoveEmptyEntries); // or don't

        // Add lines to listBox items.
        listBox.Items.AddRange(textLines);

        // Mark event as handled.
        e.Handled = true;
    }
} 
```

# mysql - 哪个mysql方法快？

> ID：12247667
> 
> 赞同：5
> 
> 时间：2012-09-03T12:13:00.123
> 
> 标签：mysql, query-optimization

我在数据库中保存了一些文本，比如 1000 个字符。但我只显示前 200 个字符。

**方法 1**
我可以将前 200 个字符保存在一列中，其余字符保存在 sql 表的第二列中

**方法 2**
我可以将所有内容保存在一列中，在显示时我可以查询 200 个字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:15:15.307

将所有内容存储在 1 列中会更“干净”。你只能像这样选择前 200 个字符

```
select substring(your_column, 1, 200) as your_column from your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:15:19.097

这确实无关紧要，但是如果您尝试优化，那么方法1会更好，只要您将查询限制在该列（或者您只查询您真正需要的这些列），因为`substring`在服务器端执行任何操作都需要时间和资源（请求次数的倍数......）。方法 2 更清洁，但是您优化了时间，所以方法 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:16:55.810

这将归结为以下两件事之一：

如果您将整行拉回 PHP，然后只显示前 200 个字符，那么您的网络速度可能会成为拉回数据的瓶颈：

另一方面，如果您有两列，您的驱动器访问可能会遇到瓶颈，它将数据取回您的 PHP - 较长的行*可能*会导致访问多行的速度较慢。

这将归结为特定于服务器的权衡。这实际上取决于您的服务器的性能。我建议运行一些场景，让你的代码尝试撤回几十万个，看看需要多长时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T17:37:27.080

**方法2。**

首先，数据的重复存储通常是不好的（士气低落）。在这种情况下，这当然是正确的。

其次，写入两个表比一个表需要更长的时间。

第三，您现在已经进行了更新和删除，容易受到恼人的不一致的影响（参见 #1）。

第四，除非您在前 200 个字符中搜索文本，否则两种方法的数据输出将是相同的（只需选择前 200 个字符的子字符串）。

第五，即使你在搜索前 200 个字符，你也可以对它们进行索引，并且检索速度应该是相同的。

第六，您不想要限制您的用户体验的数据库设计——如果您需要更改为 500 个字符怎么办？你会有很多工作要做。

这是数据库设计中不该做什么的一个非常明显的例子。

参考：乔·艾米森回答[http://www.quora.com/MySQL/Which-mysql-method-is-fast](http://www.quora.com/MySQL/Which-mysql-method-is-fast)

# json - Delphi：超对象序列化自定义转换器/逆变器

> ID：12247671
> 
> 赞同：3
> 
> 时间：2012-09-03T12:13:24.740
> 
> 标签：json, delphi, serialization, rtti, superobject

我想序列化对象和记录以发送它们并在远程端点上恢复。本地和远程端都有共享对象声明单元。

我有一个包含不同记录的字段作为 JSON 对象的记录：

```
TPmMessage = record
  CorrelationId: TGUID;
  BatchId: TGUID;
  MessageName: string; 
  Data: ISuperObject; // TAlarms, TCommand record and etc. can be inside as JSON object
end; 
```

## 情况1

**我需要在 JSON 对象中为 Data 字段写一个类型名称（TRttiType.QualifiedName），以便在另一端进行反序列化。**

一个示例结构：

```
 TDeviceInfo = record
    DeviceType: string;
    DeviceIp: string;
  end;

  TAlarmLocation = record
    Name: string;
    rack: Word;
    slot: Word;
    port: Word;
  end;

  TAlarmInfo = record
    AlarmType: string;
    Severity: string;
    ConditionType: string;
    Datetime: TDateTime;
    Location: TAlarmLocation;
  end;

  TAlarm = record
    DeviceInfo: TDeviceInfo;
    Alarm: TAlarmInfo;
  end;

  TAlarmsList = array of TAlarmInfo; 
```

用法：

```
var
  msg: TPmMessage;
  als: TAlarms;
  ctx: TSuperRttiContext;
  JsonText: string;
begin
  ctx := TSuperRttiContext.Create;
  try
  SetLength(als,2);
  // init array of als
  ...
  // init TPmMessage Fields
  ...
  // serialize TAlarms
  msg.Data := ctx.AsJson<TAlarms>(als);
  // serialize TPmMessage
  JsonText := ctx.AsJson<TPmMessage>(msg).AsString;
  ...
  // Restore record from JSON object
  msg := ctx.AsType<TPmMessage>(SO(JsonText));
  ...
  finally
    ctx.Free;
  end;
end; 
```

恢复后我得到一个 TPmMessage，但我不知道 Data JSON 对象中的类型。

## 案例二

情况 1 我不知道 Data JSON 对象的类型。所以我添加了带有 QualifiedName 作为值的*DataObjectType*字段。

**在这种情况下，我为序列化制作了另一种结构：**

```
 TPmMessageData = record
    DataObjectType: string;
    DataObject: ISuperObject;
  end;

  TPmMessage = record
    Source: string;
    CorrelationId: TGUID;
    BatchId: TGUID;
    MessageName: string;
    Data: TPmMessageData;
  end; 
```

这个结构用代码正确序列化：

```
var 
  msg: TPmMessage;
  ti: PTypeInfo;
  uals: TAlarms;
begin
  {fill Alarms array}
  ti := TypeInfo(TAlarms);
  msg.Data.DataObjectType := ctx.Context.GetType(ti).QualifiedName;
  msg.Data.DataObject := ctx.AsJson<TAlarms>(uals);
end; 
```

*DataObject：ISuperObject*也序列化得很好。

一个问题是如何反序列化*DataObject*？

我认为它可以使用

```
{var DataType: TRttiType;}
DataType := ctx.Context.FindType(DecodedMsg.Data.DataObjectType);
uals := ctx.AsJson<DataType>(DecodedMsg.Data.DataObject); 
```

***但是方法“AsType”需要显式类型参数。***

所以我认为用用*例*设置正确的类型是唯一的方法。

如何更好地使用超级对象进行序列化/反序列化？

你能给我建议一个更好的消息结构而不是这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T14:52:14.900

您可以将 JSON 序列化对象包装在具有两个属性的容器对象中：

*   类型名称
*   被包裹的物体

然后在反序列化中，首先读取所包含对象的类型，然后将序列化后的对象加载到对应类型的Delphi对象变量中。

但是，记录中的接口指针无论如何都不容易序列化（它包含一个指针而不是完整的 JSON 编码字符串） - 所以我不确定记录序列化是否由于其他原因而失败。

# javascript - 需要 Javascript 参数帮助

> ID：12247672
> 
> 赞同：0
> 
> 时间：2012-09-03T12:13:36.253
> 
> 标签：javascript

我有这个功能：

```
$(function() {
$(window).scroll(function(e) {
    var sl = $(this).scrollLeft();
    var lbl = $("#waypoints");
    if (sl > 0) {
        lbl.show('');
    }
    else {
        lbl.hide();
    }
    if (sl > 750) {
        lbl.html("<p>now passed 750</p>");
    }
    if (sl > 1000) {
        lbl.html("<p>now passed 1000</p>");
    }
}); 
```

});

当我滚动浏览器窗口时哪个工作。但我需要对其进行调整，以便将其设置为在另一个具有固定宽度并启用 css 溢出的 div (.content) 内滚动的 div (#main)。

我试过 `$(#main).scroll(function(e) {`没有快乐...

感谢阅读，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:32:47.327

尝试更改为类：

```
$(function() {
    $('.content').scroll(function(e) {
        var sl = $(this).scrollLeft();
        var lbl = $("#waypoints");
        if (sl > 0) {
            lbl.show();
        }
        else {
            lbl.hide();
        }
        if (sl > 750) {
            lbl.html("<p>now passed 750</p>");
        }
        if (sl > 1000) {
            lbl.html("<p>now passed 1000</p>");
        }
    });
});​ 
```

这是一个[JSFiddle](http://jsfiddle.net/njZnP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:21:38.103

我看不出这里有什么问题 - 它正在工作（我的意思是滚动事件被触发，正如你可以通过 scrollLeft 值看到的那样）[http://jsfiddle.net/DTKeX/2/](http://jsfiddle.net/DTKeX/2/)

# c - 如何将此程序从 conio 移植到 curses？

> ID：12247674
> 
> 赞同：9
> 
> 时间：2012-09-03T12:13:36.400
> 
> 标签：c, linux, ncurses, curses, conio

我在 Windows 上编写了这个简单的程序。由于 Windows 有 conio，它工作得很好。

```
#include <stdio.h>
#include <conio.h>

int main()
{
    char input;

    for(;;)
    {
        if(kbhit())
        {
            input = getch();
            printf("%c", input);
        }
    }
} 
```

现在我想将它移植到 Linux，curses/ncurses 似乎是正确的方法。我将如何使用这些库代替 conio 来完成相同的任务？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-03T12:28:44.810

```
#include <stdio.h>
#include <ncurses.h>

int main(int argc, char *argv)
{
    char input;

    initscr(); // entering ncurses mode
    raw();     // CTRL-C and others do not generate signals
    noecho();  // pressed symbols wont be printed to screen
    cbreak();  // disable line buffering
    while (1) {
        erase();
        mvprintw(1,0, "Enter symbol, please");
        input = getch();
        mvprintw(2,0, "You have entered %c", input);
        getch(); // press any key to continue
    }
    endwin(); // leaving ncurses mode    
    return 0;
} 
```

构建程序时不要忘记将 ncurses lib (-L lncurses) 标志链接到 gcc

```
gcc -g -o sample sample.c -L lncurses 
```

[在这里](http://cboard.cprogramming.com/c-programming/63166-kbhit-linux.html)你可以看到 linux 的 kbhit() 实现。

# tinymce - TinyMCE 在使用粘贴词时添加而不是空格

> ID：12247681
> 
> 赞同：5
> 
> 时间：2012-09-03T12:13:58.607
> 
> 标签：tinymce

我正在使用 TinyMCE 编辑器和 word 功能中的粘贴。

我的问题是，当我有空格时，tinyMCE 将它们转换为  ，我想保留正常的空间。

是否有可以在 tinyMCe.init 中使用的过滤功能或类似的东西来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T12:50:12.163

我找到了一个灵魂，我不确定那是正确的，但它有效。在 tinyMCE.init 中，我添加了：

```
paste_auto_cleanup_on_paste : true,
    paste_postprocess : function(pl, o) {
        // remove extra line breaks
        o.node.innerHTML = o.node.innerHTML.replace(/&nbsp;/ig, " ");
    } 
```

这是整个 tinyMCE 初始化：

```
function addTinyMCE_Authors_AffiliationsWord() {
    jQuery('#dialog-authors_affiliations_parsing').tinymce({
        script_url: '/js/tiny_mce_3.2.7_jquery/jscripts/tiny_mce/tiny_mce.js',
        width: "800px",
        height: "250px",
        mode: "textarea",
        theme : "advanced",
        plugins : "paste",
        // Theme options
        theme_advanced_buttons1 : "pasteword",
        theme_advanced_buttons2 :"",
        theme_advanced_buttons3 :"",
        theme_advanced_buttons4 :"",
        theme_advanced_toolbar_location : "bottom",
        valid_elements : "p",
        paste_auto_cleanup_on_paste : true,
        paste_postprocess : function(pl, o) {
            // remove &nbsp
            o.node.innerHTML = o.node.innerHTML.replace(/&nbsp;/ig, " ");
         }
     });
} 
```

请享用...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-01T12:12:21.510

您是否尝试添加： `entity_encoding: 'raw'`初始化tinyMce时？它对我的情况有所帮助。

问候。

# blackberry - IOException Radio 在 BlackBerry 上已关闭，并且内存不足

> ID：12247685
> 
> 赞同：3
> 
> 时间：2012-09-03T12:14:14.420
> 
> 标签：blackberry, httpwebrequest, blackberry-jde

我在我的 RIM Blackberry 应用程序中执行 HttpConnection。我正在使用无线网络连接。在执行 HttpConnection 时，有时它会返回数据，有时它会给出

> java.io.IOException 收音机已关闭

和

> java.io.IOException 内存不足

错误。我真的不明白到底是什么问题。我在这里发布我的代码片段：

```
public static String getRemoteData(String url) throws ConnectionNotFoundException{
    StringBuffer stringBuff=new StringBuffer();     
    try {   
        HttpConnection fconImg = (HttpConnection) Connector.open(url+ NetworkUtils.getConnectionString());
        InputStream input = fconImg.openInputStream();          
        ByteArrayOutputStream baos = new ByteArrayOutputStream();           
        int k = 0;
        while ((k = input.read()) != -1) {
            baos.write(k);
        }           
        byte[] byteArray = baos.toByteArray();          
        String s = new String(byteArray);           
        stringBuff.append(s.trim());
        return stringBuff.toString();

    } catch (Exception e) {
        stringBuff.append("Exception : "+e.toString());
        return stringBuff.toString();
    }
} 
```

下面是我的 NetworkUtils 类。

```
import net.rim.device.api.servicebook.ServiceBook;
import net.rim.device.api.servicebook.ServiceRecord;
import net.rim.device.api.system.CoverageInfo;
import net.rim.device.api.system.DeviceInfo;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.system.WLANInfo;

public class NetworkUtils {
    private static final String COVERAGE_CARRIER = "Carrier full Coverage";
    private static final String COVERAGE_MDS = "BES coverage";
    private static final String COVERAGE_NONE = "No coverage";
    private static final String NOT_SUPPORTED_WAF = "Not supported by the device";

    public static String logM;
    /**
     * Access the net.rim.device.api.system.DeviceInfo class in order to 
     * understand if the running system is a simulator or a real device.
     * @return true if the current application is running on a Blackberry 
     * simulator, false otherwise
     */
    public static boolean isSimulator() {
            return DeviceInfo.isSimulator();
    }

    /**
     * Give the information about the presence o a wifi bearer on the device
     * @return true if the wifi communication interface bearer is supported by
     * the device, false otherwise
     */
    protected static boolean isWifiAvailable() {
            //  Log.info("Checking WIFI Availability");
            boolean isWifiEnabled;
            if (RadioInfo.areWAFsSupported(RadioInfo.WAF_WLAN)) {
                    //   Log.info("WIFI Supported");
                    isWifiEnabled = true;
            } else {
                    //   Log.info("WIFI NOT Supported");
                    isWifiEnabled = false;
            }
            return isWifiEnabled;
    }

    /**
     * Give information about the presence of active wifi connections. 
     * @return true if the device is connected to a wifi network with its wifi 
     * bearer, false otherwise
     */
    protected static boolean isWifiActive() {

            int active = RadioInfo.getActiveWAFs();
            int wifi = RadioInfo.WAF_WLAN;
            return active >= wifi;
    }

    protected static boolean isWapGprsDataBearerOffline() {
            return RadioInfo.getState()==RadioInfo.STATE_OFF ||
            RadioInfo.getSignalLevel() == RadioInfo.LEVEL_NO_COVERAGE;
    }

    public static String getNetworkCoverageReport() {
            StringBuffer sb = new StringBuffer();

            sb.append("\n*********************************************************");
            sb.append("\nWireless Access Families:");
            sb.append("\n3GPP: " + getNetworkCoverage(RadioInfo.WAF_3GPP));
            sb.append("\nCDMA: " + getNetworkCoverage(RadioInfo.WAF_CDMA));
            sb.append("\nWLAN: " + getNetworkCoverage(RadioInfo.WAF_WLAN));
            sb.append("\nCDMA: " + getNetworkCoverage(RadioInfo.NETWORK_CDMA));
            sb.append("\nBands:");
            sb.append("\nCDMA_800: " + getNetworkCoverage(RadioInfo.BAND_CDMA_800));
            sb.append("\nCDMA_1900: " + getNetworkCoverage(RadioInfo.BAND_CDMA_1900));
            sb.append("\nNetworks:");
            sb.append("\n802_11: " + getNetworkCoverage(RadioInfo.NETWORK_802_11));
            sb.append("\nGPRS: " + getNetworkCoverage(RadioInfo.NETWORK_GPRS));
            sb.append("\nNetwork services:");
            sb.append("\nVOICE: " + getNetworkCoverage(RadioInfo.NETWORK_SERVICE_VOICE));
            sb.append("\nUMTS: " + getNetworkCoverage(RadioInfo.NETWORK_SERVICE_UMTS));
            sb.append("\nEDGE: " + getNetworkCoverage(RadioInfo.NETWORK_SERVICE_EDGE));
            sb.append("\n*********************************************************");
            return sb.toString();
    }

    private static String getNetworkCoverage(int networkType) {
            if (RadioInfo.areWAFsSupported(networkType)) {
                    int status = CoverageInfo.getCoverageStatus(networkType, false);
                    switch (status) {
                    //  case CoverageInfo.COVERAGE_DIRECT: //TODO if we switch back to < 4.5 we must use CARRIER
                    //      return COVERAGE_CARRIER;//not support less ver of 4.5 
                    case CoverageInfo.COVERAGE_MDS:
                            return COVERAGE_MDS;
                    case CoverageInfo.COVERAGE_NONE:
                            return COVERAGE_NONE;
                    default:
                            break;
                    }
            } 
            return NOT_SUPPORTED_WAF;
    }

    public static boolean isDataConnectionAvailable() {
            boolean ret = (isWifiAvailable()&&isWifiActive())||!isWapGprsDataBearerOffline();
            return ret;
    }

    /**
    * Determines what connection type to use and returns the necessary string to use it.
    * @return A string with the connection info
    */
    public static String getSubURL()
    {
        // This code is based on the connection code developed by Mike Nelson of AccelGolf.
        // http://blog.accelgolf.com/2009/05/22/blackberry-cross-carrier-and-cross-network-http-connection
        String connectionString = null;

        // Simulator behavior is controlled by the USE_MDS_IN_SIMULATOR variable.
        if(DeviceInfo.isSimulator())
        {
                logMessage("Device is a simulator and USE_MDS_IN_SIMULATOR is false");            
                connectionString = ";deviceside=true";            
        }            
        // Wifi is the preferred transmission method
        else if(WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
        {
            logMessage("Device is connected via Wifi.");
            connectionString = ";interface=wifi";
        }else{
            String uid = null;
            ServiceBook sb = ServiceBook.getSB();
            ServiceRecord[] records = sb.findRecordsByCid("WPTCP");
            for (int i = 0; i < records.length; i++) {
                if (records[i].isValid() && !records[i].isDisabled()) {
                    if (records[i].getUid() != null &&
                        records[i].getUid().length() != 0) {
                        if ((records[i].getCid().toLowerCase().indexOf("wptcp") != -1) &&
                            (records[i].getUid().toLowerCase().indexOf("wifi") == -1) &&
                            (records[i].getUid().toLowerCase().indexOf("mms") == -1)   ) {
                            uid = records[i].getUid();
                            break;
                        }
                    }
                }
            }
            if (uid != null) {
                // WAP2 Connection
                connectionString = ";ConnectionUID="+uid;
            } else {
                connectionString = ";deviceside=true";
            }
        }   
    return connectionString + ";ConnectionTimeout=60000";
    }

    /**
    * Looks through the phone's service book for a carrier provided BIBS network
    * @return The uid used to connect to that network.
    */
    private static String getCarrierBIBSUid()
    {
    ServiceRecord[] records = ServiceBook.getSB().getRecords();
    int currentRecord;

    for(currentRecord = 0; currentRecord < records.length; currentRecord++)
    {
            if(records[currentRecord].getCid().toLowerCase().equals("ippp"))
            {
                if(records[currentRecord].getName().toLowerCase().indexOf("bibs") >= 0)
                {
                        return records[currentRecord].getUid();
                }
            }
    }        
    return null;
    }

    public static void logMessage(String str)
    {
        logM=str;   
    }

    public synchronized static String getConnectionString() {
        String connectionString = null;
        // Simulator behaviour is controlled by the USE_MDS_IN_SIMULATOR variable.
        if (DeviceInfo.isSimulator()) {
            connectionString = ";deviceside=true";
        }
        // Wifi is the preferred transmission method
        else if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
            connectionString = ";interface=wifi";
        }
        // Is the carrier network the only way to connect?
        else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_DIRECT) == CoverageInfo.COVERAGE_DIRECT) {
            String carrierUid = getCarrierBIBSUid();
            if (carrierUid == null) {
                // Has carrier coverage, but not BIBS. So use the carrier's TCP network
                connectionString = ";deviceside=true";
            } else {
                // otherwise, use the Uid to construct a valid carrier BIBS request
                connectionString = ";deviceside=false;connectionUID="+carrierUid + ";ConnectionType=mds-public";
            }
        }
        // Check for an MDS connection instead (BlackBerry Enterprise Server)
        else if ((CoverageInfo.getCoverageStatus() & CoverageInfo.COVERAGE_MDS) == CoverageInfo.COVERAGE_MDS) {

            connectionString = ";deviceside=false";
        }
        // If there is no connection available abort to avoid hassling the user
        // unnecssarily.
        else if (CoverageInfo.getCoverageStatus() == CoverageInfo.COVERAGE_NONE) {
            connectionString = "none";

        }
        // In theory, all bases are covered by now so this shouldn't be reachable.But hey, just in case ...
        else {

            connectionString = ";deviceside=true";
        }
        return connectionString;
    }

} 
```

首先十分感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:41:10.680

我不知道这是否是问题所在，但您在调用 .toByteArray() 之前没有关闭 ByteArrayOutputStream （调用 baos.close() ）

# android - stagefright CameraSource::read 在三星 Galaxy S2 上返回小帧（20 字节）

> ID：12247690
> 
> 赞同：1
> 
> 时间：2012-09-03T12:14:37.100
> 
> 标签：android, android-ndk, streaming, stagefright

我正在尝试抓取相机捕获的帧，对它们进行编码，最后使用 RTP/RTSP 发送它们。

为了进行捕捉，我使用了 Stagefright 的 CameraSource 类。屏幕上的预览（从 Java 传递的 Surface）很棒。但是当我尝试提取帧时，我得到了 20 个字节的帧。

我究竟做错了什么 ？

```
Size videoSize;
videoSize.width = 352;
videoSize.height = 288;
sp<CameraSource> myCamera = CameraSource::CreateFromCamera(NULL, NULL, 
                             1 /*front camera*/, videoSize, 25, mySurface, true);
myCamera->start();

//the following is from a reader thread.
status_t err = OK;
MediaBuffer* pBuffer;
while ((err = myCamera->read(&pBuffer)) == OK)
{
    // if not getting a valid buffer from source, then exit
    if (pBuffer == NULL)
    {
        return;
    }
    else
    {
        LOGD("The Size of the returned buffer is: %d", pBuffer->size() );
    }
    pBuffer->release();
    pBuffer = NULL;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:16:39.257

您所做的一切都是正确的，但三星决定不支持您尝试实施的路线。在 Galaxy S2（和许多其他三星设备）上使用 CameraSource 的唯一方法是将其直接连接到硬件编码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:33:24.510

这 20 个字节实际上是某种元数据，用于在相机和视频编码器之间进行通信。除非您知道如何解释这些数据，否则很难从这些数据中提取视频帧。

# c# - 使用 javascript 打开 Outlook 以在 c# 中发送带有附件的邮件

> ID：12247696
> 
> 赞同：2
> 
> 时间：2012-09-03T12:14:59.590
> 
> 标签：c#, javascript, email

我在 asp.net c# web 应用程序中使用 javascript 打开默认邮件客户端。下面是我的代码..

```
<script language="javascript">
function SendAttach() {
    var theApp  //Reference to Outlook.Application 
    var theMailItem //Outlook.mailItem
    //Attach Files to the email
    var attach3 = "c:\\mail\\test.txt"
    //Construct the Email including To(address),subject,body
    //var recipient
    var subject = "Email Using JavaScript"
    var msg = "This is a test mail,sent to you using javascript by kushan thakershy"
    //Create a object of Outlook.Application
    try {
        var theApp = new ActiveXObject("Outlook.Application");
        var objNS = theApp.GetNameSpace('MAPI');
        var theMailItem = theApp.CreateItem(0) // value 0 = MailItem
        //Bind the variables with the email
        theMailItem.to = "anita.bharadva@compulynx.org"
        theMailItem.Subject = (subject);
        theMailItem.Body = (msg);
        theMailItem.Attachments.add(attach3);
        theMailItem.display();

        //Show the mail before sending for review purpose
        //You can directly use the theMailItem.send() function
        //if you do not want to show the message.

    }
    catch (err) {
        alert("The following may have cause this error: \n" +
 "1\. The Outlook express 2003 is not installed on the machine.\n" +
 "2\. The msoutl.olb is not availabe at the location " +
 "C:\\Program Files\\Microsoft Office\\OFFICE11\\msoutl.old on client's machine " +
 "due to bad installation of the office 2003." +
 "Re-Install office2003 with default settings.\n" +
 "3\. The Initialize and Scripts ActiveX controls not marked as safe is not set to enable.")
        document.write("<a href=\"" + "./testemail.asp" + "\"" + ">" + "Go Back" + "</a>")
    }

} 
```

这工作正常，但在我的情况下，我想从服务器端代码获取附件文件路径，因为我想将水晶报告作为附件发送。我将如何从服务器端获取该路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:55:27.637

检查[通过javascript打开Outlook](https://stackoverflow.com/questions/776672/opening-outlook-through-javascript)的链接或/和[这个](http://www.webdeveloper.com/forum/showthread.php?t=134873) 你可以试试这部分代码

```
function sendMail(){

location.href = "mailto:manish@simplygraphix.com?subject=Feedback for 
webdevelopersnotes.com&body=The Tips and Tricks section is 
great";

} 
```

# c# - 使用未赋值局部变量错误的原因

> ID：12247698
> 
> 赞同：0
> 
> 时间：2012-09-03T12:15:06.863
> 
> 标签：c#

我只是想知道为什么编译器会给我这个错误。每次调用函数时都会执行 try 块，这意味着变量将被分配。但它仍然不允许我编译。

```
using System;

namespace Checking
{
    class Program
    {
        static void Main(string[] args)
        {
            int intNum;
            intNum = readValue("Please enter a number: ");

        }
        static int readValue(string strPrompt)
        {
            int intRes;
            Console.WriteLine(strPrompt);
            try
            {
                intRes = Convert.ToInt32(Console.ReadLine());   // Gets assigned here! But still doesnt allow me to compile!

            }
            catch (Exception ex)
            {
                Console.WriteLine("Please enter a numeric value.\n");
                readValue(strPrompt);
            }
            return intRes;    
        }
    }
} 
```

将 return intRes 放在 try 块中可以让我摆脱该错误，但随后会出现一个错误，指出并非所有代码路径都返回一个值。我理解错误，但我仍然不明白为什么它不允许我编译，try 块每次都会执行对吗？

我也知道将 0 分配给 intRes 将消除该错误。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:16:17.980

因为如果尝试失败，intRes 没有价值

在您的捕获中使用

```
intRes = readValue(strPrompt); 
```

初始化它

```
int intRes = 0; 
```

代替

```
int intRes; 
```

您可能还想查看`int.TryParse`语法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:16:19.027

如果`Convert.ToInt32`失败，`intRes`永远不会被分配到。

在创建变量时设置默认值，或者在`catch`块中分配给。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T12:18:39.853

编译器是对的。变量并不总是被赋值。

如果转换失败，分配永远不会发生，并且在 catch 块内继续执行，您再次调用该函数，但您忘记将该调用的返回值分配给变量：

```
catch (Exception ex)
{
  Console.WriteLine("Please enter a numeric value.\n");
  intRes = readValue(strPrompt);
} 
```

* * *

`while`这是使用and的替代实现`TryParse`：

```
static int readValue(string strPrompt) {
  int intRes = 0;
  bool done = false;
  while (!done) {
    Console.WriteLine(strPrompt);
    if (Int32.TryParse(Console.ReadLine(), out intRes) {
      done = true;
    } else {
      Console.WriteLine("Please enter a numeric value.\n");
    }
  }
  return intRes;    
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T12:18:59.133

`intRes`如果`Console.ReadLine()`抛出异常，您将获得未初始化的信息。这就是你的编译器抱怨的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-03T12:17:20.203

编译器无法知道 try 块中的代码是否会引发异常。
因此，如果您的代码抛出异常，则永远不会分配 intRes 变量。

因此编译器会发出错误消息。

此外，就目前而言，您的代码有问题。您尝试在 catch 块内递归调用 readValue 以获得正确的值，但是当您的用户最终输入正确的值时，主程序将永远不会收到输入的值，因为您使用的是局部变量作为结果值。

# cakephp - 如何在 cakephp 查询中输入“DISTINCT”关键字？

> ID：12247702
> 
> 赞同：1
> 
> 时间：2012-09-03T12:15:17.720
> 
> 标签：cakephp

我有这样的代码

```
$this->Customer->setSource('customer');
        $this->Customer->find('first',array('fields'=>" IF(assigned_id.assigned_id is NULL, 
                                             CONCAT(GROUP_CONCAT(DISTINCT(`team_members`.`user_id`)),'=>TEAM')")); 
```

我需要的输出是这个

```
SELECT  IF(assigned_id.assigned_id is NULL, CONCAT(GROUP_CONCAT(DISTINCT(`team_members`.`user_id`)),'=>TEAM') FROM `ctk_customer` AS `Customer` WHERE 1 = 1 LIMIT 1 
```

但我得到这个输出

```
SELECT DISTINCT IF(assigned_id.assigned_id is NULL, CONCAT(GROUP_CONCAT(DISTINCT(`team_members`.`user_id`)),'=>TEAM') FROM `ctk_customer` AS `Customer` WHERE 1 = 1 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:21:18.713

```
$this->Customer->setSource('customer');
        $this->Customer->find('first',array('fields'=>" IF(assigned_id.assigned_id is NULL, 
                                             CONCAT(GROUP_CONCAT(distinct(`team_members`.`user_id`)),'=>TEAM')")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:04:36.227

[看起来](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)你可以这样做：

```
array(
    'conditions' => array('Model.field' => $thisValue), //array of conditions
    'recursive' => 1, //int
    'fields' => array('Model.field1', 'DISTINCT Model.field2'), //array of field names
    'order' => array('Model.created', 'Model.field3 DESC'), //string or array defining order
    'group' => array('Model.field'), //fields to GROUP BY
    'limit' => n, //int
    'page' => n, //int
    'offset'=>n, //int
    'callbacks' => true //other possible values are false, 'before', 'after'
) 
```

# iphone - 管理 UIWebView 加载过程

> ID：12247703
> 
> 赞同：4
> 
> 时间：2012-09-03T12:15:18.730
> 
> 标签：iphone, uiwebview, uiwebviewdelegate

我使用 UIWebView 来呈现数据，并使用微调器来显示加载过程。数据是来自我的服务器的 .mp3 文件。

当我开始加载 webView 时，我启动了微调器。然后在音频文件开始播放之前会有一段延迟。在那一刻我需要完全停止微调器。

没什么大不了的，但以防万一 - 加载代码：

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://blablabla.mp3"]]]; 
```

**问题**：当 webView 准备好播放音频时（当有足够的数据开始播放时），我如何捕捉事件？我需要它来停止微调器。

WebViewDidFinishLoad 是我可以使用的唯一委托方法，它对我不利，因为它会在加载所有数据时发出通知。即使我使用它，当音频文件完成加载时它也不会被调用（也许它没有完成，我不知道，我只是在播放 mp3 时看到加载进度结束）。以防万一 - 错误：

```
Error Domain=NSURLErrorDomain Code=-999 
"The operation couldn‚Äôt be completed. (NSURLErrorDomain error -999.)"
UserInfo=0x1d39d0 {NSErrorFailingURLKey=http://blablabla.mp3,
NSErrorFailingURLStringKey=http://blablabla.mp3} 
```

任何帮助/tut/链接表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T14:47:10.973

对于这种控制，我不建议通过 webView 进行 - 你无法获得那种级别的交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:48:26.153

使用单独的类来管理 NSUrlConnection 以检索和存储 .mp3 文件。您可以在文件准备好播放时使用[NSNotificationCenter和 postNotification 消息或委托](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T12:44:06.700

不要使用 iOS 活动指示器，而是在 html 中实现活动指示器。这是更简单的结束也是优雅的解决方案。只需使用 javascript 显示/隐藏带有动画 gif 图像的 html 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T12:25:44.223

别担心，这很容易！

WebView 的 -999 是一个正常错误，当您加载另一个内容而没有让页面真正完全加载时适用。

所以必须这样做：

```
if([error code] != NSURLErrorCancelled) return; 
```

到您的 javascript 事件检测：

**从 JS 执行 Objective-C 方法**

不幸的是，这稍微复杂一些，因为在 Mac OSX 上没有相同的 windowScriptObject 属性（和类）允许两者之间的完全通信。

但是，您可以轻松地从 javascript 自定义 URL 调用，例如：

```
window.location = yourscheme://callfunction/parameter1/parameter2?parameter3=value 
```

加载一个 jquery 库并使用 document.ready 事件：

```
 $(document).ready(function() {
   window.location = yourscheme://callfunction/parameter1/parameter2?parameter3=value
 }); 
```

并使用以下命令从 Objective-C 中截取它：

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
   NSURL *URL = [request URL]; 
   if ([[URL scheme] isEqualToString:@"yourscheme"]) {
       // parse the rest of the URL object and execute functions
   } 
} 
```

这并不像应有的那样干净（或使用 windowScriptObject），但它可以工作。

最后的解决方案：

**Javascript 桥** [https://github.com/marcuswestin/WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)

享受

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:23:16.103

你可以试试非常流行的[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)类。

有一个 [didReceiveData:] 委托，可能适合您的测试。

# java - 在 Java 中，是否可以将 ContentHandler 桥接到 XMLStreamReader

> ID：12247713
> 
> 赞同：2
> 
> 时间：2012-09-03T12:16:04.617
> 
> 标签：java, xml, sax, stax

我有一个 SAX`ContentHandler`并想将它桥接到一个 StAX `XMLStreamReader`。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T13:09:20.603

以下（未经测试的）代码应使用 XML 复制转换提供您需要的“桥梁”。

```
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.stax.StAXSource;
import javax.xml.transform.sax.SAXResult;

void bridge(ContentHandler ch, XMLStreamReader sr) {
  StAXSource src = new StAXSource(sr);
  SAXResult res = new SAXResult(ch);
  TransformerFactory tf = TransformerFactory.newInstance();
  Transformer tr = tf.newTransformer();
  tr.transform(src, res);
} 
```

# php - 用 PHP 构建一个简单的婚礼 RSVP 系统？

> ID：12247714
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:16:04.640
> 
> 标签：php, forms, wordpress

我正在考虑为明年的婚礼建立一个网站。它将包含有关活动的信息、我和未婚妻的照片和博客……你懂的。

如果可能的话，我想要的一个功能是让我的客人在线回复。我设想他们的物理邀请有一个密码，他们将密码输入到网站上的文本字段中，然后勾选他们是否可以参加。

他们输入的密码将与包含姓名和密码的安全客人列表进行比较。如果不匹配，他们会收到一条错误消息，但如果匹配，则会通过电子邮件将信息转发给我。我可能会使用 Wordpress 构建网站，所以我会处理 PHP。

谁能推荐我如何处理这个项目，作为一个前端开发人员，我完全不知道，我的野心超出了我有限的 PHP 知识。

很想听听您的想法或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:21:47.897

如果我在你的鞋子里，我会安装contact 7插件。在联系表单中，添加密码作为必需的文本输入。将结果通过电子邮件发送给您和他们。他们可以弥补密码，这是不利的。

这没有您想要的所有选项，但您可以花几个小时编写自己的 php 代码然后排除故障，或者只需安装插件并在 30 分钟内完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:25:35.773

笼统地说，对于这类事情，我发现从概述系统的各个组件开始很有用。

虽然信息页面可以是静态的，但您需要一个可以将邀请数据保存到其中的数据库，因此我将从考虑数据实体开始。设计系统中可能需要数据表的实体列表。例如邀请、博客文章等。

然后考虑需要对这些实体执行的操作。它们是只读的吗？您需要创建新的，还是修改现有的？您需要编写代码来在某些时候执行这些操作。

然后考虑可能需要将来自这些实体的信息呈现给用户的各种方式。这让您了解需要构建哪些模板。

如果您正在考虑使用 Wordpress，您可以单独使用该应用程序来掩盖博客功能和静态页面内容。然后，您需要考虑如何将 RSVP 功能单独实现到 Wordpress，或者作为插件在其中实现。如果你真的很幸运，可能已经有一个插件可以满足你的需要 - 或者类似的东西你可以自己增强。

如果您是后端方面的新手，我建议您使用 Wordpress 构建一个博客 + 静态页面站点，将其“完成”，然后将 RSVP 内容视为第二阶段。至少，如果它被证明是不可行的，你仍然有一个有用的工作站点。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:30:43.780

我会将其构建为 WordPress 的一个简单插件，并创建一个额外的数据库表，该表将根据密码保存名称（这可以根据 ID 或其他方式自动生成）。

然后，当您可以添加新客人并检查客人的回复时，您可以制作一个简单的管理页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:34:24.097

第一：祝贺你的婚姻。据我了解，您对 PHP 知之甚少，因此请先阅读一些有关基本 PHP/MySql 的书籍或文章。然后，把你的想法放在图纸或流程图中，然后去做。犯很多错误，向他们学习，向 SO 或 PHP 同事或朋友寻求帮助。最重要的是，玩得开心。

# apache - 存储在子目录中的多个网站的通用 .htaccess

> ID：12247721
> 
> 赞同：1
> 
> 时间：2012-09-03T12:16:39.887
> 
> 标签：apache, .htaccess, mod-rewrite, host

我的开发环境设置为使用单个主机 ( `localhost`)。我正在我的机器上开发多个网站，每个网站都存储在自己的目录下，如下所示：

```
 /var/www/site1
     /var/www/site2
     ... 
```

文档根目录`/var/www`在我的机器上设置为。

我正在为这些网站中的大多数使用 URL 重写，并且大多数`.htaccess`文件将以不同的方式将子目录重写为**GET**参数，如下所示：

```
http://localhost/site1/home/red -> http://localhost/site1/index.php?page=home&p1=red
http://localhost/site2/index/param1/param2/param3 -> http://localhost/site2/index.php?page=index&p1=param1&p2=param2&p3=param3 
```

我也倾向于将其中一些网站复制到不同的目录下，当我这样做时，我必须对`.htaccess`我正在复制的网站的文件进行大量更改。

我想知道是否有一种方法可以定义一个包含网站根目录（不是主机的文档根目录）的常量，以及如何将其与重写规则一起使用，以便我只需要更改一行代码（复制网站时将此常量设置为不同的值）。

换一种形式，有没有办法执行与网站根目录而不是主机 / `%{HTTP_HOST}`（即网站的“主机”而`localhost/site1`不是`localhost`）相关的重写，如何做到这一点？

我已经尝试在脚本开头从每个请求中删除主机，并在脚本末尾添加它，但这不适用于使用该`[L]`选项的重写规则。

谢谢！

问候，卢锡安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:04:59.380

您可以使用以下规则制作一个 htaccess 文件：

```
RewriteEngine On
RewriteBase /site1/
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+) index.php?page=$1&p1=$2&p2=$3&p4=$4 [L,QSA] 
```

并将其放在目录`/var/www/site1`中，如果您希望它适用于site2，请更改`RewriteBase`并将规则放入`/var/www/site2`。

# android - 来自 xml 选择器的填充图像

> ID：12247723
> 
> 赞同：19
> 
> 时间：2012-09-03T12:16:53.003
> 
> 标签：android

我正在尝试填充主菜单的按钮背景图像（我正在使用不同状态的选择器），以这种方式进行（buttoninicio_custom.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/botoninicial_pressed"
          android:state_pressed="true">

            <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />

    </item>
    <item android:drawable="@drawable/botoninicial_pressed"
          android:state_focused="true">

            <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />

    </item>
    <item android:drawable="@drawable/botoninicial">
            <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </item>
</selector> 
```

..但是填充没有效果。我应该怎么做才能解决这个问题？？

我已经在每个“项目”标签内使用了“位图”标签，里面有填充，但它仍然在做任何事情！！！

我的主按钮看起来是这样的：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button2"
        android:layout_width="180dp"
        android:layout_height="50dp"
        android:layout_marginBottom="15dp"
        android:textSize="16sp"
        android:textColor="#FFFFFF"
        android:background="@drawable/buttoninicio_custom"
        android:text="@string/idmMENU2" />
</LinearLayout> 
```

“因为如果我在“按钮”标签内设置 android:padding，它会填充文本而不是背景图像......问题是当我按下主按钮时：我的图像背景正确更改但新图像出现剪切。 "

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2015-12-11T13:55:49.037

把它包在一个`layer-list`：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:bottom="3dp"
        android:left="3dp"
        android:right="3dp"
        android:top="1dp">

        <selector xmlns:android="http://schemas.android.com/apk/res/android">
            <!-- your original selector content -->
        </selector>
    </item>
</layer-list> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-03T12:44:13.693

****在标签item下****padding**属性是没有用的。如果您按 ctrl+space(autocomplete) 则 android 不会建议使用此标签，尽管 android 不会给出任何错误。您可以在创建可绘制形状时定义填充。如下所示：** 

 **```
<item android:state_pressed="true">
    <shape >
        <solid
            android:color="#2c68e7" />
        <stroke 
            android:width="1dp"
            android:color="#2c68e7" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="10dp"
            android:right="10dp"
            android:top="10dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

但是您不能在可绘制形状中使用图像资源。

**更好的解决方案是为视图使用相同大小和尺寸的图像。****

# c# - 将 Linq 中的两个日期减去返回时间跨度的实体

> ID：12247727
> 
> 赞同：1
> 
> 时间：2012-09-03T12:16:59.633
> 
> 标签：c#, entity-framework, linq-to-entities

例如，我想减去两个日期并获取时间跨度中的值

`TimeSpan duration = Convert.ToDateTime(completeDate).Subtract(Convert.ToDateTime(lastRundate));`

这是为了正常实施。如何在 Linq to Entity Framework 中的实体中做到这一点，其中

```
from job in Jobs
   select new JobEntity
  {                                                  
  Duration =  job.CompleteDate.Value.Subtract(job.NextRunDate.Value)
  }; 
```

Jobs 是我的表，CompleteDate 和 NextRunDate 是我的 DataType DateTime 的列名？（因为它允许空值）当我尝试这段代码时，它给了我这个错误

*LINQ to Entities 无法识别方法 'System.TimeSpan Subtract(System.DateTime)' 方法，并且此方法无法转换为存储表达式。* 请让我知道该怎么做。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:21:13.380

为什么不扩展您的`JobEntity`模型？

```
public DateTime NextRunDate { get; set; }
public DateTime CompletedDate { get; set; }
public Timespan Duration
{
    get
    {
        return CompleteDate.Subtract(NextRunDate)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:42:41.140

您可以尝试使用[EntityFunctions](http://msdn.microsoft.com/en-us/library/dd395607.aspx)：

```
from job in Jobs
select new JobEntity
{                                                  
    Duration = EntityFunctions.DiffSeconds(job.CompleteDate, job.NextRunDate)
}; 
```

为此，您需要`using System.Data.Objects;`在代码文件中。它将以秒为单位返回时间跨度`int`。

# facebook - Facebook sream.publish 不显示附件缩略图

> ID：12247730
> 
> 赞同：1
> 
> 时间：2012-09-03T12:17:14.440
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, facebook-stream-story

我正在使用 facebook stream.publish 通过 facebook php sdk 在 facebook 上发布一个 flash 小部件。附件有 swf 源和图像源等。对于某些图像，不加载缩略图，而是加载 1x1 图像。而 imgsrc 指向一个没有安全性或防火墙或任何类型的阻塞的有效图像 url。Flash 无法播放，因为用户无法真正点击 1x1 图像。在没有 facebook 文档帮助的情况下，我一直坚持这一点。请帮忙

# case - 比较 SoapUI 中的响应以断言不区分大小写

> ID：12247734
> 
> 赞同：1
> 
> 时间：2012-09-03T12:17:26.980
> 
> 标签：case, soapui, case-sensitive, assertion

我们有一个不区分大小写的 Web 服务。因此，我们希望在搜索“foo”和“FOO”时得到相同的结果。创建一个比较两个不同字符串参数的响应的断言的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T03:20:49.083

我根本不会比较这两个结果。您的测试可以测试您收到的响应。因此，如果您以相同的方式测试每个响应，您将验证响应是否匹配。

如果使用soapUI开源，我会创建两个除了数据完全一样的测试，可能使用[测试用例属性](http://www.soapui.org/Scripting-Properties/working-with-properties.html)。我的请求和响应断言将是相同的，但数据被提取。

如果我使用的是soapUI Pro，我可以有一个使用数据表的测试用例，这样更容易维护，但要花钱。

如果您想知道在测试中究竟要断言什么，则需要查看您的需求并决定要断言哪些部分是重要的。如果答案是整个请求，那么对整个肥皂信封进行简单的 xpath 匹配就可以了。

如果必须，groovy 就是答案，我认为这样的事情应该有效：

```
def rawRequest = context.expand( '${Teststepname#RawRequest#declare namespace soapenv=\'http://schemas.xmlsoap.org/soap/envelope/\'; //soapenv:Body[1]}' )
def rawRequest2 = context.expand( '${Teststepname2#RawRequest#declare namespace soapenv=\'http://schemas.xmlsoap.org/soap/envelope/\'; //soapenv:Body[1]}' )

if (rawRequest == rawRequest2) {
    assert true
    }
    else {
        assert false
    } 
```

# java - Shiro URL 过滤器不起作用

> ID：12247739
> 
> 赞同：0
> 
> 时间：2012-09-03T12:17:39.210
> 
> 标签：java, jsf-2, shiro

我创建了一个简单的 JSF 登录页面，并使用 Apache Shiro 提供身份验证和授权机制，但是 shiro.ini 中指定的 URL 过滤器似乎不起作用。

在根 WebContent 目录中，我有两个名为“test.xhtml”和“login.xhtml”的文件，任何人都可以访问它们而无需登录。我还有一个名为“protected”的子目录，其中包含一个名为“success.xhtml”的文件，该文件只有在用户登录后才能访问。

当 shiro.ini 文件的 [urls] 部分包含`/protected/** = myFilter`时，用户无需登录即可访问 protected/success.xhtml 页面。当 shiro.ini 文件的 [urls] 部分包含`/** = myFilter`xhtml 页面时，不会由JSF，而是提示用户下载 xhtml 文件。

是否有人能够建议我如何配置 Shiro 以允许任何人访问 WebContent 根目录中的页面，但只允许已登录的用户访问受保护子目录中的页面？

我正在使用 Apache MyFaces 2.1.5 和 Shiro 1.2.1。

shiro.ini文件的完整内容如下：

```
[main]
myFilter = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter
myFilter.loginUrl = /login.xhtml
myFilter.successUrl = /protected/success.xhtml

[users]
user01 = user01, Users
user02 = user02, Users

[roles]
Users = *

[urls]
/protected/** = myFilter 
```

web.xml文件内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <display-name>FooBarWeb</display-name>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <context-param>
        <description>
        State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <description>

    This parameter tells MyFaces if javascript code should be allowed in
    the rendered HTML output.
    If javascript is allowed, command_link anchors will have javascript code
    that submits the corresponding form.
    If javascript is not allowed, the state saving info and nested parameters
    will be added as url parameters.
    Default is 'true'</description>
        <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <description>

    If true, rendered HTML code will be formatted, so that it is 'human-readable'
    i.e. additional line separators and whitespace will be written, that do not
    influence the HTML code.
    Default is 'true'</description>
        <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <description>

    If true, a javascript function will be rendered that is able to restore the
    former vertical scroll on every request. Convenient feature if you have pages
    with long lists and you do not want the browser page to always jump to the top
    if you trigger a link or button action that stays on the same page.
    Default is 'false'
</description>
        <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
        <param-value>true</param-value>
    </context-param>

    <listener>
        <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
    </listener>
    <filter>
        <filter-name>ShiroFilter</filter-name>
        <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>ShiroFilter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher> 
        <dispatcher>FORWARD</dispatcher> 
        <dispatcher>INCLUDE</dispatcher> 
        <dispatcher>ERROR</dispatcher>
    </filter-mapping>

    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
        <enabled>true</enabled>
        <async-supported>false</async-supported>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T19:41:19.423

经过进一步调查后，URL 似乎需要以“/faces”为前缀。shiro.ini 文件应该是这样的......

```
[main]
myFilter = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter
myFilter.loginUrl = /faces/login.xhtml
myFilter.successUrl = /faces/protected/success.xhtml

[users]
user01 = user01, Users
user02 = user02, Users

[roles]
Users = *

[urls]
/faces/protected/** = myFilter 
```

通过将 /faces 添加到 URL，Shiro 现在可以防止未经身份验证的用户访问受保护子目录中的页面。

# gdb - 如何使用 GDB 分析通向系统库的堆栈跟踪？

> ID：12247740
> 
> 赞同：3
> 
> 时间：2012-09-03T12:17:45.970
> 
> 标签：gdb, segmentation-fault, stack-trace

我试图找出在系统库级别发生的段错误的原因。我想获得一些关于如何使用 gdb 检查`getenv()`以下堆栈跟踪中看到的调用的 args 的提示。

正如跟踪所示 -`getenv()`我的代码不直接调用 - 调用嵌套在我的代码中启动的系统调用链中。调用从我的例程开始，`a_logmsg()`试图获得线程安全`localtime - localtime_r()`，然后`getenv()`在 libc 的代码中的某个地方调用。操作系统是 Solaris 8/SPARC。

```
Program terminated with signal 11, Segmentation fault.
#0  0xfed3c9a0 in getenv () from /usr/lib/libc.so.1
(gdb) where
#0  0xfed3c9a0 in getenv () from /usr/lib/libc.so.1
#1  0xfed46ab0 in getsystemTZ () from /usr/lib/libc.so.1
#2  0xfed44918 in ltzset_u () from /usr/lib/libc.so.1
#3  0xfed44140 in localtime_r () from /usr/lib/libc.so.1
#4  0x00029c28 in a_logmsg (fmt=0xfd5d0 "%s: no changes to config.") at misc.c:155
#5  0x000273b8 in a_sync_device (device_group=0x11e3ed0 "none", hostname=0xfbbffe8d "router",
    config_by=0xfbbffc8f "scheduled_archiving", platform=0x11e3ee0 "cisco", authset=0x11e3ef0 "set01",
    arch_method=0xffffcfc8 <Address 0xffffcfc8 out of bounds>) at arch.c:256
#6  0x00027ce8 in a_archive_single (arg=0x1606f50) at arch.c:498
#7  0xfe775378 in _lwp_start () from /usr/lib/libthread.so.1
#8  0xfe775378 in _lwp_start () from /usr/lib/libthread.so.1
Backtrace stopped: previous frame identical to this frame (corrupt stack?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:30:40.317

> 我想获得一些关于如何使用 gdb 检查以下堆栈跟踪中看到的 getenv() 调用的参数的提示。

1.  Solaris libc 的源代码可[在此处](https://hg.java.net/hg/solaris~on-src/file/tip/usr/src/lib/libbc/libc/gen/common/getenv.c)获得。
2.  您可以`getenv`通过在其上设置断点并查看寄存器来检查参数。您需要知道所使用的[ABI](http://www.sics.se/~psm/sparcstack.html)，但这很简单—— 的参数`getenv`在 register`i0`中，并且`print (char*)$i0`在`(gdb)`提示符处应该 print `"TZ"`。

最后，崩溃的最可能原因`getenv`是您之前破坏了环境。特别要注意，这段代码很*糟糕*：

```
void buggy()
{
   char buf[80];
   strcpy(buf, "FOO=BAR");
   putenv(buf);  // <-- BUG!
} 
```

您通常可以通过以下命令之一检查环境：

```
(gdb) x/100s __environ
(gdb) x/100s environ 
```

很有可能，您会在那里看到不包含该`=`符号的字符串。

# c# - FFTW 包装器和 Matlab

> ID：12247746
> 
> 赞同：0
> 
> 时间：2012-09-03T12:18:31.387
> 
> 标签：c#, matlab, fft, fftw

FFTW 包装：

```
plan = fftwf.dft_1d (n, pin, pout, fftw_direction.Backward, fftw_flags.Estimate); 
```

MATLAB：

```
g = fft (samples, 2048) 
```

现在我得到了几乎正确的结果，但是`Im`来自 FFTW 包装器的值有不同的符号。如果我从那时开始读取值`g`- 值就可以了。
为什么 Matlab 中的 FFT 与 FFTW 中的 FFT 不同？是否有任何参数告诉 FFTW 订购数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:27:24.317

在第一种情况下，你的方向是向后的，所以它是一个逆 FFT。将其更改为转发：

```
plan = fftwf.dft_1d (n, pin, pout, fftw_direction.Forward, fftw_flags.Estimate); 
```

# c# - 没有获得用于输入的 Windows Phone 模拟器键盘

> ID：12247751
> 
> 赞同：0
> 
> 时间：2012-09-03T12:18:41.233
> 
> 标签：c#, xna, windows-phone-7.1, xbox360

我正在为 windows phone 开发游戏。我选择项目 Windows Phone Game(4.0)。在 Windows Phone 模拟器上编写一些用于移动对象的代码，但我没有得到用于向该对象提供输入的键盘。我还导入以下文件。

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Input.Touch;
using Microsoft.Xna.Framework.Media; 
```

为什么我没有在 Windows phone Emulator 上获得键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:03:53.687

你可以试试这个，它应该适用于 XNA、Silverlight 和 Silverlight/XNA

[http://luisguerrero.net/en/2010/07/17/how-to-access-to-keyboard-in-xna-from-windows-phone-7/](http://luisguerrero.net/en/2010/07/17/how-to-access-to-keyboard-in-xna-from-windows-phone-7/)

# c#-4.0 - 预约发送和发送更新

> ID：12247752
> 
> 赞同：1
> 
> 时间：2012-09-03T12:18:45.053
> 
> 标签：c#-4.0, vsto, outlook-addin, outlook-2007, outlook-2010

我如何知道是否单击了任何约会的“发送”或单击了“发送更新”或“发送取消”。我有`Application_ItemSend`事件同时触发发送、发送更新和发送取消。一种方法是添加自定义属性并在最初创建约会时设置一些值。但我似乎没有找到区分按钮点击的方法。是添加自定义属性的唯一方法，还是有任何我可以使用的内置属性。我分配的约会项目如下。

```
var appointment = Globals.MedearcOutlook2010AddIn.Application.ActiveInspector().CurrentItem as Outlook.AppointmentItem; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:25:14.643

您可以检查**MAPI 属性** [`PR_MESSAGE_DELIVERY_TIME`](http://msdn.microsoft.com/en-us/library/bb159898.aspx)以查看约会是否已发送 ( `isUpdate=false`) 或者它是对现有约会的更新 ( `isUpdate=true`)。我没有看到[本地属性成员](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.appointmentitem_members.aspx)这样做。

```
string PR_MESSAGE_DELIVERY_TIME = "http://schemas.microsoft.com/mapi/proptag/0x0E060040";
bool isUpdate = false;
try
{
    DateTime message_delivery = appointment.PropertyAccessor.GetProperty(PR_MESSAGE_DELIVERY_TIME);
    isUpdate = true; // if it makes it here then the message has been delivered
}
catch { } 
```

# ios - 两次更改设备方向时出现奇怪的崩溃

> ID：12247755
> 
> 赞同：0
> 
> 时间：2012-09-03T12:18:56.517
> 
> 标签：ios, crash, uiimage, orientation

我是导航控制器视图，带有工具栏、搜索栏和表格视图。在设备方向改变两次我觉得很奇怪

```
*** -[UIImage isKindOfClass:]: message sent to deallocated instance 0x7a31c00
(lldb) bt
* thread #1: tid = 0x1f03, 0x93e06332 libsystem_kernel.dylib`__kill + 10, stop reason = signal SIGKILL
    frame #0: 0x93e06332 libsystem_kernel.dylib`__kill + 10
    frame #1: 0x93e05932 libsystem_kernel.dylib`kill$UNIX2003 + 32
    frame #2: 0x01e10e03 CoreFoundation`___forwarding___ + 227
    frame #3: 0x01e10cb2 CoreFoundation`_CF_forwarding_prep_0 + 50
    frame #4: 0x00ae1a06 UIKit`-[UIImageView _setViewGeometry:forMetric:] + 295
    frame #5: 0x00ae1c2d UIKit`-[UIImageView setFrame:] + 63
    frame #6: 0x00a2b9f2 UIKit`-[UIView(Geometry) _resizeWithOldSuperviewSize:] + 838
    frame #7: 0x00a2c08a UIKit`-[UIView(Geometry) resizeWithOldSuperviewSize:] + 72
    frame #8: 0x00a2b3b5 UIKit`__46-[UIView(Geometry) resizeSubviewsWithOldSize:]_block_invoke_0 + 73
    frame #9: 0x01e41f1a CoreFoundation`__NSArrayChunkIterate + 362
    frame #10: 0x01e0d635 CoreFoundation`__NSArrayEnumerate + 997
    frame #11: 0x01e0d026 CoreFoundation`-[NSArray enumerateObjectsWithOptions:usingBlock:] + 102
    frame #12: 0x00a2b353 UIKit`-[UIView(Geometry) resizeSubviewsWithOldSize:] + 149
    frame #13: 0x00a2a058 UIKit`-[UIView(Geometry) setFrame:] + 358
    frame #14: 0x00abaf20 UIKit`-[UIViewControllerWrapperView setFrame:] + 193
    frame #15: 0x00acfc13 UIKit`-[UINavigationController _layoutViewController:] + 335
    frame #16: 0x00acf81c UIKit`-[UINavigationController _layoutTopViewController] + 155
    frame #17: 0x00ad0899 UIKit`-[UINavigationController _startDeferredTransitionIfNeeded] + 346
    frame #18: 0x00ad09e1 UIKit`-[UINavigationController __viewWillLayoutSubviews] + 33
    frame #19: 0x00bee5c2 UIKit`-[UILayoutContainerView layoutSubviews] + 222
    frame #20: 0x00a34d21 UIKit`-[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 145
    frame #21: 0x01eabe42 CoreFoundation`-[NSObject performSelector:withObject:] + 66
    frame #22: 0x0304e679 QuartzCore`-[CALayer layoutSublayers] + 266
    frame #23: 0x03058579 QuartzCore`CA::Layer::layout_if_needed(CA::Transaction*) + 231
    frame #24: 0x0304e740 QuartzCore`-[CALayer layoutIfNeeded] + 184
    frame #25: 0x00a2e938 UIKit`-[UIView(Hierarchy) layoutIfNeeded] + 42
    frame #26: 0x00ac898a UIKit`-[UIViewController window:willAnimateRotationToInterfaceOrientation:duration:] + 565
    frame #27: 0x00a21ef9 UIKit`-[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:isRotating:] + 4712
    frame #28: 0x00a20c8c UIKit`-[UIWindow _setRotatableClient:toOrientation:updateStatusBar:duration:force:] + 82
    frame #29: 0x00a20b97 UIKit`-[UIWindow _setRotatableViewOrientation:duration:force:] + 93
    frame #30: 0x00a2017b UIKit`-[UIWindow _updateToInterfaceOrientation:duration:force:] + 228
    frame #31: 0x00a202ac UIKit`-[UIWindow _updateInterfaceOrientationFromDeviceOrientation:] + 162
    frame #32: 0x00a20203 UIKit`-[UIWindow _updateInterfaceOrientationFromDeviceOrientationIfRotationEnabled:] + 82
    frame #33: 0x00a20028 UIKit`-[UIWindow _handleDeviceOrientationChange:] + 121
    frame #34: 0x013b8a29 Foundation`__57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40
    frame #35: 0x01e75855 CoreFoundation`___CFXNotificationPost_block_invoke_0 + 85
    frame #36: 0x01e75778 CoreFoundation`_CFXNotificationPost + 1976
    frame #37: 0x012fd19a Foundation`-[NSNotificationCenter postNotificationName:object:userInfo:] + 98
    frame #38: 0x00bccdb1 UIKit`-[UIDevice setOrientation:animated:] + 220
    frame #39: 0x00a042fd UIKit`-[UIApplication handleEvent:withNewEvent:] + 1405
    frame #40: 0x00a04c38 UIKit`-[UIApplication sendEvent:] + 68
    frame #41: 0x009f8634 UIKit`_UIApplicationHandleEvent + 8196
    frame #42: 0x01cadef5 GraphicsServices`PurpleEventCallback + 1274
    frame #43: 0x01e7e195 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
    frame #44: 0x01de2ff2 CoreFoundation`__CFRunLoopDoSource1 + 146
    frame #45: 0x01de18da CoreFoundation`__CFRunLoopRun + 2218
    frame #46: 0x01de0d84 CoreFoundation`CFRunLoopRunSpecific + 212
    frame #47: 0x01de0c9b CoreFoundation`CFRunLoopRunInMode + 123
    frame #48: 0x01cac7d8 GraphicsServices`GSEventRunModal + 190
    frame #49: 0x01cac88a GraphicsServices`GSEventRun + 103
    frame #50: 0x009f6626 UIKit`UIApplicationMain + 1163 
```

我在委托中没有任何代码

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration 
```

shouldAutorotateToInterfaceOrientation 支持我能找到崩溃原因的所有方向

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:51:53.877

我覆盖 UItoolbar 类以在背景中创建带有图像的自定义工具栏。这会导致方向更改时崩溃

```
@interface CustomWhiteToolbar : UIToolbar {
}

@end

@implementation CustomWhiteToolbar

- (void)drawRect:(CGRect)rect {
    [super drawRect:rect];
    UIImage *img  = [UIImage imageNamed: @"White_bordered_background.png"];
    [img drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
    [img release];
    self.tintColor = [UIColor clearColor];

}

@end 
```

这会导致方向更改时崩溃。我在我的 xib 中将自定义工具栏类设置为工具栏。我找不到崩溃的原因

# sql - where 子句中的 SQL 性能问题

> ID：12247757
> 
> 赞同：0
> 
> 时间：2012-09-03T12:18:59.307
> 
> 标签：sql, sql-server-2008, where-clause, database-performance

我在 SQLSERVER 2008 上运行查询。查询需要 4 秒来处理。我不明白为什么要花这么长时间。

```
SELECT tbl_Operations.Workcenter
,SUM(tbl_Used_Components.Used_Quantity) as CNF_TODAY
FROM tbl_Used_Components
JOIN tbl_Pack_Division on tbl_Pack_Division.Pack_Division_ID =        
tbl_Used_Components.Pack_Division_ID
JOIN tbl_Operations on tbl_Operations.Operation_ID = tbl_Pack_Division.Operation_ID

where CONVERT(date, tbl_Pack_Division.Stop_Time) = CONVERT(date, getdate())
AND tbl_Pack_Division.Memo = 'NORMAL'
and tbl_Pack_Division.Status = 'CNF_MACH'
GROUP BY tbl_Operations.Workcenter 
```

问题出在 where 子句中。当我运行没有 Where 子句的查询时，它会在 0.1 秒内运行。当我添加前 2 个参数时，它仍然运行良好。但是当我在 Status-field 上添加第三个参数时，它出错了。

这怎么可能是个问题？它是与第二个（备忘录字段）相同粒度的选择。

**编辑：**

Status varchar(10) -- 可以有 5 个不同的值

备忘录 varchar(150)

唯一索引：Pack_Division_ID bigint

[XML 执行计划](http://copytaste.com/o1452)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:05:43.203

通常，如果您在其中添加一列，则意味着必须从表中读取它。因此，如果没有 where 条件，您的查询可能会更快，即使它有更多行要聚合，因为它只能使用索引，并且必须读取更少。

如果您检查执行计划，它说您应该在这两列上使用索引，这会给您带来提升。

有问题的步骤在这里：

```
<RelOp AvgRowSize="48" EstimateCPU="0.136774" EstimateIO="1.94831" 
EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" 
LogicalOp="Clustered Index Scan" NodeId="6" Parallel="false" 
PhysicalOp="Clustered Index Scan" EstimatedTotalSubtreeCost="2.08508" 
TableCardinality="124197">

 <ScalarOperator ScalarString="[MII03].[dbo].[tbl_Pack_Division].[Memo]='NORMAL'
 AND [MII03].[dbo].[tbl_Pack_Division].[Status]='CNF_MACH' 
AND CONVERT(date,[MII03].[dbo].[tbl_Pack_Division].
[Stop_Time],0)=CONVERT(date,getdate(),0)"> 
```

我认为答案可能是您的列状态中的低“选择性”，因此由于它尝试同时使用所有三个值，这意味着现在需要更多测试，因为状态，比前两个更适合价值观。但是我不是 100% 确定优化器如何与 AND 逻辑运算符一起工作（顺序是什么意思）

# iphone - 在 datepicker 中选择特定日期时，如何自动填充特定的星期几？

> ID：12247763
> 
> 赞同：0
> 
> 时间：2012-09-03T12:19:08.310
> 
> 标签：iphone, ios, ios5, ios4

当用户从日期选择器中选择特定日期时，我想显示特定的星期几。当用户单击日期按钮时，我想自动选择该选定日期的星期几？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:25:10.820

```
[self.datePicker setDate:[NSDate date] animated:NO]; 
```

试试这个，让我知道它是否不起作用。我没试过。希望它有效，快乐编码:)

# java - 在android中定期更新textview

> ID：12247764
> 
> 赞同：0
> 
> 时间：2012-09-03T12:19:18.323
> 
> 标签：java, android, textview

我目前正在开发一个android应用程序。它需要定期更新 textview 值。

例如，我想每秒将值增加 10。我尝试使用以下代码，但它不能正常工作：textview 仅在增量完成后更新

```
package com.example.stack1;

import android.os.Bundle;
import android.app.Activity;
import android.widget.TextView;

public class MainActivity extends Activity{
 /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    public void onResume(){
        super.onResume();
        TextView output=(TextView) findViewById(R.id.output);
        output.setText(String.valueOf(0));
        System.out.println(0);
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        output.setText(String.valueOf(10));
        System.out.println(10);
        try {
            Thread.sleep(10000);
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        output.setText(String.valueOf(20));
        System.out.println(20);
    }
} 
```

`output`是 main.xml 文件中的一个文本视图。此文件仅包含此对象。

注意 - textview 中的预期输出为“0”，10 秒后为“10”，20 秒后为“20”。但是，使用此代码，输出在 20 seconds 之前为空白，然后出现“20”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:24:26.180

您可能希望使用诸如[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)之类的东西，而不是`sleep()`as`sleep()`将在睡眠期间停止进程中发生的所有事情。

它没有显示任何内容的原因是您正在`onResume()`方法中执行此操作。因此，当它加载显示时，在实际显示任何内容之前，它正在处理该方法以为用户设置内容。

所以，你想要的是：

1.  加载值为 0 的显示
2.  等待 10 秒
3.  增加并显示给用户
4.  等待 10 秒
5.  增加并显示给用户

`sleep()`由于这些命令，您得到的是：

1.  将值设置为 0
2.  等待 10 秒
3.  将值设置为 10
4.  等待 10 秒
5.  将值设置为 20
6.  显示值

使用 AlarmManager，您可以在`onResume()`方法中初始化，显示加载，然后 AlarmManager 每十秒递增一次值。

# android - 如何在android中将二维数组作为额外的意图传递

> ID：12247765
> 
> 赞同：0
> 
> 时间：2012-09-03T12:19:21.833
> 
> 标签：android, android-intent

我将二维数组 [][] 对象作为额外的意图传递给另一个活动，但它的显示错误我无法识别我该怎么办？

```
 Bundle bundle = intent.getExtras();        
     SmsMessage[] msgs = null;
     String str = "";  
      if (bundle != null)
    {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++){
            msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
            str += "SMS from " + msgs[i].getOriginatingAddress();                     
            str += " :";
            str += msgs[i].getMessageBody().toString();
            str += "\n"; 

String[][] xmlResponse2= null;
        String[] test = str.split("\n");
        xmlResponse2= new String[0][test.length];
        for (int i = 0; i < test.length; i++) {
            xmlResponse2[0][i]=test[i];

        }

     Intent l = new Intent(context,AgAppMenu.class);
        l.putExtra("msg",xmlResponse2[0][i]);
        l.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);   
            context.startActivity(l); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-03T12:39:34.060

[根据以下文档http://developer.android.com/reference/android/content/Intent.html，Intent.putExtra](http://developer.android.com/reference/android/content/Intent.html)不接受二维数组

我检查了 Intent.putExtra 的源代码，它使用 Bundle Class 来存储数据

[http://developer.android.com/reference/android/os/Bundle.html](http://developer.android.com/reference/android/os/Bundle.html)

这是 Intent.java 的源代码

1.  Intent.java [http://gitorious.org/android-eeepc/base/blobs/fda6fae156e31a287e3cfbf66e51ea1405cdf479/core/java/android/content/Intent.java](http://gitorious.org/android-eeepc/base/blobs/fda6fae156e31a287e3cfbf66e51ea1405cdf479/core/java/android/content/Intent.java)
2.  Bundle.java [https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Bundle.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/os/Bundle.java)

Bundle.java 使用“HashMap”来存储内容，

据我所知，这不可能直接

您可以使用 putParcelable 方法，您需要创建自己的二维数组类实例。

一种快速的解决方案

```
String[] keys = createKeys(); 
String[] values = createValues(); 

(keys.length == values.length) 

bundle.putExtra("keys", keys); 
bundle.putExtra("values", values); 
```

# machine-learning - unigrams & bigrams (tf-idf) 不如 unigrams (ff-idf) 准确？

> ID：12247768
> 
> 赞同：4
> 
> 时间：2012-09-03T12:19:46.207
> 
> 标签：machine-learning, scikit-learn, nlp, regression, tf-idf

这是一个关于 ngram 线性回归的问题，使用 Tf-IDF（词频 - 逆文档频率）。为此，我使用 numpy 稀疏矩阵和 sklearn 进行线性回归。

使用 unigrams 时，我有 53 个案例和 6000 多个特征。预测基于使用 LeaveOneOut 的交叉验证。

当我创建一个仅包含 unigram 分数的 tf-idf 稀疏矩阵时，我得到的预测比创建 unigram+bigram 分数的 tf-idf 稀疏矩阵时要好一些。我添加到矩阵中的列越多（三元组、四元组、五元组等的列），回归预测的准确性就越低。

这很常见吗？这怎么可能？我会认为功能越多越好。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-03T12:27:29.977

二元组的性能比一元组差的情况并不常见，但在某些情况下可能会发生这种情况。特别是，添加额外的特征可能会导致过度拟合。Tf-idf 不太可能缓解这种情况，因为更长的 n-gram 将更少，导致更高的 idf 值。

我不确定您要预测哪种变量，而且我从未对文本进行过回归，但这里有一些来自文献的可比较结果让您思考：

*   在具有小（但非平凡）训练集的随机文本生成中，7-gram 倾向于几乎逐字重建输入文本，即导致完全过拟合，而 trigram 更有可能生成“新”但仍然有些语法/可识别的文本（见[Jurafsky & Martin](http://www.cs.colorado.edu/~martin/slp.html)；不记得是哪一章，而且我手边没有副本）。
*   在使用内核机器执行的分类式 NLP 任务中，二次内核往往比三次内核表现更好，因为后者通常在训练集上过拟合。请注意，unigram+bigram 特征可以被认为是二次核特征空间的子集，而 {1,2,3}-grams 是三次核特征空间的子集。

究竟发生了什么取决于你的训练集；它可能太小了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-03T12:41:34.107

正如 larsmans 所说，添加更多变量/特征会使模型更容易过度拟合，从而降低测试准确性。在 scikit-learn 的主分支中，现在有一个`min_df`参数可以切断出现次数少于该次数的任何特征。因此`min_df==2`to`min_df==5`可能会帮助您摆脱虚假的二元语法。

或者，您可以使用以下任一类使用 L1 或 L1 + L2 惩罚线性回归（或分类）：

*   sklearn.linear_model.Lasso（回归）
*   sklearn.linear_model.ElasticNet（回归）
*   sklearn.linear_model.SGDRegressor（回归），惩罚 == 'elastic_net' 或 'l1'
*   sklearn.linear_model.SGDClassifier（分类），惩罚 == 'elastic_net' 或 'l1'

这将使忽略虚假特征成为可能，并导致稀疏模型具有许多零权重的噪声特征。不过，网格搜索正则化参数将非常重要。

您还可以尝试单变量特征选择，例如完成 scikit-learn 的[文本分类示例](http://scikit-learn.org/dev/auto_examples/document_classification_20newsgroups.html#example-document-classification-20newsgroups-py)（检查`SelectKBest`和`chi2`实用程序。

# zsh - 在窗格/窗口之间共享历史记录

> ID：12247777
> 
> 赞同：14
> 
> 时间：2012-09-03T12:20:20.693
> 
> 标签：zsh, tmux

有没有办法在 tmux 会话中的窗格/窗口之间共享 shell 命令历史记录？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-02-21T15:37:03.123

将这些选项添加到您的`.zshrc`：

```
setopt inc_append_history 
```

我也觉得`hist_ignore_dups` `hist_ignore_space`有用。

另请参阅[Zsh » 选项 » 历史记录](http://zsh.sourceforge.net/Doc/Release/Options.html#History)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-29T20:09:27.927

shell 历史与 tmux 几乎没有什么关系，它与您正在使用的 shell 有关。因此，如果您选择使用 zsh，则默认情况下会启用 iirc。使用 bash，您需要为您的`.bashrc`

```
export PROMPT_COMMAND="history -a; history -n" 
```

这会将您的最后一个命令附加到历史记录并在每个命令之后重新加载您的历史记录。有关更多信息，请参阅[此帖子](http://briancarper.net/blog/248/)。

# php - 使用 jquery ajax 提交表单并处理响应

> ID：12247780
> 
> 赞同：0
> 
> 时间：2012-09-03T12:20:45.203
> 
> 标签：php, ajax, jquery

在下面的代码中，我在 Firebug 中得到“TypeError：response is null”。我尝试了许多组合和方法来尝试获得响应，但没有成功。请看看并告诉我我做错了什么。谢谢！

```
$("a.logmein").colorbox({ width:"540", height:"420", href:function(){ return this.href + " #login"; }, onComplete: function(){
     $("#formLoginUser").submit(function(){
         $.ajax({
          data: $(this).serialize(),
          type: "POST",
          url: $(this).attr('action'),

          success: function(response) {
            if(response.status == 'fail'){
              $("#notifications").removeClass().addClass('ajaxerror').html(response.message).show();
            } else {
              $("#notifications").removeClass().addClass('ajaxsuccess').html(response.message).show();
            }
            console.log(response);

          },
          error: function (xhr, textStatus, errorThrown) {
            $("#notifications").addClass('ajaxsuccess').html(xhr.responseText).show();
          }
        });
return false;
    });
 }}); 
```

ajax.php：

```
header("Content-Type:application/json"); 

    switch($_REQUEST['action']){
        case('formLoginUser'):      $afm = $_POST['afm'];
                                    $password = $_POST['password'];

                                    $query_finduser = sprintf("SELECT * FROM clients WHERE clientafm=%s and clientcode=%s and expires>%s",
                                                                   GetSQLValueString($afm, "text"),
                                                                   GetSQLValueString($password, "int"),
                                                                   GetSQLValueString(strtotime('now'), "int"));
                                    $finduser = mysql_query($query_finduser, $connection) or die(mysql_error());
                                    $row_finduser = mysql_fetch_assoc($finduser);
                                    $totalRows_finduser = mysql_num_rows($finduser); 

                                    if($totalRows_finduser==0) {
                                        echo json_encode(array("status"=>"fail", "message"=>"Login failed. Please retry"));
                                    } else {    

                                        echo json_encode(array("status"=>"success", "message"=>"Login successful!"));
                                    } 
                                    break;

    default:                    break;

}//switch end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:29:14.217

由于[jQuery docs](http://api.jquery.com/jQuery.ajax/) `success`回调函数有 3 个输入参数：`success(data, textStatus, jqXHR)`. 其余的参数呢？尝试检查它们。也许错误在那里。

# android - 在 ScrollView 中为 ListView 制作自定义可视化

> ID：12247781
> 
> 赞同：0
> 
> 时间：2012-09-03T12:20:47.223
> 
> 标签：android, listview, scrollview, listadapter

我有一个包含很多项目的 ScrollView。在它的底部，我添加了来自另一个 Activity 的一组项目。我检查来自另一个 Activity 的输入 ArrayList，并且应该使用 ScrollView 向我的 Activity 添加适当数量的复选框。我在 LinearLayout 的帮助下添加项目，如下所示：

```
 public void addFiles()
        {

            adapter = new ArrayAdapter<File>(this,
                    R.layout.new_order, R.id.fileCheck,
                    FileManagerActivity.finalAttachFiles) 
                    {
                @Override
                public View getView(final int position, View convertView, ViewGroup parent) {
                    // creates view

                    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    View view = inflater.inflate(R.layout.file, null);
                    view.setFocusable(false);
                    CheckBox textView = (CheckBox) view
                            .findViewById(R.id.fileCheck);
                    textView.setClickable(true);
                    textView.setText(FileManagerActivity.finalAttachFiles.get(position).getName().toString());
                    textView.setTextColor(Color.BLACK);
                    textView.setPadding(55, 0, 0, 0);
                    textView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.file_icon, 0, 0, 0);
                    textView.setTextSize(16);
                    textView.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
                    int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
                    textView.setCompoundDrawablePadding(dp5);
                    textView.setOnClickListener(new OnClickListener() {

                        public void onClick(View v) {

                            if(((CheckBox)v).isChecked()){
                              checks.set(position, 1);
                            }
                            else{
                             checks.set(position, 0);
                            }

                        }
                    });
                    return view;

                }
            };
} 
```

我知道不推荐在 ScrollView 中使用 ListView，但我尝试使用 LinearLayout 来达到我的目标，但效果不佳 - 它无法正确更新。为了以正确的方式显示 ListView，我使用了这样一个类：

```
public class UtilityListView {
    public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter(); 
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        int desiredWidth = MeasureSpec.makeMeasureSpec(listView.getWidth(), MeasureSpec.AT_MOST);
        Log.i("ListAdapter count",Integer.toString(listAdapter.getCount()));
        for (int i = 0; i < listAdapter.getCount(); i++) {

            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        listView.setLayoutParams(params);
        listView.requestLayout();
    }
} 
```

并在每次数据更改后使用它：

```
fileList = (ListView) findViewById(R.id.fileListView);
    fileList.setAdapter(adapter);
    UtilityListView.setListViewHeightBasedOnChildren(fileList); 
```

但是 ListView 的高度远大于列表中的项目数量......我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:24:09.573

我使用带有页脚和页眉的 ListView 解决了这个问题。在 ScrollView 中使用 ListView 的所有尝试都不可行或效率低下。我是这样做的：

```
 View header = getLayoutInflater().inflate(R.layout.header_listview, null);
    View footer = getLayoutInflater().inflate(R.layout.footer_listview, null);
    fileList.addHeaderView(header);
    fileList.addFooterView(footer);
    fileList.setCacheColorHint(Color.WHITE);
    fileList.setAdapter(adapter); 
```

我所有的项目都正确显示，我可以获得我想要的功能。

# iphone - 如何通过 Utableview 的各个部分获取 Next Class？

> ID：12247783
> 
> 赞同：3
> 
> 时间：2012-09-03T12:21:10.140
> 
> 标签：iphone, xcode, uitableview

在我的应用程序中，我使用不同的 UIButtons 作为 Go Next 类的菜单，这是我的代码

```
-(IBAction)GoToALevel
 {
ALevel *obj = [[ALevel alloc] initWithNibName:@"ALevel" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release];
}
-(IBAction)GoToTLevel
{
TLevel *obj = [[TLevel alloc] initWithNibName:@"TLevel" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release];
}
-(IBAction)GoToNLevel
 {
NLevel *obj = [[NLevel alloc] initWithNibName:@"NLevel" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release];
 }
-(IBAction)GoToFLevel
 {
FLevel *obj = [[FLevel alloc] initWithNibName:@"FLevel" bundle:nil];
[self.navigationController pushViewController:obj animated:YES];
[obj release];
  } 
```

现在我把所有这些分类都放在 UITableview 中。但是当我点击 uitableview 的第一部分时，任何人都可以指导我如何获得 Alevel 等等。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {
      here is problem how to go next class 
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:30:11.660

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath
{
switch (indexPath.row) {

    case 0:
        [self GoToALevel];
        break;
    case 1:
        [self GoToTLevel];
        break;
    case 2:
        [self GoToNLevel];
        break;
    case 3:
        [self GoToFLevel];
        break;

    default:
        break;
}
} 
```

希望这可以帮助。快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:29:01.107

您必须在`DidSelectRowAtIndexPath()`. IE

`-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`.

这里可以根据方法指定动作。在此之前使用

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

指定每个单元格的索引处发生的情况，即`indexpath.row`。

# opencv - 具有透视变换矩阵的变换点

> ID：12247792
> 
> 赞同：4
> 
> 时间：2012-09-03T12:21:40.903
> 
> 标签：opencv, matrix, transformation, point, perspective

我有一个四边形的坐标，它是从两个不同的角度拍摄的。此外，我有一个点的坐标，但只能从两个角度之一。我需要将此点的坐标转换为矩形的第二张照片的透视图。这样做我使用 OpenCV

我计算了透视变换矩阵：

```
cv::getPerspectiveTransform(quad1, quad2); 
```

我现在的问题是我真的不知道如何用计算出的透视变换矩阵来变换点。这可能很简单，但我只是不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:27:17.527

我推荐[新的 OpenCV 论坛](http://answers.opencv.org)来解决与 OpenCV 相关的问题，在那里我用一些示例代码回答了一个非常相似的[问题。](http://answers.opencv.org/question/1858/homography-for-cordinates-of-poins/#1859)

但基本上，它使用

```
void perspectiveTransform(vector<Point2f> origPoints, vector<Point2f> transformedPoints, Mat h) 
```

功能。

# java - Java Socket read() 返回 -1 并完成时如何花费很长时间？

> ID：12247794
> 
> 赞同：1
> 
> 时间：2012-09-03T12:21:45.310
> 
> 标签：java, sockets

我在 HTTP 服务器上做一些基准测试。为了避免与 HTTP 库的潜在冲突，我直接使用 Socket 打开连接，没有 HTTP 持久连接。

Java 代码打开并连接一个`InputStream`连接到加载的 HTTP 服务器的套接字。它在 Linux 上运行。

我看到这两种情况都可能发生：

*   套接字连接 (new Socket()) 可能需要很长时间。如果服务器在接受新连接方面有积压，这是有道理的。
*   套接字连接速度很快，但延迟高达 1500 毫秒，在 read() 返回 -1 表示流位于“文件”末尾时是在最后一次读取中。这个我不明白。

代码遵循标准，添加了一些时序代码：

```
final byte[] buffer = new byte[8192];
int size = inputStream.read(buffer);

while (size > 0) {
    // Copy the buffer
    size = inputStream.read(buffer);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T12:23:32.633

`read`在您已经收到服务器将要发送的所有数据之后，您正在调用。这是个错误。一旦您收到完整的回复（由 HTTP 协议确定），您应该停止调用`read`. 您正在等待连接超时，这很愚蠢。

HTTP 协议会告诉您何时收到完整的回复，而不是 TCP 协议。您期望 TCP 堆栈能够理解 HTTP。它不是。它不知道您何时收到完整的回复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T12:31:11.993

> 套接字连接速度很快，但延迟高达 1500 毫秒，在 read() 返回 -1 表示流位于“文件”末尾时是在最后一次读取中。这个我不明白。

假设情况与您解释的完全一样；即您只是连接到端口 80 并尝试读取数据：

*   服务器很可能正在等待您的客户端代码发送请求。
*   服务器在 1.5 秒后超时读取，然后关闭其套接字的两侧。
*   这会导致客户端套接字看到一个 EOF ... 通过`-1`从`read(...)`调用返回来向您的代码发出信号。

基本上，如果您希望服务器向您发送响应，您的代码必须向服务器发送格式正确的 HTTP 请求。

另一方面，如果您的代码*确实*发送了格式正确的 HTTP 请求，那么该行为可能是由于您的代码试图读取服务器必须发送的更多数据......结合发送指定持久连接的请求（参见 HTTP 1.1 规范，[第 8.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T20:31:04.153

收到带有 JSON 正文的响应时，我遇到了类似的问题。经过几次实验，我检测到该程序在读取正文时挂起。所以，我解决了这个问题，通过从标题中读取 Content-Length ，在空白行（在 header 和 body 之间）之后停止，然后只读取必要的字符。这是代码：

```
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.nio.charset.StandardCharsets;

import javax.net.ssl.SSLSocket;
import javax.net.ssl.SSLSocketFactory;

public class TelegramSocketClient {
    private final String CONTENT_LEN = "Content-Length:";
    Socket clientSocket;
    SSLSocket sslSocket;
    PrintWriter out;
    BufferedReader in;
    public void startSSLConnection(String ip, int port) throws IOException {
SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory
                .getDefault();
        sslSocket = (SSLSocket) factory.createSocket(ip, port);

        out = new PrintWriter(sslSocket.getOutputStream(), true);
        in = new BufferedReader(
                new InputStreamReader(sslSocket.getInputStream(), StandardCharsets.UTF_8));
    }

    public String sendMessage(String msg) throws IOException {
        out.println(msg);
        String line = null;
        int contentLen = 0;
        while ((line = in.readLine()) != null && !line.isEmpty()) {
            System.out.println(line);
            if(line.startsWith(CONTENT_LEN)) {
                contentLen = Integer.parseInt(line.substring(CONTENT_LEN.length() +1, line.length()));
            }
        }

        char [] buff = new char[contentLen];
        in.read(buff, 0, buff.length);
        return new String(buff, 0, buff.length);
    }

    public void stopConnection() throws IOException {
        in.close();
        out.close();
        clientSocket.close();
    }
} 
```

# android - 在android中将xml数据显示到gridview中

> ID：12247798
> 
> 赞同：-3
> 
> 时间：2012-09-03T12:22:04.853
> 
> 标签：android, gridview, xml-parsing

我正在尝试将xml文件中的数据显示到android的网格视图中，但是此页面显示一个错误，任何人都可以让我清楚.....

**GridviewSample.java**

```
public class GridviewSample extends Activity 
{

// All static variables
static final String URL = "http://54.251.60.177/StudentWebService/StudentDetail.asmx/GetTMSOrders";
// XML node keys
static final String KEY_TABLE = "Table"; // parent node
static final String KEY_CUST = "Cust_Name";
static final String KEY_ORDER = "Order_No";
static final String KEY_FREIGHT = "Freight_Rate";
static final String KEY_STATION1 = "Station_Name";
static final String KEY_STATION2 = "Station_Name1";

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gv =  (GridView)findViewById(R.id.gridView1);

    ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();

    String xml = parser.getXmlFromUrl(URL); // getting XML

    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_TABLE);

    // looping through all item nodes <item>

    for (int i = 0; i < nl.getLength(); i++) 
    {
        // creating new HashMap

        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);

        // adding each child node to HashMap key => value

        map.put(KEY_CUST, parser.getValue(e, KEY_CUST));
        map.put(KEY_ORDER, parser.getValue(e, KEY_ORDER));
        map.put(KEY_FREIGHT, parser.getValue(e, KEY_FREIGHT));
        map.put(KEY_STATION1, parser.getValue(e, KEY_STATION1));
        map.put(KEY_STATION2, parser.getValue(e, KEY_STATION2));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView

 SimpleAdapter adapter = new SimpleAdapter(this, menuItems,R.layout.grid_item,
 new String[] { KEY_CUST, KEY_ORDER, KEY_FREIGHT,KEY_STATION1,KEY_STATION2 }, new int[] 
 {
    R.id.cust, R.id.order, R.id.freight,R.id.statio1,R.id.station2 });

    gv.setAdapter(adapter);

    gv.setOnItemClickListener(new OnItemClickListener() 
    {
    public void onItemClick(AdapterView<?> Table, View v,int position, long id) 
    {
        // getting values from selected GridItem

    String cust = ((TextView) v.findViewById(R.id.cust)).getText().toString();
    String order = ((TextView) v.findViewById(R.id.order)).getText().toString();
    String freight = ((TextView) v.findViewById(R.id.freight)).getText().toString();
    String station1 = ((TextView) v.findViewById(R.id.statio1)).getText().toString();
    String station2 = ((TextView) v.findViewById(R.id.station2)).getText().toString();

    // Starting new intent

    Intent in = new Intent(getApplicationContext(), Single_gridview_item.class);

      in.putExtra(KEY_CUST, cust);
      in.putExtra(KEY_ORDER, order);
      in.putExtra(KEY_FREIGHT, freight);
      in.putExtra(KEY_STATION1, station1);
      in.putExtra(KEY_STATION2, station2);
      startActivity(in);

        }
    });
}} 
```

谢谢你的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:38:13.763

您应该使用 AsyncTask 来执行连接，否则主线程可能会卡住，Android 将退出您的应用程序。

# grails - 获取：“加入”被忽略

> ID：12247799
> 
> 赞同：1
> 
> 时间：2012-09-03T12:22:15.770
> 
> 标签：grails, grails-orm

**设置：**

3 域类 A、B 和 C。A 和 B 在插件中。C 在依赖于这个插件的应用程序中。

```
class A{
    B b
    static mapping = {
        b fetch: 'join'
    }
    ...
}

class C extends A{
    String name
    ...
}

C.list().each{
    println it.b.name
} 
```

**问题：**

如文档 ( [http://www.grails.org/doc/1.3.x/ref/Database%20Mapping/fetch.html](http://www.grails.org/doc/1.3.x/ref/Database%20Mapping/fetch.html) ) 中所述， fetch: "join" 应该强制休眠对每个 println 行仅使用一个查询。不幸的是，有两个选择查询没有加入。

**我的调查**

我创建了一个新的 Grails 项目，它按照文档中的描述工作，但 A 类不在外部插件中。

**问题**

知道为什么 fetch: "join" 在上面的示例中被忽略了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T12:14:13.130

从 2.x 开始，使用条件时会忽略 fetch/eager joins。

请参阅此错误报告：[https ://jira.grails.org/browse/GRAILS-9829](https://jira.grails.org/browse/GRAILS-9829)

这是一个相当大的问题，但由于 Hibernate3 在 Grails 中不容易解决。

您需要使用 HQL 才能获取/渴望加入。

# javascript - 如何在 javascript 中对以下字符串使用 string.split()

> ID：12247800
> 
> 赞同：1
> 
> 时间：2012-09-03T12:22:24.373
> 
> 标签：javascript, split

我有以下字符串：`(17.591257793993833, 78.88544082641602)`在 Javascript

如何对上述字符串使用 split() 以便我可以单独获取数字。

这是我尝试过的（我知道它错了）

```
var location= "(17.591257793993833, 78.88544082641602)";
var sep= location.split("("" "," "")");    
document.getElementById("TextBox1").value= sep[1];
document.getElementById("Textbox2").value=sep[2]; 
```

请提出建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T12:25:16.570

使用正则表达式，像下面这样简单的东西就可以了：

```
// returns and array with two elements: [17.591257793993833, 78.88544082641602]
"(17.591257793993833, 78.88544082641602)".match(/(\d+\.\d+)/g) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:23:35.430

您可以使用正则表达式。那会对你有很大帮助。与[匹配](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)功能一起使用。

一个可能的正则表达式可能是：

```
/\d+.\d+/g 
```

有关更多信息，您可以从 wiki 开始：[http ://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:25:44.480

使用正则表达式`[0-9]+\.[0-9]+`。[您可以在此处](http://regexr.com?32189)尝试正则表达式。

在javascript中你可以做

```
var str = "(17.591257793993833, 78.88544082641602)";
str.match(/(\d+\.\d+)/g); 
```

核实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:30:22.783

如果您希望将值作为数字，即`typeof x == "number"`，您将必须使用正则表达式来获取数字，然后将这些`String`s 转换为`Number`s，即

```
var numsStrings = location.match(/(\d+.\d+)/g),
    numbers = [],
    i, len = numsStrings.length;

for (i = 0; i < len; i++) {
    numbers.push(+numsStrings[i]);
} 
```

# c# - 如何将图像类型转换为图像 ?

> ID：12247802
> 
> 赞同：2
> 
> 时间：2012-09-03T12:22:39.187
> 
> 标签：c#, .net, opencv, emgucv

任何想法如何将`Image`类型转换为`Image<Bgr, Byte>`类型？

我从`PictureBox`Control 获取图像，我需要将其转换为`Image<Bgr, Byte>`类型。

```
Image pictureBoxImage = pictureBox.Image;
Image<Bgr, Byte> image = // ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T12:35:16.900

根据[文档](http://www.emgu.com/wiki/index.php/Working_with_Images#Creating_image_from_Bitmap)：

> **从位图创建图像**
> 
> 也可以`Image<TColor, TDepth>`从 .Net `Bitmap`对象创建

所以，你应该能够做到：

```
var image = new Image<Bgr, Byte>(new Bitmap(pictureBox.Image)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-09T17:33:51.483

你也可以这样做：

```
Image<Bgr, Byte> IMG = new Image<Bgr, byte>((Bitmap)pictureBox1.Image); 
```

或者

```
var IMG = new Image<Bgr, byte>((Bitmap)pictureBox1.Image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-26T10:19:24.703

对于 Emgu.CV 4.5，我必须添加 Emgu.CV.Bitmap 包并使用`bitmap.ToImage<Bgr, byte>()`：

```
using (Bitmap bitmap = new Bitmap(pictureBox.Image))
{
    Image<Bgr, byte> image = bitmap.ToImage<Bgr, byte>();
} 
```

# jsp - EL 通过 Integer 键获取 HashMap 的值

> ID：12247806
> 
> 赞同：5
> 
> 时间：2012-09-03T12:23:01.140
> 
> 标签：jsp, jstl, el

我有这个HashMap：

```
 Map<Integer, String> odometerMap = new LinkedHashMap<Integer, String>();
    odometerMap.put(0, getLocaleForKey("drop-down.any"));
    odometerMap.put(1, "< 1000");
    odometerMap.put(2, "1000 - 5000");
    odometerMap.put(3, "5000 - 10000");
    odometerMap.put(4, "10000 - 20000");
    odometerMap.put(5, "20000 - 30000");
    odometerMap.put(6, "30000 - 40000");
    odometerMap.put(7, "40000 - 60000");
    odometerMap.put(8, "60000 - 80000");
    odometerMap.put(9, "> 80000"); 
```

我在 JSP 中的目标是打印例如 ${odometerMap[2]} （结果是空字符串）：

```
 <c:out value="${odometerMap[2]}"/> 
```

如果我只打印 ${odometerMap} 我会得到完整的地图：

```
{0=Any, 1=< 1000, 2=1000 - 5000, 3=5000 - 10000, 4=10000 - 20000, 5=20000 - 30000, 6=30000 - 40000, 7=40000 - 60000, 8=60000 - 80000, 9=> 80000} 
```

如何仅打印我选择的元素？例如：2？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T12:35:44.420

在 EL 中，数字被视为`Long`. 它正在寻找一把`Long`钥匙。如果您使用`Long`而不是`Integer`作为地图键，它将起作用。

```
Map<Long, String> odometerMap = new LinkedHashMap<Long, String>();
odometerMap.put(0L, getLocaleForKey("drop-down.any"));
odometerMap.put(1L, "< 1000");
// ... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-03T12:27:05.530

另一种方法是使用 a`String`作为键

```
Map<String, String> odometerMap; 
```

.. 和：

```
<c:out value="${odometerMap['2']}"/> 
```

但是，最好使用 a `List`of`Strings`因为您的密钥没有任何明确的含义：

```
List<String> odometers = new ArrayList<String>();
odometers.add(getLocaleForKey("drop-down.any"));
// etc 
```

.. 和：

```
<c:out value="${odometers[2]}"/> 
```

# api - 在 REST API 中使用 LINK 和 UNLINK HTTP 动词

> ID：12247807
> 
> 赞同：26
> 
> 时间：2012-09-03T12:23:10.450
> 
> 标签：api, rest, httpverbs

我目前正在实现一个 REST API。我有一个资源模型，其中包含各个资源之间的大量关系。

我的问题是：如何以 RESTful 方式将两个现有资源相互链接（建立关系）？

我遇到的一种解决方案是使用 LINK 和 UNLINK HTTP 动词。API 使用者将能够使用 LINK 和以下 URI 链接两个资源：/resource1/:id1/resource2/:id2。

这个解决方案的问题是缺乏对 LINK 和 UNLINK 动词的支持。[http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)或[http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)都没有提到动词，它们似乎在很大程度上被“遗忘”了。但是，原始 RFC 2068 确实声明它们存在。

我真的很喜欢这个解决方案。但是，由于缺乏对 LINK/UNLINK 的支持，恐怕许多 API 消费者/客户端将无法处理该解决方案。这是一个可接受的解决方案，还是有更好和/或更优雅的解决方案来链接 RESTful API 中的现有资源？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-06-10T09:09:08.800

我在我的（定制的、公司内部的）网络应用程序中使用`LINK`和。`UNLINK`我使用[https://datatracker.ietf.org/doc/html/draft-snell-link-method](https://datatracker.ietf.org/doc/html/draft-snell-link-method)作为我的实现参考。

我发现有三种类型的客户：

1.  那些只支持`GET`and`POST`的，从 HTML 的`<form>`元素中获取线索。
2.  仅支持`GET`,`PUT`和`POST`的那些`DELETE`。这些从 CRUD 和 RPC-pretending-to-be-REST 类型的 API 中获取线索。
3.  那些允许任何方法的。作为官方 RFC的发布`PATCH`增加了这些的数量，WebDAV 的增长也是如此，尽管有时第 2 类客户端`PATCH`也支持。

由于我们目前在内部开发我们的客户，我们没有这个问题，但我已经研究过了，并且在定义我的 API 之前确实考虑了利弊，以防我们确实想要允许第三方客户。我的解决方案（因为我们无论如何都需要支持没有 Javascript 的 HTML 客户端）是允许`POST`通过提供一个`_METHOD`字段 ( `application/x-www-form-urlencoded`) 来覆盖该方法，然后`post()`将后端手掌上的函数转移到预期 HTTP 方法的适当函数。这样，未来的任何客户端，例如上面的第 2 类，都可以使用`PUT`and`DELETE`但 wrap `PATCH`，`LINK`并且`UNLINK`在`POST`要求。你得到了两全其美：来自支持它的客户端的丰富方法，但仍然通过 POST 隧道支持低质量的客户端。

# facebook - 上传图片到页面事件：#1“发生未知错误”

> ID：12247808
> 
> 赞同：0
> 
> 时间：2012-09-03T12:23:21.017
> 
> 标签：facebook, facebook-graph-api, photo

使用与我用来创建页面事件的访问令牌相同的访问令牌，我尝试使用 PHP SDK 3.1.1 将照片上传到它

清单：

*   我正在传递访问令牌
*   我传递的访问令牌确实有 create_event、publish_stream、photo_upload
*   我正在打电话给 /EVENT_ID/picture
*   我正在使用 POST 方法
*   参数确实包含所需的访问令牌和 source=@ABSOLUTE_PATH_TO_IMAGE
*   为 PHP SDK 对象打开文件上传支持

我以前尝试过的（主要是分开的）

*   尝试在创建事件的请求的相同参数中上传图片，使用源参数，在完整图像文件路径之前使用 @
*   相同，但我没有使用参数“源”，而是尝试了`$params[basename($file)] = '@' . $file;`
*   尝试将图片添加到 /EVENT_ID/picture，但使用 url = URL_TO_FILE 而不是 source = @ABSOLUTE_PATH_TO_FILE（导致完全相同的错误，“发生未知错误”
*   将带有文本的消息参数添加到我将图片与创建事件分开上传的参数中
*   将 place=null 添加到我创建事件的参数中
*   我尝试使用最新的 Facebook SDK PHP 文件

`var_dump()`这是两个请求的 PHP ：

```
array(6) {
  ["name"]=>
  string(11) "Superman IV"
  ["start_time"]=>
  string(24) "2012-09-23T16:00:00+0200"
  ["end_time"]=>
  string(24) "2012-09-23T17:30:00+0200"
  ["description"]=>
  string(237) "Lex Luther wykrada z muzeum włosy Supermana. Dzięki nim udaje mu się stworzyć super robota, Nuclear Mana, który potrafi czerpać energię ze słońca. Dzięki temu Nuclear Man staje się niezniszczalny i staje do walki z Supermanem."
  ["access_token"]=>
  string(118) "<censored>"
  ["@event_cover.jpg"]=>
  string(61) "@/var/www/rr048_attila/templates/template/img/event_cover.jpg"
}
array(2) {
  ["access_token"]=>
  string(118) "<censored>"
  ["source"]=>
  string(61) "@/var/www/rr048_attila/templates/template/img/event_cover.jpg"
} 
```

请注意，对于@event_cover.jpg 参数，我尝试在没有@ 键的情况下执行相同的操作，并且根本没有该参数。

这是`var_dump()`我收到的第二个请求的错误：

```
array(2) {
  ["error_code"]=>
  int(1)
  ["error_msg"]=>
  string(25) "An unknown error occurred"
} 
```

有谁知道是什么导致了这个问题，或者我忘了做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:01:26.137

目前，这可能会受到 Facebook 错误的影响。我在[这里](http://developers.facebook.com/bugs/138727922935504?browse=search_503c1a53b3c847434077698)跟踪它 从我的角度来看，我也创建了类似的问题，但没有人回答它。（问题可以在[这里](https://stackoverflow.com/questions/12154830/uploading-facebook-event-picture-throws-error)找到）这个问题可以连接到[时区迁移](http://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)，因为在此之前我的事件和图片上传到他们工作正常并且没有对脚本进行任何更改。

# c# - 使用 C# 将大型数据集转换为字节数组？

> ID：12247809
> 
> 赞同：0
> 
> 时间：2012-09-03T12:23:22.330
> 
> 标签：c#, sql-server-2005, serialization, dataset, bytearray

我可以使用[此链接](http://vbcity.com/forums/t/111506.aspx)和此代码将数据集转换为字节数组：

```
System.IO.MemoryStream stream = new System.IO.MemoryStream();
System.Runtime.Serialization.IFormatter formatter = new System.Runtime.Serialization.Formatters.Binary.BinaryFormatter();
formatter.Serialize(stream, dtUsers); // dtUsers is a DataTable

byte[] bytes = stream.GetBuffer(); 
```

但是系统占用大量内存，当结果集返回 500000 条或更多记录时冻结。有没有更好的方法可以一次性完成相同的操作。任何帮助将不胜感激。数据库是 SQL Server 2005 和 VS 2008 for C#。

# mysql - mysql查询没有在变量中保存正确的结果

> ID：12247817
> 
> 赞同：0
> 
> 时间：2012-09-03T12:23:45.527
> 
> 标签：mysql

我有以下查询：

```
select wall.postid from wall,posts where  
wall.postid = posts.postid and posts.userid=puserid
order by wall.postid desc LIMIT 4 OFFSET 0; 
```

它以下列方式返回结果。

```
 wall.postid
-----------------
      52
      51
      50
      49 
```

现在我想将最大值（即 52）和最小值（即 49）保存在一个变量中，以便我可以在下一个查询中使用它。我正在使用以下查询来执行此操作。

```
select @upper:=max(wall.postid),@lower:=min(wall.postid) from wall,posts where  
wall.postid = posts.postid and posts.userid=puserid
order by wall.postid desc LIMIT 4 OFFSET 0; 
```

我已经但是这些变量保存了列的最大和最小 ID，而不是这个结果集。即它返回我 max = 52 和 min = 41，这是列的最小值。我需要 min = 49。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:25:36.990

您需要在聚合之前进行限制以获得您想要的结果

```
 select
     @upper = max(postID),
     @lower = min(postID)
 from
 (
      select wall.postid from wall 
          inner join posts on wall.postid = posts.postid 
      where   
      posts.userid=puserid 
      order by wall.postid desc LIMIT 4 OFFSET 0
 ) as v 
```

还要注意改进的 ANSI-92 连接语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:27:21.320

```
select @upper:=max(`postid`), @lower:=MIN(`postid`) 
from
(
select wall.postid from wall,posts where  
wall.postid = posts.postid and posts.userid=puserid
order by wall.postid desc LIMIT 4 OFFSET 0)m 
```

# linux - 如何在linux上运行命令并将输出保存在变量中

> ID：12247818
> 
> 赞同：1
> 
> 时间：2012-09-03T12:23:54.123
> 
> 标签：linux, bash, jenkins

我使用 node.js 和 mocha 插件。我需要从 Jenkins 运行测试。

测试目录是'/home/user/tests' 通过putty我可以启动命令'make all'来运行测试并得到结果。如何从 bash 脚本运行它？

我在文件“start.sh”中创建了脚本：

```
 #!/bin/bash

    DIR=$(cd /home/user/tests; make all)

    echo "-----------------------START----$stDate--------------------"
    echo $DIR
    echo "------------------------END-----$enDate--------------------" 
```

在这种情况下，结果是

```
 08:10:58  SSH: EXEC: STDOUT/STDERR from command [start.sh] ...
    08:10:59  /bin/sh: mocha: command not found
    08:10:59  /bin/sh: mocha: command not found
    08:10:59  /bin/sh: mocha: command not found
    08:10:59  /bin/sh: line 0: cd: ./messagel: No such file or directory
    08:10:59  -----------------------START----Mon Sep  3 08:11:00 EDT                 2012--------------------
    08:10:59  cd ./tenant; mocha; cd ../; cd ./user; mocha --reporter list; cd ../; cd ./asset; mocha; cd ../; cd ./messagel mocha -t 5000; cd ../;
    08:10:59  ------------------------END-----Mon Sep  3 08:11:00 EDT 2012--------------------
    08:10:59  SSH: EXEC: completed after 401 ms 
```

但这包含在文件“makefile”中，并且不运行 cd ./tenant；摩卡；光盘../；cd ./用户；摩卡——记者名单；光盘../；cd ./资产；摩卡；光盘../；cd ./messagel mocha -t 5000；光盘../；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T15:22:42.283

您的`DIR`变量仅包含部分输出的事实可能是因为`cd /home/user/tests; make all`输出到 stderr 而不是 stdout。

尝试：

```
DIR=$(cd /home/user/tests; make all >& /dev/stdout) 
```

确保在`DIR`变量中捕获正常输出和错误输出。

另一种可能性是

```
DIR=$(cd /home/user/tests; make all 2>&1 ) 
```

它几乎做同样的事情，除了它直接操纵文件描述符。更多信息[在这里](http://tldp.org/LDP/abs/html/io-redirection.html)。

另请注意，这只会重定向`make all`. 换句话说，如果`/home/user/tests`不存在，错误信息将不会被`$( )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:11:41.543

看来 bash 脚本是在与手动运行时不同的用户 ID 下运行的；变量的不同值`PATH`意味着从 Makefile 运行时找不到`mocha`and命令。`messagel`

# php - 如何在我的命名空间中使用默认的 php 类？

> ID：12247820
> 
> 赞同：12
> 
> 时间：2012-09-03T12:24:05.913
> 
> 标签：php, namespaces

我正在使用命名空间来解决我在项目中使用的两个 SDK 中的类名冲突

我已经在其中一个文件中声明了一个名称空间，例如

```
namespace temp;

class abc extends stdClass
{
  // my class def
} 
```

当我点击此代码时，我收到错误提示找不到 temp/stdClass，所以我需要使用所有默认的 php 结构、迭代器等接口，那么如何导入 php 的默认命名空间或做任何其他我缺少的设置？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-03T12:32:12.517

`\`在任何全局类、函数和常量之前添加（`stdClass`在您的示例中）。[以下](http://nl.php.net/manual/en/language.namespaces.basics.php)是如何使用命名空间的更多信息。

# codeigniter - CodeIgniter -> URI 类，更具体；uri->uri_string()

> ID：12247823
> 
> 赞同：1
> 
> 时间：2012-09-03T12:24:20.320
> 
> 标签：codeigniter, url

使用 CI，当我这样做时：

```
var_dump($this->uri->uri_string());

var_dump($this->config->item('base_url')); 
```

在控制器`all`和方法`index()`中，我得到这些输出：

```
string 'dropbox/derrek/shopredux/afsgasg/sasga' (length=36)

string 'http://localhost/dropbox/derrek/shopRedux/' (length=40) 
```

不应该`$this->uri->uri_string()`输出：afsgasg/sasga？我做错了什么？

## **我的 routes.php 配置**

```
$route['(:any)'] = 'all/index/$1';

$route['default_controller'] = 'all/index';

$route['404_override'] = ''; 
```

* * *

## **我的 .htaccess 与 index.php 在同一文件夹中**

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

* * *

## 我的 config.php 配置

```
$config['base_url'] = ((isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] == "on") ? "https" : "http");
$config['base_url'] .= "://".$_SERVER['HTTP_HOST'];

$config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);

$config['index_page'] = '';

$config['uri_protocol'] = 'AUTO'; 
```

* * *

如果需要进一步的信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T12:34:26.017

```
$this->uri->uri_string() 
```

返回具有完整 URI 的字符串。例如，如果这是您的完整 URL：

[http://example.com/index.php/news/local/345](http://example.com/index.php/news/local/345) 该函数将返回：

新闻/本地/345

[在http://codeigniter.com/user_guide/libraries/uri.html](http://codeigniter.com/user_guide/libraries/uri.html)查看

所以在你的情况下:: url 是

```
http://localhost/dropbox/derrek/shopRedux/#something# 
```

所以它会输出`"dropbox/derrek/shopRedux/#something#"`

# javascript - 如何在 Meteor 应用程序中以不同的名称发布相同的集合？

> ID：12247824
> 
> 赞同：0
> 
> 时间：2012-09-03T12:24:24.230
> 
> 标签：javascript, meteor

在我的应用程序中，我有一个集合，它是一个视频列表，它只带来经过身份验证的用户的视频，并希望发布相同的集合以带来来自所有用户的最新 5 个视频。我正在做以下但没有成功：

```
//CLIENT
PlayLists = new Meteor.Collection('playlists');
LatestLists = new Meteor.Collection("latestlists");

Meteor.autosubscribe(function () {
    Meteor.subscribe('playlists', Session.get('listkey'));
    Meteor.subscribe('latestlists');    
});

Template.latestlist.latest = function(argument) {
    return LatestLists.find({});
};
Template.list.playlist = function(argument) {
    return PlayLists.find({});
};

//SERVER
PlayLists = new Meteor.Collection('playlists');
LatestLists = new Meteor.Collection("latestlists");

Meteor.publish('playlists', function (playlist) {
  return PlayLists.find({}, {user:this.userId()}); 
});
Meteor.publish('latestlists', function(){
  return PlayLists.find({}, {sort:{when:-1}, limit:5}); 
}); 
```

当我运行该应用程序时，我的最新列表集合始终为空。实现这一目标的最佳方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:58:10.353

当`livedata`您在`Meteor.publish(..)`.

Tom Coleman 举了一个很好的例子，说明如何让 Meteor 做你想要的事情：[在 Meteor 中，我如何以不同的名称发布一个服务器端 mongo 集合？](https://stackoverflow.com/questions/11751790/in-meteor-how-can-i-publish-one-server-side-mongo-collection-under-different-nam?rq=1#comment15629962_11764189)

基本上你应该按照他的建议做，要么： -

*   调用`_publishCursor`传入`PlayLists.find({})`光标并`latestlists`作为订阅名称的内部函数。

-或者-

*   复制该`_publishCursor`函数并将其放入一个包中以实现可重用性。

这两种方法都行得通，我更喜欢后者，因为我总是对调用内部函数持谨慎态度，因为它们很容易在你下面发生变化。

# java - 在 java 中从 Html 生成 Pdf 时出现 SSL 握手异常

> ID：12247826
> 
> 赞同：0
> 
> 时间：2012-09-03T12:24:30.800
> 
> 标签：java, web, ssl-certificate, itext, sslhandshakeexception

在我的 Web 应用程序中有一个从 html 页面生成 pdf 的选项。执行此操作时会出现以下异常。在这个 html 页面中，我们通过 https 访问 css 文件。但是，我可以通过 https 成功访问 Web 应用程序。

```
javax.net.ssl.SSLHandshakeException: 
           sun.security.validator.ValidatorException: PKIX path building failed: 
           sun.security.provider.certpath.SunCertPathBuilderException: 
           unable to find valid certification path to requested target

Caused by: sun.security.validator.ValidatorException: 
           PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: 
           unable to find valid certification path to requested target

Caused by: sun.security.provider.certpath.SunCertPathBuilderException: 
           unable to find valid certification path to requested target 
```

请提供您的宝贵建议。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:04:07.813

您的浏览器使用证书存储，并检查您正在访问的站点的公共证书是否可用。如果是这样，您访问该站点将没有问题。

Java 也会检查其证书存储，但它与您的浏览器使用的不同。这在[有关数字签名的白皮书](http://itextpdf.com/book/digitalsignatures20120823.pdf)中进行了解释 搜索文档以查找 PKIX，您会发现发生了什么。

# sql - SQL - 计算天数

> ID：12247827
> 
> 赞同：0
> 
> 时间：2012-09-03T12:24:33.293
> 
> 标签：sql, sql-server, date

我正在尝试计算客户提前或延迟支付发票的天数。

```
select 
    a.Invoice, 
    datediff(day,InvoiceDate,JournalDate) as Days, 
    c.DueDays, 
    c.Description as Terms  

from 
    ArInvoice a 
    Inner Join ArInvoicePay b on a.Invoice = b.Invoice 
    Inner Join TblArTerms c on a.TermsCode = c.TermsCode 
```

这对于具有*发票日期*期限的客户非常有用。问题是对于例如*月底有 60 天*的客户。我正在努力想出一种使用`InvoiceDate`和使用其他两个字段`InvDayOfMonth = '31'`并`InvMonths = '2'`计算天数的方法。

用外行的话来说，我需要计算从`InvoiceDate`31 天到 31 天的天数，将其加到 then 乘以`InvMonth`31。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:56:17.917

SQL 看起来像这样

```
SELECT 
dateadd(day,-1,
dateadd(month, 2, --Your variable here
--replace getdate with Invoice date, and figure out the 0+month part
convert(DATE, cast(Year(getdate()) as NVARCHAR) + '0'+cast(Month(getdate()) as NVARCHAR) + '01'))) 
```

由于您的评论，答案很简单

```
SELECT 
dateadd(day,60,InvoiceDate) 
--replace 60 with the number You've already calculated 
```

# sql - 如何正确使用表值函数？

> ID：12247829
> 
> 赞同：1
> 
> 时间：2012-09-03T12:24:43.567
> 
> 标签：sql, regex, sql-server-2008, user-defined-functions

我有一个有`nvarchar`列的表。存储在此列中的字符串`nvarchar`包含我需要提取的数字。我的数据库中存在一个表值`RegexMatches`函数，我可以使用它来执行此操作（它将返回数字模式的匹配列表）。

**我的要求：**

这个表值函数必须应用于表的每一行中的该列。我无法将中间结果存储在任何地方（意味着第 1 行的函数 - 存储 - 将函数应用于第 2 行 - 存储），因为我不知道那里会有多少记录并且很可能有 100 条记录。在过程结束时，我应该有一个临时表，其中存储了从所有行中提取的所有这些数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:27:26.723

您想使用[CROSS APPLY](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)。[在此处](http://www.mssqltips.com/sqlservertip/1958/sql-server-cross-apply-and-outer-apply/)查看更多示例。

# c++ - 如何输入十六进制值而不是字符作为 boost::asio::buffer 的输入

> ID：12247833
> 
> 赞同：1
> 
> 时间：2012-09-03T12:24:55.760
> 
> 标签：c++, c, char, boost-asio, cin

我很难为以下情况找到一个好的解决方案：

*write*函数采用const *char* ，通过调用*write(ch)*作为用户输入通过*cin.get(ch* ) 给出。ch 是一个*char*。

 **```
while (c.active()) 
{
 char ch;
 cin.get(ch); // blocking wait for standard input

 if (ch == 3) // ctrl-C to end program
   break;
 c.write(ch);
} 
```

这工作正常，但我想对其进行修改，以便可以进行如下输入：“0A00CD88”或“0A 00 CD 88”并将其用作*write*的输入，也就是将其用作*boost 的输入： :asio::缓冲区*。

为此，我可以使用**C/C++**和**boost**。

感谢任何分享这方面知识的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:34:04.950

下一个代码将解决您的第一个场景（没有空格）

```
int x;
std::cin >> std::hex >> x; 
```

[使用十六进制基数](http://www.cplusplus.com/reference/iostream/manipulators/hex/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:22:54.163

[那是你的解决方案：](https://stackoverflow.com/a/3221193/658346)

只需更换

```
std::string hex_chars("E8 48 D8 FF FF 8B 0D"); 
```

和

```
std::string hex_chars;
std::getline(std::cin, hex_chars); 
```

PS我希望我正确理解了你的问题:)**

# android - 动画在android中具有更大的灵活性和更好的性能

> ID：12247837
> 
> 赞同：0
> 
> 时间：2012-09-03T12:25:07.540
> 
> 标签：android, android-animation

我需要一个字幕文本动画（文本从屏幕的一侧移动到另一侧），所以我将动画类子类化（在谷歌搜索一些教程和复制粘贴之后）并让它工作。但是动画看起来不够流畅。虽然可能有一些我不了解动画的技术，但我想知道如果我需要精确控制和更好的性能，是否应该了解任何制作动画的高级方法（例如 OpenGL）？

顺便说一句：
1\. 这个动画是我的应用程序的核心，所以我需要它完全自定义（移动速度控制，ontouch 事件支持等）
2\. 我想把动画放在一个活动上，因为我需要一些菜单和弹出窗口我认为没有活动就很难画（也许我错了，因为我是 android dev 的新手）。

# jquery - 如何根据内容量动态更改div的大小

> ID：12247838
> 
> 赞同：1
> 
> 时间：2012-09-03T12:25:09.410
> 
> 标签：jquery, html, css

我正在为网站使用绝对定位。用户有个人资料，他们写的文本量会有所不同。

如何`div`根据显示的文本量动态更新元素的高度，即。更改`div`高度以动态适应内容。

```
<div class="profileContainer">
    <h3 class="profileText">
        Here is the text - this could be 1000px height plus
    </h3>
</div> 
```

我知道 jQuery`height()`方法，但我不确定如何计算给它的数字 - 即。如何找出文本的高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:28:29.143

在页面加载时（或者`h3`如果您有某种 AJAX 请求正在更新元素之后），您只需将高度设置为`#profileContainer`等于`#profileText`.

试试这个：

```
$("#profileContainer").height($("#profileText").height()); 
```

这当然是假设你已经在 CSS 中`height`为容器设置了一个特定的值。`div`如果你还没有，那么 的内容`h3`将自动导致容器根据需要增长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:31:34.467

如果您的目的是显示所有内容，那么下面的 css 就可以了。

```
 div.profileContainer {height:auto; width:300px;} 
```

这样容器将自动增大大小以适应内容，并且宽度将限制为 300px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:32:40.470

你可以用`css`......

```
<div class="profileContainer" style="height:auto;">
  <h3 class="profileText">
       Here is the text - this could be 1000px height plus
  </h3>
</div> 
```

# c# - 以编程方式退订事件

> ID：12247845
> 
> 赞同：5
> 
> 时间：2012-09-03T12:25:22.233
> 
> 标签：c#, vb6, com-interop

我有一个使用 COM 对象（COM 暴露的 C# 对象）的 vb6 应用程序。vb6 应用程序正在订阅由 COM (C#) 对象发布的事件。

我的问题是我不知道如何以编程方式取消订阅该事件。我知道如何取消订阅的唯一方法是首先不订阅（即注释掉 vb6 代码中的事件处理程序）。

有没有办法在运行时（以编程方式）取消订阅？也许通过识别与 vb6 事件处理程序对应的委托而不调用它来在 C# 端做一些事情？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:43:39.970

您可以通过保留两个对象引用变量来停止在 VB6 中接收事件，一个带有`WithEvents`关键字，一个没有关键字。如果要订阅，请将第一个设置为与第二个相同的对象，要取消订阅，请将第一个设置为`Nothing`. 当您想要释放对象时，您需要确保释放/替换它们。

```
Dim MyObject As MyClass
Dim WithEvents MyObjectEvents As MyClass

Public Sub MyObjectEvents_EventName()
  MsgBox "Received event"
End Sub

Private Sub Subscribe()
  Set MyObjectEvents = MyObject
End Sub

Private Sub Unsubscribe()
  Set MyObjectEvents = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T13:10:52.577

允许您拥有更多控制权的另一个选项是回调接口。

您在 .NET 库中公开了一个具有单一`EventXYZ`方法的接口。您的 VB6 类（和其他侦听器）可以实现此接口并将对该对象的引用传递给您的 .NET 类，以便它引发方法。

这与 COM 和 .NET 事件在内部使用的方法基本相同，但 .NET 对事件级别的粒度更细。

# asp.net - 防止面板内用户控件的宽度溢出

> ID：12247852
> 
> 赞同：0
> 
> 时间：2012-09-03T12:25:53.823
> 
> 标签：asp.net, css

这就是我的应用程序的样子，如您所见，我的用户控件不适合我的面板。如何将我的用户控件放入面板中？

![在此处输入图像描述](../Images/36f9d6426cbf8011a326e315eb899a42.png)

```
<asp:Panel ID="Panel1" runat="server" Width="500px" BorderColor="#000066" 
    BorderStyle="Solid">
    <uc2:OrderDetail ID="uc_OrderDetail" runat="server" />
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:39:35.073

在样式中使用“溢出”属性...希望这可以帮助您...

```
<asp:Panel ID="Panel1" runat="server" Width="500px" BorderColor="#000066"  style="overflow:scroll;" BorderStyle="Solid">
     <uc2:OrderDetail ID="uc_OrderDetail" runat="server" style="width:100%"/>
 </asp:Panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:26:50.797

您无法将表格放入该表格中，因为表格中有许多文本字段需要宽度。尝试以百分比给出宽度

```
 <asp:Panel ID="Panel1" runat="server" Width="100%" BorderColor="#000066" 
        BorderStyle="Solid">
        <uc2:OrderDetail ID="uc_OrderDetail" runat="server" />
    </asp:Panel> 
```

# django - django-celery 可以用于正常的 AJAX 调用吗？

> ID：12247853
> 
> 赞同：0
> 
> 时间：2012-09-03T12:25:59.610
> 
> 标签：django, celery, django-celery

我正在浏览 Celery (Django_celery) 文档。

我有一个困惑。它可以用于正常的 AJAX 调用吗？

示例：假设我有一个类似于 facebook 上的“Like”按钮的按钮。芹菜适合那种“任务”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:56:22.620

不，不是。Celery 用于异步后端任务 - Ajax 是异步的，因为 Javascript 在等待响应时不会阻塞，但在其他方面它就像一个普通请求：你调用一个 URL，它通过返回响应HTTP。

Celery 不这样做：它对于启动长期运行的后端作业很有用，但不能在它们结束时真正返回响应。它可能有用的地方是，如果您有一个由 Ajax 调用的视图，该视图启动了 Celery 作业，然后您的 JS 会定期 ping 它以查看它是否已完成，并相应地更新您的 HTML。

# macos - 一些点击在使用 selenium 独立服务器的 Safari 浏览器中不起作用

> ID：12247854
> 
> 赞同：11
> 
> 时间：2012-09-03T12:25:59.627
> 
> 标签：macos, selenium, safari, click

嗨，我正在使用 Selenium Standalone Server 和 Selenese 命令执行器在 Mac OS X 上的 Safari 上进行测试。我在单击特定页面上的某些按钮时遇到问题。相同的点击在其他浏览器中完美运行，如 firefox(Windows)、chrome(Windows+Mac)、IOS 模拟器、IE。我也能够通过 id 获取按钮。通过使用 getText() 获取按钮文本来确认。唯一的事情是单击命令后没有任何反应。我尝试过使用 button.click() 、 button.submit()。还使用 id、xpath、class 来查找按钮。正如我所提到的：我能够获得 id，只是点击不起作用。有什么建议么？一些代码是：

```
public static WebDriver getSafariDriver()
    {
        try
        {
            DesiredCapabilities capabilities = new DesiredCapabilities();
            capabilities.setBrowserName("safari");
            capabilities.setJavascriptEnabled(true);
            CommandExecutor executor = new SeleneseCommandExecutor(new URL("http://localhost:4444/"), new URL("http://www.google.com/"), capabilities);
            WebDriver driver = new RemoteWebDriver(executor, capabilities);
            return driver;
        } catch (MalformedURLException e)
        {
            e.printStackTrace();
        }
        return null;
    } 
```

通过命令提示符有什么解决方法吗？或者我可以尝试或错过的其他任何东西？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-29T12:12:21.950

尝试使用 javascript 执行器

```
WebElement yourelement= driver.findElement(By.id("btn"));
JavascriptExecutor executor = (JavascriptExecutor)driver;
executor.executeScript("arguments[0].click();", yourelement); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-14T07:40:29.127

我有同样的问题。经过长时间的调试，我发现问题是在Safari进行绑定之前JS没有完全加载，所以我不得不在页面加载后等待很长时间才能进行测试。

我在服务器端渲染了按钮（反应组件），但按钮的功能是在文档准备好时实现的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-02T15:00:58.463

我在 Safari 10+、OSX El Capitan 和 Selenium 3.0.1 上遇到了同样的问题

另一种选择可能是发送一个用 Python 实现的 RETURN 键：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

driver = webdriver.Safari()
driver.get('http://localhost:8000')
element = driver.find_element_by_id("submit")
element.send_keys(Keys.RETURN) 
```

# c# - ASP.NET Web API ReadAsAsync 失败且没有错误

> ID：12247857
> 
> 赞同：2
> 
> 时间：2012-09-03T12:26:15.447
> 
> 标签：c#, asp.net-web-api

我第一次尝试使用 ASP.NET Web API，但遇到了一个让我非常沮丧的问题。

我正在调用的 RESTful 服务返回以下数据：

```
<SearchResults  xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <Results>
        <Result>
            <Title>foo</Title>
        </Result>
        <Result>
            <Title>bar</Title>
        </Result>
    </Results>
    <NumberOfResults>2</NumberOfResults>
</SearchResults> 
```

所以我创建了一些实体来表示这些数据：

```
[Serializable, DataContract(Namespace = "")]
public class SearchResults
{
    public List<Result> Results { get; set; }
    public int NumberOfResults { get; set; }
}

[Serializable, DataContract(Namespace = "")]
public class Result
{
    public string Title { get; set; }
} 
```

然后我尝试反序列化数据：

```
var client = new HttpClient();
client.BaseAddress = new Uri("some uri");

var response = client.GetAsync("/some/path/").Result;
response.EnsureSuccessStatusCode();

var result = response.Content.ReadAsAsync<SearchResults>().Result; 
```

这会导致 SearchResults 对象的 Results = null 和 NumberOfResults = 0 即使我知道有结果被返回，并且如果我检查 response.Content.ReadAsStringAsync()，XML 包含预期的结果。

我改为尝试：

```
var serializer = new XmlSerializer(typeof(SearchResults));
var results = (SearchResults)serializer.Deserialize(response.Content.ReadAsStreamAsync().Result); 
```

这返回了一个完全填充的 SearchResults 对象。

最后，我尝试实现一个简单的 IFormatterLogger 并将其传递给 ReadAsAsync，如果我尝试读取流两次（如预期的那样！），它会被调用，但在使用 ReadAsAsync 进行反序列化的标准尝试期间不会被调用。

我可以只使用 XmlSerializer 并将其传递给它，因为它可以工作，但这看起来不像使用 ReadAsAsync 那样整洁，而且我真的很想知道我做错了什么:)

**2012 年 3 月 9 日英国夏令时 16:38 更新**

好的，我在使用 Web API 时显然遗漏了一些至关重要的东西，但我仍然不知道是什么！

我现在尝试使用带有 PUT 动词的服务，虽然当我使用 XmlSerializer 测试它时我的实体正确序列化，但请求失败并出现 HTTP 500。我检查了 Fiddler 发送的内容，Web API 生成的 XML 看起来与 XmlSerializer 生成的完全不同。首先，所有事物都有像“_x003C_Name_x003E_k__BackingField”这样的名称，而不仅仅是“名称”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T15:50:57.023

我的更新中奇怪的“k__BackingField”名称使我找到了解决方案，而且像往常一样，这很简单。

我忘记用 DataMemberAttribute 标记实体中的属性。

标记它们，这一切都开始按照我最初的预期工作！

就是这样！

# iphone - “presentModalViewController:animated:”和“dismissModalViewControllerAnimated:”的正确用法是什么？

> ID：12247861
> 
> 赞同：0
> 
> 时间：2012-09-03T12:26:49.237
> 
> 标签：iphone, objective-c, ios, cocoa, uiviewcontroller

我在对象分配和释放方面遇到问题。我正在开发一些具有图像编辑功能的应用程序。当用户点击选择图像时，会出现 UIImagePickerController，然后当用户从库中选择图像时，UIImagePickerController 会关闭，然后有一个方法：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    //some logic

    FilterViewController *filterViewController = [[FilterViewController alloc] initWithImage:imageToWorkWith
                                                                                    withDelegate:self];

        /* present image processing screen, then release it */
        [((UIViewController *)self.delegate) presentModalViewController:filterViewController animated:NO];            
        [filterViewController release];
} 
```

然后出现FilterViewController - 图像编辑屏幕。点击“完成”按钮后，将调用下一个方法：

```
- (void)dismissWithDone {
    [self.filterViewDelegate doneImageEdittingWithImage:self.imageToWorkWithView.image];
} 
```

它调用：

```
#pragma mark - FilterViewDelegate

- (void)doneImageEdittingWithImage:(UIImage *)imageToSend {
    //some logic

    [((UIViewController *)self.delegate) dismissModalViewControllerAnimated:NO];
} 
```

一切似乎都正常工作，但问题是 filterViewController 没有解除分配并保留在内存中。如果我将选择再次编辑一些照片，我的意思是如果创建 filterViewController 的方法将被再次调用，那么前一个实例将被释放并呈现新的实例，依此类推。我认为当调用 [UIViewController setChildModalViewController:] 时， filterViewController 的前一个实例在设置新实例时被释放。如果再添加一个版本：

```
[((UIViewController *)self.delegate) presentModalViewController:filterViewController animated:NO];            
[filterViewController release];
[filterViewController release]; 
```

那么它将在解雇后被释放，但在创建新实例时将是 bad_access，因为它会尝试释放释放的实例。

我不明白的地方： 1\. 为什么关闭filterViewController后，仍然有大于0的引用计数，导致不释放它？2\. 为什么在再增加一个release的情况下，childModalViewController中deallocated对象的引用依然存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:30:43.997

我在这里遇到的所有麻烦的原因是，我没有将我在那个 UIViewController 中使用的某个类中的某个块的某些属性设置为零。例如：我在这个 UIViewController 中使用 GPUImage 框架，并且我正在设置块：

```
self.movieWriter.completionBlock = ^{
    //do something with self.* properties
    [self someMethod];
} 
```

所以，在关闭 UIViewController 之前，我没有设置 nil 来清理这个块属性：

```
self.movieWriter.completionBlock = nil; 
```

这就是原因，没有在 UIViewController 上调用 dealloc。

此外[，这里](https://stackoverflow.com/questions/10998149/why-do-we-have-to-set-block-variable-to-nil)是关于块的解释以及为什么我们需要将它们的属性设置为 nil。

# c++ - 哪个是为 LAN 创建 ip 扫描器的最佳 C++ 库

> ID：12247869
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:27:14.253
> 
> 标签：c++, qt, shared-libraries

我希望在 C++/Qt 中创建一个 ip 扫描器，哪个库是最好的，当然也是线程安全的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:30:37.290

最著名的网络扫描仪之一[nmap](http://nmap.org/)使用[libpcap](http://www.tcpdump.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:36:08.897

Qt 支持许多不同的协议，我相信您将能够使用

> Q网络模块

[http://doc.qt.nokia.com/4.7-snapshot/network-programming.html](http://doc.qt.nokia.com/4.7-snapshot/network-programming.html)

# design-patterns - 如果“记录过程”失败，我该怎么办？

> ID：12247874
> 
> 赞同：0
> 
> 时间：2012-09-03T12:27:27.993
> 
> 标签：design-patterns, logging

我记录我的应用程序错误。但如果由于某些原因（数据库错误、硬盘中没有空间……等），日志记录过程失败。我怎么知道？如何记录失败的日志。

例子 ：

```
try{

    this_will_throw_exception();

}catch(Exception e){

    result = Log.error(e.getMessage());
    if( result == false)
        {
         // what should I do ?
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T21:32:32.887

您应该保持您的应用程序代码简单，即不要担心日志记录失败并将日志记录失败委托给记录器本身。

因此，您的应用程序代码应如下所示：

```
try{
  this_will_throw_exception();
} catch(Exception e){
  Log.error(e.getMessage());
} 
```

现在我们看看如何处理记录器中的故障。

首先，有很多日志框架提供 appender 故障转移。例如，我们在 log4j 中有一个 FailoverAppender，如果主要失败，它会记录到辅助 appender。[http://logging.apache.org/log4j/2.x/manual/appenders.html](http://logging.apache.org/log4j/2.x/manual/appenders.html)

如果您出于某种原因选择构建自己的日志记录层，您可能会发现装饰器模式对自己构建故障转移记录器很有用。

```
public interface Logger {
  boolean error(String message);
}

public DataBaseLogger implements Logger {
  ...
}

public FileLogger implements Logger {
  ...
}

public FailoverLogger implements Logger {
  private Logger primary;
  private Logger secondary;

  public boolean error(String message) {
    boolean succeed = primary.error(message);
    if (! succeed) {
      secondary.error("Primary logger failed");
      secondary.error(message);
      // Try to restart the primary logger, however it might be difficult.
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T13:57:15.727

```
try{

    this_will_throw_exception();

}catch(Exception e){

    result = Log.error(e.getMessage());
    if( result == false)
        LoggingFallback.Invoke(e);

    //important, don't hide exceptions
    throw;
}

public class LoggingFallback
{
    public static void Invoke(Exception exception)
    {
       // send an email or whatever

       // if that fails: throw  (include original exception as inner)
       throw new LoggingFailedException("Failed to log exception", exception);
    }
} 
```

动机：

如果日志记录很重要，请确保它始终成功，如果不能，则让应用程序失败。否则你最终会得到一个没有存储日志的应用程序。

如果您无法正确处理异常，也不要在不重新抛出的情况下捕获异常：http: [//blog.gauffin.org/2010/11/do-not-catch-that-exception/](http://blog.gauffin.org/2010/11/do-not-catch-that-exception/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:35:35.320

我想到的事情：

*   重新创建日志/更改配置（文件、存储等）。

*   将日志发送到远程位置。

*   向用户显示一个对话框（如果适用），以便通过电子邮件或类似方式报告此错误。

# ios - iOS 企业部署的自动化测试

> ID：12247877
> 
> 赞同：1
> 
> 时间：2012-09-03T12:27:38.183
> 
> 标签：ios, xcode, deployment, jenkins, enterprise

我在我的公司管理移动开发团队，我们有一个企业应用程序商店来将应用程序分发给我们的员工。商店直接来自我们的持续构建服务器（OS X 上的 Jenkins）。

我们最大的问题是，在 Jenkins 上正确编译和构建的应用程序通常不会安装在设备上，因为奇怪的验证和许可证要求并未强加于开发设备。

有没有办法（最好是 Jenkins 集成）来自动化这个部署步骤的测试，即将构建的 .ipa 推送到设备并查看它是否安装正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:35:02.453

您可以使用 Greg Hughes 的*transporter Chief*脚本从 shell 安装您的应用程序，该脚本使用与 Itunes 相同的功能来安装 ipa。

安装时遇到什么错误？我一直在为我们的客户和开发人员运行我们的 alpha 和 dev 构建的临时分发站点，在过去的 12-16 个月里它运行得非常顺利。

只要应用程序成功构建和签名，分发就没有问题，尽管我们有一些“误报”构建，其中某些过程使应用程序失效，现在这已经通过监控几乎消除了在下一次构建之前，每个步骤的成功和适当的清理。

[格雷格休斯@github](https://github.com/ghughes/fruitstrap)

# asp.net - 如何显示通过 id 连接的两个表中的数据？

> ID：12247880
> 
> 赞同：-1
> 
> 时间：2012-09-03T12:27:40.723
> 
> 标签：asp.net

我有两张表，内容如下：

```
table 1
sid, schedule, stime, splace, stourid

table 2
tourid, tourname 
```

我想`table 1`在 GridView 中显示 ，但`stourid`我希望显示的字段是`tourname`from`table 2`而不是`stourid`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:35:46.040

假设上面的 stourid 是指向表 2 的指针并映射到 tourid，我将创建一个带有 tourid/stourid 连接的视图并显示该视图。就像是：

```
CREATE VIEW myView
AS
SELECT sid, schedule, stime, splace, tourname
FROM
[table 1] AS t1 
JOIN [table 2] AS t2
ON t1.stourid = t2.tourid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:29:34.453

对您的数据执行以下 SQL 语句，将结果绑定到您的表并仅显示您想要显示的列。

```
select * from table1 join table2 on table1.tourid = table2.tourid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:31:27.087

您可以使用`Join`查询：

```
SELECT sid, schedule, stime, splace, tourname
FROM table1 INNER JOIN table2 ON table1.stourid = table2.tourid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:33:21.720

使用内连接...

```
select t1.sid,t1.schedule,t1.stime,t1.splace,t2.tourname from table1 t1 inner join table2 t2 on t1.tourid = t2.tourid 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T12:34:46.687

SELECT sid, schedule, stime, splace, tourname FROM table1 交叉连接表2

# api - 在谷歌地图 API 中格式化气球

> ID：12247882
> 
> 赞同：0
> 
> 时间：2012-09-03T12:27:53.347
> 
> 标签：api, google-maps

我有以下页面： [http](http://www.skimmydiscs.co.uk/find-your-nearest-service-centre/) ://www.skimmydiscs.co.uk/find-your-nearest-service-centre/ 允许您搜索车库 - 例如，放入斯卡伯勒，您会得到一个列表，选择第一个位置，地图重绘显示几个地点标记。单击标记会弹出一个气球。我无法弄清楚如何将弹出的气球的大小设置为 400 宽乘以至少 300 高......这是该页面上的代码：

```
 <script type="text/javascript">
  function initialize() {
   var kmlfile = "http://www.skimmydiscs.co.uk/SMD_Data.kml?"+(new Date()).valueOf();
    var mapOptions = {
      center: new google.maps.LatLng(54.75,-3.5),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);
    var input = document.getElementById('searchTextField');
    var autocomplete = new google.maps.places.Autocomplete(input);
    autocomplete.bindTo('bounds', map);
    var infowindow = new google.maps.InfoWindow();

// Action the Event Listener, zoom in and put the kml layer in place
    google.maps.event.addListener(autocomplete, 'place_changed', function() {
      var place = autocomplete.getPlace();
      if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport); 
//add the layer
   var ctaLayer = new google.maps.KmlLayer(kmlfile,{preserveViewport: true});
   ctaLayer.setMap(map);

      } else {
        map.setCenter(place.geometry.location);
        map.setZoom(10); 
      }

    });

    //setupClickListener('changetype-all', []);
    //setupClickListener('changetype-establishment', ['establishment']);
    //setupClickListener('changetype-geocode', ['geocode']);
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

我需要指导， - 非常感谢任何帮助。

谢谢安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:34:55.743

在我看来，气球打开例程是 Google 地图的 KML 图层功能“内置”的，所以我建议使用以下两个技巧：

1，硬）使用允许单个 KML 元素操作的[GeoXML3](http://code.google.com/p/geoxml3/)，如下所述：[http ://code.google.com/p/geoxml3/wiki/Usage](http://code.google.com/p/geoxml3/wiki/Usage)

2、丑）编辑你的SMD_Data.kml文件里面的文字，加一些换行`<br><br>`，人为的强制气球变大，或者是空白间隔图片

# c - 为什么从函数返回后我的变量损坏了？

> ID：12247884
> 
> 赞同：1
> 
> 时间：2012-09-03T12:28:00.717
> 
> 标签：c, stack

下面是我的c代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

char *username;
char *password;

void set_credentials(char*, char*);

int main(void)
{
  set_credentials();
  printf("%s\n", username);     //look here 3
  printf("%s\n", password);     //look here 4
  return EXIT_SUCCESS;
}

void set_credentials(char *username, char *password)
{
  char c;
  char lines[2][100];
  char * tmp = * lines;
  char * user = "user";
  int i = 0;
  FILE *fp = fopen("/netnfork/config/netnfork_credentials.properties", "r");

  if (fp == NULL)
    exit(EIO);
  while ((c = fgetc(fp)) != EOF)
  {
    if (c != '\n')
    {
      *tmp = c;
      tmp++;
    } else {
      *tmp = '\0';
      i++;
      tmp = lines[i];
    }
  }
  fclose(fp);
  i = 0;
  while (i < 2)
  {
    if (strncmp(user, lines[i], 4) == 0)
    {
      username = lines[i] + 5;
      printf("%s\n", username); //look here 1
    } else {
      password = lines[i] + 9;
      printf("%s\n", password);  //look here 2
    }
    i++;
  }
} 
```

现在，当我运行代码时，我得到了这个：

> myname //for 1
> mypassword //for 2
> myname //for 3
> mypasswo��� //for 4

我不明白为什么会有这种行为。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:35:10.223

您的问题是您正在为`lines`数组的某些部分分配用户名和密码。该数组是一个局部变量，分配给它的内存在完成`lines`后不再安全。`set_credentials`要修复它，请使用`malloc`获取用户名和密码的内存，或创建`lines`一个全局变量，如`username`and `password`are。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T08:44:20.780

这是一个使用 malloc() 和 free() 的版本。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

/* "user " */
#define USERLINE_PREFIX 5
/* "password " */
#define PASSLINE_PREFIX 9

void set_credentials(char**, char**);

int main(void)
{
  /* to point to the username and password obtained from a text file */
  char *username = NULL;
  char *password = NULL;
  set_credentials(&username,&password);
  /* (original scheme) printf("username: %s\n", username);  */
  /* (original scheme) printf("password: %s\n", password);  */
  printf("username: %s\n", username + USERLINE_PREFIX ); // line starts "user "    
  printf("password: %s\n", password + PASSLINE_PREFIX ); // line starts "password "
  /* (original scheme)  free(username - USERLINE_PREFIX); */
  /* (original scheme) free(password - PASSLINE_PREFIX); */
  free(password);
  free(username);
  return EXIT_SUCCESS;
}

void set_credentials(char **username, char **password)
{
  /* file format:
  line 1 ->user <username>
  line 2 ->password <password>
  */
  char c;
  #define FILE_LINES 2
  #define MAX_LINE_LENGTH 100
  int i = 0, j = 0;
  char *lines[FILE_LINES];
  char *tmp = NULL;
  char *user = "user ";
  char *pass = "password ";
  char user_found = 0, password_found = 0;
  for (j = 0; j < FILE_LINES; j++)
  {
    lines[j] = malloc( MAX_LINE_LENGTH + 1 );
    lines[j][0] = '\0';
  }
  tmp = lines[0];
  const char *filename = "/netnfork/config/netnfork_credentials.properties";
  FILE *fp = fopen(filename, "r");

  if (fp == NULL)
  {
    printf("ERROR %d trying to open %s\n",errno,filename);
    /* if not exiting program, would need to free() here */
    exit(EIO);
  }
                                /* in case more lines than expected */
  while ((c = fgetc(fp)) != EOF && i < FILE_LINES)
  {
    if (c != '\n')
    {
      *tmp = c;
      tmp++;
    } else {
      *tmp = '\0';
      i++;
      tmp = lines[i];
    }
  }
  if ( i < 2 )  {
     printf("ERROR: file %s is incomplete needs %d lines (password and user)\n",filename,FILE_LINES);
     /* if not exiting program, would need to free() here */
     exit(1);
  }
  fclose(fp);
  i = 0;
  while (i < FILE_LINES)
  {
    if (strncmp(user, lines[i], USERLINE_PREFIX) == 0)
    {
       user_found = 1;
       /* (original scheme) *username = lines[i] + USERLINE_PREFIX; */
       *username = lines[i];
    }
    else if  ( strncmp (pass, lines[i],PASSLINE_PREFIX) == 0 ) {
       password_found = 1;
       /* (original scheme) *password = lines[i] + PASSLINE_PREFIX; */
       *password = lines[i];
    }
    else {
       printf("ERROR: invalid line in file:\n");
       printf("%s\n",lines[i]);
       /* if not exiting program, would need to free() here */
       exit(1);
    }
    i++;
  }
  /* check for the extremely unlikely event that the two lines are both of the same type */
  if ( ! (password_found && user_found ) )
  {
     printf("ERROR: file %s is invalid, missing %s line\n",filename, (user_found) ? "password" : "user" );  
     /* if not exiting program, would need to free() here */
     exit(1);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T13:49:49.913

大卫发现了你的问题。一种解决方案是分配函数可以填充的两个字符数组。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

void set_credentials(char*, char*);

int main(void)
{
  /* to hold the username and password obtained from a text file */
  char username[200] = { '\0' };
  char password[200] = { '\0' };
  set_credentials(username,password);
  printf("%s\n", username);     //look here 3
  printf("%s\n", password);     //look here 4
  return EXIT_SUCCESS;
}

void set_credentials(char *username, char *password)
{
  char c;
  char lines[2][100];
  int i = 0;
  char *tmp = *lines;
  char *user = "user";
  char *pass = "password";

  const char *filename = "/netnfork/config/netnfork_credentials.properties";
  FILE *fp = fopen(filename, "r");

  if (fp == NULL)
    exit(EIO);
  else
    printf("successfully opened %s\n",filename);
                                /* in case more than 2 lines */
                                /* or increase array first dimension */ 
  while ((c = fgetc(fp)) != EOF && i < 2)
  {
    if (c != '\n')
    {
      *tmp = c;
      tmp++;
    } else {
      *tmp = '\0';
      i++;
      tmp = lines[i];
    }
  }

  fclose(fp);
  i = 0;
  while (i < 2)
  {
    if (strncmp(user, lines[i], 4) == 0)
    {
      strcpy(username,lines[i] + 5);
    }
    else if  ( strncmp (pass, lines[i],8) == 0 ) {
      strcpy(password,lines[i] + 9);
    }
    else {
      /* can't assume file is correct so fatal error if not */
      printf("ERROR: invalid line in file:\n");
      printf("%s\n",lines[i]);
      exit(1);
    }
    i++;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T12:34:55.933

您已经创建了两个指针`username` ，`password`它们指向在该特定函数堆栈框架上创建的函数局部变量。当函数返回时，这些指针将指向垃圾，因为堆栈帧已经被销毁，函数局部变量也是如此。

您需要将变量作为 args 传递给您的`set_credentials` 函数，或者您需要创建一个`struct`可以从您的函数返回的正确填充的变量。按值返回结构。不需要指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T07:39:18.927

您可以在函数中使用静态变量，它允许您返回指向它的指针，因为即使在函数退出后静态变量也会存在。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

/* 
  In order to modify a caller's char in a function it must be passed as pointer to char 
  In order to modify a caller's "char *" in a function it must be passed as pointer to "char *" 
*/ 
void set_credentials(char**, char**);

int main(void)
{
  /* to point to the username and password obtained from a text file */
  char *username = NULL;
  char *password = NULL;
  /* pass the addresses of the char *'s so their contents can be modified */
  set_credentials(&username,&password);
  printf("%s\n", username);     //look here 3
  printf("%s\n", password);     //look here 4
  return EXIT_SUCCESS;
}

void set_credentials(char **username, char **password)
{
  char c;
#define MAX_FILE_LINES 2
  static char lines[MAX_FILE_LINES][100];
  int i = 0;
  char *tmp = *lines;
  char *user = "user";
  char *pass = "password";

  const char *filename = "/netnfork/config/netnfork_credentials.properties";
  FILE *fp = fopen(filename, "r");

  if (fp == NULL)
  {
    printf("ERROR: unable to open %s\n",filename);
    exit(EIO);
  }
  else
    printf("successfully opened %s\n",filename);
                                /* in case more lines than expected */
  while ((c = fgetc(fp)) != EOF && i < MAX_FILE_LINES)
  {
    if (c != '\n')
    {
      *tmp = c;
      tmp++;
    } else {
      *tmp = '\0';
      i++;
      tmp = lines[i];
    }
  }

  fclose(fp);
  i = 0;
  while (i < 2)
  {
    if (strncmp(user, lines[i], 4) == 0)
    {
      /* assign to the char * back in the calling routine */
      *username = lines[i] + 5;
    }
    else if  ( strncmp (pass, lines[i],8) == 0 ) {
      /* assign to the char * back in the calling routine */
      *password = lines[i] + 9;
    }
    else {
      /* can't assume file is correct so fatal error if not */
      printf("ERROR: invalid line in file:\n");
      printf("%s\n",lines[i]);
      exit(1);
    }
    i++;
  }
} 
```

# winapi - 将 LPWSTR 分配给现有的 wstring

> ID：12247887
> 
> 赞同：1
> 
> 时间：2012-09-03T12:28:17.053
> 
> 标签：winapi, type-conversion, wstring

我正在寻找一种将 LPWSTR 的内容复制到现有 wstring 的方法。我找到了很多相反的例子，但我仍在寻找一种方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T13:09:37.643

您不能保证`.c_str()`在修改字符串句点后会呈现相同的指针（如果这是您想要做的）。

`LPWSTR`将 a 分配给对象的正确方法`std::wstring`是使用`operator=()`，例如：

```
std::wstring existingString = L"text";
LPCWSTR c_str = L"more text";
existingString = c_str; 
```

但这非常简单；如果这没有涵盖它，也许您应该详细说明您要尝试做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:31:44.020

如果这是为了节省分配时间，std::wstring 通常可以做正确的事情，但如果你真的绝对必须这样做......

```
wcsncpy(&wstr[0], wsrc, wstr.size()-1);
wstr[wstr.size()-1] = 0; 
```

我觉得写那个真的很脏。注意：这不会在 wstr 对象中分配空间。此外，我保证如果 wstr 实际上是空的，它会爆炸，所以要小心。它只会使用您已经拥有的任何东西进行存储。如果您想要/需要更多空间，则适当地使用 .resize() ，但正如我之前所说，std::wstring 的赋值运算符真的可以满足您的需求，只要您允许它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:34:53.390

为什么不

```
LPWSTR k = L"my string";
std::wstring ws(k); 
```

或者如果您真的必须分配给现有的 wstring

```
 std::wstring existing;
 ....
 existing.assign(k); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-03T12:37:50.610

这样做是一个 hack 和实现依赖。正确的方法是将 LPCWSTR**分配给**wstring - 然后编译器将确保将内容正确**复制**到现有的 char 缓冲区（如果存在）或首先分配它然后复制。

# sockets - 使用 Microsoft Excel（后端）和 JSP（前端）实现分布式数据库系统

> ID：12247893
> 
> 赞同：1
> 
> 时间：2012-09-03T12:28:34.183
> 
> 标签：sockets, jsp, apache-poi, distributed-database

我正在做一个项目，简而言之就是一个分布式数据库项目。

## **要求**

**模块 1：**

1）使用已经包含一些数据的excel表读取和更新excel表。

**状态：**已实施。

简要细节：我使用来自 jakarta Foundations 的 POI 作为 API 来使用 JSP 与 excel 表进行交互。

**模块二：**

**状态：**需要帮助。

简要细节：

1）此jsp页面和excel文件将放置在可以更新其各自excel文件的各个最终用户处。现在，在时间限制的基础上，他们不需要（有意地）将此文件上传到服务器，此文件必须与服务器上当前对应的条目同步。

2）服务器必须使用以下功能：

一个。同步该服务器上存在的先前数据和当前发送的相应数据（存在于上传的工作表中）。

湾。需要维护检查点（以防发生故障）并确保数据库的所有 ACID 属性。

**求求求求！！！**
帮助我了解正确实现此数据库应用程序的分布式特性的技术（和其他 api，如果有的话）。感谢您的时间。

问候

# javascript - jQuery在嵌套命令中获取悬停元素的ID

> ID：12247894
> 
> 赞同：1
> 
> 时间：2012-09-03T12:28:41.580
> 
> 标签：javascript, jquery, html

我正在寻找类似于`this.id`悬停元素的东西。当我插入`this.id`部分`return...`时，返回的 id 是 id `container`。任何想法如何跳转并转到原始悬停元素的 id？

```
$("#results p").hover(function() {
     $("#container").prepend(function() {
          return "<div id=\"tooltip\"><div id=\"tooltip-inside\">" + e.target.id + "</div></div>";
     });
}, function() {
     $("#tooltip, #tooltip-inside").remove();   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:33:02.647

```
$("#results p").hover(function() {
     var hovered = $(this);
     $("#container").prepend('<div id="tooltip"><div id="tooltip-inside">'+hovered.attr('id')+'</div></div>');
}, function() {
     $("#tooltip").remove();   
}); 
```

我还改进了代码。

如果你已经在使用 jQuery 为什么不使用[`.attr()`](http://api.jquery.com/attr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:31:32.617

您应该在回调中从`target`对象中读取 id ：`hover`

```
$("#results p").hover(function(e) {
     var id = e.target.id;
     $("#container").prepend(function() {
          return "<div id=\"tooltip\"><div id=\"tooltip-inside\">" + id  + "</div></div>";
     });
}, function() {
     $("#tooltip, #tooltip-inside").remove();   
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T12:32:50.910

```
$("#results p").hover(function() {
     // get a reference value using jQuery. "this" refers to the element being hovered over
     var myId = $(this).attr('id');
     $("#container").prepend(function() {
          return "<div id=\"tooltip\"><div id=\"tooltip-inside\">" + myId + "</div></div>";
     });
}, function() {
     $("#tooltip, #tooltip-inside").remove();   
}); 
```

# data-warehouse - 维度表必须要有主键吗？

> ID：12247898
> 
> 赞同：2
> 
> 时间：2012-09-03T12:28:50.757
> 
> 标签：data-warehouse

我有一个问题要问大家。我首先搜索了任何现有的相同问题，但只找到了相关问题，但不是针对我的问题。所以这里是：

我的维度表有一个主键重要吗？我问这个是因为我设计数据仓库的方式是我在规范化数据存储上管理我的代理键。然后代理键只是传递给暗表。来自源系统的任何更新都将首先反映在 NDS（类型 1 或覆盖）上。所以基本上，我不跟踪规范化数据存储中的历史值。但是，我确实会跟踪维度数据存储的变化。

因此，暗表上的代理键不由数据库管理。如果源系统发生更改，则具有相同代理键的新行，除了我选择的类型 2 更改的字段/列之外的所有内容都相同。

由于暗表上没有主键，事实表上将没有 FK 约束。在使用数据集市（没有 PK/FK 约束的事实表和暗表）时，这将如何影响数据仓库的性能？

这是我的示例数据的屏幕截图：

[http://i69.photobucket.com/albums/i47/boxingpics/dim_customer.jpg](http://i69.photobucket.com/albums/i47/boxingpics/dim_customer.jpg)

这可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T13:01:00.340

是的，您需要在维度表中有一个主键。

我猜 NDS 只是使用代理键设计模式来管理跨不同源系统的实体。这并不少见……这是Thomas Kejser[的](http://kejser.org/an-overview-of-source-key-pathologies/)一篇好文章，涵盖了出现的一些问题。

最重要的是，如果您的 NDS 仅跟踪类型 1 更改，并且您需要跟踪数据集市中的类型 2（历史）更改，那么您将需要添加一个额外的代理键。

# javascript - 动态 jQuery UI 日期选择器元素

> ID：12247902
> 
> 赞同：0
> 
> 时间：2012-09-03T12:29:05.027
> 
> 标签：javascript, jquery-ui, datepicker

我正在使用 jQuery UI datepicker 函数在我的 html 表单中创建许多日期字段。

我正在使用以下代码来获取任何带有“datepicker”类的输入字段：

```
$('.datepicker').each(function() {
    var id = $(this).attr('id').split('_')[0];

    if ($('#'+id+'_value').val()) { 
        var initialdate = new Date($('#'+id+'_value').val());
    }
    else {
        var initialdate = new Date();
    }

    $(this).val($.datepicker.formatDate('DD, d MM, yy', initialdate));
    $('#'+$(this).attr('id').split('_')[0]+'_value').val($.datepicker.formatDate('yy-mm-dd', initialdate));
    $(this).datepicker({
                        'dateFormat': 'DD, d MM, yy',
                        'altField': '#'+id+'_value',
                        'altFormat': 'yy-mm-dd' 
    });
}); 
```

但是，我还使用其他一些 javascript 来克隆包含多个表单元素的跨度。创建新元素时，datepicker 函数不起作用。

我该怎么做才能使新的像现有的一样工作？

任何建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:36:01.393

由于您可能在创建文档时调用了该迭代，因此稍后添加到 DOM 的项目不会实例化为新的日期选择器，因此您必须在希望启用日期选择器的每个新添加的元素上显式调用 .datepicker()。

基本上，将代码从上面的迭代器移到它自己的函数中，然后执行：

```
$('.datepicker').each(myDatePickerFunction($(this)); 
```

并在稍后添加的元素上调用相同的函数。

# javascript - JavaScript RegExp：使用 RegExp 检索字符串的一部分？

> ID：12247907
> 
> 赞同：0
> 
> 时间：2012-09-03T12:29:11.877
> 
> 标签：javascript, regex

我有一个字符串，其值如下：`"H798asdhka80:124htg"`

我想从这个字符串（和类似结构的字符串）中检索冒号“：”之前的每个字符，所以我的新字符串看起来像这样：`H798asdhka80`

执行此操作的代码是什么样的？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:30:24.467

采用

```
var str="H798asdhka80:124htg".split(':')[0] 
```

使用`split(':')`你得到数组`["H798asdhka80","124htg"]`。然后只使用该数组的第一个元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T12:30:32.857

使用`substr`：

```
var str = "H798asdhka80:124htg",
    strpart = str.substr(0,str.indexOf(':')); 
```

或者`slice`

```
var str = "H798asdhka80:124htg",
    strpart = str.slice(0,str.indexOf(':')); 
```

或者`split`

```
var strpart = "H798asdhka80:124htg".split(/:/)[0]; 
```

或者`match`

```
var str = "H798asdhka80:124htg".match(/(^.+)?:/)[1]; 
```

或者`replace`

```
var str = "H798asdhka80:124htg".replace(/:.+$/,''); 
```

或创建更通用的`String.prototype`扩展

```
String.prototype.sliceUntil = function(str){
  var pos = this.indexOf(str);
  return this.slice(0, (pos>-1 ? pos : this.length));
}
var str = "H798asdhka80:124htg".sliceUntil(':124'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T12:33:21.680

一个正则表达式答案，匹配从字符串开头到冒号的任何内容。

```
var str = "H798asdhka80:124htg";
var txt = str.match(/^[^:]+/); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-03T12:30:57.350

```
"H798asdhka80:124htg".split(':')[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-03T12:31:48.537

您实际上并不需要 RegExp。这应该适合你：

```
str.split(':')[0]; 
```

无论如何，另一种方法是`replace`使用正则表达式对字符串中不需要的部分进行处理，如下所示：

```
str.replace(/:.+$/, ''); 
```

[演示](http://jsfiddle.net/amaan/p3nxg/)

# c++ - 外部 vs 单例类

> ID：12247912
> 
> 赞同：3
> 
> 时间：2012-09-03T12:29:27.893
> 
> 标签：c++, static, singleton, extern

假设我们有一些使用 extern 关键字的外部链接。

我有（在class1.cpp中）：

```
MyClass* myClassVar = NULL; 
```

构造函数初始化以上内容，析构函数删除。

然后在 class2.cpp 和 class3.cpp 中有：

```
extern MyClass* myClassVar; 
```

这些类使用 myClassVar（进行通常的空值检查等）。

单身人士会更受欢迎吗？（我知道全局变量不好等等，单例只是语法糖）。将上面的代码更改为下面的代码是否有好处？

```
static Singleton& getInstance()
{
   static Singleton instance;

   return instance;
} 
```

然后所有课程都会做：

```
Singleton::getInstance() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T12:35:27.103

全局变量遭受*初始化顺序惨败*。单独翻译单元中的全局变量以未指定的顺序初始化，因此如果一个在其构造函数中引用另一个，您将获得未定义的行为。

函数范围内的静态变量在第一次调用函数时被初始化，这（或多或少）解决了初始化顺序问题。

然而，更微妙的问题仍然存在；特别是，在对象被销毁后仍然可以访问它，并且有一些开销来确保线程安全初始化（并且，在旧编译器中，初始化可能根本不是线程安全的）。管理非平凡类型的全局可访问对象没有完全安全的方法，我的建议是尽可能避免使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T12:31:37.413

既然您说您已经知道任何类型的全局变量的缺点，唯一的优点是您将类的实例限制为 1，而不是 using `extern`，您可以在其中定义多个此类变量。

# c# - 类似 WQL 的运算符不适用于 REF 属性

> ID：12247913
> 
> 赞同：0
> 
> 时间：2012-09-03T12:29:31.737
> 
> 标签：c#, wmi, wql

**gwmi -Query "SELECT * FROM Win32_Service WHERE Name LIKE '%Logon%'"** （工作正常）

返回一组结果，
但是当我在其他一些类 REF 属性上运行类似查询时，例如：[Win32_DependentService](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394120%28v=vs.85%29.aspx) over Antecedent 属性，查询无效。

**gwmi -Query "select * from Win32_DependentService where Antecedent like '%'"**（不起作用）（例如，我的意图不是显示 Win32_DependentService 中的所有条目，我有一个适当的 like 子句。）

上面的一个告诉查询告诉无效。

来自 MSDN 的 Win32_DependentService

```
class Win32_DependentService : CIM_ServiceServiceDependency
{
  Win32_BaseService REF Antecedent;
  Win32_BaseService REF Dependent;
  uint16            TypeOfDependency;
}; 
```

**gwmi -Query "select * from Win32_DependentService where Antecedent='\\\\XXXXXXX-machine\\root\\cimv2:Win32_SystemDriver.Name=`"ibbus`"'"**这给出了正确的结果。

为什么会这样？是因为先行财产是REF吗？

如果可能的话，请用适当的例子告诉我行为，以及在这种情况下如何使用“喜欢”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:31:41.153

听起来您只需要使用“NOT Antecedent.Name IS NULL”，如果您想返回此属性具有值的所有记录（即不是空白）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T13:09:20.650

我不太熟悉您要执行的操作，如果这完全不合时宜，请原谅我，但首先想到的是 Windows 服务的名称是一个简单的字符串，而前项是一个类，因此您在更具体的 where 子句中显示您必须提供某种路径才能使查询正常工作，简而言之，通配符可能仅适用于字符串。

你有没有尝试过类似的东西

```
gwmi -Query "select * from Win32_DependentService where Antecedent.Name like '%'" 
```

不确定这是否会处理没有前因或 id 的服务，它甚至是有效的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T08:28:50.220

LIKE 运算符确定字符串（不为空，但至少有 1 个或多个字符）是否与模式匹配。所以语句 - *WHERE value **LIKE** '%'* - 没有意义，因为该值没有什么可检查的。请参阅 WQL LIKE 运算符：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa392263 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392263(v=vs.85).aspx)

# c# - 如何在 Windows 服务应用程序中添加 config.ini 文件？

> ID：12247917
> 
> 赞同：0
> 
> 时间：2012-09-03T12:29:54.553
> 
> 标签：c#, c#-4.0, configuration-files

我已经安装了这个应用程序，但问题是这个应用程序不读取 config.ini 文件我得到了 config.ini 不存在的错误？确定我错了我不知道如何在安装项目中添加 config.ini 文件？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Diagnostics;
using System.Linq;
using System.ServiceProcess;
using System.Text;
using System.Timers;
using System.Net.NetworkInformation;
using System.IO;

namespace MovimentoServic
{
    public partial class Service1 : ServiceBase
    {
        Dictionary<string, string> vpN = new Dictionary<string, string>();
        cancelaments cancel = new cancelaments();
        vendas vendas = new vendas();
        Vendaecf ecf = new Vendaecf();
        Sangrias sangria = new Sangrias();
        Devolucao devolucao = new Devolucao();
        CancelamentECF cancelecf = new CancelamentECF();
        EnviarItemparalojas enivar = new EnviarItemparalojas();
        RecheckVendas recheck = new RecheckVendas();

        String vpn = null;
        String host = null;
        string user = null;
        string pass = null;
        string mysql_db = null;
        string vpn_db = null;
        String permissao = null;
        int count = 0;

        public void conect()
        {
            if ( System.IO.File.Exists("config.ini") )
            {
                String[] INI = System.IO.File.ReadAllLines("config.ini");

                for ( int i = 0; i < INI.Length; i++ )
                {
                    if ( INI[i].StartsWith("HOST") )
                    {
                        host = INI[i].Substring(INI[i].IndexOf("=") + 1);
                    }
                    if ( INI[i].StartsWith("USER") )
                    {
                        user = INI[i].Substring(INI[i].IndexOf("=") + 1);
                    }
                    if ( INI[i].StartsWith("PASS") )
                    {
                        pass = INI[i].Substring(INI[i].IndexOf("=") + 1);
                    }
                    if ( INI[i].StartsWith("DBPATH") )
                    {
                        mysql_db = INI[i].Substring(INI[i].IndexOf("=") + 1);
                    }

                    if ( INI[i].StartsWith("VPN") )
                    {
                        vpn = (INI[i].Substring(INI[i].IndexOf("=") + 1));
                        Char[] cs = { ';' };
                        String[] VPN = vpn.Split(cs);
                        vpN.Add(VPN[0], VPN[1]);
                    }
                    if ( INI[i].StartsWith("DBPATH_VPN") )
                    {
                        vpn_db = (INI[i].Substring(INI[i].IndexOf("=") + 1));
                    }
                    if ( INI[i].StartsWith("Permissao") )
                    {
                        permissao = (INI[i].Substring(INI[i].IndexOf("=") + 1));
                    }

                }
            }

        }
        public static bool IsAlive( string aIP, String shop )
        {
            bool result = false;
            Ping pingSender = new Ping();
            PingOptions options = new PingOptions();
            options.DontFragment = true;
            string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
            byte[] buffer = Encoding.ASCII.GetBytes(data);
            int timeout = 10;
            PingReply reply = pingSender.Send(aIP, timeout, buffer, options);
            if ( reply.Status == IPStatus.Success )
            {
                result = true;
            }
            return result;
        }

        long Validtime = 50;
        int tk = 0;
        private void timer1_Elapsed( object sender, EventArgs e )
        {
            tk++;
            if ( tk == Validtime )
            {
               // Workout();
                tk = 0;
            }

        }
        public Service1()
        {
            InitializeComponent();

        }

        protected override void OnStart( string[] args )
        {
            conect();

            Timer timer1 = new Timer();
            timer1.Interval = 100;
            timer1.Start();
            timer1.Elapsed += new ElapsedEventHandler(timer1_Elapsed);

        }

        protected override void OnStop()
        {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:52:31.357

使用自 2.0 版以来内置于 .NET Framework 中的设置机制，而不是您的`config.ini`文件。

为此，请打开项目的属性并转到`Settings`选项卡。添加您需要的设置（注意`app.config`正在创建一个文件，该文件在编译时复制到输出文件夹中`<projectname>.exe.config`）。在您的程序中，使用如下设置

```
string myStringSetting = Properties.Settings.Default.MySetting 
```

安装服务后，更改`exe.config`文件将使服务在重新启动后使用新设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:07:31.913

您的问题是因为您正在假设 ini 文件的位置以及服务的启动方式。

在服务中，您不能每次都依赖当前工作目录在同一个地方。您应该将配置文件的路径存储在注册表中（甚至首先将配置数据存储在注册表中）。

# ios - 手机离线时是否可以缓存iOS地图以供使用？

> ID：12247918
> 
> 赞同：2
> 
> 时间：2012-09-03T12:29:59.937
> 
> 标签：ios, maps

是否可以要求 iOS 应用程序存储某个位置的地图图像，以便在用户未连接到互联网时可用？

即，如果用户在伦敦，是否可以强制应用程序为巴塞罗那获取地图图像并保持缓存，这样一旦用户到达该位置（没有互联网连接），地图就已经被缓存了？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:59:02.477

不幸的是，苹果不允许任何人这样做。`MapKit.framework`这完全是为了展示它们。然而，使用 CoreGraphics 对某个区域（即地图）进行“截图”并将其保存为图像，然后稍后显示该图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:29:19.057

使用 iOS 附带的本机地图应用程序（iOS 5 上的 Google 地图/iOS 6 上的“Apple Maps”）是不可能做到这一点的，因为 Apple 只是限制了 MapKit.framework 的使用。但是，您可能想尝试其他地图解决方案，例如 Bing 地图或 OpenStreetMap。这些备选方案还提供了您可以考虑使用的有用地图数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T19:31:02.653

如果你想要在线/离线地图，你应该使用类似[Route-me 的](https://github.com/route-me/route-me)东西。

它基本上借用了 MapKit 功能集和 API，并为映射数据源提供了更广泛的选项。

此外，该项目还衍生出一些值得注意的分支，即[https://github.com/Alpstein/route-me](https://github.com/Alpstein/route-me)，它们提供了更多功能和更好的性能。

# android - Sphinx4 语音识别转录演示对于短 wav 文件无法正常工作

> ID：12247921
> 
> 赞同：1
> 
> 时间：2012-09-03T12:30:11.590
> 
> 标签：android, speech-recognition, audio-recording, sphinx4, transcription

我刚刚为转录音频文件实现了转录器演示。我的音频文件是 .wav 文件，其中仅包含诸如“BHAVIK”“ANKIT”“SAGAR”之类的名称

我的语法文件由这个语法组成如下： -

公众=（杰伊）|（萨加）|（巴维克）|（安基特）|（米拉杰）|（亚格涅什）；

但问题是转录器演示没有提供正确的结果..当我给出“JAY”的.wav文件时，它只是为我提供了其他东西..它没有给出正确的结果..

为什么会这样？我的 .wav 文件在这里你可以听到..

[http://www.crocko.com/62E9703E57844AE6B7A172D5CBBB8DE3/Vocaroo_s0dmd1kxVSfJ.wav](http://www.crocko.com/62E9703E57844AE6B7A172D5CBBB8DE3/Vocaroo_s0dmd1kxVSfJ.wav)

请帮助我......在此先感谢我已经像这样在adnroid中实现了逻辑......我使用一个类名作为extaudiorecorder。

公共类 ExtAudioRecorder

{ 私有最终静态 int[] sampleRates = {44100, 22050, 11025, 16000};

```
public static ExtAudioRecorder getInstanse(Boolean recordingCompressed)
{
    ExtAudioRecorder result = null;

    if(recordingCompressed)
    {
        result = new ExtAudioRecorder(  false, 
                                        AudioSource.MIC, 
                                        sampleRates[3], 
                                        AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                        AudioFormat.ENCODING_PCM_16BIT);
    }
    else
    {
        int i=0;
        do
        {
            result = new ExtAudioRecorder(  true, 
                                            AudioSource.MIC, 
                                            sampleRates[i], 
                                            AudioFormat.CHANNEL_CONFIGURATION_MONO,
                                            AudioFormat.ENCODING_PCM_16BIT);

        } while((++i<sampleRates.length) & !(result.getState() == ExtAudioRecorder.State.INITIALIZING));
    }
    return result;
}

/**
* INITIALIZING : recorder is initializing;
* READY : recorder has been initialized, recorder not yet started
* RECORDING : recording
* ERROR : reconstruction needed
* STOPPED: reset needed
*/
public enum State {INITIALIZING, READY, RECORDING, ERROR, STOPPED};

public static final boolean RECORDING_UNCOMPRESSED = true;
public static final boolean RECORDING_COMPRESSED = false;

// The interval in which the recorded samples are output to the file
// Used only in uncompressed mode
private static final int TIMER_INTERVAL = 120;

// Toggles uncompressed recording on/off; RECORDING_UNCOMPRESSED / RECORDING_COMPRESSED
private boolean         rUncompressed;

// Recorder used for uncompressed recording
private AudioRecord     audioRecorder = null;

// Recorder used for compressed recording
private MediaRecorder   mediaRecorder = null;

// Stores current amplitude (only in uncompressed mode)
private int             cAmplitude= 0;

// Output file path
private String          filePath = null;

// Recorder state; see State
private State           state;

// File writer (only in uncompressed mode)
private RandomAccessFile randomAccessWriter;

// Number of channels, sample rate, sample size(size in bits), buffer size, audio source, sample size(see AudioFormat)
private short                    nChannels;
private int                      sRate;
private short                    bSamples;
private int                      bufferSize;
private int                      aSource;
private int                      aFormat;

// Number of frames written to file on each output(only in uncompressed mode)
private int                      framePeriod;

// Buffer for output(only in uncompressed mode)
private byte[]                   buffer;

// Number of bytes written to file after header(only in uncompressed mode)
// after stop() is called, this size is written to the header/data chunk in the wave file
private int                      payloadSize;

/**
*
* Returns the state of the recorder in a RehearsalAudioRecord.State typed object.
* Useful, as no exceptions are thrown.
*
* @return recorder state
*/
public State getState()
{
    return state;
}

/*
*
* Method used for recording.
*
*/
private AudioRecord.OnRecordPositionUpdateListener updateListener = new AudioRecord.OnRecordPositionUpdateListener()
{
    public void onPeriodicNotification(AudioRecord recorder)
    {
        audioRecorder.read(buffer, 0, buffer.length); // Fill buffer
        try
        { 
            randomAccessWriter.write(buffer); // Write buffer to file
            payloadSize += buffer.length;
            if (bSamples == 16)
            {
                for (int i=0; i<buffer.length/2; i++)
                { // 16bit sample size
                    short curSample = getShort(buffer[i*2], buffer[i*2+1]);
                    if (curSample > cAmplitude)
                    { // Check amplitude
                        cAmplitude = curSample;
                    }
                }
            }
            else    
            { // 8bit sample size
                for (int i=0; i<buffer.length; i++)
                {
                    if (buffer[i] > cAmplitude)
                    { // Check amplitude
                        cAmplitude = buffer[i];
                    }
                }
            }
        }
        catch (IOException e)
        {
            Log.e(ExtAudioRecorder.class.getName(), "Error occured in updateListener, recording is aborted");
            //stop();
        }
    }

    public void onMarkerReached(AudioRecord recorder)
    {
        // NOT USED
    }
};
/** 
 * 
 * 
 * Default constructor
 * 
 * Instantiates a new recorder, in case of compressed recording the parameters can be left as 0.
 * In case of errors, no exception is thrown, but the state is set to ERROR
 * 
 */ 
public ExtAudioRecorder(boolean uncompressed, int audioSource, int sampleRate, int channelConfig, int audioFormat)
{
    try
    {
        rUncompressed = uncompressed;
        if (rUncompressed)
        { // RECORDING_UNCOMPRESSED
            if (audioFormat == AudioFormat.ENCODING_PCM_16BIT)
            {
                bSamples = 16;
            }
            else
            {
                bSamples = 8;
            }

            if (channelConfig == AudioFormat.CHANNEL_CONFIGURATION_MONO)
            {
                nChannels = 1;
            }
            else
            {
                nChannels = 2;
            }

            aSource = audioSource;
            sRate   = sampleRate;
            aFormat = audioFormat;

            framePeriod = sampleRate * TIMER_INTERVAL / 1000;
            bufferSize = framePeriod * 2 * bSamples * nChannels / 8;
            if (bufferSize < AudioRecord.getMinBufferSize(sampleRate, channelConfig, audioFormat))
            { // Check to make sure buffer size is not smaller than the smallest allowed one 
                bufferSize = AudioRecord.getMinBufferSize(sampleRate, channelConfig, audioFormat);
                // Set frame period and timer interval accordingly
                framePeriod = bufferSize / ( 2 * bSamples * nChannels / 8 );
                Log.w(ExtAudioRecorder.class.getName(), "Increasing buffer size to " + Integer.toString(bufferSize));
            }

            audioRecorder = new AudioRecord(audioSource, sampleRate, channelConfig, audioFormat, bufferSize);

            if (audioRecorder.getState() != AudioRecord.STATE_INITIALIZED)
                throw new Exception("AudioRecord initialization failed");
            audioRecorder.setRecordPositionUpdateListener(updateListener);
            audioRecorder.setPositionNotificationPeriod(framePeriod);
        } else
        { // RECORDING_COMPRESSED
            mediaRecorder = new MediaRecorder();
            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);               
        }
        cAmplitude = 0;
        filePath = null;
        state = State.INITIALIZING;
    } catch (Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured while initializing recording");
        }
        state = State.ERROR;
    }
}

/**
 * Sets output file path, call directly after construction/reset.
 *  
 * @param output file path
 * 
 */
public void setOutputFile(String argPath)
{
    try
    {
        if (state == State.INITIALIZING)
        {
            filePath = argPath;
            if (!rUncompressed)
            {
                mediaRecorder.setOutputFile(filePath);                  
            }
        }
    }
    catch (Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured while setting output path");
        }
        state = State.ERROR;
    }
}

/**
 * 
 * Returns the largest amplitude sampled since the last call to this method.
 * 
 * @return returns the largest amplitude since the last call, or 0 when not in recording state. 
 * 
 */
public int getMaxAmplitude()
{
    if (state == State.RECORDING)
    {
        if (rUncompressed)
        {
            int result = cAmplitude;
            cAmplitude = 0;
            return result;
        }
        else
        {
            try
            {
                return mediaRecorder.getMaxAmplitude();
            }
            catch (IllegalStateException e)
            {
                return 0;
            }
        }
    }
    else
    {
        return 0;
    }
}

/**
 * 
* Prepares the recorder for recording, in case the recorder is not in the INITIALIZING state and the file path was not set
* the recorder is set to the ERROR state, which makes a reconstruction necessary.
* In case uncompressed recording is toggled, the header of the wave file is written.
* In case of an exception, the state is changed to ERROR
*    
*/
public void prepare()
{
    try
    {
        if (state == State.INITIALIZING)
        {
            if (rUncompressed)
            {
                if ((audioRecorder.getState() == AudioRecord.STATE_INITIALIZED) & (filePath != null))
                {
                    // write file header

                    randomAccessWriter = new RandomAccessFile(filePath, "rw");

                    randomAccessWriter.setLength(0); // Set file length to 0, to prevent unexpected behavior in case the file already existed
                    randomAccessWriter.writeBytes("RIFF");
                    randomAccessWriter.writeInt(0); // Final file size not known yet, write 0 
                    randomAccessWriter.writeBytes("WAVE");
                    randomAccessWriter.writeBytes("fmt ");
                    randomAccessWriter.writeInt(Integer.reverseBytes(16)); // Sub-chunk size, 16 for PCM
                    randomAccessWriter.writeShort(Short.reverseBytes((short) 1)); // AudioFormat, 1 for PCM
                    randomAccessWriter.writeShort(Short.reverseBytes(nChannels));// Number of channels, 1 for mono, 2 for stereo
                    randomAccessWriter.writeInt(Integer.reverseBytes(sRate)); // Sample rate
                    randomAccessWriter.writeInt(Integer.reverseBytes(sRate*bSamples*nChannels/8)); // Byte rate, SampleRate*NumberOfChannels*BitsPerSample/8
                    randomAccessWriter.writeShort(Short.reverseBytes((short)(nChannels*bSamples/8))); // Block align, NumberOfChannels*BitsPerSample/8
                    randomAccessWriter.writeShort(Short.reverseBytes(bSamples)); // Bits per sample
                    randomAccessWriter.writeBytes("data");
                    randomAccessWriter.writeInt(0); // Data chunk size not known yet, write 0

                    buffer = new byte[framePeriod*bSamples/8*nChannels];
                    state = State.READY;
                }
                else
                {
                    Log.e(ExtAudioRecorder.class.getName(), "prepare() method called on uninitialized recorder");
                    state = State.ERROR;
                }
            }
            else
            {
                mediaRecorder.prepare();
                state = State.READY;
            }
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "prepare() method called on illegal state");
            release();
            state = State.ERROR;
        }
    }
    catch(Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured in prepare()");
        }
        state = State.ERROR;
    }
}

/**
 * 
 * 
 *  Releases the resources associated with this class, and removes the unnecessary files, when necessary
 *  
 */
public void release()
{
    if (state == State.RECORDING)
    {
        stop();
    }
    else
    {
        if ((state == State.READY) & (rUncompressed))
        {
            try
            {
                randomAccessWriter.close(); // Remove prepared file
            }
            catch (IOException e)
            {
                Log.e(ExtAudioRecorder.class.getName(), "I/O exception occured while closing output file");
            }
            (new File(filePath)).delete();
        }
    }

    if (rUncompressed)
    {
        if (audioRecorder != null)
        {
            audioRecorder.release();
        }
    }
    else
    {
        if (mediaRecorder != null)
        {
            mediaRecorder.release();
        }
    }
}

/**
 * 
 * 
 * Resets the recorder to the INITIALIZING state, as if it was just created.
 * In case the class was in RECORDING state, the recording is stopped.
 * In case of exceptions the class is set to the ERROR state.
 * 
 */
public void reset()
{
    try
    {
        if (state != State.ERROR)
        {
            release();
            filePath = null; // Reset file path
            cAmplitude = 0; // Reset amplitude
            if (rUncompressed)
            {
                audioRecorder = new AudioRecord(aSource, sRate, nChannels+1, aFormat, bufferSize);
            }
            else
            {
                mediaRecorder = new MediaRecorder();
                mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            }
            state = State.INITIALIZING;
        }
    }
    catch (Exception e)
    {
        Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        state = State.ERROR;
    }
}

/**
 * 
 * 
 * Starts the recording, and sets the state to RECORDING.
 * Call after prepare().
 * 
 */
public void start()
{
    if (state == State.READY)
    {
        if (rUncompressed)
        {
            payloadSize = 0;
            audioRecorder.startRecording();
            audioRecorder.read(buffer, 0, buffer.length);
        }
        else
        {
            mediaRecorder.start();
        }
        state = State.RECORDING;
    }
    else
    {
        Log.e(ExtAudioRecorder.class.getName(), "start() called on illegal state");
        state = State.ERROR;
    }
}

/**
 * 
 * 
 *  Stops the recording, and sets the state to STOPPED.
 * In case of further usage, a reset is needed.
 * Also finalizes the wave file in case of uncompressed recording.
 * 
 */
public void stop()
{
    if (state == State.RECORDING)
    {
        if (rUncompressed)
        {
            audioRecorder.stop();

            try
            {
                randomAccessWriter.seek(4); // Write size to RIFF header
                randomAccessWriter.writeInt(Integer.reverseBytes(36+payloadSize));

                randomAccessWriter.seek(40); // Write size to Subchunk2Size field
                randomAccessWriter.writeInt(Integer.reverseBytes(payloadSize));

                randomAccessWriter.close();
            }
            catch(IOException e)
            {
                Log.e(ExtAudioRecorder.class.getName(), "I/O exception occured while closing output file");
                state = State.ERROR;
            }
        }
        else
        {
            mediaRecorder.stop();
        }
        state = State.STOPPED;
    }
    else
    {
        Log.e(ExtAudioRecorder.class.getName(), "stop() called on illegal state");
        state = State.ERROR;
    }
}

/* 
 * 
 * Converts a byte[2] to a short, in LITTLE_ENDIAN format
 * 
 */
private short getShort(byte argB1, byte argB2)
{
    return (short)(argB1 | (argB2 << 8));
} 
```

}

并且我在我的主要活动中使用该类，如这里..我在按钮单击时录制声音并在另一个按钮单击时停止它

```
 package com.test.android_recorder;

    import android.os.Bundle;
    import android.os.Environment;
    import android.app.Activity;
    import android.view.Menu;
    import android.widget.Button;
    import android.widget.TextView;
    import android.view.View;
    import android.view.View.OnClickListener;

    public class AndroidRecorder extends Activity {
         ExtAudioRecorder extAudioRecorder;
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(com.test.android_recorder.R.layout.activity_android_recorder);
            Button button = (Button) findViewById(R.id.button1);

            Button buttonstop = (Button) findViewById(R.id.buttonstop);

            // Start recording
               extAudioRecorder = ExtAudioRecorder.getInstanse(true);   

            button.setOnClickListener(new OnClickListener()
            {
              public void onClick(View v)
              {

    TextView txt1=(TextView)findViewById(com.test.android_recorder.R.id.textView1);
                  txt1.setText("Button clciked");

                     // Compressed recording (AMR)
                        //extAudioRecorder = ExtAudioRecorder.getInstanse(false); // Uncompressed recording (WAV)

                        extAudioRecorder.setOutputFile(Environment.getExternalStorageDirectory().getAbsolutePath() + "/javarecorder");
                        extAudioRecorder.prepare();
                        extAudioRecorder.start();

                  // ImageView iv = (ImageView) findViewById(R.id.imageview1);
                 //iv.setVisibility(View.VISIBLE);
              }
            });

            buttonstop.setOnClickListener(new OnClickListener()
            {
              public void onClick(View v)
              {

    //TextView txt1=(TextView)findViewById(com.test.android_recorder.R.id.textView1);
                 // txt1.setText("Button clciked");
                  // ImageView iv = (ImageView) findViewById(R.id.imageview1);
                 //iv.setVisibility(View.VISIBLE);

                  // Stop recording
                  extAudioRecorder.stop();
                  extAudioRecorder.release();
              }
            });

            /*

    */
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(com.test.android_recorder.R.menu.activity_android_recorder, menu);
            return true;
        }
    }

When i run this code then nothing is happening and in logcat i have following error

Start() called in illegel state.
preapare() called in illegel state.
stop() called in illegel state.

Please Help me Out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T01:35:50.780

我见过的一个问题是让使用 Wav 文件和其他识别器的人不屑一顾，那就是文件必须采用受支持的格式。WAV 是一种通用文件类型，可以支持不同格式的音频（样本大小、单声道/立体声、不同的采样率等）。识别器不如媒体播放器灵活，因此您必须确保您的 wav 文件采用识别器处理的格式。

[http://cmusphinx.sourceforge.net/wiki/faq](http://cmusphinx.sourceforge.net/wiki/faq)说：

> 精度差的主要原因是：
> 
> 1.  传入音频的采样率不匹配。它必须是 16khz 16bit 单声道 little-endian 文件。您需要通过重新采样来修复源的采样率。验证采样率以进行测试。

如果您的文件不是这种格式，您可以使用[Audacity重新采样](http://audacity.sourceforge.net/)

顺便说一句，我无法使用 QuickTime 或 Windows Media player 播放您的 wav 文件。它采用什么格式或编码？

# xslt - 如何在 XSL 中连接数据？

> ID：12247922
> 
> 赞同：4
> 
> 时间：2012-09-03T12:30:11.893
> 
> 标签：xslt

我有一个具有以下结构的 XML 文件：

```
<root>
    <level1>
        <level2>
            <value>A</value>
            <value>B</value>
            <value>C</value>
            <value>D</value>
            <value>E</value>
            <value>F</value>
        </level2>
    </level1>
</root> 
```

我想我只想连接 XSL 中的前三个值以获得 ABC。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:39:51.410

假设焦点项目是 level2 节点，您可以使用 XSLT 1.0 序列构造函数，如...

```
<xsl:value-of select="concat(value[1],value[2],value[3])" /> 
```

...或在 XSLT 2.0 中...

```
<xsl:value-of select="for $i in 1 to 3 return value[$i]" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T12:39:35.243

你可以用一个 XPath 来做到这一点：

```
/root/level1/level2/value[position() &lt;= 3]/text() 
```

将其放入 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:template match="/">
    <xsl:copy-of select="root/level1/level2/value[position() &lt;= 3]/text()" />
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T14:50:26.813

**I. 这是一种通用且强大的方法，可以在给定（增加）位置的情况下生成任何值的串联**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pPositions" select="'|1|2|3|'"/>

 <xsl:template match="value">
     <xsl:if test="contains($pPositions, concat('|',position(),'|'))">
      <xsl:value-of select="."/>
     </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <level1>
        <level2>
            <value>A</value>
            <value>B</value>
            <value>C</value>
            <value>D</value>
            <value>E</value>
            <value>F</value>
        </level2>
    </level1>
</root> 
```

**产生了想要的正确结果：**

```
ABC 
```

**如果我们希望连接第 1、3 和第 6 个`value`元素值，我们只需提供相应的`$pPositions`参数**：

```
 <xsl:param name="pPositions" select="'|1|3|6|'"/> 
```

**同样的，未更改的 XSLT 代码现在产生了想要的**：

```
ACF 
```

* * *

**二、如果我们有任何（不一定增加）位置序列，事情会变得更有趣：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pPositions">
  <p>4</p>
  <p>1</p>
  <p>3</p>
 </xsl:param>

 <xsl:variable name="vPositions" select=
      "document('')/*/xsl:param[@name='pPositions']"/>

 <xsl:template match="/">
  <xsl:variable name="vDoc" select="."/>

  <xsl:for-each select="$vPositions/p">
    <xsl:value-of select="$vDoc/*/*/*/value[position()=current()]"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于同一个 XML 文档（上图）时，我们得到了想要的正确结果：**

```
DAC 
```

* * *

**三、这在 XSLT 2.0 中是微不足道的：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pPositions" as="xs:integer*" select="4,1,3"/>

 <xsl:template match="/">
  <xsl:value-of separator="" select=
   "for $n in $pPositions
     return
        /*/*/*/value[$n]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-17T00:48:37.040

您可以使用：

```
<xsl:value-of select=".//level2/string-join(value[position() &lt; 4] , '')" /> 
```

我希望这会有所帮助。

# .net-micro-framework - .Net Micro 4.2：添加现有项目 --> 部署失败

> ID：12247923
> 
> 赞同：1
> 
> 时间：2012-09-03T12:30:21.830
> 
> 标签：.net-micro-framework, netduino

我正在尝试将现有项目（[此 ServiceBus 示例](http://msdn.microsoft.com/en-us/magazine/jj190807.aspx)）添加到 .net micro 4.2 应用程序。Visual Studio 不显示任何错误或相关警告，但如果我尝试将应用程序部署到我的 netduino，我会收到一条错误消息：

```
Incrementally deploying assemblies to device
Deploying assemblies for a total size of 71024 bytes
Assemblies not successfully deployed to device.
Deployment to the device was not successful. 
```

和

```
An error has occurred.  Please check your hardware 
```

知道如何获得有关此错误的更多信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T15:26:53.933

好的，我在[Netduino 论坛上](http://forums.netduino.com/index.php?/topic/5296-net-micro-42-add-existing-project-deploying-failed/page__view__findpost__p__34597)得到了答案。

问题是，我的应用程序对于代码内存来说太大了（部署程序集的总大小为 71024 字节）。Netduino plus 只有 64KB 代码内存。

# linux - .htaccess 离线工作正常但不能在线

> ID：12247927
> 
> 赞同：0
> 
> 时间：2012-09-03T12:30:36.293
> 
> 标签：linux, .htaccess

```
 Options +FollowSymlinks

  RewriteEngine on
  RewriteRule !\.(gif)$ c1.php [NC] 
```

这段代码有什么问题吗？什么是 chmod 需要提供给 .htaccess 文件，755？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:42:49.677

该文件看起来不错。

您的托管公司可能会阻止使用 .htaccess 文件。你可以联系他们询问一下。

所需权限可能因您的服务器设置而异，但如果您想确保这不是问题，您可以尝试将它们设置为 777 并查看是否有效。如果没有，您可以肯定地排除权限问题。不管您的服务器设置如何，755 确实应该可以工作。

# objective-c - 如何向下钻取uitableview

> ID：12247929
> 
> 赞同：-2
> 
> 时间：2012-09-03T12:30:37.963
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我看过一个关于如何创建向下钻取表视图的教程，并且想知道如何做同样的事情，但是`UITableViewController`我有一个`UIViewController`.
目前我的 ViewController 中有 2 个 TableView。第一个显示数据，第二个用于过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:43:25.303

我在编写一个使用多个表视图的应用程序时遇到了同样的问题。你在让 segues 工作时遇到问题吗？我遇到了同样的问题，并在我的 uitableviewcontroller 中使用了以下 segue 代码：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
TypeTableViewController *nextController = segue.destinationViewController;
NSIndexPath *idx = [self.tableView indexPathForSelectedRow];
nextController.detailLocation = [[self.tableData objectAtIndex: idx.row] objectForKey: @"location"];
nextController.detailType = [[self.tableData objectAtIndex: idx.row] objectForKey: @"type"];

NSLog(@"This is the first attached location: %@",[[self.tableData objectAtIndex: idx.row] objectForKey: @"location"]);
} 
```

这是您的问题所在，还是试图让数据过滤的其他位置？

# php - Iphone 位置到 MySQL 数据库

> ID：12247935
> 
> 赞同：0
> 
> 时间：2012-09-03T12:31:05.817
> 
> 标签：php, mysql, ios, post

我正在尝试将一些值发送到数据库。这是我在 iOS 中的代码和我的 PHP 代码。

我正在后台接收位置，并希望将其存储在我的数据库中，

你能帮忙的话，我会很高兴。谢谢

```
NSString *latitude =  [NSString stringWithFormat:@"%f", newLocation.coordinate.latitude];
NSString *longitude =  [NSString stringWithFormat:@"%f", newLocation.coordinate.longitude];
NSString *stringFromDate = [formatter stringFromDate:newLocation.timestamp];

NSMutableURLRequest *request =
[[NSMutableURLRequest alloc] initWithURL:
 [NSURL URLWithString:@"http://www.yourdomain.com/location.php"]];

[request setHTTPMethod:@"POST"];

NSString *postString = [postString stringByAppendingFormat: latitude, longitude, stringFromDate];

[request setValue:[NSString
                   stringWithFormat:@"%d", [postString length]]
  forHTTPHeaderField:@"Content-length"];

[request setHTTPBody:[postString
                      dataUsingEncoding:NSUTF8StringEncoding]];

[[NSURLConnection alloc] initWithRequest:request delegate:self];

}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)response;
   [httpResponse statusCode];
} 
```

还有我的 PHP 文件

```
 <?php
  // Connecting, selecting database

  $id = $POST['id'];
$longitude = $POST['longitude'];
  $latitude = $POST['latitude'];
 $timestamp = $POST['stringFromDate'];

  $link = mysql_connect('server', 'user', 'pass')
or die('Could not connect: ' . mysql_error());

 mysql_select_db('db_name') or die('Could not select database');

 // Performing SQL query
  $query = "INSERT INTO table locatie=(id, longitude, latitude, timestamp)VALUES ('NULL',   '".$longitude."', '".$latitude."', '".$timestamp."')";
 $result = mysql_query($query) or die('Query failed: ' . mysql_error());

  echo "OK";

 // Free resultset
 mysql_free_result($result);

 // Closing connection
 mysql_close($link);
 ?> 
```

我在这一行得到 EXC_BAD_ACCES：**FIXED**

```
 NSString *postString = [postString stringByAppendingFormat: latitude, longitude, stringFromDate]; **FIXED** 
```

非常感谢你。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:38:49.083

您的 post 字符串变量的分配发生在评估右侧之后，因此当您在那里使用 postString 变量时，它只是堆栈上的任何垃圾，几乎可以肯定不是指向有效字符串的指针。只需像创建其他字符串一样创建该字符串：

```
// fix the formatting as necessary for your app
NSString* postString = [NSString stringWithFormat:@"%@ %@ %@", latitude, longitude, stringFromDate]; 
```

# arrays - 在awk中按字母顺序对数组进行排序

> ID：12247952
> 
> 赞同：0
> 
> 时间：2012-09-03T12:31:58.430
> 
> 标签：arrays, awk

我有一个看起来像这样的文件：

```
1    a
3    b
2    b
9    a
0    a
5    c
8    b 
```

我想要...

1.  仅打印第 2 列中存在的每个元素的最后一个实例及其在第 1 列中的对应值；
2.  根据第 2 列的内容，按字母顺序对 1\. 的结果进行排序；
3.  在第 1 列之前的输出中添加第三列，其内容取决于第 2 列的值；
4.  用回车替换制表符；

...所有这些都在一个 awk 程序中。

所以最终的输出会是这样的：

```
x
0
a
x
8
b
y
5
c 
```

我成功地完成了这一切，但使用了两个 awk 程序和一个外部命令：

```
awk -F '\t' '{
    value[$2]=$2"\t"$1 }
    END { for (i in value) print value[i]
    }' | \
sort -dfb | \
awk -F '\t' '{
if ($1 == "a" || $1=="b") print "x\n"$2"\n"$1
if ($1 == "c") print "y\n"$2"\n"$1
}' 
```

一个更简单的方法是按字母顺序对第一个 awk 程序的数组进行排序。这将允许将第二个 awk 程序的内容合并到第一个中。但是，我不知道我该怎么做。任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:43:55.337

*GNU awk <= 3*：

```
WHINY_USERS= awk 'END {
  for (R in r)
    printf "%s\n%s\n%s\n", 
      (R ~ /^[ab]$/ ? "x" : "y" ), r[R], R
  }
{
  r[$2] = $1
  }' infile 
```

*GNU awk >= 4*：

```
awk 'END {
  PROCINFO["sorted_in"] = "@ind_str_asc"
  for (R in r)
    printf "%s\n%s\n%s\n", 
      (R ~ /^[ab]$/ ? "x" : "y" ), r[R], R
  }
{
  r[$2] = $1
  }' infile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T19:39:12.463

这是六年前的事了，我在这里回复……如果我理解请求，值列表是：

```
1    a
3    b
2    b
9    a
0    a
5    c
8    b 
```

仅针对第 2 列的 1 个实例进行处理，第 1 列的关联值最低。期望的结果：

```
0    a
2    b
5    c 
```

通过使用 2 种而不是 awk，该过程似乎是最简单的。捕获 FILE 中的值列表，以下命令将显示结果：

```
$ sort +0 -1n FILE|sort +1 -2 -u
0    a
2    b
5    c 
```

每个唯一列 2 的相反顺序或最高列 1 值

```
$ sort +0 -1nr FILE|sort +1 -2 -u
9    a
8    b
5    c 
```

如果 awk 优先于排序，则以下 awk 程序可以执行操作以对每个唯一的第 2 列条目取最小值：

```
$ awk '{if($2 in COL2){if(COL2[$2]>$1){COL2[$2]=$1}}else{COL2[$2]=$1}}END{for(I in COL2){print COL2[I],I}}' FILE
0 a
2 b
5 c 
```

相反的顺序，每个唯一的第 2 列条目的第 1 列的最大值是通过将“>”替换为“<”来完成的：

```
$ awk '{if($2 in COL2){if(COL2[$2]<$1){COL2[$2]=$1}}else{COL2[$2]=$1}}END{for(I in COL2){print COL2[I],I}}' FILE
9 a
8 b
5 c 
```

可能我错过了要求，6年后的反应不是很及时。我一直在寻找别的东西，发现了这个，无法帮助自己。

# android - 仅针对文件的意图过滤器

> ID：12247957
> 
> 赞同：13
> 
> 时间：2012-09-03T12:32:27.320
> 
> 标签：android, share, intentfilter

在我们的应用程序中，我们希望出现在“分享方式”菜单中。所以我们将这个意图过滤器添加到我们的活动中：

```
<intent-filter>
    <action android:name="android.intent.action.SEND" />
    <category android:name="android.intent.category.DEFAULT" />
    <data android:mimeType="application/*" />
    <data android:mimeType="audio/*" />
    <data android:mimeType="image/*" />
    <data android:mimeType="text/*" />
    <data android:mimeType="video/*" />
</intent-filter> 
```

它工作正常，我们的应用程序出现在共享菜单中。

然而，意图过滤器并没有完全达到我们想要达到的效果：

1.  我们希望出现在所有文件的菜单中，无论 mime 类型是什么
2.  我们只想出现在文件中。到目前为止，如果用户想要分享一个简单的文本，因为它的 mime 类型将是 text/plain，我们的应用程序会出现在菜单中，我们不想要它。

对于所有文件且仅适用于文件的正确意图过滤器是什么？

提前致谢。

* * *

我们尝试添加 scheme=file 和 host="" 或 "*"，但它不起作用，因为许多应用程序使用 scheme=content 来共享基于文件的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T12:39:38.320

> 我们希望出现在所有文件的菜单中，无论 mime 类型是什么

尝试 MIME 类型的`*/*`.

> 我们只想出现在文件中。到目前为止，如果用户想要分享一个简单的文本，因为它的 mime 类型将是 text/plain，我们的应用程序会出现在菜单中，我们不想要它。我们尝试添加 scheme=file 和 host="" 或 "*"，但它不起作用，因为许多应用程序使用 scheme=content 来共享基于文件的内容。

然后有两个`<data>`元素，一个用于 的方案，`content`一个用于 的方案`file`。

```
<data android:mimeType="*/*" />
<data android:scheme="content" />
<data android:scheme="file" /> 
```

但是，请记住，`content`方案并不意味着它一定是文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:41:32.497

1.  如果您想为任何 MIME 类型调用，请不要在过滤器中放置单个地雷类型
2.  `scheme="file"`是仅在文件上运行的答案。现在，如果第 3 方应用程序将数据传递为`content`，那么它（根据定义）不再是文件

# php - 使用 jQuery (Prettyphoto) 从其他类获取元素

> ID：12247959
> 
> 赞同：0
> 
> 时间：2012-09-03T12:32:34.623
> 
> 标签：php, jquery, wordpress, prettyphoto

我在使用 jQuery 和 prettyPhoto（wordpress 插件）时遇到问题！我的问题是我想从已经工作的标签之外的隐藏 div 获取图像描述。这是我到目前为止所拥有的：

```
<div class="portfolie_short_content_containe">                  
    <a class="lightbox" style="text-decoration: none;" rel="lightbox" href="<?php echo $image[0]; ?>" title="<?php echo $image_desc; ?>">
        <span class="hover">
            <div class="portfolio_thump_hover_text">
                <span class="lable"><?php echo $short_descr;?></span><br>
                <span class="lable"><?php echo $link;?></span><br>
                <span class="lable"><FONT style="color : #f47b42;">Se CV</FONT></span>
            </div>
        </span>
        <img src="<?php echo $image[0]; ?>" width="<?php echo $image[1]; ?>" alt="<?php echo $image_alt; ?>"></img>
    </a>

    <!-- hidden div containing description -->
    <div id="lightbox" style="display: none"><p><?php echo $full_descr; ?></p><div>
</div> 
```

jQuery.prettyphoto.js 文件看起来像这样！

```
theRel = $(this).attr('rel');
galleryRegExp = /\[(?:.*)\]/;
isSet = (galleryRegExp.exec(theRel)) ? true : false;
var x = 500;
var elmtid = $(this).attr('class');

// Put the SRCs, TITLEs, ALTs into an array.
pp_images = (isSet) ? jQuery.map(matchedObjects, function(n, i) {
    if ($(n).attr('rel').indexOf(theRel) != -1) 
        return $(n).attr('href'); 
}) : $.makeArray($(this).attr('href'));

pp_titles = (isSet) ? jQuery.map(matchedObjects, function(n, i) { 
    if ($(n).attr('rel').indexOf(theRel) != -1) 
        return ($(n).find('img').attr('alt')) ? $(n).find('img').attr('alt') : "";
}) : $.makeArray($(this).find('img').attr('alt'));

//Get text from hidden dir!     
pp_descriptions = (isSet) ? jQuery.map(matchedObjects, function(n, i) {
    if ($(n).attr('rel').indexOf(theRel) != -1) 
        return ($(n).find('p').text()) ? $(n).find('p').text() : ""; 
}) : $.makeArray($(this).find('p').text()); 
```

我对 jQuery 没有那么丰富的经验。任何人都可以帮助掌握描述吗？我已经尝试过这样的事情！

```
pp_descriptions = (isSet) ? jQuery.map(matchedObjects, function(n, i) {
    if($(n).attr('class') != -1) 
        return ($('#'+elmtid).html()) ? $('#'+elmtid).html()  : \"\"; 
}) : $.makeArray($('#'+elmtid).html()); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T08:17:08.030

解决了它，也许很容易，但第一次使用 jQuery！

```
<script type="text/javascript">
var $j = jQuery.noConflict();
$j(document).ready(function(){

//reference the class instead of a tag
$j("div[class^='portfolie_short_content_containe']").prettyPhoto({theme: '<?php echo $portfolio_options["prtfl_prettyPhoto_style"]; ?>'});
});
</script> 
```

在 js 文件中我改变了这个。

```
theRel = $(this).find('a').attr('rel');
//theRel = $(this).attr('rel');
galleryRegExp = /\[(?:.*)\]/;
isSet = (galleryRegExp.exec(theRel)) ? true : false;
var x=500;

pp_images = $.makeArray($(this).find('a').attr('href'));
pp_titles = $.makeArray($(this).find('img').attr('alt'));
pp_descriptions =  $.makeArray($(this).find('p').html()); 
```

它并不完美，但它可以工作，希望它可以帮助其他有同样问题的人。

# c++ - 只读对象中的成员分配错误

> ID：12247970
> 
> 赞同：15
> 
> 时间：2012-09-03T12:33:25.560
> 
> 标签：c++, compiler-errors, variable-assignment

我正在研究 worm_sim 模拟器、ubuntu、gcc、codeblocks IDE

traffic_source.h 文件

```
class Traffic_source : public Buffer_owner, public Connector, public Addressee{
private:
    static unsigned int id_base;
    unsigned int id;
    unsigned int packet_size;
    unsigned int flit_size;
    double packet_generating_rate;
    int pkt_id;
    traffic_source_state ts_state;
    double* packet_to_destination_rate;
    Traffic_mode traffic_mode;
    int period;                // period for packet generation using trace_file
    ifstream trace_file;
    int trace_file_loop_cnt;   // how many times we have gone over the trace file so far
    bool trace_file_empty;
    ofstream trace_dump;       // trace file to dump out

    typedef struct Message {
        int timestamp;
        unsigned int destination;
        unsigned int size;
    } Message, *pMessage;

    Message pre_fetched_message;
    bool get_next_message(Message & msg);

    unsigned int get_destination_uniform(void) const; 
    unsigned int get_destination_transpose1(void) const;
    unsigned int get_destination_transpose2(void) const;
    unsigned int get_destination_hotspot(void) const;
    unsigned int get_destination_customized(void) const;

    void generate_a_packet(unsigned int dst_id);
    void generate_packets(const Message & rec);

public:
    Traffic_source(Position p, int buf_sz);
    ~Traffic_source();
    bool can_send(void) const;
    bool can_receive(void) const { return false; }
    bool send(void);
    bool receive(class Flit * a_flit) { return false; }
    class Connector * get_receiver(void) const; 

    static void reset_id_base(void) { id_base = 0; }

    void tick(void);

    /* traffic control routines */
    void set_packet_generating_rate(double r);
    void set_packet_to_destination_rate(unsigned int dst_id, double rate);
    double get_packet_to_destination_rate(unsigned int dst_id) const;
    double get_total_packet_injection_rate(void) const;
    int set_trace_file(char * file_name);
    bool has_trace_file(void) { return (trace_file.is_open()); }
    int get_id(void) const { return id; }
}; 
```

交通源.cpp

```
Traffic_source::Traffic_source(Position p, int buf_sz) : Buffer_owner(buf_sz), Addressee(p) {
    id = id_base ++;
    packet_generating_rate = param.packet_generating_rate;
    packet_size = param.flits_per_packet;
    flit_size = param.flit_size;
    traffic_mode = param.traffic_mode;
    period = 0;
    packet_to_destination_rate = 0;
    pkt_id = 0;
    ts_state = OFF_

    if (param.dump_traffic_source_trace) {
        char file_name[20];
        sprintf(file_name, "%d.trace", id);
        trace_dump.open(file_name);
        if (!trace_dump.is_open() || !trace_dump.good()) {
            cerr << "Error in opening file " << file_name << " for trace dumping" << endl;
            exit(-1);
        }
        trace_dump << "PERIOD\t" << param.simulation_length << endl;
        trace_dump << "#Trace file dumped by worm_sim from node " << id << endl;
        trace_dump << "#Folloing lines are with format as:" << endl
                   << "#timestamp\t" << "destination\t" << "message_size(bits):" << endl;
    }
}

bool Traffic_source::can_send(void) const
{
    int router_id=get_id();
    unsigned int local_availability;

    pRouter a_router= param.network->get_router(router_id);
    local_availability=a_router->get_port_availability(0);
    //cout<<local_availability<<endl;
    if (buffer.is_empty())
        return false;
    if(local_availability <= 0)
    {
        packet_generating_rate = 0; //error: assignment of member ‘Traffic_source::packet_generating_rate’ in read-only object|
        set_packet_generating_rate(0); // error: passing ‘const Traffic_source’ as ‘this’ argument of ‘void Traffic_source::set_packet_generating_rate(double)’ discards qualifiers [-fpermissive]|
        return false;
    }

    // This is somehow trick, we need to verify whether the first flit in the fifo
    // is received right in this clock cycle. If so, we can not send it
    const Flit * first_flit = buffer.peek_flit();
    if (first_flit->arrived_in_this_cycle())
        return false;

    pConnector receiver = get_receiver();

    if (receiver)
        return receiver->can_receive();
    else
        return false;
} 
```

值 packet_generating_rate 不是 const 但是当我尝试直接修改它或使用 set 函数时它会给我错误

```
packet_generating_rate = 0; //error: assignment of member    
 ‘Traffic_source::packet_generating_rate’ in read-only object|

set_packet_generating_rate(0); // error: passing ‘const Traffic_source’ as ‘this’ argument of ‘void Traffic_source::set_packet_generating_rate(double)’ discards qualifiers [-fpermissive]| 
```

虽然它用于其他文件没有问题，任何建议请

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-03T13:26:09.007

```
bool Traffic_source::can_send(void) const 
```

正如其他人已经指出的那样，问题在于在`const`函数内部（最后`const`一行）您不能修改对象的成员。实际上，成员函数被翻译成类似于：`bool Traffic_source__can_send( const Traffic_source* this, void )`， `this`参数是指向 的指针`const`。这反过来意味着这`packet_generating_rate` *是* `const`在函数的上下文中。

您可以在此处遵循三种替代方案：

*   不要修改成员
*   不要标记函数`const`
*   制作`packet_generating_rate` `mutable`

前两个选项是常见的：函数是`const`并且不修改对象，或者不是`const`并且可以修改对象。但是，在某些情况下，您*想要*修改`const`成员指针中的成员。在这种情况下，您可以将成员声明标记为`mutable`启用`const`成员函数内部的修改。

但是请注意，通常这是在成员变量不参与对象的*可见*状态时完成的。例如，`mutex`变量不会改变 getter 返回的值或对象的状态，但 getter 需要锁定（修改）对象以获得在多线程环境中对象的一致视图。第二个典型示例是*缓存*，其中对象可能提供计算成本高昂的操作，因此执行该操作的函数可能会*缓存*结果以备后用。同样，该值是重新计算还是从*缓存中检索*它将是相同的，因此对象的可见状态不会改变。最后，有时您可能需要滥用该构造以符合现有接口。

现在由您决定将三个选项中的哪一个应用于您的设计。如果需要修改成员属性，那么要么成员是可见状态的一部分而功能不应该是`const`，否则它不是对象状态的一部分并且可以被标记`mutable`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T12:36:57.207

```
packet_generating_rate = 0; 
```

它在常量函数中使用。在常量函数中，您不能更改调用该函数的对象的任何数据成员的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-03T12:34:48.257

```
bool Traffic_source::can_send(void) const 
```

这个声明变成`this`了一个指向 a 的指针`const`。将方法标记为`const`使实例不可变，因此您无法修改其成员。

`const`如果要修改成员，为什么首先将其标记为？

此外，在我看来，它似乎`can_send`有 getter 语义，所以从逻辑上讲它不应该修改成员（我认为这里的错误是你试图修改`packet_generating_rate`，而不是创建方法`const`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T12:36:22.983

像这样的一个 const 成员函数

```
bool Traffic_source::can_send(void) const 
```

不允许修改该类的任何成员变量。当您在此函数中修改成员变量时，这就是您收到错误的原因。将函数设为非 const，您将不会收到此错误。

# php - json_encode 中的空值与生成的 PHP 数组

> ID：12247972
> 
> 赞同：3
> 
> 时间：2012-09-03T12:33:27.777
> 
> 标签：php, arrays, parsing, null, json

我一直在研究 PHP 的**简单 html dom**，它运行良好。问题是当我尝试将返回的值添加到 PHP 数组时。

我有一个示例，您可以在其中看到结果[http://fae.ctrl.fo/plane_script/](http://fae.ctrl.fo/plane_script/)，下面的脚本是从该链接提供数据的内容。

```
<?PHP

include('simple_html_dom.php');

$resultSet = array();
$html = file_get_html('http://212.55.50.147');
foreach($html->find('tr[class^=FlightScheduleItem]') as $tr)
    {
        $row = array();
        foreach($tr->find('td') as $td) 
        {
            echo $td->innertext." ";
            $row[] = $td->innertext; 
        }
        $resultSet[] = $row;
    }

    echo "<br/><br/><br/>";

echo $_GET['callback'] . '(' .json_encode($resultSet) . ')';
?> 
```

如您所见，我正在打印在**td**标记中找到的所有值，并将它们保存在同一循环中的数组中。如果您检查输出，您会发现在数组中找不到“ **Reykjavík ”。**

你知道为什么吗？

**稍后编辑：**

如果我使用 PHP 中的 print_r 函数，我可以在我的数组中找到这个词。这意味着**json_encode**将*Reykjavík 转换为 null*。

你知道为什么或替代方案吗？

谢谢

**稍后编辑：**

感谢您的帮助，我修改了这一行：

```
$row[] = htmlentities($td->innertext, UTF-8); 
```

...现在它可以工作了。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T12:48:19.847

似乎`json_encode`需要 UTF-8 输入，但 PHP 的默认值是 ISO-8859-1。

你应该能够做到这一点：

```
$resultSet[] = htmlentities($row, UTF-8) 
```

`json_encode`这应该将拉丁字符编码为 UTF-8，允许它在函数中通过（编码） 。

在[bugs.php.net上找到的解决方案](https://bugs.php.net/bug.php?id=49588)

# java - 压缩/收缩/优化 groovy-all，groovy 2.0.1 以进行分发？

> ID：12247973
> 
> 赞同：1
> 
> 时间：2012-09-03T12:33:28.573
> 
> 标签：java, groovy, proguard

我正在尝试缩小 groovy 库的大小（这是我的 groovy/java 应用程序正常运行所必需的），因为它们大约为 6.2 MB，与我的应用程序的复杂性相比，这是相当大的。因此，我希望缩小并尽可能优化我的应用程序的 groovy 2.0.1 库。

我已经尝试通过 pro-guard 运行 groovy-all 和 groovy-2.0.1 jar，但我收到大量警告和错误。我已经在 Google 上搜索过，看看是否有人以前成功完成过此操作，但我仍然找不到任何有用的东西。

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:14:21.210

groovy 模块化呢？你不能删除一些罐子吗？或者你需要它提供的一切？

看看[http://www.infoq.com/articles/new-groovy-20](http://www.infoq.com/articles/new-groovy-20)

**Groovy 模块**

因此，此版本的模块化方面的第一个目标实际上是将原始 Groovy JAR 拆分为更小的模块、更小的 JAR。核心 Groovy JAR 现在是原来的两倍，我们有以下可用的功能模块：

模块：

```
Ant: for scripting Ant tasks for automating administration tasks
BSF: for integrating Groovy in your Java applications with the old Apache Bean Scripting Framework
Console: module containing the Groovy Swing console
GroovyDoc: for documenting your Groovy and Java classes
Groovysh: module corresponding to the Groovysh command-line shell
JMX: for exposing and consuming JMX beans
JSON: for producing and consuming JSON payloads
JSR-223: for integrating Groovy in your Java applications with the JDK 6+ javax.scripting APIs
Servlet: for writing and serving Groovy script servlets and templates
SQL: for querying relational databases
Swing: for building Swing UIs
Templates: for using the template engine
Test: for some test support, like the GroovyTestCase, mocking, and more
TestNG: for writing TestNG tests in Groovy
XML: for producing and consuming XML documents 
```

# objective-c - 如何使用超过 7 个 CALayers？

> ID：12247974
> 
> 赞同：1
> 
> 时间：2012-09-03T12:33:29.410
> 
> 标签：objective-c, ios, xcode, ios4

对不起我的英语不好; 我会尽量说清楚。

我正在准备一个长动画。它加载在`viewDidLoad`. 每个`CALayer`都与 a 相关`CABasicAnimation`，所有`CALayer`s 都是 的子层`self.view.layer`。当它到达第 8 层时，它不再出现在屏幕上！一个层有最大数量的子层吗？为什么模拟器上没有出现第8层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:38:38.600

我不相信指定子层的最大数量，如果有最大值，它肯定比 8 大得多。

# php - 确定项目在网格中显示时的余数 - PHP

> ID：12247976
> 
> 赞同：1
> 
> 时间：2012-09-03T12:33:38.413
> 
> 标签：php, modulus

我有一个循环，它一次显示最多 12 个项目的网格中的项目（3 跨 4 行向下）。网格中可以有任意数量的项目（1 到 12），但在我只有 1 或 2 个项目的情况下，我需要在 HTML 中附加一个类。例如：

当我有 3、6、9、12 项时 - 不需要 当我有 4、7、10 项（剩余 1 个）时 - 第 4、7 和 10 项需要申请课程 当我有 5、8、11 项时（剩余 2 个） ) - 项目 4,5, 7,8, 10,11 需要一个班级申请

我怎样才能在 PHP 中做到这一点。对于每个项目，我都可以使用以下内容：

*   页面上的产品总数
*   当前项目

道歉 - 编辑器乱码的伪代码：

```
$howmanyleft = totalproducts - currentproduct
if ($howmanyleft <= 2) {
    if ($currentproduct % 3 == 0) {
        //addclass
    }
} 
```

然后在我的 CSS

```
article.product-single  {
    width: 33.3333%;
    border-bottom: 1px solid rgb(195,195,195);
    border-right: 1px solid rgb(195,195,195);
}
article.product-single:nth-child(3n) {
    border-right: none;
}

article.lastrow, article.product-single:last-child {
    border-bottom:none;
} 
```

对不起，我搞错了。这不是我需要的。我很抱歉。我只需要用一个类标记的任何剩余项目，而不是每一行。

如果有 4 个项目，则标记项目 4 如果有 5 个项目，则标记项目 4 和 5 如果有 10 个项目，则标记项目 10 如果有 11 个项目，则标记项目 10 和 11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T12:49:03.500

如果我正确理解了您的问题，您将需要如下代码：

```
// check how many items will remain in the final row (if the row is not filled with 3 items)
$remainder = $total_items % 3;
for ($i = 0; $i < $total_items; $i++) { 
    if($remainder > 0 && $i >= $total_items - $remainder) {
        // executed for items in the last row, if the number of items in that row is less than 3 (not a complete row)
    } else {
        // executed for items that are in 3 column rows only
    }
} 
```

这是一个完整的例子，说明这样的事情是如何工作的。使用以下代码创建一个新的 php 文件并查看输出。

```
// add some random data to an array
$data = array('one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven');
$total_items = count($data);

// check how many items will remain in the final row (if the row is not filled with 3 items)
$remainder = $total_items % 3;

// loop through all the items
for ($current_item = 0; $current_item < $total_items; $current_item++) { 
// check to see if the item is one of the items that are in the row that doesn't have 3 items
    if($remainder > 0 && $current_item >= $total_items - $remainder) {
        echo $data[$current_item] . " - item in last row, when row is not complete<br />";
    // code for regular items - the ones that are in the 
    } else {
        echo $data[$current_item] . " - item in filled row<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T12:39:15.870

它只是 number_of_products 模 number_of_columns

```
4 % 3 == 1
5 % 3 == 2
6 % 3 == 0 
```

# joomla - 为什么我应该保持我的 Joomla 版本是最新的？

> ID：12247985
> 
> 赞同：0
> 
> 时间：2012-09-03T12:34:08.730
> 
> 标签：joomla, joomla1.5, joomla2.5

在发布问题并提及我的 Joomla 版本时，我总是被告知要更新到最新版本。我不明白为什么更新如此重要。更新有什么好处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T12:34:29.743

每当我看到有人发布问题并说明 Joomla 的旧版本时，通常我会说的第一件事是“升级到最新版本的 Joomla（1.5.26、2.5.26 或 3.3.5，具体取决于您使用的版本） )”。我不必解释为什么升级到最新版本很重要，但我会为那些拥有较旧或绝对古老版本的人解释。更新的两个原因是：

1.  修复错误
2.  修复安全问题

如果我正在设计一个网站，那么我个人不希望出现任何错误，例如某些功能在某些情况下不起作用。我也不想要任何安全威胁，我为什么总是让我的 Joomla 版本保持最新。当然，它永远不会 100% 安全，这就是为什么我也使用一些安全扩展，只是为了安全起见。

以本次更新为例：

Joomla 2.5.5 添加了 11 个新功能，修复了 2 个安全问题和 113 个跟踪器问题。我认为这是一个相当大的更新，因此在它发布的那天就上传了它。

如果您使用的是 1.5.26，那不是问题，而且我认为升级到 2.5 不是“必须做的”，但肯定会推荐这样做，主要是为了更高的安全性，并注意大多数（体面的）托管供应商在他们的服务器上更新 PHP 版本，一旦他们更新到 PHP 5.4，你就是 Joomla 1.5 站点

有些人还说他们的网站被黑了，他们正在使用 Joomla 1.5.16（例如）。好吧，如果您更新到最新版本并采取预防措施，这可能不会发生。

我显然不要求你们都跟上最新的，但我认为这是必要的，如果你不这样做会觉得很傻。特别是如果该网站是针对客户的。

# .net - 在 Git 中创建 .NET 递增程序集构建版本

> ID：12247991
> 
> 赞同：1
> 
> 时间：2012-09-03T12:34:38.060
> 
> 标签：.net, git, versioning, auto-increment, build-numbers

如何编写一个脚本来创建一个包含版本号的源文件？我希望每次提交都自动增加内部版本号（版本四倍中的第四个数字）。

我找到[了一些](http://www.jukie.net/bart/blog/auto-git-versioning)关于如何使用 bash 命令来执行此操作的示例：

```
INCREMENT=`git-rev-list $BRANCH..HEAD | wc -l | awk '{print $1}'` 
```

但我使用的是 Windows，我不知道如何将其作为脚本（或 Windows 批处理文件）运行。

我曾经使用 SVN，它在命令提示符下运行良好，所以我只是在批处理文件中使用它，但我不知道如何在`git-rev-list`不启动`git bash`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T14:19:56.800

由于 git 是分布式的 VCS，因此不可能保持全局递增的数字，因此没有它的位置。因此，正确的做法是使用`<commit sha1>`（或其片段）作为内部版本号。您可以使用`git describe`自动生成漂亮的版本名称，包括递增的数字。

另一个不错的选择是拥有一个内置版本编号的构建服务器（例如 Jenkins 或类似服务器）。

如果你想使用 hackish 方法，你可以使用 git 安装，例如 msysgit，它包含所有命令，例如`ws`or `awk`。不知道为什么你不工作，也许你`Git\bin`的PATH中没有文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T04:13:05.873

`AssemblyInfomationalVersionAttribute`可以保存任何字符串，包括散列或短散列或输出`git describe`