# StackOverflow 问答 10799000-10799999

# java - 限制大小字节[] Java android

> ID：10799001
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:18:13.887
> 
> 标签：java, android, size, byte, limit

我必须在我的 Android 应用程序中填写一个字节 []。有时，这个大于 4KB。我像这样初始化我的 byte[] ：

```
int size = ReadTools.getPacketSize(ptr.dataInputStream);
byte[] myByteArray = new byte[size]; 
```

在这里，我的大小 = 22625。但是当我像这样填写我的字节 [] 时：

```
while (i != size) {
myByteArray[i] = ptr.dataInputStream.readByte();
i++;
} 
```

但是当我打印我的 byte[] 的内容时，我有一个 size = 4060 的 byte[]。如果这个大于 4060，Java 会拆分我的 byte[] 吗？如果是的话，我怎样才能让 byte[] 优于 4060 ？

这是我的完整代码：

```
 public class ReadSocket extends Thread{
        DataInputStream inputStream;
        BufferedReader reader;
        GlobalContent ptr;
        public ReadSocket(DataInputStream inputStream, GlobalContent ptr)
        {
            this.inputStream = inputStream;
            this.ptr = ptr;
        }

        public void run() {
            int i = 0;
            int j = 0;
            try {
                ptr.StatusThreadReadSocket = 1;
                while(ptr.dataInputStream.available() == 0)
                {
                    if(ptr.StatusThreadReadSocket == 0)
                    {
                        ptr.dataInputStream.close();
                        break;
                    }
                }

                if(ptr.StatusThreadReadSocket == 1)
                {
                    int end = ReadTools.getPacketSize(ptr.dataInputStream);
                    byte[] buffer = new byte[end];
                    while (i != end) {
                       buffer[j] = ptr.dataInputStream.readByte();
                      i++;
                       j++;
               }
                ptr.StatusThreadReadSocket = 0;
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
          }
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:16:10.730

Java 不会拆分任何东西。您应该发布重现您的错误的最少代码，并告诉您`ReadTools`来自哪里。

这里有两个选项：

1.  `ReadTools.getPacketSize()`返回`4096`
2.  您无意中重新分配`myByteArray`给另一个数组

你真的应该发布你的完整代码并告诉你使用什么库。很可能，它会有一个类似的方法

```
read(byte[] buffer, int offset, int length); 
```

如果您只需要批量读取内存中的输入内容，这将为您节省一些输入并提供更好的性能

# c++ - 在 C++ 中提升线程

> ID：10799003
> 
> 赞同：0
> 
> 时间：2012-05-29T12:18:17.657
> 
> 标签：c++, multithreading, boost-thread

所以我正在将代码修改为多线程，我已经阅读了几篇文章但没有找到我的答案，我有 Main，A 类，B 类，现在我想知道是否可以在 B 类中编写线程所以当当 main 调用 class a 时， this 又调用 class b 并且在这里创建了踏板，而不是从子类中的 main 中创建。谢谢。

主要的

```
fr.place_sequences_to_nodes(&sequences,&leaf_nodes,reference_alignment,data_type‌​); 
int count = 1; root->name_internal_nodes(&count); 
root->start_alignment(&mf); 
ss.str(string()); 
ss << "Time main::align: "<< double(clock()-t_start)/CLOCKS_PER_SEC <<"\n";   
Log_output::write_out(ss.str(),"time"); 
```

节点

```
void align_sequences(Model_factory *mf) 
{ 
    if(leaf) return; 
    left_child->align_sequences(mf); 
    right_child->align_sequences(mf); 
    this->align_sequences_this_node(mf); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:21:48.913

您在这里混合了类和线程，可能会让自己感到困惑......如果您当前的应用程序是单线程的，那么您将拥有一个执行线程。您可以创建更多线程，它们创建的类的实例并不重要（除了实例的范围，可能让线程引用脱离范围，因此它们将是不可控的）。没有例子，我不能多说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:45:38.627

线程是独立的，无论是哪个其他线程创建它们。他们都是一样的。线程 A 可以创建线程 B，线程 B 创建线程 C，线程 C 创建线程 D，并且它们都将是同一种线程。

您可以从任何您想要的地方创建它们，只需遵循文档并记住注意事项（例如将 scoped_ptr 用于超出范围的 RAII 线程对象，从而导致对象崩溃）。

# ssis - SSIS如何在表达式中构建唯一的文件名

> ID：10799004
> 
> 赞同：3
> 
> 时间：2012-05-29T12:18:29.363
> 
> 标签：ssis, filenames

我想使用平面文件连接管理器的表达式生成器在 SSIS 中创建随机唯一文件名 - ConnectionString。

应该像：“自定义名称”+“唯一部分”+“csv”

实际上，以毫秒为单位的时间戳就可以了。

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T14:14:58.047

我建议你使用表达式设计来做到这一点。

这里我使用 ExecutionGuid 来生成值。这可能不是最好的主意，因为结果非常大，但您也可以使用 datetime 函数以您想要的格式创建一些东西：

![在此处输入图像描述](../Images/b9fff49591292e2dbda3cb43b8b65479.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:37:49.023

由于所有的替换，这有点令人费解，但你可以使用：

```
"Custom Name " + SUBSTRING(REPLACE(REPLACE(REPLACE((DT_WSTR, 50)(GETDATE()), "-",""), ".", ""), ":",""), 1, 18)  + ".csv" 
```

作为起点。这将返回：

```
Custom Name 20120529 133526359.csv 
```

作为可能的文件名。它不是 100% 保证唯一的，而且它显然不是随机的，但我认为这一切都可以在一个表达式中完成。或者，您可以使用脚本任务使用 C#/VB.NET 生成更随机的字符串，将其写入变量并在表达式中使用该变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:26:37.430

`string.Format("Custom name{0}.csv", Path.GetRandomFileName());`

或者

`string.Format("Custom name{0}.csv", DateTime.Now.ToString("yyyyMMddhhmmssfff"));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T16:35:16.447

这将获得唯一的日期时间..

```
" + (DT_WSTR, 30)(DT_DBDATE)GETDATE() + "_" + 
    (DT_WSTR, 05) DATEPART("Hh",GETDATE()) + 
    (DT_WSTR, 05) DATEPART("Mi",GETDATE()) + 
    (DT_WSTR, 05) DATEPART("Ss",GETDATE()) +
    ".csv" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-30T19:41:22.457

我发现很容易找到如何创建表达式，但很难找到有关如何设置输出文件名以使用此表达式的说明。这不是一个简单的过程。这是这个问题的答案。我希望这对某人有所帮助。

[https://blogs.msdn.microsoft.com/sqlgardner/2015/06/18/ssis-tip-using-a-file-path-parameter-for-multiple-flat-files/#comment-1755](https://blogs.msdn.microsoft.com/sqlgardner/2015/06/18/ssis-tip-using-a-file-path-parameter-for-multiple-flat-files/#comment-1755)

# c1-cms - Composite C1 对 Composite.dll 的引用在构建时不起作用

> ID：10799006
> 
> 赞同：0
> 
> 时间：2012-05-29T12:18:30.703
> 
> 标签：c1-cms

我正在尝试实现一个控制台库，它从 Composite C1（称为 RSS 提要的全局数据类型）读取数据，然后，对于每个 RSS 提要，应用程序必须从“链接”属性中检索 rss 条目，并将所有条目插入一个名为的全局数据类型中“RSS 项目”。

这是我所做的： 1\. 打开网站复合解决方案 2\. 创建一个新的控制台库项目 3\. 将 Composite.dll，Composite.generated.dll，... 引用到我的新项目中 4\. 实现功能

问题是：在设计时，我的所有参考都工作得很好，我可以用智能感知编写我的代码。但是当我想启动项目（调试|发布模式）时，对复合的引用不再起作用......

“错误 15 找不到类型或命名空间名称‘复合’（您是否缺少 using 指令或程序集引用？）”

当我在项目浏览器中进行刷新时，智能感知再次工作。

谢谢你的帮助。

最好的问候，乔纳森

PS：对不起我的英语，不是我的母语

有关信息：这里有一些代码：

```
List<MCG.RSSItem> rssItemList = new List<MCG.RSSItem>();
for (int i = 0; i < 10; i++)
{
   MCG.RSSItem rssItem = DataConnection.New<MCG.RSSItem>();
   rssItem.Link = rss.Link;
   rssItem.RSSFeed = rssFeed.Id;
   rssItem.Summary = rss.Description;
   rssItem.Title = rss.Title;
   rssItem.PublicationStatus = "published";
   rssItem.Id = Guid.NewGuid();
   connection.Add<MCG.RSSItem>(rssItemList);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T11:57:13.533

这里讨论了这个问题 - [http://compositec1.codeplex.com/discussions/357939](http://compositec1.codeplex.com/discussions/357939)

问题是来自标准的复合 C1。不支持 Windows 应用程序。基于此问题，创建了功能请求 -[重构 C1 的核心部分以用于“selfhost”](http://compositec1.codeplex.com/workitem/1271)

# javascript - Fancybox 回调 - 点击函数

> ID：10799009
> 
> 赞同：1
> 
> 时间：2012-05-29T12:18:33.090
> 
> 标签：javascript, jquery, fancybox

我想在花式框中添加分页。但是使用此处描述的clickevent：[在Fancybox弹出窗口打开时添加按钮单击事件](https://stackoverflow.com/questions/2920048/adding-button-click-event-when-fancybox-popup-opened)不起作用。

这是我的js代码：

```
onComplete: function(){ 

      $(".fancybox-nav").click(function(){  

          console.log("it works");

          var $that = $(this);
          var nav = $that.attr('class');
          var number = $('.fancybox-inner').find('.currentpage').text()
          var intnumber = parseInt(number);
          if (intnumber >= 1 && intnumber <= $('.item').length && nav == 'fancybox-nav fancybox-next') {       
                                    intnumber += 1;
                            }
                            else if(intnumber > 1){
                                intnumber -= 1;
                            };   
                            var stringnumber = String(intnumber);
                            $('.fancybox-inner')
                                .find('.currentpage')
                                    .replaceWith('<span class="currentpage">' + stringnumber + '</span>');    
                        });

                    }, 
```

如何在我的fancybox 中实现点击功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:13:23.717

要创建您正在寻找的分页效果，您可以使用 fancybox thumbs helper。

[按照此链接](https://stackoverflow.com/a/9475027/1055987)查找有关如何`jquery.fancybox-thumbs.js`为此目的自定义文件的说明。

它最初是为，`v2.0.5`但我在帖子末尾添加了一些注释`v2.0.6`。

# asp.net-mvc-3 - 为什么我必须在 mvc 的每个部分页面中调用或声明 jquery.validate.unobtrusive.min.js

> ID：10799014
> 
> 赞同：2
> 
> 时间：2012-05-29T12:18:58.260
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

为什么我必须在需要验证的每个部分页面中调用或声明这个 jquery.validate.unobtrusive.min.js。

我已经在主布局中定义了 js。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:20:58.973

> 为什么我必须在需要验证的每个部分页面中调用或声明这个 jquery.validate.unobtrusive.min.js。

不，你不需要这样做。在布局中添加一次就足够了。

当然，如果您使用例如 AJAX 调用将一些部分 HTML 添加到您的 DOM，并且此 HTML 包含需要绑定到不显眼的验证的表单元素，您需要使用以下`parse`您需要在添加后立即调用的方法强制它们的解析或将一些元素替换为 DOM：

```
$("form").removeData("validator");
$("form").removeData("unobtrusiveValidation");
$.validator.unobtrusive.parse("form"); 
```

# objective-c - 使用@property 和@synthesise？

> ID：10799015
> 
> 赞同：3
> 
> 时间：2012-05-29T12:18:58.483
> 
> 标签：objective-c, ios, properties, declaration

我想知道@property 和@synthesise 的意义是什么。目前我使用以下内容来声明一些东西：

```
//Class.m
#import "Class.h"

CCNode *node;

@implementation
//init, etc.. 
```

但我看到其他人使用：

```
@property (nonatomic, etc..) CCNode* node;
@synthesise (nonatomic, etc..) node;
//I am not too sure on how this type of declaration works, please correct me on how it's done. 
```

它们似乎都以相同的方式工作，@property 和@synthesise 方式的优点是什么？他们做不同的事情吗？如果是，那是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:47:30.420

`@property`并且`@synthesize`是两个客观的 C 关键字，可让您轻松创建属性，因此避免手动编写属性的 getter 和 setter 方法。

定义属性本身，应该放在头`@property`文件中并且可以获取一些属性（例如：strong、nonatomic、retainassign、copy），`@synthesize`应该放在实现文件中并告诉编译器生成body getter 和 setter 方法。

*这两个关键字在正确使用它们的属性时**非常有用，因为它们负责属性代码的生成，最重要的是它们负责属性的内存管理。***

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T12:19:54.093

`@property`- 创建你的 getter 和 setter 的声明。

`@synthesize`- 根据在属性内部传递的参数提供 getter 和 setter 的定义。

看看这个，那里有更多关于同一个礼物的细节 - [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T16:46:56.630

使用`@property`编译器将负责基于 readonly 和 readwrite 声明 getter 和 setter 方法

```
readonly -> getterMethod 
```

`readwrite ->`使用`@synthesize`编译器的 setter 和 getter 方法都将负责定义`getter`和`setter`方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:24:51.110

如果你的类中有一个实例变量（ivar），你通常不能从其他类访问它。因此，您必须创建公共访问器方法（getter 和 setter）。它们看起来像这样：

二传手：

```
- (void)setMyVariable:(SomeClass *)newValue {
    if (newValue != myVariable) {
        [myVariable release];
        myVariable = [newValue retain];
    }
} 
```

吸气剂：

```
- (SomeClass *)myVariable {
    return myVariable;
} 
```

这是在 Objective-C 2.0 之前你必须这样做的方式。现在您可以使用@property 和@synthesize 来加快速度。它基本上只是一个捷径。

在标题中，您使用 @property 来定义您想要的设置器类型。setter 应该保留传递的值（如我的示例中）还是复制或只是分配？

在实现中，您只需编写 @synthesize 以使编译器在该位置包含自动创建的 getter 和 setter。通常在您的实施的顶部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T12:32:01.327

我的感觉是所有 iVar 都应该有一个关联的下划线综合属性（使用 _iVar 可以防止意外的直接访问），并且除了 init 和 dealloc 方法之外，对 iVar 的所有访问都应该通过该属性。

恕我直言，最大的胜利是内存管理——它更安全、更容易，因为无需记住保留了哪些 iVar。

想想编写一个访问器需要做多少工作——4 行用于获取器，2 行用于设置器。

在未来`@synthesize`的某个时候可能是可选的，所以您只需要`@property`.

# visual-studio-2010 - OpenCV 将部分项目部署为静态或动态库或其他什么？

> ID：10799018
> 
> 赞同：0
> 
> 时间：2012-05-29T12:19:05.230
> 
> 标签：visual-studio-2010, opencv, shared-libraries, static-libraries

我对 OpenCV 和 Visual Studio 也很陌生。我的问题不是技术性的，而是理论上的：

我正在做一个更大的项目，但无法访问它的所有子组件等。我写了一些其他成员想要使用的类和函数。但是，我正在使用一些 OpenCV 特定的东西（因为我很懒，不想自己实现所有东西）但其他成员不使用它，他们希望保持项目规模相对较小。

我的问题是：如何将我的代码作为库或类似的东西提供，包括我所有的 opencv 依赖项？我可以创建我的代码的 dll 并随它一起发送 opencv dll 吗？有没有办法将所有内容捆绑到一个只有一个标题的文件中？

你将如何解决这个问题？

总结：我希望我的函数在一个库中并尽可能小地发布（带有 opencv 依赖项）

韩国

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:42:03.387

将所有代码放入 DLL 中，然后将 OpenCV DLL 与您的一起发布。

或者：将所有代码放入 DLL 中，并[使用 OpenCV 执行静态链接](https://stackoverflow.com/questions/9697935/lnk2005-error-linking-static-opencv-libraries-with-visual-studio-and-qt-creator)。

# java - 神经网络解决卡片问题

> ID：10799021
> 
> 赞同：1
> 
> 时间：2012-05-29T12:19:17.583
> 
> 标签：java, machine-learning, artificial-intelligence, neural-network, genetic-algorithm

问题 - 我有 10 张卡片的数量为 1 到 10。现在我必须将卡片排列起来，添加 5 张卡片给我 36，剩余 5 张卡片的乘积给我 360。

我已经成功地制作了一个 GA 来解决 java 中的卡片问题。现在我正在考虑用神经网络解决同样的问题。NN可以解决这个问题吗？我应该采取什么方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:11:07.880

这个问题很难用神经网络直接解决。神经网络不会有求和或乘积的概念，因此它们无法直接区分有效和无效的解决方案。

如果您创建了足够多的示例并进行了标记，那么神经网络可能能够通过记住它们来学会区分“好”和“坏”的安排。但这将是一种非常低效和不准确的方法，而且它有点毫无意义——你必须有一个知道如何解决问题的单独程序才能创建数据来训练神经网络。

PS 我认为你有点幸运，你设法让 GA 也能正常工作 - 我怀疑它只是因为问题足够小，让 GA 可以在答案附近尝试大多数可能的解决方案因此不久它偶然发现了一个正确的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:21:06.877

要跟进@mikera 关于为什么神经网络 (NN) 可能不适合这项任务的评论，考虑一下通常如何使用 NN 是很有用的。

NN 通常用于监督学习任务。也就是说，实现者提供了许多输入示例以及与该输入相关的正确输出。然后，NN 找到一个通用函数，该函数捕获提供的输入/输出对，并希望也捕获许多其他以前未见过的输入/输出对。

在您的问题中，您正在解决特定的优化问题，因此无需进行太多培训。只有一个（或多个）正确答案。因此，NN 并不是真正为此类问题而设计的。

请注意，没有总和/乘积的概念不一定会伤害 NN。您只需要创建自己的输入层，该层具有总和和乘积特征，这样 NN 就可以直接从这些特征中学习。但是，在这个问题上它不会有太大帮助。

另请注意，您的问题是如此之小，以至于即使是对所有数字组合 (10! = 3,628,800) 的简单枚举也最多可以在几秒钟内完成。

# log4j - JBoss 7.1 日志记录不起作用

> ID：10799028
> 
> 赞同：0
> 
> 时间：2012-05-29T12:19:38.540
> 
> 标签：log4j, jboss7.x

在我的 Web 应用程序中，我使用的是 apache 日志记录 log4j。当我将 jboss 作为 7.0 工作时，日志记录运行良好。

但是当我切换到 Jboss 7.1 时，日志记录不起作用。有人可以让我知道发生了什么变化吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:58:40.067

默认情况下，7.1 中的日志依赖项会添加到每个部署中。这适用于大多数人，但如果您使用自己的 log4j 配置，这将不适用于 7.1.1 及更低版本。您需要[排除](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)服务器 log4j 依赖项。

**注意**：在 7.2.x 中，这将正常工作，您可以删除`jboss-deployment-structure.xml`和 依赖项。

# c# - 如何在控制台应用程序中设置输入文件的路径？

> ID：10799035
> 
> 赞同：0
> 
> 时间：2012-05-29T12:20:06.403
> 
> 标签：c#, console-application

我在设置输入“.txt”文件的路径时遇到问题。我正在阅读文件的内容并修改内容。那么如何设置路径以使其适用于任何计算机（如果有人只是粘贴项目并尝试运行它。）

我尝试了以下选项。

```
1) var path = Environment.CurrentDirectory + @"\input.txt";
2) var path = "input.txt"; 
```

但我得到一个运行时 DirectoryNotFound 异常。为了

```
var path = @"D:\Projects\Demo Project\C#\Problem1\Problem1\input.txt" ; 
```

它工作正常。但它只适用于这个目录结构。

我需要类似的东西：- ResolveUrl("~/input.txt"); 这样它就适用于每种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:27:55.323

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

`System.IO.Path.GetDirectoryName`如果您想要的只是目录，请将其结合起来。

如果您在网站上工作，如问题评论所示，您可以使用

```
HttpContext.Current.Request.PhysicalApplicationPath 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:49:46.393

您可以使用

```
System.Windows.Forms.Application.StartupPath; 
```

获取应用程序启动的目录。

只要记住添加`System.Windows.Forms`对它是否是控制台应用程序的引用。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:02:56.980

如果您需要应用程序所在的目录：

```
AppDomain.CurrentDomain.BaseDirectory 
```

# asp.net - 为 asp.net 部署 Sqlite

> ID：10799039
> 
> 赞同：0
> 
> 时间：2012-05-29T12:20:34.750
> 
> 标签：asp.net, system.data.sqlite

我想部署一个 Sqlite 数据库作为 asp.net (vb) 页面的后端。看来我需要将 System.Data.Sqlite.dll 放在网络服务器上。

它在哪里，需要做什么设置才能使用它？

# c# - Cookie 中的 NullReferenceException

> ID：10799040
> 
> 赞同：0
> 
> 时间：2012-05-29T12:20:35.030
> 
> 标签：c#, asp.net, cookies, response

我有以下代码：

```
HttpCookie myCookie = new HttpCookie("PopMsgText");
myCookie.Value = message;
Response.Cookies.Add(myCookie); 
```

它在响应行给出 NullReferenceException。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:24:02.700

属性`Cookies`或`Response`对象为空。这可能会发生，具体取决于您调用此代码的位置。例如，如果您尝试`Response`在后台线程中访问对象，则它可能为 null，因为没有与后台线程关联的 HttpContext。

# asp.net - 需要根据文本从数据库中搜索文件

> ID：10799044
> 
> 赞同：0
> 
> 时间：2012-05-29T12:20:50.703
> 
> 标签：asp.net, sql-server, indexing, ifilter

如何根据用户输入的文本从已上传到 ms-sql DB 的文件集中搜索文件。该文件可以是任何类型，例如 .txt、.pdf、.doc、.jpeg。在这种情况下索引如何工作。我怎样才能实现这个功能。想要为基于 ASP.NET 的 Web 应用程序实现此功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:23:17.857

您可以实现全文索引。您需要为上传的每种文件类型设置一个相关的过滤器。

# java - 如何将 Object[] 转换为 Object[][]

> ID：10799048
> 
> 赞同：0
> 
> 时间：2012-05-29T12:21:18.053
> 
> 标签：java, object, vector

基本 Java 问题：我有一个从向量转换而来的一维对象：

```
Vector<Combination> allValues = getAllValues();  
Object[] combinations = allValues.toArray(); 
```

条目`combination[n]`由几个整数值组成，例如*{0,0,0,0}*。

我想创建一个可以达到每个整数值的二维**对象 4xN** ( `Object[][]`)。

`Object`从一维创建二维的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:35:09.960

您需要从每个组合对象创建一个 Object[]。组合类是否有 toArrays() 方法？如果是这样，那么你就完成了。如果没有，那么您将不得不自己定义一个，或者如果您无权访问其源，请创建一个 Object[] 并手动添加每个组合对象的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:24:39.927

好吧，您当然可以创建一个数组向量......这很丑陋。更好的办法是只保留你的一维索引并计算带有偏移量的索引..

真正的问题是：你的数据是什么样的？为什么需要二维索引？

# gwt - GWT 中的本地请求上下文

> ID：10799052
> 
> 赞同：0
> 
> 时间：2012-05-29T12:21:31.807
> 
> 标签：gwt, thread-local, thread-local-storage

在 Java 中，有 ThreadLocal，它可用于将一些数据从一个对象传送到另一个对象，而无需显式传递作为方法参数。

我需要拦截 GWT 请求并从中提取自定义 HTTP 标头，然后我需要以某种方式存储标头值以便以后处理。

问题是提取标头的位置属于 RequestBuilder，并且无法（？）将变量从 RequestBuilder 传递到实际处理来自服务器的请求/响应的自定义代码。并且不可能将某些变量从客户端代码传递给该请求构建器。

ThreadLocal 可能是解决方案，但它在 GWT 中不可用。有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:23:35.293

您可以使用[RequestBuilder.setHeader](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/http/client/RequestBuilder.html#setHeader%28java.lang.String,%20java.lang.String%29)为您的 HTTP 请求设置标头值。
在后端，您可以使用 Servlet 的 HttpServletRequest 从 HTTP 请求中检索标头值。

**更新**：

一些具有静态实例变量的类：

```
public class SomeClass {
    public static String myVar;
} 
```

在 RequestBuilder 代码中，您可以执行以下操作：

```
RequestBuilder request = new RequestBuilder(url);
request.setCallback(new RequestCallback() {
    @Override
    public void onResponseReceived(Request request, Response response) {
        SomeClass.myVar = response.getHeader("someheader");
    }
}); 
```

# php - 如何从 Facebook 注销

> ID：10799056
> 
> 赞同：0
> 
> 时间：2012-05-29T12:21:48.660
> 
> 标签：php, javascript, facebook

我使用该代码连接到 facebook

```
// Get User ID
$user = $facebook->getUser();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
ob_clean();
// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

然后从 facebook 注销

```
if ($user): ?>
      <a href="<?php echo $logoutUrl; ?>">Logout</a>
    <?php else: ?>
       <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
<?php endif; 
```

如果用户单击链接，则注销。但我只想运行速度代码。不链接。在页面中，我将在我写的地方工作。

我确实喜欢，但没有工作

```
header('Location: '.$logoutUrl ); 
```

总结一下：在我的页面中，我不仅要在我的 cookie 中注销，还要在 facebook 上注销。

像那样：

```
if(!isset($_COOKIE["kullanici"]))
{
  echo "Giriþ yapmamýþsýnýz  Bu sayfaya giriþ izniniz yoktur...";
  exit();
}
else
{ 
   setcookie("kullanici_mail", "", time()-3600,"/");
  if($user)
  //  here FACBOOK LOGOUT CODE SHOULD BE
  // AND THAN GO 
  ?>
   <script language="JavaScript">
   <!-- Sakla
   parent.location.href="../index.php";
   // -->
   </script>
 <?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:36:19.727

我不太明白你想在这里完成什么，但你可能想尝试使用 facebook php SDK 附带的销毁会话功能。它没有在网站上记录，但它在那里，我认为它可能是你需要的。

`$facebook->destroySession;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:25:31.617

您无法将用户从 Facebook 注销，但您可以将他们从您的应用程序中注销：

[http://samoldak.com/index.php/fixing-facebooks-php-sdk-logout/](http://samoldak.com/index.php/fixing-facebooks-php-sdk-logout/)

# php - 如何从 PDOStatement 中获取列名？

> ID：10799062
> 
> 赞同：2
> 
> 时间：2012-05-29T12:21:59.673
> 
> 标签：php, mysql, pdo

我最近构建了一个用于自动分页和排序查询结果的类，它适用于 PDO。

以下是我从 MySQL 表中检索数据的方法：

```
$this->query = "SELECT _id, name, price, creationDate, isPublished FROM fruits";
$this->fetch_type = PDO::FETCH_ASSOC;
$this->result = $db->query($this->query);
$this->rows = $this->result->fetchAll($this->fetch_type);
$this->columns = empty($this->rows) ? array() : array_keys($this->rows[0]); 
```

这样我可以轻松地将列名存储在数组中（这正是我需要的）：

```
var_dump($this->columns):

array
  0 => string '_id' (length=3)
  1 => string 'name' (length=4)
  2 => string 'price' (length=5)
  3 => string 'creationDate' (length=12)
  4 => string 'isPublished' (length=11) 
```

但是，如果 fetch 类型为 ，我的方法不起作用`PDO::FETCH_OBJ`，因为我不再使用 2D 数组，而是使用数组中的对象：

```
var_dump($this->rows):

array
 0 => 
object(stdClass)[11]
  public '_id' => string '1' (length=1)
  public 'name' => string 'apple' (length=5)
  public 'price' => string '26.00' (length=5)
  public 'creationDate' => string '0000-00-00 00:00:00' (length=19)
  public 'isPublished' => string '1' (length=1)
 1 => 
object(stdClass)[12]
  public '_id' => string '2' (length=1)
  public 'name' => string 'banana' (length=11)
  public 'price' => string '15.00' (length=5)
  public 'creationDate' => string '0000-00-00 00:00:00' (length=19)
  public 'isPublished' => string '1' (length=1)
 2 => 
object(stdClass)[13]
  public '_id' => string '3' (length=1)
  public 'name' => string 'orange' (length=6)
  public 'price' => string '12.12' (length=5)
  public 'creationDate' => string '0000-00-00 00:00:00' (length=19)
  public 'isPublished' => string '1' (length=1)

  etc... 
```

那么，如何从上述结果中获取列名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:27:26.837

对此的简单答案是将传递给的项目强制转换[为](http://php.net/manual/en/language.types.type-juggling.php#language.types.typecasting)`array_keys()`显式`(array)`- 这样，数组不受影响，但对象成为正确的类型：

```
$this->columns = empty($this->rows) ? array() : array_keys((array) $this->rows[0]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T12:31:51.763

[getColumnMeta](http://www.php.net/manual/en/pdostatement.getcolumnmeta.php)可以检索列的名称，它返回一个关联数组，其中包含明显的“名称”键。

所以

```
$meta = $this->result->getColumnMeta(0); // 0 indexed so 0 would be first column
$name = $meta['name']; 
```

# perl - (m/regexp/) 或 {multiple ; 命令；后; 或者; }

> ID：10799063
> 
> 赞同：1
> 
> 时间：2012-05-29T12:22:06.517
> 
> 标签：perl, error-handling

我非常喜欢这种语法：

```
try_something() or warn "Cant do it"; 
```

之后如何添加更多命令`or`？

例如，它在这段代码中很有用：

```
foreach (@array)
{
   m/regex/ or {warn "Does not match"; next;}  # this syntax is wrong
   ...
} 
```

我发现的一种方法是

```
try_something() or eval {warn "Can't do it"; next;}; 
```

但我认为这是个坏主意。

最佳答案：

1.  `do`好于`eval`。
2.  逗号运算符更好：`do_smth() or warn("Does not match"), next;`Nota bene: 括号是强制性的，`warn`因此它`next`不会被解析为它的参数之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:30:12.957

我认为这最终会很快变得非常难以理解，但是您可以`do`：

```
foo() or do { bar(); baz(); }; 
```

```
sub foo {
  return $_[0] == 2;
}

for (1..3) {
  print $_;
  foo($_) or do { print " !foo\n"; next; };
  print " foo!\n";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T12:40:04.283

对于您问题中的情况，我会使用`unless`.

```
for (@array) {
  unless (/regex/) {
    warn "Does not match";
    next;
  }

  ...
} 
```

有时您可以不使用[逗号运算符](http://perldoc.perl.org/perlop.html#Comma-Operator)。它评估其左侧参数，丢弃结果，评估右侧参数并返回该结果。应用于您的情况，它看起来像

```
for (@array) {
  /regex/ or warn("Does not match"), next;

  ...
} 
```

注意额外的括号。您必须更加小心括号和以这种方式分组。谨慎使用这种技术：它会很快变得丑陋。

在下面的评论中，Zaid 建议

```
warn('Does not match'), next unless /regex/; 
```

选择是风格问题。Perl 是由一位语言学家创建的。自然语言允许我们根据我们想要强调的部分以不同的方式表达相同的想法。在您的情况下，您要强调警告还是模式匹配？将更重要的代码放在前面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T13:55:39.627

我发现（并测试）您也可以使用“和”：

```
try_something() or warn "Cant do it" and print "Hmm." and next; 
```

如果 try_something() 成功，那么它在 or 之后什么也不做。

如果 try_something() 失败，那么它会发出警告并打印然后下一步。

# android - 意图过滤器在浏览器中不起作用

> ID：10799065
> 
> 赞同：5
> 
> 时间：2012-05-29T12:22:09.050
> 
> 标签：android, android-intent, intentfilter

我正在使用带有类似于[此处](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)描述的意图过滤器的 Activity，以便能够拦截浏览器中的点击，并为用户提供打开我的应用程序的选项。这是我的代码`AndroidManifest.xml`：

```
<activity android:name="com.scompt.ScomptIntentFilter">
    <intent-filter>
        <data android:scheme="http" android:host="www.scompt.com" />
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT"/>
        <category android:name="android.intent.category.BROWSABLE"/>
    </intent-filter>
</activity> 
```

`http://www.scompt.com`如果我进入浏览器，这将不起作用。页面已加载，就像正常一样。

如果我在命令行中输入以下任一命令，则会在我的应用程序和浏览器之间获得标准选择器，正如我所期望的那样。

```
adb -d shell am start -d http://www.scompt.com -a android.intent.action.VIEW
adb -d shell am start -d http://www.scompt.com 
```

我还有其他地方可以让它工作吗？我已经验证了我在使用开源[hubroid](https://github.com/eddieringle/hubroid)所做的事情，而且我似乎也在做同样的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T15:51:24.380

关于意图，用户在浏览器中输入 URL 与点击网页、电子邮件等中的链接之间存在明显差异。

如果您点击浏览器网页上的链接或电子邮件中的链接，则会按预期触发意图。

但是，当用户在浏览器的地址栏中键入 URL 时，Android 认为用户特别希望该 URL 在浏览器中打开，因此不会触发意图。

因此，如果您想测试 URL 和意图过滤器，那么您需要设置一个带有超链接的静态网页，或者向您的手机发送电子邮件。

仔细想想，这个系统的工作方式与 Windows 中的默认浏览器行为类似。想象一下，您的默认浏览器是 Chrome，但您也安装了 Firefox。如果您单击电子邮件中的链接，它将在 Chrome 中打开。但是，如果您打开 Firefox 并在地址栏中输入 URL 并点击“开始”，则它不会在 Chrome 中打开，因为显然您希望该 URL 在 Firefox 中打开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:29:44.387

[http://example.com](http://example.com)不是[http://www.example.com](http://www.example.com)。

尝试在浏览器中输入[http://www.example.com](http://www.example.com)看看是否可行。

这是适用于我的清单代码：

```
<activity
    android:name="MY_APP"
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data
            android:host="MY_HOST"
            android:scheme="MY_SCHEME" />
    </intent-filter>
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T11:53:27.953

我在 2014 年 1 月 28 日遇到了与 chrome 浏览器完全相同的问题。在这里查看我的答案

[从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser/21404638#21404638)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T11:35:00.540

将 pathPatterns 添加到数据标签：

```
 <data
                android:host="www.example.com"
                android:scheme="http"
                android:pathPattern=".*">
            </data>

            <data
                android:host="example.com"
                android:scheme="http"
                android:pathPattern=".*">
            </data> 
```

# spring-security - 在 Spring Security 中修剪密码

> ID：10799069
> 
> 赞同：0
> 
> 时间：2012-05-29T12:22:32.553
> 
> 标签：spring-security

我需要从登录表单中删除密码。而已。最简单的方法是什么？

# android - onDestroy() 之后的 Android 服务 UI 更新

> ID：10799070
> 
> 赞同：0
> 
> 时间：2012-05-29T12:22:47.693
> 
> 标签：android, user-interface, service, android-intent

我正在学习如何正确使用服务并且遇到了问题。我只有一个测试应用程序，它将启动一个服务来增加一个整数。随着整数的增加，我能够使用信使来更新 UI。此外，我能够将原始活动的启动模式设置为 singleTask，这允许我使用服务中的待处理意图返回到主要活动的实例。

**我遇到的问题是如何在旧活动被销毁后（例如作为屏幕旋转、退出应用程序等的一部分）将新活动（实际上我专注于进入新的 UI 视图）重新附加到我的服务.)？**

屏幕旋转或活动被破坏后会发生什么，重新打开时的 UI 与应用程序启动时一样，但我可以看到我的服务仍在运行。

以下是我的服务代码：

```
public class BackgroundService extends Service {

private static final String TAG = "BackgroundService";
private NotificationManager notificationMgr;
int counter;

// use regular thread
private ThreadGroup myThreads = new ThreadGroup("ServiceWorker");

public void onCreate() {
    super.onCreate();
    notificationMgr = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    displayNotificationMessage("Background Service is running");

};

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    super.onStartCommand(intent, flags, startId);

    int counter = intent.getExtras().getInt("counter");
    Messenger msg = (Messenger) intent.getExtras().get("msg_JIB");
    new Thread(myThreads, new ServiceWorker(counter, msg), "BackgroundService")
        .start();

    return START_NOT_STICKY;
}

 class ServiceWorker implements Runnable
    {
        int counter = -1;
        private Messenger msg1 = null;
        public ServiceWorker(int counter, Messenger msg) {
            this.counter = counter;
            this.msg1 = msg;
        }

        public void run() {
            final String TAG2 = "ServiceWorker:" + Thread.currentThread().getId();
            // do background processing here...
            try {
                while (counter<100){

                Message message = Message.obtain();
                message.arg1=counter;
                msg1.send(message);
                counter = counter +1;
                Thread.sleep(5000);
                }

            } catch (Throwable e) {

                Log.v(TAG2, "... sleep interrupted");
            }
        }
    }

private void displayNotificationMessage(String message) {
    Notification notification = new Notification(R.drawable.emo_im_winking,
            message, System.currentTimeMillis());

    Intent i = new Intent(this, ProDroid_Android_CH11_Local_ServiceActivity.class);
    //i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_SINGLE_TOP);

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            i, 0);

    notification.setLatestEventInfo(this, TAG, message, contentIntent);
    notification.flags |= Notification.FLAG_NO_CLEAR;
    notificationMgr.notify(0, notification);

}

   @Override
    public void onDestroy()
    {
        Log.v(TAG, "in onDestroy(). Interrupting threads and cancelling notifications");
        myThreads.interrupt();
        notificationMgr.cancelAll();
        super.onDestroy();
    }

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

这是我的主要活动的代码：

```
public class ProDroid_Android_CH11_Local_ServiceActivity extends Activity {

private static final String TAG = "MainActivity";
private int counter = 1;

Handler handler = new Handler() {
    @Override
    public void handleMessage(android.os.Message msg) {

        TextView tv = (TextView) findViewById(R.id.textView1);
        tv.setText("Count: " + msg.arg1);

    };

};

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
protected void onNewIntent(Intent intent) {

    super.onNewIntent(intent);
}

public void doClick(View view) {
    switch (view.getId()) {
    case R.id.startBtn:
        Log.v(TAG, "Starting service... counter = " + counter);
        Intent intent = new Intent(
                ProDroid_Android_CH11_Local_ServiceActivity.this,
                BackgroundService.class);
        intent.putExtra("counter", counter);
        intent.putExtra("msg_JIB", new Messenger(handler));
        startService(intent);

        break;
    case R.id.stopBtn:
        stopService();
    }
}

private void stopService() {
    Log.v(TAG, "Stopping service...");
    if (stopService(new Intent(
            ProDroid_Android_CH11_Local_ServiceActivity.this,
            BackgroundService.class)))
        Log.v(TAG, "stopService was successful");
    else
        Log.v(TAG, "stopService was unsuccessful");
}

@Override
public void onDestroy() {
    //stopService();
    super.onDestroy();
} 
```

}

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T17:05:18.923

您应该设置一个共享处理程序，当前活动将自己注册为处理程序的回调。

请参阅此帖子 [修订 2：如何将数据从后台服务/线程传递到创建后台服务的 MainActivity 之外的其他活动](https://stackoverflow.com/questions/6352244/revision-2-how-to-pass-data-from-a-background-service-thread-to-some-other-acti)

# iphone - OAuth2.0Library 在 App xcode iphone 中对用户进行身份验证

> ID：10799074
> 
> 赞同：0
> 
> 时间：2012-05-29T12:23:04.510
> 
> 标签：iphone, xcode, authentication, oauth-2.0

我正在开发用于验证用户身份的 Oauth 2.0 库。我需要下载 ios 的库文件。我按照以下网址进行操作，但找不到为此的 xcode 库。

点击[这里](http://code.google.com/p/gtm-oauth/source/browse/#svn%2Ftrunk%2FSource%2FTouch "鼠标悬停时出现此文本")！

任何帮助将不胜感激谢谢 vikas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:21:05.933

从以下链接下载 oauth 2.0 库文件（选择下载为 zip 按钮）：

[https://github.com/dbloete/oauth-objc/downloads](https://github.com/dbloete/oauth-objc/downloads)

# javascript - 为什么按钮不改变？

> ID：10799075
> 
> 赞同：0
> 
> 时间：2012-05-29T12:23:06.867
> 
> 标签：javascript, jquery, html, css

我在[这里](http://jsfiddle.net/w2wJs/7/)有一个 Jsfiddle 应用程序。

当您访问小提琴并看到输出时，请执行以下操作：

1.  单击“打开网格”链接并选择其中一个数字按钮。选择数字按钮后，您会看到下方出现字母按钮。

2.  再次点击“Open Grid”按钮，选择不同的数字按钮，你会发现字母按钮发生了变化。这可以。

3.  单击“添加问题”按钮，这将添加一行显示您从顶部控件中选择的内容。

4.  现在这就是问题所在。在您刚刚添加的行中，单击“Open Grid”链接并选择不同的数字按钮，您现在应该在表格行中意识到字母按钮在它们假设的情况下根本不会改变。这就是我遇到的问题。

现在它曾经在javascript代码中工作，代码是这样的：

```
var $tbody = $('#qandatbl > tbody'); 
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $options = $("<td class='option'></td>");
var $answer = $("<td class='answer'>"); 
```

但是因为我希望表格行中的控件显示在一个又一个之上，所以我添加了一些`<tr>`标签，`$options`因此`$answer`代码现在看起来像这样：

```
var $tbody = $('#qandatbl > tbody'); 
var $tr = $("<tr class='optionAndAnswer' align='center'></tr>");
var $options = $("<tr><td class='option'></td></tr>");
var $answer = $("<tr><td class='answer'></tr>"); 
```

所以我的问题是为什么它现在不改变表格行中的字母按钮，因为我已经添加了`<tr>`标签，如何解决这个问题？

此外，当添加表格行时，为什么它显示两列而不是一列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:37:48.620

您不能`<tr>`在`<tr>`. 此外，您的 HTML 也会被附加标记弄乱。单击“添加问题”按钮时，我得到类似的信息：

```
<tbody>
  <tr class="optionAndAnswer">
    <tr>
      <td class="option"></td>
      <input type="text" ....  />
      <span class="showGrid">[Open Grid]</span>
    </tr>
    <tr>
      <td class="answer"></td>
      <tr>
        <td>
          <input class="answerBtns" value="A" />
          <input class="answerBtns" value="B" />
          <input class="answerBtns" value="C" />
        </td>
      </tr>
    </tr>
  </tr>
</tbody> 
```

这是相当混乱，需要清理。

我已经改变了你的小提琴，使其具有更好的 HTML 结构，并且仍然让它看起来像你想要的那样：http: [//jsfiddle.net/w2wJs/10/](http://jsfiddle.net/w2wJs/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:43:20.247

将函数更新为`on`以下内容（更改选择器）并添加 preventDefault：

```
 $('table').on('click','.showGrid', function(e) {
    e.preventDefault();
    $(".gridBtns").removeClass("gridBtnsOn");

    var value = $(this)
        .siblings('input[name=gridValues[]]').val();

    $("#btn" + value.replace(/\s/g, '')).addClass("gridBtnsOn");

    $('.optionTypeTbl').fadeToggle('slow');
    $(this).parent().append($('.optionTypeTbl'));
    $('.optionTypeTbl').css({

        left: $(this).position().left,
        top: $(this).position().top + 20

    });

    e.stopPropagation();

}); 
```

[http://jsfiddle.net/w2wJs/9/](http://jsfiddle.net/w2wJs/9/)

# ruby - 无法在emacs的ruby文件中输入大写C

> ID：10799084
> 
> 赞同：0
> 
> 时间：2012-05-29T12:23:31.520
> 
> 标签：ruby, emacs

我面临一个奇怪的问题。在 emacs 中，每当我按 Shift+C 时，在 ruby​​ 文件中，它都会将其解释为控制键，所以我无法输入大写 C。即使保持大写锁定并按 C 也有相同的效果。如果我将模式更改为其他模式，例如 java 模式，它可以工作。我安装了 ruby​​ 模式和 ruby​​ 电动模式。这是红宝石模式还是其他问题？

请帮忙谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T10:23:40.733

更改`(define-key ruby-mode-map "C-m" 'newline-and-indent)`为`define-key ruby-mode-map "\C-m" 'newline-and-indent)`.emacs 可以解决问题。

# seo - 什么是断开的相对链接？

> ID：10799085
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:23:32.857
> 
> 标签：seo, web

请参阅此链接 [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=76329)

我不明白下面的段落。你能说明一下吗？什么是断开的相对链接？，这是怎么回事？

> 断开的相关链接。断开的相对链接通常会导致无限空间。由于重复的路径元素，经常会出现此问题。例如：
> 
> [http://www.example.com/index.shtml/discuss/category/school/061121/html/interview/category/health/070223/html/category/business/070302/html/category/community/070413/html/](http://www.example.com/index.shtml/discuss/category/school/061121/html/interview/) _常见问题解答.htm

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:31:53.823

只需仔细查看您的示例链接。由于糟糕的链接结构，可能是由于`../`URL 使用不当造成的，看起来它实际上比实际文件结构深三倍。

使用完整 URL（包括域名）或从绝对文档根目录 ( `/`) 开始是防止这种情况发生的最佳方法。

# python - 如何在 python 和 django 中使用 Pytz 根据给定的 UTC 偏移量转换数据和时间？

> ID：10799088
> 
> 赞同：1
> 
> 时间：2012-05-29T12:23:57.213
> 
> 标签：python, django, utc, pytz, timezone-offset

我想使用 Pytz 根据给定的 UTC 偏移量转换时间戳对象（从模型中获取）。在我打印时间戳对象时将其渲染到模板之前，它使用以下格式：

```
 2012-05-29 10:03:37 
```

我得到以下行的偏移量：

```
 offset = datetime.datetime.now(pytz.timezone('Asia/Kolkata')).strftime('%z') 
```

上面的偏移量将给出`+0530` 。现在我想用这个偏移量对时间戳对象进行更改。例如 ：

```
timestamp: `2012-05-29 10:03:37`
offset:   `+0530`
after change,
timestamp: `2012-05-29 15:33:37` 
```

那这个呢：

```
timestamp: `2012-05-29 23:03:37`
offset:   `+0530`
after change,
timestamp: `2012-05-30 4:33:37` 
```

看看它也根据偏移量改变的日期。操纵时间后，它甚至可以是 12 小时格式。

任何帮助都将是可观的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T10:47:14.120

我希望这是您正在寻找的：

```
d = datetime.now(pytz.timezone('UTC'))   # get date in UTC format - you'll be getting it from the database
local = d.astimezone('Asia/Kolkata')
print local.strftime("%Y-%m-%d %H:%M:%S %z") 
```

# java - 如何在应用程序中同时处理多个用户请求

> ID：10799092
> 
> 赞同：0
> 
> 时间：2012-05-29T12:24:08.693
> 
> 标签：java, request

我正在用 Java 创建一个应用程序，其中数据库中有一个存储可用访问槽的表。

基本上，当用户发出请求时，程序应该在表中找到一条具有打开（未使用）槽的记录。用户的数据发送给他后，该槽被标记为已使用，不能再使用。

我感到困惑的是，如何处理许多同时请求...例如，如果同时有 2 个请求，那么它们是否有可能从表中获取相同的插槽（记录）？我如何确保即使有许多同时请求，每个请求都会选择一个唯一的未使用插槽，并且所有请求都会选择不同的未使用插槽。

还有一件事，我确实有很多插槽，但重要的是没有一个插槽被 2 个不同的请求拾取。但是，如果请求数量急剧增加，即使这在未来也可能会发生变化......所以我需要一个解决方案，以按照我所描述的方式处理大量请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:39:36.887

您想要做的是称为[连接池](http://onjava.com/onjava/2006/04/19/database-connection-pooling-with-tomcat.html "连接池")（此处使用 tomcat 的示例）。上述问题的解决方案是使用数据库允许的信号系统，特别是事务。

首先，您读取表并找到未使用的第一条记录。您将该号码传播回您的应用程序。然后您尝试专门打开记录（用于写入）。您再次检查该记录是否仍然未使用，如果是，则获取该记录的数据。将数据保存到记录中并发布。但是，如果在打开记录时突然使用该记录进行写入，则需要退回并再次查找新记录并重复该机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:46:53.427

尝试这个，

用于`ArrayBlockingQueue`线程安全访问......这将确保一次只有一个线程可以访问记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:35:27.477

你用的是什么数据库？MySQL 具有`SELECT ... FOR UDPATE`行锁定支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:29:18.157

您将插槽取货请求放入同步队列中。这样，您将保证插槽拾取是 FIFO（先进先出）。你可以用[这个](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

# android - 如何设置按钮之间的空间并将文本放在一行中

> ID：10799095
> 
> 赞同：0
> 
> 时间：2012-05-29T12:24:28.147
> 
> 标签：android, android-layout, android-button

我使用此代码绘制以下行

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
        android:layout_weight=".25"
    android:layout_height="fill_parent"

    android:orientation="horizontal" 

    >
    <Button
        android:id="@+id/Chemo"
        android:layout_width="match_parent"
        android:layout_weight="0.33"
        android:layout_height="wrap_content"
        android:text="Chemo" 
        android:background="@drawable/firstbuttoncolorstyle"
        android:textColor="@drawable/firstbuttontextstyle"
        android:layout_gravity="center"
        android:textSize="22dp" 

        />

    <Button
        android:id="@+id/inpatient"
                    android:layout_width="match_parent"
        android:layout_weight="0.33"
        android:layout_height="wrap_content"
        android:text="inpatient" 
        android:background="@drawable/firstbuttoncolorstyle"
         android:textColor="@drawable/firstbuttontextstyle"
        android:layout_gravity="center"
        android:textSize="22dp" 
        />

    <Button
        android:id="@+id/Mgmt"
    android:layout_width="match_parent"
    android:layout_weight="0.33"
    android:layout_height="wrap_content"
    android:text="Mgmt" 
    android:background="@drawable/firstbuttoncolorstyle"
     android:textColor="@drawable/firstbuttontextstyle"
    android:layout_gravity="center"
    android:textSize="22dp" 
    />
      </LinearLayout>       
     <LinearLayout
   android:layout_width="match_parent"
        android:layout_weight=".25"
    android:layout_height="wrap_content"

    android:orientation="horizontal" 

    >
    <Button
        android:id="@+id/PFinder"
                    android:layout_width="match_parent"
        android:layout_weight="0.23"
        android:layout_height="wrap_content"
        android:text="Patient" 
        android:background="@drawable/secondbuttoncolorstyle"
        android:textColor="@drawable/secondbuttontextstyle"
                  android:layout_gravity="center"
        android:textSize="22dp" 
        />

    <Button
        android:id="@+id/Afinder"
                    android:layout_width="match_parent"
        android:layout_weight="0.23"
        android:layout_height="wrap_content"
        android:text="Appointement" 
        android:background="@drawable/secondbuttoncolorstyle"
        android:textColor="@drawable/secondbuttontextstyle"
                  android:layout_gravity="center"
        android:textSize="22dp" 
        />

    <Button
        android:id="@+id/Calender"
                    android:layout_width="match_parent"
        android:layout_weight="0.23"
        android:layout_height="wrap_content"
        android:text="Calender" 
        android:background="@drawable/secondbuttoncolorstyle"
        android:textColor="@drawable/secondbuttontextstyle"
                  android:layout_gravity="center"
        android:textSize="22dp" 
        />

    </LinearLayout>

      <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
        android:layout_weight=".25"
    android:layout_height="wrap_content"

    android:orientation="horizontal" 

    >
        <Button
        android:id="@+id/Profile"
                   android:layout_width="match_parent"
        android:layout_weight="0.33"
        android:layout_height="wrap_content"
        android:text="Profile" 
         android:background="@drawable/thirdbuttoncolorstyle"
         android:textColor="@drawable/secondbuttontextstyle"
                   android:layout_gravity="center"
        android:textSize="22dp" 
        />

      <Button
        android:id="@+id/Clear"
                    android:layout_width="match_parent"
        android:layout_weight="0.33"
        android:layout_height="wrap_content"
        android:text="Clear" 

        android:background="@drawable/thirdbuttoncolorstyle"
        android:textColor="@drawable/secondbuttontextstyle"
                  android:layout_gravity="center"
        android:textSize="22dp" 

        />

    <Button
        android:id="@+id/Logout"
         android:layout_width="match_parent"
        android:layout_weight="0.33"
        android:layout_height="wrap_content"
        android:text="Logout" 
        android:background="@drawable/thirdbuttoncolorstyle"
        android:textColor="@drawable/secondbuttontextstyle"
        android:layout_gravity="center"
        android:textSize="22dp" 

        />

    </LinearLayout>

              <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
        android:layout_weight="0.25"
    android:layout_height="wrap_content"

    android:orientation="horizontal" 

    >
            <ImageButton
    android:id="@+id/maillme"
                android:layout_width="wrap_content"

    android:layout_height="wrap_content"
    android:background="@drawable/mail" 
      android:layout_gravity="center"
    />

                <ImageButton
    android:id="@+id/callme"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/call" 
      android:layout_gravity="center"
    />

    </LinearLayout>

   </LinearLayout> 
```

但以下是输出

如何设置按钮之间的空间并在一行中制作例如日历字

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:33:47.637

通过查看您的示例，您应该将 textSize 减少到 20...所以`calendar`&`impatient`将适合。

只是一个提示：`sp`用于 textsize 以及`dp`控件的高度和宽度。

对于保证金，您有：`android:layout_marginRight`和`android:layout_marginLeft`

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:27:44.063

对于间距，您可以使用`android:layout_marginRight`等`android:layout_marginLeft`属性，并且您应该定义`android:layout_width="WRAP_CONTENT"`以防止出现日历按钮和下一个按钮等行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:37:49.537

在 first 之后设置`android:layout_marginLeft = "5dp"`每个按钮`Button`，我认为您可以使用`android:singleLine = "true"`将文本保留在一行中。

还将所有按钮的高度设置为 eual 并`android:layout_height = "wrap_content"`在您的主布局中使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:55:44.773

首先，您应该使用 Styles 通过重用以下属性来减少代码长度：`gravity, layout_height, textColor, ...`

至于某些按钮中的换行符。如果您只处理平板电脑，您可以使用它`layout_width="wrap_content"`来避免换行并为每个按钮设置相同的高度。

要在每个按钮之间留出一点空间，请使用已经提到的`layout_marginLeft`

# java - Spring MVC + Session 属性和多个选项卡

> ID：10799096
> 
> 赞同：5
> 
> 时间：2012-05-29T12:24:35.360
> 
> 标签：java, spring-mvc

我有一些用户界面，管理员可以在其中更新产品。在我的开发/测试期间，我只打开了一个窗口，一切正常。

然后客户正在编辑，他们为不同的产品打开了多个选项卡，保存后，这导致了重复字段问题。

我假设这是`@SessionAttributes`和的组合`@ModelAttribute`。最后打开的产品是放在会话中的产品，因此如果您尝试编辑第一个选项卡，您实际上会得到不正确的产品。

我的方法在下面，使用`SessionAttribute`，并且`ModelAttribute`不正确吗？

我的控制器：

```
@Controller
@SessionAttributes({ "product" })
public class ProductController {

@RequestMapping(value = "/product/update/{productId}", method = RequestMethod.GET)
public String update(@PathVariable Long productId, Model model) {
    Product product;
    if (productId == null) {
        product = new Product();
    } else {
        product = Product.find(productId);
    }
    model.addAttribute("product", product);
    return "product/update";
}

@RequestMapping(value = "/product/update", method = RequestMethod.POST)
public String update(@ModelAttribute Product product, BindingResult result,
        Model model) {
    if (result.hasErrors()) {
        return "product/update";
    }
    product = product.merge();
    return "redirect:/product/update/" + product.getId();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:13:17.507

In cases where you will just show the object stored in Session and will not allow it being edited or replaced, this approach is okay. But for cases like this, it is advisable to use request scope rather than session scope.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:44:01.273

根据 Marty Jones 的文章，我最终使用了自定义 SessionAttributeStore

[http://marty-java-dev.blogspot.com/2010/09/spring-3-session-level-model-attributes.html](http://marty-java-dev.blogspot.com/2010/09/spring-3-session-level-model-attributes.html)

# jquery - jQuery UI datepicker：有没有办法在对话框中显示前导零？

> ID：10799099
> 
> 赞同：4
> 
> 时间：2012-05-29T12:24:40.283
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我需要在 jQuery UI 日期选择器中显示前导零：

**例如，**

`1 2 3 4 5 6 7 8 9 10`->`01 02 03 04 05 06 07 08 09 10`

与此类似的问题：

[http://forum.jquery.com/topic/displaying-leading-zero-for-day-numbers-of-datepicker](http://forum.jquery.com/topic/displaying-leading-zero-for-day-numbers-of-datepicker)

也许有人确实有解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:40:52.973

这是我的黑客解决方案。有用！:)

我们可以使用 CSS 和 JavaScript 的组合。我们可以在我们的方法中利用一个`datepicker`事件。[`beforeShowDay`](http://jqueryui.com/demos/datepicker/#event-beforeShowDay)

*CSS：*

```
.ui-datepicker-calendar td.zero a:before {
    content: "0";
}​ 
```

*JavaScript：*

```
$("input").datepicker({
    beforeShowDay : function(date) {
        var day = date.getDate();
        return [true, (day < 10 ? "zero" : "")];
    }
}); 
```

**演示：http:** [//jsfiddle.net/vZ7wm/](http://jsfiddle.net/vZ7wm/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:57:41.690

为此，您需要破解 daterpicker 插件。

获取`_generateHTML`方法。后

`for (var dow = 0; dow < 7; dow++) {`// 创建日期选择器天数

放置此代码

```
var customgetDate = printDate.getDate();
if(customgetDate<=9){
 customgetDate= '0'+ customgetDate;
} 
```

然后找到这个“ `printDate.getDate() + '</a>')` ”现在替换它；

```
 customgetDate + '</a>') 
```

就这样.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:40:47.913

显示月份数字的前导零？也许是这样的：

```
<script type="javascript/text">
$(document).ready(function() {
    $(".cssselector").datepicker({ dateFormat: 'dd/mm/yy' });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-07T05:14:12.707

过时的接受答案。应该：

```
$('#fromDate, #toDate').datepicker({
    dateFormat : 'yymmdd'
}); 
```

# prism - MVVM、Unity、Prism、MEF、Caliburn - 我应该使用什么？

> ID：10799101
> 
> 赞同：34
> 
> 时间：2012-05-29T12:24:50.673
> 
> 标签：prism, unity-container, mef, mvvm-light, caliburn.micro

请帮忙 - 我迷路了！

我正在编写一个具有一些控件和一些屏幕的小型桌面应用程序。这应该稍后与一个小型网站集成，也有一些屏幕。这个想法是让用户编辑视频并选择图像，然后与她的朋友分享他们的结果。

桌面应用程序使用 C# WPF，网站 - ASP.Net MVC。

我读到使用 MVVM 将应用程序扩展到几个屏幕会更容易。所以我开始搜索并发现了 Caliburn.Micro 和 MVVM.Light。我已经下载了一些教程，但是，就在我准备深入研究材料时，我[在 SO 上找到了](https://stackoverflow.com/questions/4750255/mvvm-light-unity-or-prism)。还有 Prism、MEF、Unity、ReactiveUI - 这变得太多了！

我不擅长学习新事物——学习 WPF 和 ASP.Net MVC 花了我很长时间。我不想研究很多新材料，后来才发现它不相关。而且我没有建筑师来指导我。

所以我的问题是：**您能否正确看待这些框架和技术，并建议我应该重点研究和使用哪些（尤其是以后可以与 Windows 8 一起使用的）？**

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-29T18:36:50.567

如果您想构建一个 MVVM 应用程序（您可能会因为各种优势而这样做），那么[您需要一个 MVVM 框架](http://www.lhotka.net/weblog/CommentView,guid,c61fd797-16f7-4f5f-a6fc-226f235b132a.aspx)。

我会推荐[Caliburn.Micro](http://caliburnmicro.codeplex.com/)，因为它很容易按照 Caliburn.Micro 文档页面上的示例来实现。它还有一个非常引人注目的配置机制约定，并使用[Actions](http://caliburnmicro.codeplex.com/wikipage?title=All%20About%20Actions)系统从视图中调用视图模型上的动词（方法）。这比我见过的任何其他机制都更强大。

Prism 是一个相当重量级的框架，其中包括 MVVM 设计元素以帮助实现，并且特别针对构建复合应用程序（由托管外壳中的解耦组件构建的应用程序）进行定制。

MEF 对于需要发现应用程序的插件或扩展的这些类型的应用程序非常有用（即使在应用程序已引导之后），并且可以与 MVVM 框架（例如 Caliburn.Micro）一起使用。MEF 也可用于实现控制反转，但不提供其他控制反转容器中的一些核心功能，因此您可能决定仅使用它来实现插件功能。

Unity 是一个 IoC 容器，可用于为您的通用应用程序基础架构实现依赖注入。不过，.NET 空间中有很多 IoC 容器，其中一些提供了改进的性能、附加功能或更友好的 API。

我不知道 ReactiveUI，因为我没有使用它。

如果您正在谈论最大限度地重用代码以迁移到 WinRT，那么[MVVM 是一个不错的选择](http://www.lhotka.net/weblog/WhyMVVM.aspx)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-31T09:18:10.237

PRISM 已经包含 MEF 和 MVVM 逻辑 :)

好的，这里有一点解释：

MVVM 代表应用程序中的**逻辑。**实际上是 View、View-Model 和 Model 解耦的巧妙方法。不知道有什么最好的（？）框架来做到这一点 - 如果需要，您可以检查[Catel](http://catel.codeplex.com/)或[MVVM Light](http://mvvmlight.codeplex.com/)，但它只是来自了解 MVVM 逻辑并使其易于实现的人的大量代码。您实际上可以尝试编写自己的 MVVM 框架并看到“没有秘密成分” - 只是相同的重复代码和相同的类等......实际上您**不需要**任何 MVVM 框架来实现 MVVM。

一旦你学习并编写了 MVVM，你就会立即遇到问题——我如何以解耦的方式进行 NUnit 测试（例如，这在 Silverlight 中不是小问题）——所以这里所有的 IOC/Inject 框架都发挥了作用。例如 MEF。考虑以下示例以了解有关 Inject 框架的总体情况：

项目“共享”，用“最少分隔符”编写（例如便携式库）

```
 public interface IAmSharedInterface
    {
        string SayHello();
    } 
```

项目“主要”，仅参考“共享”项目

```
 public class IAmMainClass
    {
        [ImportingConstructor]
        public IAmMainClass(IAmSharedInterface SharedInterface)
        {
             SharedInterface.SayHello();
         }
    } 
```

项目“实施者”，仅参考“共享”项目

```
 [Export(IAmSharedInterface)]
   public class IAmImplementor: IAmSharedInterface
   {
       public string SayHello()
       {
          return "Hello from implementator class to whoever using it";
       }
    } 
```

你看 - “主要”和“实施者”项目之间没有直接引用 - 所有“魔法”都发生在 MEF/Unity 构建/解决过程中。因此，您可以轻松地在 Main 上运行 NUnit 测试，而无需使用“Implementor”项目和“Implementor”和“Main”。还有一种情况是其他项目可以专门为测试目的实现和导出“IAmSharedInterface”。

所以回到 PRISM - 它拥有所有（！）这个。我知道这**不是一个容易**理解的框架，它**不**适合简单的“Hello World”程序，但是一旦你学会了它——就没有回头路了。[它只是将所有部分粘合在一起，让您在使用任何您想要的最小起订量框架（例如Rhino](http://ayende.com/blog/tags/rhino-mocks)）时有很大的自由度。

Prism 在 Microsoft 中开发，因此（我希望）它不仅会在 Windows 8 中得到支持，而且会在 Windows 9 和所有未来版本中得到支持。

无论你问什么，它都在里面：MVVM、注入、解耦/插件，易于阅读和测试

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-07-02T08:23:13.730

为了节省添加到上面的详细信息，我将尝试让您的生活更轻松。

1) 现在，忘记 IOC / 依赖注入 / 插件架构。你说你正在创建一个简单的应用程序，所以暂时忘记这个。保持代码整洁，如有必要，您可以稍后实现（这是好东西）。

2) 在您列出的框架中，我建议使用 Caliburn.Micro。它相对简单且轻巧。启动和运行不会花很长时间。

3) 在单独的程序集中创建模型，您可以将其用于 Windows 应用程序和 MVC 网站。

保持简单，不要陷入所有技术的困境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-20T16:09:08.380

[此答案复制了Rockford Lhotka 的博客文章“**使用 MVVM 模式需要一个框架**”](http://www.lhotka.net/weblog/PermaLink,guid,c61fd797-16f7-4f5f-a6fc-226f235b132a.aspx)的一些删节块，该文章[在另一个答案](https://stackoverflow.com/a/10804759/3195477)中被引用。

这是对这个问题的一种元回答（尽管它确实包含一个具体的建议），但首先解释框架在 MVVM 中的作用似乎非常有用。

> 有三种相当流行的表示层设计模式，我统称为“M”模式：MVC、MVP 和 MVVM。这是因为它们都有一个代表“模型”的“M”，以及一些其他结构。
> 
> 所有这些“M”模式的问题在于，对于典型的开发人员来说，*如果没有框架，这些模式将毫无用处*。在没有框架的情况下使用模式几乎总是会导致混乱、复杂化、高成本、沮丧和最终绝望。
> 
> 毕竟这些只是模式，而不是实现。它们是大而复杂的模式，其中包含许多必须正确协同工作才能取得成功的概念。
> 
> ...
> 
> *尝试在没有框架的情况下执行 MVVM 之类的工作是一项巨大的工作*。大量重复代码，重新发明轮子，重新训练人们以不同的方式思考。
> 
> 至少有了一个框架，您可以避免重复代码，并且希望不必重新发明轮子——让您专注于再培训人员。再培训部分通常是不可避免的，但框架提供了管道代码和结构，使过程更容易。
> 
> 您可能会问自己，为什么 MVC 模式只是在几年前才在 ASP.NET 中流行起来......
> 
> 奇怪的是，当 ASP.NET MVC 出现时，MVC 才开始成为微软世界的主流。这是一个综合框架，工具集成到 Visual Studio 中。因此。典型的开发人员可以只构建模型、视图和控制器。在此之前，他们还必须构建 MVC 框架所做的一切——这需要大量代码。而且不仅仅是很多代码，而是*与业务价值完全无关*的代码，只与模式本身的实现有关。
> 
> ...
> 
> 典型的开发人员确实希望专注于构建模型、视图和视图模型。他们不想构建基于弱引用的事件路由器、导航模型、视图抽象以及框架必须做的所有其他事情。
> 
> ...
> 
> 与此同时，[Caliburn Micro](https://github.com/Caliburn-Micro/Caliburn.Micro)似乎是目前最好的 MVVM 框架——当然是使用最广泛的 [截至 2012 年]...

（出于保存原因，内嵌文本复制。）

# iphone - 使用 AudioQueue 服务播放有声读物（m4b 媒体格式）| 苹果手机

> ID：10799105
> 
> 赞同：0
> 
> 时间：2012-05-29T12:25:05.117
> 
> 标签：iphone, xcode, audioqueueservices

我正在开发一个 iPhone 应用程序来播放音乐。我正在使用 AudioQueue 服务来播放音频文件。应用程序正确播放所有媒体文件，但应用程序无法播放有声读物，我认为这是因为它们与我图书馆中的其他媒体项目 (mp3) 不同的媒体格式 (.m4b)。

我确定我需要更改如何初始化音频队列或 AVAssetReaderTrackOutput 以播放具有不同文件格式的媒体，但不确定如何。

谁能指出我正确的方向。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:15:26.030

我已经弄清楚了，问题不是因为媒体格式。我试图在我的应用程序中播放的有声读物受 DRM 保护，因此无法播放。

谢谢

# django - Django 1.4（MEDIA_ROOT、STATIC_ROOT、TEMPLATE_DIRS）

> ID：10799106
> 
> 赞同：5
> 
> 时间：2012-05-29T12:25:08.710
> 
> 标签：django

我有一个**Django 1.3**项目，在**settings.py中有这个选项**

> SITE_ROOT = os.path.dirname(os.path.realpath( **__*文件*__** ))
> 
> STATIC_ROOT = os.path.join(SITE_ROOT, 'static')
> 
> MEDIA_ROOT = os.path.join(SITE_ROOT, 'media')
> 
> TEMPLATE_DIRS = ( os.path.join(SITE_ROOT, 'templates'), )

但在**Django 1.4**中，默认情况下**settings.py**被移动到名称等于项目名称的子目录中。因为那个**static**，**media**和**templates**目录现在必须移动到同一个子目录中？

这是我必须做的，还是只是更改 STATIC_ROOT、MEDIA_ROOT 和 TEMPLATE_DIRS 选项？

我知道这两种变体都可以，但是在 Django 1.4 中对此的最佳实践是什么？

而且我知道每个应用程序都可以拥有自己的模板和静态目录。

将所有其他应用程序目录放在同一个子目录中会更好吗？这不是使用 manage.py startapp 默认发生的情况

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T14:35:20.603

好的，我遵循的方案是这样的：

`myproject/requirements.txt`- pip 可安装包

`myproject/deployment`- 部署东西，如服务器配置文件、固定装置（虚拟数据）等。

`myproject/docs` - 项目的文档

`myproject/tests` - 项目的测试

`myproject/myproject` - 项目的操作代码（和settings.py，urls.py）

*展开* `myproject/myproject`文件夹：

`myproject/myproject/app1` - 一个常规的应用程序（包括其特定的模板/静态文件）

`myproject/myproject/app2` - 另一个常规应用程序（同上）

`myproject/myproject/website`- 按照惯例，半特殊应用程序。

这个`website`应用程序基本上包含 4 件事：

1）一个空的`models.py`（这样django会认为它是一个有效的应用程序）

2) a`views.py`具有入口点`index`视图。也许其他一些不适合任何其他特定应用程序的视图。

3）具有适用于整个项目的`management`自定义[django 命令的目录。](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)

4)`templates`具有 404.html 和 505.html 的目录。它还有一个名为的子目录`website`，其中包括所有其他应用程序的通用/基本 html 模板`extends`，以及`index.html`.

5) 一个`static` 带有后续子目录的目录，名为`css`,`js`并`media`用于全局静态文件。

我猜没有什么异国情调。我认为大多数人都遵循类似的模式，但我想在这里指出任何效率低下的地方，如果有的话。

**编辑：** 关于生产 VS 开发的设置，我使用流行的 settings_local 模式，你可以[在这里](https://stackoverflow.com/questions/10285406/is-this-approach-to-django-multiple-settings-files-reasonable)阅读并最终引导你[到这里](https://code.djangoproject.com/wiki/SplitSettings#SimplePackageOrganizationforEnvironments)，它描述了一个更好的模式。

# z3 - 基于模型的量词实例化和分层排序片段

> ID：10799108
> 
> 赞同：1
> 
> 时间：2012-05-29T12:25:18.713
> 
> 标签：z3

Z3 的文档说基于模型的量词实例化（MBQI）：

> 分层排序片段
> 
> 统计排序片段是许多排序的一阶逻辑公式的另一个可判定片段。它对应于公式，当以 prenex 范式编写时，有一个从排序到自然的函数级别，并且对于每个函数
> 
> (declare-fun f (S_1 ... S_n) R)
> 
> 级别（R）<级别（S_i）。

Z3 是否支持 prenex 范式的任何公式，或者仅支持所有存在量词已被 skolemization 删除的通用公式？

这会使片段更具限制性，不是吗（因为 skolem 函数可能会破坏分层）？

（至少在关于 MBQI 的论文 [Complete instantiation for quantified SMT formulas, Yeting Ge 和 Leonardo de Moura, CAV 2009] 在我看来，似乎只涵盖了通用公式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:48:28.143

你是对的。`level(R) < level(S_i)`在所有存在量词都被 skolemization 删除之后，必须满足条件。Skolemization 可能会引入新的未解释的函数符号，它们也需要满足上述条件。

# objective-c - NSMutableArray 中的错误

> ID：10799111
> 
> 赞同：1
> 
> 时间：2012-05-29T12:25:25.153
> 
> 标签：objective-c, ios

我对 ios 开发非常陌生，我正在尝试从 to 添加一些值`NSMutableDictionary`，`NSMutableArray`当我运行代码时出现此错误

> 2012-05-29 14:09:34.913 iShop[7464:f803]-[__NSCFArray objectForKey:]: 无法识别的选择器发送到实例 0x6e423d0 2012-05-29 14:09:34.915 iShop[7464:f803] *** 由于应用程序终止未捕获的异常'NSInvalidArgumentException'，原因是： ' - [__ NSCFArray objectForKey：]：无法识别的选择发送到实例0x6e423d0' ***第一掷调用堆栈：（0x13cb022 0x155ccd6 0x13cccbd 0x1331ed0 0x1331cb2 0x2bb7 0x13cce42 0x93b9df 0x139f94f 0x1302b43 0x1302424 0x1301d84 0x1301c9b 0x12b47d8 0x12b488a 0x15626 0x28bd 0x2825）终止称为抛出异常（lldb）

下面是我的代码：

```
-(void) getData:(NSData *) response {
    NSError *error;

    NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error];
    //NSLog(@"%@", json);

    jsonArray = [[NSMutableArray alloc] init];

    jsonArray = [json objectForKey:@"Name"];

    NSLog(@"%@", jsonArray);

}

- (void)viewDidLoad {
    [super viewDidLoad];

    jsonURL = [NSURL URLWithString:@"http://localhost:8888/read_product_list.php"];
    dispatch_async(BgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL:jsonURL];
        [self performSelectorOnMainThread:@selector(getData:) 
                               withObject:data waitUntilDone:YES];
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:32:40.767

`JSONObjectWithData`返回一个类型的对象`id`。取决于您收到的 json 数据的结构。接收到的数据是 eiher`NSDictionary`或`NSArray`。在您的情况下，我猜测顶级对象的类型`NSArray`不响应`objectForKey`

# jquery - 服务器上的信号器时间滞后，在本地完美运行

> ID：10799112
> 
> 赞同：0
> 
> 时间：2012-05-29T12:25:26.413
> 
> 标签：jquery, asp.net, asp.net-mvc-3, signalr

我正面临 SignalR 库的一个独特问题。我正在将此库用于在线一分钱拍卖门户。

当我向所有连接的用户广播投标人名称和最高投标人数量时，我会遇到时间延迟。

但是，相同的代码在本地服务器上运行良好。没有时间滞后。

据我了解，目前数据库中只有 100 个拍卖，将最新的投标金额和用户名广播给所有用户并确保连接的用户能够看到更新的最新投标金额和投标人姓名。

有时我看到这在服务器上有效，但是当我尝试更改浏览器的选项卡（我正在使用谷歌浏览器）并等待几秒钟时，我遇到了这个时间延迟。

```
 var context = new PetaPoco.Database("DataContext");
        context.Execute("EXEC udsp_TimerUpdate");

        IConnectionManager connectionManager = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
        dynamic clients = connectionManager.GetClients<Chat>();
        clients.gettime();

        var tmr = context.Query<CurrentBids>(";EXEC udsp_CurrentBidsEndBids;").ToList();
        if (tmr != null)
        {
            foreach (var t in tmr)
            {
                ////Put code here for Shopping Cart                                                               
                context.Execute(";EXEC udsp_AddToCart @0, @1", t.AuctionId, t.BidderName);
                clients.sold("00:00:00", Int32.Parse(t.AuctionId.ToString()), t.BidderName, t.BidAmount);
            }
        }
        var autbid = context.Query<CurrentBids>(";EXEC udsp_CurrentBidsAuto;").ToList();
        Random rand = new Random();
        foreach (var auct in autbid)
        {
            var splt = auct.Timer.Split(':');
            if (rand.Next(2, int.Parse(splt[2]) + 1) == int.Parse(splt[2]))
            {
                Chat.AutoBids(auct.AuctionId);
            }
        } 
```

# mysql - 如何在 Perl、DBI 中显示查询时间？

> ID：10799114
> 
> 赞同：8
> 
> 时间：2012-05-29T12:25:32.813
> 
> 标签：mysql, perl, dbi

我使用 Perl 和 DBI 来管理我的 MySQL 表、查询等。如何显示查询的运行时间？

如果我在控制台中执行 SELECT，结果将是这样的：

```
+-----+-------------+
| id  | name        |
+-----+--------------
|   1 | Jack        |
|   2 | Joe         |
|   3 | Mary        |
+-----+-------------+
3 rows in set (0.17 sec) 
```

我需要展示`0.17 sec`。DBI 中有什么方法可以在 Perl 中显示运行时间，像这样？

```
my $dbh = $db->prepare("SELECT id, name FROM names ORDER BY id;");
$dbh->execute;
print $dbh->runnin_time; # ??? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:29:12.167

在运行查询之前获取时间戳，然后在之后获取时间戳。不同之处在于您的查询执行时间。如需获取高分辨率时间戳，请参阅[Time::HiRes](https://metacpan.org/pod/Time::HiRes)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T15:26:35.587

[DBI#Profile](http://p3rl.org/DBI#Profile) , [DBI::Profile](http://p3rl.org/DBI::Profile) , [DBI::ProfileData](http://p3rl.org/DBI::ProfileData) , [DBI::ProfileDumper](http://p3rl.org/DBI::ProfileDumper) , [dbiprof](http://p3rl.org/dbiprof)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T13:20:26.643

我在 DBI 中找不到任何东西。我认为目前还没有开箱即用的实现，尽管可能是有趣的信息。

另一种方法是获取执行前后的时间，然后做一个简单的区别。您可以在 Perl 脚本中执行此操作，只需在查询执行之前和之后获取时间戳，然后将两者相减即可找到执行时间。

```
my $start = DateTime->now;
my $dbh = $db->prepare("SELECT id, name FROM names ORDER BY id;");
$dbh->execute;
my $end = DateTime->now;

my $elapsedtime = ($end->subtract_datetime($start))->seconds;
print "Execution time(seconds) : $elapsedtime \n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-21T12:01:54.277

阅读@daxim 的文档链接，有一种简单的方法可以通过运行`DBI_PROFILE=2`来自[DBI::Profile的脚本来实现这一点](https://metacpan.org/pod/DBI::Profile)

示例输出：

```
DBI::Profile: 53.203692s 50.67% (6725 calls) script.pl @ 2016-01-21 11:51:49
'INSERT INTO FOO ("BAR") VALUES (?)' =>
    0.057596s / 2 = 0.028798s avg (first 0.051621s, min 0.005975s, max 0.051621s)
'INSERT INTO BAZ ("QUX") VALUES (?)' =>
    0.367184s / 44 = 0.008345s avg (first 0.039410s, min 0.002445s, max 0.039410s) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-11-26T13:23:12.000

使用 Time::HiRes 也可以是一种查找查询时间的简单方法。这是一个使用 Time::HiRes 的示例：

```
use Time::HiRes;

$start_time = Time::HiRes::gettimeofday();

my $dbh = $db->prepare("SELECT id, name FROM names ORDER BY id;");
$dbh->execute;

$end_time = Time::HiRes::gettimeofday();

my $elapsedtime = sprintf("%.6f", $end_time - $start_time);
print "Execution time(seconds) : $elapsedtime \n"; 
```

# java - Netty 消息优先级

> ID：10799117
> 
> 赞同：1
> 
> 时间：2012-05-29T12:25:34.330
> 
> 标签：java, netty

Netty 中是否有任何嵌入的优先级机制可以帮助我确定哪些消息比其他消息更频繁地发送？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T11:04:27.583

您可以使用[BufferedWriteHandler](http://netty.io/docs/stable/api/org/jboss/netty/handler/queue/BufferedWriteHandler.html)对写入进行优先级排序，这需要使用未绑定的优先级队列来实现。引用 JavaDocs：

> 您可以通过在此处理程序的构造函数中指定无界优先级队列来实现优先写入。需要设计适当的策略来确定应多久调用一次 flush()。例如，您可以定期调用 flush()，每秒使用 [HashedWheelTimer](http://netty.io/docs/stable/api/org/jboss/netty/util/HashedWheelTimer.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:38:20.027

否.. 消息按照写入通道的顺序发送。你到底想做什么？

# blackberry - 在 BlackBerry 中对字符串数组进行排序

> ID：10799119
> 
> 赞同：1
> 
> 时间：2012-05-29T12:25:42.450
> 
> 标签：blackberry, blackberry-jde

`String`我需要按升序对以下数组进行排序。

```
String str[] = {"ASE", "LSM", "BSE", "LKCSE", "DFM"}; 
```

怎么做？我需要帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T17:45:19.167

此答案基于[Signare](https://stackoverflow.com/users/896391/)和[HeartBeat](https://stackoverflow.com/users/952526/)的建议。浏览此[链接](http://www.blackberry.com/developers/docs/3.7api/net/rim/device/api/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20net.rim.device.api.util.Comparator%29)了解详情。另外这个链接，[使用 java.util.Array 排序](http://www.drbob42.com/jbuilder/jbjar058.htm)可能会有所帮助。

```
// Initialization of String array 
String strs[] = {"One", "Two", "Threee", "Four", "Five", "Six", "Seven"};

// implementation of Comparator
Comparator strComparator = new Comparator() {
    public int compare(Object o1, Object o2) {
        return o1.toString().compareTo(o2.toString());
    }
};

// Sort
Arrays.sort(strs, strComparator); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T09:32:22.367

Here is my solution:-

```
String str[]={"ASE","LSM","BSE","LKCSE","DFM"};

for(int j = 0; j < str.length; j++){
               for(int i = j + 1; i < str.length; i++) {
                   if(str[i].compareTo(str[j]) < 0) {
                       String t = str[j];
                       str[j] = str[i];
                       str[i] = t;
                   }
               }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:32:52.580

尝试这个 -

```
import java.util.*;
import java.io.*;

public class TestSort1 {

String [] words = { "Réal", "Real", "Raoul", "Rico" };

 public static void main(String args[]) throws Exception {
    try {
  Writer w = getWriter();
  w.write("Before :\n");

  for (String s : words) {
    w.write(s + " ");
  }

  java.util.Arrays.sort(words);

  w.write("\nAfter :\n");
  for (String s : words) {
    w.write(s + " ");
  }
  w.flush();
  w.close();
}
catch(Exception e){
  e.printStackTrace();
}

 }

// useful to output accentued characters to the console
  public static Writer getWriter() throws UnsupportedEncodingException {
    if (System.console() == null) {
      Writer w =
        new BufferedWriter
         (new OutputStreamWriter(System.out, "Cp850"));
      return w;
    }
    else {
      return System.console().writer();
    }
  }
} 
```

# jquery - jquery条件按钮

> ID：10799121
> 
> 赞同：0
> 
> 时间：2012-05-29T12:25:59.580
> 
> 标签：jquery, conditional, if-statement

我有一个按钮，如果从数据库中检索的值是空白的，我需要应用一个类。我认为以下代码中的语法有问题：

```
$(document).ready(function(e) {
    var videoURL = '<?php echo $row_rs_dealItem['video']; ?>';
    if ($videoURL == "") {
        $('#video').addClass('invisible');
    }
    else {
        $('#video').click(function(e) {
            $('#imageMain').html('<iframe class="youtube-player" type="text/html" width="435" height="244" src="' + videoURL + '" frameborder="0"></iframe>');
            $('.featuredOverlay').hide();
        });
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:29:03.170

不应该是 if(videoURL == "")，您已经添加了美元符号，它是“这是一个 jQuery 封装对象”的 jquery 约定，但不存在这样的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:28:54.153

如果有一个现有的类，您需要先使用 removeClass 或尝试 toggleClass。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:29:24.340

您将变量声明为“videoURL”

```
var videoURL 
```

然后您尝试在“videoURL”之前与 $ 进行比较

```
if ($videoURL == "") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-13T23:34:14.770

videoURL 不是 jQuery 元素，因此，将 $videoURL 更改为 videoURL。

尝试强制 php 内容或使用 console.log 来调试您的数据

```
var videoURL = "a string";
console.log(videoURL); 
```

[https://jsfiddle.net/ex3ntia/qmemmkp4/1/](https://jsfiddle.net/ex3ntia/qmemmkp4/1/)

# multithreading - QProcess 错误状态 5 的原因是什么？

> ID：10799130
> 
> 赞同：1
> 
> 时间：2012-05-29T12:26:43.063
> 
> 标签：multithreading, qt, qprocess

我有多个线程运行以下 QProcess。它们随机失败，错误状态为 5。Qt 文档没有提供更多详细信息。有谁知道该错误可能来自什么？非常感谢你。

```
extCmd = new QProcess(this);

QString cmd = "/usr/bin/php";
QStringList argStr;
argStr << "/bin/sleep" << "10"; // changed to ever working command
extCmd->start(cmd, args);
bool suc = extCmd->waitForFinished(-1);
if (!suc) {
   qDebug() << "finishing failed error=" 
            << extCmd.error() 
            << extCmd.errorString();
} 
```

给我输出：

```
finishing failed error= 5 "Unknown error" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:59:28.700

与您的问题相切的事实是您*不*应该为每个进程启动一个线程。QProcess 完成后会发出一个`finished(int code, QProcess::ExitStatus status)`信号。它还将分别在成功和不成功的启动时发出`started()`和。`error()`将所有这三个信号连接到 QObject 中的一个槽，然后启动该过程，并处理槽中的结果。您不需要任何额外的线程。

如果你得到一个`started()`信号，那么你可以确定进程的文件名是正确的，并且进程已经启动。无论您从中获得什么退出代码，`finished(int)`都表明该进程做了什么，也许是为了响应您可能传递给它的潜在无效参数。如果您收到`error()`信号，则该进程无法启动，因为您给 的文件名错误`QProcess::start()`，或者您没有正确的权限。

您不应该编写异步发生的同步代码。同步代码是阻止特定事情发生的代码，例如调用`waitForCmdFinished`. 我希望有一个 Qt 配置标志来禁用所有那些剩余的同步阻塞 API，就像有一个标志来禁用/启用 Qt 3 支持 API 一样。这些阻塞 API 的可用性促进了像上面的代码这样的可怕黑客攻击。恕我直言，默认情况下应禁用这些 API。就像应该有一个将 QThread 和派生类移动到另一个线程的测试一样。在我能找到的每个公开代码示例中，这也是糟糕设计的标志，我进行了相当彻底的搜索以说服自己我没有疯或什么的。

我记得 Qt 中方法的唯一合理用途`waitxxx`是等待 QThread 完成。即使这样，也只能从 内部调用`~QThread`，以防止 QThread 在线程仍在运行的情况下被破坏。

# ruby - 直接在 Nokogiri 中的标签内获取文本

> ID：10799136
> 
> 赞同：18
> 
> 时间：2012-05-29T12:27:03.263
> 
> 标签：ruby, nokogiri

我有一些看起来像这样的 HTML：

```
<dt>
  <a href="#">Hello</a>
  (2009)
</dt> 
```

我已经将所有 HTML 加载到一个名为`record`. 如果存在，我需要解析出年份，即 2009 年。

如何获取标签内的`dt`文本而不是标签内的文本`a`？我用过`record.search("dt").inner_text`，这给了我一切。

这是一个微不足道的问题，但我还没有设法弄清楚。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T12:53:37.140

要获取所有带有文本的直接子级，但不获取任何其他子级，您可以使用 XPath，如下所示：

```
doc.xpath('//dt/text()') 
```

或者，如果您想使用搜索：

```
doc.search('dt').xpath('text()') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T21:49:06.663

使用 XPath 准确选择您想要的内容（如 @Casper 所建议的那样）是正确的答案。

```
def own_text(node)
  # Find the content of all child text nodes and join them together
  node.xpath('text()').text
end 
```

这是另一个有趣的答案:)

```
def own_text(node)
  node.clone(1).tap{ |copy| copy.element_children.remove }.text
end 
```

在行动中看到：

```
require 'nokogiri'
root = Nokogiri.XML('<r>hi <a>BOO</a> there</r>').root
puts root.text       #=> hi BOO there
puts own_text(root)  #=> hi  there 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-29T12:46:47.467

该`dt`元素有两个子元素，因此您可以通过以下方式访问它：

```
doc.search("dt").children.last.text 
```

# javascript - 标记上的单击事件处理程序未在 iPhone Google Maps 版本 3 JavaScript 中触发

> ID：10799141
> 
> 赞同：4
> 
> 时间：2012-05-29T12:27:18.303
> 
> 标签：javascript, iphone, web-applications, google-maps-api-3, web

我想`InfoWindow`使用 Google Maps API 版本 3 打开单击标记。

我在用：

```
google.maps.event.addListener(marker, 'click', function() {      
    infowindow.open(map,marker);
}); 
```

此代码在 BlackBerry 和 Android 上运行良好，但不适用于 iPhone。

当我使用 Google 文档示例打开`InfoWindow`. 示例参考：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max](https://google-developers.appspot.com/maps/documentation/javascript/examples/infowindow-simple-max)

上面的 URL 在 Android 和 BlackBerry 用户代理上可以正常工作，但当用户代理是 iPhone 时就不行。

# hadoop - Hadoop mapreduce getMapOutput 失败

> ID：10799143
> 
> 赞同：0
> 
> 时间：2012-05-29T12:27:21.647
> 
> 标签：hadoop, mapreduce

当前设置：
- Hadoop 0.20.2-cdh3u3
- Hbase 版本 0.90.4-cdh3u3
- Jetty-6.1.14
- 在 VM 上运行（Debian Squeeze）

在 Hbase 表的 mapreduce 过程中出现问题。在 Reduce 阶段，它每次在 tasktracker.log 中的这些日志的同一点崩溃：

```
ERROR org.apache.hadoop.mapred.TaskTracker: getMapOutput(attempt_201205290717_0001_m_000010_0,3) failed:
org.mortbay.jetty.EofException

WARN org.mortbay.log: Committed before 410 getMapOutput(attempt_201205290717_0001_m_000010_0,3) failed :
org.mortbay.jetty.EofException

ERROR org.mortbay.log: /mapOutput
java.lang.IllegalStateException: Committed 
```

希望任何人以前遇到过相同或相似的问题，寻找解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:55:50.653

我在这里面临同样的问题。

在我的集群上，这发生在除一个之外的所有从属服务器（datanode 和 tasttrackers）上，这导致一般减少过程首先进展非常缓慢，并且由于某些错误，在某个时间点重新滚动到目前为止的减少进度。然后reduce过程重新开始：工作永远不会完成。

bugtracker 中有一个未解决的主要问题。请参阅[https://issues.apache.org/jira/browse/MAPREDUCE-5](https://issues.apache.org/jira/browse/MAPREDUCE-5)

让我们希望，有一天它会被修复，但此刻，我根本无法使用大于 3 GB 的大文件的 hadoop 程序。就我而言，我希望，我可以通过额外的数据清理和更有效的数据结构（trove、fastutils）来修复它，所以问题根本不会发生，但老实说，这感觉有点像这里的错误方法。无论如何，不​​做那些较小的调整是从 hadoop 开始的主要原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T19:29:51.510

`EOFException`当 reduce 任务过早关闭与码头服务器的连接时，会观察到码头。重新启动任务跟踪器并再次运行作业。看看它是否适合你。

# extjs4 - extjs中表单面板中的网格

> ID：10799147
> 
> 赞同：0
> 
> 时间：2012-05-29T12:27:33.653
> 
> 标签：extjs4

我在附件中的表格中有一个网格。当客户名称更改时，网格存储会加载与客户对应的记录。我想将网格值与表单值一起发布！如何才能做到这一点？

图片在[这里找到](http://www.sencha.com/forum/showthread.php?210737-Grid-in-a-form)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:17:19.977

我假设您没有`autoSync: true`网格商店。要保存所有脏记录，您需要调用`store.sync()`

# php - 在 symfony 中执行 crons

> ID：10799148
> 
> 赞同：0
> 
> 时间：2012-05-29T12:27:34.653
> 
> 标签：php, symfony1, symfony-1.4

我想在 symfony（版本 1.4.8）中执行一个 cron。

我正在尝试通过命令使用任务：`php symfony generate:task taskName`。

通过这个生成的任务存储在`lib/task`目录中，它可以访问我所有的外部“lib”文件。我还希望我的其他 lib 文件夹，即应用程序中存在的库也可以在此任务中访问。我怎样才能做到这一点？

我们什么时候`$namespace`将任务设置为“项目”和“应用程序”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:29:46.860

您可以在 crontab 中使用以下内容

```
/usr/bin/php /var/www/yourproject/symfony namespace:task --param=value 
```

您将需要更改`/usr/bin/php`以匹配 PHP 可执行文件的路径并`/var/www/yourproject`匹配您的项目目录

`namespace`and`task`应该是您在任务中配置的任何内容：

```
$this->namespace = 'mynamespace';
$this->name = 'mytaskname'; 
```

例如，这里的命名空间是`mynamespace`，任务名是`mytaskname`

以下是默认`autoload.yml`显示哪些文件是默认自动加载的内容：

```
autoload:
  # project
  project:
    name:           project
    path:           %SF_LIB_DIR%
    recursive:      true
    exclude:        [model, symfony, vendor]

  project_model:
    name:           project model
    path:           %SF_LIB_DIR%/model
    recursive:      true

  # application
  application:
    name:           application
    path:           %SF_APP_LIB_DIR%
    recursive:      true

  modules:
    name:           module
    path:           %SF_APP_DIR%/modules/*/lib
    prefix:         1
    recursive:      true 
```

# c - 在 fopen 中使用 arg 向量

> ID：10799153
> 
> 赞同：2
> 
> 时间：2012-05-29T12:27:44.840
> 
> 标签：c, file-io

我希望有一个文件名作为 C 程序的参数。我尝试了所有可能的方法，`fopen`如下所示。

```
fp = fopen(*argv[2], "r"); 
```

也用过`"*argv[2]"`但没用。我想知道我哪里出错了，以便我可以正确使用它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:29:55.583

它应该是

```
fp = fopen(argv[2], "r"); 
```

请注意，`argv[0]`它将包含您的 exe 名称（带路径），您传递的其他参数将从`argv[1]`.

有关在 C 中使用命令行参数的更多详细信息，请参阅[此内容。](http://www.cprogramming.com/tutorial/c/lesson14.html)

在您的主函数中，如果您将`char **argv`其作为参数，则数组下标`argv[1]`会自动将其转换`char *`为 fopen 预期的参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:30:01.640

```
fp = fopen(argv[2], "r" ) 
```

足够

argv 是一个字符指针数组。索引此数组可为您提供在命令行上传递的字符串。您不需要进一步取消引用`*`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:30:21.527

[fopen](http://linux.die.net/man/3/fopen)将 char* 作为文件名的参数：

> 文件 *fopen(const char *path, const char *mode);

你只需要像这样使用它：

```
fp = fopen(argv[2], "r"); // if 2nd argument passed is your filename 
```

# jquery - jQuery Tokeninput 将 ID 和第二个 Value 的组合保存为内部 ID

> ID：10799159
> 
> 赞同：1
> 
> 时间：2012-05-29T12:27:55.027
> 
> 标签：jquery, jquery-tokeninput

我得到一个这样的 JSON 数组：

```
[{"type":"user","id":"12","name":"Name of User"},{"type":"group","id":"9","name":"Name of UserGroup"}] 
```

后端返回一个带有名称、ID 和类型（用户或组）的 JSON 数组。

在输入到输入字段之前，有什么方法可以操作 id，例如

```
 type+"_"+id 
```

?

实际上，我正在使用它来初始化 tokenInput：

```
$("input#id").tokenInput(apiURL+"search.php", {
                defaultValue:"User or User Group",
                hintText:"Fill in User or User Group name.",
                noResultsText:"nothing found.",
                searchingText:"Searching...",
                queryParam:"search",
                crossDomain:false,
                tokenLimit:5,
                preventDuplicates:true,
                minChars:3,
                resultsFormatter:function(item) {
                    return "<li><img src="+((item.type=="user") ? "contact" : "contact_group")+ ".png\"/>"+item.name+"</li>";
                }
            }); 
```

* * *

在 Rory McCrossan 的帮助下，我成功了。将 id 更改为 resultsFormatter 方法即可：

```
resultsFormatter:function(item) {
     if (item.id.indexOf("_") == -1)
     {
           item.id = item.type+"_"+item.id;
     }

     return "<li><img src="+((item.type=="user") ? "contact" : "contact_group")+ ".png\"/>"+item.name+"</li>"; 
```

}

“if (item.id.indexOf (...))” 是必要的，因为 tokenInput 会匹配条目，如果您搜索相同的字符串，则 id 已经具有 type+“_” 前缀并且会得到它第二次/第三次/……时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:32:27.633

试试这个：

```
resultsFormatter: function(item) {
    var itemId = item.type + "_" + item.id;
    return "<li id='" + itemId + "'><img src="+((item.type=="user") ? "contact" : "contact_group")+ ".png\"/>"+item.name+"</li>";
} 
```

# c++ - 从地图中删除所有指向已删除对象的条目

> ID：10799160
> 
> 赞同：2
> 
> 时间：2012-05-29T12:28:06.233
> 
> 标签：c++, pointers, map

所以这是我正在处理的代码：

```
class A
{
public:
    A(){}
    virtual ~A(){}
    void Log(){printf("Log A\n");}
};

int main(int argc, char**argv) 
{
    A* a = new A();

    a->Log(); // "Log A"

    map<int,A*> m;
    m[1] = a;
    m[2] = a;
    m[3] = a;

    m[1]->Log(); // "Log A"

    delete a;
    a = NULL;

    m[1]->Log(); // "Log A"

    return 0;
} 
```

输出：

> 日志 A
> 日志 A
> 日志 A

我的问题：

1.  `m[1]->Log()`调用之后不会抛出异常只是偶然`delete a`吗？
2.  擦除映射中指向已删除实例的所有条目的最佳方法是`A`什么？我的意思是我要全部`m.find(1)`，`m.find(2)`并在删除后`m.find(3)`返回。任何意见，将不胜感激。`m.end()``a`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:30:08.627

1.  是和不是。从技术上讲，这是**未定义的行为**，但*通常*（不要依赖于此）调用不访问成员的非虚拟方法似乎适用于大多数编译器，因为大多数编译器在没有取消引用的情况下实现此调用`this`（这是无效部分）。因此，在标准看来，这是偶然的。对于大多数编译器来说，这是有意的（或者至少是处理函数调用的副作用）。

2.  请改用智能指针。要删除元素，您可以遍历地图并将每个值与您的值进行比较。当你达到一个时，使用`erase`.~~迭代器在擦除后失效。~~

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T12:33:43.990

1.  取消引用已删除对象时发生的任何事情都是未定义的行为，因此即使出现异常也可能被视为“偶然”

2.  ~~最好的方法是将删除指向的对象与您所处理的对象的生命周期结合起来。因此，在您的情况下，您可以决定如果从地图中删除指针，则最好删除对象。为此，您可以使用 int 映射`std::unique_ptr<A>`而不是原始指针之一。~~

**编辑**：在更详细地查看要求后：

现在，由于您要删除其映射类型指向已删除对象的元素，并且无法确定指针指向的内存是否已被删除，因此除了执行以下操作之外，我看不到从映射中删除这些条目的简单方法这一切都在一个函数调用中。而且由于`std::map`等人不喜欢`std::remove_if`，因此可以使用循环：

```
template <typename T1, typename T2>
void removeEntriesAndDelete(std::map<T1, T2*>& m, T2*& item) {
  for (auto i = m.begin(); i != m.end(); ) {
    if ( item == i->second) {
      m.erase(i++);
    } else {
      ++i;
    }
  }
  delete item;
  item=0;
} 

int main() {

  A* a = new A;
  std::map<int,A*> m;
  m[1] = a;
  m[2] = a;
  m[3] = a;
  std::cout << std::boolalpha;
  std::cout << a << ", " << bool(m[1]) << ", " << bool(m[2]) << ", " << bool(m[3]) <<"\n";

  removeEntriesandDelete(m, a);
 std::cout << a << ", " << bool(m[1]) << ", " << bool(m[2]) << ", " << bool(m[3]) <<"\n";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T13:46:58.313

通常，在某处登记的对象必须通知它们登记的对象。在像您的示例代码这样的简单情况下，浏览地图相对简单，擦除指向您的对象的每个元素，但我假设您的实际用例不那么琐碎。通常的解决方案（事实上，唯一在实践中真正有效的解决方案）涉及观察者模式；当一个对象直接或在地图或列表或其他任何内容中保存指向您的对象的指针时，它也会与您的对象一起注册，当您的对象被破坏时请求通知。您的对象保留了这些观察者的列表，并将在其析构函数中通知它们。应用于像您这样的简单案例，它看起来像很多不必要的代码，但在出现这种模式的实际应用程序的上下文中，它并没有那么多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:32:26.377

正如你提到的，它靠运气起作用。

要么使用前面提到的智能指针之类的东西，要么将映射和值处理封装在一个类中，在那里你可以有一个从映射中删除对象**并**删除对象的方法。

# javascript - 将函数的 javascript 返回值存储到服务器端的相应 Asp Control OnClick 事件

> ID：10799163
> 
> 赞同：0
> 
> 时间：2012-05-29T12:28:18.677
> 
> 标签：javascript, asp.net

```
<asp:Button ID="Button1" runat="server" Text="Lunch" CausesValidation="false" 
    CssClass="bigbuttons" 
    style="background:url(../App_Themes/Images/green-box.gif)" 
    Font-Bold="True"  ForeColor="White" Font-Size="Large" 
    OnClientClick="openmodalWin(); return false;"  />
<br /> 
```

javascript

```
function openmodalWin() {
        var CloseTImeOfPopUp = window.showModalDialog("ClockPopUP.aspx", "Clock", 
                                  "dialogWidth:550px;dialogHeight:350px,");
} 
```

如您所见，我在 ButtonClick 事件上调用了 javascript 函数“openmodalWin”。我检查了该函数是否成功返回 CloseTimeofPopUp 并且我能够通过`Alert()`.

*[版主编辑：我希望将该函数的返回值发送到服务器，以便我可以将其存储在数据库中？]* ~~我想要来自 javascript 函数的返回值，我可以存储在同一个服务器端代码上，即 Button1_OnClick () 事件，然后我可以将其存储到数据库中。~~

请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:31:55.213

您可以`CloseTimeOfPopUp`在隐藏变量（使用 runat="server" 定义）中设置 的值，然后您可以在后面的代码中访问它。

在 aspx 页面中，您可以执行以下操作：

```
<input type="hidden" runat="server" id="hidden1" /> 
```

在 JavaScript 中

```
function openmodalWin() {
        var CloseTImeOfPopUp = window.showModalDialog("ClockPopUP.aspx", "Clock", "dialogWidth:550px;dialogHeight:350px,");
        document.getElementById('hidden1').value = CloseTImeOfPopUp;
        } 
```

在 C# 后面的代码中

```
var myVal = hidden1.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:38:56.583

除了
您使用 showModalDialog 打开的页面中的 Habib.OSU 之外，您还应该返回这样的值...
模态对话框页面中的 javascript：

```
function ReturnVal(valToReturn) {
        window.returnValue = valToReturn;
        window.close();
    } 
```

# iphone - iPhone解析xhtml + css

> ID：10799164
> 
> 赞同：0
> 
> 时间：2012-05-29T12:28:24.887
> 
> 标签：iphone, objective-c, css, xhtml, html-parsing

我有一个复杂的长 XHTML 文件，其中包含 CSS。在谷歌和这个网站上搜索，我发现了一些对 XHTML 解析有用的库：

*   NSXML解析器
*   TBXML
*   还有一些其他的

但是，我想知道是否有任何 iPhone 库可以将 xhtml + css 文档转换为`NSAttributedString`（当然只有文本）。

我一直在思考这个问题，也有过一些想法，但我觉得效率不会很高。我的主要思想是由以下步骤形成的：

*   在 XTHML 文件上检测所有带有`id`or`class`属性的标签，并获取它们有效的字符串范围（我无法实现这一点）。
*   将所有 CSS 属性保存在 a 上`NSDictionary`，其中包含更多`NSDictionary`对象。像这样的东西：

    ```
    mainDict {
        object: dictionary {
             object: @"#00ff00"
             key: @"color"
             object: @"1em"
             key: @"font-size"
        }
        key: @"a id"
        object: anotherDictionary {
            ...
        }
        key: @"another id"
    } 
    ```

*   在属性字典上转换这些 CSS 属性`NSAttributedString`字典。

我知道这很复杂，我不需要你提供代码（当然，如果你提供它会很棒），**我只想要一个库的链接，或者，如果它不存在，一些关于自己创建解析器的建议。**

当然，如果您需要更多信息，请通过评论询问。

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T10:36:19.853

It depends on your needs if this will do what you want, but [DTCoreText](https://github.com/Cocoanetics/DTCoreText) has an HTML -> NSAttributedString converter. It's very specific for what DTCoreText wants to / needs to do, but it might at least point you in the right direction.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:14:58.873

我将 HTML 字符串解析为 NSAttributedString 的方法是将解析后的节点（及其子节点）递归地追加到 NSMutableAttributedString 中。

我还没有准备好在任何地方发布我的完整代码。但希望这可以给你一些提示......

> NSString+HTML.h

```
/*  - toHTMLElements
 *  parse the string itself into a dictionary collection of htmlelements for following keys
 *  : @"attributedString"   // html main body
 *  : @"insets"         // images and/or videos with range info
 *  : @"as"             // href with range info
 *  
 */

- (NSMutableDictionary*) toHTMLElements; 
```

> NSString+HTML.m

```
- (NSMutableDictionary*) toHTMLElements {

    // …
    // handle escape encoding here
    // assume that NSString* htmlString is the processed string;
    // …

    NSMutableDictionary * htmlElements = [[NSMutableDictionary dictionary] retain];

    NSMutableAttributedString * attributedString = [[[NSMutableAttributedString alloc] init] autorelease];
    NSMutableArray * insets = [NSMutableArray array];
    NSMutableArray * as     = [NSMutableArray array];

    [htmlElements setObject:attributedString forKey:HTML_ATTRIBUTEDSTRING];
    [htmlElements setObject:insets forKey:HTML_INSETS];
    [htmlElements setObject:as forKey:HTML_AS];

    // parse the HTML with an XML parser
    // CXXML is a variance of TBXML (http://www.tbxml.co.uk/ ) which can handle the inline tags such as <span>
    // code not available to public yet, so write your own inline-tag-enabled HTML/XML parser.

    CXXML * xml = [CXXML tbxmlWithXMLString:htmlString];
    TBXMLElement * root = xml.rootXMLElement;

    TBXMLElement * next = root->firstChild;

    while (next != nil) {
        //
        // do something here for special treatments if needed
        //
        NSString * tagName = [CXXML elementName:next];

        [self appendXMLElement:next withAttributes:[HTMLElementAttributes defaultAttributesFor:tagName] toHTMLElements:htmlElements];

        next = next->nextSibling;
    }

    return [htmlElements autorelease];
}

- (void) appendXMLElement:(TBXMLElement*)aElement withAttributes:(NSDictionary*)parentAttributes toHTMLElements:(NSMutableDictionary*) htmlElements {

    // do your parse of aElement and its attribute values, 
    // assume NSString * tagAttrString is the parsed html attribute string (either from "style" attribute or css file) for this tag like : width:200px; color:#123456; 
    // let an external HTMLElementAttributes class to handle the attribute updates from the parent node's attributes

    NSDictionary * tagAttr = [HTMLElementAttributes updateAttributes: parentAttributes withCSSAttributes:tagAttrString];

    // create your NSAttributedString styled by tagAttr
    // create insets such as images / videos or hyper links objects
    // then update the htmlElements for storage

    // once this tag is handled, recursively visit and process the current tag's children

    TBXMLElement * nextChild = aElement->firstChild;

    while (nextChild != nil) {
        [self appendXMLElement:nextChild withAttributes:tagAttr toHTMLElements:htmlElements];
        nextChild = nextChild->nextSibling;
    }
} 
```

# java - 让 SSL 对 localhost 感到满意

> ID：10799170
> 
> 赞同：2
> 
> 时间：2012-05-29T12:29:08.070
> 
> 标签：java, security, ssl

我有一个在客户端机器上运行的 java 应用程序，它接收来自 Web 应用程序的 ajax 请求。其中一些想要使用该服务的 Web 应用程序仅在 https 下提供。

我的 java 应用程序现在可以很好地接受和处理 SSL 请求，但我必须首先在浏览器中导航到服务器并接受证书。

将“真正的证书”安装为这个监听的 Java 应用程序的一部分的最佳方法是什么`https://localhost:my_port`？

在 Windows 上，似乎我可以让安装程序将自签名证书添加到机器接受列表中。我还考虑过获得经过验证的证书`thisApp.myDomain.com`，然后更改主机文件以将该地址指向`127.0.0.1`，但更改主机文件似乎是恶意的，我担心会被防病毒软件接收。

“主”应用程序是一个基于网络的系统。这个基于网络的系统的一些用户希望能够打印到指定计算机上的特殊打印机。Java 应用程序将安装在这些计算机上，然后 Web 应用程序将 ajax 请求发送到与打印机交互的 Java 应用程序。最终用户需要能够使用简单的一键式安装程序来安装此 java 服务。Web 应用程序是从进行打印的机器上的浏览器运行的，因此是 localhost。

如前所述，Web 应用程序需要通过 https 连接到 Web 服务器（当前位于亚马逊）。除了 Chrome 抱怨不安全的内容之外，与 localhost 打印服务器的连接不需要是 https，而 chrome 目前是我们用户使用最广泛的浏览器。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:54:36.710

如果通过“真实”证书，您的意思是由受信任的 CA 签名的证书，那么我认为答案是您可能不能。我认为受信任的 CA 不会为您签发一份。

我上面链接的答案建议您通过获取 CA 证书来设置自己的 CA。其他选择是 127.0.0.1 的自签名证书，或调整您的 DNS 解析（例如，通过客户端计算机的“主机”文件），以便具有有效证书的某些名称解析为客户端计算机上的环回地址。

* * *

顺便说一句 - 关闭证书验证不是要走的路。最好将自签名证书添加到（例如）用户浏览器的受信任证书列表中。

* * *

如果我处于您的情况，我想我会更改需要 HTTPS 来处理 127.0.0.1 上的请求的任何内容。请求不需要 HTTPS，或者将 IP 地址更改为客户端自己的 IP 地址。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T12:45:25.080

我尝试在客户端机器上安装自我签名证书 - 但失败了。不记得是什么问题了。所以我关闭了客户端代码中的证书验证。

你可以在[这里](http://www.nakov.com/blog/2009/07/16/disable-certificate-validation-in-java-ssl-connections/)阅读。

# algorithm - 在固定长度的输入上证明完美的哈希函数

> ID：10799175
> 
> 赞同：1
> 
> 时间：2012-05-29T12:29:21.147
> 
> 标签：algorithm, hash, proof

我已经在这里看到了使用 gperf 的答案，但是，我更愿意根据我为`strings`具有固定长度的域创建的证明来推出自己的证明。`<= 200` 基于我从 wolfram 获得的计算，我得到了`~7.9 x 10^374`总排列。因此，我的思路是，如果我有`2048`一点哈希函数 ( `3.2 x 10^616`)，我应该能够处理我需要处理的整个字符串世界。我的问题是，在所有长度为 200 或更短的字符串的宇宙的约束下，我如何证明我最终生成的哈希实现将是完美的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:46:47.207

长度为 200 个字符的字符串只有 200 * 8 = 1600 位。如果 2048 位散列适合您的目的，您可以只使用字符串位作为完美散列。身份哈希函数是完美的，因为它将每个输入映射到不同的哈希值（显然，因为没有映射）。

# mysql - 如何将 mysql.h 和 my_global.h 包含到 Makefile.am 中？

> ID：10799185
> 
> 赞同：0
> 
> 时间：2012-05-29T12:29:53.417
> 
> 标签：mysql, c, autotools, automake

我正在尝试创建一个可以通过这两个头文件与 MySQL 数据库通信的 C 程序：

```
mysql.h 
my_global.h 
```

MySQL 带有 mysql_config 脚本，您可以执行该脚本来找出包含文件和库文件在系统中的位置。我想知道您将如何在 Makefile.am 中定义它？

我目前有以下内容：

```
bin_PROGRAMS = db    
db_SOURCES = db.c db.h                                            
db_CFLAGS = -Wall `mysql_config --cflags --libs` 
```

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:34:12.930

我会`mysql_config`使用`configure.ac`AX_WITH_PROG[宏](http://www.gnu.org/software/autoconf-archive/ax_with_prog.html)搜索：

```
AX_WITH_PROG([MYSQL_CONFIG], [mysql_config], [AC_MSG_ERROR(mysql_config is required to build)]) 
```

`MYSQL_CONFIG`因此，如果程序安装在意外位置，您的用户将能够将环境变量指向程序。如果用户还没有安装它，他们会收到一个很好的错误消息，在尝试构建*之前提醒他们这个事实。*

我可能也会设置 cflags、cppflags 和 libs `configure.ac`，因为它们在`configure`运行后不应该改变：

```
MYSQL_CONFIG_CFLAGS=`$MYSQL_CONFIG --cflags`
MYSQL_CONFIG_CPPFLAGS=`$MYSQL_CONFIG --include`
MYSQL_CONFIG_LIBS=`$MYSQL_CONFIG --libs`
AC_SUBST([MYSQL_CONFIG_CFLAGS])
AC_SUBST([MYSQL_CONFIG_CPPFLAGS])
AC_SUBST([MYSQL_CONFIG_LIBS]) 
```

并将它们放置在`Makefile.am`

```
db_CFLAGS = -Wall $(MYSQL_CONFIG_CFLAGS)
db_CPPFLAGS=$(MYSQL_CONFIG_CPPFLAGS)
db_LDADD=$(MYSQL_CONFIG_LIBS) 
```

如果您只需要头文件，您可能不需要设置 cflags 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T19:14:11.160

我做了类似的事情：在configure.ac中：

```
AC_DEFUN([CHECK_MYSQL_LIB],
[
AC_CHECK_PROGS(
    MYSQL_CONFIG,
    mysql_config
)

  #In case it fails to find pthread then exit configure 
  if test "x${MYSQL_CONFIG}" != xmysql_config; then
    echo "------------------------------------------"
    echo " The mysql library and header file is      "
    echo " required to build this project. Stopping "
    echo " Check 'config.log' for more information. "
    echo "------------------------------------------"
    (exit 1); exit 1;
  else
    MYSQL_CONFIG_CFLAGS=`$MYSQL_CONFIG --cflags`
    MYSQL_CONFIG_CPPFLAGS=`$MYSQL_CONFIG --include`
    MYSQL_CONFIG_LIBS=`$MYSQL_CONFIG --libs`
    AC_SUBST([MYSQL_CONFIG_CFLAGS])
    AC_SUBST([MYSQL_CONFIG_CPPFLAGS])
    AC_SUBST([MYSQL_CONFIG_LIBS])
  fi
]) 
```

在 Makefile.am 中：

```
db_CPPFLAGS=$(MYSQL_CONFIG_CPPFLAGS)
db_LDFLAGS=$(MYSQL_CONFIG_LIBS) 
```

请注意，最好添加**LDFLAGS**而不是**LDADD**。

# java - 无法从其他包实现抽象类

> ID：10799193
> 
> 赞同：4
> 
> 时间：2012-05-29T12:30:21.313
> 
> 标签：java, abstract-class

由于某种原因，我似乎无法在定义它的包之外实现抽象类。package1 中的抽象类不能在 package2 中的类中实现。为什么这不是合法的 Java？

```
package com.stackoverflow.abstraction.package1;

abstract public class BaseClass {
    abstract Long foo();
}

package com.stackoverflow.abstraction.package1;

public class Implement1 extends BaseClass {
    @Override
    Long foo() {
        return null;
    }
}

package com.stackoverflow.abstraction.package2;

import com.stackoverflow.abstraction.package1.BaseClass;

/** Compiling this class will output
* - Implement2 is not abstract and does not override abstract method foo() in BaseClass
* - error: method does not override or implement a method from a supertype
*/

public class Implement2 extends BaseClass {
    @Override
    Long foo() {
        return null;
    }
} 
```

运行：OS X 10.6.8 - Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-10M3646) - OpenJDK Runtime Environment (build 1.7.0-u4-b13-20120301) 尝试了两个 Java 版本。当然不是同时 :)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T12:31:44.390

该方法是包级别的可见性，因此您不能在其他包中覆盖它。

```
abstract Long foo(); 
```

> 如果一个方法没有修饰符（默认，也称为包私有），它只在自己的包中可见

如果您确实需要覆盖它，请`protected`改为使用它。

```
protected abstract Long foo(); 
```

**信息**

*   [控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)
*   [Java 修饰符总结](http://www.javacamp.org/javai/modifier.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T12:34:17.520

您的两种`foo`方法具有默认的“包”访问权限。您的`Implementation2`班级甚至无法*调用*该方法 - 因此能够*覆盖*它没有多大意义。

目前尚不清楚您*希望*他们拥有什么级别的访问权限，但最简单的方法可能是将它们都公开。目前，您是说只有 callers in`package1`可以 call `BaseClass.foo()`，但只有 callers in`package2`可以 call `Implement2.foo()`。这显然没有多大意义。您*希望*谁能够访问该方法？如果您只希望类或子类中的调用者能够调用它，那么 make it `protected`- 否则 make it `public`。

有关访问修饰符的更多详细信息，请参阅[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)（和[Java 教程）的第 6.6 节。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)特别是，在经历了各种访问修饰符之后：

> 否则，我们说有默认访问，只有当访问发生在声明类型的包内时才被允许。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T12:36:17.133

你有四个访问修饰符：
- public - 你可以在任何地方使用它
- private - 你只能在类中使用它
- protected - 你只能在类和继承它的类中使用
- 包访问（默认，没有修饰符） - 你可以仅在该类所属的包中使用它。

在这种情况下，您没有修饰符，通常将其视为包访问。

# terminology - 什么是 REST 资源？

> ID：10799198
> 
> 赞同：57
> 
> 时间：2012-05-29T12:30:49.523
> 
> 标签：terminology, rest

什么是 REST 资源，它们与资源名称和资源表示有什么关系？

我读了几篇关于这个主题的文章，但它们太抽象了，让我比以前更加困惑。

以下 URL 是资源吗？如果是，该资源的名称是什么，它的表示是什么？

> [http://api.example.com/users.json?length=2&offset=5](http://api.example.com/users.json?length=2&offset=5)

URL 的 GET 响应应该类似于：

```
[
   {
      id: 6,
      name: "John"
   },
   {
      id: 7,
      name: "Jane"
   }
] 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-05-29T12:46:16.377

REST 资源的文章之所以抽象，是因为 REST 资源的概念*是*抽象的。它基本上是“您提供的 URL 访问的任何内容”。因此，在您的示例中，资源将是从某个更大列表中的偏移量 5 开始的两个用户的列表。请注意，资源的实现方式是您不关心的细节，除非您是编写实现的人。

> 以下 URL 是资源吗？

URL 不是资源，它是标识资源的标签，如果您愿意，它是资源的名称。

JSON 是资源的*表示*。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-04T15:23:24.297

> ## 什么是资源？
> 
> 资源是任何重要到足以被作为事物本身引用的东西。如果您的用户可能“想要创建指向它的超文本链接，做出或反驳关于它的断言，检索或缓存它的表示，通过引用将其全部或部分包含到另一个表示中，注释它，或对其执行其他操作”，那么您应该将其设为资源。
> 
> 通常，资源是可以存储在计算机上并表示为比特流的东西：文档、数据库中的一行或运行算法的结果。资源可能是像苹果这样的物理对象，或者是像勇气这样的抽象概念，但是（正如我们稍后将看到的）这些资源的表示必然会令人失望。以下是一些可能的资源：
> 
> *   软件版本 1.0.3 版
> *   最新版本的软件版本
> *   2006 年 10 月 24 日的第一个博客条目
> *   阿肯色州小石城的路线图
> *   关于水母的一些信息
> *   与水母有关的资源目录
> *   1024之后的下一个素数
> *   1024 之后的五个素数
> *   Q42004的销售数字
> *   两个熟人 Alice 和 Bob 之间的关系
> *   错误数据库中打开的错误列表

文本来自 O'Reilly 的书“ [RESTful Web Services](https://www.oreilly.com/library/view/restful-web-services/9780596529260/ch04.html) ”。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-05-29T12:48:05.520

URL 绝不是资源或其名称或表示。

URL 只是告诉资源所在的位置，您可以在此 URL 上调用 GET、POST、PUT、DELETE 等来调用资源。

返回的数据是资源，而数据的形式是它的表示。

假设您的带有给定 GET 参数的 URL 可以输出 JSON 资源 - 这是该资源的 JSON 表示。虽然在 GET 中使用其他标志，但它可以使用 XML 中的相同数据进行响应——这将是相同资源的另一种表示。

编辑：由于对 OP 的评论和我的回答，我正在添加另一个解释。

**资源名称**也被认为是“脚本名称”，例如，在这种情况下，`users.json`当这个资源名称是自描述资源表示本身时——当调用这个资源时，我们期望资源是 JSON 格式，而在调用时，例如`users.xml`我们会期望 XML 中的数据。

> 1.  当我更改`offset`GET 中的参数时，响应包含不同的数据集 - 它是新资源还是它的表示？
> 2.  当我在 GET 中定义作为响应返回的列时，它是不同的资源还是不同的表示形式，还是？

1.  好吧，这里的问题和答案很清楚 - 我们仍然调用相同的 URL，服务器以相同的形式响应数据（仍然是 JSON），数据仍然包含有关用户的信息 - 只是信息本身由于新的偏移参数。所以很明显，**它仍然是同一个资源，具有相同的表示和相同的资源名称**。
2.  第二个问题可能有点令人困惑。尽管我们调用的是相同的资源，但该资源包含相同的数据（仅具有预定义的列集），并且尽管数据具有相同的表示形式，但在我们看来它可能是不同的资源。但是由于上面段落中的要点，它也不是不同的资源或不同的表示。尽管数据集包含的信息较少，但请求方（过滤此数据集）应该考虑这一点并采取相应的行动。再说一遍：**它是具有相同资源名称和相同资源表示的相同资源**。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-11-22T13:48:58.420

## 休息

这种建筑风格在Roy T. Fielding 的论文[第 5 章中定义。](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)

REST 是关于通过它们在客户端和服务器之间的无状态通信之上的表示来操纵资源状态的。它是一种独立于协议的架构风格，但在实践中，它通常在 HTTP 协议之上实现。

## 资源

*资源*本身是一种抽象，用作者的话来说，资源可以是任何*可以命名的信息*。应用程序的域实体（例如人、用户、发票、发票集合等）可以是资源。请参阅菲尔丁论文中的以下引用：

> [**5.2.1.1 资源和资源标识符**](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_2_1_1)
> 
> REST 中信息的关键抽象是*资源*。任何可以命名的信息都可以是资源：文档或图像、时间服务（例如“洛杉矶今天的天气”）、其他资源的集合、非虚拟对象（例如人）等等. 换句话说，任何可能成为作者超文本参考目标的概念都必须符合资源的定义。资源是到一组实体的概念映射，而不是在任何特定时间点对应于映射的实体。
> 
> 更准确地说，资源*R*是一个随时间变化的隶属函数*M [R] (t)*，它在时间 t 映射到一组等效的实体或值。集合中的值可以是*资源表示*和/或*资源标识符*。[...]

## 资源表示

JSON 文档是一种*资源表示*，允许您表示资源的状态。服务器可以为同一资源提供不同的表示。例如，使用 XML 和 JSON 文档。客户端可以使用*内容协商*来请求同一资源的不同表示。

引用菲尔丁的论文：

> [**5.2.1.2 表示**](https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_2_1_2)
> 
> REST 组件通过使用表示来捕获该资源的当前或预期状态并在组件之间传输该表示来对资源执行操作。表示是一个字节序列，加上描述这些字节的表示元数据。其他常用但不太精确的表示名称包括：文档、文件和 HTTP 消息实体、实例或变体。
> 
> 表示包括数据、描述数据的元数据，有时还包括描述元数据的元数据（通常用于验证消息完整性）。元数据采用名称-值对的形式，其中名称对应于定义值的结构和语义的标准。响应消息可能包括表示元数据和资源元数据：关于资源的信息，不特定于所提供的表示。[...]

通过 HTTP，请求和响应标头可用于交换有关表示的元数据。

## 资源标识符

URL 是一种*资源标识符*，用于标识/定位服务器中的资源。

* * *

这个[答案](https://stackoverflow.com/a/33707418/1426227)可能也很有见地。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-05-29T12:37:19.520

> 什么是 REST 资源，它们与资源名称和资源表示有什么关系？

REST 并不意味着你正确使用 HTTP 动词（GET、POST、PUT、DELETE 等）。

> 以下 URL 是资源吗？

所有 URL 都是字符串，告诉计算机可以找到资源的位置。（因此得名：统一*资源*定位器）。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-06-15T19:07:55.100

一个资源是：

*   一个名词
*   那是独一无二的
*   并且可以表示为数据
*   并且至少有一个 URI

我在我的博客文章中更详细地介绍[了 RESTful 资源到底是什么？](http://techiferous.com/2014/05/what-exactly-is-a-restful-resource/)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-05-29T12:38:44.620

从概念上讲，您可以将资源视为可以使用 URL 在 Web 上访问的所有内容。如果你坚持这个规则`http://api.example.com/users.json?length=2&offset=5`可以被认为是一种资源

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-05-29T12:49:29.090

Representational State Transfer (REST) 是一种用于分布式系统（如万维网）的软件架构风格。REST 风格的架构由客户端和服务器组成。客户端向服务器发起请求；服务器处理请求并返回适当的响应。请求和响应是围绕资源表示的传输构建的。资源是一组可寻址对象，基本上是文件和文档，使用 URL 链接。正如 Quentin 上面正确指出的那样，REST 架构仅意味着您将使用 HTTP 动词 GET/POST/PUT/DELETE...

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-05-29T12:37:47.380

您只提供了看似相对的参数，而不是（或应该）具体的“ID”。请记住，get 操作应该是幂等的（即可重复并具有相同的结果）。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-20T13:42:18.803

什么是 REST？

REST 是一种架构风格，代表 Representational(RE) State(S) transfer(T)。

什么是 REST 资源？

休息资源是我们要对其执行操作的数据。因此，这些数据可以作为表的记录或任何其他形式存在于数据库中。该记录具有唯一标识符，可以用它来识别像员工的 id。

现在，当这个数据被唯一的 url 请求时，比如[http://www.example.com/employees/123](http://www.example.com/employees/123,so)，所以最终存在于数据库中的数据或记录将被 Rest Service 转换为 JSON/XML/纯文本格式，并将发送给消费者。

所以基本上，这里发生的是代表状态转移，以一种方式将数据库中存在的数据状态转移到另一种格式，可以是 JSON/XML 或纯文本。

因此，在这种情况下，1 个员工代表 1 个资源，可以通过唯一的 url 访问，例如[http://www.example.com/employees/123](http://www.example.com/employees/123)

如果我们想获取所有资源（员工）的列表，我们会这样做： [http ://www.example.com/employees](http://www.example.com/employees)

希望这会有所帮助。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-05-29T12:35:49.663

REST 代表代表性状态转移。这是一种将可变信息从一个位置传输到另一个位置的方法。执行此操作的常用方法是使用 JSON - 一种格式化变量的方法，以便可以在不丢失信息的情况下传输它们。

例如，PHP 已经内置了 JSON 支持。将 PHP 数组传递给`json_encode($array)`将输出您发布的格式的字符串（顺便说一下，这确实是一个 REST 资源，因为它为您提供了变量和信息）。

在 PHP 中，您发布的数组将变成：

```
Array (

    [0]=>Array (
        ['id']=>6;
        ['name']=>'John';
    )
    [1]=>Array (
        ['id']=>7;
        ['name']=>'Jane';
    )

) 
```

# java - 仅当 JNDI 资源可用时才在 JBoss 上部署 WAR 文件

> ID：10799206
> 
> 赞同：1
> 
> 时间：2012-05-29T12:31:39.990
> 
> 标签：java, maven, deployment, jboss, jndi

我有一个多层项目，其中提供 Web 访问点的应用程序服务器应*仅在所需的远程 JNDI 资源可用时才*部署其 WAR 文件。

JNDI 查找在本地网络中的不同服务器上执行，不允许来自外部世界的访问。

我的问题是，现在，在开始部署 WAR 之前无法判断是否有任何必需的 EJB 模块 - 如果未解决 JNDI 查找（远程服务与依赖注入一起使用），这将惨遭失败，因此它们*必须*在启动时出现）。

当然，我可以在我的 Maven 构建中设置一个计时器，以在模块部署之间等待任意秒数，以允许 EJB 启动，但这对我来说似乎是一种粗略的黑客攻击，而且不会很可靠，取决于构建的机器。

如果可以在部署之前直接在应用程序服务器上或在 Maven 构建中完成 JNDI 检查，我会很高兴。
有没有类似的东西？我找到[了这个问题](https://stackoverflow.com/questions/2515235/can-i-make-a-war-depend-on-a-jndi-entry-in-jboss-5-1)，但从来没有答案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T07:59:35.503

我还没有尝试过，但这应该可以使用`@Resource`，或者通过创建`WEB_INF/ejb-jar.xml`和使用`lookup-name`. 请参阅[https://community.jboss.org/thread/213106](https://community.jboss.org/thread/213106)。

# python - 静态文件未显示在 Django 模板中

> ID：10799216
> 
> 赞同：1
> 
> 时间：2012-05-29T12:32:14.453
> 
> 标签：python, django, templates, static, settings

我正在尝试使用 {{ STATIC_URL }} 标签在我的 Django 模板中显示图像/js/css。理论上，这是可行的，因为在浏览器中，当我看到打印的代码时，请求文件的路径类似于“/static/images/blabla.jpg”。但是文件没有显示，所以我猜问题出在 Django 项目中。

我的设置如下所示：

```
STATIC_ROOT = '/absolute/path/to/static'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    '/absolute/path/to/static'
) 
```

在我的 urls.py 中：

```
url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

但我不知道为什么静态目录中的所有文件都没有显示在模板中。

任何提示或建议？

谢谢小伙伴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:21:01.790

首先，您的设置*似乎*有误。你应该了解[django.contrib.staticfiles](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/) [collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)命令：

> 将静态文件收集到 STATIC_ROOT。[...] 使用启用的查找器搜索文件。默认是查看 STATICFILES_DIRS 中定义的所有位置以及 INSTALLED_APPS 设置指定的应用程序的“静态”目录。

[因此， STATICFILES_DIRS](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std%3asetting-STATICFILES_DIRS)包含[STATIC_ROOT](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_ROOT)似乎是一个错误，因为[STATICFILES_DIR](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std%3asetting-STATICFILES_DIRS)的内容要通过[collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)复制到[STATIC_ROOT](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_ROOT)中。

网址不是必需的。您应该：

*   使用带有 DEBUG=True 的 runserver，在这种情况下，django 将[默认提供静态文件](https://docs.djangoproject.com/en/dev/howto/static-files/#basic-usage)，有疑问使用[staticfiles_urlpatterns](https://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-development)或
*   使用真正的 httpd 在[STATIC_URL](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_ROOT)上提供 STATIC_ROOT，在这种情况下，您应该使用命令[collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-collectstatic)从[STATICFILES_DIRS](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#std%3asetting-STATICFILES_DIRS)（实际上是每个应用程序的“静态”子目录，这就是重点）生成[STATIC_ROOT](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-STATIC_ROOT)

如有疑问，[findstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#django-admin-findstatic)命令也可能有用。

django.contrib.staticfiles 一开始可能看起来有点混乱，但是当你完全理解它时你会喜欢它<3

# merge - 在 Oracle 11G 中批量更新列

> ID：10799221
> 
> 赞同：0
> 
> 时间：2012-05-29T12:32:38.380
> 
> 标签：merge, oracle11g, bulk

我有两个表，说 Table1 和 Table2，其中包含以下列，我应该加入并使用 Table2 中存在的同一列的值执行更新 Table1 的列。

加入条件的列：

1.  Table1.mem_ssn 和 Table2.ins_ssn
2.  Table1.sys_id 和 Table2.sys_id
3.  Table1.grp_id 和 Table2.grp_id

要更新的列：

Table1.dtofhire=Table2.dtofhire

我需要一种在 Oracle 11G 中批量更新（使用单个更新查询而不循环）上述列的方法。

Table1 不包含任何指定的键约束，因为它将用作数据上传的临时表。

请帮助我更新相同的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:35:12.313

您可以使用[MERGE](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm)语句。
它应该看起来像这样：

```
MERGE INTO table1 D
   USING (SELECT * FROM table2 ) S
   ON (D.mem_ssn = S.ins_ssn and D.sys_id = S.sys_id and D.grp_id=S.grp_id)
   WHEN MATCHED THEN 
     UPDATE SET D.dtofhire=S.dtofhire; 
```

**更新：**
由于您在 table2 中有不止一行具有相同 (ins_ssn,sys_id,grp_id) 并且您想要 max `dtofhire`，您应该在 using 子句中更改查询：

```
 MERGE INTO table1 D
   USING (SELECT ins_ssn, sys_id, grp_id, max(dtofhire) m_dtofhire
            FROM table2 
        GROUP BY ins_ssn,sys_id,grp_id) S
   ON (D.mem_ssn = S.ins_ssn and D.sys_id = S.sys_id and D.grp_id=S.grp_id)
   WHEN MATCHED THEN 
     UPDATE SET D.dtofhire=S.m_dtofhire; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:38:02.280

我用来实现该功能的查询如下所示

```
UPDATE table1  T2 
SET    dtofhire = (SELECT Max(dtofhire) AS dtofhire 
           FROM   table2 T1 
           WHERE  T2.mem_ssn = T1.ins_ssn 
              AND T2.sys_id = T1.sys_id 
              AND T2.grp_id = T1.grp_id 
           GROUP  BY ins_ssn, 
               sys_id, 
               grp_id) 
WHERE  ( mem_ssn, sys_id, grp_id ) IN (SELECT ins_ssn, 
                        sys_id, 
                        grp_id 
                     FROM   table2 ); 
```

# javascript - 在 dojo 1.7 中使用 data-dojo-id

> ID：10799227
> 
> 赞同：1
> 
> 时间：2012-05-29T12:33:03.590
> 
> 标签：javascript, dojo

我尝试使用脚本中的一些“dijit”小部件，例如更改内容或连接事件。

为此，我尝试在 html 中使用“data-dojo-id”属性，它（据我了解）创建类型为“data-dojo-type”并命名为“data-dojo-id”的全局对象。

但我有错误......我做错了什么？

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Dojo test</title>
    </head>
    <body>
        <div    id="myDivId"
                data-dojo-type="dijit.layout.ContentPane"
                data-dojo-id="myDojoId">
        Hello Everyone!
        </div>
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.1/dojo/dojo.js" data-dojo-config="async: true, parseOnLoad:true"></script>
        <script type="text/javascript">
        require(["dijit/dijit", "dijit/layout/ContentPane"], function(){
            //myDojoId.setContent("Hello World!");  // error : myDojoId is not defined

            // Even this not working:
            console.log(dijit.byId("myDivId"));     // undefined 
            console.log(dijit.byId("myDojoId"));    // undefined 
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:29:03.143

`data-dojo-id`和 jsId（已弃用）属性创建一个引用该 dijit 的全局对象。

我相信您需要将查找包装在 ready() 调用中

```
<script type="text/javascript">
       require(["dojo/ready","dijit/dijit", "dijit/layout/ContentPane"], function(ready,dijit,ContentPane){
            //shouldn't  be defined yet
            console.log(dijit.byId("myDivId"));     // undefined 
            console.log(myDojoId);    // undefined 

            ready(function(){
             console.log(dijit.byId("myDivId"));
             //note how data-dojo-id doesn't have the lookup
             console.log(myDojoId);
           });
        });
</script> 
```

# web-services - Flash Builder（移动）- 动态 Web 服务 URL

> ID：10799231
> 
> 赞同：0
> 
> 时间：2012-05-29T12:33:28.853
> 
> 标签：web-services, apache-flex, mobile, flash-builder, flex4.6

对于我的 Flash Builder 4.6 项目，我定义了一个 http 服务，它查看我们网站上的一个 url。

不过，我希望能够在应用程序中动态更改 Web 服务 url。即默认使用现有的 url，但有一个管理/设置屏幕来更改 Web 服务指向的位置（存储在我们的 sqlite 数据库或本地内存中）。

这样我们就可以允许我们的客户托管他们自己版本的网站/数据库，但仍然能够通过应用商店使用/下载应用程序。

有没有人有这样做的经验？

编辑：在下面的评论之后添加更多细节。

当我通过 FlashBuilder 向导创建 HTTP 服务时，它创建了两个 Web 服务类，一个超类和一个从超类继承的子类。向导填充的所有代码都进入超类。

我可以假设我需要放入的代码将在子类中。但我不知道我会把它放在哪个功能或如何。

下面是 Super 的构造函数示例：

```
// initialize service control
    _serviceControl = new mx.rpc.http.HTTPMultiService("websitehere");
     var operations:Array = new Array();
     var operation:mx.rpc.http.Operation;
     var argsArray:Array;

     operation = new mx.rpc.http.Operation(null, "loginRequest");
     operation.url = "login.php";
     operation.method = "GET";
     argsArray = new Array("un","pw");
     operation.argumentNames = argsArray;         
     operation.serializationFilter = serializer0;
     operation.properties = new Object();
     operation.properties["xPath"] = "/";
     operation.contentType = "application/x-www-form-urlencoded";
     operation.resultType = valueObjects.Data;
     operations.push(operation);
_serviceControl.operationList = operations; 
```

我不确定需要更改 _serviceControl 变量的哪些属性。

此外，当我在我的代码中搜索我的网站时，它会在 .model 目录中返回一个 .fml 文件，如果我通过向导更改服务 url，它似乎会自动刷新。这不会引起问题吗？

然后我面临访问用户定义的 url 的挑战。在应用程序中，我们使用 sqlite 数据库来存储数据，但我认为使用“SharedObject”可能会更好，我们也可以使用它来了解他们登录的帐户。这有多可靠？我想我可以通过服务访问它吗？

虽然尴尬的是我们计划在登录后访问的设置屏幕上进行此配置。但要登录它已经需要知道指向哪个服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:05:03.697

如果我正确阅读了您的问题，那么您的主要目标是根据用户定义的变量动态更改服务的 url。

如果您使用的是 parsley / spicelib，这很容易实现，甚至更容易实现。

几点

1.  不要更改超级文件中的代码，只要服务刷新，这将被覆盖。更改其生成的子类中的所有内容。

2.  共享对象非常适合少量数据，但绝不能用于海量数据集，即存储大数组集合。

无论如何，这就是我实现这一目标的方式。

在子类中，您可以更改构造函数。

以下是我如何根据配置变量更改我的 url，但您也可以轻松地使用 SharedObject。

```
public function SubClassConstructor(){
    if(CONFIG::DOMAIN_IDENT == "development" || CONFIG::DOMAIN_IDENT == "dev" || CONFIG::DOMAIN_IDENT == "d"){
        _serviceControl.endpoint = "http://yoururl1";
    }
    else if(CONFIG::DOMAIN_IDENT == "production" || CONFIG::DOMAIN_IDENT == "prod" || CONFIG::DOMAIN_IDENT == "p"){
        _serviceControl.endpoint = "http://yoururl2";
    }

} 
```

当然，这并不是您要寻找的，而是一个可行的解决方案，当然您可以使用绑定到全局应用程序模型或直接引用 SharedObject，我想您已经知道如何使用 SharedObject。

询问您是否需要任何进一步的帮助或指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:54:21.843

由于 cghrmauritius 的解决方案对我不太适用，因此我发布了在我的情况下确实有效的最终解决方案。

```
public function subConstructor()
{
    super();
    _serviceControl.baseURL = "http://url1";
} 
```

显然，对于我的最终解决方案，我还需要实现 shareobject，但覆盖 url 是我的主要优先事项。

# .net - wcf data services - expand children within children

> ID：10799232
> 
> 赞同：0
> 
> 时间：2012-05-29T12:33:31.447
> 
> 标签：.net, linq, entity-framework, wcf-data-services

I have an entity like so

```
public class Permission
{
     IEnumerable<Permission> Children {get;set;}
} 
```

How to specify an expand query that goes as deep as is needed, currently i am using

```
public IEnumerable<IManagePermission> GetRootPermissions()
        {
            return this.adminService.ManagePermissionViews.Expand("Children/Children/Children/Children").Where(item=>item.ParentPermissionId  == null);
        } 
```

But this is sucky as i have no idea really how deep the permissions may be nested, i considered calling another query to find this out first then using this value to construct the nested argument.

But again .. sucky..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:33:36.220

There's no way in OData protocol currently to request behavior like that. The best solution would probably be to load these on demand using separate requests.

# facebook - facebook 访问令牌 400 错误请求

> ID：10799235
> 
> 赞同：8
> 
> 时间：2012-05-29T12:33:38.337
> 
> 标签：facebook, authentication, facebook-oauth

我正在使用以下代码来检索 facebook accessToken

```
string url = "https://graph.facebook.com/oauth/access_token?" +
                         "client_id={0}" +
                         "&redirect_uri={1}" +
                         "&client_secret={2}" +
                         "&code={3}";
            url = string.Format(url, clientId, redirectUri.EncodeUrl(), clientSecret, code);
            //Create a webrequest to perform the request against the Uri
            WebRequest request = WebRequest.Create(url);
            try
            {
                //read out the response as a utf-8 encoding and parse out the access_token
                using (WebResponse response = request.GetResponse())
                {
                    using (Stream stream = response.GetResponseStream())
                    {
                        //string urlRedirects = response.ResponseUri.ToString();
                        Encoding encode = Encoding.GetEncoding("utf-8");
                        if (stream != null)
                        {
                            StreamReader streamReader = new StreamReader(stream, encode);
                            string accessToken = streamReader.ReadToEnd().Replace("access_token=", "");
                            streamReader.Close();
                            response.Close();
                            return accessToken;
                        }
                    }
                }
            }
            catch
            {
                return null;
            } 
```

但是我不断收到这个模棱两可的错误信息

```
{
"error": {
"message": "Error validating verification code.",
"type": "OAuthException",
"code": 100
}
} 
```

我检查了代码 100“无效参数”对我来说根本没有什么意义。

有人遇到过类似的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T09:58:21.220

1.  检查您是否在 url 中添加了正确的代码 例如

    ```
    http://www.xyz.com/?code=AQC399oXame3UKmoAMYnqkZOEXPDNa8ZUFEY9sc6I4YNQnNT-ZgHzpMNnQVZrCUBZVqJRIB1QrXC5xW58_8MNIgQol_PaQvYssUM8OiKjSY5aoqGLBMuCeeHsSqP_mRTd1xiK0iretZcXwMm_27lFYrWFw345Mxod_lfJuB8zI13E8wJUQiArXW_ZlGLNcyxh20#_=_ 
    ```

代码必须是

```
 code = AQC399oXame3UKmoAMYnqkZOEXPDNa8ZUFEY9sc6I4YNQnNT-ZgHzpMNnQVZrCUBZVqJRIB1QrXC5xW58_8MNIgQol_PaQvYssUM8OiKjSY5aoqGLBMuCeeHsSqP_mRTd1xiK0iretZcXwMm_27lFYrWFw345Mxod_lfJuB8zI13E8wJUQiArXW_ZlGLNcyxh20 
```

代码最后不应包含以下内容

```
 #_=_ 
```

如果以上没有解决问题

2.redirect_uri 必须以 / 结尾

```
redirect_uri=http://www.xyz.com/ 
```

以下给出了一些上述错误

```
redirect_uri=http://www.xyz.com 
```

3\. 还要确保 Facebook 上的 **应用程序**和**使用 Facebook 登录**的网站设置为相同的地址，例如[http://www.xyz.com/](http://www.xyz.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:56:39.073

您需要将用户发送到 Facebook 登录页面以获得有效的`code`. 然后应该使用该代码`access_token`为用户获取。

遵循[身份验证指南](http://developers.facebook.com/docs/authentication/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-11T15:59:02.397

当我的应用程序 ID 和密码错误（我搞砸了开发和生产 id-s 和密码）时，我也收到了错误消息 400。

修复它们（还要注意正确的主机）为我解决了*这个*问题。

# ios - 对 UINavigationBar 使用非正式协议覆盖 drawRect 方法

> ID：10799236
> 
> 赞同：1
> 
> 时间：2012-05-29T12:33:40.307
> 
> 标签：ios, cocoa, custom-controls, drawrect

我使用 Xcode 4.3.2 并基于“主从应用程序”模板创建一个空项目。当我尝试通过下面的代码更改默认导航栏的外观时，什么也没发生，drawRect 函数永远不会被调用。

```
#import "AppDelegate.h"

@implementation UINavigationBar (UINavigationBarCustomDraw)

- (void)drawRect:(CGRect)rect
{
    NSLog(@"redraw");
    [[UIImage imageNamed:@"NavBar.png"] drawInRect:rect];
    self.topItem.titleView = [[UIView alloc] init];

    self.tintColor = [UIColor colorWithRed:0.6745098 green:0.6745098 blue:0.6745098 alpha:1.0];
 }

 @end

 @implementation AppDelegate
 ... 
```

我知道在 iOS 5.x 中用户可以通过更简单的方式改变 UI 的外观，比如

```
[[UINavigationBar appearance] setBackgroundImage:img 
                                   forBarMetrics:UIBarMetricsDefault]; 
```

但我只是想知道为什么不调用drawRect，任何人都可以解释一下吗？

# c# - 如何在 Page_Load 事件中找到位于 datalist itemtemplate 内的控件？

> ID：10799248
> 
> 赞同：0
> 
> 时间：2012-05-29T12:34:05.800
> 
> 标签：c#, asp.net, datalist, listitem

我有一个数据列表，其中显示图像的缩略图和一个下载图标，当用户单击下载图标时，系统下载客户端位置的图像。

```
<asp:DataList ID="dtlSearchDetails" runat="server" OnItemCommand="dtlSearchDetails_ItemCommand" OnItemDataBound="dtlSearchDetails_ItemDataBound">
                            <ItemTemplate>
                                <asp:ImageButton runat="server" ID="dtlImageCol" ImageUrl='<%# "~/uploads/thumbnails/" + Eval("ImageName") %>' /><br />
                                <asp:Label runat="server" ID="dtusage" Text='<%# Eval("usage") %>' Style="color: #CC121B;"></asp:Label><br />
                                <asp:ImageButton runat="server" ID="dtlImgDownload" CommandName="dtlImgDownload" CommandArgument='<%# Eval("ImageName") %>' ImageUrl="images/download.png" style="height:20px; width:20px;"/>&nbsp;
                            </ItemTemplate>
                        </asp:DataList> 
```

一切正常，只是问题是 datalist 被包装在 updatepannel 中，因此为了在用户端下载图像，我需要在 Page_Load 事件上注册控件：

```
ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(dtlImgDownload); 
```

由于在`dtlImgDownload`数据列表中，我总是得到一个错误`"The name dtlImgDownload doesn't exists in current context."`

我尝试了几种方法来查找控件，`dtlSearchDetails.FindControl("dtlImgDownload ")` 但它总是返回 null。

我也试过

```
if(dtlSearchDetails.FindControl("dtlImgDownload ") != null)
        {
            ScriptManager.GetCurrent(this.Page).RegisterPostBackControl(dtlSearchDetails.FindControl("dtlImgDownload "));
        } 
```

但同样的结果，它始终为空。

请指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:53:23.887

首先，您需要`Bind`将`DataList`. `DataListItems`然后在此之后，您将需要遍历`DataList`

```
foreach ( DataListItem li in dtlSearchDetails.Items )
{
    ImageButton imgButton = (ImageButton) li.FindControl("dtlImgDownload");
} 
```

这将在每个`DataListItem`

# iphone - 如何正确处理 iOS 中的互联网连接不可用？

> ID：10799250
> 
> 赞同：3
> 
> 时间：2012-05-29T12:34:15.030
> 
> 标签：iphone, ios, cfnetwork

我正在制作一个使用互联网的应用程序。我记得开发人员必须与 CFNetwork 或类似的东西有关检查可用性或速度。

是否有某种标准 UIAlertView 带有消息“您似乎没有互联网，但此应用程序需要它”？

是否有说明如何操作的教程或指南？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T12:35:24.157

Apple 提供了 Reachability 类来检查这一点，

这是一个非常简单有效的例子。

[http://tympanus.net/codrops/2009/09/14/checking-network-reachability-iphone/](http://tympanus.net/codrops/2009/09/14/checking-network-reachability-iphone/)

**更新**：

似乎苹果已经更新了他们的可达性类并包含了单例模式。您可以在这里查看新课程... [http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

感谢@Proud Member 指出这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:37:11.720

看到这些线程。非常有帮助

[确定 iPhone 互联网连接是否可用的最简单方法？](https://stackoverflow.com/questions/784582/easiest-way-to-determine-whether-iphone-internet-connection-is-available)

[iPhone SDK 网络连接检测](https://stackoverflow.com/questions/596589/iphone-sdk-internet-connection-detection)

[http://www.iphonedevsdk.com/forum/iphone-sdk-development/7300-test-if-internet-connection-available.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/7300-test-if-internet-connection-available.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:37:48.080

要测试和监控网络可用性，您应该使用 Apple 示例代码中的**Reachability**类 - [http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

没有网络可用性不足的标准警报 - 您如何处理这种情况取决于您正在编写的应用程序。

# c# - WPF 性能：重置图像控件的源

> ID：10799253
> 
> 赞同：1
> 
> 时间：2012-05-29T12:34:19.630
> 
> 标签：c#, .net, wpf, performance, imagesource

我正在使用 AForge.NET 库定期从我的网络摄像头获取图像数据。出于调试原因，我必须将过滤后的图像绘制到屏幕上。目前，我的主窗体上有 6 个 WPF 图像，并且每秒钟我都会处理一个事件，该事件给了我一个 UnmanagedImage，我将其转换为 System.Drawing.Bitmap，然后转换为 BitmapSource - 我的代码如下所示：

```
private void OnImageFiltered(object sender, FilterEventArgs e)
{
    var bitmapSource = e.UnmanagedImage.ToManagedImage().ToBitmapSource();
    pictureBox.Source = bitmapSource;
} 
```

但正如我之前所说，我有 6 张图像，它会减慢整个程序的速度。我怎样才能让它更快？

我的 ToBitmapSource 扩展方法在这里：

```
public static BitmapSource ToBitmapSource(this System.Drawing.Image source)
{
    System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(source);

    var bitSrc = bitmap.ToBitmapSource();

    bitmap.Dispose();
    bitmap = null;

    return bitSrc;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T13:30:22.917

很抱歉写了一个答案，但由于我的声誉低，我还不能发表评论。

如果问题仍然存在，请使用该`Freeze`方法将 BitmapSource 设置为只读，从而可以传递给不同的线程。

# c# - 动画跟随拖动运动

> ID：10799254
> 
> 赞同：0
> 
> 时间：2012-05-29T12:34:20.180
> 
> 标签：c#, wpf, silverlight, windows-phone-7

下面代码的目的是拇指跟随鼠标水平移动。该代码在鼠标事件上被调用，因此动画的目标值不断更新。

在代码中，`offset`是当前鼠标的水平位置。问题是， thumb 的动画没有完全动画到指定的`offset`，但似乎总是停在一个更小或更高的值上（取决于鼠标是向左还是向右拖动）。

影响动画的`SeekAlignedToLastTick()`行为，虽然我无法通过阅读文档来弄清楚这个函数的作用。

如何为拇指设置动画，使其平滑地跟随拖动事件？

```
 private Storyboard _thumbStoryboard;
    private DoubleAnimation _thumbAnimation = new DoubleAnimation();;
    private CompositeTransform _thumbTransform = new CompositeTransform();

    private void UpdateUserInterface(double offset)
    {
        var thumbItem = Thumb as FrameworkElement;

        if (_thumbStoryboard == null)
        {
                Storyboard.SetTarget(_thumbAnimation, _thumbTransform);

                _thumbStoryboard = new Storyboard();
                _thumbStoryboard.Children.Add(_thumbAnimation);

                thumbItem.RenderTransform = _thumbTransform;
                _thumbStoryboard.Duration = new Duration(TimeSpan.FromMilliseconds(100));
                _thumbAnimation.EasingFunction = new ExponentialEase();
        }

        double from =  _thumbTransform.TranslateX;

        _thumbStoryboard.Stop();

        Storyboard.SetTargetProperty(_thumbAnimation,  new PropertyPath("TranslateX"));

        _thumbAnimation.From = from;
        _thumbAnimation.To = offset;

        _thumbStoryboard.Begin();
        _thumbStoryboard.SeekAlignedToLastTick(TimeSpan.Zero);            
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:02:49.667

我试图解决你的问题，所以我创建了一个 Silverlight 应用程序并添加了一个 Border 元素进行测试。

```
<Border x:Name="Thumb" VerticalAlignment="Top" HorizontalAlignment="Left" Width="50" height="25" Background="#ff0000" /> 
```

无需设置“ **From** ”属性，因为*DoubleAnimation*对象可以自动从当前值继续到“ **To** ”属性。

而且您将**Duration**设置为*Storyboard*，这会导致*DoubleAnimation*在未达到“ **To** ”值的情况下切断其动画，您需要将**Duration**属性设置为**DoubleAnimation**本身。

也不需要调用 _ ***thumbStoryboard.Stop()***，因为它会将当前动画重置为第一个*TranslateX*值。

这是更新后的“UpdateUserInterface”函数代码，带有注释：

```
 private void UpdateUserInterface(double offset) {
        var thumbItem = Thumb as FrameworkElement;

        if ( _thumbStoryboard == null ) {

            // UpdateLayout Method is update the ActualWidth Properity of the UI Elements
            this.UpdateLayout();

            // Applying the CompositeTransform on "thumbItem" UI Element
            thumbItem.RenderTransform = _thumbTransform;

            // Setting the Render Transform Origin to be the Center of X and Y
            thumbItem.RenderTransformOrigin = new Point(0.5d, 0.5d);

            // Setting the target of the DoubleAnimation to be the Thumb CompositeTransform
            Storyboard.SetTarget(_thumbAnimation, _thumbTransform);

            // Setting the Targeted Properity of the DoubleAnimation to be The "TranslateX" Properity
            Storyboard.SetTargetProperty(_thumbAnimation, new PropertyPath("TranslateX"));

            // Used QuinticEase instead of ExponentialEase
            // and Added EaseOut to make the animation be more smoother.
            _thumbAnimation.EasingFunction = new QuinticEase(){ EasingMode = EasingMode.EaseOut };

            // Initializing the Storyboard
            _thumbStoryboard = new Storyboard();

            // Specifing the Duration of the DoubleAnimation not the StoryBoard
            _thumbAnimation.Duration = new Duration(TimeSpan.FromMilliseconds(500));

            // Adding the DoubleAnimation to the Children of the Storyboard
            _thumbStoryboard.Children.Add(_thumbAnimation);

        }

        // Calculate the New Centered Position
        double newPos = offset - (thumbItem.ActualWidth / 2);

        // Set the New DoubleAnimation "To" Value, 
        // There is no need to set the "From" Value since it'll automatically continue from the current TranslateX Value
        _thumbAnimation.To = newPos;

        // Begin the animation.
        _thumbStoryboard.Begin();
    } 
```

希望对你有帮助:)

问候，

莫尼尔·阿布·希拉尔

# google-chrome-extension - Chrome 扩展程序不起作用

> ID：10799257
> 
> 赞同：1
> 
> 时间：2012-05-29T12:34:29.507
> 
> 标签：google-chrome-extension

```
<!--
You are free to copy and use this sample in accordance with the terms of the
Apache license (http://www.apache.org/licenses/LICENSE-2.0.html)
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>
      Google Visualization API Sample
    </title>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load('visualization', '1', {packages: ['corechart']});
    </script>
    <script type="text/javascript">
      function drawVisualization() {
        // Create and populate the data table.
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work', 11],
          ['Eat', 2],
          ['Commute', 2],
          ['Watch TV', 2],
          ['Sleep', 7]
        ]);

        // Create and draw the visualization.
        new google.visualization.PieChart(document.getElementById('visualization')).
            draw(data, {title:"So, how was your day?"});
      }

      google.setOnLoadCallback(drawVisualization);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="visualization" style="width: 600px; height: 400px;"></div>
  </body>
</html> 
```

上面的代码在一个 html 文件中为我们生成了一个饼图。当我在浏览器中打开它时它可以工作。让我们调用文件*popup.html*。

然后我想用以下清单文件使它成为一个 Chrome 扩展：

```
{
  "name": "History Visualizer",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Helps us analyze history stats in a visual way",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  }
} 
```

但是当我点击图标按钮时，饼图将无法加载。有人帮我吗？

**编辑**：检查弹出窗口后的错误消息如下。

> 由于 Content-Security-Policy，拒绝从“http://www.google.com/jsapi”加载脚本。由于 Content-Security-Policy 拒绝执行内联脚本。

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:57:57.620

您需要为您的扩展程序指定权限`manifest.json`才能使用以下资源`google.com`：

```
"permissions": [
  "http://*.google.com/"
], 
```

或者，如果这不起作用，请尝试允许您的扩展程序访问*所有*URL：

```
"permissions": [
  "<all_urls>"
], 
```

[在此处](http://code.google.com/chrome/extensions/permission_warnings.html)阅读有关权限的更多信息。

# postgresql - Jboss 在启动时显示数据源错误

> ID：10799258
> 
> 赞同：0
> 
> 时间：2012-05-29T12:34:53.237
> 
> 标签：postgresql, servlets, jboss

在启动 jboss 时出现以下错误：

```
--- MBEANS THAT ARE THE ROOT CAUSE OF THE PROBLEM ---
ObjectName: jboss.jca:service=DataSourceBinding,name=DefaultDS
  State: NOTYETINSTALLED
  Depends On Me:
    jboss.ejb:service=EJBTimerService,persistencePolicy=database
    jboss:service=KeyGeneratorFactory,type=HiLo
    jboss.mq:service=StateManager
    jboss.mq:service=PersistenceManager 
```

对于 servlet 中的所有数据库连接，我得到以下异常：

```
 org.postgresql.util.PSQLException: FATAL: password a
uthentication failed for user "poll" 
```

它工作正常，突然间我开始收到这些错误。我的密码是正确的。我什至尝试更改密码，然后再次尝试它显示相同的异常。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:49:53.347

`DefaultDS`数据源顾名思义；默认数据源。它与 JBoss 一起提供并配置为使用 Hypersonic（即内存中）数据库。JBoss 使用`DefaultDS`数据源读取/写入内部队列、定时事件等

检查文件`../conf/standardjbosscmp-jdbc.xml`以查看您为`DefaultDS`数据源配置的内容。听起来您无意中编辑了该文件。除非您需要在引导过程中保留内部队列等，否则只需使用 Hypersonic 将其保持原样。

有关更多信息，请参阅[JBoss 文档](http://docs.jboss.org/jbossas/getting_started/v4/html/cmp.html)。

# php - CakePHP 电子邮件编码问题

> ID：10799262
> 
> 赞同：0
> 
> 时间：2012-05-29T12:35:05.250
> 
> 标签：php, email, cakephp, cakephp-1.3

我有一个表单，一旦提交就会向输入详细信息的人发送电子邮件。此表格适用于日本网站。

我需要电子邮件的编码为 UTF-8 而不是 swift-jis

我已将这两行添加到我的电子邮件控制器中：

```
$this->Email->charset = "utf-8";
$this->Email->headerCharset = "utf-8"; 
```

文本是电子邮件似乎大部分都可以，但是我仍然收到带有某些字符的符号。

有谁知道我还能尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:55:13.777

首先：将 php.ini 中的默认编码更改为 utf-8 。二：如果您使用 ajax 发送电子邮件，请使用“encodeURIComponent”对消息进行编码。

# php - 调用时传递引用已被弃用

> ID：10799263
> 
> 赞同：4
> 
> 时间：2012-05-29T12:35:08.760
> 
> 标签：php, kohana

> **可能重复：**
> [调用时传递引用已被弃用；](https://stackoverflow.com/questions/4665782/call-time-pass-by-reference-has-been-deprecated)

我的 Kohana 站点，在库文件中获取此警报。

```
Call-time pass-by-reference has been deprecated 
```

那是问题线：

```
call_user_func('Formo_'.$name.'::load', & $this); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:36:36.293

删除`&`之前的`$this`.

PHP5 不需要添加 - 默认情况下，所有对象都作为对象标识符传递，不需要像 PHP 4 那样通过引用传递来模仿这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:40:33.820

要在 php5 中通过引用传递变量，您需要`&`在函数声明中添加。不是在您调用该函数时。

```
function call_user_func($param1, &$param2) {
  // $param2 will be a reference
  // as mentioned by damianb though objects are by default references
  // http://php.net/manual/en/language.oop5.references.php

} 
```

当调用它时，只需像往常一样传入你的参数，param2 将通过引用传递。

[http://php.net/manual/en/language.references.pass.php](http://php.net/manual/en/language.references.pass.php)

上面的链接清楚地解释了错误。

> 注意：函数调用上没有参考符号 - 仅在函数定义上。仅函数定义就足以通过引用正确传递参数。从 PHP 5.3.0 开始，当您在 foo(&$a); 中使用 & 时，您将收到一条警告说“调用时传递引用”已被弃用。

# python - 从 django bulk_create 中选择/查询对象？

> ID：10799267
> 
> 赞同：3
> 
> 时间：2012-05-29T12:35:18.350
> 
> 标签：python, django, model, save

如果我使用 bulk_create 插入对象：

```
objList = [a, b, c,] #none are saved
model.objects.bulk_create(objList) 
```

对象的 ID 不会更新（请参阅[https://docs.djangoproject.com/en/dev/ref/models/querysets/#bulk-create](https://docs.djangoproject.com/en/dev/ref/models/querysets/#bulk-create)）。所以我不能将这些家伙用作外键对象。我想在批量创建它们之后从数据库中查询它们，然后将它们用作外键对象，但我没有它们的 ID 来查询它们。如何从数据库中查询这些对象（假设除了 id 之外的列中可能存在重复值）？或者有没有更好的方法将批量创建的项目作为外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T00:35:46.733

如果您只有三个对象，如您的示例中那样，您可能希望单独调用 save ，将调用包装在事务中，如果它需要是原子的。

如果还有更多，这可能是使用 bulk_create 的原因，您可能会遍历它们并在每个上调用 save。同样，如果需要，您可以将其包装在事务中。不过，人们可能不喜欢这个选项，因为运行大量的插入查询可能会成为某些数据库设置的问题。

或者，一种技巧是向对象添加一些已知的唯一标识符，以便您可以在保存后重新查询这些。

# iphone - 如何加快 UITableViewCell 中的 UIImageView/UIButton？

> ID：10799270
> 
> 赞同：0
> 
> 时间：2012-05-29T12:35:24.063
> 
> 标签：iphone, objective-c, uitableview, uiimageview, uibutton

我最初尝试使用核心图形将图像绘制到单元格中，但是效果很慢，因为我的图像很大。现在我在我的单元格中使用 UIImageViews 在每个单元格中显示 1 张图像。

因为我正在缓存图像，所以在第一次加载每个单元格后它会非常流畅地滚动。不过，第一次加载时，会有一点延迟。

我可以向您展示的内容并不多，因为这是一个相当笼统的问题，但我想我可以向您展示到目前为止我是如何加载图像的：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        self.isReadyForImage = NO;

        NSString *generated = [Entry generateString];

        const char *cString = (const char*)[generated UTF8String];

        dispatch_queue_t queue = dispatch_queue_create(cString, NULL);
        dispatch_async(queue, ^{

            self.thumbnailButton = [[UIButton alloc] init];
            self.thumbnailButton.contentMode = UIViewContentModeCenter;
            self.thumbnailButton.layer.shadowColor = [[UIColor blackColor] CGColor];
            self.thumbnailButton.layer.shadowOffset = CGSizeMake(0, 2);
            self.thumbnailButton.layer.shadowOpacity = 0.2;
            self.thumbnailButton.layer.shadowRadius = 3;
            self.thumbnailButton.userInteractionEnabled = YES;

            dispatch_async(dispatch_get_main_queue(), ^{
                self.isReadyForImage = YES;

                if (self.imageToBecomeThumbnail != nil) {
                [self setupThumbnail];
                }
            });

        });
self.selectionStyle = UITableViewCellSelectionStyleNone;

    }
    return self;
}
-(void)resetShadowPath {
   self.thumbnailButton.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.thumbnailButton.bounds].CGPath;
}

-(void)setThumbnail:(UIImage *)image {

    self.imageToBecomeThumbnail = image;

    if (self.isReadyForImage == YES) {
        [self setupThumbnail];
    }
}

-(void)setupThumbnail {
    [self.thumbnailButton setImage:self.imageToBecomeThumbnail forState:UIControlStateNormal];

    self.thumbnailButton.frame = CGRectMake(0, IMAGE_SPACING, self.imageToBecomeThumbnail.size.width, self.imageToBecomeThumbnail.size.height);
    self.thumbnailButton.center = CGPointMake(self.bounds.size.width / 2, self.thumbnailButton.center.y);
    [self resetShadowPath];
    [self.thumbnailButton addTarget:self action:@selector(thumbnailPressed:) forControlEvents:UIControlEventTouchUpInside];

    if (self.thumbnailButton.superview == nil) {
        [self addSubview:self.thumbnailButton];
    }
} 
```

旁注：我不是指我的调度队列在其他任何地方。它说每个人都需要一个独特的人，所以我破坏了这个随机字符串生成器代码。它是否需要是唯一的，或者它们是否不会再次被提及并不重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:49:44.590

独立于滚动填充缓存。一旦应用程序启动或有新数据可用，就开始在第二个线程中生成丢失的缩略图。

# telerik - 执行 RadGrid ItemCommand() 后控件未更新

> ID：10799272
> 
> 赞同：1
> 
> 时间：2012-05-29T12:35:25.613
> 
> 标签：telerik, updatepanel, postback, radgrid, itemcommand

我有一个 RadGrid，它在 RowClick 上应该向服务器发送一个特定的值。由于页面的性质，所有事件都在服务器端处理。我的 -Radgrid1- 在第一次访问页面时使用默认的“选择”所有 sqldatasource，然后，您可以通过单击另一个 RadGridAnother 来过滤 RadGrid1 项目。其中也有一个不同类别的列表。

会发生什么： 1\. 单击行 2\. 执行 radgrid1_ItemCommand(...,...) 。

下面的代码在编辑后更改为实际代码：

```
protected void MenuKampionati_ItemClick(object sender, RadMenuEventArgs e)
{
    Case = 2;
    Arg1 = "%%";
    Arg2 = e.Item.Value;
    string query = "EXECUTE get_ndeshje_kot31 " + Case.ToString() + ", '" + Arg1 + "', '" + Arg2 + "', 0";
    SqlDataSource MyDataSource = new SqlDataSource(ConfigurationManager.ConnectionStrings["basteConnectionString"].ConnectionString, query);
    this.GridNdeshjet.DataSource = MyDataSource;
    this.GridNdeshjet.DataBind();
} 
```

3\. 页面“刷新”并且 RadGrid1 中包含旧值 + 标签具有默认测试文本。

我已经阅读了有关此问题的所有 Telerik API，并徒劳地尝试了 previuos 解决方案。有什么我想念的吗？还是忘记做？有谁知道为什么会发生这种情况？

关于 AJAX，我的经理指示我不要“AJAX”这个页面。希望我的英语足够好解决这个问题。

编辑：我收到了关于我的查询的 PM，我已经在 sqlserver 管理工作室中对其进行了测试，它功能齐全。我现在添加包含此控件的 div 的 aspx 代码，外面有标签、一些 aspbutton，仅此而已与此 div 的内容无关。

第二次编辑，以前的网格更改为 RadMenu。Codebehind 还是一样的，只是与新的 Menu 相关联。

```
 <div>
 <table>
    <tr>

        <td><asp:UpdatePanel ID="panelGetTeGjitha"  runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false" >
                <ContentTemplate>
                <telerik:RadMenu ID="MenuKategoria" runat="server" DataSourceID="GetKategoriaDataSource" 
                        DataTextField="kategoria" DataValueField="vlera" Flow="Vertical" 
                            DataFieldID="kategoria"
                        onitemclick="MenuKategoria_ItemClick">
                </telerik:RadMenu>
                    <asp:SqlDataSource ID="GetKategoriaDataSource" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:basteConnectionString %>" 
                        SelectCommand="Get_Kategorite" SelectCommandType="StoredProcedure">
                        <SelectParameters>
                            <asp:SessionParameter DefaultValue="0" Name="Country" SessionField="country" 
                                Type="Int32" />
                        </SelectParameters>
                    </asp:SqlDataSource>
                </ContentTemplate>
            </asp:UpdatePanel></td>
        <td><asp:UpdatePanel ID="panelGetKampionati"  runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false" >
                <ContentTemplate>
                    <telerik:RadMenu ID="MenuKampionati" runat="server" DataSourceID="GetKampionatiDataSource" 
                        DataTextField="kampionati" DataValueField="kampionati" Flow="Vertical" 
                            DataFieldID="kategoria" onitemclick="MenuKampionati_ItemClick" >
                </telerik:RadMenu>
                    <asp:SqlDataSource ID="GetKampionatiDataSource" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:basteConnectionString %>" SelectCommand="SELECT kampionati FROM ndeshje (NOLOCK) 
            WHERE ((data &gt; getdate() and ndeshje_id_live IS NULL) OR (data &lt; getdate() AND data_hapjes &gt; getdate()                                  AND ndeshje_id_live IS NOT NULL))
            AND bllokuar = '0' AND live = 0 
            GROUP BY kampionati ORDER by kampionati"></asp:SqlDataSource>
                <telerik:RadGrid ID="GridNdeshjet" runat="server" GridLines="None" 
                     onneeddatasource="GridNdeshjet_NeedDataSource1">
                </telerik:RadGrid>
                </ContentTemplate>
            </asp:UpdatePanel></td>
        <td><asp:UpdatePanel ID="panelGetNdeshje"  runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false" >
                <ContentTemplate>
                    <telerik:RadMenu ID="MenuNdeshjeLive" runat="server" DataSourceID="GetNdeshjeLiveDataSource" 
                        DataTextField="Home" DataValueField="Home" Flow="Vertical" 
                            DataFieldID="Home" onitemclick="MenuKampionati_ItemClick" >
                </telerik:RadMenu>
                    <asp:SqlDataSource ID="GetNdeshjeLiveDataSource" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:basteConnectionString %>" SelectCommand="SELECT MAX(Home) AS Home, MAX(Away) AS Away FROM ndeshje (NOLOCK) 
         WHERE(Data &lt; getdate() AND data_hapjes &gt; getdate() AND ndeshje_id_live IS NOT null AND live = 1) 
         AND bllokuar = '0' GROUP BY Home, Away ORDER BY Home, Away"></asp:SqlDataSource>
                </ContentTemplate>
            </asp:UpdatePanel></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T10:59:50.293

让我知道是否有任何问题。

```
 <asp:UpdatePanel ID="panelGetKampionati" runat="server" UpdateMode="Conditional">
                    <ContentTemplate>
                        <telerik:RadMenu ID="MenuKampionati" runat="server" DataTextField="Name" DataValueField="ID"
                            Flow="Vertical" DataFieldID="ID" OnItemClick="MenuKampionati_ItemClick">
                        </telerik:RadMenu>
                        <telerik:RadGrid ID="GridNdeshjet" runat="server" GridLines="None" OnNeedDataSource="GridNdeshjet_NeedDataSource1">
                        </telerik:RadGrid>
                    </ContentTemplate>
                </asp:UpdatePanel> 
```

…………

```
 protected void MenuKampionati_ItemClick(object sender, RadMenuEventArgs e)
{

    GridNdeshjet.Rebind();
}

protected void GridNdeshjet_NeedDataSource1(object sender, GridNeedDataSourceEventArgs e)
{

    string strID = string.Empty; // just For Test

    if (MenuKampionati.SelectedItem != null)
    {
        // Get Selected Records  as per item selected in RadMenu

        //Case = 2;
        //Arg1 = "%%";
        string Arg2 = MenuKampionati.SelectedItem.Value;
        //string query = "EXECUTE get_ndeshje_kot31 " + Case.ToString() + ", '" + Arg1 + "', '" + Arg2 + "', 0";
        //SqlDataSource MyDataSource = new SqlDataSource(ConfigurationManager.ConnectionStrings["basteConnection
        strID = MenuKampionati.SelectedItem.Value; // just For Test
    }
    else
    {
        // Get All records From DB
    }

    // just For Test
    dynamic data = new[] {
            new { ID = 1, Name ="Name" + strID},
            new { ID = 2, Name ="Name"+ strID},
            new { ID = 3, Name ="Name"+ strID},
            new { ID = 4, Name ="Name"+ strID},
            new { ID = 5, Name ="Name"+ strID},
            new { ID = 6, Name = "Name"+ strID}
        };

    GridNdeshjet.DataSource = data;
} 
```

# gwt - 如何使用 GWT 将列表网格数据发送到电子邮件

> ID：10799276
> 
> 赞同：0
> 
> 时间：2012-05-29T12:35:28.537
> 
> 标签：gwt, smartgwt

谁能建议如何使用智能 gwt/GXT 将网格数据发送到电子邮件（撰写电子邮件）。因为我是智能 gwt 初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:10:11.290

我相信您会想要获取 ListGrid 的 DataSource 中的数据并将其发布到另一个处理程序以完成您想做的事情。我认为 SmartGWT 本身不会提供您正在寻找的功能。

# deployment - Azure 部署循环了很长时间

> ID：10799278
> 
> 赞同：1
> 
> 时间：2012-05-29T12:35:32.797
> 
> 标签：deployment, azure

```
12:08:41 - Preparing deployment for Windows Azure MSDN - Visual Studio Ultimate with     
Subscription ID: xxxxxxxxxxxxxxxxxxxx...
12:08:41 - Connecting...
12:08:41 - Verifying storage account 'cck'...
12:08:43 - Uploading Package...
12:41:00 - Creating...
12:57:14 - Created Deployment ID: xxxxxxxxxxxxxxxxx.
12:57:14 - Starting...
12:57:55 - Initializing...
12:57:55 - Instance 0 of role RIS2048.ConsultaClick.Web is in an unknown state
12:59:03 - Instance 0 of role RIS2048.ConsultaClick.Web is starting the virtual machine
13:00:40 - Instance 0 of role RIS2048.ConsultaClick.Web is in an unknown state
13:01:48 - Instance 0 of role RIS2048.ConsultaClick.Web is busy
13:06:12 - Instance 0 of role RIS2048.ConsultaClick.Web is cycling 
```

现在是 13 点 31 分，比过去 1 小时多，实例在 25 分钟开始循环（我不知道那是什么意思）。会完结吗？什么时候？

这是我的 ServiceDefinition.csdef 文件的一部分，其中包含 2 个虚拟应用程序：

```
<Site name="Web">
    <VirtualApplication name="CCKPt"
                      physicalDirectory=".">
      <VirtualDirectory name="images"
                        physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes\imgpt" />
    </VirtualApplication>
    <VirtualApplication name="CCKRo"
                      physicalDirectory=".">
      <VirtualDirectory name="images"
                        physicalDirectory="..\RIS2048.ConsultaClick.WWWPacientes\imgro" />
    </VirtualApplication>
    <Bindings>
      <Binding name="Endpoint1" endpointName="Endpoint1" />
    </Bindings>
  </Site> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:46:14.550

这是您刚刚构建的新应用程序吗？它是否在模拟器中本地运行？我总是检查的第一件事是用于诊断的连接字符串以及会话状态提供程序。默认情况下，您的诊断将写入模拟器存储（即本地计算机上的 SQL Express），并且 SQL Express 用于会话状态，这在 Windows Azure 中不存在。相反，您需要将其切换到缓存或 SQL Azure。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T22:20:25.373

可能意味着有问题。有时，如果幸运的话，您可以从 IntelliTrace 中获取更多关于它究竟在哪里轰炸的信息：

[http://blogs.msdn.com/b/jnak/archive/2010/06/07/using-intellitrace-to-debug-windows-azure-cloud-services.aspx](http://blogs.msdn.com/b/jnak/archive/2010/06/07/using-intellitrace-to-debug-windows-azure-cloud-services.aspx)

# ruby-on-rails - 如何以编程方式调用 Rails 迁移生成器？

> ID：10799280
> 
> 赞同：5
> 
> 时间：2012-05-29T12:35:34.827
> 
> 标签：ruby-on-rails

简单地`rails g`从命令行运行会遭受长时间的预加载。我想从运行中快速生成多个迁移`rails c`，所以我尝试了：

```
require 'rails/generators'
Rails::Generators.invoke('migration',['user_book_list_followings'],{:behavior=>:invoke, :destination_root=>Rails.root}) 
```

你问我从哪里得到 :behavior 和 :destination_root 参数？好吧，当我从命令运行生成器并记录确切的参数时，我在 Rails::Generators#invoke 执行点进行了检查。

然而，有趣的是，我收到了一条错误消息：

> 未为必需选项“--orm”提供值

我错过了什么吗？（我在 Rails 3.2.3 上）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-17T04:26:51.183

```
require 'rails/generators'
Rails::Generators.invoke("active_record:migration", ["create_something", "list_order:string", "name:string"], {migration: true, timestamps: true}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T04:08:37.343

一种加快调用 rails g 的解决方案是使用[spring。](https://github.com/rails/spring)

> Spring 是一个 Rails 应用程序预加载器。它通过让您的应用程序在后台运行来加速开发，因此您无需在每次运行测试、rake 任务或迁移时都启动它。

# delphi - 德尔福 DFM 检查器

> ID：10799286
> 
> 赞同：3
> 
> 时间：2012-05-29T12:36:17.400
> 
> 标签：delphi, dfm

我有下一个问题。其他团队已从组件更改（删除）属性，现在一些表单打开时显示消息**“读取表单属性时出错....不存在”**。如何在 Delphi 项目中检查正确性 dfm 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:51:51.157

您需要的不仅仅是 dfm 检查器。

如果对象读取它无法识别的属性，则会创建错误。您可能已经更新了一组（外部）控件，并且它们删除了一些属性。

如果这些是外部控件，您可能会获得已删除属性的列表。

接下来，您可以使用诸如 grep（或其他搜索工具）之类的工具来查找具有该属性的 dfm 文件。因此，您知道要打开和测试哪些表格。

还有其他一些可能导致此错误的原因：

*   有人手动编辑了 dfm 文件并犯了一个错误。
*   一个 TForm 后代变成了一个 TFrame 后代。

# xcode - 如何使用 Xcode 4.3.2 打开具有 objectVersion 38 的 Xcode 项目

> ID：10799289
> 
> 赞同：4
> 
> 时间：2012-05-29T12:36:23.703
> 
> 标签：xcode, macos

我有一个 Xcode 项目`MyProject.pbproj`，其中项目文件`project.pbxproj`具有属性`objectVersion = 38;`

当我尝试使用 Xcode 打开它时，我收到了消息

> 无法在“...”加载项目，项目版本不兼容。

我的 Xcode 版本是 4.3.2

我是 Xcode 和完整的 Mac OS 环境的新手，我不知道该怎么做。

如果我的项目对于我的 Xcode 版本来说太旧了，有没有办法将我的项目移植到更高版本的 Xcode？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T17:32:57.687

通过这样做，我能够解决类似的问题：

1.  在 XCode 中创建一个新项目。

2.  将源文件（.m 和 .h）从旧项目复制到新项目。

3.  使用 File > Add Files 将这些源文件添加到项目中。

4.  添加一些由于某种原因似乎丢失的“#import”行。

5.  将旧项目的 .NIB 文件转换为 .XIB 文件：

    一个。在 XCode 中打开 .NIB 文件。

    湾。选择“文件”>“复制”。

    C。选择“文件”>“保存”。选择 .XIB 格式并覆盖新项目的 .XIB 文件。

希望这可以帮助。我很想知道是否有更好的方法。

祝你好运，
菲利普。

# dotnetnuke - 无法将 DNN6 连接到 SQL Server 2012 开发人员版

> ID：10799295
> 
> 赞同：1
> 
> 时间：2012-05-29T12:36:44.640
> 
> 标签：dotnetnuke, sql-server-2012

我安装了 SQL Server 2008 Express 和 SQL Server 2012 Developer 版本。

当我想从 Visual Studio 2010 连接到 SQL Server 时，我只能选择连接，`VISTAUSER-PC/SQLEXPRESS`但我知道 2012 开发人员版的名称是`VISTAUSER-PC`，所以我只写了那个名称、测试连接及其工作。

DotNetNuke 只是让我选择连接到快速版，当我输入`VISTAUSER-PC`服务器名称时它无法连接。我知道 DNN 适用于 SQL Server 2012

[http://img825.imageshack.us/img825/7582/captureqnn.jpg](http://img825.imageshack.us/img825/7582/captureqnn.jpg)

![在此处输入图像描述](../Images/3acd53d5c0f9c2d2f22c83d327f658b1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:51:10.270

If your DotNetNuke install is on the same box as IIS/SQL2012/VS2012 then you just select "SQL Server 2005/2008 (Express) File". You need to make sure other SQL instances, except SQL 2012, are NOT running on your machine when you do this....

DotNetNuke ships with a database.mdf file which is used by default by SQLExpress.

To recap.. Do not edit your SQL connection strings in your web.config Stop any other SQL instance but SQL2012 Select the radio button beside "SQL Server 2005/2008 (Express) File".

I have noticed that SQL2012 uses a different account to run under so you may need to go in and change to "Network Service" so you can cleanly connect to SQL20102

Good luck...

# javascript - 我们可以将 OR 条件放在 .find() 函数中吗

> ID：10799301
> 
> 赞同：2
> 
> 时间：2012-05-29T12:36:58.923
> 
> 标签：javascript, jquery

我正在尝试做类似的事情：

```
$(".test").find("button or input[type=button]") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:37:54.540

是的，它被称为[多重选择器](http://api.jquery.com/multiple-selector)，它是一个逗号：

```
$(".test").find("button, input[type=button]") 
```

为了完整起见，请注意，[`:button`](http://api.jquery.com/button-selector/)这正是这样做的，但在几乎所有现代浏览器中都会变慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T12:37:59.630

只需使用逗号即`$(".test").find("button, input[type=button]");`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:38:10.937

```
$(".test").find("button, input[type=button]") 
```

# performance - 减慢循环动画as3

> ID：10799303
> 
> 赞同：0
> 
> 时间：2012-05-29T12:37:04.110
> 
> 标签：performance, actionscript-3, coin-flipping

这是我第一次在论坛上发帖，所以提前感谢任何花时间阅读/回答这个问题的人。

我正在尝试创建的基本上是一个抛硬币动画，它开始转动非常快，然后在大约 8 秒后减速停止，（随机生成的）一面朝上。

我已经完成了一个完整翻转的动画，它持续了大约半秒，并将它制作成一个电影剪辑......现在我被卡住了！

有什么想法可以在 actionscript3 中执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:28:44.697

解决这个问题的最快方法是使用一些非常基本的动作脚本。首先，创建 2 个动画（一个头，一个尾）。现在，您只需要一个帧即可，无需将影片剪辑放置在舞台上。使用以下或类似的代码：

```
var whichSide:int = 0;
var coin1:coinAnimation1 = new coinAnimation1();
var coin2:coinAnimation2 = new coinAnimation2();

whichSide = math.Round(math.Random(1));

if(whichSide == 1)
{
addChild(coin1);
}
else
{
addChild(coin2);
} 
```

只是不要忘记右键单击movieclip 并导出actionscript，给movieclips 类：coinAnimation1 和coinAnimation2。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:26:53.967

我已经使用 Tweener 类在“关键帧”上完成了这样的动画。您可以轻松地对具有特定过渡的关键帧参数进行补间...

基本示例：

```
Tweener.addTween(myMovieClip, {_frame:10, time:2.5}); 
```

更多关于 Tweener的信息在[这里](http://code.google.com/p/tweener/)

# c# - IEnumerable 扩展

> ID：10799319
> 
> 赞同：15
> 
> 时间：2012-05-29T12:38:01.613
> 
> 标签：c#, .net, extension-methods, ienumerable

我想制作一个`IEnumerable<TSource>`可以将自身转换为`IEnumerable<SelectListItem>`. 到目前为止，我一直在尝试这样做：

```
 public static 
      IEnumerable<SelectListItem> ToSelectItemList<TSource, TKey>(this 
      IEnumerable<TSource> enumerable, Func<TSource, TKey> text, 
                                       Func<TSource, TKey> value)
    {
        List<SelectListItem> selectList = new List<SelectListItem>();

        foreach (TSource model in enumerable)
            selectList.Add(new SelectListItem() { Text = ?, Value = ?});

        return selectList;
    } 
```

这是做这件事的正确方法吗？如果是这样，我如何从适当的值中提取值`Func<TSource, TKey>`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T12:43:11.023

你在重新发明轮子。这就是[Enumerable.Select](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.select.aspx)的用途。

**@KeithS 编辑：**要回答这个问题，如果你想要这个输出，你可以定义一个包装 Enumerable.Select 的扩展方法：

```
public static IEnumerable<SelectListItem> ToSelectItemList<TSource>(
  this IEnumerable<TSource> enumerable,
  Func<TSource, string> text,
  Func<TSource, string> value)
{ 
  return enumerable.Select(x=>new SelectListItem{Text=text(x), Value=value(x));
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-29T12:41:03.810

你在正确的道路上。

Funcs 是存储在变量中的方法，并且像普通方法一样被调用。

```
public static IEnumerable<SelectListItem> ToSelectItemList<TSource, TKey>(
    this IEnumerable<TSource> enumerable,
    Func<TSource, TKey> text,
    Func<TSource, TKey> value)
{
    List<SelectListItem> selectList = new List<SelectListItem>();

    foreach (TSource model in enumerable)
    {
        selectList.Add(new SelectListItem()
        {
            Text = text(model),
            Value = value(model)
        });
    }

    return selectList;
} 
```

如果我可以推荐，您的 Funcs 应该是`Func<TSource, string>`SelectListItem 中的文本和值是字符串。

**编辑**刚刚想到这个...

此外，您不必创建内部列表，而是可以执行*yield return*。以下是您方法的“优化”版本。

```
public static IEnumerable<SelectListItem> ToSelectItemList<TSource>(
    this IEnumerable<TSource> enumerable,
    Func<TSource, string> text,
    Func<TSource, string> value)
{
    foreach (TSource model in enumerable)
    {
        yield return new SelectListItem()
        {
            Text = text(model),
            Value = value(model)
        };
    }
} 
```

这是*yeild return*的参考。它允许您将结果作为可枚举的元素返回，以不可见的方式（对您）构造您的可枚举。

[http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-29T12:43:39.947

您只需要使用作为参数提供的两个函数来提取文本和值。假设 text 和 value 都是字符串，则不需要`TKey`type 参数。并且不需要在扩展方法中创建列表。使用迭代器块`yield return`更可取，以及如何构建 LINQ 中的类似扩展方法。

```
public static IEnumerable<SelectListItem> ToSelectItemList<TSource>(
  this IEnumerable<TSource> enumerable,
  Func<TSource, string> text,
  Func<TSource, string> value)
{ 
  foreach (TSource model in enumerable) 
    yield return new SelectListItem { Text = text(model), Value = value(model) };
} 
```

您可以像这样使用它（您需要提供两个 lambda）：

```
var selectedItems = items.ToSelecListItem(x => ..., x => ...); 
```

但是，您也可以使用`Enumerable.Select`：

```
var selectedItems = items.Select(x => new SelectListItem { Text = ..., Value = ... }); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T12:48:34.483

对我来说，这就像过河取水一样。为什么不简单地使用选择？

```
enumerable.Select(item => 
                    new SelectListItem{
                          Text = item.SomeProperty, 
                           Value item.SomeOtherProperty
                    }).ToList(); 
```

如果你真的想要一个方法，那么你可以这样做：

```
public static 
      IEnumerable<SelectListItem> ToSelectItemList<TSource, TKey>(this 
      IEnumerable<TSource> enumerable, Func<TSource, TKey> text, 
                                       Func<TSource, TKey> value)
    {
        return (from item in enumerable
                select new SelectListItem{
                      Text = text(item),
                      Value = value(item)
                }).ToList();  
    } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-29T12:57:01.757

实现您想要的 LINQ 方法是：

```
public static IEnumerable<SelectListItem> ToSelectItemList<TSource, TKey>(
    this IEnumerable<TSource> enumerable, 
    Func<TSource, TKey> textSelector, 
    Func<TSource, TKey> valueSelector)
{
    return from model in enumerable
           select new SelectListItem 
           { 
               Text = textSelector(model), 
               Value = valueSelector(model) 
           };
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T12:41:29.870

在扩展方法的主体中，这两个参数只是委托，您可以像运行任何其他函数一样运行它们：

```
 selectList.Add(new SelectListItem() { Text = text(model), Value = value(model)}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T14:17:26.523

其他解决方案也可以，但我认为 Martin Liversage 的解决方案是最好的方法：

```
IEnumerable<SelectListItem> selectListItems = items.Select(x => 
    new SelectListItem 
        { 
            Text = x.TextProperty, 
            Value = x.ValueProperty 
        }); 
```

# android - 如何从预览 android 解码 QR 码图像？

> ID：10799320
> 
> 赞同：0
> 
> 时间：2012-05-29T12:38:02.993
> 
> 标签：android, android-camera, qr-code, zxing

我初始化了相机并将其启动为预览模式。对于预览，我从[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html 获取源代码](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html)

现在我想用预览中的 zxing 库解码 QR 码，但我不知道该怎么做。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:48:32.057

如果你想用 zwing 解码二维码，你需要使用这两个类：

```
IntentIntegrator.java
IntentResult.java 
```

在您的 Activity 中像这样调用 Intent：

```
IntentIntegrator intentScan = new IntentIntegrator(this);
Collection<String> desiredBarcodeFormat = Collections.unmodifiableCollection(Arrays.asList("QR_CODE"));
intentScan.initiateScan(); 
```

您使用此方法在 Activity 中收到结果：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
    case IntentIntegrator.REQUEST_CODE:
        if (resultCode == RESULT_OK) {
            IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);
            if (scanResult != null)
               String out = scanResult.getContents();
        }
    }
} 
```

链接到文档：

[http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

链接到课程：

[http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/)

# wordpress - WordPress 404 覆盖

> ID：10799325
> 
> 赞同：1
> 
> 时间：2012-05-29T12:38:15.787
> 
> 标签：wordpress, .htaccess, http-status-code-404

我在这里运行了一个 Wordpress 站点，如果找不到页面/博客文章，它会显示自定义内容。它在前端完美运行 - 但是当网站加载时，它会为所有自定义内容页面发送 404 状态。

因此，Google 不会抓取任何自定义内容页面，这并不理想。

我查看了在 wp-app.php（第 1277-1286 行）中禁用 404 重定向功能，但这并没有解决问题。我想知道 status_header 函数（wp-includes/functions.php 中的第 1652 行以后）是否会是一个更好的去处，但我也没有运气。

任何人都遇到过这个问题，任何人都可以提供任何想法吗？

# php - 识别 JSON 内容

> ID：10799328
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:38:24.350
> 
> 标签：php, json

我有以下数据

```
{
    total: "156",
    list: [

            {
            "nodeRef": "workspace://SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67", 
            "id": "e364714d-14bc-4e13-bfff-c1f86a8cbe67",
            "name": "Morning Class_Dadi Janki_29-05-12_H_London.mp4",
            "mimetype": "video/mp4",
            "title" : "Morning Class" ,
            "author": "Dadi Janki",
            "class_date": "May 29, 2012 12:00:00 AM",
            "created": "May 29, 2012 12:32:44 PM",
            "size": "97,156,420",
            "lang": "h",
            "totalViews": "11",
            "totalDownloads": "0",
            "downloadUrl": "/d/a/workspace/SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67/Morning%20Class_Dadi%20Janki_29-05-12_H_London.mp4"
            }
    ]
} 
```

当我尝试`var_dump`它时

它给了我空值。我如何知道数据是否已`JSON`编码？

编辑：这是我获得上述内容的`get_contents`代码`url`

```
 $url = ""; // URL
 $contents = file_get_contents($url);
 $data = json_decode($contents);
 var_dump($data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:00:24.070

```
<?php

$str = '{
    total: "156",
    list: [

            {
            "nodeRef": "workspace://SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67", 
            "id": "e364714d-14bc-4e13-bfff-c1f86a8cbe67",
            "name": "Morning Class_Dadi Janki_29-05-12_H_London.mp4",
            "mimetype": "video/mp4",
            "title" : "Morning Class" ,
            "author": "Dadi Janki",
            "class_date": "May 29, 2012 12:00:00 AM",
            "created": "May 29, 2012 12:32:44 PM",
            "size": "97,156,420",
            "lang": "h",
            "totalViews": "11",
            "totalDownloads": "0",
            "downloadUrl": "/d/a/workspace/SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67/Morning%20Class_Dadi%20Janki_29-05-12_H_London.mp4"
            }
    ]
}
';

$str = preg_replace('#([^\s\"]+): #is', '"\\1": ', $str);

echo $str;

?> 
```

![在此处输入图像描述](../Images/7e82a38e74a8f5e3b0e9fc81b2917aec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:00:45.593

首先，每当您将获得任何 json 值或发送任何 json 格式的值时，首先检查 Json 是否有效..

Json 验证器和格式化器：-

```
http://jsonformatter.curiousconcept.com/ 
```

Json 验证器：-

```
http://www.jsonlint.org/ 
```

然后在您的代码中尝试查找错误：- `json_last_error`

并尝试对 Url 值使用 Json 编码和解码.. 这总是有帮助的..

有效的Json：-

```
{
   "total":"156",
   "list":[
      {
         "nodeRef":"workspace://SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67",
         "id":"e364714d-14bc-4e13-bfff-c1f86a8cbe67",
         "name":"Morning Class_Dadi Janki_29-05-12_H_London.mp4",
         "mimetype":"video/mp4",
         "title":"Morning Class",
         "author":"Dadi Janki",
         "class_date":"May 29, 2012 12:00:00 AM",
         "created":"May 29, 2012 12:32:44 PM",
         "size":"97,156,420",
         "lang":"h",
         "totalViews":"11",
         "totalDownloads":"0",
         "downloadUrl":"/d/a/workspace/SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67/Morning%20Class_Dadi%20Janki_29-05-12_H_London.mp4"
      }
   ]
}

Json:--

{"total":"156","list":[{"nodeRef":"workspace://SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67","id":"e364714d-14bc-4e13-bfff-c1f86a8cbe67","name":"Morning Class_Dadi Janki_29-05-12_H_London.mp4","mimetype":"video/mp4","title":"Morning Class","author":"Dadi Janki","class_date":"May 29, 2012 12:00:00 AM","created":"May 29, 2012 12:32:44 PM","size":"97,156,420","lang":"h","totalViews":"11","totalDownloads":"0","downloadUrl":"/d/a/workspace/SpacesStore/e364714d-14bc-4e13-bfff-c1f86a8cbe67/Morning%20Class_Dadi%20Janki_29-05-12_H_London.mp4"}]} 
```

# javascript - 需要 js jquery 插件

> ID：10799331
> 
> 赞同：5
> 
> 时间：2012-05-29T12:38:35.550
> 
> 标签：javascript, jquery, requirejs

我是否必须为我尝试在 require.js 中使用的每个 jQuery 插件编写包装器？我无法使用订单插件，他们仍然给我他们依赖 jQuery 的错误。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T09:22:15.400

RequireJS 2.0 有一个`shim`选项允许您使用较旧的非 AMD 脚本作为模块 - [http://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:40:07.010

你读过[如何在 jquery 中使用 require js](http://requirejs.org/docs/jquery.html)吗？它解释了您可以使用 require js 通过使用组合的 jquery/requirejs 文件来加载 jquery 和 jquery 插件。[您可以在此处](http://requirejs.org/docs/download.html#samplejquery)找到示例项目。[示例项目的自述](https://github.com/jrburke/require-jquery)文件中还列出了几种替代策略。

# c# - 使用 Autofac 创建具有依赖关系的类的实例

> ID：10799333
> 
> 赞同：17
> 
> 时间：2012-05-29T12:38:55.157
> 
> 标签：c#, asp.net-mvc, dependency-injection, inversion-of-control, autofac

**问题：**

假设类：

```
public class MyAwesomeClass
{
   private IDependCls _dependCls;
   public MyAwesomeClass(IDependCls dependCls)
   {
       _dependCls = dependCls;
   }

} 
```

在其他地方我需要获取该类的实例，如下所示：

```
public class SomewhereElse
{
    public void AwesomeMethod()
    {
        //...
        // AwesomeStuff
        //...

        var GetErDone = new MyAwesomeClass();  // PROBLEM! No constructor with 0 arguements
    }
} 
```

问题是，我

**建议的解决方案1：**

A）必须制作一个额外的构造函数来解决依赖关系？例如：

```
 public MyAwesomeClass() // new constructor
   {
       _dependCls = DependencyResolver.Current.GetService<IDependCls>();
   }

public class SomewhereElse
{
    public void AwesomeMethod()
    {
        var GetErDone = new MyAwesomeClass();  // IT WORKS!!
    }
} 
```

**建议的解决方案 2：**

`AwesomeMethod`B）在之前 使用里面的解析器`var GetErDone`

```
public class SomewhereElse
{
    public void AwesomeMethod()
    {
        var depCls = _dependCls = DependencyResolver.Current.GetService<IDependCls>();
        var GetErDone = new MyAwesomeClass(depCls);  // IT WORKS!!
    }
} 
```

**Autofac 解决方案？**

C）其他一些Autofac方式？

如果可能的话，寻找最佳实践以及良好的 Autofac 解决方案。我认为第一种方式是最糟糕的，因为可选的依赖关系可能会导致很多混乱。

**概括：**

我如何获得`new MyAwesomeClass()`何时`MyAwesomeClass`具有依赖关系？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T14:13:04.390

看看[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)模式。

你是对的，拉起依赖解决方案只会将问题转移到另一个地方。但是，如果您继续在对象图中向上移动它，您将到达应用程序的入口点。在那里你将组成你的对象图。

将其与[Service Locator 反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)（在您的案例中在客户端类中使用 DependencyResolver）进行比较，您会发现 Composition Root 是一个出色的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:42:04.310

首先，除了构造函数注入之外，您还可以使用[属性注入](http://code.google.com/p/autofac/wiki/PropertyInjection)和[方法注入](http://code.google.com/p/autofac/wiki/MethodInjection)。但是构造函数注入是最常见也是最快的方法，所以我建议坚持下去。

你需要做的第二件事是`MyAwesomeClass`在 Autofac 容器中注册你的依赖项，他们的主页上有一些很好的[例子。](http://code.google.com/p/autofac/)

最后一件事——你不应该直接创建实例`MyAwesomeClass`——使用 Autofac 代替。这是一个更新的示例：

```
public void AwesomeMethod()
{
    //...
    // AwesomeStuff
    //...

    var GetErDone = DependencyResolver.Current.GetService<MyAwesomeClass>();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-02T16:11:44.477

您可以使用反射创建“MyAwesomeClass”的新实例，使用 Autofac 解析构造函数参数。

```
 public static T Instance<T>() where T : class
    {
        Type instanceType = typeof(T);
        ConstructorInfo constructorInfo = instanceType.GetConstructors()[0];
        ParameterInfo[] constructorParamsInfo = constructorInfo.GetParameters();
        object[] constructorParams = new object[constructorParamsInfo.Length];

        for (int i = 0; i < constructorParamsInfo.Length; i++)
        {
            var parameterInfo = constructorParamsInfo[i];
            var type = parameterInfo.ParameterType;
            constructorParams[i] = Container.Resolve(type);
        }

        object instance = Activator.CreateInstance(instanceType, constructorParams);

        return (T)instance;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:47:40.370

如果你想通过 Autofac 自动解析实例，你只能从这里选择

*   注入你的类的构造函数
*   通过使用注入属性

    `var builder = new ContainerBuilder();`

    `builder.RegisterType<Foo>().PropertiesAutowired();`

*   使用全局访问权限`DependencyResolver.Current.GetService<IFoo>();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:25:23.060

在包含`MyAwesomeMethod`take`MyAwesomeClass`作为构造函数依赖的类中。Autofac 将负责实例化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-16T09:42:05.183

我知道这个问题很老，但我在描述类动态实例化的 autofac 文档上找到了一个非常有用的链接。

[Autofac 动态实例化](https://autofaccn.readthedocs.io/en/latest/resolve/relationships.html#dynamic-instantiation-func-b)

也许它可能对某人有帮助。

# windows-phone-7 - 在 WP7 ListBox 控件中显示应用设置

> ID：10799335
> 
> 赞同：0
> 
> 时间：2012-05-29T12:39:11.640
> 
> 标签：windows-phone-7, isolatedstorage, appsettings, listbox-control

我有一个绑定到`ObservableCollection`.

我的 XAML 代码：

```
<ListBox Margin="12,148,12,90" ItemsSource="{Binding FuelRecords}" Name="ListBox1">
        <ListBox.ItemTemplate>
            <DataTemplate>
               <StackPanel>
                   <TextBlock Text="Fuel quantity: {Binding Quantity}" FontSize="20" />
               </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

我想在数量之后显示一个计量单位（升、加仑）。测量单位保存`IsolatedStorageSettings`在`AppSettings`类（`VolumeSetting`属性）中。

最终结果：燃油量：23.45 加仑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:07:03.433

```
public class Fuel
{
    public double QuantityGallons { get; set; }

    public double Quantity
    {
        get
        {
            return QuantityGallons * (AppSettings["VolumeSetting"] == Units.Pounds) ? 1.5 : 1.0;
        }
    }

    public string Units
    {
        get
        {
            return (AppSettings["VolumeSetting"] == Units.Pounds) ? "pound" : "gallon";
        }
    }
} 
```

xml:

```
<StackPanel Orientation="Horizontal">
    <TextBlock Text="Fuel quantity: " FontSize="20" />
    <TextBlock Text="{Binding Quantity}" FontSize="20" />
    <TextBlock Text="{Binding Units}" FontSize="20" />
</StackPanel> 
```

# java - MySQL ORDER BY 不适用于数字

> ID：10799336
> 
> 赞同：4
> 
> 时间：2012-05-29T12:39:12.483
> 
> 标签：java, mysql

ORDER BY 不适用于数字，但如果我为包含字母数字或仅字符的列提供它，它工作得很好。我给出的代码是，

```
dbResult = dbStatement.executeQuery("SELECT Bid_Number,Vendor_Name,Vendor_Address,Amount,Tax_Percentage,Amount_Aftertax,Expected_Deliverydate,Vendor_Code FROM purchase_bid    where PE_Number='"+PENumber+"' ORDER BY Amount_Aftertax ASC"); 
```

如果在我的表中我的`Amount_Aftertax`列值为，

> 840.0
> 780.0
> 3180.0
> 3810.0

通过提供此代码，我将根据此顺序获得结果

> 3180.0
> 3810.0
> 780.0
> 840.0

希望回复请...提前谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:41:57.143

听起来您的列类型仍然是*文本*列，即使它包含数字 - 所以它们是按字典顺序排序的。如果您希望它们被*视为*数字，您也应该将*列*类型设为数字。

当然，这不仅会影响排序 -当您为列使用适当的类型时，您的*所有代码都可能会得到改进。*仅仅因为您*可以*在字符串中粘贴几乎任何数据并不意味着这是一个好主意。*选择与所涉及的实际*数据最匹配的数据类型。

此外，您不应该像那样指定 PENumber 值 - 您应该使用准备好的语句，并在 SQL 中使用占位符参数，您可以单独为其提供值。动态构建 SQL 可能会导致[SQL 注入漏洞](http://bobby-tables.com)，以及不必要的转换和代码与数据的不良分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:42:21.057

它正在工作..它按字母顺序排序！您已将此列声明为 varchar，因此将其中的数据视为字符串。所以 3 在字母表中位于 8 之前，这就是为什么它在它之前.. 如果要将数字排序为数字而不是字符串，则需要将列类型更改为 int！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-04T07:47:42.913

`SELECT * FROM table_name ORDER BY convert(`column_name`, decimal) DESC;`

它应该是这样的。您应该首先将您的 varchar2 转换为十进制并进行排序。

注意：确保在 column_name 中使用 `` 而不是 ''。此外，您最好将字段类型转换为数字，如果为时已晚，请使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:44:54.837

结果以这种方式排序，因为它将其视为文本。'3' 在 '7' 之前，所以以 '3' 开头的任何东西，即使它是一个更大的数字，也会像一个单词一样被排序。

确保您的数据库具有格式化为数值的字段 - 在您的情况下，您需要一个`float`类型，因为您的数字后面似乎有小数位。完成后，它将正确格式化。

# facebook - 我们可以要求最终用户提供 Facebook 用户名和密码以连接到我们的网站吗

> ID：10799338
> 
> 赞同：-4
> 
> 时间：2012-05-29T12:39:15.673
> 
> 标签：facebook

我有一个奇怪的需求，我会提示最终用户输入 facebook 的用户名和密码以连接到我的网站。

我很清楚这是错误的，因为有一个叫做 Facebook 连接按钮的东西，但有可能吗？

如果不可能，我如何使用 facebook 连接按钮。我经历了很多例子，但没有一个是清楚的。他们要求一些 API 密钥等我不知道它是什么？

任何帮助都受到高度赞赏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:47:17.577

不，这违反了[Facebook 平台政策](http://developers.facebook.com/policy/)：

> 2\. 您不得包含代理、请求或收集 Facebook 用户名或密码的功能。

你为什么想这么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:45:13.380

不，您不应该向他们询问他们的用户名/密码，因为这对您没有好处，您将对这些数据负责并确保它不会丢失/被盗等。

只需用谷歌搜索“facebook api key”链接到一个网站和 2 个 youtube 视频，详细说明如何获取它：

[http://help.webscribble.com/display/jconnector/Getting+the+Facebook+Connect+API+Key](http://help.webscribble.com/display/jconnector/Getting+the+Facebook+Connect+API+Key)

# c++ - 如何将单字节编码字符串转换为 UTF-32？

> ID：10799339
> 
> 赞同：1
> 
> 时间：2012-05-29T12:39:18.753
> 
> 标签：c++, unicode, string-conversion

我知道输入字符串的代码页，例如 CP 852，现在我需要将其转换为通用 UCS-4 格式。我应该使用什么功能。我正在使用 MingW 在 WinXP 下进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:17:57.237

如果你真的确定你想要 UTF-32 编码的字符串（我建议先做一些研究 - 这几乎总是一个糟糕的选择），你可以从[MultiByteToWideChar 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)开始将 CP 852 编码的字符串转换为 UTF-16，然后编写自己的函数将 UTF-16 转换为 UTF-32。

# prolog - SWI-Prolog 中的未定义过程

> ID：10799340
> 
> 赞同：3
> 
> 时间：2012-05-29T12:39:20.690
> 
> 标签：prolog

好的，我得到了这两个谓词`hangman`和`graphics`

```
fail([]).

hangman:-
    getPhrase(Ans), 
    !, 
    write('Welcome to hangman.'),
    nl,
    fail(FailedList), 
    graphics(FailedList), %<--- The call is made here.
    name(Ans,AnsList), 
    makeBlanks(AnsList, BlankList),
    getGuess(AnsList,BlankList, FailedList).

graphics(FailedList):-
    length(FailedList, L),
    L == 0,
    write('-----------'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('|'), nl,
    write('/\'), nl. 
```

为什么我会收到错误：`ERROR: hangman/0: Undefined procedure: graphics/1`？
请注意，如果我将谓词`graphics`放在`hangman`注释中，我的程序就可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T09:13:51.317

（这个答案并不是关于所提出的问题，所以请回答@SeçkinSavaşçı，他在回答问题方面做得很好，这更像是一次代码审查）

在这里，您显然想要测试列表是否为空，并通过显示一些内容做出相应的反应。对于列表是否为空部分的测试，您做错了：

```
graphics(FailedList):-
    length(FailedList, L),
    L == 0,
    % some IO stuff 
```

在 prolog 中，您可以以更直接的方式使用统一：

```
graphics(FailedList):-
    length(FailedList, 0),
    % some IO stuff 
```

或者，更好的是，您直接测试头部中的空列表作为执行谓词主体的条件：

```
graphics([]):-
    % some IO stuff 
```

对于 IO 部分，你又做错了。例如，SWI-Prolog 有一个`writeln/1`谓词，可以使您的代码更轻：

```
graphics([]):-
    writeln('-----------'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('|'),
    writeln('/\\'). 
```

更好的是，`format/1`可以使用谓词：

```
graphics([]):-
    format('-----------~n|~18~n|~n|~n|~n|~n|~n|~n|~n/\\'). 
```

主要谓词似乎也有一些问题，但是如果您卡在某个地方，我会让您研究一下并提出问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T18:41:45.720

```
 write('/\'), nl. 
```

在最后一行中，您使用 . 转义结束引号`\'`。将其更改为：

```
 write('/\\'), nl. 
```

顺便说一句：@Mog 在我查看评论之前已经写了答案，我对其进行了测试，现在它找到了 graphics/1。

# php - 预加载pdf文件然后重定向

> ID：10799342
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:39:35.650
> 
> 标签：php, javascript, pdf

我的网站上有大型 pdf 文件，我想在加载 pdf 时显示“正在加载 pdf 文件”页面。并且一旦加载自动重定向到 pdf 文件。

有没有办法做到这一点？

如果有人知道如何做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:44:12.963

使用 Ajax [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您也使用此方法：

首先显示写入的元素（例如`<div class="loading"></div>`）（“PDF 加载”）。然后在加载 PDF 时隐藏该元素。

```
$("pdf container").load(function(){
$(".loading").hide();
}); 
```

# perl - 是否有一条线来获得拆分的第一个元素？

> ID：10799344
> 
> 赞同：30
> 
> 时间：2012-05-29T12:39:38.213
> 
> 标签：perl

而不是写：

```
@holder = split /\./,"hello.world"; 
print @holder[0]; 
```

是否可以只做一个单线来获得拆分的第一个元素？就像是：

```
print (split /\./,"hello.world")[0] 
```

尝试第二个示例时出现以下错误：

```
print (...) interpreted as function at test.pl line 3.
syntax error at test.pl line 3, near ")[" 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-29T12:42:16.920

你应该试试你的直觉。这就是如何做到这一点。

```
my $first = (split /\./, "hello.world")[0]; 
```

您可以使用仅获取第一个字段的列表上下文分配。

```
my($first) = split /\./, "hello.world"; 
```

要打印它，请使用

```
print +(split /\./, "hello.world")[0], "\n"; 
```

或者

```
print ((split(/\./, "hello.world"))[0], "\n"); 
```

加号是因为语法歧义而存在的。它表明以下所有内容都是`print`. [perlfunc 文档`print`](http://perldoc.perl.org/functions/print.html)解释了。

> 注意不要在 print 关键字后面加上左括号，除非您希望相应的右括号终止 print 的参数；在所有参数周围加上括号（或插入 a `+`，但这看起来不太好）。

在上面的案例中，我发现这个案例`+`更容易编写和阅读。YMMV。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T17:34:40.260

如果您坚持使用`split`它，那么您可能会将一个长字符串拆分为多个字段，只丢弃除第一个之外的所有字段。第三个参数 to`split`应该用于限制将字符串划分为的字段数。

```
my $string = 'hello.world';

print((split(/\./, $string, 2))[0]); 
```

但我相信正则表达式更好地描述了你想要做什么，并完全避免了这个问题。

任何一个

```
my $string = 'hello.world';
my ($first) = $string =~ /([^.]+)/; 
```

或者

```
my $string = 'hello.world';
print $string =~ /([^.]+)/; 
```

将为您提取第一个非点字符字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T13:00:04.670

> 尝试第二个示例时出现以下错误：“test.pl 第 3 行的语法错误，靠近“)[”

不，如果您按照应有的方式启用了警告，您会得到：

```
print (...) interpreted as function at test.pl line 3.
syntax error at test.pl line 3, near ")[" 
```

这应该是您的问题的一个重要线索。

# jquery - 将选项添加到第二个选择元素

> ID：10799345
> 
> 赞同：5
> 
> 时间：2012-05-29T12:39:39.187
> 
> 标签：jquery

我搜索以了解如何将新的选择元素放置在选择列表的第二位

*层次结构：*

*   第一：白色元素
*   第二：我的新元素（那里：添加）
*   下一个：我的电子邮件列表

*我的功能：*

```
function classAppend(){
    $('#email').append(
        $('<option></option>').val('').addClass('new_address_mail').html("Add")
    );
} 
```

有人知道有什么选择吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T12:43:34.570

尝试这个：

```
$('#email option:first').after($('<option />', { "value": '', text: 'My new option', class: 'new_address_mail' })); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:42:33.617

您可能必须选择第一个子`#email`元素并插入您的元素`insertAfter`：

```
$('<option></option>')
   .val('')
   .addClass('new_address_mail')
   .html("Add")
   .insertAfter($('#email').children().first()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:46:46.127

```
$("<option value='x'>newly added</option>").insertAfter($("select option:first"));​ 
```

[演示](http://jsfiddle.net/ranganadh/DPBzN/)

# node.js - 获取不在节点上工作的远程 IP 地址

> ID：10799346
> 
> 赞同：2
> 
> 时间：2012-05-29T12:39:44.423
> 
> 标签：node.js, express

我正在尝试使用 express 从传入连接中获取远程 IP 地址。已经尝试了在网上找到的常见解决方案：

1.  req.headers['x-forwarded-for'] / 结果：始终未定义
2.  req.socket.remoteAddress / 结果：始终获取网关 IP（IE：192.168.1.1）而不是外部地址。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:45:41.293

您是否通过在自己机器上的 VM 中运行应用程序来测试这一点？如果是这样，你得到了正确的答案。X-Forwarded-For 是空的，因为没有代理，并且您在主机上看到虚拟机用来路由的虚拟接口。那是请求来自的IP。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-29T12:46:42.527

这是我在[http://th.issh.it/ip使用的一些代码](http://th.issh.it/ip)

也许它是区分大小写的？

```
exports.iptoy = function(req,res) {
    var clientip = req.socket.remoteAddress;
    var xffip  = req.header('X-Forwarded-For');
    var ip = xffip ? xffip : clientip;
    if(req.params.format == 'json')
        res.send({client:clientip,xforwardedfor:xffip});
    else
        res.send(ip+"\n");
} 
```

# javascript - 谷歌浏览器，关闭标签事件监听器

> ID：10799347
> 
> 赞同：0
> 
> 时间：2012-05-29T12:39:55.243
> 
> 标签：javascript, google-chrome-extension

我正在开发 chrome 扩展程序，我需要在选项卡关闭时获取事件，以便我可以将帖子发送到服务器。这就是我的自动取款机。

```
chrome.tabs.onRemoved.addListener(function (tabId) {
   alert(tabId);
}); 
```

但我无法让它工作。有人有什么想法吗？

编辑：

当我运行它时，它说

> 未捕获的类型错误：无法读取未定义的属性“onRemoved”

编辑2：清单.json

```
{
"name": "WebHistory Extension",
"version": "1.0",
"manifest_version": 2,
"description": "storing webhistory",
    "content_scripts":[
        {
            "matches": ["http://*/*"],
            "js": ["jquery-1.7.min.js","myscript.js"],
            "run_at": "document_end"
        }
    ],
    "permissions" : ["tabs"]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:31:49.350

您不能`chrome.tabs`在内容脚本中使用 API：

> 但是，内容脚本有一些限制。他们不能： 使用 chrome.* API（chrome.extension 的部分除外）

[资源](http://code.google.com/chrome/extensions/content_scripts.html)

您需要做的是在内容脚本和后台页面之间建立通信。后台页面可以访问`chrome.tabs`API：

> 这些限制并不像听起来那么糟糕。内容脚本可以间接使用 chrome.* API，访问扩展数据，并通过与其父扩展交换消息来请求扩展操作。

[资源](http://code.google.com/chrome/extensions/content_scripts.html)

一切都在内容脚本文档的前五段中。

# c# - NHibernate 一对多只获取单行

> ID：10799350
> 
> 赞同：0
> 
> 时间：2012-05-29T12:40:10.233
> 
> 标签：c#, nhibernate

我在 c# 中使用 nhibernate，我有两个类`PartnerOrgUnit`，`PartnerUser` 并且在数据库中我有 3 个`PartnerUsers`与`PartnerOrgUnit`.

但是当我这样做`_partnerOrgUnitRepository.FindAll()`时，它只会给我第一`PartnerUsers`行。

FindAll() 方法包括 -

```
session.CreateCriteria(typeof(T)).List<T>() 
```

我的代码如下 -

```
public class PartnerOrgUnit {
    public IList<PartnerUsers> PartnerUsers { get; set; }
}

public class PartnerUsers{
    public string FirstName { get; set; }
    public string MiddleName { get; set; }
    public string LastName { get; set; }
    public string EmailAddress { get; set; }
    public string WorkPhone { get; set; }
} 
```

在`PartnerOrgUnit.hbm.xml`文件中我有类似的代码 -

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
    namespace="PMPS.Model.Partner.OrgUnit"
    assembly="PMPS.Model">

        <bag name="PartnerUsers" inverse="true" lazy="true" cascade="all">
            <key column="PartnerUserId"/>
            <one-to-many class="PMPS.Model.Partner.User.PartnerUsers"/>
        </bag>
    </class>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:30:35.323

`inverse="true"`说`PartnerUsers`应该保持关联，但它没有反向引用这样做。我怀疑有代码只是将 3 添加`PartnerUsers`到`PartnerOrgUnit`但 Nhibernate 不会保存它们。

# c# - 可部署的数据库测试方法

> ID：10799352
> 
> 赞同：1
> 
> 时间：2012-05-29T12:40:17.933
> 
> 标签：c#, database, testing

我目前正在创建一个使用 sql CE 数据库的应用程序，我已经使该数据库可以与该应用程序一起部署，但是我目前遇到的问题是我需要运行 TestMethods 但这会出错当它在调试或发布下的“testingProject”文件夹中找不到数据库时，因为它是数据目录

```
using (SqlCeConnection sqlCon = new SqlCeConnection(@"Data Source=|DataDirectory|\database.sdf;Persist Security Info=False;")) 
```

上面的代码是我的连接字符串，所以我猜这意味着测试正在运行并在其自己的数据目录中搜索数据库

在不更改数据库连接字符串、数据库位置并且仍然让我的应用程序可部署的情况下，我可以做什么的任何帮助？还是我在问一些不可能的事情？

*编辑*

```
[TestMethod]
        public void TestForReadingFromDB()
        {
            List<string> list = class.readDB();
            Assert.IsNotNull(list);
            Assert.AreNotEqual(0, list.Count);
        } 
```

刚刚添加到当前失败的测试方法中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:46:22.027

在测试项目中，您可以使用覆盖 DataDirectory 位置

```
AppDomain.CurrentDomain.SetData("DataDirectory", <PATH_TO_DATA_DIRECTORY>); 
```

例如，在我的 app.config 文件中，我拥有的测试项目

```
 <appSettings>
    <add key="DataDirectory" value="..\..\Database"/>
  </appSettings> 
```

在我的测试夹具底座中，我有：

```
var dataDirectory = ConfigurationManager.AppSettings["DataDirectory"];
var absoluteDataDirectory = Path.GetFullPath(dataDirectory);
AppDomain.CurrentDomain.SetData("DataDirectory", absoluteDataDirectory); 
```

这会将 DataDirectory 设置为测试项目文件夹结构下的文件夹 /Database。

一旦我在那里删除或创建数据库的副本，我就可以轻松地运行集成测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:01:59.047

这就是我在初始化数据类中指定用于测试的数据目录路径的方式

```
public class TestClasse
{
    public TestClass()
    {
         GetAppDataDirectoryForTesting();
    }

    private static string GetAppDataDirectoryForTesting()
    {   //NOTE: must be using visual studio test tools for this to work
        string path = AppDomain.CurrentDomain.BaseDirectory;
        var dirs = path.Split(Path.DirectorySeparatorChar);

        var appDataPath = "";
        for (int i = 0; i < dirs.Length - 3; i++)
        {
            appDataPath += dirs[i] + Path.DirectorySeparatorChar.ToString();
        }

        appDataPath = appDataPath + "[foldername(i.e. in my case project name)]" + Path.DirectorySeparatorChar.ToString() + "App_Data";
        return appDataPath;
    }

    [TestMethod]
    public void SomeTestMethod()
    {
        ....test code 
    }
} 
```

# xpages - sessionAsSignerWithFullAccess 用于访问带有 reader 字段的 notesdocument

> ID：10799360
> 
> 赞同：1
> 
> 时间：2012-05-29T12:40:58.407
> 
> 标签：xpages, xpages-ssjs

我有一个数据库，其中包含带有读者字段的文档，其中只有签名者作为读者。

我需要打开一个 Xpages 以进行公共访问，在编辑模式下显示带有 URL 的 evenry 文档：

`http://PATHDB/Edit.xsp?action=editDocument&documentId=UNID`

有没有使用 sessionasSigner 凭据打开数据源并显示和编辑字段的解决方案？

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:34:07.537

如何使用托管 bean 而不是文档数据源并将所有逻辑构建到其中？让您完全控制数据的检索/存储方式，并解决您遇到的问题。

您可以从[这篇](http://per.lausten.dk/blog/2012/02/creating-your-first-managed-bean-for-xpages.html "这个")关于如何在 XPages 中使用托管 bean 的文章开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T09:58:56.157

Here you can find an example how this can be realized: [http://hasselba.ch/blog/?p=723](http://hasselba.ch/blog/?p=723)

# java - 解析来自 SOLR 的响应

> ID：10799365
> 
> 赞同：0
> 
> 时间：2012-05-29T12:41:31.413
> 
> 标签：java, json, solr

```
{responseHeader={status=0,QTime=0,params={q=ketan,wt=[javabin,javabin],version=2.2}},response={numFound=1,start=0,docs=[SolrDocument[{user_first_name=Ketan, customerid=5,killname=Hockey, areaname=Paud, categoryname=Sports, last_name=Kore, statename=Maharashtra, cityname=Pune, contactno=124555698}]]}} 
```

我已收到此响应 SOLR 并希望从中获取 JSONObject SOlr 文档。请帮助我如何解析此响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:06:37.580

您提到的字符串是一个 json 字符串（json 是 Javascript Object Notation）。尝试使用 java-json lib 对其进行解码。[这是一个例子](http://code.google.com/p/json-simple/wiki/DecodingExamples)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T09:29:34.007

我发现这篇文章很有用。虽然问这个问题的时候已经很成熟了，但它也可能对其他人有所帮助，因为我遇到了同样的问题。我使用 Google API for JSON - GSON 解决了​​这个问题。

Solr 给出的响应不是 JSON 格式。我们需要转换它。我从 solr 检索响应并将其转换为 json 对象。

最初，我的回应是：

```
 {docs=[SolrDocument{id=1, uuid=7fe08f79-e184-454d-908f-08b32583a822, packName=Workflow Logger-Pack, packDescription=Workflow Logger-Pack, packAuthor=NetApp, packVersion=1.0.0, packDate=May 22, 2014, 3:10 pm, entityName=[Workflow Logger, Wait, Logging cmd, Test cmd for multiple Parameter Types], entityDescription=[Workflow Logger, Wait Command, Logging command, Test cmd for multiple Parameter Types], entityType=[Workflow, Command, Command, Command], _version_=1468794552324194304}, SolrDocument{id=2, uuid=7fe08f79-e184-454d-908f-08b32583a822, packName=Workflow Logger-Pack New, packDescription=Workflow Logger-Pack, packAuthor=NetApp, packVersion=2.0.0, packDate=May 22, 2014, 3:13 pm, entityName=[Workflow Logger, Wait, Logging cmd, Test cmd for multiple Parameter Types], entityDescription=[Workflow Logger, Wait Command, Logging command, Test cmd for multiple Parameter Types], entityType=[Workflow, Command, Command, Command], _version_=1468794760693022720}, SolrDocument{id=3, uuid=7fe08f79-e184-454d-908f-08b32583a822, packName=Workflow Logger-Packs updated, packDescription=Workflow Logger-Pack, packAuthor=NetApp, packVersion=3.0.0, packDate=May 22, 2014, 3:32 pm, entityName=[Workflow Logger, Wait, Logging cmd, Test cmd for multiple Parameter Types], entityDescription=[Workflow Logger, Wait Command, Logging command, Test cmd for multiple Parameter Types], entityType=[Workflow, Command, Command, Command], _version_=1468795898385399808}, SolrDocument{id=5, uuid=7fe08f79-e184-454d-908f-08b32583a822, packName=Workflow Logger-Pack New, packDescription=Workflow Logger-Pack, packAuthor=NetApp, packVersion=2.0.0, packDate=June 17, 2014, 7:02 am, entityName=[Workflow Logger, Wait, Logging cmd, Test cmd for multiple Parameter Types], entityDescription=[Workflow Logger, Wait Command, Logging command, Test cmd for multiple Parameter Types], entityType=[Workflow, Command, Command, Command], _version_=1471140110510587904}]} 
```

我的代码：

```
 HttpSolrServer server= new HttpSolrServer("http://localhost:8983/solr");
        server.setParser(new XMLResponseParser());

        Gson gson= new Gson();

        SolrQuery solrQuery = new SolrQuery();
        solrQuery.setQuery("*:*");

        solrQuery.setHighlight(true);

        solrQuery.setHighlightRequireFieldMatch(true);
        QueryResponse response= server.query(solrQuery);
        SolrDocumentList docs = response.getResults();

        String res= gson.toJson(docs);
        System.out.println(res); 
```

现在，它被转换为 JSON，如下所示：

```
[
  {
    "id": "1",
    "uuid": "7fe08f79-e184-454d-908f-08b32583a822",
    "packName": "Workflow Logger-Pack",
    "packDescription": "Workflow Logger-Pack",
    "packAuthor": "NetApp",
    "packVersion": "1.0.0",
    "packDate": "May 22, 2014, 3:10 pm",
    "entityName": [
      "Workflow Logger",
      "Wait",
      "Logging cmd",
      "Test cmd for multiple Parameter Types"
    ],
    "entityDescription": [
      "Workflow Logger",
      "Wait Command",
      "Logging command",
      "Test cmd for multiple Parameter Types"
    ],
    "entityType": [
      "Workflow",
      "Command",
      "Command",
      "Command"
    ],
    "_version_": 1468794552324194300
  },
  {
    "id": "2",
    "uuid": "7fe08f79-e184-454d-908f-08b32583a822",
    "packName": "Workflow Logger-Pack New",
    "packDescription": "Workflow Logger-Pack",
    "packAuthor": "NetApp",
    "packVersion": "2.0.0",
    "packDate": "May 22, 2014, 3:13 pm",
    "entityName": [
      "Workflow Logger",
      "Wait",
      "Logging cmd",
      "Test cmd for multiple Parameter Types"
    ],
    "entityDescription": [
      "Workflow Logger",
      "Wait Command",
      "Logging command",
      "Test cmd for multiple Parameter Types"
    ],
    "entityType": [
      "Workflow",
      "Command",
      "Command",
      "Command"
    ],
    "_version_": 1468794760693022700
  },
  {
    "id": "3",
    "uuid": "7fe08f79-e184-454d-908f-08b32583a822",
    "packName": "Workflow Logger-Packs updated",
    "packDescription": "Workflow Logger-Pack",
    "packAuthor": "NetApp",
    "packVersion": "3.0.0",
    "packDate": "May 22, 2014, 3:32 pm",
    "entityName": [
      "Workflow Logger",
      "Wait",
      "Logging cmd",
      "Test cmd for multiple Parameter Types"
    ],
    "entityDescription": [
      "Workflow Logger",
      "Wait Command",
      "Logging command",
      "Test cmd for multiple Parameter Types"
    ],
    "entityType": [
      "Workflow",
      "Command",
      "Command",
      "Command"
    ],
    "_version_": 1468795898385399800
  },
  {
    "id": "5",
    "uuid": "7fe08f79-e184-454d-908f-08b32583a822",
    "packName": "Workflow Logger-Pack New",
    "packDescription": "Workflow Logger-Pack",
    "packAuthor": "NetApp",
    "packVersion": "2.0.0",
    "packDate": "June 17, 2014, 7:02 am",
    "entityName": [
      "Workflow Logger",
      "Wait",
      "Logging cmd",
      "Test cmd for multiple Parameter Types"
    ],
    "entityDescription": [
      "Workflow Logger",
      "Wait Command",
      "Logging command",
      "Test cmd for multiple Parameter Types"
    ],
    "entityType": [
      "Workflow",
      "Command",
      "Command",
      "Command"
    ],
    "_version_": 1471140110510588000
  }
] 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:22:42.933

您需要使用哈希映射来制作 JSONObject ，solrj 目前不支持 json 格式作为输出

# python - 使用 pyexiv2 对 JPEG 进行地理标记

> ID：10799366
> 
> 赞同：5
> 
> 时间：2012-05-29T12:41:31.843
> 
> 标签：python, jpeg, geotagging, pyexiv2

我正在使用我在另一个 SO 答案中找到的代码使用 pyexiv2 Python 模块对 JPEG 进行地理标记（请参阅：[What is the best way to geotag jpeg-images using Python?](https://stackoverflow.com/questions/453395/what-is-the-best-way-to-geotag-jpeg-images-with-python)），我对 GPSTag 值有疑问。

答案中给出的代码有以下几行：

```
exiv_image["Exif.Image.GPSTag"] = 654
exiv_image["Exif.GPSInfo.GPSMapDatum"] = "WGS-84"
exiv_image["Exif.GPSInfo.GPSVersionID"] = '2 0 0 0' 
```

我查看了[Exiv2 文档](http://www.exiv2.org/tags.html)并找到了 GPSTag、GPSMapDatum 和 GPSVersionID 的描述，但仍然对 GPSTag 的值感到困惑。

从文档中它说：

> 指向 GPS 信息 IFD 的指针。GPS Info IFD 的互操作性结构与 Exif IFD 类似，没有图像数据。

这个描述并没有真正解释如何确定使用什么值，我也无法在网上找到更好的 GPSTag 描述。

所以我的问题是：

1.  给定一张新图片，如何确定 Exif.Image.GPSTag 的值？
2.  为什么代码示例使用值 654（这可以通过问题一来回答）？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T06:49:48.680

使用 pyexiv2 对照片进行地理标记的最佳方法肯定是使用[我的程序 GottenGeography](http://github.com/robru/gottengeography) ;-)

但说真的，如果您想从 pyexiv2 访问 GPS 数据，该代码如下所示：

```
 GPS = 'Exif.GPSInfo.GPS'
    try:
        self.latitude = dms_to_decimal(
            *self.exif[GPS + 'Latitude'].value +
            [self.exif[GPS + 'LatitudeRef'].value]
        )
        self.longitude = dms_to_decimal(
            *self.exif[GPS + 'Longitude'].value +
            [self.exif[GPS + 'LongitudeRef'].value]
        )
    except KeyError:
        pass
    try:
        self.altitude = float(self.exif[GPS + 'Altitude'].value)
        if int(self.exif[GPS + 'AltitudeRef'].value) > 0:
            self.altitude *= -1
    except KeyError:
        pass 
```

写作看起来像这样：

```
 self.exif[GPS + 'AltitudeRef']  = '0' if self.altitude >= 0 else '1'
    self.exif[GPS + 'Altitude']     = Fraction(self.altitude)
    self.exif[GPS + 'Latitude']     = decimal_to_dms(self.latitude)
    self.exif[GPS + 'LatitudeRef']  = 'N' if self.latitude >= 0 else 'S'
    self.exif[GPS + 'Longitude']    = decimal_to_dms(self.longitude)
    self.exif[GPS + 'LongitudeRef'] = 'E' if self.longitude >= 0 else 'W'
    self.exif[GPS + 'MapDatum']     = 'WGS-84' 
```

使用这些支持功能：

```
class Fraction(fractions.Fraction):
    """Only create Fractions from floats.

    >>> Fraction(0.3)
    Fraction(3, 10)
    >>> Fraction(1.1)
    Fraction(11, 10)
    """

    def __new__(cls, value, ignore=None):
        """Should be compatible with Python 2.6, though untested."""
        return fractions.Fraction.from_float(value).limit_denominator(99999)

def dms_to_decimal(degrees, minutes, seconds, sign=' '):
    """Convert degrees, minutes, seconds into decimal degrees.

    >>> dms_to_decimal(10, 10, 10)
    10.169444444444444
    >>> dms_to_decimal(8, 9, 10, 'S')
    -8.152777777777779
    """
    return (-1 if sign[0] in 'SWsw' else 1) * (
        float(degrees)        +
        float(minutes) / 60   +
        float(seconds) / 3600
    )

def decimal_to_dms(decimal):
    """Convert decimal degrees into degrees, minutes, seconds.

    >>> decimal_to_dms(50.445891)
    [Fraction(50, 1), Fraction(26, 1), Fraction(113019, 2500)]
    >>> decimal_to_dms(-125.976893)
    [Fraction(125, 1), Fraction(58, 1), Fraction(92037, 2500)]
    """
    remainder, degrees = math.modf(abs(decimal))
    remainder, minutes = math.modf(remainder * 60)
    return [Fraction(n) for n in (degrees, minutes, remainder * 60)] 
```

虽然我目前正在研究 pyexiv2 的替代方案，它使用 GObject 内省来更直接地访问 exiv2 库，称为[GExiv2](http://github.com/robru/gexiv2)，并且希望得到一些反馈。gexiv2 和 pyexiv2 都是同一个 exiv2 库的包装器，但不同之处在于 pyexiv2 是一个非常大的项目，有很多胶水，只能在 python 中工作，并且处于被放弃的边缘*；而 gexiv2 轻巧灵活，可以通过任何编程语言访问，并且由于 Shotwell 的使用而得到很好的维护。

希望这可以帮助！

```
* pyexiv2's author, Olivier Tilloy, has asked me for help with maintainership as he no longer has much time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T11:46:33.513

我的版本，有点长...

```
from fractions import Fraction
import pyexiv2

try:
    metadata = pyexiv2.metadata.ImageMetadata(image_file)
    metadata.read();
    thumb = metadata.exif_thumbnail

    try:
        latitude = metadata.__getitem__("Exif.GPSInfo.GPSLatitude")
        latitudeRef = metadata.__getitem__("Exif.GPSInfo.GPSLatitudeRef")
        longitude = metadata.__getitem__("Exif.GPSInfo.GPSLongitude")
        longitudeRef = metadata.__getitem__("Exif.GPSInfo.GPSLongitudeRef")

        latitude = str(latitude).split("=")[1][1:-1].split(" ");
        latitude = map(lambda f: str(float(Fraction(f))), latitude)
        latitude = latitude[0] + u"\u00b0" + latitude[1] + "'" + latitude[2] + '"' + " " + str(latitudeRef).split("=")[1][1:-1]

        longitude = str(longitude).split("=")[1][1:-1].split(" ");
        longitude = map(lambda f: str(float(Fraction(f))), longitude)
        longitude = longitude[0] + u"\u00b0" + longitude[1] + "'" + longitude[2] + '"' + " " + str(longitudeRef).split("=")[1][1:-1]

        latitude_value = dms_to_decimal(*metadata.__getitem__("Exif.GPSInfo.GPSLatitude").value + [metadata.__getitem__("Exif.GPSInfo.GPSLatitudeRef").value]);
        longitude_value = dms_to_decimal(*metadata.__getitem__("Exif.GPSInfo.GPSLongitude").value + [metadata.__getitem__("Exif.GPSInfo.GPSLongitudeRef").value]);

        print "--- GPS ---"
        print "Coordinates: " + latitude + ", " + longitude
        print "Coordinates: " + str(latitude_value) + ", " + str(longitude_value)
        print "--- GPS ---"
    except Exception, e:
        print "No GPS Information!"
        #print e

    # Check for thumbnail
    if(thumb.data == ""):
        print "No thumbnail!"
except Exception, e:
    print "Error processing image..."
    print e; 
```

# c# - 是否可以检测到使用 C# WebBrowser 时调用的任何 javascript 函数

> ID：10799378
> 
> 赞同：2
> 
> 时间：2012-05-29T12:42:14.290
> 
> 标签：c#, javascript, winforms, browser

使用 C# WinForms WebBrowser 时是否可以检测到调用了 javascript 函数？我知道如果 javascript 函数是我自己的，这很容易做到。但是今天我需要浏览别人的页面，例如调用.createElement() 或.appendChild() 时可以检测到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:06:59.843

您可以尝试通过在头部附加代码来将一些 Javascript 注入到控件中，类似于这篇文章：[如何在 Web 浏览器控件中注入 Javascript](https://stackoverflow.com/questions/153748/how-to-inject-javascript-in-webbrowser-control)。注入的代码可以是监视特定 DOM 元素上的事件的函数。

# java - 在 java 持久性中较旧的查询

> ID：10799382
> 
> 赞同：1
> 
> 时间：2012-05-29T12:42:25.733
> 
> 标签：java, hibernate, persistence, hql

我需要做一个查询，我把 5 天以前的东西拿走。（自定义日期）我查看了 HQL，但由于它是持久性的，我无法按照[这里访问 setTimestamp](https://stackoverflow.com/questions/10780471/hql-filtering-query-only-2-month-before)

```
String hqlQuery;
Calendar minDate = Calendar.getInstance();
minDate.add(Calendar.DATE, -days);
hqlQuery = "select n from notifications where n.app_id=:app and ((n.sent_date<=:minDate) OR (n.sent_date is null)) and n.handled='N'"; 
```

我是如何尝试的...任何甜蜜的帮手，在此先感谢:-)

编辑：所以我改变了我的方法，现在看起来像这样：

```
public static List<Notification> findOlderThen(EntityManager em, Long app, int days) {
    String hqlQuery;
    Calendar minDate = Calendar.getInstance();
    minDate.add(Calendar.DATE, -days);
    hqlQuery = "select n from notifications where n.app_id=:app and ((n.sent_date<=:minDate) OR (n.sent_date is null)) and n.handled='N'";
    System.out.println(hqlQuery);
    return em.createQuery(hqlQuery).setParameter("app", app).setParameter("minDate",minDate.getTime()).getResultList();
} 
```

但它给出了这个错误：

```
Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [select n from notifications where n.app_id=:app and ((n.sent_date<=:minDate) OR (n.sent_date is null)) and n.handled='N'], line 1, column 28: syntax error at [where].
Internal Exception: UnwantedTokenException(found=where, expected 80) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:51:00.760

```
SessionFactory sf = // get your session factory
Query q = sf.getCurrentSession()
        .createQuery(hqlQuery);
q.setParameter("minDate",minDate.getTime())
 .setParameter("app", appId)
 .list(); 
```

假设 send_date 的类型是 Notifications 模型类中的 Date ，将是您设置日期参数的方式。此外，在查询的这一部分，请`select n from notifications`确保通知是您班级的实际名称。案件很重要！应该是`select n from Notifications n`。

**更新：**

您需要为该类声明别名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:49:58.490

如果我没记错的话，当你在查询中添加日期时，你不应该做这样的事情吗：

```
hqlQuery = "select n from notifications where n.app_id=:app and ((n.sent_date<=':minDate') OR (n.sent_date is null)) and n.handled='N'"; 
```

注意 minDate 变量周围的 '

# macos - mac 上的人脸跟踪软件（内置相机）

> ID：10799384
> 
> 赞同：6
> 
> 时间：2012-05-29T12:42:41.010
> 
> 标签：macos, opencv, camera

我想要一种方法来跟踪用户在一段时间内查看屏幕的情况。

例如，在正常使用中，用户在一天中的确切秒数查看屏幕。

我想知道什么样的创新想法或预先存在的软件可以让我做到这一点。

因此，对于我所看到的更多细节，会有一些公差水平，例如与屏幕的距离、头到屏幕的角度，这些都被认为是与显示器“接合”。如果相机上的一个mac book pro被用来跟踪这个，那么它会在一个文本文件/键值存储中记录程序打开的每一秒的时间戳和布尔值。

有没有人有这种事情的经验？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:46:47.130

您可以在这里找到一个很好的起点：[http ://code.google.com/p/ehci/](http://code.google.com/p/ehci/)

它是一个基于 OpenCV 的软件，可以跟踪头部并检测其方向。它是开源的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T13:15:08.873

例如在 OpenCV 中实现了面部跟踪器（并且已经使用标记进行了训练）。我建议您首先从跟踪面部开始。一旦你有了一个强大的面部跟踪器，你就可以生成输出，告诉你一张脸已经看着屏幕多长时间了，等等。

稍后您可以添加改进。检测到人脸后，您可以尝试通过分析人脸像素来识别人。

另一条线是识别面部的各个部分，例如嘴巴、眼睛、鼻子、眉毛……

如果您可以跟踪面部和面部的某些部分，您可以尝试识别面部表情模式，如快乐、悲伤等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:45:08.253

Face.com 有一个重新识别面孔的解决方案。所以我猜只是抓住相机输入并将其发送到他们的服务器？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T07:57:34.803

我曾经使用 OpenCV 构建了一个人脸检测系统来做这样的事情，你可以在[这里](https://studiodiip.com/)看到结果。

我当时使用的方法是使用内置 OpenCV 分类器标准的 haarTraining 两次单独使用。我使用名为 haarcascade_frontalface_default.xml 的分类器来查看用户是否正在观看屏幕，并使用 haarcascade_profileface.xml 来查看用户是否正在移开视线。以下代码应该让您开始使用 openCV 和 C++。

```
CvHaarClassifierCascade *cascade_face;
CvMemStorage            *storage_face;
CvHaarClassifierCascade *cascade_profile;
CvMemStorage            *storage_profile;

//profile face
storage_profile = cvCreateMemStorage( 0 );
cascade_profile = ( CvHaarClassifierCascade* )cvLoad( "haarcascade_profileface.xml", 0, 0, 0 );
cvHaarDetectObjects( frm, cascade_profile, storage_profile, 1.1, 2, CV_HAAR_DO_CANNY_PRUNING);

//frontal face
storage_face = cvCreateMemStorage( 0 );
cascade_face = ( CvHaarClassifierCascade* )cvLoad( "haarcascade_frontalface_default.xml", 0, 0, 0 );
cvHaarDetectObjects( frm, cascade_face, storage_face, 1.1, 2, CV_HAAR_DO_CANNY_PRUNING);

//detect profiles
CvSeq *profile = cvHaarDetectObjects(img,cascade_profile, storage_profile, 1.1,3,0,cvSize( 20, 20 ));

for( i = 0 ; i < ( profile ? profile->total : 0 ) ; i++ ) {
    CvRect *r = ( CvRect* )cvGetSeqElem( profile, i );
    //draw rectangle here, or do other stuff
}

//detect front
CvSeq *faces = cvHaarDetectObjects(img,cascade_face, storage_face, 1.1,3,0,cvSize( 20,20 ));

for( i = 0 ; i < ( faces ? faces->total : 0 ) ; i++ ) {
    CvRect *r = ( CvRect* )cvGetSeqElem( faces, i );
    //draw rectangle here, or do other stuff
} 
```

# c# - 某些方法上的 WCF REST 基本身份验证

> ID：10799393
> 
> 赞同：6
> 
> 时间：2012-05-29T12:43:14.517
> 
> 标签：c#, wcf, security, rest, mobile

我在 WCF 4.0 中实现了很多 RESTful（GET 和 POST）方法。所有这些都通过 SSL 工作。

一些方法的示例：

```
[OperationContract]
[WebInvoke(UriTemplate = "Login?", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
LoginResponse Login(LoginRequest request);

[OperationContract]
[WebInvoke(UriTemplate = "UpdateDetails?", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
UpdateUserDetailResponse UpdateDetails(UpdateUserDetailRequest request);

[OperationContract]
[WebInvoke(UriTemplate = "GetDetails?", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
UserDetailResponse GetDetails(UserDetailRequest request); 
```

我浏览了很多博客和论坛，但仍然找不到符合我要求的东西。我需要在*某些*方法上实现基本身份验证，但不是全部。如果您查看上面的示例，我需要为 UpdateDetails 和 GetDetails 方法发送用户名和密码，但对于 Login 方法则不需要。然后根据数据库对用户名和密码进行身份验证。有可能做这样的事情吗？

附带说明：这些 REST 方法被许多不同的移动设备调用。

我查看了以下站点，它们都通过 REST 实现了基本身份验证，*但*它们涵盖了上面提到的所有方法。

*   [http://msdn.microsoft.com/en-us/library/aa702565.aspx](http://msdn.microsoft.com/en-us/library/aa702565.aspx)
*   [将基本 HTTP 身份验证添加到 WCF REST 服务](https://stackoverflow.com/questions/4715752/adding-basic-http-auth-to-a-wcf-rest-service)
*   [http://custombasicauth.codeplex.com/](http://custombasicauth.codeplex.com/)（底部的链接不再起作用）

有可能做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:24:34.987

我创建了一个 BasicAuthenticationInvoker 类，您将其归于您想要进行身份验证的方法，如下所示：

```
 [OperationContract]
    [BasicAuthenticationInvoker] // this is the auth attribute!
    [WebInvoke(UriTemplate = "QuickQuote?", Method = "POST", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare)]
    QuickQuoteResponse QuickQuote(QuickQuoteRequest request); 
```

实际的类如下所示：

```
 public class BasicAuthenticationInvoker : Attribute, IOperationBehavior, IOperationInvoker
    {
        #region Private Fields

        private IOperationInvoker _invoker;

        #endregion

        #region IOperationBehavior Members

        public void ApplyDispatchBehavior(OperationDescription operationDescription,
                                          DispatchOperation dispatchOperation)
        {
            _invoker = dispatchOperation.Invoker;
            dispatchOperation.Invoker = this;
        }

        public void ApplyClientBehavior(OperationDescription operationDescription,
                                        ClientOperation clientOperation)
        {
        }

        public void AddBindingParameters(OperationDescription operationDescription,
                                         BindingParameterCollection bindingParameters)
        {
        }

        public void Validate(OperationDescription operationDescription)
        {
        }

        #endregion

        #region IOperationInvoker Members

        public object Invoke(object instance, object[] inputs, out object[] outputs)
        {
            if (Authenticate("Client Name here"))
                return _invoker.Invoke(instance, inputs, out outputs);
            else
            {
                outputs = null;
                return null;
            }
        }

        public object[] AllocateInputs()
        {
            return _invoker.AllocateInputs();
        }

        public IAsyncResult InvokeBegin(object instance, object[] inputs,
                                        AsyncCallback callback, object state)
        {
            throw new NotSupportedException();
        }

        public object InvokeEnd(object instance, out object[] outputs, IAsyncResult result)
        {
            throw new NotSupportedException();
        }

        public bool IsSynchronous
        {
            get
            {
                return true;
            }
        }

        #endregion

        private bool Authenticate(string realm)
        {
            string[] credentials = GetCredentials(WebOperationContext.Current.IncomingRequest.Headers);

            if (credentials != null && credentials.Length == 2)
            {
                // do auth here
                var username = credentials[0];
                var password = credentials[1];

               // validate the username and password against whatever auth logic you have

                return true; // if successful
            }

            WebOperationContext.Current.OutgoingResponse.Headers["WWW-Authenticate"] = string.Format("Basic realm=\"{0}\"", realm);
            WebOperationContext.Current.OutgoingResponse.StatusCode = HttpStatusCode.Unauthorized;
            return false;
        }

        private string[] GetCredentials(WebHeaderCollection headers)
        {
            string credentials = WebOperationContext.Current.IncomingRequest.Headers["Authorization"];
            if (credentials != null)
                credentials = credentials.Trim();

            if (!string.IsNullOrEmpty(credentials))
            {
                try
                {
                    string[] credentialParts = credentials.Split(new[] {' '});
                    if (credentialParts.Length == 2 && credentialParts[0].Equals("basic", StringComparison.OrdinalIgnoreCase))
                    {
                        credentials = Encoding.ASCII.GetString(Convert.FromBase64String(credentialParts[1]));
                        credentialParts = credentials.Split(new[] {':'});
                        if (credentialParts.Length == 2)
                            return credentialParts;
                    }
                }
                catch
                {
                }
            }

            return null;
        }
    } 
```

# android - 在同一活动中在 android 中播放 youtube 视频的替代方法是什么？

> ID：10799394
> 
> 赞同：1
> 
> 时间：2012-05-29T12:43:15.923
> 
> 标签：android, video, android-activity, android-intent, youtube

所以我有这个应用程序，我需要在不调用意图的情况下在同一活动中播放 youtube 视频（不使用 openyoutube :P），这样做的适当方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:48:09.670

`VideoView`您可以在您的视频中嵌入`Activity`并播放视频，方法是给它一些`URL`

有关更多信息，请参阅[在 Android 中使用 VideoView 的演示](http://www.stevenmarkford.com/android-activity-playing-a-video-with-a-videoview/)。

# javascript - JQuery选项卡动态内容，点击淡出+淡入淡出，滑动无UI

> ID：10799398
> 
> 赞同：0
> 
> 时间：2012-05-29T12:43:24.190
> 
> 标签：javascript, jquery, tabs, sliding, fading

我绝对是 JQuery 的初学者（但我对 JS 和其他语言的编程有一些了解）
我有两个目标：

1.  非常简单的选项卡（或任何控件），单击时旧（活动）选项卡内容淡出，然后单击选项卡内容淡入（同一位置）
2.  与 1 相同，但内容是水平滑动而不是淡出。我不想要 JQuery UI，因为这对于这种简单的东西来说太过分了，我想学习。

目标 1，JS：

```
$(function () {
$("div.tabs > div:gt(0)").hide();
$("div.tabs ul a:first").addClass('selected');

$('div.tabs ul a').click(function () {
$("div.tabs > div").fadeOut('normal', function () {
$("div.tabs > div").fadeIn('slow');
});
$('div.tabs ul a').removeClass('selected');
$(this).addClass('selected');
   return false;
});
}); 
```

HTML：

```
<div class="tabs">
    <ul>
        <li><a href="#first">First</a></li>
        <li><a href="#second">Second</a></li>
        <li><a href="#third">Third</a></li>
    </ul>
    <div id="first">
        <h2>First content</h2>
    </div>
    <div id="second">
        <h2>Second content</h2>
    </div>
    <div id="third">
        <h2>Third content</h2>
    </div>
</div> 
```

如何找到活动的 div，而不是用`$("div.tabs > div")`in`fadeOut`和 in戳所有 div `fadeIn`？

目标2：
我读过`slideUp`，`slideDown`但那是垂直的，也许我必须使用`animate()`？
如何？如果它太复杂而不是垂直幻灯片对我有好处......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:03:20.607

目标 1：只需向当前内容 div 添加一个活动类。有关更改的代码，请参见[演示](http://jsfiddle.net/kczjf/)。

目标 2：有几种技术可以在不使用 jQuery UI 的情况下完成，这取决于您想要实现的目标以及您想要在哪里使用它。有关一些滑动效果，请参阅[更改后的演示](http://jsfiddle.net/kczjf/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:21:16.170

保罗的回答简化了目标1：没有额外的类，优化`"div" + $(this).attr('href')`和淡出的解决方案是`div:visible`：

```
$(function () {
 $("div.tabs > div:gt(0)").hide();
 $("div.tabs ul a:first").addClass('selected');

 $('div.tabs ul a').click(function () {
  var newDiv = "div" + $(this).attr('href');
  $("div.tabs > div:visible").fadeOut('normal', function () {
   $(newDiv).fadeIn('slow');
  });
  $('div.tabs ul a').removeClass('selected');
  $(this).addClass('selected');
  return false;
 });
}); 
```

谢谢保罗。

# jquery - jplayer - 未捕获的类型错误：无法读取未定义的属性“播放”

> ID：10799403
> 
> 赞同：1
> 
> 时间：2012-05-29T12:43:41.397
> 
> 标签：jquery, jplayer

我正在使用 getshopped.org 的 jquery-jplayer 插件。我在他们的论坛上问过这个问题，但遗憾的是似乎不可能在那里得到任何帮助。所以我的问题是我想通过“pauseOthers”方法在启动时暂停所有 jplayer 实例。虽然不起作用...任何帮助将不胜感激！这是我的代码：

```
<script type='text/javascript'>
jQuery(document).ready(function($){
    // Local copy of jQuery selectors, for performance.
    //array of players and int variables for uniquely identifying each player                   
    var jPlayer_array = $(".jquery_jplayer");
    var playerID;
    var fileID;
    var jpPlayTime = new Array();
    var jpTotalTime= new Array();
    var song = new Array();
    <?php
if(isset($_SESSION['jplayer_plugin_ids'])){
    foreach((array)$_SESSION['jplayer_plugin_ids'] as $fileid){
        $file_data = get_post($fileid);
        $mp3_path= WPSC_PREVIEW_URL."".addslashes($file_data->post_title)."";
        if(!empty($file_data)){?>
        jpPlayTime_<?php echo $fileid; ?> = $("#jplayer_play_time_<?php echo $fileid; ?>");
        jpTotalTime_<?php echo $fileid; ?> = $("#jplayer_total_time_<?php echo $fileid; ?>");

        //Console: Uncaught TypeError: Cannot read property 'play' of undefined
        $('#jquery_jplayer_<?php echo $fileid; ?>').bind($.jPlayer.event.play, function() { 
                            $(this).jPlayer("pauseOthers");}); 

        $('#jquery_jplayer_<?php echo $fileid; ?>').jPlayer({
                ready: function () {
                    this.setFile('<?php echo $mp3_path; ?>');
                },
                swfPath: '<?php echo WP_CONTENT_URL."/plugins/jPlayerPlugin/js"; ?>',
                volume: 50,
                customCssIds: true
            })

            .jPlayer( "cssId", "play", "jplayer_play_<?php echo $fileid; ?>" )
            .jPlayer( "cssId", "pause", "jplayer_pause_<?php echo $fileid; ?>" )
            .jPlayer( "cssId", "loadBar", "jplayer_load_bar_<?php echo $fileid; ?>")
            .jPlayer( "cssId", "playBar", "jplayer_play_bar_<?php echo $fileid; ?>")
            .jPlayer( "cssId", "volumeMin", "jplayer_volume_min_<?php echo $fileid; ?>")
            .jPlayer( "cssId", "volumeMax", "jplayer_volume_max_<?php echo $fileid; ?>")
            .jPlayer( "cssId", "volumeBar", "jplayer_volume_bar_<?php echo $fileid; ?>")
            .jPlayer( "cssId", "volumeBarValue", "jplayer_volume_bar_value_<?php echo $fileid; ?>")
            .jPlayer("onProgressChange", function(loadPercent, playedPercentRelative, playedPercentAbsolute, playedTime, totalTime) {
                jpPlayTime_<?php echo $fileid; ?>.text($.jPlayer.convertTime(playedTime));
                jpTotalTime_<?php echo $fileid; ?>.text($.jPlayer.convertTime(totalTime));
            })
            .jPlayer("onSoundComplete", function() {
                //COMMENT THIS LINE OUT IF YOU WANT THE TRACK TO LOOP
                //this.element.jPlayer("play");
            });
        <?php
        }
    }
} 
```

?>

```
});
</script> 
```

# asp.net-4.5 - 在 Windows 8 中以编程方式打开 ASP.Net 4.5？

> ID：10799405
> 
> 赞同：1
> 
> 时间：2012-05-29T12:43:49.890
> 
> 标签：asp.net-4.5

在 Windows 8 Consumer Preview 中，我可以在打开或关闭 Windows 功能/.NET Framework 4.5 高级服务/ASP.NET 4.5 中启用 ASP.NET 4.5。为了以编程方式执行此操作，我曾经在 Windows 7 中运行一个 Windows 实用程序“pkgmrg.exe”，它需要指定包名称。有人知道 Windows 8 中 ASP.NET 4.5 的包名称吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T20:52:34.360

您正在寻找的是 dism.exe：

```
dism /online /enable-feature /featurename:NetFx4Extended-ASPNET45 
```

# android - 为 Android 创建多人游戏服务器的理想方法（具有非常基本图形的游戏）

> ID：10799407
> 
> 赞同：1
> 
> 时间：2012-05-29T12:43:55.190
> 
> 标签：android, sockets, rest

我正在开发一款基于 Playing Cards（确切地说是[Bridge ）的 Android 游戏，该游戏可以同时由](http://en.wikipedia.org/wiki/Contract_bridge)**四个**玩家玩。并且将有一个可通过 Web 访问的服务器，设备将连接到该服务器，服务器将跟踪游戏进度。

我的游戏在图形方面非常基础，无需使用任何游戏引擎即可获得 UI。

虽然我应该为 Android 构建游戏（客户端），但我想开发可以在游戏的未来端口中重复使用的服务器**，**即使它被移植到其他移动平台甚至桌面。

所以我想到的第一个可能的服务器架构候选者是拥有**RESTful Web 服务**，这样我就可以将服务器与任何客户端一起使用，只要客户端的编程端支持 HTTP 方法。

但后来我意识到，由于在整个游戏会话期间设备和服务器之间会有持久连接，所以有这样一个服务器是否可以，在请求响应后连接将终止（我不确定是不是真的）？

或者我应该使用Java`DatagramSocket`的`DatagramPacket`方式来构建服务器吗？（这会确保服务器的可重用性吗？）

还有其他建议或建议吗？

**注意：**我对 Java 或 Java 网络编程并不陌生，**但我**对 Android 开发和创建 RESTful 服务都很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:59:46.960

在为 Android 编写时，不要计划持久连接。连接经常中断（而且通常是有充分理由的，比如从 GSM 切换到 wifi）。HTTP 是一个很好的、流行的和经过验证的选择（您可以使用一些较低级别的堆栈，并且可以专注于处理有效负载）。

顺便说一句：在这种情况下说“RESTful Web 服务”是没有意义的——你需要的是一个提供数据和接受命令的 HTTP 服务器，而不是一个将你的游戏逻辑构建为一组有状态资源的心理框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:52:10.633

我认为您的基于 HTTP 的计划适合这种情况，我认为连接持久性的问题与桥牌等基于慢速回合的游戏无关。

编辑：正如 tdreger 所建议的，几乎所有 Android 文档都建议您计划通过不同的渠道进行例行连接失败和重新建立，因此 html 连接似乎是最具弹性的解决方案。

我认为你让它独立于客户端的想法是正确和重要的——从这个角度来看，HTTP 的想法显然要好得多，因为用其他语言编写客户端应用程序会**更**容易（你可能会想要——Javascript用于 Web 客户端和用于 iOS 应用程序的 Objective-C）。

我也认为 Android 开发会更容易，因为 Android 和 appache 对这些类似 HTTP 的连接有强大的支持。

# android - Android webview 调用浏览器活动

> ID：10799409
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:44:04.127
> 
> 标签：android, android-webview, webviewclient

我在 android 中使用 webview，当我调用 loadURL 时，它会调用浏览器活动

我需要在我自己的活动中显示网络内容，因为我还有其他要查看的内容按钮、文本、...等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:49:52.807

使用该`WebView.setWebViewClient(WebViewClient)`方法（[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)）并像这样覆盖该`shouldOverrideUrlLoading(WebView, String)`方法：

```
webView.setWebViewClient(new WebViewClient() {                                      

    @Override                                                                       
    public boolean shouldOverrideUrlLoading(WebView view, String url) {             
        if ( url.equals( "http://www.example.com" ) ) {                                      
            // Do something
            return true;                                                            
        }                                                                           

        // If we couldn't match the URL, the following line
        // lets the webview use default behaviour (i.e. open browser)
        return super.shouldOverrideUrlLoading(view, url);                           
    }                                                                               

}); 
```

# jquery - jQuery编程

> ID：10799410
> 
> 赞同：-3
> 
> 时间：2012-05-29T12:44:10.407
> 
> 标签：jquery

我有一个父 div 和多个内部 div，我想应用一个事件，但只从一个 div 获取输出。在 jquery 上尝试过我也使用布尔值和标志的想法，但不是正确的方法。

请指导我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:46:27.457

然后你应该使用[`.on()`](http://api.jquery.com/on/)在父级上为子级绑定处理程序

```
$(parent_selector).on(event_type,descendant_selector,function(){
    //the stuff you want to happen
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:52:05.573

您的意思是您正在将诸如单击事件之类的东西绑定到父 div 和子 div，并且当单击子 div 时，这两个事件都会被触发？如果是这样，这是因为单击事件正在冒泡到所有父元素。为避免这种情况，您必须在单击子 div 时调用的事件中使用 jQuery stopPropagation() 函数。有关详细信息，请参见此处：http: [//api.jQuery.com/event.stopPropagation](http://api.jQuery.com/event.stopPropagation)

# sql-server - 没有主键的聚集索引

> ID：10799413
> 
> 赞同：8
> 
> 时间：2012-05-29T12:44:15.373
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, clustered-index

[聚集索引](http://www.simple-talk.com/sql/learn-sql-server/sql-server-index-basics/)将实际数据行存储在索引的叶级别。回到上面的例子，这意味着与主键值 123 关联的整行数据将存储在该叶节点中。

![在此处输入图像描述](../Images/692fca9df2e16074943adaa4ec6f1dfb.png)

**问题**- 如果主键不存在并且我将`Name`列设置为聚集索引。在这种情况下，上述说法是否会变得矛盾？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-29T12:47:33.017

**没有为什么？**

聚集索引仍将**在**其叶级存储实际数据页，（最初）按`name`列物理排序。

叶级以上的索引导航结构将包含`name`所有行的列值。

总体而言：没有任何变化。

主**键**是一个**逻辑**结构，旨在唯一标识表中的每一行。这就是为什么它必须是唯一且非空的。

聚**簇索引**是一种**物理**构造，它将（最初）按聚簇键对数据进行物理排序，并相应地排列 SQL Server 页面。

而在 SQL Server 中，*默认情况下*使用主键作为集群键，两者不必同时存在 - 也不必与另一个同时存在。您可以拥有一个具有非聚集主键的表，也可以拥有一个没有主键的聚集表。两者都是可能的。这样做是否明智是另一个讨论 - 但在技术上是可能的。

**更新：**如果您的主键是您的集群键，则保证唯一性（因为主键**必须**是唯一的）。如果您选择某个不是主键的列作为集群键，并且该列不能保证唯一性，SQL Server 将在幕后为这些重复值添加一个 4 字节 (INT) 唯一性列以生成他们独一无二。因此，您的 Smith's 的聚集索引导航结构中可能有`Smith`、等。`Smith1``Smith2`

看：

*   [MSDN：聚类索引设计指南](http://msdn.microsoft.com/en-us/library/ms190639%28v=sql.105%29.aspx)
*   [简单的谈话：有效的聚集索引](http://www.simple-talk.com/sql/learn-sql-server/effective-clustered-indexes/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T07:17:27.923

如果聚集索引不是唯一的，SQL Server 会创建一个 4 字节的唯一符并将其添加到聚集索引值中。仅当聚集索引值重复时才添加唯一符，而不是针对所有聚集索引值。所有非聚集索引都将在其叶级包含此值，非唯一非聚集索引在其非叶级条目中也将具有此唯一性值，作为书签的一部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:51:05.130

主键和唯一索引（或约束）之间的区别在于主键列中不允许 Null 值。表上不需要主键，但它使外部应用程序更容易编辑表中的行，即便如此，对于大多数外部应用程序来说，这并不是必需的。

在性能方面，这没有任何改变。重要的是索引的存在或不存在（唯一与否，是否聚集以及是否具有空值），主键本质上只是一个没有空值的唯一索引。

对于聚集索引，列不需要是唯一的和/或没有空值。具有重复值和空值的列适用于创建聚集索引。

对于外键，它必须引用具有唯一索引但不一定是主键或没有空值的列。引用一个不是主键的列是完全合法的，只要它有唯一索引就允许空值。请注意，因为它必须有一个唯一索引，所以该列不能有多个空值。

外键列本身（外表上的列）没有限制，但在性能方面，在其上设置索引通常是一件好事。

# seo - 我应该把我所有的链接放在我的站点地图中吗

> ID：10799416
> 
> 赞同：1
> 
> 时间：2012-05-29T12:44:28.090
> 
> 标签：seo, sitemap

通常我只在我的站点地图中放置重要的链接，现在它们大约是 3985，谷歌已经索引了其中的 3501。

但是我的链接的确切数量超过 100,000 个，并且每个链接都有一个图像，我将其展示给我的用户。

那么，我应该把我的所有链接，包括我的图片放在我的站点地图中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:51:33.973

你走在正确的道路上。仅将重要链接放在您的站点地图文件中。有关更多信息，请查看有关该主题的 Google 帮助页面。

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184&from=40318&rd=1](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184&from=40318&rd=1)

我还会查看以下链接，该链接描述了来自 Google 员工的站点地图

[https://webmasters.stackexchange.com/questions/30186/are-there-any-clear-indicators-that-my-sitemap-file-is-beneficial](https://webmasters.stackexchange.com/questions/30186/are-there-any-clear-indicators-that-my-sitemap-file-is-beneficial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:47:19.980

将您希望搜索引擎抓取和索引的每个链接都放在您的站点地图中。这就是 XML 站点地图的全部目的，也就是告诉搜索引擎您的页面和图像。100,000 个链接和图像根本不算多，所以不要担心认为 Google 会忽略您的站点地图或被它淹没。

# java - List 和 Set 的性能和内存分配比较

> ID：10799417
> 
> 赞同：75
> 
> 时间：2012-05-29T12:44:37.550
> 
> 标签：java, list, collections, set

我想知道 List 和 Set 在性能、内存分配和可用性方面的比较。

如果我不需要保持对象列表中的唯一性，也不需要维护插入顺序，我可以互换使用 ArrayList 和 SortedSet/HashSet 吗？直接使用 Collections 类而不是 list/set 会更好吗？

PS我也不需要列出或设置java提供的特定功能。我使用 List/Set 而不是 Array 只是因为它们可以动态增长而无需额外的编程工作。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-29T12:57:48.497

`HashSet`比相同数量的元素消耗大约 5.5 倍的内存`ArrayList`（尽管它们仍然是线性的），并且迭代速度明显较慢（尽管具有相同的渐近线）；快速的 Google 搜索表明`HashSet`迭代速度比`ArrayList`.

如果您不关心 的唯一性或性能`contains`，请使用`ArrayList`.

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-05-29T12:47:36.497

如果您不关心排序，也不删除元素，那么归根结底是您是否需要在此数据结构中查找元素，以及您需要这些查找的速度。

`HashSet`在 a is中按值查找元素`O(1)`。在一个`ArrayList`，它是`O(n)`。

如果您只使用容器来存储一堆独特的对象，并在最后迭代它们（以任何顺序），那么可以说`ArrayList`是一个更好的选择，因为它更简单、更经济。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T12:58:47.727

If you plan only to add elements and later iterate over them, your best bet is `ArrayList` as it's closest to the arrays you are replacing. It's more memory efficient than `LinkedList` or any `Set` implementation, has fast insertion, iteration, and random access.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-24T19:18:23.790

If you will compare, searching between List and Set, Set will be better because of the underline Hashing algorithm.

In the case of a list, in worst case scenario, contains will search till the end. In case of Set, because of hashing and bucket, it will search only subset.

Sample use case: Add 1 to 100_000 integer to ArrayList and HashSet. Search each integer in ArrayList and HashSet.

Set will take 9 milliseconds where as List will take 16232 seconds.

```
private static void compareSetvsList(){
    List<Integer> list = new ArrayList<>() ;
    Set<Integer> set = new HashSet<>() ;

    System.out.println("Setting values in list and set .... ");
    int counter = 100_000  ;

    for(int i =0 ; i< counter ; i++){            
        list.add(i);
        set.add(i);
    }

    System.out.println("Checking time .... ");
    long l1 = System.currentTimeMillis();
    for(int i =0 ; i< counter ; i++) list.contains(i);

    long l2 = System.currentTimeMillis();
    System.out.println(" time taken for list : "+ (l2-l1));

    for(int i =0 ; i< counter ; i++)set.contains(i);

    long l3 = System.currentTimeMillis();
    System.out.println(" time taken for set : "+ (l3-l2));

    //      for 10000   time taken for list : 123        time taken for set : 4
    //      for 100000  time taken for list : 16232          time taken for set : 9
    //      for 1000000 time taken for list : hung       time taken for set : 26

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T12:53:24.250

如果您不需要在*集合*中拥有独特的元素，只需使用`ArrayList`，除非您有非常特殊的需求。

*如果您要求集合*中只有唯一的元素，那么`HashSet`除非您有非常特殊的需求，否则请使用。

关于`SortedSet`（和它的实现者`TreeSet`），根据 JavaDoc：

> 进一步提供对其元素的总排序的 Set。元素使用它们的自然顺序进行排序，或者由通常在排序集创建时提供的比较器进行排序。

这意味着它针对的是非常特定的用例，当元素应始终在 a 中排序时`set`，通常不需要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-24T18:12:08.547

Use `HashSet` if you need to use `.contains(T)` frequently.

Example:

```
private static final HashSet<String> KEYWORDS = Stream.of(new String[]{"if", "do", "for", "try", "while", "break", "return"}).collect(Collectors.toCollection(HashSet::new));

public boolean isKeyword(String str) {
     return KEYWORDS.contains(str);
} 
```

# genetic-algorithm - 管网优化的突变

> ID：10799419
> 
> 赞同：0
> 
> 时间：2012-05-29T12:44:38.857
> 
> 标签：genetic-algorithm, evolutionary-algorithm

我正在研究管道网络优化，我将染色体表示为一串数字，如下所示

例子

```
chromosome [1] = 3 4 7 2 8 9 6 5 
```

其中，每个数字指的是井，并定义了井之间的距离。因为，一个染色体的孔不能重复。例如

```
chromosome [1]' = 3 4 7 2 7 9 6 5 (not acceptable) 
```

可以处理这样的表示的最佳突变是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T23:24:40.390

不能说“最好”，但我用于类似图形问题的一个模型是：对于每个节点（井号），计算整个人口中相邻节点/井的集合。例如，

```
population = [[1,2,3,4], [1,2,3,5], [1,2,3,6], [1,2,6,5], [1,2,6,7]]
adjacencies = { 
  1 : [2]         ,   #In the entire population, 1 is always only near 2
  2 : [1, 3, 6]   ,   #2 is adjacent to 1, 3, and 6 in various individuals
  3 : [2, 4, 5, 6],   #...etc...
  4 : [3]         ,
  5 : [3, 6]      , 
  6 : [3, 2, 5, 7],
  7 : [6]         
}
choose_from_subset = [1,2,3,4,5,6,7] #At first, entire population 
```

然后通过以下方式创建一个新的个人/网络：

```
 choose_next_individual(adjacencies, choose_from_subset) : 
   Sort adjacencies by the size of their associated sets
   From the choices in choose_from_subset, choose the well with the highest number of adjacent possibilities (e.g., either 3 or 6, both of which have 4 possibilities)
   If there is a tie (as there is with 3 and 6), choose among them randomly (let's say "3")
   Place the chosen well as the next element of the individual / network ([3])
   fewerAdjacencies = Remove the chosen well from the set of adjacencies (see below)
   new_choose_from_subset = adjacencies to your just-chosen well (i.e., 3 : [2,4,5,6])
   Recurse -- choose_next_individual(fewerAdjacencies, new_choose_from_subset) 
```

这个想法是具有大量邻接的节点适合重组（因为总体尚未收敛，例如 1->2），较低的“邻接计数”（但非零）意味着收敛，而零邻接计数（基本上）是一种突变。

只是为了展示一个示例运行..

```
#Recurse: After removing "3" from the population
new_graph = [3]
new_choose_from_subset = [2,4,5,6] #from 3 : [2,4,5,6] 
adjacencies = { 
  1: [2]             
  2: [1, 6]      ,  
  4: []          ,
  5: [6]         , 
  6: [2, 5, 7]   ,
  7: [6]         
}

#Recurse: "6" has most adjacencies in new_choose_from_subset, so choose and remove
new_graph = [3, 6]
new_choose_from_subset = [2, 5,7]    
adjacencies = { 
  1: [2]             
  2: [1]         ,  
  4: []          ,
  5: []          , 
  7: []          
}

#Recurse: Amongst [2,5,7], 2 has the most adjacencies
new_graph = [3, 6, 2]
new_choose_from_subset = [1]
adjacencies = { 
  1: []              
  4: []          ,
  5: []          , 
  7: []          
]

#new_choose_from_subset contains only 1, so that's your next...
new_graph = [3,6,2,1]
new_choose_from_subset = []
adjacencies = {
  4: []          ,
  5: []          , 
  7: []          
]

#From here on out, you'd be choosing randomly between the rest, so you might end up with:
new_graph = [3, 6, 2, 1, 5, 7, 4] 
```

完整性检查？`3->6`在原始中出现 1x，`6->2`出现 2x，`2->1`出现 5x，`1->5`出现 0，`5->7`出现 0，`7->4`出现 0。因此，您保留了最常见的邻接 (2->1) 和其他两个“可能很重要”的邻接。否则，您将在解决方案空间中尝试新的邻接。

更新：最初我忘记了递归时的关键点，您选择与*刚刚选择的节点连接最多的节点*。这对于保留高适应性链至关重要！我已经更新了描述。

# iphone - 如何使用 libxml 解析来解析 xml 数据

> ID：10799423
> 
> 赞同：7
> 
> 时间：2012-05-29T12:44:48.917
> 
> 标签：iphone, ios

这是我想使用 libxml 解析来解析的 xml 结构。

![在此处输入图像描述](../Images/aa4d28529fbba0a88975ae4d692e49ac.png)

![在此处输入图像描述](../Images/a9752c475ee4f78e26e90aaa311d3b62.png)

如何获取“campaign”标签（即**ID**）和“image”标签（即**url**和**size** ）的属性值。

如果我使用这些值，我可以提取“code”标签和“name”标签的值。

```
static const char *kName_campaign = "campaign";
static const NSUInteger kLength_campaign = 9;
static const char *kName_code = "code";
static const NSUInteger kLength_code = 5;
static const char *kName_name = "name";
static const NSUInteger kLength_name = 5; 
```

然后我得到了当前和即将到来的活动的代码和名称。这是我在解析完成时调用的委托中使用的代码。

```
static void endElementSAX(void *ctx, const xmlChar *localname, const xmlChar *prefix, const xmlChar *URI)
{    
    LibXMLParser *parser = (LibXMLParser *)ctx;

    if (parser.parsingASong == NO) return;

    if (prefix == NULL)
    {
        if (!strncmp((const char *)localname, kName_campaign, kLength_campaign)) 
        {
            [parser finishedCurrentSong];
            parser.parsingASong = NO;
        } 
        else if (!strncmp((const char *)localname, kName_code, kLength_code))
        {
            parser.currentSong.title = [parser currentString];
            NSLog(@"Code  :: %@",[parser currentString]);
        }
        else if (!strncmp((const char *)localname, kName_name, kLength_name)) 
        {
            parser.currentSong.category = [parser currentString];
            NSLog(@"Name :: %@",[parser currentString]);
        }
    }
} 
```

如何从“campaign”标签中获取从**id开始到底部的属性值。**来自“图像”标签的**网址**和**大小？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T07:07:34.627

```
static void startElementSAX(void *ctx, const xmlChar *localname, const xmlChar *prefix, const xmlChar *URI, int nb_namespaces, const xmlChar **namespaces, int nb_attributes,
int nb_defaulted, const xmlChar **attributes)
{

if (nb_attributes > 0)
{
    NSMutableDictionary* attributeDict = [NSMutableDictionary dictionaryWithCapacity:(NSUInteger)[NSNumber numberWithInt:nb_attributes]];
    for (int i=0; i<nb_attributes; i++)
    {
       NSString* key = [NSString stringWithCString:(const char*)attributes[0] encoding:NSUTF8StringEncoding]; 
       NSString* val = [[NSString alloc] initWithBytes:(const void*)attributes[3] length:(attributes[4] - attributes[3]) encoding:NSUTF8StringEncoding];
       attributes += 5;

       [attributeDict setValue:val forKey:key];
    }
 }
} 
```

试试这个..

# web-services - ASP.NET Web 服务在 Windows Azure 中返回错误请求

> ID：10799425
> 
> 赞同：2
> 
> 时间：2012-05-29T12:44:58.187
> 
> 标签：web-services, azure, bad-request

重新启动 Windows 7 后，我以管理员身份打开 Visual Studio 2010，使用 ASP.NET Web 角色创建一个新的 Windows Azure 项目项目，然后在 WebRole1 项目中添加一个 WebService1.asmx 并按 F5（运行）。

Windows Azure 服务启动正常，浏览器完美打开 http://127.0.0.1:8080 **/WebService1.asmx**。但是当我单击调用按钮来测试 web 服务方法时，我总是收到一个**错误的请求 - 无效的主机名**，带有 http://127.0.0.1: **8081** /WebService1.asmx/HelloWorld。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:26:47.487

最可能的原因是 ASMX 的 WSDL 文件不支持负载平衡环境，例如 Windows Azure。测试功能依赖于 WSDL。如果您添加 Web/服务参考，您将看到类似的问题。建议升级到 WCF。在 WCF 中，您可以使用 useRequestHeadersForMetadataAddress (http://msdn.microsoft.com/en-us/library/ee816894.aspx) 来解决此问题。如果您需要使用 ASMX，请尝试手动提供正确的 WSDL 文件。

# mysql - 如何在 MySQL 中将字符串与转义的引号字符匹配？

> ID：10799427
> 
> 赞同：4
> 
> 时间：2012-05-29T12:45:01.773
> 
> 标签：mysql, sql, phpmyadmin

在 PhpMyAdmin 我使用这个查询：

```
SELECT * FROM myrecords where TITLE LIKE "%\\\"%" 
```

过滤掉有`"`符号转义的不良保存记录`\`。应该只是`"`。所以我只需要找到这些记录`\"`并将其替换为`"`only。但是当我使用上面的查询来过滤时，`\"`我得到`\"`的记录和`"`.

如何使此查询仅获取记录`\"`而不是`"`单独获取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:57:36.060

@paul 纠正我，是这样的：

```
SELECT t1.title FROM myrecords as t1 where replace(title,'\\\"','@') LIKE "%@%"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:57:44.937

这是要搜索的正确查询`\"`：

```
SELECT * FROM myrecords where TITLE LIKE '%\\\\\\\"%'; 
```

来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)：

> “要搜索“\”，请将其指定为“\\\\”；这是因为反斜杠被解析器剥离一次，并在进行模式匹配时再次剥离，留下一个反斜杠进行匹配。“

# javascript - 使用来自 JSON 对象的数组表示法进行多级属性检索

> ID：10799428
> 
> 赞同：4
> 
> 时间：2012-05-29T12:45:02.180
> 
> 标签：javascript, json, backbone.js

我在这里遇到了一个令人费解的问题，我使用 Backbone 中的集合检索了一个 JSON 对象。这是对象的样子：

```
{
    "MatchID": "00000001",
    "Date": "1970-01-01T00:00:00.000Z",
    "OriginalID": "",
    "Stage": {
        "StageNumber": "0",
        "StageType": "Stage Type"
    },
    "Round": {
        "RoundNumber": "0",
        "Name": "Round Name"
    },
    "Leg": "1",
    "HomeTeam": {
        "TeamID": "0",
        "Name": "Home Team Name"
    },
    "AwayTeam": {
        "TeamID": "0",
        "Name": "Away Team Name"
    },
    "Venue": {
        "VenueID": "0",
        "Name": "Venu Name"
    },
    "Referee": null,
} 
```

我想对这些数据做些什么，是根据特定属性过滤它，例如 Venue.Name 或 Date 属性（它们是对象的不同深度，对于其他一些数据，可能比两个级别更深） . 我在 Backbone 集合中有以下代码来过滤并返回一个新集合，其中的内容经过适当过滤：

```
findWhere: function (Attribute, Value)
{
    return new Project.Collections.Fixtures(this.filter(function (fixture)
    {
        return eval('fixture.attributes.' + Attribute) == Value;
    }));
} 
```

这允许我在一个属性中指定我想要过滤的属性，以及我希望它等于什么，对于任何深度的对象。问题是，我真的不想使用“eval”来执行此操作，但显然我不能将“[Attribute]”用于“AwayTeam.TeamID”之类的东西，因为它不起作用。

有谁知道我可以在不使用 eval 的情况下实现此功能的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T13:14:28.853

像这样的东西会让你遍历对象的层次结构来找到一个值：

```
var x = {
    y: {
        z: 1
    }
};

function findprop(obj, path) {
    var args = path.split('.'), i, l;

    for (i=0, l=args.length; i<l; i++) {
        if (!obj.hasOwnProperty(args[i]))
            return;
        obj = obj[args[i]];
    }

    return obj;
}

findprop(x, 'y.z'); 
```

您可以将此作为方法添加到您的`Fixture`对象：

```
Fixture = Backbone.Model.extend({
    findprop: function(path) {
        var obj = this.attributes,
            args = path.split('.'), 
            i, l;

        for (i=0, l=args.length; i<l; i++) {
            if (!obj.hasOwnProperty(args[i]))
                return;
            obj = obj[ args[i] ];
        }
        return obj;
    }
}); 
```

并用它来提取价值

```
var f = new Fixture();
f.findprop("HomeTeam.TeamID"); 
```

然后该`findWhere`方法可以重写为

```
findWhere: function (Attribute, Value)
{
    return new Project.Collections.Fixtures(this.filter(function (fixture){
        return fixture.findprop(Attribute) === Value;
    }));
} 
```

还有一个可以玩的小提琴[http://jsfiddle.net/nikoshr/wjWVJ/3/](http://jsfiddle.net/nikoshr/wjWVJ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:16:43.553

JavaScript 对象中的属性可以通过方括号、字符串标识符以及标准的点符号来访问。

换句话说，这：

`fixture.attributes.something`

与此相同：

`fixture.attributes["something"]`

您还可以将变量名称传递到方括号中，变量的值用作检索的键。

因此，您可以将代码更改为：

```
findWhere: function (Attribute, Value)
{
    return new Project.Collections.Fixtures(this.filter(function (fixture)
    {
        return fixture.attributes[Attribute] === Value;
    }));
} 
```

正如您在评论中指出的那样，这只处理一级对象和属性。要获取嵌套属性，您需要拆分“属性”变量并循环访问各个部分。我喜欢@nikoshr 的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-21T03:42:14.007

像这样使用怎么`eval()`样：

```
var myObject = {

  first: 'Some',
  last: 'Person',

  address: {
    city: 'Melbourne',
    country: 'Australia'
  }

}

var propPath = 'address.city';

var city = eval("myObject."+propPath);

console.log(city); // = Melbourne
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T15:29:20.410

我接受了 nikoshr 的回答，并为其添加了一些递归风格：

```
 var findprop = function (obj, path) {
        var args = (typeof path === 'string') ? path.split('.') : path,
            thisProperty = obj[args[0]];
        if (thisProperty === undefined) { return; } //not found

        args.splice(0, 1); //pop this off the array

        if (args.length > 0) { return findprop(thisProperty, args); } //recurse
        else {return thisProperty; }
    }; 
```

我不确定递归 cpu 循环是否有很多好处，但我喜欢递归函数在合适的时候

# xaml - 如何在 Metro 风格应用程序中应用数据缓存

> ID：10799438
> 
> 赞同：0
> 
> 时间：2012-05-29T12:45:42.993
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我已经创建了 Metro 风格的网格应用程序，它可以预览我从 Web 服务获取的数据，但是它的性能太差并且让应用程序如此缓慢，我想缓存我从 Web 服务获取的数据以提高性能任何帮助，在此先感谢.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:03:42.140

您可以使用 SQLite 来存储数据。这是一篇关于如何在 WinRT 应用程序中执行此操作的文章：http: [//timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

您将缓存的内容取决于应用程序的数据类型和使用场景，但您可以将数据存储在 SQLite 存储中，如果您处于离线状态或只是在尝试从 Web 获取数据之前尝试从那里获取数据服务。

# javascript - Javascript 数字和 NaN

> ID：10799440
> 
> 赞同：0
> 
> 时间：2012-05-29T12:45:55.577
> 
> 标签：javascript

我对 javascript 数字和`NaN`.

我正在通过 ajax POST 方法以 JSON 格式检索一个数字。

```
$.post('test.php?a=b', {w: w}, function(json) {
    desktop.height = desktop.height - json.height * 2;
}); 
```

当我尝试将它相乘时，它给了我 NaN。

```
desktop.height = desktop.height - json.height * 2;
NaN 
```

JSON 是一个对象，对吧？所以当我将它输入到 firebug/chrome 控制台时，它给了我 int 0，正如预期的那样。

```
var a = {}; a.t = 0; a.t * 2;
0 
```

即使我将它输入控制台，它仍然给我预期的 0 int。

```
var a = {}; a.t = "0"; a.t * 2;
0 
```

我的问题是，发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:50:08.277

如果`Content-Type`标头未设置为来自服务器并且仍然如果您希望 jQuery 将 json 字符串自动解析为 JS 对象，`application/json`那么您必须添加调用。`dataType` `json``$.post`

```
$.post('test.php?a=b', {w: w}, function(json) {
    desktop.height = desktop.height - json.height * 2;
  },'json'); 
```

[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)或者您必须像这样使用自己解析

```
 $.post('test.php?a=b', {w: w}, function(json) {
     json = $.parseJSON(json);
     desktop.height = desktop.height - json.height * 2;
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:48:02.023

当您检索您的数字时，请使用 Javascript 的`parseInt()`方法解析它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:49:08.793

它取决于 JSON 字符串的格式，所以如果`{height:<num>}`是，那么是正确的。但它实际上可能是一个字符串，您是否尝试过先将其解析为 int ？

```
parseInt(...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:50:06.017

要么`desktop.height`要么`json.height`是`NaN`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T12:56:01.660

JSON 是 Javascript 对象的字符串版本。使用 JSON.parse(text) 从您的帖子中收到的字符串创建一个对象。我不熟悉您的发布方法，但我会尝试

```
function(JSON.parse(json)) {
    desktop.height = desktop.height - json.height * 2;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-29T12:57:55.730

当您检索数字时，使用 JS **Number()**方法解析它们:)

# c++ - 如何允许通过嵌入式 Python 解释器中调用的脚本导入第三方库？

> ID：10799442
> 
> 赞同：4
> 
> 时间：2012-05-29T12:46:03.463
> 
> 标签：c++, python

我使用 Python C API 将 Python 2.7.2 解释器嵌入到 C++ 应用程序中。

在目标机器上，我不能保证安装 Python，所以我试图让嵌入式解释器查看我的应用程序所在的文件夹。所以在应用程序目录中，我有 Python 的 Lib、Libs 和 DLLs 文件夹。

在代码中，我使用了 Py_SetPythonHome() 和 Py_SetProgramName() 来加载 Python 并允许安装标准库。

我正在使用的测试脚本之一有：

```
import csv

import numpy 
```

csv 行现在很好。在 \libs 目录中，我可以看到 site-packages\numpy。但是导入在这条线上崩溃。我为此使用 numpy 1.6.1。

我想我可能需要更改模块搜索路径 - 这是正确的吗？实现这一点的最佳方法是什么，以允许我的脚本可以访问像 numpy 这样的第三方库？如果有帮助，您可以假设我可以生成 numpy 目录的绝对路径。

编辑：更多信息 - 我已经设法产生回溯，当它尝试“import multiarray”行并出现错误“ImportError: DLL load failed”时，我得到的错误在 \numpy\core\_ *init* _.py : 找不到指定的模块”。检查目录，我找到了一个 multiarray.pyd。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:30:01.483

当我使用 python C API 导入 numpy 时，我遇到了完全相同的问题。某些 .pyd 模块无法导入。当我改为boost.python时，没有问题。也许你也可以试试 boost.python。[这](http://wangqiang8511.com/2012/07/18/embedding-python-in-c-application/)是示例：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T13:25:59.437

原来这是一个 DLL 不匹配错误。代码正在查找的 numpy 版本的编译路径与我嵌入解释器的 C++ 代码的编译路径略有不同。

解决方案是针对我在应用程序中使用的 Python 发行版重新编译 numpy，但使用完全相同的编译器设置。这解决了问题。

# ios - NSDictionary：仅为抽象类定义的方法。我的应用程序崩溃了

> ID：10799444
> 
> 赞同：22
> 
> 时间：2012-05-29T12:46:11.757
> 
> 标签：ios, crash, nsdictionary

在我调用 addImageToQueue 后，我的应用程序崩溃了。我添加了 initWithObjects: forKeys: count: 但它对我没有帮助。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[NSDictionary initWithObjects:forKeys:count:]: 
method only defined for abstract class.  
Define -[DictionaryWithTag initWithObjects:forKeys:count:]!' 
```

我的代码

```
- (void)addImageToQueue:(NSDictionary *)dict
{
 DictionaryWithTag *dictTag = [DictionaryWithTag dictionaryWithDictionary:dict];
}

@interface DictionaryWithTag : NSDictionary
@property (nonatomic, assign) int tag;

- (id)initWithObjects:(id *)objects forKeys:(id *)keys count:(NSUInteger)count;

@end

@implementation DictionaryWithTag

@synthesize tag;

- (id)initWithObjects:(id *)objects forKeys:(id *)keys count:(NSUInteger)count
{
 return [super initWithObjects:objects forKeys:keys count:count];
}
@end 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-29T13:14:53.133

你在继承 NSDictionary 吗？这在 Cocoa-land 并不常见，这可以解释为什么您没有看到预期的结果。

NSDictionary 是一个类簇。这意味着您实际上永远不会使用 NSDictionary 的实例，而是使用它的私有子类之一。[在此处](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)查看 Apple 对类集群的描述。从那个文档：

> 您可以像创建任何其他类一样创建集群实例并与之交互。但是，在幕后，当您创建公共类的实例时，该类会根据您调用的创建方法返回相应子类的对象。（您没有也不能选择实例的实际类。）

你的错误信息告诉你的是，如果你想继承 NSDictionary，你必须为它实现你自己的后端存储（例如通过在 C 中编写一个哈希表）。它不仅要求您声明该方法，还要求您从头开始编写它，自己处理存储。这是因为像这样直接对类集群进行子类化与说您想为字典的工作方式提供新的实现是一样的。我相信你可以说，这是一项重大的任务。

假设你肯定想要继承 NSDictionary，你最好的办法是编写你的子类来包含一个普通的 NSMutableDictionary 作为属性，并用它来处理你的存储。[本教程](http://cocoawithlove.com/2008/12/ordereddictionary-subclassing-cocoa.html)向您展示了一种方法。这实际上并不难，您只需将所需的方法传递给您的字典属性。

您也可以尝试使用[关联引用](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)，它“模拟将对象实例变量添加到现有类”。这样，您可以将 NSNumber 与现有字典关联以表示标记，并且不需要子类化。

当然，您也可以将`tag`其作为字典中的键，并将值存储在其中，就像任何其他字典键一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-12T09:11:24.570

从[https://stackoverflow.com/a/1191351/467588](https://stackoverflow.com/a/1191351/467588)，这就是我为制作 NSDictionary 作品的子类所做的工作。我只是将一个 NSDictionary 声明为我的类的实例变量并添加一些更多必需的方法。它被称为[“复合对象”](https://developer.apple.com/library/mac/documentation/General/Conceptual/CocoaEncyclopedia/ClassClusters/ClassClusters.html#//apple_ref/doc/uid/TP40010810-CH4-SW81) - 感谢@mahboudz。

```
@interface MyCustomNSDictionary : NSDictionary {
    NSDictionary *_dict;
}
@end

@implementation MyCustomNSDictionary
- (id)initWithObjects:(const id [])objects forKeys:(const id [])keys count:(NSUInteger)cnt {
    _dict = [NSDictionary dictionaryWithObjects:objects forKeys:keys count:cnt];
    return self;
}
- (NSUInteger)count {
    return [_dict count];
}
- (id)objectForKey:(id)aKey {
    return [_dict objectForKey:aKey];
}
- (NSEnumerator *)keyEnumerator {
    return [_dict keyEnumerator];
}
@end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-04T17:04:41.783

我只是做了一个小把戏。
我不确定它是否是最好的解决方案（或者即使这样做也很好）。

```
@interface MyDictionary : NSDictionary

@end  

@implementation MyDictionary

+ (id) allocMyDictionary
{
    return [[self alloc] init];
}

- (id) init
{
    self = (MyDictionary *)[[NSDictionary alloc] init];

    return self;
}

@end 
```

这对我来说很好。

# html - 在 Web 浏览器中嵌入本地 .exe 的框架

> ID：10799451
> 
> 赞同：0
> 
> 时间：2012-05-29T12:46:22.727
> 
> 标签：html, browser, exe

这个问题可能听起来有点奇怪，但我目前正在一个项目中，这可以帮助解决许多问题。是否有可能将 .exe 嵌入任何网络浏览器？我不想直接在浏览器中运行程序（我猜这将是主要的安全风险），我只想将 .exe 的窗口嵌入到浏览器页面中。所以 .exe 在系统上本地运行，但我将它显示在网络浏览器中，而不是“windows 窗口”。把它想象成 VNC，我只需要我的“视频”和用户交互的可能性（程序是交互式 3D 可视化）。

我对这种可能性不抱太大希望，所以我也很高兴有任何建议允许我在程序在同一个（全屏）窗口中运行时显示网页。不一定必须是“真正的”浏览器，但应该允许 HTML、CSS 等基本内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-27T05:12:56.003

这听起来更像是一个超级用户的问题，而不是 StackOverflow 的问题。

无论如何，我为您提供了许多可能的解决方案：

1.  您可以使用第二台显示器。
2.  也许您真正需要的只是将“exe”窗口设置为“始终位于顶部”。
    我可以发誓，在早期版本的 Windows 中，这曾经是 Windows 默认任务管理器中的一个选项，但我现在使用 3rd-party 软件大约 10 年用于这个和许多其他目的，但是有很多这样的选项可以在网上找到。
    *不能冒险认可我在这里使用的那个，因为它往往会吓到人们认为我正试图用 HAX 感染他们。*
3.  如果您有正在运行的“exe”的源代码，您是否考虑过反过来并在您的桌面程序中构建一个 Web 渲染器？像 WebKit、Servo 之类的东西。
    *或者你可以让程序在一个端口上监听你可以从你必须制作的页面发送的网络数据包——就像一个遥控器。
    如果您运行服务器，还有 cgi-bin 选项。
    而且，要查看您正在控制的内容，您可能希望将其流式传输到某个流媒体平台（如果您让它流式传输一个模糊的窗口），将他们的播放器小部件嵌入`iframe`到您的自定义本地网页中，并保留您正在访问的网站另一个框架。
    甚至可以编写程序来读取 XInput 并通过 Mixer 使用其 MixPlay 功能对其进行流式传输来控制它。*

希望这对您有所帮助。

# ios - 在 ## 线上分配并存储到 musicPlayController 中的对象的潜在泄漏

> ID：10799455
> 
> 赞同：0
> 
> 时间：2012-05-29T12:46:29.390
> 
> 标签：ios, memory-leaks

```
- (void)showMusicPlayer
{
[MediaPlayController releaseInstance];
MusicPlayController *musicPlayController = [[MusicPlayController alloc] init];
MusicPlayerViewController *musicPlayerViewController = [musicPlayController createMusicPlayerViewController];

HomeRunManagerAppDelegate *delegate = [[UIApplication sharedApplication] delegate];
[delegate showFullScreenView:musicPlayerViewController];
} 
```

方法返回一个带有 +1 保留计数的 object-c 对象。

我知道我分配了一个 musicPlayController 实例，它似乎在播放音乐，但只是泄漏。我不知道如何解决警告（或内存泄漏）。我应该在哪里释放我的对象？

我认为，

```
MusicPlayController *musicPlayController = [[[MusicPlayController alloc] init] autorelease]; 
```

不是一个有用的方法。

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:59:15.977

是的，你必须释放`musicPlayController`

或者通过

```
MusicPlayController *musicPlayController = [[[MusicPlayController alloc] init] autorelease]; 
```

或者

```
 MusicPlayController *musicPlayController = [[MusicPlayController alloc] init];
MusicPlayerViewController *musicPlayerViewController = [musicPlayController createMusicPlayerViewController];  
[musicPlayController release]; 
```

# javascript - 警告用户未接受 T&C 的弹出框（使用贝宝）

> ID：10799457
> 
> 赞同：0
> 
> 时间：2012-05-29T12:46:38.283
> 
> 标签：javascript, jquery, html, forms

我目前正在使用一种方法来确保用户在订购之前接受我网站的条款和条件和警告，当前的方法只是隐藏付款选项，直到选中这两个框。

但我的客户不喜欢这样，相反他希望付款选项始终存在，但如果他们尝试点击购买而不先选中两个框，它将显示一个警告框，上面写着“请接受 T&C 和警告”。

可以找到支付框的页面是： [http ://rickydawn.co.uk/wolly/subscribe.php](http://rickydawn.co.uk/wolly/subscribe.php)

我目前使用的所有代码都可以在源代码中找到！

我该怎么办？我有这个脚本会在选中贝宝按钮时出现一个弹出窗口，但是我怎样才能让它只在未选中框时出现？

```
<script type="text/javascript">

function confSubmit()
{
return confirm("Have you read the Terms and Conditions of sale?");
}

</script>
</head>
<body>

<form onsubmit="return confSubmit();" target="paypal" 

action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="0000000">
<table>
<tr><td><input type="hidden" name="on0" value="Price + postage">Price + 

postage</td></tr><tr><td><select name="os0">
<option value="Price + postage France">Price + postage France €00,00</option>
<option value="Price + postage CEE or Switzerland">Price + postage CEE or Switzerland 

€00,00</option>
<option value="Price + postage Other Countries">Price + postage Other Countries 

€00,00</option>
</select> </td></tr>
</table>
<input type="hidden" name="currency_code" value="EUR">
<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif" name="submit" 

alt="PayPal - The safer, easier way to pay online!" value="Submit Form">

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:56:42.180

您找到 TnC 复选框的选中状态并根据其选中状态执行确认弹出窗口：

```
function confSubmit()
{
    if(!document.getElementById("tnc_checkbox_id").checked)
    { 
        return confirm("Have you read the Terms and Conditions of sale?");
    }
} 
```

您可以根据需要对其他复选框执行相同操作...

编辑：为了摆脱“取消”，像这样修改你的函数（你应该重命名函数，因为它不再是确认对话框）：

```
function confSubmit()
{
    if(!document.getElementById("tnc_checkbox_id").checked)
    { 
        alert("Have you read the Terms and Conditions of sale?");
        return false;
    }
} 
```

# php - 从 Div 中拖动图像并放置在 Canvas 中

> ID：10799459
> 
> 赞同：1
> 
> 时间：2012-05-29T12:46:39.220
> 
> 标签：php, jquery-ui, drag-and-drop, html5-canvas, kineticjs

我需要一个关于如何从 div 拖动图像并将其放入画布的查询或示例。我正在使用 Jquery 和 KineticJs 在其中取得了一些成功。

我的目标是拖动图像并可以在画布中执行各种功能，类似于[http://polyvore.com/cgi/app](http://polyvore.com/cgi/app)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:17:41.960

我不相信 JQuery 和 KineticJS 是可以互换的，你可以轻松地做这样的事情。本质上，您需要一个存储有关 JQuery 图像的数据的函数，一个检测何时进入画布（鼠标悬停）并开始跟踪运动的函数，最后是一个从 JQuery 图像 div 复制信息并将其“转换”为KineticJS 会识别的东西。

```
 function convert(imageDiv){
     var config = $('#divId').getInfo();  //another function you'd need to create to grab configuration of stored image.
     var kineticImage = new Kinetic.Image(config);
 } 
```

# objective-c - 同时禁用多个长按手势

> ID：10799469
> 
> 赞同：2
> 
> 时间：2012-05-29T12:47:06.653
> 
> 标签：objective-c, ios, uigesturerecognizer

我有一个`UIView`，我有多个`UIImageView's`作为它的子视图。我已经添加`UILongPressGestureRecognizer`到每个子视图中。我处理这个手势的方法是在发送者上执行一些动画`UIImageView`。

如果我一次长按两个`ImageView's`，动画就会中断。

有什么办法可以同时禁用多个长按手势？即只允许一个 `UIImageView`检测LongPress 手势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T17:41:36.890

您实际上有几种方法可以解决您的问题：

`exclusiveTouch`为所有图像视图设置为 YES。它将阻止将触摸事件传递到同一窗口中的其他视图。

或者，您可以设置标志以在您的识别器之一移动到开始状态时忽略其他识别器。

或者，您可以在委托方法中禁用手势识别器（UIGestureRecognizer 具有`enabled`属性），除了当前的手势识别器，并在手势完成时再次启用所有手势识别器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-03T08:36:20.970

**如果**我们正在使用`TableViewController`并且我们只想`UILongPressGestureRecognizer`同时在一个单元上操作，我们也可以解决这个问题。

首先，我们需要在 CustomCell 中定义一个静态变量：

```
static var isLongPressInProgress = false 
```

然后在`gestureRecognizerShouldBegin`哪些状态下我们是否可以使用手势：

```
override func gestureRecognizerShouldBegin(gestureRecognizer: UIGestureRecognizer) -> Bool {        
    if let _ = gestureRecognizer as? UILongPressGestureRecognizer {
        if CustomCell.isLongPressInProgress == true {
          return false
        }
      return true
     }
  return false
 } 
```

您将 var`isLongPressInProgress`中的设置`case .Began:`为 true 和设置`case .Ended:`为 false

# wordpress - 检查“置顶帖”类型

> ID：10799477
> 
> 赞同：1
> 
> 时间：2012-05-29T12:47:26.130
> 
> 标签：wordpress, loops, implementation, app-themes

我正在研究“classipress”（一个 wordpress 主题），我打算将该功能（置顶帖）放在该类别的顶部。

到目前为止，我已经通过使用以下脚本获得了所需的结果，因此对于这个 classipress 有两个处理类别广告 lisitng 的文件：

1.  分类-ad_cat.php
2.  循环广告列表

`taxonomy-ad_cat.php`实际上传递了当前类别和`the loop-ad_listing`该类别的调用，所以我最初只调用粘性帖子，然后使用以下代码调用除了粘性之外的帖子：

```
query_posts( array('post_type' => APP_POST_TYPE, APP_TAX_CAT => $term->slug, 'ignore_sticky_posts' => 1, 'paged' => $paged, 'post__in' => get_option('sticky_posts')) );
loop hoes here... 
```

问题是我想检查是否`loop-ad_listing.php`有`post__in`粘性，因为当（例如）一个类别当前没有列表时，它会显示两次空消息。一次用于粘性调用循环，第二次用于没有粘性调用循环..

你能帮我根据我的描述在我发布的代码中正确地实现这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:57:21.013

你为什么不使用：

```
While(has_post()): the_post();
    If(is_sticky()):
    Else:
    Endif;
Endwhile; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T11:40:07.007

酷...我得到了解决方案...

我制作了另一个文件 *loop-ad_listing1.php* & 在该文件中我只检查是否没有帖子显示空消息 & 在调用循环的原始文件中是 *loop-ad_listing.php* ...我从中删除空消息...

所以我实现的是，

如果我在该页面上有广告列表，我的替代文件不显示任何内容，原始文件显示列表，如果没有广告列表，则我的重复文件显示空消息，而原始文件不显示任何内容..酷:)

如果我们只有一个列表文件，上述 Mihai Stancu 技巧也将有效且更可取。

# java - 为什么 webapp 在 SwingUtilities.isEventDispatchThread() 上挂起

> ID：10799490
> 
> 赞同：1
> 
> 时间：2012-05-29T12:48:05.440
> 
> 标签：java, multithreading, swing, x11, freeze

我有一段代码需要在 Swing 应用程序和 web 应用程序中运行。但它应该在每个环境中做些稍微不同的事情。因此我们检查[SwingUtilities.isEventDispatchThread()](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#isEventDispatchThread%28%29)

在正常工作一段时间后，这突然停止工作。它只是挂在那个电话上，永远不会回来。知道为什么会这样吗？

我们在 linux 机器上使用 java 6、tomcat 7。

更新：

我们删除了对 isEventDispatchThread() 的调用，所以我的直接问题得到了解决，但我仍然对为什么会发生这种情况的答案感兴趣。

我们又调试了一点，得到了一个线程转储，并为一个线程找到了下面的东西。它显示许多线程正在等待它。所以这就解释了悬挂。

`java.awt.Toolkit.getDefaultToolkit`似乎导致锁定，因为它是同步的。所以尤拉暗示了正确的方向。

所以问题仍然存在：为什么它没有完成或将问题转向为什么会`sun.awt.X11GraphicsEnvironment.initDisplay(X11GraphicsEnvironment.java:-1)`挂起？

机器上正在运行X11....

```
"http-bio-8081-exec-10@10344" daemon prio=5 tid=0x1ae nid=NA runnable
  java.lang.Thread.State: RUNNABLE
  blocks http-bio-8081-exec-13@10809
  blocks http-bio-8081-exec-12@10786
  blocks http-bio-8081-exec-11@10343
  blocks http-bio-8081-exec-9@10345
  blocks http-bio-8081-exec-7@10346
  blocks http-bio-8081-exec-6@10347
  blocks http-bio-8081-exec-4@10349
  blocks http-bio-8081-exec-3@10352
  blocks http-bio-8081-exec-2@10353
  blocks http-bio-8081-exec-1@10354
   at sun.awt.X11GraphicsEnvironment.initDisplay(X11GraphicsEnvironment.java:-1)
   at sun.awt.X11GraphicsEnvironment.access$100(X11GraphicsEnvironment.java:52)
   at sun.awt.X11GraphicsEnvironment$1.run(X11GraphicsEnvironment.java:155)
   at java.security.AccessController.doPrivileged(AccessController.java:-1)
   at sun.awt.X11GraphicsEnvironment.<clinit>(X11GraphicsEnvironment.java:131)
   at java.lang.Class.forName0(Class.java:-1)
   at java.lang.Class.forName(Class.java:169)
   at java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment(GraphicsEnvironment.java:68)
   - locked <0x2507> (a java.lang.Class)
   at sun.awt.X11.XToolkit.<clinit>(XToolkit.java:89)
   at java.lang.Class.forName0(Class.java:-1)
   at java.lang.Class.forName(Class.java:169)
   at java.awt.Toolkit$2.run(Toolkit.java:834)
   at java.security.AccessController.doPrivileged(AccessController.java:-1)
   at java.awt.Toolkit.getDefaultToolkit(Toolkit.java:826)
   - locked <0xf9d> (a java.lang.Class)
   at java.awt.Toolkit.getEventQueue(Toolkit.java:1689)
   at java.awt.EventQueue.isDispatchThread(EventQueue.java:857)
   at javax.swing.SwingUtilities.isEventDispatchThread(SwingUtilities.java:1339)
   at xxxxxxxxxA.setCurrentUser(xxxxxxxxxA.java:196)
   at xxxxxxxxxB.setCurrentUser(xxxxxxxxxB.java:41)
   at xxxxxxxxxC.UserThreadLocalHandler.afterCompletion(xxxxxxxxxC.java:96)
   at org.springframework.web.servlet.DispatcherServlet.triggerAfterCompletion(DispatcherServlet.java:1108)
   at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:830)
   at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
   at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
   at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
   at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at org.springframework.web.filter.ShallowEtagHeaderFilter.doFilterInternal(ShallowEtagHeaderFilter.java:58)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
   at com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
   at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:162)
   at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
   at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
   at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
   at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
   at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
   at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
   at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
   at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
   at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
   at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
   at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
   at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
   at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
   at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
   at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
   - locked <0x2a42> (a org.apache.tomcat.util.net.SocketWrapper)
   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
   at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:08:28.533

在后台，`SwingUtilities.isEventDispatchThread()`调用`Toolkit.getEventQueue()`方法，该方法具有以下来源：

```
/* Accessor method for use by AWT package routines. */
static EventQueue getEventQueue() {
    return getDefaultToolkit().getSystemEventQueueImpl();
} 
```

`Toolkit.getDefaultToolkit`被声明为`synchronized`方法 - 也许就是这种情况。另外，请参考此方法的JavaDoc：http: [//docs.oracle.com/javase/6/docs/api/java/awt/Toolkit.html#getDefaultToolkit%28%29](http://docs.oracle.com/javase/6/docs/api/java/awt/Toolkit.html#getDefaultToolkit%28%29)

希望这可以帮助

# qt - Qt Win 迁移框架的链接错误：未解析的符号 QWinWidget::staticMetaObject

> ID：10799495
> 
> 赞同：5
> 
> 时间：2012-05-29T12:48:21.700
> 
> 标签：qt, qt-mfc-migration

我正在尝试设置 Qt Win 迁移框架以在现有的基于 MFC 的应用程序中使用 Qt。我想将框架用作库，因此我`qmake`在`qtwinmigrate/buildlib/buildlib.pro`文件上运行以创建 Visual Studio vcxproj 项目文件。我将框架构建为 dll/lib 并将标头放在一个公共包含目录中。在我的 MFC 项目中，我添加了 Qt 迁移框架的库作为依赖项，在适当的地方包含了头文件，并添加了代码来测试框架。一切编译正常，但随后出现链接器错误：

> 错误 LNK2001：未解析的外部符号“公共：静态结构 QMetaObject const QWinWidget::staticMetaObject”（？staticMetaObject@QWinWidget@@2UQMetaObject@@B）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T12:48:21.887

根据[这个论坛帖子](http://www.qtcentre.org/threads/25377-Problem-using-QWinWidget)，必须将预处理器定义添加到使用 Qt Win 迁移框架作为库的 MFC 项目中。只需添加

`QT_QTWINMIGRATE_IMPORT`

到下的项目设置`Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions`。

有关为什么这是必要的更深入的解释，请参阅[此博客文章](http://linux.m2osw.com/unresolved-external-symbol-public-virtual-struct-qmetaobject-const-thiscall-myclassmetaobject)。

# .net - 检查一个文件夹是否包含一个文件，该文件是另一个文件夹中文件的副本

> ID：10799497
> 
> 赞同：2
> 
> 时间：2012-05-29T12:48:27.890
> 
> 标签：.net, file, directory, copy

我有一个文件：

```
string myFile = @"C:\Users\Nick\Desktop\myFile.txt"; 
```

我想检查另一个目录中是否有这个文件的副本：

```
string DestinationDir = @"C:\Users\Nick\Desktop\MyDir" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:49:40.683

我知道的最简单的方法是在[System.IO命名空间中使用](http://msdn.microsoft.com/en-us/library/system.io)[Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)和[File](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)类。

您可以使用[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt.aspx)方法将目标目录的路径与要查找的文件的名称结合起来（由[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename)方法返回）：

```
string dest_file = Path.Combine(dest_dir, Path.GetFileName(source_file)); 
```

此时您可以简单地使用[File.Exists](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)方法检查是否`dest_file`存在：

```
if (File.Exists(dest_file))
{
   // You can get file properties using the FileInfo class
   FileInfo info_dest = new FileInfo(dest_file);
   FileInfo info_source = new FileInfo(source_file);

   // And to use the File.OpenRead method to create the FileStream
   // that allows you to compare the two files
   FileStream stream_dest = info_dest.OpenRead();
   FileStream stream_source = info_source.OpenRead();

   // Compare file streams here ...
} 
```

[这里](http://support.microsoft.com/kb/320348/en-us)有一篇文章解释了如何使用 FileStream 比较两个文件。

还有一种检查文件是否存在于目标目录中的替代方法，请查看[Directory](http://msdn.microsoft.com/en-us/library/wa70yfe2)类，特别是方法[Directory.GetFiles](http://msdn.microsoft.com/en-us/library/07wt70x2.aspx)：

```
foreach (string dest_file in Directory.GetFiles(dest_dir))
{
    // Compare dest_file name with source_file name
    // and so on...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:51:20.897

从 中提取文件名`myFile`，`Path.Combine`用于为 DestinationDir + 您的文件名创建新路径，然后使用[File.Exists检查文件是否存在](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

要比较两个文件，请尝试：

```
public static IEnumerable<string> ReadLines(string path)
public static IEnumerable<string> ReadLines(string path, Encoding encoding)
bool same = File.ReadLines(path1).SequenceEqual(File.ReadLines(path2)); 
```

检查此线程：[如何使用 .NET 快速比较 2 个文件？](https://stackoverflow.com/questions/1358510/how-to-compare-2-files-fast-using-net)

# regex - 用于提取授权号的 RegEx 模式

> ID：10799500
> 
> 赞同：2
> 
> 时间：2012-05-29T12:48:36.543
> 
> 标签：regex, vba

我正在使用[GSKinner 的 Reg Exr 工具](http://gskinner.com/RegExr/?)来帮助提出一种模式，该模式可以在包含大量其他垃圾的字段中找到授权号。授权号是一个包含字母（有时）、数字（总是）和连字符（有时）的字符串（*即*授权总是在某处包含一个数字，但并不总是包含连字符和字母）。此外，授权号可以位于我正在搜索的字段中的任何位置。

正确授权号的示例包括：

```
 5555834384734  ' All digits
 12110-AANM     ' Alpha plus digits, plus hyphens
 R-455545-AB-9  ' Alpha plus digits, plus multiple hyphens
 R-45-54A-AB-9  ' Alpha plus digits, plus multiple hyphens
 W892160        ' Alpha plus digits without hypens 
```

这是一些带有额外垃圾的示例数据，有时会用连字符或没有空格附加到真实授权号，使其看起来像数字的一部分。垃圾以可预测的形式/单词出现：REF、CHEST、IP、AMB、OBV 和 HOLD，它们不是授权号的一部分。

```
 5557653700 IP
 R025257413-001
 REF 120407175
 SNK601M71016
 U0504124 AMB
 W892160
 019870270000000
 00Q926K2
 A025229563
 01615217 AMB
 12042-0148
 SNK601M71016
 12096NHP174
 12100-ACDE
 12110-AANM
 12114AD5QIP
 REF-34555
 3681869/OBV ONL 
```

这是我正在使用的模式：

```
 "\b[a-zA-Z]*[\d]+[-]*[\d]*[A-Za-z0-9]*[\b]*" 
```

我正在学习 RegExp，所以它无疑可以改进，但它适用于上述情况，但不适用于以下情况：

```
 REFA5-208-4990IP  'Extract the string 'A5-208-4990'without REF or IP
 OBV1213110379     'Extract the string '1213110379' without the OBV
 5520849900AMB     'Extract the string '5520849900' without AMB
 5520849900CHEST   'Extract the string '5520849900' without CHEST
 5520849900-IP     'Extract the string '5520849900' without -IP
 1205310691-OBV    'Extract the string without the -OBV
 R-025257413-001   'Numbers of this form should also be allowed.
 NO PCT 93660      'If string contains the word NO anywhere, it is not a match
 HOLDA5-208-4990   'If string contains the word HOLD anywhere, it is not a match 
```

有人可以帮忙吗？

出于测试目的，这里是创建一个包含示例输入数据的表的 Sub：

```
 Sub CreateTestAuth()

 Dim dbs As Database
 Set dbs = CurrentDb

 With dbs
     .Execute "CREATE TABLE tbl_test_auth " _
         & "(AUTHSTR CHAR);"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('5557653700 IP');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "(' R025257413-001');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('REF 120407175');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('SNK601M71016');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('U0504124 AMB');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('3681869/OBV ONL');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('REFA5-208-4990IP');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('5520849900AMB');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('5520849900CHEST');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('5520849900-IP');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('1205310691-OBV');"
     .Execute " INSERT INTO tbl_test_auth " _
         & "(AUTHSTR) VALUES " _
         & "('HOLDA5-208-4990');"
     .Close
 End With
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:39:23.927

好的，起初我认为额外的要求会使正则表达式*更长*。
但是通过积极的前瞻，它实际上几乎是相同的大小。这次只有正则表达式：
`\b(?=.*\d)([a-z0-9]+(?:-[a-z0-9]+)*)\b`

或用注释分解（忽略空格）：

```
\b                     # Word start
  (?=.*\d)             # A number has to follow somewhere after this point
  (                    # Start capture group
    [a-z0-9]+          # At least one alphanum
    (?:-[a-z0-9]+)*    # Possibly more attached with hyphen
  )                    # End capture group
\b                     # Word end 
```

但请注意，并非所有正则表达式风格都支持可变宽度前瞻。我不知道VBA之一。

第二个注意事项：`(?=)`如果数字出现在单词结尾之后，也将满足。所以在
**DONT-RECOGNIZE-ME** but-1-5ay-yes
中，粗体部分将被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T06:07:34.900

***您的示例输入文件（此文件的路径 s/b 给`function<GetMatches>`as `inputFilePath`）：***

```
5557653700 IP
R025257413-001
REF 120407175
SNK601M71016
U0504124 AMB
W892160
019870270000000
00Q926K2
A025229563
01615217 AMB
12042-0148
SNK601M71016
12096NHP174
12100-ACDE
12110-AANM
12114AD5QIP
REF-34555
3681869/OBV ONL 
```

***这是保存在文件中的垃圾（此文件的路径 s/b 给`function<GetMatches>`as `replaceDBPath`）：***

```
^REF
IP$
^OBV
AMB$
CHEST$
-OBV$
^.*(NO|HOLD).*$ 
```

***这里是`bas`：***

```
Option Explicit
'This example uses the following references:
'Microsoft VBScript Regular Expressions 5.5 and Microsoft Scripting Runtime

Private fso As New Scripting.FileSystemObject
Private re As New VBScript_RegExp_55.RegExp

Private Function GetJunkList(fpath$) As String()
0     On Error GoTo errHandler
1     If fso.FileExists(fpath) Then
2         Dim junkList() As String, mts As MatchCollection, mt As Match, pos&, tmp$
3         tmp = fso.OpenTextFile(fpath).ReadAll()
4         With re
5             .Global = True
6             .MultiLine = True
7             .Pattern = "[^\r\n]+"
8             Set mts = .Execute(tmp)
9             ReDim junkList(mts.Count - 1)
10            For Each mt In mts
11                junkList(pos) = mt.Value
12                pos = pos + 1
13            Next mt
14        End With
15        GetJunkList = junkList
16    Else
17        MsgBox "File not found at:" & vbCr & fpath
18    End If
19    Exit Function
errHandler:
     Dim Msg$
     With Err
         Msg = "Error '" & .Number & " " & _
        .Description & "' occurred in " & _
        "Function<GetJunkList> at line # " & IIf(Erl <> 0, " at line " & CStr(Erl) & ".", ".")
     End With
     MsgBox Msg, vbCritical
End Function

Public Function GetMatches(replaceDBPath$, inputFilePath$) As String()
0     On Error GoTo errHandler
1     Dim junks() As String, junkPat$, tmp$, results() As String, pos&, mts As MatchCollection, mt As Match
2     junks = GetJunkList(replaceDBPath)
3     tmp = fso.OpenTextFile(inputFilePath).ReadAll
4
5     With re
6        .Global = True
7        .MultiLine = True
8        .IgnoreCase = True
9        For pos = LBound(junks) To UBound(junks)
10           .Pattern = junkPat
11           junkPat = junks(pos)
12           'replace junk with []
13           tmp = .Replace(tmp, "")
14       Next pos
15
16       'trim lines [if all input data in one line]
17       .Pattern = "^[ \t]*|[ \t]*$"
18       tmp = .Replace(tmp, "")
19
20       'create array using provided pattern
21       pos = 0
22       .Pattern = "\b[a-z]*[\d]+\-*\d*[a-z0-9]*\b"
23       Set mts = .Execute(tmp)
24       ReDim results(mts.Count - 1)
25       For Each mt In mts
26           results(pos) = mt.Value
27           pos = pos + 1
28       Next mt
29    End With
30
31    GetMatches = results
32    Exit Function
errHandler:
     Dim Msg$
     With Err
         Msg = "Error '" & .Number & " " & _
        .Description & "' occurred in " & _
        "Function<GetMatches> at line # " & IIf(Erl <> 0, " at line " & CStr(Erl) & ".", ".")
     End With
     MsgBox Msg, vbCritical
End Function 
```

***和样品测试仪***

```
Public Sub tester()
    Dim samples() As String, s
    samples = GetMatches("C:\Documents and Settings\Cylian\Desktop\junks.lst", "C:\Documents and Settings\Cylian\Desktop\sample.txt")
    For Each s In samples
        MsgBox s
    Next
End Sub 
```

***可以从以下位置调用`immediate window`：***

```
tester 
```

* * *

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:28:23.407

由于额外的过滤，我将使用两步法。

```
var splitter = new Regex(@"[\t\n\r]+", RegexOptions.Multiline);
const string INPUT = @"REFA5-208-4990IP
       OBV1213110379
       5520849900AMB
       5520849900CHEST
       5520849900-IP
       1205310691-OBV
       R-025257413-001
       NO PCT 93660
       HOLDA5-208-4990";
string[] lines = splitter.Split(INPUT);

var blacklist = new[] { "NO", "HOLD" };
var ignores = new[] { "REF", "IP", "CHEST", "AMB", "OBV" };

var filtered = from line in lines
         where blacklist.All(black => line.IndexOf(black) < 0)
         select ignores.Aggregate(line, (acc, remove) => acc.Replace(remove, ""));

var authorization = new Regex(@"\b([a-z0-9]+(?:-[a-z0-9]+)*)\b", RegexOptions.IgnoreCase);
foreach (string s in filtered)
{
  Console.Write("'{0}' ==> ", s);
  var match = authorization.Match(s);
  if (match.Success)
  {
    Console.Write(match.Value);
  }
  Console.WriteLine();
} 
```

* * *

印刷：

```
'A5-208-4990' ==> A5-208-4990
' 1213110379' ==> 1213110379
' 5520849900' ==> 5520849900
' 5520849900' ==> 5520849900
' 5520849900-' ==> 5520849900
' 1205310691-' ==> 1205310691
' R-025257413-001' ==> R-025257413-001 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:08:57.640

\b 开始是一个问题。还需要注意一些空格和一些破折号。试试这个“ `[a-zA-Z|\s|-]*[\d]+[-]*[\d]*[A-Za-z0-9]*[\b]*`”。仅在授权号上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:28:30.537

有时很容易让它松散，而不是死板地坚持一种或另一种方式。:)

尝试这个：

1 - 添加此功能

```
Public Function RemoveJunk(ByVal inputValue As String, ParamArray junkWords() As Variant) As String
    Dim junkWord
    For Each junkWord In junkWords
        inputValue = Replace(inputValue, junkWord, "", , , vbBinaryCompare)
    Next
    RemoveJunk = inputValue
End Function 
```

2 - 现在你的任务很简单。请参阅下面的示例了解如何使用它：

```
Sub Sample()
    Dim theText As String
    theText = " REFA5-208-4990IP blah blah "
    theText = RemoveJunk(theText, "-REF", "REF", "-IP", "IP", "-OBV", "OBV") '<-- complete this in a similar way

    Debug.Print theText

    '' -- now apply the regexp here --

End Sub 
```

RemoveJunk 函数调用的完成有点棘手。将较长的放在较短的之前。例如 -OBV 应该出现在“OBV”之前。

试一试，看看它是否能解决您的问题。

# sql-server - 有效地查找两个数据库表之间的变化

> ID：10799509
> 
> 赞同：0
> 
> 时间：2012-05-29T12:49:03.750
> 
> 标签：sql-server, database, tsql, replication

我有一组存储过程。每个存储过程都应该使特定的数据库表与另一个数据库中的相同表保持同步。

数据库表有多达数亿条记录。我需要找到最快的方法来验证这些过程是否确实使所有内容保持同步，并且我需要能够找到每个过程的两个表之间不同的记录（用于调试目的）。

我被告知以下内容（我相信在 SO 上的某个地方找到，但我没有链接，因为它是一段时间前的）：

```
Insert into target_table(columns)
select columns from table1
except
select columns from table2

Insert into target_table(columns)
select columns from table2
except
select columns from table1 
```

工作不够快。任何人都可以建议另一种更快的方法 - 使用 T-SQL 过程，甚至外部 C# 代码？（我认为 C# 代码可能让我存储 PK 以用于散列目的，因此即使我没有跟踪其余字段，我至少可以跟踪主键并找到多余/丢失的主键）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:50:54.133

做到这一点相当困难，但你可以从校验和中获得一些好处。一种方法是将密钥范围分成几个子范围，这些子范围可以 a) 并行和/或 b) 在不同的调度间隔进行验证。例如：

```
use master;
go

set nocount on;
go

if db_id('test') is not null
begin
    alter database test set single_user with rollback immediate;
    drop database test;
end
go

create database test;
go

use test;
go

create table data (id int identity(1,1) not null primary key, 
    data1 varchar(38),
    data2 bigint,
    created_at datetime not null default getdate());
go  

declare @i int = 0;
begin transaction   
while @i < 1000000
begin
    insert into data (data1, data2) values (newid(), @i);
    set @i += 1;
    if @i % 1000 = 0
    begin
        commit;
        raiserror (N'Inserted %d', 0, 0, @i);
        begin tran;
    end
end
commit  
raiserror (N'Inserted %d', 0, 0, @i);
go

backup database test to disk='c:\temp\test.bak' with init;
go

if db_id('copy') is not null
begin
    alter database copy set single_user with rollback immediate;
    drop database copy;
end
go

restore database copy from disk='c:\temp\test.bak'
with move 'test' to 'c:\temp\copy.mdf', move 'test_log' to 'c:\temp\copy_log.ldf';
go

-- create some differences
--
update test..data set data1 = newid() where id = cast(rand()*1000000 as int)
update copy..data set data1 = newid() where id = cast(rand()*1000000 as int)

delete from test..data where id = cast(rand()*1000000 as int);
insert into copy..data (data1, data2) values (newid(), -1);

-- do the check
--
declare @id int = 0;
while @id < 1010000
begin
    declare @chk1 int, @chk2 int;
    select @chk1 = checksum_agg(binary_checksum(*)) from test..data where id >= @id and id < @id + 10000
    select @chk2 = checksum_agg(binary_checksum(*)) from copy..data where id >= @id and id < @id + 10000
    if @chk1 != @chk2
    begin
        -- locate the different row(s)
        --
        select t.id, binary_checksum(*) as chk
            from test..data t
            where t.id >= @id and t.id < @id + 10000
        except
        select id, binary_checksum(*) as chk
            from copy..data c
            where c.id >= @id and c.id < @id + 10000;

        select t.id, binary_checksum(*) as chk
            from copy..data t
            where id >= @id and id < @id + 10000
        except
        select id, binary_checksum(*) as chk
            from test..data c
            where c.id >= @id and c.id < @id + 10000;
    end
    else
    begin
        raiserror (N'Range %d is OK', 0,0, @id);
    end
    set @id += 10000;
end 
```

主要问题是识别差异只能通过扫描所有行来实现，这是非常昂贵的。使用范围，您可以提交各种范围以按轮换时间表进行验证。和限制[`CHECKSUM_AGG`](http://msdn.microsoft.com/en-us/library/ms188920.aspx)当然[`BINARY_CHECKSUM(*)`](http://msdn.microsoft.com/en-us/library/ms173784.aspx)适用：

> `BINARY_CHECKSUM`在其计算中忽略不可比较数据类型的列。不可比较的数据类型包括**text**、**ntext**、**image**、 **cursor**、**xml**和不可比较的公共语言运行时 (CLR) 用户定义类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:34:45.463

这些是我为此目的使用的 2 个查询

表校验和

```
Select CheckSum_Agg(Binary_CheckSum(*)) From Table With (NOLOCK) 
```

行校验和

```
Select CheckSum_Agg(Binary_CheckSum(*)) From Table With (NOLOCK) Where Column = Value 
```

学分转到[SQL Server 的隐藏功能](https://stackoverflow.com/questions/121243/hidden-features-of-sql-server)

# java - servlet 中的引用网站

> ID：10799511
> 
> 赞同：0
> 
> 时间：2012-05-29T12:49:05.747
> 
> 标签：java, jsp, jakarta-ee

您好，我正在尝试获取推荐网站并将其插入我的数据库。

我想要的是在发布到 Servlet 之前获得称为我的“jsp 页面”的推荐站点

例如，我有从“www.example.com”访问的 first.jsp

当我将数据从第一个发布到 servlet 时，我想获得“www.example.com”而不是“first.jsp”

当我在我的 servlet 中执行此操作时，我得到“first.jsp”

```
request.getHeader("referer") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:15:32.217

我想出了怎么做

在jsp页面中我放置了这段代码

```
<%  session.setAttribute("Referer",request.getHeader("Referer")); %> 
```

现在在java servlet中我使用了这段代码

```
HttpSession session = request.getSession(true);
String referrer = session.getAttribute("Referer").toString(); 
```

# android - 如何在android中获取字符串中每个字符的宽度

> ID：10799512
> 
> 赞同：0
> 
> 时间：2012-05-29T12:49:09.027
> 
> 标签：android, textview

我有一个带有两个文本视图的框架布局，第二个文本视图必须在第一个文本视图之后跟随。两个文本视图之间的空间太大，因为宽度取决于字符串的字符宽度。我如何计算字符串的宽度或字符串中每个字符的宽度，以便我可以将第二个文本视图放在第一个文本视图之后。

```
SpannableString strUserName = new SpannableString(String.format(
            "%" + Name().length() + "s", "")
            .replace("", " ") 
```

# objective-c - 如何通过Objective C中的PUT发送Octect-stream数据？

> ID：10799517
> 
> 赞同：1
> 
> 时间：2012-05-29T12:49:30.527
> 
> 标签：objective-c

我有一个文件必须上传到服务器。服务器的要求是：PUT，Content-Type：application/octet-stream。

我使用以下代码创建了 NSData：

```
NSData* data = [NSData dataWithContentsOfFile:filePath]; 
```

AFAIK 这将是十六进制格式，数据以二进制形式发送。如何进行转换？一定有一条我不知道的直路！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:54:11.337

见官方文档：

> NSData 及其可变子类 NSMutableData 为字节缓冲区提供数据对象、面向对象的包装器。数据对象让简单分配的缓冲区（即没有嵌入指针的数据）具有 Foundation 对象的行为。

NSData 默认情况下不是您假设的十六进制，而是字节数组的形式。

如果您想将数据显示为包含二进制内容的字符串，请查看[这篇文章](https://stackoverflow.com/questions/10664958/show-nsdata-as-binary-in-a-nsstring)中的函数。

# android - Android 模拟器抛出 UnknownHostException

> ID：10799519
> 
> 赞同：0
> 
> 时间：2012-05-29T12:49:37.513
> 
> 标签：android, permissions, emulation

我只是想编写一个上传应用程序。我正在使用 NetBeans 及其 Android 插件。

我添加`<uses-permission android:name="android.permission.INTERNET" />`到清单中！

我也关闭了我的防火墙进行测试，如果`java.net.UnknownHostException`会抛出。

但在我的应用程序中，无论如何它都会被抛出！浏览器`www.google.de`运行良好。但不在我的应用程序上。

在这种情况下，无法在真实设备上进行调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:52:59.010

尝试这个：`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`

# ruby-on-rails - 如何在保存多条记录的 API 调用中使用 ActiveRecord 事务

> ID：10799523
> 
> 赞同：0
> 
> 时间：2012-05-29T12:49:45.893
> 
> 标签：ruby-on-rails

我有一个 API 接受 1 个 XML 中的以下数据（对象）。API 将此 XML 转换为相应的对象并将其保存在 DB 中。

```
User
--> Location
--> Payment data

Order
--> Bill Item 
```

我想实现这样的交易

```
___.transaction do

User.create
--> Location.create
--> Payment.create

Order.create
--> Bill Item.create

end 
```

在这种情况下可以使用事务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:07:46.663

当然，您可以在 ActiveRecord 中执行此操作。只需引发异常即可回滚事务。

```
User.transaction do
  User.create
  Location.create
  Payment.create

  Order.create
  Bill Item.create
end 
```

查看更多详细信息 [http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)。

# sql - SQL二叉树遍历

> ID：10799526
> 
> 赞同：1
> 
> 时间：2012-05-29T12:49:50.590
> 
> 标签：sql

如何从 sql 表中获取所有子节点？（pict上的MemberJoiners表）表结构：

```
ParentID LeftChildID righChildID 
```

这是图片：![在此处输入图像描述](../Images/05814e4e7bef45d4fdb5a752b8af8868.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:57:07.050

正如@Sayem 所指出的，递归查询有效。但是，我建议进行一些重新设计以使用修改后的先序遍历技术。听起来很花哨，但[这篇文章](http://www.sitepoint.com/hierarchical-data-database-2/)解释得很好。

如果您阅读量很大，那么这是一种非常快速的技术。

# android - 在 android 和 iphone 上使用 salt 进行散列

> ID：10799534
> 
> 赞同：1
> 
> 时间：2012-05-29T12:50:07.837
> 
> 标签：android, iphone, encryption, message-digest, saltedhash

我正在android和iphone上开发一个需要加密一些数据的应用程序。

我想知道是否有任何方法可以加密在两个平台上产生相同哈希的数据。我有普通的盐，只是想从摘要中输出相同的加密数据，因为我的服务器对于两个平台都是相同的。

我对 iphone 有点陌生，所以我的问题很幼稚，请多多包涵.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:54:03.223

您可以使用像 SHA1 这样的标准哈希算法，只需将您的盐附加到原始字符串即可。

请注意加密和散列之间的区别：

*   加密以一种可以使用某种密钥（解密）重新创建原始数据的方式对数据进行加密。
*   散列不提供解密方法，因为几个不同的输入可能产生相同的散列

# asp.net-mvc-3 - 带有 lambda 的 EF4 搜索页面可选字段

> ID：10799537
> 
> 赞同：1
> 
> 时间：2012-05-29T12:50:10.503
> 
> 标签：asp.net-mvc-3, entity-framework, lambda

我已经查看了一些关于 SO 的问题并尝试了谷歌，但无法让它发挥作用。我有一个搜索页面，用户可以在其中输入和选择下拉列表，其中填写了 0 到 10 个字段。（可以返回“所有”结果）。在我有一个允许多项选择的字段之前，它运行良好

```
<select name="area" size="25" multiple="multiple">
    <option>foo</option>
    <option>bar</option>
    <option>baz</option>
    <!--blah blah blah-->
</select>
<input name="someField"/> 
```

我无法将其转换为 EF lambda 语句。想象一下，用户选择`foo`并`baz`输入`42`到`someField`框中。搜索应该返回`area`具有其中之一的结果，并且具有正确的值`someField`。

```
//...
var entities = db.entities;
//... this is inside of a switch/loop through the forms collection
string value = Request.Form[key];
//...
If (area <> "") {
    string[] areaSplit = value.Split(',');
    foreach (string s in subSplit)
    {
        string temp = s;
        entities.Where(x => x.area.Contains(temp)); //1
    }
}
//...
entities.Where(x => x.someField == value); 
```

所以 where `//1`is where 不应该是排他的。换句话说`entities.area`，可以具有来自表单字段的任何值之一`area`。在 SQL 查询中，我可能会写

```
... someField = 42 and (area = 'foo' or area = 'baz') 
```

只写一个 SQL 查询会更好（高效，最佳实践）吗？

**使用谓词构建器进行**编辑****

 **```
var outer = PredicateBuilder.True<entity>();
var inner = PredicateBuilder.False<entity>();

//... this is inside of a switch/loop through the forms collection
string value = Request.Form[key];
//...
string[] areaSplit = value.Split(',');

foreach (string s in subSplit)
{
    string temp = s;
    inner = inner.Or(x => x.area.Contains(temp)); //1
}
//..
outer = outer.And(x => x.someField == value);
//...end of loop
outer.And(inner.Expand());
var foo = db.entity.AsExpandable().Where(outer.Expand()); 
```

但是似乎它忽略了这一`inner`部分。SQL 探查器不显示`inner`查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:52:51.290

您可以使用`Contains`相反的方式：

```
string[] areaSplit = value.Split(',');
entities = entities.Where(x => areaSplit.Contains(x.area)); //1
entities = entities.Where(x => x.someField == value); 
```

这将`IN`在 sql 的一个子句中翻译：

```
WHERE (area IN (N'foo', N'baz')) AND (42 = someField) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:08:35.803

伊奥纳斯丹，

我建议您从以下位置查看谓词构建器：

[http://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

这是一种非常好的综合方法，可以完全按照您的描述构建动态过滤器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T13:34:16.853

伊奥纳斯丹，

在返回查询结果的方法中

```
public virtual ActionResult QueryWithMultipleParameters(int param1, int param2, int param3, ...)
{
    var query = dataContext.EntityToQuery;

    if(param1 > 0)
    {
        query = query.Where(e => e.param1 == param1);
    }
    if(param2 > 0)
    {
        query = query.Where(e => e.param2 == param2);
    }
    .... etc. 
    return query; 
} 
```

希望这可以帮助。**

# c# - 我的 Elmah 电子邮件过滤器无法正常工作

> ID：10799538
> 
> 赞同：2
> 
> 时间：2012-05-29T12:50:20.497
> 
> 标签：c#, .net, elmah

我对以下 web.config 设置和 Elmah 有疑问。问题是，当我不想时，我仍然会收到有关公共操作方法问题的电子邮件。我使用的过滤器似乎不起作用。

我不完全确定 AND 和 OR 在 Elmah 电子邮件过滤中应该如何工作，特别是因为这段代码是从我从其他开发人员那里获得的一些项目工作中截取的。

这些标签旨在防止通过包含任何单词索引、缓存或登录的电子邮件报告任何错误。

任何人都可以帮忙吗？

```
<configuration>
    <configSections>
        <!--Elmah sectionGroup-->
        <sectionGroup name="elmah">
            <section name="security" requirePermission="false" type="Elmah.SecuritySectionHandler, Elmah" />
            <section name="errorLog" requirePermission="false" type="Elmah.ErrorLogSectionHandler, Elmah" />
            <section name="errorMail" requirePermission="false" type="Elmah.ErrorMailSectionHandler, Elmah" />
            <section name="errorFilter" requirePermission="false" type="Elmah.ErrorFilterSectionHandler, Elmah" />
        </sectionGroup>
  </configSections>  

 <elmah>
<errorLog type="Elmah.XmlFileErrorLog, Elmah" logPath="~/App_Data" />
<errorMail from="" to="" subject="Error(Elmah)" async="true " />
    <security allowRemoteAccess="1"/>
<errorFilter>
  <test>
    <or>
        <is-type binding="BaseException" type="System.InvalidOperationException" />
</or>
<or>
    <regex binding="Exception.Message" pattern="(?ix: \b potentially \b.+?\b dangerous \b.+?\b value \b.+?\b detected \b.+?\b client \b )" />
</or>
<or>
    <regex binding="Exception.Message" pattern="(?ix: \b public action method     'Index' was not found on controller \b )" />
    <regex binding="Exception.Message" pattern="(?ix: \b public action method 'cache' was not found on controller \b )" />
    <regex binding="Exception.Message" pattern="(?ix: \b public action method 'Login' was not found on controller \b )" />
</or>
  </test>
</errorFilter>
  </elmah>  
  <location path="elmah.axd">
  </location>  
  <system.web>
  </system.web>
 <system.webServer>    
<modules runAllManagedModulesForAllRequests="true">
<add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
<add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
<add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
</modules>
<handlers>
  <add name="httpHandler" verb="POST,GET,HEAD" path="elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah" />
   </handlers>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:15:23.573

该`test`元素只能有一个子断言，因此`or`在它下面有多个元素意味着除了第一个之外的所有元素都被忽略。根据您的描述，您的元素似乎`test`应该改为这样：

```
<test>
  <or> 
    <is-type binding="BaseException" type="System.InvalidOperationException" /> 
    <regex binding="Exception.Message" pattern="(?ix: \b potentially \b.+?\b dangerous \b.+?\b value \b.+?\b detected \b.+?\b client \b )" /> 
    <and> 
      <regex binding="FilterSourceType.Name" pattern="mail" />
      <regex binding="Exception.Message" pattern="(?ix: \b public \s action \s method \s '(Index|cache|Login)' \s was \s not \s found \s on \s controller \b )" /> 
    </and>
  </or> 
</test> 
```

请注意，我还继续将三个`regex`元素合二为一，并修复了模式以正确分隔单词（`\b`在边缘和`\s`中间）。

# android - Android - 调用 BroadcastReceiver 时是否实例化了 Application 类？

> ID：10799539
> 
> 赞同：2
> 
> 时间：2012-05-29T12:50:24.750
> 
> 标签：android, broadcastreceiver, applicationcontext

`Application`调用a 时是否实例化了该类`BroadcastReceiver`？我在自定义 Application 类中有一些逻辑，在运行`onReceive`a的逻辑之前需要这些逻辑`BroadcastReceiver`。[文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)说方法中的`Context`参数是接收器正在运行的地方。我不确定它是否是定义接收器的应用程序（在清单中静态）。`onReceive``Context`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-17T01:24:18.940

是的。Application.onCreate 的文档说明：

> 在应用程序启动时调用，在创建任何活动、服务或接收器对象（不包括内容提供者）之前调用。如果在接收者之前调用 onCreate，则默认情况下首先实例化它。

[1] [http://developer.android.com/reference/android/app/Application.html#onCreate()](http://developer.android.com/reference/android/app/Application.html#onCreate())

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T12:53:50.340

要回答这个问题，您可以尝试进行实验。只需扩展应用程序并将其类记录在 onReceive() 中：

```
Log.d(TAG, "Context is " + context.getClass().getName()); 
```

# scala - 在 Scala 查询中选择 * 或等效项

> ID：10799540
> 
> 赞同：1
> 
> 时间：2012-05-29T12:50:28.967
> 
> 标签：scala, scalaquery

我在 Playframework 2 中有这个 ScalaQuery 模型

```
object User {
    implicit object UserFormat extends Format[User] {
    def reads(json: JsValue) : User = User(
        None,
        (json \ "firstName").as[String],
        (json \ "lastName").as[String],
        (json \ "email").as[String]
    )

    def writes(user: User) : JsValue = JsObject(Seq(
        "firstName" -> JsString(user.firstName),
        "lastName" -> JsString(user.lastName),
        "email" -> JsString(user.email))
    )
    }
}

object UsersTable extends Table[User]("users") {
    def id = column[Long]("USER_ID", O.PrimaryKey, O.AutoInc)
    def fName = column[String]("USER_FIRSTNAME", O.NotNull)
    def lName= column[String]("USER_LASTNAME", O.NotNull)
    def email = column[String]("USER_EMAIL", O.NotNull)

    def user_email_idx = index("user_email_idx", email, unique = true)

    def * =  id.? ~ fName ~ lName ~ email <> (User.apply _, User.unapply _)
    def forInsert = fName ~ lName ~ email <> ({ (f, l, e) => User(None, f, l, e) }, { u:User => Some((u.firstName, u.lastName, u.email)) })
} 
```

我想执行 Select * 并返回`UsersTable`. 是否可以使用 UsersTable 投影来做到这一点？我见过一些看起来像这样的例子

```
 UsersTable.where(_.fName startsWith "H").list 
```

选择符合条件的行。我如何在不传递任何内容的情况下做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T16:21:03.233

您需要做的就是：

```
val query = for(r <- MyTable) yield r
val results = query.list 
```

第一行创建表示类似 的实际查询对象，`select * from MyTable`第二行实际调用该对象并将结果加载到内存中。

您可能想了解的重要隐含是`tableToQuery`，它可以让`MyTable`人们对其进行理解；和`queryToQueryInvoker`，它对查询进行拉皮条处理，使其具有类似 . 的方法`list`。

或者你应该能够做类似的事情

```
val query: Query[User] = MyTable 
```

应该使用`tableToQuery`隐式来满足类型要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:12:54.960

I think this is what you are looking for: [https://github.com/szeiger/scalaquery-examples/blob/master/src/main/scala/org/scalaquery/examples/FirstExample.scala#L73](https://github.com/szeiger/scalaquery-examples/blob/master/src/main/scala/org/scalaquery/examples/FirstExample.scala#L73)

See also [http://scalaquery.org/doc/api/scalaquery-0.9.4/#org.scalaquery.ql.Query](http://scalaquery.org/doc/api/scalaquery-0.9.4/#org.scalaquery.ql.Query) for all the methods of the `Query` class.

You can also use for-comprehensions to query your tables:

```
for {
  record <- MyTable if record.column0 === "foo"
} yield record.column1 ~ record.column2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T16:08:57.253

我现在已经用`val userQuery = UsersTable.where(_.email =!= "")`. 但我确信这不是最好的答案。所以保持这个开放。

# c# - 有条件地在 Gridview 中显示“编辑”按钮

> ID：10799541
> 
> 赞同：2
> 
> 时间：2012-05-29T12:50:32.770
> 
> 标签：c#, asp.net, oracle, gridview

我有一个关于在 ASP.NET 中为 GridView 创建条件语句的最佳实践的问题。我有一个徽章编号，它被传递到一个包含 GridView 的新页面中，并且根据该徽章编号，我想让它检查用户是否具有权限（来自另一个数据库表）并显示“编辑”按钮，如果他们有许可。

我想我不确定如何做到这一点。我已经尝试过搜索，我能想到的最好的方法就是在数据绑定事件期间进行搜索。

关于这个主题的任何见解都会很棒！谢谢！

这是我现在拥有的代码（gridviews 的自动生成的编辑按钮）：

```
 <Columns>
 <asp:CommandField ShowEditButton="True" />
etc
etc
etc
 </Columns> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:57:04.807

在 gridview 的行数据绑定函数中，您可以调用另一个数据库并确定是否显示按钮。您可以在gridview中找到该控件，然后将其设置为不可见。

# linux - 如何从进程中找出文件描述符 N 指向的文件/设备？

> ID：10799545
> 
> 赞同：1
> 
> 时间：2012-05-29T12:50:49.043
> 
> 标签：linux

所以我想找出文件描述符“N”（比如 4）对 process id 意味着什么。我怎样才能使用 Linux 命令来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:10:41.663

使用[lsof](http://www.manpagez.com/man/8/lsof/)：

```
[me@home]$ lsof -p 1990 -a -d 4
COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
unity-mus 1990  me    4u   CHR    1,3      0t0 5821 /dev/null 
```

解释：

```
lsof -p 1990  -a   -d 4
     -------  ---  ----
        |      |     |
   PID=1990   AND   fd=4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:04:48.130

您应该使用`lsof`（来自 man：lsof - 列出打开的文件）。
带有`-d`文件描述符的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:54:09.200

如果进程 id 是say `x`，请查看`/proc/x/fd`。此文件夹包含指向进程打开的所有文件的链接。

# javascript - 如何使用javascript在switch case中调用case？

> ID：10799550
> 
> 赞同：0
> 
> 时间：2012-05-29T12:51:07.343
> 
> 标签：javascript, switch-statement

我有如下开关盒

```
 switch(something){
      case 1:
             break;
      case 2:
             break;
      case 3:
             break;
      default:
             break;
    } 
```

现在我想在案例 3 中调用案例 1 是否可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T12:52:59.543

只需将操作包装在函数中，以便它们可重用

```
switch (something) {
case 1:
    operation1();
    break;
case 2:
    operation2();
    break;
case 3:
    operation3()
    operation1(); //call operation 1
    break;
default:
    defaultOperation();
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T12:53:10.043

你可以这样做：

```
switch(something){
  case 2:
         break;
  case 3:
         //do something and fall through
  case 1:
         //do something else
         break;
  default:
         break;
} 
```

通常将执行匹配大小写以下的所有代码。因此，如果您省略该`break;`语句，您将自动进入下一个案例并执行其中的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T12:54:05.270

```
 switch(something){
      case 3:
      case 1:
             break;
      case 2:
             break;

      default:
             break;
    } 
```

这应该可以解决问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T12:54:47.443

结合两种情况：

```
switch(something){
   case 1:
   case 3:
          break;
   case 2:
          break;
   default:
          break;
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T12:55:09.600

```
var i = 3;

switch (i)
{
    case(3):
    alert("This is the case for three");

    case(1):
    alert("The case has dropped through");
    break;
    case(2):
    alert("This hasn't though");
    break;
} 
```

虽然不是一个好主意，但会导致代码不可读

# zend-framework - Zend Session save_path 不工作

> ID：10799551
> 
> 赞同：2
> 
> 时间：2012-05-29T12:51:12.520
> 
> 标签：zend-framework, session, authentication, directory

我希望你们能帮助我，

在我的 Zend 应用程序中，我将 Zend_Auth 会话文件设置为保存在特定文件夹中，因为我使用的是共享主机。显然我已经做好了一切，但问题是会话没有存储在我想要的文件夹中。

在 application.ini 我有：

```
resources.session.save_path = APPLICATION_PATH "/../data/session/"
resources.session.use_only_cookies = true 
```

在引导程序中，我有：

```
protected function _initSessions() 
{
    $this->bootstrap('session');
} 
```

认证方式

```
$adapter = $this->getAuthAdapter();
$adapter->setIdentity($userName)->setCredential($hPassword);

$auth = Zend_Auth::getInstance();
$result  = $auth->authenticate($adapter);
$user = $this->_userModel->getUserAuthData($userName);
$auth->getStorage()->write($user); 
```

应用程序验证良好，但会话文件仍保存在 de /tmp 文件夹中，而不是 APPLICATION_PATH "/../data/session/" 中。

文件夹 /data/session 有 chmod 777。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:47:20.933

在 Tim Fountain 询问（在问题的评论中）是否在引导程序中发生了任何其他与会话相关的功能之后，我决定检查引导程序之前发生了什么，并在 public/index.php 文件中找到了这一行。

```
Zend_Session::start(); 
```

就在 $application->bootstrap()->run() 之前。我删除了它并且它起作用了。

问题： Zend_Session::start() 创建会话文件时没有应用在 application.ini 中设置的任何配置（因为它在引导过程中运行）。

# php - 在当前命名空间中按字符串实例化类

> ID：10799552
> 
> 赞同：8
> 
> 时间：2012-05-29T12:51:15.610
> 
> 标签：php, namespaces

我正在尝试实例化动态创建的类名的对象。我正在使用命名空间，我要实例化的类在同一个命名空间中。

例如，这很好用：

```
namespace MyNamespace;

new MyClass; // MyNamespace\MyClass instantiated 
```

而这不是：

```
namespace MyNamespace;

$class = 'MyClass';
new $class; // Class 'MyClass' not found 
```

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T12:54:31.177

当您使用字符串时，`new`您需要提供完全限定的类名。

你可以这样做`__NAMESPACE__`：

```
$fullclass = __NAMESPACE__ . '\\' . $class;
new $fullclass; 
```

[`new`请参阅运算符](http://php.net/manual/en/language.oop5.basic.php#language.oop5.basic.new)和[`__NAMESPACE__`](http://php.net/manual/en/language.constants.predefined.php)魔法常数的文档。

# c# - 使用谷歌浏览器捕获整个页面截图的方法是什么？

> ID：10799554
> 
> 赞同：0
> 
> 时间：2012-05-29T12:51:22.257
> 
> 标签：c#, google-chrome, selenium-rc

我正在使用 selenium RC 来自动化我的项目。我已经使用 firefox 执行了脚本。我使用 selenium.CaptureEntirePageScreenshot() 使用 Firefox 进行屏幕截图。但是这种方法不适用于谷歌浏览器。我应该使用哪种方法来捕获 Google chrome 的整个页面屏幕截图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:18:46.967

试试这个。

```
selenium.captureScreenshot("C:/filename.png") 
```

# sql - “列名无效”，子查询别名的排序依据

> ID：10799558
> 
> 赞同：4
> 
> 时间：2012-05-29T12:51:40.560
> 
> 标签：sql, stored-procedures, sql-order-by, alias

我创建了一个存储过程，我想在其中添加替代 order by 子句。问题是查询在“无效的列名'aantal regels'”上失败

这是我现在的查询。

```
SELECT 
            l.lead_id,
            l.afdeling_id,
            l.advertentie_id,
            l.naam,
            l.type,
            l.status,
            l.herkomst,
            l.aanmaakdatum,
            l.klant_id,
            l.overigegegevens,
            af.afdelingsnaam,
            (SELECT 
                COUNT(lead_regel_id) 
            FROM 
                Lead_regel As lr 
            Where 
                Lr.lead_id = l.lead_id And 
                lr.status <> 100
            ) 
            AS aantal_regels,

            (SELECT 
                COUNT(lead_id) 
            FROM 
                Lead_unread As lu 
            Where 
                lu.lead_id = l.lead_id And 
                lu.user_id = @uid
            ) 
            As lead_ongelezen,

            (SELECT 
                COUNT(lru.lead_regel_id) 
            FROM 
                Lead_regel As lr2 
            INNER JOIN 
                Lead_regel_unread As lru ON 
                lr2.lead_regel_id = lru.lead_regel_id 
            Where 
                lr2.lead_id = l.lead_id And 
                lru.user_id = @uid And 
                lr2.status <> 100
            ) 
            As lead_regel_ongelezen

        FROM 
            Lead AS l

        INNER JOIN 
            Afdeling AS af ON 
            l.afdeling_id = af.afdeling_id

        WHERE 
            l.afdeling_id = @aid AND 
            l.status <> 100

        ORDER BY
            CASE WHEN @orderby = 'default' THEN l.aanmaakdatum END DESC,
            CASE WHEN @orderby = 'type' THEN l.type END ASC, 
            CASE WHEN @orderby = 'naam' THEN l.naam END ASC,
            CASE WHEN @orderby = 'reacties' THEN aantal_regels END DESC 
```

希望有人可以帮助我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:00:50.197

您不能以这种方式按别名排序。

第一种选择是重复代码。注意：仅仅因为您重复代码，SQL 引擎不会天真到再次执行它，它会重复使用结果。

```
ORDER BY
  CASE WHEN @orderby = 'default' THEN l.aanmaakdatum END DESC,
  CASE WHEN @orderby = 'type' THEN l.type END ASC, 
  CASE WHEN @orderby = 'naam' THEN l.naam END ASC,
  CASE WHEN @orderby = 'reacties' THEN (SELECT 
                                          COUNT(lead_regel_id) 
                                        FROM 
                                          Lead_regel As lr 
                                        WHERE
                                          Lr.lead_id = l.lead_id And 
                                          Lr.status <> 100
                                       ) END DESC 
```

或者这一切都使用子查询......

```
 SELECT
    *
  FROM
  (
    yourQuery
  )
    AS sub_query
  ORDER BY
      CASE WHEN @orderby = 'default'  THEN aanmaakdatum  END DESC,
      CASE WHEN @orderby = 'type'     THEN type          END ASC, 
      CASE WHEN @orderby = 'naam'     THEN naam          END ASC,
      CASE WHEN @orderby = 'reacties' THEN aantal_regels END DESC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T13:02:57.723

简短的版本是，虽然 ORDER BY 本身可以非常愉快地使用别名，但 ORDER BY 中的 CASE 语句不能。CASE 语句将作为 SELECT 的一部分进行评估，因此在考虑任何别名之前。

# objective-c - 在objective-c中使用渐变设置NavigationBar和TabBar背景颜色

> ID：10799561
> 
> 赞同：1
> 
> 时间：2012-05-29T12:51:55.160
> 
> 标签：objective-c, ios, uinavigationbar, uitabbar, background-color

我想为 NavigationBar 和 TabBar 设置背景颜色。它必须是包含两种十六进制颜色的渐变。我怎样才能在objective-c中做到这一点？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-07T09:40:15.537

对于 TabBar，我的应用程序遇到了同样的问题，我想出了以下方法：在*applicationDidFinishLaunching*方法中，我创建了一个绘制渐变的函数，并使用我的 UITabBarController 的实例来根据设备的宽度设置正确的渐变框架.

```
 - (UIImage *)drawGradientInView:(UITabBarController *) tabBarVC {
   CAGradientLayer *gradient = [CAGradientLayer layer];

  gradient.frame = CGRectMake(CGRectGetMinX(tabBarVC.tabBar.frame), CGRectGetMinY(tabBarVC.tabBar.frame), CGRectGetWidth(tabBarVC.view.frame), CGRectGetHeight(tabBarVC.tabBar.frame));

  gradient.colors = @[(__bridge id)[UIColor colorWithRed:220.0/255.0 green:220.0/255.0 blue:220.0/255.0 alpha:1.0].CGColor, (__bridge id)[UIColor whiteColor].CGColor];
  gradient.startPoint = CGPointMake(0.0, 0.5);
  gradient.endPoint = CGPointMake(0.5, 0.5);

  UIGraphicsBeginImageContext(gradient.bounds.size);
  [gradient renderInContext:UIGraphicsGetCurrentContext()];
  UIImage *gradientImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  return gradientImage;
} 
```

获取 UITabBarController 的实例

```
UITabBarController *tabVC = (UITabBarController *)[UIApplication sharedApplication].windows.firstObject.rootViewController; 
```

设置你的渐变

```
[UITabBar appearance].backgroundImage = [self drawGradientInView:tabVC]; 
```

我不确定这是否是正确的方法，但它确实对我有用。

对于 NavigationBar，我将其子类化并在*layoutSubviews中对其进行了自定义*

```
- (void)layoutSubviews {
    [super layoutSubviews];

    CAGradientLayer *gradient = [CAGradientLayer layer];

    gradient.frame = CGRectMake(0, 0, CGRectGetWidth(self.bounds), CGRectGetHeight(self.bounds) + CGRectGetHeight([UIApplication sharedApplication].statusBarFrame));
    gradient.colors = @[(__bridge id)[UIColor colorWithRed:220.0/255.0 green:220.0/255.0 blue:220.0/255.0 alpha:1.0].CGColor, (__bridge id)[UIColor whiteColor].CGColor];
    gradient.startPoint = CGPointMake(0.0, 0.5);
    gradient.endPoint = CGPointMake(0.5, 0.5);

    UIGraphicsBeginImageContext(gradient.bounds.size);
    [gradient renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *gradientImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self setBackgroundImage:gradientImage forBarMetrics:UIBarMetricsDefault];

} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-29T12:57:35.243

这将帮助您更改导航栏和标签栏的颜色

```
UINavigationController *navigationController;
...
navigationController.navigationBar.tintColor = [UIColor blackColor];

UITabBarController *tabBarCon;
...
tabBarCon.tabBar.tintColor = [UIColor blueColor]; 
```

# grails - grails域类中的时间字段

> ID：10799570
> 
> 赞同：7
> 
> 时间：2012-05-29T12:52:21.660
> 
> 标签：grails

我在一个 grails 项目中工作。我在我的应用程序中使用剑道网格。我需要创建一个名为“StatTimings”的域类，其中包含两个时间字段 startTime 和 endTime。我不能对这两个变量使用“日期”数据类型，因为我需要的时间格式是 hh:mm。我不想为此安装任何插件。这是我现在的域：

```
class StatTimings{

???? startTime
???? endTime
Date date
AutoPosting autoPosting
Status status

static constraints = {
}

enum Status{ACTIVE,INACTIVE}
enum AutoPosting{SERVICE_CHARGE,STAT_CHARGES,BOTH} 
```

}

有什么办法可以让我的领域只接受时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T11:00:51.377

为了便于持久化和绑定（来自 HTTP 参数）该类的实例，我将每次表示为两个整数字段并添加一些辅助方法，例如`getStartTime()`and `getEndTime()`。如果您需要执行诸如计算开始时间和结束时间之间的差异之类的操作，您可能希望将这些帮助程序更改为返回 a`Date`而不是 a （其中日期部分设置为今天）。`String`

```
class StatTimings {

  static transients = ['startTime', 'endTime']

  Integer startHours
  Integer startMins

  Integer endHours
  Integer endMins

  private String formatTime(Integer hours, Integer mins) {
    String formattedHours = hours < 10 ? "0$hours" : hours.toString()
    String formattedMins = mins < 10 ? "0$mins" : mins.toString()
    "$formattedHours:$formattedMins"
  }

  String getStartTime() {
    formatTime(startHours, startMins)          
  }

  String getEndTime() {
    formatTime(endHours, endMins)
  }

  static constraints = {
    startHours range: 0..23
    endHours range: 0..23

    startMins range: 0..59
    endMins range: 0..59

    // TODO: add a custom validator that checks the end time is after start time
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T10:23:38.670

您可以使用 Date 并在`getStartTime()`方法中将其转换为您需要的格式`SimpleDateFormat`。这样你就忽略了它的日期部分。

```
class StatTimings {
    ...

    def getStartTime() {
        return new SimpleDateFormat("hh:mm").format(this.startTime);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:00:51.013

java.sql.Time 类是 java.util.Date 的子类，它几乎做同样的事情，它添加了一个自定义 toString 实现，如下所示：

```
public String toString () {

    int hour = super.getHours();
    int minute = super.getMinutes();
    int second = super.getSeconds();
    String hourString;
    String minuteString;
    String secondString;

    if (hour < 10) {
        hourString = "0" + hour;
    } else {        
        hourString = Integer.toString(hour);
    }
    if (minute < 10) {
        minuteString = "0" + minute;
    } else {        
        minuteString = Integer.toString(minute);
    }
    if (second < 10) {
        secondString = "0" + second;
    } else {        
        secondString = Integer.toString(second);
    }
    return (hourString + ":" + minuteString + ":" + secondString);
} 
```

所以我想你可以在引导程序上动态地向 Date 类添加一个方法，并在需要时调用它。

您可以在[此处](http://www.docjar.org/html/api/java/sql/Time.java.html)查看完整的源代码。

# python - Matplotlib imshow - 显示不同的颜色

> ID：10799573
> 
> 赞同：1
> 
> 时间：2012-05-29T12:52:33.553
> 
> 标签：python, numpy, matplotlib

我有 n 个浮点矩阵（np.array），我想使用 imshow 将它们绘制在一起，但每个矩阵的值都有不同的颜色范围。例如 n = 白色->蓝色，n+1 = 白色 -> 红色等。有没有办法做到这一点？

矩阵的大小相同，相互着色并不是什么大问题，因为大多数矩阵的值为 0（希望是白色的）。

我在想类似的东西：

第一个矩阵

```
000
010
000 
```

第二矩阵

```
000
000
001 
```

所以我想也许我可以将第二个矩阵转换为：

```
222
222
223 
```

然后将 0->1 白色变为蓝色，将 2->3 白色变为红色。

不幸的是，我不知道如何使用 matplotlib 颜色图来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:53:04.957

`imshow`不会绘制设置为 的值`None`。如果数据足够稀疏，您可以将它们叠放在一起。

```
import numpy as np
import pylab as plt

# Your example data
A1 = np.zeros((3,3))
A2 = np.zeros((3,3))
A1[1,1] = 1
A2[2,2] = 1

# Apply a mask to filter out unused values
A1[A1==0] = None
A2[A2==0] = None

# Use different colormaps for each layer
pwargs = {'interpolation':'nearest'}
plt.imshow(A1,cmap=plt.cm.jet,**pwargs)
plt.imshow(A2,cmap=plt.cm.hsv,**pwargs)
plt.show() 
```

![在此处输入图像描述](../Images/6abda1d91d6fb6440ce4f6c5e9da2849.png)

# visual-studio-2010 - VS2010 使用 TargetFramework 2.0 和 resx 文件运行项目导致 FileNotFound 'System.Windows.Forms v4.0'

> ID：10799575
> 
> 赞同：0
> 
> 时间：2012-05-29T12:52:37.187
> 
> 标签：visual-studio-2010, 64-bit, resx, file-not-found, target-framework

我从 MS Visual Studio 2010 运行应用程序时遇到问题。实际上这是一个很长的故事，我之前遇到过不同的相关问题。但该项目至少运行了半年，没有任何变化。现在我试图再次运行它，但没有效果。首先这里有一些关于**相关问题的链接**的链接，这些问题可能看起来是相同的（但看起来不一样 - 只是相关的）：

[将项目的 .NET 目标框架从 4.0 更改为 3.5 后找不到文件（或程序集）](https://stackoverflow.com/questions/3709295/file-or-assembly-cant-be-found-after-changing-projects-net-target-framework)

[将应用程序从 .net 4.0 降级到 3.5](https://stackoverflow.com/questions/3181813/downgrade-an-application-from-net-4-0-to-3-5)

[针对 3.5 框架的 VS2010 上的 RESX 文件问题](https://stackoverflow.com/questions/3398689/issues-with-resx-files-on-vs2010-targeting-3-5-framework)

我的项目有 TargetFramework=2.0，它包含一些带有应用程序图像和图标的 resx 资源文件。我以前在资源文件编译方面遇到过问题，但修复了它们，就像上面链接中的帖子一样。直到昨天一切正常（我很久没有打开那个项目，所以不能说环境到底发生了什么变化）。

现在**问题本身**：项目构建成功，但是当应用程序运行时，我在表单设计器代码'resources. *GetObject* ("myImageName")':

```
Could not load file or assembly 'System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The system cannot find the file specified.
at System.RuntimeTypeHandle._GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, Boolean loadTypeFromPartialName)
at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark)
at System.RuntimeType.PrivateGetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark)
at System.Type.GetType(String typeName, Boolean throwOnError)
at System.Resources.ResourceReader.FindType(Int32 typeIndex)
at System.Resources.ResourceReader.DeserializeObject(Int32 typeIndex)
at System.Resources.ResourceReader.LoadObjectV2(Int32 pos, ResourceTypeCode& typeCode)
at System.Resources.ResourceReader.LoadObject(Int32 pos, ResourceTypeCode& typeCode)
at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase, Boolean isString)
at System.Resources.RuntimeResourceSet.GetObject(String key, Boolean ignoreCase)
at System.Resources.ResourceManager.GetObject(String name, CultureInfo culture, Boolean wrapUnmanagedMemStream)
at System.Resources.ResourceManager.GetObject(String name)
[MYAPP stack trace part. Hope you don't need it]
at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

[我在 Microsoft 网站上](https://connect.microsoft.com/VisualStudio/feedback/details/532584/error-when-compiling-resx-file-seems-related-to-beta2-bug-5252020#tabs)询问了有关此问题的问题，发现另外一个人也遇到了完全相同的问题。但是他的问题被忽略了，我也没有回答。

**环境：** Windows 7 x64、.NET 4.0 SP1、VS 2010 Ultimate SP1。项目构建配置：Debug/AnyCPU（我尝试了 AnyCPU/x86 的 Debug/Release - 都一样。x64 和 IA64 - 对于这个项目来说是不可能的）

**调查详情：**

*   resx 文件不包含对 4.0 程序集的引用。特别是它引用 System.Windows.Forms 2.0 和 System.Drawing 2.0
*   项目没有（并且不能包含对任何 4.0 程序集的引用，因为它具有 TargetFramwork 2.0）
*   在整个项目文件夹中搜索“4.0”条目发现了*奇怪的事实*：我的 exe 文件引用了 mscorlib 4.0。实际上我无法弄清楚它是如何发生的以及如何解决它。虽然 AppDomain.CurrentDomain.GetAssemblies() 返回 mscorlib 2.0，而不是 4.0（以及 2.0 版的所有其他 .NET 程序集）。
*   将 resgen 切换到 32 位模式无济于事。还原它也没有用。
*   使用记事本更改 proj 文件以使用“正确”版本的 resgen 也无济于事
*   一整天的调查和许多其他尝试都没有成功。我什至没有发现很多人有同样的问题。
*   TargetFramework=3.5 也是如此，但是当设置 TargetFramework=4.0 时，一切都开始正常工作。不幸的是，目前无法迁移到 .NET 4.0

# arrays - 如何批量返回数组的元素？

> ID：10799576
> 
> 赞同：3
> 
> 时间：2012-05-29T12:52:40.877
> 
> 标签：arrays, list, variables, batch-file, element

我的程序中的数组列表中有两个元素。如何将变量分配为等于其中一个元素？

这是代码：

```
@echo off
setlocal enabledelayedexpansion
set /p string=
for /l %%a in (0,1,1000) do if not "!String:~%%a,1!"=="" set /a length=%%a+1
set i=0
:input
set str=%string:~0,1%
if "%str%"=="M" set array[i]=1000
if "%str%"=="D" set array[i]=500
if "%str%"=="C" set array[i]=100
if "%str%"=="L" set array[i]=50
if "%str%"=="X" set array[i]=10
if "%str%"=="I" set array[i]=1
set string=%string:~1%
set /a i=i+1
if %i%==%length% goto logic
goto input
:logic 
```

我真的虽然有这样做的标准方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:39:32.250

主要问题是您的代码没有创建任何[batch-array](https://stackoverflow.com/a/10569981/463115)。
您的代码仅创建一个名为 的变量`array[i]`，但我想您想创建一个数组：

```
array[0]=1000
array[1]=500 
```

然后你需要类似的东西

```
setlocal EnableDelayedExpansion
set i=0
:inputLoop
set "str=%string:~0,1%"
if "%str%"=="M" set array[%i%]=1000
if "%str%"=="D" set array[%i%]=500
if "%str%"=="C" set array[%i%]=100
if "%str%"=="L" set array[%i%]=50
if "%str%"=="X" set array[%i%]=10
if "%str%"=="I" set array[%i%]=1
set "string=%string:~1%"
set /a i+=1
if NOT %i%==%length% goto :inputLoop

:logic
rem ** logic begins
for /L %%n in (1 1 %i%) do (
   echo !array[%%n]!
   set /a value=array[%%n]
) 
```

在*逻辑*部分，您可以看到如何访问数组元素。

顺便提一句。您的 strlen 函数有点慢，使用二进制搜索可能会更快。
[如何用批处理计算字符串中的字符？](https://stackoverflow.com/a/10674904/463115)

# xamarin.ios - rubymotion 是否提供比 monotouch 更好的性能和垃圾收集？

> ID：10799577
> 
> 赞同：1
> 
> 时间：2012-05-29T12:52:41.177
> 
> 标签：xamarin.ios, rubymotion

rubymotion 是否提供比 monotouch 更好的性能和垃圾收集？

我对两者都感兴趣，除了 IDE 和调试器的巨大价格差异之外，我能否期望 Rubymotion 提供更好的内存管理和速度？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T20:26:26.247

我认为你应该只使用最适合你的东西。

如果您了解 Ruby：使用 RubyMotion，Objective-C：使用 XCode，C#：使用 MonoTouch。

我认为衡量一个人的优劣是不值得的。我是 C# Windows 开发人员，我使用 MonoTouch。我喜欢在一行代码中解析 XML，使用 Linq、Lambda 表达式等，所以我肯定会想要使用 C#。

如果您习惯 Ruby 来编写其他项目，请使用 RubyMotion。虽然，RubyMotion 是相当新的，所以它可能不如使用 MonoTouch 或普通 XCode 成熟。

在我看来，相比于提高生产力和易于维护（或者如果您不了解 Objective-C，学习曲线更短），使用 Ruby 或 C# 而不是 Obj-C 所产生的任何性能损失都可以忽略不计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T18:47:39.203

Both should have similar performance levels although if something needs to finely optimized you are better off jumping to C or C++ in those cases. RubyMotion uses automatic reference counting instead of garbage collection. Runtime integration is similar, but different between the two. MonoTouch uses wrappers that convert the calling convention to integrate with the Obj-C runtime. RubyMotion can call Obj-C directly. Although technically RubyMotion has its own runtime based loosely on MRI Ruby, it integrates with the Obj-C runtime without overhead and appears seamless. It is similar to how Apple's toll-free bridging works. RubyMotion may be better if you don't like writing wrappers or want to use metaprogramming. RubyMotion does not have an interpreter outside of the simulator. MonoTouch may be more ideal if you are solving a problem better suited to generics or a static type system. RubyMotion has the RubyMine IDE and MonoTouch has an IDE included. Both support debugging. Price is about the same if you count the price of RubyMine.

# mysql - 复杂上下文中的日期和日期时间问题

> ID：10799578
> 
> 赞同：0
> 
> 时间：2012-05-29T12:52:54.333
> 
> 标签：mysql

在我将大型 csv 导入表格后，我遇到了一个主要问题：csv 中日期的格式是 DD MM YYYY，当我尝试将其导入日期/日期时间时，它不起作用。好吧，我用 CHAR 类型而不是 DATE/DATETIME 完成了它，它到目前为止有效。（我的例子： VisitTime CHAR(10) ）

> **但这里是问题所在**，我无法连接 CHAR 内的数据以从 2 列创建日期时间列（我的示例是： VisitTime CHAR(10) 应该是 DATE 但由于格式错误而无法工作DD MM YYYY 和 HourTime 是 TIME。 **底线：**我需要另一个表 VisitTime 和 Hour DATETIME 中的一列，它是由 VisitTIME CHAR(10) 和 HourTime TIME 的串联产生的。一个解决方案可能是使我谈到的所有列 VARCHAR我认为没问题，但我想坚持使用日期和日期时间:) 等待解决方案，在此先感谢。

如果我错了，请纠正我，但如果我尝试导入一个变量然后转换它就可以了吗？顺便说一下，需要从 csv 转换的日期示例是：22/04/2005）代码：

> 设置@var1 = NULL；将文件 'xxxx/xxx/xxx/xxx/xxx' 中的数据加载到表 vizite_intermtest 字符集 utf8 字段以 ',' 终止的行以 '\n' 终止忽略 1 行 (@var1,OraIntrare,NumePacient,PrenumePacient,NumeMedic,PrenumeMedic,内阁) SET VisitTime = STR_TO_DATE(@var1, '%d/%m/%y');

如果我尝试这个，它会说： truncated inccorect value 22/04/2005 （我想在其中导入的 VisitTime 列是 CHAR 类型）

> LE：它可以导入一个变量并转换它，但尽管我把///放在它们之间，它仍然给了我时间格式- - - ...有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:04:52.720

您应该坚持使用 DATE / DATETIME 字段，但告诉 MySQL 如何解释传入的数据。我不确定您是如何导入数据的，但是将字符串解释为日期的函数是`STR_TO_DATE`：

```
STR_TO_DATE( '01 02 2003', '%d %m %Y' ) 
```

有关详细信息，请参阅以下内容： http: [//dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)

# list - Ocaml 列表到树

> ID：10799582
> 
> 赞同：1
> 
> 时间：2012-05-29T12:53:00.960
> 
> 标签：list, tree, ocaml, tree-traversal

我想写一个函数`load: 'a option list -> 'a tree`，从给定的列表中恢复二叉树，其中包含后缀顺序的元素。如果列表不代表任何树，您的函数应该引发异常 Load（您必须提前声明它）。

树定义为：

```
type ‘a btree = L of ‘a | N of ‘a btree * ‘a btree 
```

到目前为止，我所做的是：

```
exception Load ;;

let rec load l =
    match l with
        | [] -> raise Load
        | Some x::_ -> L x
        | None::t -> N(?,load t)
;; 
```

这是输入列表的示例：

```
[Some 2; Some 0; None; Some 5; Some 9; Some 20; None; None; None] 
```

如何做到这一点有点棘手。由于列表是按后缀顺序排列的，我想知道使用`List.foldright`函数是否会更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T15:21:35.530

我认为您应该更加努力地完成作业（肯定有一些有趣的东西要学习），但是您显然不在乎：

```
let load input =
  let rec load stack = function
    | [] -> stack
    | Some elem :: rest -> load (L elem :: stack) rest
    | None :: rest ->
      match stack with
        | right :: left :: stack -> load (N(left, right) :: stack) rest
        | [] | [_] -> failwith "incorrect node arity"
  in
  match load [] input with
    | res :: [] -> res
    | [] -> failwith "no input"
    | _ :: _ :: _ -> failwith "remaining nodes" 
```

# php - REST、OAuth 和 Wordpress

> ID：10799583
> 
> 赞同：1
> 
> 时间：2012-05-29T12:53:09.867
> 
> 标签：php, wordpress, rest, oauth

我正在寻找 OAuth 2、REST 和 Wordpress 之间的某种幸福结合。

到目前为止，我发现的包括：

*   **WP-RESTful**插件。我可能会从中得到一些想法，但它太基础了。基本上只允许使用 REST URL 跨站点执行 Wordpress 功能。也没有 OAuth。
*   **Restler** GIT 源代码 (PHP)。在实现上看起来非常优雅，并希望以一种实质性的方式使用它，但没有 OAuth 也不知道 Wordpress。
*   **GIT 上OAuth 2 的轻型 PHP 包装器**(https://github.com/adoy/PHP-OAuth2.git)。看起来是一个很好的起点；不知道如何与下面的比较...
*   **在 GIT 上运行**OAuth 2 (https://github.com/fuel-packages/fuel-oauth2.git)。**看起来也很好，最近有我一直积极看待的活动。:^)**

 **无论如何，我真正梦想的是一个结合一切的集成解决方案。在没有这个美丽的梦想的情况下，我想知道是否有人对任何单独的组件有建议（需要基于 PHP 的代码）。**

# html - 为什么是一个有时白色有时灰色？为什么 <select>下拉元素（箭头）有时是白色的，有时是灰色的？我有这个示例代码：</select> <option>1</option> 当我在 IE 9 中将代码作为 .html 页面进行测试时，结果如下所示： http://img0.www.suckmypic.n

> ID：10799595
> 
> 赞同：2
> 
> 时间：2012-05-29T12:53:54.450
> 
> 标签：html, css, select, drop-down-menu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:05:43.463

就像你的评论说的那样，你有 2 种渲染模式。

看@这个问题。

[<select> 元素上的“向下箭头”的 CSS？](https://stackoverflow.com/questions/458657/css-for-the-down-arrow-on-a-select-element)

在这里，您可以学习如何借助 css 代码获得相同的下拉箭头。

希望我能帮助你。

问候

# java - Servlet - Applet 交互需要读取响应

> ID：10799604
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:54:29.540
> 
> 标签：java, servlets, applet

我正在处理以下问题。

我有一个servelt（覆盖了doPost和doGet）和一个带有以下代码的小程序：

```
 String urlStr="blabla";
        URLConnection conn = StartConnection("http","localhost",8084,urlStr);            
        InputObject obj = GetInputObject();
        ObjectOutputStream oos = new ObjectOutputStream(conn.getOutputStream());
        oos.writeObject(obj);
        oos.flush(); 
```

使用这段代码，servlet 不执行任何操作（doPost 或 doGet）。但是如果我添加

```
 BufferedReader in=new BufferedReader(new InputStreamReader(conn.getInputStream()));
        String result = in.readLine();
        log(result); 
```

我进入 doPost 正文。谷歌搜索什么都没有。为什么我必须回读回复，即使我不需要它？

添加：

```
private URLConnection StartConnection(String protocol,String host,int port, String urlStr){
        URLConnection conn = null;
        try
        {
            URL currentPage=getCodeBase();
            URL dataURL=new URL(protocol,host,port,urlStr);
            conn = dataURL.openConnection();            
            conn.setDoOutput(true);
            conn.setDoInput(true);
        }
        catch(Exception ee){
                log(ee.getMessage().toString());
        }
        return conn;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:57:29.443

我们看不到来源，`StartConnection()`显然它只是返回一个 unconnected `URLConnection`。仅仅创建这个对象根本不会与网络对话；这只发生在`connect()`被调用时。从输入流中读取隐式调用`connect()`，这就是为什么这对你有用。不过，你可以打电话`connect()`；您实际上不必读取任何您不想要的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:59:39.363

如果您想将您的 applet 类的序列化实例发送到您的 servlet，那么您必须像浏览器一样进行 HTTP 调用。您应该使用 POST 方法并将序列化字节作为 POST 参数发送。此类东西的最佳库是[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)。这是一个[教程](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/index.html)。

# objective-c - 如何从 UIImagePickerControllerReferenceURL 获取数据？

> ID：10799605
> 
> 赞同：10
> 
> 时间：2012-05-29T12:54:30.377
> 
> 标签：objective-c, uiimagepickercontroller

我在我的应用程序中使用[ELCImagePickerController](https://github.com/B-Sides/ELCImagePickerController)，我不想将选定的 fullScreenImage 保存到我的数组中，因为如果我选择了 40 个 iPad 图像，那就不好了。

我想从方法`UIImagePickerControllerReferenceURL`而不是`UIImagePickerControllerOriginalImage`从方法的字典中获取数据`- (void)elcImagePickerController:(ELCImagePickerController *)picker didFinishPickingMediaWithInfo:(NSArray *)info`。

我试过了：

```
NSDictionary *dict = [info objectAtIndex:count];            

NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",[dict objectForKey:@"UIImagePickerControllerReferenceURL"]]]];//UIImagePNGRepresentation([UIImage imageWithContentsOfFile:[NSString stringWithFormat:@"%@",[dict objectForKey:@"UIImagePickerControllerReferenceURL"]]] );
        NSLog(@"length %d",[data length]);
        imageview.image = [UIImage imageWithData:data]; 
```

但是，每次我得到 0 个字节。我已经尝试了论坛中所有可用的答案，但没有用。

请问有人能回答这个吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T12:59:01.810

`UIImagePickerControllerReferenceURL`返回`NSURL`对象而不是字符串对象。请将您的代码更改为 -

```
NSData *data = [NSData dataWithContentsOfURL:[dict objectForKey:@"UIImagePickerControllerReferenceURL"]];
NSLog(@"length %d",[data length]);
imageview.image = [UIImage imageWithData:data]; 
```

`UIImagePickerControllerReferenceURL`返回`NSURL`对象 for `Assets Library`，因此您可以将图像作为 -

```
ALAssetsLibrary *assetLibrary=[[ALAssetsLibrary alloc] init];
[assetLibrary assetForURL:[[self.imagedata objectAtIndex:i] valueForKey:UIImagePickerControllerReferenceURL] resultBlock:^(ALAsset *asset) {
    ALAssetRepresentation *rep = [asset defaultRepresentation];
    Byte *buffer = (Byte*)malloc(rep.size);
    NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
    NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];//this is NSData may be what you want
    [data writeToFile:photoFile atomically:YES];//you can save image later
} failureBlock:^(NSError *err) {
    NSLog(@"Error: %@",[err localizedDescription]);
}]; 
```

**注意： ALAssetsLibrary 在 iOS 9 中已弃用。**

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-20T08:16:59.147

这个问题在谷歌上排名很好，`UIImagePickerControllerReferenceURL`所以我想我会添加`UIImagePickerControllerReferenceURL`在**iOS9 和更高版本中使用的正确方法，因为[ALAssetLibrary](https://developer.apple.com/library/ios/documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/)已被弃用**，取而代之的是照片框架。

[使用imagePickerController(_:didFinishPickingMediaWithInfo:)](https://developer.apple.com/reference/uikit/uiimagepickercontrollerdelegate/1619126-imagepickercontroller)`UIImagePickerControllerReferenceURL`的信息字典中提供的访问照片的正确方法是通过 Photos Kit [PHAsset](https://developer.apple.com/library/ios/documentation/Photos/Reference/PHAsset_Class/index.html)。

`UIImagePickerControllerDelegate`利用 Photos Framework 获取 UIImage的基本实现如下所示：

```
class YourViewController: UIViewController, UIImagePickerControllerDelegate
{
    public func imagePickerController(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject]?) {
        guard let info = info, let url = info[UIImagePickerControllerReferenceURL] as? NSURL else {
            // Using sourceType .Camea will end up in here as there is no UIImagePickerControllerReferenceURL
            picker.dismissViewControllerAnimated(true) {}
            return
        }

        let fetchResult = PHAsset.fetchAssetsWithALAssetURLs([url], options: nil)
        if let photo = fetchResult.firstObject as? PHAsset {
            PHImageManager.defaultManager().requestImageForAsset(photo, targetSize: PHImageManagerMaximumSize, contentMode: .AspectFill, options: nil) {
                image, info in
                // At this point you have a UIImage instance as image
            }
        }
    }
} 
```

当 sourceType 为 since 时，上面的代码不会处理回调，`.Camera`因为 info 字典不包含`UIImagePickerControllerReferenceURL`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T18:27:47.040

在 ELCImagePickers "Selected assets" 你可以做

```
-(void)selectedAssets:(NSArray*)_assets {

"... your code .?.?."

    NSMutableArray *returnArray = [[NSMutableArray alloc] init];

    for(ALAsset *asset in _assets) {

        NSMutableDictionary *workingDictionary = [[NSMutableDictionary alloc] init];
        [workingDictionary setObject:[[asset valueForProperty:ALAssetPropertyURLs] valueForKey:[[[asset valueForProperty:ALAssetPropertyURLs] allKeys] objectAtIndex:0]] forKey:@"UIImagePickerControllerReferenceURL"];

".. any other properties you need ?"

        [returnArray addObject:workingDictionary];

    }
} 
```

然后在你的其他类中从数组中保存

```
- (void) importImagesFromArray:(NSArray *)_images toFolder:(NSString *)folderPath
{
   if ([_images count] > 0) {

    //... YOUR CODE HERE FOR CHECKING YOUR ARRAY...Maybe a loop or something//
    //
    //
    //

    //ex:

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    for (NSDictionary *dict in _images) {

        [library assetForURL:[dict objectForKey:@"UIImagePickerControllerReferenceURL"]
                 resultBlock:^(ALAsset *asset){

                     //You Can Use This

                     UIImage *theImage = [UIImage imageWithCGImage:[[asset defaultRepresentation] fullResolutionImage]
                                                             scale:1.0
                                                       orientation:[[asset valueForProperty:@"ALAssetPropertyOrientation"] intValue]];

                     //[....save image blah blah blah...];

                     ///////////////////////////////////////////////////
                     ///////////////////////////////////////////////////

                     ////// OR YOU CAN USE THIS////////////////////

                     ALAssetRepresentation *rep = [asset defaultRepresentation];
                     Byte *buffer = (Byte*)malloc(rep.size);
                     NSUInteger buffered = [rep getBytes:buffer fromOffset:0.0 length:rep.size error:nil];
                     NSData *data = [NSData dataWithBytesNoCopy:buffer length:buffered freeWhenDone:YES];//this is NSData may be what you want
                     [data writeToFile:[folderPath stringByAppendingPathComponent:@"Some Filename You Need To Assign"] atomically:YES];

                 }

                failureBlock:^(NSError *error){
                    NSLog(@"Error saving image");

                }];

        // Dont forget to release library

    }
}
} 
```

# ruby-on-rails - Ruby on Rails - MySQL 和 PostGres

> ID：10799609
> 
> 赞同：0
> 
> 时间：2012-05-29T12:54:40.663
> 
> 标签：ruby-on-rails, postgresql, heroku

我是一名 RoR 初学者，正在使用 MySQL 开发我的应用程序，但 Heroku 使用 Postgres，所以我的 arel 不能正常工作。

我已经搜索了输出的错误，但在我的情况下，因为我在 HABTM 表之间进行查询，所以事情进展不顺利。

基本上，一个产品有_and_belongs_to_many 类别。**我的关系已经设置好，一切都在本地工作**，但是在部署时会发生 500 错误。

因此，事不宜迟，问题是：

（......以前在本地和heroku上运行良好的查询......）

```
if params[:fc].present? #(checks if checkboxes have been ticked)

arel=arel.joins('INNER JOIN categories_products ON products.id=categories_products.product_id')

arel=arel.where('categories_products.category_id in (:fc_list)', :fc_list => params[:fc]).uniq

arel=arel.group('product_id').having('count(category_id) = :size', :size => params[:fc].size)

end 
```

所以这个想法是允许用户选中一个复选框列表，然后显示选中类别中的所有产品。

我的 heroku 错误是：“products.id”必须出现在 GROUP BY 子句中或在聚合函数中使用。

这告诉我错误是 GROUP BY 和 drom 我阅读的文档，我必须将所有列放在这里。但由于它是 HABTM 关系，因此只有其他列存在，当我放置它时，arel 点功能正常。

我知道这已经有线程了，但没有一个能解决我的问题。

先感谢您。

问候，米格尔 A.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:50:01.550

这与此有关：

[Heroku (PG::Error: ERROR: column 必须出现在 GROUP BY 子句中或在聚合函数中使用](https://stackoverflow.com/questions/10066041/heroku-pgerror-error-column-must-appear-in-the-group-by-clause-or-be-used-i/10100264#10100264)

他们在 Heroku 中使用旧版本的 postgres，不支持您尝试执行的操作。使用 Heroku Shared PostgreSQL 插件可以解决这个问题。

**虽然，我也建议您的开发环境看起来尽可能像 Heroku 环境。这意味着使用相同版本的红宝石和相同的数据库......**

# mysql - 如何将一个字段中的 DATETIME 数据转换为 Unix 时间戳并将结果添加到 MySQL 命令行中的新字段

> ID：10799612
> 
> 赞同：2
> 
> 时间：2012-05-29T12:54:48.353
> 
> 标签：mysql, wordpress, datetime, timestamp, unix-timestamp

我有一篇自托管的 WordPress 博客文章很受欢迎，并且有超过 100 条评论。我决定购买一个域名并使用帖子中的内容来构建一个手动编码的 php 页面。这是我经常做的事情，但总是使用单独的 WordPress 安装进行分支。将旧帖子中的评论导出/导入到新帖子中很简单。但是，在这种情况下，我决定手动编写一个简单的 index.php 页面。

对于评论，我决定使用[GentleSource Comments](http://www.gentlesource.com/comment-script/)。评论数据存储在 MySQL 数据库中，与使用 WordPress 相比，它非常轻量级。我的目标是简单地将现有的 WordPress 发表评论数据导出到 GentleSource 评论数据库中。这个过程很简单。基本上，我获取了 wp_comments 表的副本，并简单地更改了字段名称以匹配 GentleSource Comments 数据库中所需内容的适当字段名称，并删除了 GentleSource Comments 数据库结构中非本机的不必要字段。

该项目是成功的；但是，我还有一项任务要做——从comment_date 字段中获取所有DATETIME 条目，并将该数据转换为unix 时间戳并将其添加到标记为comment_timestamp 的新字段中。

我可以轻松地在 phpMyAdmin 中逐行手动执行此操作，但我宁愿通过安全外壳在 mysql> 中快速执行此操作。问题是我似乎无法弄清楚命令。**有人介意帮助我吗？**

### 这里有一些屏幕截图，提供了一些关于我正在做的事情的视觉效果。

**编辑**：我是新用户，需要 10 个声望才能发布图片。如果您想查看屏幕截图，欢迎您在我的博客文章中查看[它们](http://www.connzone.com/internet/how-to-convert-datetime-data-in-one-field-to-unix-timestamp-and-add-results-to-new-field-in-mysql-command-line/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:17:56.623

尝试这个：

```
UPDATE tablename SET comment_timestamp = UNIX_TIMESTAMP(comment_date); 
```

编辑以将分号添加到命令的末尾。

# java - 如何为 Java JDBC EntityManagerFactory 类中的实体设置 ID？

> ID：10799613
> 
> 赞同：1
> 
> 时间：2012-05-29T12:54:50.053
> 
> 标签：java, mysql, jdbc, entitymanager

我已经用 MySQL Workbench 创建了我的 MySQL 数据库，然后我添加了 MySQL JDBC Driver 和 EclipseLink 库，然后从数据库创建了实体类；全部使用 NetBeans。由于我的观点和所有合并，我需要放弃使用简单的“id”列名；以某种方式重命名它们更容易：“id”->“TableNameId”。在创建实体类期间，有一条消息说我必须为所有实体手动设置 ID。怎么做？每个表都有 TableName.java 和 TableNamePK.java 文件。

TableNamePK.java 文件中有这样的行：

```
 @EmbeddedId
    protected AdministratorsPK administratorsPK; 
```

以及 TableNamePK.java 文件中的这样一行：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Basic(optional = false)
@Column(name = "UserId", nullable = false)
private Integer userId; 
```

我相信应该是这样，但我担心这个信息——我应该做些什么来让它发挥作用吗？

它抛出错误：

> 异常描述：实体类 [class kwestionariusz.manager.View2] 没有指定主键。它应该定义@Id、@EmbeddedId 或@IdClass。如果您使用这些注释中的任何一个定义了 PK，请确保您的实体类层次结构中没有混合访问类型（已注释的字段和属性）。

我认为这是第二种情况……但是如何正确处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:50:04.337

如果您的主键是简单的整数字段，我相信您需要做的就是使用 @Id 注释。只要您的字段名称与属性名称匹配，它就应该是：

```
@Id
protected int administratorsPK; 
```

我以前没有使用过@EmbeddedId，但我认为只有当你有一个复合 PK（参见[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/EmbeddedId.html)），你必须为其定义一个 Embeddable 类时才需要。尽管不知道您的数据库结构，但很难说 NetBeans 为您生成这些类的原因。

顺便说一句，在我看来，将每个 PK 字段命名为“id”会使事情变得更简单。为避免视图和合并复杂化，只需在 SELECT 语句中使用 AS 关键字对其进行重命名：

```
SELECT id AS AdministratorsPK FROM Administrators; 
```

# uitableview - 关于 setScrollIndicatorInsets 和 setContentInset 的 UITableView 问题

> ID：10799614
> 
> 赞同：0
> 
> 时间：2012-05-29T12:54:51.337
> 
> 标签：uitableview, uikeyboard

我有 4 个部分的自定义表格视图。

第一部分由“TextField”组成。

第 2 和第 3 由标签组成。

第 4 部分由“TextArea”组成。

我已经注册了“UIKeyboardWillShowNotification”。我正在调用“keyboardWillShow”函数，如下所示。

```
- (void)keyboardWillShow:(NSNotification *)notification 
{
    NSValue *keyboardBoundsValue = [[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardBounds;
    [keyboardBoundsValue getValue:&keyboardBounds];
    UIEdgeInsets e = UIEdgeInsetsMake(0, 0, keyboardBounds.size.height + 80, 0);
    [eventTableView setScrollIndicatorInsets:e];
    [eventTableView setContentInset:e];
} 
```

如下所示，将自定义单元格添加到 tableview。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if([indexPath section] == 0 || [indexPath section] == 4)
    {
        if (cell == nil) 
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

            if([indexPath section] == 0)
            {
                UITextField* titleTextField = [[UITextField alloc]initWithFrame:CGRectMake(10, 10, 280, cell.bounds.size.height)];
                [titleTextField setTag:201];
                [titleTextField setPlaceholder:@"Title"];
                [titleTextField setEnablesReturnKeyAutomatically:YES];
                [titleTextField setDelegate:self];
                [titleTextField setClipsToBounds:YES];
                [[cell contentView]addSubview:titleTextField];

                [titleTextField release];
            }
            else if([indexPath section] == 4)
            {
                UITextView* messageTextView = [[UITextView alloc]initWithFrame:CGRectMake(10, 5, 280, 2 * cell.bounds.size.height)];
                [messageTextView setTag:206];
                [messageTextView setEnablesReturnKeyAutomatically:YES];
                [messageTextView setBackgroundColor:[UIColor clearColor]];
                [messageTextView setDelegate:self];
                [messageTextView setClipsToBounds:YES];
                [[cell contentView]addSubview:messageTextView];

                [messageTextView release];
            }
        }
    }
    else
    {
        if (cell == nil) 
        {
            cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
            [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];

            if([indexPath section] == 1)
            {
                if([indexPath row] == 0)
                {
                    cell.textLabel.text = @"Start";
                    [cell setTag:202];
                }
                else if([indexPath row] == 1)
                {
                    cell.textLabel.text = @"End";
                    [cell setTag:203];
                }
            }

            else if([indexPath section] == 2)
            {       
                cell.textLabel.text = @"Reminder";
                [cell setTag:204];
            }
            else if([indexPath section] == 3)
            {        
                cell.textLabel.text = @"Add Photo";
                [cell setTag:205];
            }
        }
    }

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    return cell;
} 
```

当我单击 textView 时，会收到键盘通知，因此 tableview 会向上滚动以适应键盘。但是当我在“textviewDidEndEditing”上退出键盘时，tableview 的单元格会交换。

这是 textviewDidEndEditing 的代码。

```
- (void)textViewDidEndEditing:(UITextView *)textView
{
    [UIView beginAnimations:NULL context:nil];
    [UIView setAnimationDuration:0.5];
    UIEdgeInsets e = UIEdgeInsetsMake(0, 0, 0, 0);
    [eventTableView setScrollIndicatorInsets:e];
    [eventTableView setContentInset:e];
    [UIView commitAnimations];
} 
```

这个你能帮我吗。我不知道为什么当键盘出现以及我 resignFirstResponder 的 textfield 和 textView 时，单元格会被交换。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-12T08:54:27.913

尝试这个

```
-(void) textFieldDidBeginEditing:(UITextField *)textField
{
    UITableViewCell *cell = (UITableViewCell *)[textField superview];
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T06:25:33.130

我自己找到了答案。当我使用相同的“CellIdentifier”分配 TextField 和 TextArea 时，它会产生问题。

所以，我在 xib 中创建了 2 个自定义 UITableViewCell。一个用于自定义 TextField 单元格，一个用于自定义 TextView 单元格，并分别给出单元格标识符，即“TitleCell”和“MessageCell”。现在我转到 cellForRowAtIndexPath 函数，并给出“TitleCell”作为 [indexPath section] == 0 的标识符，并将“MessageCell”作为 [indexPath section] == 4 的标识符。

而已。我的问题解决了。谢谢 ：）

# optimization - URL 和 SEO：字母（用于较短的 url）与单词？

> ID：10799617
> 
> 赞同：-1
> 
> 时间：2012-05-29T12:55:02.113
> 
> 标签：optimization, seo

哪个更适合 url 优化：

`dictionary.com/w/apple`与`dictionary.com/words/apple`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:50:06.950

这是一个非常简单的问题：这取决于偏好。如果“Words”是您要为其编制索引的关键字，请将其包含在 URL 中。如果没有，请将其最小化 - 它不会增加您的 SEO，但它肯定不会减损您策略的其他领域。

# python - 有没有人有任何使用 OpenCV 和 python 进行描述符提取的例子？

> ID：10799625
> 
> 赞同：16
> 
> 时间：2012-05-29T12:55:26.933
> 
> 标签：python, image-processing, opencv, surf

我正在尝试使用 OpenCV 从图像中提取 SURF 描述符。我正在使用 OpenCV 2.4 和 Python 2.7，但我很难找到任何提供有关如何使用这些函数的任何信息的文档。我已经能够使用以下代码来提取特征，但我找不到任何明智的方法来提取描述符：

```
import cv2

img = cv2.imread("im1.jpg")
img2 = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

surf = cv2.FeatureDetector_create('SURF')
detector = cv2.GridAdaptedFeatureDetector(surf, 50) # max number of features
fs = detector.detect(img2) 
```

我尝试提取描述符的代码是：

```
import cv2
img = cv2.imread("im3.jpg")
sd = cv2.FeatureDetector_create("SURF")
surf = cv2.DescriptorExtractor_create("SURF")
keypoints = []
fs = surf.compute(img, keypoints) # returns empty result
sd.detect(img) # segmentation faults 
```

有没有人有任何做这种事情的示例代码，或指向任何提供示例的文档的指针？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-29T17:41:27.640

这是我为使用 Python 2.7 和 OpenCV 2.4 提取 SURF 特征而编写的一些代码示例。

```
im2 = cv2.imread(imgPath)
im = cv2.cvtColor(im2, cv2.COLOR_BGR2GRAY)
surfDetector = cv2.FeatureDetector_create("SURF")
surfDescriptorExtractor = cv2.DescriptorExtractor_create("SURF")
keypoints = surfDetector.detect(im)
(keypoints, descriptors) = surfDescriptorExtractor.compute(im,keypoints) 
```

这有效并返回一组描述符。不幸的是，由于 cv2.SURF() 在 2.4 中不起作用，您必须经历这个繁琐的过程。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T13:12:48.947

Here is a simple bit of code I did for uni fairly recently. It captures the image from a camera and displays the detected keypoints on the output image in real-time. I hope it is of use to you.

There is some documentation [here](http://opencv.itseez.com/modules/nonfree/doc/feature_detection.html?highlight=surf#cv2.SURF).

Code:

```
import cv2

#Create object to read images from camera 0
cam = cv2.VideoCapture(0)

#Initialize SURF object
surf = cv2.SURF(85)

#Set desired radius
rad = 2

while True:
    #Get image from webcam and convert to greyscale
    ret, img = cam.read()
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    #Detect keypoints and descriptors in greyscale image
    keypoints, descriptors = surf.detect(gray, None, False)

    #Draw a small red circle with the desired radius
    #at the (x, y) location for each feature found
    for kp in keypoints:
        x = int(kp.pt[0])
        y = int(kp.pt[1])
        cv2.circle(img, (x, y), rad, (0, 0, 255))

    #Display colour image with detected features
    cv2.imshow("features", img)

    #Sleep infinite loop for ~10ms
    #Exit if user presses <Esc>
    if cv2.waitKey(10) == 27:
        break 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T10:02:43.157

使用 open cv 2.4.3，您可以执行以下操作：

```
import cv2
surf = cv2.SURF()
keypoints, descriptors = surf.detectAndCompute(img,None,useProvidedKeypoints = True) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-24T06:35:01.393

todofixthis 我遵循你的代码，我得到了这个

```
import cv2
img = cv2.imread("im3.jpg")
sd = cv2.FeatureDetector_create("SURF")
surf = cv2.DescriptorExtractor_create("SURF")
keypoints = sd.detect(img) # segmentation faults
l,d = surf.compute(img, keypoints) # returns empty result 
```

在哪里

l = 关键点

d = 描述符

# jquery - JQuery Mobile+Phone Gap：index.html 文件未在浏览器中打开，但在 iPad 模拟器中运行良好

> ID：10799626
> 
> 赞同：0
> 
> 时间：2012-05-29T12:55:31.730
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

我已经实现了一个应用程序***`jQuery mobile and phone gap (cordova based application) in iPad`***，

我已经**`index.html`**使用 jQuery 实现了页面中的所有视图和代码

*`when i execute My xcode project works fine it shows required views in simulator.`*

但

***`when i open my index.html file in browsers it doesn't open / shown the views just a blank screen appears why..?`***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T02:15:28.507

我的猜测是你有一些依赖于 Cordova 的代码在“普通”浏览器中失败——检查你的 javascript 错误日志或发布指向你的 html/js 文件的链接。

通常，“deviceready”事件只会在移动设备上触发，因此将依赖 phonegap/cordova 的代码放入文档侦听器中，例如：

```
 document.addEventListener("deviceready", appReady, false); 
```

并且不要在 appReady 中放入非 phonegap 代码（例如渲染视图）。

另请参阅： [http ://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#deviceready](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#deviceready)

->> 乔什 W <<-

# c# - 根据来自两个不同表的阻止日期生成接下来 3 个月的可用日期

> ID：10799629
> 
> 赞同：0
> 
> 时间：2012-05-29T12:55:47.890
> 
> 标签：c#, asp.net, sql, sql-server-2008, tsql

我正在开发一个需要使用 webform $ c# 转换为 asp.net 应用程序的项目。

下面是 jQuery 中的一个工作脚本，它根据日历生成从当前日期开始接下来 90 天的日期。

这是一个简单的脚本，它不会查找被阻止的日期等。

它还只显示工作日的日期，即从周一到周五。

```
$(function(){
function pad(n){return n<10 ? '0'+n : n}
var date = new Date();
var selectElement = $('<select name="dddDate" class="ddDate" >'), optionElement;
for (var count =0; count < 91; count++){
    var day = date.getUTCDay();
   if (day == 0 || day == 1 || day == 2 || day == 3 ||  day == 4 || day == 5) {

      formattedDate = pad(date.getUTCDate()) + '-' + pad(date.getUTCMonth()+1) + '-' +  date.getUTCFullYear();
      optionElement = $('<option>')
      optionElement.attr('value',formattedDate);
      optionElement.text(formattedDate);
      selectElement.append(optionElement);  
    }
    date.setDate(date.getDate() +1);
}
$('#ddDate').append(selectElement);
}); 
```

这很容易。现在我必须从两个不同的表`EventCalender`和`Booking`表中生成这些日期，我必须查看哪些日期被阻止或预订，并相应地仅显示未来 90 天内可用的日期。

让我们假设`EventCalender`有`BlockDate`列和`Booking`表也有`BlockDate`列。

如果有人可以帮助生成一个 sql 查询，该查询将根据两个表中的阻止日期生成可用日期并填写下拉列表，我将不胜感激。任何想法或指针都会很棒....

我寻找了这样的例子，但找不到太多帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:07:06.453

既然您没有使用 SQL 来生成可用日期，那么为什么要使用它来修剪这个列表呢？

只需加载阻止日期和事件日期，然后从列表中删除这些日期。

为了使用 SQL 执行您想要的操作，我希望您需要使用可用日期填充一个表，然后对另外两个表进行外部连接，并且只选择阻塞表和事件表为空的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:15:18.630

这是在 SQL 中生成日期的一种方法。

我假设您正在使用`date`blockeddate 列中的数据类型。

```
declare @date date = getdate()

;with dates(d)
as
(
    select  @date
    union all
    select DATEADD(day, 1, d)
    from    dates
    where   d < DATEADD(day, 89, @date)
)

select * 
from dates
except
(
select blockedDate
from table1
union all
select blockedDate
from table2
) 
```

# javascript - 如何从实时数据中获取随机输出

> ID：10799630
> 
> 赞同：0
> 
> 时间：2012-05-29T12:55:52.173
> 
> 标签：javascript, random-sample

我正在创建一个随机选择一个地方供你吃饭的网站。它访问 yelp api 并返回 10 个结果。我想随机选择其中一个结果并将其发布到我的网站上。我正在寻找有关如何使用 javascript 执行此操作的任何建议。我知道你可以使用 php 来做到这一点，但如果可以的话，我更愿意使用 js。

因为数据会不断变化，因为它基于用户输入，所以我不能为每个地方分配一个数字，然后使用 math.random。

有人对我可以使用什么有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:05:19.533

自从 Yelp！Search API 返回一个匹配企业的数组，您可以使用 0-9 的随机整数偏移量来返回其中一个：

Math.floor(Math.random() * 10)

但是，这会将您限制为前 10 次点击。

更好的方法是使用`limit`1 的 a 进行搜索，找出结果（通过`total`属性）有多少命中，然后生成一个从 0 到的随机数，`total`并将其用作`offset`第二个请求中的 the。

API在这里定义：[http ://www.yelp.com/developers/documentation/v2/search_api](http://www.yelp.com/developers/documentation/v2/search_api)

# java - 检票口嵌套片段

> ID：10799634
> 
> 赞同：0
> 
> 时间：2012-05-29T12:56:03.570
> 
> 标签：java, wicket, fragment

我正在尝试将一个片段嵌套到另一个片段中。列表视图充满了父片段（有效），现在我希望在某些情况下第二个片段嵌套在第一个片段中。这是我填充列表视图的代码：

```
@Override
protected void populateItem(final Item<Message> item) {
    Message msg = item.getModelObject();
    MessageFragment msgFragment = new MessageFragment("entry", "messageFragment", this, msg);
    WebMarkupContainer msgRatingContainer = new WebMarkupContainer("messageRatingContainer");
    msgRatingContainer.setVisible(false);
    if(msg.getType() == MessageType.RESERVATION){
        msgRatingContainer.add(new MessageRatingFragment("messageRatingContainer", "messageRatingFragment",this, msg));                 
        msgRatingContainer.setVisible(true);
    }
    msgFragment.add(msgRatingContainer);
    item.add(msgFragment);
} 
```

涉及的标记：

```
<li wicket:id="listView"><div wicket:id="entry"></div></li>
<wicket:fragment wicket:id="messageFragment">
    <div class="MessageAlert">
        My Parent fragment content
    </div>
    <div  wicket:id="messageRatingContainer"></div>
    <wicket:fragment wicket:id="messageRatingFragment">
        My nested fragment content
    </wicket:fragment>
</wicket:fragment> 
```

如果我没有任何嵌套片段（if 条件为假），则 UI 按预期呈现，如果条件为真，我会收到以下错误：

```
org.apache.wicket.WicketRuntimeException: The component(s) below failed to render. A common problem is that you have added a component in code but forgot to reference it in the markup (thus the component will never be rendered).
1\. [MarkupContainer [Component id = messageRatingContainer]]
2\. [MarkupContainer [Component id = messageRatingContainer]] 
```

我想这与组件层次结构有关，但我不知道哪种方式是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:09:48.020

问题似乎是 if `msg.getType() != MessageType.RESERVATION`，您没有在 id 下添加任何内容`messageRatingContainer`。

您应该始终添加它，然后`setVisible()`根据您是否希望渲染它来调用 true 和 false。

顺便说一句，从上面的代码片段中，我根本看不出需要使用片段。

# jquery - 从表中创建 JSON 文件

> ID：10799638
> 
> 赞同：0
> 
> 时间：2012-05-29T12:56:13.827
> 
> 标签：jquery, json

> **可能重复：**
> [Excel 到各种 JSON 对象](https://stackoverflow.com/questions/4829392/excel-to-various-json-objects)

我已经开始使用 SlickQuiz，它是一个 jQuery 插件。在那里，使用 JSON 对象将问题添加到测验中。请参阅[此处的示例](https://github.com/jewlofthelotus/SlickQuiz#base-config-options)。不是每次生成新测验时都手动修改它，有没有办法从 Excel 表格或类似表格中生成它？

如果是这样，那么首先，我无法理解（Excel）表的结构需要什么样的结构才能在 JSON 中获得嵌套结构。你能帮我吗？而且，是否有一个好的现有序列化程序（正确的术语？）？

接受建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:22:20.980

如果您的结构不是嵌套太深，您可以写出结构，并为答案保留有限数量的列（例如 4）。您的 Excel 文件将有两张表：一张包含简单的两列列表中的信息内容，另一张包含问题，具有以下列名称：

*   问题.q
*   questions.a[0].option
*   问题.a[0].正确
*   questions.a[1].option
*   问题.a[1].正确
*   questions.a[2].option
*   问题.a[2].正确
*   questions.a[3].option
*   问题.a[3].正确
*   问题.正确
*   问题.不正确

如果您保持列名与字段路径对应，因为它们将出现在 JSON 结构中，那么将表结构解析为 JSON 并返回将非常容易。

但是，无论如何，这将是一个麻烦的解决方案。[你不能使用像http://jsoneditoronline.org](http://jsoneditoronline.org)这样的 JSON 编辑器来编辑你的 JSON 结构吗？或者在您的网站上实施一个简单的管理页面，您可以在其中编辑测验？使用 jsoneditoronline 中的库很容易做到这一点：[https ://github.com/josdejong/jsoneditoronline/wiki](https://github.com/josdejong/jsoneditoronline/wiki)

# java - 是否可以在浏览器中运行 Shell 脚本

> ID：10799640
> 
> 赞同：-6
> 
> 时间：2012-05-29T12:56:19.490
> 
> 标签：java, html

抱歉，如果您认为这是基本问题。我有 shell 脚本，它接受一些参数作为运行脚本的输入。

**是否可以通过Web 表单**传递这些参数并通过浏览器运行 Shell 脚本。

如果可能，如何使用 java 实现这一点。或任何其他技术是最好的。

提前致谢。期待您的宝贵意见。

**编辑：-**

大家好，

目前我有一个通过接受一些参数在客户端计算机上运行脚本的 GUI。我想通过使用 Web 表单传递参数将这些 Shell 脚本保留在服务器上并运行。对不起，如果我的语言难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:59:01.757

您需要使用具有更高安全权限的 Java Applet 和 JavaScript API，以便页面中的 JavaScript 可以读取表单数据并将其传递给 applet。客户端计算机需要安装 Java 插件和您使用的任何外壳，并且用户必须接受小程序要求的高于正常安全级别的访问权限。

这对于万维网来说一点也不实用，而对于受控网络来说却是一个延伸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T12:58:30.083

您可以使用签名的小程序运行脚本。

# gwt - 找不到 IE9 的 GWT devmode 插件

> ID：10799647
> 
> 赞同：0
> 
> 时间：2012-05-29T12:56:51.347
> 
> 标签：gwt

我得到的安装链接好像坏了。有人知道我在哪里可以找到插件吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:32:17.933

这是一个已知问题： [https ://groups.google.com/d/topic/google-web-toolkit/aTlIEPCzVec/discussion](https://groups.google.com/d/topic/google-web-toolkit/aTlIEPCzVec/discussion) [https://groups.google.com/d/topic/google-web-toolkit/XqZT0KPbWf4 /讨论](https://groups.google.com/d/topic/google-web-toolkit/XqZT0KPbWf4/discussion) [https://groups.google.com/d/topic/google-web-toolkit/mnGKkuuxEBI/discussion](https://groups.google.com/d/topic/google-web-toolkit/mnGKkuuxEBI/discussion)

似乎您可以从 SVN 下载它：http: [//google-web-toolkit.googlecode.com/svn-history/trunk/plugins/ie/prebuilt/](http://google-web-toolkit.googlecode.com/svn-history/trunk/plugins/ie/prebuilt/)（选择适合您系统的 MSI `x86`）`x64`

另请参阅[通过防火墙为 IE 安装 GWT 开发人员插件时遇到问题](https://stackoverflow.com/questions/6600226/trouble-installing-gwt-developer-plugin-for-ie-through-firewall)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T06:47:51.133

这个链接现在有效。上面的链接似乎没有用。如果您浏览直到标签然后找到各种版本的 gwt，您可以探索更多版本。 [http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/plugins/ie/prebuilt/](http://google-web-toolkit.googlecode.com/svn/tags/2.5.0/plugins/ie/prebuilt/)

# wpf - GAC 的 .NET 4.0 XBAP 安全问题

> ID：10799650
> 
> 赞同：3
> 
> 时间：2012-05-29T12:57:04.487
> 
> 标签：wpf, gac, xbap

自从将我们的产品转换为 .NET 4.0 并使用更新的代码访问安全模型后，我们遇到了一个问题。基本上，我们有组件库可能会或可能不会安装到机器上的 GAC。

如果有人使用这些库的默认部分信任设置创建了 XBAP，并且最终用户安装了 XBAP（在安装过程中部署了库），那么如果我们的库还没有在 GAC 中，它就可以正常工作。

如果它们在 GAC 中，XBAP 将在运行时失败并出现安全异常。我相信问题是由于这个：http: [//msdn.microsoft.com/en-us/library/aa970906.aspx](http://msdn.microsoft.com/en-us/library/aa970906.aspx)

> 当托管程序集安装到全局程序集缓存 (GAC) 中时，它们会变得完全受信任，因为用户必须提供明确的权限才能安装它们。因为它们是完全受信任的，所以只有完全受信任的托管客户端应用程序才能使用它们。

似乎自从它们从 GAC 中撤出后，即使它们与 XBAP 部署的 .dll 完全相同，它们的安全性也得到了更高的提升。但在那种情况下，一切都会破裂。

除了将 AllowPartiallyTrustedCallersAttribute 添加到所有库之外，有没有办法解决这个问题？

或者有没有办法阻止 XBAP 在 GAC 中查找程序集并仅使用它部署时使用的引用的确切副本？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T20:06:00.873

在 Visual Studio 的解决方案资源管理器中，单击参考并尝试将属性“SpecificVersion”设置为 true。它应该只查看指定的路径和引用时指定的版本，而不是在 GAC 中寻找最新版本。

查看[.net 参考具体版本是真是假？](https://stackoverflow.com/a/1063536/814871)

请注意，如果您添加参考的新版本，则必须删除当前参考，它不会自动替换它。

# android - 在android eclipse上切换页面时出错

> ID：10799652
> 
> 赞同：1
> 
> 时间：2012-05-29T12:57:05.183
> 
> 标签：android, eclipse, screen

```
 public void onClick(View v)
    {
        fun_demo();
        Intent myIntent = new Intent(v.getContext(), Activity1.class);
        startActivityForResult(myIntent, 0); 
    } 
```

假设上述函数“fun_demo()”将通过文本视图在同一屏幕上返回一些值，当从同一屏幕单击按钮时。

在这里，我需要在第二个屏幕上显示该可返回值。所以我已将这些行添加到我的 firstscreen.java

```
Intent myIntent = new Intent(v.getContext(), Activity1.class);
        startActivityForResult(myIntent, 0); 
```

在函数 fun_demo() 中。这段代码对吗？

**注意：** fun_demo() 的代码写在第一个屏幕上。

**FirstscreensActivity.java 供参考**

```
package com.android.button.web;

import org.ksoap2.*;
import org.ksoap2.serialization.*;
import org.ksoap2.transport.*;
import android.app.*;
import android.content.Intent;
import android.os.*;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class Tesing_webserviceActivity extends Activity {
/** Called when the activity is first created. */

private static final String NAMESPACE = "http://tempuri.org/";
private static final String METHOD_NAME = "HelloWorld";
private static final String SOAP_ACTION = "http://tempuri.org/HelloWorld";
private static final String URL = "http://122.248.240.105:93/Student.asmx?WSDL";
TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tv=(TextView)findViewById(R.id.textView_222);

    Button btn = (Button)findViewById(R.id.but);
    btn.setOnClickListener(btnListener);
}

public void fun_demo()
{
        TextView tv = (TextView) findViewById(R.id.textView_222);
    try
    {
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    request.addProperty("str","");

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION,envelope);
    Object result = envelope.getResponse();
    System.out.println("Result : " + result.toString());
    ((TextView) findViewById (R.id.textView_222)).setText(""+result.toString());
    } catch (Exception E) {
    E.printStackTrace();
    ((TextView) findViewById (R.id.textView_222)).setText("ERROR:"    + E.getClass().getName() + ":" + E.getMessage());
    }     }  

private OnClickListener btnListener = new OnClickListener()
{
    public void onClick(View v)
    {
        fun_demo();
        Intent myIntent = new Intent(v.getContext(), Activity1.class);
        startActivityForResult(myIntent, 0); 
    }
  };
} 
```

这个概念其实是要在android eclipse上消费一个web service

这是我的 logcat 供参考。

**LOGCAT**

```
05-29 18:22:04.455: W/System.err(1300):     at android.os.Looper.loop(Looper.java:123)
05-29 18:22:04.465: W/System.err(1300):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-29 18:22:04.465: W/System.err(1300):     at java.lang.reflect.Method.invokeNative(Native Method)
05-29 18:22:04.465: W/System.err(1300):     at java.lang.reflect.Method.invoke(Method.java:521)
05-29 18:22:04.465: W/System.err(1300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-29 18:22:04.465: W/System.err(1300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-29 18:22:04.465: W/System.err(1300):     at dalvik.system.NativeStart.main(Native Method)
05-29 18:22:04.465: D/AndroidRuntime(1300): Shutting down VM
05-29 18:22:04.465: W/dalvikvm(1300): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-29 18:22:04.476: E/AndroidRuntime(1300): FATAL EXCEPTION: main
05-29 18:22:04.476: E/AndroidRuntime(1300): java.lang.NullPointerException
05-29 18:22:04.476: E/AndroidRuntime(1300):     at com.android.button.web.Tesing_webserviceActivity.CallWebService(Tesing_webserviceActivity.java:55)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at com.android.button.web.Tesing_webserviceActivity$1.onClick(Tesing_webserviceActivity.java:62)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.view.View.performClick(View.java:2408)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.view.View$PerformClick.run(View.java:8816)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.os.Handler.handleCallback(Handler.java:587)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.os.Handler.dispatchMessage(Handler.java:92)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.os.Looper.loop(Looper.java:123)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at java.lang.reflect.Method.invokeNative(Native Method)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at java.lang.reflect.Method.invoke(Method.java:521)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-29 18:22:04.476: E/AndroidRuntime(1300):     at dalvik.system.NativeStart.main(Native Method) 
```

非常感谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:40:51.577

意图 myIntent = new Intent(v.getContext(), Activity1.class);

此行由于未初始化活动而产生问题

# oracle - 如何区分 Oracle 元数据中的过程和函数？

> ID：10799653
> 
> 赞同：4
> 
> 时间：2012-05-29T12:57:06.463
> 
> 标签：oracle, oracle10g, metadata

我想列出在给定模式中使用重载的所有存储过程。所有程序都在包内。我可以使用下面的 SQL 几乎到达那里（proc_count > 1 的任何东西）。

```
select 
    object_name, procedure_name, count(procedure_name) as proc_count 
from 
    all_procedures                
where 
    owner = 'SCHEMA_NAME' 
group by
    object_name, procedure_name
order by proc_count desc 
```

但是，似乎没有办法区分名为“ask_version”的函数和名为“ask_version”的过程，在我的情况下我需要这样做。情况是我们的中间件在调用使用重载的 procs 时遇到了麻烦。我需要对发生这种情况的地方进行影响分析。我们从不直接调用函数，因此需要隔离它们

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T13:16:22.043

`all_arguments`似乎有帮助。对于函数，有一个参数 with `position=0`（它是返回值），对于过程，这个参数不存在。

```
SELECT object_name, procedure_name, t, COUNT(1) AS proc_count
FROM
(
  SELECT p.object_name, p.procedure_name,
         CASE WHEN a.object_id IS NULL THEN 'PROCEDURE' ELSE 'FUNCTION' END AS t
  FROM all_procedures p
  LEFT JOIN all_arguments a ON ( a.object_id = p.object_id
                             AND a.subprogram_id = p.subprogram_id AND a.position = 0 )
  WHERE p.owner = 'SCHEMA_NAME'
)
GROUP BY object_name, procedure_name, t
ORDER BY proc_count DESC; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T13:51:11.013

这有点棘手，因为 Oracle 将包存储为独立函数和过程的离散对象。

唯一简单的方法是查看 ALL_ARGUMENTS 中的参数元数据。函数在位置 0 有一个参数来指定返回类型，而过程没有。

此外，通过检查 OVERLOAD 字段很容易判断函数或过程是否有重载。

```
select P.OBJECT_NAME
,      P.PROCEDURE_NAME
,      DECODE(min(a.POSITION), 0, 'Function', 'Procedure') FUNC_OR_PROC
,      DECODE(NVL(min(P.OVERLOAD), 0), 0, 'No', 'Yes') OVERLOADED
from   ALL_PROCEDURES P
,      ALL_ARGUMENTS a
where  P.OWNER = 'FLOWS_030000'
and    P.OBJECT_NAME = a.PACKAGE_NAME 
and    P.PROCEDURE_NAME = a.OBJECT_NAME
group  by P.OBJECT_NAME, P.PROCEDURE_NAME
order  by 1,2; 
```

# php - 一次返回多个语句？

> ID：10799654
> 
> 赞同：0
> 
> 时间：2012-05-29T12:57:06.853
> 
> 标签：php, return, chatbot

我正在尝试开发一个聊天机器人。

我对功能有疑问。

**这是代码的一部分：**

```
<?php
require_once 'bootstrap.php';
require_once CB_HOME.'/library/CommonFunctions.php';

class testBot extends AbstractCbRest{
  public function subscriptionCreated($userName){
    return "Welcome ";
  } 
  public function subscriptionDeleted($userName){
    return "Thanks  ";
  }
  public function messageReceived($from, $message){
    return "" ; // how to return multiple  here
  } 
```

在 messageReceived 函数中，我将实现聊天机器人功能。

每当我收到来自用户的消息时，我都会返回一些东西。为此，我将不得不运行一些 php 脚本并进行一些 api 调用。我将发送给用户的最终结果。

所有这些将需要大约 20-25 秒。

有没有办法可以发送多个退货声明？就像在进行 Api 调用时，我可以向用户发送一条消息，然后等待实际结果出现然后发送它？我想不出办法，因为我一发送消息，除非用户回复某些内容，否则我无法返回某些内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:01:17.487

使用数组：

```
public function messageReceived($from, $message){
    return array(
        'Welcome',
        'Thanks',
        'Hello',
        'Whatever'
    );
} 
```

甚至是关联数组

```
array(
    'msg1' => 'Welcome',
    'msg2' => 'Thanks',
    'msg3' => 'Hello',
    'msg4' => 'Whathever'
) 
```

然后你可以使用特定的消息：

```
array['msg1'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:00:59.690

您可以创建一个数组并返回：

```
public function messageReceived($from, $message){
  $retval = array();
  $retval[] = "message1";
  $retval[] = "message2";
  return $retval;
} 
```

或者

```
public function messageReceived($from, $message){
  return array("message1","message2");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:00:11.917

听起来您需要考虑使用 AJAX 而不是在处理页面呈现时进行同步调用。

# optimization - 计算对出现在 Clojure 1.4 中的频率的快速方法

> ID：10799656
> 
> 赞同：3
> 
> 时间：2012-05-29T12:57:17.477
> 
> 标签：optimization, clojure

我需要计算特定整数对在某些过程中出现的次数（使用局部敏感散列法检测相似图像的启发式方法 - 整数表示图像，下面的“邻居”是具有相同散列值的图像，因此计数表示有多少不同的哈希连接给定的图像对）。

计数存储为从（有序）对到计数（`matches`如下）的映射。

输入（`nbrs-list`下面）是被认为是邻居的整数列表的列表，其中内部列表（“邻居”）中的每个不同（有序）对都应该被计算在内。因此，例如，如果`nbrs-list`是，`[[1,2,3],[10,8,9]]`那么对是`[1,2],[1,3],[2,3],[8,9],[8,10],[9,10]`。

该例程`collect`被多次调用；该`matches`参数会累积结果，并且`nbrs-list`每次调用都是新的。最小的邻居数（内部列表的大小）为 1，最大的约为 1000。in 中的每个整数在`nbrs-list`任何调用中只出现一次`collect`（*这意味着，在每次调用中，没有任何对出现超过一次*）并且整数覆盖范围 0 - 1,000,000（因此 的大小`nbrs-list`小于 1,000,000 - 因为每个值只出现有时它们会成组出现 - 但通常大于 100,000 - 因为大多数图像没有邻居）。

我已经从一大块代码中提取了这些例程，所以它们可能包含小的编辑错误，抱歉。

```
(defn- flatten-1
  [list]
  (apply concat list))

(defn- pairs
  ([nbrs]
    (let [nbrs (seq nbrs)]
      (if nbrs (pairs (rest nbrs) (first nbrs) (rest nbrs)))))
  ([nbrs a bs]
    (lazy-seq
      (let [bs (seq bs)]
        (if bs
          (let [b (first bs)]
            (cons (if (> a b) [[b a] 1] [[a b] 1]) (pairs nbrs a (rest bs))))
          (pairs nbrs))))))

(defn- pairs-map
  [nbrs]
  (println (count nbrs))
  (let [pairs-list (flatten-1 (pairs nbrs))]
    (apply hash-map pairs-list)))

(defn- collect
  [matches nbrs-list]
  (let [to-add (map pairs-map nbrs-list)]
    (merge-with + matches (apply (partial merge-with +) to-add)))) 
```

所以上面的代码将每组邻居扩展为有序对；创建从对到的映射`1`；然后使用添加值组合地图。

我希望它运行得更快。我不知道如何避免对的 O(n^2) 扩展，但我想我至少可以通过避免这么多中间结构来减少恒定开销。同时，我希望代码相当紧凑和可读......

哦，现在我超过了“GC 开销限制”。所以减少内存使用/流失也是一个优先事项:o)

[也许这太具体了？我希望这些课程是一般性的，并且似乎没有很多关于优化“真实”clojure 代码的帖子。此外，我可以分析等，但我的代码看起来很丑，我希望有一个明显的、更干净的方法——特别是对于对扩展。]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:11:12.210

我猜你想要每对出现的频率？

尝试功能[频率](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/frequencies)。它在后台使用瞬态，这应该避免 GC 开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:57:01.490

（希望我没有误解你的问题）

如果您只想这样计算列表中的对，那么 [[1,2,3],[8,9,10]] 是

```
(defn count-nbr-pairs [n]
   (/ (* n (dec n))
      2))

(defn count-pairs [nbrs-list]
   (apply + (map #(count-nbr-pairs (count %)) nbrs-list)))

(count-pairs [[1 2 3 4] [8 9 10]])
; => 9 
```

这当然假设您不需要删除重复的对。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:11:02.957

```
=>(require '[clojure.math.combinatorics :as c])

=>(map #(c/combinations % 2) [[1 2 3] [8 9 10]])

(((1 2) (1 3) (2 3)) ((8 9) (8 10) (9 10))) 
```

这是一个很小的库，看看[源代码](https://github.com/clojure/math.combinatorics)

性能方面，您正在为 1M 以下的 1K 唯一值的用例查看以下数字

```
=> (time (doseq
           [i (c/combinations (take 1000 (shuffle (range 1000000))) 2)]))

"Elapsed time: 270.99675 msecs" 
```

这包括生成目标集，这在我的机器上大约需要 100 毫秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T23:24:55.050

上述建议似乎有所帮助，但还不够。我终于得到了不错的表现：

*   将对打包成一个`long`值。`MAX_LONG > 1e12`之所以有效，是因为`long`实例是可比较的（与哈希键不同，因此可以很好地工作`long[2]`）。与`[n1 n2]`.

*   使用[TLongByteHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TLongIntHashMap.html)原始类型哈希映射并对其进行变异。

*   `doseq`使用嵌套循环（或`for`使用不可变数据结构时的嵌套循环）处理对代码。

*   改进我的位置敏感哈希。问题的很大一部分是它太弱了，所以找到了太多的邻居 - 如果一百万张图像的邻居受到不良约束，那么你会得到一百万对，这会消耗太多内存......

内部循环现在看起来像：

```
(doseq [i (range 1 (count nbrs))]
  (doseq [j (range i)]
    (let [pair (pack size (nth nbrs i) (nth nbrs j))]
      (if-let [value (.get matches pair)]
        (.put matches pair (byte (inc value)))
        (.put matches pair (byte 0)))))) 
```

在哪里

```
(defn- pack
  [size n1 n2]
  (+ (* size n1) n2))

(defn- unpack
  [size pair]
  [(int (/ pair size)) (mod pair size)]) 
```

# c++ - 适合大图的数据结构

> ID：10799659
> 
> 赞同：3
> 
> 时间：2012-05-29T12:57:32.777
> 
> 标签：c++, c, visual-c++, dijkstra

我有一个大图，除了 c++ stl 中的邻接列表和“邻接矩阵”或我可以用于这么大的图的其他数据结构之外，是否还有其他数据结构，实际上我的图的邻接矩阵不适合主内存。我的图是有向的，我正在用 C++ 实现 dijkstra 算法。

我已经看过之前的帖子......但我正在寻找一个合适的关于 dijkstra 的数据结构。

大我的意思是一个包含超过 1 亿个节点和边的图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:56:21.833

通常将邻接列表表示为整数列表，其中整数是节点的索引。`00010111000...`通过将邻接表视为位串，其中`1`第 n 个位置的 a 表示该节点和节点之间的一条边，如何获得更多的空间效率`n`？然后通过一些标准算法压缩位串；根据需要解压缩它。位串可能会很好地压缩，因此这会以空间效率换取更高的计算成本。

# iphone - OpneGL ES 2.0 中的地球日/夜侧着色器

> ID：10799661
> 
> 赞同：2
> 
> 时间：2012-05-29T12:57:35.880
> 
> 标签：iphone, ios, opengl-es, shader, blending

我有一个模拟地球的 iPhone 应用程序！我想让它变得逼真：有一个球体对象，以及 Nightside 和 Dayside 纹理和着色器，但它不起作用！

我的 Sphere 对象的绘制方法：

```
 -(bool)execute:(GLuint)texture;
 {    
    glBindTexture(GL_TEXTURE_2D, texture);
    glBindVertexArrayOES(m_VertexArrayName);
    glDrawArrays(GL_TRIANGLE_STRIP, 0, m_NumVertices);
    glBindTexture(GL_TEXTURE_2D, 0);
    return true;
 } 
```

我的 ViewController 调用方法：

```
- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect
{
    glClearColor(0.3f, 0.3f, 0.3f, 1.0f);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
    glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m);

    glUseProgram(m_NightsideProgram);
    [m_Sphere setBlendMode:0];
    [m_Sphere execute:m_EarthNightTexture.name];

    glUseProgram(m_DaysideProgram);
    [m_Sphere setBlendMode:1];
    [m_Sphere execute:m_EarthDayTexture.name];

    glCullFace(GL_FRONT);
    glEnable(GL_CULL_FACE);
    glFrontFace(GL_CW);

} 
```

混合模式：0：glBlendFunc(GL_SRC_COLOR, GL_DST_COLOR); 1: glBlendFunc(GL_ONE, GL_CONSTANT_COLOR); //常量是中间蓝色，为了让它更亮一点

夜间碎片着色器：

```
precision mediump float;

varying lowp vec4 colorVarying;
varying vec2 v_texCoord;

uniform sampler2D s_texture;

void main() {
    vec4 newColor;

    newColor=1.0-colorVarying;

    gl_FragColor = texture2D(s_texture, v_texCoord)*newColor;                    
} 
```

DaySide 片段着色器：

```
precision mediump float;

varying lowp vec4 colorVarying;
varying lowp vec4 specularColorVarying;
varying vec2 v_texCoord;

uniform sampler2D s_texture;

void main() {
    vec4 finalSpecular=vec4(0,0,0,1);
    vec4 surfaceColor;
    float halfBlue;

    surfaceColor=texture2D(s_texture,v_texCoord);

    halfBlue=0.5*surfaceColor[2];

    if(halfBlue>1.0)
        halfBlue=1.0;

    if((surfaceColor[0]<halfBlue) && (surfaceColor[1]<halfBlue))
        finalSpecular=specularColorVarying;

    gl_FragColor = surfaceColor*colorVarying+colorVarying*finalSpecular;                    
} 
```

如果我使用唯一的一个着色器，它看起来很好，但它不会一起工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:20:13.820

要使`glUniform...`调用生效，必须有一个有效的程序绑定/使用，即使那样它也只会更改该特定程序的统一的统一值（由统一位置标识）。所以你必须**在**`glUniform...`各自的.**`glUseProgram`**

 **这就是为什么它只适用于一个着色器程序的原因，因为您永远不会绑定任何其他程序。但它在概念上仍然是错误的，因为在这种情况下，您依赖于已经绑定的特定程序，这始终是错误的来源（例如添加第二个程序时），因为**OpenGL 是一个状态机**。

另一方面，统一变量即使在其对应的程序未绑定（`glUseProgram(0_or_any_other_program)`）时也保持其值。**

# macos - 有没有办法改变手势事件的旋转？

> ID：10799666
> 
> 赞同：1
> 
> 时间：2012-05-29T12:57:43.383
> 
> 标签：macos, events, gesture, trackpad

我需要在 Mac OS X 中触发手势事件。我发现了这个问题： [有没有办法在 Mac OS X 上触发手势事件？](https://stackoverflow.com/questions/2487331/is-there-a-way-to-trigger-gesture-events-on-mac-os-x) 它对我有用，但如果我想改变旋转？例如，

```
- (void)rotateWithEvent:(NSEvent *)event {
    NSLog(@"ROTATE: %f", [event rotation]);
}
-(IBAction)button:(id)sender {
    ...
    CGEventSourceRef eventSource = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);
    CGEventRef event = CGEventCreate(eventSource);
    CGEventSetType(event, NSEventTypeRotate);
    CGEventPost(kCGHIDEventTap, event);
    ...
} 
```

将记录

```
ROTATE: 0.0 
```

我正在寻找如何改变旋转，但没有找到任何东西......感谢您的帮助。

# web-services - Axis2 Web 服务客户端超时配置

> ID：10799672
> 
> 赞同：2
> 
> 时间：2012-05-29T12:58:01.313
> 
> 标签：web-services, configuration, timeout, axis2, broken-pipe

我有一个需要将近 5 分钟才能运行的 Web 服务。我观察到的是我的axis2 1.4 版客户端不会等待那么多时间并返回。因此，我的 Web 服务抛出了 Broken Pipe。

我已将所有超时选项设置为 10 分钟。

```
HTTPConstants.REUSE_HTTP_CLIENT ==> Boolean.TRUE
HttpFactory.PARAMETER_THREAD_KEEP_ALIVE_TIME ==> new Integer(600000)
HttpFactory.PARAMETER_THREAD_KEEP_ALIVE_TIME_UNIT ==> "MILLISECONDS"
HTTPConstants.HEADER_CONNECTION_KEEPALIVE ==> Boolean.TRUE
options.setTimeOutInMilliSeconds(new Integer(600000));
HTTPConstants.SO_TIMEOUT ==> new Integer(600000)
HTTPConstants.CONNECTION_TIMEOUT ==> new Integer(600000)
JMSConstants.JMS_WAIT_REPLY ==> new Integer(600000)
HttpFactory.PARAMETER_REQUEST_SOCKET_TIMEOUT ==> new Integer(600000) 
```

我也在axis2.xml中设置了类似的配置

```
<parameter name="SO_TIMEOUT">600000</parameter>
<parameter name="CONNECTION_TIMEOUT">600000</parameter> 
```

但这些看起来都没有奏效。任何人都可以建议任何缺少的配置。

# actionscript-3 - 从文件中获取文件名

> ID：10799676
> 
> 赞同：0
> 
> 时间：2012-05-29T12:58:12.767
> 
> 标签：actionscript-3

我有以下代码：

```
private function uploadFile(file:File, packageId:String):void {
            try {
                var fullpath:String = file.nativePath;
                var filename:String = fullpath.substr(fullpath.lastIndexOf("/")+1,fullpath.length);
                packageItem.status = "Uploading file: "+filename;
                file.addEventListener(ProgressEvent.PROGRESS, function(event:ProgressEvent):void{uploadProgress(event, packageId)} );
                file.addEventListener(flash.events.Event.COMPLETE, function(event:flash.events.Event):void{uploadComplete(event, packageId)} );
                file.upload(urlRequest, packageId);
            } catch (error:Error) {
                logging.log(error.message); 
            }
        } 
```

所以我从文件对象的路径中提取文件名。

这些文件来自：

```
File.applicationStorageDirectory 
```

问题是这不适用于 Windows，因为它们使用反斜杠而不是像 mac osx 那样的斜杠。将文件名和文件分开以使其适用于mac和windows的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:11:14.947

它相当明显。

该`url`属性具有文件的文件系统 url。所以一个`nativePath`文件

> C:\Documents and Settings\some_file.txt

会有`url`一个

> file:///C:/Documents%20and%20Settings/some_file.txt

现在你只需要分开**`/`**就完成了。

PS：您可能必须[`unescape`](http://help.adobe.com/en_US/as2/reference/flashlite/WS5b3ccc516d4fbf351e63e3d118ccf9c47f-7ff0.html)使用文件名来删除 url 类型的格式

# php - 在 PHP 中为变量设置随机字符串

> ID：10799680
> 
> 赞同：0
> 
> 时间：2012-05-29T12:58:22.563
> 
> 标签：php

> **可能重复：**
> [从数组中获取随机项](https://stackoverflow.com/questions/4233407/get-random-item-from-array)

我需要一个代码来为变量设置随机字符串。当然我有字符串，它们没有生成。我可以将字符串放入数组中

```
$strings= array('one', 'two', 'yes', 'no', 'yeaa');
$random_str = ???? 
```

我需要 $random_str 是一个或没有或可能是两个。完全随机来自 $strings。

rand 和 shuffle 函数并没有简单地为我做到这一点，而且我是 php 的初学者，所以我需要你的帮助。所以谢谢你们帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:59:38.537

您可以使用[`array_rand`](http://php.net/manual/en/function.array-rand.php)从数组中获取随机元素：

```
$strings= array('one', 'two', 'yes', 'no', 'yeaa');
$random_str = $strings[array_rand($strings)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:01:46.493

或者您可以只使用 rand() 函数。

```
$strings= array('one', 'two', 'yes', 'no', 'yeaa');
$random_str = $strings[rand(0,4)]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:09:24.510

您可以使用：

```
<?php

mt_srand(time() * 1000);

$strings= array('one', 'two', 'yes', 'no', 'yeaa');
$ramdom_str = $strings[mt_rand(0, sizeof($strings)-1)];

?> 
```

[mt_srand](http://www.php.net/manual/en/function.mt-srand.php)和[mt_rand](http://php.net/manual/en/function.mt-rand.php)是 rand 和 srand 的更好实现

# c# - 如何使用 GridView 在 ListView 中动态更改单元格值

> ID：10799681
> 
> 赞同：0
> 
> 时间：2012-05-29T12:58:27.463
> 
> 标签：c#, wpf, listview

我在 ListView 中使用了 GridView。我想动态更改单元格值。例如，有一个名为“时间”的列，我想在发生某些事情时更改此值。我可以找到并获取单元格（例如`od.Time`在以下代码中），**但不能更改其值**。像这样的一些代码 where`ObjectData`是所有 ListView 列的类。

```
for (int i = 0; i < 5; i++)
{
      ObjectData od = (ObjectData)objectListView.Items[i];
      if (od.UserName == "Tom")
      {
          od.Time = DateTime.Now.ToString();
      }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:10:58.533

如果您的列表视图绑定到数据源，您需要更改数据源的数据，而不是列表视图的内容。然后它应该更新列表视图。

# sharepoint - 更改 Sharepoint 主页名称而不更改 URL

> ID：10799682
> 
> 赞同：2
> 
> 时间：2012-05-29T12:58:30.223
> 
> 标签：sharepoint, title

我有一个 SharePoint 网站，我的主页在 mySiteRoot/Pages/default.aspx 上（我认为这里很正常），但问题是浏览器选项卡中的名称也是“默认”。

我想更改选项卡中显示的名称而不更改 .aspx 文件的名称，但尽管我进行了所有搜索，但我在 SharePoint 上找不到它。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T13:58:54.220

SharePoint 中的每个页面都应该有一个名称和一个标题。Name 是指页面的文件名，因此会影响页面的 URL（在您的情况下为“default.aspx”）。

标题独立于页面名称，这是在浏览器标题栏/选项卡中显示的内容。

要编辑现有页面，最简单的方法是导航到`Site Actions`> `View All Site Content`。在“文档库”区域下，找到并打开“页面”库。在库中，找到“默认”，然后从其上下文菜单或功能区中选择“编辑属性”。在那里，您可以将标题更改为您想要的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-07T15:39:14.177

在 SharePoint 设计器中打开页面.. 并查找字符串：

```
<asp:Content ContentPlaceHolderId="PlaceHolderPageTitle" runat="server">
     <SharePoint:ListItemProperty Property="BaseName" maxlength="40" runat="server"/>
</asp:Content> 
```

只需将其替换为：

```
<asp:Content ContentPlaceHolderId="PlaceHolderPageTitle" runat="server">
    Your title 
</asp:Content> 
```

希望你能得到它的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:27:02.217

which edition/version of SharePoint ? I guess it's 2010 with wiki home feature enabled.

If I'm right, you have to rename the file to rename the page. But don't worry, your page will still be the home page of your site.

You can in all case click on `set as default page` on any page in the ribbon.

PS: you should consider posting on [http://sharepoint.stackexchange.com](http://sharepoint.stackexchange.com) which is the dedicated site for SharePoint Q/A.

# c# - 如何使用 DLLImport 将字符串从 C# 传递到 C++（以及从 C++ 到 C#）？

> ID：10799685
> 
> 赞同：22
> 
> 时间：2012-05-29T12:58:42.797
> 
> 标签：c#, c++, string, dllimport

很长一段时间以来，我一直在尝试向/从 C# 向/从 C++ 发送字符串，但还没有设法让它工作......

所以我的问题很简单：
有人知道将字符串从 C# 发送到 C++ 以及从 C++ 发送到 C# 的方法吗？
（一些示例代码会有所帮助）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T13:06:25.403

在你的 c 代码中：

```
extern "C" __declspec(dllexport)
int GetString(char* str)
{
}

extern "C" __declspec(dllexport)
int SetString(const char* str)
{
} 
```

在.net方面：

```
using System.Runtime.InteropServices;

[DllImport("YourLib.dll")]
static extern int SetString(string someStr);

[DllImport("YourLib.dll")]
static extern int GetString(StringBuilder rntStr); 
```

用法：

```
SetString("hello");
StringBuilder rntStr = new StringBuilder();
GetString(rntStr); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-29T13:06:42.337

将字符串从 C# 传递到 C++ 应该是直截了当的。PInvoke 将为您管理转换。

可以使用 StringBuilder 将字符串从 C++ 获取到 C#。您需要获取字符串的长度才能创建正确大小的缓冲区。

以下是众所周知的 Win32 API 的两个示例：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
 static extern int GetWindowText(IntPtr hWnd, StringBuilder lpString, int nMaxCount);
public static string GetText(IntPtr hWnd)
 {
     // Allocate correct string length first
     int length       = GetWindowTextLength(hWnd);
     StringBuilder sb = new StringBuilder(length + 1);
     GetWindowText(hWnd, sb, sb.Capacity);
     return sb.ToString();
 }

[DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
 public static extern bool SetWindowText(IntPtr hwnd, String lpString);
SetWindowText(Process.GetCurrentProcess().MainWindowHandle, "Amazing!"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:05:37.770

Windows API 中遇到的许多函数都采用字符串或字符串类型参数。对这些参数使用字符串数据类型的问题在于，.NET 中的字符串数据类型一旦创建就不可更改，因此 StringBuilder 数据类型是这里的正确选择。例如，检查 API 函数 GetTempPath()

**Windows API 定义**

```
DWORD WINAPI GetTempPath(
  __in   DWORD nBufferLength,
  __out  LPTSTR lpBuffer
); 
```

**.NET 原型**

```
[DllImport("kernel32.dll")]
public static extern uint GetTempPath
(
uint nBufferLength, 
StringBuilder lpBuffer
); 
```

**用法**

```
const int maxPathLength = 255;
StringBuilder tempPath = new StringBuilder(maxPathLength);
GetTempPath(maxPathLength, tempPath); 
```

# jquery - WPF WebBrowser，对 Internet Explorer 脚本错误回答是

> ID：10799687
> 
> 赞同：1
> 
> 时间：2012-05-29T12:58:48.767
> 
> 标签：jquery, wpf, browser, silent

关于在 WebBrowser 中抑制脚本错误的说法很多。我正在使用[Ondrej 的 SO 解决方案](https://stackoverflow.com/a/9739066/725116)

静音模式效果很好，但有一个问题。我的 WPF 应用程序可以通过 WebBrowser 访问相关的 Web 应用程序。很少有页面使用 jQuery DatePicker 插件，它在 WebBrowser 中不起作用。我只是无法更改日期。如果我禁用静默模式 - 将显示脚本错误，并且如果我每次都单击“是” - DatePickers 工作正常。

这不仅是与我的 Web 应用程序相关的问题 - WebBrowser 无法与发生脚本错误的任何其他站点（如某些地图站点等）一起正常工作。

在 Internet Explorer (8) 中没问题。

问题是 - 我可以强制静默模式对每个脚本错误“说是”吗？或者是否可以在不处于静默模式时以编程方式捕获这些错误并处理“是”答案？

# emacs - 在 emacs 中混合 org-mode 和 c-mode

> ID：10799688
> 
> 赞同：8
> 
> 时间：2012-05-29T12:58:50.743
> 
> 标签：emacs, org-mode, c-mode

我想在 Emacs中混合*使用 org-mode*和*c-mode 。**注释*中的所有内容都 应该是*org-mode*，其余的应该是默认的 major-mode *c-mode*：

```
/*
Org-mode here
** Section 1
  text
** Section 2
  text
Org-mode should end here
*/

func1()
{
} 
```

我尝试使用 nXhtml 多主模式，我想还有其他支持多模式的模式。我现在的问题是，如果我在“第 2 节”上键入 TAB，那么“第 2 节”下方的所有内容都将被折叠并变得不可见。但我想包含 org-mode 折叠/展开到评论部分的区域。TAB 应该只折叠/展开直到“*/”。

我想知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T13:43:50.197

你可以试试`M-x orgstruct-mode RET`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T21:21:59.663

我找到了一个解决方案：http: [//lists.gnu.org/archive/html/emacs-orgmode/2011-01/msg00036.html](http://lists.gnu.org/archive/html/emacs-orgmode/2011-01/msg00036.html) 列出了 org-mode 的补丁：

```
--- emacs-23.2/lisp/org/org.el  2010-04-04 00:26:08.000000000 +0200
+++ src/c51/mk/org.el   2011-01-02 20:26:10.266860827 +0100
@@ -5245,6 +5245,8 @@
 (defun org-cycle-internal-local ()
   "Do the local cycling action."
   (org-back-to-heading)
+  (cond 
+   ((not (looking-at (concat outline-regexp "\s*#" )))
   (let ((goal-column 0) eoh eol eos level has-children children-skipped)
     ;; First, some boundaries
     (save-excursion
@@ -5318,7 +5320,7 @@
       (hide-subtree)
       (message "FOLDED")
       (setq org-cycle-subtree-status 'folded)
-      (run-hook-with-args 'org-cycle-hook 'folded)))))
+      (run-hook-with-args 'org-cycle-hook 'folded)))))))

 ;;;###autoload
 (defun org-global-cycle (&optional arg)
--- emacs-23.2/lisp/outline.el  2010-04-04 00:26:04.000000000 +0200
+++ src/c51/mk/outline.el   2011-01-02 20:35:17.303609833 +0100
@@ -913,8 +913,15 @@
       ;; Then unhide the top level headers.
       (outline-map-region
        (lambda ()
-    (if (<= (funcall outline-level) levels)
-        (outline-show-heading)))
+    (if (<= (funcall outline-level) level)
+          (if (looking-at (concat outline-regexp "\s*#" ))
+          (progn
+            (outline-show-heading )
+            (show-entry ))
+        (outline-show-heading))))
+;;       (lambda ()
+;;  (if (<= (funcall outline-level) levels)
+;;      (outline-show-heading)))
        beg end)))
   (run-hooks 'outline-view-change-hook))

@@ -994,7 +1001,11 @@
       (outline-map-region
        (lambda ()
     (if (<= (funcall outline-level) level)
-        (outline-show-heading)))
+          (if (looking-at (concat outline-regexp "\s*#" ))
+          (progn
+            (outline-show-heading )
+            (show-entry ))
+          (outline-show-heading))))
        (point)
        (progn (outline-end-of-subtree)
          (if (eobp) (point-max) (1+ (point))))))) 
```

这个补丁必须手动应用，它并不难。`*#`它添加了将打破缩进的标记。@bzg 指出了`M-x orgstruct-mode RET`模式，归功于他。现在我可以在后台使用 orgstruct-mode 在 c.mode 中编写（不再需要多主模式）：

```
/*
Org-mode here
** Section 1
  text
** Section 2
  text
*#
Org-mode should end here
*/ 
```

我将在评论中有 org-mode，第 1 节和第 2 节将折叠直到`*#`标记。

# emacs - Sublime Text：使用 Emacs 缩进

> ID：10799689
> 
> 赞同：1
> 
> 时间：2012-05-29T12:58:51.257
> 
> 标签：emacs, indentation, sublimetext2, auto-indent

我是 Emacs 的狂热用户，但有时我会为拥有 20 多个文件的大型项目打开 Sublime Text。Sublime Text 是一个出色的文本编辑器，但我喜欢 Emacs 在 C / C++ 文件上的缩进。

我在 Google 上做了一个小搜索，看看如何在 sublime 文本中实现 Emacs 的 SmartTab 缩进，但过去没有人这样做。

我看到了 smarttab 的配置，[http](http://emacswiki.org/emacs/SmartTabs) ://emacswiki.org/emacs/SmartTabs，但我不知道如何在 Sublime Text 上实现它。

有人已经这样做或有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:11:35.933

Sublime text is pretty. If you're productive in it, then by all means keep using it. I don't know if it has an indentation engine remotely close to cc-mode, though.

On the other hand, there is NO WAY Emacs has an upper limit of 20 open files or whatever. Power users very often have hundreds of files open at the same time. If you have trouble managing many files in Emacs, maybe that's what you should be trying to resolve.

# asp.net - HTML & ASPX 链接问题

> ID：10799697
> 
> 赞同：0
> 
> 时间：2012-05-29T12:59:24.783
> 
> 标签：asp.net, html, hyperlink

我最近将我的整个网站从根目录移动到一个安全文件夹中，但是当我尝试访问它时，我现在收到一个错误：运行时错误 - 描述：服务器上发生应用程序错误。此应用程序的当前自定义错误设置可防止远程查看应用程序错误的详细信息（出于安全原因）。但是，它可以被本地服务器机器上运行的浏览器查看。详细信息：要在远程计算机上查看此特定错误消息的详细信息，请在位于当前 Web 应用程序根目录的“web.config”配置文件中创建一个标签。然后，此标记应将其“模式”属性设置为“关闭”。

```
<!-- Web.Config Configuration File -->
<configuration>
    <system.web>
        <customErrors mode="Off"/>
   </system.web>
</configuration> 
```

注意：您看到的当前错误页面可以通过修改应用程序配置标记的“defaultRedirect”属性以指向自定义错误页面 URL 来替换为自定义错误页面。

```
<!-- Web.Config Configuration File -->
<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:05:51.420

将其设置为关闭以查看错误（仅当它位于暂存的非生产服务器上时）。删除自定义错误页面以查看发生了什么。首先尝试在您的开发机器上重新创建错误。您还可以选择将错误堆栈记录或通过电子邮件发送给自己。

不要将整个站点移动到“安全文件夹”，而是对您希望保护的页面实施某种形式的身份验证。

# keystore - 创建仅在几天内有效的密钥库

> ID：10799699
> 
> 赞同：1
> 
> 时间：2012-05-29T12:59:30.950
> 
> 标签：keystore

我知道我们可以使用 -validity 参数为特定时期创建私有和公共密钥库。但是在密钥到期后，我们仍然能够签署一个 jar 并验证它，而不会抛出异常。我希望 15 天后不使用密钥。如何实现这一点。

请帮忙。

谢谢..

# mod-rewrite - mod_rewrite，帮我转发一页

> ID：10799705
> 
> 赞同：1
> 
> 时间：2012-05-29T13:00:00.817
> 
> 标签：mod-rewrite

很抱歉，但我并不完全了解 mod_rewrite 的工作原理，但我想基本上更改 url：

/index.php?category=value1&video=value2

通过 /value1/value2 访问

谁能告诉我该怎么做？谢谢^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:04:01.013

在这里试试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^/?(.*)/(.*)$ index.php?category=$1&video=$2 [L] 
```

第一行启用了[mod_rewrite](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html)的使用。

第二行是检查是否存在具有该名称的文件的[条件。](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html#rewritecond)如果没有继续下一行。

第三个是正则表达式。`^`标志着它的开始和结束`$`。这`/?`意味着一开始应该是可选的`/`（这取决于服务器配置）。这`(.*)`意味着从 0 到 n 的一系列字符。括号表示有一个组可以在`$n`这里称为`$1`和`$2`。

请注意，[`AllowOverride All`](http://httpd.apache.org/docs/2.4/mod/core.html#allowoverride)必须在服务器配置中启用。

# java - Spring同步Hibernate和JMS事务

> ID：10799711
> 
> 赞同：6
> 
> 时间：2012-05-29T13:00:11.953
> 
> 标签：java, spring, hibernate, transactions, jms

我正在开发一个同时使用 JMS 和 Hibernate 的独立应用程序。

如果我想跨两种资源进行交易，文档建议必须使用 JTA。

但是，现在使用 @Transaction 注释的 DAO 方法（和 HibernateTransactionManager），这似乎已经奏效了。当我在 JmsTemplate 上调用 send() 时，不会立即发送消息，而是在方法返回时将 JMS 会话与 Hibernate 会话一起提交。

我不知道没有 JtaTransactionManager 怎么可能，所以我检查了源代码。事实证明，Hibernate 的包装器和 JmsTemplate 都使用 TransactionSynchronizationManager 注册会话，并且 JMS 会话将在 Hibernate 会话提交时提交。

这和 JTA 交易有什么不同。我可以用它来代替后者吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T13:44:52.140

简而言之，没有 JTATransactionManager 和 XA 感知数据源，您将无法获得对两阶段提交的支持。

您所看到的是两个仅支持一阶段提交的*本地事务*的协调。大致执行这一系列事件......

1.  启动 JMS 事务
2.  读取 JMS 消息
3.  启动 JDBC 事务
4.  写入数据库
5.  提交 JDBC 事务
6.  提交/确认 JMS

JMS 事务将首先包装嵌套的 JDBC 事务，这样如果 Hibernate/JDBC 提交失败，JMS 队列将回滚。您的 JMS 侦听器容器不应设置**为** `acknowledge="auto"`，而是在发送确认之前等待 Hibernate 事务完成。

如果您只有这两个资源，那么您必须考虑的问题是当 Hibernate 成功持久化时，您会在确认 JMS 服务器之前获得一个异常。不是什么大问题，因为 JMS 消息没有丢失，您将再次阅读它。

**然而**

1.  您必须编写 MessageListener 来处理来自服务器的重复消息

2.  您还必须处理由于数据错误而无法处理的消息，并最终陷入无限循环尝试使用它。在这种情况下，服务器可能被配置为将消息移动到“死消息队列”，或者您自己在 MessageListener 中处理这个

**其他选项和进一步阅读**

如果您的 JMS 服务器不支持 XA（全局）事务，这几乎是您唯一的解决方案。

如果 JMS 服务器确实支持 XA 事务但 JDBC 不支持，那么您可以使用 JTATransactionManager 并使用[LastResourceCommitOptimisation](https://community.jboss.org/wiki/Multiple1PC)。有一些开源的 JTATransactionManager 可以像 JOTM 一样使用

[这篇 JavaWorld 文章](http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html)更详细地介绍了您的问题空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-25T10:38:46.527

尽管布拉德已经详细回答了这个问题，但我想解决您查询的一个非常具体的部分：-

***如果没有 JtaTransactionManager，我不知道这怎么可能***

来自 spring 文档：- **当检测到 JTA 环境时，Spring 的 JtaTransactionManager 将用于管理事务**

[https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-jta.html](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-jta.html)

# symfony - 如何处理 Symfony2 表单中 EntityChoiceList 中的选择“其他”？

> ID：10799713
> 
> 赞同：4
> 
> 时间：2012-05-29T13:00:22.677
> 
> 标签：symfony, symfony-forms

我有一个模型，如下所述：

![http://yuml.me/diagram/class/[产品]0..*-1[品牌]](../Images/9180c8624f9bcb70279c3ae51a43eafb.png)

我还有一个表单来创建一个新产品，其中一个字段`entity`构建了一个包含所有品牌的下拉列表。

现在我想在这个列表中添加一个值“Other”，以允许用户在另一个文本字段中手动指定品牌。

**问题是：**是否有一种干净的方法来管理这种情况（例如，在列表中添加值“Other”，这不是一个实体并让表单验证工作）与 Symfony2 表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T14:03:52.770

你可以通过两种方式

*   您可以订阅`FormEvents::BIND_CLIENT_DATA`表单事件。在事件方法中，您可以 `Brand`从文本创建新对象，保存它并通过调用将 id 设置为表单`$event->setData($data)`。请参阅[此](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)食谱条目。

或者

*   您可以附加数据转换器。在其`reverseTransform`方法中，您可以创建+保存对象并返回其 ID。请参阅[此](http://symfony.com/doc/current/cookbook/form/data_transformers.html)食谱条目。

# asp.net - TSQL IVF 导致 ASP.net 应用程序超时

> ID：10799725
> 
> 赞同：2
> 
> 时间：2012-05-29T13:01:01.623
> 
> 标签：asp.net, tsql, user-defined-functions, sql-execution-plan

您好，感谢您的关注。

**首先是关于这个问题的一些背景：**

我有一个内联表函数，它在我开发的在 IIS7 上运行的 ASP.net 应用程序中无处不在。它是 30 个或更多存储过程的基础，所有这些过程通常会在最多 200 毫秒内处理（足够快）。应用程序始终对所有数据库连接使用相同的连接字符串。该函数本身最多运行约 10 毫秒。

有时，对调用使用该函数的存储过程的页面的调用将导致 15 秒后超时。此超时适用于该页面的所有用户，但其他也有使用此功能的存储过程的页面在此发生时仍然可以正常执行，这表明它是一个特定的存储过程有问题。但是，这发生在多个页面上，表明它是多个存储过程或函数本身。

即使 Web 应用程序发生超时，从管理工作室会话使用不同的用户凭据在页面上运行任何（或所有）存储过程的时间都小于 200 毫秒。

在函数上运行 sp_recompile 将始终从任何登录凭据中“清除”超时。

因为这是应用程序的关键部分，所以 sp_recompile 会尽快运行，并且几乎没有时间用于调试。此外，我从来没有能够随意重新创建超时。

我尝试对内联表函数进行大量研究，但没有发现任何表明这是它们的常见问题，因此应该避免使用它们。

**问题：**

这些超时是否可能是由使用该函数引起的，或者它们是否保证是依赖它的存储过程的问题？换句话说，重构存储过程以使用视图或封装适当的内联逻辑是否有任何好处？

我的猜测是它只是存储过程，我可能会通过添加优化未知，在适当的地方重新编译选项或本地化参数来解决这个问题，但老实说，我更愿意找到一个适用于底层的解决方案功能，以便我可以在单个位置应用修复。

**功能：**

```
CREATE FUNCTION [dbo].[fn_ObjectIDs] (
    @DateFrom       AS DATETIME = NULL
    ,@DateTo        AS DATETIME = NULL
    ,@Region        AS INT = NULL
    ,@FamilyID      AS INT = NULL
    ,@ParentID      AS INT = NULL
    ,@ChildID       AS INT = NULL
) RETURNS TABLE AS
RETURN
    SELECT DISTINCT
        obj.ID       AS IDs
    FROM tblObjects obj WITH (NOLOCK)
    INNER JOIN tblFamily fam WITH (NOLOCK)
            ON obj.famID = fam.famID
        LEFT JOIN tblCountry cntry WITH (NOLOCK)
            ON (@Region IS NOT NULL) AND (fam.countryId = cntry.countryId)
        LEFT JOIN tblParent parent WITH (NOLOCK)
            ON (@ParentID IS NOT NULL) AND (obj.ID = parent.objectID)
        LEFT JOIN tblChild child WITH (NOLOCK)
            ON (@ChildID IS NOT NULL) AND (obj.ID = child.objectID)
    WHERE
        obj.Visible = 1
        AND obj.statusID IN (3,4,6,8)
        AND ((@DateFrom IS NULL) OR (obj.CreatedDate >= @DateFrom))
        AND ((@DateTo IS NULL) OR (obj.CreatedDate <= @DateTo))
        AND ((@Region IS NULL) OR (cntry.regionID = @Region))
        AND ((@FamilyID IS NULL) OR (obj.famID = @FamilyID))
        AND ((@ParentID IS NULL) OR (parent.parentID = @ParentID))
        AND ((@ChildID IS NULL) OR (child.childID = @ChildID)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T17:40:11.287

临时添加一些日志记录以验证实际导致超时问题的原因。您可以在您的应用程序和存储过程本身中执行此操作。让该过程在执行时将当前时间戳和用于调用该过程的参数写入日志表。还将日志记录添加到您的应用程序。然后，如果有某些参数导致问题或问题是否完全存在于过程中，您将能够确定何时发生特定超时。

一般来说，用户定义的函数不是一个好主意，尽管我的理解是表内联函数比其他一些函数更好。它增加了很多开销，优化器无法与 UDF 一起正常工作。

# java - Spring BeanFactory 加载和卸载

> ID：10799727
> 
> 赞同：0
> 
> 时间：2012-05-29T13:01:09.260
> 
> 标签：java, spring, ioc-container

1.  Spring 何时优雅地卸载 Spring 容器 (XMLBeanFactory)？
2.  当应用程序正在运行但 BeanFactory 的唯一处理程序超出范围时会发生什么？
3.  加载 Spring 容器的理想方式是什么？是在做`handler = new BeanFactory()`正确的方法吗？

**更新：**
当容器超出范围时，我们确实希望调用 close() 方法，这反过来会释放所有持有的资源。但这不会发生！我遇到了一个案例，我的 spring 容器超出了范围，但内存仍然满了（OutOfMemory 错误）。原因是我的 Spring 容器创建的 SessionFactory 对象从来没有被垃圾收集，因为它们被创建为静态的。这意味着`close()->destroy()`当容器超出范围时从未调用过。让我相信 Spring 本身存在泄漏问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:59:27.470

1.  This depends on how you're instantiating it. I a webapp, this is typically done at context shutdown. On the command line, you have to specifically close the context (via the "close" method on "AbstractApplicationContext"
2.  Same as anything else that falls out of scope. Not sure if the "close" method is part of the finalizer phase or not. I would hope the finalizer would trigger the destroy phase.
3.  As someone else said, don't use BeanFactory directly. Create an ApplicationContext. The most common way for web apps is the ContextLoaderListener, and for command line programs would be ClassPathXmlApplicationContext.

> // Keep a specific type, so we can call the "close" method later since it's // not part of the ApplicationContext interface itself. ClasspathXmlApplicationContext context = new ClasspathXmlApplicationContext(new String[] { "applicationContext.xml });

and then later on you close it:

```
context.close(); 
```

For webapps:

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:15:29.973

BeanFactory 是 Spring 中古老的做事方式。实例化 Spring 上下文的更现代的方法是通过 ApplicationContext 接口。供参考，请阅读

> [4.2.2 实例化一个容器](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-instantiation)

如果您打算在 Web 应用程序中使用 Spring，另请阅读

> [4.14.4 Web 应用程序的便捷 ApplicationContext 实例化](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#context-create)

# android - 突出显示通过 EditText 搜索的所有单词

> ID：10799732
> 
> 赞同：11
> 
> 时间：2012-05-29T13:01:23.467
> 
> 标签：android, textview, android-edittext, highlight

您好，我想知道如何突出显示在 EditText 中输入并将出现在 TextView 中的所有单词，这篇文章与这篇文章有关[Highlight Textview Using EditText](https://stackoverflow.com/questions/10784382/highlight-textview-using-edittext/10791344#comment14041834_10791344)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T13:35:51.833

说**et** 是您的 EditText 并且**tv**是 TextView 对象。使用以下代码：

* * *

```
public class MotivationalQuotesActivity extends Activity {
    /** Called when the activity is first created. */

Button next;
EditText et; 
TextView tv;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
   et = (EditText) findViewById(R.id.et);
   tv = (TextView) findViewById(R.id.tv);
   tv.setText("The name of our country is Bangladesh. Bangladesh is a land of rivers.");

   next = (Button) findViewById(R.id.button1);
    next.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                tv.setText("The name of our country is Bangladesh. Bangladesh is a land of rivers.");
                String ett =et.getText().toString();
                String tvt =tv.getText().toString();

                int ofe = tvt.indexOf(ett,0);   
                Spannable WordtoSpan = new SpannableString( tv.getText() );

        for(int ofs=0;ofs<tvt.length() && ofe!=-1;ofs=ofe+1)
        {       

              ofe = tvt.indexOf(ett,ofs);   
                  if(ofe == -1)
                      break;
                  else
                      {                       

                      WordtoSpan.setSpan(new BackgroundColorSpan(0xFFFFFF00), ofe, ofe+ett.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                      tv.setText(WordtoSpan, TextView.BufferType.SPANNABLE);
                      }

        }  

            }
        });

    }

} 
```

* * *

结果是：

![在此处输入图像描述](../Images/132eedfbe5e59ba801d0fa60f7714141.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-02T06:37:19.903

突出显示文本的一种简单快捷的方法是使用字符串替换方法。用字体标签替换期望字符串

```
Spanned strHTML= Html.fromHtml("<center>"+full_string.replaceAll(strSrch,"<font color='yellow'>"+strSrch+"</font>")+"</center><br/>");
TextView tv=(TextView) v.findViewById(R.id.txtPager);
tv.setText(strHTML,TextView.BufferType.SPANNABLE); 
```

# licensing - GNU GPL 和我的模板

> ID：10799734
> 
> 赞同：-1
> 
> 时间：2012-05-29T13:01:28.600
> 
> 标签：licensing, gpl, gnu

我正在创建免费模板并在我的网站上共享它们。我使用了知识共享许可证，但从现在开始我必须使用 GNU GPL。

我不确定我是否了解 GNU GPL 许可证：

1.  这是否意味着允许用户在模板中删除我的页脚链接？
2.  是否允许根据 GNU GPL 许可证使用 base64 加密（以保护链接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:39:55.470

在不知道您正在做什么的细节的情况下，最好的办法是阅读[常见问题解答](http://www.gnu.org/licenses/gpl-faq.html "GPL 常见问题解答")。如果您的情况没有通过链接解决，您实际上可以直接通过电子邮件向 FSF 发送任何其他问题，但在大多数情况下确实如此。无论您选择什么，许可软件都不是一件容易的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T00:30:44.177

> 1\. 是否允许用户在模板中删除我的页脚链接？

我不是律师，我不能告诉你什么时候可以删除版权声明。可能在当时它不再有效。

通常就主题而言，如果模板符合 GPL，则可以删除那些面向公众的版权说明。其他许可证可能也是如此。

> 2\. 是否允许根据 GNU GPL 许可证使用 base64 加密（保护链接）？

是的，但是您必须同时提供该主题的源代码。源代码是可以轻松编辑的代码，没有任何混淆。所以你会有两个版本：一个带有base64“加密”（不是加密而是混淆），另一个没有混淆。

* * *

如果您想更好地保留您的学分，您可以考虑在 AGPL 许可下发布您的主题。

# php - 从xml文件检索后将数据插入不同行的mysql php

> ID：10799735
> 
> 赞同：0
> 
> 时间：2012-05-29T13:01:31.877
> 
> 标签：php, mysql, xml, arrays

**测试.xml**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<propertyList>
  <business  type="food">
  <listingAgent id="1">
    <name>Spiro Abelas</name>
    <email>spiro@abelas.com.au</email>
  </listingAgent>
 </business>
 <business  type="food">
  <listingAgent id="2">
    <name>andy</name>
    <email>andy@abelas.com.au</email>
  </listingAgent>
 </business>
</propertyList> 
```

**PHP 代码**将 XML 文件解释为对象

```
<?php
  if (file_exists('test.xml')) {
    $xml = simplexml_load_file('test.xml');
      echo "<pre>";
      print_r($xml);
      echo "</pre>";
  } else {
     exit('Failed to open test.xml.');
     }
 ?> 
```

**输出**

```
 SimpleXMLElement Object
(
[business] => Array
(
[0] => SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [type] => food
        )
    [listingAgent] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 1
                )
            [name] => spiro
            [email] => spiro@abelas.com.au
        )
)
[1] => SimpleXMLElement Object
(
    [@attributes] => Array
        (
            [type] => food
        )
    [listingAgent] => SimpleXMLElement Object
        (
            [@attributes] => Array
                (
                    [id] => 2
                )
            [name] => andy
            [email] => andy@abelas.com.au
        )
))) 
```

**表结构**

![在此处输入图像描述](../Images/88f1389ef1c5bb787df01273cc47a897.png)

**我想将这样的数据插入表格**

![在此处输入图像描述](../Images/58015cb2f87669c55608b705b1ddd74c.png)

但我不知道如何从数组中检索数据并插入多行

所以请指导我如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:16:33.357

```
foreach($xml->business as $row)
{
  $business_type = $row->attributes()->type;
  $id = $row->listingAgent->attributes()->id;
  $name = $row->listingAgent->name;
  $email = $row->listingAgent->email;
  mysql_query('INSERT INTO table…');
} 
```

# java - Spring CSS 图像加载

> ID：10799736
> 
> 赞同：5
> 
> 时间：2012-05-29T13:01:40.500
> 
> 标签：java, css, spring, spring-mvc

我正在为我的 Web 应用程序使用 Spring *3.0.7 。*我想在 CSS 文件中从我的资源位置加载图像，如下所示：

```
.tag {
    background: transparent url(/resources/img/bg.gif) no-repeat;
    background-position: 0 50%;
    padding-left: 50px
} 
```

我可以轻松地将我的静态资源加载到 jsp 文件中，如下所示，没有任何问题：

```
<c:url value="/resources/css/main.css" /> 
```

我的静态资源处理程序已配置如下：

```
<mvc:resources mapping="/resources/**" location="/web-resources/"/> 
```

如前所述，我可以毫无问题地在 jsp 文件中加载资源，但无法将图像加载到我的 CSS 中。任何人都可以帮助将图像加载到 CSS 文件中！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T13:16:53.787

如果您的文件夹树是这样的：

```
+resources 
 -css
   -main.css

 -img
  -lots_of_img.jpg 
```

然后就更容易了`url('../img/bg.gif')`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:16:04.217

CSS 路径是相对于 CSS 文档位置的：

```
.tag {
    background: transparent url("resources/img/bg.gif") no-repeat;
    background-position: 0 50%;
    padding-left: 50px
} 
```

**或者**

```
.tag {
    background: transparent url("../resources/img/bg.gif") no-repeat;
    background-position: 0 50%;
    padding-left: 50px
} 
```

**或基于结构逻辑**

```
.tag {
    background: transparent url("../img/bg.gif") no-repeat;
    background-position: 0 50%;
    padding-left: 50px
} 
```

**这完全取决于您的目录结构！**

[您可以在此处](http://www.w3.org/TR/css3-background/#the-background-image)和[此处](http://www.w3.org/wiki/CSS/Properties/background-image)阅读有关此内容的更多信息！

# php - 在不刷新的情况下登录div

> ID：10799739
> 
> 赞同：0
> 
> 时间：2012-05-29T13:01:46.457
> 
> 标签：php, jquery, html, ajax

我有一个 loginout.php 像：

```
<?php if($isLoggedIn) { ?>
<form method="POST" action="" name="logoutForm" id="logoutForm" accept-charset='UTF-8'>
    <input type='hidden' name='submitted' id='submitted' value='1'/>
    <input type="submit" name="logout" value="Logout" />
</form>
<? } else { ?>
<form method="POST" action="" name="loginForm" id="loginForm" accept-charset='UTF-8'>
    <input type='hidden' name='submitted' id='submitted' value='1'/>
    Email:    <input type="text"     name="usr" /><br />
    Password: <input type="password" name="pw"  /><br />
    <input type="submit" name="login" value="Login" />
</form>
<? }?> 
```

一个像

```
<div id="loginLogoutDiv"></div> 
```

还有jquery代码：

```
$(document).ready(function(){
    $('#loginLogoutDiv').load('loginout.php');
    $('#loginForm, #logoutForm').live('submitted', function() {
        $.post('loginout.php', $(this).serialize(), function (
        data, textStatus) {
            $('#loginLogoutDiv').html(data);
        });
        return false;
    });
}); 
```

如果按下登录按钮有什么问题，然后整个页面被刷新，我不想要？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:07:44.083

代替：

```
$('#loginForm, #logoutForm').live('submitted', function() { 
    ... 
```

和

```
$('#loginForm, #logoutForm').submit(function(event) {
    event.preventDefault();
    ... 
```

让你得到...

```
$(function(){
    $('#loginLogoutDiv').load('loginout.php');
    $('#loginForm, #logoutForm').submit(function(event) {
        event.preventDefault();
        $.post('loginout.php', $(this).serialize(), function (
        data, textStatus) {
            $('#loginLogoutDiv').html(data);
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:07:27.377

您要附加到的事件被称为`submit`，而不是`submitted`。

此外，请检查您的控制台是否有 javascript 中的错误——如果您的脚本`return false`在`onsubmit`处理程序中由于错误而终止，则不会阻止默认行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:07:39.217

我会这样做（意思是JS）：

```
$(document).ready(function(){
    $('#loginLogoutDiv').load('loginout.php');
    $('#loginForm, #logoutForm').submit(function(e) {
        e.preventDefault(); // this will prevent the page to really do a submit
        $.post('loginout.php', $(this).serialize(), function (
        data, textStatus) {
            $('#loginLogoutDiv').html(data);
        });
    });
}); 
```

如果您需要使用`live()`，应该这样做：

```
$(document).ready(function(){
    $('#loginLogoutDiv').load('loginout.php');
    $('#loginForm, #logoutForm').live('submit', function(e) {
        e.preventDefault(); // this will prevent the page to really do a submit
        $.post('loginout.php', $(this).serialize(), function (
        data, textStatus) {
            $('#loginLogoutDiv').html(data);
        });
    });
}); 
```

# jquery - 使用 Safari 进行字体渲染

> ID：10799742
> 
> 赞同：0
> 
> 时间：2012-05-29T13:01:57.990
> 
> 标签：jquery, css, safari, font-face

我通过@font-face 加载了一些特殊字体。字体会在所有浏览器中正常加载和运行，但不会在 Safari 中呈现。然而，字体会在您选择具有特殊字体的元素后呈现。字体使用 cia CSS 加载，例如：

```
@font-face {
    font-family: 'Brandon';
font-style: normal;
font-weight: bold;
src: url('../fonts/brandon_bold.woff') format('woff');
}

@font-face {
font-family: 'Brandon-Regular';
src: url('../fonts/Brandon_reg.otf');
} 
```

该元素有一个 jQuery 函数（翻转），我试图取消注释该函数，但字体呈现错误。

我已将问题缩小到在 CSS 中完成的转换，如下所示：

```
-ms-transition-property: all;
-ms-transition-duration: 2s;
-ms-transform: rotateX(0deg);
-webkit-transition-property: all;
-webkit-transition-duration: 2s;
-webkit-transform: rotateX(0deg);
-o-transition-property: all;
-o-transition-duration: 2s;
-o-transform: rotateX(0deg);
-moz-transition-property: all;
-moz-transition-duration: 2s;
-moz-transform: rotateX(0deg);
transform: rotateX(0deg); 
```

如果我取消注释 -webkit- 部分，字体会正常工作，但过渡（自然）不会。任何帮助将不胜感激！提前感谢所有读者和回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:11:18.720

您的元素应呈现为块元素。尝试`display: block`或`display: inline-block`。

# php - 使用 GD 库的图像随机化

> ID：10799744
> 
> 赞同：0
> 
> 时间：2012-05-29T13:02:03.900
> 
> 标签：php, image-processing, gd

我的任务是我需要从一组 1000 张图像中提取一张图像，并根据 get 查询中传递的参数将其提供给用户。这很简单。另外，我被要求以这样的方式提供图像，即使每次都是同一个文件，图像文件的 sha1 哈希值也应该不同。

为此，我们可以在图像背景的随机位置添加随机像素。

有人可以告诉我如何使用 GD 库来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:06:24.043

使用[Imagesetpixel](http://www.php.net/manual/en/function.imagesetpixel.php)。

```
$img = imagecreatefrompng('your_image.png');
$red = imagecolorallocate($img, 255, 0, 0); 
imagesetpixel($img, $x, $y, $red);
........
........ 
```

另一方面，为什么要在每个请求上更改图像的 sha1 哈希？

编辑：由于您想要一个透明像素，因此您将需要[imagealphablending](http://php.net/manual/en/function.imagealphablending.php)和类似的东西：

```
$img = imagecreatefrompng('your_image.png');
imagealphablending($img, false);
$transparent = imagecolorallocatealpha($img, 255, 255, 255, 127);
imagesetpixel($img, $x, $y, $transparent);
imagesavealpha($img, true);         
imagepng($img, 'my_saved_file.png'); 
```

# cloud-foundry - 在 Cloudfoundry 上采用 Wavemaker

> ID：10799745
> 
> 赞同：1
> 
> 时间：2012-05-29T13:02:08.347
> 
> 标签：cloud-foundry

关于cloudfoundry平台

*   是否有可能实施多租户解决方案？客户应该能够通过仪表板或“供应商控制台”管理多租户</li>
*   是否有可能在每个用户的基础上授予权限并创建访问角色？
*   是否有管理员用户可以直接访问主要服务（mysql、mongodb、redis、dea 等）的控制面板？

关于应用程序/网络开发

*   代码版本控制（cvs、svn）是作为 cloudfoundry 的模块实现的还是在 vfabric 套件中交付的？
*   是否有可能采用工作流来跟踪应用程序开发的所有阶段（设计、开发、集成和测试、实施、操作）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:44:33.640

以下是您的答案：

*   Cloud Foundry 平台是一个多租户解决方案，因为它允许多个用户，并且每个用户的应用程序都与其他用户隔离。
*   Cloud Foundry 目前有两种类型的角色：管理员和用户。
*   到目前为止，还没有 UI Web 应用程序工具。您可以使用 vmc CLI 工具访问部署到 Cloud Foundry 的应用程序。使用 vmc 隧道可以访问服务。请参阅[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)

关于Web开发：

*   不，但是人们可以将它们视为一种服务......
*   工作流通常是基于工具或流程的。Cloud Foundry 目前没有提供应用程序开发跟踪工具。

# c# - 如何在没有实例化、静态变量或传递引用的情况下从另一个类/线程访问方法？

> ID：10799756
> 
> 赞同：0
> 
> 时间：2012-05-29T13:03:01.843
> 
> 标签：c#, .net, events, delegates, instantiation

在重新设计我的应用程序以包含更灵活的设计后，我在从另一个从线程内运行的类访问位于 MAINFORM 上的方法时遇到了一些麻烦。下面是一些代码片段，显示我正在尝试做的事情：

主要形式：

```
public void setAlarmColour(byte[] result, int buttonNumber)
    {
        if (result != null)
        {
            this.Invoke((MethodInvoker)delegate
            {
                //txtOutput1.Text = (result[4] == 0x00 ? "HIGH" : "LOW"); // runs on UI thread

                if (result[4] == 0x00)
                {
                    this.Controls["btn" + buttonNumber].BackColor = Color.Green;
                }
                else
                {
                    this.Controls["btn" + buttonNumber].BackColor = Color.Red;
                }

            });

        }

    } 
```

A类：

```
public void connect(IDeviceInterface device)
    {
        //send data
        byte[] bData = new byte[71];
        bData[0] = 240;
        bData[1] = 240;
        bData[2] = 0;
        bData[3] = 1;
        bData[68] = 240;
        bData[69] = 240;
        bData[70] = this.CalculateCheckSum(bData);

        try
        {

            byte[] result = this.SendCommandResult(device.deviceIPAddress, device.devicePort, bData, 72);
            //send byte + buttonNumber to setAlarmColour on main thread here.

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }

    } 
```

现在，回答几个你可能想问的问题，为什么我不想做标题中解释的一些事情。

*   拥有 connect() 方法的设备类在线程中运行。这是因为我有多个这样的情况，例如，我要监控的每个设备都有一个。
*   我无法实例化新表单，因为我需要更新当前表单，因此 mainForm main = new mainForm() 不是一个选项
*   在主表单中的方法上使用静态会导致访问它首先尝试更改的表单控件出现问题，主要是在“this.controls []”部分。尽管如果有人对此有解决方法，我对想法持开放态度
*   我不想传递对主表单的引用 IF POSSIBLE 因为它可能会在任何地方处理这个问题，而且据我所知，这被认为是不好的做法，特别是随着项目规模的增加。我在较早的版本上已经这样做了，在我到达我需要去的地方之前，我必须通过这个参考大约 3/4 次。

有没有办法通过使用委托/事件等来做到这一点？我已经尝试阅读有关这样做的内容，但其中一些似乎令人困惑，我不确定发生了什么。另外，就像我说的，我对新想法持开放态度，所以如果你能告诉我一种使用我以有效方式排除的选项的方法，那么我是开放的。

有谁知道我如何从 A 类的主窗体中访问此方法？ps如果有人需要更多信息，请询问。

编辑 1：根据 jon skeet 的想法，我决定尝试实施事件来处理这个问题。虽然我遇到了一些问题......

我的表单唯一知道该类的时间是它根据我正在创建的 A 类的条目/实例的数量动态创建它们。在我的 A 类中，我创建了：

```
 public event EventHandler setAlarmColour = delegate { }; 
```

然后我在同一个类中触发事件：

```
 this.setAlarmColour(this, new EventArgs()); 
```

并在类的动态创建过程中订阅事件，例如：

```
 bfdevice.setAlarmColourDelegate += new EventHandler(setAlarmColour); 
```

其中 bfdevice = class A 和 setAlarmColourDelegate 是事件处理程序，而 setAlarmColour 是我试图访问的主窗体中的方法，但我需要将参数传递给

```
 EventHandler(setAlarmColour) 
```

即“byte []result，int buttonNumber”，因为目前我得到“没有重载“setAlarmColour”匹配委托“System.EventHandler”有什么想法吗？

这里的问题是我需要发送到 setAlarmColour 的参数仅在 A 类中是已知的，这不是我订阅事件的地方。因此我不能做 setAlarmColour(result, buttonNumber) 因为 mainform 没有参考这些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:09:36.577

听起来`ClassA`可能会暴露一个`CommandReceived`事件。然后，表单将为 的每个实例订阅该事件`ClassA`。这*实际上*`ClassA`是在委托事件处理程序中传递对 , 的引用，但它都是隐藏的。

从根本上说，每个实例都必须以*某种方式*`ClassA`返回到表单的实例。我强烈建议您*不要*通过静态变量来执行此操作，这会引入紧密耦合并降低可测试性。

 **如果您不喜欢事件的想法，则必须将引用传递给`ClassA`其他方式 - 例如在构造函数中。在这种情况下，您可能会在两者之间引入一个接口 -`ClassA`的构造函数将具有接口类型的参数，并且您的表单将实现该接口。这将放松两者之间的耦合。**

# c# - 使用 C# 从另一个应用程序的 SysListView32 中的数据网格中读取单元格项

> ID：10799757
> 
> 赞同：2
> 
> 时间：2012-05-29T13:03:01.933
> 
> 标签：c#, winapi, pinvoke, unmanaged, ui-automation

我正在尝试使用 C# .net ui-automation 和 winapi 读取另一个进程的 SysListView32 中的数据网格项

使用 ui-automation 的 C# 代码
[http://pastebin.com/6x7rXMiW](http://pastebin.com/6x7rXMiW)

使用 winapi 的 C# 代码 [http://pastebin.com/61RjXZuK](http://pastebin.com/61RjXZuK)

使用此代码，您只需将鼠标指针放在屏幕上的 SysListView32 上，然后按 Enter。

现在两个代码在具有以下属性的单元格项目上都返回空

```
pastebin.com/Rw9FGkYC 
```

但是这两个代码都适用于以下属性

```
pastebin.com/L51T4PLu 
```

我注意到的唯一区别是 name 属性包含与单元格中相同的数据，但是当 name 属性为空时会出现问题。

有没有其他方法可以读取单元格？或者我可以做的任何改变，请详细说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T21:24:32.887

我还建议使用 Inspect 工具。如果你看到这个：

```
IsLegacyIAccessiblePatternAvailable:    true 
```

您可以使用 LegacyIAccessiblePattern。其他帖子似乎表明它还没有在 Client UI Automation Api 中，但它在核心中。您可以通过包装来使用 .NET 中的核心。我将此添加到我的构建中以开始使用它：

```
"%PROGRAMFILES%\Microsoft SDKs\Windows\v7.0A\bin\tlbimp.exe" %windir%\system32\UIAutomationCore.dll /out:..\interop.UIAutomationCore.dll" 
```

如果确实支持这种模式，我可以添加更多细节。

* * *

好吧，那你可能很好。

这是一些示例代码：

```
 // C:\Program Files\Microsoft SDKs\Windows\v7.1\Include\UIAutomationClient.h
    public const int UIA_LegacyIAccessibleNamePropertyId = 30092;
    public const int UIA_LegacyIAccessibleValuePropertyId = 30093;
    public const int UIA_IsTextPatternAvailablePropertyId = 30040;
    public const int UIA_IsItemContainerPatternAvailablePropertyId = 30108;
    public const int UIA_AutomationIdPropertyId = 30011;
    public const int UIA_NamePropertyId = 30005;
    public const int UIA_IsInvokePatternAvailablePropertyId = 30031;

    public const int UIA_ItemContainerPatternId = 10019;
    public const int UIA_TextPatternId = 10014;
    public const int UIA_LegacyIAccessiblePatternId = 10018;
    public const int UIA_ValuePatternId = 10002;
    public const int UIA_InvokePatternId = 10000;

    public const int UIA_ButtonControlTypeId = 50000;

        uiAutomationCore = new UiAutomationCore();
        cacheRequest = UiAuto.CreateCacheRequest();
        cacheRequest.AddPattern(WindowsConstants.UIA_LegacyIAccessiblePatternId);
        cacheRequest.AddProperty(WindowsConstants.UIA_LegacyIAccessibleNamePropertyId);

       cacheRequest.AddProperty(WindowsConstants.UIA_LegacyIAccessibleValuePropertyId);
        cacheRequest.TreeFilter = UiAuto.ContentViewCondition;
        trueCondition = UiAuto.CreateTrueCondition();

// A Pinvoke GetChildWindows call because it is 
// the fastest way to traverse down to a handle
foreach (var child in GetChildWindows(someIUIAutomationElement.GetMainWindowHandle()))
        {
            var sb = new StringBuilder(100);
            // get the name of each window & see if it is an ultragrid
            // (get the name because the getchildwindows call only gets the handles
            User32.GetClassName(child, sb, sb.Capacity);
            var foundProperGrid = false;
            if (Win32Utils.GetText(child) != "UltraGrid1")
                continue;
            // if this is an ultragrid, create a core automation object
            var iuiae = UiCore.AutoElementFromHandle(child);

            // get the children of the grid
            var outerArayOfStuff =
                iuiae.FindAllBuildCache(interop.UIAutomationCore.TreeScope.TreeScope_Children,
                                        trueCondition,
                                        cacheRequest.Clone());

            var countOuter = outerArayOfStuff.Length;
            // loop through the grid children 
            for (var counterOuter = 0; counterOuter < countOuter; counterOuter++)
            {
                // make a core automation object from each
                var uiAutomationElement = outerArayOfStuff.GetElement(counterOuter);

                // hacky - see if this grid has a GroupBy Box as first 'row'
                //       - if so, this is the proper grid
                //       - ignore other grids
                if (!foundProperGrid && uiAutomationElement.CurrentName.Equals("GroupBy Box"))
                {
                    foundProperGrid = true;
                }
                else if (foundProperGrid)
                {
                    // 'cast' the object to a core 'legacy msaa' object
                    IUIAutomationLegacyIAccessiblePattern outerLegacyPattern =
                        uiAutomationElement.GetCachedPattern(WindowsConstants.UIA_LegacyIAccessiblePatternId);
                    Log.Info("OUTER, CachedName = " + outerLegacyPattern.CachedName);

                    try
                    {
                        // select the 'row' to give visual feedback
                        outerLegacyPattern.Select(3);
                    }
                    catch (Exception exc)
                    {
                        Log.Info(exc.Message);
                    }

                    // get the cells in a row
                    var arrayOfStuff =
                        uiAutomationElement.FindAllBuildCache(TreeScope.TreeScope_Children,
                                                                trueCondition,
                                                                cacheRequest.Clone());
                    // loop over the cells in a row
                    var count = arrayOfStuff.Length;
                    for (var counter = 0; counter < count; counter++)
                    {
                        // get a cell
                        var currIUIA = arrayOfStuff.GetElement(counter);

                        // 'cast' cell to a core 'legacy msaa' object
                        IUIAutomationLegacyIAccessiblePattern legacyPattern =
                            currIUIA.GetCachedPattern(WindowsConstants.UIA_LegacyIAccessiblePatternId);

                        // dump cell name & value for reference
                        var name = legacyPattern.CachedName;
                        Log.Info(counter + ") CachedName = " + name);
                        var value = legacyPattern.CachedValue;
                        Log.Info("CachedValue = " + value);
                        // check if cell name corresponds to what is being checked
                        if (name.Equals("Date"))
                        {
                            //if (!value.StartsWith("5/23/2012"))
                            if (!value.StartsWith("5/25/2012"))
                                errorList.AppendLine("Bad Date = " + value);
                        }
                        if (name.Equals("XXX"))
                        {
                            if (!(value.Equals("1") || value.Equals("2")))
                                errorList.AppendLine("Bad XXX= " + value);
                        }
                        if (name.Equals("YYY"))
                        {
                            if (!value.Equals("ZZZ"))
                                errorList.AppendLine("Bad YYY = " + value);
                        }
                    }
                }
            }
            foundProperGrid = false;
        }
        var stopTime = DateTime.Now;
        var duration = stopTime - startTime;
        Log.Info("duration = " + duration);

        if (!"".Equals(errorList.ToString()))
        {
            Log.Info("errorList = " + errorList);
            Assert.Fail("Test errors");
        }
    } 
```

# c# - 提高asp.net的Web应用程序的速度

> ID：10799761
> 
> 赞同：1
> 
> 时间：2012-05-29T13:03:18.037
> 
> 标签：c#, asp.net, performance

在我的项目中，有一个页面有大约 10-15 个控件和 3 个树视图。加载需要大量时间，因为需要进行大量逻辑检查。我怎样才能提高它的速度（任何方法、代码或数据库）？请提出一些措施。

例如：每次页面加载时，它都会检查是否允许用户访问该页面。他可以访问哪些控件？树视图也仅基于用户访问进行绑定。

在加载每个控件时，它会一次又一次地获取数据。如何将其最小化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:35:19.260

从前端优化开始。

1.  在不需要的地方禁用控件的 ViewState。
2.  为您的静态内容设置过期标头。（浏览器缓存）
3.  启用 GZIP 压缩。

安装 YSLOW、PageSpeed....以获得更多建议。

[慢速](https://addons.mozilla.org/en-US/firefox/addon/yslow/)

[页面速度](https://developers.google.com/speed/pagespeed/)

然后，来后端优化：

缓存经常访问的数据

做一些代码重构.....更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:06:28.690

在你的应用程序上尝试一个分析器（JetBrains 很好），它会告诉你你的关键点在哪里。如果您认为它与数据库相关，请对您的查询运行解释计划/显示计划，以显示他们花费了多长时间以及他们将时间花在了哪里。确实，您的瓶颈可能在任何地方，需要一些跑腿才能找到它（甚至可能与网络有关）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:17:09.147

一旦用户通过身份验证，缓存他的登录状态并在你的代码中使用它；看看这是否有所作为。此外，缓存每个用户的数据。您可以使用会话状态来执行此操作。

此外，在您的页面指令标记中将 trace 属性设置为 true - 只是为了确保这是导致性能下降的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T13:32:05.217

[OutputCache](http://asp.net-tutorials.com/caching/more-output-cache/)可以增加一些共享的partialview/usercontrol。

# sql - oracle PL/SQL：按问题排序

> ID：10799768
> 
> 赞同：0
> 
> 时间：2012-05-29T13:03:30.487
> 
> 标签：sql, oracle, sorting

> **可能重复：**
> [oracle PL/SQL：排序行](https://stackoverflow.com/questions/10798939/oracle-pl-sql-sort-rows)

我运行这个查询：

```
 Select a.product, sum(
     case 
       when b.id=1 then round(c.sales,3)
       else 0 
     end) as Q1_2008,
 sum(
     case 
         when b.id=2 then round(c.sales,3) 
         else 0 
     end) as Q2_2008,
 sum(
     case
         when b.id=3 then round(c.sales,3) 
         else 0
     end) as Q3_2008
 from products a, quarters b, sales c
 where 
    a.id=c.PRODUCT_ID and 
    b.id=c.QUARTER_ID 
 group by a.product
 order by product 
```

但我的产品栏不按顺序排列。

## 产品

PROD_1
PROD_10
PROD_2
PROD_3
PROD_4
PROD_5
PROD_6
PROD_7
PROD_8
PROD_9

PROD_10 应该在最后的第二行。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T13:07:08.207

这是有序的。数字和字符串的排序方式不同。

11 在字符串中小于 2，因此将 product_10 放在您的 product_2 之前。如果您希望按字符串中的数字排序，则必须将该数字拉出并将其作为数字单独排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:34:06.400

这是执行您想要的“order by”语句的示例：

```
order by cast(substr(product, 5, 100) as int) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:12:20.147

使用 substr 来挑选字符串的数字部分。

使用 to_number 把它变成一个数字

按此排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:14:17.923

What Limey said is correct. If you want to order the names correctly then either rename the strings so that they are padded by 0s...for example PROD_01, PROD_01, PROD_02, PROD_03, PROD_10\. this way all will be in order.

else split, to_number and then Order the number part of the product.(this will only work in case you have common string as prefix as the product name)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:11:14.137

如果您真的必须使用字符串（鉴于几分钟前已经提出了同样的问题），那么您可能必须走一些拜占庭拆分/转换路线。即取 _ 之前的子字符串，将其丢弃，将剩余部分转换为整数，按此排序。不过，我不想保证它是一个可持续的解决方案。

# php - xDebug + Netbeans + PHP

> ID：10799769
> 
> 赞同：0
> 
> 时间：2012-05-29T13:03:32.900
> 
> 标签：php, netbeans, xdebug

是否可以在所有步骤中使用 xDebug、NetBeans 和 PHP 进行调试？现在我只能在我知道项目中的任何步骤（我必须设置断点）的情况下进行调试，但我想按下`F5`项目中的每个步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:13:22.280

Yes, this is possible. There are various tutorials out there: [http://netbeans.org/kb/docs/php/debugging.html](http://netbeans.org/kb/docs/php/debugging.html)

# c# - 使用 Move() 的 ObservableCollection？

> ID：10799772
> 
> 赞同：0
> 
> 时间：2012-05-29T13:03:48.237
> 
> 标签：c#, wpf

我有一个与 UI 中的项目列表相关联的 observablecollection。（observablecollection 不绑定到 UI 中的项目）。

现在，用户可以选择多选项目并通过拖放重新排序。所以，如果我有项目 1、2、3、4、5、6、7、8。例如，用户选择 4、6、8 并选择在项目 1 和 2 之间插入，那么新的列表顺序将是，

1、4、6、8、2、3、5、7。

如何使用 Move() 函数一次更新列表？

如果我使用一次移动，列表已经处于不同的状态......？我应该在单独的数组中跟踪旧索引然后移动它们吗？这是最好的方法吗？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:56:02.747

如果您的目标是只提升一次 CollectionChanged 处理程序 - 您可以将 ObservableCollection 子类化（它不是密封的）并添加一个名为 RaiseCollectionChanged 的​​ bool 属性，在任何静默更新之前将其设置为 true。

在此集合中实际执行移动的方法是受保护的和虚拟的 - 因此您可以在调用 base.MoveItem（引发事件）之前覆盖并检查 RaiseCollectionChanged。

在静默模式下修改集合时维护一个标记的标志也是一个好主意。这样，当 RaiseCollectionChanged 再次设置为 true 时，您可以一次为所有修改的项目引发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:25:11.910

太长的帖子无法在评论中，所以在这里作为答案。
正如**ananthonline**发布的那样，您可以继承 ObservableCollection。

但是，不幸的是，这只是工作的一半。原因是集合隐式使用集合视图作为项目控制的项目源绑定。

而作为 WPF 中所有默认集合视图的基类型的[CollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)不支持批量集合更新：

```
private void ValidateCollectionChangedEventArgs(NotifyCollectionChangedEventArgs e)
{
    switch (e.Action)
    {
        case NotifyCollectionChangedAction.Add:
        {
            if (e.NewItems.Count != 1)
            {
                throw new NotSupportedException(SR.Get("RangeActionsNotSupported"));
            }
            break;
        }
        case NotifyCollectionChangedAction.Remove:
        {
            if (e.OldItems.Count != 1)
            {
                throw new NotSupportedException(SR.Get("RangeActionsNotSupported"));
            }
            if (e.OldStartingIndex < 0)
            {
                throw new InvalidOperationException(SR.Get("RemovedItemNotFound"));
            }
            break;
        }
        case NotifyCollectionChangedAction.Replace:
        {
            if (e.NewItems.Count != 1 || e.OldItems.Count != 1)
            {
                throw new NotSupportedException(SR.Get("RangeActionsNotSupported"));
            }
            break;
        }
        case NotifyCollectionChangedAction.Move:
        {
            if (e.NewItems.Count != 1)
            {
                throw new NotSupportedException(SR.Get("RangeActionsNotSupported"));
            }
            if (e.NewStartingIndex < 0)
            {
                throw new InvalidOperationException(SR.Get("CannotMoveToUnknownPosition"));
            }
            break;
        }
        case NotifyCollectionChangedAction.Reset:
        {
            break;
        }
        default:
        {
            throw new NotSupportedException(SR.Get("UnexpectedCollectionChangeAction", new object[]
            {
                e.Action
            }));
        }
    }
} 
```

...并且您必须实现 ICollectionView。我不确定，这是正确的方法。

# android - 使用 Phonegap 以编程方式将文件从 SD 卡上传到远程服务器

> ID：10799773
> 
> 赞同：5
> 
> 时间：2012-05-29T13:03:55.323
> 
> 标签：android, cordova

我一直在尝试使用**Android**手机中的**Phonegap**以编程方式将（zip）文件上传到远程服务器。我已经尝试过[FileAPI](http://docs.phonegap.com/en/1.0.0/phonegap_file_file.md.html#FileTransfer)文档和在[此处](https://stackoverflow.com/questions/9953483/access-sd-card-in-android-for-uploading-a-file-to-my-php-server-using-phonegap)找到的解决方案。但这似乎不起作用。但是，我可以按照示例中的说明成功上传图像（使用相机和导航器​​）。

 **我在**SD 卡**`test.zip`的文件夹中有一个文件。我需要将此文件上传到远程服务器。`test`

 **任何有关这方面的帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:04:03.137

我得到它的工作，这是我使用的代码

```
uploadFile('test.zip', 'Test', 'multipart/x-zip');

function uploadFile(fileName, dirName, fileMime) {

    var win = function(r) {
        console.log("Code = " + r.responseCode);
        console.log("Response = " + r.response);
        console.log("Sent = " + r.bytesSent);
        alert(r.response);
    };

    var fail = function(error) {
        alert("An error has occurred: Code = " = error.code);
    };

    var fileURI;

    var gotFileSystem = function(fileSystem) {
        fileSystem.root.getDirectory(dirName, {
            create : false
        }, function(dataDir) {

            fileURI = dataDir.fullPath;
            fileURI = fileURI + '/' + fileName;

            alert(fileURI);

            var options = new FileUploadOptions();
            options.fileKey = "file";
            options.fileName = fileURI.substr(fileURI.lastIndexOf('/') + 1);
            options.mimeType = fileMime;

            var params = new Object();
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(fileURI,

                    // Enter the server url
                    "http://example.com/upload.php", win,
                    fail, options);

        }, dirFail);

    };

    // file system fail
    var fsFail = function(error) {
        alert("failed with error code: " + error.code);

    };

    // get file system to copy or move image file to
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFileSystem,
            fsFail);

    var dirFail = function(error) {
        alert("Directory error code: " + error.code);

    };
} 
```****

# visual-studio - Nuget、IoC 和扫描

> ID：10799784
> 
> 赞同：1
> 
> 时间：2012-05-29T13:05:09.700
> 
> 标签：visual-studio, inversion-of-control, nuget, .net

在我当前的项目中，我们使用 Nuget 来引入对 NHibernate 之类的依赖项，我们使用 Ninject 作为我们的 IoC 容器（尽管这不是我要解决的问题的重要细节）并且我们使用 Ninject 的扫描功能来建立我们的绑定。

这一切都很好，但我面临的问题是我已经经历了以 Presistence Ignorant 方式将我的数据访问层暴露给应用层的麻烦，但是 Ninject 需要在扫描时访问 NHibernate Dll时间。如果我没有使用 Nuget 来引入依赖项，那么这可以通过构建后步骤轻松解决，从我决定将它们放入源树的任何位置复制依赖项。

但是，使用 Nuget，我的理解是，随着依赖项的升级，Dlls 的路径可能会在包目录中发生变化。我绝对不想通过在我的 Coposite Root 项目（服务、UX 等）中使用 Nuget 来解决这个问题，所以我试图找出一种干净的方法来获取我在扫描时需要的 dll在我的复合根项目执行目录中可用。

# sql - 使用sql server中的行号从表中获取行

> ID：10799785
> 
> 赞同：0
> 
> 时间：2012-05-29T13:05:11.267
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想从 sql server 2008 中的表中获取 100-150 的行，我该怎么做？有什么办法吗？我尽可能多地搜索限制关键字在 mysql 中可用，但对于 sql server 使用公用表技术，但我不想这样做，有没有其他可用的方法，因为它在 Mysql 中可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:06:20.677

使用 sql 限制

[http://php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:13:23.587

在 SQL 2005 及更高版本中，有一个 ROW_NUMBER() 函数。如果您需要同时适用于 MySQL 和 SQL Server 的东西，那么我不知道这在 MySQL 中是否可用，因为我从未使用过它。

[http://msdn.microsoft.com/en-us/library/ms186734.aspx](http://msdn.microsoft.com/en-us/library/ms186734.aspx)

链接页面中给出的似乎最相关的示例如下所示，其中查询的结果按日期排序，然后返回该结果集中的第 50 到 60 行。

```
USE AdventureWorks2012;
GO
WITH OrderedOrders AS
(
    SELECT SalesOrderID, OrderDate,
    ROW_NUMBER() OVER (ORDER BY OrderDate) AS RowNumber
    FROM Sales.SalesOrderHeader 
) 
SELECT SalesOrderID, OrderDate, RowNumber  
FROM OrderedOrders 
WHERE RowNumber BETWEEN 50 AND 60; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:31:51.380

实际上，最便宜的方法是使用 top，然后使用 row_number()

```
select *
from (select *,  row_number() over (order by (select NULL)) as rownum
      from (select top 150 t.*
            from t
           ) t
     ) t
where rownum >= 100 
```

但是，我确实给你一个警告。关系表中没有行 100-150 这样的东西，因为它们本质上是无序的。您需要指定顺序。为此，您需要通过以下方式订购：

```
select *
from (select *,  row_number() over (order by <field>) as rownum
      from (select top 150 t.*
            from t
            order by <field>
           ) t
     ) t
where rownum >= 100 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:55:22.783

```
select * from
(select row_number() over (order by @column) as row,*  from  Table) as t
where row between 100 and 150 
```

@column 将被您表中的一个列替换，这很好地用于对结果进行排序

# java - 用于训练 HMM 的 MFCC 数据格式

> ID：10799786
> 
> 赞同：2
> 
> 时间：2012-05-29T13:05:11.110
> 
> 标签：java, signal-processing, speech-recognition, hidden-markov-models

我正在尝试使用 mfcc 功能和隐藏的马尔可夫模型在 java 中开发一个音频分类系统。我正在关注这篇研究论文：[http](http://acccn.net/cr569/Rstuff/keys/bathSoundMonitoring.pdf) ://acccn.net/cr569/Rstuff/keys/bathSoundMonitoring.pdf 。

算法描述如下：

每个声音文件，对应于声音事件的样本，在帧中进行处理，这些帧由汉明窗（25 毫秒）预先强调和加窗，重叠率为 50%。由 13 阶 MFCC 组成的特征向量表征每一帧。我们使用从左到右的六态连续密度 HMM 对每个声音进行建模，而不会跳过状态。每个 HMM 状态由两个高斯混合分量组成。在模型初始化阶段完成后，所有 HMM 模型都在三个迭代周期中进行训练。

我已经完成了第一部分工作，即从样本声音中提取特征。结果，我得到了一个二维数组，每行由 13 列组成（每行代表一个声音帧）。现在我的问题是如何使用这些数据训练 hmm。

我正在使用 jahmm 库。到目前为止，我已经开发了一些示例代码来大致了解该库的工作原理。

```
/**Some sample data to act as the mfcc data. Here each line terminated by a new space
     * is one observation. I don't know whether each line should be one row from the mfcc values 
     * (representing one frame) or each line should be representing a set of features from one audio file.
     */
    String realSequences = "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n"
            + "1.1;2.2;3.3;4.4;5.5;6.6;7.7;8.8;9.9;10.0;11.1;12.2;13.3;\n";

    /**
     * This is the reader class that reads the data and puts then in a relevant collection format
     * 
     */
    Reader reader = new StringReader(realSequences);
    List<? extends List<ObservationReal>> sequences =
            ObservationSequencesReader.readSequences(new ObservationRealReader(), reader);
    reader.close();

    /**
     * As the description states that each state is composed of two Gaussian mixture components.
     */
    OpdfGaussianMixtureFactory gMixtureFactory = new OpdfGaussianMixtureFactory(2);

    /**
     * The manual for jahmm says that KMeans learner is a good way to initialize the hmm. It has 6 states
     * and uses the two gaussian mixture models created above.
     */
    KMeansLearner<ObservationReal> kml = new KMeansLearner<ObservationReal>(6, gMixtureFactory, sequences);
    Hmm<ObservationReal> initHmm = kml.iterate();

    /*
     * As the papers states the hmm is trained in 3 iterative cycles.
     */
    BaumWelchLearner bwl = new BaumWelchLearner();
    Hmm<ObservationReal> learntHmm = null;
    for (int i = 0; i < 3; i++) {
        learntHmm = bwl.iterate(initHmm, sequences);
    } 
```

我的问题是：

Q1：mfcc 数据应该以什么格式传递来训练 hmm？（参见 realSeuqences 行的评论）

Q2：在语音识别中，有时我们需要通过重复同一个词让我们说 10 次来训练系统。这是否意味着它用这 10 个样本训练了一个 hmm？如果是，那么如何用相同声音的不同样本训练一个 hmm。或者是 10 个单独训练的 hmm 但标有那个词？

Q3：如何在声音识别方面比较两个hmm模型。使用 viterbi 或 Kullback Leibler 距离会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T06:01:30.333

> Q1：mfcc 数据应该以什么格式传递来训练 hmm？（参见 realSeuqences 行的评论）

MFCC 数据必须表示为：

```
List<? extends List<ObservationVector>> sequences 
```

这是一个数据序列列表。每个序列对应一个词样本，是一个向量列表，每个向量代表一个帧，包含 13 个 MFCC 值。

> Q2：在语音识别中，有时我们需要通过重复同一个词让我们说 10 次来训练系统。这是否意味着它用这 10 个样本训练了一个 hmm？

输入数据是每个单词的序列列表。这个列表是一起处理的。

> 如果是，那么如何用相同声音的不同样本训练一个 hmm。或者是 10 个单独训练的 hmm 但标有那个词？

这是一个HMM。hmm 训练算法适用于每个单词的多个样本。它实际上需要相当多的样本，超过 10 个。

> Q3：如何在声音识别方面比较两个hmm模型。使用 viterbi 或 Kullback Leibler 距离会更好吗？

这里的“比较”是什么意思还不是很清楚。您是否希望一个 HMM 的状态比另一个少，或者是什么。你想用什么属性来比较。答案取决于此。

并且，需要注意的是，语音识别 HMM 训练有一些特定的（如何选择状态数，使用哪些特征，如何初始化 HMM）。出于这个原因，为了获得最佳性能，最好使用像 CMUSphinx ( [http://cmusphinx.sourceforge.net](http://cmusphinx.sourceforge.net) ) 这样的专用工具包，而不是通用工具包。

# selenium - 如何使用 selenium 删除文本字段中的默认值？

> ID：10799794
> 
> 赞同：25
> 
> 时间：2012-05-29T13:05:51.217
> 
> 标签：selenium, automation, selenium-rc

我想删除文本框的默认值以输入新值，但我不知道该怎么做。

我当时想使用`CTRL`+`a`然后`Delete`但我不知道该怎么做。

我什至使用了 WebDriver 的命令`driver.findElement("locator").clear();`。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-29T13:18:53.223

代码有帮助吗？因为您正在编写的代码应该这样做：

```
driver.findElement("locator").clear(); 
```

如果它没有帮助，那么试试这个：

```
WebElement toClear = driver.findElement("locator");
toClear.sendKeys(Keys.CONTROL + "a");
toClear.sendKeys(Keys.DELETE); 
```

也许你将不得不对`Keys.CONTROL + "a"`CharSequence 进行一些转换，但第一种方法应该会产生魔力

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-20T18:40:07.360

对于页面对象模型 -

```
 @FindBy(xpath="//foo")
   public WebElement textBox; 
```

现在在你的功能中

```
 public void clearExistingText(String newText){
    textBox.clear();
    textBox.sendKeys(newText);
  } 
```

对于一般的硒架构 -

```
driver.findElement(By.xpath("//yourxpath")).clear();
driver.findElement(By.xpath("//yourxpath")).sendKeys("newText"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T15:25:11.000

如果您正在寻找 Selenium RC 的解决方案，您可以简单地使用

```
// assuming 'selenium' is a healthy Selenium instance
selenium.type("someLocator", ""); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-23T13:54:07.113

您可以使用下面的代码。它选择字段中预先存在的值并用新值覆盖它。

```
driver.findElement(By.xpath("*enter your xpath here*")).sendKeys(Keys.chord(Keys.CONTROL, "a"),*enter the new value here*); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-15T06:46:36.153

`driver.findElement(locator).clear()`- 此命令适用于所有情况

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-13T17:09:56.097

`clear()`对我不起作用。但这确实：

```
input.sendKeys(Keys.CONTROL, Keys.chord("a")); //select all text in textbox
input.sendKeys(Keys.BACK_SPACE); //delete it
input.sendKeys("new text"); //enter new text 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-04-27T04:03:25.487

以下函数将使用 PromiseWhile 将输入的字符一一删除，直到输入字段为空

```
driver.clearKeys = function(element, value){
  return element.getAttribute('value').then(function(val) {
    if (val.length > 0) {
      return new Promise(function(resolve, reject) {
        var len;
        len = val.length;
        return promiseWhile(function() { 
          return 0 < len;
        }, function() {
          return new Promise(function(resolve, reject) {
            len--;
            return element.sendKeys(webdriver.Key.BACK_SPACE).then(function()              {
              return resolve(true);
            });
          });
        }).then(function() {
          return resolve(true);
        });
      });
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-26T10:06:25.770

这对我有用：

```
driver.findElement(yourElement).clear();
driver.findElement(yourelement).sendKeys(""); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-09-06T09:20:06.780

.clear() 可用于清除文本

```
 (locator).clear(); 
```

对定位器使用 clear 会删除该精确定位器中的所有值。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-25T08:31:25.510

在软件测试服务中，这可以通过多种方式实现，上面显示的一些选项如下所示。

*   使用 java 脚本

driver.executeScript("document.getElementByXpath('element').setAttribute('value', 'abc')");

使用动作类 Actions actions = new Actions(driver);

actions.click(driver.findElement(element) .keyDown(Keys.CONTROL).sendKeys("a").keyUp(Keys.CONTROL).sendKeys(Keys.BACK_SPACE).build().perform());

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-01T21:54:40.447

```
actions = ActionChains(driver)
ak = driver.find_element_by_id('blogname')
actions.move_to_element(ak)
actions.click()
actions.key_down(Keys.CONTROL).send_keys('a').key_down(Keys.DELETE)
actions.perform() 
```

# iphone - xcode 应用程序图标不再应用

> ID：10799798
> 
> 赞同：1
> 
> 时间：2012-05-29T13:06:11.093
> 
> 标签：iphone, objective-c, ios, xcode

几个月以来，我一直在测试和开发我的应用程序，现在，应用在设备上的应用程序图标与目标摘要上设置的图标不对应。我试图将其删除并重新附加，但没有成功！应用程序图标出现在设备上，作为启动屏幕的一小部分！为什么？如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:03:40.787

确保 info.plist 中“Icon Files”键下的文件名与您的应用程序图标文件相同。您可以通过选择目标然后选择“信息”选项卡来查看 info.plist。

# javascript - 如何“操纵”谷歌机器人使用动态内容加载？

> ID：10799799
> 
> 赞同：0
> 
> 时间：2012-05-29T13:06:13.460
> 
> 标签：javascript, ajax, seo, googlebot

据我所知，如果您在您的网站中使用 AJAX 或 javascript 链接，它会伤害 SEO，因为 google bot 无法抓取您的网站，基本上它喜欢锚标签。

因此，在您的网站中避免使用 AJAX 或 Flash 是一种普遍的说法，尽管有人说 google bot 知道读取 javascript 链接。

现在我相信以某种方式操纵 google bot 是可能的，当我操纵我的意思时**并不**意味着任何非法或黑帽，我只是想 Ajaxise 我的网站。

我的问题分为2个：

*   是否可以用 1 个版本的网站“展示”google bot，而用另一个版本“展示”用户？我在[这里](https://stackoverflow.com/questions/8821256/how-to-tell-google-bot-to-skip-part-of-html)读到base64 编码您的内容可能会使机器人感到困惑，但这对我来说似乎是一个糟糕的解决方案。

同样，据我所知，您可以添加到robot.txt 文件的可能性只是没有索引，也没有跟随。

*   是否可以将 HTML 输出为带有锚链接的常规 unajaxed 网站，并在窗口完成加载后，然后编辑锚标签以执行动态内容加载？我的意思是我知道这**是**可能的，但谷歌机器人会在该事件之后还是之前扫描？在同样的重量下，是否有可能阻止谷歌机器人的那部分 Javascript 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:10:44.460

你不能操纵搜索引擎机器人来做他们通常不会做的事情。你要么在他们的能力范围内工作，要么不在。尽管搜索引擎在处理 JavaScript 作为一般规则方面越来越好，但在大多数情况下，动态内容并不是它们能够很好地处理或根本无法处理的东西。

至于让搜索引擎读取由 JavaScript 创建的动态内容，您有两种选择：

1.  从一开始就以正确的方式构建站点并使用[渐进增强](http://en.wikipedia.org/wiki/Progressive_enhancement)。您的网站应该在没有启用 JavaScript 的情况下工作。事实上，它应该首先以这种方式构建。然后，您可以返回并添加 JavaScript，以增强启用 JavaScript 的用户的体验。这样，*每个人都*可以访问您的内容。

2.  [使用 Google 的 Crawlable Ajax 标准](http://googlewebmastercentral.blogspot.com/2009/10/proposal-for-making-ajax-crawlable.html)。这将允许 Google 抓取通过 Ajax 生成的内容。请记住，这仅适用于 Google，而没有启用 JavaScript 的其他搜索引擎和用户会被排除在外。[所以这是个坏主意](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:11:36.133

[使用Progressive Enhancement](http://en.wikipedia.org/wiki/Progressive_enhancement)和[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)构建您的网站。

当您做重要的 Ajax 工作时，请使用[历史 API](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)。

然后你就有了所有东西的真实网址，谷歌就不会有问题了。

# javascript - jQuery 重新填充选项列表中的选定项目

> ID：10799803
> 
> 赞同：0
> 
> 时间：2012-05-29T13:06:23.303
> 
> 标签：javascript, jquery

一直在尝试解决这个问题，但没有运气。

```
jQuery("#choosenCause option:selected").removeAttr("selected","selected");

jQuery('#choosenCause option[value="'+json.causeID+'"]').attr("selected",true); 
```

我正在使用上述内容，它添加`selected="selected"`到正确的元素，但不会更改用户看到的选定元素。

完整的 JS 在这里 - [http://inspire.simplyfundraising.co.uk/wp-content/themes/inspire/assets/js/promojs.js](http://inspire.simplyfundraising.co.uk/wp-content/themes/inspire/assets/js/promojs.js)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:10:36.540

要设置`select`元素的选定选项，请使用`val()`：

```
jQuery('#choosenCause').val(json.causeID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:13:46.227

在第一个字符串中，您需要更正代码 -`jQuery("#choosenCause option:selected").removeAttr("selected");` 第二个字符串工作正常，如我所见

# javascript - 退格在文本区域中不起作用

> ID：10799805
> 
> 赞同：0
> 
> 时间：2012-05-29T13:06:25.440
> 
> 标签：javascript, html

我正在使用 textarea 来收集一些数据。我遇到的问题是退格按钮不起作用。我可以选择所有文本并使用删除按钮删除文本，但我不能使用退格按钮。有人对退格键不起作用的原因有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-06-26T15:04:45.057

面临同样的问题。

Шt 事实证明，ExtJs 4 中有一个带有 Backspace 按钮的错误：ExtJs App 将 Backspace 传播到浏览器，用户将被重定向到先前打开的页面。

这是一些详细信息[阻止退格键转到您的 extjs 应用程序中的上一页](http://www.learnsomethings.com/2012/05/04/stop-the-backspace-key-from-going-to-the-previous-page-in-your-extjs-app/)

解决此问题的最佳方法是在除编辑控件之外的所有位置禁用退格按钮。

所以几十年前有人将这段代码添加到我们的项目中：

```
Ext.EventManager.on(window, 'keydown', function(e, t) {
    if (e.getKey() == e.BACKSPACE && 
        (!/^input$/i.test(t.tagName) || t.disabled || t.readOnly)) {
        e.stopEvent();
    }
}); 
```

如您所见，Backspace 仅允许在**输入**标签内。我敢打赌，你的情况完全一样。修复也很明显：

```
Ext.EventManager.on(window, 'keydown', function(e, t) {
    if (e.getKey() == e.BACKSPACE && 
        (!/^input|textarea$/i.test(t.tagName) || t.disabled || t.readOnly)) {
        e.stopEvent();
    }
}); 
```

# r - 从数据集中对多个数据点进行子集化

> ID：10799814
> 
> 赞同：1
> 
> 时间：2012-05-29T13:06:50.317
> 
> 标签：r, subset

我正在尝试从一个巨大的数据集中提取一个子集。以下代码用于从数据集中提取单个数据点。

```
 write.csv(subset(project, grepl("^UN1705.* ", Trial_group) ), file="kiki.csv") 
```

如何告诉 R 我要提取多个数据点？我尝试了逗号、分号等，但没有任何效果：

```
 write.csv(subset(project, grepl("^UN1705, UN1706.* ", Trial_group) ), file="kiki.csv") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:18:30.493

或者您可以将这些查询组合到一个正则表达式中

```
grepl("^UN1705.* |^UN1706.* ", Trial_group) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:12:06.843

要组合逻辑向量，请使用`&`and `|`, 分别表示 AND 和 OR。

```
grepl("^UN1705.* ", Trial_group) & grepl("^UN1706.* ", Trial_group) 
```

**只是为了好玩，基准！**

```
Trial_group <- sample(letters,10^5,replace=TRUE)
library(microbenchmark)
microbenchmark(
  grepl("^b.*|^c.*", Trial_group) ,
  grepl("^b.*", Trial_group) | grepl("^c.*", Trial_group)
)

Unit: milliseconds
                                                     expr      min       lq   median       uq      max
1                         grepl("^b.*|^c.*", Trial_group) 15.25969 15.73327 15.95457 16.37784 18.89444
2 grepl("^b.*", Trial_group) | grepl("^c.*", Trial_group) 27.39136 28.18150 28.65988 29.47160 49.31859 
```

看起来在正则表达式中执行逻辑 OR 更快。

# vim - VIM 获取 E488 尾随字符

> ID：10799817
> 
> 赞同：2
> 
> 时间：2012-05-29T13:06:58.753
> 
> 标签：vim

我尝试使用添加作者和其他一些信息`F4`。

但是当我打开 *.c 或其他文件（不是 *.sh），并按下`F4`时，它会显示 E488 尾随字符。

此外，当尝试更新信息时，它符合 E20 Mark not set。

还有更多问题，当我尝试使用 `let suff = expand("%:e")`获取 java 文件扩展名时，`if suff == "java"`发现 suff 不等于“java”，为什么？

这是我的 vim 配置：

```
" Add Author Information
map <F4> :call TitleDet()<CR>'s

function AddTitle()
    call append(0,"/*========================================")
    call append(1,"#")
    call append(2,"# Author: xxx ")
    call append(3,"#")
    call append(4,"# Email: xxx@gmail.com")
    call append(5,"#")
    call append(6,"# Last modified: ".strftime("%Y-%m-%d %H:%M"))
    call append(7,"#")
    call append(8,"# Filename: ".expand("%:t"))
    call append(9,"#")
    call append(10,"# Description: ")
    call append(11,"#")
    call append(12,"======================================*/")
    call append(13,"");
    echohl WarningMsg | echo "Successful in adding the copyright." | echohl None
endfunction

function AddShellTitle()
    call append(0,"#=========================")
    call append(1,"#")
    call append(2,"# Author: xxx")
    call append(3,"#")
    call append(4,"# Email: xxx")
    call append(5,"#")
    call append(6,"# Last modified: ".strftime("%Y-%m-%d %H:%M"))
    call append(7,"#")
    call append(8,"# Filename: ".expand("%:t"))
    call append(9,"#")
    call append(10,"# Description: ")
    call append(11,"#")
    call append(12,"#========================")
    echohl WarningMsg | echo "Successful in adding the copyright." | echohl None
endfunction

function UpdateTitle()
    normal m'
    execute '/# *Last modified:/s@:.*$@\=strftime(": %Y-%m-%d %H:%M")@'
    normal ''
    normal mk
    execute '/# *Filename:/s@:.*$@\=": ".expand("%:t")@'
    execute "noh"
    normal 'k
    echohl WarningMsg | echo "Successful in updating the copy right." | echohl None
endfunction

function UpdateShellTitle()
    normal m'
    execute '/" *Last modified:/s@:.*$@\=strftime(": %Y-%m-%d %H:%M")@'
    normal ''
    normal mk
    execute '/" *Filename:/s@:.*$@\=": ".expand("%:t")@'
    execute "noh"
    normal 'k
    echohl WarningMsg | echo "Successful in updating the copy right." | echohl None
endfunction

function TitleDet()
    let n=1
    let suff = expand("%:e")
    while n < 10
        let line = getline(n)
        if suff != "sh"
            if line =~ '^\#\s*\S*Last\smodified:\S*.*$'
                call UpdateTitle()
                return
            endif
        else
            if line =~ '^\#\s*\S*Last\smodified:\S*.*$'
                call UpdateShellTitle()
                return
            endif
        endif
        let n = n + 1
    endwhile
    if suff != "sh"
        call AddTitle()
    else
        call AddShellTitle()
    endif
endfunction 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T22:35:25.570

删除`;`此行的尾随：

```
call append(13,""); 
```

# node.js - 在 Linux 服务器上的何处部署 node.js 应用程序？

> ID：10799824
> 
> 赞同：31
> 
> 时间：2012-05-29T13:07:33.360
> 
> 标签：node.js, deployment

我在具有不同端口和前面的代理的 Linux 服务器上运行 4 个单独的 Node.js 应用程序。

因为我（现在）是服务器中唯一的用户，所以我将应用程序放在哪里以及如何运行它们并不重要。目前，我的应用程序位于我的主目录（`~/app1/`、、`~/app2/`等）下。

所以我的问题是：我应该将应用程序放在哪里，以便可以在多个用户之间共享？有没有类似的标准地方`/var/www`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-29T14:22:00.850

我使用[https://github.com/visionmedia/deploy](https://github.com/visionmedia/deploy)来部署我的应用程序。它将创建一个`/var/www/productname`目录。在该目录中，您有源、当前和共享。共享目录有`log`和`pid`文件。

我发现了一个很好的目录结构，所以这就是我用于所有项目的目录结构。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T23:31:45.557

除了 Node.js 之外，我还在同一台服务器上运行 Apache，所以我不太喜欢将 Apache 和 Node.js 的应用程序放在同一个目录中。我的 Apache 托管应用程序位于传统的 /var/www/ 路径中，我将 Node.JS 应用程序放在 /var/node/ 下。这是由于我在 Apache（动态虚拟主机）和 Node.JS 中都设置了一些自动化。

可以在此处找到有关我的设置和自动化代理和 Apache 部署的更多信息：[如何在 node-http-proxy 旁边使用 vhost？](https://stackoverflow.com/questions/9368794/how-to-use-vhosts-alongside-node-http-proxy/9370080#9370080)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-18T15:43:34.710

如果您在 Linux 服务器上为 Node JS 应用程序使用 AWS Elastic bean 堆栈，那么它应该在`/var/app/current/`目录中

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-13T02:25:57.490

遵循此处的答案指南 - [https://serverfault.com/a/96420](https://serverfault.com/a/96420) 表明 /opt/node 可能是一个更好的地方，因为它是一个为用户添加的程序文件保留的包罗万象的目录

# javascript - 在 Ajax 中保存动态 pdf

> ID：10799825
> 
> 赞同：0
> 
> 时间：2012-05-29T13:07:38.733
> 
> 标签：javascript, ajax, pdf

我有很多动态 pdf，我想知道是否可以在编辑后将它们保存在 ajax 中。

我已经搜索了一个库来执行此操作，但我只找到了一些可以显示/查看但不能编辑动态 pdf 的内容。

谢谢

# c# - 从具有行号的表中选择到 c# 数据表给出错误

> ID：10799832
> 
> 赞同：1
> 
> 时间：2012-05-29T13:07:54.380
> 
> 标签：c#, mysql, select, datatable

我使用**MySQL** 我有一个 mysql 表。
我想选择所有带有行号的记录。
为此，我使用这个 sql 命令。

```
SELECT @row := @row + 1 as row, t.* FROM t_persons t, (SELECT @row := 0) r 
```

但是当我尝试运行命令并将数据加载到数据表中时，如下所示

```
DataTable dt = new DataTable();
command.CommandText = sql;
adapter.SelectCommand = command;
adapter.Fill(dt); 
```

它给出了一个错误，例如**在命令执行期间遇到的致命错误。**
但是当我在 phpmyadmin 中尝试这个命令时它工作正常。那么问题是什么。以及如何解决。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:34:14.687

这实际上是 C# 错误，而不是 MySQL 错误。C# 看到 @ 并假设您要使用参数化查询。

添加

`;Allow User Variables=True`

到您的连接字符串将修复它。

在此处找到[如何在 .NET MySqlCommand 中使用 MySql 用户定义变量？](https://stackoverflow.com/questions/5524632/how-can-i-use-a-mysql-user-defined-variable-in-a-net-mysqlcommand)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T13:14:47.087

It looks like completely valid MySQL implementation of MySQL Variables within a query. You pre-declare them with your select @row := 0 as an "r" alias. It think the problem is that you are calling the final column name "row" which may be reserved. Just for grins, change to:

@row := @row + 1 as myRow

OR... change your variable from @row to @varRow (variable Row)... or a combination of both...

@varRow := @varRow +1 as myRow

I have no idea who down-voted the answer, but what you are doing is quite normal with MySQL, and I've done it MANY TIMES as can be seen through MANY of my posted answers here at s/o.
I would then try to retrieve the columns by the table FIRST, then the @vars columns... don't know if its something within the engine to get a valid record entry before trying to write the @var...

```
SELECT 
      t.*,
      @varRow := @varRow + 1 as myRow
   FROM 
      t_persons t, 
      (SELECT @varRow := 0) r 
```

# prolog - 序言中的否定

> ID：10799834
> 
> 赞同：2
> 
> 时间：2012-05-29T13:08:09.387
> 
> 标签：prolog

好吧，我只是想知道为什么它会起作用，prolog 松散变量在哪里。

```
?- \+ \+ member(X,[a]),X=b.
X=b. 
```

其中 X = a。自动消失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:16:57.687

`\+/1`不是逻辑意义上的“不”，而是通过“否定为失败”来实现的。这意味着，如果失败则`\+ Goal`成功。`Goal`

认为`\+/1`被实施为：

```
\+(Goal) :- Goal -> fail ; true. 
```

如您所见，在这两种情况下，都不能`Goal`绑定任何变量。在“if”分支中，任何绑定都将通过回溯撤消，而在“else”分支中，无论如何都不会绑定任何变量。

在您的示例中，`member(X,[a]`通过绑定`X`到`a`. 这将`\+ member(X,[a])`失败，因此`\+\+ member(X,[a])`由于失败而成功。由于中间失败，`X`将不会被绑定`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:17:53.780

prolog 中的`(\+)/1`运算符*应该*代表不可证明，但对应于较旧的`(not)/1`运算符。所以基本上你在这里做的是：

```
not not member(X, [a]), X = b. 
```

**编辑**

如果`X`是一个包含 的列表`a`，则双重否定的结果与没有任何否定`member(X, [a])`的结果相同。，只是绑定到列表。`member(X, [a])``X = b``b``X`

[这里还有一个我收藏的链接](http://www.cse.unsw.edu.au/~billw/prologdict.html)，其中列出了所有 Prolog 谓词及其含义。

希望这可以帮助

# ajax - AJAX XML 不适用于带有 Web-Works 或 Phonegap 的 BlackBerry

> ID：10799838
> 
> 赞同：4
> 
> 时间：2012-05-29T13:08:20.683
> 
> 标签：ajax, jquery, blackberry, cordova, blackberry-webworks

我已经构建了一个应用程序，它从网络上的外部 xml 文件加载统计信息。

它在网络浏览器中运行良好。当我将它与 Android 的 PhoneGap 打包时，它也可以正常工作。*也适用于 BlackBerry Playbook。*

但是，当我为 BlackBerry 打包时它不起作用。我已经尝试过 WebWorks 命令行工具和 PhoneGap。

* * *

**当我使用 WebWorks 打包并在模拟器上运行时**

Web Inspector 上的控制台给了我错误

“*加载资源失败：服务器响应状态为 500（请求资源时出错。）* ”

**当我使用 Phonegap 打包并在模拟器上运行时**

当我使用 PhoneGap 而不是 WebWorks 打包时，我会在警报中弹出以下错误...

```
gap : ["Network Status", "getConnectionInfo","Network Status0",true]

gap: ["Device","getDeviceInfo","Device1",true]

gap_init:

gap_callbackServer:

gap_poll: 
```

* * *

[应用程序的实时版本](http://ontariosheep.org/test/)（未编译）

[在 WebWorks 或 Phonegap 中运行的 ZIP 文件](http://dl.dropbox.com/u/32351813/statsApp.zip)

* * *

[类似的未回答的问题](https://stackoverflow.com/q/5585407/773263)。

* * *

[黑莓模拟器中的问题的 Youtube 视频](http://youtu.be/_XkTZOQ-ugY)

* * *

**我尝试过的事情**

我已经添加到我的配置文件中。

```
<access subdomains="false" uri="*"/> 
```

我添加了[phonegap 建议的 $.support.cors](http://jquerymobile.com/test/docs/pages/phonegap.html)函数。

```
$( document ).bind( "mobileinit", function() {
    // Make your jQuery Mobile framework configuration changes here!
    $.mobile.allowCrossDomainPages = true;
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T19:09:00.097

您的模拟器和 WebWorks SDK 是最新的吗？

我已经在带有 2.0.1.358 的实时 PlayBook 和 2.0.0.7971 的模拟器中进行了测试，没有看到任何问题。

我用 2.2.0.15 WebWorks for PlayBook SDK 打包，我唯一改变的是 config.xml 中的 id，它在带点的打包程序中不被接受。

* * *

好的，现在我明白问题所在了。

它非常晦涩难懂，但 Java 智能手机模拟程序已设置为与另一个名为 MDS 模拟器的旧模拟器工具一起使用。对于大多数事情来说，这并不是真正必要的，但它提供的网络类似于设备在企业 BES 环境中看到的网络。即使 MDS 模拟器没有运行，模拟器也相信它一直都有所谓的“MDS”连接。

对于 WebWorks 应用程序，如果您使用不带`<rim:connection>`标签的默认 config.xml 文件（这在大多数情况下完全可以），它会将 MDS 优先于 TCP 选项。这是一个问题，因为 sim 认为它有一个 MDS 连接，而实际上它没有，并且连接尝试最终失败。

如果您将以下代码添加到您的 config.xml 中，它将降低 MDS 的优先级并使其正常工作。

```
<rim:connection timeout="60000">
    <id>BIS-B</id>
    <id>TCP_WIFI</id>
    <id>TCP_CELLULAR</id>
    <id>MDS</id>
    <id>WAP2</id>
    <id>WAP</id>
</rim:connection> 
```

* * *

最后一个关键项目 - 您需要设置模拟器以使用模拟的 wifi 网络。单击主屏幕的顶部横幅（通过无线指示灯），然后打开 Wifi，然后单击选项和状态中的 Wi-Fi 网络。然后单击默认 WLAN 网络并通过相关步骤进行关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T16:28:25.087

我认为这与您的`webworks.js`. 我不确定你从哪里得到这个图书馆，但它似乎有点旧。

WebWorks 应该自动公开您在配置文件中请求的 javascript API（即：），`window.blackberry.*`而无需像您必须那样发出请求`http://localhost:8472/blackberry/extensions/get`。

由于您只是在进行 ajax 调用，因此我将放弃所有这些并专注于调试您的 ajax 代码。

PS：Phonegap 在 WebWorks 之上工作，因此进一步抽象事物不太可能解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T12:46:55.110

它看起来像跨域资源共享问题。您可能必须使用 CORS

在服务器端启用它： http: [//enable-cors.org/](http://enable-cors.org/)

在您的 javascript 中，使用它来请求远程内容：

```
// Create the XHR object.
function createCORSRequest(method, url) {
var xhr = new XMLHttpRequest();
if ("withCredentials" in xhr) {
    // XHR for Chrome/Safari/Firefox.
    xhr.open(method, url, true);
} else if (typeof XDomainRequest != "undefined") {
    // XDomainRequest for IE.
    xhr = new XDomainRequest();
    xhr.open(method, url);
} else {
    // CORS not supported.
    xhr = null;
}
return xhr;
}

// Make the actual CORS request.
function makeCorsRequest() {

var url = "http://www.example.com/";

var xhr = createCORSRequest('GET', url);

if (!xhr) {
    alert('CORS not supported');
    return;
}

// Response handlers.
xhr.onload = function() {
    var text = xhr.responseText;
    // Do something with returned text data
};

xhr.onerror = function() {
    alert('Woops, there was an error making the request.');
};

xhr.send();
} 
```

来自： http: [//supportforums.blackberry.com/t5/Web-and-WebWorks-Development/AJAX-from-external-website-not-working/mp/1736733#M24128](http://supportforums.blackberry.com/t5/Web-and-WebWorks-Development/AJAX-from-external-website-not-working/m-p/1736733#M24128)

# android - 在活动的特定区域使用媒体控制器播放视频

> ID：10799845
> 
> 赞同：0
> 
> 时间：2012-05-29T13:08:38.550
> 
> 标签：android, media, tablet, android-4.0-ice-cream-sandwich, mediacontroller

![一只忙碌的猫](../Images/88bf47a197d2828afeabdfb2a5dfbd42.png)
我想制作像附加图像一样的布局，但问题是当我创建媒体控制器时，它不会出现在视频播放器下方，而是显示在活动的中心底部。我试图在 xml 文件中制作媒体控制器，但它也不起作用，也试过这个[https://stackoverflow.com/a/10315093/1065357](https://stackoverflow.com/a/10315093/1065357)但它也不起作用。我正在使用 android 4 平板电脑版本。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:47:56.687

您可以制作自定义媒体控制面板，使用底部面板，添加播放、暂停、停止等按钮。使用 .将底部面板布局添加到您想要的位置`layout gravity`。单击您的自定义播放、暂停、停止、前进等按钮，您可以调用`mediaPlayer.play()`等`mediaPlayer.pause()` 。

为此，您将需要实现`SurfaceHolder.callback` 如下接口：

```
public class VideoViewActivity extends Activity implements SurfaceHolder.Callback 
{

public boolean canPause() 
{
// TODO Auto-generated method stub

    Log.e("paused ","called");
    return true;
}

public boolean canSeekBackward() {
    // TODO Auto-generated method stub
    return true;
}

public boolean canSeekForward() {
    // TODO Auto-generated method stub
    return true;
}

public int getBufferPercentage()
{
    // TODO Auto-generated method stu
    return 0;
}

public int getCurrentPosition() 
{
    // TODO Auto-generated method stub

    return mMediaPlayer.getCurrentPosition();

}

public int getDuration() 
{
    // TODO Auto-generated method stub
    return mMediaPlayer.getDuration();
}

public boolean isPlaying() 
    {
    // TODO Auto-generated method stub
    return mMediaPlayer.isPlaying(); 
}

public void pause() {
    // TODO Auto-generated method stub
    mMediaPlayer.pause();
}

public void seekTo(int pos) {
    // TODO Auto-generated method stub

    mMediaPlayer.seekTo(pos);

}

public void start()
{
    // TODO Auto-generated method stub
    mMediaPlayer.start();
} 
```

}

此接口的实现将使您能够访问媒体控制功能（播放、暂停、搜索等）。

表面保持器可以得到 `SurfaceHolder holder= surfaceView.getHolder();`然后`mediaPlayer.setDisplay(holder)`

您将在 videoViewActivity 的布局中声明您的 surfaceView 标签。表面支架是将显示视频的视频流的组件。

我希望这将有所帮助。

# android - 有没有人通过 https://github.com/johannilsson/android-actionbar 中给出的示例？

> ID：10799854
> 
> 赞同：0
> 
> 时间：2012-05-29T13:09:26.363
> 
> 标签：android, android-layout

使用此示例后，我遇到了一些问题。事实上这是一个非常好的创建动作栏的源代码。

我在我的应用程序中使用了它。但是当我运行我的应用程序时，我的应用程序安装在模拟器上，但我的应用程序图标没有显示在模拟器主屏幕上。

我想我在我的 AndroidManifest 文件中遗漏了一些东西。下面是我的 AndroidManifest 文件的代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.keepintouch.android.widget.actionbar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="14"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <!-- 
        <activity android:name="com.keepintouch.android.KeepintouchActivity"
            android:label="@string/app_name" android:theme="@android:style/Theme.Light">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
         -->
    </application>

</manifest> 
```

在我的应用程序中，我想创建一个活动类，但我无法判断我应该在哪个包中创建我的所有活动文件？我想你可以告诉我我在哪里犯了错误？还请告诉我，我应该如何创建具有操作栏功能的活动文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:22:49.520

保持你的包裹为

```
package="com.keepintouch.android" 
```

并将您的活动注册为

```
<activity android:name=".KeepintouchActivity" 
```

需要在您的布局中添加为

```
 xmlns:app="http://schemas.android.com/apk/res/com.markupartist.android.yourActivty" 
```

# android - 如何使集成条码扫描仪 Android 正常工作

> ID：10799855
> 
> 赞同：0
> 
> 时间：2012-05-29T13:09:26.750
> 
> 标签：android

我目前正在开发一个书签应用程序。所以我使用zxing项目来扫描ISBN，但是我不知道为什么集成扫描仪后它似乎无法正常工作。有时，它可以很好地捕捉条形码，但是当我重复时，它需要很长时间并且得到错误的数字。[与这个应用程序阅读进度](https://play.google.com/store/apps/details?id=com.mobiloucos.bookmark&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5tb2JpbG91Y29zLmJvb2ttYXJrIl0.)比较似乎很奇怪。该应用程序还要求用户从 xzing 下载外部条码扫描仪，它运行良好。我是否以错误的方式集成了条形码扫描仪（我没有使用 zxing 作为库）。

这是我的代码：

```
 public void scan(View view) {
        Intent intent = new Intent("com.google.zxing.client.android.SCAN");
        intent.putExtra("SCAN_MODE", "ISBN");
        startActivityForResult(intent, 0);
    }

    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                String isbn = intent.getStringExtra("SCAN_RESULT");

                Intent i = new Intent(MainActivity.this, ResultActivity.class);

                i.putExtra("isbn", isbn);
                startActivity(i);

            } else if (resultCode == RESULT_CANCELED) {
                Toast.makeText(this, "You messed up", Toast.LENGTH_SHORT).show();
            }
        }
    } 
```

我使用了“QR_CODE_MODE”模式，但它甚至根本不起作用，所以我更改为 ISBN 模式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:17:56.500

sacn模式同时使用QRMODE，1D MODE

```
intent.putExtra("SCAN_MODE","ONE_D_MODE,QR_CODE_MODE"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:20:15.923

zxing 团队发布了一组用于 zxing 意图集成的帮助类，其中包括帮助用户下载外部 zxing 条码扫描器。这可能对你有帮助。

维基在这里：[http ://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

代码在这里：[http ://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/](http://code.google.com/p/zxing/source/browse/trunk/android-integration/src/com/google/zxing/integration/android/)

# seo - 如何解决 url 规范化？

> ID：10799856
> 
> 赞同：0
> 
> 时间：2012-05-29T13:09:29.563
> 
> 标签：seo, canonical-link

url [http://www.example.com/](http://www.example.com/)和[http://www.example.com/index.html](http://www.example.com/index.html)都显示相同的网页。但搜索引擎将它们视为 2 个不同的网址。因此，页面排名存在差异并影响 SEO。

网络搜索后我得到的可能解决方案：

```
1.Use DirectoryIndex index.html in the .htaccess file. 
```

这告诉搜索引擎[http://www.example.com/](http://www.example.com/)和[http://www.example.com/index.html](http://www.example.com/index.html)是相同的。

我面临的问题：.htaccess 文件中的 DirectoryIndex index.html 期望所有子文件夹也有 index.html 文件。前任。如果根目录中有一个文件夹“blog”，其中没有 index.html 文件，则 url “http://www.example.com/blog/”会抛出 index not found 错误。

```
2.using 301 redirect. Redirect http://www.example.com/index.html to http://www.example.com/ 
```

问题：重定向会增加加载时间。这不是一个好习惯。

请建议哪种解决方案更好？我怀疑第一个是否是解决方案。另外，如果我必须重定向，将[http://www.example.com/index.html](http://www.example.com/index.html)重定向到[http://www.example.com/](http://www.example.com/)是否更好，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:14:38.937

只需使用[规范的 URL](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)。这将很容易解决问题。如有必要，您还可以从 index.html 到 / 进行 301 重定向，因为这也可以完成同样的事情。

# asp.net - ASP.Net 详细信息列表“编辑”功能

> ID：10799858
> 
> 赞同：1
> 
> 时间：2012-05-29T13:09:35.703
> 
> 标签：asp.net, visual-studio-2010, visual-studio, asp.net-controls

下午所有，

我习惯使用gridviews，但我第一次使用aa details view。我正在使用带有 VB 代码的 Visual Studio 2010。

我有一个网格视图，它显示数据库表中的项目并使用'ShowSelectButton="true"' 函数使用户能够选择这些单个项目并在详细信息视图中显示完整信息。

以上工作正常。我唯一的问题是我的数据绑定到数据源和关联的数据库。在其中一个列上，我希望用户能够以下拉列表的形式选择一个项目（操作状态和更新 - 未完成、进行中和已完成），然后对其进行更新。

我不太起诉如何完成这个？这是我的详细信息视图代码....

```
 <asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="400px" 
            AutoGenerateRows="False" 
            DataKeyNames="ActionID" DataSourceID="dsDetailsView" 
            AutoGenerateEditButton="True" CssClass="mGrid" PagerStyle-CssClass="pgr" 
            AlternatingRowStyle-CssClass="alt" HorizontalAlign="Center" 
            CellPadding="5" >
       <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
         <Fields>

           <asp:BoundField DataField="AgendaID" HeaderText="Agenda Ref:" 
            SortExpression="AgendaID"  ReadOnly="true">
             <HeaderStyle Font-Bold="True" Font-Names="Ariel" />
           </asp:BoundField>

           <asp:BoundField DataField="ActionID" HeaderText="Action ID:" 
            InsertVisible="False" ReadOnly="True" SortExpression="ActionID" 
            ItemStyle-Width="500px" >
             <HeaderStyle Font-Bold="True" />
             <ItemStyle Width="500px" Font-Bold="True"></ItemStyle>
           </asp:BoundField>

           <asp:BoundField DataField="Action" HeaderText="Action:" 
            SortExpression="Action" ReadOnly="true">
            <HeaderStyle Font-Bold="True" />
           <ItemStyle Wrap="True" />
           </asp:BoundField>

           <asp:BoundField DataField="Owner" HeaderText="Owner:" 
            SortExpression="Owner"  ReadOnly="true">
            <HeaderStyle Font-Bold="True" Wrap="False" />
            <ItemStyle Wrap="False" />
           </asp:BoundField>

           <asp:BoundField DataField="TargetDate" HeaderText="Target Date:" 
            SortExpression="TargetDate"  ReadOnly="true" 
            DataFormatString="{0:dd-MM-yyyy} " >
            <HeaderStyle Font-Bold="True" Wrap="True" />
            <ItemStyle Font-Bold="False" />
           </asp:BoundField>

           <asp:BoundField DataField="DateCreated" HeaderText="Date Created:" 
            SortExpression="DateCreated"  ReadOnly="true" 
            DataFormatString="{0:dd-MM-yyyy} " >
            <HeaderStyle Font-Bold="True" Wrap="False" />
           </asp:BoundField>

          <asp:BoundField DataField="ActionUpdate" HeaderText="Action Update:" 
            SortExpression="ActionUpdate" 
            NullDisplayText="Select 'Edit' to update Action..."  >
           <HeaderStyle Font-Bold="True" Wrap="False" />
          </asp:BoundField>

          <asp:BoundField DataField="ActionStatus" HeaderText="Action Status:" 
            SortExpression="ActionStatus"  ReadOnly="true" >
          <HeaderStyle Font-Bold="True" Wrap="False" />
          </asp:BoundField>

          <asp:BoundField DataField="ActionStatusID" HeaderText="Action Status ID:" 
            SortExpression="ActionStatusID"  ReadOnly="true" Visible="true">
            <HeaderStyle Font-Bold="True" Wrap="False" />
          </asp:BoundField>

     </Fields>
       <PagerStyle CssClass="pgr" />
</asp:DetailsView> 
```

任何提前的帮助都是非常重要的。

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:37:16.177

在 TemplateField 中添加 ddl，然后在后面的代码中访问它：

```
 <asp:TemplateField HeaderText="Action Status list:">
            <ItemTemplate>
                <asp:DropDownList runat="server" ID="ddl_ActionList" DataSource="ActionListDataSource" DataValueField="ActionStatusID"
                    DataTextField="ActionStatus">
                </asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField> 
```

在后面的代码中使用 find 方法来获取和设置您的 ddl 选择值：

```
 Protected Sub DetailsView1_DataBound(ByVal sender As Object, ByVal e As System.EventArgs) Handles DetailsView1.DataBound
    Dim ActionLst As DropDownList = DetailsView1.FindControl("ddl_ActionList")
    'ActionLst.SelectedValue =  set the selected value here
End Sub

Protected Sub DetailsView1_ItemUpdating(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.DetailsViewUpdateEventArgs) Handles DetailsView1.ItemUpdating
    Dim ActionLst As DropDownList = DetailsView1.FindControl("ddl_ActionList")
    'ActionLst.SelectedValue =  get the selected value here
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:50:25.867

您想使用`Templatefield`, 而不是`BoundField`"ActionStatus" 来完成此操作。

您可以使用设计器将字段转换为 a `TemplateField`，如下所示：

*   展开你角落里的灰色箭头`DetailsView`（我不记得它叫什么了），然后
*   点击“编辑字段”。
*   在“选定字段”框中，单击要更改的字段（在您的情况下为“ActionStatus”）。
*   在窗口的右下方，单击“将此字段转换为模板字段”链接

然后您需要转到您的标记（源视图）并更改该`<EditItemTemplate>`部分，使其`DropDownList`内部有一个。像这样：

```
<asp:TemplateField HeaderText="ActionStatus" 
    SortExpression="ActionStatus">
    <EditItemTemplate>
        <asp:DropdownList ID="actionStatusDDL" runat="server">
            <asp:ListItem Text="Outstanding" Value="Outstanding"></asp:ListItem>
            <asp:ListItem Text="In Progress" Value="In Progress"></asp:ListItem>
            <asp:ListItem Text="Completed" Value="Completed"></asp:ListItem>
        </asp:DropdownList>
    </EditItemTemplate> 
```

您还需要确保您的 DataSource 配置了“UpdateCommand”，以便更新正常工作。

# php - 带有文件目录路径的完整 URL

> ID：10799860
> 
> 赞同：0
> 
> 时间：2012-05-29T13:09:39.937
> 
> 标签：php, apache, model-view-controller, path

## 我自己正在寻找一种方法来做到这一点，并想出了这个方法：

```
<?php
$script_name = $_SERVER['SCRIPT_NAME']; // to get www.myurl.com

// create a constant out of the server_name
define('HTTP_HOST', $_SERVER['HTTP_HOST'].'/');

$path_parts = pathinfo($script_name); // returns an array with path names

// get the filename with the extension
$file_name = $path_parts['filename'] . '.' . $path_parts['extension'];
// get the directory which the script lives in
$dir = rtrim($script_name, $file_name);
// trim of the left slash since it was added on the end of the HTTP_HOST constant
$dir = ltrim($dir, '/');
// store the server name and directory paths in a variable
$dir = HTTP_HOST.$dir;

echo $dir; // will return f.ex. "www.myurl.com/dir1/dir2/dir3/" 
```

假设我有一个名为“testfile.php”的文件，它位于“”的目录“dir3”下`www.myurl.com/dir1/dir2/dir3`，因此完整的 url 将是“ `www.myurl.com/dir1/dir2/dir3/testfile.php`”。

如果我在我的路径文件中为 URL 加上完整目录路径声明一个常量，或者我在我的索引文件 f.ex 中包含的一些配置文件，并在 testfile.php 中调用该常量 end echo 它。它会回显“ `www.myurl.com/dir1/dir2/dir3/`”。

### 我的问题是，这种方法是否可以接受，或者是否有更好的方法来实现具有给定文件的目录路径的 URL？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:16:21.620

众所周知，完美主义是很难实现的。这意味着通常有更好的方法来实现目标。

查看您问题中的代码，我很确定，有一种更好的方法可以实现您正在寻找的东西。所以回到你的问题：

> 我的问题是，这种方法是否可以接受，或者是否有更好的方法来实现具有给定文件的目录路径的 URL？

**答案是肯定的**。例如，更好的方法是将实现封装到它自己的对象中，例如文件映射器。这将允许您始终使用可以随时间变化的最佳方式。

您至少应该从一个函数开始，该函数封装了将文件名映射到 web 目录的逻辑。还要利用所谓的输入，并在代码顶部处理它们：

```
function get_webdirectory_of_file($file)
{
   # input (and validation)

   $host = $_SERVER['HTTP_HOST'];
   $docroot = $_SERVER['DOCUMENT_ROOT'];

   if (!is_file($file) {
       throw new Exception('Not a file');
   }

   if (!$host) {
       throw new Exception('No HTTP_HOST found.');
   }

   if (!$docroot ) {
       throw new Exception('No DOCUMENT_ROOT found.');
   }  

   $len = strlen($docroot);

   if (substr($file, 0, $len) !== $docroot) {
       throw new Exception('Unable to map file out of document root to document root');
   }

   # processing

   $dir = substr(dirname($file), $len);

   # output 

   return $host . $dir;
} 
```

由于代码位于它自己的函数中，因此您可以随着时间的推移对其进行改进，而无需更改（大部分）应用程序的其余部分。使用对象会更好，因为您可以更轻松地替换它，从而使整体更加灵活，但从函数开始也是一个好主意。使用示例：

```
 echo get_webdirectory_of_file(__FILE__); 
```

* * *

查看您的代码：

```
<?php
$script_name = $_SERVER['SCRIPT_NAME']; // to get www.myurl.com 
```

有关使用该`$_SERVER`变量的问题，请查看 PHP 手册。

```
// create a constant out of the server_name
define('HTTP_HOST', $_SERVER['HTTP_HOST'].'/'); 
```

由于`$_SERVER['HTTP_HOST']`已经存在，因此无需创建常量。这只会隐藏以后使用该常量的相关问题。我建议您从代码中删除该常量。

```
$path_parts = pathinfo($script_name); // returns an array with path names

// get the filename with the extension
$file_name = $path_parts['filename'] . '.' . $path_parts['extension']; 
```

实际上，您在这里寻找的是`basename`，就是这样：

```
$file_name = basename($_SERVER['SCRIPT_NAME']); 
```

现在使用您的代码：

```
// get the directory which the script lives in
$dir = rtrim($script_name, $file_name); 
```

这有点疼。请重新阅读该[`rtrim`](http://php.net/rtrim)功能的作用。你不想在这里使用它。

```
// trim of the left slash since it was added on the end of the HTTP_HOST constant
$dir = ltrim($dir, '/'); 
```

在这种情况下使用`ltrim`可能看起来很聪明，但通常这是一种你不了解你实际做什么以及你使用哪些输入值工作的气味。与使用常量进行比较：

```
// store the server name and directory paths in a variable
$dir = HTTP_HOST.$dir; 
```

您在此处重用变量名 ( `$dir`)。这通常没有帮助。此外，如果您首先添加`/`只是为了删除`/`上面的一行，这没有任何意义。你可以两全其美。

```
echo $dir; // will return f.ex. "www.myurl.com/dir1/dir2/dir3/" 
```

当然，问题是你需要什么以及它有多稳定。正如所写，我完全确定，有更好的方法可以做到这一点，是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:16:13.630

这应该有效：

```
$dir = $_SERVER['HTTP_HOST'] . substr(dirname(__FILE__), strlen($_SERVER['DOCUMENT_ROOT'])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:17:05.817

看看这是否有效：

```
function getCurrentPageURL() {
  $protocol = "http";
  if ($_SERVER["HTTPS"] == "on") {$protocol .= "s";}
  $protocol .= "://";

  $server = $_SERVER["SERVER_NAME"];

  if ($_SERVER["SERVER_PORT"] != "80") {
      $page = $server .  ":" . $_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
   } else {
      $page = $server . $_SERVER["REQUEST_URI"];
   }
   return $protocol . $pageURL;
} 
```

该解决方案考虑了不同的端口和 HTTPS 协议。

# php - Tinymce 输入键

> ID：10799864
> 
> 赞同：2
> 
> 时间：2012-05-29T13:09:55.580
> 
> 标签：php, javascript, jquery, jquery-plugins, tinymce

在我的应用程序中，我使用的是 Tinymce。这是我的问题。

## 方案 1

1）我有这样风格的段落

```
<div class="p">Paragraph with some content.<!--p--></div> 
```

当我将光标放在段落末尾并按回车键时，它将像这样创建

```
<div class="p">Paragraph with some content.<!--p--></div>
<div class="p"></div> 
```

但我需要这样

```
<div class="p"><!--p--></div> 
```

## 方案 2

1）我有这样风格的段落

```
<div class="p">Paragraph with some content.<!--p--></div> 
```

当我将光标放在段落的中间并按回车键时，它将像这样创建

```
<div class="p">Paragraph with <!--p--></div><div class"p">some content.<!--p--></div> 
```

为了获得这个我正在使用这样的功能

```
ed.onKeyPress.addToTop(function(ed, e) {
if ((e.charCode == 13 || e.keyCode == 13)) { 
 tinyMCE.execInstanceCommand('abb_ifr',"mceInsertContent",true,'<!--p--></div>');
 }
  }); 
```

我需要实现场景 1。我如何在 Tinymce 中做到这一点。我需要更改核心文件中的任何内容吗？请给我提意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:30:09.880

在您回复之后，我认为问题确实出在换行符上。如果不是，请说明您的问题。

但是要让回车键只跳下一行，使用这个

```
tinyMCE.init({
        ...
        force_br_newlines : true,
        force_p_newlines : false,
        forced_root_block : '' // Needed for 3.x
}); 
```

因此它将创建一个带有多个换行符的大段落。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-06T20:19:07.737

```
tinyMCE.init({
        ...
        forced_root_block : false
}); 
```

# javascript - Javascript 位运算符和画布动画

> ID：10799873
> 
> 赞同：0
> 
> 时间：2012-05-29T13:10:41.150
> 
> 标签：javascript, canvas, bit-manipulation, sprite

我正在将精灵渲染到画布元素，并且我试图避免子像素定位以避免图像模糊（基于此处的信息：http: [//seb.ly/2011/02/html5-canvas-sprite-优化/](http://seb.ly/2011/02/html5-canvas-sprite-optimisation/)）。

当我尝试像这样重新分配 x 位置时，会出现我的问题：

```
this.pos.x = ~~ this.pos.x; 
```

这使我的精灵永远不会在屏幕上移动，并将其位置记录到控制台显示我被困在起始位置。

现在，如果我不对我的位置执行按位运算符，只需记录输出：

```
console.log(~~ this.pos.x); 
```

我可以看到按位运算符按预期执行，显示：

```
100
101
102
... 
```

注意：我的动画是独立于帧率的，因此我将它乘以一个增量并得到如下浮点数：

```
100.64
101.36
102.04
102.68
103.32000000000001
104.00000000000001
104.68000000000002
... 
```

我在这里更新位置，并且只在这里：

```
this.pos.x += BE.delta.getSeconds() * this.accelleration; 
```

因此

```
this.pos.x += ~~ (BE.delta.getSeconds() * this.accelleration); 
```

不管用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:19:29.310

[按位非运算符 ( `~`)](http://ecma-international.org/ecma-262/5.1/#sec-11.4.8)只是截断数字的小数部分（例如is `~~100.1`; `100`is `~~-100.1`）`-100`。所以很自然，如果你添加小于`1`to的值`this.pos.x`，如果你这样做了`this.pos.x = ~~this.pos.x`，你永远不会看到它增加，因为你不断地消除那些小数值。

您没有提供*很多*上下文，但可能是您希望允许`this.pos.x`保留浮点数，但使用它的下限版本进行渲染，例如：

```
var renderX = ~~this.pos.x;
// Use `renderX` rather than `this.pos.x` to render to the canvas;
// `renderX` will remain 100 while `this.pos.x` will gradually climb
// from 100 to 100.1, 100.5, 100.999999, etc. Once `this.pos.x`
// reaches 101 (or 101.1, etc.), `renderX` will become 101. 
```

* * *

另外，圆形而不是地板可能更合适。如果`this.pox.x`是`100.999999999`，那么渲染它肯定`101`比? 更有意义`100`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:23:15.590

当您为图像设置动画时，您应该将位置保存在与图像位置分开的变量中。这样，您可以保留浮点值进行计算，并使图像位​​置为整数值。

如果你砍掉坐标的小数部分，然后将其用作下一次计算的输入，那么这些值就会来回跳跃：

```
100 + 0.64 = 100.64
~~100.64 = 100
100 + 0.64 = 100.64
~~100.64 = 100
... 
```

此外，使用该`round`方法将浮点值转换为最接近的整数值：

```
x += BE.delta.getSeconds() * this.accelleration;
this.pos.x = Math.round(x); 
```

# java - 在 Selenium 脚本中按 Enter 键

> ID：10799875
> 
> 赞同：3
> 
> 时间：2012-05-29T13:10:41.570
> 
> 标签：java, selenium, selenium-webdriver

我正在使用 Selenium Server (v2.21) 和 Selenium Java Client (v.2.21.0) 来自动化需要`Enter`在每次输入后按下键的 Web 表单，因为字段是根据输入的值公开的。因此，根据[此处](https://stackoverflow.com/questions/10243153/press-enter-key-in-selenium)的解决方案，我一直在尝试不同的方法将字符串输入表单并按下`Enter`- 这是我尝试过的方法：

```
// type field value
selenium.type("program", "MIC HOMEOWNERS");

// ** not working: selenium.keyPress("program", "\\13");
// ** not working: selenium.select("program", "Program");
// ** not working: selenium.keyPressNative(Keys.ENTER.toString());
// ** not working: selenium.keyDown("program", "13"); 
```

看起来这是最合乎逻辑的*解决*方案`selenium.keyPressNative(Keys.ENTER)`（`.toString``keyPressNative`

实际表单代码：

```
<label  >Program</label> 
    <input id="program" name="program1" class="readonly-bg" readonly="readonly" type="text" value="MIC HOMEOWNERS" size="12"/>
    <input id="program" name="program" type="hidden" value="601"/>
        <script type="text/javascript">  
            Spring.addDecoration(new Spring.ElementDecoration({  
                elementId : "program",  
                widgetType : "dijit.form.ValidationTextBox",  
                widgetAttrs : { 
                    trim:true ,
                    required : true
                }}));  
        </script>
<br> 
```

如何模拟`Enter`按键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T13:54:59.810

我正在使用以下代码单击**Escape** *或* **Enter**。

```
try {
    Thread.sleep(700);
} catch (InterruptedException e) {
    selenium.keyPressNative("27"); // Escape
    selenium.keyPressNative("10"); // Enter 
} 
```

我们需要暂停 selenium，直到上一个命令成功执行。所以我正在使用 sleep() 方法。对于我的测试用例，我需要暂停 700 MillSec。根据您的要求，您需要更改该值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T11:25:06.563

在 WebDriver 中有一个类键。使用它我们可以发送 ENTER 键。像这样

```
driver.findElement(By.id("elementid")).sendKeys(Keys.ENTER); 
```

对于 Selenium RC：

```
selenium.keyPress("elementid", "\\13"); // Note the double backslash 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:14:40.237

你试过这个吗？

```
selenium.keyPressNative("\n"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T16:24:03.680

试试这个。我正在测试的应用程序要求用户执行以下步骤以将值输入到表格单元格中。（单击单元格，按回车键，输入数字，再次按回车完成）它适用于我的脚本

```
selenium.click("id_locator");

this.command_waitInSeconds(1);

selenium.keyPress("id_locator", "\\13");

this.command_waitInSeconds(3);

selenium.type("name=value", "10000");

selenium.focus("name=value");

selenium.keyPress("name=value", "\\13"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-27T19:30:22.100

如果您将 selenese 编写为 HTML（或使用 IDE），则 ENTER 键在变量中可用`${KEY_ENTER}`

以下是 sendKeys 的示例：

```
sendKeys | id=search | ${KEY_ENTER} 
```

您可以在此处查看所有可用密钥的列表：http: [//blog.reallysimplethoughts.com/2013/09/25/using-special-keys-in-selenium-ide-part-2/](http://blog.reallysimplethoughts.com/2013/09/25/using-special-keys-in-selenium-ide-part-2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-27T11:28:23.667

尝试使用 XPATH 搜索元素，然后使用以下代码。它对我有用。

```
 driver.findElement(By.xpath(".//*[@id='txtFilterContentUnit']")).sendKeys(Keys.ENTER); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-05T09:25:49.403

```
webElem=driver.findElement(By.xpath(""));
webElem.sendKeys(Keys.TAB);
webElem.sendKeys(Keys.ENTER); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-29T14:52:51.350

你试过这个吗？（这是红宝石）

```
$driver.find_element(:id, "program").send_keys [:return] 
```

# iphone - NSDate as @property 给我 bad_exc_access

> ID：10799879
> 
> 赞同：1
> 
> 时间：2012-05-29T13:11:08.500
> 
> 标签：iphone, ios, nsdate

我想用特定日期初始化一个 nsdate ，以便在我的所有代码中使用它，我正在这样做：

。H

```
@property (nonatomic, retain) NSDate *myDate; 
```

.m

```
@synthesize myDate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
        [formatter setDateFormat:@"yyyy-MM-dd"];

        myDate = [formatter dateFromString:@"2050-01-01"];
    } 
    return self;
} 
```

然后在代码中，如果我以这种方式读取 nsdate：

```
NSLog(@"%@",myDate); 
```

或者如果我使用 isEqualToDate，请给我一个 exc_bad_access

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:13:32.157

为了将变量作为属性访问，您需要将其调用为

```
self.myDate = [formatter dateFromString:"2050-01-01"]; 
```

否则，它只是对存储它的变量进行直接分配。当您`retain`在自动生成的`setMyDate`函数中声明一个属性时，当您对传入的对象使用调用时调用`self.myDate = someDate;`该函数`retain`是为了保留该对象。

`self.myDate`通常，仅通过自动生成的方法或通过确保正确使用引用计数函数的方法来访问您的属性被认为是最佳实践

# gwt - 除了破解 Date_CustomFieldSerializer 并重新编译 GWT 之外，还有其他解决方案吗

> ID：10799884
> 
> 赞同：7
> 
> 时间：2012-05-29T13:11:23.570
> 
> 标签：gwt, date, serialization

我一直在搜索**java.util.Date**序列化和不同的客户端/服务器语言环境问题。

对于那些不了解此事的人，这里有一个简短的解释：

RPC 中的 GWT 日期序列化是根据您拥有的语言环境完成的。因此，如果客户端和服务器具有不同的语言环境，则用户可以输入一个日期，服务器最终将根据其语言环境将其他日期存储在数据库中。

这是一种预期的行为，在许多情况下似乎是正确的行为。

例如，如果您从纽约的浏览器中安排某个日期/小时的会议，那么在 SF 检查会议时间的人看到相应的区域设置值是正确的。

现在出生日期呢？在这种情况下，如果您出生于 12 月 5 日，那么中国的某个人读到您出生于 12 月 6 日似乎并不准确。

有些人说一种解决方案可能是使用字符串而不是日期，但我不这么认为，主要是因为例如你不能添加或减去字符串。

所以我认为解决这个问题的最好方法是自定义序列化，但不幸的是 GWT 提供了自己的**Date_CustomFieldSerializer**。

对于我所阅读的内容，唯一的解决方案是制作您自己的文件版本并重新编译 GWT 源代码。我不想这样做，所以这就是为什么我要问是否有人知道任何更好的解决方案，或者 GWT 人员是否正在计划例如一些插件序列化基础设施用于未来的版本。

提前致谢。丹尼尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:52:24.273

A`java.util.Date`代表某个特定的时刻。你出生在一个特定的时刻；在您所在的时区可能是 12 月 5 日，但在中国是 12 月 6 日，这不会改变您出生的确切时间。

似乎您想要存储“日-月-年”三元组，而不是特定的时间。如果是这种情况，则将其存储为三元组（可能序列化为字符串），而不是`java.util.Date`; 换句话说，为工作使用正确的工具。

您说您认为这是错误的，因为“<em>您无法添加或减去字符串”。好吧，您也不要添加或减去日期。如果您想对日期进行一些计算，那么要么这意味着您实际上想要存储一个日期（并且忍受中国人看到您出生于 12 月 6 日这一事实，因为那是您恰好出生的日期他的时区，而不是 12 月 5 日，这是您所在时区的日期），或者您想暂时将您的 DMY 三元组转换为日期（并进行近似计算，导致您的中国朋友过早祝您生日：12 月在您的时区仍然是 12 月 4 日时，在他的时区中排名第 5）。
使用`DateTimeFormat`，将日期序列化/解析为 DMY（`yyyy-MM-dd`例如）并始终使用当前时区。

顺便说一句：说*RPC 中的 GWT 日期序列化是根据您所拥有的语言环境来完成的，这*是不准确的：GWT 序列化日期的时间戳（自 Epoch 返回的秒数`java.util.Date#getTime()`），这特别**不**依赖于时区。
更不用说语言环境！=时区。

# iphone - 如何从 SEL 变量中注册选择器？

> ID：10799885
> 
> 赞同：-1
> 
> 时间：2012-05-29T13:11:24.063
> 
> 标签：iphone

我有一个`SEL`要在按钮选择器中设置的变量。

我的代码是这样的：

```
GridView *ObjGridView=[[GridView alloc]initWithFrame:frame]; 
[[NSBundle mainBundle ] loadNibNamed:@"GridView" owner:ObjGridView options:nil];

CATEGORY *ObjCategory=[arrCategory objectAtIndex:index];
//do something 

ICON *ObjIcno=[ObjCategory.arrIconObjects objectAtIndex:indexIcon];

[ObjGridView.button1 addTarget:self action:ObjIcno.handler forControlEvents:UIControlStateNormal]; 
```

`ObjIcno.handler`是一个 SEL 变量（之前由选择器设置）

像这样：

```
arrSectonProductivityTools=[NSMutableArray arrayWithObjects:[[[ICON alloc]initWithIcon:@"firefox.png":@"Firefox":@selector(FirefoxCickEvent:)] autorelease],nil]; 
```

我以这种方式在我的班级中设置了选择器，设置正确，但我没有收到点击事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:35:04.847

```
[ObjGridView.button1 addTarget:self action:ObjIcno.handler forControlEvents:UIControlStateNormal]; 
```

应该：

```
[ObjGridView.button1 addTarget:self action:ObjIcno.handler forControlEvents:UIControlEventTouchUpInside]; 
```

要获得除 UIControlEventTouchUpInside 之外的更多选项，请执行 cmd+鼠标单击 UIControlEventTouchUpInside。

# php - PHP 从 Windows 机器上的套接字读取

> ID：10799890
> 
> 赞同：1
> 
> 时间：2012-05-29T13:11:43.933
> 
> 标签：php, windows, sockets, telnet

我正在尝试编写一个“简单”的 PHP 程序，该程序应该向/从套接字（端口 23 上的 telnet）写入和读取字符串。

套接字连接是使用 pfsockopen（或 socket_connect）函数进行的，它似乎可以正常工作（使用 wireshark 验证）。问题是当我尝试使用 fread 或 socket_read 从套接字读取时。这两个函数返回的缓冲区是不可读的（没有文本，只有特殊的 ascii 字符）。

考虑 php 脚本在 Windows XP PC 上运行。你知道在 Windows PC 和 telnet 协议上使用这些库有什么限制吗？

```
 $header1=chr(0xFF).chr(0xFB).chr(0x1F).chr(0xFF).chr(0xFB).chr(0x20).chr(0xFF).chr(0xFB).chr(0x18).chr(0xFF).chr(0xFB).chr(0x27).chr(0xFF).chr(0xFD).chr(0x01).chr(0xFF).chr(0xFB).chr(0x03).chr(0xFF).chr(0xFD).chr(0x03).chr(0xFF).chr(0xFC).chr(0x23).chr(0xFF).chr(0xFC).chr(0x24).chr(0xFF).chr(0xFA).chr(0x1F).chr(0x00).chr(0x50).chr(0x00).chr(0x18).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x20).chr(0x00).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0x2C).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x27).chr(0x00).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x18).chr(0x00).chr(0x58).chr(0x54).chr(0x45).chr(0x52).chr(0x4D).chr(0xFF).chr(0xF0);

$fp=pfsockopen("10.129.127.33",23);
fputs($fp,$header1);
sleep(1);
$output=fread($fp,8164); 
echo $output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-14T19:49:52.327

1.  连接成功了吗？
2.  服务器是否允许在端口 23 上连接？
3.  这可能会帮助你

fputs($fp,"字符串");

```
do 
{ 
$output.=fread($fp, 80); 
// read line by line, or at least small chunks
$stat=socket_get_status($fp);
}
while($stat["unread_bytes"]);

$output = str_replace("\n", "<br>", $output);\\for new line in HTML
echo $output; 
```

1.  以下是我使用的 TELNET 标头

    ```
    $header1=chr(0xFF).chr(0xFB).chr(0x1F).chr(0xFF).chr(0xFB).chr(0x20).chr(0xFF).chr(0xFB).chr(0x18).chr(0xFF).chr(0xFB).chr(0x27).chr(0xFF).chr(0xFD).ch.(0x01).chr(0xFF).chr(0xFB).chr(0x03).chr(0xFF).chr(0xFD).chr(0x03).chr(0xFF).chr(0xFC).chr(0x23).chr(0xFF).chr(0xFC).chr(0x24).chr(0xFF).chr(0xFA).chr(0x1F).chr(0x00).chr(0x50).chr(0x00).chr(0x18).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x20).chr(0x00).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0x2C).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x27).chr(0x00).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x18).chr(0x00).chr(0x58).chr(0x54).chr(0x45).chr(0x52).chr(0x4D).chr(0xFF).chr(0xF0);
            $header2=chr(0xFF).chr(0xFC).chr(0x01).chr(0xFF).chr(0xFC).chr(0x22).chr(0xFF).chr(0xFE).chr(0x05).chr(0xFF).chr(0xFC).chr(0x21);

    $fp=fsockopen("192.168.125.6",23);  

    //**********Send telnet header****************

    fputs($fp,$header1);

    usleep(1000);

    fputs($fp,$header2);

    usleep(1000); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T19:10:11.093

```
<?php
# Generating output by telneting a router

$username='myusername';
$password='mypassword';
$ip="192.168.0.1";

    $Telnet_Header = chr(0xFF).chr(0xFB).chr(0x1F).chr(0xFF).chr(0xFB).chr(0x20).chr(0xFF).chr(0xFB).chr(0x18).chr(0xFF).chr(0xFB).chr(0x27).chr(0xFF).chr(0xFD).chr(0x01).chr(0xFF).chr(0xFB).chr(0x03).chr(0xFF).chr(0xFD).chr(0x03).chr(0xFF).chr(0xFC).chr(0x23).chr(0xFF).chr(0xFC).chr(0x24).chr(0xFF).chr(0xFA).chr(0x1F).chr(0x00).chr(0x50).chr(0x00).chr(0x18).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x20).chr(0x00).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0x2C).chr(0x33).chr(0x38).chr(0x34).chr(0x30).chr(0x30).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x27).chr(0x00).chr(0xFF).chr(0xF0).chr(0xFF).chr(0xFA).chr(0x18).chr(0x00).chr(0x58).chr(0x54).chr(0x45).chr(0x52).chr(0x4D).chr(0xFF).chr(0xF0);
$Telnet_Header2 = chr(0xFF).chr(0xFC).chr(0x01).chr(0xFF).chr(0xFC).chr(0x22).chr(0xFF).chr(0xFE).chr(0x05).chr(0xFF).chr(0xFC).chr(0x21);
$Port = 23;
$Conn = fsockopen($ip, $Port);
fputs($Conn,$Telnet_Header);
sleep(1);
fputs($Conn,$Telnet_Header2);
sleep(1);
fputs($Conn,$username."\r");
sleep(5);
fputs($Conn,$password."\r");
sleep(1);
fputs($Conn,$username."\r");
sleep(5);
fputs($Conn,$password."\r");
sleep(5);
fputs($Conn,"en \r"); 
   sleep(3);
fputs($Conn,"conf t\r"); 
   sleep(3);
fputs($Conn,"terminal length 0\r"); 
   sleep(3);
fputs($Conn,"sh run\r"); 

   $output="";
do
{
    $output.=fread($Conn, 1000);
    $stat=socket_get_status($Conn);
}while($stat["unread_bytes"]);
$output = explode("\n", $output);
for ($i=6;$i<count($output)-1;$i++)
    {
    echo ($output[$i]."\n");
    }

?> 
```

# c# - 从没有反射器/ilspy 的 c# 生成 MSIL 代码

> ID：10799891
> 
> 赞同：2
> 
> 时间：2012-05-29T13:11:50.470
> 
> 标签：c#, dynamic, methods, cil

我只是对 msil 操作码等感兴趣。通常我在 C# 中编程并尝试使用 Reflection.Emit / MethodBuilder 动态生成方法，但这需要操作码。

因此，如果可以通过将 C# 解析为 msil 并在 Method Builder 中使用它来动态生成方法，我很感兴趣？

那么是否可以通过使用反射和 C# 代码在运行时动态生成方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T13:13:54.240

You could take a look at [expression trees](http://msdn.microsoft.com/en-us/library/bb397951.aspx), [`CodeDom`](http://msdn.microsoft.com/en-us/library/system.codedom.aspx), [`CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx) etc.

```
using System.CodeDom.Compiler;
using Microsoft.CSharp;

// ...

string source = @"public static class C
                  {
                      public static void M(int i)
                      {
                          System.Console.WriteLine(""The answer is "" + i);
                      }
                  }";

Action<int> action;
using (var provider = new CSharpCodeProvider())
{
    var options = new CompilerParameters { GenerateInMemory = true };
    var results = provider.CompileAssemblyFromSource(options, source);
    var method = results.CompiledAssembly.GetType("C").GetMethod("M");
    action = (Action<int>)Delegate.CreateDelegate(typeof(Action<int>), method);
}
action(42);    // displays "The answer is 42" 
```

# vb.net - 读取嵌套的xml文件

> ID：10799892
> 
> 赞同：1
> 
> 时间：2012-05-29T13:12:01.633
> 
> 标签：vb.net, linq-to-xml

我有一个看起来像这样的 xml 文件：

```
<SalesReps>
  <SalesRep>
    <repname> Bob</repname>
      <repid>100</repid>
      <customers>
        <customer>
          <custname>ABC Company</custname>
          <custno>51233</custno>
        </customer>
        <customer>
          <custname>XYZ Inc.</custname>
          <custno>29943</custno>
        </customer>
      </customers>
    </SalesRep>
  <SalesRep>
    <repname>Sue</repname>
      <repid>43</repid>
      <customers>
        <customer>
          <custname>Petes Tire Co</custname>
          <custno>49999</custno>
        </customer>
        <customer>
          <custname>Suzy's Sewing</custname>
          <custno>81234</custno>
        </customer>
      </customers>
    </SalesRep>
</SalesReps> 
```

我正在尝试使用以下代码阅读它：

```
Dim salesreps = From reps In xe.Descendants("SalesReps") Select reps
Dim el = (From rep In salesreps _
Select New With {.repname = rep.<repname>, _
                 .repid = rep.<repid>,
                 .customers = (From custs In rep.<Customers> _
                   Select New With { _
                   .customer = ( _
                       From cust In custs.<customer> _
                           Select New With {
                           .custname = cust.<custname>.Value, _
                           .custno = cust.<custno>.Value} _
                       )} _
                  ) _
              } _
) 
```

我可以得到 repname 和 repid，但没有得到带有 custname 和 custno 的客户列表。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:27:29.360

我同意史蒂夫狗的观点。您可以使用 Xml 序列化程序来执行此操作。这是一些示例代码：

```
Imports System.Xml.Serialization

<XmlRoot("SalesReps")> _
Public Class SalesReps
    Inherits List(Of SalesRep)
End Class

Public Class SalesRep
    Public Property RepName As String
    Public Property RepId As Integer

    <XmlArray("Customers"), XmlArrayItem("Customer")> _
    Public Property Customers As List(Of Customer)

    Public Sub New()
        Me.Customers = New List(Of Customer)()
    End Sub
End Class

Public Class Customer
    Public Property CustName As String
    Public Property CustNo As String
End Class

Module Module1                                                                                    
    Sub Main()                                                                                    

        Dim Reps As New SalesReps()                                                               

        Dim rep As New SalesRep With {.RepId = 100, .RepName = "Bob"}                             
        rep.Customers.Add(New Customer With {.CustName = "ABC Company", .CustNo = "51233"})       
        rep.Customers.Add(New Customer With {.CustName = "XYZ Inc.", .CustNo = "29943"})          
        Reps.Add(rep)                                                                             

        rep = New SalesRep With {.RepId = 43, .RepName = "Sue"}                                   
        rep.Customers.Add(New Customer With {.CustName = "Petes Tire Company", .CustNo = "49999"})
        rep.Customers.Add(New Customer With {.CustName = "Suzy's Sewing", .CustNo = "81243"})     
        Reps.Add(rep)                                                                             

        Dim sb As New StringBuilder()                                                             

        Dim xSer As New XmlSerializer(GetType(SalesReps))                                         
        Using wrt As New StringWriter(sb)                                                         
            xSer.Serialize(wrt, Reps)                                                             
        End Using                                                                                 

        Console.WriteLine(sb.ToString())                                                          

        Dim NewReps As SalesReps = Nothing                                                        
        Using rdr As New StringReader(sb.ToString())                                              
            NewReps = xSer.Deserialize(rdr)                                                       
        End Using                                                                                 

        If NewReps IsNot Nothing Then                                                             
            Dim firstRep = NewReps.First()                                                        

            Console.WriteLine(firstRep.RepName)                                                   
            For Each cust As Customer In firstRep.Customers                                       
                Console.WriteLine("   {0}", cust.CustName)                                        
            Next                                                                                  
        End If                                                                                    

        Console.WriteLine("Press ENTER to exit...")                                               
        Console.ReadLine()                                                                        
    End Sub                                                                                       
End Module 
```

产生这个输出：

```
<?xml version="1.0" encoding="utf-16"?>
<SalesReps xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <SalesRep>
    <RepName>Bob</RepName>
    <RepId>100</RepId>
    <Customers>
      <Customer>
        <CustName>ABC Company</CustName>
        <CustNo>51233</CustNo>
      </Customer>
      <Customer>
        <CustName>XYZ Inc.</CustName>
        <CustNo>29943</CustNo>
      </Customer>
    </Customers>
  </SalesRep>
  <SalesRep>
    <RepName>Sue</RepName>
    <RepId>43</RepId>
    <Customers>
      <Customer>
        <CustName>Petes Tire Company</CustName>
        <CustNo>49999</CustNo>
      </Customer>
      <Customer>
        <CustName>Suzy's Sewing</CustName>
        <CustNo>81243</CustNo>
      </Customer>
    </Customers>
  </SalesRep>
</SalesReps>
Bob
   ABC Company
   XYZ Inc.
Press ENTER to exit... 
```

# xml - 生成带有“ds”前缀的 XADES-BES

> ID：10799894
> 
> 赞同：2
> 
> 时间：2012-05-29T13:12:13.243
> 
> 标签：xml, digital-signature, xml-signature, electronic-signature, signedxml

我使用signedxml 类来生成xml 签名。结果xml如下；

```
 <Signature Id="orderSignature" xmlns="http://www.w3.org/2000/09/xmldsig#">
                        <SignedInfo>
                            <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
                            <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
           .............
           ......
           ...
    </Signature>
    <Object>....</Object> 
```

我需要生成 XADES-BES xml 格式，这就是我想将前缀“ds:”添加到signedxml。

没有“ds”，我的签名验证工作正常，如您所知，它的格式是 XMLDSIG，

当我想生成 XADES-BES 时，我们必须为所有签名和子元素添加“ds”前缀，如下所示；

```
<ds:Signature Id="orderSignature" xmlns="http://www.w3.org/2000/09/xmldsig#">
                            <ds:SignedInfo>
                                <ds:CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
                                <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
               .............
               ......
               ...
        </ds:Signature>
        <ds:Object>....</ds:Object> 
```

如果您在签名后添加该前缀，则它不起作用。

所以，我已经阅读了所有关于这方面的问题，并且没有任何问题，，

我真的需要带有“ds”前缀的xmlsignature。

有没有人帮我解答这个问题？？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T07:53:36.387

我真的不明白为什么要在命名空间中添加 ds 前缀。

有这个：

```
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
  <ds:SignedInfo Id="SignedInfo">
 <ds:CanonicalizationMethod ... 
```

完全等同于：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
   <SignedInfo Id="SignedInfo">
 <CanonicalizationMethod ... 
```

在第一种情况下，您必须为[http://www.w3.org/2000/09/xmldsig#](http://www.w3.org/2000/09/xmldsig#)命名空间中的元素指定 ds，在第二种情况下，此命名空间是默认命名空间，因此 xml 中没有声明前缀的每个元素都是从这个命名空间。

此外，您说您需要添加 ds 前缀才能拥有 XAdES-BES，并且您评论了 xmldsig 和 xades 签名之间的区别。您必须知道 XAdES 只是一个说明 XMLDSIG 签名需要哪些属性才能成为 XAdES 签名的规范。大致而言，XAdES 是一个 XMLDSIG 签名，其中包含：`<Object http://www.w3.org/2000/09/xmldsig#>`这将是整个合格属性集的包，其中一些是已签名的 (signedProperties)，而另一些是未签名的 (unsignedProperties)。对于 XAdES-BES 案例，您必须添加`<xades:SigningCertificate xmlns:xades="http://uri.etsi.org/01903/v1.3.2#">`内部`<xades:SignedProperties>`元素。

这里我给你一个 XAdES-BES 签名“没有”ds 前缀的例子。

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#" Id="Signature">
<SignedInfo Id="SignedInfo">
    <CanonicalizationMethod Algorithm="http://www.w3.org/TR/2001/REC-xml-c14n-20010315"/>
    <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
    <Reference Id="SignedProperties-Reference" Type="http://uri.etsi.org/01903/v1.2.2#SignedProperties" URI="#SignedProperties">
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>fiKTaqJzLSmC73cMXZSzjhd877w=</DigestValue>
    </Reference>
    <Reference Id="SignedDataObject-Reference-1" URI="DetachedObjectReference-1">
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>8ruIS/4MRp2wAwVX4/pTCYxTyWc=</DigestValue>
    </Reference>
</SignedInfo>
<SignatureValue Id="DocumentSignatureValue">
    R40YdEEEl0YIZVdl4pm3yyF7qGAG8ZN8PPf0aBRXbvRgdIcvJZtI5AS5NexaO5T4O0gMHWRIKjNb
    2QzlfwxlQ3/KqMW4W0QkMLpF4csBpXt9bJ3t+smEeTnxkBcQRXAw5v9kwf20mfz1LtIUhbsU/PMd
    YwaGCsItF2rzl3rtcq4=
</SignatureValue>
<KeyInfo Id="KeyInfo">
    <X509Data>
        <X509Certificate>
            MIIIUTCCBzmgAwI...
        </X509Certificate>
    </X509Data>
    <KeyValue>
        <RSAKeyValue>
            <Modulus>
              pb0cJiodddCDVe/t+7...
            </Modulus>
            <Exponent>AQAB</Exponent>
        </RSAKeyValue>
    </KeyValue>
</KeyInfo>
<Object>
    <xades:QualifyingProperties xmlns:xades="http://uri.etsi.org/01903/v1.3.2#" Id="QualifyingProperties" Target="#Signature">
        <xades:SignedProperties Id="SignedProperties">
            <xades:SignedSignatureProperties>
                <xades:SigningCertificate>
                    <xades:Cert>
                        <xades:CertDigest>
                            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
                            <DigestValue>UZq4NIL9eVVA7aJixPeiUTM3nOM=</DigestValue>
                        </xades:CertDigest>
                        <xades:IssuerSerial>
                            <X509IssuerName>XXXXXXXXXXXX....</X509IssuerName>
                            <X509SerialNumber>705964899...</X509SerialNumber>
                        </xades:IssuerSerial>
                    </xades:Cert>
                </xades:SigningCertificate>
            </xades:SignedSignatureProperties>
            <xades:SignedDataObjectProperties/>
        </xades:SignedProperties>
    </xades:QualifyingProperties>
</Object> 
```

希望这可以帮助，

# android - Convert air to apk timestamp issue

> ID：10799897
> 
> 赞同：1
> 
> 时间：2012-05-29T13:12:40.853
> 
> 标签：android, air, code-signing

I'm trying to codesign and timestamp an airi file. unfortunatley, i am only able to create an air file from this. but i need an apk. using the adt -package sytnax doesn't allow me to use the -tsa (timestamp) option.

so now i have a well signed and timestamped air file. how do i get an apk file from this? i am able to convert it without a timestamp, but then agin google play tells me my apk file needs a certificate ( i have a valid one purchased at globalsign.com) that is valid until 2033\.

So i am able to create an apk file without timestamp but codesigned ( not helpful) or an air file codesigned and timestamped (not helpful either), but NOT what i need - an apk file codesigned AND timestamped.

i've searched this site [http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128cdca935b-8000.html](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d128cdca935b-8000.html) but was not able to find something suitable for me.

For my understanding i would say this is waht needs to be done:

```
Create a native package from an AIR or AIRI file:

adt -package 
-target packageType 
NATIVE_SIGNING_OPTIONS 
output 
input_package 
```

so what i do is

```
./adt -package -target apk  -storetype pkcs12 -keystore aircertificate.p12  -tsa http://timestamp.globalsign.com/scripts/timestamp.dll myappname.apk myappname.airi 
```

and what it says is:

-tsa option not supported

it doesn't say that when i use adt -sign, but signing only allows me to create an air file.

trying to simple convert my signed and timestamp air file to an apk file WITHOUT codesigning options like this

```
./adt -package -target apk myappname.apk myappname.air 
```

shows that:

Signing options required to package APK

help please!!!

best regards

wolfgang

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:06:08.100

您是否尝试过这个技巧：[创建有效期至 2033 年的证书](http://ranjitfx.wordpress.com/2010/10/24/create-certificate-valid-till-2033-air-android-apk-upload/)。这可能是一种解决方法。

# windows-phone-7 - Backstack墓碑wp7

> ID：10799901
> 
> 赞同：0
> 
> 时间：2012-05-29T13:12:45.210
> 
> 标签：windows-phone-7, back-stack, tombstone

当我注意到我只对我当前正在查看的页面进行墓碑化时，我刚刚在我的应用程序中完成了墓碑化页面，这意味着在我返回后台堆栈中的页面后会丢失所有成员并且不会被墓碑化..我只找到示例关于如何删除当前页面，但没有关于删除后台页面的内容......什么是优雅的方式来做到这一点？

只是为了展示我是如何墓碑的：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    if (e.IsNavigationInitiator == false)
    {
        _tombstone = this.LoadState<Tombstone>("tombstone");
    }
    else
    {
        _tombstone.NavigationParameters = NavigationParameters;
    }
}

protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    if (_tombstone != null && e.IsNavigationInitiator == false)
        this.SaveState("tombstone", _tombstone);
}

    public static void SaveState(this PhoneApplicationPage phoneApplicationPage, string key, object value)
    {
        if (phoneApplicationPage.State.ContainsKey(key))
        {
            phoneApplicationPage.State.Remove(key);
        }

        phoneApplicationPage.State.Add(key, value);
    } 
```

_tombstone 包含我当前页面的所有重要成员，我需要在墓碑后重新初始化页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T09:16:44.950

您应该在离开时保留每个页面的数据（如果 NavigationMode ！= Back），因为您不会知道应用程序在另一个页面上时将被墓碑化，并且您将无法访问堆栈中的其他页面发生墓碑。

或者，您可以集中存储所有内容（使用超级视图模型）并在应用程序级别处理状态持久性。

# android - How to show selected region of cube in opengl android

> ID：10799906
> 
> 赞同：1
> 
> 时间：2012-05-29T13:13:11.860
> 
> 标签：android, opengl-es

I have a cube drawn in opengl android. Now, when I move finger on that cube, i have to show selected region by finger on that cube.

# java - Java中的位移

> ID：10799907
> 
> 赞同：2
> 
> 时间：2012-05-29T13:13:16.430
> 
> 标签：java, bit-manipulation

这是一个左移 的`short`值的Java 程序`2`。我有两个问题：

为什么16 到 29 之间`num << i`的值会产生有效结果？`i`A`short`应该只保存从 -32,768 到 32,767 的值。

所以我想，也许`System.out.println`解释`num << i`为一个大于 a 的值`short`。但是为什么它会在 开始产生意想不到的值`num << 30`呢？

```
public class LeftShift {

    public static void main(String[] args)
    {
        short num = 2;
        for (int i = 0; i < 32; i++) {
            System.out.println("Left-shifting 2 by " + i + " places yields: " 
                                + (num << i));
        }
    }

} 
```

输出：

```
Left-shifting 2 by 0 places yields: 2
Left-shifting 2 by 1 places yields: 4
Left-shifting 2 by 2 places yields: 8
Left-shifting 2 by 3 places yields: 16
Left-shifting 2 by 4 places yields: 32
Left-shifting 2 by 5 places yields: 64
Left-shifting 2 by 6 places yields: 128
Left-shifting 2 by 7 places yields: 256
Left-shifting 2 by 8 places yields: 512
Left-shifting 2 by 9 places yields: 1024
Left-shifting 2 by 10 places yields: 2048
Left-shifting 2 by 11 places yields: 4096
Left-shifting 2 by 12 places yields: 8192
Left-shifting 2 by 13 places yields: 16384
Left-shifting 2 by 14 places yields: 32768
Left-shifting 2 by 15 places yields: 65536
Left-shifting 2 by 16 places yields: 131072
Left-shifting 2 by 17 places yields: 262144
Left-shifting 2 by 18 places yields: 524288
Left-shifting 2 by 19 places yields: 1048576
Left-shifting 2 by 20 places yields: 2097152
Left-shifting 2 by 21 places yields: 4194304
Left-shifting 2 by 22 places yields: 8388608
Left-shifting 2 by 23 places yields: 16777216
Left-shifting 2 by 24 places yields: 33554432
Left-shifting 2 by 25 places yields: 67108864
Left-shifting 2 by 26 places yields: 134217728
Left-shifting 2 by 27 places yields: 268435456
Left-shifting 2 by 28 places yields: 536870912
Left-shifting 2 by 29 places yields: 1073741824
Left-shifting 2 by 30 places yields: -2147483648
Left-shifting 2 by 31 places yields: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:15:40.483

因为对 s 的算术运算会`short`产生`int`s，除非您将它们回退。例如，

```
short value = 2;
short result = value << 31; 
```

给您一个编译错误，您需要将其转换为`short`.

这有几个原因，最明显的是

*   字节码语言并不真正处理任何小于`int`
*   否则对`short`s 的操作会更频繁地溢出。
*   更好地对大多数硬件进行建模，这些硬件通常不会对低于 32 位的值进行操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T13:21:14.670

来自 Java 语言规范，15.19：“移位运算符”

> 移位表达式的类型是左侧操作数的提升类型。

提升类型由 5.6 定义：“数字提升”：

> 否则，如果操作数是编译时类型 byte、short 或 char，则一元数字提升通过扩展转换（第 5.1.2 节）将其提升为 int 类型的值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T13:29:08.747

请注意，复合赋值运算符会将结果转换为分配的类型。因此，修改您的示例：

```
public static void main(String[] args) {
    for (int i = 0; i < 32; i++) {
        short num = 2;
        num <<= i; // equivalent to num = (short)(num << i);
        System.out.println("Left-shifting 2 by " + i + " places yields: " + num);
    }
} 
```

这将产生不同的结果，也许更多是您所期望的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T13:16:13.963

30 的意外值是[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)，MSB 变为 1 - 因此被插入为负数。

另请注意，运算符 << 正在产生`int`s （除非参数是 a `long`，否则它会产生 a `long`）。（事实上​​，`short`被扩大到`int`第一个，然后才被`<<`评估。）所以结果如预期 - an `int`，而不是 a `short`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T13:19:30.670

正在发生的是操作数的自动提升。在 Java 中，`(num << i)`您的示例中表达式的结果是类型`int`。这就是为什么结果在`int`a 而不是 a的范围内的原因`short`。

如果您尝试分配`(num << i)`回 a `short`，则会出现编译错误，迫使您强制转换回 a `short`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T13:30:35.930

请参阅[此](https://stackoverflow.com/questions/477750/primitive-type-short-casting-in-java)SO 线程。

与这个问题相关的部分是这里的[引用](http://www.jblech.de/Glesner-Blech-COCV-2003.pdf)：

```
If an integer operator has an operand of type long, then the other operand is also
converted to type long. Otherwise the operation is performed on operands of type int, if  
necessary shorter operands are converted into int. 
```

我认为这个想法是这些扩大的转换不会丢失信息，并且可能在溢出的情况下保护您。请参阅[Java 语言规范的第 5 章](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html)以了解有关扩大和缩小转换的更多信息。

# zend-framework - ZF2中的引导文件在哪里？

> ID：10799915
> 
> 赞同：10
> 
> 时间：2012-05-29T13:13:42.700
> 
> 标签：zend-framework, zend-framework2

在`ZF1`下面定义了一个引导文件，`application/Bootstrap.php`但在查看[`ZF2 skeleton application`](https://github.com/zendframework/ZendSkeletonApplication).

**文件的`ZF2`' 等价物是`ZF1 Bootstrap.php`什么？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T18:06:47.253

在 ZF2 中，没有像 ZF1 中那样的单独的 Bootstrap 文件。但是，您可以向任何类添加一个`onBootstrap()`方法，以便在调用一次后调用它。`Module``loadModule.post``$application->bootstrap()`

在 ZF2 Skeleton App 的 github 上，您要添加`onBootstrap()`方法的文件位于[module/Application/Module.php](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/Module.php)中。

以下是 ZF2 用户指南中有关 Bootstrapping 的一些相关文档（注意：这些材料中的任何内容都可能发生变化）。

[MVC 引导事件](http://packages.zendframework.com/docs/latest/manual/en/zend.module-manager.module-class.html#zend.module-manager.module-class.the-mvc-bootstrap-event)
[引导应用程序](http://packages.zendframework.com/docs/latest/manual/en/zend.mvc.html#zend.mvc.intro.bootstrapping-an-application)
[引导（与 MVC 相关）](http://packages.zendframework.com/docs/latest/manual/en/zend.mvc.examples.html#zend.mvc.examples.bootstrapping)
[MVC 引导事件的示例用法](http://packages.zendframework.com/docs/latest/manual/en/zend.module-manager.module-class.html#zend.module-manager.module-class.example.mvc-bootstrap-event)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T10:03:34.300

来自 Gary Hockin关于 ZF2 中的引导和其他更改的[精彩文章：](http://blog.hock.in/zf2-for-zf1-users-part-1)

> Zend Framework 2 中没有应用程序级引导，每个模块负责引导它自己的资源在它的 `Module.php`. 这是使用`onBootstrap`模块类的方法和`Event Manager`. 实际上，不再需要大多数引导程序。它已被`Service Manager`and 事件挂钩中的条目替换，但作为示例，您可以使用以下`onBootstrap` 方法执行模块级引导`Module.php`：

```
public function onBootstrap(\Zend\Mvc\Event $e)
{
    $myService = $e->getApplication()->getServiceLocator()->get('my-service');
    $myService->doBootrappingCode();
} 
```

# java - Java Client and C++ Server, sometimes receive the entire information

> ID：10799924
> 
> 赞同：1
> 
> 时间：2012-05-29T13:14:31.810
> 
> 标签：java, c++, client-server

I'm writing a multithreaded C++ server and a Java client using TCP. It works fine for short strings, but when I want to send big strings (e.g. 40 characters), the server only receives a few of them, and the client is waiting for the response.

The multithreading part works fine.

Here you have the code. (Sorry for the comments and names of variables. I'm Spanish.)

Server C++

```
void* SocketHandler(void*);

int main(int argv, char** argc){

//Puerto en el que recibe
int host_port= 1101;

//Estructura usada para especificar una direccion local o remota a la que conectar un socket
struct sockaddr_in my_addr;

int hsock;
int * p_int ;
int errno;

socklen_t addr_size = 0;
int* csock;
sockaddr_in sadr;
pthread_t thread_id=0;

//Se inicializa socket
hsock = socket(AF_INET, SOCK_STREAM, 0);
//Para comprobar que el socket se ha inicializado correctamente
if(hsock == -1){
    printf("Error inicializando socket %d\n", errno);
    goto FINISH;
}

//Se reserva memoria
p_int = (int*)malloc(sizeof(int));
*p_int = 1;

//Se comprueba que al introducir las opciones del socket se introduzcan correctamente   
if( (setsockopt(hsock, SOL_SOCKET, SO_REUSEADDR, (char*)p_int, sizeof(int)) == -1 )||
    (setsockopt(hsock, SOL_SOCKET, SO_KEEPALIVE, (char*)p_int, sizeof(int)) == -1 ) ){
    printf("Error introduciendo opciones del socket %d\n", errno);
    //Se libera la memoria reservada
    free(p_int);
    goto FINISH;
}
//Se libera la memoria reservada
free(p_int);

//Se añade la familia de direcciones a la que pertenece IPV4
my_addr.sin_family = AF_INET ;
//Se añade el puerto que es
my_addr.sin_port = htons(host_port);

//Relleno de sin zero con 8 ceros
bzero((char *) &(my_addr.sin_zero), sizeof(my_addr.sin_zero));
//memset(&(my_addr.sin_zero), 0, 8);

//Se añade la dirección IP
my_addr.sin_addr.s_addr = INADDR_ANY ;

//Enlaza el socket con la dirección IP, puerto
if( bind( hsock, (struct sockaddr*)&my_addr, sizeof(my_addr)) == -1 ){
    fprintf(stderr,"Error enlazando el socket, asegurate de que no hay nada más escuchando en este puerto %d\n",errno);
    goto FINISH;
}
//Se pone a escuchar
if(listen( hsock, 5) == -1 ){
    fprintf(stderr, "Error listening %d\n",errno);
    goto FINISH;
}

//Ahora se pasa a hacer las cosas en el servidor

addr_size = sizeof(sockaddr_in);

while(true){
    printf("Esperando a una conexión\n");
    //Se reserva memoria 
    csock = (int*)malloc(sizeof(long double));
    //Hay que encontrar porque no manda mas de x caracteres

    //LLamada que se bloquea esperando una conexion de un cliente
    if((*csock = accept( hsock, (struct sockaddr*)&sadr, &addr_size))!= -1){
        printf("---------------------\nRecibida conexión de %s\n",inet_ntoa(sadr.sin_addr));
        //Se crea un nuevo hilo por cliente, se llama a socket handler
        pthread_create(&thread_id,0,&SocketHandler, (void*)csock );
        //El almacenamiento del hilo puede ser reclamado cuando el hilo haya terminado
        pthread_detach(thread_id);
    }
    else{
        fprintf(stderr, "Error aceptando cliente %d\n", errno);
    }
}

FINISH:
;
}

void* SocketHandler(void* lp){
int *csock = (int*)lp;

//Buffer en donde se guarda lo recibido
char buffer[8192];
//Longitud del buffer
//int buffer_len = 8192;
//Contador para saber el número de caracteres del buffer
int bytecount;

//Relleno del buffer con ceros
bzero((char *) &buffer, sizeof(buffer));
//memset(buffer, 0, sizeof(buffer));
//Se recibe la informacion del socket y se comprueba que sea valida

//recv(buffer,offset,size,socketflags) 
//buffer es un array de bytes que es la localización en donde se van a guardar los datos
//offset es la posicion en el buffer de datos desde la cual se quiere empezar a guardar
//size es el número de bytes a recibir
//socketflags es la combinacion de flas que se quieren utilizar 0 significa ninguno 
/*if((bytecount = recv(*csock, buffer, sizeof(buffer), 0))== -1){
    fprintf(stderr, "Error recibiendo los datos %d\n", errno);
    goto FINISH;
}*/

if((bytecount = read(*csock,buffer,sizeof(buffer)))== -1){
        fprintf(stderr, "Error recibiendo los datos %d\n", errno);
    goto FINISH;
}

printf("Bytes recibidos %d\nstring recibido %s\n", bytecount, buffer);
//Copia el string al buffer
//strcat(buffer, " SERVER ECHO");

//Se tienen que poner parentesis por el uso de go to de arriba
{       

    string comando = buffer;

    if(comando.compare("zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz") == 0){

        strcpy(buffer,"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy");

    }

}

//Envía el mensaje de vuelta con el string añadido

//send(buffer,offset,size,socketflags) 
//buffer es un array de bytes que contiene los datos a ser enviados
//offset es la posicion en el buffer de datos desde la cual se quiere empezar a enviar datos
//size es el número de bytes a enviar
//socketflags es la combinacion de flas que se quieren utilizar 0 significa ninguno

{
    //Se hace esto ya que en el cliente parece que si no le llegua salto de linea no continua, y se queda esperando
string bufferbarran =  buffer;
bufferbarran +="\n";    
strcpy(buffer,bufferbarran.c_str());
/*
if((bytecount = send(*csock, buffer, strlen(buffer), 0))== -1){
    fprintf(stderr, "Error enviando los datos %d\n", errno);
    goto FINISH;
}
*/
if((bytecount = write(*csock,buffer,strlen(buffer)))== -1){
        fprintf(stderr, "Error enviando los datos %d\n", errno);
    goto FINISH;
}
}

printf("Bytes enviados %d\n", bytecount);

FINISH:
//Se libera la memoria reservada

free(csock);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:43:20.190

TCP 是面向*流*的传输 - 调用`write`和调用之间的对应关系`read`不是 1:1（就像 UDP 等面向数据报的传输一样）。

您需要循环阅读，直到收到一条（或多条）完整消息。由您决定编码某种方式来确定消息在哪里结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:20:12.310

而不是直接在套接字服务器（和客户端）中调用 read()，您应该使用 select() 来知道套接字何时准备好被读取或写入。只调用读/写而不调用 select() 被认为是不好的做法。如果您配置了超时，则 select() 将阻塞直到套接字准备好读取/写入或直到它超时。

这是他们使用 select() 的一个很好的例子：[c++ Socket select and receive problem](https://stackoverflow.com/q/2176336/1158895)

# css - Horizontal List at bottom of Div Block

> ID：10799931
> 
> 赞同：0
> 
> 时间：2012-05-29T13:14:50.047
> 
> 标签：css

Please, Find the jsfiddle demo [here](http://jsfiddle.net/kKp6Z/1/).

I want to take the navigation list at the bottom of green colored band.

Can anyone tell me which style will help me ?

Just adding code below:

```
<div id="navigation">
            <div id="navBar"> 
                <ul>
                    <li>Home</li>
                    <li>Application Tracker</li>
                    <li>Insurance Policy downloads</li>
                    <li>Parner Login</li>
                    <li>SiteMap</li>
                </ul>    
            </div>
</div>​ 
```

And style as below:

```
#navigation{
    height:290px;    
    background-color:olive;
    display:block;
    position:static;
}
#navBar {   
    height: 33px;
    width: 100%;
}
#navigation ul {
    background: -moz-linear-gradient(center bottom , #FCFCFC 25%, rgba(200, 200, 200, 0.8) 50%) repeat scroll 0 0 transparent;
    height: 32px;
    margin: 0;
    opacity: 0.6;
    padding: 0;
}
#navigation ul li {
    color: #302E2E;
    display: inline;
    font-size: 16px;
    margin: 10px;
    padding: 0;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:18:31.987

这是一种方法：

[http://jsfiddle.net/kKp6Z/2/](http://jsfiddle.net/kKp6Z/2/)

用于`position: relative`容器 div 并设置`position:absolute;bottom:0;`为**navBar**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:19:52.820

您需要一个块项目才能使用边距。

```
#navigation ul li {
    color: #302E2E;
    display: inline-block; <------ here
    font-size: 16px;
    margin: 10px;
    padding: 0;
} 
```

您可能希望调整 margin-top 以使其具有与其他边不同的值，以便使文本垂直居中。

顺便说一句 - 如果你正在制作一个菜单，你最好在你的 LI 中放置一个链接并移动除了`display:inline-block`A-tag 的样式之外的所有内容并`display:block`在 A-tag 本身上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:35:53.497

如果你有块导航的确切高度并且它不会改变，你可以这样做：

```
#navBar {   
    height: 33px;
    width: 100%;
    position: relative;
    top: Xpx;
} 
```

其中 Xpx 是您需要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:24:26.450

我的解决方案：http: [//jsfiddle.net/kKp6Z/1/](http://jsfiddle.net/kKp6Z/1/)

# php - 将图标添加到 菜单

> ID：10799933
> 
> 赞同：1
> 
> 时间：2012-05-29T13:14:59.897
> 
> 标签：php, html-lists

> 我正在做一个学校项目，我被困在我想在`<li>`-tags 之间放置图像（ >><< ）的地方。因为它是 wordpress 中的导航，所以它是在 php 中完成的。
> 
> 这是我所拥有的：
> 
> [img http://img825.imageshack.us/img825/253/screenshot20120529at305.png](http://img825.imageshack.us/img825/253/screenshot20120529at305.png)
> 
> 这是我想要的（看看菜单项之间的蓝色东西）：
> 
> [img http://img703.imageshack.us/img703/253/screenshot20120529at305.png](http://img703.imageshack.us/img703/253/screenshot20120529at305.png)
> 
> 我认为这是我需要放置图像/menuitem.png .. 但在哪里？非常感谢您的帮助
> 
> ```
> function inkthemes_nav() {
>     if (function_exists('wp_nav_menu'))
>         wp_nav_menu(array('theme_location' => 'custom_menu', 'container_id' => 'menu', 'menu_class' => 'ddsmoothmenu', 
> ```
> 
> 'fallback_cb' => 'inkthemes_nav_fallback')); 否则 inkthemes_nav_fallback(); }
> 
> ```
> function inkthemes_nav_fallback() {
>     ?>
>     <div id="menu">
>         <ul class="ddsmoothmenu">
>             <?php
>             wp_list_pages('title_li=&show_home=1&sort_column=menu_order');
>             ?>
>         </ul>
>     </div>
>     <?php
> }
> 
> function inkthemes_home_nav_menu_items($items) {
>     if (is_home()) {
>     //home
>         $homelink = '<li class="current_page_item">' . '<a href="' . home_url('/') . '">' . __('Home', 'themia') . '</a></li>';
>     } else {
>      //niet home
>         $homelink = '<li>' . '<a href="' . home_url('/') . '">' . __('Home', 'themia') . '</a></li>/>';
> 
>     }
>     $items = $homelink . $items;
>     return $items;
> } 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:20:46.930

尝试使用仅 CSS 的解决方案：

```
.ddsmoothmenu li {
  background: url('image/menuitem.png') no-repeat left center;
  padding-left:30px /* you have to adjust this manually */
}
.ddsmoothmenu li:first-child{
  background:none;
  padding-left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:20:21.247

您必须在两个位置都添加一个图像标签，上面写着 HERE，但这也会在最后一个项目后面放置一个图像。

```
$homelink = '<li class="current_page_item">' . '<a href="' . home_url('/') . '">' . __('Home', 'themia') . '</a></li> HERE';
    } else {
     //niet home
 $homelink = '<li>' . '<a href="' . home_url('/') . '">' . __('Home', 'themia') . '</a></li>/> HERE'; 
```

最好使用 css 添加它，例如：

```
#menu li {
 padding-right: 30px;
 background: url('path/to/image') no-repeat right center;
}

#menu li:last-child {
 background: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:21:51.533

请参阅 css 属性[`list-style-image`](http://www.w3schools.com/css/css_list.asp)。您可以在第一个使用 css 类时防止这种情况`:first-child`

这里作为一个例子：

```
.ddsmoothmenu li {
    list-style-image: url('image/menuitem.png');
}
.ddsmoothmenu li:first-child{
    list-style-image:none;
} 
```

# php - JToolBarHelper::自定义语法

> ID：10799936
> 
> 赞同：0
> 
> 时间：2012-05-29T13:15:05.457
> 
> 标签：php, joomla, joomla-extensions, joomla2.5

我无法从文档中完全弄清楚这条线的作用：

```
JToolBarHelper::custom( 'masterslavesync', 'save', '', 'Save', false, false ); 
```

它是否在某处（控制器）调用`masterslavesync`函数？还是我必须注册`$this->registerTask()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T16:14:02.163

此代码用于在 joomla 管理员中创建自定义按钮。此代码将创建一个保存，当有人单击此按钮时，它将调用控制器中定义的 masterslavesync 函数。如果你想检查这个，只需创建一个

```
public function masterslavesync()
  {
      echo 'I am here';
      die;
  } 
```

如果文本回显正确，那么一切都很好......希望这将帮助您理解控制流程。你也可以参考这个[http://docs.joomla.org/How_to_create_a_custom_button](http://docs.joomla.org/How_to_create_a_custom_button)

# c# - 调用 ServiceBase.OnStart 和 OnStop... 同一个实例？

> ID：10799937
> 
> 赞同：1
> 
> 时间：2012-05-29T13:15:05.797
> 
> 标签：c#, windows-services

所以我有一个用 c# 编写的 Windows 服务。服务类派生自`ServiceBase`，启动和停止服务分别调用实例方法`OnStart`和`OnStop`。这是该课程的SSCE：

```
partial class CometService : ServiceBase
{
    private Server<Bla> server;
    private ManualResetEvent mre;
    public CometService()
    {
        InitializeComponent();
    }       
    protected override void OnStart(string[] args)
    {
        //starting the server takes a while, but we need to complete quickly
        //here so let's spin off a thread so we can return pronto.
        new Thread(() =>
        {
            try
            {
                server = new Server<Bla>();
            }
            finally
            {
                mre.Set()
            }
        })
        {
            IsBackground = false
        }.Start();
    }

    protected override void OnStop()
    {
        //ensure start logic is completed before continuing
        mre.WaitOne();
        server.Stop();
    }
} 
```

可以看出，有很多逻辑要求当我们调用时`OnStop`，我们正在处理与调用时相同的`ServiceBase`实例`OnStart`。

我可以确定是这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:44:30.980

如果您查看`Program.cs`该类，您将看到如下代码：

```
private static void Main()
{
    ServiceBase.Run(new ServiceBase[]
                {
                    new CometService()
                });
} 
```

也就是说，实例是由您自己的项目中的代码*创建的。*这是所有 Service Manager 调用（包括`OnStart`and `OnStop`）都针对的一个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:22:47.307

我猜是同一个例子。您可以进行快速测试，在类中添加一个静态字段以跟踪对 OnStart 中使用的对象的引用并将其与 OnStop 的实例进行比较。

```
private static CometService instance = null;

protected override void OnStart(...)
{
    instance = this;
    ...
}

protected override void OnStop()
{
    object.ReferenceEquals(this, instance);
    ...
} 
```

# algorithm - 我们可以改变 Dijkstra 的算法以使用负权重吗？

> ID：10799938
> 
> 赞同：7
> 
> 时间：2012-05-29T13:15:07.607
> 
> 标签：algorithm, dijkstra, directed-graph, single-source

取自维基百科的伪代码：

```
function Dijkstra(Graph, source):
 2      for each vertex v in Graph:                                // Initializations
 3          dist[v] := infinity ;                                  // Unknown distance function from source to v
 4          previous[v] := undefined ;                             // Previous node in optimal path from source
 5      end for ;
 6      dist[source] := 0 ;                                        // Distance from source to source
 7      Q := the set of all nodes in Graph ;                       // All nodes in the graph are unoptimized - thus are in Q
 8      while Q is not empty:                                      // The main loop
 9          u := vertex in Q with smallest distance in dist[] ;    // Start node in first case
10          if dist[u] = infinity:
11              break ;                                            // all remaining vertices are inaccessible from source
12          end if ;
13          remove u from Q ;
14          for each neighbor v of u:                              // where v has not yet been removed from Q.
15              alt := dist[u] + dist_between(u, v) ;
16              if alt < dist[v]:                                  // Relax (u,v,a)
17                  dist[v] := alt ;
18                  previous[v] := u ;
19                  decrease-key v in Q;                           // Reorder v in the Queue
20              end if ;
21          end for ;
22      end while ;
23      return dist[] ;
24  end Dijkstra. 
```

现在，在第 14 行中，我们看到松弛仅应用于`u`尚未从 中删除的邻居`Q`。但是，如果我们也把它的邻居`u`从 中删除`Q`，在我看来，该算法**确实**适用于负权重。我没有发现任何与此主张相矛盾的实例。

那么为什么 Dijkstra 的算法没有这样改变呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T13:24:22.227

您当然可以使 Dijkstra 的算法在负值下*工作，只需确保您不遍历任何节点或边两次。*在这里，*工作*，我的意思是终止。然而，结果可能不是最佳的。

Dijkstra 的算法对它有一种贪婪的感觉。想象一下下图：

```
A --- 1 --- B
|           |
3          -4
|           |
C -- -1 --- D 
```

如果我们想从 A 到 B，最好的路径是 ACDB，但 Dijkstra 的算法会找到 AB。你不能让 Dijkstra 的算法*预测未来*，因为它是一个贪心算法。通过*预测未来*，我的意思是知道以后，路径的成本可能会降低。请注意，这意味着如果将修改应用于 Dijkstra 算法的一个版本，该版本会在看到目标后立即终止。在您发布的版本中，您的修改工作除了有更有效的方法来处理负边缘（见评论）。

附带说明一下，具有负值的无向图或具有负循环的有向图中的最短路径甚至没有意义！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T13:44:45.433

Dijkstra 可以一次访问每个节点，因为当它选择要访问的新节点时，他会选择从​​根节点开始具有最短路径的未访问节点。因此，他可以安全地假设没有更短的方法可以通过另一个未访问的节点到达该节点（因为如果您知道从 A 到 B 的最佳方式成本为 2，而从 A 到 C 的最佳方式成本为 3，没有机会找到从 A 到 B 的更好方法，例如 A>C>B)。

如果你添加负权重，你会突然打破这个假设。

您当然可以使用您建议的修改，但是您将失去只访问每个节点一次的好处；因此，与其他算法（例如 Ford-Bellman）相比，它会失去性能增益

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-29T13:55:47.757

你基本上有两个选择。

1.  您可以根据建议更改算法。如果你有没有负循环的有向图，那么这是一个正确的算法，但它可能真的很慢（因为你会多次访问每个节点）。我认为存在这种算法具有指数时间复杂度的情况。

2.  您可以通过使用潜力来改变边际成本。每个顶点都有一些潜在的 h(v)，边 u->v 的权重将为 w(u,v) + h(u) - h(v)。请注意，这不会影响给定两个顶点 (s, t) 之间的哪条路径最短，只是它的成本会被 h(s) - h(t) 改变。但是你需要计算潜力。这里建议这样做的好方法：[http ://en.wikipedia.org/wiki/Johnson's_algorithm](http://en.wikipedia.org/wiki/Johnson%27s_algorithm)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-29T13:20:55.707

不，不可能如所述。该算法对负权重没有*意义*，除非您严格限制提供的图形类型。

假设一个图有节点 A、B、C 和权重 AB=-1、BA=0、BC=1 的边。

现在 A 和 C 之间不再存在最短路径，您总是可以通过在 A 和 B 之间再来回走一次来缩短路径。

当然，算法仍然会运行，但它会给出*错误的答案*。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-19T19:48:42.530

是的，您的修改将在您未提及的 2 个假设下起作用，但我想这是暗示的：

1.  最短路径必须在您的输入图中实际定义。如果你放弃对非负权重的限制，你至少必须要求没有负权重的循环。
2.  第 19 行中的“减少 Q 中的键 v”操作对于不在 Q 中的节点 v 并没有真正意义。但是，当然，您可以使用新值将它们重新添加到 Q 中。

但是，您会失去 Dijkstra 算法的一个重要特性：它具有良好的最坏情况渐近性能。现成的 Dijkstra 保证了良好的性能，因为它最多访问每个节点和每个边一次。包含您的更改后，已删除的节点可以重新添加到优先级队列中，并且可能必须一遍又一遍地访问图表的大部分。在最坏的情况下，您必须执行与 Bellman-Ford 算法一样多的松弛，但是您有优先级队列的额外开销。这会使您在最坏情况下的性能比 Bellman-Ford 更差，因此对于带有负边的图来说这是首选。

这并不意味着您修改后的 Dijkstra 没有用。如果负边很少和/或如果这些负边通过昂贵的路径与图的其余部分分开，它可以比 Bellman-Ford 表现得更好。但是要为非常糟糕的最坏情况做好准备。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-07T09:56:55.553

好吧，仅仅放松 Dijkstra 的修改版本中已经访问过的节点是不够的（它会在包含负边的图中给你一个错误的答案）。此外，您需要将任何宽松的边缘放入您的容器中（例如，优先级队列或仅队列）。因此，您可以将第 19 行的代码修改为：

```
if v is in priority queue
    then decrease-key(v)
else
    add v into priority queue 
```

在这种情况下，您的算法可以工作。此外，对于正加权图，修改版 Dijkstra 的效率不会降低。这很容易证明，因为这自然是一个贪心算法。

但是，对于包含负边的图，新算法在理论分析方面可能会变慢，但在实践中会很好。

其实你可以看看段丁凡在中国（1994）发表的一种名为SPFA（Shortest Path Faster Algorithm）的算法。许多 OIer（信息奥林匹克）都知道这种算法有时可能会击败 Dijkstra。

# jquery - highcharts 刷新 CSV 数据重复不刷新

> ID：10799943
> 
> 赞同：2
> 
> 时间：2012-05-29T13:15:17.153
> 
> 标签：jquery, ajax, highcharts

我已经搜索并搜索了此问题的答案，但在任何地方都找不到。

我有一个 highcharts 折线图，它可以从 CSV 文件中将数据读取到 5 个系列中，这绝对可以正常工作并且绘制得很好。CSV 文件中的数据每小时更新一次（每个系列中的最新值会发生变化），目前我必须手动刷新（按 F5）才能刷新实际图表数据。

到目前为止，我已经尝试了chart.destroy、series.remove、series、setData 都无济于事，每次图表都会愉快地销毁，然后按创建新按钮，图表会返回所有5个系列重复，每次我单击创建，它会向图表添加五个新系列，而不是破坏它并重新创建。

见下面的代码：

```
var chart;

        $(document).ready(function() {
            var options = {
                chart: {
                    renderTo: 'linegr',
                    defaultSeriesType: 'line'
                },
                title: {
                    text: 'Malicious IPs BY Type'
                },
                xAxis: {
                    categories: []
                },
                yAxis: {
            title: {
                   text: 'Unique IPs'
                   }
                },
                subtitle: {
                    text: 'Last 10 Days'
                },
                tooltip: {
                    formatter: function() {
                    return '<b>'+ this.x +'</b>: '+ roundVal(this.y);
                    }
                },
                plotOptions: {
                    pie: {
                        allowPointSelect: true,
                        cursor: 'pointer',
                        dataLabels: {
                            enabled: false
                    },
                    showInLegend: true
                    }
                },
                series: [],
                exporting: {
        buttons: [
            {
                symbol: 'diamond',
                x: -62,
                symbolFill: '#B5C9DF',
                hoverSymbolFill: '#779ABF',
                _titleKey: 'reloadGraph',
                onclick: function() {
                chart.destroy();
                }
            }
        ]
    }
};
create();

function create() {
    $.get('dat.csv', function(data) {
    // Split the lines
    var lines = data.split('\n');

    // Iterate over the lines and add categories or series
    $.each(lines, function(lineNo, line) {
        var items = line.split(',');

        // header line containes categories
        if (lineNo == 0) {
            $.each(items, function(itemNo, item) {
                if (itemNo > 0) options.xAxis.categories.push(item);
            });
        }

        // the rest of the lines contain data with their name in the first position
        else {
            var series = {
                data: []
            };
            $.each(items, function(itemNo, item) {
                if (itemNo == 0) {
                    series.name = item;
                } else {
                    series.data.push(parseFloat(item));
                }
            });

            options.series.push(series);

        }

    });

    // Create the chart
    var chart = new Highcharts.Chart(options);
function destroy() {
    chart.destroy();
    var data='';
            window.alert(chart.series.length);
    for(i=0; i<chart.series.length; i++){
        chart.redraw(true);
        chart.series[i].remove(false);
    }
        }
        $('#create').click(create);
        $('#destroy').click(destroy);
}); 
```

我希望并猜测它是一些非常简单和愚蠢的东西，我只是对代码视而不见并且找不到:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:56:48.717

我认为您的问题是每次创建图表时都在重用相同的选项对象。尝试克隆默认选项，然后修改克隆对象以创建图表选项。您可以使用 jQuery 的扩展方法来执行此操作。只需确保每次都为类别和系列创建新数组，如下所示：

```
(function(){
    var chart,
    options = {
        chart: {
            renderTo: 'linegr',
            defaultSeriesType: 'line'
        },
        title: {
            text: 'Malicious IPs BY Type'
        },
        xAxis: {
            categories: []
        },
        yAxis: {
    title: {
           text: 'Unique IPs'
           }
        },
        subtitle: {
            text: 'Last 10 Days'
        },
        tooltip: {
            formatter: function() {
            return '<b>'+ this.x +'</b>: '+ roundVal(this.y);
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
            },
            showInLegend: true
            }
        },
        series: [],
        exporting: {
            buttons: [
                {
                    symbol: 'diamond',
                    x: -62,
                    symbolFill: '#B5C9DF',
                    hoverSymbolFill: '#779ABF',
                    _titleKey: 'reloadGraph',
                    onclick: function() {
                                        create();
                    }
                }
            ]
        }
    };

    function create() {
            if(chart) chart.destroy();
        $.get('dat.csv', function(data) {
            var newOptions = $.extend(true, {}, options, {
                xAxis : {
                    categories : []
                },
                series : []
            });

            // Split the lines
            var lines = data.split('\n');

            // Iterate over the lines and add categories or series
            $.each(lines, function(lineNo, line) {
                var items = line.split(',');

                // header line containes categories
                if (lineNo == 0) {
                    $.each(items, function(itemNo, item) {
                        if (itemNo > 0) newOptions.xAxis.categories.push(item);
                    });
                }

                // the rest of the lines contain data with their name in the first position
                else {
                    var series = {
                        data: []
                    };
                    $.each(items, function(itemNo, item) {
                        if (itemNo == 0) {
                            series.name = item;
                        } else {
                            series.data.push(parseFloat(item));
                        }
                    });

                    newOptions.series.push(series);

                }

            });

            // Create the chart
            chart = new Highcharts.Chart(newOptions);

            $('#create').click(create);
            $('#destroy').click(chart.destroy);
        });
    }

    $(document).ready(create);
}()); 
```

# http - Google API - 来自 Oauth2 的令牌请求返回“invalid_request”

> ID：10799947
> 
> 赞同：8
> 
> 时间：2012-05-29T13:15:27.470
> 
> 标签：http, oauth-2.0, libcurl

我正在尝试使用 Google 的日历 API 制作应用程序。我按照[这里](https://developers.google.com/accounts/docs/OAuth2WebServer)的指示。我可以请求获取授权码，但我似乎无法形成有效的请求来获取访问令牌。我不断得到回应`{"error" : "invalid_request"}`。这是我正在发出的 POST 请求：

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

code=4/vxQqw9JMYEnXvI8A_93OV7kBSg6h.8r2yJUkMc18dshQV0ieZDAraZNwsbwI&
client_id=[my client id]&
client_secret=[my client secret]&
redirect_uri=http://localhost:8080/auth&
grant_type=authorization_code 
```

下面是通过 curl 调用 url 的输出。我的实际应用程序是用 Node.js 编写的，但我从 curl 获得的响应与通过应用程序所做的响应相同。我四处搜索并看到有类似问题的人，但仍然无法弄清楚我做错了什么。

```
curl -v -k --header "Content-Type: application/x-www-form-urlencoded" --data-urlencode "code=4/vxQqw9JMYEnXvI8A_93OV7kBSg6h.8r2yJUkMc18dshQV0ieZDAraZNwsbwI&client_id=[my client id]&client_secret=[my client secret]&redirect_uri=http://localhost:8080/auth&grant_type=authorization_code" https://accounts.google.com/o/oauth2/token
* About to connect() to accounts.google.com port 443 (#0)
*   Trying 173.194.74.84... connected
* Connected to accounts.google.com (173.194.74.84) port 443 (#0)
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using RC4-SHA
* Server certificate:
*    subject: C=US; ST=California; L=Mountain View; O=Google Inc; CN=accounts.google.com
*    start date: 2011-07-21 00:00:00 GMT
*    expire date: 2013-07-18 23:59:59 GMT
*    common name: accounts.google.com (matched)
*    issuer: C=ZA; O=Thawte Consulting (Pty) Ltd.; CN=Thawte SGC CA
*    SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.
> POST /o/oauth2/token HTTP/1.1
> User-Agent: curl/7.21.3 (i386-apple-darwin8.11.1) libcurl/7.21.3 OpenSSL/0.9.7l zlib/1.2.5 libidn/1.17
> Host: accounts.google.com
> Accept: */*
> Content-Type: application/x-www-form-urlencoded
> Content-Length: 180
> 
< HTTP/1.1 400 Bad Request
< Cache-Control: no-cache, no-store, max-age=0, must-revalidate
< Pragma: no-cache
< Expires: Fri, 01 Jan 1990 00:00:00 GMT
< Date: Tue, 29 May 2012 12:43:49 GMT
< Content-Type: application/json
< X-Content-Type-Options: nosniff
< X-Frame-Options: SAMEORIGIN
< X-XSS-Protection: 1; mode=block
< Server: GSE
< Transfer-Encoding: chunked
< 
{
  "error" : "invalid_request"
* Connection #0 to host accounts.google.com left intact
* Closing connection #0
* SSLv3, TLS alert, Client hello (1):
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-29T16:09:58.093

请求正文应该是这样的单行：

```
code=4/vxQqw9JMYEnXvI8A_93OV7kBSg6h.8r2yJUkMc18dshQV0ieZDAraZNwsbwI&client_id=[my client id]&
client_secret=[my client secret]&redirect_uri=http://localhost:8080/auth&grant_type=authorization_code 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T21:47:47.470

您没有对您的发布请求进行 URL 编码。我可以通过

```
 redirect_uri=http://localhost:8080/auth 
```

冒号和斜杠没有 %99。我对 wget 有同样的问题。我以为它会为我进行 URL 编码，但它不会。此外，在您的自定义 POST 中，您不能在 & 号和下一个表单 post 值之间添加换行符。它必须全部在一条线上。这也是我使用 wget 的问题。

# java - Java web UI - 从哪里开始构建现代网站？

> ID：10799951
> 
> 赞同：5
> 
> 时间：2012-05-29T13:15:38.250
> 
> 标签：java, spring, jakarta-ee, struts2, web

我承认这个问题广泛而模糊，但我想从那些有 Java Web-UI 经验的人那里知道。

当您接到构建 Web 应用程序的任务时，例如网站（例如，电子商店），什么框架是接触最新 Java Web 技术的良好开端？

问题不在于哪个框架更好以及为什么更好，问题是：如果你想学习用 Java 构建 web-ui 应用程序的常用和**现代**方法，最好从哪里开始挑选构建可扩展和可靠 web 的要领应用程序可以从只有几页的启动站点发展为每秒数百个连接的大型应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:21:08.087

[Spring Roo](http://www.springsource.org/spring-roo)应该让您立即启动并运行，并自动让您使用 Spring Framework、Spring MVC、Spring WebFlow、JSP、JSTL、JPA、AspectJ 等。

我个人使用 Roo 来打基础，然后我“取消 Roo”我的项目并继续我的业务以我需要的方式扩展项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T16:46:46.180

有很多不错的选择：Spring MVC、GWT、Grails、Roo（注意我是如何故意忽略 JSF 的？）。这实际上取决于您对语言的各个部分的适应程度。假设您遵循约定，Grails 和 Roo 将在应用程序的所有层中为您做很多事情。GWT 将让您远离丑陋的 html 和 javascript。Spring MVC 非常不具侵入性，主要充当调度程序和绑定器，将视图、持久性等所有细节留给编码人员。

这个问题没有正确的答案，这完全取决于你想做什么，它需要有多灵活等等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T17:01:12.180

好吧，还有两种启动新 Web 项目的可能性：

*   选择可用的[Maven 原型](http://maven.apache.org/archetype/maven-archetype-plugin/usage.html)。
*   看看[AppFuse](http://appfuse.org/display/APF/AppFuse+QuickStart)（它也使用 maven）。AppFuse 灯更适合初次接触。

我并不是说它们是最好的选择，但很高兴知道它们的存在。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T18:34:05.223

我认为 Web 应用程序在浏览器方面越来越丰富，服务器组件越来越小。也就是说，MVC 模式在浏览器中的重要性越来越大，因此这起到了最大限度地减少在服务器上保存和跟踪状态的需要的效果。

因此，最相关的问题可能不是使用 Java 构建 Web 应用程序的现代方法，而是*整体*构建 Web 应用程序的现代方法。但是，如果您只关注 Java 部分，您会看到从 MVC 更多地转向 REST 风格的以数据为中心的服务。无论是 Spring MVC 中的 REST 注释还是更“纯”的 JAX-RS 实现（还有很多），服务器最终保留的小状态是安全上下文。

就纯粹的可扩展性而言，这与这些以数据为中心的服务的设计和适当的粒度有关。当然，服务器本身有一些基础知识（共享资源，如连接池、线程池、数据库调整），但这些并不是什么特别新的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:21:28.857

您的问题对于 StackOverflow 来说太笼统了。

来自 Wikipedia 的史诗比较 - [Web 应用程序框架的比较](http://en.wikipedia.org/wiki/Comparison_of_web_application_frameworks)

# jsp - Tomcat 7.0.27 不适用于自定义标签

> ID：10799955
> 
> 赞同：2
> 
> 时间：2012-05-29T13:15:50.190
> 
> 标签：jsp, tomcat, jstl, tomcat7, jsp-tags

我正在制作一个与 tomcat 7 (7.0.27) 兼容的应用程序（为 tomcat 5.5 开发）。该应用程序使用标准 jstl 以及自定义标记。标准标签工作正常，但是我无法让自定义标签与 tomcat 7 一起工作（它们在 tomcat 5.5 中工作正常）。这个问题的原因可能是什么？

这有效：

```
<c:out value="${arrival.flt}" /> 
```

这不会：

```
<flight:identity-flr flight="${arrival}" /> 
```

编辑：

是的，我在 index.jsp 文件中指定了我的 taglib：

```
<%@taglib prefix="flight" uri="path_to_tag_library/flight"%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T12:09:29.367

我似乎找到了解决这个问题的方法。我没有意识到 tomcat 5.5 包含 3 个存储 .jar 的文件夹 (lib)。我只从一个文件夹中复制了 jars，并且应用程序也从 common/lib 文件夹中复制了所需的库。将它们复制到我的项目的 WEB-INF/lib 并重建应用程序后，自定义标签现在可以在此应用程序中使用。

# asp.net - Silverlight 和 Web 应用程序通用库

> ID：10799956
> 
> 赞同：1
> 
> 时间：2012-05-29T13:16:00.607
> 
> 标签：asp.net, silverlight, silverlight-3.0, asp.net-3.5

您好，我有一个在 Silverlight 上完成的应用程序，该应用程序内部存在很多类。我需要创建新的应用程序，你应该从 Silverlight 应用程序中获取一些类。我决定进行重构并将这些类移动到外部库，并添加对 Silverlight 和我的新网站的类似引用。但是 Silverlight 不允许使用普通库，我只需要使用特殊的 Silverlight 类库。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:22:49.880

您可以创建一个[可移植类库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)项目

# java - Java 和日文字符

> ID：10799964
> 
> 赞同：4
> 
> 时间：2012-05-29T13:16:29.957
> 
> 标签：java, encoding, character-encoding, cjk

我在我的应用程序和 JSON 中使用 Struts。当我尝试提交日文字符时，在我的控制器类中我得到一个这样的字符串：

```
&#12373 ; &#12383 ; &#12399 ; &#12414 ; &#12419 ; &#12425 ;  (without spaces) 
```

我应该把它转换成日文字符，但我找不到怎么做！

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T14:32:33.830

这就是 unicode 的 XML 编码。使用[Apache Commons 库](http://commons.apache.org/lang/)取消转义它：

```
import org.apache.commons.lang.StringEscapeUtils;

String input = "&#12373; &#12383; &#12399; &#12414; &#12419; &#12425;";
String plain = StringEscapeUtils.unescapeXml(input);
System.out.println(plain); // Will print your characters 
```

# php - OSError：[Errno 13] 使用 Sublime phpcs 包 OSX 10.7 时，python 的权限被拒绝

> ID：10799969
> 
> 赞同：1
> 
> 时间：2012-05-29T13:16:36.817
> 
> 标签：php, python, sublimetext, codesniffer

我尝试将 Php Code Sniffer 与 Sublime 一起使用，但在 sublime 终端中，每次尝试嗅探文件时都会得到以下信息：

```
Traceback (most recent call last):
File "./sublime_plugin.py", line 350, in run_
File "./phpcs.py", line 382, in run
File "./phpcs.py", line 270, in run
File "./phpcs.py", line 98, in get_errors
File "./phpcs.py", line 138, in execute
File "./phpcs.py", line 141, in parse_report
File "./phpcs.py", line 106, in shell_out
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py", line 623, in __init__
errread, errwrite)
File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/subprocess.py", line 1141, in _execute_child
raise child_exception
OSError: [Errno 13] Permission denied 
```

看起来某处存在权限问题，但是：

*   我已将 /opt/local/lib/php/pear/bin 中的 phpcs 文件设置为可执行文件并检查了所有父目录
*   我已将 sublime 包目录中的 phpcs.py 设置为可执行文件（尽管不确定是否需要它），与父目录同上
*   我已经检查过了，我可以在命令行上很好地运行 phpcs。它在 PATH 中，它做它应该做的事情并返回没有错误的结果。

根据 ms4py 注释更新输出 - ln 105 处的“打印 cmd”：

```
['php', '-l', '-d display_errors=On', u'/Users/pete/projects/portal/apps/frontend/modules/chilled/actions/actions.class.php']
[u'/opt/local/lib/php/pear/bin', '--report=checkstyle', '-n', u'--standard=PEAR', u'/Users/pete/projects/portal/apps/frontend/modules/chilled/actions/actions.class.php'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-19T10:17:20.743

将评论放在此答案中并标记为社区 wiki：

> 检查一下，这里是修复： [github.com/benmatselby/sublime-phpcs/issues/4](http://github.com/benmatselby/sublime-phpcs/issues/4) – schlamar 2012 年 5 月 29 日 13:47
> 
> 那么设置应该直接链接到可执行文件： `'/opt/local/lib/php/pear/bin/phpcs'`- schlamar 2012-05-29 14:15:07

正如 github 问题中所解释的，phpcs 中有一个新设置来解决此问题，如果 Sublime 无法自动找到它，则允许用户提供 php cs 可执行文件的路径：

`phpcs_executable_path`

# ruby - 为什么Ruby中有一个String#replace？

> ID：10799970
> 
> 赞同：5
> 
> 时间：2012-05-29T13:16:37.137
> 
> 标签：ruby, string, replace

在浏览 ruby​​ 文档时，我找到[了 replace 方法](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-replace)，但我无法弄清楚该方法的用例是什么。

我唯一能想到的就是内存管理（如果新字符串的长度小于或等于前一个字符串，则不需要重新分配）。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:24:59.577

用例实际上只是如果您想在其他语言中实现类似于传递引用的东西，其中可以直接更改变量的值。因此，您可以将 String 传递给一个方法，该方法可能会将字符串完全更改为其他内容。

但是，您可以通过清空字符串并将一些新字符串附加到空字符串来以更全面的方式实现相同的目的。其他类也有类似的方法（参见 Array 和 Hash）。

但是，如果您发现自己真的觉得需要使用这些方法，那么很有可能，您已经把自己逼到了一个角落，应该寻找另一种出路，而不是需要改变整个字符串的方法（例如，将数据结构传递给方法，而不仅仅是一个字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:20:38.970

可以使用 replace 方法替换整个字符串，而不是子字符串：

```
myString = "Welcome to PHP!" 
```

=> "欢迎使用 PHP！"

```
myString.replace "Goodbye to PHP!" 
```

=> “再见 PHP！”

来源 - [http://www.techotopia.com/index.php/Ruby_String_Replacement,_Substitution_and_Insertion#Changing_a_Section_of_a_String](http://www.techotopia.com/index.php/Ruby_String_Replacement,_Substitution_and_Insertion#Changing_a_Section_of_a_String)

# scala - 如何在 Scala 中设计一个简单的监控库？

> ID：10799971
> 
> 赞同：2
> 
> 时间：2012-05-29T13:16:37.690
> 
> 标签：scala, functional-programming, monads, software-design

假设我正在开发一个应用程序，它由几个组件组成。现在我想写一个函数来返回应用程序状态

```
案例类状态（...）
def status[A](a:A):Status = {...} // A - 用于计算状态的数据
```

这个函数可能应该调用其他函数，这些函数返回组件的状态，每个组件函数都调用其他函数，返回子组件的状态等等，等等

您将如何在 Scala 中设计此类函数的库？这些函数看起来像`monad`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T16:00:01.347

这里有两种明显的方法。第一个使用模式匹配来分解数据结构：

```
// Just use Boolean for status
type Status = Boolean

trait Statusable
class class A(isOk : Boolean) extends Statusable
class class B(a : A) extends Statusable
class class C(first : B, second : B) extends Statusable

def status(a : Statusable) : Status = a match {
  case a : A => a.isOk
  case B(a) => status(b.a)
  case C(first, second) => status(first) && status(second)
}

status(C(B(A(true)), B(A(false))))
// returns false

status(C(B(A(true)), B(A(true))))
// returns true 
```

现在，您可能会认为该特征“Stat”看起来有点可怕，并且您可能不想强制您的数据类从一个公共基础派生。在这种情况下，类型类来拯救：

```
trait HasStatus[A] { def getStatus(a : A) : Status }
object HasStatus {

  def status[A : HasStatus](a : A) = implicitly[HasStatus[A]].getStatus(a)

  implicit object AHasStatus extends HasStatus[A] {
    def getStatus(a : A) = a.isOk
  }
  implicit object BHasStatus extends HasStatus[B] {
    def getStatus(b : B) = status(b.a)
  }
  implicit object CHasStatus extends HasStatus[C] {
    def getStatus(c : C) = status(c.first) && status(c.second)
  }
}
import HasStatus._
status(C(B(A(true)), B(A(false))))
//returns false 
```

# unix - 最好使用 awk 和 grep 从其上方的行中提取模式和某个字段

> ID：10799974
> 
> 赞同：1
> 
> 时间：2012-05-29T13:16:47.807
> 
> 标签：unix, awk, grep

我有一个这样的文本文件：

```
********** time1 **********
line of text1
line of text1.1
line of text1.2
********** time2 **********
********** time3 **********
********** time4 **********
line of text2.1
line of text2.2
********** time5 **********
********** time6 **********
line of text3.1 
```

我想提取文本行和它**上面**的时间（没有星星）并将其存储在一个文件中。（**必须忽略它们下面没有文本行的时间**）。我想最好用 grep 和 awk 来做这件事。因此，例如，我对上述代码的输出应该是

```
time1 : line of text1
time1 : line of text1.1
time1 : line of text1.2
time4 : line of text2.1
time4 : line of text2.2
time6 : line of text3 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:40:11.573

这假设时间中没有空格，并且每个时间标记之后只有一行（或零行）文本。

```
awk '$1 ~ /\*+/ {prev = $2} $1 !~ /\*+/ {print prev, ":", $0}' inputfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T14:13:30.753

与空间一起工作的时间：

```
awk '/^[^*]+/ { gsub(/*/,"",x);printf x": "; print };{x=$0}' data.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:33:20.210

你可以这样做`vim`：

```
:%s_\*\+ \(YOUR TIME PATTERN\) \*\+\_.\(\[^*\].*\)$_\1 : \2_ | g_\*\+ YOUR TIME PATTERN \*\+_d 
```

那就是搜索`TIME PATTERN`行并保存时间模式和下一行（如果它不是以`*`. 然后从它们创建新行。然后删除所有剩余的`TIME PATTERN`行。

*请注意*，这假设时间模式线以`*`等结尾。

与`awk`：

```
awk '/\*+ YOUR TIME PATTERN \*+/ { time=gensub("\*+ (YOUR TIME PATTERN) \*+","\\1","g") }
     ! /\*+ YOUR TIME PATTERN \*+/ { print time " : " $0 }' INPUTFILE 
```

还有其他方法可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T14:02:53.457

在 awk 中，请参阅：

```
#!/bin/bash

awk '
    BEGIN{
        t=0
    }
    {
        if ($0 ~ " time[0-9]+ ") {
            v=$2
            t=1
        }
        else if ($0 ~ "line of text") {
            if (t==1) {
                printf("%s : %s\n", v, $0)
            } else {
               t=0;
            }
        }
    }
' FILE 
```

只需替换`FILE`为您的文件名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T13:42:28.607

这可能对您有用（GNU sed）：

```
sed '/^\*\+ \S\+.*/!d;s/[ *]//g;$!N;/\n[^*]/!D;s/\n/ : /' file 
```

解释：

*   `*`如果不删除，则查找以 's 开头的行。`/^\*\+ \S\+.*/!d`
*   有时间线。删除`*`'s 和空格（留出时间）。`s/[ *]//g`
*   获取下一行`$!N`
*   检查第二行不以`*`' 开头，否则删除第一行`/\n[^*]/!D`
*   得到预期的图案，`\n`用间隔替换`:`并打印。`s/\n/ : /`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T14:08:55.490

```
awk '{ if( $0 ~ /^\*+ time[0-9] \*+$/ ) { time = $2 } else { print time " : " $0 } }' file 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-29T17:02:23.277

```
$ uniq -f 2 input-file | awk '{getline n; print $2 " : " n}' 
```

如果您的时间戳中有空格，请将参数更改为`-f`选项，以便`uniq`仅比较`*`. 例如，使用`-f X`X-2 是时间戳中的空格数。此外，如果时间戳中有空格，则需要更改 awk。这些中的任何一个都可以工作：

```
$ uniq -f 3 input-file | awk -F '**********' '{getline n; print $2 " : " n}'
$ uniq -f 3 input-file | awk '{getline n; $1=""; $NF=""; print $0 ": " n }' 
```

# android - 拍照不预览 Android

> ID：10799976
> 
> 赞同：10
> 
> 时间：2012-05-29T13:16:49.013
> 
> 标签：android, android-camera, surfaceview

我想拍一张没有任何预览的照片。我使用了这段代码，但出现错误：

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Camera.Parameters parameters = camera.getParameters();
    parameters.setPictureFormat(PixelFormat.JPEG);
    camera.setParameters(parameters);
    SurfaceView mview = new SurfaceView(getBaseContext());
    try {
        camera.setPreviewDisplay(mview.getHolder());
        camera.startPreview();
        camera.takePicture(null,null,photoCallback);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

 Camera.PictureCallback photoCallback=new Camera.PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) {

        Uri uriTarget = getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());
        OutputStream imageFileOS;

        try {

            imageFileOS = getContentResolver().openOutputStream(uriTarget);
            imageFileOS.write(data);
            imageFileOS.flush();
            imageFileOS.close();

            Toast.makeText(AndroidTestJNIActivity.this, "Image saved: " + uriTarget.toString(), Toast.LENGTH_LONG).show();

        } catch (FileNotFoundException e) {
            e.printStackTrace();

        } catch (IOException e) {
            e.printStackTrace();

        }
        finish();

    }
}; 
```

当我尝试访问相机时收到 NullPointerException。我不知道如何初始化它。我认为问题在于相机从未初始化。

```
 05-29 14:40:20.330: E/AndroidRuntime(15571): FATAL EXCEPTION: main
 05-29 14:40:20.330: E/AndroidRuntime(15571): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.achillessecurity.androidtestjni/com.achillessecurity.androidtestjni.AndroidTestJNIActivity}: java.lang.RuntimeException: Fail to connect to camera service
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-29 14:40:20.330: E/AndroidRuntime(15571):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.os.Handler.dispatchMessage(Handler.java:99)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.os.Looper.loop(Looper.java:130)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.ActivityThread.main(ActivityThread.java:3835)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at java.lang.reflect.Method.invokeNative(Native Method)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at java.lang.reflect.Method.invoke(Method.java:507)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at dalvik.system.NativeStart.main(Native Method)
 05-29 14:40:20.330: E/AndroidRuntime(15571): Caused by: java.lang.RuntimeException: Fail to connect to camera service
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.hardware.Camera.native_setup(Native Method)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.hardware.Camera.<init>(Camera.java:258)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.hardware.Camera.open(Camera.java:235)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at com.achillessecurity.androidtestjni.AndroidTestJNIActivity.onCreate(AndroidTestJNIActivity.java:42)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 05-29 14:40:20.330: E/AndroidRuntime(15571):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722) 
```

我通过以下方式初始化相机： `camera= Camera.open();`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T13:19:31.487

使用此权限：

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" /> 
```

你可以使用这个实例化一个相机对象

```
Camera mycamera = Camera.open(); 
```

如果您很简单，可以尝试这里描述的方法非常简单：

[http://developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T10:04:19.350

Android不能在没有预览的情况下使用相机......但是，您可以将预览大小设置为1x1 px，然后您将看不到它，您仍然可以使用相机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-22T23:27:50.953

关于您的`Fail to initialize camera`错误，另一种可能性是相机正在被其他东西使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-18T05:13:25.263

这是因为相机不能立即工作，而且经常不同步。`startPreview ()`某些设备需要和之间的显着延迟`takePicture ()`。

例如：三星设备需要至少 100 毫秒才能启动相机。

您可以通过延迟`takePicture()`方法来解决此错误。

```
mview.postDelayed(new Runnable() {
    @Override
    public void run() {
        try {
            camera.takePicture(null, null, photoCallback);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}, 100); 
```

# python - 如何根据执行时间分析 django 应用程序？

> ID：10799982
> 
> 赞同：14
> 
> 时间：2012-05-29T13:17:17.323
> 
> 标签：python, django, performance, cpu-speed, django-debug-toolbar

我的 Django 应用程序非常慢，我想弄清楚什么需要时间：

我尝试过`Django-debug-toolbar`，但找不到一个可以让我中断加载时间的面板。

我的要求：

*   堆栈跟踪类型的输出，其中包含为渲染页面而调用的每个模块的执行时间。
*   我想了解整个页面渲染过程的哪个部分需要时间？
*   另外，哪个部分消耗了多少 CPU [最重要]？

**能`django-debug-toolbar`做到吗？[什么面板？]**

**任何其他 django-app 可以做到这一点？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T16:30:30.683

## `django-debug-toolbar`2.0

默认情况下，[`django-debug-toolbar`](https://pypi.org/project/django-debug-toolbar/)2.0 包含[`'debug_toolbar.panels.profiling.ProfilingPanel'`](https://django-debug-toolbar.readthedocs.io/en/latest/panels.html#profiling)在设置中`DEBUG_TOOLBAR_PANELS`。您可以通过勾选工具栏中的“Profiling”复选框并刷新页面来查看此分析信息。

### 旧版本`django-debug-toolbar`：

您可以尝试 django-debug-toolbar 的分析面板（确保您使用来自[github](https://github.com/django-debug-toolbar/django-debug-toolbar)的应用程序的最新版本）。在 settings.py 中启用面板，如下所示：

```
DEBUG_TOOLBAR_PANELS = (
  'debug_toolbar.panels.version.VersionDebugPanel',
  'debug_toolbar.panels.timer.TimerDebugPanel',
  'debug_toolbar.panels.profiling.ProfilingDebugPanel',
) 
```

这个面板的存在没有记录在 django-debug-toolbar 的自述文件中；这就是为什么我首先在​​这里回答。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-30T05:55:22.970

终于找到了一种分析我的 django webapp 的方法：

以下 2 个 django 片段提供`middleware`了该配置文件的整个流程和输出（如果请求`prof`位于）`GET keys`：

*   [http://djangosnippets.org/snippets/727/](http://djangosnippets.org/snippets/727/) [使用 cProfile]

*   [http://djangosnippets.org/snippets/186/](http://djangosnippets.org/snippets/186/) [使用热点]

简单明了的分析 - 拯救了我的一天！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T13:41:36.157

我建议改为编写一些集成测试，或者至少使用内置的测试客户端来自动化请求并在视图中放置大量调试语句

Django 有一个内置的测试客户端：

```
from django.test.client import Client
c = Client()
response = c.post('/slow_url/') 
```

然后在你看来：

```
def slow_url(request):
    start = time.time()
    print 'Started db query'
    result = SomeComplexModel.objects.all()
    print 'Finished db query, took ', time.time() - start
    return render('some_complex_template.html', {'result': result}) 
```

自动化发出请求的过程并能够在您进行小的更改时一次又一次地复制它们是您改进代码的方式。如果您测量运行每个函数所需的时间，则可以计算出 CPU 时间。您很快就可以了解实际消耗资源的部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-19T12:04:15.537

它不是分析，但我通常只是使用视图来计算执行时间，它也适用于需要用户登录的视图，它在一个简单的页面中显示执行时间

```
 def test(request):
     from django.test.client import Client
     import time

     c = Client()

     #client login if needed
     response = c.post('/login/', {'username': 'admin', 'password': 'password'})

     start = time.time()
     response = c.get('/pagetotest/')

     #print response
     #print 'Finished, time: ', time.time() - start # output to console
     end=time.time() - start
     return render(request,'loadingtime.html',{'time':end}) 
```

我认为这是一个好的开始，希望对某人有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-08T18:54:50.977

[django-silk](https://github.com/jazzband/django-silk)可以提供帮助。

*   安装它：`pip install django-silk`
*   将其添加到`settings.py`：

```
MIDDLEWARE = [
    ...
    'silk.middleware.SilkyMiddleware',
    ...
]

INSTALLED_APPS = (
    ...
    'silk'
) 
```

*   在中添加路线`urls.py`：

```
urlpatterns += [url(r'^silk/', include('silk.urls', namespace='silk'))] 
```

*   最后，在数据库中创建足够的表：

```
python manage.py makemigrations
python manage.py migrate 
```

然后，您可以在 Internet 浏览器中浏览`/silk`以找到那里请求的页面。

# actionscript-3 - Player.io + MongoDb

> ID：10799986
> 
> 赞同：0
> 
> 时间：2012-05-29T13:17:38.883
> 
> 标签：actionscript-3, mongodb, multiplayer, player.io

有谁听说过有什么方法可以将 player.io (http://playerio.com/) 与 MongoDb (http://www.mongodb.org/) 连接起来？

我知道 player.io 在其付费功能包中有 BigDb (http://playerio.com/features/bigdb/)，但我想使用我自己的 MongoDb 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:12:20.457

使用免费包可以完全访问 BigDB。

[您可以使用多人网络类](http://playerio.com/documentation/reference/multiplayer/playerio.gamelibrary.web)从您自己的数据库中加载数据。然而，访问上述 Web 类是一项付费功能，您需要为您的 MongoDB 实例创建一个 Web 服务。

# java - 扩展和枚举常量

> ID：10799990
> 
> 赞同：-1
> 
> 时间：2012-05-29T13:17:43.627
> 
> 标签：java, enums

是否可以让一个枚举常量扩展另一个枚举常量（来自同一个枚举）？

**伪代码：**

```
private enum Mode{
  FRIGHTENED, BLINKING extends FRIGHTENED, SCATTER
} 
```

这样，可以在`switch`-block 中使用 enum-constants，如下所示：

```
switch (some_mode){
  case FRIGHTENED:
    // This would trigger when the actual "some_mode" is set
    //  to FRIGHTENED or BLINKING
    break;
  case BLINKING:
    // This would only trigger if the actual "some_mode" is set to BLINKING
} 
```

是否有任何模式可以让我这样做，或者我只是完全不在我的脑海中？

* * *

我可能需要更清楚地了解`switch`-statement 中显示的用例：我计划不检查所有可能的值，而只检查“父”值。

```
if (some_mode == Mode.FRIGHTENED){
  // The behavior in FRIGHTENED and BLINKING mode is the same. The only
  //  difference is the way they are visualized.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:21:16.723

在 Java 中，枚举是无法扩展的，所以如果要整理强相关的枚举，可以使用**嵌套的枚举**构造。请查看[此线程](https://stackoverflow.com/q/4718959/544983)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:22:28.750

有一种痛苦的方式来模拟这一点，但是不，一个枚举常量不可能扩展另一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:21:24.290

不，没有办法做到这一点。最接近的选择是

```
switch (some_mode){
  case BLINKING:
    // This would only trigger if the actual "some_mode" is set to BLINKING
    // no break statement!
  case FRIGHTENED:
    // This would trigger when the actual "some_mode" is set
    //  to FRIGHTENED or BLINKING
} 
```

# php - 除非用户已填写表格，否则禁止下载媒体

> ID：10799991
> 
> 赞同：3
> 
> 时间：2012-05-29T13:17:50.760
> 
> 标签：php

我正在为一个乐队制作一个网站，他们免费提供他们的 EP，但他们想要它，所以用户必须在下载之前输入他们的电子邮件地址......这将如何在 php 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:21:38.460

可下载的内容应放置在 Web 用户无法触及的范围内，但应在您的 PHP 脚本范围内。然后，一旦用户完成填写表格，您就可以通过使用“fopen”在本地打开文件来强制下载文件内容。

更新（添加示例代码）：

假设文件是​​“txt.txt”，它可能在您的脚本范围内。您将打开它，阅读然后在调用 header 并告诉它它是一个附件后放置内容（强制下载）

```
$done  = true;
        if($done == true){

            $filename = "txt.txt";
            $conn = fopen($filename,"r");

            $contents = fread($conn, filesize($filename));
            fclose($conn);
            header('Content-type: text/plain');         
            header('Content-Disposition: attachment; filename="downloaded.txt"');
            echo $contents;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:22:03.807

如果您以某种方式存储电子邮件，则只需`$_SESSION`在他们提交电子邮件时设置一个值，并且在编写页面时，如果`$_SESSION`已设置该值的一部分，则提供指向媒体的链接。

要开始会话并设置值：

```
session_start();
$_SERVER['hasEmail']=true; 
```

在页面中：

```
session_start();
if ($_SERVER['hasEmail']) {
    //Provide link
} 
```

然后，您还可以让媒体链接将您带到一个 PHP 脚本，该脚本使用`fopen()`或类似的方式从用户无法触及的文件系统上的另一个位置获取文件，例如 .htaccess 阻塞下的位置，它只会提供media 是`$_SESSION`设置的值。

# android - Android：如何以编程方式更新系统包

> ID：10799992
> 
> 赞同：1
> 
> 时间：2012-05-29T13:17:52.540
> 
> 标签：android

我正在 Android 中实现 updateService。它是具有系统权限的 Android 服务。它检查来自服务器的包更新，并执行更新。对于 /data/app 下的普通包，updateService 只需要调用 PackageInstaller 即可完成工作。但是 /system/app 下的系统包不能这样更新。我只想知道，updateService怎么更新系统包？特别是它本身是/system/app下的系统包，应该可以自行更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T13:37:50.033

似乎您可以重新安装磁盘以实现所需的权限， [这里有一些信息](https://stackoverflow.com/questions/8720885/how-to-save-files-to-android-system-directory)。

# ruby - 红宝石正则表达式错误

> ID：10799997
> 
> 赞同：-2
> 
> 时间：2012-05-29T13:17:57.987
> 
> 标签：ruby, regex, syntax-error

我的正则表达式：

```
https?://[\w-]+(?:\.[\w-]+)+(?:/[\w-]+)*(?:[./%?=&#-]\w+)+)? 
```

在 Ruby 中，我收到以下错误：

```
unmatched close parenthesis:/https?://[\w-]+(?:\.[\w-]+)+(?:/[\w-]+)*(?:[./%?=&#-]\w+)+)?/' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T13:22:15.293

我不知道我怎么能比错误消息更清楚。您的正则表达式有一个无与伦比的右括号。

```
https?://[\w-]+(?:.[\w-]+)+(?:/[\w-]+)*(?:[./%?=&#-]\w+)+)? 
```

注意有 3`(`和 4`)`

进一步阅读正则表达式[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

具体来说，您可能需要查看字符信息[http://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:21:21.440

似乎有一个“右括号”太多了。正如它在错误消息中所说的那样；）

# javascript - 垂直滚动的html列表

> ID：10799998
> 
> 赞同：1
> 
> 时间：2012-05-29T13:18:03.013
> 
> 标签：javascript, jquery, jquery-plugins

我有一个很长的 HTML 列表，比如 30 个项目。我想在一个垂直空间中显示这个列表，这个空间的高度只能容纳大约 5 个。列表应自动垂直滚动项目（如新闻行情），但有按钮可暂停滚动并移至列表中的下一个或上一个项目。当滚动到达列表的末尾时，它应该从头开始。

我正在寻找可以提供此功能的 jQuery 插件推荐。我还有一些其他的要求，它们不是绝对必要的，但非常可取：

*   可以容纳不同高度的列表项
*   不依赖于 jQuery-UI

显示页面时将加载整个列表，因此我**不需要**能够通过 AJAX 加载列表项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:21:55.263

你见过这个吗：

[http://buildinternet.com/2011/02/totem-a-vertical-ticker-jquery-plugin/](http://buildinternet.com/2011/02/totem-a-vertical-ticker-jquery-plugin/)

我最近使用它，效果很好。好像可以满足你的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:31:56.793

试试这个，这是一个最简单的解决方案，无需使用额外的 jQuery 插件：http: [//jsfiddle.net/shershen08/5q3Bv/4/](http://jsfiddle.net/shershen08/5q3Bv/4/)

# ruby-on-rails - 要使用的正确 Rails 关联

> ID：10799999
> 
> 赞同：0
> 
> 时间：2012-05-29T13:18:03.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many-through

我正在尝试在两个表之间创建关联。一张学生桌和一张电脑桌。一台计算机只能分配给一个学生（在任何时候），但一个学生可以分配给多台计算机。

这是我目前的想法。建立一个有很多的关系并稍微修改它。

```
class Student < ActiveRecord::Base
  has_many :assignemnts
  has_many :computers, :through => :assignments
end

class Computer < ActiveRecord::Base
 has_one :assignment
 has_one :student, :through => :assignments
end

class Assignment < ActiveRecord::Base
  belongs_to :student
  belongs_to :computer
end 
```

这似乎是处理这个问题的最佳方法吗？或者这里的专家很快就会听到更好的声音。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:05:58.153

您首先需要确定一个简单的一对多关系是否足以满足您的需求。

如果是，它会变得容易得多，因为您可以摆脱 Assignment-class 和 table。

然后，您的数据库表“计算机”需要一个 student_id 列，该列具有非唯一索引

您的模型应如下所示：

```
class Computer < ActiveRecord::Base
    belongs_to :student
end

class Student < ActiveRecord::Base
    has_many :computers, :dependent => :nullify
end 
```

“从属无效”是因为您不想在删除学生时删除计算机，而是将其标记为免费。

您的每台计算机只能分配给一个学生，但您可以将其重新分配给不同的学生，例如在明年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:26:56.440

You can also use has_and_belongs_to_many method. In your case it will be:

```
class Student < ActiveRecord::Base
    has_many :assignemnts
    has_and_belongs_to_many :computers, :join_table => 'assignments',
end

class Computer < ActiveRecord::Base
    has_one :assignment
    has_and_belongs_to_many :student, :join_table => 'assignments',
end 
```

or you can rename assignments table to computers_students and remove join_table

```
class Student < ActiveRecord::Base
    has_many :assignemnts
    has_and_belongs_to_many :computers
end

class Computer < ActiveRecord::Base
    has_one :assignment
    has_and_belongs_to_many :student
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:55:25.157

实际上，您的方法很好，正如`@alexkv`. 这是更多的讨论，而不是问题。

如果您想将映射表用于其他目的，例如存储其他字段，那么您的方法是最好的。连接模型的表中`has_many :through`有一个主键，并且可以像任何其他模型一样包含属性。

**来自 api.rubyonrails.org：**

> 选择建立多对多关系的方式并不总是那么简单。如果您需要将关系模型作为自己的实体使用，请使用 has_many :through。在处理遗留模式或从不直接处理关系本身时使用 has_and_belongs_to_many。

我可以建议您阅读此内容，以了解在您的情况下选择哪种方法更好：

*   [http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)
*   [http://blog.hasmanythrough.com/2006/4/20/many-to-many-dance-off](http://blog.hasmanythrough.com/2006/4/20/many-to-many-dance-off)